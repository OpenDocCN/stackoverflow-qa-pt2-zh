# StackOverflow 问答 15685000-15685999

# python - bbox 在这个脚本中指的是什么？

> ID：15685005
> 
> 赞同：0
> 
> 时间：2013-03-28T14:52:30.620
> 
> 标签：python, pdf, pdfrw

我是 Python 新手，正在尝试掌握现有脚本。此示例来自 pdfrw，如下所示：[http ://code.google.com/p/pdfrw/wiki/ExampleTools](http://code.google.com/p/pdfrw/wiki/ExampleTools)

“带有精美打印机和/或 Acrobat 完整副本的打印机可以轻松地将您的小型 PDF 转换为小册子（例如，在单个 11" x 17" 上打印 4 个字母大小的页面）。

但这假设有几件事，包括人员知道如何操作硬件和软件。booklet.py 可让您将 PDF 转换为预先格式化的小册子，以减少他们搞砸的机会："

尽我所能告诉的步骤是：

*   该函数开始循环浏览页面
*   声明了一个变量“shift_right” ??? （我认为它是用于元数据的？）
*   声明了一个仅对元数据有用的变量“stuff”（我认为）
*   x 增加 BBox 列表的第三个索引（这个列表是什么，它是什么时候建立的？）
*   y 分配给 y 和 Bbox 列表的第三个索引之间的较大值（同样，这个列表指的是什么？）

我认为我的核心困惑是关于这两条线与 BBox，以及它们如何交互以创建 11x17 小册子 PDF。感谢任何可以解决此问题的人。

```
 import sys
    import os

    import find_pdfrw
    from pdfrw import PdfReader, PdfWriter, PdfDict, PdfArray, PdfName, IndirectPdfDict
    from pdfrw.buildxobj import pagexobj
def fixpage(*pages):
    pages = [pagexobj(x) for x in pages]

    class PageStuff(tuple):
        pass

    x = y = 0
    for i, page in enumerate(pages):
        index = '/P%s' % i
        shift_right = x and '1 0 0 1 %s 0 cm ' % x or ''
        stuff = PageStuff((index, page))
        stuff.stream = 'q %s%s Do Q\n' % (shift_right, index)
        x += page.BBox[2]
        y = max(y, page.BBox[3])
        pages[i] = stuff

    # Multiple copies of first page used as a placeholder to
    # get blank page on back.
    for p1, p2 in zip(pages, pages[1:]):
        if p1[1] is p2[1]:
            pages.remove(p1)

    return IndirectPdfDict(
        Type = PdfName.Page,
        Contents = PdfDict(stream=''.join(page.stream for page in pages)),
        MediaBox = PdfArray([0, 0, x, y]),
        Resources = PdfDict(
            XObject = PdfDict(pages),
        ),
    )

inpfn, = sys.argv[1:]
outfn = 'booklet.' + os.path.basename(inpfn)
pages = PdfReader(inpfn).pages

# Use page1 as a marker to print a blank at the end
if len(pages) & 1:
    pages.append(pages[0])

bigpages = []
while len(pages) > 2:
    bigpages.append(fixpage(pages.pop(), pages.pop(0)))
    bigpages.append(fixpage(pages.pop(0), pages.pop()))

bigpages += pages

PdfWriter().addpages(bigpages).write(outfn) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:57:46.980

Bbox 通常是“边界框”的简写：在这种情况下，是定义页面尺寸的矩形。在这种情况下，它看起来是一个由 4 个数字组成的数组，其中前两个是页面的左上角 (0,0)，第三个是页面右侧的 x 坐标（其中，因为左侧为 0，也是宽度），第四个是页面的底部/高度。

# symfony - 选择具有关联键的实体上的所有记录

> ID：15685008
> 
> 赞同：0
> 
> 时间：2013-03-28T14:52:34.007
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我有两个实体，计划和定价层。计划映射到我的计划表并有一个名为pricing_tier_id 的列。这通过其 id 列映射到 PricingTiers 表。实体具有从 Plan 到 PricingTier 的 manyToOne 关联，以及从 PricingTier 到 Plan 的 OneToMany 关联。这些如下：

**计划实体**

```
etrak\OnlineOrderProcessingBundle\Entity\Plan:
  type: entity
  table: plans
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    name:
      type: string
      length: 255
      nullable: true
    description:
      type: text
      nullable: true
    termsConditions:
      column: terms_conditions
      type: text
      nullable: true
    active:
      type: boolean
      nullable: true
    amount:
      type: decimal
      nullable: true
      scale: 2
      precision: 5
    affinity:
      type: boolean
      nullable: true
    deactivationFee:
      column: deactivation_fee
      type: decimal
      scale: 2
      precision: 5
      nullable: true
    gracePeriodDays:
      column: grace_period_days
      type: integer
      nullable: true
    recurringInMonths:
      column: recurring_in_months
      type: integer
      nullable: true
    activeStartDate:
      column: active_start_date
      type: date
    activeEndDate:
      column: active_end_date
      type: date
  lifecycleCallbacks:
    prePersist: [ prePersist ]
  manyToOne:
    pricingTier:
      targetEntity: PricingTier
      inversedBy: plans
      joinColumn:
        name: pricing_tier_id
        referencedColumnName: id 
```

**定价层实体**

```
etrak\OnlineOrderProcessingBundle\Entity\PricingTier:
  type: entity
  table: pricing_tiers
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    name:
      type: string
      length: 50
    description:
      type: string
      length: 100
      nullable: true
    minimumDevices:
      column: minimum_devices
      type: integer
    isAffinity:
      column: is_affinity
      type: boolean
    keyname:
      type: string
      length: 55
    createdBy:
      column: created_by
      type: string
      length: 20
    createdOn:
      column: created_on
      type: datetime
    updatedOn:
      column: updated_on
      type: datetime
      nullable: true
  lifecycleCallbacks:
    prePersist: [ onPrePersist ]
    preUpdate: [ onPreUpdate ]
  oneToMany:
    plans:
      targetEntity: Plan
      mappedBy: pricingTier
  oneToOne:
    product:
      targetEntity: Product
      joinColumn:
        name: product_id
        referencedColumnName: id 
```

我需要做的是：SELECT * FROM plans WHERE pricing_tier_id = 2

如果可能的话，我想远离 SQL/DQL。Doctrine 肯定有内置的方法来做到这一点吗？请注意，我在 Symfony 2.1 中使用 Doctrine 作为捆绑包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:20:38.173

您能否不只是使用存储库找到您想要的定价层..

```
$pricingTier = $this->getDoctrine()
                    ->getRepository('OnlineOrderProcessingBundle:PricingTier')
                    ->find($id); 
```

然后您可以使用..访问所有相关计划

```
$pricingTier->getPlans() 
```

或者在树枝上

```
{{ pricingTier.plans }} 
```

# ios - UIImageView 阻止 QLPreviewController 的触摸

> ID：15685017
> 
> 赞同：0
> 
> 时间：2013-03-28T14:52:52.727
> 
> 标签：ios, touch, user-input, quicklook

我有一个带有透明渐变的 UIImageView，我想把它放在 quickLook 预览控制器的前面。但是，当我这样做时，预览控制器不再接收触摸输入。如果我为 TableView 执行此操作，则没有问题。

我使用它在我的 viewController 的 init 中初始化 qlPreviewController：

```
 QLPreviewController* preview = [[QLPreviewController alloc] init];
    preview.dataSource = self;
    preview.delegate = self;
    [self addChildViewController:preview];//*view controller containment
    CGFloat w= self.view.frame.size.width; 
    CGFloat h= self.view.frame.size.height;
    preview.view.frame = CGRectMake(0, 0,w, h);
    [self.view addSubview:preview.view];  
    [self.view sendSubviewToBack:preview.view];
    [preview didMoveToParentViewController:self];
    self.previewController = preview; 
```

self.view 前面有一个 UIImageView 。如果我将其 Hidden 标志设置为 YES，则交互有效，如果我将其设置为 NO，则交互会中断，即使我已将 UserInteractionEnabled 设置为 NO。

有没有办法让 UIImageView 将触摸传递给预览或其视图？

我一直在尝试将 hittest 传递给 previewController 的视图，但这什么也没做。

我可以使用手势识别器来控制 previewController 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:50:08.207

嘿......在发布我的问题后，我想到了一个新的解决方案：

在 UIWebView 中打开我的 .doc 文件。

这要容易得多，并且在 UIImageView 下仍然可以进行用户交互。

解决了！

# android - CSipSimple 的构建路径问题

> ID：15685018
> 
> 赞同：0
> 
> 时间：2013-03-28T14:52:54.833
> 
> 标签：android, build-process, dex, csip-simple

我知道这是 stackoverflow 中的一个热门问题，但我找不到解决这个问题的好方法。

我正在为 android 开发一个 SIP 应用程序，并且我正在使用 CSipSimple 项目作为库（该项目也使用 actionbarsherlock 作为库）直到现在我在外部设备上运行我的 SIP 应用程序时从未遇到任何问题，但是现在我被控制台的这条消息卡住了：

```
[2013-03-28 15:24:49 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/actionbarsherlock/R$attr;
[2013-03-28 15:24:49 - GoldenCallCSIP] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/actionbarsherlock/R$attr; 
```

我想这可能是构建路径问题，但我无法删除 Android Dependencies 虚拟文件夹中的相关 jar，更准确地说是由于我正在使用的 CSipSimple 库的 Android 依赖项中的 actionbarsherlock jar 文件和我的主要项目。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:33:42.533

好的，我找到了，

清理并构建actionbarsherlock，删除siphome中的actionbarsherlock库，清理并构建它，你会遇到错误（很明显）然后添加actionbarsherlock库并重建siphome。

完成后，为您的项目做同样的事情，删除 siphome 库，清理构建，再次添加 siphome 并重建。

为我工作。

# wordpress - wordpress 表单提交和 404 错误页面

> ID：15685020
> 
> 赞同：7
> 
> 时间：2013-03-28T14:53:01.083
> 
> 标签：wordpress

我在 wordpress 模板页面上有以下表格。每次提交表单时都会收到 404 错误，但我没有使用表单中的任何保留的工作压参数名称。

```
<?php
/**
 * Template Name: Registration Template
 */
if(isset($_POST['form-submitted'])) 
{
    if(trim($_POST['runner']) === '') {
        $runnerError = 'Please enter runner runner.';
        $hasError = true;
    } else {
        $runner = trim($_POST['runner']);
    }

    if(trim($_POST['racenumber']) === '')  {
        $numberError = 'Please enter a race number.';
        $hasError = true;
    } else {
        $racenumber = trim($_POST['racenumber']);
    }

    $race = trim($_POST['race']);
    error_log($race.' '.$runner.' '.$racenumber);
    $registrationSubmitted = true;
}
get_header();
echo "<pre>GET "; print_r($_GET); echo "</pre>";
echo "<pre>POST "; print_r($_POST); echo "</pre>";
?>

<div id="container">

    <?php 
    if(isset($registrationSubmitted) && $registrationSubmitted == true) 
    {
        echo '<div class="thanks"><p>The runner has been registered.</p></div>';
    }
    else
    {
        $races = // magic array
        $selectRaces = '<select name="race" id="race">';
        foreach($races as $racez)
        {
            $selectRaces .= sprintf('<option value=%d>%s</option>',$race->id,$race->name);
        }
        $selectRaces .= '</select>';

        echo apply_filters('the_content','
            <form action="'.get_permalink().'" id="form" method="POST">
                [one_half last="no"]
                <b>Race Details</b><br/>
                RaceNumber<input type="text" name="racenumber" id="racenumber"/><br/>
                Race'.$selectRaces.'<br/>
                [/one_half]
                [one_half last="yes"]
                <b>Runner Details</b><br/>
                ID<input type="text" name="runner" id="runner"/><br/>
                Firstname<input type="text" name="first" id="first"/><br/>
                Surname<input type="text" name="last" id="last"/><br/>
                Gender<input type="text" name="gender" id="gender"/><br/>
                DOB<input type="text" name="dob" id="dob"/><br/>
                Standard<input type="text" name="standard" id="standard"/><br/>
                Company<input type="text" name="company" id="company"/><br/>
                [/one_half]
                <input type="submit" value="Register Runner"/>
                <input type="hidden" name="form-submitted" id="bhaa-submitted" value="true" />
            </form>');
    }
    echo '</div>';
?>
<?php get_footer(); ?> 
```

我已经自定义了我的 404 页面来转储 $_POST 值，所以我确定正在提交参数值。

```
[racenumber] => 5
[race] => 2596
[runner] => 5
[first] => 
[last] => 
[gender] => 
[dob] => 
[standard] => 
[company] => 
[form-submitted] => true 
```

谁能解释我的'isset（$_POST ['form-submitted']）'中的逻辑没有被执行？

生成的html

```
<form action="http://localhost/registration/" id="form" method="POST">
<div class="one_half">
                <b>Race Details</b><br><br>
                RaceNumber<input name="number" id="number" type="text"><br><br>
                Race<br>
<select name="race" id="race">
<option value="2596" id="2596">4-Mile-M</option>
<option value="2595" id="2595">2-Mile-W</option>
</select> 
```

编辑

我已经更改了设置选择下拉列表值的代码，以使用递增的 int 值，而不是使用 sprintf 将字符串值映射到 int 值。选择第一个元素时，表格提交，如果选择了第二个选项，我将获得404！

```
$races = // magic array
$selectRaces = '<select name="race" id="race">';
$i=0;
foreach($races as $racez)
{
    $selectRaces .= sprintf('<option value=%d>%s</option>',$i++,$race->name);
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-19T15:02:02.937

问题是 WordPress 保留了一些单词，并且在提交表单时会抛出该错误：

我发现自己并在网上冲浪的一些词是：

*   自定义帖子类型名称
*   分类名称
*   “姓名”
*   “天”
*   “月”
*   “年”
*   “类别”
*   “标题”

因此，在创建自定义表单时要小心，并尝试使用一些前缀来命名您的输入。就我而言，我有一个名为“历史”的自定义帖子类型，并且我以相同的方式命名输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:07:58.257

您是否尝试过重置您的永久链接？可能是某个地方的问题。看起来或看起来不是问题`isset($_POST['form-submitted'])'`

您的页面名称可能正在使用另一个插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:08:07.260

WordPress`get_permalink()`正在生成一个 URL，该 URL 将被注入到您的输出 HTML 的表单标签中。

如果您查看 HTML 源代码，它显示在您的浏览器中（例如右键单击、查看源代码或右键单击、检查元素），请找到以下内容：

`<form action='some_url_here' ...>`.

我希望这个 URL 可能与您当前正在浏览的 URL 相同……即它告诉浏览器将详细信息发送*回*同一个 PHP 文件以处理其结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T03:47:35.877

输入唯一的名称和 ID 试试这个表格

```
<form action="'.get_permalink().'" id="form" method="POST">
                [one_half last="no"]
                <b>Race Details</b><br/>
                RaceNumber<input type="text" name="racenumber" id="racenumber"/><br/>
                Race'.$selectRaces.'<br/>
                [/one_half]
                [one_half last="yes"]
                <b>Runner Details</b><br/>
                ID<input type="text" name="runner_id" id="runner_id"/><br/>
                Firstname<input type="text" name="runner_first" id="runner_first"/><br/>
                Surname<input type="text" name="runner_last" id="runner_last"/><br/>
                Gender<input type="text" name="runner_gender" id="runner_gender"/><br/>
                DOB<input type="text" name="runner_dob" id="runner_dob"/><br/>
                Standard<input type="text" name="runner_standard" id="runner_standard"/><br/>
                Company<input type="text" name="runner_company" id="runner_company"/><br/>
                [/one_half]
                <input type="submit" value="Register Runner"/>
                <input type="hidden" name="form-submitted" id="bhaa-submitted" value="true" />
            </form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-18T16:44:22.873

这是一个完整的列表：

*   附件
*   附件ID
*   作者
*   作者姓名
*   日历
*   猫
*   类别
*   类别__和
*   类别__in
*   类别__not_in
*   分类名称
*   每页评论数
*   评论弹出窗口
*   风俗
*   custom_messenger_channel
*   定制
*   页面
*   天
*   调试
*   嵌入
*   错误
*   精确的
*   喂养
*   小时
*   链接类别
*   米
*   分钟
*   月数
*   更多的
*   姓名
*   导航菜单
*   随机数
*   无分页
*   抵消
*   命令
*   订购
*   p
*   页
*   page_id
*   分页的
*   页面名称
*   铅
*   烫发
*   邮政
*   发帖
*   post__not_in
*   post_format
*   post_mime_type
*   post_status
*   post_tag
*   post_type
*   帖子
*   post_per_archive_page
*   post_per_page
*   预览
*   机器人
*   s
*   搜索
*   第二
*   句子
*   展示帖
*   静止的
*   子帖
*   subpost_id
*   标签
*   标记和
*   标签__in
*   标签__not_in
*   tag_id
*   tag_slug__and
*   tag_slug__in
*   分类
*   结核病
*   学期
*   条款
*   主题
*   标题
*   类型
*   w
*   带评论
*   没有评论
*   年

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-27T09:56:45.713

我遇到了同样的问题，但我发现当我提交空输入字段（输入字段中没有任何值）时工作正常，然后我留下几个输入字段保持为空并将值放在其他也工作正常的字段中。

> 这意味着问题是我的输入字段之一，不在 wordpress 或我的代码中。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-04-26T16:52:25.877

您不能在 POST FORM 中使用此变量

_ajax_nonce _page _per_page _signup_form _total _url _wp_http_referer _wp_original_http_referer _wp_unfiltered_html_comment _wpnonce _wpnonce-custom-header-upload

aa action action2 active_post_lock add_new add_new_users addmeta admin_bar_front admin_color admin_email admin_password admin_password2 ajax align allblogs allusers alt approve_parent 批准附件 attachment_id 附件 auth_cookie 作者 author_name autocomplete_type auto_draft 自动添加页面自动保存

背景附件背景颜色背景位置x背景重复禁止电子邮件域博客博客名称博客公共博客上传空间博客名称批量编辑

c 日历 cat category_base category_name 猫列表 changeit 更改字符集复选框已选中 clear-recent-list 已关闭评论 comment_approved comment_author comment_author_email comment_author_url comment_content comment_date comment_ID comment_parent comment_post_ID comment_shortcuts comment_status comments_listing comments_popup confirmdelete connection_type content context cpage create-new-attachment createuser customize_messenger_channel 自定义 customlink-tab

date date_format date_format_custom day default-header delete delete_all delete_all2 delete_comments delete_option delete_tags delete_widget deletebookmarks deletecomment deleted deletemeta deletepost description detached dismiss display_name do

编辑日期电子邮件错误确切摘录

特征 提要 获取 fheight 文件 fileupload_maxk 过滤器 find_detached first_comment first_comment_author first_comment_url first_name first_page first_post found_post_id fwidth

global_terms_enabled GLOBALS gmt_offset guid

高度 hh hidden hidden_​​aa hidden_​​jj hidden_​​mm hidden_​​mn hidden_​​hh 历史主机名小时 html-upload

id ID ids id_base 非法名称 insert-gallery insertonlybutton interim-login item-object item-type

jj json json_data

钥匙

last_name limited_email_domains link_id link_image link_name link_rss link_url link_visible linkcheck locale locked log logged_in_cookie

m media media_type menu menu_items menu-item menu-item-attr-title menu-item-classes menu-item-db-id menu-item-description menu-item-object menu-item-object-id menu-item-parent- id menu-item-position menu-item-target menu-item-title menu-item-type menu-item-url menu-item-xfn menu-locations menu-name message metakeyinput metakeyselect metavalue minute mm mn mode monthnum more move multi_number

名称 nav-menu-locations 新 new_role new_slug new_title newcat newcomment_author newcomment_author_email newcomment_author_url newcontent newuser 昵称 no_placeholder noapi noconfirmation noredir number

偏移 oitar option option_page order orderby

p pb 页面 page_columns page_id page_options pagegen_timestamp pagename parent_id pass1 pass2 password permalink_structure photo_description photo_src phperror ping_status plugin plugin_status 指针位置 post post_category post_data post_format post_ID post_id post_mime_type post_password post_status post_title post_type post_view postid帖子预览primary_blog private_key ps public_key 发布pwd

询问

reassign_user reauth 重定向 redirect_to ref 引用 注册 注册通知 rememberme 删除背景 removeheader removewidget reset-background resetheader review rich_editing 机器人角色

s 相同 保存 savewidget savewidgets screen scrollto search 第二部分 selectall selection 发送 send_password 句子 short show_sticky sidebar sidebars signup_for signup_form_id site_id site_name sitename size 跳过裁剪垃圾邮件 src ss stage start 静态状态 sticky subdomain_install 提交 subpost_id super_admin

tab tag tag_ID tag-name tag_base tags_input tax tax_input tag-name target taxonomy tb term text-color the-widget-id 主题 theme_status thumb timezone_string time_format time_format_custom title thumbnail_id 垃圾 垃圾类型

undismiss unspam unspammed untrash untrashed url update_home_url updated upgrade upload_filetypes upload_space_check_disabled use_ssl user user_id user_login user_name username users

验证删除版本可见性可见

w weblog_titlewelcome_emailwelcome_user_email widget_id widget_number widget-id widget-recent-comments widget-rss width withcomments withoutcomments wp_customize wp_http_referer wp_screen_options wp-preview WPLANG

x1

y1 年

# maven - 初始化 gerrit 插件项目时出错

> ID：15685026
> 
> 赞同：2
> 
> 时间：2013-03-28T14:53:09.137
> 
> 标签：maven, plugins, gerrit, maven-archetype

因此，我正在尝试遵循 Gerrit 文档（2.5.2 版）中的文档说明，该说明解释了如何设置您的 gerrit 插件项目（[此处](http://gerrit-documentation.googlecode.com/svn/Documentation/2.5.2/dev-plugins.html)的文档）。

[我从这里](http://www.slideshare.net/lucamilanesio/gerrit-how-to-cook-a-plugin-in-only-10-mins#)的演示开始，它工作得很好，直到“第 3 步”幻灯片具有与上面链接的 gerrit doc 中的内容类似的 mvn 命令。

项目创建步骤失败并出现以下错误：

```
[WARNING] Archetype not found in any catalog. Falling back to central repository (http://repo1.maven.org/maven2).
[WARNING] Use -DarchetypeRepository=<your repository> if archetype's repository is elsewhere.
Downloading: http://repo1.maven.org/maven2/com/google/gerrit/gerrit-plugin-archetype/2.5-SNAPSHOT/maven-metadata.xml
Downloading: http://repo1.maven.org/maven2/com/google/gerrit/gerrit-plugin-archetype/2.5-SNAPSHOT/gerrit-plugin-archetype-2.5-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.529s
[INFO] Finished at: Thu Mar 28 09:45:15 CDT 2013
[INFO] Final Memory: 11M/361M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (com.google.gerrit:gerrit-plugin-archetype:2.5-SNAPSHOT) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

所以我现在有点迷路了。我不知道该怎么做才能解决它。

特别是因为我正在按照 Gerrit 记录的命令来设置项目。我会假设这将包含正确的原型信息。但显然事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:38:46.203

Gerrit does not seem to provide their archetype on a public repo. It looks like you will have to first build and install the archetype from the sources.

This is shown on the "Step 2" slide

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-01T08:52:13.030

您必须克隆 gerrit 源代码，然后：

```
cd gerrit/gerrit-plugin-archetype && mvn install 
```

其他方法是使用文档中提到的模板：

```
 git clone https://gerrit.googlesource.com/plugins/cookbook-plugin 
```

# java - 在 mysql 的 SELECT 查询中使用 JTextBox 中的值

> ID：15685027
> 
> 赞同：0
> 
> 时间：2013-03-28T14:53:11.087
> 
> 标签：java

我有一个文本框。当用户在文本框中输入名称时，我希望从表中获取详细信息

```
String getTxt = text.getText();
ResultSet rs=st.executeQuery("SELECT * FROM authors_4 WHERE self_authors="+getTxt); 
```

在执行这个我得到异常

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server 
```

这个有什么解决办法。需要帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:54:50.873

您缺少单引号：

```
st.executeQuery("SELECT * FROM authors_4 WHERE self_authors='" + getTxt + "'"); 
```

更好地使用 a`PreparedStatement`来防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

# wpf - WPF：防止引发“StaticResource not besolved”异常？

> ID：15685033
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:53:22.883
> 
> 标签：wpf, staticresource

正如我们所知，如果没有找到密钥，它会引发异常。但是，有没有办法**防止**这种情况，只需将控件的可见性设置为**隐藏**？或者像绑定一样给它一个**FallbackValue ？**

一个简单的例子：
`<TextBlock Text="{StaticResource myKey}"/>`
现在“myKey”没有定义，默认情况下会引发异常。但我希望我可以将TextBlock的Visiblity设置为隐藏：
`<TextBlock Text="nothing here" Visibilty="Hidden">`
或者：（
`<TextBlock Text="nothing here" FallbackValue="default value">`注意：“FallbackValue”确实不存在）
然后应用程序可以继续。没有错，干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:59:47.490

到目前为止，我可以理解您的问题，您可以将代码放入 try 子句中，然后捕获异常。它至少允许您使用控件执行操作。（请记住，您可以使用 finally 子句强制执行）..

如果我的假设是错误的，我提前道歉并要求更具体:) 祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:20:51.613

一个简单的实现：
我们可以继承[StaticResourceExtension](http://msdn.microsoft.com/en-us/library/system.windows.staticresourceextension.aspx)（是的，它不是密封的:)），然后重写[ProvideValue](http://msdn.microsoft.com/en-us/library/system.windows.staticresourceextension.providevalue.aspx)方法，返回一个默认值。
解决了：）

# xml - 架构的 XSD 包含不适用于 maxOccurs="unbounded"

> ID：15685034
> 
> 赞同：1
> 
> 时间：2013-03-28T14:53:25.470
> 
> 标签：xml, xsd

在 stackoverflow 社区的大量帮助下，我正在缓慢但肯定地获得一些 XML。

我有一个工作正常的 XML 架构，并且包含很多类型定义。所以，我已经拆分了我的模式，将类型定义放在不同的模式中，这样我就可以在其他模式中使用它们。如果你跟随；这就是我所做的......

这是我的 XML

```
<?xml version="1.0" encoding="UTF-8"?>

<ns:Root
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ns="urn:TestNamespace"  
    xsi:schemaLocation="urn:TestNamespace Test1.xsd"
    >
    <ns:element1 id="001">
        <ns:element2 id="001.1" order="1">
            <ns:element3 id="001.1.1" />
        </ns:element2>
        <ns:element2 id="001.2" order="2">
            <ns:element3 id="001.1.2" />
        </ns:element2>        
    </ns:element1>
    <ns:element1 id="002">
        <ns:element2 id="002.1" order="3">
        <ns:element3 id="002.1.1" />
        </ns:element2>
        <ns:element2 id="002.2" order="4">
            <ns:element3 id="002.1.2" />
        </ns:element2> 
    </ns:element1>    
</ns:Root> 
```

这是我的 XSD

```
<?xml version="1.0"?>

<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="urn:TestNamespace"
            xmlns:ns="urn:TestNamespace"
            elementFormDefault="qualified">

    <xsd:include schemaLocation="TestTypes1.xsd"/>
    <xsd:element name="Root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="element1" maxOccurs="unbounded" type="ns:element1Type"/>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:unique name="uniqueElement2OrderInElement1">
            <xsd:selector xpath="./ns:element1" />
            <xsd:field xpath="ns:element2/@order" />
        </xsd:unique>        
    </xsd:element>
</xsd:schema> 
```

这是我的新类型模式这里定义的元素直接从它们工作的上述模式中复制出来。

```
<?xml version="1.0"?>

<xsd:schema version="1.0"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema"
           targetNamespace="urn:TestNamespace"
           xmlns:ns="urn:TestNamespace"           
           elementFormDefault="unqualified">
    <xsd:complexType name="element1Type">
        <xsd:sequence>
            <xsd:element name="element2" maxOccurs="unbounded" type="ns:element2Type"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>

    <xsd:complexType name="element2Type">
        <xsd:sequence>
            <xsd:element name="element3" type="ns:element3Type" />
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string" />
        <xsd:attribute name="order" type="xsd:string" />
    </xsd:complexType>

    <xsd:complexType name="element3Type">
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>        
</xsd:schema> 
```

当我现在尝试验证我的 XML 时，我得到了这个错误；

cvc-complex-type.2.4.a：发现以元素“ns:element2”开头的无效内容。需要“{element2}”之一。[9] cvc-complex-type.2.4.a：从元素“ns:element2”开始发现无效内容。需要“{element2}”之一。[17]

其中第 9 行和第 17 行与每个“element1”中第一个“element2”的打开有关。正如我所说，这在我将它们分开之前有效，所以我认为现在我一定丢失了一些东西，或者未能将某些东西从一个翻译到另一个。似乎在抱怨它需要一个“element2”，即使我删除了“element2”的第二个实例之一，我也会遇到同样的错误。元素的属性似乎是正确的，因为它允许无限次出现。

我想我误读了错误。

与以往一样，我们非常感谢任何帮助或指导。感谢期待

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:22:39.597

我怀疑您应该在类型架构中放置`elementFormDefault="qualified"`，而不是~~elementFormDefault="unqualified"~~，因为它在主 xsd 中是合格的，并且在 xml 中是合格的。

# c++ - TStringList C++ 生成器访问冲突

> ID：15685040
> 
> 赞同：0
> 
> 时间：2013-03-28T14:53:50.073
> 
> 标签：c++, string, tstringlist, c++builder-2010, c++builder-2007

我试图访问 a 中的特定项目，前提`TStringList`是它们存在。

```
if (myTStringList->Count > -1) {
    strSomeString = myTStringList->Strings[0];
} 
```

为什么这会给我带来访问冲突，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:57:31.450

`Count`如果大于 0 ，则列表中只有一个字符串。您正在检查它是否大于 -1。将其更改为：

```
if ( myTStringList->Count > 0 )
{
    strSomeString = myTStringList->Strings[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:46:56.210

两个问题：

1.  你怎么知道`myTStringList`甚至存在而不指向`NULL`？
2.  你为什么要检查计数是否大于**负**一？如果列表为空，则计数为 0。

# sql-server - TSQL 从where中的另一个表中选择

> ID：15685047
> 
> 赞同：1
> 
> 时间：2013-03-28T14:54:09.513
> 
> 标签：sql-server, tsql, select, where

我正在寻找一种更优雅（可能更快）的解决方案来解决我的困境。

我有以下查询来生成关于呼叫流量表的报告：

```
SELECT 'Tariff1' as [Tariff], Count([Number]) as [Number of calls]  ,sum(convert(bigint,[Seconds]))/60 as [Minutes], sum([CustomerCost]) as [Customer Cost], sum([WholesaleCost]) as [WholesaleCost]
  FROM [MarchCalls]
 where [AccNo] in (select [accno] from [Tariffs] where [Tariff] = 'Tariff1')

union

SELECT 'Tariff2' as [Tariff], Count([Number]) as [Number of calls]  ,sum(convert(bigint,[Seconds]))/60 as [Minutes], sum([CustomerCost]) as [Customer Cost], sum([WholesaleCost]) as [WholesaleCost]
  FROM [MarchCalls]
 where [AccNo] in (select [accno] from [Tariffs] where [Tariff] = 'Tariff2')

union
SELECT 'Tariff3' as [Tariff], Count([Number]) as [Number of calls]  ,sum(convert(bigint,[Seconds]))/60 as [Minutes], sum([CustomerCost]) as [Customer Cost], sum([WholesaleCost]) as [WholesaleCost]
  FROM [MarchCalls]
 where [AccNo] in (select [accno] from [Tariffs] where [Tariff] = 'Tariff3')

 union

SELECT 'Total' as [Tariff], Count([Number]) as [Number of calls]  ,sum(convert(bigint,[Seconds]))/60 as [Minutes], sum([CustomerCost]) as [Customer Cost], sum([WholesaleCost]) as [WholesaleCost]
  FROM [MarchCalls] 
```

几点： 由于记录量和其中的数字，需要转换（bigint） 返回的记录集必须保持这种格式 此数据（和数据库）是严格只读的 SQL server 2012

这个查询在每个月底需要更长的时间，我需要减少时间

谁能帮我简化这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:00:39.400

您可以加入 AccNo 字段，而不是使用 IN：

```
SELECT 
    T.[Tariff], 
    Count([Number]) as [Number of calls] ,
    sum(convert(bigint, [Seconds]))/60 as [Minutes], 
    sum([CustomerCost]) as [Customer Cost], 
    sum([WholesaleCost]) as     [WholesaleCost]
FROM [MarchCalls] M
inner join [Tarrifs] T on M.AccNo=T.Accno and  [Tariff] in ('Tariff1','Tariff2', 'Tariff3')
group by [Tariff] with ROLLUP 
```

# rest - REST 更新子对象 - 防止 Id 字段更改

> ID：15685048
> 
> 赞同：2
> 
> 时间：2013-03-28T14:54:11.570
> 
> 标签：rest, put

假设我有以下对象图，客户端可以在 HTTP PUT 请求中提交以更新我的父对象

```
{
  "Id": 123,
  "FirstName": "Joe",
  "LastName": "Smith",
  "Schools": [
    {
      "Id": 444,
      "Name": "Fun University"
    },
    {
      "Id": 555,
      "Name": "Unfun University"
    }
  ]
} 
```

在我的服务中，更新学校的唯一方法是通过学生。但是，我不一定能阻止客户端修改“444”id。

我的问题是： 1\. 仅在服务器上验证 id 为 444 的学校属于 id 为 123 的学生是否足够安全？2\. 或者，我的客户是否需要使用学生服务向学生提出请求，然后使用学生服务上的学校列表，调用学校服务（我将创建）并在那里进行 PUT？

在场景 1 中，我将使用[http://www.mydomain.com/api/students/123](http://www.mydomain.com/api/students/123) (PUT) 更新整个对象。

在场景 2 中，我将使用[http://www.mydomain.com/api/schools/444](http://www.mydomain.com/api/schools/444) (PUT)仅更新学校对象

到目前为止，我的意图是方法#1，但这不是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:09:42.993

### 够安全吗...

仅在服务器上验证 id 为 444 的学校属于 id 为 123 的学生

**为什么要检查依赖项？**
如果您只是编辑一所学校，那么这对学生资源应该没有任何兴趣。

只需发出您的`PUT /student/123/school/444`并处理它。如果您的客户有更直接的访问权限是有意义的，那么只需`/school/{ID}`将其作为一项新服务实施即可。

我认为你真正需要的是一个`ID-not-changeable constraint`. 只需禁止任何用户通过 put 请求更改资源的 ID。很少需要更改 ID，并且由于其影响应格外小心处理（届时必须更新所有学生的关系）。

A`PUT /students/123`不应该被允许改变学校本身，而只能改变学生与他们的关系（从学生中删除它们或添加新的附加项）。
您处理此问题的代码完全取决于您。

# iphone - 无法从 iOS 中创建的 plist 文件中获取值

> ID：15685051
> 
> 赞同：0
> 
> 时间：2013-03-28T14:54:15.533
> 
> 标签：iphone, ios, objective-c, xcode, plist

我是 ios 开发中的新人，我无法从使用以前的方法创建的 plist 中读取值。read 方法返回 (null) (null)。谁能帮我？

在这里，我创建了一个 plist：

```
- (void)createAppPlist {

    plistPath = [self getDataFileDir];
    // Create the data structure

    rootElement = [NSMutableDictionary dictionaryWithCapacity:3];
    NSError *err;
    name = @"North America";
    country = @"United States";

    continentElement = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:name, country, nil] forKeys:[NSArray arrayWithObjects:@"Name", @"Country", nil]];

    [rootElement setObject:continentElement forKey:@"Continent"];

    //Create plist file and serialize XML

    data = [NSPropertyListSerialization dataWithPropertyList:rootElement format:NSPropertyListXMLFormat_v1_0 options:0 error:&err];
    if(data)
    {
        [data writeToFile:plistPath atomically:YES];
    } else {
        NSLog(@"An error has occures %@", err);
    }

    NSLog(@"%@", rootElement);
    NSLog(@"%@", data);

} 
```

在这里我试图获得价值..

```
-(void)readAppPlist
{
    plistPath = [self getDataFileDir];
    NSMutableDictionary *propertyDict = [[NSMutableDictionary alloc] initWithContentsOfFile:plistPath];
    name = [propertyDict objectForKey:@"Name"];
    country = [propertyDict objectForKey:@"Country"];

    NSLog(@"%@     %@", name, country);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:15:38.057

使用以下代码在文档目录中创建和读取 Plist，您可以根据需要更改存储路径

```
- (void)createAppPlist {

//    plistPath = [self getDataFileDir];
    // Create the data structure

    NSMutableDictionary *rootElement = [NSMutableDictionary dictionaryWithCapacity:3];

    NSString *name = @"North America";
    NSString *country = @"United States";

    NSMutableDictionary *continentElement = [NSMutableDictionary dictionaryWithObjects:[NSArray arrayWithObjects:name, country, nil] forKeys:[NSArray arrayWithObjects:@"Name", @"Country", nil]];

    [rootElement setObject:continentElement forKey:@"Continent"];

    //Create plist file
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];
    NSString *filePath = [docDir stringByAppendingPathComponent:@"myPlist.plist"];
    [rootElement writeToFile:filePath atomically:YES];

    NSLog(@"%@", rootElement);
}

-(void)readAppPlist
{
    // Get pList file path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];
    NSString *filePath = [docDir stringByAppendingPathComponent:@"myPlist.plist"];

    NSMutableDictionary *propertyDict = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath];
    NSDictionary *rootDict = [propertyDict valueForKey:@"Continent"];

    // now read all elements inside, it will print key an value
    [rootDict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop){
        NSLog(@"[%@]->[%@]",key,obj);
    }];
} 
```

# video - 播放视频的子剪辑

> ID：15685052
> 
> 赞同：2
> 
> 时间：2013-03-28T14:54:28.907
> 
> 标签：video, jwplayer, clip

这是我使用 jwplayer 播放视频的非常基本的页面：

```
<html>
<head>
<script type="text/javascript" src="jwplayer.js"></script>

</head>

<body>

<div id='my-video'></div>

<script type='text/javascript'>
jwplayer('my-video').setup({
    'file': 'video.m3u8',
    'width': '640',
    'height': '360'
});
</script>

</body>

</html> 
```

该视频是一个 2 小时的视频，我只想播放其中的一部分（例如，让视频从 5 分钟开始，在 10 分钟结束）。在网站的另一个区域，我将播放同一视频的不同片段，因此我想保留相同的文件而不是更改它。有没有办法做到这一点？

# excel - 使用 BOM 保存 CSV

> ID：15685053
> 
> 赞同：3
> 
> 时间：2013-03-28T14:54:37.300
> 
> 标签：excel, csv, asp-classic, character-encoding

我有创建 csv 文件的 asp 页面。问题是这个 csv 文件被创建为 UTF-8 WITHOUT BOM，当我打开它时，一些标志不正确可见。我应该更改什么以将其保存为 UTF-8 WITH BOM？如果我在记事本++中手动将其转换为带有BOM的UTF-8，它就可以工作。

谢谢。

```
 Response.Clear
    Response.ContentType = "application/vnd.ms-excel; charset=UTF-8;"
    Response.AddHeader "Content-Disposition", "attachment; filename=goodsTransfer.csv"
    Response.Charset = "UTF-8"
    Response.Write "all my data"
    Response.end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:26:13.333

尝试：

```
Response.Write(ChrW(65279) & "all my data") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T09:06:05.223

UTF-8 的正确 BOM 是：

```
Response.Write(ChrW(&HeF) & ChrW(&Hbb) & ChrW(&HbF) & "all my data") 
```

# php - 通过单击 iframe 外部的左右链接在 2 个 iframe 之间切换

> ID：15685056
> 
> 赞同：0
> 
> 时间：2013-03-28T14:54:45.060
> 
> 标签：php, javascript, html

我的目标是在 iframe（包含日历）的每一侧都有一个按钮，该按钮在单个 iframe 中的日历 #1 和日历 #2 之间来回切换。

有什么建议么？

```
|arrowLeft| |-----Iframe-------| |arrowRight| 
```

当我将所有代码放入我的网站时，该代码有效，`[http://jsfiddle.net/PauWy/447/][1]`但不起作用。

这是为什么？

```
HTML:

<p id="toggle">
<span> Left </span>
<span> </span>
</p>

<div id="left"> <iframe>LEFT CONTENT</iframe> L</div>
<div id="right"> <iframe>RIGHT CONTENT</iframe>R </div>

<p id="toggle">
<span></span>
<span> Right </span></p>

Script:

#right { display:none; } 
```

CSS：

```
$('#toggle > span').click(function() {
var ix = $(this).index();

$('#left').toggle( ix === 0 );
$('#right').toggle( ix === 1 );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:07:18.477

您的问题要求使用单个 iFrame。所以这里是我将如何使用 jQuery：

HTML：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<p id="toggle">
    <span data-src="/calendar1.html"> Left </span>
    <span data-src="/calendar2.html"> Right </span>
</p>

<iframe id="iframe" src="/calendar1.html"></iframe> 
```

Javascript：

```
$(function() {
    var iframe = $('#iframe');

    $('#toggle').delegate('span[data-src]', 'click', function() {
        iframe.attr('src', $(this).attr('data-src'));            
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:14:47.503

```
<html>
<head>
    <style type="text/css">
        #theFrames iframe { display:none }
        #theFrames iframe:first-child { display:block }
    </style>
</head>
<body>
<p class="toggle"><span>Left</span></p>
<div id="theFrames">
    <iframe src='http://jsfiddle.net'></iframe>
    <iframe src='http://doc.jsfiddle.net'></iframe>
</div>
<p class="toggle"><span>Right</span></p>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    var a=0;
    $('.toggle span').each(function() {
        $(this).attr('rel',a++);
    });
    $('.toggle span').click(function() {
        a = $(this).attr('rel');
        $('#theFrames iframe').hide();
        $('#theFrames iframe:eq('+a+')').show();
    })
</script>
</body>
</html> 
```

# java - Process.= Runtime.getRuntime().exec() 不适合我

> ID：15685057
> 
> 赞同：0
> 
> 时间：2013-03-28T14:54:48.137
> 
> 标签：java, linux, inputstream, runtime.exec

当我从 java 执行 linux 命令时，它不起作用任何人都可以帮助我解决这个问题。

```
process3 = Runtime.getRuntime().exec(new String[] {"ls",
                    "-1s", 
                     "--block-size=1",
                      TStamp+"/received/i*.*",
                      "$dir|",
                      "awk",
"'{print $2\"\\t\"$1}'",
                           ">>",
                  "./"+TStamp+"/qa/manifest_QAG.txt"});
InputStream in1 = process3.getInputStream();              
BufferedReader br1=new BufferedReader(new InputStreamReader(in1));
String line1 =null;
while((line1=br1.readLine())!=null)
{
System.out.println(line1);
} 
```

Edit1：我试图列出文件并在 manifest_QAG.txt 中生成清单

实际命令在 linux 中有效：

```
ls -1s --block-size=1 20130328094916142/received/is*.* $dir| awk '{print $2"\t"$1}' 
```

Edit2：我没有得到任何异常，甚至没有创建文件 manifest_QAG.txt

编辑3：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:24:30.523

您没有收到异常，因为该`ls`命令不是 Java 并且不与异常通信，而是与错误消息`STDERR`和退出代码通信。

实际上，您必须了解当您输入命令时，shell 做了什么以及该命令做了什么。因此，像这样的 shell 命令行

```
ls -1s --block-size=1 20130328094916142/received/is*.* $dir| awk '{print $2"\t"$1}' 
```

由外壳以这种方式处理：

*   shell：将其展开`20130328094916142/received/is*.*`为文件名列表
*   shell：将`$dir`部分扩展为文件名列表
*   shell：执行`ls`带有参数的命令
    *   `ls`
    *   `-1s`
    *   `--block-size=1`
    *   每个扩展文件名作为单独的参数
*   shell：`awk`使用参数执行命令
    *   `{print ...}`
*   shell：将输出连接`ls`到输入`awk`
*   ls：评估参数
*   awk：读取每一行，用给定的脚本处理它并输出结果。

您会看到：环境变量和通配符的扩展是由 shell 完成的，而不是由`ls`.

回到 Java： `execute`不像**shell**那样处理参数。那取决于你。因此，您的调用与 shell 等效，大致如下：

```
ls '-1s' '--block-size=1' '20130328094916142/received/is*.*' '$dir' '|' 'awk' '{print $2"\t"$1}' 
```

一切都被引用了，甚至是管道，因此shell没有扩展任何内容。

问题到此为止。有哪些解决方案？

*   您可以模拟 shell 并在 Java 中进行扩展。玩得开心。（即这不是一个真正的解决方案）。
*   您可以从 Java 调用 shell 而不是`ls`.

后期是这样的：

shell 通常有一个`-c`选项，您可以给它**一个**命令字符串，然后以与实际键入的命令行相同的方式对其进行评估。

所以你像这样调用命令

```
String[] args = {
    "/bin/sh",
    "-c",
    "ls -1s --block-size=1 20130328094916142/received/is*.* $dir| awk '{print $2\"\t\"$1}'"
};
Process process3 = Runtime.getRuntime().exec(args); 
```

尽管`awk`命令的正确引用可能需要更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:06:21.217

我认为这里有一些错字

```
/received/i*.* is different from one that is in linux command /received/is*.* 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:21:04.360

管道 (|) 不是 ls 的参数，而是 shell 的一个功能。如果你想在 Runtime#exec 中使用这样的管道，你必须启动一个 shell，并将你希望 shell 解析和执行的命令字符串作为参数传递。

除非我遗漏了什么，否则列出目录并使用 Java 代码编写清单可能会更容易，而不是为琐碎的文件和字符串操作调用外部工具。

# python - 在 Python 中打印进度条处理

> ID：15685063
> 
> 赞同：4
> 
> 时间：2013-03-28T14:55:00.720
> 
> 标签：python, printing, progress-bar

我编写了这个简单的函数“processing_flush”来打印一系列点（由索引给出）来测试我的软件是否正在处理我的数据以及最终的速度。我的数据的总大小是未知的。

```
 import sys
    import time

    def processing_flush(n, index=5):
        sys.stdout.write("\rProcessing %s" % ((n % index)* "."))
        sys.stdout.flush()

    for n in xrange(20):
        processing_flush(n, index=5)
        time.sleep(1) 
```

我无法解决的问题是第一次打印所有点时（例如：处理 .... 如果索引等于 5）光标不是从零开始的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:00:10.043

在再次覆盖同一行之前，您至少需要清除点与空格的位置。

```
def processing_flush(n, index=5):
    sys.stdout.write("\rProcessing %s" % (index * " "))
    sys.stdout.write("\rProcessing %s" % ((n % index)* "."))
    sys.stdout.flush() 
```

上面的代码可能会导致一些短暂的闪烁。`n % index`在您的特定情况下，当变为 0时清除该行就足够了：

```
def processing_flush(n, index=5):
    if n % index == 0:
        sys.stdout.write("\rProcessing %s" % (index * " "))
    sys.stdout.write("\rProcessing %s" % ((n % index)* "."))
    sys.stdout.flush() 
```

或者更好的是总是写`index-1`字符：

```
def processing_flush(n, index=5):
    sys.stdout.write("\rProcessing %s%s" % ((n % index)* ".", (index - 1 - (n % index))* " "))
    sys.stdout.flush() 
```

**编辑 1：**或者，如果您希望光标始终位于最后一个点之后：

```
def processing_flush(n, index=5):
    sys.stdout.write("\rProcessing %s%s" % ((n % index)* ".", (index - 1 - (n % index))* " "))
    sys.stdout.write("\rProcessing %s" % ((n % index)* "."))
    sys.stdout.flush() 
```

**编辑 2：**或者，如果您希望光标始终位于行首：

```
def processing_flush(n, index=5):
    sys.stdout.write("Processing %s%s\r" % ((n % index)* ".", (index - 1 - (n % index))* " "))
    sys.stdout.flush() 
```

原因是你的 shell 会记住前一行的剩余字符，如果你只覆盖它的第一部分。

# java - 使用 Lucene 从日志文件中搜索异常详细信息

> ID：15685065
> 
> 赞同：0
> 
> 时间：2013-03-28T14:55:15.180
> 
> 标签：java, lucene

我必须从我的应用程序日志（大尺寸）文件中获取异常堆栈跟踪和相关详细信息。

例如，我对下面提到的异常及其 java 堆栈跟踪感兴趣。

**com.YYYYYYYY.adminsubsystem.business.exceptions.AdminSubSystemEntityDoesNotExist 的人员不** 存在：com.YYYYYY.adminsubsystem.business 的 com.YYYYYYY.adminsubsystem.business.AbstractDao.doSingle(AbstractDao.java:83) 不存在人员。 individual.dao.jpa.PersonsDaoJpa.getPersonByPrimaryEmail(PersonsDaoJpa.java:43)

所以我的要求是，我将提供搜索字符串（或任何特定的异常代码）-“**人不存在**”

Lucene 将检查整个 LOG 文件并从文件中返回相关堆栈跟踪详细信息（可能不止一次）。

我可以使用 Lucene 实现这一点吗？任何示例代码都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:05:32.883

这是 Lucene 的一个非常典型的案例。当然会起作用，而且我看不到任何不寻常或有问题的东西。如果您在入门时遇到困难，这里有一些[可用资源](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/gettingstarted.html)。

我确实想到了一件事，Lucene 肯定不会知道堆栈跟踪是什么。你必须定义它。堆栈跟踪似乎是您希望搜索和查看的单元，因此将每个 stace 跟踪作为索引中的单个文档进行索引可能最有意义。

不过，正如@Lucas 所提到的，如果这是供您自己或其他开发人员使用的，它可能有点镀金。您是否考虑过仅使用[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)？

# java - Java/Selenium WebDriver：如何获取用户输入并将其插入文本字段？

> ID：15685069
> 
> 赞同：0
> 
> 时间：2013-03-28T14:55:24.873
> 
> 标签：java, eclipse, input, selenium-webdriver, java.util.scanner

目前在 Eclipse 中，我有以下代码：

```
driver.findElement(By.name("LoginText1")).clear();
System.out.println("Username: ");
Scanner scan1 = new Scanner(System.in);
String input1 = scan1.nextLine();
System.out.println(input1); 
```

并且只是想知道，而不是简单地将用户的输入返回到控制台，有没有办法让它将其插入到文本字段中。我想将它插入到名为*LoginText1*的字段中。这是用于使用 Selenium WebDriver 进行网站测试的。
我是 Java 新手，非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:57:46.470

在看到您的问题的编辑后，恐怕我只能将您链接到 Selenium 的在线文档：

[http://docs.seleniumhq.org/docs/](http://docs.seleniumhq.org/docs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:58:19.780

你会简单地做这样的事情

```
LoginText1.setText(input1); 
```

我建议查看 JTextField 文档，您会很快找到解决问题的示例和解决方案。

[这里](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html)

我还建议研究变量命名约定（LoginText1 应该以小写字母开头）。

[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)

**编辑**

看到您最近的编辑后，您想使用 selenium webdriver 从网站填写表格。StackOverflow 上的一篇文章显示了使用该`sendKeys()`方法。

[链接在这里](https://stackoverflow.com/questions/5558617/a-good-working-example-of-selenium2-and-webdriver)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T08:54:50.357

在这种情况下，用户通过控制台手动传递密码。

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
                String password;   
                System.out.println("Please Enter the user password :: ");
                password= br.readLine();  
                driver.findElement(By.id("pwd")).sendKeys("password"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T09:58:00.167

`index`在需要的地方传递你的变量。

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

System.out.println("Index of the sheet: ");
int index = br.read(); 
```

# ios - 未返回十进制值的成就的百分比完成

> ID：15685070
> 
> 赞同：2
> 
> 时间：2013-03-28T14:55:29.367
> 
> 标签：ios, unity3d, game-center

来自这个线程：[关于 GKAchievement 中的百分比完成](https://stackoverflow.com/questions/7131728/about-percentcomplete-in-gkachievement)

到目前为止，我已经设法报告了成就进度，并且当提交的进度不包含十进制值（例如执行 10 次任务以获得此 x 成就）时，我没有任何问题。然后，每个 reportProgress 将是 10%。

但是，我正在尝试编写一项成就，该成就只能在完成一项任务 1000 次后才能完成。因此，完成的每项任务都有 0.1 个进度。

检索percentComplete时如何获取十进制值是否有修复？我不确定保存的值或返回的值是否转换为 int。

我要做的是从 GameCenter 检索当前的成就进度，并在每次任务完成时将其增加 0.1d。如果我尝试报告 4.1d 的进度，我会在日志中看到：

*上报成绩 de.company.testapp.achievement1, **4.100000***

那是系统生成的日志。那么假设GameCenter将其保存为带小数的双精度并且仅在您请求percentComplete时返回整数是否正确？

当然，我可以保留一个本地计数器，但我试图避免在用户切换到另一台设备时或本地经过身份验证的用户在设备内发生更改时出现分数不一致。同步分数或更新我们的服务器以跟踪每个玩家的每一项成就可能有点过分。

有人对我应该如何正确处理跟踪这种成就有任何建议吗？

提前致谢。

PS。我在 Unity 中开发，所以我使用 GameCenterPlatform，但我尝试在 Objective-c 端检索百分比完成，但它也返回百分比完成的整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:09:29.280

我认为本地存储是您唯一的选择。如果您担心跨设备跟踪，您可以尝试使用云存储来获取特定信息。我认为这是您以比 GameCenter 允许的更高的精度跟踪信息的唯一真正选择，除非您还想在 GameCenter 的辅助服务器上跟踪信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-12T13:31:33.627

我也期待苹果提供与此问题相关的错误修复，但发现这个......

> Apple 的回答：“百分比使用双精度报告，但存储为整数百分比，例如 1%、2%、3%、...、100%。无论如何，您可能应该在本地存储进度，因为它们可能在某个地方无法连接到游戏中心。”
> 
> 对于可以访问 Apple 开发论坛的用户： [https ://devforums.apple.com/message/522769](https://devforums.apple.com/message/522769)

**建议：** - 我们可以使用云用户默认首选项来存储我们的分值。这是一个有用的云偏好库 [https://github.com/ArtSabintsev/Zephyr](https://github.com/ArtSabintsev/Zephyr)

# git - Git：清除本地和远程仓库并重新开始

> ID：15685074
> 
> 赞同：46
> 
> 时间：2013-03-28T14:55:53.210
> 
> 标签：git, github

在尝试将项目从使用 ant 迁移到 maven 时，我意外地得到了一个状态不佳的 repo。现在，我想清除 repo 并从头开始。作为 git 的新手，我有点谨慎，不确定我是否可以结帐然后在本地删除所有文件和文件夹，然后推送到远程仓库，或者这实际上是一个非常糟糕的主意。出于某种原因，我很难在谷歌中提出正确的问题。:D

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-28T15:46:59.120

只需删除本地`.git`目录，从服务器中删除 repo（如果是 github - do Repo -> setiings -> remove）。

然后在服务器上创建新的存储库，并在本地执行：

```
git init
git remote add origin git@github.com:user/project.git
git add .
git commit -m "Initial commit"
git push -u origin master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-30T16:10:29.787

就我而言，我只是想刷新本地存储库，我使用了没有最后两个命令的 Ruslan 答案，因为我不需要在服务器端做任何事情，而且效果很好！当然，我`.git`按照建议在本地删除了文件，而在执行命令之前没有删除远程目录。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-13T05:11:36.827

要从 GitHub 中删除您的存储库：

1.  进入存储库`user/repoName`
2.  单击`Settings`选项卡

    [![在此处输入图像描述](../Images/0fe72cc215ced7b27e69e96da637f64d.png)](https://i.stack.imgur.com/OGwYW.png)

3.  在存储库页面的底部，您可以看到`Danger Zone`部分，然后删除您的存储库 [![在此处输入图像描述](../Images/cf90ddc331f074a9a1ad218d5ce1e7ef.png)](https://i.stack.imgur.com/08geZ.png)

# java - 用ant重新编译会导致代码在运行时崩溃？

> ID：15685077
> 
> 赞同：0
> 
> 时间：2013-03-28T14:56:00.637
> 
> 标签：java, ant, compilation

我有一个简单的 java 项目，我正在使用 ant 构建它。它有这两个类：

A.java：

```
public class A {
    public static void main(String[] args) {
        Integer i = 0;
        B.f(i);
    }
} 
```

B.java：

```
public class B {
    public static void f(int i) {
        System.out.println("hello");
    }
} 
```

哪个工作正常：

```
$ ant compile
[...]
$ java -cp bin A
hello 
```

现在，如果我将`int`参数更改`B.f`为`Object`：

```
public class B {
    public static void f(Object i) {
        System.out.println("hello");
    }
} 
```

...代码重新编译正常...

```
$ ant compile
[...]
$ java -cp bin A
Exception in thread "main" java.lang.NoSuchMethodError: B.f(I)V
    at A.main(Unknown Source) 
```

...但它在运行时崩溃。为什么？

* * *

编译前的文件夹结构：

```
bin
build.xml
src
├── A.java
└── B.java 
```

构建.xml：

```
<project>
    <target name="compile">
        <javac srcdir="src" destdir="bin"/>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:58:44.650

Ant 只会编译自上次编译以来未更改的文件（除非您清理）。也就是说，您的文件中只有一个发生了变化，而另一个正在打电话期待旧版本。如果您在运行 ant 构建之前删除所有类文件，我敢打赌它会起作用。

它在 ant [<javac>](http://ant.apache.org/manual/Tasks/javac.html)任务的 apache 文档中说：

> 将递归扫描源目录和目标目录以查找要编译的 Java 源文件。只有没有对应 .class 文件或类文件比 .java 文件旧的 Java 文件才会被编译。

这些方法可能在源代码级别兼容，但是当编译成字节码时，它们具有其他类正在寻找的特定签名。您更改了编译的签名，因此它无法找到它正在寻找的方法。

**- - - - - - - - - 编辑 - - - - - - - - - - -**

可以将一个简单的清理任务添加到您的构建中：

```
 <target name="clean"
        description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
  </target> 
```

你可以添加一个完整的重建：

```
 <target name="fullReBuild" depends="clean compile">
  </target> 
```

然后`ant fullReBuild`根据需要从命令行发出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:59:58.490

默认情况下，除非文件日期更改，否则 ant 不会重新编译任何内容。解决方案是使用[<depend>](http://ant.apache.org/manual/Tasks/depend.html)任务。这使得 ant 在依赖项发生变化时重新编译依赖项。

# ember.js - 添加类属性而不重新打开类

> ID：15685078
> 
> 赞同：1
> 
> 时间：2013-03-28T14:56:01.840
> 
> 标签：ember.js

我只是想知道是否可以在 Ember.js 的类定义中添加类属性？

即在里面`Ember.Object.extend`，而不是在一个单独的里面`Myclass.reopenClass`

我放在扩展中的东西只能在实例中访问。

# php - Codeigniter 2.1 - 插入批处理后返回ID

> ID：15685080
> 
> 赞同：9
> 
> 时间：2013-03-28T14:56:11.330
> 
> 标签：php, codeigniter

如何在 insert_bunch 之后返回所有 ID？功能：

```
public function insert_slike($id, $slike, $folder, $polje, $tabela)
{
        $slike = explode(',', $slike);
        $i = 1;
        $data = array();
        foreach ($slike as $slk) {
            $this->img_upload_resize($slk, $folder);
            $data[] = array(
                $polje => $id,
                'path' => $slk
                );
            $i++;
        }

        $this->db->insert_batch($tabela, $data);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-05-06T14:35:37.737

这是一个有效的方法：

由于您的记录具有结果 ID，因此我假设它们也会自动递增。

如果是这种情况，请执行此操作并仍然使用 insert_batch。

这是你要做的：

**1.**您计算您要插入的项目：

```
$count = count($data); 
```

**2.**运行批量插入：

```
$this->db->insert_batch($table, $data); 
```

**3** . 获取批次的第一个插入 ID：

```
$first_id = $this->db->insert_id(); 
```

**4.**将计数（减 1）添加到您的插入 ID 以获取最后一条记录 ID。

```
$last_id = $first_id + ($count-1); 
```

给你！现在，您有了插入记录的第一个和最后一个 ID，以及介于两者之间的所有其他内容。

**笔记：**

一些人问如果两个批量插入同时发生会发生什么；InnoDB 将智能管理新行的 ID 以防止数据交叉，从而保持此方法有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:46:26.113

这个关于 MySQL 的话题之前已经讨论过：

[如何在 MySQL 表中插入多行并返回新的 ID？](https://stackoverflow.com/questions/7333524/how-can-i-insert-many-rows-into-a-mysql-table-and-get-ids-back)

在 CodeIgniter 中，using`$this->db->insert_id()`将只返回第一个插入的 id。

如果我这样做，我会打开一个事务并一次插入一个，在每次插入后存储 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T09:12:48.900

1.创建自己的ID而不是自动生成的。

2.插入你生成的id

3.有一个插入ID的数组

4.返回插入ID的数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-15T11:43:15.323

insert_batch() 函数仅返回批次的第一个 id。在 for 循环中使用 insert() 函数来获取所有 id。

```
public function insert_slike($id, $slike, $folder, $polje, $tabela)
{
    $slike = explode(',', $slike);
    $data = array();
    $ids = array();
    foreach ($slike as $slk) {
        $this->img_upload_resize($slk, $folder);
        $data = array(
             $polje => $id,
             'path' => $slk
             );
        $this->db->insert($tabela, $data);
        $ids[]=$this->db->insert_id();
    }
} 
```

# javascript - 模态并打开新页面

> ID：15685081
> 
> 赞同：0
> 
> 时间：2013-03-28T14:56:12.013
> 
> 标签：javascript, modal-dialog

我正在尝试打开一个模式，当您单击关闭按钮时，它会在同一页面上打开一个 url。我正在使用的代码是：

```
 $(document).ready(function() {
        //Show modal box
        $('#openModal').click(
            function() {$('.modal').show();}
        );
        //Hide modal box
        $('#closeModal').click(
            function() {$('.modal').hide();
            "location.href='http://google.com'";}
        );
    }); 
```

有人吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:57:48.437

这里的问题是打开 URL 的代码在双引号内。该声明`"location.href='http://google.com'";`不做任何事情。

你需要：

```
$('#closeModal').click(function() {
    $('.modal').hide();
    location.href='http://google.com';
}); 
```

# laravel - Laravel 的“一对多”关系似乎正在反向运作

> ID：15685084
> 
> 赞同：0
> 
> 时间：2013-03-28T14:56:19.773
> 
> 标签：laravel, eloquent, laravel-3

我正在努力解决一对多的关系和雄辩的问题。我有活动（如演出活动），我有地点。每个活动都与一个地点相关联，但每个地点可能会用于举办许多活动。（一）位置到（许多）事件。

这是我的模型：

```
class Iaevent extends Eloquent {
  public static $timestamps = true;
  public function locations() {
    return $this->has_one('Location');
  }
}

class Location extends Eloquent {
  public static $timestamps = true;
  public function iaevents() {
    return $this->has_many('Iaevent');
  }
} 
```

如果我尝试回显：

```
echo $iaevent->locations()->first()->company;
//or
Iaevent::find(1)->locations()->first()->company; 
```

我得到错误：

```
Unknown column 'iaevent_id' in 'where clause'
SQL: SELECT * FROM `locations` WHERE `iaevent_id` = ? LIMIT 1 
```

现在...“iaevent_id”不在位置表中。相反，我将“location_id”放在“ievents”表中，因为一个位置可以应用于许多事件，但绝不会反过来。我在这里做错了什么？

在 Laravel 论坛上，有人建议在我的 Iaevent 模型中将 'has_one' 替换为 'belongs_to'。当我这样做时，我得到一个错误`Trying to get property of non-object`

以另一种方式测试关系，`echo Location::find(1)->iaevents()->first()->name;`效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:08:08.363

该事件属于该位置。

```
public function location()
{
    return $this->belongs_to( 'Location' );
}

$location = $event->location()->first();

if ( $location )
    $location->name; 
```

“有一个”关系用于一对一关系。假设事件有一个 location_id，但您只希望这是一对一而不是一对多。在这种情况下，该位置有一个事件，并且该事件属于一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T21:27:19.773

has one 工作正常，因为它只返回一个外来元素，但是 has_many 函数返回一个数组，所以你必须像数组一样索引它，正确的使用方法是

iaevent::find(1)->位置[0]->公司；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T17:27:02.150

我必须指定“外表”键，例如：

```
return $this->has_one('Location', 'id'); 
```

# database - 如何从分布在 Internet 上的多个客户端连接到 delphi 7 上的 firebird 数据库？

> ID：15685085
> 
> 赞同：3
> 
> 时间：2013-03-28T14:56:19.857
> 
> 标签：database, delphi, firebird

我想创建一个程序，可以通过互联网访问我在两台不同计算机上的 firebird 数据库。我想知道要使用什么连接以及要设置什么参数。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:16:11.160

有一些可用的库 - 请参阅[此处](http://www.firebirdfaq.org/faq8/)以获取相当全面的列表。

对于支持更多数据库后端的库，您必须选择 Firebird 驱动程序（通常称为 Interbase/Firebird 驱动程序或 IB/FB 驱动程序）。

对于协议，选择 TCP/IP - 对于您必须拥有的连接字符串`your server public IP address`：`your full database file path as seen by FB server`。

确切的格式取决于库，但是，例如，如果您的服务器是，`example.com`那么连接字符串将是`example.com:c:\myDatabases\myDatabaseFile.FDB`

但是，由于 Firebird 数据库直接暴露在 Internet 上会出现安全（可能还有速度）问题，因此不建议使用此设置。

更可取的是拥有一个[3 层（n 层）](http://en.wikipedia.org/wiki/Multitier_architecture)应用程序，其中中间层将负责成为服务器和客户端之间的安全“防火墙”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T07:33:08.870

您可以直接在 firebird 引擎中实现 TCP/IP 数据包加密/解密。个人而言，我已经下载了 Firebird 2.5 源代码，并直接在他的低级通信层（INET 套接字层）中注入了安全隧道化代码。现在，firebird 引擎直接在服务器端和客户端（fbclient.dll）对每个 TCP/IP 数据包进行加密/解密。然后无需重新构建客户端应用程序，只需添加一行代码，即可提供您选择的用于加密通信到 fbclient.dll 的密钥。必须在服务器安装的 firebird.conf 文件中声明相同的密钥。我还在 fbclient 中实现了代理协商解决方案。dll 以允许 TCP/IP 数据包通过任何代理服务器（例如 Microsoft ISA Server）。对我们来说，这种架构在实际生产系统中可以运行一年多。

# python - 在国家地图上动态绘制点

> ID：15685088
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:56:32.530
> 
> 标签：python, google-maps, map, google-earth, matplotlib-basemap

我正在研究出租车数据集。我想在国家地图上绘制它们。此外，在绘制出租车的轨迹后，我希望用户在地图上选择一个点并要求他输入一个 epsilon 半径。在他输入一个值后，应该为用户选择的点画一个圆圈，并且该圆圈内的其他出租车的点应该被吞没。我应该向用户展示有多少辆出租车参与了那个 epsilon 半径。那么我应该使用哪些分类 API 或包？python中的底图是否提供了这种活力。或者还有其他我可以使用的工具吗？或者有没有一种方法，有现成的地图可用，我可以在它们上绘制我的轨迹并将它们包含在我的基于 Web 的 GUI 中，并让用户输入 epsilon 半径并执行与我上面提到的相同的事情。如何继续？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:18:52.830

这可能更容易在客户端使用[Google Maps API和 JavaScript 完成。](https://developers.google.com/maps/)发送出租车坐标的服务器端组件当然可以使用[Django](http://www.djangoproject.com)或您选择的任何框架在 Python 中完成，但为了便于在浏览器中进行映射和动态数据生成，JavaScript/HTML5 是可行的方法。

# fortran - Gfortran：尝试执行“f951”时出错：execvp

> ID：15685089
> 
> 赞同：1
> 
> 时间：2013-03-28T14:56:36.433
> 
> 标签：fortran, gfortran

升级（？）我的电脑到山狮后，我刚刚重新安装了我的 gfortran。但是，即使命令“gfortran -v”明确显示它已安装，但每当我尝试编译程序时，都会收到以下错误消息：

```
i686-apple-darwin10-gfortran-4.2.1: error trying to exec 'f951': execvp: No such file or directory 
```

如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:33:00.287

实际上，我在[这里](http://eftrunk.blogspot.com/2011/11/how-to-fix-error-trying-to-exec-f951.html)的评论中找到了答案。基本上，从 /usr/bin/ 中删除旧的 Fortran，然后从[Sourceforge 重新安装。](http://hpc.sourceforge.net)

# c++ - 如何使用 SetTimer API

> ID：15685095
> 
> 赞同：3
> 
> 时间：2013-03-28T14:57:05.253
> 
> 标签：c++, windows, api

我尝试使用`SetTimer`API 每 X 分钟调用一次函数。所以，我写了这个测试代码

```
void f()
{
 printf("Hello");
}
int main() 
{
 SetTimer(NULL, 0, 1000*60,(TIMERPROC) &f); 
} 
```

我应该每分钟都写你好，但它不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T15:06:15.923

你的程序有几个问题：

1.  C 程序在它们离开时确实会结束，`main()`因此没有时间可以发生计时器。
2.  Win32 计时器需要消息泵（见下文）才能工作，因为它们是通过`WM_TIMER`消息实现的，即使它们不与任何窗口关联，并且如果您提供函数回调。

    > 当您指定 TimerProc 回调函数时，默认窗口过程在处理 WM_TIMER 时会调用该回调函数。因此，您需要在调用线程中调度消息，即使您使用 TimerProc 而不是处理 WM_TIMER。
    > 
    > [来源：[MSDN：SetTimer 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906%28v=vs.85%29.aspx)]

3.  回调函数的原型不好。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644907%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644907%28v=vs.85%29.aspx)

    ```
    void CALLBACK f(HWND hwnd, UINT uMsg, UINT timerId, DWORD dwTime)
    {
      printf("Hello");
    }

    int main() 
    {
      MSG msg;

      SetTimer(NULL, 0, 1000*60,(TIMERPROC) &f);
      while(GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
      }

      return 0;
    } 
    ```

（注意这个示例程序永远不会结束，相反，真正的程序应该有一些额外的逻辑来通过发送来完成`WM_QUIT`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-10T21:21:52.903

我发现最好的实现如下：

```
#define TIMER1 1001
#define TIMER2 1002

    SetTimer(hWndMainWnd,             // handle to main window 
        TIMER1,            // timer identifier 
        1000, 
        NULL);     // no timer callback 

    SetTimer(hWndMainWnd,             // handle to main window 
        TIMER2,            // timer identifier 
        5000, 
        NULL);     // no timer callback 
```

然后，作为主事件循环的一部分：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_TIMER:
        if (wParam == TIMER1)
        {
              // do something1
        }
        else
        if (wParam == TIMER2)
        {
             // do smoething2
        }
        break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T13:57:52.717

这可以编译和运行：

```
#include <stdio.h>
#include <windows.h>

void CALLBACK f(HWND hwnd, UINT uMsg, UINT timerId, DWORD dwTime)
{
    printf("Hello\n");
}

int main()
{
    MSG msg;

    SetTimer(NULL, 0, 1000 * 3, (TIMERPROC)& f);
    while (GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
} 
```

# javascript - 在Javascript中一段时间 后执行一个函数

> ID：15685099
> 
> 赞同：0
> 
> 时间：2013-03-28T14:57:23.983
> 
> 标签：javascript, html

我正在尝试编写一个用户脚本来隐藏页面中的某些元素。问题是元素直到页面加载几秒钟后才会出现，所以我试图延迟几秒钟。

这是我的代码：

```
function hide_stuff()
{
    var e = document.getElementsByClassName("tab");
    if(e) 
        alert("got elements");
    else 
        alert("didn't get elements");
    for( var i = 0; i < e.length; i++){
        if (!e[i].id)
            e[i].style.display = "hidden";
    }
}

setTimeout(hide_stuff(), 5000); 
```

问题是它根本没有延迟。“获取元素”警报（我作为调试帮助添加）在页面加载时立即触发。我看不出我做错了什么，尽管我确信这可能是显而易见的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:57:48.203

改变

```
setTimeout(hide_stuff(), 5000); 
```

到

```
setTimeout(hide_stuff, 5000); 
```

您没有传递函数，而是立即调用它（并传递`undefined`给`setTimeout`）。

# c++ - 使用 Eclipse CDT/RSE/RDT 远程调试 C++ 应用程序

> ID：15685104
> 
> 赞同：15
> 
> 时间：2013-03-28T14:57:32.917
> 
> 标签：c++, eclipse, gdb, remote-debugging, eclipse-cdt

我正在与 Eclipse（在 Windows 中）进行斗争，以使其连接到我的 Linux 机器并在那里远程编译和调试 C++ 代码。

**我有什么工作：**

*   已安装 CDT/RSE/RDT（Eclipse Juno、CDT 8.1.2、PTP(RDT) 6.0.4、RSE 3.4）
*   rdt-server 在 Linux 机器上运行 ( `perl ./daemon.pl 4075`)
*   创建本地 C++ 项目（基于 Makefile）
*   编译和调试本地 C++ 项目
*   创建远程项目（使用“Linux”连接到 rdt-server）
*   编译远程项目（基于 Makefile）

我可以做的一些手动操作（没有 Eclipse）：

*   “远程”调试我编译的项目：`ssh mybox 'cd /path/to/project; gdb main'`
*   启动一个 gdbserver：`ssh mybox 'cd /path/to/project; gdbserver fqdn:10000 main'`

**什么不工作：在 Eclipse 中调试**

*   通过“C++ 应用程序”调试错误：*未指定程序*（因为我没有本地代码）
*   通过“C++ 远程”调试错误：*未指定程序*（我需要本地代码吗？）
*   通过“C++ attach”调试（调试器：“gdbserver”）
    *   gdbserver 在 linuxbox 上运行
    *   gdb 无法与 gdbserver 通信（cygwin gdb 7.5，linux gdb/gdbserver 7.3）；*警告：架构拒绝了目标提供的描述。*
*   通过“C++ attach”调试（调试器：“gdb”）将尝试附加到我的 Windows 进程。

其他可能导致问题的事情：

*   我正在使用`ssh`MSYS/Git 提供的二进制文件（不在`PATH`）
*   Cygwin 未开启`PATH`

我真的很想在 Eclipse 中为我的 C++ 项目进行远程调试。您对如何从这里开始有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-13T09:06:59.767

**使用 CLI 进行健全性检查**

在您做任何事情之前，请确保您：

*   正确交叉编译应用程序并使其运行。您不一定需要使用 Eclipse 来执行此操作。
*   从命令行让 GDB 远程调试正常工作

这个答案假设你可以在开发板上做：

```
sudo apt-get install gdbserver
gdbserver :1234 path/to/executable 
```

在主机上：

```
aarch64-linux-gnu-gdb \
  -ex "target remote board-hostname:1234" \
  -ex "file path/to/cross/compiled/executable" \
  -ex 'tb main' \
  -ex c 
```

然后正确调试所有内容。

**Eclipse 设置**

在 Ubuntu 16.04 主机、Eclipse Oxygen 4.7.0（从网站下载）、`gdbserver`7.12、7.6 中测试`aarch64-linux-gnu-gdb`。

我已成功使用以下所有方法：

*   手动的
*   自动的
    *   密码验证
    *   公钥认证

**手动的**

使用这种方法，我们必须先`gdbserver`在目标上启动，然后再在 Eclipse 上运行调试。

Pro：省去了通过 Eclipse 配置 SSH 连接，让 Eclipse 能够

`gdbserver`缺点：每次调试开始时都必须重新启动。如果 Eclipse 理解`gdbserver --multi`，这可能会被克服，但我认为它不会？

由于其简单性，我建议您首先使用此方法。

打开调试配置，然后创建一个新的“C/C++ 远程应用程序”。

在“主要”选项卡下：

*   像往常一样选择“名称”、“项目”和“C/C++ 应用程序”进行本地调试

*   在底部启动器中，单击“选择其他”，选中“使用配置特定设置”并选择“GDB（DSF）手动远程调试启动器”

    为什么我们这样做：自动启动器首先使用 SSH 连接到开发板并`gdbserver`为您启动。

    [![在此处输入图像描述](../Images/6bdd4abd1a68fef2497bd36842da7947.png)](https://i.stack.imgur.com/wcXpp.png)

在“调试器”选项卡下：

*   “GDB 调试器”：与主机上 CLI 中使用的相同，`aarch64-linux-gnu-gdb`对于本示例

*   `board-hostname`子选项卡“连接”：将主机名和端口设置为在 CLI（和`1234`）上传递给主机

    [![在此处输入图像描述](../Images/84c911afb9869bfc08e31dbaad6bed00.png)](https://i.stack.imgur.com/pTfEV.png)

    [![在此处输入图像描述](../Images/69cffc7b4c9054e5f31c62284f15486c.png)](https://i.stack.imgur.com/xkriF.png)

`gdbserver`最后，就像我们在 CLI 中所做的那样，在目标上手动启动：

```
gdbserver :1234 path/to/executable 
```

并从 Eclipse 正常启动调试器。

`gdbserver`每次终止程序时都必须重新启动。

**自动密码验证**

这是固定公开密码的开发板的最佳方法。

它通过SSH和密码连接到目标，`gdbserver`每次都自动在目标上启动，超级方便！

目标`gdbserver`标准输出转到 Eclipse“控制台”窗口，这进一步减少了窗口切换。

在 Eclipse 集中：

*   解决“安全存储无法保存主密码”错误，如：[如何通过 SSH 密码调试连接解决 Eclipse CDT 远程应用程序中的“安全存储无法保存主密码”？](https://stackoverflow.com/questions/45658574/how-to-solve-secure-storage-was-unable-to-save-the-master-password-in-eclipse/45658575#45658575)
*   将启动器设置为：“自动远程调试启动器”
*   将“C/C++ 应用程序的远程绝对文件路径”设置为`/root/path/to/project/path/to/executable`
*   “连接”，“新建”，然后选择“基于密码的身份验证”

**使用公钥自动**

与密码验证非常相似，不同之处在于你必须去：“连接”，“新建”，并选择“基于公钥的验证”

优点：

*   如果您有加密的私钥（不安全，但可以
*   对于服务器，您可能已经设置了公钥

缺点：

*   键设置可能会在第一次伤害
*   每当开发板被核弹时，必须重做密钥设置

如果您满足以下条件，SSH 无需密码即可连接：

*   在目标上设置`~/.ssh/authorized_keys`以包含`~/.ssh/id_rsa.pub`来自主机的
*   在主机上有一个未加密的私钥，它绕过了我们的密码问题
*   正确设置讨厌的文件夹权限：[https ://unix.stackexchange.com/questions/36540/why-am-i-still-getting-a-password-prompt-with-ssh-with-public-key-authentication](https://unix.stackexchange.com/questions/36540/why-am-i-still-getting-a-password-prompt-with-ssh-with-public-key-authentication)

在使用此方法之前，请确保您的授权密钥可以在命令行中使用，即您现在应该能够执行以下操作：

```
ssh user@host 
```

无需输入任何密码。

**更改进程的当前工作目录**

[在 Eclipse CDT 中使用 gdbserver Automatic Launcher 远程调试时如何设置程序的当前工作目录？](https://stackoverflow.com/questions/45784188/how-to-set-the-current-working-directory-of-the-program-when-remote-debugging-wi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:37:15.573

不幸的是，这个问题尚未产生所需的解决方案。不过，您可能对我如何实际“解决”问题感兴趣：

我们现在直接在 Linux 机器上进行开发，远程做所有事情。我们在 Linux 机器上设置桌面用户并通过 VNC 登录以运行 Eclipse 并将其用作`gdb`. 虽然 VNC 不是最好的解决方案（也许我们稍后会尝试 NX），但这个解决方案让我们摆脱了`gdbserver`RSE/RDT 的任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T13:11:55.420

截至目前（Luna M6），Eclipse CDT+RDT+RSE 似乎是一条链，当您需要时缺少一些链接：

*   在台式电脑上运行 IDE
*   使用目标系统上的远程工具链来构建而不是安装本地交叉工具链
*   自动调试和运行，通过单击在远程系统上执行（启动 gdbserver，附加到它，并提供控制台输出）

这些要求在如今大量的 Linux ARM 板（如 Raspberry Pi 和 OLinuxino）中非常普遍。这些板通常有足够的资源来运行工具链，但不足以提供远程桌面环境来远程运行 IDE。

**我的最终解决方案：** 经过几天的努力，我终于放弃了 Eclipse CDT+RDT+RSE 转而使用[NetBeans C/C++ 远程开发环境](https://netbeans.org/kb/docs/cnd/remotedev-tutorial.html)，这对我来说就像是一种魅力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T07:21:01.540

> “通过“C++ 远程”调试错误：未指定程序（我需要本地代码吗？）”

是的，因为符号是从本地代码副本加载的。

在此类启动配置的调试器选项卡中，您将找到远程服务器和端口的设置。使用您在启动 gdbserver 时指定的机器名称和端口。

AFAIK 这仍然不起作用，因为在本地 Windows 机器上运行的 gdb 将不支持调试 linux 程序。您将需要 gdb 的交叉构建（使用 host=mingw-or-something 和 target=linux 配置和构建）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-20T18:15:13.893

你可以用 Eclipse 试试[这个插件](http://marketplace.eclipse.org/content/direct-remote-c-debugging)，对于并行应用程序版本 [，这里是一个链接](https://www.eclipse.org/downloads/packages/eclipse-parallel-application-developers/mars1)

它在从 Windows 机器开发到在 Linux 上编程时运行良好

# php - PHP：最后一个 Wordpress 入队主题

> ID：15685105
> 
> 赞同：1
> 
> 时间：2013-03-28T14:57:38.767
> 
> 标签：php, wordpress, wordpress-theming

我刚刚开始掌握 wordpress 和基本的 PHP。

我的理解是，要向 wordpress 添加额外的样式表，我必须在 functions.php 中使用以下语句：

`wp_enqueue_style('stylesheet_name', get_template_directory_uri() .'/css/stylesheet_name.css');`

我已经在我现有的主题中找到了它并添加了我的自定义样式表。一切正常。

但是，我希望能够确保此样式表排在最后。我知道`$deps`/`array()`声明。我不想做的是列出我所有的样式表，因为这肯定不是很有效。

有没有一种方法可以使用像“全部”这样的语句来定位所有加载的样式表？

提前谢谢各位！

劳埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:14:29.357

不，没有办法告诉它最后加载。但是您可以将前一个样式表指定为依赖项。例如，您想像这样加载 CSS 文件（以相同的顺序）：

```
a.css
b.css
c.css
d.css 
```

您需要手动创建每个引用，但将样式的名称保存在一个数组中并使用 for 循环添加它们，这样可以节省您的编码时间。

```
$styles = array('a','b','c','d');
$dep = false;

foreach ($styles as $style){
   $script_id = $style . '_script';
   wp_enqueue_style($script_id, get_template_directory_uri() .'/css/' . $style . '.css', $dep);
   $dep = $script_id;
} 
```

请不要通过JS代码添加它。

# iphone - 在 Interface Builder 中为 Iphone 创建弹出视图控制器

> ID：15685106
> 
> 赞同：3
> 
> 时间：2013-03-28T14:57:38.970
> 
> 标签：iphone, ios, objective-c, uipopovercontroller, uistoryboard

我该怎么做呢？我知道我必须给弹出框一个视图控制器，它从中构造它的视图，但我不知道如何在 Interface Builder 中构造这个视图（比如添加标签和按钮等等）。

我是否只是在普通情节提要中进行，并且有一个随机不与其他任何东西连接的情节提要，坐在角落里？

我要创建另一个故事板吗？

即使我的项目都是故事板，我是否创建 xib？

我是否以编程方式创建它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T15:11:12.457

由于您没有在问题中指定目标设备，所以我给了您 Ipad 答案

***平板电脑：***

转到您的故事板拖放一个`viewcontroller`或`tableviewcontroller`它由您决定。然后在你的故事板上创建一个从所需的 segue`viewcontroller`到新的 dragged/dropped `viewcontroller`。选择你的 segue 为`popOver`.

![在此处输入图像描述](../Images/05aac5d5ba930460a38eea957b824398.png)

![在此处输入图像描述](../Images/b06f4b828e0f2225fef08a9a38a0d1cc.png)

确保在 segue 设置中选择一个锚点，如上图。然后你需要编辑你的 popover 的大小。如果它`uiviewcontroller`选择它的视图，如果它`tableviewcontroller`选择它在界面生成器左侧的表格视图并编辑它的大小。

第一的：

![在此处输入图像描述](../Images/75a5b26df88d8e152e2503a571b901b4.png)

第二：

![在此处输入图像描述](../Images/816885d6ede6472ca8b1ec1470205d2e.png)

之后自定义您的弹出视图控制器（拖放视图控制器）添加按钮，标记任何您想要的。

如果您要在弹出窗口中执行其他操作：不要忘记创建新文件 -> uiviewcontroller 或 uitableviewcontroller 的子类。然后将它与故事板上新创建的视图控制器相关联。

![在此处输入图像描述](../Images/a709a764e129b25d22828db0a1679567.png)

***苹果手机：***

iphone中没有Popover控制器

但是您尝试使用第三方[https://github.com/50pixels/FPPopover](https://github.com/50pixels/FPPopover)解决方案，该解决方案通过使用模仿 iphone 中的弹出行为`QuartzCore`

我会尝试以下：

第一的：

再次将 a 拖放`uiviewcontoller`到情节提要中，然后创建一个新文件-> 的子类`uiviewcontroller`。

***这个新`uiviewcontroller`的将坐在你故事板的角落里***

然后将情节提要中的 uiviewcontroller 与新的 Created 文件相关联，假设您使用`YourViewController`. 给你的视图一个故事板ID并选择它的类名。

![在此处输入图像描述](../Images/bd6d8fd8c8d54556b6d964ddda0fc14e.png)

```
-(IBAction)buttonClicked:(UIButton*)okButton
{
    //the view controller you want to present as popover
    YourViewController *controller = [[YourViewController alloc] init]; 

    //if [[YourViewController alloc] init]; doesn't work try this
   // UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                     bundle:nil];
    //YourViewController *controller = [sb instantiateViewControllerWithIdentifier:@"YourViewController"]; 

    //our popover
    FPPopoverController *popover = [[FPPopoverController alloc] initWithViewController:controller]; 

    //the popover will be presented from the okButton view 
    [popover presentPopoverFromView:okButton]; 

    //no release (ARC enable)
    //[controller release];
} 
```

注意：我之前没有使用过那个 FPPopover，所以不知道如何安排屏幕大小，但是他们的文档中必须有进一步的解释，只是阅读它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-31T08:49:38.497

**iPhone 解决方案**

由于 iOS 8.0 也可以为 iPhone 应用程序实现这一点！

目标视图控制器（应该出现在弹出窗口中的那个）需要符合' **UIPopoverPresentationControllerDelegate** '协议并且必须实现消息' **adaptivePresentationStyleForPresentationController:traitCollection:** '。除此之外，它的“ **modalPresentationStyle** ”应该是“ **UIModalPresentationPopover** ”，控制器应该是他自己的“ **UIPopoverPresentationController** ”委托。

以这种方式准备好视图控制器后，只需从您的 UINavigationBarItem（或其他任何东西）到目标视图控制器创建一个故事板 segue（类型：'Present As Popover'）。

[![在此处输入图像描述](../Images/554078acb8590b3f1862268177dba195.png)](https://i.stack.imgur.com/FIAmY.png)

执行：

```
@implementation TestViewController

/*
 initWithCoder:

 */
- (instancetype)initWithCoder:(NSCoder *)pDecoder {
    //FLog;

    if (self = [super initWithCoder:pDecoder]) {

        self.modalPresentationStyle = UIModalPresentationPopover;
        self.popoverPresentationController.delegate = self;
    }
    return self;
}

#pragma mark - POPOVER PRESENTATION CONTROLLER DELEGATE

/*
 adaptivePresentationStyleForPresentationController:traitCollection:

 */
- (UIModalPresentationStyle)adaptivePresentationStyleForPresentationController:(UIPresentationController *)pController
                                                               traitCollection:(UITraitCollection *)pTraitCollection {
    //FLog;

    return UIModalPresentationNone;
}

// ...

@end 
```

当然，委托协议也可以在其他类中实现，但这种方式是最简单的:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T17:46:16.323

我认为 iPhone 设备的更好方法是创建一个 View Controller，其 View 的背景颜色设置为清除。然后在这个视图中，您只需添加一个较小尺寸的视图，这将给出一个弹出窗口的外观。

呈现这个视图控制器将给出一个弹出窗口的外观。这是我采取的方法。如果用户点击父视图上较小视图边界之外的区域，您可以关闭视图控制器。

# css - 是否可以在后续文件中删除 CSS 样式？

> ID：15685112
> 
> 赞同：1
> 
> 时间：2013-03-28T14:57:52.563
> 
> 标签：css, stylesheet

我知道在 CSS 中，您设置的样式会覆盖先前加载的样式表中该样式的设置。

但是有没有办法*删除*在以前加载的样式表中设置的样式？例如，假设我在我的项目中包含[bootstrap](http://twitter.github.com/bootstrap/)，它具有这种风格：

```
.tab-content {
    overflow: auto;
} 
```

而且这种风格会造成一些不良影响，所以我想摆脱它。我当然可以在我自己的样式表中将它设置为某个理想的值，但我宁愿它只是就好像那种样式从未存在过一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:44:11.027

没有办法**删除**在以前的样式表（或实际上在同一个样式表中）设置的 CSS 规则或属性，但您可以用自己的样式覆盖它们。

这些必须出现在原始规则之后（如果选择器具有相同的特异性 - 请参阅[CSS 特异性：您应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)）或具有比前面规则更高的特异性。

例如-

```
.tab-content {
    overflow: auto;
}
...

.tab-content {
    overflow: inherit;
} 
```

会工作，但是-

```
#foo.tab-content {
    overflow: auto;
}
...

.tab-content {
    overflow: inherit;
} 
```

不会被覆盖，原始的 auto 值将保持不变。如果您想了解特异性，那么在阅读上述文章后，Keegan Street的[特异性计算器非常值得尝试。](http://specificity.keegan.st/)

如果您可以删除原始规则并且在其他地方不需要它，那么最好摆脱它而不是简单地添加新的替换值，但假设它在网站的其他地方或第三方内容的一部分中使用（如bootstrap），您不能或不想更改，那么您可以将其重置为默认值或所需值。在“溢出”的情况下，默认值为“可见”（请参阅[​​ https://developer.mozilla.org/en-US/docs/CSS/overflow](https://developer.mozilla.org/en-US/docs/CSS/overflow)）。如果仅在您的内容中需要该规则，那么您可能希望将其包含在选择器中以避免影响页面/站点的其他部分-

```
#your-container .tab-content {
   overflow: visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:57:52.563

我不太了解 CSS，但是当我写这个问题时，我想到了解决方案。通过`inherit`在我的后续 CSS 文件中简单地设置样式，我可以模拟默认行为，以便认为样式从未设置过。

```
.tab-content {
    overflow: inherit;
} 
```

# c# - 实体框架不再显示在“添加新项目”对话框中

> ID：15685114
> 
> 赞同：0
> 
> 时间：2013-03-28T14:57:55.647
> 
> 标签：c#, asp.net, .net, visual-studio, entity-framework

我刚刚完成了 Windows 8 Pro 的全新*安装，并在全新安装 Windows 之前下载并安装了我之前下载和安装的所有内容。*现在，当我在 Visual Studio 2012 Express for Web 中打开一个现有`Website`的（或创建一个新网站）并右键单击 App_Data 文件夹 > 添加 > 添加新项目 - 用于显示的 ADO.NET Entity Framework Provider 项目时，我可以为我的网站添加实体酷炫 - 但这不再是一种选择。

我刚刚花了几个小时试图弄清楚发生了什么，所以我尝试通过 Nuget PackageManager 控制台再次重新安装 Entity：

安装包EntityFramework

正如其中一个 MSDN 页面所建议的那样，它“成功”安装了，但没有一丝证据表明它存在于我的系统上的任何位置。

为什么我不能再将实体框架的东西添加到我的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:04:42.730

EntityFramework 是一个程序集，它将位于您的解决方案文件夹中的 packages\entityframework 文件夹中。

# jquery - 每个导航悬停显示和隐藏的jQuery

> ID：15685116
> 
> 赞同：0
> 
> 时间：2013-03-28T14:57:57.033
> 
> 标签：jquery

我正在尝试在 mouseenter 和 mouseleave 上显示和隐藏，以便导航可以显示实际上是导航的 iframe。我知道这很奇怪和不寻常，但无论如何我的代码在下面，它只适用于第一次悬停，我试图让它在导航上循环以显示所有导航悬停。

我确实相信 .each() 方法会起作用我只是不确定如何将它应用到我的代码中。

谢谢您的帮助。

```
 $(document).ready(function() {  

            $("#primary-navigation li").bind("mouseenter",function() {
            $("#primary-navigation li iframe").show();
            });

            $("#primary-navigation li").bind("mouseleave",function() {
            $("#primary-navigation li iframe").hide();
            });

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:01:09.950

也许这会有所帮助。我认为你使用`bind`不正确。应该是`on`，`delegate`或者只是`hover`

```
$("#primary-navigation li").hover(
   function(){  $(this).find('iframe').show(); }, // mouseenter
   function(){  $(this).find('iframe').hide(); }  // mouseout
); 
```

# playframework - Jeditable 未收到任何数据

> ID：15685120
> 
> 赞同：1
> 
> 时间：2013-03-28T14:58:13.047
> 
> 标签：playframework, jeditable

我是 Play 框架 2.1 的新手。

我想使用这个插件： http: [//www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable) 在我的控制器中，我没有收到帖子数据（id 和 newvalue）。我怎样才能找回它们？

这是我的代码：

意见：

```
<script>
$(document).ready(function() {
   $('role').editable('@controllers.serveur.routes.Serveurs.editServeur');
});
</script>
<a href="#" id="role">test</a> 
```

路线：

```
POST  /serveurs/liveEdit   controllers.serveur.Serveurs.editServeur 
```

控制器：

```
public static Result editServeur(){
     Logger.debug(form().bindFromRequest().toString());
     return ok("nice");
} 
```

logger.debug 的结果：

[调试] 应用程序 - Form(of=class play.data.DynamicForm$Dynamic, data={}, value=Some(Form.Dynamic({})), errors={})

我的 Javascript 没有错误

# android - 在已经隐藏和编辑框聚焦后显示软键盘

> ID：15685125
> 
> 赞同：0
> 
> 时间：2013-03-28T14:58:17.817
> 
> 标签：android, show, hidden, android-softkeyboard

我有一个只能在 2.3 设备上重现的问题。基本上，我有一个带有两个 EditText 的活动，它们都是可聚焦的，用户可以在其中输入任何内容。当我从纵向切换到横向时，我有一个要求，即不应显示虚拟键盘。为此，在 OnConfigurationChanged 上，我使用 InputMethodManager 的 hideSoftInputFromWindow。但是，如果假设字段 2 在纵向模式下聚焦，当我切换到横向模式时，该字段已聚焦但按下它不会打开键盘。我什至强迫它打开：

```
edittext2.setOnClickListener(new OnClickListener() {
@Override
    public void onClick(View v) {
InputMethodManager keyboard = ( InputMethodManager )
getSystemService( Context.INPUT_METHOD_SERVICE );
keyboard.showSoftInput( v, InputMethodManager.SHOW_FORCED); 
```

但键盘也没有出现。

似乎，因为它已经聚焦并且之前的键盘被显示和隐藏，系统决定不打开另一个键盘。

你能建议我对此进行快速修复吗？

**之后**

*最后在调用showSoftInput*之前使用这个小讨厌的解决方法解决了这个问题：

```
edittext2.clearFocus
edittext2.requestFocus 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:39:02.500

这个方法怎么样；

```
 public static void setKeyboardFocus(final EditText primaryTextField) {
    (new Handler()).postDelayed(new Runnable() {
        public void run() {
            primaryTextField.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0, 0, 0));
            primaryTextField.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP, 0, 0, 0));
        }
    }, 100);
} 
```

# c - 如何解决网络浏览器控件的内存泄漏问题？

> ID：15685129
> 
> 赞同：2
> 
> 时间：2013-03-28T14:58:19.927
> 
> 标签：c, winapi, browser, memory-leaks, windows-embedded

我使用`iwebbrowser2`导航来浏览一些本地`html`文件。

每次导航时，内存都会被分配，直到我关闭我的应用程序才会释放！我的`win32`（不`.net`，不`MFC`）应用程序在 Windows 嵌入式 compatct 7 模块上运行。

有没有解决这个问题的方法？

# javascript - 输入值和字符串变量的连接

> ID：15685132
> 
> 赞同：3
> 
> 时间：2013-03-28T14:58:28.520
> 
> 标签：javascript, jquery, string

我正在尝试将输入的值与 String 变量连接起来。例如：（假设 id 为“input1”的输入的值为“tttttt”）

```
var test = 'blabla' + $('#input1').val() + 'blabla'; 
```

所以预期的结果（至少对我来说）应该是`'blablattttttblabla'`. 问题是它没有在中间插入那个输入的值，所以结果是`'blablablabla'`. 有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:03:18.253

**尝试**

```
<input type="text" name="text" id="input1" value="ttttttt"/> 
```

**JS**

```
<script>
$(document).ready(function(){
    var test = 'blabla' + $('#input1').val() + 'blabla';
    alert(test);
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:05:47.837

在我看来，要么您缺少顶部的 jQuery 库，要么在`doc ready`处理程序中未调用此脚本：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
   $(function () {
      var test = 'blabla' + $('#input1').val() + 'blabla';
      alert(test);
   });
</script> 
```

### [演示小提琴](http://jsfiddle.net/dCSPR/)

确保您`#input1`的值包含在。

# javascript - 如何在 YAxes 中使用“stacking:percent”将“maxPadding”放在 HighCharts 中？

> ID：15685133
> 
> 赞同：0
> 
> 时间：2013-03-28T14:58:29.670
> 
> 标签：javascript, jquery, highcharts

我想在 YAxes 中为图形“百分比”留出填充。我需要在酒吧后面留一个空格。看下面的代码。

'chart = new Highcharts.Chart({ chart: { renderTo: 'container', 倒置: true, type: 'column' },

```
 title: {
        text: 'Indicatores por Sexo'
    },

    xAxis: {
       categories: [
            'Jan',
            'Fev',
            'Mar',
            'Apr',
            'May',
           'Jun',
           'Jul',
           'Aug',
           'Sep',
           'Oct',
           'Nov',
           'Dez'
       ],
       title: {
           text: 'Meses'
       },
    },

    yAxis: {
        endOnTick: false,
        maxPadding: 5,
        allowDecimals: false,
        min: 0,
        title: {
            text: 'Quantidade de Consultas'
        },
        stackLabels: {
            style: {
                color: 'black'
            },

            enabled: true,
            formatter: function() {
                return "Product A";
            }
        }
    },

    tooltip: {
        formatter: function() {
            return '<b>'+ this.x +'</b><br/>'+
                this.series.name +': '+ this.y +'<br/>'+
                'Total: '+ this.point.stackTotal;
        }
    },

    plotOptions: {
        column: {
            stacking: 'percent'
        },
        series : {
            pointWidth: 10,
            minPointLength: 3,
        }
    },

    series: [{
        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], //inclusoesExclusoesChequeFeminino[0]
        color: '#FF0000',
        stack: 0
    }, {
        data: [12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1], //inclusoesExclusoesChequeMasculino[0]
        color: '#3333FF',
        stack: 0
    }, {
        data: [10, 20, 30, 40, 50, 60, 60, 50, 40, 30, 29, 10], //inclusoesExclusoesSPCFeminino[0]
        color: '#FF0000',
        stack: 1
    }]
});' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:10:30.223

您可以为图表添加右边距，这将为标签 [http://api.highcharts.com/highcharts#chart.marginRight提供空间](http://api.highcharts.com/highcharts#chart.marginRight)

此外 - 带有“inverted:true”的柱形图与条形图相同。为什么不直接使用“bar”类型？

# javascript - 使用 Web 浏览器和客户端 javascript 将文件逐块写入磁盘

> ID：15685134
> 
> 赞同：5
> 
> 时间：2013-03-28T14:58:32.300
> 
> 标签：javascript, html, google-chrome, browser, fileapi

最新的 Chrome、Firefox 或 IE 是否可以向用户询问文件的另存为位置，然后使用您自己的 javascript 算法将文件逐块写入所需的/由用户位置选择的字节。让我澄清一下：

1.  要求用户将文件名指向另存为位置，例如：C:\ggg.png（但数据尚未保存）
2.  之后能够以编程方式在某个 Blob 中逐块向其写入数据吗？

# matlab - 在 MATLAB ode45 输出上设置条件（运行时）

> ID：15685138
> 
> 赞同：2
> 
> 时间：2013-03-28T14:58:41.140
> 
> 标签：matlab, ode

我正在用 ode45 为许多不同的参数（这些参数是微分方程的系数）求解一个 ODE 系统，我想找到解小于（不大于）给定值的参数。

如何在 ode45 上设置条件，以自动“检测”解决方案（对于其中一些参数）是否**在求解**系统时大于该（给定）值并**停止求解进一步步骤**？

Jan 建议将以下条件放在输入函数的定义中，以便 int. 我试过这个，但它不起作用：经过几个步骤（虽然条件还不正确）迭代很快结束，输出保持在某个数字不变。（不正确的输出）

（qm、U、V 等是常数，X 有 4 列）

```
[T,X]=ode45(@acceleration,tspan,x0);

function xprime=acceleration(T,X)
   size_X=length(X);
    xprime=zeros (4,1);
        if X(size_X,1)>threshold

  xprime(1)=0;
  xprime(2)=0;
  xprime(3)=0;
  xprime(4)=0;

        else

  xprime(1)=X(3);
  xprime(2)=X(4);
  xprime(3)=X(1)*X(4)^2 - 2*qm*(U+V*(cos(w*T)))*F1(num,X(1),X(2));
  xprime(4)= -2*X(3)*X(4)/X(1) - qm*((U+V*(cos(w*T)))/(X(1)))*F2(num,X(1),X(2));

        end
  end 
```

*   上面的代码有什么问题？
*   有人建议在 ode45 上附加一个监控功能。（[这里](https://scicomp.stackexchange.com/questions/5383/setting-a-condition-on-matlab-ode45-output?noredirect=1#comment10331_5383)）。有谁知道如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:10:40.927

我没有看到 Matlab ODE 求解器中可能（错误）用于您的目的的内置选项。

但是你可以相应地修改你的右手边`y' = f(t,y)`。我可能会想到

*   `IF y > threshold THEN f(t,y) = 0`-- 由于 ODE45 中的步长控制，这应该会导致迭代快速结束
*   或引发异常，仅取消当前迭代（不知道如何执行此操作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:38:02.097

您是在求解一组方程还是试图随着时间的推移进行积分？如果没有更多信息，听起来您应该使用 fsolve 或 fmincon？

如果您真的在集成，我认为您可以使用事件功能向 ode45 指示您要停止。Ballode 示例可能会有所帮助。

# php - Jquery Ajax 和 PHP 取消链接

> ID：15685139
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:58:41.723
> 
> 标签：php, jquery, ajax

我在使用 jQuery 运行删除文件的 AJAX 请求时遇到了困难：

```
function deleteuploadedfile(filetodelete) {
             $imagefile = 'http://domain.co.uk/directory/uploads/'+filetodelete;
             alert($imagefile);
              $.ajax({
                type: 'POST',
                data: {
                    action: 'deleteimage',
                    imagefile: $imagefile,
                     },
            url: 'http://domain.co.uk/directory/delete.php',
            success: function(){
                alert('success');
              }
            })
        }

THE PHP FILE

<?php
    if($_POST["action"]=="deleteimage")
    {
        $imagefile = $_POST['imagefile'];
        $imagefileend = '/uploads/'.end(explode('images',$imagefile)); 
        unlink($_POST['imagefile']);
    }
?> 
```

我收到警报“成功”但文件没有从服务器中删除。

我已经做到了这一点，只需要一些关于正在发生的事情以及为什么文件没有被删除的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:03:34.557

在您的 PHP 代码中，您正在执行以下操作：

```
unlink($_POST['imagefile']); 
```

$_POST['imagefile'] 来自您的 ajax 调用，并在 javascript 中设置为：

```
$imagefile = 'http://domain.co.uk/directory/uploads/'+filetodelete;
$.ajax({type: 'POST',
        data: {
              action: 'deleteimage',
              imagefile: $imagefile,
        } 
```

您如何期望 PHP 能够删除远程 URL？

您似乎正在使用本地路径设置 $imagefileend 变量，但您没有在 unlink() 调用中使用它。仔细检查您尝试取消链接（）的内容，在尝试取消链接之前吐出完整路径，并验证它在本地存在并且您具有适当的权限。

此外， unlink() 根据成功返回 true 或 false。捕获并使用它来帮助调试。

**建议编辑（未经测试）：**

```
 if($_POST["action"]=="deleteimage")
 {
     $imagefile = basename($_POST['imagefile']); // See http://php.net/basename
     $path = '/uploads/'. $imagefile;
     if(!file_exists($path)) {
          echo json_encode(array("success" => 0, "error" => "File $imagefile does not exist"));
          exit;
     }

     if(!unlink($path)) {
          echo json_encode(array("success" => 0, "error" => "File could not be deleted, check permissions"));
          exit;  
     }

     echo json_encode(array("success" => 1));   
 } 
```

然后在您的 ajax 函数客户端有一个回调，检查服务器响应，并确保成功 = 1。

```
success: function(data){
    var response = $.parseJSON(data);
    if(!response.success) {
        alert(response.error);
    } else {
        alert("success!");
    }
} 
```

此外，我建议使用 Chrome（或 Firefox）并观看开发人员工具的网络选项卡，这样您就可以准确地看到服务器从 ajax 调用返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:04:15.497

由于*PHP*脚本本身已定位并且请求执行正常，您将获得*成功*。为了让您的*java 脚本*代码知道您的*PHP*脚本中出了问题，您必须做的是返回某种错误代码，供您的*java 脚本*阅读并采取行动。

关于您的*PHP*脚本，您尝试*取消链接* **$_POST['imagefile']**这是一个 URL。这不会很好地工作。您应该将**网络服务器上的本地路径**传递给您要删除的文件。

然后将一些代码返回到您的 java 脚本前端，指示删除文件成功或失败并通知用户。

# java - 使用 xmlelement defaultvalue 注释分配默认值的简单方法

> ID：15685140
> 
> 赞同：7
> 
> 时间：2013-03-28T14:58:42.830
> 
> 标签：java, jaxb, annotations

我通过 JAXB 有一个简单的 pojo 注释类：

```
 public class MyPojo
    implements Serializable
{

    private final static long serialVersionUID = 1234L;
    @XmlElement(name = "Type", required = true, defaultValue = "none")
    @NotNull
    protected SeismicDataAcquisitionSystemType type;
    @XmlElement(name = "IpAddress", required = true)
    @NotNull
    @Pattern(regexp = "((1?[0-9]?[0-9]|2[0-4]|[0-9]|25[0-5]).){3}(1?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])")
    protected String ipAddress;
    @XmlElement(name = "SealServerTcpPort", defaultValue = "1477")
    @NotNull
    protected int sealServerTcpPort;
    @XmlElement(name = "PamServerTcpPort", defaultValue = "1485")
    @NotNull
    protected int pamServerTcpPort;

    /**
     * Obtient la valeur de la propriété type.
     * 
     * @return
     *     possible object is
     *     {@link SeismicDataAcquisitionSystemType }
     *     
     */
    public SeismicDataAcquisitionSystemType getType() {
        return type;
    }

    /**
     * Définit la valeur de la propriété type.
     * 
     * @param value
     *     allowed object is
     *     {@link SeismicDataAcquisitionSystemType }
     *     
     */
    public void setType(SeismicDataAcquisitionSystemType value) {
        this.type = value;
    }

    public boolean isSetType() {
        return (this.type!= null);
    }

    /**
     * Obtient la valeur de la propriété ipAddress.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getIpAddress() {
        return ipAddress;
    }

    /**
     * Définit la valeur de la propriété ipAddress.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setIpAddress(String value) {
        this.ipAddress = value;
    }

    public boolean isSetIpAddress() {
        return (this.ipAddress!= null);
    }

    /**
     * Obtient la valeur de la propriété sealServerTcpPort.
     * 
     */
    public int getSealServerTcpPort() {
        return sealServerTcpPort;
    }

    /**
     * Définit la valeur de la propriété sealServerTcpPort.
     * 
     */
    public void setSealServerTcpPort(int value) {
        this.sealServerTcpPort = value;
    }

    public boolean isSetSealServerTcpPort() {
        return true;
    }

    /**
     * Obtient la valeur de la propriété pamServerTcpPort.
     * 
     */
    public int getPamServerTcpPort() {
        return pamServerTcpPort;
    }

    /**
     * Définit la valeur de la propriété pamServerTcpPort.
     * 
     */
    public void setPamServerTcpPort(int value) {
        this.pamServerTcpPort = value;
    }
} 
```

我尝试用这样的默认值初始化我的 pojo

```
 MyPojo myPojo = new MyPojo();
myPojo.getPamServerTcpPort(); // return 0
setDefaultValues(myPojo); // assign attributes with annotated default values
myPojo.getPamServerTcpPort(); // return 1485 
```

我正在尝试使用方法 setDefaultValues(MyPojo loMyPojo) 以编程方式使用 java.lang.annotation API 和 java.lang.reflect API 解析类，但我的代码很丑陋并且不适用于我自己的枚举默认值

我不得不提到我无法修改原始类 MyPojo，因为它本身是通过 JAXB 由 XSD 解析生成的

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T20:20:18.513

您缺少的功能的快速实现可能如下所示：

```
 public static void setDefaultValues(Object o) throws Exception {
        if (o == null)
            return;
        for (Class<?> clazz = o.getClass(); clazz != Object.class; clazz = clazz.getSuperclass()) {
            for (final Field f : clazz.getDeclaredFields()) {
                final XmlElement xe = f.getAnnotation(XmlElement.class);
                if (xe != null && xe.defaultValue() != null) {
                    final Class<?> t = f.getType();
                    if (t.isAssignableFrom(String.class)) {
                        f.setAccessible(true);
                        f.set(o, xe.defaultValue());
                    } else if (t.isAssignableFrom(Integer.class) || clazz.getSimpleName().equals("int")) {
                        f.setAccessible(true);
                        f.set(o, Integer.parseInt(xe.defaultValue()));
                    } else if (t.isAssignableFrom(Long.class) || clazz.getSimpleName().equals("long")) {
                        f.setAccessible(true);
                        f.set(o, Long.parseLong(xe.defaultValue()));
                    }
                    // else {
                    // TODO: add futher conversions
                    // }
                }
            }
        }
    } 
```

# c - 在字符串中查找字符，然后在该字符之前插入字符

> ID：15685142
> 
> 赞同：0
> 
> 时间：2013-03-28T14:58:45.517
> 
> 标签：c

我正在研究 C 中的字符串，我有这个问题。我看过stackoverflow中的一些问题，但我找不到相同的问题，如果有请给我链接：D

对于 exp，我有一个字符串`"D://test.txt"`

现在我想将其转换为`"D://test1.txt"`

我知道我必须`.`在字符串中找到，然后在它前面加上数字，但我不知道该怎么做。请帮帮我:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:03:34.793

使用`strchr()`（或`strrchr()`）查找点。这两个函数的原型都在`<string.h>`.

没有现成的函数可以在字符串中间插入字符。你必须自己写。

# breeze - 将包含 ComplexTypes 的新 EntityTypes 添加到 Breeze 的 metadataStore

> ID：15685145
> 
> 赞同：0
> 
> 时间：2013-03-28T14:58:55.047
> 
> 标签：breeze

我正在关注 Breeze 的[NoDb 示例](http://www.breezejs.com/samples/nodb)，以便将自定义类型添加到 Breeze 元数据存储中。我的目标是能够调用我的 web api 控制器方法并让该对象的客户端版本完全水合。

我无法检索 Employee 对象并映射我的 Employee 属性（FirstName、LastName），也无法映射我包含的复杂类型。这些复杂类型只是我的 Employee 对象上的属性，由服务器端的其他自定义类的集合组成。

例如，我有一个自定义类型的“CompanyAffiliates”，它包含一个 CompanyId 和一个 Name 属性。

我似乎无法让 Breeze 正确映射任何内容，而且我没有从错误中得到任何反馈。谁能给我一些建议？

这是一些相关的代码：

```
addEmployeeType = function() {
                var entityType = new _entityType({
                    shortName: "Employee",
                    namespace: "HSSPortal.Business.Models",
                    autoGeneratedKeyType: _autoGeneratedKeyType.Identity
                });
                entityType.addProperty(new _dataProperty({
                    name: "customerId",
                    dataType: _dataType.String,
                    isNullable: false,
                    isPartOfKey: true
                }));
                entityType.addProperty(new _dataProperty({
                    name: "firstName",
                    dataType: _dataType.String,
                    isNullable: false
                }));

                entityType.addProperty(new _dataProperty({
                    name: "lastName",
                    dataType: _dataType.String,
                    isNullable: false
                }));
 _store.addEntityType(entityType); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:48:31.360

我的猜测是您在服务器上创建的类型的名称与您在客户端上注册的名称不匹配。在这种情况下，您有一个客户端类型，它将与“HSSPortal.Business.Models”命名空间中名为“Employee”的服务器端类型匹配。

您可以更改客户端类型注册代码或服务器端类型，以便您的类型名称匹配。或者，您可以使用 JsonResultsAdapter 将来自服务器的序列化类型名称解释为客户端上的注册类型。您的情况可能不需要这种方法。

一个小提示：在上面的代码中，您实际上并没有在这里注册一个轻而易举的“ComplexType”。复杂类型是通过 AddComplexType 方法创建的，它既没有键属性也没有 AutoGeneratedKeyType。从概念上讲，“ComplexTypes”表示除了在其父实体的上下文中不可查询的属性的集合。

如果您实际上是在代码中注册复杂类型（上面未显示），那么它们将有类似的命名问题。

# excel - 如何在excel上查找控件的ID

> ID：15685148
> 
> 赞同：1
> 
> 时间：2013-03-28T14:59:16.800
> 
> 标签：excel, vba

我必须编写 VBA 脚本才能从代码中的菜单栏中选择任何项目，但它不起作用。

请在代码下方找到并建议正确的代码。

```
Sub selectMenu()
    Application.CommandBars("Worksheet Menu Bar").Controls("View").Controls("Arrange All").Execute
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:35:35.280

如果您正在使用，`>=xl2007`那么您可以使用`ExecuteMso`来单击`Arrange All`

```
Sub selectMenu()
    Application.CommandBars.ExecuteMso ("WindowsArrangeAll")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:44:50.950

```
Windows.Arrange 
```

参数可以是`xlArrangeStyleHorizontal`, `xlArrangeStyleCascade`, `xlArrangeStyleTiled`,中的任何一个`xlArrangeStyleVertical`。

参考：（[http://msdn.microsoft.com/en-us/library/office/aa221833](http://msdn.microsoft.com/en-us/library/office/aa221833(v=office.11).aspx) (v=office.11​​).aspx ）

# python - 尝试 os.rename 时出现 WindowsError 32

> ID：15685152
> 
> 赞同：1
> 
> 时间：2013-03-28T14:59:31.433
> 
> 标签：python, file, python-2.5

我正在使用一个基本文件夹`REF_IMAGES`，我在其中保存指定语言的参考位图。我还有其他几种语言文件夹`REF_IMAGES-EN`，例如`REF_IMAGES-NL`等。

我想创建一个脚本，它将基本文件夹重命名为其语言，即。`REF_IMAGES-xx`并将所选语言文件夹重命名为基本文件夹名称。

为此，我创建了一个 txt 文件，用于跟踪文件夹中的原始语言。

我的代码如下：

```
import os

# Define paths
baseFolder = 'D:\\IMAGES\\'
imageFolder = 'D:\\IMAGES\\REF_IMAGES'

LanguageFile = 'FolderLanguage.txt'

# Define selected language
language = '-FR'

# Read current language of baseFolder
textFile = open(os.path.join(imageFolder, LanguageFile), "r")
try:
    currentLanguage = textFile.read()
finally:
    textFile.close()

# Rename image folder to original name. This where the error comes up
os.rename(imageFolder, os.path.join(imageFolder, currentLanguage))

# Search for selected language folder and rename it to default one.
for folderName in os.listdir(baseFolder):
    if folderName.endswith(language): # Look for selected language folder
        os.rename(os.path.join(baseFolder, folderName), os.path.join(baseFolder, folderName.split('-')[0])) # Rename selected language folder to base folder
        currentLanguage = language # Save the language the folder is switched to
        textFile = open(os.path.join(imageFolder, LanguageFile), "w")
        try:
            textFile.write("%s" %currentLanguage)
        finally:
            textFile.close() 
```

但是，在尝试将图像文件夹重命名为其原始名称时出现以下错误：

```
WindowsError: [Error 32] The process cannot access the file because it is being used by another process 
```

我已经尝试了几个 Unlocker 程序，但它们都不起作用。我想是脚本本身阻止了它，但我不知道是什么。

有人知道吗 ？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:34:03.803

**用这个测试：**

> ```
>  try:
>      currentLanguage = textFile.read()
>  except WindowsError:
>    pass
>    textFile.close()
> 
> try:
>     textFile.write("%s" %currentLanguage)
> except WindowsError:
>    pass
>    textFile.close() 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:49:09.177

自己发现了问题！错误出现在 os.rename 语法中。通过做 ：

```
os.rename(imageFolder, os.path.join(imageFolder, currentLanguage)) 
```

的输出`os.path.join(imageFolder, currentLanguage)`是`IMAGES\REF_IMAGES\-FR`而不是`IMAGES\REF_IMAGES-FR`像我预期的那样

我现在使用的语法是：

```
originalName = imageFolder + currentLanguage
os.rename(imageFolder, originalName) 
```

感谢 Mayk，实际上是他带领我。

# java - 调用 Url.OpenStream 时出现 Android NetworkOnMainThreadException

> ID：15685153
> 
> 赞同：1
> 
> 时间：2013-03-28T14:59:33.123
> 
> 标签：java, android, url, exception, networkonmainthread

在模拟器（Android 4.0.3 / API 15）上运行我的代码时出现此异常。打开流时，它会抛出异常。错误消息是`null`。

```
try {
    String adress        = "xxx";
    URL url              = new URL(adress);
    InputSource source   = new InputSource(url.openStream());

} catch (Exception e) {
    (new TextView).setText("Error: "+e.getMessage());
} 
```

URL 仍在使用模拟器（在浏览器中）。

我已经清理了项目。

也允许互联网连接：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

例外 ：`android.os.NetworkOnMainThreadException`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:30:39.620

请**永远不要**在主 ( **UI** ) 线程上运行网络操作。

**主**线程用于：

*   与用户交互。
*   渲染 UI 组件。

对其进行任何长时间的操作都可能使您的应用程序因**ANR**消息而关闭。

看看以下内容：

*   [保持您的应用程序响应](http://developer.android.com/training/articles/perf-anr.html)
*   [NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

您可以轻松地使用 a`AsyncTask`或 a`Thread`来执行您的网络操作。

这是关于 android 中线程和后台工作的精彩教程：[链接](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T23:04:20.443

为我工作：

*清单.xml：*

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

*.java：*

```
private static boolean DEVELOPER_MODE = true;
...
protected void onCreate(Bundle savedInstanceState) {

     if (DEVELOPER_MODE) {
         StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                 .detectDiskReads()
                 .detectDiskWrites()
                 .detectNetwork()   // or .detectAll() for all detectable problems
                 .penaltyLog()
                 .build());
         StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
                 .detectLeakedSqlLiteObjects()
                 .detectLeakedClosableObjects()
                 .penaltyLog()
                 .penaltyDeath()
                 .build());
     }  
... 
```

希望能帮助到你。

另见：http: [//developer.android.com/reference/android/os/StrictMode.html](http://developer.android.com/reference/android/os/StrictMode.html)

# c# - 使用 C# 中的委托将其他函数作为输入的函数

> ID：15685162
> 
> 赞同：1
> 
> 时间：2013-03-28T14:59:50.193
> 
> 标签：c#, delegates, lambda, anonymous-function

我有一些代表和一个方法：

```
delegate Point Translate(Point p);
delegate Translate Transform(Translate t);

Translate forward = p => new Point(p.X + 1, p.Y); 
```

**问题：**如何实现这样的方法：

```
Transform Rotate90 = ?? 
```

这样就可以将`Rotate90`任何`Translate`函数顺时针旋转 90 度。所以：

```
Point startPoint = new Point(1, 1);
Point endPoint = (Rotate90(forward))(startPoint);
//desired output: Point(1, 0) 
```

**编辑 1：** 我不会`Translate`一个一个地应用函数。我需要的是`Translate`在一个点上应用一些转换的函数（已经旋转或反射的函数）。

**我需要什么：**如何编写一个`Rotate90`which 如果我通过它`(p=>new Point(p.X+1, p.y))`，它会返回一个与`(p=>new Point(p.X, p.Y-1))`.

**编辑2：**一些例子：

```
Translate forward =         p => new Point(p.X + 1, p.Y);
Translate backward =        p => new Point(p.X - 1, p.Y);
Translate downward =        p => new Point(p.X, p.Y - 1);
Translate runningForward =  p => new Point(p.X + 5, p.Y);

Transform Rotate90Cw = ??

Point samplePoint = new Point(1, 1);

Point p1 = (Rotate90Cw(forward))(samplePoint);          //must be (1,0)
Point p2 = (Rotate90Cw(backward))(samplePoint);         //must be (1,2)
Point p3 = (Rotate90Cw(downward))(samplePoint);         //must be (0,1)
Point p4 = (Rotate90Cw(runningForward))(samplePoint);   //must be (1,-4)
Point p4 = (Rotate90Cw(Rotate90Cw(forward)))(samplePoint);   //must be (0,1) 
```

> 我需要一个**可以** `Rotate90Cw`应用于任何`Translate`函数并返回正确函数的`Translate`函数。所以应用在一个点上的效果和应用`Rotate90Cw(forward)`在一个点上的效果是一样`downward`的。等等...

**我不会`Rotate`为每种情况创建一个单独的函数（例如 forwardRotated、downRotated 和...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:08:00.873

目前尚不清楚您是否真的需要两个代表。似乎您真的想要*一个*代表从`Point`to的任意转换`Point`- 然后您可以组合转换。例如：

```
delegate Point Transform(Point input);

private static Transform Compose(Transform first, Transform second)
{
    return p => second(first(p));
}

Transform forward = p => new Point(p.X + 1, p.Y);
Transform rotate90 = p => new Point(p.Y, -p.X);
Transform forwardThenRotate = Compose(forward, rotate); 
```

编辑：看起来你真正想要的是一个转换（进行转换），如下所示：

*   将原始变换应用于 (0, 0)
*   旋转结果
*   将输入点翻译那么多

我们可以很容易地做到这一点：

```
Transform forward = p => new Point(p.X + 1, p.Y);
Transform rotate90 = p => new Point(-p.Y, p.X);
Point forwardRotatedPoint = rotate90(forward(new Point(0, 0));

Transform forwardRotated = p => new Point(forwardRotatedPoint.X + p.X,
                                          forwardRotatedPoint.Y + p.Y); 
```

正如我在其他地方所说，你可能*实际上*想要一个`Vector`类型，它有`X`和`Y`组件......然后你可以有几个可组合的概念：

*   从向量创建转换（点到点）
*   旋转一个向量以创建另一个向量
*   组合变换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:12:14.110

我以这种方式解决它（已编辑）：

```
Translate Rotate90Cw(Translate moveFunction)
{
    return Rotate(moveFunction, Math.PI / 2.0);
}

Translate Rotate(Translate moveFunction, double angle)
{
    Point tempPoint = moveFunction(new Point(0, 0));
    double sin = Math.Sin(angle);
    double cos = Math.Cos(angle);
    return p => new Point(p.X + tempPoint.X * cos + tempPoint.Y * sin,
                           p.Y - tempPoint.X * sin + tempPoint.Y * cos);
} 
```

检查它是否工作：

```
Rotate90Cw(Rotate90Cw(runningForward))(new Point(1, 1)); //output: (-4,0.9999999)
Rotate90Cw(runningForward)(new Point(1, 1));             //output: (1,-4)
Rotate90Cw(backward)(new Point(1, 1));                   //output: (1,2)
Rotate90Cw(downward)(new Point(1, 1));                   //output: (0,1) 
```

# javascript - SharePoint 2013 API jQuery.Ajax 访问被拒绝

> ID：15685163
> 
> 赞同：0
> 
> 时间：2013-03-28T14:59:50.927
> 
> 标签：javascript, jquery, ajax, sharepoint-2013

我正在尝试一些简单的事情 - 从 SharePoint 2013 列表中检索列表信息。但是，在处理 jQuery Ajax 时，我的访问被拒绝。我尝试使用 headers 对象和 beforeSend 函数设置标题，但没有成功。这是我的 jQuery.Ajax：

```
$.ajax({
        headers: { // also tried with Authentication
            "Authorization": someBasicCryptedCred,
            "Accept": "application/json; odata=verbose"
        },
        url: "http://spSiteCollection/_api/web/lists/getbytitle('MyList')/items",
        type: "GET",
        success: SuccessProcess,
        error: ErrorProcess
    }); 
```

我的应用程序是一个简单的 MVC 移动应用程序

我正在关注这些文档（以及 MSDN 中的其他一些文档，但不能发布超过 2 个链接）：

[http://msdn.microsoft.com/en-us/library/jj870858.aspx](http://msdn.microsoft.com/en-us/library/jj870858.aspx) [http://msdn.microsoft.com/en-us/library/jj163228.aspx](http://msdn.microsoft.com/en-us/library/jj163228.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-11T09:30:25.870

也许您需要表单摘要值，您可以使用 jQuery 获得：

```
$('#__REQUESTDIGEST').val(); 
```

您可以通过 API REST 调用和 /_api/ContextInfo 获取它，并使用除表单摘要值之外的其他许多字段检索 JSON 对象。

```
http://<site url>/_api/contextinfo 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T13:11:03.493

基本上你在做什么，看起来你正在从你的应用程序网站访问跨站点集合数据，所以请通过**“AppManifest.xml”**文件为你的应用程序提供适当的权限。就是这样，你就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:51:05.050

我在通话中看不到 Form Digest 值，这可能是原因吗？

X-RequestDigest = 表单摘要值

# android - Android Google Maps 在 Zoom 上调整大小标记

> ID：15685164
> 
> 赞同：2
> 
> 时间：2013-03-28T15:00:09.380
> 
> 标签：android, google-maps-markers

我需要在一个很小的区域内显示大约 30 个标记。

当用户更改缩放比例时，有没有办法调整 Google Maps API V2 标记的大小？

还是我应该只使用较小的图像？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:03:53.653

没有`outOfTheBox`更改标记图标的选项。您将不得不收听缩放变化：

[如何在 Google 地图中收听用户生成的缩放？](https://stackoverflow.com/questions/10097647/how-to-listen-for-user-generated-zoom-in-google-maps)

并使用较小的图标图像删除旧标记并在其位置设置新标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:13:14.637

如果你想在缩放时做一些事情，你可以创建一个扩展原始 MapView 的自定义 Mapview，并覆盖 dispatchDraw(Canvas canvas)。

通过添加一个小监听器，您可以在回调中做任何您想做的事情。像这样的东西；

```
 @Override
protected void dispatchDraw(final Canvas canvas) {
    super.dispatchDraw(canvas);
    if (getZoomLevel() != lastZoomLevel) {
        if (listener != null) {
            listener.onZoom(lastZoomLevel, getZoomLevel());
        }
        lastZoomLevel = getZoomLevel();
    }         
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T15:50:07.257

我使用**extends**和**fitBounds**函数并获取位置 (LatLng) 来设置缩放以映射项目

```
//JSP

<c:forEach var="lastPosition" items="${lastPositionResultDto}" >        
    <input type="hidden" id="mapPointsPosition_${lastPosition.id}" value="${lastPosition.latitude}_${lastPosition.longitude}" >
</c:forEach>

//JAVASCRIPT

map = new google.maps.Map(document.getElementById('map-canvas-position'), mapOptions);    

var arrPointMaps = $("[id^=mapPointsPosition_]");
var limits = new google.maps.LatLngBounds(0,0);

for(var j=0; j<arrPointMaps.length;  j++){

    var stringPointMap = arrPointMaps[j].getAttribute("value").split("_");
    var latAlertPoint = stringPointMap[0];
    var lonAlertPoint = stringPointMap[1];                

    var limitPosition = new google.maps.LatLng(parseFloat(latAlertPoint), parseFloat(lonAlertPoint));
    limits.extend(limitPosition);

}   

map.fitBounds(limits); 

} 
```

# c# - 过滤和拆分位置

> ID：15685166
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:00:12.040
> 
> 标签：c#, ios, linq, xamarin

所以我在创建一些共享代码时坚持我的项目。我有一个包含一些字符串的列表。我想过滤它，然后在位置上拆分过滤后的字符串。我已经在objective-c中完成了这个，但我不知道如何在c#中做到这一点。

Objective-c 是这样的：

```
NSPredicate *findStringWithStatusPlanned = [NSPredicate predicateWithFormat:@"SELF contains[c] 'TOMTOM101'"];
        NSArray *filteredArrayOnStatusPlanned = [trackTraceContentFiltered filteredArrayUsingPredicate:findStringWithStatusPlanned];
        NSLog(@"%@",filteredArrayOnStatusPlanned);

        plannedStatusCompleet = [filteredArrayOnStatusPlanned lastObject];
            janssenRef = [plannedStatusCompleet substringWithRange:NSMakeRange(0, 8)];
            clientRef = [plannedStatusCompleet substringWithRange:NSMakeRange(9, 15)];
            dateReceived = [plannedStatusCompleet substringWithRange:NSMakeRange(25, 10)];
            tomTomCode = [plannedStatusCompleet substringWithRange:NSMakeRange(36, 9)];
            orderText = [plannedStatusCompleet substringWithRange:NSMakeRange(47, 59)];
            podFileName = [plannedStatusCompleet substringWithRange:NSMakeRange(113, 19)];
            Plannedidentifier = [plannedStatusCompleet substringWithRange:NSMakeRange(62, 1)];
            NSLog(@"Planid:%@",Plannedidentifier);

        NSArray *cutContentPlannedStatus = [NSArray arrayWithObjects:janssenRef,clientRef,dateReceived,tomTomCode,orderText,podFileName,Plannedidentifier,nil];
        [[NSUserDefaults standardUserDefaults] setObject:cutContentPlannedStatus forKey:@"plannedData"]; 
```

我试图这样拆分：

```
foreach (string s in TrackTraceDataByLine) {
                string[] splitted = s.Split (new char[] { ' ' });
                if (s.Length >= referenceNumber.Length) {
                    if (referenceNumber == splitted [1]) {
                        dataFilteredOnRef.Add (s);
                    }
                }
            } 
```

我可以很快意识到我必须按位置而不是按空间拆分。这是因为某些部分（如参考编号）可能包含空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:03:17.463

你的意思是这样吗？

```
var janssenRef = sourceString.Substring(0, 8);
var clientRef = sourceString.Substring(9, 15);
var dateReceived = sourceString.Substring(25, 10);
...
var array = new string[] { ... }; 
```

要以 Linq 样式执行此操作，您可以使用锯齿状数组：

```
var pos = new int[][] {
    new int[] { 0, 8 }, 
    new int[] { 9, 15 }, 
    new int[] { 25, 10 }, ... };
var array = pos.Select(p => sourceString.Substring(p[0], p[1]))
               .ToArray(); 
```

或多维数组：

```
var pos = new int[,] { { 0, 8 }, { 9, 15 }, { 25, 10 }, ... };
var array = Enumerable.Range(0, pos.GetLength(0))
                      .Select(i => inputString.Substring(pos[i,0], pos[i,1]))
                      .ToArray(); 
```

# javascript - 对于 PDF 的 JavaScript API，如何获取有关“魔术”代码的信息？

> ID：15685167
> 
> 赞同：0
> 
> 时间：2013-03-28T15:00:13.340
> 
> 标签：javascript, api, pdf

有一个关于 saptechnical 的教程包含这段代码。我在文档中找不到有关此类代码的任何信息，并且代码建议不起作用。

我来自 Java 背景，所以像这样的事情让我害怕。

这显然获取了`PRICE`当前页面上所有字段的值并将它们汇总。

```
var fields = xfa.layout.pageContent(xfa.layout.page(this)-1, "field", 0);
var total = 0;
for (var i = 0; i <= fields.length-1; i++) {
    if (fields.item(i).name == "PRICE") {
        total = total + fields.item(i).rawValue;
    }
}
this.rawValue = total; 
```

那么如何找到有关完整 API 的信息呢？（因为例如我不知道如何做到这一点，除非使用这段“神奇”的代码。）

还有比这更多的文档吗？[http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)

为什么代码建议不起作用？（哦，我也不是一个 Javascript 开发人员）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:09:42.183

这段代码对我来说并不神奇。

```
var fields = xfa.layout.pageContent(xfa.layout.page(this)-1, "field", 0); 
```

这将获得一个包含页面布局中所有字段的数组。

```
for (var i=0; i <= fields.length-1; i++) { 
```

这是对所有字段索引的 for 循环。

```
if (fields.item(i).name == "PRICE") {
    total = total + fields.item(i).rawValue;
} 
```

当字段名称为“PRICE”时，将其值添加到总数中。

```
 this.rawValue = total; 
```

将此字段的值设置为计算的总计

# silverlight - 银光围绕其中心的旋转线

> ID：15685170
> 
> 赞同：1
> 
> 时间：2013-03-28T15:00:20.870
> 
> 标签：silverlight, rotation

我通过代码在我的 Silverlight 5 应用程序中创建了一个线对象，现在我想围绕它的中心点旋转这条线，但行为很奇怪，所以这条线围绕屏幕的左上角旋转，这是我的代码：

```
 RotateTransform rotate = new RotateTransform();
                rotate.Angle = myArrowAngle[i] + off_x;
                myLines[i].RenderTransformOrigin = new Point(0.5d, 0.5d);
                myLines[i].RenderTransform = rotate; 
```

出了什么问题？我设置了我的线对象的 RenderTransferOrigin，但没有运气，我应该在旋转变换之后还是之前移动我的对象？这个轮换是怎么做的？在模型空间还是在世界空间？似乎它正在世界空间中旋转，因为我的线围绕画布的 (0,0) 点而不是其中心旋转

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:34:19.170

当您将变换原点设置为 0.5,0.5 时，您将其设置为相对于线的“边界框”，它不一定与线本身的中心重合。

请参见以下示例：

```
<Canvas>
    <Line X1="0" Y1="50" X2="100" Y2="50"
          StrokeThickness="4" Stroke="Red" RenderTransformOrigin="0.5,0.5">
        <!--<Line.RenderTransform>
            <RotateTransform Angle="45" CenterX="0.5" CenterY="0.5"  />
        </Line.RenderTransform>-->
    </Line>
</Canvas> 
```

![画布中的线条](../Images/46e9c71c810296ca5769f4632b263bf6.png)

如果您取消注释转换，它将从该框中小圆圈的位置应用。

这能解释你正在经历的事情吗？

# python - Python sql查询在列中插入数据

> ID：15685174
> 
> 赞同：0
> 
> 时间：2013-03-28T15:00:34.133
> 
> 标签：python, sql

我对SQL不太熟悉。我有一个超过 100 列的表。将字典中的数据插入表的相应列（键名和列名相同）的最佳方法是什么？

例子：

我的 SQL 表

列 1 列 2 列 3 列 4 列 5

我从字典中获得的数据：

第一个数据集

第 2 列：苹果，第 4 列：树

第二个数据集

Column1：香蕉，Column2：蓝色，Column3：绿色，Column4：房屋，Column5：红色

因此，如果字典的键与表的列名相同，则应插入数据。我知道如何为单个查询执行此操作，但是如何为大量查询执行此操作（聪明）？

谢谢！

编辑：

我会在一个层面上做什么和一些澄清：

1) 创建一个包含所有 120 列但没有任何数据的 SQL 表。2）我有大约 500 个单词文件，其中包含应该进入数据库的部分数据（120 列中的大约 5-10 个）。3）所以我必须阅读它们，解析它们，如果字典中数据的键与 120 个列名中的任何一个匹配，则应该插入该值。3) 单模：

```
if key == 'Column1': 
```

sql = INSERT INTO Column1 valuexy

这对于 500 个文件和 120 列来说当然是非常愚蠢的。我希望这更清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:14:46.300

假设您有以下字典：

```
query_data = {
    'col1': 56,
    'col2': 100,
    'col3': 'lol'
} 
```

您的 sql 查询可以构造如下：

```
sql = 'INSERT INTO table_name ({fields}) VALUES ({values})' 
```

现在您必须构造字段字符串

```
fields = query_data.keys()
fields_string = ', '.join(fields) 
```

并且对于您使用已创建的字段列表执行类似操作的值。（如果您的字典是 OrderedDict，这可以通过另一种方式完成）。

```
values_string = ', '.join(['"{0}"'.format(query_data[key]) for key in fields]) 
```

最后，您可以编写字符串。

```
composed_sql = sql.format(fields=fields_string, values=values_string) 
```

这是一种非常粗略的方法，但如果您是该主题的新手，则非常容易理解。大多数框架都允许使用更精细的方法来实现这一点。特别是关于 SQL 注入。

打印它，玩弄，理解概念，随着时间的推移，你可能会使用其他方式。

**编辑**

更简洁的方法是：

```
sql = 'INSERT INTO table_name ({fields}) VALUES ({values})'
fields = ', '.join(query_data.keys())
values = ', '.join(['"{0}"'.format(value) for value in query_data.values()])
composed_sql = sql.format(fields=fields, values=values) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:21:19.710

`join()`您可以使用 和 连接字典的键和值`map()`：

```
d = {'Column1':'banana', 'Column2':'blue', 'Column3':'green', 'Column4':'house', 'Column5':'red'}
columns = ', '.join(map(str, d.keys()))
values = ', '.join(map(repr, d.values()))
cursor.execute("INSER INTO table ({}) VALUES ({})".format(columns, values)) 
```

# jquery - $.get 似乎在 IE 7,8 &9 中失败了

> ID：15685180
> 
> 赞同：0
> 
> 时间：2013-03-28T15:00:50.760
> 
> 标签：jquery, ajax, internet-explorer, get

出于某种原因，所有 IE 浏览器都没有像在其他浏览器中那样正确执行 $get，在其他浏览器中，它会进行调用并通过我在函数（数据）中的条件语句。有人看到可能出了什么问题吗？谢谢！没有错误发生，只是没有通过它。

HTML

```
 <a href="layer_register.html" class="game-reg-button"> </a> 
```

查询

```
 $(document).on('click', '.game-reg-button', function(e){
            e.preventDefault();
            var href = $(this).attr('href');
            emailaddress = $('#game-email').val();

var getstate ="";
var data;

     $.get('promo_getstate.php', {
            email: emailaddress,
            country: 'DE',
            lang: lang,
            source: '1304_Spring_dly'
        }, function (data) {

            getstate = data;

        if( !isValidEmailAddress( emailaddress ) ) {
          $('p.start.error').fadeIn(300); 

.....................................................

}); /*end .GET */
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:05:12.540

IE 以缓存着称。确保您没有收到缓存的结果。

在您的 url 末尾附加一个唯一的时间戳，然后它不会是缓存的结果。你可以使用 jQuery[`now`](http://api.jquery.com/jQuery.now/)函数。

```
 $.get('promo_getstate.php?'+$.now)(, {
    // your code goes here
 }); 
```

# c - 如何获取浮点数的符号、尾数和指数

> ID：15685181
> 
> 赞同：65
> 
> 时间：2013-03-28T15:00:54.057
> 
> 标签：c, floating-point, emulation

我有一个程序，它在两个处理器上运行，其中一个不支持浮点。因此，我需要在该处理器中使用定点执行浮点计算。为此，我将使用浮点仿真库。

我需要首先在支持浮点的处理器上提取浮点数的符号、尾数和指数。所以，我的问题是如何获得单精度浮点数的符号、尾数和指数。

按照该图的格式，

![在此处输入图像描述](../Images/82e75b0082bb163ff1d8c1c26b0e1621.png) 这就是我到目前为止所做的，但除了符号，尾数和指数都不正确。我想，我错过了一些东西。

```
void getSME( int& s, int& m, int& e, float number )
{
    unsigned int* ptr = (unsigned int*)&number;

    s = *ptr >> 31;
    e = *ptr & 0x7f800000;
    e >>= 23;
    m = *ptr & 0x007fffff;
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-28T15:06:37.663

我认为最好使用工会来做演员，这更清楚。

```
#include <stdio.h>

typedef union {
  float f;
  struct {
    unsigned int mantisa : 23;
    unsigned int exponent : 8;
    unsigned int sign : 1;
  } parts;
} float_cast;

int main(void) {
  float_cast d1 = { .f = 0.15625 };
  printf("sign = %x\n", d1.parts.sign);
  printf("exponent = %x\n", d1.parts.exponent);
  printf("mantisa = %x\n", d1.parts.mantisa);
} 
```

基于 [http://en.wikipedia.org/wiki/Single_precision的示例](http://en.wikipedia.org/wiki/Single_precision)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-10-26T16:12:47.350

我的建议是坚持规则 0，而不是重做标准库已经做的事情，如果这已经足够了。查看 math.h（标准 C++ 中的 cmath）和函数 frexp、freexpf、freexpl，它们在有效数和指数部分破坏浮点值（double、float 或 long double）。要从有效数字中提取符号，您可以使用符号位，也可以在 math.h / cmath 或 copysign（仅限 C++11）中使用。一些语义稍有不同的替代方案是 modf 和 ilogb/scalbn，在 C++11 中可用；[http://en.cppreference.com/w/cpp/numeric/math/logb](http://en.cppreference.com/w/cpp/numeric/math/logb)比较它们，但我没有在文档中找到所有这些函数在 +/-inf 和 NaN 下的行为。最后，如果您真的想使用位掩码（例如，您迫切需要知道确切的位，并且您的程序可能有不同的 NaN 具有不同的表示形式，并且您不信任上述函数），至少让一切都与平台无关通过使用 float.h/cfloat 中的宏。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-28T15:05:58.650

找出直接支持浮点的 CPU 上使用的浮点数的格式，并将其分解为这些部分。最常见的格式是[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)。

或者，您可以使用一些特殊功能 (`double frexp(double value, int *exp);`和`double ldexp(double x, int exp);`)获取这些部分，如[本答案](https://stackoverflow.com/a/14955046/968261)所示。

[另一种选择](https://stackoverflow.com/a/15197157/968261)是使用`%a`with `printf()`。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-28T15:07:09.937

你在`&`ing 错误的位。我想你想要：

```
s = *ptr >> 31;
e = *ptr & 0x7f800000;
e >>= 23;
m = *ptr & 0x007fffff; 
```

请记住，当您`&`将未设置的位清零时。因此，在这种情况下，您希望在获得指数时将符号位归零，并在获得尾数时将符号位和指数归零。

请注意，面具直接来自您的图片。因此，指数掩码将如下所示：

> 0 11111111 00000000000000000000000

尾数掩码看起来像：

> 0 00000000 11111111111111111111111

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-17T22:01:18.573

在 Linux 包 glibc-headers 上提供`#include <ieee754.h>`带有浮点类型定义的标头，例如：

```
union ieee754_double
  {
    double d;

    /* This is the IEEE 754 double-precision format.  */
    struct
      {
#if __BYTE_ORDER == __BIG_ENDIAN
    unsigned int negative:1;
    unsigned int exponent:11;
    /* Together these comprise the mantissa.  */
    unsigned int mantissa0:20;
    unsigned int mantissa1:32;
#endif              /* Big endian.  */
#if __BYTE_ORDER == __LITTLE_ENDIAN
# if    __FLOAT_WORD_ORDER == __BIG_ENDIAN
    unsigned int mantissa0:20;
    unsigned int exponent:11;
    unsigned int negative:1;
    unsigned int mantissa1:32;
# else
    /* Together these comprise the mantissa.  */
    unsigned int mantissa1:32;
    unsigned int mantissa0:20;
    unsigned int exponent:11;
    unsigned int negative:1;
# endif
#endif              /* Little endian.  */
      } ieee;

    /* This format makes it easier to see if a NaN is a signalling NaN.  */
    struct
      {
#if __BYTE_ORDER == __BIG_ENDIAN
    unsigned int negative:1;
    unsigned int exponent:11;
    unsigned int quiet_nan:1;
    /* Together these comprise the mantissa.  */
    unsigned int mantissa0:19;
    unsigned int mantissa1:32;
#else
# if    __FLOAT_WORD_ORDER == __BIG_ENDIAN
    unsigned int mantissa0:19;
    unsigned int quiet_nan:1;
    unsigned int exponent:11;
    unsigned int negative:1;
    unsigned int mantissa1:32;
# else
    /* Together these comprise the mantissa.  */
    unsigned int mantissa1:32;
    unsigned int mantissa0:19;
    unsigned int quiet_nan:1;
    unsigned int exponent:11;
    unsigned int negative:1;
# endif
#endif
      } ieee_nan;
  };

#define IEEE754_DOUBLE_BIAS 0x3ff /* Added to exponent.  */ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-22T22:15:43.337

1.  不要制作做多种事情的函数。
2.  不要掩饰然后转移；移位然后掩码。
3.  不要不必要地改变值，因为它很慢，缓存破坏并且容易出错。
4.  不要使用幻数。

```
/* NaNs, infinities, denormals unhandled */
/* assumes sizeof(float) == 4 and uses ieee754 binary32 format */
/* assumes two's-complement machine */
/* C99 */
#include <stdint.h>

#define SIGN(f) (((f) <= -0.0) ? 1 : 0)

#define AS_U32(f) (*(const uint32_t*)&(f))
#define FLOAT_EXPONENT_WIDTH 8
#define FLOAT_MANTISSA_WIDTH 23
#define FLOAT_BIAS ((1<<(FLOAT_EXPONENT_WIDTH-1))-1) /* 2^(e-1)-1 */
#define MASK(width)  ((1<<(width))-1) /* 2^w - 1 */
#define FLOAT_IMPLICIT_MANTISSA_BIT (1<<FLOAT_MANTISSA_WIDTH)

/* correct exponent with bias removed */
int float_exponent(float f) {
  return (int)((AS_U32(f) >> FLOAT_MANTISSA_WIDTH) & MASK(FLOAT_EXPONENT_WIDTH)) - FLOAT_BIAS;
}

/* of non-zero, normal floats only */
int float_mantissa(float f) {
  return (int)(AS_U32(f) & MASK(FLOAT_MANTISSA_BITS)) | FLOAT_IMPLICIT_MANTISSA_BIT;
}

/* Hacker's Delight book is your friend. */ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-29T05:11:23.547

[`IEEE_754_types.h`](https://github.com/akharrou/C-CPP_Reference_Book/blob/master/Part%2001:%20Basic%20Facilities/Chapter%2001%20-%20Types%20and%20Declarations/IEEE_754_types.h)有关要提取的联合类型，请参见此标头： `float`、`double`和`long double`,（处理字节序）。这是一个摘录：

```
/*
** - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
**  Single Precision (float)  --  Standard IEEE 754 Floating-point Specification
*/

# define IEEE_754_FLOAT_MANTISSA_BITS (23)
# define IEEE_754_FLOAT_EXPONENT_BITS (8)
# define IEEE_754_FLOAT_SIGN_BITS     (1)

.
.
.

# if (IS_BIG_ENDIAN == 1)
    typedef union {
        float value;
        struct {
            __int8_t   sign     : IEEE_754_FLOAT_SIGN_BITS;
            __int8_t   exponent : IEEE_754_FLOAT_EXPONENT_BITS;
            __uint32_t mantissa : IEEE_754_FLOAT_MANTISSA_BITS;
        };
    } IEEE_754_float;
# else
    typedef union {
        float value;
        struct {
            __uint32_t mantissa : IEEE_754_FLOAT_MANTISSA_BITS;
            __int8_t   exponent : IEEE_754_FLOAT_EXPONENT_BITS;
            __int8_t   sign     : IEEE_754_FLOAT_SIGN_BITS;
        };
    } IEEE_754_float;
# endif 
```

并查看[`dtoa_base.c`](https://www.google.com/url?q=https://github.com/akharrou/C-CPP_Reference_Book/blob/master/Part%252001:%2520Basic%2520Facilities/Chapter%252001%2520-%2520Types%2520and%2520Declarations/floats_to_string.c&sa=D&ust=1574865309005000)如何将`double`值转换为字符串形式的演示。

此外，请查看[C/CPP 参考书的](https://docs.google.com/document/d/e/2PACX-1vRIl_pkXRghf1LzFryOn5VfNycluCfgnOdLlFQku01IWMGAb5m2aM065mpGJ7_I-PePVwtyGrxaWCi4/pub)[1.2.1.1.4.2 - Floating-Point Type Memory Layout](https://docs.google.com/document/d/e/2PACX-1vRIl_pkXRghf1LzFryOn5VfNycluCfgnOdLlFQku01IWMGAb5m2aM065mpGJ7_I-PePVwtyGrxaWCi4/pub#kix.j4odh7x9ap4e)部分，它非常简单地解释了所有浮点类型的内存表示/布局以及如何解码它们（带插图）遵循实际的 IEEE 754 浮点规范。

它还具有指向非常好的资源的链接，可以更深入地解释。

# google-apps-script - Google Apps 脚本返回错误的月份（减去 1）

> ID：15685190
> 
> 赞同：1
> 
> 时间：2013-03-28T15:01:29.390
> 
> 标签：google-apps-script

使用 GAS 中的这个简单脚本：

```
function testingStuff(){
var date = new Date();
var yr = date.getYear();
var dt = date.getDate();
var mt = date.getMonth();

Logger.log("year: " +yr);
Logger.log("date: " +dt);
Logger.log("month: " +mt);
} 
```

我得到这个作为我的回应：

```
year: 2013
date: 28
month: 2 
```

今天是 2013 年 3 月 28 日。我不知道是什么导致了这个错误。其他人得到这个吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:06:36.713

不，你没有做错任何事。 `Date.getMonth()`是基于 0 的，而不是基于 1 的。换句话说，它返回 0 到 11 而不是 1 到 12 范围内的值。

# list - 在连续注释块之间保持 doxygen 中的列表缩进

> ID：15685191
> 
> 赞同：2
> 
> 时间：2013-03-28T15:01:35.233
> 
> 标签：list, doxygen, indentation

我想在我的代码中使用 Doxygen 注释来创建项目符号列表，以补充生成文档中的函数描述。例如，以下片段代码：

```
/**
 * Function x
 */
void function (void) {
/// List:
/// - comment A
;
;
/// + comment B
;
;
/// * comment C

} 
```

应该产生这样一个列表：

```
List:
- A
  - B
    - C 
```

不幸的是，Doxygen 似乎没有保持从一个注释块到另一个相同函数的缩进级别。有解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-29T19:59:33.297

在过去几个小时的研究之后，我得出结论，跨非连续 doxygen 评论的缩进列表是不可能的。

我能够轻松地让缩进列表在块注释中工作：

```
/**
-# Item 1
    -# Subitem 1
    -# Subitem 2
-# Item 2
*/ 
```

切换到单行注释，它仍然有效：

```
/// -# Item 1
///     -# Subitem 1
///     -# Subitem 2
/// -# Item 2 
```

当我在单行注释之间添加代码时，doxygen 停止缩进子项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-15T09:22:02.993

实际上可以使用 HTML 格式来做到这一点

```
//! <ul><li> Entering a condition:<ul>
if (xx)
{
    //! <li> something
    C=A+B;

    //! <li> something else
    D="lol";
}
//! </ul></ul> 
```

# hibernate - 修改代码以避免hibernate4弃用警告的最佳方法

> ID：15685192
> 
> 赞同：2
> 
> 时间：2013-03-28T15:01:35.283
> 
> 标签：hibernate

从hibernate3升级到hibernate4后，旧项目代码抛出警告信息：

```
org.hibernate.hql.internal.ast.HqlSqlWalker [HqlSqlWalker.java:929] [DEPRECATION] Encountered positional parameter near line 1, column 56\.  Positional parameter are considered deprecated; use named parameters or JPA-style positional parameters instead. 
```

答案可以从以下链接中找到：

1.  [如何修复带有弃用警告的 Hibernate 查询？](https://stackoverflow.com/questions/10754211/how-to-fix-a-hibernate-query-with-deprecation-warnings)
2.  [https://hibernate.atlassian.net/browse/HHH-7023](https://hibernate.atlassian.net/browse/HHH-7023)

但我想知道修改以下代码以避免此警告的最佳方法是什么？

```
StringBuffer hql = new StringBuffer("from Record where 1=1");
List<Object> params = new ArrayList<Object>();
if (subject!= null && subject.trim().length() > 0) {
    hql.append(" and subjectlike ?");
    params.add("%" + subject.trim() + "%");
}
if (startDate != null) {
    hql.append(" and createTime> ?");
    params.add(startDate);
}
if (endDate != null) {
    hql.append(" and createTime< ?");
    params.add(endDate);
}
Query query = getSession().createQuery(hql);
if (params.length > 0) {
   for (int i = 0, length = params.length; i < length; i++)
        query.setParameter(i, params.get(i));
}
List result = query.list(); 
```

* * *

==>update20130401，通过在每个参数标记“？”后添加订单号来将 HQL 更改为 JPQL 样式：

```
//first, fomat HQL to JPQL style
private String fomatHQL(CharSequence queryString) {     
            StringBuffer buffer = new StringBuffer(queryString);
            int start = 0;
            int order = 0;
            while ((start = buffer.indexOf("?", start + 1)) > 0) {
                buffer.insert(start + 1, order);
                order++;
            }
            return buffer.toString();

    }
// second, create Query
// third, set parameters
protected void setParameterList(Query query, Object[] params) {
        if (params != null && params.length > 0) {
            for (int i = 0, length = params.length; i < length; i++)
                query.setParameter(i + "", params[i]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:22:39.053

```
 StringBuilder hql = new StringBuilder("from Record where 1=1");
    Query query = getSession().createQuery(hql);
    if (subject!= null && subject.trim().length() > 0) {
        hql.append(" and subjectlike :subject");
        query.setParameter("subject", "%" + subject.trim() + "%");
    }
    if (startDate != null) {
        hql.append(" and createTime> :startDate");
        query.setParameter("startDate", startDate);
    }
    if (endDate != null) {
        hql.append(" and createTime< :endDate");
        query.setParameter("endDate",endDate);
    }
    List result = query.list(); 
```

首选`StringBuilder`，`StringBuffer`因为最后一个是同步的，因此性能较低，除非您处于并发上下文中（此处不是这种情况）

# knockout.js - 带有knockoutjs嵌套foreach的微风：找不到第三级数据

> ID：15685195
> 
> 赞同：-2
> 
> 时间：2013-03-28T15:01:46.203
> 
> 标签：knockout.js, breeze

我正在使用 John Papa 的优秀 SPA 示例，使用 Breeze 和 Knockout 来显示数据图。它大部分都在工作，但我被困在一个似乎无法在 foreach 循环中列出的数组中。

这是我的数据图： ![数据图](../Images/6be95a94130cf04e34d774be399d0827.png)

我对费用数组很好。

这是淘汰赛标记：

```
 <div id="memberships" class="span9">
      <div class="span8">Memberships</div>
      <div class="span9 table-bordered" data-bind="foreach: memberships()">
        <span class="span5" data-bind="text: organization().name()"></span> <span class="span3" data-bind="text: '    Status:' + status().description()"></span>
        <div class="label-important span2" data-bind="text: 'Dues paid:'"></div>
        <div class="span5" data-bind="text: 'dues count:' + fees().length,  foreach: fees()">
          <div data-bind="text: 'Method:' + payMethod()"></div>
          <div data-bind="text: receivedOn()"></div>
          <div data-bind="text: membershipYear()"></div>
        </div>
      </div>
    </div> 
```

我可以看到organization().name() 和status().description()，但是fees() 的长度为零。

我在淘汰赛 foreach 循环中查看了此类问题的其他答案，问题似乎在于数组是否是 observableArray。然而，在这种情况下，Breeze 正在设置它，所以我无法判断我做错了什么或者 Breeze 是。

这是微风的EntityQuery：

```
 var getPhysicianDetails = function (physicianObservable) {
    var id = physicianObservable().id();
    var query = EntityQuery.from('Physicians')
      .expand(
        "ContactInfo.Emails.Scope, " +
        "ContactInfo.Phones.Scope, " +
        "ContactInfo.Addresses.Scope," +
        "PhysicianSpecialties.Specialty, " +
        "PhysicianNotes, " +
        "Memberships.Organization, " +
        "Memberships.Status," +
        "Memberships.Fees.PayNotes," +
        "IncentivePrograms.Notes," + 
        "PhysInOrgs.Organization, " +
        "IncentivePrograms.IncentiveProgram.Payer," +
        "PhysicianPayers.Payer"
        )
      .where("id", "==", id); 
```

当我执行 getEntityType("Fee") 时，我得到了这个（来自 Chrome Dev 的 Watch Expressions）：

![在此处输入图像描述](../Images/5bf5fb7cb1c32e21a96b48ebe0b031d2.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T14:09:42.157

在同一元素上使用 text 和 foreach 绑定应该会出现绑定错误。*（多个绑定（文本和 foreach）试图控制同一个元素的后代绑定。您不能在同一个元素上同时使用这些绑定。；）*

你可以改变这个：

```
<div class="span5" data-bind="text: 'dues count:' + fees().length,  foreach: fees()">
      <div data-bind="text: 'Method:' + payMethod()"></div>
      <div data-bind="text: receivedOn()"></div>
      <div data-bind="text: membershipYear()"></div>
</div> 
```

至：

```
<div class="span5">
    <div data-bind="text: 'dues count:' + fees().length"></div>

     <!-- ko foreach: fees -->
         <div data-bind="text: 'Method:' + payMethod()"></div>
         <div data-bind="text: receivedOn()"></div>
         <div data-bind="text: membershipYear()"></div>
     <!-- /ko -->
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T20:10:41.923

您的客户端查询是什么样的？

我猜你错过了一个扩展“条款”来访问“费用”导航属性。

# java - 无法使用 maven-assembly-plugin 设置类路径

> ID：15685196
> 
> 赞同：12
> 
> 时间：2013-03-28T15:01:50.180
> 
> 标签：java, maven-2, classpath, pom.xml, executable-jar

我正在创建控制台应用程序。我想在`jar`文件夹中的文件之外有配置文件，`conf`并希望将此文件夹注册为我的应用程序的类路径。

我运行`mvn assembly:single`command ，得到一个 jar 文件，但是当我尝试运行这个 JAR 时`java -jar MyApplication.jar`，它无法读取配置文件。

我有这个片段在我的`pom.xml`

```
<build>
    <finalName>MyApplication</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.7</version>  
            <configuration>
                <projectNameTemplate>
                    [artifactId]-[version]
                </projectNameTemplate>
                <wtpmanifest>true</wtpmanifest>
                <wtpapplicationxml>true</wtpapplicationxml>
                <wtpversion>2.0</wtpversion>
                <manifest>
                    ${basedir}/src/main/resources/META-INF/MANIFEST.MF
                </manifest>
            </configuration>

        </plugin>

        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <appendAssemblyId>false</appendAssemblyId>
                <archive>
                    <manifest>
                        <mainClass>com.my.test.App</mainClass>
                    </manifest>
                    <manifestEntries>
                        <Class-Path>.conf/</Class-Path>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T06:27:17.007

这是我的错误，我不得不把

```
<Class-Path>./conf/</Class-Path> 
```

并不是

```
<Class-Path>.conf/</Class-Path> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:16:12.353

我通常不使用程序集插件在 MANIFEST 中生成类路径条目，而是使用具有此配置的 maven-jar-plugin：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.1</version>
    <configuration>
      <archive>
        <index>true</index>
        <manifest>
          <addClasspath>true</addClasspath>
          <addExtensions>false</addExtensions>
          <mainClass>com.my.test.App</mainClass>
        </manifest>
      </archive>
    </configuration>
  </plugin> 
```

我只使用程序集插件将依赖项（包括传递的依赖项）复制到我的构建目录中，并创建分发存档。你也可以使用依赖插件来做到这一点。如果要将依赖项复制到分发树的子目录中，请使用 maven-jar-plugin 配置中的 classpathPrefix 来匹配您的程序集描述符依赖项目标。

看待

# excel - 使用公式过滤行

> ID：15685199
> 
> 赞同：0
> 
> 时间：2013-03-28T15:01:56.270
> 
> 标签：excel

我正在尝试按名称过滤行，然后过滤`COUNTIF`代表以“强烈同意/同意..etc”方式回答的问题的列，以计算每个问题的每个类别中有多少被选中。

示例数据：

```
name | question 1| question 2 ...
=============================
Bob  | Agree     | Disagree
Bob  | Strongly A| Agree
Red  | Disagree  | Strongly Agree
Blue | Agree     | Agree 
```

我想从上面得到这些数据：

```
Bob     | question 1 | question 2 ...
==================================
Agree   |  1         |  1
Disagree|  1         |  1
... 
```

（对于那些好奇的人：这是一项关于特定人的匿名调查。）

到目前为止，我对excel没有太多经验我想出了这个： `=COUNTIF(IF(Sheet1!A2:A5="Bob",Sheet1!B2:B5, ""), Sheet2!A2)`

这给了我一个`#VALUE!`. 我不完全确定如何使范围成为具有匹配名称值的相关问题的行。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:17:14.783

您正在尝试使用 2 个条件求和（名称列和问题列必须等于某些值）。出于这个原因，我认为它不`countif()`适合你。

想到2个选项：

1.  数据透视表。转到插入-> 数据透视表并在新选项卡中创建一个。将您的姓名列拖放到报告过滤器中，将 q1 拖放到行标签中，并将姓名计数作为您的值。因此，无需任何代码，您就可以一次总结一个问题。您还可以准确获取目标表，但首先您必须将表转换为 3 列：名称、问题# 和答案。

2.  `Sumproduct()`功能。这是一个[例子](http://sulprobil.com/html/sumproduct.html)，但你可以谷歌搜索更多。使用此功能，您可以一次计算多个条件的出现次数。使用您的示例，这将返回表中名称为 Bob 且 Question1 为 Agree 的行数：
    `=SUMPRODUCT((A2:A5="BOB")*(B2:B5="Agree"))`

# jsp - JSP - 从数据库中减去值

> ID：15685200
> 
> 赞同：0
> 
> 时间：2013-03-28T15:02:01.170
> 
> 标签：jsp, servlets, jstl

我正在尝试在 JSP 和 MySQL 中创建一个订单系统，我希望有人可以帮助我。

我希望能够在下订单时降低产品的库存水平。（即购买了 9* 16gb USB 闪存驱动器。在下订单时，SQL 查询检索当前级别 50 并减去订购数量 9 并使用新级别 41 更新数据库）。

我已经尝试过这个 JSP，但我无法让它工作。

```
<sql:query var="stockresult" scope="request" dataSource="jdbc/project">
  SELECT *
  FROM stocklevels
  WHERE productID = $param.productID
</sql:query>

$newstocklevel = stockresult - $orderqty;

<sql:update var="newstock" scope="request" dataSource="jdbc/project">
  UPDATE stocklevels
  SET stock=$newstocklevel
  WHERE productID = $param.productID
</sql:update> 
```

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:52:34.470

这可能是您的解决方案，但强烈建议不要直接在 SQL 语句中插入请求参数。

```
<sql:query var="stockresult" scope="request" dataSource="jdbc/project">
   SELECT stock <!-- select the current stock -->
   FROM stocklevels
   WHERE productID = $param.productID
</sql:query>

<!-- calculate the new value from the first row of the query result -->
<c:set var"newstocklevel" value="${stockresult.rows[0].stock - orderqty}"/> 

<sql:update var="newstock" scope="request" dataSource="jdbc/project">
   UPDATE stocklevels
   SET stock=$newstocklevel
   WHERE productID = $param.productID
</sql:query> 
```

# xna - 我可以将 windows xna 手机游戏放在 IOS 设备上吗？

> ID：15685202
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:02:12.347
> 
> 标签：xna

我正在制作一个 xna windows phone 游戏。我试图用模拟器测试它。我不能，因为它在游戏中有动作感应。我没有windows phone 但ipod touch。我可以把它放在我的 ipod touch 上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:05:06.523

不是没有一些工作，很可能。但是基于[MonoTouch](http://xamarin.com/monotouch)有一个名为[MonoGame](http://monogame.codeplex.com)的产品，它声称是针对其他平台和设备的 XNA 实现。您的里程可能会有所不同，但至少它可以让您访问一个开发人员社区，他们正在尝试做与您完全相同的事情。

# html - 带参数的 XSL 超链接

> ID：15685204
> 
> 赞同：0
> 
> 时间：2013-03-28T15:02:19.030
> 
> 标签：html, xml, xslt

我正在处理一个菜单，在我的 XSL 中创建超链接时遇到了一些麻烦。我想要做的是从 xsl 获取 ITEMNMBR 的值，当单击链接时，重定向到该页面，在查询字符串中传递 ITEMNMBR。

我列出了我认为最终会起作用的内容，但后来意识到我不知道如何获取在 href 值中使用的 ITEMNMBR 的值。

有没有人这样做并且可以提供帮助？我是 XML 的新手，所以我敢肯定这是一个初学者的问题。如果有更好的方法可以做到这一点，或者如果有人可以指出我甚至是一个很好的教程，我将非常感激。

```
<xsl:for-each select="MenuItem">    <!-- 3rd level menu names --> 
  <li><a href="~/Pages/orders/OrderEntry.aspx?ITEMNMBR="><xsl:value-of select="ITEMNMBR"/></a></li>  <!-- Inventory items -->
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:09:46.390

您可以在属性中使用**[属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)**：

```
<xsl:for-each select="MenuItem">    <!-- 3rd level menu names --> 
  <li><a href="~/Pages/orders/OrderEntry.aspx?ITEMNMBR={ITEMNMBR}"><xsl:value-of select="ITEMNMBR"/></a></li>
</xsl:for-each> 
```

# seo - 谷歌标签

> ID：15685205
> 
> 赞同：24
> 
> 时间：2013-03-28T15:02:21.223
> 
> 标签：seo, googlebot, yandex, noindex

我想告诉谷歌不要索引页面的某些部分。在 Yandex（俄罗斯 SE）中有一个非常有用的标签，叫做`<noindex>`. 谷歌如何做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-04-10T00:15:52.667

根据 Wikipedia ¹，*一些*蜘蛛遵循一些规则：

```
<!--googleoff: all-->
This should not be indexed by Google. Though its main spider, Googlebot,
might ignore that hint.
<!--googleon: all-->

<div class="robots-nocontent">Yahoo bots won't index this.</div>

<noindex>Yandex bots ignore this text.</noindex>
<!--noindex-->They will ignore this, too.<!--/noindex--> 
```

不幸的是，他们似乎无法就单一标准达成一致——据我所知，没有什么可以阻止*所有*蜘蛛......

该`googleoff:`评论似乎支持不同的选项，但我不确定哪里有完整的列表。至少有：

*   all：完全忽略该块
*   索引：内容不进入谷歌的索引
*   anchor：链接的锚文本不会与目标页面相关联
*   片段：文本不会用于为搜索结果创建片段

还要注意（至少对于谷歌）这只会影响*搜索索引*，而不是页面排名等。此外，正如[斯蒂芬奥斯特米勒](https://stackoverflow.com/users/1145388/stephen-ostermiller)在下面的评论中正确指出的那样，`googleon`仅`googleoff` [适用于谷歌搜索设备，对](https://webmasters.stackexchange.com/questions/54735/can-you-use-googleon-and-googleoff-comments-to-prevent-googlebot-from-indexing-p)不幸的是，[普通的 Googlebot 。](https://webmasters.stackexchange.com/questions/54735/can-you-use-googleon-and-googleoff-comments-to-prevent-googlebot-from-indexing-p)

还有一篇关于 Yahoo 第²部分的文章（以及一篇描述 Yandex 也获得`<noindex>`⁶荣誉的文章）。在这`googleoff:`部分，也可以看到[这个答案](https://stackoverflow.com/a/11336887/2533433)，以及我从中获取大部分相关信息的文章。³

* * *

此外，[Google 网站管理员工具](http://www.google.com/webmasters/)建议对特定链接使用`rel=nofollow`属性⁴（例如广告或指向机器人无法访问/无用的页面的链接，例如登录/注册）。这意味着，Google 机器人应该尊重[HTML a rel 属性——尽管这主要与页面排名有关，而不是与搜索索引本身有关。](http://www.w3schools.com/TAgs/att_a_rel.asp)不幸的是，似乎没有`rel=noindex`^(5,7)。我也不确定这个属性是否也可以用于其他元素（例如`<DIV REL="noindex">`）；但除非爬虫尊重“noindex”，否则这也是没有意义的。

* * *

**更多参考资料：**

*   [如何对网页的某些部分进行 Noindex 索引？](http://www.ortwin-oberhauser.com/how-to-noindex-parts-of-a-web-page/)
*   [从页面部分中排除爬虫](https://www.spiderline.com/help/idx/0/014/article/Excluding_crawler_from_sections_of_pages..html)（Spiderline 爬虫；您会看到，其他爬虫可能使用其他专有标记（另请参见[AddSearch](http://www.addsearch.com/support/including-excluding-content/)爬虫）。我希望他们只是制定`REL="noindex"`一个标准，而不是与任何 HTML 标记一起使用，例如 DIV/SPAN/P/一种！）
*   [通过反转字符串来防止 Google 索引 div 的内容](https://stackoverflow.com/q/11320407/2533433)
*   [防止搜索引擎索引页面上不相关内容的方法](https://stackoverflow.com/q/1973738/2533433)

* * *

¹ [维基百科：Noindex](http://en.wikipedia.org/wiki/Noindex)
² [您网页的哪些部分可能会被搜索引擎忽略？](http://www.seobythesea.com/2008/07/which-sections-of-your-web-pages-might-search-engines-ignore/)
³ [告诉 Google 不要索引您页面的某些部分](http://perishablepress.com/tell-google-to-not-index-certain-parts-of-your-page/)
⁴ [对特定链接使用 rel="nofollow"](https://support.google.com/webmasters/answer/96569?hl=en)
⁵ [使用 是一个好主意`<a href=“http://name.com” rel=“noindex, nofollow”&gt;name</a>`吗？](https://stackoverflow.com/q/13085931/2533433)
⁶ [使用 HTML 标签 — Yandex.Help。站长](http://help.yandex.com/webmaster/controlling-robot/html.xml)
⁷ [现有的 REL 值](http://microformats.org/wiki/existing-rel-values)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-30T11:56:25.280

您可以通过将这些部分放入被 robots.txt 阻止的 iframe 中来阻止 Google 看到页面的某些部分。

机器人.txt

```
Disallow: /iframes/ 
```

索引.html

```
This text is crawlable, but now you'll see 
text that search engines can't see:
<iframe src="/iframes/hidden.html" width="100%" height=300 scrolling=no> 
```

/iframes/hidden.html

```
Search engines cannot see this text. 
```

您可以使用 AJAX 加载隐藏文件的内容，而不是使用 iframe。这是一个使用 jquery ajax 执行此操作的示例：

```
his text is crawlable, but now you'll see 
text that search engines can't see:
<div id="hidden"></div>
<script>
    $.get(
        "/iframes/hidden.html",
        function(data){$('#hidden').html(data)},
    );
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T15:03:31.993

不，[谷歌不支持`<noindex>`标签](http://productforums.google.com/forum/#!topic/webmasters/5JhcEDhDXvw)。几乎没有人这样做。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-03-30T16:59:33.133

在根级别创建一个 robots.txt 文件并插入如下内容：

阻止谷歌：

```
User-agent: Googlebot
Disallow: /myDisallowedDir1/
Disallow: /myDisallowedPage.html
Disallow: /myDisallowedDir2/ 
```

阻止所有机器人：

```
User-agent: *
Disallow: /myDisallowedDir1/
Disallow: /myDisallowedPage.html
Disallow: /myDisallowedDir2/ 
```

一个方便的 robots.txt 生成器：

[http://www.mcanerin.com/EN/search-engine/robots-txt.asp](http://www.mcanerin.com/EN/search-engine/robots-txt.asp)

# c# - 如何将略有不同的团队名称匹配到一个团队中

> ID：15685206
> 
> 赞同：2
> 
> 时间：2013-03-28T15:02:21.453
> 
> 标签：c#, implementation

我正在使用 VS2010 Express 和新手进行编程。

我正在从不同的网站提取投注赔率并制作记录。

但是，他们为同一个团队使用不同的名称，这是跨站点匹配团队的唯一方法。

例如，Man United、Man Utd、Manchester United、Manu 是同一支球队，但在不同的网站上使用。

我相信这不是一个罕见的问题，应该有一些标准的方法或对象类型来解决它。

如果有，请告诉我。

在这个阶段，我决定做一个列表作为数据库

```
List<teamdata> teamTable = new List<teamdata>();

public class teamdata
{
private long teamId;
private List<string> teamName; // Names like Man United, Man Utd... are added
...
} 
```

我需要通过表格搜索每个名称（一些快速搜索算法），直到可以分配团队 ID。

我知道这是最糟糕的实现。请告诉我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:13:56.860

您可以使用 List 和 class teamdata 简化您的设计`Dictionary<long,HashSet<string>> teams`- 其中 key 是团队 ID，value 是一组备用名称，找到团队的问题是调用（假设你的 `

```
Dictionary<long,HashSet<string>> teams = new Dictionary<long,HashSet<string>>();
... fill data
string queryName = "Man Utd"`) 

var teamOrNull = teams.Where(p=>p.Value.Contains(queryName)).FirstOrDefault() 
if(teamOrNull != null)
   long foundID = teamOrNull.Key; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:13:56.377

这种问题可以用模糊逻辑来解决（[http://en.wikipedia.org/wiki/Fuzzy_logic](http://en.wikipedia.org/wiki/Fuzzy_logic)）。如果您使用 SQL Server，SOUNDEX 函数可能会对您有所帮助。

# android - Android：AsyncTask ProgressDialog 错误的令牌窗口？

> ID：15685208
> 
> 赞同：0
> 
> 时间：2013-03-28T15:02:26.193
> 
> 标签：android

嗨，当我尝试显示我的进度对话框时，我收到一个错误的令牌窗口错误

下面是我在执行 AsyncTask 的活动的 onCreate 中的处理程序

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        progress = new ProgressDialog(getApplicationContext());
        progress.setTitle(R.string.progress_title);
        mHandler = new Handler() {

            @Override
            public void handleMessage(Message msg) {
                Log.d("", "Handling callback");
                super.handleMessage(msg);
                position = (Position)msg.obj;

                Toast.makeText(getApplicationContext(), position.getLattitude() + " " + position.getLongetude(),
                    Toast.LENGTH_LONG).show();

                userLocation.stopSearchLocation();

                FindRestaurants findRestaurants = new FindRestaurants();
                findRestaurants.execute();
            }

        };
} 
```

我的异步任务

```
class FindRestaurants extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {
            // get users current location

            progress.show(); //fails here

            Log.d("", "onPreExecute");
            if (position == null) {

                position = userLocation.getLastKnownLocation();
                Log.d("", "position = " + position.getLattitude() + " " + position.getLongetude());
            }

            // find upper and lower boundaries
            Log.d("", "position outside of condition= " + position.getLattitude() + " " + position.getLongetude());

            super.onPreExecute();
        } 
```

完整的堆栈跟踪

```
03-28 14:40:02.314: E/AndroidRuntime(13658): FATAL EXCEPTION: main
03-28 14:40:02.314: E/AndroidRuntime(13658): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.view.ViewRoot.setView(ViewRoot.java:532)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.app.Dialog.show(Dialog.java:241)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.app.ProgressDialog.show(ProgressDialog.java:107)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.app.ProgressDialog.show(ProgressDialog.java:90)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.app.ProgressDialog.show(ProgressDialog.java:85)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at com.jr.haliotest.MainActivity$FindRestaurants.onPreExecute(MainActivity.java:61)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.os.AsyncTask.execute(AsyncTask.java:391)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at com.jr.haliotest.MainActivity$1.handleMessage(MainActivity.java:138)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.os.Looper.loop(Looper.java:130)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at android.app.ActivityThread.main(ActivityThread.java:3835)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at java.lang.reflect.Method.invoke(Method.java:507)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
03-28 14:40:02.314: E/AndroidRuntime(13658):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:06:06.493

使用当前活动上下文来显示`ProgressDialog`而不是`getApplicationContext()`：

```
progress = new ProgressDialog(Your_Current_Activity.this); 
```

# jquery - 快速而肮脏的通知 JQuery

> ID：15685210
> 
> 赞同：0
> 
> 时间：2013-03-28T15:02:37.130
> 
> 标签：jquery, notifications

我有一个通知功能，它只是添加一个`<div class="notification"></div>`到`#notification-area`.

我需要在单个通知出现 5 秒后让通知淡出。如果我可以访问刚刚添加的 div，我可以做到这一点。

可能`$('.notification:last-child')`选择它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:05:56.063

你可以这样做：

```
var notification = $('<div class="notification"></div>');

$('#notification-area').append(notification);

setTimeout(function(){
    notification.fadeOut();
    notification.remove();
},5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:05:41.323

```
$('.notification').last(); 
```

将选择最后一个`.notification`元素。

见[http://api.jquery.com/last/](http://api.jquery.com/last/)

# php - 从 mysql 中提取的下拉菜单

> ID：15685211
> 
> 赞同：1
> 
> 时间：2013-03-28T15:02:40.287
> 
> 标签：php, forms, post

我有一个 MySQL 数据库，它有 4 个表：客户、产品、订单和 order_details。我正在尝试获取具有下拉列表的表单（html 或 php）：1-客户：从客户表中提取 2-项目：从产品表中提取 3-类别：从产品表中提取

然后将信息发布到 order & order_details。我得到了从视图中提取数据的表单，但我需要它来发布数据。\

这是代码：

```
<?php
include ('connect.php');    
mysql_select_db("db") or die(mysql_error());

$sql = "SELECT DISTINCT Company FROM `values` LIMIT 0, 30 ";

$result=mysql_query($sql);

echo "<select Company='Company'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['Company'] ."'>" . $row['Company'] ."</option>";
}
echo "</select>";

$sql = "SELECT DISTINCT Item, Type FROM `values` LIMIT 0, 30 ";

$result=mysql_query($sql);

echo "<select Item='Item'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['Item'] ."'>" . $row['Item'] ."</option>";
}
echo "</select>";

$sql = "SELECT DISTINCT Type FROM `values` LIMIT 0, 30 ";

$result=mysql_query($sql);

echo "<select Type='Type'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['Type'] ."'>" . $row['Type'] ."</option>";
}
echo "</select>";

?>
<input type="Submit"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:08:48.017

```
<label for="company_id">Company:</label>
<select name="company_id" id="company_id">
    <option value="0">-- Select Company--</option>
    <?php 
        while ($row = mysql_fetch_array($result)) {
            echo "<option value='{$row[company_id']}'";
            if ($errors && $_POST["company_id"] == $row[company_id']) {
                echo 'selected="selected"';
            } 
            echo ">{$row['company_name']}</option>";
        } 
    ?>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:06:06.340

在您的问题中，您没有提到表格的结构。让您的公司表喜欢（或制作）

```
company table
+--------+-----------+-------------------+
| id     |  company  | some other field  |
+--------+-----------+-------------------+
| 1      | abc       | xxxx              |
+--------+-----------+-------------------+
| 2      | def       | xxxx              |
+--------+-----------+-------------------+ 
```

//id应该是主键

```
your product table (each product is made by some company)
+--------+-----------+-------------------+
| id     |  product  | company_id        |
+--------+-----------+-------------------+
| 1      | p1        | 2                 |
+--------+-----------+-------------------+
| 2      | p2        | 1                 |
+--------+-----------+-------------------+ 
```

现在你可以像

```
//code to show list of companies

 $sql = "SELECT `id`, `company`  FROM  `company` LIMIT 0, 30 ";

$result=mysql_query($sql);

echo "<select Company='Company'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['id'] ."'>" . $row['Company'] ."</option>";
}
echo "</select>"; 
```

`Edit:`

太好了，现在您的下拉列表显示了公司列表。但我认为你错过了`<form action='' method = "POST">`你的问题或者可能在你的文件中。制作一个功能齐全的表格。

```
<?php
    //change according to your settings 
    mysql_connect('localhost','root','');
    mysql_select_db("st") or die(mysql_error());

?>
    <form action="st2.php" method = "POST">
        <label for="company_id">Compay</label>
        <select name="company_id" id="company_id">
            <?php 
                $sql = "SELECT `id`, `company`  FROM  `company` LIMIT 0, 30 ";
                $result=mysql_query($sql);
                while ($row = mysql_fetch_array($result)) {
                    echo "<option value='" . $row['id'] ."'>" . $row['company'] ."</option>";
                }
            ?>
        </select>

        <label for="product_id">Product</label>
        <select name="product_id" id="product_id">
            <?php 
                $sql = "SELECT `id`, `product`  FROM  `product` LIMIT 0, 30 ";
                $result=mysql_query($sql);
                while ($row = mysql_fetch_array($result)) {
                    echo "<option value='" . $row['id'] ."'>" . $row['product'] ."</option>";
                }
            ?>
        </select>

        <label for="category_id">Category</label>
        <select name="category_id" id="category_id">
            <?php 
                $sql = "SELECT `id`, `category`  FROM  `category` LIMIT 0, 30 ";
                $result=mysql_query($sql);
                while ($row = mysql_fetch_array($result)) {
                    echo "<option value='" . $row['id'] ."'>" . $row['category'] ."</option>";
                }
            ?>
        </select>
        <input type="submit" name = "Submit"/>
    </form> 
```

让您的订单表具有这样的结构

```
+--------+--------------+-------------+--------------+
| id     |  company_id  | product_id  | category_id  |
+--------+--------------+-------------+--------------+
| 1      |    1         | 2           |  8           |
+--------+--------------+-------------+--------------+ 
```

这里 id 是主键，company_id = id 在公司表中，product_id 和 category_id 也是他们的表的 id，对于该表来说是唯一的

=> 创建一个文件 save.php 并在此处处理表单发送的数据

```
<?php
    //change according to your settings 
    mysql_connect('localhost','root','');
    mysql_select_db("st") or die(mysql_error());

if($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['Submit'])) {
    var_dump($_POST);
    $company_id = $_POST['company_id'];
    $product_id = $_POST['product_id'];
    $category_id = $_POST['category_id'];

    //Note: sanitize and validate data before saving in database 

    $sql = "INSERT INTO orders VALUES('', $company_id, $product_id, $category_id)";

    $result = mysql_query($sql);
    if($result) {
        echo "data saved";
    } else {
        echo "error";
    }

}?> 
```

//阅读更多关于 html 中的输入字段、php 的 PDO 类、数据清理和验证以及 sql 查询。

**问题：更新：**
当我运行你的代码时。我对你的一些领域感到困惑。你想用这个表格做什么。我了解
`1`客户可以添加订单。但是为什么会有一个下拉菜单来选择客户，而实际上您正在显示带有客户标签的公司。

`2`一些输入字段 -
**订单**-> 用户提供订单名称或 order_id 如果 order_id 则它对 db 不利。bcoz 用户可以两次制作相同的订单 ID。
**日期**-> 提交的日期、完成日期或当前日期，如果是当前日期，那么您应该在后端完成。
**复选框**->为什么复选框没有
**空白并发货**->它们是什么
**税**->用户对产品征税，它可以（可能是我错了）
**价格**->用户给出每个产品的价格，好的（可能是我错误）
**总计**-> 用户给出总计，或者它应该计算为价格 * 数量 + 总税。那么就不需要输入框了

在实施什么信息之前更清楚。你想从用户那里得到它是否安全。或者您为用户生成它。因为表单评论用户到 db 这可能会导致严重的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:23:36.380

这是我的表格：

```
<?php

//change according to your settings 

 include ('connect.php'); 

mysql_select_db("hachemal_compuworld") or die(mysql_error());

?>

<form action="Add_order.php" method = "POST">

&nbsp;<label for="Customer">Customer<br />
</label>

    &nbsp;&nbsp;<select name="Cust_id" id="Cust_id" style="width: 126px">

        <?php 

            $sql = "SELECT `Cust_id`, `Company`  FROM  `customer` LIMIT 0, 30 ";

            $result=mysql_query($sql);

            while ($row = mysql_fetch_array($result)) {

                echo "<option value='" . $row['Cust_id'] ."'>" . $row['Company'] ."</option>";

            }

        ?>

</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 

Order:&nbsp; <input name="Order_id" type="text" style="width: 52px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Date:&nbsp;&nbsp;
<input type="text" id="txtDate" onclick="fnPopUpCalendar(txtDate,txtDate,'mm/dd/yyyy')" style="width: 72px" name="Date"/>&nbsp;
<span class="style2">..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SELECT name="Status" style="width: 78px; height: 22px">

                <OPTION value="Open" selected="">Open</OPTION>

                <OPTION value="In Progress">In Progress</OPTION>

                <OPTION value="Paid">Paid</OPTION>

                <OPTION value="Past Due">Past Due</OPTION>

                <option value="Cancelled">Cancelled</option>

                <option value="Closed">Closed</option>

            </SELECT>...............</span>&nbsp;<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

    <br>

<TABLE id="dataTable0" width="350px" cellspacing="1" class="style5">

    <TR>

        <TD style="height: 32px" class="style1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</TD>

        <TD style="height: 32px" class="style1">&nbsp;</TD>

        <TD style="height: 32px" class="style1">&nbsp;</TD>

        <TD style="height: 32px" class="style1"><span class="style2">.. .</span>Qty<span class="style2">...</span></TD>

        <TD style="height: 32px" class="style1">

            <span class="style2">.......</span>Product<span class="style2">........</span></TD>

        <TD style="height: 32px" class="style1">

            <span class="style2">....</span>Category<span class="style2">....&nbsp;

            </span>

        </TD>

        <TD style="height: 32px" class="style1">

            <span class="style2"></span>blank<span class="style2"></span>&nbsp;

        </TD>

        <TD style="height: 32px" class="style1">

            <span class="style2">.</span>Price<span class="style2">.</span></TD>

        <TD style="height: 32px" class="style1">

            <span class="style2">...</span>Ship<span class="style2">..</span></TD>

        <TD style="height: 32px" class="style1">

            <span class="style2">..</span>Tax<span class="style2">...</span></TD>

        <TD style="height: 32px" class="style1">

                            <span class="style2">..</span>Total<span class="style2">...

</TABLE>

<TABLE id="dataTable" width="350px" cellspacing="1" class="style5">

    <TR><TD style="height: 32px"><INPUT type="checkbox" name="chk"/></TD>

                    <TD style="height: 32px"></TD>

        <TD style="height: 32px"></TD>

        <TD style="height: 32px">

        <INPUT type="text" name="Qty" style="width: 37px"/></TD>

        <TD style="height: 32px">

       <select name="Product" id="Product" style="width: 87px">

        <?php 

            $sql = "SELECT `Product`, `Product`  FROM  `Products` LIMIT 0, 30 ";

            $result=mysql_query($sql);

            while ($row = mysql_fetch_array($result)) {

                echo "<option value='" . $row['Product'] ."'>" . $row['Product'] ."</option>";

            }

        ?>

    </select>

<TD style="height: 32px">

<select name="Category" id="Category" style="width: 89px">

        <?php 

            $sql = "SELECT `Category`, `Category`  FROM  `Products` LIMIT 0, 30 ";

            $result=mysql_query($sql);

            while ($row = mysql_fetch_array($result)) {

                echo "<option value='" . $row['Category'] ."'>" . $row['Category'] ."</option>";

            }

        ?>

    </select>

</TD>

        </TD style="height: 32px">

    </TD>

        <TD style="height: 32px">

            <input name="Text2" type="text" style="width: 37px"></TD>

        <TD style="height: 32px">

            <input name="Price" type="text" style="width: 39px"></TD>

        <TD style="height: 32px">

            <input name="Ship" type="text" style="width: 42px"></TD>

        <TD style="height: 32px">

            <input name="Tax" type="text" style="width: 39px"></TD>

        </TD style="height: 32px">

            &nbsp;</TD>

        <TD style="height: 32px">

            <input name="Total" type="text" style="width: 50px"></TD>

    </TR>

</TABLE>

<br>

    <input type="submit" name = "Submit"/>

</form>

<br>

</html> 
```

# java - Java EE：org.postgresql.util.PSQLException：列不存在，但确实存在

> ID：15685216
> 
> 赞同：0
> 
> 时间：2013-03-28T15:03:02.723
> 
> 标签：java, jakarta-ee, glassfish

尝试浏览到生成的 JSF 页面时，出现以下错误。当使用 REST (Jax-RS) 操作或从数据库中检索信息时，也会发生这个确切的错误：

> 内部异常：org.postgresql.util.PSQLException：错误：列“transkey”不存在

但是，此列确实存在，当执行从 pgAdmin 触发错误的确切查询时，会返回一个正常的表（SELECT translationid AS a1, lang AS a2, transkey AS a3, transval AS a4 FROM projectx.projectx.translation）

完整的堆栈跟踪：

```
WARNING: Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: column "transkey" does not exist
  Position: 41
Error Code: 0
Call: SELECT translationid AS a1, lang AS a2, transkey AS a3, transval AS a4 FROM projectx.projectx.translation LIMIT ? OFFSET ?
    bind => [2 parameters bound]
Query: ReadAllQuery(referenceClass=Translation sql="SELECT translationid AS a1, lang AS a2, transkey AS a3, transval AS a4 FROM projectx.projectx.translation LIMIT ? OFFSET ?")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:646)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2611)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2570)
    at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:420)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:742)
    at jsf.AbstractFacade.findRange(AbstractFacade.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at sun.proxy.$Proxy131.findRange(Unknown Source)
    at jsf.__EJB31_Generated__TranslationFacade__Intf____Bean__.findRange(Unknown Source)
    at jsf.TranslationController$1.createPageDataModel(TranslationController.java:57)
    at jsf.TranslationController.getItems(TranslationController.java:157)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.parser.AstEqual.getValue(AstEqual.java:58)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.UIComponentBase.isRendered(UIComponentBase.java:413)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1751)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:679) 
```

从数据库生成的实体类：

```
@Entity
@Table(name = "translation", catalog = "projectx", schema = "projectx")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Translation.findAll", query = "SELECT t FROM Translation t"),
    @NamedQuery(name = "Translation.findByTranslationid", query = "SELECT t FROM Translation t WHERE t.translationid = :translationid"),
    @NamedQuery(name = "Translation.findByLang", query = "SELECT t FROM Translation t WHERE t.lang = :lang"),
    @NamedQuery(name = "Translation.findByKey", query = "SELECT t FROM Translation t WHERE t.transkey = :transkey"),
    @NamedQuery(name = "Translation.findByVal", query = "SELECT t FROM Translation t WHERE t.transval = :transval")})
public class Translation implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "translationid")
    private Integer translationid;
    @Size(max = 3)
    @Column(name = "lang")
    private String lang;
    @Size(max = 1000)
    @Column(name = "transkey")
    private String transkey;
    @Size(max = 1000)
    @Column(name = "transval")
    private String transval;

    public Translation() {
    }

    public Translation(Integer translationid) {
        this.translationid = translationid;
    }

    public Integer getTranslationid() {
        return translationid;
    }

    public void setTranslationid(Integer translationid) {
        this.translationid = translationid;
    }

    public String getLang() {
        return lang;
    }

    public void setLang(String lang) {
        this.lang = lang;
    }

    public String getKey() {
        return transkey;
    }

    public void setKey(String transkey) {
        this.transkey = transkey;
    }

    public String getVal() {
        return transval;
    }

    public void setVal(String transval) {
        this.transval = transval;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (translationid != null ? translationid.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Translation)) {
            return false;
        }
        Translation other = (Translation) object;
        if ((this.translationid == null && other.translationid != null) || (this.translationid != null && !this.translationid.equals(other.translationid))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "model.Translation[ translationid=" + translationid + " ]";
    }

} 
```

非常感谢您的回答。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:52:44.267

只是一个猜测：检查数据库中是否真的有 transkey 列。我看到你有一个名为 getKey()/setKey() 的 transkey 的 getter/setter，也许是那个被误导的 db 模式生成器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T13:31:30.040

一个问题：您是使用“transKey”还是“transkey”作为 dababase 字段的名称？大写字母在我的 JPA 应用程序中生成了错误。

# c# - 将数据从 JavaScript 客户端传输到 C# 服务器

> ID：15685217
> 
> 赞同：2
> 
> 时间：2013-03-28T15:03:08.323
> 
> 标签：c#, javascript, asp.net

在我的虚拟商店站点中，我需要将产品数据（单个或阵列）发送到服务器。在我使用 ASPX 和 runat="server" 的情况下，我正在组织 OnClick 事件和委托。在 JavaScript 中可能吗？有没有可行的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:09:53.860

我会为此使用 webmethod 并从 javascript 调用 webmethod。这是一个很好的教程如何做到这一点。

[http://www.xdevsoftware.com/blog/post/Call-WebMethod-from-Javascript-in-ASPNET.aspx](http://www.xdevsoftware.com/blog/post/Call-WebMethod-from-Javascript-in-ASPNET.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:21:40.207

使用 JS 将您的值/值分配给页面上的隐藏字段 - 然后在后面的代码中访问它并完成您的工作。

# wordpress - 如何在WordPress的根目录中的页面上应用主题

> ID：15685220
> 
> 赞同：0
> 
> 时间：2013-03-28T15:03:16.427
> 
> 标签：wordpress, wordpress-theming

我的自定义页面位于`http://localhost/project/custom.php`.

我想在其上应用默认主题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:18:30.793

我明白了你的问题按照这些步骤

1）在 wordpress/themes/your_theme/customcode.php 中创建文件并将以下代码放入该文件中

```
<?php
/*
Template Name: Custom Code
*/
?>
<?php get_header(); ?>

//put your custom code

<?php get_footer(); ?> 
```

2）现在用wordpress的wp-admin用customcode制作页面，然后选择Template Custom Code

3）点击查看后更新该更新查看该页面链接

4）您使用小部件的最后一步从操作中提供链接（您从 3 点获得）

现在做，你不会失去设计

# java - selectBooleanCheckbox 更新 a4j 重新渲染中的属性

> ID：15685226
> 
> 赞同：0
> 
> 时间：2013-03-28T15:03:29.663
> 
> 标签：java, jsf, jsf-1.2

我在 JSF 1.2 上，想知道我看到的行为。我的 JSF 页面使用 a4j:jsFunction 启动进程，然后使用 a4j:poll 获取进度百分比。这个过程建立了一个对象列表，每个对象又包含一个列表。当 a4j:jsFunction 调用完成时，将重新呈现 a4j:outputPanel。此面板包含一个 selectBooleanCheckbox，它绑定到第二个列表中对象的布尔值：

```
<a4j:jsFunction name="validate" action="#{MigrationWizardValidateForm.validate}" reRender="validationResult, done"/>
...
<a4j:outputPanel id="validationResult">
    <ui:repeat value="#{MigrationWizardValidateForm.validationErrors}" var="validationError">
        <ui:repeat value="#{validationError.assignmentVisualisations}" var="assignmentVisualisation">
            <h:selectBooleanCheckbox value="#{assignmentVisualisation.assignment.mainLocation}"
... 
```

我看到的是当进程加载对象时 mainLocation 为真。当外部重复获得它的列表时，这是真的。但是当 selectBooleanCheckbox 呈现时，它会以 false 调用 setMainLocation。

为什么这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:53:55.430

相同形式的 a4j:poll 和 a4j:jsFunction 导致问题。将民意调查以单独的形式显示进度可以解决它。

# jquery - JQuery滑块功能不起作用

> ID：15685233
> 
> 赞同：0
> 
> 时间：2013-03-28T15:03:48.463
> 
> 标签：jquery

我是 JQuery 新手，遇到了一些问题。在单击我想看到的主导航后，我想让我的子导航栏滑动打开。但我似乎无法让它工作。

有人可以帮忙吗？

下面的代码：

HTML

```
<div id="navigation_bar">
    <ul>                        
        <li><a href="index.html">Home</a></li>                        
        <li><a href="">Beauty Treatments</a></li>                                                
        <li><a href="">Holistic Treatments</a></li>
        <li><a href="">Pamper Parties</a></li>
        <li><a href="">After care</a></li>
        <li><a href="">Gallery</a></li>
        <li><a href="">Testermonials</a></li>
        <li><a href="">Special offers</a></li>
        <li><a href="">Contact</a></li>
    </ul>
</div>

<div id="sub_navigation">

</div> 
```

CSS

```
#navigation_bar ul {
    line-style: none;
    list-style-type: none;
    margin: 0;
    padding: 0;
}

#navigation_bar li {
    float:left;
    margin-left:0;
    padding: 0;
}

#navigation_bar li a:link, #navigation_bar li a:visited {
    font-family:Arial, Helvetica, sans-serif;
    display:block;
    padding: 0 20px 0 20px;
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#222;
    font-weight:bold;
    text-decoration:none;
    line-height:36px;
    border:none;
}

#navigation_bar li a:hover, #navigation_bar li a:active {
    border:none;
    color:#ffffff;
    background-image:url(Images/mouse_over_background.gif);
}

#navigation_bar li a.current {
    background-image:url(Images/mouse_over_background.gif); 
    border:none;
    color:#0065b0;
}

#navigation_bar li a.current:hover {
    cursor:default;
    color:#0065b0;
}

#sub_navigation{
    background-image:url(Images/subnav_background.png);
    background-repeat:no-repeat;
    position:relative;
    margin-top:-15px;
    width:1140px;
    height:50px;
    z-index:1;
}

#subnav_text {
    font-family:arial;
    font-size:14px;
    line-height:25px;
    float:left;
    padding-left:15px;
    text-decoration:none;
} 
```

jQuery

```
// JavaScript Document

$(document).ready(function(){
    $("#navigation_bar li").click(function(){
        $("#sub_navigation").slideDown("slow");
    });
}); 
```

在文档的开头，我引用了最新的 JQuery 库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:23:20.857

尝试这些调整（从它开始，停止触发锚标签）。

```
$(document).ready(function () {
    $("#sub_navigation").slideUp();
    $("#navigation_bar li").click(function (event) {

        $("#sub_navigation").slideDown("slow");
        event.preventDefault();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:26:50.357

将此添加到您的 CSS 中：

```
#sub_navigation {
    display: none; //The slideDown effect depends on the element being hidden.
} 
```

并在你的 JS 中改变它：

```
$(document).ready(function(){
    $("#navigation_bar li a").on('click', function(e){
        //We don't want the links to go elsewhere. 
        //Without this we wouldn't see the slide.
        e.preventDefault(); 
        $("#sub_navigation").slideDown("slow");
    });
}); 
```

这是一个供你玩的小提琴：http: [//jsfiddle.net/vm6NB/](http://jsfiddle.net/vm6NB/)

**更新：**

```
#sub_navigation {
    position: absolute;
    top: 120px;
} 
```

新小提琴：http: [//jsfiddle.net/vm6NB/4/](http://jsfiddle.net/vm6NB/4/)

# sql - sql 查询以列出其他列（没有 aggr() 和 groupby ）

> ID：15685235
> 
> 赞同：1
> 
> 时间：2013-03-28T15:03:50.057
> 
> 标签：sql, sql-server, tsql, sql-server-2005

今天早些时候，我遇到了这个问题并解决了它，现在我正在修复列出一列（如果可能的话，带有排名功能）

我的车辆表是：

```
vehNo   tTime                     odo     address
ABC     2013-02-13 10:30:00       80       denver
ABC     2013-02-12 10:30:00       10       boston
ABC     2013-02-12 12:30:00       30       berlin
ABC     2013-02-13 01:30:00       40       montreal
ABC     2013-02-13 02:30:00       40       montreal
ABC     2013-02-13 03:30:00       40       montreal

XYZ     2013-02-13 03:33:00       44       houston
ABC     2013-02-13 04:30:00       60       madrid
ABC     2013-02-13 11:30:00       100      alaska 
```

目前以下查询工作正常（在两次之间列出 3 列）

```
select vehNo, max(tTime) as [tTime], odo
from Table_3
where vehNo = 'ABC' and tTime between '2013-02-12 10:30:00' and '2013-02-13 10:30:00'
group by vehNo, odo
order by vehNo, odo; 
```

因此，如果没有聚合（）和分组依据，我可以将“地址”作为第四个并获得所需的结果

```
vehNo   tTime                     odo     address
ABC     2013-02-12 10:30:00       10     boston
ABC     2013-02-12 12:30:00       30     berlin
ABC     2013-02-13 03:30:00       40     montreal(time latest, ignoring 1:30 & 2:30)
ABC     2013-02-13 04:30:00       60     madrid
ABC     2013-02-13 10:30:00       80     denver 
```

我在 SQL Server 2005 上运行，所以可以有排名功能..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:06:47.800

试试这个：

```
WITH CTE
AS
(
   SELECT *,
     ROW_NUMBER() OVER(PARTITION BY vehNo, odo
                       ORDER BY tTime DESC) AS RowNum 
   FROM table_3
   where vehNo = 'ABC' 
     and tTime between '2013-02-12 10:30:00' 
                   and '2013-02-13 10:30:00'
)
SELECT *
FROM CTE
WHERE RowNum = 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/86f78/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:08:57.153

您可以使用[窗口/排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)来获得结果。我可以看到两个选项`row_number()`或`rank()`。使用窗口函数时，您可以使用`WHERE`子句仅返回排名为 1 的行。

如果您同时`rank()`有两个条目，则将返回多行。将只返回第一行。因此，您需要决定哪种功能最适合您的情况：`vehNo``address``row_number()`

```
select vehNo, tTime, odo, address
from 
(
  select vehNo, tTime, odo, address,
    rank() over(partition by vehNo, odo order by tTime desc) rnk
  from yourtable
  where vehNo = 'ABC' 
    and tTime between '2013-02-12 10:30:00' and '2013-02-13 10:30:00'
) d
where rnk = 1 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e0f74/8)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:08:30.227

使用 CTE：

```
WITH ag 
(
    select vehNo, max(tTime) as [tTime], odo
    from Table_3
    where vehNo = 'ABC' 
      and tTime between '2013-02-12 10:30:00' 
                    and '2013-02-13 10:30:00'
    group by vehNo, odo
)
select vehNO, tTime, odo, T.address
from ag 
inner join ag on Table_3 T on ag.vehNo=T.vehNo
order by vehNo, odo; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:08:27.620

您是否尝试过使用该`row_number()`功能？

```
select 
row_number() OVER (ORDER BY vehNo) AS period,
vehNo, max(tTime) as [tTime], odo
from Table_3
where vehNo = 'ABC' and tTime between '2013-02-12 10:30:00' and '2013-02-13 10:30:00'
group by vehNo, odo
order by vehNo, odo; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:10:25.790

只需执行以下操作：

```
MAX(address) 
```

即使它是 varchar，您仍然可以使用 MAX。

# c# - 反序列化可为空类型的最佳实践

> ID：15685237
> 
> 赞同：6
> 
> 时间：2013-03-28T15:03:56.170
> 
> 标签：c#, .net, xml-serialization, nullable

我想反序列化以下xml：

```
<Root>
    <Order> 
        <Id>12</Id>
        <Date>2013-03-28T16:12:45</Date>
        <Number></Number>
        <Amount></Amount>
    </Order>
</Root> 
```

我的课是这样的：

```
 [XmlType("Order")]
    public class ImportOrder
    {
        [XmlElement("Id")]
        public int OrderId { get; set; }

        [XmlElement("Date")]
        public DateTime OrderDate { get; set; }

        [XmlElement("Number")]
        public string OrderNumber { get; set; }   

        [XmlElement("Amount", IsNullable = true)]
        public decimal? OrderAmount { get; set; }
    } 
```

我使用的解串器：

```
 public List<T> DeserializeList<T>(string filePath, string rootName)
        {
            var itemList = new List<T>();

            if (File.Exists(filePath))
            {
                var serializer = new XmlSerializer(typeof(List<T>), new XmlRootAttribute(rootName));
                TextReader reader = new StreamReader(filePath);
                itemList = (List<T>)serializer.Deserialize(reader);
                reader.Close();
            }

            return itemList;
        } 
```

当所有数据都填写在xml中时，它工作正常。如果`Number`是空的也可以。但是当`Amount`为空时我得到异常：

```
Input string was not in a correct format. 
```

这是因为您不能简单地反序列化可空类型。我在互联网上找到了多种解决方案来解决这个问题。但是它们看起来不太好，您必须为此编写大量代码。

**有什么优雅的解决方案吗？反序列化可空类型的最佳实践是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:38:04.717

是否有特定的需要以您拥有的特定方式拥有 XML？

我问这个是因为如果您已经告诉 XML 反序列化器元素 Amount 可以为空，这意味着该元素可能存在或不存在。因此，如果您正在生成 XML，您只需要避免生成此元素，就可以开始了。

您可以看到，如果您有这样的文件：

```
<Root>
    <Order> 
        <Id>12</Id>
        <Date>2013-03-28T16:12:45</Date>
        <Number></Number>
    </Order>
</Root> 
```

然后你用你的代码解析它就可以了。

# c# - 如何将此字符串转换为所需的日期格式？

> ID：15685239
> 
> 赞同：0
> 
> 时间：2013-03-28T15:04:00.920
> 
> 标签：c#

如何将此字符串转换为所需的日期格式我有这样的字符串

```
 string hourformat = dt1.ToString("H:mm"); this produce result 21:30 
```

我希望它以这种日期格式转换

```
2012-01-03 20:10:50.000, how can i achieve this 
```

我使用了这种格式但产生了错误的结果

## WantedTime = String.Format("{0:u} : 000", DateTime.Parse(wantedTime));//2013-03-28 21:30:00Z : 000

实际上我得到了这种格式的字符串`"08:30 PM"`，`"10:00 AM"`我需要以 24 小时格式转换并以 2012-01-03 20:10:50.000 的日期绑定格式将其推送到数据库，请帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:04:41.947

```
dt1.ToString("yyyy-MM-dd HH:mm:ss.fff") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:25:37.187

你实际上可以通过很多不同的方式做到这一点。当您希望转换任何内容时`DateTime`，您可以完全自定义。可以[在此处找到](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.80%29.aspx)所有可能组合的列表。

一个例子可能是：

2013 年 3 月 28 日星期四

这可以很容易地表示出来`dddd, MMMM dd, yyyy`。

如您所见，您拥有完全的控制权，这归结为您选择使用哪个顶点。在您的情况下，您正在寻求完全数字解决方案，因此您将执行以下操作：

```
DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff"); 
```

如您所见，操纵时间非常容易。如果要将其推送到数据库中，则必须确保数据库字段支持您的`DateTime`. 如果不是，您将不得不将 推入`string`您的数据库作为.`string``text field`

但是您可以通过以下方式完成类似的操作：

```
string date = DateTime.Now.ToString("yyyy/MM/dd HH:mm:ss.fff");
DateTime dt = Convert.ToDateTime(date); 
```

那是一个解决方案。您将需要考虑一些事情，但希望这对您有所帮助。

# c - 如何在 C 中使用 memcpy() 将数组复制到数组

> ID：15685240
> 
> 赞同：6
> 
> 时间：2013-03-28T15:04:01.087
> 
> 标签：c

我正在尝试`(temp)`从另一个数组复制一个数组`a`。但我有它没有发生。

`Fig-1`

```
int main()
{
    typedef int arr_1[3];
    arr_1 arr[4];
    arr_1 *temp;
    arr_1 a[3] = {1, 2, 3};
    memset(&temp, 0, sizeof(temp));
    memcpy(temp, a, sizeof(temp));
} 
```

但是当我尝试使用如下所示的简单程序时，

`Fig-2`

```
 main()
    {
    int abc[3], def[3];
    def[3] = {1, 2, 3};
    memcpy(abc, def, sizeof(abc));
    } 
```

上面的代码`(fig-2)`对我来说真的很好。但`fig-1`对我不起作用。两者几乎相同。但为什么`fig-1`不工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T15:05:34.727

因为`temp`它不是一个数组，它是一个指针，因此`sizeof(temp)`与数组完全没有关系。

您想更改`memcpy`使用`sizeof(a)`. 您还需要`temp`在复制之前给出一个合理的值，否则程序会出现未定义的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T15:08:04.040

`temp`例如，您必须为with分配内存`malloc()`。现在它只是一个未初始化的指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-02T15:12:41.710

我知道，我迟到了。但是当我阅读以前的答案时，我认为“你不需要所有这些变量”

使用您的简单示例：

```
int abc[3], def[3]; //abs is destination and def is source
def[3] = {1, 2, 3};
memcpy(abc, def, 3*sizeof(int)); //you can do sizeof(int) as you have here an array of int. 
```

但最好使用变量“const int array_size = 3”或“#define ARRAY_SIZE 3”来定义数组大小。然后您只需将“3”替换为“ARRAY_SIZE”，它就可以完成相同的工作并避免尺寸错误。

对于你真正的问题，你可以这样做：

```
#define ARRAY_SIZE 3

typedef int arr_1[ARRAY_SIZE];
arr_1 arr[ARRAY_SIZE+1];//it is useless here
arr_1 *temp = (arr_1 *) malloc(sizeof(arr_1)); //it is your destination, but you have a pointer of array
arr_1 a[ARRAY_SIZE] = {1, 2, 3};//it is your source

//by doing sizeof((*temp)[0])
//you do not care about the type of you array pointer
//you are sure to take the good size --> it fills your array with 0
memset((*temp), 0, (ARRAY_SIZE+1)*sizeof((*temp)[0])); 

//same logic
//but you destination is (*temp) because you have a pointer of array
//it means that your array arr and a have the same type
memcpy((*temp), a, ARRAY_SIZE * sizeof(a[0]));  

//by the way, the las cell of arr is still 0
//and a pointer is close to an array. If you do "tmp = a;" it works.
//but it is not a copy, you just give the a's reference to tmp 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T15:31:37.427

作为先前答案的摘要：

`tmp`您应该为size =分配内存`sizeof(a)`。然后`memcpy`用 size = `sizeof(a)`

```
arr_1 a[3] = {1, 2, 3};
arr_1 *temp = malloc(sizeof(a));
memcpy(temp, a, sizeof(a)); 
```

`temp`当它在你的程序中变得无用时，不要忘记释放它`free(temp);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-12T09:26:28.853

你也可以考虑一个辅助函数。
请参阅[René Scharfe (](https://github.com/rscharfe) [)的](https://github.com/rscharfe)[提交 45ccef8](https://github.com/git/git/commit/45ccef87b3cc0ab09ec5fd1186aa0b33298ee8d4)和[提交 60566cb](https://github.com/git/git/commit/60566cbb5890abc84fa18c56da70e35ace0b23bf)（2016 年 9 月 25 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 b1f0a85](https://github.com/git/git/commit/b1f0a856605981363053941b8210f3cc9389607a))^(中，2016 年 10 月 3 日）)[`rscharfe`](https://github.com/rscharfe)
^([`gitster`](https://github.com/gitster))

它使用[`COPY_ARRAY`, 一个安全方便的助手](https://github.com/git/git/blob/60566cbb5890abc84fa18c56da70e35ace0b23bf/git-compat-util.h#L788-L794)来复制数组，补充[`ALLOC_ARRAY`](https://github.com/git/git/blob/60566cbb5890abc84fa18c56da70e35ace0b23bf/git-compat-util.h#L785)和[`REALLOC_ARRAY`](https://github.com/git/git/blob/60566cbb5890abc84fa18c56da70e35ace0b23bf/git-compat-util.h#L786).

因此`memcpy(temp, a, sizeof(a));`，您将使用`COPY_ARRAY(temp, a, 1);`

> 用户只需指定来源、目的地和元素数量；元素的大小是自动推断的。
> 
> 它检查大小和元素计数的乘积是否溢出。
> 推断的大小首先传递给`st_mult`，这允许在编译时进行除法。
> 
> 作为基本类型安全检查，它确保源元素和目标元素的大小相同。这也在编译时进行了评估。
> 
> `COPY_ARRAY``NULL`如果要复制 0 个元素，则可以安全地用作源指针。
> 该约定在某些情况下用于初始化数组。
> [Raw`memcpy(3)`](http://man7.org/linux/man-pages/man3/memcpy.3.html)不支持它——编译器被允许假设只有有效的指针被传递给它，并且可以 `NULL`在这样的调用之后优化掉检查。

```
#define COPY_ARRAY(dst, src, n) copy_array((dst), (src), (n), sizeof(*(dst)) + \
    BUILD_ASSERT_OR_ZERO(sizeof(*(dst)) == sizeof(*(src))))
static inline void copy_array(void *dst, const void *src, size_t n, size_t size)
{
    if (n)
        memcpy(dst, src, st_mult(size, n));
} 
```

* * *

它使用断言构建时依赖关系的[宏`BUILD_ASSERT_OR_ZERO`](https://github.com/git/git/blob/89c855ed3cbe64bea93ea081d0e96077e9ee8517/git-compat-util.h#L46-L59)作为表达式（`@cond`编译时条件必须为真）。
如果条件不成立或编译器无法评估，则编译将失败。

```
#define BUILD_ASSERT_OR_ZERO(cond) \
(sizeof(char [1 - 2*!(cond)]) - 1) 
```

例子：

```
#define foo_to_char(foo)                \
     ((char *)(foo)                     \
      + BUILD_ASSERT_OR_ZERO(offsetof(struct foo, string) == 0)) 
```

* * *

[内联函数`st_mult`](https://github.com/git/git/blob/320d0b493a259db3b481f985545b244438e6c086/git-compat-util.h#L734-L740)在[commit 320d0b4中引入](https://github.com/git/git/commit/320d0b493a259db3b481f985545b244438e6c086)

```
static inline size_t st_mult(size_t a, size_t b)
{
    if (unsigned_mult_overflows(a, b))
        die("size_t overflow: %"PRIuMAX" * %"PRIuMAX,
            (uintmax_t)a, (uintmax_t)b);
    return a * b;
} 
```

`st_mult`是检测`size_t`溢出的部分辅助函数，包括[`unsigned_mult_overflows`](https://github.com/git/git/blob/320d0b493a259db3b481f985545b244438e6c086/git-compat-util.h#L99-L105)

> `size_t`对我们提供给和朋友的变量执行计算`xmalloc`可能很危险，因为整数溢出会导致我们分配的块比我们意识到的要小得多。
> 
> 我们已经有了[`unsigned_add_overflows()`](https://github.com/git/git/blob/320d0b493a259db3b481f985545b244438e6c086/git-compat-util.h#L96-L97)，但让我们补充 `unsigned_mult_overflows()`一下

```
/*
 * Returns true if the multiplication of "a" and "b" will
 * overflow. The types of "a" and "b" must match and must be unsigned.
 * Note that this macro evaluates "a" twice!
 */
#define unsigned_mult_overflows(a, b) \
((a) && (b) > maximum_unsigned_value_of_type(a) / (a)) 
```

* * *

使用[`maximum_unsigned_value_of_type`: 检测无符号溢出的助手](https://github.com/git/git/blob/1368f65002bf39fdde7dd736a75ae35475184371/git-compat-util.h#L34-L35) （来自[提交 1368f6](https://github.com/git/git/commit/1368f65002bf39fdde7dd736a75ae35475184371)）

> 该成语`(a + b < a)`可以很好地检测无符号整数是否溢出，但更明确

```
unsigned_add_overflows(a, b) 
```

> 可能更容易阅读。
> 
> 定义这样一个宏，大致扩展为`((a) < UINT_MAX - (b))`.
> 因为展开式只在表达式之外使用每个参数一次`sizeof()` ，所以与具有副作用的参数一起使用是安全的。

```
#define bitsizeof(x) (CHAR_BIT * sizeof(x))

#define maximum_unsigned_value_of_type(a) \
(UINTMAX_MAX >> (bitsizeof(uintmax_t) - bitsizeof(a))) 
```

是 char中[`CHAR_BIT`的位数](https://stackoverflow.com/a/3200969/6309)（取决于架构）

* * *

您可以查看 Git 2.23（2019 年第三季度）的示例

请参阅[René Scharfe ( ) 的](https://github.com/rscharfe)[提交 921d49b](https://github.com/git/git/commit/921d49be86bd44ca290c8db6cc6f419dac3ed442)和[提交 177fbab](https://github.com/git/git/commit/177fbab747da4f58cb2a8ce010b3515c86dd67c9)（2019 年 6 月 15 日[）](https://github.com/rscharfe)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 e8d2590](https://github.com/git/git/commit/e8d259064146f24abb1280aff0ca3ead20218244))^(中，2019 年 7 月 9 日）)[`rscharfe`](https://github.com/rscharfe)
^([`gitster`](https://github.com/gitster))

> ## 用于`COPY_ARRAY`复制数组
> 
> 将调用转换`memcpy(3)`为使用`COPY_ARRAY`，这会稍微缩短和简化代码。

# sql-server - T-SQL 中按月和年的销售汇总数据

> ID：15685247
> 
> 赞同：0
> 
> 时间：2013-03-28T15:04:27.920
> 
> 标签：sql-server, tsql

我有我所有供应商的逐月销售数据。我正在寻找以下结果字段...供应商、2012 年销售额、2013 年销售额、2012 年平均每月销售额、2013 年每月预计销售额。最后一个字段是我遇到最多问题的字段。我需要平均过去 5 个月的完整销售数据，然后将其乘以 12。这是我正在处理的查询...

```
SELECT
    a.Vendor,
    a.Vendor_Name,
    SUM(a.Sales2012) AS Sales_2012,
    SUM(a.Sales2013) AS Sales_2013
FROM
(SELECT
    Vendor,
    Vendor_Name,
    CASE
        WHEN Month_Sold IN ('201201','201202','201203','201204','201205','201206','201207','201208','201209','201210','201211','201212') THEN SUM(Sales_Dlr) END AS 'Sales2012',
    CASE
        WHEN Month_Sold IN ('201301','201302','201303','201304','201305','201306','201307','201308','201309','201310','201311','201312') THEN SUM(Sales_Dlr) END AS 'Sales2013'
FROM
    dbo.SalesSummary
GROUP BY
    Vendor,
    Vendor_Name,
    Month_Sold
)a
GROUP BY
    a.Vendor,
    a.Vendor_Name
ORDER BY
    a.Vendor_Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:25:34.830

假设 SalesSummary.Vendor 是一个 ID，您可以尝试添加最近 5 个月的子查询，然后在外部查询中乘以 12：

```
DECLARE @Today DATE = GETDATE();

SELECT
    a.Vendor,
    a.Vendor_Name,
    SUM(a.Sales2012) AS Sales_2012,
    SUM(a.Sales2013) AS Sales_2013,
    b.Sales_Dlr_Avg * 12 AS [Monthly Projected Sales]
FROM
(SELECT
    Vendor,
    Vendor_Name,
    CASE
        WHEN Month_Sold IN ('201201','201202','201203','201204','201205','201206','201207','201208','201209','201210','201211','201212') THEN SUM(Sales_Dlr) END AS 'Sales2012',
    CASE
        WHEN Month_Sold IN ('201301','201302','201303','201304','201305','201306','201307','201308','201309','201310','201311','201312') THEN SUM(Sales_Dlr) END AS 'Sales2013'
FROM
    dbo.SalesSummary
GROUP BY
    Vendor,
    Vendor_Name,
    Month_Sold
)a
JOIN (
    SELECT Vendor, Sales_Dlr_Avg = AVG(Sales_Dlr)
    FROM dbo.SalesSummary
    WHERE DATEDIFF(MONTH, CAST(Month_Sold AS VARCHAR(6)) + '01', @Today) BETWEEN 1 AND 5
    GROUP BY Vendor
) b ON b.Vendor = a.Vendor
GROUP BY
    a.Vendor,
    a.Vendor_Name,
    b.Sales_Dlr_Avg
ORDER BY
    a.Vendor_Name; 
```

# c# - Expression.IfThenElse 错误 (C#)

> ID：15685249
> 
> 赞同：-10
> 
> 时间：2013-03-28T15:04:32.603
> 
> 标签：c#, linq, expression, xna-4.0

我有这样的错误：

> 错误 1“System.Linq.Expressions.Expression”不包含“IfThenElse”的定义

如何省略？

这是代码（用于 C# 的 AluminiumLua 库）：

```
public virtual void IfThenElse()
    {
        var Else = Expression.Call(stack.Pop(), LuaObject_AsFunction);
        var Then = Expression.Call(stack.Pop(), LuaObject_AsFunction);
        var Cond = Expression.Call(stack.Pop(), LuaObject_AsBool);
        stack.Push(Expression.IfThenElse(
            Cond,
            Expression.Call(Then, LuaFunction_Invoke, Expression.NewArrayInit(typeof(LuaObject), new Expression[] { })),
            Expression.Call(Else, LuaFunction_Invoke, Expression.NewArrayInit(typeof(LuaObject), new Expression[] { }))
        ));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:49:44.227

[`Expression.IfThenElse`](http://msdn.microsoft.com/en-gb/library/system.linq.expressions.expression.ifthenelse.aspx)在 .NET Framework 4 中引入，**晚**于`Expression`库（3.5）。因此，如果您正在使用一些`Expression`需要 4.0 的代码，并且您使用的是 3.5，那么*大部分*代码可能会编译，但不会编译`IfThenElse`。

我注意到[最近对 AluminiumLua 的承诺](https://github.com/chkn/AluminumLua/commit/41f1a73cffbc13e070b1cc99b7095c2428fc289f)已作为其评论

> 现在我们需要 .NET 4.0

因此，如果您使用的是最新代码，则需要遵循此说明。

恐怕我并没有真正了解 WP8 和/或 XNA 中哪些框架部分可用或不可用，但希望这将提供一些有用的线索。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-12-12T21:58:41.393

我认为你犯了一个错误。我认为是 IfElse

# visual-studio-2012 - Visual Studio 2012 异常错误

> ID：15685250
> 
> 赞同：0
> 
> 时间：2013-03-28T15:04:33.123
> 
> 标签：visual-studio-2012

我的一个 xaml 文件上有一个动画 gif。当我进入设计模式时，出现以下错误：

```
IOException: Cannot locate resource 'resources/images/siren.gif'.

 at MS.Internal.AppModel.ResourcePart.GetStreamCore(FileMode mode, FileAccess access)
   at System.IO.Packaging.PackagePart.GetStream(FileMode mode, FileAccess access)
   at System.IO.Packaging.PackWebResponse.CachedResponse.GetResponseStream()
   at System.IO.Packaging.PackWebResponse.GetResponseStream()
   at System.IO.Packaging.PackWebResponse.get_ContentType()
   at System.Windows.Media.Imaging.BitmapDecoder.SetupDecoderFromUriOrStream(Uri uri, Stream  stream, BitmapCacheOption cacheOption, Guid& clsId, Boolean& isOriginalWritable, Stream& uriStream, UnmanagedMemoryStream& unmanagedMemoryStream, SafeFileHandle& safeFilehandle)
   at System.Windows.Media.Imaging.BitmapDecoder..ctor(Uri bitmapUri, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption, Guid expectedClsId)
   at System.Windows.Media.Imaging.GifBitmapDecoder..ctor(Uri bitmapUri, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption)
   at Anubis.Controls.GifImage.SetupGifImage(Uri uri)
   at Anubis.Controls.GifImage.GifURIChanged(DependencyObject obj, DependencyPropertyChangedEventArgs ev)
   at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
   at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
   at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
   at System.Windows.Baml2006.WpfMemberInvoker.SetValue(Object instance, Object value)
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.SetValue(XamlMember member, Object obj, Object value)
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.SetValue(Object inst, XamlMember property, Object value)

InnerException:  None 
```

似乎 Visual Studio 不喜欢在 VS2012 中呈现 gif。我在使用 VS2010 时没有收到此错误。一个解释？

谢谢尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T23:30:47.317

取出动画gif，放入静态gif。出于某种原因，VS2012 似乎对动画 gif 有问题。

# javascript - Javascript 数组 / jQuery .data()

> ID：15685252
> 
> 赞同：0
> 
> 时间：2013-03-28T15:04:42.290
> 
> 标签：javascript, jquery, ajax, arrays, prototypejs

我有一个附加数据，其中包含这样使用的 ID 列表：

```
//Create
$('#element').data('list', new Array());
//Add a value into data
$('#element').data('list').push(id);
//Remove an element
var inArray = jQuery.inArray(id, jQuery('#element').data('list'));
if(inArray != -1) jQuery('#element').data('list').splice(inArray, 1); 
```

我想通过使用原型的 Ajax 调用将此数据发送到 PHP。
看起来像这样：*`[1,2,3]`将被替换为`jQuery('#filmsList').data('listFilms')`*

```
ajax: {
   method: 'post',
   parameters : {'values' : [1,2,3]},
   evalScripts: true,
} 
```

发布的参数是：

```
values  1
values  2
values  3 
```

所以在PHP中我只检索

```
array(1) {
  ["values"] => string(1) "3"
} 
```

我究竟做错了什么？

如果我不将数组放入对象`parameters : [1,2,3]`中，我会检索很多附加到我的数据的函数，如下所示：

```
array(40) {
[0] => string(6) "1"
[1] => string(6) "2"
[2] => string(6) "3"
["each"] => string(233) "function each(iterator, context) {
  var index = 0;
  try {
    this._each(function(value) {
      iterator.call(context, value, index++);
    });
  } catch (e) {
    if (e != $break) throw e;
 }
  return this;
}"
["eachSlice"] => string(291) "function eachSlice(number, iterator, context) {
 var index = -number, slices = [], array = this.toArray();
  if (number < 1) return array;
  while ((index += number) < array.length)
   slices.push(array.slice(index, index+number));
  return slices.collect(iterator, context);
}"
["all"] =>...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:40:42.107

输出中出现的那些函数来自 Prototype JS，而不是来自 jQuery。

*您调用以序列化数组的函数中的某些内容正在执行此操作而不*检查*`obj.hasOwnProperty(n)`.*

 *但是 - PHP 会期望您的表单参数是`key: value`成对的，而不是数组。为单个键传递多个值没有广泛接受的标准，因此一种*可移植*的方法可能是首先手动序列化数组，例如：

```
parameters: { 'values': JSON.stringify(myArray) } 
```

然后`$_REQUEST['values']`在 PHP 代码中执行 JSON 解码。

如果您知道它只是每个都将是 PHP，您可以使用：

```
parameters: { $.param({ 'values[]': myArray }) } 
```

它依赖 jQuery 将`values[]`密钥转换为已知 PHP 兼容的格式。*

# ruby-on-rails - 当我尝试保存在数据库中时，.save 返回 false

> ID：15685257
> 
> 赞同：0
> 
> 时间：2013-03-28T15:04:56.393
> 
> 标签：ruby-on-rails, transactions, activeadmin

我有这个交易：

```
begin
  ActiveRecord::Base.transaction do
    route_array.each do |r|
      Rails.logger.info r.save 
    end
  end
end 
```

如您所见，我有`route_array`并且我正在尝试将其保存在数据库中，但是`r.save`返回`false`并且我不知道为什么。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:09:09.377

主要理由是您的模型 RouteArray 有一些不被尊重的验证。

你可以试试这段代码：

```
 ActiveRecord::Base.transaction do
   route_array.each do |r|
     if !r.valid?
       Rails.logger.info r.errors.inspect
     else
       Rails.logger.info r.save 
     end
   end
 end 
```

# c# - 静态成员未首先初始化

> ID：15685260
> 
> 赞同：4
> 
> 时间：2013-03-28T15:04:58.183
> 
> 标签：c#, static-members

遵循[类型安全枚举模式](https://stackoverflow.com/questions/424366/c-sharp-string-enums/424414#424414)，我创建了一个小型类型安全枚举类。首次调用主对话框时，在调用**InitializeComponent**之后，它会调用另一个类的构造函数，该构造函数尝试将其类变量之一设置为类型安全枚举类的静态实例之一。问题是所有这些实例（以及它看起来的类）都是空的，从而导致程序崩溃。

如何让程序首先构造该类及其所有实例？我有点困惑，因为我认为静态实例是在程序开始时创建的，那么为什么在这种情况下不这样做呢？

这是令我失望的代码的精简版本： **类型安全的枚举模式实现**：

```
public sealed class Types
{
   public static readonly Types INVALID = new Types(-1, "Invalid");
   ... (other static instances and other implementations of the type-safe enum pattern)
} 
```

**主对话框的初始化**：

```
public dlgMain()
{
   InitializeComponent();
   m_OtherClass = new OtherClass();
   ...
} 
```

**OtherClass 的构造函数**

```
public OtherClass()
{
   m_eType = Types.INVALID; // Crash!! the entire type-safe enum class and its static members are null!
   ...
} 
```

编辑：好的，这是问题所在，

```
public sealed class Types
{
   public static readonly Types INVALID = new Types(-1, "Invalid");
   ... (other static instances)
   private static Dictionary<string, Types> mappings = new Dictionary<string, Types>(6); // There are 6 static types
   private Types(int val, string name)
   {
      m_value = value; m_name = name;
      mappings[name] = this; // This was causing the error, mappings is null
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:11:24.787

> 如何让程序首先构造该类及其所有实例？我有点困惑，因为我认为静态实例是在程序开始时创建的，

这实际上是不正确的。静态数据是在第一次使用包含静态数据的类型之前的某个时间点创建的。这通常在“使用”这些值之前初始化，而不是在程序启动时初始化。（不过，在这种情况下应该没关系。）

> 那么为什么在这种情况下不这样做呢？

它实际上可能正在正确执行此操作。问题更可能出现在您的构造函数中`Types`。当静态构造函数运行时，它需要`readonly`初始化`Types`. 如果构造函数期望静态数据已经初始化或其他类似问题，这可能会导致抛出异常。

我建议在您的构造函数中放置一个断点`Types`（以及用于初始化静态数据的任何其他构造函数）。这通常有助于诊断和发现真正的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:06:44.710

您正在寻找的是：[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)。

> 静态构造函数用于初始化任何静态数据，或执行只需要执行一次的特定操作。在创建第一个实例或引用任何静态成员之前自动调用它。

# c++ - 将 bool 值打包成 char

> ID：15685267
> 
> 赞同：0
> 
> 时间：2013-03-28T15:05:24.267
> 
> 标签：c++, visual-studio-2010

我需要将一个布尔值打包成一个字节。该字节可以包含这些字符之一。

（0 到 9 和 A 到 F）即十六进制字符。

我相信这些字符本质上占用 7 位，那么我们如何利用第 8 位来存储布尔值并在稍后阶段检索两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:12:42.333

你可以这样做：

```
char pack(char c, bool b) {
  char res = c;
  if (b) {
    res |= 128;
  }
  return res;
}

void unpack(char packed, char &c, bool &b) {
  b = ((packed & 128) > 0);
  c = packed & 127;
} 
```

为了便于操作打包值的一部分，您还可以添加如下函数：

```
char unpackChar(char packed) {
  return packed & 127;
}

bool unpackBool(char packed) {
  return ((packed & 128) > 0);
} 
```

如果添加它们，请`unpack()`使用它们重新定义，而不是重复信息：

```
void unpack(char packed, char &c, bool &b) {
  c = unpackChar(packed);
  b = unpackBool(packed);
} 
```

示例使用：

```
char packed = pack('A', true);
std::cout << unpackChar(packed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:10:01.030

您使用的位数`char`完全取决于您如何使用它。如果您的编译器的执行字符集是 ASCII 兼容的，并且您将 ASCII 范围 0-127 内的字符存储在 a 中`char`（可能通过使用字符文字），那么您就有多余的位（如果`CHAR_BIT == 8`）。

如果您仅将十六进制字符存储为 ASCII 字符，那么您确实有额外的两位，因为您使用的是 0-63 范围内的字符。

尽管如此，如果你想在你的第 8 位存储一个布尔变量`char`，你可以简单地移位一个`bool`值，然后用你的按位或它`char`：

```
char c = 'A';
bool b = true;
c |= (b << 7); 
```

但是请注意，您不能打印出来`char`并期望仍然看到`A`. 现在`char`有不同的价值。

# json - ASP.NET Web API：使用默认序列化程序

> ID：15685271
> 
> 赞同：0
> 
> 时间：2013-03-28T15:05:36.430
> 
> 标签：json, serialization, asp.net-web-api, signalr

有没有一种简单的方法来使用 ASP.NET Web API 的默认序列化程序？

我的在 WebApiConfig.cs 中以这种方式配置

```
config.Formatters.JsonFormatter.SerializerSettings.Converters.Add(new StringEnumConverter());
config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
```

它完美地工作。我想做的是在特定情况下手动使用相同的序列化程序。如果由于某种原因配置更改，手动序列化必须反映这些更改，而不必关心它。

为了更准确地说明我的意图，我想在将新资源保​​存到数据库后立即将它们发送到 SignalR Hub。它们需要以与使用 GET 请求时 ASP.NET Web API 相同的方式进行序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:56:59.380

您可以`IJsonSerializer`在应用程序启动时使用您的自定义 JSON.NET 序列化程序设置向 SignalR 的依赖关系解析器注册您自己的。

```
//...
using Microsoft.AspNet.SignalR.Json;
using Newtonsoft.Json;

//...

    protected void Application_Start(object sender, EventArgs e)
    {

        var settings = new JsonSerializerSettings();
        settings.Converters.Add(new StringEnumConverter());
        settings.ContractResolver = new CamelCasePropertyNamesContractResolver();

        var serializer = new JsonNetSerializer(settings);

        GlobalHost.DependencyResolver.Register(typeof(IJsonSerializer), () => serializer);

        RouteTable.Routes.MapHubs();

        //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:04:22.367

我找到了基于此错误报告的解决方案：[https ://github.com/SignalR/SignalR/issues/500](https://github.com/SignalR/SignalR/issues/500)

首先，创建一个自定义的 IContractResolver

```
public class SignalRContractResolver : IContractResolver
{
    private readonly Assembly _assembly;
    private readonly IContractResolver _camelCaseContractResolver;
    private readonly IContractResolver _defaultContractSerializer;

    public SignalRContractResolver()
    {
        _defaultContractSerializer = new DefaultContractResolver();
        _camelCaseContractResolver = new CamelCasePropertyNamesContractResolver();
        _assembly = typeof(Connection).Assembly;
    }

    public JsonContract ResolveContract(Type type)
    {
        if (type.Assembly.Equals(_assembly))
            return _defaultContractSerializer.ResolveContract(type);

        return _camelCaseContractResolver.ResolveContract(type);
    }
} 
```

接下来，在 ApplicationStart 中注册

```
 var settings = new JsonSerializerSettings();
    settings.Converters.Add(new StringEnumConverter());
    settings.ContractResolver = new SignalRContractResolver();

    var serializer = new JsonNetSerializer(settings);

    GlobalHost.DependencyResolver.Register(typeof(IJsonSerializer), () => serializer); 
```

感谢halter73为我指明了正确的方向！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T08:51:48.580

我发现了这个，它工作正常

```
var formatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
formatter.SerializerSettings = new JsonSerializerSettings
{
    Formatting = Formatting.Indented,
    TypeNameHandling = TypeNameHandling.Objects,
    ContractResolver = new CamelCasePropertyNamesContractResolver()
}; 
```

这必须放在“Application_Start”函数的“Global.asax.cs”文件中

# java - 使用 JDBC 连接和 PreparedStatement 处理 Java 7 异常？

> ID：15685273
> 
> 赞同：2
> 
> 时间：2013-03-28T15:05:41.133
> 
> 标签：java, exception, jdbc, exception-handling, java-7

在以下代码片段中，

1) try-catch 块是否在调用“conn.close()”之前自动调用“conn.rollback()”（通过 AutoClose）？如果没有，我是否必须在`finally { conn.rollback(); }`该块中添加一个？

2) Connection 对象传递给 bar() 方法的方式是否正确，其中的 try-catch 方法是否正确？

```
public void foo() {
        try (Connection conn = datasource.getConnection()) {

            bar(conn, "arg");
            conn.commit();

        } catch (SQLException e) {
            e.printStackTrace();
        }

    }

    public void bar(Connection conn, String args) throws SQLException {
        try (PreparedStatement ps = conn.prepareStatement("SOME_QUERY")) {
            // Do something
            ps.executeUpdate();
        } catch (SQLException err) {
            throw err;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:09:43.640

*try-with-resources*将简单地调用`close()`. 当事务处于活动状态时`Connection`调用的效果是实现定义的：[`Connection.close()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#close%28%29)

> **强烈建议**应用程序在调用该`close`方法之前显式提交或回滚活动事务。如果`close`调用该方法并且存在活动事务，则结果是实现定义的。

换句话说：不要依赖它并显式调用`commit()`，否则`rollback()`驱动程序之间的实际行为会有所不同，甚至可能在同一驱动程序的版本之间。

鉴于您的示例，我建议：

```
public void foo() {
    try (Connection conn = datasource.getConnection()) {
        bar(conn, "arg");
    } catch (SQLException e) {
        e.printStackTrace();
    }
}

public void bar(Connection conn, String args) throws SQLException {
    try (PreparedStatement ps = conn.prepareStatement("SOME_QUERY")) {
        // Do something
        ps.executeUpdate();
        conn.commit();
    } catch (SQLException err) {
        conn.rollback();
        throw err;
    }
} 
```

由于您不能在创建它`conn`的`catch`or`finally`块中使用，您也可以嵌套它：`try`

```
public void foo() {
    try (Connection conn = datasource.getConnection()) {
        try {
            bar(conn, "arg");
            conn.commit();
        } catch (Exception ex) {
            conn.rollback();
            throw ex;
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

# identify - 获取图像颜色模式的最快方法

> ID：15685275
> 
> 赞同：1
> 
> 时间：2013-03-28T15:05:42.960
> 
> 标签：identify, exiftool

我想获取图像文件（jpg、tif）的颜色模式（位图、灰色、rgb、cmyk）。Imagemagick 将其称为“色彩空间”，而 exiftool 称为“色彩模式”，而 Photoshop 则称为“图像模式”。

一种可能性是识别，它几乎总是给出想要的结果，但它非常缓慢。识别也有一个问题，它将单色图像（位图）识别为灰色。

```
// 版本：ImageMagick 6.5.4-7 2012-05-07 Q16 OpenMP http://www.imagemagick.org
时间识别 -quiet -ping -format "%[colorspace] %f\n" *.jpg *.tif
真正的 0m9.479s
用户 0m1.202s
系统 0m8.232s

```

exiftool 更快（并将单色检测为正确的“位图”），但并不总是提供颜色空间：

```
//ExifTool 版本号：9.24
时间 exiftool -S -ColorMode *.jpg *.tif
真实0m1.178s
用户 0m1.098s
系统 0m0.071s

```

是否可以使用 exiftool 或其他快速方法始终获得颜色模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T04:24:31.533

Phil Harvey（Exiftool 的作者）在他的论坛上的很多帖子中写道，ExifTool “向您展示了那里有什么”。Andreas Huggel 的 Exiv2 也是如此。我认为 ImageMagick，如果它找不到颜色模式元数据，它会从文件代码中的不同元素来近似它。因此，IM 速度较慢，因为很可能不是，它需要时间来进行近似。当文件中没有颜色模式数据时，GNOME 2 中的 Gnome 之眼在其 GUI 中显示“错误：-65535”，这曾经让我很烦恼，直到我发现如何更改它（即，使用 Exiv2 或 IM）。

我不知道是否有一个命令行应用程序或实用程序可以读取或近似图片的颜色模式，与您已经使用的两种颜色模式不同。（在“不同”中请阅读“更快或更好”。）

BZT

# java - 从字符串反序列化 EnumSet 的优雅方法

> ID：15685282
> 
> 赞同：7
> 
> 时间：2013-03-28T15:05:56.937
> 
> 标签：java, enums, enumset

我想将一些序列化为`EnumSet<FooType>`使用`String`它的`toString()`方法。

例如：`EnumSet.of(FooType.COMMON, FooType.MEDIUM).toString()`会给`[COMMON, MEDIUM]`。

问题是关于将这样的字符串反序列化回`EnumSet<FooSet>`. 我正在寻找一些众所周知的库（可能像`apache-commons`）或用于此类事物的标准 Util 类。

就像是：`EnumSetUtil.valueOf(FooType.class, "[COMMON, MEDIUM]")`

我已经以这种方式实现了这个东西：

```
public static <E extends Enum<E>> EnumSet<E> valueOf(Class<E> eClass, String str) {
    String[] arr = str.substring(1, str.length() - 1).split(",");
    EnumSet<E> set = EnumSet.noneOf(eClass);
    for (String e : arr) set.add(E.valueOf(eClass, e.trim()));
    return set;
} 
```

但是，可能有一个现成的解决方案，或者一个非常简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-31T10:50:10.963

使用 Java 8，您可以使用[Lambda 表达式](http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)和流来执行以下操作：

```
EnumSet.copyOf(Arrays.asList(str.split(","))
.stream().map(FooType::valueOf).collect(Collectors.toList())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T08:18:54.180

使用番石榴 19.0：

```
 Iterable<String> i = Splitter.on(",")
        .trimResults(CharMatcher.WHITESPACE.or(CharMatcher.anyOf("[]")))
        .split(str);
    Set<YourEnum> result = FluentIterable.from(i)
        .transform(Enums.stringConverter(YourEnum.class)).toSet(); 
```

或者如果您可以接受这样的字符串格式，则使用 JSON 库的另一种方式`['COMMON', 'MEDIUM']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T08:04:48.080

使用 Gson ('com.google.code.gson:gson:2.3.1') 库，您可以：

```
public static EnumSet getEnumObject(Type type, String jsonStrToDeserialize) {
    Gson gson = new Gson();
    return jsonStrToDeserialize == null ? null : (EnumSet) gson.fromJson(jsonStrToDeserialize, type);
} 
```

# coldfusion - 重新启动服务器时是否丢失会话变量？

> ID：15685288
> 
> 赞同：0
> 
> 时间：2013-03-28T15:06:07.867
> 
> 标签：coldfusion

我们不得不频繁重启（每天一次），因为我们从 VPS 上的 SQL Server 收到 9001 错误。重新启动似乎可以解决问题，我们正在与我们的提供商讨论它。

问：当我们重新启动时，每个人都会失去他们的会话范围吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:09:42.063

是的，假设您在内存中使用 ColdFusion 的会话范围。重新启动服务器时会清除所有内存。如果您使用数据库或其他一些外部源，会话可能会持续存在。

并且对于它的价值，应用程序范围和服务器范围也被清除了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T17:36:00.950

根据 Charlie Arehart 在 CF10 中的[Hidden Gems，](http://www.carehart.org/presentations/hidden_gems_in_cf10.pdf) Tomcat 上的 CF10 能够**在重启时保存会话**。

> 也许是 CF10（和 Tomcat）中最好的隐藏宝石
> 
> *   能够在重新启动时保存会话。是的！
> *   需要认真考虑的一些重要利弊
> *   了解 Tomcat 中的一些配置知识（您现在已经掌握）
> *   更多：http: [//tomcat.apache.org/tomcat-7.0-doc/config/manager.html](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html)
> *   需要修改[cf10][instance]\runtime\conf\context.xml
> *   Adobe doc 在“Installing CF 10”中的简短讨论令人困惑，可悲的是
> *   请参阅第 20 页，“启用持久会话”（原文如此）
> *   说取消注释已经没有注释的 XML 行
> *   关键是，如果未注释，MANAGER 元素不能有空白 PATH，因此：
> *   可以评论吗（CF10默认不评论，但PATH为空）
> *   或者可以设置一个PATH值。PATH="sessions.ser" 将会话保存到 sessions.ser 文件
> *   在 [cf10][实例]\runtime\work\Catalina\localhost\tmp
> 
> 修改后需要重启CF才能生效
> 
> *   测试：配置/重启/创建会话/重新启动/测试是否保存
> *   好消息：即使是复杂的变量也会持续存在（查询、CFC、结构等）
> *   问题：仅在正常 CF 关闭时保存会话
> *   如果 CF 崩溃/被杀死，则不会保存/恢复会话
> *   但那时的情况与现在没有什么不同。如果您“期望”节省，那就太糟糕了
> *   此外，在关机时可能会有很多 I/O，然后是启动，尤其是。如果有很多会话
> *   由于蜘蛛、机器人等原因，您的会话可能比您想象的要多。
> *   可能会让你感到困惑：当 CF 启动时，sessions.ser 文件不会出现
> *   关机时创建，启动后删除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:03:57.773

Miguel-F 的回答是正确的，但在这里它是出自马的口中（[Adobe 文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0c35c-7ffb.html)）。我用谷歌搜索了“coldfusion session server restart”来找到它——第三个结果。第二个结果是 2010 年最初提出的 Stack Overflow 问题。

> **会话**：包含可用于应用程序中单个浏览器会话的单个客户端浏览器的变量。
> 
> 对于您希望在客户端访问您的应用程序时保留的特定于客户端的信息（例如购物车内容）很有用。
> 
> **数据存储在内存中，并在一段时间不活动或服务器关闭后超时。**
> 
> ColdFusion Administrator 允许您在两种会话管理之间进行选择，标准 ColdFusion 会话管理和 J2EE 会话管理。有关会话管理类型的信息，请参阅 ColdFusion 和 J2EE 会话管理。
> 
> 在变量名称中使用会话范围前缀。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:11:12.570

是的。会话是服务器端变量。我刚才测试了它。

# c# - Razor DropDownList 如何获取漂亮的 URL

> ID：15685296
> 
> 赞同：3
> 
> 时间：2013-03-28T15:06:31.220
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-routing

我希望在下面的示例代码中提交到 GET `/Product/Category/Id`，其中 Id 值是选定的下拉列表 id。但相反，我得到了`/Product/Category?Id=Id`，虽然它工作得很好，但看起来不像一个好的 URL

```
@using (Html.BeginForm("Category", "Product", FormMethod.Get))
{
<div class="category-search">
    <label for="CategoryList">Filter by Category</label>
    @Html.DropDownList("Id", (IEnumerable<SelectListItem>)ViewBag.CategoryList)
    <input type="submit" value="Filter" />
</div>   
} 
```

我需要做些什么来保留漂亮的 URL

**编辑**
我的 Global.asax.cs 仅映射了以下路线

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        // Parameter defaults
); 
```

在我的控制器中，我添加到 ViewBag *（更喜欢使用 ViewModel，但它已经与 IPagedList 一起使用）*

```
var categories = Session.QueryOver<Category>()
                        .OrderBy(c=>c.CategoryName).Asc
                        .List();
ViewBag.CategoryList = new SelectList(categories, "CategoryName", "CategoryName"); 
```

`CategoryName`我意识到在下拉列表中使用 id 和标签有点奇怪，但我使用的是 ID 的 GUID，这使得 URL 很糟糕。这是能够“破解” URL 有效的唯一情况，即我很高兴用户可以根据需要在 URL 中键入要过滤的类别，而不是在下拉列表中查找它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:09:23.293

我假设您正在尝试连接到默认路由，这意味着您需要一个小写字母`i`来`Id`匹配它。将其更改为`id`，它应该可以工作。

这是默认路线：

```
RouteTable.Routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:23:38.593

我怀疑您是否能够在不捕获 Javascript 中提交的表单、抑制默认操作、提取信息、构建新操作字符串并将表单提交到该新操作字符串的情况下做您想做的事情。

问题是您提交的是表单值，而不是路由部分 - 表单中的 id 与路由部分中的 id 完全不同。当您使用`FormMethod.Get`.

重要的是要注意控制表单值如何提交回来的浏览器，而不是服务器端 MVC 代码。

# tomcat - JPA 实体作为可共享 jar 在 Tomcat 7.0.27 下的 WAR 文件中不起作用

> ID：15685299
> 
> 赞同：2
> 
> 时间：2013-03-28T15:06:36.513
> 
> 标签：tomcat, jpa, jar, war, entities

我试图在 eclipse Juno 的 JPA 2.0 项目中共享我的实体，因为我正在创建一个测试项目，我需要访问那里进行测试，如果我创建任何其他项目，则可以重用这些实体。

最大的问题是 hibernate ( 4.1.9 ) 可以在相对路径中找到我的 jar，但最奇怪的是在我的测试项目中只使用 Spring 3 hibernate 完美地读取了我的实体 jar 和 hbm 文件。但是，当我尝试使用 tomcat 7.0.27 对真实项目执行相同操作时，它可以设置 jar 所在的位置，我的真实项目是 tomcat 和 Spring 3 中的常见 WAR 文件。这是我真实项目的 persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="CustomerServiceMacrosUnit"
    transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <!-- the JNDI data source -->
    <non-jta-data-source>java:comp/env/jdbc/CustomerServiceMacrosDS</non-jta-data-source>

    <jar-file>../lib/aliancaModel.jar</jar-file>

    <shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode> 
```

这是我映射所有类的 jar 持久性：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org   /2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="AliancaJPA">
       <class>br.com.alianca.customerservicemacros.entity.controlefaturas.DocsysBl</class>
       <class>br.com.alianca.customerservicemacros.entity.controlefaturas.DocsysBooking</class>
      <class>br.com.alianca.customerservicemacros.entity.controlefaturas.DocsysCharge</class>
       <class>br.com.alianca.customerservicemacros.entity.controlefaturas.DocsysContainer</class>

</persistence-unit> 
```

这是tomcat的日志中的错误：

```
INFO: Initializing Spring root WebApplicationContext
28/03/13 12:00  INFO org.hibernate.annotations.common.Version:37
HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
28/03/13 12:00  INFO org.hibernate.Version:41
HHH000412: Hibernate Core {4.1.9.Final}
28/03/13 12:00  INFO org.hibernate.cfg.Environment:239
HHH000206: hibernate.properties not found
28/03/13 12:00  INFO org.hibernate.cfg.Environment:342
HHH000021: Bytecode provider name : javassist
28/03/13 12:01  WARN org.hibernate.ejb.packaging.FileZippedJarVisitor:74
HHH015010: Unable to find file (ignored): file:../lib/aliancaModel.jar
java.io.FileNotFoundException: ..\lib\aliancaModel.jar (The system cannot find the path specified)
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:127)
at java.util.jar.JarFile.<init>(JarFile.java:135)
at java.util.jar.JarFile.<init>(JarFile.java:72)
at org.hibernate.ejb.packaging.FileZippedJarVisitor.doProcessElements(FileZippedJarVisitor.java:70)
at org.hibernate.ejb.packaging.AbstractJarVisitor.getMatchingEntries(AbstractJarVisitor.java:149)
at org.hibernate.ejb.packaging.NativeScanner.getClassesInJar(NativeScanner.java:128)
at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:485)
at org.hibernate.ejb.Ejb3Configuration.addMetadataFromScan(Ejb3Configuration.java:475)
at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:371)
at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)
at org.springframework.orm.jpa.LocalEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalEntityManagerFactoryBean.java:92)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1525)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1463)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:521)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.orm.jpa.EntityManagerFactoryUtils.findEntityManagerFactory(EntityManagerFactoryUtils.java:99)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findNamedEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:512)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:494)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:659)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:630)
at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:155)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:340)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1117)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

使用调试，我可以强制休眠在我的文件系统中使用完整路径对 jar 进行本地化，但即使使用资源它也找不到我的 hbms！

我开始认为它只能使用 EAR 文件！:( 有人可以给点意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:37:36.907

finally i figure out how to manage this problem!

I don´t known why, but if you use "LocalContainerEntityManagerFactoryBean", it can find and read the entities´s jar properly, so i had to change my spring configuration like this:

Before:

```
<bean id="emfCustomerServiceMacros" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
<property name="persistenceUnitName" value="CustomerServiceMacrosUnit" />
</bean> 
```

Now with this approach spring and hibernate can find the jar:

```
<bean id="emfCustomerServiceMacros" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
<property name="jpaVendorAdapter">  
<bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />  
</property>  
<property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml" />  
</bean> 
```

Now if hibernate can´t find the jar, it will show you a full path in the log to where it was spectating for the library, in my case i corrected my web application´s persistence.xml to:

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="CustomerServiceMacrosUnit" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<!-- the JNDI data source -->
<non-jta-data-source>java:comp/env/jdbc/CustomerServiceMacrosDS</non-jta-data-source>

<jar-file>lib/AliancaModel.jar</jar-file> 
```

I´ll check the Spring´s source code and see why that happens!

# javascript - 如何通过 AJAX/JS 发送更多数据

> ID：15685304
> 
> 赞同：0
> 
> 时间：2013-03-28T15:06:42.470
> 
> 标签：javascript, ajax

在我下面的代码片段中，我的 Ajax 将向 response.php 发送一些数据。如果我想通过 Ajax 发送更多数据，我应该如何进行？我想添加例如 user_id，如底部的 HTML 代码所示。

```
$(document).ready(function() {

    $("#FormSubmit").click(function (e) {
            e.preventDefault();
            if($("#contentText").val()==='')
            {
                alert("Du følger allerede denne bloggen");
                return false;
            }
            var myData = 'content_txt='+ $("#contentText").val(); 
            jQuery.ajax({
            type: "POST", 
            url: "assets/plugin/ajax-follow/response.php", 
            dataType:"text", 
            data:myData, 
            success:function(response){
                $("#responds").append(response);
                $("#contentText").val(''); 
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert(thrownError);
            }
            });
    });

}); 
```

**HTML**

```
<div class="form_style">
<input type="hidden" name="content_txt" id="contentText" value="'.$user_info[u_id].'">
<input type="hidden" name="user_id" id="userid" value="'.$whotofollow[u_id].'">
<button id="FormSubmit">Følg</button>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:09:41.123

使用[JSON](http://www.json.org/)

```
$(document).ready(function() {

$("#FormSubmit").click(function (e) {
        e.preventDefault();
        if($("#contentText").val()==='')
        {
            alert("Du følger allerede denne bloggen");
            return false;
        }
      var myData = 'content_txt='+ $("#contentText").val(); //build a post data structure
      var userId = $("#user_id").val();
      var JsonData = {userId : userId,myData : myData};       // Build a JSON object 

        jQuery.ajax({
        type: "POST", // HTTP method POST or GET
        url: "assets/plugin/ajax-follow/response.php", //Where to make Ajax calls
        dataType:"JSON", // Data type, HTML, json etc.
        data : JsonData, //Form variables
        success:function(response){
            $("#responds").append(response);
            $("#contentText").val(''); //empty text field on successful
        },
        error:function (xhr, ajaxOptions, thrownError){
            alert(thrownError);
        }
        });
});

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:14:17.020

您可以手动构建 postData ，例如：

```
var myData ={

content_txt:$("#contentText").val(),

user_id:$('#user_id').val()
} 
```

但是jquery提供了一种自动为你构建表单数据的方法！

```
var str = $("formabc").serialize(); 
```

你需要用 id="formabc" 将所有要发送到服务器的元素包装在一个表单中

将您的 html 更改为：

```
<div class="form_style">
<form id="formabc">
<input type="hidden" name="content_txt" id="contentText" value="'.$user_info[u_id].'">
<input type="hidden" name="user_id" id="userid" value="'.$whotofollow[u_id].'">
<button id="FormSubmit">Følg</button>
</form>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:18:07.597

您不必*使用*JSON。您所要做的就是使用有效负载创建一个字符串（在您的示例中附加到 myData）并将其发送到您的服务器。

# css - H1：悬停在完整的div中

> ID：15685308
> 
> 赞同：0
> 
> 时间：2013-03-28T15:06:50.210
> 
> 标签：css, title, jquery-hover, mousehover

我有一个带有**h1的****div**，即. 我想要的是当我将鼠标悬停在h1**的****div**上时。**`h1:hover``color:#FFFFFF`****`#FFFFFF`******

 ******是否有任何 jquery 可以将**h1**悬停到完整的 div？

网址：[http ://www.isolacor.com/site/](http://www.isolacor.com/site/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:07:37.547

使用 CSS：

```
div:hover h1 {
    color: #fff;
} 
```

使用 jQuery：

```
$('div').on('mouseover', function() {
    $(this).find('h1').css('color', '#fff');
}); 
```******

# git - 使用 git 合并不同的文件

> ID：15685310
> 
> 赞同：2
> 
> 时间：2013-03-28T15:07:06.740
> 
> 标签：git, version-control

我对 git 不是很有经验，但我有一个需要帮助的情况。

在我的功能分支上工作，我刚刚意识到我一直在处理一个过时的文件 X，比如说。在 master 上，另一个文件 Y 用于 X 的位置，而文件 X 收集灰尘（没有人删除它）。我想将我的分支合并到 master 并将我的提交添加到文件 X 中放入文件 Y 中。

这可能吗？我一直在研究**rebase**和其他东西，但我不确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:47:46.293

也许[`git mv`](http://kernel.org/pub/software/scm/git/docs/git-mv.html)是为了？

```
git mv X Y
git commit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:43:36.420

这应该有效：在您的`feature`分支中，您可以将无用的重命名`file_X`为`file_Y`（使用`git mv`）。在`feauture`分支中提交更改。然后你在`master`分支上移动并将分支合并`feauture`到`master`.

# javascript - jQuery JSON 数组未定义/不是对象

> ID：15685311
> 
> 赞同：2
> 
> 时间：2013-03-28T15:07:08.273
> 
> 标签：javascript, jquery, json, internet-explorer-8, background-color

作为 Javascript 新手，我很难弄清楚以下问题：

我有一个带有颜色列表的外部 JSON 文件。

```
[
{"num": "1B2-5","nam": "burntsienna","hex": "EA7E5D","com": "int2"},
{"num": "1B3-5","nam": "cadetblue","hex": "5F9EA0","col": "int1"},
{"num": "1B1-6","nam": "chartreuse","hex": "7FFF00"},
{"num": "1B2-6","nam": "chocolate","hex": "D2691E","com": "int2"}
] 
```

在代码中的这一点上，#background 的背景颜色值将等于 JSON 文件中的值之一。我将背景颜色值转换为十六进制，删除“#”字符，并在 JSON 数组中找到它的索引号。然后我使用索引号为相应的属性声明变量。

为了这个例子的目的，我已经缩短了代码。

```
$(document).ready(function() {
$.getJSON('_js/json.js', function(colors_list){ 

    var pageColorPre = rgb2hex($('#background').css('background-color'));
    var pageColor = pageColorPre.toUpperCase().substr(1);
    var pageColorIndex = findIndexByKeyValue(colors_list, "hex", pageColor)

    var nameByIndex = colors_list[pageColorIndex].nam
    var numberByIndex = colors_list[pageColorIndex].num
    var comByIndex = colors_list[pageColorIndex].com

function findIndexByKeyValue(obj, key, value){
    for (var i = 0; i < obj.length; i++) {
        if (obj[i][key] == value) {
        return i;
        }
      }
      return null;
}

function rgb2hex(rgb) {
 if (  rgb.search("rgb") == -1 ) {
      return rgb;
      } else {
      rgb = rgb.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);
      function hex(x) {
           return ("0" + parseInt(x).toString(16)).slice(-2);
      }
      return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]); 
      }
}
});
}); 
```

尽管代码在 Safari、Firefox 和 Chrome 中运行良好，但当浏览器到达这一行时：

```
 var numberByIndex = colors_list[pageColorIndex].num 
```

调试时出现以下错误：

```
uncaught TypeError: cannot read property 'nam' of undefined. 
```

IE8 中的代码中断并显示以下消息：

```
'colors_list[...] nam'is null or not an object. 
```

我想也许是因为“com”和“col”值有时为空，并不是每种颜色都有它们，这可能是个问题。但是，即使仅声明每种颜色都具有的属性，例如“nam”或“num”，我也会收到相同的错误消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:28:21.717

以为我会将其发布为新答案，因为先前的答案是指问题中似乎是错字的内容...

您得到的错误实际上与该行有关：

```
var nameByIndex = colors_list[pageColorIndex].nam 
```

这就是为什么它没有到达您尝试获取`NumberByIndex`. （顺便说一句，你应该用分号结束这些行`;`，以防止进一步的问题......）

问题出在对象...

```
colors_list[pageColorIndex] 
```

...因为它似乎显示为空。由于我们“知道” `colors_list`（尽管它可能值得调试检查）是一个有效的数组，所以问题必须是`pageColorIndex`由`findIndexByKeyValue()`;最初返回的。可能`findIndexByKeyValue`是返回null。

值得在条件语句上方插入行`console.log(obj[i][key])`并`console.log(value)`在再次运行代码时检查它们在控制台中的外观。特别注意十六进制值之前或之后的意外间距。您可能会发现该`pageColor`变量未按预期格式化，因此与数组对象中的任何十六进制值都不匹配并返回 null。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T15:11:24.010

**更新**- 根据 jcubic，这不适用于 JSON，所以我收回这个答案。

不确定这是否是您的全部问题，但您没有正确声明对象 - 键通常不是字符串。

代替：

```
{"num": "1B2-5","nam": "burntsienna","hex": "EA7E5D","com": "int2"} 
```

你要：

```
{ num: "1B2-5", nam: "burntsienna", hex: "EA7E5D", com: "int2"} 
```

# constraints - 删除尚未命名的约束？

> ID：15685312
> 
> 赞同：0
> 
> 时间：2013-03-28T15:07:09.293
> 
> 标签：constraints

我知道如何删除一个约束，但是如何删除一个尚未命名的约束。

在这里，我使用了没有名称的 Check 约束。

例子：

```
create table customers
(
 id int not null,
  name varchar(50) not null,
  age int not null check (age>=18),
  [Address] char(50),
  salary decimal(18,2),  
   primary key (id)
    ); 
```

我尝试使用以下命令

```
 alter table customers drop check (age) 
```

但是，它给出了不正确的语法错误。

有没有一种简单的方法来删除不是名称的约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:20:08.120

我找到了有同样问题的人并解决了！

看看这里 :>

[如何在不知道其名称的情况下删除 SQL 默认约束？](https://stackoverflow.com/questions/1430456/how-to-drop-sql-default-constraint-without-knowing-its-name)

# facebook - 无法使用 API 图表获取公开的 Facebook 状态

> ID：15685314
> 
> 赞同：2
> 
> 时间：2013-03-28T15:07:10.457
> 
> 标签：facebook, api, facebook-graph-api, public

我的问题很简单。我希望能够用图表看到这篇文章：

[http://www.facebook.com/midou.london.12/posts/125781047549534](http://www.facebook.com/midou.london.12/posts/125781047549534)

这篇文章是公开的，所以我输入：

```
graph.facebook.com/IDProfile_IDPost?access_token=USER_TOKEN ( i try with the app token too)

https://graph.facebook.com/100003529196134_125781047549534?access_token=USER_TOKEN 
```

但我收到“消息”：

```
 "Unsupported get request." 
```

我不明白，我可以从任何公共个人资料中获取每个帖子，除了只有文本的状态，这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T19:49:20.100

You can read posts of immediate friends through GRAPH API . for a random profile (not in friends list),the graph API returns an empty JSON.

Although there is a separate API [[https://developers.facebook.com/docs/public_feed](https://developers.facebook.com/docs/public_feed) ] which clearly says "Access to the Public Feed API is restricted to a limited set of media publishers and usage requires prior approval by Facebook. You cannot apply to use the API at this time.".

# r - data.table 不保留关键解决方法

> ID：15685315
> 
> 赞同：4
> 
> 时间：2013-03-28T15:07:12.597
> 
> 标签：r, data.table

`data.table`不保留做子集的关键

```
setkey(DT,a,b,c)
key(DT[,list(a,b)]) # return NULL 
```

有人有解决方法吗（XY 因此 Z 是 data.table）？我真的想这样做=>

```
Z = X[,list(a, b, c)][Y, mult='last'] 
```

注意：我可以

```
X2 = X[,list(a, b, c)]
setattr(X2,"sorted",c("a","b","c"))
Z = X2[Y, mult='last'] 
```

但我不想将 X 复制到 X2

编辑示例：

```
Y = data.table(a=seq(2,4),key="a")
X = data.table(a=seq(1,5),b=seq(2,6),c=sample(letters,5),key="a,b,c")
X[,list(a, b, c)][Y, mult='last']
Error in `[.data.table`(X[, list(a, b, c)], Y, mult = "last") : 
When i is a data.table (or character vector), x must be keyed 
```

* * *

**更新（eddi）：**从[1.8.11 版](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&revision=999&root=datatable)开始，此问题已得到修复，密钥保留在第一个子集中，因此结果为：

```
X[,list(a, b, c)][Y, mult='last']
#   a b c
#1: 2 3 k
#2: 3 4 z
#3: 4 5 u 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:15:51.867

试试这个：

```
setkey(X[,list(a, b, c)])[Y, mult='last'] 
```

或者，您可以执行 X[Y] 然后将所有其他列从 X 设置为 NULL

```
X[Y, mult="last"][, c(names_to_remove) := NULL] 
```

# php - 从 Wiki XML 语法中提取图像路径

> ID：15685324
> 
> 赞同：0
> 
> 时间：2013-03-28T15:07:43.917
> 
> 标签：php, regex

我尝试解析从 xml [wikipedia export获得的 Wikipedia XML](http://de.wikipedia.org/wiki/Spezial:Exportieren/)

在一种情况下，我需要提取所有图像路径。原始标记看起来像，

```
 [[Bild:nameOfImage.png|image description]] 
```

“Bild”也可以是“Image”、“File”或“Datei”

要提取图像的文本，我使用这个正则表达式。

```
'|\[\[.*\|.*\]\]|U' 
```

这很好用，如果在图像描述中不是其他的 '[[ .. ]]'，比如

```
[[Bild:nameOfImage.png|image Description with a [[new wiki link]] ]] 
```

我的问题是，如何修改正则表达式以获取第一个“[[”和**最后一个“]]”之间的****所有**文本，而不计算所有“[”和“]”字符。

 **提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:50:17.470

由于您使用的是 PHP，因此您可能能够使用[递归模式](http://php.net/manual/en/regexp.reference.recursive.php)。
考虑到您没有捕获任何内容：

```
/\[\[(((?>[^\[\]])|(?R))*)\]\]/U 
```

请注意，我没有尝试过这个正则表达式，因为我无法使用 PHP。

**编辑：**

```
preg_match('/\[\[(?>[^\[\]]|(?R))*\]\]/U', '[[Bild:nameOfImage.png|image Description with a [[new wiki link]] ]]', $array);
var_dump($array); 
```

似乎工作。**

# html - 使用 nth-child 设置多个项目的样式

> ID：15685325
> 
> 赞同：0
> 
> 时间：2013-03-28T15:07:45.913
> 
> 标签：html, css, css-selectors

您可以使用 nth-child 来设置样式，而不是奇数，偶数而是各种乱序项目？

我想设计 1,3,7,8 的样式，那我该怎么做呢？

演示[http://jsfiddle.net/nTZrg/50/](http://jsfiddle.net/nTZrg/50/)

```
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
<li>5</li>
<li>6</li>
<li>7</li>
<li>8</li>
<li>9</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:10:04.390

假设 1,3,7,8 是随机的，而不是某种模式，它相当简单：

[jsFiddle](http://jsfiddle.net/eJ79y/)

```
ul li:nth-child(1),
ul li:nth-child(3),
ul li:nth-child(7),
ul li:nth-child(8){
    background-color:blue;
    color: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:24:45.923

如果是随机数，我认为您需要 javascript 这是一个 jquery 实现 [http://jsfiddle.net/nTZrg/52/](http://jsfiddle.net/nTZrg/52/)

```
 <ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
<li>5</li>
<li>6</li>
 <li>7</li>
<li>8</li>
<li>9</li>
</ul>

var array = [1, 3, 7, 8]

for (i=0; i < array.length; i++) {
$('ul li').eq(array[i]).prev().addClass('blue')
}

 .blue {
     background-color:blue;
     color: white;
 } 
```

# mysql - mysql错误使用变量作为表名

> ID：15685329
> 
> 赞同：5
> 
> 时间：2013-03-28T15:07:58.313
> 
> 标签：mysql, sql, select

为什么我会收到此错误？

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `selectrecords`(tablename varchar(50))
begin
set @table_name=tablename;
set @sql_text=concat('Select * from @table_name');
prepare statement from @sql_text;
execute statement;
deallocate prepare statement;
end 
```

错误：

```
....to use near '@table_name' at line 1 
```

我的代码是正确的，但我不明白为什么....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:09:42.517

我想你的意思是，

```
CREATE PROCEDURE `selectrecords`(tablename varchar(50))
begin
    set @sql_text = concat('Select * from ', tablename);
    prepare statement from @sql_text;
    execute statement;
    deallocate prepare statement;
end 
```

即使在*动态*sql 中，您也不能参数化表名和列名，因此您唯一的选择是与字符串连接。只有值可以放在占位符中。

*   [MySQL 准备语法](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

* * *

**更新 1**

```
CREATE PROCEDURE `selectrecords`(tablename varchar(50))
begin
    set @val = idnumber;
    set @sql_text = concat('Select * from ', tablename, ' WHERE id = ?');
    prepare statement from @sql_text;
    execute statement USING @val;
    deallocate prepare statement;
end 
```

# c# - 使用 linq 的 xml 多对多连接

> ID：15685332
> 
> 赞同：0
> 
> 时间：2013-03-28T15:08:01.677
> 
> 标签：c#, xml, linq, join, many-to-many

我在编写正确的代码或提出问题时可能是错误的，但我正在寻求以下帮助。

我有一个具有多对多关系的 xml 文件，如下所示：

```
<ShowRoom>
  <Cars>
    <Car id="1" number="001" name="MyCar" >
      <Parts>
        <Part id="1" />
        <Part id="2" />
      </Parts>
    </Car>
    <Car id="2" number="002" name="YourCar" >
      <Parts>
        <Part id="2" />
        <Part id="3" />
        <Part id="4" />
      </Parts>
    </Car>
  </Cars>
  <Parts>
    <Part id="1" name="Tyre" active="true"/>
    <Part id="2" name="Window" active="true"/>
  </Parts>
</ShowRoom> 
```

与该对象相对应的是 follow

```
public class Car
{
    private int _id;
    public int Id
    {
        get { return _id; }
        set { _id = value; }
    }

    private string _number;
    public string Number
    {
        get { return _number; }
        set { _number = value; }
    }

    private string _name;
    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    private List<Parts> _listParts;
    public List<Parts> ListParts
    {
        get { return _listParts; }
        set { _listParts = value; }
    }
} 
```

我正在尝试的是读取 xml 并在汽车和零件之间加入，所以我会得到汽车对象及其所有零件的详细信息

```
 IEnumerable<XElement> xCar = xdoc.Element("ShowRoom").Element("Cars").Elements("Car");
                IEnumerable<XElement> xPart = xdoc.Element("ShowRoom").Element("Parts").Elements("Part");
                IEnumerable<Car> car = xCar.Join(
                    xPart,
                    c => c.Element("Parts").Element("Part").Attribute("id").Value,
                    p => p.Attribute("id").Value,
                    (c, p) =>
                    new Cars
                    {
                        Id = int.Parse(c.Attribute("id").Value),
                        Number = (string)c.Attribute("number").Value,
                        Name = (string)c.Attribute("name").Value,

                        ListParts =  
                        { 
                                new Parts
                                    {
                                        Id = int.Parse(p.Attribute("id").Value),
                                        Name = (string)p.Attribute("name").Value,
                                        Active = bool.Parse(p.Attribute("active").Value)
                                    }
                        }
                    }); 
```

这里的问题是我不知道如何像上面的代码那样让所有零件都与汽车相撞，这显然是错误的

```
 ListParts =  
                        { 
                                new Parts
                                    {
                                        Id = int.Parse(p.Attribute("id").Value),
                                        Name = (string)p.Attribute("name").Value,
                                        Active = bool.Parse(p.Attribute("active").Value)
                                    } 
```

那么如何使用上面相同的代码完成它，或者如果有其他好的方法，请与我分享。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:16:36.290

我强烈建议建立一个零件字典，*然后*建立汽车列表：

```
Dictionary<int, Part> partsById = doc.Root
    .Element("Parts")
    .Elements("Part")
    .Select(p => new Parts
            {
                Id = (int) p.Attribute("id"),
                Name = (string) p.Attribute("name"),
                Active = (bool) p.Attribute("active")
            })
    .ToDictionary(part => part.Id); 
```

请注意，我已重命名`Parts`为`Part`，因为每个对象仅代表一个部分 - 并且我已经删除了所有解析，使用`XAttribute`.

然后，当您构建汽车列表时，您可以使用：

```
...
ListParts = c.Element("Parts")
             .Elements("Part")
             .Select(p => partsById[(int) p.Attribute("Id")])
             .ToList(); 
```

您还应该研究自动实现的属性，这会将您的`Car`类减少到几行代码：

```
public class Car
{
    public int Id { get; set; }
    public string Number { get; set; }
    public string Name { get; set; }
    public List<Parts> ListParts { get; set; }
} 
```

# google-drive-api - Google Drive Files.list：500 错误

> ID：15685335
> 
> 赞同：4
> 
> 时间：2013-03-28T15:08:05.673
> 
> 标签：google-drive-api

对于我们的应用程序，我们使用具有 2 条腿授权的 Google Drive SDK。我们使用 Drive SDK 很长时间了，但今天我们遇到了 Files.list API 的新问题（[https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)）。对于某些来自不同域的用户，我们收到以下错误：

> {“错误”：{“代码”：500，“消息”：空}}

Drive SDK 一切正常吗？这个错误是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:08:58.420

我建议阅读这篇[文章](https://stackoverflow.com/a/13543366/453348)，它帮助我使用 Android 配置和连接到 Google Drive

**编辑：**

我有相同的 500 错误服务器，为了避免这个错误谷歌[`Exponential backoff`](https://developers.google.com/drive/manage-uploads?hl=en#exp-backoff)根据他们推荐：

> 指数退避是网络应用程序的标准错误处理策略，其中客户端在越来越长的时间内定期重试失败的请求。如果大量请求或繁重的网络流量导致服务器返回错误，指数退避可能是处理这些错误的好策略。相反，它不是处理与速率限制、网络容量或响应时间无关的错误的相关策略，例如无效的授权凭证或文件未找到错误。
> 
> 使用得当，指数退避可以提高带宽使用效率，减少获得成功响应所需的请求数量，并最大限度地提高并发环境中的请求吞吐量。

**例子：**

安卓代码：

```
FileList files = null;

for (int n = 0; n < 5; ++n) {

   try {
      setStatus("trying n = " + n);
      files = service.files()
        .list()
        .setMaxResults(1)
        .setQ("mimeType = 'application/vnd.google-apps.folder' and title = 'folder_title'")
        .execute();
   }
   catch (GoogleJsonResponseException e)
   {
      if (e.getDetails().getCode() == 500) {
        try {
            Thread.sleep((1 << n) * 1000 + randomGenerator.nextInt(1001));
            setStatus("sleep() n = " + n);
        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            setStatus("InterruptedException n = " + n + " " + e1.getMessage());
            e1.printStackTrace();
        }
      }
   }

} 
```

我已经测试了这段代码，并在最后一次尝试中成功连接

Google 建议使用指数退避与 4xx 和 5xx 服务器[错误](https://developers.google.com/drive/handle-errors)

[4xx 服务器](https://developers.google.com/drive/handle-errors#implementing_exponential_backoff)错误主要是身份验证问题

# php - concat 显示名字和姓氏，但只有名字保存到 mysql 数据库

> ID：15685336
> 
> 赞同：0
> 
> 时间：2013-03-28T15:08:06.790
> 
> 标签：php, mysql, mysqli

我已经在网上搜索了几个小时，但我不知道为什么如果它正确显示在表单中，为什么它不能正确保存到 mysql 数据库中？

在我的表格上，我有一个显示学生姓名的下拉列表，我使用以下代码获取下拉列表的名字和姓氏：

```
<?php
$stud_sql = "SELECT CONCAT (First_name,' ', Last_name) AS fullname FROM students";
$stud_results = mysqli_query($db_conx, $stud_sql);
        echo "<select  name='fullname'>";
        while ($row = mysqli_fetch_array($stud_results, MYSQLI_ASSOC)){
            $fullname = $row['fullname'];
            echo "<option  value=".$row['fullname'].">" . $row['fullname'] . "</option>";
            }
            echo "</select>";
            ?> 
```

表单上的下拉列表完美显示名字姓氏，但是当我尝试发布到我的 mysql 数据库时，它只保存名字而不是两者？

以下是发布到数据库的代码：

```
if (isset($_POST['fullname']) && ($_POST['fullname'] !='')){
$studentname = $_POST['fullname'];

    if (empty($studentname))
    {
        $errors[] = "Missing student name.";
    }

if (count($errors) > 0)
    {
        //there were validation errors, prepare error message
        $response = "<span style=\"color:red;\">";
        $response .= "the following errors occured:\n";
        $response .= "<ul>";
        $response .= '<li>' .implode('</li><li>', $errors) . '</li>';
        $response .= "</ul>\n";
        $response .= "</span>\n";
    }
else
    {
        //No validation errors, save the dat to database
        $studentname = mysqli_real_escape_string($db_conx, $studentname);
$sql = "INSERT INTO incidentform  (`studentname`) value ('$studentname')";
$query = mysqli_query($db_conx, $sql); 
```

所以为了清楚起见， concat 会显示例如 funky monkey 但只有 funky 会保存到数据库中。

好的 marc B 建议了这些更改，这些更改会将全名保存到数据库中，但现在下拉列表中只显示 1 个名称？

```
Name of Student:
        <select  name='fullname'>
        <option  value="$id"><?php echo $fullname; ?></option>
        </select>
and
$stud_sql = "SELECT id, CONCAT (First_name,' ', Last_name) AS fullname FROM students";
$stud_results = mysqli_query($db_conx, $stud_sql);

   while ($row = mysqli_fetch_array($stud_results, MYSQLI_ASSOC)){

            $fullname = $row['fullname'];
} 
```

关于如何取回完整列表的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:19:07.053

看起来您没有正确使用数据库。您应该为学生选择一个 ID，以及他们的姓名，例如

```
SELECT id, CONCAT(first_name, ' ', last_name)
FROM students 
```

然后使用

```
<option value="$id">$fullname</option> 
```

以你的形式。

提交后，您将该 $id 值插入到您的事件表单中，现在您已经基于该公共 id 字段在事件和学生之间建立了链接。你的系统基本上会搞砸任何碰巧同名的学生。例如，“John Smith”（id #42）被拘留，但您只在事件报告中存储“John Smith”。现在约翰史密斯（#37）和约翰史密斯（#203）也有麻烦了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T15:12:29.153

您试图插入包含全名的字段“学生名”，但您从“名字”和“姓氏”中检索它。要么在正确的字段中插入名字和姓氏（我推荐），要么在字段中插入全名。

编辑 - 看起来有人正在玩得开心，立即投票否决答案，长大了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T15:12:35.047

您有一个 HTML 错误。

在这一行

```
"<option  value=".$row['fullname'].">" 
```

您需要在`$row['fullnane']`...之间添加单引号。

```
"<option  value='".$row['fullname']."'>" 
```

# c# - 用户输入 - 数据验证

> ID：15685341
> 
> 赞同：1
> 
> 时间：2013-03-28T15:08:15.200
> 
> 标签：c#, winforms, user-input, validation

我通过表单中的文本框接受用户的字符串值。然后在针对数据库表的查询中使用它，虽然它是一个字符串，但我要求输入的唯一字符是整数。

我尝试了各种方法，例如`INT32`and`TryParse`函数。`IF ELSE`但是，在尝试执行或`TRY CATCH`阻止任何操作直到输入“可接受”时，我遇到了问题。

什么是只允许在文本框中输入整数，或者识别除整数以外的任何内容并导致执行失败的最简单方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:11:15.963

是的，您可以使用[`int.TryParse`](http://msdn.microsoft.com/en-us/library/vstudio/f02979c7.aspx)：

```
string selectSql = "SELECT * FROM SomeTable WHERE ID = @ID";

int id;
if (!int.TryParse(txtID.Text, out id))
    MessageBox.Show("ID must be an integer.");
else
{
    using (var myCon = new SqlConnection(connectionString))
    using (var selectCommand = new SqlCommand(selectSql, myCon))
    {
        selectCommand.Parameters.AddWithValue("@ID", id);
        myCon.Open();
        using (var reader = selectCommand.ExecuteReader())
        {
            // do something with the records
        }
    }
} 
```

您也可以使用[`NumericUpDown`控件](http://msdn.microsoft.com/en-us/library/729xt55s.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:09:09.763

使用 NumericUpDown 控件而不是 TextBox

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:28:02.980

我知道 3 种可能的方法来做到这一点：

1.  删除文本框的 TextChanged 事件中的无效字符：

    ```
    private void txb_TextChanged(object sender, EventArgs e)
    {
    int selStart = txb.SelectionStart;

    string result = txb.Text;

    // remove all that aren't digits
    result = Regex.Replace(result, @"[^0-9]", string.Empty);

    txb.Text = result;

    // move cursor
    if (selStart > txb.Text.Length)
        txb.Select(txb.Text.Length, 0);
    else txb.Select(selStart, 0);
    } 
    ```

2.  扩展 TextBox 控件并忽略用户按下的所有无效键

    ```
    public class IntegerTextBox : TextBox
    {
    private Keys[] int_allowed = {
             Keys.D1,
             Keys.D2,
             Keys.D3,
             Keys.D4,
             Keys.D5,
             Keys.D6,
             Keys.D7,
             Keys.D8,
             Keys.D9,
             Keys.D0,
             Keys.NumPad0,
             Keys.NumPad1,
             Keys.NumPad2,
             Keys.NumPad3,
             Keys.NumPad4,
             Keys.NumPad5,
             Keys.NumPad6,
             Keys.NumPad7,
             Keys.NumPad8,
             Keys.NumPad9,
             Keys.Back,
             Keys.Delete,
             Keys.Tab,
             Keys.Enter,
             Keys.Up,
             Keys.Down,
             Keys.Left,
             Keys.Right
        };
     protected override void OnKeyDown(KeyEventArgs e)
            {
                base.OnKeyDown(e);
                if (e.Modifiers == Keys.Control) return;

                if (!int_allowed.Contains(e.KeyCode))
                {
                    e.SuppressKeyPress = true;
                }
            }
        }
    } 
    ```

3.  处理 KeyDown 和/或 KeyPress 事件并在按下不允许的东西时取消它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:13:38.923

您可以编写自己的继承自 TextBox 的类：

```
 public class NumericTextBox : TextBox
{
    protected override void OnKeyPress(KeyPressEventArgs e)
    {
        base.OnKeyPress(e);

        var key = e.KeyChar + "";
        if (key == "\b")
            return;
        double number;
        string newText = Text.Remove(SelectionStart, SelectionLength).Insert(SelectionStart, key);
        if (newText.Length == 1 && key == "-")
            return;
        if (!double.TryParse(newText, NumberStyles.Float, CultureInfo.InvariantCulture, out number))
        {
            e.Handled = true;
        }
    }

    public double Value
    {
        get { return Text.Length == 0 ? 0 : double.Parse(Text, CultureInfo.InvariantCulture); }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:18:31.203

作为另一种选择，您可以使用文本框 TextChanged 事件。

每次更改值时 int.TryParse 文本，如果它不起作用，只需清除文本框（或保留最后一个起作用的值并在失败时恢复为该值）。

# jquery - mouseenter 翻转效果仅在第二次进入后有效

> ID：15685343
> 
> 赞同：1
> 
> 时间：2013-03-28T15:08:16.350
> 
> 标签：jquery, mouseenter

*我试图在这个特定问题上找到类似的帖子，但收效甚微，因此希望对 JQuery 更有经验的人可以阐明我的问题。我目前在一个投资组合网站上工作，即很多图像。当您将鼠标悬停在网站上显示的缩略图之一上方时，我想制作 Jquery 翻转效果。*

效果本身已经实现，但它带有一种错误。**每当我刷新页面或重新查看页面时，每当我的鼠标进入应该触发 Jquery 效果的图像容器元素时，它第一次不会这样做，但是当我第二次尝试而不刷新页面时，效果就在那里。**

这是基本的html标记：

```
<section class="main">
    <div class="wrapper">
        <article class="ImageContainer">
             <a href="#">
                 <img class="back" src="Images/Image1.jpg" alt="Image1"/>
                 <span class="over" style="display: none;">
                     <h2>Title</h2>
                     <p>Watch Project</p>
                 </span>
            </a>
        </article>
    </div>
</section> 
```

如您所见，我已经使用“显示：无”解决方案解决了我的“翻转效果”，后来我让我的 Jquery 代码“淡入”以使其在 mouseenter 效果上可见。

下面是 span class="over" 的 CSS，可能不需要显示，但只是以防万一。

```
.over {
    width: 300px;
    height: 300px;
    background-image:url(Images/over.png);
    position: absolute;
    top: 0px;
    left 0px;
} 
```

现在对于我的 JQuery

```
$(document).ready(function(){       
    $(".ImageContainer").mouseenter(function(){
        $(this).children('a').children('span').fadeIn(200);
    });
    $(".ImageContainer").mouseleave(function(){
        $(this).children('a').children('span').fadeOut(200);
    });
}); 
```

似乎只有在浏览器中查看时才会出现问题，这个 jsfiddle 似乎没有问题。我不知道为什么。我所有到我的其他文档的链接也可以使用，并且我已经链接了 jquery 和 jquery UI。

[http://jsfiddle.net/LRdR9/](http://jsfiddle.net/LRdR9/)

**我的问题的解决方案：我的 .over 类没有“显示：块；” 这导致浏览器看不到它。在第二次 mouseenter 时，它会自动将其放在那里。它欺骗了我，以为我还有另一个问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:39:24.020

一切似乎都在[jsFiddle](http://jsfiddle.net/LRdR9/)工作。

请注意，在您的 jsFiddle 中，您正在运行您的代码`onload`- 确保您在文件本身中执行此操作（确保将 jQuery 放在正文中，而不是头部）。此外，请确保您在多个浏览器中对其进行测试。

Ps 您可以将代码缩短为以下内容。

```
$(document).ready(function(){    
   $(document).on('mouseenter mouseleave', '.ImageContainer', function () {
        $('a > span', this).fadeToggle(200);
   });
}): 
```

示例[jsFiddle](http://jsfiddle.net/LRdR9/1/)。

# iphone - 如何根据当前日期获取下一个 15 天的日期？

> ID：15685347
> 
> 赞同：4
> 
> 时间：2013-03-28T15:08:34.730
> 
> 标签：iphone, ios, objective-c

目前我可以使用以下代码获取 iPhone 的当前日期

```
NSDate* date = [NSDate date];
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd"];
NSString* currentDateStr = [formatter stringFromDate:date];
NSLog(@"User's current Date:%@",currentDateStr); 
```

但我想从当前日期获得下一个 15 天的日期，我怎样才能得到呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:11:46.537

试试这个：

```
NSCalendar* calendar = [[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar] autorelease];
NSDateComponents* components = [[[NSDateComponents alloc] init] autorelease];
components.day = 15;
NSDate* newDate = [calendar dateByAddingComponents: components toDate: self.date options: 0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:21:17.320

```
NSDate *todayDate = [NSDate date];
NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
[dateComponents setDay:+15];
NSDate *afterfifteenDays = [[NSCalendar currentCalendar] dateByAddingComponents:dateComponents toDate:todayDate options:0];
NSLog(@"todayDate: %@", todayDate);
NSLog(@"afterfifteenDays: %@", afterfifteenDays); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T15:13:53.833

试试这个：

```
NSTimeInterval totalOffset = /*time to add - in seconds */
NSDate *today = [NSDate date];
NSDate *endWithTZ = [today dateByAddingTimeInterval:totalOffset]; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-28T15:12:48.247

可能有更好的方法（我正在看这个问题，看看是否有），但这是我目前使用的：

```
+ (NSDate *)offsetFromDate:(NSDate *)fromDate withDays:(int)days 
{
    NSTimeInterval timeInterval = (days * 86400);
    NSDate *date = [[NSDate alloc] initWithTimeInterval:timeInterval sinceDate:fromDate];    
    return date;
} 
```

如果你用谷歌搜索一天的秒数，你会得到 86400 的值。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-28T15:14:51.680

```
 NSLog(@"%@", [date dateByAddingTimeInterval:15*24*60*60]); 
```

# android - 为什么 Loopj 库在 android 模拟器上运行良好，而不能在真实设备上运行？

> ID：15685348
> 
> 赞同：0
> 
> 时间：2013-03-28T15:08:35.187
> 
> 标签：android, json, httprequest, loopj

我使用这个库（[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)）从我的网站下载一个 json，在模拟器中工作正常，但是当我在真实设备中尝试时不起作用（平板电脑和智能手机）它不进入函数 onSuccess。有人可以告诉我为什么或我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:02:50.593

我自己在几个设备上遇到了这个问题，它很可能与许多人在这里报告的相同，几个月后仍然存在：

[https://github.com/loopj/android-async-http/issues/144](https://github.com/loopj/android-async-http/issues/144)

我个人切换到[http://code.google.com/p/basic-http-client/](http://code.google.com/p/basic-http-client/)并取得了很大的成功。

不完全是直接解决问题的方法，但仍然如此。

# razor - 使用 IE8 时，Kendo Grid 无法正确从数据库中填充数据

> ID：15685351
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:08:44.140
> 
> 标签：razor, asp.net-mvc-4, internet-explorer-8, kendo-ui, kendo-grid

我一直在尝试让剑道网格正确填充到 IE8 内部（使用该程序的人被困在 Windows XP 上）。它在 IE9、Firefox 和 Chrome 中运行良好。

这是我正在使用的代码。

我的 cshtml 文件

```
<!DOCTYPE html>

@model IEnumerable<SymPro.ViewModels.InvestViewModel>

@{
    ViewBag.Title = "List Accounts";
}

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<font size ="1">
@(Html.Kendo().Grid<SymPro.ViewModels.InvestViewModel>()
                                    .Name("gridInvest")
                                    .Columns(columns =>
                                    {
                                        columns.Bound(p => p.asset_num).Title("Invest. <br/> No.");
                                        columns.Bound(p => p.cusipnum).Title("Security <br/> ID").Width(80);
                                        columns.Bound(p => p.rempar).Title("Remaining <br/> Par").Format("{0:0.00}").Width(100);
                                        columns.Bound(p => p.issuer).Title("Issuer");
                                        columns.Bound(p => p.purdate).Title("Purchased").Width(100);
                                        columns.Bound(p => p.maturdate).Title("Mature/Sell").Width(100);
                                        columns.Bound(p => p.invtype).Title("Type");
                                        columns.Bound(p => p.fund_num).Title("Fund");
                                        columns.Bound(p => p.nomrate).Title("Rate").Format("{0:0.00}");
                                        columns.Bound(p => p.facevalue).Title("Par <br/> Value").Format("{0:0.00}");
                                        columns.Bound(p => p.groupcd).Title("Group");
                                        columns.Bound(p => p.sectorcd).Title("Sector");
                                        columns.Bound(p => p.identity_column).Title("")
                                            .ClientTemplate(@Html.ActionLink("Details", "Details", new { id = "#= identity_column#" }, new { style = "color:blue" })
                                            .ToHtmlString()
                                            );
                                        columns.Bound(p => p.identity_column).Title("")
                                            .ClientTemplate(@Html.ActionLink("Edit", "Edit", new { id = "#= identity_column#" }, new { style = "color:blue" })
                                            .ToHtmlString()
                                            );
                                        columns.Bound(p => p.identity_column).Title("")
                                            .ClientTemplate(@Html.ActionLink("Delete", "Delete", new { id = "#= identity_column#" }, new { style = "color:blue" })
                                            .ToHtmlString()
                                            );
                                    })                                    
                                    .DataSource(dataSource => dataSource
                                        .Ajax()
                                        .Read(read => read.Action("Invest_Read", "Invest"))                                        
                                    )
                                    .Sortable()
                                    .Scrollable(scr=>scr.Height(450))                   

                                )
    </font> 
```

我的 Invest_Read 操作结果

```
public ActionResult Invest_Read([DataSourceRequest]DataSourceRequest request)
        {
            decimal initzero = 0000000000000.00M;
            string initcode = "";
            string DefPublCd = "";

            var dbAgencyQuery = (from d in db.dbagency
                                 select d).FirstOrDefault();

            if (dbAgencyQuery != null)
            {
                DefPublCd = dbAgencyQuery.defpublcd;
            }

            DateTime general = new DateTime(1900, 1, 1);
            DateTime? empty = null;

            var accounts = (from i in db.invest
                            join s in db.dbsumcalcs on i.asset_num equals s.asset_num into i_s
                            from subi_s in i_s.DefaultIfEmpty()
                            join f in db.fisectasgn on i.ficspkey equals f.cspkey into i_f
                            from subi_f in i_f.DefaultIfEmpty()
                            join e in db.sector on subi_f.syseckey equals e.syseckey into f_e
                            from subf_e in f_e.DefaultIfEmpty()
                            where subf_e.publcd == DefPublCd
                            orderby i.maturdate
                            select new InvestViewModel
                            {
                                asset_num = i.asset_num,
                                cusipnum = i.cusipnum,
                                rempar = (subi_s == null ? initzero : subi_s.rempar),
                                issuer = i.issuer,
                                purdate = (i.maturdate == general || i.maturdate == DateTime.MinValue ? empty : i.purdate),
                                maturdate = (i.maturdate == general || i.maturdate == DateTime.MinValue ? empty : i.maturdate),
                                invtype = i.invtype,
                                fund_num = i.fund_num,
                                nomrate = i.nomrate,
                                facevalue = i.facevalue,
                                creditcode = (subi_s == null ? initcode : subi_s.creditcode),
                                credrte2 = (subi_s == null ? initcode : subi_s.credrte2),
                                groupcd = (subf_e == null ? initcode : subf_e.groupcd),
                                sectorcd = (subf_e == null ? initcode : subf_e.sectorcd),
                                identity_column = i.identity_column
                            });

            DataSourceResult result = accounts.ToDataSourceResult(request);

            return Json(result, JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:59:06.863

确保您已按照文档中的说明将 kendo.aspnetmvc.js[文件](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/introduction#downloading-and-installing-kendo-ui-complete-for-asp.net-mvc)添加到您的布局页面。此外，[故障排除](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting)可能会派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:40:42.920

请检查使用浏览器开发工具生成的 html。我认为 IE8 不支持 html5 和剑道网格可能正在使用自定义属性，如 data-xxxx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:00:44.897

我想出了我的问题。在我的视图模型 InvestViewModel 中，我有一个名为 @class 的变量，它在程序的其他地方被使用，但是当它被传递到网格时，它在 Kendo 中引起了一个问题，即使它是 Null。

# spring - Spring JDBC - 防止日志记录 - 信息：添加了名为 #update-count-1 的默认 SqlReturnUpdateCount 参数

> ID：15685354
> 
> 赞同：4
> 
> 时间：2013-03-28T15:08:52.230
> 
> 标签：spring, logging, spring-jdbc

我的独立应用程序使用 Spring JDBC。

我在 System.out 中看到很多以下语句

```
Mar 28, 2013 6:42:12 PM org.springframework.jdbc.core.JdbcTemplate extractReturnedResults
INFO: Added default SqlReturnUpdateCount parameter named #update-count-1 
```

如何防止这些日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:52:33.740

我通过跳过未声明的结果来解决这个问题，反正我不需要

```
JdbcTemplate jt = new JdbcTemplate(dataSource);
jt.setSkipUndeclaredResults(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-23T09:19:19.797

您可以按以下格式编写函数调用：

```
Select function_name(args) from dual; 
```

通过上述查询，您可以使用 JdbcTemplate 中的任何匹配函数

希望这可以帮助您解决问题。

# javascript - node.js：奇怪的 setUTCMonth 结果

> ID：15685356
> 
> 赞同：1
> 
> 时间：2013-03-28T15:08:55.993
> 
> 标签：javascript, node.js, date

在最新的 0.8 和 0.10 版本的节点中运行此代码：

```
> date = new Date(2013, 0, 1)
Tue Jan 01 2013 00:00:00 GMT+0200 (EET)
> date.setUTCMonth(5)
1341180000000
> date
Mon Jul 02 2012 01:00:00 GMT+0300 (EEST) 
```

`.setUTCMonth`在被调用后，年份从 2013 年更改为 2012年。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:21:16.273

> 调用 .setUTCMonth 后，年份从 2013 年更改为 2012 年。

不，它没有。

您的本地时区是`GMT+0200`- 这意味着您*看到*的日期`Tue Jan 01 2013 00:00:00 GMT+0200`实际上比格林威治标准时间早两个小时，所以它是 2012 年 12 月 31 日 22:00:00。

并更改该日期的月份*，*以`5`使您修改的日期相应地在 2012 年 7 月结束。

# opengl - Windows 中的 OpenGL 雾坐标扩展

> ID：15685359
> 
> 赞同：0
> 
> 时间：2013-03-28T15:08:58.993
> 
> 标签：opengl

我正在尝试在 Windows 下将雾坐标扩展与 OpenGL 一起使用。以下是我的代码的前几行：

```
#include <windows.h>
#include <gl\glut.h>
#include "GLEXT.h"

#define GL_FOG_COORDINATE_SOURCE_EXT    0x8450      
#define GL_FOG_COORDINATE_EXT       0x8451                  

PFNGLFOGCOORDFEXTPROC glFogCoordfEXT = NULL;

glFogCoordfEXT = (PFNGLFOGCOORDFEXTPROC) wglGetProcAddress("glFogCoordfEXT"); 
```

如果是这样，编译器会提示找不到 glFogCoordfEXT。但是一旦我把

```
glFogCoordfEXT = (PFNGLFOGCOORDFEXTPROC) wglGetProcAddress("glFogCoordfEXT"); 
```

雾参数设置前，编译通过，程序运行良好。

尽管我经常使用 Windows，但我不熟悉 Windows 特定的函数调用。谁能告诉我这是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:33:39.243

在 Microsoft Windows 上，您使用一个库（the `.lib`one）进行编译，并使用不同的库（您`.dll`的库）运行。Microsoft 控制着编译库的内容，但供应商可以替换运行时库。在 OpenGL 的情况下，编译库相当老了（仅支持 OpenGL 1.1 函数和一些扩展），并且由于该库提供了编译器链接所需的导出函数，因此不包含新的 OpenGL 函数。因此，需要使用*函数指针*，因为它们可以在运行时从 .dll 中检索。该函数`wglGetProcAddress()`执行该函数检索，并且您在大写字母中看到的所有这些类型（例如，`PFNGLFOGCOORDFEXTPROC`）都是您可以使用的函数的类型定义`wglGetProcAddress()`。因此，为了使用您的`glFogCoordfEXT()`函数，您需要在调用它之前从 .dll 中检索它。`wglGetProcAddress()`通常，您应该在程序开始时（但在您创建了 OpenGL 上下文之后）收集所有需要用于获取初始化代码的函数。

另一点：您应该验证适当版本的 OpenGL 是否可用（通过调用`glGetString(GL_VERSION)`，并且支持您可能需要的任何扩展（通过调用`glGetString(GL_EXTENSIONS)`并解析字符串，或者如果您使用的是更新的 OpenGL，调用`glGetStringi()`get单独的扩展字符串）。 如果该函数在您的 OpenGL 实现中不可用，将`wglGetProcAddress()`返回`NULL`。它将返回一个有效的函数指针可用，但这并不一定意味着您需要的功能存在（这就是为什么您应该检查扩展字符串）。这种情况很少见，但可能由于扩展交互而发生。

# angularjs - 如何判断在 Angular-UI 中选择了哪个引导选项卡

> ID：15685360
> 
> 赞同：36
> 
> 时间：2013-03-28T15:08:59.827
> 
> 标签：angularjs, twitter-bootstrap, angular-ui, angular-ui-bootstrap, bootstrap-tabs

[在Angular UI](http://angular-ui.github.com/bootstrap/)中使用 Bootstrap 选项卡时，有没有办法知道选择了哪个选项卡？

我尝试查看窗格数组，但切换选项卡时它似乎没有更新。可以在选择选项卡时指定回调函数吗？

更新代码示例。

该代码非常遵循 Angular UI 引导页面中的示例。

标记：

```
<div ng-controller="TabsDemoCtrl">
    <tabs>
        <pane ng-repeat="pane in panes" heading="{{pane.title}}" active="pane.active">
            <div ng-include="pane.template"></div>
        </pane>
    </tabs>
</div> 
```

控制器：

```
var TabsCtrl = function ($scope) {
  $scope.panes = [
    { title:"Events list", template:"/path/to/template/events" },
    { title:"Calendar", template:"/path/to/template/calendar" }
  ];
}; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-28T18:10:39.440

实际上这非常简单，因为每个都`pane`公开了`active`支持 2-way 数据绑定的属性：

```
<tabs>
    <pane ng-repeat="pane in panes" heading="{{pane.title}}" active="pane.active">      
        {{pane.content}}
    </pane>
</tabs> 
```

然后可以很容易地找到一个活动选项卡，例如：

```
$scope.active = function() {
    return $scope.panes.filter(function(pane){
      return pane.active;
    })[0];
}; 
```

这是一个工作的[笨蛋](http://plnkr.co/edit/fEvOtL?p=preview)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-21T23:57:28.630

如果您没有中继器，请将选项卡（或跨度）活动绑定到数组

```
 <tab active="tabActivity[0]">...</tab>
 <tab active="tabActivity[1]">...</tab> 
```

在你的控制器中

```
$scope.tabActivity=[false,false]; 
```

然后你可以得到活动标签

```
$scope.tabActivity.indexOf(true) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-28T20:56:17.413

我通过在控制器上添加一种方法（onTabSelect）并从 Tab 的 ng-click 事件中调用它来解决它。以下解决方案对我有用，请[查看此操作](http://plnkr.co/edit/87iGFTgNW0731Z1H1b4G?p=preview)

```
function myTabController($scope) {
  $scope.onTabSelect = function(tabName) {
    $scope.selectedTabName = tabName;
    console.log("Changed tab to " + tabName);
  }

  <tabset>
    <tab ng-click="onTabSelect('A')">
      <tab-heading>
        A
      </tab-heading>
    </tab>
    <tab ng-click="onTabSelect('B')">
      <tab-heading>
        B
      </tab-heading>
    </tab>
  </tabset> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-19T11:11:04.893

我的答案是针对您手动放置选项卡并且使用 angular ui boostrap 库的情况，您可以使用该`select`属性

```
<uib-tabset class="main-nav">
  <uib-tab select="showTab('a')">
    <uib-tab-heading>a</uib-tab-heading>
    <div class="tab-content"> <span>a</span></div>
  </uib-tab>
  <uib-tab select="showTab('b')">
    <uib-tab-heading>b</uib-tab-heading>
    <div class="tab-content"> <span>b</span></div>
  </uib-tab>
</uib-tabset> 
```

在`showTab`传入`select`属性的函数中，您可以检查您的选项卡是否像我的情况一样按其名称选择。

完整示例来自 angular ui，请[注意](http://plnkr.co/edit/tc9lZWIz6kjS2WqmITXW?p=preview)`select`：

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-15T09:54:23.023

接受的答案仅适用于动态选项卡。

对于静态选项卡，您可以将指令的`active`属性设置`uib-tabset`为范围属性，并将其与选项卡索引进行比较以找到活动选项卡。

例如，在下面的代码中，我这样做是为了在活动选项卡标题上设置一个类（我可以使用`active`ui.bootstrap 添加的类并获得相同的结果，我这样做是一个例子）：

```
angular.module('test', ['ngAnimate', 'ui.bootstrap']);
```

```
@import url("https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css");
 .test {
  background: dodgerblue;
}
```

```
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-animate.js"></script>
<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.3.3.js"></script>

<div ng-app="test">
  <uib-tabset active="active">
    <uib-tab index="0">
      <uib-tab-heading ng-class="{test:active==0}">Static title1</uib-tab-heading>Static content1
    </uib-tab>
    <uib-tab index="1">
      <uib-tab-heading ng-class="{test:active==1}">Static title1</uib-tab-heading>Static content2</uib-tab>
    <uib-tab index="2">
      <uib-tab-heading ng-class="{test:active==2}">Static title1</uib-tab-heading>Static content3</uib-tab>
  </uib-tabset>
</div>
```

# spring - 接口注入 beans.xml

> ID：15685364
> 
> 赞同：1
> 
> 时间：2013-03-28T15:09:12.323
> 
> 标签：spring, spring-mvc, dependency-injection

我对 springs 有点陌生，我正在研究 springs3 MVC 项目。我已经阅读了有关 spring IoC 和 DI 的信息。基本上它支持构造函数和设置器 DI。但我想使用接口注入。我确实搜索了整个谷歌，浏览了各种示例，但找不到任何令人信服的示例。

我有`Interface`发言权`IntA`及其实施`class IntAImpl`。我想在`beans.xml`, like中定义它的关系，`IntA A = new IntAImpl();`然后我可以`bean IntA`直接注入。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:11:30.747

像这样：

```
@Autowired(value = "intA")
public class IntAImpl implements IntA {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:54:26.140

好吧，我得到了我正在搜索的内容...我有 3 个类`IntA, IntAImpl, and Service`（顾名思义，`IntA`是一个`interface`，`IntAImpl`是它的实现类和`service`对类方法的类调用`IntA`）

我创建了一个`bean`for `IntAImpl`in `beans.xml`。然后我将bean注入到`IntA`我的服务类中，就像这样

`IntA = (IntA)context.getBean("IntAImpl");`

我`beans.xml`是这样的

`<bean id="IntAImpl" class="com.IntAImpl" autowire="byType"></bean>`

所以这就是我实现接口注入的方式

（可能我的问题可能具有误导性，对此感到抱歉）

# asp.net - NHibernate.TypeMismatchException：提供了错误类型的 id。预期 system.Decimal 得到 system.string

> ID：15685366
> 
> 赞同：0
> 
> 时间：2013-03-28T15:09:19.520
> 
> 标签：asp.net, sql-server-2008, c#-4.0, nhibernate, nhibernate-mapping

我在我的应用程序中使用 Nhibernate。当我想保存一个新对象时，有时但很少 - 不是一直（这让我感到惊讶和疯狂） - 我遇到了一个错误，称为：

> NHibernate.TypeMismatchException：
> 提供了错误类型的 id。预期 system.Decimal 得到 system.String

当我在计算机和平板电脑中运行程序时，不会出现此错误。但是我的客户通常会遇到此错误...尤其是当他们想在办公室外使用平板电脑保存新记录时。用外界的话说，我的意思是在平板电脑中，互联网连接是通过 mobil sim 卡提供的。他们去房屋获取人员信息。无论如何，有时他们可以一次插入一条新记录，但是对于第二条记录，错误再次发生……错误之后，无法再次插入新记录。因此，他们注销了应用程序，当他们想再次登录时，会显示相同的错误并且无法登录。

数据库是 MSSQL。id 是 PK 和十进制类型。自动增量是真的。

我无法重现我身边的问题，所以很难追查原因是什么。最大的问题是，它不会一直发生......搜索原因大约 2-3 天......但还没有提出任何解决方案......奇怪的错误！

hbm 文件是：

哈斯塔.hbm.xml

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
<class name="DataLayer.DBStructure.Hasta,DBStructure" table="Hasta" lazy="true">
<id name="Id" column="id" type="Decimal">
  <generator class="native" />
</id>
<property name="Aktiflik" column="Aktiflik" type="Boolean" not-null="true" />
<many-to-one name="Hane" column="HaneId" cascade="none" />
<many-to-one name="Iletisim" column="IletisimId" cascade="none"/>
<many-to-one name="HastaIsco" column="HastaIscoId" cascade="none"/>
<many-to-one name="HastaNace" column="HastaNaceId" cascade="none"/>
<property column="KayitTarihi" type="DateTime" name="KayitTarihi" not-null="true" />
<property column="KullaniciId" type="string" name="KullaniciId" not-null="true" />
<bag name="HastaCokluParametreDeger" inverse="true" lazy="true" cascade="all">
  <key column="HastaId" />
  <one-to-many class="DataLayer.DBStructure.HastaCokluParametreDeger,DBStructure" />
</bag> 
```

哈斯塔.cs

```
 public virtual decimal Id
    {
        get { return m_id; }
        set { m_id = value; }
    }
    public virtual Hane Hane
    {
        get { return m_hane; }
        set { m_hane = value; }
    }
    public virtual Boolean Aktiflik
    {
        get { return m_aktiflik; }
        set { m_aktiflik = value; }
    }
    public virtual Iletisim Iletisim
    {
        get { return m_iletisim; }
        set { m_iletisim = value; }
    }
    public virtual HastaIsco HastaIsco
    {
        get { return m_hastaisco; }
        set { m_hastaisco = value; }
    }
    public virtual HastaNace HastaNace
    {
        get { return m_hastanace; }
        set { m_hastanace = value; }
    }

    public virtual DateTime KayitTarihi
    {
        get { return m_kayittarihi; }
        set { m_kayittarihi = value; }
    }
    public virtual string KullaniciId
    {
        get { return m_kullaniciid; }
        set { m_kullaniciid = value; }
    }

    public virtual IList<HastaCokluParametreDeger> HastaCokluParametreDeger
    {
        get { return m_hastacokluparametredeger; }
        set { m_hastacokluparametredeger = value; }
    } 
```

CodeBehind 方面：将值分配给相关控件后，保存按钮如下所示

```
 protected void Page_Init(object sender, EventArgs e)
    {
        _eski = base.GetBusinessLogic<ElektronikSaglikKaydiIslemleri>();
        Oturum ot = _eski.OturumBilgisiAl();
        oturumKullaniciId = ot.LoginEdenKisi.KisiId;
    }

     private void HastaBilgisiKaydetGuncelle()
    {
        try
        {
            _eski.HastaBilgisiKaydet(hasta, iletisim, cari);
            _eski.ClearHastaCache();
        }
        catch()
        { }
    }

    public void HastaBilgisiKaydet(Hasta Has, Iletisim iletisim, Cari cari)
    {
        try
        {
            this.Provider.Insert<Cari>(cari);
            iletisim.Cari = cari;
            this.Provider.Insert<Iletisim>(iletisim);
            Has.Iletisim = iletisim;
            this.Provider.Insert<Hasta>(Has);
            this.Provider.Commit();
        }
        catch (Exception)
        {
            this.Provider.Rollback();
        }
    }

    public void Insert<T>(T obj) where T : DBEntity
    {
        if (obj != null)
        {
            object newUniqueIdentifier = null;

            IClassMetadata tMeta = this.nhSess.SessionFactory.GetClassMetadata(typeof(T));
            if (!tMeta.HasIdentifierProperty) throw new Exception("'" + tMeta.EntityName + "' nesnesi için tekil tanımlayıcı(unique identifier) belirlenmemiş.");

            Type type = obj.GetType();
            PropertyInfo pi = type.GetProperty(tMeta.IdentifierPropertyName);

            //Özelliğin string olma durumuna göre tekil tanımlayıcı atama işlemi
            if (tMeta.IdentifierType.GetType() == typeof(NHibernate.Type.StringType))
            {
                newUniqueIdentifier = this.getIdentifiersNextValue<T>(obj);
                pi.SetValue(obj, newUniqueIdentifier, null);
            }
            if (trans == null)
            {
                trans = this.nhSess.BeginTransaction();
            }

            this.nhSess.Save(obj);
            InserLog(obj);
        }
    }

    private NHibernate.ISession nhSess
    {
        get
        {
            if (Disposing)
            {
                throw new ObjectDisposedException("Connection Provider");
            }
            if (_mySession != null)
            {
                if (!_mySession.IsOpen)
                    _mySession = null;
            }
            if (_mySession == null)
            {
                try
                {
                    MyInterceptor interceptor = new MyInterceptor();
                    interceptor.cp = this;
                    _mySession = getFactory().OpenSession(interceptor);
                    _mySession.CacheMode = CacheMode.Ignore;
                }
                catch (Exception ex)
                {
                    _mySession = null;
                    throw ex;
                }
            }
            return _mySession;
        }
    }

    public abstract class BusinessLogicBase
    {
    protected string SessionId { get; private set; }
    protected ConnectionProvider Provider
    {
        get
        {
            return ConnectionProvider.Current(SessionId);
        }
    }

    public BusinessLogicBase(string sessionId)
    {
        if (string.IsNullOrEmpty(sessionId))
        {
            throw new ArgumentNullException("SessionId");
        }
        this.SessionId = sessionId;
    } 
```

在 Insert 方法中，它会根据是否为字符串来检查数据类型。它是之前添加的，因为我在现有项目的结构上构建了这个应用程序。它就像一个加载项。该现有项目使用 Oracle 作为数据库，ID 数据类型为字符串。所以他们使用一些自定义功能一个一个地增加他们的值。但我的数据库是 SQL，数据类型是数字（十进制）。自动增量为真。无论如何，考虑到插入方法中的代码，我认为它不会影响插入过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:55:41.583

无论如何，感谢那些已经想提供帮助的人。

[在此链接](https://stackoverflow.com/questions/11844991/expected-system-int32-got-system-decimal)的帮助下解决了问题

我必须检查会话加载方法，我注意到我必须编辑相关代码，现在一切正常......

可能，如果您再次遇到相同的问题，链接中的这个问题和答案可能是正确指导您的解决方案之一......

希望能帮助到你...

# ios - 应用程序图标显示在模拟器上，但不显示在真正的 iphone 上

> ID：15685370
> 
> 赞同：1
> 
> 时间：2013-03-28T15:09:29.350
> 
> 标签：ios, icons, retina-display

正如标题所描述的，我目前有一个应用程序图标问题，我有 2 个 png，1 个是 57x57 Icon.png，另一个是 114X114 Icon@2x.png 我将它们都存储在 xcode 上的支持文件下。 ![在此处输入图像描述](../Images/6c96b5c7ea9db656f94bce203149b710.png)

这是我的 -Info.plist 的样子： ![在此处输入图像描述](../Images/c123121fc29d4805c2d2cb0fb5942802.png)

## 我还将应用程序图标拖放到目标摘要

![在此处输入图像描述](../Images/8d41ed92779359afe68441f26e18ab98.png)

## 它可能在模拟器上显示...

![在此处输入图像描述](../Images/c9139bfabb2f47857f2c96c2e388781c.png)

但不是在我的 Real iphone5 上，它只在我的 iPhone 上显示为一个白色方块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-17T08:46:29.837

以我的经验，问题出在图像文件上。

如果您通过修改扩展名将.jpg 更改为.png，则它在模拟器上显示良好，但在真机上显示不佳。

尝试将 .jpg 导出为 .png。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:14:49.863

您需要清除缓存。尝试删除应用程序，清理并再次运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:04:47.873

基本上不要尝试重写 info.plist 文件。所有的混乱都来了。避免修改它。

解决方法：pre: 删除应用摘要中的所有图标文件（右击图标->删除文件） 1\. 从模拟器中删除应用 2\. 重新启动模拟器 3\. 清理项目 CMD + Shift + K 4\. 清理cahe CMD + Shift + ALT + K 5\. 构建项目 6\. 添加新图标 7\. 尝试在设备上上传

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:13:13.740

1.  在 plist 文件中使用“图标文件”键，而不是“图标文件 (iOS 5)”
2.  从设备中删除应用程序
3.  在 Xcode 中清理你的项目
4.  在设备上运行应用程序

# eclipse - Gradle：从子项目中递归执行调用根任务

> ID：15685385
> 
> 赞同：1
> 
> 时间：2013-03-28T15:09:51.693
> 
> 标签：eclipse, gradle, multi-project

如果我有这样的 gradle 多项目

```
RootProject
+-- SubProjectA
+-- SubProjectB 
```

每个项目都有一个任务'foo'，我可以在根项目上调用它

```
RootProject>gradle foo 
```

它也为子项目执行

```
:foo
:SubProjectA:foo
:SubProjectB:foo 
```

但是如果我从子项目中调用任务'：foo'

```
RootProject\SubProjectA>gradle :foo 
```

只有根项目上的任务被执行

```
:foo 
```

但不是子项目上的“foo”任务。

有没有办法在子项目中调用所有项目的“foo”？我问这个是因为我使用的是 gradle eclipse 插件并且我只能访问子项目，即我在 eclipse 中看到的项目。

顺便说一句：到目前为止我想出的（有点hacky）解决方案

```
task fooAll(type:Exec) {
    workingDir '..'
    commandLine 'cmd', '/c', 'gradle foo'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:41:09.947

*将任务名称*（例如）解析为`foo`任务是*start directory*的函数，默认为当前目录。`-p`您可以使用命令行选项更改启动目录（请参阅 参考资料`gradle --help`）。所以你必须做类似的事情`gradle foo -p ../`。

此外，导入根项目可能是解决 Eclipse 问题的更好方法。Eclipse 工具可以很好地处理分层目录布局。

PS：`:foo`是一个任务*路径*。它指的`foo`是根项目 ( `:`) 中命名的任务。

# java - 在 Java 中从 Xbee 获取信息

> ID：15685392
> 
> 赞同：0
> 
> 时间：2013-03-28T15:10:05.627
> 
> 标签：java, xbee, ar.drone

我正在尝试从我的 Xbee 获取一些信息，但它不起作用

这是我的 Class Test 的代码：

```
 public static void main (String[] args){
     XBee xbee = new XBee();
     try {
        xbee.open("COM3", 9600);
    } catch (XBeeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    while (true) {
        try {
            XBeeResponse response = xbee.getResponse(10000);
            // we got a response!
        } catch (XBeeTimeoutException e) {
            // we timed out without a response
        } catch (XBeeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

我正在使用 Xbee API [http://code.google.com/p/xbee-api/](http://code.google.com/p/xbee-api/)

但我总是得到这个错误：

com.rapplogic.xbee.api.XBeeException：尝试在 API 模式下设置/读取时 AT 命令超时。XBee 无线电必须处于 API 模式 (AP=2) 才能在 com.rapplogic.xbee.api.XBee.doStartupChecks(XBee.java:124) 上与 com.rapplogic.xbee.api.XBee.initConnection( XBee.java:170) 在 com.rapplogic.xbee.api.XBee.open(XBee.java:142) 在 com.mohamed.test.main(test.java:16)

谢谢你uuuu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:34:15.033

从错误来看，您似乎没有将 XBee 模块的 API 模式设置为 2。尝试使用 X-CTU（基于 Windows 的程序）进行设置。以下是如何使用 X-CTU 设置 API 模式的示例（XBee 系列 2）：[将 X-Bee 设置为 API 模式](http://www.instructables.com/id/Configuring-XBees-for-API-Mode/#step1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:27:43.893

你在哪个平台？如果是 Windows，您可以使用 Digi 的 X-CTU 程序与 XBee 通信吗？您是否确认了波特率并且模块处于正确的模式（ATAP 必须设置为 2）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T08:54:45.803

我建议您使用 java.io 包的 OutputStream 和 InputStream 与 XBee 模块进行串行通信。使用此类，您可以发送和接收模块信息。确保模块处于 AT 模式。

# c# - 后台工作人员和多个进度条c#的奇怪行为

> ID：15685394
> 
> 赞同：1
> 
> 时间：2013-03-28T15:10:10.963
> 
> 标签：c#, progress-bar, backgroundworker

我尝试模拟一个运行时间较长的过程。在我的应用程序中，我使用背景并动态添加进度条。当我点击开始按钮时，一个进程开始并在面板上添加了一个进度条。如果我只单击一次，那么一切正常，但如果我单击两次或更多，则添加该数量的进度条，但最后一个进度条进度增加，最后其他进度条进度突然增加。

我希望添加任何数量的进度条都应该同时处理，而不是最后一个和最后一个。一切都应该像许多进程在自己的上下文中同时运行一样一起运行。这是我的代码，我希望如果有人看一下，他们就能理解缺陷在哪里。请帮我修复最后添加的进度条进度增加的缺陷。如果可能，运行我的代码并查看问题。

```
public partial class Form2 : Form
{
    MyBackgroundWorker backgroundWorker1 = null;
    Dictionary<string, string> dct = new Dictionary<string, string>();
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {

    }

    private void btnStart_Click(object sender, EventArgs e)
    {
        backgroundWorker1 = new MyBackgroundWorker();
        backgroundWorker1.WorkerReportsProgress = true;   
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
        backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        backgroundWorker1.RunWorkerAsync(txtNumber.Text);

    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        string strID = DateTime.Now.ToString("yyyyMMdd") + DateTime.Now.ToString("hhmmss")+DateTime.Now.Millisecond.ToString();
        MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
        tmpBg.Name = "bg_" + strID;

        ProgressBar pb = new ProgressBar();
        pb.Minimum = 0;
        pb.Maximum = 100;
        pb.Name = "pb_" + strID;
        pb.Width = txtNumber.Width;
        this.BeginInvoke((MethodInvoker)delegate
        {
            flowLayoutPanel1.Controls.Add(pb);
        });

        dct.Add(tmpBg.Name, pb.Name);

        int input = int.Parse(e.Argument.ToString());
        for (int i = 1; i <= input; i++)
        {
            Thread.Sleep(2000);
            backgroundWorker1.ReportProgress(i * 10);
            if (backgroundWorker1.CancellationPending)
            {
                e.Cancel = true;
                return;
            }
        }
    }

    // This event handler updates the progress bar. 
    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
        string strName = tmpBg.Name;

        if (!string.IsNullOrEmpty(strName))
        {
            strName = strName.Substring(3);
            ProgressBar pb = (ProgressBar)this.flowLayoutPanel1.Controls.Find(("pb_" + strName), true)[0];
            pb.Value = e.ProgressPercentage;
        }
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
        string strName = tmpBg.Name;
        strName = strName.Substring(3);
        ProgressBar pb = (ProgressBar)this.flowLayoutPanel1.Controls.Find(("pb_" + strName), true)[0];
        pb.Value = 100;
        //MessageBox.Show("Done");
    }

}

    public class MyBackgroundWorker : System.ComponentModel.BackgroundWorker
        {
            public MyBackgroundWorker()
            {
            }

            public MyBackgroundWorker(string name)
            {
                Name = name;
            }

            public string Name { get; set; }
        } 
```

## 更新部分

```
 private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
            string strName = tmpBg.Name;
            strName = strName.Substring(3);
            ProgressBar pb = (ProgressBar)this.flowLayoutPanel1.Controls.Find(("pb_" + strName), true)[0];
            //pb.Value = 100;
            //MessageBox.Show("Done");
            flowLayoutPanel1.Controls.Remove(pb);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:09:05.637

我想我让它按照你想要的方式工作。

1.  在 ProgressChanged 中，我以另一种方式获取进度条。

2.  在 DoWork 中，我以百分比的形式报告进度，并来自当前的 backgroundWorker。

3.  我删除`Thread.Sleep`是因为我认为它会导致问题，添加`Console.WriteLine` 到`DoWork`减慢程序（否则它比`ProgressBar`渲染更快）

    ```
    public partial class Form2 : Form
    {
        MyBackgroundWorker backgroundWorker1 = null;
        Dictionary<string, string> dct = new Dictionary<string, string>();
        public Form2()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            backgroundWorker1 = new MyBackgroundWorker();
            backgroundWorker1.WorkerReportsProgress = true;
            backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
            backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
            backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
            backgroundWorker1.RunWorkerAsync(int.Parse(txtNumber.Text));

        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            string strID = DateTime.Now.ToString("yyyyMMdd") + DateTime.Now.ToString("hhmmss") + DateTime.Now.Millisecond.ToString();
            MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
            tmpBg.Name = "bg_" + strID;

            ProgressBar pb = new ProgressBar();
            pb.Minimum = 0;
            pb.Maximum = 100;
            pb.Name = "pb_" + strID;
            pb.Width = txtNumber.Width;
            this.BeginInvoke((MethodInvoker)delegate
            {
                flowLayoutPanel1.Controls.Add(pb);
            });

            dct.Add(tmpBg.Name, pb.Name);

            int input = (int)e.Argument;
            for (int i = 1; i <= input; i++)
            {
                Console.WriteLine(tmpBg.Name + ": " + (i * 100 / input));   //for testing (this line slows the program down a lot)
                tmpBg.ReportProgress(i * 100 / input);
                if (tmpBg.CancellationPending)
                {
                    e.Cancel = true;
                    return;
                }
            }
        }

        // This event handler updates the progress bar. 
        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
            string strName = tmpBg.Name.Substring(3);
            ProgressBar pb;

            if (!string.IsNullOrEmpty(strName))
            {
                foreach (Control c in flowLayoutPanel1.Controls)
                {
                    if (c.Name == ("pb_" + strName))
                    {
                        pb = (ProgressBar)c;
                        pb.Value = Math.Min(100,e.ProgressPercentage);
                    }
                }
            }
        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            MyBackgroundWorker tmpBg = (sender as MyBackgroundWorker);
            string strName = tmpBg.Name;
            strName = strName.Substring(3);
            ProgressBar pb = (ProgressBar)this.flowLayoutPanel1.Controls.Find(("pb_" + strName), true)[0];
            pb.Value = 100;
            //MessageBox.Show("Done");
        }

    }

    public class MyBackgroundWorker : System.ComponentModel.BackgroundWorker
    {
        public MyBackgroundWorker()
        {
        }

        public MyBackgroundWorker(string name)
        {
            Name = name;
        }

        public string Name { get; set; }
    } 
    ```

# c++ - C++ 计算数字和字符

> ID：15685400
> 
> 赞同：0
> 
> 时间：2013-03-28T15:10:38.100
> 
> 标签：c++, arrays, function, file-io, fstream

我对 C++ 很陌生，我需要编写一个程序来计算数字、字符、空格符号和其他符号的数量。我决定从数位数开始。到目前为止，这是我的代码：

```
 int main() {
     int n = 0;
     int numb = 0;

     ifstream read("Data.txt");

     n = symbCounter(n, read);
     numb = numbCounter(n, read, numb);
     cout << numb; // this is for quick testing

     return 0;
 }

 int symbCounter(int &n, ifstream &read) {

     char ch;
     while (!read.eof()) {
         read.get(ch);
         n++;

     }
     return n;

 }

 int numbCounter(int &n, ifstream &read, int counter) {

     char sk[n];

     for (int i = 0; i < n; i++) {
         read.get(sk[i]);
         if (sk[i] == '1' || sk[i] == '2' || sk[i] == '3' || sk[i] == '4' || sk[i] == '5' || sk[i] == '6' || sk[i] == '7' || sk[i] == '8' || sk[i] == '9' || sk[i] == '0')
             counter++;
     };

     return counter;
 } 
```

但是控制台给我的值是 0。我做错了什么？以及如何只计算字符，不包括数字或空格？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:13:53.307

您可以使用`<cctype>`标题中定义的函数，例如

```
isalpha()
isblank()
iscntrl()
isdigit()
isspace() 
```

和其他人检查特定类型的字符。参见[这个](http://www.cplusplus.com/reference/cctype/isdigit/)例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:19:14.050

在您的`symbCounter`方法中，您将文件通读到最后。当您尝试在方法中读取文件时，由于您位于文件末尾`numbCounter`，因此调用`read`将返回`EOF`。您可以通过调用返回到开头

```
read.seekg(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:06:33.290

您需要为 numCounter 返回文件的开头；紧接着

```
int numbCounter(int &n, ifstream &read, int counter) { 
```

添加

```
read.clear();
read.seekg(0, ios::beg); 
```

# ios - for-in 循环不区分类？

> ID：15685405
> 
> 赞同：0
> 
> 时间：2013-03-28T15:10:54.533
> 
> 标签：ios, objective-c

我有一个自定义 UIButton 子类。实际上很多。

所以我想在 for-in 循环中通过我的 containerView.subviews 枚举所有这些。但是当我像这样运行它时：

```
for (CustomButton *button in self.containerView.subviews)
{
    NSLog(@"%@", button.class);
} 
```

...第一个被迭代的对象是一个 UIImageView，它也是一个子视图。为什么 for-in 循环不只给我想要的课程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T15:15:18.687

它将遍历数组中的所有对象并尝试转换为 CustomButton 类。你需要做一些过滤：

```
for (CustomButton *button in self.containerView.subview)
{
    if ([button isKindOfClass: [CustomButton class]])
       NSLog(@"%@", button.class);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:16:37.020

for-in 循环正是它应该做的事情。它遍历容器视图（您的单元格或滚动视图？）的所有子视图。

您可以递归地处理它们，以便您以相同的方式浏览子视图的所有子视图（如果有的话）。至少那是我会做的。

然后你检查类类型（使用 isKindOfClass）并只处理你感兴趣的那些。

您会惊讶地看到一个按钮可能有多少个子视图。

编辑：到目前为止，我还没有解决您的问题的另一个方面。您要求 for-in 循环的“歧视”。它不是循环的一个方面。For-in 简单地迭代容器的所有元素。这可能是一个数组、字典或集合。在您的示例中，您只需将每个对象类型转换为 CustomButton 类型对象。即使您访问自定义按钮独有的属性或方法，编译器也会正确通过。然后将在运行时抛出异常。

# c# - 从另一个 mdichild 打开 mdichild

> ID：15685409
> 
> 赞同：0
> 
> 时间：2013-03-28T15:11:00.903
> 
> 标签：c#

我有以下表格：main_menu(mdicontainer)、form1 和 form2。我可以通过以下方式在 main_menu 中打开 from1 作为 mdichild

```
form1 newMDIChild = new form1();

newMDIChild.MdiParent = this;

newMDIChild.Show(); 
```

当我尝试从form1打开form2作为main_menu的mdichild时

```
form2 newMDIChild = new form2();

newMDIChild.MdiParent = this.MdiParent;

newMDIChild.Show;

this.close(); 
```

它仍然将 form2 作为非子表单打开。到目前为止我还没有找到任何解决方案。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:16:48.730

在您的帖子中，您暗示两种形式都是同一个父母的孩子。如果是这种情况，form1 的父级被设置为正确的父级，但 form2 的父级被设置为其父级的父级。实际上，它使 form2 成为生成它的对象的兄弟，而不是子对象。

尝试改变

```
newMDIChild.MdiParent = this.MdiParent; 
```

至

```
newMDIChild.MdiParent = this; 
```

生成表格 2 时。

# asp.net-web-api - Windows Phone 8 和 ASP.NET MVC Web API 之间的通信

> ID：15685411
> 
> 赞同：0
> 
> 时间：2013-03-28T15:11:09.697
> 
> 标签：asp.net-web-api, windows-phone-8, azure-blob-storage

我正在使用 Web API 检索 SAS 以将图片上传到 Windows Azure blob 存储。不幸的是，它不起作用。有趣的是，它可以在任何其他应用程序中运行，甚至在 Windows Store 应用程序中。这是我的控制器代码：

```
// GET api/users?container="test"&blobname="test.jpg"
    public string Get(string container, string blobname)
    {
        try
        {
            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("ConnectionString"));
            //CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient(); ;
            CloudBlobContainer blobContainer = blobClient.GetContainerReference(container);
            blobContainer.CreateIfNotExist();

            BlobContainerPermissions containerPermissions = new BlobContainerPermissions();
            containerPermissions.PublicAccess = BlobContainerPublicAccessType.Blob;

            // Define a 4 hour window that the Windows 8 client can write to Azure Blob Storage.
            containerPermissions.SharedAccessPolicies.Add("mypolicy", new SharedAccessPolicy()
            {
                Permissions = SharedAccessPermissions.Write, // | SharedAccessPermissions.Read ,
                //To be available immediately don't set SharedAccessStartTime =
                SharedAccessExpiryTime = DateTime.Now.Add(TimeSpan.FromHours(4))
            });

            // Set the permissions so that Windows 8 client can write to the container
            // for the 4 hours specified above.
            blobContainer.SetPermissions(containerPermissions);

            // Create the shared access signature that will be added to the URL.
            string sas = blobContainer.GetSharedAccessSignature(new SharedAccessPolicy(), "mypolicy");

            // Creat the URI to be return to the Windows 8 client that will be used to write
            // to blob storage.
            return string.Format("{0}/{1}{2}", blobContainer.Uri, blobname, sas);

        }
        catch
        {
            throw new HttpResponseException(HttpStatusCode.InternalServerError);
        }
    } 
```

这是客户：

```
string photoSasUrl = "http://127.0.0.1:81/api/users?container={0}&blobname={1}";
                    using (HttpClient client = new HttpClient())
                    using (var response = await client.GetAsync(String.Format(photoSasUrl, "profiles-pictures", "test.jpg")))
                    {
                        // Retrieve Shared Access Signature from Web Service
                        var sasUrl = await response.Content.ReadAsStringAsync();
                        // Trim any miscellaneous quotes
                        sasUrl = sasUrl.Trim('"');

                        // Load bytes of image into content object
                        var content = new StreamContent(e.ChosenPhoto);
                        // Content-Type will be image/jpeg
                        content.Headers.Add("Content-Type", "image/jpg");
                        // Write the bytes of the photo to blob storage
                        using (var uploadResponse = await client.PutAsync(new Uri(sasUrl), content))
                        {
                            if (uploadResponse.IsSuccessStatusCode)
                            {
                                // If successful, show on screen
                                MessageBox.Show("Upload Successful");
                            }
                        }
                    }
                    WebClient wc = new WebClient();
                    wc.DownloadStringCompleted += wc_DownloadStringCompleted;
                    wc.DownloadStringAsync(new Uri("http://127.0.0.1:81/api/values"));
                }
                catch { } 
```

我发现它也不适用于在 Web API 项目创建时默认生成的示例值控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:59:49.183

你打电话给地址`http://127.0.0.1:81/api/`。`127.0.0.1`指向您的 Windows Phone 设备，而不是您的本地服务器。请改用您机器的 IP 地址。

# excel - 将电子表格复制到没有宏的新文件

> ID：15685415
> 
> 赞同：0
> 
> 时间：2013-03-28T15:11:15.977
> 
> 标签：excel, vba

我编写了这段代码来将我的一些电子表格复制到一个新文件中，但是原始文件中的所有宏都作为指向原始文件的链接转到新文件。我想复制电子表格并在新文件中删除宏。请在下面找到我的代码，我该如何更改它？

```
Sub IndRepPD()
    Dim NewName As String
    Dim nm As Name
    Dim ws As Worksheet

    If MsgBox("Are you sure you want to generate an Indidual Report for PD?" & vbCr & _
    "The file will be saved as PD_VA2013_KPI in the same directory as the original." _
    , vbYesNo, "Generate Individual Report for PD") = vbNo Then Exit Sub

    With Application
        .ScreenUpdating = False

         On Error GoTo ErrCatcher
        Sheets(Array("Inhalt", "PD", "PD Quality", "Glossary", "Status", "PD History")).Copy
        On Error GoTo 0

            For Each ws In ActiveWorkbook.Worksheets
            ws.Cells.Copy
            ws.[A1].PasteSpecial Paste:=xlPasteColumnWidths, Operation:=xlNone, _
        SkipBlanks:=False, Transpose:=False
            Application.CutCopyMode = False
            Cells(1, 1).Select
            ws.Activate
        Next ws
        Cells(1, 1).Select

            For Each nm In ActiveWorkbook.Names
            nm.Delete
        Next nm
        ActiveWindow.DisplayWorkbookTabs = False
        Worksheets("PD").Select
            NewName = "PD_VA2013_KPI"
        ActiveWorkbook.SaveCopyAs ThisWorkbook.Path & "\" & NewName & ".xls"
        ActiveWorkbook.Close SaveChanges:=False

        .ScreenUpdating = True
    End With
    Exit Sub

ErrCatcher:
    MsgBox "Specified sheets do not exist within this workbook"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:54:06.107

.xlsx 不存储宏，但如果您使用电子表格中的按钮运行宏，则指向原始文件的宏的链接仍然存在。

# java - 尝试将 JXPanel 组件添加到调色板时出现 Eclipse/Java SwingX 错误

> ID：15685416
> 
> 赞同：0
> 
> 时间：2013-03-28T15:11:16.863
> 
> 标签：java, swing, swingx

我正在尝试将一些 Java SwingX 组件添加到 Eclipse 项目中。

我下载了 SwingX 最新版本

我还将下载的 jar 添加到 Java Build Path 中，如下所示：

![SwingX 罐子](../Images/4d41aa23e113ba63056cb545e145c927.png)

然后在 Eclipse 的设计视图中，我添加了一个新组件，如下所示：

![添加 JXControl](../Images/0b5d6a6fc35bbde18cae419f07bd260f.png)

但是，这是我遇到问题的地方，我在“添加组件”窗口中收到此错误，如此处所示。

![添加组件错误](../Images/92e0601384bb084286d6b39ceb9effd9.png)

所以由于某种原因，它没有找到它需要的类，因为我收到了这个错误：

java.lang.ClassNotFoundException: org.jdesktop.swingx.JXPanel

提前致谢。

道格

# c - 为什么它的 c 指针在这里不起作用？

> ID：15685421
> 
> 赞同：0
> 
> 时间：2013-03-28T15:11:25.943
> 
> 标签：c, malloc

我是 C 语言的初学者，我不能很好理解的是 malloc 的使用。所以我决定创建这个例子。我想了解为什么它不打印出缓冲区数据以及执行此操作的最佳做​​法是什么。

```
#include <stdio.h>      /* printf, scanf, NULL */
#include <stdlib.h>     /* malloc, free, rand */

void f(char * buffer, int i) {
  buffer = (char *) malloc(i+1);
  if (buffer==NULL) 
    exit (1);

  for (int n=0; n<i; n++)
    buffer[n]=rand()%26+'a';

  buffer[i]='\0';
}

int main ()
{
  char * buffer;
  f(buffer, 5);
  printf ("Random string: %s\n",buffer);
  free (buffer);

  return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:13:22.373

您`buffer = (char *) malloc(i+1);`在函数之外没有任何影响。实际上，该函数正在更改它自己的 副本`buffer`，而调用者 ( `main`) 永远不会看到此更改。[这在C FAQ](http://c-faq.com/ptrs/passptrinit.html)中有很好的解释。

您可以返回缓冲区，而不是将其作为参数传递，因为该函数目前不返回任何内容：

```
char *f(int i)
    /* ... */
    return buffer;

/* ... */

char * buffer = f(5); 
```

* * *

*   在 C 中强制转换`malloc`是不必要的，通常被认为是可疑的做法
*   和变量名称有些误导：人们期望它们`n`反过来`i`
*   `f`不是函数的好名字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:15:31.113

为了修改传递给函数的指针，您必须使用指向指针的指针：

```
void f(char** buffer, int i) {
  *buffer = malloc(i+1);
  if (*buffer==NULL) 
    exit (1);

  for (int n=0; n<i; n++)
    (*buffer)[n]=rand()%26+'a';

  (*buffer)[i]='\0';
} 
```

用法：

```
char* buff;

f(&buff, len); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:18:16.937

变量**按值传递**给函数。

当您调用时`f(buffer, 5)`，它不会将变量传递`buffer`给函数`f`；它只复制变量的值`buffer`。在 function`f`中，创建了一个名为`buffer`（参数变量）的新变量。当您更改该变量的值时，您传入的原始变量`main`不受影响。

解决此问题的不同方法：

使`f`返回指针，并将其保存`buffer`在`main`：

```
char * f(int i) {
    char * buffer = malloc(i + 1);

    /* ... */

    return buffer;
}

int main() {
    char * buffer = f(5);

    /* ... */

    return 0;
} 
```

或者传递一个指向`f`;的指针。在 中`main`，传递 的地址`buffer`：

```
void f(char ** buffer, int i) {
    *buffer = malloc(i + 1);

    /* ... */
}

int main() {
    char * buffer;
    f(&buffer, 5);

    /* ... */

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:19:07.480

您不能更改按值*传递的变量的原始值*。

如果要在函数中进行 malloc，并在变量中返回 malloc 的结果，则该变量必须*通过引用传递*。

例如，而不是：

```
void f(char * buffer, int i); 
```

它应该是：

```
void f(char **buffer, int i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:19:26.483

CNICUTAR 是对的，但这里有一些有趣的信息：

马洛克：

不要强制转换 malloc（这里有一个有趣的话题：[我会转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）。

循环：

对于 for 循环，您应该使用这种方式（C89 版本）：

```
int i;
for (i = 0; ...) 
```

问候，

# css - 如何反转字体百分比

> ID：15685424
> 
> 赞同：3
> 
> 时间：2013-03-28T15:11:35.757
> 
> 标签：css

如何反转字体大小百分比增加。如果字体大小增加了 125%，那么我会认为反转它需要 80% 的字体大小（100/125 = 0.8）

但是在这个例子中，我使用生成的字体 em 大小来创建宽度，它不起作用。为什么？

[小提琴](http://jsfiddle.net/RgQeE/)。

html：

```
<div id="base">
    <div id="row1">
        <input type="text" />
    </div>
    <div id="row2">
        <input type="text" />
    </div>    
</div> 
```

CSS：

```
#row2 {
    font-size: 125%;
}

#row2 input {
    font-size: 80%;
}

input {
    background-color: #343434;
    width: 10em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:21:38.083

这实际上是按预期工作的，只是`#row2`默认情况下字体大小为 16px，但对于`<input>`它只有 13px。16px 的 125% 是 20px。当您在其中指定规则时，`#row2 input`实际上会导致该`<input>`计算继承其父级的字体大小。20 的 80% 是 16，所以看起来更大。默认情况下不继承输入的字体大小。您只需`font-size`从该输入中完全删除规则即可解决此问题。

[http://jsfiddle.net/RgQeE/6/](http://jsfiddle.net/RgQeE/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:23:50.450

通常你会是正确的，使用`font-size:80%`将 reverse `font-size:125%`。然而，`input`标签并不`font-size`像大多数元素一样默认继承，因此它们不会从父元素那里继承它们。要“反转”字体大小并将其设置回正常，请不要尝试将其设置为`font-size:80%`.

希望这个例子能说明它是如何工作的：

[jsFiddle](http://jsfiddle.net/8S2ug/2/)

![在此处输入图像描述](../Images/fd449447aa52bc2179230869764218e5.png)

**HTML**

```
test
<div id="base">
    <div id="row1">
       test <input type="text" value="test" />
    </div>
    <div id="row2">
        test<input type="text" value="test" />
    </div>    
</div> 
```

**CSS**

```
#row2 {
    font-size: 125%;
}
#row2 input:first-child {
    font-size: 80%;
}    
.eighty-percent {
    font-size:80%;
}
input {
    width: 10em;
} 
```

# instagram - 通过 Instagram API 邀请用户使用您的应用

> ID：15685426
> 
> 赞同：1
> 
> 时间：2013-03-28T15:11:44.623
> 
> 标签：instagram

我可以在 Facebook 上邀请用户吗？我有一个具有 Instagram 登录功能的网站。如果用户使用 Instagram 登录，他会看到他可以邀请的朋友加入我的网站。

API 中是否有这样的功能，如果有，我在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T19:36:13.770

Instagram API 不返回关注者的电子邮件地址或向关注者发送消息的方式，因此您不能这样做。通知用户的最佳方式是发布照片并添加标题，邀请您的关注者访问网站。看到这张照片的人可能会访问您的网站。

# android - 意图自定义权限不起作用

> ID：15685427
> 
> 赞同：2
> 
> 时间：2013-03-28T15:11:44.883
> 
> 标签：android, android-intent, android-permissions

## 更新

根据我下面的回答，我的直接问题得到了解决。我的环境（PC + 设备）不允许在 DEBUG 构建中自定义权限。

我确信几周前我能够很好地运行 DEBUG 构建 - 因此描述了“间歇性”错误。

## 更新 2

代码在其他开发人员的机器上同步出来，通过 Eclipse 在他的设备上以 DEBUG 模式正常工作。在我的设备上，它在他的机器上不起作用。

我的机器上的 DEBUG 构建也可以在其他设备上正常工作。

这让我怀疑我的设备是否出了问题？

* * *

我有自定义权限的间歇性**“权限拒绝”**问题`Intents`。它是代码在生产和工作中的一种，但有时在进行新构建时，它会停止工作。我之前只是靠运气修复它，通过重启（设备和电脑）、清理项目、卸载/重新安装、重复等过程......这是不可接受的。

据我所见，我正在为我`Intents`在我的应用程序中广播的自定义权限做所有正确的事情。但是 logcat 给了我以下常见的错误：

*   W/BroadcastQueue（389）：权限拒绝：来自 com.test（pid=22030，uid=10002）的广播意图 { act=A_ACTION flg=0x10} 需要 A_PERMISSION，因为已注册接收器 BroadcastFilter{43918d50 u0 ReceiverList{4391cad8 22030 com.test /10002/u0 远程：430576d0}}

在 4.2.1 (Galaxy Nexus) 和 4.2.2 (Nexus 7) 上，或

*   W/ActivityManager（2002）：权限拒绝：接收 Intent { act=A_ACTION flg=0x10 } 到 ProcessRecord{41a12748 31496:com.test/10115}（pid=31496，uid=10115）由于发件人 com.test（ uid 10115)

在 4.0 (S2) 和 2.3.3 (Samsung Ace)。

即标准错误。

* * *

我的清单说：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test"
    android:versionCode="1"
    android:versionName="4.10.0.3" >

    <permission
        android:name="A_PERMISSION"
        android:description="@string/broadcast_permission_desc"
        android:label="@string/broadcast_permission_label"
        android:permissionGroup="@string/broadcast_permission_group"
        android:protectionLevel="signature" />

    <uses-permission android:name="A_PERMISSION" />

    etc..... 
```

这些字符串被定义为（fwiw）：

```
<string name="broadcast_permission_label">Private Broadcast</string>
<string name="broadcast_permission_desc">This permission allows the necessary components of the application to receive private broadcasts that are sent within the application.</string>
<string name="broadcast_permission_name">A_PERMISSION</string>
<string name="broadcast_permission_group">A_GROUP</string> 
```

我的基本 APPLICATION 子类中有一个方法，用于进行广播：

```
public void sendBroadcast(Intent i)
{
    // hardcoded custom permission
    super.sendBroadcast(i, "A_PERMISSION");
} 
```

我`BroadcastReceiver`从这样的内部注册我的`Fragment`：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    // hardcoded custom permission
    MyApp.getInstance().registerReceiver(myReceiver, myFilter,
        "A_PERMISSION", null);
} 
```

* * *

我不高兴地检查了以下相关问题：

*   [Android Permission Denial：广播意图](https://stackoverflow.com/questions/13258836/android-permission-denial-broadcasting-intent)
*   [如何在 Android 中使用自定义权限？](https://stackoverflow.com/questions/8816623/how-to-use-custom-permissions-in-android)
*   [如何在android中声明用户定义的权限](https://stackoverflow.com/questions/11771285/how-to-declare-user-defined-permissions-in-android)

* * *

我认为这涵盖了本网站上的类似问题。

我的问题是它间歇性但浪费了大量时间，即一些构建在所有手机上都可以工作，一些构建在所有手机上都失败。

我想知道这是否是其中一个框架（Android OS，或者可能是 Eclipse / Android SDK）中的问题。不幸的是，我的谷歌搜索只会让我找到常见解决方案的更常见问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:02:06.863

最终解决方案 - 我同意这似乎没有意义，但这里是：

我有 2 个应用程序使用相同的权限 -`com.test`和`com.runtest`.

如上所述，`com.test`在 DEBUG 构建中被破坏了。但我注意到这`com.runtest`仍然有效。

* * *

脚步：

1.  安装`com.runtest`以确认它正在工作
2.  从我的设备上卸载了这两个应用程序
3.  重命名`com.runtest`为`com.test`- 在 Eclipse 中（Android 工具...重命名应用程序包）
4.  在我的设备上的 Eclipse 中调试了这个重命名的应用程序 - 它有效
5.  删除了这个重命名的“假”`com.test`
6.  在我的设备上调试了 Eclipse 中的原始`com.test`应用程序 - 它终于成功了！

* * *

因此，出于某种原因，用工作应用程序覆盖损坏的应用程序改变了一些东西，并修复了我的设备。

# ruby-on-rails - 在 has_many 关系中包含一个嵌套值

> ID：15685428
> 
> 赞同：0
> 
> 时间：2013-03-28T15:11:46.477
> 
> 标签：ruby-on-rails, activerecord, many-to-many

产品.rb

```
class Product
 attr_accessible :name
 has_many :values
end 
```

值.rb

```
class Value
 attr_accessible :value
 belongs_to :product
end 
```

如何在值实例 ( `v = Value.find(3)`) 中包含产品名称？输出值实例必须是这样的：`[v.product_name = product.name, v.name]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:19:36.317

像这样在您的价值模型上创建一个方法。

```
def product_name
  "#{product.name}, #{name}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:20:17.873

```
v.product.name 
```

会给你产品的名称。将其封装在价值方法中以获得更好的实践：

```
class Value
  def product_name
    product.name
  end
end 
```

如果您的问题是您想在一个数据库调用中完成所有这些操作，那么您正在查看以下内容：

```
Value.select("values.*, products.name as product_name").joins(:product).find(3) 
```

老实说，我认为通过 id 搜索不值得。如果您要进行返回许多结果的查询，我会急切地加载相关产品并按照我上面的建议进行操作。

# c# - 提升并行消息传递性能（TPL / Async）

> ID：15685436
> 
> 赞同：1
> 
> 时间：2013-03-28T15:12:08.247
> 
> 标签：c#, performance, optimization, task

我有一个困扰我一段时间的性能优化问题。我试图从中获得更多性能，但没有取得多大成功。

系统（简化）如下：

1) 请求通过 HTTP Post 传入（我需要同步/内联响应）

2）我处理请求，并返回响应（所有 XML）

3) 如果我在 15 秒内没有准备好结果，我会回复“服务器忙，稍后再试”类型的消息。

作为中央消息处理机制，我使用了基于任务的方法来排队、启动和等待消息（最多 15 秒）

当一条消息几乎是即时处理时，吞吐量（每秒请求数）非常好（1000/s）。但是，当消息处理延迟 200 毫秒时，这会严重降低到 40/s

几个片段：

```
    公共无效 AddMessage()
    {
         Task.Factory.StartNew(() =>
                    {
                        返回 worker.ProcessMessage();
                    };
    }

    公共消息响应 GetResult()
            {
                task.Task.Wait(15 * 1000);

                开关（任务.状态）
                {
                    案例TaskStatus.Running：
                            message = "您的请求比平时花费的时间更长"
                       休息;
                    案例TaskStatus.RanToCompletion：
                            message = (MessageResponse)task.Result;
                        休息;
                }
       返回消息；
    }

```

笔记：

任务创建选项 None / Longrunning / PreferFairness 没有影响。在运行 Visual Studio 性能分析器时，我可以直观地看到 Longrunning 为每个请求（预期）创建了一个新线程，并且 None 使用有限数量（底层线程池）来为请求提供服务。

查看 ANTS 性能分析器和 Visual Studio 性能分析器，没有围绕争用的并发问题，也没有其他明显浪费时间的领域（cpu 时间或挂钟时间）

从可视化结果中可以清楚地看出，在有 1000 个请求排队的情况下，90% 的程序时间花在线程服务和上下文切换上

（显然非常昂贵）。我的结论是等待结果（通过多个请求）是非常昂贵的。

如果我在网页或 WPF 表单上执行此操作，我可以使其完全异步，但是我没有此选项。

有什么地方可以更改消息处理机制以更好地优化并发性？我真的对任何事情都持开放态度，甚至会探索 async / await 如果它会受益。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:36:22.983

我猜您会看到由于每个请求使用两个线程而导致性能下降。

既然你提到你对`async`/持开放态度`await`，我会尝试这样的事情：

```
public async Task<MessageResponse> GetResult(Message message)
{
  var cts = new CancellationTokenSource(TimeSpan.FromSeconds(15));
  try
  {
    return await Task.Run(() => worker.ProcessMessage(message, cts.Token));
  }
  catch (OperationCanceledException)
  {
    return "Your request is taking longer than usual";
  }
} 
```

您还必须修改`ProcessMessage`以定期调用`CancellationToken.ThrowIfCancellationRequested`. 此外，如果您的消息处理是 I/O 密集型而不是 CPU 密集型，您应该更改`ProcessMessage`为`async`.

# ocr - 无法在 Tesseract 中制作 boxfile（或打开 tiff）

> ID：15685438
> 
> 赞同：0
> 
> 时间：2013-03-28T15:12:15.770
> 
> 标签：ocr, tesseract, leptonica

我正在按照[这些说明](http://michaeljaylissner.com/blog/adding-new-fonts-to-tesseract-3-ocr-engine)为新字体训练 Tesseract OCR 引擎。

但是，在尝试制作 box 文件时，出现错误。这是我使用的命令：

```
H:\Documents\TesseractTraining>tesseract eng.helvetica.exp0.tif eng.helvetica.exp0   batch.nochop makebox 
```

这是错误消息：

```
Tesseract Open Source OCR Engine v3.02 with Leptonica
TIFFstream: Sorry, can not handle image.
Unsupported image type. 
```

一些谷歌搜索表明 Leptonica 安装可能存在错误。我什至不知道我的计算机上是否安装了 Leptonica，并且该网页与几个自述文件（一个称为“[自述](http://www.leptonica.com/source/README.html)文件”和一个称为“文档”）相当混乱，它们都不够简单，我无法理解如何制作它在 Windows 上工作。我有 Visual Studio 2008 的 Express Edition，所以我不能使用建议的命令提示符。

所以，我的问题是：有谁知道可能出了什么问题以及我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:35:04.877

看起来你的形象很糟糕。您可以使用[jTessBoxEditor](http://vietocr.sourceforge.net/training.html)工具创建适合训练目的的 TIFF 图像。

# java - XML 解析器返回意外的令牌错误和空指针异常

> ID：15685440
> 
> 赞同：0
> 
> 时间：2013-03-28T15:12:21.213
> 
> 标签：java, android, xml, eclipse, xml-parsing

所以我认为我在以前的线程中质疑错误的方式。我最好这样说。我正在尝试解析 XML 数据：

```
<playlist>
<title>![CDATA[New Playlist]]</title>
<items>
<item>
<title>HAMD(LA ILAHA ILLALLAH)</title>
<description>Recited By :Alhaaj Muhammad Owais Raza Qadri -- Written By: Mufti-e-Azam Hind Molana Mustafa Raza Khan Noori</description>
<image>http://xxx.xxx.xxx.xxx/~kanz/video/Images/9.jpg</image>
<startFromThis>true</startFromThis>
<duration>510</duration>
<source>http://xxx.xxx.xxx.xxx/~kanz/video/flv/9.flv</source>
<sourceAlt>http://xxx.xxx.xxx.xxx/~kanz/video/mp4/9.mp4</sourceAlt>
<sourceType>direct</sourceType>
</item>
</items>
</playlist> 
```

在我的活动中，我所做的是这样，但 logcat 给出了空指针异常。这是我的活动，下面是 logcat 错误。

```
static final String URL = "http://xxx.xxx.xxx.xxx/~kanz/video/XML/9.xml";

// XML node keyse.
static final String KEY_SONG = "item"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "description";
static final String KEY_THUMB_URL = "image";
static final String KEY_DURATION = "duration";

NodeList nl = doc.getElementsByTagName(KEY_SONG);

// looping through all song nodes <song>
for (int i = 0; i < nl.getLength(); i++) {
    // creating new HashMap
    HashMap<String, String> map = new HashMap <String, String>();
    Element e = (Element) nl.item(i);
    // adding each child node to HashMap key => value
    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
    map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
    map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
    map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));

    // adding HashList to ArrayList
    songsList.add(map);
} 
```

Logcat 给出 Unexpected Token 错误并返回 null 导致空指针异常。

```
03-28 14:31:34.059: E/Error:(895): Unexpected token (position:TEXT ï»¿@1:4 in java.io.StringReader@40d220e0) 
03-28 14:31:34.080: I/System.out(895): null
03-28 14:42:59.560: D/AndroidRuntime(978): Shutting down VM
03-28 14:42:59.560: W/dalvikvm(978): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-28 14:42:59.639: E/AndroidRuntime(978): FATAL EXCEPTION: main
03-28 14:42:59.639: E/AndroidRuntime(978): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.razatubevidurl/com.example.razatubevidurl.CustomizedListView}: java.lang.NullPointerException
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.os.Looper.loop(Looper.java:137)
03-28 14:42:59.639: E/AndroidRuntime(978):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-28 14:42:59.639: E/AndroidRuntime(978):  at java.lang.reflect.Method.invokeNative(Native Method)
03-28 14:42:59.639: E/AndroidRuntime(978):  at java.lang.reflect.Method.invoke(Method.java:511)
03-28 14:42:59.639: E/AndroidRuntime(978):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-28 14:42:59.639: E/AndroidRuntime(978):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-28 14:42:59.639: E/AndroidRuntime(978):  at dalvik.system.NativeStart.main(Native Method)
03-28 14:42:59.639: E/AndroidRuntime(978): Caused by: java.lang.NullPointerException 
```

请告诉我我做错了什么。我认为我之前的问题含糊不清，在这个问题中，我尽力使问题清晰易懂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:11:19.200

我想这与编码有关。也许您的解析器不喜欢感叹号 (!)。您能否确保使用正确编码的 XML 文件？(UTF-8)

否则，你会遇到这个问题：[KXmlParser 在开始 RSS paing 时抛出“Unexpected token”异常](https://stackoverflow.com/questions/15254089/kxmlparser-throws-unexpected-token-exception-at-the-start-of-rss-pasing)。

我用谷歌搜索了一下，看起来最简单的修复方法就[在这里](https://stackoverflow.com/questions/9736999/how-to-remove-bom-from-an-xml-file-in-java)。您可以尝试添加此方法。（根据您使用的教程，将其放在 ImageLoader 类中。）

```
import java.io.PushbackInputStream;
private InputStream checkForUtf8BOMAndDiscardIfAny(InputStream inputStream) throws IOException {
PushbackInputStream pushbackInputStream = new PushbackInputStream(new BufferedInputStream(inputStream), 3);
byte[] bom = new byte[3];
if (pushbackInputStream.read(bom) != -1) {
    if (!(bom[0] == (byte) 0xEF && bom[1] == (byte) 0xBB && bom[2] == (byte) 0xBF)) {
        pushbackInputStream.unread(bom);
    }
}
return pushbackInputStream; } 
```

然后你可以做

```
InputStream is=conn.getInputStream();
is = checkForUtf8BOMAndDiscardIfAny(is); 
```

我没有机会测试该方法，但它应该这样做。另外，请参阅[字节顺序标记搞砸了 Java 中的文件读取](https://stackoverflow.com/questions/1835430/byte-order-mark-screws-up-file-reading-in-java)。

# java - 需要从这个数组中删除所有的九

> ID：15685441
> 
> 赞同：-4
> 
> 时间：2013-03-28T15:12:21.580
> 
> 标签：java, collections

我需要一种从“myList”中删除所有九的方法。有什么帮助，谢谢。

```
public class ArrayListPractice 
{
    ArrayList <Integer> myList = new ArrayList <Integer>();
    public ArrayListPractice() 
    {
        myList.add(6);
        myList.add(2);
        myList.add(7);
        myList.add(3);
        myList.add(12);
        myList.add(1);
        myList.add(9);
        myList.add(9);
        myList.add(3);
        myList.add(5);
        myList.add(9);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:17:22.137

始终从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28java.lang.Object%29)开始。

```
final Integer nine = Integer.valueOf(9);
while (myList.remove(nine)) { } 
```

如果列表包含该元素，则 remove 返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:20:36.483

尝试这个。

```
ArrayList list1 = new ArrayList();
list1.add( 9 );        
myList.removeAll( list1 ); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:24:53.973

试试这个：它会从你的 ArrayList myList 中删除所有出现的 9。

```
myList.removeAll(Collections.singleton(9)); 
```

*myList before : [6, 2, 7, 3, 12, 1, 9, 9, 3, 5, 9]*

*myList 之后：[6, 2, 7, 3, 12, 1, 3, 5]*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T15:16:52.087

```
List<int> indexWithNine = new ArrayList<int>();
for (int i=0; i< myList.length; i++){
  if (myList.get(i) == 9)
     indexWithNine.add(i);
}
for (int i=indexWithNine.length-1; i=0; i--)
{
  myList.remove(indexWithNine.get(i));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:18:53.770

这样的事情应该做。

```
public List removeNines(List myList){
    Iterator itr = myList.iterator();
    while(itr.hasNext()){
        if(itr.next() == 9){
             itr.remove();
        }
    }
    return myList; 
} 
```

# ios - 一次通过多个 id 搜索核心数据而不是多个背靠背搜索的优势

> ID：15685445
> 
> 赞同：0
> 
> 时间：2013-03-28T15:12:29.057
> 
> 标签：ios, core-data

我想知道我是否使用某个键构建了一个 NSDictionary，该键具有一个托管 ID 数组作为值，并且想要在使用该键时提取这些对象，有没有办法加载所有这些对象或者我需要加载一次一个？

例子：

NSDict: "Apple" = NSArray[id1,id2,id3,etc...]

1.  以某种方式一次从核心数据加载所有 id（以及用于此的方法）

2.  一个一个地加载（对于数组中的 id ......等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:14:24.587

如果您有一个托管对象 ID 数组，那么您可以通过一个获取请求获取所有对象：

```
NSArray *objectIDs = ...;
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"YourEntityName"];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"SELF IN %@", objectIDs];
NSArray *result = [context executeFetchRequest:fetchRequest error:&error]; 
```

但是，`result`数组中返回的对象的顺序不必与提供的对象 ID 的顺序相同。换句话说，不能保证`result[i]`是具有 ID 的对象`objectIDs[i]`。

如有必要，您可以使用此答案中的代码根据对象 ID 对结果数组进行排序：[Sorting NSArray by NSOrderedSet](https://stackoverflow.com/questions/15617795/sorting-nsarray-by-nsorderedset/15618277#15618277)。

# heroku - Akka 是否同时运行同一事件的多个实例？

> ID：15685449
> 
> 赞同：1
> 
> 时间：2013-03-28T15:12:35.463
> 
> 标签：heroku, playframework, akka, playframework-2.1

我在 Play Framework 中使用 Akka 而不是 Job，来安排代码每 X 秒运行一次。我的代码在 Heroku 免费层上运行，我相信它有时会暂停一段时间，然后由 Heroku 系统恢复。

是否有可能当 Heroku dyno 醒来时，它注意到它有一些“它欠”的事件并同时运行它们？我的代码不是线程安全的，并且假定在任何给定时间只会运行一个事件。

这是在播放开始时运行的演员设置：

```
object Global extends GlobalSettings {

  override def onStart(app: Application) {
    val monitorActor = Akka.system.actorOf(Props[MonitorLoadJob], name = "monitorLoad")
    Akka.system.scheduler.schedule(0 seconds, 10 seconds, monitorActor, Tick)
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:57:11.547

Actor 一次处理一条消息，因此如果您使用调度程序每 10 秒向 monitorActor 发送一条 Tick 消息，则在 monitorActor 中对该 Tick 消息的处理必须是顺序的——与消息是否在批次中迟到无关， 或不。

如果您观察到并发行为，那么就会出现其他问题。

# mysql - MySQL - 高性能查询的帮助

> ID：15685450
> 
> 赞同：2
> 
> 时间：2013-03-28T15:12:39.530
> 
> 标签：mysql, performance, greatest-n-per-group

我有一张表，我在其中存储了我网站的所有登录信息。结构如下：

```
TABLE users_logins

loginid INT UNSIGNED AUTO_INCREMENT PRIMARY KEY
userid INT
iplogin VARCHAR(15)
logindate datetime 
```

现在，我需要一个查询来检索使用相同 IP 进行第一次登录的用户数。结果应该是这样的：

```
iplogin | numberofaccounts 
```

正如我之前所说，“numberofaccounts”是第一次使用相同的“iplogin”登录的用户数。

该表有大约 300k 行......那么我应该怎么做才能获得我需要的良好性能？

谢谢，

L.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:15:36.663

我只需在您的用户表中为第一个登录 ip 添加一列。然后就很简单了

```
select count(*), firstip 
from users 
group by firstip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T17:11:11.610

添加这些索引：

```
alter table users_logins 
  add key (iplogin, userid, logindate),
  add key (userid, logindate); 
```

现在演示您可以通过查找同一用户没有其他早期登录的登录来执行查询以获取每个用户的最早登录。

这是获得每个用户或其他任何东西的最大/最早条目的常见解决方案。

```
select t1.iplogin, count(*) as numberofaccounts 
from users_logins as t1 
left outer join users_logins as t2 
  on (t1.userid=t2.userid and t1.logindate > t2.logindate) 
where t2.userid is null 
group by iplogin\G 
```

上面定义的索引有助于`LEFT OUTER JOIN`和`GROUP BY`。

EXPLAIN 报告显示这已经得到了很好的优化。它对两个表都使用了索引，并且不会导致临时表或文件排序，这通常是性能杀手。

它确实进行了索引扫描（`type: index`），这意味着它读取了整个索引，但至少这不是表扫描。

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: t1
   partitions: NULL
         type: index
possible_keys: iplogin
          key: iplogin
      key_len: 29
          ref: NULL
         rows: 1
     filtered: 100.00
        Extra: Using index
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: t2
   partitions: NULL
         type: ref
possible_keys: userid
          key: userid
      key_len: 5
          ref: test.t1.userid
         rows: 1
     filtered: 100.00
        Extra: Using where 
```

# spring-mvc - 防止用户在spring`Web应用程序`中使用浏览器后退按钮进行遍历

> ID：15685453
> 
> 赞同：12
> 
> 时间：2013-03-28T15:12:44.497
> 
> 标签：spring-mvc, browser, back-button

我正在使用`spring MVC`框架开发 Web 应用程序，我想限制用户在使用我的 Web 应用程序时使用浏览器后退按钮进行遍历。我怎么能在`spring`s 中这样做？是否有任何内置功能`spring`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T15:15:30.113

在您的应用程序中使用以下过滤器类，不要忘记在 web.xml 中注册此过滤器类。

```
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletResponse;

public class NoBrowserCacheFilter implements Filter{

    @Override
    public void destroy() {

    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {
        HttpServletResponse response=(HttpServletResponse)res;
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Expires", -1);
        chain.doFilter(req, res);
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {

    }

} 
```

就是这样，它解决了你的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-11-18T21:17:14.367

您可以使用这个简单的代码，这将是一个错误的返回。它将重新加载当前页面并打算禁用浏览器上的后退按钮。this 在您想要阻止的预期 jsp 中。

```
<script type="text/javascript">
    window.history.forward();
    function noBack() {
        window.history.forward();
    }
</script> 
```

并将其添加到body标签：

```
body onload="noBack();" onpageshow="if (event.persisted) noBack();" onunload="" 
```

# azure-table-storage - 非派生 POCO 和 Azure 存储

> ID：15685457
> 
> 赞同：7
> 
> 时间：2013-03-28T15:12:48.760
> 
> 标签：azure-table-storage

是否可以为 Azure 表存储提供非派生 POCO？

换句话说，一个不派生自`TableEntity`或不实施的 POCO `ITableEntity`？

必须拥有一个依赖于接口或基类的模型似乎是一个倒退，因为这会导致链中的引用向上泄漏——我无法在另一个层中设置模型，而无需了解 Azure 存储接口还是基类！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T10:00:38.613

看一下[`DynamicTableEntity`](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)（ctrl+f）。它可用于查询和插入实体。

使用这种类型，您不会在域模型中引入任何依赖项，但是您必须自己将 POCO 转换为 DynamicTableEntity - 如果您愿意使用自定义界面标记您的 POCO，则此过程可以轻松自动化并编写一个映射器（基本上你只需要一个属性字典+需要知道哪些是分区/行键）。

不能只在 Azure 表存储中保存任何实体的原因是它需要知道哪个属性充当分区键，哪个属性充当行键。必须在“较低级别”上工作的好处`DynamicTableEntity`是您可以创建仅返回属性子集的查询，从而减少资源消耗。这对您的情况可能有益，也可能无益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T14:35:18.567

看看我实现并放入 Nuget 的包： [https ://www.nuget.org/packages/ObjectFlatenerRecomposer/](https://www.nuget.org/packages/ObjectFlattenerRecomposer/)

它也被添加到下一个版本的 Azure 存储 SDK 中： [https ://github.com/Azure/azure-storage-net/pull/337/files](https://github.com/Azure/azure-storage-net/pull/337/files)

描述：

提供将复杂对象展平到 EntityProperty 字典中的功能，以及从展平的属性字典中重构原始复杂对象的功能。一种用法是 API 允许将任何具有嵌套属性的复杂对象以扁平形式写入 Azure 表存储，这通常无法通过使用 Azure 存储客户端 SDK 实现。

2.0 版现在还支持将`IEnumerable`类型属性（如列表、数组、字典）写入和读取到 Azure 表存储。

博客：[https ://doguarslan.wordpress.com/2016/02/03/writing-complex-objects-to-azure-table-storage/](https://doguarslan.wordpress.com/2016/02/03/writing-complex-objects-to-azure-table-storage/)

用法：

```
//Flatten object and convert it to EntityProperty Dictionary

Dictionary<string, EntityProperty> flattenedProperties = ObjectFlattenerRecomposer.Flatten(complexObject);

// Create a DynamicTableEntity and set its PK and RK
DynamicTableEntity dynamicTableEntity = new DynamicTableEntity(partitionKey, rowKey);

dynamicTableEntity.Properties = flattenedProperties;

// Write the DynammicTableEntity to Azure Table Storage using client SDK

//Read the entity back from AzureTableStorage as DynamicTableEntity using the same PK and RK
DynamicTableEntity entity = [Read from Azure using the PK and RK];

//Convert the DynamicTableEntity back to original complex object.
Imagine original complexObject was of type Order.

Order order = ObjectFlattenerRecomposer.ConvertBack<Order>(entity.Properties); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T20:37:58.557

首先，除了 TableEntity 和 ITableEntity 之外，还有另一种选择，即使用 DataServiceKey 属性来装饰你的类，如下例所示：

```
[DataServiceKey("PartitionKey", "RowKey")]
public class MyEntity
{
    public string PartitionKey {get; set;}
    public string RowKey {get; set;}
    public DateTime Timestamp {get; set;}
    //other properties
} 
```

但是，这并不能真正解决您不想将 Azure 实现泄漏到模型类中的问题。在这种情况下，我认为您可能希望考虑使用像[LOKAD Fat Entities](https://github.com/Lokad/lokad-cloud/wiki/FatEntities)这样的包装器实现。Lokad 会将模型对象的序列化/反序列化处理成一个包装器，而该包装器又存储在表存储中。然而，Lokad 的一个缺点是您的对象在存储中变得不透明，您无法使用诸如[Azure Storage Explorer](http://azurestorageexplorer.codeplex.com/)之类的东西浏览它们。

# c# - 如何使用数据库中的值设置标签的文本？

> ID：15685458
> 
> 赞同：2
> 
> 时间：2013-03-28T15:12:58.323
> 
> 标签：c#, asp.net, database

我在我的数据库中有一个列“Klantnummer”，
我希望该值作为我的标签文本。
我怎么做？

```
protected string conS = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Databees.mdf;Integrated Security=True;User Instance=True";
protected SqlConnection con;

protected void Page_Load(object sender, EventArgs e)
{
    con = new SqlConnection(conS);
    try
    {
        con.Open();
        string q = "SELECT * FROM tblKLanten;";
        SqlCommand query = new SqlCommand(q, con);
        SqlDataReader dr = query.ExecuteReader();
        Label1.Text = ; //I want here the value of klantnummer
        con.Close();
    }
    catch (Exception ex)
    {
        Label2.Text = "Error";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:16:59.900

您可以使用：

```
label1.Text = dr["Klantnummes"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:18:09.630

好吧，根据提供的信息，回答起来并不容易，但让我们***假设***您的结构是这样的：

```
CREATE TABLE tblKLanten (
    ID INT,
    Klantnummer VARCHAR(50)
) 
```

您需要像这样通过读取器的索引获取字段：

```
Label1.Text = dr.GetString(1); 
```

但是您还需要阅读，因此您需要在设置标签之前发出此语句：

```
bool success = dr.Read();
if (success)
{
    // set the label in here
} 
```

但请记住，它基于***返回语句中列的索引，***因此由于您发出 a ，`SELECT *`因此我无法知道索引是什么。最后，我建议进行更多更改，因此请考虑以下代码：

```
protected string conS = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Databees.mdf;Integrated Security=True;User Instance=True";
protected SqlConnection con;

protected void Page_Load(object sender, EventArgs e)
{
    con = new SqlConnection(conS);
    try
    {
        con.Open();
        string q = "SELECT * FROM tblKLanten;";
        SqlCommand query = new SqlCommand(q, con);

        using (SqlDataReader dr = query.ExecuteReader())
        {
            bool success = dr.Read();
            if (success)
            {
                Label1.Text = dr.GetString(1);
            }
        }

        con.Close();
    }
    catch (Exception ex)
    {
        Label2.Text = "Error";
    }
} 
```

那里的`using`声明将确保`SqlDataReader`妥善处理。

# php - 使用关键字拆分文件文本以分隔文本块。PHP

> ID：15685459
> 
> 赞同：1
> 
> 时间：2013-03-28T15:12:59.333
> 
> 标签：php, parsing

我有一个这种格式的文本文件：

```
[Term]
data
data
data

[Term]
data
data
data
data
data

[Term]
data
data
data
data
data 
```

并且想用[Term]这个词分割文件，并得到它下面的所有行。有什么想法适合这个命令吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:14:00.380

只需使用`file_get_contents()`将整个文件加载为字符串，然后使用`explode()`将其制成基于 Term 的数组。然后，您可以`explode()`使用换行符作为分隔符的每个元素将每行分隔为其自己的（子）元素。

如果您可以将您的结构更改为每个 Term 下的键值对，您也可以使用[parse-ini-file()](http://php.net/manual/en/function.parse-ini-file.php)来解析它。

# android - 检索 Google Data Store 提供的图像时，通用图像加载器失败

> ID：15685460
> 
> 赞同：0
> 
> 时间：2013-03-28T15:13:02.013
> 
> 标签：android, google-app-engine, mime-types, google-cloud-datastore, universal-image-loader

我的 GAE 实例提供存储在 Google 数据存储中的图像：

```
def serveAvatarByName(request,username):
    entity_list = Entity.gql("WHERE username = :1", username)
    entity = entity_list.get()     

    if entity:
        image_data = entity.image
        response = HttpResponse(image_data)

        response['Content-Type'] = entity.content_type
    else:        
        image_data = open("static/img/anonymous.png", "rb").read()        
        response = HttpResponse(image_data)

        response['Content-Type'] = 'image/png'        

    response['Accept-Ranges'] = 'bytes'
    response['Cache-Control'] = 'max-age=86400'        
    return response 
```

我的图像 URI 通常如下所示：

```
http://my-app.appspot.com/serve_avatar/user1.png 
```

我的 Android 客户端使用出色的 Sergey Tarasevich 的通用图像加载器获取这些图像，配置如下：

```
DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
    .cacheInMemory()
    .cacheOnDisc()
    .build();

ImageLoaderConfiguration config = new ImageLoaderConfiguration
    .Builder(getApplicationContext())
    .defaultDisplayImageOptions(defaultOptions).build();

ImageLoader.getInstance().init(config); 
```

并检索它们：

```
String imageUri1 = "http://my-app.appspot.com/serve_avatar/user1.png";
//String imageUri2 = "http://xpda.com/junkmail/junk207/jpgcompressionb1.png";

ImageLoader.getInstance().displayImage(imageUri1, imageView); 
```

第一个图像 (imageUri1) 是存储在我的 Google 数据存储实例中的 PNG，并且在指向 imageUri1 的浏览器中正确显示，但 UIL 失败，在日志中显示以下消息：

```
03-28 10:41:37.093: D/skia(25780): --- SkImageDecoder::Factory returned null 
```

如果我实现 onLoadingFailed 方法并打印“failReason”，我会得到“IO_ERROR”，但没有别的。

如果用户还没有上传头像图片，则会提供默认图片 (anonymous.png)。那也不行。

请注意，当访问第二个图像（imageUri2，一个 png 文件）时，UIL 可以正常工作。

标题如下所示：

imageUri1 - [http://my-app.appspot.com/serve_avatar/user1.png](http://my-app.appspot.com/serve_avatar/user1.png)：

```
HTTP request status: 200 (OK)

Date Thu, 28 Mar 2013 18:05:46 GMT
Cache-Control max-age=86400
Server Google Frontend
Accept-Ranges bytes
Content-Length 41686
Vary Cookie
Content-Type image/png 
```

imageUri2 - [http://xpda.com/junkmail/junk207/jpgcompressionb1.PNG](http://xpda.com/junkmail/junk207/jpgcompressionb1.PNG)：

```
HTTP request status: 200 (OK)

Date Thu, 28 Mar 2013 14:14:58 GMT
ETag "5de35c2e5eeca1:0"
Last-Modified Sat, 08 May 2010 19:36:30 GMT
Server Microsoft-IIS/7.0
X-Powered-By ASP.NET
Content-Type image/png
Cache-Control max-age=86400
Accept-Ranges bytes
Content-Length 535279 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:05:57.340

UIL 使用`FlushedInputStream` **1.8.2 之前**的图像下载 ( [http://code.google.com/p/android/issues/detail?id=6066](http://code.google.com/p/android/issues/detail?id=6066) )。这可能是您的问题的原因。由于默认情况下不使用 1.8.2 `FlushedInputStream`，但可以通过`ImageLoader.handleSlowNetwork(true)`.

所以尝试更新到**1.8.2**。

# c++ - 地图地图的 typedef 别名

> ID：15685461
> 
> 赞同：0
> 
> 时间：2013-03-28T15:13:02.200
> 
> 标签：c++, map, alias

一个非常简单的问题，但我找不到答案。我想做这个 ：

`ClassA* a = MapOf_ptrMap[key1][key2];`用 MapOf_ptrMap 一个`map< string , ( map < string, ClassA* >)* >`对象。

`MapOf_ptrMap[key1]`返回一个指向`map<string, ClassA*>`对象的指针（此时我想让你知道我没有设计这个，只是必须处理它）。

我已经尝试过`#define X[Key1][Key2] (*(X[Key1]))[Key2]`，但由于括号而无法正常工作。我知道它适用于括号，但我宁愿保留括号。另外困扰我的是`define`别名没有考虑类型`X`：我想用 type 检查输入`MapOf_ptrMap`类型。

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:17:11.900

坦率地说，`define`这不是“定义”类型的好方法。

改用 a `typedef`。

为了我们的理智，让我们分解一下：

```
using namespace std;
typedef map<string, ClassA *> map_value_t;
typedef map<string, map_value_t *> map_t; 
```

具有`std::`合格类型的版本（意大利面条怪物的意图）：

```
typedef std::map<std::string, ClassA *> map_value_t;
typedef std::map<std::string, map_value_t *> map_t; 
```

现在您应该可以声明一个类型为 的对象了`map_t`。

现在的问题是，我们如何从这个可怜的结构中取出东西？

```
map_t &blah; // comes from somewhere else.

map_value_t *submap = blah[i];
ClassA *value = *submap[j]; 
```

# django - 从内联 css 中删除查询字符串

> ID：15685469
> 
> 赞同：4
> 
> 时间：2013-03-28T15:13:26.943
> 
> 标签：django, query-string, django-compressor

我正在为我的小站点使用 django 压缩器，并且我不想要图像上的查询字符串。例如图像/header.png?9e1ed2cd7d15

有什么办法可以禁用它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-16T19:15:20.173

Django Compressor 允许您通过从一组将通过[`django.conf.settings.COMPRESS_CSS_FILTERS`](https://django_compressor.readthedocs.org/en/latest/settings/#django.conf.settings.COMPRESS_CSS_FILTERS)设置应用的过滤器中进行选择来控制 CSS 的压缩方式。

请注意，默认过滤器*CssAbsoluteFilter*对 url() CSS 语句中使用的 URL 进行规范化，并将哈希附加到处理后的 URL。您可以控制使用该`django.conf.settings.COMPRESS_CSS_HASHING_METHOD`设置生成的哈希类型。

根据文档，您对散列方法的唯一选择是“mtime”或“内容”，但似乎[两周前有一个提交](https://github.com/thenewguy/django_compressor/commit/14f6bd506d3bdf0a7a63ddf7a8a98d4d777b7756)添加了对 None 作为选项的支持。理论上，如果您从 GitHub 安装最新版本，并将该选项设置为“无”，则应该可以摆脱那些查询字符串。

如果做不到这一点，您总是可以尝试完全删除*CssAbsoluteFilter*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T21:44:20.050

通过`pip install django_compressor`（[在此处详述](https://django-compressor.readthedocs.io/en/latest/quickstart/#installation)）进行的全新安装应该可以正常工作，就像对我一样。它只对 css 文件进行哈希处理，使用以下代码进行压缩：

```
{% compress css %}
  <link href="yourstyle.css" rel="stylesheet">
{% endcompress %} 
```

# matlab - 如何显示 5 个相对于查询图像具有最小欧几里得距离的图像

> ID：15685470
> 
> 赞同：0
> 
> 时间：2013-03-28T15:13:28.670
> 
> 标签：matlab, image-processing, euclidean-distance

假设我有一个查询图像，以及一个有 10 个图像的 matlab 数据库。我可以读出并显示一张相对于查询图像具有最小欧几里德距离的图像。但是现在，我想从该数据库中读取并显示至少 5 张图像，这意味着我想在五个不同的窗口中读取并显示五张图像。

我的读取和显示具有最小欧几里得距离的单个图像的程序如下：

```
G=imread('spine.tif');

H = adapthisteq(G,'clipLimit',0.01,'Distribution','rayleigh');

[rows cols]=size(H);

[c1,s1]=wavedec2(H,1,'db1');

X=c1;

figure,imshow(G);

figure,imshow(H);

fileFolder=fullfile(matlabroot,'toolbox','images','imdata');

dirOutput=dir(fullfile(fileFolder,'*.tif'));

fileNames={dirOutput.name}

n=numel(fileNames)

g=zeros(1,n)

for k = 1 : n

fileNames1=strcat('fullfile(fileFolder)',fileNames(k))

I = imread(fileNames{k});

J = adapthisteq(I,'clipLimit',0.01,'Distribution','rayleigh');

J = imresize(J, [rows cols]);

[c2,s2]=wavedec2(J,1,'db1');

Y=c2;

E_distance = sqrt(sum((X-Y).^2));

g(1,k)=E_distance;

if g(1,k)==0

    w=k;
    end
end

disp(g);

II=imread(fileNames{w});

figure, imshow(II); 
```

我的问题是，如何在五个不同的窗口中读取并显示该数据库中的至少五张图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:46:11.257

如果我正确理解您的代码，您当前仅显示距离等于零（`if g(1,k)==0, w=k; end`）的图像，而不是距离最小的图像。

如果你有距离，`g`你可以简单地对数组进行排序并取前五个。

```
[sorted,IX] = sort(g);
firstFiveIndexes = IX(1:5);

for I = 1:length(firstFiveIndexes)
  figure;imshow(imread(fileNames{firstFiveIndexes(I)}));
end 
```

如果您有很多图像，则遍历数组并保持五个最小距离会比排序更快，但 imo 不值得麻烦。

# bash - sed 获取行间文本

> ID：15685471
> 
> 赞同：3
> 
> 时间：2013-03-28T15:13:30.160
> 
> 标签：bash, unix, sed, awk

我在文件中有提示历史记录：

```
[user@host path]# echo $first 
14556
....
[user@host path]# echo $second
65541
....
[user@host path]# echo $first
12345
[user@host path]# command
unknow number of rows
[user@host path]# echo $second
54321
[user@host path]# 
```

`$first`并且`$second`是随机值，其中有很多在一个文件中。如何在文件末尾获取文本`echo $first`和`echo $second`输出？IE

```
[user@host path]# command
unknow number of rows
[user@host path]# echo $second 
```

看来我可以使用

```
sed -n '/WORD1/,/WORD2/p' file 
```

但我不知道如何写 $first 和 $second 而不是 WORD1 和 WORD2

那么我只需要获取（不知道行数）。为此，我将使用\

```
sed -e '1d' -e '$d' file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:45:21.473

如果我理解正确，您可以简单地写：

```
sed -n "/$first/, /$second/ p"  file 
```

`"`允许 bash 评估变量，不像`'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:20:53.843

使用带有`awk`and的打印标志`tac`：

```
$ tac file | awk '/\$first/{p=0;exit}p;/\$second/{p=1}' | tac
12345
[user@host path]# command
unknow number of rows 
```

这将获得最后一次出现之后`$first`和出现之前的行`$second`。

# java - 无法从本地 AppEngine 数据存储中删除对象

> ID：15685484
> 
> 赞同：0
> 
> 时间：2013-03-28T15:14:07.393
> 
> 标签：java, google-app-engine, objectify

您好我正在使用 Objectify 来管理 AppEngine 数据存储区。我有以下对象：

> ```
> public class Config implements Serializable{ @Id Long id ;} 
> ```

我还有一个存储库，它使用`ofy().get() and ofy().put()`：

```
public class ConfigRepo extends DAOBase{}; 
```

注意：这是本地主机

我从 appengine 生成的文件中删除了 local_db.bin 并清除了内存缓存。但是，当我尝试运行时

> ofy.delete（所有键）

清除数据存储区出现错误：

```
java.lang.IllegalArgumentException: id cannot be zero 
```

或者

```
java.lang.IllegalArgumentException: Config(no-id-yet) is incomplete. 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:12:15.137

问题解决了。

原来有两个 local_db.bin 一个在 root/war/WEB-INF/appengine-generated 和一个在 root/WEB-INF/appengine-generated 我不得不从这两个位置删除 local_db.bin。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:43:14.117

问题一定出在初始化 allKeys 的代码中，您没有传入正确的实体 ID。也许您是在实体被持久化并生成 ID 之前生成密钥。如果这没有帮助，请显示代码的相关部分！

# android - Android收缩和增长顺序动画

> ID：15685485
> 
> 赞同：9
> 
> 时间：2013-03-28T15:14:14.967
> 
> 标签：android, animation

我想制作一个连续动画，其中两个按钮缩小直到它们消失，然后它们再次增长到原来的大小。当我运行它时，按钮只是消失而没有任何动画

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:fillAfter="true">

    <scale
        android:fromXScale="1"
        android:toXScale="0"
        android:fromYScale="1"
        android:toYScale="0"
        android:duration="400"
        android:pivotX="50%"
        android:pivotY="50%"
        /> 

    <scale
        android:startOffset="700"
        android:fromXScale="0"
        android:toXScale="1"
        android:fromYScale="0"
        android:toYScale="1"
        android:duration="400"
        android:pivotX="50%"
        android:pivotY="50%"
     /> 

</set> 
```

```
Animation sgAnimation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.shrink_grow);
btPrimary.startAnimation(sgAnimation);
btSecondary.startAnimation(sgAnimation); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2019-05-30T07:24:12.457

```
val scaleDown = ObjectAnimator.ofPropertyValuesHolder(
    view,
    PropertyValuesHolder.ofFloat("scaleX", 0.5f),
    PropertyValuesHolder.ofFloat("scaleY", 0.5f)
)
scaleDown.duration = 2000
scaleDown.repeatMode = ValueAnimator.REVERSE
scaleDown.repeatCount = ValueAnimator.INFINITE
scaleDown.start() 
```

**演示**

![](../Images/2648a120ecf93b6b4a3deb2a1aea44b2.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-26T08:31:37.787

以下是一个可以（无休止地）工作的增长/收缩动画。设置动画重复计数当然不起作用，但您可以自己添加一个计数器来停止它。

```
 final ScaleAnimation growAnim = new ScaleAnimation(1.0f, 1.15f, 1.0f, 1.15f);
    final ScaleAnimation shrinkAnim = new ScaleAnimation(1.15f, 1.0f, 1.15f, 1.0f);

    growAnim.setDuration(2000);
    shrinkAnim.setDuration(2000);

    viewToAnimate.setAnimation(growAnim);
    growAnim.start();

    growAnim.setAnimationListener(new AnimationListener()
    {
        @Override
        public void onAnimationStart(Animation animation){}

        @Override
        public void onAnimationRepeat(Animation animation){}

        @Override
        public void onAnimationEnd(Animation animation)
        {
            viewToAnimate.setAnimation(shrinkAnim);
            shrinkAnim.start();
        }
    });
    shrinkAnim.setAnimationListener(new AnimationListener()
    {
        @Override
        public void onAnimationStart(Animation animation){}

        @Override
        public void onAnimationRepeat(Animation animation){}

        @Override
        public void onAnimationEnd(Animation animation)
        {
            viewToAnimate.setAnimation(growAnim);
            growAnim.start();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-26T09:22:46.110

使用 `android:repeatMode="reverse"` `android:repeatCount="infinite"`然后它会重复无限时间我在我的补间动画中使用它它的工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T13:07:17.190

Use the following code, this is the working code. copy this shrink_grow.xml in anim folder.

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillAfter="false"
android:fillBefore="false"
android:shareInterpolator="true" >

<scale
    android:duration="1000"
    android:fillAfter="true"
    android:fillBefore="false"
    android:fillEnabled="true"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:toXScale="0.0"
    android:toYScale="0.0" />
<scale
    android:duration="1000"
    android:fillAfter="true"
    android:fillBefore="false"
    android:fillEnabled="true"
    android:fromXScale="0.0"
    android:fromYScale="0.0"
    android:startOffset="1000"
    android:toXScale="1.0"
    android:toYScale="1.0" />

</set> 
```

in the code:

```
Animation sgAnimation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.shrink_grow);
btPrimary.startAnimation(sgAnimation);
btSecondary.startAnimation(sgAnimation); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-10T10:01:37.817

```
 final ScaleAnimation growAnim = new ScaleAnimation(1.0f, 1.5f, 1.0f, 1.5f, Animation.RELATIVE_TO_SELF, 0.5F, Animation.RELATIVE_TO_SELF, 0.5F);
    final ScaleAnimation shrinkAnim = new ScaleAnimation(1.5f, 1.0f, 1.5f, 1.0f, Animation.RELATIVE_TO_SELF, 0.5F, Animation.RELATIVE_TO_SELF, 0.5F);

    growAnim.setDuration(2000);
    shrinkAnim.setDuration(2000);

    view.setAnimation(growAnim);
    growAnim.start();

    growAnim.setAnimationListener(new Animation.AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            view.setAnimation(shrinkAnim);
            shrinkAnim.start();
        }
    });
    shrinkAnim.setAnimationListener(new Animation.AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            view.setAnimation(growAnim);
            growAnim.start();
        }
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-09T20:34:31.207

将此添加到 anim 文件夹中的 xml 中。

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:interpolator="@android:anim/linear_interpolator">
    <scale
        android:duration="1000"
        android:fromXScale="1"
        android:fromYScale="1"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="1.15"
        android:toYScale="1.15"
        android:repeatCount="infinite"
        android:repeatMode="reverse"/>
</set> 
```

# facebook - 从 Facebook 活动墙获取照片（包括非朋友的公开照片）

> ID：15685487
> 
> 赞同：0
> 
> 时间：2013-03-28T15:14:17.310
> 
> 标签：facebook, facebook-graph-api, facebook-java-api, facebook-java-sdk, facebook-events

我一直在尝试使用图形 API 向 Facebook 发出 GET 请求，以检索发布到事件墙的所有照片。我想拥有它们，这样它们就可以像电视屏幕上的“活剪贴簿”一样显示。

我向 /EVENT_ID/photos 发出了 GET 请求，但我收到的只是我和我的朋友发布的照片​​。任何不是我朋友的人发布的照片​​根本不会出现。

我向 /EVENT_ID/feed 发出了 GET 请求，我确实收到了所有帖子，但照片显示如下：

```
{
  "id": "487778861276668_487912981263256",
  "from": {
    "name": "Nicu Tinar",
    "id": "100005604480588"
  },
  "to": {
    "data": [
      {
        "name": "Te Noiembrie",
        "start_time": "2013-11-14T19:30:00+0200",
        "timezone": "Europe/Bucharest",
        "location": "Piața Unirii",
        "id": "487778861276668"
      }
    ]
  },
  "actions": [
    {
      "name": "Comment",
      "link": "https://www.facebook.com/487778861276668/posts/487912981263256"
    },
    {
      "name": "Like",
      "link": "https://www.facebook.com/487778861276668/posts/487912981263256"
    }
  ],
  "privacy": {
    "value": ""
  },
  "type": "status",
  "created_time": "2013-03-27T20:50:37+0000",
  "updated_time": "2013-03-27T20:50:37+0000",
  "comments": {
    "count": 0
  }
}, 
```

（别担心这是一个假的测试帖子和事件）

如您所见，帖子的存在已被确认，但我没有得到图片 URL。

这是怎么回事？我怎样才能从这个事件墙贴中获取图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:28:14.973

Due to privacy, I don't think it's possible to do it through the API.

# c# - 如何在 windowsforms 中显示组合框选定项的全文？

> ID：15685490
> 
> 赞同：2
> 
> 时间：2013-03-28T15:14:26.607
> 
> 标签：c#, .net, winforms, combobox

我在做 Windows 项目时遇到了一个问题。认为你们可以帮助我找到一些解决方法。

问题 - 我在包含可变长度项目列表的表单上有下拉菜单。有时文本的宽度超过下拉菜单的宽度并且文本被截断。我想想出一种方法来显示全文。我尝试包含工具提示，当下拉菜单展开时它工作正常，但当下拉状态折叠时工具提示被隐藏。我想以工具提示或其他方式显示下拉列表中所选项目的全文。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:25:34.920

方法有很多种，

1）最明显的一个使组合框更大

2）像现在一样使用工具提示，但将其扩展到组合框鼠标悬停事件

3）创建一个具有所需长度和高度的标签（标签也可以换行）。使用 Combobox MouseHover、MouseLeave、DropDown 事件来使用所需的文本来操纵标签，并使用标签可见属性根据需要显示和隐藏。

除了在工具提示上使用标签，您将拥有更多的功能和灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:37:26.237

试试这个：

```
private SizeF GetMaxSize(List<string> items)
{
    Graphics g = CreateGraphics();
    SizeF size;
    SizeF oldSize = new Size(0f,0f);

    foreach(string item in items)
    {
        size = g.MeasureString(item, myComboBox.Font);
        if (size.Width > oldSize.Width) {
            oldSize.Width = size.Width
            oldSize.Height = size.Height
        }
    }

    return oldSize;
} 
```

只需将`List<T>`您将在组合框中填充的所有字符串的集合传递给它，它就会找到字符串中的最大宽度。然后，您可以相应地调整组合框的宽度。`myComboBox.Width = GetMaxSize().Width`

# javascript - setTimeout 在经过的时间内将 +1 添加到 for 循环“i”

> ID：15685493
> 
> 赞同：2
> 
> 时间：2013-03-28T15:14:33.100
> 
> 标签：javascript, jquery

我有 3 个顺序或下级下拉菜单，可以由用户选择（效果很好），或者在某些情况下需要通过 js 选择。

我设置了一个超时时间，让 js 有时间填充第一个下拉列表，然后才能在序列中选择选项。否则它不起作用。

问题是，在 setTimeout 的经过时间内，var "i" 被添加了一个，这会抛出脚本。

如果在我只有一个输入要考虑的情况下强制“i”等于零，这将正常工作。由于这是动态的，我不能这样做，我正在寻找阻止这种行为的方法。

下面的代码在第二个下拉列表中停止。

在这种情况下，setTimeout 是一个好的解决方案吗？谢谢。

```
$( document ).ready(function() {
    var ctvid = <?php echo $ctvid ;?>;
    if(ctvid !=""){
    var info = <?php echo json_encode ($info);?>;
    for (var i=0;i<ctvid;i++){
        $('#brand' + i).val(info['brand_id'][i]).change();
            setTimeout(function(){
            $('#model' + i).val(info['model_id'][i]).change(); 
            },500); 
    }   
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:27:32.850

内部没有被捕获`i`在`setTimeout`闭包中，您需要通过将其手动包装在自执行匿名函数中来创建闭包：

```
for (var i=0; i<ctvid; i++) {
    (function(i) {
        setTimeout(function() {
            $('#model' + i).val(info['model_id'][i]).change(); 
        },500); 
    })(i);
} 
```

在您的代码`i`中始终具有每个元素的最后一个值。[示例小提琴在这里](http://jsfiddle.net/3CHhJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:19:46.620

最好避免在这种情况下使用时间，因为慢速连接很容易破坏它。我认为，在“自动”情况下，最好在元素（例如 body ）上设置数据属性，您可以检查选择群体的完整功能。

澄清：

根据`functionB()`selectA 的选择，用元素填充 selectB。在该函数中，检查是否设置了某些内容。如果是这样，请使用它来选择您刚刚填充的 selectB 中的项目，从而触发 selectC 填充。

# matlab - 美化 Matlab 的输出，也就是人类可读的输出形式？

> ID：15685498
> 
> 赞同：0
> 
> 时间：2013-03-28T15:14:49.350
> 
> 标签：matlab, math, output, symbolic-math

```
syms x y z;
solve(x==y+1, y^2==z,z==9) 

ans = 

x: [2x1 sym] 
y: [2x1 sym] 
z: [2x1 sym] 
```

现在我想看到像 Mathematica 输出的`{{x->-2,y->-3,z->9},{x->4,y->3,z->9}}`结果`Solve[{x == y + 1, y^2 == z, z == 9}, {x, y, z}]`。工作区窗口和变量编辑器向我显示了[这一点](http://i.stack.imgur.com/GYZeC.png)，但我仍然看不到存储在那里的实际值。

**如何以人类可读的形式（即美化形式）查看 Matlab 的输出？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:21:33.630

国家的文件[`solve`](http://www.mathworks.com/help/symbolic/solve.html)：

> 求解方程组时，使用一个输出参数以结构体数组的形式返回解

结果作为结构返回，因此您可以访问每个字段以查看其值。该文档提供了如何执行此操作的示例：

```
S = solve(x==y+1, y^2==z, z==9);
[S.x, S.y, S.z] 
```

这应该导致：

```
ans =
     4     3     9
    -2    -3     9 
```

或者，您可以通过指定多个输出参数以单独的变量返回解决方案：

```
[solx, soly, solz] = solve(x==y+1, y^2==z, z==9) 
```

这将导致：

```
solx =
     4
    -2

soly =
     3
    -3

solz =
     9
    -9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:19:42.583

在 MATLAB 中查看结构类型的内容并不简单。一种快速的方法是执行以下操作：

```
r=struct2cell(solve(x==y+1, y^2==z,z==9));
r{:}

ans =

  4
 -2

ans =

  3
 -3

ans =

 9
 9 
```

如果您想识别实际的变量名称，我认为您需要编写一个自定义例程来打印您希望它们出现的方式。

# java - JFrame - 使用 JComponent 和 MouseListener 进行鼠标单击

> ID：15685502
> 
> 赞同：1
> 
> 时间：2013-03-28T15:14:56.037
> 
> 标签：java, swing, jframe, jcomponent, mouselistener

有 2 节课 -

```
public class MainClass {

  public static void main(String[] args)  {
    JFrame frame = new JFrame();
    ....
    Component mouseClick = new MyComponent()  ; 
    frame.setVisible(true);
}

public class MyComponent extends JComponent implements MouseListener {

    @Override
    public void mouseClicked(MouseEvent arg0) {
        System.out.println("here was a click ! ");

    }
    ...

} 
```

我试图在`frame`监听器上设置鼠标单击，但是当我运行它然后按下鼠标单击时没有任何反应。

如何使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:33:31.767

为了在您的框架上接收鼠标点击，您还需要`mouseClick`将`MouseListeners`. 创建后尝试添加此行`mouseClick`：

```
frame.addMouseListener((MouseListener) mouseClick); 
```

# php - 如何仅从zend框架中的url中删除索引控制器

> ID：15685503
> 
> 赞同：1
> 
> 时间：2013-03-28T15:14:58.147
> 
> 标签：php, zend-framework, url, router

在项目中，我有很多控制器，例如 Index、Member、Download。

现在我想将 www.test.com/index/product 之类的网址设为 www.test.com/product

但不想将网址 www.test.com/member/signup 更改为 www.test.com/signup

PS：我在application.ini中添加了4行

```
resources.router.routes.default.chains.index.type = "Zend_Controller_Router_Route"
resources.router.routes.default.chains.index.route = ":controller/:action/*"
resources.router.routes.default.chains.index.defaults.controller = "index"
resources.router.routes.default.chains.index.defaults.action = "index" 
```

困扰了我很多天，希望有人指出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:57:01.290

假设您实际上没有产品控制器，您可以添加以下内容：

```
resources.router.routes.default.chains.index.type = "Zend_Controller_Router_Route"
resources.router.routes.default.chains.index.route = "product/"
resources.router.routes.default.chains.index.defaults.controller = "index"
resources.router.routes.default.chains.index.defaults.action = "product" 
```

现在***www.test.com/index/product***和***www.test.com/product***都可以工作并最终在同一个地方。

# c# - 如何在 LongListSelector 中显示/隐藏（如果可能，使用动画）复选框

> ID：15685504
> 
> 赞同：3
> 
> 时间：2013-03-28T15:15:01.503
> 
> 标签：c#, windows-phone-7, windows-phone-8, expression-blend

我已经在 MSDN 上搜索了好几个小时，但找不到如何在 Windows Phone 8 的列表中显示或隐藏 CheckBox 的示例。例如在消息传递应用程序中，用户使用应用程序栏按“多项选择”按钮。这允许用户选择多个消息。

我遇到了一些关于使用 Expression Blend 的信息，`VisualStateManager`但由于某种原因，它似乎无法将状态组应用于`LongListSelector`.

我想要做的只是创建一个与 Windows Phone 8 消息传递应用程序中的列表完全相同的列表吗？任何帮助将非常感激。

到目前为止我的 XAML 代码：

```
<phone:LongListSelector x:Name="albumList" SelectionChanged="OnSelectionChanged" ItemsSource="{Binding Items}" >
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <Grid Margin="0, 12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Image x:Name="albumArt" Grid.Column="0" Width="96" Height="96" Source="{Binding CoverAddress}" Stretch="Uniform" Margin="12,0,0,0 " />
                <StackPanel Grid.Column="1" Margin="0,0,0,17" VerticalAlignment="Center" >                           
                    <TextBlock Text="{Binding AlbumTitle}" TextWrapping="Wrap" Margin="12,0,0,0" FontSize="24"/>
                    <TextBlock Text="{Binding ArtistName}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                </StackPanel>
                <CheckBox Grid.Column="2" />
            </Grid>
        </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

![在按下应用程序栏按钮之前](../Images/a05eb95f64b324cef13f410992149ea8.png) ![在此处输入图像描述](../Images/df80e3990264d590a3d6fcbc750c2ca7.png)

以上是 Windows Phone 8 中消息传递应用程序的屏幕截图。它们显示了在按下应用程序栏中的按钮后从列表到多选列表的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:27:44.923

听起来您想使用`MultiSelectList`Windows [Phone 工具包](http://phone.codeplex.com/)中的 ，它可以重新创建您正在寻找的效果。

有关如何使用它的信息，请参阅[此博客文章](http://www.geekchamp.com/articles/windows-phone-toolkit-multiselectlist-in-depth--part1-key-concepts-and-api)或工具包源代码中包含的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T18:54:36.980

您需要做的就是将**EnforceIsSelectionEnabled**设置为 true 或 false 以使用 LongListMultiSelector 显示或隐藏复选框

# python - 更改 sys.stdin 模式

> ID：15685505
> 
> 赞同：1
> 
> 时间：2013-03-28T15:15:02.723
> 
> 标签：python, stdin, sys

如何更改`stdin`打开方式？具体来说，我们将 CSV 文件传送到 python 脚本以清理数据，但数据中的垂直制表符似乎需要处于通用换行模式。

问题数据似乎是`\x0b`输入流中的一些字符。

正如 python 打印的那样，在使用 'rU' 打开文件之一后

```
['P', 'B', '', '1 W Avene, #8\x0bMiami Beach, FL 33139']
['S', 'H', '\x0bElberon, NJ 07740', '9 E Avenue\x0bElberon, NJ 07740']
['C', 'W', 'E R A', '2 B 3rd Floor \x0bNew York NY 10023 ']
['D', 'M', '', '1 K Street, NW\x0bWashington, DC 20005']
['E', 'W', '', '5 P C Lane\x0bDenver, CO 80209-3311'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:09:53.757

您的问题是您正在阅读的 CSV 文件仅使用 CR ( `\r`) 换行符；它与垂直标签无关。Python 2.x`stdin`在没有通用线路支持的情况下打开（以便二进制文件正常工作）。

作为一种解决方法，您可以尝试这个，假设您的输入相对较小：

```
csv.reader(sys.stdin.read().split('\r')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:40:33.167

根据[PEP 278](http://www.python.org/dev/peps/pep-0278/)通用换行符默认开启。

> 默认情况下启用通用换行支持，但可以在配置 Python 期间禁用。

你有任何样本数据吗？

# python - Django sweetpie 高级过滤

> ID：15685507
> 
> 赞同：0
> 
> 时间：2013-03-28T15:15:03.913
> 
> 标签：python, django, filter, tastypie

我正在尝试在我的资源中实现高级过滤器，但我需要一些帮助来构建和应用我自己的过滤器。目标是在我的 api UserResource 中获取过滤器信息，然后通过这样的 url 获取对象列表：

```
http://127.0.0.1:8000/api/users/list/&orderby="gender"&limit=10 
```

实际上，我的资源如下所示：

```
class UserResource(Resource):

   firstName = fields.CharField(attribute='firstName')
   lastName = fields.CharField(attribute='lastName')
   gender= fields.CharField(attribute='gender')
   status= fields.IntegerField(attribute='status')
   date= fields.DateTimeField(attribute='date')

   class Meta:
       resource_name = 'users/list'
       object_class = dict2obj
       authorization = Authorization()

   def detail_uri_kwargs(self, bundle_or_obj):
       kwargs = {}
       if isinstance(bundle_or_obj, Bundle):
           kwargs['pk'] = bundle_or_obj.obj.firstName
       else:
           kwargs['pk'] = bundle_or_obj.firstName
       return kwargs

   def obj_get_list(self, request=None, **kwargs):
       db = MySQLdb.connect(host='xxx.xxx.xxx',user='test2',passwd='xxx',db='mydb')
       cur = db.cursor()
       cur.execute("SELECT * FROM users order by gender Desc limit 0,10")
       users=cur.fetchall()
       #...
       db.close()
       return posts 
```

我想知道如何获取过滤器信息以返回我的 obj 列表。

# javascript - 在 Javascript 或 Underscore 中，我可以计算数组中子字符串的实例数吗？

> ID：15685508
> 
> 赞同：1
> 
> 时间：2013-03-28T15:15:04.927
> 
> 标签：javascript, underscore.js

这一定很简单，但我无法弄清楚如何计算数组中子字符串的数量。我缺少的下划线中的任何内容？

```
var foo = ["fred", "ted", "medical", "car"]

function howManySubstringsInArray(arr, word){
    var i = arr.length,
    j = 0;
    while (i) if (arr[--i].indexOf(word))++j;
    return j;
}

howManySubstringsInArray(foo, 'ed')
Output => 3 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:18:43.477

假设您不关心每个数组元素*内的*[`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)重复匹配，您可以在数组中找到匹配的元素：

注意：这是一个标准的 ECMAScript 5 函数，而不是下划线。上面的链接中有一个适用于旧版浏览器的 shim。

```
function howManySubstringsInArray(arr, word) {
    return arr.filter(function(v) {
        return v.indexOf(word) >= 0;
    }).length;
} 
```

严格来说，这是创建一个新数组，这*有点*浪费，因为我们所做的只是计算元素，但对于“小”列表，这无关紧要。

无论如何，一个裸循环实际上可以很好地工作 - 您只需要确保循环结构正确，并且您实际上查看了`.indexOf`调用的结果。您现有的向后迭代使循环条件比它们需要的更难遵循：

```
function howManySubstringsInArray(arr, word) {
    var i = 0, n = arr.length, count = 0;
    for ( ; i < n; ++i) {
        if (arr[i].indexOf(word) >= 0) {
             ++count;
        }
    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:18:41.663

您的 while 循环需要检查实际索引。

```
 while (i) if (arr[--i].indexOf(word) !== -1) ++j; 
```

你也可以`reduce`在这里很好地使用：

```
function howManySubstringsInArray(arr, word){
  return _.reduce(arr, function(count, val){
    return count + (val.indexOf(word) === -1 ? 0 : 1)
  }, 0);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T15:21:01.820

```
function howManySubstringsInArray(arr,str)
{
var count=0;
   $.each(arr,function(i,item)){
   if(item.indexOf(str)!=-1)
    {
      count ++;
    }
  });
 return count;
} 
```

如果需要，将 $.each 更改为 for。

# java - 有没有快速列出“A:/”-“Z:/”的方法

> ID：15685515
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:15:18.257
> 
> 标签：java

```
Object[] possibilities = { "A:/", "B:/", "C:/" };
        String drive = (String) JOptionPane.showInputDialog(frame,
                "Pick a Drive", " ", JOptionPane.PLAIN_MESSAGE, null,
                possibilities, "C:/"); 
```

有没有更快的方法来使选项“A：/”到“Z：/”`possibilities`而不必写出每个字母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:23:18.137

如果您只想使用 AZ 中的所有驱动器号填充数组，则以下循环应该可以工作（假设您声明`poss`的长度为 26 或更大）：

```
for (int i = 0; i < 26; i++) {
    poss[i] = (char) ('A' + i) + ":/";
} 
```

# javascript - Android Phonegap插件错误中的Base64到PNG

> ID：15685522
> 
> 赞同：0
> 
> 时间：2013-03-28T15:15:38.980
> 
> 标签：javascript, android, phonegap-plugins

我对 Phonegap 和 Java 还很陌生，并试图将 png 保存到 sdcard。我一直在关注这篇文章并在那里采取了所有步骤：[Phonegap Plugin:How to convert Base64 String to a PNG image in Android](https://stackoverflow.com/questions/11388018/phonegap-plugin-to-convert-base64-string-to-a-png-image-in-android)

当我调用 saveImage 方法时，我只收到警告：“无效操作”，我不知道为什么，有谁对这个特定插件有更多经验？

调用插件方法的js代码：

```
function onDeviceReady(){
    var myCanvas = getCanvas();
    var myBase64 = myCanvas.toDataURL("image/png");
    //console.log(myBase64);
    //Shows how to use optional parameters
    window.plugins.base64ToPNG.saveImage(myBase64, {filename:"inbjudan.png", overwrite: true}, 
    function(result) {
        alert(result);
    }, function(error) {
        alert(error);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:08:21.773

修改你的 Base64ToPNG.js，动作应该是“saveImage”

```
 Base64ToPNG.prototype.savePDF = function(b64String, params, win, fail) {
        cordovaRef.exec(win, fail, "Base64ToPDF", "saveImage", [b64String, params]);
    }; 
```

并且插件在 Base64ToPNG.java 中有错误 更改此

```
 String b64String = "";
    if (b64String.startsWith("data:image")) {
        b64String = args.getString(0).substring(21);
    } else {
        b64String = args.getString(0);
    } 
```

为了

```
 String b64String = "";
    if (args.getString(0).startsWith("data:image")) {
        b64String = args.getString(0).substring(22);
    } else {
        b64String = args.getString(0);
    } 
```

现在插件应该正确格式化字符串。

# eclipse - 自动 Mylyn 提交消息中的环境变量（或类似的东西）——可能吗？

> ID：15685525
> 
> 赞同：4
> 
> 时间：2013-03-28T15:15:51.127
> 
> 标签：eclipse, svn, version-control, jira, mylyn

我当前的项目要求我们为提交消息遵循某种格式。（该项目使用SVN。）

在 Mylyn 格式中，它将转换为如下内容：

`${USER_INITIALS}: ${task.key} [(${connector.task.prefix}) "${task.description}"] -`

该`${USER_INITIALS}`变量是“伪代码”，而其余的是工作 Mylyn 提交变量。

如果我可以使用环境变量并将模板保存到`.settings/org.eclipse.mylyn.team.ui.prefs`. 然后，项目中的每个人都可以使用它。

我*已经*尝试了上面的实际伪代码（以及已经存在的`PATH`环境`USER`变量）。显然，这些都没有解决，因为在提交时，它们被替换为空字符串。

有解决办法吗？

* * *

PS 为什么不只依赖 SVN 用户名，这已经是每个 SVN 提交的属性？因为我们已经将 SVN 与我们的 LDAP 服务器集成，它返回我们的（数字）EMPLID，如果没有手动查找，任何人都无法归因于它。因此，它对于一目了然的归因（这是所期望的）并不是非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:23:39.693

你能用 ${task.assignee} 吗？对我来说，返回相关用户的首字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:56:17.990

我同意 Mylyn 应该能够将环境变量提取到提交消息中，但我认为目前还不可能。

我查看了 Mylyn 源代码和文档，无法找到直接在 Mylyn 中完成此操作的方法，我认为您唯一的选择是创建一个 SVN 挂钩/触发器，它可以为您扩展环境变量或注入它们在所有提交日志消息中的特定位置。

作为参考，我从这里检查了代码库的副本：[http ://wiki.eclipse.org/index.php/Mylyn/Contributor_Reference#Active_branches](http://wiki.eclipse.org/index.php/Mylyn/Contributor_Reference#Active_branches)

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/commons/codec/DecoderException

> ID：15685527
> 
> 赞同：7
> 
> 时间：2013-03-28T15:15:55.857
> 
> 标签：java, solr, solrj

我尝试通过 Solrj 查询 Solr

这是我的代码

```
public class ReadFromSolr {

public static void main(String[] args) throws MalformedURLException, SolrServerException 
{
     String url = "http://localhost:8983/solr";
      try{
     SolrServer server = new CommonsHttpSolrServer(url);
     ModifiableSolrParams params = new ModifiableSolrParams();
       params.set("qt", "/select");
        params.set("q", "name");

            QueryResponse response = server.query(params);

            System.out.println("response = " + response);

      }

         catch (MalformedURLException ex) {
            ex.printStackTrace();
        } 
      catch (SolrServerException ex) {
            ex.printStackTrace();
        } 

} 
```

}

它给了我一个例外

PS。我的项目中有以下罐子：

****apache - commons-logging，
* *httpclient -4.2，
httpcore 4.2.1，slf4j - api 1.6.2，
apache - solr - solrj -1.4.0* *****

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/codec/DecoderException
        at org.apache.commons.httpclient.HttpMethodBase.<init>(HttpMethodBase.java:220)
        at org.apache.commons.httpclient.methods.GetMethod.<init>(GetMethod.java:89)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:288)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:243)
        at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:89)
        at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:118)
        at com.gismo.ReadFromSolr.main(ReadFromSolr.java:27)
    Caused by: java.lang.ClassNotFoundException: org.apache.commons.codec.DecoderException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T15:18:55.930

您需要类路径上的[commons-codec.jar](http://commons.apache.org/proper/commons-codec/download_codec.cgi)。

# ruby - 无法从同一网络上的另一台计算机访问本地 Sinatra 服务器

> ID：15685528
> 
> 赞同：43
> 
> 时间：2013-03-28T15:15:56.770
> 
> 标签：ruby, web-services, sinatra

我有一个简单的 Sinatra 服务器，我通过 textmate 运行，但我无法从同一网络上的另一台计算机访问。

我在 Mac OS 10.8.3 上运行 Ruby 1.9.3p327 和 Sinatra 1.4.1。防火墙被禁用。

我在不同的网络和计算机上测试了相同的场景。

计算机响应简单的 ping，但是当我尝试 telnet 端口 4567 时，我无法建立连接。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-28T18:31:29.863

由于安全问题，最近有一个[对 Sinatra 的提交](https://github.com/sinatra/sinatra/commit/0f9a959253bdf0c39422ffb9b60278df46ef0248)将默认侦听地址更改为`localhost`开发模式。`0.0.0.0`

为了明确允许从网络访问，您需要以另一种模式（例如生产）运行您的应用程序，或者将[`bind`选项](http://www.sinatrarb.com/configuration.html#__server_hostname_or_ip_address)设置为`0.0.0.0`.

您可以使用以下选项从命令行使用内置服务器执行此操作`-o`：

```
$ ./my_sinatra_file.rb -o 0.0.0.0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T15:37:26.270

确保 sinatra 服务器不只监听 localhost (127.0.0.1) ip 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-12T21:51:26.710

我正在附上一些额外的信息，这些信息可能会帮助像我这样的人把头撞到墙上。

我在 Windows 机器上，而不是 Mac 上，我必须向公众开放我正在使用的端口（Sinatra 的默认端口是 4567）（即使我在大学网络上）。

要在 Windows 10 中执行此操作：

1.  点击windows键
2.  搜索防火墙并回车
3.  进入高级设置
4.  点击左上角的入站规则
5.  点击右上角的新规则
6.  点击端口选项
7.  输入您的端口（对于 Sinatra 可能是 4567）
8.  下一个
9.  现在从域/私有/公共中选择。

现在要考虑的另一件事是谁可以访问您的 Web 服务器。如果你想要任何人，然后选择公开。我不确定（并且会喜欢其他人的意见）如何仅让同一公共网络上的设备进行连接。您也可以允许特定 IP 通过，但为此我建议您自己进行一些研究。

# spring - 春季安全问题

> ID：15685529
> 
> 赞同：0
> 
> 时间：2013-03-28T15:15:57.367
> 
> 标签：spring, jakarta-ee

亲爱的大家， Spring Security 是新功能。我已将服务器配置为使用 Spring Security 检查登录。现在我将它部署在某个服务器上并通过域名访问它。我可以访问除 SpringSecurity 之外的所有 url。它是否也检查网址？我怎样才能改变它？

```
 <intercept-url pattern="/login.do" access="fullyAuthenticated" />
    <form-login login-page="/index.do" always-use-default-target="false" default-target-url="/login.do" />
    <anonymous />
    <logout invalidate-session="true" logout-success-url="/index.do" logout-url="/j_spring_security_logout" />
    <custom-filter before="FORM_LOGIN_FILTER" ref="springSocialSecurityAuthenticationFilter" />
    <remember-me services-ref="springSocialSecurityRememberMeServices" key="springSocialSecurity" />
</http> 
```

谢谢，欧普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:34:57.460

First of all, in `intercept-url`, you have to write `access="isFullyAuthenticated()"` or use the spring security constants : `IS_AUTHENTICATED_FULLY`

your declaration is `<intercept-url pattern="/login.do" access="fullyAuthenticated" />` Meaning that you have to be logged in for accessing the login.do page.

I don't think it is what you want.

here some examples of how `intercept-url` works:

```
 <intercept-url pattern="/index.jsp" access="permitAll" />   
    <intercept-url pattern="/secure/extreme/**" access="hasRole('supervisor')" />
    <intercept-url pattern="/secure/**" access="isAuthenticated()" />
    <intercept-url pattern="/listAccounts.html" access="isAuthenticated()" />
    <intercept-url pattern="/post.html" access="hasAnyRole('supervisor','regularuser')" />
    <intercept-url pattern="/**" access="denyAll" /> 
```

you have to define levels of authorization based on the url of your application. to access the login page, you need to let the login page be `permitAll` access... so the user can login.

if a user try to access a `isAuthenticated()` page without being logged in, there will be a redirection to the login page.

you can put multiple access to a pattern. For example, you can decide that a page could be accessed with authentification OR a anonymous role:

```
<intercept-url pattern='/page2.jsp' access='ROLE_ANONYMOUS,ROLE_USER'/> 
```

# php - PHP SQL 触发器

> ID：15685531
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:16:09.787
> 
> 标签：php, mysql, triggers

我在php中编写了一个简单的触发器，这是我的代码

```
$triggerQuery = 
"DELIMITER  && 
create or replace Trigger insert_room_type after insert on hotel for each row
begin 
insert into room_type values(NEW.hotelID,'Single',0,NULL);
insert into room_type values(NEW.hotelID,'Double',0,NULL);
insert into room_type values(NEW.hotelID,'Standard',0,NULL);
insert into room_type values(NEW.hotelID,'Superior',0,NULL);
end && DELIMITER ;"; 
```

但是，当代码运行时，只执行了第一个插入（4 个），谁能告诉我我做错了什么？提前谢谢。

顺便说一句，room_type 的主键是 hotelID 和 RoomCategory（这是第二列），所以不会有任何主键违规吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:35:58.297

从未听说过使用 PHP 创建触发器。而且它们只被创建一次！

要修复您的错误，您必须更改分隔符。否则 MySQL 认为触发器已完成第一个`;`.

```
DELIMITER $$
create Trigger insert_room_type after insert on hotel for each row
begin 
insert into room_type values(NEW.hotelID,'Single',0,NULL);
insert into room_type values(NEW.hotelID,'Double',0,NULL);
insert into room_type values(NEW.hotelID,'Standard',0,NULL);
insert into room_type values(NEW.hotelID,'Superior',0,NULL); 
end $$
DELIMITER ; 
```

# python - 使用 Python 获取 IP 地址中的最后一个八位字节

> ID：15685534
> 
> 赞同：0
> 
> 时间：2013-03-28T15:16:17.443
> 
> 标签：python

我正在编写一个 Python 脚本，它将采用 CIDR 格式的 IP 地址（即 1.1.1.0/32 或 10.0.0.1/24）并将 IP 分成三部分：前三个八位字节（1.1.1），最后一个八位字节 (0) 和子网掩码 (32)。IP 的长度是可变的，所以我不知道是否可以使用某种字符串字符计数器。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-09T15:57:47.617

正则表达式可能很麻烦。您还可以使用 split() 函数

```
inp = '192.168.0.1/24'
ip, submask = inp.split('/')
octets = ip.split('.') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:22:58.187

使用正则表达式：

```
#!/usr/bin/python
import re

def extractIP( ipStr):

    l = re.split('(.*)\.(.*)\.(.*)\.(.*)/(.*)', ipStr)
    return l[1:-1]

print extractIP("1.2.3.45/35") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T15:18:14.297

将 IP 解析为 int，并使用按位运算符来获取它。

另一种方法是使用像[ipaddr-py](http://code.google.com/p/ipaddr-py/)这样的库。我个人更喜欢图书馆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:19:32.073

我会使用正则表达式。您可以使用 r' 将所有八位字节拆分为一个列表。然后以您喜欢的任何顺序重新组合它们。你可以写一个更复杂的re来一次性完成，但我认为这会有点困难。

```
import re
ip = '1.1.1.1/32'
re.split(r'(\.|/)', ip) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:25:55.273

在这种情况下使用正则表达式会很简单。

```
(\d{,3}\.\d{,3}\.\d{,3})\.(\d{,3})\/(\d+) 
```

结合使用该`re.match`方法将产生您的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-30T20:35:31.710

```
ipstring="192.168.1.1/12"
s=re.split(r"\b(\d{1,3}\.\d{1,3}\.\d{1,3})\.(\d{1,3})\/(\d+)\b",ipstring)
print s
['', '192.168.1', '1', '12', '']
print s[1]
192.168.1
print s[2]
1
print s[3]
12
>>> 
```

# c# - DataReader 工作不清楚

> ID：15685536
> 
> 赞同：0
> 
> 时间：2013-03-28T15:16:17.957
> 
> 标签：c#, asp.net, sql, sql-server, ado.net

```
 protected void btnFetch_Click(object sender, EventArgs e)
    {

    SqlConnection con = new SqlConnection(Helper.ConStr);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.CommandText = "select * from emptable";
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    gv1.DataSource = dr;
    gv1.DataBind();

    dr.NextResult();

    **while (dr.Read())**//It is returning the value as false!
    {
        SqlCommand cmd1 = new SqlCommand();
        cmd1.CommandText = "select * from table1";
        Response.Write(dr[0]);
        Response.Write(dr[1]);
    }
    con.Close();
 } 
```

我很困惑为什么，数据读取器选择一个“选择语句”，读取它并将其绑定到 Gridview 但是当涉及到使用下一组“选择语句”时，数据读取器不做任何事情. `dr.Read()`变成`false`.

请向我解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:19:23.373

数据读取器仅向前。这意味着您只能读取所有行一次。

因此，当您绑定 GridView 时，它将在数据读取器中移动，直到`Read()`返回 false（以便能够填充所有行）。

因此，当您尝试调用循环时，`reader`它已经位于记录集的末尾。

这在[MSDN](http://msdn.microsoft.com/en-us/library/sh674a6a.aspx)中有详细说明。

更新：

如果您向@Petoj 显示的那样添加了多个 SELECT 语句，则该`NextResult()`方法用于选择下一个结果。`Command.CommandText`因此，它对您的代码没有任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:19:46.847

试试这个

```
 protected void btnFetch_Click(object sender, EventArgs e)
 {

    SqlConnection con = new SqlConnection(Helper.ConStr);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.CommandText = "select * from emptable;select * from table1";
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    gv1.DataSource = dr;
    gv1.DataBind();

    dr.NextResult();

    while (dr.Read())
    {
        Response.Write(dr[0]);
        Response.Write(dr[1]);
    }
    con.Close();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:21:08.407

您不需要`NextResult`，`dr.NextResult();`将读者推进到下一批：

```
using (var myCon = new SqlConnection(Helper.ConStr))
using (var selectCommand = new SqlCommand("select * from emptable", myCon))
{
    myCon.Open();
    using (var dr = selectCommand.ExecuteReader())
    {
        while (dr.Read()) 
        {
            // ...
        }
    }
} 
```

因此，如果您选择两个表，您可以使用它[`NextResult`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.nextresult.aspx)来获取下一个，例如：

```
"select * from emptable; select * from otherTable" 
```

通常你不需要使用这个方法，因为`ExecuteReader`已经返回了第一批。

请注意，我使用[`using`-statement](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)来确保所有非托管资源都在它的末尾被处理，即使在出现异常的情况下也是如此。您应该尽可能使用它。这适用于每个实现的对象`IDisposable`（如果`using`在不可能的情况下尝试使用，则会出现编译器错误）。

`SqlConnection.Dispose`也会关闭连接，因此您不需要手动执行此操作（这适用于所有连接类型）。

[**MSDN**](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

> 通常，**当您使用一个`IDisposable`对象时，您应该在 using 语句中声明和实例化它**。using 语句以正确的方式**调用对象的 Dispose 方法**。在 using 块中，对象是 **只读的**，不能修改或重新分配。using 语句可确保调用 Dispose，**即使在**调用对象上的方法时发生异常也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:20:54.963

`dr.NextResult();`如果您的查询[Reference](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.nextresult.aspx)中有多个 select 语句，则可以使用。
您的表中只有一个选择语句

```
cmd.CommandText = "select * from emptable"; 
```

因此，如果您必须使用多个 select 语句，那么在命令文本中您应该有多个 select 语句，如下所示

```
cmd.CommandText = "select * from emptable;select * from table1"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T16:12:29.630

您必须在 sql server 中编写存储过程

CREATE PROCEDURE selectFromTwoTables AS BEGIN BEGIN TRANSACTION

SELECT * FROM 空

选择 * 从表 1

IF(@@error = 0) -- 如果发生任何错误，事务将回滚。否则提交 COMMIT TRANSACTION ELSE ROLLBACK TRANSACTION END

在 c# SqlCommand cmd = new SqlCommand("selectFromTwoTables", conn); cmd.CommandType = CommandType.StoredProcedure;

# networking - Python客户端连接到大量服务器

> ID：15685538
> 
> 赞同：1
> 
> 时间：2013-03-28T15:16:21.057
> 
> 标签：networking, twisted, asyncore

如何建立和维护到多个远程服务器**的大量 TCP 连接？**当我说大时，我认为 c10k 大。这将是一种大规模连接的 P2P 应用程序，它会积极寻找新的同行。

这将涉及使用**单个传出 TCP 端口，有点像服务器，在单个端口中接收数据**并同时或异步处理它，但不是在端口上侦听，而是 SYN 出多个远程服务器。为了实现这一点，我想使用 Linux/BSD 操作系统，最好使用异步 python 网络库。

[我查看了asyncore](http://docs.python.org/2/library/asyncore.html)和[twisted](https://twistedmatrix.com/documents/current/core/howto/index.html)的基本文档以及一些关于堆栈溢出的基本搜索，但我没有找到我需要的东西。

有人可以向我指出一个可能的解决方案，或者在东方一些不涉及在操作系统级别的东西中潜水（至少不深入）的文献。

谢谢你的帮助。

# html - 如何在动态表格单元格中创建 100% 高度的 div？

> ID：15685539
> 
> 赞同：3
> 
> 时间：2013-03-28T15:16:25.607
> 
> 标签：html, css, internet-explorer, html-table, opera

我有动态和静态表格单元格。我需要在动态表格单元格中创建 100% 高度的 div。

我有最小的解决方案 - 这仅适用于 Chrome 和 Firefox。在 Opera 和 IE 中，子 div 具有顶部表格大小。没有js的opera和ie有解决方案吗？

好的：

![好的](../Images/aaf8f2b78b06b91e9b30e6ac92a3f787.png)

坏的：

![在此处输入图像描述](../Images/474c153e2b3c6198614173d3be7d549a.png)

* * *

**更新 #1**对于 Chrome、FF 和 Opera ( *Presto* )：

```
<table class='m-table'>
    <tr>
      <td class='m-top-cell'>
        <div class="b-subtable">
          <div class="b-content"></div>
        </div>
      </td>
    </tr>
    <tr>
      <td class='m-bottom-cell'></td>
    </tr>
  </table>

.m-table {
  width: 100px;
  height: 250px;
  margin: 0 auto;
  position: relative;
  border-spacing: 0;
  padding: 0;

  border: 1px solid blue;
}

.m-top-cell {
  height: 100%;
  position: relative;

  background-color: red;
}

.m-bottom-cell {
  background-color: gold;
  height: 200px;
}

.b-subtable {
  background-color: #E76D13;
  border: 1px solid #E76D13;
  position: absolute;
  top: 5px;
  bottom: 5px;
  left: 5px;
  right: 5px;
}

@-moz-document url-prefix() {
  .m-top-cell {
      padding: 5px;
  }

  .b-subtable {
    position: relative;
    display: table;
    height: 100%;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
  }

  .b-subtable:after {
    content: '. .';
    display: block;
    word-spacing: 99in;
    height: 0;
    overflow: hidden;

    font-size: 0.13em;
    line-height: 0;
  }
}

.b-content {
  background-color: orange;
  width: 15px;
  height: 15px;

  position: absolute;
  left: 10px;
  top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:52:56.493

这应该有效：

```
.m-top-cell{    
    /* other css properties */
    /*remove height:100% */ 
    position:relative;

}

.b-subtable{
    /* other css properties */
    /* remove height: 100% and display: table */
    position: absolute;
    top: 5px;
    bottom: 5px;
    left: 5px;
    right: 5px;
} 
```

* * *

还要检查你的`link`标签符号，

```
<link rel="stylesheet" href="table.css" type="text/css" /> 
```

# java - IntelliJ Idea 中的 Maven 和 Ant，下载依赖项

> ID：15685543
> 
> 赞同：1
> 
> 时间：2013-03-28T15:16:39.560
> 
> 标签：java, maven, ant, intellij-idea, build-automation

我对 Ant 或 Maven 的经验很少，但我正在努力简化我正在从事的项目的构建过程。我使用 IntelliJ Idea 进行 Java 开发，并且我想将 Ant 用于我的自动构建，因为 IntelliJ 可以自动生成我的构建脚本（然后我可以对其进行调整以满足我的需要）。我不想将我所有的依赖项 jar 保存在 Git 中（我将运行我的自动构建的服务器将定期从 repo 中提取以自动构建），我想使用 Maven 在 pom.xml 中声明依赖项和让 Ant 使用 maven-ant-tasks 为我自动下载这些依赖项。

我遇到的问题是 IntelliJ Idea 似乎不喜欢所需的

```
<artifact:pom ...></artifact:pom> 
```

我的 Ant 构建脚本中的元素......即使在将 maven-ant-tasks jar 安装到我的 ant/libs 文件夹中并将 Jar 声明为外部 DTD 之后，正如[Jetbrains 论坛的这个答案中](http://devnet.jetbrains.com/message/5236175;jsessionid=785703C0A17D5BEE265DD4328D92618E#5236175)所建议的那样。

我怀疑我缺乏Ant经验可能是这里的问题（例如，我的项目中有多个模块，每个模块都有自己的Ant文件和pom文件，我是否必须在所有这些文件中执行这些步骤?)，而且我还怀疑 Idea 中有一个错误在这里发挥作用。你们有没有人完成过这项任务，以及如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:36:39.100

我从不玩 IntelliJ 的“生成 ant build ...”。但是您的方法似乎过于复杂。

Maven 适合解决依赖关系，但也是构建项目的合适工具。通常不需要 ant（除非您的构建过程在某些时候有点复杂）。

所以，在我看来，你应该尝试用 maven 来构建你的项目。如果您的项目构建起来非常复杂，您可能会调用一些 ant 任务来执行构建的更精细/复杂/特殊步骤。但请确保 maven 是 master ：maven 能够使用[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)调用 ant 任务。

根据我的经验：maven-antrun-plugin 比 maven-ant-tasks 更容易使用。

此外，如果您的项目正确*mavenized*，它将非常顺利地与 IntelliJ 一起工作。

# javascript - 让现代化设备工作的问题

> ID：15685545
> 
> 赞同：0
> 
> 时间：2013-03-28T15:16:46.697
> 
> 标签：javascript, html, modernizr, polyfills, shim

我在让名为 modernizer 的程序为我工作时遇到问题，我需要一种方法来替换`input = date`所有浏览器中的原生 HTML5，而我读到的modernizer 就是这样做的，但是，如果我理解正确，我只需下载文件，包括把脚本放到head标签和中提琴里面能用吗？但它不是，脚本加载和一切，但没有进行任何更改。有没有人使用过这个程序并且知道我错过了什么？

这就是我包含文件的方式

`<script src = "modernizer.js"></script>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:37:13.917

我知道 RTFM 帖子在 SO 上不受欢迎，但在这种情况下直接来自马口 [http://modernizr.com/docs/#features-html5](http://modernizr.com/docs/#features-html5)：

**输入类型** HTML5 为 的 type 属性引入了 13 个新值。它们如下：搜索、电话、网址、电子邮件、日期时间、日期、月、周、时间、本地日期时间、数字、范围、颜色。

这些类型可以启用本机日期选择器、颜色选择器、URL 验证等。如果浏览器不支持给定的类型，它将被呈现为文本字段。Modernizr 无法检测到日期输入创建了一个日期选择器，颜色输入创建了一个颜色选择器，等等——它会检测到输入值是否根据规范进行了清理。对于 WebKit，我们已经收到确认，如果没有 UI 小部件就不会添加清理。

他们链接到的这个页面也可能有帮助：http: [//miketaylr.com/code/input-type-attr.html](http://miketaylr.com/code/input-type-attr.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:27:12.850

Modernizer 只是告诉您当前浏览器是否支持某些 html5/css3 功能。它不能更正您的标签或控件...在不支持浏览器的情况下运行。

# c++ - 为什么从内联类方法内部访问的静态命名空间变量有效？

> ID：15685550
> 
> 赞同：9
> 
> 时间：2013-03-28T15:17:06.370
> 
> 标签：c++, static

我最近在一个头文件中看到了这段代码，很惊讶它的工作原理：

```
namespace NS {
  static int uid = 0;
  class X {
   public:
    static int getUID() { return uid++; }
  };
} 
```

如果从几个不同的 C++ 源文件调用静态方法`NS::X::getUID()`，我惊讶地发现它正确生成了唯一 ID（跨翻译单元唯一）。我认为命名空间范围内的静态变量与翻译单元有内部链接。这里发生了什么？类 X 中的内联静态方法是否有它自己的翻译单元，这就是它生成唯一 ID 的原因？还是由于我的编译器中的怪癖而对我有用？

上面的代码是否依赖于“安全”的定义良好的行为？如果是这样，这是一种在内联或模板类中生成唯一 ID 的出奇简洁的方法，即使它看起来有点笨拙。还是像这样为静态唯一 ID 函数生成一个新的 C++ 源文件，并将静态 ID 移动到类中更好？

**更新：**

对于一个测试用例，我在不同的文件（file1.cpp、file2.cpp 等）中编写了几个这样的函数：

```
#include "static_def.h" // Name of the above header file.
void func1() {
  int uid1 = NS::X::getUID();
  int uid2 = NS::X::getUID();
  std::cout << "File1, UID1: " << uid1 << ", UID2: " << uid2 << std::endl;
} 
```

令人惊讶的输出（在从 main 调用这些之后）是：

```
File1, UID1: 0, UID2: 1
File2, UID1: 2, UID2: 3 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T15:36:27.577

仅当您仅将此标头包含在单个源文件中时，您的代码才是正确的。

因为`uid`被声明为`static`，所以它具有内部链接。`uid`每个包含此标头的源文件都有一个变量实例。如果你在三个源文件中包含这个头文件，就会有三个`uid`变量。

该`getUid`函数是隐式`inline`的，因为它是在类定义中定义的。`static`它是成员函数的事实是无关紧要的。函数的规则`inline`是`inline`函数必须在使用它的每个源文件中定义，并且所有定义必须相同。

您的`getUid`函数定义违反了这条规则：是的，它定义在每个包含头文件的源文件中（因为它是在头文件中定义的），但是每个定义*都是不同的*，因为在每个定义中`uid`引用的是不同的`uid`变量。

因此，您的程序违反了单一定义规则并表现出未定义的行为。您观察到的特定行为可能是因为编译器选择了内联函数的一个定义并丢弃了其余的定义，因此您认为您正在使用的“全局变量”恰好是变量*之一*`uid`——无论哪个被引用`getUid`编译器保留的副本。虽然这是这种未定义行为形式的*典型*表现，但该行为仍然是未定义的。

您可以使`uid`变量函数局部化以确保只有一个实例，并避免违反单一定义规则：

```
namespace NS {
  class X {
  public:
    static int getUID() {
      static int uid = 0;
      return uid++;
    }
  };
} 
```

在这种情况下，可以保证`uid`程序中只有一个 的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:54:27.720

我相信您的编译器通过**不内联**该`getUID()`方法来欺骗您。隐式内联的事实`getUID()`并不意味着它实际上会被内联——这仅仅是对编译器的建议。

除此之外，一切正常：UID 具有内部链接，`getUID()`也可以返回非唯一 ID。

# css - Twitter Bootstrap - 列未对齐

> ID：15685551
> 
> 赞同：0
> 
> 时间：2013-03-28T15:17:06.657
> 
> 标签：css, twitter-bootstrap

我不明白为什么我的“就业类型”字段与表格上的其他职位不相符。此处提供小提琴：http: [//jsfiddle.net/mwoods98/GvjXE/](http://jsfiddle.net/mwoods98/GvjXE/)。我认为我正确地使用了 control-label 类，但是，作为一个新的引导采用者，我可能犯了一个错误。这是代码片段，但您可以在上面列出的 jsfiddle 上看到工作副本。

```
<label class="control-label" for="input04">Employment Type</label>
<div class="controls">
<select id="input04" name="EmpType">
<option value=""></option>
</select>
</div> 
```

^^ 不工作

```
<label class="control-label" for="input05">Grade Level</label>
<div class="controls">
<select id="input05" name="Grdlvl">
<option value=""></option>
</select>
</div> 
```

^^ 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:25:04.257

问题似乎是您在前一个`controls`DIV 中的内联单选按钮。如果你也给他们类*容器*，那么就业水平会正确排列：

```
<label class="control-label" for="input03">
  Gender
</label>
<div class="controls container">
  <label class="radio inline">
    <input id="input03" type="radio" name="optionsRadios" id="optionsRadios1" value="Male">Male
  </label>
  <label class="radio inline">
    <input  id="input03" type="radio" name="optionsRadios" id="optionsRadios1" value="Female">Female
  </label>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:25:22.903

您应该将整个控件内容包装在`control-group`. 像这样：

```
<div class="control-group">
    <label class="control-label">Employment Type</label>
    <div class="controls">
        <select id="input04" name="EmpType">
            <option value=""></option>
        </select>
    </div>
</div> 
```

**编辑：**

工作示例：http: [//jsfiddle.net/AZdwv/](http://jsfiddle.net/AZdwv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:43:50.260

将 .clearfix 添加到包装单选按钮的 .control div 中，它似乎可以修复它。

[http://jsfiddle.net/GvjXE/7/](http://jsfiddle.net/GvjXE/7/)

```
<div class="controls clearfix">
    <label class="radio inline">
    <input id="input03" type="radio" name="optionsRadios" id="optionsRadios1" value="Male">Male</label>
    <label class="radio inline">
    <input  id="input03" type="radio" name="optionsRadios" id="optionsRadios1" value="Female">Female</label>
</div> 
```

# asp.net - 为什么我必须运行控制台应用程序 x86 才能查看 COM DLL，而 ASP.NET 可以运行 AnyCPU？

> ID：15685555
> 
> 赞同：2
> 
> 时间：2013-03-28T15:17:20.707
> 
> 标签：asp.net, .net, com

我正在运行 64 位 Windows 7、Studio 2012，并且不完全理解以下行为：

1.  我通过 regsvr32 注册了第 3 方 COM dll

3.  我创建了一个 ASP.Net 项目。

*   我引用了 COM 类型库
*   我将目标 CPU 设置为“AnyCPU”
*   一切都编译并运行良好

*   我创建了一个控制台应用程序

*   我引用了 COM 类型库
*   我将目标 CPU 设置为“AnyCPU”
*   它可以编译，但我收到运行时错误“未注册 COM 库”。
*   我将目标 CPU 切换到 x86 并且运行良好。

将站点部署到 IIS 时，我必须在应用程序池中“启用 32 位应用程序”才能使其正常工作。也许这是在 Visual Studio 开发服务器中自动完成的。

**Visual Studio 开发服务器只是将我的网站作为 32 位幕后运行**，还是这里有更深层次的工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:19:16.467

是的，您的 Web 服务器将您的网站作为 32 位应用程序运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:32:47.150

在 IIS 中启用“32 位应用程序”会启动 x86 版本的 w3wp 进程。

AnyCPU 是 .NET 提供的一个方便的功能，它决定应用程序启动时选择哪种处理器架构。这是可能的，因为 .NET 应用程序不会编译为 x86/x64 机器代码，而是编译为[中间语言](http://en.wikipedia.org/wiki/Common_Intermediate_Language)。启动应用程序时，它会在后台编译为 x64 或 x86 机器代码。

但是，非 .NET 应用程序通常直接编译为目标系统的机器代码。此外，COM 服务器必须在 x86 和 x64 的不同注册表分支中注册。

由于您只有一个 32 位兼容服务器 (DLL)，这会导致您描述的情况：

1.  使用 AnyCPU 启动控制台应用程序时，它会根据系统使用的体系结构编译为 x86 或 x64。在此之后，引用被加载。如果您使用的是 x64，则该进程无法找到服务器的 COM 工厂。否则一切都好。这就是为什么*你永远不应该使用*带有 COM 引用的 AnyCPU。
2.  IIS 只能以两种模式运行：显式 x86 或 x64（默认）。启用“32 位应用程序”会导致一个 x86 进程，它以 x86 模式加载您的 Web 应用程序。当您在“AnyCPU”上时，您的 COM 引用很好。但是，如果您出于某种原因禁用“32 位应用程序”，则会遇到麻烦。将“x64”设置为目标平台将导致[`BadImageFormatException`](http://msdn.microsoft.com/en-us/library/vstudio/system.badimageformatexception.aspx).

# php - 使用 INTO OUTFILE 写入 .csv

> ID：15685557
> 
> 赞同：0
> 
> 时间：2013-03-28T15:17:27.277
> 
> 标签：php, mysql, csv, export

我正在尝试使用 .csv 将 select 语句的结果写入 .csv 文件`INTO OUTFILE`。

我现在已经摆弄了几个小时，并且在这里阅读了许多其他相关问题。

出于某种原因，当我运行查询时，绝对没有任何反应。该页面未显示任何错误或任何内容，并且未创建文件。

有没有其他人遇到过这个问题，有人可以告诉我我的 SQL 是否有问题吗？

```
$customers=dbqueryintoarray('
SELECT customer_contacts.Title, customer_contacts.FirstName, 
       customer_contacts.Surname, customer_contacts.Email, 
       customers.LanguageID, customers.DeliveryCountryID 
INTO OUTFILE \'z:/jobs.csv\' 
FIELDS TERMINATED BY \',\' 
OPTIONALLY ENCLOSED BY \'"\' 
LINES TERMINATED BY \'\n\' 
FROM jobs 
JOIN customer_contacts ON jobs.ContactID = customer_contacts.ContactID 
JOIN customers ON jobs.CustomerID = customers.CustomerID 
JOIN equipment ON jobs.EquipmentID = equipment.EquipmentID 
JOIN branches ON jobs.BranchID = branches.BranchID 
WHERE BranchName = "'.$location.'" AND ModelNumber LIKE "%6ES5%"
'); 
```

我已经检查过了，我确实有权限。我用过

> 或死（mysql_error（））

但这不会产生任何错误，它只是从该点向下删除页面中的所有内容。我真的被困住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:24:28.297

不要转义文件路径上的引号：

```
... INTO OUTFILE 'z:\jobs.csv' 
```

转义它们可以防止 MySQL 将该文件名视为字符串。它将被视为语法错误，例如：

```
mysql> select '1' into outfile \'/tmp/z.txt\';
ERROR:
Unknown command '\''.
ERROR:
Unknown command '\''.
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\'/tmp/z.txt\'' at line 1 
```

仅仅因为您没有看到任何错误就没有任何意义。您必须询问 mysql 中的错误，例如：

```
$result = mysql_query($sql) or die(mysql_error());
                           ^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:25:21.617

试试这个，用双倍配额附上主查询：

```
$customers=dbqueryintoarray("
SELECT customer_contacts.Title, customer_contacts.FirstName, customer_contacts.Surname, 
customer_contacts.Email, customers.LanguageID, customers.DeliveryCountryID 
INTO OUTFILE 'z:\\jobs.csv' 
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '\"'
LINES TERMINATED BY '\n'
FROM jobs 
JOIN customer_contacts ON jobs.ContactID = customer_contacts.ContactID 
JOIN customers ON jobs.CustomerID = customers.CustomerID 
JOIN equipment ON jobs.EquipmentID = equipment.EquipmentID 
JOIN branches ON jobs.BranchID = branches.BranchID 
WHERE BranchName = '$location' AND ModelNumber LIKE '%6ES5%'
"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:23:47.677

“C:\\jobs.csv”怎么样？我在 Windows 上没有这方面的经验，但我认为它不会像 php 那样用 / 代替 \。

# sql - 如何将数据从一个数据库表迁移到另一个 SQL？

> ID：15685558
> 
> 赞同：-1
> 
> 时间：2013-03-28T14:58:05.387
> 
> 标签：sql, sql-server-2008-r2

我对整个 SQL DB 迁移的东西真的很陌生，我已经准备好学习了。

我有 2 个不同的数据库，它们都有一个用户表，`HtUser`在一个目标数据库和`HTUser`源数据库中调用。

我想创建一个脚本，该脚本从源数据库中的特定列`firstName, lastName, email`和目标数据库中的特定列复制数据，`FirstName, LastName, Email`并且“特殊字段”`UserName`包含 ch + 两个字母`firstName`来自`lastName`.

```
 INSERT  INTO HolidayTracker.dbo.HtUser(FirstName,LastName,Email,UserName,AdAccount,AdDomain)
SELECT firstName,lastName,email,'CH'+LEFT(firstName,2)+LEFT(lastName,3),'EUROPE\'+LEFT(firstName,2)+LEFT(lastName,3),''
FROM HolidayTracker.dbo.HTUser U1
WHERE NOT EXISTS ( SELECT 1 FROM HolidayTracker.dbo.HTUser U2 WHERE U2.FirstName = U1.firstName AND U2.LastName = U1.lastName AND U2.email = U1.Email);

INSERT INTO HolidayTracker.dbo.HtUser(FirstName,LastName,Email,UserName,AdAccount,AdDomain)
SELECT firstName,lastName,email,'CH'+LEFT(firstName,2)+LEFT(lastName,3),'EUROPE\'+LEFT(fistName,2)+LEFT(lastName,3),''
FROM HolidayTracker.dbo.HTUser u1
    LEFT JOIN HolidayTracker.dbo.HtUser u2 ON u1.firstName = u2.FirstName AND u1.lastName = u2.LastName AND u1.email = u2.Email
    WHERE u2.FirstName IS NULL
    AND u2.LastName IS NULL
    AND u2.Email IS NULL; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:20:11.180

假设您有 2 个名为 db1 和 db2 的数据库，这可能有效。

```
INSERT INTO db2.dbo.HTUser (FirstName, LastName, Email, UserName)
SELECT firstName, lastName, email, 'CH' + LEFT(firstName, 2) + LEFT(lastName, 3) 
FROM db1.dbo.HtUser U1
    LEFT JOIN db2.dbo.HTUser U2 ON U1.firstName = U2.FirstName 
        AND U1.lastName = U2.LastName 
        AND U1.email = U2.Email
WHERE U2.firstName IS NULL
    AND U2.lastName IS NULL
    AND U2.email IS NULL; 
```

此版本将从 db1.dbo.HtUer 复制 db2.dbo.HTUser 中不存在的用户。

以及使用首选的版本`NOT EXISTS`（感谢@AaronBertrand！）：

```
INSERT INTO db2.dbo.HTUser (FirstName, LastName, Email, UserName)
SELECT firstName, lastName, email, 'CH' + LEFT(firstName, 2) + LEFT(lastName, 3) 
FROM db1.dbo.HtUser U1
WHERE NOT EXISTS 
    (
        SELECT 1
        FROM db2.dbo.HTUser U2 
        WHERE U2.firstName = U1.FirstName 
            AND U2.lastName = U1.LastName 
            AND U2.email = U1.Email
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:20:43.070

您可以`INSERT INTO...SELECT`在此使用声明。

```
INSERT  INTO db1.HtUser (firstName, lastName, email, [username])
SELECT  firstName, lastName, email,
        'ch' + SUBSTRING(firstName,1,2) + SUBSTRING(lastname,1,3)
FROM    db2.HtUser 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T16:51:19.507

您是否查看过 SQL Server 2005 及更高版本附带的 TABLEDIFF 实用程序？可以在[这里](http://www.replicationanswers.com/TableDiff2005.asp)和[这里找到很好的例子](http://msdn.microsoft.com/en-us/library/ms162843.aspx)

```
tablediff.exe utility features

Comparison between two tables from SQL Server instance. 
Row by row fast comparision. 
**Perform column level comparison.** 
Easily generate change script between production and development SQL server instances.
Log result can be captured as output file or database table.
Location:

tablediff.exe is available on SQL Server instance at 
"<DriveLetter>:\Program Files\Microsoft SQL Server\90\COM\TableDiff.exe"

 <DriveLetter> is the hard drive where SQL Server instance is installed. 
```

# repository - 使用基本身份验证设置私人 yum 存储库

> ID：15685560
> 
> 赞同：9
> 
> 时间：2013-03-28T15:17:34.110
> 
> 标签：repository, basic-authentication, yum

我已经设置了自己的私人 yum 仓库。这是一个以 Apache 作为 Web 服务器的 HTTP 基础存储库，所以我想添加某种身份验证。这是我需要用 Apache 做的事情，还是我可以用 createrepo 库做些什么来指定用户名和密码？最终目标是有几个回购：

Dev-Repo、QA-Repo、Staging-Repo 和 Production-Repo

我希望开发人员只能访问 dev-repo，QA 只能访问 QA-Repo 等等......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-11-10T20:49:53.590

要在服务器端设置基本身份验证，请遵循[http://httpd.apache.org/docs/2.2/howto/auth.html#gettingitworking](http://httpd.apache.org/docs/2.2/howto/auth.html#gettingitworking)（路径可能不同 - 它们肯定会在我的 Fedora 安装中进行）。

要设置 yum 以使用该存储库，您可以添加：

```
baseurl=http://user:pass@example.com/myrepo/Dev-Repo 
```

或者：

```
username=user
password=pass 
```

到 repo 的配置`/etc/yum.repos.d/myrepo-DevRepo.repo`（取自[https://serverfault.com/questions/609548/yum-repo-basic-auth-not-working](https://serverfault.com/questions/609548/yum-repo-basic-auth-not-working)）。

# xslt - 获取孩子的孩子等

> ID：15685562
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:17:35.783
> 
> 标签：xslt

说我有 xml 之类的

```
<1 id="1234">
  <2>
    <3><name>This</name></3>
  </2>
</1> 
```

我想获取最多子节点的名称，所以在这个例子中是 3。但是可能会有更多更少的子节点，因此它可以继续将 <4> 作为 3 个的子节点，在这种情况下，我想要那个名称。唯一不变的 id 是第一个节点，我怎么能得到它？不太确定要搜索什么，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:45:20.157

您的问题并不完全清楚，但您可以使用 XPath 表达式，例如`.//*[not(*)]`选择本身没有任何子元素的后代元素。

# select - 时间跨度值的数据表选择

> ID：15685567
> 
> 赞同：2
> 
> 时间：2013-03-28T15:17:50.300
> 
> 标签：select, datatable, timespan

我试图将基于 SQL Server 的数据表与 time(7) 列进行比较，时间跨度值：

```
ds.exdatable.Select("TimeColumn ='" & extimespanvalue.ToString & "'") 
```

但这是不可能的......，然后我尝试转换 TimeSpan 值：

```
ds.exdatable.Select("TimeColumn =Convert('" & extimespanvalue.ToString & "',System.TimeSpan)") 
```

获取异常无法将 String 转换为 TimeSpan。如何解决这个问题？

# java - 没有年份的日期时间解析中的难题

> ID：15685568
> 
> 赞同：0
> 
> 时间：2013-03-28T15:17:50.800
> 
> 标签：java, datetime, simpledateformat

我想将一些字符串解析为日期，并将日期格式化为另一种样式的字符串。在解析一些没有年份的日期时间字符串时，我发现了以下难题。我有两个不同的输入字符串，但输出是相同的。真的很困惑。任何建议如何解决这个问题？谢谢。

```
System.out.println(parseAndFormat("MAR 22 12:10:23",
                "MMM dd hh:mm:ss", "yyyy-MM-dd a HH:mm:ss.SSS Z"));
//Actual  : 1970-03-22 AM 00:10:23.000 +0800
//Expected: 1970-03-22 PM 12:10:23.000 +0800
System.out.println(parseAndFormat("MAR 22 00:10:23",
                "MMM dd hh:mm:ss", "yyyy-MM-dd a HH:mm:ss.SSS Z")); 
//Actual:   1970-03-22 AM 00:10:23.000 +0800
//Expected: 1970-03-22 AM 00:10:23.000 +0800
private static String parseAndFormat(String input, String parse,
        String format) throws ParseException {
    DateFormat parser = new SimpleDateFormat(parse, Locale.ENGLISH);
    DateFormat formater = new SimpleDateFormat(format, Locale.ENGLISH);
    Date date = parser.parse(input);
    String result = formater.format(date);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:22:21.303

`hh`尽管您似乎在提供 24 小时制的值，但您始终提供几个小时的输入格式。使用`HH`而不是`hh`. 您没有年度价值的事实与此无关。

请注意，在您的*输出*格式中，您将 24 小时格式 ( `HH`) 与 am/pm 指示符 ( `a`) 混合在一起，这*也很*奇怪。例如，为什么要显示“1970-03-22 PM 16:10:23.000 +0800”？这是一种非常奇怪的格式。

[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)有关各种格式说明符含义的更多详细信息，请参阅文档。

# java - 正则表达式提取 HTML 标记之间的文本

> ID：15685570
> 
> 赞同：4
> 
> 时间：2013-03-28T15:18:01.340
> 
> 标签：java, regex

我正在寻找一个必须在不同类型的 HTML 标记之间提取文本的正则表达式。

例如：

`<span>Span 1</span>` - O/p：**跨度 1**

`<div onclick="callMe()">Span 2</div>`- O/p：**跨度 2**

`<a href="#">HyperText</a>`- O/p：**超文本**

`<([A-Z][A-Z0-9]*)\b[^>]*>(.*?)</\1>`我从[这里](http://www.regular-expressions.info/examples.html)找到了这个特别的部分，但这一个不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T15:21:10.683

您的评论表明您忽略了转义正则表达式字符串中的反斜杠。

如果要匹配小写字母，请添加`a-z`到字符类或使用`Pattern.CASE_INSENSITIVE`（或添加`(?i)`到正则表达式的开头）

```
"<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>" 
```

如果标签内容可能包含换行符，则使用`Pattern.DOTALL`或添加`(?s)`到正则表达式的开头以打开 dotall/singleline 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:13:12.597

这应该适合您的需求：

```
<([a-zA-Z]+).*?>(.*?)</\\1> 
```

第一组包含标签名称，第二组包含介于两者之间的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T15:24:14.253

一个非常具体的方式：

```
(<span>|<a href="#">|<div onclick="callMe\(\)">)(.*)(</span>|</a>|</div>) 
```

但是，是的，这仅适用于这 3 个示例。您需要使用 HTML 解析器。

# r - 如何从 csv 文件中读取表格中的文本

> ID：15685574
> 
> 赞同：4
> 
> 时间：2013-03-28T15:18:10.827
> 
> 标签：r, text-mining, tm

我是使用 tm 包的新手。我想读取一个 csv 文件，其中包含一个包含 2000 个文本的列和一个包含因子变量 yes/no 的第二列到语料库中。我的意图是将文本转换为矩阵并使用因子变量作为预测目标。我还需要将语料库划分为训练集和测试集。我阅读了一些文档，例如 tm.pdf 等，发现文档相对有限。这是我在同一主题上的另一个威胁之后的尝试，

```
TexTest<-read.csv("C:/Test.csv")
 m <- list(Text = "Text", Clasification = "Classification")
 corpus1 <-
Corpus(x=TexTest,readerControl=list(reader=readTabular(mapping=m),language="en"))

Error in if (x$Length > 0) vector("list", as.integer(x$Length)) else list() : 
  argument is of length zero 
```

使用

```
corpus1 <- Corpus(VectorSource(TexTest)) 
```

结果是

```
A corpus with 2 text documents 
```

而不是 2000 条文本。

这里的标准程序如何？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:11:40.777

您需要`DataframeSource`在`Corpus`函数中使用，这就是您的示例与 p 上的示例不同的地方。2 个 PDF[扩展：如何处理](http://cran.r-project.org/web/packages/tm/vignettes/extensions.pdf)包中的自定义文件格式`tm`。

一些可重现的数据：

```
TexTest <- structure(list(Text = c("When discussing performance with colleagues, teaching, sending a bug report or searching for guidance on mailing lists and here on SO, a reproducible example is often asked and always helpful. What are your tips for creating an excellent example? How do you paste data structures from r in a text format? What other information should you include? Are there other tricks in addition to using dput(), dump() or structure()? When should you include library() or require() statements? Which reserved words should one avoid, in addition to c, df, data, etc? How does one make a great r reproducible example?", 
"Sometimes the problem really isn't reproducible with a smaller piece of data, no matter how hard you try, and doesn't happen with synthetic data (although it's useful to show how you produced synthetic data sets that did not reproduce the problem, because it rules out some hypotheses). Posting the data to the web somewhere and providing a URL may be necessary. If the data can't be released to the public at large but could be shared at all, then you may be able to offer to e-mail it to interested parties (although this will cut down the number of people who will bother to work on it). I haven't actually seen this done, because people who can't release their data are sensitive about releasing it any form, but it would seem plausible that in some cases one could still post data if it were sufficiently anonymized/scrambled/corrupted slightly in some way. If you can't do either of these then you probably need to hire a consultant to solve your problem", 
"You are most likely to get good help with your R problem if you provide a reproducible example. A reproducible example allows someone else to recreate your problem by just copying and pasting R code. There are four things you need to include to make your example reproducible: required packages, data, code, and a description of your R environment. Packages should be loaded at the top of the script, so it's easy to see which ones the example needs. The easiest way to include data in an email is to use dput() to generate the R code to recreate it. For example, to recreate the mtcars dataset in R, I'd perform the following steps: Run dput(mtcars) in R Copy the output In my reproducible script, type mtcars <- then paste. Spend a little bit of time ensuring that your code is easy for others to read: make sure you've used spaces and your variable names are concise, but informative, use comments to indicate where your problem lies, do your best to remove everything that is not related to the problem. The shorter your code is, the easier it is to understand. Include the output of sessionInfo() as a comment. This summarises your R environment and makes it easy to check if you're using an out-of-date package. You can check you have actually made a reproducible example by starting up a fresh R session and pasting your script in. Before putting all of your code in an email, consider putting it on http://gist.github.com/. It will give your code nice syntax highlighting, and you don't have to worry about anything getting mangled by the email system.", 
"Do your homework before posting: If it is clear that you have done basic background research, you are far more likely to get an informative response. See also Further Resources further down this page. Do help.search(keyword) and apropos(keyword) with different keywords (type this at the R prompt). Do RSiteSearch(keyword) with different keywords (at the R prompt) to search R functions, contributed packages and R-Help postings. See ?RSiteSearch for further options and to restrict searches. Read the online help for relevant functions (type ?functionname, e.g., ?prod, at the R prompt) If something seems to have changed in R, look in the latest NEWS file on CRAN for information about it. Search the R-faq and the R-windows-faq if it might be relevant (http://cran.r-project.org/faqs.html) Read at least the relevant section in An Introduction to R If the function is from a package accompanying a book, e.g., the MASS package, consult the book before posting. The R Wiki has a section on finding functions and documentation", 
"Before asking a technical question by e-mail, or in a newsgroup, or on a website chat board, do the following:  Try to find an answer by searching the archives of the forum you plan to post to. Try to find an answer by searching the Web. Try to find an answer by reading the manual. Try to find an answer by reading a FAQ. Try to find an answer by inspection or experimentation. Try to find an answer by asking a skilled friend. If you're a programmer, try to find an answer by reading the source code. When you ask your question, display the fact that you have done these things first; this will help establish that you're not being a lazy sponge and wasting people's time. Better yet, display what you have learned from doing these things. We like answering questions for people who have demonstrated they can learn from the answers. Use tactics like doing a Google search on the text of whatever error message you get (searching Google groups as well as Web pages). This might well take you straight to fix documentation or a mailing list thread answering your question. Even if it doesn't, saying “I googled on the following phrase but didn't get anything that looked promising” is a good thing to do in e-mail or news postings requesting help, if only because it records what searches won't help. It will also help to direct other people with similar problems to your thread by linking the search terms to what will hopefully be your problem and resolution thread. Take your time. Do not expect to be able to solve a complicated problem with a few seconds of Googling. Read and understand the FAQs, sit back, relax and give the problem some thought before approaching experts. Trust us, they will be able to tell from your questions how much reading and thinking you did, and will be more willing to help if you come prepared. Don't instantly fire your whole arsenal of questions just because your first search turned up no answers (or too many). Prepare your question. Think it through. Hasty-sounding questions get hasty answers, or none at all. The more you do to demonstrate that having put thought and effort into solving your problem before seeking help, the more likely you are to actually get help. Beware of asking the wrong question. If you ask one that is based on faulty assumptions, J. Random Hacker is quite likely to reply with a uselessly literal answer while thinking Stupid question..., and hoping the experience of getting what you asked for rather than what you needed will teach you a lesson."
), Classification = c("Yes", "No", "Yes", "No", "Yes")), .Names = c("Text", 
"Classification"), class = "data.frame", row.names = c(NA, -5L
)) 
```

制作一个包含五个文档的语料库（CSV 文件中的每一行一个）

```
# TexTest<-read.csv("Test.csv", stringsAsFactors = FALSE)
m <- list(Content = "Text", Topic = "Classification")
library(tm)
myReader <- readTabular(mapping = m)
(corpus <- Corpus(DataframeSource(TexTest), readerControl = list(reader = myReader)))

A corpus with 5 text documents
# as expected, one doc per row of the CSV file

corpus[[1]]

When discussing performance with colleagues, teaching, sending a bug report or searching for guidance on mailing lists and here on SO, a reproducible example is often asked and always helpful. What are your tips for creating an excellent example? How do you paste data structures from r in a text format? What other information should you include? Are there other tricks in addition to using dput(), dump() or structure()? When should you include library() or require() statements? Which reserved words should one avoid, in addition to c, df, data, etc? How does one make a great r reproducible example?

# as expected, the first row of the CSV file 
```

那是你想做的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T06:14:59.247

Ben 的代码有错误，可能是由于 tm 包更新。

```
m <- list(Content = "Text", Topic = "Classification") 
```

大写的“内容”是错误的。它应该是小写的。小写“内容”是 tm 包中的保留字，用于将文本列分配为您可以从语料库对象调用的内容。

```
m <- list(content = "Text", Topic = "Classification") 
```

如果您使用第一行错误代码，您仍然会继续操作而不会出现错误消息。但是“内容”是一个名称，tm 包将其读取为您分配给元信息的特殊名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T15:48:31.973

请注意，readTabular 在 2017 年 12 月的 tm 版本中已消失，如[https://cran.r-project.org/web/packages/tm/news.html中所述](https://cran.r-project.org/web/packages/tm/news.html)

```
Changes in tm version 0.7-2
SIGNIFICANT USER-VISIBLE CHANGES
DataframeSource now only processes data frames with the two mandatory columns "doc_id" and "text". Additional columns are used as document level metadata. This implements compatibility with Text Interchange Formats corpora (https://github.com/ropensci/tif).

readTabular() has been removed. Use DataframeSource instead. 
```

# ios - EKSourceTypeLocal 消失

> ID：15685575
> 
> 赞同：4
> 
> 时间：2013-03-28T15:18:12.670
> 
> 标签：ios, ekeventstore

我在创建自定义日历时遇到问题。使用方法

```
- (BOOL)saveCalendar:(EKCalendar *)calendar commit:(BOOL)commit error:(NSError *)error 
```

我可以在 EKSourceTypeLocal 中创建日历。
但是，当在手机中定义了一个帐户（Exchange、Yahoo、Hotmail ...）时，EKSourceTypeLocal 就会消失（我的自定义日历）。

为什么？
我应该在另一个 EKSource 中创建我的自定义日历吗？

# java - 如何将库打包到 jar 文件中？

> ID：15685580
> 
> 赞同：2
> 
> 时间：2013-03-28T15:18:19.530
> 
> 标签：java, eclipse, dll, native

我是使用任何本地库的新手，这个问题可能看起来很愚蠢，所以请多多包涵。

我下载了 LTI-CIVIL 来捕获来自网络摄像头的视频输入。它要求我在 Eclipse 中创建一个库并指出本机文件的位置。

假设本机 dll 位于`E:\files\lti-civil\src\native\ms(x86)`，我想将它们与 jar 文件一起添加，并制作一个可以发送给朋友的独立应用程序。

目前，我可以从 Eclipse 本身运行程序，`E:\blah_blah`但在其他人的计算机上可能不是这样

现在，我如何打包这些以便我可以制作一个独立的应用程序？我在 Eclipse 的 src 中创建一个文件夹并在那里添加文件夹还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:42:08.123

看看这个[问题/答案](https://stackoverflow.com/questions/1611357/how-to-make-a-jar-file-that-include-dll-files)。因为它涵盖了您正在尝试做的事情。

只是为了涵盖答案所说的是将.dll打包在.jar中。将该 .jar 包含在您的项目中。在运行之前，您将它们解压缩到临时文件夹并告诉您的程序使用该位置。

要从 Eclipse 制作一个自包含的 JAR，请执行以下步骤。

![第1步](../Images/5a6e289b98ce286a27c3daef627a0086.png)

右键单击您的项目并选择导出

![第2步](../Images/0cccee50c084feb63b105e4007ee5854.png)

在 Java 下选择 Runnable JAR File

![第 3 步](../Images/681e8df1d1c7ae03a71684157dec93dc.png)

选择将所需库提取到生成的 JAR 中

这将允许您发送一个独立的应用程序发送给您喜欢的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:26:48.997

DLL 无法打包到 jar 文件中，因为 Java 无法从 Windows 上的存档文件加载 DLL。一种可能性是分别分发包含 Java 程序（作为 .jar）和 DLL 的内容，并且在安装时提取两者。

流行的选择是：用户必须手动解压的 ZIP 文件、自解压的 ZIP 文件或由[InnoSetup](http://www.jrsoftware.org/isinfo.php)生成的“安装”程序。

另一种可能性是将 DLL 打包到 .jar 文件中，并让应用程序在启动时将其解压缩到一个临时目录中。

一旦 DLL 在文件系统上，您可以使用`System.load`或加载它`System.loadLibrary`。

# javascript - Javascript：如何通过异步递归树遍历来控制流程？

> ID：15685588
> 
> 赞同：6
> 
> 时间：2013-03-28T15:18:35.867
> 
> 标签：javascript, asynchronous, recursion, tree, control-flow

我需要在树上递归以使用异步操作对特定节点执行操作。如何控制流量，以便在完成后访问节点？

这是一个示例情况：

```
data = {
  name: "deven",
  children: [
    { name: "andrew" },
    { name: "donovan" },
    { name: "james",
      children: [
        { name: "donatello" },
        { name: "dan" }
      ]
    },
    { name: "jimmy",
      children: [
        { name: "mike" },
        { name: "dank" }
      ]
    }
  ]
}; 
```

我有一个函数，其目标是遍历树并将所有以“d”开头的名称大写。之后，我想将树传递给另一个函数来做更多的工作（可能删除所有名称以“a”开头的节点），但只有在完成初始处理之后：

```
function capitalize_d(node) {
    if(node.name === "d") {
        node.name = node.name.toUpperCase();
    }

    if(node.children != null) {
        for(var i = 0; i < node.children.length; i++) {
            capitalize_d(node.children[i]);
        }
    }
}

function remove_a(node) {
}

capitalize_d(data);

// Should only get called after all the d's have been capitalized.
remove_a(data); 
```

上面的代码工作正常，因为 capitalize_d 是阻塞的。如果是`capitalize_d`异步递归，怎么保证`remove_a`完成后被调用呢？注意中的`setTimeout`调用`capitalize_d`。

```
function capitalize_d(node) {
    setTimeout(function() {

        if(node.name === "d") {
            node.name = node.name.toUpperCase();
        }

        if(node.children != null) {
            for(var i = 0; i < node.children.length; i++) {
                capitalize_d(node.children[i]);
            }
        }

    }, 1);
}

function remove_a(node) {
}

capitalize_d(data);

// Should only get called after all the d's have been capitalized.
remove_a(data); 
```

问题是我们同时处理了树的不同分支，并且无法判断它何时最终完成了对树的处理。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-29T21:31:14.170

Let me summarize what I understood of your requirements:

*   you have a data tree where each single node can be altered asynchronously by a set of operations (`capitalize_d` and `remove_a` in your example),
*   you want to make sure every single node has been subjected to a given operation before allowing the next one.

I have spent 10 years or more designing real-time embedded software, and believe me, the requirements in this area are meaner and scarrier than anything most network programmers will experience in their entire life. This makes me warn you that you seem to be headed the seriously wrong way here.

As I can imagine it, your problem is to organize a set of individual data in some sort of meaningful structure. Some process collects random bits of information (what you call 'nodes' in your example), and at some point you want to put all those nodes into a consistent, monolithic data structure (a hierarchical tree in your example).

In other words, you have three tasks at hand:

*   a data acquisition process that will collect nodes asynchronously
*   a data production process that will present a consistent, refined data tree
*   a controller process that will synchronize data acquisition and production (possibly directly the user interface if the two above processes are smart enough, but don't count on it too much).

My advice: ***don't try to do acquisition and production at the same time***.

Just to give you an idea of the nightmare you're headed for:

*   depending on how the operations are triggered, there is a possibility that the tree will never be completely processed by a given operation. Let's say the controlling software forgets to call `capitalize_d` on a few nodes, `remove_a` will simply never get the green light

*   conversely, if you fire at the tree at random, it is very likely that some nodes will get processed multiple times, unless you keep track of the operation coverage to prevent applying the same transformation twice to a given node

*   if you want `remove_a` processing to ever start, you might have to prevent the controlling software from sending any more `capitalize_d` requests, or else the light might stay stuck to red forever. You will end up doing flow control over your requests one way or another (or worse : you will not do any, and your system will be likely to freeze to death should the operation flow wander away from the sweet spot you happened to hit by chance).

*   if an operation alters the structure of the tree (as `remove_a` obviously does), you have to prevent concurrent accesses. At the very least, you should lock the subtree starting from the node `remove_a` is working on, or else you would allow processing a subtree that is likely to be asynchronously altered and/or destroyed.

Well it's doable. I've seen fine youg men earning big money doing variations on this theme. They usually spent a couple of evenings each week eating pizzas in front of their computers too, but hey, that's how you can tell hardboiled hackers from the crowd of quiche eaters, right?...

I assume you being posting this question here means you don't really want to do this. Now if you boss does, well, to quote a famous android, I can't lie to you about your chances, but... you have my sympathies.

Now seriously folks.. This is the way I would tackle the problem.

1) take a snapshot of your data at a given point in time

you can weed out raw data using as many criteria as you can (last data acquisition too old, incorrect input, whatever allows you to build the smallest possible tree).

2) build the tree with the snapshot, and then apply whatever capitalize_d, remove_a and camelize_z operations *sequentially* on this given snapshot.

In parallel, the data acquisition process will continue collecting new nodes or updating existing ones, ready to take the next snapshot.

Besides, you can move some of your processing forward. Obviously `capitalize_d` does not take any advantage of the tree structure, so you can apply `capitalize_d` to each node in the snapshot before the tree is even built. You might even be able to apply some of the transformations earlier, i.e. on each collected sample. This can save you a lot of processing time and code complexity.

To end with a bit of theroretical babble,

*   your approach is to consider the data tree a shared object that should support concurrent acces from the data acquisition and data production processes,
*   my approach is to make the data acquisition process serve (asynchronously) consistent sets of data to a data production process, which can then handle *sequentially* the said set of data.

the data production process could be triggered on demand (say when the end user clicks the "show me something" button), in which case the reactivity would be rather poor: the user would be stuck watching an hourglass or whatever Web2.0 sexy spinning wheel for the time needed to build and process the tree (lets's say 7-8 seconds).

***or*** you could activate the data production process periodically (feed it with a new snapshot every 10 seconds, a period safely above the mean processing time of a data set). The "show me something" button would then just present the last set of completed data. An immediate answer, but with data that could be 10 seconds older than the last recieved samples.

I rarely saw cases where this was not considered acceptable, especially when you produce a bunch of complex data an operator needs a few dozen seconds to digest.

In theory, my approach will lose some reactivity, since the data processed will be slightly outdated, but the concurrent access approach would probably result in an even slower software (and most certainly 5-10 times bigger and buggier).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-22T20:07:37.487

我知道这篇文章很旧，但它出现在搜索结果中，并且唯一的回复没有提供一个有效的例子，所以这是我最近做的事情的修改版本......

```
function processTree(rootNode, onComplete) {

    // Count of outstanding requests.
    // Upon a return of any request,
    // if this count is zero, we know we're done.
    var outstandingRequests = 0;

    // A list of processed nodes,
    // which is used to handle artifacts
    // of non-tree graphs (cycles, etc).
    // Technically, since we're processing a "tree",
    // this logic isn't needed, and could be
    // completely removed.
    //
    // ... but this also gives us something to inspect
    // in the sample test code. :)
    var processedNodes = [];

    function markRequestStart() {
        outstandingRequests++;
    }

    function markRequestComplete() {
        outstandingRequests--;
        // We're done, let's execute the overall callback
        if (outstandingRequests < 1) { onComplete(processedNodes); }
    }

    function processNode(node) {
        // Kickoff request for this node
        markRequestStart();
        // (We use a regular HTTP GET request as a
        // stand-in for any asynchronous action)
        jQuery.get("/?uid="+node.uid, function(data) {
            processedNodes[node.uid] = data;
        }).fail(function() {
            console.log("Request failed!");
        }).always(function() {
            // When the request returns:
            // 1) Mark it as complete in the ref count
            // 2) Execute the overall callback if the ref count hits zero
            markRequestComplete();
        });

        // Recursively process all child nodes (kicking off requests for each)
        node.children.forEach(function (childNode) {
            // Only process nodes not already processed
            // (only happens for non-tree graphs,
            // which could include cycles or multi-parent nodes)
            if (processedNodes.indexOf(childNode.uid) < 0) {
                processNode(childNode);
            }
        });

    }

    processNode(rootNode);
} 
```

这是使用 QUnit 的示例用法：

```
QUnit.test( "async-example", function( assert ) {
    var done = assert.async();

    var root = {
        uid: "Root",
        children: [{
            uid: "Node A",
            children: [{
                uid: "Node A.A",
                children: []
            }]
        },{
            uid: "Node B",
            children: []
        }]
    };

    processTree(root, function(processedNodes) {
        assert.equal(Object.keys(processedNodes).length, 4);
        assert.ok(processedNodes['Root']);
        assert.ok(processedNodes['Node A']);
        assert.ok(processedNodes['Node A.A']);
        assert.ok(processedNodes['Node B']);
        done();
    });
}); 
```

# ios - 当用户代理设置为 iOS 时，为什么我的 iTunes 链接无法在 Chrome 中打开？

> ID：15685594
> 
> 赞同：1
> 
> 时间：2013-03-28T15:18:48.867
> 
> 标签：ios, jquery-mobile, google-chrome-devtools, itunes-store

我正在开发一个带有启动屏幕的移动网络（jquery 1.7.1 和 jquery mobile 1.1.0）应用程序，鼓励访问者下载该应用程序。如果用户代理是 iOS 浏览器，则有一个徽章显示“在 App Store 上可用”，如果用户代理在 Android 浏览器上，则显示“在 Google Play 中可用”......你明白了。

我正在使用开发人员工具在 Chrome 中进行测试以欺骗用户代理，因此我可以测试所有模式而无需实际设备。当我处于除 iOS 之外的任何模式时，一切都按预期工作。这是我在 iOS 用户代理模式下观察到的：

1）当页面加载时，如果我检查带有链接的元素，一切看起来都很好：

```
<a id="appleStoreLink" href="https://itunes.apple.com/us/app/idXXXXXXXXX" class="ui-link">
<img class="storeBadgeImage" src="/images/App_Store_Badge.png" alt="iTunes download link">
</a> 
```

2）当我点击徽章链接时，什么也没有发生。看看我的 href 会发生什么（我通过在 chrome 中执行 Inspect Element 再次看到这一点：

```
<a id="appleStoreLink" href="#" class="ui-link">
<img class="storeBadgeImage" src="/images/App_Store_Badge.png" alt="iTunes download link">
</a> 
```

我的 Chrome 版本是 23.0.1271.97 for Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:07:50.843

要获得正确的链接格式，请尝试使用此工具：[链接制作器](http://itunes.apple.com/linkmaker)

# asp.net - Reportviewer(RDLC) 导出到 MS Word 时，每页上的重复标题不起作用

> ID：15685597
> 
> 赞同：0
> 
> 时间：2013-03-28T15:18:52.227
> 
> 标签：asp.net, .net, visual-studio-2010, reportviewer

Reportviewer(RDLC)我设置了一个报告以在每一页上显示 headerRow。当以 pdf 格式导出报告时，我可以在每个页面上看到 headerRow，但是当在 microsoft word 中导出相同的报告时，标题仅在 page1 上，所有其他页面都没有 headerRow。导出到我可以在这里看到的单词有一些限制.. [http://technet.microsoft.com/en-us/library/cc627455(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/cc627455(v=sql.100).aspx)

任何想法如何在每页上重复 word 中的标题行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:50:47.793

这是您链接到的页面的引用（重点是我的）：

> 尽管您将 tablix（表、矩阵或列表）中静态标题行的 RepeatOnNewPage 属性设置为 true，但 Word 不会在第二页和更高页面上重复标题行。**您可以在报表中定义明确的分页符，以强制标题行出现在新页面上。但是，由于 Word 将其自己的分页应用于导出到 Word 的呈现报表，因此结果可能会有所不同，并且标题行可能无法按预期重复。**静态标题行是包含列标题的行。

似乎唯一的可能性是定义显式分页符，但这可能无论如何都不能可靠地工作。

# charts - 剑道图动态系列

> ID：15685600
> 
> 赞同：3
> 
> 时间：2013-03-28T15:18:55.757
> 
> 标签：charts, kendo-ui, series

我目前的剑道图表有两个步骤。第一个过程是允许用户在图表上选择他们想要的数据集（系列）。然后他们选择一个模板。模板是图形设置前（颜色主题、图表类型线、条形、圆形等）。

目前，如果用户选择他们想要的数据集，我会将系列信息返回到图表，然后图表将填充模板设置。

我还允许用户动态更改模板设置。例如条形图到线、面积、圆等。他们还可以更改主题。当设置第一个负载时，问题就变成了，我传递的系列信息是：

```
{
  [name: "string", data: []], 
  [name: "string", data: []]
} 
```

当我在模板更改后检查系列对象时，我看到以下内容添加到对象中：

```
{
  [name: "string",
   data: [],
   type: "area",
   color: "ff6800",
   ect...   
  ],
  [name: "string",
   data: [],
   type: "area",
   color: "ff6800",
   ect...   
  ],
} 
```

问题变成我可以将我的对象类型修改为正确的选择类型。我什至可以将每个系列的颜色值更改为不同的颜色。但是，因为我使用的是剑道主题，所以图表背景会改变，但系列颜色会不匹配。我可以想出一个函数来选择图表的背景颜色，然后为你的系列选择你想要的颜色。但如果可能的话，我宁愿使用剑道方法。

我还认为，如果我清除该对象并仅使用我传递的设置和数据，它就可以工作。但是，我不想每次更改页面级别时都必须访问数据库，而且我还注意到，即使我创建了一个临时对象，我的对象也被赋予了所有图表属性。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:06:34.573

我在剑道论坛上问了这个问题，并收到了以下答案。

在传递图表选项之前，您需要保留一份深层副本。这样您就可以仅使用原始选项重新创建图表。

```
var options = { ... };

$("#chart").kendoChart(
     // No side effects on options
     $.extend(true, {}, options)
 ); 
```

如果您查看示例，这样做是有意义的，因为这样您就可以在页面上发生不同事件时修改图表。例如，当我想更改主题或图表类型时。我可以修改：

```
options.seriesDefaults = { type = "bar" }; 
```

这是 Tsvetomir 提供的示例的链接：http: [//jsbin.com/ulohof/1/edit](http://jsbin.com/ulohof/1/edit)

这是剑道论坛上问题的链接：[http ://www.kendoui.c​​om/forums/dataviz/chart/kendo-chart-dynamic-series.aspx](http://www.kendoui.com/forums/dataviz/chart/kendo-chart-dynamic-series.aspx)

# javascript - 如何在哈德逊显示 javascript (html?) 图

> ID：15685603
> 
> 赞同：0
> 
> 时间：2013-03-28T15:19:00.817
> 
> 标签：javascript, html, jenkins, hudson, hudson-plugins

我有一段 Javascript（html 页面？？），它显示了一些数据的图表。这段代码看起来像：

```
<html>
<head>

    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="stringformat.js"></script>
    <script type="text/javascript">

           ... script...

    </script>
</head>

<body>
<!--Div that will hold the line graph-->
    <div id="chart_div_netLatency"></div>
    <div id="chart_div_mamaLatency"></div>
    <div id="chart_div_fhLatency"></div>
    <div id="chart_div_totalLatency"></div>

    <input id="date-input" style=margin-left:160px type="text"  id="date" name="date" />
    <input type="button" value="submit" onClick="updateData();"/>
    <p style=margin-left:160px> Date format: YYYY.MM.DD </p>

    <img  style=margin-left:30px src="timeline.bmp" alt="timeline"/>

</body> 
```

谁能告诉我是否有办法在哈德逊显示这个脚本生成的图表。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:28:17.933

您可以使用此插件在边栏中添加指向脚本的链接，或者通过使用[此插件](https://wiki.jenkins-ci.org/display/JENKINS/Sidebar-Link+Plugin)在文本文件中提供链接来更动态地执行[此](https://wiki.jenkins-ci.org/display/JENKINS/AnchorChain+plugin)操作。

# jquery - jQuery Ajax 返回值不起作用

> ID：15685614
> 
> 赞同：0
> 
> 时间：2013-03-28T15:19:29.967
> 
> 标签：jquery, ajax

函数 rk() 从 Ajax 调用中返回随机键，参数 l 代表长度。我的问题是如何从我的“k”变量中获取 Ajax 结果的返回值？

```
var k = rk(6);

function rk(l) { //l stands for length
    $.ajax({
        url : 'ajax_lib.php',
        type : 'POST',
        data : 'k=1&l=' + l,
        success : function(r) {
            return r;
        }                     
    });            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:24:21.043

Ajax 使用异步处理，这意味着一旦请求被发送到服务器，它将继续执行剩余的语句而不等待响应。

因此，在您的情况下，一旦将请求发送到服务器，就会`rk`返回`undefined`（因为没有 return 语句） value 变量`k`将具有 value `undefined`。

要解决这个问题，请使用$.ajax 返回的[promise对象](http://api.jquery.com/Types/#Promise)

```
rk(6).done(function(r){
    //do what ever you want to do with r
});

function rk(l) {  //l stands for lenght           

    return $.ajax({                  
        url : 'ajax_lib.php',                 
        type : 'POST',                
        data : 'k=1&l=' + l                 
    });  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:24:33.887

一个解决方案可能是

```
function rk(myVariable, l) {  //l stands for lenght           

    $.ajax({                  
        url : 'ajax_lib.php',                 
        type : 'POST',                
        data : 'k=1&l=' + l,              
        success : function(r)    {               
            myVariable = r;
        }                                   
    });  

} 
```

而不是打电话`r=rk(l)` ，你可以打电话`rk(r, l)`

# mysql - 如何选择有重复条目的几行？

> ID：15685625
> 
> 赞同：0
> 
> 时间：2013-03-28T15:19:48.483
> 
> 标签：mysql, phpmyadmin, mysqli

```
SELECT cat.category, cr.course, subcat.subcategory, vd.video_title, vd.video_length, vd.video_id
    FROM category As cat
    INNER JOIN subcategory as subcat 
    ON cat.parent_id=subcat.parent_id
    INNER JOIN courses As cr
    ON cr.child_id=subcat.child_id
    INNER JOIN video_details AS vd
    ON vd.course_id=cr.course_id
    WHERE cat.category='Engineering' 
```

此查询返回 videos_details 表中与类别匹配的所有条目，但要求仅从 video_details 表中为 where 子句中的类别的每个子类别获取前五个条目。

结构是这样的 每个类别有多个子类别，每个子类别有多个课程，每个课程有多个视频记录。

上面的查询在子类别列中会有多个重复值，那么我怎样才能得到每个重复值只有五行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:28:25.187

该`LIMIT`关键字可用于从查询中获取前 5（或 10 或其他）行，因此，如果我正确理解您的要求，您可以将`INNER JOIN`on更改`video_details`为`INNER JOIN`on*子查询*，`video_details`该子查询将仅获得前 5 行。

这对你有用吗？更改位于倒数第三行：

```
SELECT cat.category, cr.course, subcat.subcategory, vd.video_title, vd.video_length, vd.video_id
  FROM category As cat
  INNER JOIN subcategory as subcat 
  ON cat.parent_id=subcat.parent_id
  INNER JOIN courses As cr
  ON cr.child_id=subcat.child_id
  INNER JOIN (SELECT course FROM video_details LIMIT 5) vd
  ON vd.course_id=cr.course_id
  WHERE cat.category='Engineering' 
```

# sql - 通过多列聚合子查询进行聚合查询的 NHibernate 解决方法

> ID：15685626
> 
> 赞同：0
> 
> 时间：2013-03-28T15:19:51.000
> 
> 标签：sql, nhibernate, subquery, aggregate

我正在寻找一种在 NHibernate 中模拟以下查询的方法......

```
select total = count(*) from (
    select userId, reportId
    from RunHistory 
    where runDate >= @d
    group by userId, reportId
) t 
```

我需要获取用户的唯一报告运行总数以及用于分页查询的报告。问题是 HQL 不允许在 from 子句中使用子查询，我认为 Criteria/QueryOver 也不可能。一种可能的解决方案是将两列配对并执行`count(distinct pair_report_user_ids)`，但这似乎是一种 hack。您能想出另一种方法来获取总数，而无需获取整个子查询结果并计算返回的行数吗？

我想我找到了一种[方法](http://ayende.com/blog/2334/paged-data-count-with-nhibernate-the-really-easy-way)`count(*) over()`，在多列聚合查询中添加一个并且只选择第一行！

```
select top 1 userId, reportId, total = count(*) over()
from RunHistory 
where runDate >= @d
group by userId, reportId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:44:24.523

`count(*) over`这是使用SQL 函数的特定方言 QueryOver 解决方案...

```
var countOverFunction = new NoArgSQLFunction("count(*) over", NHibernateUtil.Int32, true);

UserReportRunHistoryResult dto = null;

var result = s.QueryOver<RunHistory>()
    .SelectList(list => list
        .SelectGroup(x => x.user.id).WithAlias(() => dto.userId)
        .SelectGroup(x => x.report.id).WithAlias(() => dto.reportId)
        .Select(Projections.SqlFunction(countOverFunction, NHibernateUtil.Int32)).WithAlias(() => dto.total))
    .TransformUsing(Transformers.AliasToBean<UserReportRunHistoryResult>())
    .Take(1)
    .SingleOrDefault<UserReportRunHistoryResult>(); 
```

# objective-c - 重复的 UITextView 滚动位置

> ID：15685628
> 
> 赞同：1
> 
> 时间：2013-03-28T15:19:55.700
> 
> 标签：objective-c, cocoa-touch, uitextview

我有两个 UITextView，我会在其中插入一些文本。我的文本视图与框架相同当文本更多是我的框架时，我想自动向下滚动，该用户会在我的 textView 上看到最后一个文本，并且当用户向上或向下滚动我的 textView 时 - 滚动位置与我的 textView 的左侧或右侧重复。

我怎么能这样做？

**更新（自动向下滚动）解决方案**

```
[textLeft scrollRangeToVisible:NSMakeRange([textLeft.text length], 0)];
[textRight scrollRangeToVisible:NSMakeRange([textRight.text length], 0)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:25:33.473

需要实施`<UITextViewDelegate>`

```
textLeft.delegate = self;
textRight.delegate = self;

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGPoint scrollPointL = textLeft.contentOffset;
    CGPoint scrollPointR = textRight.contentOffset;

    if (textRight.dragging) {
    [textLeft setContentOffset:scrollPointR animated:NO];
    }

    if (textLeft.dragging) {
         [textRight setContentOffset:scrollPointL animated:NO];
    }
} 
```

# python - 如何在本地“安装”python，只触及一个目录？

> ID：15685631
> 
> 赞同：0
> 
> 时间：2013-03-28T15:20:04.197
> 
> 标签：python, deployment, installation

我想在本地“安装”一个 Python 版本，除了我将其解压缩到的目录之外，它不会触及系统上的任何内容（在本例中为 Windows）。我会通过指定特定的`python.exe`.

这是针对最终用户的。本质上，我希望能够将 Python 提取到一个目录中并立即开始使用它，而不需要用户甚至知道我的程序正在使用 Python。我也在研究 py2exe 和 PyInstaller，但我想知道这个选项是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:39:26.247

使用[Portable Python](http://www.portablepython.com/) - 它是一个经过修改的 Python 版本，可以完全按照您的意愿进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:28:43.693

当你在 Windows 上安装 python 时，当你被问到时，选择“for current user only”而不是“for all users of this system”。并选择安装目标到某个自定义目录，例如 D:\mypython\

这种安装方式会将所有必要的二进制文件和 DLL 文件（例如 msvcr90.dll）打包到这个指定的目录中，您可以使用它轻松地部署到另一个系统（具有相同的 CPU 位和操作系统）。

（我从一个中文网站[http://www.oschina.net/question/23734_13481-comment](http://www.oschina.net/question/23734_13481) 1得到了这个解决方案）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:31:06.870

我认为这听起来确实是一个可行的选择。据我所知，官方 Python 安装程序与 Windows 的唯一“交互”是添加注册表项，将文件与正确的可执行文件关联起来`.py`，`.pyw`并可能修改`PATH`变量。只要用户具有链接`.dll`到的正确文件`.exe`，您就可以压缩`c:\Python33`或使用您正在使用的任何版本并将其与您的应用程序一起分发。但是，在您这样做之前，请克隆目录并检查`c:\clonedPython\libs\site-packages`并删除您的应用程序不需要的任何模块。不要删除任何必要的依赖项！

[可移植 Python](http://www.portablepython.com/)是可能的，但某些模块可能无法正常工作，并且它还不适用于 Python 3.3（3.2.1 是最新版本，以及 2.7.3），所以如果你有版本-可能不是最佳选择的依赖语法。

# java - 使用 Scala 解析 Java 源代码

> ID：15685633
> 
> 赞同：7
> 
> 时间：2013-03-28T15:20:08.260
> 
> 标签：java, parsing, scala

我正在开发一个静态分析工具，我需要使用 Java 源代码，我想用 Scala 编写我的代码，以便我可以从它的功能特性中受益。

是否有任何简单的方法来解析 Java 源代码并使用 Scala 拥有抽象语法树？我曾想过使用一些用 Java 编写的现有 Java 解析器，但我想确保我不会错过一些很酷的 Scala 库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:59:40.203

我认为 Scala 可以调用 Java 库。

您应该能够调用任何 Java 实现的 Java 解析器（例如，ANTLR）。这样你就得到了一个成熟的解析器。

# ruby-on-rails - 启动队列时出现Ruby on rails Resque db连接错误

> ID：15685637
> 
> 赞同：0
> 
> 时间：2013-03-28T15:20:12.517
> 
> 标签：ruby-on-rails, resque

当我尝试通过**rake resque:work QUEUE='*'**启动 resque 队列时， 我收到“数据库配置未指定适配器”错误。我猜数据库连接没问题，因为它可以获取数据并显示在索引页面中。并且......我可以在 ~/resque/overview 中看到排队的任务，但它没有执行。

完整的错误消息是：

```
Initializing connection to redis...
Done (port = 6392)!
Configuring resque sheduler... 
Resque scheduler configured
rake aborted!
database configuration does not specify adapter
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:47:in `resolve_hash_connection'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:27:in `spec'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:130:in `establish_connection'
/home/woody/Workspace/IDP/Amigos/app/models/ak.rb:2
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:469:in `load'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:469:in `load_file'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:639:in `new_constants_in'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:468:in `load_file'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:353:in `require_or_load'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:313:in `depend_on'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:225:in `require_dependency'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.2.13/lib/rails/engine.rb:439:in `eager_load!'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.2.13/lib/rails/engine.rb:438:in `each'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.2.13/lib/rails/engine.rb:438:in `eager_load!'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.2.13/lib/rails/engine.rb:436:in `each'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/railties-3.2.13/lib/rails/engine.rb:436:in `eager_load!'
/home/woody/.rvm/gems/ruby-1.8.7-p371/gems/resque-1.24.1/lib/resque/tasks.rb:61
/home/woody/.rvm/gems/ruby-1.8.7-p371/bin/ruby_noexec_wrapper:14
Tasks: TOP => resque:work => resque:preload
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:23:15.163

根据错误消息的内容，您能否验证您的`database.yml`文件是什么样的？每个环境是否都有关联的适配器（如sqlite3、mysql2等）？

# matlab - 我什么时候可以将文字 : 传递给函数？

> ID：15685653
> 
> 赞同：11
> 
> 时间：2013-03-28T15:21:03.503
> 
> 标签：matlab, syntax, slice

在什么情况下可以将文字传递`:`给 Matlab 函数？我通过实验发现，有时，文字`:`作为 string 传递`':'`，但在其他情况下，会引发错误。例如：

```
>> type writeargs

function writeargs(varargin)

disp(varargin);

end

>> writeargs(:)
Undefined variable writeargs.

>> writeargs(:, 1)
Undefined variable writeargs.

>> writeargs(:, 1, :)
    ':'    [1]    ':'

>> writeargs(:, :, :)
    ':'    ':'    ':'

>> writeargs(1, 2, :, 4, 5)
    [1]    [2]    ':'    [4]    [5]

>> writeargs(1, 2, :, end)
Error using writeargs
Too many output arguments. 
```

我的印象是，如果至少传递了三个参数，则允许使用此语法。这似乎是任意的。这里的法律语法是什么？

**编辑**：评论要求用例。一个用例可能是每当我的参数将用作切片或索引时。在 Python 代码中，我遇到过将切片对象传递给方法的情况。一个用例是受此[答案](https://stackoverflow.com/a/14811531/974555)启发的函数，其中使用一个小函数来规避 Matlabs 无法解释的问题`magic(5)(3, :)`，并且可以编写一个辅助函数并使用`paren(magic(5), 3, :)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T10:23:53.757

您不应该将文字 : 传递给函数。用于索引的冒号仅适用于直接变量（参见[此处](http://www.mathworks.de/de/help/matlab/ref/colon.html)和[此处](http://blogs.mathworks.com/loren/2006/11/10/all-about-the-colon-operator/#19)）。冒号不是真正的对象，也没有类型。如果您应该将它用作函数参数，它需要是一个类型化的对象。当然，函数调用和变量索引具有相同的语法可能会令人困惑。但是，如果您要求使用冒号作为函数参数的合法语法，则没有。

话虽如此，但正如您所观察到的，它在某些情况下仍然有效。这是由于 MATLAB 采取了一些预处理步骤，只有 MathWorks 可以处理。当您给它三个或更多参数（或两个参数，都是冒号）时，MATLAB 几乎似乎通过类似 subsref 的预处理来调用该函数，但当您给它的参数少于这个时，它不会。去搞清楚。MathWorks 将避免对此给出任何决定性的解释。我怀疑，MATLAB 在应用 subsref 后在内部使用字符串化冒号，因为这是您在函数中收到文字冒号时看到的内容，并且索引操作似乎始终如此。例如尝试`>> m(3, ':');`

我对您的用例的建议本质上是[这个答案](https://stackoverflow.com/a/3628885/487445)（也在您问题的评论中引用），但正如您所建议的那样，将索引隐藏在名为 paren 的函数中。此外，它使用默认括号语法而不是调用 subsref，但[无论如何都是一样的](http://www.mathworks.de/de/help/matlab/ref/subsref.html)。使用字符串化的冒号！

```
function result = paren(variable, varargin)

    result = variable(varargin{:}); 
```

然后调用类似的东西：

```
>> paren(magic(5), 3, ':'); 
```

总之，您不应该指望在 MATLAB 中使用文字 : 作为函数参数，即使它可能适用于特殊情况。使用字符串冒号':'。

## 边注

您可以使用 subsref 来调用函数：

```
>> subsref(@magic, substruct('()', {3})) 
```

通过这种方式，您可以链接函数调用和引用：

```
>> subsref(subsref(@magic, substruct('()', {3})), substruct('()', {':'})) 
```

但这实际上与使用临时变量相同。首先评估内部 subsref，并将其结果作为输入参数传递给外部 subsref 调用。

即使使用 subsref 的链接机制，您也不能强制 MATLAB 接受两个连续的括号对，例如 magic(3)(:)。

```
>> magic(3)(:)
??? Error: ()-indexing must appear last in an index expression.

>> subs(1) = substruct('()', {3});
>> subs(2) = substruct('()', {':'});
>> subsref(str2func('magic'), subs)
??? Error using ==> subsref
Only a dot field name can follow ()'s. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:43:21.197

writeargs(:) 和 writeargs(:,1) 将 writeargs 视为局部范围的变量，并尝试使用冒号运算符来索引“不存在”的变量。

使用三个以上的参数调用该函数......对不起，我不明白为什么会存在这种行为，但我怀疑它是用一个或两个参数隐式调用 subsref，而不是三个或更多参数。

您可以通过在函数中的 disp 调用上放置断点来测试它，您会看到它仅在给出三个以上参数时才会被命中

# android - 具有不同大小项目Android的自定义ListView

> ID：15685655
> 
> 赞同：2
> 
> 时间：2013-03-28T15:21:05.273
> 
> 标签：android, listview, android-listview

我有一个可以接受 2 种不同类型对象的 ListView：Food 和 SectionItem。

我有这个 ：

![在此处输入图像描述](../Images/4f383d85d8fa1e8a3df0801a6016f40a.png)

我想知道是否可以像这样在 SectionItem 和 Food 项目之间进行布局填充/边距差异（仅使用一个 ListView）：

![在此处输入图像描述](../Images/242e2a6ddc20427e05372f1fbb267a32.png)

这是我的适配器：

```
public class FoodsAdapter extends ArrayAdapter<Item> {

    private Context context;
    private ArrayList<Item> items;
    private LayoutInflater vi;

    public FoodsAdapter(Context context,ArrayList<Item> items) {
        super(context,0, items);
        this.context = context;
        this.items = items;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;

        final Item i = items.get(position);
        if (i != null) {
            if(i.isSection()){
                SectionItem si = (SectionItem)i;
                v = vi.inflate(R.layout.activity_souscarte_list_item_titlesouscategorie, null);

                v.setOnClickListener(null);
                v.setOnLongClickListener(null);
                v.setLongClickable(false);

                final TextView sectionView = (TextView) v.findViewById(R.id.souscarte_titlesouscategorie);
                sectionView.setText(si.getTitle());
            }else{
                Food food = (Food)i;
                v = vi.inflate(R.layout.activity_souscarte_list_item_elementsouscategorie, null);

                final TextView title = (TextView) v.findViewById(R.id.souscarte_element_title);
                final TextView prix =  (TextView) v.findViewById(R.id.souscarte_element_prix);
                final TextView desc =  (TextView) v.findViewById(R.id.souscarte_element_desc);

                if (title != null)
                        title.setText(food.getName());
                if (prix != null)
                        prix.setText(Float.toString(food.getPrice())+ "€");
                if (desc != null)
                        desc.setText(food.getDescription());
            }
        }
        return v;
    }

} 
```

这是我的活动：

```
public class SousCarteActivityNew extends Activity {
    private ArrayList<ArrayList<Food>> arraySousCategories;
    private ArrayList<Item> allFoodsInOne;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_souscarte_list_item);

        arraySousCategories = FoodsContainer.sousCategoriesArray;

        allFoodsInOne = new ArrayList<Item>();
        for (ArrayList<Food> foodArray : arraySousCategories){
            allFoodsInOne.add(new SectionItem(foodArray.get(0).getType()));
            for (Food food : foodArray){
                allFoodsInOne.add(food);
            }
        }
        LinearLayout ll = (LinearLayout) findViewById(R.id.souscarte_linearlayout);
        ListView lv = new ListView(getApplicationContext());
        FoodsAdapter adapter = new FoodsAdapter(getApplicationContext(), allFoodsInOne);
        lv.setAdapter(adapter);
        ll.setPadding(15, 15, 15, 0);
        ll.addView(lv);
    }
} 
```

这是我的 activity_souscarte_list_item_titlesouscategorie.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView android:id="@+id/souscarte_titlesouscategorie"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/green"
        android:gravity="center"
        android:layout_margin="0dp"
        android:textColor="@color/white"
        android:textSize="19sp"/>

</LinearLayout> 
```

这是我的 activity_souscarte_list_item_elementsouscategorie.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:background="@color/white"
    android:id="@+id/souscarte_element_layout"
    android:layout_marginLeft="17dp"
    android:layout_marginRight="17dp"
    android:padding="5dp">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:id="@+id/souscarte_element_title"
            android:textColor="@color/black"
            android:layout_weight="3"
            android:paddingLeft="5dp"/>
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:id="@+id/souscarte_element_prix"
            android:gravity="right"
            android:textColor="@color/black"
            android:layout_weight="1"
            android:paddingRight="5dp"/>
    </LinearLayout>
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/black"
        android:id="@+id/souscarte_element_desc"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:39:28.420

是的，有一个解决方案。`top_margin`从方法给你的部分不同`getView`。为此，您必须使用`LinearLayoutParam`.

有一种方法叫做`setMargin(left,top,right,bottom)`just give any appropriate value for `top`and assign `layoutParam`to your row。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:13:08.250

I just put all of my layouts in a FrameLayout with padding to do the trick.

# paypal - 贝宝沙箱代理错误

> ID：15685656
> 
> 赞同：0
> 
> 时间：2013-03-28T15:21:07.720
> 
> 标签：paypal, paypal-sandbox

我刚刚注册到贝宝沙盒，以便在我的网站上使用数字商品功能。我通过贝宝集成向导（[https://www.paypal-labs.com/integrationwizard/](https://www.paypal-labs.com/integrationwizard/)）完成了注册和创建快速结帐表单所需的所有步骤

我现在的问题是，当我点击使用 paypal 付款按钮时，我会弹出一个屏幕说：

> 代理错误
> 
> 代理服务器收到来自上游服务器的无效响应。代理服务器无法处理请求 GET >/webapps/checkout/webflow/sparta/expresscheckoutincontextinitflow。
> 
> 原因：从远程服务器读取错误

我希望有人能帮我解决这个问题。我使用的 API 信息取自我的沙盒测试帐户。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:43:14.673

似乎是性能问题。等待几分钟，然后重试。

# c# - 拦截条码扫描仪，完成后重点传递给应用程序？

> ID：15685663
> 
> 赞同：3
> 
> 时间：2013-03-28T15:21:20.093
> 
> 标签：c#, windows, input, io

有没有办法拦截 USB 条形码扫描仪输入，利用它，然后将其传递给具有焦点的应用程序？

我们目前使用条形码扫描仪将订单装运信息加载到 Endicia 和 FedEx。当这些应用程序启动时，查找字段将获得焦点。当您扫描条形码时，文本会被传递到字段中，然后这些应用程序会查找其余的客户信息。这个过程效果很好。

现在我们正试图通过将实际订单重量与应有的重量进行比较来限制拣货错误。为了实时执行此操作，我需要拦截扫描仪输入并使用它检查数据库中计算的重量与实际秤重量。如果它偏离很大，我想显示一条警告消息。

然后，我还需要能够将条形码传递回具有焦点的原始应用程序中的正确字段，以便它可以查找货运数据。

有没有人做过这样的事情？您能否指出一些有关拦截输入然后将其冒泡回到具有焦点的字段的资源？

注意：这是在 Windows 环境中。我最熟悉 C#，但 VB.net 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:59:17.033

对于计算机来说，条码扫描器就像一个键盘，没有按键。当您扫描条码时，扫描仪会将条码转换为键盘输入。为了在第二个程序中捕获输入，您需要使用键盘挂钩。

看看[这个项目](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)和[这个项目](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)。您可以制作一个使用这些键盘挂钩之一的程序，并且您使用条形码扫描仪扫描的任何数据也将被路由到您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:59:49.437

您可以使用该[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)功能将击键发送到当前聚焦的窗口，只要该窗口具有较低或相等的完整性级别。网络上有大量关于从 C# 调用该函数的信息。

许多条形码阅读器可以配置为在扫描开始时放置任意键码。让它输出您在 PC 上定义为热键的代码，以启动您的程序或将其带到前台。输入条形码后，销毁或隐藏窗口以将焦点恢复到先前的应用程序并调用 SendInput。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:34:26.103

您将要创建一个 windows 窗体，并在窗体的 Load 事件中，将焦点放在应输入条形码的 TextBox 上。然后在 TextBox 的 TextChanged 事件中，做任何你需要的处理。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)

误解了这个问题，试着用谷歌搜索一下：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5213874a-603e-4378-835d-f6488f382d47](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5213874a-603e-4378-835d-f6488f382d47)

# algorithm - 延迟列生成示例

> ID：15685665
> 
> 赞同：1
> 
> 时间：2013-03-28T15:21:29.860
> 
> 标签：algorithm, math, linear-programming

有人可以给我举一个小例子，说明[延迟列生成](http://en.wikipedia.org/wiki/Delayed_column-generation)如何解决[切割库存问题](http://en.wikipedia.org/wiki/Cutting_stock_problem)。我找到了几个抽象地描述它的来源，但我仍然不明白它的作用或如何在程序中实现它。一个带有一小组数字的分步示例会很有帮助。

例如，假设我有不同长度的管道库存：

> 12、25

客户要求以下长度的管道：

> 5、10

现在说长度为 x 的管道的值为 x ^(1.2)。我想在为客户进行削减后最大化库存中剩余的价值。究竟如何使用列生成来找到几乎最佳的答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:05:47.510

我们从一个看起来很悲伤的主 LP 开始，它只有阶段 I 松弛变量`z5`和`z10`.

```
minimize z5 + z10
subject to
z5 >= 1 (y5)
z10 >= 1 (y10)
z5, z10 >= 0 
```

`y5`是我们切割足够多长度为 5 的管道`y10`的约束，是我们切割足够多长度为 10 的管道的约束。原始解是`z5=1, z10=1`，最优对偶解是`y5=1, y10=1`。换个角度看，5 管和 10 管的当前价格均为 1。由于这是第一阶段，我们的库存成本为零，并且解决了库存中每个管长的背包问题（如果您使用经典的 DP，因为它会为所有较小的长度生成一个表格），最大的利润空间是将 25 根管子切成五个 5 根管子。设变量`x5,5,5,5,5`为这种类型的切割数。

```
minimize z5 + z10
subject to
5 x5,5,5,5,5 + z5 >= 1 (y5)
z10 >= 1 (y10)
x5,5,5,5,5, z5, z10 >= 0 
```

现在最优原始解是`x5,5,5,5,5=0.2, z5=0, z10=1`。5管的价格为0，10管的价格为1。我们还不是原始可行的，所以我们的库存仍然没有成本。当前价格下的最优模式是`x10,10`（浪费 5）和`x10,10,5`。我们不要浪费。

```
minimize z5 + z10
subject to
5 x5,5,5,5,5 + x10,10,5 + z5 >= 1 (y5)
2 x10,10,5 + z10 >= 1 (y10)
x5,5,5,5,5, x10,10,5, z5, z10 >= 0 
```

最优原始解是`x5,5,5,5,5=0.1, x10,10,5=0.5, z5=0, z10=0`。所有的松弛变量都是 0，所以是时候进入第二阶段了。

```
minimize 25^1.2 x5,5,5,5,5 + 25^1.2 x10,10,5
subject to
5 x5,5,5,5,5 + x10,10,5 >= 1 (y5)
2 x10,10,5 >= 1 (y10)
x5,5,5,5,5, x10,10,5 >= 0 
```

这是双重程序。

```
maximize y5 + y10
subject to
5 y5 <= 25^1.2
y5 + 2 y10 <= 25^1.2
y5, y10 >= 0 
```

最优原始解仍然是`x5,5,5,5,5=0.1, x10,10,5=0.5`。最佳对偶解是`y5=25^1.2 * 0.2`（约 9.5）和`y10=25^1.2 * 0.4`（约 19.0）。由于我们处于第二阶段，现在 12 管的成本为 12^1.2（约 19.7），而 25 管的成本为 25^1.2（约 47.6）。如果我们切割 12 根管子并浪费 2 根，则成本为 12^1.2 - 2^1.2（约 17.4）。

目前，切割 25 管没有利润。然而，在切割 12 管时，我们花费大约 17.4 来获得两个 5 管或一个 10 管。无论哪种方式，当前总价约为 19.0，这意味着正利润。我将其中一列放入并再次求解，但我累了，只是会告诉你最终的最佳原始是`x5,5=0.5, x10=1`（12 管上的两个切口）。

请注意，虽然这个解决方案是部分最优的，但如果客户确实想要一个 5 管和一个 10 管，那么我们还有更多的想法要做。事实上，当且仅当客户想要每根管道的数​​量为奇数时，LP 解决方案之外会有浪费，但是，无论客户的总需求如何，浪费最多是一根 5 根管道，这就是我们说的原因这个答案“几乎是最佳的”。

# html - 使用 CSS 按比例更改图像大小

> ID：15685666
> 
> 赞同：124
> 
> 时间：2013-03-28T15:21:31.033
> 
> 标签：html, css, gallery, lightbox

我已经尝试了几天来配置我的缩略图库，以便所有图像看起来都具有相同的高度和宽度。但是，当我将 CSS 代码更改为

```
max-height: 150px;
max-width: 200px;
width: 120px;
height: 120px; 
```

我得到大小相同的图像，但纵横比被拉伸，破坏了图像。有没有办法调整图像容器而不是图像的大小？允许我保持纵横比，但仍然调整图像大小。（我不介意我剪掉一些图像。）

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-03-28T15:27:23.483

这是 CSS 调整大小的一个已知问题。除非所有图像具有相同的比例，否则您无法通过 CSS 做到这一点。

最好的方法是拥有一个容器，并调整图像的一个尺寸（始终相同）。在我的示例中，我调整了宽度。

如果容器具有指定的尺寸（在我的示例中为宽度），当告诉图像宽度为 100% 时，它将使其成为容器的整个宽度。`auto`高度将使图像的高度与新宽度成正比。

例子：

**HTML：**

```
<div class="container">
    <img src="something.png" />
</div>

<div class="container">
    <img src="something2.png" />
</div> 
```

**CSS：**

```
.container {
    width: 200px;
    height: 120px;
}

/* Resize images */
.container img {
    width: 100%;
    height: auto;
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-03-28T15:23:32.657

您需要固定一侧（例如高度）并将另一侧设置为`auto`.

例如，

```
 height: 120px;
 width: auto; 
```

这将仅基于一侧缩放图像。如果您发现可以接受裁剪图像，则可以设置

```
overflow: hidden; 
```

到父元素，这将裁剪掉任何超出其大小的内容。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-07-08T05:23:26.403

您可以使用`object-fit`CSS 3 属性。就像是：

```
<!doctype html>
<html>

<head>
  <meta charset='utf-8'>
  <style>
    .holder {
      display: inline;
    }
    .holder img {
      max-height: 200px;
      max-width: 200px;
      object-fit: cover;
    }
  </style>
</head>

<body>
  <div class='holder'>
    <img src='meld.png'>
  </div>
  <div class='holder'>
    <img src='twiddla.png'>
  </div>
  <div class='holder'>
    <img src='meld.png'>
  </div>
</body>

</html>
```

不过，这并不完全是您的答案，因为它不会拉伸容器。但它的行为就像画廊一样，你可以保持`img`自己的风格。

此解决方案的另一个缺点仍然是对 CSS 3 属性的支持不佳。更多详细信息可在此处获得：[CSS 3 Object-fit Polyfill](http://www.steveworkman.com/html5-2/javascript/2012/css3-object-fit-polyfill/)。在那里也可以找到一个 jQuery 解决方案。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-30T17:08:09.863

要使图像可调整/灵活，您可以使用：

```
/* fit images to container */
.container img {
    max-width: 100%;
    height: auto;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-28T15:27:39.030

把它作为你的持有人的背景，例如

```
<div style="background:url(path/to/image/myimage.jpg) center center; width:120px; height 120px;">
&nbsp;
</div> 
```

这将使您的图像居中在一个 120x120 div 内，以切断任何多余的图像

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-03-13T21:31:52.817

如果您不想拉伸图像，请将其放入 div 容器中而不会溢出，并在需要时通过调整其边距将其居中。

1.  **图像不会被裁剪**
2.  **纵横比也将保持不变。**

### HTML

```
<div id="app">
    <div id="container">
      <img src="#" alt="something">
    </div>
    <div id="container">
      <img src="#" alt="something">
    </div>
    <div id="container">
      <img src="#" alt="something">
    </div>
</div> 
```

### CSS

```
div#container {
    height: 200px;
    width: 200px;
    border: 1px solid black;
    margin: 4px;
}
img {
    max-width: 100%;
    max-height: 100%;
    display: block;
    margin: 0 auto;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-08-12T20:49:40.603

```
transform: scale(0.5); 
```

* * *

### 例子：

```
<div>Normal</div>
<div class="scaled">Scaled</div> 
```

```
div {
  width: 80px;
  height: 80px;
  background-color: skyblue;
}

.scaled {
  transform: scale(0.7); /* Equal to scaleX(0.7) scaleY(0.7) */
  background-color: pink;
} 
```

见[比例（）](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scale)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-21T17:33:14.130

这有助于我轻松地将图像制作为 150%。

```
.img-popup img {
  transform: scale(1.5);
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-01-13T20:59:57.673

如果您知道纵横比，则可以使用 padding-bottom 和百分比来根据差异的宽度设置高度。

```
<div>
   <div style="padding-bottom: 33%;">
      I have 33% height of my parents width
   </div>
</div> 
```

# php - 限制以特定方式开始的文件名匹配

> ID：15685672
> 
> 赞同：0
> 
> 时间：2013-03-28T15:21:40.213
> 
> 标签：php, regex

我在一个目录中有数千个文件，我正在运行批处理脚本来处理这些文件。

相关文件均以XX-XX-XX开头（至少一个整数，但不超过两个，三个数字用下划线隔开）

我用 txt2re 创建了这个：

```
 $txt='1-2-3';

  $re1='(\\d+)';    # Integer Number 1
  $re2='(-)';   # Any Single Character 1
  $re3='(\\d+)';    # Integer Number 2
  $re4='(-)';   # Any Single Character 2
  $re5='(\\d+)';    # Integer Number 3

  if ($c=preg_match_all ("/".$re1.$re2.$re3.$re4.$re5."/is", $txt, $matches))
  {
      $int1=$matches[1][0];
      $c1=$matches[2][0];
      $int2=$matches[3][0];
      $c2=$matches[4][0];
      $int3=$matches[5][0];
      print "($int1) ($c1) ($int2) ($c2) ($int3) \n";
  } 
```

是否有可能获得一个稍微紧凑的版本，我可以将其与单个函数中的文件名进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:39:17.533

你可以使用

```
"/^\d\d?-\d\d?-\d\d?/" 
```

如果数字由下划线分隔，请使用`_`而不是`-`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:47:48.330

您可以在声明时将所有内容连接在一起。

```
$txt='1-2-3';

$re = '/(\d+)-(\d+)-(\d+)/is';

if ($c=preg_match_all ($re, $txt, $matches))
{
    $int1=$matches[1][0];
    $int2=$matches[2][0];
    $int3=$matches[3][0];
    print "($int1) (-) ($int2) (-) ($int3) \n";
} 
```

请注意，我删除了围绕的分组，`-`因为它们保持不变。[您可以在Debuggex](http://www.debuggex.com/?re=%28%5Cd%2b%29-%28%5Cd%2b%29-%28%5Cd%2b%29&str=12-345-689900)逐步了解此正则表达式。

# java - 每次在 Java Swing 中单击 JFrame 中的 JButton 时如何添加新的 JPanel 实例

> ID：15685673
> 
> 赞同：1
> 
> 时间：2013-03-28T15:21:44.697
> 
> 标签：java, swing, jpanel

我正在使用[Eclipse IDE](http://en.wikipedia.org/wiki/Eclipse_%28software%29)。我已经从一个不同的类添加了面板，扩展`JPanel`到了`JFrame`一个不同的类。

我`JButton`在 Frame 上添加了一个“新”。我添加`<JPanel instance>.setVisible(true)`了该按钮的 actionListener 事件。但是当我按下“新建”按钮时，它会显示`JPanel`. 当我按下 'New' 时，我想添加该面板的新实例`JButton`。

这是我的按钮的代码：

```
final Rec r = new Rec();
JButton btnNew = new JButton("New Receipt");
btnNew.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        r.setVisible(true);
        contentPane.add(r,BorderLayout.CENTER);
    }
}); 
```

在这里，Rec 是一个扩展 JPanel 的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:27:42.047

首先，您需要`LayoutManager`在支持多个面板的框架上使用 a 。我建议现在研究一下`FlowLayout`——如果您刚开始使用 Swing，这是最容易学习的。您还需要调用`frame.add(panel)`以显示面板。您不需要调用`setVisible(true)`，因为默认情况下所有`JPanel`实例都是可见的。

每当您添加或删除面板时，您还需要调用`revalidate()`and `repaint()`on - 这会强制布局使用在的基础列表`JFrame`中所做的任何更改来更新自身。`JFrame``Component`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:24:15.363

我不知道你的完整代码，所以在这里做了一个简短的例子来澄清事情。

*   如上述答案所述，您需要致电`revalidate()`并`repaint()`
*   根据您的更改/修改`LayoutManager`

    ```
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import javax.swing.*;
    import javax.swing.SwingUtilities;

    /**
     * @author rohan
     */
    public class TestPanel {

        private JFrame frame;
        private JPanel panel;
        private JTextArea jTextArea;
        private JButton butt;

        TestPanel() {
            createGUI();
            process1();
        }

        private void process1() {
            jTextArea.setText("hii");
            frame.setVisible(true);
        }

        private void createGUI() {
            butt = new JButton("button");
            frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            panel = new JPanel();
            jTextArea = new JTextArea(20, 20);
            panel.add(jTextArea);
            panel.add(butt);
            butt.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    final JPanel pan = new JPanel();
                    JButton but = new JButton("CHANGED");
                    pan.add(but);
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            frame.add(pan);
                            butt.setVisible(false);
                            jTextArea.setVisible(false);
                            pan.revalidate();
                            pan.repaint();
                        }
                    });
                }
            });
            frame.add(panel);
            frame.pack();
            frame.setVisible(false);
        }

        public static void main(String[] args) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    new TestPanel();
                }
            });
        }
    } 
    ```

# javascript - 斜体标签出现

> ID：15685675
> 
> 赞同：0
> 
> 时间：2013-03-28T15:21:49.770
> 
> 标签：javascript, jquery

我有这个：

```
<span class="fc-event-title" style="background-color:#5E37AD;border-color:#5E37AD">1.test fred 5 &lt;i&gt;(9.5h)&lt;/i&gt;</span> 
```

我看到它是这样的： ![在此处输入图像描述](../Images/ef0a9eae8c547d5b72538cf18eaac408.png)

我无法更改跨度标签，这是完整日历的一部分。我该怎么做才能看到斜体而不是标签本身？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:23:19.990

改变这个：

```
1.test fred 5 &lt;i&gt;(9.5h)&lt;/i&gt; 
```

对此：

```
1.test fred 5 <i>(9.5h)</i> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:27:11.513

扩展@donderpiet 的答案，是 <`&lt;`和`&gt;`> 的编码版本。

因此，如果您`<div>hey</div>`的代码中有，它将被呈现为`hey`，但如果您像这样对大于/小于符号进行编码：`&lt;div&gt;hey&lt;/div&gt;`它将被呈现为`<div>hey</div>`.

希望这是有道理的。

更新

根据您的评论，您将需要[HtmlDecode](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)或[HtmlEncode](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)函数。

# ms-access - 升级到更高版本的 Access MDB

> ID：15685676
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:21:50.363
> 
> 标签：ms-access, ms-access-97, ms-access-2013

我必须每天使用 Access-97 数据库。我犯了更新到 Access 2013 的错误，现在我被卡住了，因为 2013 不读取 Access-97。永久升级这些文件完全不在我的掌控之中。它们在我们广泛使用的应用程序中用作数据文件。所以当我需要检索数据时，我需要一种方法来升级它们。如果可能，我不想在我的计算机上安装两个不同版本的 Access。

是否有可以将 97 数据库上转换为 Access 2013 可以读取的实用程序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:33:08.183

看看 ConvertAccessProject，例如：

```
ConvertAccessProject "z:\docs\test.mbd", "z:\docs\converted.mdb", _
   acFileFormatAccess97 
```

据我所知，它适用于 95 到 2007 格式。我建议您尽快从 '97 升级。

另请参阅：[将 Access 2010 转换为旧版本](https://stackoverflow.com/questions/13469683/convert-access-2010-to-older-versions/13472063#13472063)

# ruby-on-rails-3 - 开发环境中的 Rails 3 ActionView::Template::Error（application.css 未预编译）

> ID：15685678
> 
> 赞同：1
> 
> 时间：2013-03-28T15:21:57.697
> 
> 标签：ruby-on-rails-3, assets, precompiled

我只是将我的 repo 克隆到我的服务器中并为它创建了一个虚拟主机。

但是我不断得到：

```
ActionView::Template::Error (application.css isn't precompiled): 
```

我已经执行了`RAILS_ENV=development bundle exec rake assets:precompile`

而且我仍然在 apache2 error.log 中遇到相同的错误，当我尝试访问我的站点时，我只看到：

```
We're sorry, but something went wrong.

We've been notified about this issue and we'll take a look at it shortly. 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:40:37.760

在 config/environments/development.rb 文件中添加以下行

```
config.assets.manifest = Rails.root.join("public/assets") 
```

并重新启动服务器并检查。

如果你得到 esspectator.git 没有签出。

然后尝试运行`bundle install`。如果没有解决，请尝试运行`bundle install --deployment`

# ios - iOS UIView 渲染到 UIImage - Apple 的示例代码只工作一次

> ID：15685680
> 
> 赞同：1
> 
> 时间：2013-03-28T15:22:07.643
> 
> 标签：ios, uiview, uiimage

在我的应用程序中，我想将 UIView 的视图呈现为 UIImage。我为此使用了苹果的示例代码，可以在这里找到：[https ://developer.apple.com/library/ios/#qa/qa2010/qa1703.html](https://developer.apple.com/library/ios/#qa/qa2010/qa1703.html)

```
- (UIImage*)screenshot 
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;
} 
```

第一次尝试它工作正常。但是，如果稍后我修改视图内的 UILabel 文本，则上面的函数会返回与上次相同的图像。我检查了标签的文本确实发生了变化。但是渲染的图像仍然没有显示更改。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:44:14.307

苹果代码没问题。尝试搜索您自己的代码以查找问题。我可以问几个问题来帮助你找出你的错。

也许您正在查看旧图像两次而不是正确设置新图像？也许您在更改标签文本之前正在截屏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:18:25.470

我在这里唯一的建议是不要在您的代码中恢复 CGState。这可能是问题....

也许您可以尝试将 nsstring 绘制到图像中，然后折叠图像，请参阅这篇文章[如何绘制 NSString](https://stackoverflow.com/questions/2765537/how-do-i-use-the-nsstring-draw-functionality-to-create-a-uiimage-from-text)

但我的问题仍然是：如何在一个应用程序中拥有多个窗口？常见的用途是在其中有一个窗口和更多视图...？那么为什么你需要使用更多的窗口呢？

另一个问题是您使用的最后一个窗口也包含您要显示的文本？因为您只检索最后一个窗口。

想象你有 3 个视图：一个是黑色的一个是蓝色的一个是白色的

如果您遍历它们并将它们渲染成图层并且最后一个是白色的 - >您将只得到白色的。因为另外两个是在最后一个下渲染的。

那么你的窗户是最上面的吗？

否则我不明白，但绝对可以使用这个片段

```
UIGraphicsBeginImageContext(view.frame.size);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您会注意到没有找到实例方法，但它存在。

您还需要导入 QuartzCore。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-14T15:16:44.067

Make sure you are modifying the UILabel's text property in main thread.

Halfar's answer looks right. Update on iOS 7 is there are also a new API to capture view's content, you may be interested to have a look at following snippet.

[http://ioscodesnippet.com/2011/08/25/rendering-any-uiviews-into-uiimage-in-one-line/](http://ioscodesnippet.com/2011/08/25/rendering-any-uiviews-into-uiimage-in-one-line/)

# jquery - 成功 GET 后 Pjax 不替换数据

> ID：15685681
> 
> 赞同：2
> 
> 时间：2013-03-28T15:22:08.257
> 
> 标签：jquery, ruby-on-rails, ajax, pjax

我试图让 PJAX 与我的 Rails 应用程序一起工作，他们的请求是成功的，因为我在控制台的响应中看到了新的 html 内容，但内容没有被替换。我从 jquery.pjax 收到以下错误。

```
Uncaught TypeError: Object function ( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
} has no method 'parseHTML' 
```

我的 pjax 代码是

```
$(document).pjax('a','.main-container', {timeout:5000, replace: true}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:13:07.760

如果您使用早于 1.8 的 jQuery 版本，您应该尝试更新它。

我遇到了同样的问题，这是由我们的项目使用旧版本的 jQuery 引起的。parseHTML() 方法是[在 2012 年 8 月发布的](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)[版本 1.8 中添加](http://api.jquery.com/jQuery.parseHTML/)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T06:54:53.430

试试[Wiselinks](https://github.com/igor-alexandrov/wiselinks)。它比 Pjax 更易于使用和实现，并且也适用于表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:52:57.830

好的，它似乎与 pjax jquery 期望解析一整页有关，但我使用的是来自我的 rails 控制器的无布局响应，所以它不知道如何解析它。我将 jquery.pjax.js 中的第 585 行更改为以下内容，现在可以使用：

```
function parseHTML(html) {
  //return $.parseHTML(html)
  return html
} 
```

# python - 如何使用 Pyglet 将另一个对象的处理程序添加到窗口

> ID：15685682
> 
> 赞同：1
> 
> 时间：2013-03-28T15:22:08.863
> 
> 标签：python, oop, events, event-handling, pyglet

我有一个带有 Pyglet 窗口作为属性的主对象。Pylget 的窗口类有一个称为推送处理程序的方法，它可以让我将方法推送到事件堆栈。以下代码有效：

```
import pyglet

class main:
    win = None
    gameItems = {}

    def __init__(self, window):
        self.win = window
        gameItem.win = self.win
        self.gameItems["menu"] = menu()
        self.gameItems["menu"].add()
        pyglet.app.run()

class gameItem:
    win = None

    def add(self):
        self.win.push_handlers(self)

class menu(gameItem): ##I actually have multiple objects inheriting from gameItem, this is just one of them.
    def on_mouse_press(self, x, y, button, modifier):
        '''on_mouse_press() is an accepted handler for the window object.'''
        print(x)
        print(y)

    def on_draw(self):
        '''With a quick draw function, so I can see immediately
        that the handlers are getting pushed.'''
        pyglet.graphics.draw(4, pyglet.gl.GL_QUADS, ('v2i', (256,350,772,350,772,450,256,450)))

m = main(pyglet.window.Window()) 
```

上面的代码将以默认大小生成一个新窗口，并将 on_mouse_press() 和 on_draw 事件处理程序附加到它。这很好用——但是，尝试在其他类中调用 push_handlers() 方法似乎不起作用。

```
import pyglet

class Main:
    win = None
    gameItems = {}

    def __init__(self, window):
        self.win = window
        GameItem.game = self
        GameItem.win = self.win
        self.gameItems["main"] = MainMenu()
        pyglet.app.run()

    def menu(self):
        self.gameItems["main"].add()

class GameItem:
    win = None

    def add(self):
        self.win.push_handlers(self)

class MainMenu(GameItem): ##I actually have multiple objects inheriting from gameItem, this is just one of them.
    def on_mouse_press(self, x, y, button, modifier):
        '''on_mouse_press() is an accepted handler for the window object.'''
        print(x)
        print(y)

    def on_draw(self):
        '''With a quick draw function, so I can see immediately
        that the handlers are getting pushed.'''
        pyglet.graphics.draw(4, pyglet.gl.GL_QUADS, ('v2i', (256,350,772,350,772,450,256,450)))

m = Main(pyglet.window.Window(width=1024, height=768))
m.menu() 
```

上面的代码生成了一个新窗口，但它没有附加菜单类的处理程序。这是有原因的，还是我可以使用的解决方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T18:52:46.680

当您调用 pyglet.app.run() 时，您进入了 pyglet 循环，并且在 pyglet 窗口关闭之前它不会返回，因此只有在 pyglet 循环结束时才会调用您的 m.menu()。如果您从 Main 中删除 pyglet.app.run 行并像这样调用它：

```
m = Main(pyglet.window.Window(width=1024, height=768))
m.menu()
pyglet.app.run()
print "Window is closed now." 
```

有用。

# javascript - Javascript数组关联

> ID：15685684
> 
> 赞同：0
> 
> 时间：2013-03-28T15:22:11.990
> 
> 标签：javascript, arrays

我对 javascript 中两个数组的最佳关联方式有疑问。在*items*数组中，第一个数字表示 item id 也用作*promos*数组中的父 id。

```
var items = [
    [1, 'ZAPA BAR', '50.081809, 14.43036],
    [2, 'SUN Restaurant', 50.079809, 14.44436],
    [3, 'Jazz Club', 50.068809, 14.432336]
]

var promos = [
    [1, 'HAPPY HOURS']
] 
```

尽管我正在寻找一些 javascript 函数，但我没有找到任何可以给我预期结果的函数 - ZAPA BAR 有 HAPPY HOURS。

如何使 javascript 仅比较每行中的第一个数字（项目 id）而不是数组中的其他元素，如 GPS 坐标。

解决方案应该很快，因为项目将多于三个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:28:28.043

```
var items = [
    [1, 'ZAPA BAR', 50.081809, 14.43036],
    [2, 'SUN Restaurant', 50.079809, 14.44436],
    [3, 'Jazz Club', 50.068809, 14.432336]
];

var promos = [
    [1, 'HAPPY HOURS']
];

var itemsLength = items.length;
var promosLength = promos.length;
for(var i = 0; i < itemsLength; i++){
    for (var j = 0; j < promosLength; j++){
        if (items[i][0] == promos[j][0]){
            console.log(items[i][1] + ' has ' + promos[j][1]);   
        }
    }
} 
```

小提琴：http: [//jsfiddle.net/W7HGX/1/](http://jsfiddle.net/W7HGX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:30:15.210

您可以将数据转换为对象项，然后询问键值：

```
var items = {
  '1':{name:'ZAPA BAR',lt:50.081809,lg:14.43036},
  '2':{name:'SUN Restaurant',lt:50.081809,lg:14.44436}
};

var promos = {
     '1': {name:'HAPPY HOURS'}
}; 
```

然后您可以轻松比较：

```
for(var val in items){
  console.log(items[val].name); // return the name
  console.log(val); // return the id which you can and check in promos (promos[val].name)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:32:54.223

根据数据量，数据库可能是一个明智的选择。

我不太确定为什么您给每个 ID 都赋予了一个 javascript 数组，因为它自己用于识别数组中的项目。

所以目前你有两个 ID：

```
items[0] = [1, 'ZAPA BAR', 50.081809, 14.43036] 
```

如果您的促销名称是唯一的，那么可以试试这个：

```
// WARNING: I've not tested the code, may have slipped up somewhere

var items = [
    ['ZAPA BAR', 50.081809, 14.43036],
    ['SUN Restaurant', 50.079809, 14.44436],
    ['Jazz Club', 50.068809, 14.432336]
]

var promos = {
    'HAPPY HOURS': [0]
};

function itemsWithPromo(promo) {
    var outputItems = [];
    promos[promo].forEach(function(itemID) {
        outputItems.push(items[itemID]);
    });
    return outputItems;
}

var itemsWithHappyHours = itemsWithPromo('HAPPY HOURS')
// itemsWithHappyHours = [['ZAPA BAR', '50.081809, 14.43036]] 
```

或者您甚至可能希望将项目也以数组形式放入 Object 中，我只是在猜测每个值的含义:)

# java - java.rmi.ConnectException：连接拒绝主机：127.0.1.1；

> ID：15685686
> 
> 赞同：53
> 
> 时间：2013-03-28T15:22:27.523
> 
> 标签：java, exception, connection, rmi, remoteobject

```
 java.rmi.ConnectException: Connection refused to host: 127.0.1.1; nested exception is:
    java.net.ConnectException: Connection refused
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at com.sun.proxy.$Proxy0.notifyMe(Unknown Source)
    at CallbackServerImpl.doCallback(CallbackServerImpl.java:149)
    at CallbackServerImpl.registerForCallback(CallbackServerImpl.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
    Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 23 more 
```

当我尝试将远程客户端连接到我的服务器时出现此异常。在 server 和 client 中，rmi 的 registryUrl 的 hostName 是服务器的公共 IP 地址。我也尝试将 localhost 放在服务器中，但错误没有改变。

我的 java.policy 设置为授予所有端口的所有连接，并且我没有在服务器或客户端中启用防火墙。

有什么建议可以吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-29T01:33:27.290

这是[RMI FAQ 中的 A.1 项](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/faq.html#domain)。您需要修复 /etc/hosts 文件或`java.rmi.server.hostname`在服务器上设置属性。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-03-02T00:25:16.160

**问题解决了**

我有完全相同的错误。当远程对象绑定到 rmiregistry 时，它附加了环回 IP 地址，如果您尝试从远程地址调用方法，这显然会失败。为了解决这个问题，我们需要将**java.rmi.server.hostname**属性设置为其他设备可以通过网络访问您的 rmiregistry 的 IP 地址。当您尝试通过 JVM 设置参数时，它不起作用。只需在将对象绑定到 rmiregistry 之前将以下行添加到我的代码中，它就对我有用**：**

`System.setProperty("java.rmi.server.hostname","192.168.1.2");`

在这种情况下，在 RMI Registry 上绑定远程对象的 PC 本地网络上的 IP 地址是 192.168.1.2。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-09-28T09:45:35.797

您可以使用`LocateRegistry`例如：

```
Registry rgsty = LocateRegistry.createRegistry(1888);
rgsty.rebind("hello", hello); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-03-06T14:37:06.510

我发现了很多关于这个主题的问答，并不是什么都对我有帮助——那是因为我的问题更基本（我能说什么我不是网络专家:)）。我在 /etc/hosts 中的 IP 地址不正确。我尝试过的 CATALINA_OPTS 包括以下内容：

```
CATALINA_OPTS="$CATALINA_OPTS -Djava.awt.headless=true -Xmx128M -server 
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=7091 
-Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.ssl=false
-Djava.rmi.server.hostname=A.B.C.D"  #howeverI put the wrong ip here!

export CATALINA_OPTS 
```

我的问题是我几个月前更改了我的 IP 地址，但从未更新我的 /etc/hosts 文件。似乎默认情况下 jconsole 以某种方式使用主机名 -i ip 地址，即使我正在查看本地进程。最好的解决方案是简单地更改 /etc/hosts 文件。

另一个可行的解决方案是从 /sbin/ifconfig 获取正确的 IP 地址，并在例如 catalina.sh 脚本中指定 IP 地址时使用该 IP 地址：

```
-Djava.rmi.server.hostname=A.B.C.D 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-09T01:50:12.357

也许在客户端尝试连接到您的服务器之前没有创建您的 rmiregistry，这将导致此异常。在 Linux 中，您可以使用“netstat”检查您的 rmiregistry 是否绑定在您在 java 代码中分配的正确端口上。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-06T21:51:38.490

如果您在 Linux 环境中运行，请打开文件`/etc/hosts.allow` 添加以下行

```
ALL 
```

# [通配符](http://www.aboutlinux.info/2005/10/using-tcp-wrappers-to-secure-linux.html)

还要检查`/etc/hostname`and`/etc/host`看看那里是否有问题。

我不得不改变我`/ etc / host`的

```
127.0.0.1 localhost
127.0.1.1 AMK 
```

到

```
127.0.0.1 localhost
127.0.0.1 AMK 
```

还写入了之前完全为空`ALL`的文件中`/etc/hosts.allow`

# 现在一切正常

不知道它有多安全。你必须阅读更多关于可能的选项`/etc/hosts.allow`来做一些需要一点安全的事情。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-04T13:38:48.013

如果您尝试修改 etc/hosts 并添加 java.rmi.server.hostname 属性，但仍将注册表绑定到 127.0.0.1

尽管没有从 jvm args 中选择相同的属性，但在通过代码显式设置系统属性后，我的问题得到了解决

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-13T08:17:44.277

去掉 /etc/hosts 中的 "::1" 后，它对我有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-10T06:43:01.557

我遇到了同样的问题，我的问题是我在 etc/hosts 中配置了来自 2 个不同网络的 2 个 IP 地址，如下所示。

```
10.xxx.x.xxx    localhost
192.xxx.x.xxx   localhost 
```

这应该是因为其他设备使用哪个 IP 以通过网络访问 rmiregistry 存在冲突。

一旦我删除了不需要的额外记录，我就能够解决这个问题。

所以我的 etc/hosts 文件只有以下记录。

```
10.xxx.x.xxx    localhost 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-06T10:12:30.433

就我而言，我无法编辑主机文件，因为使用的是大学里的电脑。

我修复了在另一个端口（而不是 1099）中运行 rmiregistry 的问题：

```
rmiregistry <port> 
```

然后在该端口上运行服务器。

这基本上是由占用端口引起的错误。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-09-13T05:49:47.077

当您想使用**RMI**连接到远程服务器时，您必须添加与以下相同的系统属性：

```
System.setProperty("java.rmi.server.hostname","Ip or DNS of the server"); 
```

或添加环境变量。

对我来说，我得到了**Connection Refused**并通过在服务器端添加这行代码来解决它：

```
 java -jar -Djava.rmi.server.hostname="ip or dns of the server" packageName.jar 
```

感谢其他人指导我解决它。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-01-22T05:06:01.013

在 Windows 上，确保您的 Windows 防火墙已正确配置/禁用。即使在使用 localhost 进行测试时，我也必须禁用 Windows 防火墙（因为我没有费心配置它）才能让事情正常工作。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-12-16T16:44:28.990

当我在我的机器上遇到同样的错误（“连接被拒绝”）时，原因是我在服务器端定义了以下内容：

```
 Naming.rebind("rmi://localhost:8080/AddService"
   ,addService); 
```

因此，服务器绑定了 IP = 127.0.0.1 和端口 8080。

但在客户端我使用过：

```
AddServerInterface st = (AddServerInterface)Naming.lookup("rmi://localhost"
                        +"/AddService"); 
```

于是忘了在localhost后面加上端口号，所以我重写了上面的命令，加上端口号8080如下：

```
AddServerInterface st = (AddServerInterface)Naming.lookup("rmi://localhost:8080"
                        +"/AddService"); 
```

一切正常。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-01-14T06:57:49.610

您可以简单地使用：

在服务器端：

```
Registry <objectName1> = LocateRegistry.createRegistry(1099);
Registry <objectName2> = LocateRegistry.getRegistry(); 
```

在客户端：

```
Registry <object name you want> = LocateRegistry.getRegistry(); 
```

# google-analytics - 谷歌分析：事件跟踪全站，但生成唯一的 URL

> ID：15685690
> 
> 赞同：0
> 
> 时间：2013-03-28T15:22:37.070
> 
> 标签：google-analytics, event-tracking

我的网站上有一个在线表单，我想在 Google Analytics 中使用事件跟踪来查看提交按钮的点击次数。

我应该怎么做才能让 Google Analytics 分别显示此事件的每个 URL？

换句话说：我想看看每个页面对这个事件有多少点击。

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:35:46.203

您不能只在 Google Analytics 中查看事件，然后使用“事件类别”作为主要维度，然后添加“页面”作为二级维度吗？

然后每行显示一个页面 (URL)，每个事件详细说明每个页面发生了多少事件点击。这是否满足您的数据需求？

# javascript - 解析 JSON 跨域 - 使用来自 javascript 的 Tumblr API

> ID：15685693
> 
> 赞同：1
> 
> 时间：2013-03-28T15:22:42.453
> 
> 标签：javascript, json, tumblr

是否可以在普通 HTML 页面中从 javascript 访问 Tumblr API？同源政策似乎在阻碍。假设我只想访问这样的一些 url [（](http://api.tumblr.com/v2/blog/david.tumblr.com/posts/photo?api_key=fuiKNFp9vQFvjLNvx4sUwti4Yb5yGutBN4Xh10LXZhhRKjWlV4&notes_info=true)关键是 api 文档中的那个），是否可以下载和解析该 json 字符串`JSON.parse`或类似的东西？我在谷歌或这里找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:38:45.907

使用Tumblr 提供的[jsonp 支持](http://www.tumblr.com/docs/en/api/v2#responses)来克服同源策略

```
$.getJSON('http://api.tumblr.com/v2/blog/david.tumblr.com/posts/photo?api_key=<api-key>&notes_info=true&callback=?', function(data){
    console.log(data)
}) 
```

或者

```
$.getJSON('http://api.tumblr.com/v2/blog/david.tumblr.com/posts/photo?callback=?',{
    api_key: '<api-key>',
    notes_info: true
}, function(data){
    console.log('result', data)
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rvm8X/)

# python - QThread 信号/槽到 QProcesses

> ID：15685695
> 
> 赞同：1
> 
> 时间：2013-03-28T15:22:44.893
> 
> 标签：python, qt, user-interface, multiprocessing

我有一个使用 QThreads 和 Signals/Slots 与 GUI 通信的程序。它具有如下所示的简化形式。

但是，我想将其更改为 QProcess，以便我可以利用多核处理。有没有一种简单的方法可以做到这一点？

如果我只是更改`QThread`为`QProcess`，则`moveToThread()`流程没有功能。`Pipes()`我一直在尝试几种不同的多核处理方法，例如`Queues()`在`multiprocessing`模块中，但我无法让任何东西很好地工作。所以，我认为它会更容易使用`QProcess`，因为我已经在 Qtland。

这是我为`QThreads`, 信号和插槽提供的简化代码。

```
from PyQt4 import QtCore, QtGui
import multiprocessing as mp
import numpy as np
import sys

class Spectra(QtCore.QObject):

    update_signal = QtCore.pyqtSignal(str)
    done_signal = QtCore.pyqtSignal()

    def __init__(self, spectra_name, X, Y):
        QtCore.QObject.__init__(self)
        self.spectra_name = spectra_name
        self.X = X
        self.Y = Y
        self.iteration = 0

    @QtCore.pyqtSlot() 
    def complex_processing_on_spectra(self):
        for i in range(0,99999):
            self.iteration += 1
            self.update_signal.emit(str(self.iteration))
        self.done_signal.emit()

class Spectra_Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    kill_thread = QtCore.pyqtSignal()
    def __init__(self, parent, spectra):
        self.parent = parent
        self.spectra = spectra
        QtGui.QTabWidget.__init__(self, parent)

        self.treeWidget = QtGui.QTreeWidget(self)
        self.properties = QtGui.QTreeWidgetItem(self.treeWidget, ["Properties"])
        self.step = QtGui.QTreeWidgetItem(self.properties, ["Iteration #"])

        thread = QtCore.QThread(parent=self)
        self.worker = self.spectra
        self.worker.moveToThread(thread)
        self.worker.update_signal.connect(self.update_GUI)
        self.worker.done_signal.connect(self.closeEvent)
        self.start_comp.connect(self.worker.complex_processing_on_spectra)
        self.kill_thread.connect(thread.quit)
        thread.start()

    @QtCore.pyqtSlot(str)
    def update_GUI(self, iteration):
        self.step.setText(0, iteration)

    def start_computation(self):
        self.start_comp.emit()

    def closeEvent(self):
        print 'done with processing'
        self.kill_thread.emit()

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        QtGui.QMainWindow.__init__(self)

        self.setTabShape(QtGui.QTabWidget.Rounded)
        self.centralwidget = QtGui.QWidget(self)
        self.top_level_layout = QtGui.QGridLayout(self.centralwidget)

        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
        self.top_level_layout.addWidget(self.tabWidget, 1, 0, 25, 25)

        process_button = QtGui.QPushButton("Process")
        self.top_level_layout.addWidget(process_button, 0, 1)
        QtCore.QObject.connect(process_button, QtCore.SIGNAL("clicked()"), self.process)

        self.setCentralWidget(self.centralwidget)
        self.centralwidget.setLayout(self.top_level_layout)

        # Open several files in loop from button - simplifed to one here
        X = np.arange(0.1200,.2)
        Y = np.arange(0.1200,.2)
        self.spectra = Spectra('name', X, Y)
        self.spectra_tab = Spectra_Tab(self.tabWidget, self.spectra)
        self.tabWidget.addTab(self.spectra_tab, 'name')

    def process(self):
        self.spectra_tab.start_computation()
        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:54:31.860

没有`moveToThread()`for 进程，因为进程存在于自己的内存空间中，因此它看不到`MainWindow`任何成员。您开始使用的应用程序`QProcess`应该能够作为独立应用程序执行。

要在另一个中运行光谱`QProcess`，您需要使光谱成为一个单独的可执行模块，而不是像现在这样的 MainWindow 成员。

编辑：

您需要定义最不依赖于的自包含模块`MainWindow`- 它可以是仅光谱过程，或带有选项卡的光谱过程。您可以在构造时或通过标准输入将信息传递给进程，并通过标准输出从进程中检索数据。选择律师放入进程时的关键思想是尽量减少进程与主窗口之间的通信和依赖。您可能会将进程视为简单的 C 程序：

`int main(int argc,char* argv[]);`

您可以在启动时传递参数，必要时通过 cin/stdin 从 MainWindow 获取其他输入，`MainWindow`通过 cout/stdout/stderr 输出一些结果（`QProcess`有接口）。

# javascript - 具有多个范围的 Javascript 关闭问题

> ID：15685697
> 
> 赞同：0
> 
> 时间：2013-03-28T15:22:49.617
> 
> 标签：javascript, closures

在 jsavascript 中解决这个问题的最佳方法是什么？

这是我有一个简单的问题：

10 个跨度和 onclick 事件（我希望每次点击时块的警报数）：

```
var spans = document.getElementsByTagName('span');

function addEvents(divs) {
    for(var i=0; i < divs.length; i++) {
        divs[i].innerHTML = i;
        divs[i].onclick = function() { alert(i) }
    }
}

addEvents(spans); 
```

[JSFiddle 链接](http://jsfiddle.net/ERKq2/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:24:01.103

将其包装在一个自动执行的闭包中：

```
divs[i].onclick = (function(i) {
    return function() {
        alert(i);
    };
})(i); 
```

为了让它更短：将其定义为回调：

```
var callback = function(i) {
    return function() { alert(i); };
};

divs[i].onclick = callback(i); 
```

# javascript - 从 HTML5 Canvas (readAsBinaryString) 获取二进制 (base64) 数据

> ID：15685698
> 
> 赞同：88
> 
> 时间：2013-03-28T15:22:50.867
> 
> 标签：javascript, html, html5-canvas, fileapi

有没有办法将 HTML Canvas 的内容作为二进制数据读取？

目前，我有以下 HTML 来显示输入文件及其下方的画布：

```
<p><button id="myButton" type="button">Get Image Content</button></p>
<p>Input:<input id="fileInput" type="file"/></p>
<p>Canvas<canvas id="myCanvas" width="578" height="200"/></p> 
```

然后我设置了我的输入文件以正确设置画布，效果很好：

```
$('#fileInput').on('change', function() {
    $.each(this.files, function() {
        var image = new Image();
            image.src = window.URL.createObjectURL(this);

        image.onload = function() {
            $("canvas").drawImage({
                source: image,
                x: 50, y: 50,
                width: 100,
                fromCenter: false
            });
        };
    });
}); 
```

我现在需要在单击按钮时从画布中获取二进制数据（Base64 编码），以便将数据推送到服务器......

最终结果是我需要为用户提供选择文件，裁剪/调整大小，然后单击按钮，此时编辑后的图像将上传到服务器（我不能做服务器端由于服务器端的限制，裁剪/调整大小...）

任何帮助都会很棒！干杯

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-03-28T15:30:11.347

该`canvas`元素提供了一种`toDataURL`方法，该方法返回一个`data:`URL，该 URL 包含给定格式的 base64 编码图像数据。例如：

```
var jpegUrl = canvas.toDataURL("image/jpeg");
var pngUrl = canvas.toDataURL(); // PNG is the default 
```

虽然返回值不*只是*base64 编码的二进制数据，但剪掉方案和文件类型以获取您想要的数据是一件简单的事情。

`toDataURL`如果浏览器认为您已将任何从不同来源加载的数据绘制到画布上，则该方法将失败，因此该方法仅在您的图像文件与执行此脚本的 HTML 页面从同一服务器加载时才有效手术。

有关更多信息，请参阅[API](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)[上的 MDN 文档`canvas`](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)，其中包含有关的详细信息`toDataURL`，以及有关[URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)[的 Wikipedia 文章`data:`](http://en.wikipedia.org/wiki/Data_URI_scheme)，其中包含有关您将从该调用中收到的 URI 格式的详细信息。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-08-19T20:35:00.710

# 简短的回答：

```
const base64Canvas = canvas.toDataURL("image/jpeg").split(';base64,')[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T20:38:31.027

看看你如何绘制你的画布

`$("canvas").drawImage();`

看来您使用的是 Caleb Evans 的 jQuery Canvas ( [jCanvas](http://projects.calebevans.me/jcanvas/) )。我实际上使用了那个插件，它有一个简单的方法来检索画布 base64 图像字符串`$('canvas').getCanvasImage();`

这是一个适合你的小提琴：http: [//jsfiddle.net/e6nqzxpn/](http://jsfiddle.net/e6nqzxpn/)

# php - 如何显示 Facebook 页面帖子？

> ID：15685699
> 
> 赞同：0
> 
> 时间：2013-03-28T15:22:52.010
> 
> 标签：php, facebook-graph-api

我想做的就是在公司网站上显示来自 Facebook 页面的 3 个最新帖子。这是我目前使用可以从 facebooks graph api explorer 生成的 access_token 的代码。

```
<?php
$token = 'AAACfoqFEeZC0BAB9I7MpVUNXNQADQA8WCzBngUZAjCjZCDHZCi4kIDFDl3cQjLZCndgSyp9talZA4ERCfS14iMZAIQa2DuAEfHUYZAr0qlDYKwZDZD';
$feed = file_get_contents('https://graph.facebook.com/mypageidhere/posts?fields=message&limit=3&access_token='.$token);
$json = json_decode($feed);

foreach($json->data as $update) {

        echo $update->message.'<br /><hr />';   

}
?> 
```

除了访问令牌过期外，这很好用。我不希望用户必须登录网站或类似的东西。我已经阅读了 Facebook API 文档，但是它非常糟糕，对我没有帮助。有没有办法获得终身访问令牌或根本不使用 access_token？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:25:51.710

曾经有一种请求离线访问的方法，但它似乎已被弃用。更多信息在这里[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:39:33.490

如果有人对我在这里找到的解决方案感兴趣，那就是。我使用了 facebook php/sdk

```
require_once "facebook-php-sdk/src/facebook.php";

$facebook = new Facebook(array(
  'appId'  => '<YOUR APP ID>',
  'secret' => '<YOUR SECRET>'
));

$query = 'SELECT post_id, message, permalink, likes, type, created_time FROM stream WHERE source_id = <PAGE ID> AND actor_id = <PAGE ID> LIMIT 3';
$facebook_data = $facebook->api(array(
                           'method' => 'fql.query',
                           'query' => $query,
                        )); 
```

起初，这返回了一个空数组，经过一些故障排除后，我意识到需要调整页面隐私设置以消除年龄限制。然后每个人都可以看到该页面，并且该解决方案完美运行。

# drupal-7 - 尝试更改 Drupal 7 中的查看日期标签时出错“没有小时粒度的日期不得使用任何时区处理。”

> ID：15685700
> 
> 赞同：0
> 
> 时间：2013-03-28T15:22:53.603
> 
> 标签：drupal-7, datefield

我正在尝试更改字段“查看日期”->“显示日期”上的标签。但我收到此错误：“没有小时粒度的日期不得使用任何时区处理。”

搜索该短语会找到生成错误的后端代码，但不会找到如何修复它。不幸的是，我不够先进，无法编辑/修改代码以允许我更改标签或忽略该警告。

到目前为止，我已经： - 确认我的时区设置正确 - 删除了“用户可以设置自己的时区”的选项。- 将字段小部件更改为文本字段

不幸的是，我们无法创建新字段，因为我们已经有使用日期字段的文章。

过去，我已经成功地编辑了字段的名称，所以这似乎是一个简单的修复。有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:28:52.857

时区处理是与日期字段相关的选项。您很可能会在用于更改字段标签的相同表单的底部找到它。我假设您的内容类型使用日期字段为节点设置日期，而不管日期字段本身的时间部分（粒度：天）。如果是这种情况，则应将时区处理设置为“无时区转换”。

# java - Android：java 舍入错误。不明白为什么？

> ID：15685705
> 
> 赞同：8
> 
> 时间：2013-03-28T15:23:10.633
> 
> 标签：java, android, bigdecimal, rounding

谁能解释为什么地球上这些“相同”的表达式会返回不同的值？

```
(new BigDecimal(String.valueOf(131.7d))).multiply(new BigDecimal(String.valueOf(0.95d))).doubleValue() = 125.115

(new BigDecimal(               131.7d )).multiply(new BigDecimal(               0.95d )).doubleValue() = 125.11499999999998 
```

BigDecimal 在他们之间有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:25:51.593

如果您查看[API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)：

```
BigDecimal(double val)
          Translates a double into a BigDecimal which is the exact decimal representation of the double's binary floating-point value. 
```

相对

```
BigDecimal(String val)
          Translates the string representation of a BigDecimal into a BigDecimal. 
```

这些其实不是一回事。在`double`构造函数中，它使用浮点数（本质上是不准确的）。在`String`构造函数中，它采用您提供的确切值，而**不是**进行浮点转换。所以这实际上意味着上面的构造函数不是“相同”的表达式

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T15:40:15.083

如果您阅读 API 文档，您会发现 taht`String.valueOf(dobule)`用于`Double.toString(double)`格式化该值。这可能并不明显，但`Double.toString(double)`在将其格式化为字符串之前将值四舍五入：

> m 或 a 的小数部分必须打印多少位？必须至少有一个数字来表示小数部分，除此之外，必须有尽可能多的数字，但只需要将参数值与相邻的 double 类型值唯一区分开来。也就是说，假设 x 是由该方法为有限非零参数 d 生成的十进制表示所表示的精确数学值。那么 d 必须是最接近 x 的 double 值；或者如果两个双精度值同样接近 x，则 d 必须是其中之一，并且 d 的有效位的最低有效位必须为 0。

结果是`String.valueOf(131.7d)`即使参数的确切值为 131.69999999999998863131622783839702606201171875，也会返回字符串“131.7”。这样做的原因是小数部分不能总是用二进制小数精确表示（与浮点数和双精度数一起使用）。

因此，new`new BigDecimal(String.valueOf(131.7))`将创建一个精确值为 131.7 的 BigDecimal。`new BigDecimal(131.7)`将创建一个精确值为 131.69999999999998863131622783839702606201171875 的 BigDecimal。

# r - 如何使 geom_boxplot 异常值与抖动的 geom_points “对齐”？

> ID：15685706
> 
> 赞同：5
> 
> 时间：2013-03-28T15:23:11.000
> 
> 标签：r, graphics, ggplot2

如何使 geom_boxplot 异常值与抖动的 geom_points 完美叠加？

例如，我希望 geom_boxplot 中的异常值在抖动后在 geom_point 的实际点上显示为“十字线”？

```
library(ggplot2)
p <- ggplot(mtcars, aes(factor(cyl), mpg)) + 
  geom_boxplot(outlier.shape=10, outlier.size=8)  +
  geom_point(aes(factor(cyl), mpg, color=mpg),  position="jitter", size=4)
p 
```

![阴谋](../Images/db56d05232e1c40c645f2c2954f71e05.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:53:15.743

我同意 Didzis 的观点，即*完全*符合您的目标的解决方案将得到公平参与。从字面上执行您的建议需要（我认为）您在 ggplot 之外进行抖动和异常值计算。如果您对突出显示异常值的方式很灵活，那么这可能是一个更短的解决方案：

```
id_outliers <- function(x){
    q <- quantile(x,c(0.25,0.75))
    iqr <- abs(diff(q))
    ifelse((x < q[1] - 1.5*iqr) | (x > q[2] + 1.5*iqr),'Outlier','NotOutlier')
}

mtcars <- ddply(mtcars,
                .(cyl),
                transform,
                out = id_outliers(mpg))

p <- ggplot(mtcars, aes(factor(cyl), mpg)) + 
  geom_boxplot(outlier.colour = NA)  + 
  geom_point(aes(colour = mpg,shape = out),position = "jitter") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T16:48:04.220

这个解决方案会很长。问题是`position="jitter"`您无法获得点的精确坐标，因此需要找到解决方法。

所以把你原来的情节用`ggplot_build()`. 数据的第一个元素包含有关箱线图的信息。我们对 column 感兴趣，`group`因为`outliers`它显示了 ggplot 假定哪些值是异常值。将它们保存为单独的对象。

```
p <- ggplot(mtcars, aes(factor(cyl), mpg)) + 
                geom_boxplot(outlier.shape=10, outlier.size=8)  +
                geom_point(aes(color=mpg),  position="jitter", size=4)
gg<-ggplot_build(p)
gg$data[[1]]
  ymin lower middle upper ymax         outliers notchupper notchlower x PANEL group weight ymin_final
1 21.4 22.80   26.0 30.40 33.9                    29.62055   22.37945 1     1     1      1       21.4
2 17.8 18.65   19.7 21.00 21.4                    21.10338   18.29662 2     1     2      1       17.8
3 13.3 14.40   15.2 16.25 18.7 10.4, 10.4, 19.2   15.98120   14.41880 3     1     3      1       10.4
  ymax_final  xmin  xmax
1       33.9 0.625 1.375
2       21.4 1.625 2.375
3       19.2 2.625 3.375

xx<-gg$data[[1]][c("group","outliers")]
xx
  group         outliers
1     1                 
2     2                 
3     3 10.4, 10.4, 19.2 
```

现在将`group`值更改为 4,6 和 8 以与`cyl`值相同。

```
xx$group<-c(4,6,8) 
```

现在将此新数据框与原始数据框合并`mtcars`并另存为新数据框。然后应用函数来检查该级别`mpg`是否列出了详细值。这些值（TRUE 和 FALSE）保存在列中。`outliers``cyl``out`

```
mtcars.new<-merge(mtcars,xx,by.x="cyl",by.y="group")
mtcars.new$out<-apply(mtcars.new,1,function(x) x$mpg %in% x$outliers) 
```

使用新数据框绘制数据。删除异常值表格`geom_boxplot()`。使用列`out`来确定点的形状和大小。与`scale_shape_manual()`调整`scale_size_manual()`外观。

```
ggplot(mtcars.new, aes(factor(cyl), mpg)) + 
          geom_boxplot(outlier.shape = NA)  +
          geom_point(aes(color=mpg,shape=out,size=out),  position="jitter")+
          scale_shape_manual(values=c(16,10),guide="none")+
          scale_size_manual(values=c(4,8),guide="none") 
```

![在此处输入图像描述](../Images/89cee090c5d43bbcee02b958c0bfa8b7.png)

# javascript - 确定鼠标点击发生在 DIV 的左半部分还是右半部分

> ID：15685708
> 
> 赞同：13
> 
> 时间：2013-03-28T15:23:13.100
> 
> 标签：javascript, jquery, html

我想知道是否可以计算鼠标单击是否发生在 div 元素的左半部分或右半部分：

```
$("div").click(function(e){
 // calculate if click happened on left or right half
});

<div>Variable Content</div> 
```

希望有一种方法可以获取相对坐标并将它们与 div 的宽度相关联吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T15:32:55.073

```
$("div").click(function(e){
   var pWidth = $(this).innerWidth(); //use .outerWidth() if you want borders
   var pOffset = $(this).offset(); 
   var x = e.pageX - pOffset.left;
    if(pWidth/2 > x)
        $(this).text('left');
    else
        $(this).text('right');
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/QRKn7/1/](http://jsfiddle.net/dirtyd77/QRKn7/1/)

希望这可以帮助！如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:32:09.450

这应该这样做：

```
$("div").click(function(e){
    var $div = $(this);
    alert(e.pageX >= ($div.offset().left + $div.width()/2) ? 'clicked right' : 'clicked left');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T15:32:37.220

```
var x = evt.pageX - $(this).offset().left

if (x > $(this).width()/2) {
  //Right half
} else {
  //Left half
} 
```

所以完整的代码是

```
$("div").click(function(e){
   // calculate if click happened on left or right half
  var x = evt.pageX - $(this).offset().left

  if (x > $(this).width()/2) {
    //Right half
  } else {
    //Left half
  }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T15:32:29.850

要获得鼠标在其中的位置，您可以计算鼠标位置与 div 偏移量之间的差异。然后将它与 div 本身的半宽度进行比较，瞧。

**编辑**

```
$(function ()
{

    $("#test").click(function(e){
       var offset = $(this).offset(); 
       var pos_x = e.pageX - offset.left;
       var middle = $(this).outerWidth() / 2;

       if(pos_x < middle)
       {
           alert('left part');
       }
       else
       {
             alert('right part');
       }
    });

}); 
```

你可以在这里查看：

[http://jsfiddle.net/kZuML/](http://jsfiddle.net/kZuML/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-15T20:11:12.307

一个有效的 JS 解决方案：

```
onClick(e) {
    const clickTarget = e.target;
    const clickTargetWidth = clickTarget.offsetWidth;
    const xCoordInClickTarget = e.clientX - clickTarget.getBoundingClientRect().left;
    if (clickTargetWidth / 2 > xCoordInClickTarget) {
      // clicked left
    } else {
      // clicked right
    }
  } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T15:39:14.447

[小提琴](http://jsfiddle.net/DWj4n/)因为你知道 - YOLO！

```
$("#special").on('click', function(e){

    var x = e.pageX - this.offsetLeft;
    var y = e.pageY - this.offsetTop; //You probably don't need Y. Unless you want to know height as well.

    var width = $(this).width(),
        where = width / 2;
    if( x > where ){
        console.log("Click was on the right");
    } else {
        console.log("Click was on the left");
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-11T21:40:40.070

PURE JAVASCRIPT 解决方案 - 参加晚会。但最近使用我的代码完成了这项工作。在 body 标签或 div 上给它 ID 并调用 javascript 函数，例如。id="tt" onclick="showCoords(事件)"

```
 function showCoords(event) {
        var x = event.clientX;
        var y = event.clientY;
    //    var coor = "X coords: " + x + ", Y coords: " + y;
    //    document.getElementById("demo").innerHTML = coor;
        var ele = document.getElementById("tt");
        var width = ele.offsetWidth;
        var height = ele.offsetHeight;
        var half=(width/2);
       if(x>half)
        {
            alert('right click');

        }
        else
       {
           alert('left click');

        }

    } 
```

# c# - 有没有办法从 vsix 扩展检测 VS 2012 中是否有打开的解决方案？

> ID：15685715
> 
> 赞同：2
> 
> 时间：2013-03-28T15:23:22.070
> 
> 标签：c#, visual-studio-2012, vsix

如果在未加载解决方案的情况下打开我的扩展工具窗口的一部分，我想禁用它，并且需要一种方法来检测这一点。

我知道在打开/关闭解决方案时触发的 DTE 事件，当 IDE 本身完成加载时是否可能有类似的事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T15:23:22.070

我在写这个问题时找到了我的答案，但我想我还是可以提交，以防其他人将来用与我类似的搜索词来寻找这个。

[EnvDTE.Solution.IsOpen](http://msdn.microsoft.com/en-us/library/envdte._solution.isopen.aspx)

# javascript - 点击事件多次显示警报

> ID：15685717
> 
> 赞同：0
> 
> 时间：2013-03-28T15:23:24.620
> 
> 标签：javascript, jquery, events

我正在尝试使用 jQuery 将单击事件绑定到元素。我注意到回调函数中的任何`alert`or`window.open`或`window.showModalDialog`内部在 Safari 和 Chrome（OS X 10.8.3 / Safari 6.0.1 / Chrome 26 beta）中显示了 3 次。火狐工作正常。

但是当我这样做时`console.log`它很好，它只记录一次（如预期的那样）。

我还尝试使用 .click 和 .bind 以及旧版本的 jQuery 绑定事件，但它们都是相同的。

我还用 .trigger('click') 触发了点击事件，它按预期工作得很好。所以我猜我的操作系统或浏览器有问题，但是 console.log 的东西应该记录了 3 次，而不是一次。

这是代码：http: [//jsfiddle.net/t6DBa/3/](http://jsfiddle.net/t6DBa/3/)

谢谢。

# backbone.js - 如何让主干将提交事件绑定到表单？

> ID：15685718
> 
> 赞同：15
> 
> 时间：2013-03-28T15:23:26.057
> 
> 标签：backbone.js, backbone-views, backbone-events

我正在使用以下代码来创建视图：

```
LoginForm = Backbone.View.extend({

    tagName :"form"
    ,id : "login-form"
    ,className :"navbar-form"
    ,initialize: function () {
            this.model = new StackMob.User();
            this.render();
    }
    ,render: function () {
            $(this.el).html(this.template());
            return this;
    }
    ,events : {
            "change" : "change"
            ,"submit #login-form" : "login"
    }
    ,login : function( event) {
            event.preventDefault();
            var self = this;
            this.model.login(true, {
                    success: function( model) {
                            app.alertSuccess( "User logged in");
                            self.render();
                    }
                    ,error: function( model, response) {
                            app.alertError("Could not login  user: " + response.error_description);
                    }
            });
            event.currentTarget.checkValidity();
            return false;
    }
// rest of code 
```

和模板：

```
<input name="username" class="span2" type="email" placeholder="Email" required >
<input name="password" class="span2" type="password" placeholder="Password" required >
<button id="login-button" type="submit" class="btn">Sign in</button> 
```

当我绑定按钮时，会调用登录函数。绑定表单提交事件，登录函数不会被调用。如果 id 和 form 标签是模板的一部分，我也可以让表单绑定，这不是我想要做的。

在这种情况下如何绑定表单提交？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-28T15:32:08.063

```
"submit #login-form" : "login" 
```

我认为 Backbone 只会在后代中搜索这个 id。所以它永远不会匹配你自己的视图元素。你为什么不直接使用：

```
"submit": "login" 
```

正如你为改变所做的那样。
为了确定，我会检查 Backbone 的代码。

**编辑：**
如果你放一个选择器，Backbone 会调用

```
this.$el.on(event, selector, method); 
```

代替

```
this.$el.on(event, method); 
```

jQuery 的 on 方法只会将选择器应用于元素的**后代**，不包括元素本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-06T04:06:43.603

你用错了主干。所以你想做的事，

```
template: my_template_string,
render: function () {
    this.el.innerHTML = this.template();
},
events: {
    "submit #login-form": function (event) {}
} 
```

在哪里`this.template`设置

```
<form id="login-form" class="navbar-form">
    <input name="username" class="span2" type="email" placeholder="Email" required >
    <input name="password" class="span2" type="password" placeholder="Password" required >
    <button id="login-button" type="submit" class="btn">Sign in</button>
</form> 
```

这难道不是*唯一*有意义的吗？为什么要将 id 和 classname 与输入元素分开？顺便说一句，你仍然可以在 上做赤裸裸的笼统`submit`，但只有在我的方法中，

*   类`<form>`和`<form>`属性绑定到表单的模板，而不仅仅是主干视图，
*   你会明确捕获正确的提交吗？
*   你能支持多个提交事件吗（如果一个模板有两个表单）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T15:23:22.850

也许当您绑定表单提交事件时，只有提交表单才会触发“提交”事件。您可以添加以下代码并重试。

```
$('#id').submit(function(ev) {

}); 
```

# php - 从数据库移动到网页时，电子邮件文本被截断？

> ID：15685720
> 
> 赞同：0
> 
> 时间：2013-03-28T15:23:31.597
> 
> 标签：php, sql-server

我有一个使用从 SQL Server 数据库中提取的 PHP 填充的表。现在，仅从 SQL Server 表格单元格中提取前几百个字符，因此显示的电子邮件显示为截断。

当我移动数据时，是什么导致其余字符被截断？

两条消息被截断的示例： ![在此处输入图像描述](../Images/a8616d388c9fe0f77915a964f19b771b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:16:59.773

很可能您的列设置为`VARCHAR`无法容纳那么多数据的类型 (?)。如果您要存储来自用户输入的长字符串，您可能需要尝试将列更改为其他类型，例如`TEXT`或`LONGTEXT`取决于您期望的文本量。

# jquery - IE9+8 HTML5 视频 - 视频加载但“不可见”

> ID：15685722
> 
> 赞同：1
> 
> 时间：2013-03-28T15:23:36.763
> 
> 标签：jquery, css, internet-explorer-8, internet-explorer-9, html5-video

我在页面上有一个 html5 视频标签，带有 IE8 的 Flash 后备。视频通过 display:none 隐藏并附加到父“a”，直到按下播放按钮（图像）。此时视频元素被移动到父'b'（覆盖内的一个框），我调用jQuery的show（）。

在 Chrome、FF 和 Safari 上，视频显示。但是，在 IE9 和 IE8 上，视频不显示，但存在。意思是，我可以右键单击它应该在的位置，并将获得一个与视频相关的上下文菜单。如果我此时单击播放，视频将定期出现并播放。

让视频出现的另一种方法是更改​​视频元素的一些 css。例如，将 box-sizing 从原来的 (border-box) 更改为 content-box 将使视频出现，反之亦然。

尝试从该控制台执行此操作是可行的。另一方面，试图在我的脚本中做到这一点并没有。

这是视频元素的 css 及其继承的内容：

```
*, html > * { box-sizing: border-box; }
audio, canvas, video { display: inline-block; }
.center { text-align: center; }
#section1 #videobox .videoPlayer { cursor: pointer; }

#video {
    width: 100%;
    height: 100%;
    display: block;
    position: absolute;
    z-index: 10003;
} 
```

我猜这可能是一个奇怪的布局问题（我会说 hasLayout，但幸运的是我没有处理 IE6/7）。

**更新** 我已经设法在 jsfiddle 中复制了这个问题：http: [//jsfiddle.net/e76x5/5/](http://jsfiddle.net/e76x5/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:32:25.267

我遇到了类似的问题，我能做的就是删除视频高度的任何 css 声明，并在显示后使用 javascript 设置它。您可以检查[IE9 HTML5 视频仅在缓存清除后可见](https://stackoverflow.com/questions/15793796/ie9-html5-video-visible-only-after-cache-clearing?lq=1)

# vim - Vimscript : let g: , let b: 等有什么区别？

> ID：15685729
> 
> 赞同：92
> 
> 时间：2013-03-28T15:23:44.307
> 
> 标签：vim

我经常在 vim 插件中看到类似这样的东西：

```
let g:variable
let b:variable
let l:variable 
```

我在 vim 文档和 Internet 上对这些字母 'g'、'b'、'l' 进行了长时间的研究，但我发现注意到了。

那么这些字母对应的是什么？完整的字母列表是什么？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-03-28T15:31:17.097

看`:help internal-variables`

它列出了以下类型：

```
                （无）在函数中：函数的局部；否则：全球
buffer-variable b：当前缓冲区的局部变量。                          
window-variable w：当前窗口的局部变量。                          
tabpage-variable t：当前标签页的局部变量。                        
全局变量 g：全局。                                               
local-variable l：函数的局部变量。                                  
script-variable s：本地到 :source'ed Vim 脚本。                     
function-argument a：函数参数（仅在函数内部）。           
vim-variable v：全局，由 Vim 预定义。

```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-28T15:30:49.820

b：当前缓冲区的本地

l：函数的局部

g：全球

:help 内部变量

# php - 使用 PHP 的 MySQL 日期条件

> ID：15685731
> 
> 赞同：0
> 
> 时间：2013-03-28T15:23:46.497
> 
> 标签：php, mysql, sql, time

我需要一些帮助来解决一个简单的问题，但我无法弄清楚它是如何正常工作的

我将日期存储在 MySQL 中，例如 01/02/2012 07:40:23

这个日期被提取到 $list['timeadded'] 变量中的 php 中。

我需要检查当前日期与该日期之间的差异是否小于或等于 7 天，然后我将显示天数的差异，否则回显关闭。

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:28:12.263

~~我认为这可能会满足您的需求（将此添加到您的查询中）~~

~~WHERE CURDATE() >= STR_TO_DATE( `datecol`, "%c/%d/%Y %H:%i:%s") - 间隔 7 天~~

**PHP版本**

```
$list['timeadded'] = '01/02/2012 07:40:23';
$dt1 = new DateTime($list['timeadded']);

$dt2 = new DateTime();
$dt2->sub(new DateInterval('P7D'));

$interval = $dt1->diff($dt2);
echo $interval->format('%d days'); 
```

[看到它在行动](http://3v4l.org/5b1MZ)

您可以获得使用天数`$interval->d`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:32:59.323

我现在您正在寻找 PHP 解决方案，但您可以直接在 SQL 中以有效的方式完成这项工作，并且您可以避免签入 php。查看演示 URL 并检查输出。

[http://sqlfiddle.com/#!2/ca91e/26](http://sqlfiddle.com/#!2/ca91e/26)

桌子：

```
create table t (id int(3), date varchar(40));
insert into t values (1, '25/03/2013 07:40:23'), 
(2, '26/03/2013 07:40:23'),
(3, '20/03/2013 07:40:23'); 
```

SQL：

```
SELECT id, date_format(curdate(), '%Y-%m-%d %h:%i:%s') AS CurrDate,
date_format(STR_TO_DATE(date, '%d/%m/%Y %h:%i:%s'), '%Y-%m-%d %h:%i:%s') AS MyDate,
if(datediff(date_format(curdate(), '%Y-%m-%d %h:%i:%s'), date_format(STR_TO_DATE(date, '%d/%m/%Y %h:%i:%s'), '%Y-%m-%d %h:%i:%s'))<=7,
datediff(date_format(curdate(), '%Y-%m-%d %h:%i:%s'), date_format(STR_TO_DATE(date, '%d/%m/%Y %h:%i:%s'), '%Y-%m-%d %h:%i:%s')), 'closed') AS Text
FROM t; 
```

输出：

```
ID  CURRDATE                MYDATE                 TEXT
1   2013-03-29 12:00:00     2013-03-25 07:40:23     4
2   2013-03-29 12:00:00     2013-03-26 07:40:23     3
3   2013-03-29 12:00:00     2013-03-20 07:40:23     closed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:31:37.190

在您的查询中，我会在该字段上使用 UNIX_TIMESTAMP()。所以：

```
SELECT
  UNIX_TIMESTAMP(timeadded) AS timeadded
FROM `your_table` 
```

然后，有了这个结果，我会从当前日期中减去它。所以：

```
$difference = (time()-$list['timeadded']); 
```

我现在有时差，以秒为单位。您可以使用 将其格式化为天、分钟或小时`date()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:32:50.937

您可以使用此处描述的 datediff 函数：[http](http://www.php.net/manual/en/datetime.diff.php) ://www.php.net/manual/en/datetime.diff.php或者您可以编写自己的函数来计算两个日期之间的差异，方法是将它们转换为 unix 时间戳，然后计算两者之间的秒数，然后计算天数。

```
function numberOfDays($datecol) {
     $dateSeconds = strtotime($datecol);
     $now = time();
     $seconds = $now - $dateSeconds;
     //calcualte the number of days 
     $days = $seconds / (60 * 60 * 24);
     return $days
 } 
```

# dojo - Dojo：增强的网格布局选项具有子列？

> ID：15685734
> 
> 赞同：0
> 
> 时间：2013-03-28T15:23:55.490
> 
> 标签：dojo

我正在尝试使增强的网格看起来像：

![在此处输入图像描述](../Images/49c2b55e621ed8926a04e807a3f9e879.png)

正如您在表格的每一行中看到的，我只会显示 col1、Col2AA、Col2AB、Col2BA、Col2BB 等的信息

Col2、Col3、Col2A、Col2B 等只是让用户知道 Col2AA 是什么的超级标题。

有人对 Dojo 的网格布局有任何经验吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:03:52.117

我不认为你可以用增强的网格来做到这一点。如果您使用 dojo 1.7> 您可以尝试 dgrid 代替...

看 ：

*   [https://github.com/SitePen/dgrid/wiki/CompoundColumns](https://github.com/SitePen/dgrid/wiki/CompoundColumns)
*   [http://dojofoundation.org/packages/dgrid/tutorials/defining_grid_structures/](http://dojofoundation.org/packages/dgrid/tutorials/defining_grid_structures/)

# iphone - 记录特定大小的数组

> ID：15685735
> 
> 赞同：1
> 
> 时间：2013-03-28T15:23:57.770
> 
> 标签：iphone, objective-c, cocoa-touch

我正在为输入的值缓存 20 条最大记录。这是代码

```
NSMutableArray *startingArray = [[defaults objectForKey:@"startingTextArray"] mutableCopy];

if (startingArray == nil)
startingArray = [[NSMutableArray alloc] initWithCapacity:0];

if (![startingArray containsObject:self.starting.text])
[startingArray addObject:self.starting.text];

[defaults setObject:startingArray forKey:@"startingTextArray"]; 
```

问题是，我怎样才能让它只修复 20 个值？例如，如果填充了 20 个空格，则下一个条目 setObject 在第一个位置添加并删除第一个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:28:34.937

您必须检查您是否在第 20 个对象处，以及是否开始替换索引 0 处的对象

```
 NSMutableArray *startingArray = [[defaults objectForKey:@"startingTextArray"] mutableCopy];
    if (startingArray == nil)
        startingArray = [[NSMutableArray alloc] initWithCapacity:0];

if (![startingArray containsObject:self.starting.text] && (startingArray.count +1) <= 20)
     [startingArray addObject:self.starting.text];
else {
     [startingArray insertObject:obj atIndex:0];
     [startingArray removeObjectAtIndex:(startingArray.count - 1)];
}

[defaults setObject:startingArray forKey:@"startingTextArray"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:36:19.300

使用一些计数器和模数

例子：

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:20];
for (int i = 0; i < 42; i++)
    array[i % 20] = @(i); 
```

印刷：

40, 41, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39

# arrays - 如何从 BASH 中的数组中提取特定元素？

> ID：15685736
> 
> 赞同：39
> 
> 时间：2013-03-28T15:23:58.777
> 
> 标签：arrays, bash

以下是我创建 bash 数组的方法：

```
while read line
do
   myarr[$index]=$line
   index=$(($index+1))
done < lines.txt 
```

文件“lines.txt”由以下字符串组成

```
hello big world!
how are you
where am I 
```

创建后，`${myarr[@]}`我可以轻松访问此数组中的每个元素（行）

```
echo ${myarr[2]} 
```

但是如果我只想提取`world!`呢？是否可以`world!`从 0 的元素中提取`myarr`？最重要的是，是否可以从`myarr`元素中提取任何最后一个单词？

我知道在 python 中你可以做到这一点`myarr[0][3]`，这会成功，那么 bash 呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-28T15:33:24.287

这是许多方法之一

```
set ${myarr[2]}
echo $3 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-28T20:33:24.227

您可以使用变量扩展中的修饰符从字符串（即数组元素的含义）中提取单词：（`#`删除前缀）、`##`（删除前缀，贪婪）、`%`（删除后缀）和`%%`（删除后缀，贪婪）。

```
$ myarr=('hello big world!' 'how are you' 'where am I')
$ echo "${myarr[0]}"      # Entire first element of the array
hello big world!
$ echo "${myarr[0]##* }"  # To get the last word, remove prefix through the last space
world!
$ echo "${myarr[0]%% *}"  # To get the first word, remove suffix starting with the first space
hello
$ tmp="${myarr[0]#* }"    # The second word is harder; first remove through the first space...
$ echo "${tmp%% *}"       # ...then get the first word of what remains
big
$ tmp="${myarr[0]#* * }"  # The third word (which might not be the last)? remove through the second space...
$ echo "${tmp%% *}"       # ...then the first word again
world! 
```

正如您所看到的，您可以在这里变得相当花哨，但在某些时候@chepner 将其转换为数组的建议变得容易得多。此外，我建议用于提取第二个 etc 单词的公式有点脆弱：如果您使用我的公式来提取只有两个单词的字符串的第三个单词，第一次修剪将失败，并且最终会打印第一个（！）单词而不是空格。此外，如果您连续有两个空格，这会将其视为一个长度为零的单词，每边都有一个空格......

顺便说一句，在构建数组时，我认为它使用起来更简洁，`+=(newelement)`而不是显式地跟踪数组索引：

```
myarr=()
while read line, do
    myarr+=("$line")
done < lines.txt 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-08-18T15:56:27.187

类似于[stephen-penny 的](https://stackoverflow.com/users/1002260/steven-penny)答案，但没有覆盖外壳/函数位置参数。

```
a=(${myarr[2]})
echo ${a[3]} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-20T08:41:17.793

使用索引从数组中打印特定元素：

```
echo ${my_array[2]} 
```

打印数组中的所有元素：

```
for i in "${my_array[@]}"
do
    echo $i
done 
```

# drupal - Drupal 导入音频失败

> ID：15685739
> 
> 赞同：-2
> 
> 时间：2013-03-28T15:24:03.497
> 
> 标签：drupal, drupal-7, drupal-feeds

我使用 Media Feeds 导入 900 个音频文件。

配置已正确设置，但在导入步骤中出现消息错误：

“无法获取 /sites/all/files/audios/categorie1/xxxx.mp3 的文件对象”

以 XML 为例，音频文件路径为 /sites/all/files/audios/categorie1/xxxx.mp3

我不明白为什么它失败了......

有人可以解释一下吗？& 告诉我如何导入所有音频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:25:12.030

我从未使用过这个模块，但我想它应该寻找文件*sites/all/files/audios/categorie1/xxxx.mp3*而不是*/sites/all/files/audios/categorie1/xxxx.mp3*（没有 / 开头） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T15:06:20.920

在 drupal7 中下载“ [feedtamper](http://www.drupal.org/project/feeds_tamper) ”模块。

转到**admin-structure > feedimporters > tamper**，您可以看到 Tamper 中的字段。

单击“**添加插件**”，然后单击“**要添加的插件**” ，为所有字段选择“**重写”。**

在此之下，您可以在该类型“ **public:// ”中看到“** **configuration rewrite** ” +避免使用“public://”的**可用替换模式。**

 ****然后转到**管理结构 > 内容类型 > 您的内容类型 > 管理字段**以单击“**哪个字段用于存储 mp3** ”。

“**允许的文件扩展名**”检查“ **mp3** ”是否输入。

“**最大上传大小**”输入“ **50 MB** ”

点击“**保存设置**”

必须清除缓存。****

# jquery - Rails-基于集合选择动态显示数据

> ID：15685740
> 
> 赞同：2
> 
> 时间：2013-03-28T15:24:06.093
> 
> 标签：jquery, ruby-on-rails

我在一个模型中有一堆数据，我想根据集合选择（下拉）框显示这些数据。部分数据如下所示...

```
class CreateSections < ActiveRecord::Migration
  def change
    create_table :sections do |t|
      t.string :supervisor
      t.string :catagory
      t.string :title
      t.string :description
      t.string :days
      t.string :start_date
      t.string :end_date
      t.string :start_time
      t.string :end_time
      t.string :course_id
      t.string :room
      t.string :building
      t.string :location
      t.string :tuition
      t.string :lab_fee
      t.string :insurance_fee
      t.string :technology_fee

      t.timestamps
    end
  end
end 
```

我的收藏选择看起来像这样......

```
 collection_select(:section, :section_id, @sections, :id, :title) 
```

所以用户将从下拉列表中选择标题，我想显示描述。理想情况下，我想用 jquery 来做到这一点。

编辑

这是有关 html 外观的更多信息...

```
 <select id="section_section_id" name="section[section_id]"><option value="1">Long Title</option>
<option value="2"> Alternative Investments for Small Business  NEW</option>
<option value="3">Bookkeeping Basics for the Natural Products Industry  NEW  </option>
... 
```

在 app/assets/javascripts/sections.js 我现在有......

```
$(function(){
  $("#section_section_id").change(function(){
    alert('wintas');
  })
}) 
```

所以现在基于选择的选项，我想显示与该选项关联的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:32:09.707

您可以使用`options_for_select`将要显示的信息放置在该选项的数据属性中

假设您在表单的上下文中进行了选择

```
<%= f.select :section, :section_id, options_for_select(@sections.map{ |s| [s.title, s.id, {'data-description'=>s.description}] }) %> 
```

这将生成这样的html

```
<option value="2" data-description= "description of 2"> Alternative Investments for Small Business  NEW</option>
<option value="3" data-description="description of 3">Bookkeeping Basics for the Natural Products Industry  NEW  </option> 
```

然后就可以用js来展示了

这是一个js的工作演示

[http://jsfiddle.net/Tt3TS/](http://jsfiddle.net/Tt3TS/)

希望有帮助

# ios - 通过 UITableView 保存到 SQLITE3 时的奇怪行为

> ID：15685745
> 
> 赞同：1
> 
> 时间：2013-03-28T15:24:11.733
> 
> 标签：ios, objective-c, uitableview, sqlite

我无法理解为什么我的 sqlite3 insert 命令只保存某些 index.rows

当前，当用户选择表上的特定行时，以下命令开始

```
 NSMutableString * videoString = [self.filteredVideoArray objectAtIndex:indexPath.row];

    NSMutableString * imageString = [self.filteredImageArray objectAtIndex:indexPath.row];

    NSMutableString * titleString = [self.filteredTitleArray objectAtIndex:indexPath.row];

    NSString * descriptionString = [self.filteredDescriptionArray objectAtIndex:indexPath.row];

   NSString *sql = [NSString stringWithFormat:@"INSERT INTO Recent ('name', 'title', 'video', 'image', 'detail' ) VALUES ('%s','%s','%s','%s','%s')", [self.nameString UTF8String],[titleString UTF8String],[videoString UTF8String],[imageString UTF8String] ,[descriptionString UTF8String],NULL];

    char *err;

    if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err) !=SQLITE_OK) {
        sqlite3_close(db);
       // NSAssert(0, @"could not update table");
    }
    else{
        NSLog(@"table updated");
    } 
```

当我 NSLOG

```
 NSLog(@"video = %@",videoString);
    NSLog(@"image = %@",imageString);
    NSLog(@"detail = %@",descriptionString);
    NSLog(@"title = %@",titleString);
    NSLog(@"name = %@",self.nameString); 
```

以上所有都返回正确的值。

我不确定您需要哪些其他信息来解决此问题？

谢谢

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:33:19.507

在您的`Insert`字符串中，使用`"%@"`代替`"%s"`添加值。

```
 NSString *sql = [NSString stringWithFormat:@"INSERT INTO Recent ('name', 'title', 'video', 'image', 'detail' ) VALUES ('%@','%@','%@','%@','%@')", [self.nameString UTF8String],[titleString UTF8String],[videoString UTF8String],[imageString UTF8String] ,[descriptionString UTF8String]]; 
```

并且还从字符串`NULL`末尾删除。`Insert`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:01:01.870

通常建议不要使用 构建 SQL 语句`stringWithFormat`，而是使用`?`占位符。这可以保护您，以防其中一个值包含撇号。它还可以防止 SQL 注入攻击。因此你应该

```
NSString *sql = @"INSERT INTO Recent ('name', 'title', 'video', 'image', 'detail' ) VALUES (?,?,?,?,?)";

sqlite3_stmt *statement;

if (sqlite3_prepare(db, [sql UTF8String], -1, &statement, NULL) != SQLITE_OK)
{
    NSLog(@"%s: prepare error: %s", __FUNCTION__, sqlite3_errmsg(database));
    return;
}

if (sqlite3_bind_text(statement, 1, [self.nameString UTF8String], -1, NULL) != SQLITE_OK)
{
    NSLog(@"%s: bind 1 error: %s", __FUNCTION__, sqlite3_errmsg(database));
}

if (sqlite3_bind_text(statement, 2, [titleString UTF8String], -1, NULL) != SQLITE_OK)
{
    NSLog(@"%s: bind 2 error: %s", __FUNCTION__, sqlite3_errmsg(database));
}

// repeat for the other parameters

if (sqlite3_step(statement) != SQLITE_DONE)
{
    NSLog(@"%s: step error: %s", __FUNCTION__, sqlite3_errmsg(database));
}

sqlite3_finalize(statement); 
```

注意，除了使用`sqlite3_bind_text`函数之外，每当我没有收到成功的返回码时，我都会记录`sqlite3_errmsg`，所以它会准确地告诉我出了什么问题。如果你不看这些错误信息，你就瞎了眼。

# jquery - CakePhp Ajax 自动完成

> ID：15685751
> 
> 赞同：1
> 
> 时间：2013-03-28T15:24:24.223
> 
> 标签：jquery, jquery-autocomplete, cakephp-2.1, json

我正在尝试为 CakePhp 2.x 中的文本框设置 Ajax 自动完成功能。

在我看来，我有：

```
<?php $this->start('script'); ?>
<script type="text/javascript">
    $(document).ready(function () {
        var options, a;
        jQuery(function() {
            options = { 
                serviceUrl: "<?php echo $this->Html->Url(array('Controller' => 'Logs', 'action' => 'autoComplete')); ?>",
                minChars: 2,
            };
            a = $('#LogTimeSpent').autocomplete(options);
        });
    });
    $('#saveCust').click(function () {
        alert("Test")
    });
</script>
<?php $this->end(); ?> 
```

在我的控制器中，我有：

```
function autoComplete($query) {
    if ($this->request->is('ajax'))
    {
        $suggestions = $this->Customer->find('all', array(
            'conditions' => array(
                'Customer.fullName LIKE' => '%'.$query.'%'
                )
            ));
        return json_encode(array('query' => $query, 'suggestions' => $suggestions));

    }
} 
```

如果影响查询，Customer.fullName 是一个虚拟字段。Firebug 目前给我一个 500 内部服务器错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:47:42.863

我发现您必须做一些特别的事情才能使虚拟字段起作用。我决定虚拟字段不是要走的路，所以我更新了它。$`query`作为参数也是不正确的，我需要从中获取查询字符串`$this->params['url']['query'];`。最后，`json_encode`我需要使用`_serialize`. 这是我更新的控制器，所以希望这会对某人有所帮助。我的观点在原帖中是正确的。

```
function autoComplete() {
    if ($this->request->is('ajax'))
    {
        $query = $this->params['url']['query'];
        $this->set('query', $query);

        $customer = $this->Log->Customer->find('all', array(
            'conditions' => array(
                'OR' => array(
                    'Customer.first_name LIKE' => '%'.$query.'%',
                    'Customer.last_name LIKE' => '%'.$query .'%'
                )),
            'fields' => array(
                'Customer.first_name', 'Customer.last_name'
                )
            ));

        $names = array();
        $id = array();
        foreach ($customer as $cust) {
            $fullName = $cust['Customer']['last_name'] . ', ' . $cust['Customer']['first_name'];
            array_push($names, $fullName);
            array_push($id, $cust['Customer']['id']);
        }
        $this->set('suggestions', $names);
        $this->set('data', $id);
        $this->set('_serialize', array('query', 'suggestions', 'data'));        
    }
} 
```

# android - 如何使用 Android 处理程序更新 UI 线程中的 TextView？

> ID：15685752
> 
> 赞同：9
> 
> 时间：2013-03-28T15:24:25.533
> 
> 标签：android

我想`TextView`从 Android 应用程序中的异步任务更新 a。用 a 执行此操作的最简单方法是什么`Handler`？

有一些类似的问题，例如：[Android update TextView with Handler](https://stackoverflow.com/questions/11658754/android-update-textview-with-handler)，但例子很复杂，似乎没有答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T15:25:16.677

有几种方法可以更新您的 UI 并从 UI 线程外部修改一个`View`，例如。`TextView`A`Handler`只是一种方法。

这是一个示例，它允许单个`Handler`响应各种类型的请求。

在类级别定义一个简单的`Handler`：

```
private final static int DO_UPDATE_TEXT = 0;
private final static int DO_THAT = 1;
private final Handler myHandler = new Handler() {
    public void handleMessage(Message msg) {
        final int what = msg.what;
        switch(what) {
        case DO_UPDATE_TEXT: doUpdate(); break;
        case DO_THAT: doThat(); break;
        }
    }
}; 
```

在您的一个函数中更新 UI，该函数现在位于 UI 线程上：

```
private void doUpdate() {
    myTextView.setText("I've been updated.");
} 
```

从您的异步任务中，向`Handler`. 有几种方法可以做到这一点。这可能是最简单的：

```
myHandler.sendEmptyMessage(DO_UPDATE_TEXT); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-07T04:53:14.287

您也可以通过这种方式从后台线程更新 UI 线程：

```
Handler handler = new Handler(); // write in onCreate function

//below piece of code is written in function of class that extends from AsyncTask

handler.post(new Runnable() {
    @Override
    public void run() {
        textView.setText(stringBuilder);
    }
}); 
```

# php - CURL 不返回整个 html 源

> ID：15685755
> 
> 赞同：0
> 
> 时间：2013-03-28T15:24:31.720
> 
> 标签：php, curl

TI 想要获取远程站点 html 代码，为此我使用 CURL，这是我的代码

```
 $URL = "http://example.com/";

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $URL);   
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_ENCODING, 'UTF-8');

    $content = curl_exec($ch);
    curl_close($ch); 
```

这几乎适用于每个网站，我获得了完整的 HTML 内容。

但是有1个网站，抓取结果是html代码到`</head>`，也就是结束`head`标签之后，curl没有得到html源。

当我通过浏览器看到这个网站的 html 源代码时`view source`，这里是整个 html（网站也很好）。

可能是什么原因，curl 没有得到整个 html 源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:37:03.120

也许这个网站会阻止其他人抓取他们的内容。我建议您`User-Agent`在请求标头中添加以模拟 Web 浏览器。

```
curl_setopt($ch,CURLOPT_HTTPHEADER,array('User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:29:10.970

可能该网站正在重定向您。添加此选项：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); 
```

这将使 curl 跟随重定向。

# php - 单击链接时将会话变量传递到新页面

> ID：15685757
> 
> 赞同：0
> 
> 时间：2013-03-28T15:24:38.430
> 
> 标签：php, mysqli

我对此有点麻烦。我有一个带有各种链接的书籍搜索结果页面，所有链接都链接到同一页面（book.php），我想设置一个会话变量以传递到新页面，该页面应显示有关特定结果链接的更多信息选择。I am trying to pass the variable $_SESSION['booktitle'] through to book.php when the link in the while loop is selected. 搜索结果页面的代码为：

```
<form id="rform" name="formsort" action=""  method="post">
<select name="sort" id="sort" onChange="document.forms['formsort'].submit()">
<option value="default">Sort Results</option>
<option value="lowhigh">Price: Low to High</option>
<option value="highlow">Price: High to Low</option>
<option value="az">Alphabetical Order: A-Z</option>
<option value="za">Alphabetical Order: Z-A</option>
</select>
<?php
if(isset($_POST['title']))
    {
        echo '<input type="hidden" name="title" value="'.$_POST['title'].'" />';
    }
if(isset($_POST['author']))
    {
        echo '<input type="hidden" name="author" value="'.$_POST['author'].'" />';
    }
if(isset($_POST['isbn']))
    {
        echo '<input type="hidden" name="isbn" value="'.$_POST['isbn'].'" />';
    }
if(isset($_POST['keyword']))
    {
        echo '<input type="hidden" name="keyword" value="'.$_POST['keyword'].'" />';
    }
?>
</form>
<?php
include "include.php";
session_start();
// Defining variables from home.php if set
$title = mysql_real_escape_string($_POST['title']);
$author = mysql_real_escape_string($_POST['author']);
$isbn = mysql_real_escape_string($_POST['isbn']);
$keyword = mysql_real_escape_string($_POST['keyword']);

if(isset($_POST['sort'])){
$sort=@$_POST['sort'];}
// Determine the WHEREs to use
$where = array();
if ( ! empty($title))
$where[] = "booktitle LIKE '%" . $title . "%'";
if ( ! empty($author))
$where[] = "author LIKE '%" . $author . "%'";
if ( ! empty($isbn))
$where[] = "isbn LIKE '%" . $isbn . "%'";
if ( ! empty($keyword))
$where[] = "description LIKE '%" . $keyword . "%'";

//Determine the ORDERs to use
$order = array();
if ((isset($sort)) && ($sort=='lowhigh'))
$order[] = "price ASC";
if ((isset($sort)) && ($sort=='highlow'))
$order[] = "price DESC";
if ((isset($sort)) && ($sort=='az'))
$order[] = "booktitle ASC";
if ((isset($sort)) && ($sort=='za'))
$order[] = "booktitle DESC";
// Build the query
$query = 'SELECT * FROM book';
if ( ! empty($where))
$query .= ' WHERE ' . implode(' AND ', $where);
if(! empty($sort))
$query .= ' ORDER BY ' . implode($order);
//Display results
$result = mysqli_query($con, $query) or die("Error in query $query: " . mysqli_error());
while ($row = mysqli_fetch_array($result)) {
  ?><a id="1" href="book.php" border="0"><img src="<?php echo $row[12]; ?>" width="112px" height="150px" /></a>
<a href="book.php?booktitle='<?php echo $_SESSION['booktitle']=$row[1];?>'"><b><?php echo  $row[1] . ", (" . $row[5] . ")";?></b></a><br><?php
echo $row[2];
echo "<br><div style='text-align:right'> <b>&pound;" . $row[9] . "</b></div>";
echo "<b>Book description:</b> " . substr($row[3],0,300) . "...<br /><hr>";
}
mysqli_close($con);             //closes the connection
?> 
```

我在 book.php 中使用：

```
<?php
include "include.php";
session_start();
$book=$_SESSION['booktitle'];

$query = "SELECT * FROM book WHERE booktitle='$book'";
$result = mysqli_query($con, $query) or die("Error in query $query: " . mysqli_error());
while ($row = mysqli_fetch_array($result)) {
echo $row[1];
} ?> 
```

但是无论我选择什么书链接，while循环中第一个搜索结果的书名都会被回显出来。知道为什么吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:21:25.753

我希望我能为您提供最大的帮助。

首先，如果第二个块是，我想了解第一个块所在的文件名是`book.php`什么？

然后我想建议您使用`session_start()`代码顶部的 消除任何“标题警告”。

然后我想从你那里向我解释为什么你把这个指令放在你的代码中

```
<?php echo $_SESSION['booktitle']=$row[1]?> 
```

为什么你不把它写成：

```
<?php
$_SESSION['booktitle'] = $row[1];
echo $_SESSION['booktitle'];
?> 
```

然后总是在回显一次`$_SESSION['variable']` **只需要一次**`unset()`之后，在直接回显它之后为它做一个在你的情况下看起来像这样`unset($_SESSION['booktitle']);`

我认为您的新书名搜索在上述代码期间未存储在新会话中，而旧搜索结果只是存储尝试应用这些修改并告诉我它是否已解决:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:28:08.363

**代替**

```
$book=$_SESSION['booktitle']; 
```

**和**

```
$book=$_GET['booktitle']; 
```

您可以使用方法`booktitle`从链接中获取。`GET`

而不是使用`$row[1]`替换它`$row['booktitle']`

# web-services - 为伪造的 Web 服务代理类设置伪造的存储库是个好主意吗？

> ID：15685759
> 
> 赞同：1
> 
> 时间：2013-03-28T15:24:44.757
> 
> 标签：web-services, unit-testing, proxy, repository

设置**Web 服务**时，我可以让它使用**存储库**类来获取数据以发送回客户端。如果我需要对服务执行的逻辑进行单元测试，我可以在其中注入对虚假存储库的引用，该存储库返回少量硬编码数据对象以避免调用数据库。

然而，在**客户端**，假设我有一个基于 MVC 的 Web 应用程序，它通过服务代理调用此 Web 服务。 **如果我想对 MVC 应用程序中的逻辑进行单元测试并为其提供代表服务返回内容的数据，我该如何伪造代理引用？** 因此，我的想法是，尽管我对此没有 100% 的信心，并且想知道我是否会错过一个更简单的解决方案：

我可以设置一个代理接口（我们称之为**IProxy**），然后设置它的两个具体实现（比如说，**Proxy**和**FakeProxy**）并注入一个适合正在执行的情况的一个（运行单元测试时的 FakeProxy 和 Proxy for实际生产应用）。为了在不进行实际服务调用的情况下为单元测试生成一些示例数据，**我是否应该在假代理中实现一个假存储库（可能与上述服务器场景中使用的相同）？** 我不确定如何最好地设置一个假代理类来帮助测试我的客户端代码。

**更新：**

我同意到目前为止发布的答案，但我已经考虑了他们的观点，所以让我提供一些示例 C# 代码来说明我为什么要问这个问题。如果我在代理设计中留下一个假存储库，我的**假代理**可能看起来像这个非常简单的人为示例：

```
public class FakeCustomerProxy : ICustomerProxy
{
    private List<Customer> Customers;

    public FakeProxy()
    {
        Customers = new List<Customer>();

        Customers.Add(new Customer { Id = 1, Name = "Smith, John" });
        Customers.Add(new Customer { Id = 2, Name = "Johnson, Al" });
        Customers.Add(new Customer { Id = 3, Name = "Thomas, William" });
    }

    public Customer GetById(int customerId)
    {
        return Customers.Where(c => c.Id == customerId).FirstOrDefault();
    }
} 
```

GetById **()**方法不是调用 Web 服务来获取所需的客户信息，而是简单地从嵌入在此类中的硬编码客户列表中返回它。这真的开始类似于我可能为假存储库设置的内容（我什至可能在服务器端设置了看起来非常相似的代码来帮助测试服务逻辑），所以我很好奇是否应该考虑放置这些硬编码的客户引用到一个专用的假存储库类以在多个地方使用。 **我可能在考虑这个 Fake Proxy 的设计完全错误吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:57:22.133

不，为虚假 Web 服务代理设置虚假存储库对于单元测试来说似乎不是一个好主意。

实际上，通常只需要一个假的（代理或存储库）就足够了。

我建议您查看模拟框架（例如[Moq](https://code.google.com/p/moq/)或[Rhino Mock](http://www.hibernatingrhinos.com/oss/rhino-mocks)）。
使用模拟，您甚至不需要`FakeProxy`实现。在每个测试中，您可以轻松设置单独的模拟实现，`IProxy`其将完全按照您的需要执行：返回预定义数据、引发异常、验证传递的参数等。

因此，您不需要实现 1 或 2 个假类进行测试。

**更新：**
所以，我在这里看到 2 个选项：

1.  拥有不可重复使用的简单测试数据，这些数据特定于每个特定的测试。您可能需要为每个测试或测试组设置类似迷你存储库（大约 1-3 个项目）之类的东西；

2.  拥有足够大的可重用虚假存储库，这对于服务器端和客户端代码都很常见。您很可能需要支持一些额外的工具来在客户端测试和服务器端测试中使用这个假存储库。例如，您需要`FakeProxy`额外测试客户端代码。

您应该考虑这些选项并选择更适合您的情况。

在我看来，选项 1 适用于单元测试，但选项 2 可能对集成测试有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:56:41.697

不，您不应该在测试中重复实施存储库代理连接。代理外观和存储库之间迟早会有一些业务逻辑，您将不得不实现它两次 - 在服务器端和客户端，在 FakeProxy 中。

因此，您的 FakeProxy 模拟实例应该只从调用中返回原始数据。

另一方面，您可以在客户端测试中导入真正的代理类，并模拟存储库进行测试，但这将是一个集成测试，而不是单元测试，并且会涉及在客户端测试中使用服务器端代码，这不是总是可能的。

# asp.net - ResolveUrl 相当于加载脚本，无需任何服务器技术

> ID：15685766
> 
> 赞同：0
> 
> 时间：2013-03-28T15:25:07.220
> 
> 标签：asp.net, html, javascript

我需要获取一个 ASP.NET 网页并将其转换为纯 HTML 网页。

我已经完成了大部分工作，除了一件事：当我设置对 javascript 文件的引用时，我找不到替换 ASP.NET Page.ResolveUrl 函数的方法：

```
<script src="<%= Page.ResolveUrl("~/Scripts/MyScript.js") %>" type="text/javascript"></script> 
```

我知道一些用户发布了有关 ResolveUrl 函数的 javascript 等效项的问题，但在我的情况下，您必须记住，必须使用该解决方案来加载 .js，因此对 .js 库的任何引用都可能导致鸡 -和鸡蛋问题。

**编辑**

我的网页和我的脚本包含在一个框架中。网页可以部署在子文件夹中，这是我使用 ResolveUrl 函数（而不是硬编码路径）的主要原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:01:58.623

为什么不根据您的页面所在的文件夹使用相对引用。它始终与页面相关，因此您的网站从哪里运行并不重要

在根目录中，您可以使用

```
<script src="Scripts/MyScript.js" type="text/javascript"></script> 
```

如果您的页面位于子文件夹中，请使用

```
<script src="../Scripts/MyScript.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:31:07.027

改变

```
<script src="<%= Page.ResolveUrl("~/Scripts/MyScript.js") %>" type="text/javascript"></script> 
```

到：

```
<script src="/Scripts/MyScript.js" type="text/javascript"></script> 
```

必须以**/**开头（根文件夹）

**更新**

尝试添加：`<base href="http://yoursite.com/mainfolder">` 到头部标签。

# networking - corba 是否允许客户端包含它自己的服务器存根

> ID：15685767
> 
> 赞同：0
> 
> 时间：2013-03-28T15:25:07.710
> 
> 标签：networking, client-server, rpc, distributed, corba

我正在开发一个应用程序，其中客户端将 RPC 发送到服务器，并且服务器也将从客户端请求服务。我的问题是服务器可以有多个客户端存根和一个服务器存根（充当客户端和服务器）吗？对于客户端，他们可以有一个服务器存根来接受来自服务器的 RPC 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:44:20.370

是的所有这些问题。您可以通过服务器中合适的数据结构处理“多个客户端存根”。

# node.js - 节点：/lib64/libc.so.6：未找到版本“GLIBC_2.9”（节点需要）

> ID：15685773
> 
> 赞同：2
> 
> 时间：2013-03-28T15:25:28.923
> 
> 标签：node.js, glibc

我正在尝试运行软件etherpad。当我运行 ./run.sh 时，它给了我错误

```
node: /lib64/libc.so.6: version `GLIBC_2.9' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.6' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.7' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.9' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.6' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.7' not found (required by node)
Ensure that all dependencies are up to date...  If this is the first time you have run Etherpad please be patient.
node: /lib64/libc.so.6: version `GLIBC_2.9' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.6' not found (required by node)
node: /lib64/libc.so.6: version `GLIBC_2.7' not found (required by node) 
```

我已经安装了 Python 2.7

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:49:32.190

> 我在这里想念什么。

您尝试运行的程序是在 GLIBC 2.9（或更高版本）的系统上构建的。

您正尝试在具有 GLIBC 2.5（或更早版本）的系统上运行该程序。那行不通：UNIX 系统支持向后兼容性（旧的可执行文件继续在新系统上运行），但反之则不行：构建在新系统上的二进制文件（通常）不会在旧系统上运行。

> 我已经安装了 Python 2.7

Python与您的问题*无关。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:43:32.917

尝试安装旧版本的 [node] 或自己编译。

您对 python27 的困惑是可以理解的，因为许多 ./configure 脚本都是 python。

# java - 方法之前程序终止的原因

> ID：15685788
> 
> 赞同：0
> 
> 时间：2013-03-28T15:25:57.133
> 
> 标签：java

试图了解为什么我的程序过早终止。运行加仑到升的转换方法可以，但停在那里。不运行“root”方法（其目的是计算数字 1 到 100 的平方根）。我相信这更多的是格式问题而不是语义问题。谢谢你的帮助。

```
package gallons.to.liters;  

public class converter {                    
public static void main(String args[]) {    
    double gallons;                          
    double liters;          

    gallons = 10;
    liters = gallons * 3.7854;

    System.out.println("The number of liters in " + gallons + " gallons is " + 
            liters);
    System.out.println();

}

public static void root(String args[]) {
    double counter;
    double square;

    square = 0;
    counter = 0;

    for(square = 0; square <= 100; square++); 
        square = Math.sqrt(square);
        counter++;
        System.out.println("The square root of " + counter + " is " +  
                    square);

}       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:27:34.777

您永远不会**调用**该`root`方法。将此添加到主要内容：

```
public static void main(String args[]) {    
    double gallons;                          
    double liters;          

    gallons = 10;
    liters = gallons * 3.7854;

    System.out.println("The number of liters in " + gallons + " gallons is " + 
            liters);
    System.out.println();

    root(args); // ADD to call the method.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:31:26.890

JVM 调用仅`public static void main(String args[])`作为 java 程序的入口点。

实际上，您永远不会`root`在方法内部调用`main`方法。调用该方法执行方法的语句`root`。

像这样打电话。

```
public static void main(String args[])
{
   ........
   root();
} 
```

`root`我发现您在方法中传递的参数没有使用。所以删除它。

```
for(square = 0; square <= 100; square++); 
```

**删除 for 循环末尾的分号。**

```
public static void root() {
    double counter = 0;
    for(counter= 0; counter <= 100; counter++) {
        System.out.println("The square root of " + counter + " is " +  Math.sqrt(counter));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:33:00.323

您必须将呼叫添加到

```
root(args) 
```

你的方法有一些问题我已经解决了请在下面找到修改后的版本

```
 public static void root( String args[] )
    {
        double counter;
        double square;

        square = 0;
        counter = 0;

        for ( counter = 0; counter <= 100; counter++ )
        {
            square = Math.sqrt( counter );
            System.out.println( "The square root of " + counter + " is " + square );
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:33:11.137

添加`root(args);`将调用您的方法的行。

无论有什么 main 方法，都会调用到 main 方法结束。Java 不像人类从头到尾读取那样运行 .java 文件。它仅调用 main 方法中存在的那些行。包含行的主方法可以根据编程规则调用静态或非静态的其他方法。理解所有这些概念的最好方法是学习 OOP。购买两本《**Head First core java**》一书，一本给你，一本给你的朋友，一起讨论。

```
public static void main(String args[]) {
        double gallons;
        double liters;

        gallons = 10;
        liters = gallons * 3.7854;

        System.out.println("The number of liters in " + gallons + " gallons is " + liters);
        System.out.println();
        root(args);  //call this method here as per your expection of the output

    } 
```

# linux - 如何查找所有没有相同名称但扩展名不同的匹配文件的文件

> ID：15685790
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:02.010
> 
> 标签：linux, system-calls

我有一个包含超过 100 万个文件的文件夹。这些文件成对出现，仅在扩展名上有所不同（例如 a1.ext1 a1.ext2, a2.ext1, a2.ext2 ...）

我需要扫描这个文件夹并确保它满足这个要求（文件耦合），如果我找到一个不匹配的文件，我应该删除它。

我已经在 python 中完成了它，但是在处理 7 位数的文件时它非常慢..

有没有办法使用 shell 命令/脚本来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:33:32.887

在另一个答案的基础上，您可以使用这样的脚本（它应该位于文件所在的同一目录中，并且应该在那里执行）：

```
#!/usr/bin/env bash 
THRASH=../THRASH
mkdir "$THRASH" 2> /dev/null

for name in $(ls *.{ext1,ext2} | cut -d. -f1 | sort -u); do
    if [ $(ls "$name".{ext1,ext2} 2> /dev/null | wc -w) -lt 2 ]; then
        mv "$name".{ext1,ext2} "$THRASH" 2> /dev/null
    fi;
done 
```

`THRASH`您可以通过修改变量来配置将没有配对的文件移动到何处。

在具有 3.0 GHz 和 2 GB RAM 的双核*Pentium*上，一次运行需要 63.7 秒（10000 对，文件夹中缺少该对的每个成员中的大约 1500 个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:37:46.440

Python should be faster; however if you want to try in bash:

```
for file in $(ls | cut -d. -f1 | sort -u); do
    if [ $(ls $file.* | wc -l) -ne 2 ]; then
        echo "too much extension for $file"
    fi
done 
```

This should display filenames with more or less than two extensions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:42:53.407

试试这个：

```
#!/bin/bash

for file in *.ext1 *.ext2
do
  #name is the substring before the '.'
  name=${file%.*}
  #ext is the substring after the '.'
  ext=${file#*.}
  case $ext in
    "ext1")
      sibling="$name.ext2";
      #does it haves a sibling?
      #if it does not,remove the file
      ls | grep $sibling >/dev/null;
      if [ $? -ne 0 ]
      then
        rm $file
      fi;;
    "ext2")
      sibling="$name.ext1";
      #does it haves a sibling?
      #if it does not,remove the file
      ls | grep $sibling >/dev/null;
      if [ $? -ne 0 ]
      then
        rm $file
      fi;;
  esac      
done 
```

# java - 当组合需要访问封闭类时建模？

> ID：15685791
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:01.987
> 
> 标签：java, oop, design-patterns

我对 a 的以下设计有疑问`Canvas`，其中某些`domain`对象应该由不同的表示`figures`：

我需要一个充当域对象的“封闭”类。它保存应该呈现给用户的数据，例如`State`. 这个状态有一个名字，当然还有一个状态等作为变量。

这个状态应该用一个 直观地表示`Rectangle`。因此我认为使用`Composition Pattern`：

```
interface Drawable {
 void draw();
}

class Rectangle implements Drawable {
    @Override
    void draw() {
        //draw the state as a rectangle depending on the state variables, draw the name etc.
    }
}

interface Figure {
    Drawable getDrawable();
}

class State implements Figure {
    boolean state;
    Rectangle rectangle;
    public Drawable getDrawable() { return rectangle; }
} 
```

现在我可能还有其他对象，它们也实现`Figure`并因此提供了`Drawable`用于绘制它们的特定对象。

我的问题是：以下将为`draw()`每个对象执行正确的方法，但是 draw 方法需要它的封闭类的所有信息。

```
List<Figure> list;
for (Figure obj : list) {
    obj.getDrawable().draw();
} 
```

该方法如何`draw()`知道`State`它的封闭对象的例如和名称变量`State`，因为它应该基于它绘制它？

我唯一想到的是：

```
interface Drawable {
 void draw(Figure figure);
}

for (Drawable obj : list) {
    obj.getDrawable().draw(obj);
} 
```

但是调用一个对象感觉不对，并且在同一个语句中提供这个对象作为参数！

怎样才能做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:52:58.240

当域对象选择用于表示它的 Drawable 实现时，您已经有了一个逻辑位置，您可以在其中提供对 Drawable 的引用：

```
 public class AStateObject {

      public Drawable getDrawable() {
           return new Rectangle(this);
      }

 } 
```

所以每个drawable都知道它应该绘制的状态对象。这不包括每个 Drawable 子类使用单个实例，但在这种情况下创建 Drawable 应该很便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:49:12.787

您可以在实例化可绘制对象时传递需要绘制的属性。例如，使用抽象类而不是接口：

```
public abstract class Drawable {

    private final Map<String, Object> attributes;

    public Drawable(final Map<String, Object> attributes) {
        this.attributes = attributes;
    }

    @SuppressWarnings("unchecked")
    public <T> T getAttribute(final String key) {
        return (T) attributes.get(key);
    }

    public abstract void draw();

}

public class Rectangle extends Drawable {

    public Rectangle(final Map<String, Object> attributes) {
        super(attributes);
    }

    @Override
    public void draw() {
        final String name = getAttribute("name");
        System.out.println(name);
    }

}

public interface Figure {

    public Drawable getDrawable();

}

public class State implements Figure {

    private final Rectangle rectangle;

    public State() {
        final Map<String, Object> attributes = new HashMap<String, Object>();
        attributes.put("name", "the rectangle");
        rectangle = new Rectangle(attributes);
    }

    @Override
    public Drawable getDrawable() {
        return rectangle;
    }

} 
```

然后，在调用时：

```
final List<Figure> figures = new ArrayList<Figure>();
figures.add(new State());
for (final Figure figure : figures) {
    figure.getDrawable().draw(); // prints "the rectangle"
} 
```

# android - 启动画面布局没有任何效果

> ID：15685792
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:02.527
> 
> 标签：android, layout, splash-screen

我的 splashScreen 有问题，这是启动活动，一切正常，但未设置布局...

如果有人知道为什么？

```
Splashscreen.java

    import org.w3c.dom.Document;
    import org.w3c.dom.Element;
    import org.w3c.dom.NodeList;

    import android.app.Activity;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.StrictMode;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;

    public class SplashScreen extends Activity {

        // ===========================================================

        // Fields

        // ===========================================================

        public final static String PREFS_NAME = "Contest";
        public final static String PREFS_NAME_IMAGE = "Image";
        private final int SPLASH_DISPLAY_LENGHT = 10000;
        public String[][] imageID = null;

        @Override
        public void onCreate(Bundle icicle) {
                super.onCreate(icicle);
                setContentView(R.layout.splashscreen);
                getActionBar().hide();
                //Only for safe mode 
                StrictMode.ThreadPolicy policy = new StrictMode.
                ThreadPolicy.Builder().permitAll().build();
                StrictMode.setThreadPolicy(policy);

                /**********Fetch user info (if exist)************/
                String id = User.getUserId(getApplicationContext());
                        /*****Else create New User********/
                if (id == "")
                {
                    System.out.println("Create New User...");
                    UserRegistration.CreateUser(getApplicationContext());
                }
                /***************** USER END ************************/

                /* New Handler to start the Menu-Activity

                 * and close this Splash-Screen after some seconds.*/

                new Handler().post(new Runnable(){

                        @Override

                        public void run() {
                            setContentView(R.layout.splashscreen);
                            String id = User.getUserId(getApplicationContext());
                            String pass = User.getUserPass(getApplicationContext());
                            String URL = "URL;
                            System.out.println(URL);
                            String xmlBoutique = new XMLfunctionsBack().doInBackground("URL;
                            String xmlRestaurant = new XMLfunctionsBack().doInBackground("URL);
                            String xmlNightlife = new XMLfunctionsBack().doInBackground("URL);
                            String xmlLoisir = new XMLfunctionsBack().doInBackground("URL);
                            String xmlEvenement = new XMLfunctionsBack().doInBackground("URL);

                            //Clean previous Data//
                            SharedPreferences sharedPrefClean= getSharedPreferences(PREFS_NAME, 0);
                            SharedPreferences.Editor editorClean= sharedPrefClean.edit();
                            editorClean.putString("xmlBoutique", "");
                            editorClean.putString("xmlRestaurant", "");
                            editorClean.putString("xmlNightlife", "");
                            editorClean.putString("xmlLoisir", "");
                            editorClean.putString("xmlEvenement", "");
                            editorClean.commit();

                            /****************Fetch Image ID for future Background Loading *****************/
                            SharedPreferences sharedPrefImage= getSharedPreferences(PREFS_NAME_IMAGE, 0);
                            SharedPreferences.Editor editorImage= sharedPrefImage.edit();
                            for (int x = 0; x <= 5; x++) {    
                                Document doc = XMLfunctions.XMLfromString(xmlBoutique);
                                NodeList nodes = doc.getElementsByTagName("contest");
                                for (int i = 0; i < nodes.getLength(); i++) {                           
                                    Element e = (Element)nodes.item(i);
                                    String sX = String.valueOf(x) ;
                                    String sI = String.valueOf(i) ;
                                    String entry = sX+=sI;
                                    editorImage.putString(entry, XMLfunctions.getValue(e, "image"));
                                    editorImage.commit();
                                }
                            }

                            SharedPreferences sharedPref= getSharedPreferences(PREFS_NAME, 0);
                            SharedPreferences.Editor editor= sharedPref.edit();
                            editor.putString("xmlBoutique", xmlBoutique);
                            editor.putString("xmlRestaurant", xmlRestaurant);
                            editor.putString("xmlNightlife", xmlNightlife);
                            editor.putString("xmlLoisir", xmlLoisir);
                            editor.putString("xmlEvenement", xmlEvenement);
                            editor.commit();
                                /* Create an Intent that will start the Menu-Activity.*/

                                Intent intent = new Intent(getBaseContext() ,MainActivity.class);
                                intent.putExtra("loadingFinish", "SUCCESS");
                                startActivity(intent);
                                //AsyncTask<Void, Void, Void> background = new BackgroundTask().execute();
                                SplashScreen.this.finish();
                        }

                });

        }

      } 
```

闪屏.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/splash_screen"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="bottom"
        android:paddingBottom="@dimen/cinquantedp" >

        <ProgressBar
            android:id="@+id/progressBar1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="bottom"
            android:paddingLeft="@dimen/padding_large" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Chargement des concours"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

显现

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="xxx.android"
    android:versionCode="1"
    android:versionName="1.0" >
   <uses-permission android:name="android.permission.INTERNET"/>
   <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="xxx.android.MainActivity"
            android:label="@string/title_activity_main" >
        </activity>
        <activity
            android:name="xxx.android.Participate"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="xxx.android.SplashScreen"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="xxx.android.ShowContest"
            android:label="@string/app_name" >
        </activity>
    </application>

</manifest> 
```

我的启动画面必须只显示一个图像和一个进度条......所有数据都成功加载，但没有布局，只有带有 actionBar 的白屏 :(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:34:03.150

方法中的代码`run`几乎立即执行，这就是为什么您看不到`SplashScreen`. 你应该使用：

```
mHandler.postDelayed( new Runnable(){...}, SPLASH_DISPLAY_LENGHT); 
```

# multithreading - 来自 NodeJS Native 扩展中不同线程的回调

> ID：15685793
> 
> 赞同：6
> 
> 时间：2013-03-28T15:26:05.267
> 
> 标签：multithreading, node.js, callback

我是 nodeJS 和节点扩展的新手。我正在为节点 js 编写本机扩展，它将接收虚拟函数 OnEvent（param1，param2，param3）的回调。代码如下：

```
bool MyExt::OnEvent(int eventType, string param1, string param2)
{
    printf("MyExt:: onevent___ \n");
    {
        //// Crashes here, but if I use Locker, it get stuck!!!!!!
        //Locker l;
        Local<Value> argv[3] = {
            Local<Value>::New(Integer::New(1)),
            Local<Value>::New(String::New("parameter 1")),
            Local<String>::New(String::New("parameter 2"))
        };

        TryCatch try_catch;
        //// I need to call this
        m_EventCallback->Call(Context::GetCurrent()->Global(), 3, argv);
        if (try_catch.HasCaught()){
                printf("Callback is Exception()  \n");
        }
        printf("Callback is IsCallable() \n");
    }
    return true;
} 
```

我需要使用 m_EventCallback 将此回调参数转发到服务器脚本。函数 bool OnEvent 是从不同的线程调用的。

我尝试使用 uv_async_send 但未能成功。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:07:38.870

使用 uv_async_send 是正确的方法：

*   在“主”线程上调用 uv_async_init。
*   然后从您的工作人员那里调用 uv_async_send。
*   不要忘记 uv_close 回到 main 上。

[http://nikhilm.github.com/uvbook/threads.html](http://nikhilm.github.com/uvbook/threads.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T00:23:11.650

也许[uv_callback](https://github.com/litesync/uv_callback)是一种选择。

有了它，我们可以调用其他线程上的函数。

它可以处理非合并调用。

我们甚至可以在另一个函数的调用者线程中异步获取结果。例如：

在被调用线程中：

```
uv_callback_t send_data;

void * on_data(uv_callback_t *handle, void *data) {
  int result = do_something(data);
  free(data);
  return (void*)result;
}

uv_callback_init(loop, &send_data, on_data, UV_DEFAULT); 
```

在调用线程中：

```
uv_callback_t result_cb;

void * on_result(uv_callback_t *handle, void *result) {
  printf("The result is %d\n", (int)result);
}

uv_callback_init(loop, &result_cb, on_result, UV_DEFAULT);

uv_callback_fire(&send_data, data, &result_cb); 
```

# google-drive-api - Google Drive Realtime 和 Angular 魔法

> ID：15685794
> 
> 赞同：4
> 
> 时间：2013-03-28T15:26:06.370
> 
> 标签：google-drive-api

我正在观看Steve Bazyl在[http://www.youtube.com/watch?v=HCyrywLtWIs&feature=g-user-u上关于驱动器实时 api 的介绍的 youtube 视频。](http://www.youtube.com/watch?v=HCyrywLtWIs&feature=g-user-u)他提到使用实时和角度框架就像魔术一样。我已经开始研究它会是什么样子，但没有看到魔法。我很清楚，这可能是我不是这两个方面的专家，我错过了一些小部分。

有人愿意开导我吗？我猜有一种很好的方法可以让内存中的数据模型自动神奇地连接到 ui 并与其他编辑和实际驱动器文件同步。我接近了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T00:01:36.470

Magical 可能言过其实，但我认为它们可以很好地协同工作的原因有几个。

*   如果你花时间为你的模型声明类型，它们可以很好地与 angular 的数据绑定一起使用，并且属性可以与 ng-model 一起使用。

*   更重要的是，由于 Angular 的工作方式，处理远程事件变得轻而易举。你真正需要的只是一个事件监听器：

    ```
    doc.getModel().getRoot().addEventListener(
      gapi.drive.realtime.EventType.OBJECT_CHANGED, 
      function(event) {
        if (!event.isLocal) {
          $rootScope.$digest();
        }
      }); 
    ```

    这就是您需要做的所有事情，以确保您的 UI 适当地更新以响应远程事件 :)

几个例外：

*   协作字符串是特殊的。如果您不关心光标位置，您可以做一个简单的猴子补丁来将文本公开为适用于 ng-model 的标准属性。

    ```
    Object.defineProperty(gapi.drive.realtime.CollaborativeString.prototype, 'text', {
      set:function (value) {
        return this.setText(value);
      },
      get:function () {
        return this.getText();
      }
    }); 
    ```

然后，您可以绑定到协作字符串，例如：

```
 <input type="text" data-ng-model="myCollaborativeString.text"/> 
```

对于正确的光标定位，编写一个可重用的指令来做到这一点并不难。我将在接下来的几周内在 github 上开始收集有用的指令等，因此创建一个完全协作的文本字段就像添加一个属性一样简单：

```
 <textarea data-rt-collaborative data-ng-model="myCollaborativeString"/> 
```

# nservicebus - NServiceBus - 服务器向控制台抛出空消息警告

> ID：15685797
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:22.037
> 
> 标签：nservicebus, nservicebus3

```
2013-03-28 10:18:32,374 [Worker.5] 
WARN  NServiceBus.Unicast.UnicastBus [(null)] <(null)> - 
Received an empty message - ignoring. 
```

我有一个从 mvc4 网站到消息处理器的 bus.send("server", command) 客户端。消息处理器被设置为默认值，没有任何自定义初始化。

这是我在 global.asax 中网站端的配置

```
 Configure.With()
            .StructureMapBuilder(container)
            .JsonSerializer()
            .Log4Net()
            .MsmqTransport()
                .IsTransactional(false)
                .PurgeOnStartup(true)
            .UnicastBus()
                .ImpersonateSender(false)
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
```

我查看了[NServicebus 发布事件 - 收到空消息](https://stackoverflow.com/questions/6790712/nservicebus-publishing-event-recieves-empty-message)，但这没有帮助，我没有只读属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:02:36.083

该问题类似于 OP 中的链接问题。我发现序列化方法需要在发送方和服务器之间匹配。我必须在服务器端添加自定义初始化并添加 defaultbuilder 以及 json 序列化程序以匹配 Web 端，以便消息正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T22:05:55.823

我发现的另一件事是，我正在使用`IWantCustomInitialization`以下配置：

```
Configure.With(typeof(TransactionDetailsHandler).Assembly) // this is problematic one
                .CastleWindsorBuilder(container)
                .DefaultBuilder(); 
```

我没有在配置中指定我的消息的程序集类型。添加解决了问题。

# javascript -

> ID：15685798
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:31.840
> 
> 标签：javascript, css

你好我有这个html如下，如何在javascript函数myFunction中继承h1样式css。单击后，它会选择默认的 h1 样式。谢谢。

```
<html>

<style type="text/css">

 body {
    color: purple;
    font: normal 18px Verdana, Arial, sans-serif;
    background-color: white }

 h1 {
    color: Red;
    font: normal 20px Verdana, Arial, sans-serif;
    background-color: white }

</style>

<body>

<p id="demo"><h1>Click here.</h1></p>

<button onclick="myFunction()">Check it</button>

<script type="text/javascript">

function myFunction()
{
    document.writeln("<h1>", "Hello there", "</h1>");
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:28:30.700

`document.write`(and `writeln`) 如果在文档处于*关闭*状态时调用（在 DOM 准备好之后）将首先调用`document.open`然后*覆盖*文档。

由于文档被覆盖，样式表被破坏。

所以解决方案是**不要使用`document.writeln`**. 请改用标准 DOM 方法。如果您需要介绍如何做到这一点，那么 W3C 提供了一个[Web 标准课程](http://www.w3.org/wiki/Web_Standards_Curriculum#JavaScript_core_skills)，其中包括关于遍历 DOM 和创建和修改 HTML 的章节。

# wordpress - WordPRess - 让我的博客出现在多个位置

> ID：15685803
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:49.087
> 
> 标签：wordpress

我很难让我的博客出现在多个位置。本质上，我希望博客中的内容显示在博客页面上，而且还希望将博客的摘录显示在我的前端静态页面上。通常我会使用 get_page_by_title 从页面中获取内容，当我想从两个不同的位置获取内容并将其放在一个页面上时......但我无法理解如何使用索引页面来做到这一点......或者我如何让博客出现在多个位置...

我希望我能正确解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:47:50.613

鉴于我的评论有所帮助，并且问题保持开放，我将其正式化为答案。

我这样做的方式是：

*   为您的静态首页创建自定义页面模板。
*   确保您选择的首页设置为使用此自定义页面模板。
*   将您想要的任何循环放入自定义模板中。一般来说，我做的是：
*   *   使用普通页面循环抓取静态首页的内容并输出，这样就可以正常编辑页面内容了。我通常只是从现有模板中窃取代码`page.php`作为基础。
*   *   添加第二个循环以遍历您想要的任何内容，例如`query_posts`，用于重置循环并抓取最新的五篇博客文章并将它们作为带有特色图像的摘录输出。[多个循环](http://codex.wordpress.org/The_Loop#Multiple_Loops)的 Codex 部分详细介绍了如何向页面添加第二个循环。

# c# - 获取空错误 LINQ；然后不能使用？

> ID：15685806
> 
> 赞同：5
> 
> 时间：2013-03-28T15:26:54.013
> 
> 标签：c#, asp.net-mvc-3, linq

我正在尝试在 LINQ 中运行以下内容

```
double totalDistance = (from g in db.Logs join 
    h in db.Races on g.raceId equals h.RaceId 
    where g.userId == id select h.distance).Sum(); 
```

然而得到一个错误：

> 转换为值类型“Double”失败，因为具体化值为 null。结果类型的泛型参数或查询必须使用可为空的类型。

我试图添加`?? 0`；这样：

```
double totalDistance = (from g in db.Logs join 
    h in db.Races on g.raceId equals h.RaceId 
    where g.userId == id select h.distance).Sum() ?? 0; 
```

正如其他帖子中所建议的那样，这会产生错误：

> 操作员 '？？' 不能应用于操作数 double 或 int

有什么建议么？

编辑：我的模型

```
namespace RacePace.Models
{
public class Race
{
    public int RaceId { get; set; }

    [DisplayName("Race Setting")]
    public string place { get; set; }
    [DisplayName("Distance (km)")]
    public double distance { get; set; }
    [DisplayName("Date")]
    public DateTime date { get; set; }
    [DisplayName("Commencement Time")]
    public DateTime timeStarted { get; set; }
    [DisplayName("Active")]
    public Boolean active { get; set; }
    [DisplayName("Description")]
    public string description { get; set; }
    [DisplayName("Creator")]
    public int UserId { get; set; }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:54:59.970

你应该在你的模型中让你的距离可以为空 double 吗？工作。来自[http://msdn.microsoft.com/en-us/library/ms173224.aspx](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：

*这 ？？运算符称为 null-coalescing 运算符，用于为**可空值类型**或引用类型定义默认值*

因此，将您的模型更改为

```
public double? distance { get; set; } 
```

应该做？？工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:30:37.553

将它们全部加倍。

```
double totalDistance = (double)((from g in db.Logs join h in db.Races on g.raceId equals h.RaceId where g.userId == id select h.distance).Sum() ?? 0); 
```

编辑：尝试使用 double.Parse

```
var someObject = (from g in db.Logs join h in db.Races on g.raceId equals h.RaceId where g.userId == id select h.distance);
double totalDistance = (someObject !=null)? someObject.Sum() : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:20:41.457

顺便说一句，如果其中任何一个不是正确答案，请告诉我，*我会删除它*。无需让 -1 变得疯狂。

使用可以为空的总和进行[Linq 查询](https://stackoverflow.com/questions/696431/linq-query-with-nullable-sum-problem)

你可以试试

 ~~~~```
double totalDistance = 
   (from g in db.Logs join h in db.Races 
    on g.raceId equals h.RaceId where g.userId == id 
    select h).Sum(x => x.distance) ?? 0; 
```~~  ~~未来更好的方法可能是使用可空值，直到你知道发生了什么，以防有一些奇怪的隐式转换影响它的编译方式。**编辑：确实**

```
double? totalDistanceTemp = 
       (from g in db.Logs join h in db.Races 
        on g.raceId equals h.RaceId where g.userId == id 
        select h).Sum(x => x.distance);
double totalDistance = totalDistanceTemp ?? 0; 
```

如果这不起作用，您可以尝试转换为可空值。请注意，这不是文字转换，而是一段代码构建涉及转换表达式的 LINQ 表达式/可查询对象，并且该转换表达式*应该*在您的后端转换为某些内容。但是，我不确定*一定*要翻译。

```
double? totalDistanceTemp = 
       (from g in db.Logs join h in db.Races 
        on g.raceId equals h.RaceId where g.userId == id 
        select h).Sum(x => (Double?) x.distance);
double totalDistance = totalDistanceTemp ?? 0; 
```

或者

```
double? totalDistanceTemp = 
       (from g in db.Logs join h in db.Races 
        on g.raceId equals h.RaceId where g.userId == id 
        select ((Double?)h.distance )).Sum();
double totalDistance = totalDistanceTemp ?? 0; 
```

最后，如果这不起作用：搞砸。从数据库中获取列表，将其与 LINQ to Objects 相加（不需要为空）。仅用作最后的努力。你不应该/不应该这样做，但也许你的项目 LINQ 到任何供应商只是真的粗制滥造或陈旧。

```
double totalDistance = 
       (from g in db.Logs join h in db.Races 
        on g.raceId equals h.RaceId where g.userId == id 
        select h.distance).AsEnumerable().Sum(); 
```

如果这些都不起作用，那么该连接的翻译方式肯定有一些有趣的地方，要么我错过了，要么提供者正在做一些古怪的事情（当然，或者以上都没有）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T15:39:06.830

如果无法访问您的其余逻辑，这有点难以确定，但我会试一试。虽然我个人更担心为什么它首先出现 null，但如果 null 是预期结果，那么您可能可以使用可为 null 的类型。[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/vstudio/1t3y8s4s.aspx)找到有关它们的更多信息。如果您确实使用可空类型，您还需要检查值，然后再继续通过该双总距离线。这在 MSDN 链接中进行了解释。~~~~

# drupal - 从ip地址访问网站

> ID：15685807
> 
> 赞同：0
> 
> 时间：2013-03-28T15:26:54.420
> 
> 标签：drupal, redirect

我在专用服务器上有一个 drupal 站点，人们可以从 IP 地址访问我的站点。谷歌机器人也已经索引了一些页面。

我想从 .htacces 文件做 301 重定向。这是一种有效的方法吗？

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:41:29.540

在我看来，您应该使用 mod_rewrite（如果您的网络服务器是 Apache）而不是重定向。通过添加 .htaccess 之类的东西

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{HTTP_HOST} !^www.mydomain.com$ [NC]
  RewriteRule ^(.*)$ http://www.mydomain.com/$1 [L,R=301]
</IfModule> 
```

您会告诉 Apache 以 www.mydomain.com/ 的形式重写任何找到您站点文件夹的方式的 http 请求，并发送 301 标头以通知机器人这是它应该使用的正确 URL。

要完成这项工作，您需要确保在您的 Apache 配置中启用了 mod_rewrite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:31:07.353

检查客户端是否发送了适当的 HTTP 主机头字段。如果没有，请重定向。如果客户端拒绝遵守 RFC 2616，这当然会导致问题。

另一种选择是在 Apache 中设置一个默认虚拟主机，它可以回答不包含有效 HTTP Host 标头字段的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:35:43.670

一种方法是要求他们更改他们的“主机”文件，如果他们有 Windows。C:\Windows\System32\drivers\etc 在记事本中拖放“hosts”文件。在文件末尾添加这样的一行：127.0.0.1 mydedicatedsite.com 其中数字是您的 IP 地址。保存存档。

有时该文件需要额外的权限才能让您保存，因此只需向当前用户或“每个人”Windows 用户授予临时权限。

您还可以创建一个他们可以执行的批处理文件，让他们更轻松。

最后，即使该域不存在，它们也会被重定向到您指定 IP 的站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:28:07.680

好的，所以如果您不能告诉他们“停止访问我的 IP 地址，改用域”，那么我会创建一个虚拟主机来接收所有传入您网站的流量，并使用 .htaccess 甚至是简单的 Javascript 进行重定向重定向，也可以使用第二个选项添加自定义消息，例如“站点已移动，重定向到 domain.com...”

```
<script language="javascript">alert("Site has moved, redirecting to domain.com ..."); self.location=”domain.com”;</script> 
```

这仅适用于用户流量。

# css - 如何使相对定位的div的跨度重叠边框的边框？

> ID：15685811
> 
> 赞同：0
> 
> 时间：2013-03-28T15:27:02.007
> 
> 标签：css

我想使用 nav 元素中的 span 元素创建一个导航选项卡，如下所示：

```
<nav><span>span</span></nav>
<div id=relative>div</div> 
```

此导航选项卡直接放置在包含主要内容的 div 上方。div 被赋予一个相对位置，以便其中的元素（未显示）可以相对于它进行绝对定位。为简单起见，下面显示了相关的 css：

```
span {
    border: black solid 10px;
}
div {
    border: orange solid 10px;
}
#relative {
    position: relative;
} 
```

[jsFiddle](http://jsfiddle.net/3aexj/)中的一个演示展示了当前者从静态位置变为相对位置时，div的边框重叠在span的边框之上。我试图通过给定高 z-index 来扭转它，但无济于事。谁能告诉我一个不涉及引入新元素或更改当前元素的显示属性的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:38:47.177

这是你要找的吗？

```
span {
    border: black solid 10px;
    z-index: 5;
    position: relative;
} 
```

[http://jsfiddle.net/3aexj/3/](http://jsfiddle.net/3aexj/3/)

既然它被选为答案，我想我会再补充一点：

如果您不更改元素的 z-index，它将基于页面中元素的顺序。

负边距仍会将元素保持在后面的元素*之下*。

“好吧。让我们给跨度一个 z-index，然后。
- 去吧！
- 它不工作！”。

没有！
为了能够更改元素的 z-index，它需要具有“静态”以外的位置值。

# .net - 如何使依赖属性更改的视觉无效？

> ID：15685813
> 
> 赞同：3
> 
> 时间：2013-03-28T15:27:07.500
> 
> 标签：.net, wpf, controls, dependency-properties

*我有重写OnRender*方法的自定义控件。我想使对任何依赖属性更改事件的控制无效。当父类型的属性发生变化时更新也很好。有什么方法可以使用内置功能做到这一点？

**编辑：**

我发现我可以将“影响渲染”用于依赖属性，并在 OnLayoutUpdated 上检查附加信息或私有属性（如果有）。

```
FrameworkPropertyMetadata.AffectsRender 
```

和：

```
private void OnLayoutUpdated(object sender, EventArgs e)
    {
        int result = (CornerRadius != null ? CornerRadius.GetHashCode() : 0);
        result = (result * PrimeHashNumber) ^ (IsSelected.GetHashCode());
        result = (result * PrimeHashNumber) ^ (IsReadCornerRadiusFromConfig.GetHashCode());
        result = (result * PrimeHashNumber) ^ (IsReadBorderThicknessFromConfig.GetHashCode());
        result = (result * PrimeHashNumber) ^ (SelectedColor!=null?SelectedColor.GetHashCode():0);
        result = (result * PrimeHashNumber) ^ (Background != null ? Background.GetHashCode() : 0);
        result = (result * PrimeHashNumber) ^ (BorderBrush != null ? BorderBrush.GetHashCode() : 0);

        if (lastHash != result)
        {
            this.InvalidateVisual();
            lastHash = result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:47:07.670

恕我直言，最好的方法是在您使用的 DependencyProperties 上指定它们会影响渲染。

请参阅 FrameworkPropertyMetadata.AffectsRender：http: [//msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadata.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:47:00.510

最快的当然是走肮脏的方式并做到这一点

```
(DataContext as INotifyPropertyChanged).PropertyChanged += OnPropertiesChanged

private void OnPropertiesChanged(sender, args)
{
    InvalidateVisual();
} 
```

但我强烈建议你不要这样做。另一方面，恕我直言更好的解决方案有点受限。尝试更改您的自定义依赖项属性，使其与渲染相关，因为您可以在创建依赖项属性时提供标志[AffectsRender 。](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadataoptions.aspx)现在你说“来自父类型的属性”我没有得到那个部分，但我想你的意思是一个带有子视图模型的父视图模型。如果您相应地设计属性，这无关紧要。如果由于某种原因该解决方案不起作用，您可以在视图模型上仅使用一个属性，绑定到视图中具有 AffectsRender 标志的依赖项属性，并在视图应该重绘时将其设置在您的视图模型逻辑中，但是这又是一种肮脏的方式。

也不要太想使用 OnRender 方法进行大量绘图，我们在大型应用程序中使用 WPF，我们可能有一两个地方使用 OnRender，其他一切都是通过样式和模板完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-11T02:28:41.507

如果您的控件的大小没有改变，`InvalidateVisual()`则非常昂贵，因为它会导致控件树的完全重新布局。

如果大小保持不变，使用某些保留模式绘图对象可以*在*`OnRender()`. 例如，`DrawingGroup`，`WriteableBitmap`， 和`RenderTargetBitmap`都可以在输出*后*`OnRender()`更新。

在大多数情况下，您将创建一个`DrawingGroup`“backingStore”，在此期间将其输出`OnRender()`，然后您可以随时通过执行`backingStore.Open()`并将新的绘图命令放入`DrawingGroup`.

# windows - 如何从 wmic 输出中删除空行？

> ID：15685816
> 
> 赞同：8
> 
> 时间：2013-03-28T15:27:14.947
> 
> 标签：windows, path, cmd, wmic

这是我获取 TeamViewer（任何版本）服务可执行文件位置的字符串：

```
for /f "skip=1 delims=" %A in ('wmic path win32_service where "name like 'TeamViewer%'" get pathname') do set POSITION=%A 
```

问题是`wmic`因为它在结果末尾包含一个空行（在 Windows 7 命令上），这是输出：

```
C:\Users\giovanni>for /f "skip=1 delims=" %A in ('wmic path win32_service where "name like 'TeamViewer%
'" get pathname') do set POSITION=%A

 :\Users\giovanni>set POSITION="C:\Program Files\TeamViewer\Version8\TeamViewer_Service.exe"

 :\Users\giovanni>set POSITION=

C:\Users\giovanni>echo %position%
ECHO enabled. 
```

我如何才能获得具有可执行文件正确位置的输出的第二行？（当然，或者跳过最新的一行）。

提前感谢大家，祝你有美好的一天。乔瓦尼。

这是 checktv.bat：

```
for /f "skip=1 delims=" %%A in ('wmic path win32_service where "name like 'TeamViewer%'" get pathname ^| findstr /r /v "^$"') do set POSITION=%%A
echo %POSITION% 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T15:46:11.800

像这样：

```
for /f "skip=1 delims=" %A in (
  'wmic path win32_service where "name like 'TeamViewer%'" get pathname ^| findstr /r /v "^$"'
) do set POSITION=%A 
```

从输出中`findstr /r /v "^$"`删除空行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-12T14:59:33.590

wmic 等等/值 | 在任何地方找到“=”>>

输出将是

字段=值

没有多余的行

从那里标记化，delim =

# ruby - DataMapper 没有看到分配有 @ 的属性

> ID：15685817
> 
> 赞同：1
> 
> 时间：2013-03-28T15:27:19.907
> 
> 标签：ruby, datamapper, ruby-datamapper

我开始使用 Ruby 和 DataMapper，我偶然发现了一个我认为没有任何意义的问题。假设我有以下模型：

```
class Foo
  include DataMapper::Resource

  property :id, Serial
  property :date, Date, required: true

  def initialize
    @date = Date.today
  end
end 
```

我打开 IRB 来测试我的模型，设置数据库连接，并尝试保存一个新的 foo：

```
> foo = Foo.new
> foo.date
=> #<Date: 2013-03-28 ((2456380j,0s,0n),+0s,2299161j)>
> foo.save 
```

然后我得到以下异常：

> DataObjects::IntegrityError: foos.date 可能不是 NULL

这完全有道理，因为我按要求标记了日期。但是日期是有的！我在类的构造函数中分配了它！如果我没有用今天的日期初始化它并尝试保存，我只会收到验证错误。没有例外。

我不明白（这就是我希望你回答的）是，如果我更换

```
@date = Date.today 
```

和

```
self.date = Date.today 
```

有用！foo 被正确保存。这是为什么？它是 DataMapper 内部的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:19:15.907

在向 DataMapper 的人员提出问题后，我被告知这是设计使然。要使脏跟踪起作用，您必须绝对使用属性编写器，而不是直接设置实例变量。

# android - 自定义用户界面不起作用

> ID：15685818
> 
> 赞同：1
> 
> 时间：2013-03-28T15:27:20.820
> 
> 标签：android, android-layout, csip-simple

我正在尝试将 csipsimple 重用为库。并调用同一个库中存在的 ui

我的 xml 文件看起来像

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DialerActivity" >

    <view 
        class="com.csipsimple.widgets.Dialpad"
        android:id="@+id/dialPad"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center_vertical"
        android:paddingBottom="10dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip" />

</LinearLayout> 
```

我从中调用的活动

```
package com.*****.payphone;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class DialerActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dialer);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_dialer, menu);
        return true;
    }

} 
```

和堆栈跟踪相同的是我不明白我做错了什么

```
03-28 18:52:18.847: I/ActivityThread(16221): Pub com.csipsimple.db: com.csipsimple.db.DBProvider
03-28 18:52:18.870: D/dalvikvm(16221): GC_CONCURRENT freed 152K, 2% free 9116K/9296K, paused 8ms+6ms, total 71ms
03-28 18:52:18.894: V/DummySetUp(16206):  <sip:****@*****.net> IwYzK5IbKJv8DQT 1
03-28 18:52:18.956: D/AndroidRuntime(16206): Shutting down VM
03-28 18:52:18.956: W/dalvikvm(16206): threadid=1: thread exiting with uncaught exception (group=0x41f27930)
03-28 18:52:18.964: E/AndroidRuntime(16206): FATAL EXCEPTION: main
03-28 18:52:18.964: E/AndroidRuntime(16206): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.novanet.payphone/com.*****.payphone.DialerActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class com.csipsimple.widgets.Dialpad
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.os.Looper.loop(Looper.java:137)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.ActivityThread.main(ActivityThread.java:5039)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at java.lang.reflect.Method.invoke(Method.java:511)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at dalvik.system.NativeStart.main(Native Method)
03-28 18:52:18.964: E/AndroidRuntime(16206): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.csipsimple.widgets.Dialpad
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.Activity.setContentView(Activity.java:1881)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at com.novanet.payphone.DialerActivity.onCreate(DialerActivity.java:12)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.Activity.performCreate(Activity.java:5104)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-28 18:52:18.964: E/AndroidRuntime(16206):    ... 11 more
03-28 18:52:18.964: E/AndroidRuntime(16206): Caused by: java.lang.reflect.InvocationTargetException
03-28 18:52:18.964: E/AndroidRuntime(16206):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-28 18:52:18.964: E/AndroidRuntime(16206):    ... 22 more
03-28 18:52:18.964: E/AndroidRuntime(16206): Caused by: android.view.InflateException: Binary XML file line #31: Error inflating class android.widget.ImageButton
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.inflate(LayoutInflater.java:459)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at com.csipsimple.widgets.Dialpad.<init>(Dialpad.java:105)
03-28 18:52:18.964: E/AndroidRuntime(16206):    ... 25 more
03-28 18:52:18.964: E/AndroidRuntime(16206): Caused by: java.lang.reflect.InvocationTargetException
03-28 18:52:18.964: E/AndroidRuntime(16206):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-28 18:52:18.964: E/AndroidRuntime(16206):    ... 33 more
03-28 18:52:18.964: E/AndroidRuntime(16206): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x7f01000f a=2}
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.content.res.Resources.loadDrawable(Resources.java:1927)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.view.View.<init>(View.java:3328)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.widget.ImageView.<init>(ImageView.java:114)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.widget.ImageButton.<init>(ImageButton.java:87)
03-28 18:52:18.964: E/AndroidRuntime(16206):    at android.widget.ImageButton.<init>(ImageButton.java:83)
03-28 18:52:18.964: E/AndroidRuntime(16206):    ... 36 more 
```

我的图书馆项目在我的主要项目之外，它位于 com 包中。***** .payphone 和正在使用的图书馆项目是 com.csipsimple.widget.Dialpad

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:33:29.553

你试过用`<com.csipsimple.widgets.Dialpad`而不是

```
 <view 
        class="com.csipsimple.widgets.Dialpad" 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:34:29.650

您应该在 XML 中定义您的自定义视图，如下所示：

```
<com.csipsimple.widgets.Dialpad
    android:id="@+id/dialPad"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="center_vertical"
    android:paddingBottom="10dip"
    android:paddingLeft="5dip"
    android:paddingRight="5dip" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T19:41:08.000

确保您的主题扩展了 ActionBarSherlock 主题之一。拨号盘按钮使用 ABS 的背景。看到这个[类似的问题](https://github.com/JakeWharton/ActionBarSherlock/issues/222)。

# javascript - 数据表中未定义的对象

> ID：15685821
> 
> 赞同：0
> 
> 时间：2013-03-28T15:27:26.093
> 
> 标签：javascript, jquery, ajax, datatable

有一个数据表并使用向下钻取行。顶行填充数据，但向下钻取到附加行的链接包含一个未定义的对象，我被困在那里。

任何帮助将不胜感激。oData.code（未定义）/oData 本身将从 linq 查询中返回所有内容，但是当我开始使用 oData.etc 时...对象变得未定义。即使在单击事件中，我也尝试访问 oData 并将其放在第二个 TD 行中，并且它也未定义。

```
function fnFormatDetails(oTable, nTr) 
{
    var oData = oTable.fnGetData(nTr);

    var sOut =
        '<div>' +
        '<table>' +
        '<tr><td> '+oData.code+' </td><td>  </td><td> </td><td>  </td><td>  </td><td>  </td><td>  </td></tr>'
        '</table>' +
        '</div>';                           

        return sOut;
} //end fnFormatDetails function

$(document).ready(function () 
{
    var anOpen = [];
    var oTable = $('#VADataTable').dataTable(
    {
        "sDom": 'T<"clear">lfrtip',
        "oTableTools":
        {
            "sSwfPath": "/swf/copy_csv_xls_pdf.swf"
        }, //flash must be enabled
        "iDisplayLength": 5, //defalut amount of rows shown on page                
        "bServerSide": false, //uses sever for filter curently turned off                                                
        "bFilter": false, //makes columns clickable to filter 
        "bProcessing": true,
        "bserverSide":false,
        "bJQueryUI": true, //enables user interface 
        "bSort": true, //sorting for columns                               
        "bScrollInfinite": true, //using this takes away ddl of selection
        "sAjaxSource": "Data/IndustryTable",   //where ajax commands renders results                
        "sScrollY": "200px",
        "sScrollX": "100%",
        "sScrollXInner": "100%",
        "bScrollCollapse": true,
        "fnRowCallback": function (nRow, aData) 
        {
            if (aData[0] == "") 
            {
                $('td:eq(0)', nRow).html("+").addClass('control');
            }
            return nRow;
        }, //ends fnRowCallback

        "aoColumns":
        [
            { "sName": "code", "sTitle": "Code" },
            { "sName": "code" },
            { "sName": "data" },
            { "sName": "data" },
            { "sName": "data" },
            { "sName": "data" },
            { "sName": "data" }
        ]
    });

    $('#VADataTable td.control').live('click', function () 
    {
        var nTr = this.parentNode;
        var i = $.inArray(nTr, anOpen);

        if (i === -1) 
        {
            $('td').attr('+');
            var nDetailsRow = oTable.fnOpen(nTr, fnFormatDetails(oTable, nTr), 'details');
            $('div', nDetailsRow).slideDown();
            anOpen.push(nTr);
        } //end if
        else 
        {
            $('td').attr('-');
            $('div', $(nTr).next()[0]).slideUp(function () 
            {
                oTable.fnClose(nTr);
                anOpen.splice(i, 1);
            }); //ends slideUp
        } //ends else
        $('#new tr').after('<td> '+ typeof(oTable.code) +' </td>');

    }); //ends click event
} //ends live event        
)//ends ready function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T12:46:33.860

我相信只需在“aoColumns”中添加“ **mData** **”**属性，即数据库表的字段名称，在**“fnRowCallback”**中，您必须将**“aData[0]”**替换为**“aData['code']”**，如下一个例子：

 ******```
"fnRowCallback": function (nRow, aData) 
    {
        if (aData['code'] == "") 
        {
            $('td:eq(0)', nRow).html("+").addClass('control');
        }
        return nRow;
    }, //ends fnRowCallback

    "aoColumns":
    [
        { "mData" : "code", "sName": "code", "sTitle": "Code" },
        { "mData" : "code", "sName": "code" },
        { "mData" : "data", "sName": "data" },
        { "mData" : "data", "sName": "data" },
        { "mData" : "data", "sName": "data" },
        { "mData" : "data", "sName": "data" },
        { "mData" : "data", "sName": "data" }
    ] 
```******

# c# - 未播放音频文件

> ID：15685830
> 
> 赞同：1
> 
> 时间：2013-03-28T15:27:48.940
> 
> 标签：c#, silverlight, windows-phone-7, xna, isolatedstorage

音频文件保存到独立存储中，但单击时不会播放。我只是在这里显示我的代码。该代码实际上是从 xap 内容中获取音频文件并存储到隔离存储中。它如图所示回读，但没有按预期播放。

回读方法

```
using (var ISF = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (ISF.FileExists(MusicFileToPlay))
                {
                    using (var FS = ISF.OpenFile(MusicFileToPlay, FileMode.Open, FileAccess.Read))
                    {
                        mediaelement.Stop();
                        mediaelement.SetSource(FS);

                        mediaelement.Position = System.TimeSpan.FromSeconds(0);
                        mediaelement.Volume = 20;
                        mediaelement.Play();
                        StatusTextBlock.Text = "Playing....";
                        //MediaPlayer.Play(
                    }
                }
                else
                {
                    StatusTextBlock.Text = "No file present to play....";
                }
            } 
```

存储到隔离存储的方法

```
private void SaveSoundsToStorage()
    {
        foreach (string music in fileNames)
        {
            string filename = String.Format("Sounds/{0}.mp3", music);
            SaveHelper(filename, music + ".mp3");
        }
    }

private void SaveHelper(string filename, string savename)
    {
        using (var appStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (appStorage.FileExists(savename))
            {
                //MessageBox.Show("File already exists");
                return;
            }
            StreamResourceInfo SRI = Application.GetResourceStream(new Uri(filename, UriKind.Relative));
            using (IsolatedStorageFileStream FS = new IsolatedStorageFileStream(savename, FileMode.CreateNew, FileAccess.ReadWrite, FileShare.None, appStorage))
            {
                try
                {
                    using (BinaryWriter BW = new BinaryWriter(FS))
                    {
                        long lg = 0;
                        Stream s;
                        try
                        {
                            if (SRI != null)
                            {
                                s = SRI.Stream;
                                lg = s.Length;
                            }
                        }
                        catch (Exception error)
                        {
                            MessageBox.Show("Stream resource exception:  "+error.Message);
                        }
                        try
                        {
                            if (lg > appStorage.AvailableFreeSpace)
                            {
                                //No space available.Request more space
                                Int64 spaceToAdd = lg;
                                Int64 curAvail = appStorage.AvailableFreeSpace;

                                // Request more quota space.
                                if (!appStorage.IncreaseQuotaTo(appStorage.Quota + spaceToAdd))
                                {
                                    // The user clicked NO to the
                                    // host's prompt to approve the quota increase.
                                    return;
                                }
                                else
                                {
                                    // The user clicked YES to the
                                    // host's prompt to approve the quota increase.
                                }
                            }
                        }
                        catch (Exception)
                        {
                            MessageBox.Show("quota increase problem.");
                        }

                        byte[] buff = new byte[32];
                        int count = 0;
                        try
                        {
                            using (BinaryReader br = new BinaryReader(SRI.Stream))
                            {
                                while (count < lg)
                                {
                                    int actual = br.Read(buff, 0, buff.Length);
                                    count += actual;
                                    BW.Write(buff, 0, actual);
                                    BW.Flush();
                                }
                            }
                        }
                        catch (Exception)
                        {
                            MessageBox.Show("Error at binary reader.");
                        }
                    }
                }
                catch (Exception)
                {
                    MessageBox.Show("Binarywriter exception.");
                }
                //MessageBox.Show(filename + " saved successfully.");
                StatusTextBlock.Text = savename + " saved succesfully";
            }
        }
    } 
```

媒体元素 XAML 代码是

```
<MediaElement Name="mediaelement" Height="120" Width="160" AutoPlay="True" MediaFailed="mediaelement_MediaFailed_1"/> 
```

提前致谢。

# java - 如何更快地加载 JTable？

> ID：15685840
> 
> 赞同：0
> 
> 时间：2013-03-28T15:28:15.067
> 
> 标签：java, performance, swing, jtable

我在课堂上创建了 2 个 JTable，

对于第一个 JTable，数据来自服务器到 arraylist，然后到 JTable

对于第二个 JTable，数据来自本地访问数据库到 JTable（无数组列表）

当用户单击按钮时，两个 JTable 将一起显示。

但是在界面上加载和显示两个jtable最多需要1分钟。

有什么方法可以更快地加载它们吗？

示例代码表1

```
data = new ArrayList<Person>();
try
    {
        conn = dc.getConnection();
        stmt = conn.prepareStatement(query);
        rs = stmt.executeQuery();

        while(rs.next())
        {
             String[] rowData = new String[4];
            for(int i=1;i<=4;i++)
            {
                rowData[i-1] = rs.getString(i);                    
            }
            //database to arraylist
            data.add(new Person(rowData[0],rowData[1],rowData[2],rowData[3]));
        }

String[] colNames = {"LastName","FirstName","Email","Department"};
model = new DefaultTableModel(colNames,data.size())

sorter = new TableRowSorter<TableModel>(model);
    int row = 0;
    //arraylist to JTable
    for(Person p:data)
    {
        model.setValueAt(p.lastName, row, 0);
        model.setValueAt(p.firstName, row, 1);
        model.setValueAt(p.email, row, 2);
        model.setValueAt(p.dept, row, 3);
        row++;

    }
    table.setModel(model);
    table.setRowSorter(sorter); 
```

表2示例代码

```
String[] colNames = {"Name","Email","Department","Status"};
model = new DefaultTableModel(colNames,500);
table.setModel(model); 

try
    {
        conn = ac.getConnection();
        stmt = conn.prepareStatement(insert);
        rs = stmt.executeQuery();
        int row = 0;   
        while(rs.next())
        {
            String[] rowData = new String[4];
            for(int i=1;i<=4;i++)
            {
                rowData[i-1] = rs.getString(i);
            }
            //access database to jTable
            model.setValueAt(rowData[0], row, 0);
            model.setValueAt(rowData[1], row, 1);
            model.setValueAt(rowData[2], row, 2);                
            model.setValueAt(rowData[3], row, 3);                
            row++;  

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:59:39.047

延迟是由执行数据库查询所需的时间引起的。因此，您要确保您正在执行两个单独的查询，每个查询都在不同的线程上，因此一个查询不会等待另一个查询完成。

这可以通过创建 2 个 SwingWorker 来完成，一个用于服务器访问，另一个用于本地访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:55:07.027

您可以通过此轻松将数据加载到jtable

```
DefaultTableModel tm = (DefaultTableModel) jTable1.getModel();
tm.addRow(new Object[] {name,age,tel}); 
```

姓名年龄电话是 column1、column2、column3 中的值

# javascript - 使用 Javascript 对数值数组的数组进行排序

> ID：15685843
> 
> 赞同：6
> 
> 时间：2013-03-28T15:28:24.207
> 
> 标签：javascript, sorting, numbers

在 Javascript 中，如果我有一个数组数组，如下所示：

```
X = [ [1,2,3,4],
      [1,1,2,3],
      [1,1,3],
      [1,4],
      [2,1,2],
      [2,2]
    ] 
```

Javascript 对我的数组进行排序，首先比较第一个条目，然后是第二个，依此类推，从而`X.sort()`返回以下内容：

```
[ [1,1,2,3],
  [1,1,3],
  [1,2,3,4],
  [1,4],
  [2,1,2],
  [2,2]
] 
```

这就是我想要的。问题是用于比较数组中元素的比较运算符是按字典顺序排列的，因此`[10,2] < [2,2]`，例如，

```
[[10,2],[1,1,3],[2,2]].sort() -> [[1,1,3],[10,2],[2,2]] 
```

我需要它对数字进行排序，以便得到一个排序后的数组`[[1,1,3],[2,2],[10,2]]`。

我尝试使用 的比较函数`function(a,b){return (a-b) }`，该函数可用于对数字数组进行排序，但这无法正确排序我的数组，这是有道理的（我认为），因为`[10,2] - [1,1,3]`产量`NaN`

如何对数字数组的数组进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:48:48.357

正如我在评论中所说，该`sort`函数需要考虑到它接收数组作为参数而不是普通值的事实。所以你需要相应地处理它们。

我建议这样做；

```
var compFunc = function (a, b) {
    var len = a.length > b.length ? b.length : a.length;

    for(var i=0; i<len; ++i) {
        if(a[i] - b[i] !== 0)
            return a[i] - b[i];
    }

    return (a.length - b.length);
}; 
```

它首先尝试寻找两个数组的公共长度的差异。如果公共长度完全相同，则根据数组长度进行排序。[这是一个工作小提琴](http://jsfiddle.net/ubpff/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:31:03.107

你想要的是运行一个自然排序。对于您的比较功能，将其替换为本文中提到的脚本

[http://my.opera.com/GreyWyvern/blog/show.dml/1671288](http://my.opera.com/GreyWyvern/blog/show.dml/1671288)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:40:43.603

当您这样做时`X.sort()`，Javascript 会将您的各个数组作为字符串进行比较。基本上是在做`a.toString().localeCompare(b.toString())`。这不是你想要的。

[`a.toString()`通常与`a.join(',')`]

我要做的是使用 for 循环比较数组中的每个元素。

像这样的东西：

```
X.sort(function(a,b){
    // Start off assuming values are equal
    var ret = 0;

    // Loop through a
    for(var a_i = 0, a_length = a.length; a_i < a_length; a_i++){
        // If b is shorter than a, it comes first
        if(typeof b[a_i] === 'undefined'){
            ret = 1;
            break;
        }
        // if the element in a and b are *not* the same, then we can sort
        else if(a[a_i] !== b[a_i]){
            ret = a[a_i] - b[a_i];
            break;
        }
    }

    return ret;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:43:01.583

您需要在 2 个数组之间进行排序和比较：http: [//jsfiddle.net/pXzB6/](http://jsfiddle.net/pXzB6/)

```
var arr = [[10,2],[1,1,3],[2,2]];

arr.sort(function(a,b){
    for(var i=0;i<a.length;i++){
       var item_a = a[i];
       for(var j=0;j<b.length;b++){   
           var item_b = b[j];   
           if(item_a == item_b){
                 continue;
           }
           else{
               return item_a > item_b;
           }
       }
    }

    if(a.length == b.length){
       return 0;
    }
    else{
      return a.length > b.length;
    }
});

console.log(arr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T02:36:09.747

变量点 = [40, 100, 1, 5, 25, 10];

points.sort(function(a, b){return ab});

那么结果是：1,5,10,25,40,100

这是我认为最简单的方法，它有效。

# eclipse - 在 JSF 托管 bean 修改后重新部署应用程序

> ID：15685845
> 
> 赞同：1
> 
> 时间：2013-03-28T15:28:26.417
> 
> 标签：eclipse, jsf, deployment, managed-bean

为什么 JSF 托管 bean 修改需要重新部署应用程序才能生效？

开发环境：

*   日蚀靛蓝。
*   JBoss 为 7。
*   JBossAS 工具。

进一步说明：

如果我修改一个 JSF 页面，我可以在简单地刷新页面后将修改可视化。但是对于 JSF 托管的 bean 修改，情况并非如此，我必须重新部署应用程序以将它们可视化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:34:56.590

Eclipse/JBoss 在 hotpublish/hotdeploy 期间无法处理*新的*类、方法和字段。然而，它们可以在 JVM 热交换的帮助下处理*修改后*的方法体和非静态字段的值。

[JRebel](https://www.jrebel.com/)插件能够在热部署期间处理*新的*类、方法和字段，但不能处理新的托管 bean 注册。

请注意，这一切都与 JSF 无关。它通常与 Java 开发有关，因此也会影响所有其他类型的 Java 框架/库，您基本上尝试“实时”编辑其代码。

### 也可以看看：

*   [.xhtml 文件中的更改未反映在浏览器中，需要重新启动和构建](https://stackoverflow.com/questions/6997545/changes-in-xhtml-file-not-reflected-in-browser-restart-and-build-needed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T09:55:46.763

我像这个项目一样解决 - >自动构建

# sql-server - 在 SQL Server 中，我们可以将 Unicode 替换字符从“？”更改为 别的东西？

> ID：15685851
> 
> 赞同：3
> 
> 时间：2013-03-28T15:28:39.350
> 
> 标签：sql-server, unicode

我了解 SQL Server 中 Unicode 的变幻莫测 - varchar 与 nvarchar 等。存储和检索 Unicode 数据没有问题。但是，我们选择将某些字段保留为 varchar，因为这些字段中的非 ASCII 字符被认为是异常的。

当 Unicode 字符成为其中一个非 Unicode 字段时，SQL Server 将其转换为问号：“？”。但是，有时很难判断何时发生了替换，因为问号是这些字段中的有效字符。

我的问题：我可以让 SQL Server 使用不同的替换字符，而不是问号吗？例如，下划线甚至是空字符串 ('')？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:09:46.497

没错，任何没有 ASCII 等价物的 unicode 字符在您将其放入 varchar 时都会导致数据丢失，并留下一个问号：

```
select ascii(cast(nchar(1000) as varchar)); 
```

我同意 R. Martinho Fernandes 的观点，你需要在应用层解决这个问题。您可以让应用程序用您想要的任何内容替换任何价值超过 255 的 2 字节 unicode 对。也许您可以更改应用层编码以仅接受 ASCII 和扩展 ASCII 数据。但是在这种情况下试图对数据层进行故障处理就像是在说“我们的数据字段只接受'M'或'F'。” 为什么当用户向我们发送“Z”时数据库会抱怨？”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:20:23.350

因为我很无聊。我几乎肯定这在应用程序中没有用，但它确实可以满足您的要求。如果你真的想要，你可以用这个创建一个函数......

```
Declare @Nvarchar Nvarchar(25) = N'Hɶppy',
        @NVbinary Varchar(128),
        @parse Int = 3,
        @NVunit Varchar(4),
        @result Varchar(64) = '0x',
        @SQL Nvarchar(Max);

Select  @NVbinary = master.sys.fn_varbintohexstr(Convert(Varbinary(128),@Nvarchar))

While (@parse < Len(@NVbinary))
Begin
        Select  @NVunit = Substring(@NVbinary,@parse,4),
                @parse = @parse + 4

        If      Substring(@NVunit,3,2) = '00'
        Begin
                Set     @result = @result + Substring(@NVunit,1,2)
        End
        Else
        Begin
                Set     @result = @result + '22' -- 22 is the hex value for quotation mark; Use Select Convert(Varbinary(8),'"') to get the value for whatever non-unicode character you want.
        End

End

Set     @SQL = 'Select Convert(Varchar(128),' + @result + '), ''' + @result + ''''

Select  @Nvarchar, @NVbinary
Exec    sp_executeSQL @SQL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:38:29.897

直接回答您的问题是，您不能“设置”该角色。正如其他人建议的那样，您可能已经知道，需要检查您的“特殊”varchar 字段的有效数据。

# tfs - Team Foundation Server 的自动构建未获取最新代码

> ID：15685852
> 
> 赞同：4
> 
> 时间：2013-03-28T15:28:40.083
> 
> 标签：tfs

我已经设置了一个构建控制器等并且构建失败了，我现在已经修复了这些并且构建正确失败了 - 因为一个错误。

我已经修复了错误并重新检查了代码，但现在代码没有被提取，尽管有时一个文件夹中有很多是。

我已经从构建机器中删除了代码并重新排队构建，但它一直失败。它抱怨它找不到我指定为构建解决方案的解决方案。

即使没有任何变化，我也已选中要构建的复选框。我是否错过了某个用于提取代码的设置？

TFS 版本是 2012 Express Visual Studio 版本是 2010 Professional

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T15:37:27.510

我最近在使用 TFS 2012 时遇到了这个问题。我认为归结为：

在最新的构建定义文件中，它似乎在更新工作空间**之前**`Clean`执行了一项任务。这意味着如果你做了一些导致构建部分失败的事情，它永远不会下载新文件来修复它。**`Clean`**

 **最近，我对我的构建文件进行了重大更改，不可避免地犯了很多错误，我发现如果其中一个错误导致`Clean`崩溃，我必须进入构建服务器并手动更改文件以使其再次工作.

这听起来像是同一个问题吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T15:48:16.283

您可以检查构建定义中的几个属性。我首先将“清洁工作区”设置为“全部”，以确保下拉并构建正确的代码。

您还可以查看其他检查，例如为构建设置的代理和“GetVersion”属性。检查下面的链接。它应该能够为您提供更详细的帮助。

[定义基于默认模板的构建过程](http://msdn.microsoft.com/en-us/library/dd647547.aspx#projects)**

# caching - SSRS 报告不通过 URL 访问刷新

> ID：15685857
> 
> 赞同：9
> 
> 时间：2013-03-28T15:28:52.500
> 
> 标签：caching, reporting-services, ssrs-2008, report, refresh

我想在另一个应用程序的 IFrame 中显示 SSRS 报告的输出。我将源设置为这样的：

```
http://SERVERNAME.domain.com/ReportServer?%2fTBI_MSCRM%2fCustomReports%2f%7bdafdbed0-1e96-e211-a5da-001d0967e0fc%7d&rs:Command=Render&rc:Toolbar=false 
```

我遇到的问题是报告的输出似乎是为会话缓存的。

如果刷新页面时报表上的时间戳未更新。要查看更新的数据，您必须关闭所有浏览器并重新打开页面。在 SSRS 中，快照未打开，没有缓存刷新计划，因为选择了“不缓存此报告的临时副本”选项。

我已经从 IFrame 中取出 URL 并单独运行它，我得到了相同的结果，所以它不是导致问题的 IFrame。我需要的是每次访问 URL 时刷新此报告。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T20:27:15.860

您可以通过清除会话来强制报表服务器在每个请求中获取新报表。

只需将以下内容添加到 URL`rs:ClearSession=true`

它将像这样在您的 URL 中实现：

```
http://SERVERNAME.domain.com/ReportServer?%2fTBI_MSCRM%2fCustomReports%2f%7bdafdbed0-1e96-
e211-a5da-001d0967e0fc%7d&rs:Command=Render
&rs:ClearSession=true&rc:Toolbar=false 
```

清除会话：

> true 值指示报表服务器从报表会话中删除报表。与经过身份验证的用户关联的所有报表实例都将从报表会话中删除。（报表实例定义为同一个报表使用不同的报表参数值多次运行。）默认值为 false。

[更多信息看这里](http://msdn.microsoft.com/en-us/library/ms152835.aspx)

# postgresql - 在 Postgres/SQLAlchemy 上设置 application_name

> ID：15685861
> 
> 赞同：55
> 
> 时间：2013-03-28T15:29:13.587
> 
> 标签：postgresql, sqlalchemy, psycopg2

查看 的输出`select * from pg_stat_activity;`，我看到一个名为的列，[在此处](http://www.postgresql.org/docs/current/static/monitoring-stats.html#PG-STAT-ACTIVITY-VIEW)`application_name`进行了描述。

我看到 psql 正确设置了这个值（到`psql`...），但我的应用程序代码（psycopg2/SQLAlchemy）将它留空。

我想将其设置为有用的东西，例如`web.1`,`web.2`等，以便稍后我可以将我看到的`pg_stat_activity`内容与我在应用程序日志中看到的内容相关联。

我无法找到如何使用 SQLAlchemy 设置此字段（如果推送到了 - 即使使用原始 sql；我在 Heroku 上使用 PostgresSQL 9.1.7，如果这很重要）。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-28T20:12:43.897

答案是：

[http://initd.org/psycopg/docs/module.html#psycopg2.connect](http://initd.org/psycopg/docs/module.html#psycopg2.connect)

> 客户端库/服务器支持的任何其他连接参数都可以在连接字符串中或作为关键字传递。PostgreSQL 文档包含[支持参数](http://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-PARAMKEYWORDS)的完整列表。另请注意，可以使用环境变量将相同的参数传递给客户端库。

我们需要的变量是：

[http://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-APPLICATION-NAME](http://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-APPLICATION-NAME)

> application_name 可以是少于 NAMEDATALEN 字符的任何字符串（标准构建中为 64 个字符）。它通常由应用程序在连接到服务器时设置。该名称将显示在 pg_stat_activity 视图中并包含在 CSV 日志条目中。它也可以通过 log_line_prefix 参数包含在常规日志条目中。application_name 值中只能使用可打印的 ASCII 字符。其他字符将替换为问号 (?)。

结合：

[http://docs.sqlalchemy.org/en/rel_0_8/core/engines.html#custom-dbapi-args](http://docs.sqlalchemy.org/en/rel_0_8/core/engines.html#custom-dbapi-args)

> 基于字符串的参数可以直接从 URL 字符串作为查询参数传递：（示例...） create_engine() 还接受一个参数 connect_args，它是一个附加字典，将传递给 connect()。这可以在需要字符串以外的类型的参数时使用，并且 SQLAlchemy 的数据库连接器没有该参数的类型转换逻辑

从中我们得到：

```
e = create_engine("postgresql://scott:tiger@localhost/test?application_name=myapp") 
```

或者：

```
e = create_engine("postgresql://scott:tiger@localhost/test", 
              connect_args={"application_name":"myapp"}) 
```

# c# - 阻止访问资源的危险 IP

> ID：15685862
> 
> 赞同：4
> 
> 时间：2013-03-28T15:29:29.080
> 
> 标签：c#, asp.net, wcf, security, iis

# 环境

我的 IIS 托管一个带有 WebService 资源的 WebApp。

*   ...
*   我的WebService.asmx
*   myWebService.svc
*   ...

# 问题

同样的坏人，尝试用他们的机器人阻止服务器访问公共资源。

# 应用解决方案

1.  我建立一个过滤器：

    ```
    public class BadGuysFilter
    {
        private class BadGuy
        {
            public BadGuy()
            {
                Visits = 0;
                FirstSuspiciousVisit = DateTime.Now;
            }

            public int Visits;
            public DateTime FirstSuspiciousVisit;
        }

        private static volatile Dictionary<string, BadGuy> _blackList = new Dictionary<string, BadGuy>();
        private static int _visitsLimit = 10;
        private static int _minutsLimit = 10;
        private static int _removeFromBlackListMinutesLimit = 30;

        public static void Init(int visitsLimit = 10, int minutsLimit = 10, int removeFromBlackListMinutesLimit = 30)
        {
            _visitsLimit = visitsLimit;
            _minutsLimit = minutsLimit;
            _removeFromBlackListMinutesLimit = removeFromBlackListMinutesLimit;
        }

        public static bool IsBadGuy()
        {
            return IsBadGuy(HttpContext.Current.Request.UserHostAddress);
        }
        public static bool IsBadGuy(string ip)
        {
            if (HttpContext.Current.Request.IsAuthenticated /*|| HttpContext.Current.Request.HttpMethod.ToUpper() == "POST"*/)
                return false;

            if (_blackList.Keys.Any(k => k == ip))
            {
                _blackList[ip].Visits++;

                if (_blackList[ip].FirstSuspiciousVisit < DateTime.Now.AddMinutes(-_removeFromBlackListMinutesLimit))
                    _blackList.Remove(ip);
                else if (_blackList[ip].FirstSuspiciousVisit < DateTime.Now.AddMinutes(-_minutsLimit))
                {
                    _blackList[ip].Visits = 0;
                    _blackList[ip].FirstSuspiciousVisit = DateTime.Now;
                }
                else if (_blackList[ip].Visits > _visitsLimit)
                {
                    _blackList[ip].FirstSuspiciousVisit = DateTime.Now;
                    return true;
                }
            }
            else
                _blackList.Add(ip, new BadGuy());

            return false;
        }
        public static void Punish()
        {
            var res = HttpContext.Current.Response;
            res.Clear();
            res.StatusCode = 429;
            res.StatusDescription = "TOO MANY REQUESTS: Your application is sending too many simultaneous requests.";
            res.End();
        }
    } 
    ```

2.  **在Global.asax**中使用过滤器

     **```
    void Application_BeginRequest(object sender, EventArgs e) {
        if(BadGuysFilter.IsBadGuy())
            BadGuysFilter.Punish();

        // do stuff //
    }

    void Application_EndRequest(object sender, EventArgs e) {
        var app = (HttpApplication)sender;

        if (app.Context.Response.StatusCode == 429) // "TOO MANY REQUESTS"
            return;

        // do stuff //
    } 
    ```** 

 **# 问题

**这是一个足够安全的解决方案吗？或者也许还有另一种方式？**

编辑： *“不要在资源本身阻塞。阻塞更远的上游，例如在防火墙处。- Marc B”是的，你是对的。这是最终解决方案，但在应用之前我需要中间解决方案来保护我的服务器。我忘了提这件事。– 阿蒂奥姆*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T15:47:09.653

您可以使用 IIS 动态 IP 限制模块（来自 Microsoft）：

[http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:51:03.890

我同意上面的评论。您需要在上游进一步阻止 ddos​​，否则您的应用程序仍将为每个请求提供服务。

这种类型的方法似乎缺乏任何持久性。因此，当他们轰炸您的系统并且您回收应用程序池时，它将重置。另一方面，防火墙方法缺乏在一段时间后删除的灵活性......我认为。

也就是说，如果您需要处理不同性质的可疑请求，例如对登录页面的请求过多，而不是主页或其他内容，那么这可能是一个可行的解决方案。

它实际上只是考虑您的所有目标并了解风险和限制。**

# javascript - 如何在 Javascript 中获取给定 url 的内容类型？

> ID：15685866
> 
> 赞同：2
> 
> 时间：2013-03-28T15:29:42.980
> 
> 标签：javascript, ruby-on-rails-3.2, content-type

我想知道用户在我的 Javascript 代码中输入的给定 url 的内容类型。实际上，我有一个下拉列表（html、csv、xls 等），我想这样做，所以当用户输入一个 url 时，我想检测 url 内容的类型并基于这种类型我想要设置我的下拉列表的值（html、csv、xls 等）。我知道，我可以像这样使用 Ruby 获取内容类型：

```
require 'open-uri'
str = open('http://example.com')
str.content_type #=> "text/html" 
```

或者，我也可以使用 curl 获取内容，然后解析它以了解内容类型。但是，由于上面解释了我的需要，我需要在我的 Javascript 代码中执行此操作。任何想法 ？

**编辑_1：**

我在我的 javascript 中尝试了这段代码：

```
 $("#wiki_form_url").change(function(){
        $.ajax({
            type: "GET",
            url: "content.rb",
            data: {
//                input_url: $("#wiki_form_url").val()
            },
            dataType: "html"
        }).done(function (data) {
                    // `data` contains the content-type
                    alert('Success !!!');
                }).fail(function () {
                    alert("failed AJAX call");
                });
    }); 
```

我有一个 ruby​​ 脚本 content.rb 我在里面做：

```
require 'open-uri'

str = open('http://www.ofdp.org/benchmark_indices/25')
str.content_type 
```

但是，它似乎不起作用。我遇到了 Ajax 失败。可能是因为脚本 content.rb 的 url 路径？我应该如何在这里指定脚本路径？（相对或绝对）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:39:12.330

[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止您使用客户端 JavaScript 直接发现有关任意 URI 的信息（您控制的 URI 是另一回事）。

您需要使用另一种技术（例如服务器端 Ruby）来获取该信息。

您可以通过简单地向服务器提交表单并将新网页返回到浏览器来完成此操作。

如果您不想离开页面，那么您可以使用 Ajax 传递数据。那里不乏 Ajax 教程，[这里有一篇来自 MDN 的好](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:02:25.677

这是一个 AJAX 调用的示例：

```
$(document).ready(function () {
    $("#button_check").on("click", function () {
        $.ajax({
            type: "GET",
            url: "Your URL",
            data: {
                input_url: $("#textbox_id").val()
            },
            dataType: "html"
        }).done(function (data) {
            // `data` contains the content-type
            alert(data);
        }).fail(function () {
            alert("failed AJAX call");
        });
    });
}); 
```

您的 HTML 类似于：

```
<input type="text" id="textbox_id" />
<input type="button" id="button_check" value="Submit" /> 
```

您的 Ruby 代码将类似于：

```
require 'open-uri'
class TestController < ApplicationController
  def index
    req = open(params[:input_url])
    render :text => req.content_type
  end
end 
```

我以前从未使用过 RoR，所以我不知道这是否正确或是否有效。但这是我在翻阅几个教程时可以快速想到的。这只是您似乎正在寻找的*概念。*您需要弄清楚如何将 URL 映射到此方法，然后更新 AJAX 选项`url`以使用该方法。

所以在 Javascript 代码中 - 在`done`方法中，这意味着整个 AJAX 请求是成功的，并且`data`变量应该包含来自 Ruby 代码的结果`req.content_type`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:03:20.580

Atlast 在@Ian 的大力帮助下，我可以弄清楚整个事情。这是我完成的代码：在 javascript 文件中：

```
 $("#wiki_form_url").change(function () {
        $.ajax({
            type: "GET",
            url: "/wiki_forms/content",
            data: {
                input_url: $("#wiki_form_url").val()
            },
            dataType: "text"
        }).done(function (data) {
                    // `data` contains the content-type
                    alert('Success');
                    console.log(data);
//                    alert(data);
                }).fail(function () {
                    alert("failed AJAX call");
                });
    }); 
```

在我的 wiki_forms 控制器中，我创建了一个名为 content 的新方法：

```
 def content 
    req = open(params[:input_url])
    render :text => req.content_type 
  end 
```

然后在 routes.rb 文件中添加了一条新路由：

```
 get "/wiki_forms/content" => 'wiki_forms#content' 
```

并使用**/wiki_forms/content**作为 ajax 请求 url。而且，现在一切都运行良好。

# c# - 如何在 Windows Phone 7 中设置与人员应用程序相同的滚动长列表选择器？

> ID：15685867
> 
> 赞同：0
> 
> 时间：2013-03-28T15:29:43.353
> 
> 标签：c#, wpf, windows-phone-7, xaml

我正在使用 windows phone 7 中的 longlistselector 开发应用程序。但是当我滚动 longlistselector 时，我很难滚动它正在滚动总视图但只需要滚动第一个 Iteamgroup 向上滚动以使第二个 groupitem 进入相同的进程（例如，people hub 应用程序在windows phone 7 和 windows phone 7 中的 office 应用程序）。

屏幕![在此处输入图像描述](../Images/890f1b18a13d21f1d5d9867fd850b10a.png)

任何人都可以帮助我....

谢谢，拉姆

![在此处输入图像描述](../Images/3ed6167280b71cfd53d1548eb34267a0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:48:40.650

如果您使用的是 Windows Phone Toolkit 中的 longlistselector，那么这是不可能的。

但是，如果您使用 Windows Phone 8 的内置 longlistselector，默认情况下会启用它

# c# - MigratorDotNet：没有找到具有迁移属性的公共类

> ID：15685868
> 
> 赞同：0
> 
> 时间：2013-03-28T15:29:47.417
> 
> 标签：c#, asp.net-mvc-3, migration, migratordotnet

得到下一个执行尝试使用 MigratorDotNet 应用迁移：

```
No public classes with the Migration attribute were found 
```

构建一般，没有出现配置错误。

我已经构建了包含下一个内容的配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <ProjectRoot Condition="'$(ProjectRoot)' == ''">$([System.IO.Directory]::GetParent($(MSBuildProjectDirectory)))</ProjectRoot>
        <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
        <ClassLibraryOutputDirectory>bin\$(Configuration)</ClassLibraryOutputDirectory>
        <MigrationsProject>$(ProjectRoot)\Solution\SqlMigrator\SqlMigrator.csproj</MigrationsProject>
    </PropertyGroup>

    <Import Project="Migrator.Targets" />

    <Target Name="Build-Migrations">
        <MSBuild Projects="$(MigrationsProject)" Targets="Build">
            <Output TaskParameter="TargetOutputs" ItemName="MigrationAssemblies" />
        </MSBuild>

        <Message Text="Built: @(MigrationAssemblies)"/>
    </Target>

    <Target Name="Migrate" DependsOnTargets="Build-Migrations">
        <Message Text="Migrating: @(MigrationAssemblies)"/>
        <Migrate Provider="MySql"
            Connectionstring="server=localhost;User Id=root;password=;database=loveproject"
            Migrations="@(MigrationAssemblies)" />
    </Target>
</Project> 
```

我有一个测试迁移：

```
namespace SqlMigrator
{
    using Migrator.Framework;
    using System.Data;

    [Migration(20140401110402)]
    public class TestMigrate : Migration
    {
        public override void Up()
        {
            this.Database.ExecuteNonQuery(@"CREATE TABLE example (id INT, data VARCHAR(100));");
        }

        public override void Down()
        {

        }
    }
} 
```

执行迁移：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe mbuild.proj /t:Migrate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:18:57.863

发现了问题。问题出在 Project 中的 Migrator 版本中，我从 msbuild 调用。

我从 Nuget 安装了最新版本，并从 Web 端下载了可执行文件以构建到 msbuild (Migrator.MSBuild.dll) 中。这是我的项目和 msbuild 脚本中使用的 2 个 otehr 版本。

# c++ - winapi openfiledialog c++

> ID：15685871
> 
> 赞同：1
> 
> 时间：2013-03-28T15:29:51.490
> 
> 标签：c++, winapi, openfiledialog

我使用mingw，c ++我想打开多个文件，如下所示：

```
OPENFILENAME ofn;
ZeroMemory(&ofn, sizeof(ofn));

ofn.lStructSize = sizeof(ofn);
ofn.hwndOwner = hwnd;
ofn.lpstrFilter = "TXT\0"
        "*.txt\0";
ofn.lpstrFile = szFileName;
ofn.nMaxFile = MAX_PATH;
ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY | OFN_ALLOWMULTISELECT;
ofn.lpstrDefExt = "txt"; 
```

但是我怎样才能得到文件名S？如果我检查 szFileName 变量，它只包含文件夹名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T15:33:58.167

从[文档中](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839%28v=vs.85%29.aspx)：

> 如果用户选择了多个文件，则**`lpstrFile`**缓冲区返回当前目录的路径，后跟所选文件的文件名。成员是第**`nFileOffset`**一个文件名的偏移量，以字节或字符为单位
> 
> 目录和文件名字符串以 NULL 分隔，最后一个文件名后有一个额外的 NULL 字符。

从你的问题：

> 如果我检查 szFileName 变量，它只包含文件夹名称。

继续检查终止后的一个字符`'\0'`。

每次以下字符*不是*另一个`'\0'`时，这就是一个新文件名的开始。

# django - django call_command 没有返回名为 new_text 的模块

> ID：15685873
> 
> 赞同：0
> 
> 时间：2013-03-28T15:29:56.480
> 
> 标签：django, django-commands

我必须创建一个需要调用另一个 django 命令的 django 命令，所以我不得不使用 call_command 这似乎很酷很简单：

```
call_command('command_to_call', new_text='arghslkjt') 
```

命令 command_to_call 应该将 new_text 内容存储到数据库中。但是，它返回

```
.......
call_command('command_to_call', new_text='arghslkjt')
                                       ^
SyntaxError: invalid syntax

make_option('-n','--new_text',
   type='string',
   dest='new_text',
   help='specify the new text title'), 
```

有任何想法吗？

提前致谢

# android - 如何隐藏启动器中的状态栏？

> ID：15685889
> 
> 赞同：1
> 
> 时间：2013-03-28T15:30:44.437
> 
> 标签：android, statusbar, launcher

有启动器提供隐藏或保护状态栏的可能性。我试图在有触摸时使用 TouchEvent 和菜单位置来获取菜单的位置 我弹出一个窗口说你是不允许的，但是 touchEvent 在屏幕上给出了操作，所以我怎样才能隐藏我试过的状态栏

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main_grid);
        mGrid = (GridView) findViewById(R.id.gridview);
        mGrid.setColumnWidth(95);
        mGrid.setVisibility(0x00000000);
        mGrid.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:32:17.173

您可以通过调用以编程方式执行此操作

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

我认为您必须在此之前完成

```
setContentView(whatever); 
```

或通过编辑应用程序样式，添加

```
<item name="android:windowFullscreen">true</item> 
```

里面`<style>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:41:26.810

你在你的清单中尝试过这个吗？

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

# c# - 如何在 GTK 中将焦点设置到文本视图和窗口

> ID：15685891
> 
> 赞同：1
> 
> 时间：2013-03-28T15:30:55.650
> 
> 标签：c#, gtk

我试过了

```
textview.GrabFocus(); 
```

但它什么也没做。有没有办法做到这一点？（这次请尝试回答，而不是告诉我使用谷歌 - 我已经尝试过但失败了，谢谢）。

我也对窗口进行了同样的尝试：

```
 // searchbox is a GTK window, which was initialised on load of this form
            searchbox.Show();
            searchbox.GrabFocus();
            // this function will set focus to text box
            searchbox.setFocus(); 
```

在这种情况下，主窗口会打开一个新窗口，并且应该使这个新窗口聚焦，并且这个窗口中的某些文本框聚焦 - 但它不起作用，我不知道为什么，完整的源代码：

我打开的窗口：[https ://github.com/pidgeonproject/pidgeon/blob/gtk%23/Forms/ScriptEdit.cs](https://github.com/pidgeonproject/pidgeon/blob/gtk%23/Forms/ScriptEdit.cs)

我打开的窗口：[https ://github.com/pidgeonproject/pidgeon/blob/gtk%23/Forms/Main.cs#L520](https://github.com/pidgeonproject/pidgeon/blob/gtk%23/Forms/Main.cs#L520)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:38:50.330

好吧，鉴于这可能是与我的应用程序配置相关的非常罕见的问题，我不希望任何人解决它，但是我发现了问题所在。

我创建的窗口是类型

`window.Hint = Gtk.WindowTypeHint.Utility`

由于某些我不知道的原因，无法为此窗口设置焦点。它甚至可能是 GTK 内部的错误，但将其更改为 Normal 确实有效。

# perl - 在 Perl IPN 示例代码中首次使用 $query 会导致“未定义”错误

> ID：15685892
> 
> 赞同：0
> 
> 时间：2013-03-28T15:30:56.453
> 
> 标签：perl, paypal-ipn

在对有关 Perl 的书籍和文章进行了大量研究之后，我无法将 Perl IPN 示例代码集成到我网站的 Perl 脚本中。很多麻烦似乎来自于如何引入和使用某些变量。例如，示例的第一个活动行是：

```
read (STDIN, $query, $ENV{'CONTENT_LENGTH'}); 
```

编译此行时， $query 被标记为未定义，因此我尝试在该行之前使用：

```
my $query = ""; 
```

这导致了一个未初始化的错误。我不确定我的脚本的上下文（大约十几行其他代码）是否导致了问题，或者我是否不了解 Perl 变量。虽然我已经用十几种语言编码赚钱，但这是我的第一个 Perl 脚本，所以这当然是可能的。

我从这些行开始我的脚本，但我不确定它们是否会导致问题：

```
#!/usr/bin/perl

# This is the Buck A View package.
package BuckAViewMovie;

use strict;
use warnings;
use diagnostics;
use LWP::UserAgent;

print "Content-type: text/html;\n\n"; 
```

我将不胜感激有关如何解决这些集成问题的任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:44:18.240

是的，[PayPal IPN Perl 示例脚本](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPN_PERL.txt)没有正确声明其变量，因此不会在`use strict`. 这是一个应该可以工作的清理版本：

```
#!/usr/bin/perl
use strict;
use warnings;
use CGI::Carp qw(fatalsToBrowser warningsToBrowser);
use CGI ();
use LWP::UserAgent;

use constant PAYPAL_URL => 'https://www.paypal.com/cgi-bin/webscr';

# read post from PayPal system and add 'cmd'
my $q = CGI->new();
$q->param( cmd => '_notify-validate' );

# post back to PayPal system to validate
my $ua = LWP::UserAgent->new();
my $res = $ua->post( PAYPAL_URL, scalar $q->Vars );

# assign posted variables to local variables
my $item_name        = $q->param('item_name');
my $item_number      = $q->param('item_number');
my $payment_status   = $q->param('payment_status');
my $payment_amount   = $q->param('mc_gross');
my $payment_currency = $q->param('mc_currency');
my $txn_id           = $q->param('txn_id');
my $receiver_email   = $q->param('receiver_email');
my $payer_email      = $q->param('payer_email');

if ($res->is_error) {
    # HTTP error
}
elsif ($res->content eq 'VERIFIED') {
    # check that $payment_status is 'Completed'
    # check that $txn_id has not been previously processed
    # check that $receiver_email is your Primary PayPal email
    # check that $payment_amount/$payment_currency are correct
    # process payment
}
elsif ($res->content eq 'INVALID') {
    # log for manual investigation
}
else {
    # error
}

# print result page
print "Content-type: text/html\n\n";
warningsToBrowser( 1 );
# ... 
```

或者您可以像 Sinan Ünür 建议的那样使用[Business::PayPal::IPN 。](http://search.cpan.org/perldoc?Business%3a%3aPayPal%3a%3aIPN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:42:34.050

[您可以使用Business::PayPal::IPN](http://search.cpan.org/perldoc/Business%3a%3aPayPal%3a%3aIPN)而不是尝试使用 PayPal 的示例代码。

前段时间，我开始写一个替代的[Business::PayPal::IPN::Modern](https://github.com/nanis/Business-PayPal-IPN-Modern)，但我从未完成它，而且代码很糟糕。此外，它甚至在 PayPal 沙箱中也不起作用。

# python - Python Bot 的基本计算机视觉技术。

> ID：15685894
> 
> 赞同：2
> 
> 时间：2013-03-28T15:31:00.747
> 
> 标签：python, opencv, computer-vision, bots

在完成计算机视觉书籍的几章后，我决定应用这些方法为游戏创建一些原始机器人。我选择了几乎没有动力的[Fling](http://www.miniclip.com/games/fling/en/)，我需要做的就是找到球。球可能有 5 种不同的颜色，也可以指向 4 个方向中的任何一个（取决于眼睛的位置）。我裁剪了场地中的每个方块，这样我就可以检查每个方块是否包含一个球。我的问题是我无法正确找到球。

![在此处输入图像描述](../Images/caa57bcb685377b8b85eaace01eaf20b.png)

我的第一次尝试是跟随。我对每个球的 RGB 颜色求和并得到 [R, G, B] 数组。然后我对字段中每个块的 RGB 颜色求和。如果块的数组具有与球的数组相似的 [R, G, B] 我建议这个块有一个球。问题是很难为“相似性”找到好的价值。甚至不同的空块在这样的总和上也有很大的不同。

其次，我尝试使用具有**[matchTemplate](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)**功能的*openCV模块。*此函数将图像与另一个源图像匹配，并且与*minMaxLoc*函数一起返回值*maxLoc***. 如果 maxLoc 接近 1，则图像可能在源图像中。我做了所有可能的球变化（总共20个），并在整个场地上传球。此功能运行良好，但不幸的是，它有时会错过球场上的一些球，或者为一个球分配两种不同类型的球（比如绿色和黄色）。我试图通过匹配球而不是整个场地而是每个街区来改进这个过程（这种方法的优点是它检查每个街区并且应该检测场地中正确数量的球，当与整个场地匹配时，每个场地只给出一个位置球的颜色。如果有两个相同颜色的球匹配模板丢失关于第 2 个球的信息）。令人惊讶的是，它仍然有误报\正数。**

 **可能有更简单的方法来解决这个问题（也许是一个我还不知道的库），但现在我找不到。欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T17:07:45.383

这些球在颜色方面看起来非常不同。您最初描述的问题似乎与图像中存在的一些更精细、随机的细节有关——尤其是在背景和球的不同阴影/姿势中。

在此基础上，我想说您可以通过应用一组预处理步骤来“折叠”图像中的颜色范围，从而显着简化任务。

有许多更原则性的方法可以实现准确的*颜色分割*（更正式地说，这是您想要实现的） - 但从更务实的角度来看，这里有一些快速'n'dirty hacks。

因此，例如，我们可以最初平滑图像以减少高频分量......

![在此处输入图像描述](../Images/7b827e3aecb730ad33b8cd2d6e7216a2.png)

然后，转换为*标准化的 RGB*表示...

![在此处输入图像描述](../Images/c20fcaf2669363989caa39f208d52403.png)

之前，最后用[均值偏移过滤步骤](http://opencv.willowgarage.com/documentation/miscellaneous_image_transformations.html#pyrmeanshiftfiltering)对其进行后移......

![在此处输入图像描述](../Images/e66fb57bafe676d979c98fe3a7d95349.png)

这是 Python 中的代码，使用 OpenCV 绑定，按顺序执行所有这些操作：

```
import cv 

# get orginal image
orig = cv.LoadImage('fling.png') 

# show original 
cv.ShowImage("orig", orig)

# blur a bit to remove higher frequency variation
cv.Smooth(orig,orig,cv.CV_GAUSSIAN,5,5)

# normalise RGB
norm = cv.CreateImage(cv.GetSize(orig), 8, 3) 
red = cv.CreateImage(cv.GetSize(orig), 8, 1) 
grn = cv.CreateImage(cv.GetSize(orig), 8, 1) 
blu = cv.CreateImage(cv.GetSize(orig), 8, 1) 
total = cv.CreateImage(cv.GetSize(orig), 8, 1) 
cv.Split(orig,red,grn,blu,None)
cv.Add(red,grn,total)
cv.Add(blu,total,total)
cv.Div(red,total,red,255.0)
cv.Div(grn,total,grn,255.0)
cv.Div(blu,total,blu,255.0)
cv.Merge(red,grn,blu,None,norm)
cv.ShowImage("norm", norm)

# posterize simply with mean shift filtering
post = cv.CreateImage(cv.GetSize(orig), 8, 3) 
cv.PyrMeanShiftFiltering(norm,post,20,30)
cv.ShowImage("post", post) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T10:26:12.563

你的任务在几个方面比你会发现的通用计算机视觉算法的设计要简单：你确切地知道要寻找什么，并且确切地知道在哪里寻找它。因此，我认为涉及外部库是不必要的复杂化，*除非*您已经熟悉它并且可以有效地将其用作解决您自己问题的工具。在这篇文章中，我将只使用 PIL。

首先，将任务分为两个更简单的任务：

*   给定一个瓷砖，确定那里是否有球。
*   给定一个我们非常确定有球的瓷砖，识别球的颜色。

第二个任务应该很简单，我不会在这里花时间。基本上，在球的主要颜色可见的一些像素中取样，并将您找到的颜色与已知的球颜色进行比较。

那么让我们看看第一个任务。

首先，请注意球不会延伸到瓷砖的边缘。因此，您可以通过沿图块边缘对像素进行采样，找到图块*背景*的相当有代表性的样本，无论那里是否有球。

一个简单的方法是将图块中的每个像素与该图块背景样本进行比较，并获得某种衡量它是否通常相似（无球）或不相似（球）的度量。

以下是执行此操作的一种方法。这里使用的基本方法是计算背景像素的平均值和标准差——分别计算红色、绿色和蓝色通道。对于每个像素，我们然后计算我们与每个通道的平均值的标准偏差数。我们将此值用于最不相似的渠道作为我们的不相似性度量。

```
import Image
import math

def fetch_pixels(col, row):
    img = Image.open( "image.png" )
    img = img.crop( (col*32,row*32,(col+1)*32,(row+1)*32) )
    return img.load()

def border_pixels( a ):
    rv = [ a[x,y] for x in range(32) for y in (0,31) ]
    rv.extend( [ a[x,y] for x in (0,31) for y in range(1,31) ] )
    return rv

def mean_and_stddev( xs ):
    mean = float(sum( xs )) / len(xs)
    dev = math.sqrt( float(sum( [ (x-mean)**2 for x in xs ] )) / len(xs) )
    return mean, dev

def calculate_deviations(cols = 7, rows = 8):
    outimg = Image.new( "L", (cols*32,rows*32) )
    pixels = outimg.load()
    for col in range(cols):
        for row in range(rows):
            rv = calculate_deviations_for( col, row, pixels )
            print rv
    outimg.save( "image_output.png" )

def calculate_deviations_for( col, row, opixels ):
    a = fetch_pixels( col, row )
    border = border_pixels( a )
    bru, brd = mean_and_stddev( map( lambda x : x[0], border ) )
    bgu, bgd = mean_and_stddev( map( lambda x : x[1], border ) )
    bbu, bbd = mean_and_stddev( map( lambda x : x[2], border ) )
    rv = []
    for y in range(32):
        for x in range(32):
            r, g, b = a[x,y]
            dr = (bru-r) / brd
            dg = (bgu-g) / bgd
            db = (bbu-b) / bbd
            t = max(abs(dr), abs(dg), abs(db))
            opixel = 0
            limit, span = 2.5, 8.0
            if t > limit:
                v = min(1.0, (t - limit) / span)
                print t,v
                opixel = 127 + int( 128 * v )
            opixels[col*32+x,row*32+y] = opixel
            rv.append( t )
    return (sum(rv) / float(len(rv))) 
```

结果的可视化在这里：

![临时球识别](../Images/b37525f6d2da327a3990a4c58f681bdb.png)

请注意，大多数非球像素是纯黑色的。现在应该可以通过简单地计算黑色像素来确定是否存在球。（或者更可靠的是：计算最大的单个非黑色像素块的大小。）

现在，这是一种非常临时的方法，我当然不会声称它是最好的方法。“极限”值是通过实验确定的——本质上是通过反复试验确定的。它包含在这里是为了说明我认为您应该探索的那种方法，并为您提供一个调整的起点。（如果你想要一个开始试验的地方，你可以尝试让它为顶部的紫色球提供更好的结果。你能想到上面方法中的弱点可能会导致这样的结果吗？永远记住，但是，您不需要看起来完美的结果，只要一个足够好的结果即可。您想要的最终答案是“有球”或“没有球”，而您只想能够可靠地回答。）

注意：

*   您需要确保在球完成滚动并且静止在其瓷砖中心时进行屏幕抓取。这极大地简化了问题。
*   游戏的背景会影响问题——如果出现海洋主题或沙漠主题的关卡，您将需要测试并可能调整识别器以确保它仍然可靠地工作。
*   覆盖比赛场地的特殊效果和/或 GUI 元素会使问题复杂化。（例如，考虑游戏是否有“云”或“烟雾”效果，有时会漂浮在比赛场地上。）如果不确定，您可能需要调整识别器以便能够返回“无结果” - 然后您可以稍后尝试另一个屏幕截图。您可能想要获取多个屏幕截图并对结果进行平均。
*   我假设只有球和非球。如果更高级别有其他类型的对象，您将不得不进行更多实验以找出如何最好地识别这些对象。
*   我没有使用“参考图片”的方法。但是，如果您的图像包含游戏中的所有对象，并且您可以将像素与图块精确对齐，那么这可能是最可靠的方法。不是将前景与采样背景进行比较，而是将前景与一组已知的前景图像进行比较。**

# ios - 自定义维度在 Google Analytics（分析）中不起作用

> ID：15685896
> 
> 赞同：13
> 
> 时间：2013-03-28T15:31:04.650
> 
> 标签：ios, google-analytics

我在设置和显示 Google Analytics（分析）自定义维度时遇到问题。我已经成功地在名为“客户端”的 Web 界面中设置了一个维度。在代码中，我正在正确发送一个视图，如下所示：

```
 [tracker setCustom:1 dimension:@"Client"];
    [tracker sendView:@"my view"]; 
```

GAI dispatch 说数据发送成功。但是当我尝试在报告中查看我的数据时 - 屏幕选项卡并应用“客户”维度。我的所有数据都从表中消失，说“此视图没有数据”。切换每页的行数时也存在一些错误。

任何成功应用自定义尺寸的人，你是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T21:47:15.207

您是否定义了一个条件与您的维度值相匹配的细分？它对我有用。

请参阅本指南以创建细分： [https ://support.google.com/analytics/answer/3124493?hl=en](https://support.google.com/analytics/answer/3124493?hl=en)

您可以选择您在报告中创建的细分，如果维度设置正确并且 GA 正确接收数据，那么您的细分应该会显示命中。

请注意，您可能会看到延迟一天左右的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T09:20:16.950

我最近刚刚为 SDK 3.0 做了一些 Google Analytics 开发，但我也在为自定义维度而苦苦挣扎。需要注意的重要一点是，自定义维度设置一次，然后所有调用都会自动传递它们，因此您可以在初始化所有 Google Analytics 类时设置它们。

同样重要的是要注意，在您的示例中，您说带有键 1 的自定义维度将具有值 Client。因此，在您的后端，您应该看到键“Client”的值“Client”，考虑到“Client”键对应于值 1。

您是否尝试过调试谷歌分析，以确保您发送的 URL 正确？

如需更多帮助，您能否给我们一张您定义自定义维度的后端屏幕截图？只是您必须启用的标志，如您在此页面中所见：[https ://developers.google.com/analytics/devguides/collection/ios/v2/advanced#testing](https://developers.google.com/analytics/devguides/collection/ios/v2/advanced#testing)

# eclipse - Eclipse 不工作 - 缺少 Java

> ID：15685900
> 
> 赞同：0
> 
> 时间：2013-03-28T15:31:07.077
> 
> 标签：eclipse

我昨晚下载了最新版本的 Android SDK。我也下载了独立的java（我认为是jr7）。我都安装了，但它不断告诉我它找不到 java.util. 因此，我更改了 .ini 文件以告诉它 JAVA 在哪里，但随后它告诉我它缺少 jvm.dll （我正在记忆中），即使该文件显然在那里。运行 Win 7、64 位。所以现在我什至无法启动或使用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:32:33.613

听起来您下载的是 java 运行时环境而不是 JDK。

[从这里](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 jdk

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T15:34:40.997

您必须设置 JAVA_HOME 环境变量。但在此之前，我们必须下载 JDK，而不是 JRE。这两个是不同的。一是开发套件；另一个是运行时环境。

1.  右键单击桌面上的“我的电脑”图标，然后选择“属性”。
2.  单击高级选项卡。
3.  单击环境变量按钮。
4.  在系统变量下，单击新建。
5.  输入变量名称为 JAVA_HOME。
6.  输入变量值作为 Java 开发工具包的安装路径。
7.  单击确定。单击应用更改。

希望现在应该指向您的 Java JDK 位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:58:19.197

我的猜测是你错误地配置了你的`eclipse.ini`. 我发现以`JAVA_HOME`任何方式使用@blackpanther 提到的更好的做法。我建议删除您`eclipse.ini`对`JAVA_HOME`. 确保`JAVA_HOME`指定 JDK 的根目录：（`C:\Program Files\Java\jdk1.x.x_xx`假设是 windows）。

# r - 测试系数的差异，包括分段线性模型的交互作用

> ID：15685902
> 
> 赞同：2
> 
> 时间：2013-03-28T15:31:07.887
> 
> 标签：r

我正在运行一个分段线性随机系数模型来测试协变量对第二个部分的影响。因此，我想测试在协变量（piece2 + piece2:covariate）的影响下，第二块的系数是否与第一块（piece1）的系数不同，因此增长率是否不同。

我设置了一些示例数据：

```
set.seed(100)

# set up dependent variable   
temp <- rep(seq(0,23),50)
y <- c(rep(seq(0,23),50)+rnorm(24*50), ifelse(temp <= 11, temp + runif(1200), temp + rnorm(1200) + (temp/sqrt(temp))))

# set up ID variable, variables indicating pieces and the covariate
id <- sort(rep(seq(1,100),24))
piece1 <- rep(c(seq(0,11), rep(11,12)),100)
piece2 <- rep(c(rep(0,12), seq(1,12)),100)
covariate <- c(rep(0,24*50), rep(c(rep(0,12), rep(1,12)), 50))

# data frame
example.data <- data.frame(id, y, piece1, piece2, covariate)

# run piecewise linear random effects model and show results
library(lme4)
lmer.results <- lmer(y ~ piece1 + piece2*covariate + (1|id) , example.data)  
summary(lmer.results) 
```

我遇到了 car 包中的 linearHypothesis() 命令来测试系数的差异。但是，我找不到在包含交互时如何使用它的示例。

我什至可以使用 linearHypothesis() 来测试它还是我的目标是错误的测试？

我感谢您的帮助。提前谢谢了！苹果电脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:52:06.563

假设您的输出看起来像这样

```
 Estimate Std. Error t value
(Intercept)       0.26293    0.04997     5.3
piece1            0.99582    0.00677   147.2
piece2            0.98083    0.00716   137.0
covariate         2.98265    0.09042    33.0
piece2:covariate  0.15287    0.01286    11.9 
```

如果我正确理解你想要什么，你正在寻找对比：piece1-(piece2+piece2:covariate)

或者

```
c(0,1,-1,0,-1) 
```

我首选的工具是函数`estimable`in `gmodels`; 您也可以手动或使用 Frank Harrel 软件包中的功能之一来完成。

```
library(gmodels)
estimable(lmer.results,c(0,1,-1,0,-1),conf.int=TRUE) 
```

给予

```
 Estimate Std. Error p value Lower.CI Upper.CI
(0 1 -1 0 -1)   -0.138     0.0127       0   -0.182  -0.0928 
```

# javascript - Jquery - 获取行跨度超过一的标签的值

> ID：15685907
> 
> 赞同：0
> 
> 时间：2013-03-28T15:31:26.247
> 
> 标签：javascript, jquery, html

我有一个动态表，它取决于 abc1 列的数量。
在此示例中，我在 abc1 列中有 2 行。值为 18 和 23
[http://jsfiddle.net/SdN4L/](http://jsfiddle.net/SdN4L/)

```
<table border=1>
    <tr>
        <th rowspan="2"></th>
        <th rowspan="2"></th>
        <th rowspan="2"></th>
        <th rowspan="2"></th>
        <th rowspan="2"></th>
        <th align="center" colspan="3">abc</th>
        <th rowspan="2"></th></tr>
    <tr>
        <th>abc1</th>
        <th>abc2</th>
        <th>abc3</th>
    </tr>
    <tr>
        <td rowspan="2">2</td>
        <td rowspan="2">16</td>
        <td rowspan="2">a</td>
        <td rowspan="2">300</td>
        <td rowspan="2">b</td>
        <td>18</td>
        <td>c</td>
        <td>333</td>
        <td rowspan="2">31</td>
        <td rowspan="2"><input type="button" value="Edit" name="edit" class="edit"></td>
        <td rowspan="2"><input type="button" value="Delete" name="delete"  class="delete"></td>
        <td rowspan="2"><input type="button" value="Add" name="add"  class="add"></td>
    </tr>
    <tr>
        <td>23</td>
        <td>d</td>
        <td>322</td>
    </tr>
</table> 
```

当我单击编辑按钮时，我想做。它将显示下一行的值，如 3 步。我不知道怎么做3个步骤。我怎样才能做到这一点。谢谢

```
$('.edit').click(function(){
    //1: get rowspan value of <td rowspan="2">edit input</td>
    //2: for (i=1; i < rowspan.value; i++)
    //3:     alert('text of abc2') = 23 and d and 322
    alert ($(this).parent().siblings().eq(7).text());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:44:02.590

您可以使用获取下一行

```
$(this).parents('tr').next() 
```

[http://jsfiddle.net/SdN4L/5/](http://jsfiddle.net/SdN4L/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:28:04.420

您可以轻松获取 rowspan 值：

```
$(this).parent().siblings().eq(0).attr("rowspan"); 
```

# spring - Spring Roo 权限级别

> ID：15685913
> 
> 赞同：0
> 
> 时间：2013-03-28T15:31:38.393
> 
> 标签：spring, spring-mvc, spring-security, spring-roo, spring-webflow

我有一个正在测试的简单网络应用程序。它有两个级别，即管理员和普通用户。该项目还包括三个实体。我想要实现的是用户无法删除第一个实体中的任何条目的实例，尽管他可以创建一个。

我相信使用@RequestMapping 是实现这一目标的方法，但不完全确定如何实现，如果没有，还有其他方法吗？一个片段代码将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:49:05.420

`jspx`如果您只是通过用户界面阻止访问，然后不允许通过控制器调用删除方法，则可以隐藏视图文件上的删除按钮。您还可以使用其他方法来限制用户执行某些操作。

**1\. 用户界面**

但是，您需要对控制器执行手动检查，以确保未经授权的用户不会执行删除操作。

为此，首先您需要将 Spring Security JSP 标记库名称空间导入到您的`jspx`文件中。

```
xmlns:sec="http://www.springframework.org/security/tags" 
```

然后使用您刚刚导入的 Spring 安全标签来包围您需要在用户级别显示的元素。

例如：

```
 <sec:authorize access="hasRole('ROLE_ADMIN')">
       <p>User is an administrator</p>
       <!-- Delete button goes here -->
    </sec:authorize> 
```

有关标签库的更多信息，请访问[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html)

**2.控制器**

您可以`ROLE_ADMIN`通过在您的`applicationContext-security.xml`

```
<intercept-url pattern="/countries/**" access="hasRole('ROLE_ADMIN')" method="DELETE"/> 
```

如果它不适合您，请尝试通过以下链接。

[http://forum.springsource.org/showthread.php?123781-intercept-url-method-attribute-not-work-with-put-and-delete](http://forum.springsource.org/showthread.php?123781-intercept-url-method-attribute-not-work-with-put-and-delete)

有关 Spring Security 的有趣教程，请访问[http://static.springsource.org/spring-security/site/petclinic-tutorial.html](http://static.springsource.org/spring-security/site/petclinic-tutorial.html)

干杯。

# mysql - 在将日期列从 varchar 转换为 sql 中的日期时间格式之前将一个表的记录复制到另一个表

> ID：15685918
> 
> 赞同：-1
> 
> 时间：2013-03-28T15:32:00.967
> 
> 标签：mysql, sql, data-warehouse

我需要将一个表的记录复制到另一个表，但在执行此操作之前，我需要将我的日期戳列 (nvarchar) 转换为 datetime 格式，因为日期是 varchar 格式，因此我无法查询该表。我知道如何将 varchar 转换为日期时间格式，但它是针对单个记录的。任何人都可以向我推荐一种简单快捷的方法，将整个列转换为日期时间格式，然后将记录复制到另一个表中。例如，varchar 日期戳的格式是 2013 年 1 月 16 日，星期三。

```
declare @dateString varchar(50)
set @dateString = 'wednesday, january 16, 2013'

declare @index int
set @index = charindex( ',', @dateString )
set @dateString = substring( @dateString, @index + 1, len(@dateString) - @index)

select cast(@dateString as datetime) 
```

上面的代码在 datetime 中转换了我的格式的 varchar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:17:58.107

看起来您使用的是 MS SQL Server，而不是 MYSQL。

您需要做的就是将您的函数逻辑放在那里，将子字符串函数中的 @index 替换为`charindex(',' columnname)`并将其作为`SELECT`INSERT..SELECT 语句的一部分

```
INSERT ....
SELECT cast(
    substring( COLUMN
              , charindex( ',', COLUMN ) + 1
              , len(COLUMN) - charindex( ',', COLUMN )
             ) as datetime
           ) from XXX 
```

[此 SQLFiddle 上有一个完整的示例。](http://sqlfiddle.com/#!6/043ae/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:54:14.477

我有同样的问题，我已经通过这种方式解决了。

1.  使用前缀复制整个表 - 示例 table1 -> backup_table1
2.  从原始表中删除所有原始数据，例如使其为空
3.  将原始表中的 varcher 字段更改为日期或日期时间。我已将我的从 VARCHAR 更改为 DATE。
4.  将备份表中的所有信息复制到原始表中，但使用 sql 查询直接转换日期。我正在将 field1 和 field2 从 dd-mm-YY 转换为 YY-mm-dd

我用这个：

```
INSERT INTO original_table
(field1, field2, field3, field4 ...)
SELECT 
DATE_FORMAT(STR_TO_DATE(field1, '%d-%m-%Y'), '%Y-%m-%d'), 
DATE_FORMAT(STR_TO_DATE(field`, '%d-%m-%Y'), '%Y-%m-%d'), 
field3, filed4 ...
FROM backup_table 
```

这样，当我复制信息并将 varchar 日期直接转换为 DATE 格式 sql 标准格式时。希望这对某人有所帮助。

# javascript - JQuery, HTML5 Uploader - 上传后获取数据响应

> ID：15685919
> 
> 赞同：0
> 
> 时间：2013-03-28T15:32:05.657
> 
> 标签：javascript, jquery, jquery-html5uploader

上传图像后如何获取数据响应并将该响应作为 data-id 属性插入到**标签**中（成功发布后，我得到了插入图像的 id）。函数中的什么地方发生了这种情况？功能：

```
function img_upload(url) {
    {
        var fileTemplate = "<div id=\"{{id}}\">";
        fileTemplate += "<div class=\"preview\"></div>";
        fileTemplate += "<div class=\"filename\">{{filename}}</div>";
        fileTemplate += "<a href=\"<?php echo base_url() ?>admin/galerija_slika_delete/tmp\"  class=\"image_delete\">Obriši Sliku</a>";
        fileTemplate += "</div>";

        function slugify(text) {
            text = text.replace(/[^-a-zA-Z0-9,&\s]+/ig, '');
            text = text.replace(/-/gi, "_");
            text = text.replace(/\s/gi, "-");
            return text;
        }
        $("#dropbox").html5Uploader({
            postUrl: url,
            onClientLoadStart: function (e, file, data) {
                var upload = $("#upload");
                if (upload.is(":hidden")) {
                    upload.show();
                }
                upload.append(fileTemplate.replace(/{{id}}/g, slugify(file.name)).replace(/{{filename}}/g, file.name));
                console.log(data);
            },
            onClientLoad: function (e, file) {
                $("#" + slugify(file.name))
                    .find(".preview")
                    .append("<img class=img_upload title=\"" + file.name + "\" src=\"" + e.target.result + "\" alt=\"\">")
                    .on('click', function () {
                    img_name = $(this).find('.img_upload').attr('title'),
                    url = '<?php echo base_url() ?>admin/galerija_naslovna_slika/' + img_name.replace(/\s/g, "_") + '/' + id;
                    $.post(url);
                });
                var img_delete = $('.image_delete');

                    delete_image(img_delete);
            },
            onServerLoad: function (e, file) {

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T22:26:31.523

我知道这是旧的，但我所做的是在`postURL`.

所以像：`/image_upload/212/`

您需要使用 apache`mod_rewrite`来访问您的 php 文件。然后您可以简单地查看请求路径以获取 ID。

或者另一种方法是将 ID 作为 POST var 传递。您可以有一个隐藏的“输入”，其中 id 作为值。

```
docid = $('#docid').val();

$.ajax({
url: '/upload.php',
type: "POST",
data: {'docid': docid},
    success: function(data, status, jqXHR) {
        set_status('info', 'Success!');
    },
    error: function(jqXHR, status, err) {
        set_status('danger', 'Error: ' + err + ' - ' + status);
    },
    complete: function(jqXHR, status) {

    }
}); 
```

# delphi - Synapse 和 OpenSSL Connect 无法在一个应用程序中运行

> ID：15685928
> 
> 赞同：1
> 
> 时间：2013-03-28T15:32:35.143
> 
> 标签：delphi, lazarus, delphi-5

我已经完成了所有的搜索，但找不到解决这个困扰我大约 5 个小时的奇怪问题的方法。我在 Lazarus 中启动了这个应用程序，然后把它带到了 D5pro 上，看看我是否能解决这个问题。认为这可能是拉撒路的“东西”。

在 D5 中，我有一个可以正常运行的应用程序（到目前为止一切正常），我决定尝试一些不同的外观和感觉方法，因此我将“项目另存为”到一个新文件夹中。然后我浏览了所有包含的单元并将它们保存到新文件夹中。我将两个 OpenSSL .DLL 复制到新文件夹中。进行了编译并运行，一切正常。嗯，差不多。

当我尝试新应用程序时，POP3 单元在“登录”时崩溃

我已经逐步完成，所有基本的登录内容、服务器、名称、SSL 参数等都与以前的版本相同。

我回到原来的应用程序并做了一个完整的构建，它仍然运行良好。我在新应用程序上做了一个完整的构建，它仍然在登录时崩溃。

它通过 pop3.Sock.SSLDoConnect() OK，但从 pop3.Login() 返回错误 10061，根据 BlckSock Synapse-Unit，这意味着“连接被拒绝”。

当它从此调用返回时 Result:=ssConnect(s, @name, SizeOfVarSin(name)); 我假设在.DLL中它的结果为-1，然后触发GetLastError，即“10061 - 连接被拒绝”

据我所知，这两个项目之间的一切都是相同的。所有库路径都在环境中，而不是在项目中。

有什么想法和建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:48:37.687

没有太多工作要做。你能在调试器中看到各种外部调用时刻的所有参数吗？

当然，编译器的更改可以使隐藏的错误浮出水面，就像优化一样。一个众所周知的区别是 temps 的生命周期可能会有所不同（请参见[此处](https://stackoverflow.com/questions/9592654/what-are-the-differences-between-implementation-of-interfaces-in-delphi-and-laza/9623502#9623502)）。

可能您需要首先确定定义差异。与 Delphi 一样，调试器在这里是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:28:37.920

好的，问题解决了。

Rufo 爵士，这是个好主意，但没有帮助，但感谢您的尝试。

在开始编译之前，我已将 ssleay32.dll 复制到新的应用程序文件夹中。它不起作用。我做了一个完整的构建，它仍然没有工作。

我决定删除 ssleay32.dll 和 libeay32.dll 并进行完整的构建。我运行它，当然它崩溃了，但这次我预料到了。

然后我将这两个 .ddl 复制回新的应用程序文件夹并进行了另一个完整的构建。

宾果问题解决了。看起来很奇怪，但它适用于 Lazarus 和 D5。与 .dll 链接到已编译的 .dcu 的方式有关。

在没有可用 .dll 的情况下进行构建清除了这一点。将 .dll 放回文件夹中，另一个 Build 将 .dll 链接正确包含到 .dcu 中。

啊啊啊啊啊:)

# xml - 在 XQuery 中访问节点

> ID：15685929
> 
> 赞同：0
> 
> 时间：2013-03-28T15:32:35.567
> 
> 标签：xml, xquery

我在访问 XML 文件中的节点时遇到了一个奇怪的问题。

如果我这样做（在我的 XQuery 文件中）：

```
return <result>$myfile/option[2]</result> 
```

但是，如果我尝试，它可以正常工作：

```
return <result>$myfile/option[$myfile/data(@index)]</result> 
```

它不起作用。的值为`$myfile/data(@index)`2。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:42:27.333

> 的值为`$myfile/data(@index)`2

我怀疑它是*字符串*“2”而不是*数字*2。尝试转换它

```
return <result>$myfile/option[xs:integer($myfile/data(@index))]</result> 
```

# android - 如何在 Android 上使用 MAC 访问身份验证对标头进行签名？

> ID：15685934
> 
> 赞同：0
> 
> 时间：2013-03-28T15:32:49.863
> 
> 标签：android, oauth, oauth-2.0

我正在尝试使用 Android 上的 MAC 访问身份验证来签署 http 标头。我正在使用位于此处的 IETF 草案 #2：

[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-02](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-02) (1)

使用草案的示例，变量是：

```
 MAC key identifier: h480djs93hd8
   MAC key: 489dks293j39
   MAC algorithm: hmac-sha-1
   Timestamp: 1336363200
   Nonce: dj83hs9s 
```

以下是规范化的字符串：

```
 1336363200\n
 dj83hs9s\n
 GET\n
 /resource/1?b=1&a=2\n
 example.com\n
 80\n
 \n 
```

我使用以下方法对mac头进行编码：

```
private String calculateMAC(final String macAlgorithm, final String normalizedString, final String keyString) {
    try {
        final SecretKeySpec keySpec = new SecretKeySpec((keyString).getBytes("UTF-8"), macAlgorithm);
        final Mac mac = Mac.getInstance(macAlgorithm);
        mac.init(keySpec);

        return Base64.encodeToString(mac.doFinal(normalizedString.getBytes("UTF-8")), Base64.NO_WRAP);
    } catch (final Exception e) {
        Log.e("Error", e.toString());
        return null;
    }
} 
```

我遇到的问题是草案说生成的 MAC 是“ `bhCQXTVyfj5cmA9uKkPFx1zeOXM=`”。但无论我在尝试什么（不同的编码、不同的库等），我总是有“ `6T3zZzy2Emppni6bzL7kdRxUWL4=`”。为什么？？

* * *

（1）最新草案（[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-03](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-03)）没有例子。所以更难跟随。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:32:49.863

我在两个不同的平台（php 和 C#）上尝试了相同的示例，但该示例似乎不正确（毕竟是草稿）。正确的输出确实是“ `6T3zZzy2Emppni6bzL7kdRxUWL4=`”。

[其他人也看到了同样的问题](http://www.ietf.org/mail-archive/web/oauth/current/msg08377.html)

# sql-server - 优化子查询的性能

> ID：15685939
> 
> 赞同：0
> 
> 时间：2013-03-28T15:32:59.363
> 
> 标签：sql-server, sql-server-2008, subquery, query-optimization

我从表中的第一个查询大约需要 40 秒并创建超过 80,000 行。我想按站点、序列、总计和任何操作系统版本获取 Windows 7 应用程序的计数。

这些子查询有效，但当然它们大大减慢了进程。运行时间为 3.5 小时。

有没有更有效的方法来做到这一点？

输出：

```
SoftwareName    Sequence    Site    Win7/site       Win7Installs/seq    TotWin7apps TotalInstalls
Adobe Acrobat       1       BKN         1                   5               626         7854
AutoCAD LT          1       BKN         1                   1               3           15
Adobe Acrobat       1       CTW         4                   5               626         7854
Adobe Captivate     1       CTW         1                   1               8           60 
```

询问：

```
WITH PCapps AS (
SELECT DISTINCT
    Computer,
    Sequence,
    Site,
    SoftwareName,
    OS
FROM table
)

SELECT DISTINCT
    SoftwareName,
    Sequence,
    Site,
    (SELECT COUNT(p1.SoftwareName) FROM PCapps p1 WHERE p1.SoftwareName = pc.Softwarename AND OS = 'Windows 7 Enterprise' AND p1.Site = pc.Site) as 'Win7/site',
    (SELECT COUNT(p1.SoftwareName) FROM PCapps p1 WHERE p1.SoftwareName = pc.Softwarename AND OS = 'Windows 7 Enterprise' AND p1.Sequence = pc.Sequence) as 'Win7Installs/seq',
    (SELECT COUNT(p2.SoftwareName) FROM PCapps p2 WHERE p2.SoftwareName = pc.Softwarename AND OS = 'Windows 7 Enterprise') as TotWin7apps,
    (SELECT COUNT(p3.SoftwareName) FROM PCapps p3 WHERE p3.SoftwareName = pc.SoftwareName) as TotalInstalls 
    FROM PCapps pc 
```

** 更新：

使用来自@Jason Carter 的提示，我创建了一些#temp 表并加入它们。结果在不到一分钟的时间内运行得非常快（不比初始查询长多少）。此方法与@JasonCarter 的解决方案略有不同，因为我按照他最初的提示创建#temp 表。我创建了几个#temp 表，每个表都包含 COUNT()。

```
SELECT DISTINCT
    Computer,
    Sequence,
    Site,
    SoftwareName,
    OS
INTO #PCapps
      FROM TABLE    

SELECT
    SoftwareName,
    Site,
    COUNT(SoftwareName) AS [SiteInstalls]
INTO #SiteInstalls
FROM #PCapps 
    WHERE OS = 'Windows 7 Enterprise'
    GROUP BY Site, SoftwareName

SELECT
    SoftwareName,
    Sequence,
    COUNT(SoftwareName) AS [SeqInstalls]
INTO #SeqInstalls
FROM #PCapps
    WHERE OS = 'Windows 7 Enterprise'
    GROUP BY Sequence, SoftwareName

SELECT
    SoftwareName,
    COUNT(SoftwareName) AS [Win7Installs]
INTO #Win7Installs
FROM #PCapps
    WHERE OS = 'Windows 7 Enterprise'
    GROUP BY SoftwareName

SELECT
    SoftwareName,
    COUNT(SoftwareName) AS [AppInstalls]
INTO #AppInstalls
FROM #PCapps
    GROUP BY SoftwareName   

SELECT
    pc.SoftwareName,
    pc.Sequence,
    pc.Site,
    sit7.SiteInstalls,
    seq7.SeqInstalls,
    w7.Win7Installs,
    ai.AppInstalls
    FROM #PCapps pc
    LEFT OUTER JOIN #SiteInstalls sit7 ON sit7.SoftwareName = pc.SoftwareName AND sit7.Site = pc.Site
    LEFT OUTER JOIN #SeqInstalls  seq7 ON seq7.SoftwareName = pc.SoftwareName AND seq7.Sequence = pc.Sequence
    LEFT OUTER JOIN #Win7Installs w7   ON   w7.SoftwareName = pc.SoftwareName
    LEFT OUTER JOIN #AppInstalls ai    ON   ai.Softwarename = pc.SoftwareName

DROP TABLE #PCapps
DROP TABLE #SiteInstalls
DROP TABLE #SeqInstalls
DROP TABLE #Win7Installs
DROP TABLE #AppInstalls 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:57:32.537

我会尝试首先将子查询运行到临时表中以收集您的计数，然后提取您的总计数。使用查询设置的方式，它将为每一行 PCapps 运行每个子查询一次，这就是它需要这么长时间的原因。

尝试这样的事情：

```
declare @t table (Computer varchar(10), Sequence int, Site varchar(3), SoftwareName varchar(20), OS varchar(20) )

insert into @t values
 ('C1',1,'BKN','Adobe Acrobat','Win7')
,('C2',1,'BKN','Adobe Acrobat','Win7')
,('C3',1,'BKN','Adobe Acrobat','Win7')
,('C1',1,'BKN','AutoCAD LT ','Win7')
,('C3',1,'BKN','AutoCAD LT ','Win7')
,('B1',2,'CTW','Adobe Acrobat','Win7')
,('B2',2,'CTW','Adobe Acrobat','Win7')
,('B3',3,'CTW','Adobe LT','Win7')
,('B4',3,'CTW','Adobe Acrobat','Win7')
,('A1',2,'CTW','Adobe Acrobat','Win7')
,('A2',2,'CTW','Adobe LT','Win7')
,('A3',2,'CTW','Adobe Acrobat','Win7')
,('X4',3,'CTW','Adobe Acrobat','WinXP')
,('X1',2,'CTW','Adobe Acrobat','WinXP')
,('X2',2,'CTW','Adobe LT','WinXP')
,('X3',2,'CTW','Adobe Acrobat','WinXP')
,('A4',2,'CTW','Adobe Acrobat','Win7');

SELECT 
    Site,
    OS,
    SoftwareName, 
    Sequence,
    COUNT(SoftwareName)  as 'Count'
into #SiteSpecific
FROM @t
group by Site, OS, SoftwareName, Sequence;

WITH PCapps AS (
SELECT DISTINCT
    Computer,
    Sequence,
    Site,
    SoftwareName,
    OS
FROM @t
)
SELECT 
    DISTINCT
    PC.SoftwareName,
    PC.Sequence,
    PC.Site,
    PerSeq.[Count] as 'Win7Installs/seq',
    PerSite.[Count] as TotWin7apps,
    total.[Count] as TotalInstalls 
FROM PCapps pc
inner join (select SoftwareName, Sequence, OS, sum([Count]) [Count] from #SiteSpecific group by SoftwareName, Sequence, OS) PerSeq 
    on PerSeq.SoftwareName = pc.Softwarename 
    AND PerSeq.Sequence = pc.Sequence
    AND PerSeq.OS = pc.OS
inner join (select SoftwareName, Site, OS, sum([Count]) [Count] from #SiteSpecific group by SoftwareName, Site, OS) PerSite 
    on PerSite.SoftwareName = pc.Softwarename 
    AND PerSite.Site = pc.Site
    AND PerSite.OS = pc.OS
inner join (select SoftwareName, sum([Count]) [Count] from #SiteSpecific group by SoftwareName) Total 
    on Total.SoftwareName = pc.Softwarename 
where Pc.OS='Win7'
order by SoftwareName, Sequence, Site 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:43:27.173

我真的很惊讶...优化器利用并行性使子查询非常高效。我用 120K 记录填充了一个虚拟表并尝试了以下操作。第三个查询只比第一个（你的）稍微高效一点，但代价是更复杂。我会保持原样。可能有更好的解决方案，但你的解决方案对我来说已经足够好了。你的处理这 80K 行需要多长时间？

```
WITH PCapps2 AS (
SELECT DISTINCT
    Computer,
    Sequence,
    Site,
    SoftwareName,
    OS
FROM pcapps
)
SELECT DISTINCT
    SoftwareName,
    Sequence,
    Site,
    (SELECT COUNT(p1.SoftwareName) FROM PCapps2 p1 WHERE p1.SoftwareName = pc.Softwarename AND OS = 'Windows 7 Enterprise' AND p1.Site = pc.Site) as 'Win7/site',
    (SELECT COUNT(p1.SoftwareName) FROM PCapps2 p1 WHERE p1.SoftwareName = pc.Softwarename AND OS = 'Windows 7 Enterprise' AND p1.Sequence = pc.Sequence) as 'Win7Installs/seq',
    (SELECT COUNT(p2.SoftwareName) FROM PCapps2 p2 WHERE p2.SoftwareName = pc.Softwarename AND OS = 'Windows 7 Enterprise') as TotWin7apps,
    (SELECT COUNT(p3.SoftwareName) FROM PCapps2 p3 WHERE p3.SoftwareName = pc.SoftwareName) as TotalInstalls 
    FROM PCapps2 pc

;WITH PCapps2 AS (
SELECT DISTINCT
    Computer,
    Sequence,
    Site,
    SoftwareName,
    OS
FROM pcapps
)
SELECT DISTINCT
    SoftwareName,
    Sequence,
    Site,
    COUNT(case when os = 'Windows 7 Enterprise' then 1 end) over (partition by pc.Softwarename,pc.Site) as 'Win7/site',
    COUNT(case when os = 'Windows 7 Enterprise' then 1 end) over (partition by pc.Softwarename,pc.Sequence) as 'Win7Installs/seq',
    COUNT(case when os = 'Windows 7 Enterprise' then 1 end) over (partition by pc.Softwarename) as TotWin7apps,
    COUNT(*) over (partition by pc.Softwarename) as TotalInstalls
    FROM PCapps2 pc

;WITH PCapps2 AS (
SELECT DISTINCT
    Computer,
    Sequence,
    Site,
    SoftwareName,
    OS
FROM pcapps
), a as (
    select softwarename, site, COUNT(*) as 'Win7/site'
    from pcapps2
    where os = 'Windows 7 Enterprise'
    group by softwarename, site
), b as (
    select softwarename, sequence, COUNT(*) as 'Win7Installs/seq'
    from pcapps2
    where os = 'Windows 7 Enterprise'
    group by softwarename, sequence
), c as (
    select softwarename, COUNT(case when os = 'Windows 7 Enterprise' then 1 end) as TotWin7apps, COUNT(*) as TotalInstalls
    from pcapps2
    group by softwarename
), d as (
    select distinct softwarename, sequence, site
    from    pcapps2
)
select d.*, isnull(a.[Win7/site], 0) as [Win7/site], isnull(b.[Win7Installs/seq],0) as [Win7Installs/seq] 
        , isnull(c.TotWin7apps,0) as TotWin7apps, isnull(c.TotalInstalls, 0) as TotalInstalls  
from    d
        left join a on d.softwarename = a.softwarename and d.site = a.site 
        left join b on d.softwarename = b.softwarename and d.sequence = b.sequence 
        left join c on d.softwarename = c.softwarename 
```

第一个查询：表'pcapps'。扫描计数 15，逻辑读取 6630，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。表“工作表”。扫描计数 0，逻辑读取 0，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。

第二个查询：表'pcapps'。扫描计数 3，逻辑读取 1326，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。表“工作表”。扫描计数 18，逻辑读取 1983591，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。

第三个查询：表'pcapps'。扫描计数 12，逻辑读取 5304，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。表“工作表”。扫描计数 0，逻辑读取 0，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。

# android - 来自内部存储的 Android 片段和图像有延迟

> ID：15685942
> 
> 赞同：0
> 
> 时间：2013-03-28T15:33:02.113
> 
> 标签：android, bitmap, android-fragments

我正在处理片段，一些片段可以包含图像。

我首先将图像下载到内部存储，然后当调用 oncreateview 时，我想在片段上显示图像。

我使用以下代码执行此操作：

```
Bitmap bitmap = BitmapFactory.decodeFile(getActivity().getFileStreamPath(image).getAbsolutePath());

    ((ImageView) rootView.findViewById(R.id.ivStory))
            .setImageBitmap(bitmap); 
```

问题是当我滑动到片段时它有一个延迟“大约 2 秒”..

我今天一直在搞乱 LRUcache，但它似乎不起作用..

有人有线索吗？图片是不是很大？因为它也应该在平板电脑上运行，所以它必须是一个很大的分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:37:15.213

问题是该`decodeFile`方法需要时间来执行。您应该`decodeFile`在单独的线程（而不是`UI-Thread`）上执行该方法，完成后使用 a`Handler`更新`UI`.

# html - 输入标签的 displayMember 和 valueMember

> ID：15685943
> 
> 赞同：0
> 
> 时间：2013-03-28T15:33:07.523
> 
> 标签：html, input

我想知道是否可以在文本类型的 HTML 输入元素中显示一个值并提交另一个值？

# c# - 将列表中的重复项目分组，并添加它们的总数

> ID：15685950
> 
> 赞同：1
> 
> 时间：2013-03-28T15:33:26.037
> 
> 标签：c#, duplicates

您好，我有一个列表，我正在尝试对重复项进行分组并添加它们的数量以将其与最大数量进行比较。我遇到的唯一问题是隔离重复项并添加它们的数量。我陷入了精神障碍，无法找出正确的方法来实现我正在尝试的目标。所以我希望有人能够指出我正确的方向并帮助我摆脱困境！

我正在检查重复项的属性是 ProductID

```
double qty = 0;
double totalQty = 0;
bool isQtyValid = true;

List<ShoppingCartDTO> shoppingList = ShoppingCart.Fetch(string.Format("WHERE SessionID='{0}'", Session["ID"]));
    foreach (ShoppingCartDTO temp in shoppingList)
    {
        qty =  temp.Quantity;
        totalQty += qty;
        isQtyValid = getCheckQty(totalQty, temp.ProuductID, temp.CustomerID);
        CheckOut.Enabled = isQtyValid;
        lblError.Visible = !isQtyValid;
    } 
```

如果可以进行更多解释，我可以尝试更好地解释，并在需要时提供更多代码。我感谢任何人的建议和帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:38:43.737

```
A.Intersect(B).Count; 
```

这能找出重复的项目数吗？您还可以为 ShoppingCartDTO 类实现 IEquatable 接口：

```
class ShoppingCartDTO : IEquatable<ShoppingCartDTO>
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:43:54.447

如果我理解正确：

```
var groupedList = shoppingList.GroupBy( item => item.[the property you want to group by on]);

foreach (var g in groupedList)
{
   var sum = g.Sum( i => i.[the property you want to sum]);
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:48:03.140

旧式解决方案，类似于。

```
List<ShoppingCartDTO> shoppingList = ShoppingCart.Fetch(string.Format("WHERE SessionID='{0}'", Session["ID"]));
    Dictionary<String, Double> groups = new Dictionary<String,Double>();
    foreach (ShoppingCartDTO temp in shoppingList)
    {
        String key = String.Format("{0}-{1}", temp.CustomnerID, temp.ProductID); 
        if (groups.ContainsKey(key))
        {
           groups[key] += temp.Quantity;
        }
        else
        {
           groups.Add(key, temp.Quantity);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:48:12.860

假设有一些属性定义了您的“重复”，例如`ProductId`：

```
var results = shoppingList.GroupBy(s => s.ProductID)
                          .Select(g => new {
                                               ProductID = g.Key,
                                               totalQty = g.Sum(I => i.Quantity)
                                           }
                                 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T15:48:51.707

你可以这样做：

```
var groups = shoppingList.GroupBy(e => e.ProductId).ToList();
shoppingList.Clear();
foreach (var group in groups)
{
    group.First().Quantity = group.Sum(e => e.Quantity);
    shoppingList.Add(group.First());
} 
```

运行后，`shoppingList`应该不包含重复项，并且`Quantity`所有重复项的值都将相加。

# php - 使用持久登录 Cookie 时如何检查 Cookie 令牌与 DB 中的 bcrypt-hashed 令牌？

> ID：15685951
> 
> 赞同：6
> 
> 时间：2013-03-28T15:33:28.807
> 
> 标签：php, mysql, cookies, login, bcrypt

在[这个流行](https://stackoverflow.com/a/477578/869849)的持久登录 Cookie 解决方案中，涉及生成一个随机的 128 位“令牌”以保存在用户的 Cookie 中，Jens Roland 建议：

> 并且**不要将持久登录 COOKIE（令牌）存储在您的数据库中，只存储它的哈希值！**登录令牌是密码等效的，因此如果攻击者掌握了您的数据库，他/她可以使用这些令牌登录到任何帐户，就像它们是明文登录密码组合一样。因此，在存储持久登录令牌时使用强加盐哈希（bcrypt / phpass）。

但是，当 bcrypting Cookie Token 总是会产生不同的结果（因为 bcrypting 总是使用随机盐）时，如何检查 Cookie Token 与 DB 中的 bcrypted Token 以确认 Cookie 登录是有效的？

换句话说，您不能只对 Cookie 令牌进行 bcrypt 并在数据库中查找匹配项，因为您永远找不到匹配项，那么您如何根据[推荐的解决方案](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)将其与数据库中的散列版本进行实际匹配（“The服务器保留一个数字->用户名关联表，查找该表以验证 cookie 的有效性。”）？

**编辑：**

请记住，根据上面链接的推荐解决方案，单个用户可以为*不同*的设备拥有**多个**Cookie/令牌。我提到这是因为提交了一个答案（该答案已被删除），假设每个用户只有一个令牌。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:15:23.193

如上一个答案中所述，bcrypt 将随机盐存储为哈希的一部分，因此数据库中的每个令牌条目都将包含`random_salt`和`hashed_token`。

在验证“记住我”登录 cookie（应由`userid`和组成`token`）时，您需要遍历该用户 ID 的每个令牌条目（通常只有一个条目，永远不会超过少数）并使用存储随机盐：

```
foreach (entry in stored_tokens_for_user) {
    if (entry.hashed_token == bcrypt(cookie.token, entry.random_salt))
        return true;
}
return false; 
```

（如果您的数据库在查询语法中内置了对 bcrypt 的支持，您可以创建一个准备好的语句来为您执行此操作）*

# r - R中两个坐标之间的关联

> ID：15685958
> 
> 赞同：1
> 
> 时间：2013-03-28T15:33:46.800
> 
> 标签：r, geolocation, geospatial, distance

我对空间数据有疑问。我需要从 NetCDF 文件中提取温度数据；然后我需要将给定纬度和经度的这个温度与包含在不同数据框中的另一组纬度和经度相关联。这是我用来提取变量的代码：

```
myfile <- nc_open(paste(wd, 'myfile.nc', sep=''))
timearr = ncvar_get(myfile, "time")  
temp <- ncvar_get(myfile, 'temp_srf')
lat <- ncvar_get(myfile, 'lat_rho')
lon <- ncvar_get(myfile, 'lon_rho')
dim(temp)

[1] 27 75 52         # which means: 27 longitude * 75 latitudes * 52 time steps 
```

我现在选择在温度的第一个时间步上工作。所以：

```
> t1 <- as.vector(temp[,,1]) 
```

然后我在第一步创建了一个包含 lat、lon 和 temperature 的 data.frame：

```
lat1 <- as.vector(lat)
lon1 <- as.vector(lon)
df1 <- as.data.frame(cbind(lon1, lat1, t1))
head(df1)

    lon1    lat1     t1
1 18.15338  40.48656 13.96225
2 18.24083  40.55126 14.36726
3 18.32845  40.61589 14.53822
4 18.41627  40.68045 14.78643
5 18.50427  40.74495 14.88624
6 18.59246  40.80938 14.95925 
```

在另一个数据框（df2）中，我有一些随机的纬度和经度点，我必须将其与前一个 data.frame 的最近纬度和经度相关联：

```
> df2 <- read.csv(paste(id, "myfile.csv", sep=""), header=TRUE, sep=",")
> head(df2)

    LONs     LATs
1 14.13189 43.41072
2 14.13342 43.34871
3 14.09980 43.40822
4 14.05338 43.72771
5 13.91311 43.88051
6 13.98500 43.91164 
```

我在想获得每个点之间的距离并获得最低的距离，但我不知道该怎么做。不确定是否有其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:57:57.353

我假设您的数据是投影坐标，并且您需要计算大圆距离。您可以自己使用公式（请参阅[**我的答案here**](https://stackoverflow.com/a/15570265/1478381)），也可以`rdist.earth`从包中使用`fields`。对于 中的每个条目`df2`，计算与 中所有条目的距离`df1`，找到该向量中最小距离的索引，并使用该索引选择适当的行`df1`以将 temp 分配给`df2`。它只需要一行（但将步骤与几个命令分开可能会更清楚）：

```
require( fields )
df2["Temp"] <- df1[ sapply( seq_len( nrow(df2) ) , function(x){ which.min( rdist.earth( df2[x,] , as.matrix( df1[ c("lon1" , "lat1") ] ) , miles = FALSE, R = 6371 ) ) } ) , "t1" ]

And the results using your data:
df1
#         lon1     lat1       t1
#   1 18.15338 40.48656 13.96225
#   2 18.24083 40.55126 14.36726
#   3 18.32845 40.61589 14.53822
#   4 18.41627 40.68045 14.78643
#   5 18.50427 40.74495 14.88624
#   6 18.59246 40.80938 14.95925

df2
#         LONs     LATs     Temp
#   1 14.13189 43.41072 13.96225
#   2 14.13342 43.34871 13.96225
#   3 14.09980 43.40822 13.96225
#   4 14.05338 43.72771 14.53822
#   5 13.91311 43.88051 14.53822
#   6 13.98500 43.91164 14.78643 
```

看起来您的距离至少相距一公里（在此数据中 > 300 公里），因此您应该使用大圆公式获得良好的准确性。如果它们小于 1 公里，您可能需要使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:03:02.793

我喜欢用于获取两个纬度/经度坐标之间距离的两个公式是[Haversine formula](http://www.movable-type.co.uk/scripts/latlong.html)和[Vincenty's formula](http://www.movable-type.co.uk/scripts/latlong-vincenty.html)。Haversine 公式是一个更简单的公式，它假设地球是一个完美的球体。您可能会获得几英尺的精度。如果您需要更高的准确度，请尝试 Vincenty 的公式。它是基于球体的，试图解释地球不完美的球体形状。链接上的示例不在 R 中，但在 R 中重写它们应该不难。

# json - 带有 json 和 jsonData 的 Ajax 发布数据存储

> ID：15685959
> 
> 赞同：0
> 
> 时间：2013-03-28T15:33:48.167
> 
> 标签：json, sencha-touch-2, http-post

我想写一个数据存储，通过ajax调用获取它的数据。ajax 调用必须是 http post 消息，并且必须包含一些 json 格式的数据。

这就是我到目前为止所拥有的：

```
Ext.define("MyApp.store.FileContent", {
    extend: "Ext.data.Store",
    model:'MyApp.model.FileContent',
    autoLoad: true,

    proxy: {
        actionMethods : {
            read   : 'POST'
        },
        type: 'ajax',
        defaultHeaders:{
            'Content-Type': 'application/json; charset=utf-8',
        },
        url : apiUrl + 'Files/GetFileInfo',
        jsonData : '{"file": "myfile"}'
    }
}); 
```

对 Web 服务的调用有效，但变量“文件”始终为空。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:34:45.160

通过编写自定义代理得到它

店铺：

```
Ext.define("MyApp.store.FileContent", {
    extend: "Ext.data.Store",
    model:'MyApp.model.FileContent',
    autoLoad: true,
    requires: ['MyApp.proxy.FileContent'],
    proxy: {
        type: 'FileContent'
    }
}); 
```

代理人：

```
Ext.define('MyApp.proxy.FileContent', {
    extend: 'Ext.data.proxy.Proxy',
    alias: 'proxy.FileContent',

    create: function (operation, callback, scope) {
             //Here goes your create logic
        },
        read: function (operation, callback, scope) {
            Ext.Ajax.request({
                url: apiUrl + 'Files/GetFileInfo',
                method: "POST",
                defaultHeaders:{
                    'Content-Type': 'application/json; charset=utf-8',
                },
                jsonData: '{"file": "myfile"}',
                success: function(response){
                    var json = JSON.parse(response.responseText);
                },
                failure: function(){                 
                    alert("fail");
                }
            });  
        },
        update: function (operation, callback, scope) {
             //Here goes your update logic
        },
        destroy: function (operation, callback, scope) {
             //Here goes your delete logic
        }
}); 
```

# c# - XML SelectNode() 不返回任何内容。为什么命名空间很重要？

> ID：15685960
> 
> 赞同：3
> 
> 时间：2013-03-28T15:33:51.190
> 
> 标签：c#, xml

我有代码来获取根元素的节点：

```
xmlNodes = rootElement.SelectNodes("DefinitionName"); 
```

它不返回存在的节点。在调试器中，我可以展开 rootElement 以找到 DefinitionName。显然问题在于该文件定义了一个命名空间（参见下面的 XML）。[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/4bektfx9%28v=vs.100%29.aspx)说我必须做这样的事情才能让节点返回：

注意：这与我的代码无关。这是来自 MSDN 的示例：

```
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("ab", "http://www.lucernepublishing.com");
XmlNodeList nodelist = doc.SelectNodes("//ab:book", nsmgr); 
```

我有两个问题：

1.  为什么命名空间很重要？如果我想要一个节点，并且它存在，就给我。
2.  我的应用程序处理许多 XML 文件。我应该如何指定命名空间（`nsmgr.AddNamespace()`）？我需要先解析文件才能得到它吗？

我情不自禁地觉得我正在采取漫长而充满焦虑的方式来做这件事。

这是 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <SessionStateInfo xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
    z:Id="1" z:Type="Company.Apps.MoreHere.Session.SessionStateInfo"
    z:Assembly="assembly info here"
    xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/"
    xmlns="http://schemas.datacontract.org/2004/07/MoreHere.Session">
      <CoaterNumber>25</CoaterNumber>
      <DefinitionName z:Id="2">Two Line</DefinitionName>
      <EnableManualMode>true</EnableManualMode> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:11:02.947

```
<SessionStateInfo ....
    xmlns="http://schemas.datacontract.org/2004/07/MoreHere.Session"> 
```

表示此元素及其所有后代都在`http://schemas.datacontract.org/2004/07/MoreHere.Session`命名空间中。由于 XPath 中的无前缀名称始终引用非命名空间中的元素*，因此*您需要将此 URI 绑定到一个前缀并在 XPath 中使用该前缀，即使文档中没有使用任何前缀。

```
XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("mhs", "http://schemas.datacontract.org/2004/07/MoreHere.Session");
xmlNodes = rootElement.SelectNodes("mhs:DefinitionName", nsmgr); 
```

如果您知道要查找的元素将始终具有相同的本地名称，但可能有也可能没有命名空间（或可能有不同的命名空间），那么您可以使用 XPath 技巧，例如

```
rootElement.SelectNodes("*[local-name() = 'DefinitionName']"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T16:13:03.373

这很重要，因为如果附加了命名空间，那么“DefinitionName”是不够的。想象一下，你得到了一个人的名单，所有人的名字都是约翰：

*   约翰·史密斯
*   约翰·琼斯
*   约翰墨菲

例如，您所做的相当于要求“John”而不是“John Smith”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:35:41.223

这不完全是问题的答案，但它可能是使用的替代解决方案`XDocument`

```
using System;
using System.Dynamic;
using System.Xml.Linq;
using Microsoft.CSharp.RuntimeBinder;
using System.Linq;

namespace ConsoleApplication8
{
    class Program
    {
        static void Main(string[] args)
        {
            XDocument document = XDocument.Load("SessionStateInfo.xml");
            XNamespace nameSpace = document.Root.GetDefaultNamespace();
            XElement node = document.Descendants(nameSpace + "DefinitionName").FirstOrDefault();   

            if (node != null)
            {
                Console.WriteLine("Cool! XDocument rocks! value: {0}", node.Value);
            }
            else
            {
                Console.WriteLine("Spoot! Didn't find it!");
            }
        }      
    }       
} 
```

无论是否指定了默认命名空间，这似乎都有效。

# java - 在没有 web.xml 的 Jersey 中使用 ContainerRequestFilter

> ID：15685962
> 
> 赞同：4
> 
> 时间：2013-03-28T15:33:55.123
> 
> 标签：java, jersey, glassfish-3

我试图拦截在 Glassfish 内运行的 Jersey 中的请求。

我创建了一个实现`ContainerRequestFilter`

```
package mycustom.api.rest.security;

@Provider
public class SecurityProvider implements ContainerRequestFilter {
  @Override
  public ContainerRequest filter(ContainerRequest request) {
    return request;
  }
} 
```

我的应用程序是使用`PackagesResourceConfig`.

当 Glassfish 启动时，Jerseys 会找到我的提供者：

```
INFO: Provider classes found:
  class mycustom.rest.security.SecurityProvider 
```

但它从来没有达到那种`filter`方法。我错过了什么？？

其他一切似乎都运行良好。我添加了几个`ContextResolver`提供者来进行 JSON 映射，它们工作正常。请求很好地访问了我的资源，它永远不会通过过滤器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:28:28.237

我不认为容器过滤器是作为提供者加载的。我认为您必须设置响应过滤器属性。奇怪的是 PackagesResourceConfig 没有 a`setProperty()`但你可以重载`getProperty()`and `getProperties()`：

```
public Object getProperty(String propertyName) {
  if(propertyName.equals(ResourceConfig.PROPERTY_CONTAINER_REQUEST_FILTERS)) {
    return new String[] {"mycustom.rest.security.SecurityProvider"};
  } else {
    return super.getProperty(propertyName);
  }
}

public Map<String,Object> getProperties() {
  propName = ResourceConfig.PROPERTY_CONTAINER_REQUEST_FILTERS;
  Map<String,Object> result = super.getProperties();
  result.put(propName,getProperty(propName));
  return result;
} 
```

实际上，更仔细地阅读 javadocs，看来首选方法是：

```
myConfig.getProperties().put(ResourceConfig.PROPERTY_CONTAINER_REQUEST_FILTERS,
                              new String [] {"mycustom.rest.security.SecurityProvider"}); 
```

# certificate - PayPal 证书无效或未找到

> ID：15685963
> 
> 赞同：0
> 
> 时间：2013-03-28T15:33:55.827
> 
> 标签：certificate, paypal

在过去的几天里，我一直致力于使用 PayPal SDK for PHP（它使用 REST API）实现支付集成。但是，我遇到了一些问题。

当付款人被重定向到 PayPal 网站以批准其付款并重定向回返回 URL 时，PayPal 在执行批准的付款时返回 HTTP 400 状态代码。执行支付的代码如下。请注意，$paymentId 是创建付款后返回的 ID，$payerId 是与批准一起发送的 PayerID。

```
$payment = Payment::get($paymentId);
$paymentExecution = new PaymentExecution();
$paymentExecution->setPayer_id($payerId);
$payment->execute($paymentExecution); 
```

它说付款无效：

> {"name":"PAYMENT_STATE_INVALID","message":"由于当前付款状态，此请求无效","information_link":" [https://developer.paypal.com/docs/api/#PAYMENT_STATE_INVALID](https://developer.paypal.com/docs/api/#PAYMENT_STATE_INVALID) " ,"debug_id":"223647e6e42fb"}

在弄清楚哪里出了问题（请注意，API 中包含的示例也给出了相同的错误），我在日志文件中偶然发现了以下行：

> PPHttpConnection：无效或未找到证书颁发机构 - 使用捆绑的 CA 证书文件重试

我检查以确保 SDK 找到了 SDK 中包含的证书。所以我的猜测是这是一个无效的证书。我现在有点不知道该怎么做。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-01T13:55:04.717

`state`在执行执行之前，您应该始终检查您的付款。该错误表示付款已经执行

> 付款状态。必须设置为下列之一： `created; approved; failed; canceled; expired; pending`. 由 PayPal 分配的值。

您可能在`Create`付款上运行了该方法，并且该`Create`方法执行与`Execute`.

# php - 我们应该怎么做才能获取多个 $_GET 值

> ID：15685967
> 
> 赞同：0
> 
> 时间：2013-03-28T15:34:02.523
> 
> 标签：php, forms, loops, get

如果 get(method) 表单的输出是这样的：

```
test.php?test=hi&test=how&test=why&test=where 
```

我们如何通过循环或任何其他 php 代码一次获取所有这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:37:32.857

在所示示例中，只会显示一个值 for `$_GET['test']`。那是因为参数名称必须是唯一的。但是，如果您想要一个值数组，`test`您可以使用这样的 URI：

```
test.php?test[]=hi&test[]=how&test[]=why&test[]=where 
```

请注意 中的数组表示`[]`法`test[]`。

这将构建一个“测试”数组，以便`$_GET['test'])`存储一个值数组，如下所示：

```
Array(
    0 => 'hi',
    1 => 'how',
    2 => 'why',
    3 => 'where'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:39:17.407

在这种情况下，您必须自己进行解析：

```
$qs = $_SERVER['QUERY_STRING'];
$items = array();

foreach (explode('&', $qs) as $pair) {
    $args = explode('=', $pair, 2);

    if (!isset($args[1])) {
        $args[1] = '';
    }

    $items[$args[0]][] = $args[1];
} 
```

如果您可以使用此查询字符串，这将简单得多：

```
test.php?test[]=hi&test[]=how&test[]=why&test[]=where 
```

在这种情况下，您可以直接使用`$_GET`。

# actionscript-3 - 设置矩形的最小和最大宽度

> ID：15685970
> 
> 赞同：1
> 
> 时间：2013-03-28T15:34:07.920
> 
> 标签：actionscript-3, prezi

如何在 AS3 中为（例如）屏幕宽度的值设置范围？我的意思是我有这段代码：

```
var myBounds:Rectangle=this.getBounds(stage);
if ((myBounds.width>650)&&(visibleArea.intersects(myBounds)))
{

  if(this.currentFrame==1)
     this.play();
}
else
{
    this.gotoAndStop(1);
}
return; 
```

我的电影只有在宽度超过 650 像素时才会开始。我不知道如何设置一个值范围，例如：250<.width<650，所以我的电影只有在这个数字之间的宽度时才会开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:40:44.183

```
if (stage.loaderInfo.width < 650 && stage.loaderInfo.width > 250) {
    play();
} else {
    gotoAndStop(1);
} 
```

您必须以某种间隔调用该函数，无论是按事件还是按 Enterframe。

# excel - 按工作表名称将多个工作表从一个excel文件导入多个表

> ID：15685974
> 
> 赞同：3
> 
> 时间：2013-03-28T15:34:19.767
> 
> 标签：excel, ms-access, vba

您好，感谢您的帮助。我正在整理一个看似简单的 Access 数据管理解决方案，供我们在这里的办公室使用，但我遇到了麻烦，因为我在 vba 方面的背景充其量是最少的。

我这里有两个相关但断开连接的 Access 2007 应用程序，我需要一个系统让用户轻松导入和导出此信息。我现在有一个脚本可以将应用程序中的所有表导出到单个 excel 文件中，每个表作为不同的工作表，问题是当我去导入时，它似乎只找到要导入的第一张表。

我希望找到一种方法来遍历每个工作表，获取工作表名称，然后根据工作表名称将该数据合并到表中。

澄清：

*   App A的多份副本被发送到各个部门
*   应用 A：用户在表格中输入信息
*   应用 A：用户按命令运行导出宏
*   Excel 文件创建为每个表作为具有匹配名称的工作表（例如 tblCourse、tblStudent、tblFaculty 等）
*   App B 的用户收到 Excel 电子表格
*   App B：用户按下命令运行导入脚本（这是我正在寻找的解决方案）
    *   提示用户输入文件位置
    *   导入脚本打开 excel 工作簿
    *   脚本遍历每个工作表，读取名称，并将数据导入到匹配名称的表中

提前感谢您提供的任何帮助，非常感谢。

## 编辑

工作脚本（非常感谢 grahamj42 的帮助）：

```
Private Sub Command101_Click()

'Dim excelapp As New Excel.Application
Dim excelApp As Object
Set excelApp = CreateObject("Excel.Application")
'Dim excelbook As New Excel.Workbook
Dim excelbook As Object
Set excelbook = excelApp.Workbooks.Add
'Dim excelsheet As New Excel.Worksheet
'Dim excelsheet As Object
'Set excelsheet = excelbook.Sheets
Dim intNoOfSheets As Integer, intCounter As Integer
Dim strFilePath As String, strLastDataColumn As String
Dim strLastDataRow As String, strLastDataCell As String

strFilePath = "C:\Users\UserName\Documents\Export\DatabaseExport03-28-2013.xlsx"

Set excelbook = excelApp.Workbooks.Open(strFilePath)

 intNoOfSheets = excelbook.worksheets.Count

 Dim CurrSheetName As String

 For intCounter = 1 To intNoOfSheets
  excelbook.worksheets(intCounter).Activate
   DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel9, ActiveSheet.Name, _
   strFilePath, True, _
   excelbook.Worksheets(intCounter).Name & "!" & _
   Replace(excelbook.Worksheets(intCounter).UsedRange.Address, "$", "")
 Next

excelbook.Close
excelApp.Quit
Set excelApp = Nothing

End Sub 
```

请注意，在 DoCmd.TransferSpreadsheet 命令中有一个 HasFieldNames 属性在此处设置为“True”，因为我的电子表格以字段名称作为列标题导出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:28:41.730

您在`Selection`不选择任何内容的情况下使用 将引用保存时工作表中的选定单元格。虽然我看不到，在您的情况下，为什么这应该在表格之外，但您可以在不选择任何内容的情况下使用以下方法做得更好`Worksheet.UsedRange`：

```
For intCounter = 1 To intNoOfSheets

  DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel9, Activesheet.Name, _
    strFilePath, True, _
    excelbook.Worksheets(intCounter).Name & "!" & _
    Replace(excelbook.Worksheets(intcounter).UsedRange.Address, "$", "")

Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T16:38:35.000

我对两段不同的代码做了一点组合，因为我不想硬编码位置或文件名。

```
Dim excelApp As Object
Dim excelbook As Object
Dim dlg As FileDialog
Dim StrFileName As String, intcounter, intNoOfSheets As Integer

Set excelApp = CreateObject("Excel.Application")
Set dlg = Application.FileDialog(msoFileDialogFilePicker)

With dlg
    .Title = "Select the Excel file to import"
    .AllowMultiSelect = False
    .Filters.Clear
    .Filters.Add "Excel Files", "*.xlsx", 1
    .Filters.Add "All Files", "*.*", 2

    If .Show = -1 Then

        StrFileName = .SelectedItems(1)
        Set excelbook = excelApp.Workbooks.Open(StrFileName)
        intNoOfSheets = excelbook.worksheets.Count
        'DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel8, "COR Daily",     StrFileName, True
        For intcounter = 1 To intNoOfSheets
            excelbook.worksheets(intcounter).Activate
            DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel8,     excelbook.Activesheet.Name, StrFileName, True, _
            excelbook.worksheets(intcounter).Name & "!" & _
            Replace(excelbook.worksheets(intcounter).UsedRange.Address, "$", "")

        Next

    Else
        Exit Function

    End If

End With
End Function 
```

# google-apps-script - Google 表单提交

> ID：15685975
> 
> 赞同：16
> 
> 时间：2013-03-28T15:34:20.090
> 
> 标签：google-apps-script, google-forms

如何引用默认的“提交”表单按钮以将“提交”*触发器*与另一个操作联系起来？谢谢你。

例如，使用 onsubmit，

```
Logger.log('do something'); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-08-13T20:46:26.470

我没有向电子表格添加脚本以接收来自表单的响应（如 Mogsdad 的回答），**而是添加了一个由表单的提交按钮触发的脚本。**

**第 1 步：**首先创建一个 Google 表单

![示例 Google 表单](../Images/d65ec4dc552ce671baaf38c00530a109.png)

**第2步：**然后从菜单中，单击**工具->脚本编辑器**

![表单编辑器菜单栏](../Images/c1f31da5a14040f33552e4ad87e445b0.png)

**第 3 步：**给你的函数起一个名字，比如`onSubmit()`

![脚本编辑器](../Images/c64b0412270dc805c44c1b8bd30c0e04.png)

**第 4 步：**编写一些代码以发送这样的电子邮件，然后单击“运行”按钮进行测试

```
function onSubmit() {
  MailApp.sendEmail("fred@email.com,alice@email.com",
                    "Subject",
                    "A new application has been submitted.\n\n" +
                    "Here is the link to all Applications:\n" +
                    "https://docs.google.com/spreadsheets/x/1-fdasjhFAKEfdaahfkhsa/",
                    {name:"From Name"});
} 
```

**第 5 步：**在 Script Editor 的菜单中，单击**Run**，或单击工具栏上的**Play**按钮来测试您的代码（例如，确保您收到电子邮件）

![菜单栏运行命令](../Images/e5e2df66bd4614fd2d27352e80086bbd.png)

**第 6 步：**在脚本编辑器的菜单中，单击**资源-> 当前项目的触发器**

![脚本编辑器菜单栏](../Images/4014b83bc4141d5ddb416326cbb57c81.png)

**第 7 步：**选择设置**事件** `From form` `On form submit`

![谷歌应用触发器](../Images/d2905ab35aa1c87221d7605ff48a77b4.png)

**第 8 步：**然后从表单编辑器的菜单中，单击**工具->脚本管理器**并确保您的脚本被选中

![脚本管理器](../Images/ecdcf2bb0c00a08a53df5b1c354ddcbe.png)

**第9步：**尝试表格。单击表单的提交按钮后，您应该会收到一封电子邮件。

![Google Apps 实时表单](../Images/809a6076d41e5cf95766fdba3d31d893.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-28T18:02:28.127

一个没有。表单服务不允许对产品进行任何编程控制。对于这个一般主题，问题跟踪器上有一个[未解决的问题。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2383)给它加星标以“投票”，并接收更新。

但是，您并没有迷路。在接收表单响应的电子表格中，您可以添加带有可安装触发器的脚本以触发“表单提交”。从那里，您可以对提交的数据做很多事情，包括根据需要记录...但对表单本身没有任何作用。

![触发器](../Images/3ed51ce51e33c6148d0da91f8a33f87d.png)

这些参考资料解释了触发器和事件。

*   [使用容器特定的可安装触发器](https://developers.google.com/apps-script/understanding_triggers)
*   [了解事件](https://developers.google.com/apps-script/understanding_events)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-30T17:36:26.123

这是一个古老的答案。

目前（2014 年 1 月）有两种 onSubmit 方式。一个是简单地创建一个函数 onSubmit() 据称（它对我不起作用......）仅在当前提交用户的许可下允许一组有限的操作。例如，您无法访问他提交的电子邮件，或修改下一次提交的基础表单。

然后是提交触发器，您可以添加并附加到任何函数，并在您自己的权限下做任何您想做的事情。看起来与上面答案中添加的触发器的屏幕截图相同，除了它的第一列显示表单脚本中的方法，下一列显示：From-Form，在第三列中您选择：提交时。

通常，您的方法将收到一个事件 e ，其 e.values 与电子表格中保存的值相同。所以

函数表单提交（e）{ ...

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-02T10:58:10.330

似乎有两个应用程序会触发代码：（1）表单和（2）链接到表单响应的电子表格。

(1) 正如上面 Mogsdad 和 JohnB 所指出的，由于事件没有发送到函数，因此无法通过表单以编程方式做很多事情。例如，可以发送一封电子邮件“提交表单”或“打开打开”，但没有事件对象，甚至无法记录数量或行数，也无法记录有关文档或提交的任何内容。

(2) 但是，如果电子表格链接到表单的响应，则可以在电子表格上设置触发器，其中可以访问事件以及行、列和其他数据。

从链接的响应谷歌电子表格：

*   第 1 步：工具 > 脚本编辑器
*   第二步：编写一些代码，例如：

代码.gs：

```
function onSpreadsheetSubmit(e) {
     var row = e.range.getRow();
     MailApp.sendEmail("me@example.com",
                "Your subject, rows: "+ row,
                "A new application has been submitted on row: "+
                row,
                {name:"From your friendly spreadsheet"});
} 
```

*   第 3 步：运行 > 运行函数 > onSpreadsheetSubmit（或 |> 图标）
    *   该事件可能没有实际行，因为测试与实际提交无关。
*   第 4 步：系统会要求您选择用户并进行身份验证
*   第 5 步：编辑 > 当前项目的触发器（或类似时钟的图标）
*   第 6 步：添加新触发器
*   第 7 步：在电子表格提交 | 来自电子表格 | 在表单提交时
*   第 8 步：验证并保存（或反向）
*   第 9 步：通过等待（或执行）真实的表单提交进行测试
*   第 10 步：检查您的电子邮件

欲了解更多信息：[https ://developers.google.com/apps-script/guides/triggers/events#google_sheets_events](https://developers.google.com/apps-script/guides/triggers/events#google_sheets_events)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-02T10:03:42.017

上面的 JohnB 的 HOWTO 非常好。更新（2017 年 11 月）：

*   第 2 步：“脚本编辑器...”位于表单右上角的垂直“...”汉堡菜单中
*   第 6 步：在（类似时钟的图标）（上面显示的第二个图标）中找到“项目触发器”。
*   Step 7: 点击“Add a new trigger”，忽略“no myFunctions”警告。
*   第8步：似乎不存在，可能没有必要，对我有用。

上述许多步骤都需要表单所有者的验证/接受。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-27T08:04:43.830

我建议使用表单中的触发器。在您的表单中打开脚本编辑器并粘贴代码：

```
function onFormSubmit(e) {  
  // for tests
  if (!e) { 
    // test object
    var form = FormApp.getActiveForm()
    var responses = form.getResponses();
    e = {"authMode":"FULL",
         "response": responses[responses.length - 1], // last response
         "source": form,
         "triggerUid":"5125265"};
  };
  // do your job here
  try {
    // paste useful code here...
    //
    //
  }
  catch (err) {
    MailApp.sendEmail("testemail@test.com",
                      "Error in the app",
                      "New error, please check.\n\n" +
                      "Here is the event object:\n" +
                      e + "\n" + 
                      JSON.stringify(e) + "\n\n" + 
                      "Here's an error:\n" + err,
                      {name:"From Name"});     
    throw err;  
  }
  return 0;   
} 
```

将此功能设置为可安装触发器。

参考：

*   [https://developers.google.com/apps-script/reference/forms/form-response](https://developers.google.com/apps-script/reference/forms/form-response)
*   [https://developers.google.com/apps-script/guides/triggers/installable](https://developers.google.com/apps-script/guides/triggers/installable)
*   [https://webapps.stackexchange.com/questions/112123/how-do-you-create-an-installable-trigger-for-a-google-apps-script](https://webapps.stackexchange.com/questions/112123/how-do-you-create-an-installable-trigger-for-a-google-apps-script)

# php - 错误 WHERE SQL

> ID：15685980
> 
> 赞同：0
> 
> 时间：2013-03-28T15:34:46.550
> 
> 标签：php, mysql, sql, where

```
$query_user = "SELECT camp FROM $username WHERE camp != 'NULL'";
$query_user = mysql_query ($query_user, $conn_host_user) or die (mysql_error()); 
```

说：你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE camp != 'NULL'' 附近使用正确的语法

我不明白，因为代码可以完美地工作，但是这么说，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:36:04.127

您应该使用以下内容：

```
WHERE camp IS NOT NULL 
```

所以您的查询将是：

```
SELECT camp 
FROM $username 
WHERE camp IS NOT NULL 
```

编辑，如果您的表格中有特殊字符，那么您将需要在名称周围使用反引号：

```
SELECT camp 
FROM `$username`
WHERE camp IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:36:34.590

为什么将 NULL 放在引号中？

$query_user = "从用户名中选择 photo_profile，其中 photo_profile 不为空";

$query_user = mysql_query ($query_user, $conn_host_user) 或死 (mysql_error());

还假设名称名称错误并删除 $ - 但这可能是正确的？？？

# javascript - 居中响应式谷歌地图

> ID：15685981
> 
> 赞同：2
> 
> 时间：2013-03-28T15:34:46.937
> 
> 标签：javascript, jquery, google-maps

从这个[jsFiddle可以看出，由于](http://jsfiddle.net/utkec/)[这个堆栈溢出问题](https://stackoverflow.com/questions/12676725/responsive-iframe-google-maps-and-weird-resizing)，我有一个响应式谷歌地图。

现在的问题是让地图在不同的视口和浏览器调整大小时保持在标记的中心。

我在这里找到了以下代码[的答案：](https://stackoverflow.com/questions/8792676/center-google-maps-v3-on-browser-resize-responsive)

```
google.maps.event.addDomListener(window, 'resize', function() {
map.setCenter(homeLatlng);
}); 
```

但是，由于我对 jQuery 和 javascript 仍然不是很好，我不知道如何应用事件侦听器。

有谁知道如何应用事件监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:50:52.187

我认为您的第二个代码片段不会与第一个代码片段一起使用，因为您正在使用 iFrame 嵌入地图。这意味着您无法访问地图以通过其 API 操作它（这是第二个代码片段试图做的事情）。

我建议您查看[Google maps API 3 入门指南](https://developers.google.com/maps/documentation/javascript/tutorial)，该指南将为您提供开始所需的所有信息。您应该能够将“hello world”示例与您的响应式 CSS 和上面的事件处理程序结合起来，以使地图完全按照您的意愿行事。

这是一个非常直观的 API，文档也很棒，所以我认为你不会有任何麻烦。如果您确实遇到困难，您确切知道该去哪里！

# python - 从 Python 发送文件到 OneNote

> ID：15685986
> 
> 赞同：0
> 
> 时间：2013-03-28T15:34:57.710
> 
> 标签：python, onenote, comobject, com-object

是否可以从 Python 向 Microsoft OneNote 发送文件？（也许使用它的 COM 对象？）我不需要将它存储在特定的笔记本或页面中，我只希望 OneNote 弹出一个窗口，我可以在其中选择目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:36:12.220

我用一个简单的谷歌找到了几个链接...... [http://blogs.msdn.com/b/descapa/archive/2011/06/16/onenote-amp-python-using-onenote-com-api-with-python .aspx](http://blogs.msdn.com/b/descapa/archive/2011/06/16/onenote-amp-python-using-onenote-com-api-with-python.aspx)例如。那些没有工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T22:56:10.600

这些博客不再链接在网站上。但这里是对应的[GitHub Repo](https://github.com/varunsrin/one-py)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-02T21:21:21.647

此代码将 PDF 文件发送到 OneNote 打印机。

```
import win32print
import subprocess
import time
pdf_file  = 'D:\d1\d1.pdf'
acrobat = 'C:\Program Files (x86)\Adobe\Acrobat Reader DC\Reader\AcroRd32.exe'
name = win32print.GetDefaultPrinter()
cmd = '"{}" /n /h /s /o  /t "{}" "{}"'.format(acrobat, pdf_file, name)
proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

# javascript - 如何在节点 js 中管理内存

> ID：15685988
> 
> 赞同：0
> 
> 时间：2013-03-28T15:35:04.233
> 
> 标签：javascript, node.js, caching, memory-management, memory-leaks

我正在编写一个 node.js 软件模块，它在对象映射中存储了许多不同长度的字符串。这本质上是作为我整个软件的内存缓存。

我想知道如何解释这样一个事实，即我的应用程序运行的时间越长，就会用完更多的内存，并且我理解节点进程默认情况下具有 v8 引擎施加的内存限制。

我已经放置了代码，该代码会在一段时间后删除旧的缓存条目，但这并不能防止在短时间内放置大量缓存条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:43:48.963

如前所述`dm03514`，使用专用的缓存组件。Memcached 会为你做这件事，Redis 也一样。

您将面临的主要问题是失效，这两者都允许您设置密钥的到期时间。

# java - Android Sqlite3 - 由命令行创建的列，但不是来自我的 Android 代码

> ID：15685989
> 
> 赞同：0
> 
> 时间：2013-03-28T15:35:12.157
> 
> 标签：java, android, sqlite

我正在开发一个具有内部 Sqlite 数据库的项目。我通过 shell 添加了一个新表（**Table1**），其中包含 1 列（**column1**），并通过 android 在其中插入和删除了一些新值。我尝试通过命令行添加两个新列**column2**和**column3**并通过 shell 调用它：

```
**PRAGMA table_info(Table1);** 
```

我看到两个新列的创建是正确的，因为我得到了这个输出：

```
*0|column1|varchar(20)|1||1
1|column2|varchar(255)|1||0
2|column3|varchar(255)|1||0* 
```

美好的。呼吁

```
**cursor.getColumnIndex("column1"));** 
```

继续正常，但传递另一个参数，如下所示：

```
**cursor.getColumnIndex("column2"));** 
```

正在返回**-1**，例如尚未创建此列。所以相同的数据库，但shell和android之间的区别。有什么提示可以理解什么是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:43:24.853

> 有什么提示可以理解什么是错的？

问题可能与 db 和 cursor 有关。

但是作为我的建议，如果您想升级 db（不同的版本号），那么这意味着执行一些更改（添加/删除/修改列、关系等），您应该使用[`onUpgrade()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade)直接指定用于以下目的的方法你的，或者也有可能使用经典`ALTER TABLE`条款。

我不建议您`PRAGMA`通过 shell 使用。

## 笔记：

对于“保证”，请尝试在您的应用程序中执行简单查询：

```
String query = "pragma table_info(Table1)";
c = db.rawQuery(query, null);
if (c.moveToFirst()) {
   do {
      String name = c.getString(c.getColumnIndex("name"));
      String type = c.getString(c.getColumnIndex("type"));
      Log.i("Information", name + " " + type);
   } while (c.moveToNext());
} 
```

通过这个你可以找到你的问题所在。如果它只显示一列，则问题是 db. 如果没有，问题是光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:57:21.583

现在可以了。我忘记编辑`columns`传递给此方法的参数，该方法返回`Cursor`.

```
 db.query(); 
```

其他答案有助于解决这个问题。

# html - 如何在水平导航菜单中将文本居中放置在图像上？

> ID：15685990
> 
> 赞同：0
> 
> 时间：2013-03-28T15:35:14.177
> 
> 标签：html, css

修复：我只需要将“float:left”应用于“li”元素而不是 imgs。谢谢！

我有一个水平导航菜单，我正在努力让它在所有浏览器中工作。我在这里创建了一个小提琴：

[http://jsfiddle.net/yTACT/](http://jsfiddle.net/yTACT/)

它在 Chrome、Safari 和 Opera 中运行良好。但是在 Firefox 和 Internet Explorer 中，文本没有正确地居中于每个按钮上。相反，文本从第二个按钮开始并向右溢出。

任何人都可以找到解决方法吗？

HTML

```
<div id="nav">

<ul>
  <li><a href="index.htm"><span>HOME</span><img src="http://www.cawyatt.co.uk/home-button.png" alt="Website Navigation. Home Button" title="Home" height="115" width="120" /></a></li>
  <li><a href="how-use-services.htm"><span>HOW TO USE OUR SERVICES</span><img src="http://www.cawyatt.co.uk/how-button.png" alt="Website Navigation. How To Use Our Services Button" title="How To Use Our Services" height="115" width="120" /></a></li>
  <li><a href="playstation-repair.htm"><span>PLAYSTATION REPAIR</span><img src="http://www.cawyatt.co.uk/playstation-button.png" alt="Website Navigation. Playstation Repair Button" title="Playstation Repair" height="115" width="120" /></a></li>
  <li><a href="xbox-repair.htm"><span>XBOX REPAIR</span><img src="http://www.cawyatt.co.uk/xbox-button.png" alt="Website Navigation. Xbox Repair Button" title="Xbox Repair" height="115" width="120" /></a></li>
  <li><a href="wii-repair.htm"><span>WII REPAIR</span><img src="http://www.cawyatt.co.uk/wii-button.png" alt="Website Navigation. Wii Repair Button" title="Wii Repair" height="115" width="120" /></a></li>
  <li><a href="customer-reviews.htm"><span>CUSTOMER REVIEWS</span><img src="http://www.cawyatt.co.uk/reviews-button.png" alt="Website Navigation. Customer Reviews Button" title="Customer Reviews" height="115" width="120" /></a></li>
  <li><a href="location-map.htm"><span>LOCATION AND MAP</span><img src="http://www.cawyatt.co.uk/map-button.png" alt="Website Navigation. Location And Map Button" title="Location and Map" height="115" width="120" /></a></li>
  <li><a href="contact.htm"><span>CONTACT US</span><img src="http://www.cawyatt.co.uk/contact-button.png" alt="Website Navigation. Contact Us Button" title="Contact Us" height="115" width="120" /></a></li>
</ul> 
```

CSS

```
ul, ol, dl {
padding:0;
margin:0;
list-style:none;
}

#nav {
position:relative;
width:960px;
height:115px;
margin-bottom:10px;
background-image: url(http://www.cawyatt.co.uk/nav-bg.png);
}

#nav li a span {  
position:absolute;
width: 120px; 
top: 70px; 
text-align:center;
z-index:2;
font:12px Verdana, Arial, Helvetica, sans-serif;
color:#fff;
}

#nav li a img {
float:left;
-webkit-transition:opacity 0.7s ease-in-out;
-moz-transition:opacity 0.7s ease-in-out;
-o-transition:opacity 0.7s ease-in-out;
transition:opacity 0.7s ease-in-out;
}

#nav li a:hover img {
opacity:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:44:36.747

开启`#nav li{ position: relative; }`和开启`li img{ left: 0;}`

这是代码。[http://jsfiddle.net/yTACT/8/](http://jsfiddle.net/yTACT/8/)

# javascript - 从选择元素返回 SelectedIndex

> ID：15685992
> 
> 赞同：1
> 
> 时间：2013-03-28T15:35:21.130
> 
> 标签：javascript, jquery, select, selectedindex

如果没有选择任何内容，是否有可能`selectedIndex`返回 -1，而不是位置 0 的元素文本。

`selectedIndex`即使未选择任何内容，也返回 0。

```
<select id="qwe" name="qwe">
    <option>11</option>
    <option>22</option>
</select>   

document.someForm.qwe.value
//returns 11

$('#qwe option:selected').val()
//returns 11

<select id="qwe" name="qwe">
    <option selected="false">11</option>
    <option>22</option>
</select>   
$('#qwe option:selected').val()
//returns 11

<select id="qwe" name="qwe">
    <option selected="false">11</option>
    <option selected="false">22</option>
</select>   
$('#qwe option:selected').val()
//returns 22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:48:32.967

无需添加默认的第一个选项...只需使用[`.prop()`](http://api.jquery.com/prop/#prop2)并更改`selectedIndex`：

```
$('#qwe').prop('selectedIndex', -1); 
```

演示：http: [//jsfiddle.net/dirtyd77/j76yH/2/](http://jsfiddle.net/dirtyd77/j76yH/2/)

如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T15:37:05.093

选择框必须始终选择一个值（默认情况下为第一个选项）。如果您想要这样的行为，只需在列表顶部添加一个空选项，使用您想要的任何值（例如 -1 ）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T15:43:12.117

这个怎么样？

```
 <select id="demo">
      <option value="-1">---</option>
      <option value="1">1</option>
      <option value="2">1</option>
    </select> 
```

正如 hexblot 所说，每个选择框都有一个选定的值。总是.. ;）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T15:43:56.960

尝试使用以下语句：

```
if ($('#qwe option[selected="selected"]').val() === undefined) return -1; 
```

# php - 如何从具有多个选择的复选框中获取输入值？

> ID：15685997
> 
> 赞同：0
> 
> 时间：2013-03-28T15:35:41.280
> 
> 标签：php, select, smarty, options

我有一个脚本，我在其中使用 PHP 和 Smarty。我只想通过一个带有多个选择选项的值的多个复选框来拯救一个变量。我该怎么做呢？

下面是当前的结构，但是当我点击复选框的时候并没有带上selects的值`name = "orcar"`

```
{foreach from=$planes item=plane}
<tr>
<td><label class="checkbox"><i class="icon icon-hand-right"></i>                
<input name="orcar" type="checkbox"/></td></label>                                  
<td><select class="input-medium"><option>{$plane.model}</option></select></td>
<td><select class="input-large">
  <option>{$anv1}</option>
  <option>{$anv2}</option>
  <option>{$anv3}</option>
  <option>{$anv4}</option>                  
</select></td>
<td><select class="input-medium">
  <option>{$eng1}</option>
  <option>{$eng2}</option>
  <option>{$eng3}</option>
  <option>{$eng4}</option>          
</select></td>                                  
</tr>
{/foreach} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:41:21.797

您的选择元素没有`name`属性。您需要这些才能发布数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:43:52.353

是的，这是真的，您的输入没有名称。第二点，如果您将相同的名称放在两个不同的输入中，您将得到一个包含答案的数组。