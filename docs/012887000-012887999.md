# StackOverflow 问答 12887000-12887999

# c++ - 使用 boost 将非平行边图保存到 graphml 文件

> ID：12887008
> 
> 赞同：1
> 
> 时间：2012-10-14T22:04:55.013
> 
> 标签：c++, boost-graph

以下代码将图形保存到 graphml 文件中。有用！。但是当我替换`typedef adjacency_list< vecS, vecS, directedS,`为`typedef adjacency_list< setS, setS, directedS,`没有重复的顶点或边插入到图中时，它会抱怨。

```
#include <boost/graph/graphml.hpp>

using namespace std;
typedef struct {
  string name;
  string label;
} vertex_type_t;

int main(int,char*[])
{

  using namespace boost;

  typedef adjacency_list< vecS, vecS, directedS, 
      vertex_type_t > graph_t;

  graph_t g;
  graph_t::vertex_descriptor v1 = add_vertex(g);
  graph_t::vertex_descriptor v2 = add_vertex(g);

  dynamic_properties dp;
  dp.property("name", get(&vertex_type_t::name, g));

  write_graphml(std::cout, g, dp, true);

  return 0;
} 
```

我不能从错误中得到太多。我相信以下是主要错误。

```
/usr/include/boost/graph/graphml.hpp: In function ‘void boost::write_graphml(std::ostream&, const Graph&, VertexIndexMap, const boost::dynamic_properties&, bool) [with Graph = boost::adjacency_list<boost::setS, boost::setS, boost::directedS, vertex_type_t>, VertexIndexMap = boost::adj_list_vertex_property_map<boost::adjacency_list<boost::setS, boost::setS, boost::directedS, vertex_type_t>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t>, std::ostream = std::basic_ostream<char>]’:
/usr/include/boost/graph/graphml.hpp:345:5:   instantiated from ‘void boost::write_graphml(std::ostream&, const Graph&, const boost::dynamic_properties&, bool) [with Graph = boost::adjacency_list<boost::setS, boost::setS, boost::directedS, vertex_type_t>, std::ostream = std::basic_ostream<char>]’
write_graphviz.cpp:24:39:   instantiated from here
/usr/include/boost/graph/graphml.hpp:301:9: error: no match for ‘operator<<’ in ‘std::operator<< [with _Traits = std::char_traits<char>]((* & out), ((const char*)"    <node id=\"n")) << boost::get [with PropertyMap = boost::adj_list_vertex_property_map<boost::adjacency_list<boost::setS, boost::setS, boost::directedS, vertex_type_t>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t>, Reference = const boost::detail::error_property_not_found&, K = void*]((*(const boost::put_get_helper<const boost::detail::error_property_not_found&, boost::adj_list_vertex_property_map<boost::adjacency_list<boost::setS, boost::setS, boost::directedS, vertex_type_t>, boost::detail::error_property_not_found, const boost::detail::error_property_not_found&, boost::vertex_index_t> >*)(& vertex_index)), (* & v.std::_Rb_tree_const_iterator<_Tp>::operator* [with _Tp = void*, std::_Rb_tree_const_iterator<_Tp>::reference = void* const&]()))’
/usr/include/boost/graph/graphml.hpp:301:9: note: candidates are:
/usr/include/c++/4.6/ostream:110:7: note: std::basic_ostream<_CharT, _Traits>::__ostream_type& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ostream<_CharT, _Traits>::__ostream_type& (*)(std::basic_ostream<_CharT, _Traits>::__ostream_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_ostream<_CharT, _Traits>::__ostream_type = std::basic_ostream<char>]
/usr/include/c++/4.6/ostream:110:7: note:   no known conversion for argument 1 from ‘const boost::detail::error_property_not_found’ to ‘std::basic_ostream<char>::__ostream_type& (*)(std::basic_ostream<char>::__ostream_type&) {aka std::basic_ostream<char>& (*)(std::basic_ostream<char>&)}’
/usr/include/c++/4.6/ostream:119:7: note: std::basic_ostream<_CharT, _Traits>::__ostream_type& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ostream<_CharT, _Traits>::__ios_type& (*)(std::basic_ostream<_CharT, _Traits>::__ios_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_ostream<_CharT, _Traits>::__ostream_type = std::basic_ostream<char>, std::basic_ostream<_CharT, _Traits>::__ios_type = std::basic_ios<char>] 
```

我真的很想用 setS 作为边缘容器。我不确定如何修改该程序以使其开始工作，因为错误消息对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:11:22.293

问题是[`write_graphml`](http://www.boost.org/libs/graph/doc/write_graphml.html)在你的图中需要一个 VertexIndexMap 并且只有`adjacency_list`s`VertexList=vecS`有一个默认创建的。`listS`如果您使用or ，您必须自己创建一个`setS`。

> 我真的很想用 setS 作为边缘容器。

如果您只需要在您的中使用`setS`，您`OutEdgeList`可以简单地使用：

```
typedef adjacency_list< setS, vecS, directedS, 
  vertex_type_t > graph_t; 
```

如果您必须同时使用`setS`两者，那么您的程序应该是（基于[此答案](https://stackoverflow.com/a/8555863/1252091)）：

```
#include <boost/graph/graphml.hpp>
#include <boost/graph/iteration_macros.hpp>

#include <map>

using namespace std;
typedef struct
{
    string name;
    string label;
} vertex_type_t;

int main ( int, char*[] )
{

    using namespace boost;

    typedef adjacency_list < setS, vecS, directedS,
            vertex_type_t > graph_t;

    typedef graph_t::vertex_descriptor NodeID; //define your Vertex Index Map
    typedef std::map<NodeID, size_t> IndexMap;
    IndexMap mapIndex;
    boost::associative_property_map<IndexMap> propmapIndex ( mapIndex );

    graph_t g;
    graph_t::vertex_descriptor v1 = add_vertex ( g );
    graph_t::vertex_descriptor v2 = add_vertex ( g );

    int i = 0;                                  //fill your Vertex Index Map
    BGL_FORALL_VERTICES ( v, g, graph_t )
    {
        put ( propmapIndex, v, i++ );
    }

    g[v1].name="FirstVertex";
    g[v2].name="SecondVertex";

    dynamic_properties dp;
    dp.property ( "name", get ( &vertex_type_t::name, g ) );

    write_graphml ( std::cout, g, propmapIndex, dp, true );

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:29:19.533

我的第一个想法是新的图形类型（带有 setS）不满足 write_graphml(..) 函数的要求：http: [//www.boost.org/doc/libs/1_51_0/libs/graph/doc/write_graphml .html](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/write_graphml.html)

它声明“图形的类型必须是 VertexListGraph 的模型”。它在这里描述：http: [//www.boost.org/doc/libs/1_51_0/libs/graph/doc/VertexListGraph.html](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/VertexListGraph.html)

# objective-c - 使用 LAPACK 求解 Ax=B，其中 x >= 0

> ID：12887010
> 
> 赞同：1
> 
> 时间：2012-10-14T22:04:57.953
> 
> 标签：objective-c, ios, linear-algebra, lapack, accelerate-framework

我目前正在开发一个处理水中添加化学物质的 iOS 应用程序。为了找到尽可能少的加法，我正在求解 Ax=B，其中 A 是 6x6 矩阵，B 是一列。据我一直在阅读，加速框架中的 LAPACK 是处理此问题的最佳方法。我已经能够使用 DGESV_ 使它适用于小的添加，但较大的添加对 x 有一些负值。这是一个问题，因为您不能添加负量的化学物质。

所以我需要知道的是 LAPACK 中是否有一个函数可以让我找到 Ax=B 的最小解，其中 x 总是大于或等于 0？如果没有，是否有替代解决方案（除了自己做数学）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:48:48.533

除非 A 秩不足，否则 A`Ax = B`平方的解是唯一的。所以没有办法摆脱答案中的负面成分。

如果您假设 A 和 B 可能包含导致负分量的错误，但希望找到包含所有非负分量的“附近”解决方案，那么您可以将其转换为：

```
minimize |Ax - b|  subject to x >= 0 
```

这是一个二次程序。有一些库可以解决这些问题，但 LAPACK 不是其中之一。

**编辑**

你的矩阵是满秩的。 [Wolfram Alpha](http://www.wolframalpha.com/)非常适合解决这样的小问题。你的 6x6 的行列式是 5x10^11，所以它的条件很好。

我不是 QP 方面的专家，但是这个有特殊的结构。对于标准形式（参见[维基百科的符号](http://en.wikipedia.org/wiki/Quadratic_programming)），重写为：

```
minimize ( x'(A'A)x + (-2b'A)x )  subject to x >= 0 
```

这里的二次系数矩阵`Q = A'A`是对称正定的，这（如果我正确地回忆了我的矩阵代数）使系统凸出并且更容易解决：保证了一个单一的全局解决方案。注意`c = -2b'A`。

[这是 QP 库的页面](http://www.numerical.rl.ac.uk/qp/qp.html)，一些在 C 中，一些针对凸情况进行了优化。也许其中之一会为您工作。

# css - 将水平列表放置在 div 的底部边界

> ID：12887012
> 
> 赞同：0
> 
> 时间：2012-10-14T22:05:06.383
> 
> 标签：css, html

我在 div 的结束标记之前有一个水平无序列表。名单被放置在边界上。现在我尝试添加`border-bottom: 1.5px solid #b9b7b7;`到 div，列表只是从边界向上移动，好像 div 底部边框和列表之间有一个填充，但我的 css 中没有这样的填充。我该怎么做才能将底部边框添加到父 div 并仍然将最后一个子元素放置在父 div 的底部边界？

**编辑：** html

```
<div id="banner"><img src="images/banner.gif" width="450px" height="80px" alt="parul library" />
 <div id="navigation_panel">
   <ul id="buttonlist">
     <li class="navbuttons">Home</li>
     <li class="navbuttons">About us</li>
     <li class="navbuttons">New Releases</li>
     <li class="navbuttons">Catalogue</li>
     <li class="navbuttons">Locate us</li>
     <li class="navbuttons">Contact us</li>
   </ul>
   </div> 
 </div> 
```

CSS：

```
 .navbuttons{
display:inline-block;
padding-left:15px;
padding-right:15px;
padding-top:5px;
padding-bottom:5px;
height:30px;
font-family:"Palatino Linotype", "Book Antiqua", Palatino, serif;
font-weight:bold;
font-size:18px;
color:#FFF;
background: rgb(110,156,183); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(181,221,244,1) 0%, rgba(110,156,183,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(181,221,244,1)), color-stop(100%,rgba(110,156,183,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(181,221,244,1) 0%,rgba(110,156,183,1)) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(181,221,244,1) 0%,rgba(110,156,183,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(181,221,244,1) 0%,rgba(110,156,183,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(181,221,244,1) 0%,rgba(110,156,183,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b5ddf4', endColorstr='#6e9cb7',GradientType=0 ); /* IE6-9 */
}
#banner{
margin-top:0;
border-bottom: 1.5px solid #b9b7b7;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:29:03.870

将您发布的 HTML/CSS 粘贴到[JS Fiddle](http://jsfiddle.net/davidThomas/6ERVB/1/)后，*似乎*`padding: 0;`在`#banner`和和元素`margin: 0`上的设置似乎将按钮放在元素的底部边缘：`ul``.navbuttons``#banner`

```
ul,
ul li.navbuttons {
    margin: 0;
}
#banner{
    /* your other CSS */
    padding: 0;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6ERVB/)。

# kinect - 使用 OpenNI 记录 Kinect 深度的问题——“文件已损坏！”

> ID：12887013
> 
> 赞同：1
> 
> 时间：2012-10-14T22:05:21.893
> 
> 标签：kinect, recording, openni

这就是我在我的应用程序中设置录音的方式：

```
 xn::NodeInfoList recordersList;
    rc = context.EnumerateProductionTrees(XN_NODE_TYPE_RECORDER, NULL, recordersList);
    CHECK_RC(rc, "enumerate recorders");
    xn::NodeInfo chosen = *recordersList.Begin();

    recorder = new xn::Recorder();
    rc = recorder->Create(context, "oni");
    CHECK_RC(rc, "create recorder");
    rc = context.CreateProductionTree(chosen, *recorder);
    CHECK_RC(rc, "create production tree");
    rc = recorder->SetDestination(XN_RECORD_MEDIUM_FILE, "KinectLog.oni");
    CHECK_RC(rc, "set destination for recording");
    rc = recorder->AddNodeToRecording(depthGenerator, XN_CODEC_16Z_EMB_TABLES);
    CHECK_RC(rc, "add node to recording"); 
```

然后我每秒调用`rc = context.WaitAnyUpdateAll();`大约 30 次；一切正常，我可以在我的屏幕上看到 Kinect 输入等。

一切似乎都很好，但是当我尝试打开`KinectLog.oni`sample 中的结果时`NiViewer`，我得到：

```
jan@mbp ~/OpenNI/Samples/Bin/x64-Release $ ./NiViewer ~/devel/k/KinectLog.oni
Open failed: The file is corrupted!
Press any key to continue . . . 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:11:16.440

我找到了，我忘了做：

```
recorder->Release();
delete recorder; 
```

在最后。

# android - rawQuery：绑定或列索引超出范围

> ID：12887014
> 
> 赞同：5
> 
> 时间：2012-10-14T22:05:31.403
> 
> 标签：android, database, sqlite

我正试图用他的名字来获取用户：

```
public Cursor GetUser(String username)
{
    return m_dataBase.rawQuery("SELECT * FROM users WHERE name = \' ? \'", new String[] { username });
} 
```

但后来我得到一个异常“绑定或列索引超出范围”。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T22:10:43.873

您正在尝试使用参数，但这些参数永远不需要被引用。您的查询实际上搜索名为“ `?`”（带有空格）的用户。

只需使用`"SELECT * FROM users WHERE name = ?"`.

# javascript - 如何使用jquery在鼠标上移动iframe

> ID：12887022
> 
> 赞同：0
> 
> 时间：2012-10-14T22:06:14.160
> 
> 标签：javascript, jquery, iframe, javascript-events

我正在尝试在 jquery 中移动鼠标悬停时的 iframe。通过在 iframe 中捕获鼠标位置，我在这方面取得了一些成功，但是移动的闪烁是极端的。

[这](http://jsfiddle.net/wUdk4/1/)是一个jsfiddle示例

据我所知，闪烁的原因是每次 iframe 移动 iframe 内的 x 位置时，iframe 都会向相反的方向跳跃，但我想不出修复它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:53:47.903

@charlietf，

感谢您的努力，它确实使我朝着正确的方向前进，我对您的评论投了票。

您的示例的唯一问题是，随着 iframe x 位置的变化， e.pageX 也随之变化。这意味着它始终等于 0（或接近）。

为了克服这个问题，我必须添加一个变量，该变量在发生任何移动之前捕获 iframe 中的鼠标位置，然后在移动框架时从 x 变量中删除这个数字。

对于在那里寻找类似内容的任何人，[这里是 charlietf 脚本的更新版本，其中的更改以](http://jsfiddle.net/7KR4t/). 我还从 mouseover mouseout 事件更改为 mousedown mouseup 以使其更易于使用。

现在我可以从 iframe 的任何非活动部分拖动 iframe；

# java - 用jsvc运行tomcat6

> ID：12887028
> 
> 赞同：1
> 
> 时间：2012-10-14T22:06:47.487
> 
> 标签：java, linux, tomcat, jsvc

我正在尝试使用 jsvc 运行 tomcat6，以便在启动时获得用户权限。

我正在尝试使用 tomcat 文档中的代码运行：http: [//tomcat.apache.org/tomcat-6.0-doc/setup.html](http://tomcat.apache.org/tomcat-6.0-doc/setup.html)

```
cd $CATALINA_HOME
./bin/jsvc -cp ./bin/bootstrap.jar \
    -outfile ./logs/catalina.out -errfile ./logs/catalina.err \
    org.apache.catalina.startup.Bootstrap 
```

这些是我得到的错误：

```
Unable to redirect to ./logs/catalina.out
Unable to redirect to ./logs/catalina.err
Cannot open PID file /var/run/jsvc.pid, PID is 2813
Service exit with a return value of 255 
```

值得一提的是，我没有按照指南中指定的来源安装 tomcat 和 jsvc。相反，我使用突触从包中安装了它们。

* * *

更新：

我现在将它作为脚本运行，这里是代码：

```
#!/bin/sh

export JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk
export CATALINA_HOME=/usr/share/tomcat6
./bin/jsvc -cp ./bin/bootstrap.jar:$JAVA_HOME\
    -outfile ./logs/catalina.out -errfile ./logs/catalina.err \
    org.apache.catalina.startup.Bootstrap 
```

现在我得到一个不同的错误：

```
Cannot find daemon loader org/apache/commons/daemon/support/DaemonLoader
Service exit with a return value of 1 
```

我还尝试从 synaptic 中删除我所做的 jsvc 安装，并从源代码中安装 jsvc 版本 1.0.10。它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:10:16.937

除了 bootstrap.jar 之外，您还需要类路径中的 bin/commons-daemon.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:56:48.423

您确定 CATELINA_HOME 已正确导出吗？还是tomcat启动正常？

可能这就是问题所在

# outlook - 在运行时以编程方式控制 Office 加载项中的功能区

> ID：12887029
> 
> 赞同：1
> 
> 时间：2012-10-14T22:06:55.067
> 
> 标签：outlook, ms-office, ribbon, office-addins

我正在创建一个 Outlook 加载项，它将打开一个新窗口并在将其作为电子邮件发送之前收集一些信息。

为了获得 Outlook 布局，我尝试在新的电子邮件对话框中创建一个任务窗格，该对话框仅在用户单击资源管理器窗口中的自定义按钮时可见。

现在我想打开一封新邮件并在单击自定义按钮时拥有一个自定义功能区或一个选项卡。此功能区/选项卡仅在从我的代码加载新电子邮件时才可见。当用户单击新建电子邮件时，必须加载默认功能区。

我的问题是我找不到在运行时以编程方式修改功能区的方法。作为替代方案，简单地隐藏整个功能区可能是一种解决方案。

我到处搜索，无法确认或否认可以在运行时控制功能区。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:23:16.943

您需要在加载项的同一类中实现`IDTExtensibility2`和`IRibbonExtensibility`接口，以便在 Outlook 中自定义功能区界面。

该`IRibbonExtensibility.GetCustomUI`方法应返回配置功能区的 XML - 有关Outlook 中不同窗口[的 ID 列表，](http://msdn.microsoft.com/en-us/library/office/ff868522.aspx)请参阅 MSDN ，每个窗口都有各自的功能区。根据您问题中的描述，我认为您需要的是`Microsoft.Outlook.Mail.Compose`.

有关示例，请参阅[此 Q+A](https://stackoverflow.com/q/5983381/1490783)。

通过在代码中实现不同的回调，可以将自定义功能区设计为仅在满足您的条件时才可见。

# python - python导入模块ImportError

> ID：12887031
> 
> 赞同：1
> 
> 时间：2012-10-14T22:07:12.973
> 
> 标签：python, import, python-module

我正在为 django 应用程序编写自定义测试运行程序。在 django app 文件夹中，我得到了像这样的文件夹![我的包的文件夹结构](../Images/7f9f91f77726a198036e5fedb83533a4.png)

但是当我尝试运行测试时出现错误：

```
ERROR: AdminLoginTest (unittest.loader.ModuleImportFailure)
----------------------------------------------------------------------
ImportError: Failed to import test module: AdminLoginTest
Traceback (most recent call last):
  File "D:\\python27\lib\unittest\loader.py", line 252, in _find_tests
    module = self._get_module_from_name(name)
  File "D:\\python27\lib\unittest\loader.py", line 230, in _get_module_f
rom_name
    __import__(name)
  File "D:\\selenium_tests\tests\admin_panel\AdminLoginTest.py",
line 1, in <module>
    from selenium_tests.SeleniumTestCase import SeleniumTestCase
ImportError: No module named selenium_tests.SeleniumTestCase 
```

在 SeleniumTestCase 我得到了这样的东西：

```
class SeleniumTestCase(TestCase):
   body 
```

我相信包裹有问题而不是我的跑步者。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:45:15.767

它不起作用，因为如果我是对的，您可以将文件作为脚本运行（通过运行单元测试）`AdminLoginTest.py`。运行此脚本，python 解释器无法访问`selenium_tests`.

一种解决方案是使用相对进口，即

`from ..selenium_tests.SeleniumTestCase import SeleniumTestCase`

但是，这也不起作用，因为您将文件`AdminLoginTest.py`作为脚本运行。只有当文件`AdminLoginTest.py`作为模块导入时，您才能使用相对导入。

我建议更改目录的结构，将单元测试作为顶级目录，将所有其他类作为较低级别的目录。然后导入将起作用。

# servicestack - 如何删除 ServiceStack 中的元数据重定向？

> ID：12887034
> 
> 赞同：3
> 
> 时间：2012-10-14T22:07:35.917
> 
> 标签：servicestack

我通过 NuGet 安装了 ServiceStack，并在 SetConfig 中添加了以下配置：

```
EnableFeatures = Feature.All.Remove(Feature.Metadata) 
```

它已经从 /metadata 中删除了物理页面，但是，每次我尝试访问根目录时，我仍然被重定向到 /metadata。[我在官方页面（ https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page](https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page) ）上看不到任何其他允许我处理此问题的内容- 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:44:00.673

您可以为您的服务添加自己的 Default.html/.cshtml/etc 主页，也可以在[EndpointHostConfig](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/EndpointHostConfig.cs#L344-345)`DefaultRedirectPath`或中指定。`MetadataRedirectPath`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T22:49:16.633

```
 SetConfig(new EndpointHostConfig {
        EnableFeatures = Feature.All
                                   .Remove(Feature.Metadata)
                                 //.Remove(Feature.PredefinedRoutes)
                                 //.Add(Feature.ProtoBuf)
                                 //... and more
                                   ,
        DefaultRedirectPath = "/default", //set default|index|home
      //... and more
    }); 
```

# ruby-on-rails - 将对象与 Activerecord::Relation 合并

> ID：12887036
> 
> 赞同：2
> 
> 时间：2012-10-14T22:08:14.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我当前的项目中，我需要向 ActiveRecord::Relation 添加一条记录。我不能将它用作数组，因为我需要在“合并”之后应用排序范围（然后是分页）。问题是我找不到以“好”的方式做到这一点的方法。

我需要合并的关系很简单：一个典型的友谊关联。本质上，我需要与用户和用户的所有朋友建立关系。如果我可以使用数组，它会很简单：

```
user.friends + [user] 
```

但我需要一个关系。现在我正在使用这个范围：

```
scope :user_and_friends, lambda { |user| includes(:friendships).where(Friendship.arel_table["friend_id"].eq(user.id).or(arel_table["id"].eq(user.id))) } 
```

但这非常慢。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:54:15.690

最后，我自己找到了解决方案。新的范围是这样的：

```
scope :user_and_friends, lambda { |user| joins(:friendships).where(Friendship.arel_table["friend_id"].eq(user.id).or(User.arel_table["id"].eq(user.id))).group("user_id") } 
```

`joins`比 快得多`includes`，特别是当您有很多记录时。此范围的唯一问题是`joins`生成的重复记录，但由于`group`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:30:31.467

尝试这个

```
scope :user_and_friends, lambda { |user| user.friends.merge(user) } 
```

一点关于[合并方法](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)（关联部分）。

至少你可以这样做：

```
user.friends.merge(user) 
```

# javascript - Javascript变量和调试（尝试使用JQVMap）

> ID：12887039
> 
> 赞同：0
> 
> 时间：2012-10-14T22:08:47.000
> 
> 标签：javascript, jquery

我正在尝试更加熟悉 jquery/js。

我正在玩 jqvmap.com 映射代码。

我想根据状态创建一个具有 4 种颜色之一的地图。我最初尝试这样做失败了。

我的原始编码工作正常。见[这里](http://pollster.net/index2.html)。

但是当我尝试为每个状态编写特定的编码时，我犯了一些根本性的错误。见[这里](http://pollster.net/index.html)。

我希望有人能在这个特定的代码上引导我朝着正确的方向前进。

我也希望能得到一些关于如何调试 JS 代码的指导。现在，我看到我的更改不起作用，我不知道如何调试任何东西。

# python - python使用set创建只出现一次的元素列表

> ID：12887042
> 
> 赞同：1
> 
> 时间：2012-10-14T22:09:12.850
> 
> 标签：python, list, python-2.7, set

> **可能重复：**
> [如何使我的代码成为一个集合？](https://stackoverflow.com/questions/12886450/how-can-i-make-my-code-be-a-set)
> [python获取列表并仅在使用set也存在负值时才返回](https://stackoverflow.com/questions/12887398/python-takes-list-and-returns-only-if-negative-value-also-exists-using-set)

基本上我有一个巨大的清单：

```
# with (n) being a number in the hundreds of thousands or millions
def big_list(n):
return [ randrange(n) for i in range(n) ] 
```

我需要做的是创建一个新列表，其中仅包含`big_list(n)`使用`set`. 我真的被困住了，所以任何可以为我指明正确方向的东西都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:25:21.517

```
l
Out[225]: [1, 2, 3, 45, 2, 2, 34, 5, 64, 5, 6, 45, 1, 1, 2, 3, 4, 6, 64, 3]

[x for x in l if l.count(x)==1]
Out[226]: [34, 4] 
```

或使用集合中的 defaultdict，如果性能很重要：

```
In [228]: import collections
     ...: d = collections.defaultdict(int)
     ...: for x in l: d[x] += 1
     ...: results = [x for x in l if d[x] == 1]
     ...: 

In [229]: results
Out[229]: [34, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:15:03.750

将计数存储在 dict 中并使用`count==1`, dict 键过滤元素已经是唯一的。

[更新]

未经测试，请自行修复任何错误：

```
def filter_single_elements(big_list):
    counter = {}
    for element in big_list:
        counter[element] = counter.get(element, 0) + 1
    new_list = []
    for element, count in counter.items():
        if count == 1:
            new_list.append(element)
    return new_list 
```

这将返回一个新列表。您可以尝试制作一个生成器：

```
def filter_single_elements_iter(big_list):
    counter = {}
    for element in big_list:
        counter[element] = counter.get(element, 0) + 1
    for element, count in counter.items():
        if count == 1:
            yield element 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:25:24.733

如果我理解正确，您只需要在大列表中只出现一次的项目。您可以这样做（`x`您的清单在哪里）：

```
>>> from collections import Counter
>>>
>>> x = [1, 1, 2, 3, 4, 5, 5, 6]
>>> y = []
>>>
>>> for item, count in Counter(x).most_common():
...     if count == 1:
...         y.append(item)
...
>>> y
[2, 3, 4, 6] 
```

请注意，`collections.Counter`仅 2.7+。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T22:11:48.680

在 set 构造函数中使用生成器表达式：

```
def big_list(n):
    return set(randrange(n) for i in xrange(n)) 
```

**编辑**

正如下面的评论所指出的，您寻找出现一次的元素。我建议你看看[counter object](http://docs.python.org/library/collections.html#counter-objects)。您可以使用它们来有效地计算大列表中的元素，而不是在柜台上进行迭代以筛选出您需要的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T22:26:28.363

将 big_list 转换为生成器并应用[itertools 中的 unique_everseen 配方](http://docs.python.org/library/itertools.html#recipes)

# c# - 如何避免richTextBox.Clear(); 闪烁/闪烁？

> ID：12887043
> 
> 赞同：3
> 
> 时间：2012-10-14T22:09:14.593
> 
> 标签：c#, richtextbox

我有这个功能：

```
private void clearRichtextBox()
{
    richTextBox2.Clear();
    foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
    {
        for (int i = 0; i < kvp.Value.Count(); i++)
        {
            richTextBox2.AppendText("Url: " + kvp.Key + " --- " + "Localy KeyWord: " + kvp.Value[i]+Environment.NewLine);
        }
    }   
} 
```

它在哪里做`Clear();`它看起来像richTextBox 闪烁/闪烁几毫秒左右。有什么办法可以避免停止吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-26T15:39:44.223

我最近遇到了类似的问题。我选择的解决方案是向richtextbox 添加扩展方法。我喜欢这种方法，因为它干净、包含且易于重复使用。

这使得暂停重绘非常简单

```
richtextbox.SuspendDrawing(); 
```

并恢复

```
richtextbox.ResumeDrawing() 
```

* * *

```
public static class RichTextBoxExtensions
{
    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
    private const int WM_SETREDRAW = 0x0b;

    public static void SuspendDrawing(this System.Windows.Forms.RichTextBox richTextBox)
    {
        SendMessage(richTextBox.Handle, WM_SETREDRAW, (IntPtr)0, IntPtr.Zero);
    }

    public static void ResumeDrawing(this System.Windows.Forms.RichTextBox richTextBox)
    {
        SendMessage(richTextBox.Handle, WM_SETREDRAW, (IntPtr)1, IntPtr.Zero);
        richTextBox.Invalidate();
    }
} 
```

* * *

来源： [https ://stackoverflow.com/a/487757/3442448](https://stackoverflow.com/a/487757/3442448)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T22:40:25.460

每当文本更改时，您无法避免将`RichTextBox`至少一次重绘排队的内在行为，但在您提供的代码片段中，您可以只设置带外准备文本而不是调用 clear. 这会将视觉活动的变化量降至最低，而无需更改其正常操作。此外，您似乎希望保持内容与您的 KeyValue 集的视图相同。

`StringBuilder`在将文本应用到 之前使用 a组合文本，如果有差异`RichTextBox`则分配属性。`Text`如果 的内容没有变化`RichTextBox`，则不会重绘所有内容，这是您看到的闪烁行为的根源。

```
private void clearRichtextBox()
{
    StringBuilder sb = new StringBuilder();

    foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
    {
        for (int i = 0; i < kvp.Value.Count(); i++)
        {
            sb.AppendFormat("Url: {0} --- Localy KeyWord: {1}{2}", kvp.Key,kvp.Value[i],Environment.NewLine);
        }
    }

    string viewString = sb.ToString();
    if(viewString != richTextBox2.Text)
    {
         richTextBox2.Text = viewString;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:22:28.950

这就是它的工作原理。您可以尝试在表单上启用双缓冲：

```
this.DoubleBuffered = true; 
```

另一种方法是继承 RichTextBox 控件并覆盖其 New() 方法`SetStyle()`，用于为控件本身启用双缓冲。

如何使用此方法：

```
public class MyRichTextBox : RichTextBox {

    protected override void New() {
        base.New();
        SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
    }
} 
```

然后您需要执行以下步骤：

1.  关闭设计器窗口
2.  打开设计*器文件*
3.  您需要将`RichTextBox`两次替换为`MyRichTextBox`，一次靠近声明文件的顶部，另一次靠近初始化文件的底部。
4.  保存并重新打开设计器/测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T22:28:38.620

这也可能有帮助：

[http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/a6abf4e1-e502-4988-a239-a082afedf4a7](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/a6abf4e1-e502-4988-a239-a082afedf4a7)

它使用 SendMessage 打开/关闭控件的重绘模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T22:32:03.513

我还没有尝试过它是否也会闪烁，但您可以将 RTB 的值设置为空字符串。

```
richTextBox2.Text = "";
foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
{
    for (int i = 0; i < kvp.Value.Count(); i++)
    {
        richTextBox2.AppendText("Url: " + kvp.Key + " --- " + "Localy KeyWord: " + kvp.Value[i]+Environment.NewLine);
    }
} 
```

# php - 如何为jquery自动完成制作json代码？

> ID：12887044
> 
> 赞同：0
> 
> 时间：2012-10-14T22:09:24.743
> 
> 标签：php, javascript, jquery, json, autocomplete

我需要一个用于[jquery catcomplete](http://jqueryui.com/autocomplete/#categories)的 json ，我希望你能帮助我......

我有这个代码

```
$( ".autocomplete" ).autocomplete({
     source: "files/news.php?listar=json"
}); 
```

我希望“files/news.php?listar=json”显示如下内容：

```
[ 
  { label: "title1", category: "category1" },
  { label: "title2", category: "category2" } 
] 
```

请你帮助我好吗？

@编辑：

我试过这个，但没有奏效：

```
if ($_GET['listar'] == 'json')
{
    echo '['."\n";  
    $query = mysql_query("SELECT * FROM noticias WHERE deletada='0' ORDER BY id DESC");
    $a = 0;
    while ($noticia = mysql_fetch_array($query))
    {
        echo ' { label: "'.$noticia['titulo'].'", category: "'.ucwords(Categoria($noticia['categoria'])).'" }';
        $a++;

        if ($a < mysql_num_rows($query))
        {
            echo ",\n";
        }
    }
    echo "\n".']';

    exit;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:14:59.343

问题有点混乱。您期待 PHP 中的 JSON。在 PHP 中，您可以使用内置函数[json_encode](http://www.php.net/manual/en/function.json-encode.php)将任何数组转换为 JSON 并将其作为响应返回。

您的标签表明您在 JS 中需要它。在 JS 中，尝试[json2.js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T22:19:15.817

您不需要编写自己的 json，因为它已经可以用于`json encode()`： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
if ($_GET['listar'] == 'json')
{
    $query = mysql_query("SELECT * FROM noticias WHERE deletada='0' ORDER BY id DESC");
    while ($noticia = mysql_fetch_array($query))
    {
    $results[] = array(
        'label' => $noticia['titulo'],
        'category' => $noticia['categoria']
    );
    }
}

$json = json_encode($results);
header('Content-type: application/json');
echo $json;
exit; 
```

# android - 无法在 Eclipse Helios 上安装 ADT 插件

> ID：12887054
> 
> 赞同：0
> 
> 时间：2012-10-14T22:11:08.587
> 
> 标签：android, eclipse, eclipse-plugin, adt

我在某处读到（不记得来自哪里，但我认为来自 stackoverflow），制作 android 应用程序的最佳 Eclipse 版本是 Eclipse Helios 3.6.2 或更高版本。所以我下载了它（3.6.2版本）但是当我尝试安装adt插件时，一切都很顺利，直到出现这个错误：

![在此处输入图像描述](../Images/595795a6720f7a58ea7c386c8118611c.png)

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:16:43.513

我在系统中安装了 java 1.7 时遇到了这个问题。然后我在任何版本的 Eclipse 中都收到了这条消息。因此，请确保您只安装了 java 1.6，如果您使用的是 Windows，请确保环境路径不包含对 java 1.7 的任何引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T05:17:49.890

早于 3.7.2 的 Eclipse 版本在 Java 7 中运行时存在问题。您要么必须使用较新的 Eclipse 版本，要么使用较旧的 JRE 运行您拥有的版本。

# c# - 抽象类和虚拟方法——为每个类创建对象并显示结果

> ID：12887055
> 
> 赞同：1
> 
> 时间：2012-10-14T22:11:08.243
> 
> 标签：c#

我刚刚接触到 C# 的世界。我现在正在学习如何在 Windows 窗体中使用抽象类和虚拟方法。我有结构/想法，但需要帮助填写我的表单代码。我的基本抽象类名为`Plants`，四个子类名为`Trees`、和`Tomatoes`，一个名为 的虚拟方法和一个在所有方法之外的名为的方法。 `Seeds``Berries``Get_value``Report`

我想`button1`单击为每个类创建至少两个对象，并使用对另一个类的`textBox1`调用将它们显示在多行中，以显示每种植物的价值和所有植物的总价值。关于如何解决这个问题的任何想法或帮助？`Report``textBox2`

**代码**

```
namespace plant_farm
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public abstract class Plants
        {
            protected string the_name;
            //may need more strings but not sure

            public virtual string Get_Value()
            {
                return "";

                /*
                   Multiplies the number of items times the value per 
                   item and returns the product as a double.
                */
            }

            public override string ToString()
            {

                return "";

              /* 
                Returns a string that gives all the relevant information 
                for the object(including an indication of wheter it is a 
                tree, seed, etc.
              */

            }
        }

        public class Trees : Plants
        {
            /*
              Includes a variety(oak, cherry, etc.), height in feet,
              the number of trees in stock, and the price of each tree.
            */
        }

        public class Tomatoes : Plants
        {
            /*
              Includes: Type(big boy, early girl, etc.), the size of the 
              tomatoes expected (small, medium, or large), the price of each plat,
              the number of plants per plat (6, 12, 24, etc.) and the number of 
              plats in stock.
            */
        }

        public class Seeds : Plants
        {
            /*
              Includes: Type of seeds(pumpkin, cantaloupe, cucumber, etc.), 
              the number of packets in stock, and the cost per packet.
            */
        }

        public class Berries : Plants
        {
          /*
           Includes: Type of plant(blackberry, strawberry, etc.), the variety
           (AAA early, FrostStar, etc), the month of highest bearing (May, June,
           etc.), the number of plants in stock, and the price per plant.
          */
        }

        public void Report()
        {
            /*
            Is passed a Plant object and a TextBox and adds the ToString result of 
            the object to the textbox and then skips to the next line.
             */
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:53:04.287

你的问题有点含糊。我建议继续阅读更多内容，特别是关于继承和组合之间的区别。继承是“是”关系，而组合是“具有”关系。

树“是”植物，番茄植物“是”植物。浆果“是”种子（不是植物） 植物“有”种子。

这将导致一个结构，其中植物的抽象类将包含一个种子实例，该实例本身是浆果、松果、坚果等的抽象基类......

归根结底，这可能是一个非常糟糕的尝试使用的示例，因为您可能会对继承发疯，这通常是一个坏主意，尤其是对于初学者而言。

而是从理解组合开始，然后通过接口进行多态性，然后继续使用抽象类和虚拟成员进行继承。

# c++ - 为什么我会收到来自 g++ 的此错误消息？

> ID：12887060
> 
> 赞同：1
> 
> 时间：2012-10-14T22:11:55.720
> 
> 标签：c++, g++, iostream

下面是我的代码。它在 g++ 中编译得很好，但总是有这个运行时错误：Segmentation fault (core dumped)

我哪里错了？

```
#include<iostream>
#include<string>

using namespace std;

void sort_string(string x){
    for (int i=0;x.size();i++){
                    for(int j=i;x.size();j++){
                            char temp = x[i];
                            if (temp > x[j]){
                                    x[j]=temp;
                                    x[i]=x[j];
                            }
                    }
    }
}

int main(){
    string words;
    cin >> words;

    while (words != " "){
            cout << words << " ";
            sort_string(words);
            cout << words << endl;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:16:13.793

您正在循环超出字符串的范围。你需要这个：

```
for (int i=0; i<x.size(); i++){ ... } 
```

对于内循环也是如此。除非字符串为空，否则`x.size()`将评估为。`true`由于这是循环终止条件，因此对于非空字符串，循环将永远运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:17:04.460

你的 for 条件是错误的。代替

```
for (int i=0;x.size();i++){
    for(int j=i;x.size();j++){ 
```

和

```
for (int i=0; i<x.size();i++){
    for(int j=i; j<x.size();j++){ 
```

否则你将无休止地循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:16:44.843

你的情况没有任何意义。for 循环中的那`x.size()`部分应该是终止循环的条件。这将始终返回一些非零值，除非您的字符串为 0，这意味着您的代码将无限执行。然后， j 总是增加并且你超出界限。您需要提供有效条件，例如`i < x.size()`and `j < x.size()`。

# php - 从一个 Atom RSS 提要加载所有项目

> ID：12887061
> 
> 赞同：0
> 
> 时间：2012-10-14T22:12:01.800
> 
> 标签：php, atom-feed, simplepie

我正在使用[SimplePie](http://www.simplepie.org/)，它让我很头疼。首先，让我解释一下我要做什么。我正在为其创建网站的朋友已经有博客，其中的帖子并不多，我想从那里加载所有项目，解析它们并在标签正确时显示它们。当[SimplePie](http://www.simplepie.org/)没有加载整个提要但限制为 25 时，问题就开始了。根据这个[SO question](https://stackoverflow.com/questions/12852255/rss-feed-getting-cut-off)，默认限制是 10，我还使用 Google Chrome 扩展程序检查了提要，在那里我获得了整个博客内容。澄清一下，这些项目没有被缓存（好吧，实际上它们是）但仍然存在于博客上，所以它们没有被删除，我也没有得到旧内容。另外，我下载了 feed url 并在记事本中打开它，里面有 25 个项目。

这是我的 init() 代码示例：

```
 require_once("php/autoloader.php");
 $feed=new SimplePie();
 $feed->set_feed_url("http://jadran303.blogspot.com/feeds/posts/default");
 $feed->enable_cache(false);
 $feed->init();
 $feed->handle_content_type(); 
```

这是我测试结果并查看我得到的代码（这不是生产版本）：

```
$i=1;$j=1;$k=1;
foreach($feed->get_items() as $item):
 echo$k." ".$item->get_title()." - ".$item->get_date('j F Y, g:i a')."<br />";
 if($category=$item->get_category()){
  echo$j". ".$item->get_title()." - ".$category->get_label()." - ".$category->get_term()."<br />";
  if($category->get_label()=="Peugeot 406 Coupé na terenu"){
   echo" - $i ".$item->get_title()."<br />";
   $i++;
  }
  print_r($category);
  $j++;
 }
 $k++;
endforeach; 
```

我的问题：

*   如何强制 SimplePie 加载博客中的所有内容？我应该只是“foreach($feed-> **get_items(0,10000)** as $item):”来加载所有内容并保证终生安全吗？
*   还有其他更适合我需要的 Atom 解析器吗？任何建议都是最受欢迎的。
*   为什么我下载的默认文件中的内容是按标签排序的，标签是空的，但是该**术语**有正确的关键字？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:40:20.780

> 另外，我下载了 feed url 并在记事本中打开它，里面有 25 个项目。

这就是 SimplePie 无法加载更多项目的原因；那里没有给出任何东西。SimplePie（或任何其他解析器）只能获取提要中的内容。

~~如果您想要更多项目，您可以尝试使用 Google 的提要 API（他们使用来自 Google Reader 的缓存数据，因此他们应该拥有每个项目）。（另一个答案实际上是不正确的，因为它不限于 10 个项目；这只是在 NewsBlocks 示例代码中。）或者，在网站上四处挖掘，看看你是否能找到一种方法来对提要进行分页。~~

根据您在下面的评论，您应该能够附加`?max-results=1000`到任何 Blogger 供稿以获得 1000 个项目。这是特定于 Blogger 的，但大多数网站都有类似的东西。

# node.js - Node v8 Garbage Collector :: 如何调试长时间的 Mark-Sweep？

> ID：12887062
> 
> 赞同：4
> 
> 时间：2012-10-14T22:12:15.157
> 
> 标签：node.js

我使用 --trace_gc 标志运行我的应用程序，试图找出一些性能问题。嗯，看来我已经找到了……

```
 1288678 ms: Mark-sweep 498.8 (549.0) -> 488.8 (548.0) MB, 4085 ms [idle notification: finalize idle round] [GC in old space requested]. 
```

牛逼！超过4秒做GC。难怪我有问题。

现在，真正的问题是：我如何才能找到正在被 GC 处理的对象，更重要的是，如何找到它们的分配位置？我已经在 nodetime 中使用过堆快照，但是我没有看到足够的信息来帮助我发现这些对象的来源。我确实看到一些提示让我相信，也许，我在某处有一个循环引用（例如，在单个用户调用几个 API 之后，我在堆快照中看到数百个“用户”属性）。

是否有任何关于如何追踪这些大型垃圾收集时间的原因的好的教程或其他好的信息？或者也许我可以以某种方式打印分配的对象，以尝试找到循环引用......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:55:23.343

实际上没有任何工具可以做到这一点，但我可以向您保证，循环引用不是问题。

我想知道您使用的是哪个版本的 V8。

可能导致长时间停顿的一件事是非常大的对象。V8 还不太擅长增量扫描数百万个元素数组或具有数十万个对象的对象。

您可能想要关闭节点中的空闲通知或使用 --nouse-idle-notification。我不确定通知是否总是在正确的时间触发。他们可以告诉 V8，VM 无事可做，现在是进行非增量式 stop-the-world GC 的好时机。

# ios - 使用 ARC 的基于块的 UIAlertView

> ID：12887064
> 
> 赞同：1
> 
> 时间：2012-10-14T22:12:47.993
> 
> 标签：ios, categories

我正在阅读推动极限的 iOS 5，作者有一个基于块的警报视图的示例。这是代码：

。H

```
typedef void (^DismissBlock)(int buttonIndex);
typedef void (^CancelBlock)();

+ (UIAlertView *)showAlertViewWithTitle:(NSString *)title
                                message:(NSString *)message
                      cancelButtonTitle:(NSString *)cancelButtonTitle
                      otherButtonTitles:(NSArray *)otherButtons
                              onDismiss:(DismissBlock)dismissed
                               onCancel:(CancelBlock)cancelled; 
```

.m

```
static DismissBlock _dismissBlock;
static CancelBlock _cancelBlock;

+ (UIAlertView *)showAlertViewWithTitle:(NSString *)title
                                message:(NSString *)message
                      cancelButtonTitle:(NSString *)cancelButtonTitle
                      otherButtonTitles:(NSArray *)otherButtons
                              onDismiss:(DismissBlock)dismissed
                               onCancel:(CancelBlock)cancelled {
    [_cancelBlock release];
    _cancelBlock = [cancelled copy];
    [_dismissBlock release];
    _dismissBlock = [dismissed copy];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:[self self] cancelButtonTitle:cancelButtonTitle otherButtonTitles: nil];

    for (NSString *buttonTitle in otherButtons) {
        [alert addButtonWithTitle:buttonTitle];
    }
    [alert show];

    return [alert autorelease];
}

+ (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == [alertView cancelButtonIndex]) {
        _cancelBlock();
    }
    else {
        _dismissBlock(buttonIndex - 1); // cancel button is index 0
    }
    [_cancelBlock autorelease];
    [_dismissBlock autorelease];
} 
```

关于这个实现，我有几个问题。

1) 如果我使用 ARC，在 showAlertViewWithTitle 方法中，我是否需要在复制之前释放块？为什么或者为什么不？

2) 在 showAlertViewWithTitle: 方法中，他分配了委托：[self self]。这实际上是如何工作的？我以前没见过这个符号。

3) 为什么要为dismiss 和cancel 块声明静态变量？这基本上是作为这个类别的 ivar 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:26:05.050

1) 使用 ARC 时，您不能调用 release 或 autorelease，所以不，您不需要调用 release。当您分配副本时，ARC 会为您处理这些问题。

2）我也从未见过。我只是使用“自我”。

3) 类别不能有 ivars。在这里使用静态是危险的，只有当你 100% 肯定你永远不会在当前显示警报视图时调用这个**showAlertViewWithTitle:...类方法时才会起作用。**

就个人而言，由于需要静态，我不会将其作为 UIAlertView 的类别方法。我会创建一个扩展 UIAlertView 的常规类（MyAlertView 或类似类）并添加一个新的“显示”方法，该方法采用两个块参数。然后，您的自定义类可以为块提供适当的 ivars。

# c# - C# 将数字作为字符串处理

> ID：12887066
> 
> 赞同：-11
> 
> 时间：2012-10-14T22:13:03.410
> 
> 标签：c#

我需要制作一个程序，从用户那里获取一个 3 位数字并打印一个 6 位数字 EX：输入：123 输出：112233

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:23:15.623

使用任意位数执行此操作的通用方法如下所示：

```
string input = Console.ReadLine();
StringBuilder output = new StringBuilder(input.Length * 2);

foreach (char c in input)
{
   output.append(c);
   output.append(c);
}

Console.WriteLine(output.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T22:25:25.827

您可以`Enumerable.Repeat`在 LINQ 查询中使用：

```
public static String duplicateChars(IEnumerable<Char> input, int factor)
{
    var chars = from c in input
                from cc in Enumerable.Repeat(c, factor)
                select cc;
    return new String(chars.ToArray());
} 
```

测试：

```
String result = duplicateChars("123", 2); 
```

演示：http: [//ideone.com/57KzI](http://ideone.com/57KzI)

或简短版本：

```
new String("123".SelectMany(c => Enumerable.Repeat(c, 2)).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:20:30.330

我假设您实际上会得到任何数字作为输入，而不是特别是三位数字。

你可以这样做：

```
Console.WriteLine(String.Concat(Console.ReadLine().Select(c => c.ToString() + c.ToString()))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:40:57.377

您也可以使用正则表达式

`var reg = Regex.Replace("123", @"\d", @"$&$&");`

或作为一种方法

`public static string DuplicateChars(string term)
 {
 return Regex.Replace(term, @"\d", @"$&$&");
 }`

# php - 它在将值插入数据库时 复制了一个值

> ID：12887068
> 
> 赞同：0
> 
> 时间：2012-10-14T22:13:17.833
> 
> 标签：php, database, mysqli

我在下面有一个 php 代码，它在其中插入问题和答案：

```
<?php
var_dump($_POST);

// Prepare your statements ahead of time
$questionsql = 'INSERT INTO Question (SessionId, QuestionId, QuestionContent) VALUES (?, ?, ?)';
if (!$insert = $mysqli->prepare($questionsql)) {
    // Handle errors with prepare operation here
    echo __LINE__ . ': ' . $mysqli->error;
}

$answersql = 'INSERT INTO Answer (SessionId, QuestionId, Answer) VALUES (?, ?, ?)';
if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__ . ': ' . $mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if ($insert && $insertanswer) {
    $sessid = $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
    $c = count($_POST['numQuestion']);

    for ($i = 0; $i < $c; $i++) {
        switch ($_POST['gridValues'][$i]) {
            case '3':
                $selected_option = 'A-C';
                break;

            case '4':
                $selected_option = 'A-D';
                break;

            case '5':
                $selected_option = 'A-E';
                break;

            default:
                $selected_option = '';
                break;
        }

        $results = $_POST['value'];
        foreach ($results as $id => $value) {
            $answer = $value;

            $insert->bind_param('sis', $sessid, $id, $_POST['questionText'][$i]);

            $insert->execute();

            if ($insert->errno) {
                // Handle query error here
                echo __LINE__ . ': ' . $insert->error;
                break 2;
            }

            $lastID = $insert->insert_id;

            foreach ($value as $answer) {
                $insertanswer->bind_param('sis', $sessid, $lastID, $answer);

                $insertanswer->execute();

                if ($insertanswer->errno) {
                    // Handle query error here
                    echo __LINE__ . ': ' . $insertanswer->error;
                    break 3;
                }
            }
        }
    }

    //close your statements at the end
    $insertanswer->close();
    $insert->close();
} 
```

问题是虽然它给了我这个错误：

> 警告：mysqli_stmt::execute(): (23000/1062): 第 92 行 /.../ 中键 'PRIMARY' 的重复条目 'RXT-1' 97: 键 'PRIMARY' 的重复条目 'RXT-1'

现在我有“SessionId”和“QuestionId”的复合键，但我不相信问题是这样的，因为下面是表格显示的内容：

问题表：

```
SessionId(PK)  QuestionId(PK)  QuestionContent
RZC            1               What is 2+2 and 3+3?
RZC            2               What is 2+2 and 3+3? 
```

我认为的问题是它将问题 1 中的相同问题显示到两个表行中。问题 2 应该是一个不同的问题（什么是 5+5 和 6+6？）

所以我的问题是为什么它在两行中都显示相同的问题以及如何更改我的代码来修复它？

以下是 var_dump($_POST) 显示的内容：与此问题相关的是`["numQuestion"] and ["questionText"]`.

```
array(8) {
    ["numberAnswer"]=> array(2) {
        [0]=> string(1) "2"
        [1]=> string(1) "3"
    }
    ["numQuestion"]=> array(2) {
        [0]=> string(1) "1"
        [1]=> string(1) "2"
    }
    ["questionText"]=> array(2) {
        [0]=> string(20) "What is 2+2 and 3+3?"
        [1]=> string(41) "Which three items will you find in a car?"
    }
    ["gridValues"]=> array(2) {
        [0]=> string(1) "4"
        [1]=> string(2) "10"
    }
    ["reply"]=> array(2) {
        [0]=> string(8) "multiple"
        [1]=> string(8) "multiple"
    }
    ["textWeight"]=> array(2) {
        [0]=> string(1) "5"
        [1]=> string(1) "5"
    }
    ["submitDetails"]=> string(14) "Submit Details" 
    ["value"]=> array(2) {
        [1]=> array(2) {
            [0]=> string(1) "A"
            [1]=> string(1) "C"
        }
        [2]=> array(3) {
            [0]=> string(1) "A"
            [1]=> string(1) "B"
            [2]=> string(1) "D"
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:01:40.770

如果你想先插入问题，然后是所有答案，你的问题查询不应该在答案插入循环中，否则它将为找到的每个答案执行，但不会改变。

坏的：

```
 $results = $_POST['value'];
    foreach ($results as $id => $value) {
        $answer = $value;

        $insert->bind_param('sis', $sessid, $id, $_POST['questionText'][$i]);

        $insert->execute();

        if ($insert->errno) {
            // Handle query error here
            echo __LINE__ . ': ' . $insert->error;
            break 2;
        } 
```

更好的：

```
 $insert->bind_param('sis', $sessid, $id, $_POST['questionText'][$i]);

    $insert->execute();

    if ($insert->errno) {
        // Handle query error here
        echo __LINE__ . ': ' . $insert->error;
        break 2;
    }

    $results = $_POST['value'];
    foreach ($results as $id => $value) {
        $answer = $value; 
```

# java - 生成正则表达式以匹配列表 A 中的字符串，但不匹配列表 B 中的字符串

> ID：12887069
> 
> 赞同：6
> 
> 时间：2012-10-14T22:13:37.700
> 
> 标签：java, regex, string, algorithm, text

> **可能重复：**
> [如何从给定的字符串列表中自动生成正则表达式？](https://stackoverflow.com/questions/4880402/how-to-auto-generate-regex-from-given-list-of-strings)

我有两个字符串**ListA**和**ListB**列表。我需要生成一个正则表达式，它将匹配 ListA 中的所有字符串，**并且**不会匹配**ListB**中的任何字符串。

*   字符串可以包含字符、数字和标点符号的任意组合。
*   如果字符串出现在**ListA**上，则保证它不会出现在**ListB**中。
*   如果一个字符串不在这两个列表中，我不在乎匹配的结果应该是什么。

这些列表通常包含数千个字符串，并且字符串彼此非常相似。

我知道这个问题的简单答案，它只是生成一个形式为 ListA 中的字符串`(Str1)|(Str2)|(Str3)`的正则表达式。`StrN`但我正在寻找一种更有效的方法来做到这一点。

理想的解决方案是某种工具，它将获取两个列表并为此生成一个 Java 正则表达式。

**更新 1**：“高效”是指生成比普通解决方案更短的表达式。理想的算法将生成缩短的可能表达式。这里有些例子。

```
ListA = { C10 , C15, C195 }
ListB = { Bob, Billy } 
```

理想的表达方式是

```
/^C1.+$/ 
```

另一个例子，注意 ListB 的第三个元素

```
ListA = { C10 , C15, C195 }
ListB = { Bob, Billy, C25 } 
```

理想的表达是

```
/^C[^2]{1}.+$/ 
```

最后一个例子

ListA = { A , D ,E , F , H } ListB = { B , C , G , I }

理想表达式与平凡解相同，即

```
/^(A|D|E|F|H)$/ 
```

此外，我不是在寻找理想的解决方案，任何比琐碎更好的事情都会有所帮助。我正在考虑生成简单解决方案列表，然后尝试合并公共子字符串，同时注意我们不会进入 ListB 领域。

**更新 2*：我并不特别担心生成 RegEx 所需的时间，现代机器上 10 分钟以下的任何内容都是可以接受的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:23:37.027

如果保证两个列表中都没有字符串，并且您不关心两个列表中的字符串，那么您只需要匹配 ListA 中的字符串；您可以完全忽略 ListB。

您提到的“微不足道的答案”是一个完全合理的解决方案。当您说您想要一种“更有效”的方式时，您是指一种生成正则表达式本身的有效方式，还是一种生成更有效地匹配字符串的正则表达式的方式？

*   如果您想有效地生成正则表达式，大多数语言的字符串工具都提供了一种将字符串列表与分隔符字符串（例如逗号）连接起来以生成单个字符串的方法。你真的没有比这更有效的了。
*   如果您希望表达式有效地匹配事物，请确保在使用它之前“编译”它。（大多数正则表达式库都有此功能。）编译正则表达式意味着生成正则表达式库实际用于匹配操作的[有限状态机。](https://en.wikipedia.org/wiki/Finite-state_machine)任何像样的正则表达式库都应该在优化 FSM 方面做得不错，例如尽可能将公共子字符串映射到相同的 FSM 状态。

* * *

或者，您可以完全放弃正则表达式，只遍历 ListA 并将其每个字符串与候选字符串进行比较。在这种情况下，单独的比较可能会更快，因为寻找精确的字符串匹配可以比较 4 或 8 字节块中的字符串，而正则表达式必须单独查看每个字符。但是，如果您有很多要比较的字符串，您将在内存中多次遍历候选字符串。相反，正则表达式可以遍历候选字符串*一次*以找出它是否匹配。

尝试这两种方法。看看哪个更快。

# perl - 访问授权标头

> ID：12887070
> 
> 赞同：1
> 
> 时间：2012-10-14T22:13:39.617
> 
> 标签：perl, dancer

如何使用 Perl Dancer 访问请求的 Authorization 标头？

我已经测试了我的客户端，它成功地传递了`Authorization`标头，但它没有出现在`request->headers`哈希中。我可以通过简单地拼写错误或`X-`在前面附加一个来显示它，但我正在制作一个 API，并希望使用传统的标头来传递请求签名以进行身份​​验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T01:44:56.093

看起来 FastCGI 去除了 Authorization 标头，可能是因为[基本的 HTTP 身份验证非常不安全](http://en.wikipedia.org/wiki/Basic_access_authentication#Disadvantages)。并不是说通过 POST 发送用户名和密码更好。

从[Plack::Handler::FCGI](https://metacpan.org/module/Plack%3a%3aHandler%3a%3aFCGI#Authorization) ...

```
Most fastcgi configuration does not pass Authorization headers to
HTTP_AUTHORIZATION environment variable by default for security reasons.
Authentication middleware such as Plack::Middleware::Auth::Basic or 
Catalyst::Authentication::Credential::HTTP requires the variable to be set up. 
Plack::Handler::FCGI supports extracting the Authorization environment variable
when it is configured that way.

Apache2 with mod_fastcgi:
--pass-header Authorization

mod_fcgid:
FcgiPassHeader Authorization 
```

它也被提到作为对[Plack::Middleware::Auth::Digest](https://metacpan.org/module/Plack%3a%3aMiddleware%3a%3aAuth%3a%3aDigest#LIMITATIONS)的警告。

# visual-studio-2010 - TFS 2010 具有历史的克隆团队项目（或类似的东西）

> ID：12887071
> 
> 赞同：1
> 
> 时间：2012-10-14T22:13:47.520
> 
> 标签：visual-studio-2010, tfs

我一直在这里阅读类似的问题，但我一直无法找到我想要的东西。我希望大家能帮助我更好地理解这一点。

在我工作的地方，我一直在尝试将我们的“大型”团队项目分解为更易于管理的团队项目，这样我们就可以只构建我们需要的东西。我已经完成了概念验证，效果很好。基本上，我将解决方案 (sln) 隔离为一个团队项目（以及与之配套的所有项目），然后我有另一个团队项目，它是公共文件（外部的 dll 或其他 sln 项目）。这是我在研究毫无根据的合并之后的最佳结果（这很有趣，但最终没有按预期工作）。无论如何，没有毫无根据的合并......

更新/编辑...大型故障：

```
$(MegaTeamProj)
$(MegaTeamProj)\Common\
$(MegaTeamProj)\SolutionA\
$(MegaTeamProj)\SolutionA\Aproject
$(MegaTeamProj)\SolutionA\Bproject
$(MegaTeamProj)\SolutionA\thesol.sln
$(MegaTeamProj)\SolutionB\
$(MegaTeamProj)\SolutionB\Aproject
$(MegaTeamProj)\SolutionB\Bproject
$(MegaTeamProj)\SolutionB\thesol.sln 
```

试图将其分解为：

```
$(Common)

$(SolutionA)\Aproject
$(SolutionA)\Bproject
$(SolutionA)\thesol.sln

and

$(SolutionB)\Aproject
$(SolutionB)\Bproject
$(SolutionB)\thesol.sln 
```

我现在挣扎的地方是创建一个新的团队项目，该项目保留该解决方案的所有签入历史。如果我使用的是 svn，我可以克隆存储库文件夹并删除我不需要的内容并提交（例如我的 TFS 策略思考）。无论如何，另一个症结是有一个第 3 方实际上维护了我们的 TFS 东西（技术术语 :)）。所以我通过团队资源管理器具有管理能力来创建新项目（带有报告）等等......

我确实尝试移动文件夹/文件（通过源代码管理资源管理器中的 UI），但历史并没有延续到新的团队项目。显然，如果我在同一个项目中移动文件夹或文件，历史确实会迁移。

你们是如何解决这个问题的？

谢谢，凯利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:35:42.027

@Betty 在讨论一些问题时提供了很好的帮助，我希望我可以为我关于如何迁移和保存历史的问题提供答案。我尝试过在项目之间进行分支和移动，但没有成功。顺便说一句，这很容易理解。每个团队项目都有自己的 sql db，在我们的例子中，历史是基于团队项目而不是解决方案 A、B 等......这也使得尝试其他解决方案变得困难，因为我们有一个第三方为我们提供源控制服务（TFS 和构建代理）。

在我们的案例中（我工作的地方），我的主管可以将文件复制到一个新的团队项目中。在我们完成发布后，我复制了那个项目。在这种情况下，我们当前的结构仍然存在。我们只是告诉我们的小组继续在新的团队项目中工作。

这样做我们有以下几点：

```
$(MegaTeamProj)
$(MegaTeamProj)\Common\
$(MegaTeamProj)\SolutionA\
$(MegaTeamProj)\SolutionA\Aproject
$(MegaTeamProj)\SolutionA\Bproject
$(MegaTeamProj)\SolutionA\thesol.sln
$(MegaTeamProj)\SolutionB\
$(MegaTeamProj)\SolutionB\Aproject
$(MegaTeamProj)\SolutionB\Bproject
$(MegaTeamProj)\SolutionB\thesol.sln 
```

我们还有新创建的项目：

```
$(Common)

$(SolutionA)\Aproject
$(SolutionA)\Bproject
$(SolutionA)\thesol.sln

$(SolutionB)\Aproject
$(SolutionB)\Bproject
$(SolutionB)\thesol.sln 
```

所以现在员工可以继续通过 MegaTeamProj 看到旧的变化，并在各自的团队项目中进行新的开发。

我确实希望微软能在未来让这件事变得更容易，我认为在这和 SVN 之间，它让我想选择它 VS。TFS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T03:20:40.627

嗨，我不知道我是否理解正确，但是

1.  如果您尝试拆分集合，我遇到了[这个](http://msdn.microsoft.com/en-us/library/vstudio/dd936158.aspx)

2.  如果您尝试将 TFS 集合迁移到新服务器，可以尝试分离/附加方法，[（移动团队项目集合）](http://msdn.microsoft.com/en-us/library/vstudio/dd936138.aspx)

如果您的问题是＃2，所有签入历史记录也将包括在内。

# grammar - 具有减少-减少冲突的简单歧义语法

> ID：12887072
> 
> 赞同：3
> 
> 时间：2012-10-14T22:13:52.973
> 
> 标签：grammar, bison, reduce-reduce-conflict, ambiguous-grammar

以下解析逻辑表达式的简单语法会导致 reduce/reduce 冲突：

```
%token AND OR
%token NUMBER VARIABLE
%%
logical_expr
    : logical_expr AND logical_term
    | logical_expr OR logical_term
    | logical_term
    ;
logical_term
    : VARIABLE
    | comparison
    | '(' logical_expr ')'
    ;
comparison
    : expr '<' expr
    | expr '>' expr
    ;
expr
    : expr '+' term
    | expr '-' term
    | term
    ;
term
    : NUMBER
    | VARIABLE
    | '(' expr ')'
    ;
%% 
```

来自野牛的状态报告有：

```
state 2

    4 logical_term: VARIABLE .
   13 term: VARIABLE .

    ')'       reduce using rule 4 (logical_term)
    ')'       [reduce using rule 13 (term)]
    '<'       reduce using rule 13 (term)
    '>'       reduce using rule 13 (term)
    '+'       reduce using rule 13 (term)
    '-'       reduce using rule 13 (term)
    $default  reduce using rule 4 (logical_term) 
```

我猜问题是它无法弄清楚如何解析“（a）+ 1 < 2”。如何消除这种语法的歧义？可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:55:36.177

您的语法的基本问题是，当您看到`( VARIABLE`并且下一个标记是`)`时，解析器无法判断这应该是括号`expr`还是`logical_expr`- 它取决于 . 之后的下一个标记`)`。如果下一个令牌是`+`. `-`，`<`或者`>`它是一个 expr，而如果它是`AND`or `OR`（或 EOF），那么它是一个`logical_expr`.

通常的解决方案是不要尝试在语法中进行类型检查。虽然可能，但它需要额外的前瞻性，并且可能需要多级语法或此类复杂性。

在您的情况下，如果您将`logical_term`规则更改为

```
logical_term
    : comparison
    | expr
    ; 
```

冲突消失了，但您的解析器将接受类型不正确的内容，例如 `a > 3 AND 2`or `2 + 2 OR 7`。您需要对生成的解析树（或您正在创建的任何数据结构）进行类型检查以确保正确性，尽管无论如何您可能都需要这样做（至少您已经需要进行类型检查`VARIABLE`以确保变量是数字的或布尔值，取决于上下文。）

# c - read() 函数中的随机空字符

> ID：12887073
> 
> 赞同：1
> 
> 时间：2012-10-14T22:14:12.607
> 
> 标签：c, sockets

我正在用 TCP 构建一个基本的客户端和服务器。它正在工作，除非密钥变得有点大。它只是来回发送密钥，直到时间结束。当它变大（又名 4096）时，read() 语句将随机获得一个 null，然后将密钥分成两个 msg，然后打破循环。

我真的不确定它为什么这样做，服务器代码正在工作，因为它已经与其他客户端进行了测试，所以我的客户端有问题。任何想法（很短）：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 

#define BUFFER_LENGTH 5120

// Error message taken from reference
void error(const char *msg)
{
    printf("%s\n", msg);
    exit(0);
}
int main(int argc, char *argv[])
{
    int sockfd, portNumber, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;

    // Invalid arguments
    if (argc < 4)
        exit(0);
    else if (atoi(argv[3]) < 1 || atoi(argv[3]) > 4096)
        exit(0);

    char buffer[BUFFER_LENGTH];
    bzero(buffer, BUFFER_LENGTH);
    char buffer2[BUFFER_LENGTH];
    bzero(buffer2, BUFFER_LENGTH);
    strcpy(buffer2, "Connect.  Key length:  ");
    strcpy(buffer, strcat(buffer2, argv[3]));
    portNumber = atoi(argv[2]); // Get port number in int format
    sockfd = socket(AF_INET, SOCK_STREAM, 0); // Create socket connection to server using internet constants

    // Did we open the socket succesfully?
    if (sockfd < 0)
        error("Error opening socket.");

    // Is the IP Address valid?
    server = gethostbyname(argv[1]);
    if (server == NULL)
        error("Could not connect to server. Terminating.");

    // Initialize to zero and then set
    // Taken from reference
    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr, (char *)&serv_addr.sin_addr.s_addr, server->h_length);
    serv_addr.sin_port = htons(portNumber);
    if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
        error("Could not connect to server. Terminating.");

    short connected = 1;
    do 
    {
        // Send initial request on first pass
        // Afterwards send the resposne we were given
        printf("Sending: %s\n", buffer);
        printf("Length of msg: %d\n", (strlen(buffer) + 1));
        n = write(sockfd, buffer, strlen(buffer) + 1);
        if (n < 1) 
             error("Failed to send Message. Terminating.");

        // Get session key response
        bzero(buffer, BUFFER_LENGTH);
        n = read(sockfd, buffer, BUFFER_LENGTH);
        if (n < 1)
            error("Could not fetch result.  Terminating.");

        // Stop
        if (strcmp(buffer, "Invalid session key.  Terminating.") == 0)
            break;

        printf("%s\n", buffer);
        sleep(1);
    } while (connected == 1);

    // Done (this should never be reached in this client)
    error("Could not fetch result.  Terminating.");
    close(sockfd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:32:53.207

不要在二进制数据上使用`strcpy()`或任何函数。`str*()`你不是在处理字符串。使用`memcpy()`并指定要复制的字节数。

这些`str*()`函数对*字符串*进行操作；C 标准将字符串定义为“由第一个空字符终止并包括第一个空字符的连续字符序列”。但在二进制数据中，空字符（零字节）只是另一块不一定有任何意义的数据。

如果您的二进制数据如下所示（十六进制）：

```
4b d9 e7 b3 00 96 89 fb 
```

然后`strcpy()`将忽略`00`字节之后的所有内容。更糟糕的是，如果您的二进制数据如下所示：

```
4b d9 e7 b3 2f 96 89 fb 
```

没有空字节， then ， or ，或*任何*字符串函数将继续超过缓冲区的末尾，并产生不可预测的结果。`strcpy()``strlen()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:06:11.523

您假设 one 发送的数据`write()`恰好由 one 读取`read()`。TCP 或 Sockets API 规范中没有任何内容支持这种假设。您必须阅读直到收到完整的消息，并且“消息”是由您定义的，而不是由 TCP 或 API 定义的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T22:30:12.013

仅出于调试目的，在and`sleep()`之间可能会有帮助，以便让服务器有时间响应？从长远来看，配置适当的超时将是处理它的正确方法。再说一次，我可能完全走错了路。`write()``read()`

# highcharts - HighCharts 生成表

> ID：12887074
> 
> 赞同：2
> 
> 时间：2012-10-14T22:14:38.160
> 
> 标签：highcharts, formatting

我真的需要这方面的帮助。

基于[这个问题](https://stackoverflow.com/questions/11885092/highcharts-with-datatable)，我正在尝试从高图表生成表格。

在这个[Fiddle](http://jsfiddle.net/kEFHx/)表中生成正常，但我需要数据值是文本，而不是数字格式。

我认为需要在这一行更改格式，但我不确定......

```
Highcharts.numberFormat(series[i].data[category_index].y, valueDecimals) + valueSuffix, 
```

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T13:21:38.207

您无法用文本替换数据值并显示它的原因是因为您将数据类型定义为十进制并使用 将`Highcharts.numberFormat`y 值转换为小数。由于您尝试输入文本，因此它无法将字符串格式化为小数，因此它为空。现在，您不能简单地`Highcharts.numberFormat`拨打电话并进行这项工作。HighCharts 数据系列需要一个数字 y 值。所以，为了做你想做的事，我们使用了一个未记录的点属性，叫做`Note`.

这是我的尝试。如果您只想使用 HighCharts 在 SVG/VML 中创建表格，您可以执行以下操作。创建一个这样的数据系列：

```
{
        name: 'Tokyo',
        data: [{
            y: 7.0,
            Note: 'note 1'},
        {
            y: 6.9,
            Note: 'note 2'},
        {
            y: 9.5,
            Note: 'note 3'},
        {
            y: 14.5,
            Note: 'note 4'},
        {
            y: 18.2,
            Note: 'note 5'},
        {
            y: 21.5,
            Note: 'note 6'},
        {
            y: 25.2,
            Note: 'note 7'},
        {
            y: 26.5,
            Note: 'note 8'},
        {
            y: 23.3,
            Note: 'note 9'},
        {
            y: 18.3,
            Note: 'note 10'},
        {
            y: 13.9,
            Note: 'note 11'},
        {
            y: 9.6,
            Note: 'note 12'}
                                        ],
        visible: false} 
```

现在，`y`您将`Note`像以前一样循环遍历项目，而不是循环值，只是删除了数字内容：

```
$.each(series, function(i) {
    renderer.text(series[i].data[category_index].Note, cellLeft + colWidth - cellPadding, tableTop + (i + 2) * rowHeight - cellPadding).attr({
        align: 'right'
    }).add();
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/wergeld/zRkgQ/1/)（仅更新了一个系列以使用该`Note`语法，但您明白了）。

# playframework - 编辑数据库中的对象

> ID：12887075
> 
> 赞同：0
> 
> 时间：2012-10-14T22:14:53.203
> 
> 标签：playframework, playframework-2.0

我有一个扩展模型的类，包含一个简短的文本和 id。对象存储在数据库中。

我当前的问题是：每次我尝试编辑条目时都会创建一个新版本，而不是替换旧版本的对象。

对我来说，它看起来好像对象在保存之前被复制了？

如果有人能告诉我如何避免这种情况，我会很高兴！:-)

模型：

```
@Entity
public class Entry extends Model {

private static final long serialVersionUID = 1L;

@Required
public String   text;   
public String   studentName = "Hans";
@Id
public long     id;
public static   Finder<Long, Entry> finder = new Finder<Long, Entry>( Long.class, Entry.class);

public static Entry getMe(Long id) {
    return finder.byId(id);
}

public static List<Entry> getAll() {
    return finder.all();
}

public static void saveMe(Entry toDataBase) { 
    if(finder.byId(toDataBase.id)!=null)  // this seems to be always NULL 
    {
        System.out.println("update");
        toDataBase.update(); 
    }
    else
    {
        System.out.println("save new");
        toDataBase.save();
    }
} 
```

控制器部分：

```
public static Result createReport(Long id) {
    if(Entry.getMe(id)==null)
        return ok(reports.render(form(Entry.class), Entry.getMe(id)));//Entry.class)));

    return ok(reports.render(entryForm.fill(Entry.getMe(id)),Entry.getMe(id)));//form(Entry.class), Entry.getMe(id)));//Entry.class)));
}
public static Result storeReport() {    
    Form<Entry> filledForm = entryForm.bindFromRequest();
    if(filledForm.hasErrors()) {
        return badRequest(error.render());
    } else {
        Entry.saveMe(filledForm.get());
        return ok(reports.render(filledForm, filledForm.get()));
    }
} 
```

编辑：html部分：

```
@(entryForm: Form[Entry],e: Entry)
@import helper._
@main("report creation") {
<h1>report for Nils</h1>

    @form(routes.Application.storeReport()) {
        @textarea(entryForm("text"))
        <input type="submit" value="Store Report">
    }
    <br />
    <br />
    @(if(e!=null)e.getid())
    @form(routes.Application.listStuff()) {
        <input type="submit" value="Overview">
    }
} 
```

# iphone - TableView 在 didSelectRowAtIndexPath 中没有更新

> ID：12887081
> 
> 赞同：0
> 
> 时间：2012-10-14T22:15:24.340
> 
> 标签：iphone, uitableview, sdk

我有问题重载数据。如果我把它放在`[tableView reloadData];`didSelectRowAtIndexPath 下，它会在我选择行时刷新。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath    *)indexPath {
    [tableView reloadData];
    DetailsViewController *detailsViewController = nil;
    [detailsViewController setMainImage:[UIImage imageNamed:@"1.png"]]; 
```

但是我需要在加载时刷新。所以我把

```
- (void)viewWillAppear:(BOOL)animated {
    [tableView reloadData];
} 
```

但我收到错误消息“未知接收器'tableView'...”

我也尝试使用 [self.tableView reloadData]; 但错误消息“在对象'FavoritesTabViewController”上找不到属性'tableView'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:54:56.383

尝试在 cellForRowAtIndexPath 中重新加载表格视图，因为每次加载表格时都会调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:47:17.797

问题是 tableView 不在 ViewWillAppear 方法的范围内。在 didSelectRowAtIndexPath 中，它在传递给此方法的范围内。

# jquery - ie8中样式表内的媒体查询

> ID：12887082
> 
> 赞同：0
> 
> 时间：2012-10-14T22:15:26.793
> 
> 标签：jquery, css, internet-explorer-8, media-queries

我试图让@media 查询在 IE8 的样式表中工作。

许多人推荐使用以下插件：[http ://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)

我确定我正确使用它（我不是 @import 样式表）。但是它在 IE8 中根本不起作用。不幸的是，它已经多年没有更新了，也许它与 jQuery 1.7 不兼容

有没有人有最新版本的 jQuery 的工作解决方案。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:02:47.267

正如评论中所说的@elclanrs 使用**Respond**。它是一个处理`min-width`和`max-width`媒体查询的轻量级库：

在 github 上获取：[https ://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:22:41.583

你可以使用 Modernizr 的 mq 函数来解决它：[链接](http://modernizr.com/docs/#mq)

快速/简单的例子：

```
if(Modernizr.mq('(min-width: 940px)')) {
    $('head').append('<link rel="stylesheet" href="ie8.css" type="text/css" />');
} 
```

# javascript - 用于切换表格单元格可见性的 Javascript

> ID：12887085
> 
> 赞同：1
> 
> 时间：2012-10-14T22:15:43.373
> 
> 标签：javascript, html-table, toggle, cell, visibility

我有一个创建 html 报告的代码。

它使用 html 表格来显示结果，表格是可排序的，并且它们是自动斑马条纹的，因此已经有 Javascript 并且它全部嵌入内联，因此可以简单地与用户共享文件。

我对 Javascript 没有很好的掌握，而且这样做已经够难了。但是，现在的一个问题是，有时某些单元格中有很多数据。然而，这是设计使然，我希望找到一个优雅的解决方案。

我想要的是一个 Javascript 函数或一组函数，我可以在其中按下表格中的任何单元格并让它切换可见性。

换句话说 - 有一个包含许多单元格行和列的表格。当用户按下一个单元格时，其内容是不可见的，因此表格的其余部分将自行调整大小。因此 - 具有多行内容的单元格会重新调整行高的大小。

在这种方法中，由于大单元格是不可见的，因此可以更容易地比较许多具有一个单元格的数据行。

我找到了在表格外实现按钮以隐藏整个行或列的解决方案。带有输入字段的按钮，您可以定义一个 ID 并让它隐藏该 ID。我认为为每个单元格设置不同的唯一 ID 并不明智，我想要更简单的东西。

捕获单元格上的任何 onclick 事件的全局函数，这很好地使单元格内容切换可见性。

我知道我已经多次重复了我的愿望，但希望这让我的愿望更加清晰。

编辑：

这是我最终使用的最终代码。似乎工作得很好：

```
function tableclick(e) 
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    while(target != this && (!target.tagName || target.tagName != "TD")) target = target.parentNode;
    if( target != this) 
    {
        toggleVis(target)
    }
}

function toggleVis(obj) 
{
    if ( obj.style.fontSize != "0px" ) 
    {
        obj.style.fontSize = "0px"
    }
    else 
    {
       obj.style.fontSize = "16px"
    }
} 
```

然后简单地添加`onclick=tableclick(event)`到您的表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:20:09.587

将`onclick`事件附加到表中，然后查看事件的目标。

```
table.onclick = function(e) {
    e = e || window.event;
    var target = e.target || e.srcElement;
    while(target != this && (!target.tagName || target.tagName != "TD")) target = target.parentNode;
    if( target != this) {
        // "target" is the cell that was clicked. Do something with it.
    }
} 
```

旁注：您不需要 JavaScript 来对行进行斑马条纹。只需使用 CSS：

```
tr {background-color:white}
tr:nth-child(even) {background-color:black;} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T22:23:23.767

如果您想学习，jQuery 是您的最佳选择。这是一个很棒的 javascript 框架，随着您对 javascript 的熟悉，它会让您的生活变得更加轻松。jQuery 具有执行您所说的功能的功能。查看上的[文档](http://api.jquery.com/toggle/)`toggle()`。

你会做这样的事情：

```
$('td').click(function() {
    $('td').show();
    $(this).toggle();
}); 
```

这将“切换”您单击的任何 TD 的可见性。 [这](http://jsfiddle.net/aGumq/)是一个小提琴。

# c++ - 使用具有生成器类型的 C++ 模板函数

> ID：12887086
> 
> 赞同：0
> 
> 时间：2012-10-14T22:15:48.490
> 
> 标签：c++, templates, generator

我正在实现一个模板函数，它将参数迭代器指向的序列的前 n 个元素的值设置为调用生成器函数返回的值。

我有以下代码：

```
template <typename IteratorOut, typename SizeType, typename Generator> IteratorOut createSequence(IteratorOut out, SizeType n, Generator gen) {
    std::vector<Generator> vec;
    for (SizeType i = 1; i <= n; i++) {
        vec.push_back(gen());
    }
    std::copy(vec.begin(), vec.end(), out);

    return out;
} 
```

我正在使用以下内容测试该功能：

```
int generate () {
    return 5;
}
...
std::vector<int> vec_int;

createSequence(vec_int.begin(), 5, generate);
for (std::vector<int>::iterator iter = vec_int.begin(); iter != vec_int.end(); iter++) {
    std::cout << *iter << std::endl;
} 
```

我收到“错误：从 'int (*)()' 到 'int' 的无效转换”。你能看出我的模板函数有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:34:21.507

向量类型错误：

```
std::vector<Generator> vec; 
```

这里，`Generator`是一个函数，而你想要一个`int`s 的向量：

```
std::vector<SizeType> vec; // SizeType is an euphemism for int 
```

但也许你根本不需要向量！

```
for (SizeType i = 1; i <= n; i++) {
    *out = gen(); // is this what you want?
    ++out;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:37:01.380

嗯，`Generator`是生成器函数的类型，而不是生成器函数返回的类型。你正在创建一个这种类型的向量。因此出现错误，当您插入数组时，您试图将 a`int`返回的a 转换`Generator`为 a `int(*)()`。

但是你为什么不直接插入到序列中，而不是通过向量呢？

```
template <typename IteratorOut, typename SizeType, typename Generator> 
IteratorOut createSequence(IteratorOut out, SizeType n, Generator gen) {
    for (SizeType i = 0; i < n; i++)
       *out++ = gen();
    return out;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:47:18.650

实际上，该算法已经存在于标准库中。不要使用临时向量，但也不要使用循环。使用[`std::generate_n`](http://en.cppreference.com/w/cpp/algorithm/generate_n)：

```
template <typename IteratorOut, typename SizeType, typename Generator>
IteratorOut createSequence(IteratorOut out, SizeType n, Generator gen) {
    std::generate_n(out, n, gen);
    return out;
} 
```

事实上，在 C++11 中，这可以重写为：

```
template <typename IteratorOut, typename SizeType, typename Generator>
IteratorOut createSequence(IteratorOut out, SizeType n, Generator gen) {
    return std::generate_n(out, n, gen);
} 
```

…换句话说，你的函数只是`std::generate_n`. 签名和语义是相同的。

# php - 你如何使用 codeigniter 段？

> ID：12887087
> 
> 赞同：1
> 
> 时间：2012-10-14T22:15:52.630
> 
> 标签：php, codeigniter, codeigniter-2

我是 codeigniter 2 的新手，我对 URI 段有疑问。

当我有不同数量的段时，我应该怎么做？

例如（伪代码）

```
if(number of segments are 3){
   do something
}elseif(number of segmens are only 2){
  do something else
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:21:03.613

您可以使用[URL 类](http://codeigniter.com/user_guide/libraries/uri.html) `total_segments()`

```
//Returns the total number of segments.
if ($this->uri->total_segments() == 3) {
    //do something
} else {
    //do something else
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T22:21:28.780

段的数量实际上只与应用程序相关，不应该出现在您的代码中。您可以通过为它们分配变量来使用它们。所以说你有一个订单列表，你想要编辑它的能力。你可以有一个像 myorders/edit_order/12 这样的 url，然后在控制器中你会像这样使用该段：

```
function edit_order()
{
   $this->load->helper->('uri'); // although I load this in the autoload.php since it gets used often
   $orderId = $this->uri->segment(2);
} 
```

我真的看不出你需要知道段数的原因，只是哪个段包含你正在传递的数据。

# ios - 如何从我的 AIR for iOS 游戏的兼容性中排除第一代 iPad？

> ID：12887088
> 
> 赞同：0
> 
> 时间：2012-10-14T22:15:53.527
> 
> 标签：ios, ipad, air, compatibility

我使用 Flash 构建了一个 iPad 游戏，使用 AIR 3.4 for iOS 导出，该游戏在 iPad 2 和 iPad 3 上运行良好，但运行缓慢且无法在 iPad 1 上播放。但是，我找不到排除 iPad 的位置1 来自兼容性列表。我在哪里可以在 Flash 中禁用 iPad 1 的兼容性？

谢谢，坎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:45:24.310

我没有测试过，但看起来你可以通过将最低操作系统设置为 iOS6 来消除 iPad 1

<key>MinimumOSVersion</key> <string>6.0</string>

这是一个链接：[http ://forums.adobe.com/thread/1094168](http://forums.adobe.com/thread/1094168)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:18:22.373

尽管 Apple 不喜欢您这样做，但您可以将前置摄像头作为应用程序的要求，即使它在技术上可能不会使用它。（请参阅：[如何在 App Store 中要求 iPad 2 或 iPhone 4S](https://stackoverflow.com/questions/7919586/how-to-require-ipad-2-or-iphone-4s-in-app-store?rq=1)）

另一种选择是使应用程序仅针对 iOS 6，但这可能会限制您的采用。

# ruby - Ruby 中的迷宫生成

> ID：12887089
> 
> 赞同：-1
> 
> 时间：2012-10-14T22:15:54.980
> 
> 标签：ruby, algorithm, maze

在看到这篇用 PHP 制作[完美迷宫生成（基于瓦片的版本）的](http://www.emanueleferonato.com/2008/12/06/perfect-maze-generation-tile-based-version/)旧文章后，我尝试将原始 PHP 代码翻译成 Ruby。几次尝试后，我看不出我在哪里犯了错误。

这是我的 Ruby 代码：

```
maze_width = 9
maze_height = 7
moves = []
width = 2*maze_width +1
height = 2*maze_height +1
maze = Hash.new{|h, k| h[k] = []}

for x in 0..height-1
    for y in 0..width-1
        maze[x][y] = 1
    end
end

x_pos = 1
y_pos = 1
maze[x_pos][y_pos] = 0
moves.push(y_pos + (x_pos * width))
while(!moves.empty?)
    possible_directions = ""
    # puts "x_pos: #{x_pos} y_pos: #{y_pos}"
    if(maze[x_pos+2][y_pos]== 1 and x_pos+2!=0 and x_pos+2!=height-1)
        possible_directions += "S"
    end
    if(maze[x_pos-2][y_pos]== 1 and x_pos-2!=0 and x_pos-2!=height-1)
        possible_directions += "N"
    end
    if(maze[x_pos][y_pos-2]== 1 and y_pos-2!=0 and y_pos-2!=width-1)
        possible_directions += "W"
    end
    if(maze[x_pos][y_pos+2]== 1 and y_pos+2!=0 and y_pos+2!=width-1)
        possible_directions += "E"
    end
    if(!possible_directions.empty?)
        move = rand(possible_directions.length)
        case(possible_directions[move].chr)
            when "N":
                maze[x_pos-2][y_pos] = 0;
                maze[x_pos-1][y_pos] = 0;
                x_pos -= 2;
            when "S":
                maze[x_pos+2][y_pos] = 0;
                maze[x_pos+1][y_pos] = 0;
                x_pos += 2;
            when "W":
                maze[x_pos][y_pos-2] = 0;
                maze[x_pos][y_pos-1] = 0;
                y_pos -= 2;
            when "E":
                maze[x_pos][y_pos+2] = 0;
                maze[x_pos][y_pos+1] = 0;
                y_pos += 2;
        end
        moves.push(y_pos+(x_pos*width))

    else 
        back = moves.pop
        x_pos = (back/width).floor
        y_pos = back%width
    end
end
# draw the maze

for x in 0..height-1
    for y in 0..width-1
        print((maze[x][y] == 1) ? "#" : " ")
    end
    puts
end 
```

如果我执行它，它会显示一个丑陋且不完美的迷宫：

```
###################
# #               #
#    #         #   
#                  
##       #   #     
#     #         #  
#          # #     
        #          
#              #   
  #       #        
##       #   #     
    # #     #      
#        #         
              #    
################### 
```

这与 PHP 输出确实不同：

```
###################
#   # #           #
### # # ##### ### #
# # # #   # #   # #
# # # ### # ### ###
# # #   #     #   #
# # ### ##### ### #
# #   #         # #
# ### ########### #
# #   #         # #
# # ### ####### # #
# #     #   #   # #
# ####### # # ### #
#         #       #
################### 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:42:47.527

在语言之间翻译代码时，请注意挑剔的语义差异。在这里咬你的是，Ruby 中的负索引从数组末尾倒数，而不是返回 null。迷宫代码没有任何范围检查来查看是否`x_pos`或`y_pos`正在离开数组的末尾；如果要求不存在的元素，它仅依赖于返回 null 的数组。最终结果是您允许从左侧和顶部移动并得到无意义的结果。如果随机器命中正确，您还将在右侧和底部得到 nil 异常，因此您也需要检查这些异常。

因此，在四个方向检查上，添加一些范围代码。例如，转动这个：

```
if(maze[x_pos+2][y_pos]== 1 and x_pos+2!=0 and x_pos+2!=height-1)
    possible_directions += "S"
end
if(maze[x_pos-2][y_pos]== 1 and x_pos-2!=0 and x_pos-2!=height-1)
    possible_directions += "N"
end 
```

进入这个：

```
if(x_pos+2 < height and maze[x_pos+2][y_pos]== 1 and x_pos+2!=0 and x_pos+2!=height-1)
    possible_directions += "S"
end
if(x_pos-2 > 0 and maze[x_pos-2][y_pos]== 1 and x_pos-2!=0 and x_pos-2!=height-1)
    possible_directions += "N"
end 
```

同样对于`y_pos`那些 和`width`。

# vb.net - vb.net 过滤器浏览器源码

> ID：12887091
> 
> 赞同：0
> 
> 时间：2012-10-14T22:16:03.057
> 
> 标签：vb.net, browser

我正在寻找一种方法来过滤进入的网页源代码（我可以在页面加载后更改它，但在这种情况下它是无用的，因为我想将自动播放属性从 1 翻转为 0），有没有办法做到这一点？

或者，我可以获取源代码，进行修改，然后写入新文档，但这需要大量额外的过滤才能将所有“/blah blah”类型的位置设置为“webpage.com/blah blah”。有没有办法让浏览器认为页面来自外部服务器而不是本地主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:38:00.723

您无需将其写入临时文件。您可以阅读（“获取源代码”）并预处理 HTML（“从 1 到 0 的自动播放属性”），然后将其分配给 WebBrowser.DocumentText 属性以显示页面。

# spring - 会话范围的 bean 在其他用户会话中查看

> ID：12887097
> 
> 赞同：0
> 
> 时间：2012-10-14T22:16:48.797
> 
> 标签：spring, security, jsf

我正在使用 spring 3.1 ， spring security 3.1 ， primefaces 和 jsf 2.0 。

我用简单的`username`and创建了一个登录页面`password`，这个页面链接到一个会话范围的 bean，它有一个用户名和密码。

例如，当`user x`访问该网站但仍未注销时，当其他地方的其他人查看登录页面时，`user x`已写入的用户名值自动出现在用户名字段中。

我怎样才能克服这个问题？

# joomla - 从 sef url 中删除组件部分，菜单项不完全

> ID：12887099
> 
> 赞同：0
> 
> 时间：2012-10-14T22:16:51.063
> 
> 标签：joomla, joomla2.5, sef

我已经为 joomla 2.5 构建了一个自定义组件。现在我想实现 sef url。所以我开始创建`router.php`文件。我几乎成功了。我唯一要更改的是删除组件名称链接。这是我得到的：

[http://host.tld/component/componentname/](http://host.tld/component/componentname/)

如果我使用别名创建菜单项，则 sef url 如下所示：

[http://host.tld/别名](http://host.tld/alias)

这是我想要的实际方案，但仅在我从菜单中单击菜单项时才会显示。如果我在主站点，这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:54:58.367

自己解决了这个问题：

如果您的组件只有一个菜单项（否则您必须选择正确的菜单项），您只需将这些行添加到您的代码中：

```
$app = JFactory::getApplication();
$menu = $app->getMenu();
$items = $menu->getItems('component', 'com_games');

if (!isset($query['Itemid']))   
    $query['Itemid'] =  $items->id; 
```

现在 joomla 使用菜单项别名来生成 sef url。

# php - php：错误变量未定义

> ID：12887103
> 
> 赞同：0
> 
> 时间：2012-10-14T22:17:28.327
> 
> 标签：php

我有一个无法解决的“注意：未定义变量”错误：

> 注意：未定义变量：第 22 行 C:\wamp\www\cible_envoi.php 中的 Nom

你能看看下面的代码并解释一下有什么问题吗？谢谢！

cible_envoi.php：

```
<?php
try
{
    $bdd = new PDO('mysql:host=localhost;dbname=chansonniersduquebec.com', 'root', '');
}
catch (Exception $e)
{
    die('Erreur : ' . $e->getMessage());
}

$req = $bdd->prepare('INSERT INTO chansonniersduquebec.com (Nom) VALUES(?)');
$req->execute(array($_POST['Nom'])); // *** Line 22 *** 
```

脚本.html：

```
<form id="Formulaire" name="Formulaire" method="post" action="cible_envoi.php">
  <label>
    <div align="center">Nom (votre nom d'artiste de préférence!)
      <span class="style1">*</span>
      <input type="text" name="Nom" id="Nom"/>
     </div>
     <p>&nbsp;</p>
   <label>
   ...
   <input type="submit" name="Soumettre" id="Soumettre" value="Soumettre" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:26:29.503

$bdd 超出范围。

```
 <?php
//Try this

    try
     {
        $bdd = new PDO('mysql:host=localhost;dbname=chansonniersduquebec.com', 'root', '');

         // Insertion du message à l'aide d'une requête préparée
          $req = $bdd->prepare('INSERT INTO chansonniersduquebec.com (Nom) VALUES(?)');

          $req->bindParam(1, $nom);

          $nom = $_POST['Nom'];

          $req->execute();
      }
      catch (Exception $e)
      {
        die('Erreur : ' . $e->getMessage());
      }

  ?> 
```

或者

```
<?php
//Try this
       $bdd = null;
    try
     {
        $bdd = new PDO('mysql:host=localhost;dbname=chansonniersduquebec.com', 'root', '');

      }
      catch (Exception $e)
      {
        die('Erreur : ' . $e->getMessage());
      }

         // Insertion du message à l'aide d'une requête préparée
          $req = $bdd->prepare('INSERT INTO chansonniersduquebec.com (Nom) VALUES(?)');

          $req->bindParam(1, $nom);

          $nom = $_POST['Nom'];

          $req->execute();

  ?> 
```

请同时输入您的姓名和 ID 一个字（Styles joués）。

# abstract-class - 空抽象函数不能包含主体

> ID：12887105
> 
> 赞同：20
> 
> 时间：2012-10-14T22:17:39.723
> 
> 标签：abstract-class, php

我正在尝试构建一个抽象类（StatusService），它与一些基本逻辑一起定义了*需要*在扩展类中存在的方法，但是遇到了这个我无法解释的错误：

> 致命错误：抽象函数 StatusService::upd() 不能在第 62 行的 /path/to/lib/services/service.class.php 中包含正文

我的基类的片段：

```
abstract class StatusService {
    /** ... */

    /**
     * @return boolean
     * @abstract
     */
    abstract public function upd(){}
} 
```

现在我可能完全错了（还没有写太多抽象类），但它看起来不像我有一个身体..？我将不胜感激任何指针，以帮助找出我做错了什么。

我的扩展类（现在只有一个）确实定义了 upd() 函数并返回一个值，但它仍然把那个错误转储给我。如果重要的话，这是在 MAMP Pro 上运行的 PHP 5.4.4。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-14T22:21:09.433

```
abstract public function upd(){} 
```

应该

```
abstract public function upd(); 
```

请注意，大括号.. 构成方法的主体。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T22:21:20.537

只需使用

```
abstract public function upd(); 
```

没有大括号

# android - 如何在 Android 模拟器上运行用 Necessitas 构建的 Qt 应用程序？

> ID：12887110
> 
> 赞同：2
> 
> 时间：2012-10-14T22:18:54.880
> 
> 标签：android, qt

适用于 Android 的 Qt 应用程序需要 Ministro，但是当安装 Ministro（Ministro-1.0.apk、Ministro-2.0.apk 或“Ministro II.apk”）应用程序告诉我找不到 ministro 或（对于“Ministro II.apk”）ministro 版本不兼容，需要更新。我已经从 sourceforge.net 上的官方页面下载了 Ministro。由于模拟器上不允许市场，从市场安装 ministro 失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:31:52.923

前段时间注意到类似的情况，不知道为什么。就像从那个网站下载的 Ministro 版本不是最新的一样。

无论如何，我通过下载市场提供的 ministro 版本或将 necessitas SDK 中的 Qt 库放在设备的 /data/local/qt 中来解决。您可以在模拟器中执行此操作，因为您具有 root 权限。

因此，对于模拟器，首先将模拟器中的所有 Qt 库从 /Android/Qt/482/armeabi[-v7a] 复制到 /data/local/qt 并启动您的项目。在开始之前检查 Qt Creator -> Projects -> Run -> Deploy Configurations -> Use Qt library from device 是否被标记并且“使用本地 Qt 库”没有被选中。

这样，它将忽略 Ministro，它应该使用您推送的 Qt 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T17:37:48.823

我遇到了同样的问题，这解决了它：

[将所有相关的 Qt dll 复制到设备路径的想法对我来说有点令人反感；）

1) 我从以下位置下载了 Ministro II + 配置工具 apk(es)

[http://files.kde.org/necessitas/installer/release/Ministro%20II.apk](http://files.kde.org/necessitas/installer/release/Ministro%20II.apk)

2）我启动了模拟器，然后使用包工具中的adb来安装这个apk。 ![命令](../Images/c2e4c4ebdd648ce63f9d9b5a0c4aea9e.png)

在此之后，一旦我启动我的应用程序，Ministro 会提取所需的 Qt dll，我可以启动我的应用程序。

# android - 通过终端在 ginerbread 上打开 adb over wi-fi

> ID：12887111
> 
> 赞同：1
> 
> 时间：2012-10-14T22:18:56.470
> 
> 标签：android, adb, root, smart-tv

我有一台带有锁定引导加载程序的 Android 智能电视，但启用了 root 访问。它不允许重新安装`/system`为可读/写，所以我不能安装像超级用户这样的东西，但是有一个`sudo`应用程序（但是没有`su`二进制文件）。
简而言之，要访问设备，我需要`adb`通过 Wifi 打开（它没有任何 USB 端口）来调试我的应用程序。

是否可以通过终端执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:00:58.170

[您可以尝试此处](http://forum.xda-developers.com/showthread.php?t=1685736)提到的过程，因为您有某种`root`访问权限。但是，我不熟悉 Android TV，因此可能会也可能不会。

此外，您提到了 root 访问权限，但没有`su`二进制文件，而是您有`sudo`？如果您有**任何**类型的升级权限，您应该能够以`/system`读/写身份重新挂载并安装超级用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:53:49.207

我不确定您说的是哪种设备。但以下序列适用于 Sony Google TV

谷歌电视和桌面都应该在同一个网络中。

1.  选择应用程序 > 开发，启用远程调试
2.  在调试器 IP 地址中，输入您的电脑的 IP 地址（从您要调试的位置）记下 google tv 的 IP 地址

从你的电脑，

adb connect 192.168.0.101:5555（将 192.168.0.101 替换为您的 google tv 的 IP 地址）

现在您可以使用所有常规 adb 命令，例如 adb install 等

# asp.net - 动态加载一个页面中的多个页面

> ID：12887114
> 
> 赞同：0
> 
> 时间：2012-10-14T22:19:13.180
> 
> 标签：asp.net, c#-4.0

我有一个用 c#、ASP.NET 编写的网站。我想根据左侧菜单中的链接动态加载右侧 div 中的页面。但我不知道从哪里开始，哪个控制等等。请帮帮我..

![在此处输入图像描述](../Images/2038468214739e4ebeca8c93d80072a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:23:59.910

使用右侧的 iframe 标记包含动态加载的页面，然后在右侧链接的目标属性中指定 iframe 的名称属性。

```
<table>
 <tr>
   <td>
     <a href='www.reddit.com/r/jquery' target='contentFrame'>first Link</a> <br/>
     <a href='www.reddit.com/r/javascript' target='contentFrame'>Second Link</a>
   </td>
   <td>
               <iframe name='contentFrame' />
   </td>

    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:25:33.233

有多种方法可以做到这一点。一种简单的方法是使用`CSS`创建布局（即左侧的菜单，右侧的内容）和`Masterpage`. A`Masterpage`是一个页面，它是其他页面在具有共同方面时可以使用的模板。在这里，左侧的菜单对您的所有页面都是通用的，因此您可以在母版页中创建该布局。每个页面（例如`firstpage.aspx`）都继承该 Masterpage，您可以简单地填写右侧的内容。

有很多 CSS 资源，但[这个站点](http://coding.smashingmagazine.com/2007/01/12/free-css-layouts-and-templates/)可能会帮助您开始布局方面。可以在[此处](http://msdn.microsoft.com/en-us/library/wtxbf3hh%28VS.100%29.aspx)找到有关 Masterpages 的更多信息。

替代方法包括使用 AJAX 动态加载页面。根据您的设计，这可能会有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:25:49.980

使用 a`MasterPage`和 ContentPages

例子：

### 母版页

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="GlobalMaster.master.cs" Inherits="your masterpage class" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div id="menupanel">
    </div>
    <div id="mainpanel">
       <asp:ContentPlaceHolder ID="mainPlaceHolder" runat="server" />
    </div>
</body>
</html> 
```

### 内容页

```
<%@ Page Title="" Language="C#" MasterPageFile="~/path to your masterfile.Master" AutoEventWireup="true" CodeBehind="page code behind" Inherits="page class" %>

<asp:Content ID="Content1" ContentPlaceHolderID="mainPlaceHolder" runat="server">
    <h3>
        Your cool content here
    </h3>
</asp:Content> 
```

`Page`请注意如何通过在指令中使用以下属性来定义要使用的 MasterPage ：

```
<%@ Page MasterPageFile="~/path to your masterfile.Master" 
```

当您定义这样的页面时，它们被称为**内容页面**

页面的*内容***必须**在`Content`控件中定义：

```
<asp:Content ID="Content1" ContentPlaceHolderID="mainPlaceHolder" runat="server"> 
```

还要注意名称必须如何在`MasterPage`' 的`ContentPlaceHolder`ID 和`Content`'`ContentPlaceHolderID`属性之间匹配

# java - 适用于交互式移动地图的语言/框架

> ID：12887118
> 
> 赞同：4
> 
> 时间：2012-10-14T22:19:43.780
> 
> 标签：java, android, c++, ios, map

我的任务是为一组用于 Android 和 iOS 设备的多层互连建筑物创建交互式 2D 地图应用程序。该应用程序最终应该具有谷歌街景界面和可能的 3D 建模查看选项。

我的问题是关于适合此任务的最佳编程语言或预先存在的框架，您会推荐什么？我有大约两年的时间来完成这项任务，所以学习另一种语言不会有问题。

所需的应用程序功能：

*   多个建筑物和楼层的交互式 2D 地图。
*   谷歌街景类型功能。
*   具有与谷歌地图类似的功能的寻路。
*   Android 和 iOS 支持以 Android 作为主要开发平台。

可选应用功能：

*   由 3D 艺术家建模的多个建筑物和楼层的交互式 3D 地图。
*   能够适应基于网站的应用程序。

这绝对是一项艰巨的任务，可选功能就是这样 - 可选的。该项目是为一所大学设计的，它也可能位于一个大触摸屏基座上，因此需要稳定且维护成本低我要求很多，我知道。

我目前支持 C#/++。

你们怎么看？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:19:55.453

从内容开发的角度而不是应用程序开发的角度来看你的项目可能会好得多。

开发您的地图和 3D 内容并发布为参考 COLLADA 3D 模型的 KML 文档。

然后，您可以使用现有的 Google 地图和 Google 地球查看器查看/测试，包括移动版本（例如[http://www.google.com/mobile/earth/](http://www.google.com/mobile/earth/)）

还有一些方法可以提供自定义街景或街景叠加层（例如[http://googlemapsmania.blogspot.com/2012/07/custom-street-view-tutorial.html](http://googlemapsmania.blogspot.com/2012/07/custom-street-view-tutorial.html)）

如果现有的免费应用程序已经很好地解决了您在多个平台上的用例，那么您将浪费时间进行重新发明。另一方面，如果您真的想编写自定义应用程序，您可能仍然需要一些自定义内容，并且您的内容采用“标准”格式是值得的，因此如果您开始就不会丢失任何内容通过以 Google 兼容格式开发内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:32:57.540

对于室内地图，我强烈建议您首先查看 Google 实施的室内地图支持。

[http://maps.google.com/help/maps/floorplans/](http://maps.google.com/help/maps/floorplans/)

以非常低的努力启动和运行 Android 版本可能会有所帮助。

如果你想自己写，你需要同时学习Java和Objective C，或者使用可以在平台之间移植的中间件，比如[Xamarins](http://xamarin.com/)

如果使用 Xamarin 中间件，则可以使用 C#。

# java - 循环浏览一个文件夹中存在的不同文件

> ID：12887119
> 
> 赞同：0
> 
> 时间：2012-10-14T22:19:46.050
> 
> 标签：java

我有一个 java 程序，它读取文件文本中的每一行并处理文件的文本，然后打印结果。我需要对特定文件夹（目录）中存在的每个文件执行相同的操作。所以，我需要程序遍历文件夹中的每个文件并提取文本..等的内容。我的问题是如何使用 Java 遍历文件夹中的每个文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T22:22:25.150

一旦你创建了一个`File`引用目录的对象，你可以调用[`listFiles`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)来获取目录中所有文件的数组。

```
// assuming myDir is the File object that represents the directory
File[] dirContent = myDir.listFiles();
for (File f : dirContent)
{
    if (!f.isDirectory())
    {
        // process file.
    }
} 
```

[`File#listFiles(FileFilter)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)或者，您可以通过调用适当的文件过滤器来仅获取不是目录的文件列表。例如：

```
// assuming myDir is the File object that represents the directory
File[] dirContent = myDir.listFiles(new FileFilter() {
    @Override boolean accept(File pathname)
    {
        return !pathname.isDirectory();
    }
});
for (File f : dirContent)
{
    // process file.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T22:50:50.710

我只想抛出另一种方法来做到这一点。这个文件搜索和处理软件： http: [//www.softpedia.com/get/File-managers/JFileProcessor.shtml](http://www.softpedia.com/get/File-managers/JFileProcessor.shtml) [https://github.com/stant/jfileprocessor](https://github.com/stant/jfileprocessor)

将允许您按名称、大小、日期在 X 或所有深度的子文件夹中搜索带有 glob 或正则表达式的文件。您可以保存到列表窗口或文件。然后你可以运行一个groovy（想想java）脚本来对文件列表做任何你想做的事情；zip 或 tar，修改列表字符串，如 sed、删除、移动、复制文件、grep 或 ls -l 它们，等等。它还可以让您按摩您的列表，例如添加，删除，从另一个列表中减去一个列表。

# regex - Tcl：如何在多行字符串中有条件地替换

> ID：12887124
> 
> 赞同：2
> 
> 时间：2012-10-14T22:20:39.010
> 
> 标签：regex, tcl, cisco

鉴于我有一个巨大的字符串，假设 1000 行，让我们将该字符串命名为“itext”。

而且我只对“itext”中包含“Description:”一词的那些行感兴趣。例如，仅在原始“itext”字符串中包含字符串“Description:”的行上进行以下替换：

```
regsub -all -- {Loopback} $itext "Lo" itext ; 
```

有什么方法可以做到这一点（无需逐行拆分和加入）？

例如，“itext”可以是这样的：

```
Loopback11 is up, line protocol is up 
Hardware is Loopback
Description: Loopback11-Eigrp-National
MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec, 
reliability 255/255, txload 1/255, rxload 1/255
Encapsulation ARPA, loopback not set
Keepalive set (10 sec)
Auto-duplex, Auto-speed
input flow-control is off, output flow-control is off
ARP type: ARPA, ARP Timeout 04:00:00
Last input never, output never, output hang never
Last clearing of "show interface" counters never
Input queue: 0/2000/20036/0 (size/max/drops/flushes); Total output drops: 242246
Queueing strategy: fifo
Output queue: 0/40 (size/max)
5 minute input rate 0 bits/sec, 0 packets/sec
5 minute output rate 0 bits/sec, 0 packets/sec
159767635870 packets input, 108501870627241 bytes, 0 no buffer
Received 9361144 broadcasts (8029769 multicasts)
0 runts, 20036 giants, 0 throttles
20036 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
0 watchdog, 0 multicast, 0 pause input
0 input packets with dribble condition detected
200041278050 packets output, 193147599625066 bytes, 0 underruns
0 output errors, 0 collisions, 2 interface resets
0 babbles, 0 late collision, 0 deferred
0 lost carrier, 0 no carrier, 0 pause output
0 output buffer failures, 0 output buffers swapped out 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T01:27:48.893

您只需要`-line`启用换行敏感匹配的选项：

```
regsub -all -line -- {^(Description:.*)Loopback} $itext {\1Lo} itext 
```

[http://tcl.tk/man/tcl8.5/TclCmd/regsub.htm](http://tcl.tk/man/tcl8.5/TclCmd/regsub.htm)

# asp.net - 使用 fancybox/ASP.NET 显示动态检索的图像

> ID：12887130
> 
> 赞同：0
> 
> 时间：2012-10-14T22:21:39.583
> 
> 标签：asp.net, fancybox

无法让 fancybox 正确显示我的图像，我使用 ASP.NET：

```
<a class="fancybox" rel="group" href="photoreader.aspx?RoomID=7049">
  <img src="photoreader.aspx?RoomID=7049" alt="" />
</a> 
```

IMG 显示正常，但花式框*导航*到“ `photoreader.aspx?RoomID=7049`”页面？

如果我替换“`photoreader.aspx?RoomID=7049` ”替换为“”，`mytextpic.jpg`一切正常。

我正在使用它进行设置：

```
$(document).ready(function() {
  $(".fancybox").fancybox({type: image});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:52:42.857

尝试

```
$(document).ready(function() {
  $(".fancybox").fancybox({"type": "image"});
}); 
```

...`image`是一个字符串，而不是一个变量，所以它需要用引号引起来。

# ios - AVPlayer 没有声音

> ID：12887132
> 
> 赞同：1
> 
> 时间：2012-10-14T22:21:44.780
> 
> 标签：ios, audio, avplayer

我正在尝试使用 AVPlayer 播放 mp3（相机快门声音）。我已将所有内容简化为一个简单的按钮，按下该按钮即可播放声音。所有对象均已正确创建，但是当我在 iPhone 或 iPad（均运行 iOS 6）上运行应用程序时，不会产生声音。不，静音按钮未打开，音量已调高。:) 我可以在两台设备上的其他应用程序中听到声音。

我在做傻事吗？

```
- (void)playCameraShutterSound
{
    NSURL *url = [[NSBundle mainBundle] URLForResource:@"Grab" withExtension:@"mp3" ];
    AVPlayer* player = [AVPlayer playerWithURL:url];
    [player play];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T22:31:09.157

'player' 在方法结束时被释放。它必须保留为类变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:26:11.953

尝试这些行并将“yoursound.mp3”替换为您的文件名。：

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/yoursound.mp3", [[NSBundle mainBundle] resourcePath]]];
AVAsset *asset = [AVURLAsset URLAssetWithURL:url options:nil];
AVPlayerItem *anItem = [AVPlayerItem playerItemWithAsset:asset];
avplayer = [AVPlayer playerWithPlayerItem:anItem];
[avplayer play]; 
```

# ruby - “超级”如何与模块一起工作？

> ID：12887139
> 
> 赞同：5
> 
> 时间：2012-10-14T22:22:42.127
> 
> 标签：ruby, inheritance

我会在一个具体的例子上问它（在 Rails 中）。在“ [Destroy without Javascript (revised)](http://railscasts.com/episodes/77-destroy-without-javascript-revised) ”railscast 中，Ryan Bates 覆盖了`#resources`路由方法：

```
module DeleteResourceRoute
  def resources(*args, &block)
    super(*args) do
      # some code
    end
  end
end

ActionDispatch::Routing::Mapper.send(:include, DeleteResourceRoute) 
```

但是Ruby中的继承不是以**模块**是“超类”的方式工作的。`#super`那么，他怎么能从模块中调用呢？

如果可以覆盖这样的方法，那么人们不要这样做：

```
class SomeClass
  alias old_method method
  def method
    # ...
    old_method
    # ...
  end
end 
```

可能会这样做：

```
class SomeClass
  include Module.new {
    def method
      # ...
      super
      # ...
    end
  }
end 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:46:28.093

“超级”仅存在于“类”上下文中。super 不能生活在“纯模块”上下文中。所以，当你看到这样的代码时：

```
module DeleteResourceRoute
  def resources(*args, &block)
    super(*args) do
      # some code
    end
  end
end 
```

你应该有一个类来“包含这个模块”，然后“超级”生效，例如

```
class SomeClass extends BaseClass
  include DeleteResourceRoute
end

class BaseClass
  def resources
    puts "called parent!"
  end
end

SomeClass.new.resources  # => called parent! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T00:26:23.630

我想到了。有一个模块包含在`ActionDispatch::Routing::Mapper`中，并且该模块包含该`#resources`方法。如果`#resources`直接在 上定义`ActionDispatch::Routing::Mapper`，而不是在模块中，则覆盖它不会以这种方式工作（我们将不得不使用“别名”方法）。

一般来说，关于模块和类，模块就像包含它的类的超类。“表现得像一个超类”我的意思是，如果您`#foo`在模块上定义了一个方法，并且将该模块包含在一个类中，那么该类可以覆盖该`#foo`方法，然后调用`#super`，这将调用该模块的`#foo`方法。一个例子：

```
module Foo
  def foo
    puts "foo"
  end
end

class Bar
  include Foo

  def foo
    super
    puts "bar"
  end
end

Bar.new.foo
# foo
# bar
# => nil 
```

# c# - 为什么 Linq lambdas 不需要“return”语句，但我的需要？

> ID：12887145
> 
> 赞同：0
> 
> 时间：2012-10-14T22:23:48.230
> 
> 标签：c#, .net, linq, delegates, lambda

我在库中使用了相当多的 lambdas。真正让我恼火的一件事是我似乎无法摆脱 return 语句，而且我周围有相当多的样板类型代码。

到目前为止，它是这样工作的：

```
public delegate IBarelyView HandlerInvoker(IDictionary<string, string> route, IDictionary<string, string> form);
public void MyFunc(string foo, HandlerInvoker invoker) { } 
```

这是我让工人使用 MyFunc 的代码：

```
MyFunc("foobar", (x, y) => { return new Xyz();}); 
```

现在我知道这还不算太糟糕。但是，我真的很想能够使用 Linq 类型语法。例如，这很容易做到

```
ObjectList.Where(x=>x.Foo=="bar"); 
```

如您所见，Linq 语法的优点是没有`return`语句，“参数”周围没有括号，也没有大括号。

为什么我的 lambda 表达式中不能有这种语法？如果我删除 return 语句，我会收到关于并非所有代码路径都返回值的错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T22:27:47.773

尝试： `MyFunc("foobar", (x, y) => new Xyz());`

# javascript - 需要 JavaScript 数学帮助

> ID：12887147
> 
> 赞同：0
> 
> 时间：2012-10-14T22:24:13.580
> 
> 标签：javascript, jquery, math

我正在编写一个计算器，我遇到了一个问题。编程和编程所基于的数学不匹配。我将在下面提供代码。

```
 function calculate() {

  console.log(1);
  var activity = $("#txtActivity").val();

  var days = parseInt( $("#txtDays").val(), 10);
  var hours = parseInt( $("#txtHours").val(), 10);
  var minutes = parseInt( $("txtMinutes").val(), 10);
  var seconds = parseInt( $("txtSeconds").val(), 10);

  var MoneyMadeDuringActivity = (days * 21464) + (hours * 2683) + (minutes * 4472) + (seconds * 0.74);

  $("#CalcOutput").html("In the time it takes me to " + activity + ",<br />Barack Obama makes $" + MoneyMadeDuringActivity);

}

  $("#btnCalculate").click(function() {
    calculate();
  }); 
```

由 4 个 html 文本框组成，每个文本框都需要整数输入。该代码产生以下输出：

**在我在这里输入内容的时间里，巴拉克奥巴马赚了 $MoneyMadeDuringActivity **

我通过在每个文本框中输入 1 来测试此代码。应该是 24,192.46 美元，但我得到的是 28,619.74 美元。我究竟做错了什么？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:27:38.617

`minutes`您错过了乘数中的小数点。看起来应该是`44.72`，不是`4472`。

# javascript - 使用 GeoPlugin 设置选定的选项

> ID：12887148
> 
> 赞同：0
> 
> 时间：2012-10-14T22:24:19.727
> 
> 标签：javascript, jquery, json, html-select

我正在使用[http://geoplugin.net](http://geoplugin.net)插件来检测用户位置。我有一个`<select>`状态列表，并使用 jQuery

```
$.getJSON(url, function(data){
    var state = data['geoplugin_region'];
    $('#states').val(state).attr('selected',true);
    var selectId = "#" + state ;
    var citySelect = selectId + "-cities";
    $(citySelect).show();
}); 
```

然后它使用我编写的另一个插件来显示具有该州城市的正确选择。我的格式是选择 id`WA-cities`用于华盛顿。

然后我写了这个：

```
var detectedCity = data['geoplugin_city'];
var city = detectedCity.replace(" ","-");
var selectedCity = city.toLowerCase();
var stateDash = state + "-";
var selectedValue = stateDash + selectedCity;
$(citySelect).val(selectedValue).attr('selected',true); 
```

但是当检测到一个不在选择中的城市时，它只返回第一个值。如何检查该城市是否在选择中，然后仅在存在时才选择它。我的选择是这样设置的（对于华盛顿）：

```
<select name="cities" id="WA-cities" class="cities">
    <option value="" selected="selected" disabled>Select a City</option>
    <option value="WA-bellingham">Bellingham</option>
    <option value="WA-seattle">Seattle</option>
</select> 
```

选择的城市实际上更多。但我在默瑟岛被发现，这不在选择中。JavaScript 说`$(citySelect).val('WA-mercer-island).attr('selected',true);`，但只是选择了贝灵厄姆，因为没有默瑟岛。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:34:36.900

```
$(citySelect).val(selectedValue).attr('selected',true); 
```

这并不意味着“设置 value = selectedValue 的选项”。这是错的。

这是正确的方法，

```
$(citySelect + 'option[value="'+selectedValue+'"]').attr('selected',true); 
```

[这是一个 jsFiddle 示例](http://jsfiddle.net/wfAH5/1)

# java - 捕获当前 Webview 并保存到 SD 卡

> ID：12887155
> 
> 赞同：0
> 
> 时间：2012-10-14T22:25:18.490
> 
> 标签：java, android, webview

好的，所以我尝试在我的 webview 活动中显示的网页的按钮单击时捕获 webview，并将其保存到 sd 卡。

我的清单中有写入外部存储的正确权限，并且所有 webview 功能都工作得很好，就在我尝试捕获图像时。

```
 public void onClick(View v) {
    switch(v.getId()) {

            case R.id.button1:
                WebViewClientDemoActivity.web.goBack(); 
                break;

        case R.id.button2:
                WebViewClientDemoActivity.web.goForward();
                break;

            case R.id.button3:
                WebViewClientDemoActivity.web.capturePicture();
                //Capture Picture
            Picture picture = WebViewClientDemoActivity.web.capturePicture();
            //Create a new canvas
            Canvas mCanvas = new Canvas();
            //Draw the Picture into the Canvas
            picture.draw(mCanvas);
            //Create a Bitmap
            Bitmap sreenshot = Bitmap.createBitmap(picture.getWidth(),
            picture.getHeight(),Config.ARGB_8888);
            //copy the content fron Canvas to Bitmap
            //mCanvas.drawBitmap(mBitmapScreenshot, 0, 0, null);
            mCanvas.drawBitmap(sreenshot, 0, 0, null);
            //Save the Bitmap to local filesystem
            if(sreenshot != null) {
                   ByteArrayOutputStream mByteArrayOpStream = new
            ByteArrayOutputStream();
                    sreenshot.compress(Bitmap.CompressFormat.JPEG, 90,
            mByteArrayOpStream);

                try {
                    File folder = new File(Environment.getExternalStorageDirectory().toString()+"/Enlighten/Images");
                    folder.mkdirs();
                    // create a File object for the parent directory
                    File outputFile = new File(folder, "enlighten.jpg");
                    // now attach the OutputStream to the file object, instead of a String representation
                    FileOutputStream fos = new FileOutputStream(outputFile);
                    fos.write(mByteArrayOpStream.toByteArray());
                    fos.close();
                    Toast.makeText(WebViewClientDemoActivity.this, "File Created", Toast.LENGTH_SHORT).show();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                    Toast.makeText(WebViewClientDemoActivity.this, "File Not Found", Toast.LENGTH_SHORT).show();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
```

我收到此错误消息。（更新）

```
10-15 11:33:10.336: W/System.err(20577): java.io.FileNotFoundException: /mnt/sdcard/Enlighten/Images/enlighten.jpg: open failed: ENOENT (No such file or directory)
10-15 11:33:10.336: W/System.err(20577):    at libcore.io.IoBridge.open(IoBridge.java:406)
10-15 11:33:10.336: W/System.err(20577):    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
10-15 11:33:10.336: W/System.err(20577):    at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
10-15 11:33:10.336: W/System.err(20577):    at com.jaisonbrooks.enlighten.WebViewClientDemoActivity.onClick(WebViewClientDemoActivity.java:374)
10-15 11:33:10.336: W/System.err(20577):    at android.view.View.performClick(View.java:3565)
10-15 11:33:10.336: W/System.err(20577):    at android.view.View$PerformClick.run(View.java:14165)
10-15 11:33:10.336: W/System.err(20577):    at android.os.Handler.handleCallback(Handler.java:605)
10-15 11:33:10.336: W/System.err(20577):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 11:33:10.336: W/System.err(20577):    at android.os.Looper.loop(Looper.java:137)
10-15 11:33:10.336: W/System.err(20577):    at android.app.ActivityThread.main(ActivityThread.java:4517)
10-15 11:33:10.336: W/System.err(20577):    at java.lang.reflect.Method.invokeNative(Native Method)
10-15 11:33:10.346: W/System.err(20577):    at java.lang.reflect.Method.invoke(Method.java:511)
10-15 11:33:10.346: W/System.err(20577):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-15 11:33:10.346: W/System.err(20577):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-15 11:33:10.346: W/System.err(20577):    at dalvik.system.NativeStart.main(Native Method)
10-15 11:33:10.346: W/System.err(20577): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
10-15 11:33:10.346: W/System.err(20577):    at libcore.io.Posix.open(Native Method)
10-15 11:33:10.346: W/System.err(20577):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
10-15 11:33:10.346: W/System.err(20577):    at libcore.io.IoBridge.open(IoBridge.java:390) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:43:14.243

[openFileOutput()](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)只需要文件名，没有路径分隔符，因为它假定文件将在应用程序的私有数据区域中创建（如果我的记忆没有欺骗我，那么它应该是 /data/data/[your app包名]/文件/)。

要在 sdcard 上创建文件，您可以直接使用 FileOutputStream，[请参见此处的示例](https://stackoverflow.com/questions/2130932/how-to-create-directory-automatically-on-sd-card)。

另一个建议是不要使用像 /mnt/sdcard 这样的硬编码路径，因为 sdcard 的绝对路径可能在不同的设备上有所不同，而应该使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:36:12.503

我用这段代码解决了我的问题，所以它从菜单内部截屏

```
public boolean onOptionsItemSelected (MenuItem item){ 
        // Called when you tap a menu item
            switch (item.getItemId()){
            case R.id.settings_capture:
                item.setIcon(R.drawable.capture);                   
                //Resize the webview to the height of the webpage
                int pageHeight = web.getContentHeight();
                LayoutParams browserParams = web.getLayoutParams();
                web.setLayoutParams(new     LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, pageHeight));

                //Capture the webview as a bitmap
                web.setDrawingCacheEnabled(true);
                Bitmap bitmap =    Bitmap.createBitmap(web.getDrawingCache());
                web.setDrawingCacheEnabled(false);

                //Create the filename to use
                String randomFilenamepart = String.valueOf(new   SecureRandom().nextInt(1000000));
                String filename =   Environment.getExternalStorageDirectory().toString() + "/Enlighten_Mobile_" +   randomFilenamepart + ".jpg";

                File imageFile = new File(filename);
                //Stream the file out to external storage as a JPEG
                OutputStream fout = null;
                try {
                    fout = new FileOutputStream(imageFile);
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fout);
                    fout.flush();
                    fout.close();
                    Toast.makeText(WebViewClientDemoActivity.this,   "Screen Capture Saved!\n\nImage Saved at location : /sdcard\n\nSaved As:   Enlighten_Mobile_xxxxx.jpg", Toast.LENGTH_LONG).show();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                    Toast.makeText(WebViewClientDemoActivity.this,   "Problem with Capturing Image or Location to Store Image", Toast.LENGTH_SHORT).show();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    web.setLayoutParams(browserParams);
                }
                return true; 
```

# php - APC序列化慢？

> ID：12887160
> 
> 赞同：6
> 
> 时间：2012-10-14T22:25:44.657
> 
> 标签：php, arrays, serialization, apc

例子：

```
$arr = array();

for($i = 5; $i < 300000; $i++)
    $arr[$i] = 'foo';

apc_store('data', $arr); 
```

大约需要 15 秒。获取数据大约需要 0.7 秒。

但是如果我用 php 序列化数据并像这样存储`apc_store('data', serialize($arr));`它只需要 1 秒。

获取序列化数据然后反序列化，需要0.6s多一点

为什么 APC 这么慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:40:19.373

apc_sma_info() 提供了一个有趣的信息，也许可以解释为什么会发生。

使用非序列化数据执行 apc_store() 会在**block_lists**索引中产生以下值：

```
Array
(
    [0] => Array
        (
            [size] => 608
            [offset] => 33152
        )

    [1] => Array
        (
            [size] => 5589032
            [offset] => 11211992
        )

    [2] => Array
        (
            [size] => 2175976
            [offset] => 31378408
        )
) 
```

在手动序列化它们时会产生：

```
Array
    (
        [0] => Array
            (
                [size] => 11178232
                [offset] => 33760
            )

        [1] => Array
            (
                [size] => 1210040
                [offset] => 16801024
            )

        [2] => Array
            (
                [size] => 15542104
                [offset] => 18012280
            )
    ) 
```

这很奇怪，但似乎通过手动序列化，APC 将第一个和最后一个数据块拆分为更大的块，从而更好地处理内容。

这似乎不是一件微不足道的事情，因为我运行了几次这个测试，每次都得到类似的结果。

# c++ - 不断增加数组大小 C++

> ID：12887170
> 
> 赞同：-4
> 
> 时间：2012-10-14T22:26:31.000
> 
> 标签：c++, arrays

我是 C++ 新手，我试图让用户继续在数组中输入双精度，当用户输入 -1 时程序停止。我的代码有效，但是当将 12 个项目添加到数组中时，我收到以下错误：

> *** 检测到 glibc *** ./exercise2：双重释放或损坏（输出）：0x00000000010aa070 ***
> ======= 回溯：=========

和：

> 中止（核心转储）

这是我的代码：

```
int main(){
    int size=5;
    int i=0;
    double *numbers = new double[size];
    cout<<"Enter your double:"<<endl;

    while(1){
    double *numbers2=new double[size];

    cin>>numbers[i];

    if(i>=size-1){
        size=size*2;
        memcpy(&numbers2, &numbers, size);
        delete[]numbers;
    numbers=numbers2;
    }

    if(numbers[i]==-1){
        break;
    }
    cout<<numbers[i];
        i++;
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:27:58.957

我建议简化问题并使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)

```
#include <vector>

int main()
{
  std::vector<double> numbers;

  // get numbers and push into vector if valid
  double x;
  cin >> x;
  numbers.push_back(x):
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:46:19.413

有几个问题：

1) `size`可以是数组中元素的数量，也可以是数组的内存大小。当前没有 a 的大小`double`为 1 个内存单元的架构。

2）删除数组后，确实应该使用新计算的大小重新分配它。否则，写入已删除的内存是未定义的行为。在这种情况下，它可能会导致不好的事情发生，比如段错误。

3) 比较浮点值是否相等是有问题的。

我稍微重写了代码来解决所有这些问题。

```
using namespace std;
int main()
{
    int size=5;
    double *numbers = new double[size];
    cout << "Enter your double:" << endl;

    for (int i=0;  ; ++i)
    {
        cin >> numbers[i];

        if (i >= size-1)
        {
            size *= 2;
            double *numbers2 = new double[size];
            if (!numbers2)
            {
                 cerr << "failed allocating memory" << endl;
                 exit(1);
            }

            memcpy (numbers2, numbers, sizeof double * (size/2));
            delete[] numbers;
            numbers = numbers2;
        }
        // compare for -1 within epsilon of 1e-7
        if (abs (numbers[i] + 1) <= 1e-7)
            break;

        cout << numbers[i];
    }
} 
```

# linux - CMake，构建选项

> ID：12887176
> 
> 赞同：1
> 
> 时间：2012-10-14T22:27:50.597
> 
> 标签：linux, command-line, cmake

我似乎找不到太多关于此的信息，所以也许不可能……或者我使用错误的关键字进行搜索。

无论如何，我有一个源目录。假设 Source 中有一个名为 Tests 的文件夹和另一个名为 Products 的文件夹。我有 CMakeLists.txt 文件的通常层次结构，这样我就可以在每个目录和子目录等中构建所有源代码......我想知道的是是否可以使用 cmake 传递命令行参数以便它将仅构建测试文件夹或源文件夹。

例如像cmake TEST ..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:31:24.203

当然，您可以使用标志。

```
if(TEST)
 include needed folders
else()
 do something else
endif() 
```

并像这样调用cmake：

```
cmake -DTEST=1 .. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T22:37:55.573

您可以将它们创建为不同的目标。CMake 将配置所有这些，但随后您可以运行`make test`或`make product`. 一个例子是：

```
project(myProject)

add_subdirectory(tests)
add_subdirectory(products)

add_executable(test EXCLUDE_FROM_ALL ${TEST_SRC_FILES})
add_executable(product EXCLUDE_FROM_ALL ${PRODUCT_SRC_FILES}) 
```

在每个子目录中，您将有一个构建源文件变量的 CMakeLists.txt。这`EXCLUDE_FROM_ALL`意味着仅键入`make`不会构建测试或产品，但您可以决定是否希望发生这种情况。

要构建，您可以执行`make test`or`make product`并且它将仅构建该目标（以及任何依赖项）。

# emacs - emacs function to uncomment regardless of mode

> ID：12887180
> 
> 赞同：0
> 
> 时间：2012-10-14T22:28:21.317
> 
> 标签：emacs, comments, equals, region

Main goal: making a smart "uncomment" function suitable for any mode.

```
(defun uncomment-mode-specific ()
  (interactive)
  (if (region-active-p)
      (comment-region (region-beginning) (region-end) -1)  ; so far so good
    (if (= ";" (line-beginning-position))                   ; here is the problem
         (message "successful")
       (message "unsuccessful"))
)) 
```

In the `if` statement, I would like to check for the value of the first character of the line, and if it `equals` the variable `comment-start` (which would return "`;`" in emacs lisp), goto `beginning-of-line` and delete the character. Ideas?

**EDIT:** More clarification as requested in a comment below follows. I would like a function to do:

1) If a region is selected, remove the comments (here that uncomment-region or comment-dwim would work as pointed out by Patrick)

ELSE:

2) If the first character of the line at point is a comment character, remove the comment character.

ELSE:

3) Search current line for comment (excluding `\%` or `\;`, mode dependent), move up to comment and kill the line starting with the comment sign.

I could not see how you would want this to work differently. It could then be bound to one key to simply remove comments, depending on the mode, using `comment-start` to identify the comment character.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:48:29.397

I'm posting this as an alternative answer, since what you are trying to do is partly done already with the `comment-dwim` command. From the docs (you can find it using `C-h f comment-dwim`)

> comment-dwim is an interactive compiled Lisp function in `newcomment.el'.
> 
> It is bound to `M-;`.
> 
> (comment-dwim *ARG*)
> 
> Call the comment command you want (Do What I Mean).
> If the region is active and `transient-mark-mode` is on, call `comment-region` (unless it only consists of comments, in which case it calls `uncomment-region`).
> Else, if the current line is empty, call `comment-insert-comment-function` if it is defined, otherwise insert a comment and indent it. Else if a prefix *ARG* is specified, call `comment-kill`. Else, call `comment-indent`.
> You can configure `comment-style` to change the way regions are commented.

So in order to use it, simply select a region with `C-SPC` (set-mark-command) and move the caret to the other point and run `comment-dwim`.

# sql - CTE 变量、Exec 程序和按 EmployeeLevel 排序

> ID：12887181
> 
> 赞同：-3
> 
> 时间：2012-10-14T22:28:28.720
> 
> 标签：sql, sql-server, tsql

```
ALTER PROCEDURE [dbo].[p_ReturnEmployeeOrg]
( @BusinessEntityID int = 21 ) **-- NOT WORKING**
AS
SELECT * FROM HumanResources.Employee
;WITH cte_Emp (EmployeeID,ManagerID,Title,EmployeeName,ManagerName,EmployeeLevel)
AS
-- Anchor member definition
(SELECT e.BusinessEntityID,e.MaritalStatus,e.JobTitle,
        CAST(c.LastName + ',' + c.FirstName AS VARCHAR(200)),
        CAST ('N/A' AS VARCHAR(200)),
        CAST (0 AS INT)
    FROM HumanResources.Employee e 
    INNER JOIN Person.Person c
        ON e.BusinessEntityID = c.BusinessEntityID
        WHERE e.BusinessEntityID = @BusinessEntityID

 UNION ALL
-- Recursive member definition 
SELECT  e.BusinessEntityID,e.MaritalStatus,e.JobTitle, 
                CAST(c.LastName + ',' + c.FirstName AS VARCHAR(200)),
                CAST ('N/A' AS VARCHAR(200)),
                CAST (0 AS INT)
        FROM HumanResources.Employee e
        INNER JOIN Person.Person c
        ON e.BusinessEntityID = c.BusinessEntityID)
        ORDER BY EmployeeLevel - **NOT WORKING**

       EXEC p_ReturnEmployeeOrg 21) 
```

-- exec**不工作，结果是原始数据而不是 BusinessEntityID = 21**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:46:40.333

你的意思是把第一个选择语句放在存储过程的末尾吗？您的存储过程存在三个相关问题。首先，CTE 已定义但未在存储过程中使用（这就是您的 sp 从员工表中返回所有内容的原因）。其次，您的 exec 语句实际上贯穿了 CTE 定义的中间（我认为这可能是您发布期间的格式错误）。CTE 中的 order by 语句可能会导致错误。最好将其移出 CTE。

```
ALTER PROCEDURE [dbo].[p_ReturnEmployeeOrg]
( @BusinessEntityID int = 21 ) 
AS

;WITH cte_Emp (EmployeeID,ManagerID,Title,EmployeeName,ManagerName,EmployeeLevel)
AS
-- Anchor member definition
(SELECT e.BusinessEntityID,e.MaritalStatus,e.JobTitle,
        CAST(c.LastName + ',' + c.FirstName AS VARCHAR(200)),
        CAST ('N/A' AS VARCHAR(200)),
        CAST (0 AS INT)
    FROM HumanResources.Employee e 
    INNER JOIN Person.Person c
        ON e.BusinessEntityID = c.BusinessEntityID
        WHERE e.BusinessEntityID = @BusinessEntityID

 UNION ALL
-- Recursive member definition 
SELECT  e.BusinessEntityID,e.MaritalStatus,e.JobTitle, 
                CAST(c.LastName + ',' + c.FirstName AS VARCHAR(200)),
                CAST ('N/A' AS VARCHAR(200)),
                CAST (0 AS INT)
        FROM HumanResources.Employee e
        INNER JOIN Person.Person c
        ON e.BusinessEntityID = c.BusinessEntityID)
) 
SELECT * FROM cte_emp ORDER BY EmployeeLevel 
--....................  

EXEC p_ReturnEmployeeOrg 21 
```

我在 CTE 定义结束后将 select 语句向下移动，并将表名从雇员更改为 cte_emp。我也将您的 exec 语句移出 CTE 定义。

但是，还有其他与此无关的问题。正如 RichardTheKiwi 所提到的，为什么 CTE 定义中有 e.maritalstatus，而 CTE 标头中有 ManagerID？CTE 定义中的 businessentityid 是否意味着 CTE 标头中的employeeid？

# php - 从层次结构更深的文件调用 $_SERVER['SCRIPT_NAME']

> ID：12887186
> 
> 赞同：9
> 
> 时间：2012-10-14T22:28:49.223
> 
> 标签：php

（初步说明：这个问题似乎已经有很多变体，但它们似乎都关注物理 PHP 文件本身的**文件系统位置，而不是事物的****Web** URL 位置，这就是我所追求的。）

* * *

**介绍 1：**

我有一个具有以下物理**文件系统**结构的小型“网站”：

```
variable.php
folder
  test.php 
```

（换句话说，`variable.php`在顶层和`test.php`文件夹中`folder`。）

以下是文件内容：

```
<?php
//variable.php
$basePath = dirname($_SERVER['SCRIPT_NAME']);
?>

<?php
//test.php
include("../variables.php");
echo $basePath;
?> 
```

* * *

**介绍 2：**

在本地开发这个“网站”时，它在这个地址上：

```
http://localhost/~noob/test-website 
```

* * *

**问题：**

问题是，如果我放入`http://localhost/~noob/test-website/folder/test.php`浏览器，它会打印出`/~noob/test-website/folder/`.

I want it to print out `/~noob/test-website` (the "web location" of variable.php). In other words, I want to have global access from all files, **even ones deeper in the filesystem hierarchy**, to `/~noob/test-website`. How do I accomplish this?

I obviously do not want to hardcode this path in. The reason is that when I upload it onto a production server, the location changes to something more sane like `http://example.com/` (and I don't want to have to modify this hardcoded path after uploading to the server, hence this question of course).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:24:53.510

The problem here is, that your webserver (and thus PHP) does not know that your testing root directory is being served out of a subdirectory, and in fact neither of them care.

The obvious solution would be to provide a configuraiton script on each server, that has the hardcoded relative root in it. As you already stated, you don't want to do this. (It's not actually a bad thing to provide server-specific configuration files, lots of people do far more absurd things)

In order to get around this fact, a solution will have to hinge on the reference points that are available to it for a specific request. Those reference points are:

*   The filesystem location of `variables.php`
*   The filesystem location of the script being requested.
*   The filesystem location that is the root that pages are served from

(I know you've emphasised **not filesystem** - keep reading, we use these to get your value)

With these values, there will be an overlap in the directory structure. This is the value you are after.

Example:

*   Your test site is at: `http://localhost/c/`
*   Request: `http://localhost/c/d/myscript.php`
*   variables.php is at: `/a/b/c/variables.php`
*   myscript.php is at: `/c/d/myscript.php` includes ../variables.php

As you can see the paths overlap by the `/c/` directory.

In your `variables.php` you can use the following code to calculate that overlap.

```
$fsRoot = __DIR__; // dirname(__FILE__) for PHP < 5.3 (and shame on you!)
$webRoot = str_replace($_SERVER['PHP_SELF'], '', $_SERVER['SCRIPT_FILENAME']);
$urlRoot = str_replace($webRoot, '', $fsRoot); 
```

You should never rely on `DOCUMENT_ROOT` it can very easily be incorrect, so we're calculating it ourself (`$webRoot` variable).

This takes the **filesystem** directory of `variables.php` which is in your site root, and removes the the **filesystem** directory that is the base that pages are served from. What remains is everything that was between the actual web root, and your subdirectory web root.

In `myscript.php` you can do the following.

```
print $urlRoot . '/filename.js'; 
```

The output from the example would be `/c/filename.js`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T23:09:03.123

Hopefully this will come close (all this should be in variables.php):

```
// folder containing the requested script
$requested = dirname($_SERVER['SCRIPT_FILENAME']);

// folder containing variables.php
$current = dirname(__FILE__);

// relative path from variables.php to the requested script
$relative = str_replace($current, '', $requested);

// remove relative path from end of script name
$pattern = '#' . preg_quote($relative) . '$#';
$basePath = preg_replace($pattern, '', dirname($_SERVER['SCRIPT_NAME'])); 
```

**Note**: This looks like it will work for your particular example, but this means that variables.php must always be in a folder either at, or a parent of, the DOCUMENT_ROOT, otherwise the relative path can't be determined using the above.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:22:09.910

I'm not sure it's gonna solve your problem forever or not, however it works in your example:

```
$x = explode("/", $_SERVER['SCRIPT_NAME']);
echo $_SERVER['SERVER_NAME'] . '/' . $x[1] . '/'; 
```

If you like the output, you may customize it to fit your needs. :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T16:18:01.583

It's not entirely foolproof, but the solution used by Kurogo works in most cases.

[https://github.com/modolabs/Kurogo-Mobile-Web/blob/release-1.5/lib/Kurogo.php#L797](https://github.com/modolabs/Kurogo-Mobile-Web/blob/release-1.5/lib/Kurogo.php#L797)

It's basically comparing the `REQUEST_URI` and the `DOCUMENT_ROOT`, and keeps adding folders from the `REQUEST_URI` to the `DOCUMENT_ROOT` until it gets a match. Once it finds WEBROOT_DIR (which in your case would probably be a `dirname(__FILE__)` from the variables.php) by building up from `DOCUMENT_ROOT`, it saves the existing path as your $urlBase.

This only works for subfolders/symlinks, and doesn't handle things like apache aliasing, so it may not work for your case specifically, but it's at least part of the answer.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T16:15:38.557

I worked in a project where it was necesary to read a directory with a lot of images, with folders within, and it was required to read all the files in a recursive way...

**Function:**

```
function ListIn($dir, $prefix = '') {
  $dir = rtrim($dir, '\\/');
  $result = array();

    foreach (scandir($dir) as $f) {

        if ($f !== '.' and $f !== '..') {

            if (is_dir("$dir/$f")) {
              $result = array_merge($result, ListIn("$dir/$f", "$prefix$f/"));
            } 
            else {
                $ext = substr($prefix.$f, strrpos($prefix.$f, '.') + 1);

                if(in_array($ext, array("jpg"))){
                    // echo $prefix.$f."<br>";
                    $result[] = $prefix.$f;
                }

            }

        }

    }

  return $result;
} 
```

Way of use:

```
$path='images/mytest';

$images = (ListIn($path));

foreach($images as $image){
        $image=explode("/",$image);
        echo $image=$image[2];
} 
```

As you can see, every single image becomes an array, and you can access to the first elements of that array, in order to extract the directory you want... In this case it was located at the second index of the array, depending on the deepness of your file structure...

*I hope this can help you out!*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T15:42:13.677

> I obviously do not want to hardcode this path in. The reason is that when I upload it onto a production server, the location changes to something more sane like [http://example.com/](http://example.com/) (and I don't want to have to modify this hardcoded path after uploading to the server, hence this question of course).

You can hardcode paths, just make it relative to the homepage.

For example, `http://localhost/~noob/test-website/` and `http://example.com` are the same thing. so only worry about things underneath that .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T05:15:22.263

(Preliminary note: There are seemingly many variants of this question already here, but they all seem to focus on the filesystem location of the physical PHP files themselves, not the web URL location of things, which is what I'm after.)

[HR][/HR]INTRO 1:

I have a small "website" with the following physical filesystem structure:

variable.phpfolder test.php(In other words, variable.php in the top-level, and test.php in the folder folder.) Here are the file contents:

[HR][/HR]INTRO 2:

When developing this "website" locally, it is on this address:

http://localhost/~noob/test-website[HR][/HR]QUESTION:

The problem is that if I put

localhost/~noob/test-website/folder/test.php into my browser, it prints out /~noob/test-website/folder/.

I want it to print out /~noob/test-website (the "web location" of variable.php). In other words, I want to have global access from all files, even ones deeper in the filesystem hierarchy, to /~noob/test-website. How do I accomplish this?

I obviously do not want to hardcode this path in. The reason is that when I upload it onto a production server, the location changes to something more sane like [http://example.com/](http://example.com/) (and I don't want to have to modify this hardcoded path after uploading to the server, hence this question of course).

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-25T09:23:55.890

You can estimate the correct answer based on your knowledge of your specific folder and web structure, but that is far from a general solution. But I would recommend you to use a boostrap file that is the entry point for each "page". There you can setup you `$basePath` variable and other needed values.

Another thing you could do is inject the base path to your `$_SERVER` array from Apache (if that is what you are using. It would then be available to your entire application.

For a pointer on how to accomplish this you can look [here](http://jrenard.info/blog/injecting-server-variables-in-a-php-script-from-an-apache-module.html).

Or have a config file containing the base path for a given server.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-21T10:24:18.480

I think, you're searching the docroot (form outside) - it can be found in `$_SERVER['DOCUMENT_ROOT']` (in the filesystem) & compare with `__DIR__` (or `dirname(__FILE__)` for earlier PHP)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-23T11:19:16.487

Use this function :-

```
#This function will return the current script name
function get_script_name()
{
    $uri_array = explode('/',$_SERVER['SCRIPT_NAME']);
    $script_name = end($uri_array);
     return $script_name;
}
#call The function
$script_name = get_script_name();
echo $script_name; 
```

# php - 限制字数并添加阅读更多链接

> ID：12887187
> 
> 赞同：-1
> 
> 时间：2012-10-14T22:28:58.853
> 
> 标签：php, wordpress

好的，到目前为止，我有这段代码，它在我的 wordpress 模板中，所以这正是 wordpress 的东西。

```
<?php

    $post_id = 266;
    echo "<div id='widgets-wrapper3'><div id='marginwidgets' style='overflow: auto; max-width: 100%; margin: 0 auto; border: none !important;'>";

    $queried_post = get_post($post_id); 
    echo "<div class='thewidgets'>";
    echo $queried_post->post_content;
    echo '</div>';

    echo "</div></div>";    
?> 
```

正如您在代码中看到的那样，例程是显示 id 为 266 的帖子，现在我只想限制该帖子的帖子内容中的字数，假设我想将字数限制为300 然后添加阅读更多链接。请问怎么做？

希望这里有人知道如何做到这一点。

我是开放的，想法，建议和建议。希望这里有人可以帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:41:05.367

试试这个： [http ://codex.wordpress.org/Function_Reference/the_excerpt](http://codex.wordpress.org/Function_Reference/the_excerpt)

或使用 php substr：

```
echo get_sub($queried_post->post_content, 300);

function get_sub($str, $max=300)
{
$ar = explode($str);
$count = 0;
$new_str = "";
$del = " ";
foreach($ar as $a)
{
    if($count == 0)
    {
        //no space
        $del = "";
    }

    if($count < $max)
    {
        $new_str .= $del.$a;
    }
    $count++;
}
return $new_str;
} 
```

如果内容包含 html 元素，则存在问题。希望能帮助到你

# calendar - 服务器端与客户端日历

> ID：12887192
> 
> 赞同：0
> 
> 时间：2012-10-14T22:29:25.930
> 
> 标签：calendar, client-side, server-side

我想创建一个日历系统，它类似于谷歌日历，允许用户发布数据，但我不知道我必须使用基于日历的客户端或服务器端。

关于这个有什么建议或教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:44:58.373

我建议您从必须存储和可视化用户产生的数据这一事实来解决这个问题。要*显示*日历，您很可能需要前端（客户端）编程。要获取和存储数据，您将需要一个服务器端应用程序。好处是，如果你得到了服务器端的权利，你可以自由地试验客户端。

# mysql - SQL IN 语句的限制

> ID：12887194
> 
> 赞同：0
> 
> 时间：2012-10-14T22:29:54.647
> 
> 标签：mysql, sql

我需要维护大量电子邮件发件人的应用程序。最后一个程序员做的不错，但是老板觉得数据库处理上可以做一点优化。活动结束后，报告会提供保存所选片段的选项。例如，我们发送了 50000 封电子邮件，我们想要保存打开时事通讯 (2000) 的那部分人 该工具现在会创建一个复制联系人的新部分（带有 INSERT），但我认为我们可以通过保存来改进该工具每个联系人的 id。

我想知道使用 sql IN 语句保存联系人是否会提高工具的性能，或者还有另一种方法可以执行此操作。就像是：

1.  创建联系人 ID 列表 SELECT * FROM 联系人

2.  SELECT * FROM contacts WHERE idContact IN (all_contacts_comma_separated) --> 我会保存这个

提前致谢

PD：这是一个生产环境，所以在进行任何更改之前我需要确定 :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:37:57.290

您没有说打开电子邮件的人员列表当前所在的位置。如果它不在数据库中，您将使用什么代码/过程来生成您的`IN`语句列表？如果它在数据库中，为什么不从`JOIN`你的表中获取信息？

无论哪种方式，我都不建议`IN`在列表中有 2000 个项目时使用。

您可能还需要阅读以下内容：

[SQL Server：JOIN vs IN vs EXISTS - 逻辑差异](http://weblogs.sqlteam.com/mladenp/archive/2007/05/18/60210.aspx)

它是在考虑 SQL 服务器的情况下编写的（我不确定它是否都直接适用于 MySQL），但这些概念很有趣，您应该在更改生产环境之前执行测试，正如 eggyal 的评论所建议的那样。

# c - 这个 char* [] 赋值有什么问题？

> ID：12887197
> 
> 赞同：-1
> 
> 时间：2012-10-14T22:30:39.913
> 
> 标签：c, arrays, pointers, char

我对以下代码有疑问，我无法弄清楚？如果有人有任何想法，请告诉我。

我有两个全局变量：

`char *newArgv[100], *s[MAXCHAR];`

和一个功能

```
getword(char *w) 
```

在我的主要功能中，我通过说

```
getword(s[num]); 
```

在 getword 函数中，我有一个任务，上面写着

```
w[index] = 'e'; 
```

问题出在最后一行代码中。该项目编译（显然），但程序崩溃。任何人有任何想法为什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:32:40.260

您正在取消引用 NULL 指针。

`s`是一个`MAXCHAR`NULL 指针数组。`s[num]`返回第`num`th 指针 - 这也是 NULL。所以在里面`getword`，`w[index]`是非法的。

您需要动态分配内存：

```
for ( int i = 0 ; i < MAXCHAR ; i++ )
    s[i] = malloc(MAX_WORD_LENGTH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:33:00.147

`s[num]`是一个`char*`带值的`NULL`（因为全局变量是零初始化的）所以当你取消引用它时，`w[index]`即`s[num][index]`你取消引用一个 NULL 指针。

# eclipse - Eclipse中Java EE服务器上的NoClassDefFoundError与tomcat

> ID：12887209
> 
> 赞同：0
> 
> 时间：2012-10-14T22:32:45.343
> 
> 标签：eclipse, jakarta-ee, tomcat, google-cloud-messaging

我正在尝试使用 GCM 为 Android 通知构建一个 hello world 应用程序。在开发服务器部分时，我不完全确定如何将 gcm-server.jar 文件放入项目中。我已将它添加到构建路径中，Eclipse 发现它非常好，但是当我构建项目并将其部署到 tomcat 服务器（从 eclipse 中）时，它在运行时抛出以下错误：

```
java.lang.NoClassDefFoundError: com/google/android/gcm/server/Sender 
```

我假设我在导入 jar 时做错了什么。使用 Eclipse 将 jar 放入动态 Web 项目的具体过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:06:14.700

将回答我自己的问题，因为我刚刚开始工作。

事实证明，将 .jar 添加到 Java 构建路径是不够的。Tomcat 对每个项目都有一个单独的类路径，并且不会看到 jar 中的类，除非您将 jar 文件转储到 WEB-INF/lib 文件夹中（Eclipse 不会自动这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:39:43.293

您需要包含 json 的 jar 文件。这个问题似乎被重复了几次。

[http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar](http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar)

# php - 使用 php exec() 运行 oowriter 无头命令未执行

> ID：12887211
> 
> 赞同：0
> 
> 时间：2012-10-14T22:32:54.733
> 
> 标签：php, command-line-interface, openoffice-writer

我在使用 oowriter 使用 php 将 doc 转换为 pdf 时遇到问题`exec()`。我在下面运行的行在 CLI 中运行良好，只是在使用 exec() 的 php 中不行。

```
$stdin = "/usr/bin/oowriter --headless --convert-to pdf -outdir /var/data/uploads/ /var/data/uploads/lorem.docx";

exec($stdin,$stdout,$return_int); 
```

`$stdout`返回一个空`Array`并`$return_int`返回`0`。

我四处搜索，我能找到的唯一可能的解决方案是添加 oowriter 的路径（你可以看到我已经完成了）。以 apache 用户身份运行此命令是否存在权限问题？exec() 上的一些帖子通常无法正常工作，但我可以使用此方法成功运行 imagemagick 的命令。因此，在我看来，这是 openoffice 的应用程序特定配置问题。

似乎与以下内容重复，但未发布任何答案：

[无法以网络用户身份运行 oowriter](https://stackoverflow.com/questions/10169042/unable-to-run-oowriter-as-web-user)

仅供参考，我使用的是 CentOS V6.1 和 PHP v5.3.3。谢谢。

# c - pthread_exit 问题返回结构

> ID：12887214
> 
> 赞同：1
> 
> 时间：2012-10-14T22:33:19.247
> 
> 标签：c, multithreading, pthreads, pthread-join

我有一个结构

```
typedef struct something_t {
    int a;
    int b;
} VALUES; 
```

在我的线程函数中，我做

```
VALUES values;
values.a = 10;
values.b = 11;

pthread_exit((void*)&values); 
```

我试着通过做来接受

```
VALUES values;
pthread_join(thread, (void*)&values);
printf("A: %d\B: %d\n", values.a, values.b); 
```

我收到的价值观每次都很奇怪。我对如何接收我最终在线程中创建的值感到困惑。我正在尝试学习 C 中的线程，似乎我已经掌握了它，但我无法返回值。有办法吗？感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T22:37:03.760

您正在尝试返回堆栈（本地）变量。

这是不允许的，并且不会起作用，因为线程的堆栈将在线程退出时被删除（或至少是无效的）。

要解决这个问题：

```
VALUES *values = malloc(sizeof VALUES);
values->a = 1;
values->b = 2;
pthread_exit( values ); 
```

然后，当你加入免费的价值观

```
VALUES *res;
pthread_join( thread, &res );
...
free(res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:36:40.850

看起来就像您正在线程函数上创建一个堆栈对象并在`pthread_exit`. 当线程函数退出时，该结构超出范围，您将留下垃圾。

您没有使用传入的值结构`pthread_join`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:37:20.500

您的应用程序具有未定义的行为，因为您在堆栈（以及已退出线程的堆栈）上声明了结构

改用`malloc`：

```
VALUES *values = malloc(sizeof(VALUES);
values->a = 10;
values->b = 11;

pthread_exit(values); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-10T09:05:35.710

添加到[perh 的答案](https://stackoverflow.com/a/12887235/6709315/)：在必要时使用指针类型转换。

线程函数：

```
VALUES *values = (VALUES*) malloc(sizeof VALUES);
values->a = 1;
values->b = 2;
pthread_exit( (void*)values ); 
```

调用函数：

```
VALUES *res;
pthread_join( thread_id, (void*)&res );
...
free(res); 
```

这是安全的，并且不会在编译时生成警告。

# c++ - 为什么这个文件不能在 gcc 中编译？它在 VS 中运行良好

> ID：12887217
> 
> 赞同：0
> 
> 时间：2012-10-14T22:33:36.607
> 
> 标签：c++, linux, g++

g++ 甚至不会编译它。我哪里错了？这些是错误消息：

gcc sign.c sign.c：在函数âmainâ：sign.c：35：2：警告：格式不是字符串文字并且没有格式参数[-Wformat-security]

==================================================== =================================

```
#include "stdio.h"

int string_length(char str[]);
void string_sort(char s[]);

void string_sort(char s[])
{
    char tmpt;
    int i, j, len;
    len=string_length(s);
    for(i=0; i<len-1; i++){
            for (j=i+1; j<len; j++){
                    if (s[i] > s[j]){
                            tmpt=s[i];
                            s[i]=s[j];
                            s[j]=tmpt;
                    }
            }
    }
}

int string_length(char str[]){
    int i;
    for(i=0; i<80; i++){
            if(str[i]=='\0'){
                    return(i);
            }
    }
}

int main(){
    char words[80];
scanf("%s", words);
    printf(words);
    string_sort(words);
    printf(" ");
    printf(words);
    printf("\n");

    while ( words != " "){
            scanf("%s", words);
            printf(words);
            string_sort(words);
            printf(" ");
            printf(words);
            printf("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T22:36:42.587

首先，这只是一条*警告*消息，这意味着编译器检测到可能有问题，但还是编译了您的代码。正如您所注意到的，并非所有编译器都会给出相同的警告。

问题是这一行（以及所有其他类似的行）：

```
printf(words); 
```

使用时`printf`，*必须*使用格式字符串，如下所示：

```
printf("%s", words); 
```

否则，如果您正在打印的内容 ( `words`) 恰好包含任何`%`字符，那么`printf()`会将这些内容视为格式说明符并尝试读取您未提供的参数。

如果您只想自己打印一个字符串，那么`puts`可能很有用：

```
puts(words); 
```

这将打印`words`后跟换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T22:37:08.947

警告基本上说你必须写

```
printf("%s", words); 
```

而不仅仅是

```
printf(words); 
```

实际上，使用它可能是您程序中的潜在错误，甚至是安全漏洞，例如，如果`words`由用户控制（这正是您的程序的情况），因此可能包含`%n`等。在您的情况下，`words`将被视为格式说明符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T22:37:20.610

您不应该使用带有未知格式字符串的 printf：

```
printf(words); 
```

尝试

```
printf("%s", words); 
```

在这种情况下，

```
printf("%s\n", words);
puts(words); // includes \n 
```

会好的

# java - 我无法重定向到另一个 jsp 页面，它返回空白页面

> ID：12887218
> 
> 赞同：1
> 
> 时间：2012-10-14T22:34:08.193
> 
> 标签：java, jsf

我有`home.jsp`页面和联系页面，我们关心的是`home.jsp`页面如下：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%@ page contentType="text/html;charset=windows-1252"%>
<%@ page import="javax.faces.context.FacesContext" %>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>

<f:view>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
    <title>home</title>
  </head>
  <body>

<%   
    response.sendRedirect("contact.jsp");
%>
  </body>

</html>
</f:view> 
```

`web.xml`文件代码：

```
<?xml version = '1.0' encoding = 'windows-1252'?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee">
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/home.jsp</url-pattern>
  </servlet-mapping>
</web-app> 
```

当我加载 home.jsp 它返回空白页而不是 contact.jsp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:46:26.073

首先，您真的不想在任何页面中包含此**代码**

```
<%   
    response.sendRedirect("something.jsp");
%> 
```

如果您想在访问“home.jsp”时重定向到“contact.jsp”，您应该在过滤器中进行。

```
public class MyAppFilter implements Filter {

    public void init(FilterConfig filterConfig) throws ServletException {
}

    public void destroy() {
}

    public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain filterChain) throws IOException, ServletException {
        if ((request instanceof HttpServletRequest) && (response instanceof HttpServletResponse)) {
            HttpServletRequest httpServletRequest = (HttpServletRequest) request;
            HttpServletResponse httpServletResponse = (HttpServletResponse) respo
            String requestPath = httpServletRequest.getRequestURI();
            //check if the URL contains <anything>/home.jsp
            if (requestPath.contains("home.jsp")) {
                 //if that's the case, redirect to another page
                 httpServletResponse.sendRedirect("/SportABAWeb/jsf/Esquema.jsf");
                 return;
            }
        }
        filterChain.doFilter(request, response);
    }
} 
```

您应该在 Web 应用程序中配置过滤器。假设您使用 Java EE 6 Web 应用程序服务器（如 GlassFish 3.x）或 Java EE 6 servlet 容器（如 Tomcat 7），您可以将此标记添加到您的类以使其成为过滤器

```
@WebFilter(filterName = "MyAppFilter", urlPatterns = {"/*"})
public class MyAppFilter implements Filter {
    //filter implementation...
} 
```

如果没有，那么你应该在你的 web.xml 中配置它

```
<filter>
    <filter-name>MyAppFilter</filter-name>
    <filter-class>my.package.MyAppFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>MyAppFilter</filter-name>
    <servlet-name>*.jsp</servlet-name>
</filter-mapping> 
```

# ruby-on-rails - 如何确保用户只能编辑自己的条目？

> ID：12887222
> 
> 赞同：0
> 
> 时间：2012-10-14T22:35:11.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有`Users`很多`People`很多`Projects`。

例如，可以这样创建一个新项目：

```
def new
  @project = Project.new(:person_id => params[:person_id])
  @title = "New project"
end 
```

如何确保用户只能在`person_id`此处插入真正属于他的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:39:11.620

从会话（服务器端）获取 user_id，但不是参数（客户端），例如

```
def new
  @project = Project.new(:person_id => session[:current_user_id])
end 
```

或者，使界面更加严格：

```
def new
  @project = Project.create_for_current_user(session)
end

def Project.create_for_current_user(session)
  return Project.new(:person_id => session[:current_user_id])
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:02:51.330

考虑为此使用隐式授权。您的最终结果应如下所示：

```
# GET people/1/projects/new
def new
  user = User.find(session[:current_user_id])
  @project = user.people.find(params[:person_id]).projects.build(:title => "New Project")
end

# POST people/1/projects
def create
  user = User.find(session[:current_user_id])
  user.people.find(params[:person_id]).projects.create(params[...])
end 
```

然后在[routes.rb](http://guides.rubyonrails.org/routing.html#nested-resources)：

```
resources :people do
  resources :projects
end 
```

使用这种方法，新项目将自动归属于用户。

附带说明一下，您应该考虑使用 Devise 或 before_filter 之类的东西，这样您就可以更方便地访问当前用户，而无需`User.find`在每个操作中执行。

此外，您的控制器操作中不应有额外的 @title 变量。每个控制器操作都应负责共享资源或资源集合。

# tmux - tmux 1.7 移动窗口

> ID：12887225
> 
> 赞同：5
> 
> 时间：2012-10-14T22:35:43.903
> 
> 标签：tmux

我刚刚更新到 tmux 1.7，在手册页中有一个新的使用选项`movew`：`-r`它说

> move-window [-rdk] [-s src-window] [-t dst-window] （别名：movew） 这类似于链接窗口，除了 src-window 的窗口被移动到 dst-window。使用 -r，会话中的所有窗口都按顺序重新编号，尊重 base-index 选项。

如果我在会话中有 3 个窗口：1 2 3，我从窗口 1 尝试这个命令：

```
prefix : movew -r -t 4 
```

它给出了错误：

> 找不到会话：4

这不只是将窗口 1 移动到窗口 4 并重命名窗口吗？我不是想把它移到一个新的会话中，只是在同一个会话中的一个新窗口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T05:55:48.883

文档没有明确说明这一点，但是当您使用 时`-r`，参数 to`-t`被解释为会话说明符，而不是窗口说明符。

因此，`move-window -r -t 4`告诉*tmux*重新编号会话中命名/匹配字符串“4”的所有窗口。

听起来您可以使用两个命令完成您想要的^*（假设您已`base-index`设置为 1）：

```
move-window -t 4 ; move-window -r 
```

您可以将一系列命令绑定到一个键，但您需要对分号进行转义（这样第二个命令就不会简单地在初始绑定命令之后立即执行）：

```
bind-key : move-window -t 4 \; move-window -r 
```

此外，如果您通常维护一个“无间隙”的窗口编号序列（例如，您`renumber-windows`启用了该选项），那么您可以替换`4`with`:`并且命令对将适用于任意数量的窗口（不仅仅是 3 个或更少）`:`：目标窗口说明符的意思是“当前会话中第一个未使用的窗口编号”（即，如果您已经有窗口 1-3，则为 4）。

* * *

^*如果我正确理解您想要将一组窗口（如 1:A、2:B、3:C）转换为 1:B、2:C、3:A（即移动窗口 #1（“A”）到结束并重新编号，以便您再次获得 1-3 而不是 2-4）。

# java - 如何解决struts 2中的以下错误。我想我应该将日期格式转换为字符串？怎么做？

> ID：12887227
> 
> 赞同：0
> 
> 时间：2012-10-14T22:35:54.327
> 
> 标签：java, jsp, struts

```
public class SimpleSorting {

    public static void main(String[] args) {
        int[] data = {4,7,2,5,3};
        bubbleSort(data);

        //selectionSort(data);
        //insertionSort(data);
        System.out.println(Arrays.toString(data));
    }

    public static void bubbleSort(int[] data) {
        for(int out=data.length-1; out>=1; out--) {
            for(int in=0; in < out; in++) {
                if(data[in]>data[in+1]) {
                    swap(data, in, in+1);
                }
            }
        }
    } 
```

请帮我。我对这部分代码有很多疑问。我应该发送整个数组还是可以单独使用索引对数组进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:00:46.090

您是否尝试过使用[`date`标签](http://struts.apache.org/2.0.12/docs/date.html)：

```
<s:date name="parentEngagementDetials.Parent_Engagement_Date" format="dd/MM/yyyy" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:06:11.547

`DateFormat`在顶部定义 a （**就在`iterate`标记之前也可以**）为：

```
//use the date format patter as desired 
<% java.text.DateFormat formatter= new java.text.SimpleDateFormat("mm/dd/yyyy)");%> 
```

**获取日期字符串为：**

```
 formatter.format(Parent_Engagement_Name); 
```

更新的部分 int 您的代码将如下所示：

```
 <s:iterator value="parentEngagementOfList">
        <s:property value="Parent_Engagement_Name"/>
        <s:set name="myenv" value="%{Parent_Engagement_Name}"/>
        <s:set name="num" value="%{formatter.format(Parent_Engagement_Date)}"/>
           <li><a href=""><s:property value="%{myenv}"/></a></li>
           <li><a href=""><s:date value="%{num}"/></a></li>
           <p>This is inside iterator </p>

</s:iterator> 
```

希望这可以帮助。

# c++ - Cmake找不到Boost文件夹

> ID：12887228
> 
> 赞同：4
> 
> 时间：2012-10-14T22:36:37.523
> 
> 标签：c++, visual-c++, boost, cmake

我正在使用 Windows 7 - 64bit 并正在尝试构建一个项目。当我使用 cmake 时出现错误

```
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos
t.cmake:1191 (message):
  Unable to find the requested Boost libraries.

  Unable to find the Boost header files.  Please set BOOST_ROOT to the root
  directory containing Boost or BOOST_INCLUDEDIR to the directory containing
  Boost's headers.
Call Stack (most recent call first):
  src/CMakeLists.txt:310 (find_package)

CMake Error at src/CMakeLists.txt:312 (message):
  Boost C++ libraries not found.  Please install or try setting BOOST_ROOT 
```

我已将变量 BOOST_ROOT 设置为 D:\MyProject\boost_1_43_0\boost\ 但我仍然得到这个。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T03:10:13.333

将 boost 放在项目的子文件夹中并不是 CMake 定位 boost 的标准做法。我在 Program Files 中安装了 boost x64 - MSVC 2010，CMake 会自动找到它。

```
Boost_DIR : C:/Program Files/Boost/share/cmake/boost
Boost_INCLUDE_DIR : C:/Program Files/Boost/include 
```

您也可以尝试在系统环境变量级别设置 Boost_DIR。

# c# - ASP.NET MVC 4 错误处理

> ID：12887232
> 
> 赞同：2
> 
> 时间：2012-10-14T22:36:45.443
> 
> 标签：c#, error-handling, asp.net-mvc-4

好的，所以我试图让我的控制器在出错时转到文件夹`Error.cshtml`下。`Shared`我在启动时配置了过滤器：

## 全球.asax

```
protected void Application_Start()
{
    ...
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    ...
} 
```

## 过滤器配置文件

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
} 
```

## 家庭控制器.cs

```
[HandleError(View = "Error")] <---- I have the HandleError attribute
public class HomeController : Controller
{
    IDbConnection _connection = new SqlConnection(ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString);

    [Authorize]
    public ActionResult Index()
    {
        // get the users current events
        try
        {
            ViewBag.UserEvents = _connection.Query<MyEvents>("select ...)", new { });
        }
        catch (Exception ex)
        {
            throw new HttpException(500, ex.Message);
        }

        return View();
    }
    ...
} 
```

因此，当该`Index`方法因为我没有打开连接而引发异常时，它只会给我默认的 ASP.NET 异常页面。我在这里错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T22:44:01.223

您是否有机会在本地计算机上运行它？如果您将 customErrors 设置为 Off 或 RemoteOnly，HandleError 默认情况下不会在本地计算机上显示错误。将其设置为开。

# php - Yii 模型扩展/重载

> ID：12887236
> 
> 赞同：0
> 
> 时间：2012-10-14T22:37:06.177
> 
> 标签：php, class, model, yii, extending-classes

我有一个具有一些属性和关系的帐户模型，并且我有一个经销商模型。关键是经销商实际上是一个帐户，只有它有可能在其下拥有帐户。

实现这一点的最佳方法是什么，起初我有一个特殊的经销商类，它们之间有关系，但实际上我只想要一个账户类，如果账户是经销商，则使用经销商类。

**账户模式**

```
<?php

/**
 * This is the model class for table "account".
 *
 * The followings are the available columns in table 'account':
 * @property string $id
 * @property string $reseller_id
 * @property string $name
 * @property string $invoice_id
 * @property boolean $is_reseller
 *
 * The followings are the available model relations:
 * @property Reseller $reseller
 * @property Contact[] $contacts
 * @property Domain[] $domains
 * @property HostingAccount[] $hostingAccounts
 * @property User[] $users
 */
class Account extends CActiveRecord {

    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Account the static model class
     */
    public static function model($className = __CLASS__) {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName() {
        return 'account';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules() {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('name', 'required'),
            array('id, reseller_id', 'length', 'max' => 40),
            array('name', 'length', 'max' => 45),
            array('invoice_id', 'length', 'max' => 10),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id, reseller_id, name, invoice_id', 'safe', 'on' => 'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations() {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'reseller' => array(self::BELONGS_TO, 'Reseller', 'reseller_id'),
            'contacts' => array(self::HAS_MANY, 'Contact', 'account_id'),
            'domains' => array(self::HAS_MANY, 'Domain', 'account_id'),
            'hostingAccounts' => array(self::HAS_MANY, 'HostingAccount', 'account_id'),
            'users' => array(self::HAS_MANY, 'User', 'account_id'),
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels() {
        return array(
            'id' => 'ID',
            'reseller_id' => 'Reseller',
            'name' => 'Name',
            'invoice_id' => 'Invoice',
        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search() {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria = new CDbCriteria;

        $criteria->compare('id', $this->id, true);
        $criteria->compare('reseller_id', $this->reseller_id, true);
        $criteria->compare('name', $this->name, true);
        $criteria->compare('invoice_id', $this->invoice_id, true);

        return new CActiveDataProvider($this, array(
                    'criteria' => $criteria,
                ));
    }

    /**
     * Adds UUID before the item is saved
     * 
     */
    public function beforeSave() {
        if ($this->isNewRecord)
            $this->id = new CDbExpression('UUID()');

        return parent::beforeSave();
    }

} 
```

**经销商模式**

```
<?php

class Reseller extends Account
{

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
                        'reseller' => array(self::BELONGS_TO, 'Reseller', 'reseller_id'),
                        'contacts' => array(self::HAS_MANY, 'Contact', 'account_id'),
                        'domains' => array(self::HAS_MANY, 'Domain', 'account_id'),
                        'hostingAccounts' => array(self::HAS_MANY, 'HostingAccount', 'account_id'),
                        'users' => array(self::HAS_MANY, 'User', 'account_id'),
            'accounts' => array(self::HAS_MANY, 'Account', 'reseller_id'),
            'account' => array(self::BELONGS_TO, 'Account', 'account_id'),
        );
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:04:25.533

首先请记住[**ActiveRecord** !=**模型**](http://kore-nordmann.de/blog/why_active_record_sucks.html)很容易混淆，当心！

还要检查[这个帖子](http://karwin.blogspot.com/2008/05/activerecord-does-not-suck.html)

现在，您可以使用一些[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)来为您提供所需的类，帐户或经销商，具体取决于您的逻辑，如果不是所有帐户都可以是经销商，您可能还需要一些方法来确定这一点。像“is_reseller”列或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T10:25:58.860

我对模型使用了扩展类来实现不同的方法，唯一的先决条件是在新类中添加这个函数：

```
public static function model($className=__CLASS__){
return parent::model($className);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T14:48:10.103

最后，我建立了账户与自身的关系并解决了它。

```
 /**
 * @return array relational rules.
 */
public function relations() {
    return array(
        'reseller' => array(self::BELONGS_TO, 'Account', 'account_id'),
        'users' => array(self::HAS_MANY, 'User', 'account_id'),
        'accounts' => array(self::HAS_MANY, 'Account', 'account_id'),
    );
} 
```

# sitecore - 如何在 Sitecore 中发布多个版本的内容项以交付（网络数据库）？

> ID：12887245
> 
> 赞同：1
> 
> 时间：2012-10-14T22:38:11.910
> 
> 标签：sitecore, sitecore6, sitecore-workflow

我有一个要求，允许网站的用户查看项目的当前发布版本（已通过工作流）+以前的版本+计划在未来发布的版本。因此，当用户访问网站上的内容项目时，他们将看到以下选项卡：项目的先前、当前和未来版本。

我看过一些文章如何拦截发布管道，但仍然无法评估这种情况是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T23:10:51.973

没有本地方式允许在给定时间实时发布多个版本。这归结为 Sitecore 的发布流程如何运作。在高层次上，让我解释一下：

使用***主***数据库的创作环境包含`0-n`每个项目的版本。当用户决定发布一段内容时，只有标记为“最终”的最新版本才会发布到发布目标数据库，例如通常是***网络***数据库。***与主***数据库不同，发布目标数据库（例如***web***）将始终只有一个给定项目的版本。

 ***让我再说一遍：**

> 前端面向公众的网站的数据库在任何时候都只有一个给定内容项的版本。

由于您指出网站的前端需要显示来自以下的三个版本：

*   以前的
*   当前的
*   未来

这意味着显示要发布的“未来”版本的纯粹要求意味着您的站点不会使用典型的 master-to-web 发布模型，而是需要以从 master 数据库运行的“实时模式”运行。正如我所说，您甚至根本不会发布，并且会在您编辑/保存内容时呈现内容。

因此，出于这个原因，您需要编写前端演示组件，这些组件生成选项卡以查询项目并获取当前版本、先前版本（假设它是“最终版”）和先前版本版本（假设它的“最终”）。*

# mysql - 在mysql中插入相关的多条记录

> ID：12887246
> 
> 赞同：0
> 
> 时间：2012-10-14T22:38:37.277
> 
> 标签：mysql, sql

我有两个mysql表，想插入多条记录而不是一一创建，获取id并插入相关记录

以下是表格：

```
CREATE TABLE `visit` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ip_address` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

CREATE TABLE `visitmeta` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `page_visit_id` int(11) NOT NULL,
  `key` varchar(255) NOT NULL,
  `value` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) 
```

目前我在访问时插入一条记录，获取它的 id 并在访问元数据中插入记录。有没有办法在访问中创建新记录并在同一查询中创建访问元记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:50:47.323

用一个查询在两个表中插入记录是不可能的，但是您可以使用 MySQL 的[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)函数在两个查询中插入记录：

```
INSERT INTO visit
  (ip_address)
VALUES
  ('1.2.3.4')
;

INSERT INTO visitmeta
  (page_visit_id, key, value)
VALUES
  (LAST_INSERT_ID(), 'foo', 'bar'),
  (LAST_INSERT_ID(), 'baz', 'qux')
; 
```

另请注意，以原始的四字节二进制形式存储 IP 地址通常更方便/更高效（可以使用 MySQL[`INET_ATON()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_inet-aton)和[`INET_NTOA()`](http://dev.mysql.com/doc/en/miscellaneous-functions.html#function_inet-ntoa)函数分别转换为/从这种形式）。

# jquery - 在 Shopify 框架中使用 jquery 或 javascript join() 或附加到 URL 的末尾

> ID：12887254
> 
> 赞同：0
> 
> 时间：2012-10-14T22:39:52.403
> 
> 标签：jquery, url, href, shopify

单击按钮时，我想在下面的 URL 末尾添加“+20-30”。

目前我有：mydomain.com/collections/mens/white

我希望我的网址是 mydomain.com/collections/mens/white+20-30

```
 <div class="clearfix filter">
            {% assign tags = 'White, Grey, Tan, Neutral, Blue, Black' | replace: ' ,', ',' | replace: ', ', ',' | split: ',' %}
            <p>Filter Color</p>
             <div id="dd" class="mywrap-dropdown-2" tabindex="2">Select
                    <ul class="dropdowner" id="coll-filter">
                        <li><a href="">All</a></li>
                        {% for tag in tags %}
                      {% if current_tags contains tag %}
                      <li><a href="{{ tag | handle }}" class="selected">{{ tag }}</li>
                      {% elsif collection.all_tags contains tag %}
                      <li><a href="{{ tag | handle }}">{{ tag }}</li>
                      {% endif %}
                      {% endfor %}
                    </ul>
                </div>   
        </div> 
```

jQuery：

```
 $('#coll-filter li a').on('click', function () {
  var newTags = [];
  jQuery('#coll-filter li a').each(function() { 
    if (jQuery(this).attr('href')) {
    newTags.push(jQuery(this).attr('href'));
  }
});
 if (newTags.length) {
   var query = newTags.join('+');
   var newhref = jQuery('{{ 'tag' | link_to_tag: 'tag'    }}').attr('href').replace('tag', query);
    jQuery(this).attr("href", newhref)
   } 
  else {
     {% if collection.handle %}
     window.location.href = '/collections/{{ collection.handle }}';
      {% elsif collection.products.first.type == collection.title %}
    window.location.href = '{{ collection.title | url_for_type }}';
     {% elsif collection.products.first.vendor == collection.title %}
    window.location.href = '{{ collection.title | url_for_vendor }}';
    {% endif %}

  }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:41:42.977

```
var newhefc = $(this).attr('href') + '+20-30';
$(this).attr('href', newhefc); 
```

或者更直接：

```
$(this).attr( 'href', $(this).attr('href') + '+20-30' ); 
```

* * *

查看您的编辑，其他所有内容都相同且有效，如果您只想添加固定字符串，则应该是

```
jQuery(this).attr("href", newhref + '+20-30') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:43:11.793

假设您正在更新`href`链接：

```
$(this).attr('href', function(i,h) { return h + '+20-30'; }); 
```

或者，更简单地说：

```
this.href += '+20-30'; 
```

jQuery 并不*总是*必需的，但重要的是要记住 jQuery 方法将准确返回在`href`属性中找到的内容，而本机 DOM 方法（第二个示例）将返回一个绝对/“解析”的完整 URL。

（这些示例包括明确假设`this`（因此`$(this)`）引用`a`您尝试更新其`href`属性的相关元素。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:15:14.667

看看[http://wiki.shopify.com/Link_to_tag](http://wiki.shopify.com/Link_to_tag)

这将为您使用液体创建 url。

# javascript - 便携式MongoDB？

> ID：12887256
> 
> 赞同：28
> 
> 时间：2012-10-14T22:40:28.740
> 
> 标签：javascript, html, mongodb

我一直想知道是否有可能拥有一个可移植的 MongoDB 实例。

我的目标是制作一个完整的 Javascript + HTML5 应用程序，并将数据存储在**/data**文件夹中，每个*集合*都是一个 .json 文件，但是硬编码文字**数据库**肯定会重新发明轮子（或钢铁）。

我在 Google 上搜索了一些 Javascript 制作的 JSON 数据库作为参考，但我的目光还是落在了**BSON**数据格式上。

那可能吗？或者更好的是，我是否错过了另一种适合我需求的突破性技术？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-30T14:56:49.867

免责声明：我只是遇到了这个，还没有尝试过。MongloDB ( [https://github.com/Monglo/MongloDB](https://github.com/Monglo/MongloDB) ) 看起来很有趣。从我的快速浏览来看，它似乎是一个类似于 MongoDB 的界面，可以轻松地使用本地存储或缓存和 AJAX 备份到服务器端存储。但正如我所说，我还没有尝试过。随机 github 发现的乐趣。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-26T09:17:54.307

我创建了[NeDB——](https://github.com/louischatriot/nedb)一个实现 MongoDB API 的纯 Javascript 数据库。它可以用作 Node.js 模块并在浏览器中使用，并支持持久性。

它还支持索引，使其比不支持的数据库更快（例如 TaffyDB，MongloDB 似乎也是如此）

# php - 有没有办法调试 PHP 以捕获非对象属性的错误？

> ID：12887258
> 
> 赞同：0
> 
> 时间：2012-10-14T22:40:36.617
> 
> 标签：php

我正在使用 Google Map API V3 向其发送 Lat/Lng 并返回完整地址。我正在解析使用对象返回的地址。它适用于许多地址，但对于其中一些地址，它会生成关于属性是非对象的 PHP 错误：

```
PHP Notice:  Trying to get property of non-object in get5.php on line 47
PHP Notice:  Trying to get property of non-object in get5.php on line 48
PHP Notice:  Trying to get property of non-object in get5.php on line 49 
```

以下是 47-49 的代码行：

```
$city_google_api = $country->AdministrativeArea->Locality->LocalityName;
$state_google_api = $country->AdministrativeArea->AdministrativeAreaName;
$zip_code_google_api = $country->AdministrativeArea->Locality->PostalCode->PostalCodeNumber; 
```

我想进一步调试它，但我不知道这是哪个记录导致这些关于非对象属性的消息。有没有办法捕获错误或检查“非对象的属性”以便我可以转储变量？我不想为每条记录转储它，因为输出太多。一般来说，我想知道是否有办法捕获错误以转储变量？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:44:25.530

拿：

> ```
> $city_google_api = $country->AdministrativeArea->Locality->LocalityName; 
> ```

并暂时重写它：

```
$area            = $country->AdministrativeArea;
$locality        = $area->Locality;
$city_google_api = $locality->LocalityName; 
```

对其他三行执行相同的操作，然后错误中的行号会准确地告诉您问题出在哪里。

**分而治之——你的调试技术朋友。**

* * *

您还可以从一开始就进行防御性编程，以便不仅更好地报告错误，而且在运行时“捕获”错误：

```
if (!is_object($country))
   throw SomeException();

$area = $country->AdministrativeArea;

if (!is_object($area))
   throw SomeException();

$locality = $area->Locality;

if (!is_object($locality))
   throw SomeException();

$city_google_api = $locality->LocalityName; 
```

或者进一步检查每个对象的实际类型。不过，这通常是多余的——一旦你修复了你的代码，你就会知道每个变量的类型，原来的三行就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:44:23.743

```
if (!is_object($country)) {
    //debug
}
if (!is_object($country->AdministrativeArea)) {
    //debug
}
//etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:44:40.100

实际上没有，但你可以检查一下

*   [使用property_exists()](http://de3.php.net/property_exists)的对象具有特定属性
*   [使用is_object()](http://de2.php.net/is-object)检查它是否真的是一个对象
*   [或使用instanceof](http://de1.php.net/instanceof)具有某种类型。

# python - 使用 Python 从包含 PNG 图像的原始矢量生成图像。

> ID：12887262
> 
> 赞同：2
> 
> 时间：2012-10-14T22:41:05.340
> 
> 标签：python, r, python-imaging-library, cairo, rpy2

在 RI 中，使用以下测试代码创建一个包含 PNG 图像的原始矢量。（格式 = ARGB (640 x 480)）

```
library(Cairo)
library(png)

Cairo(type='raster')
x=seq(0,3,by=0.01)    
y=2*sin(2*pi*(x-1/4))
plot(x,y)  #Test plot
rawdata = writePNG(dev.capture(native=TRUE), raw())
assign("rawpng", rawdata, envir = .GlobalEnv) 
```

生成的向量如下所示：`c(89, 50, 4e, 47, 0d, 0a, 1a, 0a, 00, 00, 00, 0d, 49, 48, 44, 52, 00, 00, 02, 80, 00, 00, 01, e0, 08, 06, 00, 00, 00, 35, d1, dc, e4, 00, 00, 20, 00, 49, 44, 41, 54, 78, 9c, ec, dd, 77, af, 5d, ee, cf, 75, 71, 41, d6, 90, 99, e7, ec, b3, 66, 9f, b5, d7, 7a, d6, b3, c0, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc, cc,.................................. b3, b0, fc, 1f, fe, 86, bd, ef, 71, 27, 9e, 88, 00, 00, 00, 00, 49, 45, 4e, 44, ae, 42, 60, 82)`

现在我想使用原始向量在 Python 画布中显示图像，但我似乎无法正确处理。使用 Rpy2 和 Pil，我设法生成了一个图像，但它完全搞砸了。

```
rawdataVec = rpy2.robjects.globalenv['rawpng']
rawdataArray = numpy.asarray(rawdataVec)
newshape = (640,480,4)
newstrides = (rawdataArray.itemsize, rawdataArray.itemsize,rawdataArray.itemsize)
data = numpy.lib.stride_tricks.as_strided(rawdataArray, shape=newshape, strides=newstrides)
img = Image.fromstring('RGBA', (640,480), data.tostring(),'raw','RGBA',0,1)
photo = ImageTk.PhotoImage(image=img) 
```

我知道将绘图保存为图像文件并在 Python 中重新加载会容易得多，但我需要它而不先保存文件。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:39:30.253

您能否将图像写入[StringIO](http://docs.python.org/library/stringio.html)缓冲区（本质上将图像写入内存中的“文件”），然后从该缓冲区中读取它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:48:19.847

您当前正在使用解码器进行`raw`解码。请尝试`PNG`：

```
img = Image.fromstring('RGBA', (640, 480), data.tostring(), 'PNG') 
```

# mysql - 使用 LIMIT 时获取总行数？

> ID：12887266
> 
> 赞同：90
> 
> 时间：2012-10-14T22:41:59.833
> 
> 标签：mysql

> **可能重复：**
> [在 mySQL 查询中使用 offset+limit 查找结果总数](https://stackoverflow.com/questions/5928611/find-total-number-of-results-in-mysql-query-with-offsetlimit)

我有一个非常复杂的 sql 查询，它返回分页的结果。问题是要在 LIMIT 之前获得总行数，我必须运行 sql 查询两次。第一次不使用limit子句获取总行数。sql 查询非常复杂，我认为它们必须是一种更好的方法，无需运行两次查询。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-14T22:45:01.743

幸运的是，从 MySQL 4.0.0 开始，您可以在查询中使用选项，这将告诉 MySQL 计算不考虑子句`SQL_CALC_FOUND_ROWS`的总行数。`LIMIT`您仍然需要执行第二个查询才能检索行数，但它是一个简单的查询，并不像检索数据的查询那么复杂。用法很简单。在您的主查询中，您需要在第二个查询`SQL_CALC_FOUND_ROWS`之后添加选项，`SELECT`您需要使用`FOUND_ROWS()`函数来获取总行数。查询将如下所示：

```
SELECT SQL_CALC_FOUND_ROWS name, email FROM users WHERE name LIKE 'a%' LIMIT 10;

SELECT FOUND_ROWS(); 
```

唯一的限制是您必须在第一个查询之后立即调用第二个查询，因为`SQL_CALC_FOUND_ROWS`不会在任何地方保存行数。尽管此解决方案还需要两个查询，但它的速度要快得多，因为您只执行一次主查询。您可以在 MySQL 文档中阅读有关[SQL_CALC_FOUND_ROWS 和 FOUND_ROWS()的更多信息。](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#id2890708)

**编辑：**您应该注意，在大多数情况下，运行两次查询实际上比`SQL_CALC_FOUND_ROWS`. 看[这里](http://www.mysqlperformanceblog.com/2007/08/28/to-sql_calc_found_rows-or-not-to-sql_calc_found_rows/)

**编辑 2019：**

> SQL_CALC_FOUND_ROWS 查询修饰符和随附的 FOUND_ROWS() 函数自 MySQL 8.0.17 起已弃用，并将在未来的 MySQL 版本中删除。

[https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_found-rows](https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_found-rows)

建议`COUNT`改用

```
SELECT * FROM tbl_name WHERE id > 100 LIMIT 10;
SELECT COUNT(*) WHERE id > 100; 
```

# java - Android中的仪表动画

> ID：12887267
> 
> 赞同：0
> 
> 时间：2012-10-14T22:42:18.507
> 
> 标签：java, android, android-animation

我正在尝试创建仪表/仪表/表盘动画作为我正在尝试构建的应用程序的一部分。

我要做的是显示我通过仪表上的传感器获得的加速度值。现在我能够成功地从传感器获取值，但我不知道如何将它们显示为动画仪表/刻度盘。

我查看了逐帧和补间动画，但它们不适合我的需要，因为我似乎无法使用它们来根据代码输入更改动画。

我应该能够显示仪表的图像和针的图像，然后根据值更改针图像的旋转以使其看起来具有动画效果，但我不知道该怎么做。

有没有办法做我想做的事？有没有更好/替代的方法？

* * *

我正在使用标准的 Android SDK 和 eclipse 并尝试支持 android v2.2 以上的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:57:23.123

嗨 Ayos 绘制背景，最好是纯色，然后用不同的颜色（黑色）绘制指示器。当您获得一个新值时，测试它是否不同，以及它是否以背景颜色绘制指示器（擦除它）。然后绘制新指标。您需要找到一种方法来缩放原始数据并将其转换为度数以绘制指标。如果您的差异测试允许您在更改不会使指标移动少于一两个度数的情况下不更改指标，那么它是最好的。如果您使用图像或图案作为背景，那么您在擦除指示器方面有很大的工作量。您可能必须每次都重新绘制背景，这需要大量的处理时间，并且仪表可能看起来很跳跃。悬崖

# .net - 同步 MMF 测试

> ID：12887270
> 
> 赞同：0
> 
> 时间：2012-10-14T22:42:42.730
> 
> 标签：.net, vb.net, architecture

我正在就我的测试的有效性寻求一些第二意见。

简而言之，我使用 MMF 来模拟从 WinForms 客户端到 Windows 服务的同步方法调用。由于此处讨论的原因，WCF 和命名管道都不适用[于此](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/b83c8f10-fbe4-47bc-9652-7f4a0715c39a/)。

对于我的原型，我创建了两个简单的应用程序——一个控制台应用程序代表 WinForms“客户端”，一个 WinForms 应用程序代表 WinService“服务器”。

我必须克服两个主要问题：1）服务器的计时器每三秒触发一次，2）操作系统似乎需要至少一整秒来获取然后释放互斥锁。这第二点让我很好奇。我原以为这个过程是即时的，但显然我错了。

为了解决这两个问题，我使用了 Thread.Sleep——两秒钟等待服务器的计时器，一秒钟等待互斥体处理。任何小于这些的间隔都会导致间歇性读/写同步失败。当然，您可以随意调整代码以获得您自己的结果。

我的测试由客户端中的 30,000 次迭代循环组成，该循环“调用”服务器中的“方法”并将响应写入日志文件。目前我在迭代 ~22,500 没有任何错误。

我的问题：有人看到我的测试有任何问题吗？鉴于我的 MSDN 帖子（上面链接）中指出的要求，到目前为止我的结果是否表明设计稳定？

也就是说，如果我的架构可以改进，我会非常有兴趣听到它。

这是代码：

*控制台（客户端）*

```
Imports System.IO
Imports System.IO.MemoryMappedFiles
Imports System.Threading
Imports System.Text
Imports System.Security.Cryptography

Module Main
  Sub Main()
    Dim _
      sForward,
      sReverse,
      sOutput As String

    Console.WriteLine("Enter a string to reverse:")

    For iCount As Integer = 0 To 29999
      sForward = GetRandomString(7)
      sReverse = ReverseString(sForward)
      sOutput = sForward & " => " & sReverse

      File.AppendAllText("Output.log", sOutput & vbCrLf)

      Console.WriteLine(sOutput)
      Thread.Sleep(1000)
    Next

    Console.ReadLine()
  End Sub

  Private Function GetRandomString(Length As Integer) As String
    Dim sSeedText As String
    Dim oBuilder As StringBuilder
    Dim aBuffer As Byte()
    Dim oCrypto As RNGCryptoServiceProvider

    sSeedText = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    oBuilder = New StringBuilder
    aBuffer = New Byte(Length - 1) {}
    oCrypto = New RNGCryptoServiceProvider

    oCrypto.GetNonZeroBytes(aBuffer)

    For Each bByte As Byte In aBuffer
      oBuilder.Append(sSeedText.Chars(bByte Mod sSeedText.Length))
    Next

    Return oBuilder.ToString
  End Function

  Private Function ReverseString(Data As String) As String
    Dim lIsOwner As Boolean
    Dim iLength As Integer
    Dim aData As Byte()

    aData = Encoding.Unicode.GetBytes(Data)
    iLength = aData.Length

    Using oFile As MemoryMappedFile = MemoryMappedFile.CreateNew("{99EC7026-0059-4D48-99B1-B400BDACBDD8}", 1024)
      Using oMutex As New Mutex(True, "{35C4F5C6-874B-4536-901A-D5382B7E2B9C}", lIsOwner)
        '*=====================================================================
        '  Wait for the server's Timer.Tick event to fire
        '*=====================================================================
        Thread.Sleep(2000)
        '*=====================================================================

        Using oStream As MemoryMappedViewStream = oFile.CreateViewStream(0, 0)
          Using oWriter As New BinaryWriter(oStream)
            oWriter.Write(iLength)
            oWriter.Write(aData)
          End Using
        End Using

        oMutex.ReleaseMutex()

        '*=====================================================================
        '  Wait for the server to acquire and then release the mutex
        '*=====================================================================
        Thread.Sleep(1000)
        '*=====================================================================

        oMutex.WaitOne()

        Using oStream As MemoryMappedViewStream = oFile.CreateViewStream(iLength + 4, 0)
          Using oReader As New BinaryReader(oStream)
            With oReader
              aData = .ReadBytes(.ReadInt32)
            End With
          End Using
        End Using

        oMutex.ReleaseMutex()
      End Using
    End Using

    Return Encoding.Unicode.GetString(aData)
  End Function
End Module 
```

*WinForms（服务器）*

```
'*=============================================================================
'
'   Add a ListBox
'   Add a Background Worker
'   Add a Windows Forms Timer
'     Interval = 3000
'     Enabled = True
'
'*=============================================================================

Imports System.IO
Imports System.IO.MemoryMappedFiles
Imports System.ComponentModel
Imports System.Threading
Imports System.Text

Public Class Main
  Private Sub tmrTimer_Tick(Sender As Object, e As EventArgs) Handles tmrTimer.Tick
    Dim lIsOpen As Boolean
    Dim oFile As MemoryMappedFile

    tmrTimer.Stop()

    Try
      lIsOpen = True
      oFile = MemoryMappedFile.OpenExisting("{99EC7026-0059-4D48-99B1-B400BDACBDD8}")
      bgwWorker.RunWorkerAsync(oFile)

    Catch ex As FileNotFoundException
      lIsOpen = False

    End Try

    If Not lIsOpen Then
      tmrTimer.Start()
    End If
  End Sub

  Private Sub bgwWorker_DoWork(Sender As Object, e As DoWorkEventArgs) Handles bgwWorker.DoWork
    Dim iLength As Integer
    Dim sData As String
    Dim aData As Byte()

    Using oFile As MemoryMappedFile = e.Argument
      Using oMutex As Mutex = Mutex.OpenExisting("{35C4F5C6-874B-4536-901A-D5382B7E2B9C}")
        oMutex.WaitOne()

        Using oStream As MemoryMappedViewStream = oFile.CreateViewStream(0, 0)
          Using oReader As New BinaryReader(oStream)
            With oReader
              aData = .ReadBytes(.ReadInt32)
            End With
          End Using
        End Using

        sData = Encoding.Unicode.GetString(aData)
        aData = Encoding.Unicode.GetBytes(New String(sData.Reverse.ToArray))
        iLength = aData.Length

        Using oStream As MemoryMappedViewStream = oFile.CreateViewStream(iLength + 4, 0)
          Using oWriter As New BinaryWriter(oStream)
            oWriter.Write(iLength)
            oWriter.Write(aData)
          End Using
        End Using

        oMutex.ReleaseMutex()
      End Using
    End Using

    e.Result = sData
  End Sub

  Private Sub bgwWorker_RunWorkerCompleted(Sender As Object, e As RunWorkerCompletedEventArgs) Handles bgwWorker.RunWorkerCompleted
    lstArguments.Items.Add(e.Result)
    tmrTimer.Start()
  End Sub
End Class 
```

# css - CSS垂直对齐图像与文本不起作用（Wordpress）

> ID：12887273
> 
> 赞同：0
> 
> 时间：2012-10-14T22:42:53.413
> 
> 标签：css, image, wordpress, html, vertical-alignment

所以我试图让一个图像文件在 div 的中间垂直对齐，文本在我的移动 Wordpress 主题的右侧。不幸的是，在图像上使用“vertical-align:middle”会导致以下结果：

[![](../Images/25f8266911f8df10ab67788f49aa8a53.png)](https://i.stack.imgur.com/7AzPB.png "链接到最初发布的图像。")

这是我的CSS：

```
 <div <?php post_class('post clearfix'); ?> id="post-<?php the_ID(); ?>">
    <div style="vertical-align:middle"><?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail('post', 'secondary-image');  endif; ?></div>
<h2 class="title"><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'themater' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>
             <div class="postmeta-primary-fp">

           <?php echo get_the_date(); ?></div>

               <div class="postmeta-primary-fp"> <?php if(comments_open( get_the_ID() ))  {
                    ?><span class="meta_comments"><?php comments_popup_link( __( '<b>0</b> comments', 'themater' ), __( '<b>1</b> comment', 'themater' ), __( '<b>%</b> comments', 'themater' ) ); ?></span><?php
                } ?>
        </div> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:54:47.913

创建一个父 div 来保存图像和文本，将图像放在左浮动 div 中，将 line-height 设置为 div 的高度，并将 vertical-align 设置为 middle，然后为文本添加一个右浮动 div。就像是：

```
<div style="width:400px;">
    <div style="float:left;width:50px;height:50px;line-height:50px;vertical-align:middle;">
        <img src="imageurl" />
    </div>

    <div style="width:380px;float:left;height:50px;">
        Text here
    </div>
</div> 
```

如果您希望文本与图像居中对齐，请将其行高设置为 div 高度，并将垂直对齐到中间。

# while-loop - 我一直陷入无限循环java

> ID：12887275
> 
> 赞同：0
> 
> 时间：2012-10-14T22:42:59.340
> 
> 标签：while-loop

我正在编写战舰程序。现在我正在测试几行代码，看看它是否会让船朝上行驶。我的程序是怎么设置的，比如用户点击航母按钮设置他的航母，程序也要设置ai的航母。这些船被放置在一个按钮阵列上，称为 tlba。aifirstclicki 由随机生成器设置，因此它将选择一个随机行。aifirstclickj 选择一个随机列，结合两者在按钮阵列（即 10x10）上精确定位一个点。我编写了以下代码来尝试使它，以便如果程序有 outofboundsexception 错误，或者换句话说，如果程序选择了第一个点，最终将导致 outofbounds 异常错误，因为 for 循环将继续添加点直到 aiclickcount = 5、它应该重新开始并选择一个不同的位置，直到找到一个可以放置所有 5 个位置的位置。我一直陷入无限循环。

```
 int aiclickcount = 0;
    while (directiondecider == 0)
    {//up
        aifirstclicki = generator.nextInt(10);
        aifirstclickj = generator.nextInt(10);
        while (aifirstclicki != 3 &&
               aifirstclicki != 2 &&
               aifirstclicki != 1 &&
               aifirstclicki != 0)
        {
            for(int k=0; k<shiplength; k++)
            {
                tlba[aifirstclicki - k][aifirstclickj].setBackground(Color.RED);
                aistringarray[aifirstclicki - k][aifirstclickj] = "aircraftcarrier";
                aioccupied2d[aifirstclicki - k][aifirstclickj] = true;
                aiclickcount++;
            }

            if (aiclickcount == 5)
            {
                shipset = true;
                break;
            } 
        }
        System.out.println(shipset);
    } 
```

有谁知道出了什么问题或对我的问题有不同的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:51:00.560

`aiclickcount == 5`如果你不是，你永远不会有`shiplength`5\. 放入`if`你的`for`循环中。你根本不需要第二个，你也不需要摆脱它。只需生成大于 3 的数字`nextInt(6) + 4`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:52:01.097

您的代码没有告诉我们变量 shiplength 具有哪个值。如果为 0，则永远不会进入 for 循环，因此 aiclickcount 将保持为 0，并且永远不会到达您的 break 语句（前提是 aifirstclicki 的随机值大于 3）。尝试使用调试器单步执行您的代码，并让它向您显示变量的值，以了解发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:58:39.707

你`break;`只会让你摆脱第二个 while 循环，而不是第一个循环，因为它只适用于它所属的最内层循环。

Java 允许您指定多级中断，而不必使循环条件复杂化： [Breaking out of nested loops in Java](https://stackoverflow.com/questions/886955/breaking-out-of-nested-loops-in-java)

# printing - 打印多列格式化文本 vb6

> ID：12887291
> 
> 赞同：0
> 
> 时间：2012-10-14T22:44:49.813
> 
> 标签：printing, vb6, formatting

我需要打印如下图所示的格式化文本，我如何在 vb6 中实现这一点，因为 vb6 打印对象对此不友好

我需要打印的由方框表示的数据是不相关的

![在此处输入图像描述](../Images/b3a4ce60bb301f5ca4bab9b13596aa37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:43:12.220

这不是很困难。您可以使用**ScaleLeft**、**ScaleWidth**、**CurrentX**和**CurrentY**属性来设置打印在页面上的开始位置。在这种情况下，您可能还希望将**Orientation**属性设置为**vbPROPortrait**。使用这些定位属性，并设置您想要的字体和样式，然后调用**Printer.Print**

此方法将在页面上绘制 4 个框。使用 (x, y) 坐标或对数字进行硬编码以更改大小。如果您不希望打印机从此方法打印页面并从其他地方调用 Printer.EndDoc，请删除 .EndDoc 语句。VB6 的完整打印机对象文档可在[http://msdn.microsoft.com/en-us/library/aa443915%28v=vs.60%29.aspx找到](http://msdn.microsoft.com/en-us/library/aa443915%28v=vs.60%29.aspx)

```
Private Sub DrawBox()

    With Printer
        .ScaleMode = vbTwips
        lngScaleWidth = .ScaleWidth
        lngScaleHeight = .ScaleHeight
        Printer.Line (.ScaleLeft + lngMargin, .ScaleTop + lngMargin)-(lngScaleWidth / 2 - (100 + lngMargin * 2), lngScaleHeight / 2 - (100 + lngMargin * 2)), lngColor, B
        Printer.Line (lngScaleWidth / 2 + (100 + lngMargin * 2), .ScaleTop + lngMargin)-(.ScaleWidth - lngMargin, lngScaleHeight / 2 - (100 + lngMargin * 2)), lngColor, B
        Printer.Line (.ScaleLeft + lngMargin, lngScaleHeight / 2 + (100 + lngMargin * 2))-(lngScaleWidth / 2 - (100 + lngMargin * 2), .ScaleHeight - lngMargin), lngColor, B
        Printer.Line (lngScaleWidth / 2 + (100 + lngMargin * 2), lngScaleHeight / 2 + (100 + lngMargin * 2))-(.ScaleWidth - lngMargin, .ScaleHeight - lngMargin), lngColor, B
        .EndDoc
    End With

End Sub 
```

下面的示例代码演示了一些定位和其他属性。

```
Dim lMargin as Integer
lMargin = 200

With Printer
    .FontBold = True
    .FontItalic = False
    .CurrentY = .CurrentY + (3 * .TextHeight(App.ProductName))
    .CurrentX = lLeftMargin
    .FontName = "Arial"
    .FontSize = 11
    Printer.Print "Date " & strTransDate
End With 
```

# javascript - Google 涂鸦的动画效果

> ID：12887300
> 
> 赞同：3
> 
> 时间：2012-10-14T22:46:00.287
> 
> 标签：javascript, jquery

我一直想知道这些涂鸦是如何动画的。有人可以详细说明这些动画的制作方式吗？我知道它使用 JS 为图像设置动画。但我想知道它是如何与用户点击和时间交互的，而且它还兼容跨浏览器，这让我很惊讶。

![在此处输入图像描述](../Images/a7562b8573b80768c8d2dc2052b48f15.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:49:52.720

javascript中有许多跨浏览器兼容的方式来做简单的事情，比如

a.) 移动元素（通过更改其样式位置属性）
b.) 以另一种方式调整/编辑元素的大小（切换图像、更改颜色等）
c.) 检测鼠标悬停和单击（非常常见）

平滑动画通常由一些函数提供，该函数可以少量移动（或以其他方式更改）元素的 CSS 属性。例如将位置从 (1,1) 更改为 (1,2)。这一像素变化看起来非常流畅。然后像帧一样调用此函数，每秒多次调用此函数（每秒调用此函数 15 次会产生 15 FPS（每秒帧数）动画）。

使用 Javascript 事件及其更改 CSS 属性的能力，并且每秒多次执行此操作，会产生出色的跨浏览器动画 :)

# python - 如何限制对函数的调用，但事后肯定会处理它

> ID：12887301
> 
> 赞同：1
> 
> 时间：2012-10-14T22:46:11.947
> 
> 标签：python, limit

我在一个类中有以下代码：

```
def __setattr__(self, key, value):
    self.__dict__['d'][key] = value
    ...
    self.saveToIni() 
```

该`saveToIni`函数在每个对象调用时将所有 dict 的项目保存到一个 ini 文件中`setattr`。如果在最后 120 毫秒内进行了 80`setattr`次调用，那么每次都会从头开始写入文件。该函数还命令并有时从字典中删除数据，所以我不想更改它。

我想将调用限制为一次，比如说 5 秒：

1.  当第一个`setattr`被触发时，一个定时器异步启动，仍然没有运行`saveToIni`。
2.  如果进行了任何调用`setattr`并且计时器仍在计数，则它既不会触发计时器也不会运行`saveToIni`。
3.  当计时器超时时，`saveToIni`应该启动。

现在，我不确定如何实现这种行为。我曾想过弄乱线程，但仍然没有找到如何去做的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:05:04.057

我要走的路是创建一个定时器线程，它每 5 秒运行一次**timedSaveToIni函数。**我也会有一个标签**isSaveRequested**告诉这个函数它是否应该实际将数据写入磁盘。

_ ***setattr*** **_***函数只需将此标记设置为 true **。***

 *您的代码如下所示：

```
class Dict:

  def __init__(self):
    ...
    self.isSaveRequested = False
    self.timedSaveToIni()

  def timedSaveToIni(self):
    threading.Timer(5.0, self.timedSaveToIni).start()
    if self.isSaveRequested:
      self.saveToIni()
      self.isSaveRequested = False

  def __setattr__(self, key, value):
    self.__dict__['d'][key] = value
    ...
    self.isSaveRequested = True

  def saveToInit()
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:29:22.980

也许您只是让函数记住上次调用它的时间，直到自上次调用以来已经过去了 5 秒，才让它阻塞（睡眠）。这真的不需要任何类型的线程。这是一个示例 - 只是一个想法，并不特定于您的用例。

```
import time

def timed_func():
  while (timed_func.last_use + 5) > time.time():
    time.sleep(1)
  print "I am working..." # Do the job
  timed_func.last_use = time.time()

def main():
  timed_func.last_use = time.time() - 5
  while True:
    timed_func()

if __name__ == '__main__':
  main() 
```*

# api - 与 Clojure 中的 REST API 交互

> ID：12887307
> 
> 赞同：27
> 
> 时间：2012-10-14T22:46:54.677
> 
> 标签：api, rest, clojure, request

在无需运行 Web 服务器的情况下向外部 REST API 发送和接收请求的建议方法是什么？我似乎找不到任何关于发出请求和解析结果 JSON 的信息。到目前为止，我发现的唯一东西就是 json 解析的东西（使用 Cheshire 库）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-14T23:22:15.160

与外部 REST API 交互的一个很好的库是[clj-http](https://github.com/dakrone/clj-http)，它使用[Apache HTTPClient](http://hc.apache.org/httpclient-3.x/)）。对于 JSON，有几个选项：[clojure.data.json](https://github.com/clojure/data.json)（一个核心库）和[cheshire](https://github.com/dakrone/cheshire)是一些流行的。lib clj-http 将 cheshire 作为依赖项，并内置了 JSON 支持。 Cheshire 使用[Jackson](http://jackson.codehaus.org/)。

例如，使用`clj-http`：

```
(ns my.core
  (:require [clj-http.client :as client]))

(client/put my-url
  {:form-params body
   :content-type :json
   :oauth-token @token
   :throw-exceptions false
   :as :json}) 
```

# joomla - Joomla！2.5 模板设计书

> ID：12887308
> 
> 赞同：2
> 
> 时间：2012-10-14T22:47:04.517
> 
> 标签：joomla, joomla2.5

我正在为 Joomla 寻找一本完整的书！2.5 模板设计。（我想学习最好、最新、最标准的 Joomla 2.5 模板编码方式）

你有什么建议？（成本不是问题！）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:12:26.303

我会从免费的东西开始。Joomla wiki 页面[在这里](http://docs.joomla.org/Creating_a_basic_Joomla!_template)创建一个基本模板。我个人发现[这个](http://community.joomla.org/blogs/community/1131-creating-a-joomla-template-from-scratch.html)在 Joomla 会议上制作的视频很有帮助。[本](http://www.compassdesigns.net/joomla-tutorials/joomla-15-template-tutorial)教程为 Joomla 1.5 提供了很少的模板明智地从 1.5 更改为 1.6-2.5 版本。

还要确保您对非 joomla css/html/php 模板感到满意，因为这就是这些在一天结束时的内容，并在此处和那里添加了一些额外的位。

完成后，看看一些现有的框架。大多数都是免费的。[这里](http://www.yootheme.com/themes/warp-framework)的 yootheme warp master 主题、[Nooku](http://www.nooku.org/)框架、[Gantry](http://www.gantry-framework.org/)框架，如果你想在现有框架上制作自己的模板，以便前几次去感受它，所有这些都是可定制的。如果您希望以这种方式工作，您还可以从其他人构建模板的方式中了解网站开发的工作原理！

到目前为止花费了 0 便士，并且非常了解 Joomla 模板的工作原理！如果您不顾一切地花钱，请在[这里](http://www.amazon.co.uk/Joomla-Templates-Angie-Radtke/dp/0321827317/ref=sr_1_1?ie=UTF8&qid=1350256307&sr=8-1)购买官方的 Joomla Book 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:09:30.003

您所需要的都在这里： [http ://www.amazon.com/Joomla-Templates-Press-Angie-Radtke/dp/0321827317/ref=pd_sim_b_7](https://rads.stackoverflow.com/amzn/click/com/0321827317)

出版日期：2012 年 8 月 1 日

# sslstream - c# 高速使用 SslStream.WriteAsync

> ID：12887310
> 
> 赞同：1
> 
> 时间：2012-10-14T22:47:12.040
> 
> 标签：sslstream

我在使用 SslStream.WriteAsync 时遇到了一个恼人的问题

这是代码

```
public void Send(PacketWriter writer)
{
    var buffer = writer.GetWorkspace();

    _sslStream.WriteAsync(buffer, 0, buffer.Length);
} 
```

当以极高的速度写入数据时，它告诉我

`The beginwrite method cannot be called when another write operation is pending`

[注意]：我的意思是高速这样的东西

```
for (var i = 0 ; i <= 1000; i++)
{
    Send(somedata);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:00:11.820

您必须等到前一个异步写入完成。

更改您的发送方法以返回`Task`：

```
public Task Send(PacketWriter writer)
{
    var buffer = writer.GetWorkspace();
    return _sslStream.WriteAsync(buffer, 0, buffer.Length);
} 
```

调用方法`async`，然后等待直到每个发送操作完成：

```
for (var i = 0 ; i <= 1000; i++)
{
    await Send(somedata);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-10T09:29:09.783

可以试试这个-

```
 private static void send_data(SslStream socket_stream, byte[] data)
        {
          Task task = new Task(() => { socket_stream.Write(data, 0, data.Length); });
          task.RunSynchronously();
          task.Wait();
        } 
```

这将确保所有消息都以正常的方式发送，没有任何例外

# javascript - 简化页面滚动？

> ID：12887315
> 
> 赞同：0
> 
> 时间：2012-10-14T22:47:28.057
> 
> 标签：javascript, jquery, html, css

无论如何可以缓解我的页面滚动吗？我正在做水平页面滚动。正如您在下面看到的那样，它的工作原理，但我想做一个轻松滚动。

已经尝试在 jQuery（通过 Transit）上使用 css3 转换滚动它，但由于触发次数过多而无法正常工作。

我怎样才能做到这一点？

谢谢！

```
 $('#holder')
        .bind('mousewheel', function(event, delta) {
        this.scrollLeft -= (delta * 20);      
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:02:33.530

您将不得不使用动画功能。我做的一个简单的例子是here

[http://jsfiddle.net/bd6pf/2/](http://jsfiddle.net/bd6pf/2/)

向右滚动并尝试在元素上滚动

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T20:24:41.480

我已经解决了这个问题，最好只使用 jQuery 或至少使用 javascript，我知道使用 CSS3 很酷，我尝试尽可能频繁地使用它，但在这种情况下，我会坚持使用 javascript。

这是我用过的一个很棒的：http: [//pagescroller.com/](http://pagescroller.com/)

# php - 仅获取具有特定键的数组元素

> ID：12887322
> 
> 赞同：20
> 
> 时间：2012-10-14T22:48:14.060
> 
> 标签：php, arrays

> **可能重复：**
> [数组键上的模式匹配](https://stackoverflow.com/questions/1595763/pattern-match-on-a-array-key)

我需要获取具有特定键模式的数组中的所有元素。例如在这个数组中：

```
$items = array(
   "a"         => "1",
   "b"         => "2",
   "special_1" => "3",
   "c"         => "4",
   "special_2" => "5",
   "special_3" => "6",
   "d"         => "7"
); 
```

我需要所有带有包含字符串的键的元素`special_`。这些应该定义一个新数组：

```
$special_items = array(
   "special_1" => "3",
   "special_2" => "5",
   "special_3" => "6",
); 
```

`while`除了循环，还有什么聪明的方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T22:54:36.627

这个怎么样？

```
$special_items = array();

foreach($items as $key => $val) {
    if(substr($key, 0, 8) == 'special_')
        $special_items[$key] = $val;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T22:56:41.797

首先，您需要获取一个包含键的数组。[`array_keys`](http://php.net/array-keys)

然后，您需要过滤密钥以找到所需的密钥。[`array_filter`](http://php.net/array-filter)

使用此回调：

```
function($a) {return substr($a,0,8) == "special_";} 
```

然后翻转数组，使键再次成为键而不是值。[`array_flip`](http://php.net/array_flip)

最后，将这些键与原始数组相交。[`array_intersect_key`](http://php.net/array-intersect-key)

结果：

```
$special_items = array_intersect_key($items,array_flip(array_filter(array_keys($items),function($a) {return substr($a,0,8) == "special_";}))); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T22:58:19.413

您可以使用`FilterIterator`

```
$iterator = new SpecialFilter($items, 'special');
var_dump(iterator_to_array($iterator)); 
```

输出

```
array
  'special_1' => string '3' (length=1)
  'special_2' => string '5' (length=1)
  'special_3' => string '6' (length=1) 
```

使用的类

```
class SpecialFilter extends FilterIterator {
    private $f;
    public function __construct(array $items, $filter) {
        $object = new ArrayObject( $items );
        $this->f = $filter;
        parent::__construct( $object->getIterator() );
    }
    public function accept() {
        return 0 === strpos( $this->getInnerIterator()->key(), $this->f );
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T22:53:58.893

```
$special_items = array_intersect_key(array_flip(preg_grep('/^special_\d+/', array_keys($items))), $items); 
```

请不要实际使用它。只需像所有普通人一样使用带有 strpos + if 语句的 foreach 循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T22:56:25.147

怎么样

```
$keys = preg_grep( "/special_/i", array_keys( $items ) );

$new_array = array();

foreach( $keys as $k )
{
    $new_array[ $k ] = $items[ $k ];
} 
```

# windows-installer - 从另一个 MSI Installshield Permier 2010 复制文件

> ID：12887328
> 
> 赞同：0
> 
> 时间：2012-10-14T22:48:49.643
> 
> 标签：windows-installer, installshield, installshield-2010

我想检测是否安装了以前的程序，如果是，请从该程序中复制一些特定的文件和文件夹。

我需要检测这个程序的安装目录，因为用户可以更改安装目录，如果程序没有安装，则中止安装。

我已经在升级会话中创建了一个条目，选择了程序 msi，并且 installshield 安装设计器已经用程序升级代码填充了该条目。但是在没有安装程序的情况下尝试重新编译程序后，我能够以相同的方式安装。在升级会话中创建条目不会使安装在程序不存在时中断，而且我不明白我必须将检测属性值放在哪里才能使安装停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:46:05.637

您需要使用应用程序搜索而不是升级。

升级表用于查找同一应用程序的先前版本，如果找到，则执行升级：删除先前版本并安装新版本。

阅读[搜索现有应用程序、文件、注册表条目或 .ini 文件条目](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371564%28v=vs.85%29.aspx)，或 InstallShield 文档中的类似部分。

# ruby-on-rails - Rspec选择错误的表名

> ID：12887330
> 
> 赞同：0
> 
> 时间：2012-10-14T22:49:09.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试在我的新可安装引擎 gem 上启动并运行 RSpec。我遵循了在可安装引擎上设置 rspec 的指南。我在设置固定装置时功亏一篑。它不是对表名 _clips 进行命名空间，所以我收到了一个 sql 错误。我知道这有一些问题，想知道是否有一个好的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:50:17.093

这可能由[https://github.com/rspec/rspec-rails/issues/448](https://github.com/rspec/rspec-rails/issues/448)修复（在 git 中修复，但尚未发布）。尝试将您的 Gemfile 指向来自 github 的 rspec-rails 并查看是否：

```
gem "rspec-rails", :git => "git://github.com/rspec/rspec-rails.git" 
```

# oracle - 从相关子查询中选择总和 - Oracle

> ID：12887331
> 
> 赞同：1
> 
> 时间：2012-10-14T22:49:17.113
> 
> 标签：oracle, coldfusion

我正在尝试更改我的代码以让 Oracle 完成所有繁重的工作。最初，我有一个执行以下操作的函数：

```
<!--- get common data --->
<cfquery name="getCommon">
    SELECT  x, NVL(SUM(y), 0) as y
    FROM    table_1
    WHERE   z between #this# and #that#
    GROUP BY x
</cfquery>

<!--- place common values into a struct --->
<cfset oCommon = StructNew() >
<cfloop query="getCommon">
    <cfset oCommon[x] = y >
</cfloop>

<!--- get records to loop through --->
<cfquery name="getSomething">
    SELECT a, b, c/d as e from (
        SELECT DISTINCT t2.a, 
                t2.b, 
                c,
                sum(d)as d
        FROM table_2 t2
        LEFT JOIN table_3 t3
        ON t2.a = t3.a
        AND t2.b = t3.b
        GROUP BY t2.a, t2.b, c
    )
</cfquery>

<!--- loop through the results --->
<cfloop query="getSomething">
    <!--- do an update to the target table if conditions are met --->       

    <!--- calculate my important new value --->
    <cfset new_value = #getSomething.e# * #oCommon[b]# >

    <!--- finally, insert my new values into the target table --->
    <cfquery name="insertTarget">
        INSERT INTO target_table(
                a, 
                b, 
                c
        )
        VALUES ( 
            #getSomething.a#,
            #getSomething.b#,
            #new_value# 
        )
    </cfquery>
</cfloop> 
```

我已经想出了如何使用 Oracle 的 MERGE 来替换循环中的更新语句。我的问题是替换插入语句的 SQL。我希望能够计算 SQL 中的新值......一旦我得到它，我想我可以很容易地找出 MERGE/insert 部分。

所以我想做类似的事情：

```
 SELECT a, b, c/d*y as e from (
        SELECT DISTINCT t2.a, 
            t2.b, 
            c,
            sum(d)as d,
            (
                SELECT y FROM (
                    SELECT  x, NVL(SUM(y), 0) as y
                    FROM    table_1
                    WHERE   z between #this# and #that#
                            AND x = t2.a
                    GROUP BY x
                )
            )       
        FROM table_2 t2
        LEFT JOIN table_3 t3
        ON t2.a = t3.a
        AND t2.b = t3.b
        GROUP BY t2.a, t2.b, c
    ) 
```

这也许显然是行不通的。目前我得到一个 ORA-00904: "t2"."a": Invalid Identifier，这并不奇怪。

所以，我基本上需要弄清楚如何从 table_1 中获取 y 的总和，通过 x = table_2.a 相关，到原始的 getSomething 查询中。

编辑：我试过这个，但不太正确：

```
SELECT a, b, c/d*y as e from (
        SELECT DISTINCT t2.a, 
            t2.b, 
            c,
            sum(d)as d,
             NVL(SUM(y), 0) as y     
        FROM table_2 t2
        LEFT JOIN table_3 t3
        ON t2.a = t3.a
        AND t2.b = t3.b
        LEFT JOIN table_1 t1
        ON t1.x = t2.a
        AND t1.z between #this# and #that#
        GROUP BY t2.a, t2.b, c
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:26:28.393

你可以这样写你的查询：

```
SELECT a, b, c / d * y AS e
  FROM (SELECT DISTINCT t2.a,
                        t2.b,
                        c,
                        sum(d) AS d,
                        v.y
          FROM table_2 t2
               LEFT JOIN table_3 t3
                  ON t2.a = t3.a
                 AND t2.b = t3.b
               LEFT JOIN (SELECT x, nvl(sum(y), 0) AS y
                            FROM table_1
                           WHERE z BETWEEN #this# AND #that#
                          GROUP BY x) v
                  ON t2.a = v.x
        GROUP BY t2.a, t2.b, c, v.y) 
```

如果方便的话，优化器应该能够将谓词推`t2.a = v.x`送到子查询中（例如，如果在 上有一个索引`table_1.x`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-07-23T15:36:41.330

对我有用的 sql 语句如下：

```
 Select p.id,p.name, ( select sum(quantity) from details d where d.idproduct=p.id) sum from  products p 
```

# ubuntu - cmake：当我尝试通过终端安装 sfml 时包含不受支持的字符

> ID：12887333
> 
> 赞同：1
> 
> 时间：2012-10-14T22:49:33.890
> 
> 标签：ubuntu, makefile, cmake, sfml

cmake -G "Unix Makefiles" -D CMAKE_BUILD_TYPE=发布 -D BUILD_SHARED_LIBS=TRUE

取自[本站](http://sfmlcoder.wordpress.com/2011/08/16/building-sfml-2-0-with-make-for-gcc/)。

当我 cd 进入文件夹时不起作用我得到这个： CMake 错误：源目录的路径：

```
/home/hassooni/Development/sfml/BUILD_SHARED_LIBS=TRUE 
```

包含不受支持的字符“=”。

请使用不同的源目录名称。

请帮忙！

谢谢

注意：我想将它与 g++ 和 gvim 一起使用，我拥有所有依赖项并完成了链接教程指定的所有内容！:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:53:11.357

声明中的 D 和变量之间不应有空格。它应该是：

```
cmake -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=TRUE 
```

`-D`请注意， and`CMAKE_BUILD_TYPE=Release`和`-D`and之间的空格`BUILD_SHARD_LIBS=TRUE`已被删除。

# modx - MODX getChunk 替代品

> ID：12887335
> 
> 赞同：0
> 
> 时间：2012-10-14T22:49:39.203
> 
> 标签：modx, modx-revolution

我正在寻找 MODX getChunk() 替代方案，主要是因为它在输出很多次时似乎真的很慢。当我在一个片段中使用它一次时，我几乎无法注意到它的速度，但如果它在循环中使用，那么每一秒都很重要。

作为图库的一部分，我每页输出约 1300 张图像 100 张，它需要：

*   6-7 秒，当输出放入一个块 $output .= $modx->getChunk('chunkname');
*   输出纯 HTML 时 2-3 秒

有谁知道使用块输出图像查询结果的更快替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:04:57.750

你的块是什么样的？

您可能会考虑放弃 getChunk() 调用并仅内联您的 html：

```
$output = '';
foreach ($images as $img) {
    $output .= '<li><a href="'.$img['path'].'" alt="'.$img['name'].'" /></li>';
}

return $output; 
```

是的，是的，这是不好的做法，但是当面对替代方案花费两倍以上的时间时，这并不是一个糟糕的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:07:25.470

更多的架构层面还有另一种解决方案 - 1300 张图像在一个页面上加载是巨大的！

根据您的设计，为什么不加载前 20 - 30 个并实现某种无限滚动，当用户开始滚动时通过 ajax 加载其余部分（大约 20 个）。

这将减轻服务器的负载，节省带宽，提供更快的用户体验。并绕过缓慢的 getChunk 调用。

# python - 我的 Python 代码在运行和分步调试时返回不同的答案

> ID：12887338
> 
> 赞同：1
> 
> 时间：2012-10-14T22:50:35.670
> 
> 标签：python, debugging, bignum

* * *

我尝试在**Python2.7**上编写一些代码，这将能够使用线性列表实现 bignum 算法。我知道，这在 Python 中没用，但这是我在拼贴中的功课。我写了一些工作代码，但问题在于**划分**. 我确信该功能有效，但是当我运行代码对其进行测试时，我得到了错误的答案（在某些情况下）。但是，如果我一步一步地执行代码，它就可以正常工作。

我正在使用 linux，但我在朋友的 windows 计算机上测试了我的代码，我遇到了同样的问题。如果重要的话，我**用 PyDev 在 Eclipse 中**编写了代码。

我在 Ideone 上的代码：[**代码**](http://ideone.com/wLbwF)

如果控制台输出中的行相同 - 输出是正确的。在 Ideone 上输出也不正确。但是如果你在第 383 行下一个断点，然后进入**_simple_div**方法，答案将是正确的

希望大家帮我找出原因。
PS对不起丑陋的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:15:16.763

如果我运行你的代码，我会得到

```
~/coding:$ python divbug2.py 
1-1
10 
```

那`-1`看起来不对。`-1`在分区的某个地方插入了一个被插入的东西吗？首先要尝试的是`-1`在该函数中搜索，这给出了

```
 i-=1
        res._addFirst(i)
        if i==-1: i=0 
```

.. 这看起来很奇怪，因为如果`i == -1`, 那么你刚刚将它添加到`res`. 也许我们应该先检查一下，即

```
 i-=1
        if i==-1: i=0
        res._addFirst(i) 
```

交换这两行会产生

```
~/coding:$ python divbug2.py 
10
10 
```

然后 - 在编写了一个真正的`.copy()`方法之后，因为`copy.deepcopy`它*真的很*慢，甚至使用 PyPy 我也厌倦了等待事情完成：

```
>>>> all(int(str(LongNum(x)._simple_div(LongNum(y)))) == x/y for x in range(2000) for y in range(1, 2000))
True 
```

当你一步一步地做这件事时，我不确定为什么这对你有用，但我有点惊讶它完全有效。

# c++ - 在 C++ 中设置变量值之前检查变量是否更好？

> ID：12887342
> 
> 赞同：8
> 
> 时间：2012-10-14T22:51:19.487
> 
> 标签：c++, performance, variables

如果我有一个布尔值和一些可能会更改它的代码，然后我想将它设置为`true`，我应该检查它是否是`false`？

例如：

```
bool b = false;
// Some code
// Here "b" can be true or false
if (cond) {
    b = true;
} 
```

对比

```
bool b = false;
// Some code
// Here `b` can be `true` or `false`
if (cond && !b){
    b = true;
} 
```

哪个更快？

**注意**：

[我之所以这样问，是因为Eratosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)的以下实现：http : [//bloc.gerardfarras.com/wp-content/uploads/2011/12/erastotenes.txt](http://bloc.gerardfarras.com/wp-content/uploads/2011/12/erastotenes.txt)

```
if (( i % divisor == 0 ) && ( numsprimers[i] == 0 )) {
    numsprimers[i] = 1;
} 
```

（如果`numsprimers[i]==1`这意味着它`i`不是质数。如果它是 0 它可以是质数或不是质数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:52:58.210

这是非常非常挑剔的，但一般来说最好只改变价值。

无论如何，检查和设置值的开销大致相同，那么为什么在某些情况下必须同时做这两个呢？

现在，如果您想知道是否应该覆盖一些自定义类型（比如说 100000 个单词的列表）或者您是否应该首先检查它是否需要被覆盖（比如说通过简单地检查布尔值或时间戳）然后您应该首先检查，因为检查布尔值或时间戳的成本远低于将这么多单词写入内存。

当然，这完全取决于各种因素，例如您正在编辑的内存是否在缓存中，“检查”有多昂贵，您需要多久覆盖一次值与不需要覆盖它的频率，当然还有内存的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:53:12.750

怎么样：

```
if ( b = !!cond ) {

} 
```

`b`如果需要有值，则检查条件并将值应用于`b`。如果您想`b`保持真实，那么我会说使用您的其他示例之一。它不应该有所作为。

# javascript - 使用 CSS 相对于容器（以及相对于更大容器的容器）定位元素

> ID：12887356
> 
> 赞同：0
> 
> 时间：2012-10-14T22:53:39.550
> 
> 标签：javascript, html, css

您好，感谢您阅读这篇文章。

我有一些容器 div 包含一些元素 div，但我也有一个包装器来包装所有容器 div。我应该如何保留 css 样式，以便元素的位置相对于容器，容器的位置相对于更大的容器，而更大的容器的位置相对于最终容器（即包装器）？

我需要javascript吗？

谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:10:24.933

将主容器设置为位置：相对，将子容器设置为位置：绝对。如果您需要在子容器中放置更多容器，您也可以在它们上使用 position:absolute。

例如：

```
.wrapper{position:relative;}
.big-container{position:absolute;top:0;left:0;}
.containerOne{position:absolute;top:0;left:0;}
.containerTwo{position:absolute:top:0;left:0;} 
```

# c# - 为什么这个查询会返回 null？

> ID：12887357
> 
> 赞同：0
> 
> 时间：2012-10-14T22:53:45.537
> 
> 标签：c#, mongodb

我正在为我正在为学校工作的游戏项目设置数据库存储，并且刚刚开始这样做。我在赞助商的建议下使用 MongoDB。我已经成功地实现了插入带有单个索引的名称列表，但我无法让它返回它们。我正在使用的代码如下。

```
public string getName(int id) {
        var query = Query.EQ("_index", id);
        if (Names.FindOne(query) != null) return (Names.FindOne(query)).FirstName;
        else return "Error";
    } 
```

我现在已经确定问题是对象没有被保存。我这样做的代码是

```
public void storeName(string name, int number) {
        Name Insert = new Name{FirstName = name, index = number};
        var query = Query.EQ("_FirstName", name);
        if (Names.FindOne(query) == null) { Names.Save<Name>(Insert); Console.WriteLine(Insert.index+" "+Insert.FirstName); }
        else {Console.WriteLine("Bork"); }
    } 
```

Name 对象是自动映射的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:28:37.643

我解决了我的问题。索引和名字字段不需要有下划线。

# c++ - 如何使用 bash 将文本文件定向到 C 程序？

> ID：12887358
> 
> 赞同：-2
> 
> 时间：2012-10-14T22:53:47.837
> 
> 标签：c++, linux, bash

我正在做“cat words | sign”（words 是文本文件，sign 是 c 程序）。然而，这似乎产生了一个无限循环。知道如何解决这个问题吗？

以及是什么意思

```
sign < words | @sort > out 
```

下面是c程序的代码。

```
int main(){
    char words[80];
    scanf("%s", words);
    printf(words);
    string_sort(words);
    printf(" ");
    printf(words);
    printf("\n");

    while ( words != ""){
            scanf("%s", words);
            printf("%s", words);
            string_sort(words);
            printf("%s", " ");
            printf("%s", words);
            printf("\n");
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:06:01.653

当程序到达 EOF 时，`scanf()`保持`words`不变，原因`words != ""`总是正确的。

而不是测试`words`，你应该测试`feof(stdin)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:21:16.907

当您到达文件末尾时，`scanf`将找不到单词并返回 0（不更改`words`数组）。您可以`scanf`在 while 语句中直接调用为`while(scanf("%s", words) == 1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T23:28:40.423

在 bash 中，`>`and`<`用于重定向文件的输出和输入。所以`< words`意味着程序将从中读取其标准输入，`words`而`> out`意味着它将其标准输出写入到`out`.

`|`用于连接管道中的两个程序，第一个程序的输出到第二个程序的输入。

所以`sign < words | @sort > out`运行这两个程序`sign`和`@sort`. `sign`从文件中获取其输入`words`并将其输出发送到`@sort`程序的输入，而输出`@sort`到文件`out`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:39:25.483

这始终适用于`char words[80];`：

```
words != "" 
```

因为这等价于`&words[0] == &""[0]`...您只需比较指针 - 一个等于 begin of `words`，另一个指向字符串字面量`""`。他们总是不同的。

你可能的意思是：

```
strcmp(words, "") != 0 
```

要不就：

```
words[0] != 0 
```

# .net - SimpleMembership 中的 EF CodeFirst 和 UserProfile

> ID：12887369
> 
> 赞同：0
> 
> 时间：2012-10-14T22:55:18.903
> 
> 标签：.net, asp.net-mvc, entity-framework

我有一个有定义的表故事

```
public class Tale
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Text { get; set; }
    public DateTime ReleaseDate { get; set; }

    public int enum_TaleAuthorTypeId { get; set; }
    public virtual enum_TaleAuthorType enum_TaleAuthorType { get; set; }

    public int CommentableId { get; set; }
    public virtual Commentable Commentable { get; set; }
} 
```

当我在控制台中键入“update-database”时，我与 CommentableId 的一列和 enum_TaleAuthorTypeId 的一列有很好的关系。

现在，我想添加 UserProfile 并尝试输入如下内容：

```
 public int UserProfile_UserId { get; set; }
    public virtual UserProfile UserProfile { get; set; } 
```

但是在添加迁移之后，我有这个：

```
 public override void Up()
    {
        CreateTable(
            "dbo.UserProfile",
            c => new
                {
                    UserId = c.Int(nullable: false, identity: true),
                    UserName = c.String(),
                })
            .PrimaryKey(t => t.UserId);

        AddColumn("dbo.Tales", "UserProfile_UserId", c => c.Int(nullable: false));
        AddColumn("dbo.Tales", "UserProfile_UserId1", c => c.Int());
        AddForeignKey("dbo.Tales", "UserProfile_UserId1", "dbo.UserProfile", "UserId");
        CreateIndex("dbo.Tales", "UserProfile_UserId1");
    }

    public override void Down()
    {
        DropIndex("dbo.Tales", new[] { "UserProfile_UserId1" });
        DropForeignKey("dbo.Tales", "UserProfile_UserId1", "dbo.UserProfile");
        DropColumn("dbo.Tales", "UserProfile_UserId1");
        DropColumn("dbo.Tales", "UserProfile_UserId");
        DropTable("dbo.UserProfile");
    } 
```

起初，看起来 EF 认为要创建表 UserProfile（但它已经创建并且我不需要它）。然后，EF 想添加两列“UserProfile_UserId1”和“UserProfile_UserId”，但我真的需要一列作为价值。

我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:58:13.233

尝试在您的上下文中添加

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Ignore<UserProfile>();
    } 
```

# mysql - 通过 Perl 在 MYSQL 中插入字符串

> ID：12887371
> 
> 赞同：0
> 
> 时间：2012-10-14T22:55:51.813
> 
> 标签：mysql, string, perl, dbi

我遇到的问题是我有一个用户输入了一个字符串......可以是任何少于 156 个字符的字符，如果字符串中没有撇号或引号，则 DBI 语句会完美地插入字符串。

这很好用-> 我在工作！这不起作用->我不工作！

要插入，我使用以下代码：

```
 $sth = $dbh->prepare("INSERT INTO table VALUES('$var1','$var2','$var3')");
    $sth->execute(); 
```

我知道 Perl 用 ' ' 和 " " 插入不同的字符串，但是当我尝试这样做时，我的程序会抛出一个合适的结果。我也尝试过使用“”标记将准备语句连接在一起。如果重要的话，存储 155 个字符的变量是 $var3，并且所有 3 个都是 VARCHAR 属性。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T23:01:31.007

**您需要转义变量。**

黑客利用这种疏忽来执行 SQL 注入攻击：阅读可怜的小[Bobby Tables](https://stackoverflow.com/q/332365)的故事。事实上，你*真的*应该避免通过[参数化](https://stackoverflow.com/a/60496)你准备好的语句来评估你的 SQL 变量*：*

```
$sth = $dbh->prepare('INSERT INTO table VALUES(?, ?, ?)');
$sth->execute($var1, $var2, $var3); 
```

# javascript - 通过javascript检测浏览器换行

> ID：12887372
> 
> 赞同：7
> 
> 时间：2012-10-14T22:55:57.400
> 
> 标签：javascript, jquery, html, css

我需要 javascript 来检测每个浏览器包装的文本行并将其包装成`<span class="line">`.

我遇到过谈论测量每个单词的 y 轴的文章，但还没有看到可靠的解决方案。

这是我到目前为止所拥有的。[在Jsfiddle](http://jsfiddle.net/6VqMq/3/)上看到它。

HTML

```
<div class="inline-bg">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec cursus condimentum metus, et placerat augue rutrum vitae. Donec arcu lorem, eleifend at elementum eget, consectetur vel lacus. Nam euismod iaculis varius. Phasellus sed dui diam. Nullam facilisis, diam sit amet sagittis cursus, metus tortor gravida erat, ut fringilla risus ipsum eu nisl.</div>​ 
```

JS/jQuery

```
(function($){
    $.fn.inlinebackground = function() {
        $.each(this, function(i,t) {
            var split = $(t).html().split(' ');
            var output = '';
            $.each(split, function(i,o){
                output += '<span class="line">'+o+'</span>';
                if (i < (split.length - 1)) {
                    output += '<br>';
                }
            });
            $(t).html(output);
        });
    }
})(jQuery);

/* End Plugin Code */

// Run the plugin on .news-caption 
$(function(){
    $('.inline-bg').inlinebackground();
}); 
```

CSS

```
.inline-bg { width: 200px; line-height:3em; }
.inline-bg span.line { background-color: black; color: white; padding: 15px; } 
```

​</p>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T00:48:35.400

我必须承认，起初我认为这将是一项艰巨的任务，因为任务浏览器无法告诉您自动换行换行发生的位置。

我创建了一个解决方案，首先将每个单词包装在一个跨度中，然后遍历所有跨度以确定它们在容器中的顶部位置。然后它构建一个行开始和结束跨度的索引数组，并将每行单词跨度包装在一个包装跨度中。

**演示：http:** [//jsfiddle.net/KVepp/2/](http://jsfiddle.net/KVepp/2/)

**可能的限制：**

*   在每个跨度末尾添加的空格可能会导致跨度中断到文本可能没有的新行。
*   不确定是否需要在换行后删除每个单词跨度。（非常简单的模组）
*   假设容器中除文本外没有其他 html
*   如果多个容器需要，需要一些额外的工作才能变成插件
*   单词的正则表达式在空间上很简单。可能需要额外的正则表达式来重复出现空格

HTML：

```
<div id="content">Lorem Ipsum<div> 
```

CSS：

```
#content{ position:relative} 
```

JS：

```
var $cont = $('#content')

var text_arr = $cont.text().split(' ');

for (i = 0; i < text_arr.length; i++) {
    text_arr[i] = '<span>' + text_arr[i] + ' </span>';
}

$cont.html(text_arr.join(''));

$wordSpans = $cont.find('span');

var lineArray = [],
    lineIndex = 0,
    lineStart = true,
    lineEnd = false

$wordSpans.each(function(idx) {
    var pos = $(this).position();
    var top = pos.top;

    if (lineStart) {
        lineArray[lineIndex] = [idx];
        lineStart = false;

    } else {
        var $next = $(this).next();

        if ($next.length) {
            if ($next.position().top > top) {
                lineArray[lineIndex].push(idx);
                lineIndex++;
                lineStart = true
            }
        } else {
            lineArray[lineIndex].push(idx);
        }
    }

});

for (i = 0; i < lineArray.length; i++) {
var start = lineArray[i][0],
    end = lineArray[i][1] + 1;

/* no end value pushed to array if only one word last line*/
if (!end) {
    $wordSpans.eq(start).wrap('<span class="line_wrap">')
} else {
    $wordSpans.slice(start, end).wrapAll('<span class="line_wrap">');
} 
```

}​</p>

# python - 当分隔符不存在时，Python如何处理拆分？

> ID：12887377
> 
> 赞同：17
> 
> 时间：2012-10-14T22:56:10.747
> 
> 标签：python, syntax

我有以下python代码：

```
def split_arg(argv):
    buildDescriptor = argv[1]
    buildfile, target = buildDescriptor.split("#")

    return buildfile, target 
```

它需要一个字符串 ( `argv[1]`)`buildfile#target`并将它们拆分为两个同名的变量。因此，像“ *my-buildfile#some-target* ”这样的字符串将分别分解为*my-buildfile*和*some-target*。

但有时，不会有“#”和目标；有时你只会有“ *my-buildfile* ”，在这种情况下，我只希望*目标*是“”（空）。

如何修改此函数，以便它处理“#”不存在的实例并返回带有空目标的构建文件？

目前，如果我只传递构建文件，它会引发错误：

```
buildfile, target = buildDescriptor.split("#")
ValueError: need more than 1 value to unpack 
```

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T23:01:51.580

我会使用明显的方法：

```
 buildfile, target = buildDescriptor.split("#") if \
                        "#" in buildDescriptor else \
                        (buildDescriptor, "") 
```

请注意，当 buildDescriptor 中有多个“#”时，这也会引发异常（这通常是一件好事！）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-14T22:59:14.467

首先，将拆分的结果放在一个列表中：

```
split_build_descriptor = buildDescriptor.split("#") 
```

然后检查它有多少元素：

```
if len(split_build_descriptor) == 1:
    buildfile = split_build_descriptor[0]
    target = ''
elif len(split_build_descriptor) == 2:
    buildfile, target = split_build_descriptor
else:
    pass  # handle error; there's two #s 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-15T00:46:14.863

```
>>> buildfile, _, target = "hello#world".partition("#")
>>> buildfile, target
('hello', 'world')
>>> buildfile, _, target = "hello".partition("#")
>>> buildfile, target
('hello', '') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-03T18:55:23.003

您可以在 Python 3 中执行此操作：

```
input_string = 'this is a test'
delimiter = '#'

slots = input_string.split(delimiter)
if slots[0] == input_string:
  print('no %s found' % delimiter)
else:
  print('%s found right after \"%s\"' % (delimiter, slots[0])) 
```

# c++ - C ++类型是地址的抽象？- C++ 模板

> ID：12887379
> 
> 赞同：0
> 
> 时间：2012-10-14T22:56:29.967
> 
> 标签：c++, templates, types, metaprogramming, c++-address

不幸的是，我丢失了本文的链接和源代码，但我确实记得它是关于 C++ 中的元编程和模板的；在谈论模板方法的限制时，本文谈到了传递给模板的内容不是泛型类型，而只是具有相关地址的类型（或可寻址的，我不记得确切的词）可以作为参数传递给模板。

有人可以澄清地址、类型和模板之间的这种关系吗？

一个类型可以用一个地址来标识？

* * *

***编辑***

例如[，在这个链接](http://www.comeaucomputing.com/techtalk/templates/#stringliteral)中，在链接的常见问题解答的最后一部分中，模板系统被描述为接受地址而不是泛型类型的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:54:29.223

我不知道您阅读的原始文章，但您在编辑中链接到的常见问题解答*并未*讨论类型和地址之间的联系。

它讨论了一种特定类型的模板参数，即*非类型参数*。模板参数分为三种：*类型*、*非类型*和*模板*。所以这特别是关于第二种。

非类型参数的示例`Id`在下面的定义中：

```
template <const char *Id>
struct C
{}; 
```

`Id`不代表一个类型，而是一个非类型，即一个实际值。在这个特定的示例中，该值恰好是指针类型，它表示字符串的地址。

这个想法是您可以使用它来使用字符串作为区分符来实例化模板：

```
C<"foo"> c1;  // Instantiating the "foo" version of type C
C<"bar"> c2;  // Instantiating the "bar" version of type C 
```

不幸的是，它不是这样工作的——这就是常见问题解答文章的内容。它解释了对于非类型模板参数，您必须使用常量表达式，并且在这种特殊情况下，您必须使用具有外部链接的对象的标识符，而不仅仅是文字。因此，您可以这样做的唯一方法是：

```
template <const char *Id>
struct C
{

};

char id1[] = "foo";
char id2[] = "bar";

int main()
{
  C<id1> c1;
  C<id2> c2;
  /*...*/
  return 0;
} 
```

这就是常见问题文章的解释。

但是，**这又是一个非常特殊的情况**，因为它仅适用于**地址类型的非类型参数。**请注意，给出了与*地址*的连接，因为非类型参数被显式指定为指针类型的参数`const char *`。

大多数常用模板可以使用类型参数或整数、枚举或用户定义类型的非类型参数。这些都与内存地址无关。使用模板和使用内存地址之间没有隐含的联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:59:02.290

以下是使用地址标识的类型的示例：

```
int foo;

template <int *IP>
class Bar {
};

Bar<&foo> baz; 
```

但不知何故，我不认为那是这篇文章的意思。

类型本身在 C++ 中没有地址。一个类型中的各个定义可能有也可能没有自己的地址。有些东西只在类型的实例中具有地址。

我在那里使用的技巧只能用于在程序的整个生命周期中存在的对象。然后对象的地址成为类型名称的一部分。

模板甚至不是 C++ 中的类型。只有当它们被一组特定的参数实例化时，它们才是一种类型。他们也没有地址。

# javascript - 我应该使用 | （管道）或？（问号）？

> ID：12887383
> 
> 赞同：1
> 
> 时间：2012-10-14T22:56:40.437
> 
> 标签：javascript, regex

我有分组括号`()`，`(?: )`即使括号内的表达式不匹配，我也需要匹配。我已经看到`|`并`?`用于此（即`(a|b|c|)`和`(a|b|c)?`），但应该使用/更有效，为什么？

由于不同的 JavaScript 引擎对正则表达式的解释不同，我专门使用 SpiderMonkey 引擎。然而，一个通用的（语言方面和引擎方面的）答案会很好。

编辑：一个具体的例子是[DuckDuckGo Frequency goodie](https://github.com/duckduckgo/zeroclickinfo-goodies/blob/master/lib/DDG/Goodie/Frequency.pm#L9)。为什么作者在这种情况下选择`|`了呢？`?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:07:08.597

根据您的描述，听起来合适的选择是`?`量词，它直接允许选择匹配括号之间的前一个组。

另一方面，`|`当您想要匹配*一组*模式中的一个时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:28:00.190

要检查性能，请参阅[this fiddle](http://jsfiddle.net/kN7FQ/)。

* * *

### 使用`?`with grouping 或`|`with empty string 作为选项可能会导致意外结果！

情侣测试：

```
var myString = "this is a test string"; 
var myRegexp = /(test)?/; 
var match = myRegexp.exec(myString); 
alert(match[0]); // returns empty string

var myString = "this is a string"; 
var myRegexp = /(test)?/; 
var match = myRegexp.exec(myString); 
alert(match[0]); // returns empty string

var myString = "this is a test string"; 
var myRegexp = /(test|)/; 
var match = myRegexp.exec(myString); 
alert(match[0]); // returns empty string

var myString = "this is a string"; 
var myRegexp = /(test|)/; 
var match = myRegexp.exec(myString); 
alert(match[0]); // returns empty string

var myString = "this is a test string"; 
var myRegexp = /(test)/; 
var match = myRegexp.exec(myString); 
alert(match[0]); // returns "test" 
```

这以错误结束：

```
var myString = "this is a string"; 
var myRegexp = /(test)/; 
var match = myRegexp.exec(myString); 
alert(match[0]); // error 
```

这可能是您的解决方案：

```
var myString = "this is a test string"; 
var myRegexp = /^(?:.*(test)|(?!.*test))/; 
var match = myRegexp.exec(myString); 
alert(match[1]); // returns "test"

var myString = "this is a string"; 
var myRegexp = /^(?:.*(test)|(?!.*test))/; 
var match = myRegexp.exec(myString); 
alert(match[1]); // returns undefined 
```

[用这个 fiddle](http://jsfiddle.net/xxndk/)测试上面的代码。

# python - 用于 chrome 打包应用程序中客户端/服务器通信的 Websockets

> ID：12887386
> 
> 赞同：3
> 
> 时间：2012-10-14T22:57:30.917
> 
> 标签：python, websocket

我已经彻底查看了 Chrome 打包应用程序网站和示例应用程序，但我找不到任何与应用程序中的 websockets 实现相关的示例。我想知道是否有任何示例或示例应用程序使用 Websocket 在 Chrome 应用程序中进行客户端/服务器通信？如果没有，那么有什么指南吗？甚至可以使用 WebSocket 吗？我使用 Apache HTTP 作为 Python 中的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-25T23:53:01.430

我假设您正在询问实现 WebSocket 服务器，因为浏览器本机支持客户端。（尽管如果您愿意，您绝对可以实现 WebSocket 客户端，因为您可以访问原始 TCP 接口。）

Chrome 应用程序发布了一个[示例 WebSocket 聊天服务器](https://github.com/GoogleChrome/chrome-app-samples/tree/master/samples/websocket-server)，它处理 HTTP 请求以加载聊天客户端并使用 WebSockets 在客户端之间发送消息。

如果您查看[实现](https://github.com/GoogleChrome/chrome-app-samples/blob/master/samples/websocket-server/http.js)，您会看到它使用较旧的`chrome.socket`API 来侦听 TCP 套接字并使用正确的 WebSocket HTTP 标头进行响应。它按照 WebSocket 规范的要求执行所有位操作以发送和接收数据帧。

# jquery - jquery添加输入新文本但不计为值

> ID：12887391
> 
> 赞同：0
> 
> 时间：2012-10-14T22:58:41.330
> 
> 标签：jquery, input

我有一个按钮，当单击该按钮时，在输入中添加一个文本，而不是在输入中写一些文本，但我只想获取我从键盘输入的输入值。keyup 和 keyCode 不起作用，因为我输入了 iso-8859 字符

`$('button').live('click', function() {
$('input').val($('input').val() + $(this).attr("value") );
});`

**我不想这样...**

我希望按钮值显示在输入区域但不表示为输入值，当我获得输入值时，我只获得没有按钮值的输入值

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:25:39.470

如果你有这样的表格

```
 <form name='aform' id='myform' action='somescript.php' method='POST'>
 <input type='text' id='txtinput' value='' />
 <input type='button' id='mybutton' name='mybutton' value='My text'/>
 <input type='submit' id='mysubmit' value='submit'/>
 </form> 
```

你可以这样做

```
 <script type="text/javascript">
$(document).ready(function()
    {

    $('#mybutton').click(function(){           
    $('#txtinput').attr('value',$(this).attr('value'));
    });

    $('#mysubmit').click(function(v){            
    var mixinput = $('#txtinput').attr('value');
    var cleaninput =mixinput.replace($('#mybutton').attr('value'),'');
    alert(cleaninput);
    v.preventDefault();
    v.stopPropagation();
    });

    }
    </script> 
```

现在它不只是用值来提醒你 remove v.preventDefault(); v.stopPropagation(); 并提醒正常发布值...

发布价值观

# lotus-notes - 代理背后的 Web 服务消费者？

> ID：12887392
> 
> 赞同：0
> 
> 时间：2012-10-14T22:58:50.973
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我的 Lotus Notes 应用程序中有一个 Web 服务使用者。消费者在测试环境中完美运行。但是客户在他们的网络中使用代理。我在 Domino 服务器文档中设置了一个代理值，但它仍然不起作用。

我是否必须使用其他设置才能使我的 web 服务使用者在代理后面工作？

在此先感谢，吉克拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:36:47.387

您可能需要在 Lotus Notes 客户端而不是服务器中设置代理，因为它是使用 Web 服务并因此调用 Web 服务的客户端。

谁提供网络服务？Domino 服务器还是网络外部的服务？

# python - python获取列表并仅在使用set也存在负值时才返回

> ID：12887398
> 
> 赞同：-3
> 
> 时间：2012-10-14T22:59:58.793
> 
> 标签：python, python-2.7, set

基本上我有一个大清单：

```
# where (n) is over a couple hundred thousand or is 1 million
def big_list(n):
    return [ randrange(-n//3,n//3) for i in range(n) ] 
```

`set`并且当且仅当它的负值也存在时，使用I 必须返回一个新列表。

前任。如果`list = [-3,-2,-1,2,1,4]` 它应该返回`new_list = [2,1]`

我必须使用 来执行此操作`set`，我真的迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:55:52.163

如果您`set`从使用 创建的列表中创建a `big_list()`，则可以使用它来创建所需的结果列表，方法是遍历集合的所有元素并选择所有值 > 0 且其负值也在集合中的元素。

您可以使用[列表显示](http://docs.python.org/reference/expressions.html?highlight=list%20comprehension#list-displays)`[]`表达式（通常称为“列表理解”）来创建结果列表，其中包含括号内的一行很长的代码，就像`big_list()`函数一样。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:03:52.380

将所有负数存储在一个集合中，然后得到与初始列表的交集：

```
negatives = set(-x for x in data if x < 0)
numbers_with_negatives = negatives.intersection(data) 
```

演示：

```
>>> data
[-3, -2, -1, 2, 1, 4]
>>> negatives = set(-x for x in data if x < 0)
>>> negatives
set([1, 2, 3])
>>> negatives.intersection(data)
set([1, 2]) 
```

# arrays - MIPS：阵列未正确打印

> ID：12887400
> 
> 赞同：0
> 
> 时间：2012-10-14T23:00:13.050
> 
> 标签：arrays, floating-point, mips

所以，我正在输入两个数组并打印其中一个（现在），但是当我去打印其中一个数组时，它会打印一个数组的一些值和另一个数组的一些值。我不知道为什么会这样。请帮忙。这是我的代码，然后是示例输出：

```
.data

    title: .asciiz "Find The Product of Two Matrices\n\n"
    menuString: .asciiz "Menu\n\n"
    option1: .asciiz "1\. Enter values and find product\n"
    option2: .asciiz "2\. Exit program\n\n"
    inputString: .asciiz "Enter selection: "

    promptSize: .asciiz "\nEnter row size of square matrix: "
    promptRow: .asciiz "Row: "
    promptCol: .asciiz "Col: "
    promptMatrix1Float: .asciiz "Enter a first matrix's float: "
    promptMatrix2Float: .asciiz "Enter a second matrix's float: "
    answer: .asciiz " Answer:"
    printFloat: .asciiz "\nA Float: "
    inputFirstMatrix: .asciiz "\n\nInput First Matrix(left-to-right and top-to-bottom):\n\n"
        inputSecondMatrix: .asciiz "\n\nInput Second Matrix(left-to-right and top-to-bottom):\n\n"

.globl main
.text

################################### INPUT SIZE AND MATRICES ####################

size:  li $v0, 4
       la $a0, promptSize
       syscall

        li, $v0, 5
    syscall

       add $t1, $v0, $v0
       li $t0, 0

    li $v0, 4
    la $a0, inputFirstMatrix
    syscall

L1: beq $t0, $t1, L2IndexInit

    li $v0, 4
    la $a0, promptMatrix1Float
    syscall

        li $v0, 6                      #6 is the syscall code for get float
        syscall 

        sll $t3, $t0,  3
    add $t3, $a2, $t3
    s.d $f0, 0($t3)         # Store $f0 at memory location .

    addi $t0, $t0, 1

    j L1 

L2IndexInit:

    li $v0, 4
    la $a0, inputSecondMatrix
    syscall

        li $t0, 0

L2: beq $t0, $t1, PrintIndexInit

    li $v0, 4
    la $a0, promptMatrix2Float
    syscall

        li $v0, 6                      #6 is the syscall code for get float
        syscall 

        sll $t3, $t0,  3
    add $t3, $a1, $t3
    s.d $f0, 0($t3)         # Store $f0 at memory location .

    addi $t0, $t0, 1

    j L2 

############################## PRINT MATRIX ################################################# 

PrintIndexInit:  
     li $t0, 0

PrintMatrix:   beq $t0, $t1, End

      sll $t4, $t0, 3
      add $t4, $a2, $t4
      l.d $f12, 0($t4)

      li $v0, 4
      la $a0, printFloat
      syscall

      li $v0, 2                      #2 is the syscall code for print float (arg. to print in f12)
      syscall

      addi $t0, $t0, 1

      j PrintMatrix

####################################### MAIN FUNCTION AND END ######################

End:
     lw $ra, 0($sp)
     addi $sp, $sp, 4
     jr $ra

main:
    li $v0, 4   
    la $a0, title
    syscall

        addi $sp, $sp, -4
        sw $ra, 0($sp)
        jal size
    li $v0, 10
    syscall 
```

* * *

示例输出：

```
求两个矩阵的乘积

输入方阵的行大小：2

输入第一个矩阵（从左到右和从上到下）：

输入第一个矩阵的浮点数：2.3
输入第一个矩阵的浮点数：4.3
输入第一个矩阵的浮点数：6.5
输入第一个矩阵的浮点数：4.3

输入第二个矩阵（从左到右和从上到下）：

输入第二个矩阵的浮点数：3.2
输入第二个矩阵的浮点数：6.5
输入第二个矩阵的浮点数：8.9
输入第二个矩阵的浮点数：3.2

一个浮点数：6.50000000
一个浮点数：8.89999962
一个浮点数：3.20000005
一个浮点数：4.30000019

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:45:37.670

导致它无法运行的代码有几个问题：

*   没有为这两个矩阵分配空间——用于`syscall 9`在堆上分配空间
*   在`End`中，您正在从堆栈中弹出返回地址，但您需要的地址已经在`$ra`

修复这些以使其运行后，代码可以正常工作。这是我分配内存的方式`size`：

```
size:  
    li $v0, 4
    la $a0, promptSize
    syscall

    li $v0, 5
    syscall
    add $t1, $v0, $v0

    sll $a0, $t1, 3
    li $v0, 9
    syscall
    move $a2, $v0

    li $v0, 9
    syscall
    move $a1, $v0

    li $t0, 0

    li $v0, 4
    la $a0, inputFirstMatrix
    syscall 
```

`End`和`main`：

```
End:
    jr $ra

main:
    li $v0, 4   
    la $a0, title
    syscall

        addi $sp, $sp, -4
        sw $ra, 0($sp)
        jal size

        lw $ra, 0($sp)
        addi $sp, $sp, 4

    li $v0, 10
    syscall 
```

输出：

```
Find The Product of Two Matrices

Enter row size of square matrix: 2

Input First Matrix(left-to-right and top-to-bottom):

Enter a first matrix's float: 1.2
Enter a first matrix's float: 3.4
Enter a first matrix's float: 5.6
Enter a first matrix's float: 7.8

Input Second Matrix(left-to-right and top-to-bottom):

Enter a second matrix's float: 2.1
Enter a second matrix's float: 4.3
Enter a second matrix's float: 6.5
Enter a second matrix's float: 8.7

A Float: 1.2
A Float: 3.4
A Float: 5.6
A Float: 7.8 
```

# javascript - 如何动态创建具有负索引的多维数组？

> ID：12887401
> 
> 赞同：1
> 
> 时间：2012-10-14T23:00:35.873
> 
> 标签：javascript, multidimensional-array

在 Javascript 中，我有一个具有可变行数和列数的矩阵，我希望将其存储在多维数组中。

问题是我在矩阵中还需要额外的 3 列和 3 行带有*负*索引的额外行。所以 10x10 矩阵的结果应该是一个 13x13 数组，索引从 -3 到 9。

我用以下方式定义数组：

```
 var numberofcolumns = 10;
  var numberofrows = 10;
  var matrix = [];
  for (var x = -3; x < numberofcolumns; x++) {
    matrix[x] = [];
  } 
```

这是正确的方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:08:11.143

虽然您可以创建负数属性，但您会失去一些 Javascript 的伪数组魔法。特别是，`matrix.length`即使它有 13 个元素，它仍然是 10。总的来说，这些代码可能会让任何阅读它的人感到惊讶。

您最好定义一个偏移量以从数组索引中获取所需的值，反之亦然：

```
var offset = 3
for (var x=-3; x<numberofcolumns; x++) {
   matrix[x+offset] = []
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:32:15.413

我同意 Mark Reed 关于这是对 Array 的不直观使用的观点。我认为子类是有序的。您可以按照[此处](http://www.bennadel.com/blog/2292-Extending-JavaScript-Arrays-While-Keeping-Native-Bracket-Notation-Functionality.htm)的教程对 Array 进行子类化，保留原生括号表示法，并覆盖 length() 等方法，以便它们提供合理的值。子类化还有一个额外的好处，那就是让那些阅读你的代码的人清楚地知道除了你的日常数组之外还有一些事情正在发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T23:52:42.240

您可以将矩阵定义为对象。你会失去一些数组功能，但你仍然可以访问`matrix[-3]`例如。

```
 var numberofcolumns = 10;
  var numberofrows = 10;
  var matrix = {};
  for (var x = -3; x < numberofcolumns; x++) {
    matrix[x] = [];
  }
  for (x in matrix) {
    console.log(matrix[x]);
  } 
```

或者，您可以将自己的类定义为对象或数组，然后从那里开始工作。这里有一些东西可以帮助你开始：

```
function Matrix() { };

Matrix.prototype.LBound = function()
{
    var n;
    for (i in this) {
        if (!isNaN(i) && (isNaN(n) || n > i))
            n = parseInt(i);
    }
    return n;
};

Matrix.prototype.UBound = function()
{
    var n;
    for (i in this) {
        if (!isNaN(i) && (isNaN(n) || n < i))
            n = parseInt(i);
    }
    return n;
};

Matrix.prototype.length = function()
{
    var length = this.UBound() - this.LBound();
    return isNaN(length) ? 0 : length+1;
};

Matrix.prototype.forEach = function(callback, indexes)
{
    if (!indexes) var indexes = [];
    for (var i = this.LBound(); i <= this.UBound() ; i++)
    {
        indexes[Math.max(indexes.length-1, 0)] = i;
        callback(this[i], indexes);
        if (this[i] instanceof Matrix)
        {
            var subIndexes = indexes.slice();
            subIndexes.push("");
            this[i].forEach(callback, subIndexes);
        }
    }
};

Matrix.prototype.val = function(newVal)
{
    if (newVal) 
    {
        this.value = newVal;
        return this;
    }
    else
    {
        return this.value;
    }
}; 
```

然后你会这样创建你的矩阵

```
var numberofcolumns = 10;
var numberofrows = 10;

var matrix = new Matrix();

for (var i = -3; i < numberofcolumns; i++) {
    matrix[i] = new Matrix();
        for (var j = -4; j < numberofrows; j++) {
            matrix[i][j] = new Matrix();
            matrix[i][j].val("test " + i + " " + j);
        }
} 
```

你可以在上面运行一些很酷的功能

```
console.log("Upper bound: " + matrix.LBound());
console.log("Lower bound: " + matrix.UBound());
console.log("Length: " + matrix.length());

matrix.forEach(function(item, index) 
    {
        if (item.val()) 
            console.log("Item " + index + " has the value \"" + item.val() + "\""); 
        else
            console.log("Item " + index + " contains " + item.length() + " items"); 
    }); 
```

演示：http: [//jsfiddle.net/uTVUP/](http://jsfiddle.net/uTVUP/)

# .net - .NET 在 Windows 8 中访问 DB2

> ID：12887406
> 
> 赞同：3
> 
> 时间：2012-10-14T23:01:46.493
> 
> 标签：.net, ado.net, windows-8, db2

在 Windows 7 中，我能够使用 IBM 的 DB2 驱动程序连接到 DB2，但这似乎不适用于 Windows 8。客户端驱动程序的安装失败并显示以下内容：

> MSI (c) (0C:18) [11:47:20:731]：Windows Installer 安装了产品。产品名称：IBM 数据服务器驱动程序包 - IBMDBCL1。产品版本：10.1.0.872。产品语言：1033。制造商：IBM。安装成功或错误状态：1603。

我还尝试了 DB2 的 MS OLEDB 驱动程序，它似乎也不适用于 Windows 8（也无法安装）。

是否有任何其他替代方案（例如 beta 驱动程序）或者是否有其他人成功地从 Windows 8 机器连接到 DB2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T21:09:03.047

IBM 最近发布了一些关于如何使其驱动程序在 Windows 8/Server 2012 上运行的文档。不幸的是，这需要一些注册表黑客和 GAC 摆弄，这是非常不理想的，但它确实有效。

[http://www-01.ibm.com/support/docview.wss?uid=swg21618434](http://www-01.ibm.com/support/docview.wss?uid=swg21618434)

# emacs - Emacs CEDET：跳转到符号

> ID：12887419
> 
> 赞同：5
> 
> 时间：2012-10-14T23:04:32.763
> 
> 标签：emacs, cedet

我已经阅读了 Alex Ott 的Emacs 的[CEDET 精彩指南](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html#sec11)，并且我想我知道如何正确设置我的 EDE 项目。

但是，当我尝试使用 command 跳转到**本地**符号（例如`main()`C++ 中的函数）时，即使我在定义符号的 .cpp 文件中调用此命令`semantic-complete-jump-local (C-c , j)`，我也会收到错误消息。`[no match]`

此外，当我尝试跳转`semantic-complete-jump-global (C-c , J)`到在不同文件上具有多个定义的符号（例如，多个`main()`函数）时，CEDET 会抱怨，`[not unique]`但它并没有给我一种方法来选择我想查看的符号。找到我感兴趣的符号的唯一方法是`<TAB>`逐个缓冲区循环浏览所有选项，直到找到我感兴趣的那个。有没有办法从我可以选择的地方获取符号列表？理想情况下，获得一个类似于 Emacs [helm](https://github.com/emacs-helm)（以前称为[任何东西](http://www.emacswiki.org/Anything)）提供的自动完成列表会很棒。

这就是**Emacs 24.2.1** on Linux 和**CEDET 1.1**的全部内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T06:22:57.067

您是否尝试过使用`semantic-ia-fast-jump`命令？它不仅使用语义，还使用其他数据源来计算跳转的位置。我刚刚尝试过，它正确地跳转到了在父类中声明的变量，层次结构高 3 级。

# c# - 不可见的 DataTemplate/Grouped GridView 行？

> ID：12887421
> 
> 赞同：0
> 
> 时间：2012-10-14T23:05:05.273
> 
> 标签：c#, xaml, gridview, windows-8

我需要为完全不可见的 GridView 创建一个 DataTemplate；如，如果您将鼠标悬停在该项目上，它不会显示悬停颜色。

我试过只使用一个空白数据模板，如：

```
<DataTemplate>
</DataTemplate> 
```

但是，虽然它不显示任何内容，但当您将鼠标放在项目上时，它仍会显示项目的轮廓。

我怎样才能摆脱那个轮廓？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:51:40.457

您需要 GridViewItem 的自定义样式，并将 GridView.ItemContainerStyle 设置为此自定义样式。您可以在此处找到机器上默认样式的 xaml：Program Files\Windows Kits\8.0\Include\WinRT\Xaml\Design\（x64 的路径有点不同）

# php - 来自 JSON 的表

> ID：12887423
> 
> 赞同：1
> 
> 时间：2012-10-14T23:05:24.773
> 
> 标签：php, javascript, jquery, json

我有一个 php 脚本，它基本上只通过以下方式加载一个 csv：

```
 echo json_encode(file(csvfile.csv, FILE_IGNORE_NEW_LINES)); 
```

输出是这样的：

```
["foo,bar,baz","foo, foo,bar","bla,bla,blubb"] 
```

在我的基本 html 文件中，我以这种方式加载它：

```
 <script>
  $(document).ready(function(){ 
    $.getJSON("myphpscript.php", function(data) {
      filltable(data);
    })
});

function filltable(jqxhr){
    var table_obj = $('table');
    $.each(jqxhr, function(index, item){
         table_obj.append($('<tr id="'+item.id+'"><td>'+item.data+'</td></tr>'));
    }).insertAfter('.table');
}    
  </script> 
```

*这用undefined*填充了我的`<table id="table"></table>`just 。

 *我的目标是获得一个包含 1 列的表格：

```
foo,bar,baz
foo, foo,bar
bla,bla,blubb 
```

指定分隔符后，我的 js-function 应该分解每一行和更多列。这是我第一次尝试使用 javascript 和 json。非常感谢你

编辑：固定函数调用（感谢 VisioN）。object.length 现在可以了，但表仍然未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:17:44.637

我想你可能想使用

```
table_obj.append($('<tr id="'+index+'"><td>'+item+'</td></tr>')); 
```

代替

```
table_obj.append($('<tr id="'+item.id+'"><td>'+item.data+'</td></tr>')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:20:29.747

您的数据结构与 jQuery 对象解析架构不匹配

您正在尝试解析一个如下所示的对象：

```
 [{"id":"foo","data":"foo,bar,baz"}] 
```

对于一列你只想要

```
 table_obj.append($('<tr id="'+item+'</td></tr>')); 
```*

# scala - 用于图像创建的 Scala 库

> ID：12887428
> 
> 赞同：3
> 
> 时间：2012-10-14T23:06:25.590
> 
> 标签：scala, java-2d

是否有任何好的 Scala 或 Java 库用于图像处理？对于简单的任务，例如与其他一些图像组合然后生成拇指？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T23:50:40.323

看看[https://github.com/sksamuel/scrimage](https://github.com/sksamuel/scrimage)（免责声明：我是作者）

这是一个开源的 Scala 图像库，它本质上将 java.awt 图像操作包装在一个更好的 API 中。

你问如何生成缩略图，你会做类似的事情。

```
val in = ...// some input stream 
val out = ... // some output stream
Image(in).scale(300,400).write(out, Png) 
```

您可以更改缩放方法（默认为双三次）和输出格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T00:43:39.427

它们都有点老派，也许不方便，但 java.awt、java.awt.image 和 javax.imageio 拥有混合和重新缩放图像所需的一切。您可以在此处找到一些混合示例代码，例如

[http://www.curious-creature.org/2006/09/20/new-blendings-modes-for-java2d/](http://www.curious-creature.org/2006/09/20/new-blendings-modes-for-java2d/)

您可以找到一些重新缩放和生成图像字节的示例，例如这里

[https://sourceforge.net/projects/ssim/?source=directory](https://sourceforge.net/projects/ssim/?source=directory)

可能有更新/更简单的解决方案，但这些确实有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:15:00.280

这个开源库中还有很多不错的图像过滤器：

[http://www.jhlabs.com/ip/filters/](http://www.jhlabs.com/ip/filters/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T23:14:12.703

它不是 Scala 特有的，但[ImgLib2](http://fiji.sc/ImgLib2)是一个功能齐全的 Java 图像处理库。它面向科学/低级使用，因此它可能不像您想要的那样简单，但它几乎可以肯定地管理您可能想要的任何东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T00:29:33.687

由于问题是标记`java-2d`您知道您可以使用任何 Java 库。一个快速的谷歌揭示了这个 SO 答案：

[java中的开源图像处理库](https://stackoverflow.com/questions/2407113/open-source-image-processing-lib-in-java/2407269#2407269)

# ruby - 将数组返回为 2 个元素的数组，而不是 4 个 ruby

> ID：12887430
> 
> 赞同：3
> 
> 时间：2012-10-14T23:06:46.193
> 
> 标签：ruby, multidimensional-array

我在数组上有一个简单的每个语句

```
game.each{|match|  winner += rps_game_winner(match) 
```

获胜者先前定义为`winner = []`

rps_game_winner 将返回一个包含 2 个元素的数组。我希望获胜者是一个由 2 个元素组成的数组。相反，如果游戏有 2 个匹配项，我将得到一个包含 4 个元素的数组。

有没有办法快速将 4 个元素的数组转换为具有 2 个元素的 2 个数组的数组。或者首先让获胜者成为一个包含 2 个元素的数组

例如，获胜者应该等于 [["rob","Hi"],["sally","no"]] 而不是 ["rob","Hi","sally","no"]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:11:44.807

不要使用`+=`; 使用`<<`：

```
game.each{|match| winner << rps_game_winner(match)} 
```

虽然`+`将两个数组合二为一，但`<<`会添加新元素。如果一个新元素本身恰好是另一个数组，它仍然作为一个元素添加，而不是合并。

如果你喜欢单词而不是标点符号，你也可以拼写它`push`：

```
game.each do |match| winner.push(rps_game_winner match) end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T23:12:16.840

使用`each_cons`，表示每个连续元素：

```
game.each_cons(2){|match1,match2| 
    winner << [rps_game_winner(match1), rps_game_winner(match2)]
} 
```

*注意：如果 rps_game_winner 返回一个平面元素，而不是一个包含两个元素的数组，那么 each_cons 的使用就可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T02:49:42.217

你想要[`#each_slice`](http://rdoc.info/stdlib/core/frames)。这将返回一个您可以迭代的可枚举方法，但调用`#to_a`它会将其转换为您想要的数组：

```
["rob","Hi","sally","no"].each_slice(2).to_a # => [["rob", "Hi"], ["sally", "no"]] 
```

# ios - 随机动画

> ID：12887431
> 
> 赞同：1
> 
> 时间：2012-10-14T23:06:55.600
> 
> 标签：ios, animation, core-animation, uibezierpath

我想在 iPad 上构建一个图像视图的随机动画。到目前为止，我设法构建的是：

![图1](../Images/05bafcc6703deac120faf2fb2783eb8d.png)

箭头代表我的图像视图。它移动到其父视图的边界并改变它的方向。其实这不是我想要的。我想在其父视图中以曲线随机移动视图。并调整其标题，如下图：

![图 2](../Images/ff41f9e6b0814f0bbcd6d8e6fa00500f.png)

我不知道如何解决这个问题，特别是如何生成一个漂亮的平滑路径。也许有人对我有提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:43:16.790

布拉德·拉森在这里回答了一个可以让您有所了解的问题：[我如何进行抛物线翻译？](https://stackoverflow.com/questions/1886158/how-do-i-translate-parabolically/1888077#1888077)

选择随机点非常容易，当您使用关键帧动画和路径添加它们时，您将获得所需的平滑效果。您只需将这些点添加到路径参考中。

根据上面的链接添加关键帧动画的路径，然后将动画添加到 UIImagView 的图层：

```
[[imageView layer] addAnimation:pathAnimation forKey:@"pathAnimation"]; 
```

此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T06:42:55.257

[在 iOS 中用手指绘制](https://stackoverflow.com/questions/4672646/drawing-bezier-curves-with-my-finger-in-ios)贝塞尔曲线来尝试使用贝塞尔曲线？

和 [CGPathReference](http://developer.apple.com/library/ios/.../CGPath/Reference/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T07:05:16.637

只需将关键帧动画的计算模式配置为立方体，实际上您会走得很远

```
positionAniamation.calculationMode = kCAAnimationCubic; // or kCAAnimationCubicPaced 
```

这将导致它在`values`数组中指定的点之间构造三次样条。

# amazon-s3 - Amazon S3 针对文件大小的不同下载速度

> ID：12887435
> 
> 赞同：1
> 
> 时间：2012-10-14T23:07:23.543
> 
> 标签：amazon-s3, amazon

我想知道我的理论是否正确，我在 S3 上托管了以下文件：-

*   单个 83.9 MB ZIP 文件
*   单个 ZIP 文件分为 12 个文件
*   单个 ZIP 文件分为 24 个文件

我假设单个 ZIP 文件会产生最好的结果，但事实并非如此。

最新结果

*   单人：31 分钟
*   12 个文件：2.8 分钟
*   24 个文件：6 分钟

特别是单个文件的下载速度各不相同，我得到的结果从 15 分钟到 35 分钟不等。

问：对于不同的文件大小，Amazon S3 是否有不同的下载方法/速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:15:07.373

没有 amazon s3 没有不同的下载计数方法。如果您让我们知道您用于下载数据的工具会更好。因为如果您的工具允许您在并行线程（进程）中下载数据，那么您的部分操作将比单个文件处理时间花费更少的时间。

其次，下载时间也可能因互联网速度而异。

# c++ - 在 C++ 中实现静态变量的访问器

> ID：12887439
> 
> 赞同：2
> 
> 时间：2012-10-14T23:08:45.610
> 
> 标签：c++, inheritance, implementation, static-methods

我是一名 CS 学生，现在我们正在学习继承。对于我们的作业，老师给了我们一个 main.cpp 文件和一个班级标题。我们希望在不更改给定文件的情况下创建标头的 .cpp 实现。我已经完成了大部分工作，但这是我无法实现的：

```
// File: employee.h

class Employee : public Person
{
private:
  static Company company;

public:
  static Company GetCompany();
  static void SetCompany(const Company& company);
} 
```

这是我无法使用的 [static void SetCompany]。通常在实施中我会做

```
//  File: employee.cpp

void Employee::SetCompany(const Company& company) { this->company = company; } 
```

但我收到错误“'this' 只能在非静态成员函数中使用”。我真的不确定我应该如何分配变量，并且从未在课堂上解决它。任何帮助，将不胜感激。请注意，这几乎是我希望保留的格式，所以希望任何建议都不会偏离太多。无论如何，提前感谢并让我知道是否需要澄清任何事情......或者我只是对此感到盲目和/或愚蠢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T23:17:43.270

要访问静态字段，请使用`Employee::company`，因为您不能使用`this`它，因为它旨在引用类的实例。

你的二传手将成为

```
void Employee::SetCompany(const Company& company) { 
  Employee::company = company; 
} 
```

但是如果你试图简单地替换你的 setter，你的编译器会抛出一个错误，说它不知道`Employee::company`。因为它不是实例化的。您需要，在您的 .cpp 文件中，就像使用函数来声明您的字段一样

```
Company Employee::company; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:16:28.537

对于静态变量，您只引用类变量而不是实例。

```
void Employee::SetCompany(const Company& company) {
    Employee::company = company;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T23:18:02.140

要扩展前面的评论，您可以使用全名引用静态成员，例如`Employee::company`. 因此，您应该能够通过简单地将函数更改为 this 来修复您的示例：

```
static void SetCompany(const Company& company) { Employee::company = company; } 
```

这是因为静态成员变量独立于类的特定实例。`this`关键字是指类的具体实例。所以，通过改变一个静态成员，类的所有实例都会有这个改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:51:10.103

我认为了解编译器和语言范围规则对您很重要。当方法（静态或其他）具有名称为“company”的 PARAMETER，但该类具有名称为“company”的可访问成员（静态或其他）时，解析裸名称“company”的规则是什么“？如果没有名为 company 的参数怎么办，您如何/应该如何引用该成员？

这是另一个问题 - 如果有一个名为 company 的 LOCAL 参数怎么办？

```
void Employee::CompareCompany(const Company &company)
{
  Company company("another company");
  // which company is being referenced on the LHS (left hand side)
  // of the == expression below? The method parameter or the local variable?
  if (company == Employee::company)
    stout << "They match!"
} 
```

你认为我继续使用相同的名字是个好主意吗？它们都是Company的实例，那么为什么“company”对它们来说不是一个好名字？？？

# c# - 无法使用 c# 在签名的 XML 文件中读取/查找节点

> ID：12887445
> 
> 赞同：0
> 
> 时间：2012-10-14T23:09:34.310
> 
> 标签：c#, xml

```
String fileName = "signed_file.xml";
      String filecopy = "signed_file_copy.xml";

       File.Copy(fileName, filecopy, true);

        /* Remove the digital signature */
        XDocument doc1 = XDocument.Load(filecopy);

        XElement signElement = doc1.Descendants("Signature").FirstOrDefault<XElement>();

        signElement.Remove(); 
```

signElement 为空，即使 signed_file_copy.xml 中包含 Signature 标记。需要帮助以了解正在发生的事情。

XML 中的 Signature 标记结构如下所示

```
<Config>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
 <SignedInfo>
  <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" /> 
  <SignatureMethod Algorithm=xxxxxxxxx /> 
  <Reference URI="">
  <Transforms>
  <Transform Algorithm=zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz /> 
  </Transforms>
  <DigestMethod Algorithm=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy /> 
  <DigestValue> xxxxxxxxxxx </DigestValue> 
  </Reference>
  </SignedInfo>
  <SignatureValue>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</SignatureValue> 
</Signature>
</Config> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T04:32:40.337

尝试这个：

```
XElement signElement =
    doc1
        .Descendants(
            XName.Get("Signature", "http://www.w3.org/2000/09/xmldsig#"))
        .FirstOrDefault(); 
```

您的`Signature`标签有一个命名空间，因此您必须使用它来查找元素。

# sql - SQL 留下了列名不明确的连接表

> ID：12887446
> 
> 赞同：2
> 
> 时间：2012-10-14T23:09:42.563
> 
> 标签：sql

我需要在列名不明确的查询中加入几个表。

**ListingCategory_Listings：**

> 身份证 | 列表类别 ID | 列表ID | ..

**SiteTree_Live：**

> 身份证 | 类名 | 标题 | 内容 | ..

**上市类别：**

> 身份证 | 图标ID

**文件：**

> 身份证 | 类名 | 姓名 | 标题 | 文件名 | ..

我有一个查询：

```
SELECT * FROM ListingCategory_Listings 
LEFT JOIN Listing ON ListingCategory_Listings.ListingID = Listing.ID 
LEFT JOIN SiteTree_Live ON Listing.ID = SiteTree_Live.ID 
LEFT JOIN ListingCategory ON ListingCategory_Listings.ListingCategoryID = ListingCategory.ID 
LEFT JOIN File ON ListingCategory.IconID = File.ID 
```

列表和列表类别数据都存储在 SiteTree_Live 表中，当返回我的记录时，显然在标题 Title、ID、Content 下返回了 Title、ID、Content 和其他模棱两可的字段。

我需要访问列表标题和列表类别标题以及其他特定信息。如果他们将数据存储在不同的表中，我可以使用 select Listing.Title AS lTitle 但在这种情况下我该如何做类似的事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T23:10:40.897

您需要给列起别名并给它们不同的标签。
您应该始终只将您需要的字段放入 SELECT 子句中，单独列出每个字段，而不是使用`*`.
良好的做法还要求给每个表一个简短的别名。

```
SELECT L.Title Listing_Title, LC.Title ListingCategory_Title,
       ... all your other columns ...
FROM ListingCategory_Listings LCL
LEFT JOIN Listing L ON LCL.ListingID = L.ID 
LEFT JOIN SiteTree_Live STL ON L.ID = STL.ID 
LEFT JOIN ListingCategory LC ON LCL.ListingCategoryID = LC.ID 
LEFT JOIN File F ON LC.IconID = F.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-22T19:04:48.637

我建议给 ALIAS 一个 COLUMN 名称，前面的信息可能不正确。

### COLUMN ALIAS 的正确语法是：

```
SELECT column_name AS alias_name
FROM table_name; 
```

在**COLUMN ALIAS**中，在正确的 COLUMN 名称旁边声明了 COLUMN 别名分配。

### TABLE ALIAS 的正确语法是：

```
SELECT column_name(s)
FROM table_name AS alias_name; 
```

在**TABLE ALIAS**中，TABLE 别名放在语句的 SELECT 部分中选择的列旁边。TABLE ALAIS 分配是在语句的 FROM 部分中进行的。

不同之处在于别名分配是在想要别名的正确名称旁边进行的！

我在弗雷泽提供的示例上建立了一个练习，它对我有用。我相信提供的答案是关于表别名，而不是列别名。

我不同意 ALIAS 的用法，因为 TABLE 或 COLUMN ALIAS 太短以至于使代码的可读性复杂化。我相信它应该很短，但不能太短以至于代码不是出于维护目的而“自我记录”。这是我的 2 美分想法！

# java - 从毫秒格式化天

> ID：12887449
> 
> 赞同：0
> 
> 时间：2012-10-14T23:10:15.603
> 
> 标签：java

简短的Java问题：

我有这个代码：

```
// edited above

} else if ((now >= (1000 * 60 * 60 * 24) && (now < (1000 * 60 * 60 * 48)))) {
            now = (now / (1000 * 60 * 60 * 24));
            time = String.valueOf(now + " day ago");

} else if ((now >= (1000 * 60 * 60 * 48) && (now < (1000 * 60 * 60 * 24 * 30)))) {
            now = (now / (1000 * 60 * 60 * 24));
            time = String.valueOf(now + " days ago"); 
```

你可以看到我在做什么。如果某件事发生在 24 至 48 小时前，则为“1 天前”，但如果发生在 48 小时至 1 个月（或 30 天）之间，则为“X 天* *s* * 前”。我不知道如何把这个月放在这种情况下。`if`如果我删除第二条语句的右侧......它会起作用。它会说 3 天前，或 15 天前，即 376 天前。显然，在 30 天后，我希望它说 1 个月前......但根据情况，例如 15 天前的内容不会在该子句中注册，它会跳过。我在这里错过了一些非常小的东西吗？

**补充代码：**

这是上下文中的全部内容；一切正常，直到“天”：

```
 lCDateTime = Calendar.getInstance();
    now = lCDateTime.getTimeInMillis();

    now = now - total;

    if (now <= ((1000 * 60 * 1))) {
        now = (now / 1000);
        time = String.valueOf(now + " seconds ago");

    } else if ((now > (1000 * 60 * 1)) && (now < 1000 * 60 * 2)) {
        now = (now / (1000 * 60));
        time = String.valueOf(now + " minute ago");

    } else if ((now >= (1000 * 60 * 2)) && (now < 1000 * 60 * 60)) {
        now = (now / (1000 * 60));
        time = String.valueOf(now + " minutes ago");

    } else if ((now >= (1000 * 60 * 60) && now < (1000 * 60 * 60 * 2))) {
        now = (now / (1000 * 60 * 60));
        time = String.valueOf(now + " hour ago");

    } else if ((now >= (1000 * 60 * 60 * 2) && (now < (1000 * 60 * 60 * 24)))) {
        now = (now / (1000 * 60 * 60));
        time = String.valueOf(now + " hours ago");

    } else if ((now >= (1000 * 60 * 60 * 24) && (now < (1000 * 60 * 60 * 48)))) {
        now = (now / (1000 * 60 * 60 * 24));
        time = String.valueOf(now + " day ago");

    } else if ((now >= (1000 * 60 * 60 * 48) && (now < (1000 * 60 * 60 * 24 * 30)))) {
        now = (now / (1000 * 60 * 60 * 24));
        time = String.valueOf(now + " days ago"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:31:19.760

你的最后一句话

```
else if ((now >= (1000 * 60 * 60 * 48) && (now < (1000 * 60 * 60 * 24 * 30)))) 
```

永远不可能是真的，因为 (1000 * 60 * 60 * 24 * 30) 等于 -1702967296（又名溢出）。如果您真的坚持要这样做，请使用 BigInteger。但是，我强烈建议您重写代码。

# ajax - 当 jQuerys .load('url') “完成”时，DOM 是否容易重建？

> ID：12887454
> 
> 赞同：0
> 
> 时间：2012-10-14T23:11:19.257
> 
> 标签：ajax, jquery

我正在尝试使用 ajax 构建网站。

我想用新的 html/php 替换页面的一部分，然后运行需要访问*更新*的DOM 的 javascript。

我认为使用 jQuerys [load()](http://api.jquery.com/load/) -函数并从“完整”回调（见链接）调用脚本将最适合我的需求。我的问题是：一旦“完成”回调被执行，我是否可以假设 DOM 已经准备好并重建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:01:26.363

是的，新脚本将拥有对新 DOM 的完全访问权限。

# smpp - 命令状态 0x00000011 与 submit_multi 用于 SMPP 集成

> ID：12887456
> 
> 赞同：2
> 
> 时间：2012-10-14T23:11:43.923
> 
> 标签：smpp

您好正在与 Sybase Mobile 365 服务集成，我已经让 submit_sm 和 Deliver_sm 正常工作。我正在尝试让 submit_multi 工作，但无论我尝试什么，我都会返回命令状态 = 11。有没有人对该命令状态的含义有任何想法？为什么我会得到那个？我尝试了不同的服务类型以及我能想到的其他一切……但没有成功。

谢谢，

斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:10:47.853

命令状态 = 11 (ESME_RINVDSTADR) 表示`"Invalid destination address"`。

这意味着`dest_address`您的 submit_multi 请求中的字段可能是错误的。

的`dest_address`字段`submit_multi`应该是[SMPP 3.4 规范](http://docs.nimta.com/SMPP_v3_4_Issue1_2.pdf)- 第 4.5.1.1 章中定义的目标地址结构列表。列表中目标地址的数量在`number_of_dests`字段中设置。

此外，您还可以检查每个目标地址的（号码`dest_addr_ton`类型）和`dest_addr_npi`（编号计划指示符）是否正确。有关此的更多详细信息，请查看此[链接](http://www.dreamfabric.com/sms/type_of_address.html)。

# java - Mac上的Java项目模板？

> ID：12887461
> 
> 赞同：1
> 
> 时间：2012-10-14T23:12:21.287
> 
> 标签：java, macos, templates, human-interface

我试图通过举一个我在一般 Java 编程书籍中找到的示例来扩展我所学的基本 Java，并使其具有更多功能。我一直在尝试将 Xcode 的 v3.5.2 Java 项目模板用于使用 Eclipse Juno IDE 的 Java 应用程序，但我看到一些方法和类已被弃用。在过去的两三天里在互联网上点击之后，我很困惑。

我有两个主要问题：

1.  在 Mac 上开发 Java 应用程序（不适用于 Web）的正确起点是什么？通过 Xcode 3.5.2 提供的模板是正确的方法吗？我试图找出 apple.laf.useScreenMenuBar（在 Apple Developer User's Guide for Java 中讨论）如何与 Xcode 模板相互作用。一个过时了吗？我应该从头开始吗？
2.  除了 Xcode 中可用的内容之外，我还没有遇到任何文档/模板，用于 Mac 上 Java 应用程序的基本/存根设置！鉴于 Apple 的人机界面指南，我认为这样的存根是可用的。如果有一些参考资料，我将不胜感激。我一直在咨询 Apple 的 Mac Java 开发指南和 API 文档、Oracle 和网络上的其他地方，但到目前为止没有运气，只是感到困惑。

我的想法是，真正的答案是放弃 Mac 上的 Java 并在 PC 上编程，或者只使用 Objective-C！（我想学习Objective C，但不幸的是，我现在在我的公司里有更好的生存能力，使用Java和Python。）

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:19:38.693

把客观的东西交给 XCode c。其他一切使用 Eclipse。

# c# - 实例化任何类型的变量（包括可为空的结构）的通用方法？

> ID：12887464
> 
> 赞同：0
> 
> 时间：2012-10-14T23:12:58.617
> 
> 标签：c#, .net, struct, nullable

假设我有这个函数，它*为任何类型**实例化一个具有**默认/空值**`new`的变量*

 **```
public static T GetDefault<T>() where T : new() //body of this method is the question
{
    T t = new T();
    return t;
} 
```

上述功能的问题是当我有类似`int?`for 的东西时`T`。因为如果我有

```
int? t = new int?(); 
```

`t`将是空的！我不希望发生这种情况，而是希望`int`返回的默认值是`0`.

为了解决这个问题，我可以对等`GetDefault`函数进行不同的重载`int?`，`bool?`但这并不优雅。我也可以在函数内部检查类型是否为`int?`等`bool?`，但我将如何实例化它的基本类型？

或者问题归结为如何识别是否`T`为可空结构以及如何实例化可空结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:16:24.130

```
Type realType = Nullable.GetUnderlyingType(typeof(T));
t = (T)Activator.CreateInstance(realType ?? typeof(T)); 
```**

# java - 为什么多态性在这种情况下不起作用？

> ID：12887466
> 
> 赞同：0
> 
> 时间：2012-10-14T23:13:00.383
> 
> 标签：java, polymorphism

```
Object aThing = new Integer(25); 
```

方法调用`aThing.intValue()`是编译器错误。为什么多态在这种情况下不起作用？

在我的教科书中还有一个相关的陈述有点令人费解：

> 引用的类型，而不是引用的对象的类型，决定了可以执行的操作。

你能简要说明一下吗？

as`Computer[] labComputers = new Computer[10];`与多态一起工作

```
public class Computer {
    int ram;
    public Computer(int rm){
        ram= rm;
    }
    public String toString(){
        String result = "ram is " + ram;
        return result;
    }
}

public class Notebook extends Computer{
int size;
public Notebook(int rm, int sz){
    super(rm);
    size = sz;
}
@Override
    public String toString(){
        String result = super.toString() + " size is " + size;
        return result;
    }

} 
```

**补充**：我相信在中间的某个地方，会有

```
labComputer[1] = new Notebook(2,15);
labComputer[2] = new Computer(2); 
```

对于方法调用`labComputers[1].toString()`，多态确保调用正确`toString`。在我心目中`labComputer[1] = new Notebook(2,15);`相当于`Object o = new Integer(25);`。但是多态性适用于我的计算机示例而不是 Object-Integer 示例。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:14:08.007

因为即使`Integer`是一个`Object`，`Object`也不是一个`Integer`，因此它没有`Integer`' 方法，只有`Object`'。

* * *

> 引用的类型，而不是引用的对象的类型，决定了可以执行的操作。

这意味着即使被引用的对象包含更多功能，如果引用的*类型*与对象的类型不同，那么只有*引用类型*的功能可用。

在下面的：

```
Object aThing = new Integer(25); 
```

的类型`aThing`被声明为`Object`。即使实现包含更多内容，但实现包含的任何其他内容都不再可见，因为变量的*类型*不是`Integer`，而是`Object`。两者`Object`和`Integer`有共同的方法，但从现在开始你只能访问由提供的方法`Object`，因为除了你之外没有人知道这真的是一个`Integer`，而不仅仅是一个`Object`。

* * *

在第二个示例中，它们意味着即使两者`Object`都有`Integer`共同的方法，但当您调用其中一个方法时，将调用实际类型的方法。所以在这种情况下，如果你调用`toString()`on `aThing`，你会调用`Integer`'s`toString()`方法，而不是`Object`'s。因此，这只是一个访问问题。将其声明为 an 的`Object`事实并不意味着您将获得`Object`' 的方法来响应调用，它仅意味着存在`Integer`和不存在的任何方法都`Object`将不可用。

* * *

例子：

```
class Computer {
    public int getInstalledOperatingSystems() { return 3; }
}

class Desktop extends Computer {
    public String getShapeOfCase() { ... }
}

class Notebook extends Computer {
    public int getInstalledOperatingSystems() { return 1; }
    public String getBrand() { ... }
    public void closeLid() { ... }
} 
```

现在让我们创建一个`Notebook`：

```
Notebook n = new Notebook(); 
```

假设您有以下方法：

```
public String showStatistics(Computer computer) {
    result = "Operating systems: " + computer.getInstalledOperatingSystems();
    return result;
} 
```

如果您使用`Notebook`上面定义的方法调用此方法：

```
showStatistics(n); 
```

然后该方法将收到`Notebook`，因为 a`Notebook`是 a `Computer`。它可以调用`Notebook`'`getInstalledOperatingSystems()`方法，因为任何人`Computer`都有该方法。当它调用它时，它会收到`1`结果，因为`Notebook`overrides`Computer`的实现。但是`showStatistics()`将无法调用`Notebook`提供的任何其他方法，因为它不知道它正在传递一个`Notebook`. 尽管它关心的是，它有 a `Computer`，并且它不知道 a`Computer`没有的任何其他方法。

您可以很好地发送它`Desktop`，或者明天您将创建一个`GamingComputer`扩展`Desktop`或扩展的`Server`类`Computer`。你也可以发送那个。但`showStatistics()`将无法访问任何`Server`特定的、专门的方法，因为`showStatistics()`不*知道*它正在查看`Server`. 它甚至在`showStatistics()`编写时都没有被发明。

这与即使 a`Server`总是 a `Computer`， a`Computer`并不总是 a的陈述是一致的`Server`。

* * *

你可以检查一下。因此，如果您*知道*您可能会传入 a `Notebook`，而不仅仅是一台计算机，您可以查找它，甚至可以调用`Notebook`'s 方法，但您必须确保您正在查看 a `Notebook`：

```
if (computer instanceof Notebook) {
    // this is definitely a Notebook, so you can assure the compiler
    // of that explicitly, by using a cast
    Notebook notebook = (Notebook) computer;

    result += "This isn't just a generic computer, it's actually a notebook! ";

    // now that you have a variable of type Notebook, you can call
    // whatever Notebook provides
    result += "It's produced by: " + notebook.getBrand();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T23:15:06.680

它不起作用，因为您的变量来自`Object`类，因此您只能使用 `Object`类中的方法。如果您想将其用作`Integer`，您应该首先进行（向下）类型转换：

```
Integer aInteger = (Integer)aThing;
//it could maybe work
aInteger.intValue(); 
```

现在，为什么*可能*工作？因为如果类型转换不起作用，向下转换可能会抛出 ClassCastException。

根据您的示例，我将发布一个基本代码来展示多态性是如何工作的：

```
class Animal {
    public void move() {
        System.out.println("I'm an animal and I can move.");
    }
}

class Cat extends Animal {
    //this means a Cat would change the move behavior from the Animal instance
    @Override
    public void move() {
        System.out.println("I'm a cat and I can move.");
    }
}

class Dog extends Animal {
    //this means a Cat would change the move behavior from the Animal instance
    @Override
    public void move() {
        System.out.println("I'm a dog and I like to run.");
    }
    public void bark() {
        System.out.println("I can bark!");
    }
}

public class AnimalTest {
    public static void main(String[] args) {
         //it will take the behavior of the Animal class reference
         Animal animal = new Animal();
         //it will take the behavior of the Cat class reference
         Animal cat = new Cat();
         //it will take the behavior of the Dog class reference
         Animal dog = new Dog();
         //this will invoke the Animal#move method
         animal.move();
         //this will invoke the Cat#move method because it was overriden in the Cat class
         cat.move();
         //this will invoke the Dog#move method because it was overriden in the Dog class
         dog.move();
         //this line won't compile if uncommented because not all animals can bark.
         //dog.bark();
         //if you want to make the dog barks, then you should use the downcasting
         ((Dog)dog).bark();
         //note that this will only work for Dog class reference, not for any other class
         //uncomment this line and the code will compile but throw a ClassCastException
         //((Dog)cat).bark();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T23:17:04.293

这样想，狗是一个对象，狗类可能有诸如

`dog.bark()`

如果您将 Dog 向上投射到一个对象，它就会变得不那么具体。

`Object o = dog;`

现在你只知道 o 是一个物体，你不知道什么样的物体，因此你不知道这个物体是否会吠叫。

当您向上移动层次结构时，您几乎总是会因为对所拥有的内容不那么具体而失去功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:30:22.997

编译器需要被告知它应该期望对象是什么类型，因此它可以查找类并查看该方法是否合法。

所以你可以说`Object aThing = new Integer(25);`但是你会想说`int thingValue = (Integer)aThing.intValue();`

如果您有一个 MySubClass 对象，它是 MyClass 的子类，并且您想调用在 MyClass 中定义的方法（即使在 MySubClass 中重新实现），您可以说：

```
Object myObject = new MySubClass();
int someValue = (MyClass)myObject.methodInMyObject(); 
```

# c#-4.0 - 如何将字符串列表添加到数据库 C#

> ID：12887467
> 
> 赞同：1
> 
> 时间：2012-10-14T23:13:06.310
> 
> 标签：c#-4.0

我有这样的清单：

```
var list = new List<string>(); 
```

此列表包含让我们说以下名称：“Ken”、“John”、“Tom”等。

我需要将此列表添加到如下所示的数据库表中：

```
Id          SecondId              Name
1           1                     Ken
2           1                     John
3           2                     Tom 
```

SecondId 是辅助键，而我已经拥有该信息。但是我的问题是有没有更好的方法可以将所有名称添加到数据库中，而无需使用 foreach 循环遍历列表？任何 linq 查询或其他方式，或者我必须遍历列表以将它们一一添加到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:35:50.580

我认为没有办法将列表添加为块。您可以`ForEach`像这样使用 List 上的扩展方法（假设您使用的`DbContext`是数据库访问）：

```
using (var context = new NameContext()) {
    list.ForEach(i => context.Names.Add(new Name(i, SECOND_ID)));
} 
```

您可以使用相同的方法，但如果您不使用 DbContext，请在 lambda 表达式中使用数据库编写代码。

# java - JFrame 大小不合适

> ID：12887468
> 
> 赞同：2
> 
> 时间：2012-10-14T23:13:19.540
> 
> 标签：java, swing, user-interface

如果我先设置大小`JPanel`，然后将面板设置为未调整大小的框架的内容窗格，则该框架将被挤压到屏幕左上角的一个非常小的矩形中。

但是，如果我先设置框架的大小，然后将面板设置为其内容窗格，则框架将被正确绘制。

`JPanel`为什么会发生这种情况，如果我真的想指定而不是的大小，我该如何解决`JFrame`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:20:50.110

您应该告诉框架在首次显示时自行打包：

```
frame.pack();
frame.setVisible(true); 
```

这将导致框架采用适合其内容的大小。

# c# - 如何将列表参数添加到 LINQ 查询？

> ID：12887469
> 
> 赞同：1
> 
> 时间：2012-10-14T23:13:31.703
> 
> 标签：c#, linq, list, linq-to-entities

我有两个参数传递给该方法，我需要将它们附加到最终查询列表中。

（第一个参数）

```
string[] Price= new string[5];
Price= new string[] { "50", "25", "35" }; 
```

（第二个参数）

```
List<string> DiscountPrice= new List<string>();
DiscountPrice.Add ("10"); 
DiscountPrice.Add ("5");
DiscountPrice.Add ("3");

var list= (from d in context.List
           where ....
           select new MyNewList
           {
                 Name = d.Name,                    
                 Country = d.Country,
                 **Price = ??** //how do I attach the parameters one by one? In the order they were saved?
                 **DiscountPrice** = ?? 

           }).ToList<MyNewList>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T00:41:54.910

听起来您想按索引匹配列表元素。您可以从零迭代到列表元素的数量并通过其索引访问每个元素：

```
var prices = new string[] { "50", "25", "35" };
var discountPrices = new List<string>() { "10", "5", "3" };

var items = (from d in context.List
             where ....
             select new { d.Name, d.Country }).ToList();

var list =  (from index in Enumerable.Range(0, items.Count())
             select new MyNewList
                    {
                        Name = items[index].Name,                    
                        Country = items[index].Country,
                        Price = prices[index],
                        DiscountPrice = discountPrices[index]
                    }).ToList(); 
```

另一种方法是将所有内容[压缩](http://msdn.microsoft.com/en-us/library/dd267698.aspx)在一起：

```
var list = items.Zip(prices, (item, price) => new { item, price })
                .Zip(discountPrices, (x, discountPrice) => new { x.item, x.price, discountPrice})
                .Select(x => new MyNewList
                             {
                                 Name = x.item.Name,                    
                                 Country = x.item.Country,
                                 Price = x.price,
                                 DiscountPrice = x.discountPrice
                             })
                .ToList(); 
```

# algorithm - 使用插入排序来比较此数组中的数字的确切比较次数是多少？

> ID：12887482
> 
> 赞同：1
> 
> 时间：2012-10-14T23:15:50.443
> 
> 标签：algorithm, insertion-sort

如果我有一个数组 A = <0, 15, 5, 1, 0, 20, 25, 30, 35, 40>。当我编写代码来计算比较时，我对在哪里添加计数器感到困惑，因为我担心可能会重复计数。

尽管如此，它说有15个比较。我不确定这是否正确。真正的比较有多少？

```
int InsertionSort(int A[], int n)
{
   int i, j, index, counter = 0;

   for (i=1; i < n; i++)
   {
      index = A[i];
      for (j=i-1;j >= 0 && A[j] > index;j--)
      {
         A[j + 1] = A[j];
         counter++;
      }
      A[j+1] = index;
      counter++;
   }
   return counter;
}

int main()
{
    int A[]= {5,4,3,2,1};
    int counter = 0;
    int n =5;
    counter = InsertionSort(A, n);
    printf("%d",counter);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T23:34:18.043

有 15 个比较（和 6 个交换）：

```
compare: 0 <= 15, 5, 1, 0, 20, 25, 30, 35, 40
compare: 0, 15 > 5, 1, 0, 20, 25, 30, 35, 40
swap:    0, 5 - 15, 1, 0, 20, 25, 30, 35, 40
compare: 0 <= 5, 15, 1, 0, 20, 25, 30, 35, 40
compare: 0, 5, 15 > 1, 0, 20, 25, 30, 35, 40
swap:    0, 5, 1 - 15, 0, 20, 25, 30, 35, 40
compare: 0, 5 > 1, 15, 0, 20, 25, 30, 35, 40
swap:    0, 1 - 5, 15, 0, 20, 25, 30, 35, 40
compare: 0 <= 1, 5, 15, 0, 20, 25, 30, 35, 40
compare: 0, 1, 5, 15 > 0, 20, 25, 30, 35, 40
swap:    0, 1, 5, 0 - 15, 20, 25, 30, 35, 40
compare: 0, 1, 5 > 0, 15, 20, 25, 30, 35, 40
swap:    0, 1, 0 - 5, 15, 20, 25, 30, 35, 40
compare: 0, 1 > 0, 5, 15, 20, 25, 30, 35, 40
swap:    0, 0 - 1, 5, 15, 20, 25, 30, 35, 40
compare: 0 <= 0, 1, 5, 15, 20, 25, 30, 35, 40
compare: 0, 0, 1, 5, 15 <= 20, 25, 30, 35, 40
compare: 0, 0, 1, 5, 15, 20 <= 25, 30, 35, 40
compare: 0, 0, 1, 5, 15, 20, 25 <= 30, 35, 40
compare: 0, 0, 1, 5, 15, 20, 25, 30 <= 35, 40
compare: 0, 0, 1, 5, 15, 20, 25, 30, 35 <= 40 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:07:13.587

对我来说，您的柜台似乎在错误的位置。假设 A=<3, 2>，那么您的算法将使用 1 比较，但会报告 counter=2。如果 15 是正确答案，那么这个错误没有发生或以某种方式被取消。

要确定 15 是否真的是正确答案，这就是您可以改进计数器的方法。首先，您的算法依赖于从左到右的条件评估顺序（大多数编程语言都遵守）。这意味着如果 P=false 则 Q 不在 (P && Q) 中求值。如果不能保证从左到右的评估顺序，那么该算法可能会评估 A[-1] > index （这会使您的程序崩溃）。正确计数的最简单方法是将 for 循环的合取分成两行，如下所示：

```
for (i=1; i < n; i++)
{
   index = A[i];
   for (j=i-1; j >= 0; j--)
   {
      // Every time this line is reached, a comparison will be performed
      counter++;
      if (A[j] > index)
      {
         A[j + 1] = A[j];
      }
   }
   A[j+1] = index;
} 
```

如果解决了，请让我们知道结果，并对此答案进行投票。

# java - 使用 jdbctemplate 进行插入/更新

> ID：12887485
> 
> 赞同：2
> 
> 时间：2012-10-14T23:16:05.853
> 
> 标签：java, mysql, spring-mvc, spring-jdbc

我正在使用 Spring simplejdbctemplate 进行基于 if/else 块的插入/更新。

我想知道是否有一种方法可以将所有这些操作合并到一个事务中。目前，如果我的代码中断（由于某种原因），则执行某些插入，而某些则不执行。我希望整件事都失败，如果有什么失败的话。就像 SQL 中的回滚一样。

这可能与simplejdbctemplate有关吗？

该链接对我没有多大帮助，因为我不明白我可以放置在哪里`@Transaction`。我正在粘贴下面的代码，下面的代码中`@Transaction`的注释会放在哪里？

**更新**

代码：

```
for (Colors c : colors) {
        if (isColorExistsInOtherDb(c)) {
            if (!isColorExistsAlready(c)) {
                insertIntoColor(c);
                colorId = getMaxColorId();
            }
        else {
            updateColor(c);
            colorId = getColorIdByShade(c);
        }

        for (Shade s : c.getShades()) {
            colorId = colorService.isShadeExistsForColor(colorId, s.getShadeId());
            if (colorId <= 0) {
                colorService.insertIntoColor(s);
                colorId = colorService.getMaxColorId();
            }
            else {
                colorService.updateColor(colorId, c);
            }

                insertMachinePoam(machineId, poamId);
            }
        }
        else {
            //do something else?
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:29:39.813

简单 Jdbc 模板不控制您是否在事务中。此[页面](http://springinpractice.com/2008/03/18/annotation-based-transactions-in-spring/)显示了使用注释来控制事务设置的示例。

通常，您正在从服务类型方法进行多个 DAO/jdbc 模板调用。该方法会为事务添加注释，因此您的 jdbc 模板代码可以专注于它的设计目的 - 访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:29:58.770

当然，您应该使用 Spring 声明式事务。这是一个方面，而不是简单 JDBC 模板的一部分。

# python - Python 使用 Javascript 获取重定向 URL

> ID：12887487
> 
> 赞同：2
> 
> 时间：2012-10-14T23:16:18.207
> 
> 标签：python, url, redirect

我试图在重定向到目标站点时获取具有 JavaScript 操作的重定向 URL

```
user_agent = 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like    Gecko) Chrome/22.0.1207.1 Safari/537.1)'
headers = { 'User-Agent' : user_agent }
values = {'name' : 'DealsIndex',  'location' : 'South Bay',  'language' : 'Perl' }
data = urllib.urlencode(values)
req = urllib2.Request("http://www.techbargains.com/jump.cfm?clkSubId=A0AC1A00319410C5900&afsrc=1&id=6860", data, headers)
res = urllib2.urlopen(req)
urlapp = res.geturl()
print urlapp 
```

**实际输出：**

```
http://www.techbargains.com/jump.cfm?clkSubId=A0AC1A00319410C5900&afsrc=1&id=6860 
```

**预期产出**

```
http://shop.panasonic.com/?cm_MMC=AffiliateBanner-_-SeriouslyCool-_-88x31-_-041911 
```

我也尝试使用 mechanize，但我无法到达目标站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:41:40.017

该重定向是通过 javascript 完成的，这意味着您需要使用支持它的浏览器。Mechanize 不是这样的浏览器之一。

这里有几个不错的

*   [Selenium](http://seleniumhq.org/) - 使用语言（包括 python）自动化实际的浏览器
*   [phantomjs](http://phantomjs.org/) - 无头 webkit 浏览器

# android - 更新 sencha touch 2 安卓应用

> ID：12887489
> 
> 赞同：3
> 
> 时间：2012-10-14T23:16:26.197
> 
> 标签：android, web-applications, sencha-touch-2, google-play

我正在尝试为我的 sencha touch 2 应用程序向 Google Play 商店提交更新。

以下是我的 packager.json 文件。

```
{
    "applicationName":"DBS",
    "applicationId":"com.keshav.dbs",
    "versionCode":"2",
    "versionString":"1.0.1",
    "iconName":"ic_launcher.png",
    "inputPath":"./build/package/Android",
    "outputPath":"./build/native/Android",
    "configuration":"Release",
    "platform":"Android",
    "deviceType":"Universal",
    "certificatePath":"/Developer/Android-Keystore/myAndroidKeyStore",
    "certificateAlias":"myandroidkey",
    "certificatePassword":"<password>",
    "sdkPath":"/Developer/sdks/android-sdk-macosx",
    "androidAPILevel":"16",
    "orientations": [
        "portrait"
    ]
} 
```

我运行以下命令

```
sencha package run packager.json 
```

这会创建 apk 文件，但是当我尝试上传新的 apk 时，我会收到一条消息，说 versionCode 1 已在使用中。

Senchas网站上的包装说明不包括`"versionCode"`我自己添加的属性

有谁知道如何更改煎茶应用程序的版本代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T07:38:47.817

我能够编辑 platform/cordova/android/AndroidManifest.xml 并更新 android:versionCode，然后运行 ​​sencha app build native

它构建了新的 APK（签名，基于我的配置）并被 Google Play 商店接受。

比解包和重新包装要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:09:17.173

好吧，就在这里...

在浏览了互联网后，我发现这种方法有效....

Sencah 创建包后，使用[apktool](http://code.google.com/p/android-apktool/)解包 apk，然后编辑 AndroidManifest.xml 并再次使用 apktool 将其打包。

请注意，当您重新打包应用程序时，tit 将未签名，因此您必须再次对其进行签名才能将其安装在人们的设备上

# c++ - 带有迭代器的 C++ 模板函数

> ID：12887492
> 
> 赞同：1
> 
> 时间：2012-10-14T23:16:50.550
> 
> 标签：c++, templates, iterator

我应该实现一个模板函数，该函数遍历迭代器范围，检查参数谓词的条件是否满足值，并且使用参数插入迭代器将不满足谓词条件的值复制到参数输出。

我编写了一个主程序来测试我的模板函数实现，它没有返回错误，但我大学的测试程序不会与我的模板函数实现一起编译，并给出以下错误：

```
/usr/include/c++/4.4/debug/safe_iterator.h:272: error: no match for 'operator+=' in '((__gnu_debug::_Safe_iterator<std::__norm::_List_iterator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__debug::list<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >*)this)->__gnu_debug::_Safe_iterator<std::__norm::_List_iterator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__debug::list<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_current += __n'¶ 
```

我的实现是：

```
template <typename IteratorIn, typename IteratorOut, typename Predicate>
IteratorOut copyIfNot(IteratorIn begin, IteratorIn end, IteratorOut out, Predicate pred) {
    for (IteratorIn iter = begin; iter != end; iter++) {
        if (!pred(*iter)) {
            std::copy(iter, iter + 1, out);
        }
    }

    return out;
} 
```

你能提示我错误可能在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:19:54.243

显然，您正在使用您的函数 with `list::iterator`，它不是随机访问迭代器，并且不会`operator+`像您在 in 中使用的那样实现`iter + 1`。

您必须复制并`operator++`在其上使用：

```
auto itercopy = iter;
std::copy(iter, ++itercopy, out); 
```

# c++ - 在 scoped_ptr 异常的情况下不调用析构函数

> ID：12887495
> 
> 赞同：6
> 
> 时间：2012-10-14T23:17:43.933
> 
> 标签：c++, exception, boost, destructor, scoped-ptr

我刚刚开始使用 c++ boost 库。我在很多地方读到，当使用 scoped_ptr 时，即使出现异常，对象也总是被销毁。

> [它们的行为很像内置的 C++ 指针，只是它们会在适当的时候自动删除指向的对象。智能指针在面对异常时特别有用，因为它们确保正确销毁动态分配的对象。](http://www.boost.org/libs/smart_ptr/)

我尝试了以下代码。

```
#include<boost/scoped_ptr.hpp>

class B
{
  public:
    B(){ std::cout<< "B constructor call\n"; }
    ~B(){ std::cout<<"B destructor call\n"; }
};

class A
{
  public:
  boost::scoped_ptr<B> b;
  A():b(new B())  
  {
    throw 1;
  }
};

int main()
{
    A a; return 0;
}

output:
B constructor call
terminate called after throwing an instance of 'int'
Aborted (core dumped) 
```

没有调用 B 的析构函数。但是我使用了 scoped_ptr，所以它应该调用 B 的析构函数，还是我误解了 scoped_ptr 的使用。

但是如果 a 用 try catch 包围它，则调用 B 的析构函数。

```
try{
  A a;
} catch( ... ) {
} 
```

在这种情况下， A 的析构函数将被调用，因为在 try 块中出现异常的情况下，所有本地分配的对象都从堆栈中删除，并且我将指针包裹在里面和 scoped_ptr 的对象，所以当作用域对象的析构函数最终销毁指针时. scoped_ptr 也很有用，因为我们不必显式删除分配的内存，否则我误解了 scoped_ptr 的描述。

如果使用 scoped_ptr 发生异常，如何调用 B 类的析构函数

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T23:27:41.340

没有匹配的异常处理程序，所以`std::terminate`直接调用，在这种情况下没有展开堆栈。将`try`/`catch`放入`main`其中`int`，即使该处理程序重新抛出，您也会看到您的析构函数调用。

C++11 §15.1/2：

> 当抛出异常时，控制权被转移到最近的具有匹配类型的处理程序；“最近”是指关键字后面的*复合语句*或*ctor-initializer*`try`最近由控制线程进入但尚未退出的处理程序。

和§15.3/9：

> 如果没有找到匹配的处理程序，`std::terminate()`则调用该函数；在此调用之前是否展开堆栈是`std::terminate()`实现定义的。

[[在线演示](http://liveworkspace.org/code/21c86a6e614ac0e03fffd7f7a5db61fe)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:58:40.637

C++ 在展开堆栈时销毁局部变量（从函数返回，使用`return`关键字或异常），所以它应该看到一个销毁你的`scoped_ptr`. 但是在您的特殊情况下，发生的异常`main`将`terminate`在 C++ 展开堆栈之前被调用并终止您的程序。

```
void test() {throw 1;}
void main() {
    string sMain;
    test();
} 
```

在上面的例子中，`sMain`不会因为异常导致调用而被破坏`terminate`：

```
sMain constructed
exception occurred: main has no where to go, and it has no handler to handle
    the exception, so it will call `terminate`, but wait we are still at `main`
    so we have no stack unwinding here and sMain will never destroyed!! 
```

# c - 从文本文件中读取字符并存储在二维数组中

> ID：12887497
> 
> 赞同：0
> 
> 时间：2012-10-14T23:17:43.967
> 
> 标签：c, multidimensional-array

愚蠢的问题，但我很恐慌。我将如何从文本文件（包括空格）中读取字符并将它们存储在二维数组中。

我知道我需要使用一些涉及的东西（比如我有一个 2D 数组文件 [50] [50]）

```
while ((ch = fgetc(fp)) != EOF);

file[50][50] = characterWithinFile 
```

任何帮助将不胜感激，因为我（令人惊讶地）知道在此之后我需要做什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:33:32.933

这是一些可以帮助您的代码

```
#include <stdio.h>
void main()
{
FILE *fopen(), *fp;
char c;
int i=0,j=0;
char file[50][50];
fp = fopen("file.txt","r");
c = getc(fp) ;
while (c!= EOF)
{
file[i][j]=c;

    j++;
    c = getc(fp);

    if(j==50){
    i++;
    j=0;
    }
}
fclose(fp);
} 
```

如果您的文字超过 2500 个字符，请选择大于 50 的数字！

# php - 在 Codeigniter 中将 POST 值从 VIEW 传递到 CONTROLLER 到 MODEL

> ID：12887500
> 
> 赞同：1
> 
> 时间：2012-10-14T23:18:04.730
> 
> 标签：php, codeigniter

好的，我删除了验证和其他代码，以使这个示例尽可能透明。我无法为`POST`我的模型添加 VAR。

# 看法

```
<?php echo form_open('invoice'); ?>
  <?php echo validation_errors(); ?>
  <?php echo form_input('order_num', $this->input->post('order_num')); ?>
  <?php echo form_submit('submit','submit'); ?>
<?php echo form_close(); ?> 
```

# 控制器

```
public function invoice()
  {
  $order = $this->input->post('order_num');
  $this->General_Model->get_customer_order($order);
  } 
```

# 模型

```
function get_customer_order($order)
  {
    . . .
  $this->db->where('client_orders.id', $order);
  $result = $this->db->get('client_orders');
    . . .

  } 
```

好的 基本上你在表格上输入一个订单号。然后它转到进行验证的控制器（我在这里删除它以保持示例简单），最后它将数据传递给模型，该模型在数据库上运行查询并返回`$result`.

但是，我得到的不是我想要的输出：致命错误：在非对象上调用成员函数 get_customer_order() **并** 遇到 PHP 错误严重性：通知消息：未定义属性：Account_dashboard::$General_Model

我在这里做错了什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:22:06.880

确保在控制器中加载模型：

```
$this->load->model('General_Model'); 
```

控制器线应

```
$data['order'] = $this->General_Model->get_customer_order($order); 
```

然后将 $data 传递给视图。

# ajax - 多个 Form.Request mootools 上的混合 ajax 响应

> ID：12887502
> 
> 赞同：0
> 
> 时间：2012-10-14T23:18:57.350
> 
> 标签：ajax, mootools, response

我在 2 个函数中有 2 个 Form.Request，这些函数在 2 个不同的按钮单击时执行

**这是小提琴** [http://jsfiddle.net/RtxXe/38/](http://jsfiddle.net/RtxXe/38/)

似乎我没有在我的函数中按正确的顺序设置事件，因为它们混淆了响应。如果您点击**清除缓存**而不是**发送**，您仍然会从清除缓存中获得响应，反之亦然。除非您重新加载页面并再次单击，否则您无法获得每个按钮应有的正确响应。

由于这不是我的原始表单并且 **我只能使用 js * 更改它*，我添加了带有新元素的清除缓存按钮。我不知道为什么会发生这种情况，感谢您的帮助。

**这是原始的html：**

```
<div id="toolbar">
  <ul>
    <li id="adminsubmit"><a href="javascript:;">Send</a></li>
  </ul>
</div>
<div id="response"></div>
<form action="http://www.scoobydoo.com/cgi-bin/scoobysnack" method="post" name="editform" id="myform">
  <fieldset>
    <!-- form elements go here -->
  </fieldset>
  <input type="hidden" name="task" value="">
</form> 
```

**这里是js：**

```
 var AdminForm = {
    start: function() {
        var toolbar = $$('#toolbar ul');
        var addbtn2 = new Element('li', {
            'id': 'cache',
            'class': 'button',
            html: '<a href="javascript:;">Clear Cache</a>'
        });
        addbtn2.inject(toolbar[0], 'top');
        var btn1  = $('adminsubmit').getElement('a');
        var btn2  = $('cache').getElement('a');

        btn1.addEvent('click', function(event) {
            event.preventDefault ? event.preventDefault() : event.returnValue = false;
            AdminForm.formChange();
        });

        btn2.addEvent('click', function(event) {
            event.preventDefault ? event.preventDefault() : event.returnValue = false;
            AdminForm.clearCache();
        });
    },
    formChange: function() {

        var adminform = $('myform');
        var target = $('response');
        var adminsend = new Form.Request(adminform, target, {
            onSend: function() {
                target.set('html', 'formChange sending');
            },
            onComplete: function() {
                target.set('html', 'formChange sent');
            }
        });
        adminsend.send();
    },

    clearCache: function() {

        var adminform = $('myform');
        var target = $('response');
        var clearingcahe = new Form.Request(adminform, target, {
            onSend: function() {
                target.set('html', 'clearCache sending');
            },
            onComplete: function() {
                target.set('html', 'clearCache sent');
            }
        });
        clearingcahe.send();
    }
}
window.addEvent('domready', AdminForm.start);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:02:06.570

The Form.Request in Mootools inherits Class.Occlude, see [http://mootools.net/docs/more/Class/Class.Occlude](http://mootools.net/docs/more/Class/Class.Occlude)

But the Class.Occlude will prevent that several Objects are created and applied to the same DOM Element. That is, it works like a singleton, so the first time you do `new Form.Request(adminform, ...)` it will return a new instance of Form.Request.

However, the second time you call `new Form.Request(adminform, ...)` the previous object will be returned instead.

Your fiddle actually demonstrates this very good, because the first one that is clicked of "Clear Cache" or "Send" will be the one that initiates the object. The second time it will discard your options and just return the old object.

So there are two ways to solve this:

1.  Create the Form.Request but don't set the event handlers through the options but through
    `adminsend.removeEvents('complete'); adminsend.addEvent('complete', ....)`
    **Don't forget to remove the old event handlers before applying the new!** otherwise you will just apply more and more eventhandlers.

2.  There are two "buttons" so make two forms, which would be much more semantically correct as well.

# android - 为应用程序加载图像的内存问题

> ID：12887504
> 
> 赞同：0
> 
> 时间：2012-10-14T23:19:27.773
> 
> 标签：android

描述背景，因为我可能对这个问题有一个糟糕的方法——自我学习。

我正在为 android 编写一个应用程序，并在默认 AVD 上对其进行测试，默认 AVD 设置为 WVGA800，“设备内存大小”为 512，“抽象 LCD 密度”为 240。

我有一些图像，我将它们放入 drawable-hdpi 中。该文件夹中有 458 KB（不是 MB）的图像。所有图像均为PNG格式。

问题是，当我尝试加载最大的图像（用于背景）时，它会抛出：`java.lang.OutOfMemoryError` 这是加载图像的调用：

```
BitmapFactory.decodeResource(status.getResources(), R.drawable.background); 
```

这与我加载其余图像（总共 33 个）的方式相同。

这对我来说很有意义，它会在最大图像上耗尽内存，但我的文件夹总大小为 458 KB，所以我不希望设备上设置的 512 MB Ram 用完。

我从不卸载任何图像，我保持它们加载，并根据需要使用。我之前写了一个不同的应用程序，其中我的图像总大小为 563 KB，总共 82 个图像，我没有这个问题（使用相同的 AVD）。事实上，以前的应用程序过去常常通过翻转每个图像来制作几个副本，并且仍然没有用完空间。当前应用程序在初始加载时失败 - 在发生很多事情之前。

有人可以指出问题可能是什么吗？以及我如何解决它，或者可能提到我的方法是否错误（通过示例自学）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:44:39.887

我会给你一些关于我如何设法减轻这个问题的提示

*   如果您计划支持所有设备，请将所有资源放入 xhdpi 文件夹。尤其是背景
*   文件大小！= 内存大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:28:58.100

是的，这是一个很常见的问题。因此，在旧版本的 android OS 中，位图被加载到本机内存而不是 JVM。垃圾收集过程实际上有 2 个周期。一个用于清除 JVM 中的内存，另一个用于清除本机内存中的内存（用于位图）。如果您想在旧设备上工作，您需要通过回收位图`Bitmap.recycle()`或调用来处理这种情况`System.gc()`

您可能会遇到两个问题： 1\. 您还有其他未回收的位图。2\. 你的内存真的用完了，因为那张图片太大了。（确保其他图像被正确回收或 gc'd 以便它不会增加内存占用）。在这种情况下，您无能为力。

另外，正如 mehmet 建议的那样，您可以阅读[此内容](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T23:31:04.223

请记住以下几点：

*   您的应用程序有内存限制（这取决于 android 版本）。您不会获得所有设备内存。我认为第一个 android 版本的内存限制为 16mb。
*   文件的大小并不代表内存中位图的大小。例如 32 位 ARGB 位图将占用`32*width*height`位
*   如果您正在处理大图像，请先缩放它们。计算您需要的大小（这可能是您的大小`ImageView`）并加载调整大小的位图副本。您可以使用[`BitmapFactory.Options`](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)

# openlayers - 无法为 openlayers 地图设置地图的 div 高度

> ID：12887506
> 
> 赞同：6
> 
> 时间：2012-10-14T23:19:43.450
> 
> 标签：openlayers

此代码使地图的 div 宽度最大但高度为 0（% 值无关紧要，它始终为 0）

```
<div id="map" style="width: 100%; height: 100%;"></div> 
```

这很有效，因为它将地图的 div 设置为固定大小，但显然不是我想要的。

```
<div id="map" style="width: 100%; height: 500px;"></div> 
```

有人经历过吗？有人建议如何解决这个问题吗？

我也在使用 jquery(-mobile)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T09:09:26.100

这是我的修复：

```
function fixContentHeight(){
    var viewHeight = $(window).height();
    var header = $("div[data-role='header']:visible:visible");
    var navbar = $("div[data-role='navbar']:visible:visible");
    var content = $("div[data-role='content']:visible:visible");
    var contentHeight = viewHeight - header.outerHeight() - navbar.outerHeight();
    content.height(contentHeight);
    map.updateSize();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T08:57:11.577

您需要为 HTML 和 Body 提供 100% 的高度：

```
html, body {
height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T21:12:05.043

如果您使用 jquery，这可以完美地将您的地图“拉伸”到持有它的容器 div，无论您的 css 为地图设置了什么：

```
 $(window).resize(function () {
      //$('#log').append('<div>Handler for .resize() called.</div>');
         var canvasheight=$('#map').parent().css('height');
         var canvaswidth=$('#map').parent().css('width');

         $('#map').css("height", canvasheight);
         $('#map').css("width", canvaswidth);

   }); 
```

顺便说一句，您可以将其称为早期的，最好在*$(document).ready(function(){ /* here */ }*块中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-07T13:50:10.597

我遇到了这个话题，因为我想将离子选项卡（[ionicframework](http://ionicframework.com/)）中的地图高度设置为 100%。即使这不是最初的问题，也可能其他人遇到同样的问题。除了前面的建议，您还必须将 .scroll 类的高度设置为 100%：

```
html, body {
    width: 100%;
    height: 100%;
}

.scroll {
    height: 100%;
}

#map {
    height: 100%;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-26T22:06:21.903

我通过添加以下内容为我的用例解决了这个问题：

```
setInterval(function(){map.updateSize();}, 500); 
```

更新：这不是我在 OpenLayers 3 下所做的事情。我在使用 OpenLayers 2 时这样做了。我并不是说它很漂亮，但它足以满足我的需要。

# variables - 如何为 sas 中的唯一变量创建索引？

> ID：12887509
> 
> 赞同：2
> 
> 时间：2012-10-14T23:20:29.347
> 
> 标签：variables, indexing, unique, sas

我正在尝试将两个模型输出的优势比与 SAS 中的不同调整相结合：

IE：

```
ods output oddsratios=adjustedOR1(rename=(OddsRatioEst=OR1);
 proc logistic data=dataname; 
      model y= b d c a e; run;

ods output oddsratios=adjustedOR2 (rename=(OddsRatioEst=OR2);
 proc logistic data=dataname; 
      model y= b d c; run; 
```

过程排序.....

```
data Oddsratios (keep=Effect OR1 OR2);
merge adjustedOR1 adjustedOR2; by effect; run; 
```

问题是，如果我按效果变量进行排序和合并，我会丢失将解释变量放入模型的顺序。

反正有没有按照我放在模型中的顺序给变量分配一个索引，这样最终的表就会有顺序的效果列：bdcae？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:08:47.590

我认为对数据进行排序的最简单方法是在 Proc Sql 中进行合并，并在“order by”子句中使用 case 语句。这是一个例子。

```
ods output oddsratios=adjustedOR1(rename=(OddsRatioEst=OR1));
 proc logistic data=sashelp.class; 
      model sex= height age weight; run;

ods output oddsratios=adjustedOR2 (rename=(OddsRatioEst=OR2));
 proc logistic data=sashelp.class; 
      model sex= height age; run;

proc sql;
create table Oddsratios as select
a.effect,
a.or1,
b.or2
from    adjustedOR1 as a 
            left join
        adjustedOR2 as b
            on a.effect=b.effect
order by 
    case a.effect
        when 'Height' then 1
        when 'Age' then 2
        when 'Weight' then 3
    end;
quit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:09:25.493

我建议使用您想要的排序顺序在您的“主要”数据集中创建一个新的序列变量。然后按该变量重新排序合并的结果：

```
data adjustedOR1;
   set adjustedOR1;
   sortkey = _n_;
run;
proc sort data=adjustedOR1;
   by effect;
run;
proc sort data=adjustedOR2;
   by effect;
run;
data Oddsratios (keep=Effect OR1 OR2 sortkey);
   merge adjustedOR1 adjustedOR2; 
      by effect;
run;
proc sort data=Oddsratios;
  by sortkey;
run; 
```

这比 Keith 建议使用 PROC SQL（顺便说一句也可以）对排序序列进行硬编码更通用一些。

感谢 Keith 提供了一个实际的例子！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T23:54:14.990

如果你只想改变变量在数据集中出现的顺序，你可以使用retain语句：

```
data Oddsratios (keep=Effect OR1 OR2);
 retain b d c a e;
 merge adjustedOR1 adjustedOR2; 
 by effect; 
run; 
```

这并不是保留的真正用途，但它确实有效。

但我想知道为什么你关心数据集中变量的顺序是什么。例如，您可以指定显示结果时的顺序`proc print`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:36:00.283

我认为仍然相当灵活的最简单答案是从您的原始数据集创建一个信息。然后在合并期间，您可以使用数字顺序变量创建一个新变量，然后按该变量排序。

另一种解决方案是以不需要排序的方式进行合并——例如，创建一个哈希表，或者从优势比 2 数据集创建一个格式，并将其附加到一个简单的数据步骤中，而不是通过合并。

```
data have;
input effect $;
datalines;
b
d
c
a
e
;;;;
run;

data for_format;
set have;
fmtname='EFF';
type='j';
hlo='s';
start=effect;
label=_n_;
keep hlo type fmtname start label;
run;

proc format cntlin=for_format;
quit;

proc sort data=have;
by effect;
run;

data want;
set have; *your merge here instead;
by effect;
eff_order=input(effect,$EFF.);
run;

proc sort data=want;
by eff_order;
run;
proc print data=want;
run; 
```

# c# - 在 VSC# 2010 (AdminPaq SDK) 上导入 DLL c++

> ID：12887515
> 
> 赞同：0
> 
> 时间：2012-10-14T23:21:37.443
> 
> 标签：c#, visual-studio-2010

我正在尝试将一个库导入我的 WCF 项目，该 DLL 由 Adminpaq 提供。

我正在使用以下代码：

```
 [DllImport("MGW_SDK.dll", EntryPoint = "fInicializaSDK")]
public static extern int fInicializaSDK(); 
```

当我调试应用程序时说下一个错误：无法加载 DLL 找不到指定的模块。

我已经在网络上准备好该错误可能是由依赖引起的，但是在 SDK 文档中显示了一些必须添加到根项目的文件的列表，我目前正在添加它们中的所有

一些信息：Dll 建立在：c++ Proyect 类型：c# 应用程序服务 MCF 我正在使用：Windows 7 Ultimate x64

需要任何进一步的信息，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:42:21.950

你是对的，通常它与你的 MGW_SDK.dll 依赖的其他库有关。试试这些：

1) 安装 Microsoft Visual C++ redist（2005、2008 或 2010，取决于用于构建该 dll 的 VS）

2）如果这没有帮助，请尝试使用依赖遍历器工具查看缺少哪些文件（http://www.dependencywalker.com）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T17:44:26.397

您必须安装 AdminPaq 并拥有注册许可证，之后错误就会消失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:01:05.720

您必须键入 DLL 的完整和原始路径，例如：@"C:\Program Files (x86)\Compacw\AdminPAQ\MGW_SDK.dll"

# hadoop - 在 Apache pig 工作中获取今天的日期

> ID：12887518
> 
> 赞同：4
> 
> 时间：2012-10-14T23:21:58.577
> 
> 标签：hadoop, mapreduce, apache-pig

我想在我的一个猪作业的输出文件路径中使用今天的日期，该作业假设每天运行，有没有办法做到这一点。就像是 `/user/x/$todaysDate`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T00:50:15.467

通过 bash 执行此操作：

```
echo '/user/x/'`date +%Y-%m-%d` 
```

给出：

```
/user/x/2012-10-14 
```

* * *

因此，您可以将脚本执行为：

```
$ pig -param outpath='/user/x/'`date +%Y-%m-%d` myscript.pig 
```

然后，在您的`STORE`命令中，使用`$outpath`：

```
STORE abc INTO '$outpath'; 
```

# vb.net - 检查互联网连接是否存在以及是否发送 SMTP 邮件的常用方法是什么？

> ID：12887522
> 
> 赞同：0
> 
> 时间：2012-10-14T23:22:48.613
> 
> 标签：vb.net

我正在通过 VB.NET 发送电子邮件，如显示的代码：

```
 Dim retval As Integer
    Dim attachment As System.Net.Mail.Attachment = Nothing
    If fileName <> "" Then
        attachment = New System.Net.Mail.Attachment(fileName)
    End If

    Dim client As New SmtpClient()
    With client
        .EnableSsl = True
        .Host = smtpServerAddress
        .Port = 587
        .DeliveryMethod = SmtpDeliveryMethod.Network
        .UseDefaultCredentials = False
        .Credentials = New NetworkCredential(FromEmailId, password)
        AddHandler .SendCompleted, AddressOf SendCompletedCallback
    End With

    Dim mail = New MailMessage(FromEmailId, toEmailId)
    With mail
        .Priority = MailPriority.High
        .Subject = subject
        .SubjectEncoding = System.Text.Encoding.UTF8
        .IsBodyHtml = False
        If fileName <> "" Then
            .Attachments.Add(attachment)
        End If
        .Body = msgBody
        .BodyEncoding = System.Text.Encoding.UTF8
    End With

    Try
        client.SendAsync(mail, "")
        retval = 1
    Catch ex As Exception
        retval = 0
        MsgBox(ex.Message, MsgBoxStyle.Critical)
    End Try

    Return retval 
```

这部作品很好。问题只是如果我没有连接到互联网，我的 Try/Catch 块不会按预期做出反应。我知道邮件没有发出的唯一方法是我没有收到来自回调的消息，这可能需要很长时间。此外，我从功能返回 1，如电子邮件已正确发送。

检查互联网连接是否存在以及是否开始发送邮件的常用方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:34:37.467

如果您想捕获从 SmtpClient 抛出的所有异常，您可以同步发送邮件。如果您更喜欢异步方式，请使用[SendMailAsync](http://msdn.microsoft.com/en-us/library/hh193922.aspx)返回 Task 实例，您可以在该实例上调用 ContinueWith 来设置错误处理程序：

```
client.SendMailAsync(mail).ContinueWith(t=>HandleError(t.Exception), TaskContinuationOptions.OnlyOnFaulted) 
```

# android - Android - 全局变量在所有活动之间保持其值

> ID：12887525
> 
> 赞同：0
> 
> 时间：2012-10-14T23:23:26.193
> 
> 标签：android, variables, android-intent, global

我需要找到一种方法来在各种活动之间保持变量的值。它实际上是一个整数值，它是在每次点击事件时递增的计数器。因此，如果单击右键，该值应保持递增。我遇到的问题是该变量的值不保持不变（例如，如果它在活动 A 上为 1，并且已单击右键，则在活动 B 上应变为 2）。你能帮帮我吗？我试过单例类但无济于事。我还使用了在处理这部分时遇到困难的意图 getExtras。

```
 Intent mIntent = getIntent();
         int ScoreCount = mIntent.getIntExtra("intScoreCount", 0); 
```

可以添加什么值而不是值 0 以便保留 ScoreCount 的值？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:45:47.550

根据您的回复。使用 SharedPreferences 存储/计数并在应用启动时将计数重置为 0。因此，无论是在您的 Application 类还是您的第一个 Activity 中，将计数重置为 0，以便您重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:58:44.250

您应该使用 Application 类来执行此操作。在所有的活动中都是一样的。

看看这篇文章，看看如何使用它：[http ://coding-dump.blogspot.ro/2013/01/global-variables-in-android.html](http://coding-dump.blogspot.ro/2013/01/global-variables-in-android.html)

基本上，您扩展 Application 类并将变量放在那里。您可以访问此类的实例并增加您的计数器。

# asp.net-mvc - 如何将用户的电子邮件地址从 NHibernate 和 Windsor 传递到 MVC3 视图？

> ID：12887526
> 
> 赞同：0
> 
> 时间：2012-10-14T23:23:28.213
> 
> 标签：asp.net-mvc, nhibernate, castle-windsor

我正在研究 NHibernate、Castle Windsor 和 MVC3 项目。我需要通过查看当前登录用户的电子邮件地址。自定义成员资格提供程序位于 namespace.CustomProviders.WebWindsorMembershipProvider 中。如何将电子邮件地址传递到我的 Razor 视图？

我们的自定义会员提供程序将 usr.Email 定义为其中的一部分：

```
private MembershipUser GetMembershipUserFromUser(User usr)
    {
        MembershipUser u = new MembershipUser("WebWindsorMembershipProvider",
                                              usr.Username,
                                              usr.Id,
                                              usr.Email,
                                              usr.SecretQuestion,
                                              usr.SecretAnswer,
                                              usr.IsApproved,
                                              usr.IsLockedOut,
                                              (usr.CreationDate.HasValue) ? usr.CreationDate.Value : DateTime.Now,
                                              (usr.LastLoginDate.HasValue)
                                                  ? usr.LastLoginDate.Value
                                                  : Utils.MinDate(),
                                              (usr.LastActivityDate.HasValue)
                                                  ? usr.LastActivityDate.Value
                                                  : Utils.MinDate(),
                                              (usr.LastPasswordChangedDate.HasValue)
                                                  ? usr.LastPasswordChangedDate.Value
                                                  : Utils.MinDate(),
                                              (usr.LastLockedOutDate.HasValue)
                                                  ? usr.LastLockedOutDate.Value
                                                  : Utils.MinDate()); 

        return u;
    } 
```

如何从自定义提供程序传递 usr.Email 值以嵌入到我的 AccountInfo 视图中的 H2 标记中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:49:20.077

我不知道您是如何实现会员系统的，但假设它使用标准会员界面，那么您只需执行以下操作：

```
return View(Membership.GetUser().Email) 
```

如果您使用的是视图模型，那么您只需执行相同的操作，但将其添加到视图模型并将视图模型传递给视图。

不知道为什么你觉得这很困难。

# java - 无法遍历列表 - JSTL

> ID：12887527
> 
> 赞同：0
> 
> 时间：2012-10-14T23:23:41.110
> 
> 标签：java, jsp, servlets, jstl

小服务程序代码：

```
 List<Uscensuspopulationdata> ls = query.list();

      request.getSession().setAttribute("out", ls);
      response.sendRedirect("fulldata.jsp"); 
```

JSP 代码：//out has 表示整个列表。所以 out[0].name 有效。//但我不知道如何迭代以显示所有记录

```
 ${out[0].name} 
```

我想在循环中显示如下内容： ${out[i].name} 以便我可以从列表中获取所有名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:33:42.497

你会使用`forEach`：

```
<c:forEach items="${out}" var="theItem">
  <c:out value="${theItem.name}" />
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:52:50.410

由于您已将其发布到会话中，请尝试通过*${sessionScope* ...在会话范围内显式声明列表

```
<c:forEach items="${sessionScope.ls}" var="e">      
    ${e.name} <br> 
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T04:27:37.720

你是不是忘了添加声明`<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>`

# html - 按钮单击时的 CSS 变换旋转

> ID：12887530
> 
> 赞同：2
> 
> 时间：2012-10-14T23:24:58.130
> 
> 标签：html, css

我有一个简单的登录表单和注册表单，目前它们在容器悬停时在 y 轴上旋转，然后在移除悬停时旋转回来开始。

我需要绑定它，所以当单击注册按钮时，它会翻转到背面（注册页面），然后如果我单击登录按钮，它会再次恢复到正面。

这是消除文字墙的[小提琴。](http://jsfiddle.net/Fr5ND/)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:14:46.143

这很简单，你几乎就在那里。既然你有

```
/*#f1_container:hover #f1_card,*/ #f1_container.hover_effect #f1_card {
  transform: rotateY(180deg);
} 
```

在您的 CSS 中，您只需`.hover_effect`在单击“注册/登录”按钮时添加/删除类，仅此而已。

它只需要一点 JavaScript：

```
var face_changers = document.querySelectorAll('.btnFlip'), 
    f1_container = document.getElementById('f1_container');

for(var i = 0; i < face_changers.length; i++){
    face_changers[i].addEventListener('click', function(e) {
        f1_container.classList.toggle('hover_effect');
        e.preventDefault();
    }, false);
}​ 
```

# [*演示*](http://jsfiddle.net/thebabydino/Fr5ND/3/)

[请注意，我还注释掉了悬停部分，因此悬停时不再翻转；除此之外，我没有对 CSS 或 HTML 进行任何更改]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:37:18.197

您需要在以下选择器的开头添加一个类

```
#f1_container:hover #f1_card, #f1_container.hover_effect #f1_card 
```

将旋转设置为零，然后在单击时切换该类。

编辑：

您正在使用选择器旋转卡片

```
#f1_container:hover #f1_card, #f1_container.hover_effect #f1_card {
  -webkit-transform: rotateY(180deg);
  -moz-transform: rotateY(180deg);
  -o-transform: rotateY(180deg);
  transform: rotateY(180deg);
} 
```

为了在悬停时不总是让它旋转，您需要提供一个更具体的选择器来覆盖该规则。您可以通过在它之前添加任何选择器来做到这一点。做到这一点的最好方法通常是向父元素添加一个类。所以新规则看起来像这样

```
.registered#f1_container:hover #f1_card, .registered#f1_container.hover_effect #f1_card {
  -webkit-transform: rotateY(0);
  -moz-transform: rotateY(0);
  -o-transform: rotateY(0);
  transform: rotateY(0);
} 
```

这将匹配 id 为 f1_container 的元素**以及**已注册的类，而不是仅匹配 id 为 f1_container 的元素

当您单击注册按钮时，您将希望通过执行一些 javascript 在元素上切换此类。

您在按钮上没有唯一的 id 或类，因此单击侦听器的 jQuery 选择器有点毛茸茸

```
$('#frmReg button:not(".btnFlip")').on('click', function(){
  $('btnFlip').addClass('registered')
}) 
```

显然，如果您只是向该按钮添加一个 id，它会更简单一些。

# c++ - 如何在 C++ 中停止 boost::regex_replace 的格式 ($)？

> ID：12887541
> 
> 赞同：0
> 
> 时间：2012-10-14T23:29:01.047
> 
> 标签：c++, boost, replace, boost-regex

我正在使用 boost::regex_replace(replacement_text, regex, new_text) 函数来执行此操作...

```
replacement_text = "{replace_me}"

regex = "(\{([^\}]*[^\s]*)\})"

new_text = "$$$" 
```

对于每个不包含“$”的 new_text，它的效果很好，new_text 将完全替换 replacement_text。但是当使用符号“$$$”时，它会将其截断为“$$”，去掉 1 个 $。

我读到规范中的美元符号 ($) 用于特殊格式：

$n

第 n 个反向引用（即，在正则表达式模式中用括号指定的第 n 个匹配组的副本）。n 必须是指定有效反向引用的整数值，大于 1，最多为两位数。

那么如何禁用它以使其不进行特殊格式设置？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:48:59.967

正如您在问题中提到的，`$`是格式化程序参数中的转义序列`regex_replace`，因此与 PCRE（Perl 兼容的正则表达式）中的任何其他特殊字符一样，您可以使用`\`! 所以使用`\$\$\$`，因为你使用的是 C++，你应该使用`\\$\\$\\$`（当然你已经知道了）

# actionscript-3 - ActionScript 3 中的旋转圆圈

> ID：12887542
> 
> 赞同：0
> 
> 时间：2012-10-14T23:29:20.153
> 
> 标签：actionscript-3, flash, actionscript

我试图每秒以顺时针方向移动蓝色圆圈（bcircle）内的红色圆圈（bcircle.rcircle）。我尝试在计时器事件处理程序（redClockwise）中更改红色圆圈（bcircle.rcircle）的 x 和 y 坐标。我将不胜感激这方面的任何帮助。谢谢。

我当前的代码如下..

```
package
{
    import flash.display.*;
    import flash.utils.Timer;
    import flash.events.TimerEvent;

    public class blueCircles extends MovieClip
    {
        public var bcircle:MovieClip = new MovieClip();
        public var rcircle:MovieClip = new MovieClip();
        private var timer:Timer = new Timer(1000,10);

        public function blueCircles()
        {
            createCircles();
            timer.start();
            timer.addEventListener(TimerEvent.TIMER, redClockwise);

        }
        private function createCircles():void
        {

            for (var i:Number=0; i<=9; i++)
            {
                var bcircle:MovieClip = new MovieClip();
                var bxpos:int = 20;
                var bypos:int = 20;

                bcircle.graphics.beginFill(0x0033CC);
                bcircle.graphics.drawCircle(bxpos,bypos,15);
                bcircle.graphics.endFill();
                bcircle.y = (30 + 10) * i;
                addChild(bcircle);

                //var rcircle:MovieClip = new MovieClip();
                bcircle.rcircle = new Shape();
                var rxpos:int = 15;
                var rypos:int = 25;

                bcircle.rcircle.graphics.beginFill(0xFF0000);
                bcircle.rcircle.graphics.drawCircle(rxpos,rypos,5);
                bcircle.rcircle.graphics.endFill();
                rcircle.y = (30 + 10) * i;
                bcircle.addChild(bcircle.rcircle);
            }
        }
        public function redClockwise(e:TimerEvent):void 
        {
            trace("Call");

            //bcircle.rcircle.rotation += 50;
            bcircle.rcircle.x += 50 * Math.PI/180;
            bcircle.rcircle.y += 50 * Math.PI/180; 
            //rcircle.rotation = 50;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:05:27.240

几点：

1.  您需要`bcircle`在类级别存储对的引用，以便您可以在`redClockwise()`方法中引用它。您已经做到*了*，但是如果您密切注意，您会注意到您实际上在其中所做的`createCircles()`是创建一个名为`bcircle`并使用它的新局部变量，而不是引用类级别的定义。
2.  因为您有多个圈子，所以单个类级别的定义将不起作用。您需要创建一个数组，并将每个圆圈存储在其中，以便您可以遍历该数组并更新所有圆圈。
3.  您的计时器只会运行 10 次。这可能是故意的，但我想我会指出这一点。
4.  您沿圆形路径移动的逻辑无效。您在这里所做的只是向起始位置的东南方向移动。你需要使用 sin 和 cos 来移动我假设你想要的方式。这个想法将定位红色圆圈，使它们位于蓝色的中心，然后使用一个值（也许`rotation`）来偏移红色圆圈的位置，使其远离它的蓝色父级的中心，基于它的半径和前面提到的值以获取从中心右侧的角度。
5.  你在一堂课上做的太多了。创建一个类“DualCircle”或类似的东西，并在那里管理红色圆圈的运动以及每个圆圈的外观。仅使用文档类来创建和定位这些元素中的每一个。这将大大降低您尝试做的事情的复杂性。

# ios - 管理 NSURLConnection

> ID：12887546
> 
> 赞同：1
> 
> 时间：2012-10-14T23:29:37.177
> 
> 标签：ios, xcode, cocoa-touch

我正在使用以下代码连接到 Web 服务并获取响应。代码工作得很好，我正在使用连接委托 connectionDidFinishLoading 来解析结果并采取一些措施。

```
- (IBAction)signInTouchUpInside:(id)sender {

    if (r == NO) {

        if ([Utility internet]) {

            [self.connection cancel];

            self.json = [[NSMutableData alloc] init];

            NSString* urlString = [NSString stringWithFormat:@"http://www.domain.com/signin?email=%@&password=%@", self.email.text, self.password.text];
            NSURL* url = [NSURL URLWithString:urlString];
            NSMutableURLRequest* urlRequest = [NSMutableURLRequest requestWithURL:url];
            [urlRequest setHTTPMethod:@"GET"];
            [urlRequest addValue:@"iphonekey" forHTTPHeaderField:@"key"];

            self.connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
            [self.connection start];

        } else {

        }

    }

}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection {

    NSString* jsonString = [[NSString alloc] initWithData:self.json encoding:NSUTF8StringEncoding];

    SBJsonParser* parser = [[SBJsonParser alloc] init];
    NSDictionary* holder = [parser objectWithString:jsonString error:nil];

    if ([[holder valueForKey: @"result"] boolValue]) {
    } else {    
    }

}

- (void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response {
    [self.json setLength:0];
}

- (void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data {
    [self.json appendData:data];
}

- (void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error {
    NSLog(@"error %@", error);
} 
```

现在我面临一些问题，我不知道该怎么办。我需要在多个视图控制器中进行相同的连接，所以与其一直重复自己，我认为创建一个类来管理连接会更好。此外，我在connectionDidFinishLoading中采取的动作对于每个Web服务都是不同的，所以我需要为每个调用配置一个回调。我怎样才能做到这一点？

ps：我没有并发通话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:10:24.790

是的，您应该创建一个类来管理连接。对于每个连接，创建它的一个实例 -

```
@property (nonatomic,retain)NSURLConnection* loginConnection;
@property (nonatomic,retain)NSURLConnection* logoutConnection;
@property (nonatomic,retain)NSURLConnection* registerConnection; 
```

在视图控制器中 -

```
-(IBAction)signInTouchUpInside:(id)sender{
    [[NSNotification defaultCenter]addObserver:self selector:@selector(signInResponse:) name:@"login" object:nil];

    //do something

}

-(void)signInResponse:(NSNotification*)notification{
    [[NSNotification defaultCenter]removeObserver:self name:@"login" object:nil];
    //do the callback function
} 
```

In the new class, assign the connection -

```
 self.loginConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
    [self.connection start]; 
```

Then in connectionDidFinishLoading -

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

    if (connection == loginConnection){
        [[NSNotification defaultCenter] postNotificationName:@"login" object:nil userInfo:someInfo];
    }
    if (connection == logoutConnection){
        [[NSNotification defaultCenter] postNotificationName:@"logout" object:nil userInfo:someInfo];
    }
    if (connection == registerConnection){
        [[NSNotification defaultCenter] postNotificationName:@"register" object:nil userInfo:someInfo];
    }
} 
```

This way, you can do operations targeted for that connection.

# android - SQLCipher Loadlibs 和 db 密码更改

> ID：12887551
> 
> 赞同：2
> 
> 时间：2012-10-14T23:30:38.720
> 
> 标签：android, database, sqlite, sqlcipher

SQLCipher 网站提到

“使用 SQLiteDatabase.loadLibs(this) 在 onCreate() 中初始化数据库；//首先使用上下文初始化数据库库”

1.  我在我的第一个活动中只调用了这个 loadlibs 一次（似乎正在工作）。我想确保我不需要为可能访问数据库的每个活动调用此函数。它是否正确？

2.  如何更改数据库密码？我尝试重新生成密钥，但这不起作用。它仍然需要旧密码。

任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-10T05:57:45.550

```
SQLiteDatabase.rawExecSQL("PRAGMA key = 'old_password';");
SQLiteDatabase.rawExecSQL("PRAGMA rekey = 'new_password';"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T12:47:36.123

是的，这是正确的 - 您只需要调用`SQLiteDatabase.loadLibs(...);`一次，因为它负责将运行时使用的各种本机库 SQLCipher for Android 加载到进程中。要更改密码，您必须首先引用`SQLiteDatabase`您提供原始密码的对象。一旦你有了它，你就可以`PRAGMA rekey = 'some new password';`使用`execSQL(...);`. 更多关于 rekey 命令的信息可以在[这里](http://sqlcipher.net/sqlcipher-api/#rekey)找到。

# android - Android Webview上的Appcache不下载源

> ID：12887558
> 
> 赞同：5
> 
> 时间：2012-10-14T23:32:40.713
> 
> 标签：android, webview, html5-appcache

我知道我的 web 应用程序的 appcache 运行良好，因为我已经在 Chrome 上尝试过它，即使在适用于 Android 的 Chrome 上它也可以工作，但是从 webview 将它加载到我的 Android 应用程序中时它不起作用。我有以下设置：

```
 myWebView = (WebView) v.findViewById(R.id.webView);
    WebSettings webSettings = myWebView.getSettings();
    webSettings.setDomStorageEnabled(true);
    webSettings.setJavaScriptEnabled(true);
    webSettings.setSupportMultipleWindows(true);
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webSettings.setAppCacheMaxSize(1024*1024*16);
    String appCachePath = getActivity().getApplicationContext().getCacheDir().getAbsolutePath();
    webSettings.setAppCachePath(appCachePath);
    webSettings.setAllowFileAccess(true);
    webSettings.setAppCacheEnabled(true);
    webSettings.setCacheMode(WebSettings.LOAD_DEFAULT);
    webSettings.setDatabaseEnabled(true);
    String databasePath = "/data/data/" + getActivity().getPackageName() + "/databases/";
    webSettings.setDatabasePath(databasePath);
    webSettings.setGeolocationEnabled(true);
    webSettings.setSaveFormData(true); 
```

但是在加载应用程序时，在 logcat 中我可以阅读以下内容

> 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有这样的表: CacheGroups 10-15 01:21:43.815: D/WebKit(14278): 错误: 10-15 01:21:43.815 ：D/WebKit（14278）：应用程序缓存存储：未能执行语句“DELETE FROM CacheGroups”错误“没有这样的表：CacheGroups”10-15 01：21：43.815：D/WebKit（14278）：外部/webkit/Source /WebCore/loader/appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有表：缓存 10-15 01:21:43.815：D/WebKit(14278)：错误：10-15 01:21:43.815：D/WebKit(14278)：应用程序缓存存储：未能执行语句“DELETE FROM Caches”错误“没有这样的表：缓存”10-15 01:21:43.815: D/WebKit(14278):external/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) no such table: Origins 10-15 01:21:43.815: D/WebKit(14278): ERROR: 10-15 01:21:43.815: D/WebKit(14278): Application Cache Storage: failed to execute statement “DELETE FROM Origins”错误“没有这样的表：Origins”10-15 01:21:43.815: D/WebKit(14278): external/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558) : bool WebCore ::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有这样的表：DeletedCacheResources21：43.815：E/SQLiteLog（14278）：（1）没有这样的表：起源 10-15 01：21：43.815：D/WebKit（14278）：错误：10-15 01：21：43.815：D/WebKit（ 14278）：应用程序缓存存储：未能执行语句“DELETE FROM Origins”错误“没有这样的表：Origins”10-15 01:21:43.815：D/WebKit（14278）：external/webkit/Source/WebCore/loader/ appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有这样的表：DeletedCacheResources21：43.815：E/SQLiteLog（14278）：（1）没有这样的表：起源 10-15 01：21：43.815：D/WebKit（14278）：错误：10-15 01：21：43.815：D/WebKit（ 14278）：应用程序缓存存储：未能执行语句“DELETE FROM Origins”错误“没有这样的表：Origins”10-15 01:21:43.815：D/WebKit（14278）：external/webkit/Source/WebCore/loader/ appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有这样的表：DeletedCacheResourcesD/WebKit(14278): 外部/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558): bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有这样的表：DeletedCacheResourcesD/WebKit(14278): 外部/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558): bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&) 10-15 01:21:43.815: E/SQLiteLog(14278): (1) 没有这样的表：DeletedCacheResources

显然 AppCache 不工作 =/ 我做错什么了吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T19:36:46.837

这些是对我有用的设置：

```
CookieSyncManager.createInstance(contextForDialog);
webView = (WebView) findViewById(R.id.webView1);

WebSettings settings = webView.getSettings();

settings.setRenderPriority(RenderPriority.HIGH);
settings.setCacheMode(WebSettings.LOAD_DEFAULT);

settings.setSaveFormData(true);
settings.setLoadsImagesAutomatically(true);
settings.setJavaScriptEnabled(true);
settings.setDatabaseEnabled(true);
settings.setDomStorageEnabled(true);
settings.setAppCacheMaxSize(1024*1024*1024*8);
String sDataPath = context.getDir("database", Context.MODE_PRIVATE).getPath();
settings.setDatabasePath(sDataPath);
settings.setAppCachePath(sDataPath);
settings.setAllowFileAccess(true);
settings.setAppCacheEnabled(true);
settings.setAllowFileAccess(true);
settings.setGeolocationEnabled(true);
settings.setSavePassword(true);

webView.setFocusable(true);
webView.setFocusableInTouchMode(true);
settings.setDatabaseEnabled(true);
settings.setAllowContentAccess(true);
settings.setLoadsImagesAutomatically(true);
webView.addJavascriptInterface(this, "AndroidInterface");
WebView.setWebViewClient(new routeNavClient());
webView.setWebChromeClient(new webChromeClient());
CookieManager c = CookieManager.getInstance();
c.setAcceptCookie(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:52:48.580

在 appcache 和 domstore 之前设置 db，在 set*Enabled() 之前设置任何“参数”，例如 set*Path()/set*Size()

除此之外，如果在使用时将两个独立管理的缓存相互堆叠，这可能不是一个好主意

getActivity().getApplicationContext().getCacheDir().getAbsolutePath()

作为 webview 的缓存管理器应该存储其数据的目录

当 Activity 的缓存管理器决定删除 webview 的缓存管理器创建的文件时，不会通知 webview 的缓存管理器并且可能进一步依赖它的存在

可能会工作很长时间，但有一天它可能会变成一个难以识别的交替错误

# jquery - jquery 在启动另一个函数之前完成一个函数

> ID：12887559
> 
> 赞同：0
> 
> 时间：2012-10-14T23:32:52.353
> 
> 标签：jquery, function

我有一个运行两个功能的 onclick，我希望第一个运行并完成，并在完成时启动下一个。我现在有这样的设置，它们似乎同时运行：

```
$("#animate_1").click(function() {
update_1_close();
welcome_open();
}); 
```

这是两个功能，我不想组合它们，我有几个，组合起来会很复杂

```
function update_1_close() {
$("#update_1").animate({
    "right": "175px",
    "width": "160px"
}, 450);
$("#update_1_caption").animate({
    "bottom": "0px"
}, 450);
$("#update_1_img").animate({
    "height": "107px",
    "width": "160px"
}, 450);
}

function welcome_open() {
$("#welcome_back_1").animate({
    "top": "345px"
}, 450);
$("#welcome_header_1").animate({
    "top": "35px",
    "left": "20px"
}, 450);
$("#welcome").animate({
    "height": "270px"
}, 450)
$("#stick_figures").animate({
    "top": "215px"
}, 450);
$("#update_1").animate({
    "top": "465px",
    "right": "175px"
}, 450);
$("#update_2").animate({
    "top": "465px"
}, 450);
$("#events").animate({
    "top": "645px"
}, 450);
$("#directions").animate({
    "top": "645px"
}, 450);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:40:46.053

您可以将 welcome_open 作为参数传递给 update_1_close 并在完成后执行它。由于您使用的是 jquery animate，请查看[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

您正在寻找“完整”的参数。

```
function update_1_close( callback ) {
  $("#update_1").animate({
      "right": "175px",
      "width": "160px"
  }, 450, callback );
  $("#update_1_caption").animate({
      "bottom": "0px"
  }, 450);
  $("#update_1_img").animate({
      "height": "107px",
      "width": "160px"
  }, 450);
}

update_1_close( welcome_open ); 
```

否则，如果您知道 update_1_close 完成所需的时间，您可以使用 setTimeout （但要注意，因为您可能会在任何地方得到幻数，这似乎已经发生了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:35:43.427

它们不能同时运行——但是，它们可能一个接一个地运行，而浏览器没有机会在它们之间刷新。

我不知道这两个函数是做什么的，但你可能想要更像这样的东西：

```
$("#animate_1").click(function() {
    update_1_close();
    window.setTimeout(welcome_open, 1000);
}); 
```

这将运行`update_1_close`，然后，一秒钟后，运行`welcome_open`

# php - CodeIgniter 将几个扩展类和助手组合到单个文件中以便于分发？

> ID：12887561
> 
> 赞同：1
> 
> 时间：2012-10-14T23:33:25.163
> 
> 标签：php, codeigniter

起初这听起来可能有点“外面”。基本上，我正在 CodeIgniter 中构建一个小型后端，我希望将来能够轻松地将其推广到多个项目中。目前它是控制器、助手、扩展核心类、视图和资产文件夹的集合。如果我想让重新分发变得容易，那么我想尝试减少单个文件的数量。

视图、控制器和模型显然最好作为单独的文件保留。
但是我也用我自己的扩展了很多 CI 的核心类：CI_Controller、CI_Form_validation 和 CI_Input。可能还有更多后续。

有没有办法可以将这三个组合成一个文件？
显然，在 application/core 目录中没有它们会破坏 MY_ 前缀自动加载。如果我也可以将我的自定义帮助函数存储在同一个文件中，那也很棒。这使我能够以传统的 MY_ 前缀格式在 application/core 中保留任何特定于应用程序的核心类，同时能够轻松地对我的核心类进行更新。

我目前在 config.php 中使用 Phil 改进的本机自动加载器（请参见此处... [http://ellislab.com/codeigniter/forums/viewthread/218099/#1006583](http://ellislab.com/codeigniter/forums/viewthread/218099/#1006583)）加载我的扩展核心类而不使用 MY_ 前缀所以我可以给他们更容易识别和合乎逻辑的名称，以便于重新分配。
这向我表明，`config.php`在启动时处理得足够早，我可能只能做一个厚脸皮的`require('AdminCoreClasses.php')`.
因为这基本上是本机自动加载器所做的，但会查看当前类名以指定要加载的文件。我只是硬编码一个文件，其中包含我所有的扩展核心类。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:26:50.930

目前，一旦我完成了任何更改，我就已经将我的“模块”压缩了。我不包括 CI 系统。
因此，从 zip 中提取确实会将所有内容转储到正确的子目录中。
我也想保持核心文件不变，以便于升级。实际上，我修改后的类有不同的名称，所以我不使用 MY_ 前缀。这允许我将 MY_ 前缀用于与我的后端模块无关的其他修改类，并且基于特定于应用程序。

我现在在想，我会忘记这一点，继续我目前正在做的事情。我不想搞乱 CI 的结构方式，因为我的主要目标是让框架升级变得容易。

# c - 任何人都可以在我运行时帮助我的代码，它给出了这个错误：这里是分段错误是我的代码

> ID：12887565
> 
> 赞同：-9
> 
> 时间：2012-10-14T23:33:42.633
> 
> 标签：c, dining-philosopher

```
/* This program consists of 12 functions named, philosopher(), setPhilosopher(), 
   * take_Forks(), put_Forks(), downPhilosopher(), writeFile(), thinking(), test(), setState(),
   * readFile(), eating(),argNo, and main(). It allows a philosopher to think using the function
   * thinking, take forks using take_fork function, eat using the eating function, then
   * put forks using put_forks when done eating.     
   * philosopher: the function calls thinking(),take_fork(),eating(),and put_forks() functions.   
   * setphilosopher: this function sets the status of the philosopher whether he is thinking     
   *                or eating.
   * take_forks: this functions checks whether the left and right forks are available.
   * put_fork: this function it allows the philosopher to put down the forks when done eating.
   * downPhilospher: this function allows the philosopher to "sleep".
   * writeFile: this function writes a number to file.
   * thinking: this function allows the philosopher to think.
   * test: this function tests if the left and right forks are available.
   * setState: this function sets the state of the philosopher.
   * readFile: this function reads numbers from a file. eating: this function allows the philosophers to eat.
   */

#include<stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>

#define N 5     
#define REPETITIONS 10 
#define EATTIME 3000000
#define THINKTIME EATTIME * 3 
#define LEFT    (i+N-1)%N
#define RIGHT    (i+1)%N
#define HUNGRY     1
#define EATING     2
#define THINKING 0
#define mutex "mutex"
#define mutexLock "mutex.lock"
#define Output "output" 
#define states "states"
#define statesLock "states.lock"
#define binarySemaphore "semaphore"
#define binarySemaphoreLock "semaphore.lock"
#define up(lock) unlink(lock)
#define down(lock1,lock2) while(link(lock1,lock2)== -1);

   void readFile(int numberFromFile[],char *file);        
void writeFile(int numberToFile[],char *file);        
void setPhilosopher(int i,int number);                
void take_Forks(int i);                                
void downPhilosopher(int i);                        
void thinking(int j);                                
void setState(int i,int number);                    
void test(int i);                                    
void philosopher(int i);                            
void eating(int j);                                    
void put_Forks(int i);                                
int argNo(char *argv);    

void main(int args,char *argv[]){

    int i;                            
    i = argNo(argv[1]);                
    if((i < 0) || (i >= N))
    {
        fprintf(stderr,"Input not valid\n");
    }
    else
    {    
        if((i < N) && (i >= 0))                 
            philosopher(i);                        
    }

}

int argNo(char *argv){
    int number;                                    
    sscanf(argv,"%d",&number);                    
    return number;                                
}

void philosopher(int i){                                 
    int j;                                     

    for(j = 0; j < REPETITIONS; j++)
    {                             
        thinking(i);                        
        take_Forks(i);                        
        eating(i);                            
        put_Forks(i);                        
    }
}
void thinking(int j){
    int i,pid;                                
    FILE *fp = fopen(Output,"a+");            
    pid = getpid();                            
    for(i = 0;i < THINKTIME ; i++);            
    fclose(fp);                                
}

void take_Forks(int i){
    down(mutex,mutexLock);                
    setState(i,HUNGRY);                    
    test(i);                              
    up(mutexLock);                         
    downPhilosopher(i);                  

}

void eating(int j){
    int i, pid = getpid();                
    FILE *fp = fopen(Output,"a+");        
    fprintf(fp,"%d %d eating\n",pid,j); 
    fprintf(stdout,"%d %d eating\n",pid,j);            
    fflush(fp);                                        
    for(i = 0; i < EATTIME; i++);                    
    fprintf(fp,"%d %d done eating\n",pid,j);         
    fprintf(stdout,"%d %d done eating\n",pid,j);    fflush(fp);                                        
    fclose(fp);                                        
}

void put_Forks(int i){                 
    down(mutex,mutexLock);        
    setState(i,THINKING);        
    test(LEFT);                    
    test(RIGHT);                
    up(mutexLock);                
}

void downPhilosopher(int i){                 
    int semaphores[N];                             
    do
    {
        readFile(semaphores,binarySemaphore);     
    }while(semaphores[i] == 0);                 

    setPhilosopher(i,0);                         
}

void setState(int i,int number){                        
    int theStates[N];                    
    down(states,statesLock);            
    readFile(theStates,states);            
    theStates[i] = number;                 
    writeFile(theStates,states);         
    up(statesLock);                     
}

void test(int i){                 
    int theStates[N];                     
    down(states,statesLock);             
    readFile(theStates,states);         
    up(statesLock);                        
    if(theStates[i] == HUNGRY && theStates[LEFT] != EATING &&
        theStates[RIGHT] != EATING)
    {
        setState(i,EATING);                
        setPhilosopher(i,1);            
    }
}

void setPhilosopher(int i,int number){
    int semaphores[N];                                
    down(binarySemaphore,binarySemaphoreLock);        
    readFile(semaphores,binarySemaphore);             
    semaphores[i] = number;                         
    writeFile(semaphores,binarySemaphore);             
    up(binarySemaphoreLock);                         
}

void readFile(int numberFromFile[],char *file){ 
    FILE *fp = fopen(file,"r");                    
    int i;                                        
    for(i = 0; i< N; i++)
        fscanf(fp,"%d",&numberFromFile[i]);     
    fclose(fp);                                 
}

void writeFile(int numberToFile[],char *file){
    FILE *fp = fopen(file,"w");                
    int i;                                     
    for(i = 0; i< N; i++)                    
        fprintf(fp,"%d\n",numberToFile[i])
        fclose(fp);                            
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:57:09.703

您可能会考虑安装图形调试器而不是在 stackoverflow 上发布错误（Nemiver 是 linux 上最好的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:20:43.983

您正在尝试访问未分配给您的内存的某个地方。查看您的代码，以查找循环中您正在遍历数组的位置，并且您越过了该数组的边界。或者您可能正在测试您无权访问的东西的地方。既然你正在研究餐饮哲学家的问题，这可能是家庭作业，我建议你仔细看看你的设计，并注意每件事都应该做什么。如果您不想使用调试器（例如，如果您使用的是 OS161，我不怪您），但可以放入一些打印语句以找出您的程序在哪里给您 seg 错误。

# html - 需要一些帮助在我的导航上创建第三级菜单

> ID：12887570
> 
> 赞同：0
> 
> 时间：2012-10-14T23:34:40.997
> 
> 标签：html, css, navigation

我已经完成了 2 级导航，并希望添加第三级...尽管阅读并尝试参考其他一些 css 代码，如 [CSS 下拉导航、第 3 级问题](https://stackoverflow.com/questions/8752944/css-drop-down-navigation-3rd-level-issue)和[http://forums.asp.net/ t/1758667.aspx/1](http://forums.asp.net/t/1758667.aspx/1)，我仍然无法让我的代码工作。

我不确定我当前的代码是否允许我创建第三级导航。我不是 css 向导，但想检查是否有任何方法可以创建第三级。

我已经添加了第三级的内容，但未能创建 CSS 以使其显示。我尝试添加：

```
 #menu li ul li ul { display:none;}
   #menu li ul li:hover > ul{display:block; position:absolute; left:150px;} 
```

对我来说 css 但第三级没有出现

因此，当我添加时，我想检查第三级是否会出现

```
 #menu li ul ul { display:block;}
 #menu li ul li:hover > ul{display:block; position:absolute; left:150px;} 
```

在我的 css 中出现了第三级，但我知道结果会很奇怪。

我当前代码的 JSfiddle 是：http: [//jsfiddle.net/eqNZd/5/](http://jsfiddle.net/eqNZd/5/)

谢谢你帮助我......对不起，如果我的问题让你感到困惑......

PS 当我完成导航栏时，我将整理我的代码......对不起，如果代码不整洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:40:13.250

这可能是一个很好的起点。我查看了您的代码，但看起来很复杂，所以我修改了我写的一个旧下拉列表。

[JSFiddle在这里](http://jsfiddle.net/9uW88/)

这是一个非常基本的三层下拉菜单。

以下是一些帮助我编写`CSS`下拉菜单的提示：

1.  保持风格和功能分开
2.  把事情简单化
3.  一旦你完成了一个子菜单，你就完成了无数个子菜单。您需要做的只是简单地为每个其他子菜单重复*相同的代码*，确保`ul`在您的`css`.

如您所见，标题只需要 1 个选择器`ul`，每个子菜单需要 2 个，`ul`菜单才能正常工作。您应该能够修改它以执行您需要的任何操作。

# css - 仅使用 CSS 的 3 层导航

> ID：12887574
> 
> 赞同：1
> 
> 时间：2012-10-14T23:35:34.067
> 
> 标签：css, html, navigation

我想创建一个 3 级导航栏，就像[http://www.bestbuy.com/](http://www.bestbuy.com/)上的导航栏一样。 但是，我想知道是否有一种方法可以只使用 CSS 来做到这一点。我已经尝试了一个类似于[http://net.tutsplus.com/tutorials/design-tutorials/how-to-build-and-enhance-a-3-level-navigation-menu/](http://net.tutsplus.com/tutorials/design-tutorials/how-to-build-and-enhance-a-3-level-navigation-menu/)上的导航栏。但是，问题在于第三级导航不像百思买那样浮动到顶部。有人可以告诉我如何只使用 CSS 来做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:43:03.193

这很简单。具有类似的结构

```
<nav>
  <ul>
    <li>
      <a href='#'>level 0</a>
      <ul>
        <li>
          <a href='#'>level 1</a>
          <ul>
            <li>level 2</li>
<!-- and so on... --> 
```

你只需要这个 CSS 让它工作

```
nav ul { padding: 0; list-style: none; }
nav>ul>li { float: left; position: relative; }
nav ul ul {
  display: none;
  position: absolute;
  top: 100%; left: 0;
}
nav ul ul ul { top: 0; left: 100%; }
nav li:hover>ul { display: block; } 
```

# [*演示*](http://codepen.io/thebabydino/pen/Lsekz)

# ruby - 在 Ubuntu 12.04 上为 Ruby on Rails 安装 rmagic gem 时出错

> ID：12887575
> 
> 赞同：0
> 
> 时间：2012-10-14T23:35:39.533
> 
> 标签：ruby, ruby-on-rails-3, imagemagick, ubuntu-12.04, rmagick

我正在尝试让我的 Ruby on Rails 应用程序正常工作并安装 RMagic gem。但我收到一条错误消息，提示“无法安装 RMagick 2.13.1。找不到 ImageMagick 库或依赖库之一。” 尽管我已经安装了 ImageMagick 及其依赖项。( [http://i46.tinypic.com/2vdl1g6.png](http://i46.tinypic.com/2vdl1g6.png) )

终端日志[http://pastebin.com/vcgkbwZR](http://pastebin.com/vcgkbwZR)

我什至尝试从 Synaptic 安装 RMagic，但是当我运行“bundle”命令时出现同样的错误。

通过我的搜索，有些人遇到了 lib 依赖项的问题，但我相信我已经安装了它们。

我发现的另一个解决方案是这个（[从 gem 安装 RMagick 时出错](https://stackoverflow.com/questions/131179/error-installing-rmagick-from-gem)）有点旧，不确定它是否适用于 12.04。但是，我不知道这些配置应该去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:54:09.047

它现在正在工作，并且在我从主网站编译并安装了最新版本的 ImageMagick 后，RMagick 可以识别 ImageMagick 的位置。我按照说明操作：[http ://www.imagemagick.org/script/install-source.php?ImageMagick=9s6tlikqbn5eb0u0spg5o38sa4#unix](http://www.imagemagick.org/script/install-source.php?ImageMagick=9s6tlikqbn5eb0u0spg5o38sa4#unix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:14:30.987

这是一个很长的镜头，但尝试运行`sudo ldconfig`，然后`gem install rmagick`在同一个终端窗口/选项卡中再次执行。

# android - 带有页面浏览的片段的标签

> ID：12887578
> 
> 赞同：1
> 
> 时间：2012-10-14T23:35:56.203
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock, android-tabs

我想我整天都在与这个问题作斗争，但仍然无法解决这个问题。我正在为我的一个朋友构建一些应用程序。我正在使用 ActionBarSherlock，所以我可以使用操作栏和其他一些东西，比如页面查看器。

无论如何，我正在尝试进行主要活动：3 个选项卡，每个选项卡都显示一个片段（3 个不同的片段），每个片段都必须显示一个 fragmentPagerView，以便我可以来回滚动片段（也许我会添加“在我做对后的某个时候永远滚动”）

问题是我已经启动并运行了我的选项卡（我从 apiDemos 复制了一些代码）但是我无法显示选项卡，而且我找不到原因（它甚至没有崩溃）

这是我的 MainActivity 包含 navActionbar （和一些选项）

```
public class MainActivity extends SherlockFragmentActivity
{
    SherlockFragment yesTabFragment = new YesTabFragment();
    SherlockFragment newTabFragment = new NewTabFragment();
    SherlockFragment trendingTabFragment = new TrendingTabFragment();

    private void createTabs()
    {
        // put ActionBar to nav. mode
        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab yesTab = actionBar
                .newTab()
                .setText("yes")
                .setTabListener(new TabListener<YesTabFragment>(
                        this, "yes", YesTabFragment.class));
        actionBar.addTab(yesTab);

        ActionBar.Tab trendingTab = actionBar
                .newTab()
                .setText("trending")
                .setTabListener(new TabListener<TrendingTabFragment>(
                        this, "trending", TrendingTabFragment.class));
        actionBar.addTab(trendingTab);

        ActionBar.Tab newTab = actionBar
                .newTab()
                .setText("new")
                .setTabListener(new TabListener<NewTabFragment>(
                        this, "new", NewTabFragment.class));
        actionBar.addTab(newTab);
    }

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);
        createTabs();
    }

    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.main_activity_menu, menu);
        return true;
    }

    public static class TabListener<T extends SherlockFragment> implements ActionBar.TabListener
    {
        private final SherlockFragmentActivity mActivity;
        private final String mTag;
        private final Class<T> mClass;
        private final Bundle mArgs;
        private SherlockFragment mFragment;

        public TabListener(SherlockFragmentActivity activity, String tag, Class<T> clz)
        {
            this(activity, tag, clz, null);
        }

        public TabListener(SherlockFragmentActivity activity, String tag, Class<T> clz, Bundle args)
        {
            mActivity = activity;
            mTag = tag;
            mClass = clz;
            mArgs = args;

            // Check to see if we already have a fragment for this tab, probably
            // from a previously saved state. If so, deactivate it, because our
            // initial state is that a tab isn't shown.
            mFragment = (SherlockFragment)mActivity.getSupportFragmentManager().findFragmentByTag(mTag);
            if (mFragment != null && !mFragment.isDetached())
            {
                FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                ft.detach(mFragment);
                ft.commit();
            }
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft)
        {
            if (mFragment == null)
            {
                mFragment = (SherlockFragment)SherlockFragment.instantiate(mActivity, mClass.getName(), mArgs);
                ft.add(android.R.id.content, mFragment, mTag);
            }
            else
            {
                ft.attach(mFragment);
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft)
        {
            if (mFragment != null)
            {
                ft.detach(mFragment);
            }
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft)
        {
            //Toast.makeText(mActivity, "Reselected!", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

正如我所说，我直接从 apiDemos 复制了 TabListener 实现（尽管我写的完全一样）

这是其中一个选项卡片段的实现（它们都是相同的）

```
public class YesTabFragment extends SherlockFragment
{
    View _fragmentView;
    private Vector<stuff> list;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        _fragmentView = inflater.inflate(R.layout.yes_fragment, container, false);

        ViewPager pager = (ViewPager)_fragmentView.findViewById(R.id.gag_pager);
        API api = API.getInstance();

        list = api.get("Yes", 1, 10);
        MyFragmentPagerAdapter adapter = new MyFragmentPagerAdapter(getFragmentManager(), listOfGags);

        pager.setAdapter(adapter);

        return _fragmentView;
    }
} 
```

yesTabFragment 类的实现

```
public class YesTabFragment extends SherlockFragment
{
    View _fragmentView;
    private Vector<things> list;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        _fragmentView = inflater.inflate(R.layout.yes_fragment, container, false);

        ViewPager pager = (ViewPager)_fragmentView.findViewById(R.id.thing_pager);
        API api = API.getInstance();

        list = api.get("Yes", 1, 10);
        MyFragmentPagerAdapter adapter = new MyFragmentPagerAdapter(getFragmentManager(), list);

        pager.setAdapter(adapter);

        return _fragmentView;
    }
} 
```

当然还有 main 和 yes 选项卡的 XML（同样，选项卡几乎相同）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/List"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>

</LinearLayout> 
```

和 yesTab

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/thing_pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </android.support.v4.view.ViewPager>

</LinearLayout> 
```

我真的找不到标签片段不替换框架布局并向我展示viewpager的原因。

我真的可以在这里使用一些好的建议，因为我肯定在这里遗漏了一些重要的东西并且无法理解......

谢谢大佬...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:28:44.447

您的 MainActivity 应包含 ViewPager 定义，例如：

```
viewPager=(ViewPager)findViewById(R.id.pager);
FragmentManager fm = getSupportFragmentManager();

/** Defining a listener for pageChange */
ViewPager.SimpleOnPageChangeListener pageChangeListener = 
    new ViewPager.SimpleOnPageChangeListener()
    {
        @Override
        public void onPageSelected(int position) {
            super.onPageSelected(position);
            actionBar.setSelectedNavigationItem(position);
        }
    };

/** Setting the pageChange listner to the viewPager */
viewPager.setOnPageChangeListener(pageChangeListener);

/** Creating an instance of FragmentPagerAdapter */
fragmentPagerAdapter = new PhotoMugFragmentPagerAdapter(fm);

/** Setting the FragmentPagerAdapter object to the viewPager object */
viewPager.setAdapter(fragmentPagerAdapter); 
```

# mongodb - $all 对面的 mongodb 查询

> ID：12887579
> 
> 赞同：9
> 
> 时间：2012-10-14T23:36:00.930
> 
> 标签：mongodb

我正在尝试学习 MongoDB，到目前为止它非常棒。但是我遇到了一种情况，我不太确定如何解决它。希望有人可以帮助我，并提前感谢。

我想获取（整个）数组值在查询中的记录。例如：

**记录 1：**

```
{"name" : "Mango Shake", 
 "ingredients" : [{"type" : "fruit", "name" : "mango"},
                  {"type" : "milk", "name" : "soy milk"}]} 
```

**记录 2：**

```
{"name" : "Mango Banana Shake", 
 "ingredients" : [{"type" : "fruit", "name" : "mango"},
                  {"type" : "milk", "name" : "soy milk"},
                  {"type" : "fruit", "name" : "banana"}]} 
```

**记录 3：**

```
{"name" : "Milk Shake", 
 "ingredients" : [{"type" : "milk", "name" : "soy milk"}]} 
```

然后我会有一个类似的查询

```
{"ingredients" : {$all : [{"type" : "fruit", "name" : "mango"},
                          {"type" : "milk", "name" : "soy milk"},
                          {"type" : "fruit", "name" : "strawberry"}]}} 
```

因为我有**“芒果”**、**“豆浆”**和**“草莓”**。所以我想知道我可以做哪些奶昔。显然这不会返回任何东西，因为查询不能有额外的东西。如果我使用`$in`，那么一切都会回来，但我不能做芒果香蕉奶昔，因为我没有香蕉..

所以我只需要第一个和最后一个。任何想法？欣赏它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:05:02.970

如果您愿意，Map reduce 将起作用，或者您可以简单地使用 $and 并为每种成分使用一个条件：

[http://docs.mongodb.org/manual/reference/operator/and/](http://docs.mongodb.org/manual/reference/operator/and/)

我之前使用过 $and 来满足类似的查询需求。不幸的是，在这两种情况下，每次查询时都必须检查每个配方文档，如果您的集合变大，这将对性能产生严重影响。

使用关系数据库可能会更好地处理此问题。至少您应该考虑保留一个单独的可查询成分索引，该索引具有到使用它们的配方 ID 的映射。然后，您可以仅检索您拥有的成分并在代码中获取配方的交集。同样，由于这实际上是关系数据库可以为您做的事情，它可能只是这里更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:18:49.607

您可以使用[点符号](http://docs.mongodb.org/manual/reference/glossary/#term-dot-notation)来访问数组的特定元素并检查每个元素是否是`$in`您的可用成分列表，并且您可以构造一个`$and`查询来为正在查询的文档中的每个元素执行此操作，但当然*这不起作用*，因为您不这样做'不知道每个食谱的成分列表中有多少元素。

该问题的一种解决方案是向每个文档添加一个固定大小（可能是 3 个元素）的数组，将配方中的 n 个最不常见的成分放入其中，填充（必要时重复以填充数组）。现在您可以使用`$and`和`$in`针对该数组的每个元素进行查询。这将找到所有“可能”的食谱，并且由于您存储了最不常见的成分，它应该可以很好地过滤掉您无法制作的食谱。然后，您可以在客户端执行最终过滤器。

有时添加不同的数据表示形式可能是解决此类棘手查询问题的好方法，有时结合使用服务器和客户端过滤可能是合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:11:36.650

我想不出用 find 来做这件事的方法。但是您可以使用[mapReduce](http://www.mongodb.org/display/DOCS/MapReduce)来做到这一点。

您的 map 函数将迭代当前检查的文档的成分，并且仅在所有字段都是您拥有的成分时才发出它。您不需要为此使用 reduce 函数，因此发出值的键应该是饮料文档的 _id。

当键是唯一的时，绝不应该调用 reduce 函数（reduce 函数用于确定当为同一个键发出多个值时会发生什么）。我不认为你可以省略 reduce 函数，所以你应该编写一个只返回 values 数组的第一个元素的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T17:58:34.910

为了带来一些新的想法，如果你有一套已知的所有成分。例如，可能的成分只有 5 种：

```
["mango","soy milk", "strawberry", "banana", "pineapple"] 
```

你既没有香蕉也没有菠萝

一种选择是查询您没有的成分：

```
{"ingredients" : {$nin : [{"type" : "fruit", "name" : "banana"},
                          {"type" : "fruit", "name" : "pineapple"}]}} 
```

这将返回所有没有您没有的成分的文件，因此，包含您实际拥有的成分的收据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:53:45.647

您可以使用 javascript 函数作为查找参数。但是，我认为 MapReduce 总体上会是一个更优雅的解决方案，因为它具有可伸缩性，以及将用户输入插入到执行的代码中所带来的普遍不安。

这是将要构建的示例查询。基本上，它过滤项目的成分并检查过滤列表的长度是否与原始成分列表相同：

```
db.shakes.find(function() {

  // Implant your query JSON object here
  var query_obj = [{"type" : "fruit", "name" : "mango"},
                   {"type" : "milk", "name" : "soy milk"},
                   {"type" : "fruit", "name" : "strawberry"}];  
  return this.ingredients.filter(function(ingredient) {
    var has_ingredients = false;
    query_obj.forEach(function(query) {
      has_ingredients |= (query.type == ingredient.type && query.name == ingredient.name);
    });
    return has_ingredients;
  }).length === this.ingredients.length;
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-02T06:07:22.300

没有直接的方法可以做到这一点。您可以构建一个简单的 javascript 函数来解决您的查询，方法是查看每个文档并检查数组成分是否包含所有三种成分。

```
db.shakes.find().forEach(

function (shakes) {
    for (i = 0; i < shakes.ingredients.length; i++) {
        switch (shakes.ingredients[i].name) {
        case "banana":
            var count = 1;
        case "soy milk":
            count++;
        case "mango":
            count++;
        }
        if (count == 3) {
            print(shakes.name);
        }
    }
}
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-12T21:15:06.647

假设您[对使用`$where`operator](http://docs.mongodb.org/manual/reference/operator/query/where/#considerations)的注意事项没有意见，您可以将它与[Array.prototype.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)和[Array.prototype.every](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every)结合使用以获得所需的结果。

这看起来像是一个特定于 javascript 的解决方案，但事实并非如此。javascript 被直接注入到 Mongo (V8) 中。所有语言驱动程序都应该支持它。我至少知道[PHP 可以](http://ca3.php.net/manual/en/class.mongocode.php)。

您应该能够将此代码直接粘贴到[Mongo REPL](http://docs.mongodb.org/manual/tutorial/getting-started-with-the-mongo-shell/#executing-queries)中并获得您期望的结果（敲木头）。

如果您的奶昔数据库具有超出`$where`您所能提供的扩展的潜力，那么[聚合框架](http://docs.mongodb.org/manual/core/aggregation-pipeline/)就是您的朋友。

```
var query = {
    "$where": function() {
        var myIngredients = [
            {"type" : "fruit", "name" : "mango"},
            {"type" : "milk", "name" : "soy milk"},
            {"type" : "fruit", "name" : "strawberry"}
        ];
        return obj.ingredients.every(function(milkShakeIngredient){
            return myIngredients.some(function(myIngredient){
                return ( milkShakeIngredient.name === myIngredient.name &&  milkShakeIngredient.type === myIngredient.type );
            });
        });
    }
};

db.milkShakes.find(query); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-10T15:03:59.437

您可以为此使用聚合管道。

使用[$addFields 为当前](https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/index.html)的奶昔创建`missing`包含缺失成分的元素（[$setDifference](https://docs.mongodb.com/manual/reference/operator/aggregation/setDifference/index.html)将帮助您获取缺失的成分）。然后用[$match](https://docs.mongodb.com/manual/reference/operator/aggregation/match/)过滤掉所有没有缺失成分的奶昔。

查询示例：

```
db.getCollection('shakes').aggregate([
    {
        $addFields: {
            'missing': {
                $setDifference: [
                    "$ingredients",
                    [
                        {"type" : "fruit", "name" : "mango"},
                        {"type" : "milk", "name" : "soy milk"},
                        {"type" : "fruit", "name" : "strawberry"}
                    ]
                ]
            }
        }
    },
    { $match: {'missing': []} }
]) 
```

# git - 查找文件类型的所有 git 提交

> ID：12887580
> 
> 赞同：9
> 
> 时间：2012-10-14T23:36:12.777
> 
> 标签：git, posh-git

查找包含特定文件的所有提交非常简单。

```
git log -- .\Database\Tables\sometable.sql 
```

但是有没有一种简单的方法来查找文件类型的所有提交（递归地向下子目录？）或者我需要编写一个脚本来做到这一点？

（概念上...）

```
git log -- .\Database\*.sql --recursive 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T00:04:10.617

看来您可能只需要转义它，`*`以便它不会被命令行扩展。看来您在 Windows 上，所以......但我在 Linux 上并进行了如下测试：

```
git init
mkdir -p blue/red/green
touch blue/red/green/colors
git add blue/red/green/colors
git commit -m "colors and dirs"
touch blackAndWhite
git add blackAndWhite
git commit -m 'b&w'
git log -- \*ors 
```

最后的结果`git log`是：

```
commit 8fdb718b5b616dd495c00eb7a6d123c33f7707e5
Author: <snipped>
Date:   Sun Oct 14 19:49:43 2012 -0400

    colors and dirs 
```

在 Windows 转义`*`... 或许将其放在单引号或双引号中？如果我弄清楚了什么，我会添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T19:15:33.723

我想按类型查看我的存储库中所有用户的所有贡献。我找到了一个可以做到这一点的 Ruby 包`git fame`（[这里](https://github.com/oleander/git-fame-rb)）。如果你输入`git fame . --by-type`它会输出如下内容：

[![在此处输入图像描述](../Images/790325ea670d1426b3dc70e6445a5d0e.png)](https://i.stack.imgur.com/HYMo1.png)

# javascript - 如何从元素中删除可排序的 jQuery UI？

> ID：12887581
> 
> 赞同：13
> 
> 时间：2012-10-14T23:36:24.037
> 
> 标签：javascript, jquery, jquery-ui

我将可排序绑定到这样的元素：

```
$('#elem').sortable({
   items: 'li',
   placeholder: 'drop-highlight',
   forcePlaceholderSize: true,
   revert: true
}); 
```

在某个事件上，我不想再允许这个元素是可排序的。如何解绑？

所有这些都是单独尝试的，但都失败了（即 #elem 之后仍然可以排序）：

```
$('#elem').unbind('sort');
$('#elem').sortable('destroy');
$('#elem').sortable('option', 'sort', null); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T00:14:03.203

是的，它 su**s :-( 这会在 1 秒后删除功能*和*css 类/注入跨度（破坏似乎只是杀死小部件，而不是添加的类或标签）

```
$('#elem').sortable({
   items: 'li',
   placeholder: 'drop-highlight',
   forcePlaceholderSize: true,
   revert: true
}); 
```

当您需要“无法排序”列表时，将此代码放在处理程序中

```
function() {
    $("#elem").sortable("destroy"); //call widget-function destroy
    $("#elem li").removeClass('ui-state-default');
    $("#elem li span").remove();
} 
```

$("#elem").sortable("destroy"); *实际上*确实破坏了可排序功能，它只是忘记清理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-31T20:32:47.310

如果要禁用可排序，请尝试以下操作：

```
$("#elem").sortable("disable"); 
```

并启用回来

```
$("#elem").sortable("enable" ); 
```

# java - CGLib 代理和无空构造函数

> ID：12887586
> 
> 赞同：0
> 
> 时间：2012-10-14T23:37:28.950
> 
> 标签：java, spring, jakarta-ee, cglib

让我们考虑一下我有一些具有 B 类属性的 A 类。

```
public class ClassA{

private ClassB classB; 

public ClassA(ClassB classB){
 this.classB = classB;
}

 //some methods ommitted.
} 
```

不，我有 CGLIB 代理：

```
public class CGLibProxy  implements MethodInterceptor{

    @Override
    public Object intercept(Object object, Method method, Object[] args,
            MethodProxy methodProxy) throws Throwable {

    if (method.getName().startsWith("print")){
        System.out.println("We will not run any method started with print"); 
        return null;
    }
        else
        return methodProxy.invokeSuper(object, args);
    }
} 
```

现在，当我使用`CGLib`ClassA 时，代理会创建 ClassA 实例。

我的问题是如何将 classB 参数传递给这个代理，因为据我了解 CGLib 将为 ClassA 运行空构造函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T05:21:27.987

我没有看到任何关于如何包装类`ClassA`的代码示例，`CGLibProxy`但是如果您直接处理 cglib，那么您应该有一个实例，`net.sf.cglib.proxy.Enhancer`在这种情况下您可以提供构造函数 args，如下所示。

```
import net.sf.cglib.proxy.Enhancer;

public class CGLibProxyMain {

    public static void main(String[] args) {
        Enhancer enhancer = new Enhancer();
        enhancer.setSuperclass(ClassA.class);
        enhancer.setCallback(new CGLibProxy());
        ClassA a = (ClassA) enhancer.create(new Class[] {ClassB.class}, new Object[] {new ClassB()});
        System.out.println(a.printB());;
        System.out.println(a.otherMethod());
    }
} 
```

# c# - 停止 SoundPlayer 播放

> ID：12887589
> 
> 赞同：4
> 
> 时间：2012-10-14T23:37:54.860
> 
> 标签：c#, winforms

我正在尝试创建自己的小音板来播放 WAV 文件。现在播放不是问题，但如果需要，我想要一种停止播放的方法。我想到了一个停止按钮，但不知道如何使它起作用。所以我想到了使用循环，但它似乎不起作用。只是想知道是否有人可以帮助我在哪里出错，或者这只是一种失败的方法，那么如果你能告诉我一个更好的方法，那就太好了。:)

```
 private void button1Sound(object sender, MouseEventArgs e)
    {
        int i = 0;
        SoundPlayer simpleSound = new SoundPlayer(@"file.wav");

        while (i == 0)
        {
            simpleSound.Play();
            i++;
        }

        if (i >= 1)
        {
            simpleSound.Stop();
        }
    } 
```

我也想过只做一个 ELSE IF 但这也没有用。我试过了：

```
 private void button1Sound(object sender, MouseEventArgs e)
    {
        int i = 0;
        SoundPlayer simpleSound = new SoundPlayer(@"file.wav");

        if (i == 0)
        {
            simpleSound.Play();
            i++;
        }
        else if (i > 1)
        {
            simpleSound.Stop();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:13:30.663

因为您已`int i = 0`在 void 内添加，所以每次调用事件时，`i`将始终为**0**。所以最好包括`i`在虚空之外。

```
 int i = 0;
 SoundPlayer simpleSound = new SoundPlayer(@"file.wav"); //Thanks to @Wanabrutbeer

 private void button1Sound(object sender, MouseEventArgs e)
    {

        if (i == 0)
        {
            simpleSound.Play();
            i++;
        }

       else if (i >= 1)
        {
            simpleSound.Stop();
            i--;
        }
    } 
```

**注意**：该课程`SoundPlayer`仅播放**.wav**文件。如果您想播放其他媒体文件，如**.mp3、.mpeg 等...**请`MediaPlayer`改用。

谢谢，

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T00:06:18.870

编辑 - 编辑代码片段以显示异步加载的使用

试试这个代码：

```
private System.Media.SoundPlayer sound;
private bool isPlaying = false;
private System.Drawing.Image playimage = System.Drawing.Image.FromFile(@"playimage");
private System.Drawing.Image stopimage = System.Drawing.Image.FromFile(@"stopimage");

private void playstopbutton_Click(object sender, EventArgs e)
{
    Button btn = (sender as Button);
    if (isPlaying)
    {
        sound.Stop();
        isPlaying = false;
        btn.Text = "Play";
        btn.Image = playimage;
    }
    else if (sound.IsLoadCompleted)
    {
        sound.Play();
        isPlaying = true;
        btn.Text = "Stop";
        btn.Image = stopimage;
    }
    else
    {
        btn.Enabled = false;
        if (sound == null) sound = new System.Media.SoundPlayer(@"wavefile");
        sound.LoadCompleted += new AsyncCompletedEventHandler(sound_LoadCompleted);
        sound.LoadAsync();
    }
}

private void sound_LoadCompleted(object sender, AsyncCompletedEventArgs e)
{
    this.playstopbutton.Text = "Stop";
    this.playstopbutton.Image = playimage;
    this.playstopbutton.Enabled = true;
    isPlaying = true;
    sound.Play();
} 
```

您可能遇到的问题是您的声音范围仅在方法内部，它需要是类范围，以便每次处理相同的实例声音。从技术上讲，如果您在点击处理程序之外声明 SoundPlayer，您使用的 int 方法应该可以工作。此外，您用于跟踪播放状态的任何变量都需要存在于处理程序方法之外，以便该值在每个单击操作上都保持不变。

# azure - azure 媒体服务是否包括可播放服务器

> ID：12887590
> 
> 赞同：3
> 
> 时间：2012-10-14T23:37:59.147
> 
> 标签：azure, playready, windows-media-services

我正在考虑使用 azure 媒体服务托管受 DRM 保护的内容。媒体服务图中指出，您可以上传、加密和播放受 DRM 保护的内容，但它没有明确说明可播放服务器的位置？

我一直在寻找可能托管我自己的 playready 服务器，但许可证成本为 3 万美元！有替代品吗？

我需要流式传输到 silverlight 播放器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T05:54:39.077

否。Azure 媒体服务不包括 PlayReady 服务器。但是，它包括使用 PlayReady 服务器保护内容的可能性。出于开发/测试目的，您可以使用[Microsoft PlayReady 测试服务器](http://playready.directtaps.net/)。

如果您想试一试，可以下载[WaMediaWeb](https://github.com/astaykov/WaMediaWeb)演示项目。它包括 PlayReady 编码演示。只需阅读自述文件，因为列出了一些要点（主要是转换的流程）。

**更新（2014 年 11 月）**

请注意，最初的问题和答案是在 2012 年！！！当微软没有提供 PlayReady 服务时！

Azure 媒体服务**现在**支持将 PlayReady 作为服务。以及简单的 AES 加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T18:10:19.760

媒体服务正在发布 PlayReady 作为一项服务，请在此处查看公告：http: [//mingfeiy.com/playready](http://mingfeiy.com/playready)。我们的服务刚刚达到 GA：[http](http://azure.microsoft.com/blog/2015/01/29/azure-media-services-enhances-streaming-security-with-general-availability-of-drm-technology/) ://azure.microsoft.com/blog/2015/01/29/azure-media-services-enhances-streaming-security-with-general-availability-of-drm-technology/ 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T17:36:44.327

Windows Azure 媒体服务现在将 EzDRM 作为 Azure 商店合作伙伴： [http ://www.windowsazure.com/en-us/store/service/?id=f06b5541-00c3-415e-b195-e951127b6e9e](http://www.windowsazure.com/en-us/store/service/?id=f06b5541-00c3-415e-b195-e951127b6e9e)

您还可以使用 BuyDRM 等商业服务：

[http://buydrm.com/](http://buydrm.com/)

第一方 DRM 服务器正在 Windows Azure 媒体服务的路线图中，请继续关注社区门户：

[http://www.windowsazure.com/en-us/develop/media-services/](http://www.windowsazure.com/en-us/develop/media-services/)

和论坛：

[http://social.msdn.microsoft.com/Forums/en-US/MediaServices/threads](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/threads)

对于公告。

# curl - 我想使用 curl 内容抓取特定的数据点

> ID：12887591
> 
> 赞同：1
> 
> 时间：2012-10-14T23:38:03.027
> 
> 标签：curl

我正在尝试获取网站上的特定数据以在我的网站上回显（绝对收益）。有问题的网页是：[http](http://www.myfxbook.com/members/berezhnoi/my-investors-account-1/202250) ://www.myfxbook.com/members/berezhnoi/my-investors-account-1/202250 ，我希望将绝对收益转移到我的网站上，而不会产生其他结果。

我正在使用下面的代码，它非常适合显示整个网站，但我只想要在 Abs 之间用源代码标记的一个数字。增益：和 /li> 目前为 22%。

```
<?php
  $curl = curl_init();
  $url = 'http://www.myfxbook.com/members/berezhnoi/my-investors-account-1/202250';
  curl_setopt($curl, CURLOPT_URL, $url);

  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
  $result = curl_exec($curl);
  echo $result; 
```

?>

显然，这些数据每天都在变化。很乐意提供任何帮助。

# android - OnDragListener - 是否有一些适用于 Android 级别 < 11 的兼容性库？

> ID：12887594
> 
> 赞同：6
> 
> 时间：2012-10-14T23:38:11.787
> 
> 标签：android, drag-and-drop

我有一个使用`OnDragListener`.

由于这仅在 API 级别 11 中引入，因此我正在寻找一个支持此功能的较低级别的库（类似于片段的 ActionBarSherlock）。

有没有类似的东西可以帮助使应用程序与低于 Android 11 的版本兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:01:10.277

...我发现的最简单的解决方案是实现双面连接逻辑。所以按下目的地然后选择目标，反之亦然 - 我什至可以使用很多拖动代码，而不是拖动本身......

# iphone - 如何使用 MonoTouch 实现类似于照片应用的 UI

> ID：12887596
> 
> 赞同：1
> 
> 时间：2012-10-14T23:38:14.627
> 
> 标签：iphone, ios, xamarin.ios, monotouch.dialog

我正在寻找类似于照片应用程序的用户界面。第一个屏幕将是“专辑”列表（UITableView），当单击专辑时，您将进入一个充满缩略图的 UI，您可以触摸其中的一个，然后在它们之间来回滑动。再次，与照片应用程序相同的功能。我更喜欢尽可能多地使用 MonoTouch.Dialog。

我最难弄清楚的部分是带有缩略图的 UI。我想一旦你触摸了一张图片，你就会在 UIScrollView 中，但是有一个导航可以让你回到带有所有缩略图的 UI 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T19:46:34.980

如果您使用的是 iOS 6，我会查看 UICollectionView。它旨在用于您所描述的场景。

我建议观看[WWDC 会议 205 和 219](https://developer.apple.com/videos/wwdc/2012/)

如果您仍在寻找选项，GitHub 上有一个支持 iOS 4.3+ 的开源解决方案。我实际上并没有使用过它，但它看起来与 UICollectionView 的工作方式类似。我不确定是否有 MonoTouch 端口或包装器，但做起来应该不会太难。

[PSTCollectionView](https://github.com/steipete/PSTCollectionView)

祝你好运！

# c - 如何在另一行之前打印这一行？

> ID：12887597
> 
> 赞同：0
> 
> 时间：2012-10-14T23:39:01.443
> 
> 标签：c, loops, printf

```
#include <stdio.h>
#include <math.h>

int main(void)
{
///-------------------------------------------------------------------------------------------------------------------------------///
/// Initializes necessary variables. Description of each variable provided.
        int a, b, c; // Sides of triangle
        int N; // User-defined integer, where c<N
        int k=0; // Counter necessary for 'if loop'
        int thinA=0, thinB=0, thinC=0; // Memory for sides of 'thinnest' triangle
        double totalAngle = 180; // Sum of interior angles in a triangle
///-------------------------------------------------------------------------------------------------------------------------------///
/// Introduction
        printf("This program prints out all Pythagorean triples as (a,b,c) when given a positive integer, N, where c<N. \n\nThis program will also print out the number of triples and the 'thinnest' \n triangle in this range.\n\n");
///-------------------------------------------------------------------------------------------------------------------------------///
/// Requests user input for variable N. The program will then find all pythagorean triples that have side lengths less than N.
        printf("Enter a positive integer: ");
        scanf("%d", &N);
///-------------------------------------------------------------------------------------------------------------------------------///
/// Initilizes computing of side lengths, using several 'if' loops embedded within one another
        // Side A
        for (a=1; a<N; a++)
        {
            // Side B
            for (b=1; b<N; b++)
            {
                // Side C
                for(c=1; c<N; c++)
                {
                    // Validation of a right angle triangle. Also validates that side A is less than side B so no triangle is listed twice
                    if (a*a + b*b == c*c && a < b)
                    {
                        // Prints out listed side lengths of every acceptable triangle. Also increments counter for proper print statements at end
                        printf("\n(%d %d %d)", a, b, c);
                        k++;
///-------------------------------------------------------------------------------------------------------------------------------///
/// Determination of thinnest triangle
                        if (atan(a*1.0/b) < totalAngle)
                        {
                            totalAngle = atan(a*1.0/b);
                            thinA = a;
                            thinB = b;
                            thinC = c;
                        }
                    }
                }
            }
        }
///-------------------------------------------------------------------------------------------------------------------------------///
/// Results
        // If the counter incremented (that is, a triangle was found to exist where c<N), then it will print the amount of triangles found.
        // If not, it will state that no triangles were found.
        if (k > 0)
        {
            printf("\n\nThere are %d Pythagorean triples in this range.\n", k);
            printf("\nThe thinnest right-angle triangle is formed by (%d %d %d).\n\n", thinA, thinB, thinC);

        }
        else
            printf("\nThere are no pythagorean triples.\n\n");
///-------------------------------------------------------------------------------------------------------------------------------///
/// END OF SCRIPT
///-------------------------------------------------------------------------------------------------------------------------------///
    return 0;
} 
```

晚上所有。我的代码接受用户定义的 int 变量 N 并输出范围 (0,N) 内的每个毕达哥拉斯三元组。假设我输入 N 作为 12，将打印以下内容：

```
Enter a positive integer: 12
(3 4 5) 
(6 8 10)
There are 2 Pythagorean triples in this range.
The thinnest right-angle triangle is formed by (3 4 5). 
```

需要做哪些调整才能使打印顺序变成这样？

```
Enter a positive integer: 12 
There are 2 Pythagorean triples in this range.
(3 4 5)
(6 8 10)
The thinnest right-angle triangle is formed by (3 4 5). 
```

再次欢呼和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:00:49.187

我看到了几种可能性，哪一种最好取决于 - 通常 - 取决于程序的其他方面：

到目前为止最简单的实现是首先计算 k，打印出数字，然后重做循环以打印出结果，像这样

```
 // pass 1: determine k
    for (a=1; a<N; a++)
    {
        // Side B
        for (b=1; b<N; b++)
        {
            // Side C
            for(c=1; c<N; c++)
            {
                // Validation of a right angle triangle. Also validates that side A is less than side B so no triangle is listed twice
                if (a*a + b*b == c*c && a < b)
                {
                    k++;
                }
            }
        }
   }
   if (k > 0) {
       printf("There are %d Pythagorean triples in this range.\n", k);
   } else {
       printf("There are no pythagorean triples.\n\n");
       // we're done
       return 0;
   }
   // pass 2 - print out the triples found and the thinnest
    for (a=1; a<N; a++)
    {
        // Side B
        for (b=1; b<N; b++)
        {
            // Side C
            for(c=1; c<N; c++)
            {
                // Validation of a right angle triangle. Also validates that side A is less than side B so no triangle is listed twice
                if (a*a + b*b == c*c && a < b)
                {
                    printf("(%d %d %d)\n", a, b, c);
                    if (atan(a*1.0/b) < totalAngle)
                    {
                        totalAngle = atan(a*1.0/b);
                        thinA = a;
                        thinB = b;
                        thinC = c;
                    }
                }
            }
        }
    }
    if (k > 0)
    {
        printf("The thinnest right-angle triangle is formed by (%d %d %d).\n\n", thinA, thinB, thinC);

    } 
```

这种方法的优点是不需要缓冲任何东西，不涉及动态内存的分配，因此非常简单，但当然计算会进行两次，在现实生活中可能无法接受。另请注意，在大多数情况下，将 at 放在 printf 的末尾要容易`\n`得多，正如 Basile 已经指出的那样。

第一种选择是`sprintf`将结果字符串 strcat 到一个 char[] 变量中，该变量保证足够大以包含连接结果字符串的最大长度。这样你只执行一次计算，但随着 N 的增长，内存结构可能会增长到很大的比例。虽然简单，但这种方法仅适用于相当小的 N 值。

第三种选择是将各个结果字符串存储在链表中，每次找到结果时分配一个节点。将它们打印出来只是遍历链表，打印出每个节点。这是最有效和最优雅的解决方案，它避免了以前解决方案的缺点，但代价是需要相当多的额外代码来实现链表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:44:38.580

不要使用线路

```
 printf("\n(%d %d %d)", a, b, c); 
```

在这一行中，将值存储在字符串类型的变量中。在这两条线之后

```
 printf("\n\nThere are %d Pythagorean triples in this range.\n", k);
    printf("\nThe thinnest right-angle triangle is formed by (%d %d %d).\n\n", thinA, thinB, thinC); 
```

添加更多 printf 来打印创建的字符串变量。

# javascript - 通过在元素外部单击来关闭或隐藏多个帧

> ID：12887600
> 
> 赞同：0
> 
> 时间：2012-10-14T23:39:39.127
> 
> 标签：javascript, html

我有框架，我想通过单击“弹出框架”外部来关闭或隐藏它们。以下代码显示了该元素。

```
<span class="frame" id="mapframe">
   <iframe src="link" frameborder="0" width="520" height="470">
   </iframe>
</span> 
```

上面的代码是我试图关闭框架的方式：

```
$(document).bind('click', function(e){ 
      var $clicked = $(e.target); 
      if (!($clicked.is('#mapframe') || $clicked.parents().is('#mapframe'))) { 
         $("#mapframe").hide();
      }
}); 
```

仅打开一帧时它可以工作，但如果有两个以上的帧，它不会关闭所有帧。当外面有点击时，它应该关闭最后一帧。看起来有一堆框架，我想在每次点击外部时弹出堆栈:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:46:25.980

要关闭所有框架，请尝试按类而不是 id 选择。Id 用于一个选择器，类将关闭它们。

```
$('.frame').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:47:53.493

使用框架类而不是 ID 将它们全部关闭。$('.frame').close() 会这样做。如果您需要保持一个打开，就像用户可能单击的那样，在其他关闭后使用 this 关键字打开它。

# php - php下载word文档出错

> ID：12887606
> 
> 赞同：0
> 
> 时间：2012-10-14T23:40:50.267
> 
> 标签：php, ms-word, mime-types, content-disposition

我有一个 Word 文档，希望用户从网站上的链接下载。

该代码在我的 localhost 上运行良好。但是，当我在服务器上上传网站时，它并没有提供保存在本地机器上的选项，而是在浏览器本身中打开。下面是我的代码：

```
// Define the path to file

    $file = <filepath>;
    if(!file_exists($file))
    {
        die('Hard Copy does not exist on Server at the moment . Sorry for the inconvinience');
    }
    else
    {

    // required for IE, otherwise Content-Disposition may be ignored
        if(ini_get('zlib.output_compression'))
        ini_set('zlib.output_compression', 'Off');
        ob_clean();
        // Set headers
        header("Cache-Control: private");
        header("Content-Description: File Transfer");
        header("Content-Disposition: attachment; filename=$file");
        header("Content-Type: application/msword");
        header("Content-Transfer-Encoding: binary");

        readfile($file);
    } 
```

现在，据我了解，如果我将 Content-Disposition 作为附件提供，它应该会提示保存文件。

此外，我在 .htaccess 文件中添加了“AddType msword .doc”。它仍然给出相同的结果。

是否需要在服务器上进行任何其他设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:42:58.223

基于此：[如何防止 Internet Explorer 中的缓存](http://support.microsoft.com/kb/234067)我建议您添加以下内容

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT\n");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header(sprintf("Content-Length: %d;\n"),filesize($file)); 
```

您还可以添加

```
header("Pragma: no-cache");
header("Cache-Control: no-cache, must-revalidate"); 
```

除此之外..您的代码从这里可以正常工作：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:46:56.327

尝试添加：

```
header('Expires: 0');
header('Content-Length: ' . filesize($file));
header('Content-Type: application/octet-stream'); 
```

**编辑**

但是，它可以按照您的代码在我的两个不同的测试服务器上运行，所以我认为这是一个服务器配置问题，而不是 PHP 代码级别的问题。

# jquery - 转到#页面顶部

> ID：12887607
> 
> 赞同：0
> 
> 时间：2012-10-14T23:40:52.597
> 
> 标签：jquery

每次有人单击导航按钮时，我都试图让 jquery 移动到页面顶部。

当一些人点击按钮时，它会隐藏旧内容并显示新内容，但不会重置浏览器滚动位置，因此最终用户会有点困惑。

所以我想添加一些`window.location.hash`JS 命令来解决这个问题，但这仅在第一次执行时有效。

我的代码：

```
$(文档).ready(函数(){
    $("#prac-btn").click(function() {
        $('#myTab a[href="#prac-page"]').tab('show');
        window.location.hash = "#top";
    });
    $("#act-btn").click(function() {
        $('#myTab a[href="#act-page"]').tab('show');
        window.location.hash = "#top";
    });
    $("#pro-btn").click(function() {
        $('#myTab a[href="#pro-page"]').tab('show');
        window.location.hash = "#top";
    });
});

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:44:26.077

如果你想操纵滚动位置，直接这样做：

```
window.scrollTo(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:47:11.670

你想要滚动顶部：

```
$(window).animate({scrollTop:0}); 
```

这是执行此操作的 JQuery 方式。

# c - 如何使用 write() 将结构写入文件

> ID：12887608
> 
> 赞同：1
> 
> 时间：2012-10-14T23:40:53.450
> 
> 标签：c

1) 我有一个结构，需要使用 write() 系统调用而不是 fwrite() 将其写入文件。这可能吗？

2）将结构写入文件后，我需要读取另一个文件，并将其写入现在写入结构的文件末尾。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:44:31.617

这会将您的结构写入文件。

```
int fd = open(file, O_WRONLY);
struct my_struct a;

write(output, &a, sizeof(struct my_struct)); 
```

对于另一个文件，只需打开它，循环读取它的内容，然后将其写入前一个文件。

```
int fd2 = open(otherfile, O_RDONLY);
int readret;
char buf[4096];

while ((readret = read(fd2, buf, sizeof(buf) != 0) {
  write(fd, buf, readret); 
} 
```

请记住测试每个写入/读取结果（如评论中所述），并处理这些错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:47:31.650

如果您正在谈论用二进制编写结构，那么是的。K&R 中描述的函数用法是：

```
int n_written = write( int fd, char *buf, int n ); 
```

所以你会有：

```
struct mystruct s;
write( fd, (char*)&s, sizeof(s) ); 
```

如果您希望以文本形式序列化结构，您将需要使用`sprintf`或类似方法来构造格式化字符串，然后将其写入文件。

现在，您想读入另一个文件并将其写入您刚刚将结构转储到的文件中。只需使用`read`and`write`一次移动数据块。一个合理的做法是移动磁盘扇区大小的倍数（传统上为 512 字节，但现在您可能希望使用 4096 之类的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T23:45:31.210

假设你已经声明

```
struct somestruct_st mydata; 
```

你可以用

```
ssize_t cnt = write (yourfd, &mydata, sizeof(mydata));
if (cnt != sizeof(mydata)) {
   // handle that case
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:48:42.793

write 和 fwrite 的工作方式相同，唯一的区别是 write 使用文件解列符 (fd)，其中 fwrite 使用 FILE *

# git - Git：将一系列本地提交合并到子树分支

> ID：12887609
> 
> 赞同：0
> 
> 时间：2012-10-14T23:41:22.373
> 
> 标签：git, subtree

我对本地存储库中的上游项目进行了一些更改。我最初将上游仓库复制到我的本地项目中。现在我想获取一系列提交并将其应用于上游存储库。我可以用补丁来做到这一点，但我想知道是否可以使用子树合并来做到这一点。

所以，更具体地说：

```
# project structure
root
  projectB
  ...

# history
HEAD
C
B
A 
```

如果我将 projectB 的 repo 添加为远程，签出它的一个分支，我如何将更改 B 和 A 合并到这个分支中，在我的主 repo 中留下其他更改，最后将分支推回 projectB 的远程？

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:20:45.753

子树拆分应该做你想做的事。

```
git subtree split --prefix=projectB --rejoin --branch=project-B-split 
```

将创建一个名为 project-B-split 的新分支，其中包含仅影响 projectB 内文件的提交。这应该有利于推动项目B的主人 - 在一些合适的变基之后并且（可能）正如帕特里克在评论中建议的那样，如果你没有一个干净的副本，一些樱桃采摘。这取决于您最初是如何获得 projectB 源的 - 特别是您是否将其历史记录带入您的存储库。

# android - 渲染器显示错误

> ID：12887613
> 
> 赞同：2
> 
> 时间：2012-10-14T23:41:48.857
> 
> 标签：android

我在 opengl es 1.0 中应用了纹理旋转立方体。在将其转换为动态壁纸时，我已经实现了 Wallpaperservice 和所有必需品。

但是当我调用我的渲染器类时，它显示一个错误“添加参数以匹配渲染器（上下文）”所以基本上在调用中我正在使用代码

```
class MyEngine extends GLEngine {
    BcRenderer renderer;
    public MyEngine() {
        super();
        // handle prefs, other initialization
        renderer = new BcRenderer();
        setRenderMode(RENDERMODE_CONTINUOUSLY);
    }
} 
```

在 BcRenderer 类中我使用上下文。那么如何消除该错误呢？帮帮我（我已经按照 robert green 的 opengles 1.0 Live wapaper 的代码）

# python - 使用 Tweepy 根据语言过滤推文

> ID：12887616
> 
> 赞同：0
> 
> 时间：2012-10-14T23:41:55.793
> 
> 标签：python, twitter, tweepy

我正在使用 tweepy 为一个项目流式传输和捕获有关名人的推文，并意识到一半的数据不是英文的（我现在需要它是英文的以便分析）。那么有没有一种方法可以根据推文的语言过滤流媒体，或者以某种方式放大类似的过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:27:27.270

不幸的是，流数据不包含 ISO 语言代码，所以我认为唯一的方法是直接检测语言（[这个答案](https://stackoverflow.com/questions/2024934/is-there-a-python-library-class-that-can-take-a-piece-of-text-and-determine-the)可能会有所帮助）。根据您正在流式传输的数据量，您可能希望先存储数据，然后再进行第二个过程来检测语言并丢弃所有您不想要的语言。

# iphone - 设置 UITableView 的样式

> ID：12887621
> 
> 赞同：0
> 
> 时间：2012-10-14T23:43:02.700
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个 UITableView 类，我在另一个类中调用

```
 MyPocketTableView * myPocketTableView = [[MyPocketTableView alloc]initWithFrame:CGRectMake(85, 153, 235, 250) style:UITableViewStyleGrouped]; 
```

但是，UITableViewClass 中的 init 方法不允许我这样做。

```
@implementation MyPocketTableView

- (id) initWithFrame:(CGRect)frame style:(UITableViewStyle)style {
    self = [super initWithFrame:frame];
    self = [super initWithStyle:style]

    if (self) {

        //[self setFrame:CGRectMake(85, 153, 235, 250)];
        self.dataSource = self;
        self.delegate = self;

    }
    return self;
} 
```

我不能在 init 方法定义中添加 style : (UITableViewStyle) style，我也不能这样做，`self = [super initWithStyle:style]`因为它抱怨说

> 'UITableView' 没有可见的@interface 声明选择器 initWithStyle。

创建类时存在的默认 init 方法是`- (id) initWithFrame:(CGRect)frame`. MyPocketTableView 是 UITableView 的子类。

```
 @interface MyPocketTableView : UITableView <UITableViewDataSource,UITableViewDelegate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:49:30.350

您需要将接口设置为**`UITableViewController`**，然后使用`initWithStyle:`。

此外，在执行以下操作时，无需设置 UITableView 协议委托

```
@interface MyPocketTableView : UITableViewController 
```

然后你可以调用：

```
MyPocketTableView * myPocketTableView = [[MyPocketTableView alloc] initWithStyle:UITableViewStyleGrouped]; 
```

以及以下内容：

```
- (id) initWithStyle:(UITableViewStyle)style 
{
    self = [super initWithStyle:style];
    if (self) {
        [self setFrame:CGRectMake(85, 153, 235, 250)];
    }
    return self;
} 
```

您还可以使用以下*（示例）*自定义方法：您正在调用的键：

> **`self = [super initWithStyle:UITableViewStyleGrouped];`**

```
- (id) initWithSomeCustomMessage:(NSString*)message
{
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        [self setFrame:CGRectMake(85, 153, 235, 250)];
        self.customMessage = message;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:38:22.910

1.  您需要将 ViewController 中的 MyPocketTableView 设置为

    ```
    MyPocketTableView * myPocketTableView = [[MyPocketTableView alloc] initWithStyle:UITableViewStyleGrouped]; 
    ```

2.  之后，在 MyPocketViewcontroller 中使用以下代码

    ```
    - (id) initWithStyle:(UITableViewStyle)style 
    {
            self = [super initWithStyle:style];
            if (self) {
                    [self setFrame:CGRectMake(85, 153, 235, 250)];
             }
            return self;
    } 
    ```

3.  不要忘记在 MyPocketViewController 类中添加 UITableView 委托和数据源

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T00:21:24.900

您正在设置“自我”两次。这将导致“self”被覆盖。

```
self = [super initWithFrame:frame];
self = [super initWithStyle:style]; 
```

为了维护“初始化链”，您需要调用与您所在的相同的“初始化”函数。像这样：

```
- (id) initWithFrame:(CGRect)frame style:(UITableViewStyle) style {

    self = [super initWithFrame:frame style:style];
    if(self) {

        self.dataSource = self;
        self.delegate = self;

    }
    return self;

} 
```

# collections - Backbonejs 附加集合属性

> ID：12887622
> 
> 赞同：0
> 
> 时间：2012-10-14T23:43:10.807
> 
> 标签：collections, backbone.js

在backbone.js 中，是否可以向集合添加附加属性？我有一个附加的模型，但需要为所有模型实体定义一个公共属性，我自然会看到它最好位于集合级别。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:46:46.330

这是javascript，一切皆有可能！您可以将任何东西附加到集合的构造函数、集合的原型、集合的具体实例。模型也是如此。

```
// #1
var YourCollection = Backbone.Collection.extend({}, {sharedAttribute : 1});
var collection = new YourCollection();
console.log(collection.constructor.sharedAttribute); // 1

// #2
var YourCollection = Backbone.Collection.extend();
YourCollection.sharedAttribute = 2;
var collection = new YourCollection();
console.log(collection.constructor.sharedAttribute); // 2

// #3
var YourCollection = Backbone.Collection.extend();
YourCollection.prototype.sharedAttribute = 3;
var collection = new YourCollection();
console.log(collection.sharedAttribute); // 3

// #4
var YourCollection = Backbone.Collection.extend();
var collection = new YourCollection();
collection.sharedAttribute = 4;
console.log(collection.sharedAttribute); // 4 
```

# c++ - c++中的模板比较函数

> ID：12887626
> 
> 赞同：1
> 
> 时间：2012-10-14T23:44:15.537
> 
> 标签：c++, templates

我有以下比较函数，我将其传递给`std::sort`算法以对对象向量进行排序：

```
template <typename PointT>
bool myCompareLines (A<PointT>::model_struct model_a, A<PointT>::model_struct model_b) {
    return (/* some comparison code*/);
} 
```

比较函数在类外部声明，我这样称呼它：

```
template <typename PointT>
class B {
    [...]
    std::sort(lines.begin().lines.end(),::myCompareLines);
    [...]
} 
```

当我编译我得到错误：`template declaration of 'bool myCompareLines'`

在里面`class A`我声明`class B`为一个朋友类，以便`class B`可以访问私有类型`model_struct`。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:09:01.057

虽然丑陋，*但这*就是你要找的吗？注意：编译不等于好。即使这对您有用，我也会建议另一种声明层次结构的方法。

```
template<class PointT>
class A
{
public:
    A() {};

    struct model_stuct
    {
        // need something to use in comparison, so i just threw this in.
        int value;
    };
};

// comparitor
template<class PointT>
bool compareLines(
    const typename A<PointT>::model_stuct& left,
    const typename A<PointT>::model_stuct& right)
{
    return left.value < right.value;
}

template<class PointT>
class B
{
public:
    B() : lines() {};

    void sort()
    {
        std::sort(lines.begin(), lines.end(), compareLines<PointT>);
    }

    std::vector<typename A<PointT>::model_stuct> lines;
};

// main entrypoint
int main(int argc, char *argv[])
{
    // this does nothing, but demonstrate that it can compile and
    //  sort() doesn't puke. 
    B<int> bInt;
    bInt.sort();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T01:51:04.740

我的 CompareLines 签名中缺少 typename 关键字。

这修复了它：

```
bool myCompareLines (typename A<PointT>::model_struct model_a, typename B<PointT>::model_struct model_b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T23:52:27.740

你不应该这样做：

```
template <typename PointT>
class B {
    [...]
    std::sort(lines.begin(), lines.end(), ::myCompareLines<PointT>);
    [...]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:50:31.553

编译器无法`PointT`从内部类推导出模板参数`A<PointT>::model_struct`。

它不能因为许多专业化`A<PointT>`可以具有相同的`model_struct`- 比如：

```
template <class PointT>
class A {
public:
  typedef int model_struct;
}; 
```

用这个例子：

```
 int a;
   bool res = compareLines(a,a); 
```

定义`model_struct`为顶级模板。

# sorting - 插入排序与冒泡排序与选择排序的效率？

> ID：12887629
> 
> 赞同：0
> 
> 时间：2012-10-14T23:44:35.820
> 
> 标签：sorting, selection, bubble-sort, insertion-sort

我已经写下插入排序比选择排序快，选择排序比冒泡排序快，并且它们所有 3 的运行时间都是 O(n^2)，但是我能说些什么来比较它们呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T00:18:06.080

您可以将排序算法与以下标准进行比较：

1.  时间复杂度（Big-O 表示法）。您应该注意，最佳情况、最坏情况和平均运行时间可能具有不同的时间复杂度。例如，冒泡排序的最佳情况只有 O(n)，当原始列表大部分是有序的（没有多少元素不合适）时，它比选择排序更快。
2.  记忆复杂度。随着 n 的增长，对列表进行排序需要多少内存？
3.  稳定。排序是否保留具有等效排序值的元素的相对排序？（例如，如果您按价格对目录项目列表进行排序，则某些元素可能具有相同的价格。如果目录最初是按项目名称的字母顺序排序的，则所选排序算法是否会保留每组等价的字母顺序项目。）
4.  所需的最佳/最差/平均比较次数。当比较操作很昂贵时很重要。（例如：比较通过一些模拟或其他复杂计算计算效率的替代设计的效率）。
5.  所需的最佳/最差/平均交换操作数。当交换操作很昂贵时很重要。（例如：对必须在船甲板上物理移动的集装箱进行分类）
6.  代码大小。冒泡排序以其小的代码足迹而闻名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T09:47:38.423

有几种方法可以看到插入/选择/冒泡排序都在 n^2 时间内运行。

*   他们使用嵌套循环：n 个外循环，每个循环平均有 n/2 个内循环
*   他们比较所有元素对：有 n*(n-1)/2 对

[下面是对插入/选择/冒泡排序](http://theoryapp.com/selection-insertion-and-bubble-sort/)运行的一些详细分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-10T23:01:10.250

冒泡排序的优势在于检测已排序列表的速度：

BubbleSort 最佳案例场景：O(n)

然而，即使在这种情况下，插入排序也得到了更好/相同的性能。

冒泡排序或多或少只有助于理解和/或教授排序算法的机制，但现在在编程中找不到合适的用法，因为它的复杂性

O(n²)

**意味着它的效率在超过少量元素的列表上急剧下降。**

# java - 递归搜索设置目录中提供的值

> ID：12887631
> 
> 赞同：0
> 
> 时间：2012-10-14T23:44:44.697
> 
> 标签：java, user-interface, search, directory

我试图在`C:\`当前硬编码的目录中找到一个字符串。在这个`C:\`目录中，我希望在根/和子目录中递归地找到输入的字符串（inputString），最后输出包含这些字符串的文件的名称。

我希望以上内容能澄清我最初的问题

我目前有**评估.java**：

```
import javax.swing.JFrame;

/* Notes: Event - user clicking button, moving mouse
 *  EventHandler - code that response to users action
 * 
 */

class assess {
    public static void main(String args[]){

        assesshelper assessment1 = new assesshelper();
        assessment1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        assessment1.setSize(500,500); // set size of window
        assessment1.setVisible(true);
    }
} 
```

和 **assesshelper.java**

```
import java.awt.FlowLayout; // orientation of screen
import javax.swing.JFrame; // JFrame all basic windows features (min/maximize), title
import javax.swing.JTextField; // Typing text
import javax.swing.JLabel; // output text / images

public class assesshelper extends JFrame {

    private JLabel item1;

    private JTextField theUrl;

    public assesshelper(){ // anything within assesshelper is within window
        super("Assess"); // title of window
        setLayout(new FlowLayout()); // gives us default label

        //item1
        item1 = new JLabel("Welcome!");
        add(item1); // add item1 to the screen

        String setDir = "C:/";
        JTextField inputString = new JTextField();

        inputString.setText("ENTER DIR TO PROCESS");
        /// BEGIN SEARCHING FOR INPUTTED STRING HERE WITHIN ROOT/SUBDIRECTORIES, OUTPUT FILE NAMES CONTAINING STRING

        add(inputString);

    }

} 
```

如何递归搜索`inputString`setDir 设置的目录中的值？

（这里是 Java 新手——请保持建设性）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:52:30.687

考虑到您是新手，这是一个简单的递归解决方案（但绝不是最有效的）：

```
public static final FileFilter DIRS = new FileFilter() {

  public boolean accept(File file) {
    return file.isDirectory();
  }

};

public static final FileFilter FILES = new FileFilter() {

  public boolean accept(File file) {
    return file.isFile();
  }

}

public void walkTree(File start) throws IOException {

  File[] dirs = start.listFiles(DIRS);
  File[] files = start.listFiles(FILES);

  for (File file : files) {
    if (file.canRead()) {
      if (readAndCheck(file, "string")) {
        // Do Whatever
      }
    }
  }

  for (File dir : dirs) {
    walkTree(dir);
  }

}

public boolean readAndCheck(File file, String string) throws IOException {

  BufferedReader br = null;
  StringBuilder total = new StringBuilder();

  try {

    // If line separators matter in your pattern, consider reading every character
    br = new BufferedReader(new FileReader(file));
    String line;
    while ((line = br.readLine()) != null) {
      total.append(line);
    }

  } finally {
    if (br != null) {
      br.close();
    }
  }

  return total.toString().contains(string);

} 
```

*注意：*当我在答案框中写下此内容时，可能存在一些语法错误。

* * *

此外，您将不得不在新线程上启动它，最好使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:18:53.330

考虑到 LanguagesNamedAfterCofee 的答案，你可以相对轻松地阅读文件......

```
public void searchFile(File file, String value) throws IOException {

    FileReader fr = null;
    BufferedReader br = null;
    try {

        fr = new FileReader(file);
        br = new BufferedReader(fr);

        int line = 1;
        String text = null;
        while ((text = br.readLine()) != null) {
            if (text.toLowerCase().contains(value.toLowerCase())) {
                System.out.println("found " + text + " in " + file + " @ [" + line + ":" + text.toLowerCase().indexOf(value.toLowerCase()) + "]");
            }
            line++;
        }
    } finally {
        try {
            fr.close();
        } catch (Exception e) {
        }
        try {
            br.close();
        } catch (Exception e) {
        }
    }
} 
```

现在这个例子将只读取文本文件（它会读取二进制文件，但用处可协商）并打印出找到值的文件和行。

理想情况下，您可以通过某种回调方法、模型或收集信息以供以后使用，将这些信息传回给客户端......

# vb.net - 如何在 VB.Net 中获取多个复选框的值？

> ID：12887632
> 
> 赞同：0
> 
> 时间：2012-10-14T23:45:03.963
> 
> 标签：vb.net

嗨，我必须创建一个包含 6 个复选框的组框。当单击多个复选框时，具有较高 int 的复选框。值将显示在标签中。我该怎么做呢？如何针对其他复选框测试 6 个复选框的值并显示选中的最高值？因此，如果选中 checkbox1，它将在标签中显示 1。因此，如果选中了多个复选框，我该如何只显示最高的一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:15:16.000

```
Dim Chk As CheckBox
Dim i As Integer = 0

For Each Chk In GrpBox.Controls

    If TypeOf (Chk ) Is CheckBox Then
        If Chk .checked Then
            If Chk .Tag > i Then i = Chk .Tag
        End If
    End If
Next 
```

# c++ - 为什么 return 不复制对象？

> ID：12887633
> 
> 赞同：0
> 
> 时间：2012-10-14T23:45:09.720
> 
> 标签：c++, return, copy-constructor

以下代码仅打印`A::A()`，但不打印`A::A(const A&)`or `operator=`。为什么？

```
struct A
{
  A()               { cout << "A::A()" << endl; }
  A(const A& value) { cout << "A::A(const A&)" << endl; }

  A& operator=(const A& newValut)
  {
    cout << "A::operator=" << endl; 
    return *this;
  }
};

A foo()
{
  A a;      //Ok, there we have to create local object by calling A::A().
  return a; //And there we need to copy it, otherwise it will be destroyed
            //because it's local object. But we don't.
}

int main()
{
    A aa = foo(); //Also there we need to put result to the aa
                  //by calling A::A(const A&), but we don't.
} 
```

所以这段代码必须打印

```
A::A()
A::A(const A&)
A::A(const A&) 
```

但事实并非如此。为什么？

*我建议没有优化就没有`foo()`under的内联。`g++`*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T23:47:52.977

这称为[“返回值优化”](http://en.wikipedia.org/wiki/Return_value_optimization)。在这种情况下，允许编译器删除副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T01:06:37.743

这就是在 C++ 中返回复杂类型的方式：返回对象的位置实际上是由调用者在调用函数之前提供的，指向这个尚未初始化的对象的指针作为隐藏参数传递给函数。该函数使用此内存位置从返回的表达式构造返回的对象。

所以当返回的对象是像在你的程序`A aa = foo();`中那样直接初始化一个新的对象时，不需要将返回值复制到栈上的对象中。它要求函数直接在此位置创建对象。所以最多只能调用一次复制构造函数。（事实上​​，如果您有 2 次调用复制构造函数，C++ 编译器将不兼容）。

现在，最重要的是，允许编译器在称为“返回值优化”或 RVO 的优化中优化此调用。这怎么可能？如果您查看您的代码，您会发现您可以直接在 foo() 中在返回值的建议位置定义本地“a”变量，因此不必再次复制它。这是一个重要的特性，因为复制构造函数可能很复杂且运行缓慢，因此在实现时可以显着提高性能（我知道的每个编译器都实现了这个特性）。

因此，在您的情况下，根据编译器的不同，您可能对复制构造函数进行了 1 或 0 次调用，并且您的编译器仍然兼容。

# javascript - FB 的 getPageInfo 方法不适用于 https

> ID：12887636
> 
> 赞同：0
> 
> 时间：2012-10-14T23:45:42.197
> 
> 标签：javascript, jquery, facebook

打开https时，FB Javascript SDK getPageInfo不会调用其中的回调函数

```
FB.Canvas.getPageInfo(
  function(pageinfo) {
    scrollBarPosition = pageinfo.scrollTop;
    console.log("scrollbarposition"+scrollBarPosition);
  });` 
```

console.log 未在 firebug 中打印

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:57:48.157

在我看来，您在 API 中遇到了回归：[链接](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCAQFjAA&url=http://developers.facebook.com/bugs/342009985869471/&ei=5lB7UOi3EKeY0QGUh4DIAw&usg=AFQjCNEg1wjsf5xUWFA6C1C1qk3LR7xHNg&sig2=MBVeP5o6k1OgbSX3jAE4ug)

如果我是你，我会提交一个错误。

# iphone - NSStream streamError 57 - 套接字未连接间歇性和持续发生

> ID：12887637
> 
> 赞同：6
> 
> 时间：2012-10-14T23:45:44.523
> 
> 标签：iphone, ios, posix, nsstream, cfnetwork

在对我的 iOS 6 应用程序进行了一些更改（实际上都与网络无关）后，我的流事件处理程序开始遇到一个奇怪的错误。这在 iOS 5 和 iOS 6 上都发生，但在 iOS 5 上更频繁。此错误每 50 秒左右发生一次，我的流事件处理程序遇到`NSStreamEventErrorOccurred`. 错误信息如下：

```
Application[6370:707] Error Occured with stream [<__NSCFInputStream: 0xd622ab0>]
Application[6370:707] Stream Status: 7
Application[6370:707] Error Code: 57
Application[6370:707] Error Desc: The operation couldn’t be completed. Socket is not connected
Application[6370:707] Error Reason: Socket is not connected
Application[6370:707] Error Domain: NSPOSIXErrorDomain 
```

在此错误之后，处理程序将遇到几个“对等连接重置”TCP 错误，我认为这是由服务器发送 RST 数据包引起的。**是否还有其他可能导致此错误的情况？**我的应用程序正在连接到在 AP 模式下广播 wifi 网络的硬件设备。

以下是我的`NSStreamEventHasBytesAvailable`事件代码。

```
case NSStreamEventHasBytesAvailable: {
    NSLog(@"Stream has bytes available! Stream is %@", stream);
    if (stream == iStream)
    {
        @try {

            uint8_t buf[2048];
            unsigned int len = 0;

            len = [(NSInputStream *)stream read:buf maxLength:2048];
            if(len) {    
                NSString *incomingData = [[NSString alloc] initWithBytes:(const void *)buf length:len encoding:NSUTF8StringEncoding];
            }
        } catch (NSException *e) {
            NSLog(@"Caught Exception: %@",e);
        }
    }
    break;
} 
```

请根据需要索取信息，谢谢您的时间！

# objective-c - 将 Cocoa 标头链接到 ruby C 扩展

> ID：12887639
> 
> 赞同：6
> 
> 时间：2012-10-14T23:45:58.690
> 
> 标签：objective-c, c, ruby, makefile, ruby-c-extension

我正在为 ruby​​ 开发 C 扩展，但我需要包含`IOBluetooth`框架中的标头，特别是：

```
#import <IOBluetooth/objc/IOBluetoothDeviceInquiry.h>
#import <IOBluetooth/IOBluetoothUserLib.h> 
```

一切编译正常，但在运行时，扩展错误：

```
path/to/file.rb:1:in `require_relative': dlopen(/path/to/extension.bundle, 9):
Symbol not found: _OBJC_CLASS_$_IOBluetoothDeviceInquiry (LoadError) 
```

我相当确定这与链接过程中未包含的框架有关，但我不确定为什么。任何帮助将不胜感激

`extconf.rb`：

```
# Loads mkmf which is used to make makefiles for Ruby extensions
require 'mkmf'

# Give it a name
extension_name = 'bluetooth'

dir_config(extension_name)

create_makefile(extension_name, 'bluetooth') 
```

**生成的 MakeFile：** [http://paste.wilhall.com/25](http://paste.wilhall.com/25)

**更新：** 我修改了 Makefile 以便库静态链接；仍然遇到同样的错误，但这次是在链接时。

奇怪的是，`have_header`在我的`extconf.rb`文件中发现这些头文件很好。

**更新：** 我从系统日志文件中提取了以下内容：

```
Process:         ruby [951]
Path:            /usr/local/bin/ruby
Identifier:      ruby
Version:         0
Code Type:       X86-64 (Native)
Parent Process:  bash [468]
User ID:         501

Date/Time:       2012-10-17 14:06:57.425 -0400
OS Version:      Mac OS X 10.8.1 (12B19)
Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGABRT)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000010 
```

如果我没记错的话，`EXC_BAD_ACCESS (SIGABRT)`是不是经常跟GC问题有关？将调查并发布结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:09:52.623

Make sure you included

```
-framework Foundation System/Library/Frameworks/IOBluetooth.framework/IOBluetooth 
```

In your makeFile. Be sure you have the framework in the right directory. But if you can compile it, link it, your IOBluetooth seems now in your binary.

By the way you are trying to access a pointer at address 0x02, this is what creating the crash. I'm not sure it's related to IOBluetooth anymore

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:38:15.343

这似乎太简单了，所以我可能会离开，但从您发布的内容来看，它看起来是正确的。看起来问题不在于标题，而在于您没有链接 IOBluetooth 框架本身。你在任何`-framework IOBluetooth`地方指定任何东西吗？

# linq - Linq，如何进行分组？

> ID：12887644
> 
> 赞同：1
> 
> 时间：2012-10-14T23:46:44.207
> 
> 标签：linq, linq-to-sql

项目表：

Id、DeptId、年份、名称、级别

```
Id = 1, DeptId = 1, Year = 2000, Name = "ABC", Level = 1
Id = 2, DeptId = 1, Year = 2001, Name = "ABC1", Level = 1
Id = 3, DeptId = 1, Year = 2002, Name = "ABC2", Level = 1

Id = 4, DeptId = 2, Year = 2000, Name = "ABC3", Level = 1
Id = 5, DeptId = 2, Year = 2002, Name = "ABC4", Level = 1

Id = 6, DeptId = 3, Year = 2000, Name = "ABC5", Level = 1
Id = 7, DeptId = 3, Year = 2001, Name = "ABC6", Level = 1
Id = 8, DeptId = 3, Year = 2002, Name = "ABC7", Level = 1 
```

我有一个项目表。我需要为每个部门获取 2001 年的项目。对于 DeptId = 2，它没有 2001 年的项目，我需要显示上一年的项目，即 2000 年。

我的 linq 应该返回以下结果。

```
Id = 2, DeptId = 1, Year = 2001, Name = "ABC1", Level = 1
Id = 4, DeptId = 2, Year = 2000, Name = "ABC3", Level = 1
Id = 7, DeptId = 3, Year = 2001, Name = "ABC6", Level = 1 
```

我正在考虑使用 groupby，对 DeptId 进行分组，但不确定如何编写此查询。

更新：

这是我尝试过的。

var projects = project.Where(x=>x.Year == 2001)

但这不会返回 DeptId = 2 的结果，这就是为什么我正在考虑使用 groupby，但不知道如何编写它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:26:16.563

```
var query= from p in context.Projects
           group p by p.DeptId into grp
           select grp.Where(x => x.Year <= 2001)
                     .OrderByDescending(x => x.Year)
                     .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:29:40.457

```
from l in context.Projects.Where(w => w.Year <= 2001 )
        group l by l.DeptId into depts
        select depts.LastOrDefault(); 
```

拉姆达版本：

```
 context.Projects.Where(w => w.Year <= 2001)
        .GroupBy(g => g.DeptId)
        .Select (s => s.LastOrDefault()); 
```

或者：

```
 context.Projects.Where(w => w.Year <= 2001)
        .GroupBy(g => g.DeptId)
        .Select (s => s.OrderBy(o => o.Year).LastOrDefault()); 
```

# c# - 使用 NCalc 将用户输入作为字符串中的参数进行评估

> ID：12887651
> 
> 赞同：2
> 
> 时间：2012-10-14T23:47:12.453
> 
> 标签：c#, console-application

我想提示用户输入一个数字，然后用于`NCalc`评估和求解公式

```
string a = Console.ReadKey().ToString();
Expression e = new Expression("2 + [a] * 5"); 
object x = e.Evaluate();
Console.WriteLine("{0}", x.ToString());
Console.ReadKey(); 
```

这给了我错误，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:48:42.037

您需要为您的文字值传递参数`a`；

```
string a = Console.ReadKey().KeyChar.ToString();     // add KeyChar
Expression e = new Expression("2 + [a] * 5"); 
e.Parameters["a"] = a;                               // don't forget this line
object x = e.Evaluate();
Console.WriteLine("{0}", x.ToString());
Console.ReadKey(); 
```

还有一件事，

```
string a = Console.ReadKey().ToString();
// yields a string value: System.ConsoleKeyInfo 
// and not the number you typed. 
```

使用起来好多了

```
string a = Console.ReadLine()
// or
string a = Console.ReadKey().KeyChar.ToString();     // KeyChar 
```

# mysql - 单击时将 int 列向上一

> ID：12887656
> 
> 赞同：0
> 
> 时间：2012-10-14T23:47:47.577
> 
> 标签：mysql

我正在尝试在用户表中添加一个字段以获得声誉。我通过表单使用 + 1 增量，并且由于某种原因它没有更新。查询我正在运行。

```
$link = mysqli_connect("$server", "$user", "$pass", "$webdb") or die( "Error:" . mysqli_connect_error());
$username = mysqli_real_escape_string($link, (string) $_POST['user']);
$query= "Update `user` set `reputation` = 'reputation + 1' where `nicename`='$username'";
mysqli_query($link, $query) or die ("Error:" . mysqli_errno($link)); 
```

我已经在 HeidiSQL 内部以及通过网页上的按钮运行了查询，但它没有更新，这告诉我我面临的任何问题都是我的查询本身的问题。有没有人看到它不起作用的问题？我正在尝试将信誉面板更新为每次单击时升级一个；谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:49:46.490

删除引号。你所做的就像在 PHP 中说的：

```
$a = 123;
$a = '$a + 1';
// why won't it work? 
```

旁注：无缘无故地将变量用引号括起来是多余的，效率低下。`mysqli_connect`从您的通话中删除所有引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:50:43.223

您正在尝试将列设置`reputation`为*字符串文字*“reputation + 1”。（'reputation + 1' 周围的单引号表示它是一个字符串。）删除引号，它应该符合您的预期。

# triggers - Salesforce 字段神秘更新

> ID：12887657
> 
> 赞同：0
> 
> 时间：2012-10-14T23:47:48.263
> 
> 标签：triggers, workflow, salesforce, schedule

有一个布尔字段叫做准备处理，它是针对一些特殊情况，我们需要在处理之前先手动检查。最近我们经历了非常奇怪的行为。就像有人更改了字段值一样。它会在 1-2 分钟后变回另一个值。当我跟踪该字段的历史时，我可以看到更改操作是由 1-2 分钟前更改值的人采取的。

我已经检查了该对象的触发器、相关的计划作业和所有工作流规则都适用于该字段。但我找不到任何可能导致此问题的原因。

所以我的问题是：除了触发器、调度作业和工作流规则之外，还有什么可以自动更改字段的值并充当人而不是系统机器人。

谢谢

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:48:22.900

您是否检查过是否有任何批处理 APEX 正在运行并触及它？假设“准备处理”字段被某个等待标志为真的进程拾取。此过程是否可能将字段更新回未就绪状态后记？

# node.js - 项目未配置（首先运行“waf configure”）Makefile：11：目标“程序”的配方失败

> ID：12887660
> 
> 赞同：1
> 
> 时间：2012-10-14T23:48:32.400
> 
> 标签：node.js

我一直试图让 node.js 在我的 Windows 机器上运行（使用 cygwin）。我一直遇到这个错误，我不确定我做错了什么。我正在运行以下命令-

1.  git clone [https://github.com/joyent/node.git](https://github.com/joyent/node.git) nodejs
2.  cd nodejs
3.  git checkout v0.4.12~
4.  。/配置
5.  制作
6.  进行安装

但是，当我运行“make”命令时，我得到了这个：

项目未配置（首先运行'waf configure'）
Makefile：11：目标'program'的配方失败
make：*** [program]错误1

我已经搜索了很多地方来解决这个问题，但没有找到任何相关的东西。我不认为这个问题与[在 ubuntu 12.04 上安装 node.js 时出错的问题相同 - “项目未配置（首先运行'waf configure'）”](https://stackoverflow.com/questions/10690602/error-when-installing-node-js-on-ubuntu-12-04-project-not-configured-run-waf)，因为我有打开的 ssl 包。

非常感谢您的帮助！谢谢！

# asp.net-mvc - 视图直接使用领域模型有危险吗？

> ID：12887663
> 
> 赞同：4
> 
> 时间：2012-10-14T23:48:55.870
> 
> 标签：asp.net-mvc, entity-framework

我使用 EF 代码优先方法来定义我的数据库结构。目前，我将 EF 实体类直接传递到 MVC 应用程序中的一些视图中。这使得填充和保存视图变得容易，因为我可以直接让一个存储库给我填充的 ​​EF 类，如果我的控制器在回发中收到一个 EF 实体类，我可以（如果验证正常）直接通过到存储库以保存它。但是，这是否存在潜在的安全风险？如果实体类上有我不想修改的属性，客户端是否可以将这些属性作为回发的一部分提交回来并无论如何修改它们？例如，假设我有一个视图来编辑我将此 EF 模型传递给的用户：

```
public class User {
    [Required]
    public string Firstname { get; set; }
    [Required]
    public string Surname { get; set; }
    public DateTime DOB { get; set; }
    public bool IsDisabled { get; set; }
} 
```

我可能会将`Firstname`、`Surname`和公开`DOB`为可编辑的表单字段，但我不希望用户能够设置`IsDisabled`和禁用他们的帐户。预防这种情况的最佳方法是什么？或许只有在认为用户可以设置由该域模型保存的*每个*属性都可以的情况下，或者仅在使用该域模型来显示事物而不是将事物保存回数据存储？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:57:42.887

是的，将实体直接传递给您的视图可能很危险。从技术上讲，问题在于当您直接建模绑定到实体时。

是的，你提出的情况很有可能发生。更糟。假设您传递了一个 User 对象，那么攻击者可以提交一个 post 值来执行诸如将 IsAdmin 设置为 true 之类的操作，或者更改分配给用户的角色。

当然，这一切都取决于用户是否知道（或能够猜测）您的数据结构。这可能并不像看起来那么困难，因为我们在生成的 HTML 中经常有提供提示的迹象。

这个问题有两种解决方案：

1）使用视图模型。视图模型仅包含视图中允许的数据。您还可以控制将哪些数据复制回实体模型。

2）您可以使用该`[Bind]`属性来指定排除和包含以将各种属性列入白名单和黑名单。

我更喜欢使用第一种方法，因为忘记将某些内容列入白名单或列入黑名单要困难得多（特别是如果您稍后更改某些内容并忘记在绑定它的任何地方更新列表）。我也觉得`[Bind]`是作弊，鼓励草率的设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T00:02:00.530

你真的不应该使用你的实体模型作为视图模型，我认为你在这里的例子确实比我在其他任何地方看到的更好地突出了这一点。

如果您的控制器在发布时接受了，`User`那么是的，您将公开要发布的数据。如果您直接映射发布的用户而不检查无效提交，那么您会将问题持久化到数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T23:56:56.327

最好的选择是使用视图模型。这样，您既可以防止有人试图访问不可见的属性，例如您的`IsDisabled`，因为它根本不在视图模型中，也可以将您的域与表示层分离。如果您曾经需要扩展您的 EF 实体（更多属性、更多关系等等），您的视图模型可能不需要更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:23:49.213

我刚刚看到这篇文章： http:
[//www.codethinked.com/ASPNET-MVC-Think-Before-You-Bind](http://www.codethinked.com/ASPNET-MVC-Think-Before-You-Bind)

它提供了几种解决此问题的方法，但我在项目中选择的方法是该`UpdateModel()`方法的一种变体。该方法依赖于从数据库中检索可更新对象，然后仅`UpdateModel()`用于设置*要*在该对象上更新的字段。我的方法是让存储库的`Update`方法采用负责设置要更新的字段的 lambda（“更新策略”）：

```
public bool UpdateUser(User updatedUser, Action<User, User> updateStrategy) {
    // Retrieve User via updatedUser.UserID...
    // Update it using updateStrategy(retrievedUser, updatedUser)...
    // Save the updated retrievedUser to DB
}

// ...
// To call the update method:
repoUser.UpdateUser(updatedUser, (existingUser, updatedUser) => {
    existingUser.Firstname = updatedUser.Firstname;
    existingUser.Surname = updatedUser.Surname;
    existingUser.DOB = updatedUser.DOB;
}); 
```

在这两种情况下，它都会防止更新您不想更新的任何字段，无论它们是否已发布到操作方法。当然，恶意客户端可以修改隐藏`UserID`字段，但我认为不需要提防；它只是更改了正在更新的用户，如果您的系统允许他们更新他们不应该拥有权限的用户，那么这本身似乎就是一个安全漏洞。

# java - 使用递归反转字符串的方法

> ID：12887666
> 
> 赞同：2
> 
> 时间：2012-10-14T23:49:10.790
> 
> 标签：java, recursion

```
public static void main(String args[]) {
    System.out.println(reverseString("His"));
}

public static String reverseString(String s) {
    if (s.length() <= 1) {
        return s;
    } else {
        char c = s.charAt(0);
        return reverseString(s.substring(1)) + c;
    }
} 
```

有人可以详细解释一下这种方法的工作原理吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:59:32.323

我认为了解这些类型的方法如何工作的最佳方法是通过一个简单的示例手动完成它们。让我们拿字符串来`"abc"`考虑当我们调用时会发生什么

```
reverseString("abc") 
```

在第一次迭代中，我们考虑`else`块（因为`"abc".length()`不小于或等于 1）。方法返回

```
reverseString("abc".substring(1)) + "abc".charAt(0) 
```

这相当于

```
reverseString("bc") + 'a' 
```

现在我们必须考虑`reverseString("bc")`。再次，我们发现自己在`else`块中，该方法将返回

```
reverseString("bc".substring(1)) + "bc".charAt(0) 
```

这相当于

```
reverseString("c") + 'b' 
```

显然，正如预期的那样， `reverseString("c")`is just `"c"`- so `reverseString("bc")`is `"cb"`which 是指这`reverseString("abc")`就是`"cb" + 'a'`给我们的。`"cba"`

* * *

总而言之，我们基本上是在做这样的事情：

```
reverse("abc")
reverse("bc") + 'a'
reverse("c") + 'b' + 'a'
"cba" 
```

使用 4 个字符的字符串：

```
reverse("abcd")
reverse("bcd") + 'a'
reverse("cd") + 'b' + 'a'
reverse("d") + 'c' + 'b' + 'a'
"dcba" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T00:26:18.060

假设您有一个字符串“Hello”，那么它将从左到右对字符串执行递归。

字符 c = s.charAt(0);

返回反向字符串（s.substring（1））+ c；

1) 对于 H

c = 'H'

返回反向字符串（“ELLO”）+ H

2) 对于 E

```
c = 'E'

return reverseString("LLO") + E 
```

3) 对于 E

c = 'E'

返回反向字符串（“LLO”）+ E

4) 对于 L

c = 'L'

返回反向字符串（“LO”）+ L

5) 对于 L

c = 'L'

返回反向字符串（“O”）+ L

6) 因为，子串 s<= 1

```
return S = 'O' 
```

7) 现在它将从下到上恢复递归函数，并将连接每个级别的所有字符串 s

所以，O + L + L + E + H = "OLLEH"

顺便说一句，在 java 中，字符串反转是使用 StringBuilder/StringBuffer 的小菜一碟。例如 StringBuffer("Hello".toReverse()).toString();

如果您使用的是单线程和更简单的应用程序，请使用 StringBuilder

因为，并发的复杂应用程序使用 StringBuffer，它的 Synchrinized。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T23:57:44.930

这很简单。

如果使用一个 char 字符串调用您的方法，它会返回相同的字符串并停止。否则，它会删除最后一个附加的第一个字符，并使用剩余的字符调用相同的方法。

举个例子`His`

这将像这样工作。

1.  由于字符串长度为 3 (>1)，因此将其`H`取出以追加到最后并调用 reverse 方法`is`。
2.  由于现在字符串长度为 2 (>1)，因此将其`i`取出以追加到最后并调用 reverse 方法`s`。
3.  现在字符串长度是`1`这样，它将返回`s`并且递归将停止。
4.  最后，它将开始以**LAST-IN-FIRST-OUT**的方式添加您的角色，例如 s+i+H
5.  这样，它会将最终输出返回为`siH`.

其他解释方式：

```
 reverse("His" ) ->  reverse("is" )+H -> ( reverse("s" )+i)+H -> (s+i)+H ->siH 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T23:58:37.380

在其中放置一些打印语句，以查看何时`reverseString`使用哪些参数调用该方法。这就是你会得到的：

```
his
is
s 
```

所以每次函数递归时，它都会用`s.substring(1)`. 然后它将截断的第一个字符添加到反转该子字符串的结果的末尾。使用相同的上述三个调用，这看起来像：

```
reverse(is) + h
reverse(s) + i
s 
```

请注意，最后一种情况只返回单个字母“s”。这称为递归的基本情况，每个递归函数都需要一个返回结果。

如果您将结果替换`reverse(x)`为上述三个调用，您会得到：

```
si + h
s + i
s 
```

这就是它的工作原理。要反转字符串，请反转字母 [1-n]，然后在其末尾添加字母 0。唯一的例外是反转一个单字母字符串，它只返回该单字母字符串本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T00:01:24.690

有趣的功能我已经有几年没有做过 java 了，但这应该是它的工作原理。

检查以确保我们正在反转的内容不止一个字符，如果不是返回它。现在我们要做的是我们将第一个字符移动到字符串的末尾，然后我们将字符串的其余部分返回到它前面。

最后，我将您的 versing 字符串作为一个字符，并且第一个 if clausse 导致完整的字符串被返回。:)

现在我确信有更好的方法来解决这个功能。如果你出于某种原因必须自己做这样的事情，我相信java有一个反向字符串函数。它也可能行不通我是从记忆中做的，我的 java 生锈了

```
`public static  String reverseString(String s){
    for(int x=s.length(); x>=0; x--) {
      s2 .= s.charAt(x);

    }
    return s2;` 
```

# node.js - node.js 中是否存在从 child_process.spawn 消耗标准输出的竞赛？

> ID：12887669
> 
> 赞同：2
> 
> 时间：2012-10-14T23:49:24.670
> 
> 标签：node.js, race-condition, spawn

我正在使用 node.js[生成](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)一个子进程并使用`child.stdout.on('data')`钩子使用它的输出。

`child.stdout`它本身就是一个流，在[流页面上](http://nodejs.org/api/stream.html#stream_event_data)，我注意到一个胖警告通知我，如果在数据事件到达时没有注册处理程序，那么数据就会掉到地板上。

在我的子进程的产生和我的标准输出处理程序的注册之间有一个短暂的时刻。 **这里有比赛条件吗？** 我不希望我的第一次阅读丢失。

可以合理地猜测父子之间的管道会缓冲，但节点是否保证它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:56:25.960

您必须在调用`child.stdout.on('data', [...])`的同*一轮*（一系列串行语句）中调用后者，`child_process.spawn([...])`以确保在下一次处理 IO 操作时侦听器在那里。或者，如果需要在后一回合安装侦听器，您可以暂停流`child.stdout.pause()`（在同一回合中）并在添加侦听器后在后一回合恢复流。

# android - 支持 OTG 的 Android 设备中的 USB 主机模式

> ID：12887672
> 
> 赞同：2
> 
> 时间：2012-10-14T23:49:39.307
> 
> 标签：android, linux, linux-kernel, usb, usb-otg

我想知道支持 USB-OTG 的 Android 设备默认处于哪种模式 - USB 主机模式或 USB 从机模式？
我想，如果设备处于从属模式，那么使用下面链接中描述的 API 没有意义吗？ [https://developer.android.com/guide/topics/connectivity/usb/host.html](https://developer.android.com/guide/topics/connectivity/usb/host.html)
有没有办法以编程方式从主机模式切换到从机模式，反之亦然？

如您所知，USB OTG（移动中）设备会自动切换到主机或从机模式，具体取决于已将 OTG 专用电缆的哪一端插入设备

第二个问题是，如果设备有必要的 OTG 端口，但内核尚不支持 OTG，则应根据电缆末端检测修改内核的哪些部分以便能够设置主机从模式? （无需实施HNP）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T03:18:37.340

USB OTG 中没有“默认”模式。OTG 控制器检测 USB 的第五个引脚（ID 引脚）的状态。如果 ID 引脚接地或悬空，则连接的设备是主机或设备。

USB 2.0 规范引入了 3 个新协议，ADP、SRP、HNP。请参考 HNP 以获取“一种以编程方式从主机模式切换到从机模式的方法，反之亦然”。

作为您的第二个问题，我认为检测 ID 引脚是 OTG 控制器的功能。

# bash - bash while 循环在 true if 之后意外结束

> ID：12887685
> 
> 赞同：0
> 
> 时间：2012-10-14T23:52:16.537
> 
> 标签：bash, if-statement, while-loop

可能是一个愚蠢的问题，但看不到 while abort 的原因。

我有一个这样的文件：

```
"id": "00000000000000000",
"visibilitystate": 1,
"profilestate": 8
"somethingelse": "abc",
"id": "99999999999999999",
"againsomethingelse": "cba"
"visibilitystate": 0,
"profilestate": 9 
```

100 万次或更多的重复次数、编号、名称和值在 id 和 id 之间可能不同，但 id 总是不同的。我的第一个想法是循环读取，将值存储在数组中，然后插入 mysql-db。

我试试这个：

```
set -x
#Data extract array
array=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)

#Control array
array2=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)

while read a; do
    if [[ ${array2[0]} == 1 ]]; then
        awk '/"id":/ { exit 42 }'
        if [[ $? -eq 42 ]]; then
            echo mysql
            array2[0]=0
        fi
    fi
    if [[ ${array2[0]} == 0 ]]; then
        awk '/"id":/ { exit 42 }'
        if [ $? -eq 42 ]; then
            array[0]=`sed -n 's/.*"id":."\(.*\)",.*/\1/p'`
            array2[0]=1
        fi
    fi
done <testf

set +x 
```

读完一行，循环退出，不明白为什么。

输出：

```
+ array=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)
+ array2=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)
+ read a
+ [[ 0 == 1 ]]
+ [[ 0 == 0 ]]
+ awk '/"id":/ { exit 42 }'
+ '[' 42 -eq 42 ']'
++ sed -n 's/.*"id":."\(.*\)",.*/\1/p'
+ array[0]=
+ array2[0]=1
+ read a
+ set +x 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:39:10.693

剧本有3个问题。您在循环中使用了 3 个不同的命令，这些命令从标准输入（`awk`两次和`sed`）读取。

当您使用`awk '/"id":/ { exit 42 }'`它时，它会读取其他所有内容（输入文件）。您可能希望在`$a`. 那将是这样的：

```
echo $a | awk '/"id":/ { exit 42 }' 
```

第二个错误是一样的，但是在 next 中`if`。

第三个错误类似，但在这种情况下，当您使用`sed`. 您可能想要执行以下操作：

```
array[0]=`echo $a | sed -n 's/.*"id":."\(.*\)",.*/\1/p'` 
```

顺便说一句，`test`是 bash 中的保留字，您应该避免将其用作文件名（但与您的问题无关）。

# javascript - 使用 Facebook JS API 让朋友阅读文章

> ID：12887687
> 
> 赞同：-1
> 
> 时间：2012-10-14T23:52:28.580
> 
> 标签：javascript, facebook, facebook-graph-api

我想知道如何获取朋友从 Facebook 应用程序中阅读的文章。我使用以下查询来获取我已阅读的文章：

```
 /me/news.reads 
```

但是我想要所有朋友看过的文章，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:49:12.763

尝试这个

```
FB.api('/me/friends', { 'fields' : 'name,news.reads.limit(10)' }, function (data) {
    // if(!data || data.error) { }
    // console.log(data);
}); 
```

如果愿意，您可以省略限制，或添加更多字段。当然，这也可以作为 GET 请求：`http://graph.facebook.com/me/friends?fields=name,news.reads.limit(10)&access_token=XXXX`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:43:14.927

这不是一个合适的解决方案，但您可以做的是循环浏览您朋友的 facebook id，并为每个朋友的 ID 获取所有新闻，因为`/$friend_id/news:reads` 我认为没有任何直接的 api 函数来获取朋友执行的操作。

# unit-testing - Unit testing private methods seems to make the whole solution easier

> ID：12887692
> 
> 赞同：3
> 
> 时间：2012-10-14T23:53:01.840
> 
> 标签：unit-testing, testing, tdd, private-methods

Let's suppose there is an utility class (no data) with one complex (as in, hard-to-test) public method. It uses random number generation, return large arrays of data and that fun stuff. However, if you implement it in small private methods, every private method would be easy to test, and thus the whole thing would be easier to test. From the application point of view, only the big method needs to be public, and the other should be private. Yet, testing the private methods results in an easier to test class. How should I approach this problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T00:00:59.167

Sometimes generating random numbers, returning large arrays and other fun stuff means that the single utility class is responsible for more than one thing which means there should be more classes instead. High complexity in a single class (single method!) is sometimes the sign of bad design. But there's never one single golden rule to follow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:24:43.287

The need to test private methods should be a warning sign. It is not the solution to your big and complex method. Extraction of functionality into smaller classes IS the solution, concidering the Single [Responsibility Principle](http://en.wikipedia.org/wiki/Single_responsibility_principle) (SRP). SRP states that a class should really only do one thing.

Random number generation, array handling and fun stuff is at least three separate things, that should be done separately.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:12:51.737

Whether you should leave your method as a single blackbox algorithm whose subparts aren't testable, or try to externalize as many responsibilities as possible to separate classes, is very situational.

You might have subparts that are likely to be reused, in which case it's a good idea to factor them out. You might have subparts that talk to other layers or to the hardware - same thing.

It all depends on what these small sub methods do, it's hard to tell without a context.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T00:49:21.767

There's a very strong argument for only testing the public API of a class. It makes refactoring your code that much easier because unless you change the method signature, the unit tests won't need to change and they'll validate that your changes didn't break anything.

That being said sometimes it can make sense to test the private methods (although this would be the exception - not the rule). Some test frameworks (e.g. MSTest) let you access private members for just this purpose while others (e.g. nUnit) don't since they don't think you should be doing it (in the case of .Net it doesn't take too much to write your own reflection class/method to give you access though).

If you do decide to test your private methods, make sure you also test the full public method too as you'll need the public tests to verify your later refactors, as mentioned above.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T08:25:09.840

Testing private members will **always make your tests brittle**. When you test private methods, your tests are dependent on implementation details that can and will often change. The reason you made them private to begin with, is that you want to be able to change them without impacting the rest of your software. Guess what: if you expose your privates, even if it is only using reflection "black magic", you are making them public, because your tests are part of your software as well.

If you feel that you must test the implementation details, whether because your public API does too much, or because the private methods are so important, you should refactor your code and extract your private members as **public classes** and test those. Remember, because your tests are also part of the software, they should have "normal" access to the code that they use.

If you are adamant that these (not so) private methods cannot be publicly exposed, perhaps for fear of allowing external users / code to access them, you can limit the access to these classes by making them *internal* (in C#) or *package-private* (in Java), and have the code's internals visible to your tests.

Either way, it sounds that your code should either not be tested or should be made (more) public.

# ruby-on-rails - 安装 Rails 无法启动

> ID：12887694
> 
> 赞同：2
> 
> 时间：2012-10-14T23:53:04.663
> 
> 标签：ruby-on-rails, ruby, linux, ruby-on-rails-3

在 railcast.com 上的 310 railcasts 之后，我在 rails 上安装了 ruby​​。现在我可以运行并创建一个新的 rails 并使用 rail s 运行它。当我关闭终端并重新启动它时，问题就出现了，我收到以下错误

```
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails 
```

这里是红宝石版本

```
ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [i686-linux] 
```

如果我做 rails -vi 得到关注

```
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails

whereis rails
rails: 
```

gem 环境给了我这个

```
 - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-10-12 patchlevel 286) [i686-linux]
  - INSTALLATION DIRECTORY: /home/john/.rvm/gems/ruby-1.9.3-p286
  - RUBY EXECUTABLE: /home/john/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
  - EXECUTABLE DIRECTORY: /home/john/.rvm/gems/ruby-1.9.3-p286/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/john/.rvm/gems/ruby-1.9.3-p286
     - /home/john/.rvm/gems/ruby-1.9.3-p286@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我也相信答案是他的路径，似乎同样有这个问题[Installed Rails 但 rails 命令说它没有安装](https://stackoverflow.com/questions/1954015/installed-rails-but-the-rails-command-says-its-not-installed)。但我不知道如何放置路径。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:02:46.130

尝试键入 rvm -v，如果发生错误，则说明您的 rvm 安装有问题，如果是，请尝试获取您的 shell 配置文件，即如果您在 mac 上使用 bash：“source ~/.profile”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:13:25.813

我正在使用 Mac OSX，并且在我的主目录下的 .bashrc 中。有一行： `PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting`

顺便说一句，你应该通过命令告诉 rvm 使用 1.9.3 的 ruby`rvm use 1.9.3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:04:20.103

您的问题可能是 rvm 在您的 ruby​​ 版本之间切换，当您重新启动终端时，它不是您在退出之前使用的旧 ruby​​ 版本。所以一个解决方案可以。您在 Rails 应用程序文件夹中创建“.rvmrc”文件，并在其中放置一行：

rvm 使用 1.xx

其中 1.xx 是您将使用的 ruby​​ 版本。一旦您在此版本中拥有 gem rails，它将始终为您工作。这个文件只是告诉你在你的应用程序目录中工作时使用哪个 ruby​​ shell

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T09:19:47.810

@user1022209 如果问题出在 ruby​​ 版本上，您的解决方案也将起作用，但关键是当您进入文件夹时，您总是必须设置 ruby​​，这可能会有些麻烦。我认为设置默认 ruby​​ 版本的最佳方法是使用 .rvmrc 文件。

3行文字：

vim .rvmrc #创建新文件，之后你必须按“i”进入插入模式

rvm use 1.xx #contains only this line inside 然后按“ESC”并键入

:wq 或 :wq!

最后按 Enter，你就永远完成了 :)

希望它能解决你的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T00:20:10.590

`gem install rails`

不要`sudo`或`apt-get`在安装 Rails 时安装从源代码编译的 Ruby。您可能需要先删除 Rails 包，因为您已经尝试使用 apt-get 包管理器安装它。

`apt-get remove --purge rails`

`apt-get clean`

# php - 安全地转义表名/列名

> ID：12887696
> 
> 赞同：4
> 
> 时间：2012-10-14T23:53:39.270
> 
> 标签：php, mysql, sql, security, pdo

我在 php 中使用 PDO，因此无法使用准备好的语句转义表名或列名。以下是我自己实现它的万无一失的方法：

```
$tn = str_replace('`', '', $_REQUEST['tn']);
$column = str_replace('`', '', $_REQUEST['column']);
$sql = "SELECT * FROM `tn ` WHERE `column` = 23";
print_r(
    $pdo->query($sql)->fetchAll()
); 
```

还是还有一些可以攻击的途径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T01:10:15.200

您可以通过询问数据库哪些列对给定数据库表有效来使用动态白名单。这是一个额外的 sql 查询，但安全性很好。

```
select COLUMN_NAME 
from INFORMATION_SCHEMA.COLUMNS 
where TABLE_SCHEMA = :databaseName
  and TABLE_NAME = :tableName 
```

获取结果，然后确保所有动态列名都在结果集中。

我相信视图包含在 中`INFORMATION_SCHEMA.COLUMNS`，所以它应该只是简单的工作。

然后在组装动态 sql 时只需在经过验证的列名周围使用反引号（我假设您使用纯 ascii 列名，否则您可能需要考虑其他事项）。

# c++ - 在 C 和 C++ 中都有效的代码在用每种语言编译时会产生不同的行为吗？

> ID：12887700
> 
> 赞同：698
> 
> 时间：2012-10-14T23:54:26.223
> 
> 标签：c++, c

C 和 C++ 有很多不同之处，并非所有有效的 C 代码都是有效的 C++ 代码。
（“有效”是指具有已定义行为的标准代码，即不是特定于实现/未定义/等。）

当使用每种语言的标准编译器编译时，在 C 和 C++ 中都有效的一段代码是否会产生*不同的行为？*

为了使它成为一个合理/有用的比较（我试图学习一些实际有用的东西，而不是试图在问题中找到明显的漏洞），让我们假设：

*   没有与预处理器相关的东西（这意味着没有 hack `#ifdef __cplusplus`， pragma 等）
*   任何实现定义在两种语言中都是相同的（例如数字限制等）
*   我们正在比较每个标准的最新版本（例如，C++98 和 C90 或更高版本）
    如果版本很重要，那么请说明每个标准的哪些版本会产生不同的行为。

* * *

## 回答 #1

> 赞同：475
> 
> 时间：2012-10-15T00:19:04.077

这是一个利用 C 和 C++ 中函数调用和对象声明之间的差异以及 C90 允许调用未声明函数的事实的示例：

```
#include <stdio.h>

struct f { int x; };

int main() {
    f();
}

int f() {
    return printf("hello");
} 
```

在 C++ 中，这不会打印任何内容，因为`f`创建和销毁了一个临时对象，但在 C90 中，它会打印`hello`，因为可以在没有声明的情况下调用函数。

如果您想知道名称`f`被使用了两次，C 和 C++ 标准明确允许这样做，并且要创建一个对象，您必须说要消除歧义，如果您想要结构，或者如果您想要函数，则`struct f`不要。`struct`

* * *

## 回答 #2

> 赞同：447
> 
> 时间：2012-10-15T06:03:47.907

对于 C++ 与 C90，至少有一种方法可以实现未定义的不同行为。C90 没有单行注释。稍加注意，我们可以使用它来创建一个在 C90 和 C++ 中具有完全不同结果的表达式。

```
int a = 10 //* comment */ 2 
        + 3; 
```

在 C++ 中，从`//`到行尾的所有内容都是注释，因此可以这样计算：

```
int a = 10 + 3; 
```

由于 C90 没有单行注释，因此只有`/* comment */`是注释。first`/`和 the`2`都是初始化的一部分，所以结果是：

```
int a = 10 / 2 + 3; 
```

因此，正确的 C++ 编译器将给出 13，但严格正确的 C90 编译器将给出 8。当然，我在这里选择了任意数字——您可以使用您认为合适的其他数字。

* * *

## 回答 #3

> 赞同：408
> 
> 时间：2012-10-14T23:57:11.920

以下在 C 和 C++ 中有效，将（很可能）`i`在 C 和 C++ 中产生不同的值：

```
int i = sizeof('a'); 
```

有关差异的解释，请参见[C/C++ 中的字符大小 ('a') 。](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)

[这篇文章](http://david.tribble.com/text/cdiffs.htm)的另一个：

```
#include <stdio.h>

int  sz = 80;

int main(void)
{
    struct sz { char c; };

    int val = sizeof(sz);      // sizeof(int) in C,
                               // sizeof(struct sz) in C++
    printf("%d\n", val);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：185
> 
> 时间：2012-10-15T01:42:35.863

C90 对比 C++11（`int`对比`double`）：

```
#include <stdio.h>

int main()
{
  auto j = 1.5;
  printf("%d", (int)sizeof(j));
  return 0;
} 
```

在 C`auto`中表示局部变量。在 C90 中，可以省略变量或函数类型。它默认为`int`. 在 C++11`auto`中意味着完全不同的东西，它告诉编译器从用于初始化变量的值推断变量的类型。

* * *

## 回答 #5

> 赞同：125
> 
> 时间：2012-10-17T02:17:59.210

另一个我还没有看到的例子，这个例子突出了预处理器的区别：

```
#include <stdio.h>
int main()
{
#if true
    printf("true!\n");
#else
    printf("false!\n");
#endif
    return 0;
} 
```

这在 C 中打印“false”，在 C++ 中打印“true”——在 C 中，任何未定义的宏的计算结果为 0。在 C++ 中，有 1 个例外：“true”计算结果为 1。

* * *

## 回答 #6

> 赞同：109
> 
> 时间：2012-10-15T00:48:45.153

根据 C++11 标准：

**一种。**逗号运算符在 C 但不是 C++ 中执行左值到右值转换：

```
 char arr[100];
   int s = sizeof(0, arr);       // The comma operator is used. 
```

在 C++ 中，此表达式的值为 100，而在 C 中，则为`sizeof(char*)`.

**湾。**在 C++ 中，枚举器的类型是它的枚举。在 C 中，枚举数的类型是 int。

```
 enum E { a, b, c };
   sizeof(a) == sizeof(int);     // In C
   sizeof(a) == sizeof(E);       // In C++ 
```

这意味着`sizeof(int)`可能不等于`sizeof(E)`。

**C。**在 C++ 中，使用空参数列表声明的函数不接受任何参数。在 C 中，空参数列表意味着函数参数的数量和类型未知。

```
 int f();           // int f(void) in C++
                      // int f(*unknown*) in C 
```

* * *

## 回答 #7

> 赞同：55
> 
> 时间：2012-12-15T05:24:07.577

`1`该程序在 C++ 和C 中打印`0`：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    int d = (int)(abs(0.6) + 0.5);
    printf("%d", d);
    return 0;
} 
```

发生这种情况是因为 C++ 中存在`double abs(double)`重载，因此在 C 中返回`abs(0.6)`是因为在调用. 在 C 中，您必须使用.`0.6``0``int abs(int)``fabs``double`

* * *

## 回答 #8

> 赞同：40
> 
> 时间：2009-02-23T23:21:55.293

```
#include <stdio.h>

int main(void)
{
    printf("%d\n", (int)sizeof('a'));
    return 0;
} 
```

在 C 语言中，这将打印`sizeof(int)`当前系统上的任何值，这通常`4`在当今常用的大多数系统中。

在 C++ 中，这必须打印 1。

* * *

## 回答 #9

> 赞同：37
> 
> 时间：2012-10-15T11:46:00.940

另一个`sizeof`陷阱：布尔表达式。

```
#include <stdio.h>
int main() {
    printf("%d\n", (int)sizeof !0);
} 
```

它在 C 中等于`sizeof(int)`，因为表达式的类型为`int`，但在 C++ 中通常为 1 （尽管不是必须的）。在实践中，它们几乎总是不同的。

* * *

## 回答 #10

> 赞同：26
> 
> 时间：2009-02-24T00:05:11.023

一个依赖 C 编译器的老栗子，无法识别 C++ 行尾注释...

```
...
int a = 4 //* */ 2
        +2;
printf("%i\n",a);
... 
```

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2009-02-24T00:07:37.570

*C++ 编程语言（第 3 版）*给出了三个示例：

1.  sizeof('a')，正如@Adam Rosenfield 提到的那样；

2.  `//`用于创建隐藏代码的注释：

    ```
    int f(int a, int b)
    {
        return a //* blah */ b
            ;
    } 
    ```

3.  结构等将东西隐藏在范围之外，如您的示例所示。

* * *

## 回答 #12

> 赞同：22
> 
> 时间：2009-02-24T00:28:16.913

C++ 标准列出的另一个：

```
#include <stdio.h>

int x[1];
int main(void) {
    struct x { int a[2]; };
    /* size of the array in C */
    /* size of the struct in C++ */
    printf("%d\n", (int)sizeof(x)); 
} 
```

* * *

## 回答 #13

> 赞同：20
> 
> 时间：2012-10-15T11:11:09.523

C 中的内联函数默认为外部作用域，而 C++ 中的内联函数则没有。

在 GNU C 的情况下，将以下两个文件一起编译将打印“我是内联的”，但对于 C++ 则没有。

文件 1

```
#include <stdio.h>

struct fun{};

int main()
{
    fun();  // In C, this calls the inline function from file 2 where as in C++
            // this would create a variable of struct fun
    return 0;
} 
```

文件 2

```
#include <stdio.h>
inline void fun(void)
{
    printf("I am inline\n");
} 
```

此外，C++ 隐含地将任何`const`全局视为`static`除非它被显式声明`extern`，这与 C 中`extern`的默认值不同。

* * *

## 回答 #14

> 赞同：16
> 
> 时间：2009-02-24T00:11:21.260

```
struct abort
{
    int x;
};

int main()
{
    abort();
    return 0;
} 
```

在 C++ 中返回退出代码 0，在 C 中返回 3。

这个技巧可能可以用来做一些更有趣的事情，但我想不出一个好的方法来创建一个适合 C 的构造函数。我试着用复制构造函数做一个类似无聊的例子，它会让一个参数被通过，尽管是以一种相当不便携的方式：

```
struct exit
{
    int x;
};

int main()
{
    struct exit code;
    code.x=1;

    exit(code);

    return 0;
} 
```

但是，VC++ 2005 拒绝在 C++ 模式下编译它，抱怨“退出代码”是如何重新定义的。（我认为这是一个编译器错误，除非我突然忘记了如何编程。）当编译为 C 时，它以进程退出代码 1 退出。

* * *

## 回答 #15

> 赞同：16
> 
> 时间：2015-08-24T16:30:55.503

```
#include <stdio.h>

struct A {
    double a[32];
};

int main() {
    struct B {
        struct A {
            short a, b;
        } a;
    };
    printf("%d\n", sizeof(struct A));
    return 0;
} 
```

该程序在使用 C++ 编译器编译和使用 C 编译器编译时打印`128`( ) 。`32 * sizeof(double)``4`

这是因为 C 没有范围解析的概念。在 C 中，包含在其他结构中的结构被放入外部结构的范围内。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2014-10-17T09:27:43.680

不要忘记 C 和 C++ 全局命名空间之间的区别。假设你有一个**foo.cpp**

```
#include <cstdio>

void foo(int r)
{
  printf("I am C++\n");
} 
```

和一个**foo2.c**

```
#include <stdio.h>

void foo(int r)
{
  printf("I am C\n");
} 
```

现在假设你有一个**main.c**和**main.cpp**，它们看起来像这样：

```
extern void foo(int);

int main(void)
{
  foo(1);
  return 0;
} 
```

当编译为 C++ 时，它将使用 C++ 全局命名空间中的符号；在 C 中，它将使用 C 之一：

```
$ diff main.cpp main.c
$ gcc -o test main.cpp foo.cpp foo2.c
$ ./test 
I am C++
$ gcc -o test main.c foo.cpp foo2.c
$ ./test 
I am C 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2018-11-27T06:09:48.197

```
int main(void) {
    const int dim = 5; 
    int array[dim];
} 
```

这是相当特殊的，因为它在 C++ 和 C99、C11 和 C17 中有效（尽管在 C11、C17 中是可选的）；但在 C89 中无效。

在 C99+ 中，它创建了一个可变长度数组，它与普通数组相比有自己的特点，因为它具有运行时类型而不是编译时类型，并且`sizeof array`在 C 中不是整数常量表达式。在 C++ 中，该类型完全是静态的。

* * *

如果您尝试在此处添加初始化程序：

```
int main(void) {
    const int dim = 5; 
    int array[dim] = {0};
} 
```

是有效的 C++ 但不是 C，因为*可变长度数组*不能有初始值设定项。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-22T03:06:58.233

这涉及 C 和 C++ 中的左值和右值。

在 C 编程语言中，前自增和后自增运算符都返回右值，而不是左值。这意味着它们不能位于`=`赋值运算符的左侧。这两个语句都会在 C 中给出编译器错误：

```
int a = 5;
a++ = 2;  /* error: lvalue required as left operand of assignment */
++a = 2;  /* error: lvalue required as left operand of assignment */ 
```

然而，在 C++ 中，前增量运算符返回一个**左值**，而后增量运算符返回一个右值。`=`这意味着带有前置自增运算符的表达式可以放在赋值运算符的左侧！

```
int a = 5;
a++ = 2;  // error: lvalue required as left operand of assignment
++a = 2;  // No error: a gets assigned to 2! 
```

为什么会这样？后增量使变量递增，并返回发生增量*之前*的变量。这实际上只是一个右值。变量 a 的前一个值作为临时值复制到寄存器中，然后将 a 递增。但是 a 的前一个值是由表达式返回的，它是一个右值。它不再代表变量的当前内容。

预增量首先增加变量，然后返回发生增量*后*的变量。在这种情况下，我们不需要将变量的旧值存储到临时寄存器中。我们只是在变量增加后检索变量的新值。所以预增量返回一个左值，它返回变量 a 本身。我们可以使用将此左值分配给其他东西，就像下面的语句。这是从左值到右值的隐式转换。

```
int x = a;
int x = ++a; 
```

由于预增量返回一个左值，我们也可以给它赋值。以下两个陈述是相同的。在第二个赋值中，首先 a 增加，然后它的新值被 2 覆盖。

```
int a;
a = 2;
++a = 2;  // Valid in C++. 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-11-07T15:58:39.420

空结构在 C 中的大小为 0，在 C++ 中为 1：

```
#include <stdio.h>

typedef struct {} Foo;

int main()
{
    printf("%zd\n", sizeof(Foo));
    return 0;
} 
```

# php - 无法从本地计算机与 cURL/PHP 建立 SSL 连接，可从 Web 服务器工作

> ID：12887701
> 
> 赞同：2
> 
> 时间：2012-10-14T23:54:41.530
> 
> 标签：php, ssl, curl, ssl-certificate, easyphp

几年来我一直在 Windows XP 上使用 EasyPHP 5.3.2i，我喜欢在将网站上传到我的网络服务器之前离线测试我的网站。直到现在，当我需要将 SSL 连接作为其功能的一部分时，这一直都很好。我的代码在 Web 服务器上运行时工作正常，但是当尝试从我的本地计算机（127.0.0.1 等）打开 SSL 连接时，我得到以下信息：

```
SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

在我的 Web 服务器上安装证书很容易，但是将它放在我本地设置的同一目录中并不能解决此错误。我必须在其他地方安装它还是有其他东西阻止我在这里建立 SSL 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:41:23.733

尝试将 cURL 选项设置`CURLOPT_SSL_VERIFYPEER`为 false。这将禁用对等方证书的验证。但是，您只想在测试服务器上使用此选项。您可以在[此处](http://php.net/curl_setopt)查看完整的选项列表。

# javascript - 提交 HTML 表单时 JavaScript 显示新页面

> ID：12887702
> 
> 赞同：1
> 
> 时间：2012-10-14T23:54:41.653
> 
> 标签：javascript, html

假设我有 2 个 html 文件：form.html 和 confirm.html

form.html 只有一个文本字段和一个提交按钮，当您点击提交时，它将显示您刚刚在文本字段中键入的内容。

```
 <HTML>
      <HEAD>
        <TITLE>Test</TITLE>
        <script type="text/javascript"> 

        function display(){ 
            document.write("You entered: " + document.myform.data.value);
        } 
        </script> 
      </HEAD>
      <BODY>
      <center>    
<form name="myform">

  <input  type="text" name="data">
  <input type="submit" value="Submit" onClick="display()">

</form>
    </BODY>
    </HTML> 
```

现在我希望当点击提交按钮时它会在confirm.html中显示输入的值。我应该怎么办？我的意思是 confirm.html 中应该包含什么以及如何在其他位置使用 form.html 中的数据，我是否需要创建一个单独的 JavaScript 文件来存储 JS 函数，以便我可以在两个 html 文件中使用它。我对各种东西都很陌生。

注意：这里没有 PHP 或服务器端语言或任何超级语言，我的桌面中只有 2 个 html 文件，我想使用 FireFox 进行测试。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:27:54.313

您可以尝试使用`localStorage`或`cookies`。检查以下找到的 2 个解决方案之一...

**1 -**如果您有 HTML5，您可以将您的内容存储`input`到`localStorage`.

**试试这个例子：**

`form.html`：

```
<html>
<head>
    <title>Test</title>
    <script type="text/javascript">

        // Called on form's `onsubmit`
        function tosubmit() {
            // Getting the value of your text input
            var mytext = document.getElementById("mytext").value;

            // Storing the value above into localStorage
            localStorage.setItem("mytext", mytext);

            return true;
        }

    </script> 
</head>
<body>
    <center>   
        <!-- INLCUDING `ONSUBMIT` EVENT + ACTION URL --> 
        <form name="myform" onsubmit="tosubmit();" action="confirm.html">

            <input  id="mytext" type="text" name="data">
            <input type="submit" value="Submit">

        </form>
</body>
</html> 
```

`confirm.html`：

```
<html>
<head>
<script>

    // Called on body's `onload` event
    function init() {
        // Retrieving the text input's value which was stored into localStorage
        var mytext = localStorage.getItem("mytext");

        // Writing the value in the document
        document.write("passed value = "+mytext);
    }

</script>
</head>    

<body onload="init();">

</body>

</html> 
```

* * *

**2 -**此外，正如@apprentice 所提到的，您还可以使用符合 HTML 标准的 cookie。

**试试这个例子：**

`form.html`：

```
<html>
<head>
    <title>Test</title>
    <script type="text/javascript">
        // Function for storing to cookie
        function setCookie(c_name,value,exdays)
        {
            var exdate=new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
            document.cookie=c_name + "=" + c_value;
        }

        // Called on form's `onsubmit`
        function tosubmit() {
            // Getting the value of your text input
            var mytext = document.getElementById("mytext").value;

            // Storing the value above into a cookie
            setCookie("mytext", mytext, 300);

            return true;
        }

    </script> 
</head>
<body>
    <center>   
        <!-- INLCUDING `ONSUBMIT` EVENT + ACTION URL --> 
        <form name="myform" onsubmit="tosubmit();" action="confirm.html">

            <input  id="mytext" type="text" name="data">
            <input type="submit" value="Submit">

        </form>
</body>
</html> 
```

`confirm.html`：

```
<html>
<head>
<script>

    // Function for retrieveing value from a cookie
    function getCookie(c_name)
    {
        var i,x,y,ARRcookies=document.cookie.split(";");
        for (i=0;i<ARRcookies.length;i++)
        {
            x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
            y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
            x=x.replace(/^\s+|\s+$/g,"");
            if (x==c_name)
            {
                return unescape(y);
            }
        }
    }

    // Called on body's `onload` event
    function init() {
        // Retrieving the text input's value which was stored into a cookie
        var mytext = getCookie("mytext");

        // Writing the value in the document
        document.write("passed value = "+mytext);
    }

</script>
</head>    

<body onload="init();">

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T00:28:51.170

您可以做的是使用`get`方法 ( `method="get"`) 提交表单，然后将其发送到您的`confirm.html`页面 ( `action="./confirm.html"`)。

然后，您可以使用 jQuery 从`confirm.html`页面的 URL 中检索值。

该网站提供了一种方法来做到这一点：http: [//jquerybyexample.blogspot.com/2012/06/get-url-parameters-using-jquery.html](http://jquerybyexample.blogspot.com/2012/06/get-url-parameters-using-jquery.html)。

然后，您所要做的就是调用您的`display()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T00:34:54.023

接缝很适合[persist.js](https://github.com/jeremydurham/persist-js)，它可以让您在用户的浏览器中保存和加载数据。包含其 javascript 文件后，您可以像这样保存数据：

```
var store = new Persist.Store('My Application');
store.set('some_key', 'this is a bunch of persistent data'); 
```

您可以稍后在另一个 html 页面中检索保存的数据，如下所示：

```
var store = new Persist.Store('My Application');
val = store.get('some_key'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T05:01:47.373

您也可以更改页面的内容，而不是更改页面。提交后，只需使用 innerHtml 变量更改页面。

# c++ - 从 C++ 中的数组调用信息的看似简单的问题

> ID：12887705
> 
> 赞同：-1
> 
> 时间：2012-10-14T23:55:17.707
> 
> 标签：c++, arrays

这似乎应该很容易，这就是为什么它让我特别发疯。希望那里的人会立即看到问题。我只是想从根据用户输入构建的数组构建数组。它似乎创建了一个比我想要的更大的数组。这是程序：

```
 int main()
{

  ifstream inFile;
  ofstream outFile;

  int numReq, fileSize;
  string lang, dash;

  char fileName[40];
  char confirm[10];
  char confirm2[10];
  int character;
  char year[3];
  char month[1];
  char day[1];
  char hour[1];

  cout << "What file to process?" << endl;
  cin >> fileName;

  year[0] = fileName[14];
  year[1] = fileName[15];
  year[2] = fileName[16];
  year[3] = fileName[17];

  cout << "year = " << year << "." << endl;

  month[0] = fileName[18];
  month[1] = fileName[19];

  cout << "month = " << month << "." << endl;
  cout << "so I gotta know, what is..." << endl;
  cout << "month[0]? " << month[0] << endl;
  cout << "month[1]? " << month[1] << endl;
  cout << "month[2]? " << month[2] << endl;
  cout << "month[3]? " << month[3] << endl;
  cout << "month[4]? " << month[4] << endl;
  cout << "month[5]? " << month[5] << endl;
  cout << "month[6]? " << month[6] << endl;

  day[0] = fileName[20];
  day[1] = fileName[21];

      cout << "day = " << day << "." << endl;

  hour[0] = fileName[23];
  hour[1] = fileName[24];

  cout << "hour = " << hour << "." << endl;

  cout << "so, 'fileName[23]' is = " << fileName[23] << "?" << endl;
  cin >> confirm;

  cout << "So, the year is " << year << ", the month is " << month
       << ", the day is " << day << ", the hour is " << hour << "?" << endl;
  cin >> confirm;

  //cout << "Is this what you chose? " << fileName << endl;                           
  //cin >> confirm;                                                                   
  //cout << "Which character to manipulate?" << endl;                                 
  //cin >> character;                                                                 

  //cout << "This one? " << fileName[character] << endl;                              
  //cin >> confirm2;                                                                  

  inFile.open(fileName);
  assert (!inFile.fail());

  outFile.open("revisedPracticeFile1.txt");

  outFile << fixed << showpoint; // I have no idea what this is...                    
  outFile << setprecision(2);    // .. or this for that matter.                       

  cout << "Processing data" << endl;

  inFile >> lang;

  while (!inFile.eof() ){
    if (lang.length() <= 2){

      outFile << lang << " ";

      // I should keep in mind, that, for whatever reason, it seemed like the         
      //item 'setw(6)' made the program work when I put it in, but didn't seem        
      //to make the program stop working when I took it out. Curious..                

      inFile >> dash >> numReq >> fileSize;

      outFile << numReq << " " << fileSize << endl;

    }
    else{
      inFile >> dash >> numReq >> fileSize;
          cout << "took out " << lang << " " << numReq << " " << fileSize << endl;
    }

    inFile >> lang;
  }
  inFile.close();
  //assert(!inFile.fail());                                                           
  outFile.close();

  return 0;
} 
```

...而且，这就是我运行程序时发生的情况：

```
 What file to process?
projectcounts-20090101-010000                                      
year = 2009.
month = 01009.
so I gotta know, what is...
month[0]? 0
month[1]? 1
month[2]? 0
month[3]? 0
month[4]? 9
month[5]? 
month[6]? 
day = 011009.
hour = 0111009.
so, 'fileName[23]' is = 0?
yes
So, the year is 1009, the month is 11009, the day is 111009, the hour is 0111009?
^C 
```

......所以什么给了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:02:08.513

该语法`char year[3];`声明了一个包含 3 个元素的数组。但是，然后你用它来存储 4 个元素。您的其他阵列也存在类似问题。

此外，您将 char 数组用作字符串。这是一种 C（不是 C++）的做事方式。当然，如果您愿意，您可以这样做。但是，这些 c 风格的字符串使用最后一项为零的约定。

因此，如果你想要一个 C 风格的字符串来存储工作 'foo'，你可以这样做

```
char string[10];  // anything bigger than 3 works
string[0] = 'f';
string[1] = 'o';
string[2] = 'o';
string[3] = '\0';  // this zero tells functions like `printf` that the string has ended. 
```

如果没有最后一个零，类似的函数`printf`将继续输出内存位置，直到它在某处发生零。

编辑：考虑使用 c++ std::string 进行字符串处理。

# ruby-on-rails - Ruby on Rails：在 Show 中显示成员的姓名而不是 ID

> ID：12887706
> 
> 赞同：1
> 
> 时间：2012-10-14T23:55:18.780
> 
> 标签：ruby-on-rails, model-view-controller, routes, ruby-on-rails-3.2, custom-url

> **可能重复：**
> [通过 ruby​​ 制作漂亮的 url](https://stackoverflow.com/questions/3747483/making-a-pretty-url-via-ruby)

我环顾四周，但找不到答案。我要么没有问正确的问题和/或我没有找对地方。

我定义了以下内容：

```
config/routes.rb
resources :members

members_controller.rb
def show
@member = Member.find(params[:id])
end 
```

截至目前，显示成员时，URL 为[http://myapp.tld/members/1](http://myapp.tld/members/1)。假设成员的名字是cooldude。如果可能的话，显示[http://myapp.tld/members/cooldude](http://myapp.tld/members/cooldude)甚至[http://myapp.tld/cooldude 有多难](http://myapp.tld/cooldude)？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:56:21.360

我推荐[friendly_id](https://github.com/norman/friendly_id)，但如果你想推出自己的解决方案，这应该让你开始：

1.  向模型添加`slug`字段
2.  保存前设置`slug`字段
3.  在您的模型中覆盖`to_param`以返回`slug`而不是`id`

设置您的模型：

```
# member.rb
before_save do
  self.slug = name.parameterize
end

def to_param
  slug
end 
```

将您的取景器更改为：

```
# members_controller.rb
def show
  @member = Member.find_by_name!(params[:id])
end 
```

请注意，`find_by_name!`（看到爆炸了吗？）将引发`ActiveRecord::RecordNotFound`异常而不是返回`nil`。在生产中，这将自动显示 404 页面。

在您的视图中，您可以使用`member_path(@member)`which 现在将返回`/members/cool-dude`而不是`/members/1`.

查看文档：

*   [http://apidock.com/rails/ActiveRecord/Integration/to_param](http://apidock.com/rails/ActiveRecord/Integration/to_param)
*   [http://apidock.com/rails/ActiveRecord/Base](http://apidock.com/rails/ActiveRecord/Base)（基于动态属性的查找器部分）

# php - 我可以在 mysql 查询中使用什么字符来表示所有结果？

> ID：12887709
> 
> 赞同：1
> 
> 时间：2012-10-14T23:56:08.130
> 
> 标签：php, mysql

我正在尝试创建一个 php 脚本，该脚本根据用户的过滤器输入查询数据库

所以本质上我想要

```
select * from table where parent_id = '$filter_value' 
```

但是我想为 $filter_value 应用一个默认值，如果用户没有指定任何过滤器，它将生效，并将提取所有可能的结果。

我尝试使用 * 但它没有工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:59:25.787

两种方式：

1.  将值与 NULL 进行比较

    ```
    SELECT * 
    FROM table
    WHERE ($filter_value IS NULL OR parent_id = '$filter_value') 
    ```

2.  根据 $filter_value 是否包含值动态创建 SQL。如果没有，您的查询应该是：

    ```
    SELECT *
    FROM table 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T23:58:25.943

检查过滤器变量是否为空，或者只是将查询包装在 if 语句中：

```
SELECT * FROM baz WHERE foo = :bar OR :bar IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T00:57:22.747

这不完全是你问的，但它非常接近，我认为一个更好的方法。你可以这样做：

```
if ( empty( $filter_value ) === false ) {
    select * from table where parent_id = '$filter_value'
} else {
    select * from table
} 
```

这只是一个例子，不是很好的 php 语法。

但是这个想法是，如果你想根据某事有不同的行为，那么你应该这样编程，例如，使用 if，那样，你知道每种情况下会发生什么并控制情况，而不是取决于什么mysql 使用传递的空值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T23:57:37.177

好的，我尝试只插入一个空格作为默认 var 值，如

```
$filter_value = '' 
```

解决了问题：$

# javascript - 如何增加画布位深度以在 JavaScript 中创建更高质量的图片？以及如何在输出时创建画布大小

> ID：12887711
> 
> 赞同：2
> 
> 时间：2012-10-14T23:56:18.877
> 
> 标签：javascript, image, html, canvas

我是 HTML5 和 JavaScript 的新手，我正在尝试使用 canvas 元素来创建高质量的输出图像。

1.  目前的目的是让用户拥有自己的所有图像（jpeg、png、svg）。这就像一个魅力。但是，当我渲染图像时，它始终是 32 位 png。如何使用 JavaScript（最好）创建更高质量的图片？
2.  当我输出文件时，它似乎总是与画布保持相同的分辨率，我如何使用 JavaScript 更改它（最好）

在此先感谢各位，我环顾了一会儿，但找不到答案:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:10:18.110

如果要使用 getImageData 或 toDataURL 创建更大的图像，则必须：

1.  创建一个比普通画布更大的内存画布
2.  将整个场景重绘到内存画布上。您可能希望调用`ctx.scale(theScale, theScale)`内存中的上下文来缩放图像，但这在很大程度上取决于它们最初是如何创建的（图像？画布路径？）
3.  调用`getImageData`或`toDataURL`在内存画布上而不是您的普通画布上

通过内存画布，我的意思是：

```
var inMem = document.createElement('canvas');
// The larger size
inMem.width = blah;
inMem.height = blah; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T03:40:51.940

首先，当您将图像绘制到画布上时，它还不是 png，它是一个简单的原始位图，在您调用它的方法时画布 API 会在其中工作，然后将其转换为 png 以便浏览器显示它，这就是您使用`toDataURL`. 使用时，`toDataURL`您可以选择希望输出的图像格式，我认为 jpeg 和 bmp 与 png 一起支持。（不要将其视为转换为另一种格式的 png，因为它不是）

而且我不知道通过向像素添加更多位来提高质量到底是什么意思，您会看到 32 位足以让所有 RGBA 通道拥有真彩色 8 位深度，为您提供比人眼更多的*颜色**马上*看。我知道根据用户暴露在您的照片中的照明和角度，他对颜色的感知可能会有所不同，但*质量不会有所不同*我想说的它只取决于它的分辨率。无论如何，画布并不是为使用那些更深的颜色而设计的，老实说，在你可以在画布上渲染的任何类型的场景中，甚至不需要太多颜色信息，这仅与大型工作室制作的高清电影和游戏有关，也，即使您可以在画布上使用深色，它实际上也取决于用户的视频卡和屏幕的支持，我认为大多数人都没有。

如果您希望添加与每个像素的颜色不直接相关但可能与潜在转换有关的信息，他们可以让您更好地创建自己的类型，能够承载`imageData`画布 API 可接受的类型，保持其 32 位格式和附加信息在相应的数组上。

是的，输出图像具有与画布相同的分辨率，但提供了几种方法来调整最终构图的大小。正如 Simon Sarris 所说，创建一个屏幕外画布，其分辨率是您希望图像的最终分辨率，然后，您可以：

1.  通过调用调整光栅图像的大小，同时使用调整大小参数`drawImage`提供生成的图像`toDataURL`
2.  正如西蒙所说，在那里重画你的场景，如果你的构图包含通过画布 API 创建的形状，而不仅仅是放在一起的图像文件，这将减少质量损失

如果您事先知道您想要的最终分辨率，那么只需将画布的宽度和高度设置为它，但 CSS 宽度和高度可以设置不同，以便您的画布按照您的意愿适合您的网页。

# java - 如何在Java中使用Regex在字符之间的字符串中查找值

> ID：12887714
> 
> 赞同：-2
> 
> 时间：2012-10-14T23:56:50.873
> 
> 标签：java, regex

我正在尝试使用正则表达式在表格中查找一些费率，这些正则表达式正在从 HTML 中读取到字符串中。这是一个例子：

```
<td>Euro</td>
<td class='rtRates'><a href='/graph/?from=USD&amp;to=EUR'>0.772199</a></td>
<td class='rtRates'><a href='/graph/?from=EUR&amp;to=USD'>1.295003</a></td> 
```

我正在尝试查找上述字符串中包含的数字。它们不断变化，因此它不能是硬编码的数字搜索。

我试过使用类似的东西：to=EUR'>(...)

但它只返回 0.7，而不是其余的。任何帮助表示赞赏！

编辑：请求了一些代码，所以这里是

```
 String re2="to=EUR'>(...)";   // Float 1

    Pattern p = Pattern.compile(re2,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
    Matcher m = p.matcher(webData);

    if (m.find())
    {
        String float1=m.group(1);
        System.out.print("("+float1.toString()+")"+"\n");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:02:53.910

您可以使用此表达式进行快速而肮脏的搜索：

```
EUR'>([^<]*)< 
```

但是，这并不理想：使用 HTML 或 XHTML 解析器是更好的解决方案，因为它比任何基于正则表达式的解决方案都更强大和健壮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:14:30.013

要仅匹配数字，请使用正向环视：

```
(?<=EUR'>)\\d+(?:\\.\\d*)?(?=<)
(?<=USD'>)\\d+(?:\\.\\d*)?(?=<) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T00:19:13.323

好的，不是您要求的，但我想指出，当您要查找的字符串的两边都这样固定时，您可以使用 substring() 和 indexOf() 方法，这通常可以更简单地调试：

```
public class substring_not_regex {

   public static void main(String args[])
   {
      String test= "<td class='rtRates'><a href='/graph/?from=EUR&amp;to=USD'>1.295003</a></td>";     
      String result = getConversion(test,"to=USD'>");
      System.out.println("The result is: " + result);
      test= "<td class='rtRates'><a href='/graph/?from=USD&amp;to=EUR'>0.772199</a></td>";
;     result = getConversion(test,"to=EUR'>");
      System.out.println("The result is: " + result);
   }

   static String getConversion(String tableLine,String toSearchFor)
   {
      String value = "";
      String aref_terminator = "</a>";
      int position = tableLine.indexOf(toSearchFor);
      if ( position == -1 ) return value;
      int start_position = position + toSearchFor.length();
      int end_position = tableLine.indexOf(aref_terminator,start_position);
      if ( end_position == -1 ) return value;
      value = tableLine.substring(start_position,end_position);
      return value;
   }
} 
```

输出：

```
The result is: 1.295003
The result is: 0.772199 
```

# android - 将 Geopoint 转换为 json 字符串问题

> ID：12887715
> 
> 赞同：1
> 
> 时间：2012-10-14T23:56:54.117
> 
> 标签：android, json, gps, location, gson

我正在使用 Gson 将包含两个的类转换`GeoPoints`为 JSON 字符串。下面的代码在我的类中实现`LocationListener`......

```
lat = (float) loc.getLatitude();
lng = (float) loc.getLongitude();
alt = (float) loc.getAltitude();

GeoPoint nextGeoPoint = new GeoPoint((int)(lat * 1E6), (int)(lng * 1E6));
MapPlot mapleg = new MapPlot();
mapleg.fromPoint = LastGeoPoint;
mapleg.toPoint = nextGeoPoint;              

Gson gson = new Gson();
String jsonString = gson.toJson(mapleg); //convert the mapleg class to a json string 
```

我期望 JSON 字符串有两组纬度和经度，但生成了以下 JSON 字符串......

```
{"fromPoint":{"mMapPoint":{"latitudeE6":33736724,"longitudeE6":-118101837,"pixelCoordX":92309232,"pixelCoordY":214935878}},"toPoint":{"mMapPoint":{"latitudeE6":37422004,"longitudeE6":-122084091,"pixelCoordX":86370464,"pixelCoordY":208176089}}} 
```

像素坐标是什么？上的文档`GeoPoint`与像素没有任何关系。当我稍后获取这些数据并将其绘制在 a 上时，我会解决这个问题，`mapView`但我还没有到达那里。奇怪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:37:18.850

GSON 查看对象上的字段而不是 getter 方法，GeoPoints 实际上具有那些私有字段以及您感兴趣的那些。请参阅此处以获取使这些字段在 GeoPoint 上可访问的请求：[http:// code.google.com/p/android/issues/detail?id=21327](http://code.google.com/p/android/issues/detail?id=21327)。

所以 GSON 基本上试图序列化对象的整个状态，但你只想要外部可见的东西。您可以通过创建 Gson 对象来更改行为，如下所示：

```
GsonBuilder().excludeFieldsWithModifiers(Modifier.PRIVATE, Modifier.PROTECTED).create(); 
```

# ruby-on-rails - 使用“puts”从外部域获取信息

> ID：12887718
> 
> 赞同：0
> 
> 时间：2012-10-14T23:57:09.080
> 
> 标签：ruby-on-rails, ruby, puts

前几天我刚开始使用 ruby​​ on rails，我在徘徊是否可以使用 puts 函数从外部页面上的页面获取 div 的内容。

就像是`puts "http://www.example.com #about"`

像这样的工作吗？或者您是否必须获取整个页面然后放置您想要的那个部分？

另外，如果“example.com”#about div 上的内容不断变化，则会不断更新其输出，还是只会在每次刷新页面时运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:06:24.973

库`open-uri`（用于获取页面）和[Nokogiri](http://nokogiri.org/) gem（用于解析和检索特定内容）可以帮助解决此问题。

```
require 'open-uri'
require 'nokogiri'

doc = Nokogiri::HTML(open('http://www.example.com/'))

puts doc.at('#about').text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:08:06.317

`puts`不会那样工作。不过，Ruby 使解析 HTML 变得相当容易。看看[Nokogirl](http://nokogiri.org/)库，您可以使用 xpath 查询来获取要打印的 div。我相信如果 div 发生更改，您将需要重新打开文件，但我对此并不肯定 - 您可以轻松测试它（或者这里的某人可以确认或拒绝该声明）。

# wcf - SYNC FRAMEWORK-批处理

> ID：12887724
> 
> 赞同：1
> 
> 时间：2012-10-14T23:58:22.447
> 
> 标签：wcf, sync, microsoft-sync-framework, batching

我能够使用同步框架 2.1 over WCF(N-Tier) 同步两个远程数据库。

为了在传输大数据时提高性能，我实施了批处理。

但我面临以下错误消息：

```
An unexpected error occurred when applying batch file 1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch. See the inner exception for more details. 
```

这只发生在最后一个批处理文件中。在批处理文件集中应用最后一个批处理文件时，代码以上述错误消息终止。

下面我粘贴xml格式的webservice日志（内部异常）：

```
<InnerException>
<ExceptionType>System.IO.FileNotFoundException, mscorlib, Version=4.0.0.0,     Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Could not find file 'c:\windows\system32\inetsrv\1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch'.</Message>
<StackTrace>
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode)
at Microsoft.Synchronization.Data.DbSyncBatchInfoFactory.Deserialize(String batchFileName, Boolean deserializeData)
at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 lookupLocation, UInt32 expectedNumber)
at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 expectedNumber, String&amp; batchFileName)
at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ApplyBatches(DbSyncScopeMetadata scopeMetadata, DbSyncSession syncSession, SyncSessionStatistics sessionStatistics)
</StackTrace>
<ExceptionString>System.IO.FileNotFoundException: Could not find file 'c:\windows\system32\inetsrv\1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch'.
File name: 'c:\windows\system32\inetsrv\1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch'
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode)
at Microsoft.Synchronization.Data.DbSyncBatchInfoFactory.Deserialize(String batchFileName, Boolean deserializeData)
at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 lookupLocation, UInt32 expectedNumber)
at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 expectedNumber, String&amp; batchFileName)
at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ApplyBatches(DbSyncScopeMetadata scopeMetadata, DbSyncSession syncSession, SyncSessionStatistics sessionStatistics)         
</ExceptionString>
</InnerException> 
```

非常感谢您的帮助和建议！！

先谢谢各位朋友！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:18:44.290

尝试将批处理目录移出 IIS 文件夹之外。

# java - RowMapper 是抽象的，无法实例化

> ID：12887732
> 
> 赞同：2
> 
> 时间：2012-10-14T23:59:24.913
> 
> 标签：java, spring-mvc, jdbc, jdbctemplate

我正在尝试实现[此处](https://stackoverflow.com/a/10612703)提到的解决方案但是，我收到错误“Rowmapper 是抽象的，无法实例化”和“表达式的非法开始”。下面正是我所拥有的

```
List<String> strLst  = jdbcTemplate.query(query,
                    new RowMapper {
                        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
                            return rs.getString(1);
                        }
                    }); 
```

如果我`?`的查询中有多个怎么办。

例如：

`select * from table where a = ? and b = ?`

如何`?`在上面的代码中将参数 () 传递到此查询中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:02:02.477

您正在实现的代码使用`RowMapper`. 正确的语法是：

```
new RowMapper() { ... } 
```

你只是无意中遗漏了`()`.

# jquery - Jquery 动画“悬停”丢失删除项目

> ID：12887737
> 
> 赞同：1
> 
> 时间：2012-10-15T00:00:12.520
> 
> 标签：jquery, jquery-animate, css-animations

我正在尝试从列表中删除一个项目而不会丢失动画“悬停”： [jsfiddle](http://jsfiddle.net/LV9Eg/2/)

**代码**

```
$(window).load(function() {

    $('.parent').hover(function() {

        $('.child').css({
            "width": "320px",
            "height": "300px"
        });
        $(this).find('.child').dequeue().stop().slideToggle("fast");

    });

    $(".binda").click(function() {
        $(this).remove()
    });

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:13:38.590

试试这个**演示** [http://jsfiddle.net/pYa87/](http://jsfiddle.net/pYa87/)

接口：

*   `.mouseover`- [http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)
*   `.slideUp`- [http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

希望它适合原因`:)`

**代码**

```
$(window).load(function() {

    $('.parent').mouseover(function() {

        $('.child').css({
            "width": "320px",
            "height": "300px"
        });
        $(this).find('.child').dequeue().stop().slideDown("fast");

    }).mouseout(function() {

        $(this).find('.child').dequeue().stop().slideUp("fast");
    });

    $(".binda").click(function() {
        $(this).remove()
    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:13:49.913

你的方法是有道理的，但不幸的是行不通。我修复了小提琴并根据我认为您正在尝试做的事情来实现您可以做的事情。

```
$(window).load(function() {

    $('.parent').hover(function() {
        $('.child').stop().slideDown('fast');
    }, function() {
        $('.child').stop().slideUp('fast');
    });

    $('.binda').click(function() {
        $(this).remove();
    });

});​ 
```

**[小提琴](http://jsfiddle.net/AustinBrunkhorst/LV9Eg/3/)**

# javascript - 用 Ajax 响应替换 DOM 节点

> ID：12887740
> 
> 赞同：3
> 
> 时间：2012-10-15T00:01:09.773
> 
> 标签：javascript, ajax, dom

我有一个 ajax 响应，如下所示：

```
<div class = "element3"> some other text</div> 
```

我想用resp替换下面的element1：

```
<div class = "a">
  <div class = "element1"></div>
  <div class = "element2"></div>
</div> 
```

所以更换后我会得到：

```
<div class = "a">
  <div class = "element3"> some other text</div>
  <div class = "element2"></div>
</div> 
```

我尝试了 replaceChild() 但它不起作用，因为响应不是 DOM 对象..

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:06:26.163

与`innerHTML()`仅替换标签之间的内容不同，它还`outerHTML()`允许您替换开始和结束标签，有效地替换 DOM 节点。

```
var element = document.getElementsByClassName('element1')[0];
element.outerHTML("<div class = 'element3'> some other text</div>"); 
```

看：

*   [http://help.dottoro.com/ljloliex.php](http://help.dottoro.com/ljloliex.php)

*   [http://help.dottoro.com/ljdkwhqf.php](http://help.dottoro.com/ljdkwhqf.php)

注意：由于使用`getElementsByClassName()`，此解决方案适用于（参见：[http](http://caniuse.com/getelementsbyclassname) ://caniuse.com/getelementsbyclassname ）：

*   互联网浏览器 9+

*   火狐 3+

*   歌剧 9.5+

*   铬 4+

*   Safari 3.1+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:03:05.920

如果您只想替换文本，请`innerText`在目标元素上设置属性。如果要插入所有 HTML，请`innerHTML`在目标元素上设置属性。要替换目标元素本身，我相信你可以使用`outerHTML`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T00:29:15.030

我建议，虽然您已经有了答案，但以下内容：

```
var newContent = '<div class = "element3"> some other text</div>',
    temp = document.createElement('div'),
    div1 = document.getElementsByClassName('element1')[0];

temp.innerHTML = newContent;

div1.parentNode.replaceChild(temp.firstChild, div1);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DuZz7/)。

鉴于您的问题基本上是“新内容”不是 DOM 节点，最明智的解决方案是简单地*将*其设为 DOM 节点。当然，这确实带有使用`document.getElementsByClassName()`.

下面是一个跨浏览器版本，它*应该*为那些不支持的浏览器提供一个后备`document.getElementsByClassName()`（适用于 IE 7，其他版本不可用；值得注意的是，三元条件可能需要升级以应对一些这些浏览器中的一些可能会处理条件评估）：

```
function findByClassName(classname, el) {
    if (!classname) {
        return false;
    }
    else {
        el = !el ? document.getElementsByTagName('body')[0] : el;
        var children = el.getElementsByTagName('*'),
            withClass = [];

        for (var i = 0, len = children.length; i < len; i++) {
            if (children[i].nodeType == 1) {
                var classes = children[i].className.split(/\s+/);
                for (var c = 0, leng = classes.length; c < leng; c++) {
                    if (classes[c] == classname) {
                        withClass.push(children[i]);
                    }
                }
            }
        }

        return withClass;
    }
}

var newContent = '<div class = "element3"> some other text</div>',
    temp = document.createElement('div'),
    div1 = document.getElementsByClassName ? document.getElementsByClassName('element1')[0] : findByClassName('element1')[0];

temp.innerHTML = newContent;

div1.parentNode.replaceChild(temp.firstChild, div1);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DuZz7/1/)。

参考：

*   [的兼容性`document.getElementsByClassName()`](http://www.quirksmode.org/dom/w3c_core.html#t11)。
*   [的兼容性`element.outerHTML`](http://www.quirksmode.org/dom/w3c_html.html#t05)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T00:07:13.220

这是一个用另一个 DOMElement 替换 DOMElement的[jsFiddle示例。](http://jsfiddle.net/S4xVd/)

```
<div class = "a">
<div class="element1">--</div>
  <div class="element2">--</div>
</div>

<div class="element3"> some other text</div>

var element = document.getElementsByClassName('element1')[0];
var replacement = document.getElementsByClassName('element3')[0];
element.parentNode.replaceChild(replacement, element); 
```

# javascript - JavaScript 计算器不工作

> ID：12887753
> 
> 赞同：0
> 
> 时间：2012-10-15T00:03:38.203
> 
> 标签：javascript, jquery, math, nan

我的小时工资计算器不工作。我应该得到 3 个不同的数字，但前两个数字没有出现，最后一个数字是 NaN。请帮忙。我正在使用的代码如下所示。

```
var hourly = $('#txtHourlyWage').val();
var fraction = hourly/60/60/10;
var calc = new Calculator();
function addCommas(str){
    return(str+"").replace(/\b(\d+)((\.\d+)*)\b/g,function(a,b,c){
        return(b.charAt(0)>0&&!(c||".").lastIndexOf(".")?b.replace(/(\d)(?=(\d{3})+$)/g,"$1,"):b)+c;
    });
}

$('#year-calculation').html(addCommas(Math.round(calc.annual/(hourly*calc.per_hour))) + ' years' );
$('#your-time').html( (((hourly*2080)/ calc.annual) * 52 * 5 * 8).toFixed(1) + " hours");

$('#txtHourlyWage').bind('keypress', function(e) { 
    if ($('#txtHourlyWage').length < 2) {
        return ( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57)) ? false : true ;
    } else {
        return false;
    }
    return
})

$('#txtHourlyWage').keyup(function (){

    $('#year-calculation').html(addCommas(Math.round(calc.annual/(hourly*calc.per_hour))) + ' years' );
    $('#your-time').html( (((hourly*2080)/ calc.annual) * 52 * 5 * 8).toFixed(1) + " hours");
    $('#HourlyWageOutput').html("At this rate, it would take you <span id=\"year-calculation\">&nbsp;</span> to earn his yearly income and <span id=\"your-time\">&nbsp;</span> for him to earn yours.");
}); 
```

此代码产生以下内容：

> 按照这个速度，你要赚他的年收入，他也要赚你的。
> 南小时

从上面可以看出，代码生成的内容没有意义，因为缺少数字。我不能说我做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:06:13.700

你没有设置`keyup`事件的数字。

你需要把这些行：

```
$('#year-calculation').html(addCommas(Math.round(calc.annual/(hourly*calc.per_hour))) + ' years' );
$('#your-time').html( (((hourly*2080)/ calc.annual) * 52 * 5 * 8).toFixed(1) + " hours"); 
```

里面`keyup`。事实上，它们只被触发一次，onload，大概在有任何计算之前。

**再次编辑：仍然未经测试，但我认为它应该工作：**

```
function addCommas(str){
    return(str+"").replace(/\b(\d+)((\.\d+)*)\b/g,function(a,b,c){
        return(b.charAt(0)>0&&!(c||".").lastIndexOf(".")?b.replace(/(\d)(?=(\d{3})+$)/g,"$1,"):b)+c;
    });
}

$('#txtHourlyWage').bind('keypress', function(e) { 
    if ($('#txtHourlyWage').length < 2) {
        return ( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57)) ? false : true ;
    } else {
        return false;
    }
    return;
});

$('#HourlyWageOutput').html("At this rate, it would take you <span id=\"year-calculation\">&nbsp;</span> to earn his yearly income and <span id=\"your-time\">&nbsp;</span> for him to earn yours.");

$('#txtHourlyWage').keyup(function (){

  var hourly = $(this).val();
  var fraction = hourly/60/60/10;
  var calc = new Calculator();

  $('#year-calculation').html(addCommas(Math.round(calc.annual/(hourly*calc.per_hour))) + ' years' );
  $('#your-time').html( (((hourly*2080)/ calc.annual) * 52 * 5 * 8).toFixed(1) + " hours");
}); 
```

`$('#HourlyWageOutput')`当然，如果已经在 HTML 中定义，则无需设置。

# c++ - 为什么在 C++11 中添加了 std::isblank？

> ID：12887757
> 
> 赞同：12
> 
> 时间：2012-10-15T00:04:36.767
> 
> 标签：c++, c++11

我注意到在 C++11 中添加了[std::isblank](http://en.cppreference.com/w/cpp/locale/isblank) (in `<locale>`) 和[std::isblank](http://en.cppreference.com/w/cpp/string/byte/isblank) (in )。`<cctype>`我发现这个[页面](http://www.chemie.fu-berlin.de/chemnet/use/info/libc/libc_4.html)说`Returns true if c is a blank character; that is, a space or a tab.`（对于“C”语言环境），所以空白字符可能是空白字符的子集，但是我不明白区分的原因，因为我们有`std::isspace`. 为什么被`std::isblank`添加到标准库中？

**更新** 根据[这里](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n780.htm)，看起来 POSIX 规范是第一个引入“空白”字符类的，然后 C 和 C++ 标准也随之而来。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T00:26:46.543

> 可能空白字符是空白字符的子集

绝对是一个子集。C99 7.4.1.3/2 说，“标准空白字符或 isspace 为真的特定于语言环境的字符集之一”。

它继续我认为的动机：“那是用来分隔一行文本中的单词”。

`isspace`*对于不*用于分隔文本行中的单词的某些字符返回 true 。主要是换行符。

显然，这是指`isspace`and `isblank`in `<cctype>`，而不是`<locale>`您所问的 in ，但我认为这没有任何区别。我认为该标准并没有真正明确说明，但两者指的是相同的“字符类型”列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T00:16:59.833

两者都是地区感知的——不同之处在于每个地区的规则，这将是一个太大的列表，无法在此处列举（假设有一个单一的、详尽的列表开始）。

特别感兴趣的是默认的 C 语言环境，其行为如下：

*   `isspace`返回`true`空格、换页、换行、回车、水平制表符和垂直制表符。
*   `isblank`仅返回`true`空格和水平制表符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T11:13:14.940

原因很简单，它在 C 中，因此为了保持一致性，也应该在 C++ 中，正如我在添加它的[DR中指出的那样：](http://cplusplus.github.com/LWG/lwg-defects.html#2019)

> C99 添加`isblank`和`iswblank`到`<locale.h>`但`<locale>`不提供任何等效项。

我注意到 C++ 中缺少它的原因以及我想要添加它的原因是，它`std::regex_traits<char>`是支持字符类所必需的，因此如果 C99函数可用，`"blank"`那么支持它会容易得多，否则 C++ 正则表达式实现需要以某种方式识别“为真的`isblank`特定于语言环境的字符集”。`isspace`使用`isblank`可以解决问题。

# objective-c - 如何访问已经存在的视图控制器

> ID：12887758
> 
> 赞同：0
> 
> 时间：2012-10-15T00:04:44.257
> 
> 标签：objective-c, ios, xcode

我想使用代码从一个视图控制器移动到下一个视图控制器。我有这个：

```
[self.navigationController pushViewController:ViewController2 animated:YES]; 
```

此代码用于启动的第一个屏幕。我希望它（在特定条件下）推送到称为 ViewController2 的 NEXT 视图控制器。ViewController2 已经存在（它是一个故事板项目）。但是当前的视图控制器不知道上面代码中的 ViewController2 是什么。我如何“获取”或“访问”ViewController2？它已经存在，带有 .h 和 .m 文件，但我该如何调用它！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:21:17.043

如果您使用的是故事板，您可以通过它的标识符访问它，如下所示：

```
ViewController2 *viewController2 = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController2"]; 
```

确保将其标识符正确设置为“ViewController2”或任何有意义的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:27:27.460

这不是您在使用情节提要时通常推送视图控制器的方式。您应该在 IB 中设置推送 segue，并使用 performSegueWithIndentifier:sender: 转到下一个控制器。您还应该实现 prepareForSegue:sender: 在其中您可以访问源控制器和目标控制器。这是您通常提供第二个视图控制器完成其工作所需的任何数据的方法。

# javascript - 与 PikaChoose 集成时创建 Fancybox 画廊

> ID：12887761
> 
> 赞同：8
> 
> 时间：2012-10-15T00:05:25.777
> 
> 标签：javascript, jquery, fancybox

当与 pikachoose 集成时，我正在尝试创建一个 fancybox 画廊。除了在fancybox弹出窗口显示时我无法显示箭头或画廊工作之外，我一切正常。

这是我的html：

```
<ul class="jcarousel-skin-pika" id="pikame">
<li><a rel="gallery" href="/image1.jpg"><img alt="large image" src="/image1.jpg" /></a></li>
<li><a rel="gallery" href="/image2.jpg"><img alt="large image" src="/image2.jpg" /></a></li>
<li><a rel="gallery" href="/image3.jpg"><img alt="large image" src="/image3.jpg" /></a></li>
<li><a rel="gallery" href="/image4.jpg"><img alt="large image" src="/image4.jpg" /></a></li>
</ul> 
```

这是我的js：

```
jQuery(document).ready(function () {
    var a = function (self) {
        self.anchor.fancybox({
            'arrows': 'true'
        });
    };
    jQuery("#pikame").PikaChoose({
        carousel: true,
        autoPlay: false,
        buildFinished: a
    });
}); 
```

这是 pikachoose 网站关于基本集成的链接：我拥有所有东西，除了一个可以工作的 fancybox 画廊（该选项不在这个网站上）。[http://www.pikachoose.com/how-to-fancybox/](http://www.pikachoose.com/how-to-fancybox/)我看到其他人问过这个问题，但没有可靠的答案。这甚至可能是不可能的。任何帮助表示赞赏。

# twitter - 你如何在网站上嵌入最新的推文？

> ID：12887764
> 
> 赞同：12
> 
> 时间：2012-10-15T00:05:42.050
> 
> 标签：twitter

在一个网站上，我需要它来显示来自一个帐户的最新推文。

以前，转到 Twitter 的 Goodies 页面并限制为一条推文即可完成此操作。现在有新版本的时间线嵌入似乎没有这个选项，那么它是如何实现的呢？我可以使用我保存的旧版本 1 嵌入，但根据 Twitter 常见问题解答，所有旧版本明年都将停止工作，所以想使用新版本 1.1 代码..

以下是 Twitter 提供的新代码。只需要知道如何/在哪里添加“count = 1”，就像使用原始版本一样。

```
<a class="twitter-timeline" href="https://twitter.com/example" data-widget-id="0000000000">Tweets by @example</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-11-28T21:06:07.050

这是显示最新的 n 条推文的方法。只需更改 data-tweet-limit 中的值。

`<a class="twitter-timeline" href="https://twitter.com/twittername" data-tweet-limit="1"> Tweets by @twittername</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:14:23.267

```
 jQuery(function($){
    $(".tweet").tweet({
      join_text: "auto",
      username: "seaofclouds",
      avatar_size: 48,
      count: 3,
      auto_join_text_default: " we said, ",
      auto_join_text_ed: " we ",
      auto_join_text_ing: " we were ",
      auto_join_text_reply: " we replied ",
      auto_join_text_url: " we were checking out ",
      loading_text: "loading tweets..."
    });
  }); 
```

更多选项请[点击这里](http://tweet.seaofclouds.com/)

# xml - 脚本语言与 XML 驱动引擎比较

> ID：12887766
> 
> 赞同：1
> 
> 时间：2012-10-15T00:06:02.660
> 
> 标签：xml, scripting

我们有一个小组正在使用（并希望继续使用）机器人的场景引擎（基于状态机）。开发过程会生成一个 xml 文件，然后由播放器运行。直觉上，对我来说，这感觉受到限制，但我没有编程背景来真正支持或反对这一点，而不是直接使用脚本（或编程）语言。

其他人对这两种方法的想法是什么？

# c# - SQL 命令未填充数据读取器

> ID：12887767
> 
> 赞同：1
> 
> 时间：2012-10-15T00:06:11.337
> 
> 标签：c#, asp.net, sql

我正在研究嵌套中继器。目前我的问题似乎是，当我执行我的 SQL 命令时，没有数据返回给数据读取器。即使我在 SQL Server 中运行完全相同的查询（复制和粘贴）。

我的 noteDrClient 阅读器不包含数据，但它知道表中有 5 列。我不知道此时该做什么，也不知道为什么没有数据被传递到数据读取器中。任何人都可以看到一个明显的问题吗？

```
 SqlConnection con = new SqlConnection("Data Source=***;Initial Catalog=*;User   ID=*;Password=*;Integrated Security=False;MultipleActiveResultSets=true;"); 
```

以上是我的连接字符串。请注意，我将多个活动结果集设置为 true。我这样做是因为我不断收到关于我的数据阅读器打开的错误，即使它已关闭。

```
 protected void rptList_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        RepeaterItem item = e.Item;
        if ((item.ItemType == ListItemType.Item) ||
            (item.ItemType == ListItemType.AlternatingItem))
        {

            System.Data.Common.DbDataRecord rd = (System.Data.Common.DbDataRecord)e.Item.DataItem;

            Repeater nestedRepeater = e.Item.FindControl("NotesRepeater") as Repeater;
            string FID = rd[0].ToString();

            using (cmd2 = new SqlCommand("SELECT * FROM notes WHERE FID = 1356;", con)) ;

            SqlDataReader noteDrClient = cmd2.ExecuteReader();  //no data is being filled to the data reader... even though this command pulls data in SQL Server Management Studio.

            if (noteDrClient.Read()) {   //bind the repeater if there is data to bind
                    nestedRepeater.DataSource = noteDrClient;
                    nestedRepeater.DataBind();
            }

            noteDrClient.Close();                                   

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:44:55.557

您使用的语句是在您有机会使用 SqlCommand 之前处理它。此外，您正在尝试绑定到 DataReader。将数据读取器的结果获取到“Note”实体的集合中，然后绑定到该集合。

```
 using (SqlCommand cmd2 = new SqlCommand("SELECT * FROM notes WHERE FID = 1356;", con))
        {

            using(SqlDataReader noteDrClient = cmd2.ExecuteReader())
            {

                while (noteDrClient.Read()) 
                {   
                    Note n = new Note();
                    ... get note from data reader
                    notes.Add(n); // add note to collection
                }
            }
        } 

        // bind child
        nestedRepeater.DataSource = notes;       
        nestedRepeater.DataBind(); 
```

***编辑：***

您可能想查看 DataAdapter - [http://www.mikesdotnetting.com/Article/57/Displaying-One-To-Many-Relationships-with-Nested-Repeaters](http://www.mikesdotnetting.com/Article/57/Displaying-One-To-Many-Relationships-with-Nested-Repeaters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:27:38.690

我通过创建一个额外的连接字符串而不是重用我一直用于主中继器的相同连接字符串来解决了这个问题。数据仍然没有约束力，但它确实存在。

```
 using (cmd2 = new SqlCommand("SELECT * FROM notes WHERE FID = 1356;", con2)) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T00:40:59.370

我认为您查询中的分号可能会导致问题。

尝试在值周围使用引号，如下所示：

`SELECT * FROM notes WHERE FID = '1356;'`

如果分号不是值的一部分：

`SELECT * FROM notes WHERE FID = '1356'`

# ruby-on-rails - 多态模型、Forms 和 AssociationTypeMismatch

> ID：12887770
> 
> 赞同：2
> 
> 时间：2012-10-15T00:06:18.583
> 
> 标签：ruby-on-rails, ruby, forms, polymorphism

我有两个模型，内容和页面

```
class Content < ActiveRecord::Base
   attr_accessible :large_description, :short_description
   belongs_to :contentable , :polymorphic => true
end

class Page < ActiveRecord::Base
   extend FriendlyId
   friendly_id :title, use: [:slugged, :history]
   attr_accessible :active, :menu, :slug, :title, :contents

   validates :title, presence: true

   has_many :contents, as: :contentable
end 
```

这是我创建包含内容的新页面的简单表单

```
<%= form_for([:admin,@page], :html => {:class => "nice custom"}) do |f| %>
  <div class="formRow">
    <%= f.label :title, "Title"%>
    <%= f.text_field :title, :class => 'input-text'%>
  </div>
<%= f.fields_for :contents do |content_form| %>
  <div class="formRow">
   <%= content_form.label :short_description, "Short Description"%>
   <%= content_form.text_area :short_description, :class => 'tinymce expand'%>
  </div>
  <div class="formRow">
    <%= content_form.label :large_description, "Large Description"%>
    <%= content_form.text_area :large_description, :class => 'tinymce expand'%>
  </div>
<% end %>
 <div class="formRow">
    <%= f.submit "Create", :class => 'button small nice blue'%>
 </div>
<% end %> 
```

最后这是我的页面控制器

```
class Admin::PagesController < ApplicationController
  layout 'admin'
  def index
    @pages = Page.order("created_at")
  end
  def new
    @page = Page.new
  end
  def create
    @page = Page.new(params[:page])
    if @page.save
     redirect_to page_url
    else
     render :new
     end
  end

  def show
    @page = Page.find(params[:id])
  end

  def destroy
    @page = Page.find(params[:id])
    @page.destroy
    redirect_to page_url
  end
end 
```

我使用了命名空间管理员。所以问题是当我发送表格时，我收到了这个错误，我不明白为什么会有不匹配：

> ActiveRecord::AssociationTypeMismatch in Admin::PagesController#create Content(#70150608194420) 预期，得到 Array(#70150590276780)
> 
> activerecord (3.2.8) lib/active_record/associations/association.rb:204:in `raise_on_type_mismatch' activerecord (3.2.8) lib/active_record/associations/collection_association.rb:308:in`block in replace' activerecord (3.2.8) lib/active_record/associations/collection_association.rb:308:in `each' activerecord (3.2.8) lib/active_record/associations/collection_association.rb:308:in` replace' activerecord (3.2.8) lib/active_record/associations/collection_association.rb:41:in `writer' activerecord (3.2.8) lib/active_record/associations/builder/association.rb:51:in`block in define_writers' activerecord (3.2.8) lib/active_record/attribute_assignment.rb:94:in `block in assign_attributes' activerecord (3.2.8) lib/active_record/attribute_assignment.rb:93:in`each' activerecord (3.2.8) lib/active_record/attribute_assignment.rb: 93:在 `assign_attributes' activerecord (3.2.8) lib/active_record/base.rb:498:in`初始化'app/controllers/admin/pages_controller.rb:13:in create'actionpack `new' app/controllers/admin/pages_controller.rb:13:in`(3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action' actionpack (3.2.8) lib/abstract_controller/base.rb:167:in`process_action'actionpack (3.2.8) lib/action_controller /metal/rendering.rb:10:in `process_action' actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in`块在 process_action' activesupport (3.2.8) lib/active_support/callbacks.rb:414:in `_run__3558390125630086563__process_action__2004224720818030891__callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:405:in` __run_callback' activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:81:in` run_callbacks' actionpack (3.2.8) lib/ abstract_controller/callbacks.rb:17:in `process_action' actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in`process_action' actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action' activesupport (3.2.8) lib/active_support/notifications.rb:123:in`block in instrument' activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb: 20：在`instrument' activesupport (3.2.8) lib/active_support/notifications.rb:123:in` 仪器的动作包（3.2.8）lib/action_controller/metal/instrumentation.rb：29：在`process_action' actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in`process_action的activerecord（3.2.8）lib/active_record/railties/controller_runtime.rb：18：在 `process_action' actionpack (3.2.8) lib/abstract_controller/base.rb:121:in`进程的动作包（3.2 .8) lib/abstract_controller/rendering.rb:45:in`process' actionpack (3.2.8) lib/action_controller/metal.rb:203:in`dispatch' actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch' actionpack (3.2.8) lib/action_controller/metal.rb:246:in` block in action' actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call' actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in`dispatch' actionpack (3.2\. 8) lib/action_dispatch/routing/route_set.rb:36:in `call' journey (1.0.4) lib/journey/router.rb:68:in`block in call' Journey (1.0.4) lib/journey/router.rb:56:in `each' journey (1.0.4) lib/journey/router.rb:56:in`call' actionpack (3.2.8) lib/action_dispatch/routing/ route_set.rb:600:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in` call' rack (1.4.1) lib/rack/etag.rb:23:in `call' rack (1.4.1) lib/rack/conditionalget.rb:35:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call' rack (1.4.1) lib/rack/session/abstract/id.rb:205:in`context' rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in`call' activerecord (3.2.8) lib /active_record/query_cache.rb:64:in`call' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in` call' actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call' activesupport (3.2.8) lib/active_support/callbacks.rb:405:in` *run* _3479256987463636693_ *call* _4454778504255292268__callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback' activesupport (3.2.8) lib/active_support/callbacks.rb:385:in`_run_call_callbacks' activesupport (3.2.8) ) lib/active_support/callbacks.rb:81:in `run_callbacks' actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in` call' actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb :16:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in`call' railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app' railties (3.2.8) lib/rails/rack/logger.rb:16:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call' rack (1.4.1) lib/rack/methodoverride.rb:21:in`call' rack ( 1.4.1) lib/rack/runtime.rb:17:in `call' activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in`call' rack (1.4.1) lib/rack/lock.rb:15:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in`call' railties (3.2.8) lib/rails/engine.rb:479:in `call' railties (3.2.8) lib/rails/application.rb:223:in`call' rack (1.4.1) lib/rack/content_length.rb:14:in `call' railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in`call' rack (1.4.1) lib/rack/ handler/webrick.rb:59:in `service' /Users/ogonbat/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in` service' /Users/ogonbat/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run' /Users/ogonbat/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in` block in start_thread'

这是请求参数

> {"utf8"=>"✓", "authenticity_token"=>"g44p+IPxvdm2ouGAE2u2dV/cCKK8uF6G3XLL4z26zrI=", "page"=>{"title"=>"zfdzfdsf", "contents"=>{"short_description"=> "
> 
> sdfdsf
> 
> ", "大描述"=>"
> 
> dsfdsf
> 
> "}}, "提交"=>"创建"}

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:42:03.810

如果 page `has_many :contents`，那么奇怪的`params[:page][:contents]`是哈希而不是数组......

解决不一致的一端或另一端。如果你有一个 has_many realtionship 并且你想为它创建一个表单，在主对象中为它预填充一些空项目，并迭代它们，生成相应的字段。

您可以在 rails 中查看对嵌套表单的所有响应[- 访问 has_many 关系中的属性以](https://stackoverflow.com/questions/2249160/nested-forms-in-rails-has-many-confusions)了解您需要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:48:45.320

尝试添加`accepts_nested_attributes_for :contents`到您的`Page`模型中，我相信这应该是诀窍（基本上，它应该`contents`从 params [:page][:contents] 数组构建相关记录）

编辑

您还应该添加`contents_attributes`作为`attr_accessible`属性以使其正常工作

# xamarin.ios - MonoTouch.Dialog：更改部分颜色

> ID：12887779
> 
> 赞同：0
> 
> 时间：2012-10-15T00:07:19.330
> 
> 标签：xamarin.ios, monotouch.dialog

通常，要在普通模式下更改截面的特征（字体、颜色），我们必须从头开始创建整个视图。

如果需要对颜色/尺寸进行简单更改，是否有更简单的方法来做到这一点？

这是我倾向于做的事情：

```
 var header = new UILabel(new RectangleF(0, 0, 320, 25)){
      Font = UIFont.BoldSystemFontOfSize (22),
      TextColor = UIColor.White,
      BackgroundColor = SomethingPretty,
      Text = "Something"
};

Section secGroup = new Section(header); 
```

![在此处输入图像描述](../Images/de37a1b4c56f444fa773fa2b1eb3c395.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:50:44.237

这似乎是最简单的方法：

```
var header = new UILabel(new RectangleF(0, 0, 320, 25)){
  Font = UIFont.BoldSystemFontOfSize (22),
  TextColor = UIColor.White,
  BackgroundColor = SomethingPretty,
  Text = "Something"
};

Section secGroup = new Section(header); 
```

# python - 如何修复 django 中与解析 JSON 相关的 TypeError？

> ID：12887785
> 
> 赞同：1
> 
> 时间：2012-10-15T00:08:13.397
> 
> 标签：python, django, json

当我运行下面的代码时，我在浏览器中显示 TypeError。错误出现在最后一行，并说“NoneType”对象不可下标（我正在尝试获取所有项目的所有 url）。然而这很奇怪，因为在命令行中，提要中的所有 url 都会被打印出来。关于为什么项目在命令行中打印但在浏览器中显示错误的任何想法？我该如何解决？

```
#reddit parse
try:
    f = urllib.urlopen("http://www.reddit.com/r/videos/top/.json");
except Exception:
    print("ERROR: malformed JSON response from reddit.com")
reddit_posts = json.loads(f.read().decode("utf-8"))["data"]["children"]
reddit_feed=[]
for post in reddit_posts:
    if "oembed" in post['data']['media']:
        print post["data"]["media"]["oembed"]["url"]
        reddit_feed.append(post["data"]["media"]["oembed"]["url"])  
print reddit_feed 
```

# 编辑

```
if post["data"]["media"]["oembed"]["url"]:
    print post["data"]["media"]["oembed"]["url"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:29:02.757

返回的 json 中有一些帖子，`media=null`因此`post['data']['media']`没有`oembed`字段（因此也没有`url`字段）：

```
 {
        "kind" : "t3",
        "data" : {
           "downs" : 24050,
           "link_flair_text" : null,
           "media" : null,
           "url" : "http://youtu.be/aNJgX3qH148?t=4m20s",
           "link_flair_css_class" : null,
           "id" : "rymif",
           "edited" : false,
           "num_reports" : null,
           "created_utc" : 1333847562,
           "banned_by" : null,
           "name" : "t3_rymif",
           "subreddit" : "videos",
           "title" : "An awesome young man",
           "author_flair_text" : null,
           "is_self" : false,
           "author" : "Lostinfrustration",
           "media_embed" : {},
           "permalink" : "/r/videos/comments/rymif/an_awesome_young_man/",
           "author_flair_css_class" : null,
           "selftext" : "",
           "domain" : "youtu.be",
           "num_comments" : 2260,
           "likes" : null,
           "clicked" : false,
           "thumbnail" : "http://a.thumbs.redditmedia.com/xUDtCtRFDRAP5gQr.jpg",
           "saved" : false,
           "ups" : 32312,
           "subreddit_id" : "t5_2qh1e",
           "approved_by" : null,
           "score" : 8262,
           "selftext_html" : null,
           "created" : 1333847562,
           "hidden" : false,
           "over_18" : false
        }
     }, 
```

* * *

也似乎是您的异常消息并不真正适合：爆炸时可以抛出多种异常`urlopen`，例如`IOError`. 正如您的错误消息所暗示的那样，它不会检查返回的格式是否是有效的 JSON。

现在，为了缓解这个问题，您需要检查是否`"oembed" in post['data']['media']`，并且只有当它确实可以调用`post['data']['media']['oembed']['url']`时，请注意我假设所有`oembed`blob 都具有`url`（主要是因为您需要一个 URL 来在 reddit 上嵌入媒体）。

**更新：也就是说，这样的事情应该可以解决您的问题：

```
for post in reddit_posts:
    if isinstance(post['data']['media'], dict) \
           and "oembed" in post['data']['media'] \
           and isinstance(post['data']['media']['oembed'], dict) \
           and 'url' in post['data']['media']['oembed']:
        print post["data"]["media"]["oembed"]["url"]
        reddit_feed.append(post["data"]["media"]["oembed"]["url"])
print reddit_feed 
```

你有这个错误的原因是因为对于某些`post`,`post["data"]["media"]`是`None`，所以你基本上是`None["oembed"]`在这里打电话。因此错误：`'NoneType' object is not subscriptable`. 我也意识到这`post['data']['media']['oembed']`可能不是字典，因此您还需要验证它是否是字典*以及*是否`url`在其中。

**更新 2：**

它看起来`data`有时也不存在，所以修复：

```
import json
import urllib

try:
    f = urllib.urlopen("http://www.reddit.com/r/videos/top/.json")
except Exception:
    print("ERROR: malformed JSON response from reddit.com")
reddit_posts = json.loads(f.read().decode("utf-8"))

if isinstance(reddit_posts, dict) and "data" in reddit_posts \
   and isinstance(reddit_posts['data'], dict) \
   and 'children' in reddit_posts['data']:
    reddit_posts = reddit_posts["data"]["children"]
    reddit_feed = []
    for post in reddit_posts:
        if isinstance(post['data']['media'], dict) \
               and "oembed" in post['data']['media'] \
               and isinstance(post['data']['media']['oembed'], dict) \
               and 'url' in post['data']['media']['oembed']:
            print post["data"]["media"]["oembed"]["url"]
            reddit_feed.append(post["data"]["media"]["oembed"]["url"])
    print reddit_feed 
```

# java - 查询 guice 依赖图

> ID：12887789
> 
> 赞同：0
> 
> 时间：2012-10-15T00:09:41.230
> 
> 标签：java, guice

我试图重用别人很久以前写的一个类。Guice 已经在所有地方使用，所以我只是将类添加到我想要的构造函数中，提供它的直接依赖关系，并希望最好。结果是运行时缺少依赖项的长列表。回到使用我想要的类的原始上下文，我发现一个包含许多子模块的模块，但我什么都不认识。基本上我正在看的是一个大图，我想找到 Guice 遵循的路径来解决每个缺失的依赖项。我将决定在我的目标模块中安装路径的哪个点。

Guice 是否提供了一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T04:30:00.913

如果您只想检查依赖项的注入方式，请考虑使用[Grapher](https://github.com/google/guice/wiki/Grapher)扩展。如果您想编写自己的检查器来可视化模块树，Guice 还提供了一个 API 来[在运行时检查模块](https://github.com/google/guice/wiki/InspectingModules)。

# php - 为什么将答案插入数据库时 会重复答案？

> ID：12887798
> 
> 赞同：0
> 
> 时间：2012-10-15T00:12:05.300
> 
> 标签：php, mysqli

我将值插入到“问题”和“答案”表中。现在问题表很好，如果我插入 2 个问题，那么它显示的表如下：

```
SessionId (PK)  QuestionId(Pk) QuestionContent  

RZC             1              Name 2 things you will find with a computer
RZC             2              Name three things you will find in a toolbox 
```

但是“答案”表导致了问题，它在插入时重复了答案，该表目前如下所示：

```
AnswerId (auto PK)   SessionId  QuestionId  Answer
1                    RZC         1          A
2                    RZC         1          C
3                    RZC         2          A
4                    RZC         2          B
5                    RZC         2          E
6                    RZC         1          A
7                    RZC         1          C
8                    RZC         2          A
9                    RZC         2          B
10                   RZC         2          E 
```

该表应如下所示：

```
AnswerId (auto PK)   SessionId  QuestionId  Answer
1                    RZC         1          A
2                    RZC         1          C
3                    RZC         2          A
4                    RZC         2          B
5                    RZC         2          E 
```

为什么重复答案？

下面是php和mysqli代码：

```
 <?php

    var_dump($_POST);  

    // Prepare your statements ahead of time
    $questionsql = 'INSERT INTO Question (SessionId, QuestionId, QuestionContent) VALUES (?, ?, ?)';
    if (!$insert = $mysqli->prepare($questionsql)) {
        // Handle errors with prepare operation here
        echo __LINE__.': '.$mysqli->error;
    }

    $answersql = 'INSERT INTO Answer (SessionId, QuestionId, Answer) VALUES (?, ?, ?)';
    if (!$insertanswer = $mysqli->prepare($answersql)) {
        // Handle errors with prepare operation here
        echo __LINE__.': '.$mysqli->error;
    }

        //make sure both prepared statements succeeded before proceeding
            if( $insert && $insertanswer)
            {
                $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
                $c = count($_POST['numQuestion']);

                for($i = 0;  $i < $c; $i++ )
                {

$insert->bind_param('sis', $sessid, $_POST['numQuestion'][$i], $_POST['questionText'][$i]);

       $insert->execute();

        if ($insert->errno) 
        {
        // Handle query error here
        echo __LINE__.': '.$insert->error;
        break 2;
        }   

        $results = $_POST['value'];
        foreach($results as $id => $value) 
        {
        $answer = $value;

        $lastID = $insert->insert_id;

        foreach($value as $answer) 
        {
        $insertanswer->bind_param('sis', $sessid, $lastID, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
        // Handle query error here
        echo __LINE__.': '.$insertanswer->error;
        break 3;
        }
        }
        }
        }

                //close your statements at the end
                $insertanswer->close();
                $insert->close();
            } 
            ?> 
```

var_dump($_POST) 显示如下：

```
array(4) {
    ["numQuestion"]=> array(2) {
        [0]=> string(1) "1"
        [1]=> string(1) "2"
    }
    ["questionText"]=> array(2) {
        [0]=> string(20) "What is 2+2 and 3+3?"
        [1]=> string(41) "Which three items will you find in a car?"
    }
    ["submitDetails"]=> string(14) "Submit Details" 
    ["value"]=> array(2) {
        [1]=> array(2) {
            [0]=> string(1) "A"
            [1]=> string(1) "C"
        }
        [2]=> array(3) {
            [0]=> string(1) "A"
            [1]=> string(1) "B"
            [2]=> string(1) "D"
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:22:58.290

你有一个循环嵌套问题。如果我做对了，for 是运行问题，foreach 是运行答案。问题是它们应该彼此独立。相反，在您的代码中，foreach 在每个问题上运行，导致答案被插入两次。

这应该有效：

```
<?php

    var_dump($_POST);  

    // Prepare your statements ahead of time
    $questionsql = 'INSERT INTO Question (SessionId, QuestionId, QuestionContent) VALUES (?, ?, ?)';
    if (!$insert = $mysqli->prepare($questionsql)) {
        // Handle errors with prepare operation here
        echo __LINE__.': '.$mysqli->error;
    }

    $answersql = 'INSERT INTO Answer (SessionId, QuestionId, Answer) VALUES (?, ?, ?)';
    if (!$insertanswer = $mysqli->prepare($answersql)) {
        // Handle errors with prepare operation here
        echo __LINE__.': '.$mysqli->error;
    }

    //make sure both prepared statements succeeded before proceeding
    if($insert && $insertanswer) {
        $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
        $c = count($_POST['numQuestion']);
        for($i = 0;  $i < $c; $i++ ) {
            $insert->bind_param('sis', $sessid, $_POST['numQuestion'][$i], $_POST['questionText'][$i]);
            $insert->execute();
            if ($insert->errno) {
                // Handle query error here
                echo __LINE__.': '.$insert->error;
                break 2;
            }   
        }

        $results = $_POST['value'];
        foreach($results as $id => $value) {
            $answer = $value;
            $lastID = $insert->insert_id;

            foreach($value as $answer) {
                $insertanswer->bind_param('sis', $sessid, $lastID, $answer);
                $insertanswer->execute();

                if ($insertanswer->errno) {
                    // Handle query error here
                    echo __LINE__.': '.$insertanswer->error;
                    break 3;
                }
            }
        }

        //close your statements at the end
        $insertanswer->close();
        $insert->close();
    } 

?> 
```

# php - 将多个值从循环传递到数组

> ID：12887799
> 
> 赞同：0
> 
> 时间：2012-10-15T00:12:12.477
> 
> 标签：php, arrays, foreach

```
 $stmt = $db->get_products();

$products = array();
foreach($stmt as $items){
    $products = array('asin'=>$items['asin']);
}

print_r($products); 
```

假设 my`$stmt`包含来自我的数据库的 4 个值，我的问题是我只获得 my 中的第一个数据`print_r`，而不是我的数据库中的所有数据。但是当我在其中回显时，`foreach`它会显示预期的输出，但是当将它传递给数组时，它只包含一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:14:07.783

你应该更换

```
$products = array('asin'=>$items['asin']); 
```

和

```
$products[] = array('asin'=>$items['asin']);
          ^--- Missing bracket 
```

# php - jQuery.ajax POST 到脚本以更新 MySQL 函数未定义

> ID：12887800
> 
> 赞同：1
> 
> 时间：2012-10-15T00:12:24.793
> 
> 标签：php, jquery

我定义了以下函数，它将动态 id 作为参数传递给函数并输出到 html 链接。它调用的脚本会更新数据库记录并根据查询成功或未通过某些验证的 id 返回成功或失败警报。

```
 function cancel_file(id){  
            jQuery.ajax({
            type: "POST",
            url: "https://www.mysite.com/cancel.php",
            data: 'id='+ id,
            cache: false,
            success: function(response){
                console.log(response);

                if(response == 1){
                    alert('File successfully cancelled!');
                    }
                }
            error: function(response){
                console.log(response);

                if(response == "invalid_id"){
                    alert('The file ID format is invalid');
                }else if(response == "no_record_found"){
                    alert('No file found with ID specified');
                }

            }
        });
    } 
```

我在我的文档部分中调用它如下

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="/js/jquery.js"></script> 
```

页面上的链接是使用以下 php 代码输出的

```
<?php echo "<a href='#' onclick='cancel_file(".$id.")'>Cancel </a>"; ?> 
```

单击链接时，没有任何反应，当我检查 Chrome JS 调试器控制台时，它显示“未捕获的 ReferenceError：cancel_file 未定义”。我做了一些阅读，在 document.ready() 中定义的函数被 Chrome 和 FF 忽略，所以我从顶部删除了该声明。我还是 jQuery 的新手，所以非常感谢任何帮助。

TIA

取消.php

```
<?php

// Get the fileid and make sure it's in a valid format
    $id = $_POST['id'];

    if(!ctype_digit($id)){
        $response = "invalid_id";
    }else{
        // If validation passes proceed to queries and cancellation process
            $q1 = "UPDATE `table_files` SET `is_invalid` = 1 WHERE `id` = '".$id."'";
            $r1 = mysql_query($q1) or die(mysql_error());

        if(mysql_affected_rows() > 0){
            $response = mysql_affected_rows();
        }else{
            $response = "no_record_found";
    }

    echo $response;
?> 
```

$response 应该传递回 jQuery 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:24:06.260

您在成功函数和错误函数之间的 ajax 调用中有错字（尽管这可能是复制/粘贴问题）。

除此之外，除了具有全局函数之外，是否可以接受绑定到链接的点击事件？

例如：

```
jQuery('.cancel-trigger').on('click', function(){
    jQuery.ajax({
        type: "POST",
        url: "https://www.mysite.com/cancel.php",
        data: {
            id: jQuery(this).data('fileid')
        },
        cache: false,
        success: function(response){
            console.log(response);
            if(response == 1){
                alert('File successfully cancelled!');
                }
            }
            else if(response == "invalid_id"){
                alert('The file ID format is invalid');
            }else if(response == "no_record_found"){
                alert('No file found with ID specified');
            }
        },
        error: function(response){
            console.log(response);
            // this would run on an actual js/ajax error
        }
    });
}); 
```

然后使用您的链接，您可以回显以下内容：

```
<?php echo '<a href="#" data-fileid="' . $id . '" class="cancel-trigger">Cancel </a>'; ?> 
```

这样您就没有全局函数，并且可以使用数据属性而不是内联 onclick 事件传入 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:40:39.077

从ajax中的最后一个删除“？>”。检查是否有空格？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:52:33.963

我通过将 PHP 脚本加载到 jQuery UI 模式并在那里处理它找到了一种解决方法。不完全是我所希望的，但它很好地解决了这个问题。

# qt - Windows 7 上的 Taglib 1.8 无法像 Windows XP 一样正常工作

> ID：12887801
> 
> 赞同：0
> 
> 时间：2012-10-15T00:12:33.023
> 
> 标签：qt, taglib

我使用 Mingw 成功编译了 taglib 1.8，然后将其集成到 Qt 项目中。目的是从 mp3 文件中删除 ID3 标签。

这段代码：

```
void MainWindow::removeTagFromFile(QByteArray &fileContent)
{
    TagLib::ByteVector byteVector(fileContent.constData());
    TagLib::ID3v2::FrameFactory *frame = TagLib::ID3v2::FrameFactory::instance();
    TagLib::IOStream *vectorStream = new TagLib::ByteVectorStream(byteVector);
    TagLib::MPEG::File file(vectorStream, frame);
    file.strip();
    file.save();
} 
```

在 XP 上编译并正常工作。在 Windows 7 上编译并不能按预期工作。将“在 XP 上编译的 .exe”设置为 7 并不能解决问题。

很奇怪吗？恐怕这是 Taglib 中的一个错误，这有意义吗？欢迎任何想法或解释，在此先感谢。

你可以在[这里下载项目](https://docs.google.com/open?id=0B4oIPD6jAmQOS3ZhMXdNenRoWGM)

我正在用法语写一篇关于编译和集成到 Qt 项目中的细节的教程，如果有兴趣的人，我会用英文写一篇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:14:02.957

好吧，最后不是 XP 或 7 的问题，而是关于您计算机上安装的编解码器的问题。

有一个简单的解决方案，您无需从 mp3 文件中删除 ID3 标记即可让 Phonon 读取它们，您只需安装 K-Lite Codecs。

解释 : Phonon 后端使用 Windows 上的 DirectShow 来读取 mp3 文件。K-Lite 编解码器包是 DirectShow 过滤器、VFW/ACM 编解码器和工具的集合。编码和解码音频和视频格式需要编解码器和 DirectShow 过滤器。

安装 K-Lite 解决了 Phonon 的一些 mp3 文件问题。

我希望这将拯救那些在 Windows 上使用 mp3 文件遭受声子困扰的人。

# c++ - OpenGL 中的缓冲区到底是什么，如何使用多个缓冲区来发挥我的优势？

> ID：12887802
> 
> 赞同：8
> 
> 时间：2012-10-15T00:12:34.050
> 
> 标签：c++, opengl, graphics, buffer, polygon

不久前，我从 OpenGL 指南中试用了一个程序，据说是双缓冲的；它在屏幕上显示了一个旋转的矩形。不幸的是，我已经没有这本书了，而且我还没有找到一个清晰、直接的关于缓冲区的定义。我的猜测是它是一个绘制东西的“地方”，在哪里使用很多可能就像分层？

如果是这种情况，我想知道我是否可以使用多个缓冲区来对多边形裁剪程序有利。我有一个漂亮的小窗口，允许用户在屏幕上绘制多边形，还有一个实用程序可以在多边形上拖动和绘制一个选择框。当用户绘制了选择矩形并放开鼠标时，多边形将根据矩形边界进行裁剪。

这是可行的，但我也希望用户能够重新开始：按下退出键时，剪辑框应该消失，并且应该恢复原始多边形。由于我是逐个像素地做事，似乎很难弄清楚如何将矩形像素颜色改回黑色，如背景或特定多边形的颜色，具体取决于它们的绘制位置（除非我发现一种在绘制每个多边形像素时保存颜色的方法，但这似乎太过分了）。我想知道给矩形提供自己的缓冲区是否会有所帮助，希望它可以像一种可以轻松清除的透明层（？）这是可以使用缓冲区的方式，还是我需要寻找另一个解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T00:20:44.137

OpenGL 确实知道多种缓冲区：

*   帧缓冲区：绘图操作所指向的内存部分，更改缓冲区中的像素值。默认情况下，OpenGL 具有屏幕缓冲区，可以分为前缓冲区和后缓冲区，其中绘图操作在后缓冲区中不可见，并在完成时交换到前面。除此之外，OpenGL 使用深度缓冲区进行深度测试 Z 排序实现，模板缓冲区用于将渲染限制为像帧缓冲区的选定部分一样的剪切（=模板）。曾经有辅助缓冲区和累积缓冲区。然而，这些已被所谓的帧缓冲区对象所取代，这些对象是用户创建的对象，将多个纹理或渲染缓冲区组合成可以渲染到的新帧缓冲区。

*   渲染缓冲区：用户创建的渲染目标，附加到帧缓冲区对象。

*   缓冲区对象（顶点和像素）：用户定义的数据存储。用于几何和图像数据。

*   纹理：纹理是一种缓冲区，即它们保存数据，这些数据可以是绘图操作中的源

OpenGL 的常用方法是在发生变化时重新渲染整个场景。如果您想保存这些绘图操作，您可以将帧缓冲区的内容复制到纹理，然后将该纹理绘制到单个四边形并使用您选择的橡皮筋矩形对其进行过度绘制。

# c++ - 使用枚举关闭 switch/case 语句的编译器警告

> ID：12887805
> 
> 赞同：1
> 
> 时间：2012-10-15T00:13:14.627
> 
> 标签：c++, c, visual-c++, compiler-warnings, enumeration

假设您有一个枚举类型，其值包含 50 多个条目。以前我曾多次使用此数量的条目切换/设置枚举值，但只是为了检查其中的 2 到 5 个条目。

例如，OpenGL 将其大部分枚举都放在一种枚举类型中，称为`GLenum`. 这些值的范围从`GL_VERTEX_SHADER`to`GL_STREAM_DRAW`到`GL_TRIANGLES`to`GL_ARRAY_BUFFER`等。

正如您所看到的，虽然它们在更大的图景方面是相关的，但它们的使用上下文并不相互关联。

我在 Linux 中的 MinGW/GCC 上生成了警告，其中每个警告都说明了其类型声明中列出的*每个枚举值。*我不确定这是否发生在 VC++ 上，但我想我还是会考虑它以防万一。

换句话说，生成的警告数量是`TotalEnumValues - AmountOfCaseStatements`针对每个枚举值的，前提是语句本身并未考虑所有枚举，如果您的枚举类型包含至少 100 个条目，这很容易导致 100 多个编译器警告*。*

我经常使用 if/else 来适应这一点，但是当检查不止*一个*条目的枚举值时（这真的很罕见，因为枚举的目的通常需要条件逻辑来补充它），我一直是倾向于使用 switch/case，因为我觉得它更美观（即使它只是编译成 if/else 语句；））

那么，这个警告可以关闭吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T00:18:16.527

添加一个`default:`什么都不做的案例。编译器将看到您正在“处理”所有可能性（从而消除警告），但如果您不为其指定任何操作，它根本不会改变生成的代码。

* * *

澄清一下：我说的是这个：

```
switch(a)
{
case CONSTANT_1:
        ...
    break;
case CONSTANT_2:
        ...
    break;
} 
```

与这个：

```
switch(a)
{
case CONSTANT_1:
        ...
    break;
case CONSTANT_2:
        ...
    break;
default:
} 
```

*第二个根本*不修改行为，所以编译器不应该改变生成的代码，但会告诉它你没有忘记其他（im）可能的情况。

# ruby-on-rails - 在 Ubuntu Server 12.04 上安装 Ruby gem“ffi”时出现问题

> ID：12887816
> 
> 赞同：5
> 
> 时间：2012-10-15T00:14:38.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

我正在尝试使用`bundle`安装新项目所需的 gem，但在安装 'ffi' gem 的 1.1.5 版时遇到问题。

我正在使用在 64 位 Ubuntu Server 12.04 的虚拟安装上运行的 Ruby 1.9.3。运行`bundle`命令时，我收到以下错误消息：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/alex/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include,/usr/include/ffi... no
checking for rb_thread_blocking_region()... yes
checking for ruby_native_thread_p()... yes
checking for rb_thread_call_with_gvl()... yes
creating extconf.h
creating Makefile

make
Configuring libffi
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux"SampleRails
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux'ems/ruby-1.9.3-p194@SampleRails
make "AR_FLAGS=" "CC_FOR_BUILD=" "CFLAGS=-Wall -fexceptions" "CXXFLAGS=" "CFLAGS_FOR_BUILD=" "CFLAGS_FOR_TARGET=" "INSTALL=/usr/bin/install -c" "INSTALL_DATA=/usr/bin/install -c -m 644" "INSTALL_PROGRAM=/usr/bin/install -c" "INSTALL_SCRIPT=/usr/bin/install -c" "JC1FLAGS=" "LDFLAGS=" "LIBCFLAGS=" "LIBCFLAGS_FOR_TARGET=" "MAKE=make" "MAKEINFO=/b/gems/ffi-1.1.5/ext/ffi_c/libffi/missing --run makeinfo " "PICFLAG=" "PICFLAG_FOR_TARGET=" "RUNTESTFLAGS=" "SHELL=/bin/bash" "exec_prefix=/usr/local" "infodir=/usr/local/share/info" "libdir=/usr/local/lib" "mandir=/usr/local/share/man" "prefix=/usr/local" "AR=ar" "AS=as" "CC=gcc" "CXX=g++" "LD=/usr/bin/ld -m elf_x86_64" "NM=/usr/bin/nm -B" "RANLIB=ranlib" "DESTDIR=" all-recursive
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux'ems/ruby-1.9.3-p194@SampleRails
Making all in include
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux/include'-1.9.3-p194@SampleRails
make[3]: Nothing to be done for `all'.
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux/include'1.9.3-p194@SampleRails
Making all in testsuite
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux/testsuite'.9.3-p194@SampleRails
make[3]: Nothing to be done for `all'.
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux/testsuite'9.3-p194@SampleRails
Making all in man
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux/man'ruby-1.9.3-p194@SampleRails
make[3]: *** No rule to make target `ffi.3', needed by `all-am'. Stop.
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux/man'uby-1.9.3-p194@SampleRails
make[2]: *** [all-recursive] Error 1
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux'ms/ruby-1.9.3-p194@SampleRails
make[1]: *** [all] Error 2
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux'ms/ruby-1.9.3-p194@SampleRails
/gems/ffi-1.1.5/ext/ffi_c/libffi-x86_64-linux"/.libs/libffi_convenience.a] Error 2

/gems/ffi-1.1.5 for inspection. in /home/alex/.rvm/gems/ruby-1.9.3-p194@SampleRails
/gems/ffi-1.1.5/ext/ffi_c/gem_make.out/ruby-1.9.3-p194@SampleRails
An error occurred while installing ffi (1.1.5), and Bundler cannot continue.
Make sure that `gem install ffi -v '1.1.5'` succeeds before bundling. 
```

该错误似乎是由该行引起的，`make[3]: *** No rule to make target 'ffi.3', needed by 'all-am'`但我不知道这意味着什么。

有人可以帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T03:09:53.480

安装 libffi-dev 包：

```
sudo apt-get install libffi-dev 
```

如果 ffi gem 找不到 libffi 的标头/链接库，它将构建其内部 libffi 库，这在现代 linux 系统上*永远不是*您想要的 - 只需安装系统的开发包。

# linux - 如何重定向`cat`以模拟Linux中的用户输入

> ID：12887821
> 
> 赞同：0
> 
> 时间：2012-10-15T00:15:15.950
> 
> 标签：linux, cat

我开始了一个项目。在指令中，我们可以使用以下命令行测试我们的程序：

> 猫 test.txt > test.py

但我没有输出。据我了解，它应该给我一个输出。

test.txt 文件看起来像：

```
1
3
4
2
5
6
7
1
1
8
9
3
4
5
1
-1 
```

test.py 文件看起来像：

```
for i in range(16):
    var=raw_input("type something : ")
    print var 
```

我排除了这个命令行，以便在它运行时将 test.txt 文件的内容重定向到 test.py 文件。

我已经阅读了有关 cat 命令的文档。

请问你能帮帮我吗 ？

换句话说， cat 命令应该如何模拟用户？我想我必须更改我的 python 文件中的某些内容。

预先感谢， Mff

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T00:21:06.503

这里的问题是你想要`cat test.txt | test.py`而不是`>`. `|`将一个命令 (cat test.txt) 的输出发送到另一个 (test.py) 的输入，而`>`将输出发送到一个文件（这可能意味着您已经用 test.txt 的内容覆盖了 test.py）。

# c++ - 函数调用不起作用

> ID：12887823
> 
> 赞同：-3
> 
> 时间：2012-10-15T00:15:37.797
> 
> 标签：c++

我正在制作一个基本的连接五游戏，尽管我不愿意承认我在调用我的函数时遇到了问题。我不确定我是否在函数调用中遗漏了任何必需的信息，但没有在 main 中调用它们而只是运行它们，程序的工作方式如下，但是当我删除注释掉的行时，输出只是“按任意键继续”，什么也没有出现。为这个卑鄙的问题道歉，但我一直在阅读教科书和网络，据我所知，它们应该可以工作。任何帮助将非常感激。

```
 #include <stdio.h>
#define   NONE           0
#define   PLYR_TOKEN     1
#define   COMP_TOKEN     6

int board[9][9];
int x, y;

void main()

//{
//  void get_coodinates();
//  void print_matrix();
//}

//void print_matrix()
    {

    int i, j, k=9, z=10;

    printf("\n");

        for(j = 0; j < k; ++j)
            {
                printf("\n  %d", --z);
                for(i = 0; i < k; ++i)

                    printf(" %d", board[x][y]);
            }
        printf("\n  | 1 2 3 4 5 6 7 8 9 \n");

//  }

//void get_coordinates()
    {
        do{
            printf("\n");
            printf("\n");
            printf("Input a column number then row number e.g. (1 4)   ");
            (scanf("%d %d", &x, &y));
            if (x < 1 || y <1 || x > 9 || y > 9)
                printf("\nERROR: Values must be between 1-9\n\n");
        else 
            printf("\n %s %d, %d. \n",
          "The position you input was", x, y);
        } while (x < 1 || y <1 || x > 9 || y > 9);
        if (board[x - 1][y - 1] != 0)
            {
            printf("Position taken enter new position\n");
            }
        else (board[x -1][y -1] = PLYR_TOKEN);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:18:42.187

这：

```
void main()
{
   void get_coodinates();
   void print_matrix();
} 
```

应该改成这样：

```
int main()
{
   get_coodinates();
   print_matrix();

   ...
   return 0;
} 
```

调用函数时不需要包含返回类型。实际上，这样做会告诉编译器您正在声明一个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T00:19:09.880

```
void main()    
{
  void get_coodinates();
  void print_matrix();
} 
```

Those two lines in your `main()` function simply declare two functions. That is, you tell the compiler "There exists a function called `get_coordinates`. It takes no arguments, and returns nothing". Calling the functions looks like this:

```
void main()    
{
  get_coodinates();
  print_matrix();
} 
```

# objective-c - iOS：Stroyboard中导航控制器的内存分配（使用pushviewcontroller方法）

> ID：12887828
> 
> 赞同：2
> 
> 时间：2012-10-15T00:17:08.240
> 
> 标签：objective-c, uinavigationcontroller, storyboard, ios6, automatic-ref-counting

当我将语句与 stroyboard 一起使用时，我目前发现一个真正的问题

```
SomeViewController *homeView = [self.storyboard instantiateViewControllerWithIdentifier:@"someID"];
[self.navigationController pushViewController:homeView animated:YES completion:NULL]; 
```

当我使用

```
[self.navigationController popViewControllerAnimated:YES]; 
```

在我推送的视图控制器中，内存没有得到释放（我正在使用 ARC）

但是，如果我使用

```
[self performSegueWithIdentifier:@"pushToHomeView" sender:self]; 
```

当我从 homeView 的内存中弹出时被释放。

我真的很想知道为什么以编程方式推送视图会给我这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:24:09.347

我认为推送视图程序仅适用于 xib 文件和故事板的 segue。当使用带有弧内存的 segue 时，会自动释放。这是带有故事板的 arc 内置的功能。这就是我在故事板中发现的。我在我的一个项目中遇到了这种情况，最后得出结论，执行 segue 正在释放内存。希望这会有所帮助，但这只是我的经验。阿德里安

# android - 用于编辑文本数组的 ParsingMethod android

> ID：12887829
> 
> 赞同：1
> 
> 时间：2012-10-15T00:17:08.867
> 
> 标签：android, arrays, parsing, android-edittext

我的应用程序在每个活动上都有 4-5 个 EditText，我有 10 个左右的活动。我需要将这些中的每一个解析为双精度。所以我想我想创建一个方法，在该方法中我输入一个 EditText 数组，它返回一个带有解析数字的双精度数组。

其中一个 EditText 将始终为空，因此我需要在应该返回为 0 的 Doubles 数组中的特定位置。

这就是我一直在摆弄的东西（到目前为止没有成功）。

```
public double[] parser(EditText[] editArray) {
            EditText toBeParsed[] = null;
            double parsed[] = null;
            for (int i = 0; i < editArray.length; i++) {
                try {
                    parsed[i] = Double.parseDouble(toBeParsed[i].getText().toString());
                } catch (Exception e) {
                    parsed[i] = 0;}
            } 
```

我需要设置这个吗？

接下来在我的一项活动中，我在其中调用方法（来自 MiscMethods.java 文件）

```
EditText inputs[] = {i1,i2,i3,i4}
Double parsed[];
for (int i = 0; i < inputs.length; i++) {
                parsed[i] = MiscMethods.parser(inputs);
            } 
```

但是得到一个类型不匹配......为什么？该方法返回一个双精度数组，并应将它们放入双精度解析[] 数组中。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:49:20.903

似乎您正在使用 toBeParsed 数组而不是您的 editArray

所以

```
parsed[i] = Double.parseDouble(toBeParsed[i].getText().toString()); 
```

应该

```
parsed[i] = Double.parseDouble(editArray[i].getText().toString()); 
```

# c++ - C++ 错误：LNK2001 和 LNK1120

> ID：12887832
> 
> 赞同：0
> 
> 时间：2012-10-15T00:17:39.210
> 
> 标签：c++, compiler-errors

我意识到这是一个不完整的问题，但我是一个尚未完全精通调试的学生。当我尝试编译时，我得到以下输出：

```
------ Build started: Project: p05Inheritance, Configuration: Debug Win32 ------
employee.cpp
employee.obj : error LNK2001: unresolved external symbol "private: static class CE::Company CE::Employee::company" (?company@Employee@CE@@0VCompany@2@A)
c:\documents and settings\km\my documents\visual studio 2010\Projects\p05Inheritance\Debug\p05Inheritance.exe : fatal error LNK1120: 1 unresolved externals

========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

有谁知道我该如何解决这个问题？提前致谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:28:06.590

似乎 CE::Employee::company 没有在任何地方定义供链接器查找。我建议您在片段中提供更多信息，即相关课程，以便我们更准确地帮助您。

# node.js - 在 TypeScript 项目中打开现有的 Node.js 项目

> ID：12887836
> 
> 赞同：0
> 
> 时间：2012-10-15T00:18:18.447
> 
> 标签：node.js, typescript

我目前在 Node.js 中有一个现有项目，我想将其迁移到 TypeScript 项目。

我怎样才能做到这一点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:47:21.580

最简单的方法是查看 TypeScript 提供的 Node 示例。它已经包含了内置 NodeJS 模块的声明。

导入 node.js 后，您可以开始一一转换模块。由于Typescript会转成JS，你可以一次转换一个文件，马上测试！

有了[环境](https://stackoverflow.com/questions/12771258/how-to-import-javascript-modules-in-typescript)，它应该很容易做到！祝你转换好运。

# java - 使用部署在另一个应用程序服务器中的应用程序服务器 Java EE jar 编译的类

> ID：12887838
> 
> 赞同：0
> 
> 时间：2012-10-15T00:19:01.557
> 
> 标签：java, jakarta-ee, jboss, weblogic

我在服务器中安装了 WebLogic (10.3.5) 应用程序服务器，并在另一台服务器中安装了 JBoss AS (7.1.1)。

`ServletA.java`使用 JBoss AS 中的 Java EE 特定 jar 编译并部署在 WebLogic 中（在运行时 WebLogic 将使用其自己的 Java EE 特定 jar 来执行）。目前，当我在 WebLogic 中访问 servlet 时，我没有收到任何错误，它工作正常。

我的问题是，这种方法是否可行，或者将来会产生任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:19:28.530

只要您坚持 Java EE 规范中的类并且不使用任何 JBoss 特定的类或特性，这种方法就可以了。

如果您依赖服务器特定的行为（难以测试）或在一台服务器上遇到错误，仍然可能出错。

# ruby - 执行特定版本的 gem

> ID：12887851
> 
> 赞同：3
> 
> 时间：2012-10-15T00:22:25.387
> 
> 标签：ruby, rubygems, gem

> **可能重复：**
> [如何从命令行调用旧版本的 gem？](https://stackoverflow.com/questions/4061596/how-can-i-call-an-older-version-of-a-gem-from-the-commandline)

如果我有两个版本的 gem，我该如何选择执行哪个版本？

例如，如果`gem list heckle`给我

```
*** LOCAL GEMS ***

heckle (2.0.0.b1, 1.4.3) 
```

从命令行`heckle --version`给我

```
heckle 2.0.0.b1 
```

我怎么能告诉它运行 heckle 1.4.3 呢？

我需要使用捆绑器才能做到这一点吗？如果是这样，会涉及多少[牦牛剃毛？](http://en.wiktionary.org/wiki/yak_shaving)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-15T00:35:34.427

您可以使用 RubyGems 轻松做到这一点。

例如：

```
require 'rubygems' # if RUBY_VERSION < 1.9
gem 'example', '1.2' 
```

进一步阅读： [http ://docs.rubygems.org/read/chapter/4#page71](http://docs.rubygems.org/read/chapter/4#page71)

但是使用 Bundler 已经是一个更好的解决方案了。

# c# - 使用正则表达式提取值

> ID：12887853
> 
> 赞同：0
> 
> 时间：2012-10-15T00:22:40.673
> 
> 标签：c#, regex, full-text-search, pattern-matching

我想从这段文本（html 标记）中提取值“64,111”。

```
 <tr>
     <th id="abc-xyz">Page <span class="sub">avg</span></th>
    <td headers="abc-xyz">
    10th Aug, 2011  </td>
  <td headers="abc-xyz">64,111</td>
     </tr> 
```

我目前正在使用这个正则表达式-：

```
Match m2 = Regex.Match(text, @"\<td headers=""abc-xyz""\>(.*?)\</td\>", RegexOptions.IgnoreCase); 
```

但是没有结果，请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:25:37.357

转义双引号`\`

```
Match m2 = Regex.Match(text, "(?<=<td\sheaders=\"abc-xyz\">).*(?=</td>)", 
                       RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:26:35.967

代替 ”。” 使用不包括停止字符的字符类。也就是说，而不是`">(.*)<"`你想要的`">([^<]*)<"`.

我假设您知道这不能替代真正的解析，而正则表达式无法做到这一点，所以我不会宣扬这一点。在这个网站的某个地方已经有一个非常有趣的回应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:32:15.060

给猫剥皮的方法不止一种。
解析 XML 不限于正则表达式，因此这里是使用 Linq to XML 的一种方法。

```
string found = (from td in XElement.Parse(myxml).Elements("td")
                where td.HasAttributes
                let headers = td.Attribute("headers")
                where headers != null && headers.Value == "abc-xyz" && !td.HasElements
                select td.Value).FirstOrDefault(); 
```

[Linq to XML 教程](http://www.mssqltips.com/sqlservertip/1524/reading-xml-documents-using-linq-to-xml/)

# windows-phone-7 - 数据绑定视图模型线集合到画布（MVVM / Windows Phone）

> ID：12887854
> 
> 赞同：0
> 
> 时间：2012-10-15T00:22:46.853
> 
> 标签：windows-phone-7, data-binding, mvvm

我试图让用户通过在点击和拖动时收集点来在画布上绘图。我正在使用 MVVM 方法，并且可以成功收集点，并在视图模型上填充一组线。但是，我需要能够在画布上显示这些线条控件，以便用户可以看到他们正在绘制的线条。

我的问题是，如何将 Line 控件的 View Models 集合数据绑定到画布的 Children 集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:32:55.760

这可以使用以下方法来实现`ItemsControl`：

```
<ItemsControl ItemsSource="{Binding CollectionOfLines}">
  <!-- specify the panel that the items will be added to -->
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <Canvas/>
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Line X="{Binding ...}" Y="{Binding ...}" .../>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# java - 在单独的行中显示每个列表元素（控制台）

> ID：12887857
> 
> 赞同：13
> 
> 时间：2012-10-15T00:23:06.363
> 
> 标签：java, arraylist, console, newline

在这部分代码中：

```
 System.out.println("Alunos aprovados:");
    String[] aprovados = {"d", "a", "c", "b"};
    List<String> list = new ArrayList();
    for (int i = 0; i < aprovados.length; i++) {
        if (aprovados[i] != null) {
            list.add(aprovados[i]);
        }
    }

    aprovados = list.toArray(new String[list.size()]);
    Arrays.sort(aprovados);
    System.out.println(Arrays.asList(aprovados)); 
```

System.out.println 的示例结果是：

[A B C D]

如果我想要下面的结果，我该如何修改上面的代码？

一种

b

C

d

或者至少：

一种，

乙，

C，

d

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-15T00:25:05.817

遍历元素，分别打印每个元素。

```
for (String element : list) {
    System.out.println(element);
} 
```

或者，Java 8 语法提供了一个很好的简写，可以通过方法引用来做同样的事情

```
list.forEach(System.out::println); 
```

或 lambda

```
list.forEach(t -> System.out.println(t)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T17:01:29.023

如果想在同一行显示每个元素，不带括号：

```
public static void main(String[] args) {
    Set<String> stringSet = new LinkedHashSet<>();
    stringSet.add("1");
    stringSet.add("2");
    stringSet.add("3");
    stringSet.add("4");
    stringSet.add("5");
    int i = 0;
    for (String value : stringSet) {
        if (i < stringSet.size()-1) {
            System.out.print(value + ",");
        } else {
            System.out.print(value);
        }
        i++;
    }
} 
```

# c# - 绑定到用户控件“无法分配给属性”错误 (Windows 8)

> ID：12887858
> 
> 赞同：4
> 
> 时间：2012-10-15T00:23:11.297
> 
> 标签：c#, data-binding, user-controls, windows-8

我正在 VS2012 中制作一个 Windows 8 应用程序，并尝试将对象（卡片）列表绑定到将显示两个字符串的用户控件。这是我在一页上的用户控件的代码：

```
<FlipView x:Name="cardView"/>
   <FlipView.ItemTemplate>
      <DataTemplate>
         <local:TileControl x:Name="cardTile" Width="600" Height="400" QuestionText="{Binding Value.question}" AnswerText="{Binding Value.answer}"/>
      </DataTemplate>
   </FlipView.ItemTemplate>
</FlipView> 
```

这是在后面的 C# 代码中设置的：

```
cardView.ItemsSource = Storage.content.Decks[currentDeck].Cards; 
```

用户控件“TileControl”控件内部包含以下变量：

```
public string questionTextStr { get; set; }   
public string answerTextStr { get; set; }

public string QuestionText
{
    get
    {
        return questionTextStr;
    }
    set
    {
        questionTextStr = value;
        questionText.Text = value; //set the textbox content
    }
}

public string AnswerText
{
    get
    {
        return answerTextStr;
    }
    set
    {
        answerTextStr = value;
        answerText.Text = value; //set the textbox content
    }
} 
```

错误列表中有错误提示“无法分配给属性 'Flashdeck.TileControl.AnswerText'”。它也适用于 QuestionText。该应用程序将编译并运行，但是当我打开包含用户控件的页面时崩溃。我做错了什么导致错误和崩溃？谢谢。

编辑：有关套牌和卡片类的更多信息。甲板：

```
public class Deck
    {
        public List<Card> Cards { get; set; }
        public bool flagged { get; set; }

        public Deck()
        {
        }

        public Deck(List<Card> iCards)
        {
            Cards = iCards;
            flagged = false;
        }

        public Deck(List<Card> iCards, bool iFlag)
        {
            Cards = iCards;
            flagged = iFlag;
        }
    } 
```

卡片：

```
public class Card
    {
        public string question { get; set; }
        public string answer { get; set; }
        public bool flagged { get; set; }

        public Card()
        {
        }

        public Card(string iQ, string iA)
        {
            question = iQ;
            answer = iA;
            flagged = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:21:17.360

您的属性必须是 DependencyProperties 才能将值绑定到它：

```
public string QuestionText
{
    get
    {
        return (string)GetValue(QuestionTextProperty);
    }
    set
    {
        SetValue(QuestionTextProperty, value);
        questionText.Text = value; //set the textbox content
    }
}
public static DependencyProperty QuestionTextProperty = DependencyProperty.Register("QuestionText", typeof(string), typeof(Deck), new PropertyMetadata(""));

... 
```

为此，您的类 Deck 必须从 DependencyObject 继承。

编辑：在您的 Card-Class 中没有称为 Value 的属性，这就是绑定到 Value.question 不起作用的原因，请尝试

```
<FlipView x:Name="cardView"/>
   <FlipView.ItemTemplate>
      <DataTemplate>
         <local:TileControl x:Name="cardTile" Width="600" Height="400" QuestionText="{Binding Path=question}" AnswerText="{Binding Path=answer}"/>
      </DataTemplate>
   </FlipView.ItemTemplate>
</FlipView> 
```

并在您的问题/答案属性的设置器中调用 PropertyChanged 事件，如此处所述[，](http://www.codeproject.com/Articles/15822/Bind-Better-with-INotifyPropertyChanged)以在您的属性值更改时更新绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:51:54.143

如果您的`Decks`班级具有`question`和`answer`属性，则为他们创建评估者并分配`QuestionText="{Binding Question}"`和`AnswerText="{Binding Answer}"`

在`Decks`课堂上

```
public string Question 
{
    get;
    set;
}

public string Answer
{
    get;
    set;
} 
```

# php - 用于 facebook/heroku 的 AS3 postgresql 和 amfphp？

> ID：12887862
> 
> 赞同：1
> 
> 时间：2012-10-15T00:24:11.370
> 
> 标签：php, facebook, flash, postgresql, heroku

我的目标是将我创建的 Flash 游戏变成 Facebook 应用程序，并在游戏中添加一个排行榜，以鼓励一些竞争。

到目前为止，我已经使用 Heroku 在 Facebook 上安装了该应用程序，在 Heroku 上设置了 dev postgresql 并创建了一个表并使用 psql 插入了一些示例数据。我可以使用 facebook api 检索用户的数据。使用 Amfphp，我能够在我的应用程序中与 php 进行通信，但是我在读/写数据库时遇到了麻烦。可能是因为我对 php 很弱。

我想我想知道是否有人知道 amfphp 是否可以与 postgresql 一起使用，或者我正在尝试做的事情是否有首选做法。任何教程或提示都会很棒。

这是我迄今为止最接近的一次，它返回一个`[Object object]`我无法弄清楚如何做任何事情的闪存：

```
public function registerNoob($id){
     $dsn = "pgsql:"
     . "host=ec2-107-22-161-45.compute-1.amazonaws.com;"
     . "dbname=dbvgstj2v06pit;"
     . "user=jytgyzybpoqjed;"
     . "port=5432;"
     . "sslmode=require;"
     . "password=obscured";
     $db = new PDO($dsn);

     $query = "SELECT * FROM noobs WHERE fbID = '$id';";
     $result = $db->query($query);
     return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:46:36.397

首先是一些关于 Flash/PHP 的提示：

1.  写一些 PHP 来做你想做的事。
2.  尝试将其包装在 amfPHP 服务中。
3.  尝试从服务浏览器调用它。
4.  然后，然后才尝试从 Flash 调用它。

amfPHP 真的不关心您使用哪个数据库。

查看 PDO PHP 库，它应该对您有所帮助。

现在您正在返回一个“资源”，Flash 不知道如何处理，您应该在将其返回到 Flash 之前将其转换为某种数组。PDO 对此有所帮助。

# java - 订购 HashMap

> ID：12887870
> 
> 赞同：0
> 
> 时间：2012-10-15T00:25:41.550
> 
> 标签：java, android, sorting, vector, hashmap

晚上好。

我需要组织一个HashMap，它是这样的：

private HashMap < String , Vector < Task >> tasksOrdered = new HashMap < String , Vector < Task >> ();

每个“任务”都是一个具有 3 个属性的类：

*   人名；
*   小时;
*   纪律;

我知道使用该 HashMap 我可以将任务按小时分组为向量，只需将任务小时数设置为键，并添加这些向量，或者如果存在现有向量则添加实例。

我的问题是，我如何按人名订购这些向量？

我想要的一个例子：

[1]：表格[https://dl.dropbox.com/u/4134140/Untitled.png](https://dl.dropbox.com/u/4134140/Untitled.png)

希望它有所帮助：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:27:56.140

您可以像这样按人名订购：

```
SortedMap<String, List<Task>> taskMap = new ConcurrentSkipListMap<String, List<Task>>();
taskMap.put(task.getPerson().getName(), task); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:34:37.317

HashMap 不给你任何排序。但是，我不确定您是否真的对排序感兴趣？

您似乎想根据名称对任务进行分组？您可以通过将人员姓名插入哈希图中来获取向量来执行相同操作。如果要按名称排序检索它们，可以获取`keyset()`、调用`java.util.Collections.sort()`，然后按顺序检索向量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T00:35:12.027

键 = 任务和值 = 人名

Collections.sort(Vector, new Comparator() {

```
 @Override
         public int compare(Vector o1, Vector o2) {
             return Collator.getInstance().compare(o1.getvalue(), o2.getValue());
         }
    }); 
```

只是假的，可能需要一些调整。

# .net - 将在 LinkedList 上进行二进制搜索 将值插入排序值列表的中间以提高性能？

> ID：12887872
> 
> 赞同：2
> 
> 时间：2012-10-15T00:25:51.093
> 
> 标签：.net, performance, linked-list, binary-search, sortedcollection

我需要创建一个排序列表，一次添加一个项目。所以我决定使用**`LinkedList<T>`**，因为它在**插入**操作中很有效。但是在找到合适的位置时，似乎需要更长的时间。我正在使用线性搜索来获取位置。如果我使用二进制搜索来获取正确的位置**`ElementAt`**，它会提高性能吗？据此，[它](https://stackoverflow.com/questions/10164355/how-do-i-get-the-n-th-element-in-a-linkedlistt)仍然是一个 O(n) 操作。你怎么看？如果是这样，有没有其他更好的数据结构来做这项工作？因为如果我使用不同的数据结构，当向中间插入一个新值时，我将不得不将该位置之后的所有数据移动一个位置，这显然是不希望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T14:35:13.237

你的问题有一些误解。

> *对 LinkedList 进行二分搜索以将值插入排序值列表的中间是否会提高性能？*

二进制搜索仅对已排序的集合有意义。`LinkedList<T>`不是一个。这是一个尊重集合的插入订单。要对 a 执行二进制搜索`LinkedList<T>`：

*   您将不得不对链表进行排序，这不仅效率很低（对链表的操作）而且对于仅仅插入来说工作量太大

*   否则您将不得不在插入时通过插入正确的位置来保持排序顺序，这又是太多的工作了。

从您的问题中，我了解到您想要一个尊重集合的排序顺序，但插入必须更快（不像 O(n) 的特征，比如典型的`List<T>`）。我的建议是在 .NET 中使用排序的集合类型。里面有一个[`SortedSet<T>`](http://msdn.microsoft.com/en-us/library/dd412070%28v=vs.110%29.aspxcCbr_w&bvm=bv.68235269,d.c2E)。`system.dll`这不会让你有重复，因为它是一个集合，在这种情况下，你可以[实现一个自定义`SortedBag<T>`（`SortedList<T>`或任何名称），如此处所示](https://stackoverflow.com/questions/196512/is-there-a-sorted-collection-type-in-net)。

> *我正在使用线性搜索来获取位置。*

我的建议是你不要那样做。让集合本身找到执行插入的位置。排序的集合类型最适合这里。

> *如果我使用二进制搜索来获取正确的位置`ElementAt` ，它会提高性能吗*

`ElementAt`方法不执行二进制搜索。充其量它会检查集合类型是否为 an`IList<T>`并相应地使用索引器。不，在您的情况下，它对性能没有影响。

> *当向中间插入一个新值时，我将不得不将该位置之后的所有数据移动一个位置，这显然是不希望的。*

你是对的，在基于数组的结构中间插入`List<T>`是一个 O(n) 操作。我不确定您是否也需要索引操作，但这会更昂贵。您可以拥有一个带有高效插入的排序集合类型，它没有索引意义，或者您可以拥有一个索引排序集合类型，但插入将是 O(n)。它是你必须付出的代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:37:09.607

[出于您的目的，使用SortedDictionary 类（或者可能是 SortedList）](http://msdn.microsoft.com/en-us/library/5z658b67%28v=vs.80%29.aspx)可能会更好

SortedDictionary 给出 O(log n) 的插入和检索时间。

# zend-framework - 如何在会话期间从 Zend application.ini 文件中检索参数？

> ID：12887873
> 
> 赞同：11
> 
> 时间：2012-10-15T00:26:00.253
> 
> 标签：zend-framework, configuration, zend-config, zend-app-bootstrap

> **可能重复：**
> [如何使用 zend 框架读取控制器上的 application.ini](https://stackoverflow.com/questions/5699844/how-could-read-application-ini-on-controller-using-zend-framework)

`application.ini`是 ZF 中的配置文件。除了 ZF 手册中所写的默认设置之外，我还有更多设置。但是，例如，我如何从我的动作控制器中检索这些参数？在会话期间存储此配置在哪里更好？

该类`Bootstrap_Abstract`具有返回读取文件`getOptions()`的简单 php 数组的方法：`application.ini`

```
$app = new Zend_Application(APPLICATION_ENV, '/application.ini');
$config = $app->bootstrap()->getOptions();  // $config is a php array of application.ini 
```

我想从它的 oop 样式中获取元素：

```
$param = $config[one][two];  // vs.
$param = $config->one->two;  // like this 
```

ZF 具有`Zend_Config_Ini`读取`.ini`'s 并准确返回 ArrayObject 的类。但无论如何`application.ini`，我想避免再读`Zend_Config_Ini`一次。`Zend_Application`但是`Bootstrap`or`Zend_Application`类不提供从`application.ini`.

第二，我可以在哪里存储这个 $config 呢？在`Zend_Registry`?

```
Zend_Registry::set('config', $config); 
```

然后在我的一些动作控制器中检索它：

```
$config = Zend_Registry::get('config');  // I retrieve config
$param = $config->one->two;              // I retrieve parameter from it and use it 
```

但这似乎有点低效：我有一个以通常 php 数组形式存在`application.ini`的`Bootstrap`副本和一个相同`application.ini`但以 ArrayObject 形式存在的副本`Zend_Registry`。并且必须执行两个步骤才能从我的配置中获取参数。我怎样才能更有效地解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T19:02:59.977

使用，您可以使用如下代码从应用程序中的任何位置（控制器、插件、模型等）`Zend_Controller_Front`检索信息：`application.ini`

```
$config = Zend_Controller_Front::getInstance()->getParam('bootstrap'); 
```

说`application.ini`你有一些这样的选择：

```
apikeys.google.maps.id  = "abc"
apikeys.google.maps.key = "123456789"
apikeys.twitter.oauth   = "20jg9032jg9320gj30" 
```

然后，您可以使用上述`$config`变量访问这些值：

```
$apikeys = $config->getOption('apikeys');
$mapsId  = $apikeys['google']['maps']['id'];  // abc
$maksKey = $apikeys['google']['maps']['key']; // 123456789
$twitKey = $apikeys['twitter']['oauth'];      // 20jg9032jg9320gj30 
```

希望有帮助。

# javascript - 当用户单击没有可单击区域的图像时显示警报消息

> ID：12887890
> 
> 赞同：0
> 
> 时间：2012-10-15T00:29:08.717
> 
> 标签：javascript, jquery, html, imagemap

根据 w3 教程，我正在使用一个简单的图像映射，

```
<p>Click on the sun or on one of the planets to watch it closer:</p>

<img src="hj.png"  alt="skitch" usemap="#planetmap">

<map name="planetmap">
<area shape="rect" coords="0,110,210,150" alt="Sun" href="sun.htm">

</map> 
```

如果他单击图像的不可单击区域，我需要提醒用户。我为此搜索了很多，找到了很多教程，但找不到确切的。有什么办法可以在 java 脚本中做到这一点，虽然我是 jquery 的新手。如果只有 jquery 解决方案，请给我一些示例教程。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:41:30.010

在图像地图中创建新的可点击区域，覆盖人们不应点击的区域，然后将其设置如下：

```
<area shape="rect" coords="0,110,210,150" alt="Not Here" href="#" onclick="alert('Don\'t click here')"> 
```

# c# - 在 Windows 8 应用程序的 Blend for Visual Studio 中启用状态记录

> ID：12887892
> 
> 赞同：5
> 
> 时间：2012-10-15T00:29:25.700
> 
> 标签：c#, xaml, windows-8, expression-blend

我正在寻找一种将 Snapped Visual State 添加到我的 Windows 8 应用程序的方法。根据 MSDN，我可以通过在设备下选择它并启用“启用状态记录”来做到这一点。但是，此选项被禁用。显示的唯一视觉状态是“”。如何启用此选项以便我可以编辑此状态？

我是否需要在 XAML 中手动创建视觉状态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T01:23:15.667

如果您使用的是空白页面（或空白项目），您的类将继承自 Windows.UI.Xaml.Controls.Page，它不会自动引入视觉状态管理，并且您不会在XAML。

如果创建其他页面类型之一，页面类将扩展 LayoutAwarePage，其中包含处理各种视觉状态的管道，并且视觉状态在 XAML 中播种。您可以手动将以下 XAML 添加到现有页面以获取设计功能，但您仍然需要在方向更改时管理切换到状态（LayoutAwarePage 为您做的事情）

```
 <VisualStateManager.VisualStateGroups>
          <VisualStateGroup x:Name="ApplicationViewStates">
             <VisualState x:Name="FullScreenLandscapeOrWide"/>
             <VisualState x:Name="FilledOrNarrow" />
             <VisualState x:Name="FullScreenPortrait" />
             <VisualState x:Name="FullScreenPortrait_Detail" />
             <VisualState x:Name="Snapped" />
             <VisualState x:Name="Snapped_Detail" />
          </VisualStateGroup>
       </VisualStateManager.VisualStateGroups> 
```

# php - codeigniter 爆炸未定义的偏移量

> ID：12887896
> 
> 赞同：1
> 
> 时间：2012-10-15T00:29:46.160
> 
> 标签：php, codeigniter, explode

我有这样的模型

```
 function getlastval($prefix,$namatable, $namafield)
{
    $this->db->order_by($namafield,'DESC');
    $key = $this->db->get($namatable);

    if($key->num_rows()>0)
    {

        $lastval= $key->row()->Kode_Material_Jasa;
        $lastval = explode($prefix,$lastval);
        $lv = $lastval[1]; //line 18 refer to this line
        //return ltrim($lv, '0');
        }
    else
    {
        return 0;
    }
}

function gencode($prefix, $digit, $lastval)
{
    return $prefix . str_pad($lastval+1, $digit, '0', STR_PAD_LEFT);
} 
```

它适用于早期的控制器

```
function addkategorimaterial()
{
    $this->load->model('m_admin');
    $lastval = $this->m_admin->getlastval('KKMJ','ms_kategori_material','Kode_Kategori_Material_Jasa');
    $data['nextval'] = $this->m_admin->gencode('KKMJ',3,$lastval); 
    $data['title'] = 'QB Tambah Kategori Material';
    $this->load->view('head',$data);
    $this->load->view('content/add_kategori_material');
} 
```

它返回`KKMJ001`，但在另一个控制器上不起作用

```
 $this->load->model('m_admin');
$lastval = $this->m_admin->getlastval('KMJ','ms_material_jasa','Kode_Material_Jasa');
    $data['nextval'] = $this->m_admin->gencode('KMJ',3,$lastval); 
    $data['kkmj']='';
    $data['title'] = 'QB Tambah Material / Jasa';

    print_r($data['nextval']);
    print_r($lastval); 
```

所以函数会返回`KMJ001`并且错误是这样的

![在此处输入图像描述](../Images/af9d31346bcf8bf8178fec045ed1e5e6.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:45:47.917

我不认为那`explode()`是你所追求的功能。该`explode()`函数通过分隔符将字符串拆分为数组。

它不采用“前缀”作为您选择的第一个参数（语义上）。它将分隔符作为第一个参数。

由于您`KMMJ`作为分隔符传递，因此您将获得 1 的数组索引的唯一方法是如果从返回的字符串`$key->row()->Kode_Material_Jasa;`类似于: `fooKMMJbar`，这将产生: `array('foo', 'bar')`...这是极不可能的。

无论如何，你已经调用了`getlastval('KMJ'...)`and `getlastval('KMMJ'...)`，你确定它们不应该是一样的吗？

# wordpress - 文件夹的 htaccess 中的重定向规则

> ID：12887898
> 
> 赞同：2
> 
> 时间：2012-10-15T00:30:16.137
> 
> 标签：wordpress, .htaccess, redirect

我有一个 wordpress 托管网站 www.mysite.com/myBlog 。wordpress 安装在我的主机文件夹内的 public_html/www/myBlog 文件夹内完成。

我还有一个文件夹 public_html/www/myName 将我重定向到域 myName.com

虽然这工作正常，但在 myName 文件夹中我有 index.html 之类的文件。acad.html，穿xp.html

点击它们我希望有这样的行为

myName.com/index.html myName.com/acad.html myName.com/workex.html

虽然我只把它当作 myname.com。

我在 myName 文件夹中找到了 htaccess 规则：

```
Redirect http://mydomainName.com/myName/+ 

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteCond %{HTTP_HOST} ^mydomainName.com$
RewriteRule ^/?$ "http\:\/\/www\.mydomainName\.com\/myBlog" [R=301,L] 
```

任何人都可以帮助我解决 htaccess 文件的问题吗？

更多细节：

我的 WordPress 博客出了点问题。我可以去我的博客和主页工作正常，但是当我尝试去任何帖子时，它会引发 403 错误。阿帕奇禁止。

1.  尝试与网络主机交谈以获得权限。
2.  检查htaccess。默认情况下替换代码代码仍然无法正常工作。
3.  删除了默认删除的 htaccess 的永久链接创建了新的永久链接。
4.  授予博客目录中所有文件的权限
5.  重写 robots.txt 博客网址是：www.windowsvj.com
6.  Wordpress 社区也无法提出非常有用的建议。

.htaccess 中的当前重定向规则代码是：

```
# BEGIN WordPress 
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase /wpblog/ 
RewriteRule ^index\.php$ - [L] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /wpblog/index.php [L] 
</IfModule> 
# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:02:50.613

这可能是服务器配置中禁用**FollowSymLinks的结果。**只需添加`Options +FollowSymlinks`到**.htaccess**文件就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:42:05.807

而不是使用标志 [L]

```
# BEGIN WordPress 
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase /wpblog/ 
RewriteRule ^index\.php$ - [L]      <---
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /wpblog/index.php [L] <---
</IfModule> 
# END WordPress 
```

尝试使用 [QSA]

```
# BEGIN WordPress 
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase /wpblog/ 
RewriteRule ^index\.php$ - [QSA]      <---
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /wpblog/index.php [QSA] <---
</IfModule> 
# END WordPress 
```

[L] 的工作原理是 RewriteRule 是否匹配

```
RewriteRule . /wpblog/index.php [L] 
```

然后按照 Apache 网站上的说明，忽略此 RewriteRule 之后的所有其他重写

> *“在大多数情况下，这意味着如果规则匹配，则不会处理进一步的规则。” [http://httpd.apache.org/docs/current/rewrite/flags.html](http://httpd.apache.org/docs/current/rewrite/flags.html)*

这是一个链接，其中包含有关 .htaccess 标志的更多信息

[http://httpd.apache.org/docs/current/rewrite/flags.html](http://httpd.apache.org/docs/current/rewrite/flags.html)

希望这对你有用：P

# php - Eclipse - PHP - 寻求“Enter 键调整新行上的缩进”选项

> ID：12887904
> 
> 赞同：2
> 
> 时间：2012-10-15T00:32:15.440
> 
> 标签：php, eclipse, ide, eclipse-juno

刚刚获得 Eclipse Juno，因为我的旧版本 Eclipse (Helios) 在大型 PHP 文件上运行非常缓慢。朱诺解决了这个问题。

现在我有一个非常简单的外观问题：当我按 Enter 时，新行开始时没有缩进。在 Helios 中，它会自动缩进以匹配当前缩进级别（或智能缩进 +1）。

首选项中没有此选项，即使 IDE 中的所有其他语言都存在此选项。

有什么解决办法吗？

# javascript - “缺少)”错误

> ID：12887905
> 
> 赞同：0
> 
> 时间：2012-10-15T00:32:48.990
> 
> 标签：javascript

我正在编写询问用户姓名和年龄的代码。

```
var name;
var age;

name = prompt("What is your name?");
age = prompt("What is your age?"); 
```

代码设置为向他们重复他们的姓名和年龄，然后如果年龄变量低于 50，它使用 if 语句向他们发送一条消息，说“你还年轻”。

不过，我有一个问题。我无法打印告诉用户他们输入的年龄和姓名的字符串。我收到一个语法错误，告诉我有一个意外的字符串。

问题代码是这样的：

```
console.log("You're name is " +name " and you are " +age "years old."); 
```

如果我只将一个变量打印到控制台，代码就可以正常工作，如下所示：

```
console.log("You're name is " +name.); 
```

希望你们能帮助我。

完整代码：

```
var name;
var age;

name = prompt("What is your name?");
age = prompt("What is your age?");

console.log("You're name is " +name " and you are " +age "years old.")

var printNameAndAge = function() {
    if (age>50) {
        console.log("Dang you're old.");
    }
    else {
        console.log("You're pretty young, "+name);
        alert("You're pretty young, "+name);
    }
};

printNameAndAge(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:34:28.640

```
console.log("Your name is " + name + " and you are " + age + " years old."); 
```

要内联插入变量，您需要在前后都使用连接运算*符*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:34:39.253

你错过了两个，`+`一个`name`又一个`age`。请更正如下：

```
console.log("You're name is " +name + " and you are " +age+ "years old."); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T00:34:41.297

你忘记了一些优点！

```
console.log("You're name is " +name " and you are " +age "years old."); 
```

应该

```
console.log("You're name is " +name +" and you are " +age+ "years old."); 
```

# bash - 双引号内的感叹号导致奇怪的解析错误

> ID：12887906
> 
> 赞同：4
> 
> 时间：2012-10-15T00:33:00.100
> 
> 标签：bash, quotes

为什么此命令行有效：

```
$ output='Irrelevant'; if [[ $output =~ Something ]]; then echo "I found something in the output." ; fi 
```

而这个给了我一个奇怪的解析错误？

```
$ output='Irrelevant'; if [[ $output =~ Something ]]; then echo "I found something in the output!" ; fi
-bash: !": event not found 
```

与第一个版本的*唯一*变化是要在引号内呼应的句子以感叹号结尾。**为什么 Bash 在第二个版本中给我这个错误？**

如果它很重要，这是来自的输出`bash --version`：

```
GNU bash, version 4.2.24(1)-release (x86_64-pc-linux-gnu) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T00:34:01.853

您可以将字符串用单引号而不是双引号括起来。

感叹号调用了[`bash`手册](http://www.gnu.org/software/bash/manual/bashref.html#History-Interaction)中描述的非常有用的历史扩展功能。

> 历史扩展是由历史扩展字符的外观引入的，`!`默认情况下。仅`\`和`'`可用于转义历史扩展字符。

例如，要执行以单词开头的最后一个命令，请`mysql`键入：

```
!mysql 
```

或者要执行最后一个包含单词 的命令`grep`，请输入：

```
!?grep 
```

该`bash`手册还记录了[历史扩展运算符](http://www.gnu.org/software/bash/manual/bashref.html#Event-Designators)的语法。

# ruby - 尝试将 Ruby 连接到 SQL 服务器时出现“关闭连接错误”

> ID：12887907
> 
> 赞同：9
> 
> 时间：2012-10-15T00:33:23.750
> 
> 标签：ruby, sql-server, tiny-tds

这是我用来连接到 SQL Server 2012 Express 的代码。我的文件名为`Connect.rb`.

```
require "rubygems"
require "tiny_tds"
client = TinyTds::Client.new(
                    :username => 'sa',
                    :password => 'sapassword',
                    :dataserver => 'localhost\SQLEXPRESS',
                    :database => 'ContactsDB')
result = client.execute("SELECT * FROM [Contacts]") 
```

当我运行代码时，我收到以下错误：

> 在“执行”中：来自 Connect.rb 的关闭连接（TinyTds::Error）：在“主”中

当我用以下代码替换上面的代码时，

```
client = TinyTds::Client.new(
                    :username => 'sa',
                    :password => 'sapassword',
                    :host => 'localhost',
                    :port => 1433,
                    :database => 'ContactsDB') 
```

我收到以下错误：

> 在“连接”中：无法连接：自适应服务器不可用或不存在

是什么导致了这个错误以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:23:44.793

看来配置没问题。dataserver 是定义非默认实例的正确符号。

确保启用 TCP/IP 和命名管道协议（在 SQL Express 上默认禁用）。同时启用 SQL Server Browser 服务正在运行（默认禁用）。

您可以在 Microsoft SQL Server/配置工具下的开始菜单中的 Sql Server 配置管理器中找到这些。确保在“客户端协议”和每个列出的实例中都启用它们。

此外，请确保您的防火墙允许 SQL 正在侦听的端口上的连接（默认为 1433）。

无需指定端口，因为 Tiny-TDS 默认为 1433。您的第二个代码段不包含实例。如果您在实例上设置了 SQL Express，那么您需要使用数据服务器，而不是主机，并指定实例名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-16T23:40:17.730

尝试将端口号（即使它是默认值 1433）添加到配置的数据服务器值。我有一个设置，我通过流量管理器设备通过隧道到达远程网络上的 SQL Server，除非我专门设置我的配置，否则 TinyTDS 不会连接：

```
dataserver: 192.168.1.1:1433\SQL1 
```

在我的情况下，在配置中设置`port:`值没有任何作用。奇怪的是，这一步是必需的，因为无论如何 1433 是默认值，而且我的其他 SQL Server 连接配置都不需要指定端口，但在这种特殊情况下添加它对我有用。

`export TDSDUMP=/tmp/freetds.log`您可以通过运行然后启动 irb 来测试您与 TinyTDS 的连接，同时跟踪该日志文件，从而更仔细地了解您的连接失败的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-30T22:47:07.197

我遇到了这个确切的问题，终于弄清楚了。我知道这是旧的，但我希望它可以帮助未来的人。

进入 Sql Server 配置管理器（开始 >> Microsoft SQL Server >> 配置工具）并打开 TCP/IP 和命名管道。在网络配置中，右键单击 TCP/IP，转到属性，然后是 IP 地址。您需要启用所需的连接（我使用的是 VM，所以我使用了 IPv4 地址），以及空白 TCP 动态端口并指定一个静态端口（我使用 1433）。

然后，您需要允许传入流量通过防火墙到达端口 1433（或任何静态端口）。

我做到了，终于进去了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-04T19:15:43.797

在 Windows 上，您需要：

**首先**，您应该拥有 sql server 的所有权限，使用 Microsoft SQL Server manager studio 执行此操作。

**其次**，使用 Sql Server 配置管理器，转到 SQL SERVER 网络配置并启用您的实例的协议，即带有名称和 TCP/IP 的管道，启用这些，一旦这样做，您应该转到 SQL SERVER 服务并启动 1。 SQL Server（实例）和2.Sql Server Browser explorer（重要）

在 YAML 上：（Windows 上的示例）

```
development:
  adapter: sqlserver
  database: GESTIONESDIVERSASDESARROLLO
  username: Admin1\Admin
  password: passw0rd
  dataserver: ADMIN1\SQLDEVELOPER
  timeout: 10 
```

# javascript - 如何将结果列表中的项目应用到当前对象的父 Div 标签？

> ID：12887908
> 
> 赞同：1
> 
> 时间：2012-10-15T00:33:59.410
> 
> 标签：javascript, jquery, json

我正在尝试构建一个函数，用于将 Facebook 喜欢的数量插入到 Div 标签中。到目前为止，我有一个脚本可以从另一个名为“entry”的 Div 标记内的 Div 标记获取 URL，然后让 .getJSON() 方法检索每个条目的 Facebook 点赞数。但是，我可以' 不获取 Facebook Likes 的每个检索值以插入到每个条目的 Div 标签中。请注意，我将代码简化为提醒每个 Facebook Like 值的位置。这是我到目前为止所拥有的：

```
<div class="entry">
  <div class="fburl">https://graph.facebook.com/zombies</div>
  <div class="facebook-likes"></div>
</div> 
<div class="entry">
  <div class="fburl">https://graph.facebook.com/starwars</div>
  <div class="facebook-likes"></div>
</div> 
```

这是我的 jQuery：

```
$(document).ready(function(){
$(".entry").each(function() {
    var fbURL = $(this).find(".fburl").html();
    $.getJSON(fbURL, function(fbData) {
        var fbArr = fbData['likes'];
        alert(fbArr);
    });
});
}); 
```

所以我要做的是遍历每个条目，获取它的 Open Graph URL，检索 Likes 值，然后将其插入到适当的 Div 标记中，因此代码应呈现为：

```
<div class="entry">
 <div class="fburl">https://graph.facebook.com/zombies</div>
 <div class="facebook-likes">2,586 Likes</div>
</div> 
 <div class="entry">
  <div class="fburl">https://graph.facebook.com/starwars</div>
  <div class="facebook-likes">8,905,721 Likes</div>
</div> 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:41:44.670

```
$(document).ready(function() {
    $('.entry').each(function() {
        var $this = $(this),
            fbURL = $this.children('.fburl').html();
        $.getJSON(fbURL, function(fbData) {
            $this.children('.facebook-likes').html(fbData['likes'] + ' Likes')
        });
    });
}); 
```

**见：** [http ://api.jquery.com/children](http://api.jquery.com/children)

**演示：http:** [//jsfiddle.net/9EALz/2/](http://jsfiddle.net/9EALz/2/)

**注意：**使用`children()`将比使用更有效，`find()`因为它将 DOM 遍历限制在单个级别（[http://jsperf.com/find-vs-children/13](http://jsperf.com/find-vs-children/13)）。`$(this)`通过兑现 jQuery 对象`var $this = $(this)`也稍微更有效，因为它可以防止不必要的选择器解释 ( [http://jsperf.com/jquery-cache-vs-no-chace](http://jsperf.com/jquery-cache-vs-no-chace) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:43:13.957

你可能想要这个

```
$(document).ready(function(){
    $(".entry").each(function() {
        var entry=$(this), fbURL=$(".fburl", entry).html(),
        el=$('.facebook-likes', entry);
        $.getJSON(fbURL, function(fbData) {
           el.html(numberWithCommas(fbData['likes'])+" Likes");
        });
    });
});​ 
```

从[这里开始的千位分隔符功能](https://stackoverflow.com/questions/2901102/how-to-print-number-with-commas-as-thousands-separators-in-javascript)

```
function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
} 
```

[**演示**](http://jsfiddle.net/ABEFV/8/)。

## 更新：

或者，您也可以使用[**它**](http://jsfiddle.net/ABEFV/7/)（使用数据属性）而无需额外的 div `fburl`，即

```
<div class="entry">
    <div data-fburl="https://graph.facebook.com/zombies" class="facebook-likes"></div>
</div> 
```

**JS**

```
$(".entry").each(function() {
    var entry=$(this), fbURL = $(".facebook-likes", entry).attr('data-fburl'),
    el=$('.facebook-likes', entry);
    $.getJSON(fbURL, function(fbData) {
        el.html(numberWithCommas(fbData['likes'])+" Likes");
    });
}); 
```

# mysql - 具有相同名称字段的Mysql查询SELECT

> ID：12887911
> 
> 赞同：0
> 
> 时间：2012-10-15T00:34:27.820
> 
> 标签：mysql, select

我在 Mysql 数据库中有 table1 和 table2。

每个表都有一个同名的字段，比如说“id”。

我需要一个查询，我可以在其中获取两个表的“id”字段值。我试过这个：

```
 SELECT 
   table1.id,
   table2.id
 FROM... 
```

但我收到一条错误消息：

> “字段列表”中的未知列“table1.id”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:35:56.720

你需要`ALIAS`在列上添加

```
 SELECT 
   table1.id AS table1_ID,                              -- keyword AS is optional
   table2.id AS table2_ID
 FROM... 
```

并在 PHP 中调用它们的别名（*例如*） 。`$row["table1_ID"]`

更多事情的`Unknown column 'table1.id' in 'field list'`结果来自服务器在您的连接语句中无法找到的列。

*后续问题，您可以发布整个查询吗？*

# c++ - 在 C++ 中将浮点数的文本文件读入二维向量

> ID：12887917
> 
> 赞同：2
> 
> 时间：2012-10-15T00:35:06.283
> 
> 标签：c++, arrays, vector, fstream, ifstream

我有一个包含数千个浮点值的数据文件，我想将它们读入二维向量数组，并在存储文件中的浮点数后将该向量传递给另一个例程。当我运行此代码时，它会打印出来；

> [0][0] = 0、[0][1] = 0 等。

数据文件包含以下值；

> 0.000579、27.560021 等

```
int rows = 1000;
int cols = 2;
vector<vector<float>> dataVec(rows,vector<float>(cols));
ifstream in;
in.open("Data.txt");

for(int i = 0; i < rows; i++){
    for(int j = 0; j < 2; j++){
        in >> dataVec[i][j];    
        cout << "[ " << i << "][ " << j << "] = " << dataVec[i][j] << endl;
    }
}
in.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T00:57:53.420

在我看来，文件无法打开。你没有测试成功，所以无论如何它都会继续前进。您所有的值都被初始化为零，并且会保持这种状态，因为每次读取都失败。这是猜想，我承认，但我会投入资金。=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:05:47.573

试试这个解决方案，它根据您的规格工作：

```
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;

int main(void)
{

    ifstream infile;
    char cNum[10] ;
    int rows = 1;
    int cols = 2;
    vector<vector<float > > dataVec(rows,vector<float>(cols));

    infile.open ("test2.txt", ifstream::in);
    if (infile.is_open())
    {
            while (infile.good())
            {

                for(int i = 0; i < rows; i++)
                {
                    for(int j = 0; j < 2; j++)
                    {

                        infile.getline(cNum, 256, ',');

                        dataVec[i][j]= atof(cNum) ;

                        cout <<dataVec[i][j]<<" , ";

                    }
                }

            }
            infile.close();
    }
    else
    {
            cout << "Error opening file";
    }

    cout<<" \nPress any key to continue\n";
    cin.ignore();
    cin.get();

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T01:19:54.423

```
#include <vector>
#include <fstream>
#include <iostream>

using namespace std;

void write(int m, int n)
{
    ofstream ofs("data.txt");
    if (!ofs) {
        cerr << "write error" << endl;
        return;
    }

    for (int i = 0; i < m; i++)
        for (int j = 0; j < n; j++)
            ofs << i+j << " ";
}

void read(int m, int n)
{
    ifstream ifs("data.txt");
    if (!ifs) {
        cerr << "read error" << endl;
        return;
    }

    vector<float> v;
    float a;
    while (ifs >> a) v.push_back(a);

    for (int i = 0; i < m; i++)
        for (int j = 0; j < n; j++)
            cout << "[" << i << "][" << j << "] = "
                 << v[i*n+j] << ", ";
}

int main()
{
    write(2,2);
    read(2,2);

    return 0;
} 
```

# java - 使用 Dijkstra 算法的二维数组中的最短路径？

> ID：12887921
> 
> 赞同：3
> 
> 时间：2012-10-15T00:35:36.270
> 
> 标签：java, shortest-path, dijkstra

这是我第一次实现 Dijkstra 算法。好的，所以这里我有一个简单的 2D 9 x 9 数组：

![9 x 9 阵列](../Images/02a7a0794853c16cdd8be8447e999be7.png)

起点是 1，我们试图到达**任何**绿色方块。红色方块是墙壁或熔岩（满足您的想象力）。

我如何在 Java 中实现它？

计算机科学不是我的领域，因此我不是一个经验丰富的程序员，所以我可能不知道如何做一些堆栈推送，只知道循环和递归:( 请尽量保持简单并耐心等待！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T00:52:29.380

这里有一些[类似](http://www.glassdoor.com/Interview/-Solve-a-maze-you-have-a-2D-matrix-with-1-s-as-blocked-and-0-s-as-path-Find-a-path-from-one-corner-to-another-backtrac-QTN_225388.htm)的东西可以帮助您入门。但是，下面提出的解决方案试图到达*右下角*。您可以放松该条件以找到*最下面一行*。您还需要稍微更改编码以获得代表该行的唯一值。

```
public class MazeSolver {

    final static int TRIED = 2;
    final static int PATH = 3;

    // @formatter:off
    private static int[][] GRID = { 
        { 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1 },
        { 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1 },
        { 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0 },
        { 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1 },
        { 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1 },
        { 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
        { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 } 
    };
    // @formatter:off

    public static void main(String[] args) {
        MazeSolver maze = new MazeSolver(GRID);
        boolean solved = maze.solve();
        System.out.println("Solved: " + solved);
        System.out.println(maze.toString());
    }

    private int[][] grid;
    private int height;
    private int width;

    private int[][] map;

    public MazeSolver(int[][] grid) {
        this.grid = grid;
        this.height = grid.length;
        this.width = grid[0].length;

        this.map = new int[height][width];
    }

    public boolean solve() {
        return traverse(0,0);
    }

    private boolean traverse(int i, int j) {
        if (!isValid(i,j)) {
            return false;
        }

        if ( isEnd(i, j) ) {
            map[i][j] = PATH;
            return true;
        } else {
            map[i][j] = TRIED;
        }

        // North
        if (traverse(i - 1, j)) {
            map[i-1][j] = PATH;
            return true;
        }
        // East
        if (traverse(i, j + 1)) {
            map[i][j + 1] = PATH;
            return true;
        }
        // South
        if (traverse(i + 1, j)) {
            map[i + 1][j] = PATH;
            return true;
        }
        // West
        if (traverse(i, j - 1)) {
            map[i][j - 1] = PATH;
            return true;
        }

        return false;
    }

    private boolean isEnd(int i, int j) {
        return i == height - 1 && j == width - 1;
    }

    private boolean isValid(int i, int j) {
        if (inRange(i, j) && isOpen(i, j) && !isTried(i, j)) {
            return true;
        }

        return false;
    }

    private boolean isOpen(int i, int j) {
        return grid[i][j] == 1;
    }

    private boolean isTried(int i, int j) {
        return map[i][j] == TRIED;
    }

    private boolean inRange(int i, int j) {
        return inHeight(i) && inWidth(j);
    }

    private boolean inHeight(int i) {
        return i >= 0 && i < height;
    }

    private boolean inWidth(int j) {
        return j >= 0 && j < width;
    }

    public String toString() {
        String s = "";
        for (int[] row : map) {
            s += Arrays.toString(row) + "\n";
        }

        return s;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T00:45:02.847

我建议您先在自然语言中写下一种在此处应用 dijkstras 算法（假设您首先知道它）的方法，然后开始将其转换为您的编程语言。

您需要为此回答的基本问题：

*   节点是什么？
*   有什么联系？
*   每个连接的重量是多少？

一旦你这样做了，你应该能够找到一个（可能不是有效的）解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:13:17.787

最佳解决方案确实是使用具有不同完成条件的[Dijkstra或 AStar。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)所以你需要写`if(targetNodes.contains(u)) break;`而不是`if(target == u) break;`

（参见维基百科：*如果我们只对顶点源和目标之间的最短路径感兴趣，如果 u = target，我们可以在第 13 行终止搜索。*）

这已经在我的项目中实现了......哦，这是作业；）？

# arrays - Visual Basic - 读取 .txt、拆分、排序和显示

> ID：12887925
> 
> 赞同：1
> 
> 时间：2012-10-15T00:36:48.357
> 
> 标签：arrays, file, visual-studio-2008, console

我对visual basic很陌生，我正在为我的业余时间的一个小项目制作一个基于文本的游戏。游戏将有一个评分系统，在游戏结束时，用户的分数将存储在一个文本文件中。尽管我确定附加文本并不困难，但我还没有编写写入文件的代码。我遇到的问题是显示高分；我可以阅读它们，我可以使用 Split(",")，我什至将结果显示在一个漂亮的表格中。我遇到的问题是按实际分数的顺序显示高分。这是我必须构建分数表的代码。（注意。Pad() 是我制作的一个函数，用于将空格填充到字符串的末尾，这样它们就可以正确地放入表中。语法：Pad（字符串，长度输出））

```
 Dim FStrm As FileStream
    Dim StrmR As StreamReader
    FStrm = New FileStream("HighScores.txt", FileMode.Open)
    StrmR = New StreamReader(FStrm)
    Dim highScores As New List(Of String)

    While StrmR.Peek <> -1
        highScores.Add(StrmR.ReadLine)
    End While

    FStrm.Close()

    Console.WriteLine("       __________________________________________________________________ ")
    Console.WriteLine("      |       Score       |       Name                                   |")
    Console.WriteLine("      |-------------------|----------------------------------------------|")
    Dim Scores() As String
    For Each score As String In highScores
        Scores = score.Split(",")
        Console.WriteLine("      |  {0}  |  {1}    |", Pad(Scores(0), 15), Pad(Scores(1), 40))
    Next
    Console.WriteLine("      |___________________|______________________________________________| ") 
```

以下是文本文件的示例。

```
2,Zak
10000,Charlie
9999,Shane
90019,Rebecca 
```

有人可以帮我找到一种按分数对线条进行排序的方法，也许我需要采取完全不同的方法？非常感谢你！

-查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:07:03.773

我是 C# 人，但这里有：

```
Dim scores As List(Of UserScore)
Dim lines As String()
'Read in all lines in one hit.
lines = File.ReadAllLines("HighScores.txt")
scores = New List(Of UserScore)

For Each line As String In lines
    Dim tokens As String()
    'Split each line on the comma character.
    tokens = line.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries)

    'Create a new UserScore class and assign the properties.
    Dim userScore As UserScore
    userScore = New UserScore()
    userScore.Name = tokens(1)
    userScore.Score = Int32.Parse(tokens(0))

    'Add to the list of UserScore objects.
    scores.Add(userScore)
Next

'Sort them by descending order of score. To sort in the other
'direction, remove the Descending keyword.
scores = (From s In scores Order By s.Score Descending).ToList() 
```

你需要这个类来保存这些值。我假设 the`Score`总是一个整数 - 如果它是其他东西，那么这个字段和`Int32.Parse`调用将需要调整以适应。

```
Class UserScore
    Property Name As String
    Property Score As Int32
End Class 
```

根据这需要有多健壮，您可能还需要检查文件是否成功打开、`Int32.Parse`调用是否有效（`TryParse`在这种情况下该方法会更好）以及`line.Split`调用是否返回一个包含两个值的数组。否则，这应该可以解决问题。

# .net - json数组到类

> ID：12887928
> 
> 赞同：1
> 
> 时间：2012-10-15T00:37:23.553
> 
> 标签：.net, vb.net, json, restsharp, arrays

**我有这个 json 数组响应：**

```
 [
  {
    "status": "active",
    "url": "https:\/\/ikiosk.podio.com\/dev\/apps\/myusers",
    "url_label": "myusers",
    "space_id": 550628,
    "link_add": "https:\/\/ikiosk.podio.com\/dev\/apps\/2304568\/items\/new",
    "app_id": 2304568,
    "date_field": false,
    "link": "https:\/\/ikiosk.podio.com\/dev\/apps\/myusers",
    "config": {
      "allow_edit": true,
      "description": "",
      "item_name": "myusers",
      "type": "standard",
      "icon_id": 251,
      "allow_create": true,
      "usage": "",
      "icon": "251.png",
      "external_id": null,
      "name": "myusers"
    },
    "url_add": "https:\/\/ikiosk.podio.com\/dev\/apps\/2304568\/items\/new"
  },
  {
    "status": "active",
    "url": "https:\/\/ikiosk.podio.com\/dev\/apps\/requests",
    "url_label": "requests",
    "space_id": 550628,
    "link_add": "https:\/\/ikiosk.podio.com\/dev\/apps\/2299738\/items\/new",
    "app_id": 2299738,
    "date_field": true,
    "link": "https:\/\/ikiosk.podio.com\/dev\/apps\/requests",
    "config": {
      "allow_edit": true,
      "description": "",
      "item_name": "request",
      "type": "standard",
      "icon_id": 251,
      "allow_create": true,
      "usage": "",
      "icon": "251.png",
      "external_id": null,
      "name": "Requests"
    },
    "url_add": "https:\/\/ikiosk.podio.com\/dev\/apps\/2299738\/items\/new"
  }
] 
```

**这里的课程：**

```
Public Class GetAllApps
    Public pApplication As PodioApplication
End Class

Public Class PodioApplication
    Public status As String
End Class 
```

**我的代码在这里：**

```
Dim client As New RestClient()
client.BaseUrl = "https://api.podio.com/"

Dim request As New RestRequest()
request.RequestFormat = DataFormat.Json
request = New RestRequest()
request.Method = Method.[GET]
request.RequestFormat = DataFormat.Json
request.AddParameter("oauth_token", access_token)
request.Resource = "/app/v2//"

Dim resp = client.Execute(Of List(Of GetAllApps))(request)  
RichTextBox1.Text = resp.Content

Dim pApps As List(Of PodioApplication) = resp.Data.[Select](Function(c) c.pApplication).ToList()
MsgBox(pApps.Count)

For Each p As PodioApplication In pApps
   MsgBox(p.status)
Next 
```

我之前写的json数组是resp.Content的结果。在代码行 MsgBox(pApps.Count) 我取了正确的数字（在这种情况下是 2）。但是在 for each 循环中，我出现异常错误：“对象引用未设置为对象的实例。”

我的实现有什么问题，缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:04:58.080

最后，

我把它简单化了：

```
Dim client As New RestClient()
        client.BaseUrl = "https://api.podio.com/"
        Dim request As New RestRequest()
        request.RequestFormat = DataFormat.Json
        request = New RestRequest()
        request.Method = Method.[GET]
        request.RequestFormat = DataFormat.Json
        request.AddParameter("oauth_token", access_token)
        request.Resource = "/app/v2//"
        Dim response = client.Execute(request)
        Dim ser As New JavaScriptSerializer()
        Dim pApps As List(Of PodioApplication) = ser.Deserialize(Of List(Of PodioApplication))(response.Content) 
```

现在 pApps 从响应中获得了正确的数据。

# d3.js - 打字稿 - Visual Studio - d3

> ID：12887929
> 
> 赞同：1
> 
> 时间：2012-10-15T00:37:31.507
> 
> 标签：d3.js, typescript

我创建了一个新的 TypeScirpt 项目，将 json 文件添加到解决方案中，将“复制到输出目录”属性更改为始终复制。

当我 F5 项目时，浏览器抱怨它找不到资源*somedata.json*

如果我运行 python SimpleHTTPServer，加载相同的 html 文件，它就可以工作。

```
 <script type="text/javascript">
     d3.json("somedata.json", draw);
 </script> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:12:23.637

您是否尝试过使用站点根目录的完整路径来获取`somedata.json`文件？

```
d3.json("/scripts/somedata.json", draw); 
```

替换`/scripts/`为您的实例中的正确路径，但以前缀开头的地址`/`使其相对于根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T11:34:17.273

这可能与允许 Visual Studio 使用的服务器提供服务的 MIME 类型有关。如果这是一个 ASP.net 项目，您可以在 web.config btw 中定义此类 MIME 类型。

如果有帮助，请参阅此官方示例： [http ://www.typescriptlang.org/Samples#D3](http://www.typescriptlang.org/Samples#D3)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T00:23:36.307

您是否尝试过使用 ASP.NET 开发服务器运行该项目？

# language-agnostic - Apache Thrift 是否允许任何两种语言之间的外部函数调用？

> ID：12887932
> 
> 赞同：0
> 
> 时间：2012-10-15T00:37:49.177
> 
> 标签：language-agnostic, thrift

我目前正在尝试开发可以从（各种其他编程语言）访问的（多种编程语言的 API）。我查看了 Apache Thrift，似乎有可能允许使用 Thrift 在任何两种语言之间进行无缝的外部函数调用。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:51:39.103

创建 Thrift 是为了促进网络上不同进程之间的通信，而不是进程中的 FFI。可能有可能采用 Thrift 的某些部分（如 IDL），并将其用于 FFI，但这可能是一项艰巨的任务，并提供次优结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:24:02.797

实际上，我自己也一直在考虑类似的事情。

Thrift 规范有一些核心概念。

*   传输：这部分负责促进客户端和服务器之间的数据传输。
*   协议：这部分负责以不同方式格式化所述数据。它可以是 JSON、压缩二进制文件，甚至是原始未压缩二进制文件。
*   服务器：负责将这些东西放在一起并管理它们。

Thrift 允许您以独特的方式混合这些不同的部分，以创建适合您目的的东西。虽然 Thrift 仍然非常面向服务器客户端。

以节俭的方式开发 API 意味着理论上您可以拥有任何语言的插件。主软件组件将启动子流程并使用 STD-IN/OUT 作为传输。这将允许它进行 RPC 调用而不管语言。

# iphone - 处理程序化回合制游戏的邀请

> ID：12887937
> 
> 赞同：4
> 
> 时间：2012-10-15T00:39:44.923
> 
> 标签：iphone, ios6, game-center

感谢 iOS 6 中 GameKit API 的更新，我终于能够以应有的方式实现我的回合制棋盘游戏，包括回合超时和更好的程序化比赛创建。但是，我遇到了一个似乎无法解决的问题。我的愿望是让最终用户完全看不到 Game Center 的运行，这样一切都可以编程并使用我自己的自定义界面。

因此，我使用自己的自定义表格视图来显示匹配项，而不是默认的`GKTurnBasedMatchmakerViewController`. 现在，使用该`-loadMatchesWithCompletionHandler:`方法显示公开比赛没有问题。我还使用自定义屏幕来创建匹配，直接创建自动匹配（不是问题）和加载 localPlayer 的 Game Center 好友以进行邀请的表格视图。由于`playersToInvite`现在可以用 playerID 填充属性，这在 iOS 6 中是可能的。

我的主要问题是处理接收方的邀请。假设我邀请 Bob 在两人比赛中玩我的游戏。现在，我似乎无法在 Bob 端找到新邀请的通知。唯一会`-handleTurnEvent:`调用现有匹配项或触摸横幅通知（我不能保证用户会这样做），`-handleInviteFromGameCenter:`在这种情况下对我没有任何作用。

我想出的检测新邀请并因此更新我的自定义游戏视图控制器的唯一方法是调用该`-loadMatchesWithCompletionHandler:`方法并检查受邀参与者的 lastTurnDate 为 nil 的新匹配以及现有的公开匹配数组。我大约每 10 秒在后台运行一次此检查，因为我找不到在`GKTurnBasedEventHandler`收到新邀请时调用的通知。请帮忙！

编辑：最后，我刚刚实现了一个下拉刷新功能。没有实现轮询或其他一些只会浪费用户手机数据的方法是没有办法的，所以我认为按需刷新是最理想的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:52:26.217

请参阅：[GKInvite](http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKMatchmaker_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKMatchmaker/inviteHandler)[参考](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKInvite_Ref/Reference/Reference.html)，更具体地说是邀请处理程序。

你只需要注册一个inviteHandler，它将在Bob 在GK/GC 中接受邀请后被调用。

T。

# android - 与按钮中的 scaleType 等效的东西

> ID：12887940
> 
> 赞同：0
> 
> 时间：2012-10-15T00:39:57.540
> 
> 标签：android

如何将 scaleType 用于按钮中的图像？我正在使用一个带有 drawableTop 的按钮（下面有文字的图像）。我有一个图像，我希望它适合按钮边界（目前它太大而无法适应并导致图像被截断）按钮没有 scaleType 属性，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:21:07.497

您需要的是用作按钮背景的 android 九补丁图像。

[这里](http://www.thesecretpie.com/2010/07/creating-custom-fancy-buttons-in.html)有一个很好的教程

也看这里[这里](http://developer.android.com/tools/help/draw9patch.html)

# php - 重新排序 ID 列后的 MySQL 错误

> ID：12887941
> 
> 赞同：1
> 
> 时间：2012-10-15T00:40:14.177
> 
> 标签：php, mysql, database

我需要一些关于我数据库中特定表的帮助。我尝试重新排序整数列（id），但现在重命名的 id 的当前值正在采用前一个 value.eg 的值

如果：（重新排序之前）

```
------------
id    Name
2     Stack
3     Over
4     Flow
------------
A link like page.php?id=3 gives a value of OVER which is correct 
```

重新编号后

```
------------
id    Name
1     Stack
2     Over
3     Flow
4     Name
5     Last
------------ 
```

当我使用 page?id=3 之类的链接时，我仍然会 OVER，这是不正确的。新的 id = 5 也不返回任何值。

请问问题可能出在哪里？

**更新**

当我从 phpMyAdmin 尝试时，`"SELECT * FROM tap_bios WHERE tap_bios_id = 3`我得到了 Over 而不是 Flow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:49:53.270

...您确定您的浏览器中没有缓存该请求吗？尝试清除缓存并重新运行查询。此外，尝试记录查询并将它们复制/粘贴到查询浏览器中。如果您在使用您认为正确的查询时直接处理数据库时得到相同的意外结果，则这是一个需要进一步调查的数据库问题。否则，您可能会在系统的其他地方发生缓存问题。

# javascript - Javascript Split() 不起作用

> ID：12887943
> 
> 赞同：0
> 
> 时间：2012-10-15T00:40:45.170
> 
> 标签：javascript, jquery, split

我有一个 php 脚本，它基本上只通过以下方式加载一个 csv：

> echo json_encode(file(csvfile.csv, FILE_IGNORE_NEW_LINES));

输出是这样的：

> ["foo,bar,baz","foo, foo,bar","bla,bla,blub"]

在我的基本 html 文件中，我以这种方式加载它：

```
 $(document).ready(function(){
    $.getJSON("curlcsvfetcher.php", function(data) { 
    $('#data').empty();
    var columnseperator     =  "|";
    var commentindicator    = "#"; 
    var textqualifier   = '"' 
    filltable2(data,columnseperator,commentindicator,textqualifier); }
 ); 
```

这适用于该功能`filltable()`，但不适用于`filltable2()`：

```
function filltable(data,columnseperator,commentindicator,textqualifier){
    var table_obj = $('table');
    $.each(data, function(index, item){
         table_obj.append($('<tr id="'+item+'"><td>'+item+'</td></tr>'));
    }).insertAfter('.table');
} 
function filltable2(data,columnseperator,commentindicator,textqualifier){
    var table_obj = $('table');
    var trstart = '<tr>';
    var trend = '</tr>';
    $.each(data, function(index, item){
        table_obj.append($('<tr id="'+item+'"><td>'+item+'</td></tr>'));
        var columns = data.split(columnseperator);
        var tddata = '';
        for (var column in columns){
            tddata = tddata +'<td>'+column+'</td>';
            }
        var rowdata = trstart + tddata + trend;
        table_obj.append($(rowdata));

    }).insertAfter('.table');
} 
```

该函数`filltable()`生成一列三行的输出。但现在我想分解（本例 3）列中的每一行。

我的代码在函数中一定有问题，我`filltable2()`不知道我做错了什么。

的输出`filltable2()`只是表中的一行。

非常感谢！

PS：这个问题与我[上一个问题](https://stackoverflow.com/questions/12887423/table-from-json)有关，但我认为基本问题无关，所以我创建了一个新问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:51:16.593

我建议改变你的`for`循环：

```
 for (var column in columns){
        tddata = tddata +'<td>'+column+'</td>';
    } 
```

作为 ：

```
for (var i= 0; i < columns.length; i++){
  tddata = tddata +'<td>'+columns[i]+'</td>';
} 
```

试试这个方法。如果它不起作用。`data`请在循环前和循环后提醒`tddata`并分享。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T00:51:03.200

我认为这是因为在分割线上，你给它：

```
data.split(columnseperator); 
```

当你的意思是

```
item.split(columnseperator); 
```

或者

```
data[index].split(columnseperator); 
```

# php - 了解 Zend Framework 2 中的插件

> ID：12887948
> 
> 赞同：7
> 
> 时间：2012-10-15T00:41:23.437
> 
> 标签：php, plugins, zend-framework2

近一个星期以来，我一直试图强迫自己学习 Zend Framework 2.0.2。我大部分时间都在阅读与 ZF2 相关的文档和各种问答帖子。我开始创建一个简单的“管理”模块，在我进行身份验证之前这一切都很有意义。这是我感到困惑的地方。

在ZF1中，我一直`Zend_Auth`作为*插件*使用；但是，在 ZF2 中，我不清楚应该在哪里以及如何使用插件。到目前为止，我已经读到有“控制器插件”。它们是有道理的，但我想为身份验证创建更多的“全局”插件。

我认为我没有理解他们对 ZF2 与 ZF1 中“模块”的概念。有人知道应该如何设置全局插件吗？我通读了这篇文章： http: [//p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/](http://p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/)。这说得通。我看到身份验证如何在“用户”模块的领域发生。但是应用程序的其余部分呢？

我将如何在*全球范围内*实施身份验证层？可以是任何。

## 注意：我不是要代码或教程

**如果有必要，任何关于如何改进这个问题并使其更具体的建议/意见将不胜感激。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T05:27:41.153

在 ZF2 中，“插件”的概念一般是通过 ServiceManagers 提供的。

很难追踪此类内容的质量/最新 ZF2 内容，因此这里有一些链接：

*   [http://blog.evan.pro/introduction-to-the-zend-framework-2-servicemanager](http://blog.evan.pro/introduction-to-the-zend-framework-2-servicemanager)
*   [http://zf2.readthedocs.org/en/latest/modules/zend.module-manager.module-manager.html](http://zf2.readthedocs.org/en/latest/modules/zend.module-manager.module-manager.html)（请参阅有关 Zend\ModuleManager\Listener\ServiceListener 的部分）
*   [http://juriansluiman.nl/en/article/120/using-zend-framework-service-managers-in-your-application](http://juriansluiman.nl/en/article/120/using-zend-framework-service-managers-in-your-application)

# python - Pyramid 中的 virtualenv + setuptools 问题

> ID：12887953
> 
> 赞同：2
> 
> 时间：2012-10-15T00:41:52.333
> 
> 标签：python, web, virtualenv, pyramid, setuptools

我已按照[这些说明](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/project.html)进行操作。那是：

*   在其中创建了一个文件夹`blah_project`和另一个文件夹`venv`。
*   运行`virtualenv --no-site-packages venv`里面创建一个虚拟环境`venv`。
*   激活`venv`_`source venv/bin/activate`
*   跑`pip install pyramid`
*   跑`pcreate -s alchemy blah`

现在，我面临的问题是，如果我运行任何命令，例如`python blah/setup.py test -q`，所需的包不是安装在适当的`venv`子路径中，而是安装在当前目录中。这是预期的行为吗？如何设置脚本以始终将软件包安装在正确的路径中？

我试着往里面看`setup.py`，我并没有真正找到任何相关的东西，即没有传递给`setuptools.setup()`函数调用的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T04:27:21.633

尝试

```
pip install -e . 
```

这将帮助您在 venv 环境中安装要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T01:09:00.340

`test`不幸的是，这是 setup.py 子命令的预期行为。我们在很多子项目中解决这个问题的方法是定义一个名为的新别名`setup.py dev`，它同时安装测试依赖项和实际依赖项。但是，我没有为您提供很好的解决方案，因为这是`setup.py test`有意工作的方式。以下是允许`setup.py dev`工作的 Pyramid 配置的链接。

[https://github.com/Pylons/pyramid/blob/master/setup.cfg#L12](https://github.com/Pylons/pyramid/blob/master/setup.cfg#L12)

[https://github.com/Pylons/pyramid/blob/master/setup.py#L99](https://github.com/Pylons/pyramid/blob/master/setup.py#L99)

# ruby - 你如何在ruby中使用函数？

> ID：12887959
> 
> 赞同：-4
> 
> 时间：2012-10-15T00:42:27.060
> 
> 标签：ruby

今天我用 ruby​​ 编程真的很难。我遇到了这个问题，我真的被难住了。

> 打印一系列数字对 "x,y"，使得 x 的范围从 0 到 3，y 的范围从 5 到 7 *

我已经提交了我的答案，但我不太确定我是否正确。为了理解起见，我只想现在回答我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T00:48:10.643

像这样简单的东西

```
p [*0..3].product([*5..7]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:51:40.737

```
0.upto 3 do |x|
  5.upto 7 {|y| puts x, y}
end 
```

# php - jQuery/ajax/php 返回值

> ID：12887963
> 
> 赞同：1
> 
> 时间：2012-10-15T00:43:01.780
> 
> 标签：php, jquery, ajax

我有一个注册表单，在提交时会分别验证匹配的密码和域名。如果为真，我将尝试通过 ajax 请求检查数据库中是否不存在域名。

```
<div class="grid-6">
                <p>
                    <label for="First Name">First Name:</label>
                    <input type="text" name="first_name" placeholder="James" required value="">
                    <label for="Last Name" name="lastname">Last Name:</label>
                    <input type="text" name="last_name" placeholder="Brown" required value="">
                    <label for="email">Email:</label>
                    <input type="email" name="email" placeholder="email@email.com" required value="">
                    <label for="Preferred Password">Preferred Password:</label>
                    <input id="og_password" type="password" name="password" required value="">
                    <label for="Confirm Password">Confirm Password</label>
                    <input id="confirm_password" type="password" name="password_confirm" required value="">
                </p>
            </div><!-- /grid-6-->
            <div class="grid-6">
                <p>
                    <label for="Domain Name">Domain Name <span class="italic red">(lowercase letters and numbers only - no spaces):</span></label>
                    <input id="domain_name_a" type="text" name="domain_name_a" placeholder="mystudioname" required value="">
                    <label for="Domain Name">Confirm Domain Name:</label>
                    <input id="domain_name_b" type="text" name="domain_name_b" placeholder="mystudioname" required value="">
                </p>
            </div> 
```

**JS**

```
unction passwordMatch() {
var pass1 = $('#og_password').val();
var pass2 = $('#confirm_password').val();

var domain1 = $('#domain_name_a').val();
var domain2 = $('#domain_name_b').val();

var error = true;

if(pass1 != pass2){
    alert("Your passwords do not match!");
    return  false; // cancel form submission if passwords don't match
}
if(domain1 != domain2){
    alert("Your domain names do not match!");
    return  false;
}
//no errors check DB for domain exits
checkDomain(domain1);
}

    function checkDomain(domain) {
        alert(domain);//testing only
        $.ajax({
            type:"POST",
            url: "/actions/domain.php",
            data: {
                domain:domain
            }
        success: function(result) {
            if(result = false) {
                alert(result);
            } else {
                alert(result);
            }
        }
        });
    } 
```

事情通过警报（域）运行良好，它返回正确的值。问题出在 domain.php 文件中的某个地方、返回，或者只是对 .ajax 的使用不正确。这是php

**PHP**

```
<?php
    require_once("../includes/connection.php");

    $domainName = $_POST['domain'];

    $sql = "SELECT domain_name
            FROM user
            WHERE domain_name = '{$domainName}'
            ";
    $run = mysqli_query($mysqli, $sql);
    $result = mysqli_fetch_assoc($run);
    echo $result['domain_name'];
?> 
```

任何关于我在这方面出错的地方的帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:09:29.237

看起来**您**在`ajax Request`.

```
data: {
    domain:domain
} , < -- Missing comma here
success: function(result) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T00:46:27.830

如果那是您的代码的直接副本 - 您在数据之后的 ajax 调用中缺少逗号：{}, <- 就在那里。

另外，从成功语句中删除 if...else ，因为它也没有正确完成（您正在使用 ONE 等号测试一个值，而所做的只是声明您要测试的值）。试试看：`success: function(result) { console.log(result); alert(result); }`看看你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T10:14:22.587

由于某些奇怪的原因，jQuery 无法通过缩短的 url 识别文件。

解决方案是输入整个 url -> 不仅是 smtg/smtg.php ，还有**[http://www.domain.com/smtg/smtg.php](http://www.domain.com/smtg/smtg.php)**。

Also, you could try to send the data in json format by adding the following line of code into your ajax call: "**dataType: 'json',**" and then outputting from a php file like this: "**echo json_encode("return value");**"

# apache-flex - 在登录状态flex builder中隐藏标签栏

> ID：12887969
> 
> 赞同：0
> 
> 时间：2012-10-15T00:43:36.477
> 
> 标签：apache-flex, if-statement, uitabbarcontroller, states

我有一个选项卡导航应用程序，在其中一个选项卡中我有 2 个状态“计划者”和“登录”。我希望登录状态是第一个，在他们登录后它将变为计划状态。

问题是当它处于登录状态时，我不希望标签栏可见，而当它变为 Planner 状态时，它应该变得可见。我正在尝试使用 If 子句，但我无法让它工作。

任何人的想法？

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:ns1="*"
        currentState="Login" preinitialize="view2_creationCompleteHandler(event)" title="Planner">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
                protected function view2_creationCompleteHandler(event:FlexEvent):void
    {

    if (this.currentState == "Login") {
    // TODO Auto-generated method stub
    this.tabBarVisible = false;
    }
    else  {
    this.tabBarVisible = true;
    }
    }

        ]]>
    </fx:Script>

    <s:states>
        <s:State name="planner"/>
        <s:State name="Login"/> 
    </s:states>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:BorderContainer includeIn="Login" width="320" height="364" >

    </s:BorderContainer>
<s:HGroup includeIn="planner" y="10" width="320" height="46" horizontalAlign="center"
          textAlign="center">
    <ns1:Lbtn width="34" height="35"/>
    <ns1:weekdisplay height="35"/>
    <ns1:Rbtn width="34" height="35"/>
</s:HGroup>
    <s:VGroup includeIn="planner" y="55" width="100%" gap="-1" paddingBottom="0" paddingLeft="0"
              paddingRight="0" paddingTop="0">

    <s:BorderContainer x="0" y="319" width="100%" height="45" backgroundColor="#E6E6E6"
                       borderStyle="inset" borderWeight="1">
        <s:Label width="70" height="45" text="Mon" textAlign="center" verticalAlign="middle"/>
        <s:Label x="70" width="250" height="45" text="Click to add dish" textAlign="center"
                 verticalAlign="middle"/>
    </s:BorderContainer>

    <s:BorderContainer  x="0" y="319" width="100%" height="45" borderStyle="inset" borderWeight="1" >
        <s:Label width="70" height="45" text="Tue" textAlign="center" verticalAlign="middle"/>
        <s:Label x="70" width="250" height="45" text="Click to add dish   " textAlign="center"
                 verticalAlign="middle"/>
    </s:BorderContainer>

    <s:BorderContainer x="0" y="319" width="100%" height="45" backgroundColor="#E6E6E6"
                       borderStyle="inset" borderWeight="1">
        <s:Label width="70" height="45" text="Wed" textAlign="center" verticalAlign="middle"/>
        <s:Label x="70" width="250" height="45" text="Click to add dish" textAlign="center"
                 verticalAlign="middle"/>
    </s:BorderContainer>

    <s:BorderContainer  x="0" y="319" width="100%" height="45" borderStyle="inset" borderWeight="1" >
        <s:Label width="70" height="45" text="Thu" textAlign="center" verticalAlign="middle"/>
        <s:Label x="70" width="250" height="45" text="Click to add dish" textAlign="center"
                 verticalAlign="middle"/>
    </s:BorderContainer>

    <s:BorderContainer x="0" y="319" width="100%" height="45" backgroundColor="#E6E6E6"
                       borderStyle="inset" borderWeight="1">
        <s:Label width="70" height="45" text="Fri" textAlign="center" verticalAlign="middle"/>
        <s:Label width="250" height="45" text="Click to add dish" textAlign="center"
                 x="70" verticalAlign="middle"/>
    </s:BorderContainer>

    <s:BorderContainer  x="0" y="319" width="100%" height="45" borderStyle="inset" borderWeight="1" >
        <s:Label width="70" height="45" text="Sat" textAlign="center" verticalAlign="middle"/>
        <s:Label x="70" width="250" height="45" text="Click to add dish" textAlign="center"
                 verticalAlign="middle"/>
    </s:BorderContainer>

    <s:BorderContainer x="0" y="319" width="100%" height="45" backgroundColor="#E6E6E6"
                       borderStyle="inset" borderWeight="1">
        <s:Label width="70" height="45" text="Sun" textAlign="center" verticalAlign="middle"/>
        <s:Label x="70" width="250" height="45" text="Click to add dish" textAlign="center"
                 verticalAlign="middle"/>
    </s:BorderContainer>
     </s:VGroup>
    <s:TextInput id="LoginName" includeIn="Login" y="192" left="15" right="15" text="Email address"/>
    <s:TextInput id="LoginPassword" includeIn="Login" y="247" left="15" right="15" text="Password"/>
    <s:Button id="LoginLogin" includeIn="Login" y="306" right="15" width="100" height="30"
              label="Login" click="this.currentState=&quot;planner&quot;"/>
    <s:Button id="LoginCreate" includeIn="Login" y="306" left="15" width="100" height="30"
              label="Create"/>
    <s:Label includeIn="Login" x="166" y="39" width="113" height="101" fontSize="30"
             text="Menu&#xd;Planner"/>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:40:18.680

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        currentState="login" tabBarVisible="{currentState!='login'}">
    <s:actionContent>
        <s:Button includeIn="login" label="login" click="currentState='planner'"/>
    </s:actionContent>
    <s:states>
        <s:State name="login"/>
        <s:State name="planner"/>
    </s:states>
</s:View> 
```

# android - android定位一个位图矩阵

> ID：12887974
> 
> 赞同：1
> 
> 时间：2012-10-15T00:44:08.303
> 
> 标签：android, matrix, bitmap, position

您能向我解释为什么 px 和 py 不是`Bitmap`要放置的实际坐标吗？我一直在尝试理解矩阵，但我只理解缩放的 x 和缩放的 y。这是和示例：

```
float newBitmapWidth = (float) (canvas.getWidth()/((float)800/345)*1.5); 
float scaledWidth = newBitmapWidth / 1697;
float newBitmapHeight = (float) (canvas.getHeight()/((float)480/100)*1.5); 
float scaledHeight = newBitmapHeight / 492;
CarMatrix.postScale(scaledWidth, scaledHeight, 100, 100); 
```

因此，矩阵将我的 1697x492 位图完美地缩放到 517.5x150。占用的像素/屏幕分辨率的确切数量...但是当我尝试`Bitmap`使用 px 和 py 定位时，在我的情况下，图像并没有从它们开始：100,100。

# iis - SignalR 连接挂起，约 30 秒后调用客户端

> ID：12887976
> 
> 赞同：3
> 
> 时间：2012-10-15T00:44:54.893
> 
> 标签：iis, signalr, httpurlconnection

我`SignalR`在 MVC4 站点中使用 NuGet 的最新版本。使用[示例集线器代码](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)（或任何代码），我遇到了一些奇怪的连接问题。一切正常，SignalR 进行协商调用并记录“EventSource Connected”并返回 connectionid。当它`signalR/connect`使用任何传输发出请求时，问题就开始了。它返回带有正确标头的 200 响应，但连接挂起。如果被调用的 hub 方法在`Caller`or上执行一个方法`Clients`，它不会在浏览器中执行，**直到下一个请求或 10-30 秒后**，如果你坐等。就像有东西卡在管道中，它*被下一个请求或某种清理机制刷新*。

我在一个拥有自己的应用程序池的新网站上为此做了一个干净的项目。该问题仅在一台机器上发生，并且仅在 IIS7.5 下发生。相同的项目在 IIS Express 或 Cassini 下的同一台机器上运行正常。这个项目在我大约一个月前的最后一次工作时运行良好。我尝试过不同的浏览器和不同的 jQuery 版本。我尝试重新启动整个机器并在提琴手/调试器中花费了几个小时无济于事。

这是测试运行的服务器端代码：

```
public class Chub : Hub {
    public void CallMeBack() {
        Caller.callme();
    }
} 
```

吹了一整天，希望有人能帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:40:16.220

~~压缩不能很好地处理 SignalR 使用的 EventSource、ForeverFrame 等流响应，因此关闭压缩是目前唯一的解决方案。~~

~~也许可以只为 ~/signalr 路径关闭压缩，我稍后会尝试并用结果更新这个答案。~~

更新：经过彻底分析，我发现只有在 IIS 中将应用程序池设置为“经典模式”并启用动态压缩时才会出现此问题。请参阅我对此[SignalR](https://github.com/SignalR/SignalR/issues/273#issuecomment-9660117)问题的评论。如果您使用“集成模式”应用程序池，您不会受到影响并且 SignalR 按预期工作（即使启用了压缩）。

如果您遇到经典模式 + 动态压缩，请将以下内容添加到您的 web.config 中，以便仅为 /signalr 路径关闭压缩：

```
<location path="signalr">
  <system.webServer>
    <urlCompression doDynamicCompression="false"/>
  </system.webServer>
</location> 
```

# c# - *任何* wpf控件的动画背景不透明度

> ID：12887980
> 
> 赞同：2
> 
> 时间：2012-10-15T00:45:25.590
> 
> 标签：c#, wpf

我想要一个可以为任何 GroupBox 控件的背景不透明度设置动画的效果。
如果发生变化，这会给我额外的视觉通知 - 我可以闪烁控件以指示新状态。

我有

```
private void ToggleBackgroundFade(Control control)
{
    var duration = new TimeSpan(0, 0, 0, 0, 200);

    var animation = new DoubleAnimation { From = 1.0, To = 0.0, Duration = new Duration(duration) };
    // new brush because old one is frozen
    control.Background = new SolidColorBrush(Color.FromArgb(0xFF, 0xD6, 0xEF, 0xD1));
    control.Background.BeginAnimation(OpacityProperty, animation);
}

private void KickoffFlashingAnimation(Control controlToFade)
{
    controlToFade.Dispatcher.BeginInvoke(new Action(() => 
        ToggleBackgroundFade(controlToFade))
    );
} 
```

和所有的风格

```
<Style x:Key="GroupBoxHeader" TargetType="{x:Type GroupBox}">
    ...
    <Setter Property="Background" Value="#00D6EFD1" />
</Style> 
```

所以我想将任何 GroupBox 传递给 KickoffFlashingAnimation() 方法。

它运行良好，没有错误，但最初设置为浅绿色#ffd6efd1 ..
任何提示后，组框不会改变颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:16:12.540

嗨，我已经尝试了您上面的代码，它对 Groupbox 和我一起工作得很好。您的 Groupbox 可能存在问题，它的所有内容区域都充满了最终隐藏其背景的其他控件。所以只是为了测试它，您可以给您的 GroupBox .Content 比其中的控件更宽度，然后尝试通过传递 GroupBox 的实例来运行上面的动画代码。我希望这会有所帮助。

# entity-framework - 我需要使用 linq 到实体创建 sql 查询

> ID：12887981
> 
> 赞同：0
> 
> 时间：2012-10-15T00:45:41.203
> 
> 标签：entity-framework, asp.net-mvc-4

我有模特

```
public class GrandPrix
{
    public int Id { get; set; }

    [Required]
    [Display(Name = "Имя")]
    [DataType(DataType.Text)]
    public string Name { get; set; }

    public int LocationId { get; set; }

    public int? ChampionchipId { get; set; }

    public virtual Location Location { get; set; }
    public virtual Championchip Championchip { get; set; }
}
    public class Location
{
    public int Id { get; set; }

    [Required]
    [Display(Name = "Location")]
    [DataType(DataType.Text)]
    public string Name { get; set; }

//    public virtual ICollection<GrandPrix> GrandPrix { get; set; } 
} 
```

我需要修改

```
ViewBag.LocationId = new SelectList(db.Locations, "Id", "Name"); 
```

db.Locations .Where(l=>l.id 不包含在 db.Grandprix.Where(g=>g.ChampionchipId == 1))

这个查询它工作

```
SELECT Locations.Id as Id, Locations.Name as Name FROM dbo.Locations WHERE Locations.Id Not In (SELECT GrandPrixes.LocationId FROM GrandPrixes WHERE ChampionchipId = 1) 
```

对不起我的英语，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:56:13.690

```
db.Locations.Where(loc=>loc.GrandPrixes.Any(gp=>gp.ChampionshipId != 1)) 
```

如果您的 FK 关系设置正确，则应该为您提供位置。

别的

```
var gps = db.GrandPrixes.Where(gp=>gp.ChampionshipId == 1)
                        .Select(gp=>gp.Location.LocationId).ToList();
db.Locations.Where(loc=>!gps.Any(gp=>gp == loc.LocationId)) 
```

# ruby - 如何删除 Ubuntu 库存 Ruby 1.8？不合适

> ID：12887984
> 
> 赞同：3
> 
> 时间：2012-10-15T00:46:20.493
> 
> 标签：ruby, ubuntu, rvm

Ubuntu 安装了 Ruby 1.8，但我真的更愿意（并且需要，对于 rails）1.9.2。我试过`apt-get purge`但 apt 不相信有一个 ruby​​ 包（但是`ruby -v`一直返回 ruby​​ 1.8）。

我已经安装了 rvm 但`ruby -v`现在只返回`bash: /usr/bin/ruby: No such file or directory`. 我迷路了，有帮助吗？

我从中删除了 ruby​​，`/usr/bin`但它拒绝接受 rvm 存在并不断建议我安装 1.8 或 1.9.1 软件包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:51:36.710

RVM 在 Ubuntu 上有点不稳定。在继续之前在[这里](https://stackoverflow.com/a/9056395/399584)寻找修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T14:22:25.147

如果您有权访问 GUI，请尝试运行 Synaptics 数据包管理器

我遇到了同样的问题，Synaptics 将 ruby​​ 1.8 标记为已安装。取消选中包，点击运行，ruby 消失了

`$ ruby -v`现在产生找不到命令

现在您可以安全地运行

```
$ apt-get install rubyX.X.X 
```

快乐编码！

# mysql - 如何下载我的 MYSQL 备份？

> ID：12887987
> 
> 赞同：0
> 
> 时间：2012-10-15T00:46:47.130
> 
> 标签：mysql, ftp, download, backup, filezilla

好的，我在这里使用这个脚本来备份我的数据库：

```
mysqldump -u root -h localhost -pPASSWORD forums | gzip -9 > backup-$(date +%Y-%m-%d).sql.gz 
```

这是`cron`每天使用的。

但是我每天都需要远程或通过 ftp 程序下载它，所以我在家里的硬盘上有一个物理副本，这可能吗？我知道是这样，谁能告诉我一个快速的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:41:27.083

mysqldump --user=root --password=PASSWORD 论坛| 压缩包| ncftpput -c -u root -p PASSWORD 76.121.167.17 backup-$(date +%Y-%m-%d-%s).sql.gz 我找到了解决办法，我刚刚打开调制解调器上的端口 21 并打开DMZ 托管 :) 谢谢@MarcB！！！！确保已安装 NCFTP :)

# sql - 按日期选择数据并汇总数据 - SQL Server 2005

> ID：12887988
> 
> 赞同：3
> 
> 时间：2012-10-15T00:46:48.647
> 
> 标签：sql, tsql, sql-server-2005

我来自 MySQL 并尝试在 SQL Server 2005 上编写 T-SQL 代码，但我发现它完全不同。

这就是我想要做的（使用 MySQL）

```
select sum(datapoint) as sum, date(mytimestamp) as date
from datalog
where datapoint = '27'
group by date 
```

即获取按日期汇总和分组的数据列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:48:53.990

 ~~在标记 sql server 2008 时回答

```
select sum(datapoint) as [sum], CAST(mytimestamp AS DATE) as [date]
from datalog
where datapoint = '27'
group by CAST(mytimestamp AS DATE) 
```

 ~~对于 SQL Server 2005

```
SELECT   CONVERT(VARCHAR(11), timestamp, 111) DATE, 
         SUM(datapoint) totalDatapoint
FROM     table1
GROUP BY CONVERT(VARCHAR(11), timestamp, 111)
ORDER BY DATE ASC 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/5bca3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:34:18.340

转换为 varchar 不是一个好的解决方案，只需从时间戳中删除 timepart 并按如下方式分组：

```
select sum(datapoint) as sum, dateadd(d, 0, datediff(d, 0, mytimestamp)) as date
from datalog
where datapoint = '27'
group by datediff(d, 0, mytimestamp) 
```~~~~

# redirect - 玻璃鱼重定向

> ID：12887989
> 
> 赞同：0
> 
> 时间：2012-10-15T00:47:19.070
> 
> 标签：redirect, glassfish

我有一个`Glassifh 2.1`服务器，它有一个为多个 URL 运行的网站。例如：

1.  www.url1.com
2.  www.url2.com
3.  www.url3.com

如果我输入`www.url1.com`，我希望它重定向到`www.url3.com/com/en/aboutus`. 我尝试将以下内容添加到 my`domain.xml`中，但没有奏效。

```
<property name="redirect_1" value="from=http:/www.url1.com url-prefix=http://www.url3.com/com/en/aboutus"/> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:25:42.213

我相信“from”属性只需要一个**相对路径**，而不是一个完整的 URL。我认为它不能用于您尝试做的事情。为什么不设置一个**简单的反向代理**，例如使用 apache httpd 服务器？设置非常简单，会给您很大的灵活性。

# javascript - 将一个 raphael js 元素放在另一个里面

> ID：12887994
> 
> 赞同：1
> 
> 时间：2012-10-15T00:48:24.987
> 
> 标签：javascript, svg, raphael

我有一个我已经完成的 Raphael.js 图像，它由一组圆圈组成，就像这样

```
var paper = Raphael(0,0,100,100);
var circle1 = paper.circ(20,20,10);
var circle2 = paper.circ(40,40,10); 
```

我还有一个 Raphael 格式的 svg 图标（感谢可爱的网站[http://readysetraphael.com/](http://readysetraphael.com/)），我想将它放在每个圆圈内。问题是......转换后的 svg 图标中的所有路径现在都相对于点 (0,0) ！这意味着所有的字符串都是这样写的

```
paper.path('M 1 1 L 2 0 L 0,2 z') 
```

所以我的问题......是否有一些聪明的方法可以“相对化”这条路径以使其位于每个圆圈内，而无需手动进入并更改路径字符串的每个元素以使其在内部绘制相同的路径两次两个圈子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:16:21.130

试试这个。将 shp 的内容替换为任何其他有效路径。

```
 var shape,
        circleHalfWidth,
        circleHalfHeight,
        shpHalfHeight,
        shpHalfWidth,
        targetLeft,
        targetTop,
        paper,
        circle1,
        circBBox,
        shpBBox,
        shp,
        radius = 20,
        b2,
        c2,
        b,
        s;

shape = "M25.979,12.896,5.979,12.896,5.979,19.562,25.979,19.562z";
paper = new Raphael(0,0,500,500);
circle1 = paper.circle(100,100,radius);
shp = paper.path( shape );

// get objects that contain dimensions of circle and shape

circBBox = circle1.getBBox( );
shpBBox = shp.getBBox( );

// get dimensions that will help us calculate coordinates to centre of circle

circleHalfWidth = circBBox.width / 2;
circleHalfHeight = circBBox.height / 2;
shpHalfWidth = shpBBox.width / 2;
shpHalfHeight = shpBBox.height / 2;

// calculate coordinates to position shape on top left corner of circle

targetLeft = circle1.getBBox( ).x - shp.getBBox( ).x;
targetTop = circle1.getBBox( ).y - shp.getBBox( ).y;

//Calculate how wide is shape allowed to be in circle using pythagoras

c2 = Math.pow( radius, 2 );
b2 = c2 / 2;
b = Math.sqrt( b2 );

// Calculate ratio so that both height and width fit in circle

s = shpBBox.width > shpBBox.height ? ( shpBBox.width / b ) : ( shpBBox.height / b );

// change coordinates so shape will be moved to centre of circle

targetLeft += circleHalfWidth - shpHalfWidth;
targetTop += circleHalfHeight - shpHalfHeight;

// Remember uppercase T so that scaling is ignored when moving shape 

shp.transform( "s" + s  + "T" + targetLeft + "," + targetTop ); 
```

[在这里](http://jsfiddle.net/4dpew/2/)摆弄

# c# - 如何将类别与帖子 wordpress 相关联？

> ID：12887997
> 
> 赞同：21
> 
> 时间：2012-10-15T00:48:45.873
> 
> 标签：c#, wordpress, xml-rpc, metaweblog

我正在创建一个在 wordpress 中创建自动帖子的功能。现在，该功能创建了 wordpress 博客文章，但我无法输入该类别。

```
 public class Post
    {

        public string Title { get; set; }

        public string Description { get; set; }

        public string PostType { get; set; }

        public DateTime DateCreated { get; set; }

        public DateTime DateCreatedGmt { get; set; }

        public List<string> Categories { get; set; }

        public List<string> MtKeywords { get; set; }

        public string MtExcerpt { get; set; }

        public string MtTextMore { get; set; }

        public string MtAllowComments { get; set; }

        public string MtAllowPings { get; set; }

        public string WpSlug { get; set; }

        public string WpPassord { get; set; }

        public string WpAuthorId { get; set; }

        public string WpAuthorDisplayName { get; set; }

        public string PostStatus { get; set; }

        public string WpPostFormat { get; set; }

        public bool Sticky { get; set; }

        public List<CustomFields> CustomFields;

        public Enclosure Enclosure;
    } 
```

我尝试先上课并仅传递类别名称以避免错误：

```
 var wordpress  = XmlRpcProxyGen.Create<IWordpress>();

        Category[] categories= wordpress.getCategories(0, username, password); 
```

构建帖子类别的方法作为参数接收。此方法属于 Post 类。该类别以这种方式插入帖子中：

```
 Categories.Add(category.categoryName); 
```

有人可以帮我吗？我已经多次看到这段代码，以至于我看不出哪里出错了：（。

Post 的属性在文档中获得： http: [//codex.wordpress.org/XML-RPC_MetaWeblog_API#metaWeblog.newPost](http://codex.wordpress.org/XML-RPC_MetaWeblog_API#metaWeblog.newPost)。我正在使用 CookComputing.XmlRpc - [http://xml-rpc.net/](http://xml-rpc.net/) - 版本 2.5.0

在我发布问题后我意识到处理类别有多么错误。

为了放置帖子，我们创建：

```
class MetaWeblogClient : XmlRpcClientProtocol
{

    [XmlRpcMissingMapping(MappingAction.Ignore)]

    public struct Post
    {
        public DateTime dateCreated;
        public string description;
        public string title;
        public string[] categories;
        public string permalink;
        public string postid;
        public string userid;
        public string wp_slug;

    } 
```

并初始化属性：

```
 public void newPost(string userid, string password, string description, string title)
    {
        this.Url = "http://#########.wordpress.com/xmlrpc.php";

        Post post = new Post();

        post.categories = new string[1];
        post.categories[0] = "Category Name";
        post.dateCreated = DateTime.Now;
        post.userid = userid;
        post.description = description;
        post.title = title;

        newPost("0", userid, password, post, true);

    }

    [XmlRpcMethod("metaWeblog.newPost")]

    public string newPost(string blogid, string authorId, string password, MetaWeblogClient.Post string description, bool publish)
    {
        //return string postid
        return returnPostId = (string)this.Invoke("newPost", new Object[] { blogid, authorId, password, description, publish });

    } 
```

我的错误不是指初始化数组类别。上面的结构不正确，我将从我的代码中删除它。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:09:20.017

您可以使用的另一件事是 wp.newPost 方法：
[http ://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost)

这使用“分类法”而不是类别。

我目前正在更新 JoeBlogs Wordpress 包装器以支持分类法（类别）
[https://github.com/alexjamesbrown/joeblogs](https://github.com/alexjamesbrown/joeblogs)

# sql - 带有默认值的 Sql 表在传递 NULL 时不会保存

> ID：12887998
> 
> 赞同：2
> 
> 时间：2012-10-15T00:48:46.373
> 
> 标签：sql, sql-server

我有一个包含 CreatedDate 列的 sql 表。

它在数据库中设置：

绑定的默认值 (getdate())

```
ALTER TABLE [dbo].[Person] ADD  CONSTRAINT [DF__Person__Creat__6XXXXXXX]  DEFAULT (getdate()) FOR [CreatedDate]
GO 
```

当我发送`default`该列时插入有效，但如果我发送 NULL 我得到。

无法将值 NULL 插入列“CreatedDate”列不允许空值。插入失败。

有没有办法让它工作，所以它会在发送 null 时设置当前日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:50:03.833

因为您已在该列上设置了约束，并且您已指定该列上的默认值是当前日期`GetDate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:54:50.613

猜测一下，您正在使用如下形式的 INSERT 语句：

```
 INSERT INTO TableName VALUES (Value1, Value2, . . .) 
```

相反，使用这种形式：

```
 INSERT INTO TableName (Column1, Column2, Column4\. . .) VALUES (Value1, Value2, Value4\. . .) 
```

请注意，第二种形式指定您要包含哪些列的值。只需省略您希望为其存储默认值的任何列。

这种形式的 INSERT 语句*总是*更可取，因为如果表中列的数量或顺序发生变化，它就不太脆弱。它也更清晰，有助于调试。