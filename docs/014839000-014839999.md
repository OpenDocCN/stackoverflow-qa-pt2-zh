# StackOverflow 问答 14839000-14839999

# domain-driven-design - DDD中关于工厂的一些令人困惑的事情

> ID：14839003
> 
> 赞同：12
> 
> 时间：2013-02-12T18:12:43.677
> 
> 标签：domain-driven-design

a) 我有点困惑，在大多数情况下，我们是否应该只有一个生产*整个聚合*的工厂，还是我们也应该有一个只创建*聚合根*的工厂？

b) 构建*整个聚合*的工厂应该自己构建*根*对象和*非根*对象，还是应该将*非根*实体/VO 的构建委托给其他工厂？

因此，如果*Aggregate*包含 5 种不同类型的*非根实体*，那么*Aggregate 工厂*应该自己创建这些*非根实体*，还是应该有另外五个*工厂*（每个非根实体一个工厂），*Aggregate 工厂*将委托给它们创建特定类型的*非根实体*？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T18:23:28.980

在 Eric Evans 的 DDD 书中，第 138 页，它用粗体写成：

> **将整个聚合创建为一个整体，强制执行它们的不变量。**

然后在下一页：

> FACTORY 应该只能生产处于一致状态的对象。对于一个实体，这意味着创建整个聚合 [...]

具体来说，这意味着您将只有一个工厂来创建整个聚合。*构建非根实体或值对象可能*涉及其他类（工厂），但只有一个工厂负责创建聚合。这个工厂创建了一个完整的聚合，而不仅仅是一个根对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:33:32.263

子根对象（例如`OrderItem`for an `Order`）的创建由根实体本身处理，因此它可以以对外界不可见的方式强制执行变体。

所以一个典型的流程可能是：

```
var newOrder = orderFactory.CreateOrder(customer);

newOrder.AddOrderItem(product, quantity); 
```

工厂可以在实体中使用，但不应被外界访问。

```
public class Order
{
     private OrderItemFactory _orderItemFactory;

     public AddOrderItem(Product product, int Quantity)
     {
          var newOrderItem = _orderItemFactory.CreateOrderItem(product, quantity);
     }
}` 
```

# sql-server - 将动态 url 分配给变量

> ID：14839006
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:12:57.383
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我想将动态 url 分配给变量。这是示例链接

[http://xyz.com/Screen.aspx?RID=1234&abc=1](http://xyz.com/Screen.aspx?RID=1234&abc=1)

[http://xyz.com/Screen.aspx?RID=5678&abc=1](http://xyz.com/Screen.aspx?RID=5678&abc=1)

查看 url，1234 和 5678 是动态的，其余的是静态的。那么我如何制作这个网址并将其分配给变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:21:44.457

```
select @variablename = 'http://xyz.com/Screen.aspx?RID=' 
  + convert(varchar,@someothervar or column_name) + '&abc=1' 
```

# r - 如何计算移动窗口（来回）的平均值和 R 中窗口的标准偏差？

> ID：14839013
> 
> 赞同：0
> 
> 时间：2013-02-12T18:13:22.507
> 
> 标签：r, moving-average

我有从 x[1] 到 x[365] 的 365 个值。对于每个值，我必须考虑一个windoe（x-17，x+17），所以将从x [18]开始。我想执行这样的计算：

```
 x=1:365
 first period = (x[18]-17 vaues,x[18]+17 values) 
```

我的值示例（我的文件中只有一列是值）：

```
 values
     1      0.2
     2      0.3
     .      .
     365    0.4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:30:29.250

`rollmean`您可以使用zoo 包的功能获得滚动平均值。

```
# make some fake data
mydat <- 1:365
library(zoo)
mymeans <- rollmean(mydat, k = 35) 
```

要获得滚动标准偏差，您可以使用`rollapply`并将其`sd`作为要应用的函数提供

```
mysds <- rollapply(mydat, 35, FUN = sd) 
```

从那里您可以使用输出进行感兴趣的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:11:28.220

我想你正在寻找：

```
 library(zoo)
      rollapply(zoo(rnorm(x18)), 34, function(x)mean(x)/sd(x)) 
```

# django - Django：验证后“选中”单选按钮

> ID：14839014
> 
> 赞同：1
> 
> 时间：2013-02-12T18:13:23.247
> 
> 标签：django, forms, validation, radio-button

我有一个带有 Django 的 ModelForm，效果很好。它也验证得很好，唯一的问题是：我的输入字段（几个单选按钮）在返回错误的验证后没有得到检查 =“checked”，因此用户必须再次检查单选按钮。这似乎很愚蠢。

有什么方法可以让 Django 在验证单选按钮上设置checked="checked"？

# arrays - 如何在 Application 范围内有效地实现多维数组？

> ID：14839015
> 
> 赞同：0
> 
> 时间：2013-02-12T18:13:35.783
> 
> 标签：arrays, asp-classic, multidimensional-array, vbscript

我希望在 Application 范围内有效地设置最容易完成的多维数组[例如在 Global.asa 文件或 Application("multi-array") 中声明的内容]，以便我以后可以访问它。一维数组工作正常。嵌套数组、多维数组、数组中的集合、集合中的数组似乎都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:10:23.377

1 字，不要，IIS 上的应用程序变量不能很好地扩展经典 ASP 中的大量访问。我建议您只使用标准的服务器端包含来包含您希望的数据，而无需应用程序变量的开销。

# javascript - 使用按钮关闭颜色框弹出窗口并触发确认框？

> ID：14839017
> 
> 赞同：1
> 
> 时间：2013-02-12T18:13:40.160
> 
> 标签：javascript, jquery, popup, colorbox

我的彩盒上有一个确认框（“你确定要离开吗？”）。当我关闭弹出窗口时触发。当我单击弹出窗口上的“cboxClose”div 时，此方法有效。

我试图在单击按钮时显示此确认框。但是弹出窗口会立即关闭而不显示确认框。

我的问题是当我点击取消按钮时如何触发确认框。我尝试了几种方法

//这只是关闭弹出窗口而不显示确认框

```
$('#btnCancel').click(function () {
                 parent.$.colorbox.close(); }); 
```

//不起作用

```
$('#btnCancel').click(function () {
                     $('#cboxClose').click()
                  }); 
```

彩盒

```
onComplete: function () {
 $("#cboxClose").click(function (e) {

                    // stop any other script from firing
                    e.stopPropagation();
                    if (confirm('are you sure you want to leave?')) {
                        $.colorbox.close();
                        // ensure that the binding is removed when closed
                        $("#cboxClose").unbind();
                    }

                });

            } // close oncomplete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:16:44.370

这里的问题是 colorbox 在`cboxClose`元素上注册了一个点击处理程序。因此，停止冒泡或阻止点击（`returning false`在点击处理程序中）都不会产生任何影响，因为颜色框处理程序已经注册。阻止该处理程序运行的唯一方法是取消绑定它。但是，要做到这一点，您需要对处理程序的引用，如果不修改颜色框代码，您将无法获得该处理程序。

无论如何，这就是正在发生的事情以及为什么上面的代码不起作用。您的另一个选择是覆盖 colorbox 关闭函数（这是由 colorbox 的关闭按钮处理程序调用的公共 colorbox 方法）。你只需要这样：

```
$.colorbox._close = $.colorbox.close;
$.colorbox.close = function() {
    if(confirm("Close?")) {
        $.colorbox._close();
    }
} 
```

不利的一面（在您的情况下可能不是问题）是这将影响页面上的所有颜色框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:37:56.437

我通过制作此方法并将其绑定到取消按钮解决了这个问题

```
var originalClose = $.colorbox.close;
            $.colorbox.close = function (e) {
                var response;
                var formChanged = localStorage.getItem("isFormChanged");
                var saveClicked = localStorage.getItem("saveClicked");
                if (formChanged == "true" && saveClicked == "false") {
                    response = confirm('Do you want to close this window? All your changes will not be saved');
                    if (!response) {
                        return
                    }
                }
                originalClose();
            };

<input type="button" value="Cancel" id="btncancel" onclick="parent.$.colorbox.close()"/> 
```

# mysql - 对删除 SQL 查询使用限制

> ID：14839018
> 
> 赞同：0
> 
> 时间：2013-02-12T18:13:42.413
> 
> 标签：mysql, sql

我有这个查询

```
DELETE c FROM review_comments AS c 
LEFT JOIN users AS u 
ON u.user_id = c.user_id
WHERE c.comment = '{$comment}'
AND u.username = '{$user}'
LIMIT 1; 
```

直到我删除它才起作用`LIMIT 1`；

它说： `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LIMIT 1' at line 6`

在这种情况下，这是不正确的用法`LIMIT 1`吗？我有一个相同的查询而没有加入表并且`LIMIT 1`工作正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:17:18.387

我认为 LIMIT 不能与 MySQL 中的多表引用 DELETE 语句一起使用。

# asp.net-mvc-4 - WebSecurity.Initialized 为真，但表不存在

> ID：14839019
> 
> 赞同：1
> 
> 时间：2013-02-12T18:13:47.843
> 
> 标签：asp.net-mvc-4

我的网络应用程序有一个自我安装过程；它（正确地）检测到数据库未初始化，并（通过迁移）对其进行初始化；我也有自动化集成测试来测试在这些情况下的安装工作，以及冒烟测试登录和注册第一个用户（在安装表单上提供）。

我最近从 MVC3 切换到 MVC4。我使用了内置的存储提供程序（在 MVC3 中，`aspnet_*`表格；在 MVC4 中，`WebSecurity`表格`UserProfile`）。

我现在无需从 .SQL 文件手动运行所有 MVC3 存储过程，而是调用`WebSecurity.InitializeDatabaseConnection`. 事实上，我的代码片段是：

```
 if (!WebSecurity.Initialized)
 {
     WebSecurity.InitializeDatabaseConnection("ApplicationServices", "UserProfile", "UserId", "UserName", true);
     MigrationsWrapper.MigrateToLatestVersion(); // wrapper around migratordotnet                     
 } 
```

不幸的是，我注意到了一个有趣的“错误”。当我编译我的服务器代码并运行我的安装测试时，它会在全新安装（空数据库）后通过（如预期的那样）。如果我立即再次运行测试，它会失败。

失败的原因？在我的安装测试中，我对所有数据库表进行了核对，并希望安装能够重新创建它们。但是，在这种情况下，**`WebSecurity.Initialized`返回 true 而不是 false。**所以，我从来没有打过第二行（初始化和创建表）。如果我把那条线移到外面，我会得到一个我正在双重初始化的异常。

不幸的是，我在这里真正需要的是一个类似的方法`WebSecurity.CreateTables()`，它不存在。因此，我陷入了僵局。我该如何处理？

此外，如果我尝试`UserProfile`自己重新创建表，我会遇到一个问题，即`UserId`（主键）被插入为空——大概是因为我错过了其他表。

我应该如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:59:49.887

我现在唯一的解决方法是**重置 IIS。**悲伤，但真实；这样做将重置`WebSecurity.Initialized`，一切正常。

由于我需要在应用程序启动时，我可以使用`Process.Start`.

# reporting-services - AX 2012 CU2 钻取报表的条件操作

> ID：14839020
> 
> 赞同：0
> 
> 时间：2013-02-12T18:13:50.277
> 
> 标签：reporting-services, dynamics-ax-2012

我正在尝试显示有关单击事件的两个简单报告之一。我在一个 Dynamics SSRS 报告项目中有三个报告设计。一个馅饼和两个桌子设计。我想根据饼图上的用户选择显示一张表格。当我尝试为饼图系列的报告操作添加条件函数时，我收到编译时错误，指出它是不允许的。

对系列属性的操作设置为“转到报告”并且表达式设置为 ReportPrj.AutoDesign1 只有这样才有效，如果我尝试对我的表达式使用条件查询，则无法编译。

[=IIf(Parameters!pvalue.Value = 1, "ReportPrj.AutoDesign1", "ReportPrj.AutoDesign2")]

事实上，除了 ReportPrj.Design 格式之外的任何内容都无法编译。这是对 AX SSRS 报告的某种限制吗？如果是这样的话，我的其他选择是什么。

这是编译错误。

***ReportPrj.AutoDesign1Pie.：无法解析钻取目标报表 =IIf(Parameters!pvalue.Value = 1, "ReportPrj.AutoDesign1", "ReportPrj.AutoDesign2" )。***

我在 Windows 2008 Server 上运行 Dynamics AX 2012 CU2、SQL Server 2008 R2 和 Visual Studio 2010。

非常感谢您提供的所有帮助。

谢谢mm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:40:34.923

那是一个以“[”开头，以“]”结尾的有效表达式吗？

这行得通吗？

=IIf（参数！pvalue.Value = 1，“ReportPrj.AutoDesign1”，“ReportPrj.AutoDesign2”）

# ios - CAEmitterCell - 慢星或光效

> ID：14839022
> 
> 赞同：5
> 
> 时间：2013-02-12T18:13:55.830
> 
> 标签：ios, caemittercell

我在玩 CAEmitterCell，但大多数效果都是非常快的效果，比如烟花。但我想要像你在[www.findyourwaytooz.com上看到的那样缓慢的“星星”效果](http://www.findyourwaytooz.com/)

我怎么能用 CAEmitterCell 做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T23:47:47.920

我有一个项目使用以下发射器设置，它非常准确地模仿了我认为你的意思：

```
//set ref to the layer
starsEmitter = (CAEmitterLayer*)self.layer; //2

//configure the emitter layer
starsEmitter.emitterPosition = CGPointMake(160, 240);
starsEmitter.emitterSize = CGSizeMake(self.superview.bounds.size.width,self.superview.bounds.size.height);
NSLog(@"width = %f, height = %f", starsEmitter.emitterSize.width, starsEmitter.emitterSize.height);
starsEmitter.renderMode = kCAEmitterLayerPoints;
starsEmitter.emitterShape = kCAEmitterLayerRectangle;
starsEmitter.emitterMode = kCAEmitterLayerUnordered;

CAEmitterCell* stars = [CAEmitterCell emitterCell];
stars.birthRate = 0;
stars.lifetime = 10;
stars.lifetimeRange = 0.5;
stars.color = [[UIColor colorWithRed:255 green:255 blue:255 alpha:0] CGColor];
stars.contents = (id)[[UIImage imageNamed:@"particle.png"] CGImage];
stars.velocityRange = 500;
stars.emissionRange = 360;
stars.scale = 0.2;
stars.scaleRange = 0.1;
stars.alphaRange = 0.3;
stars.alphaSpeed  = 0.5;    
[stars setName:@"stars"];

//add the cell to the layer and we're done
starsEmitter.emitterCells = [NSArray arrayWithObject:stars]; 
```

我将示例项目上传到 GitHub：[SimpleCAEmitterLayer](https://github.com/jhilgert00/SimpleCAEmitterLayer)

# java - JMenuItem.setSelected() 不会改变所选项目的外观？

> ID：14839025
> 
> 赞同：3
> 
> 时间：2013-02-12T18:14:02.817
> 
> 标签：java, swing, jmenuitem, jpopupmenu

我希望以编程方式使菜单上的特定项目被选中并显示为这样，如果按下 Enter，将执行相应的操作。不幸的是，我发现 JMenuItem.setSelected() 和 JPopupMenu.setSelectedItem() 都不是我想要的。基本上我想发生当按下箭头键或鼠标移动到特定项目的空间时发生的事情 - 背景颜色改变，表示选择。我没有编程，它只是发生了。为什么这些 API 不做同样的事情？这让我发疯了。不应该这么难。是否有一些 API 可以满足我的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:35:01.420

这有点工作：

```
JMenuItem#setArmed(boolean); 
```

尽管除非您遍历 JMenus 到达那里，否则您看不到它。也许如果你在它上面的每个菜单上调用它？

**编辑：** 也许您想要菜单项的加速器？请参阅：[如何使用菜单：启用键盘操作](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#mnemonic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:42:11.410

`java.awt.Robot`可以做 Trick ;)
考虑下面给出的代码：

```
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JMenuBar;
import javax.swing.JOptionPane;
import javax.swing.JPopupMenu;
import javax.swing.SwingUtilities;
import java.awt.Dimension;
import java.awt.BorderLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.Robot;
public class JMenuFrame extends JFrame implements ActionListener
{
    JMenuBar bar;
    JMenu menu ;
    String[] items;
    JMenuItem[] menuItems;
    JButton start;
    Robot robot;
    public void prepareAndShowGUI()
    {
        try
        {
            robot = new Robot();    
        }
        catch (Exception ex){}
        bar = new JMenuBar();
        menu = new JMenu("File");
        items =  new String[]{"Open","Save","Save As","Quit"};
        menuItems = new JMenuItem[items.length];
        start = new JButton("Click me");
        for (int i = 0 ; i < items.length ; i++)
        {
            menuItems[i] = new JMenuItem(items[i]);
            menuItems[i].addActionListener(this);
            menu.add(menuItems[i]);
        }
        bar.add(menu);
        setJMenuBar(bar);
        start.addActionListener(this);
        getContentPane().add(start,BorderLayout.SOUTH);
        setPreferredSize(new Dimension(300,400));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
    @Override
    public void actionPerformed(ActionEvent evt)
    {
        if ("Click me".equals(evt.getActionCommand()))
        {
            menu.doClick();
            if (robot!=null)
            {
                for (int i = 0 ; i<=2 ; i++) //Suppose you want to select 3rd MenuItem
                {
                    if (!menuItems[i].isEnabled())
                    {
                        continue;
                    }
                    robot.keyPress(KeyEvent.VK_DOWN);
                    robot.keyRelease(KeyEvent.VK_UP);
                }
            }
        }
        else
        {
            JOptionPane.showMessageDialog(this,evt.getActionCommand()+" is pressed","Information",JOptionPane.INFORMATION_MESSAGE);
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            public void run()
            {
                JMenuFrame mf = new JMenuFrame();
                mf.prepareAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:37:56.193

它像罪恶一样丑陋，但是与上面 splungebob 的 setArmed() 答案相关的是完整的解决方案：首先，将菜单设为 MenuKeyListener 并将其添加为 MenuKeyListener 自身。然后：

```
 public void menuKeyReleased(MenuKeyEvent e) {
    if (e.getModifiers() == 0) {
        switch (e.getKeyCode()) {
        case KeyEvent.VK_ENTER:
        case KeyEvent.VK_SPACE:
            for (MenuElement elem : this.getSubElements()) {
                if (elem instanceof JMenuItem) {
                    JMenuItem item = (JMenuItem) elem;
                    if (item.isArmed()) {
                        Action action = item.getAction();
                        if (action != null) {
                            action.actionPerformed(new ActionEvent(this, 0, null));
                            e.consume();
                            setVisible(false);
                        }
                    }
                }
            }
        }
    }   
} 
```

我不敢相信这是这么困难。在构建以键盘为中心的界面时，Swing 有一定的局限性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T15:55:45.663

虽然我不确定我是否同意这些要求（请参阅我在 OP 中的评论），但我仍然想试一试。代码的前半部分只是设置 GUI，以便用户可以创建条件。

- 创建一个包含 3 个项目的菜单，并创建 3 个单独的复选框来控制菜单项的状态。

- 如果在任何时候只启用一个菜单项，请自动展开菜单并“预选”该项目。自动扩展菜单的代码是从 JMenu 中提取的。

- 在菜单中添加一个 MenuKeyListener，以在菜单树展开时捕获用户点击空格键。

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;

import javax.swing.*;
import javax.swing.event.*;

public class JMenuDemo implements Runnable
{
  private final String[] ACTIONS = new String[]{"Open", "Print", "Close"};

  private JMenu fileMenu;
  private JMenuItem[] menuItems;
  private JCheckBox[] checkBoxes;

  public static void main(String args[])
  {
    SwingUtilities.invokeLater(new JMenuDemo()); 
  }

  public void run()
  {
    JPanel panel = new JPanel(new GridLayout(0,1));
    panel.setBorder(BorderFactory.createTitledBorder("Enabled"));

    menuItems = new JMenuItem[ACTIONS.length];
    checkBoxes = new JCheckBox[ACTIONS.length];

    for (int i = 0; i < ACTIONS.length; i++)
    {
      final int index = i;
      final String action = ACTIONS[i];

      menuItems[i] = new JMenuItem(action);
      menuItems[i].setAccelerator(KeyStroke.getKeyStroke(action.charAt(0),
                                  ActionEvent.ALT_MASK));
      menuItems[i].setMnemonic(action.charAt(0));
      menuItems[i].addActionListener(new ActionListener()
      {
        public void actionPerformed(ActionEvent event)
        {
          System.out.println(action);
        }
      });

      checkBoxes[i] = new JCheckBox(action);
      checkBoxes[i].setSelected(true);
      checkBoxes[i].addItemListener(new ItemListener()
      {
        public void itemStateChanged(ItemEvent event)
        {
          checkBoxChanged(index);
        }
      });
      panel.add(checkBoxes[i]);
    }

    JFrame frame = new JFrame("Demo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setJMenuBar(createJMenuBar());
    frame.add(panel, BorderLayout.SOUTH);
    frame.setSize(300, 400);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
  }

  private void checkBoxChanged(int index)
  {
    menuItems[index].setEnabled(checkBoxes[index].isSelected());
    evaluate();
  }

  private JMenuBar createJMenuBar()
  {
    fileMenu = new JMenu("File");
    fileMenu.setMnemonic('F');
    fileMenu.addMenuKeyListener(new MenuKeyListener()
    {
      @Override
      public void menuKeyTyped(MenuKeyEvent event)
      {
        autoClick(event);
      }

      @Override
      public void menuKeyPressed(MenuKeyEvent event) {}

      @Override
      public void menuKeyReleased(MenuKeyEvent event) {}
    });

    for (int i = 0; i < menuItems.length; i++)
    {
      fileMenu.add(menuItems[i]);
    }

    JMenuBar menuBar = new JMenuBar();
    menuBar.add(fileMenu);

    return menuBar;
  }

  private void autoClick(MenuKeyEvent event)
  {
    if (event.getModifiers() == 0 && event.getKeyChar() == KeyEvent.VK_SPACE)
    {
      for (JMenuItem menuItem : menuItems)
      {
        if (menuItem.isArmed())
        {
          menuItem.doClick();
          MenuSelectionManager.defaultManager().setSelectedPath(null);
        }
      }
    }
  }

  private void evaluate()
  {
    JMenuItem onlyOne = null;

    for (JMenuItem menuItem : menuItems)
    {
      menuItem.setArmed(false);

      if (menuItem.isEnabled())
      {
        if (onlyOne == null)
        {
          onlyOne = menuItem;
        }
        else
        {
          onlyOne = null;
          break;
        }
      }
    }

    // Show the path if only one is enabled
    if (onlyOne != null)
    {
      onlyOne.setArmed(true);
      MenuElement me[] = buildMenuElementArray(fileMenu);
      MenuSelectionManager.defaultManager().setSelectedPath(me);
    }
  }

  /*
   * Copied from JMenu
   */
  private MenuElement[] buildMenuElementArray(JMenu leaf)
  {
    Vector<JComponent> elements = new Vector<JComponent>();
    Component current = leaf.getPopupMenu();

    while (true)
    {
      if (current instanceof JPopupMenu)
      {
        JPopupMenu pop = (JPopupMenu) current;
        elements.insertElementAt(pop, 0);
        current = pop.getInvoker();
      }
      else if (current instanceof JMenu)
      {
        JMenu menu = (JMenu) current;
        elements.insertElementAt(menu, 0);
        current = menu.getParent();
      }
      else if (current instanceof JMenuBar)
      {
        JMenuBar bar = (JMenuBar) current;
        elements.insertElementAt(bar, 0);
        MenuElement me[] = new MenuElement[elements.size()];
        elements.copyInto(me);
        return me;
      }
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T14:32:37.287

```
 jMenu1.doClick(); // this open the menu again 
```

# php - 如何更新块元素的样式并将参数传递给 PHP 函数

> ID：14839026
> 
> 赞同：1
> 
> 时间：2013-02-12T18:14:05.560
> 
> 标签：php, javascript, ajax

我确定我把事情复杂化了，但我试图用引用的 HTML 完成两件事。当用户选择一个选项时，如果它符合条件，我想将 leaderTable 的显示样式从隐藏切换为可见（这我已经成功地使用下面的 JS 完成了）

我还想将所选选项的值作为参数传递给 PHP 函数，该函数将设置我可以使用的 $_SESSION 变量。

据我了解，我必须使用 AJAX 请求将值传达给 php 脚本，但我并不完全了解 AJAX POST 与 GET。

**HTML**

```
<select id="rate_type" name="rate_type">
<option value="">Select One</option>
<option value="1">Non-Supervisors</option>
<option value="2">Supervisors</option>
<option value="3">Manager</option>
<option value="4">Director</option>
<option value="5">Sales</option>
<option value="6">Executive</option>
</select> 
```

**JS**

```
<script>
window.onload = function() {
      var eSelect = document.getElementById('rate_type');
        var leaderTable = document.getElementById('leadership');

        eSelect.onchange = function() {
            if((eSelect.selectedIndex == 2) || (eSelect.selectedIndex == 3) || (eSelect.selectedIndex == 4) || (eSelect.selectedIndex == 5) || (eSelect.selectedIndex == 6)){

                leaderTable.style.display= 'block';

                } else {

                leaderTable.style.display = 'none';

            }

        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:23:31.120

首先，几乎没有人再写“原始”JS了。使用让生活变得轻松的 JS 库。我推荐 jQuery。你需要几分钟才能理解它，但它可以在[1 line](http://api.jquery.com/jQuery.get/)中实现 AJAX 。

关于 AJAX POST 和 GET 的区别，你无所谓。你可以做任何一个。在您的 PHP 脚本中查找参数 using `$_REQUEST[..]`，您将涵盖这两种情况。

最后，这里有一些想法：

1.  如果您需要立即将值传达给服务器，则必须使用 AJAX
2.  如果您不介意在将值传达给服务器时刷新页面，您可以跳过 AJAX，通过更改 JS 中的 window.location 并在 URL 中包含参数来完成。AJAX使用简单，避免刷新，所以更好..
3.  如果您不需要立即将值传递给服务器，您可以将其保存在 JS 中作为 cookie（使用`document.cookie`），它会在用户发出的下一个请求时到达服务器。然后只需在 PHP 中使用`$_COOKIE[..]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:25:08.260

下面的代码将添加来自 google 的 jquery src，并在更改时向服务器发出 ajax 请求。有关更多信息，请参阅[jQuery POST](http://api.jquery.com/jQuery.post/)。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
        $('#rate_type').change(function() {
            if(($(this).val() == 2) || ($(this).val() == 3) || ($(this).val() == 4) || ($(this).val() == 5) || ($(this).val() == 6)){
                $('#leadership').show();
            } else {
                $('#leadership').hide();
            }

            // this is the shorthand post
            $.post(
                // the url
                '<?php echo $_SERVER['PHP_SELF'] ?>',
                // the request parameters to send
                {
                    rate_type: $('#rate_type').val(),
                    some_other_var: 'junk'
                },
                function(data) {
                    // do something here
                    console.log(data);
            });
        });
        // fire the change event on load if needed
        $('#rate_type').change();
});
</script> 
```

# python - 这些字符串如何在 Python 解释器内部表示？我不明白

> ID：14839028
> 
> 赞同：5
> 
> 时间：2013-02-12T18:14:10.950
> 
> 标签：python, string, unicode, python-2.7

```
# -*- coding: utf-8 -*-

a = 'éáűőúöüó€'
print type(a)    # <type 'str'>
print a          # éáűőúöüó€
print ord(a[-1]) # 172 
```

为什么这行得通？不应该是这个`SyntaxError: Non-ASCII character '\xc3' in file ...`吗？字符串中有 unicode 文字。

当我在它前面加上前缀时`u`，结果会有所不同：

```
# -*- coding: utf-8 -*-

a = u'éáűőúöüó€'
print type(a)    # <type 'unicode'>
print a          # éáűőúöüó€
print ord(a[-1]) # 8364 
```

为什么？python中的内部表示有什么区别？我自己怎么看？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T18:19:51.567

# c# - 设计一个阻塞方法，直到字典中的值发生变化

> ID：14839029
> 
> 赞同：1
> 
> 时间：2013-02-12T18:14:13.583
> 
> 标签：c#

我目前正在尝试设计一种阻塞方法，直到字典中的值发生变化。这里我使用的是 WaitForOpenSpot 方法。这只是一个粗略的草图。我知道它目前不是线程安全的。我最终会在稍后添加锁定/解锁。现在我想知道是否有更好的方法来做到这一点？任何其他建议也将不胜感激。

```
Class AccountStatus
{
  static bool OpenSpot = false;

  static private Dictionary<String, int> Transfer = InitializeContainer();

  static Dictionary<String , int> InitializeContainer ()
  {
       Dictionary<String, int> Transfer = new Dictionary<String, int>()
       Transfer.add("stat",0);
  }

  static void  Changestatus(string str , int val) //str = stat 
  {
      Transfer[str] = val;
      if(val == 1)
      {
          OpenSpot = true
      }        
  } 

  static void WaitForOpenSpot()
  {
      while(!OpenSpot)
      {
          Thread.sleep(2);
      }
  } 
}//end class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:23:54.313

看一下[AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)类。

从您的代码中采用给您一个粗略的例子（可能无法编译）：

```
private static AutoResetEvent resetEvent = new AutoResetEvent(false); 

static void WaitForOpenSpot()
{  
    resetEvent.WaitOne();
}

static void ChangeStatus(string str, int val)
{
   Transfer[str] = val;
   if (val == 1)
   {
       resetEvent.Set();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:13:35.267

像这样的正常模式是使用`Monitor.Wait`/ `Monitor.PulseAll`。要使用这些方法，应该定义一个只能在锁内更改的等待条件，并让任何可能更改该条件的代码`PulseAll`在完成后对锁执行操作。

例如：字典 myDict；

```
//Code that waits for magic key value:
lock(myDict)
{
    int myNumber;
    while (!myDict.TryGetValue(myKey, out myNumber) || myNumber < valueOfInterest)
        Monitor.Wait(myDict);
}

//Code that changes anything in myDict:
lock(myDict)
{
    myDict[theKey] = theValue;
    Monitor.PulseAll(myDict);
} 
```

任何时候 Dictionary 中有任何变化，所有等待某个键以保持某个值的等待线程将一个接一个地检查它是否发生变化，然后继续或返回等待。

请注意，如果`Monitor.Wait`有时在没有脉冲的情况下提前自发返回，则不会影响此代码的正确性。虽然`Monitor.Wait`通常不会自发唤醒，但正确编写的代码通常可以容忍这种唤醒，并且会被这种唤醒破坏的代码通常也会以其他方式被破坏。

# cruisecontrol - 从 camelot 中检索已删除的构建

> ID：14839032
> 
> 赞同：1
> 
> 时间：2013-02-12T18:14:20.283
> 
> 标签：cruisecontrol

在 CruiseControl 上触发构建后，构建被标记在 camelot 服务器的目录之一中，但随后意外从远程连接到 camelot 的 filezilla 中删除。

那么是否有可能取回已删除的构建。

# php - 我将如何编写正则表达式来检查由等号包围的文本字符串？

> ID：14839034
> 
> 赞同：1
> 
> 时间：2013-02-12T18:14:37.703
> 
> 标签：php, regex

我将如何使用正则表达式来检查以下文本字符串中的字符：

=== 徽标 ===

我尝试使用正则表达式测试器，但可以想出正确的表达式，因为我试过这个：

```
 /^[=]{3}$/ 
```

1.  我想在字符串中搜索找到文本以 3 个等号开头的位置。
2.  在等号内查找字符串或任何其他字符。
3.  再找到 3 个等号.. 结束表达式。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:16:46.373

尝试使用这个正则表达式：

```
/===[^=]+===/ 
```

如果要捕获文本，请将其括在括号中：

```
/===([^=]+)===/ 
```

这是小提琴：http: [//jsfiddle.net/jufXA/](http://jsfiddle.net/jufXA/)

* * *

如果您的文本中可能有等号（但显然小于 3），则应该懒惰地匹配所有内容（这有点慢）：

```
/===(.+?)===/ 
```

这是小提琴：http: [//jsfiddle.net/jufXA/1/](http://jsfiddle.net/jufXA/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:16:50.140

怎么这么简单...

```
/===(.+?)===/ 
```

例如：[**_**](http://ideone.com/pYyuIP)

```
$test = "here's ===something special===, like ===this=one===";
preg_match_all('/===(.+?)===/', $test, $matches);
var_dump($matches[1]); 
```

懒惰在这里是一种美德：正则表达式引擎不会超过第一个“关闭分隔符`===`”。但是，如果没有`?`，您需要使用否定字符类（但话又说回来，那又如何`===something=like=this===`？）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T18:23:37.873

我更喜欢：

```
/([=]{3})\s*(.+?)\s*\1/. 
```

这会将文本标记（三个等号）放在开头，然后在结尾处使用反向引用。它还会修剪您的空格文本，这可能是您想要的。

# java - 查找给定包中的所有类

> ID：14839041
> 
> 赞同：0
> 
> 时间：2013-02-12T18:15:02.883
> 
> 标签：java, reflection, package

给定一个包，是否可以找到其中的所有类？

例如，您如何找出其中包含哪些类`java.lang`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:49:52.560

这应该让你开始（看看控制台输出，这很有意义）：

```
import com.google.common.collect.Multimap;
import org.reflections.Reflections;

import java.util.Map;

public class PackageWalker {
    public PackageWalker() {}

    public void walk() {
        Reflections reflections = new Reflections("org.reflections");
        for (String mmapName : reflections.getStore().getStoreMap().keySet()) {
            System.out.println("KEY["+mmapName+"]");
            Multimap<String,String> mmap = reflections.getStore().getStoreMap().get(mmapName);
            for (Map.Entry<String,String> entry: mmap.entries()) {
                System.out.println("  PAIR[ "+entry.getKey()+"="+entry.getValue()+" ]");
            }
        }
    }

    public static void main(String[] args) {
        new PackageWalker().walk();
    }
} 
```

需要以下 jar 及其依赖项（使用 Ivy 格式）：

```
 <dependency org="org.reflections" name="reflections" rev="0.9.8"/> 
```

这是我的项目文件夹： [http ://www.filedropper.com/laboratorytar](http://www.filedropper.com/laboratorytar)

您只需要确保 Ivy 已与 ant 一起安装（基本上将 ivy.jar 放入您的 ANT_HOME/lib（或 *nix 上的 ~/.ant/lib/），它就可以工作了）。

# javascript - 使用 Marionette 对集合视图中的项目进行分组

> ID：14839047
> 
> 赞同：7
> 
> 时间：2013-02-12T18:15:37.480
> 
> 标签：javascript, backbone.js, marionette

我正在使用骨干网和 marionette.js 构建一个应用程序。我计划使用集合视图来呈现一些项目，然后允许它们被过滤、排序和分组。

我想知道是否有任何好的设计理念可以以分组方式实际附加 html。我有一些想法，但我想知道是否有人可能会对哪个更好的设计提出意见。

我的第一个想法是更改集合视图上的 appendHtml 方法，如果启用了分组，我可以让 appendHtml 函数查找或创建子组的 bin 并将子视图放入其中。

```
appendHtml: function(collectionView, itemView, index){
  var $container = this.getItemViewContainer(collectionView);

  // get group from model
  var groupName = itemView.model.get("group");

  // try to find group in child container
  var groupContainer  = $container.find("." + groupName);

  if(groupContainer.length === 0){
    // create group container
    var groupContainer = $('<div class="' + groupName + '">')
    $container.append(groupContainer);
  }

  // Append the childview to the group
  groupContainer.append(itemView);
} 
```

我的第二个想法是先将集合分成几组，然后可能会渲染多个视图……这个看起来可能工作量更大，但就代码结构而言也可能更好一些。

任何能引起意见的建议或想法都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T15:59:34.513

也许不完全是您正在寻找的东西，但这里有一个有点相关的问题：

[Backbone.Marionette，网格中的收集项目（无表）](https://stackoverflow.com/questions/12674757/backbone-marionette-collection-items-in-a-grid-no-table/13424291)

我对该问题的解决方案——一个可以呈现为列表或网格（“按行分组的项目”）的提取集合是在“包装器”CompositeView 中使用 _.groupBy() 并将修改后的数据传递到链中另一个 CompositeView（行），然后向下到一个 ItemView。

```
Views.Grid = Backbone.Marionette.CompositeView.extend({
    template: "#grid-template",
    itemView: Views.GridRow,
    itemViewContainer: "section",
    initialize: function() {
        var grid = this.collection.groupBy(function(list, iterator) {
            return Math.floor(iterator / 4); // 4 == number of columns
        });
        this.collection = new Backbone.Collection(_.toArray(grid));
    }
}); 
```

这是一个演示：

[http://jsfiddle.net/bryanbuchs/c72Vg/](http://jsfiddle.net/bryanbuchs/c72Vg/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T14:24:09.690

我已经完成了您建议的两件事，并且它们都运行良好。这在很大程度上取决于您更喜欢哪一种，也许哪一种更适合您的情况。

如果您的数据已经在分组层次结构中，使用许多分层模型/集合插件之一或您自己的层次结构代码，那么呈现组列表的想法可能更容易，每个组呈现项目列表。

如果您有平坦的数据，但包含一个您将分组的字段，那么 appendHtml 更改可能会更容易。

hth

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T13:54:50.277

这是对[Derick](https://stackoverflow.com/a/14855699/3446669)和[bryanbuchs 的](https://stackoverflow.com/a/14857616/3446669)回答的补充。我的方法使用一个主集合视图和另一个集合视图作为它的子视图。

集合视图有一个“addChild”方法，每当模型添加到视图的集合中时都会调用该方法。'addChild' 方法负责渲染子视图并将其添加到 HTML 中，用于给定索引处的集合视图。[你可以在这里](https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.collectionview.js#L253)查看 github 上的源代码。为了简化起见，我将其粘贴在这里：

```
addChild: function(child, ChildView, index) {
    var childViewOptions = this.getOption('childViewOptions');
    if (_.isFunction(childViewOptions)) {
      childViewOptions = childViewOptions.call(this, child, index);
    }

    var view = this.buildChildView(child, ChildView, childViewOptions);

    // increment indices of views after this one
    this._updateIndices(view, true, index);
    this._addChildView(view, index);
    return view;
} 
```

如您所见，“addChild”方法调用了“buildChildView”方法。这个方法实际上构建了视图。

```
// Build a `childView` for a model in the collection.
buildChildView: function(child, ChildViewClass, childViewOptions) {
var options = _.extend({model: child}, childViewOptions);
return new ChildViewClass(options);
} 
```

因此，对于您的用例，如果您的分组条件匹配，您可以覆盖“addChild”方法并调用原始方法。然后在重写的“buildChildView”方法中，您可以将组（它是您的集合的子集）传递给它的 childView，它是另一个 Marionette.CollectionView。

例子：

```
MyCollectionView.prototype.addChild = function(child, ChildView, index) {
    if(mycriteria){
        return ProductGroup.__super__.addChild.apply(this, arguments);
    }
};

MyCollectionView.prototype.buildChildView = function(child, ChildViewClass, 
childViewOptions) {

    options = _.extend({
        collection: "Pass your group collection which is a subset of your main collection"},
        childViewOptions
    );

    return new ChildViewClass(options);
  }; 
```

# c# - 如何使用调试器（VS Professional 2012）查找事件列表？

> ID：14839050
> 
> 赞同：6
> 
> 时间：2013-02-12T18:15:47.453
> 
> 标签：c#, wpf, debugging, events, visual-studio-2012

好的，我无法为我的问题找到任何帮助，stackoverflow 似乎也没有任何帮助，或者我不知道如何查找它（请纠正我，如果我错了，我会关闭这个问题）。

在我的程序中，我有一个`Grid`在代码中定义的一些事件：

```
public Grid _grid = new Grid();
_grid.MouseLeftButtonDown += new MouseButtonEventHandler(MyMethod);
//and a few more events... 
```

现在在我的程序运行过程中，我看到了一些只能来自某些事件的奇怪行为，所以我设置了一个断点并停止程序以使用调试器。

是否有一个列表可以在某处找到列出该成员的所有当前定义的事件，`_grid`以便我可以检查是否还没有删除不需要的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:32:35.180

**更新 2**

不幸的是，WPF 中的大多数事件（即 on `UIElement`）都是通过手动实现`add`/来实现的，这意味着事件成员只能在or运算符`remove`的左侧（即它不能被“读取”）。内部是这样的，每个事件都被“委托”给一个事件集合，并且该集合仅包含分配事件的元素（例如，如果有一个事件，那么该事件集合将只有一个条目。不幸的是，事件集合存储了什么表示处理程序是一个内部结构，您必须能够实例化它才能查询集合。您无法实例化该结构的实例 ( , FWIW) 以查询集合 (`-=``+=``MouseLeftButtonDownEvent += somehandler;``RoutedEventHandlerInfo``UIElement.EventHandlersStore._entries`，也是 FWIW）。例如，如果可以，您可以在 QuickWatch 窗口中查询特定事件的处理程序：

```
grid.EventHandlersStore._entries[
    new RoutedEventHandlerInfo(UIElement.MouseLeftButtonDownEvent, false)] 
```

但是，调试器不允许您调用内部构造函数。

 ~~没有任何东西只列出*事件*。您可以在调试器中看到实例的所有成员（watch、quickwatch 等），并且事件具有不同的图标。然后，您可以展开其中的每一个以查看分配给事件的方法。例如：

![在此处输入图像描述](../Images/fca09dcfd6ff3e0ead8c14893f63cfc5.png)

如您所见，`MyEvent`已`t_MyEvent`为该特定实例“分配”了方法。

**更新：** 如果您为一个事件分配了多个事件处理程序，则调试器将仅在快速查看事件的顶层显示最后分配的方法。要查看分配的*所有*方法，您需要深入到调用列表。例如：

![在此处输入图像描述](../Images/fec7806e10b4af7efab8d903db86c8d1.png)

.. 这表明`t_MyEvent`和`t_MyEvent2`都在 . 的调用列表中`MyEvent`。如果您没有处理程序，则`MyEvent`值为`null`.~~

# colors - 颜色深度计算

> ID：14839052
> 
> 赞同：2
> 
> 时间：2013-02-12T18:16:03.533
> 
> 标签：colors, depth

我想知道如何使用*这些给定的数据项计算图片的颜色深度：*

1.  图片的分辨率。
2.  图片中颜色的数量。

我实际上需要以 MB 为单位计算所需的存储空间才能显示图片，而我的计算中缺少颜色深度。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T22:50:36.463

1.  **`2^16`颜色不代表RGB**

    这意味着像素颜色信息具有`16bits -> 2^16 -> 65536`可能性。它可以是**RGB、YUV、灰度**或其他。

2.  **图片大小（以字节为单位）**

    ```
    size = width[pixels] * height[pixels] * pixel size[BYTE] 
    ```

    对于 16 位像素，它是每像素 2 个字节，因此：

    ```
    size = width*height*2 [Bytes] 
    ```

    要获得以 MB 为单位的大小，只需将其除以`1024*1024`（或右移 20 位）

3.  **来自颜色数的像素大小（以字节为单位）**

    ```
    pixel size = ceil(log2(num of colors)/8) 
    ```

# java - 任何大小数组java的标准差

> ID：14839056
> 
> 赞同：4
> 
> 时间：2013-02-12T18:16:21.983
> 
> 标签：java, arrays, math, methods

如何计算Java中数组的标准占卜？正如你所看到的，我已经计算了平均值，而且我知道最后我必须除以样本量减去 1 (n-1) 并将该数字平方。我遇到的问题是如何取每个数字并计算它与平均值的距离，然后对该数字求平方。我知道我可以分别计算数据集中的每个数字，但必须有一种更简单的方法。任何帮助将不胜感激，这是我的代码。

```
public class CalculateArray
{

    public static void main(String[] args)
    {
        int [] numbers = new int[]{1,2,3,4,5,6,7,8,9};

        int sum = 0;
        int max = 0;
        int min = numbers[0];
        double sd = 0;

        for(int i=0; i<numbers.length; i++)
        {
            sum = sum + numbers[i];
        }

        double average = sum / numbers.length;

        System.out.println("Average value is : " + average);

        for(int i=0; i<numbers.length; i++)
        {
            if(numbers[i] > max)
            {
                max = numbers[i];
            }
        }

        System.out.println("max number is : " + max);

        for(int i=0; i<numbers.length; i++)
        {
            if(numbers[i] < min)
            {
                min = numbers[i];
            }
        }

        System.out.println("min number is : " + min);

        for (int i=0; i<numbers.length;i++)
        {
           //this is where im having problems
           sd = ???
        }

        double standardDeviation = math.sqrt(sd/(numbers.length-1));

        System.out.println("The standard deviation is : " + standardDeviation);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T18:21:33.970

要计算一个数字与平均值的距离，请使用`-`运算符。要计算平方，您可以使用`Math.pow`. 因此，假设您已经`average`在程序的前面计算过：

```
for (int i=0; i<numbers.length;i++)
{
    sd = sd + Math.pow(numbers[i] - average, 2);
} 
```

顺便说一句，您当前计算平均值的方式被打破了。您应该定义`sum`为 double，而不是`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:47:23.827

除了其他人描述的两遍算法（在第一遍中计算平均值，在下一遍中计算标准开发），请参阅[此链接](http://www.strchr.com/standard_deviation_in_one_pass)以获取如何在单遍中完成的示例。算法如下：

```
double std_dev2(double a[], int n) {
    if(n == 0)
        return 0.0;
    double sum = 0;
    double sq_sum = 0;
    for(int i = 0; i < n; ++i) {
       sum += a[i];
       sq_sum += a[i] * a[i];
    }
    double mean = sum / n;
    double variance = sq_sum / n - mean * mean;
    return sqrt(variance);
} 
```

* * *

**更新**
不要这样做。正如 Joni 在下面的[评论](https://stackoverflow.com/questions/14839056/standard-deviation-of-any-sized-array-java/14839593#comment20832614_14839593)中解释的那样，在实现这是一个计算机程序时，出错的风险很高。对于一个稳定的在线算法，Joni 将我们引导到[这篇](http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Online_algorithm) Wikipedia 文章，如前所述，该文章已被彻底分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T17:53:21.603

```
k + k = 2k 
```

要获得平均值，请除以`2k`您拥有的术语数。所以项的平均值是k。:D

# javascript - JQuery Mobile：并排/下方放置元素 - 取决于平台

> ID：14839057
> 
> 赞同：2
> 
> 时间：2013-02-12T18:16:23.833
> 
> 标签：javascript, jquery, css, jquery-mobile, web

我目前正在玩 JQuery Mobile。我的想法是创建一个显示不同数量列表的页面（至少一个，最多为〜10）。

将它们放在页面上时，列表将填满整个水平空间。然后它们被放置在彼此下方。

在小电话屏幕上打开页面时这很好，但在屏幕尺寸较大的设备（平板电脑、桌面浏览器）上看起来不太好。当然，我可以使用 Grid 将它们并排放置，但这会导致在小屏幕设备上的设计不佳。

最好的情况是我在桌面浏览器中打开页面，更改它的大小，然后列表会根据屏幕大小自行替换。在电话显示器上，它们总是被放置在彼此下方。

**是否可以根据屏幕大小自动显示列表？**

*另请注意，我并不总是知道用户将创建多少个列表。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:24:18.093

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Yz3nS/](http://jsfiddle.net/Gajotres/Yz3nS/)

因为 jQuery Mobile 需要支持 HTML5 的浏览器，所以您需要使用 css 媒体查询，它们将为您提供最大的灵活性。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <ul data-role="listview" data-theme="a" data-inset="true">
                <li data-role="list-divider">Listview 1</li>
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
            </ul>
            <ul data-role="listview" data-theme="a" data-inset="true">
                <li data-role="list-divider">Listview 2</li>                
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
            </ul>
            <ul data-role="listview" data-theme="a" data-inset="true">
                <li data-role="list-divider">Listview 3</li>                
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
            </ul>
            <ul data-role="listview" data-theme="a" data-inset="true">
                <li data-role="list-divider">Listview 4</li>                
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
                <li><a href="item1.html">item1</a></li>
            </ul>            
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

**和 CSS ：**

```
ul { 
float: left; width: 100% !important; 
}

/* iPhone Horizontal -------------------*/ 
@media all and (min-width: 480px){  
ul { width: 100% !important; } 
}       

/* iPad Verticle -----------------------*/ 
@media only screen and (min-width: 768px) {
ul { width: 50% !important; } 
}  

/* iPad Horizontal ---------------------*/ 
@media only screen and (min-width: 1024px) {     
ul { width: 50% !important; } 
}  

/* Nexus 7 Horizontal ------------------*/ 
@media only screen and (min-width: 1280px) {     
ul { width: 33.3333333% !important; } 
}  

/* Laptop 1440 -------------------------*/ 
@media only screen and (min-width: 1440px) {     
ul { width: 33.3333333% !important; } 
}  

/* Monitor 1600 ------------------------*/ 
@media only screen and (min-width: 1600px) {
ul { width: 25% !important; } 
}  

/* Monitor 1920 ------------------------*/ 
@media only screen and (min-width: 1920px) {     
ul { width: 20% !important; } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:59:27.757

您可以`max-width`在列表的样式中设置 a ，并将它们向左浮动，这样如果屏幕很窄，它们会自动堆叠起来。您还可以查看[媒体查询](http://blog.robotwoods.com/2012/08/media-queries/)，如果屏幕小于某个值，则仅使用 100% 宽度

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
.list {width:100%; max-width:500px; float:left;display:block;border:thin solid black;min-height:50px;}
</style>
</head>
<body>
<div class="list"></div><div class="list"></div><div class="list"></div><div class="list"></div><div class="list"></div>
</body>
</html> 
```

# javascript - Ember 中的观察者功能？

> ID：14839060
> 
> 赞同：2
> 
> 时间：2013-02-12T18:16:34.337
> 
> 标签：javascript, ember.js, dom-events

我无法让观察者在 Ember.js 中实际做任何事情。基本上，我有一个 Ember.Select 下拉菜单，并希望将更多操作绑定到选择下拉列表中的值的事件。例如：

```
App.selectedPersonController = Ember.Object.create({
  person: null,
  personDidChange: function() {
    // do something here when the person changes
    console.log("PERSON CHANGED")
  }.observes('person')
}); 
```

即使 'person' 属性正在更新，什么也没有发生。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T20:01:48.900

这是因为从 pre4 版本开始，您无法在`Em.*.create()`函数上设置属性或可观察的。您必须首先使用该`.extend()`函数并在其中设置所有属性和可观察对象，然后创建该对象。

例如，看看这个使用扩展功能的[jsfiddle 。](http://jsfiddle.net/Deif/nv7y5/15/)然后尝试通过仅使用将其带走`create`，您会发现该应用程序不再有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T18:38:48.693

或者使用 createWithMixins() 而不是 create()

# android - 从意图服务到 UI 的大数据传输

> ID：14839064
> 
> 赞同：2
> 
> 时间：2013-02-12T18:16:37.777
> 
> 标签：android

在我的项目中，我需要将通过意图服务中的网络操作接收到的大尺寸数据传输到 uithread 或任何其他线程。

我只是想知道哪个是最好的选择，由于数据量大，我似乎无法使用 parcelable 或 bundle。而且大小不可预测

如果有人提出处理此类案例的想法或示例，这将很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:18:13.650

您可以将数据写入文件并将文件路径传回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:44:30.133

您也可以从 Intent Service 和其他活动访问 Application 对象。因此，您创建自己的 android.app.Application 子类（不要忘记在清单中注册）并通过此类进行通信（例如，将数据传递给此类并从其他线程检查）。

# ios - glDrawElements 三角形使用顶点数组开始和结束的顶点渲染（使用 GL_TRIANGLE_STRIP）

> ID：14839065
> 
> 赞同：3
> 
> 时间：2013-02-12T18:16:40.257
> 
> 标签：ios, opengl-es-2.0, gl-triangle-strip

我正在尝试使用对`glDrawElements()`. 每条线都是一个四边形，我在它们之间使用退化三角形来分隔它们。

渲染时，正在使用索引和处的顶点绘制一个额外的三角形`0`，我认为这不是.`n-1``n-2``GL_TRIANGLE_STRIPS`

例如，12 个顶点组成 3 个四边形，我的索引数组如下所示：

(0, 1, 2, 3, **3** , **4** , 4, 5, 6, 7, **7** , **8** , 8, 9, 10, 11)

结果是这样的：

![在第一个和最后一个顶点之间渲染的三角形](../Images/139d9036ebeaaff9cb0014693f8e6eef.png)

不管我要渲染多少个顶点，或者我在索引列表中放了多少个索引，它仍然会用三角形连接开始和结束。我正在使用 VBO 和 IBO 进行绘图，包裹在 VAO 中。所以要画画，我只需调用：

```
glBindVertexArrayOES(vao);
glDrawElements(GL_TRIANGLE_STRIP, indexCount * sizeof(GLushort), GL_UNSIGNED_SHORT, 0);
glBindVertexArrayOES(0); 
```

VAO设置：

```
// Bind VAO.
glBindVertexArrayOES(vao);

// Bind and set VBO data.
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, vertexCount * sizeof(VertexStructure), vertices, GL_STATIC_DRAW);

// Enable attribute pointers.
glVertexAttribPointer(position, 2, GL_FLOAT, GL_FALSE, sizeof(VertexStructure), (void*)offsetof(VertexStructure, vertex));
glEnableVertexAttribArray(position);
glVertexAttribPointer(color, 4, GL_UNSIGNED_BYTE, GL_TRUE, sizeof(VertexStructure), (void*)offsetof(VertexStructure, color));
glEnableVertexAttribArray(color);

// Bind and set IBO data.
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indexCount * sizeof(GLushort), indices, GL_STATIC_DRAW);

// Unbind VBO & VAO.
glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindVertexArrayOES(0);

// Disable attribute pointers.                                                       
glDisableVertexAttribArray(position);
glDisableVertexAttribArray(color); 
```

我可能会做什么愚蠢的事情来导致这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:10:20.597

> *count*指定要渲染的元素数量。

```
glDrawElements(GL_TRIANGLE_STRIP, indexCount, GL_UNSIGNED_SHORT, 0); 
```

# tfs - 根据任务分支策略将任务分支提升到分支中的主分支

> ID：14839073
> 
> 赞同：2
> 
> 时间：2013-02-12T18:17:04.063
> 
> 标签：tfs, branching-and-merging

在 Branch per Task 分支策略中，如果在创建任务分支后没有修改原始主分支，是否有任何理由不将任务分支提升到主分支并删除旧的主分支？

换句话说，创建一个任务分支作为主分支的副本，在该任务分支上工作，当任务完成时，只需删除原始主分支并将任务分支设为主分支，并为其赋予与原始主完全相同的名称支了。

最后，这将如何影响其他开发人员可能在他们的机器上拥有的原始主分支的副本？他们是否能够使用“获取最新”来获取在任务分支中创建的更新代码，或者他们是否必须删除原始主分支的本地副本并从 TFS 获取新的主分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:39:46.107

不会那样做。这将使正确获取旧 MAIN 分支中项目的历史记录变得更加困难。最初针对 MAIN 分支发布的任何版本都将难以检索，并且您可能会收到意外的“您要取消删除文件 xyz”消息。

如果不进行无根据的合并，则链接到旧 MAIN 分支的任何其他分支都无法合并到新分支中。

而这一切都不必进行合并？如果旧的主分支没有改变，这个合并将是完美的并且是完全自动的。TFS 将看到没有冲突的更改，整个过程应该是 2 单击体验。

1.  合并
2.  报到

# javascript - 提取变量的innerhtml？使用 jQuery

> ID：14839074
> 
> 赞同：0
> 
> 时间：2013-02-12T18:17:09.320
> 
> 标签：javascript, jquery, variables, extract, innerhtml

我试图将整个文档从 javascript 转换为 jquery。于是我撞到了一堵砖墙。

所以在我的脚本上我有我的数组：

```
var phones = new Array();
phones[0] = 'http://www.cellunlocker.net/blog/wp-content/uploads/2011/11/iphone-4.jpg" title="ipod" alt="ipod image';
phones[1] = 'http://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Blackberry-Bold-9650-Verizon.jpg/365px-Blackberry-Bold-9650-Verizon.jpg';
phones.push('http://www.wired.com/images_blogs/gadgetlab/2010/03/samsung-galaxys-536x536.jpg');
phones.push('http://handies.phandroid.com/media/motorola-spice-1286473916-630.jpg');
phones.push('http://www.pitchpoleenterprises.com/shop/ImageUnavailable.jpg'); 
```

然后我也有我的功能：

```
function checkCase(){

    var phone = $('#cel')[0]; //document.getElementById('cel');
    var phone_div = $('#phone_display')[0]; //document.getElementById('phone_display'); 
```

其次是砖墙。我想转换这个特定的代码（目前注释为 javascript）。我尝试了一些东西（只有最后一个显示在那里）。基本上，我正在尝试显示黑莓的图片。现在，图像本身没有显示（其他图片工作正常，因为它们目前都在 javascript 中），但我正在尝试更改它们 - 我决定从黑莓图片开始。

基本上，我不知道如何将变量本身更改为 jquery。由于它是一个变量而不是一个 id，我完全不知道该怎么做。

```
case 'bb':
        /*phone_div.innerHTML*/ /*$('phone_div').html()*/ $('phone_div')[0].innerHTML = '<img src="'+phones[1]+'" title="blackberry" alt="blackberry image" />'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:28:07.683

因为`phone_div`它是一个 DOM 元素，如果你想在它周围获得一个 jQuery 包装器，只需这样做：

```
$(phone_div).html('<img src="'+phones[1]+'" title="blackberry" alt="blackberry image" />'); 
```

你也应该使用`html()`如图所示的方法，否则我根本不知道你为什么要使用 jQuery，你可以很容易地做到：

```
phone_div.innerHTML = '<img src="'+phones[1]+'" title="blackberry" alt="blackberry image" />'; 
```

真的，我什至不明白你为什么这样做：

```
var phone_div = $('#phone_display')[0]; 
```

这是非常非 jQuery 的。您可以轻松地完全消除这行代码，只需在该元素上设置 html，例如：

```
$('#phone_display').html('<img src="'+phones[1]+'" title="blackberry" alt="blackberry image" />'); 
```

这是最“类似jQuery”的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:28:42.590

我建议做一些链接这个以在 div 中创建一个新的 img

```
$('#phone_div').append('<img id="bb" src="'+phones[1]+'" />'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:31:34.350

看来您使用它的方式如下：

```
// id selector (returns an array), you grep the first one
var phone_div = $('#phone_display')[0];
// not necessary, keep it to jQuery:
var phone_div = $('#phone_display');

// now this won't work at all, you use a string, 
// which would be interpreted as an DOM Element selector.
$('phone_div')[0]

// i guess you want it like this:
var phone_div = $('#phone_display');
phone_div.html(<img src="'+phones[1]+'" title="blackberry" alt="blackberry image" />); 
```

# java - 无法访问 www.domain1.com 但可以访问 sub1.domain1.com

> ID：14839076
> 
> 赞同：0
> 
> 时间：2013-02-12T18:17:13.667
> 
> 标签：java, google-app-engine, dns, google-apps

经过大量的研发，不知何故设法用谷歌应用引擎设置了自定义域名。

来自[谷歌应用程序面板](https://www.google.com/a/cpanel/domain1.com/AppEngineServiceSettings?appId=dom-hrd)，

> 您的用户可以在以下位置访问 dom-hrd：
> 
> [https://dom-hrd.appspot.com](https://dom-hrd.appspot.com)
> 
> [http://sub1.domain1.com](http://sub1.domain1.com)

我无法将“www.domain1.com”添加到此列表中，并出现错误，“已使用，请先删除以前的映射”。但是，这个链接“www.domain1.com”指向谷歌网站。

admin@domain1.com 拥有的域“www.domain1.com”；和 google appengine java 应用程序，“dom-hrd”是使用我的 gmail id 部署的。

如何通过“www.domain1.com”访问“ [http://dom-hrd.appspot.com](http://dom-hrd.appspot.com) ”？

我还尝试将“www”重命名为“www1”（enom > 域设置 > 主机记录 > CNAME 别名），然后通过[google apps page](https://www.google.com/a/cpanel/domain1.com/AppEngineServiceSettings?appId=dom-hrd)添加“www” 。尽管如此，我还是遇到了同样的错误，“已使用，请先删除以前的映射”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:32:23.893

我做了两件事解决了这个问题，

> 1.  删除以下网址映射 'www.domain1.com':'www', from,
>     
>     
>     
>     谷歌应用>设置（标签）>服务（右侧面板）>网站>网站设置>网址映射
>     
>     
> 2.  为我的谷歌应用域禁用谷歌网站

（3\. 等待 5 到 10 分钟让更改可见）

现在，“ [http://www.domain1.com/](http://www.domain1.com/) ”可以访问，它指向“ [http://dom-hrd.appspot.com/](http://dom-hrd.appspot.com/) ”

[appengine google groups](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/wk0zm2QQvBQ)的这篇文章有助于解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:03:48.173

您需要更改 CNAME 记录并将**www**指向**ghs.googlehosted.com**

# asp.net-web-api - DotnetOpenAuth 范围和声明

> ID：14839084
> 
> 赞同：2
> 
> 时间：2013-02-12T18:17:32.450
> 
> 标签：asp.net-web-api, oauth-2.0, dotnetopenauth

我正在构建一个`ASP.NET Web Api`with`OAuth2 authorization`并正在开发一个应用程序，我们有：

*   顾客
*   组织
*   用户

*一个客户有一个或多个组织，一个用户可以代表一个或多个客户。*

我想让这个逻辑成为范围和访问令牌的一部分。这样我可以限制访问，但我也可以使用我的 API 从应用程序中移除一些（复杂的）逻辑。（当他们选择了一个小范围时）

**范围**

*   组织
*   顾客
*   全部

**例如**

> 当应用程序请求具有**组织** 范围的访问令牌时，用户应该在授权页面上看到两个下拉框。一个用于选择客户，另一个用于从该客户拥有的组织中选择一个。
> 
> 这样，具有范围组织的访问令牌应仅限于来自该单个组织的数据。

**使用 实现这一点的最佳方法是`DotNetOpenAuth`什么？**

我应该将 organizationId 和 customerId 作为范围添加到 accesstoken 吗？如果我这样做，我将如何处理“客户”范围？我应该只添加没有组织 ID 的 CustomerId 吗？（客户最多可以拥有大约 150 个组织）

理想我想把它转换成声明，我可以很容易地使用它来授权用户的操作。

如果范围是解决此问题的正确方法，或者我可以更好地解决此问题的一些想法，我想要一些反馈，而无需重新发明轮子或破坏 DotNetOpenAuth 框架的开放。

**PS** 我同时构建了`AuthorizationServer`和`ResourceServer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:13:44.570

就我而言，您不应该添加组织 ID。*您应该只将令牌视为用户能够访问*组织的证明，而不是*具体的*组织。服务器可以使用存储在令牌中的用户名来仅显示允许用户查看的组织。换句话说，现在服务器需要做两项检查：

1.  服务器检查提供的令牌是否被授权用于**组织**范围。
2.  服务器检查用户（从令牌中检索）被授权的特定组织。

这样，您可以保持 OAuth 范围简单明了，但您仍然可以将访问权限限制为仅特定组织。

# c# - 加密从一页到另一页的数据传输

> ID：14839087
> 
> 赞同：2
> 
> 时间：2013-02-12T18:17:52.897
> 
> 标签：c#, asp.net, encryption, https, web

我在 ASP.NET 中有一个网站。当我运行网站并使用谷歌浏览器中的开发者工具时，我能够观察到登录页面中输入的数据。在发送到数据库之前，数据已使用 MD5 散列进行加密。为什么我仍然能够知道用户从谷歌浏览器的开发者工具中输入了什么？

从浏览器发送数据时，如何使这些数据不可见？我需要使用 HTTPS 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:23:26.413

通过非 SSL 连接提交的表单数据绝对可以看到。无论您是否在提交之前对这些数据进行哈希处理，如果这很重要，请确保所有这些都在 SSL 会话中完成。

# c - 两点之间的最短距离。蛮力算法

> ID：14839089
> 
> 赞同：0
> 
> 时间：2013-02-12T18:18:06.287
> 
> 标签：c, algorithm, closest, closest-points

我应该使用蛮力算法确定最近的点。我无法编译它。

该算法是[该网页上的第一个算法](http://www.csl.mtu.edu/cs4321/www/Lectures/Lecture%206%20-%20Brute%20Force%20Closest%20Pair%20and%20Convex%20and%20Exhausive%20Search.htm)。

```
#include <stdio.h>
#include <float.h>
#include <stdlib.h>
#include <math.h>

struct Point
{
    int x, y;
};

int compareX(const void* a, const void* b)
{
    Point *p1 = (Point *)a,  *p2 = (Point *)b;
    return (p1->x - p2->x);
}

int compareY(const void* a, const void* b)
{
    Point *p1 = (Point *)a,   *p2 = (Point *)b;
    return (p1->y - p2->y);
}

float dist(Point p1, Point p2)
{
   return sqrt( (p1.x - p2.x)*(p1.x - p2.x) +
                (p1.y - p2.y)*(p1.y - p2.y)
              );
}

float bruteForce(Point P[], int n)
{
   float min = FLT_MAX;
   for (int i = 0; i < n; ++i)
       for (int j = i+1; j < n; ++j)
           if (dist(P[i], P[j]) < min)
               min = dist(P[i], P[j]);
   return min;
}

float min(float x, float y)
{
    return (x < y)? x : y;
}

float stripClosest(Point strip[], int size, float d)
{
  float min = d;  // Initialize the minimum distance as d

   qsort(strip, size, sizeof(Point), compareY);

    for (int i = 0; i < size; ++i)
       for (int j = i+1; j < size && (strip[j].y - strip[i].y) < min; ++j)
           if (dist(strip[i],strip[j]) < min)
                min = dist(strip[i], strip[j]);

   return min;
}

float closestUtil(Point P[], int n)
{

 if (n <= 3)
        return bruteForce(P, n);

   int mid = n/2;
    Point midPoint = P[mid];

   float dl = closestUtil(P, mid);
    float dr = closestUtil(P + mid, n-mid);

   float d = min(dl, dr);

 Point strip[n];
  int j = 0;
  for (int i = 0; i < n; i++)
      if (abs(P[i].x - midPoint.x) < d)
          strip[j] = P[i], j++;

   return min(d, stripClosest(strip, j, d) );
}

float closest(Point P[], int n)
{
    qsort(P, n, sizeof(Point), compareX);

    return closestUtil(P, n);
}

int main()
{
   Point P[] = {{2, 3}, {12, 30}, {40, 50}, {5, 1}, {12, 10}, {3, 4}};
  int n = sizeof(P) / sizeof(P[0]);
  printf("The smallest distance is %f ", closest(P, n));
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:23:34.310

`Point`不是有效类型。你的意思是`struct Point`。

或者，您可以使用`typedef`：

```
typedef struct
{
    int x, y;
} Point; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:21:50.800

它工作得很好，输出是“最小距离是 1.414214”

# mysql - 使用 SQL 生成字符串

> ID：14839090
> 
> 赞同：0
> 
> 时间：2013-02-12T18:18:06.907
> 
> 标签：mysql, sql

**样品表**

```
---------------------------                  --------
| id | user |  num | type | ---> Want to get | name |
---------------------------                  --------
| 5  |  1   |   2  |  Q   |                  | Q2A  |
---------------------------                  --------
| 10 |  1   |   2  |  Q   |                  | Q2B  |
---------------------------                  --------
| 11 |  1   |   2  |  Q   |                  | Q2C  |
---------------------------                  --------
| 12 |  2   |   2  |  Q   |                  | Q2A  |
---------------------------                  --------
| 14 |  1   |   3  |  R   |                  | R3A  |
---------------------------                  --------
| 17 |  2   |   3  |  R   |                  | R3A  |
---------------------------                  -------- 
```

**解释**

我有一个简单的数据库模式，如左图所示。我需要使用 SQL 根据值生成给定的名称列。我已经想出了如何`CONCAT(type,num)`，但我不知道如何生成正确的字母。我知道这样的事情在 SQL 中是可能的，因为我很久以前就做过类似的事情。

**编号方案** 对于每个用户，随着找到更多具有相同`num`和`type`的行，字母应该从 AZ 开始。永远不会超过 26 个，所以处理这不是问题

我想我可以首先生成数字（即 1、2、3 而不是 A、B、C），然后按照以下方式进行操作`SELECT 1 FROM [A..Z]`，我只是不确定如何在 MySQL 中完成此操作。

**更新**

```
If I can get from here:                   To:
---------------------------                  --------------
| id | user |  num | type |                  | name | seq |
---------------------------                  --------------
| 5  |  1   |   2  |  Q   |                  | Q2   |  1  |
---------------------------                  --------------
| 10 |  1   |   2  |  Q   |                  | Q2   |  2  |
---------------------------                  --------------
| 11 |  1   |   2  |  Q   |                  | Q2   |  3  |
---------------------------                  --------------
| 12 |  2   |   2  |  Q   |                  | Q2   |  1  |
---------------------------                  --------------
| 14 |  1   |   3  |  R   |                  | R3   |  1  |
---------------------------                  --------------
| 17 |  2   |   3  |  R   |                  | R3   |  1  |
---------------------------                  --------------
Then its just a simple matter of using CHAR() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:31:49.130

我想你正在寻找这样的东西：

```
SELECT
  id, user, num, type, seq
FROM (
SELECT
  sample.*,
  @row:= case when @lst_type=type
                   and @lst_user=user
                   and @lst_num=num then @row+1 else 65 end,
  CONCAT(type, num, CHAR(@row)) seq,
  @lst_type:=type,
  @lst_user:=user,
  @lst_num:=num
FROM sample, (select @lst_type:=null,
                     @lst_user:=null,
                     @lst_num:=null, 
                     @row:=65) r
ORDER BY id
) s 
```

请看[这里](http://sqlfiddle.com/#!2/3e457/1)的小提琴。

# sharepoint-2010 - 将 SAS 代码 .sas 文件更新到 Sharepoint 2010

> ID：14839092
> 
> 赞同：0
> 
> 时间：2013-02-12T18:18:09.070
> 
> 标签：sharepoint-2010, sas

我是 SharePoint 2010 网站的开发人员。用户希望将 SAS 9.3 中的 SAS 代码存储在 SharePoint 中。他们不会使用 SAS Enterprise。

我可以从 SAS 9.3 TS Level 1M0 写入（新添加）到 SharePoint 文件夹，但它不允许我更新（保存更改）到该文件夹​​。我在 sas 左下角看到的唯一错误是：ERROR: Save FAILED. 日志不显示任何操作。它在 SAS Enterprise 上运行良好，但正如我所说，他们不会使用它。

有没有人遇到过这个问题？如果是这样，你做了什么？我在互联网上搜索过，没有看到这个特殊问题。很多关于保存输出的评论，但没有关于保存 .sas 代码的评论。

谢谢

丽兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T11:26:28.910

我遇到了同样的问题并联系了 SAS。该问题与 SAS 增强编辑器在保存文件时使用的名称有关 - Sharepoint 不喜欢某些字符 ( [http://support.microsoft.com/kb/905231](http://support.microsoft.com/kb/905231) )。

SAS 9.3 中的解决方法是通过打开 BASE SAS 并选择查看 > 程序编辑器，然后尝试从那里保存程序来使用旧的程序编辑器。但是，该问题已在 SAS 9.4 中得到解决，因此增强型编辑器将使用较新的软件在 SharePoint 上保存文件。

# macos - 你如何在 OS X 上进行汇编编程

> ID：14839093
> 
> 赞同：1
> 
> 时间：2013-02-12T18:18:09.550
> 
> 标签：macos, assembly, compilation, osx-lion

我有最新版本的 OS X（Mountain Lion），并且正在尝试找到一种方法来用汇编语言（Intel x86，32 位）编写和构建程序。是否存在设置环境的简单指南？在搜索了 stackoverflow 和谷歌之后，我一直无法找到一种简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:01:19.213

我会推荐使用[Eclipse](http://www.eclipse.org/)。Xcode 也可用，但已逐渐远离通用 IDE。

# regex - wix 3.7 基于脚本/逻辑/代码设置属性

> ID：14839095
> 
> 赞同：1
> 
> 时间：2013-02-12T18:18:20.207
> 
> 标签：regex, string, properties, wix

我们开发了一个非常全面的 wix 安装程序 msi 包，其中包括一些 10 多个 c# 自定义操作。

我的问题是我还没有弄清楚如何以编程方式“设置”一个属性。

基本上我想做的是将现有属性解析为新属性。

这种解析在 c# 中会很好，但也可以在 RegEx、JavaScript 或 w/e 中完成。

但是，我无法通过我的 c# 自定义操作（“无法从非即时自定义操作访问会话详细信息”）执行此操作，并且据我所知，我只能从类型 51 自定义操作更改属性。但是类型 51 不能使用我的 c# 自定义操作。所以它的捕获22。

谁能给我一个关于如何在 wix 中执行以下操作的示例：使用一个属性的值执行正则表达式/字符串操作并使用结果设置另一个。

对我来说这似乎很明显，这应该是可能的，但是经过大量搜索后，我仍然一无所知。

任何帮助，将不胜感激。

* * *

编辑#1：使用 wix 工作 3 年后，我仍然觉得自己像个业余爱好者，但这里有：我认为发送属性并在自定义操作中使用它们的唯一方法是这种模式：

```
 <CustomAction Id="CA.SetCreateMessageQueueProperty"
                  Property="CA.CreateMessageQueue"
                  Value="MsmqData=.\Private$\[MYAPPLICATIONNAME]/ObservationReportingService.svc,Observation delivery queue"
                  Return="check"/>
    <CustomAction Id="CA.CreateMessageQueue" 
                  BinaryKey="BI.CA" 
                  DllEntry="CreateMessageQueue" 
                  Execute="deferred" 
                  Return="check"
                  Impersonate="no"/>
    <InstallExecuteSequence>
      <Custom Action="CA.SetCreateMessageQueueProperty"
              After="InstallFiles"/>
      <Custom Action="CA.CreateMessageQueue" After="CA.SetCreateMessageQueueProperty">
        <![CDATA[((&FE.Afs=3) AND NOT (!FE.Afs=3))]]>
      </Custom>
    </InstallExecuteSequence> 
```

* * *

在自定义动作 c# 程序集中：

```
[CustomAction]
        public static ActionResult CreateMessageQueue(Session session)
        {
            return session.DoCustomAction("CreateMessageQueue",
                () =>
                    {
                        string msmqData = session.ExtractString("MsmqData");

                        //create actual message queue
                            }
                        }
                    });
        } 
```

* * *

```
internal static ActionResult DoCustomAction(this Session session, string name, Action action)
        {
            session.Log("Begin " + name);
            session.Log("session.CustomActionData.Count:" + session.CustomActionData.Count);
            try
            {
                action.Invoke();
            }
            catch (Exception ex)
            {
                session.Log(string.Format("Exception: {0}\nInner Exception: {1}", ex, ex.InnerException));
                return ActionResult.Failure;
            }
            return ActionResult.Success;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:22:12.893

我认为您正在尝试在延迟自定义操作期间检索现有属性并将其分配给新属性。

```
<CustomAction Id="SetProperty" Return="check" Property="NameOfCustomActionYouAreUsingToRetrieveProperty" Value="[PROPERTY]"></CustomAction> 
```

由于`InstallExecuteSequence`无法访问安装程序属性中的延迟自定义操作，我们必须将该属性添加到`CustomActionData`.

我用 C++ 编写了我的自定义操作，但我会发布代码，您会想到将其更改为 C# 代码。

```
extern "C" UINT __stdcall NameOfCustomActionYouAreUsingToRetrieveProperty(MSIHANDLE hInstall)
{
HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
LPWSTR szValueBuf = NULL;

hr = WcaInitialize(hInstall, "NameOfCustomActionYouAreUsingToRetrieveProperty");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

hr = WcaGetProperty(L"CustomActionData",&szValueBuf);
ExitOnFailure(hr, "failed to get CustomActionData");

hr = MsiSetProperty(hInstall, "NEWPROPERTY",  szValueBuf);
ExitOnFailure(hr, "failed to set the new property");

LExit:
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:23:50.397

在 C# 中，您的代码将如下所示：

```
[CustomAction]
public static ActionResult MyCustomAction(Session session)
{
  string property = session["PROPERTYNAME"];
  session["PROPERTYNAME"] = "Look at me!";
  return ActionResult.Success;
} 
```

该[`session`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371675%28v=vs.85%29.aspx)对象有权访问安装数据库及其所有表。并且使用它的索引器，您可以获取和设置属性表中的任何属性。

您还需要一个描述 .NET 运行时的小型 .config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup>
    <supportedRuntime version="v2.0.50727"/>
  </startup>
</configuration> 
```

比使用and的[C++ 替代方案](http://wix.tramontana.co.hu/tutorial/events-and-actions/whats-not-in-the-book)干净得多。[`MsiGetProperty`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370134%28v=vs.85%29.aspx)[`MsiSetProperty`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370391%28v=vs.85%29.aspx)

希望这会有所帮助。[你可以在这个 WiX 教程](http://wix.tramontana.co.hu/tutorial)中找到我刚刚写的所有内容，尤其是[这个页面](http://wix.tramontana.co.hu/tutorial/events-and-actions/how-to-manage)。

# perl - Perl：无法使用 SSL 访问 Web 服务

> ID：14839098
> 
> 赞同：3
> 
> 时间：2013-02-12T18:18:28.703
> 
> 标签：perl, cpan, soaplite

这是我的第一个 Perl 脚本。我已经使用 CPAN 安装了 SOAP::Lite，它似乎一切正常。

我正在尝试访问一个简单的 HelloWorld .NET Web 服务。我收到一个似乎与 Perl 或 SOAP::Lite 无法验证 SSL 证书有关的错误。

虽然看起来它返回了 500 的代码，但我创建了一个能够很好地调用 Web 方法的 Java 客户端，所以我认为问题不在于 Web 服务端。

*谁能指出我如何让​​这个工作正确的方向？*

## 脚本：

```
#!/usr/bin/perl

use SOAP::Lite 'trace', 'debug';

$api_ns = "https://www.mydomain.com/edgedev/";
$api_url = "https://www.mydomain.com/edgedev/ws.asmx";
$action = "HelloWorld";

my $soap = SOAP::Lite
                -> readable(1)
                -> ns($api_ns, 'tns')
                -> proxy($api_url)
                -> on_action(sub { return "\"$action\""});

print $soap->HelloWorld()->result; 
```

## 结果

```
<soap:Envelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:tns="https://www.mydomain.com/edgedev/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <tns:HelloWorld xsi:nil="true" />
      </soap:Body>
</soap:Envelope>
SOAP::Transport::HTTP::Client::send_receive: 500 Can't connect to www.mydomain.com:443 (certificate verify failed)
Content-Type: text/plain
Client-Date: Tue, 12 Feb 2013 16:40:28 GMT
Client-Warning: Internal response

Can't connect to www.mydomain.com:443 (certificate verify failed)

You can disable hostname check by setting environment variable PERL_LWP_SSL_VERIFY_HOSTNAME=0

LWP::Protocol::https::Socket: SSL connect attempt failed with unknown errorerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed at /usr/lib/perl5/vendor_perl/5.10.0/LWP/Protocol/http.pm line 57.
500 Can't connect to www.mydomain.com:443 (certificate verify failed) at ./soaptest.pl line 15 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-09T20:51:20.073

以下是如何安全地进行这项工作，即不禁用 SSL 主机名检查。

如果您使用 CA 签名证书与公共系统通信，则需要将 LWP 指向您的发行版的根证书集合。在基于 Debian 的系统（Ubuntu 等）下，它保存在`/etc/ssl/certs/`.

```
BEGIN {
    $ENV{HTTPS_CA_DIR} = '/etc/ssl/certs'
} 
```

如果您使用自签名证书与自己的服务器通信，则可以在客户端上保存该证书的副本，并将脚本指向该特定文件。

```
BEGIN {
    $ENV{HTTPS_CA_FILE} = '/path/to/my/server-certificate.crt'
} 
```

您可以在运行脚本之前在环境中设置这些（例如，从您的 shell 中导出它们），或者您可以将设置直接应用到您的 UserAgent 对象。有关详细信息，请参阅[LWP::UserAgent 文档；](http://search.cpan.org/~mschilli/libwww-perl-6.08/lib/LWP/UserAgent.pm)搜索`ssl_opts`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-17T13:23:29.333

`$soap->{_transport}->{_proxy}->{ssl_opts}->{verify_hostname} = 0;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-01T19:15:07.437

刚刚找到这个帖子，一切都对我非常有用，谢谢！

我想添加我的“解决方案”，这是对以前的一个变体，以防它帮助其他人。

添加

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; 
```

绝对是关键。但是，这会导致发出一个**大**警告`IO::Socket::SLL`：

```
*******************************************************************
 Using the default of SSL_verify_mode of SSL_VERIFY_NONE for client
 is deprecated! Please set SSL_verify_mode to SSL_VERIFY_PEER
 together with SSL_ca_file|SSL_ca_path for verification.
 If you really don't want to verify the certificate and keep the
 connection open to Man-In-The-Middle attacks please set
 SSL_verify_mode explicitly to SSL_VERIFY_NONE in your application.
******************************************************************* 
```

摆脱该警告的方法是添加以下行：

```
use IO::Socket::SSL;
IO::Socket::SSL::set_defaults(SSL_verify_mode => "SSL_VERIFY_NONE"); 
```

除了原来的`$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}`，无论您使用什么客户端（`LWP::UserAgent`、`RPC::XML::Client`、`SOAP::Lite`等），它都应该可以工作。

希望对其他人有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T12:36:54.047

您需要告诉 LWP 不要进行主机名检查。对我来说，这只适用于使用环境变量，而不是通过在 SOAP::Lite 对象中设置选项：

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-08T09:16:24.037

在 perl v5.20.2 中，我需要两件事来禁用 ssl 证书验证：

在创建任何 SOAP 对象之前（我已将其放在顶部）

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; 
```

然后修改 SOAP 代理：

```
my $soap = SOAP::Lite
            -> readable(1)
            -> ns($api_ns, 'tns')
            -> proxy($api_url, ssl_opts => [ SSL_verify_mode => 0 ] )
            -> on_action(sub { return "\"$action\""}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T21:14:58.017

由于 SOAP::Lite 重复 LWP 调用，它应该可以使用

```
$soap->ssl_opts( verify_hostname => 0 ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-16T14:01:08.460

或者在调用 SOAP 方法之前添加你的代码：

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-08T13:54:57.543

男孩为我做了这项工作！我把它扔到 stubmaker.pl 和我的使用 stubmaker.pl 输出的脚本中。

```
IO::Socket::SSL::set_defaults(SSL_verify_mode => "SSL_VERIFY_NONE");
use SOAP::Lite +trace => qw( debug );

$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0; 
```

# php - 逗号为空的PHP字符串？

> ID：14839100
> 
> 赞同：0
> 
> 时间：2013-02-12T18:18:45.557
> 
> 标签：php, jquery, mysql, arrays, jquery-ui-selectable

我尝试从 REQUEST_PHP 中读取一个字符串，该字符串是一个包含逗号的字符串，用于分隔数组的值。我将列表中选定元素的索引值保存到数组中。我加入他们，然后使用 console.log 和一个警告框来确认值在那里。例如说它是一个包含 8 个项目和数字 1、2、4、6 的列表。console.log 显示 (1,2,4,6) 我使用 document.getElemenetById 并将值设置为 join(array) 的值，console.log 显示值正确但是当我去提交表单并打印 php结果在后续页面上，或将它们提交到 MySQL 数据库 所选项目列表的值是空白的。表单的其他方面可以通过 php 提交。已经搞砸了几个小时，并尝试了很多东西，任何帮助都将不胜感激。

这是相关代码

Javascript：

```
var testies= "";
$(function() {
    $( "#Testing1" ).selectable({
        stop: function() {
        var selectedNumbers = "";
        $( ".ui-selected", this ).each(function(i) {
            if(i != 0) {
                selectedNumbers += ",";
             }
             selectedNumbers += $(this).index()+1;           
           });
           console.log(selectedNumbers);
            var poop = [selectedNumbers];
            testies = poop.join();
            console.log(testies);
            document.getElementById("placeholder").value = testies;
         }

    }); 
});

function showAlert() {
  alert(placeholder.value);
}; 
```

HTML：

```
<div id="placeholder"></div>

<strong>&#149; Select Options? </strong> (select all that apply)
        <ol id="Testing1" class="multiclicklist">
            <li input type="checkbox" class="ui-state-default" name="testing2[]" class="checkbox" value="1">Opt 1</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="2">Opt 2</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="3">Opt 3</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="4">Opt 4</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="5">Opt 5</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="6">Opt 6</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="7">Opt 7</li>
            <li input type="checkbox" class="ui-state-default" name="testing2[]" value="8">Opt 8</li>
        </ol>

        <br>
        <input type="button" value="CheckValue" onclick="showAlert();"> 
```

PHP代码：

```
$active = trim($_REQUEST['placeholder']);
 print($active); 
```

我有点沮丧，所以非常欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:33:03.433

改变

```
<div id="placeholder"></div> 
```

到

```
<input id="placeholder" name="placeholder" /> 
```

假设您拥有适当的`<form>`.

# php - 从 postgre PDO 返回多行

> ID：14839101
> 
> 赞同：0
> 
> 时间：2013-02-12T18:18:46.620
> 
> 标签：php, pdo

这个 PHP postgreSQL PDO 语句没有返回任何结果。我预计会看到几行。我做错了什么？如何检索它们并将它们放入对象或数组中？

```
$sth = $dbh->prepare('SELECT * FROM address');
$sth->execute();

$result = $sth->fetch(PDO::FETCH_ASSOC);
while($row = $sth->fetch()) {  
    echo $row['StreetAddress1'] . "\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:20:32.990

考虑结果集是一个堆栈，每个 fetch() 调用都会弹出一个结果行。您在 while 循环之外调用了一次 fetch，然后显然丢弃了 $result。这意味着一行结果数据消失了。至于将它们放入对象/数组中，这取决于您。可以很简单：

```
$addresses[] = $row['StreetAddress1'] 
```

循环内。

* * *

任何一个

```
while($row = $sth->fetch()) {
   ...
}

-- or --

$rows = $sth->fetchAll();
foreach($rows as $row) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:26:36.427

`$result = $sth->fetchAll();`

`$result`将是一个包含所有结果的数组。

然后使用 a`foreach`循环。

[前锋](http://www.php.net/manual/en/control-structures.foreach.php)

# javascript - 运行条形码扫描仪时如何阻止表单提交

> ID：14839106
> 
> 赞同：8
> 
> 时间：2013-02-12T18:18:58.067
> 
> 标签：javascript, coldfusion

当使用条形码扫描仪将文本输入突出显示的字段时，我试图阻止表单提交。当我按下扫描仪上的按钮时，它会自动尝试使用表单中更高优先级的提交按钮进行提交。我尝试在 javascript 中使用忽略功能，但找不到扫描仪的键码值。有没有办法设置不同提交按钮的优先级而不必重新排列它们？这就是我在代码中设置按钮的方式：

```
 <li>
        <cfinput type="submit" name="add" value="Enter Package">
    <cfinput type="submit" name="search" value="Search">                
    <cfinput type="submit" name="reset" value="Reset">
</li>
    </ul>       
</td>
<td>                
        <center><div id="labelImageDiv">
        <img id="labelImage" src="" alt="label preview"/>
    </div>
<ul>
        <li>
           <label for="printersSelect" class="left">Printer:</label>
        <select id="printersSelect" class="right"></select>
        <button id="printButton">Print</button>
    </li>
    <li>
    <div class="packHead">Package Pickup</div>                          
        <label for="pickup" class="left">Scan Barcode:</label>
        <div class="right">
        <cfinput type="text" name="pickup">
    </div>
    </li>
    <li>
    <div id="pickButton">
        <cfinput type="submit" name="pkgPickup" value="PickUp">
    </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-09T21:04:05.580

到目前为止我找到的最佳解决方案

```
$(":input").keypress(function(event){
    if (event.which == '10' || event.which == '13') {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:15:19.397

我投票赞成存在溶解的答案，因为扫描仪*应该*是可配置的。

但是，一个非常简单的 javascript 解决方案是返回 false onSubmit，除非实际单击了提交按钮以允许提交表单。像这样的东西——

```
<script language="javascript">var p = false;</script>
<form method="post" onsubmit = "return(p)">
    <input type = "text" name = "text" />
    <input type = "submit" value = "submit" name = "submit" onClick = "javascript: p=true;" />
</form> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T19:02:49.093

大多数扫描仪允许您对作为扫描的一部分发送的字符进行编程。您通常可以在网上找到扫描仪的型号手册，下载它，然后扫描正确的编程代码以获得扫描以发送您想要的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T19:17:22.773

如果扫描仪正在输入文本框，请在隐藏提交按钮的情况下启动表单。只有在文本框有数据时才显示它。这是用 javascript 完成的，而不是 ColdFusion。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-11T15:26:46.227

只需添加这个 HTML 数字过滤器！

```
<input type="text" id="bcvalue" name="barcodedata" value = "" onkeypress="return (event.charCode > 47 && event.charCode < 58)"> 
```

非常适合我的 iPad 资产控制应用程序！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-04-06T08:03:54.720

将输入类型设置为*button*。扫描完成后将其更改为*提交。*

# arrays - 根据 scipy 中的逻辑变量或重采样变量返回数组中的随机变量

> ID：14839107
> 
> 赞同：2
> 
> 时间：2013-02-12T18:18:59.650
> 
> 标签：arrays, random, scipy, mc

我已经尝试过很多次搜索这些答案之一，但找不到我要找的东西。我确定这是相当基本的，我要么不知道如何用短语搜索我正在寻找的东西，要么以错误的方式进行。

使用 scipy 我想：

通过随机分布定义一个变量，并让它在每次调用时返回一个新值，例如：

```
x = np.random.normal(30,30/10)
x = #random number
x = #new random number 
```

最终目标是让这段代码（以及更多类似的代码）返回由数组 gamma 中每个位置的分布定义的 g1 和 g2 数字的随机变量。如果可行，我很乐意在 g1rand 和 g2rand 中查找随机值，但我也无法弄清楚如何使用循环填充伽马数组。最终目标是运行代码的 MC 模拟。提前致谢。

```
disc = 11j #number of intervals
depth = 50
q = 300 #number of random sampls
n = depth
interval_thickness =abs(n/(abs(disc)-1))
depth_array = np.r_[0:n:(disc)]
ld1 = 10.0
ld2 = 70.0
g1 = 120
g1rand = np.random.normal(g1,g1/10,q)
g2 = 60
g2rand = np.random.normal(g2,g2/10,q)
condlist = [depth_array <= 0,depth_array<=ld1, depth_array<=ld2]
choicelist = [0, g1, g2]
gamma = np.select(condlist, choicelist)
interval_weight=interval_thickness*gamma 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:17:45.260

我认为我不完全理解您在较长的代码中尝试做什么，但是如果您想一个一个地生成随机样本，您可以使用[`scipy.stats.norm`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html)：

```
>>> import scipy.stats
>>> x = scipy.stats.norm(loc=30, scale=30/10) # loc is mean, scale is stdev
>>> x.rvs() # return a single random sample from distribution
30.0640285320252
>>> x.rvs()
29.773804986818252
>>> x.rvs(5) # returns an array of 5 random samples from distribution
array([ 31.46684871,  28.5463796 ,  30.37591994,  30.50111085,  32.19189648])
>>> x.mean() # recover distribution parameters from x
30.0
>>> x.std()
3.0 
```

# python - Python写入文件

> ID：14839111
> 
> 赞同：1
> 
> 时间：2013-02-12T18:19:11.350
> 
> 标签：python, python-3.x, debian, urllib2

我在 debian 服务器上运行的一个小 python 脚本有一个小问题。

首先它应该做什么：
- 从服务器获取列表 -> 工作
- 转换为真实字符串列表 -> 工作
- 写入文件 -> 什么都不做...

已经尝试在 python 接口 (>>>) 中使用相同的代码，它会以应有的方式编写所有内容。
文件已经创建并获得了 chmod 777 。
即使不是偶然检查，该 scipt 的另一个实例正在运行，它锁定文件但什么都没有......

任何人都知道为什么它在启动时但在界面中不会写入文件？

现在这是脚本本身：

```
#!/usr/bin/env python

import urllib
import sys
import time
import re

exitNodes = []
readableNodes = []
class BlockTor():
    def getListFromWeb(myself):
        url = "https://www.dan.me.uk/torlist/"
        #url = "file:///E:/test.txt"

        try:
            for line in urllib.request.urlopen(url):
                exitNodes.append(str(line, encoding='utf8'))

            for node in exitNodes:
                readableNodes.append(re.sub('\\n', '', node))
            #print(exitNodes)
            #sys.exit()
        except:
            try:
                f = open("/var/log/torblocker.log", "a")
                #f = open("E:\\logfile.log", "a")
                f.write("[" + time.strftime("%a, %d %b %Y %H:%M") + "] Error while loading new tornodes")
                f.close()
            except:
                print("Can't write log")
                pass
            sys.exit()
            pass

    def buildList(myself):
        f = open("/etc/apache2/torlist/tor-ip.conf", "w")
        #f = open ("E:\\test-ips.conf", "w")
        f.write('<RequireAll>\n')
        f.write('   Require all granted\n')
        for line in readableNodes:
            f.write('   Require not ip ' + line + '\n')
        f.write('</RequireAll>')
        f.close()
        try:
            f = open("/var/log/torblocker.log", "a")
            #f = open("E:\\logfile.log", "a")
            f.write("[" + time.strftime("%a, %d %b %Y %H:%M") + "] Sucessfully updated tor blacklist")
            f.close()
        except:
            pass

    def torhandler(myself):
        BlockTor.getListFromWeb(myself)
        BlockTor.buildList(myself)

if __name__ == "__main__":
    asdf = BlockTor()
    BlockTor.torhandler(asdf) 
```

编辑：
忘了提 - 如果你想测试它要小心：这个服务器每 30 分钟只允许一个请求

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T18:26:11.467

要连接字符串，请使用`+`运算符。`&`是[按位与](http://en.wikipedia.org/wiki/Bitwise_AND#AND)- 用两个字符串调用它会导致`TypeError`：

```
>>> "[" & ""
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for &: 'str' and 'str' 
```

你的毯子`except`抑制了这个错误。代替

```
try:
    f = open("/var/log/torblocker.log", "a")
    #f = open("E:\\logfile.log", "a")
    f.write("[" & time.strftime("%a, %d %b %Y %H:%M") & "] Sucessfully updated tor blacklist")
    f.close() # ^                                     ^
except:
    pass 
```

和

```
with open("/var/log/torblocker.log", "a") as torf:
    torf.write("[" + time.strftime("%a, %d %b %Y %H:%M") + "] " +
               "Sucessfully updated tor blacklist") 
```

如果您想在无法写入文件时忽略异常，请用`try .. except IOError:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:25:41.003

```
f.write("[" & time.strftime("%a, %d %b %Y %H:%M") & "] Error while loading new tornodes") 
```

是一个`TypeError`。要连接字符串，请使用`+`，而不是`&`。在这里，您可以`TypeError`在裸露的`except`陈述中找到。这说明了为什么单纯`except`的陈述通常不是一个好主意。一般来说，只处理您期望的错误并知道如何正确处理。

您还可以使用字符串格式：

```
f.write('[{0}] Error while loading new tornodes'.format(time.strftime("%a, %d %b %Y %H:%M"))) 
```

# c# - 如何将值设置为图标？

> ID：14839113
> 
> 赞同：3
> 
> 时间：2013-02-12T18:19:22.527
> 
> 标签：c#, string, text, icons, minesweeper

我有个问题。首先，我将向您展示我正在制作的扫雷游戏中的一小段代码摘录。

```
lbl_grid[mineX, mineY].Text = "*"; 
```

现在，它的作用是在我的网格中设置一个地雷看起来像一个`*`.

我想要的是`lbl_grid[mineX, mineY].Text`被分配一个图标的值。这可能吗？

我相信我可能不得不使用文本以外的东西，因为图标不是文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:35:43.223

你是对的，你将不得不使用文本以外的东西。

一种选择是制作 PictureBox 的 2D 数组。

```
int rows = 3;
int cols = 4;

List<List<PictureBox>> pictures = new List<List<PictureBox>>();

for(int r = 0; r < rows; r++)
{
    List<PictureBox> pList = new List<PictureBox>();
    for(int c = 0; c < cols; c++)
    {
        //do any positioning you need to do here
        pList.Add(new PictureBox());
    }
    pictures.Add(pList);
} 
```

然后您可以访问和设置图像源。

```
pictures[rVal][cVal].Image = Image.FromFile("<file path>"); 
```

# android - 如何从 listView 项目中获取 TextView 值？

> ID：14839121
> 
> 赞同：9
> 
> 时间：2013-02-12T18:19:56.347
> 
> 标签：android

我试图在这里从不同的类似问题中得到答案，但没有得到任何答案。实际上，我正在尝试从任何列表视图项的多个文本视图中获取值。这是代码
ListView listView = getListView();

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int postion, long id) {               
        String contactId = ((TextView) findViewById(R.id.cid)).getText().toString();
        String contactName= ((TextView) findViewById(R.id.contactName)).getText().toString();
        String contactNo= ((TextView) findViewById(R.id.contactNo)).getText().toString();
        Intent i = new Intent(getApplicationContext(), editContactActivity.class);
        i.putExtra(TAG_ID, contactId );
        i.putExtra(TAG_NAME, contactName);
        i.putExtra(TAG_CONTACT_NO, contactNo);
        startActivityForResult(i, 100);     
    }   
}); 
```

我得到什么结果，我在 listview 中获得第一项（位置）的 textviews 值，或者我正在单击任何项​​目，但我在 listview 中获得第一项（位置）的 textviews 值，这是我如何获取值的代码在其他活动上

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_contact);

    btnSave = (Button) findViewById(R.id.btnSaveContact);
    btnDelete = (Button) findViewById(R.id.btnDeleteContact);

    Intent i = getIntent();
    cId = i.getStringExtra(TAG_CONTACT_ID);
    cNameTxt = i.getStringExtra(TAG_CONTACT_NAME);
    cNumberTxt = i.getStringExtra(TAG_CONTACT_NUMBER);

    //Log.d("Value of contact name", cNameTxt);
    //Log.d("Value of contact name", cNumberTxt);

    TextView contactIdTxtView = (TextView) findViewById(R.id.cid);
    cName = (EditText) findViewById(R.id.editCName);
    cNumber = (EditText) findViewById(R.id.editCNumber);

    cName.setText(cId);
    cNumber.setText(cNumberTxt);

} 
```

如果有人能提供详细帮助，我将不胜感激。感谢 Akmal Rasool

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-12T18:25:39.813

> 我在列表视图中获取第一项（位置）的文本视图值

每次使用时都告诉*它只*`findViewById()`查看这一行：

 *```
(TextView) view.findViewById(R.id.cid)
//Add this ^^^^^ 
```

* * *

全部一起：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int postion, long id) {
    String contactId = ((TextView) view.findViewById(R.id.cid)).getText().toString();
    //             Again use view  ^^^^^
    // Repeat this for contactName and contactNo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T22:03:06.963

要获取 textView 值，试试这个。

```
@Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            TextView text = (TextView)view.findViewById(R.id.correoEncuestador);
            String message= text.getText().toString();
            Toast.makeText(getApplication(), message,  Toast.LENGTH_LONG).show();
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-27T05:23:24.703

```
View parentView = (View) view.getParent();
    textview1 = ((TextView) parentView
            .findViewById(R.id.textview1)).getText().toString();

    textview2 = ((TextView) parentView
            .findViewById(R.id.textview2)).getText().toString();

    textview3 = ((TextView) parentView
            .findViewById(R.id.textview3)).getText().toString(); 
```*

# c++ - 为什么这个 C++ 程序不使用 100% CPU 而只使用 10%

> ID：14839123
> 
> 赞同：2
> 
> 时间：2013-02-12T18:20:11.023
> 
> 标签：c++, performance, cpu

这个程序没有使用所有的 cpu 电源。我期待它接管 cpu 并尽可能快地运行代码，但它最多只使用 10

```
#include <iostream>

using namespace std;

int main(void) {
    unsigned long long x = 600851475143;
    unsigned long long i = x-1;

    while(i <= x) {
            cout << "\r";
            cout << i;

            if((x % i) == 0) {
                    cout << "\n\n";
                    cout << i;

                    break;
            }

            i--;
    }

    system("pause");
} 
```

它最多只能达到 10%

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T18:23:02.693

速度可能受到输出设备速度的限制。如果将输出通过管道传输到磁盘上的文件，它将受到磁盘速度的限制。如果您只是写入控制台，它将受到控制台速度的限制。无论哪种方式，CPU 很少会成为限制。

编辑：由于有些人显然不太了解代码，也许最好简化一下。让我们通过省略`if`语句来简化循环，只留下：

```
unsigned long long x = 600851475143;
unsigned long long i = x-1;

while(i <= x) {
        cout << "\r";
        cout << i;
        i--;
} 
```

所以，它的作用是从 开始`600851475143`，倒数到 0，然后在`i`回绕到`std::numeric_limits<unsigned long long>::max()`（通常是 2 ^(64) -1）时停止。

现在，如果我们`if`重新添加语句，我们几乎可以忽略它控制的*主体*，但我们也确实会在每次迭代时发生余数运算。没有它，CPU 使用率几乎肯定会大大降低（尽管确切的数字可能在很大程度上取决于硬件——例如，如果您将输出写入磁盘，磁盘的持续带宽将是控制因素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:24:13.720

因为您正在通过 cout 进行阻塞 I/O 调用。删除 cout 语句，它会消耗更多的 cpu。

每当一个线程在 I/O 操作完成时被阻塞，包括等待控制台打印的 stdout，线程就处于阻塞状态。因此，在阻塞操作完成之前，该线程上没有 CPU 时间。标准输出、内核和控制台都提供了一点缓冲来防止 I/O 阻塞，但最终一个写得足够快的程序会超过所提供的缓冲。

笔记。在 Windows 上，这个程序（删除了 cout 打印语句）最多只能使用一个 CPU 核心。如果您使用的是四核，则它只会消耗 Windows 任务管理器上报告的 25% 的 CPU。

# html - 自举流体和静态容器

> ID：14839128
> 
> 赞同：3
> 
> 时间：2013-02-12T18:20:37.943
> 
> 标签：html, css, twitter-bootstrap

我正在尝试在单页引导布局中将流体容器与固定容器结合起来。

我想要的是（例如），有一个大图像作为一个英雄单位（但不是英雄单位）视口的 100% 宽度/高度，或者 3 列图像除以 100%，但在其他场合（在同一页面内）它将具有最大 1200px 的容器以及引导程序的网格元素。我计划将它与这个[http://untame.net/2013/01/how-to-design-a-single-page-scrolling-site-with-twitter-bootstrap/](http://untame.net/2013/01/how-to-design-a-single-page-scrolling-site-with-twitter-bootstrap/)结合起来制作一个垂直滚动的单页网站。

它可以实现吗？或者我应该为我的单个页面的所有“部分”进行自定义布局并应用媒体查询？

我会尝试使用正常的 3 列图像，`.span4`但`row-fluid`它增加了我不想要的排水沟。当我尝试移除排水沟时，跨度会变短。

我将尝试用一个工作示例来更新我的问题，该示例说明我将尝试做什么以及我目前所处的位置。

*** 更新 ***

这是我到目前为止所做的事情的完整页面结果 [http://jsfiddle.net/ditikos/ejMAQ/4/embedded/result/](http://jsfiddle.net/ditikos/ejMAQ/4/embedded/result/)

现在`.block`指的是将生成页面的 javascript 类，以便它们将是视口高度的最小值（在第二种情况下`.thumbnail`，它可以达到视口高度的 2 倍，因为也可能有一组 6 个缩略图在一个页）

*   我怎样才能将三列放置`.block`在当我进入电话视图时它会像普通网格一样堆叠的方式？
*   我实际上是在尝试用`.aThird`切片制作一个三列内容轮播。是否可以使用网格布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:26:03.923

如果您阅读 Bootstrap 的网站，您会发现：

*   基本流体网格 HTML**
*   “通过将 .row 更改为 .row-fluid 使任何行“流动”。列类保持完全相同，从而可以轻松地在固定网格和流动网格之间切换。

**编辑**：此答案对引导程序 3 无效

# vb.net - 在不下载的情况下从 url 设置图像框中的图像

> ID：14839135
> 
> 赞同：3
> 
> 时间：2013-02-12T18:21:14.503
> 
> 标签：vb.net, image, url

我正在 vb.net 中编写一个程序来收听广播。

如何制作它，以便我可以加载互联网图像，而无需将其永久下载到硬盘驱动器。因为如果我这样做

```
PictureBox1.BackgroundImage = "http://www.bbc.co.uk/radio1/chart/assets/a/aviciivsnickyromero/single/icouldbetheonenicktim/artwork/26948.jpg" 
```

但它会说“字符串”类型的错误 2 值无法转换为“System.Drawing.Image”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T18:24:17.007

将其下载到内存流中。

```
Dim tClient as WebClient = new WebClient

Dim tImage as Bitmap = Bitmap.FromStream(New MemoryStream(tClient.DownloadData(url)))

PictureBox1.Image = tImage 
```

# delphi - 错误：104 无法从 CRPE32.dll 获取版本信息 - GetCRPEVersion

> ID：14839140
> 
> 赞同：0
> 
> 时间：2013-02-12T18:21:26.847
> 
> 标签：delphi, crystal-reports-xi, delphi-xe3

我进行了搜索，找不到像这样的另一个问题。我在使用 Delphi XE2 和 Delphi XE3 时遇到此错误。我正在使用 Crystal Reports XI R1。我不确定为什么 Delphi 会关心版本，错误需要在 crpe32.dll 的初始化期间。我正在将 Delphi 2006 应用程序升级到 XE3。只需要很少的工作 - 我和成功之间的唯一障碍就是这个 DLL 错误。任何见解将不胜感激。许多TIA！

最好的问候，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T11:09:57.767

我有这个错误是因为在我的机器上我忘记安装 Crystal Reports。我最近安装了Win10，如果没有安装Crystal Reports，它给了我这个错误。希望能帮助到你！

# css - 删除罗盘中未使用的生成的 css 文件

> ID：14839143
> 
> 赞同：1
> 
> 时间：2013-02-12T18:21:35.503
> 
> 标签：css, sass, compass-sass

当您`compass compile`在重命名或删除文件后执行操作时，编译的文件实际上不会被删除。`compass clean`实际上也不会删除这些文件，因为它只担心清理当前正在使用的文件。话虽这么说，我也不想做类似`rm -rf /css/*`css 是我的编译文件夹之类的事情，因为这会完全吹走我的所有文件。

我想知道是否有一种方法可以删除“旧”编译文件而不触及当前正在使用的任何内容。

为什么？：如果你有很多 scss 文件，生成的文件或精灵表可能需要一些时间来生成。这还不错，但是如果您随后要获取生成的文件并创建它的其他派生文件（可能是因为您有一些较旧的构建过程或正在生成文档或其他内容），那么您需要完全重新生成所有文件. 吹走所有文件会强制重新生成；然而，仅删除不需要的文件然后重新编译非常快。

我们正在玩弄这样的想法，即通过执行以下操作仅偶尔删除所有文件：

```
compass clean 
rm -rf css/* 
compass compile 
```

但我们希望有更好的解决方案:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:05:03.900

用于删除 CSS 文件并生成新文件的 shell 脚本如下所示：

```
#!/bin/sh
compass clean
compass compile 
```

请注意，此特定脚本需要与您的项目位于同一目录中才能工作。我的 script-fu 很弱，但我确信它可以修改为在任何地方工作，而无需在每个项目中复制/粘贴它。

# android - 片段作为 Android 中的单例

> ID：14839152
> 
> 赞同：23
> 
> 时间：2013-02-12T18:21:53.083
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

**一般问题** 我可以将片段定义为单例吗？

**具体问题** 在我的应用程序中，我有一个“FragmentActivity”，其中一个`FragmentPager`有两个片段，`FragmentA`并且`FragmentB`.

我在`FragmentA`扩展`Fragment`类中将片段定义为单例：

```
private static instance = null;

public static FragmentA getInstance() {
    if (instance == null) {
        instance = new FragmentA();
    }   
    return instance;
}
private FragmentA() {} 
```

在我的`FragmentPagerAdapter`：

```
@Override
public Fragment getItem(int position) {
    switch(position){
    Fragment fragment = null;
    case 0:
        fragment = FragmentA.getInstance(); 
        break;
    case 1:
        fragment = FragmentB.getInstance(); 
        break;
    }
    return fragment;
} 
```

这就是我膨胀片段布局的方式：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    fragmentView = (RelativeLayout) inflater.inflate(R.layout.fragment_a_layout, container, false);
    return fragmentView;
} 
```

**我的问题：**

当我第一次启动我的应用程序时，一切正常。当我关闭我的应用程序然后重新启动它时，我没有看到两个片段。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T18:26:40.647

片段是应用程序的可重用组件。您不应该将它们用作单例，而应该实现[Fragment.SavedState](https://developer.android.com/reference/android/app/Fragment.SavedState.html)或 onSavedInstanceState。

```
public class YourFragment extends Fragment {
    // Blah blah blah you have a lot of other code in this fragment
    // but here is how to save state
    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("curChoice", mCurCheckPosition);
    }
    @Override
    public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // savedInstanceState will have whatever you left in the outState bundle above
    }
} 
```

# javascript - 内容超出 div 但没有滚动条

> ID：14839155
> 
> 赞同：1
> 
> 时间：2013-02-12T18:22:09.183
> 
> 标签：javascript, jquery, html, css

我正在使用 JQuery 将文本文件的内容加载到 div 中，但是当内容超出 div 时，不会出现滚动条。

HTML：

```
<!DOCTYPE html> 
<html lang="en"> 
 <head> 
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <title></title> 
    <link rel="stylesheet" type="text/css" href="CSS/common.css">
    <script src="JS/common.js"></script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  </head>
  <body>
    <nav>
      <ul id="tabs">
        <li><a href="#" id="tab1" name="#tabContent1" class="activeTab">Home</a></li>
        <li><a href="#" id="tab2" name="#tabContent2">History</a></li>
        <li><a href="#" id="tab3" name="#tabContent3">The Circuit</a></li>
        <li><a href="#" id="tab4" name="#tabContent4">Gallery</a></li> 
        <li><a href="#" id="tab5" name="#tabContent5">Further Reading</a></li>    
      </ul>
    </nav>
    <div id="content">
      <div id="tabContent1"></div>
      <div id="tabContent2"></div>
      <div id="tabContent3"></div>
      <div id="tabContent4"></div>
      <div id="tabContent5"></div>
    </div>
  </body>
</html> 
```

CSS：

```
body {
  background-color: #EEEEEE;
  font-family: Arial,Helvetica;
  font-size: small;
  height: 100%;
  margin: 100px auto 0;
  width: 100%;
}

#tabs {
  list-style: none outside none;
  margin: 0;
  overflow: hidden;
  padding: 0;
  position: relative;
  top: -98px;
  width: 100%;
}

#tabs li {
  float: left;
  margin: 0 -15px 0 0;

}
#tabs a {
  border-bottom: 30px solid #3D3D3D;
  border-right: 30px solid transparent;
  color: #FFFFFF;
  float: left;
  height: 0;
  line-height: 30px;
  opacity: 0.3;
  padding: 0 40px;
  position: relative;
  text-decoration: none;
  text-transform: uppercase;
}

#tabs a:hover {
  border-bottom-color: #2AC7E1;
  opacity: 1;
}

#content {
  background: none repeat scroll 0 0 #FFFFFF;
  border-top: 2px solid #3D3D3D;
  height: 100%;
  padding: 2em;
  position: fixed;
  top: 30px;
  width: 98%;
  overflow: auto;
}

.activeTab {
  border-bottom-color: #3D3D3D !important;
  opacity: 1 !important;
}

.img {
} 
```

查询：

```
$('a[name="#tabContent2"]').click(function () {
    $("#tab1").removeClass('activeTab');
    $("#tab3").removeClass('activeTab');
    $("#tab4").removeClass('activeTab');
    $("#tab5").removeClass('activeTab');
    $(this).addClass('activeTab');
    $("#tabContent2").load("external/test2.txt");
    $("#tabContent2").show();
    $("#tabContent1").hide();
    $("#tabContent3").hide();
    $("#tabContent4").hide();
    $("#tabContent5").hide();
  }); 
```

如何让滚动条出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:25:54.417

```
#tabs {
  overflow: scroll;
} 
```

`overflow`控制内容的隐藏方式。如果设置为`hidden`它将被隐藏，没有滚动条。您要`scroll`添加适当的滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:34:09.847

溢出是可见的，但只是被填充溢出：

```
#content {
  background: none repeat scroll 0 0 #FFFFFF;
  border-top: 2px solid #3D3D3D;
  height: 100%;
  padding: 2em 0 0 2em; /*<--change to this*/
  position: fixed;
  top: 30px;
  width: 98%;
  overflow: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:27:07.697

尝试使用著名的 micro clearfix 而不是`overflow: auto;`

```
/*The famous micro clearfix*/
.group:before,
.group:after,
.group:before,
.group:after {
        content: " ";
        display: table;
}

.group:after,
.group:after {
    clear: both;
}

.group,
.group {
    *zoom: 1;
} 
```

对于您的 jQuery，它可以更短，并且可以争论，更具可读性，如下所示：

```
$('a[name="#tabContent2"]').click(function () {
    $(this).parent().parent().find("a").removeClass("activeTab");
    $(this).addClass('activeTab');

    $("#content > div").hide();
    $("#tabContent2").load("external/test2.txt");
    $("#tabContent2").show();
}); 
```

# ms-access-2003 - ACCESS 2003：在更新之前检查记录是否存在，然后显示消息然后打开现有记录

> ID：14839160
> 
> 赞同：3
> 
> 时间：2013-02-12T18:22:25.377
> 
> 标签：ms-access-2003

现在工作了一段时间，我收到运行时错误 2501

在消息框出现并指出已找到重复项并单击“确定”后，我正在尝试提取记录。

我一直在修补 DoCmd.FindRecord、DoCmd.GoToRecord 和 DoCmd.OpenForm 方法，但无济于事。

任何帮助将不胜感激。

提前致谢。

```
Private Sub MRN_BeforeUpdate(Cancel As Integer)
Dim Answer As Variant
Answer = DLookup("[MRN]", "Requests Processed", "[MRN] = '" & Me.MRN & "'")
If Not IsNull(Answer) Then
MsgBox "Existing MRN found" & ": " & MRN.Text & vbCrLf & vbCrLf & "Please SEARCH and EDIT on EXISTING Record.", vbCritical + vbOKOnly + vbDefaultButton1, "EXISTING MRN FOUND"
Cancel = True
Me.MRN.Undo
Else:
End If
DoCmd.OpenForm "Requests Processed", , , Answer
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:36:50.937

在帮助主题中，该`OpenForm`方法的*WhereCondition*选项是“*一个字符串表达式，它是一个没有 WHERE 字样的有效 SQL WHERE 子句。* ”

试试`OpenForm`这个方法...

```
DoCmd.OpenForm "Requests Processed", , , "[MRN] = '" & Answer & "'" 
```

在我看来，这可能行得通。但是，您似乎可以对`DLookup` *Criteria*选项和`OpenForm` *WhereCondition*使用相同的字符串。如果这是真的，请创建一个字符串变量（例如*strWhere*）并在两个地方使用它。

# android - 由于“java.lang.IllegalAccessError”，检测运行失败

> ID：14839162
> 
> 赞同：16
> 
> 时间：2013-02-12T18:22:31.810
> 
> 标签：android, testing, intellij-idea

我现在正在为 Android 项目编写测试，只是不明白为什么这么痛苦！经过一整天的设置，我终于让它工作了，但是现在，在我编写了几个测试类之后 Intellij IDEA 代表：

```
Test failed to run to completion. Reason: 'Instrumentation run failed due to 'java.lang.IllegalAccessError''. Check device logcat for details
Test running failed: Instrumentation run failed due to 'java.lang.IllegalAccessError' 
```

我几分钟前运行的测试无法再运行了。考虑到我回滚到最近的提交，一切都很理想，我没有更改任何设置，我只是想知道为什么。

这是logcat所说的：

```
02-12 20:16:09.398: E/AndroidRuntime(4922): FATAL EXCEPTION: main
02-12 20:16:09.398: E/AndroidRuntime(4922): java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.actionbarsherlock.view.MenuInflater$MenuState.readItem(MenuInflater.java:327)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.actionbarsherlock.view.MenuInflater.parseMenu(MenuInflater.java:147)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.actionbarsherlock.view.MenuInflater.inflate(MenuInflater.java:97)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at <package>.ui.CheckPasswordActivity.onCreateOptionsMenu(CheckPasswordActivity.java:130)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.support.v4.app._ActionBarSherlockTrojanHorse.onCreatePanelMenu(_ActionBarSherlockTrojanHorse.java:45)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:556)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.actionbarsherlock.internal.ActionBarSherlockNative.dispatchCreateOptionsMenu(ActionBarSherlockNative.java:60)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.actionbarsherlock.app.SherlockFragmentActivity.onCreatePanelMenu(SherlockFragmentActivity.java:154)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:407)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.android.internal.policy.impl.PhoneWindow.doInvalidatePanelMenu(PhoneWindow.java:769)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:201)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.view.Choreographer.doFrame(Choreographer.java:531)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.os.Handler.handleCallback(Handler.java:725)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.os.Looper.loop(Looper.java:137)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at java.lang.reflect.Method.invoke(Method.java:511)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-12 20:16:09.398: E/AndroidRuntime(4922):     at dalvik.system.NativeStart.main(Native Method) 
```

虽然我什至没有碰过这个类，但它所指的 CheckPasswordActivity line:130 只是：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu_check_password, menu);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-13T07:43:47.767

我终于找到了解决办法。问题确实出在依赖项上，仍然不知道为什么它曾经工作然后突然被拒绝，但这是您的测试模块的依赖项应该是什么样子：

![在此处输入图像描述](../Images/ab9008f8a92289d8db31b0d4e3261713.png)

因此，总而言之，您需要确保为您的测试模块列出所有库和项目库，并标记为“已提供”，但 Robotium lib 除外，即“编译”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T01:52:03.390

就我而言，这是由于包含了重复的罐子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:00:01.910

根据[您的其他问题](https://stackoverflow.com/questions/14839843/setup-dependencies-in-intellij-idea-for-android-project)...我想我的设置与您有些相似...这几乎是我的依赖项的设置方式（将子项读取为依赖项）

*   动作条夏洛克
    *   安卓支持-v4
*   安卓模块
    *   动作条夏洛克
    *   安卓支持-v4
*   单元测试
    *   机器人
    *   安卓模块

所有依赖项都设置为“编译”

我使用源代码中的 ActionBarSherlock 并且该模块已选中“是库项目”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T12:51:48.213

我只是遇到了同样的问题，因为它解决了问题，所以尝试执行以下操作。

从您的测试项目中删除 android-support-v4 库（或任何为此加倍的库）。清理项目并重新构建它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-16T06:44:57.633

添加以下行：

```
manifestmerger.enabled=true 
```

到您的应用程序项目的 project.properties 文件。

**为我修复了:)** 有一个带有图书馆项目的项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-06T15:36:31.537

我有一些同样的错误。当我运行测试类并且一种方法会失败时（例如检查 textview 的文本，但文本与您检查的内容不同。），而不是显示正确的通常错误，即说出通常应该说的内容，它会显示非法访问错误并且整个测试类将被停止，而不运行其他测试。

我的解决方案是读取非法访问错误并查看/google 搜索缺少哪个依赖项，然后在 build.gradle 文件的依赖项部分添加此依赖项。

例如。它向我显示了这个错误：*java.lang.IllegalAccessError：非法类访问：'androidx.test.core.app.ListFuture' 试图访问'androidx.concurrent.futures.DirectExecutor'（'androidx.test.core.app 的声明.ListFuture' ...*等等等等。我从这篇文章和其他来源看到的内容与我的依赖关系有关，或者丢失了。

所以从我看到的错误中：*......试图访问**'androidx.concurrent.futures.DirectExecutor'** ......* 所以我谷歌搜索***了'androidx.concurrent.futures.DirectExecutor'依赖***。我找到了有关“并发”依赖的官方 android 网站，所以我将该依赖（实现“androidx.concurrent:concurrent-futures:1.1.0”）添加到我的 build.gradle（模块：MyAppName.app）中，在*依赖项*部分，我的问题解决了！

我在这里发布这个，对于除了操作之外的其他人有“非法访问错误”，甚至对于看到这个的操作。所以阅读错误信息。某处可能会说其他缺少的方法并谷歌搜索它。我知道它有点不同的错误，但它仍然是“非法访问错误”，并且会帮助其他有类似错误的人。

# php - 在 PHP 中使用 Imagick 调整 .eps 的大小并另存为 .jpg

> ID：14839166
> 
> 赞同：3
> 
> 时间：2013-02-12T18:22:46.457
> 
> 标签：php, jpeg, imagick, eps

我正在尝试使用 Imagick 调整 .eps 文件的大小并将其保存为 .jpeg，

我尝试过`resizeImage`, `scaleImage`, `setImageResolution`, 并且尝试过写入 .png，但结果总是很糟糕。我尝试将压缩质量设置为 100，并且尝试了各种 resizeImage 过滤器和模糊参数。

```
$imagick = new Imagick();
$imagick->readImage($file);

$imagick->resizeImage($width, $height, imagick::FILTER_CATROM, 1);

$imagick->setImageFormat('jpeg');

return $imagick->writeImage($name); 
```

有什么我想念的魔法吗？

编辑：我在某处读到过与 Ghostscript 相关的类似问题，我安装了 Ghostscript 端口。我如何验证它是否正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:47:40.617

作为记录，解决方案是通过外壳执行图像魔法：

例如

```
$cmd = escapeshellcmd("convert -resize '{$width}x{$height}' -density 300 -flatten {$file} -colorspace rgb {$jpeg}");
exec($cmd, $out, $return_var); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T06:10:15.620

您必须在读取文件*之前设置渲染分辨率：*

```
$imagick = new Imagick();
$imagick->setResolution(300, 300);
$imagick->readImage($file); 
```

如果结果仍然很糟糕，则意味着 ImageMagick 正在使用来自 EPS 的嵌入 TIFF 预览，而不是实际的 PostScript 数据。确保已安装 Ghostscript 并且可以按照[此答案](https://stackoverflow.com/a/32163666/476074)中的说明找到。

# ruby-on-rails - 将多个变量传递给部分

> ID：14839168
> 
> 赞同：3
> 
> 时间：2013-02-12T18:22:56.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在部分第 1 行出现错误：`undefined local variable or method 'level'`

我认为的代码：

```
<div id="comments">
    <% level = 0%>
    <% @comments.each do |comment| %>
      <%=render partial: 'comments/single_comment', locals: {level: level, comment: comment} %>
    <% end %>
    <% if 0 < level %>
    <% (level).times do %>
    </div>
    <% end %>
    <% end %>
  </div>
</div> 
```

和部分第一行：

```
<% if comment.level < level %>
  <% (level - comment.level).times do %>
  </div>
  <% end %>
<% end %> 
```

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:03:22.687

看起来这段代码应该可以工作（它不是那么好，但它应该可以工作）我认为你在代码的某些部分的其他地方使用你的部分（评论/single_comment）的问题是我们在没有'level local'的情况下看不到的： )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:30:24.457

似乎代码是正确的..尝试检查您是否有任何使用 single_comment 文件名的部分视图...您也可以使用集合代替循环

```
<%= render partial: 'comments/single_comment', collections: @comments, locals: { level: level } %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T09:14:42.367

您以错误的方式将参数传递给部分。将其更新为以下。

```
<%=render partial: 'comments/single_comment', locals: => {:level => level, :comment => comment} %> 
```

现在您可以按如下方式访问您的对象

```
<% if locals[:level] < level %>
  <% (level - locals[:level]).times do %>
  </div>
  <% end %>
<% end %> 
```

# git - 在 git 分支工作。我可以变基以保持分支更新吗？

> ID：14839169
> 
> 赞同：0
> 
> 时间：2013-02-12T18:23:02.900
> 
> 标签：git, git-svn

我的公司正在使用 Subversion，但我现在使用 git，所以我正在执行以下操作：

```
git svn clone -s http://svn/java/<project> <project>
cd <project>
git svn show-ignore > .gitignore
git checkout -b dev 
```

现在，如果我在我的 dev 分支上工作了一夜，我想看看是否有人更改了 svn 的主干，我可以发出一个

```
git svn rebase 
```

在我的开发分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:22:19.983

是的，您可以`git svn rebase`随心所欲地运行。它可以从 git 分支正常工作。

由于其他人看到您的代码的唯一方式很可能是通过 svn 服务器，因此您甚至不需要像使用 rebase 那样重写历史记录，因为提交 ID 不会在任何情况下都不能通过 svn。

# mysql - 使用 perl DBI 显示 CREATE PROCEDURE 不一致的结果

> ID：14839173
> 
> 赞同：3
> 
> 时间：2013-02-12T18:23:17.687
> 
> 标签：mysql, perl, plsql, dbi

将“SHOW CREATE PROCEDURE foo”管道输入 mysql 结果包括标记为“创建过程”的列中的完整过程定义。然而，

> $dbh->selectrow_hashref("SHOW CREATE PROCEDURE foo");

导致 $ref->{'Create Procedure'} 被取消定义，其他列被正确填充。两者都使用相同的凭据在同一台机器上执行。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:53:18.337

如果您连接的用户无权查看该过程，这就是您将看到的内容。尝试在命令行上使用相同的用户，我猜你会在 Create Procedure 列看到 NULL。

您似乎需要 mysql.proc 上的选择权限才能查看过程主体。

# android - 我想在eclipse中打开acra项目

> ID：14839174
> 
> 赞同：4
> 
> 时间：2013-02-12T18:23:20.960
> 
> 标签：android, eclipse, acra

我尝试将 acra [http://code.google.com/p/acra/source/checkout](http://code.google.com/p/acra/source/checkout)导入到 eclipse 但 eclipse 假设它是标准的 java 项目，所以 eclipse 显示导入错误

```
import android.app.Application;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.preference.PreferenceManager;
import android.util.Log; 
```

我的意思是任何与 Android 相关的导入都会导致错误，在 IDE 中打开 acra 源代码的理想方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:17:00.947

Eclipse 中的 Java 项目和 Android 项目是有区别的。该项目应该是一个 Android 项目，以便正确解析 Android 导入。首先确保你有：

1.  [Android SDK](http://developer.android.com/sdk/installing/index.html)安装在您的计算机上。
2.  安装在 Eclipse 中的[Android 插件。](http://developer.android.com/sdk/installing/installing-adt.html)

然后在 Eclipse 中进入菜单`File > Import`，选择`Android`然后`Existing Android code into workspace`

或者，您可以尝试肮脏的方式并将现有`.project`文件更改为类似的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
<name>ACRA</name>
<comment></comment>
<projects>
</projects>
<buildSpec>
    <buildCommand>
        <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>com.android.ide.eclipse.adt.ApkBuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
</buildSpec>
<natures>
    <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
</natures>
</projectDescription> 
```

# apache - 未触发 RewriteRule

> ID：14839177
> 
> 赞同：0
> 
> 时间：2013-02-12T18:23:26.423
> 
> 标签：apache, .htaccess, url-rewriting, apache2

我正在尝试改变

```
http://www.myhost.com/en/team/league-of-legends/3798/destiny 
```

到

```
http://lol.myhost.com/en/team/league-of-legends/3798/destiny 
```

我为我的 Apache2 服务器尝试了不同的组合，包括：

```
RewriteCond %{HTTP_HOST}    ^www\. [NC]
RewriteRule ^/(.*)/team/league-of-legends/(.*)/(.*)  http://lol.myhost.com/$1/team/league-of-legends/$2/$3 [R=301,L] 
```

但它似乎不起作用（我检查了一个 htaccess 测试仪）。 **请问我做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:40:12.687

通过启用 mod_rewrite 和 .htaccess`httpd.conf`然后将此代码放在您的域目录`.htaccess`下：`DOCUMENT_ROOT``www.myhost.com`

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.(myhost\.com)$ [NC]
RewriteRule ^[^/]+/team/league-of-legends/ http://lol.%1%{REQUEST_URI} [R=301,L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:12:20.637

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(?:www\.)?myhost\.com$ [NC]
RewriteCond %{REQUEST_URI}   ^/([^/]+)/team/league-of-legends/([^/]+)/([^/]+)/?  [NC]
RewriteRule .  http://lol.myhost.com/%1/team/league-of-legends/%2/%3    [R=301,L,NC] 
```

永久重定向

`http://www.myhost.com/en/team/league-of-legends/3798/destiny`或者

`http://myhost.com/en/team/league-of-legends/3798/destiny`

到：

`http://lol.myhost.com/en/team/league-of-legends/3798/destiny`

字符串`en`,`3798`和`destiny`假定是可变的，而`team`和 `league-of-legends`假定是固定的。

对于静默映射，`R=301`从`[R=301,L,NC]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:32:42.813

看看这是否有效。如果没有，请告诉我。

```
RewriteCond %{HTTP_HOST} ^www\. [NC]
RewriteRule ^([^\/]*)/team/league-of-legends/(.*)$  http://lol.myhost.com/$1/team/league-of-legends/$2 [R=301,L] 
```

# c# - 从 Linq 到 SQL 查询返回数据作为自定义数据类型

> ID：14839180
> 
> 赞同：1
> 
> 时间：2013-02-12T18:23:30.410
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我在 linq 中编写了一个查询，根据员工编号返回 10 个不同员工的信息。不过，我是使用 linq 工作的新手，但在退货时遇到了问题。我在这段代码中做错了什么？

```
 public class queryClass
    {
        private string firstName { get; set; }
        private string lastName { get; set; }
        private int employeeNo { get; set; }
        private string department { get; set; }
    }

    public static queryClass[] GetEmpData(int empID1, int empID2, int empID3, int empID4, int empID5, int empID6, int empID7, int empID8, int empID9, int empID10)
    {

        using(var context = new EmpInfoDataContext())
        {
            var query = from e in context.EmployeTable
                        join j in context.JobTitles on e.JobTitle equals j.JobTitle
                        where e.EmployeeNo == empID1
                        where e.EmployeeNo == empID2
                        where e.EmployeeNo == empID3
                        where e.EmployeeNo == empID4
                        where e.EmployeeNo == empID5
                        where e.EmployeeNo == empID6
                        where e.EmployeeNo == empID7
                        where e.EmployeeNo == empID8
                        where e.EmployeeNo == empID9
                        where e.EmployeeNo == empID10
                        select new  {e.FirstName, e.LastName, e.EmployeeNo, j.Department};

            return query.ToArray();
        }
    } 
```

在“return query.Toarray();”下，错误是“无法将表达式类型 '{FirstName:string, LastName:string, EmployeeNo:int, Department:string}[] 转换为返回类型 'Employeephotos.Models.HomeModel.queryClass []"

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:26:24.607

您的 where 子句应该是一个布尔表达式。

```
where e.EmployeeNo == empID1 || e.EmployeeNo == empID2 ... etc 
```

并确保您声明所选项目的类型

```
select new queryClass {
    firstName = e.FirstName,
    lastName = e.LastName,
    employeeNo = e.EmployeeNo,
    department = j.Department
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:35:00.377

`select new {e.FirstName, e.LastName, e.EmployeeNo, j.Department};`正在返回匿名类型

将其更改为返回 queryClass

```
select new  queryClass {firstName = e.FirstName, lastName =  e.LastName, employeeNo =e.EmployeeNo, department = j.Department}; 
```

# orchardcms - 为 Orchard CMS 上的每篇博客文章自动创建新的媒体文件夹？

> ID：14839182
> 
> 赞同：2
> 
> 时间：2013-02-12T18:23:34.250
> 
> 标签：orchardcms

当我将新图像上传到 Orchard CMS 时`/blog/Media/Default/BlogPost/blog/`，默认情况下所有媒体都会进入该文件夹。我可以让它默认为每个博客文章自动创建的文件夹吗？

# spring - 使用 facebook 登录并使用 oauth 2.0 对 REST api 调用进行身份验证

> ID：14839183
> 
> 赞同：5
> 
> 时间：2013-02-12T18:23:36.137
> 
> 标签：spring, rest, spring-security, oauth-2.0, spring-social

我在我的 api 中使用 spring 框架和 REST 架构。目前，我通过在每次通话中发送用户名和密码来验证我的 REST 通话。用户存储在我的数据库中。

现在我计划使用 oauth 2.0 来访问我的受保护资源，并且我还计划使用 Facebook 登录作为身份验证机制。

我已经阅读了 spring-security-oauth2 并在一个小例子中实现了它工作正常。

我已经阅读了 spring-social 并且已经实现了它并且可以访问 facebook api。

现在我只想知道如何使用 facebook 登录，然后使用 oauth 2.0 来保护我的资源。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:03:59.780

您不希望使用 Facebook 颁发的访问令牌来保护您自己的资源。Facebook 令牌代表您的应用程序、Facebook 和您的用户之间的三方协议。如果您想使用 OAuth 来保护您自己的资源，那么这些资源的使用者、您的服务器以及在您的服务器上拥有这些资源的用户之间的协议完全不同。

可以这样想：当您使用 Facebook 的 API 时，您的应用程序 (A) 是消费者，Facebook (FB) 是提供者，并且有一个普通用户 (U1) 将它们连接在一起。但是当有人在你的服务器上消费资源时，你的应用程序 (A) 是提供者的角色，其他一些应用程序 (X) 是消费者，并且有一个普通用户 (U2) 将它们连接在一起。可能是同一个人（例如，U1 == U2）同意这两种情况下的安排，但提供者和消费者的角色已经改变。

我想可能有一种方法可以让 Spring Security for OAuth 发布与 Facebook 发布的相同的访问令牌，但这并不是一个好主意。

# ios - iOS 如何以另一种语言显示日期，

> ID：14839186
> 
> 赞同：0
> 
> 时间：2013-02-12T18:23:46.450
> 
> 标签：ios

我最近一直在开发我们的应用程序使用的法语版本`NSLocalizedStrings`，到目前为止一切都很好。

但我现在的问题是日期。我经常在我的申请中显示日期，根据情况以不同的格式显示。

前任：

```
-Fri Feb 22, 2013
-Monday February 18, 2013
-Feb 18
-Dec 5, 2012 
```

问题是，法语中的日期不仅在月份名称方面有所不同，而且在月份、日期和年份的出现顺序上也有所不同。

前任：

```
-Dec 5, 2012 would be 5 Dec 2012
-Monday February 18, 2013 would be Lundi le 18 Fevrier 2013. 
```

我的`Localizable.string`文件中有单独的月/日名称，但是如何管理它的显示顺序。

我应该有一个 if 语句来检查当前的设备语言吗？

```
NSString *currentLanguage = [[NSLocale preferredLanguages] objectAtIndex:0];

if([currentLanguage isEqualToString:@"fr"])
{
    //Handle French logic
} 
```

这可能不是最好的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:29:16.830

您应该使用 NSDateFormatter 并将其提供给您想要的 NSLocale，如下所示：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"nl_NL"];
dateFormatter.dateFormat = @"EEEE d MMMM yyyy HH:mm"; 
```

'EEEE' 是星期几的全名，在我的例子中，它将以荷兰语显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:27:57.040

当您将日期转换为字符串时，为您的 NSDateFormatter 设置适当的语言环境，然后日期格式化程序将根据您的用户设置处理格式的所有细节：

```
NSDateFormatter *formatter = ... // Create and setup formatter
[formatter setLocale:[NSLocale autoupdatingCurrentLocale]]; 
// Now you can convert date to string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T18:30:02.713

这可能要容易得多：有一种东西叫做

```
NSDateFormatterShortStyle,
NSDateFormatterMediumStyle
NSDateFormatterLongStyle 
```

单独设置日期和时间组件：

```
[dateFormatter setDateStyle:NSDateFormatterMediumStyle]; 
[dateFormatter setTimeStyle:NSDateFormatterNoStyle]; 
```

如果用户的语言，Ios 将正确格式化。

进一步查看[数据格式化指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T18:30:15.607

使用`NSDateFormatter`. 例如：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];

NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:162000];

NSString *formattedDateString = [dateFormatter stringFromDate:date];
NSLog(@"formattedDateString: %@", formattedDateString); 
```

`NSDateFormatterMediumStyle`将根据用户的偏好（英语、法语等）自动格式化日期。

如果您需要自定义样式并且应用程序在 iOS 4.0+ 中运行，您可以在日期格式化程序中使用自定义模板：

```
NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"EdMMMyyy" options:0
                                          locale:[NSLocale currentLocale]];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:formatString];

NSString *todayString = [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"todayString: %@", todayString); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T20:58:48.827

`localizedStringFromDate:dateStyle:timeStyle:`在`NSDateFormatter`尝试使用 NSDateFormatter 和模板（来自[Unicode Technical Standard #35](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns) ）之前，我会尝试使用类函数：

例子：

```
[NSDateFormatter localizedStringFromDate:dateTime dateStyle:NSDateFormatterMediumStyle timeStyle:NSDateFormatterNoStyle]; 
```

您可以选择文档中详述的各种长度的不同日期和时间输出。

Apple 文档：[NSDateFormatter 本地化StringFromDate:dateStyle:timeStyle:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

# php - 自己的加密脚本

> ID：14839187
> 
> 赞同：0
> 
> 时间：2013-02-12T18:23:51.677
> 
> 标签：php, arrays, encryption, hash, passwords

```
<?php
   error_reporting(E_ALL ^ E_NOTICE);
   $string = "123456";
   $replace_from = array(
   "1",
   "2",
   "3",
   "4",
   "5",
   "6");
   $replace_to = array(
   "Al01",
   "Br20",
   "Ch03",
   "De40",
   "Ec05",
   "Fo60");
   $hashed = str_replace($string, $replace_from, $replace_to);
   echo "String: ". $string ."<br>";
   echo "Encrypted: ". $hashed ."<br>";
   echo "<br>";
   print_r($hashed);
?> 
```

我明白了

```
Encrypted: Array 
```

但我期待

```
Encrypted: Al01Br20Ch03De40Ec05Fo60 
```

如何获得哈希作为回报？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:26:15.947

你把参数的顺序[`str_replace()`](http://php.net/manual/en/function.str-replace.php)弄错了：

```
$hashed = str_replace( $replace_from, $replace_to, $string ); 
```

正确的顺序是

1.  （数组）要搜索的字符串
2.  （数组）替换
3.  （数组）字符串，其中要替换

# arrays - 从 Bash 函数返回数组

> ID：14839199
> 
> 赞同：6
> 
> 时间：2013-02-12T18:24:42.437
> 
> 标签：arrays, bash, function, shell, return-value

我正在制作一个 bash 脚本，但遇到了问题。所以假设我得到了这个

```
function create_some_array(){
  for i in 0 1 2 3 .. 10
  do
    a[i]=$i
  done
}

create_some_array
echo ${a[*]} 
```

有什么办法可以使这项工作？我已经搜索了很多，但没有发现任何工作。我认为制作`a[]`一个全局变量应该可以工作，但我找不到在我的代码中实际工作的东西。有没有办法将数组从函数返回到主程序？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:29:23.250

如所述，这可以正常工作。它在您的实际代码中不起作用的最可能原因是您碰巧在子外壳中运行它：

```
cat textfile | create_some_array
echo ${a[*]} 
```

不起作用，因为管道中的每个元素都在子shell中运行，并且

```
myvalue=$(create_some_array)
echo ${a[*]} 
```

不起作用，因为命令扩展发生在子shell中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-23T16:04:35.243

当数组中有空格时，这将无法按预期工作：

```
function create_some_array() {
    local -a a=()
    for i in $(seq $1 $2); do
        a[i]="$i $[$i*$i]"
    done
    echo ${a[@]}
} 
```

更糟糕的是：如果您尝试从外部“a”获取数组索引，结果是一个标量：

```
echo ${!a[@]} 
```

即使分配为数组也无济于事，因为可能的引用自然会被回声线删除，并且无法操纵评估顺序以逃避引用：尝试

```
function create_some_array() {
...
    echo "${a[@]}"
}

a=($(create_some_array 0 10))
echo ${!a[@]} 
```

尽管如此， printf 似乎也无济于事：

```
function create_some_array() {
...
    printf " \"%s\"" "${a[@]}"
} 
```

一方面似乎产生了正确的输出：

```
$ create_some_array 0 3; echo
 "0 0" "1 1" "2 4" "3 9" 
```

但分配对另一个不起作用：

```
$ b=($(create_some_array 0 3))
$ echo ${!b[@]}
0 1 2 3 4 5 6 7 
```

所以我的最后一个技巧是按如下方式进行分配：

```
$ eval b=("$(create_some_array 0 3)")
$ echo -e "${!b[@]}\n${b[3]}"
0 1 2 3
3 9 
```

塔塔！

PS： printf "%q " "${a[@]}" 也可以正常工作...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-07T19:34:15.233

您可以将数组设为函数的本地数组，然后将其返回：

```
function create_some_array(){
    local -a a=()
    for i in $(seq $1 $2); do
        a[i]=$i
    done
    echo ${a[@]}
}

declare -a a=()

a=$(create_some_array 0 10)

for i in ${a[@]}; do
   echo "i = " $i
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-24T09:49:59.827

嗨，这是我的解决方案：

```
show(){
    local array=()
    array+=("hi")
    array+=("everything")
    array+=("well?")
    echo "${array[@]}"
}

for e in $(show);do
    echo $e
done 
```

试试这个代码：[https ://www.tutorialspoint.com/execute_bash_online.php](https://www.tutorialspoint.com/execute_bash_online.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T15:49:26.143

这两种方法都对我有用`sh`和`bash`：

```
arr1=("192.168.3.4" "192.168.3.4" "192.168.3.3")

strArr=$(removeDupes arr1) # strArr is a string
for item in $strArr; do arr2+=("$item"); done # convert it to an array
len2=${#arr2[@]} # get array length
echo "${len2}" # echo length

eval arr3=("$(removeDupes arr1)") # shellcheck does not like this line and won't suppress it but it works
len3=${#arr3[@]} # get array length
echo "${len3}" # echo length 
```

顺便说一句，removeDupes 函数如下所示：

```
removeDupes() {
  arg="$1[@]"
  arr=("${!arg}")
  len=${#arr[@]}
  resultArr=()
  # some array manipulation here
  echo "${resultArr[@]}"
} 
```

此答案基于但更好地解释和简化了@Hans 和@didierc 的答案

# go - Go：在 hello world 中导入错误

> ID：14839205
> 
> 赞同：1
> 
> 时间：2013-02-12T18:24:54.050
> 
> 标签：go

我的测试程序`test.go`：

```
package main

import "fmt"
func main() {
  fmt.Printf("Hello\n")
} 
```

运行这个`go run test.go`以错误结束：

```
# io
pack: cannot open $WORK/io/_obj/_go_.6
# strconv
pack: cannot open $WORK/strconv/_obj/_go_.6 
```

环境：

```
go version devel +715674f61ae8 Tue Jan 29 13:34:18 2013 -0800 linux/amd64

GOARCH="amd64"
GOBIN=""
GOCHAR="6"
GOEXE=""
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread"
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/usr/local/google/home/igord/incub/web"
GOROOT="/opt/go"
GOTOOLDIR="/opt/go/pkg/tool/linux_amd64"
CGO_ENABLED="1" 
```

但我从go 网站上的（精选）*RELEASE 1.0.3下载了这个版本！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:36:48.617

由各种评论解决，但记录在案：将 Go 的二进制分发安装到默认位置以外的位置需要设置`$GOROOT`和`$GOPATH`正确。

*   [入门：安装 Go 工具](http://golang.org/doc/install#install)
*   相关：[GOPATH 和 GOROOT 的值应该是什么？](https://stackoverflow.com/questions/7970390/what-should-be-the-values-of-gopath-and-goroot)

# c# - IsolatedStorageFileStream 抛出“IsolatedStorageExeption 未处理”

> ID：14839211
> 
> 赞同：0
> 
> 时间：2013-02-12T18:25:15.147
> 
> 标签：c#, windows-phone-7.1, text-files, xna-4.0, isolatedstorage

基本上我正在编写代码，在隔离存储中创建一个新文件，我确定我正确地关闭了流，但肯定有一些东西丢失了，你能看看它以确保我没有丢失有什么明显的吗？

这是我的保存函数，它是引发错误的地方，一旦用户输入他/她的名字，就会在游戏结束时调用它：

```
public void SaveHighScores(string NewName, int NewScore)
{
    SortHighScores(NewName, NewScore);

    IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
    try
    {
        using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("HighScores.txt", FileMode.CreateNew, isoStore))
        {
            using (StreamWriter writer = new StreamWriter(isoStream))
            {
                for (int i = 0; i < 5; i++)
                {
                    writer.WriteLine(MyScores[i].Name);
                    writer.WriteLine(MyScores[i].Score);
                }
                writer.Close();
            }
            isoStream.Close();
        }
    }
    catch (IsolatedStorageException e)
    {
        throw e; // "IsolatedStorageException was unhandled" error now occurs here
    }
} 
```

这是我的读取函数，它在初始化期间在游戏开始时调用一次：

```
public void ReadHighScores()
{
    IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();

    if (isoStore.FileExists("HighScores.txt"))
    {
        try
        {
            using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("HighScores.txt", FileMode.Open, isoStore))
            {
                using (StreamReader reader = new StreamReader(isoStream))
                {
                    int i = 0;
                    while (!reader.EndOfStream)
                    {
                        MyScores[i].Name = reader.ReadLine();
                        string scoreString = reader.ReadLine();
                        MyScores[i].Score = Convert.ToInt32(scoreString);
                        i++;
                    }
                    reader.Close();
                }
                isoStream.Close();
            }
        }
        catch (IsolatedStorageException e)
        {
            throw e;
        }
    }
    else
    {
        if (!failedRead)
        {
            failedRead = true;
            ReadHighScores();
        }
    }
} 
```

任何人都可以对此有所了解吗？

[编辑]

好的，由于某种原因，这现在可以在我第一次在全新安装的应用程序上调用保存游戏功能时起作用，但是下次我玩或重新启动游戏并再次玩时，它会在尝试保存时崩溃，这是奇怪，`FileMode.CreateNew`可能是我哪里出错了？

[编辑]

是的，`FileMode.CreateNew`当文件已经存在时会抛出异常，所以我`isoStore.DeleteFile("HighScores.txt")`在创建新文件之前添加了，现在像梦一样工作:)

[解决了]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:58:07.897

`FileMode.CreateNew`当文件已经存在时抛出异常，因此您必须`isoStore.DeleteFile(string FileName)`在创建新文件之前调用，或者如果您绝对不需要使用`FileMode.CreateNew`use`FileMode.Create`来代替

# php - 动态数组有问题

> ID：14839212
> 
> 赞同：0
> 
> 时间：2013-02-12T18:25:15.283
> 
> 标签：php, javascript, jquery, arrays

这是生成数组并将其发布到我的后端 API 的代码。在后端，我将 $_POST 存储在 $page['body'] 和 print_r($page) 中，以尝试测试以确保我发送的数据正确显示并且格式正确。下面是结果。JavaScript 和我不是朋友，因此非常感谢任何修复数组的指针/提示。

如果您查看 [body] 索引中的响应，JavaScript 传递的数据在那里显示为“未定义”。我不确定是什么原因造成的。

**要求**

```
$('#find_carriers').click(function(){

        var data = new Array();

        data.push( { 'general': {
                    'shipper': $('#shipper_zip').val(),
                    'consignee': $('#consignee_zip').val(),
                    'shipment_type': $('#direction').val(),
                    'total_weight': $('#total_weight').val()
                }
            }
        );

        $('#accessorials').find('input:checkbox:checked').each(function(acc_index){

            data.push( {'accessorials': {acc_index : $(this).val() } } );

        });

        $('#units').find('table.unit').each(function(unit_index){

            data.push( {'units': { unit_index : {
                            'num_of': $(this).find('.unit_num_of').text(),
                            'type': $(this).find('.unit_type').text(),
                            'weight': $(this).find('.unit_weight').text()
                        }
                    }
                }
            );

            $(this).find('tbody.products tr').each(function(product_index){

                data.push( {'products': { product_index : {
                                'pieces': $(this).find('td.pieces').text(),
                                'weight': $(this).find('td.weight').text(),
                                'class': $(this).find('td.class').text()
                            }
                        }
                    }

                );

            });

        });

        $.post('index.php?p=api&r=text&c=ctsi&m=lcc', data, function(resp){
            alert(resp);
        });

        return false;

    }); 
```

**回复**

```
Array
(
  [user] => Array
    (
        [id] => 33
        [name] => user
        [authenticated] => 1
        [level] => user
    )

[title] => 
[body] => Array
    (
        [undefined] => 
    )

[message] => Array
    (
    ) 
```

)

**PHP**

```
public function lcc($data) {

    global $page;

    if($page['user']['level'] != "user") {

        $this->errorState = 1;
        $this->errorMessage = "Access denied.";

        return FALSE;

    }

    $page['body'] = $_POST;

} 
```

**处理转储的 PHP**

```
 case 'text':

    print_r($page);

break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:05:52.020

将 JavaScript 更改为以下工作：

```
$('#find_carriers').click(function(){

    var data = new Object();

    data.general = {
        'shipper': $('#shipper_zip').val(),
        'consignee': $('#consignee_zip').val(),
        'shipment_type': $('#direction').val(),
        'total_weight': $('#total_weight').text()
    };

    data.accessorials = [];

    $('#accessorials').find('input:checkbox:checked').each(function(acc_index){

        data.accessorials.push($(this).val());

    });

    alert('hello')

    data.units = [];
    data.products = [];

    $('#units').find('table.unit').each(function(unit_index){

        data.units.push({
            'num_of': $(this).find('.unit_num_of').text(),
            'type': $(this).find('.unit_type').text(),
            'weight': $(this).find('.unit_weight').text()
        });

        $(this).find('tbody.products tr').each(function(product_index){

            data.products.push({
                'pieces': $(this).find('td.pieces').text(),
                'weight': $(this).find('td.weight').text(),
                'class': $(this).find('td.class').text()
            });

        });

    });

    $.post('index.php?p=api&r=text&c=ctsi&m=lcc', data, function(resp){
        alert(resp);
    });

    return false;

}); 
```

**结果**

```
Array
(
[user] => Array
    (
        [id] => 33
        [name] => user
        [authenticated] => 1
        [level] => user
    )

[title] => 
[body] => Array
    (
        [general] => Array
            (
                [shipper] => 
                [consignee] => 
                [shipment_type] => Outbound/Prepaid
                [total_weight] => 2
            )

        [accessorials] => Array
            (
                [0] => 17
                [1] => 19
            )

        [units] => Array
            (
                [0] => Array
                    (
                        [num_of] => 1
                        [type] => Bobs
                        [weight] => 1
                    )

                [1] => Array
                    (
                        [num_of] => 1
                        [type] => Bobs
                        [weight] => 1
                    )

            )

        [products] => Array
            (
                [0] => Array
                    (
                        [pieces] => 1
                        [weight] => 1
                        [class] => 
                    )

                [1] => Array
                    (
                        [pieces] => 1
                        [weight] => 1
                        [class] => 
                    )

                [2] => Array
                    (
                        [pieces] => 1
                        [weight] => 1
                        [class] => 
                    )

            )

    )

[message] => Array
    (
    )

) 
```

# c# - 从对象外部设置属性值

> ID：14839223
> 
> 赞同：0
> 
> 时间：2013-02-12T18:25:45.530
> 
> 标签：c#

在我们的项目中，我们使用城堡容器来解决依赖关系。基本上，我们为执行不同的任务提供肥皂服务。

```
 public interface IServiceA
   {
      public ServiceResponse Process(ServiceRequest request);
   }

   public class ServiceA : IServiceA
   {
      public ServiceResponse Process(ServiceRequest request)
     {
         /////process stuff
     }
   }

    public interface IServiceB
   {
      public ServiceResponse ReProcess(ServiceRequest request);
   }

   public class ServiceB : IServiceB
   {
      private IServiceA _svcA;
      public ServiceB ()
      {
        _svcA= Container.Get<IServiceA>(); 
      }

     public ServiceResponse ReProcess(ServiceRequest request)
     {
        ////stuff
        _svcA.Process(new ServiceRequest()); 
     }
   } 
```

我可以重用 svcA 的 process 方法以避免臃肿的重复代码，但为此我需要在调用它的 process 方法时告诉 svcA，该调用来自 svcB 的 Reprocess 方法，以便 svcA 的 process 方法可以查看就像是

```
public ServiceResponse Process(ServiceRequest request)\
{
   if (calledFromSvcB)
   {
    //do stuff
   }
   //process
} 
```

限制是我不能修改合同，这意味着 serviceA 提供的方法或其类型的签名。

我想出的唯一想法是：

```
 public class ServiceA : IServiceA
       {
         public bool IsCalledFromSvcB {get; set;} 
         public ServiceResponse Process(ServiceRequest request)
         {
             /////process stuff
         }
       }
 public class ServiceB : IServiceB
   {
      private IServiceA _svcA;
      public ServiceB ()
      {
        _svcA= Container.Get<IServiceA>(); 
      }

     public ServiceResponse ReProcess(ServiceRequest request)
     {
        _svcA.GetType().GetProperty("IsCalledFromSvcB ").SetValue(this, true);
        ////stuff
        _svcA.Process(new ServiceRequest()); 
     }
   }
which is really ugly. Any other ideas to inject this? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:38:08.573

如果您可以同时处理多个请求，则在内部服务上设置属性或字段将不起作用。

第二个界面可能是一个更好的主意。就像是：

```
internal interface IServiceAInternal
{
    ServiceResponse ProcessFromServiceB(ServiceRequest request);
}

public class ServiceA : IServiceA, IServiceAInternal
{
    public ServiceResponse Process(ServiceRequest request)
    {
        return ProcessCore(request, false);
    }

    ServiceResponse IServiceAInternal.ProcessFromServiceB(ServiceRequest request)
    {
        return ProcessCore(request, true);
    }

    private ServiceResponse ProcessCore(ServiceRequest request, bool calledFromServiceB)
    {
        ...
    }
}

public class ServiceB : IServiceB
{
    private readonly IServiceAInternal _serviceA;

    public ServiceB()
    {
        _serviceA = Container.Get<IServiceAInternal>();
    }

    public ServiceResponse ReProcess(ServiceRequest request)
    {
        return _serviceA.ProcessFromServiceB(request);
    }
} 
```

# c++ - Maya MFnPlugin::registerUI 调用 Python 而不是 MEL 脚本

> ID：14839226
> 
> 赞同：0
> 
> 时间：2013-02-12T18:26:01.593
> 
> 标签：c++, python, maya, mel

我有一个 C++ Maya 插件。加载后，它会自动调用 MEL 程序来创建 GUI：

```
 status = plugin.registerUI("LoadGUI", "UnloadGUI");CHECK_STATUS(status); 
```

但是，registerUI 似乎仅可用于 MEL 程序。

**我怎么能为 Python 做类似的事情？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:34:57.067

让 mel 命令调用您的 python 命令。

# d3.js - 如何在树布局中删除单个子节点

> ID：14839232
> 
> 赞同：0
> 
> 时间：2013-02-12T18:26:12.660
> 
> 标签：d3.js

这是网球抽签，我需要能够再见，所以大多数父母都有两个孩子，即。每场比赛的获胜者都会通过，但在某些情况下会轮空，因此只有一个孩子。请参阅此处作为示例，其中一些父匹配项没有子项，而有些匹配项有一个：[http ://www.irtpa.com/index.php/realtennis/ladder/1246](http://www.irtpa.com/index.php/realtennis/ladder/1246)

我认为这个答案没有帮助：[How to remove node on tree layout D3.js?](https://stackoverflow.com/questions/13636240/how-to-remove-node-on-tree-layout-d3-js/13641135#13641135)

因为它假设节点的所有子节点都被隐藏/删除。

根据上面的stackoverflow答案，我已经走了这么远，但我的大脑看不到删除/隐藏孩子的解决方案：

```
function check_children(data, parent) {
// recurse through array and toggle/hide any Match Byes

  if (typeof data.data != "undefined") {
    if (data.data.bye == "byeM") {
        toggle(parent);
    }
  }

  if (data.children) {
    check_children(data.children[0], data);
    check_children(data.children[1], data);
  }

}

function toggle(d) {
    if (d.children) {
        d._children = d.children;
        d.children = null;
    } else {
        d.children = d._children;
        d._children = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:17:58.567

如果你想删除你的“再见”孩子，我可能会在递归之前进行测试。所以像：

```
function removeByeChildren(parent) {
  if(!parent.children)
    return;

  var i = 0;
  while(i < parent.children.length) {
    var data = parent.children[i].data;
    if (typeof data != "undefined" && data.bye == "byeM") {
      // remove child - could save it in _children if you wanted to ever put it back
      var child = parent.children.splice(i,1);
      // length of child list reduced, i points to the next child
    }
    else {
      // not a bye - recurse
      removeByeChildren(parent.children[i]);
      // all the child's bye's are removed so go to the next child
      i++;
    }
  }
} 
```

[你可以在这里](http://jsfiddle.net/superboggly/6pSFC/)玩。这个想法是检查每个孩子是否是再见。如果是，我们将其从列表中删除，如果不是，我们递归并删除所有后代子再见。

# ios - iOS上使用内存监视器的虚拟内存消耗和真实内存之间的区别

> ID：14839239
> 
> 赞同：6
> 
> 时间：2013-02-12T18:26:55.807
> 
> 标签：ios, memory-management, instruments, virtual-memory

我在我的应用程序中遇到了一个问题。到目前为止，我一直在我的 iPad 3 上进行测试，偶尔在我的 iPad 1 上进行检查以确保一切正常。

我在我的应用程序中播放 UIImageView 动画，它在退出之前一直退出，只有“收到内存警告”消息。

我一直在仪器中使用对象分配工具，但据此，我的内存使用率很低。因此，经过一番研究后，我看到了 Larson 先生的这篇文章：[https ://stackoverflow.com/a/5627221/329900](https://stackoverflow.com/a/5627221/329900)

现在我使用的是内存监视器工具。但是，我不明白我为什么要辞职。第一代。iPad 有 256MB 的内存。现在我知道我不能使用所有这些......有人说你不应该使用超过 100MB。

那是真正的内存，还是虚拟内存……或者是某种组合？我的真实内存始终在 20 - 25MB 之间，但虚拟内存在崩溃时约为 190 - 205MB。

这是一个屏幕截图：![在此处输入图像描述](../Images/4e871a1076280ece5fc005e6a77692ed.png)

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:06:03.257

在[WWDC 2012 Session Videos](https://developer.apple.com/videos/wwdc/2012/)页面中搜索*iOS App Performance: Memory*找到的 WWDC (Session 242) 视频会让你更好地理解 VM 和 real memory 的区别。

但这里有一个快速概述： 指针 Range = 2^32 = 4GB 这比任何设备上的物理内存都大（苹果已经发货）。这是通过占用所有可用空间并将其分成 4kb 块来完成的。并非您的应用程序可以访问的所有内存都同时在物理内存中。这些 4kb 的块是调用页面。您的分配被分割出更大的虚拟内存块。然后这些虚拟内存对象被映射到物理内存。

# python - 传递给 django 视图函数的 HttpRequest 元数据是什么

> ID：14839242
> 
> 赞同：0
> 
> 时间：2013-02-12T18:27:11.463
> 
> 标签：python, django, http, django-views, httprequest

django 文档指出：

> 当一个页面被请求时，Django 会创建一个 HttpRequest 对象，其中包含有关请求的元数据。然后 Django 加载适当的视图，将 HttpRequest 作为第一个参数传递给视图函数。每个视图负责返回一个 HttpResponse 对象。

例子：

```
from django.http import HttpResponse
import datetime

def current_datetime(request):
    now = datetime.datetime.now()
    html = "<html><body>It is now %s.</body></html>" % now
    return HttpResponse(html) 
```

每个视图函数都将一个 HttpRequest 对象作为其第一个参数，通常命名为 request。

请求参数保存什么样的元数据并在调用时传递给视图函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:30:52.837

看看[文档](https://docs.djangoproject.com/en/dev/ref/request-response/)。

它包含[http 请求](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)的各种属性的 python 表示。

例子 -

```
request.path # the url (excluding domain)
request.method # eg GET or POST
request.cookies
request.user # A django.contrib.auth.models.User object representing the currently logged-in user
request.META # A standard Python dictionary containing all available HTTP headers 
```

# javascript - 为什么 Safari 对在澳大利亚悉尼时区的 DST 开始的 Date.getDay() 感到困惑？

> ID：14839244
> 
> 赞同：17
> 
> 时间：2013-02-12T18:27:20.123
> 
> 标签：javascript, safari, timezone

OSX 上的 Safari 认为 2013 年 10 月 6 日是澳大利亚的星期六。不是，实际上是星期天。

要复制此问题，只需将您的时区设置为悉尼-澳大利亚，在 Safari 中弹出开发控制台，然后输入新日期（“2013/10/06”）。你会得到这个：

![在此处输入图像描述](../Images/13cdb40a21db892da7729461297c0de0.png)

现在更改为美国西雅图，你会得到这个：

![在此处输入图像描述](../Images/a32027f998de3385e935f148d4681f98.png)

这个问题也发生在澳大利亚墨尔本，但不发生在更北部的城市，比如布里斯班（符合[澳大利亚 DST 的分区](http://en.wikipedia.org/wiki/Daylight_saving_time_in_Australia)），或者我在世界各地测试过的其他几个城市。

现在，恰好 2013 年 10 月 6 日是[悉尼夏令时的开始。](http://www.timeanddate.com/worldclock/timezone.html?n=240). 其他年份的其他 DST 开始日期也犯了同样的错误。DST 结束日期似乎没有问题。PDT 时区的 DST 开始日期似乎没有问题。此外，Chrome 和 Firefox 不会出现此问题。

我已经在两台不同的 Mac 上测试了其中的大部分内容，一台在带有 Safari 5.1.7 的 Snow Leopard 上，另一台在带有 Safari 6.0.2 的 Lion 上。

**所以问题是——这是一个错误还是有某种合理的原因？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T22:20:33.373

这确实应该被视为一个错误 - 从技术上讲，悉尼的 DST 于 2013 年 10 月 6 日凌晨 2 点开始，因此 2 点变成了 3 点（[http://www.timeanddate.com/worldclock/clockchange.html?n=240](http://www.timeanddate.com/worldclock/clockchange.html?n=240)）。在这种情况下，Safari 似乎认为您的意思是 2013 年 10 月 6 日午夜 - 然后返回 1 小时到前一天晚上 11 点。这甚至没有意义，因为在凌晨 2 点，时钟应该提前一个小时。

我建议为此提交错误报告-因为输出显然是错误的

[https://developer.apple.com/bugreporter/](https://developer.apple.com/bugreporter/)

# c# - NetworkStream.Write 异步问题

> ID：14839245
> 
> 赞同：1
> 
> 时间：2013-02-12T18:27:22.810
> 
> 标签：c#, sockets, networking, asynchronous

我在用 C# 写入 NetworkStream 时遇到问题。从 MSDN 我读到：

> 在发送请求的字节数或抛出 SocketException 之前，Write 方法会一直阻塞

好吧 - 就我而言，它的行为就像一个异步方法。线程没有被阻塞。

这是一个代码示例，可以稍微启发一下情况：

```
TcpClient tcpcl = new TcpClient("192.168.1.128", 1337);
NetworkStream netst = tcpcl.GetStream();
byte[] will_send = File.ReadAllBytes(@"large_file_120_MB.mp4");
Console.WriteLine("Starting transmission...");
netst.Write(will_send, 0, will_send.Length);
Console.WriteLine("File has been sent !");
(... later instructions ...) 
```

执行 1 秒后来自控制台的结果：

**开始传输...**

**文件已发送！**

第二条消息立即显示。稍后的指令正在执行。

同时，服务器仍然接收文件，并且一切正常。它变得更好 - 如果我杀死发送程序，在传输过程中，接收不会停止。Degugger 清楚地显示应用程序已完全结束。然而，仍然会传输几兆字节，直到接收完全停止。

所以我的问题 - 有没有办法阻止主线程，直到 Write 方法完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:33:19.020

MSDN 描述也许应该更好地理解为

> Write 方法阻塞，直到请求的字节数被 **写入本地网络缓冲区**或抛出 SocketException

即写操作将在另一端成功接收到整个文件之前返回。

这也意味着当您关闭应用程序时，当前在网络缓冲区中的任何内容都可能会继续发送。

在成功接收到整个文件之前阻塞主线程的唯一方法是潜在地使用异步套接字，一旦发送完成，请等待接收端发送某种确认，您必须实现这一点。

# ios - 核心数据：1 个实体、15 个属性、4 个场景。如何保存到同一个对象？

> ID：14839248
> 
> 赞同：0
> 
> 时间：2013-02-12T18:27:51.363
> 
> 标签：ios, core-data, pointers, attributes, save

我有一个具有 20 个属性的实体（称为会议）。在情节提要中，我有 4 个场景。显然每个场景都有自己的控制器文件。每个场景提供 5 个 UITextField 供用户输入。当用户在每个场景上点击 Next 时，我想保存。将保存到在 Scene1 中创建的同一实体对象。我可以很好地保存在场景 1 中。但是当我到达场景 2 时，如何访问我在场景 1 中保存的同一个对象？

下面是场景 1 创建对象的代码：

```
Meetings *meetings = (Meetings *) [NSEntityDescription insertNewObjectForEntityForName:@"Meetings" inManagedObjectContext:self.managedObjectContext]; 
```

问题：如何从场景 2、3 和 4 访问在场景 1 中创建的相同指针 *meetings？当我在场景 2、3 和 4 中键入上面相同的代码时，它给了我一个新对象。我不想在 Scene1 之后创建一个新对象。我想从 Scene1 访问同一个对象，这样我就可以继续保存剩余的属性。

或者有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:33:37.010

您不需要在每个场景中都插入新的会议对象。

1.  只需将会议参考从一个场景传递到第二个场景等等。
2.  或传递会议 objectID

    ```
    @implementation FirstScene
    ...

    - (void)nextScene {
        Meetings *meetings = (Meetings *) [NSEntityDescription insertNewObjectForEntityForName:@"Meetings" inManagedObjectContext:self.managedObjectContext];
        NSManagedObjectID* objectID = [meetings objectID];
        [secondScene setObjectID:objectID];
    }
    ...
    @end

    @implementation SecondScene
    ...
    - (void)setObjectID:(NSManagedObjectID*)objectId {
        NSManagedObjectContext* context = [self context];
        Meetings *theSameMeetings = (Meetings *)[context objectWithID:objectID];
    }

    ...
    @end 
    ```

# javascript - 带有其他按钮的 btn 容器中的引导按钮下拉菜单

> ID：14839250
> 
> 赞同：0
> 
> 时间：2013-02-12T18:27:58.430
> 
> 标签：javascript, jquery, twitter-bootstrap

我在空闲时间创建一个所见即所得的编辑器。我决定我想使用下拉菜单让自己选择格式。问题是当我添加一个下拉菜单时，它不在按钮下方，而是在按钮容器的开头。

这是一张图片来说明我的意思。

![在此处输入图像描述](../Images/c557a7e06c3d02cb00e2ecca42777f21.png)

第一个按钮看起来是活动的，因为文本左对齐......对不起，我试图找到一种方法来解决这个问题，但下拉菜单来自最后一个按钮。

我的问题是，有没有办法将 Twitter Bootstrap 下拉菜单与它应该打开的按钮对齐，或者至少使下拉菜单与按钮容器的宽度对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:29:56.970

是的。您可以通过定位或提供类来添加规则，例如`left: auto; right: 0;`，这样：`<ul>``.right-menu`

```
.right-menu, .dropdown-menu.right-menu {left: auto; right: 0;} 
```

同样的工作演示将在[jsFiddle](http://jsfiddle.net/praveenscience/r5dMK/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:53:38.623

`.pull-right`在容器上使用`.dropdown-menu`它使其粘在容器的右侧并不是一件坏事。

[从源代码](https://github.com/twitter/bootstrap/blob/v2.3.0/less/dropdowns.less#L63)中可以看出，这个类是为了做到这一点：

```
// Aligns the dropdown menu to right
&.pull-right {
  right: 0;
  left: auto;
} 
```

* * *

如果你喜欢让它和容器一样大，你可以尝试将它应用到你的菜单中：

```
.dropdown-menu {
  min-width: 100%;
} 
```

你应该保留`.pull-right`以防你有更大的菜单。

检查[小提琴演示](http://jsfiddle.net/Sherbrow/npMKx/)

# ruby-on-rails-3.2 - destroy_all 不存在的子类

> ID：14839253
> 
> 赞同：0
> 
> 时间：2013-02-12T18:28:08.850
> 
> 标签：ruby-on-rails-3.2

我有一个不再需要的子类。每个环境数据库中可能存在一些实例。我想摧毁他们和他们所有的眷属。能够使用会很好`ProgramOne.destroy_all`，但显然如果我删除该类，它将不存在。有没有办法在`Program.where(:type => 'ProgramOne')`没有 ProgramOne 的情况下使用，或者是开始编写 SQL 查询的最佳解决方案？

```
class Program < ActiveRecord::Base
end

class ProgramOne < Program
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:38:01.017

最好的解决方案是创建一个 rake 任务并在那里设置课程。这样即使模型文件被删除并且所有实例和依赖项都被删除，类也被初始化。

```
# Rake task
desc 'Remove ProgramOne programs and dependents'
task :destroy_program_one_programs => :environment do
  class ProgramOne < Program
  end
  ProgramOne.destroy_all
end

# Migration
class PurgeProgramOne < ActiveRecord::Migration
  def up
    Rake::Task['destroy_program_one_programs'].invoke
  end
end 
```

# algorithm - 存储二维间隔的数据结构

> ID：14839255
> 
> 赞同：0
> 
> 时间：2013-02-12T18:28:14.617
> 
> 标签：algorithm, data-structures, tree, multidimensional-array

我正在尝试解决一个涉及巨大二维屏幕（40000 * 40000 点）的问题。有一些无效点，我得到了一个矩形窗口。适合矩形窗口的无效点左上角的所有点也都无效。

我需要构建一个支持以下操作的数据结构： 1）找出我必须处理的有效点数。2）查询某个点是否有效。

根据我的研究，我考虑过段/区间树，但我不能完全理解它们，而且不确定它们是否可以处理二维点。

谁能给我一些不错的文章/实现，详细描述可以实现上述操作的数据结构？

谢谢，罗希特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:04:26.447

这是今年facebookhackercup的“坏点”问题。请参阅带有代码和解释的[官方解决方案。](http://www.facebook.com/notes/facebook-hacker-cup/2013-round-1-solutions/606859202663318)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:06:31.407

> 适合矩形窗口的无效点左上角的所有点也无效。

因此，如果 x1,y1 无效，并且 x2<=x1 且 y2<=y1，则 x2,y2 也无效。在这种情况下，我将存储定义点的有序列表，即每个无效矩形的右下角。您的列表可以这样排序`x[i+1] > x[i]`和`y[i+1] < y[i]`。如果您省略所有已被其他点暗示无效的点，则此方法有效。在这个有序列表上，您可以执行您的操作。

> 1）找出我必须处理的有效点数。

您可以遍历列表，并为每个点使用一个矩形条，这样两个这样的条就不会重叠。

> 2）查询某个点是否有效。

给定一个点`xp,yp`，您可以使用二进制搜索来定位一个定义点，这使得该点无效。如果`x`定义点的坐标太小，则必须在较高的位置查找，而如果`y`坐标太小，则应在较低的位置搜索。如果您发现两者都太小，则您知道该像素是有效的。否则，您会发现两个坐标都足够大，这意味着您给定的像素也是无效的。

# c - 需要左值

> ID：14839256
> 
> 赞同：2
> 
> 时间：2013-02-12T18:28:17.073
> 
> 标签：c, lvalue

我对以下代码有一些问题：

```
#include<stdio.h>
void main()
{ int a=6,b=2,g;
  a>b?g=a:g=b;
 } 
```

这是正确执行而没有任何错误。但是，如果正确查看，这应该会给出**Lvalue Required**错误。**(a>b?g=a:g)**是实际表达式，因为没有括号用作**a>b?g=a:(g=b);** 并且将值**b 分配给求解第二个赋值（=）运算符左侧的表达式后获得的常量值，这肯定是错误的。**请就这个话题提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:35:13.993

条件运算符的结果在 C 中永远不是左值。

如果您没有得到带有条件表达式的语句的诊断，则它不是 C。检查您使用的是 C 编译器（而不是 C++ 编译器 - C++ 中条件运算符的规则不同）并且 ISO模式已启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:29:53.990

三元运算符本身就是一个右值。它并不完全是控制流，更多的是在给定条件下给出一个值。

要修复，请尝试`g = a > b ? a : b`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:30:16.633

不要那样做：

```
a>b?g=a:g=b; 
```

尝试这个：

```
g = (a>b)?a:b; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T18:30:23.250

将`g=`零件移到开头：

```
g=a>b?a:b; 
```

这会做你想要的......

# apache2 - Centos httpd 2.4.3 服务不支持chkconfig

> ID：14839264
> 
> 赞同：0
> 
> 时间：2013-02-12T18:28:50.533
> 
> 标签：apache2, centos, apache

由于存在漏洞，不得不在 centos 5.9 服务器上将 apache 更新到 2.4.3。

它工作正常，但我想不出一种方法让它与 chkconfig 一起工作（如果可能的话）。

我已经搜索了解决方案并尝试按照所有网站的建议将“#chkconfig: - 85 15”添加到 apachectl 中，但它仍然说服务不支持 chkconfig。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:15:36.190

编辑文件 /etc/init.d/httpd 以设置 Linux 的运行级别以替换以下行：

```
 # chkconfig: - 85 15 
```

使用这一行：# chkconfig: 234 20 80

开始服务：-

```
 /sbin/chkconfig httpd on 
```

# jquery - ajax-submit 和 bootsrap 模式对话框未关闭后响应始终为空

> ID：14839273
> 
> 赞同：0
> 
> 时间：2013-02-12T18:29:36.527
> 
> 标签：jquery, twitter-bootstrap, modal-dialog, response, form-submit

**通过 AJAX 和 Web 服务提交表单的 Java 脚本**

```
$('#btnSignup').click(function(){ 
            var user = {"id": 10, "firstName": $('#firstName').val(), "lastName":     $('#lastName').val(), "age": 69, "freeText": "55555", "weight": 55};

            $.ajax({
            type: "POST",
            contentType: "application/json",
            url: "http://localhost:8080/testSoft/webresources/entity.user/",
            dataType: "json",
            data: JSON.stringify(user),
            //data: $("#register-form").serialize(), // serializes the form's elements.
            success: function(response) {
                alert('response: '+response);// This is always NULL?

            },
            error: function(data) {

                alert('addUser error: ');
            }
        });

    }); 
```

**提交后不关闭的模态对话框**

```
<!-- Modal -->
        <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel">Sign Up</h3>
            </div>
            <div class="modal-body">
                <form id="register-form" onsubmit="return false;"> 

                    <div class="register-form-block">
                        <input type="text" value='Your first name' name="firstName" id="firstName" onclick="this.value = ('')"/>
                    </div> 

                    <div class="register-form-block">
                        <input type="text" value='Your surname' name="lastName" id="lastName" onclick="this.value = ('')" />
                    </div>

                    <div class="register-form-block">
                        <input type="text" value='Username' name="username" id="username" onclick="this.value = ('')"/>
                    </div>
                    <div class="register-form-block">
                        <input type="password" value='Password' name="password" id="password" onclick="this.value = ('')"/>
                    </div>
                    <div class="register-form-block">
                        <input type="password" value='Password again' name="passwordagain" onclick="this.value = ('')"/>
                    </div>
                    <!--a href="javascript:doRegister();" class="register-button" id="btnAddUser" >Register</a-->
                    <br/>
                    <button type="button" class="btn btn-primary btn-large" id="btnSignup">Register</button>

                </form>
            </div>

        </div> 
```

* * *

**问题**

1）为什么响应总是NULL？请求正在通过 Web 服务成功地将数据添加到数据库。

2) 为什么提交表单后模态对话框没有关闭？我想关闭对话框并更新一个 div 并告诉用户注册没问题。

3）我如何在无误提交后告诉服务器转到不同的页面，如 www.google.com 或我的应用程序中我的网络服务器中的另一个页面，如thankYou.html？我在 Jquery + Ajax 方面有一个平坦的学习曲线 :( 这让我抓狂。

感谢您的帮助！萨米人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:33:29.053

1）你有没有从服务器端发回任何东西？

2）您可能必须通过函数调用手动关闭它。

3) window.location = ' [http://google.com](http://google.com) ';

# autobahn - 在高速公路订阅中调用调度

> ID：14839277
> 
> 赞同：0
> 
> 时间：2013-02-12T18:29:49.300
> 
> 标签：autobahn

我正在使用高速公路，我有一个特定于实现的问题。

我试图弄清楚如何在客户端订阅主题时向所有连接的客户端（包括新订阅的客户端）发送通知。这是代码（为清楚起见，已向下编辑）：

```
@exportSub("", True)
def subscribe(self, topicUriPrefix, topicUriSuffix):
topic_uri = "%s%s" % (topicUriPrefix, topicUriSuffix) 
    self.client.dispatch(topic_uri, {"msg":"WTF"})
return True 
```

但是，我没有看到新订阅的消息收到此调度。调度调用返回无。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:15:30.033

我想通了。在接收通过 dispatch() 发送的消息之前，客户端必须先订阅一个主题。这意味着如果希望订阅客户端接收消息，则不能在订阅内部调用 dispatch()。我通过构建一个简单的消息队列并在协议实例上为任何排队的消息调用调度来解决这个问题。

# node.js - 使用特殊字符搜索 UTF8 字符串

> ID：14839282
> 
> 赞同：0
> 
> 时间：2013-02-12T18:30:03.303
> 
> 标签：node.js, mongodb

好的，所以我有一个集合，用户，类似于：

```
[
 {
  name: 'André Alçada Padez',
  ...
 }, 
 ...
] 
```

我想使用过滤器在该集合中找到我的用户：

```
db.users.find({name: /andre/i}) 
```

或者

```
db.users.find({name: /alcada/i}) 
```

我怎样才能让 mongo 知道，`"c"`可以是 a`"ç"`还是`"e"`可以是 a `"é"`？

谢谢

# node.js - nodejs串口模块或蓝牙串口模块，哪一个？

> ID：14839286
> 
> 赞同：4
> 
> 时间：2013-02-12T18:30:15.137
> 
> 标签：node.js, bluetooth, serial-port

我有几个用于串行通信的 nodejs 示例。一个示例是使用串行端口模块（如下）。我有一个配对的蓝牙设备，设置为 rfcomm0。我可以通过命令行与它通信`echo data > /dev/rfcomm0`并接收响应，所以它似乎工作。问题是它不能通过 nodejs 工作。当我这样做时，下面的示例会引发“无法加载绑定文件”错误`nodejs SerialToJson.js /dev/rfcomm0`。另一种方法是使用蓝牙串行端口模块，但也无法通过 npm 安装，因为找不到我正在使用的节点版本的兼容版本。我知道如何解决每个问题，但我不知道要追求哪个，串口模块可以与 rfcomm（串口仿真）一起使用还是蓝牙串口模块更适合？

```
 /*
    SerialToJson.js
    a node.js app to read serial strings, convert them to
    JSON objects, and send them to webSocket clients
    requires:
        * node.js (http://nodejs.org/)
        * express.js (http://expressjs.com/)
        * socket.io (http://socket.io/#how-to-use)
        * serialport.js (https://github.com/voodootikigod/node-serialport)

    To call it type:
        node SerialToJSON.js portname

    where portname is the path to the serial port you want to open.

    created 1 Nov 2012
    modified 7 Nov 2012
    by Tom Igoe

*/

var serialport = require("serialport"),             // include the serialport library
    SerialPort  = serialport.SerialPort,            // make a local instance of serial
    app = require('express')(),                     // start Express framework
    server = require('http').createServer(app),     // start an HTTP server
    io = require('socket.io').listen(server);       // filter the server using socket.io

var portName = process.argv[2];                     // third word of the command line should be serial port name
console.log("opening serial port: " + portName);    // print out the port you're listening on

server.listen(8080);                                // listen for incoming requests on the server
console.log("Listening for new clients on port 8080");
var connected = false;

// open the serial port. Change the name to the name of your port, just like in Processing and Arduino:
var myPort = new SerialPort(portName, { 
    // look for return and newline at the end of each data packet:
    parser: serialport.parsers.readline("\r\n") 
});

// respond to web GET requests with the index.html page:
app.get('/', function (request, response) {
  response.sendfile(__dirname + '/index.html');
});

// listen for new socket.io connections:
io.sockets.on('connection', function (socket) {
    // if the client connects:
    if (!connected) {
        // clear out any old data from the serial bufffer:
        myPort.flush();
        // send a byte to the serial port to ask for data:
        myPort.write('c');
        console.log('user connected');
        connected = true;
    }

    // if the client disconnects:
    socket.on('disconnect', function () {
        myPort.write('x');
        console.log('user disconnected');
        connected = false;
    });

    // listen for new serial data:  
    myPort.on('data', function (data) {
        // Convert the string into a JSON object:
        var serialData = JSON.parse(data);
        // for debugging, you should see this in the terminal window:
        console.log(data);
        // send a serial event to the web client with the data:
        socket.emit('serialEvent', serialData);
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T07:21:46.687

Good to know it's working. Serialport module works for me too.

With module serialport, you need another module to connect with the bluetooth device, or you need to manually connect with rfcomm in terminal. The big difference in functionality is that bluetooth-serial-port doesn't require you to connect with rfcomm. This module can scan bluetooth devices and connect with them. After you connect, it has the same functionality as serialport.

So if your application/module only needs to connect with bluetooth devices and you want scanning functionality, it's worth to at least try bluetooth-serial-port.

There are a few examples in the npm module/readme, so it won't take much time to just test it.

EDIT:

There is a new version released, which is very stable! :D [https://npmjs.org/package/bluetooth-serial-port](https://npmjs.org/package/bluetooth-serial-port)

# c# - 如何使用 mvc 4 web api 中的 HttpResponseMessage 对象设置 etag？

> ID：14839293
> 
> 赞同：2
> 
> 时间：2013-02-12T18:30:31.937
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4

我在我的 Web API 项目中创建了一个帮助类，所以我有点卡在使用 HttpRequestMessage 和 HttpResponseMessage，或者至少看起来是这样。我已经生成了要在 HttpResponseMessage 中发回的 eTag，但我不确定将其添加到对象的哪个位置，因为自 WCF 以来一切都发生了变化，我只需使用 CheckConditionalRetrieve();

我的问题是，我有我的 eTag...大声笑...我在哪里使用 HttpResponseMessage？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:52:06.527

我觉得有点傻 我一直在寻找几个小时，只是随机遇到它。请求和响应对象中有两个可用的 Headers 字段。

```
response.Headers 
```

和

```
request.Content.Headers 
```

Etag 属性位于顶级标头中：

```
response.Headers.ETag 
```

所以我的最终代码最终是：

```
_response.Headers.ETag = new EntityTagHeaderValue(eTag); 
```

# php - PHP foreach 循环

> ID：14839302
> 
> 赞同：1
> 
> 时间：2013-02-12T18:31:08.600
> 
> 标签：php

这让我发疯了。我已经验证了我的输入/输出，但仍然出现意外行为。它应该是 2，但它正在做 numa numa。我错过了什么？

**输入：**

```
data
Array
(
    [0] => Array
        (
            [lineId] => 1
            [quantity] => 2
            [costPerItem] => 16.585
            [itemId] => 1
        )

) 
```

**代码：**

```
printr( $data, 'data' );
foreach( $data as $i => $value ){
    foreach( $value as $key => $a ){
        echo 'key: '.$key.' - a: '.$a.'<br />';
        ( $key == 'quantity' ) ? $dataQuantity[$i] = $a : $dataQuantity[$i] = 'numanuma'; 
    }
}
printr( $dataQuantity, 'data quantity' ); 
```

**输出：**

```
key: lineId - a: 1
key: quantity - a: 2
key: costPerItem - a: 16.585
key: itemId - a: 1

data quantity
Array
(
    [0] => numanuma
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:34:19.770

这是因为键 itemId 在数量键之后。所以它被设置为 2 但它被设置为 numanuma 之后的循环。

试试这个：

```
printr( $data, 'data' );
foreach( $data as $i => $value ){
    foreach( $value as $key => $a ){
        echo 'key: '.$key.' - a: '.$a.'<br />';
        if( $key == 'quantity' )
        { 
            $dataQuantity[$i] = $a; 
        } 
    }
}
printr( $dataQuantity, 'data quantity' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:34:13.860

如果键不是“数量”，则分配“numanuma”。在“数量”键之后，一些键*不是*数量，因此“numanuma”被分配到 的值之上`$a`。

简短的回答，在分配“numanuma”之前添加一个额外的检查和一个标志来检查是否`$dataQuantity[$i]`已经正确分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T18:35:34.267

这有几个问题。

首先，您`$dataQuantity[$i]`在子循环中设置值，但`$i`在外部循环中递增。

当您的代码看到“数量”时，它可能会设置`$dataQuantity[$i]`为`2`，但随后它会看到`itemId`并覆盖`$dataQuantity[$i]`，因为`$i`没有改变。

其次，您应该将您的三元 if 语句更改为：

```
$dataQuantity[$i] = ( $key == 'quantity' ) ? $a : 'numanuma'; 
```

*这并不影响我之前提到的*。

这是一个工作示例：

```
printr( $data, 'data' );
foreach( $data as $i => $value ){
    foreach( $value as $key => $a ){
        if ($key == 'quantity') {
            $dataQuantity[$i] = $a;
            break;
        }
    }
}
printr( $dataQuantity, 'data quantity' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T18:35:24.470

三元运算符不用于赋值，请阅读：

> 注意：请注意，三元运算符是一个语句，它的计算结果不是变量，而是语句的结果。了解是否要通过引用返回变量很重要。语句 return $var == 42 ？$a : $b; 因此，在按引用返回的函数中将不起作用，并且在以后的 PHP 版本中会发出警告。

[来源](http://php.net/manual/en/language.operators.comparison.php)

# java - 我的数组列表中有多少不同的项目而不使用哈希集？

> ID：14839303
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:31:13.280
> 
> 标签：java, list, methods, arraylist

我想知道java中是否有一种方法来计算我的ArrayList中有多少不同的项目而不使用hashset？

如果没有我如何创建一个来计算我的 ArrayList 中有多少不同的项目而不使用哈希集？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:35:16.433

`new HashSet<NestedItem>(theList).size()`应该适合您的需要，因为 a`Set`会自动删除重复的嵌套项。

以一般的方式：

```
public static <E> int uniqueCount(final List<E> list) {
    return new HashSet<E>(list).size();
} 
```

确保以您需要的方式实现嵌套类型的 equals/hashCode 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T18:34:16.837

### 使用一套

集合通常用于包含具有唯一项的集合。你可以这样使用这个属性：

```
List<String> myArrayList = new ArrayList<>();
Set<String> temporarySet = new HashSet<>();
temporarySet.addAll(myArrayList);
int uniqueCount = temporarySet.size(); 
```

### 使用 Collections.sort()

如果您的所有列表项都实现了 Comparable，您可以预先对列表进行排序，然后计算不等于的连续项。

```
private static int getUniqueCountUsingSort(List<String> list) {
    if (list.size() < 2) { // obvious case.
        return list.size();
    }

    List<String> listCopy = new ArrayList<>(list);
    Collections.sort(listCopy);
    int uniqueCount = 1;
    for (int i = 1; i < listCopy.size(); i++) { // starts at 1.
                    // Compare with previous item in the sorted list.
        if (!listCopy.get(i).equals(listCopy.get(i-1))) {
            uniqueCount ++;
        }
    }
    return uniqueCount;
} 
```

此方法与 Set 方法具有相同的性能特征，因为 Collections.sort() 是 O(n log(n))。

### 用手

你也可以简单地用困难的方式来做，但它更慢 O(n^2)：

```
private static int getUniqueCountByHand(List<String> list) {

    int uniqueCount = 0;
    for (int i = 0; i < list.size(); i++) {
        boolean isUnique = true;
        // look if there is another entity before that is equal to this one.
        for (int j = 0; j < i; j++) {
            if (list.get(j).equals(list.get(i))) {
                isUnique = false;
            }
        }
        if (isUnique) {
            uniqueCount ++;
        }
    }

    return uniqueCount;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T18:34:54.797

### 将列表中的项目添加到 a 中[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)并检查其大小。

```
new HashSet(myListOfItems).size(); // => number of unique elements 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T18:33:38.183

list 是 Object 的 List (ArrayList)。要计算唯一对象：

```
Set set = new HashSet(list);
int cnt = set.size(); 
```

变量 cnt 现在包含唯一元素的数量。

更短：

```
int cnt = new HashSet(list).size(); 
```

套装只包含独特的物品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T18:34:32.963

如果您不需要不同的项目，请考虑使用 HashSet。除此之外，如果它还没有包含它，只需扫描并将它们添加到单独的列表中。不过，这大约需要 O(n + n/2) 时间。

# wpf - UserControl 通过 RelativeSource Self 访问 DependencyProperty

> ID：14839304
> 
> 赞同：1
> 
> 时间：2013-02-12T18:31:14.523
> 
> 标签：wpf, user-controls, dependency-properties, relativesource

我`RelativeSource`在 UserControl 中使用 Self 时遇到问题。我已经构建了两个我认为在操作上相同的 UserControl，但一个有效，另一个无效。用户控件本身仅包含一个标签，我想将其内容设置为`DependencyProperty`控件的标题。当我将`DataContext`UserControl 设置为`RelativeSource`Self，并将 Label 绑定到`Path=Title`一切正常时。但是，如果我将标签绑定到，`RelativeSource FindAncestor, AncestorType{x:Type UserControl}}, Path=Title`那么它会因 TargetInvocationException 而失败。

关于我做错了什么的任何想法。

这是有效的 UserControl 的 XAML：

```
<UserControl x:Class="UserControlBinding.Controls.MyLabelControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
             DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
      <Label Content="{Binding Path=Title}"></Label>
    </Grid>
</UserControl> 
```

这是失败的代码的 XAML

```
<UserControl x:Class="UserControlBinding.Controls.MyLabelControl2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:UserControlBinding.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
      <Label Content="{Binding ReleativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MyLabelControl2}}, Path=Title}"></Label>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:55:47.880

假设您的 Title 属性的代码没有引起问题（无法判断，因为它没有列出），除了拼写之外，其他一切看起来都很好：`ReleativeSource`->`RelativeSource`

# c# - c# float [] average 失去准确性

> ID：14839309
> 
> 赞同：3
> 
> 时间：2013-02-12T18:31:31.650
> 
> 标签：c#, .net, average

我正在尝试计算一组浮点数的平均值。我需要使用索引，因为这是在二进制搜索中，所以顶部和底部会移动。（大图我们正在尝试优化半范围估计，因此我们不必每次通过都重新创建数组）。

无论如何，我写了一个自定义平均循环，我得到的准确度比 c# Average() 方法低 2 个位置

```
float test = input.Average();

int count = (top - bottom) + 1;//number of elements in this iteration
int pos = bottom;
float average = 0f;//working average
while (pos <= top)
{
     average += input[pos];
     pos++;
}
average = average / count; 
```

例子：

```
0.0371166766 - c#
0.03711666 - 我的循环

125090.148 - c#
125090.281 - 我的循环
```

[http://pastebin.com/qRE3VrCt](http://pastebin.com/qRE3VrCt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:57:14.037

> 我得到的准确度比 c# Average() 低 2 个位置

不，您只会丢失 1 个有效数字。浮点型只能存储 7 位有效数字，其余只是随机噪声。在这样的计算中，不可避免地会累积舍入误差，从而失去精度。让舍入误差平衡需要运气。

避免它的唯一方法是使用具有更高精度的浮点类型来累积结果。不是问题，你有*双倍*可用。这就是为什么 Linq 平均方法看起来像这样的原因：

```
 public static float Average(this IEnumerable<float> source) {
       if (source == null) throw Error.ArgumentNull("source");
       double sum = 0;         // <=== NOTE: double
       long count = 0;
       checked {
           foreach (float v in source) {
               sum += v;
               count++;
           }
       }
       if (count > 0) return (float)(sum / count);
       throw Error.NoElements();
   } 
```

使用*double*重现 Linq 结果，结果中的有效数字位数相当。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:39:02.440

我将其重写为：

```
int count = (top - bottom) + 1;//number of elements in this iteration
double sum = 0;
for(int i = bottom; i <= top; i++)
{
     sum += input[i];
}
float average = (float)(sum/count); 
```

这样您就可以使用高精度累加器，这有助于减少舍入误差。

顺便提一句。如果性能不是那么重要，您仍然可以使用 LINQ 计算数组切片的平均值：

```
input.Skip(bottom).Take(top - bottom + 1).Average() 
```

* * *

我不完全确定这是否适合您的问题，但如果您需要计算许多子数组的平均值，创建一个持久和数组可能很有用，因此计算平均值只需两个表查找和一个除法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T23:29:49.783

只是为了增加对话，在使用浮点原语时要小心。

[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

内部浮点数存储未反映在显示值中的附加最低有效位（又名：保护位或保护位）。但是，在执行数学运算和相等检查时会使用它们。一个常见的结果是包含 0f 的变量并不总是零。在累积浮点值时，这也可能导致精度错误。

使用 Decimal 作为累加器：

1.  不会因保护数字而出现舍入错误
2.  是 128 位数据类型（不太可能超过累加器中的最大值）。

欲了解更多信息： [C# 中的 Decimal、Float 和 Double 有什么区别？](https://stackoverflow.com/a/618596/1195927)

# algorithm - 模式匹配列表尾元组元素

> ID：14839312
> 
> 赞同：0
> 
> 时间：2013-02-12T18:31:34.417
> 
> 标签：algorithm, f#, compression

我有一些作为练习编写的运行长度编码代码

```
let rle s = 
    s
    |> List.map (fun x -> (x, 1))
    |> List.fold (fun acc x -> 
        match acc with 
            | [] -> [(x, 1)]
            | h::(x, n) -> h::(x, n+1)
            | h -> h::(x, 1)
        )
    |> List.map (fun (x, n) -> 
        match n with
            | 1 -> x.ToString()
            | _ -> x.ToString() + n.ToString()
        ) 
```

该模式`h::(x, n) -> h::(x, n+1)`无法编译。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:07:27.123

RLE（笑）

```
let rle (s: string) = 
  let bldr = System.Text.StringBuilder()
  let rec start = function
    | [] -> ()
    | c :: s -> count (1, c) s
  and count (n, c) = function
    | c1 :: s when c1 = c -> count (n+1, c) s
    | s -> Printf.bprintf bldr "%d%c" n c; start s
  start (List.ofSeq s)
  bldr.ToString()

let s1 = "WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWBWWWWWWWWWWWWWW"
let s2 = "12W1B12W3B24W1B14W"

rle s1 = s2 |> printfn "%b" //"true" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:58:52.433

它无法编译，因为`::`模式匹配的第二个参数必须是 a `list`，但这里它是一个元组。一般来说，您似乎只是误解了`head`and `tail`。Head 是顶部元素，而 tail 是以下元素的列表。本质上交换它们就可以了：

```
|> List.fold (fun acc x -> 
    match acc with 
        | [] -> [(x, 1)]
        | (x0, n)::t when x0=x -> (x0, n+1)::t
        | t -> (x, 1)::t
    )
    [] 
```

注 1：正如@pad 所注意到的，`List.fold`需要一个参数，一个“引导”累加器开始。显然，它应该只是一个空列表，`[]`.
注意2：您不能直接匹配`x`. 相反，您将其绑定到`x0`并`x0`与`x`.
注意 3：匹配空列表`[]`不是必需的，因为它可以很高兴地使用最后一个模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T20:01:07.243

这不能回答您的问题，但是我很无聊并编写了一个您可能会发现更有启发性的实现——只需使用 Visual Studio 或 MonoDevelop 中的调试器逐步完成它。

```
let rec private rleRec encoded lastChar count charList =
    match charList with
    | [] ->
        // No more chars left to process, but we need to
        // append the current run before returning.
        let encoded' = (count, lastChar) :: encoded

        // Reverse the encoded list so it's in the correct
        // order, then return it.
        List.rev encoded'

    | currentChar :: charList' ->
        // Does the current character match the
        // last character to be processed?
        if currentChar = lastChar then
            // Just increment the count and recurse.
            rleRec encoded currentChar (count + 1) charList'
        else
            // The current character is not the same as the last.
            // Append the character and run-length for the previous
            // character to the 'encoded' list, then start a new run
            // with the current character.
            rleRec ((count, lastChar) :: encoded) currentChar 1 charList'

let rle charList =
    // If the list is empty, just return an empty list
    match charList with
    | [] -> []
    | hd :: tl ->
        // Call the implementation of the RLE algorithm.
        // The initial run starts with the first character in the list.
        rleRec [] hd 1 tl

let rleOfString (str : string) =
    rle (List.ofSeq str)

let rec printRle encoded =
    match encoded with
    | [] ->
        printfn ""
    | (length, c) :: tl ->
        printf "%i%O" length c
        printRle tl

let printRleOfString = rleOfString >> printRle 
```

将代码粘贴到 F# 交互式中并使用 Wikipedia 示例进行[运行长度编码](https://en.wikipedia.org/wiki/Run-length_encoding)：

```
> printRleOfString "WWWWWWWWWWWWBWWWWWWWWWWWWBBBWWWWWWWWWWWWWWWWWWWWWWWWBWWWWWWWWWWWWWW";;
12W1B12W3B24W1B14W
val it : unit = () 
```

# c++ - 在实现递归冒泡排序时遇到堆栈溢出

> ID：14839315
> 
> 赞同：2
> 
> 时间：2013-02-12T18:32:00.703
> 
> 标签：c++, visual-c++, recursion, stack-overflow, bubble-sort

嘿，我[将此 C# 代码](https://stackoverflow.com/questions/1644440/bubble-sort-using-recursion-in-c-sharp#1644596)转换为 c++

```
void bubbleSort(int *inputArray, int passStartIndex, int currentIndex,int length)
{
    if(passStartIndex == length - 1) return;
    if(currentIndex == length - 1) return bubbleSort(inputArray, passStartIndex+1, passStartIndex+1,length);

    //compare items at current index and current index + 1 and swap if required
    int nextIndex = currentIndex + 1;
    if(inputArray[currentIndex]>inputArray[nextIndex])
    {
        int temp = inputArray[nextIndex];
        inputArray[nextIndex] = inputArray[currentIndex];
        inputArray[currentIndex] = temp;
    }

    return bubbleSort(inputArray, passStartIndex, currentIndex + 1,length);
} 
```

但是当我在长度为 50100 的输入数组上执行它时，它显示了我的期望

> System.StackOverflowException 未处理消息：example.exe 中发生了“System.StackOverflowException”类型的未处理异常

我究竟做错了什么？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:00:40.227

### ***“我究竟做错了什么？”***

每次递归函数调用自身，调用帧（*激活记录*）被存储到堆栈内存中。因此，当递归变得太深时，即达到堆栈的最大大小时，执行将终止。

另请查看：[C++ 是否限制递归深度？](https://stackoverflow.com/questions/2630054/does-c-limit-recursion-depth)

* * *

### ***“怎么修？”***

避免这个问题的最简单方法是从一开始就永远不要将算法设计为递归。但是一旦你已经有了这样的递归解决方案，在大多数情况下，可以将其重写为循环形式或（通常更容易）：**尾递归**。

基本上，如果您可以以一种从不直接将任何参数传递给下一次调用的方式重写您的函数，那么您就赢了。如果你看看你的递归，有两个地方，它调用自己和调用之前，只有`currentIndex`和`passStartIndex`正在被改变。想象一下，您将这些索引存储在一边，当前的函数调用只会发出信号*“我已经完成了，这些是应该有人继续使用的值：......现在你可以继续！”* ，这意味着不需要存储函数所在的状态。通过这样做，您最终会得到一个 ***[Tail 调用](http://en.wikipedia.org/wiki/Tail_call)***（尤其参见[第一个示例程序](http://en.wikipedia.org/wiki/Tail_call#Example_programs)）。

这是如何使用您的代码完成的完整示例：*[Step 1](http://ideone.com/Vu8nGy)* , *[Step 2](http://ideone.com/7YLI5u)*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T19:14:07.953

它不会解决您的问题（请参阅递归限制），但您使用的算法存在错误。你应该更换

```
if (currentIndex == length - 1)
    return bubbleSort(inputArray, passStartIndex+1, passStartIndex+1, length); 
```

经过

```
if (currentIndex == length - 1)
    return bubbleSort(inputArray, passStartIndex+1, 0,length - 1); 
```

冒泡排序应该重新开始到 0，因为第一项不在正确的位置，但最后一项是。

# php - 获取特定范围的mysql查询

> ID：14839316
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:32:01.060
> 
> 标签：php, mysql

我有一个 mysql 表，其中包含etc`latitude`并且我的程序想要加载仅显示在显示器上的数据，所以它可能像这样`longitude``location name`

```
e.g -6.880713 < latitude < -6.90176 AND 107.599411 < longitude < 107.635374 
```

如何使用该条件加载数据？

**编辑**

该死的男人！我从我发现的几项研究中知道，当我执行`WHERE (lat < -6.90176)`它时，它只显示以 -6.9xxxxx 开头的数据，当我搜索 -6.8 结果发现 0：D 相同的情况下，当我执行`WHERE (lat > -6.880713)`它时，它只显示以 -6.8xxxxx 开头的数据而没有 - 6.9 :D WTF 我不明白为什么会这样~~~难怪数据不会显示...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:42:39.797

这也应该有效：

```
WHERE latitude BETWEEN -6.880713 AND -6.90176 AND longitude BETWEEN 107.599411 AND 107.635374 
```

`BETWEEN`是包容的，虽然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:39:38.870

你不能在 MySQL 中使用“数学风格”的不等式。您将不得不执行以下操作：

```
-6.880713 < latitude AND latitude < -6.90176 AND
    107.599411 < longitude AND longitude < 107.635374 
```

`-6.880713 < latitude < -6.90176`被视为`(-6.880713 < latitude) < -6.90176`，其中`(-6.880713 < latitude)`将是 1 或 0。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T18:38:02.327

```
WHERE latitude > -6.880713 AND latitude < -6.90176 AND longitude > 107.599411 AND longitude < 107.635374 
```

# c# - 无法加载 DLL“x.dll”构建警告，但当我运行时它实际上加载正常

> ID：14839317
> 
> 赞同：1
> 
> 时间：2013-02-12T18:32:04.807
> 
> 标签：c#, winforms, dll, dllimport

我正在用 C# 制作一个表单应用程序。我已经构建了一个自定义控件，它对我必须放在一起的 c++ DLL 进行了几次调用，以便我可以重用一些旧代码。当我运行时，它运行良好。但是，我收到一条构建警告，上面写着：

> 无法加载 DLL 'x.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

当我在 VS 设计器中打开使用该自定义控件的表单时，它会抛出异常并说它找不到 DLL，但如果我点击“忽略并继续”，那么它似乎没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:09:28.850

我认为问题在于 VS 设计视图中的 dll 搜索路径与运行时不同。在运行时，VS 为您的应用程序设置了一个显式路径，其中包括例如 /Debug 或 /Release 文件夹，它们不在全局路径中。

所以VS找不到，但是runtime可以。您可以做的是将您的 dll 路径添加到全局 Windows 路径或找到如何调整 VS 搜索路径

# facebook - Facebook API 将线程标记为“已读”

> ID：14839319
> 
> 赞同：0
> 
> 时间：2013-02-12T18:32:17.483
> 
> 标签：facebook, facebook-graph-api

我一直在尝试找到一种方法来将更改发布到我的收件箱中的一个 Threads 对象字段以将其标记为**“已读”**，即将*未读*从**1**更改为**0**，如下所示从我得到的 JSON 响应中看到：

```
"unread": 1, 
  "id": "1643543545", 
  "updated_time": "2013-02-12T14:53:26+0000", 
  "comments": {
    "data": [
      { 
       .
       .
       .
       } 
   ] 
  } 
```

但是，我有点迷失在找出 API 文档的哪个部分讨论了这个问题，以及您可以在哪些对象中发布和更改它们的字段。查看 Thread 对象，所提到的只是以只读方式获取数据的能力。没有提及对象的字段是否可以更新或更改，即将 unread 从**1**更改为**0**。

首先是否有可能，或者 POST 仅专用于 API 的特定部分，即“提要”、“消息”等。

如果不存在这样的想法，任何关于如何做到这一点的想法都将不胜感激（您将获得已停产的加拿大便士作为感谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:10:45.057

开发人员目前无法将线程或消息标记为“已读”。

可能重复： [Facebook Graph API，将收件箱标记为已读？](http://facebook.stackoverflow.com/questions/7609620/facebook-graph-api-mark-inbox-as-read)

# java - java中可能丢失精度错误

> ID：14839320
> 
> 赞同：6
> 
> 时间：2013-02-12T18:32:24.113
> 
> 标签：java

这是我的代码：

```
class test{

    public static void main(String arg[]){

        int a=10, b=20;
        float c = 30.123;
        int e = (int)c;
        System.out.println(e);

    }
} 
```

我收到此错误：

```
test.java:6: error: possible loss of precision
        float c = 30.123;
                  ^
required: float
found:    double
1 error 
```

为什么所有这些？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T18:33:33.863

浮点字面量默认为`double`类型。并且将 double 值分配给 float 类型会导致一些精度错误。您可以将 of 更改`type`为`c`，`double`或在其末尾附加一个`f`以使其`float`如下所示：

```
float c = 30.123f; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:35:01.480

`double`如果您在末尾指定不带 f 的浮点值，则默认情况下将其视为。

```
double d = 30.123; 
```

对于浮点文字，您应该在浮点值的末尾附加 f 。

```
float c = 30.123f; 
```

# java - 使用 MarkLogic 的 Java API 访问 HTML Tidy

> ID：14839326
> 
> 赞同：1
> 
> 时间：2013-02-12T18:32:32.997
> 
> 标签：java, marklogic, htmltidy

我正在重构一个 Java EE 项目以使用 MarkLogic，并希望利用 MarkLogic 的内置 HTML Tidy 功能。是否可以使用 MarkLogic Java API 中的 HTML Tidy？还是我需要使用第三方 API 来让我直接运行 XQuery 命令？

或者这是一个傻瓜的差事，我应该在我的代码中使用 HTML Tidy？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:21:32.297

请参阅`com.marklogic.client.example.cookbook.DocumentWriteTransform`随 Java API 分发的示例，该示例`server-side`在文档写入时使用 XQuery 转换来调用`xdmp:tidy()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:45:11.103

Erik 引用的示例安装了一个 XQuery 转换。它的名字是 html2xthml.xqy——它被打包在发行版的某个地方。该示例有一种安装转换的方法，然后是如何调用它的示例。调用部分在第 126 行。

writeMgr.write(docId, writeHandle, transform);

就在上面，您将看到如何创建和配置转换。

这个想法是，您可以使用 REST（通过 Java API）在 /v1/transforms/html2xhtml 安装转换，然后在文档 PUT（使用此 java 写入方法）期间以转换名称作为参数调用它。

因此，您要查找的参考是 XQuery 转换，而不是 Java 源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:50:50.230

我会倾向于在 Java 层中保持整洁，只要您打算将 Java 保留在图片中。在 JVM 中运行 tidy 会给你更多的控制：你可以安装任何你喜欢的 jtidy 版本，甚至可以自己打补丁。此外，tidy 可能会占用大量 CPU，因此在 JVM 层中运行它可以防止它与数据库查询竞争。

当然，你可能有其他强烈的动机在 MarkLogic 中运行整洁。例如，您可能计划允许直接与您的 MarkLogic 代码集成 REST。

# html - HTML，防止点击改变URI

> ID：14839329
> 
> 赞同：0
> 
> 时间：2013-02-12T18:32:36.887
> 
> 标签：html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:45:25.783

你可以这样做：

```
 $('a[href="#"]').click(function() { return false; }); 
```

# html - 表列不显示在调整大小

> ID：14839331
> 
> 赞同：0
> 
> 时间：2013-02-12T18:32:40.827
> 
> 标签：html, css, css-float

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:37:32.533

尝试 ：

```
<table class="table" style="margin-left: 160px; width: 100%;"> 
```

另外，请记住这`<tables>`不是“响应式”（在“重新布局”中），但仍然是“可扩展”。

您的表格以最小宽度显示，您看不到最后一列是正常的，它溢出了视口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:35:02.443

我假设你已经`width: 100%`在你的桌子上设置了，那就是你的问题，它们被设置为窗口的宽度，然后向右移动，所以你看不到最后一列，你应该将宽度更改为较低的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:24:34.610

你在这里有几个问题。

首先，您已经为表格定义了固定宽度。根据在祖先元素上设置溢出属性的方式，它可能会导致您描述的剪辑，因为该元素对于该空间来说太宽了。目前尚不清楚您希望这些元素有多宽，但这样的事情可以解决问题：

```
table.brown {
    min-width: 80%; /* or just plain `width: 80%` */
} 
```

最终，您将无法调整大小，因为表格的内容根本不允许这样做。一旦您的单元格缩小到 1 个字宽，您就无法在不添加`word-break: break-all`.

其次，如果你想将它推向一个特定的方向，你想为你的边距使用不同的设置。使用*auto*作为 margin-left 的值会导致元素一直向右移动。

```
table.brown {
    margin-left: auto;
} 
```

[http://jsfiddle.net/x7HD9/3/](http://jsfiddle.net/x7HD9/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T18:45:35.333

CSS 太多了，我什至无法尝试和理解。我认为从头开始只使用一个表格，然后逐渐添加 CSS 将是一个好主意。

# c++ - Function template specialization (templated on an int value)

> ID：14839333
> 
> 赞同：1
> 
> 时间：2013-02-12T18:32:48.647
> 
> 标签：c++, templates

I am using [Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page) linear algebra package, where they provide matrices templated on the dimensions. I would like to have some functions that generate test data for my program, and so I am trying to template them on the dimensions as well, and have specific specialisations:

```
template <size_t K>
boost::shared_ptr<std::vector<DistParams<K> > > sampleDistParams()
{
throw "not implemented";
}

template <size_t K>
boost::shared_ptr<std::vector<DistParams<K> > > sampleDistParams<1>()
{
boost::shared_ptr<std::vector<DistParams<K> > > distParams=(new std::vector<DistParams<K> >());
distParams->push_back(DistParams<K>(asMatrix(0.05), asMatrix(0.1)));
distParams->push_back(DistParams<K>(asMatrix(-0.1), asMatrix(0.2)));
return distParams;
}

template <size_t K>
boost::shared_ptr<std::vector<DistParams<K> > > sampleDistParams<2>()
{
boost::shared_ptr<std::vector<DistParams<K> > > distParams=(new std::vector<DistParams<K> >());
Eigen::Vector2d highMu;
lowMu << 0.04 << 0.06;
Eigen::Matrix2d lowSigma;
highSigma << 0.1 << 0.4
          << 0.4 << 0.12;

    Eigen::Vector2d lowMu;
lowMu << -0.08 << -0.12;
Eigen::Matrix2d highSigma;
highSigma << 0.2 << 0.7
          << 0.7 << 0.24;

distParams->push_back(DistParams<K>(highMu, lowSigma));
distParams->push_back(DistParams<K>(lowMu, highSigma));
return distParams;
} 
```

however, this stuff doesn't compile. I get:

```
/home/ga1009/PhD/cpp/pmi/cpp/test/baumiterationtest.cpp:24:73: error: template-id ‘sampleDistParams<1>’ in declaration of primary template
/home/ga1009/PhD/cpp/pmi/cpp/test/baumiterationtest.cpp:24:53: error: redefinition of ‘template<unsigned int K> boost::shared_ptr<std::vector<DistParams<K> > > {anonymous}::sampleDistParams()’
/home/ga1009/PhD/cpp/pmi/cpp/test/baumiterationtest.cpp:18:53: error: ‘template<unsigned int K> boost::shared_ptr<std::vector<DistParams<K> > > {anonymous}::sampleDistParams()’ previously declared here
/home/ga1009/PhD/cpp/pmi/cpp/test/baumiterationtest.cpp:33:73: error: template-id ‘sampleDistParams<2>’ in declaration of primary template
/home/ga1009/PhD/cpp/pmi/cpp/test/baumiterationtest.cpp:33:53: error: redefinition of ‘template<unsigned int K> boost::shared_ptr<std::vector<DistParams<K> > > {anonymous}::sampleDistParams()’
/home/ga1009/PhD/cpp/pmi/cpp/test/baumiterationtest.cpp:18:53: error: ‘template<unsigned int K> boost::shared_ptr<std::vector<DistParams<K> > > {anonymous}::sampleDistParams()’ previously declared here 
```

What went wrong and how can I fix it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:40:36.793

If you want to specialize a function template, you should not redeclare the template parameters (note that you cannot *partially* specialize a function template):

```
template<size_t K> void foo() { } // Primary template

template<size_t K> void foo<1>() { } // ERROR: Redefinition
template<> void foo<1>() { } // OK: Specialization 
```

In your particular case, the right signature for the template specialization is:

```
template<>
boost::shared_ptr<std::vector<DistParams<1> > > sampleDistParams<1>() 
```

Also notice, that in C++11 the spaces between the closing angle brackets (`>`) are no more necessary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:40:50.573

wrong syntax:

template specialization should be:

```
template <>
boost::shared_ptr<std::vector<DistParams<K> > > sampleDistParams<1>() 
```

# objective-c - 核心动画：将 anchorPoint 设置为 10.8 以围绕其中心旋转图层

> ID：14839335
> 
> 赞同：10
> 
> 时间：2013-02-12T18:33:02.813
> 
> 标签：objective-c, macos, cocoa, core-animation, core-graphics

**注意：这是针对 OS X 上的 Cocoa 应用程序，而不是 iOS。**

我有一个层支持的 NSButton（NSView 的子类）。我想要做的是使用核心动画旋转那个按钮。我正在使用以下代码来做到这一点：

```
CABasicAnimation *a = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
a.fromValue = [NSNumber numberWithFloat:0];
a.toValue = [NSNumber numberWithFloat:-M_PI*2];
[_refreshButton.layer setAnchorPoint:CGPointMake(0.5, 0.5)];
a.duration = 1.8; // seconds
a.repeatCount = HUGE_VAL;
[_refreshButton.layer addAnimation:a forKey:nil]; 
```

这是可行的，除了当它运行时，图层会向下和向左跳跃，使其中心点位于 NSView 的原点，即 (0,0) 处的左下角。然后图层围绕其中心旋转，但显然跳到左下角是不可接受的。

因此，经过大量阅读，我在 10.8 API 发行说明中找到了这一行：

```
On 10.8, AppKit will control the following properties on a CALayer 
(both when "layer-hosted" or "layer-backed"): geometryFlipped, bounds, 
frame (implied), position, anchorPoint, transform, shadow*, hidden, 
filters, and compositingFilter. Use the appropriate NSView cover methods 
to change these properties. 
```

这意味着 AppKit 在上面的代码中“忽略”了我对 -setAnchorPoint 的调用，而是将该锚点设置为 NSView 的原点 (0,0)。

我的问题是：我该如何解决这个问题？为图层设置anchorPoint的“适当的NSView覆盖方法”是什么（我在NSView上找不到这样的方法）。归根结底，我只想让我的按钮无限期地围绕其中心点旋转。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T21:28:11.923

我没有看到任何`NSView`直接“覆盖” `anchorPoint`.

除了您引用的内容外，我在[10.8 发行说明中看到的是：](http://developer.apple.com/library/mac/#releasenotes/Cocoa/AppKit.html)

> anchorPoint 也总是设置为 (0,0)，...</p>

控制图层的`anchorPoint`哪个点位于`position`超图层的坐标系中。 `NSView`设置`self.layer.anchorPoint`为 (0,0)，这意味着图层的左下角位于`self.layer.position`。

当您设置`anchorPoint`为 (0.5,0.5) 时，这意味着图层的中心应该在图层的`position`. 由于您没有修改`position`，因此如您所见，这具有将图层向下和向左移动的效果。

您需要计算`position`您希望图层在`anchorPoint`(0.5,0.5) 时具有的值，如下所示：

```
CGRect frame = _refreshButton.layer.frame;
CGPoint center = CGPointMake(CGRectGetMidX(frame), CGRectGetMidY(frame));
_refreshButton.layer.position = center;
_refreshButton.layer.anchorPoint = CGPointMake(0.5, 0.5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-20T08:57:33.513

我在 Swift 中遇到了与 @Bryan 完全相同的问题：对象会在动画期间从其原始位置跳开。这是用于 macOS 的脉冲 NSButton 的代码：

```
 let frame : CGRect = startButton.layer!.frame
  let center : CGPoint = CGPoint(x: frame.midX, y: frame.midY)
  startButton.layer?.position = center;
  startButton.layer?.anchorPoint = CGPoint(x: 0.5, y: 0.5)

  let pulse = CASpringAnimation(keyPath: "transform.scale")
  pulse.duration = 0.2
  pulse.fromValue = 0.95
  pulse.toValue = 1.0
  pulse.autoreverses = true
  pulse.repeatCount = 10
  pulse.initialVelocity = 0.5
  pulse.damping = 1.0

  startButton.layer?.add(pulse, forKey: "pulse") 
```

# javascript - Sammyjs 和 pagerjs 路由

> ID：14839337
> 
> 赞同：1
> 
> 时间：2013-02-12T18:33:05.797
> 
> 标签：javascript, knockout.js, sammy.js, pagerjs

我开始使用 KnockoutJS (2.2.1)、SammyJS (0.7.4) 和[PagerJS](http://pagerjs.com/)（最新来自 github 和 jquery hashchange）的组合来创建单页应用程序，我遇到了路由问题，因为它们在 Chrome 版本 24.0.1312.57 m 或 Firefox 16.0 中不起作用（由于某种原因，它实际上在 IE7 中起作用）。

使用 sammyjs，我指定了应用程序应响应的路由及其相应的操作，例如加载用户数据。pagerjs 中使用相同的路由来指定要显示的页面。由于某种原因，执行了 sammyjs 代码，但没有执行 pagerjs 代码。

在更新路由时，例如从`#!/`to `#!/user`，pagerjs 不会切换到新页面，但在`#!/user?uid=123`和 之间切换时数据会按预期更新`#!/user?uid=321`。但是，当删除 sammyjs 代码时它可以工作 - 页面之间的切换可以工作，但数据当然不会正确更新。

似乎 SammyJS 终止了 pagerjs 的进一步执行，但由于我对这些库很陌生，这很可能是我的代码行为不端。非常适合任何见解。

javascript 代码如下所示：

```
 var UserModel = function () {

        var self = this;
        self.userId = null;
        self.user = ko.observable();
        self.userid = ko.observable();

        // Load
        self.load = function(userId) {
            self.loadUser(userId);
        };

        // Load user data
        self.loadUser = function(userId) {
        console.log('Loading user data');
        }; 

        // Client-side routes    
        Sammy(function () {

            // Overview - datatables in tabs
            this.get('#!/', function () {
                console.log('Start page');
            });

            // User - details
            this.get('#!/user', function () {
                console.log('user page');
                self.userId = this.params.uid;
                self.load(self.userId);
            });

        }).run();

    }

// Renders user info
$(document).ready(function () {
    if ($('#user-info').length) {
        var userModel = new UserModel(); 
        pager.extendWithPage(userModel);
        ko.applyBindings(userModel);
        // Load initial data via ajax
        userModel.load();
        pager.Href.hash = '#!/';
        pager.startHashChange();
    }
    $('.dropdown-toggle').dropdown();
}); 
```

这是带有 pagerjs 数据绑定的 HTML：

```
<div class="container">

    <div data-bind="page: {id: 'start'}">
        Startpage
    </div>

    <div data-bind="page: {id: 'user', params: ['uid']}">
        User page
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:19:02.443

我想我明白了。

您需要添加

```
this.get(/.*/, function() {
    console.log("this is a catch-all");
}); 
```

在你最后一次之后`this.get`。然后 Sammy 并没有停止活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:35:10.580

我通过将 PagerJS 更改为使用天真的历史管理器而不是 jQuery hashchange 来实现它。换句话说，这一行：

```
pager.startHashChange(); 
```

改为：

```
pager.start(); 
```

神奇的是，即使[http://pagerjs.com](http://pagerjs.com)上的文档声明它不支持，它也可以在 IE7 中使用。好吧，对我来说它确实有效

```
// 1\. iff using naïve hashchange - wont work with IE7
pager.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:00:47.990

只要你包含 hashchange 插件 pager.start() 就会使用它。

> 和naïve一样，但是需要先包含jQuery hashchange插件。

[http://pagerjs.com/demo/#!/navigation/setup](http://pagerjs.com/demo/#!/navigation/setup)

# windows - #!/usr/bin/perl 不需要在 Windows 中运行 perl，但是

> ID：14839338
> 
> 赞同：3
> 
> 时间：2013-02-12T18:33:07.697
> 
> 标签：windows, perl

关于使用的类似问题

```
#! /usr/bin/perl 
```

已得到答复。但我认为我有一个稍微不同的问题，尽管鉴于我对计算缺乏了解，可能仍然与知情人士相似。

我的 Windows 上没有 UNIX，因此无法直接测试以下内容，但是虽然我在 Windows 下运行 Perl 确实不需要 shebang 行，但在 hello.pl 中使用 shebang 行，我仍然无法运行如果我搬离

```
c:\Users\XYZ\Desktop\BegPerl 
```

至

```
c:\Users\XYZ\Desktop 
```

我的脚本存储在

```
c:\Users\XYZ\Desktop\BegPerl 
```

我的 perl 文件夹存储在

```
c:\Strawberry\perl\bin\perl.exe 
```

所以我的问题是：

1.  Windows 如何找到“perl.exe”？
2.  为什么 Windows 只能在我键入时找到 hello.pl `perl hello.pl`，`c:\Users\XYZ\Desktop\BegPerl`但`c:\Users\XYZ\Desktop`即使包含 shebang 行也不能找到？

我得到的关于shebang线的“目的”的答案是

> 用于类 UNIX 系统来定位脚本的可执行文件

所以，我想我的两个问题的答案可能与类 UNIX 系统和 Windows 之间的区别有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:36:50.203

通过将`pl`文件扩展名与`perl.exe`操作系统注册表相关联。所在的目录`perl.exe`应该在系统中`PATH`。

两者都应该在您安装 perl 时发生，但如果不是，那就是您需要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:16:20.447

1.  `dir/perl script.pl`或者`/dir/perl script.pl`

    *   Unix：操作系统将`perl`在指定路径中搜索。不会使用 shebang 线。*
    *   Win：操作系统将`perl`在指定路径中搜索。不会使用 shebang 线。*
2.  `perl script.pl`

    *   `perl`Unix：操作系统将在 PATH 环境变量中的路径进行搜索。不会使用 shebang 线。*
    *   Win：操作系统将搜索`perl`相对于当前目录和 PATH 环境变量中的路径。不会使用 shebang 线。*
3.  `script.pl`

    *   Unix：操作系统将寻找 shebang 行，并执行指定的程序和参数，后跟脚本名称和命令行参数。
    *   Win：操作系统将查找具有该扩展名的文件的文件关联，并执行指定的程序和参数。`%1`将替换为文件名。`%*`将替换为命令行参数。

** —系统*不会使用 shebang 线路。如果没有使用，Perl 实际上会对 shebang 行进行自己的解释。即使没有使用 shebang 线，这也允许`-w`那里生效。

# android - 并非所有元素都显示在较小的屏幕上

> ID：14839340
> 
> 赞同：0
> 
> 时间：2013-02-12T18:33:10.357
> 
> 标签：android, android-layout, android-screen-support

我有一个带有一些 EditText 和按钮的线性布局。在较小的屏幕上运行应用程序时，布局会被截断（并非所有元素都显示）。我已经`<supports-screens ...>`在清单中添加了，但它仍然无法正常工作。有没有办法显示所有元素？

**编辑：代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textStyle="bold"
    android:text="@string/tx" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tx1"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="@string/ed1"
    android:inputType="number" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tx2"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/ed2"
    android:inputType="textCapCharacters|textAutoCorrect"
    android:ems="10" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/tx3"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/ed3"
    android:inputType="textCapCharacters|textAutoCorrect"
    android:ems="10" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="304dp"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/radioTX1" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radioTX2" />

    <RadioButton
        android:id="@+id/radio3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radioTX3" />
</RadioGroup>

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="doSomething"
    android:text="@string/bt1" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:36:07.110

您应该确保您的布局尽可能灵活。这包括使用 RelativeLayouts 之类的东西，以及[layout_weight 之](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_weight)类的东西。您还可以通过更改屏幕尺寸在 android 布局编辑器中预览您的布局……这样可以确保它在更小（或更大）的屏幕尺寸上表现得如预期。

这种心态应该类似于 Web 开发人员制作响应式布局。可以在此处找到来自 Google 的一些出色的文档/指南：http:
[//developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:47:34.590

好吧，如果没有足够的空间在小屏幕上显示所有这些，那么您应该将所有这些都放在 ScrollView 中，以便用户可以滚动页面。Android 不会自动为您添加 ScrollView。

您可以为所有尺寸的屏幕执行此操作（即使他们有更大的屏幕也不应该伤害任何人）或仅针对较小的屏幕。

# php - PHP 随机数循环

> ID：14839342
> 
> 赞同：-2
> 
> 时间：2013-02-12T18:33:11.210
> 
> 标签：php, while-loop

我有一个生成 20 个随机数的函数：

```
function randomAttempts()
{
  $i=1;
      while($i<=20)
      {
          echo "The number is " . rand(1,100) . "<br>";
          $i++;
      }
} 
```

但是，我的问题是 - 例如，我如何回显“第 10 个”随机数或“第 11 个”等？

我想我错过了这里的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:36:11.320

最简单的解决方案是这样的：

```
function randomAttempts()
{
    $i=1;
    $printIndex = 11;
    while($i<=20)
    {
        if ($i == $printIndex)
            echo "The number is " . rand(1,100) . "<br>";
        $i++;
    }
} 
```

或者您可以将 $printIndex 作为参数传递给您的函数

编辑：如果您需要让我们说第 11 个，那么生成 20 个数字是没有意义的。像这样的代码会更好：

```
function randomAttempts($printIndex = 1)
{
    $i = 1;
    $random = 0;
    while($i<=$printIndex )
    {
        $random = rand(1,100);
        $i++;
    }
    echo "The number is " . $random . "<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:36:39.293

```
function randomAttempts($num)
{
  $i=1;
  $ar=array();
  while($i<=$num)
  {
      $ar[]=rand(1,100);
      $i++;
  }
  $out=array_pop($ar);
  unset($ar);
  return $out;
} 
```

样本

```
echo randomAttempts(10);

echo randomAttempts(11); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:36:53.867

```
function randomAttempts($passNthNumberToBeEchoed)
{
  $i=1;
      while($i<=20)
      {
          $randNum =  rand(1,100);

          if($passNthNumberToBeEchoed==$i){
            echo "The number is " . $randNum  . "<br>";
            }

          $i++;
      }
} 
```

希望能帮助到你。

# c# - 正则表达式检查双打、三连等

> ID：14839351
> 
> 赞同：-4
> 
> 时间：2013-02-12T18:33:50.417
> 
> 标签：c#, regex

我需要正则表达式从电话号码中检索没有双打、三连音、四连音等

以下是示例，数字是 1001055522 它应该返回我

```
group              Numbers
=============================
Doubles            00
                   22 
Triplets           555 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:44:09.090

此正则表达式与一起使用时`Regex.Matches`将产生精确的双精度或三重精度（不是较长连续序列的一部分）。这是由于量词的贪婪。

```
(\d)\1+ 
```

[**演示**](http://www.regex101.com/r/cN1rU8)

好吧，剩下的就是检查字符串的长度并计数......我就交给你了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:39:25.200

要查找双打，请使用反向引用：

```
(.)\1 
```

这是一个演示：[http ://regex101.com/r/zC3fM1](http://regex101.com/r/zC3fM1)

* * *

要找到三元组，只需重复反向引用：

```
(.)\1{2} 
```

这是一个演示：[http ://regex101.com/r/cJ4lJ8](http://regex101.com/r/cJ4lJ8)

* * *

如果你想匹配所有连续的数字，不管有多少，然后`+`在反向引用上使用：

```
(.)\1+ 
```

这是一个演示：[http ://regex101.com/r/pL8sB3](http://regex101.com/r/pL8sB3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:56:29.320

```
Dim n = "1001055522"

Dim doubles = System.Text.RegularExpressions.Regex.Matches(n, "(.)\1")
Dim triples = System.Text.RegularExpressions.Regex.Matches(n, "(.)\1{2}")

'Doubles
For Each d As System.Text.RegularExpressions.Match In doubles
    Console.WriteLine(d.Value)
Next

'Triples
For Each t As System.Text.RegularExpressions.Match In triples
    Console.WriteLine(t.Value)
Next 
```

# mysql - MySQL INNER JOIN E:#1054 - 我不明白

> ID：14839352
> 
> 赞同：-3
> 
> 时间：2013-02-12T18:34:04.067
> 
> 标签：mysql, inner-join

```
SELECT t1.id, t1.item, t2.tag
FROM items AS t1
INNER JOIN tagged AS t2 ON t1.id = t2.item_id 
```

返回 #1054 - “字段列表”中的未知列“t1.id”

我不明白为什么它会失败。我直接从手册中复制了该语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:45:11.647

`t1`和`t2`是别名，分别代表`items`表和`tagged`表（`items AS t1`, `tagged AS t2`）。通过说`t1.id`，你在说`use the field (column) named id in the items table`

`id`如果您的表中不存在名为的列`items`，则查询将失败。通过键入检查您的表结构`DESCRIBE items`，这将显示表中的所有列。

# android - 如何将 byte[] 转换为 String 而不会在 Android 中出现内存不足错误？

> ID：14839353
> 
> 赞同：2
> 
> 时间：2013-02-12T18:34:06.910
> 
> 标签：android, string, bytearray, apache-commons

我开发了一个 android 应用程序，它将以压缩格式消耗大量数据。我曾经解压缩它，当我解析解压缩的文件时，它显示内存不足错误，因为堆大小增加到 125MB。我正在使用 apache commons.io 来获取 byte[] b 并且我正在给 String s =new String(b);我尝试了 Stringbuilder 但我无法获得该逻辑。有没有其他方法可以在 android 中安全地将 byte[] 转换为 String ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:35:54.000

没有办法一次将那么多数据 (125MB) 转换为字符串。您最好以更易于管理的块的增量步骤执行此操作。

# outlook - 邮件预览正文的 Outlook 2010 条件格式

> ID：14839355
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:34:11.677
> 
> 标签：outlook, ms-office

在 Outlook 2010 中，当您使用条件格式时，我似乎只能在小预览窗格中更改邮件*主题。*有没有办法，比如说，加粗消息*正文*的预览以及消息主题，而不是只加粗未读电子邮件的消息主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:43:42.683

不，只有资源管理器消息列表使用自定义格式。

# orm - DataNucleus JDO 使用外键反向数据存储 1:1 映射

> ID：14839360
> 
> 赞同：0
> 
> 时间：2013-02-12T18:34:18.950
> 
> 标签：orm, jdo, datanucleus, jdoql

我有一个 DataNucleus 项目，我正在使用 JDO 将数据存储区反向映射到我的类。我很容易做到这一点：

```
package com.sample;

import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(table = "source")
public class Source {

    @PrimaryKey
    private String source_id;
    private Topic topic_id;
    private String url;
    private String description;

    // getters and setters

}

public class Topic {
    private String topic_id;
    private String topicName;
    private String topicDescription;

    // getters and setters

} 
```

是另一个表 topic的`topic_id`外键，其中包含一个 id、一个 topicName 和一个 topicDescription。

我知道使用注释可以返回 topic.id、topic.topicName 和 topic.topicDescription 以及 topic_id。我只是不知道怎么做，而且我发现文档有点神秘，尤其是对于反向映射。

任何人都可以伸出援助之手并提供一个例子吗？我尝试过使用@ForeignKey 和@Element 注释，但我还没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:42:18.257

如果“topic_id”是另一个对象的 FK（未发布），那么 Java 类应该有一个 Topic 对象字段，就像任何正常的 1-1（面向对象）关系一样

# r - R 中每个强度下 N 次试验的正确百分比

> ID：14839364
> 
> 赞同：1
> 
> 时间：2013-02-12T18:34:35.187
> 
> 标签：r, percentage

我无法弄清楚如何找到 V3 中每个不同数字的正确百分比。V4 显示答案是否正确。V2 是块号。

```
V2 V3 V4 

1  4  1      
1 10  1  
1  4  0  
1  4  1  
1 10  0  
2  8  1
2  8  0 
```

谢谢你的帮助。我是 R 新手，已经在谷歌上搜索了几个小时这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:42:15.713

调用您的数据框`DF`：

```
tapply(DF$V4 * 100, DF$V3, mean) 
```

将为您提供 中每个唯一数字的正确百分比`V3`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:42:06.570

在这里使用 data.table 可能会有所帮助

```
library(data.table)
mydt <- data.table(DF, key="V2")
mydt[, mean(V4), by=V3] 
```

结果：

```
 V3        V1
1:  4 0.6666667
2: 10 0.5000000
3:  8 0.5000000 
```

* * *

**然后，如果您想从美学角度对其进行清理：**

```
# you can format it nicely using round
mydt[, round(100*mean(V4),2), by=V3]

#      V3    V1
#   1:  4 66.67
#   2: 10 50.00
#   3:  8 50.00

# you can give the new column a name (wrap it all in a list)
mydt[, list("Percent" = round(100*mean(V4),2)), by=V3]

#     V3   Percent
#   1:  4    66.67
#   2: 10    50.00
#   3:  8    50.00 
```

# python - 在 Python 中保存和覆盖变量

> ID：14839366
> 
> 赞同：0
> 
> 时间：2013-02-12T18:34:46.030
> 
> 标签：python, variables, memory, overwrite

我需要一些关于覆盖 python 变量的帮助。这是我能举出的最好的例子。如果有人打开我的程序（在`.exe`or中`.py`）并且这会出现：

```
var = 5
var = raw_input("Enter the new variable value: ") ##THE PERSON ENTERS 3
var = 3 
```

现在，用户关闭文件/程序，下次他们打开它时，他们希望程序记住它`var = 3`，所以它覆盖了`var = 5`with `var = 3`。我不知道这是否可能，但如果可以，你能告诉我吗？

澄清：我希望我的`.py`或`.exe`记住一个变量已更改，并用新变量覆盖旧变量，因此下次他们打开文件时，该变量已经更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:39:59.240

您需要以某种方式存储该值，例如在文件、数据库或某些服务中。

例如，使用一个[简单的文件](http://docs.python.org/2/library/io.html#text-i-o)：

```
import io,os
try:
    with io.open('~/.jordan_last_value', 'r', encoding='utf-8') as f:
        var = f.read()
except IOError: # Read failed
    var = raw_input('Enter the new variable value')

    # Save value to disk
    with io.open('~/.jordan_last_value', 'w', encoding='utf-8') as f:
       f.write(var)

print ('Current value is ' + var) 
```

如您所见，这可能有些复杂，因此您可能需要重新了解[文件处理](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)知识。此外，此示例代码可以只存储字符串。

如果您希望能够存储更复杂的对象，则首先需要一种将它们从字节串转换为字节串的方法。看看[json](http://docs.python.org/2/library/json.html)或[pickle](http://docs.python.org/2/library/pickle.html)模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:37:56.797

您可以使用[pickle](http://docs.python.org/2/library/pickle.html#example)模块、json 或其他任何东西：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:57:45.603

使用[`pickle`](http://docs.python.org/2/library/pickle.html?highlight=pickle#usage)模块：

```
import pickle
try: # try to open the file
    with open('jordan_data.pkl', 'r+') as f:
        var = pickle.load(f)
except IOError: # if it doesn't exist, get new input
    var = raw_input("Enter the new variable value: ") # THE PERSON ENTERS 3
    with open('jordan_data.pkl', 'a+') as f: # 'a' will create the file if it doesn't exist
        pickle.dump(var, f) # then, save the file 
```

# javascript - 车把模板中的布尔逻辑

> ID：14839375
> 
> 赞同：6
> 
> 时间：2013-02-12T18:35:06.980
> 
> 标签：javascript, ember.js, handlebars.js

是否可以在有条件的车把中执行布尔逻辑？

现在我用控制器功能欺骗了这种行为，所以我最终得到了控制器

```
App.ApplicationController = Ember.Controller.extend({
    bool1: true,
    bool2: true,
    both: function(){ return this.bool1 && this.bool2; }.property('content.both'),
}); 
```

这允许我使用车把模板

```
<script type="text/x-handlebars">
  {{#if both}}
     <p> both were true </p>
  {{/if}}
</script> 
```

这很好用，但会引发一些问题。首先，它掩盖了正在发生的事情（特别是如果没有使用好的函数名）。其次，它似乎有点侵犯了 MVC 的分离。

有没有可能做一些事情

```
<script type="text/x-handlebars">
  {{#if bool1 && bool2}}  <!-- this will not actually work -->
     <p> both were true </p>
  {{/if}}
</script> 
```

并让它工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-18T02:05:19.267

也许你可以试试这个车把助手：

```
Handlebars.registerHelper('ifCond', function (v1, operator, v2, options) {

switch (operator) {
    case '==':
        return (v1 == v2) ? options.fn(this) : options.inverse(this);
    case '===':
        return (v1 === v2) ? options.fn(this) : options.inverse(this);
    case '<':
        return (v1 < v2) ? options.fn(this) : options.inverse(this);
    case '<=':
        return (v1 <= v2) ? options.fn(this) : options.inverse(this);
    case '>':
        return (v1 > v2) ? options.fn(this) : options.inverse(this);
    case '>=':
        return (v1 >= v2) ? options.fn(this) : options.inverse(this);
    case '&&':
        return (v1 && v2) ? options.fn(this) : options.inverse(this);
    case '||':
        return (v1 || v2) ? options.fn(this) : options.inverse(this);
    default:
        return options.inverse(this);
} 
```

});

并像这样调用它：

```
 {{#ifCond showDistance "&&" distance}}
      <span class="distance">
          {{distance}}
      </span>
 {{else}}
      {{#if showRegion}}
           <span class="region">
           </span>
      {{/if}}
 {{/ifCond}} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T19:14:58.747

你不能直接做到这一点，但用一点[`arguments`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/arguments)解析和可变参数帮助器并不难。像这样的东西：

```
Handlebars.registerHelper('if_all', function() {
    var args = [].slice.apply(arguments);
    var opts = args.pop();

    var fn = opts.fn;
    for(var i = 0; i < args.length; ++i) {
        if(args[i])
            continue;
        fn = opts.inverse;
        break;
    }
    return fn(this);
}); 
```

然后在模板中你可以说：

```
{{#if_all a b c}}
    yes
{{else}}
    no
{{/if_all}} 
```

您可以根据需要使用尽可能多的参数`{{#if_all}}`。您可能需要调整真实性测试以匹配 Handlebars since [`{{#if}}`](http://handlebarsjs.com/#conditionals)Treats

```
`false`, `undefined`, `null`, `""` or `[]` (a "falsy" value) 
```

as falsey 和其他所有内容一样真实，而`[]`在 JavaScript 中是真实的。

演示：http: [//jsfiddle.net/ambiguous/vrb2h/](http://jsfiddle.net/ambiguous/vrb2h/)

# c# - 如何将 vb.net 泛型类转换为 c#？

> ID：14839376
> 
> 赞同：-2
> 
> 时间：2013-02-12T18:35:07.823
> 
> 标签：c#, .net, generics, interface

我有这个 .NET 解决方案，我需要在其中获取一些旧的 vb.net 项目并将它们转换为新的 c# 项目。我坚持使用一个特定的界面，需要一些帮助。这是 vb.net 签名：

```
Public Interface SomeInterface(Of T as Class)
    Inherits IDisposable

...
End Interface 
```

我如何在 C# 中编写这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:37:20.390

```
public interface SomeInterface<T> : IDisposable where T : class
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:45:14.297

```
public interface SomeInterface<T> : IDisposable 
  where T : class
{
} 
```

`SomeInterface(Of T as Class)`成为 C# generic`SomeInterface<T>`和 C# constraint `where T : class`。

C# 中的`Inherits IDisposable`只是`: IDisposable`.

其余的只是 C# 使用小写作为其关键字的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:00:18.297

您应该能够简单地将类按原样包含在项目中。我至少有一个使用 C# 资源的 VB.Net 项目。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T18:37:53.050

```
public interface SomeInterface<T> :IDisposable where T:class
{
} 
```

# apache-flex - 在浏览器中配置代理设置时偶尔发生 Channel.Call.Failed

> ID：14839377
> 
> 赞同：0
> 
> 时间：2013-02-12T18:35:12.597
> 
> 标签：apache-flex, tomcat, blazeds

我有一个 BlazeDS 服务通过 SecureAMFChannel 进行调用，作为 Flex 4 客户端的一部分-> 由 tomcat 托管的 Java 服务器应用程序。我看到一个奇怪的问题，当浏览器中设置了任何代理设置时，服务调用会导致看似随机的`NetConnection.Call.Failed`(faultCode = ) 错误。`Channel.Call.Failed`我们不使用代理。

比如通过火狐运行时，如果在高级网络连接设置中勾选了“自动检测代理设置”选项，会偶尔抛出NetConnection.Call.Failed错误。将选项设置为“无代理”将导致故障消失。

对于 Internet Explorer，必须禁用组策略设置，如[本文](http://support.microsoft.com/kb/271361)所述，在偶发的连接故障消失之前。

任何 tomcat 日志中都没有服务器端消息行。将 firebug 与 AMFExplorer 一起使用，似乎问题纯粹发生在客户端，在 flex swf 应用程序中。

Ping wpad 会导致“Ping 请求找不到主机 wpad”。

我尝试转移到不安全的 AMF 通道以及 HTTP 和 HTTPS，但没有成功（问题仍然存在）。这让我困惑不已。如果有什么我应该发布的，请告诉我。

**更新：**
我已经跟踪了很多关于 AJP 超时设置的零星问题，如问题[here](https://stackoverflow.com/questions/3145065/netconnection-call-failed-happening-sporadically-in-flex3-tomcat-blazeds-spring)中所述。不幸的是，故障仍然发生，虽然看起来不那么频繁了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:36:31.337

大部分问题都来自这个类似的堆栈问题：

[NetConnection.Call.Failed 在 Flex3/Tomcat/BlazeDS/Spring 中偶尔发生](https://stackoverflow.com/questions/3145065/netconnection-call-failed-happening-sporadically-in-flex3-tomcat-blazeds-spring)

不幸的是，虽然它确实缓解了一些问题，但仍然存在零星的故障。我将其余的故障追溯到 Firefox 中的一个错误，该错误在启用自动检测代理时发生，导致它丢失一些标头，如下所示：

[https://bugzilla.mozilla.org/show_bug.cgi?id=669759](https://bugzilla.mozilla.org/show_bug.cgi?id=669759)

此 firefox 错误已在 2012 年 9 月左右修复。更新到最新版本的 firefox 或该日期之后的版本将解决此问题。

# vb.net - 在将附件变量添加到邮件消息之前，如何检查附件变量是否为空？

> ID：14839387
> 
> 赞同：0
> 
> 时间：2013-02-12T18:35:51.890
> 
> 标签：vb.net, ssis

我已经设法使用带有 VB.NET 代码的脚本任务从我的 SSIS 包发送电子邮件。我不擅长编写脚本，我基本上是在网上查看各种脚本以使我到达我所在的位置。我遇到的问题是我已经在 BIDS 的 SSIS 包中设置了所有变量，并且在我的包中将它们设置为*ReadOnly*。

*如果我为我的Attachment*包变量指定一个值，那么一切正常，但如果我不这样做，那么我的脚本就会失败。当我用我的脚本发送电子邮件时，我并不总是想发送附件。我希望修改代码，以便如果在 BIDS 的 SSIS 包中没有为我的*Attachement*变量指定值，那么我的脚本任务只会在正文中发送消息而不会失败。

另外如果可能的话，发送附件的时候希望能够发送多个附件。我也意识到，现在我已经设置了我的脚本，因为我似乎不再需要*`SendMail Task`*SSIS 中的一切，一切都可以通过脚本和我在 SSIS 中设置的变量来工作。

我不应该能够连接*`Script Task`*到*`Send Mail Task`*使它们一起工作吗？

这是我的脚本任务代码：

```
Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Runtime
Imports System.Net.Mail
Imports System.Net

<System.AddIn.AddIn("ScriptMain", Version:="1.0", Publisher:="", Description:="")> _
<System.CLSCompliantAttribute(False)> _
Partial Public Class ScriptMain
Inherits Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase

Enum ScriptResults
    Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success
    Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
End Enum

Public Sub Main()

    MsgBox(Dts.Variables("Username").Value.ToString)

    Dim myHtmlMessage As MailMessage
    Dim mySmtpClient As SmtpClient

    Dim mailAuthentication As System.Net.NetworkCredential
    mailAuthentication = New System.Net.NetworkCredential( _
        Dts.Variables("Username").Value.ToString(), _
        Dts.Variables("Password").Value.ToString())

    myHtmlMessage = New MailMessage( _
         Dts.Variables("From").Value.ToString(), _
         Dts.Variables("To").Value.ToString(), _
         Dts.Variables("Subject").Value.ToString(), _
         Dts.Variables("Body").Value.ToString())

    myHtmlMessage.Attachments.Add(New Attachment(Dts.Variables("Attachments").Value.ToString))
    mySmtpClient = New SmtpClient(Dts.Variables("SMTPServer").Value.ToString(), Dts.Variables("Port").Value.ToString())
    mySmtpClient.UseDefaultCredentials = False

    mySmtpClient.Credentials = mailAuthentication
    mySmtpClient.EnableSsl = True
    mySmtpClient.Send(myHtmlMessage)
    Dts.TaskResult = ScriptResults.Success

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:31:07.637

“我不应该能够将脚本任务连接到发送邮件任务以使它们一起工作吗？”

您可以`Send Email Task`使用[表达式](http://msdn.microsoft.com/en-us/library/ms137547.aspx)（第三个选项卡）进行动态处理。表达式允许您根据值使 SSIS 包中的任何内容表现不同。如您所见，您需要修改的大多数属性都显示在下拉列表中。

![在此处输入图像描述](../Images/122ff42f24e030b162296be0b85904ec.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:50:19.993

### 在将值添加到邮件附件之前检查变量的逻辑

*   更改脚本中的以下行以*`Attachments`*使用函数检查变量中的值是否不为空*`String.IsNullOrEmpty`*。

*   在. _ **`User::`**_**`System::`**`Script Task`

*   *`System.IO.File.Exists`*要添加更多条件，您可以在将文件添加到邮件附件之前使用函数检查文件是否确实存在于指定路径中。

### 从：

```
myHtmlMessage.Attachments.Add(New Attachment(Dts.Variables("Attachments").Value.ToString)) 
```

### 至：

```
Dim attachment As String = Dts.Variables("User::Attachments").Value.ToString()

If Not String.IsNullOrEmpty(attachment) Then
    If System.IO.File.Exists(attachment) Then
        myHtmlMessage.Attachments.Add(New Attachment(attachment))
    End If
End If 
```

# php - 从数组中回显特定行

> ID：14839391
> 
> 赞同：1
> 
> 时间：2013-02-12T18:35:54.083
> 
> 标签：php, database, arrays, row

我目前有一张如下表。

```
ID  adPlacement     filePath    dateAdded   adName  adLink
12  1           Test 1.png  2013-02-12  Test 1  http://www.cuad.coop
13  1           Test 2.png  2013-02-12  Test 2  http://www.google.com 
```

我正在尝试随机选择一行并在单独的 echo 语句中回显 adName、adLink 和 filePath。

这是我现在正在使用的代码：

```
$query_adSpot1 = "SELECT * FROM advertisements WHERE adPlacement = 1";
$result = mysql_query($query_adSpot1, $server) or die(mysql_error());
while($row = mysql_fetch_array($result)){
$row = array(
    'adName' => $row['adName'],
    'filePath' => $row['filePath'],
    'adLink' => $row['adLink']
);
$fileLocation = $row;
$fileLocations[] = $fileLocation;   
}
shuffle($fileLocation);
echo $fileLocation[0]; 
```

现在，当我运行脚本时，它会编写 test 2.png、test 2 或[http://www.google.com](http://www.google.com)。

我希望能够与随机行分开回显，但需要单独的列等于同一行。

```
echo filePath
echo adName
echo adLink 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:41:45.070

您正在改组错误的数组，您应该使用：

```
shuffle($fileLocations);
                     ^ This is the one with all your values
var_dump($fileLocations[0]);
// will show you an array with 3 elements from the same row in the database 
```

您正在做的是重新排序在您的 sql 查询中找到的最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:42:24.570

您可以[`RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)在中使用该功能`MySQL`

```
$query_adSpot1 = "SELECT * FROM advertisements WHERE adPlacement = 1 ORDER BY RAND() LIMIT 1";
$result = mysql_query($query_adSpot1, $server) or die(mysql_error());
$row = mysql_fetch_array($result);
echo $row['filePath'];
echo $row['adName'];
echo $row['adLink']; 
```

# android - 如何永久存储可打包的自定义对象？

> ID：14839400
> 
> 赞同：7
> 
> 时间：2013-02-12T18:36:14.437
> 
> 标签：android, android-intent, parcelable

我想永久存储一个自定义对象（我们称之为 MyObject），这样如果它从内存中删除，我可以在应用程序再次启动时在我的`Activity`/`Fragment` `onResume()`方法中重新加载它。

我怎样才能做到这一点？`SharedPreferences`似乎没有存储可打包对象的方法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-12T18:58:04.750

如果需要将其存储在 SharedPreferences 中，可以将对象解析为 json 字符串并存储该字符串。

```
private Context context;
private MyObject savedObject;
private static final String PREF_MY_OBJECT = "pref_my_object";
private SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
private Gson gson = new GsonBuilder().create();

public MyObject getMyObject() {
    if (savedObject == null) {
        String savedValue = prefs.getString(PREF_MY_OBJECT, "");
        if (savedValue.equals("")) {
            savedObject = null;
        } else {
            savedObject = gson.fromJson(savedValue, MyObject.class);
        }
    }

    return savedObject;
}

public void setMyObject(MyObject obj) {
    if (obj == null) {
        prefs.edit().putString(PREF_MY_OBJECT, "").commit();
    } else {
        prefs.edit().putString(PREF_MY_OBJECT, gson.toJson(obj)).commit();
    }
    savedObject = obj;
}

class MyObject {

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:46:23.173

您可以将您`Bundle`作为一个包裹写入磁盘，然后获取`Parcel`后者并使用该`Parcel.readBundle()`方法来获取您的`Bundle`支持。

# sharepoint - 无法访问从 SharePoint 打开的 PowerPoint 的对象模型

> ID：14839406
> 
> 赞同：1
> 
> 时间：2013-02-12T18:36:29.180
> 
> 标签：sharepoint, vsto, ms-office, powerpoint, office-2010

我有一个适用于 PowerPoint 2007/2010 的 PowerPoint 加载项。我发现当活动演示文稿以只读模式从 SharePoint 网站打开时，它**无法正常工作。**

在这种情况下，对 PowerPoint 对象模型的各种调用都会产生错误

> 运行时错误“-2147467259 (80004005)”：
> 
> 形状（未知成员）：无效请求。无法修改演示文稿。

这包括明显良性的事情，如`Presentation.SaveAs`, `Presentation.SaveCopyAs`, access`Shape.Tags`等。都给出相同的错误。

虽然我的加载项是用 C#/VSTO 编码的，但我已经证实，事实上这些相同的东西会导致相同的错误，即使只是直接在 VBA 即时窗口中执行。

这对我来说是一场灾难，因为它实际上意味着我的加载项不能与从 SharePoint 打开的文档一起使用——这在某些组织中占大多数。

有没有解决的办法？

# java - 适用于高流量网站的 Play Framework、Java、Apache、PostgreSQL、JPA 和 Hibernate

> ID：14839409
> 
> 赞同：0
> 
> 时间：2013-02-12T18:36:38.337
> 
> 标签：java, performance, apache, hibernate, playframework

我要开发一个网站，它必须同时为超过 300 000 个用户提供服务（比如说，平均每秒 300 000 个 SQL 请求），对于这个网站，我想知道以下技术是否足以提供服务所有这些用户：

*   播放框架 => Java 服务器
*   Apache => 前端服务器负载平衡用户将他们重定向到正确的 Play Framework 服务器
*   带有 JPA 和 Hibernate 的 PostgreSQL => 用于数据库

您认为这些技术足以满足如此多的用户和请求吗？您认为我需要在多台服务器上托管应用程序和数据库吗？

谢谢您的回答 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:15:20.653

嗯，这取决于每秒 300 000 个 SQL 请求的性质，但我认为无论您使用什么软件，您都需要大量服务器。如果您可以使用某种 NoSQL 技术而不是关系数据库，那么您可以使用更少的服务器。（例如，对于 Redis 100 000 requests/sec 是[可能的](http://redis.io/topics/benchmarks)）

好消息是，一旦您同时拥有 30 万用户，您还将有足够的资金聘请最优秀的专家团队，他们将能够解决您的技术问题 :)

# hadoop - 从 Apache Pig 中的数据派生 FileName

> ID：14839411
> 
> 赞同：0
> 
> 时间：2013-02-12T18:36:43.113
> 
> 标签：hadoop, apache-pig

我正在处理一种情况，我想将猪脚本中的数据存储到文件中。这样做非常简单，但我希望文件名来自数据本身。所以，我在数据中有一个字段作为时间戳。我想使用 MAX(timestamp) 作为文件名来存储当天的所有数据。

我知道 STORE data INTO '$outputDir' USING org.apache.pig.piggybank.storage.MultiStorage('$outputDir', '2', 'none', ','); 的用法

但是这个变量“outputDir”应该作为参数传递。我想用字段的派生值设置这个值。

任何指针都会非常有帮助。

感谢和问候，

阿图尔·阿加瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:06:09.540

在 MultiStorage 中，您指定一个根目录，因为通常 HDFS 安装由许多用户共享，因此您不希望将数据写入任何地方。因此，您无法更改根目录，但您可以指定哪个字段用于在该目录中生成目录名称（在您的情况 2 中）。[Javadoc](http://pig.apache.org/docs/r0.8.1/api/org/apache/pig/piggybank/storage/MultiStorage.html)很有帮助，但我猜您已经看过了？

# c - Segfault 与使单词小写功能

> ID：14839413
> 
> 赞同：-3
> 
> 时间：2013-02-12T18:36:45.370
> 
> 标签：c, segmentation-fault

如果需要，我有一个函数可以尝试将单词中的所有字母变为小写。我调试了我的程序，发现我从这个函数中得到了我的段错误。word 和 lowerword 都是字符串。

这是电话：

```
lowerword = word_to_lower(word); 
```

这是函数本身：

```
char * word_to_lower(char * word) {
  int i;
  char * lowerword;
  for (i = 0; i < strlen(word); ++i) {
    lowerword = (char *) tolower(word[i]);
    printf("%s\n", lowerword);
  }

  return lowerword;
} 
```

我对 C 非常陌生，因此将不胜感激详细的解释:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:39:34.510

```
lowerword = (char *) tolower(word[i]);
printf("%s\n", lowerword) 
```

不。`tolower()`返回 an `int`（您可以分配给 a `char`）。

```
char lowerword;
lowerword = tolower(word[i]);
printf("%c\n", lowerword) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:50:44.910

您正在尝试将 a 转换`char`为`char*`两个不同的事物。第一个是一个值（一个字符），第二个是一个指针（一个指向内存中存储字符的位置的变量）。如果你想返回一个完全处理过的字符串，你应该首先分配一个大小为 char 的数组`strlen(word)`，然后通过调用将其元素（即每个字符）设置为适当的值`toLower`。

最后，你应该有类似的东西

```
char * word_to_lower(const char * word) {
  int i;
  unsigned int length = strlen(word);
  char * lowerword = (char*) malloc(sizeof(char) * length);
  for (i = 0; i < length; ++i) {
    lowerword[i] = tolower(word[i]);
    printf("%c\n", lowerword[i]);
  }

  return lowerword;
} 
```

确保您了解 C 中“指针”和“数组”背后的概念，以及分配和释放内存的过程。从您使用它们的方式来看，您似乎对这些感到不舒服。

编辑：如评论中所述，此函数应将 a`const char *`作为参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T18:46:20.100

如果要降低整个字符串的大小写：

```
void word_to_lower(char * word) {
  int i, len = strlen(word);
  for (i = 0; i < len ; ++i) {
      word[i] = tolower(word[i]);
  }
} 
```

# ruby - HttpGenericRequest 中 body 与 body_stream 的差异

> ID：14839420
> 
> 赞同：2
> 
> 时间：2013-02-12T18:37:06.103
> 
> 标签：ruby, http

Net::HttpGenericRequest 中的`body`vs有什么区别。[文档说......空。](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPGenericRequest.html)`body_stream`

示例代码：

```
uri = URI('http://www.example.com/todo.cgi')
req = Net::HTTP::Post.new(uri.path)
req.body = "ABCDEF"
req.body_stream = "ABCDEF"  # Any difference? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T18:31:10.960

我相信不同之处在于每个人收到什么样的论点，正如您在文档中看到的那样。

[http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPGenericRequest.html#method-i-body-3D](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPGenericRequest.html#method-i-body-3D)

**Net::HTTPGenericRequest#body**接收一个**字符串**作为参数。

```
req.body("ABCDEF") 
```

**Net::HTTPGenericRequest#body_stream**接收**输入**作为参数。

```
req.body_stream(File.open("/tmp/example.txt")) 
```

我希望这可以帮助你。

# sql - Django：如何添加不相关对象的计数？

> ID：14839421
> 
> 赞同：2
> 
> 时间：2013-02-12T18:37:14.217
> 
> 标签：sql, django, count, relation

我有两个间接相关的表 -`Posts`和`Follower_to_followee`

模型.py：

```
class Post(models.Model):

    auth_user = models.ForeignKey(User, null=True, blank=True, verbose_name='Author', help_text="Author")

    title = models.CharField(blank=True, max_length=255, help_text="Post Title")

    post_content = models.TextField (help_text="Post Content")

class Follower_to_followee(models.Model):

    follower = models.ForeignKey(User, related_name='user_followers', null=True, blank=True, help_text="Follower")

    followee = models.ForeignKey(User, related_name='user_followees', null=True, blank=True, help_text="Followee") 
```

folowee 与帖子中的帖子 auth_user（帖子作者）间接相关。但是，它与 Django 用户表直接相关，而用户表与 post 表直接相关。

如何在不涉及用户表的情况下为特定关注者选择所有关注者并在查询结果中包含每个关注者的帖子计数？实际上，此时我什至不清楚如何涉及用户表。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:28:54.570

可以编写查询生成单个 SQL，尝试类似

```
qs = User.objects.filter(user_followees__follower=specific_follower).annotate(
         post_count=models.Count('post'))
for u in qs:
    print u, u.post_count 
```

[检查https://stackoverflow.com/a/13293460/165603](https://stackoverflow.com/a/13293460/165603)的第二部分（除了额外的 M2M 管理器外，其他操作类似）

当在内部使用时`User.objects.filter`，两者`user_followees__follower=foo`和`user_followers__followee=foo`都会导致`Follower_to_followee`模型表的连接和`where`条件检查`follower=foo`or `followee=foo`
（请注意`user_followees__followee=foo`or`user_followerers__follower=foo`与上面的工作方式不同，Django ORM 巧妙地简化了它们并会生成类似的东西`User.objects.filter(pk=foo.pk)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:47:46.077

要获取帖子计数，您可以使用以下命令：

```
#get follower
follower = User.objects.get(username='username_of_fallower')
#get all followees for a specific follower
for element in Follower_to_followee.objects.filter(follower=follower):
    element.followee.post_set.all().count() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:27:00.763

**视图.py**

```
def view_name(request):
    followers = Follower_to_followee.objects.filter(user=request.user)
    ....... 
```

**html**

```
{{user}}<br/>

My followers:<br/>    
{% follower in followers %}
    <p>{{follower}} - {{follower.user.follower_to_followee_set.count}}</p>
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:18:39.940

我不完全确定我理解这个问题，但这是一个简单的解决方案。请注意，这可以写得更简洁，但我将其分解，以便您可以看到每个步骤。

> 如何为特定关注者选择所有关注者？

```
# First grab all the follower_to_followee entries for a given 
# follower called: the_follower
follows = Follower_to_followee.objects.filter(follower=the_follower)

followee_counts = []

# Next, let's iterate through those objects and pick out 
# the followees and their posts
for follow in follows:
    followee = follow.followee

    # post for each followee
    followee_posts = Post.objects.filter(auth_user=followee).count()

    # Count number of posts in the queryset
    count = followee_posts.count()

    # Add followee/post_counts to our list of followee_counts
    followee_counts.append((followee, count))

# followee_counts is now a list of followee/post_count tuples 
```

# jquery - 我们如何在 Asp.net 中使用 jquery 按名称将值传递给文本框

> ID：14839425
> 
> 赞同：1
> 
> 时间：2013-02-12T18:37:23.713
> 
> 标签：jquery, asp.net

我想在 asp.net 中使用 jquery 按其名称在文本框中传递值，但是当我将值传递给文本框时，文本框中的值在短时间内可见，然后每次这是我的代码时它都会消失

```
 <script type="text/jscript" src="Scripts/jquery-1.9.1.min.js"></script>
    <script>
    $(document).ready(function () {
    $("button").click(function () {
        $('input[name="myb"]').val("mynameabc")
    });
    });
    </script>

    <div id="di1" style="height: 150px">
    <button>ClickME</button>
    <asp:Button ID="Button1" runat="server" Text="Button" />

    <input id="Text1" name="myb" type="text" />

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:40:11.763

由于`asp:Button`.

你需要这样做：

```
$(document).ready(function () {
  $("button").click(function (ev) { //note new parameter here
    $('input[name="myb"]').val("mynameabc")
    ev.preventDefault(); //add this...keeps button from 'submitting' the page
  });
}); 
```

或者，您也可以使用“UseSubmitBehavior”属性`asp:Button`...您使用的方法可能取决于您要在页面上完成的任务。

# php - 如何在 JS 脚本中正确回显 PHP 变量？

> ID：14839428
> 
> 赞同：0
> 
> 时间：2013-02-12T18:37:25.980
> 
> 标签：php, javascript, jquery

我有这个需要打印的脚本，它位于 PHP 文件中，因为我使用的是 jQuery UI Tabs 插件，因此我需要传递它的选项。

这是我所拥有的：

```
<?php 
$collapsible = "true";
$active = "2";

$options = array( 'collapsible' => $collapsible, 'active' => $active );
?>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery( '.tabs' ).tabs({
                collapsible : <?php echo $options["collapsible"]; ?>,
                active : <?php echo $options["active"]; ?>
            });
        });
    </script> 
```

好的，所以一切正常，但是可折叠和活动的两个选项并没有影响它。但是，如果我绕过 php 变量并将选项设置硬编码为可折叠和活动，那么它就可以工作。所以我不确定为什么变量没有效果。我什至尝试使用 (int) 进行类型转换以表示活动，使用 (bool) 表示可折叠但仍然没有骰子。

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:39:40.227

与其添加引号，不如通过`json_encode`. 这也将确保正确转义：

```
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery( '.tabs' ).tabs({
            collapsible : <?php echo json_encode($options["collapsible"]) ?>,
            active : <?php echo json_encode($options["active"]) ?>'
        });
    });
</script> 
```

它还为您提供了额外的好处，即能够使用文字类型而不是 PHP 中的所有字符串：

```
<?php
$collapsible = true;
$active = 2; 
```

而且，根据评论中的 axel.michel 建议，可以简化为：

```
<?php
$options = array('collapsible' => true, 'active' => 2);
?>

<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery( '.tabs' ).tabs(<?php echo json_encode($options); ?>);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:38:36.630

尝试在值周围添加引号并对输出进行编码

```
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery( '.tabs' ).tabs({
            collapsible : '<?php echo $options["collapsible"] ); ?>',
            active : '<?php echo $options["active"] ); ?>'
        });
    });
</script> 
```

# sugarcrm - 如何使用 SugarCRM 的本地 API？

> ID：14839431
> 
> 赞同：0
> 
> 时间：2013-02-12T18:37:37.003
> 
> 标签：sugarcrm

他们公开了一个 REST 和 SOAP API 来访问数据，但它们似乎都不适合我通过外部 RPC 调用插入大量数据的目的，这在某种程度上是时间关键的（有十几个用户同时在数据）。

我只花了几个小时来了解 SugarCRM 中的工作原理，但我发现最好在 SugarCRM 旁边放置一个独立的 RPC 服务器，然后进行处理（巨大）部分，然后将其存储到数据库中，使用更好的 Sugars自己的API。

有没有办法包含他们的核心 API 以便从他们的模型和持久性 API 中受益？我想知道我需要包含哪些文件以及如何访问正在运行的实例（如果有的话）。

我想要做的实际上很简单：

1.  接收 RPC 调用
2.  做一些匹配
3.  更新数据库

你看，没有涉及到 GUI 部分，这证明了使用模块等的漫长方式是合理的。

好吧，我希望有人知道。它对我来说似乎是一个相当大的野兽，我很想让它保持快速和肮脏。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:02:28.550

[在这里您可以找到您自己的 API扩展 REST API](http://forums.sugarcrm.com/f6/extending-rest-api-56126/)的起点，这里是现有[API 版本](http://developers.sugarcrm.com/wordpress/2010/12/21/explaination-of-all-of-the-sugar-web-services-apis-available/)的概述。

我们正在使用时间关键的自定义 API 来加快某些调用。

# javascript - javascript位图数据复合

> ID：14839432
> 
> 赞同：0
> 
> 时间：2013-02-12T18:37:42.727
> 
> 标签：javascript, jquery

我发现[这个库（BitmapData.js）](https://github.com/pnitsch/BitmapData.js)可以将图像合成为位图数据。
但是它只能合成图像对象。
有谁知道如何`Images`与其他`DOM`元素合成，例如包含文本的 div 并将 2 层输出为展平的位图数据？

# java - Joda - 获得夏令时独立时间的正确方法

> ID：14839438
> 
> 赞同：0
> 
> 时间：2013-02-12T18:38:05.213
> 
> 标签：java, datetime, jodatime

我正在研究一些警报功能，我正在使用 Joda 来计算每个警报时间的毫秒。我有一些实用方法，例如：

```
 public static DateTime getNextDateTimeWithHourMinute(int hour, int minute) {
    DateTime now = new DateTime();
    DateTime then = now
            .withHourOfDay(hour)
            .withMinuteOfHour(minute)
            .withSecondOfMinute(0)
            .withMillisOfSecond(0);

    return then.isBefore(now) ? then.plusDays(1) : then;
} 
```

它为我计算了一些小时和分钟的下一次出现。问题是，例如，如果我们尝试获得 3 月 10 日凌晨 2:00，那么我们将获得

> java.lang.IllegalArgumentException：由于时区偏移转换导致的非法瞬间：2013-03-10T07:00:00.000

我知道在这种情况下，时间根本不存在，但是有一种简单的方法可以确定在`now`和之间发生一些过渡`then`，然后自动进行更正。显然，更正取决于您的用例。就我而言，我希望它是这样，如果从现在到现在时钟回落，我会得到一个延迟一个小时的 DateTime 对象。换句话说，例如，如果用户将闹钟设置为凌晨 3 点，然后时钟在该时间附近向后移动，则闹钟将在时钟时间显示为凌晨 3 点（现在是一小时后）时触发。抱歉吐槽了，希望这个问题有点道理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:46:26.800

你可以对闹钟的日期/时区撒谎。例如：

```
LocalDate localDate = new LocalDate().withMonthOfYear(3).withDayOfMonth(10);
LocalTime localTime = new LocalTime().withHourOfDay(2);
DateTime dateTime = localDate.toDateTime(localTime, DateTimeZone.UTC);
DateTime dt = new DateTime(DateTimeZone.UTC.getMillisKeepLocal(DateTimeZone.getDefault(), dateTime.getMillis()));

System.out.println(dateTime);
System.out.println(dt); 
```

在我的情况下打印出来：

```
2013-03-10T02:09:42.333Z
2013-03-10T03:09:42.333-07:00 
```

（我住在华盛顿）

*但是*，我认为最好按以下顺序使用：

```
DateTime.now().toLocalDateTime().isBefore(new LocalDateTime(2013, 3, 10, 2, 0)); 
```

这在语义上更正确。

# javascript - Jquery mousedown 与单击

> ID：14839440
> 
> 赞同：13
> 
> 时间：2013-02-12T18:38:10.487
> 
> 标签：javascript, jquery

今天我发现了一件让我很困惑的事情。我只是试图通过 jquery 隐藏 s.th ...首先我尝试使用它

```
$(".specificdiv li:nth-child(3)").click(function(){
    $(".anotherdiv").hide();
}) 
```

....但它不起作用。

一段时间后，我这样尝试：

```
$(".specificdiv li:nth-child(3)").mousedown(function(){
    $(".anotherdiv").hide();
}) 
```

谁能解释我为什么 mousedown 工作而不是单击？很高兴发现

编辑

编辑另一个div。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T18:40:34.937

**可能的原因：**

1.  该事件在**之前**`mousedown`执行，所以先到先得。 **`click`**
***   该元素可能已经有一个`click`事件，可以防止这种情况发生，例如该函数首先执行并且其中有一条`return false`语句。**

 **现在，由于您使用`mousedown`的是未分配给此元素的 ，因此它没有任何冲突。这*可能是*一个原因，因为您没有发布完整的代码。随意纠正。:)

在一个较小的注释中，您`$(".anotherdiv").hide();`在第一个代码和`$(".another").hide();`第二个代码中缺少`div`类中的 。那是问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:43:58.997

实际上，当您按下按钮时会触发 mousedown 事件，即使您没有松开按钮。当您让按钮向上时，单击就像 mouseup。

在您的代码中，您有：“.anotherdiv”和“.another”这可能是您的错误吗？**

# web-services - 更改消息名称

> ID：14839441
> 
> 赞同：4
> 
> 时间：2013-02-12T18:38:10.827
> 
> 标签：web-services, wsdl, jax-ws

这是我的 WSDL 的一部分。我正在使用代码优先方法。

```
<portType name="MyWebService">
     <operation name="echoString"/>
         <input message="echoString"/>
         <output message="echoStringResponse"/>
     </operation>
 </portType> 
```

我应该添加或更改什么注释才能更改它

```
<input message="echoString"/> 
```

读作

```
<input message="echoStringRequest"/> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:22:53.320

我自己很惊讶，但是在尝试了一段时间后，我查看了规范，似乎你不能在 jax-ws 中真正做到这一点（除非以非标准方式，具体取决于实现）。以下是[jax-ws 2.0 规范](http://download.oracle.com/otndocs/jcp/jaxws-2_0-fr-eval-oth-JSpec/)对此问题的说明。请参阅*Java 到 WSDL 1.1 映射*，第 3.5 节，第 32 页：

> wsdl:message 元素的 name 属性的值并不重要，但按照惯例，它通常等于输入消息的相应操作名称和与输出消息的“响应”连接的操作名称。故障信息的命名在第 3.7 节中描述。

所以我想到的唯一选择是重命名您的操作，例如通过更改或添加`@WebMethod`注释。这是一个例子：

```
@WebMethod(operationName = "echoStringRequest")
public String echoString(String echoStringRequest) {
    return echoStringRequest;
} 
```

这将生成以下内容`portType`：

```
<portType name="MyWebService">
   <operation name="echoStringRequest">
      <input message="tns:echoStringRequest"></input>
      <output message="tns:echoStringRequestResponse"></output>
   </operation>
</portType> 
```

您是否对此版本更满意取决于您自己的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T14:06:54.257

I've encountered this problem myself recently and stumbled upon this thread multiple times. In our application we have a JAX-WS servlet which must use the format of ...Request and ...Response.

After a few days of searching, I found the solution.

Let's say your echoStringRequest has one String property that should be echoed back in the response.

```
class EchoMessage {
    private String message;

    //add getter and setter
} 
```

First add this annotation to the web service class:

```
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE) 
```

Then annotate your web service method like this:

```
@WebMethod
@WebResult(name = "echoStringResponse")
public EchoMessage echoString (@WebParam(name = "echoStringRequest") EchoMessage inputMessage) {
    ...
} 
```

Without the parameterStyle BARE annotation, JAX-WS would automatically generate messages like this:

```
<echoString>
    <echoStringRequest>
        ...
    </echoStringRequest>
</echoString> 
```

With the annotation, the outer element does not exist anymore.

The @WebParam and @ReturnType annotations are needed to determine the names of the root elements in the SOAP request and response body.

# ios - iOS推送ViewController不起作用

> ID：14839446
> 
> 赞同：0
> 
> 时间：2013-02-12T18:38:57.023
> 
> 标签：ios, uitableview, pushviewcontroller

我已经阅读了很多类似的问题，但我无法弄清楚为什么视图不起作用..我已经花了四个小时在这上面，所以我认为是时候寻求帮助了。

我的主要 VC 代码是一个 UITableView，在 didSelectRowAtIndexPath 中使用了这个方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"%s", __FUNCTION__);
    svc = [[SubViewController alloc] initWithNibName:@"SubView" bundle:nil];
    //UINavigationController *nc = [[UINavigationController alloc] init];

    switch (indexPath.section) {
    case 0 :
            switch (indexPath.row) {
            case 0 :
                    NSLog(@"0");
                    svc.label.text  = @"Item";
                    break;

                case 1:
                    NSLog(@"1");
                    svc.label.text  = @"Category";
                    break;
            }
            break;
    NSLog(@"2");        
    case 1 : svc.title  = @"Second Cell"; break;
    case 2 : svc.title = @"Third Cell"; break;
    case 3 : svc.title = @"Image"; break;
    case 4 : svc.title = @"Notes"; break;
            NSLog(@"3");
            break;
    }
    NSLog(@"4");
    //svc = [[SubViewController alloc] init];

    NSLog(@"svc is %@", svc);
    UINavigationController *nc = [[UINavigationController alloc] initWithNibName:@"SubView" bundle:nil];
                        //initWithRootViewController:svc];

    [nc pushViewController:svc animated:YES];

    NSLog(@"self.navigation is as %@",nc);
    NSLog(@"5");
    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

你也可以看到我尝试过的。输出日志显示：

```
2013-02-12 13:32:22.858 CollapsableTableView[35122:c07] -[ViewController tableView:didSelectRowAtIndexPath:]
2013-02-12 13:32:22.859 CollapsableTableView[35122:c07] -[SubViewController initWithNibName:bundle:]
2013-02-12 13:32:22.860 CollapsableTableView[35122:c07] wtf
2013-02-12 13:32:22.860 CollapsableTableView[35122:c07] 0
2013-02-12 13:32:22.860 CollapsableTableView[35122:c07] 4
2013-02-12 13:32:22.861 CollapsableTableView[35122:c07] svc is <SubViewController: 0x10363070>
2013-02-12 13:32:22.863 CollapsableTableView[35122:c07] self.navigation is as <UINavigationController: 0x101608b0>
2013-02-12 13:32:22.863 CollapsableTableView[35122:c07] 5 
```

所以找到了 SubView，但没有加载..任何想法都会受到重视。谢谢

更新。发表评论后（谢谢:)）我的代码现在看起来像这样，但仍然没有...

```
svc = [[SubViewController alloc] initWithNibName:@"SubView" bundle:nil];

UINavigationController *nc = self.navigationController;

switch (indexPath.section) {
case 0 :
        switch (indexPath.row) {
        case 0 :
                NSLog(@"0");
                svc.label.text  = @"Item";
                break;

            case 1:
                NSLog(@"1");
                svc.label.text  = @"Category";
                break;
        }
        break;
NSLog(@"2");        
case 1 : svc.title  = @"Second Cell"; break;
case 2 : svc.title = @"Third Cell"; break;
case 3 : svc.title = @"Image"; break;
case 4 : svc.title = @"Notes"; break;
        NSLog(@"3");
        break;
}
NSLog(@"4");
//svc = [[SubViewController alloc] init];

NSLog(@"svc is %@", svc);

 [nc pushViewController:svc animated:YES];
//pushViewController:svc animated:YES];

NSLog(@"self.navigation is %@",nc);
NSLog(@"5"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:41:22.120

```
UINavigationController *nc = [[UINavigationController alloc] initWithNibName:@"SubView" bundle:nil]; 
```

将其替换为：

```
UINavigationController *nc = self.navigationController; 
```

您正在创建一个全新的`UINavigationController`. 你需要使用你拥有的那个并推动它。

**笔记**

即使您正在制作一个新的`UINavigationController`，您也不会使用视图控制器笔尖这样做。您将使用您评论的代码`rootViewController`为您的 fresh设置一个`UINavigationController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:23:12.847

在创建此视图之前添加导航控制器（APP DELEGATE）等。然后将此视图作为导航控制器的根。

最后。`self.navigationController pushViewController:(UIViewController*) animated:(BOOL)` 我认为这会成功。如果您不确定如何添加导航控制器，请使用根视图控制器搜索 init 以获取导航控制器。

但是，如果您的意思是在此处添加一个新的视图控制器，那么您是正确的，只是忘记将子视图添加到主视图中。

# json - 在 Mac 上使用 Safari 通过 HTTP 发送 POST 请求

> ID：14839447
> 
> 赞同：20
> 
> 时间：2013-02-12T18:39:00.090
> 
> 标签：json, macos, http, post, safari

我需要在 Mac 上使用 Safari 调用网络服务。由于方法在 POST 中，我无法将 url 粘贴到 Safari 的地址栏中（就像使用 GET 方法一样）。

所以，我正在寻找允许我发送请求然后在浏览器中接收响应的插件或类似的东西。响应是 JSON，因此使用 JSON 插件，我可以看到所有带有他的格式的响应。

解决方案？谢谢 ！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-16T18:43:26.657

Safari 是我选择的浏览器，所以我可以同情你想要一个原生插件。幸运的是，虽然没有任何可用的扩展，但有相当多的本地 OSX 客户端用于 HTTP/REST 端点测试。根据您的要求，我一直在使用 CocoaRestClient，它包括 JSON 的自动格式化和语法突出显示。它是开源的、轻量级的，并且至少得到了开发人员的积极支持：

[http://mmattozzi.github.io/cocoa-rest-client](http://mmattozzi.github.io/cocoa-rest-client)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-13T13:14:37.560

另一个很棒的工具是[Postman](https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop)，它是 Google Chrome 中的一个应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T18:45:15.437

我不知道您为什么关心客户端是否在 Safari 中。一个安静的 POST 应该能够从任何类型的客户端执行。您可能想查看 Firefox 的 RESTClient 扩展[http://restclient.net/](http://restclient.net/)

也只是谷歌“REST 客户端”，您应该会看到许多其他工具可用于针对您的服务生成 POST。如果您真的想要 Safari 特定的响应，大多数好的 REST 工具应该允许您设置 User-Agent 标头，以使请求看起来像是来自 Safari。

# mysql - 这个 MySQL Query 有更有效的解决方案吗？

> ID：14839452
> 
> 赞同：0
> 
> 时间：2013-02-12T18:39:10.933
> 
> 标签：mysql

我正在为客户从 Wordpress 数据库中提取数据并将其显示到移动应用程序中，但在优化此查询以使其最有效时遇到了一些麻烦。

在 wordpress 中，有三个表链接我需要访问的数据 1\. wp_posts - 在此表中有主要帖子标题、发布状态和帖子类型。2\. wp_postmeta - 此表包含与上表中的帖子 ID 相关的所有补充信息。3\. wp_p2p - 此表包含所有父子帖子及其关系的链接。

由于这些表中的数据量很大，我目前的查询大约需要 13 秒才能运行，请你看看这个 sqlfiddle，让我知道我可以改进它吗？当前形式的查询不是最终结果，但改进它会改善我的最终结果。我还需要在 wp_postmeta 表中的“名称”上添加一个搜索字段。

[http://sqlfiddle.com/#!2/0e9e0/1](http://sqlfiddle.com/#!2/0e9e0/1)

任何方向表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:00:00.137

如果我理解正确，您正在寻找只有子帖子，在这种情况下，下面的查询应该更快：

```
SELECT wp_posts.id,  post_title, post_status, post_type
FROM wp_posts
JOIN wp_postmeta ON (wp_posts.id = wp_postmeta.post_id)
LEFT JOIN wp_p2p ON (wp_posts.id = wp_p2p.p2p_from)
WHERE `post_status`='publish' AND `post_type`='merchant' 
AND wp_p2p.p2p_from IS NULL
GROUP BY wp_posts.id 
```

此查询将被优化以查找 p2p 表中不存在匹配项的位置，因此该部分将比您当前执行的操作要快得多。看起来您也可以删除`JOIN`on`wp_postmeta`因为您根本不使用它。删除它`JOIN`也会使`GROUP BY`冗余和删除它可以对性能有所帮助。删除`GROUP BY`也是一个很好的做法，因为严格来说，您不能选择不在`GROUP BY`子句中的非聚合字段，但 MySQL 提供了此功能，因此查询仍然可以以任何方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:49:10.947

首先，您应该使用 INNER 或 OUTER JOIN 语法连接表。所以：

```
FROM wp_posts INNER JOIN wp_postmeta ON wp_posts.id = wp_postmeta.post_id 
```

或者也许你想要一个 OUTER JOIN 这里？

您能解释一下为什么要在 wp_posts.id 上进行 GROUP BY。此列是否没有唯一值？

# jquery - 在 IE8/9 中的函数完成之前，JQuery 不会执行（使用调试器函数）

> ID：14839459
> 
> 赞同：0
> 
> 时间：2013-02-12T18:39:29.873
> 
> 标签：jquery, internet-explorer-8, jquery-ui-dialog, javascript-debugger

会发生什么：我在 IE 中有一个 onclick 元素。比以前的编辑简单得多（稍微减少了一点）。

```
(css file)#dialog-modal{display:none;height:50px;width:50px;background-color:#000;}(/css)

<div id="dialog-modal" title="sample">xml data</div>
<button type="Button" onClick="makeBox();">Hello</button>

function makeBox(){
    debugger;
    $('#dialog-modal').show();
    debugger;
    console.log($('#dialog-modal').css('display'));
    console.log('hasnt shown');
    debugger;
    console.log($('#dialog-modal').css('display'));
    console.log('still hasnt shown');
    debugger;
    return false;
} 
```

当您执行 MakeBox onClick 时，它直到函数的最后才会执行显示，理论上它应该在发生时执行，对吗？

问题是，更大，更烦人的问题是，当我使用 onClick、bind、jquery 或任何其他方法来完成此操作时，它总是在函数堆栈的最后解决并显示...有一个相当大的函数堆栈，它在打开时试图解决，但不是 UI-Dialog 的问题（我最初认为是问题），问题似乎更多在于取消隐藏框的能力，直到执行已完成。

我的意思是，也许在概念上还有另一种方法可以做到这一点，但我点击了一些东西，无论我是否使用 jq-queue 或回调，或者在 IE8 和 9（我假设为 7）中使用绑定、点击、鼠标按下，如果调试器在IE 的工作方式与它在 Chrome 中的工作方式相同（这可能完全有可能，但我找不到该信息），那么唯一的可能性是 IE 正在存储 dom 操作，直到函数堆栈清除，然后将它们射出。

我的目标是：点击某物。首先打开 Box，显示加载对话框。处理大量的数字。以愚蠢的数字插入数据。

强制性 JSFiddle：http: [//jsfiddle.net/5A4Nq/31/](http://jsfiddle.net/5A4Nq/31/)

同样的小提琴，使用 JQDialog & Open 回调（[http://jsfiddle.net/5A4Nq/36/](http://jsfiddle.net/5A4Nq/36/)）

确保您已打开 IE 开发人员工具并在脚本工具中开始调试。

版本：JQ-1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:04:14.373

在向 JQuery 核心团队扔了一块骨头之后，我最终确定在 IE8 中使用调试器的时机只是……糟糕。

当调试器运行直到整个堆栈完成时，IE8 确实从未真正完成过 dom 操作任务。有点奇怪。这很尴尬，这是我们对 Internet Explorer 所期待的一切。

# jquery - Jquery SlideToggle div在单独的表格行中

> ID：14839463
> 
> 赞同：0
> 
> 时间：2013-02-12T18:39:34.557
> 
> 标签：jquery, html-table, row, slidetoggle

当单击前一行中的链接时，我试图让一个滑动切换显示隐藏的表格行。我首先遇到了滑动不顺畅的问题，然后发现滑动切换不能很好地处理表格行。因此，我将隐藏行中的内容粘贴在该行内的一个 div 中，并决定将其隐藏。我现在的问题是我似乎无法为 jquery 找出正确的代码来在行中找到该 div。

我在这里有一个 JSfiddle 示例：http: [//jsfiddle.net/yrM3H/811/](http://jsfiddle.net/yrM3H/811/)

我的代码示例如下：

html:

```
<table>
    <tr>
        <td>
            <div class="hidden">Expanded!</div>
        </td>
    </tr>
    <tr>
        <td><div class="toggle">Content</div></td>
    </tr>
    <tr>
        <td>
            <div class="hidden">Expanded!</div>
        </td>
    </tr>
</table> 
```

js：

```
jQuery(document).ready(function () {
    jQuery(".toggle").parent().parent().next().children().next(".hidden").hide();
    jQuery(".toggle").click(function () {
        $('.active').not(this).toggleClass('active').parent().parent().next().children().next('.hidden').slideToggle(300);
        $(this).toggleClass('active').parent().parent().next().children().next('.hidden').slideToggle("fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:55:09.763

```
$("td").click(function(){
         $(this).parent("tr").next("tr").find("td div.hidden").slideToggle();
    }); 
```

[http://jsfiddle.net/kmd97/yrM3H/816/](http://jsfiddle.net/kmd97/yrM3H/816/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:49:29.357

这应该可以解决您的问题：http: [//jsfiddle.net/yrM3H/813/](http://jsfiddle.net/yrM3H/813/)

我对其进行了更改，以便它`.find('hidden')`在第二行上使用来查找子元素。在此之前，它根本没有找到元素。

在旁注 - 我不明白你为什么不只是隐藏所有 .hidden 元素`$('.hidden').hide();`？

# vb.net - 强制模块命名空间限定

> ID：14839467
> 
> 赞同：2
> 
> 时间：2013-02-12T18:39:49.777
> 
> 标签：vb.net, module, namespaces

VB.net 允许您跳过带有模块名称的函数调用的限定：

```
Public Module EvalDataFetcher

    Public Function JoinStr(ByVal values As IEnumerable(Of String)) As String
        ' body
    End Function

End Module 
```

然后做：

```
Dim foo As String = JoinStr(myBars) 
```

如何强制用户使用完全限定表单？即力：

```
Dim foo As String = EvalDataFetcher.JoinStr(myBars) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:11:01.037

如果有办法强制您指定模块名称，我不确定它会是什么。但是，您可以这样做的方式是使其成为具有共享成员的类而不是模块。例如：

```
Public Class EvalDataFetcher
    Public Shared Function JoinStr(ByVal values As IEnumerable(Of String)) As String
        ' body
    End Function
End Module 
```

现在，当您调用该`JoinStr`方法时，您将被迫指定类名：

```
Dim foo1 As String = JoinStr(myBars)  ' Won't compile
Dim foo2 As String = EvalDataFetcher.JoinStr(myBars)  ' Works 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-04T15:20:55.353

可以使用`HideModuleName`属性作为解决方法来实现此行为 - [HideModuleNameAttribute](https://msdn.microsoft.com/en-us/library/85a47y0y(v=vs.90).aspx)
使用命名空间包装您的模块并将`HideModuleName`属性添加到模块

```
Namespace Utils

    <HideModuleName()>
    Friend Module UtilsModule

        Public Sub YourMethod(parameter As Object)
            'Method code
        End Sub

    End Module

End Namespace 
```

如果命名空间不会与`Imports`文件中的 一起添加，那么您将需要使用命名空间名称，并且`HideModuleName`属性将从智能感知中隐藏模块名称

```
Utils.YourMethod(param) 
```

# vb.net - 如何在 vb.net 中更新后刷新 datagridview

> ID：14839468
> 
> 赞同：0
> 
> 时间：2013-02-12T18:39:53.453
> 
> 标签：vb.net, winforms, datagridview

这是我的代码：

```
 Dim sqledit As New SqlCommand
        sqledit = New SqlCommand("UPDATE Branches SET StAddress='" + txtstaddress.Text + "',City='" + txtcity.Text + "',Province='" + txtprovince.Text + "',ContactNo='" + txtcontact.Text + "' WHERE BranchID='" + txtbranchid.Text + "'", con1)
        sqledit.ExecuteNonQuery()
        MsgBox("Branch Information Updated!", MsgBoxStyle.Information, Title:="Edit Branch Information")
        utilities.Refresh()
        Me.Close() 
```

即使我刷新它，我也无法更新它。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T11:29:58.240

也有一种简单的方法，您可以通过调用所有表格内容示例的 datagridview 进行查询：

```
SELECT {your table field}
FROM {table name} 
```

如果您在更改后执行此查询，它将向您显示 DGV 上的新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T10:15:43.863

实现这一点的最佳方法是重新加载数据网格视图。这是解释如何执行此操作的代码

```
Private Sub refreshDatagrid()
    Dim con As MySqlConnection = New MySqlConnection("Data Source=localhost;Database=reerp;User ID=root;Password=root;")
    Dim sql As MySqlCommand = New MySqlCommand("SELECT * FROM users", con)
    Dim ds As DataSet = New DataSet()
    Dim DataAdapter1 As MySqlDataAdapter = New MySqlDataAdapter()
    con.Open()
    DataAdapter1.SelectCommand = sql
    DataAdapter1.Fill(ds, "Users")
    DataGridView1.DataSource = ds
    DataGridView1.DataMember = "Users"
    con.Close()

End Sub 
```

现在，一旦您将数据添加到网格中，然后再次调用此方法。这是你如何做的例子

```
 Dim query As String
    Dim con As MySqlConnection = New MySqlConnection("data source=localhost;database=reerp;user id=root;password=root;")

    query = "insert into users (username,password,first_name,last_name,role) values('"
    query = query + tb_username.Text + "','" + tb_password.Text + "','" + tb_firstname.Text + "','" + tb_lastname.Text + "','" + ComboBox_role.Text + "');"
    con.Open()

    Dim cmd As MySqlCommand = New MySqlCommand(query, con)

    Dim i As Integer = cmd.ExecuteNonQuery()
    If (i > 0) Then
        lblMsg.Text = "record is successfully inserted"
        refreshDatagrid()

    Else
        lblMsg.Text = "record is not inserted"
    End If
    con.Close() 
```

# sql - 如何找到一天中的第一个时间和一天中的最后一个时间

> ID：14839472
> 
> 赞同：2
> 
> 时间：2013-02-12T18:40:01.950
> 
> 标签：sql, sql-server, sql-server-2005

我有一个查询，它从一个部门中第一个打卡的人，以及从一个部门最后一个打卡的人。本质上，这向我显示了谁打开了一个位置，并关闭了一个位置。下面是我的查询我正在使用“OVER”函数，但是 over 函数不适用于 VB.net 中的数据集是否有任何其他选项可以替换 over 函数？

```
SELECT * FROM (
    SELECT timeclock.dtTimeIn, timeclock.dtTimeOut, employees.sfirstname,
       RANK() OVER ( ORDER BY dtTimeIn) rk1, --earliest record gets 1
       RANK() OVER (ORDER BY dtTimeOut DESC) rk2 --latest record gets 1

    FROM   TimeClock INNER JOIN
                         Employees ON TimeClock.lEmployeeID = Employees.lEmployeeID
    WHERE (dtTimeIn > dateadd(day, datediff(day, 0, getdate())-1, 0)) AND (dtTimeOut < dateadd(day, datediff(day, 0, getdate()), 0)) AND 
      (sDept IN ('1', '2', '3'))
) A
WHERE rk2=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:45:19.023

您可以将其替换为相关的子查询。这是一个示例`rk1`：

```
(select count(distinct lEmployeeId)
 from TimeClock tc
 where tc.lEmployeeId = timeclock.lemployeeId and
       tc.dtTimeIn <= timeclock.dtTimeIn
) as rk1 
```

Rank 可以产生多条记录，所有记录都标记为 1（当有平局时）。如果你真的是说`row_number()`，那么你会`count(*)`在上面的查询中使用而不是`count(distinct)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:34:46.173

你可以试试这个：

```
SELECT  tc.dtTimeIn
        , tc.dtTimeOut
        , e.sfirstname
FROM    TimeClock tc
JOIN    Employees e ON tc.lEmployeeID = e.lEmployeeID
JOIN    (               
            SELECT  DATEADD(DAY, DATEDIFF(DAY, 0, tc.dtTimeIn), 0) _date
                    , MIN(tc.dtTimeIn) dtTimeIn
                    , MAX(tc.dtTimeOut) dtTimeOut
            FROM    TimeClock tc
            WHERE   e.sDept IN ('1', '2', '3')
            GROUP BY
                    DATEADD(DAY, DATEDIFF(DAY, 0, tc.dtTimeIn), 0)
) t ON  t._date = DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0)
AND     DATEADD(DAY, DATEDIFF(DAY, 0, tc.dtTimeIn), 0) = t._date
AND     (t.dtTimeIn = tc.dtTimeIn OR t.dtTimeOut = tc.dtTimeOut)
WHERE   e.sDept IN ('1', '2', '3') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:16:43.543

您的查询只返回关闭位置的人...

要返回谁打开和谁关闭，您需要将 where 子句更改为

```
where rk2 = 1 or rk1 = 1 
```

如果您将同时从多个 sDept 获得订单，则应像这样为 sDept 分区订单

```
RANK() OVER ( partition by sDept ORDER BY dtTimeIn) rk1, --earliest record gets 1
           RANK() OVER ( partition by sDept ORDER BY dtTimeOut DESC) rk2 --latest record get 
```

看...

设置环境以运行您的查询

```
 declare @TimeClock table ( lEmployeeID int, dtTimeIn datetime, dtTimeOut datetime)
    declare @Employees table ( lEmployeeID int, sfirstname varchar(max),sDept varchar(max))
    declare @getDate date
    set @getDate ='02/12/2013' 

    insert @Employees 
    values (1,'Ana','1')
    ,(2,'Pedro','1')
    ,(3,'Alfred','2')

    insert @TimeClock
    values (1 ,'02/12/2013 08:30','02/11/2013 11:30')
    ,(2 ,'02/12/2013 08:00','02/11/2013 11:00')
    ,(3 ,'02/12/2013 08:15','02/11/2013 11:15') 
```

您的查询...

```
 SELECT * FROM (
        SELECT timeclock.dtTimeIn, timeclock.dtTimeOut, employees.sfirstname,
           RANK() OVER (partition by sDept  ORDER BY dtTimeIn) rk1, --earliest record gets 1
           RANK() OVER (partition by sDept  ORDER BY dtTimeOut DESC) rk2 --latest record gets 1

        FROM   @TimeClock timeclock
        INNER JOIN @Employees Employees
        ON TimeClock.lEmployeeID = Employees.lEmployeeID
        WHERE (dtTimeIn > dateadd(day, datediff(day, 0, @getDate)-1, 0)) AND (dtTimeOut < dateadd(day, datediff(day, 0, @getDate), 0)) AND 
          (sDept IN ('1', '2', '3'))
    ) A
    WHERE rk2=1 
```

返回...

```
 dtTimeIn            dtTimeOut                   sfirstname  rk1 rk2
    2013-02-12 08:30:00.000 2013-02-11 11:30:00.000 Ana         3   1 
```

看.. 刚刚关闭的人在结果集中

更改 where 子句...

```
SELECT * FROM (
        SELECT timeclock.dtTimeIn, timeclock.dtTimeOut, employees.sfirstname,
           RANK() OVER ( ORDER BY dtTimeIn) rk1, --earliest record gets 1
           RANK() OVER (ORDER BY dtTimeOut DESC) rk2 --latest record gets 1

        FROM   @TimeClock timeclock
        INNER JOIN @Employees Employees
        ON TimeClock.lEmployeeID = Employees.lEmployeeID
        WHERE (dtTimeIn > dateadd(day, datediff(day, 0, @getDate)-1, 0)) AND (dtTimeOut < dateadd(day, datediff(day, 0, @getDate), 0)) AND 
          (sDept IN ('1', '2', '3'))
    ) A
    WHERE rk2=1 
    or rk1 = 1 
```

同时返回..谁打开谁关闭...

```
 dtTimeIn            dtTimeOut               sfirstname  rk1 rk2
    2013-02-12 08:30:00.000 2013-02-11 11:30:00.000 Ana     3   1

    2013-02-12 08:00:00.000 2013-02-11 11:00:00.000 Pedro   1   3
2013-02-12 08:15:00.000 2013-02-11 11:15:00.000 Alfred  1   1 
```

Pedro 确实打开了，Ana 关闭了 sDept '1'，Alfred 确实打开并关闭了 sDept '2'

# c# - 将 Url 和相对文件路径加入有效的 Uri？

> ID：14839474
> 
> 赞同：0
> 
> 时间：2013-02-12T18:40:12.713
> 
> 标签：c#, asp.net-web-api, uri

我有一个时髦的问题 - 给定 uri`http://localhost`和相对文件路径`virtualdirectory\\path\\to\\my\\file.html`，我怎样才能将它们合并到一个应该是有效的 Url 中`http://localhost/virtualdirectory/path/to/my/file.html`？

我正在使用 Web.API 和客户端搜索来查看服务器上的虚拟目录中是否存在静态 html 文件。客户端使用 jQuery 请求搜索，Web.API 控制器在本地虚拟目录上进行搜索。如果文件确实存在，控制器需要向客户端返回一个有效的 Url，以便客户端可以查看该静态 html 文件。

如果这是有道理的。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:47:18.093

```
new Uri(new Uri("http://localhost/"), "virtualdirectory\\path\\to\\my\\file.html".Replace("\\","/")); 
```

# c# - 通过 ServiceHost 托管 MSMQ WCF 服务的 Windows 服务无法写入事件日志或将文件写入系统，但可以移动文件

> ID：14839476
> 
> 赞同：2
> 
> 时间：2013-02-12T18:40:26.360
> 
> 标签：c#, wcf, .net-4.0, windows-services, msmq

我们目前编写了一个托管在 Windows 服务中的 MSMQ WCF 服务，该服务充当电子邮件队列服务。这个想法是，我们所有的客户端应用程序都可以被多个并发客户端访问，可以将电子邮件提交到一个集中的可靠队列系统。提交电子邮件后，该服务会处理队列中的作业（这是一个自定义电子邮件对象）并将其发送出去。

我们遇到的问题是，实际打开 ServiceHost 的代码部分似乎被沙箱化，并阻止我们的服务代码写入事件日志或写入自定义日志文件（由 NLog 管理）。这里的奇怪之处在于代码还具有将文件系统上的文件移动到另一个位置的功能 - 这可以正常工作 - 但如前所述，无法写入事件日志或日志文件。由于我们设置了 AppDomain.UnhandledException 处理程序，因此似乎也没有抛出异常。

我们曾尝试将 Windows 服务“运行方式”帐户从本地服务更改为域管理员，再更改为随机用户，但似乎没有任何效果。我们能够证明在实际的“ServiceHost.Open()”调用之前，我们可以成功地写入事件日志和自定义日志文件。只有在 ServiceHost 托管的实际类中才会出现问题。

我想认为它是权限，但如前所述，我们可以移动文件 - 所以至少可以说似乎是矛盾的。托管环境是 Windows Server 2003 R2 x64，我们使用的是 .NET 4.0。

** 作为说明，如果我们删除注册表/自定义日志记录代码，并且仅具有发送电子邮件功能（通过 .NET SMTP 客户端对象），则电子邮件将正确发送。

片段 1 - WCF 服务代码本身，只是尝试写入注册表，这不起作用并且显然不会引发异常：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, IncludeExceptionDetailInFaults = true)]
public class EmailQueueListener : IEmailQueuingService
{
    [OperationBehavior(TransactionScopeRequired = false, TransactionAutoComplete = true)]
    public void SendEmailToQueue(SerializableMailMessage emailMessage)
    {
        var eventLogSrc = "Email Service";
        var eventLogLogType = "[APP NAME HERE]";

        if (!EventLog.SourceExists(eventLogSrc))
            EventLog.CreateEventSource(eventLogSrc, eventLogLogType);

        EventLog.WriteEntry(eventLogSrc, "TESTING", EventLogEntryType.Information); 
```

片段 2 - 启动服务主机的代码，从 Windows 服务的 OnStart 方法调用：

```
public static void Start(bool isConsole = false)
{
        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;

        ConsoleLog.Info("TEST");

        var eventLogSrc = "Email Service";
        var eventLogLogType = "[APP NAME HERE]";

        if (!EventLog.SourceExists(eventLogSrc))
            EventLog.CreateEventSource(eventLogSrc, eventLogLogType);

        EventLog.WriteEntry(eventLogSrc, "Email Service Started", EventLogEntryType.Information);

        m_EmailServiceHost = new ServiceHost(typeof(EmailQueueListener));
        m_EmailServiceHost.Open();
} 
```

# playframework - Play framework 和 Sublime Text 2 - 可以调试吗？

> ID：14839479
> 
> 赞同：5
> 
> 时间：2013-02-12T18:40:38.407
> 
> 标签：playframework, sublimetext2

我已经开始使用 Play 框架和 Sublime Text 2。这是一个非常好的开发环境，但缺少一件事——调试能力。

我在网上看到了一些指南，解释了如何在 ST2 中为 PHP 设置调试。那么有什么方法可以在 ST2 中调试 Java 应用程序，尤其是 Play 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T16:56:40.587

您是否尝试过将 Ensime 与 Sublime [http://flurdy.com/docs/ensime/sublime.html](http://flurdy.com/docs/ensime/sublime.html)一起使用？您可能还真的很喜欢 STS 2 的 CTags 或 STS 3 上的 Goto 定义。

# asp.net - .NET 中的 HTTP 基本授权

> ID：14839481
> 
> 赞同：1
> 
> 时间：2013-02-12T18:40:55.863
> 
> 标签：asp.net, .net, http-headers, http-authentication

也许我遗漏了一些东西，或者 .NET 遗漏了一些东西（*最好是前者*）

在构建应用程序时（*不仅是 ASP.NET，这就是我的情况；特别是 ASP.NET 托管的 WCF DS*），似乎没有本地方法可以[`NetworkCredential`](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)从[`HttpRequest`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)或任何类似的请求/标头容器创建对象。

我们是否总是必须自己滚动，或者是否有一些魔法隐藏`System.Net.*`或`System.Web.*`带有签名，例如：

```
NetworkCredential GetAuthorization(HttpRequest request); 
```

我知道这是微不足道的，但我会假设 HTTP 体系结构的标准内容将包含在其他内容如此广泛的内容中（*.NET*）

那么，自制字符串操作，还是隐藏在某处的魔术方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:30:35.197

我不认为有任何内置的。它的用途有限，因为大多数客户端使用 Kerberos 或 Digest 身份验证。

但是，自己滚动非常简单：

```
static NetworkCredential ParseBasicAuthorizationHeader(string value)
{
   if (string.IsNullOrWhiteSpace(value)) 
   {
      return null;
   }
   if (!value.StartsWith("Basic ", StringComparison.OrdinalIgnoreCase)) 
   {
      return null;
   }

   byte[] data = Convert.FromBase64String(value.Substring(6));
   value = Encoding.GetEncoding("ISO-8859-1").GetString(data);

   int index = value.IndexOf(':');
   if (index == -1 || index == 0 || index == value.Length - 1) 
   {
      return null;
   }

   return new NetworkCredential(
      value.Substring(0, index),    // Username
      value.Substring(index + 1));  // Password
} 
```

请记住，与所有其他 HTTP 标头一样，`Authorization`标头完全由客户端控制，因此应被视为不受信任的用户输入。

# mod-rewrite - 从 .htaccess 重写中剪切变量

> ID：14839483
> 
> 赞同：0
> 
> 时间：2013-02-12T18:41:14.333
> 
> 标签：mod-rewrite, url-rewriting

我有这个链接：www.example.org/thumbnail.php?file=image.jpg&size=article_medium

我重定向到：www.example.org/files/image.jpg

使用此规则：

```
RewriteCond %{QUERY_STRING} ^file=(.*)$ [NC]
RewriteRule ^thumbnail.php$ /files/%1 [R=301,L] 
```

但是链接重定向到 www.example.org/files/image.jpg&size=article_medium 并给出访问者 404 错误，如何在规则中剪切“&size=article_medium”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:59:52.967

您正在匹配行尾。尝试

```
RewriteCond %{QUERY_STRING} ^file=(.*)\&.*$ [NC] 
```

# javascript - 尝试使用 Jquery/javascript 计算表单字段

> ID：14839484
> 
> 赞同：0
> 
> 时间：2013-02-12T18:41:15.423
> 
> 标签：javascript, jquery

我在尝试计算两个表单字段的值时遇到了麻烦。我不断收到“NAN”，这表示非数字输入，尽管表单字段仅填充了数字。

作为回应，我尝试使用 ParseInt 来获取数值。这也无法产生成功的结果。

这就是我到目前为止所拥有的。任何帮助表示赞赏。

```
$('#value-calc input').change(function () {

    var valueINT = parseInt($('#value'),10);
    var quantINT = parseInt($('#quantity'), 10);
    var math = ((valueINT/quantINT)*1000);

    $('#cpm').val(math);
}); 
```

[http://jsfiddle.net/greyoxide/YRWAA/1/](http://jsfiddle.net/greyoxide/YRWAA/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:43:18.240

您需要`.val()`在选择器之后添加方法以获取它们持有的值

[工作小提琴](http://jsfiddle.net/YRWAA/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:44:55.250

当您使用该 jQuery 按 ID 引用元素时，您不会传入字符串。

也许尝试`$('#value').val()`使用这些`parseInt`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:10:44.923

试试这个：

```
$('#value-calc input').keyup(function () {

var valueINT = $('#value').val();
var quantINT = $('#quantity').val();
var math = ((valueINT/quantINT)*1000);
$('#cpm').val(math);

}); 
```

# webdriver - 使用 PageFactory 将我现有的代码转换为 PageObject 设计模式

> ID：14839485
> 
> 赞同：0
> 
> 时间：2013-02-12T18:41:15.693
> 
> 标签：webdriver, selenium-webdriver, pageobjects

我正在使用 Selenium 2 Web Driver 和 C#.Net 创建测试。在阅读了大量 Selenium 文档后，我不确定我是否遵循了正确的设计模式，并且不确定如何使用 PageObject 设计模式进行测试。

这是我在页面上使用的当前代码及其工作

```
WaitForElement(By.CssSelector("input#ctl00_ctl00_signinControl_txtUsername")).SendKeys("abc123");
WaitForElement(By.CssSelector("input#ctl00_ctl00_signinControl_txtPassword")).SendKeys("password");

SelectElement select;
IWebElement selElement = WaitForElement(By.CssSelector("select#ctl00_ctl00_ddlGoTo"));
select = new SelectElement(selElement);
select.SelectByText("Homepage");

*<more code .....>* 
```

我也告诉过我不能`Select`使用 pageFactory 来使用页面元素。

我是否需要按照我的编码方式更改我的代码？任何反馈都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:00:37.203

页面对象模式的思想是拥有一个代表页面的对象。您实际上是在编写一个 API 来与页面交互。

例如，登录页面对象可能具有以下方法：

*   输入用户名（字符串用户名）；
*   enterPassword(字符串密码);
*   点击登录按钮（）；

使用页面对象与页面交互的人不需要关心 selenium 如何找到元素并与它们交互。如果字段上的 id 发生更改，您只需要更改页面对象上的定位器，并且不需要更改调用关联页面对象公共方法的所有测试。

# javascript - 自动完成搜索...？可能使用jquery？

> ID：14839486
> 
> 赞同：3
> 
> 时间：2013-02-12T18:41:16.143
> 
> 标签：javascript, jquery

可以说我有以下代码：

HTML：

```
 <form name="searchForm">
   <input type="text" id="Fruit" name="getFruit"/>
 </form> 
```

Javascript：

```
function Fruit(name, color){
  this.name = name;
  this.color = color;
};

var database = {};
database['banana'] = new Fruit("Banana", "Yellow");
database['apple'] = new Fruit("Apple", "Red");
database['orange'] = new Fruit("Orange", "Orange");
database['apple pear'] = new Fruit("Apple Pear", "Green"); 
```

如何使用自动完成功能，以便如果用户键入“apple”，它将为他们提供从下拉菜单中选择“apple”或“apple pear”的选项，并在您单击它时填充表单文本框？当您尝试输入内容时，Google 会如何给出建议。

我在想我想使用 jquery [http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)但我不知道如何实现它。

```
$( "#Fruit" ).autocomplete({
      source: database // How would you implement this?
    }); 
```

这不是我的完整代码，但上次我发布了我所有的代码，它读起来太多了，所以我创建了这个只是为了举例说明我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:46:57.747

你在正确的轨道上。jQuery UI 的自动完成小部件接受一系列可供选择的项目。我们可以使用 jQuery 的 map 方法将您的数据库对象映射到一个键数组，然后将其用作自动完成源。

```
 <form name="searchForm">
   <input type="text" id="Fruit" name="getFruit"/>
 </form>

function Fruit(name, color){
  this.name = name;
  this.color = color;
};

var database = {};
database['banana'] = new Fruit("Banana", "Yellow");
database['apple'] = new Fruit("Apple", "Red");
database['orange'] = new Fruit("Orange", "Orange");
database['apple pear'] = new Fruit("Apple Pear", "Green");

var source = $.map(database, function(val, i) {
  return i;
});

$( "#Fruit" ).autocomplete({
      source: source
}); 
```

[在 jsFiddle 上试试吧！](http://jsfiddle.net/adamzr/acKBW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:45:09.043

Twitter Bootstrap 有一个很好的 jQuery 插件，可以为你做到这一点：http: [//twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

只需使用

```
$( element ).typeahead( { source: arrayOrFunction } ); 
```

它有很好的记录，所以你应该能够弄清楚。=)

jQuery UI 的自动完成功能也以类似的方式做到这一点。只需传递一个字符串数组或一个函数，将查询作为第一个参数，将回调作为第二个参数，然后使用您的自动完成选项调用回调。

# c# - 在 LINQ 查询中使用动态数据类型

> ID：14839491
> 
> 赞同：1
> 
> 时间：2013-02-12T18:41:40.700
> 
> 标签：c#, .net, linq, datatable, dataset

有一个如下的 Linq 查询：

```
from row in myDataTable.AsEnumerable() select row.Field<string>("myDataColumn") 
```

现在尝试使其适用于任何列数据类型（不仅仅是`string`）。尝试了以下方法：

```
from row in myDataTable.AsEnumerable() select row.Field<myDataTable.Columns["myDataColumn"].DataType>("myDataColumn") 
```

但它不起作用。

那么有没有办法在这个特定的 Linq 查询中使数据类型动态化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:42:45.023

当您在编译时知道类型时，该`Field`属性旨在获取值。当您不只是使用索引器时：

```
from row in myDataTable.AsEnumerable() select row["myDataColumn"]; 
```

这会将值作为`object`.

# jquery - 如何在模态隐藏褪色中通过日期选择器存储更新的日期？

> ID：14839493
> 
> 赞同：0
> 
> 时间：2013-02-12T18:41:44.167
> 
> 标签：jquery, angularjs

当我单击编辑项目按钮时，模态隐藏淡入淡出将显示项目详细信息。我想将更改后的日期值恢复到我的 item.date.sDate 中，但它不起作用。

```
 <div class="modal hide fade" id="editdetails">
  <div class="modal-header"><h3>Update Project Information</h3></div>
  <div class="modal-body">
  <label>Project: </label>
    <input type="text" value= {{item.data.project}} class="span3" id="appendedDropdownButton" ng-model="item.data.project"><br>
  <label>Start Date: </label>
    <input type="text" value= {{item.data.sDate}} class="span3" id="datepicker1" ng-model="item.data.sDate"><br>
  <label>End Date: </label>
    <input type="text" value= {{item.data.eDate}} class="span3" id="datepicker2" ng-model="item.data.eDate"><br>
   </div>
    <br>
    <div class="modal-footer">
        <a href="#" class="btn close_btn" data-dismiss="modal">Close</a>
        <a href="#" class="btn btn-primary save_btn" ng-click="update(item.id)">Save Changes</a>
    </div>
  </div> 
```

关于日期选择器的 Javascript，它们将日期更改为文本。

```
 $( "#datepicker1" ).datepicker({
               inline: true,
               dateFormat: 'dd/mm/yy',
               onSelect: function(dateText) {
                   $("#datepicker2").datepicker("option","minDate", dateText)
                   var modelPath = $(this).attr('ng-model');
                   putObject(modelPath, $scope, dateText);
                   $scope.$apply();
                }
});

$( "#datepicker2" ).datepicker({
               inline: true,
               dateFormat: 'dd/mm/yy',

               onSelect: function(dateText) {
                   $("#datepicker1").datepicker("option","maxDate", dateText)
                   var modelPath = $(this).attr('ng-model');
                   putObject(modelPath, $scope, dateText);
                   $scope.$apply();
               }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:11:05.553

您应该使用指令来设置您的日期选择器。幸运的是，[Angular-UI 已经为你做到了。](http://angular-ui.github.com/#directives-date)

```
<div ng-controller="MyCtrl">
    <input ng-model="date" ui-date ng-change="dateChanged()"/><br/>
     Selected Date: {{date | date: 'MMM d yyyy'}}
</div> 
```

然后在你的控制器中：

```
app.controller('MyCtrl', function($scope){ 
    $scope.dateChanged = function (){
        console.log('Date is: ' + $scope.date);
    };
}); 
```

# c# - 如何捕获通过 lambda 传递的方法参数？

> ID：14839501
> 
> 赞同：0
> 
> 时间：2013-02-12T18:42:16.320
> 
> 标签：c#, reflection, lambda, func

我在 Web API 基本控制器中有一个通用方法，我将一个 Func 传递给该方法，如果可能的话，我想以某种方式捕获 lambda 中使用的回调方法的参数...

为了说明看下面的代码

```
public class StuffController : BaseController
{
    // method #1
    [HttpGet]
    public async Task<HttpResponseMessage> GetWidget(int id)
    {
        return await ProcessRestCall(async rc => await rc.GetWidgetAsync(id));
    }

    // method #2
    [HttpGet]
    public async Task<HttpResponseMessage> GetWidget(int year, int periodId, int modelId, int sequenceId)
    {
        return await ProcessRestCall(async rc => await rc.GetWidgetAsync(year, periodId, modelId, sequenceId));
    }

    // method #3
    [HttpGet]
    public async Task<HttpResponseMessage> DecodeWidget(string sid)
    {
        return await ProcessRestCall(async rc => await rc.GetIdsAsync(sid));
    }
}

public class BaseController : ApiController
{
    [NonAction]
    protected async Task<HttpResponseMessage> ProcessRestCall<T>(Func<RestClient, Task<T>> restClientCallback) where T : class
    {
        // stuff happens...

        // TODO: here I'd like to capture parameters (and their types) of the await methods passed to restClientCallback via lambdas...
        // for example, in case of method #2 I would  get params object [] containing year, periodId, modelId, sequenceId
        T result = await restClientCallback(restClient);

        // more stuff...
        var response = Request.CreateResponse(HttpStatusCode.OK, result);        
        return response;
    }
} 
```

## 更新（“为什么要这样做？”）

上面的`ProcessRestCall`方法做了很多事情，但主要是登录、获取数据、注销……我有一个简单的小内存缓存，我想在登录后使用它来返回数据并提高性能。我无法控制“休息客户端”及其行为方式。我的 WidgetCache 包装 System.Runtime.Caching.MemoryCache 并使用“typeof(T)-id(-id)*”作为字符串缓存键。要生成缓存键，我需要结果类型（我有）和 1 个或多个相关 ID（在 labbda 回调中作为参数传递）

## 可能的解决方法（也许更清洁的方法）

我可以捕获这些数据并将其作为参数发送到`ProcessRestCall`

```
public async Task<HttpResponseMessage> GetWidget(int id)
{
    var cacheKey = Cache.GenerateKeyFor(typeof(Widget), id);
    return await ProcessRestCall(async rc => await rc.GetWidgetAsync(id), cacheKey);
} 
```

# c# - 如何检索 Azure 表中的第一行

> ID：14839506
> 
> 赞同：2
> 
> 时间：2013-02-12T18:42:38.817
> 
> 标签：c#, azure

我是否需要获取所有值而不是在第一条记录后打破 foreach 块？如下所示：

```
TableQuery<CustomerEntity> query = new TableQuery<CustomerEntity>()
    .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "Smith"));

// Print the fields for each customer.
foreach (CustomerEntity entity in table.ExecuteQuery(query))
{
    Console.WriteLine("{0}, {1}\t{2}\t{3}", entity.PartitionKey, entity.RowKey,
        entity.Email, entity.PhoneNumber);
    break;
} 
```

还是有选择顶部命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:06:07.133

表存储的默认排序顺序是按分区键和行键。您是否正在寻找最近添加的项目？如果是这样，您可以利用 PK 和 RK 来帮助您，将 RK 值设置为 DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks 之类的值。然后使用 LINQ 的 Take() 函数返回必要的行。

# postgresql - 是否应该将 autovacuum 设置为开启？

> ID：14839510
> 
> 赞同：3
> 
> 时间：2013-02-12T18:42:49.530
> 
> 标签：postgresql, postgresql-9.1

我有一个在亚马逊 ec2/ebs 上运行的 Postgresql 9.1 db。数据库开始变慢。我们有一张包含 100 万条记录的表，这似乎让一切都变慢了。在查看 postgres 配置时，我们注意到 autovacum 设置被注释掉了。

解决这个问题的正确方法是什么。是否应该将 autovacum 设置为开启？我们应该有一些在设定的时间间隔内自动清理的 cron 吗？

此外，任何关于如何清理 prod db、如何知道您是否需要清理的想法/链接将不胜感激。我正在寻找学习。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:57:13.467

autovacuum 应该运行的频率取决于您的数据库修改记录的频率。如果您的数据库不断进行删除和更新，那么您将需要经常运行 autovacuum。如果您的数据库/模式只是简单地添加到数据库并且很少进行更新或删除，那么您不需要经常运行它。

Autovacuum 仅用于回收数据库不再使用的内存/存储空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T18:49:59.790

1.  打开自动吸尘器
2.  运行，从`psql`：VACUUM VERBOSE ANALYZE table。并读取输出。

一般来说 - 你想要 autovacuum，偶尔你可能想要手动运行 VACUUM，如果你会发现任何错误。

# jquery - 如何在 joomla 组件的视图 (k2) 中进行 ajax 访问和更新数据库中的用户配置文件数据？

> ID：14839511
> 
> 赞同：2
> 
> 时间：2013-02-12T18:42:50.587
> 
> 标签：jquery, joomla, joomla2.5, joomla-k2

我正在使用带有默认“用户配置文件”插件的 joomla 2.5，该插件向 joomla 的配置文件页面添加了额外的字段。

我也在使用 k2 并为我正在使用的视图设置了模板覆盖设置：

```
site/templates/template/html/com_k2/category_item.php 
```

在该视图中，我可以使用以下方法成功“提取”我需要的数据：

```
jimport('joomla.user.helper');
$user = & JFactory::getUser();
$profile = JUserHelper::getProfile($user->id);
echo $profile->profile['fieldname']; 
```

我的问题是真的......如何在不刷新页面的情况下使用 jQuery / Javascript 更新此字段？不幸的是，没有类似的 joomla 功能：

```
JUserHelper::updateProfileField(value,user->id) 
```

这是我希望与 jQuery 的 .ajax() 一起使用的...无论如何，我想我可能必须编写一个函数来执行此操作...在这种情况下，我可能不想修改核心 joomla 的东西（ JUserHelper）...但也许是我自己的？或者我应该向 k2 添加一个可以更新 joomla 用户配置文件数据的功能？

顺便说一句......我这样做的全部目的是因为我想在用户个人资料页面中添加一个自定义“点”字段......我只需要一种可靠的方式来阅读和更新它（我认为使用 ajax） k2 category_item.php 视图！

谢谢你！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:53:14.707

您应该编写一个组件来处理 ajax 调用，或者至少添加一个带有您需要的任务的控制器，即，如果您试图取回一些 json：

```
{user:'paul', custom_field_1:'yes and no'} 
```

然后在您的控制器中，即 com_your_component/controller.php 您将有一个任务，例如“getInfo”：

```
function getInfo() {
  // return the json
  echo json_encode($myResultArray);
  exit; // this will make sure you don't get the template etc.
} 
```

你会将 ajax 调用发送到：

```
http://example.com/index.php?option=com_your_component&task=getInfo&format=json 
```

# sql - 选择任何数据表中都不存在字符串的 ID

> ID：14839515
> 
> 赞同：0
> 
> 时间：2013-02-12T18:43:09.613
> 
> 标签：sql, oracle, select

首先，让我从我正在使用的表格开始。它们看起来像这样：

```
Table - Transaction
===================
trans_id
name

Table - Checkpoint
==================
trans_id
checkpoint_id
checkpoint_data 
```

一个事务可以有多个检查点，一个检查点只能有一个事务。

我无法形成一个 SQL 语句，该语句将选择某个名称的所有事务，该名称在其任何关联的检查点`trans_id`中不包含某些字符串。`checkpoint_data`

这个 SQL 语句会是什么样子？我正在使用 Oracle，但任何 SQL 都应该为我指明正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:47:11.040

```
select trans_id
from transactions t
left outer join checkpoint c on c.trans_id = t.trans_id
where t.name = 'transaction name'
group by t.trans_id
having sum(case when contains(checkpoint_data, 'some string') > 0 
                then 1 
                else 0 
           end) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:52:03.713

```
Select distinct(ch.trans_id) from checkpoint ch join transaction t on ch.trans_id=t.trans_id and t.name like '%test%'  and ch.chech_point not like '%exclude%' 
```

# r - 将相关的嵌套列表元素向量组合成矩阵

> ID：14839523
> 
> 赞同：4
> 
> 时间：2013-02-12T18:43:35.943
> 
> 标签：r, list

我有一个列表，其中每个列表元素本身都包含另一个包含多个名称对象的列表。这些命名对象中的每一个都是相同长度的向量。我的目标是通过连接向量有效地将相关对象（同名对象）组合成一个矩阵。

这是我正在使用的结构类型的示例。但是，在当前应用程序中，它来自 mclapply，因为它是一个并行化的多级模型，我认为没有办法返回列表列表。

```
> test=lapply(1:2,function(x){out = list(); out$t=rnorm(3)+x; out$p =rnorm(3)+ x+.1; return(out)})
> test
[[1]]
[[1]]$t
[1] 0.5950165 0.8827352 0.5614947

[[1]]$p
[1] 2.6144102 1.9688743 0.6241944

[[2]]
[[2]]$t
[1] 2.562030 1.832571 3.018756

[[2]]$p
[1] 1.7431969 0.5305784 2.6935106 
```

这是完成我想要的粗略方法

```
> t.matrix = cbind(test[[1]]$t,test[[2]]$t)
> t.matrix
           [,1]     [,2]
[1,]  2.2094525 2.634907
[2,] -0.2822453 2.440666
[3,]  1.1704518 2.483424 
```

但相反，我希望能够为很长的列表（大约 100 万个元素）执行此操作，而我当前的解决方案无法扩展。

我想我可以使用 for 循环，但似乎必须有更好的方法来巧妙地使用 reduce 或 unlist 或 sapply 或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:47:32.193

```
test <- lapply(1:4, function(x) { 
          out = list(); out$t=rnorm(3)+x; out$p =rnorm(3)+ x+.1; return(out)})

do.call(cbind, lapply(test, function(X) X[["t"]]))
## do.call(cbind, lapply(test, "[[", "t"))          ## Or, equivalently 
#           [,1]      [,2]     [,3]     [,4] 
# [1,] 0.7382887 0.9248296 4.205222 5.847823 
# [2,] 3.0321069 3.6806652 3.324739 3.695195 
# [3,] 2.3611483 1.9305901 1.574586 4.287534 
```

或者，一次处理两组列表元素：

```
elems <- c("t", "p")
sapply(elems, function(E) {
     do.call(cbind,
             lapply(test, function(X) {
                 X[[E]]
             }))
}, simplify=FALSE)
# $t
#           [,1]       [,2]     [,3]     [,4]
# [1,] 1.9226614 0.66463844 2.558517 2.743381
# [2,] 3.0026400 0.03238983 2.195404 3.824127
# [3,] 0.9371057 3.54638107 2.968717 2.434471
# 
# $p
#           [,1]     [,2]     [,3]     [,4]
# [1,] 0.8544413 2.942780 4.693698 4.158212
# [2,] 0.7172070 2.381438 4.869630 3.503361
# [3,] 3.1369674 2.464447 2.484968 3.626174 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T18:52:08.773

怎么用`unlist(test, recursive = FALSE)`。但是，如果您希望将“p”和“t”分开，则需要不止一步完成。他们在一起：

```
temp <- do.call(cbind, unlist(test, recursive = FALSE))
temp
             t         p        t        p
[1,] 0.3735462 2.6952808 2.487429 1.794612
[2,] 1.1836433 1.4295078 2.738325 3.611781
[3,] 0.1643714 0.2795316 2.575781 2.489843 
```

将它们分开非常简单：

```
temp[, colnames(temp) %in% "t"]
#              t        t
# [1,] 0.3735462 2.487429
# [2,] 1.1836433 2.738325
# [3,] 0.1643714 2.575781
temp[, colnames(temp) %in% "p"]
#              p        p
# [1,] 2.6952808 1.794612
# [2,] 1.4295078 3.611781
# [3,] 0.2795316 2.489843 
```

这是我使用的数据：

```
set.seed(1)
test <- lapply(1:2, function(x) {
  out = list()
  out$t=rnorm(3)+x
  out$p =rnorm(3)+ x+.1
  return(out)
}) 
```

# python - 在 Python 中合并两个对象

> ID：14839528
> 
> 赞同：54
> 
> 时间：2013-02-12T18:43:51.240
> 
> 标签：python, object, dictionary, merge, built-in

有没有在 Python 中合并两个对象的好方法？像内置方法或基本库调用？

现在我有这个，但它似乎不应该手动完成：

```
def add_obj(obj, add_obj):

    for property in add_obj:
        obj[property] = add_obj[property] 
```

注意：“对象”是指“字典”：`obj = {}`

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-12T18:50:02.007

如果`obj`是字典，使用它的[`update`](http://docs.python.org/2/library/stdtypes.html#dict.update)函数：

```
obj.update(add_obj) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-12T18:49:51.553

怎么样

```
merged = dict()
merged.update(obj)
merged.update(add_obj) 
```

请注意，这实际上适用于字典。

如果`obj`已经是字典，那么`obj.update(add_obj)`显然可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-15T15:00:02.133

```
>>> A = {'a': 1}
>>> B = {'b': 2}
>>> A.update(B)
>>> A
{'a': 1, 'b': 2} 
```

在匹配键上：

```
>>> C = {'a': -1}
>>> A.update(C)
>>> A
{'a': -1, 'b': 2} 
```

# c++ - '_T' 没有在这个范围内声明？

> ID：14839529
> 
> 赞同：10
> 
> 时间：2013-02-12T18:43:53.730
> 
> 标签：c++, macros, include, g++, string-literals

我应该包含什么文件才能拥有 _T() 宏？它转换了我认为的文本文字。我以为是 windows.h，但我已经包含了它。

令人惊讶的是，我在谷歌上找不到答案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T18:47:03.577

[我在 MSDN 中的Unicode Programming Summary](http://msdn.microsoft.com/en-us/library/dybsewaf(v=vs.80).aspx)主题下找到了您要求的信息。

答案是`Tchar.h`。

# javascript - 将 API 方法构建为 Angular 服务

> ID：14839531
> 
> 赞同：0
> 
> 时间：2013-02-12T18:43:59.317
> 
> 标签：javascript, angularjs

当我几天前开始使用 AngularJS 时，我发现了很多有用的东西，并且我意识到在你的 Web 应用程序中使用它比从头开始构建所有东西（有时这是必要的，但在大多数情况下不是）或使用许多库可能会使应用程序的加载时间变得混乱。

所以，我有一个用于在线商店的 php API 包装器，它有很多方法（我试图模仿 REST，但 API 只提供 POST 和 GET ），我开始为它构建一个 JS 脚本，可以用来调用无需任何 PHP 知识或无需接触任何 PHP 代码的方法。

使用 AngularJS 我想出了这个：

```
var Application = Application || {};

;(function($, window, document, undefined) {

"use strict";

var Envato = {};

Application.Envato = angular.module("Envato", []);

Application.Envato.constant("API", {

    Path : {
        Private : "api/envato/private/",
        Public : "api/envato/public/"
    }
});

})(jQuery, window, document); 
```

以上将是我的模块，放置在一个`modules`文件夹中。接下来，将是围绕模块的工厂构建（与上述模块位于同一文件夹中）：

```
var Application = Application || {};

;(function($, window, document, undefined) {

"use strict";

Application.Envato.factory("APIXHRService", function($http, $timeout, $q) {

    return function(method, url, data) {

        var deferred = $q.defer(),
            headers = {
                "Content-Type" : "Application/JSON"
            };

        $http({ method : method, url : url, data : data, headers : headers }).success(function(_data) {

            deferred.resolve(_data);
            deferred = $q.defer();
        }).error(function(_data) {

            deferred.resolve(_data || "Request [ Failed ]");
            deferred = $q.defer();
        });

        return deferred.promise;
    };
});

Application.Envato.factory("Envato", function(APIXHRService, API) {

    return {

        API : {

            Private : {

                User : {

                    Account : function(user){
                        return APIXHRService("POST", API.Path.Private + "get-account-information.php", { user : user });
                    },

                    Statement : function(user) {
                        return APIXHRService("POST", API.Path.Private + "get-statement.php", { user : user });
                    },

                    Sales : function(user) {
                        return APIXHRService("POST", API.Path.Private + "get-recent-sales.php", { user : user });
                    },

                    Transactions : function(user) {
                        return APIXHRService("POST", API.Path.Private + "get-earnings-and-sales-by-month.php", { user : user });
                    },

                    Vitals : function(user) {
                        return APIXHRService("POST", API.Path.Private + "get-user-vitals.php", { user : user });
                    }
                },

                Purchases : {

                    Download : function(user, token) {
                        return APIXHRService("POST", API.Path.Private + "get-item-download-url.php", { user : user, token : token });
                    },

                    Information : function(user, token) {
                        return APIXHRService("POST", API.Path.Private + "get-purchase-information.php", { user : user, token : token });
                    }
                }
            },

            Public : {

                API : {

                    Releases : function() {
                        return APIXHRService("GET", API.Path.Public + "get-api-releases.php");
                    }
                },

                Blog : {

                    Posts : function(marketplaces) {
                        return APIXHRService("POST", API.Path.Public + "get-blog-posts.php", { marketplaces : marketplaces });
                    },

                    Threads : {

                        Active : function(marketplaces) {
                            return APIXHRService("POST", API.Path.Public + "get-active-threads.php", { marketplaces : marketplaces });
                        },

                        Status : function(threads) {
                            return APIXHRService("POST", API.Path.Public + "get-thread-status.php", { threads : threads });
                        }
                    }
                },

                Collections : function(collections) {
                    return APIXHRService("POST", API.Path.Public + "get-collections.php", { collections : collections });
                },

                Items : {

                    Count : function(marketplaces) {
                        return APIXHRService("POST", API.Path.Public + "get-items-count.php", { marketplaces : marketplaces });
                    },

                    Featured : function(marketplaces) {
                        return APIXHRService("POST", API.Path.Public + "get-featured-items.php", { marketplaces : marketplaces });
                    },

                    Information : function(items) {
                        return APIXHRService("POST", API.Path.Public + "get-item-information.php", { items : items });
                    },

                    Latest : {

                        Marketplace : function(marketplaces) {
                            return APIXHRService("POST", API.Path.Public + "get-new-items-from-market.php", { marketplaces : marketplaces });
                        },

                        Random : function(marketplaces) {
                            return APIXHRService("POST", API.Path.Public + "get-random-new-items.php", { marketplaces : marketplaces });
                        },

                        User : function(users) {
                            return APIXHRService("POST", API.Path.Public + "get-new-items-from-user.php", { users : users });
                        }
                    },

                    Popular : function(marketplaces) {
                        return APIXHRService("POST", API.Path.Public + "get-popular-items.php", { marketplaces : marketplaces });
                    },

                    Price : function(items) {
                        return APIXHRService("POST", API.Path.Public + "get-item-price.php", { items : items });
                    }
                },

                Users : {

                    Information : function(users) {
                        return APIXHRService("POST", API.Path.Public + "get-user-information.php", { users : users });
                    },

                    Items : {

                        Count : function(users) {
                            return APIXHRService("POST", API.Path.Public + "get-user-items-by-site.php", { users : users });
                        }
                    },

                    Total : function() {
                        return APIXHRService("GET", API.Path.Public + "get-total-users-count.php");
                    },
                },

                Search : function(expression, marketplace, categories) {
                    return APIXHRService("POST", API.Path.Public + "get-search-results.php", { expression : expression, marketplace : ( marketplace === undefined ? "" : marketplace ), categories : ( categories === undefined ? "" : categories ) });
                }
            }
        }
    };
});

})(jQuery, window, document); 
```

最后，如果需要，我有一个控制器，可以让我检查方法是否正常工作：

```
var Application = Application || {};

;(function($, window, document, undefined) {

"use strict";

Application.controller("EnvatoAPIController", ["$scope", "_debounce", "Envato", function($scope, _debounce, Envato) {

    $scope.getData = _debounce(function($event) {

        $event.preventDefault();

        return Envato.API.Private.Purchases.Download("chaoscod3r", "52dfdscb1-dada-4ff8-bfcb-d3fdsbn55mda").then(function(data) {
            $scope.data = JSON.stringify(data, undefined, 4);
        });

    }, 250, false);

}]);

})(jQuery, window, document); 
```

我发布这篇文章的原因是我正在寻找一些关于如何改进我的代码的见解，因为在我看来，那里发生的事情有点多。也许使用 Angular 有更好的方法？我没有机会阅读所有 AngularJS API 文档，所以我想这里肯定有很多开发人员在使用 Angular 并且可以给我一些提示 :)

**编辑：**问题是我怎样才能折射`Envato`工厂？哪种方式最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:28:42.147

如果省略全局 app var 声明并将所有 angular 模块附加到 angular 对象，则可以节省一些行。（我不确定在哪里放置“使用严格”；虽然声明。）

还使用括号表示法进行依赖注入，以便稍后启用 js 代码缩小。

**前：**

```
var Application = Application || {};

;(function($, window, document, undefined) {

    Application.Envato.factory("APIXHRService", function($http, $timeout, $q) {
       return function (
       //something
    });

    Application.Envato.factory("Envato", function(APIXHRService, API) {
        return {
            //api
        };
    });

})(jQuery, window, document); 
```

**后：**

```
angular.factory("APIXHRService", ["$http", "$timeout", "$q", function($http, $timeout, $q) {
   return function (
   //something
}])

.factory("Envato", ["APIXHRService", "API", function(APIXHRService, API) {
    return {
        //api
    };
}]); 
```

# jquery - 在输入或文本区域中使用光标键时防止 div 滚动 - safari/chrome

> ID：14839532
> 
> 赞同：1
> 
> 时间：2013-02-12T18:43:59.883
> 
> 标签：jquery, forms, webkit, keyboard

[http://jsfiddle.net/ianhk/t9Hj6/](http://jsfiddle.net/ianhk/t9Hj6/)

```
<div style="width:250px; height: 100px; border: black solid 1px; overflow:auto">
  <table style="height:200px; border: red solid 1px">
    <tr>
      <td>abcdefghi</td>
      <td>
        <input id="text" value="Some text">
      </td>
      <td>abcdefghi</td>
    </tr>
    <tr>
      <td>test</td>
      <td>test</td>
      <td>test</td>
    </tr>
  </table>
 </div>

$("#text").on("keydown", function (ev) {
   ev.stopPropagation();
}); 
```

在上面的小提琴中，我有一个溢出设置为自动的 div，其中包含一个超大表格，其中一个单元格中有一个输入表单元素。

使用 safari 和 chrome 使用左/右光标键会导致 div 在到达最左/最右位置时向左/向右滚动。我想避免 div 滚动。

我尝试过的事情：

*   keydown/preventDefault - 防止光标键工作（显然）
*   keydown/stopPropagation - 没有变化，期待这会阻止事件冒泡到 div
*   将输入包装在一个表单中并尝试在该表单上停止传播
*   在编辑时禁用 div 上的滚动 - 当 IE/FF 隐藏/显示滚动条和内容四处移动时，这会变得复杂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:03:03.373

这有点麻烦，但是您可以使用以下方法检测插入符号相对于文本长度的位置：[https](https://stackoverflow.com/a/2897510) ://stackoverflow.com/a/2897510然后您可以简单地返回 false 如果在结尾（或开始) 的文本并试图移动。

# c# - 通过 WebRequest 对 json.net 反序列化随机失败

> ID：14839534
> 
> 赞同：4
> 
> 时间：2013-02-12T18:44:12.253
> 
> 标签：c#, ios, json.net

我正在使用 Json.NET 反序列化由 iOS 客户端（使用 Monotouch）上的 API 服务器发送的 json 文件。我有一个非常奇怪的问题，因为有时反序列化会因随机异常而失败。我之前没有任何问题，我认为它是从 json 文件变大开始的。发生这种情况时，我只是要求应用程序再试一次，并且在随机次数（并随机选择不同的异常）之后，反序列化最终会无缘无故地工作。

以下是我得到的不同例外：

```
 2013-02-12 19:14:58.307 client_ios[2176:4303] Failed to deserialize: Unexpected end of content while loading JObject.  
        at Newtonsoft.Json.Linq.JContainer.ReadTokenFrom (Newtonsoft.Json.JsonReader r) [0x00000] in <filename unknown>:0 
        at Newtonsoft.Json.Linq.JObject.Load (Newtonsoft.Json.JsonReader reader) [0x00000] in <filename unknown>:0 
        at shared.api.NotificationConverter.ReadJson (Newtonsoft.Json.JsonReader reader, System.Type objectType, System.Object existingValue, Newtonsoft.Json.JsonSerializer serializer) [0x00000] in /Users/xxx/Projects/xxx/shared/src/api/Notification.cs:23 
        at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty (Newtonsoft.Json.JsonReader reader, System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract) [0x00000] in <filename unknown>:0 
        at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateList (IWrappedCollection wrappedList, Newtonsoft.Json.JsonReader reader, System.String reference, Newtonsoft.Json.Serialization.JsonArrayContract contract) [0x00000] in <filename unknown>:0 

Failed to deserialize: Unterminated string. Expected delimiter: ". Line 2530, position 69\.  at Newtonsoft.Json.JsonTextReader.ReadStringIntoBuffer (Char quote) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonTextReader.ParseString (Char quote) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonTextReader.ParseValue (Char currentChar) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonTextReader.ReadInternal () [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.JsonTextReader.Read () [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Linq.JContainer.ReadContentFrom (Newtonsoft.Json.JsonReader r) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Linq.JContainer.ReadTokenFrom (Newtonsoft.Json.JsonReader r) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Linq.JObject.Load (Newtonsoft.Json.JsonReader reader) [0x00000] in <filename unknown>:0 
  at shared.api.NotificationConverter.ReadJson (Newtonsoft.Json.JsonReader reader, System.Type objectType, System.Object existingValue, Newtonsoft.Json.JsonSerializer serializer) [0x00000] in /Users/xxx/Projects/xxx/shared/src/api/Notification.cs:23 
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty (Newtonsoft.Json.JsonReader reader, System.Type objectType, Newtonsoft.Json.Serialization.JsonContract contract) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateList (IWrappedCollection wrappedList, Newtonsoft.Json.JsonReader reader, System.String reference,     Newtonsoft.Json.Serialization.JsonArrayContract contract) [0x00000] in <filename unknown>:0 
```

这是我用于反序列化的几行代码：

```
using (WebResponse webResponse = requestWeb.GetResponse()) {
    using (Stream responseStream = webResponse.GetResponseStream()) {
        using (StreamReader streamReader = new StreamReader(responseStream)) {
            using (JsonReader jsonReader = new JsonTextReader(streamReader)) {
                JsonSerializer serializer = new JsonSerializer();
                serializer.Converters.Add(creator);
                rsp = serializer.Deserialize<SimpleServerResponse>(jsonReader);
            }
        }
     }
} 
```

它在 JObject.Load(reader) 处崩溃：

```
public class NotificationConverter : JsonConverter {

    public override bool CanConvert(Type objectType) {
        return typeof(ANotification).IsAssignableFrom(objectType);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
        JObject jobject = JObject.Load(reader);

        object target = null;

        JToken token = jobject["type_id"];

        if (token != null) {
            int id = token.ToObject<int>();

            switch (id) {
                case ANotification.STORY_INVITE:
                    target = new Notification<Moment>();
                    break;
                case ANotification.STORY_CONTENT_ADDED:
                    target = new Notification<Moment>();
                    break;
                case ANotification.STORY_LIKE:
                    target = new Notification<Moment>();
                    break;
                case ANotification.PICTURE_COMMENTED:
                    target = new Notification<PictureMomentPair>();
                    break;
                case ANotification.PICTURE_LIKED:
                    target = new Notification<PictureMomentPair>();
                    break;
                case ANotification.USER_FOLLOW:
                    target = new Notification<User>();
                    break;
                default:
                    break;
            }

            serializer.Populate(jobject.CreateReader(), target);
        }

        return target;
    }
} 
```

关于我的 JsonConverter 的一些解释：服务器在 JSON 文件上发送的对象可能会根据“type_id”值而改变。JsonConverter 尝试读取 type_id 并根据它返回正确的对象。

我现在的解决方法是读取字符串中的整个流，然后将其传递给 json 反序列化器，但它在 iOS 上肯定更慢（更多 CPU 消耗）。

我不知道为什么有时它有效，有时无效。

# asp.net - 如何在嵌套的 ASP.NET 列表视图中使用 jQuery 检测当前元素

> ID：14839535
> 
> 赞同：0
> 
> 时间：2013-02-12T18:44:14.347
> 
> 标签：asp.net, listview, jquery-selectors

我有一个嵌套的列表视图，其中包含多行，每行都包含一个 ddl 和一个文本框，例如：

```
<ItemTemplate>
    <tr>
        <td>
            <asp:DropDownList id="myDDL" runat="server" CssClass="aDDL"
                onfocus="javaScript:$(function() { 
                $(<selector>).siblings.RemoveClass('wrappedElement');
                $(<selector>).addClass('wrappedElement');
             })" /></td>
        <td><asp:TextBox id="myTextBox" runat="server" CssClass="aTextBox"
                onfocus="javaScript:$(function() { 
                $(<selector>).siblings.RemoveClass('wrappedElement');
                $(<selector>).addClass('wrappedElement');
             })" /></td>
    </tr>
</ItemTemplate> 
```

我想要做的是包装被点击的元素。发生的事情是我包装了所有“aDDL”或“aTextBox”元素。我需要找到刚刚关注的元素的***选择器。***

我试过[这篇文章](https://stackoverflow.com/questions/4959288/find-with-jquery-the-correct-listview-clientid-where-there-are-more-than-one-lis)，但“this”或 $(this) 最终指向整个文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:53:00.223

几个项目：

您不需要为代码添加前缀`javascript:`，只有链接元素才需要，而是在`href`属性上调用函数`<a href="javascript:...">`。（在这种情况下可能更好地绑定到`click`事件。）

您也不需要用 jQuery 对象包装内联函数。而不是编码：`onfocus="javaScript:$(function() { })"`，尝试`onfocus="function()"`。

最后，您可以将`event`对象作为处理程序调用的一部分传递，以访问选择器。不确定它是否可以内联：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="Scripts/jquery-1.9.1.min.js"></script>
    <script>
        function select(e) {
            var selector = e.target; // "select#options"
            var $selector = $(e.target) // jQuery object wrapping <select>
        }
    </script>
</head>
<body>
    <select id="options" onfocus="select(event)">
        <option value="1">Dog</option>
        <option value="2">Cat</option>
        <option value="3">Horse</option>
    </select>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:31:52.627

我会尝试在模板之外的一个地方定义您的 javascript。像这样的东西（来自记忆）：

```
$(".aDDL").focus(function() {
     $(".wrappedElement").RemoveClass('wrappedElement');
     $(this).addClass('wrappedElement');
 });

// etc. 
```

根据我的经验，通过选择器从元素外部分配函数比将它们设置为 HTML 标记的一部分效果更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:46:07.587

在 Javascript 中

```
$(function() { 
    $(".aDDL,.aTextBox").focus(function() {
        $(".aDDL,.aTextBox").RemoveClass('wrappedElement');
        $(this).addClass('wrappedElement');
    });
}); 
```

并将其用作您的项目模板

```
<ItemTemplate>
    <tr>
        <td>
            <asp:DropDownList id="myDDL" runat="server" CssClass="aDDL" /></td>
        <td>
            <asp:TextBox id="myTextBox" runat="server" CssClass="aTextBox" /></td>
    </tr>
</ItemTemplate> 
```

如果您仍想内联，请尝试以下操作。

```
onfocus="$(function() { 
            var $this = $(document.activeElement);
            $this.siblings.RemoveClass('wrappedElement');
            $this.addClass('wrappedElement');
         })" 
```

# java - 从 Java 中的多个单选按钮组获取输入

> ID：14839538
> 
> 赞同：0
> 
> 时间：2013-02-12T18:44:36.490
> 
> 标签：java, radio-button, awt

我有几个单选按钮组，用于主菜、开胃菜和饮料等不同的东西。我希望用户能够选择每种类型的事物中的一种。

我不确定如何实现动作监听器 - 每个组都需要自己的动作监听器吗？如果是这样，我如何区分动作侦听器/组？

```
private class SelectionChangeMade implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent e) {
        String drinkChoice = drinkButtonGroup.getSelection().getActionCommand();
        System.out.println(drinkChoice);
//      String appetizerChoice =
                appetizerButtonGroup.getSelection().getActionCommand();
        // above line gives me a NullPointerError if uncommented
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:03:16.277

不，您不需要为每个按钮组创建一个动作侦听器。您可以使用您编写的操作侦听器来读取用户输入。如果您尝试在特定事件（例如用户单击提交按钮）上获取单选按钮选择，则将此操作侦听器添加到提交按钮。

而且，空指针异常是由于用户没有选择任何开胃菜引起的，您必须确保用户在获取操作命令之前已经选择了一些开胃菜。

# file - PHP 列出文件的顺序

> ID：14839540
> 
> 赞同：1
> 
> 时间：2013-02-11T21:40:43.980
> 
> 标签：file, directory, php, http

基本上我有一个 php 脚本，它列出了目录中的所有文件并创建指向它们的链接。但是，它似乎以非常任意的方式对文件进行排序（不是按字母顺序/按日期/按大小等...）。php以什么方式订购文件？有什么办法可以改变这个吗？

```
 <?php
    $orig = "/var/www/phplist";
    if ($dir = opendir($orig)) {
        echo "from: $orig";
        echo "<br><br>";

        while ($file = readdir($dir)) {
        $ok = "true";
        $filename = $file;
        if ($file == "."){
        $ok = "false";
        }
        else if ($file == ".."){
        $ok = "false";
        }
        if ($ok == "true"){
          echo "<a href= '/phplist/$file'>$filename</a>";
        echo "<br>";
        }
        }

        closedir($dir);
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:52:47.413

此函数的[文档](http://php.net/manual/en/function.readdir.php)解释了您要查找的内容：

> 返回目录中下一个条目的名称。这些条目按照文件系统存储它们的顺序返回。

并且根据文件系统，文件可能会保留它们的创建顺序（FAT）；可能按字母顺序排序（NTFS）；可能会根据它们在[哈希表](http://en.wikipedia.org/wiki/Hash_function)(ext4) 中的位置进行排序；或其他各种方式。

如果您需要特定顺序的文件，请查看[scandir](http://php.net/manual/en/function.scandir.php)，它接受一个指定排序顺序的参数。

# ruby-on-rails - # 未定义的方法 `to_i'

> ID：14839543
> 
> 赞同：0
> 
> 时间：2013-02-12T18:45:03.447
> 
> 标签：ruby-on-rails

我目前对这个很困惑。我最近不得不更新我的 rails 应用程序，现在每当我尝试保存一个也尝试保存访问者对象的对象时都会看到这个错误弹出窗口。这是失败的代码：

```
if @sale.shift_id.nil?
            @sale.update_attribute(:shift_id,session[:shift_id])
            @title = "New Sale"
            @sale = Sale.new
            @products = Product.order("name")
            @shifts = Shift.order("starttime")

#this line below is line 51, which the output says is the failing line.
            Visitor.new(:gender => 'Other', :shift_id => session[:current_shift_id], :reason_id => Reason.find_by_name("Products")).save

            redirect_to(newsale_path, :notice => 'successfully added the sale')
        else 
```

我得到的错误是：

```
undefined method `to_i' for #<Reason:0x56f5848>
Rails.root: 

Application Trace | Framework Trace | Full Trace
app/controllers/sales_controller.rb:51:in `new'
app/controllers/sales_controller.rb:51:in `create' 
```

起初我认为它可能是 Reason.find_by_name，所以我用一个有效的整数值替换它，它仍然失败。我能看到的唯一可能失败的其他代码是 routes.rb，它在下面有一个条目：

```
match 'newsale', :to => 'sales#newsale' 
```

最后，webrick 的输出令人困惑，因为它实际上显示了保存 @sale 对象的 sql 调用，然后我得到以下几行：

```
SELECT "reasons".* FROM "reasons" WHERE "reasons"."name" = 'Products' LIMIT 1
Completed 500 Internal Server Error in 104ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:48:47.197

`:reason_id => Reason.find_by_name("Products")`这里 Rails 试图通过调用它*（它不存在）*`Reason`将找到的实例转换为一个整数值以设置为`:reason_id`属性。`Visitor``.to_i`

 *您需要通过更改告诉 Rails id 在哪里

```
Reason.find_by_name("Products") 
```

至

```
Reason.find_by_name("Products").id 
```

您也可以定义一个`to_i`方法 on`Reason`并按原样保留您的操作。

```
alias_method :to_i, :id 
```*

# json - 奇怪的 JSON 解析错误？

> ID：14839552
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:45:19.747
> 
> 标签：json, parsing, nsstring, nsarray, nsurlconnection

我曾经能够完美地解析这个 JSON，完全没有错误，但突然间它停止了工作，而且它不是我的 API 密钥......

这就是我要解析的内容：http: [//pastebin.com/vv8ScBfZ](http://pastebin.com/vv8ScBfZ)

这是我的解析代码：

```
NSError *myError = nil;
NSDictionary *flighttrackjson = [NSJSONSerialization JSONObjectWithData:jsonresponse options:NSJSONReadingMutableLeaves  error:&myError];
NSArray *FlightStatus =  [flighttrackjson objectForKey:@"flightStatuses"];
NSString *FlightID = [FlightStatus valueForKey:@"flightId"];
NSString *DepartACode = [FlightStatus valueForKey:@"departureAirportFsCode"];
NSString *ArivalACode = [FlightStatus valueForKey:@"arrivalAirportFsCode"];
NSArray *DepartATime = [FlightStatus valueForKey:@"departureDate"];
NSArray *AriveATime = [FlightStatus valueForKey:@"arrivalDate"];
NSString *DepartTimeString = [DepartATime valueForKey:@"dateLocal"];
NSString *ArriveTimeString = [AriveATime valueForKey:@"dateUtc"];
NSArray *Delays = [FlightStatus valueForKey:@"delays"];
NSString *DepartDelayMinutes = [Delays valueForKey:@"departureGateDelayMinutes"];
NSString *ArriveDelayMinutes = [Delays valueForKey:@"arrivalGateDelayMinutes"];
NSArray *AirportInfo = [FlightStatus valueForKey:@"airportResources"];
NSString *DepartTerminal = [AirportInfo valueForKey:@"departureTerminal"];
NSString *DepartAGate = [AirportInfo valueForKey:@"departureGate"];
NSString *ArriveTerminal = [AirportInfo valueForKey:@"arrivalTerminal"];
NSString *ArriveAGate = [AirportInfo valueForKey:@"arrivalGate"];
NSString *BaggageClaim = [AirportInfo valueForKey:@"baggage"];
flightID.text=FlightID;
DepartCode.text=DepartACode;
ArrivalCode.text=ArivalACode;
DepartTime.text=DepartTimeString;
ArriveTime.text=ArriveTimeString;
DepartDelay.text=DepartDelayMinutes;
ArriveDelay.text=ArriveDelayMinutes;
DepartTerm.text=DepartTerminal;
DepartGate.text=DepartAGate;
ArriveTerm.text=ArriveTerminal;
ArriveGate.text=ArriveAGate;
Baggage.text=BaggageClaim; 
```

当我运行它时，我收到此错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x8aa85f0' 
```

不，我不是想将数组的值分配给字符串。所以我在这里很困惑。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:58:39.803

> 不，我不是想将数组的值分配给字符串

哦，是的。

```
FlightStatus = [flighttrackjson objectForKey:@"flightStatuses"];
FlightID = [FlightStatus valueForKey:@"flightId"]; 
```

`FlightStatus`是一个数组，而不是字典（例如使用 JSONlint 来漂亮地打印 JSON，你会看到它）。

此外：我怀疑您的代码中有几个类似的错误，一个特定的错误`flightId`对应于一个`NSNumber`而不是一个`NSString`- 你也会因此而崩溃。

请研究 JSON 的官方参考和`NSJSONSerialization`类的文档，以查看哪些 JSON 数据类型映射到哪些 Foundation 类（顺便说一句，这很合乎逻辑）。

# windows-phone - 在 windows phone 中打开 .msg 文件

> ID：14839555
> 
> 赞同：0
> 
> 时间：2013-02-12T18:45:29.573
> 
> 标签：windows-phone

有没有办法在 Windows Phone 中使用 Outlook 打开 .msg 文件？.msg 文件将作为电子邮件的附件提供或可从网站下载。现在它只是说“无法打开附件。没有与此文件类型关联的应用程序”。我搜索了应用商店和互联网，但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:51:50.290

.msg 文件是从 Microsoft Outlook for Windows 创建或保存的消息。Windows Phone 电子邮件查看器不是 Outlook。它是一个单独的邮件查看器，不能识别 .msg 文件。如果有可以识别和处理 .msg 文件的应用程序，则可以使用该应用程序打开它。截至提出这个问题时，似乎没有任何应用程序声称它可以处理 .msg 文件。

作为一种解决方法，您可以让您的发件人将他们的电子邮件信息保存为 .html，Windows Phone 可以使用 Internet Explorer 打开该文件。

# requirejs - requirejs 优化报错：Loader 插件在构建中没有调用加载回调：文本

> ID：14839559
> 
> 赞同：1
> 
> 时间：2013-02-12T18:45:37.900
> 
> 标签：requirejs, r.js, requirejs-text

使用 require.js 和 requirejs api (r.js) 进行优化/缩小，并需要重新组织我们的目录结构（因此，重新映射 requirejs 配置文件/等中的所有内容）。

当前尝试编译（通过节点）的结果是：

```
compiling js...<br />
/usr/local/www/site/build/node_modules/requirejs/bin/r.js:14174<br />
            throw new Error(errorMsg);<br />
                  ^
**Error: Error: Loader plugin did not call the load callback in the build: text**<br />
Module loading did not complete for: <br />
at Function.build.traceDependencies (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:15178:19)<br />

at build (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:14174:23)<br />
at requirejs.optimize.runBuild (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:15472:30)<br />
at Object.context.execCb (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:1692:33)<br />
at Object.Module.check (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:948:51)<br />
at Object.Module.enable.id (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:1181:34)<br />
at g (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:233:23)<br />
at Module.emit (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:1224:21)<br />
at each (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:165:31)<br />
at Object.Module.emit (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:1223:17)<br />
at Object.Module.check (/usr/local/www/site/build/node_modules/requirejs/bin/r.js:1002:30)<br /> 
```

构建调用是：

```
var requirejs = require('requirejs');

var config = {
    baseUrl: './public/js',
    mainConfigFile: './public/js/config/config.js',
    paths: {
         'requireLib': 'library/require'
    },
    out: "./public/js/minified/main.js",
    name: "minified/main",
    wrap: false,
    preserveLicenseComments: false,
    deps: ["../js/local/main","modules/movie","modules/theatre"]
};

requirejs.optimize(config); 
```

配置文件是：

```
require.config({
    paths: {
        // JavaScript folders
        libs: "library",
        plugins: "plugin",
        adminlibs: "../adminassets/js/plugins/ui",

        // Libraries
        jquery: "library/jquery",
        jqcookie: "library/jquery.cookie",
        jqui: "../adminassets/js/plugins/ui/jquery-ui-1.10.0.custom.min",
        jqezmark: "library/jquery.ezmark",
        jqcolor: "library/jquery.color",
        underscore: "library/underscore-amdjs",
        backbone: "library/backbone-amdjs",
        chosen: "library/chosen.jquery",
        moment: "library/moment",

        // Plugins
        text: "plugin/text", 
        async: "plugin/async",
        datetimepicker: "../adminassets/js/plugins/ui/jquery.datetimepicker",
        ajaxfileupload: "../adminassets/js/plugins/uploader/jquery.ajaxfileupload"
    },

    shim: {
        'chosen': ['jquery'],
        'jqcookie': ['jquery'],
        'jqui': ['jquery'],
        'jqezmark': ['jquery'],
        'jqcolor': ['jquery'],
        'jquifull' : ['jquery'],
        'datetimepicker' : ['jqui'],
        'ajaxfileupload' : ['jquery'],
        'backbone': ['underscore','jquery']
    },

    // Initialize the application with the main application file
    deps: ["local/main"]
}); 
```

不太确定这里出了什么问题。整个设置一直在工作，直到我开始移动文件......但编译过程仍然找到它需要的所有文件......它只是遇到了上面列出的回调错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:56:08.007

事实证明，更新我的 requirejs、文本插件和 r.js 文件解决了这个问题。

# mysql - EC2/EBS 上的 MySQL。太慢了？

> ID：14839560
> 
> 赞同：5
> 
> 时间：2013-02-12T18:45:39.413
> 
> 标签：mysql, amazon-web-services, amazon-ec2

我在 AWS 上有一个 MySQL m2.2xlarge 实例。MySQL 数据目录位于根 EBS / 中。它是单个 EBS 而不是 RAID。我们有三个主要的表。其中一个`Table C`，最大的内容，仅用于最后几天的数据。这些表中的插入率约为每天 80.000 行。这 3 个表有大约 4200 万行。innodb_buffer_pool_size 有大约 30GB 的实例 RAM。

`Table A`最重要的是，它的数据长度为~33GB，索引~11GB `Table B`，数据长度为~8GB，索引~5GB

在我们的网站中，两个主要查询（延迟方面）是这样的：

```
SELECT * FROM TableA WHERE id in (.....)

SELECT * FROM TableB JOIN .... WHERE id in (.....) 
```

在大多数页面中，（...）将是大约 50 个最近的 id，这些查询每个花费的时间 < 50 毫秒。但是在其他一些页面中，我们遇到了较旧的 id，这些查询的延迟飙升至 500 毫秒、800 毫秒，最多 1.5 秒。

我做了一个测试，在 Mysql 重新启动后，我做了一个`SELECT id FROM TableB`强制索引到缓存/内存中。`Table B`查询仍然很慢。然后我做了一个`SELECT * FROM TableB`。现在有了缓存/内存中的整个表，查询变得非常快（<50ms）。

我的问题：> 500 毫秒，> 1000 毫秒对于仅通过 PRIMARY KEY 检索行的查询来说是合理的延迟？即使在 42M 的表中？即使所有行都在磁盘中？对我来说似乎太多了。

将 MySQL 数据移动到临时存储 (/mnt) 会改善这一点吗？使用预置 IOPS 会有所帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T19:01:34.467

免责声明：我根本不是 (My)SQL 性能方面的专家，只是评论您的用例的 AWS 方面。

有了这个，首先有几个问题需要解决：

> 将 MySQL 数据移动到临时存储 (/mnt) 会改善这一点吗？

我已经为相同的问题提供了答案[将数据从 EBS 移动到临时存储会提高 MySQL 查询性能吗？](https://stackoverflow.com/a/10120863/45773)，请查看一些重要细节 - TL;DR：如果您有任何持久性需求（除非您确切知道自己在做什么），并且通过声称的临时存储获得性能提升，您绝对不想这样做从今天的角度来看，即使不是完全错误的，过去也充其量是可疑的。

> 使用预置 IOPS 会有所帮助吗？

当然，[预置 IOPS 卷](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEBS.html#EBSVolumeTypes_piops)是专门*为满足 I/O 密集型工作负载的需求而设计的，尤其是数据库工作负载，这些工作负载对存储性能和随机访问 I/O 吞吐量的一致性很敏感*，请参阅文章[Fast Forward-Provisioned IOPS for EBS一般介绍卷](http://aws.typepad.com/aws/2012/08/fast-forward-provisioned-iops-ebs.html)。

*   [请注意，这些理想情况下（但不一定）与EBS-Optimized Instances](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html#EBSOptimized)齐头并进，后者使用*优化的配置堆栈并为 EBS I/O 提供额外的专用容量。此优化通过最大程度地减少 EBS I/O 与来自您的 Amazon EC2 实例的其他流量之间的争用，为您的 EBS 卷提供最佳性能。*

*   具体来说，您需要阅读专门的部分[提高 EBS 性能](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSPerformance.html)，其中介绍了如何*查看所需的 I/O 性能以及提高 EBS 性能以满足这些要求的选项*RAID 和/或*预置 IOPS*，具体取决于您的使用案子。

> 我的问题：> 500 毫秒，> 1000 毫秒对于仅通过 PRIMARY KEY 检索行的查询来说是合理的延迟？即使在 42M 的表中？即使所有行都在磁盘中？对我来说似乎太多了。

如前所述，我无法判断这些值，但是，鉴于您的规范，您似乎存在内存争用，就 m2.2xlarge 实例具有“仅”34.2 GiB 的内存而言，您已经分配了 ~30GB `innodb_buffer_pool_size`- 这似乎考虑到操作系统和/或 MySQL 的其他内存要求，对我来说有点高，所以可能已经涉及到交换，这将完美地解释您正在经历的缓存/内存变暖行为。

*   作为对数据库工作负载的一般建议，到目前为止，它似乎是迄今为止最大的收益，只需确保您的数据集完全适合 RAM，这比以往任何时候都更容易使用过多的实例类型（如果在第一次完全可行的话地方）。

[最后，我建议阅读有关在 AWS EC2 上提高 PostgreSQL 性能](http://blog.2ndquadrant.com/postgresql_performance_on_ec2/)的最新文章——那里的建议主要也针对 AWS 方面的问题，并且相应地也适用于 MySQL；*持久数据库*部分几乎总结了我上面的建议：

> 对于您关心数据的持久数据库，您想要的不是高 I/O 实例而是[EBS 优化实例](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/instance-types.html#EBSOptimized)，它保证了 EBS 存储服务器的网络带宽。使用具有[预置 IOP](http://docs.amazonwebservices.com/AmazonRDS/latest/UserGuide/Scenarios.PIOPS.html)的 EBS 卷，并为获得最佳结果，将一组 EBS 卷条带化到 RAID10 阵列中。请参阅[提高 EBS 性能](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/EBSPerformance.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T21:12:21.707

如果您的 IN 语句包含 SQL 子查询，则 EC2 实例可能会非常慢，因为默认情况下它使用 MySQL 5.5（有关详细信息，请查看[MySQL 在 EC2 上非常慢](https://stackoverflow.com/questions/17255238/mysql-is-extremely-slow-on-ec2/17255263)）

# guice - 将命名注释与 Guice 提供程序一起使用

> ID：14839561
> 
> 赞同：6
> 
> 时间：2013-02-12T18:45:50.170
> 
> 标签：guice

我的应用程序中有两个类型绑定的命名实例：

```
bind(Foo.class).toProvider(FooProvider.class);
bind(Foo.class).annotatedWith(Names.named("prime")).toProvider(FooPrimeProvider.class); 
```

我有一个班级想使用每个班级的一个实例。由于技术原因，此类不能直接注入实例，它必须向实例注入提供程序：

```
class Bar {
    @Inject static Provider<Foo> fooProvider;
    @Inject @Named("prime") static Provider<Foo> fooPrimeProvider; // WRONG!
} 
```

问题是上面的 FooPrime 注入没有注入一个名为“prime”的实例，而是注入了一个名为“prime”的*Provider*，这当然不是我想要的。

如何告诉 Guice 为名为“prime”的 Foo 实例注入提供程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T11:05:30.343

我刚刚写了一个测试，它完全符合您的要求：[https ://gist.github.com/jangalinski/4943871](https://gist.github.com/jangalinski/4943871)

# mysql - 如何从具有唯一 ID 的行中获取 ID？

> ID：14839563
> 
> 赞同：1
> 
> 时间：2013-02-12T18:45:57.423
> 
> 标签：mysql, entity-attribute-value

我有一张这样的桌子：

```
id | customer_id | code
-----------------------
1  |  1          | A
2  |  1          | B
3  |  2          | A
4  |  2          | D
5  |  3          | B
6  |  3          | C
6  |  3          | D 
```

我需要一个 SQL 查询，它返回代码等于 A 和 B 的所有客户 ID。在上面的数据中，这只会是 customer_id 1。

如果代码是各自的列，这将是一个简单的查询：`SELECT DISTINCT customer_id FROM tablename WHERE code = A AND code = B`. 但是，我似乎无法在多行上制作它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:47:48.327

您可以使用`GROUP BY customer_id`with`HAVING`子句：

```
select customer_id
from yourtable
where code in ('A', 'B')
group by customer_id
having count(distinct code) = 2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/10ff1/1)

如果要从表中返回更多数据，则可以将查询扩展为：

```
select *
from yourtable t1
where exists (select customer_id
              from yourtable t2
              where code in ('A', 'B')
                and t1.customer_id = t2.customer_id
              group by customer_id
              having count(distinct code) = 2) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/10ff1/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:48:39.397

```
select customer_id
from tablename
where code in ('A', 'B')
group by customer_id
having count(*) > 1 
```

# java - 无法获取 Eclipse Helios 的 ADT 插件：冲突的依赖项

> ID：14839565
> 
> 赞同：0
> 
> 时间：2013-02-12T18:46:04.530
> 
> 标签：java, android, eclipse-plugin, adt

我有 Eclipse Helios 3.6，它适用于我的基于 Java 的网络应用程序。但现在我想为我完成下载 Android SDK 并即将在 Eclipse 中从该站点安装 ADT for Windows 7 -> [https://dl-ssl.google.com/android/eclipse](https://dl-ssl.google.com/android/eclipse)但它没有奏效。

将上述地址放入在 Eclipse 下安装新软件后，它会显示开发人员工具和 NDK 插件，然后单击 NEXT 会显示：

```
Android DDMS    21.0.1.v201212060256-543035
Android Development Tools   21.0.1.v201212060256-543035
Android Hierarchy Viewer    21.0.1.v201212060256-543035
Android Native Development Tools    21.0.1.v201212060256-543035
Android Traceview   21.0.1.v201212060256-543035
Tracer for OpenGL ES    21.0.1.v201212060256-543035 
```

全部选中但出现错误：“由于依赖项冲突，无法完成安装。正在安装的软件：Android Hierarchy Viewer 21.0.1.v201212060256-543035”因此无法继续。

我尝试了所有可能的解决方案，例如尝试更新 Eclipse，但这也开始显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:11:09.300

我建议你在[这里](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)使用最新版本的 eclipse和最新版本的 SDK 和 ADT

# c# - 表内表上的 css

> ID：14839566
> 
> 赞同：0
> 
> 时间：2013-02-12T18:46:05.610
> 
> 标签：c#, .net, css

我生成了一个 Gridview，并且在每个单元的两个单元格中，还有另外两个 Gridview。这呈现为一个表格，每行在两个单元格中都有一个表格。

我设置了每个 Gridview 的 CssClass，但是无论我做什么，调用中的表似乎至少继承了一些应用于包含表的 css 属性。

有没有一种万无一失的说法“忽略该表周围的表的所有属性”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:48:27.140

您可以使用更具体的 CSS 选择器...例如：

```
<table class="outerTable">
    <tbody>
        <tr>
            <td>This will be white text</td>
            <td>

                <table class="innerTable">
                    <tbody>
                        <tr>
                            <td>This will be black text</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table

.outerTable > tbody > tr > td {
   color: #fff;
}

.innerTable > tbody > tr > td {
   color: #000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:50:52.443

BLSully 是对的，唯一的好方法是覆盖其继承的属性。要覆盖属性，您需要让覆盖代码比其他选择器更具体。有关特异性的精彩文章，请阅读以下内容：

[http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

# java - Java CXF WS 客户端 - gZip HTTP REQUEST HEADER 被忽略

> ID：14839568
> 
> 赞同：1
> 
> 时间：2013-02-12T18:46:19.203
> 
> 标签：java, http-headers, cxf

我正在尝试在我的 Java CXF WS 客户端内的 HTTP 请求标头中设置/请求 gZip，但由于某种原因它被忽略了。我没有得到 gZipped 响应。这是我尝试设置的方式。我正在使用 Apache CXF 2.3.2。我错过了什么？

```
public class LoggerXML implements SOAPHandler<SOAPMessageContext> {
    private String uniqueIdentifier;
    private String sessionId;

    public LoggerXML(String sessionId, String uniqueIdentifier) {
        this.sessionId = sessionId;
        this.uniqueIdentifier = uniqueIdentifier;
    }

    protected final void setLogStream(PrintStream ps) {
      //  out = ps;
    }

    public void init(Map c) {
        uniqueIdentifier = "";
    }

    public Set<QName> getHeaders() {
        return null;
    }

    public boolean handleMessage(SOAPMessageContext smc) {

        Boolean outboundProperty = (Boolean)
        smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if(outboundProperty){
            // Creating HTTP headers & setting gZip.
            Map<String, List<String>> headers = (Map<String, 
                                        List<String>>) smc.get(MessageContext.HTTP_REQUEST_HEADERS);
            if(headers == null){
                //System.out.println("LoggerXML.handleMessage: headers = null");
                headers = new HashMap<String, List<String>>();  
            }
            // Add HTTP headers to the web service request
            headers.put("Accept-Encoding", Collections.singletonList("gzip,deflate"));
            //headers.put("Content-Encoding", Collections.singletonList("gzip"));
            //headers.put("Accept-Encoding", Collections.singletonList("gzip"));

            smc.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
            //smc.put("org.apache.cxf.transport.common.gzip.GZIPOutInterceptor.UseGzip","YES");

        }

        return true;
    }

    public boolean handleFault(SOAPMessageContext smc) {
        return true;
    }

    // nothing to clean up
    public void close(MessageContext messageContext) {
    }

    // nothing to clean up
    public void destroy() {
    }

// Other Methods....

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:31:22.497

这段代码对我有用

```
 // Get the underlying Client object from the proxy object of service interface
Client proxy = ClientProxy.getClient(stub);

   // Creating HTTP headers
Map<String, List<String>> headers = new HashMap<String, List<String>>();
headers.put("Accept-Encoding", Arrays.asList("gzip"));

    // Add HTTP headers to the web service request
proxy.getRequestContext().put(Message.PROTOCOL_HEADERS, headers); 
```

参考：[http ://singztechmusings.wordpress.com/2011/09/17/apache-cxf-how-to-add-custom-http-headers-to-a-web-service-request/](http://singztechmusings.wordpress.com/2011/09/17/apache-cxf-how-to-add-custom-http-headers-to-a-web-service-request/)

# ios - 块递归和中断保留循环

> ID：14839571
> 
> 赞同：17
> 
> 时间：2013-02-12T18:46:25.203
> 
> 标签：ios, objective-c, automatic-ref-counting, objective-c-blocks

为了更好地说明这个问题，请考虑以下块递归的简化形式：

```
__block void (^next)(int) = ^(int index) {
    if (index == 3) {
        return;
    }
    int i = index;
    next(++i);
};
next(0); 
```

XCode（启用 ARC）警告“*在此块中强烈捕获 'next' 可能会导致保留周期*”。

同意。

**问题 1**：是否可以通过将块本身设置为 来成功打破保留周期`nil`，以这种方式：

```
__block void (^next)(int) = ^(int index) {
    if (index == 3) {
        next = nil; // break the retain cycle
        return;
    }
    int i = index;
    next(++i);
};
next(0); 
```

（注意：您仍然会收到相同的警告，但也许这是没有根据的）

**问题 2**：块递归的更好实现是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-30T16:35:37.887

要完成无保留循环的递归块执行，您需要使用两个块引用 - 一个弱引用和一个强引用。因此，对于您的情况，代码可能如下所示：

```
__block __weak void (^weak_next)(int);
void (^next)(int);
weak_next = next = ^(int index) {
  if (index == 3) {
    return;
  }
  int i = index;
  weak_next(++i);
};
next(0); 
```

请注意，块捕获弱块引用（weak_next），外部上下文捕获强引用（next）以保持块周围。两个引用都指向同一个块。

有关此模式的另一个示例，请参见[https://stackoverflow.com/a/19905407/1956124](https://stackoverflow.com/a/19905407/1956124)，该示例也使用块递归。此外，以下文章评论部分的讨论也与此相关：http: [//ddeville.me/2011/10/recursive-blocks-objc/](http://ddeville.me/2011/10/recursive-blocks-objc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:58:33.427

我认为@newacct 关于@Matt Wilding 的解决方案是正确的；在这种情况下，似乎没有什么对下一个块有强引用，并且在运行时会导致运行时异常（至少对我来说是这样）。

我不知道在 objc 中在野外找到递归调用的块有多普遍。然而，在现实世界的实现（如果实际需要）中，比如说视图控制器，可能会定义块，然后设置一个内部接口属性，并对该块具有强引用：

```
typedef void(^PushButtonBlock)();

@interface ViewController ()
@property (strong, nonatomic) PushButtonBlock pushButton;
@end

@implementation ViewController
  ... 
  // (in viewDidLoad or some such)
  __weak ViewController *weakSelf = self;

  self.pushButton = ^() {
    [weakSelf.button pushIt];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), weakSelf.pushButton);
  };

  self.pushButton();
  ...
@end 
```

这对我来说运行良好，并且没有关于保留周期的编译器警告（并且仪器中没有泄漏）。但是，我认为在 objc 的大多数情况下，我可能会避免这样做（递归块调用）——它很臭。但无论如何都很有趣。

# android - 不断检查无线网络变化

> ID：14839576
> 
> 赞同：1
> 
> 时间：2013-02-12T18:46:38.507
> 
> 标签：android, android-wifi

我想经常检查手机是否连接到特定的无线网络。我当然想到了一个服务和网络的SSID，但是怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T18:53:19.163

**你会想要**

```
<intent-filter>
<action android:name="android.net.wifi.WIFI_STATE_CHANGED"/>
<action android:name="android.net.wifi.STATE_CHANGE"/>
</intent-filter> 
```

**在您的接收者标签中。**

**或者，如果您想对其进行更多控制，请在注册 BroadcastReceiver 之前设置这些：**

```
final IntentFilter filters = new IntentFilter();
filters.addAction("android.net.wifi.WIFI_STATE_CHANGED");
filters.addAction("android.net.wifi.STATE_CHANGE");
super.registerReceiver(yourReceiver, filters); 
```

**WIFI_STATE_CHANGED**

广播意图操作，指示 Wi-Fi 已启用、禁用、启用、禁用或未知。一个额外的提供这种状态作为一个 int。如果可用，另一个额外提供先前的状态。

**STATE_CHANGE**

广播指示 Wi-Fi 连接状态已更改的意图操作。一个额外的以 NetworkInfo 对象的形式提供了新的状态。如果新状态为 CONNECTED，则额外的附加信息可能会提供接入点的 BSSID 和 WifiInfo。作为字符串

此外，您需要指定正确的权限：

```
<user-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<user-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

**完整源代码：** [下载](https://www.box.com/s/6y560jai8gyxj2lf830o)

**AndroidManifest.xml**

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.temp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name="com.example.temp.MyWiFiStateListener">
        <intent-filter >
            <action android:name="android.net.wifi.STATE_CHANGE"/>
        </intent-filter>
    </receiver>
</application> 
```

**MainActivity.java**

```
package com.example.temp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**广播接收器：**

```
package com.example.temp;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.util.Log;

public class MyWiFiStateListener extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String action = intent.getAction();
        Log.d("TEMP", action);
        if(action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)){
            NetworkInfo info = intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
            if(info.getType() == ConnectivityManager.TYPE_WIFI){
                WifiManager myWifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
                WifiInfo wifiInfo = myWifiManager.getConnectionInfo();
                Log.d("TEMP","BSSID :: " +  wifiInfo.getBSSID() + "SSID :: " + wifiInfo.getSSID());
            }
        }
    }

} 
```

# c++ - 我可以为许多元素添加事件处理程序吗？

> ID：14839578
> 
> 赞同：0
> 
> 时间：2013-02-12T18:46:51.213
> 
> 标签：c++, event-handling, c++builder

我可以为许多元素添加事件处理程序吗？

我有一个函数和许多“编辑”，我想将此函数作为事件处理程序添加到一些“编辑”。

(Borland C++ Builder 6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:08:01.450

是的，您可以根据需要使用与事件处理程序相同的方法来处理任意数量的事件。

# c# - 带有 int 和 String 的 LINQ to SQL C# 函数

> ID：14839580
> 
> 赞同：2
> 
> 时间：2013-02-12T18:46:51.743
> 
> 标签：c#, linq-to-sql

我有一个绑定到表的[LINQ to SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL_.28formerly_called_DLINQ.29)查询函数，但该函数在“return res.ToList();”上给出错误。

*   imo_no 是 int
*   position_cordinates 是字符串
*   船只 ID 是 int
*   设备是字符串。

我的功能：

```
List<T> GetAllInitialize()
{
    PositionDataClassesDataContext context = new PositionDataClassesDataContext();

    var res = from positions in context.it_positions
              join vessels in context.it_vessels on positions.imo_no equals vessels.imo_no
              select new { positions.imo_no, positions.position_cordinates, vessels.vessel_id, vessels.equipment };

    return res.ToList();
} 
```

![在此处输入图像描述](../Images/79b210745a6676c8a416d7ceb4c6c590.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:51:54.790

尽管您可以通过静态类型在本地使用匿名类型或匿名类型对象的集合，但无法在不丢失有关其静态类型的信息的情况下从函数中返回它们。

如果您不能或出于某种原因不想创建命名类来保存返回数据，则需要 return`List<dynamic>`或`List<object>`. 这两种方法都有其缺点：`dynamic`将比可比较的静态类型对象慢，同时`System.Object`不会让您对返回的数据做太多事情。

最好的解决方案是创建一个命名的返回类型：

```
public class PositionData {
     public int ImoNo {get;set;}
     public string PositionCordinates {get;set;}
     public int VesselId {get;set;}
     public string Equipment  {get;set;}
} 
```

现在您的查询将如下所示：

```
select new PositionData {
    ImoNo = positions.imo_no
,   PositionCordinates = positions.position_cordinates
,   VesselId = vessels.vessel_id
,   Equipment = vessels.equipment
}; 
```

您的方法的返回类型将更改为`List<PositionData>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:51:57.123

1.  创建一个包含四个属性的新类，这些属性代表您的匿名对象所具有的那些字段。

2.  更改`select`方法以创建此新自定义类型的实例，而不是使用匿名类型。

3.  将方法的返回类型从返回更改为`List<T>`返回该自定义类型的列表。

匿名对象并非设计用于在创建它们的范围之外使用。因为您打算在多个范围内使用此类型，您应该创建一个新的命名类型来表示此数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:52:13.807

您不能在具有泛型类型参数的方法签名中返回匿名类型。

你可以：

1.  有你的返回签名`List<object>`，在这种情况下你不能访问任何字段，因此你需要反射来访问你的字段值。
2.  返回`List<dynamic>`并丢失对字段引用的编译类型类型检查，但是它们将是“可访问的”。
3.  声明一个由查询填充的中间具体类型，并在方法签名中指定为返回类型。

在我看来，第三种选择确实是唯一可行的选择。

# java - 来自 FileOutputStream.close() 的设备不合适的 ioctl

> ID：14839581
> 
> 赞同：3
> 
> 时间：2013-02-12T18:46:53.070
> 
> 标签：java, linux, java-io

我有一些代码可以使用`FileOutputStream`. 这是我写了一千遍的标准代码：

```
FileOutputStream out = new FileOutputStream(file);
try {
    BufferedOutputStream bos = new BufferedOutputStream(out);
    try {
        store(bos, comments);
    } finally {
        bos.close();
    }
} finally {
    out.close();
} 
```

`close()`我们的一位用户在通话期间在 Linux 上报告了以下错误。

```
java.io.IOException: Inappropriate ioctl for device
   at java.io.FileOutputStream.close0(Native Method)
   at java.io.FileOutputStream.close(FileOutputStream.java:341)
   at java.io.FilterOutputStream.close(FilterOutputStream.java:160) 
```

有谁知道这是否仅在使用错误的 -d32 或 -d64 参数错误地启动 JVM 时发生（如在[这个问题](https://stackoverflow.com/questions/7737141/failed-to-start-glassfish-after-increasing-heap-size)中），还是可能发生其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:31:49.673

我很确定您对 32/64 位模式的想法是正确的。几年前我们在嵌入式设备上遇到过这个问题，错误源于我们用来与 pci 开关通信的库，并且该库不支持 64 位 ioctls。

如果您真的想深入了解它，我的建议是我已经使用这种技术来调试 jni 代码。在 java 应用程序中设置断点，然后使用 gdb 附加到进程。然后，您可以在 gdb 中设置断点以监视设备上的 ioctl。查看正在向设备发送哪个请求，并验证它是否正确支持该架构。

如果文件输出流是从文件系统文件而不是其他类型的设备文件中读取的。那么这可能是 selinux 或某种虚拟化（如 chroot 环境）的问题，如下面的链接所示。

此链接可能指向正确的方向。这是 chroot 的问题
[http://us.generation-nt.com/answer/sndctl-tmr-timebase-tcgets-help-170073041.html](http://us.generation-nt.com/answer/sndctl-tmr-timebase-tcgets-help-170073041.html)

还要检查他们正在运行的 jre，是 openjdk 还是 sun java？我对旧的 gcc jdk java 有一些非常奇怪的怪癖，这可以解释一些差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:10:44.727

Java 的方法是对操作系统[本机 close()](http://www.linuxmanpages.com/man2/close.2.php)`close()`的薄包装；它将本机错误代码转换为异常。

链接到的文档对于可能导致关闭失败的原因相对模棱两可，并指出写入期间的错误可能会由关闭报告，并且“这尤其可以通过 NFS 观察到......”。

因此，为了调试，我首先要查看文件的名称，以及为这个特定用户存储文件的位置。对于“不适当的 ioctl”，我不会过多强调与非 close() 相关的命中。

# c++ - C++ TR1 正则表达式不可用

> ID：14839583
> 
> 赞同：3
> 
> 时间：2013-02-12T18:46:57.407
> 
> 标签：c++, regex, namespaces, g++, tr1

我正在尝试将“TR1”正则表达式扩展用于某些 C++ 字符串解析。我读过`<regex>`标题和命名空间 std::tr1 是必需的

我可以在存在标头的情况下进行编译`<regex>`（尽管它迫使我使用标志 `-std=c++0x`或`-std=gnu++0x`）

但是，当我尝试`std::tr1`在我的程序中使用命名空间时，编译失败并显示 tr1“不是命名空间名称”的消息。我不能做类似的事情，

`std::tr1::regex rx("mypattern");`

我读过自 gcc 4.3.0 以来就支持 TR1 正则表达式。我通过 gcc 4.4.5 使用 g++。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T18:52:30.517

**[g++ 4.7 还没有实现正则表达式。](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)**

但尽管如此，在 C++11`regex`中已从命名空间`std::tr1`移至`std`. 所以，`std::tr1::regex`你应该写`std::regex`：

```
std::regex rx("mypattern"); 
```

我不知道这也适用于 4.7 之前的哪些 g++ 版本。但是[这个 ideone 示例](http://ideone.com/1yWpbh)在 g++ 4.7 中编译得很好。但是，请记住，此编译器版本中未实现正则表达式实现。

# eclipse - 是否有任何未弃用的 Eclipse PDE 插件模板？

> ID：14839584
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:46:57.377
> 
> 标签：eclipse, templates, eclipse-plugin, deprecated, eclipse-pde

我正在学习如何为 Eclipse 开发插件，并且正在尝试将菜单项添加到上下文菜单中。这听起来很简单，在“新建插件项目”向导中，提供了几个模板，其中一个在上下文菜单中创建了一个新项目。

问题是 Eclpse 自己的模板包含不推荐使用的代码。如果即使提供的模板使用不推荐使用的结构，我如何学习如何开发正确的代码？有没有使用现代结构的模板，`MenuContributions`而不是像`ActionSet`and这样的不推荐使用的结构`PopupMenus`？

作为记录，我使用的是最新版本的 Eclipse SDK，Indigo 4.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:40:49.967

命令/菜单 API 没有模板。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=194669](https://bugs.eclipse.org/bugs/show_bug.cgi?id=194669)

关于命令的一个很好的教程是：

[http://www.vogella.com/articles/EclipseCommands/article.html](http://www.vogella.com/articles/EclipseCommands/article.html)

# knockout.js - 淘汰赛验证：使用 validatedObservables 集合时的意外行为

> ID：14839589
> 
> 赞同：0
> 
> 时间：2013-02-12T18:47:13.940
> 
> 标签：knockout.js, knockout-validation

在尝试验证由对象集合组成的视图模型时，我看到了意外行为`validatedObservable`；实际上，嵌套集合。

首先，让我指出我的演示行为的 JSFiddle：http: [//jsfiddle.net/cbono/ZTXB9/8/](http://jsfiddle.net/cbono/ZTXB9/8/)

我的视图模型是一个`App`对象。它包含单个属性**Services**，它是`Service`对象的集合。每个 Service 都包含一个**Retailers**属性，您猜对了，它是`Retailer`对象的集合。每个对象都被实例化为validatedObservable，以便我可以调用`isValid`顶级对象并查找子对象中的任何/所有错误。

当我初始化库时，我使用：

```
ko.validation.init({
    grouping: {
        deep: true,
        observable: true
    }
}); 
```

我唯一有效的验证规则是针对零售商对象。如果选择了零售商并且零售商的名称是“Other” ( `(IsSelected() && IsOther()) === true`)，则需要**OtherDesc**属性。就是这样。否则，零售商有效。

当我测试规则时（选中“其他”复选框之一并将随附的描述字段留空），验证按预期失败。但是，视图模型的`errors`集合包含以下内容：

```
 [undefined, undefined, "This field is required"] 
```

`self.errors.showAllMessages()`此外，当被调用时，我在 JS 控制台上收到此错误：

```
 Uncaught TypeError: Object function d(){if(0<arguments.length)
      {if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))d.H(),c=arguments[0],d.G();return this}b.r.Wa(d);return c} 
         has no method 'isModified' 
```

我很确定这两个问题是相关的，但我无法拼凑出幕后发生的事情。似乎当验证库遍历对象图时，它获取了不正确类型的对象（因此没有方法），因此在错误集合中`IsModified`放置了一堆*undefined 。*

我没有按预期使用图书馆吗？我正在努力让它发挥作用，因为我真的很喜欢模型验证的想法。在 jquery.validate 之类的东西中重新创建这个验证会复杂得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:26:20.283

看起来validatedObservable 不能嵌套。仅将 App 保留为 validateObservable 即可解决问题。

```
self.Services = ko.observableArray(
ko.utils.arrayMap(data, function (svc) {
    return new Service(svc); // unwrap
}));

//....

self.Retailers = ko.observableArray(
ko.utils.arrayMap(data.retailers, function (rtl) {
    return new Retailer(rtl); // unwrap
})); 
```

[http://jsfiddle.net/ostgals/ZTXB9/16/](http://jsfiddle.net/ostgals/ZTXB9/16/)

# jakarta-ee - 仅使用 maven 在 CI 服务器上运行集成测试

> ID：14839592
> 
> 赞同：3
> 
> 时间：2013-02-12T18:47:23.273
> 
> 标签：jakarta-ee, maven, continuous-integration

每次构建都运行单元测试但完全跳过集成测试阶段是否明智 - 将其留给 CI 服务器？

目前我正在开发一个 JavaEE 项目，该项目几乎只包含一些集成测试，这些测试写得不好并且需要很多时间。每次我进行任何更改时，我都必须等待几分钟才能构建（大约 90% 的时间是这些集成测试）。

我的想法是配置一些 CI 服务器，例如 Jenkins，以便它可以获取对存储库的任何提交（或者在 maven 构建之后更好）并运行带有集成测试的 maven 构建。但是是否可以配置 maven，当我输入`mvn install`它时，它会编译-运行单元测试-构建项目，但完全省略集成阶段（以加快开发速度）。然后 CI 会重新开始并开始运行构建，但这一次集成测试到位了吗？

这样，更改一些代码和部署之间的时间会更短，也不会那么令人沮丧，并且任何与集成相关的错误都将在 CI 服务器完成构建后的几分钟内被缓存起来。

这是一个好主意吗？谁能建议如何配置 Maven 来获得这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:10:48.603

您应该能够使用配置文件执行此操作。尽管我可能需要有关您的集成测试配置的更多信息。多年来，我一直在使用 maven-failsafe-plugin 和配置文件的组合来处理项目。这是来自 pom 的示例片段：

```
<profiles>
    <profile>
        <id>integration-tests</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>integration-test</id>
                            <goals>
                                <goal>integration-test</goal>
                            </goals>
                            <configuration>
                                ...
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

在正常的本地开发过程中，运行`mvn install`不应运行通过 maven-failsafe-plugin 运行的集成测试。然后，您可以将 CI 服务器配置为运行`mvn clean install -Pintegration-tests`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:57:10.900

首先，我认为这是一个好主意。这将使您的开发周期更快。

我不知道在执行 mvn install 时完全省略集成测试阶段的方法。您可以在开发过程中执行“mvn clean package”吗？如果这不是一个选项，您使用什么插件进行集成测试？大多数插件都有一个属性“skip”，您可以使用它来跳过插件的执行。您可能希望使用配置文件来为不同的场景打开和关闭“跳过”。

# javascript - 检测“未定义”在哪里被覆盖的可能方法？

> ID：14839595
> 
> 赞同：3
> 
> 时间：2013-02-12T18:47:26.097
> 
> 标签：javascript, debugging, undefined

我目前在 IE7 中有一个错误，未定义被覆盖会导致网站崩溃。它在 Firefox、Chrome 和 IE8+ 上运行良好（我猜是因为这些浏览器不允许覆盖 undefined）。

我试图找到它在哪里完成，以便能够保护我的代码。不幸的是，它不在我自己的代码上。我尝试在萤火虫中寻找“未定义=”、“未定义=”和“['未定义']”，希望我能找到哪个依赖项正在改变覆盖它，但未成功。

我现在卡住了，我真的不知道还能尝试什么。有谁知道我可以做些什么来找到对此负责的代码行？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T18:49:16.767

`undefined`无论如何，您永远都不应该像使用它一样使用它。测试未定义的正确方法是`typeof somevar == "undefined"`

# windows-phone-7 - XNA 支持 Windows 7 上的手势

> ID：14839601
> 
> 赞同：1
> 
> 时间：2013-02-12T18:47:48.653
> 
> 标签：windows-phone-7, windows-7, xna, multi-touch, gestures

我的一个朋友正在开发 Windows phone 7 游戏，而 XNA 允许您支持手势，现在他想使用相同的代码，因此 PC 将支持该游戏（Windows 7）我想知道我如何支持 PC 上的手势使用触摸屏显示器，我一直在网上寻找，但显然这并不常见。

到目前为止，我唯一的参考是在 C++ 上重新创建 Touch 类，这不是时间和预算的选择

也许我遗漏了一些明显的东西，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T16:04:21.443

我所知道的是触摸屏显示器需要像鼠标一样处理，所以你的朋友需要改变他`gestures`的所有`MouseState`并检测左键点击。
您只需要替换`TouchLocations`为指针的位置。

# php - 正弦公式 php / mysql

> ID：14839604
> 
> 赞同：1
> 
> 时间：2013-02-12T18:48:13.900
> 
> 标签：php, mysql, distance, haversine

我正在尝试使用半径搜索获得一个通用的地理点数据库。我找到了几个关于这个主题的好教程，但最后我失败了。

主要教程在这里：http: [//janmatuschek.de/LatitudeLongitudeBoundingCoordinates](http://janmatuschek.de/LatitudeLongitudeBoundingCoordinates)。

SQL查询形式的基本公式是

```
SELECT * FROM Places 
WHERE (Lat => 1.2393 AND Lat <= 1.5532) AND (Lon >= -1.8184 AND Lon <= 0.4221)
AND acos(sin(1.3963) * sin(Lat) + cos(1.3963) * cos(Lat) * cos(Lon - (-0.6981)))
    <= 0.1570; 
```

我已经在一个简单的 PHP 测试页面中实现了这一点，如下所示：

```
$R = 6371; // radius of Earth in KM

$lat = '46.98025235521883'; // lat of center point
$lon = '-110.390625'; // longitude of center point
$distance = 1000; // radius in KM of the circle drawn 
$rad = $distance / $R; // angular radius for query 
$query = '';

// rough cut to exclude results that aren't close
$max_lat = $lat + rad2deg($rad/$R);
$min_lat = $lat - rad2deg($rad/$R);
$max_lon = $lon + rad2deg($rad/$R/cos(deg2rad($lat)));
$min_lon = $lon - rad2deg($rad/$R/cos(deg2rad($lat)));
// this part works just fine!
$query .= '(latitude > ' . $min_lat . ' AND latitude < ' . $max_lat . ')';
$query .= ' AND (longitude > ' . $min_lon . ' AND longitude < ' . $max_lon . ')';
// refining query -- this part returns no results
$query .= ' AND acos(sin('.$lat.') * sin(latitude) + cos('.$lat.') * cos(latitude) *
    cos(longitude - ('.$lon.'))) <= '.$rad; 
```

我在这里错过了什么吗？我认为我完全遵循该方法，但我无法获得“微调”查询来返回任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:00:57.373

不确定，但是：

```
$R = 6371; // radius of Earth in KM

$lat = '46.98025235521883'; // lat of center point
$lon = '-110.390625'; // longitude of center point
$distance = 1000; // radius in KM of the circle drawn 
$rad = $distance / $R; // angular radius for query 
$query = '';

// rough cut to exclude results that aren't close
$radR = rad2deg($rad/$R);
$max_lat = $lat + radR;
$min_lat = $lat - radR;
$radR = rad2deg($rad/$R/cos(deg2rad($lat)));
$max_lon = $lon + radR;
$min_lon = $lon - radR;
// this part works just fine!
$query .= '(latitude > ' . $min_lat . ' AND latitude < ' . $max_lat . ')';
$query .= ' AND (longitude > ' . $min_lon . ' AND longitude < ' . $max_lon . ')';
// refining query -- this part returns no results
$query .= ' AND acos(sin('.deg2rad($lat).') * sin(radians(latitude)) + cos('.deg2rad($lat).') * cos(radians(latitude)) *
    cos(radians(longitude) - ('.deg2rad($lon).'))) <= '.$rad; 
```

# woocommerce - 在woocommerce单品页面顶部包含当前产品类别名称？

> ID：14839612
> 
> 赞同：0
> 
> 时间：2013-02-12T18:48:53.193
> 
> 标签：woocommerce

只是想问这里是否有人可以告诉我如何在 Woocommerce 的单个产品页面顶部包含当前产品类别名称。

我想将它放在产品页面顶部的面包屑路径上方。我已经包含了一个链接到我在这里寻找的一个例子：http: [//www.espguitars.com/guitars/signature/kirk.html](http://www.espguitars.com/guitars/signature/kirk.html) -

请注意，在页面的右上角，您将看到当前类别名称，在本例中，类别名称为 Guitars。我意识到我给出的网站示例不是 wordpress 网站，但我确信有一种方法可以使用 woocommerce 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:38:44.280

如果您检查 WooCommerce 插件的“templates/single-product”文件夹中的 meta.php 文件，您将看到 WooCommerce 插件如何将当前产品的产品类别显示为产品元信息。

```
<?php
...
global $post, $product;
?>
<div class="product_meta">
...
<?php echo $product->get_categories( ', ', '<span class="posted_in">' . _n( 'Category:', 'Categories:', sizeof( get_the_terms( $post->ID, 'product_cat' ) ), 'woocommerce' ) . ' ', '.</span>' ); ?>
...
</div> 
```

请将代码复制到您的主题并进行相应修改。

# tabs - Tab 行为适用于 IE < 9、Safari 和 Chrome，但不适用于 FF 和 IE9

> ID：14839614
> 
> 赞同：0
> 
> 时间：2013-02-12T18:49:13.437
> 
> 标签：tabs, mootools, contao

我想知道是否有人可以在这里给我一个线索。此页面上有一些选项卡切换内容[http://www.brt.org.uk/donate](http://www.brt.org.uk/donate)

我相信它适用于 Safari、Chrome 和 IE 直到版本 8，但不适用于 Firefox 和 IE 9。这对我来说是个谜，因为它曾经在所有浏览器中都能很好地工作。

我会很感激任何想法。

有这个脚本可以做到这一点，它使用了 Mootools [http://www.brt.org.uk/plugins/tabcontrol/tabcontrol.js](http://www.brt.org.uk/plugins/tabcontrol/tabcontrol.js)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:39:22.317

您正在使用 mootools 1.2.1 - 3 岁以上。有两个问题会影响它。

1.  引入的 firefox 18.0.1`String.prototype.contains`在实现上与 mootools 附带的版本不同。在 1.3 版之前，该方法未被“保护”并被 mootools 重写，因此更改会破坏选择器引擎。

2.  由于与实现有关的更改，1.2.1 可能与 IE9 不兼容`bind`。这在 1.2.4（或 5）中已修复，它还与旧 mootools 中使用的某些浏览器嗅探方法有关。请参阅 1.2.5 的发行说明 - [http://mootools.net/blog/2010/09/15/mootools-core-1-2-5/](http://mootools.net/blog/2010/09/15/mootools-core-1-2-5/) - 这些可能不会影响每个站点/用例，但是当它们这样做时，您需要升级。

总的来说，您需要升级 - 我建议 1.4.5 与 mootools 网站的兼容性。

这个选项卡类写错了：

```
TabControl = new Class();
// ..
TabControl.prototype = {
    // stuff
} 
```

这完全绕过了 mootools 类构造函数，该函数在设置原型以继承和取消引用构造函数对象方面做了很多工作。

改写为

```
var tabControl = new Class({
    // 'methods' and properties... 
}); 
```

# python - 在 Flask 中处理多个域

> ID：14839618
> 
> 赞同：17
> 
> 时间：2013-02-12T18:49:22.897
> 
> 标签：python, routing, flask

我想在 Flask 中实现结构，它可以处理多个域。因此，当我在浏览器中输入“ [http://domain1.com/show/1](http://domain1.com/show/1) ”时，它实际上会执行类似路由的功能

```
@app.route('<string:domain>/show/<int:id>')
def show(domain = '', id = ''):
    return 'Domain is ' + domain + ', ID is ' + str(id) 
```

非常重要的是，客户端浏览器中的 URL 应该仍然是“ [http://domain1.com/show/1](http://domain1.com/show/1) ”。据我所知，`redirect`在 Flask 中使用时，它会更改 url。我应该如何组织这样的结构？谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-12T18:54:11.480

该`request`对象已经有一个[`url_root`](http://flask.pocoo.org/docs/api/#flask.Request.url_root)参数。或者您可以使用`Host`标题：

```
print request.url_root  # prints "http://domain1.com/"
print request.headers['Host']  # prints "domain1.com" 
```

如果您需要在应用程序内进行重定向，`url_root`请查看该属性，因为它将包括 WSGI 应用程序的完整路径，即使根植于更深的路径（例如，从 开始`http://domain1.com/path/to/flaskapp`）。

最好还是[`request.url_for()`](http://flask.pocoo.org/docs/api/#flask.url_for)让 Flask 为你生成一个 URL；它会考虑`url_root`到。请参阅[URL 构建](http://flask.pocoo.org/docs/quickstart/#url-building)文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-31T23:53:26.110

以下是导入后的代码：

```
import flask

print flask.request.url_root  # prints "http://domain1.com/"
print flask.request.headers['Host']  # prints "domain1.com" 
```

# delphi - Delphi COM 服务器初始化

> ID：14839620
> 
> 赞同：1
> 
> 时间：2013-02-12T18:49:29.223
> 
> 标签：delphi, com, automation

我们有一个 Delphi 应用程序，它也是一个 COM 服务器，该应用程序有一个主窗体。当以自动化模式（smAutomation）启动时，我们需要将主窗体创建为父窗体。由于这个问题范围之外的几个原因，我们无法创建应用程序然后执行 COM 方法来重新设置主窗体，即重新设置必须在该过程的早期完成 - 就在创建主窗体之后。欣赏想法thx。

编辑：澄清

```
// Initialized as as an Application
if COMserver.startmode = smStandalone
begin
   Application.Initialize;
   Application.MainFormOnTaskbar := True;
   Application.CreateForm(TForm1, Form1);
   Application.Run;
End
Else
// Initialized as an automation server
if COMserver.startmode = smAutomation
Begin
// How do I set a Parent window handle property - this is called imediately after the    COM client initializes the server
// how do I modify this call to create Form1 with a parent? 
   Application.CreateForm(TForm1, Form1);
End; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:12:17.227

我可以看到两个选项：

1.  在 Application.CreateForm 之后立即设置 Form1.ParentWindow := WHandle。
2.  如果为时已晚，那么您将需要覆盖 TForm1.CreateParams 并将其设置在那里。

# javascript - 在 Internet Explorer 中收到 Ajax 响应，但在 Chrome 中没有：

> ID：14839622
> 
> 赞同：0
> 
> 时间：2013-02-12T18:49:32.117
> 
> 标签：javascript, xml-parsing, xmlhttprequest

出于某种原因，以下代码适用于 Internet Explorer，但不适用于 Chrome 或 Firefox。在此浏览器中，我收到：

> “无法检索滑块数据。”

警报。

我很想得到一些帮助。

谢谢。

这是我的 JavaScript 代码：

```
<script>

if (navigator.appName == "Microsoft Internet Explorer") 
{ 
    request = new ActiveXObject("Microsoft.XMLHTTP"); 
} 
else 
{ 
    request = new XMLHttpRequest(); 
}
if (request == null)
    alert ("Your browser doesn't support XMLHttpRequest");

function getSelectedText(elementId) 
{
var elt = document.getElementById(elementId);

if (elt.selectedIndex == -1)
    return null;

return elt.options[elt.selectedIndex].value;
}

function sendRequest()
{
    debugger;
    var type = getSelectedText('dropdown');
    //alert("The chosen type: "+type);
    var url = 'https://tomcat-emildesign.rhcloud.com/coupons/Client/serveranswer.jsp?type=' + type;
    request.open("GET", url, true); 
    request.onreadystatechange= processRequest; 
    request.send(null);
}

function processRequest() 
{
    if (request.readyState == 4) 
    {
        if (request.status == 200) 
        {
            parseMessage();
        } 
        else 
        {
            alert ( "Not able to retrieve sliders data." );
        }
    }
}

function parseMessage()
{
    // Assign the XML file to a var variable.
    var doc = request.responseXML; 
    var pending, hires, rejected;
    if(navigator.appName == "Microsoft Internet Explorer")
    {
        pending = doc.documentElement.getElementsByTagName('pending').item(0).text;
        hires = doc.documentElement.getElementsByTagName('hires').item(0).text;
        rejected =  doc.documentElement.getElementsByTagName('rejected').item(0).text;      
    }
    else
    {   
        pending = doc.documentElement.getElementsByTagName('pending')[0].textContent;   
        hires = doc.documentElement.getElementsByTagName('hires')[0].textContent;
        rejected = doc.documentElement.getElementsByTagName('rejected')[0].textContent;
    }
    alert("values:" + pending + "," + hires + "," + rejected);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:52:10.913

我会用这个替换你的第一个 if-else 块：

```
// Mozilla/Safari/Non-IE
if (window.XMLHttpRequest) {
    request = new XMLHttpRequest();
}
// IE
else if (window.ActiveXObject) {
    request = new ActiveXObject("Microsoft.XMLHTTP");
} 
```

与测试浏览器相比，您最好测试对功能的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:06:21.623

我看不出你的代码有什么问题。问题可能是您正在执行一个在 Internet Explorer 中受信任但在其他浏览器中失败的跨域请求。

要确认这一点，您可以检查返回的 request.status 是否等于 0。

[有关Wikipedia](http://en.wikipedia.org/wiki/Same_origin_policy)上的同源政策的更多信息。

# c# - 如何获取带有标头的 XML ( 考虑以下创建 XML 文档并显示它的简单代码。 XmlDocument xml = new XmlDocument(); XmlElement root = xml.CreateElement("root"); xml.AppendChild(root); XmlComment comment = xml.CreateComment("Co 问问题 问问题 2013-02-12T18:50:01.617 64138 次 This question shows research effort; it is useful and clear 28 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 考虑以下创建 XML 文档并显示它的简单代码。 XmlDocument xml = new XmlDocument(); XmlElement root = xml.CreateElement("root"); xml.AppendChild(root); XmlComment comment = xml.CreateComment("Comment"); root.AppendChild(comment); textBox1.Text = xml.OuterXml; 它按预期显示： 但是，它不会显示 那么我怎样才能得到它呢？ 在将值添加到邮件附件之前检查变量的逻辑 更改脚本中的以下行以Attachments使用函数检查变量中的值是否不为空String.IsNullOrEmpty。 在. _ User::_System::Script Task System.IO.File.Exists要添加更多条件，您可以在将文件添加到邮件附件之前使用函数检查文件是否确实存在于指定路径中。 从： myHtmlMessage.Attachments.Add(New Attachment(Dts.Variables("Attachments").Value.ToString)) 至： Dim attachment As String = Dts.Variables("User::Attachments").Value.ToString() If Not String.IsNullOrEmpty(attachment) Then If System.IO.File.Exists(attachment) Then myHtmlMessage.Attachments.Add(New Attachment(attachment)) End If End If c#.netxmlxmldocument 4 3 回答 3 This answer is useful 39 使用XmlDocument.CreateXmlDeclaration 方法创建 XML 声明： XmlNode docNode = xml.CreateXmlDeclaration("1.0", "UTF-8", null); xml.AppendChild(docNode); 注意：方法请看文档，特别是encoding参数：对这个参数的取值有特殊要求。 于 2013-02-12T18:52:03.897 回答 This answer is useful 17 您需要使用 XmlWriter（默认情况下写入 XML 声明）。您应该注意 C# 字符串是 UTF-16 并且您的 XML 声明表明该文档是 UTF-8 编码的。这种差异可能会导致问题。这是一个示例，写入一个给出您期望结果的文件： XmlDocument xml = new XmlDocument(); XmlElement root = xml.CreateElement("root"); xml.AppendChild(root); XmlComment comment = xml.CreateComment("Comment"); root.AppendChild(comment); XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, ConformanceLevel = ConformanceLevel.Document, OmitXmlDeclaration = false, CloseOutput = true, Indent = true, IndentChars = " ", NewLineHandling = NewLineHandling.Replace }; using ( StreamWriter sw = File.CreateText("output.xml") ) using ( XmlWriter writer = XmlWriter.Create(sw,settings)) { xml.WriteContentTo(writer); writer.Close() ; } string document = File.ReadAllText( "output.xml") ; 于 2013-02-12T19:17:47.297 回答 This answer is useful 6 XmlDeclaration xmldecl; xmldecl = xmlDocument.CreateXmlDeclaration("1.0", "UTF-8", null); XmlElement root = xmlDocument.DocumentElement; xmlDocument.InsertBefore(xmldecl, root); 于 2013-12-18T11:16:14.693 回答 Related 1 ios - iOS Twitter 和 Facebook 登录第三方网络服务 1 javascript - 空字符串 + null = "null"？ 1 jquery - 尝试使用 jQuery 按多个字段对 JSON 进行排序 0 php - 致命错误：未找到“CFCredentials”类 - 适用于 S3 的 Amazon AWS 开发工具包错误 0 php - canvas.toDataURL 在 IE 中失败 3 c++ - 如何在 C++11 中检测一个类是否是最终的？ 1 c# - 如何将 Datareader 投影到预定义的对象中 2 ruby-on-rails - Rails 3，如何在路由中获取应用程序 URL 1 windows-phone - WP8 阻止操作系统处理 LaunchApp NFC 标签读取 1 ruby-on-rails - 用于生成内容的 Ruby gem Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14839630
> 
> 赞同：28
> 
> 时间：
> 
> 标签：c#, .net, xml, xmldocument

考虑以下创建 XML 文档并显示它的简单代码。

```
XmlDocument xml = new XmlDocument();
XmlElement root = xml.CreateElement("root");
xml.AppendChild(root);
XmlComment comment = xml.CreateComment("Comment");
root.AppendChild(comment);
textBox1.Text = xml.OuterXml; 
```

它按预期显示：

```
<root><!--Comment--></root> 
```

但是，它不会显示

```
<?xml version="1.0" encoding="UTF-8"?> 
```

那么我怎样才能得到它呢？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-12T18:52:03.897

[使用XmlDocument.CreateXmlDeclaration 方法](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createxmldeclaration.aspx)创建 XML 声明：

```
XmlNode docNode = xml.CreateXmlDeclaration("1.0", "UTF-8", null);
xml.AppendChild(docNode); 
```

注意：方法请看文档，**特别**是`encoding`参数：对这个参数的取值有特殊要求。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-12T19:17:47.297

您需要使用 XmlWriter（默认情况下写入 XML 声明）。您应该注意 C# 字符串是 UTF-16 并且您的 XML 声明表明该文档是 UTF-8 编码的。这种差异可能会导致问题。这是一个示例，写入一个给出您期望结果的文件：

```
XmlDocument xml = new XmlDocument();
XmlElement root = xml.CreateElement("root");
xml.AppendChild(root);
XmlComment comment = xml.CreateComment("Comment");
root.AppendChild(comment);

XmlWriterSettings settings = new XmlWriterSettings
{
  Encoding           = Encoding.UTF8,
  ConformanceLevel   = ConformanceLevel.Document,
  OmitXmlDeclaration = false,
  CloseOutput        = true,
  Indent             = true,
  IndentChars        = "  ",
  NewLineHandling    = NewLineHandling.Replace
};

using ( StreamWriter sw = File.CreateText("output.xml") )
using ( XmlWriter writer = XmlWriter.Create(sw,settings))
{
  xml.WriteContentTo(writer);
  writer.Close() ;
}

string document = File.ReadAllText( "output.xml") ; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-18T11:16:14.693

```
XmlDeclaration xmldecl;
xmldecl = xmlDocument.CreateXmlDeclaration("1.0", "UTF-8", null);

XmlElement root = xmlDocument.DocumentElement;
xmlDocument.InsertBefore(xmldecl, root); 
```

# c# - 在 Windows 窗体中绘制自定义表格

> ID：14839635
> 
> 赞同：1
> 
> 时间：2013-02-12T18:50:17.963
> 
> 标签：c#

我想绘制一个自定义表格，使其与图片中的表格类似

![在此处输入图像描述](../Images/b54924fad47d91ac7623e7afd4a9a4ce.png)

我已经尝试过 TableLayoutPanel，但我无法获得与此类似的东西，因此非常感谢您的帮助，并在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:59:19.570

您可以创建一个 RDLC 报告并在其中使用表格控件，这确实可以根据您的需要进行自定义。

也许您会考虑用一些数据填充表格，我很确定 RDLC 会为此派上用场。

您可以通过此链接了解如何使用它：

[http://msdn.microsoft.com/en-us/library/ms252067%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms252067%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:58:46.703

您仍然可以使用 a`TableLayoutPanel`并更改面板内控件的[ColumnSpan](http://msdn.microsoft.com/en-us/library/ms171687%28v=vs.80%29.aspx)。

检查[本教程](http://blogs.msdn.com/b/jpricket/archive/2006/04/05/winforms-autolayout-basics-tablelayoutpanel.aspx)

# tinymce - TinyMCE - 编辑器更改粘贴的内容

> ID：14839637
> 
> 赞同：3
> 
> 时间：2013-02-12T18:50:24.423
> 
> 标签：tinymce

两个问题，也许它们是由相同的事情/设置引起的。

将 TinyMCE 与完整的公司帐户一起使用。许多发布者只是将 HTML 粘贴到 HTML 源代码编辑器中……我们只是在进行此操作，结果非常复杂。

因此，如果有人有一个编码良好的页面，它就可以很好地工作——就我们而言。

但是，如果您创建一个带有几个（或一个）打开的 div 标签的页面。天啊！编辑器可以将 div 扔到任何地方——有人发给我的一页上多了 30 个。为什么编辑器要更改内容？我们能阻止这种情况发生吗？如果发布者犯了 HTML 错误，我们宁愿显示错误 - 而不是被清除。

此外，我在创建菜单时注意到，如果您在链接标签（如 div、ul、li、dd、dt、dl、h1-6 ......几乎任何标签）中放入除跨度之外的任何内容，则编辑器要么将标签内容推送到链接标签之外，要么将标签更改为跨度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:36:01.717

[http://www.tinymce.com/wiki.php/Configuration:Cleanup/Output](http://www.tinymce.com/wiki.php/Configuration:Cleanup/Output)

看起来验证 html 是新设置。测试后会反馈。

大卫 - 如果你回答，我会把你的标记为正确的。看起来这适用于 3.4 及以下版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T07:24:42.393

对于版本 3，使用

```
verify_html : false 
```

从这里[http://archive.tinymce.com/wiki.php/Configuration3x:verify_html](http://archive.tinymce.com/wiki.php/Configuration3x:verify_html)

# javascript - JQuery Tablesorter 添加带有过滤器的列

> ID：14839640
> 
> 赞同：2
> 
> 时间：2013-02-12T18:50:42.380
> 
> 标签：javascript, jquery, tablesorter

我正在将 JQuery Tablesorter 2.7.* 用于我拥有的 JavaScript 表。我还在使用 Tablesorter 过滤器小部件，以便让我的几个列具有下拉过滤选项。我有一个新的挑战：我需要动态地向表中添加列。我已经看到了这个问题：[将列动态添加到使用 jQuery 的表排序器管理的表中](https://stackoverflow.com/questions/4710785/adding-columns-dynamically-to-a-table-managed-with-jquerys-tablesorter) - 建议我在每次添加/删除列时删除并重新创建表。这很公平，但是这会导致与 Filter Widget 发生冲突。

为了应用过滤器函数，JavaScript 仅按索引引用列，如下所示：

```
 widgetOptions: {
            filter_reset: '.reset',
            filter_functions: {
                2: true,
                3: true,
            }
        } 
```

此代码将导致索引为 2 和 3 的列具有默认选择过滤器。动态添加新列时会出现问题 - 这些列的索引值可能会更改。

这带来了我的问题；有什么方法可以将小部件选项应用于专门按名称命名的列？如果没有，是否有一些我可以实现的解决方案可以实现我可以动态添加/删除列的功能，而不会干扰过滤器功能？

编辑：我也在使用过滤器功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:56:10.233

更新 #2：从[tablesorter v2.17.0 开始](https://github.com/Mottie/tablesorter/wiki/Changes#version-2170-5222014)，可以使用类名*或 ID 来定位`filter_functions`选项中的列：

```
// filter functions
widgetOptions: {
    filter_functions : {
        ".exact" : function(e, n, f, i) {
            return e === f;
        }
    }
} 
```

* 注意：类名不能包含使用任何类型索引的选择器，例如`"th:eq()"`, `":gt()"`, `":lt()"`, `":first"`, `":last"`, `":even"`or `":odd"`, `":first-child"`, `":last-child"`, `":nth-child()"`,`":nth-last-child()"`等。

* * *

在[docs](http://mottie.github.com/tablesorter/docs/#widget-filter-functions)`filter_functions`中，它显示了使用该选项的替代方法：

> 或者，不要将列过滤器函数设置为 true，而是为列标题指定一个类名“filter-select”。请参阅[演示](http://mottie.github.com/tablesorter/docs/example-widget-filter-custom.html)。

因此，只需将`filter-select`类名添加到列中即可。

* * *

更新：由于正在使用其他过滤器函数，您可以在初始化代码之外定义这些函数（[演示](http://jsfiddle.net/Mottie/abkNM/385/)）

```
// Add these options to the select dropdown (date example) 
// Note that only the normalized (n) value will contain
// the date as a numerical value (.getTime())
var dateFxns = {

    // Add these options to the select dropdown (date example) 
    // Note that only the normalized (n) value will contain
    // the date as a numerical value (.getTime())
    "< 2004": function (e, n, f, i) {
        return n < Date.UTC(2004, 0, 1); // < Jan 1 2004
    },
    "2004-2006": function (e, n, f, i) {
        return n >= Date.UTC(2004, 0, 1) && // Jan 1 2004
        n < Date.UTC(2007, 0, 1); // Jan 1 2007
    },
    "2006-2008": function (e, n, f, i) {
        return n >= Date.UTC(2006, 0, 1) && // Jan 1 2006
        n < Date.UTC(2009, 0, 1); // Jam 1 2009
    },
    "2008-2010": function (e, n, f, i) {
        return n >= Date.UTC(2008, 0, 1) && // Jan 1 2006
        n < Date.UTC(2011, 0, 1); // Jam 1 2009
    },
    "> 2010": function (e, n, f, i) {
        return n >= Date.UTC(2010, 0, 1); // Jan 1 2010
    }
},
currentDateColumn = 3,
filterFxn = {};
filterFxn[currentDateColumn] = dateFxns;

$('table').tablesorter({
    widgets: ['zebra', 'filter'],
    widgetOptions: {
        filter_functions: filterFxn
    }
}); 
```

# iphone - 使用 CATransform3DMakeRotation 时没有透视

> ID：14839645
> 
> 赞同：3
> 
> 时间：2013-02-12T18:50:51.290
> 
> 标签：iphone, ios, objective-c, core-animation, catransform3drotate

我正在尝试使用`CATransform3DMakeRotation`. 我很困惑为什么这个简单的例子没有显示透视图，而是看起来被压扁了。使用时我可以让旋转工作`CATransform3DRotate`，但我不想旋转，我想旋转到。谢谢。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIView *newView = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
    [newView setBackgroundColor:[UIColor orangeColor]];
    UILabel *newLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 50, 20)];
    [newLabel setText:@"Hello"];
    [newView addSubview:newLabel];
    [self.window addSubview:newView];

    CALayer *layer = newView.layer;

    CATransform3D perspective = CATransform3DMakeRotation(1.0, 0, 1, 0);
    perspective.m34 = -1 / 500;

    layer.anchorPoint = CGPointMake(1.0, 0.5);
    layer.zPosition = 99;
    layer.transform = perspective;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是它的截图：

![截屏](../Images/c8d048bc17f55ac47c36f657ad4b548e.png)

# 大卫回答后更新：

只是为了加强大卫关于顺序很重要的观点，我想看看矩阵的差异并将其编码：

```
CATransform3D transform1 = CATransform3DMakeRotation(-1, 0, 1, 0);
transform1.m34 = -1.0 / 500.0;

NSLog(@"%f %f %f %f", transform1.m11, transform1.m12, transform1.m13, transform1.m14);
NSLog(@"%f %f %f %f", transform1.m21, transform1.m22, transform1.m23, transform1.m24);
NSLog(@"%f %f %f %f", transform1.m31, transform1.m32, transform1.m33, transform1.m34);
NSLog(@"%f %f %f %f", transform1.m41, transform1.m42, transform1.m43, transform1.m44);

NSLog(@"==============================");

CATransform3D transform2 = CATransform3DIdentity;
transform2.m34 = -1.0 / 500.0;
transform2 = CATransform3DRotate(transform2, -1, 0, 1, 0);

NSLog(@"%f %f %f %f", transform2.m11, transform2.m12, transform2.m13, transform2.m14);
NSLog(@"%f %f %f %f", transform2.m21, transform2.m22, transform2.m23, transform2.m24);
NSLog(@"%f %f %f %f", transform2.m31, transform2.m32, transform2.m33, transform2.m34);
NSLog(@"%f %f %f %f", transform2.m41, transform2.m42, transform2.m43, transform2.m44);

NSLog(@"==============================");

CATransform3D transform3 = CATransform3DIdentity;
transform3 = CATransform3DRotate(transform3, -1, 0, 1, 0);
transform3.m34 = -1.0 / 500.0;

NSLog(@"%f %f %f %f", transform3.m11, transform3.m12, transform3.m13, transform3.m14);
NSLog(@"%f %f %f %f", transform3.m21, transform3.m22, transform3.m23, transform3.m24);
NSLog(@"%f %f %f %f", transform3.m31, transform3.m32, transform3.m33, transform3.m34);
NSLog(@"%f %f %f %f", transform3.m41, transform3.m42, transform3.m43, transform3.m44); 
```

产生这个输出：

```
0.540302 0.000000 0.841471 0.000000
0.000000 1.000000 0.000000 0.000000
-0.841471 0.000000 0.540302 -0.002000
0.000000 0.000000 0.000000 1.000000
==============================
0.540302 0.000000 0.841471 -0.001683
0.000000 1.000000 0.000000 0.000000
-0.841471 0.000000 0.540302 -0.001081
0.000000 0.000000 0.000000 1.000000
==============================
0.540302 0.000000 0.841471 0.000000
0.000000 1.000000 0.000000 0.000000
-0.841471 0.000000 0.540302 -0.002000
0.000000 0.000000 0.000000 1.000000 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T21:29:21.090

设置该`m34`值并不能为您提供所有魔法变换的视角（不幸的是）。由于旋转会改变变换的许多不同值，因此您需要在身份消息上设置透视图，然后旋转该变换。

```
CATransform3D rotationWithPerspective = CATransform3DIdentity;
rotationWithPerspective.m34 = -1.0/500.0;
rotationWithPerspective = CATransform3DRotate(rotationWithPerspective, angle, 0, 1, 0); 
```

这里与您所做的不同之处在于您创建了一个单位矩阵并对其进行透视，然后旋转该矩阵。问题是顺序很重要。

* * *

如果您了解矩阵数学，那么您可以验证两种转换之间的差异，并了解为什么您的转换没​​有给您任何视角。如果您有兴趣了解转换背后的数学，我写[了一篇关于此的博客文章](http://ronnqvi.st/the-math-behind-transforms/)（警告：它很长并且只包含数学）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:18:35.323

我一直觉得 m34 属性很挑剔，试试这个：

`CATransform3D transform = CATransform3DIdentity;`

代替`CATransform3DMakeRotation(1.0, 0, 1, 0);`

# java - 模拟列表 在java1.4

> ID：14839647
> 
> 赞同：0
> 
> 时间：2013-02-12T18:50:54.360
> 
> 标签：java

我需要采用使用 java 1.6 为 java 1.4 JVM 创建的代码。更改 java 1.4 中缺少的泛型使用的最佳方法是什么？其实我只需要改变这个表达式：

```
 List<byte[]> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:53:54.227

鉴于 Java 1.4 没有泛型，您唯一能做的就是在此处使用[原始类型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)

```
List myByteList = new ArrayList();
byte[] myByteArray1 = ...
myByteList.add(myByteArray1);
// add more byte arrays ... 
```

要检索，需要强制转换，例如

```
byte[] myByteArray = (byte[])myByteList.get(0); 
```

现在您看到了泛型带来的主要好处；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:53:02.783

泛型在 java 1.4 中不可用，因此您不能将任何类型与`List`. 你一定会使用`raw type List`.

```
List list = new ArrayList();
byte[] byteArray = ...
list.add(byteArray); 
```

注意：*您可以将任何类型的对象添加到此原始列表中。*

# android - libgdx 粒子效果旋转

> ID：14839648
> 
> 赞同：6
> 
> 时间：2013-02-12T18:51:04.480
> 
> 标签：android, libgdx, particle-system

我用 libgdx 在我的 android 设备上引起了轰动：

```
ParticleEffect effect;
ParticleEffectPool fireEffectPool;
Array<PooledEffect> effects = new Array<PooledEffect>();

@Override
public void create() 
{
    ...
    effect = new ParticleEffect();
    effect.load(Gdx.files.internal("particles/fire01.p"), Gdx.files.internal("image"));
    effect.setFlip(true, false);
    fireEffectPool = new ParticleEffectPool(effect, 1000, 3000);

    PooledEffect myEffect = fireEffectPool.obtain();
    myEffect.setPosition(200, 400);
    effects.add(myEffect);
    ...
} 
```

我可以以编程方式旋转、设置速度或缩放效果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-08T22:51:20.640

我通过使用此代码作为基础找到了粒子效果旋转问题的解决方案 [http://badlogicgames.com/forum/viewtopic.php?f=11&t=7060#p32607](http://badlogicgames.com/forum/viewtopic.php?f=11&t=7060#p32607)

并添加一个小的变化来保存效果的幅度。希望能帮助到你。

```
public void rotateBy(float amountInDegrees) {
    Array<ParticleEmitter> emitters = particleEffect.getEmitters();        
        for (int i = 0; i < emitters.size; i++) {                          
           ScaledNumericValue val = emitters.get(i).getAngle();
           float amplitude = (val.getHighMax() - val.getHighMin()) / 2f;
           float h1 = amountInDegrees + amplitude;                                            
           float h2 = amountInDegrees - amplitude;                                            
           val.setHigh(h1, h2);                                           
           val.setLow(amountInDegrees);       
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T15:56:58.787

是的。查看 ParticleEmitterTest：[https ://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/ParticleEmitterTest.java](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/ParticleEmitterTest.java)

你只需要获得一个 ParticleEmitter：

```
emitter = effect.getEmitters().first();
emitter.getScale().setHigh(5, 20); 
```

# c# - c# 类处于会话状态？

> ID：14839650
> 
> 赞同：0
> 
> 时间：2013-02-12T18:51:22.617
> 
> 标签：c#, asp.net

我的高级项目是在 ASP.NET/C# 中构建一个预订系统。我的高级项目的一部分是开设 c# 课程（并且基本上使用了我在过去几年中学到的所有东西）。我想做的一件事是在我实例化一个新的“用户”类之后，我需要它在页面之间移动。我知道会话状态包含变量，所以我认为会话状态可以在我可以简单地键入“Session[”blah”] 的情况下工作。并可以访问其成员。但我没有看到这种情况发生。我意识到会话状态是 HTTP 上下文，所以我怀疑它是否会起作用。但是有没有其他方法可以在不每次都实例化新用户类的情况下完成我需要的事情？我知道它是一个网页……但我也在尽可能地让它成为一个功能性的在线程序。

只是为了编码员的缘故，这是我正在使用的代码片段：

```
 cDatabaseManager cDM = new cDatabaseManager();

    string forDBPass = Encryptdata(pass_txt.Text.ToString());
    string fullName = fname_txt.Text.ToString() + " " + lname_txt.Text.ToString();

    cDM.regStudent(email_txt.Text.ToString(), forDBPass, fullName, num_txt.Text.ToString(), carrier_ddl.SelectedValue.ToString(), this);

    //ADD - getting a cStudent
    cUser studentUser = new cStudent(fullName, forDBPass, email_txt.Text.ToString());

    //ADD - session states
    Session["cStudent"] = studentUser;

    //Session["cStudent"].      //session state will not work with what I am doing
    //ADD - transfer to campus diagram 
```

提前致谢！！

编辑：

我要感谢所有发布和评论的人！我从这个简短的讨论中学到了很多东西。您所有的答案都帮助我理解了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:26:46.643

从您的评论中：

> 问题是当我键入时`"Session["cStudent"]."`我无法访问我的功能。示例：`Session["cStudent"].getName()`不提供我的功能。

这是因为设置/返回的`[]`索引器。编译器不知道您存储了一个对象，因此您无法在没有强制转换的情况下直接访问属性：`Session``object``cUser`

```
string name = ((cUser)Session["cStudent"]).getName(); 
```

这里有两件事可能出错：

1.  如果`Session["cStudent"]`是`null`，你会得到一个`NullReferenceException`
2.  如果`Session["cStudent"]`不是真的 a`cUser`你会得到一个`InvalidCastException`

您应该检查这些条件并在其中一个为真时做出适当的反应。

此外，正如其他人指出的那样，`cUser`需要将类标记为`Serializable`以便存储在`Session`状态中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T19:00:58.947

会话将项目存储为对象。只要您的类从 Object 继承（它确实如此），您就可以将它存储在那里。快速警告，它使用序列化存储该对象，因此您的类必须是可序列化的。

像这样向你的类添加一个属性：

```
public cStudent CurrentStudent
{
    get {
        if(Session["CurrentUser"] == null)
            return null;

        return (cStudent)Session["CurrentUser"];
    }
    set {
        Session["CurrentUser"] = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T19:11:40.967

从会话状态中检索对象值时，将其转换为适当的类型。

```
[Serializable]    
public class student
    {
      public string FirstName { get; set; }
      public string LastName { get; set; }
    } 
```

在第 1 页中：

```
student s1 = new student();
s1.FirstName ="James";
s1.LastName = "Bond";
Session["blah"] = s1; 
```

当你想在第 2 页访问 Session["blah"]

```
student s2 = (Session["blah"] !=null ? (student)Session["blah"] : null); 
```

现在您可以通过 s2.FirstName、s2.LastName 访问 s2 的属性

# java - 在 Stripes 框架中，如何在使用 MockRoundtrip 时在我的操作 bean 中依赖注入字段？

> ID：14839651
> 
> 赞同：1
> 
> 时间：2013-02-12T18:51:28.357
> 
> 标签：java, dependency-injection, stripes

下面是设置 Stripes 以使用 MockRoundtrip 的示例：

```
private void setupStripes() {
    context = new MockServletContext("testresults");

    // Add the Stripes Filter
    Map<String,String> filterParams = new HashMap<String,String>();
    filterParams.put("ActionResolver.Packages", "com.test.project.action,com.test.results.action");
    context.addFilter(StripesFilter.class, "StripesFilter", filterParams);

    // Add the Stripes Dispatcher
    context.setServlet(DispatcherServlet.class, "StripesDispatcher", null);

    mockRoundtrip = new MockRoundtrip(context, MyActionBean.class);
    assertNotNull(mockRoundtrip.getActionBean(MyActionBean.class));
} 
```

问题是最后一行总是使断言失败。您必须先调用`mockroundtrip.execute("eventName")`，但到那时，您的操作 bean 已经为您创建好了。如果您的操作 bean 执行依赖于应用服务器的事情（例如：使用 EJB、进行 JNDI 查找），您将永远无法完成对`execute()`. 我想做的是获取我的动作 bean 实例，依赖注入它的字段，*然后*调用`execute()`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:51:28.357

我在邮件列表上发布了这个并得到了这个答案：

> 显然，这家伙使用拦截器进行测试。
> 
> 我想这也是你想要的。编写一个可以根据需要执行“注入”的 Stripes 拦截器，并且只为您的单元测试注册这个拦截器。您不必存根任何 IMO。
> 
> 顺便说一句，这就是@SpringBean 所做的：它也基于拦截。

总之，制作一个只在运行测试代码时使用的拦截器。这个拦截器可以依赖注入你正在测试的动作 bean。

# parsing - ANTLR 歧义 '-'

> ID：14839654
> 
> 赞同：3
> 
> 时间：2013-02-12T18:51:38.903
> 
> 标签：parsing, antlr, ambiguity

我有一个语法，在这部分之前一切正常：

```
lexp
: factor ( ('+' | '-') factor)* 
;

factor :('-')? IDENT; 
```

这当然引入了歧义。例如`a-a`，可以通过或者`Factor - Factor`匹配`Factor -> - IDENT`

我收到以下警告说明：

```
[18:49:39] warning(200): withoutWarningButIncomplete.g:57:31: 
Decision can match input such as "'-' {IDENT, '-'}" using multiple alternatives: 1, 2 
```

我该如何解决这种歧义？我只是没有办法解决它。我可以使用某种选项吗？

这是完整的语法：

```
program 
    : includes decls (procedure)*
    ;

/* Check if correct! */
includes
    :  ('#include' STRING)* 
    ;

decls
    : (typedident ';')*
    ;

typedident
: ('int' | 'char') IDENT    
;

procedure
    : ('int' | 'char') IDENT '(' args ')' body
    ;

args
: typedident (',' typedident )*  /* Check if correct! */
|   /* epsilon */ 
;

body
: '{' decls stmtlist '}'
;   

stmtlist
: (stmt)*;

stmt  

:  '{' stmtlist '}'
| 'read' '(' IDENT ')' ';'
| 'output' '(' IDENT ')' ';'
| 'print' '(' STRING ')' ';'
| 'return' (lexp)* ';'
| 'readc' '(' IDENT ')' ';'
| 'outputc' '(' IDENT ')' ';'
|  IDENT '(' (IDENT ( ',' IDENT )*)? ')' ';'
| IDENT '=' lexp ';';

lexp
: term (( '+' | '-' ) term) * /*Add in | '-'  to reveal the warning! !*/
;

term 
    : factor (('*' | '/' | '%') factor )*
;  

factor : '(' lexp ')' 
 | ('-')? IDENT
 | NUMBER;

fragment DIGIT
: ('0' .. '9')
;

IDENT : ('A' .. 'Z' | 'a' .. 'z') (( 'A' .. 'Z' | 'a' .. 'z' | '0' .. '9' | '_'))* ;

NUMBER
: ( ('-')? DIGIT+)
;

CHARACTER
: '\'' ('a' .. 'z' | 'A' .. 'Z'  | '0' .. '9' | '\\n' |  '\\t'  | '\\\\'  | '\\'  | 'EOF'  |'.' | ',' |':'  )  '\'' /* IS THIS COMPLETE? */
; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:16:40.390

正如评论中提到的：这些规则*并不*模棱两可：

```
lexp
 : factor (('+' | '-') factor)* 
 ;

factor : ('-')? IDENT; 
```

这是模棱两可的原因：

```
'return' (lexp)* ';' 
```

`a-b`它可以以两种不同的方式解析输入：

1.  `a-b`作为单个二进制表达式
2.  `a`作为单个表达式和`-b`一元表达式

你需要改变你的语法。也许在多个返回值中添加逗号？像这样的东西：

```
'return' (lexp (',' lexp)*)? ';' 
```

这将匹配：

```
return;
return a;
return a, -b;
return a-b, c+d+e, f;
... 
```

# sql-server - SQLExpress 实例似乎不存在

> ID：14839655
> 
> 赞同：3
> 
> 时间：2013-02-12T18:51:44.317
> 
> 标签：sql-server, sql-server-express

我正在尝试连接到笔记本电脑上的 SQL Server Express 实例；我在我的系统中安装了 SQL Server 2008，但是当我尝试将实例`(local)/SQLEXPRESS`或`Jashobanta-PC/SQLEXPRESS`在我的系统中时，我无法连接到它。似乎它甚至不存在于我的系统中。

我收到以下错误：-

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。*

我也尝试过`SQLCMD`为此使用命令工具，但结果是一样的：-

```
sqlcmd -E -S .\SQLEXPRESS 
```

这里也出现了同样的错误。

有没有可能`SQLEXPRESS`没有安装在我的系统中？但由于 MVC Code First 使用 SQL Server Express，我需要它。当我首先使用代码时，文件创建得很好，但是它是如何连接的，它在哪里创建数据库，这是未知的。

任何建议都会有所帮助。

在此先感谢 Jasobanta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T20:53:09.987

我刚才也有同样的问题。要解决此问题，您需要安装 SQL Server 2008 Express 版本。

您可以通过在 Web Platform Installer 中搜索“SQL Express”并安装“SQL Server 2008 Express with Advanced Series”和“SQL Server 2008 Express with Tools”来执行此操作。

或者

从此网址下载并安装。

[http://www.microsoft.com/en-us/download/details.aspx?id=1695](http://www.microsoft.com/en-us/download/details.aspx?id=1695)

`.\SQLEXPRESS`是 SQL Server 2008 `(LocalDB)\v11.0`的 SQL Express，而 SQL Server 2012 / 14 是 SQL Express

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T07:54:46.170

我有一个类似的问题，所以为了谷歌的目的，我会列出我的结果。

我对这个问题的看法是我有一个 SQL2008 Express 实例，它已经“变暗”了，因为我安装了一个完整的 SQL2008R2 和/或 SQL Express 2012 实例。我的猜测是其中一个或另一个关闭了过时的快递实例作为安全风险。

这些实例被安装为新的实例名称，但在某个地方我的`(local)\SQLEXPRESS`实例被禁用了。

使用此[链接](http://blog.meaalmcommunity.com/post/2013/01/11/sql-server-2012-express-install-a-new-instance.aspx)，我使用 SQL2008R2 安装程序来升级`SQLEXPRESS`安装程序检测到的实例。

实例升级到 2008R2 后，`SQLEXPRESS`它很高兴地重新启用并可以在 上访问`(local)\SQLEXPRESS`，其中包含我以前的所有数据库。

# javascript - JavaScript 中 typeof 和 instanceof 的区别

> ID：14839656
> 
> 赞同：28
> 
> 时间：2013-02-12T18:51:53.703
> 
> 标签：javascript, node.js, syntax, instanceof, typeof

我正在使用 node.js，所以这可能特定于 V8。

我一直注意到 typeof 和 instanceof 之间的差异有些奇怪，但这里有一个让我很困扰：

```
var foo = 'foo';
console.log(typeof foo);

Output: "string"

console.log(foo instanceof String);

Output: false 
```

那里发生了什么事？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-12T18:56:11.297

`typeof`是一个构造，它“返回”你传递给它的任何东西的原始类型。
`instanceof`测试以查看右侧操作数是否出现在左侧原型链中的任何位置。

`"abc"`重要的是要注意字符串文字和字符串对象之间的巨大差异`new String("abc")`。在后一种情况下，`typeof`将返回“object”而不是“string”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T18:56:54.290

有文字字符串，有`String`类。它们是分开的，但它们可以无缝地工作，也就是说，您仍然可以将`String`方法应用于文字字符串，并且它的行为就像文字字符串是一个`String`对象实例一样。

如果你显式创建一个`String`实例，它就是一个对象，它是`String`类的一个实例：

```
var s = new String("asdf");
console.log(typeof s);
console.log(s instanceof String); 
```

输出：

```
object
true 
```

# python - Python 加入日期和文件名

> ID：14839659
> 
> 赞同：1
> 
> 时间：2013-02-12T18:51:58.310
> 
> 标签：python, linux

我正在学习 python，我正在尝试编写一个愚蠢的代码并被困在这里，我需要像这样的备份文件名`full-backup-ucs-2013-02-12`

```
#!/usr/bin/python

import os
from time import strftime

DATE=`strftime("%Y-%m-%d")`
backupfile = "full-backup-ucs-" + DATE

print backupfile 
```

当我运行时，我得到以下输出，您是否看到它`' '`在日期中打印两个单引号，我想删除它们。我相信有一种优雅的方式可以做到这一点，请建议：

```
[spatel@tux work]$ ./backup.py
full-backup-ucs-'2013-02-12' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T18:55:14.400

您可以使用该`datetime`模块来获取此信息。

```
import datetime
DATE = datetime.datetime.now().strftime('%Y-%m-%d') 
```

我相信您已经注意到，[反向替换在 python 中不像在 shell 中那样起作用](https://stackoverflow.com/questions/1673071/what-do-backticks-mean-to-the-python-interpreter-num)。它隐式调用`repr`（在 python2.x 中），这是您的附加引号的来源。

**编辑**[`time.strftime`](http://docs.python.org/2/library/time.html#time.strftime)——显然你可以使用删除反引号，如果你省略第二个参数，你的代码应该或多或少地像使用当前本地时间一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:55:43.470

您可以立即将文本放入格式字符串中：

```
#!/usr/bin/python

import os
from time import strftime

print strftime("full-backup-ucs-%Y-%m-%d") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T18:57:57.490

不使用反引号：

```
import time
print time.strftime("full-backup-ucs-%Y-%m-%d") 
```

# android - 使用静态数组作为固定数据库来显示单词列表是否可以？

> ID：14839665
> 
> 赞同：4
> 
> 时间：2013-02-12T18:52:06.797
> 
> 标签：android

我正在开发一个显示单词列表的 Android 应用程序。我不希望用户修改列表。那么使用静态数组作为固定数据库来显示单词列表（大约500个单词）是否可以？我应该使用 SQLite 数据库吗？...有什么优势？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:56:32.220

只要您不修改单词数组（它是一个常量），静态变量就应该适合您。

但是，如果您只是存储单词，我建议您使用`SharedPreferences`.

否则，如果您对此有更大的计划，这`SQLite`可能是您的最佳选择。的优点`SQLite`是它将提供一种托管且强大的方式来存储和访问您的数据，并且非常可靠。此外，如果你想增加你的单词数量（比如几十万），那么`SQLite`可以毫无问题地处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:57:11.813

使用数组似乎非常适合您正在做的事情，使用电话 SQLite 数据库对我来说似乎有点矫枉过正。我可以看到这样做的唯一原因是稍后的可扩展性，如果您计划稍后添加其他功能，那么 SQLite db 可能是要走的路（或者甚至使用 ContentProvider 将其抽象出来，以获得更大的可扩展性，但是再一次可能会过度满足您的需求）。

# php - 带有 node.js 和 socket.io 的 SOAP 客户端

> ID：14839669
> 
> 赞同：1
> 
> 时间：2013-02-12T18:52:15.180
> 
> 标签：php, node.js, soap, asynchronous, socket.io

我正在尝试使用 Node.js 创建一个 Web 应用程序。我想使用 socket.io 流式传输我从肥皂服务中提取的数据。我无法找到有关此的任何信息。对于这种情况，最好的选择是什么。

马上：

*   我正在使用 PHP 调用肥皂服务并检索数据。
*   我的客户端 java 脚本使用 AJAX 对包含 SOAP 调用的 PHP 函数进行间隔调用。（这是低效的，这就是我想切换到 socket.io 设置的原因）。

我想做的事：

*   可能带有 express 的 Node.js 应用程序
*   如果可能，使用 PHP 或 Node.js 进行 SOAP 调用。
*   将数据从 SOAP 流式传输到客户端以使用 socket.io 查看

我不确定这种设置是否可行，而且我还没有找到关于此的良好文档。这可能吗？如果是这样，最好的方法是什么，或者有没有教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:42:36.823

有一个名为“soap”的优秀 node.js 模块，你可以通过`npm install soap`. [另请参阅https://github.com/milewise/node-soap](https://github.com/milewise/node-soap)上的文档。

# ruby-on-rails - 捆绑安装错误“US-ASCII 中的无效字节序列（ArgumentError）”

> ID：14839674
> 
> 赞同：7
> 
> 时间：2013-02-12T18:52:28.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, encoding, bundle, bundler

当我尝试运行“捆绑安装”时，我收到一个奇怪的错误：“US-ASCII 中的无效字节序列（ArgumentError）”

```
 $ bundle install
    Updating git://github.com/devton/catarse_paypal_express.git
    Unfortunately, a fatal error has occurred. Please see the Bundler
    troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!
    /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler.rb:294:in `block in load_gemspec_uncached': invalid byte sequence in US-ASCII (ArgumentError)
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler.rb:291:in `chdir'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler.rb:291:in `load_gemspec_uncached'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler.rb:282:in `load_gemspec'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/source.rb:411:in `block in load_spec_files'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/source.rb:410:in `each'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/source.rb:410:in `load_spec_files'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/source.rb:799:in `load_spec_files'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/source.rb:381:in `local_specs'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/source.rb:774:in `specs'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/definition.rb:491:in `block in converge_locked_specs'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/definition.rb:480:in `each'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/definition.rb:480:in `converge_locked_specs'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/definition.rb:166:in `resolve'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/definition.rb:113:in `specs'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/definition.rb:108:in `resolve_remotely!'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/installer.rb:81:in `run'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/installer.rb:14:in `install'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/cli.rb:230:in `install'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/task.rb:27:in `run'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/vendor/thor.rb:275:in `dispatch'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/base.rb:408:in `start'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/bin/bundle:14:in `block in <top (required)>'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.3/bin/bundle:14:in `<top (required)>'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/bin/bundle:19:in `load'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/bin/bundle:19:in `<main>'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/bin/ruby_noexec_wrapper:14:in `eval'
        from /Users/.../.rvm/gems/ruby-1.9.2-p320@global/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我确实找到了这个解决方法（对我有用）：

```
if RUBY_VERSION =~ /1.9/
  Encoding.default_external = Encoding::UTF_8
  Encoding.default_internal = Encoding::UTF_8
end 
```

但是我认为稍后它会导致不同的错误，所以我宁愿不使用它，而只是尝试了解这里真正的错误。我确信这个相同的代码适用于不同的系统......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T19:13:51.357

作为一种解决方法，您可以在系统中设置 utf8 语言环境：

```
export LANG="C.UTF-8"
export LC_ALL="C.UTF-8" 
```

有关此的更多信息是[here](https://github.com/carlhuda/bundler/issues/1570)

# java - 类加载器之间的反射参数类型不匹配

> ID：14839675
> 
> 赞同：5
> 
> 时间：2013-02-12T18:52:29.183
> 
> 标签：java, reflection, classloader

对于向后兼容性测试，我正在创建自己的类加载器来加载我以前版本的一些代码。在我拥有我的自定义对象（来自旧的自定义类）之后，我正在使用反射调用它的 API。但是，当此类 API 方法具有自定义参数（不是 java 库的一部分）时，例如：

```
public void MyMethod(MyObj a) {} 
```

当我使用反射调用此方法时，我得到：

> java.lang.IllegalArgumentException：参数类型不匹配

因为我从默认类加载器传递 MyObj 而该方法期望从自定义类加载器获取 MyObj。

我用来调用该方法的代码（代理由我的自定义类加载器加载，代理的 api 方法的参数来自我的测试类，该测试类由默认类加载器加载）

```
 private Object invoke(Object... args) {
            try {
                final String methodName = getMethodName();
                final Class<?>[] methodArgs = getMethodArgs(methodName);
                return agent.getClass().getMethod(methodName, methodArgs).invoke(agent, args);

            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            } catch (NoSuchMethodException e) {
                e.printStackTrace();
            }
            return null;
        }

        private Class<?>[] getMethodArgs(String methodName) {
            final Method[] declaredMethods = agent.getClass().getDeclaredMethods();
            for (Method method : declaredMethods) {
                if (method.getName().equals(methodName)) {
                    return method.getParameterTypes();
                }
            }
            return new Class<?>[0];
        }

        private String getMethodName() {
            StackTraceElement[] stacktrace = Thread.currentThread().getStackTrace();
            StackTraceElement e = stacktrace[3];
            return e.getMethodName();
        } 
```

我该如何解决这个问题？（我无法将通用接口传递给该方法，因为 myCustomObject 没有实现共享模块中存在的接口，并且我现在无法添加一个，因为旧 jar 不会知道它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:45:46.500

您可以使用自定义类加载器来加载扩展 MyObj 的类“DefaultCtorMyObjWrapper”（由自定义类加载器加载）。DefaultCtorMyObjWrapper 包装了由默认构造函数加载的“MyObj”实例（引用应保留为对象）。DefaultCtorMyObjWrapper 覆盖 MyObj 的所有方法，并使用反射将调用委托给包装的 MyObj。

应该看起来像这样：

```
class DefaultCtorMyObjWrapper{

    Object _defaultCtorMyObj;

    public DefaultCtorMyObjWrapper(Object defaultCtorMyObj){
        _defaultCtorMyObj = defaultCtorMyObj;
    }   

    public method1(){
        // invoke method1 on _defaultCtorMyObj using reflcetion
    }

} 
```

如果 MyObj 的方法接收对象作为参数，您可能需要进行更多调整。

# inno-setup - Inno setup 搜索现有文件

> ID：14839677
> 
> 赞同：3
> 
> 时间：2013-02-12T18:52:31.923
> 
> 标签：inno-setup

如何搜索现有的 exe 文件，然后将该目录用于我的安装程序？

如果找不到 exe 文件，我希望用户浏览路径。如果exe文件安装在其他地方。

***Senario 1（最常见的情况）：***

默认目录是 c:\test\My program

这应该显示为“选择目标位置”页面上的路径当用户按下一步时，应该有一个检查。要确保默认目录存在（c:\test\My 程序），如果存在，用户应该继续到准备安装页面。

***Senario 2（极少数情况）：***

默认目录是 c:\test\My program

这应该显示为“选择目标位置”页面上的路径当用户按下一步时，应该有一个检查。确保默认目录存在 (c:\test\My program) 如果不存在，应提示用户输入“我的程序”的路径。用户随后应继续进入“准备安装”页面。然后我只相信用户选择了正确的路径

如何在 InnoSetup 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-11T19:32:39.950

我已经用我的安装程序做了类似的事情。我要做的第一件事是需要从程序中读取注册表值，如果该注册表值不存在，那么我选择该程序的默认目录。例如：

```
DefaultDirName={reg:HKLM\Software\Activision\Battlezone II,STInstallDir|reg:HKLM\Software\Activision\Battlezone II,Install121Dir|{pf32}\Battlezone II} 
```

现在，用户运行安装程序，它必须检查程序是否在正确的文件夹中。它通过检查程序的可执行文件是否已经存在来做到这一点。我使用这段代码来做到这一点。

```
{ Below code warns end user if he tries to install into a folder that does not contain bzone.exe. Useful if user tries to install into addon or any non-BZ2 folder. }
function NextButtonClick(CurPageID: Integer): Boolean;
begin
  Log('NextButtonClick(' + IntToStr(CurPageID) + ') called');
  case CurPageID of
    wpSelectDir:
    if not FileExists(ExpandConstant('{app}\bzone.exe')) then begin
      MsgBox('Setup has detected that that this is not the main program folder of a Battlezone II install, and the created shortcuts to launch {#MyAppName} will not work.' #13#13 'You should probably go back and browse for a valid Battlezone II folder (and not any subfolders like addon).', mbError, MB_OK);
      end;
    wpReady:
  end;
  Result := True;
end; 
```

上面的代码只是检查目标可执行文件是否存在，如果不存在则警告用户，让他有机会返回并更改目录，但也可以继续安装。

此外，由于您似乎正在为现有程序安装补丁或插件，我建议您设置

```
DirExistsWarning=no
AppendDefaultDirName=false 
```

如果您不创建开始菜单条目，还可以选择防止出现不必要的屏幕

```
DisableProgramGroupPage=yes 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T21:07:51.627

我会制作一个文件输入页面并让用户`Picture.exe`手动选择二进制位置，当它在预期位置找不到时。

您可以遵循此代码的[**注释版本**](https://stackoverflow.com/revisions/14841853/1)：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Files]
Source: "CurrentBinary.exe"; DestDir: "{app}"
Source: "PictureExtension.dll"; DestDir: "{code:GetDirPath}"

[Code]
var
  FilePage: TInputFileWizardPage;

function GetDirPath(const Value: string): string;
begin
  Result := '';
  if FileExists(FilePage.Values[0]) then
    Result := ExtractFilePath(FilePage.Values[0]);
end;         

procedure InitializeWizard;
var
  FilePath: string;
begin
  FilePage := CreateInputFilePage(wpSelectDir, 'Select Picture.exe location', 
    'Where is Picture.exe installed ?', 'Select where Picture.exe is located, ' +
    'then click Next.');
  FilePage.Add('Location of Picture.exe:', 'Picture project executable|Picture.exe', 
    '.exe');

  FilePage.Edits[0].ReadOnly := True;
  FilePage.Edits[0].Color := clBtnFace;

  FilePath := ExpandConstant('{pf}\Picture\Picture.exe');
  if FileExists(FilePath) then
    FilePage.Values[0] := FilePath;
end; 
```

# actionscript-3 - AS3 中流畅的 60fps 帧速率独立运动

> ID：14839681
> 
> 赞同：2
> 
> 时间：2013-02-12T18:53:06.037
> 
> 标签：actionscript-3, flash, actionscript, frame-rate

我无法在 AS3 中以 60fps 的速度实现与帧速率无关的运动。每一帧我都测量自上一帧以来的时间，将其添加到累加器中，如果累加器大于我的目标时间，即 16.666ms (60fps)，则模拟一帧。

问题是 AS3 getTimer() 仅返回以毫秒为单位的时间。

我得到的增量时间通常是第一帧为 16 毫秒，第二帧为 16 毫秒，第三帧为 18 毫秒，并且这种模式重复。这平均为 16.666。但在第一帧中它低于目标时间（16 < 16.666），因此没有模拟任何帧。在第二帧中，累加器高于目标时间，但略低于目标时间的两倍，因此模拟了一帧。对于第三帧，18ms 将累加器推到目标时间的两倍以上，因此模拟了两帧。

所以我得到了这个非常不稳定的动作，其中没有渲染帧，然后是一帧，然后是两帧，然后是无帧，然后是一帧，然后是两帧，然后继续。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:10:49.573

哇...我以为只有我一个人发现了这一点。

是的，AS3 中的定时器类不准确。它只会每约 16 毫秒触发一次，这有时会导致重大问题。

> 如果想**在 1000 毫秒内看到 2048 个动作**：[FlashText 标记语言](http://reshapemedia.com/ftml/)

**（要对此进行测试，您需要一个需要 1 毫秒才能执行的方法 - 仅用于统计数据）**

注意区别：

> **正确**：1000 毫秒 | 计时器=0 == 1000 个动作
> 
> **AS3** : 1000 毫秒 | timer=0 == 62.5 个动作

我能够编写一个像这样工作的类：

> **正确**：1000 毫秒 | 计时器=0 == 1000 个动作
> 
> **整形定时器**：1000ms | 计时器=0 == 1024 个动作

笔记：

> 1.  它**不会**每毫秒触发一次动作
>     
>     
> 2.  它**确实**赶上了 16 毫秒间隔之间的动作
>     
>     
> 3.  一个 ACTION（我使用它的方式）是一个方法调用，每个方法调用都可以有自己的主体

我用来创建它的方法是追赶...基本上第一个计时器事件将在 16 毫秒触发...我们知道在计时器类再次触发之前我们有完整的 16 毫秒的代码时间来触发我们自己的操作 - 就是这样你在哪里注入子动作......

我能够产生的最高值是 1000 毫秒内的 2048 个动作……**每毫秒超过 2 个动作**。

**现在...回到您的问题** 没有办法触发 0ms 计时器事件。根据我的解决方案，如果您想在计时器触发之前绕过前 16 毫秒的延迟……您可以调度一个将在 2 毫秒内触发的事件，具体取决于当前系统进程。

**可能的解决方案** 如果您采用我的方法在 16 毫秒内执行自己的操作，那么您可以构建自己的计时器类。在 16 毫秒内使用事件，当被触发时......再触发 15 次 - 大声笑。基本上，您可以在 16 毫秒之间创建自己的增量。

# c# - 从 Chrome 中的当前网页获取信息

> ID：14839688
> 
> 赞同：-1
> 
> 时间：2013-02-12T18:53:35.443
> 
> 标签：c#, google-chrome

我是一个网站的成员，想从 Chrome 中当前打开的窗口中获取一些信息。也就是说，如果我在 Chrome 中查看个人资料，我希望我的 C# 程序能够获取该网站的源代码，以便从中检索生日、位置等。有没有办法做到这一点？

我想一个解决方案是将 webbrowser 控件合并到一个 winforms 项目中并使用它而不是 chrome。但如果我能像往常一样使用 Chrome 会更好，然后当我切换到我的 C# 程序时，它会复制源代码并解析其中我认为相关的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:57:20.103

您可以尝试使用 C# 版本的[Selenium](http://seleniumhq.org/)来自动化您的浏览器。它主要是为测试而设计的，但它应该可以帮助您解决问题。它带有[Google Chrome 的驱动程序](http://code.google.com/p/chromedriver/downloads/list)。

# r - 附加到公式的正确方法，其中公式和要附加的东西都是参数

> ID：14839689
> 
> 赞同：2
> 
> 时间：2013-02-12T18:53:38.113
> 
> 标签：r, formula

我已经在 SO 上进行了大量阅读，并了解到我通常应该避免操作`formula objects`as 字符串，但我还没有完全找到如何以安全的方式做到这一点：

```
tf <- function(formula = NULL, data = NULL, groups = NULL, ...) {
# Arguments are unquoted and in the typical form for lm etc
# Do some plotting with lattice using formula & groups (works, not shown)
# Append 'groups' to 'formula':
# Change y ~ x as passed in argument 'formula' to
# y ~ x * gr where gr is the argument 'groups' with
# scoping so it will be understood by aov
new_formula <- y ~ x * gr
# Now do some anova (could do if formula were right)
model <- aov(formula = new_formula, data = data)
# And print the aov table on the plot (can do)
print(summary(model)) # this will do for testing
} 
```

也许我来的最接近的是使用`reformulate`，但这仅提供`+`RHS，而不是`*`. 我想使用这样的功能：

```
p <- tf(carat ~ color, groups = clarity, data = diamonds) 
```

并获得克拉 ~ 颜色 * 净度的 aov 结果。提前致谢。

**解决方案**

这是基于@Aaron 的评论的工作版本，它演示了正在发生的事情：

```
tf <- function(formula = NULL, data = NULL, groups = NULL, ...) {
print(deparse(substitute(groups)))
f <- paste(".~.*", deparse(substitute(groups)))
new_formula <- update.formula(formula, f)
print(new_formula)
model <- aov(formula = new_formula, data = data)
print(summary(model))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:17:23.180

我认为 update.formula 可以解决您的问题，但是我在函数调用中遇到了更新问题。它将像我在下面编码的那样工作，但请注意，我将列传递给组，而不是变量名。然后将该列添加到函数数据集，然后更新工作。

我也不知道它是否完全符合您在第二个等式中的要求，但请查看 update.formula 的帮助文件并稍微弄乱一下。

[http://stat.ethz.ch/R-manual/R-devel/library/stats/html/update.formula.html](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/update.formula.html)

```
tf <- function(formula,groups,d){
  d$groups=groups
  newForm = update(formula,~.*groups)
  mod = lm(newForm,data=d)
}

dat  = data.frame(carat=rnorm(10,0,1),color=rnorm(10,0,1),color2=rnorm(10,0,1),clarity=rnorm(10,0,1))
m = tf(carat~color,dat$clarity,d=dat)
m2 = tf(carat~color+color2,dat$clarity,d=dat)

tf2 <- function(formula, group, d) {
  f <- paste(".~.*", deparse(substitute(group)))
  newForm <- update.formula(formula, f)
  lm(newForm, data=d)
}
mA = tf2(carat~color,clarity,d=dat)
m2A = tf2(carat~color+color2,clarity,d=dat) 
```

编辑：正如@Aaron 指出的那样，它`deparse`解决`substitute`了我的问题：我已将`tf2`其作为更好的选项添加到代码示例中，这样您就可以看到两者是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:48:39.950

当我在函数内定义和调用函数时遇到问题时，我使用的一种技术是将参数作为字符串传递，然后从这些字符串构造函数内的调用。这就是这里的样子。

```
tf <- function(formula, data, groups) {
  f <- paste(".~.*", groups)
  m <- eval(call("aov", update.formula(as.formula(formula), f), data = as.name(data)))
  summary(m)
}

tf("mpg~vs", "mtcars", "am") 
```

有关此示例的另一个示例，请参见我之前的一个问题的答案：[https](https://stackoverflow.com/a/7668846/210673) ://stackoverflow.com/a/7668846/210673 。

另请参阅此问题的姊妹问题的答案，我建议使用类似的方法`xyplot`：[https ://stackoverflow.com/a/14858661/210673](https://stackoverflow.com/a/14858661/210673)

# c++ - C++ 中的数组创建

> ID：14839691
> 
> 赞同：1
> 
> 时间：2013-02-12T18:53:44.143
> 
> 标签：c++, arrays

我基本上想做的是编写一个函数，它可以采用长度为 n 的数组，并制作一个长度为 n-2 的数组。这是我到目前为止的代码：

```
float* comp_arr(float vals[], int arr_size, float scale, float dim){

    int arr_dim = (int)(arr_size+1-2*scale);
    float curvs[arr_dim];

    for(int i = scale; i < sizeof(vals)-scale+1; i++){
            float cur = comp_cur((i-scale)*dim, vals[i-1], i*dim, vals[i], (i+scale)*dim, vals[i+1]);
            int new_index = (int)(i-scale);
            curvs[new_index] = cur;
            printf("%f\n",cur);
    }
    return curvs;
} 
```

我一直在这样的主函数中调用它：

```
main(){
    float vals [] = {2,3,6,1,7};
    float *curvs = comp_arr(vals,5,1.0,1.0);
} 
```

但我收到此错误：

```
comp.cpp: In function ‘float* comp_arr(float*, int, float, float)’:
comp.cpp:35:8: warning: address of local variable ‘curvs’ returned [enabled by default]
/tmp/ccrDJjYq.o: In function `comp_arr(float*, int, float, float)':
comp.cpp:(.text+0x590): undefined reference to `__cxa_end_cleanup'
/tmp/ccrDJjYq.o:(.ARM.extab+0xc): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status 
```

我对 C++ 很陌生，我做错了什么？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:59:04.787

该`curvs`数组是 comp_arr 函数中的一个局部变量。第一个警告被抛出，因为一旦这个函数返回，它正在使用的内存（包括`curvs`数组）将超出范围。在 main 中引用返回的数组将导致未定义的行为；如果你想从一个函数返回一个数组，你必须通过 new/malloc 动态分配它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:58:50.880

您正在返回一个指向局部变量的指针。一旦`comp_arr`到达函数的右大括号，`curvs`就超出范围并且不再存在，但您正在返回它的地址。如果数据仍然存在于内存中，程序甚至可能会正确运行，但它可能随时被覆盖。

# tomcat - 使用 Shibboleth IdP 和 Tomcat 进行单点登录

> ID：14839693
> 
> 赞同：0
> 
> 时间：2013-02-12T18:53:57.747
> 
> 标签：tomcat, single-sign-on, shibboleth

我正在尝试在 Tomcat 上为 SSO 设置一个 shibboleth IDP，但我遇到了一些 Tomcat 配置问题。我已按照 Shibboleth 网站 ( [https://wiki.shibboleth.net/confluence/display/SHIB2/IdPInstall](https://wiki.shibboleth.net/confluence/display/SHIB2/IdPInstall) ) 中的设置说明进行操作。但是我收到一个 404 错误，说我启动的 idp 资源不存在，即使我将 idp.war（在 shibboleth 安装期间创建）放在了 tomcat 的 webapps 目录中。转到设置说明提供的测试 URL 是我发现此问题的方式（`[https://idp.test.org/idp/profile/Status](https://idp.test.org/idp/profile/Status)` 其中 idp.test.org 是 tomcat 服务器地址）。

我正在使用运行 32 位 Ubuntu 12.04 LTS、Tomcat 6 和 Shibboleth IDP 2.3.8 的 Amazon EC2 实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T09:56:21.190

检查 Tomcat 控制台。如果在部署过程中缺少某些 SAX 类的任何异常，您必须将它们添加到 tomcat/lib 文件夹才能运行 war 文件。我不明白为什么他们没有将它们包含在 web-inf/lib 文件夹中......

# android - onDrawFrame 中的框架是什么？

> ID：14839694
> 
> 赞同：1
> 
> 时间：2013-02-12T18:54:03.297
> 
> 标签：android, opengl-es

在开发者参考 [http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html) onDrawFrame() 描述为：

> 调用以绘制当前帧。该方法负责绘制当前帧。

什么是框架？当前帧是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:07:44.303

帧是游戏或应用程序在特定时间的当前状态的渲染。有关一般概念的更多信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Film_frame)。当前帧是根据您的游戏/应用程序的当前状态（即玩家位置、盾牌打开、敌人位置等）绘制的帧。

onDrawFrame() 应该执行绘图方法来显示状态。理想情况下，它每秒调用大约 60 次 (FPS)，但实际调用速率可能会有所不同。您的其他事件处理程序将接受输入并更改您的应用程序/游戏的状态，而不是直接更改其绘制方式。调用 onDrawFrame() 时，只需使用状态来影响渲染。

# html - 调整浮动元素的高度

> ID：14839696
> 
> 赞同：0
> 
> 时间：2013-02-12T18:54:13.940
> 
> 标签：html, css, css-float

```
<div class="view">
  <img src="http://media-cache-ec2.pinterest.com/550x/cf/4f/36/cf4f36b3f25df6f6af27ca54012dedf1.jpg">
  <div class="details">
    Lorem....</div>
</div>

html, body {
  height: 100%;
}
.view {
  width: 500px;
}
img, .details {
  width: 50%;
}
img {
  float: left;
}
.details {
  padding: 10px;
  box-sizing: border-box;  
  overflow: hidden;
  background: pink;
  height: 100%;
} 
```

有没有办法`.details`调整高度`img`？现在`height: 100%`似乎没有奏效。

[http://codepen.io/anon/pen/GbfJE](http://codepen.io/anon/pen/GbfJE)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T18:58:39.473

简单的解决方法：

```
.view {
    background:pink;
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:01:16.460

您将不得不使用 javascript（最简单的是 jQuery），这将非常容易......查看这个解决方案： [http](http://codepen.io/anon/pen/sKtIb) ://codepen.io/anon/pen/sKtIb 注意我已经包含了 jQuery Javascript 库

# java - 运行时Java Hashmap to Object

> ID：14839698
> 
> 赞同：1
> 
> 时间：2013-02-12T18:54:23.237
> 
> 标签：java, object, casting, hashmap, runtime

有没有办法在运行时将 Java HashMap 的值转换为 Object，如下所示：

```
claas Foo {
    public int a;
    public String b;
}
Foo foo = new Foo();

HashMap<String, Object> map = new HashMap<String, Object>();

for(Map.Entry<Foo, Bar> entry : map.entrySet()) {
  String propertyName foo = entry.getKey();
  Object o = entry.getValue();

  foo[propertyName] = o; // Does not wokring
} 
```

我试图将 SQL 查询结果解析为对象。现在我已经编写了自己的 Seralize 算法。机器人它不起作用。有没有更好的方法从数据库中反序列化对象？

```
Connection connection = DriverManager.getConnection(instance);
PreparedStatement statment = connection.prepareStatement("SELECT * FROM Foo;");

Foo data;

ResultSet rs = statment.executeQuery(query);
    if (rs != null && rs.next()) {
        for (Field field : data.getClass().getDeclaredFields()) {
        try {
            if ((String.class.equals(field.getType()))) {
                field.set(String.class, rs.getString(field.getName()));
            } else if ((Boolean.class.equals(field.getType()))) {
                field.set(Boolean.class, rs.getBoolean(field.getName()));
            } else if ((Integer.class.equals(field.getType()))) {
                field.set(Integer.class, rs.getInt(field.getName()));
            }

        } catch (IllegalAccessException e) {
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T18:58:56.797

听起来您*实际上*要问的是：

> 有没有办法在执行时按名称动态访问变量？

答案是“是的，但这通常是个坏主意”。

您可以使用反射：

```
Field field = Foo.class.getDeclaredField(entry.getKey());
field.set(foo, entry.getValue()); 
```

但这会很慢，而且您只会在执行时发现无效的键/值。这通常是一个坏主意。如果您只动态地了解事物，则可以*使*它们保持动态 - 将它们保留在地图中。如果您想存储任意属性，通常有更好的解决问题的方法（例如自定义序列化），但如果没有更多细节，我们无法帮助您找到更好的方法。

（另请注意，您需要`Map.Entry<String, Object>`，而不是`Map.Entry<Foo, Bar>`您的`entry`变量。）

# c# - 从文件路径中删除“头”目录

> ID：14839699
> 
> 赞同：1
> 
> 时间：2013-02-12T18:54:24.810
> 
> 标签：c#, .net, vb.net, string

在 .NET（VB 或 C#）中有没有人知道从文件路径字符串中删除“头”目录的简单方法，这意味着如果我的路径看起来像这样：`Directory1/Directory2/Directory3`我想`Directory2/Directory3`回来。我知道有一些方法可以做到这一点，比如将它拆分成一个数组，然后从第二个元素开始将它全部连接起来，我只是觉得，这是一种非常低效的方法，我想知道是否有一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:01:28.650

这取决于你在寻找什么。如果您知道事物的形式为`dir1/dir2/dir3/dir4...`，那么您只需查找第一个`/`，然后获取所有内容：

```
string dir = "dir1/dir2/dir3";
var pos = dir.IndexOf('/');
if (pos != -1)
{
    result = dir.Substring(pos+1);
} 
```

如果您还可以接受格式为`c:\dir\dir\file.ext`or的完整路径名`\\server\dir\dir\file.ext`，那么您可能需要确保首先将任何相对路径转换为完整路径。然后使用`System.IO.Path`类中的方法提取驱动器或服务器名称，然后再使用上述`IndexOf`技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:59:55.163

查看[System.IO.Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)类。对于这类事情，它有许多有用的方法。

例如，您可以使用它的`GetPathRoot()`方法作为调用 String.Replace() 的一部分，如下所示：

```
public string RemoveHead(string path)
{
    return path.Replace(Path.GetPathRoot(path), "");
} 
```

我没有方便的 Visual Studio，因此可能需要进行一些调整来解释分隔符或驱动器字母，但它应该会给你这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:30:28.047

如果你想要正确性和效率，

```
string path=@"dir1/dir2/dir3";
path=path.Substring(path.IndexOf(System.IO.Path.DirectorySeparatorChar)+1); 
```

仅创建 1 个新字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T07:50:24.117

```
 /// <summary>
    /// Removes head.
    /// </summary>
    /// <param name="path">The path to drop head.</param>
    /// <param name="retainSeparator">If to retain separator before next folder when deleting head.</param>
    /// <returns>New path.</returns>
    public static string GetPathWithoutHead (string path, bool retainSeparator = false)
    {
        if (path == null) 
        {
            return path;
        }
        if (string.IsNullOrWhiteSpace (path)) 
        {
             throw new ArgumentException(path, "The path is not of a legal form.");
        }

        var root = System.IO.Path.GetPathRoot (path);
        if (!string.IsNullOrEmpty(root) && !StartsWithAny(root,System.IO.Path.DirectorySeparatorChar,System.IO.Path.AltDirectorySeparatorChar))
        {               
            return path.Remove(0,root.Length);
        }

        var sep = path.IndexOf(System.IO.Path.DirectorySeparatorChar);
        var altSep = path.IndexOf(System.IO.Path.AltDirectorySeparatorChar);
        var pos = MaxPositiveOrMinusOne (sep, altSep);
        if (pos == -1)
        {
            return string.Empty;
        }

        if (pos == 0) 
        {
            return GetPathWithoutHead(path.Substring(pos+1), retainSeparator);
        }

        var eatSeparator = !retainSeparator ? 1 : 0;
        return path.Substring(pos+eatSeparator);
    }

    /// <summary>
    /// Startses the with.
    /// </summary>
    /// <returns><c>true</c>, if with was startsed, <c>false</c> otherwise.</returns>
    /// <param name="val">Value.</param>
    /// <param name="maxLength">Max length.</param>
    /// <param name="chars">Chars.</param>
    private static bool StartsWithAny(string value, params char[] chars)
    {
        foreach (var c in chars) 
        {
            if (value[0] == c) 
            {
                return true;
            }
        }
        return false;
    }

    /// <summary>
    /// Maxs the positive or minus one.
    /// </summary>
    /// <returns>The positive or minus one.</returns>
    /// <param name="val1">Val1.</param>
    /// <param name="val2">Val2.</param>
    private static int MaxPositiveOrMinusOne(int val1, int val2)
    {
        if (val1 < 0 && val2 < 0)
        {
            return -1;
        }
        return Math.Max(val1,val2: val2);
    } 
```

[这里有几个单元测试](https://gitlab.com/dzmitry-lahoda/clr/blob/master/bcl/extensions/PathExtensionsTests.cs)

# r - 在 Hexagon Binning (ggplot2) 中同时使用颜色和大小属性

> ID：14839702
> 
> 赞同：18
> 
> 时间：2013-02-12T18:54:36.853
> 
> 标签：r, ggplot2, data-visualization

我希望构建一些图表来展示一些NBA球员和球队的投篮倾向/效率。我想按如下方式格式化六边形：大小将代表拍摄次数，颜色将代表该位置的相对效率（点数/尝试）。这是我正在寻找的[一个很好的例子，由 Kirk Goldsberry 创建：](http://courtvisionanalytics.com/wp-content/uploads/2012/07/RayAllen2012.jpg)

![雷·艾伦，柯克·戈德斯伯里](../Images/310a51a3e341e4765d59ed9bcf612925.png)

我已经能够使用`hexbins`并`hexTapply`达到接近预期结果的效果，但形状是圆形。这是我的代码（包括示例数据）：

```
library(hexbin); library(ggplot2)
df <- read.table(text="xCoord yCoord   pts
11.4     14.9     2
2.6       1.1      0
4.8       4.1      2
-14.4    8.2      2
4.2       0.3      0
0.4       0.0     2
-23.2   -1.1      3", header=TRUE)
h <- hexbin (x=df$xCoord, y = df$yCoord, IDs = TRUE, xbins=50)
pts.binned <- hexTapply (h, df$pts, FUN=mean)

df.binned <- data.frame (xCoord  = h@xcm, 
          yCoord  = h@ycm, FGA = h@count, pts = pts.binned)

chart.player <- ggplot (df.binned, aes (x =xCoord , 
                  y =yCoord , col = pts, size = FGA)) + coord_fixed() + 
geom_point()  + scale_colour_gradient("Points/Attempt", low = "green", high="red") 
```

另一种考虑它的方法是`plot(h, style="lattice")`通过 pts/attempt 为六边形着色——但我也不知道该怎么做。

有没有办法用六边形而不是圆形来获得这个图表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T04:46:11.493

首先感谢您提出这个问题并以极大的想象力分享这个情节！

这里尝试使用`lattice`包。主要是我实现了你的想法：通过pts/attempt“为plot(h, style="lattice")中的六边形着色。使用lattice的原因还在于你可以使用`grid`lattice面板函数中的函数（绘制例如地面细节）

我生成一些数据

```
dat <- data.frame(
  xCoord = round(runif(1000,-30,30),2),
  yCoord = round(runif(1000,-2,30),2),
  pts = sample(c(0,2,3),100,rep=T))
#dat$pts[dat$xCoord <0 & dat$yCoord] <- 3 
```

这里的情节：

```
 xyplot(yCoord~xCoord,data =dat , panel = function(x,y,...)
   {
     hbin<-hexbin(dat$xCoord,dat$yCoord,xbins=50,IDs=TRUE)
     mtrans<-hexTapply(hbin,dat$pts,sum,na.rm=TRUE)
     cols <- rainbow( 4,alpha=0.5)
     grid.hexagons(hbin, style='lattice',
                   ,minarea=0.5,maxarea=5,colorcut=c(0,.6,1),
                   border=NA,
                   pen=cols[mtrans+1])
     ## Now you can get fun to draw the ground here
     ## something like...
     ## grid.circle(gp=gpar(fill=NA))
   }) 
```

![在此处输入图像描述](../Images/75147dc8c49a0271f7d4a2e11f3b3dc4.png)

**编辑**使用 OP 真实[数据](http://dl.dropbox.com/u/55588895/shot%20chart%20sample.csv)。我明白了这个情节。你需要使用`minarea`和``maxarea `argument to define overlapping regions. I add also an image as abckground using`grid.raster`。我没有情节技巧，所以我从他的网中选择一个，但你可以使用这种技术来添加一个地面。我相信你可以做一个更好的形象。

```
library(lattice)
library(hexbin)
library(png)
xyplot(locationY~locationX,data =dat , panel = function(x,y,...)
{
    ## imgae bakground
    m <- readPNG('basket.png')
    rimg <- as.raster(m)
    grid.raster(rimg, x=0, y=61.5, just="top", width=50,
              default.units = "native")
    panel.fill(col=rgb(1,1,1,alpha=0.8))

    hbin<-hexbin(dat$locationX,dat$locationY,xbins=50,IDs=TRUE)
    mtrans<-hexTapply(hbin,dat$Points,sum,na.rm=TRUE)
    cols <- rainbow(4)
    grid.hexagons(hbin, style='lattice',
                  ,minarea=0.1,maxarea=50,colorcut=c(0,.6,1),
                  border=NA,
                  pen=cols[mtrans+1])
}) 
```

![在此处输入图像描述](../Images/584f42989d94c6fc90d7974d7a403249.png)

# sql - 按分组运行总和

> ID：14839707
> 
> 赞同：0
> 
> 时间：2013-02-12T18:55:00.197
> 
> 标签：sql, oracle, sum

我有这个查询

```
SELECT  NAME, OTHER_NAME, COUNT(NAME)
FROM ETHNICITY
GROUP BY NAME,OTHER_NAME 
```

我想在该列上`other_name`或`name`该列中添加一个运行总和。

例如，如果有 3x 非裔美国人和 2x name= "other" 和 other_name = "jewish" 我想给它 3 和 2 作为计数并在遍历时将它们相加

有什么想法可以增加它以添加它吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:59:39.763

我更喜欢使用子查询来做到这一点：

```
select t.name, t.other_name, t.cnt,
       sum(cnt) over (order by name) as cumecnt
from (SELECT  NAME, OTHER_NAME, COUNT(NAME) as cnt
      FROM ETHNICITY
      GROUP BY NAME,OTHER_NAME
     ) t 
```

这假设您需要按`name`.

分析函数中的 order by 进行累积和。这是标准语法，Postgres 和 SQL Server 2012 也支持。

以下可能也有效

```
select name, other_name, count(name) as cnt,
       sum(count(name)) over (order by name)
from ethnicity
group by name, other_name 
```

我发现这更难阅读（`sum(count())`有点刺耳）并且可能更容易出错。我没有在 Oracle 上尝试过这种语法；它在 SQL Server 2012 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:05:32.120

`sum() ... over()`在 Oracle 中，可以使用窗口函数轻松完成运行总和：

```
select  name
,       other_name
,       name_count
,       sum(name_count) over(
            order by name, other_name) as running
from    (
        select  name
        ,       other_name
        ,       count(name) as name_count
        from    ethnicity
        group by 
                name
        ,       other_name
        order by
                name
        ,       other_name
        ) subqueryalias 
```

[SQL Fiddle 上的示例](http://sqlfiddle.com/#!4/500aa/5/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:01:25.587

查看分组集，让您汇总总数。

虽然不确定这是你所追求的......

```
SELECT  NAME, OTHER_NAME, COUNT(NAME)
FROM ETHNICITY
GROUP BY GROUPING SETS ((NAME,OTHER_NAME), (Name), ()) 
```

抱歉 ID10T 错误...分组集不需要第二个聚合，计数将自行完成：

所以这个数据：

```
Name   Other_Name
A       B
A       C
A       D
B       E
B       F
B       G
C       H
C       I
C       J 
```

结果是

```
Name   Other_Name   CNT(Name)
A      B           1
A      C           1
A      D           1
A                  3
B      E           1
B      F           1
B      G           1
B                  3
C      H           1
C      I           1
C      J           1
C                  3
                   9 
```

# java - 找不到@Autowired bean

> ID：14839708
> 
> 赞同：0
> 
> 时间：2013-02-12T18:55:04.717
> 
> 标签：java, spring, unit-testing, jakarta-ee, autowired

我在尝试将资源依赖项注入我的单元测试时遇到错误。我的方法是编写一个 TestConfig.java 来替换用于管理 bean 连接的生产的 applicationContext.xml。这样我就可以使用内存数据库运行它并仅测试组件。

测试配置.java

```
@Configuration
@EnableTransactionManagement
public class TestConfig {
@Bean
public DataSource dataSource() {
    DriverManagerDataSource ds = new DriverManagerDataSource();
    ds.setDriverClassName("org.hsqldb.jdbcDriver");
    ds.setUrl("jdbc:hsqldb:mem:testdb");
    ds.setUsername("sa");
    ds.setPassword("");
    return ds;

}

@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean(){

    LocalContainerEntityManagerFactoryBean lcemfb
        = new LocalContainerEntityManagerFactoryBean();

    lcemfb.setDataSource(this.dataSource());
    lcemfb.setPackagesToScan(new String[] {"com.dao","com.data"});
    lcemfb.setPersistenceUnitName("MyTestPU");

    HibernateJpaVendorAdapter va = new HibernateJpaVendorAdapter();
    lcemfb.setJpaVendorAdapter(va);

    Properties ps = new Properties();
    ps.put("hibernate.dialect", "org.hibernate.dialect.HSQLDialect");
    ps.put("hibernate.hbm2ddl.auto", "create");
    lcemfb.setJpaProperties(ps);

    lcemfb.afterPropertiesSet();

    return lcemfb;

}

@Bean
public PlatformTransactionManager transactionManager() {
    JpaTransactionManager tm = new JpaTransactionManager();
    tm.setEntityManagerFactory(this.entityManagerFactoryBean().getObject());

    return tm;
}

@Bean
public PersistenceExceptionTranslationPostProcessor exceptionTranslation(){
    return new PersistenceExceptionTranslationPostProcessor();
}

@Bean
public AutowiredAnnotationBeanPostProcessor autowiredAnnotationBeanPostProcessor()
{
    return new AutowiredAnnotationBeanPostProcessor();
}

} 
```

ProductsDaoTest.java

```
@ContextConfiguration(classes = { TestConfig.class })
@RunWith(SpringJUnit4ClassRunner.class)
public class ProductsDaoTest {

 @Resource(name="com.dao.ProductsDao")
 private ProductsDao testDao;

 @Test
 public void testSaveProduct() {

     Product productA = new Product();
     testDao.save(productA);

     Set<Product> products = testDao.getAllProducts();

     assertNotNull(products);
 }   
} 
```

错误是 Error created bean with name 'com.dao.ProductsDaoTest': Injection of resource dependencies failed

所以它找不到ProductDao Bean，它是一个带有@Autowired sessionFactory 的@Repository。

所以我的猜测是，因为我没有使用 xml 命名 bean，所以它找不到它，尽管我认为它应该自动从 setPackagesToScan() 中获取它。那么有没有办法手动插入 Bean 映射以便找到呢？

更一般地说，这是测试 Spring DAO 配置的合理方法吗？

问候，伊恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:07:28.333

我认为您试图在 @Resource 注释中使用错误的 DAO bean 名称。您是否使用 @Qualifier 明确指定 ProductsDao bean 的名称？如果不是，那么我记得默认情况下 bean 的名称将是 productsDao。所以你应该像这样注入你的DAO：

```
@Resource(name="productsDao")
private ProductsDao testDao; 
```

如果您只有一个 ProductDAO 实现，那么只需编写：

```
@Autowired
private ProductsDao testDao; 
```

或者

```
@Inject
private ProductsDao testDao; 
```

如果您想为 DAO 指定特定名称，请使用下一个构造：

```
@Respository
@Qualifier(name="specificName")
public class ProductDAO... 
```

**编辑：**

正如 Boris 所指出的，您还应该指定要扫描哪个包以查找已定义的 bean（使用 @Component、@Service、@Repository 注释的类...）。为此，您应该将 @ComponentScan 注释添加到您的配置类定义中。

```
@Configuration
@EnableTransactionManagement
@ComponentScan(basePackages = {"package_to_scan"})
public class TestConfig {...} 
```

# iis - Nginx 反向代理 - 透传基本认证

> ID：14839712
> 
> 赞同：11
> 
> 时间：2013-02-12T18:55:21.607
> 
> 标签：iis, nginx, basic-authentication, reverse-proxy

我正在尝试将 nginx 设置为在几个使用基本身份验证进行身份验证的 IIS Web 服务器前面的反向 rpoxy 服务器。

（注意 - 这与[使用密码文件提供身份验证的 nginx](http://www.howtoforge.com/basic-http-authentication-with-nginx)不同- 它应该只是在浏览器/服务器之间编排所有内容）

它的工作方式关闭 - 但页面上的每个资源（图像/css等）都会反复提示进行身份验证。

```
upstream my_iis_server {
      server 192.168.1.10;
}

server {
    listen       1.1.1.1:80;
    server_name  www.example.com;  

    ## send request back to my iis server ##
    location / {
     proxy_pass  http://my_iis_server;
     proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
     proxy_http_version      1.1;
     proxy_set_header        Connection "";
     proxy_pass_header       Authorization;     
     proxy_redirect off;
     proxy_buffering off;
     proxy_set_header        Host            $host;
     proxy_set_header        X-Real-IP       $remote_addr;
     proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-31T19:06:50.910

这个确切的情况让我花了很长时间才弄清楚，但我猜 OSS 就是这样。这篇文章已经有一年了，所以也许原来的发帖人想通了，还是放弃了？

无论如何，至少对我来说问题是由几件事引起的：

1.  IIS 期望域字符串与其发送到 Nginx 的字符串相同，但是如果您的 Nginx server_name 正在侦听的地址与上游地址不同，则服务器端 WWW-Authenticate 不会是 IIS 所期望的并忽略它。
2.  内置标头模块不会清除其他 WWW-Authenticate 标头，尤其是有问题的 WWW-Authenticate: Negotiate。使用 headers-more 模块清除旧的标题，并添加你告诉它的任何内容。

在此之后，我终于能够通过 Nginx 推送 Sharepoint 2010。

感谢堆栈溢出。

```
server {
    listen 80;
    server_name your.site.com;

    location / {
            proxy_http_version      1.1;
            proxy_pass_request_headers on;
            proxy_set_header        Host            $host;
            proxy_set_header        X-Real-IP       $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;

            #proxy_pass_header      Authorization; //This didnt work for me
            more_set_input_headers  'Authorization: $http_authorization';

            proxy_set_header  Accept-Encoding  "";

            proxy_pass              https://sharepoint/;
            proxy_redirect          default;
            #This is what worked for me, but you need the headers-more mod
            more_set_headers        -s 401 'WWW-Authenticate: Basic realm="intranet.example.com"';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T00:24:26.457

我在使用 nginx/1.10.3 时也有同样的症状。我有一个受基本身份验证保护的服务，并且 nginx 作为客户端和服务器之间的反向代理。要求是 nginx 将通过授权。

对服务器的第一个请求确实通过了 Authorization 标头。第二个请求只是阻止了这个标头，这意味着客户端每个会话只能发出一个请求。

这在某种程度上与 cookie 有关。如果我清除了浏览器 cookie，则循环重复。客户端能够进行身份验证，但仅针对第一个请求。关闭浏览器也有同样的效果。

我的解决方案是将上游服务器从 https 更改为 http，使用：

```
proxy_pass http://$upstream; 
```

代替：

```
proxy_pass https://$upstream; 
```

# java - Liferay - 创建 PDF 并输出到流

> ID：14839713
> 
> 赞同：1
> 
> 时间：2013-02-12T18:55:21.677
> 
> 标签：java, jsf, liferay

这里有点麻烦。基本前提是我需要点击一个按钮，生成 HTML，创建 PDF，然后放入输出流中进行下载：

```
<ice:commandButton title="Download"
    image="/images/dl.png"
    value="Download"
    action="#{bean.downloadPDF}">        
</ice:commandButton> 
```

* * *

```
public void downloadPDF() throws IOException {

    PD4ML pdf = new PD4ML();
    pdf.setPageSize(PD4Constants.LETTER);
    pdf.setPageInsets(new Insets(0, 0, 0, 0));
    pdf.setHtmlWidth(1000);
    pdf.enableImgSplit(false);
    pdf.generateOutlines(false);

    File pdfFile = new File("tmp.pdf");
    FileOutputStream fos = new FileOutputStream(pdfFile);

    StringReader sr = new StringReader("<p>Testing Download</p>");
    pdf.render(sr, fos);

    FacesContext facesContext = FacesContext.getCurrentInstance();
    PortletResponse portletResponse= (PortletResponse)facesContext.getExternalContext().getResponse();
    ResourceResponse portletResourceResponse = (ResourceResponse) portletResponse;
    portletResourceResponse.setContentType("application/pdf");

    OutputStream out = portletResourceResponse.getPortletOutputStream();
    out.flush();
    facesContext.responseComplete();
} 
```

我遇到的问题是`pdf.render()`，当我尝试根据当前上下文生成响应并转换为`ResourceResponse`：

```
java.lang.ClassCastException: com.liferay.portlet.RenderResponseImpl cannot be cast to javax.portlet.ResourceResponse 
```

获取该文件并将其输出到 Liferay/portlet 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:31:27.960

你得到的例外，`java.lang.ClassCastException: com.liferay.portlet.RenderResponseImpl cannot be cast to javax.portlet.ResourceResponse`听起来你的类路径上有一些类（例如portlet.jar）两次。这通常位于全局类路径中，并且您不得在 Web 应用程序中使用它。

当您遇到异常时，几乎总是这样`subclass cannot be cast to superclass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:35:55.220

尝试在 portlet 中调用 serveResource()。当您点击按钮时，添加 ajax 并调用将提供资源的资源 url。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T20:38:13.587

我建议您查看[jsf2-export-pdf-portlet](http://www.liferay.com/community/liferay-projects/liferay-faces/demos#jsf2-export-pdf-portlet)演示。它使用 JSF 2.x ResourceHandler 以便使用 portlet 生命周期的 RESOURCE_PHASE 返回 PDF。

# plone - 产品中未读取 Zope 页面模板元数据

> ID：14839716
> 
> 赞同：1
> 
> 时间：2013-02-12T18:55:31.690
> 
> 标签：plone, zope

我的应用程序在 Zope 2.12.19 和 Python 2.6.5 上运行。

有一个页面模板文件，文件`pagetemplate.pt`中定义了访问限制`pagetemplate.pt.metadata`。这些访问限制适用于除 Zope 产品中的网页之外的所有网页并正常工作。

该`.metadata`文件的内容如下：

```
[default]
title=

[security]
View=0:Authenticated,Manager,Owner,User
Access contents information=0:Authenticated,Manager,Owner,User 
```

例如，有一个 Zope 产品列出了系统中的所有用户，它使用了上面的页面模板。用户无需登录即可匿名访问此页面，这意味着未读取元数据文件。

`.metadata`但是要访问 Products 之外的任何其他页面，应用程序会强制用户登录。 Products 读取文件是否有问题？

仅供参考 - 我不使用 ZODB ......相反，所有内容（源代码）都在文件系统上。

的内容`configure.zcml`如下。

```
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:five="http://namespaces.zope.org/five"
    xmlns:browser="http://namespaces.zope.org/browser"
    i18n_domain="AMSPermissions">

    <!-- the users manage page -->
    <browser:page
    for="OFS.interfaces.IFolder"
    name="manage-users"
    template="standard_template.pt"
    class=".users.UsersView"
    permission="zope2.View"
    />

    <!-- permissions checker -->
    <browser:page
    for="OFS.interfaces.IFolder"
    name="perm_check"
    class=".permissions.PermissionsCheckerView"
    permission="zope2.View"
    allowed_interface=".interfaces.IPermissionsCheckerView"
    />
</configure>. 
```

此外，以下是产品的示例代码。

```
<html metal:use-macro="context/standard_template/macros/page">
  <metal:block fill-slot="heading">Users Overview</metal:block>
  <metal:block fill-slot="body" tal:define="users view/get_users">
     ---------Some code--------
  </metal:block>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:49:26.663

`.metadata`文件*仅*适用于皮肤对象。对于浏览器视图，您需要在视图的 ZCML 配置中指定权限：

```
<browser:page
    for="*"
    name="somepagename"
    template="pagetemplate.pt"
    permission="zope.View"
    /> 
```

您指定权限；上下文定义了哪些角色拥有哪些权限。

# requirejs - require.js 插件如何相对于 baseURL 调用 parentRequire？

> ID：14839718
> 
> 赞同：0
> 
> 时间：2013-02-12T18:55:36.117
> 
> 标签：requirejs, typescript

我正在使用 require-ts ( [https://github.com/iammerrick/require-ts](https://github.com/iammerrick/require-ts) ) 导入带有 require.js 的打字稿文件。我需要导入几个 .d.ts 文件以满足编译器的要求。当我在 require.config 中指定声明时，它们是相对于导入它们的模块进行解析的。这是因为 require-ts 在声明中调用了 parentRequire。但是，我想相对于我的 baseURL 全局解析声明，因为定义与特定模块无关。做这个的最好方式是什么？如果需要的话，我完全可以修改require-ts。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:22:49.417

根据模块 ID/资源 URI 解析规则，资源 ID 不会相对于当前容器/模块进行解析，除非该资源 ID 以“.”开头 字符。（“./ *”或“../* ”）

我不知道关于 ID 规范化/解析的正式 AMD / RequireJS 文章，但以下两个可能会有所帮助：

[模块 ID 解析/归一化](http://livedocs.dojotoolkit.org/loader/amd#normalizing-module-identifiers)

[`define`声明的通用语言](https://github.com/amdjs/amdjs-api/wiki/AMD)

换句话说，“停止使用`.`作为资源的起始字符，资源应该针对 AMD 树根进行解析”。

# c++ - 我在正确的轨道上吗？出纳程序 C++

> ID：14839725
> 
> 赞同：0
> 
> 时间：2013-02-12T18:55:58.167
> 
> 标签：c++

我是 C++ 新手，想知道我是否走在正确的轨道上？我对此有点困惑，但希望可能对我遗漏/有错的事情提供一些有用的提示……我知道它还没有完全完成，我仍然需要对美元、季度进行细分…… ETC

问题：收银机使用自动投币机帮助找零。我们假设给店员钱来支付购买费用。对于找零，店员将任何纸币归还给顾客，并指示投币机分发少于 1 美元的找零。在本练习中，您将模拟职员和机器的动作。

在收银台，我们需要访问购买价格和付款。变化，即支付价格和购买价格之间的差额，是一个实数。整个部分代表美元的变化，小数部分是美分的变化，以四分之一、一角、镍和便士的形式返回。例如，支付 10 美元来支付 3.08 美元的购买，所需的零钱为 6.92 美元。店员分发 6 美元，投币机为 92 美分分配 3 个 25 美分、1 个硬币、1 个镍和 2 个便士。

92 = 3(25) + 1(10) + 1(5) + 2

使用实数对象标识购买价格（价格）、支付金额（付款）和零钱（change）。主程序计算零钱的数量（coinChange）并将其划分为美元（dollars）、四分之一（quarts）、一角钱（dimes）、镍币（nickels）和便士（pennies）。

您必须为季度 (quarters)、角钱 (dimes)、镍币 (nickels) 和便士 (pennies) 声明常量。您必须在计算中使用复合运算符。您必须使用 setreal(w,p) 和 setw(n) 作为输出。

到目前为止我做了什么：

```
// Me
// A BRIEF PROGRAM DESCRIPTION FOR CHAPTER 2, HOMEWORK 4

// COMMENT THE PREPROCESSOR 
#include <iostream.h>

// COMMENT THE PREPROCESSOR STATEMENT
#include "textlib.h"

int main( )
{

// COMMENT THE CONSTANTS
const int QUARTER_AMOUNT = 25;
const int DIME_AMOUNT = 10;

// COMMENT THE OBJECTS
double price;
double payment;
double change;

int numofDollars;
int numofQuarters;
int numofDimes;
int numofNickles;
int numofPennies;

int coinChange;

cout << "Enter the purchase total: ";
cin >> price;
cout << "Enter the payment: $";
cin >> payment;

// COMMENT THE CALCULATION
change =  payment - price;
numofDollars = int(change);
coinChange = (int((change / numofDollars) * 100));
numofQuarters = coinChange / 25;
coinChange = coinChange / (numofQuarters * 25);
numofDimes = coinChange / 10;
numofNickles = coinChange / 5;
numofPennies = coinChange / 1;

// OUTPUT THE INFORMATION

return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:03:21.440

是的，你在正确的轨道上。你的总体结构是合理的。这些类型的家庭作业几乎总是有这样的结构：

```
int main () {
  // read in the data
  ...

  // Do the math
  ...

  // Write out the data
  ...
} 
```

你确实有一些数学错误。试着用铅笔和纸单步执行代码，假装**你**是计算机。此外，尝试使用调试器单步执行代码，检查每一行之后的变量。将实际发生的事情与您的预期进行比较。

# .net - 为什么 XmlSchemaSet 明确地将 targetNamespace 设置为变色龙模式

> ID：14839726
> 
> 赞同：2
> 
> 时间：2013-02-12T18:56:05.497
> 
> 标签：.net, xsd, system.xml, xmlschemaset

例如，我有 2 个 Xml 模式：

a.xsd：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="test" targetNamespace="test">
    <xsd:include schemaLocation="b.xsd" />
</xsd:schema>` 
```

b.xsd：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:simpleType name="testType">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="test"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:element name="test" type="testType"/>
</xsd:schema> 
```

第二个模式没有*targetNamespace*并用作变色龙模式。

我正在尝试使用 XmlSchemaSet 预加载这些模式：

```
XmlSchemaSet schemaSet = new XmlSchemaSet();
schemaSet.Add(null, @"a.xsd");

foreach (XmlSchema schema in schemaSet.Schemas())  // foreach is used to simplify the example
{
    Console.WriteLine("Target namespace: "schema.TargetNamespace);  // "Target namespace: test"
    XmlSchemaInclude include = (XmlSchemaInclude)schema.Includes[0];
    Console.WriteLine("Include target namespace: " + include.Schema.TargetNamespace); // "Include target namespace: test"
} 
```

但是在我这样做之后，两个模式都有“测试”目标命名空间。我希望实例化的模式对象应该等于源模式，但模式“b.xsd”并非如此。为什么它的行为如此，有什么方法可以禁用这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:11:52.223

当您从 a.xsd 中包含 b.xsd 时，您实际上是在说您希望 b.xsd 具有与 a.xsd 相同的目标命名空间。术语*chameleon include*表示实现这一点的过程，给定一个模式文档（如 b.xsd）没有目标命名空间的规范。

如果您希望 b.xsd 中声明的`test`元素和`testType`类型不在 namespace 中`test`，那么您不希望将 b.xsd 用作变色龙，并且不应将 b.xsd 包含在 a.xsd 中。您可能希望改用 xs:import。

但也许我不明白你在追求什么。

# php - codeigniter .htaccess 代码未加载 css、图像

> ID：14839727
> 
> 赞同：0
> 
> 时间：2013-02-12T18:56:06.590
> 
> 标签：php, codeigniter

我在他们的网站上使用 codeigniter 提供的 htaccess。一切正常文件，但是当我`/`在 url 之后使用 a 时，一切都搞砸了。说我的域名`www.example.com/mycontroller`可以正常工作，但`www.example.com/mycontroller/`会让每件事都搞砸，没有风格没有形象等等。

我通过`base_url()`在样式表和图像等的链接前面使用解决了这个问题。但是没有其他方法可以让我不必遍历每个图像和链接来添加`base_url()`。

.htaccess 文件包含

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|images|robots\.txt)
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:57:36.310

您应该允许文件和文件夹通过

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond $1 !^(index\.php|css|images|robots\.txt)
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

是的，您应该添加`base_url`，否则您的应用程序的可移植性较差，维护将成为一场噩梦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:58:18.737

尝试检查请求是否指向文件或目录：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|css|images|robots\.txt)
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

如果您没有一些非常好的理由，您可以相对于图像或 css 文件的基本目录进行链接。

# jquery - 使用 jquery 将 HTML 附加到节点

> ID：14839728
> 
> 赞同：1
> 
> 时间：2013-02-12T18:56:08.860
> 
> 标签：jquery

下面的 HTML 显示同一 DATE 类中的日期和时间。这不好，因为我想独立地设计它们。但我不能按原样，所以我认为可以注入 jquery 来拆分它。

```
<div class="container">
    <a class="title" href="http://www.example.com">Headlines Goes Here</a>
    <div class="date">Jan 29, 2013 12:05:00 PM EST</div>
    <div class="post">
        <p>Content Goes Here</p>
    </div>
</div> 
```

我希望在有人的帮助下，这可以通过在 DATE 类中附加来解决，因此输出如下所示：

```
<div class="container">
    <a class="title" href="http://www.example.com">Headlines Goes Here</a>
    <div class="date">Jan 29, 2013</div><div class="time">12:05:00 PM EST</div>
    <div class="post">
        <p>Content Goes Here</p>
    </div>
</div> 
```

到目前为止，这是我的 JQUERY，我将其设置为红色，因此我可以看到物理变化，有人可以帮助解决这个问题吗？我的 jquery 显然不正确。

```
$(window).load(function(){
         if ($(".date:contains(', 2013')").length)
             this.parentNode.append(this).html("</div><div class=time style=color:red>");
}); 
```

这是我的小提琴：http: [//jsfiddle.net/3ZWkQ/](http://jsfiddle.net/3ZWkQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:15:29.247

理想情况下，您希望在服务器端执行此操作，以避免更改实际文档结构。

但如果这是不可能的，你可以通过以下方式做到这一点：

```
$(function() {
  $(".date").after(function() {
    var val = $(this).text();
    var justDate = val.substring(0,12);
    $(this).text(justDate);
    var parsedTime = val.substring(12);
    return "<div class=time >" + parsedTime + "</div>";
  });
}); 
```

**注意**：这里我只是使用 substring 进行拆分，但这显然不是正确的实现，你最好解析为 Date 并使用 jquery 插件、原型等格式化部分。

这是小提琴：http: [//jsfiddle.net/MS3W6/](http://jsfiddle.net/MS3W6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:04:08.100

更改此部分：

```
this.parentNode.append(this).html("</div><div class=time style=color:red>") 
```

到：

```
$(this.parentNode).append("<div class=time style=color:red></div>") 
```

# r - 使用插入符号时用于 rf (randomForest) 的 createGrid 出错

> ID：14839730
> 
> 赞同：1
> 
> 时间：2013-02-12T18:56:10.917
> 
> 标签：r, random-forest

当我尝试创建一个参数网格以使用[插入符号](http://caret.r-forge.r-project.org/)进行训练时，我得到了各种错误：

```
> my_grid <- createGrid("rf")
Error in if (p <= len) { : argument is of length zero

> my_grid <- createGrid("rf", 4)
Error in if (p <= len) { : argument is of length zero

> my_grid <- createGrid("rf", len=4)                                        
Error in if (p <= len) { : argument is of length zero 
```

createGrid 的文档说：

```
This function creates a data frame that contains a grid of
     complexity parameters specific methods.
Usage:
       createGrid(method, len = 3, data = NULL)
Arguments:
  method: a string specifying which classification model to use. See
          'train' for a full list.
     len: an integer specifying the number of points on the grid for
          each tuning parameter.
    data: the training data (only needed in the case where the 'method'
          is 'cforest', 'earth', 'bagEarth', 'fda', 'bagFDA', 'rpart',
          'svmRadial', 'pam', 'lars2', 'rf' or 'pls'). The outcome
          should be in a column called '.outcome'. 
```

并给出以下正确工作的示例：

```
 createGrid("rda", 4)
 createGrid("lm")
 createGrid("nnet")

 ## data needed for SVM with RBF:
 ## Not run:

 tmp <- iris
 names(tmp)[5] <- ".outcome"
 head(tmp)
 createGrid("svmRadial", data = tmp, len = 4)
 ## End(Not run) 
```

有了这个，我做错了什么？

### 跟进问题：

`len` as a argument to`createGrid`和`tuneLength`in the argument for之间有什么联系`train`？可以`len`和`tuneLength`它们一起使用吗？他们是什么关系？

### 其他有用的线程：

如果有帮助，这里有一个线程描述了如何使用`createGrid`in `train`: `caret`caret [::train: 指定模型生成参数](https://stackoverflow.com/questions/10498477/carettrain-specify-model-generation-parameters)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:19:57.770

您从示例中提取的代码对我来说很好（并注意到它解决了您在 Rhelp 上发布时存在的问题）：

```
tmp <- iris
 names(tmp)[5] <- ".outcome"
 head(tmp)
 createGrid("svmRadial", data = tmp, len = 4)
#-------
     .sigma   .C
1 0.7500934 0.25
2 0.7500934 0.50
3 0.7500934 1.00
4 0.7500934 2.00 
```

编辑：

```
>  createGrid("rf", data = tmp, len = 4)
randomForest 4.6-7
Type rfNews() to see new features/changes/bug fixes.

Attaching package: ‘randomForest’

The following object(s) are masked from ‘package:Hmisc’:

    combine

note: only 3 unique complexity parameters in default grid. Truncating the grid to 3 .

  .mtry
1     2
2     3
3     4 
```

我再说一遍：还有什么问题？

# jquery - 滚动时 HTML 文本颜色变化

> ID：14839731
> 
> 赞同：0
> 
> 时间：2013-02-12T18:56:11.013
> 
> 标签：jquery, html, css

我知道标题具有误导性，但我没有更好的方法为我的问题添加标题：

我现在偶然发现了几个网站，在水平视差类型的单页布局中使用 HTML 5 和 CSS 3.0，在图像上加上标题，比如说，白色背景图像上的黑色，当你滚动到对了，黑色的文字逐渐变浅以适应新的背景出现，比如说黑色背景上的白色文字。

这似乎是一种增长趋势，特别是在 Windows 应用商店应用程序中，我正在尝试为网站复制类似的东西。

到目前为止，我使用 jQuery 对文本的可能坐标进行硬编码，当滚动位置达到右侧位置的大约 25% 时，开始使用 SVG 更改颜色，但这似乎过于复杂。

网上有例子吗？我试过搜索 HTML / CSS 文本淡入淡出，但这并没有真正返回任何具体的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:59:05.440

您可以考虑阅读[CSS-Tricks](http://css-tricks.com/)上的[Fancy Scrolling Sites](http://css-tricks.com/fancy-scrolling-sites/)。

> 在过去一年左右的时间里，当您向下滚动时，有足够多的网站会做一些花哨的事情，这是一种趋势。我想我会写博客，你知道，为了历史。

以下是您可以使用 jQuery 观察滚动和执行操作的方法：

```
$(window).scroll(function(eventObject) {
    // do stuff! You can find out about how far
    // the window has scrolled via the eventObject.
}); 
```

使用滚动位置，你可以改变颜色，做任何你能用 jQuery 做的事情。:)

# java - 在消费者端处理失败的调用（在生产者/消费者模型中）

> ID：14839733
> 
> 赞同：0
> 
> 时间：2013-02-12T18:56:17.310
> 
> 标签：java, asynchronous, jms, publish-subscribe, tibco

让我试着解释一下情况：

我们将要合并一个消息传递系统，它可以是队列或主题（JMS 术语）。

**1）Producer/Publisher：**有一个服务A。A产生消息并写入一个Queue/Topic

**2）Consumer/Subscriber：**有一个服务B。B从Queue/Topic异步读取消息。*B 然后调用 Web 服务并将消息传递给它。Web 服务需要花费大量时间来处理消息。（此动作不需要实时处理。）*

消息代理是 Tibco

我的意图是：不要错过处理来自 A 的任何消息。在稍后的时间点重新处理它，以防处理第一次失败（可能作为批处理）。

**问题**：

我正在考虑在进行网络服务调用之前将消息写入数据库。如果调用成功，我会将消息标记为已处理。否则失败。后来，在一个 cron 作业中，我将处理所有最初失败的请求。

写入数据库是执行此操作的典型方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:12:10.443

粗略地说，这就是技术，尽管您可以使用开箱即用的解决方案。典型的 ESB 解决方案支持可靠的消息传递。也可以看看[MuleESB](http://www.mulesoft.org/)或[Apache ActiveMQ](http://activemq.apache.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:31:14.647

利用您已有的 EMS 平台（示例 1）而不是构建自定义解决方案（示例 2）可能会很有趣。

但这一切都取决于实现语言：

示例 1 - EMS 是“守护者”：如果我要使用 TIBCO BusinessWorks 解决此类问题，我会使用 BW 的“JMS 事务”功能。通过将 EMS 读取和 WS 调用包含在同一个“组”中，您要求它们都被应用，或者根本不应用。如果由于某种原因呼叫失败，消息将返回给 EMS。此解决方案有两个问题：您可能没有 BW，并且第一个失败的操作会阻塞批处理的所有其余部分（这可能是所需的行为）。仅供参考，我知道可以在“纯 java”中使用此类功能，但我从未尝试过：[http ://www.javaworld.com/javaworld/jw-02-2002/jw-0315-jms.html](http://www.javaworld.com/javaworld/jw-02-2002/jw-0315-jms.html)

示例 2 - 数据库是“守护者”：如果您使用“数据库”方法，您的队列/主题客户会不断地将插入数据放入数据库中，并且所有记录都代表要执行的任务。这感觉很像每个集成中间件旨在简化的简单“映射引擎”问题。您可以使用任何东西来解决这个问题，从自定义 java 代码和多个线程（DB 插入器、WS 作业处理程序等）到 EAI 中间件（如 BW）甚至 BPM 引擎（TIBCO 有很多解决方案）当然，有也是其他供应商...如您所知，EMS 是 JMS 标准实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:13:48.440

我建议使用内置的 EMS (& JMS) 功能，因为“保证交付”是它的目的;) - 根本不需要数据库...

您需要知道，第一个决定将是：

*   你需要按顺序交货吗？（那么应该只使用 1 个 JMS Session 和 Client Ack 模式）
*   您想要重试的频率和重复次数？（不要使该 Web 服务无法处理的消息无限循环）。

无论您使用哪种客户端（TIBCO BW 或例如 MDB 中的 Java onMessage()），这都是独立的。

对于“按顺序”交付：使舒尔只有 1 个 JMS 会话处理消息，并且它使用客户端确认模式。成功处理消息后，您需要通过调用 JMS API“acknowledge()”方法或在 TIBCO BW 中通过执行“commit”活动来确认消息。

如果发生错误，您不执行该方法的确认，因此消息将被放回队列中以进行重新传递（您可以在 JMS 标头中看到它被重新传递了多少次）。

如果顺序不重要并且您需要一些客户端线程来处理消息，EMS 的显式客户端确认模式也使您能够执行相同的操作。

用于控制消息处理的频率：

*   **EMS 队列的最大重新传递**属性（例如，您可以在 x 重新传递之后将消息放入死信队列中，以免阻止其他消息）
*   **重新交付延迟**在重新交付之间放置一个“暂停”。如果 Web 服务需要在崩溃后恢复并且不会通过重新传递以高间隔一次又一次地被同一消息冲击，这很有用。

希望有帮助

干杯赛布

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T19:06:35.740

由于您有一个失败的回调，您可以重新排队`Message`并让您`Consumer/Subscriber`拿起它并重试。如果由于 Web 服务中的某些问题而失败，并且您想在重试之前等待 X 时间，那么您可以安排 Web 服务在以后为特定的日期调用`Message`（查看[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)）或按照您的操作描述并使用带有一些数据库条目的 cron 作业。

如果您只希望它在每条消息中再试一次，则使用内部计数器`Message`或在 a`Map<Message, Integer>`中作为每个 的计数器`Message`。

# android - 无法恢复活动

> ID：14839734
> 
> 赞同：7
> 
> 时间：2013-02-12T18:56:22.563
> 
> 标签：android, android-listview, nullpointerexception, simplecursoradapter, onresume

我是新手，并试图让我`ListView`的 SQLite 数据库更新后刷新。修改方法后，我没有收到编译错误`onResume()`。我正在使用 a`SimpleCursorAdapter`重新查询，但它不起作用。收到的错误来自 logcat，如下所示。请提供建议……示例最有帮助。

日志猫：

```
 02-19 21:31:49.933: E/AndroidRuntime(714): java.lang.RuntimeException: Unable to resume activity {com.loginplus.home/com.loginplus.home.LoginList}: java.lang.NullPointerException
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2444)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.os.Handler.dispatchMessage(Handler.java:99)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.os.Looper.loop(Looper.java:137)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread.main(ActivityThread.java:4424)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at java.lang.reflect.Method.invokeNative(Native Method)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at java.lang.reflect.Method.invoke(Method.java:511)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at dalvik.system.NativeStart.main(Native Method)
  02-19 21:31:49.933: E/AndroidRuntime(714): Caused by: java.lang.NullPointerException
  02-19 21:31:49.933: E/AndroidRuntime(714):    at com.loginplus.home.LoginList.onResume(LoginList.java:101)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.Activity.performResume(Activity.java:4539)
  02-19 21:31:49.933: E/AndroidRuntime(714):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434) 
```

活动：

```
 public class LoginList extends Activity implements OnClickListener,    OnItemClickListener {

private ListView loginList;
private Button webLogin;

private ListAdapter loginListAdapter;

private ArrayList<LoginDetails> loginArrayList;

List<String> arrayList = new ArrayList<String>();

@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    arrayList = populateList();
    loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    setContentView(R.layout.login_listview);

    loginList = (ListView)
   findViewById(R.id.loginlist);
    loginList.setOnItemClickListener(this);

    webLogin = (Button)
   findViewById(R.id.button3);
    webLogin.setOnClickListener(this);

}

@Override
public void onClick (View v) {
    Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
    startActivity(webLoginIntent);

}

public List<String> populateList (){

    List<String> webNameList = new ArrayList<String>();

    dataStore openHelperClass = new dataStore (this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()){
    String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
    String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
    String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
    String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
    String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

    LoginDetails lpDetails = new LoginDetails();

        lpDetails.setsName(sName);
        lpDetails.setwUrl(wUrl);
        lpDetails.setuName(uName);
        lpDetails.setpWord(pWord);
        lpDetails.setlNotes(lNotes);

        loginArrayList.add(lpDetails);
        webNameList.add(sName);
}

sqliteDatabase.close();
return webNameList;
}

@Override
protected void onResume() {
    super.onResume();

    loginArrayList.clear();

    arrayList.clear();

    arrayList = populateList();

    dataStore refreshHelper = new dataStore (this);
    SQLiteDatabase sqliteDatabase = refreshHelper.getWritableDatabase();
    Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);
    String[]columns = new String[] { dataStore.COLUMN_NAME_SITE, dataStore.COLUMN_NAME_ADDRESS, dataStore.COLUMN_NAME_USERNAME, dataStore.COLUMN_NAME_PASSWORD, dataStore.COLUMN_NAME_NOTES };
    int[] to = new int[]{R.id.rusName, R.id.ruwUrl, R.id.ruuName, R.id.rupWord, R.id.ruNotes};
    SimpleCursorAdapter loginListAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, columns, to);
    loginListAdapter.notifyDataSetChanged();

}

@Override
public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
    Toast.makeText(getApplicationContext(), "Selected ID :" + arg2, Toast.LENGTH_SHORT).show();

    Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

    LoginDetails clickedObject = loginArrayList.get(arg2);

        Bundle loginBundle = new Bundle();
    loginBundle.putString("clickedWebSite",clickedObject.getsName());
    loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
    loginBundle.putString("clickedUserName",clickedObject.getuName());
    loginBundle.putString("clickedPassWord",clickedObject.getpWord());
    loginBundle.putString("clickedNotes",clickedObject.getlNotes());

    updateDeleteLoginInfo.putExtras(loginBundle);

    startActivityForResult(updateDeleteLoginInfo, 0);       
       }    
          } 
```

RennoDiniro 编辑结果：

日志猫：

```
 02-21 23:40:18.419: E/AndroidRuntime(705): FATAL EXCEPTION: main
       02-21 23:40:18.419: E/AndroidRuntime(705): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.loginplus.home/com.loginplus.home.LoginList}: java.lang.NullPointerException
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.os.Handler.dispatchMessage(Handler.java:99)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.os.Looper.loop(Looper.java:137)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.ActivityThread.main(ActivityThread.java:4424)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at java.lang.reflect.Method.invokeNative(Native Method)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at java.lang.reflect.Method.invoke(Method.java:511)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at dalvik.system.NativeStart.main(Native Method)
       02-21 23:40:18.419: E/AndroidRuntime(705): Caused by: java.lang.NullPointerException
       02-21 23:40:18.419: E/AndroidRuntime(705):   at com.loginplus.home.LoginList.populateList(LoginList.java:88)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at com.loginplus.home.LoginList.onCreate(LoginList.java:37)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.Activity.performCreate(Activity.java:4465)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
       02-21 23:40:18.419: E/AndroidRuntime(705):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

活动课：

```
 public class LoginList extends Activity implements OnClickListener,    OnItemClickListener {

      private ListView loginList;
      private Button webLogin;

      private ListAdapter loginListAdapter;

      private ArrayList<LoginDetails> loginArrayList;

      List<String> arrayList = new ArrayList<String>();

      @Override 
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      loginListAdapter = new ArrayAdapter<String>(this,   android.R.layout.simple_list_item_1, populateList());
      arrayList = populateList(); 
      setContentView(R.layout.login_listview);

      loginList = (ListView)
      findViewById(R.id.loginlist);
      loginList.setOnItemClickListener(this);

      webLogin = (Button)
      findViewById(R.id.button3);
      webLogin.setOnClickListener(this);
      }

      @Override
      public void onClick (View v) {
      Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
      startActivity(webLoginIntent);
      }

      public List<String> populateList (){

      List<String> webNameList = new ArrayList<String>();

      dataStore openHelperClass = new dataStore (this);

      SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

      Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);

      startManagingCursor(cursor);

      while (cursor.moveToNext()){
      String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
      String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
      String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
      String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
      String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

    LoginDetails lpDetails = new LoginDetails();

   lpDetails.setsName(sName);
   lpDetails.setwUrl(wUrl);
   lpDetails.setuName(uName);
   lpDetails.setpWord(pWord);
   lpDetails.setlNotes(lNotes);

   loginArrayList.add(lpDetails);
   webNameList.add(sName);
   }

   sqliteDatabase.close();
   return webNameList;
    }

   @Override
   protected void onResume() {
    super.onResume();

    try{
    loginArrayList = new ArrayList<LoginDetails>();
    arrayList = new ArrayList<String>();
    loginArrayList.clear();
    arrayList.clear();

    arrayList = populateList();

    dataStore refreshHelper = new dataStore (this);
    SQLiteDatabase sqliteDatabase = refreshHelper.getWritableDatabase();
    Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);
    String[]columns = new String[] { dataStore.COLUMN_NAME_SITE, dataStore.COLUMN_NAME_ADDRESS, dataStore.COLUMN_NAME_USERNAME, dataStore.COLUMN_NAME_PASSWORD, dataStore.COLUMN_NAME_NOTES };
     int[] to = new int[]{R.id.rusName, R.id.ruwUrl, R.id.ruuName, R.id.rupWord, R.id.ruNotes};
    SimpleCursorAdapter loginListAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, columns, to);
    loginListAdapter.notifyDataSetChanged();
     }catch(Exception e)
    {
   e.printStackTrace();
     }
    }
    @Override
    public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
    Toast.makeText(getApplicationContext(), "Selected ID :" + arg2,    Toast.LENGTH_SHORT).show();

    Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

    LoginDetails clickedObject = loginArrayList.get(arg2);

    Bundle loginBundle = new Bundle();
    loginBundle.putString("clickedWebSite",clickedObject.getsName());
    loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
    loginBundle.putString("clickedUserName",clickedObject.getuName());
    loginBundle.putString("clickedPassWord",clickedObject.getpWord());
    loginBundle.putString("clickedNotes",clickedObject.getlNotes());

    updateDeleteLoginInfo.putExtras(loginBundle);

    startActivityForResult(updateDeleteLoginInfo, 0);   
   }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:33:32.040

使用指向所需数据的光标以及布局信息创建适配器。

```
SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, columns, to); 
```

在你的情况下，你使用`R.layout.simple_list_item_1`

`columns`将是`null`或`Particular column data which you get from cursor`

`to`将会`android.R.id.text1`

* * *

例如

```
 Cursor cursor = getContentResolver().query(People.CONTENT_URI, new String[]{People._ID, People.NAME, People.NUMBER}, null, null, null);
  startManagingCursor(cursor);
   // THE DESIRED COLUMNS TO BE BOUND

   String[] columns = new String[] { People.NAME, People.NUMBER };

  // THE XML DEFINED VIEWS WHICH THE DATA WILL BE BOUND TO
   int[] to = new int[] { R.id.name_entry, R.id.number_entry };

       SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,R.layout.list_example_entry, cursor, columns, to); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T08:54:52.300

显然你没有初始化 ArrayList。但是.. 对于您的情况，请考虑改用[Loader](http://developer.android.com/guide/components/loaders.html)。ApiDemos 中有完整的示例（在[Loader](http://developer.android.com/guide/components/loaders.html)页面底部列出）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T00:55:23.940

**请注意**，您从不实例化`loginArrayList`，因此当您尝试在您的 中访问它时`onResume()`，它为空，因此崩溃。在访问它之前实例化它。

**2013 年 2 月 22 日更新：**

啊，你忘了`loginArrayList`在应用程序刚开始运行时实例化 for 。

在您的`onCreate()`中，将以下代码放在`super.OnCreate(...)`

```
loginArrayList = new ArrayList<LoginDetails>(); 
```

所以它看起来像：

```
loginArrayList = new ArrayList<LoginDetails>();
loginListAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,populateList());
arrayList = populateList(); 
setContentView(R.layout.login_listview);

//rest of your code... 
```

* * *

以下是使您的应用程序运行的快速调整，但请注意，要解决整个问题，您需要更深入地分析在整个暂停和恢复期间丢失了哪些信息。

在你的`onResume()`, 做

```
try{

// your code

}catch(Exception e)
{
 //Have the printStackTrace to the problems see what's going on without crashing.
 //e.printStackTrace();
} 
```

但这还不能解决问题，

在`onResume()`. 请执行下列操作：

*   首次获取数据时，将其存储到数据库中。
*   在 onResume() 中重新创建列表并使用存储在数据库中的数据对其进行更新。

所以让你开始

```
@Override
protected void onResume() {
    super.onResume();

loginArrayList = new ArrayList<LoginDetails>();
arrayList = new ArrayList<String>();

arrayList = populateList();

// any other code you require to be done after the list is populated.
} 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:15:53.400

您需要在 SimpleCursorAdapter 构造函数中提供从列名到资源 ID 的映射 -`from`和`to`参数，您将为其传递 null。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T19:00:38.000

光标似乎为空，解决此问题并让您的应用程序运行的快速方法是更改​​：

```
SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor,null,null);
mAdapter.notifyDataSetChanged(); 
```

至

```
if (cursor != null) {
   SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor,null,null);
   mAdapter.notifyDataSetChanged();
} 
```

否则，您的光标似乎可以为空，并且您可能使用错误的投影进行查询。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T19:07:42.187

您永远不会初始化`loginArrayList`（因此它是`null`）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-16T19:52:49.197

问题是托管游标 -

```
startManagingCursor(cursor); 
```

尝试自己维护游标，而不是使用已弃用的“活动管理”游标。

两天前，我在管理游标后使用 onResume 调用遇到了完全相同的问题。

# c# - 根据 itemview 点击的 item 导航到页面

> ID：14839735
> 
> 赞同：1
> 
> 时间：2013-02-12T18:56:25.763
> 
> 标签：c#, xaml, windows-store-apps

我有一个绑定到gridview 控件的简单列表，在itemview 的单击事件中，我想导航到页面。

我的课看起来像；

```
public class GetMenu
    {
        public string titleName { get; set; }
        public string imagePath { get; set; }
        public string pagePath { get; set; }
    } 
```

带有列表的数据示例；

```
new GetMenu(){titleName = "Services", imagePath = "Bouquets.xaml", pagePath="Services.xaml"} 
```

对于点击甚至有以下内容；

```
void ItemView_ItemClick(object sender, ItemClickEventArgs e)
    {
    } 
```

我相信我需要从 e 中提取点击事件数据，我有点不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:02:19.117

如果我正确理解您的问题，即您想获得“点击”项目，那么它应该相当容易：

```
var getMenu = (GetMenu)e.ClickedItem; 
```

现在你有了项目，你可以使用里面的属性作为导航参数。

你是这么想的吗？

[编辑]

导航本身也相当简单。如果您在代码隐藏中，则必须：

```
Frame.Navigate(typeof(YourViewForTheItem), parameters); 
```

例如

```
Frame.Navigate(typeof(ItemDetailsView), getMenu); 
```

`parameters`是一个`object`，所以你必须`OnNavigatedTo`在目标视图中适当地投射它。

如果您使用任何类型的 MVVM 框架，也有相应的服务，例如 Caliburn.Micro 有`INavigationService`.

当然，前提是您事先知道类型。

如果您想从您拥有的字符串创建“类型”本身，则必须使用反射：

```
var viewType = Type.GetType("YourStoreApp.Views."+getMenu.pagePath.Substring(0, getMenu.pagePath.LastIndexOf(".")); 
```

假设`pagePath`不为空。

类型字符串必须是完全限定名称，即完整的程序集名称和类型（不带扩展名），例如“YourStoreApp.Views.Services”。文件名必须完全反映类型名称才能正常工作。

现在你可以：

```
Frame.Navigate(viewType); 
```

# java - 替换 BufferedWriter 中的字符

> ID：14839740
> 
> 赞同：2
> 
> 时间：2013-02-12T18:56:33.997
> 
> 标签：java, string, text, bufferedwriter

我正在使用创建一个文本文件`BufferedWriter`

```
BufferedWriter bufferedWriter = 
           new BufferedWriter(new FileWriter("/home/user/temp.txt"));

/*

     Add Contents using bufferedWriter.write()

*/ 
```

在添加内容的某些地方，我添加了一个字符串序列**######**

在我这样做之前，`bufferedWriter.close()`我想用一些特定的值替换**######**序列。

我怎样才能做到这一点？

我不想重新打开 Writer，但如果允许这样做，可以使用不同的 writer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:03:17.023

将内容创建为 a`String`或 a `List<String>`。

替换 后`#####`，将`String`or`List<String>`写入`BufferedWriter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:04:16.757

我相信您有以下选择：

*   自己写`Writer`。`Writers`我所知道的没有一个能够仅仅因为当你调用它们时它们实际上*写入*`.write()`磁盘（写入文件）而能够做到这一点。有些，例如`BufferedWriter`，不要立即执行，但是如果您超过内部缓冲区，无论如何它都会被刷新到文件中 - 即使您没有调用`flush()`or `close()`。

*   只需使用[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html). 写入 a `StringBuilder`，然后替换您的序列，然后才写入文件。

*   每次遇到`######`. 实际上，您将拥有多个文件，它们之间缺少一段文本。在您知道应该替换的正确序列后，`######`使用该序列连接文件。

*   如果您有足够的内存来保存内存中的所有数据，请使用 a `List<String>`（在 处拆分`######`，然后使用类似 a 的方式连接元素[`Joiner`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T19:14:17.930

那样的事情呢？

```
BufferedReader br = new BufferedReader(new FileReader("/home/user/temp.txt"));
BufferedWriter bw = new BufferedWriter(new FileWriter("/home/user/temp.txt"))
String line
StringBuffer sb = new StringBuffer()
while (line = br.readLine()) {
    line = line.replace("######", "yourReplacement")
    sb.append(line)
}
br.close()
bw.write(sb.toString(), 0, sb.length())
bw.close() 
```

# c - 正确发送 RST 数据包到 TCP 客户端和服务器作为网关

> ID：14839741
> 
> 赞同：4
> 
> 时间：2013-02-12T18:56:38.183
> 
> 标签：c, linux, networking, tcp, raw-sockets

我正在编写一个网关，其中一个功能是在交换足够的数据包时破坏连接。我想知道如何正确形成 RST 数据包以发送到客户端和服务器以终止连接。

为了测试这一点，我使用了 ftp 连接/会话。现在，我看到当我发送 RST 数据包时，客户端无休止地用 SYN 数据包回复，而服务器只是用 ACK 数据包继续数据流。请注意，在我决定销毁连接后，我会阻止两端之间的流量。

我认为我处理 SEQ 和 ACK 号码的方式可能有问题。在专门发送 RST 数据包时，我无法找到资源来解释如何处理 SEQ 和 ACK 号。现在，我将 SEQ 设置为一个新的随机数（使用 rand()）并将 ACK 设置为 0（因为我没有使用 ACK 标志）。我用目标地址反转源地址，用目标端口反转源端口，并看到我正确计算了校验和。

我似乎客户端和服务器都不接受终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:13:48.870

我不知道您正在使用什么“资源”，但这似乎完全涵盖在 RFC 793 的第 3.4 节中的“重置生成”下。RST 的序列号为零，并且 ACK 字段设置为传入的 ACK 字段加上在那里多次描述的长度等。

# php - 为什么我在 url 中传递不同的函数名时得到 404？

> ID：14839749
> 
> 赞同：0
> 
> 时间：2013-02-12T18:57:17.037
> 
> 标签：php, restler

我不知道restler的行为如何。当我通过时`getuser/2`它工作正常，但是当我通过`/getalluser`它 时

```
{
error: {
code: 404,
message: "Not Found"
}
} 
```

但是当我将函数名称更改`getalluser`为它时，`buyalluser`它工作正常。

谁能告诉我restler框架中的函数名有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:19:04.443

正如你已经发现的

Restler 使用 get、post、put、delete 作为方法前缀来自动将它们映射到相应的 HTTP 方法/动词 GET 是默认的 HTTP 方法，因此如果您不使用上述任何方法作为方法前缀，它将被映射到 GET 方法.

# jquery - jQuery将元素移动到结束但保持变量更新

> ID：14839760
> 
> 赞同：0
> 
> 时间：2013-02-12T18:57:49.197
> 
> 标签：jquery, dom-traversal, jquery-traversing

如何将元素移动到结束但保持变量更新而不再次遍历？

```
var pbUL = $('ul');
var pbLIs = $('li');
pbLIs.eq(0).appendTo(pbUL); 
pbLIs = $('li'); // not good... 
```

简单的问题 - 可能是简单的解决方案，但我不知道如何解决......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:04:47.433

为什么不这样：

```
(function( $ ) {
    $.fn.shift = function() {
        var bottom = this.get(0);
        this.splice(0,1);
        return bottom;
    };
})( jQuery );

var arr = $('li');
arr.push(arr.shift()); 
```

演示：http: [//jsfiddle.net/m6Pf6/](http://jsfiddle.net/m6Pf6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:03:00.727

尝试更换这部分：

```
pbLIs.eq(0).appendTo(pbUL); 
pbLIs = $('li'); // not good... 
```

有了这个：

```
pbLIs = pbLIs.eq(0).appendTo(pbUL); 
```

# vb.net - 多进程读取的 MSMQ 队列

> ID：14839767
> 
> 赞同：0
> 
> 时间：2013-02-12T18:58:15.650
> 
> 标签：vb.net, visual-studio-2010, msmq

我有一个 MSMQ 应用程序设置，其中数据被推送到一个队列中。最初我只有一个进程从中读取并处理它。由于体积增加了，我启动了多个进程来读取它，这基本上是我原始进程的一个新实例。我没有看到任何错误，但性能确实下降了。我的理解是，每个进程都会从队列中读取并接收尚未处理的新消息并继续处理。这是正确的还是多个进程可能最终处理相同的消息？

```
 Dim q As MessageQueue
    If MessageQueue.Exists(".\private$\MsgsIQueue") Then
        q = New MessageQueue(".\private$\MsgsIQueue")
    Else
        'GS - If there is no queue then we're done here
        Console.WriteLine("Queue has not been created!")
        Return
    End If

     While True
            Dim message As Message
            counter += 1
           Try
                If q.Transactional = True Then
                    Thread.Sleep(2000)
                End If
                q.MessageReadPropertyFilter.ArrivedTime = True
                message = q.Peek(TimeSpan.FromSeconds(20.0))
                message.UseJournalQueue = True
                message = q.Receive(New TimeSpan(0, 0, 60))
                message.Formatter = New XmlMessageFormatter
                                   (New [String]() {"System.String"})
                ProcessMessage(message)
                .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:14:27.497

好的，您确定实际上是队列读取导致了性能下降吗？我怀疑您的管道中还有其他一些瓶颈，因为 MSMQ 非常擅长处理来自多个进程/线程的读取。

如果我看一下您的代码，我会建议进行以下更改：

*   如果是 tx 队列，为什么要休眠 2 秒？如果队列为空，请始终使用 tx 队列并将对 Sleep 的调用移至 catch 块以等待间隔。

*   将过滤器的设置移到循环之外。

*   删除对 Peek 的调用，因为它没有任何价值。

*   使用日志队列仅在发送消息时使用。所以删除它。

*   而是在队列上设置格式化程序，它将用于所有读取。

您还应该将对 Read 和 ProcessMessage 的调用包装在 TransactionScope 中，您还将 ProcessMessage 包装在另一个 try/catch 块中。这样，如果 ProcessMessage 中一切正常，您就可以提交读取，或者选择中止读取或将消息移动到死信队列。

# jsf - Primefaces 将 Bean 与表单绑定

> ID：14839770
> 
> 赞同：2
> 
> 时间：2013-02-12T18:58:25.900
> 
> 标签：jsf, primefaces

我正在开发一个带有 primefaces 的应用程序，我试图用我的用户 Bean 映射我的表单，但我不能，这是我的代码：

```
<h:form>
   <p:panelGrid columns="2">   
      <h:outputLabel for="usuario" value="Usuario: *"/>  
       <h:inputText id="usuario" binding="#{beanPrueba.user.usuario}"></h:inputText>

       <h:outputLabel for="contrasena" value="Contraseña: *" />  
       <h:inputSecret id="contrasena"></h:inputSecret>

     <f:facet name="footer"> 
     <p:commandButton icon="ui-icon-check" value="Entrar" ajax="false"
                 action="#{beanPrueba.prueba()}"/>
     </f:facet> 
   </p:panelGrid> 
 </h:form> 
```

支持豆：

```
@ManagedBean(name = "beanPrueba")
@SessionScoped
public class BeanLogin {

private Usuario user = new Usuario();

public Usuario getUser() {
    return user;
}

public void setUser(Usuario user) {
    this.user = user;
}

 public void prueba()
{
    try {
        //my code
    }
    catch(Exception ex)
    {
        System.out.print(ex.getMessage());
    }

} 
```

在我的 bean 中声明一个用户对象，我使用对象用户将我的表单与我的 bean 映射但是当我用我的表单映射到 bean 时出现错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T09:13:51.277

您使用的绑定属性完全错误。在您的情况下，您不应该使用绑定，请将其替换为`value`属性。`binding`如果您想将整个组件与`UIComponent`支持 bean 的某些属性绑定，并以编程方式管理组件属性，则使用此选项。值提供组件值和一些支持 bean 属性之间的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T10:45:05.723

我认为方法调用的语法也是错误的，应该是

```
<p:commandButton icon="ui-icon-check" value="Entrar" ajax="false"
             action="#{beanPrueba.prueba}"/> 
```

没有括号。

# jquery - 如何在jquery mobile的文本框中放置一个图标

> ID：14839771
> 
> 赞同：5
> 
> 时间：2013-02-12T18:58:30.187
> 
> 标签：jquery, css, jquery-mobile

我想在 jquery mobile 中的文本框内放置一个图标（应该在文本框的右端，如搜索输入类型中的 clearText 图标）。我已经覆盖了一些 jquery mobile 的 css 类，但我仍然无法实现。有人可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T19:07:04.323

一个简单的解决方案是将你的文本框和图像放入一个相对定位的 div 中。然后将图像位置设置为`absolute`并为其提供所需的`right`值。

**HTML：**

```
<div>
    <input type="text" />
    <img src="http://the-dream.co.uk/images/lens_icon.png" width="15" />
</div> 
```

**CSS：**

```
div {
    position:relative;
    width:200px
}

input{
    width:200px;
}

img{
    position:absolute;
    right:5px;
    top:5px;
} 
```

* * *

检查那个小提琴的演示：

[http://jsfiddle.net/8sbpn/1/](http://jsfiddle.net/8sbpn/1/)

# c - 查看是否已经抽取了一个数字

> ID：14839778
> 
> 赞同：1
> 
> 时间：2013-02-12T18:58:49.340
> 
> 标签：c, arrays, random, compare, do-while

我在理解 C 中的“do-while”语句时遇到问题。

这是完整的代码： http: [//pastebin.com/uPRvRscd](http://pastebin.com/uPRvRscd)

该程序生成 6 个数字，范围从 0 到 50。这 6 个数字中没有一个数字重复。

这是 do-while 循环：

```
for(c=0;c<BALLS;c++)
{
    /* See if a number has been allready been drawn */
    do
    {
        ball = rand() % RANGE; /* Generate the random ball */
    }
    while(numbers[ball]); /* How is this compare made ? */
    /* Number drawn */
    numbers[ball] = 1; /* What is this for ?!?  */
    printf("%2d ", ball+1); /* add 1 to ball so ball won't be zero */
} 
```

*   逻辑比较如何工作？

我知道 DO 取决于 WHILE 是真还是假。

`numbers[ball] = 1;`这应该做什么？（如果我删除它，结果是一样的）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:04:30.050

C 有一条规则，“任何为零的东西”都是假的，其他的都是真的。所以当你写`if(x)`它的时候`if (x != 0)`和`if(!x)`意思是一样的`if (x == 0)`。

和-中`for`的条件相同。`while``do``while`

所以你的代码：

```
do
{
    ball = rand() % RANGE; /* Generate the random ball */
}
while(numbers[ball] != 0); 
```

我假设这`numbers`是一个 50 的数组，用零填充 [如果它是静态存储持续时间，那么如果没有其他说明，它会自动设置为零。]

当一个数字被绘制时`numbers[ball] = 1;`，将该数字设置为非零，所以如果我们再次绘制相同的数字，do-while 循环将再次循环并选择另一个数字[我们希望 - 如果随机数生成器真的很垃圾，它可能变成无限循环]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:07:35.743

```
for(c=0; c<50; c++) {
    do {
        ball = rand() % RANGE;
    } while(numbers[ball]);

    numbers[ball] = 1;
    printf("%2d ", ball + 1);
} 
```

* * *

如果我们要删除 line: `numbers[ball] = 1;`，那么 ball 在主`for`循环的多次迭代中可能具有相同的值。这将导致程序报告 50 个数字，就像以前一样，除了现在，可以有**重复**。

* * *

至于while循环中的条件，这两行是等价的。

```
1\. do { ... } while(numbers[ball]);
2\. do { ... } while(numbers[ball] != 0); 
```

* * *

如果使用更具描述性的变量名称，这也会更好。特别是，`numbers`更准确地标记为`already_selected_balls`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:19:07.673

看到你`ball = rand() % RANGE;`生成的数字在 0 到 9 之间（你的 Range 是 10），最初的 numbers 数组被初始化为零，表示到目前为止没有绘制任何数字。

现在随机语句选择一个数字（也可能为零）然后`while(numbers[ball])`检查该数字是否已经绘制（0 为假，其他一切为真），最初每个都是 0，所以 do-while 循环将停止，我们设置`numbers[ball] = 1;`为表示号码球已被使用，现在程序打印`ball+1`（因为球也可以为0，我们不希望球号为零）

假设首先选择了数字 5（并且打印了 6），现在假设`rand()`再次生成 5，这将满足 while（numbers[5] 为 1）do-while 的条件再次运行，直到找到一个从未使用过的数字（表示由数字[球]为零）

基本上该`ball+1`语句是可选的，因为代码编写者不希望球号为 0

# php - 使用 Codeigniter 访问 Azure Blob 存储

> ID：14839786
> 
> 赞同：0
> 
> 时间：2013-02-12T18:59:08.287
> 
> 标签：php, codeigniter, codeigniter-2, azure-storage

我正在寻找一种方法来做到这一点。

有可能吗，如果可以的话怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:01:10.823

是的，不是特定于 CodeIgniter，但[适用于 PHP 的 Windows Azure SDK](https://github.com/windowsazure/azure-sdk-for-php#readme)应该具有您需要的所有功能。

它也是由 Microsoft Windows Azure 团队创建的，因此受到官方支持。

> **Blob**
> 创建、列出和删除容器，使用容器元数据和权限，列出容器中的 Blob
> 创建块和页面 Blob（来自流或字符串），使用 Blob 块和页面，删除 Blob
> 使用 Blob 属性、元数据、租约，快照 blob
> REST API 版本：2011-08-18

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T06:26:52.077

这是一个可能对您有所帮助的 codeigniter 库

[https://github.com/thomasantony/codeigniter-azure/](https://github.com/thomasantony/codeigniter-azure/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T12:58:38.763

将下载的存档的 WindowsAzure 目录复制到您的应用程序目录结构并从您的应用程序引用类。

[https://github.com/Azure/azure-sdk-for-php](https://github.com/Azure/azure-sdk-for-php)

# vb.net - 如何将内部（嵌套）类添加到库类？

> ID：14839787
> 
> 赞同：0
> 
> 时间：2013-02-12T18:59:08.473
> 
> 标签：vb.net, inner-classes, nested-class

我正在尝试添加一个自定义事件生成器内部类以通过几个`Form`s. 起初我只是将相关代码放在 a`#Region`中并将其复制粘贴到代码中，但我意识到更好的方法可能是在嵌套类中执行此操作。所以我想基本上做

```
Partial Class Form
     Public Class VerifyGenerator
     ...
     End Class
End Class

Public Class MyForm
    Inherits Form

    Public Class MyVerifyGenerator
    ...
    End Class
End Class 
```

如果对此有更好/更合乎逻辑的解决方案，我会全神贯注。在`Form`逻辑中找到所有`TextBox`带有 s 的 es`VerifyHandler`并在生成事件时订阅它们`Form`，自定义逻辑禁用（大多数）其他`Control`s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:02:35.350

你能创建一个暴露该功能并从它继承的基类吗？

```
Public MustInherit Class VerifyerForm
  Inherits Form

  '  your stuff here

End Class

Public Class MyForm
  Inherits VerifyerForm

End Class 
```

# matlab - matlab输入解析器

> ID：14839789
> 
> 赞同：1
> 
> 时间：2013-02-12T18:59:19.107
> 
> 标签：matlab

我想用 验证输入参数`inputparser`，其中输入参数有 `2 required inputs`和`varargin`。

```
 function = myfun( input1,input2,varargin)
  p = inputParser;
  addRequired(p,'input1',@(x) any(validatestring(x,{'sum','sub'})))
  addRequired(p,'input2',@ischar)

  parse(p,input1,input2,varargin{:})  ?? 
```

我如何验证我的 varargin 长度可变的地方。

喜欢 ：`myfun('sum','hallo','Name','address',...)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:14:12.647

如果（且仅当）您的变量输入参数采用参数-值对的形式，您可以这样做：

```
function result = myfun(varargin)
    p = inputParser;
    p.addRequired('input1', @validation1);
    p.addRquuired('input2', @validation2);
    p.KeepUnmatched = true;
    p.parse(varargin{:});
    params = p.Unmatched;
end 
```

否则，恐怕您将无法手动解析输入：

```
function result = myfun(input1, input2, varargin)
    p = inputParser;
    p.addRequired('input1', @validation1);
    p.addRquuired('input2', @validation2);
    p.parse(input1, input2);

    for item in varargin:
        % MANUAL VALIDATION GOES HERE
    end

end 
```

# c# - 如何提取 X509 证书智能卡

> ID：14839792
> 
> 赞同：2
> 
> 时间：2013-02-12T18:59:23.860
> 
> 标签：c#, x509certificate, smartcard, x509securitytokenmanager

我需要以编程方式从智能卡中提取或导入 X509 证书，而不将其保存到个人存储中。有谁知道实现它的方法？C 锐利的语言。我可以使用智能卡 CSP 进行签名。但不知道如何从智能卡读取证书

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:05:40.870

据我了解，当插入智能卡时，其上的证书会无缝地（通过 Windows）出现在用户的个人存储中。

因此，使用卡枚举个人存储的证书将显示证书，然后您可以将其导出/复制到任何您想要的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:05:02.917

从智能卡的角度来看，X.509 证书只是一个二进制文件，但需要找到并寻址正确的文件，这是 PKCS#11 支持卡提供的一项功能。

虽然以下链接适用于 pkcs #11 之上的薄 python 层，但最后一个示例也可以作为 C# 的起点。

[PyKCS11 示例代码](http://www.bit4id.org/trac/pykcs11/wiki/SampleCode)

# sql - Django ORM 版本的 SQL COUNT(DISTINCT )

> ID：14839795
> 
> 赞同：11
> 
> 时间：2013-02-12T18:59:30.513
> 
> 标签：sql, django, orm

我需要在一个简单的消息传递系统中填写一个包含用户活动摘要的模板。对于每个消息发件人，我想要发送的消息数量和不同收件人的数量。

这是模型的简化版本：

```
class Message(models.Model):
    sender = models.ForeignKey(User, related_name='messages_from')
    recipient = models.ForeignKey(User, related_name='messages_to')
    timestamp = models.DateTimeField(auto_now_add=True) 
```

下面是我在 SQL 中的做法：

```
SELECT sender_id, COUNT(id), COUNT(DISTINCT recipient_id)
    FROM myapp_messages
    GROUP BY sender_id; 
```

我一直在阅读有关 ORM 查询中聚合的文档，尽管 annotate() 可以处理第一个 COUNT 列，但我看不到获得 COUNT(DISTINCT) 结果的方法（甚至是额外的（select={}）一直没有工作，虽然它似乎应该）。这可以翻译成 Django ORM 查询还是我应该坚持使用原始 SQL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-07T17:55:33.277

您确实可以同时使用 distinct 和 count ，如此答案所示：[https ://stackoverflow.com/a/13145407/237091](https://stackoverflow.com/a/13145407/237091)

在你的情况下：

```
SELECT sender_id, COUNT(id), COUNT(DISTINCT recipient_id)
FROM myapp_messages
GROUP BY sender_id; 
```

会成为：

```
Message.objects.values('sender').annotate(
    message_count=Count('sender'),
    recipient_count=Count('recipient', distinct=True)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T19:25:44.380

```
from django.db.models import Count

messages = Message.objects.values('sender').annotate(message_count=Count('sender'))

for m in messages:
    m['recipient_count'] = len(Message.objects.filter(sender=m['sender']).\
                              values_list('recipient', flat=True).distinct()) 
```

# c - 什么是更好的调整数组大小或复制？

> ID：14839801
> 
> 赞同：-3
> 
> 时间：2013-02-12T18:59:48.897
> 
> 标签：c, arrays, resize

面试的时候被问到了，只是出于好奇...

假设我有一个 {3, 6, 7, 7, 7, 1} 数组，我想让它 {3, 6, 7, 1} 删除所有连续的 7。

会说什么？将数组复制到另一个数组或调整原始数组的大小？以及每个的优点/缺点

谢谢！

顺便说一句，请用 C 或 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:05:25.933

我会调整大小。优点 - 快速，无需复制。缺点 - 可能的内存碎片。除此之外，对于这种大小的东西，没有一个真正向下调整大小，无论如何都不会被内存 API 忽略。每当发生向下调整大小时，内存系统不一定要移动内存（但它可能！）。

# xaml - 如何根据某些条件禁用/启用 VisualState？（地铁）

> ID：14839803
> 
> 赞同：1
> 
> 时间：2013-02-12T18:59:51.327
> 
> 标签：xaml, windows-runtime, windows-store-apps, visualstatemanager

我为控件模板中的按钮定义了一个 VisualState：

```
 <ControlTemplate x:Key="ButtonTemplate" TargetType="Button">
      ...
      <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="CommonStates">
          ...
          <VisualState x:Name="PointerOver">
            <Storyboard>
              <DoubleAnimation Storyboard.TargetName="c1" Storyboard.TargetProperty="Opacity" To="0.7"/>
            </Storyboard>
          </VisualState>
          ...
        </VisualStateGroup>
      </VisualStateManager.VisualStateGroups>
      ...
  </ControlTemplate> 
```

但是应该根据视图模型条件启用/禁用这种效果（鼠标悬停时更改不透明度），那么我该如何使用 XAML 做到这一点？

我尝试为 DoubleAnimation 的 To 值创建绑定，但它不起作用，因为 Storyboard 已冻结。我也在想模板选择器之类的东西，但是 VisualState Manager 没有这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:10:50.763

我最近正在与某人讨论它，我可能会在 WinRT XAML 工具包中添加一个通用的解决方案来解决这个问题，它的工作方式类似于 WPF 中的 DataTriggers，但现在我只需将一个添加`DependencyProperty`到您的控件，将属性绑定到您的视图模型和值变化 - 更新视觉状态。

# requirejs - 要求带有下划线.js的js不起作用

> ID：14839809
> 
> 赞同：0
> 
> 时间：2013-02-12T19:00:05.360
> 
> 标签：requirejs

我正在关注以下教程：

[http://javascriptplayground.com/blog/2012/07/requirejs-amd-tutorial-introduction](http://javascriptplayground.com/blog/2012/07/requirejs-amd-tutorial-introduction)

我基本上是在制作一个需要“jquery”和“下划线”的简单模板模块

这是我的 app.js

```
require.config({
  paths: {
    "jquery": "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min",
    "underscore": "http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min"
  }
});

require(['template'], function(template) {

    //Template is undefined
    console.log(template);
}); 
```

这是我的 template.js

```
define(['underscore', 'jquery'], function() 
{
  var showName = function(n) 
  {
    var temp = _.template("Hello <%= name %>");
    $("body").html(temp({name: n}));
  };

  return 
  {
    showName: showName
  };  
}); 
```

我已经验证所有脚本都通过谷歌浏览器的网络选项卡拉入，但未定义模板回调。

编辑：似乎错误是由`{`在另一行返回引起的。我以前从未使用过 javascript 遇到过这种情况……这有规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:09:51.017

编辑：似乎错误是由在另一行返回 { 引起的。我以前从未使用过 javascript 遇到过这种情况……这有规则吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T05:12:32.080

尽管某些杰出人士尽最大努力说服容易上当的新手，但[分号在 JavaScript 中是可选的](http://mislav.uniqpath.com/2010/05/semicolons/)。这对如何处理 return 关键字有一些影响。请参阅链接。

人们认为需要分号的问题之一是 - 他们认为解析器将继续解析，直到遇到半... 明白了！

# ruby-on-rails - 无法将 project.id 从视图传递到控制器

> ID：14839813
> 
> 赞同：0
> 
> 时间：2013-02-12T19:00:24.860
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, view, controller

我想将当前项目的 id 传递给工单控制器（为项目创建工单），我在下面尝试这样做。但是，我在下面的操作方式为我提供了以下链接：

```
tickets/new?project_id=8 
```

...当我只想这样时：

```
tickets/new 
```

...即使我希望在控制器中可以访问 project_id。

我怎样才能做到这一点？只是为了澄清：我不希望 project_id 成为 URL 的一部分，我只想将它（以某种方式）作为参数传递给控制器​​。

**从视图：**

```
<h1><%= @project.title %></h1> <-- the project's attributes is reachable here

<%= link_to "Create ticket", new_ticket_path(:project_id => @project.id), :class => "btn edit_button" %> 
```

**票务员：**

```
1\.    class TicketsController < ApplicationController
2\.        def new
3\.            @ticket = Ticket.new
4\.            @id = params[:project_id]
5.
6\.            @project = Project.find(@id)
7\.        end
8\.    end 
```

link_to 指向的路由如下所示：

```
new_ticket GET    /tickets/new(.:format)            tickets#new 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:28:42.720

如果票属于项目，您可能需要考虑嵌套资源。

现在，您的路线可能如下所示：

```
resources :projects
resources :tickets 
```

`/projects/new`这会生成类似和的路线`/tickets/new`。你可以做的是：

```
resources :projects do
  resources :tickets
end 
```

这将为您提供类似`/projects/8/tickets/new`. 您通过执行链接到新票证`new_project_ticket_path(@project)`。路线生成的实际形式是：`/projects/:project_id/tickets/:id`. 所以 params[:project_id] 会给你项目的 id。

# mysql - 按字母顺序排列 MySQL 表

> ID：14839814
> 
> 赞同：1
> 
> 时间：2013-02-12T19:00:34.230
> 
> 标签：mysql

我有一个包含应用程序设置的表，其中包含以下列：*id*、*key*和*value*。

*id*列是自动递增的，但截至目前，我不使用它，也没有任何外键约束。我正在填充设置并希望对其进行重组，以便它们按字母顺序排列，因为我没有以这种方式放置设置，但按字母顺序重新排序将有助于将相关设置组合在一起。

例如，如果我有以下设置：

```
ID     KEY             VALUE
======================================
1      App.Name        MyApplication
2      Text.Title      Title of My App
3      App.Version     0.1 
```

我希望将所有 App.* 设置按顺序组合在一起，而不必每次都执行 ORDER BY。无论如何，这就是解释。我[尝试了以下](https://stackoverflow.com/questions/1850594/mysql-how-to-reorder-a-table)方法，但似乎并没有改变顺序：

```
CREATE TABLE mydb.Settings2 LIKE mydb.Settings;
INSERT INTO mydb.Settings2 SELECT `key`,`value` FROM mydb.Settings ORDER BY `key` ASC;
DROP TABLE mydb.Settings;
RENAME TABLE mydb.Settings2 TO mydb.Settings; 
```

这将按照建议复制表格，但不会重组数据。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:06:34.243

重新排序表格的简单方法是使用`ALTER TABLE table ORDER BY column ASC`. 您尝试的查询看起来应该有效，但我知道 ALTER TABLE 查询有效；我经常使用它。

注意：重新排序表中的数据仅在 MyISAM 表中有效且有意义。InnoDB 始终以 PRIMARY KEY 顺序存储数据，因此无法重新排列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:04:24.553

决定做出这样的回答。

正如我在对最初答案的评论中所说，为了获得长期效果，您需要重新创建设置表，并将键列作为主键。因为正如 G-Nugget 所说的那样，“InnoDB 总是以 PRIMARY KEY 顺序存储数据”。

你可以这样做

```
CREATE TABLE settings2
    (`id` int NULL, `key` varchar(64), `value` varchar(64), PRIMARY KEY(`key`));
INSERT INTO settings2 
SELECT id, `key`, `value` 
  FROM settings;
DROP TABLE settings;
RENAME TABLE settings2 TO settings; 
```

这样，您在插入新记录后就可以完好无损地获得订单。

如果您不需要表中的初始`id`列，那么现在是放弃`settings`它的好时机。

这是工作的[sqlfiddle](http://sqlfiddle.com/#!2/44776/1)

*免责声明：我个人`ORDER BY`无论如何都会使用*

# ios - 如何在 iOS 中添加序号缩写格式到日期，例如“th”、“st”

> ID：14839829
> 
> 赞同：5
> 
> 时间：2013-02-12T19:01:43.037
> 
> 标签：ios, date, nsdate

我有以下代码将我的日期和时间格式化为字符串，例如：

2013 年 10 月 25 日星期一 - 14:56:34

```
NSDate *today = [[NSDate alloc] init];
dateFormatter = [[NSDateFormatter alloc] init];
[self.dateFormatter setDateFormat:@"EEEE, MMMM dd YYYY - HH:mm:ss"];

NSString *currentTime = [self.dateFormatter stringFromDate: today];
self.timerLabel.text = currentTime.uppercaseString; 
```

它运作良好。但是我如何将“th”或“rd”或“st”适当地放在日期，即上面示例中的 25 之后？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:55:05.000

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"MMMM dd"];

NSDate *now = [[NSDate alloc] init];

NSString *dateString = [format stringFromDate:[now dateByAddingTimeInterval:(-60*60*24*10)]];
NSMutableString *tempDate = [[NSMutableString alloc]initWithString:dateString];
int day = [[tempDate substringFromIndex:[tempDate length]-2] intValue];
switch (day) {
    case 1:
    **case 21:
    case 31:**
        [tempDate appendString:@"st"];
        break;
    case 2:
    **case 22:**
        [tempDate appendString:@"nd"];
        break;
    case 3:
    **case 23:**
        [tempDate appendString:@"rd"];
        break;
    default:
        [tempDate appendString:@"th"];
        break;
}
NSLog(@"%@",tempDate); 
```

# c++ - 如何传递 unique_ptr 要使用的功能

> ID：14839831
> 
> 赞同：2
> 
> 时间：2013-02-12T19:01:45.323
> 
> 标签：c++, visual-c++, pointers, c++11

这基本上是我想做的事情：

```
SerialPort::ReadBytes(int32& errcode, Message::string& msg, uint32 num)
{
    DWORD numBytesRead = 0;
    LPDWORD pNumBytesRead = &numBytesRead;
    errcode = 0;        

    std::unique_ptr <char[]> buff (new char[num]);
    // ^^^^ pass this char buffer to the ReadFile function below

    if (!ReadFile(m_sp_pointer,     // Handle to device
            buff,                  // Receives data from device
            num,                    // num bytes to read (in)
            (LPDWORD)pNumBytesRead, // num bytes read (out)
            NULL))
        {
            errcode = GetLastError();
        }

    if (numBytesRead > 0)
    {
        return true;
    }
    return false;
} 
```

我确实知道我没有正确执行此操作，所以我的问题是：我如何正确执行此操作，是否有任何事情使这成为一个坏主意？提前致谢。

**编辑**：我实际上应该在参数中传入 unique_ptr 而不是在本地声明它并传入`Message::string& msg`。

我最初的尝试是通过引用传递`Message::string`( `std::string`)，所以这也是一个选项.. 即，根本不使用 unique_ptr。在*那种*情况下，我会在本地使用常规`char[]`，然后将`msg`内容设置为`char[]`并返回。

我不确定哪个会更好，似乎有一些回复建议`vector<char>`改为。（与使用非常相似`std::string`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T19:05:14.507

我认为你不需要`std::unique_ptr`。`std::vector`在这种情况下，我更喜欢：

```
std::vector<char> buff(num);    //and pass buff.data() to function
                                //which accepts char*

if (!ReadFile(m_sp_pointer,               // Handle to device
        buff.data(),                      // Receives data from device
        buff.size(), //(CHANGED THIS TOO) //num bytes to read (in)
        (LPDWORD)pNumBytesRead,           // num bytes read (out)
        NULL))
    {
        errcode = GetLastError();
    } 
```

请注意，这[`std::vector::data()`](http://en.cppreference.com/w/cpp/container/vector/data)仅适用于 C++11。在 C++03 中，您可以`&buff[0]`改用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T19:05:40.740

使用智能指针很好，也很有帮助，但在某些情况下，原始指针是正确的选择。

我的猜测是 ReadFile 使用缓冲区并且不会将其存储在任何地方 - 因此对于具有该函数的智能指针实际上没有参数。只需传递一个原始指针

```
buff.get() 
```

进一步评论：在 ReadFile**之外**
使用 unique_ptr 是有意义的，因为它可以帮助正确处理内存。使用“手动内存管理”，您需要删除从函数返回的每条路径（例如异常）。

# java - 如何在java中访问for循环外的字符串变量？

> ID：14839832
> 
> 赞同：2
> 
> 时间：2013-02-12T19:01:45.300
> 
> 标签：java

对于我处理的以下代码。现在的问题是如何在 for 循环之外访问变量字符串？谢谢。

```
for (String[] string: arr) {
    if(string.length == 1)
    { 
        System.out.println(string[0]);
        continue;
    }
    for (int i = 1; i < string.length; i++)  {
        System.out.println(string[0] + " " + string[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:08:34.010

您的`string`变量是本地范围的，并且只存在于循环中。您需要先定义一个外部`String[]`变量，然后在循环中对该变量进行赋值：

```
String[] outsideString;

for (String[] string: arr) {
  ...
  outsideString = string;
  ...
}

// This line works
System.out.println(outsideString[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T20:30:13.413

以下解决方案为您提供了所有打印的字符串的数组列表。这提供了一个使用字符串数组逻辑创建的数组列表，以便在`for loop`.

即使在`for loop`.

```
ArrayList<String> finalList = new ArrayList<String>();

    for (String[] string: arr) {

        if(string.length == 1)
        { 
            System.out.println(string[0]);
            finalList.add(string[0]);
            continue;
        }
        for (int i = 1; i < string.length; i++)  {
            System.out.println(string[0] + " " + string[i]);                
            finalList.add(string[0] + " " + string[i]);
        }   
    }

    for(String output: finalList){
        System.out.println(output);
    } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:03:03.457

你不能给出这个代码。在顶部的增强 for 循环中，您只能使用该 for 循环的局部变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T19:08:50.347

你不能。如果您需要从循环外部的循环访问某些内容，请在循环外部创建一个字符串或集合变量，并从循环内部对其进行分配/添加。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T19:19:52.503

试试这个。

```
String[] outerString  = {}; 

    for (String[] string: arr) {
        outerString = string;
        if(string.length == 1)
        { 
            System.out.println(string[0]);
            continue;
        }
        for (int i = 1; i < string.length; i++)  {
            System.out.println(string[0] + " " + string[i]);
        }   
    }

    if(outerString.length > 0){
        System.out.println(outerString[0]);
    } 
```

请记住，只有 Collection 迭代中的最后一项将打印在外部字符串中。

# python-2.7 - LXML/Elementree 从第一个 rss 提要正确返回标签属性值，在第二个生成“Nonetype has no attribute get”错误

> ID：14839836
> 
> 赞同：0
> 
> 时间：2013-02-12T19:02:11.003
> 
> 标签：python-2.7, xml-parsing, lxml, elementtree

我正在尝试用 Python 2.7 编写一个应用程序以在 Google App Engine 上使用。我希望它解析 rss 提要并将数据存储在数据库中，但是在获取 'enclosure' 标记中的 'url' 属性值时会出现不一致的行为。我是编码新手，希望对此有任何帮助。

我有两个 RSS 提要：

饲料 A：http: [//youhadtobethere.libsyn.com/rss](http://youhadtobethere.libsyn.com/rss)

```
<item>
<title>Episode 97: Yannis Pappas</title>
<pubDate>Thu, 07 Feb 2013 19:38:00 +0000</pubDate>
<guid isPermaLink="false"><![CDATA[1364808bb99fe6bdb71b16333530076f]]></guid>
<link><![CDATA[http://youhadtobethere.libsyn.com/episode-97-yannis-pappas]]></link>
<media:thumbnail url="http://assets.libsyn.com/item/2210463" />
<description><![CDATA[<div>This week, Nikki and Sara marvel at how, two weeks in, they've already gotten used to the process of making their television show.&nbsp; Sara recently saw <i>Django Unchained</i> in a now-rare moment of free time and when she says she liked it, Brooklyn-born comic and certified "grown man" (see <a href="http://splitsider.com/2013/02/you-had-to-be-there-96-jessimae-peluso/">ep. 96</a>) <a href="http://ditchfilms.com/?page_id=2">Yannis Pappas</a> (<a href="http://www.youtube.com/watch?v=PWSRHNvTSIU"><i>Modern Comedian</i></a>, <a href="https://twitter.com/yannispappas">Twitter</a>) offers his wholehearted agreement.&nbsp; After flinging fury at Brooklyn's bogus new neighborhoods, Philly's sports obsessions, and Beantown's general demeanor, Yannis tells the story of the shooting that shoved him into maturity early on in his career.&nbsp; The trio muse a bit on their futile little legacies but soon leap into a joyous edition of Talking Pee that includes a <a href="http://whatsongamidancingto.com/">previral guessing game</a> on YouTube, a <a href="http://www.fitbit.com/">playful pedometer</a> on everyone's waistband, Yannis's modest dog zoo, and Nikki's upcoming appearance on <a href="http://www.comedycentral.com/shows/the-burn-with-jeff-ross"><i>The Burn</i></a>.&nbsp; Check her out this Tuesday (2/12) on Comedy Central at 10.30pm/9.30c...<br /><br /></div>
<p>...conveniently right before you flip over to <b><i>Nikki &amp; Sara LIVE</i></b> on <b>MTV </b>at <b>11pm/10c</b>.&nbsp; <i>Nikki &amp; Sara LIVE</i>: like a podcast for your eyes!</p>]]></description>
<enclosure length="61227675" type="audio/mpeg" url="http://traffic.libsyn.com/youhadtobethere/YHTBT_97_YannisPappas.mp3" />
<itunes:duration>01:03:47</itunes:duration>
<itunes:explicit>no</itunes:explicit>
<itunes:keywords>pappas,sara,nikki,schaefer,glaser,yannis</itunes:keywords>
<itunes:subtitle><![CDATA[This week, Nikki and Sara marvel at how, two weeks in, they've already gotten used to the process of making their television show.&nbsp; Sara recently saw Django Unchained in a now-rare moment of free time and when she says she liked it, Brooklyn-born...]]></itunes:subtitle>
</item> 
```

饲料 B：[http ://smodcast.com/channels/bagged-boarded-live/feed/](http://smodcast.com/channels/bagged-boarded-live/feed/)

```
<item>
<title>
Bagged & Boarded Live 146: All Superheroes Must Pod
</title>
<link>
http://smodcast.com/episodes/all-superheroes-must-pod/
</link>
<comments>
http://smodcast.com/episodes/all-superheroes-must-pod/#comments
</comments>
<pubDate>Tue, 22 Jan 2013 00:08:35 +0000</pubDate>
<dc:creator>Editor</dc:creator>
<category>
<![CDATA[ Episodes ]]>
</category>
<guid isPermaLink="false">http://smodcast.com/?p=12999</guid>
<description>
<![CDATA[
In which Matt sits down with Jason Trost (The Fp) and Lucas Till (X-Men First Class) for a chat about their new film All Superheroes Must Die
]]>
</description>
<content:encoded>
<![CDATA[
In which Matt sits down with Jason Trost (The Fp) and Lucas Till (X-Men First Class) for a chat about their new film All Superheroes Must Die
]]>
</content:encoded>
<wfw:commentRss>
http://smodcast.com/episodes/all-superheroes-must-pod/feed/
</wfw:commentRss>
<slash:comments>0</slash:comments>
<enclosure url="http://api.soundcloud.com/tracks/75907996/stream.mp3?client_id=a427c512429c9c90e58de7955257879c" length="0" type="audio/mpeg"/>
</item> 
```

代码片段：

```
import urllib

from lxml import etree

rss = etree.parse(urllib.urlopen(feedUrl))
show = rss.getroot()

for episode in show.iter('item'):
    mediaUrl = episode.xpath('enclosure/@url') 
```

这将返回一个列表，其中 url 属性的值作为唯一的项目。在 Feed A 上运行时，我可以改用 mediaUrl = episode.xpath('enclosure/@url')[0] 或 mediaUrl = mediaUrl[0] 将该 URL 保存为字符串。但是，在 Feed B 上，这两个都会生成错误：IndexError: list index out of range。如果我在从 Feed BI 返回的列表上使用 len(mediaUrl)，则结果为 1，我认为这意味着它返回了一个包含 url 的列表，但试图从该列表中获取 url 会生成 IndexError .

我试过了：

```
enclosure = episode.find('enclosure') 
mediaUrl = enclosure.get('url') 
```

这从 Feed A 中获取 url 作为字符串就好了，但会生成 AttributeError: 'NoneType' object has no attribute 'get' error in Feed B。我在使用时得到相同的行为：

```
mediaUrl = episode.find('enclosure').attrib['url'] 
```

正确地从 Feed A 返回 url 作为字符串，生成 AttributeError: 'NoneType' object has no attribute 'attrib' from Feed B。

我没有看到两个 rss 提要的布局之间存在明显差异，无法解释为什么使用最后两种方法可以轻松地从提要 A 中提取 url，但在提要 B 中根本看不到。我不明白为什么我可以使用第一种方法从 Feed A 返回的列表中提取 url，但不能从 Feed B 返回的列表中提取 url。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:52:40.587

您的错误是假设提要中的*所有*项目都有`<enclosure />`标签。

对于您的第一个提要，情况确实如此，但在撰写本文时，第二个提要 URL 有*两个*项目*没有*包含附件 URL。

只需跳过这些项目：

```
for episode in show.iter('item'):
    mediaUrl = episode.xpath('enclosure/@url')
    if not mediaUrl:  # no enclosure for this episode
        continue 
```

# javascript - 对 FTP 服务器执行跨域 XMLHTTPREQUEST 的语法是什么？

> ID：14839838
> 
> 赞同：15
> 
> 时间：2013-02-12T19:02:15.423
> 
> 标签：javascript, ajax, ftp, xmlhttprequest, cross-domain

我有一个 webDav CORS 插件，可用于在 webDav 服务器上 POST/PUT/GET/REMOVE/ALLDOCS 文件。

我现在想为 FTP 做同样的事情，但我正在努力让`xmlhttprequest`-syntax 工作（我只是得到错误`0`）。

[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=en-US&redirectslug=XMLHttpRequesty)上的这个页面说它也可以`xmlhttprequests`用于文件和 ftp，但我在任何地方都找不到工作示例或教程。

这就是我正在尝试的，它返回`access to restricted URI denied`

```
function reqListener () {
  console.log(this.responseText);
}

var oReq = new XMLHttpRequest();
oReq.onload = reqListener;
oReq.open("GET", "ftp://<username>:<passeword>@mydomain.de/folder/test.txt", true);
oReq.send(); 
```

我还尝试了一个常规的 Ajax 请求

```
$.ajax({
  url: "ftp://sharedspace.domain.provider.com/folder/test.txt",
  type: "GET",
  async: true,
  dataType: "text",
  crossdomain : true,
  headers : {
    user: "<username>",
    password: "<password>"
  },
  success: function(e){
    console.log("success");
    console.log(e);
  },
  error: function(e){
    console.log("error");
    console.log(e);
  },
}); 
```

这也不起作用，返回`0`状态码。

**问题**：为.
_`XMLHTTPREQUEST``FTP`

谢谢！

**编辑：**
我找到的唯一有用的链接是[这里](http://www.webdeveloper.com/forum/showthread.php?229797-How-do-Ajax-to-FTP-server)的这个页面，但它只是一些零碎的信息，我无法将它们拼凑在一起。

**编辑**
也许也有用的[链接](http://markos.gaivo.net/blog/?p=109)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T22:46:47.810

尽管 Mozilla MDN 文档引用了 xmlHttpRequest 支持文件和 ftp，但没有一个主要浏览器执行 AFAIK。`file://`如果您想开发/测试任何 xmlHttpRequest 东西，因为它不起作用，这就是您需要从某种服务器提供 Web 项目的原因之一，即使它在同一台机器上。

微软特别声明[IE 只支持 http/https](http://blogs.msdn.com/b/ieinternals/archive/2009/07/23/the-ie8-native-xmlhttprequest-object.aspx)。它的 W3C 规范还说[该规范仅适用于 HTTP/HTTPS](http://www.w3.org/TR/XMLHttpRequest/#introduction)，但“某些实现支持 HTTP 和 HTTPS 之外的协议，但本规范未涵盖该功能”。

至于 CORS，它专门用于 HTTP/HTTPS。该规范是关于使用 HTTP 标头的。[请参阅此处](http://www.w3.org/TR/cors/#introduction)的 W3C 规范。FTP 没有任何与 HTTP 等效的标头类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:52:23.777

```
oReq.open("PUT", "ftp://`<username`>:`<password`>@mydomain.de/folder/test.txt", true);

req.setRequestHeader('Content-Type', "text/plain");

req.send("Content of test.txt. This will be in test.txt"); 
```

# c++ - 如何在进程C ++之间发送std :: string数组

> ID：14839841
> 
> 赞同：1
> 
> 时间：2013-02-12T19:02:27.303
> 
> 标签：c++, system, ipc, pipe

在 C++ 中，我需要从一个主程序启动一个辅助程序，向第二个程序发送一些参数。我需要将辅助程序产生的数据返回给主程序。在这种情况下，数据恰好是一个二维 std::string 数组；我们会调用它`stringArray`。这很容易做到：

```
// snippet from Primary
std::string executionString ("./secondaryProgram arg1 arg2 arg3");
system(executionString); 
```

我不知道该怎么做是将辅助程序产生的数据返回给主程序（没有从辅助程序写入临时文件，然后从主程序读取文件）。

换句话说，如果我能做这样的事情会很棒：

```
// snippet from Primary
std::string stringArray[2][3];  
stringArray = system(executionString); 
```

我不希望有这样简单的解决方案或任何人的工作代码，任何朝着正确方向的轻推都会受到赞赏。

我不能为此目的使用套接字。我无法弄清楚如何在 std::cout 和 std::cin 之间构建适用于这种情况的管道。我唯一真正的限制是我的解决方案`system()`以某种方式涉及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:10:59.643

`system()`不会为子进程创建管道。子进程继承父进程的标准输入、标准输出和标准错误描述符。

在 Linux 上，`popen()`如果您想访问孩子的标准输入或标准输出，则可以使用。

由于您必须使用`system()`，您可以让辅助程序将其结果存储在文件中。然后，您的主程序将在系统完成后打开该文件。有点像这样：

```
std::string executionString ("./secondaryProgram arg1 arg2 arg3 > output_file.txt");
system(executionString);
std::ifstream result("output_file.txt");
while( result >> str) {
  result_vector.push_back(str);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:05:00.210

您可以使用[管道](http://www.gnu.org/software/libc/manual/html_node/Pipes-and-FIFOs.html)进行通信。提供的链接有 linux 的示例，但它与您为 windows 编写的非常相似。

如果您需要发送可能在运行时更改的任意数据，您可以考虑序列化通过管道发送的数据并在接收器处反序列化。您可能会使用 XML、JSON 或类似[Protobuf](http://code.google.com/p/protobuf/)的东西。如果您使其具有人类可读性，则增加了重用组件或使用[眼球标记调试正在发生的事情的机会 1](http://en.wikipedia.org/wiki/Visual_inspection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:20:00.233

好吧，这就是我最终要做的。

“翻译”

```
#include <iostream>
#include <fstream>
#include <vector>
#include <sstream>
#include <algorithm>
#include <cstdlib>
#include <unistd.h>

std::vector<std::string> sortTerms(int n, char* argv[]) {
  std::vector<std::string> sortedTerms (n);

  for (int i = 0; i < n; i++) {
sortedTerms[i] = argv[i+1]; // first term argv is program name
  }

  std::sort(sortedTerms.begin(),sortedTerms.end());

  return sortedTerms;
}

std::vector<std::string> splitString(int n,std::string str) {
  std::vector<std::string> stringVector (n);

  std::istringstream iss(str);

  for (int i = 0; i < n; i++) 
std::getline(iss, stringVector[i], ' ');

  return stringVector;
}

int main(int argc, char** argv) {
  const int NUM_TERMS = (argc - 1); // number of words to translate
  std::string output[NUM_TERMS][2]; // used to store a translated word alongside the English equivalent
  std::string stringBuffer; // used to start dictionary with arguments
  std::vector<std::string> stringVector (NUM_TERMS); // used as a buffer
  std::ofstream outputFile("translated.txt"); // file to write translations to
  const bool VERBOSE = true;

  stringBuffer.clear();
  stringBuffer.append("./dictionary ");

  // Sort English words and load them into output
  stringVector = sortTerms(NUM_TERMS, argv);
  for (int i = 0; i < NUM_TERMS; i++) {
output[i][0] = stringVector[i];
stringBuffer = stringBuffer.append(stringVector[i]);
stringBuffer = stringBuffer.append(" ");
  }

  int pipeStatus;
  int pipeOutput[2]; // file descriptor

  pipeStatus = pipe(pipeOutput); // create output read/write pipe ends
  if (pipeStatus < 0) {
std::cerr << "ERROR CREATING PIPE" << std::endl;
exit(1);
  }

  int pid = 0;
  pid = fork();

  if (pid == 0) { // dictionary
// Connect the pipes
dup2 (pipeOutput[1],1);

// Execute the program
system(stringBuffer.c_str());

// Close pipes
close(pipeOutput[0]);
close(pipeOutput[1]);

exit(0);
  }
  else if (pid > 0) { // Original process
char* buffer = new char[1024]; // input buffer

// Receive string from dictionary
read(pipeOutput[0],buffer,1024); // read in from output of dictionary

stringBuffer = buffer; // I'd rather work with a std::string

stringVector = splitString(NUM_TERMS, stringBuffer);
for (int i = 0; i < NUM_TERMS; i++)
  output[i][1] = stringVector[i];

// Close pipes
close(pipeOutput[0]);
close(pipeOutput[1]);

if (VERBOSE) {
  for (int i = 0; i < NUM_TERMS; i++)
    std::cout << output[i][0] << " -> " << output[i][1] << std::endl;
}

// write translationString to file
for (int i = 0; i < NUM_TERMS; i++) {
  outputFile.write(output[i][0].c_str(),output[i][0].length());
  outputFile.write(" -> ",4);
  outputFile.write(output[i][1].c_str(),output[i][1].length());
  outputFile.write("\n",1);
} 

outputFile.close();

exit(0);
  }
  else if (pid == -1) {
std::cerr << "ERROR FORKING PROCESS" << std::endl;
exit(1);
  }
  return 0;
} 
```

“字典”

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <vector>

std::vector<std::string> splitString(std::string str)
{
  std::vector<std::string> stringVector (2);

  std::istringstream iss(str);

  std::getline(iss, stringVector[0], ' ');
  std::getline(iss, stringVector[1], ' ');

  return stringVector;
}

int main(int argc, char* argv[]) {  
  const int NUM_TERMS = (argc - 1);
  std::string stringBuffer;
  std::string returnString[NUM_TERMS];
  std::vector<std::string> stringVector;
  std::ifstream dictionaryFile ("./dictionary.txt");

  // There must be at least one arguement
  if (argc <= 1)
std::cout << "Nothing to translate..." << std::endl;

  for (int i = 0; i < NUM_TERMS; i++) {
while (dictionaryFile) {
  getline(dictionaryFile,stringBuffer);  
  stringVector = splitString(stringBuffer);
  if (stringVector[0] == argv[i+1]) { // wut
    returnString[i] = stringVector[1];
    break;
  }
}
  }

  // clear string buffer
  stringBuffer.clear();

  // Form translated words string
  for (int i = 0; i < NUM_TERMS; i++) {
    stringBuffer.append(returnString[i]);
    if (i < (NUM_TERMS - 1))
        stringBuffer.append(" "); // append a space after each but the last term
  }

  // print translated words
  std::cout << stringBuffer << std::endl;

  dictionaryFile.close();

  return 0;
} 
```

“字典.txt”

```
Apple Apfel
Banana Banane
Blackberry Brombeere
Blueberry Heidelbeere
Cherry Kirsche
Fruit Obst
Grape Traube
Lemon Zitrone
Lime Limone
Orange Orange
Peach Pfirsich
Pear Birne
Plum Zwetschge
Raspberry Himbeere
Strawberry Erdbeere 
```

意味着运行`$ ./dictionary Apple Orange Strawberry`

产生“translated.txt”

```
Apple -> Apfel
Orange -> Orange
Strawberry -> Erdbeere 
```

在上交之前，我还有一些润色工作要做，但这就是要点。多谢你们！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T20:50:53.777

[Boost Interprocess](http://www.boost.org/doc/libs/1_36_0/doc/html/interprocess.html)应该适合你。它支持不同进程的线程之间的消息队列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T19:38:15.943

看看[boost.interprocess](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess.html)。它包含许多可用于 IPC 的便携式实用程序。

如果你不想依赖boost，你可以做这样的[事情](http://ideone.com/8BHdm6)。使用 C++11 模式和`-pthread`GCC 选项编译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T20:42:54.273

为什么不将第二个进程中的相关信息写入一个文件，然后在第一个进程中读取该文件。这样做似乎很奇怪，但我认为它符合您教授的标准，至少您与我们分享的部分。

# vba - ActiveX 控件阻止 Me.Saved=True

> ID：14839846
> 
> 赞同：1
> 
> 时间：2013-02-12T19:03:01.387
> 
> 标签：vba, ms-word, activexobject

以前我用过这个：

```
Private Sub Document_Close()
    Me.Saved = True
End Sub 
```

在退出 Word 文档并进行更改时禁用保存提示，但是我添加了一个“组合框（ActiveX 控件）”，现在 Word 再次提示保存。有没有解决的办法？

我尝试编写代码以在文档关闭时删除组合框，但该框在使用后会自行删除（不是我的代码，它只是这样做），然后当文档关闭时该框不存在并导致错误那里。我可以做一个如果存在/错误控制，但我觉得这只是变得草率而不是找到根本问题......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:47:51.123

如果遇到同样的问题，并通过 Bing 找到解决方案：http: [//answers.microsoft.com/en-us/office/forum/office_2007-customize/activex-control-blocks-ms-word-vba/71eca664-8e43 -4e4f-84c5-59154661ee5a](http://answers.microsoft.com/en-us/office/forum/office_2007-customize/activex-control-blocks-ms-word-vba/71eca664-8e43-4e4f-84c5-59154661ee5a)

以下代码帮助我解决了这个问题：

```
Dim WithEvents App As Application

Private Sub App_DocumentBeforeClose(ByVal Doc As Document, Cancel As Boolean)
  'Did the user saved our file?
  If Not ThisDocument.Saved Then
    'Close our file?
    If Doc.Name = ThisDocument.Name Then
      'Cancel the dialog always!
      Cancel = True
      'Set the save state
      ThisDocument.Saved = True
      'Close the document after this event
      Application.OnTime Now + TimeSerial(0, 0, 1), Me.CodeName & ".Document_AfterClose"
    End If
  End If
End Sub

Sub Document_AfterClose()
  'Close the document without saving
  ThisDocument.Close False
End Sub

Private Sub cboEquip_Change()
  'Let the document know that a change is made
  ThisDocument.Saved = False
End Sub

Private Sub Document_Open()
  Set App = Application
End Sub 
```

# ios - 如果先前的 UIView 已满，如何动态将 UIView 添加到 UIScrollView

> ID：14839849
> 
> 赞同：1
> 
> 时间：2013-02-12T19:03:07.417
> 
> 标签：ios, objective-c, uiscrollview

我必须使用自定义标签制作一个 pdf 生成器，所以在我的故事板中，我有一个 UIScrollView，里面有一个 UIView，如果我的 UIView 已满，我想添加另一个 UIView 并用其他尚未添加的标签填充它。如何使用另一个 UIView 在我的 UIScrollView 中添加另一个页面？我必须以编程方式进行，或者情节提要中有一个选项可以做到这一点？

我试过这个（我不知道它是否有效，我不想编译它，因为我觉得它真的很难看）：

```
CGFloat placement = titleLabel.frame.size.height + kMarginLabel;

for(int i = 0; i < [contract.nameContract count]; i++)

{

    if(placement > _contractPageView.frame.size.height)

    {

        CGFloat secondPlacement = 0;

        _scrollView.contentSize = CGSizeMake(_contractPageView.frame.size.width * 2, _contractPageView.frame.size.height);

        UIView *secondPage = [[UIView alloc] initWithFrame:_contractPageView.frame];

        articleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0 + kMarginLabel, secondPlacement, kTitleHeight, kTitleWidth)];

        articleLabel.text = [NSString stringWithFormat:@"Article %i - %@",i, [contract.nameContract objectAtIndex:i]];

        [secondPage addSubview:articleLabel];

        secondPlacement += articleLabel.frame.size.height;

        clauseLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, secondPlacement + kMarginLabel, _contractPageView.frame.size.width, kSizeOfClause)];

        clauseLabel.text = [contract.textContract objectAtIndex:i];

        secondPlacement += clauseLabel.frame.size.height;

        [secondPage addSubview:clauseLabel];

        [_scrollView addSubview:secondPage];

        if(secondPlacement > secondPage.frame.size.height)

        {

            CGFloat thirdPlacement = 0;

            _scrollView.contentSize = CGSizeMake(_contractPageView.frame.size.width * 3, _contractPageView.frame.size.height);

            UIView *thirdPage = [[UIView alloc] initWithFrame:_contractPageView.frame];

            articleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0 + kMarginLabel, thirdPlacement, kTitleHeight, kTitleWidth)];

            articleLabel.text = [NSString stringWithFormat:@"Article %i - %@",i, [contract.nameContract objectAtIndex:i]];

            [thirdPage addSubview:articleLabel];

            thirdPlacement += articleLabel.frame.size.height;

            clauseLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, thirdPlacement + kMarginLabel, _contractPageView.frame.size.width, kSizeOfClause)];

            clauseLabel.text = [contract.textContract objectAtIndex:i];

            thirdPlacement += clauseLabel.frame.size.height;

            [thirdPage addSubview:clauseLabel];

            [_scrollView addSubview:thirdPage];

        }

    } else {

        articleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, placement, kTitleHeight, kTitleWidth)];

        articleLabel.text = [NSString stringWithFormat:@"Article %i - %@",i, [contract.nameContract objectAtIndex:i]];

        [_contractPageView addSubview:articleLabel];

        placement += articleLabel.frame.size.height;

        clauseLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, placement + kMarginLabel, _contractPageView.frame.size.width, kSizeOfClause)];

        clauseLabel.text = [contract.textContract objectAtIndex:i];

        placement += clauseLabel.frame.size.height;

        [_contractPageView addSubview:clauseLabel];

    }

} 
```

我不知道这是否是唯一的方法，想象一下如果我的数组中有很多很多很多对象，我必须创建越来越多的页面：/我不知道该怎么做：（

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:04:19.283

我为我们的一个项目的通用核心数据编辑器做了一些类似的代码。所以在我看来，你有两个选择：

1.  使用集合视图将原型视图设计为您的页面，并将其连接到管理文本的数组控制器。文本可以组织为一个数组`NSAttributedString`，您可以绑定到 NSTextView （每页一个）

2.  如果您需要更大的灵活性，即不同大小、不同布局等的页面，您可以编写自己的容器，将“页面”数组作为属性保存（您需要定义此类），并且每当更改此数组时都会重新计算大小和约束，例如通过将每个页面的高度相加并适当地调整内容视图的大小。

希望能帮助到你

# c# - HTTPS不应该加密网络流量吗？

> ID：14839850
> 
> 赞同：1
> 
> 时间：2013-02-12T19:03:13.500
> 
> 标签：c#, asp.net, iis, https

我已经使用本教程通过 IIS 成功地在 HTTPS 中发布了一个网站：

[http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)

现在，即使数字证书是由我的计算机颁发的，它是无效的，但该网站应该使用 HTTPS。但是，在我登录帐户后，我仍然可以看到使用 Google Chrome 开发者工具输入的表单数据。

为什么会这样？HTTPS不应该加密网络流量吗？请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:10:32.880

浏览器可能会为您解密它。尝试使用 Fiddler ( [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/) ) 之类的工具来获取浏览器环境之外的网络流量。Fiddler 还允许您解密 HTTPS 流量，但默认情况下未启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:32:07.417

它在进入传输层之前由安全套接字层 (SSL) 加密。您在浏览器中的 f12 工具中看到的是发送到 SSL 层的内容。通过网络发送的流量被 fiddler 和 wireshark 等工具捕获。

# regex - 使用 Solr 提升部分查询

> ID：14839854
> 
> 赞同：0
> 
> 时间：2013-02-12T19:03:23.367
> 
> 标签：regex, solr, lucene

我正在开发一组查询，以从自由文本输入中找到规范的产品描述。考虑以下说明我的问题的示例：

```
(* Where: (a) Free text (b) Should have returned (c) What was found)

 - (a) 'CUTTER FLOOR90 CM DUPLEX - IRWIN' 
 - (b) 'CUTTER F/FLOOR/AZULEJ.90CM DUPLEX  0096'
 - (c) 'CUTTER FLOOR65 CM DUPLEX - IRWIN'
 - (a) 'WELDABLE GLOVE 50MM - TIGER'
 - (b) 'LUVA . WELD BROWN 826 TIGER(50MM)' 
 - (c) 'WELDABLE GLOVE 40MM - TIGER'
 - (a) 'INSULATION TAPE 33+ SCOTCH 19X10M - 3M'
 - (b) 'INSUL. TAPE.PVC PT  19MMX10M  N.33+ H00018' 
 - (c) 'INSULATION TAPE HIGHLAND 19X05M - 3M'
 - (a) 'KEY COMBINATION 14MM - GEDORE'
 - (b) 'KEY COMB. 14MM    CV. 002509  002509 1' 
 - (c) 'KEY COMBINATION 10MM - GEDORE' 
```

如您所见，查询返回的字符串作为一个整体匹配得更紧密。我需要提高子字符串的重要性，例如 (\d+)MM 或 (\d+)CM。

你会怎么做，最好是使用 Solr？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:59:14.773

您可能需要根据您面临的 2 个场景发出不同的查询。

为了帮助您处理查询不包含正则表达式的案例 1 和 3，您可以在文档中保留一个额外的字段，例如调用`popularity`。对于带有正则表达式的文档，请保持较高。然后按照 Solr[相关性页面](https://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_change_the_score_of_a_document_based_on_the_.2Avalue.2A_of_a_field_.28say.2C_.22popularity.22.29)的说明进行操作。

对于查询本身包含正则表达式的情况 2 和 4，您可以针对匹配的术语发出带有额外提升的查询。

# php - 如果条件为真重定向到注销并显示会话消息？

> ID：14839855
> 
> 赞同：0
> 
> 时间：2013-02-12T19:03:42.087
> 
> 标签：php, mysql

嗨，我试图放置一个 if 语句，说明登录后如果用户帐户被禁止，然后重定向到 logout.php，它将用户注销，但我也想在发生这种情况后显示会话消息。这可以在我尝试执行以下操作时完成，但它只会将用户重定向到注销并将它们注销，而不是显示会话消息。

请有人告诉我我哪里出错了谢谢：

```
<? if (logged_in()) { ?> 
     <?
    $account_banned = account_banned();
    while ($banned = mysql_fetch_array($account_banned)) 

     if ($banned['account_banned'] == '1')  {
         $_SESSION['banned']="<div class=\"infobox-noprofile\"><strong>Account Banned</strong> - We could not log you in because your account has been banned. If you need to talk to us about this please email <a href=\"mailto:support@playtimeboys.com\">Support@PlaytimeBoys.com.</a></div><div class=\"infobox-close12\"></div>"; 

          redirect_to("logout.php");  

     ?>

     <? } }?> 
```

在 logout.php 中：

```
<?
session_start();
if(isset($_SESSION['banned']))
   echo $_SESSION['banned'];
    unset($_SESSION['banned']);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:06:14.893

您`session_start();`在第一个文件中丢失了。注销处理在哪里？该人保持登录状态（至少如果他首先是）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:12:09.047

请不要在会话变量中保存那种值，而是这样做：

第一个文件：

```
<?php if (logged_in()) { 
        $account_banned = account_banned();
        while ($banned = mysql_fetch_array($account_banned)) 

         if ($banned['account_banned'] == '1')  {
             $_SESSION['banned']= true; 

              redirect_to("logout.php");  
         } 
       }
?> 
```

注销.php

```
 <?php

    session_start();
    if(isset($_SESSION['banned'])):?>
    <div class="infobox-noprofile"><strong>Account Banned</strong> - We could not log you in because your account has been banned. If you need to talk to us about this please email <a href="mailto:support@playtimeboys.com">Support@PlaytimeBoys.com.</a></div><div class="infobox-close12"></div>

<?php endif; 
 unset($_SESSION['banned']);
?> 
```

# javascript - Three.js 场景剧烈晃动

> ID：14839859
> 
> 赞同：3
> 
> 时间：2013-02-12T19:04:03.073
> 
> 标签：javascript, graphics, three.js, webgl

我目前正在从事一个项目，该项目涉及使用three.js处理非常大和非常小的距离

我在场景的较小一侧遇到了问题，“场景”将开始剧烈摇晃。

起初我认为这是 Z-Buffer 的问题，所以我编写了一个小片段，每次进入新区域时都会更改相机的近距和远距属性。这有助于解决我之前遇到的“闪烁”问题，但是场景仍然在很短的距离内剧烈移动。

发生这种情况的条件之一如下

```
camera.near = .0133333
camera.far = 12
positionToObjects = 6 
```

这应该意味着 z 分辨率约为：.0001，我觉得应该足够好，但发生的抖动远不止于此。

对象本身在“全局”位置的范围从 -200000 到 200000，但是场景本身不会改变位置

我认为可能的另一件事是我一直在使用的相机控件（缩写）如下

```
if(mouseIsDown == true){
    if(this.movementSpeed < this.maxSpeed){
        this.movementSpeed += this.acceleration
    }else{
        this.movementSpeed = this.maxSpeed
    }

}else{
    if(this.movementSpeed > this.minSpeed){
        this.movementSpeed = this.movementSpeed/this.deceleration
    }else{
        this.movementSpeed = this.minSpeed  
    }

} 
```

其中 this.minSpeed = 0，this.movementSpeed 用于像这样移动相机：

```
var actualSpeed = delta * this.movementSpeed;
this.object.translateZ( -actualSpeed * forwardOrAuto );
this.object.translateX( actualSpeed * sideSpeed );
this.object.translateY( actualSpeed * upSpeed ); 
```

然而，即使相机没有移动（最多 8 位小数），场景仍然剧烈晃动

有什么我想不出的理由会让一个场景这样做吗？

如果我可以/应该提供更多信息，请告诉我，并提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:36:51.653

我可以建议您使用不那么小的*近*和*远值吗？*（专门针对近）

*Near*在内部用作分隔符，因此如果您使用较小的数字（<1），您可能会失去精度并以那些剧烈的运动结束，因为您移动的值范围比使用较大的值要小得多近值和远值。

*这就是为什么你会发现near*的默认值为0.1： [https ://github.com/mrdoob/three.js/blob/r55/src/cameras/PerspectiveCamera.js#L13](https://github.com/mrdoob/three.js/blob/r55/src/cameras/PerspectiveCamera.js#L13)

...虽然我个人总是用 1 表示近。

此外，在寻求视觉方面的帮助时，在线示例总是很好的:-)

# html - 元素向左浮动

> ID：14839860
> 
> 赞同：0
> 
> 时间：2013-02-12T19:04:05.997
> 
> 标签：html, css-float

这是我正在开发的网站。页面上的一些元素从 iPhone 向左浮动。

标题和子标题是这样操作的。

谢谢

# c# - WPF 防止按钮从任何其他控件获得焦点

> ID：14839869
> 
> 赞同：0
> 
> 时间：2013-02-12T19:04:32.047
> 
> 标签：c#, .net, wpf, focus

我有一个带有一些上/下/左/右/选择按钮的“屏幕键盘”。

选择按钮实际上是一个点击，箭头键触发相关的上/下/左/右键。

问题是在选择组合框时，我无法按向下/向上按钮来导航列表中的项目。这是因为失去焦点时组合框会自动关闭。我可以看到其他控件发生了类似的问题，所以我想看看是否有办法执行以下操作。

对于某些按钮（上/下/等），单击时会触发单击事件，但不要从当前具有焦点的 w/e 中获取焦点。这将允许组合框下拉菜单保持打开状态，同时按下向上/向下键以浏览项目。

我试图在导航按钮上设置 Focusable=False，但焦点仍然从组合框中移开并且下拉菜单关闭。

有什么想法/建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:44:01.280

这不会发生，因为您`Buttons`所做的任何事情都不会改变他们的焦点状态。`ComboBoxes`当您单击它们之外的任何位置时关闭*，*包括空白区域、非交互式控件、其他窗口...

# asp.net - wcf项目设计

> ID：14839870
> 
> 赞同：0
> 
> 时间：2013-02-12T19:04:34.930
> 
> 标签：asp.net, wcf

我正在做一个 WCF 项目，如果我以正确的方式做的话，我想了解如何设计这些类。目前我有 2 个接口 IUser 和 ICase，在 2 个单独的类文件（IUser.cs 和 ICase.cs）中，为了便于阅读，我想将它们分开。在实现它们时，我正在构建一个实现它们的部分类，因此我还有另外两个文件 User.cs 和 Case.cs，它们的实现如下：

```
public partial class AppService : ICase

public partial class AppService : IUser 
```

这样，实现又是分开的。在构建 web.config 文件的端点时，我为每个合约设置了 2 个单独的端点。

```
<endpoint address="" binding="wsHttpBinding" contract="AppService.ICase" />
<endpoint binding="wsHttpBinding" contract="AppService.IUser" /> 
```

我的问题是这通常是如何完成的？或者有没有办法将它组合起来，所以只有 1 个端点，而不是 2 个？我想将它们保留在单独的接口中，但如果我稍后添加更多接口，我是否需要继续添加更多端点以公开该功能，或者有没有办法拥有多个接口但只有一个端点公开它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:53:09.233

WCF 中关于合同的唯一限制是您应该有一个明确的合同。但是您可以自由地将多个接口组合为一个：

```
public interface ICombinedInterface : ICase, IUser 
```

并将组合接口用作您的服务合同。

问题：“是否应该有一个或多个端点？” 没有一个简单的答案。这取决于您的要求和优先级。从客户的角度来看，这应该无关紧要。

# excel - 将 Magento 条形码图像保存在 excel 中

> ID：14839874
> 
> 赞同：0
> 
> 时间：2013-02-12T19:04:39.367
> 
> 标签：excel, magento

我正在尝试在 excel 中保存生成和保存条形码。但是，我在以正确格式保存图像时遇到问题。图像保存在最后一列。但是，我不确定如何保存它。

希望有人可以提供帮助。代码如下：

```
<?php

require_once '../app/Mage.php';
umask(0);
Mage::app();
Mage::app()->loadArea(Mage_Core_Model_App_Area::AREA_FRONTEND);

header("Content-type:text/octect-stream");
header("Content-Disposition:attachment;filename=exportMyEANCodes.csv");

$eanPrefixCode="0123456";

$storeId    = Mage::app()->getStore()->getId();
$product    = Mage::getModel('catalog/product');
$products   = $product->getCollection()->addStoreFilter($storeId)->getAllIds();

echo '"sku","ean","barcode"'. "\n";

foreach($products as $productid)
{
$product = Mage::getModel('catalog/product')->load($productid);

$sku = $product->getSku();

$ean=ean13_check_digit($eanPrefixCode. str_pad($product->getId(), 5, "0", STR_PAD_LEFT));

$bc = new barCode();
//$bc->build($ean);

$output='"'. $sku. '","'. $ean. '","'.$bc->build($ean).'"';
echo $output. "\n";
}

$bc = new barCode();
$bc->build($ean);

function ean13_check_digit($digits){
$digits =(string)$digits;
$even_sum = $digits{1} + $digits{3} + $digits{5} + $digits{7} + $digits{9} + $digits{11};
$even_sum_three = $even_sum * 3;
$odd_sum = $digits{0} + $digits{2} + $digits{4} + $digits{6} + $digits{8} + $digits{10};
$total_sum = $even_sum_three + $odd_sum;
$next_ten = (ceil($total_sum/10))*10;
$check_digit = $next_ten - $total_sum;
return $digits . $check_digit;
}

class barCode
{
    public $bcHeight, $bcThinWidth, $bcThickWidth, $bcFontSize, $mode;

    function __construct($mode='gif', $height=50, $thin=2, $thick=3, $fSize=2)
    {
        $this->bcHeight = $height;
        $this->bcThinWidth = $thin;
        $this->bcThickWidth = $this->bcThinWidth * $thick;
        $this->fontSize = $fSize;
        $this->mode = $mode;
        $this->outMode = array('gif'=>'gif', 'png'=>'png', 'jpeg'=>'jpeg', 'wbmp'=>'vnd.wap.wbmp');
        $this->codeMap = array(
            '0'=>'010000101',   '1'=>'100100001',   '2'=>'001100001',   '3'=>'101100000',
            '4'=>'000110001',   '5'=>'100110000',   '6'=>'001110000',   '7'=>'000100101',   
            '8'=>'100100100',   '9'=>'001100100',   'A'=>'100001001',   'B'=>'001001001',
            'C'=>'101001000',   'D'=>'000011001',   'E'=>'100011000',   'F'=>'001011000',
            'G'=>'000001101',   'H'=>'100001100',   'I'=>'001001100',   'J'=>'000011100',
            'K'=>'100000011',   'L'=>'001000011',   'M'=>'101000010',   'N'=>'000010011',
            'O'=>'100010010',   'P'=>'001010010',   'Q'=>'000000111',   'R'=>'100000110',
            'S'=>'001000110',   'T'=>'000010110',   'U'=>'110000001',   'V'=>'011000001',
            'W'=>'111000000',   'X'=>'010010001',   'Y'=>'110010000',   'Z'=>'011010000',
            ' '=>'011000100',   '$'=>'010101000',   '%'=>'000101010',   '*'=>'010010100',
            '+'=>'010001010',   '-'=>'000110100',   '.'=>'110000100',   '/'=>'010100010'
            );        
    }

    public function build($text='', $showText=true, $fileName=null)
    {
        if (trim($text) <= ' ') 
            throw new exception('barCode::build - must be passed text to operate');
        if (!$fileType = $this->outMode[$this->mode]) 
            throw new exception("barCode::build - unrecognized output format ({$this->mode})");
        if (!function_exists("image{$this->mode}")) 
            throw new exception("barCode::build - unsupported output format ({$this->mode} - check phpinfo)");

        $text  =  strtoupper($text);

        $dispText = "* $text *";
        $text = "*$text*"; // adds start and stop chars
        $textLen  =  strlen($text); 
        $barcodeWidth  =  $textLen * (2 * $this->bcThinWidth + 3 * $this->bcThickWidth) - $this->bcThinWidth; 
        $im = imagecreate($barcodeWidth, $this->bcHeight); 
        $black = imagecolorallocate($im, 0, 0, 0); 
        $white = imagecolorallocate($im, 255, 255, 255); 
        imagefill($im, 0, 0, $white); 

        $xpos = 0;
        for ($idx=0; $idx<$textLen; $idx++)
        { 
            if (!$char = $text[$idx]) $char = '-';
            for ($ptr=0; $ptr<=8; $ptr++)
            { 
                $elementWidth = ($this->codeMap[$char][$ptr]) ? $this->bcThickWidth : $this->bcThinWidth; 
                if (($ptr + 1) % 2) 
                    imagefilledrectangle($im, $xpos, 0, $xpos + $elementWidth-1, $this->bcHeight, $black); 
                $xpos += $elementWidth; 
            }
            $xpos += $this->bcThinWidth; 
        }

        if ($showText)
        {
            $pxWid = imagefontwidth($this->fontSize) * strlen($dispText) + 10;
            $pxHt = imagefontheight($this->fontSize) + 2;
            $bigCenter = $barcodeWidth / 2;
            $textCenter = $pxWid / 2;
            imagefilledrectangle($im, $bigCenter - $textCenter, $this->bcHeight - $pxHt, $bigCenter + $textCenter, $this->bcHeight, $white);
            imagestring($im, $this->fontSize, ($bigCenter - $textCenter) + 5, ($this->bcHeight - $pxHt) + 1, $dispText, $black);
        }

        $badMode = false;
        if (!$fileName) header("Content-type:  image/{$fileType}");
        switch($this->mode)
        {
            case 'gif': 
                imagegif($im, $fileName);
                break;
            case 'png': 
                imagepng($im, $fileName);
                break;
            case 'jpeg': 
                imagejpeg($im, $fileName);
                break;
            case 'wbmp': 
                imagewbmp($im, $fileName);
                break;
            default:
                $badMode = true;
        }

        imagedestroy($im);      
        if ($badMode) 
            throw new Exception("barCode: Unknown Graphics Type '{$this->mode}'");
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:48:34.570

我做了一些测试，我也看到了很多相同的角色！

也许另一种方法：让您的脚本输出所需的 CSV 文件，但在第三个字段中，创建一个 URL。您可以在以下位置制作一个小脚本`var/export/sku.php`：

```
<?php
require_once '../../app/Mage.php';
umask(0);
Mage::app();
Mage::app()->loadArea(Mage_Core_Model_App_Area::AREA_FRONTEND);
if( isset($_GET['sku']) && strlen($_GET['sku']) > 5 ) {
    header('Content-Type: image/jpeg');
    $barcodeOptions = array('text' => $_GET['sku']); 
    $rendererOptions = array(); 
    $imageResource = Zend_Barcode::draw( 
        'code39', 'image', $barcodeOptions, $rendererOptions 
    ); 
    imagejpeg($imageResource);
} ?> 
```

然后在您的脚本中，您`(sku),ean,http://yoursite.com/var/export/sku.php?sku=(sku)`有一种方法可以让电子表格加载图像——尽管我个人没有这样做，但我已经看到链接显示为嵌入图像。

我上面的示例输出了一个可扫描的 code39 条形码。您可以替换为您自己的图像生成。这就是我问你是否看到条形码的原因，因为我以前没有输出过这样的渲染图像。

# loadrunner - Loadrunner Web (click&script) 与 Web (http/html)

> ID：14839876
> 
> 赞同：0
> 
> 时间：2013-02-12T19:04:41.340
> 
> 标签：loadrunner

在 http/html 协议中记录脚本无法记录帧中的一些点击（没有数据提交到服务器）。Web 点击和脚本是否是一个很好的候选者来捕捉这种点击，例如检查框架内的单选按钮？与 http 协议相比，使用 click 和 script 是否有任何已知的缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:11:33.410

Click and Script 是一种孤立技术，已被 TruClient 组件取代。对于新的，请使用 TruClient 或 web|HTTP 并将单击和脚本的可能性留在箭袋中。或者，如果您需要与 GUI 进行完整的用户交互，那么您可以使用 GUI 虚拟用户或 Citrix|RDP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T12:59:37.650

同意詹姆斯。我认为 C&S 协议是他们真正想要去的地方的一半垫脚石，TruClient。但是，如果您真的需要在客户端交互发生时进行交互，那么您可能无法使用 web|HTTP。在撰写本文时，LR 11.52 已经发布了一段时间，而 LR 12 刚刚发布，TruClient 协议开始成熟。版本 12 允许您免费试用多达 50 个 vuser。

# php - 从 HTML 片段的字符串创建 DOMNode

> ID：14839879
> 
> 赞同：4
> 
> 时间：2013-02-12T19:04:53.150
> 
> 标签：php, dom

`DOMNode`假设字符串当然包含单个根节点，如何从 HTML 片段的字符串创建一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-17T01:40:58.790

**DOMDocumentFragments**确实有一个**loadXML()**方法

```
libxml_use_internal_errors(1);

$opts = array('http' => array('header' => 'Accept-Charset: ISO-8859-1, *;q=0'));
$context = stream_context_create($opts);
$html = file_get_contents( 'http://multiple.webcindario.com/wstest.php' , false , $context );

$html = html_entity_decode(htmlentities($html, ENT_QUOTES, 'UTF-8'), ENT_QUOTES , 'ISO-8859-1');
ob_clean();
$classname = "product";
$domdocument = new DOMDocument();
$domdocument->preserveWhiteSpace = true;
$domdocument->formatOutput       = false;
$domdocument->loadHTML($html);
$xpath = new DOMXPath($domdocument);
$found = $xpath->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' $classname ')]");

$newHTML="<div class='foo bar'><p>This is <b>an <i>example</i></b> paragraph    <a href='#!'>#!</a></p></div>";
$newHTML = html_entity_decode(htmlentities($newHTML, ENT_QUOTES, 'UTF-8'), ENT_QUOTES , 'ISO-8859-1');

foreach($found as $oldnode){
   $frag = $domdocument->createDocumentFragment();
   $frag->appendXML($newHTML);
   $oldnode->appendChild($frag);
   $updatedHTML=$domdocument->saveHTML();
 } 
```

例如：[https ://fernando.requeixo.com/addNodefromHTML.php](https://fernando.requeixo.com/addNodefromHTML.php)

（这会将示例段落作为 chilNode 添加到源的选定节点）

# javascript - 通过 Javascript 在 Excel 中打开 HTML 页面

> ID：14839882
> 
> 赞同：2
> 
> 时间：2013-02-12T19:05:00.513
> 
> 标签：javascript, excel

我们有以 HTML 格式生成的报告，我们的用户经常在 Excel 中打开这些报告，我们通过使用 content-type 来提供足够简单的服务。然而，我们最近有一个皱纹弹出：其中一些报表使用大量的 Javascript 进行动态分组/排序，用户希望将这个“完成”版本的报表下载到 Excel 中。我有一个功能正常的Javascript函数：

```
var uri = 'data:application/vnd.ms-excel;base64,';
var template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">';
template += '<head></head>';
template += '<body><table>{table}</table></body></html>';
var base64 = function(s) { 
    return window.btoa(unescape(encodeURIComponent(s)));
};
var format = function(s, c) { 
    return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; });
};
var ctx = {worksheet: name || 'Worksheet', table: daBody};
window.location.href = uri + base64(format(template, ctx)); 
```

我发现 IE 不支持 window.btoa，所以我解决了这个问题，但现在尝试在 Excel 中打开数据时出现以下错误：

> 传递给系统调用的数据区域太小。

我相信，尽管有消息，这是由于 URI 中的 base64 字符串太长（我过去看到 IE 不接受极长的 URL，并相信这是连接的）。

那么，有没有人可以在 IE 中使用任何替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:15:44.397

找到了一种有效的方法：

1.  使用 jQuery 创建表单，收集页面的所有 HTML（在 Javascript 完成后）并将其发布到我的服务器
2.  在我的服务器上，我创建了一个函数，该函数接受表单 post 并以“application/msexcel”的返回类型返回它
3.  添加脚本以在报告页面的 window.load 上运行此 Javascript

它非常hacky，但它在所有浏览器中都像冠军一样工作

# ember.js - 新的 Ember 路由器的 enableLogging 去了哪里？

> ID：14839885
> 
> 赞同：2
> 
> 时间：2013-02-12T19:05:13.990
> 
> 标签：ember.js, ember-router

您如何使用新路由器（1.0.0-pre.4+）记录路由转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:05:13.990

从[1bf0df4 开始](https://github.com/emberjs/ember.js/commit/1bf0df4c95512dd42687a9b2b5ca3936a11aa09a)，您可以使用

```
App = Ember.Application.create({
  LOG_TRANSITIONS: true
}); 
```

请注意，这是在应用程序上，而不是在路由器上。

（感谢[#1673](https://github.com/emberjs/ember.js/issues/1673#issuecomment-11933602)中的@wildchild 提供指针。）

# android - 如何在 Eclipse 中为 android 的 google drive api 设置 Java Doc

> ID：14839887
> 
> 赞同：11
> 
> 时间：2013-02-12T19:05:14.270
> 
> 标签：android, eclipse, google-drive-api, javadoc

我在 Eclipse 中使用 google drive api for android，如何链接文档，以便当我将鼠标悬停在某些东西上时，我可以查看它的 java doc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:17:17.560

假设您使用的是 Android 开发工具 (ADT)，请参阅[https://stackoverflow.com/a/11579339/1369991](https://stackoverflow.com/a/11579339/1369991)了解如何操作。

请注意，libs 文件夹的内容将与您的应用程序捆绑在一起。因此，您确实应该将源代码和 Javadoc JAR 放在另一个文件夹中，甚至将它们放在您的工作区之外。该答案中描述的所有内容也适用于外部 JAR——在 Windows 上，您只需使用`\\`或`/`代替通常`\`的路径分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:46:39.400

我刚刚找到[了 Eclipse 的 Google 插件，](https://developers.google.com/eclipse/)第三个点说[Importing the latest Google APIs](https://developers.google.com/eclipse/docs/googleapis)

# java - 碰撞检测：圆形物体

> ID：14839891
> 
> 赞同：2
> 
> 时间：2013-02-12T19:05:34.723
> 
> 标签：java, collision-detection, collision, geometry, angle

我正在开发一个 Java 游戏（但开发语言并不重要），包括像球或冰球这样的圆形物体，现在正在研究碰撞。我使用计时器，所以在每一帧我检查是否发生碰撞。

这是一个表示对象右上角的图表。

![在此处输入图像描述](../Images/4f773fc8e215d25695a77ee231872fd9.png)

对象的中心由点[0,0]表示，其半径为10px，单位为像素。

现在，如果我的对象（例如`obj_1`）是方形/菱形（蓝线），要查找另一个 ( `obj_2`) 是否碰撞它，我只需要获取它们的坐标并通过检查`Math.abs(obj_1.x - obj_2.x) + Math.abs(obj_1.y - obj_2.y) <= radius`我会知道是否存在碰撞。

但是圆形（红线）的问题更棘手，因为它占用更多空间，而且这个占用的空间不受直线的限制。当然，我将不得不对一些值进行四舍五入（例如在上图中，如果我想检查碰撞，`x = 2`我将不得不将看起来像 9.5 的 y 值四舍五入到 10）。但我根本不知道如何得到这个公式。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:40:23.163

正如您提到的实现语言无关紧要，我将为您提供检测圆形物体碰撞的通用解决方案。

另外，据我所知，场景中的所有对象都是圆形。下面的解决方案不适用于检测圆形和其他形状之间的碰撞。

假设您有两个圆圈**c1**和**c2**。假设对应的半径是**c1.r**和**c2.r**，中心是**(c1.x,c1.y)**和**(c2.x, c2.y)**，那么下面的函数会判断 c1 和 c2 是否发生碰撞

```
boolean areColliding(Circle c1, Circle c2){

   center_distance = sqrt((x1-x2)^2 +(y1-y2)^2);  //this is the distance between the centers of the two circles.

  if((c1.r+c2.r) < center_distance)
           return false;
  else
          return true;

} 
```

如果圆圈发生碰撞，此伪代码函数将返回**true ，否则返回 false。**

基本上，该函数所做的是检查圆心之间的距离是否大于它们各自半径的总和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:15:51.173

在 Java 中，您有一个[java.awt.Polygon](http://docs.oracle.com/javase/6/docs/api/java/awt/Polygon.html)。

该类`Polygon`有多个包含方法和相交方法。

将圆定义为 a`Polygon`很痛苦，具体取决于您希望圆的准确程度。但是一旦将所有对象定义为`Polygon`s，就可以使用定义的方法来检测碰撞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:18:38.203

您可以在边界框中设置圆形。这将产生不太准确的碰撞，但与其他方法相比具有巨大的性能优势

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-01T11:56:25.173

@Ankit 解决方案的补充：

```
boolean areColliding(Circle c1, Circle c2){

    center_distance = (x1-x2)^2 +(y1-y2)^2;  //this is the distance between the centers of the two circles.

    if((c1.r+c2.r)^2 < center_distance)
        return false;
    else
        return true;
} 
```

这只是比较平方距离。结果是一样的，但没有平方根和巨大的性能优势。

# c# - SqlBulkCopy 问题

> ID：14839896
> 
> 赞同：1
> 
> 时间：2013-02-12T19:05:45.657
> 
> 标签：c#, .net, sql-server-2008, sqlbulkcopy

从 SqlExpress 数据库上的代码执行时，是否有人知道使用 SqlBulkCopy 的问题？

我有一个完整的 SQL Server 2008 实例和一个 SQL Server 2008 Express 实例。完整实例安装在服务器上，快速实例安装在本地测试机器上。每当我使用服务器连接字符串运行我的应用程序（使用以下代码）时，它执行得很好，我可以看到新插入的行和信息性消息。但是，每当我使用 Local Sql Express 连接字符串运行我的应用程序时，什么都没有发生，也没有收到任何消息，也没有插入表行。这是安装在测试机器上的桌面应用程序（运行 Sql Express 的同一台机器）

这真的让我很难过，因为我已经在 try catch 块中得到了所有内容，但没有抛出异常。似乎它没有执行。请指教！谢谢

这是我的代码：

```
 public static bool BulkInsertReminders(DataTable dtReminders)
    {
        bool success = false;
        string sql = "user id=" + DBEntries.DBUser + ";password=" + DBEntries.DBPassword + ";server=" + DBEntries.DBHost + ";database=" + DBEntries.LocalDB + ";Encrypt=YES;TrustServerCertificate=true";
        MessageBox.Show("Insert Rows Count: " + dtReminders.Rows.Count);
        using (SqlConnection msSQL = new SqlConnection(sql))
        {
            SqlTransaction copy = null;
            SqlCommand commandRowCount = new SqlCommand("SELECT COUNT(*) FROM " + "dbo.reminders", msSQL);
            try
            {
                msSQL.Open();
                copy = msSQL.BeginTransaction();
                using (SqlBulkCopy load = new SqlBulkCopy(msSQL, SqlBulkCopyOptions.TableLock, copy))
                {
                    load.BulkCopyTimeout = 15;
                    load.ColumnMappings.Add("reminder_id", "reminder_id");
                    load.ColumnMappings.Add("creation_date", "creation_date");
                    load.ColumnMappings.Add("created_by", "created_by");
                    load.ColumnMappings.Add("sent", "sent");
                    load.ColumnMappings.Add("sent_by", "sent_by");
                    load.ColumnMappings.Add("sent_date", "sent_date");
                    load.DestinationTableName = "dbo.reminders";
                    load.WriteToServer(dtReminders);
                    success = true;
                    commandRowCount.Transaction = copy;
                    int totalRows = Convert.ToInt32(commandRowCount.ExecuteScalar());
                    MessageBox.Show("New Table Row Count: " + totalRows + Environment.NewLine + "Rows Before Insert: " + (totalRows - dtReminders.Rows.Count));
                }
            }
            catch (Exception exc)
            {
                MessageBox.Show("Error - Issues adding reminders information to database.", "Contact Support");
                email err = new email();
                err.sendErrorEmail(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType.Name.ToString() + "." + System.Reflection.MethodBase.GetCurrentMethod().Name.ToString(), exc.Message, exc.Data, exc.StackTrace);
                success = false;
                copy.Rollback();
            }

        }
        return success;
    } 
```

# symfony - 结合 @Gedmo\NestedTree 和 @ORM\UniqueEntity

> ID：14839898
> 
> 赞同：0
> 
> 时间：2013-02-12T19:05:48.753
> 
> 标签：symfony, doctrine-orm, doctrine-extensions

我正在创建一个使用[NestedTree](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/tree.md "嵌套树")行为实现的文件夹结构。此外，如果它们是兄弟姐妹，我不希望两个文件夹可能具有相同的名称。为此，我使用`@UniqueEntity`和`@UniqueConstraint`注释的组合，但它不起作用。

首先我的实体（剥离到最低限度，因为它与 NestedTree 默认值 100% 相同）：

```
/**
 * @ORM\Entity
 * @Gedmo\Tree(type="nested")
 * @ORM\Entity(repositoryClass="Gedmo\Tree\Entity\Repository\NestedTreeRepository")
 * @UniqueEntity(fields={"parent", "name"})
 * @ORM\Table(uniqueConstraints={@ORM\UniqueConstraint(name="uniq_url", columns={"parent_id", "name"})})
 */
class Folder
{
    /**
     * @ORM\Column(type="string", nullable=false)
     */
    protected $name;

    /**
     * @Gedmo\TreeParent
     * @ORM\ManyToOne(targetEntity="Folder", inversedBy="children")
     * @ORM\JoinColumn(name="parent_id", referencedColumnName="id", onDelete="SET NULL")
     */
    protected $parent;
} 
```

## 第一次尝试（ignoreNull = true）

当我创建两个具有相同名称的文件夹时，我违反了完整性约束，这意味着`@UniqueConstraints`数据库中的 工作但`@UniqueEntity`没有：

```
Integrity constraint violation: 1062 Duplicate entry 'name_of_folder' for key 'uniq_url' 
```

## 第二次尝试（ignoreNull = false）

我还尝试将 ignoreNull 键设置为 false（默认为 true）：

```
@UniqueEntity(fields={"parent", "name"}, ignoreNull=false) 
```

但后来我得到这个错误：

```
Warning: ReflectionProperty::getValue() expects parameter 1 to be object, null given in vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/ClassMetadataInfo.php line 670 
```

我已将错误归结为以下几行`Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntityValidator`：

```
 $criteria[$fieldName] = $class->reflFields[$fieldName]->getValue($entity);

        if ($constraint->ignoreNull && null === $criteria[$fieldName]) {
            return;
        }

        if ($class->hasAssociation($fieldName)) {
            /* Ensure the Proxy is initialized before using reflection to
             * read its identifiers. This is necessary because the wrapped
             * getter methods in the Proxy are being bypassed.
             */
            $em->initializeObject($criteria[$fieldName]);

            $relatedClass = $em->getClassMetadata($class->getAssociationTargetClass($fieldName));
            //problem
            $relatedId = $relatedClass->getIdentifierValues($criteria[$fieldName]);

            if (count($relatedId) > 1) {
                throw new ConstraintDefinitionException(
                    "Associated entities are not allowed to have more than one identifier field to be " .
                    "part of a unique constraint in: " . $class->getName() . "#" . $fieldName
                );
            }
            $criteria[$fieldName] = array_pop($relatedId);
        } 
```

问题出现在标有 的行上`//problem`。看来这`$criteria[$fieldName] === null`是错误的原因。

所以我在这里，不知道该怎么做......有人知道发生了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:29:16.737

摆脱这种情况没有简单的方法。我终于按照自己的方式创建了一个验证器：

## 实体

```
/**
 * @ORM\Entity(repositoryClass="Ibiz\DoctrineExtensionsBundle\Entity\Repository\NestedTreeRepository")
 * @Gedmo\Tree(type="nested")
 * @ORM\Table(uniqueConstraints={@ORM\UniqueConstraint(name="uniq_url", columns={"parent_id", "name"})})
 * @IbizAssert\UniquePath("getName")
 */
class Folder
{
    /**
     * @ORM\Column(type="string", nullable=false)
     */
    protected $name;

    public function getName()
    {
        return $this->name;
    }

} 
```

## 验证器/约束/UniquePath.php

```
namespace Ibiz\DoctrineExtensionsBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;

/**
 * @Annotation
 */
class UniquePath extends Constraint
{
    public $em = null;
    public $errorMethod = null;
    public $message = 'The name "%name%" already exists.';
    public $service = 'ibiz.validator.unique_path';

    public function validatedBy()
    {
        return $this->service;
    }

    public function getRequiredOptions()
    {
        return array('errorMethod');
    }

    public function getDefaultOption()
    {
        return 'errorMethod';
    }

    public function getTargets()
    {
        return self::CLASS_CONSTRAINT;
    }
} 
```

## 验证器/约束/UniquePathValidator.php

```
namespace Ibiz\DoctrineExtensionsBundle\Validator\Constraints;

use Doctrine\Common\Persistence\ManagerRegistry;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Validator\Exception\ConstraintDefinitionException;
use Symfony\Component\Validator\Exception\UnexpectedTypeException;

class UniquePathValidator extends ConstraintValidator
{
    private $registry;

    public function __construct(ManagerRegistry $registry)
    {
        $this->registry = $registry;
    }

    public function validate($entity, Constraint $constraint)
    {
        if ($constraint->errorMethod === null)
        {
            throw new ConstraintDefinitionException('ErrorMethod should be set');
        } else if (!is_string($constraint->errorMethod)) {
            throw new UnexpectedTypeException($constraint->errorMethod, 'string');
        }

        if ($constraint->em) {
            $em = $this->registry->getManager($constraint->em);
        } else {
            $em = $this->registry->getManagerForClass(get_class($entity));
        }

        $className = $this->context->getClassName();
        $repo = $em->getRepository($className);

        $count = $repo->getSameNameSiblingsCount($entity);

        if ($count != 0) {
            $this->context->addViolation($constraint->message, array('%name%' => $entity->{$constraint->errorMethod}()));
        }
    }
} 
```

## 实体/存储库/NestedTreeRepository.php

```
namespace Ibiz\DoctrineExtensionsBundle\Entity\Repository;

use Gedmo\Tree\Entity\Repository\NestedTreeRepository as BaseRepository;

class NestedTreeRepository extends BaseRepository
{
    public function getSameNameSiblingsCountQueryBuilder($node)
    {
        $meta = $this->getClassMetadata();
        if (!$node instanceof $meta->name) {
            throw new InvalidArgumentException("Node is not related to this repository");
        }

        $config = $this->listener->getConfiguration($this->_em, $meta->name);
        $qb = $this->_em->createQueryBuilder();

        $qb->select($qb->expr()->count('n.id'))
            ->from($config['useObjectClass'], 'n');
        if ($node->getParent() === null) {
            $qb->where($qb->expr()->andx(
                   $qb->expr()->eq('n.name', ':name'),
                   $qb->expr()->isNull('n.parent')
               ))
               ->setParameters(array(
                   'name' => $node->getName(),
               ));
        } else {
            $qb->leftJoin('n.parent', 'p')
               ->where($qb->expr()->andx(
                   $qb->expr()->eq('n.name', ':name'),
                   $qb->expr()->eq('p.name', ':parent')
               ))
               ->setParameters(array(
                   'name' => $node->getName(),
                   'parent' => $node->getParent()->getName(),
               ));
        }

        return $qb;
    }

    public function getSameNameSiblingsCountQuery($node)
    {
        return $this->getSameNameSiblingsCountQueryBuilder($node)->getQuery();
    }

    public function getSameNameSiblingsCount($node)
    {
        return $this->getSameNameSiblingsCountQuery($node)->getSingleScalarResult();
    }
} 
```

# java - 如何在 Eclipse 中单击两次创建 maven 项目？

> ID：14839900
> 
> 赞同：0
> 
> 时间：2013-02-12T19:05:58.530
> 
> 标签：java, eclipse, maven, m2e

如何在 Eclipse 中单击两次创建 maven 项目？（单击打开对话框，然后输入名称等，单击完成）。

换句话说

有没有办法配置新 Maven 项目对话框的图标或快捷方式？（而不是通过 5 次点击文件 -> 新建 -> 项目 -> Maven -> Maven 项目）

我需要最简单的方法来创建初学者可以记住的 maven 项目。

![新建 Maven 项目对话框](../Images/8b485fb82f140835ed441331f44f7f9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:17:42.167

1.  按 Ctrl+3（在 Eclipse Juno 3.8 或 4.2 中）
2.  输入 Maven 选择新建 Maven 项目 ![Ctrl3](../Images/e34a997a76b73edc347e1e3ecfcbdb4a.png)

另见 [http://www.vogella.com/articles/EclipseShortcuts/article.html](http://www.vogella.com/articles/EclipseShortcuts/article.html)

# c# - 将数据存储在数据库中有时会导致数据损坏吗？

> ID：14839901
> 
> 赞同：-2
> 
> 时间：2013-02-12T19:05:59.500
> 
> 标签：c#, parsing, exception-handling, string-parsing

我有一个字段作为字符串存储在数据库中。它实际上是一个逗号分隔的数字字符串，我将其转换为一个长整数列表。进行转换的代码行看起来有点像这样：

```
TheListOfLongs = (from string s in StringFromDB.Split(',') 
                  select Convert.ToInt64(s)).ToList<long>(); 
```

创建数据库存储字符串的代码如下所示：

```
return String.Join(",", TheListOfLongs.Select(x=> x.ToString()).ToArray()); 
```

这工作正常，但正如您所见，如果由于某种原因字符串有问题，第一行代码中的代码会在`Convert.ToInt64(s)`.

现在我知道我可以将所有这些都包含在一个`try`语句中，但我的问题是：在数据库中存储和检索字符串是否会损坏字符串（在这种情况下我肯定需要`try`语句）或者这是一个万亿奇数类型的事件?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:13:24.820

我不会担心*损坏*的数据本身。但是，您肯定需要处理更一般的情况，即您无法解析应该是数字数据的内容。

即使在最受控制的情况下，为您无法按预期处理数据提供条件也是一种良好的编程习惯。这对您的应用程序意味着什么是您需要决定的。用 a 包裹语句`try..catch`将防止您的应用程序阻塞，但如果解析的列表稍后很关键，则可能不合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:10:48.533

从数据库中选择不应损坏您的字符串。

如果连接在传输过程中断开或类似情况，则会引发异常。

# c# - c# 中多个用户控件如何响应其中一个用户控件中发生的事件？

> ID：14839914
> 
> 赞同：0
> 
> 时间：2013-02-12T19:06:27.757
> 
> 标签：c#, winforms, events, checkbox, user-controls

我有一个由复选框组成的用户控件。我在一个表单上有 4 个这样的用户控件。当用户单击用户控件中的任何一个复选框时，我希望其他用户控件确保它们未被选中。类似于单选按钮的工作方式，除了我需要使用复选框和事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:24:57.400

`CheckBox`一种简单的方法是对es的所有事件使用单一方法并`sender`以这种方式利用对象：

```
List<CheckBox> listCheckBoxes; 
```

* * *

```
checkBox1.CheckedChanged += new EventHandler(checkBox_CheckedChanged);
checkBox2.CheckedChanged += new EventHandler(checkBox_CheckedChanged);
checkBox3.CheckedChanged += new EventHandler(checkBox_CheckedChanged);
checkBox4.CheckedChanged += new EventHandler(checkBox_CheckedChanged);

listCheckBoxes = this.Controls.OfType<CheckBox>().ToList(); 
```

* * *

```
void checkBox_CheckedChanged(object sender, EventArgs e){
    CheckBox checkBox = (CheckBox)sender;
    if(checkBox.Checked){
        foreach(CheckBox c in listCheckBoxes){
            if(c.Checked && c != checkBox)
               c.Checked = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:10:29.667

事件处理程序通常是表单（或自定义容器）的方法。您通常了解该级别的其他控件。如果您尝试在自定义控件本身上执行该事件处理程序，您将会遇到问题，因为您会将控件绑定到其他控件。

拥有某种具有事件处理程序来执行此逻辑的容器控件将是一个更好的设计。然后将该事件处理程序添加到`Click`每个复选框的事件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T19:10:59.550

将控件封装在一个`UserControl`. 当单个`CheckBox`控件上的事件触发时，会为其余`CheckBox`控件引发一般切换事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T20:20:07.967

好的，如果我假设正确的话。您在一个表单中有 4 个用户控件，它们需要在某些事件上相互通信（在您的情况下，这是由您的一个用户控件中的复选框引起的事件）

我会实现订阅者/发布者模型。
在 Usercontrol-A (publisher) 1) 在复选框上单击引发一个事件，将此转发到一个公共事件函数

包含 usercontrol 的页面类将订阅 UsercontrolA 的事件，并在需要时将其转发给 Usercontrol B（订阅者）

有关更多详细信息，请参阅此 [http://www.codeproject.com/Articles/15550/How-to-invoke-events-across-User-Controls-in-ASP-N](http://www.codeproject.com/Articles/15550/How-to-invoke-events-across-User-Controls-in-ASP-N)

# java - 同步代码

> ID：14839915
> 
> 赞同：0
> 
> 时间：2013-02-12T19:06:34.013
> 
> 标签：java, multithreading, synchronized

我在某处读到以下代码片段在同步代码方面是等效的：

```
public synchronized void printMsg() {
    System.out.println("synchronized");
}

public void printMsg() {
    synchronized(this) {
        System.out.println("synchronized");
    }
} 
```

据我所知，当线程访问对象上的同步方法时，其非同步方法不会被锁定，即其他线程可以使用相同的实例访问它们。

观察第二个片段，我的印象是，由于代码是同步的`this`，因此访问该代码的线程会获取对象上的锁。

我的问题是，当 Thraed`printMsg()`使用第二个代码片段维护执行方法的锁时，其他线程是否可以访问其他类方法？

如果不是，则上述方法并不完全相同。什么是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:13:22.347

您的第一种方法隐式地抓住了锁，`this`因此它与您的第二种方法相同。

在方法体中未同步或同步的任何其他方法`this`都不会尝试锁定对象，并且可以由其他线程并发运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:19:38.573

以上方法均等。一个线程不需要在对象上获取锁来访问它的方法，除非它们被标记为 synchronized 关键字 - ergo，即使有一个线程持有`synchronized (this)`锁，所有其他线程也会执行这些方法。

# python - 艰难地学习python练习17

> ID：14839921
> 
> 赞同：0
> 
> 时间：2013-02-12T19:06:43.167
> 
> 标签：python

从模块中的第 4 行获取太多值以解压。

```
script, from_file, to_file = argv  line. 
```

练习 17 示例

```
 from sys import argv
 from os.path import exists

 script, from_file, to_file = argv 
```

我知道我在做一些愚蠢的事情。使用 python 版本 2.7.3

这是练习中的逐字复制和粘贴：

```
from sys import argv
from os.path import exist

script, from_file, to_file = argv 
```

我已经尝试了这两种解决方案并得到了 Invalid sytax 错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:10:01.507

运行脚本时，需要提供两个命令行参数。假设脚本的名称是`test.py`，您需要将其运行为

```
python test.py fromfile.txt tofile.txt 
```

然后你的变量`script`将等于“test.py”， `from_file`将等于“fromfile.txt”，`to_file`将等于“tofile.txt”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:13:46.203

在python中，您可以像这样解压值

```
my_packed_values = ('v1', 'v2', 'v3')
v1, v2, v3 = my_packed_values
print v1
print v2
print v3 
```

你会一次得到`v1`一个`v2`字符串`v3`。

所以你可以解压三个值。如果你这样做`v1, v2 = my_packed_values`，你会得到那个错误。

所以如果`argvs`没有足够的值来解包（右边的数字和左边的数字不匹配），你会得到太多的解包。

这不是一个答案，但在写这个答案时@mbatchkarvo 已经指出了实际原因。

* * *

有`os.path.exists`，没有`os.path.exist`。但这不应该触发语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:22:47.140

我的建议总是在处理命令行参数时进行一些错误检查，例如。至少像这样简单的东西

```
from sys import argv,exit
if not len(argv)==3:
   print "argv is" , argv
   print "expected script fromfile tofile"
   exit()
script, from_file, to_file = argv 
```

或者，或者更多的pythonesque：

```
from sys import argv,exit
try:
   script, from_file, to_file = argv
except:
   print "argv is" , argv
   print "expected script fromfile tofile"
   exit() 
```

注意从 sys 导入 exit

# ascii - 什么是从源文本文件中删除扩展 ASCII 字符的 OSX 命令行工具或简单应用程序？

> ID：14839923
> 
> 赞同：0
> 
> 时间：2013-02-12T19:06:50.947
> 
> 标签：ascii, extended-ascii

我一直在将 Amazon Kindle 电子书中的一些代码片段剪切并粘贴到文本编辑器 (JetBrains PhpStorm) 中，显然每次它都带有一些扩展的 (>127) ASCII 字符。

是否有简单的 cmd 行 sed/awk/tr 命令，或简单的 OSX 应用程序将它们剥离？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:54:19.923

感谢[这篇博文](http://alvinalexander.com/blog/post/linux-unix/how-remove-non-printable-ascii-characters-file-unix)，这里有一个对我很有效的解决方案：

```
tr -cd '\11\12\15\40-\176' < infile > outfile 
```

请注意，如果您收到此错误：**tr: Illegal byte sequence**，这可以通过设置 LANG=C 来解决：

```
export LANG=C 
```

（不知道为什么设置 LANG=C 有帮助，但这就是其他有同样问题的人正在做的事情）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T20:16:40.477

[Plain Clip](http://www.bluem.net/en/mac/plain-clip/)一直是我的首选 OS X 应用程序，用于去除不需要的字符/空白/等。

# android - 软键盘重叠 Edittext

> ID：14839927
> 
> 赞同：2
> 
> 时间：2013-02-12T19:07:33.850
> 
> 标签：android, android-edittext, android-softkeyboard, overlapping

问题 - 为什么软键盘与 Edittext 重叠（如下图所示）已在 SO 被问过多次。

![在此处输入图像描述](../Images/f86dc19e872a1292e53b35fe5147e543.png)

我遇到了两个答案

1.  将 ScrollView 添加为顶部容器，实际上它解决了问题，但在我的情况下，它会产生另一个问题。
2.  添加 android:windowSoftInputMode="adjustResize" 或 adjustPan 或几种组合，这不起作用。

**我的问题**

有没有其他解决方案来解决这个问题？

我也对为什么会发生这种情况感到沮丧，框架不应该处理这个问题。

# scala - 在具有多个 play 2 框架实例的服务器上执行外部脚本

> ID：14839931
> 
> 赞同：0
> 
> 时间：2013-02-12T19:07:51.397
> 
> 标签：scala, cron, playframework-2.0

我有一个 linux 服务器，上面有三个 play 2 框架实例，我想定期执行一个外部 Scala 脚本，该脚本可以访问所有应用程序环境（模型）并且一次只执行一次。

我想从 crontab 调用这个脚本，但我找不到任何关于如何做的文档。我知道我们可以从全局对象调度异步任务，但我希望脚本只为三个播放实例执行一次。

实际上，我想为那些了解它们的人做与 Ruby on Rails rake 任务相同的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:44:18.883

为此任务创建一个`action`可通过 http 访问的常规，然后您可以使用 ie。`curl`在 unix'`crontab`中调用该操作，它将命中第一个可用实例。

其他可能性是......使用`Global`对象来安排`Akka`支持的任务。在这种情况下，要确保只有一个实例会安排任务，您需要以某种方式确定应该是哪一个。如果您使用指定端口启动所有 3 个实例（每个实例始终相同），您可以阅读`http.port`以允许或跳过执行。

最后，您可以使用数据库通知其他实例，该任务刚刚执行：所有 3 个实例都尝试执行 Akka 调度程序，但在执行任务之前，他们可以检查该任务是否仍有 TODO 标志。如果不是，实例将 TODO 标志设置为 false 并继续执行，否则这次只是跳过执行。

您也可以使用文件系统进行类似的方法：在执行开始时，创建标志文件以通知其他实例，这一次他们可以跳过任务。

# c# - PowerShell 模块是 C# 中类的更接近的“东西”吗？

> ID：14839934
> 
> 赞同：1
> 
> 时间：2013-02-12T19:08:12.140
> 
> 标签：c#, powershell, powershell-2.0, powershell-3.0

这是我之前问题的延续：

[如何在 PowerShell 中创建具有行为（方法）的真实对象？](https://stackoverflow.com/q/14835983/1268570)

我认为现在我可以将我的行为封装在类中，但我仍然认为这种方法很老套，我想*用 PowerShell 方式解决这个问题*

因此，Powershell 模块似乎是答案......

我想知道，例如，如果我想在 PowerShell 中以面向对象的方式封装行为，那么最好的选择/方法是什么？

PowerShell 模块是为此目的而设计的吗？

**编辑 01**

换句话说，你们是如何编写脚本的？

你只是以*程序方式编写它们吗*

或者...

在编写 PowerShell 脚本时，是否有更简洁的方法来应用一些面向对象的编程概念？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:27:06.793

不知道这是否是最好的方法，但为什么不使用 pscustomobject 呢？

```
$o=New-Object -TypeName pscustomobject -Property @{"val"="test"}
Add-Member -InputObject $o -MemberType ScriptMethod -Name upper -Value {$this.val.toUpper()}
$o.upper()

TEST 
```

或者，也许您会在 codeplex 上对这个项目感到满意：http: [//psclass.codeplex.com/](http://psclass.codeplex.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T19:28:33.923

我对此的看法如下。我不相信脚本语言曾经是面向对象的。他们中的大多数会支持某种对象模型，但这不是他们的主要目的。

Powershell 确实支持它，因为它建立在 .NET 之上，因此您可以完全访问 .NET 的对象模型。

您可以在 powershell 脚本（包含类和所有）中编写内联 C# 代码并即时编译它，然后重复执行。一旦你习惯了这样做，这并不难。

就其自身而言，powershell 并没有提供远远超出 .NET 的对象系统。

如果您还没有找到它，请参考[Add-Member](http://technet.microsoft.com/en-us/library/hh849879.aspx) cmdlet，如果出于任何宗教或文化原因您不想在 powershell 代码中嵌入 c# 类，那将是最接近您所追求的。

希望这可以帮助。

# c# - 控制外部 Qt 应用程序 - 打开文件

> ID：14839936
> 
> 赞同：0
> 
> 时间：2013-02-12T19:08:17.067
> 
> 标签：c#, qt, ui-automation

我需要能够控制外部 Qt 应用程序，以便可以在应用程序中打开文件。

我尝试使用 Process 来获取窗口句柄，然后通过 PInvoke 使用 GetMenu、GetSubMenu 和 GetMenuItemID 来获取使用 SendMessage 的所有参数，并在外部应用程序的打开菜单上“单击”

如果我使用记事本作为外部应用程序尝试它，这非常有效，但不适用于使用 Qt 编写的实际应用程序。

我确实得到了 Window 句柄，但 GetMenu 返回 0。

我有这个代码

```
[DllImport("user32.dll")]
private static extern IntPtr GetMenu(IntPtr hWnd);

[DllImport("user32.dll")]
private static extern IntPtr GetSubMenu(IntPtr hMenu, int nPos);

[DllImport("user32.dll")]
private static extern uint GetMenuItemID(IntPtr hMenu, int nPos);

[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

private void OpenButton_Click(object sender, EventArgs e)
{
    OpenDocument("notepad", "test.doc");
}

public void OpenDocument(string windowTitle, string document)
{
    IntPtr hWnd = GetWindow(windowTitle);
    IntPtr hMenu = GetMenu(hWnd);
    IntPtr hSubMenu = GetSubMenu(hMenu, 0);    // File menu
    uint menuItemId = GetMenuItemID(hSubMenu, 2);  // Open

    IntPtr ptr = SendMessage(hWnd, (uint)WM.COMMAND, (IntPtr)menuItemId, IntPtr.Zero);
}

private static IntPtr GetWindow(string windowTitle)
{
    IntPtr hWnd = IntPtr.Zero;
    Process[] processes = Process.GetProcesses();
    foreach (Process p in processes)
    {
        if (p.MainWindowTitle.IndexOf(windowTitle, StringComparison.InvariantCultureIgnoreCase) > -1)
        {
            hWnd = p.MainWindowHandle;
            break;
        }
    }

    return hWnd;
} 
```

如何从 Qt 应用程序中获取菜单和子菜单以及 menuitemid 的句柄？

// 安德斯

# java - 当我将它放入与将其从数据库中拉出时，new String(byte[]) 会给出不同的结果

> ID：14839941
> 
> 赞同：0
> 
> 时间：2013-02-12T19:09:07.520
> 
> 标签：java, postgresql, character-encoding, file-encodings, glassfish-2.x

在我将字节数组保存到数据库之前，如果我打印它的输出`new String(data)`会返回一个可读的字符串，例如“foobar”，但是在我将它从数据库中拉出之后，`new String(data)`会读起来像一堆乱码，例如“9238929384739427349327 ...”。这里有很多部分，我将尝试将它们全部列出。我正在使用 eclipselink 并且我的数据列已定义：

```
@Lob
@Column(name = "data")
private byte[] data; 
```

如果我运行此代码：

```
public static void main(String[] args) {
    System.out.println(Charset.defaultCharset());
} 
```

它输出`windows-1250`.

我的数据库定义为：

```
CREATE DATABASE project_trunk
  WITH OWNER = project
       ENCODING = 'UTF8'
       TABLESPACE = pg_default
       LC_COLLATE = 'English_United States.1252'
       LC_CTYPE = 'English_United States.1252'
       CONNECTION LIMIT = -1; 
```

我也在这样定义的数据库上试过这个：

```
CREATE DATABASE project_trunk
  WITH OWNER = project
       ENCODING = 'UTF8'
       TABLESPACE = pg_default
       LC_COLLATE = 'en_US.UTF-8'
       LC_CTYPE = 'en_US.UTF-8'
       CONNECTION LIMIT = -1; 
```

并且问题仍然存在。

我认为发生的事情是我的数据库与我的应用服务器的编码不同。当我将内容放入数据库并再次将其取出时，它以错误的方式对其进行解码，因此看起来像乱码。我有什么事情吗？

现在，当谈到解决这个问题时，我有点困惑。我认为我应该做的是将我的应用服务器的文件编码更改为与数据库相同。我正在使用 Glassfish 2.1.1。当我`application server -> advanced -> domain attributes`将语言环境设置为“UTF8”或“UTF-8”时，它告诉我需要重新启动。重新启动 glassfish 后，该字段仍为空白，并且仍然出现错误。我想也许它没有节省财产。我会手动将它放在配置文件中，但我不知道该放在哪里或放什么。

或者，我尝试使用 ENCODING = 'WIN1250' 创建我的数据库，但是当我这样做时，它说我的 LC_CTYPE 需要是“WIN1252”。当我将 LC_CTYPE 设置为“WIN1252”时，它说编码不存在。

* * *

我在这方面花了很多时间，我想知道我是否在这里做一些事情。我的“appserver 和 db 之间的编码不同步”的理论听起来是正确的，还是我在追逐红鲱鱼？如果有人可以帮助我弄清楚如何更改 glassfish 2.1.1 的此设置，那也将非常有帮助。谢谢

编辑：人们问我为什么将字符串存储为原始字节。这不完全是我正在做的事情，有时原始字节代表图像或pdf或二进制文件，有时是文本。我的**测试**是插入一个纯文本字符串并将其拉回以确保它被正确保存。这个测试通过了我们在 linux 上的 CI 服务器。

EDIT2：我被要求显示原始二进制输入与原始二进制输出。

> 预期：[116、104、105、115、32、105、115、32、109、121、32、97、116、116、97、99、104、109、101、110、116、32、97、115 , 32, 97, 32, 83, 116, 114, 105, 110, 103]
> 
> 实际：[60, 54, 56, 54, 57, 55, 51, 50, 48, 54, 57, 55, 51, 50, 48, 54, 100, 55, 57, 50, 48, 54, 49, 55 , 52, 55, 52, 54, 49, 54, 51, 54, 56, 54, 100, 54, 53, 54, 101, 55, 52, 50, 48, 54, 49, 55, 51, 50, 48 , 54, 49, 50, 48, 53, 51, 55, 52, 55, 50, 54, 57, 54, 101, 54, 55]

我给了我在 Mac 上的同事检查字节的相同测试，并且它通过了他。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:34:17.860

> 有时原始字节代表图像或pdf或二进制文件，有时是文本

好的，那么您不应该将它们存储为文本。

不管当前出了什么问题，即使你可以让它适用于*实际上是*文本的数据，你以后也会遇到问题。

如果您*必须*将任意二进制数据存储为文本，则应使用 base64 对其进行编码 - 这样您就可以毫无问题地返回原始二进制数据。（您只需要能够传输 ASCII 字符串，这通常相当容易。） Base64 有很多第三方库。我喜欢[这个独立的公共领域之一](http://iharder.net/base64)。

或者，将数据*作为*二进制数据存储在数据库中，例如使用[`bytea`](http://www.postgresql.org/docs/9.2/static/datatype-binary.html)数据类型的字段。这样你就不需要做任何转换工作：你应该能够把它作为一个字节数组放入数据库，然后把它作为一个字节数组取出。

编辑：好的，看起来你正在取回二进制数据的*十六进制*表示，但在 ASCII 中。这显然很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:24:36.840

事实证明，这是由于 PostgreSQL 在版本 9 和版本 8 中的工作方式造成的。我的大多数同事都使用版本 8，但我最近有了一台新计算机，所以我使用了最新的 PostgreSQL。

您需要将 output_bytea 设置为“escape”。

[使用 jpa 从 postgres 读取 byte[] 时长度几乎增加一倍](https://stackoverflow.com/questions/6181524/getting-nearly-double-the-length-when-reading-byte-from-postgres-with-jpa)

虽然我没有找到足够的答案，但我在邮件列表中找到了这个并解决了我的问题： [http ://www.postgresql.org/message-id/AANLkTikkE-jQ9srZ9VL1JuJ5h=UCutx8ZLim+OfQ1T4z@mail.gmail .com](http://www.postgresql.org/message-id/AANLkTikkE-jQ9srZ9VL1JuJ5h=UCutx8ZLim+OfQ1T4z@mail.gmail.com)

> 亲爱的名单，
> 
> 最近在 9.0 中将 bytea_output 格式从 escape 更改为 hex 显然破坏了流行的持久会话处理 perl 模块，例如 Apache::Session::Postgres，它将腌制数据结构存储在 db 表的 bytea 列中。很难从所述模块抛出的异常中猜测根本原因。该问题通过在 postgresql.conf 中添加 bytea_output='escape' 并发出 pg_ctl 重新加载来解决。
> 
> 例如，在 RT 应用程序中，错误是：错误：RT 无法存储您的会话。这可能意味着目录 /blah/blah/foo/bar 不可写或数据库表丢失或损坏
> 
> Regds Rajesh Kumar Mallah。

# apple-push-notifications - 通过 Urban Airship 向 Passbook 推送通知未出现在设备上

> ID：14839943
> 
> 赞同：1
> 
> 时间：2013-02-12T19:09:08.360
> 
> 标签：apple-push-notifications, urbanairship.com, passbook

我发现这篇文章对设置非常有帮助，但我还没有看到安装了通行证的 iPhone 上的推送通知。

[Passkit-push-notification-not-working-with-urban-airship](https://stackoverflow.com/questions/12623623/passkit-push-notifications-not-working-with-urban-airship/12650387#12650387)

我在 Urban Airship 的网站上设置了我的应用程序，推送到 Apple 的开发服务器。我在我的手机上安装了一个 pass 并运行我在上面的帖子中找到的以下命令：

```
airship = urbanairship.Airship(_UrbanAirshipPassbookKey, _UrbanAirshipPassbookMasterSecret) 
airship.push({'aps': {'alert': 'Go.'}}, device_tokens=tokens) 
```

然后，我在 Xcode 的 iPhone 控制台窗口中看到了此推送的确认。

```
Received push for topic pass.xxx.xxx: {
    ...
    aps =  {
        banner = "Hello";
    }; 
```

然后 iPhone 将其更新标签连同其传递类型 ID 和设备库 ID 发送回 Web 服务。此时，Web 服务应该发回更改的通行证列表。但是，我反而看到以下错误消息：

```
<Warning>: Web service error for pass.mypasstype.id (http://192.168.30.209:8000): Response to 'What changed?' request included 1 serial numbers but the lastUpdated tag (2013-02-11T17:25:25) remained the same. 
```

有谁知道为什么会这样？我是否需要实际修改 pass 中的字段才能让推送通知出现在设备上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:37:12.093

对您的问题的简短回答是肯定的，您确实需要修改通行证中的一个字段才能获得要显示的推送通知。这是因为，与应用程序推送不同，Passbook 推送负载不决定通知的内容。

Passbook 推送消息的目的是提醒设备 Web 服务具有更新内容的新通行证。警报文本仅由新通行证内容决定。推送负载中的任何内容都将被忽略。Apple 建议[使用空 JSON 字典的推送通知](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Updating.html#//apple_ref/doc/uid/TP40012195-CH5-SW1)。

发送推送后，它会触发以下链：

*   `passTypeIdentifier`设备接收带有and`lastUpadted`标签的推送和查询 Web 服务
*   Web 服务为所有通行证提供一个序列列表，其中包含自标记`passTypeIdentifier`以来已更改的序列`lastUpdated`
*   设备接收序列号并请求 Web 服务为每个新通道发送新的 .pkpass 包
*   Web 服务发送新的 .pkpass 包
*   设备收到 .pkpass 包并根据旧通行证检查它是否有更改
*   如果满足以下条件，设备将显示在`changeMessage`密钥中提供的通知：
    *   值变了
    *   包含`changeMessage`%@ 字符串

如果 %@ 字符串不存在，则通行证将显示通知`Pass Changed`。如果`changeMessage`更改后的值不存在任何键，则不会显示任何消息。

# c++ - 模棱两可的转换 - C++

> ID：14839946
> 
> 赞同：0
> 
> 时间：2013-02-12T19:09:13.723
> 
> 标签：c++, numbers, type-conversion

我正在尝试使用 C++ 和 Xcode 作为编译器编写一个函数，该编译器将测试 a 是否为回文。当参数是“C++ 天生”类型（例如 int、long、double 等）时，代码运行良好，但我想将该函数用于更大的值。所以我使用了[BigInteger](https://mattmccutchen.net/bigint/)类型的参数。但是编译器给出了一个错误就行了

```
 BigInteger q = x - floor(x.toLong()/10)*10 
```

这么说`Conversion from 'double' to 'const BigInteger' is ambiguous`。这是整个代码：

```
#include <iostream>
#include "BigInteger.hh"

using namespace std;
bool isPalindrom(BigInteger x){
long ch = ceil(log10(x.toUnsignedLong())), n[ch];
//    cout << floor(log10(x)) + 1 << endl;
for (int i = 0; i <= ch; i++){
    BigInteger q = x - floor(x.toLong()/10)*10;
    n[i] = q.toInt();
    //        cout << n[i] << endl;
    x /= 10;
}

for (long i = 0; i <= ceil(ch); i++){
    if (n[i] != n[ch - i]){
        return false;
    }
}
return true;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:30:22.840

`BigInteger`如果您要一直转换为多头，那么使用它就没有什么意义了。

您可以仅使用操作来编写该内容`BigInteger`，其方式与使用原始整数完全相同：

```
bool isPalindrome(BigInteger x){
   std::vector<int> digits;
   while (x > 0)
   {
      digits.push_back((x % 10).toInt());
      x /= 10;
   }

   size_t sz = digits.size();
   for (size_t i = 0; i < sz; i++){
      if (digits[i] != digits[sz - i - 1]){
         return false;
      }
   }
   return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:13:19.780

也许

```
 BigInteger q (static_cast<long>(x - floor(x.toLong()/10)*10)); 
```

可能会使编译器更快乐。查看[BigInteger.hh](https://mattmccutchen.net/bigint/bigint.git/blob/HEAD:/BigInteger.hh)中的公共构造函数。请注意，`floor`给出 a `double`，因此减法也给出 a `double`，并且`BigInteger`没有构造函数。

# jsf - primefaces spinner 无法保存值以在另一个类中使用

> ID：14839948
> 
> 赞同：2
> 
> 时间：2013-02-12T19:09:20.103
> 
> 标签：jsf, primefaces

有点奇怪，我有一个旋转器工作，

```
<p:spinner min="1" max="1000" value="#{printerSettings.t}"  size ="1">
    <p:ajax update="NewTime"/>
</p:spinner>
<h:outputText value="#{printerSettings.getNewTime()}" id="NewTime"/> 
```

每次增加 1 并且 ajax 工作正常

这是服务器端java代码：

```
public int getT() {
    return (t);
}

public void setT(int t) {
    this.t = t;
} 
```

我想知道的是如何保存 t 的最终值，因为我想在另一个类中使用这个值，我试过了

```
 t = ((new PrinterSettings().getT()) * 60); 
```

在课堂上我想使用 t 但我总是得到 1 而不是微调器留下的值

我该如何解决这个问题

编辑：

```
@ManagedBean
@RequestScoped
public class PrintInTen {

private int t;

public void tValue(int t) {
    this.t = t;
    System.out.println("My t value : " + t);
}

    public void countDown() { 
```

是我试图让 t 发送到的 bean

我创建了一个按钮将其发送到上面：

```
<p:commandButton actionListener="#{printInTen.setTValue(printerSettings.t)}" value="Set Val" /> 
```

但我得到一个错误：`unknown property setTvalue`

我在这里正确吗？我该如何解决这个错误

得到这个错误

```
SEVERE: Received 'javax.el.MethodNotFoundException' when invoking action listener '#{printInTen.setTValue(printerSettings.t)}' for component 'j_idt17'
SEVERE: javax.el.MethodNotFoundException: Method setTValue not found
    at javax.el.BeanELResolver.findMethod(BeanELResolver.java:751)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:527)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt8:j_idt17, Message=Method setTValue not found
SEVERE: Method setTValue not found
javax.faces.event.AbortProcessingException: Method setTValue not found
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.el.MethodNotFoundException: Method setTValue not found
    at javax.el.BeanELResolver.findMethod(BeanELResolver.java:751)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:527)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T19:17:14.247

如果你正在创建一个新的`PrinterSettings`，你将总是得到 1。

您必须找到一种方法将您的注入到`PrinterSettings`您想要使用它的新类中。

它看起来像这样：

```
@ManagedProperty("#{PrinterSettings"})
private PrinterSettings printerSettings; 
```

然后你可以用它来获得你需要的价值。

**还要**确保您在正确的范围内。

## 或者

您可以`onsubmit`或单击按钮将微调器的值设置为新 bean。

```
<p:button actionListener="#{otherBean.tValue(printerSettings.t)}" value="Set Val" /> 
```

### 编辑

在对问题进行编辑之后，您的 bean 将如下所示：

```
@ManagedBean
@RequestScoped
public class PrintInTen {

    private int t;

    public void tValue(int t) {
        this.t = t;
        System.out.println("My t value : " + t);
    }
    ...
} 
```

*未经测试，但应该可以工作*

## 也可以看看

有关JSF 中的通信的更多信息，请参阅[这篇文章。](http://balusc.blogspot.ca/2011/09/communication-in-jsf-20.html)

# jquery - 首次单击 jQuery 时启动事件

> ID：14839949
> 
> 赞同：2
> 
> 时间：2013-02-12T19:09:26.757
> 
> 标签：jquery

jQuery 中是否有可能添加事件，例如`alert('hi');`仅用于首次单击？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T19:10:14.507

是的，您可以使用[一个](http://api.jquery.com/one/)绑定功能：

```
myelement.one('click', function() { 
    alert('hi');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:10:42.310

您可以创建一个布尔值来检查它是否是第一次点击，如下所示：

```
var clicked = false;

$(document).click(function() {
    if(!clicked){
          alert("hi");
          clicked = true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:16:32.547

只要 dom 没有重新加载，Jquery one 绑定解决方案就会对您有好处。即用户在同一页面上而不刷新。

如果您需要使用此功能，包括重新加载页面，有 3 种方法：

1.使用数据库 2.使用会话 3.使用 Cookie

这些都是服务器端解决方案，允许您控制用户点击事件。如果这是您正在寻找的内容，我将对此进行详细说明并编写代码示例。如果不是一个有约束力的建议是好的。希望这有帮助。

# php - PHP 倒计时增加了两个小时

> ID：14839951
> 
> 赞同：0
> 
> 时间：2013-02-12T19:09:32.297
> 
> 标签：php, datetime, time, countdown

```
currentime=strtotime('22:00:00');
rem=currentime - strtotime('now'); //now is 20:00:00
remaining=date("H:i:s",rem); 
```

我的问题是，剩下的节目`04:00:00`而不是`02:00:00`

有什么线索吗？我也设置`date_default_timezone_set`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:12:02.723

检查 php.ini 文件中的设置。应该有与此类似的行： date.timezone = UTC

尝试将其设置为您的时区。

# oracle - 使用 PL/SQL 写入 docx 文件

> ID：14839952
> 
> 赞同：0
> 
> 时间：2013-02-12T19:09:38.677
> 
> 标签：oracle, plsql, docx

我实际上正在为 Oracle 数据库审计目的编写 PL/SQL 包（包含总 RAM、操作系统版本、内存比率等信息），我想将此审计的输出写入 docx 文件（或任何文件Microsoft Office 2007 可读和可编辑的格式）。我怎样才能做到这一点 ？

我找到了一种方法，但这并不是我想要的，因为您必须使用带有标签的模板并将值逐一绑定到这些标签（[http://ora-00001.blogspot.fr/2011/02/working-with- office-2007-ooxml-files.html](http://ora-00001.blogspot.fr/2011/02/working-with-office-2007-ooxml-files.html) )。此外，我必须在审计之前部署一个包，这并不总是可能的。

如果我可以在没有外部软件包（第三方）的情况下做到这一点，那就太酷了！

谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:33:24.950

是的，这可以在不使用外部库的情况下完成。我只能给你一个大纲，而不是实际的代码。

首先，`.docx`,`.xlsx`格式不是实际的文档；它们是 zip 文件。可以使用 Java 存储过程从数据库[创建一个 zip 文件。](http://hidowb.blogspot.co.uk/2008/05/so-you-want-to-create-zip-file-in.html)其次，其中的文件是可读的文本格式，XML等。

如果我们看一下我创建的一个，您就会明白我的意思。

```
[19:28:27]\\ELZAR\h:\ unzip -l blah.docx
Archive:  blah.docx
 Length    Date    Time    Name
 ------    ----    ----    ----
   2387  01-01-80  00:00   [Content_Types].xml
    590  01-01-80  00:00   _rels/.rels
   1880  01-01-80  00:00   word/_rels/document.xml.rels
 107400  01-01-80  00:00   word/document.xml
   2460  01-01-80  00:00   word/footer2.xml
   1428  01-01-80  00:00   word/endnotes.xml
   1434  01-01-80  00:00   word/footnotes.xml
   2624  01-01-80  00:00   word/header1.xml
    289  01-01-80  00:00   word/_rels/header1.xml.rels
   2497  01-01-80  00:00   word/footer1.xml
2765888  01-01-80  00:00   word/media/image1.emf
   7076  01-01-80  00:00   word/theme/theme1.xml
   4600  01-01-80  00:00   word/settings.xml
    363  01-01-80  00:00   word/_rels/settings.xml.rels
  25836  01-01-80  00:00   word/styles.xml
    341  01-01-80  00:00   customXml/itemProps1.xml
  54486  01-01-80  00:00   word/numbering.xml
    296  01-01-80  00:00   customXml/_rels/item1.xml.rels
    218  01-01-80  00:00   customXml/item1.xml
    808  01-01-80  00:00   docProps/core.xml
   2786  01-01-80  00:00   word/fontTable.xml
   2826  01-01-80  00:00   word/webSettings.xml
  26589  01-01-80  00:00   word/stylesWithEffects.xml
   1025  01-01-80  00:00   docProps/app.xml
 ------                    -------
3016127                    24 files 
```

由于这些都是普通文件，您可以使用诸如[UTL_FILE](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm)之类的东西来编写它们。

我会认真考虑您输出到 a 的动机`.docx`；这并不容易，但是是的；这是可能的。

为什么不简单地将信息存储在数据库中并根据该信息创建报告，例如，您可以通过电子邮件发送给自己。你的生活会轻松很多。

# animation - 在一张图像中创建帧动画的软件

> ID：14839953
> 
> 赞同：0
> 
> 时间：2013-02-12T19:09:44.940
> 
> 标签：animation, 2d

我想在 SFML 中创建 2D 动画。最好的办法是创建一个除以正方形的图像。x 轴上的每个方块都是动画序列。即图像除以 10x10 是 100 帧动画。

什么软件最适合创建这种类型的图像（需要单独编辑每一帧并添加移动效果、运动模糊和其他，我需要一次查看所有帧）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:53:06.450

无论适合您和您的项目需求。

如果您正在使用一些技术实体，那么您可能想要创建实际的 3D 模型并渲染不同的设置等。为此，您基本上可以使用任何 3D 建模软件。作为自由软件的支持者，我建议使用[Blender](http://www.blender.org/)。

如果您想留在 2D 世界中，那么您通常会得到[GIMP](http://www.gimp.org/)或[Adob​​e Photoshop](http://www.photoshop.com/)的答案。

如果你想要一些专业的东西，你最好的起点就是[谷歌](https://www.google.ch/search?q=google%20sprite%20animation%20software)。

# reference - 编辑变量而不编辑原点

> ID：14839954
> 
> 赞同：0
> 
> 时间：2013-02-12T19:09:44.333
> 
> 标签：reference, python-2.7, mutable

我需要复制一个变量并对其进行更改。我已经看过[这个](https://stackoverflow.com/questions/13538266/python-copy-of-a-variable)，但我想要相反的。在这段代码中，我需要返回的元组是两个不同的列表，而不是相同的。

```
def getIPRange(self):
    group = [0, self.getJoinedNetworks() - 1]
    while True:
        if self.ip[2] > group[0] and self.ip[2] < group[1]:
            res_ip_min = self.ip      #self.ip is for example [70, 30, 20, 0]
            res_ip_min[2] = group[0]
            res_ip_min[3] = 1

            res_ip_max = self.ip
            res_ip_max[2] = group[1]
            res_ip_max[3] = 254

            return (res_ip_min, res_ip_max)

        else:
            group[0] = group[1] + 1
            group[1] = group[0] + self.getJoinedNetworks() - 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:14:42.177

最常见的可能是做

```
...
res_ip_min = list(self.ip)
...
res_ip_max = list(self.ip)
... 
```

它从 self.ip 的元素创建一个新列表。或者，您可以使用[python 的复制实用程序](http://docs.python.org/2/library/copy.html)

# java - Java RMI 服务器端线程

> ID：14839955
> 
> 赞同：3
> 
> 时间：2013-02-12T19:09:45.313
> 
> 标签：java, rmi

我刚刚开始使用 RMI，我正在尝试编写一个模拟火车预订系统的简单程序。我已经设置了基础 - 服务器、客户端和导出的远程对象。它适用于一个客户端连接。但是，当超过 1 个客户端连接时，客户端似乎在同一个线程中执行。当我在同一台机器上运行多个客户端或从另一台笔记本电脑连接客户端时就是这种情况。

我的印象是 RMI 在服务器端处理线程？如果没有，我该如何处理给定以下代码的多个客户端连接？

以下是感兴趣的课程。

服务器.....

```
public class Server {

    public Server() {
        try {
            Booking stub = (Booking) UnicastRemoteObject.exportObject(new BookingProcess(), 0);
            Registry registry = LocateRegistry.getRegistry();
            registry.bind("Booking", stub);
            System.err.println("Server Ready");
        } catch (RemoteException e) {
            System.err.println("Server exception: " + e.toString());
            e.printStackTrace();
        } catch (AlreadyBoundException e) {
            System.err.println("Server exception: " + e.toString());
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        Server server = new Server();
    }

} 
```

BookingProcess .....（我省略了 processInput(String input) 使用的私有方法）

```
public class BookingProcess implements Booking {

    private static Journey dublinGalway = new Journey("Dublin to Galway");
    private static Journey dublinLimerick = new Journey("Dublin to Limerick");
    private static Journey dublinCork = new Journey("Dublin to Cork");
    private Journey currentJourney;

    private enum State {
        INITIAL, JOURNEYS_DISPLAYED, JOURNEY_CHOSEN, ANOTHER_BOOKING_OFFERED, SOLD_OUT;
    }

    private State currentState = State.INITIAL;

    public synchronized String processInput(String input) {
        String output = "";

        if(currentState == State.INITIAL) {
            if(bookedOut()) {
                output = "Sorry, there are no seats remaining on any route. Get the bus.";
                currentState = State.SOLD_OUT;
            }
            else {
                output = "Please choose a journey to book: " + "1: " + dublinGalway.getDescription() + ", 2: " + dublinLimerick.getDescription() + ", 3: " + dublinCork.getDescription();
                currentState = State.JOURNEYS_DISPLAYED;
            }
        }

        else if(currentState == State.JOURNEYS_DISPLAYED) {
            output = this.processJourneyChoice(input);
        }

        else if(currentState == State.JOURNEY_CHOSEN) {
            output = "Do you wish to confirm this booking? (y/n)";
            if(input.equalsIgnoreCase("y")) {
                if(bookingConfirmed()) {
                    output = "Thank you. Your journey from " + currentJourney.getDescription() + " is confirmed. Hit return to continue.";
                    //currentState = State.ANOTHER_BOOKING_OFFERED;
                }
                else {
                    output = "Sorry, but the last seat on the " + currentJourney.getDescription() + " route has just been booked by another user.";
                    //currentState = State.ANOTHER_BOOKING_OFFERED;
                }
                currentState = State.ANOTHER_BOOKING_OFFERED;
            }
            else if(input.equalsIgnoreCase("n")) {
                output = "You have cancelled this booking. Hit return to continue.";
                currentState = State.ANOTHER_BOOKING_OFFERED;
            }
        }

        else if(currentState == State.ANOTHER_BOOKING_OFFERED) {
            output = "Would you like to make another booking? (y/n)";
            if(input.equalsIgnoreCase("y")) {
                output = "Hit Return to continue.";
                currentState = State.INITIAL;
            }
            else if(input.equalsIgnoreCase("n")){
                output = "Goodbye.";
                try {
                    Thread.currentThread().join(10);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                currentState = State.INITIAL;
            }
        }

        else if(currentState == State.SOLD_OUT) {
            output = "Goodbye.";
        }

        return output;
    } 
```

最后是客户端......

```
public class Client {

    public static void main(String[] args) {
        Client client = new Client();
        client.runClient();
    }

    public void runClient() {

        try {
            BufferedReader consoleInput = new BufferedReader(new InputStreamReader(System.in));
            Registry registry = LocateRegistry.getRegistry("localhost");
            Booking stub = (Booking) registry.lookup("Booking");
            String serverResponse = stub.processInput("begin");
            System.out.println("Server: " + serverResponse);

            while((serverResponse = stub.processInput(consoleInput.readLine())) != null) {
                 System.out.println(serverResponse);
                 if(serverResponse.equals("Goodbye.")) {
                        break;
                 }
            }
        } catch (Exception e) {
            System.err.println("Client exception " + e.toString());
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:15:04.117

至于 RMI 服务器线程，答案是它可能会或可能不会在单独的线程中运行。请参阅此处的文档：

[http://docs.oracle.com/javase/6/docs/platform/rmi/spec/rmi-arch3.html](http://docs.oracle.com/javase/6/docs/platform/rmi/spec/rmi-arch3.html)

> 3.2 远程方法调用中的线程使用
> 
> 由 RMI 运行时分派给远程对象实现的方法可能会也可能不会在单独的线程中执行。RMI 运行时不保证将远程对象调用映射到线程。由于对同一个远程对象的远程方法调用可能同时执行，远程对象实现需要确保其实现是线程安全的。

您可以进行服务器端线程转储，并且您会看到 RMI TCP 连接线程 ID 不断变化，但是 @jtahlborn 注意到服务器端方法是同步的，因此它会串行执行，但不一定在单个线程中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:11:50.983

您的服务器端`processInput()`方法是同步的，所以，是的，调用将被串行处理。这与RMI有什么关系？

更新：

如果您想为*每个客户端会话*`currentState`设置单独的和`currentJourney`值，那么您需要使用 RMI 远程会话模式，请参阅[此答案](https://stackoverflow.com/questions/14261735/how-a-server-can-make-a-session-with-a-client-in-rmi)了解详细信息。

# java - Guice的注射器如何使用？

> ID：14839956
> 
> 赞同：12
> 
> 时间：2013-02-12T19:09:51.377
> 
> 标签：java, guice, guice-3

我正在学习 Guice，但我不清楚如何使用`Injector`实例。最好`Injector`在应用程序引导程序上创建一次实例，并将其设为公共单例？

我们是否总是必须使用`Injector#getInstance(SomeClass.class)`来获取放置 Guice`@Inject`注释的类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T19:21:37.463

您不应该将注入器作为全局单例传递。你看过：[https](https://github.com/google/guice/wiki/GettingStarted) ://github.com/google/guice/wiki/GettingStarted ？请注意，`RealBillingService`不使用注入器来获取`CreditCardProcessor`和的实例`TransactionLog`。相反，Guice 在创建实例时会为您处理所有这些。

如果您需要 Guice 创建许多相同类型的对象，请考虑使用[提供程序](https://github.com/google/guice/wiki/InjectingProviders)并注入该提供程序。

# haskell - 显示类型 A -> A

> ID：14839958
> 
> 赞同：6
> 
> 时间：2013-02-12T19:09:53.663
> 
> 标签：haskell, typeclass

```
data A = Num Int
     | Fun (A -> A) String deriving Show

instance Show (Fun (A -> A) String) where
  show (Fun f s) = s 
```

我想要一个函数的属性`A -> A`来打印它，因此有一个`String`类型参数`Fun`。当我将它加载到 ghci 中时，我得到

```
/home/kmels/tmp/show-abs.hs:4:16:
    Not in scope: type constructor or class `Fun' 
```

我想这可以通过添加新的数据类型来实现

```
data FunWithAttribute = FA (A -> A) String 
```

添加`data A = Num Int | Fun FunWithAttribute`和编写`instance Show FunWithAttribute`. 额外的数据类型是可以避免的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T19:22:36.357

实例是为整个类型定义的，而不是为单个构造函数定义的，这就是它抱怨`Fun`不是类型的原因。

我假设你的总体目标是有一个`Show`实例`A`，因为函数不能（通常）有一个`Show`实例，所以它不能被派生。你有几个选择：

### 直接编写您自己的`Show`实例：

也就是说，类似：

```
instance Show A where
    show (Num n) = "Num " ++ show n
    show (Fun _ s) = s 
```

在许多情况下，这是最有意义的。但有时派生更好`Show`，特别是在复杂的递归类型上，其中只有一种情况不能自动`Show`-able。

### 使`A`可导：

您只能`Show`为包含本身具有`Show`实例的类型的类型派生。没有实例`A -> A`，因此推导不起作用。但是你可以写一个使用某种占位符的：

```
instance Show (A -> A) where
    show _ = "(A -> A)" 
```

如果您愿意，甚至只是一个空字符串。

请注意，这需要[语言`FlexibleInstances`扩展](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-class-extensions.html#flexible-instance-head)；它是最无害且最常用的扩展之一，受到多个 Haskell 实现的支持，而且它放松的限制（在我看来）一开始有点傻，所以没有理由避免它。

正如您在问题中提到的那样，另一种方法是使用包装器类型。你甚至可以使它更通用：

```
data ShowAs a = ShowAs a String

instance Show (ShowAs a) where
    show (ShowAs _ s) = s 
```

...然后`(ShowAs (A -> A))`在`Fun`构造函数中使用。这会迫使您在任何时候想要使用包装类型时进行额外的模式匹配，这使得它有点尴尬，但是它为您提供了很大的灵活性来“标记”东西应该如何显示，例如`showId = id `ShowAs` "id"`或类似的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T19:17:43.053

也许我没有遵循您的要求。但是上面的代码可以这样写以便编译：

```
data A = Num Int
     | Fun (A -> A) String 

instance Show A where
  show (Fun f s) = s
  show (Num i) = show i 
```

### 一些解释

看起来您正在尝试为构造函数（Fun）编写一个显示实例。类实例是为整个数据类型编写的（*可能*有例外，不知道）。因此，您需要在每个构造函数上编写一个显示匹配作为实例的一部分。Num 和 Fun 都是数据类型 A 的构造函数。

此外，`deriving`除非每个构造函数的每个参数依次是`Show`. 现在，您的示例有点特别，因为它想要`Show (A -> A)`. 如何显示功能在其他回复中有所解释，尽管我认为没有详尽的方法。其他示例实际上只是“显示”类型或某个占位符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T19:22:26.050

需要`Show`为数据类型定义实例（或任何类实例），而不是为类型*构造函数*定义。也就是说，您只需要

```
instance Show A where 
```

显然，您正在尝试使用 获取此实例`deriving`，但这不起作用，因为 Haskell 不知道如何显示`A->A`。现在看来您甚至*不想*显示该功能，但`deriving Show`实例总是显示*所有*可用信息，因此您不能使用它。

解决您的问题的明显且最好的方法是 worldsayshi 的：根本不要使用`deriving`，而是自己定义一个适当的实例。或者，您可以定义一个伪实例`A->A`，然后使用派生：

```
{-# LANGUAGE FlexibleInstances      #-}

data A = Num Int | Fun (A->A) String   deriving(Show)

instance Show (A->A) where  show _ = "" 
```

这就像

```
Prelude> Fun (const $ Num 3) "bla"
Fun  "bla" 
```

# r - 引用或提取特定级别的元素

> ID：14839961
> 
> 赞同：2
> 
> 时间：2013-02-12T19:10:12.890
> 
> 标签：r

`seq(15)`假设我像这样应用了 cut 功能`cut(seq(15), 5)`

我会得到一个垃圾箱列表，每个元素都会落在其中。如果我想提取第三层的成员或元素怎么办？如何引用剪切序列后将落入第 3 个 bin 的元素？

解决 Arun 的评论：我将为 cut 函数提供一个像这样的向量：temp <- cut(seq(15), c(.9,4,8​​,12,15))。我正在寻找属于第三级的 seq(15) 的元素。它们是 9,10,11,12。已经有一个有效的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T19:17:10.243

你可以用`labels=F`得到

```
 cut(seq(15),5,labels=F)
[1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 
```

然后

```
x <- seq(15)
> x[cut(x,5,labels=F)==3]
[1] 7 8 9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:16:12.750

您的问题措辞不佳且有些模棱两可，但可以为此使用基本索引：

```
temp <- cut(seq(15), 5)
temp[temp == levels(temp)[3]]
# [1] (6.6,9.4] (6.6,9.4] (6.6,9.4]
# Levels: (0.986,3.79] (3.79,6.6] (6.6,9.4] (9.4,12.2] (12.2,15] 
```

或者，如果您想要以下相关值`seq(15)`：

```
seq(15)[temp == levels(temp)[3]]
# [1] 7 8 9 
```

# asp.net - .net SimpleMembership，超时可能吗？

> ID：14839967
> 
> 赞同：0
> 
> 时间：2013-02-12T19:10:33.560
> 
> 标签：asp.net

我将 SimpleMembership 与 mvc4 一起使用。是否可以为此设置超时时间？类似于在 confit 文件中设置普通表单身份验证的终止期？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:16:04.007

从您的问题来看，尚不清楚您要设置哪种类型的超时。但是，如果数据库超时，您可以在连接字符串中设置它，如下所示：

```
Data Source=(local);Initial Catalog=AdventureWorks;Integrated Security=SSPI;Connection Timeout=30"; 
```

# ruby-on-rails - “omniauth-oauth2”捆绑安装错误

> ID：14839972
> 
> 赞同：0
> 
> 时间：2013-02-12T19:10:48.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundle, bundler, omniauth

运行`bundle install`时出现以下错误（完整跟踪： http: [//pastebin.com/Vp4nHc2p](http://pastebin.com/Vp4nHc2p)）：

```
Bundler could not find compatible versions for gem "omniauth-oauth2":
  In Gemfile:
    omniauth-facebook (~> 1.2.0) ruby depends on
      omniauth-oauth2 (~> 1.0.0) ruby

    omniauth-github (~> 1.0.1) ruby depends on
      omniauth-oauth2 (1.1.1) 
```

要查看我的 Gemfile：[http ://pastebin.com/vMcHDHa8](http://pastebin.com/vMcHDHa8)

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:16:18.830

您好，您可能需要安装接受相同版本的omniauth-oath2 的omniauth facebook 和github 版本。

看起来您需要更新两个 gem...然后它们都将接受omniauth-oath2 1.1 版

查看以下依赖项：

[https://rubygems.org/gems/omniauth-facebook](https://rubygems.org/gems/omniauth-facebook)

[https://rubygems.org/gems/omniauth-github](https://rubygems.org/gems/omniauth-github)

只需将 gemfile 中的 omniauth-github 和 facebook gem 的链接替换为：

```
gem "omniauth-github", "~> 1.0.3"
gem "omniauth-facebook", "~> 1.4.1" 
```

然后运行`bundle update omniauth-gihub`然后`bundle update omniauth-facebook`

那你应该没事。

注意：我假设 1.1 和 1.1.0 是相同的版本，如果不是，您可能需要通过读取omniauth-facebook 和 github 的依赖项来咨询 ruby​​gems 以找到 3 个兼容的 gem

# qt - 带有 QtConcurrent::run 的 Qt QTcpSocket 需要在单独的线程中进行事件循环

> ID：14839978
> 
> 赞同：4
> 
> 时间：2013-02-12T19:11:06.140
> 
> 标签：qt, qthread, qtcpsocket, qtconcurrent, qtembedded

我在 Qt 中有一个 Web 服务器，它将读取一个非常大的（~1Gb）文件并通过 QTcpSocket 将数据返回给请求者。此套接字由主服务器线程创建。我想使用 QtConcurrent 将此套接字移交给工作线程并将数据发送回那里。

```
// Using QtConcurrent
BackgroundConcurrent childThreadToReturnLotsOfData;
QFuture<void> futureObject = QtConcurrent::run(&childThreadToReturnLotsOfData, &BackgroundConcurrent::returnPartialLargeFile, resp , &fileToCheckExistence); 
```

我的“returnPartialLargeFile”函数如下所示：

```
void BackgroundConcurrent::returnPartialLargeFile( QHttpResponse *resp , QFile *fileToCheckExistence  ) const
{

    // We need an event loop for the QTCPSocket slots
    QEventLoop loop;
    //QObject::connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
    // Execute our event loop
    //loop.exec();

    // To do this in another thread from the one created, you must
    // move that socket to this thread, reparent and move
    resp->m_connection->m_socket->setParent( 0 );
    resp->m_connection->m_socket->moveToThread( QThread::currentThread() );

    // Read in chunks until we have sent all data back to the requestor
    QByteArray dataToWriteToSocket; // Store the data to send back
    while ( dataReadFromFileInBytes > 0 ) {

        // Read some Data into the byte array

        // Write each chunk to the socket
        resp->write(dataToWriteToSocket); // <----- Here is our data from the content of the file
        resp->flushData(); // <----- Flush data to the socket

    }

    // End our response and close the connection
    resp->end();
    return;

} 
```

我得到的错误是，如果我将 'loop.exec()' 行注释掉，我会收到以下错误：

```
ASSERT failure in QCoreApplication::sendEvent: "Cannot send events to objects owned by a different thread. Current thread c2630\. Receiver '' (of type 'QTcpServer') was created in thread 910a8", file kernel/qcoreapplication.cpp, line 501 
```

如果我取消注释，那么我的函数会在 exec() 行短路，并且永远不会向套接字写入数据，但是我没有收到任何错误，我只是得到一个不包含来自 while 循环的任何数据的截断响应.

我正在重新设置套接字并将其移至新线程，因此我希望我的问题仅与事件循环以及套接字信号和插槽有关。关于我在这里做错了什么的任何想法？我怎样才能让它工作？如果信号/插槽问题，我需要在这里连接哪个？谢谢 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:46:46.543

所以你要做的是在 while 循环的新线程中写入响应。

在这种情况下，您不需要 moveToThread。

新线程可以对主线程拥有的对象进行操作。只要没有赛车。

如果您的两个线程都在套接字上运行，那么您需要一个互斥锁。即使您将套接字移动到新线程，如果存在竞争，您也需要一个互斥锁来防止数据竞争。

Qt 有几个关于线程的非常好的文档。

阅读[本文](http://qt-project.org/doc/qt-4.8/threads-qobject.html)以了解何时需要 moveToThread，以及[如何](http://qt-project.org/doc/qt-4.8/threads-synchronizing.html)进行线程同步。如果您想进一步了解 Qt 中的线程，所有[这些都值得一读。](http://qt-project.org/doc/qt-4.8/threads.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T12:01:35.580

如果您只是按照建议删除 moveToThread，则此代码将在另一端过早断开套接字并且写入失败的情况下终止。因为 write 将关闭，这将删除套接字通知程序，并且您将点击断言“无法将事件发送到其他线程拥有的对象”。我知道，因为我刚刚击中它...

你应该做的（我在[https://github.com/KDAB/KDSoap/blob/master/src/KDSoapServer/KDSoapServerThread.cpp](https://github.com/KDAB/KDSoap/blob/master/src/KDSoapServer/KDSoapServerThread.cpp)做的）是将套接字描述符（int）传递给辅助线程，这将创建插座本身。然后所有的套接字处理都在辅助线程中完成，连接、读/写、断开连接。Qt 会很高兴，没有线程违规。

# function - Clojure 函数的更惯用和优雅的方式

> ID：14839979
> 
> 赞同：2
> 
> 时间：2013-02-12T19:11:07.973
> 
> 标签：function, clojure, refactoring, idioms

我有一个函数可以找到图中节点之间的最小距离，用 Ruby 编写。我把它翻译成 Clojure，但在我看来它看起来很糟糕。

数据的表示如下所示：

```
hash = {:v0 [:v1  :v2  :v3]
        :v1 [:v4  :v5  :v6] 
        :v2 [:v7  :v8  :v9]
        :v3 [:v10 :v11 :v12]
        :v4 [:v13 :v14 :v15]} 
```

Ruby 函数如下所示：

```
 def distance src, target, hash
    return 0 if src == target
    return nil if hash[src].nil?
    dist = 1

    if hash[src].include? target
        return dist
    else
        arr = hash[src].map {|x| distance x, target, hash}
    end
    arr = arr.delete_if {|x| x.nil?}

    return dist + arr.min if !arr.empty?
    return nil
end 
```

Clojure 函数如下所示：

```
(use 'clojure.contrib.seq-utils)
(defn distance [src target h] 
  (if (= src target)
    0
    (if (nil? (h src))
      nil
      (if (includes? (h src) target)
        1
        (let [arr (filter #(not= % nil) (map #(distance % target h) (h src)))]
          (if (= (empty? arr) true)
            nil
            (+ 1 (apply min arr)))))))) 
```

你能告诉我一种更优雅、更类似于 Clojure 的方式吗？那些嵌套的 if 很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:25:00.730

如果您使用集合而不是向量并使用`cond`而不是嵌套`if`的 s，至少对我来说，它看起来更像 Clojure：

```
(def h {:v0 #{:v1  :v2  :v3}
        :v1 #{:v4  :v5  :v6}
        :v2 #{:v7  :v8  :v9}
        :v3 #{:v10 :v11 :v12}
        :v4 #{:v13 :v14 :v15}})

(defn distance [src target h]
  (cond (= src target) 0
        (nil? (h src))  nil
        (contains? (h src) target)
         :default (let [arr (filter #(not= % nil) (map #(distance % target h) (h src)))]
                   (if (empty? arr)
                     nil
                     (inc (apply min arr)))))) 
```

还值得注意的是，clojure.contrib 现在已经过时了。删除它允许此代码在大多数任何版本的 Clojure 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:36:13.843

注意到`filter`生成惰性序列可以通过删除`if`. 此外，`contains?`也可以省略，但在这种情况下增加可读性是有争议的。

```
(defn distance [src target h]
  (let [arr (filter #(not= % nil) (map #(distance % target h) (h src)))]
    (cond (= src target)   0
          (nil? (h src))   nil
          ((h src) target) 1
          (empty? arr)     nil
          :else            (+ 1 (apply min arr))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:38:56.457

如果你感觉 seq-y：

```
(defn distance [src target h] 
  (if (= src target)
    0
    (->> src h
      (keep #(distance % target h))
      (map inc)
      (reduce #(if %1 (min %1 %2) %2) nil)))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T20:40:21.707

无需任何算法更改，您就可以大大缩短代码（内联注释）：

```
(defn distance [src target h] 
  (if (= src target)
    0
    (when (h src) ; nil is "falsy" so no need to check for it.
                   ; when's else evaluates to nil
      (if (includes? (h src) target)
        1
        (let [arr (keep #(distance % target h) (h src))] ; keep is same as map but drops nils
          (when-not (empty? arr) ; Same as above. Also empty? returns true or false.
            (inc (apply min arr)))))))) ; inc is used to increment by one 
```

这可以进一步缩短：

```
(let [arr (keep #(distance % target h) (h src))]
  (when-not (empty? arr)
    (inc (apply min arr)))) 
```

对此：

```
(when-let [arr (seq (keep #(distance % target h) (h src)))]
  (inc (apply min arr))) 
```

因为`seq`返回`nil`空集合。

正如其他人已经提到的那样，现在使用 Contrib 并不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T00:06:01.780

另一个建议。计算所有路线，然后计算最小距离：

```
(defn routes
  ([src target m]
     (if (= src target)
       [[]]
       (seq (routes src target m []))))
  ([src target m so-far]
     (if-let [near (get m src)]
       (if (contains? near target)
         [(conj so-far target)]
         (mapcat #(routes % target m (conj so-far %)) near)))))

(defn min-distance [src target m]
  (if-let [all-routes (routes src target m)]
    (apply min (map count all-routes)))) 
```

# c# - 如何在 C# 中调用此方法？

> ID：14839983
> 
> 赞同：0
> 
> 时间：2013-02-12T19:11:15.987
> 
> 标签：c#, datagrid

如何从另一个地方调用这个方法？

```
private void AssortDatagrid_LoadRows(object sender, Microsoft.Windows.Controls.DataGridRowEventArgs e)
{

    if (ValidTill.SelectedIndex >= 0)
    {
        DataRowView rowContext = e.Row.DataContext as DataRowView;

        string item = rowContext.Row["Срок годности"].ToString();
        DateTime date;
        if ((DateTime.TryParseExact(item, "dd'.'MM'.'yyyy",
                                   CultureInfo.InvariantCulture,
                                   DateTimeStyles.None,
                                   out date)) && (rowContext != null))
        {
            if (date.Date <= dt.Date)
            {
                try
                {

                    e.Row.Background = new BrushConverter().ConvertFromString(rowColor) as SolidColorBrush;

                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                    return;
                }
            }
        }
        else // когда не может парсировать дату
        {

        }

    }

} 
```

我想在这里称呼它：

```
private void workForce_DoWork(object sender, DoWorkEventArgs e)
{
   AssortDatagrid_LoadRows(object sender, Microsoft.Windows.Controls.DataGridRowEventArgs e)
} 
```

可以调用吗？让我解释一下我在做什么。我想在加载行时调用弹出窗口，在弹出窗口中我有圆形进度条作为 gif 动画。我正在更改有效日期很快的那些项目的行背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:14:09.140

对使它们不可调用的事件处理程序没有任何限制。它们具有与任何其他方法组相同的可访问性修饰符和调用规则。因此，您可以像任何其他方法一样调用处理程序，可选择传递具有非空值的参数：

`AssortDatagrid_LoadRows(null, null);`

**更新**
收到您的评论后：

> “调用线程无法访问此对象，因为不同的线程拥有它。”

这似乎是一个调用问题......实际上看起来是一个 WPF 调用。

请参见[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)

在这种情况下，类似...

`this.Dispatcher.Invoke(new Action(()=>AssortDatagrid_LoadRows(null, null))`

虽然这应该解决错误...Servy 提出了一个很好的观点。这种类型的工作因此可以从 UI 线程中卸载。将其推到[BackGroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。我离题了...我们将与原始问题相切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:24:18.217

您可以像任何其他方法一样调用事件处理程序，但更好的方法是重构代码并将事件处理程序的内容提取为普通方法（带有所需参数）。然后在两个地方（事件处理程序和您要调用事件处理程序的第二个地方）调用该方法。

# php - 查询多选框

> ID：14839985
> 
> 赞同：0
> 
> 时间：2013-02-12T19:11:26.967
> 
> 标签：php, mysql

当您不确切知道用​​户可以选择多少选项时，我很好奇如何将所选项目插入数据库。

假设我有以下代码：

```
<select name="foo[]" multiple="multiple">
     <option value="dog">Dog</option>
     <option value="cat">Cat</option>
     <option value="fish">Fish</option>
</select>

<?php

$pets = $_POST['foo'];

$query = mysql_query("INSERT INTO `pets` (`pet1`, `pet2`, `pet3`) VALUES ('".$pets[0]."', '".$pets[1]."',  '".$pets[2]."')");
?> 
```

并且用户只选择选项“狗”，或“狗”和“猫”，或“猫”和“狗”等。基本上是三者的任意组合。

我是否必须对查询进行硬编码以接受所有可能的选项，然后指定一个 WHERE 子句说“ `WHERE $pets != ''`”或类似的东西？

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:28:25.710

首先，不要使用**mysql_***函数，因为已**弃用**

如果您需要将它们插入多行，您可以简单地使用这样的循环

```
foreach($pets as $pet)
{
      Insert to db each single pet in different row 
} 
```

如果要将它们插入同一行，可以使用

```
$toInsert = implode(',',$pets); 
```

如果你有 n 个列，我认为你不能使用第二个选项和 implode 函数来计算宠物的数量

```
$petsColumns = array(); 

for($i = 1; $i <= count($pets); $i++) 
     $petsColumns[] = "pet".$i ; 

$petsColumnsString = implode(',',$petsColumns); 
```

并将它们连接到查询

如果希望这可以帮助您尝试做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:22:46.890

这种情况有几种选择。

首先，您可以将数据存储为序列化字符串。如果您只需要在 PHP 端使用数据，这很好。主要缺点是 MySQL 不会真正理解数据，因此它无法在数据到达 PHP 之前对其进行过滤。

第二个选项是`SET`数据类型列。数据类型允许您拥有可能的选项的`SET`任意组合，同时使数据库更加了解数据。有 64 个成员的限制`SET`。该`SET`选项是最小的选项，但列上的过滤不是最佳的。更改可能的值也有点困难。

第三个选项是将值标准化为单独的表。您将拥有 users 表和 pets 表。pets 表将包含用户 ID、宠物列和表的唯一 ID。然后，您只需为用户选择的每个条目在 pets 表中插入一行。这使您可以为每个用户拥有尽可能多的条目，并允许您轻松过滤数据。这通常是最好的方法。将可能的宠物值标准化到第三个表中可能也是一个好主意。该表将具有宠物 ID、宠物名称以及您可能想要的任何其他内容。然后，第二个表将充当用户和宠物之间的桥梁，具有用户 ID、宠物 ID 和表的唯一 ID。

# javascript - PhoneGap 触摸事件仅在设备旋转后触发

> ID：14839998
> 
> 赞同：0
> 
> 时间：2013-02-12T19:12:03.847
> 
> 标签：javascript, cordova, touch

使用带有 PG 2.2.0 的 PhoneGap 构建并在我的带有 Android 4.0.4 的 Galaxy S2 上进行测试

我已经发现[触摸事件在 android phonegap webview（甚至内置浏览器）中](https://stackoverflow.com/questions/12453230/touch-events-not-working-in-android-phonegap-webview-or-even-built-in-browser)不起作用[，Galaxy S3 上的 Phonegap 忽略了触摸事件](https://stackoverflow.com/questions/12862347/phonegap-on-galaxy-s3-ignores-touch-events)，并且[ICS 触摸事件中的 WebView 没有被正确触发，](https://stackoverflow.com/questions/11390902/webview-in-ics-touch-events-not-being-fired-properly)但我不确定它们是否描述了完全相同的问题.

我正在使用 Tap.js 和 iScroll。在我至少旋转设备一次之前，它们都不起作用（我无法滚动或使用我的应用程序菜单）。我可以将它旋转回我开始的地方，它仍然可以工作。似乎第一次旋转/方向更改触发了某种刷新，但我不知道我应该如何处理这个问题。

也许有相同症状的人能够解决这个问题。谢谢。

编辑：我禁用了所有 JS 并将此代码放入其中`deviceready`

```
document.getElementById('app').addEventListener('touchstart', function() {
    alert('touchstart #app');
}, false); 
```

而且我只得到了`alert`至少一个之后`orientationchange`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:50:57.993

在我拆开我的应用程序并创建一个测试用例后，我发现了以下内容： 添加`position:relative;`到`html`或`body`结合`overflow:hidden;`似乎导致了问题。

为了完全解决我的问题，我采取了以下步骤：

*   `static`再次制作html和body
*   `overflow:hidden;`从 html 和 body 中删除
*   而是同时应用于`#app`（我的包装器 div）
*   听水平`touchstart touchmove touchend`和`document``preventDefault`

2013 年 6 月 12 日更新，另一个重要发现：

*   **如果您为 调用 preventDefault `touchstart`，则`touchmove`不会触发**

# batch-file - 我怎样才能使这个批处理程序更高效

> ID：14839999
> 
> 赞同：0
> 
> 时间：2013-02-12T19:12:04.630
> 
> 标签：batch-file

我的一个朋友让我编写一个程序，该程序可以像矩阵一样打印一串随机的 1 和 0。我同意并成功地批量编写了一个程序，该程序具有所需的输出，但运行速度有点慢，我想知道是否有办法让它更高效

```
set count=0

:loopassign
if %count%==80 goto show
set/a count=%count%+1
set/a value=%random% %% 2
set number%count%=%value%
goto loopassign

:show
echo {             %number1%%number2%%number3%%number4%%number5%%number6%%number7%%number8%%number9%%number10%%number11%%number12%%number13%%number14%%number15%%number16%%number17%%number18%%number19%%number20%%number21%%number23%%number24%%number25%%number26%%number27%%number28%%number29%%number30%%number31%%number32%%number33%%number43%%number44%%number45%%number46%%number47%%number48%%number49%%number50%%number51%%number52%%number53%%number54%%number55%%number56%%number57%%number58%%number59%%number60%%number61%%number62%%number63%%number64%%number65%%number66%%number67%%number68%%number69%%number70%%number71%%number72%%number73%%number74%%number75%%number76%%number77%%number78%%number79%%number80% }
set count=0
goto loopassign 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:16:50.193

你应该了解

*   **FOR 循环：**`HELP FOR`从命令提示符键入。特别是，您需要 FOR /L 选项

*   **延迟扩展：**`HELP SET`从命令提示符键入。关于延迟扩展的部分大约是帮助的一半。

这是一个使用 2 个 FOR /L 循环的解决方案。外循环是无限的，因为它从不增加计数器。

```
@echo off
setlocal enableDelayedExpansion
for /l %%Z in (0 0 1) do (
  set "ln="
  for /l %%N in (1 1 80) do (
    set /a "n=!random! %% 2"
    set "ln=!ln!!n!"
  )
  echo {             !ln! }
)
exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:24:46.423

我喜欢速度测试程序！我认为下面的矿会更快......

```
@echo off
setlocal EnableDelayedExpansion

rem Create a Decimal-to-Binary conversion table for values from 0 to 15
set dec=0
for %%n in (0000 0001 0010 0011 0100 0101 0110 0111
            1000 1001 1010 1011 1100 1101 1110 1111 ) do (
   set bin[!dec!]=%%n
   set /A dec+=1
)

rem Repeat the loop 5 times per line
set line=
for /L %%n in (1,1,5) do (
   rem Generate 4 groups of 4 bits per cycle
   set /A "G1=(n=!random!)&15, G2=(n>>=(G1&3)+1)&15, G3=(n>>=4)&15, G4=(n>>4)&15"
   for /F "tokens=1-4" %%a in ("!G1! !G2! !G3! !G4!") do (
      set line=!line!!bin[%%a]!!bin[%%b]!!bin[%%c]!!bin[%%d]!
   )
)
echo {             %line%} 
```

安东尼奥

**编辑：**我稍微修改了表达式，以避免在 80 个二进制数字行中的 5 个固定位置出现零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T20:01:43.127

主要耗时的部分是`goto loopassign`.
这可以用 FOR /L 循环代替。

循环比 goto 更好，因为在搜索标签时不再需要扫描整个文件。
并且for块内的代码被缓存并且只解析一次，因此执行速度更快。

我对单个字符使用单行变量而不是 80 个变量只是为了可维护性。

```
@echo off
setlocal enableDelayedExpansion
set count=0

:loopassign
set "line="
for /L %%n in (1,1,80) do (
    set /a "value=!random! & 1"
    set "line=!line!!value!"
)

:show
echo {             !line! }
goto loopassign 
```

**更多改进的速度变体**

您可以通过一个简单的技巧轻松加快它的速度，在每个循环中生成四个而不是一个字符，因此单行只需要 20 个循环。

```
for /L %%n in (1,1,20) do (
    set /a "n=!random! & 15,m=10000+(n&8)*125+(n&4)*25+(n&2)*5+(n & 1)"
    set "ln=!ln!!m:~-4!"
) 
```

这似乎快了三倍