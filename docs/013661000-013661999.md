# StackOverflow 问答 13661000-13661999

# java - Use Zxing Library on PreviewFrame for Augmented Reality

> ID：13661002
> 
> 赞同：4
> 
> 时间：2012-12-01T15:47:58.307
> 
> 标签：java, android, augmented-reality, zxing

Can someone tell me how I can use the Zxing Library for an Augmented Reality App? I know the easiest way to use Zxing is via Intent, but I need the Camera View so I can not use the barcode App.

I have a `SurfaceHolder.Callback` which is added to the main activity and overwrites following method:

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    mCamera = Camera.open();

    try {
        mCamera.setPreviewDisplay(holder);
    } catch (IOException e) {
        Log.d(TAG, "Can not set surface holder");
    }

    mCamera.startPreview();

    Parameters parameters = mCamera.getParameters();
    parameters.setPreviewSize(1280, 720);
    parameters.setPictureSize(1280, 720);
    mCamera.setParameters(parameters);

    QrCodeReader reader = new QrCodeReader();
    mCamera.setPreviewCallback(reader);
} 
```

The setted picture size has to be available because it is in the list `parameters.getSupportedPictureSizes()`.

And this method in the `QrCodeReader` class which implements `PreviewCallback`:

```
private Result result;
private MultiFormatReader reader = new MultiFormatReader();
private boolean init = false;

public QrCodeReader(){
        Hashtable<DecodeHintType, Object> hints = new Hashtable<DecodeHintType,
              Object>();
    hints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);
    reader.setHints(hints);
}

@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    PlanarYUVLuminanceSource source = new PlanarYUVLuminanceSource(data,
          1280, 720, 0, 0, 1280, 720, true);
    HybridBinarizer hybBin = new HybridBinarizer(source);
    BinaryBitmap bitmap = new BinaryBitmap(hybBin);

try {
        result = reader.decodeWithState(bitmap);
        Log.d("Result", "Result found!");
    } catch (NotFoundException e) {
        Log.d(TAG, "NotFoundException");
    } finally {
        reader.reset();
    }
} 
```

The Logcat only shows `NotFoundException`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:34:42.987

`NotFoundException`是正常的。如果框架没有条形码，那就是结果。这并不意味着任何事情本身都是错误的。继续扫描。

# php - PHP auto_prepend 和 http 404 错误

> ID：13661007
> 
> 赞同：0
> 
> 时间：2012-12-01T15:48:23.137
> 
> 标签：php

我有 Apache 和 PHP 设置，我正在使用`.htaccess`文件将文件自动添加到任何输出。

问题是当我想使用输出 404 错误时

```
<?php header("HTTP/1.0 404 Not Found"); ?> 
```

它仍然输出标题，因为 auto_prepended 文件已经被处理。

`.htaccess`文件

```
php_value date.timezone 'Europe/London'
php_value auto_prepend_file load.php 
```

`load.php`

```
<?php

    // Set the error reporting level (DEV)
    error_reporting(E_ALL);
    ini_set("display_errors", 1);

    // Load the configuration file
    include("config/config.php");

    session_start();

?> 
```

因此加载文件包含配置文件的包含，以便在加载的每个页面上设置它。

所以目前我有一些页面给出了软 404 错误而不是实际的 404 错误，所以如果没有返回数据说浏览到 /image/123 因为图像 123 实际上不存在，我输出一个“这个图像不存在“所以这会给谷歌或任何其他爬虫带来问题，因为它可以继续从 /image/123 .... /image/12222222333333444444 等......所以它实际上需要输出正确的 404。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:02:33.157

我在以下位置找到了答案：[PHP header 404 not working](https://stackoverflow.com/questions/5914120/php-header-404-not-working)

```
<?php
header("HTTP/1.0 404 Not Found");
exit("<h1>Not Found</h1>
The requested URL " . $_SERVER["REQUEST_URI"] . " was not found on this server.
<hr>");
?> 
```

这给出了正确的 404 输出。

# ruby - ruby 捕获方法和正则表达式

> ID：13661009
> 
> 赞同：2
> 
> 时间：2012-12-01T15:48:31.683
> 
> 标签：ruby, regex

我[`MatchData#captures`](http://rubydoc.info/stdlib/core/MatchData#captures-instance_method)第一次遇到Ruby中的方法，想问是否有人可以为我解释一下。Ruby 文档说：

> 返回捕获的数组；相当于`mtch.to_a[1..-1]`。

但是，我目前正在对长字符串运行正则表达式，它似乎正在返回我评估的最后一项？这有意义吗？

这是字符串：

```
431cdb7b1ad8183a1434b6d1a407731fac0ea61b8d720d733fefaa77f063df8e vidcoder [23/May/2012:01:17:16 +0000] 76.78.212.49 - B24DEA4883A9FF95 REST.GET.OBJECT accounts/6/videos/xboxcCFC/video.mp4 "GET /accounts/6/videos/xboxcCFC/video.mp4 HTTP/1.1" 206 - 2 697898511 56 56 "-" "Apple Mac OS X v10.6.8 CoreMedia v1.0.0.10K549" - 
```

这是正则表达式：

```
line.match(%r{^.*\s+HTTP.*\s+-\s+(\d+)\s+}).captures 
```

在这种情况下，它返回数字 2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T15:52:56.670

由于您在正则表达式中只指定了一个捕获组，因此它只返回它（作为包含“2”字符串的单元素数组，这与直接返回“2”字符串不同）：

```
line.match(%r{^.*\s+HTTP.*\s+-\s+(\d+)\s+}).captures
=> ["2"] 
```

如果您尝试捕获更多元素，您的数组将包含更多元素，正如文档中所示：

```
line.match(%r{^.*\s+HTTP(.*)\s+-\s+(\d+)\s+}).captures
=> ["/1.1\" 206", "2"] 
```

# haskell - Haskell 中的符号

> ID：13661010
> 
> 赞同：11
> 
> 时间：2012-12-01T15:48:47.247
> 
> 标签：haskell, symbols

我在理解 Haskell 中的符号时遇到问题：

```
=<< 
```

如：

```
-- return the last ten lines of a file
tail10  = drop =<< subtract 10 . length 
```

谁能向我解释这意味着什么？

此外，我发现在学习 Haskell 时经常发生这种情况，因为我碰到了这些符号之一，我不知道它们的含义或它们是如何工作的。是否有一个网站或教程更深入地关注 Haskell 中的符号而不是函数本身？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T15:56:11.820

[这是 Haskell 中保留关键字的列表](http://www.haskell.org/haskellwiki/Keywords)。`=<<`你问的只是一个函数，所以我们可以问[Hoogle](http://www.haskell.org/hoogle/?hoogle=%28=%3C%3C%29)。[它告诉我们](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3a-61--60--60-)，这`=<<`只是[`>>=`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3a-62--62--61-)它的论点颠倒了。`>>=`是一个基本的 monad 函数（“monadic composition”），你可以在很多地方读到它，包括[LYAH](http://learnyouahaskell.com/a-fistful-of-monads)。

# android - 更改 Android 模拟器大小以适合我的屏幕

> ID：13661012
> 
> 赞同：6
> 
> 时间：2012-12-01T15:49:20.233
> 
> 标签：android, android-emulator

这可能是一个愚蠢的问题，但我从事 Android 开发已经有一段时间了，只是安装了新版本的 SDK 和 ADT Eclipse 插件。

我注意到，当我创建一个新的 AVD 时，我可以选择一个特定的设备，即 Nexus 7 或 Nexus Phone。我选择了 Galaxy Nexus，但模拟器不适合屏幕，所以我看不到设备的底部。目前我正在使用具有 21 英寸显示器 (1600 x 900) 的台式机，这不是世界上最高规格的显示器，但我希望能够将设备安装在屏幕上。我还有一个辅助屏幕，我通常会打开模拟器，这样我就可以看到代码和模拟器，便于调试，但这个屏幕要小得多，分辨率只有 1280 x 800。目前，它会无法按下后退和主页按钮，如果我在笔记本电脑上进行开发，这显然是一个小得多的屏幕，可能无法看到大部分设备，因为 AVD 没有

有没有办法可以做到这一点。下面是设备在我的屏幕上显示的屏幕截图。

![在此处输入图像描述](../Images/af51b853770280eeaf327892b2100762.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T15:54:08.467

右键单击您的项目-> 运行配置-> 选择目标-> 在附加模拟器命令行选项文本框中，键入“-scale 0.75”并运行您的应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-29T17:50:34.233

对于那些使用 Ionic CLI 或其他解决方案的人，以下内容对我有用：

```
ionic run android -scale=0.75 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-21T10:30:03.337

在*Android Studio*中，该选项在 AVD 管理器中的“启动大小和方向”下设置。

# php - Cannot get cell caching to work in PHPExcel

> ID：13661013
> 
> 赞同：1
> 
> 时间：2012-12-01T15:49:21.300
> 
> 标签：php, phpexcel

I've tried every method in the PHPExcel 1.7.8 manual for cell caching, but none work. I still run out of memory every time I try to load an Excel file of about 30 MB.

Here is my code:

```
 ini_set('memory_limit', '256M'); // Up from default 32MB

    require MODULES_DIR . '/PHPExcel.php';

    $cacheMethod = PHPExcel_CachedObjectStorageFactory::cache_to_discISAM;
    $cacheSettings = array('dir' => '/usr/local/tmp');
    PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);

    $inputFileType = PHPExcel_IOFactory::identify($dir . $source_file);

    $objReader = PHPExcel_IOFactory::createReader($inputFileType);

    $objReader->setReadDataOnly(true);

    $objPHPExcel = $objReader->load($dir . $source_file);

    $total_sheets = $objPHPExcel->getSheetCount();
    $allSheetName = $objPHPExcel->getSheetNames();

    $objWorksheet = $objPHPExcel->setActiveSheetIndex(0);

    $highestRow = $objWorksheet->getHighestRow();
    $highestColumn = $objWorksheet->getHighestColumn();

    $headingsArray = $objWorksheet->rangeToArray('A1:'.$highestColumn.'1',null, true, true, true);
    $headingsArray = $headingsArray[1];

    $r = -1;
    $namedDataArray = array();

    for ($row = 2; $row <= $highestRow; ++$row) {
        $dataRow = $objWorksheet->rangeToArray('A'.$row.':'.$highestColumn.$row,null, true, true, true);

        if ((isset($dataRow[$row]['A'])) && ($dataRow[$row]['A'] > '')) {
            ++$r;

            foreach($headingsArray as $columnKey => $columnHeading) {
                $namedDataArray[$r][$columnHeading] = $dataRow[$row][$columnKey];
            }
        }
    } 
```

I've tried every one of the cell caching mechanisms all the way down to "cache_to_sqlite3" but none of them work.

Can someone tell me what I am doing wrong here?

EDIT: Apparently I skipped over the "cache_to_sqlite" option. I tried that and it started caching. However, it still runs out of memory during the caching process on a 30 MB file with 256MB of memory available. Here is the error:

```
 Fatal error: Uncaught exception 'Exception' with message 'out of memory' in modules/PHPExcel/CachedObjectStorage/SQLite.php:64 Stack trace: #0 modules/PHPExcel/CachedObjectStorage/SQLite.php(81): PHPExcel_CachedObjectStorage_SQLite->_storeData() #1 modules/PHPExcel/Worksheet.php(1123): PHPExcel_CachedObjectStorage_SQLite->addCacheData('X2498702', Object(PHPExcel_Cell)) #2 modules/PHPExcel/Reader/Excel5.php(3549): PHPExcel_Worksheet->getCell('X2498702') #3 modules/PHPExcel/Reader/Excel5.php(894): PHPExcel_Reader_Excel5->_readLabelSst() #4 modules/updater.inc.php(1478): PHPExcel_Reader_Excel5->load('modules/p...') #5 modules/updater.php(204): Updater->process_xls('prods.xls') #6 {main} thrown in modules/PHPExcel/CachedObjectStorage/SQLite.php on line 64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:45:38.677

单元缓存不会消除内存使用：它会减少它。显然，您仍然没有足够的 PHP 内存来处理这么大的工作簿。

一个可能的问题是对单元格“X2498702”的引用... Excel BIFF 文件（由 Excel5 阅读器加载的类型）的上限为 65536 行，因此如果读者尝试加载，这里显然出了问题第 2498702 行中的一个单元格。问题不在于单元格缓存，而是 Excel5 阅读器查找数据被误解，或者该 Excel 文件中不应该存在的数据。

您能否将此特定文件的副本（如果允许保密）上传到 PHPExcel 网站，以便我们查看并尝试确定到底出了什么问题。

# java - Does an entity bean (ejb 3.x) required container?

> ID：13661016
> 
> 赞同：0
> 
> 时间：2012-12-01T15:50:03.513
> 
> 标签：java, jakarta-ee, ejb

Is it possible to run entity bean without container? If so example please.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:58:48.160

JPA 可以在 Java EE 容器之外使用，是的。JPA2 的规范以这句话开头：

> 本文档是 Java API 规范，用于使用 Java EE**和 Java SE**管理持久性和对象/关系映射。

（强调我的）

但是，您不会自动支持持久性单元注入、JTA 支持等。春天在这方面有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:22:22.107

与在容器内运行的主要区别在于持久性单元的定义和处理事务。例如，persistence-unit 在 persistence.xml 中定义如下：

```
<persistence-unit name="pu_name" transaction-type="RESOURCE_LOCAL"> 
```

然后你需要获取 EntityTransaction 并使用它：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("pu_name");
EntityManager em = emf.createEntityManager();

EntityTransaction tx = em.getTransaction();
tx.begin();
...
...
tx.commit();

em.close();
emf.close(); 
```

# ios - 具有相同图像的慢速drawInRect

> ID：13661017
> 
> 赞同：0
> 
> 时间：2012-12-01T15:50:34.373
> 
> 标签：ios, performance, uiview, uiimageview, core-graphics

我有一个自定义视图继承自`UIView`.

在这个视图中，有一个始终相同的图像，我只想在其上绘制。

但是，为了绘制图像，我必须在`drawInRect`每次绘制周期运行时调用。

```
- (void)drawRect:(CGRect)rect{
    CGContextRef context = UIGraphicsGetCurrentContext();

    [image drawInRect:self.bounds];
    // drawing....
} 
```

有没有办法显示图像而不是每次调用这个方法`drawRect`？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:52:28.877

将图像放在`UIImageView`自定义下方，`UIView`而不是将其绘制在`drawRect:`. 使您的自定义视图的背景颜色`clearColor`，以便图像显示在`drawRect:`不绘制任何内容的位置。

不要试图使图像视图成为自定义视图的子视图。子视图总是在其父视图的内容之上绘制。您可以使您的自定义视图成为图像视图的子视图，或者您可以使它们成为兄弟。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T15:55:29.620

在自定义类的 .h 文件中执行以下操作：

```
- (void)  setup: 
```

然后在 .m 中执行以下操作：

```
-(void) setup {
    //drawing stuff
} 
```

然后在视图中加载了将其添加为子视图的任何视图控制器

```
[myCustomView setup]; 
```

# sql - DB2 中的表操作

> ID：13661018
> 
> 赞同：0
> 
> 时间：2012-12-01T15:50:52.130
> 
> 标签：sql, db2, pivot

我正在使用 DB2 并有下表（表 A - 3 列）：

```
EmpNum  YearMonth    Value

100     201201      2
100     201207      1
100     201206      7
102     201201      8
102     201205      15
102     201207      4 
```

… ETC

我想生成一个新的表 B，每个员工一行，每个 YearMonth 有一列。

我希望我可以从数据中动态生成表 B 'YearMonth' 列名，因为将有 120 列。

然后将该值放入具有关联 YearMonth 标题的单元格中，以提供如下表格：

```
EmpNum  201201  201202  201203  201204  201205 201206 201207 etc ….

100         2                                   7       1
102         8                            15             4 
```

我试过查找“存储过程”和“动态列名”，但不能很好地处理这样的事情。

我有两个问题：

1.  这在 DB2 中可行吗？
2.  我应该查找什么以获取更多信息？

感谢期待！

罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:12:36.423

您要查找的内容称为*Pivot*。不幸的是，DB2 没有实现 PIVOT 语句（与 Oracle 不同）。因此，不可能创建一个创建动态列数的查询。

看看[Poor Man's SQL Pivot。将问题列为列，并将每个用户的答案列在一行](https://stackoverflow.com/questions/3924641/poor-mans-sql-pivot-list-questions-as-columns-and-answers-per-user-in-one-row)中。那是你能到达的最接近的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T21:25:41.730

这是一个允许旋转表的通用过程：[https ://github.com/angoca/db2tools/blob/master/pivot.sql](https://github.com/angoca/db2tools/blob/master/pivot.sql)

# android - Widget crash after calling notifyAppWidgetViewDataChanged due to no connection available

> ID：13661019
> 
> 赞同：0
> 
> 时间：2012-12-01T15:50:53.327
> 
> 标签：android, android-widget, crash, appwidgetprovider

If there is no connectioin available on the android device, my Android widget crashed when i call notifyAppWidgetViewDataChanged method.

In fact, when i call this method, there is an http request to load data from server.

How i can do in order to fix this crash problem?

Here is the code of StackwidgetProvider class when i click on the "refresh" button :

```
else if (intent.getAction().equals(REFRESH_LIST_ACTION)) {

        AppWidgetManager mgr = AppWidgetManager.getInstance(context);

        int[] ids = mgr.getAppWidgetIds(new ComponentName(context, StackWidgetProvider.class));

        for(int id : ids) {
            mgr.notifyAppWidgetViewDataChanged(id, R.id.stack_view);
        }

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);

        int icon = R.drawable.ic_action_lab_white;
        CharSequence tickerText = "Mise à jour des deals ..";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);

        CharSequence contentTitle = "Mobideals";
        CharSequence contentText = "Mise à jour des deals terminée";
        Intent notificationIntent = new Intent();
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        mNotificationManager.notify(HELLO_ID, notification);
        mNotificationManager.cancel(HELLO_ID);
        Toast.makeText(context, "Mise à jour de la liste des deals ..", Toast.LENGTH_SHORT).show();

    } 
```

And here is the code of StackWidgetService class when my onSetDataChanged method is declared :

```
public void onDataSetChanged() {
    // This is triggered when you call AppWidgetManager notifyAppWidgetViewDataChanged
    // on the collection view corresponding to this factory. You can do heaving lifting in
    // here, synchronously. For example, if you need to process an image, fetch something
    // from the network, etc., it is ok to do it here, synchronously. The widget will remain
    // in its current state while work is being done here, so you don't need to worry about
    // locking up the widget.

    //http post
    try{
        HttpClient httpclient = new DefaultHttpClient();

        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(mContext);
        String filtre = settings.getString("filtre", "Tous");           

        HttpPost httppost = null;

        if (filtre.equals("Tous")) {
            httppost = new HttpPost("http://www.myURL/getDeals.php");
        }

        else if (filtre.equals("Maison")) {
            httppost = new HttpPost("http://www.myURL/getDealsMaison.php");
        }

        else if (filtre.equals("Musique")) {
            httppost = new HttpPost("http://www.myURL/getDealsMusique.php");
        }

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }catch(Exception e){
        Log.e("log_tag", "Error in http connexion"+e.toString());
    }
    //convert response to string
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");

        String line="0";
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    //parsing data
    String titre, url, site, ancienprix, nouveauprix, temperature, pseudo, categorie, dealtermine, date;

    try{
        jArray = new JSONArray(result);
        if (jArray.length() != 0) {
            mWidgetItems.removeAll(mWidgetItems);
        }
        JSONObject json_data=null;

        SharedPreferences setNbDeal = PreferenceManager.getDefaultSharedPreferences(mContext);
        String nbDeal = setNbDeal.getString("nbDeal", "30");

        int nbDeals = Integer.parseInt(nbDeal);

        for(int i=0;i<nbDeals;i++){
            json_data = jArray.getJSONObject(i);
            titre=json_data.getString("titre");
            url=json_data.getString("url");
            site=json_data.getString("site");
            ancienprix=json_data.getString("ancienprix");
            nouveauprix=json_data.getString("nouveauprix");
            dealtermine=json_data.getString("dealtermine");
            temperature=json_data.getString("temperature");
            pseudo=json_data.getString("pseudo");
            categorie=json_data.getString("categorie");
            date=json_data.getString("date");

            WidgetItem currentItem = new WidgetItem(titre, url, site, ancienprix, nouveauprix, dealtermine, temperature, pseudo, categorie, date);
            mWidgetItems.add(currentItem);

        }
    }
    catch(JSONException e1){
        //Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
    } catch (ParseException e1) {
        e1.printStackTrace();
    }
} 
```

# functional-programming - How do you dynamically create inputs in Elm?

> ID：13661021
> 
> 赞同：9
> 
> 时间：2012-12-01T15:51:20.410
> 
> 标签：functional-programming, frp, elm

I want to create a button which, when pressed, adds a new input (or textarea) to the form.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T21:03:01.577

如果您希望每次单击按钮时都添加一个文本字段，这意味着您希望显示的文本字段数等于单击按钮的次数。`countIf id`我们可以创建一个信号，通过使用按钮上的信号¹来告诉我们按钮被点击的`clicked`频率。

如果我们有一个输入列表，我们可以使用`flow`将它们显示在彼此下方（或旁边）。`n`编写一个接受数字并生成包含按钮和`n`文本字段的列表的函数是相当直接的。

所以现在我们可以使用`lift`这个函数来连接我们计算按钮点击次数的信号，将它与`flow`函数结合起来，瞧，我们有一个动态创建输入的按钮。

```
(btn, clicked) = Input.button "Click me!"

-- Count how often the clicked signal is true
clicks = countIf id clicked

main = lift2 flow (constant down) $ lift nInputs clicks

nInputs n =
  let helper n acc =
    if n<=0 then btn : acc
    else
      -- Input.textField returns a pair containing the field as well as a signal
      -- that you can use to access the field's contents. Since I don't actually
      -- ever do anything with the contents, I just ignore the signal here.
      -- In your real code, you'd probably want to keep the signal around as well.
      let (field, _) = Input.textField $ "input " ++ (show n)
      in helper (n-1) $ field : acc
  in helper n [] 
```

¹ 仅使用`count`会计算信号变化的频率。由于每次点击都会使信号的值变为 true，然后又变为 false，因此每次点击会发生 2 次变化。通过使用`countIf id`，我们只计算信号为真的次数，从而计算点击次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T10:43:43.677

从 Elm 0.8 开始，这确实可以做到。请参阅[发布公告](http://elm-lang.org/blog/announce/version-0.8.elm#dynamic-inputs)、[在线参考的](http://elm-lang.org/docs/Graphics/Input.elm#buttons)*输入组*部分和[代码示例](https://groups.google.com/group/elm-discuss/attach/aa485a9e4ae1ffd8/Todo.elm?part=4&authuser=0&view=1)。

# jquery - move to an element in scrollable content

> ID：13661023
> 
> 赞同：0
> 
> 时间：2012-12-01T15:51:30.003
> 
> 标签：jquery, html, css

I have a standard scrollable content with some block elements.

I want to find out position of the div (relative to content top) and move scroll to that possiton. Is it possible? Maybe with jquery.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:58:45.930

是的，在 jQuery 中是可能的。

您可以像这样获取任何 id 的位置：`$(divId).position().top` 并用于`scrollTop`设置滚动条的位置。

这是一个[小提琴](http://jsfiddle.net/K67Gk/2/)，有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:55:37.143

你可以使用 JQuery 来做这样的事情：

```
function scroll(element, parent){
    $(parent).animate({ scrollTop: $(element).offset().top - $(parent).offset().top }, { duration: 'slow', easing: 'swing'});
} 
```

检查[演示](http://praveenlobo.com/techblog/wp-content/uploads/2011/08/scroll/ScrollDemo.html)。

# servicestack - 如何禁用传输编码：ServiceStack 分块

> ID：13661024
> 
> 赞同：1
> 
> 时间：2012-12-01T15:51:32.807
> 
> 标签：servicestack, transfer-encoding

有没有办法将 ServiceStack 配置为不在 HTTP 标头的响应中添加 transfer-encoding:chunked 并禁用此编码类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:31:04.410

[ServiceStack](http://www.servicestack.net)仅适用于原始 ASP.NET `IHttpHandlers`，因此遵循 ASP.NET 的标准行为适用。这个[较早的问题](https://stackoverflow.com/questions/2595460/how-can-i-set-transfer-encoding-to-chunked-explicitly-or-implicitly-in-an-asp)提供了有关如何更改 ASP.NET 中的传输编码行为的提示。

# r - R中逻辑回归的分类表

> ID：13661025
> 
> 赞同：6
> 
> 时间：2012-09-05T20:59:36.650
> 
> 标签：r, cross-validation

我有一个数据集，由存储在 csv 文件中的二分因变量 ( `Y`) 和 12 个自变量 ( `X1`to ) 组成。`X12`以下是数据的前 5 行：

```
Y,X1,X2,X3,X4,X5,X6,X7,X8,X9,X10,X11,X12  
0,9,3.86,111,126,14,13,1,7,7,0,M,46-50  
1,7074,3.88,232,4654,143,349,2,27,18,6,M,25-30  
1,5120,27.45,97,2924,298,324,3,56,21,0,M,31-35
1,18656,79.32,408,1648,303,8730,286,294,62,28,M,25-30
0,3869,21.23,260,2164,550,320,3,42,203,3,F,18-24 
```

我使用以下代码从数据中构建了一个逻辑回归模型：

```
mydata <- read.csv("data.csv")     
mylogit <- glm(Y~X1+X2+X3+X4+X5+X6+X7+X8+X9+X10+X11+X12, data=mydata, 
               family="binomial")  
mysteps <- step(mylogit, Y~X1+X2+X3+X4+X5+X6+X7+X8+X9+X10+X11+X12, data=mydata, 
                family="binomial") 
```

我可以使用以下代码获得每个数据的预测概率：

```
theProbs <- fitted(mysteps) 
```

现在，我想创建一个分类表 - 使用数据表 ( `mydata`) 的前 20 行 - 我可以从中确定与数据实际一致的预测概率的百分比。请注意，对于因变量 ( `Y`)，0 表示小于 0.5 的概率，1 表示大于 0.5 的概率。

我花了很多时间试图构建分类但没有成功。如果有人建议可以帮助解决此问题的代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-02T20:46:50.973

问题有点老了，但我想如果有人正在查看档案，这可能会有所帮助。这很容易通过 xtabs 完成

```
classDF <- data.frame(response = mydata$Y, predicted = round(fitted(mysteps),0))

xtabs(~ predicted + response, data = classDF) 
```

这将产生一个像这样的表：

```
 response
predicted   0   1
        0 339 126
        1 130 394 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T01:39:44.867

我认为'round'可以在这里完成工作。
表（圆形（theProbs））

# javascript - 制作要在 gmail 撰写页面中注入的内容脚本？

> ID：13661027
> 
> 赞同：0
> 
> 时间：2012-12-01T15:52:27.030
> 
> 标签：javascript, google-chrome-extension

我想写一个脚本，注入 gmail 的撰写页面。

到目前为止，我已经有了这个 url-pattern: `["*://mail.google.com/*"]`。加载 gmail 时脚本成功注入，但之后单击收件箱或撰写等链接时不会重新注入。我希望`["*://mail.google.com/*compose"]`很容易做到这一点，但没有。

这种模式可能是我所能得到的，然后我必须创建一个侦听器来检查页面的该部分何时重新加载？

确定何时加载撰写页面的最直接方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:18:21.633

内容脚本仅在页面真正加载时运行。
如果要为特定哈希运行代码，请在没有哈希的 URL 处注入脚本，并使用`hashchange`来检测更改。

```
function checkHash() {
    if (/^#(compose|drafts)\b/.test(location.hash)) {
        // Do whatever you want
    }
}
window.addEventListener('hashchange', checkHash);
checkHash(); 
```

`setInterval`与其监视位置哈希，不如使用它来持续检查所需元素是否存在于 DOM 中可能更有效。当您想要读取或写入特定 DOM 节点的值时，这特别有用。

# ios - ipa 或 apk 中的最大文件数

> ID：13661034
> 
> 赞同：2
> 
> 时间：2012-12-01T15:53:02.613
> 
> 标签：ios, xcode, ipad, ipa

我构建了一个包含 100000 个文件（1500mo）的 IPA。当我尝试在我的所有 iPad 上安装时，我收到错误消息 E8000004（错误未知）。

测试： * Ipad 第二代和第三代 * IOS 5 和 6

您知道 ipa 可以包含的最大文件数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:44:22.927

我不能告诉你文件数量的限制是多少。但我有一个建议，你可以如何实现你的应用程序。

作为应用程序的一部分在 iPad 上运行嵌入式 HTTP 服务器，例如[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)，并让它为图块提供服务。瓦片本身可以存储在一个 ZIP 文件中，该文件永远不会被提取。相反，HTTP 服务器会在请求时即时提取单个切片。

这种方法不需要 Wifi 或移动网络访问。你仍然可以使用leaflet.js。实际上，除了添加嵌入式 HTTP 服务器之外，您几乎不需要更改您的应用程序。

# java - 呼吁战俘是模棱两可的

> ID：13661038
> 
> 赞同：1
> 
> 时间：2012-12-01T15:53:42.443
> 
> 标签：java, opencl, jocl

在使用 JOCl（java 版本 opencl）时，我遇到了这个错误。

```
Exception in thread "main" org.jocl.CLException: CL_BUILD_PROGRAM_FAILURE
Build log for device 0:
<program source>:3:255: error: **call to '__cl_pow' is ambiguous**
__kernel void sampleKernel(__global short *x,             __global short *y,           __global uint *stop,           __global uint *moment){private uint a = 1;private uint b = 2;for(uint i =0; i<= 100;i++){ for(uint j = stop[i]; j < stop[i+1]; j++){    pow(a,b)      }  }} 
```

我的内核代码：

```
 private static String programSource =
            "__kernel void "
            + "sampleKernel(__global short *x,"
            + "             __global short *y,"
            + "           __global uint *stop,"
            + "           __global uint *moment)"
            + "{"
            + "for(uint i =0; i<= 100;i++){"
            + " for(uint j = stop[i]; j < stop[i+1]; j++){"
            + "    moment[i] = moment[i] + (pow(x[j],0)*pow(y[j],0))  "
            + "     }"
            + "  }"
            + "}"; 
```

我认为这是因为 x 和 y 的数据类型。但是当我做一个简单的 pow(1,1) 时，它会导致同样的错误。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:08:52.557

只是一个猜测：

整数类型没有***pow***重载，因此编译器将尝试在所有可用重载中找到最接近的匹配：

*   战俘（双，双）
*   战俘（浮动，浮动）
*   ...

但是由于*short*可以转换为*float*和*double*它没有找到要使用的单个重载，因此会出现错误。

要检查这个假设，请尝试明确您要使用 cast 的转换：

```
(pow((float)x[j],0)*pow((float)y[j],0)) 
```

# javascript - 刷新前查询字符串删除

> ID：13661039
> 
> 赞同：0
> 
> 时间：2012-12-01T15:53:51.337
> 
> 标签：javascript, query-string

当用户刷新我的页面时，我想删除在刷新实际发送到服务器之前可能存在的查询字符串（不是更改值，而是完全删除它）。我这样做是为了为我的网络应用程序的用户节省时间。

从外观上看，我可以捕捉到页面正在以某种方式在客户端与`beforeunload`事件一起刷新。现在在这个事件中，我可以删除查询字符串并让它在没有任何查询字符串的情况下刷新到我的页面吗？

[编辑] 如果查询字符串参数存在，服务器将使用数据查询数据库并返回数据。如果它不存在，它就不会这样做。该应用程序将数据存储在本地存储中。其中一个数据是一个 guid 字符串，该字符串 ID 是该应用程序的浏览器本地存储。我可以将它同步到服务器数据库。我也可以分享给别人。共享向他们发送带有您的 guid 字符串的查询字符串 ID 的 URL。当他们单击链接时，查询看到它查询数据库将信息发送回您的朋友设备以在本地存储以供他们查看。如果他们刷新页面，它会再次这样做。不会发生任何不好的事情，因为 javascript 将确保数据不重复，但速度会慢一些。我的应用程序是 99% 的客户端，永远不需要刷新带有查询字符串的页面。

因此，在一天结束时，这样做只是节省时间。它不必在服务器上重新查询数据库，也不必在客户端重新处理数据。这样做没有害处，只是为了提高效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:06:57.563

In your event handler, you can get the current url and replace the query string segment with an empty string.

try something like:

```
window.location = window.location.replace(/\?.*/, ''); 
```

This should return you a new url without the query string.

# javafx-2 - New JavaFx library

> ID：13661050
> 
> 赞同：1
> 
> 时间：2012-12-01T15:55:46.097
> 
> 标签：javafx-2, fxml

I am using *Netbeans 7.2* and *JavaFX 2.1*. I want to make a library `mycompany.utils.sysuser` to maintain login information. This library can be used in many different app, with a JavaFX dialog for *login/logoff/change password*.

I don't know how to begin, a *regular Java library* or a new *JavaFX FXML application*?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:13:36.360

It doesn't really matter. The JavaFX project might generate some extra code and build tasks which you might or might not need but you can remove them if you need to or leave them be. JavaFX is just another library so you're also OK with a java project, just add JavaFX as a dependency.

It is complete overkill and confusing IMO to have a project for FXML and a project for the java files.

# c - vl_ubcmatch 在技术上是如何工作的？

> ID：13661051
> 
> 赞同：3
> 
> 时间：2012-12-01T15:55:58.620
> 
> 标签：c, sift, vlfeat

我正在阅读[此处](https://github.com/vlfeat/vlfeat/blob/master/toolbox/sift/vl_ubcmatch.c)提供的 vl_ubcmatch 的函数源代码，我试图了解它是如何计算分数的，以及它在内部技术上是如何工作的。

但是，这个 C 代码有这些宏、奇怪的 ## 变量之类的，以及我没有经验的东西。所以这里的主要问题是我在 C 语言方面的无能。如果可能的话，有人可以告诉我，究竟是如何`vl_ubcmatch`工作的？它如何比较两个描述符？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T19:34:13.117

这在[*Scale-Invariant Keypoints 的独特图像特征*](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)的第 7.1 节和第 7.2 节中进行了解释。

该函数的文档在这里：[http ://www.vlfeat.org/mdoc/VL_UBCMATCH.html](http://www.vlfeat.org/mdoc/VL_UBCMATCH.html)

仅当 d1 和 d2 之间的距离明显小于到 d1 和图像 2 中任何其他特征的距离时，才使用从图像 1 中的特征 d1 到图像 2 中的特征 d2 的匹配。匹配需要明显优于任何其他特征潜在匹配。“显着”由您传递给 VL_UBCMATCH 函数的阈值定义。

第 7.2 节提到了一个近似最近邻搜索结构，但 VL_UBCMATCH 不使用这个：

```
for(k1 = 0 ; k1 < K1 ; ++k1, L1_pt += ND ) {                        \
                                                                    \
  PROMOTE_##MXC best = maxval ;                                     \
  PROMOTE_##MXC second_best = maxval ;                              \
  int bestk = -1 ;                                                  \
                                                                    \
  /* For each point P2[k2] in the second image... */                \
  for(k2 =  0 ; k2 < K2 ; ++k2, L2_pt += ND) {                      \
                                                                    \
    int bin ;                                                       \
    PROMOTE_##MXC acc = 0 ;                                         \
    for(bin = 0 ; bin < ND ; ++bin) {                               \
      PROMOTE_##MXC delta =                                         \
        ((PROMOTE_##MXC) L1_pt[bin]) -                              \
        ((PROMOTE_##MXC) L2_pt[bin]) ;                              \
      acc += delta*delta ;                                          \
    }                                                               \
                                                                    \
    /* Filter the best and second best matching point. */           \
    if(acc < best) {                                                \
      second_best = best ;                                          \
      best = acc ;                                                  \
      bestk = k2 ;                                                  \
    } else if(acc < second_best) {                                  \
      second_best = acc ;                                           \
    }                                                               \
  }                                                                 \
                                                                    \
  L2_pt -= ND*K2 ;                                                  \
                                                                    \
  /* Lowe's method: accept the match only if unique. */             \
  if(thresh * (float) best < (float) second_best &&                 \
     bestk != -1) {                                                 \
    pairs_iterator->k1 = k1 ;                                       \
    pairs_iterator->k2 = bestk ;                                    \
    pairs_iterator->score = best ;                                  \
    pairs_iterator++ ;                                              \
  }                                                                 \
} 
```

这是伪代码：

```
matches = []
For each descriptor k1 in image 1:
    closest_match_distance = Infinity
    second_closest_match_distance = Infinity
    best_match = None
    For each descriptor k2 in image 2:
        distance_squared = d(k1, k2)
        if (distance_squared < closest_match_distance):
            second_closest_match_distance = closest_match_distance
            closest_match_distance = distance_squared
            best_match = k2
    If (threshold * closest_match_distance <
      second_closest_match_distance AND best_match != None):
        matches.Insert((k1, best_match, closest_match_distance))
return matches 
```

# c# - 未找到 MonoMac + GoogleDriveSdk 程序集？

> ID：13661053
> 
> 赞同：1
> 
> 时间：2012-12-01T15:56:12.957
> 
> 标签：c#, mono, google-drive-api, monomac

我正在尝试做一个可以与google drive sdk交互的简单mac应用程序，但似乎mono无法加载或找到程序集。我确定我已经在项目中引用了所有 dll，并且它们位于输出文件夹中。

还没有尝试在 windows 上使用 mono，但我已经在 windows 中尝试了与 .net 相同的代码，它可以工作。我在这里读过一些关于 libgdata-cil-dev 的内容[，](https://askubuntu.com/questions/66343/monodevelop-google-api-gdata-assembly-not-found)但我不知道如何在 Mac 上安装它

![在此处输入图像描述](../Images/772023b5727234c5c974240a77c25d74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:33:08.527

耶！

它正在编译。我做了什么？

首先，我尝试使用[QuickStart 示例代码](https://developers.google.com/drive/quickstart-cs#step_2_install_the_google_client_library)，但它失败了。

[我从http://code.google.com/p/google-api-dotnet-client/wiki/Downloads?tm=2](http://code.google.com/p/google-api-dotnet-client/wiki/Downloads?tm=2)下载了源代码

并复制我项目中的文件

*   Google.Apis.Drive.v2.cs
*   Google.Apis.Oauth2.v2.cs（快速入门演示不需要此文件）

删除了依赖项

*   Google.Apis.Drive.v2
*   Google.Apis.Oauth2.v2（快速入门演示不需要此参考）

添加对的引用

*   [在单声道下运行 DotNetOpenAuth 时来自 Logger.Create 的](https://stackoverflow.com/questions/10805773/typeloadexception-from-logger-create-when-running-dotnetopenauth-under-mono)log4net TypeLoadException

它建成了！！！

# ios - 防止 iOS 应用获取模拟位置

> ID：13661060
> 
> 赞同：0
> 
> 时间：2012-12-01T15:57:32.093
> 
> 标签：ios, security, geolocation, mocking, spoofing

是否有可能确保 iOS 应用程序获取的 GPS 位置是真实的，并且它们不是以某种方式非法提供的虚假位置，例如，通过诸如 LocationHolic 之类的另一个应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:49:42.327

理论上，您可以进行一些 ip 号码地理查找（例如[，IP 地理查找如何工作？](https://stackoverflow.com/questions/274308/how-does-geographic-lookup-by-ip-work)），但这并不完全可靠（例如 VPN），因此我会犹豫基于此来质疑某人的位置。鉴于 locationholic 适用于越狱设备，当且仅当应用程序在越狱设备上运行时，可能会根据 ip 派生的位置信息验证位置信息。对于基于信息 re ip 号码的地理查找或识别设备是否越狱，我在这两个方面都不是专家，但这两个主题在 StackOverflow 的其他地方都有很好的介绍，或者可以通过谷歌搜索来回答。

简而言之，我怀疑位置在非越狱手机上是可靠的。关于越狱手机上的“查找我的 iPad/iPhone”，我不能说，但所有可靠性和安全性规则在越狱设备上都被抛到了窗外，所以你不能依赖它。

# android - 另一个不匹配的 Android URI

> ID：13661063
> 
> 赞同：0
> 
> 时间：2012-12-01T15:57:48.440
> 
> 标签：android, pattern-matching, uri

我有以下 URI 设置：

```
public static final String AUTHORITY = "content://com.danny.servercontentprovider";
// Query URI
private static final int SERVER = 100;
private static final int SERVER_ID = 101;
// Create URI matcher
private static final UriMatcher sURIMatcher = new UriMatcher(
        UriMatcher.NO_MATCH);

static {
    sURIMatcher.addURI(AUTHORITY, "server", SERVER);
    sURIMatcher
            .addURI(AUTHORITY, "server/#", SERVER_ID);
} 
```

但是当我调用内容提供者时，两个 uri 都不匹配：

```
int uriType = sURIMatcher.match(uri);
switch (uriType) {
case SERVER_ID:
    Log.d(TAG, "A server URI");
    break;
case SERVER:
    // no filter
    Log.d(TAG, "All server URI");
    break;
default:
    Log.i(TAG, "Unknown URI on query: " + uri);
    // throw new IllegalArgumentException("Unknown URI");
} 
```

日志消息：

```
I/ServerContentProvider(442): Unknown URI on query: content://com.danny.servercontentprovider/server/1 
```

当我尝试非数字 uri 时，我收到相同的错误消息（日志消息中没有“/1”）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:24:34.043

将值更改`AUTHORITY`为：

```
public static final String AUTHORITY = "com.danny.servercontentprovider"; 
```

# r - SuperImpose Histogram 适合一个情节 ggplot

> ID：13661065
> 
> 赞同：3
> 
> 时间：2012-12-01T15:58:03.600
> 
> 标签：r, plot, histogram, ggplot2

我有 ~ 5 个非常大的向量（~ 108 MM 条目），所以我在 R 中用它们做的任何情节/东西都需要很长时间。

我正在尝试可视化它们的分布（直方图），并且想知道在不花费太长时间的情况下将它们的直方图分布叠加在 R 中的最佳方法是什么。我正在考虑首先将分布拟合到直方图，然后将所有分布线绘制在一个图中。

你对如何做到这一点有一些建议吗？

假设我的向量是：

```
x1, x2, x3, x4, x5. 
```

我正在尝试使用此代码：[Overlaying histograms with ggplot2 in R](https://stackoverflow.com/questions/6957549/overlaying-histograms-with-ggplot2-in-r)

我用于 3 个向量的代码示例（R 无法绘制）：

```
n = length(x1)
dat <- data.frame(xx = c(x1, x2, x3),yy = rep(letters[1:3],each = n))
ggplot(dat,aes(x=xx)) + 
    geom_histogram(data=subset(dat,yy == 'a'),fill = "red", alpha = 0.2) +
    geom_histogram(data=subset(dat,yy == 'b'),fill = "blue", alpha = 0.2) +
    geom_histogram(data=subset(dat,yy == 'c'),fill = "green", alpha = 0.2) 
```

但是制作情节需要很长时间，最终它把我踢出了 R。关于如何有效地将 ggplot2 用于大型向量的任何想法？在我看来，我必须创建一个包含 5*108MM 条目的数据框，然后进行绘图，在我的情况下效率非常低。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-01T16:14:34.097

这是 Rcpp 的一小段，可以非常有效地对数据进行分类 - 在我的计算机上，大约需要一秒钟来对 100,000,000 个观察值进行分类：

```
library(Rcpp)
cppFunction('
  std::vector<int> bin3(NumericVector x, double width, double origin = 0) {
    int bin, nmissing = 0;
    std::vector<int> out;

    NumericVector::iterator x_it = x.begin(), x_end;
    for(; x_it != x.end(); ++x_it) {
      double val = *x_it;
      if (ISNAN(val)) {
        ++nmissing;
      } else {
        bin = (val - origin) / width;
        if (bin < 0) continue;

        // Make sure there\'s enough space
        if (bin >= out.size()) {
          out.resize(bin + 1);
        }
        ++out[bin];
      }
    }

    // Put missing values in the last position
    out.push_back(nmissing);
    return out;
  }
')

x8 <- runif(1e8)
system.time(bin3(x8, 1/100))
#   user  system elapsed 
#  1.373   0.000   1.373 
```

也就是说，`hist`这里也很快：

```
system.time(hist(x8, breaks = 100, plot = F))
#   user  system elapsed 
#  7.281   1.362   8.669 
```

使用它`bin3`来制作直方图或频率多边形很简单：

```
# First we create some sample data, and bin each column

library(reshape2)
library(ggplot2)

df <- as.data.frame(replicate(5, runif(1e6)))
bins <- vapply(df, bin3, 1/100, FUN.VALUE = integer(100 + 1))

# Next we match up the bins with the breaks
binsdf <- data.frame(
  breaks = c(seq(0, 1, length = 100), NA),
  bins)

# Then melt and plot
binsm <- subset(melt(binsdf, id = "breaks"), !is.na(breaks))
qplot(breaks, value, data = binsm, geom = "line", colour = variable) 
```

仅供参考，我`bin3`手头的原因是我正在研究如何使这个速度成为 ggplot2 中的默认值:)

# css - IE7-8 的对齐问题

> ID：13661066
> 
> 赞同：0
> 
> 时间：2012-12-01T15:58:30.853
> 
> 标签：css

我有跨浏览器兼容性的主要问题。这张图说明了问题：

![没有描述](../Images/b261318f16938e713b2dc26ba4c6b2e6.png)

我为 IE7-8 输入了什么代码，以便我的菜单正确对齐？现在它在 Firefox 中看起来不错，但没有别的。

这是她拥有的菜单代码（可能还有其他相关代码，但我不知道，请参阅[实际站点](http://whitehall.aligndeliverstemp.com/)）：

```
.custom .menu { 
    height:25px;
    border: 1px none; 
    float:right;

} 
```

我已经尝试过其他线程中提到的东西，`overflow:hidden;`/给出宽度/`margin: 0 auto`等等。没有任何效果，最终也只会破坏 Firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:18:09.217

您有可能是原因的[HTML 问题。](http://validator.w3.org/check?uri=http://whitehall.aligndeliverstemp.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)例如，Explorer 讨厌无效的 HTML，并且最难弄清楚您的意图。其他浏览器做出不同的猜测，你的网站在 Safari 中也被破坏了。重点是，除非您遵循标准，否则渲染将是不可预测的。

`<ul>`您有两个无效的空元素。

> `<ul>`需要`<li>`

```
<div id="sidebar_1" class="sidebar">
    <ul class="sidebar_list">
    </ul>
</div>
<div id="sidebar_2" class="sidebar">
    <ul class="sidebar_list">
    </ul>
</div> 
```

修复 HTML 后，*才*可以处理 CSS 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:30:34.127

尝试

```
.custom .menu {
     height: 106px;
     border: 0px none;
     float: right;
}

.custom #header {
     background: transparent;
     height: 80px;
     top: -80px;
     position: relative;
     border-bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:30:40.663

根据我在 Mac 上的 Safari 中看到的内容，这看起来与您遇到的问题相似。有一些css问题。

```
#header { float:left; }
.menu-menu-top-container { float:right; } 
```

消除：

```
#header { clear:both; }
.custom .menu { height:25px; } 
```

不过这个网站有很多问题。我个人会从 html 和 css 重新开始。这是我很长时间以来见过的最奇怪的代码之一。

# c - C 中的指针。为什么不打印我的二维数组？

> ID：13661071
> 
> 赞同：2
> 
> 时间：2012-12-01T15:59:11.407
> 
> 标签：c, pointers

我想在更复杂的问题中使用此代码，但我没有让它工作。为什么我的矩阵没有打印出来？

```
#include <stdio.h>
#include <stdlib.h>

void print_mat(int **a, int n)
{
    printf("\n");
    int k,t;
    for (k=1;k<=n;k++)
    {
        for (t=1;t<=n;t++)
            printf("%d ", a[k][t]);
        printf("\n");
    }
}

int main()
{
    int i,j,n,**a;
    printf("Chess board size=");
    scanf("%d", &n);
    a=(int **)malloc(n*sizeof(int));
    for (i=1;i<=n;i++)
        a[i]=(int*)malloc(n*sizeof(int));
    for (i=1;i<=n;i++)
        for (j=1;j<=n;j++)
            a[i][j]=-1;
    print_mat(a,n);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T16:02:17.643

您应该首先 malloc 的大小为`int *`not `int`，更改

```
a = ( int ** )malloc( n * sizeof( int ) ); 
```

至

```
a = malloc( n * sizeof( int* ) ); //also no need to cast. 
```

此外，正如@Russell Borogove 建议的那样，将循环更改为`for( i = 0; i < n; i++ )`而不是 from `1 to n`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T16:02:40.173

您将希望养成对 C 数组使用从零开始的索引的习惯，并且仅在向用户呈现内容时将它们显示为好像它们是从 1 开始的一样。

`for (i=1;i<=n;i++)`将循环更改为`for (i=0;i<n;i++)`. 与`j`、`k`和 也是如此`t`。

如当前所写，`a[n]`不是分配的指针，`a[0][n]`也不在`a[0]`缓冲区分配内。结果（OSX 10.7.5 上的 gcc 4.2.1）是程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:02:27.503

`a=(int **)malloc(n*sizeof(int));`

改成`a= mallo(n*sizeof(int*))`

在某些系统上`int`，`int*`（指针）可以具有相同的大小，但这可能是造成问题的原因。

还

```
for (i=1;i<=n;i++)
    for (j=1;j<=n;j++)
     a[i][j]=-1; 
```

将其更改为

```
for (i=0;i<n;i++)
    for (j=0;j<n;j++)
    a[i][j]=-1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:03:41.420

线

```
a=(int **)malloc(n*sizeof(int)); 
```

应该读

```
a=malloc(n*sizeof(int *)); 
```

# c++ - 强制局部变量默认初始化

> ID：13661074
> 
> 赞同：1
> 
> 时间：2012-12-01T15:59:32.793
> 
> 标签：c++

在 C++ 中，普通旧数据 (POD) 局部变量默认未初始化。不过，我注意到这会导致错误，因为尝试读取未初始化变量的值是未定义的行为。

有没有办法强制编译器自动初始化所​​有局部变量？也许是一个内置了这个特性的编译器，或者一个常见编译器的编译器开关，比如 GCC 或 Clang？我可以使用 Gnu 扩展；它不必是标准的。

我希望变量是默认初始化的，这意味着 an`int`将设置为 0。

我厌倦了将所有 local`int`和私有类字段分配给 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-22T22:19:58.070

我知道没有开关可以做，即使它*确实*存在，它也只是一个“调试”功能，不能在生产代码中使用。

示例：电子围栏库具有将内存初始化为 0 或`0xff`

> EF_FILL 当设置为 0 到 255 之间的值时，分配的内存的每个字节都被初始化为该值。这可以帮助检测未初始化内存的读取。当设置为 -1 时，一些内存用零填充（大多数系统上的操作系统默认值），一些内存将保留上次使用期间写入它的值。

（仅适用于*分配*的内存，不适用于自动内存）。

依赖未定义为/在标准中的开关会使您的代码不可移植。在某些时候，有人会使用您的代码在其他平台上交叉编译它，这将失败。

作为一种帮助/保护措施，像[Coverity 之](https://www.synopsys.com/software-integrity/security-testing/static-analysis-sast.html)类的工具（注意：我不隶属于这家公司）可以检测代码中未初始化的 POD 成员。可能有免费的工具可以做同样的事情。

因此，如果有一个或 2 个 POD 成员（c++11），我会怎么做：

```
class Foo
{
   ...
   private:
      int x = 0;
      int y = 0;
}; 
```

如果你有无数个成员，也许可以创建一个 POD 类/结构，创建 1 个具有这种类型的成员，并使用最有效的初始化方法将其初始化为 0：

```
class Foo
{
   ...
   private:
      struct Pod
      {
        int x,y,z,whatever;
      };
      Pod m = {0};
}; 
```

这迫使访问成员`m.x`......不透明

或者（可能有点hacky但有效），创建一个POD结构，然后从中*继承*你的类。您现在可以`memset`在默认构造函数中应用 POD 结构的大小

```
 struct Pod
  {
    Pod()
    {
       std::memset(this,0,sizeof(Pod));
    }
    int x,y,z,whatever;
  };

  class Foo : private Pod
  {
     public:
       ...
      private:
        std::string name;
        std::vector<int> elements;
  }; 
```

该`sizeof(Pod)`值确保`memset`仅将 的成员设置`Pod`为 0。

如果`Pod`来自无法更改的 C 结构，则可以`memset`在构造函数中移动语句`Foo`，保持`sizeof(Pod)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-23T23:57:15.157

有一个建议用零初始化局部变量编译 linux 内核，参见今年 linux.conf 的介绍[https://youtu.be/FY9SbqTO5GQ?t=742](https://youtu.be/FY9SbqTO5GQ?t=742)

为了做到这一点，演示者团队使用了一个实验性 gcc 开关`finit-local-vars`，补丁在这里[https://gcc.gnu.org/ml/gcc-patches/2014-06/msg00615.html](https://gcc.gnu.org/ml/gcc-patches/2014-06/msg00615.html)

我希望这最终会合并到 gcc 主分支并被广泛采用。从字面上看，我见过的每个代码风格指南都要求 C/C++ 编码人员`= 0`在定义变量的任何地方进行显式零赋值。这是容易出错且毫无意义的猴子工作。

# process - 一个进程可以有两个接收块吗

> ID：13661076
> 
> 赞同：0
> 
> 时间：2012-12-01T15:59:44.507
> 
> 标签：process, erlang

我的工作环境是 Erlang。具有 2 个不同功能的进程能否在不同功能中有两个接收块。

```
receive
....
end.

request()
PID!(message)
%% Can i get the reply back here instead of the receive block above? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T01:55:22.037

是的，你可以有很多`receive`表达方式。当一个被评估时，它将从消息队列/邮箱中取出第一条匹配的消息（选择你的名字）并将其余的留给下一个`receive`。使用`Pid ! Message`语法（唯一的方式）发送消息是完全异步的，只是将消息添加到接收进程消息队列的末尾。`receive`是*接收*消息的唯一方法，即将它们从消息队列中取出。你永远不能把它们放回去。

Erlang 没有内置的同步消息传递，它是一个通过发送两个消息：

*   “请求”进程向接收进程发送消息，然后进入 a`receive`等待回复。

*   “接收”进程自己会在 a 中获取消息，`receive`对其进行处理，将回复消息发送回“请求”进程，然后进入 a`receive`等待下一条消息。

请记住，进程之间永远没有内在联系，所有通信都是使用异步消息发送和`receive`.

因此，在回答您的第二个问题时：您只能在**表达式**中得到回复`receive`。这是唯一的办法！

抱歉有点迂腐，但 Erlang 没有块或语句。它是一种函数式语言，只有*表达式*总是返回一个值，即使返回值有时被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T21:19:42.633

当然，你可以。

> 接收使用发送运算符 (!) 发送到进程的消息。模式 Pattern 按时间顺序与邮箱中的第一条消息顺序匹配，然后是第二条，依此类推。如果匹配成功并且可选的保护序列 GuardSeq 为真，则评估相应的 Body。匹配的消息被消费，即从邮箱中删除，而邮箱中的任何其他消息保持不变。

以下代码来自`supervisor2.erl`项目`rabbitmq`。它甚至使用嵌套`receive`语句。我在`receive`下面标记了嵌套。

```
terminate_simple_children(Child, Dynamics, SupName) ->
    Pids = dict:fold(fun (Pid, _Args, Pids) ->
                         erlang:monitor(process, Pid),
                         unlink(Pid),
                         exit(Pid, child_exit_reason(Child)),
                         [Pid | Pids]
                     end, [], Dynamics),
    TimeoutMsg = {timeout, make_ref()},
    TRef = timeout_start(Child, TimeoutMsg),
    {Replies, Timedout} =
        lists:foldl(
          fun (_Pid, {Replies, Timedout}) ->
                  {Reply, Timedout1} =
                      receive %% attention here 
                          TimeoutMsg ->
                              Remaining = Pids -- [P || {P, _} <- Replies],
                              [exit(P, kill) || P <- Remaining],
                              receive {'DOWN', _MRef, process, Pid, Reason} -> %%attention here
                                      {{error, Reason}, true}
                              end;
                          {'DOWN', _MRef, process, Pid, Reason} ->
                              {child_res(Child, Reason, Timedout), Timedout};
                          {'EXIT', Pid, Reason} -> 
                              receive {'DOWN', _MRef, process, Pid, _} ->
                                      {{error, Reason}, Timedout}
                              end
                      end,
                  {[{Pid, Reply} | Replies], Timedout1}
          end, {[], false}, Pids),
    timeout_stop(Child, TRef, TimeoutMsg, Timedout),
    ReportError = shutdown_error_reporter(SupName),
    [case Reply of
         {_Pid, ok}         -> ok;
         {Pid,  {error, R}} -> ReportError(R, Child#child{pid = Pid})
     end || Reply <- Replies],
    ok. 
```

# java - OnTouchEvent 后无法使用所需的位图绘制画布

> ID：13661077
> 
> 赞同：1
> 
> 时间：2012-12-01T16:00:10.653
> 
> 标签：java, android, view, bitmap, touch-event

我正在制作一个 tictactoe android 应用程序。在名为 TicTacToeGFX 的自定义视图上制作后，我尝试制作一个`onTouchEvent`（在考虑到触摸坐标后），它将用位图圆或十字填充相应的矩形。问题是在 onTouchEvent 中我无法使用所需的位图重绘画布。所以我的问题是如何在 ? 之后重新绘制画布`onTouchEvent`？

公共类 NewGame 扩展 Activity { TicTacToeGFX 游戏；

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Game = new TicTacToeGFX(this);
    setContentView(Game);
} 
```

}

```
public class TicTacToeGFX extends View {

int x, y;
int rectanglescounter = 0;
public Rect[] rectangles = new Rect[9];
// BitMap
Bitmap cross = BitmapFactory.decodeResource(getResources(),
        R.drawable.cross1);
Bitmap circle = BitmapFactory.decodeResource(getResources(),
        R.drawable.circle1);
Bitmap empty = BitmapFactory.decodeResource(getResources(),
        R.drawable.empty1);

Paint paint = new Paint();
Canvas canvas = new Canvas();

public TicTacToeGFX(Context context) {
    super(context);
    setFocusable(true);
}

protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    // -------------------------------------------calculate
    // screen------------------------------------------------------
    x = (int) ((getWidth()) / 3);
    y = (int) ((getHeight()) / 3);
    // //------------------------------------------- calculate rectangle
    // positions on
    // screen------------------------------------------------------
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            rectangles[rectanglescounter] = new Rect((x * j), (y * i),
                    ((x * j) + x), ((y * i) + y));
            if (rectanglescounter < 8)
                rectanglescounter++;
            else
                break;
        }
    }
    // ------------------------------------------- draw the canvas with
    // empty Bitmap
    // ------------------------------------------------------
    int counter = 0;
    canvas.drawRGB(0, 0, 0);

    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            canvas.drawBitmap(empty, null, rectangles[counter], null);
            counter++;

        }
    }

    // ------------------------------------------- draw
    // LinesS------------------------------------------------------
    paint.setColor(Color.WHITE);
    canvas.drawLine(x, 0, x, 3 * y, paint);// 1h
    canvas.drawLine(2 * x, 0, 2 * x, 3 * y, paint);// 2h
    canvas.drawLine(0, y, 3 * x, y, paint);// 3h
    canvas.drawLine(0, 2 * y, 3 * x, 2 * y, paint);// 4h

}

public boolean onTouchEvent(MotionEvent event) {

    int eventaction = event.getAction();

    x = (int) event.getX();
    y = (int) event.getY();

    switch (eventaction) {

    case MotionEvent.ACTION_DOWN: 
        Toast.makeText(getContext(), "Hello", 1).show();

        canvas.drawRGB(0, 0, 0);
        invalidate();

        break;

    case MotionEvent.ACTION_MOVE: // touch drag with the ball
        // move the balls the same as the finger

        break;

    }
    return true;

}
  } 
```

# c# - Score API - 更新请求返回 HTTP 403 错误，(#200) 用户无法访问此应用程序

> ID：13661079
> 
> 赞同：2
> 
> 时间：2012-12-01T16:00:20.297
> 
> 标签：c#, facebook, facebook-graph-api

我正在 Facebook 上开发一款游戏，但无法更新玩家的分数。

应用程序从 Facebook 接收 HTTP ERROR 403 作为对更新分数图 API 调用的响应。当我从其他机器重播相同的 HTTP 发布请求时，它会通过而没有任何错误。

更多信息：

1.  在注册期间要求玩家进行 publish_actions
2.  应用程序注册为游戏
3.  应用程序的管理员没有收到来自 FB 的错误
4.  运行应用程序的服务器位于负载平衡之后

这不可能是网络问题，因为一些更新请求通过了，这也不能是权限问题，因为请求是在从其他机器执行时通过的。

有谁知道如何解决问题或给我一个继续调查的方向？

fiddler 记录的 HTTP 会话（XXX 正在替换应用程序访问令牌）：

```
POST /100000868887295/scores/?score=1&access_token=XXX HTTP/1.1
User-Agent: Fiddler
Host: graph.facebook.com

HTTP/1.1 403 Forbidden
Access-Control-Allow-Origin: *
Cache-Control: no-store
Content-Type: text/javascript; charset=UTF-8
Expires: Sat, 01 Jan 2000 00:00:00 GMT
Pragma: no-cache
WWW-Authenticate: OAuth "Facebook Platform" "insufficient_scope" "(#200) User cannot access this application"
X-FB-Rev: 677653
X-FB-Debug: gxaao2ZoKOtcQNpLCO4Wh9kXigIhnGByugWQOlg0Y3Y=
Date: Sat, 24 Nov 2012 15:16:03 GMT
Connection: keep-alive
Content-Length: 101

{"error":{"message":"(#200) User cannot access this application","type":"OAuthException","code":200}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:46:13.730

问题解决了。我们在 Facebook 应用程序后台定义了国家限制。由于我们的服务器不在允许的国家之一，因此从该服务器发送的请求被 Facebook 拒绝。

一旦我们取消了国家限制，一切都开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:04:57.683

The score api requires that you use an application access token to post the scores.

# xaml - 使用自定义面板旋转 Windows 应用商店 XAML 控件

> ID：13661089
> 
> 赞同：0
> 
> 时间：2012-12-01T16:02:15.850
> 
> 标签：xaml, windows-8, rotation, windows-store-apps

我正在使用自定义面板，非常类似于[径向面板](http://jobijoy.blogspot.it/2008/04/simple-radial-panel-for-wpf-and.html)。

我想知道是否有办法旋转项目以及定位它们。

我知道我可以使用不同的项目模板，但这需要在编码期间分配模板。我正在寻找运行时解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T11:36:42.340

我所做的是创建一个项目模板，该模板根据 CLR 对象中的数据绑定属性旋转项目。

为了在 Windows 商店应用程序中旋转，我使用[了修改后的 LayoutTransformer](http://igrali.com/2012/09/17/layout-transform-in-windows-8-winrt-xaml/)

# java - 阅读姓名联系方式

> ID：13661098
> 
> 赞同：1
> 
> 时间：2012-12-01T16:03:11.697
> 
> 标签：java, swing, contacts

我制作了一个联系人列表，我的代码编译并运行，当您添加联系人、键入或电子邮件或电话时，它应该向您读取它们，我遇到的问题是当我添加联系人并按下一个或上一个时，首先或者最后它没有读取姓名联系人，但它读取了其他所有内容......它是否必须对间距做一些事情？这就是我所拥有的......谢谢

```
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;

 public class ContactSystem extends JFrame{
//Specify the size of five string fields in the record
final static int NAME_SIZE = 32;
final static int TYPE_SIZE = 32;
final static int CITY_SIZE = 20;
final static int PHONE_SIZE = 15;
final static int EMAIL_SIZE = 15;
final static int RECORD_SIZE =
        (NAME_SIZE + TYPE_SIZE + CITY_SIZE + PHONE_SIZE + EMAIL_SIZE);

//access contact.dat using RandomAccessFile
private RandomAccessFile raf;

//Text Fields
private JTextField jbtName = new JTextField(NAME_SIZE);
private JTextField jbtType = new JTextField(TYPE_SIZE);
private JTextField jbtCity = new JTextField(CITY_SIZE);
private JTextField jbtPhone = new JTextField(PHONE_SIZE);
private JTextField jbtEmail = new JTextField(EMAIL_SIZE);

//Buttons
private JButton jbtAdd = new JButton("Add");
private JButton jbtFirst = new JButton("First");
private JButton jbtNext = new JButton("Next");
private JButton jbtPrevious = new JButton("Previous");
private JButton jbtLast = new JButton("Last");

public ContactSystem(){
    //open or create a random access file

    try {
        raf = new RandomAccessFile("contact.txt", "rw");
    }
    catch(IOException ex) {
        System.out.print("Error: " + ex);
        System.exit(0);
    }

    //Panel p1 for holding labels Name , Type, Email or phone
    JPanel p1 = new JPanel();
    p1.setLayout(new GridLayout(3,1));
    p1.add(new JLabel("Name Contact"));
    p1.add(new JLabel("Email Address"));
    p1.add(new JLabel("Type of Contact"));

    //Panel jpPhone for holding Phone
    JPanel jpPhone = new JPanel();
    jpPhone.setLayout(new BorderLayout());
    jpPhone.add(new JLabel("Phone"), BorderLayout.WEST);
    jpPhone.add(jbtPhone, BorderLayout.CENTER);

    //Panel jpEmail for holding Phone
    JPanel jpEmail = new JPanel();
    jpEmail.setLayout(new BorderLayout());
    jpEmail.add(new JLabel("Phone"), BorderLayout.WEST);
    jpEmail.add(jbtEmail, BorderLayout.CENTER);

    // Panel p2 for holding jpPhone and jpEmail
    JPanel p2 = new JPanel();
    p2.setLayout(new BorderLayout());
    p2.add(jpPhone, BorderLayout.WEST);
    p2.add(jpPhone, BorderLayout.CENTER);

    JPanel p3 = new JPanel();
    p3.setLayout(new BorderLayout());
    p3.add(jbtCity, BorderLayout.CENTER);
    p3.add(p2, BorderLayout.EAST);

    //panel p4 for holding jtfName, jtfType, and p3
    JPanel p4 = new JPanel();
    p4.setLayout(new GridLayout(3,1));
    p4.add(jbtName);
    p4.add(jbtType);
    p4.add(p3);

    //place p1 and p4 into jpContact
    JPanel jpContact = new JPanel(new BorderLayout());
    jpContact.add(p1, BorderLayout.WEST);
    jpContact.add(p4, BorderLayout.CENTER);

    //set panel with line border
    jpContact.setBorder(new BevelBorder(BevelBorder.RAISED));

    //add buttons to a panel
    JPanel jpButton = new JPanel();
    jpButton.add(jbtAdd);
    jpButton.add(jbtFirst);
    jpButton.add(jbtNext);
    jpButton.add(jbtPrevious);
    jpButton.add(jbtLast);

    //add jpContact and jpButton to the frame

    add(jpContact, BorderLayout.CENTER);
    add(jpButton, BorderLayout.SOUTH);

    jbtAdd.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            writeContact();

        }
    });
    jbtFirst.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                if (raf.length() > 0) readContact(0);
            }
            catch(IOException ex){
                ex.printStackTrace();
            }
        }
    });
    jbtNext.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            try {
                long currentPosition = raf.getFilePointer();
                if (currentPosition < raf.length())
                    readContact(currentPosition);

            }
            catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    });

    jbtPrevious.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                long currentPosition = raf.getFilePointer();
                if(currentPosition - 2 * RECORD_SIZE > 0)
                    //why 2 * 2 * RECORD_SIZE? see the the follow-up remarks
                    readContact(currentPosition - 2 * 2 * RECORD_SIZE);
                else
                    readContact(0);

            }
            catch(IOException ex){
                ex.printStackTrace();
            }
        }
    });

    jbtLast.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                long lastPosition = raf.length();
                if(lastPosition > 0)
                    //why 2 * RECORD_SIZE? see the follow up remarks
                    readContact(lastPosition - 2 * RECORD_SIZE);

            }
            catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    });

    try {
        if (raf.length() > 0) readContact(0);

    }

    catch (IOException ex) {
        ex.printStackTrace();

    }

}

//write a record at the end of file

public void writeContact() {

    try {
        raf.seek(raf.length());
        FixedLengthStringIO.writeFixedLengthString(
                jbtName.getText(), NAME_SIZE, raf);
        FixedLengthStringIO.writeFixedLengthString(
                jbtType.getText(), TYPE_SIZE, raf);
        FixedLengthStringIO.writeFixedLengthString(
                jbtCity.getText(), CITY_SIZE, raf);
        FixedLengthStringIO.writeFixedLengthString(
                jbtPhone.getText(), PHONE_SIZE, raf);
        FixedLengthStringIO.writeFixedLengthString(
                jbtEmail.getText(), EMAIL_SIZE, raf);

    }
    catch (IOException ex) {
        ex.printStackTrace();
    }
}

//read a contact at the specific position
public void readContact(long position) throws IOException{
    raf.seek(position);
    String name = FixedLengthStringIO.readFixedLengthString(
            NAME_SIZE, raf);
    String type = FixedLengthStringIO.readFixedLengthString(
            TYPE_SIZE, raf);
    String city = FixedLengthStringIO.readFixedLengthString(
            CITY_SIZE, raf);
    String phone = FixedLengthStringIO.readFixedLengthString(
            PHONE_SIZE, raf);
    String email = FixedLengthStringIO.readFixedLengthString(
            EMAIL_SIZE, raf);

    jbtName.setText(name);
    jbtType.setText(type);
    jbtCity.setText(city);
    jbtName.setText(phone);
    jbtName.setText(email);

}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    ContactSystem frame = new ContactSystem();
    frame.pack();
    frame.setTitle("Contact System");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

}

} 
```

固定长度字符串IO类

```
 import java.io.*;

  public class FixedLengthStringIO {

//read fixed number of characters from datainput stream
public static String readFixedLengthString(int size,
        DataInput in) throws IOException {
    //declare an array of characters
    char[] chars = new char[size];

    //read fixed number of characters to the array
    for(int i = 0; i < size; i++)
        chars[i] = in.readChar();
    return new String (chars);
}

//write fixed number of characters to a dataoutput stream

public static void writeFixedLengthString(String s, int size,
        DataOutput out) throws IOException {
    char[] chars = new char[size];

    //fill an array of characters from the string
    s.getChars(0, Math.min(s.length(), size), chars, 0);

    //fill in blank characters in the rest of the array
    for (int i = Math.min(s.length(), size); i < chars.length; i++)
        chars[i] = ' ';

    //create and write a new string padded with blank characters
    out.writeChars(new String(chars));
}
} 
```

这是我在列表中输入联系人姓名、类型、电子邮件等的时候

![在此处输入图像描述](../Images/d6f3f929d6498950cb4fbfcfe6934782.png)

当我按下一个或上一个，或第一个或最后一个时，它不会读取名称..

![在此处输入图像描述](../Images/717a795559a8e3c3613a0243eaeba950.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:13:17.250

故障在你的`readContact`方法中，改变这个

```
 public void readContact(long position) throws IOException {
        raf.seek(position);
        String name = FixedLengthStringIO.readFixedLengthString(
                NAME_SIZE, raf);
        String type = FixedLengthStringIO.readFixedLengthString(
                TYPE_SIZE, raf);
        String city = FixedLengthStringIO.readFixedLengthString(
                CITY_SIZE, raf);
        String phone = FixedLengthStringIO.readFixedLengthString(
                PHONE_SIZE, raf);
        String email = FixedLengthStringIO.readFixedLengthString(
                EMAIL_SIZE, raf);

        jbtName.setText(name);
        jbtType.setText(type);
        jbtCity.setText(city);
        jbtPhone.setText(phone);
        jbtEmail.setText(email);

    } 
```

`ActionListner`此外，您可以像这样实现，而不是添加单独的命令按钮

```
public class ContactSystem extends JFrame implements ActionListener 
{
  .....
  jbtAdd.addActionListener(this);
  jbtFirst.addActionListener(this);
  .....

  @Override
  public void actionPerformed(ActionEvent e) {
    String actionCommand = e.getActionCommand();
    if(actionCommand.equals("Add")) {
        //do add stuff
    } else if (actionCommand.equals("First")) {
        // move first
    }
  }
} 
```

# gwt - 如何打印图像加载失败的错误消息？

> ID：13661102
> 
> 赞同：2
> 
> 时间：2012-12-01T16:03:38.450
> 
> 标签：gwt

我们可以从图像加载失败中获得任何错误信息吗？我有以下内容：

```
Image image = new Image(imagePath);
image.addErrorHandler(new ErrorHandler() {
    Override
    public void onError(ErrorEvent event) {
        // what can we print here from 'event'?
    }
}); 
```

我有一个图像有时无法加载，我只是尝试让 event.toString() 方法自行打印，但我只是得到类似的东西：

```
println("Error!: " + event);
// "Error: An event type" 
```

所以我不确定为什么图像无法加载，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:22:41.200

目前你不知道是什么导致了错误，但你可以知道是什么类型的错误导致了它，它可以很好地了解可能出了什么问题

```
 event.getAssociatedType(); 
```

或者

```
 event.getType(); 
```

# c# - AJAX 文件上传到 WCF 服务的工作示例

> ID：13661105
> 
> 赞同：0
> 
> 时间：2012-12-01T16:03:41.090
> 
> 标签：c#, javascript, jquery, ajax, wcf

我正在寻找将流数据传输到 WCF 服务的 ajax 调用示例。我总是遇到错误。任何帮助表示赞赏，甚至链接到带有解决方案的博客。这是我的 WCF 服务类

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class Images : IImages
{
    string IImages.UploadImage(string fileKey, Stream imageStream)
    {
        using (var fileStream = File.Create(@"Images\" + fileKey))
        {
            imageStream.CopyTo(fileStream);
        }
        return "done";
    }
} 
```

我的合同是

```
[OperationContract(Name = "UploadImage")]
[WebInvoke(UriTemplate = "?file_key={fileKey}", Method = "POST", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
string UploadImage(string fileKey, Stream imageStream); 
```

我有 web.config 流绑定

```
<binding name="PublicStreamBinding"
        maxReceivedMessageSize="2000000000" transferMode="Streamed">
    <security mode="None" />
</binding> 
```

我的ajax客户端调用是这样的

```
var data = '{"image":"' + uri + '"}'
$.ajax({
    url: GetServerUrl()+"images.svc/?file_key="+options.fileKey,
    type: "POST",
    contentType: "application/json",
    data: data,
    success: function (result) {
        console.log("SUCCESS");
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log("error in transfer::" + jqXHR.responceText);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:21:57.543

我无法评论服务器端代码，但客户端：

*   `data`变量应该是一个普通的 javascript 对象，而不是 JSON表示
*   `url`不需要`GetServerUrl()`前缀；尝试使用前导“/”代替
*   `data`对于 POST 请求，在对象中包含所有参数而不是将它们附加到 URL上更为正常，这是 GET 方法。这取决于服务器端代码的设置，但据我所知，它预计`file_key`在 POST 中。

你应该得到这样的结果：

```
var data = {
    image: uri,
    file_key: options.fileKey
};
$.ajax({
    url: "/images.svc/",//probably
    type: "POST",
    contentType: "application/json",
    data: data,
    success: function (result) {
        console.log("SUCCESS");
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log("errror in transfer::" + jqXHR.responceText);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T21:36:50.690

安装提琴手 ( www.telerik.com/fiddler )。启动它。进行 Web 服务调用。点击 Fiddler 中的通话记录。单击“原始”选项卡以获取请求和响应。这将很有启发性，您将确切地看到服务器和客户端之间传递的内容。也许在响应中还有一些额外的 WCF 故障排除数据。

另外，不要忘记在运行 WCF 服务的机器上检查您的应用程序事件日志。您还可以将 Global.asax 添加到 WCF 项目（如果它是 Web 项目）并将日志记录代码放入 Application_Error 方法中。像这样的东西：

```
 protected void Application_Error(object sender, EventArgs e)
    {       
        Exception ex = Server.GetLastError();

        if (ex is ThreadAbortException)
        {
            // Nothing to do here. The thread abended.
        }
        else
        {
            activityMgr.Add(System.Reflection.MethodBase.GetCurrentMethod(), ex);
        }
    } 
```

# javascript - 向另一个站点显示内容

> ID：13661106
> 
> 赞同：-2
> 
> 时间：2012-12-01T16:03:42.880
> 
> 标签：javascript

我想制作像谷歌adsence（只是示例）java脚本这样的脚本..我们只是在我们的网站中粘贴广告的java脚本..它将变成广告......就像我想制作javascript那样......在我的网站（www.momdb.com）有不同的电影细节......对于每部电影我都需要 javascript..如果有人复制那个 javascript 并粘贴到他的网站上想要显示电影的基本细节（比如，那个电影导演、制片人，演员等）..它都在我的数据库中......如果他复制粘贴javascript，我怎么能把它显示给他的网站......？我怎么能用javascript做到这一点？不需要 iframe ..因为，javascript 可以在任何地方工作...给我一些基本的想法..或者一个教程

谢谢朋友:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:38:19.523

您可以让其他网站在您的网站中包含带有`<script>`标记的 Javascript

```
<script type='text/javascript' src='http://momdb.com/embed.js'></script> 
```

根据`embed.js`包含的内容，可以根据您的需要修改/解析用户的站点。

假设`embed.js`包含以下代码

```
document.write("Hello world"); 
```

这两个标记，

```
<body>
    <script type='text/javascript' src='http://momdb.com/embed.js'></script>
</body> 
```

和这个标记

```
<body>
    <script type='text/javascript'>
        document.write("Hello World");
    </script>
</body> 
```

会产生*完全相同的*结果

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-01T16:11:56.667

你不能。浏览器有一个称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的安全功能，可以防止一段 javascript 访问它不是源自的服务。起源是由提供的页面而不是脚本标记的 URL。因此，如果您的 Web 服务器提供了一个页面（即[http://www.momdb.com](http://www.momdb.com)），则该页面上的任何 javascript 都只能连接回[http://www.momdb.com](http://www.momdb.com)。它甚至无法访问[https://www.momdb.com](https://www.momdb.com)，因为那是不同的来源。有解决此限制的方法，但您应该研究其他安全问题。这就是为什么仍然需要 iframe 的原因，因为页面中的 iframe 可以设置新的原点。

# jquery - jQuery - 检查元素是否为父元素

> ID：13661111
> 
> 赞同：0
> 
> 时间：2012-12-01T16:04:07.037
> 
> 标签：jquery

我知道过滤它是

```
$("div:parent") 
```

但是我如何使用遍历来查看元素是否是父元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:11:24.710

如果您对 jQuery 不满意`$('div:parent')`，并且想显式调用 jQuery 遍历方法，则可以使用

```
$('div').filter(function(){return $(this).children().length}) 
```

如果需要，我们可能会提出更慢或可读性更低的建议。

请注意，这与使用 childNodes 并不完全相同。如果你想看看有没有内容，包括文字，你可能更喜欢

```
$('div').filter(function(){return $(this).contents().length}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:16:31.113

尝试使用[:has](http://api.jquery.com/has-selector/)

```
$('div:has(*)') 
```

或[.has()](http://api.jquery.com/has/)

```
$('div').has('*') 
```

如果你想检查它是否有任何内容.. 使用[:empty](http://api.jquery.com/empty-selector/)选择器

```
$('div:empty') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T00:51:56.443

您要使用的是**：empty** [http://api.jquery.com/empty-selector/](http://api.jquery.com/empty-selector/)

但要小心，如果空里面有空格，则不会认为它们是空的。所以你可以制作另一个选择器/表达式

工作演示：http: [//jsfiddle.net/fedmich/7WdmD/](http://jsfiddle.net/fedmich/7WdmD/)

```
$(function() {
    $.extend($.expr[':'],{
    empty_noWhiteSpace: function(a,i,m){
        return $.trim(a.innerHTML) === '';
    }
});

    $('ul li:empty_noWhiteSpace').addClass('is_empty');
});? 
```

因为当您有这样的列表项时

*   ```
     </li>
        <li>
        not empty
        </li> 
    ```

    第一个 li 项目有换行符，所以它仍然被认为不是**':empty'**标签

# java - App Engine Java 联合身份登录始终重定向到 Google 登录

> ID：13661114
> 
> 赞同：2
> 
> 时间：2012-12-01T16:04:31.153
> 
> 标签：java, google-app-engine, openid, google-openid

我在 Google AppEngine Java 中实现联合登录时遇到问题。 [https://developers.google.com/appengine/articles/openid](https://developers.google.com/appengine/articles/openid)

我正在获得用户服务并获得当前用户。如果当前用户为空，那么我将要求用户服务使用我选择的开放 id 提供程序创建一个登录 url（最终，用户将被允许选择）。这是代码片段

```
UserService userService = UserServiceFactory.getUserService();

User user = userService.getCurrentUser();

if(user == null)
{
    userService.createLoginURL(request.getRequestURI(),null,"yahoo.com",null);
    //do a redirect
} 
```

该方法的第三个参数`UserService.createLoginURL(....)`是 federatedIdentity（参见[此处](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/users/UserService#createLoginURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.util.Set%29)）。对于这个论点，到目前为止，我一直使用这些值`"yahoo.com", "http://open.login.yahooapis.com/openid20/www.yahoo.com/xrds", "https://openid.stackexchange.com/"`，并且一直被重定向到 Google 帐户的登录页面。我还注意到，使用这些参数返回的 url 与没有参数生成的 url 略有不同。

我想我在这里犯了一些错误，但无法弄清楚在哪里。究竟应该将什么传递给该参数，以便将用户重定向到相应提供商的登录页面？例如，yahoo、stackoverflow、facebook 等。

作为一个扩展问题，我相信一旦用户通过身份验证并寻求批准，App Engine 将在下次询问时通过 UserService.getCurrentUser() 自动返回该用户。我对么？

作为记录，我已在应用程序设置中将“身份验证类型”设置为“联合登录”。

2012 年 12 月 5 日更新：我选择了 openid4java。它在发行版中提供了直接示例作为示例，其工作方式类似于应用引擎的魅力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:43:04.637

这可能不是您想听到的，但我们已经在那里并放弃了 OAuth 2 的 OpenID。我知道 OpenID 用于身份验证，OAuth 用于授权（请参阅[this other question](https://stackoverflow.com/questions/1087031/whats-the-difference-between-openid-and-oauth)），但在现实生活中人们只是在使用两者的 OAuth。

我们和 Scribe 一起去了，对此非常满意。请注意，这意味着推出您自己的身份验证解决方案，并且可能会限制您的提供者列表，因为每个提供者的处理方式都不同。

# actionscript-3 - 在 ActionScript 3 中，类变量的条件 if/else 编译是否有效？

> ID：13661116
> 
> 赞同：0
> 
> 时间：2012-12-01T16:04:43.510
> 
> 标签：actionscript-3, apache-flex, air

我正在使用 Flash Builder 4.6、AIR 3.5 中的 AS3 类。

任何人都可以确认以下 if/else 语法在类定义中有效。我已经对其进行了测试，它可以在 Mac 上编译和运行，但我找不到支持它的文档。

```
package controller
{
    import flash.desktop.NativeApplication;
    import flash.display.NativeMenu;
    import flash.display.NativeMenuItem;
    import flash.display.NativeWindow;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;

    [Bindable]
    public class AppMenu extends EventDispatcher
    {
        if (Capabilities.os.search("Mac")>-1) {
            public var titularMenu:NativeMenu;
            public var fileMenu:NativeMenu;
            public var editMenu:NativeMenu;
            private var optionsMenu:NativeMenu;
            private var addOnsMenu:NativeMenu;
            private var helpMenu:NativeMenu;
        } else {
            // Assign same variables as NativeMenuItem, for Windows.
        }

        // etcetera
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:31:33.850

不，您不能在方法或初始化程序之外使用 if/else 条件。

出于您的目的，您可以只使用在 interface 中定义通用属性/方法`IAppMenu`，然后每个操作系统都有一个实现（当然，您仍然需要定义使用哪个实现`Capabilities.os`）。

# visual-studio-2010 - Visual Studio 2010 events button has disappeared

> ID：13661119
> 
> 赞同：2
> 
> 时间：2012-12-01T16:04:54.443
> 
> 标签：visual-studio-2010, visual-studio

Hi I have been working with visual studio 2010 ultimate all day developing an asp.net webforms application. I just realized that on the properties for controls window the button for events is missing , the one that looks like a thunderbolt.

An hour ago that button was there and now somehow it has disapeared and I can't figure out how to make it visible again.

I have tryed reseting the visual studio settings and reseting the computer but nothing worked

How can I get the button back?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:03:56.843

我有同样的问题。这对我有帮助。1.重新启动visual studio 2010。 2.在标记页（.aspx）中单击并选择一个控件（如3.选择后，单击菜单中的“查看”并选择“属性窗口”。

勾选属性框，Thunderbolt 将可用。它只是发生在我身上！

* * *

如果上述解决方案不起作用，请继续！

```
1.Select design view in markup(.aspx)
2.Select any individual control like a button or label..
3.Now, you will be able to see a ">" button on the right side? Click it.
4.Remember to select only one control./.now check your property window! Whoohoo.. 
```

# vim - how to expand directory with awk files

> ID：13661124
> 
> 赞同：1
> 
> 时间：2012-12-01T16:05:37.347
> 
> 标签：vim, awk

I have created a scriptdirectory

```
let $MYSCRIPTS = $VIM."/vimfiles/my_scripts-docs" 
```

($VIM = C:\Program Files\Vim)

this works fine:

`exe "e ".expand('$MYSCRIPTS/vim-calc_vb.txt')`

This doesn't work and I can't find out why:

```
exe "!awk -f ".expand('$MYSCRIPTS/my-awk-script.awk')  
exe "!awk -f ".expand('$MYSCRIPTS\my-awk-script.awk') 
```

error:
awk: fatal: can't open source file 'C:/Program'
It works fine when I put the .awk file in the root but not when
I put it in a vim directory or whatever directory under C:\program files

Why does .txt files expand and .awk files not? How can I let vim know where the awk file is under vimfiles?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:08:53.737

# python - Infix to Postfix Converter Python 2.7

> ID：13661125
> 
> 赞同：1
> 
> 时间：2012-12-01T16:05:41.497
> 
> 标签：python, python-2.7, postfix-operator, infix-operator

I am trying to create a infix to postfix converter in python for a homework assignment, I found multiple ones online that seem simple enough but none of them meet the requirements I need. I have to use the following classes:

```
class Token(object):

    UNKNOWN     = 0             # unknown
    INT         = 4             # integer
    MINUS       = 5             # minus operator
    PLUS        = 6             # plus operator
    MUL         = 7             # multiply operator
    DIV         = 8             # divide operator

    FIRST_OP    = 5             # first operator code

    def getPrecedence(self):
        if self is '(':
            return 0

        elif self is '+'or '-':
            return 1

        elif self is '*' or '/':
            return 2

        else:
            return 3

    def _init_(self, value):
        if type(value) == int:
            self._type = Token.INT
        else:
        self._type = self._makeType(value)
        self._value = value

    def isOperator(self):
        return self._type >= Token.FIRST_OP

    def _str_(self):
        return str(self._value)

    def getType(self):
        return self._type

    def getValue(self):
        return self._value

    def _makeType(self, ch):
        if   ch == '*': return Token.MUL
        elif ch == '/': return Token.DIV
        elif ch == '+': return Token.PLUS
        elif ch == '-': return Token.MINUS
        else:           return Token.UNKNOWN; 
```

I had to add the getPrecedence(): method, which returns an Integer that represents the precedence level of an operator. I also had to use the following class:

```
from token import Token

class Scanner(object):

    EOE = ';'        # end-of-expression
    TAB = '\t'       # tab

    def __init__(self, sourceStr):
        self._sourceStr = sourceStr
        self._getFirstToken()

    def hasNext(self):
        return self._currentToken != None

    def next(self):
        if not self.hasNext():
            raise Exception, "There are no more tokens"            
        temp = self._currentToken
        self._getNextToken()
        return temp

    def _getFirstToken(self):
        self._index = 0
        self._currentChar = self._sourceStr[0]
        self._getNextToken()

    def _getNextToken(self):
        self._skipWhiteSpace()
        if self._currentChar.isdigit():
            self._currentToken = Token(self._getInteger())
        elif self._currentChar == Scanner.EOE:
            self._currentToken = None
        else:
            self._currentToken = Token(self._currentChar)
            self._nextChar()

    def _nextChar(self):
        if self._index >= len(self._sourceStr) - 1:
            self._currentChar = Scanner.EOE
        else:
            self._index += 1
            self._currentChar = self._sourceStr[self._index]

    def _skipWhiteSpace(self):
        while self._currentChar in (' ', Scanner.TAB):
            self._nextChar()

    def _getInteger(self):
        num = 0
        while True:
            num = num * 10 + int(self._currentChar)
            self._nextChar()
            if not self._currentChar.isdigit():
                break
        return num 
```

I have to write a program that converts a infix expression to a postfix expression. This program should use the Token and Scanner classes (which I have included above). The program should consist of a main function that preforms the inputs and outputs, and a class named IFToPFConverter. The main function receives a input string an creates a scanner with it. The scanner is then passed as a argument to the constructor of the converter object. The converter objects convert method is then run to convert the infix expression. This method returns a list of tokens that represent the postfix string. The main function then displays this string. Here is what I have so far:

```
from arrayStack import ArrayStack
from token import Token
from scanner import Scanner

class IFToPFConverter(object):

     def convert(self):
        opStack = Stack()
        postFixList = []

        while self._scanner.hasNext():
            currentToken = self._scanner.next()
            if currentToken in '0123456789'
                postFixList.append(currentToken)
            elif currentToken == '(':
                opStack.push(currentToken)
            elif currentToken == '*':
                opStack.push(currentToken)
            elif currentToken == '/':
                opStack.push(currentToken)
            elif currentToken == '+':
                opStack.push(currentToken)
            elif currentToken == '-':
                opStack.push(currentToken)
            elif currentToken == ')':
                opStack.push(currentToken)

         while not opStack.isEmpty():                

def main():
    sourceStr = raw_input("Please enter an expression:")
    scanner = Scanner(sourceStr)
    conversion = IFToConverter.convert(scanner)
    return conversion

main() 
```

I don't know where to go from here, I don't even know if what I am trying to do at in my `IFToPFConverter` class will work. I have seen much simpler infix to postfix converters.

# php - Wordpress Navigation Menu issues

> ID：13661126
> 
> 赞同：0
> 
> 时间：2012-12-01T16:05:45.713
> 
> 标签：php, wordpress, menu

How can i fix the navigation menu links in Wordpress,

> **I want to generate the menu in following format without using class or id references in child items.**

```
<ul >
            <li><a href="index.php">Home 01</a>
                    <div>
                        <ul>
                        <li><a href="#">Sub Menu A</a>
                        <li><a href="#">Sub Menu B</a>
                      </ul>
                    </div>
            </li>

            <li><a href="#">Menu 02</a>
                    <div>
                        <ul>
                        <li><a href="#">Sub Menu A</a>
                        <li><a href="#">Sub Menu B</a>
                      </ul>
                    </div>
            </li>

</ul> 
```

This is a Custom Menu and iam using widget to call it.

```
register_sidebar( array(
        'name' => __( 'Top Menus', 'my_custom_one' ),
        'id' => 'menu-widget-area-top',
        'description' => __( 'Top Menus', 'my_custom_one' ),
        'before_widget' => '',
        'after_widget' => '',
        'before_title' => '',
        'after_title' => '',
    ) ); 
```

and I have used this PHP code in my template

```
$menu = 'menu-widget-area-top';
$defaults = array(
    'theme_location'  => '',
    'menu'            => '',
    'container'       => true, 
    'container_class' => ''.$menu.'', 
    'container_id'    => '',
    'menu_class'      => '', 
    'menu_id'         => '',
    'echo'            => 0,
    'fallback_cb'     => false,
    'before'          => '',
    'after'           => '',
    'link_before'     => '',
    'link_after'      => '',
    'items_wrap'      => '',
    //'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
    'depth'           => 0,
    'walker'          => ''
);
echo wp_nav_menu( $defaults ); 
```

# c#-4.0 - Special effects in XNA 3D?

> ID：13661137
> 
> 赞同：0
> 
> 时间：2012-12-01T16:07:13.187
> 
> 标签：c#-4.0, xna, xna-4.0

How can I create effects such as smoke, fire, and explosions, in my game using XNA 4.0? If it uses the Reach Profile, that is ok because my graphics card is very bad!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:29:31.430

您可能想研究[Billboards](http://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29#Move_to_3D)和[Particles](http://blog.tigrangasparian.com/2010/10/08/2d-particles-in-xna-part-1-of-3/)。结合起来，您可以创建烟道、雨、爆炸、烟花等等。

# android - Cancel asynctask download on backbutton press

> ID：13661140
> 
> 赞同：2
> 
> 时间：2012-12-01T16:07:51.650
> 
> 标签：android, android-asynctask, overriding, back-button

This is my download class in which I used Asynctask.Everything works fine, when the file is downloaded fully,it shows 'file downloaded' and on 'ok' press goes back to previous activity.Now I wanted to cancel the asynctask(pls not that 'cancel asynctask' and not only the 'loading' dialogue)on back button press and go back to previous activity.How to do that?someone please help.Thanks in advance

```
public class Download extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;

private ProgressDialog mProgressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.down);

    startDownload();

}

private void startDownload() {
    String url = data.proj;

    new DownloadFileAsync().execute(url);
}
private void showMsg() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Document is downloaded")
           .setCancelable(false)
           .setPositiveButton("OK", new DialogInterface.OnClickListener() {
               @Override
            public void onClick(DialogInterface dialog, int id) {
                    //do things
                   Download.this.finish();
               }
           });
    AlertDialog alert = builder.create();
    alert.show();
}
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading file..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(false);

        mProgressDialog.show();

        return mProgressDialog;
    default:
        return null;
    }
}

    class DownloadFileAsync extends AsyncTask<String, String, String> {

@Override
protected void onPreExecute() {
    super.onPreExecute();
    showDialog(DIALOG_DOWNLOAD_PROGRESS);

}

@Override
protected String doInBackground(String... aurl) {
    int count;

try {

URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();

int lenghtOfFile = conexion.getContentLength();
Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

String fname;
 fname = data.proj.substring( data.proj.lastIndexOf('/')+1, data.proj.length() );

InputStream input = new BufferedInputStream(url.openStream());
String path=Environment.getExternalStorageDirectory()
        .toString() + File.separator;
OutputStream output = new FileOutputStream(path+fname);

byte data[] = new byte[1024];

long total = 0;

    while ((count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        output.write(data, 0, count);
    }

    output.flush();
    output.close();
    input.close();
} catch (Exception e) {}

return null;

}
@Override
protected void onProgressUpdate(String... progress) {
     Log.d("ANDRO_ASYNC",progress[0]);
     mProgressDialog.setProgress(Integer.parseInt(progress[0]));
}

@Override
protected void onPostExecute(String unused) {
    dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
    showMsg();
}
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T11:07:40.783

确实是老问题，但似乎很多人在取消 AsyncTasks 时仍然面临问题。所以，这里...

您将需要 AsyncTask 类 (DownloadFileAsync) 中的一个字段来存储用于取消任务的视图（此处为 ProgressDialog）。

对于 ProgressDialog，在创建对话框时，传递`true`给`setCancelable()`

```
mProgressDialog.setCancelable(true); 
```

要传递视图，请更改对 Task 的调用，如下所示：

```
new DownloadFileAsync(mProgressDialog).execute(url); 
```

在我们的 AsyncTask 类中，创建一个构造函数，将这个值保存到一个字段并注册一个AsyncTask 的`OnCancelListener`调用`cancel`方法：

```
ProgressDialog mProgressDialog;

DownloadFileAsync(ProgressDialog progressDialog) {
    mProgressDialog = progressDialog;
    mprogressDialog.setOnCancelListener(new OnCancelListener() {
        @Override
        public void onCancel(DialogInterface dialog) {
            cancel(true);
        }
    });
} 
```

在您的 while 循环中，**在**`doInBackground`循环中添加以下代码：

 **```
if (isCancelled()) {
    outputStream.flush();
    outputStream.close();
    inputStream.close();
    return null;
} 
```

这样我们每隔一段时间就会检查任务是否被取消，如果是，我们关闭打开的流并停止运行任务并返回（返回将是任务结果的类型）。接下来，在`onCancelled`

```
@Override
protected void onCancelled (Integer fileSize) {
    super.onCancelled(fileSize);
    Log.d("TASK TAG", "Cancelled.");
    //anything else you want to do after the task was cancelled, maybe delete the incomplete download.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T18:17:52.017

我就是这样

```
public class downloadAllFeeds extends AsyncTask<Void, Void, Void> 
implements OnCancelListener{

    protected void onPreExecute() {
    pDialog2.setCancelable(true);
    pDialog2.setOnCancelListener(this);
    }

    @Override
    public void onCancel(DialogInterface dialog) {
    // TODO Auto-generated method stub
    downloadAllFeeds.this.cancel(true);
    Log.d("on click cancel true","true");
    }

    @Override
    protected Void doInBackground(Void... params) {
    if(isCancelled()==true){
    //cancel true stop async
    Log.d("cancel true","true");

    }else{
      //perform your task
     }
} 
```

这对我有用，我知道这是一个非常古老的问题，但它没有答案，所以我想我应该分享我刚才可以实现的内容:)**

# asp.net-mvc - .net mvc 中缺少控制器，elmah 给我发电子邮件……让我发疯

> ID：13661141
> 
> 赞同：2
> 
> 时间：2012-12-01T16:07:53.107
> 
> 标签：asp.net-mvc, elmah.mvc

elmah 正在通过电子邮件向我发送缺少控制器的例外情况，如下所示：

> System.Web.HttpException：找不到路径“/Scripts/modernizr-2.0.6-development-only.js”的控制器或未实现 IController。

我添加了一些忽略路由来尝试让应用程序知道脚本不是控制器并忽略所有 .js 和 .css 文件，如下所示：

```
 routes.IgnoreRoute("scripts/*");
    routes.IgnoreRoute("*.js|css"); 
```

它仍然通过电子邮件向我发送例外情况。在这一点上，我只想抑制错误，因为每次我在应用程序上点击一个页面时，它都会触发这封电子邮件。

有什么建议可以治愈吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:32:05.230

检查它正在寻找的脚本是否确实存在于站点中。我曾在 Elmah 中报告过类似的问题，我记得那是在 NuGet 更新了一个 js 库之后，但视图中的引用没有。

希望有帮助。

# opengl - glTexCoord2d has no effect

> ID：13661142
> 
> 赞同：0
> 
> 时间：2012-12-01T16:07:58.703
> 
> 标签：opengl

I'm trying to draw a simple texture in opengl. I made a simple class Texture:

```
class Texture{
public:
    unsigned int id;
    unsigned char image[256*256*3];
    int level;
    int border;
    int width;
    int height;    

    Texture (int level =0, int border = 0) : level(level), border(border) {
        glGenTextures(1, &id);
        width = 256, height = 256;
        glTexImage2D(GL_TEXTURE_2D, level, GL_RGB, width, height, border, GL_RGB, GL_UNSIGNED_BYTE, &image[0]);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE); 

        for (int i= 0; i<width*height*3; i+=3){
            image[i]=1;//i%255;
            image[i+1] =1;// 255-i%255;
            image[i+2] =1;// i%128;
        }
    }

    void useIt(){
        glBindTexture( GL_TEXTURE_2D, id );
    }
}; 
```

It creates an unsigned char array and fill it with some random data. I'm trying to use it this way:

```
glEnable(GL_TEXTURE_2D);
texture->useIt();
glBegin(GL_TRIANGLES);

glNormal3d(0, 1, 0);
glTexCoord2d(0.0,0.0);
glVertex3f(width/-2.f,height/2.f,depth/2.f);
glTexCoord2d(1.0,1.0);  
glVertex3f(width/2.f,height/2.f,depth/2.f);
glTexCoord2d(1.0,0.0);
glVertex3f(width/2.f,height/2.f,depth/-2.f);
glTexCoord2d(0.0,0.0);
glVertex3f(width/-2.f,height/2.f,depth/2.f);
glTexCoord2d(1.0,1.0);
glVertex3f(width/2.f,height/2.f,depth/-2.f);
glTexCoord2d(0.0,1.0);
glVertex3f(width/-2.f,height/2.f,depth/-2.f);

glEnd();
glDisable(GL_TEXTURE_2D); 
```

It draws the plane, but withouht texture (draws with the previously used material). what am i doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:22:05.063

`glBindTexture``Texture`在操作之前，在构造函数中是必需的`glTex*`。

您可能还需要：`glPixelStorei(GL_UNPACK_ALIGNMENT, 1)`before `glTexImage2D`，因为行内存地址不在 4 字节边界上。

**顺便说一句...，**您需要先设置`image`数据，然后再通过`glTexImage2D`. 现在，您只是使用未初始化的数据设置纹理。此外，设置 RGB 字节数据的循环只是为您提供非常接近黑色的值，all: `(1, 1, 1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:46:48.900

您的代码可能存在三个问题。Brett Hale 已经告诉过你，在使用 glTexImage 上传数据之前，你需要绑定一个纹理对象。

glTexImage 创建您提供给它的数据的副本（这与 glVertex...Pointer 函数不同，后者仅将指针或偏移量接收到缓冲区对象中）。但是，在将图像数组的内容复制到纹理*之后*，您正在用数据填充图像数组。您也可以在将数据复制到纹理后安全地删除图像数组。

最后但并非最不重要的一点：这些操作可以在构造函数中找到。如果在创建 OpenGL 上下文之前初始化的范围内有纹理类实例，则根本不会发生任何事情，因为没有 OpenGL 上下文。因此，要么确保仅在 OpenGL 上下文可用后创建纹理对象，要么将纹理创建和上传代码放入单独的方法中，一旦 OpenGL 上下文可用，您将调用该方法。

# javascript - How to hide a button that is affixed when it 'floats' over a DIV?

> ID：13661143
> 
> 赞同：2
> 
> 时间：2012-12-01T16:08:00.543
> 
> 标签：javascript, jquery, html

I have a button `back-to-top` that is affixed to the left side of the screen - it uses `scrollTop` to slide-scroll to the top of the page when it's clicked. When the page the loads, the button is visible and does not cover anything that is readable etc.

When a user scrolls down the page, the button goes over certain DIVs that have text content. When the button goes into such a DIV I want it to hide using `.hide()`. Can't get it to work, here's what I have:

```
 var p = $('a.back-to-top');
    var position = p.position();

    if(position == $('#about-me')){
        $('a.back-to-top').hide();
    } 
```

Is `if(position == $('#about-me'))` the correct way to check if the button's position is in the `#about-me` DIV? Or, should I create a variable similar to `position` for the DIV?

EDIT: A messy but simple [fiddle](http://jsfiddle.net/ygQbS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:17:54.480

[http://api.jquery.com/position/](http://api.jquery.com/position/) - position() 方法返回一个具有 .left 和 .top 属性的位置对象。所以基本上，你不能将位置与选择器返回的某个对象进行比较。相反，您应该比较两个元素的“顶部”属性值。例如，您有：

```
var p = $('a.back-to-top');
var position = p.position(); 
```

也得到这个：

```
var aboutMePosition = $('#about-me').position(); 
```

然后你可以比较：

aboutMePosition.top 和 position.top 无论您需要哪种方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T16:19:32.170

您将需要在回调中进行此检查 .. 可能`$(window).scroll`以便在每次窗口滚动时检查它；否则，仅在页面加载时检查。

我不认为你想使用`position`任何一个，因为这是相对于父母的位置。相反，您可能想要`.offset`. 这将返回一个包含`top`和`left`成员的对象。`==`比较没有意义，尤其是对于 jQuery 对象。你想使用：

```
$(window).on('scroll', function () {
   var offset = $("a.back-to-top").offset().top;

   var within = $("#about-me").offset().top;

   if (offset >= within && offset <= within + $("#about-me").height()) {
      $("a.back-to-top").hide();
   }
   else {
      $("a.back-to-top").show();
   }
});​ 
```

如果位置固定，则随着滚动的偏移量会`.back-to-top`发生变化，而静态块的偏移量不会改变，因此您可以进行此比较。

看看它在行动：http: [//jsfiddle.net/QnhgF/](http://jsfiddle.net/QnhgF/)

# javascript - TypeScript's hashtables and keys with a dash

> ID：13661144
> 
> 赞同：19
> 
> 时间：2012-12-01T16:08:07.613
> 
> 标签：javascript, typescript

Is it possible to declare a hashtable which includes keys with a dash in TypeScript?

Here's the code i've tried:

```
export interface ImapMessageHeader {
    'mime-version': string[];
    received: string[];
    [index: string]: string[];
} 
```

From which i receive the following error:

> Expected identifier in property declaration

The last declaration defining the index type allows me to call any string key, but i can't explicitly define the ones i want to use.

Thanks!

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-25T18:15:40.780

这在 TypeScript 0.9.5 中适用于我。该[问题也被标记为关闭](http://typescript.codeplex.com/workitem/1073)。

```
interface Foo
{
    "a-1": string;
}

var f: Foo = { "a-1": "hello" }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T19:40:00.630

Quoted property names in interface declarations and type literals aren't supported yet, but I believe they will be added in a future release.

# gcc - Using spinlocks with gcc

> ID：13661145
> 
> 赞同：2
> 
> 时间：2012-12-01T16:08:12.900
> 
> 标签：gcc, ubuntu-12.04, spinlock

how can I use pthread_spinlock_t in gcc 4.6.3? Which flags do I have to specify at compile time? I'm using Ubuntu 12.04!

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:55:23.590

只需添加选项`-pthread`或`-lpthread`链接时。

选项`-std=c99/c11`将可用的库函数限制为 C99/C11 标准库的函数

为了获得 C99/C11 语言功能/库**和**POSIX（以及一些 BSD 和一些 GNU 扩展）API，可以使用`-std=gnu99`或`-std=gnu11`选择 GCC。

# linux - Shell Scripting for archiving and encrypting

> ID：13661147
> 
> 赞同：1
> 
> 时间：2012-12-01T16:08:46.517
> 
> 标签：linux, shell, tar

I need to create a script which receives from the CLI the name of a file with the extension .tar.gz and a folder(e.g ./archivator.sh box.tar.gz MyFolder). This script will archive the files from the folder(only the files WITHIN the folder and without any compression) and they will be moved into the archive received as a parameter. The archive will be then encrypted(using the aescrypt) with the password 'apple'.

OS: Debian 6

**Note: The final encrypted archive will have the same name as the first given parameter.**

What i have tried so far is this:

```
tar -cvf $1 $2/* | aescrypt -e -p apple - > $1.aes | mv $1.aes $1 
```

And this is what I receive when I am trying to check my script:

```
tar: This does not look like a tar archive
tar: Exiting with a failure status due to previous errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:13:04.597

尝试这样做：

```
tar cf - $2/* | aescrypt -e -p apple - > $1 
```

`-`在这里，表示**STDIN**

使用 GNU tar 1.26 在 Linux (archlinux) 上运行良好

如果它不起作用，请在调试模式下运行脚本：

```
bash -x script.sh 
```

然后再来张贴输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:41:07.883

经过一番研究，这里是解决方案：

```
pushd $2
tar cvf $1 .
openssl aes-256-cbc -in $1 -out $1.enc -pass pass:apple
mv $1.enc $1
popd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:53:54.317

您的错误似乎表明解释器正在接收一个不是 tar 存档的文件，但它需要一个。您是否检查过以确保您提供的文件是 tar 存档？

# android - Android recurring events with shifting exception

> ID：13661150
> 
> 赞同：0
> 
> 时间：2012-12-01T16:08:57.743
> 
> 标签：android, events, calendar

I want to add an recurring event to the calendar but with some exceptions where the event is shifted to another date. I've read to several tutorials but I can't find a solution.

Is this behavior even possible?

# java - Sub JComponent Won't gain focus despite visible, enabled being true

> ID：13661151
> 
> 赞同：1
> 
> 时间：2012-12-01T16:09:15.547
> 
> 标签：java, focus, japplet

I'm working on a problem and I can't seem to gain focus for JComponent sub components of a Japplet. I'm required to focus the component so that I can use a keyboard listener to register keypresses for a number of onscreen elements (game).

Here's the code:

```
class TestApplet extends JApplet { 
    public void init(){ 
        setSize(400, 800); 
        new test class();
        setFocusable(true);
        setVisible(true);
    }
}

 public class testclass extends JPanel {
 public testclass() {
        grabFocus();
        requestFocus();
        requestFocusInWindow();

       System.out.println("visible: " + isVisible());
        System.out.println("Enbled " + isEnabled());
        System.out.println("Focusable " + isFocusable()); 
        System.out.println(isFocusOwner()); 
    } 
} 
```

the output evaluates as

```
visible: true
Enbled true
Focusable true
false 
```

This is despite the fact that I've used every possibly comination of focus grabbing for the subcomponent. If I place the same code into the Japplet, the keyboard listener that I create does work but not when I use a subcomponent...

This is fairy critical to my application since I have many JPanels in a hierarchal topography.

N.B it's been suggested that this might be a macosx specific bug - I'm using Intellij CE11.1\. Although I'm unable to verify this.

UPDATE: I have to also create the functionality that the program should respond to mb1,2 and the middle mouse button - clearly this is impossible without focus?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:49:01.900

我创建了自己的 SSCCE，在测试中，似乎无论使用什么技术，小程序仍然必须请求并获得焦点才能使它们工作。我已经使用两个组件中的任何一个成功地在我的 Windows 系统上工作，包括在 xxx ms 之后请求焦点的 javax.swing.Timer，或者`paint(...)`在第一次调用绘制时请求焦点的 JApplet 方法的覆盖（和当小程序刚刚被渲染时）。例如，显示两个 kludges（只需要一个）以及键绑定和 SSCCE 的示例：

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.lang.reflect.InvocationTargetException;

import javax.swing.*;

@SuppressWarnings("serial")
public class KeyBindingEg extends JApplet {
   protected static final int TIMER_DELAY = 100;
   private boolean firstPane = true;

   @Override
   public void init() {
      createAndShowGui();
   }

   private void createAndShowGui() {
      try {
         SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
               TestClass test = new TestClass();
               getContentPane().add(test);

               // a kludge to get focus on the GUI some time after it has been created
               new Timer(TIMER_DELAY, new ActionListener() {

                  @Override
                  public void actionPerformed(ActionEvent e) {
                     requestFocusInWindow();
                     ((Timer)e.getSource()).stop();
                  }
               }).start();
            }
         });
      } catch (InterruptedException e) {
         e.printStackTrace();
      } catch (InvocationTargetException e) {
         e.printStackTrace();
      }
   }

   @Override
   public void paint(Graphics g) {
      super.paint(g);
      // another kludge to get focus on the GUI after it is
      // first rendered
      if (firstPane) {
         requestFocusInWindow();
         firstPane = false;
      }
   }
}

@SuppressWarnings("serial")
class TestClass extends JPanel {
   public TestClass() {
      setLayout(new BorderLayout());
      add(new JLabel("TestClass", SwingUtilities.CENTER));

      int condition = WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition);
      ActionMap actionMap = getActionMap();

      for (KeyInfo keyInfo : KeyInfo.values()) {
         KeyStroke keyStroke = KeyStroke.getKeyStroke(keyInfo.getKeyCode(), 0);
         inputMap.put(keyStroke , keyInfo.toString());
         actionMap.put(keyInfo.toString(), new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent evt) {
               System.out.println("key press: " + evt.getActionCommand());
            }
         });
      }
   }
}

enum KeyInfo {
   UP(KeyEvent.VK_W), DOWN(KeyEvent.VK_S), LEFT(KeyEvent.VK_A), RIGHT(KeyEvent.VK_D);
   private int keyCode;

   private KeyInfo(int keyCode) {
      this.keyCode = keyCode;
   }

   public int getKeyCode() {
      return keyCode;            
   }

} 
```

上面的代码使用了 AncestorListener：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.*;
import java.lang.reflect.InvocationTargetException;

import javax.swing.*;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;

@SuppressWarnings("serial")
public class KeyBindingEg extends JApplet {
   protected static final int TIMER_DELAY = 100;
   private boolean firstPane = true;

   @Override
   public void init() {
      createAndShowGui();
   }

   private void createAndShowGui() {
      try {
         SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
               TestClass test = new TestClass();

               JPanel contentPane = (JPanel) getContentPane();
               contentPane.add(test);
               contentPane.addAncestorListener(new RequestFocusListener());               
            }
         });
      } catch (InterruptedException e) {
         e.printStackTrace();
      } catch (InvocationTargetException e) {
         e.printStackTrace();
      }
   }

}

class RequestFocusListener implements AncestorListener {
   public void ancestorRemoved(AncestorEvent arg0) {}
   public void ancestorMoved(AncestorEvent arg0) {}

   @Override
   public void ancestorAdded(AncestorEvent aEvt) {
      Component comp = (Component) aEvt.getSource();
      comp.requestFocusInWindow();
   }

}

@SuppressWarnings("serial")
class TestClass extends JPanel {
   public TestClass() {
      setLayout(new BorderLayout());
      add(new JLabel("TestClass", SwingUtilities.CENTER));

      int condition = WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition);
      ActionMap actionMap = getActionMap();

      for (KeyInfo keyInfo : KeyInfo.values()) {
         KeyStroke keyStroke = KeyStroke.getKeyStroke(keyInfo.getKeyCode(), 0);
         inputMap.put(keyStroke, keyInfo.toString());
         actionMap.put(keyInfo.toString(), new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent evt) {
               System.out.println("key press: " + evt.getActionCommand());
            }
         });
      }
   }
}

enum KeyInfo {
   UP(KeyEvent.VK_W), DOWN(KeyEvent.VK_S), LEFT(KeyEvent.VK_A), RIGHT(
         KeyEvent.VK_D);
   private int keyCode;

   private KeyInfo(int keyCode) {
      this.keyCode = keyCode;
   }

   public int getKeyCode() {
      return keyCode;
   }

} 
```

# django - 如何让主干视图在页面上“开始”（运行）？

> ID：13661153
> 
> 赞同：0
> 
> 时间：2012-12-01T16:09:52.753
> 
> 标签：django, backbone.js

我刚刚开始使用 Backbone，我已经在示例应用程序中设置了主干依赖项（主干、下划线、json2），并且我开始为我的应用编写一些主干模型、视图等。

我的问题是：假设用户导航到我的应用程序中的页面。该页面如何初始化/调用主干视图？我的印象是我应该在加载的页面上包含这种 jQuery/js：

```
 $(document).ready(function(){
   window.app = new SampleApp.Views.Articles.ShowView();
   new SampleApp.Routers.RootRouter();
   Backbone.history.start();
 }); 
```

然后我认为 Articles ShowView 会运行：

```
 $(document).ready(function(){
   SampleApp.Views.Articles || (SampleApp.Views.Articles = {});
   window.SampleApp.Views.Articles.ShowView = Backbone.View.extend({
     el: ".container",
     events: {
       'click .overlay': 'test'
     },
     initialize: function(){
       //eg: this.model.bind('change', this.render, this)
     },

     render: function(){
       $(".container").html('');
       alert('got here');
     },
     test: function(){
       alert('clicked a picture');
     }
   })
 }); 
```

但是，当我加载页面时，我没有获得 ShowView 中指定的任何功能。（没有警报等）。我意识到“ShowView”是用词不当，因为它实际上还没有做任何事情。但如果它真的被调用，那么这些警报不应该运行吗？

仅供参考，我认为我正确包含了主干的所有文件：

```
 <script src="{{ STATIC_URL }}js/underscore.js"></script>
 <script src="{{ STATIC_URL }}js/json2.js"></script>
 <script src="{{ STATIC_URL }}js/backbone.js"></script>
 {# Models #}
 <script src="{{STATIC_URL}}js/backbone/models/article.js"></script>
 {# Views #}
 <script src="{{STATIC_URL}}js/backbone/views/articles/show.js"></script>
 {# Routers #}
 <script src="{{STATIC_URL}}js/backbone/routers/root.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:32:32.173

`render`在您的示例中，您需要在实例上调用的东西`ShowView`。这可以是路由器中路由的责任，也可以只在创建视图的文档就绪处理程序中执行。

```
window.app = new SampleApp.Views.Articles.ShowView();
window.app.render(); 
```

# objective-c - UITable 视图 numberOfRowsInSection & cellForRowAtIndexPath 错误

> ID：13661154
> 
> 赞同：0
> 
> 时间：2012-12-01T16:10:01.047
> 
> 标签：objective-c, arrays, uitableview

我的问题是我有一个 UITable，我无法让 numberOfRowsInSection 与 cellForRowAtIndexPath 对应。

我的 foodCategoryObj 有三个数组，第一个数组有 6 个元素，第二个有 2 个，第三个有 3 个。

这一行 FoodCategory *foodCategoryObj = [appDelegate.foodCategoryArray objectAtIndex:indexPath.row];

..不断抛出这个错误..索引 2 超出范围 [0 .. 1]

总的来说，我不知道要为 numberOfRowsInSection 返回什么数字

arrayCountInt 还返回我在 viewWillAppear 中创建的数组中的对象数。

```
- (NSInteger)tableView:(UITableView *)tblView numberOfRowsInSection:(NSInteger)section {

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *arrayCountString = [prefs stringForKey:@"arrayCountString"];
NSInteger *arrayCountInt = [arrayCountString intValue];
//NSLog(@"arrayCountInt.. %i", (arrayCountInt) - 1);

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSInteger *arrayCount = [appDelegate.foodCategoryArray count];

NSInteger *foodArray = [foodCatArray count];

// testing
NSLog(@"foodCatArray.. %i", foodArray);

return arrayCountInt;
}

- (UITableViewCell *)tableView:(UITableView *)tblView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
}

//NSLog(@"indexPath.row.. %i", (indexPath.row)-1);
FoodCategory *foodCategoryObj = [appDelegate.foodCategoryArray objectAtIndex:indexPath.row];

//Set the cell title
cell.text = foodCategoryObj.foodName;

// testing
//NSLog(@"%@", foodCategoryObj.foodName);
//NSLog(@"appDelegate.foodCategoryArray.. %@", appDelegate.foodCategoryArray);

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:32:11.887

你为什么不在`[appDelegate.foodCategoryArray count]`方法中返回`numberofrowInSection`。你应该返回你的`foodArray`并且你返回了错误的 var

# javascript - 使用backbone.iobind，backbonejs model.toJSON() 无法获得正确的输出

> ID：13661155
> 
> 赞同：0
> 
> 时间：2012-12-01T16:10:19.370
> 
> 标签：javascript, backbone.js

骨干型号，板：

```
 define([
  'underscore',
  'backbone',
  'collections/lists',
  'iobind',
  'iosync'
], function( _, Backbone, Lists,ioBind,ioSync) {

  var BoardModel = Backbone.Model.extend({
    urlRoot: 'board',
    noIoBind: false,
    socket: io.connect(''),
    idAttribute: '_id',

    defaults: {
      title: 'One Thousand and One Nights'
    },

    initialize: function() {
      this.id = 1;
      this.lists = new Lists;
      this.socket.emit('joinBoard',this.id);

      _.bindAll(this, 'getBoard');
      this.ioBind('initBoard', this.getBoard, this);
    },

    getBoard: function(data){
      this.set(data.data.board[0]);
    }
  });

  return BoardModel;
}); 
```

主干视图：boardView：

```
var IndexView = Backbone.View.extend({

    // Instead of generating a new element, bind to the existing elements in the HTML.
    el: '#board',

    // Board template html
    template: Mustache.render(Template.board),

    events: {

    },

    initialize: function() {
      //Init Data
      this.model = new Board();
//      var lists = {
//        lists: [
//          {name: "To Do",
//            cards:[
//              {name: "Art work for A."},
//              {name: "B Prototype."},
//              {name: "C prototype."}
//            ]
//          },
//          {name: "Doing",
//            cards: [
//              {name: "Art work for A."}
//            ]
//          },
//          {name: "Done"}
//        ]
//      }
//      var partial = {card: Template.card_in_list};
//      var listHtml = Mustache.render(Template.list,lists,partial);
//      template = $(this.template).find('.list-area').append(listHtml);
    },

    render: function() {

      console.log(this.model);
      console.log(this.model.toJSON());

      var partial = {card: Template.card_in_list};
      var listHtml = Mustache.render(Template.list,this.model,partial);
      template = $(this.template).find('.list-area').append(listHtml);
      this.$el.html(template);
    }

  }); 
```

在 View function：render 函数中，console.log 得到不同的结果。console.log(this.model) 可以得到正确的对象结果：

```
child
_callbacks: Object
_changing: false
_escapedAttributes: Object
_ioEvents: Object
_pending: Object
_previousAttributes: Object
_silent: Object
attributes: Object
__v: 0
_id: "50b750a7795f285d4e000014"
created: "2012-11-29T12:10:15.269Z"
description: "simple is better, but not simpler"
dueDate: "2012-11-29T12:10:15.269Z"
lists: Array[6]
status: true
title: "test board unique"
__proto__: Object
changed: Object
cid: "c1"
getBoard: function () { [native code] }
id: "50b750a7795f285d4e000014"
lists: child
__proto__: ctor 
```

但是 this.model.toJSON() 只获取模型默认值：

```
Object
title: "One Thousand and One Nights"
__proto__: Object 
```

它让我感到困惑。任何人都知道为什么相同的模型会得到不同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:33:11.843

在主干模型中，您的业务价值（描述、标题...）存储在`attributes`属性中。当您调用`toJSON()`您的模型时，它所做的是获取`attributes`值，并删除 Backbone.Model 对象框架的函数和属性。

当您想要手动设置模型属性时，您想要使用`set`. 我不知道你`data.data`反对的是什么，所以你应该检查文档：[http ://backbonejs.org/#Model-set](http://backbonejs.org/#Model-set)

> **放** `model.set(attributes, [options])`
> 
> 在模型上设置属性的散列（一个或多个）。如果任何属性更改模型状态，将触发“更改”事件，除非 {silent: true} 作为选项传递。特定属性的更改事件也会被触发，您也可以绑定到这些事件，例如：change:title 和 change:content。您还可以传递单个键和值。
> 
> note.set({title: "March 20", content: "在他眼里她黯然失色..."});
> 
> book.set("title", "波西米亚丑闻"); 如果模型有 validate 方法，会在设置属性之前进行验证，如果验证失败则不会发生任何变化，set 会返回 false。否则，set 返回对模型的引用。您还可以在选项中传递一个错误回调，如果验证失败，它将被调用而不是触发“错误”事件。如果 {silent: true} 作为选项传递，验证将推迟到下一次更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:08:13.517

我发现我触发了 boardView.render 两次。当我更改代码时：

```
a = new boardView;
a.render(); 
```

到

```
a = new boardView; 
```

我把事情做好了。

顺便感谢 Marcel Falliere 的评论。

# erb - 新页面忽略 ruby 代码 - Rhomobile

> ID：13661165
> 
> 赞同：0
> 
> 时间：2012-12-01T16:11:56.640
> 
> 标签：erb, rhomobile

在我的 Rhomobile 项目中，我刚刚在 /app 中创建了一个新的 .erb 文件。但是 <%= %> 之间的命令只是被忽略了......例如，我有一个这样的链接：

```
'href="<%= url_for :controller => :Settings, :action => :do_sync %>"' 
```

但是当我点击它时，什么也没有发生。如何创建可以包含此类命令的新页面文件？我可以将它映射到一些配置文件中吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:40:32.747

我认为您的问题是`.erb`文件的位置，而不是您对`url_for`.

假设您在 Settings 控制器中引用了一个操作，该`.erb`文件应该位于`/app/Settings`. 这意味着如果你想渲染一个`login`从你的设置控制器调用的动作，你必须创建文件`login.erb`，使它位于`/app/Settings/login.erb`.

在您`rhoconfig.txt`可以定义应用程序启动和设置路径，如果您想更改它，以便在特定控制器中启动应用程序，而不是在`/app/index.erb`.

# c# - 使用扩展制作通用复制方法

> ID：13661166
> 
> 赞同：0
> 
> 时间：2012-12-01T16:12:03.460
> 
> 标签：c#, generics

上下文：这是一个引擎，它充满了通用类，因此未来的用户可以扩展行为的某些部分，而不用关心引擎本身的内部工作。

现在，我需要一个 C 类：

```
public class C
{
    public C Copy(params) { ... }
} 
```

但也是一个扩展类 D：

```
public class D : C
{
    public D Copy(params) { ... }
} 
```

基本上我有一些通用类，但我需要一个返回正确类型的复制方法（实际上是“在新位置制作副本”方法，但这无关紧要）。

```
public class SampleClass<T>
    where T : C
{
    public void Stuff()
    {
        ...
        T copy = favoriteThing.Copy(params);
        ...
    }
} 
```

等等。我*可以*直接转换它，并相信未来的实施者会做对，但我宁愿通过合同明确说明。有什么*优雅*的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:27:36.263

一种方法可能是定义一个由and`ICopyable<T>`实现的接口：`C``D`

```
public interface ICopyable<T>
{
    T Copy(params);
}

public class C : ICopyable<C> { ... }
public class D : C, ICopyable<D> { ... } 
```

Now if `SampleClass<T>` constrains `T` to `ICopyable<T>`, it can call `Copy` and get back an object of type `T` without any casts:

```
public class SampleClass<T>
    where T : C, ICopyable<T> // added constraint
{
    public void Stuff()
    {
        T favoriteThing = ...
        ...
        ICopyable<T> copyable = favoriteThing;
        T copy = copyable.Copy(params); // no cast needed
        ...
    }
} 
```

# xcode - moveRowAtIndexPath 和 CoreData 关系

> ID：13661168
> 
> 赞同：0
> 
> 时间：2012-12-01T16:12:09.667
> 
> 标签：xcode, core-data, uitableview

我坚持订购核心数据关系。我有一个多对多关系，但我无法克服的问题是在一个视图中重新排序关系实体会在它们所属的每个视图中重新排序它们。

示例：使用方法`People`添加`activity1`并随机排序`moveRowAtIndexPath`。那些相同的人被添加到`activity2`并且被相同地排序`activity1`。我怎样才能阻止这个？

相关代码：

```
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    NSUInteger fromRow = [fromIndexPath row];
    NSUInteger toRow = [toIndexPath row];

    id object = [[eventAthletes objectAtIndex:fromRow] retain];
    [eventAthletes removeObjectAtIndex:fromRow];
    [eventAthletes insertObject:object atIndex:toRow];

    int i = 0;
    for (object in eventAthletes)
    {
        [object setValue:[NSNumber numberWithInt:i++] forKey:@"athleteDisplayOrder"];
    }

    [self saveContext];

    [object release];
} 
```

我更新了模型并使属性`athleteDisplayOrder`瞬变，认为通过使用密钥而不是保存它，我将能够在新事件中重新开始。没有骰子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:50:41.617

相同的顺序是预期的行为。如果你想“随机化”这个顺序，你必须通过重新分配随机`athleteDisplayOrder`属性来明确地做到这一点。

**编辑：**

如果您想为每个项目有一个特殊的用户可定义的运动员顺序，解决此问题的一种方法是创建一个新实体`EventAthletes`，该实体具有 Event 和 Athlete 的一对一关系，并且还包含显示顺序属性。

**结束编辑**

顺便说一句，您正在使用带有核心数据的额外数据数组以在表格视图中显示。您是否知道可以使用它`NSFetchedResultsController`来更有效地管理表视图数据源？

# java - IntelliJ Idea 不在 R.java 中生成 id

> ID：13661169
> 
> 赞同：14
> 
> 时间：2012-12-01T16:12:23.990
> 
> 标签：java, android, compilation, intellij-idea

我最近切换到 IntelliJ Idea 12。

现在在android上创建了一个项目，马上遇到一个问题：not generated id in R.java

重建项目没有帮助。

也许在 IntelliJ Idea 中有任何我不知道的微妙之处？

错误：

```
12-01 16:08:15.067: ERROR/AndroidRuntime(7108): FATAL EXCEPTION: main
android.content.res.Resources$NotFoundException: String resource ID #0x1
at android.content.res.Resources.getText(Resources.java:266)
at android.widget.TextView.setText(TextView.java:3624)
at com.example.poem_new.MyActivity.invalidateCounters(MyActivity.java:41)
at com.example.poem_new.MyActivity.access$000(MyActivity.java:11)
at com.example.poem_new.MyActivity$1.onTextChanged(MyActivity.java:29)
at android.widget.TextView.sendOnTextChanged(TextView.java:8027)
at android.widget.TextView.handleTextChanged(TextView.java:8074)
at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:8454)
at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:892)
at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:352)
at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:266)
at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:443)
at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:420)
at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:29)
at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:669)
at android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:188)
at com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:149)
at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:315)
at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:85)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4945)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

R.java 文件为空：

```
 /* This stub is for using by IDE only. It is NOT the R class actually packed into APK */
public final class R {
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T09:19:25.817

您所观察到的可能是想法 12 中的设计行为：

[http://youtrack.jetbrains.com/issue/IDEA-99045](http://youtrack.jetbrains.com/issue/IDEA-99045)

> “这是 IDEA 12 的行为，它不会在 gen 文件夹中生成完整的 R.java，而是在编译期间在 IDEA 的系统目录中生成它。”

在您的情况下，请查看`~/.IntelliJIdea12\system\compiler\YOUR_PROJECT_NAME.RANDOM_STRING\.generated\aapt\YOUR_PROJECT_NAME.RANDOM_STRING\production\package\R.java`

该文件应该是最新的，并且应该包含您期望的所有 ID。

它还应该通过某种内部的 Idea 魔术连接到 Idea 的自动完成、使用搜索等功能。

空的 R.java 是正常的（尽管具有误导性，Jetbrains 打算改变这种行为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T14:09:51.390

关闭所有 intellij 窗口，重命名项目文件夹并再次打开它解决了我的问题。

更新：

Intellij 倾向于将生成的文件保存在用户文档中自己的文件夹中。所以这种情况的另一种方法是使缓存文件无效。转到文件菜单并选择无效缓存，然后intellij将重新启动并重新生成缓存和其他所需文件，一切都会好起来的！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T15:47:19.740

我遇到了同样的问题。厌倦了 Eclipse，我决定尝试一个新的 IDE。我为 Android 创建了一个新项目，并在一个新模块中创建了一个新的模块（试图让开始 Android 示例编译和运行）。当我创建一个新模块时，它创建了您期望的常用目录，包括 gen. 我复制了源文件、清单和 res 目录。遇到这个问题，IDEA 无法弄清楚 R. 是什么。我做了以下事情：

*   删除 android.R 的导入
*   删除 gen 目录

在重新出现清晰的构建生成后，该项目还可以。

Hoje 它可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-19T04:15:42.247

看起来您的布局中没有任何内容。如果您在项目中展开 res/layout 目录，请双击 main.xml 文件。只需添加一个按钮或其他东西并给它一个ID。那应该是

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T17:58:00.807

如果您的项目 java 编译器与您的 android java 编译器不同，则会出现此问题。更改项目设置并清理项目正在运行。如果问题没有解决然后转到项目属性-> android -> 选择任何 android 版本然后编译

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-12-14T20:08:27.823

在您使用“R.id”的注释中创建代码行，然后运行您的项目。

然后下次删除评论并再次运行它。

希望它会奏效

# asp.net-web-api - 配置自托管 Web api 以共享端口 80

> ID：13661173
> 
> 赞同：4
> 
> 时间：2012-12-01T16:12:36.750
> 
> 标签：asp.net-web-api

我已经编写了一个自托管的 asp.net Web-API 应用程序，它将在端口 80 上提供服务。这是对将要部署的封闭网络的限制。

该应用程序工作正常，但是在测试期间突然服务拒绝开始抛出以下错误。

```
 HTTP could not register URL http://+:80/ because TCP port 80 is being
 used by another application. 
```

事实上，我们发现 Skype 已经在该测试机器上启动并正在侦听端口 80。杀死 Skype 解决了这种情况。但是，在部署时，我们不能保证我们的应用程序本身将拥有端口 80。

因此我的问题是： **是否可以配置自托管 WebApi 以共享端口 80 上的侦听？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:56:04.020

经过一些比特挖掘后，如果您转到`%appdata%\Skype\shared.xml`并编辑`config\Lib\Connection\DisablePort80`为 1 然后重新启动 Skype，它很容易解决此问题，它将被修复:)

我无法共享 XML，但它被剥离了：

```
<config timestamp="1365161986.70" serial="11206" version="1.0">
   <Lib>
      <DisablePort80>1</DisablePort80>
   </Lib>
</config> 
```

# objective-c - 当 UISearchDisplayController 的 searchResultsTable 没有显示结果时，我可以更改 UITableViewCell 的外观吗

> ID：13661175
> 
> 赞同：0
> 
> 时间：2012-12-01T16:13:17.670
> 
> 标签：objective-c, ios, uitableview, uisearchdisplaycontroller

> **可能重复：**
> [如果 cellForRowAtIndexPath 没有调用，如何更改 UITableViewCell 外观](https://stackoverflow.com/questions/13660942/how-to-change-uitableviewcell-appearance-if-cellforrowatindexpath-is-not-calling)

我的应用程序中有一个带有搜索显示控制器的表格视图。表格视图单元格具有自定义背景颜色，由图案图像创建。问题是当我开始搜索并且没有结果时，表格视图单元格会自动创建（不调用 cellForRowAtIndexPath:)，所以我无法更改它们的外观。但我希望我所有的表格视图单元格都具有相同的背景颜色。那么，我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:32:18.553

您可以在 viewDidLoad() 中执行此操作
`self.searchDisplayController.searchResultsTableView.backgroundColor = [UIColor redColor]; // set your color for tableview here`

# c++ - Visual Studio C/C++ struct char 问题

> ID：13661182
> 
> 赞同：0
> 
> 时间：2012-12-01T16:14:09.527
> 
> 标签：c++, .net, c#-4.0, visual-c++

我正在尝试通过 dll 从 C# 接口一些 C/C++ 代码。我不是一个流利的 C/C++ 程序员，但一直使用 C#。我目前正在尝试处理这些 C/C++ 类型：

```
#ifndef struct_emxArray_char_T_1024
#define struct_emxArray_char_T_1024
struct emxArray_char_T_1024
{
    char_T data[1024];
    int32_T size[1];
};

#ifndef typedef_e_struct_T
#define typedef_e_struct_T
typedef struct
{
    emxArray_char_T_1024 value1;
    real_T value2;
    uint32_T value3;
    boolean_T value4;
} e_struct_T; 
```

它们是由第三方工具创建的。我不成功的 C/C++ 尝试初始化 value1 如下：

```
static char_T test[5] = { 'h', 'e', 'l', 'l', 'o'};

emxArray_char_T_1024 x;
x.data = test;
x.size = 5;

e_struct_T Parameters;
Parameters.value1 = x;
Parameters.value2 = 50;
Parameters.value3 = 3;
Parameters.value4 = FALSE; 
```

我想最终公开一个接受值的 C# 接口：

```
PerformCPlusPlusComputation(string value1, double value2, int value3, bool value) 
```

它在 C/C++ 中初始化 e_struct_T。任何反馈将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:17:40.830

线条

```
x.data = test;
x.size = 5; 
```

包含两个错误：第一个是您不能将一个数组分配给另一个数组，即使它们的大小相同。使用例如[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)从一个复制到另一个。

另一个错误是该`size`成员也是一个数组，您不能将单个值分配给数组。您必须分配给`x.size[0]`.

* * *

正确的行*可能*如下所示：

```
std::copy(std::begin(test), std::end(test), std::begin(x.data));
x.size[0] = sizeof(test); 
```

# assembly - 我如何阻止所有其他 ISR 请求，除了我所在的那个。

> ID：13661183
> 
> 赞同：0
> 
> 时间：2012-12-01T16:14:28.027
> 
> 标签：assembly, assemblies

...

```
 ;counter1 init
    mov al, 01110100b       
    out 063h, al

     ;counter2 init
    mov al, 10010100b       
    out 063h, al 
```

...

```
; ISR executed when count2 ends                                 
ISR_COUNT12 PROC               
            cli
              ;procedure to be protected from the other ISR interrupts

            sti

            IRET
ISR_COUNT12 ENDP 
```

每次counter12（PIC-8253）完成计数后，我都需要重新执行ISR_COUNT12。每次counter2变为0时都会调用ISR_COUNT12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:11:21.827

无法**屏蔽**软件中断..

# c# - 如何获取 SharePoint 工作流的事件/触发器？

> ID：13661184
> 
> 赞同：4
> 
> 时间：2012-12-01T16:14:27.140
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-workflow

SharePoint 工作流可以与列表关联，并配置为“在创建新项目时启动”、“在更改项目时”或“由经过身份验证的用户手动启动”。

这是我的截图：

![截屏](../Images/06ceea30c7c77c17be24792d44810235.png)

我需要一种方法来检测在每种情况下哪些导致工作流启动。我敢肯定，一定有一些变量保存了上述哪个触发了工作流的开始......

注意：我正在使用 Visual Studio 在 C# 中开发 SP2010 工作流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:42:10.047

不确定某处保存的变量，但您可以使用日期捕获/比较。

您可以使用工作流程捕获日期/时间，然后使用计算列或导出到 Excel 将其与创建日期和修改日期进行比较。

如果创建的日期和工作流中捕获的日期/时间彼此相差几秒钟，则在项目创建时触发工作流。如果它们不同但已修改且捕获的日期/时间在几秒钟内，则工作流在项目更改时触发。

如果没有日期匹配 - 那么工作流程可能是手动触发的。

干杯，

兆瓦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T06:36:37.797

创建两个工作流或使用事件接收器，并将您的代码放在 ItemAdded 函数中以用于新添加的项目，并将 ItemUpdate 用于更改。

问候，

# java - 如何使用 Java 和 OAuthRequest 在 Google Drive 中创建文件夹

> ID：13661185
> 
> 赞同：2
> 
> 时间：2012-12-01T16:14:33.500
> 
> 标签：java, oauth, google-drive-api, scribe

我想在 Google 驱动器中创建一个新文件夹，这是我的代码：

```
OAuthRequest request = new OAuthRequest(Verb.POST, "https://www.googleapis.com/drive/v2/files");

request.addBodyParameter("title", "Folder");
request.addBodyParameter("mimeType", "application/vnd.google-apps.folder");

service.signRequest(accessToken, request);

Response response = request.send(); 
```

我以这种方式得到 401 Unauthorized 。如果我取出 addBodyParameter 行，它可以工作，但会创建一个无标题文件。

我不知道出了什么问题，可能缺少一些代码行，有人知道如何解决这个问题吗？提前致谢。

**我已经修复了它：**

```
OAuthRequest request = new OAuthRequest(Verb.POST, "https://www.googleapis.com/drive/v2/files");

JSONObject res = new JSONObject();
res.put("title", "Folder");
res.put("mimeType", "application/vnd.google-apps.folder");

request.addPayload(res.toJSONString());
request.addHeader("Content-Length", ""+res.size());
request.addHeader("Content-Type", "application/json");

service.signRequest(accessToken, request);

Response response = request.send(); 
```

必须将标题和 mimeType 放在 JSONObject 中，将其作为 Payload 添加到请求中，并添加到请求的标头中，即 json 的内容长度和内容类型。现在它工作正常。

我希望它以后对其他人有所帮助。

# java - 将双精度数字放入数组中，然后从低到高排序并显示数字

> ID：13661187
> 
> 赞同：1
> 
> 时间：2012-12-01T16:14:42.537
> 
> 标签：java, sorting, double-precision

在第 24 行，我收到一个被注释掉的错误。是什么原因造成的，我该如何解决？

任何帮助深表感谢。提前谢谢。:)

```
import java.util.Scanner;

public class main {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        //initialize array
        double[] numbers = new double [10];

        //Create Scanner object
        System.out.print("Enter " + numbers.length + " values: ");

        //initialize array
        for ( int i = 0; i < numbers.length; i++){
            numbers[i] = input.nextDouble() ;
            java.util.Arrays.sort(numbers[i]); //getting an error here, thay says [The method sort(int[]) in the type Arrays is not applicable for the arguments (double)]
        //Display array numbers
        System.out.print(" " + numbers);            
        }

        //Close input
        input.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:17:28.543

您需要对整个数组而不是单个元素进行排序：

```
Arrays.sort(numbers); 
```

最好将它移到`for`-loop 之外。您可以`Arrays.toString`用来显示数组本身的内容：

```
for (int i = 0; i < numbers.length; i++) {
   numbers[i] = input.nextDouble();
}
Arrays.sort(numbers);
System.out.print(Arrays.toString(numbers)); 
```

* * *

注意：类名以大写字母开头，例如`MyMain`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T16:18:28.427

将其放在for 循环**之后：**

```
java.util.Arrays.sort(numbers); 
```

注意**numbers**不是 numbers[i]**并且**打印也需要从那个循环中出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T16:22:23.597

你犯的错误是你试图对一个数字进行排序。错误消息指出 sort 方法需要一个数组。

您的算法应首先读取所有数字，然后再进行排序。所以把你的代码改成这样：

```
...

// first read in numbers
for ( int i = 0; i < numbers.length; i++){
    numbers[i] = input.nextDouble() ;
}

// then apply sort
java.util.Arrays.sort(numbers); // numbers is an array, so it's a valid argument.

// finally, after sorting you may now output the sorted array
for(int number : numbers){
    System.out.println(number);
}

... 
```

# php - Ajax 计数器破坏了我的代码 - 为什么？

> ID：13661191
> 
> 赞同：0
> 
> 时间：2012-12-01T16:15:27.067
> 
> 标签：php, ajax

我在 Ajax 中建立了一个不起作用的小计数器。Ajax 计数器会破坏整个代码；`<script>`一旦将计数器添加到元素中 ，即使另一个不依赖计数器的函数也会停止工作。**为什么我的计数器会破解密码？**

下面是 Ajax 代码：

```
//My attempt at a counter.  This breaks the code.
var indx=0;
calcIndex(){
  return indx++;
}

function ajax2(){...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:16:41.473

代替

```
var indx=0;
calcIndex(){
  return indx++;
} 
```

和

```
var indx=0;
function calcIndex(){
  return indx++;
} 
```

# ruby - Ruby 作用域、常量优先级：词法作用域或继承树

> ID：13661193
> 
> 赞同：16
> 
> 时间：2012-12-01T16:15:47.480
> 
> 标签：ruby, nested-class, scopes

我将向您展示[ruby​​koans](http://rubykoans.com/ "红宝石")教程中的代码片段。考虑下一个代码：

```
class MyAnimals
LEGS = 2

  class Bird < Animal
    def legs_in_bird
      LEGS
    end
  end
end

def test_who_wins_with_both_nested_and_inherited_constants
  assert_equal 2, MyAnimals::Bird.new.legs_in_bird
end

# QUESTION: Which has precedence: The constant in the lexical scope,
# or the constant from the inheritance hierarchy?
# ------------------------------------------------------------------

class MyAnimals::Oyster < Animal
  def legs_in_oyster
    LEGS
  end
end

def test_who_wins_with_explicit_scoping_on_class_definition
  assert_equal 4, MyAnimals::Oyster.new.legs_in_oyster
end

# QUESTION: Now which has precedence: The constant in the lexical
# scope, or the constant from the inheritance hierarchy?  Why is it
# **different than the previous answer**? 
```

实际上问题在评论中（我用星号突出显示（尽管它打算用粗体显示））。有人可以解释一下吗？提前致谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-02T12:24:36.723

这在这里得到了回答：[Ruby: explicit scoping on a class definition](https://stackoverflow.com/questions/4627735/ruby-explicit-scoping-on-a-class-definition)。但也许不是很清楚。如果您阅读链接的文章，它将帮助您找到答案。

基本上，`Bird`在 的范围内声明，`MyAnimals`在解析常量时具有更高的优先级。`Oyster`位于`MyAnimals`命名空间中，但未在该范围内声明。

插入`p Module.nesting`每个类，向您展示封闭范围是什么。

```
class MyAnimals
  LEGS = 2

  class Bird < Animal

    p Module.nesting
    def legs_in_bird
      LEGS
    end
  end
end 
```

产量：`[AboutConstants::MyAnimals::Bird, AboutConstants::MyAnimals, AboutConstants]`

和

```
class MyAnimals::Oyster < Animal
  p Module.nesting

  def legs_in_oyster
    LEGS
  end
end 
```

产量：`[AboutConstants::MyAnimals::Oyster, AboutConstants]`

看到不同？

# java - JSF 2.0“'null Converter'的转换错误设置值'courseID'。!!如何避免这种错误？

> ID：13661196
> 
> 赞同：1
> 
> 时间：2012-12-01T16:16:14.227
> 
> 标签：java, jsf, converter

我正在使用 PrimeFaces、JPA、Hibernate 和 JSF 2.0 开发一个 Web 应用程序。

我有两个实体`Students`，并且`Course`具有多对一的关系。

```
@Entity
@Table(name = "STUDENTS")
public class Students extends MainUsers implements Serializable {

    private String firstName;
    private String lastName;
    private long mobile;
    private String jobTitle;
    private int duration;
    @Temporal(TemporalType.TIMESTAMP)
    private Date startDate;
    @Temporal(TemporalType.TIMESTAMP)
    private Date endDate;

    @ManyToOne
    @JoinColumn(name = "course_id", nullable = true)
    private Course company;

    // Getters and setters.
} 
```

```
@Entity
@Table(name = "COURSE")
@NamedQueries({
        @NamedQuery(name = "course.findCourseByCourseId", query = "select c from Course c where c.Id =:id"),
        @NamedQuery(name = "course.findCourseByCourseName", query = "select c from Course c where c.courseName =:courseName") })
public class Course implements Serializable {

    public static final String FIND_COURSE_BY_COURSE_ID = "course.findByCourseId";
    public static final String FIND_COURSE_COURSE_NAME = "course.findByCourseName";

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int Id;
    private String courseName;
    @OneToMany(targetEntity = Students.class, mappedBy = "course", fetch = FetchType.LAZY)
    private List<Students> students;

    // Getters and setters.

    @Override
    public int hashCode() {
        return getId();
    }

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof Course) {
            Course course = (Course) obj;
            return course.getId() == Id;
        }

        return false;
    }

} 
```

我有一个注册页面，其中包含学生的姓名、电子邮件、密码和课程。为了选择我使用过的课程

```
<h:outputText value="Course :" />
<p:selectOneMenu value="#{courseMB.course}">
    <f:selectItem itemLabel="Select one Course" itemValue="" />
    <f:selectItems value="#{courseMB.allCourses}" var="crs"
        itemLabel="#{crs.courseName}" itemValue="#{crs.id}" />
    <f:converter converterId = "courseConverter"/>  
</p:selectOneMenu> 
```

要创建一个学生，我在 StudentMB 类中有以下方法：

```
public void createStudent() {       
    String test = student.getEmail();

    if (getStudentFacade().isStudentExist(test)){
        System.out.println(test);
    } else {
        try {
            student.setActivation_key(hashKey());
            student.setRole(Role.STUDENT);
            student.setActive(0);
            getStudentFacade().createStudent(student);
            displayInfoMessageToUser("Created with success");
            SendEmail.Send(username, password, student.getEmail(), title, linkToSend());
            loadStudent();
            resetStudent();
        } catch (Exception e) {
            displayErrorMessageToUser("Opps, we could not create the user. Try again");
            e.printStackTrace();
        }
    }
} 
```

我真的不知道如何将课程放入 StudentMB 并将其保存到数据库中。当前的方法给了我一个错误

> 'null Converter' 的转换错误设置值'courseID'。

我尝试使用转换器，但我在参数中输入了空字符串。

```
@FacesConverter(value="courseConverter", forClass = com.model.Course.class)
public class CourseConverter implements Converter  {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        CourseFacade courseFacade = new CourseFacade();
        int courseId;

        try {
            courseId = Integer.parseInt(submittedValue);
        } catch (NumberFormatException exception) {
            throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, 
                "Type the name of a Course and select it (or use the dropdown)", 
                "Type the name of a Course and select it (or use the dropdown)"));
        }

        return courseFacade.findCourse(courseId);
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object modelValue) {
        Course course = null;
        if (modelValue instanceof Course){
            course = (Course) modelValue;
            StringBuilder asString = new StringBuilder();
            asString.append(course.getId()+"-");
            asString.append(course.getCourseName());
            return asString.toString();

        }
        return "";
    }

} 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:30:37.080

您需要将选择项值设置为`Course`自身，而不是其`id`.

代替

```
itemValue="#{crs.id}" 
```

经过

```
itemValue="#{crs}" 
```

否则转换器只会得到`#{crs.id}`as `modelValue`in`getAsString()`并因此返回一个空字符串。这个空字符串又被提交回服务器，通过服务器`getAsObject()`又导致异常。

您应该`ConverterException`在 the 的`else`部分中添加 a，`if (modelValue instanceof Course)`以便立即清楚转换器不适合给定的模型值。

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

# vb.net - 使用内联 IF 语句 vb.net

> ID：13661200
> 
> 赞同：26
> 
> 时间：2012-12-01T16:16:50.047
> 
> 标签：vb.net, if-statement

代码的简要信息如下。该代码采用一堆字符串并将它们连接起来，如下所示，中间有一个 if 语句来决定是否连接其中一个。问题是`If(Evaluation, "", "")`抱怨说它不能为空或必须是资源。当评估只是检查一个对象以确保它 IsNot Nothing 并且对象中的一个属性被检查为时，我该如何解决这个问题如下：

```
Dim R as string = stringA & " * sample text" & _
    stringB & " * sample text2" & _
    stringC & " * sameple text3" & _
    If(ApplyValue IsNot Nothing AndAlso ApplyValue.CheckedBox Then ,StringD & " * sample text4" & _
    , NOTHING)
stringE & " * sample text5" 
```

VS 抱怨 applyValue。有任何想法吗？

应该注意的是，我已经尝试了以下方法，看看它是否会起作用，而 VS 拒绝了它：

```
Dim y As Double
Dim d As String = "string1 *" & _
    "string2 *" & _
    If(y IsNot Nothing, " * sample text4", "") & _
    "string4 *" 
```

这就是它标记 y 的内容：

```
 'IsNot' requires operands that have reference types, but this operand has the value type 'Double'.    C:\Users\Skindeep\AppData\Local\Temporary Projects\WindowsApplication1\Form1.vb 13  16  WindowsApplication1 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-01T16:23:19.677

使用 IIF 三元表达式求值器

```
Dim R as string = stringA & " * sample text" & _
                  stringB & " * sample text2" & _
                  stringC & " * sameple text3" & _
                  IIf(ApplyValue IsNot Nothing AndAlso ApplyValue.CheckedBox, StringD & " * sample text4", "") & _
                  stringE & " * sample text5" 
```

编辑：如果您从 2008 版开始使用 VB.NET，您还可以使用

```
IF(expression,truepart,falsepart) 
```

这甚至更好，因为它提供了短路功能。

```
Dim R as string = stringA & " * sample text" & _
                  stringB & " * sample text2" & _
                  stringC & " * sameple text3" & _
                  If(ApplyValue IsNot Nothing AndAlso ApplyValue.CheckedBox, StringD & " * sample text4", "") & _
                  stringE & " * sample text5" 
```

# html - 导航菜单下拉菜单卡在其他元素后面

> ID：13661207
> 
> 赞同：1
> 
> 时间：2012-12-01T16:17:48.820
> 
> 标签：html, css, menu, navigation, css-float

我遇到了我认为是一个简单的问题，但我不知道如何解决它。基本上，当将鼠标悬停在菜单上的链接上时，下拉菜单“落后于”我页面上的其他元素。我试过实现 float css，但它似乎不起作用。如果您访问我的网站一秒钟并将鼠标悬停在导航菜单上，您就会明白我的意思。你如何解决这样的问题？将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:26:20.430

在您的 CSS 中，将您设置`z-index`为一个非常大的数字，例如`9005`，因此它高于页面上的所有其他内容。

喜欢：`z-index: 9005;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:27:19.247

添加`z-index:9999;`到`#page-bar`css 它解决了问题（在 chrome 中测试）

# jquery - 序列化为 json 对象

> ID：13661210
> 
> 赞同：-1
> 
> 时间：2012-12-01T16:18:03.493
> 
> 标签：jquery

我的 jQuery 有点生疏，不记得如何生成 json 对象。我试图从我的序列化方法创建下面的 json，但它没有用其他任何东西填充标签，然后是两个值？

```
function serializeObject() {
    var o = {};
    o["CompanyTemplateId"] = CompanyTemplateId;
    o["Tags"] = [];
    $("[id^=DQTag]").each(function () {
        o["Tags"].push({'TagKey': $(this).id, 'TagValue': $(this).value});
    });

    return o;
}; 
```

我希望它看起来像什么：

```
 {"CompanyTemplateId": "1",
    "Tags":[
            {"TagKey":"news1","TagValue":"This is a news item from tagValue."},{"TagKey":"news2","TagValue":"Second value"}
           ]
    } 
```

我得到的结果是：

```
 {"CompanyTemplateId":"1","Tags":[{},{}]}. 
```

标签中的对象数量是正确的，但为什么没有任何键/值对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:20:06.060

### 您在`"`这里缺少一个：

```
"TagKey":"news1","TagValue":"This is a news item from tagValue.},
Quote missing here --------------------------------------------^ 
```

* * *

### 或者你可以使用这个：

```
JSON.stringify(o, null, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:32:35.053

你不能用`$(this).id`，试试`$(this).attr('id')`。为了价值，请使用`$(this).val`或`$(this).attr('value')`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:32:43.410

所以我想出了为什么它失败了。这是因为我使用`$(this)`而不是简单地使用这个。

工作代码：

```
o["Tags"].push({'TagKey': this.id, 'TagValue': this.value}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:25:01.380

看看这个功能。它似乎做你想做的事，也在 IE9 上。

```
function() {
    var o = {};
    o["CompanyTemplateId"] = 123;
    o["Tags"] = new Array();
    $("[id^=DQTag]").each(function(i , e) {
        o["Tags"][i] = new Object(); {
            o["Tags"][i].TagKey = e.id;
            o["Tags"][i].TagValue = e.value;
        };
    });
    console.log(o.Tags.length);
    console.log(o);
    console.log(JSON.stringify(o));
    return o;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T16:32:21.067

如果您在序列化 JSON 时担心浏览器支持，可以使用提供跨浏览器支持[的 JSON2.js 库。](https://github.com/douglascrockford/JSON-js)包含它并用于`JSON.stringify`将您的对象序列化为 JSON 或`JSON.parse`将 JSON 解码为对象。

# java - 获取 swt 表中单元格的值

> ID：13661211
> 
> 赞同：0
> 
> 时间：2012-12-01T16:18:08.077
> 
> 标签：java, swt

我创建了一个包含 3 列的 swt 表，第一列是检查列。我使用了这段代码：

```
 table = new Table(container, SWT.CHECK | SWT.BORDER | SWT.V_SCROLL
            | SWT.H_SCROLL|SWT.MULTI); 
```

当我选择一个项目时，会在第三个冒号中创建一个文本。代码如下：

```
listener = new Listener() {
 @Override public void handleEvent(Event event) {
 if (event.detail == SWT.CHECK) {
 final TableItem current = (TableItem) event.item; 
if (current.getChecked()) { 
final TableEditor editor = new TableEditor(table); 
text = new Text(table, SWT.NONE);
 editor.grabHorizontal = true;
} 
```

我想获取与所选项目与第三列匹配的单元格的值，但无法使用`selectedItem.getText(2)`. 请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:20:46.617

试试这个代码示例。它将打印出 selected 的第 3 列中的文本`TableItem`：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    final Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1, true));

    Table table = new Table(shell, SWT.CHECK | SWT.MULTI);
    table.setHeaderVisible(true);
    table.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    for(int i = 0; i < 4; i++)
    {
        TableColumn column = new TableColumn(table, SWT.NONE);
        column.setText("Column " + i + "           ");
        column.pack();
    }

    for(int i = 0; i < 10; i++)
    {
        TableItem newItem = new TableItem(table, SWT.NONE);
        newItem.setText(1, "ITEM " + i + " TEXT1");
        newItem.setText(2, "ITEM " + i + " TEXT2");
        newItem.setText(3, "ITEM " + i + " TEXT3");
    }

    table.addListener(SWT.Selection, new Listener()
    {
        @Override
        public void handleEvent(Event event)
        {
            if(event.detail == SWT.CHECK)
            {
                TableItem current = (TableItem)event.item;

                if(current.getChecked())
                {
                    System.out.println(current.getText(2));
                }
            }
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

这是它的样子：

![在此处输入图像描述](../Images/b87632601e308a2896ee62187041047e.png)

# jsp - 使用 jstl 获取明天的日期

> ID：13661212
> 
> 赞同：4
> 
> 时间：2012-12-01T16:18:15.953
> 
> 标签：jsp, calendar, jstl

我尝试了以下方法在 JSTL 中获取明天的日期：

```
 <c:set var="currDate" value="<%=java.util.Calendar.getInstance()%>"/>
           <fmt:formatDate type="date" value="${currDate.add(java.util.Calendar.DATE,1)}" var="dayEnd"/> 
```

但是当我打印出来检查至少 var currDate 使用

```
 <c:out value="${currDate}" /> 
```

显然，它没有用。那我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-31T12:17:39.527

有更简洁的方法可以直接在 JSTL 中执行此操作

```
<jsp:useBean id="ourDate" class="java.util.Date"/>
<jsp:setProperty name="ourDate" property="time" value="${ourDate.time + 86400000}"/>
<fmt:formatDate value="${ourDate}" pattern="dd/MM/yyyy"/> 
```

但是，例如，当时钟更改为夏令时时，您不能依赖 java.util.Date。

因此，如果您真的想在 JSTL 中完成这一切，您可以使用 Spring 标签、Joda Time 类和 Joda 标签。

```
 <jsp:useBean id="ourDate" class="org.joda.time.DateTime"/>
    <spring:eval expression="ourDate.plusDays(1)" var="tomorrow"/>
    tomorrow: <joda:format value="${tomorrow}" style="SM" /> 
```

spring eval 标签可以让你做一些我们以前用 scriptlet 做的顽皮的事情，而且 JodaTime 总是可以给你一个准确的结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T17:11:51.750

```
<%@ page import="java.util.Date" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<c:set var="today" value="<%=new Date()%>"/>
<c:set var="tomorrow" value="<%=new Date(new Date().getTime() + 60*60*24*1000)%>"/>
Today: <fmt:formatDate type="date" value="${today}" pattern="d"/>   
Tomorrow: <fmt:formatDate type="date" value="${tomorrow}" pattern="d"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T18:53:19.183

```
<%
Calendar now=Calendar.getInstance();
Calendar today=Calendar.getInstance();
Calendar calendar=Calendar.getInstance();
today.set(today.get(Calendar.YEAR),today.get(Calendar.MONTH), today.get(Calendar.DAY_OF_MONTH));

// Convert the date string into a date to manipulate the dates
String year = (String)pageContext.getAttribute("year");
String month = (String)pageContext.getAttribute("month");
String day = (String)pageContext.getAttribute("day");
if (year == null) {
    year = String.format("%4d",now.get(Calendar.YEAR));
    int mth = now.get(Calendar.MONTH) + 1;
    month = String.format("%02d",mth);
    day = String.format("%02d",now.get(Calendar.DAY_OF_MONTH));
}

String str_date = month + "/" + day + "/" + year;
SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");
Date date = (Date)format.parse(str_date);

calendar.setTime(date);
Date [] arrayOfDates = new Date[4];
arrayOfDates[0] = calendar.getTime();

pageContext.setAttribute("calendarDate",arrayOfDates);
pageContext.setAttribute("year",year);
pageContext.setAttribute("month",month);
pageContext.setAttribute("day",day);%> 
```

# image - 调整图像弹簧mvc的大小

> ID：13661216
> 
> 赞同：1
> 
> 时间：2012-12-01T16:18:41.920
> 
> 标签：image, resize, bufferedimage

我正在尝试将输入流上传并调整其大小以缓冲图像并将图像保存到文件夹中。我可以将图像上传到文件夹，但是当图像的大小为零时。我使用 The Buzz Media 和 spring mvc。

如有任何帮助，将不胜感激。

这是我的代码：

```
public BufferedImage convertInputStremToBufferedImage(InputStream uploadedInputStream)
{

    try
    {
        BufferedImage buff=ImageIO.read(uploadedInputStream);
        buff=Scalr.resize(buff,  Scalr.Method.SPEED, Scalr.Mode.FIT_TO_WIDTH,
                150, 150, Scalr.OP_ANTIALIAS);
        String path="/Mac/myfiles/uploaded/";
        BufferedImage outPad= Scalr.pad(buff, 200);

        ImageIO.write(buff, "jpg", new File(path + ".jpg"));
        return outPad;
    }
    catch (IOException e)
    {
        e.printStackTrace();
        return null;
    }

} 
```

# php - 当我使用 curl 时，CURLOPT_NOBODY 会影响响应标头

> ID：13661223
> 
> 赞同：2
> 
> 时间：2012-12-01T16:19:50.157
> 
> 标签：php, curl, http-headers

我的问题代码

```
<?php
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, 'http://www.tudou.com/programs/view/qyT7G6gVFSs');
curl_setopt($curl, CURLOPT_HEADER, 1);
curl_setopt($curl , CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($curl);
curl_close($curl);
var_dump($data); 
```

回应是

字符串（241）“HTTP/1.1 405 方法不允许服务器：Tengine/1.4.0 日期：星期六，2012 年 12 月 1 日 15:53:32 GMT 内容类型：文本/html；charset=GBK 内容长度：1085 连接：关闭 appSrv：itemview-app4-app_admin 变化：接受编码允许：GET “

那么我的正确代码是

```
<?php
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, 'http://www.tudou.com/programs/view/qyT7G6gVFSs');
curl_setopt($curl, CURLOPT_HEADER, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($curl);
curl_close($curl);
var_dump($data); 
```

结果是字符串（313）“HTTP/1.1 302 临时移动服务器：Tengine/1.4.0 日期：星期六，2012 年 12 月 1 日 16:17:25 GMT 内容长度：0 连接：关闭 appSrv：itemview-app5-app_admin 变化: Accept-Encoding Pragma: No-Cache Cache-Control: no-cache, no-store 过期时间: Thu, 01 Jan 1970 00:00:00 GMT 地点: [http://tv.tudou.com/](http://tv.tudou.com/)

"

是的，它只是 CURLOPT_NOBODY，任何人都可以告诉我为什么？拜托！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:26:26.717

当您指定 CURLOPT_NOBODY 时，它实际上执行不同类型的请求[CURLOPT_NOBODY 是否仍然下载正文 - 使用带宽](https://stackoverflow.com/questions/3834143/does-curlopt-nobody-still-download-the-body-using-bandwidth) 看起来您正在卷曲的服务器不支持这种类型的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:28:34.607

尝试做这样的事情：

```
 //cURL set options
            //cURL options array set
            $options = array(
                CURLOPT_URL => $this->URL,              #set URL address
                CURLOPT_USERAGENT => $this->UserAgent,  #set UserAgent to get right content like a browser
                CURLOPT_RETURNTRANSFER => true,         #redirection result from output to string as curl_exec() result
                CURLOPT_COOKIEFILE => 'cookies.txt',    #set cookie to skip site ads
                CURLOPT_COOKIEJAR => 'cookiesjar.txt',  #set cookie to skip site ads
                CURLOPT_FOLLOWLOCATION => true,         #follow by header location
                CURLOPT_HEADER => true,                 #get header (not head) of site
                CURLOPT_FORBID_REUSE => true,           #close connection, connection is not pooled to reuse
                CURLOPT_FRESH_CONNECT => true,          #force the use of a new connection instead of a cached one
                CURLOPT_SSL_VERIFYPEER => false         #can get protected content SSL
            );
            //set array options to object $curl
            curl_setopt_array($curl, $options); 
```

# c++ - 为什么我不能将 QGridLayout 添加到 QMainWindow？

> ID：13661227
> 
> 赞同：2
> 
> 时间：2012-12-01T16:20:32.650
> 
> 标签：c++, linux, qt

我创建了一个`QMainWindow`类。我为主布局编写了一个代码`QGridLayout`，但是每当我添加`setLayout(grid);`这个错误时：

```
QWidget::setLayout: Attempting to set QLayout "" on MainWindow "", which already has a layout 
```

据我所知，我之前没有在我的代码中添加任何类型的布局。

我正在使用 Qt Creator 并使用 Linux (ubuntu 12.10)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T16:26:05.387

您可以做的是创建一个 QWidget 将其设置为中央小部件并给它一个布局。QMainWindow 已经有自己的布局来放置状态栏和主菜单，因此您不能直接设置另一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T16:24:34.983

[`QMainWindow`](http://doc.qt.digia.com/qt/qmainwindow.html)自带布局，不能直接设置。

您*可能*应该在中央小部件上设置布局，或者`QMainWindow`如果您不想要它的布局/功能，则可能根本不使用。

# ruby-on-rails - link_to root 显示为空

> ID：13661228
> 
> 赞同：3
> 
> 时间：2012-12-01T16:21:02.110
> 
> 标签：ruby-on-rails

在rails中使用时：

```
<h1><% link_to "Home", root_url %></h1> 
```

标签内没有任何内容。我的 routes.rb 是：

```
MyApp::Application.routes.draw do
  root :to => 'posts#index'
  resources :posts
  match "/help" => "help#index"
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T16:25:12.773

你忘记了这个`=`标志：

```
<% link_to
  ^
  |
 here 
```

# python - 使用 vpython 围绕他的中心旋转一个对象

> ID：13661230
> 
> 赞同：0
> 
> 时间：2012-12-01T16:21:20.713
> 
> 标签：python, rotation, position, frame, vpython

我正在使用 VPython 制作月球着陆器游戏。月球着陆器本身必须能够围绕自己的中心旋转，但他会围绕错误的轴和/或围绕他的原始位置旋转。当月球着陆器的位置改变时，它必须旋转的轴和位置不会改变。我不知道该怎么做。

月球着陆器是由曲线组成的，但我有一个包含月球着陆器的框架。这是代码（对不起，代码是荷兰语，希望你足够理解）：

```
from visual import *
from math import *
from random import randint
maanoppervlak = curve(pos=[(-20,-2),(-18,-5)],color=color.red)
maanoppervlak.append(pos=(-18,-5))
maanoppervlak.append(pos=(-15,-4),color=color.red)
maanoppervlak.append(pos=(-15,-4))
maanoppervlak.append(pos=(-14,-4),color=color.red)
maanoppervlak.append(pos=(-14,-4))
maanoppervlak.append(pos=(-13,-15),color=color.red)
maanoppervlak.append(pos=(-13,-15), color=color.green)
maanoppervlak.append(pos=(-7,-15),color=color.green)
maanoppervlak.append(pos=(-7,-15),color=color.red)
maanoppervlak.append(pos=(-3,4),color=color.red)
maanoppervlak.append(pos=(-3,4))
maanoppervlak.append(pos=(-1,0),color=color.red)
maanoppervlak.append(pos=(-1,0))
maanoppervlak.append(pos=(3,-2),color=color.red)
maanoppervlak.append(pos=(3,-2),color=color.green)
maanoppervlak.append(pos=(8,-2),color=color.green)
maanoppervlak.append(pos=(8,-2),color=color.red)
maanoppervlak.append(pos=(13,-8),color=color.red)
maanoppervlak.append(pos=(13,-8))
maanoppervlak.append(pos=(16,-5),color=color.red)
maanoppervlak.append(pos=(16,-5))
maanoppervlak.append(pos=(19,-12),color=color.red)
maanoppervlak.append(pos=(19,-12))
maanoppervlak.append(pos=(20,-7), color=color.red)

print scene.width

f = frame() #maken van een frame waar de maanlander in zit
f.axis = (1,0,0)
f.pos = vector(-4,-10,0)
maanlander = curve(frame=f, pos=[(1,1),(2,1),(1.5,1),(1.5,2),(2,2.5),(2,3.5),(2.75,3.5),
(2.25,4),(2.25,4.5),(2.75,5),(3.75,5),(4.25,4.5),
(4.25,4),(3.75,3.5),(4.5,3.5),(4.5,2.5),(3.5,2.5),(3.75,2),
(2.75,2),(3,2.5),(2,2.5),(4.5,2.5),(5,2),(5,1),(4.5,1),
(5.5,1)],color=color.blue)
maanlander.accel = vector(0,0) #acceleratie van de maanlander
f.accel = vector(0,0) #acceleratie van de frame (deze of die hierboven is waarschijnlijk overbodig)
f.velocity = vector(0,0) #snelheid van de frame
deltat = 0.005
state = true
while state == true: #start van de loop
    rate(100)
    f.velocity = f.velocity + maanlander.accel*deltat #bepaalt de snelheid adhv de accel.
    maanlander.pos = maanlander.pos + f.velocity*deltat #bepaalt de positie adhv de snelheid
    if scene.kb.keys: # is there an event waiting to be processed?
            s = scene.kb.getkey() # obtain keyboard information
            if s == 'left': #er wordt op linkertoets gedrukt
                f.rotate(angle=pi/15., axis=(0,0,1), origin=(f.pos + vector(2.75,2.5,0))) #object moet rond zijn middden draaien (werkt nog niet)
            elif s == 'right':
                f.rotate(angle=-pi/15., axis=(0,0,1), origin=vector(2.75,2.5,0)) #zelfde als bij left, maar in omgekeerde richting
            elif s == 'up': #'boost'
                maanlander.accel = maanlander.accel + vector(0,10) 
```

那么，如何旋转月球着陆器，以及当它的位置与原来的位置不同时呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T00:39:55.187

伊格纳西奥是说把你的月球着陆器翻译到原点（the `center`）然后旋转中心周围的一切，然后把它翻译回原来的位置。

# html - 静态网站创作和模块化

> ID：13661235
> 
> 赞同：1
> 
> 时间：2012-12-01T16:22:03.267
> 
> 标签：html, web

我一直在努力创建一个新的项目静态网站，并且想知道将页眉、页脚等重用到可以“导入”并在所有页面中重用的 HTML 基础的正确方法是什么。目前我复制了所有代码，这并不是一件好事。我认为在这个简单的用例中使用 JQuery 和动态 div 有点过头了。

我一直在工作的网站是这样的：http: [//hpsfo.bitbucket.org](http://hpsfo.bitbucket.org)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:27:11.437

您可以尝试服务器端包含（SSI）。 [http://httpd.apache.org/docs/current/howto/ssi.html](http://httpd.apache.org/docs/current/howto/ssi.html)

# php - 将 JSON 文件替换为 PHP 文件

> ID：13661238
> 
> 赞同：0
> 
> 时间：2012-12-01T16:22:09.350
> 
> 标签：php, mysql, json

嗨，我有一个脚本，它使用 JSON 从名为 locations.xml 的文件中获取信息，现在我要做的是使用一些代码从数据库中获取信息。

下面是原始 JSON 文件和 XML 结构。

```
 //Check if the locations.xml file exists, if it does encode it to JSON for the app
if (file_exists('locations.xml')) {
    $xml = simplexml_load_file('locations.xml');
    $json = json_encode($xml);
    print_r($json);
} else {
    exit('Failed to open locations.xml.');
} 

 <location>
    <title>Union Station</title>
    <address>800 North Alameda Street Los Angeles, CA 90012</address>
    <details>Los Angeles Union Station (or LAUS, formerly the Los Angeles Union Passenger Terminal or LAUPT) is the main railway station in Los Angeles, California.</details>
    <images>
    </images>
    <marker>/css/img/markers/binoculars.png</marker>
    <lat>34.05515</lat>
    <lng>-118.23525</lng>
</location> 
```

这给出了以下输出

```
 {"location":[{"title":"Hollywood Sign","address":"3204 Canyon Lake Drive, Los Angeles, CA","details":"The Hollywood Sign is a famous landmark in the Hollywood Hills area of Mount Lee, Santa Monica Mountains, in Los Angeles, California. The iconic sign spells out the name of the area in 45-foot-tall (14 m) and 350-foot-long (110 m) white letters.","images":{"image":["1_1.jpg","1_2.jpg"]},"marker":"\/css\/img\/markers\/photography.png","lat":"34.134103","lng":"-118.321694"}]} 
```

我所做的是将上面的内容更改为调用 php 代码以从 MYSQL 数据库中获取相同的信息和结构，代码与 JSON 输出一起显示在下面。

```
 $query = mysql_query("SELECT * FROM locations");
     $rows = array();
     while($row = mysql_fetch_assoc($query)) {
     $rows['location'][] = $row;
     }
     print json_encode($rows);

     {"location":[{"Title":"Hollywood Sign","Address":"3204 Canyon Lake Drive, Los Angeles, CA","details":"The Hollywood Sign is a famous landmark in the Hollywood Hills area of Mount Lee, Santa Monica Mountains, in Los Angeles, California. The iconic sign spells out the name of the area in 45-foot-tall (1","images":"","marker":"\\\/css\\\/img\\\/markers\\\/photography.png","lat":"34.134103","lng":"-118.321694"}]} 
```

正如您将看到的那样，两个输出是相同的，但是第二个没有显示信息，在我的代码中，我有以下代码似乎可以获取 JSON 数据并将其传递，

```
 //Register the Location Model
    Ext.regModel('Locations', {
    fields: locationFields //Set the fields to be stored from the config file 
```

});

```
 //Load XML data from JSON into local store
    app.stores.LocationsList = new Ext.data.Store({
    model: "Locations", //Model to use for the Store
    sorters: [{
    property: 'title', //Set the title as a sorter to the listing card can use the   grouped list layout
                direction: 'ASC'
            }],
      proxy: {
      type: 'ajax', //Load JSON from our source defined in the config file
      url: JSON_SOURCE, 
      reader: {
        type: 'json',
        root: 'location'
        },
        id  : 'Locations'
      },
      getGroupString : function(record) {
    // return the first character of the address in order to group
    return record.get('title')[0];
   },

       listeners: {
      'load': function (t, r, s) {
        //Fire custom event once all the load is complete
         Ext.dispatch({
            controller: app.controllers.map,
            action: 'loaded',
            records: r
            });
          },
        },
      autoLoad : true //We start loading the info into the datastore immediately after the app is started to make it available ASAP

           }); 
```

我已经通过这最后一段代码十几次，但不明白为什么它会以不同的方式处理第二批信息？

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:28:15.053

解决了我在表格字段中添加了一个大写的第一个字母，一旦我改变了上面的代码就可以完美地工作。

# mysql - 在位于文件夹树中的 MySQL 中运行多个 SQL 文件

> ID：13661239
> 
> 赞同：2
> 
> 时间：2012-12-01T16:22:22.500
> 
> 标签：mysql, bash

我有一个包含多个 SQL 文件的文件夹结构。

我想知道如何从 shell 中大量使用 MySQL 运行所有源文件。我使用 Ubuntu。

欢迎任何建议。谢谢。

```
sql
    admin
        adm_a.sql
        adm_b.sql
        adm_c.sql
    user
        usr_new.sql
        usr_upd.sql
    operator
        opr_ctrl.sql
        opr_migrate.sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:13:01.083

**谢谢大家的回复，我终于可以得到：**

```
for i in `find . -name "*.sql"`; 
do mysql -e "source `expr ${i:2}`" -u MyUser -pMyPassword MyDataBase; 
done 
```

我希望这会为某人服务。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:35:55.513

您需要进行研究以获取适用于您的 shell 类型的确切命令，但在高级别上，您需要在脚本中执行以下操作：

```
connect to mysql (with username/password)
for subfolder in `sql`:
    sql_files = list(*.sql)
    for sql_file in sql_files:
        pipe sql_file to mysql db 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:40:49.273

不是确切的命令，但这样的东西会起作用

```
for directory in admin user operator
do
  for sql_file in directory/*.sql
  do
     mysql db_name < sql_file.sql
  done
done 
```

# java - 如何在运行时编译代码

> ID：13661243
> 
> 赞同：1
> 
> 时间：2012-12-01T16:22:53.593
> 
> 标签：java, android, compilation, runtime

我想使用一些视图 ID，并且我想要一个循环来遍历所有视图。这就是我的意思：

```
for (int i = 0;i<10;i++) {
    TextView tv = (TextView) findViewById(R.id.txt+i);
} 
```

当然这是错误的，但可以说我在布局 10 中`TextViews`：

```
txt0

txt1

txt2

.

.

.

txt9 
```

我希望循环执行如下操作：

```
TextView tv = (TextView) findViewById(R.id.txt0);
TextView tv = (TextView) findViewById(R.id.txt1);
.
.
.
TextView tv = (TextView) findViewById(R.id.txt+9); 
```

可能吗？？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:31:54.660

您可以通过名称找到 ID，如下所示：

```
for(int i=0;i<10;i++){
     int id = getResources().getIdentifier("txt" + i, "id", context.getPackageName());
     TextView tv = findViewById(id);
     // but what here?
} 
```

但是，这只会分配一个 textview 10 次。这之后你在做什么？我看不出这有什么用，但也许您可以在此基础上进行构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:27:57.977

而是试试这个

```
TextView tv = new TextView(context); 
```

并将标签设置为for循环索引并通过标签访问它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T16:30:20.507

尝试这个：

```
TextView[] tv=new TextView[10];
for (int i = 0;i<10;i++) {
    tv[i] = (TextView) findViewById(R.id.txt+i);
 tv[i].setId(1000+i);

} 
```

当你想使用文本视图时。使用电视[1] ...等

# jmeter - BSF 预处理器相关文件名

> ID：13661246
> 
> 赞同：1
> 
> 时间：2012-12-01T16:23:16.297
> 
> 标签：jmeter

我需要在 JMeter的[BFS Prepocessor中有脚本相对文件名（相对于测试计划文件）。](http://jmeter.apache.org/usermanual/component_reference.html#BSF_PreProcessor)我需要类似：“../scripts/commonscript.js”的东西，但这不起作用，我必须使用整个路径，这对版本控制非常不利。
是否有一些变量/属性/函数，所以我可以使用相对于测试计划文件的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:08:11.877

查看 BSFSampler 代码，FileName 是相对于 /bin 的。

所以去它的方法：

1.  添加一个名为 scriptDir 的用户定义变量，其值为 ${__P(scriptDir, dfltvalue)}

2.  在你的路径中使用它作为 ${scriptDir}/

3.  在启动时使用 -JscriptDir= 定义此变量

# intellij-idea - 如何在 Win7 上将 Intellij IDEA 12 作为 64 位进程运行？

> ID：13661251
> 
> 赞同：5
> 
> 时间：2012-12-01T16:23:43.667
> 
> 标签：intellij-idea

有没有人试过这个？我这里有一个问题。我已经看过这篇文章[http://devnet.jetbrains.net/docs/DOC-1185](http://devnet.jetbrains.net/docs/DOC-1185)并按照它所说的做了。但似乎它在我的电脑上不起作用。这是系统变量和Java版本。

系统变量： ![在此处输入图像描述](../Images/275cf5ea490b303e93356507d13df8e1.png)

爪哇版： ![在此处输入图像描述](../Images/9adbdd50468046a25547e6f0bced9bd2.png)

当我点击“idea64.exe”时，出现错误：

![在此处输入图像描述](../Images/e5e51910b4ed6ee542205c3ce45b8857.png)

您可以在第一张图片中看到“IDEA_JDK”。早就定好了是吧？即使我添加了“IDEA_JDK_64”，仍然会发生同样的错误。

最后，我尝试了“idea.bat”来查看异常详细信息：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Bad version n
umber in .class file
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:12
4)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) 
```

似乎是由于 IDEA 和操作系统之间的 Java 版本不一致。我应该将 JDK 更新到 1.6 或更高版本吗？如果我想继续使用 1.5，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T16:43:32.397

似乎 IDEA 的最新稳定 (11.1) 版本需要 JDK 1.6 或更高版本，如此处所[定义](http://www.jetbrains.com/idea/download/system_requirements.jsp?os=win)。您正在尝试运行更新的版本，因此 IMO 运行 1.5 的可能性很小。

# magento - 在 Magento 的类别中随机列出产品

> ID：13661252
> 
> 赞同：0
> 
> 时间：2012-12-01T16:23:51.213
> 
> 标签：magento

我想在每个会话的基础上对 Magento 社区版中我的类别中列出的产品进行随机化 - 给人一种“新鲜”的错觉或我的类别发生变化，而不是每次都使用相同的陈旧列表。

我的意思是我希望用户在访问网站上的一个类别时看到不同的产品顺序，但在每个会话的基础上。因此，假设用户第一次访问类别 A，用户将看到一个随机排序的属于该类别的产品列表。现在，当他们去访问另一个类别时，比如类别 B，然后返回类别 A，列表将与之前查看的一样，而不是随机的。因此，每个类别的每个会话仅发生一次随机化。现在，当用户在几个小时后回来时，在新的会话下，随机化将再次启动。

这可能吗？如果是这样，任何帮助或指导将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:05:39.897

是的，这是可能的，但是当您尝试应用过滤器时会遇到问题（例如按价格从低到高排序等）

我认为更好的方法是按日期随机化，这样每个人都会在给定的一天获得相同的产品订单。

下面是我用来在标签页面上显示特定类别的随机产品的伪代码示例。（你可以改变`$seed`来完成你想要的）

```
public function _getProductCollection()
{

    if(is_null($this->_productCollection)) {
        $category = Mage::getModel('catalog/category')->load($this->getCategoryId());

        $seed = $this->getCategoryId() . date("W");

        $this->_productCollection = Mage::getResourceModel('catalog/product_collection');
        Mage::getModel('catalog/layer')->prepareProductCollection($this->_productCollection);
        $this->_productCollection->getSelect()->order("rand($seed)");
        $this->_productCollection->addStoreFilter();
        $this->_productCollection->addCategoryFilter($category);

        Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($this->_productCollection);
        Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($this->_productCollection);
    }

    return $this->_productCollection;
} 
```

# heroku - 使用 Vulcan 在 Heroku 上构建 cmake 作为 Taglib 的依赖项

> ID：13661253
> 
> 赞同：1
> 
> 时间：2012-12-01T16:24:08.930
> 
> 标签：heroku, cmake, taglib, buildpack, taglib-ruby

我正在尝试让[Taglib](http://taglib.github.com/)在 Heroku 上工作，所以我可以使用[taglib-ruby gem](http://robinst.github.com/taglib-ruby/)。我一直在与 Vulcan 和 Custom Heroku Buildpack 进行斗争以使其正常工作。Taglib 的依赖项之一是 cmake，所以我一直在尝试首先让它工作。

Github 上有一个问题，它描述了如何使用 Vulcan 构建 cmake：[Issue #32](https://github.com/heroku/vulcan/issues/32)，但我一直从我的构建服务器得到相同的响应：

```
---------------------------------------------
CMake 2.8.10.2, Copyright 2000-2012 Kitware, Inc.
Found GNU toolchain
C compiler on this system is: gcc 
C++ compiler on this system is: g++ 
---------------------------------------------
Error when bootstrapping CMake:
Cannot find appropriate Makefile processor on this system.
Please specify one using environment variable MAKE.
---------------------------------------------
Log of errors: /app/cmake-2.8.10.2/Bootstrap.cmk/cmake_bootstrap.log
--------------------------------------------- 
```

我认为一旦 cmake 工作，构建 Taglib 应该是相当直接的。

我也关注了 Ryan Daigle 关于如何使用 Vulcan 构建二进制应用程序依赖项的帖子。我已经为 Vulcan 服务器建立了一个远程 shell 并运行了：

```
bin/make "5382f498-fd89-4c1a-9269-e05815294f40" 
```

…其中“5382f498-fd89-4c1a-9269-e05815294f40”是 Vulcan 在 cmake 构建错误时返回的 id，但我收到与上述相同的错误 - 不走运。

任何人都可以提供任何关于我应该设置 MAKE 环境变量以使其正常工作的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:03:30.463

尝试 `bin/vulcan-make "5382f498-fd89-4c1a-9269-e05815294f40"`

# c# - 使用 C# 在 SQL Server Express 中输入新数据行

> ID：13661257
> 
> 赞同：0
> 
> 时间：2012-12-01T16:24:53.163
> 
> 标签：c#, sql, visual-studio-2010

我很确定我在这里只是愚蠢，但是哦，好吧。

我的代码是：

```
private void btnInsert_Click(object sender, EventArgs e)
{
        SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\LiftLog.mdf;Integrated Security=True;User Instance=True");
        conn.Open();

        SqlCommand cmdInsert = conn.CreateCommand();
        cmdInsert.CommandText = "INSERT INTO tblLog (Date, Time, Floor) VALUES (1011, 0011, 3)";
        cmdInsert.ExecuteNonQuery();
} 
```

它正在连接到表，因为如果我没有将数据放入非空字段，它会抱怨。但是，当我单击按钮时，表格不会更新。

为什么？

这可以检索数据：

```
 System.Data.SqlClient.SqlConnection con;
    System.Data.SqlClient.SqlDataAdapter da;
    DataSet ds1;

    // Connects to database.
    private void Form1_Load(object sender, EventArgs e)
    {
        con = new System.Data.SqlClient.SqlConnection();
        ds1 = new DataSet();
        con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\LiftLog.mdf;Integrated Security=True;User Instance=True";
        con.Open();
        string sql = "SELECT * From tblLog";
        da = new System.Data.SqlClient.SqlDataAdapter(sql, con);
        da.Fill(ds1, "LogOutput");
        NavigateRecords();
        con.Close(); 
     } 
```

由于 SSMS 对我不起作用，是否可以以某种方式修改它以插入？

另外，我知道清理输入等，我将其全部剥离以尝试查明问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:32:02.650

这整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将围绕`.mdf`文件进行复制（复制到在 Visual Studio 中运行应用程序的项目的输出目录），并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件（在项目的输出目录中） - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`LiftLog`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=LiftLog;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

另外，请注意：我**强烈建议**始终使用参数化查询来 a) 避免 SQL 注入攻击，b) 显着提高 SQL Server 的性能。

所以而不是：

```
cmdInsert.CommandText = "INSERT INTO tblLog (Date, Time, Floor) 
                         VALUES (1011, 0011, 3)"; 
```

你应该使用

```
cmdInsert.CommandText = "INSERT INTO tblLog (Date, Time, Floor) 
                         VALUES (@Date, @Time, @Floor)"; 
```

然后`@Date, @Time, @Floor`在您的对象上定义这些参数 ( )`SqlCommand`并以这种方式填写它们的值。

# jquery - 使用 Ember.js 和 jQuery 预加载页面资源

> ID：13661258
> 
> 赞同：2
> 
> 时间：2012-12-01T16:24:54.310
> 
> 标签：jquery, ember.js

好的，所以我有一个页面，其中包含一些加载时看起来很棒的高分辨率图像（但当用户在初始页面下载时看到半加载的图像时就不那么好了）。我研究了 jquery 预加载图像（例如这里非常[有用的 Q/A](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)），但问题是，我的页面基本上是由 Ember.js 控制的应用程序——所以我不确定在哪里最好插入图像预加载代码，我似乎找不到任何关于在页面完成加载之前运行的 Ember.js 代码的文档（准备好的功能可能为时已晚，因为它在页面完成后运行，所以无法预加载图像，对吧？）

底线：如果我有 Ember.js，放置图像预加载代码的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:58:21.430

没关系，您可以随时使用 javascript 预加载图像。

但是您需要考虑带宽消耗以及某些浏览器中可能的并行下载插槽限制，因此我建议不要在您的应用程序和 UI 完成之前预加载许多大图像。

这是一个最小的代码示例：

```
(new Image).src = 'preload.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:59:33.583

基本上你想写一个需要在 Emberjs 应用程序类/对象之前运行的函数。因此，您可以在创建或初始化 Application 对象之前运行该函数。我建议你在创建 Application 对象之前这样做。

# wso2 - WSO2 IdentityServer 行级安全性

> ID：13661259
> 
> 赞同：1
> 
> 时间：2012-12-01T16:25:01.020
> 
> 标签：wso2, wso2is

有人使用 WSO2 Identity Server 来实现行级安全吗？在这种情况下，政策的表现会如何？如果我将有超过 1,000,000 个策略来定义具体数据行的安全行为，那会是瓶颈吗？行级安全性和 WSO2 身份服务器是否存在任何模式？

# android - 带有 ADK 的 Eclipse 看不到 listview.smoothScrollToPosition

> ID：13661261
> 
> 赞同：1
> 
> 时间：2012-12-01T16:25:08.327
> 
> 标签：android, eclipse, listview, intellisense

intellisense 不显示 smoothScrollToPosition，当我将其放入时，我收到一条错误消息，指出“ListView 类型的方法 smoothScrollToPosition(int) 未定义”。

这是我的实现：

```
public void onItemClick(AdapterView<?> adapterView, View view, int index, long id) {
    debug("item "+index+" clicked");
    listView.smoothScrollToPosition(index);
} 
```

我通过 Eclipse 中的 SDK Manager 安装了 API 8 和 16，我的目标是 API 8-16。

为了解决这个问题，我创建了一种手动滚动列表的方法，但它也不起作用。这些数字都是正确的，但列表仅在 i 的最后一次迭代中移动。

[更新功能]

```
private void animateItem(View view, int targetY, int duration) throws Exception{

    int sleepTime = duration/10;
    int position = listView.getPositionForView(view);
    int viewTop = view.getTop();
    debug("animating item "+position+" from "+view.getTop()+" to "+targetY+" for "+duration+" millis");;
    for (int i=1; i<=10; i++){
        int y = (viewTop-targetY)/2;
        debug("... animation progress - top:"+viewTop+"   distance:"+(viewTop-targetY)+"     y:"+y);

        listView.setSelectionFromTop(position, y);
        viewTop -= y;
        Thread.sleep(sleepTime);
    }
} 
```

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:42:43.120

很抱歉进行了这样的改进，但在您的项目 -> 首选项 -> Android 中选择了 Android API 8 或更高版本？

# javascript - jQuery 的附加在 getJSON 回调之外不起作用

> ID：13661265
> 
> 赞同：4
> 
> 时间：2012-12-01T16:25:26.753
> 
> 标签：javascript, jquery, function, append

我正在整合我所有的 JSON 调用。我从这个调用中取出所有内容`$.getJSON`并验证我的页面仍然有效，但是当我取出附加和列表视图时，内容永远不会出现。

这有效：

```
 $.getJSON("data/rides.json",
        function(data){
          $('#myRideList').append( rideList.join(' ') );
          $('#myRideList').listview('refresh');
      }); 
```

但这不是：

```
 //  $.getJSON("data/rides.json",
  //    function(data){
          $('#myRideList').append( rideList.join(' ') );
          $('#myRideList').listview('refresh');
 //     }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T16:26:29.917

您可能在 DOM 准备好之前运行代码。

该`getJSON`版本将异步运行，让 DOM 有机会加载。

第二个版本将立即运行。

您可以将代码放入[`.ready()`](http://api.jquery.com/ready/)处理程序中以确保 DOM 已准备好。

```
$(function() {
  //  $.getJSON("data/rides.json",
  //    function(data){
          $('#myRideList').append( rideList.join(' ') );
          $('#myRideList').listview('refresh');
 //     });
}); 
```

我上面使用的语法是一个快捷方式：

```
$(document).ready(function() {
    // ...
}); 
```

* * *

最简单的解决方案往往是最好的。正如[@TJCrowder 所](https://stackoverflow.com/users/157247/t-j-crowder)指出的，将脚本放在页面底部*（或至少在页面上所需元素之后的某个位置）的经过*验证的真实技术很简单，不需要任何幕后技巧。

```
<body>
   <!-- your HTML markup -->

   <script type="text/javascript" src="http://example.com/my/script.js"></script>
</body> 
```

# java - Java - 替换 JFrame 中的组件

> ID：13661266
> 
> 赞同：4
> 
> 时间：2012-12-01T16:25:31.770
> 
> 标签：java, swing

我正在努力使用 java GUI - 提前感谢您的任何帮助！我有一个 JFrame，其中有几个组件：触发动作侦听器的**按钮 (Jbutton)**，**comp**它是一个组件我试图用其中的组件替换**JScrollPane**（不管是什么类型的组件，可以是文本字段，桌子或任何东西）。

我想触发一个动作 - 删除组件，将一个新组件放在与已删除组件相同的位置并重新绘制窗口（我使用它来显示不同类型的文本字段和 JTable）。这就是我所拥有的：

```
JScrollPane sp = new JScrollPane(comp);
this.add(sp, BorderLayout.CENTER);
//this works so far - first time I display this is ok!

private void replace() {
 comp = new Component(...); //name and type of the components is not important
 sp = new JSCrollPane(comp);
 this.remove(sp); //remove old component
 add(sp, BorderLayout.CENTER);
 repaint();
 revalidate();
} 
```

为什么功能不能代替工作？它没有做任何事情（它在逻辑上改变了组件，所以如果我访问 comp 的内容，它会被刷新但它仍然显示旧的）。

我写的有点象征性，因为我的代码很长......感谢您的帮助！编辑：在我的代码中忘记了一行..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T16:30:16.133

您不必像以前那样尝试删除滚动窗格。

要更改滚动窗格显示的组件，只需进行以下调用：

```
sp.setViewportView(new Component(...)); 
```

在该调用之后，旧组件将从视图中移除并由新组件替换。

所以你的代码应该看起来像这样：

```
JScrollPane sp = new JScrollPane(comp);
this.add(sp, BorderLayout.CENTER);

private void replace() {
    comp = new Component(...); //name and type of the components is not important
    sp.setViewportView(comp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T16:33:08.000

从代码的外观来看，您添加的第一个滚动窗格 (this.add) 与您删除的滚动窗格 (this.remove) 不同。测试从 remove 返回的布尔值，看看它是否真的被删除了。我想你会发现它不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T16:33:19.617

[这个板上](http://www.coderanch.com/t/340488/GUI/java/Adding-removing-components-JPanel)有一个解决方案：

```
jpanel.remove(component); //remove component from your jpanel in this case i used jpanel 
jpanel.revalidate(); 
jframe.repaint();//repaint a JFrame jframe in this case 

to add: 
jpanel.add(component); //add component to jpanel in this case i used jpanel 
jpanel.revalidate(); 
jframe.repaint();//repaint a JFrame jframe in this case 
```

看看这是否适合你。自己没试过。。。

# c# - WindowProc 什么时候调用？

> ID：13661267
> 
> 赞同：1
> 
> 时间：2012-12-01T16:25:36.543
> 
> 标签：c#, windows, pinvoke

在我使用 P/Invoke 的 C# 程序中，我更改了窗口的过程地址。所以我可以对我感兴趣的 Windows 消息做出反应。

但是系统何时调用该过程？我有我在我的自定义过程和我的其余代码中操作的列表。系统如何决定何时可以或不能调用该过程，以及数据是否有可能被破坏？

例如

我在我的过程中将条目添加到列表中。

我通读了列表并处理了代码另一部分中的条目。

在我设法清除列表之前，该过程会接管并添加更多条目。

返回到我的代码的另一部分，列表被清除，新条目被丢弃而不被处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:34:19.170

您可能不应该使用 p/invoke 来执行此操作，因为它会干扰 Windows 窗体（或 WPF）管理消息泵的方式。

如果必须，您可以尝试以下方法： [在 Windows 消息上设置 Hook](https://stackoverflow.com/questions/9665579/setting-up-hook-on-windows-messages)

或者您可以在主窗体类中覆盖 WndProc，无需进一步解释。

# php - PHP通过ID而不是名称更新MySQL

> ID：13661269
> 
> 赞同：0
> 
> 时间：2012-12-01T16:25:43.797
> 
> 标签：php, mysql, sql-update, wysiwyg

PHP 使用表单中的名称来更新 MySQL 数据库中的记录，我想使用以下方式更新`id`它`name`：

```
<form action="myfile.php" method="post">
    <input type="text" name="nametextbox" id="username"/>
    <input type="text" name="emailtextbox" id="email"/>
    <input type="submit" name="button" id="update"/>
</form> 
```

`myfile.php`>>（如果我使用了这个名字）

```
if (isset($_POST['button'])){
    $title=$_POST['nametextbox'];
    $body=$_POST['emailtextbox'];
    mysql_connect("x", "y", "z")or die (mysql_error());
    mysql_select_db('c')or die (mysql_error());
    mysql_query("UPDATE table_name SET title='$title', body='$body' WHERE `id`='$_GET[update]'");
    mysql_close();
    header("location:mawdoo3.php");
} 
```

我如何使用`id`而不是`name`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:28:27.667

你不能（至少在没有 JavaScript 的情况下不能）。这与 PHP 无关，它只是 HTML 表单标准 ..`name`属性是发送到服务器的值的键。 `id`永远不会被发送，您对此无能为力。

# c++ - 关于 C++ 中的 typeid 函数

> ID：13661272
> 
> 赞同：0
> 
> 时间：2012-12-01T16:26:06.673
> 
> 标签：c++

> **可能重复：**
> [typeid() 在 g++ 中返回额外字符](https://stackoverflow.com/questions/789402/typeid-returns-extra-characters-in-g)

我从 [cplusplus.com](http://www.cplusplus.com/reference/typeinfo/type_info/)了解到***typeid***函数可以在 C++ 中获取变量的类型信息。但结果在我的机器上有点奇怪。

例如：

```
#include <iostream>
#include <typeinfo>
#include <vector>
using namespace std;

class Test
{
};
int main()
{
    vector<int> v;
    vector<vector<int> > v2;
    Test t;
    cout<<"typeid for class Test: "<<typeid(t).name()<<endl;
    cout<<"typeid for vector<int>: "<<typeid(v).name()<<endl;
    cout<<"typeid for vector<vector<<int> >: "<<typeid(v2).name()<<endl;
    return 0;
} 
```

运行此代码后，我的机器中的输出为：

```
typeid for class Test: 4Test
typeid for vector<int>: St6vectorIiSaIiEE
typeid for vector<vector<<int> >: St6vectorIS_IiSaIiEESaIS1_EE 
```

我对“测试”类之前的“4”和向量周围的奇怪字母感到很困惑。谁能给我一些解释？谢谢！

我的操作系统是 Fefora 17, g++ (GCC) 4.7.0 20120507 (Red Hat 4.7.0-5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:36:44.503

`typeid function can get variable's type infomation in C++`

的确如此，但是当您调用该`type_info::name()`函数时，您会为每种不同的类型获得一个**唯一的**名称，但标准并不能保证该名称具有一定的意义。而且它也依赖于实现。

您在实践中得到的（至少对于大多数/所有实现而言）是该类型的*[错位](http://en.wikipedia.org/wiki/Name_mangling)*名称。

简而言之，您`type_info::name()`只能用于比较或调试（您必须自己对名称进行解密才能获得有意义的东西）

**编辑** 由于您使用 gcc，您可能需要查看此页面： http: [//gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)

# c++ - 在 C++ 中迭代一个向量

> ID：13661277
> 
> 赞同：-2
> 
> 时间：2012-12-01T16:26:35.640
> 
> 标签：c++

我有一个向量：

```
std::vector<std::pair<int, long> > v;
v.push_back(std::make_pair(1, 2L));
etc... 
```

我如何遍历它并从中取出 int 和 long 元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T16:29:21.577

使用 C++03：

```
for (std::vector<std::pair<int, long> >::iterator i = v.begin(); i != v.end(); ++i)
{
    std::cout << "int: " << i->first << " long: " << i->second << std::endl;
} 
```

使用 C++11：

```
for (std::pair<int, long> p : v) // could also do auto p, auto& p, or (const) std::pair<int, long>& p
{
    std::cout << "int: " << p.first << " long: " << p.second << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:24:52.023

简短的回答是：“通过强烈的偏好，使用算法”。真正的问题是您将如何处理这些项目。要使用@cornstalks 的示例，如果您想将它们打印出来，您可以执行以下操作：

```
typedef std::pair<int, long> v_t;

std::vector<v_t> v;

std::ostream &operator<<(std::ostream &os, v_t const &p) { 
    return os << p.first << "\t" << p.second;
}

std::copy(v.begin(), v.end(), std::ostream_iterator<v_t>(std::cout, "\n")); 
```

让我们试试别的。也许你想把这些项目加在一起——即，得到一个`pair<int, long>`，其中每个项目都是数组中相应项目的总和：

```
std::accumulate(v.begin(), v.end(), std::make_pair(0,0L), 
               [](v_t const &a, v_t const &b) { 
                    return std::make_pair(a.first+b.first, a.second+b.second); 
               }); 
```

请注意，在这种情况下，我假设一个（合理的）最近的 C++ 编译器。这`[](params){statement;}`部分是一个“lambda”——基本上是一个函数对象的就地定义。它在 2011 年标准中被正式添加到 C++ 中，但在 2011 年之前已经足够了解，以至于自 2009 年左右以来的大多数编译器都实现了它们（例如，Visual Studio 2010 和至少回到 4.7 的 gcc 都这样做）。

# c++ - 使用 Microsoft 编译器生成 CMOV 指令

> ID：13661285
> 
> 赞同：7
> 
> 时间：2012-12-01T16:27:27.353
> 
> 标签：c++, visual-c++, assembly, x86, disassembly

为了在运行 windows 7 pro 的 intel core 2 上勉强获得一些 cmov 指令，我编写了下面的代码。它所做的只是从控制台获取一个字符串作为输入，应用一些移位操作来生成一个随机种子，然后将该种子传递给 srand，以生成一个小的伪随机数数组。然后评估伪随机数是否满足谓词函数（更任意的位混洗），并输出“*”或“_”。实验的目的是生成 cmov 指令，但正如你在下面的反汇编中看到的那样，没有。

有关如何更改代码或 cflags 以便生成它们的任何提示？

```
#include <iostream>
#include <algorithm>
#include <string>
#include <cstdlib>

bool blackBoxPredicate( const unsigned int& ubref ) {
   return ((ubref << 6) ^ (ubref >> 2) ^ (~ubref << 2)) % 15 == 0;
}

int main() {
   const unsigned int NUM_RINTS = 32;
   unsigned int randomSeed = 1;
   unsigned int popCount = 0;
   unsigned int * rintArray = new unsigned int[NUM_RINTS];
   std::string userString;

   std::cout << "input a string to use as a random seed: ";
   std::cin >> userString;

   std::for_each( 
      userString.begin(), 
      userString.end(), 
      [&randomSeed] (char c) {
         randomSeed = (randomSeed * c) ^ (randomSeed << (c % 7));
   });

   std::cout << "seed computed: " << randomSeed << std::endl;

   srand(randomSeed);

   for( int i = 0; i < NUM_RINTS; ++i ) {
      rintArray[i] = static_cast<unsigned int> (rand());
      bool pr = blackBoxPredicate(rintArray[i]);
      popCount = (pr) ? (popCount+1) : (popCount);

      std::cout << ((pr) ? ('*') : ('_')) << " ";
   }

   std::cout << std::endl;

   delete rintArray;
   return 0;
} 
```

并使用这个makefile来构建它：

```
OUT=cmov_test.exe
ASM_OUT=cmov_test.asm
OBJ_OUT=cmov_test.obj
SRC=cmov_test.cpp
THIS=makefile

CXXFLAGS=/nologo /EHsc /arch:SSE2 /Ox /W3

$(OUT): $(SRC) $(THIS)
   cl $(SRC) $(CXXFLAGS) /FAscu /Fo$(OBJ_OUT) /Fa$(ASM_OUT) /Fe$(OUT)

clean:
   erase $(OUT) $(ASM_OUT) $(OBJ_OUT) 
```

然而，当我去查看是否已生成任何内容时，我看到微软的编译器为最后一个 for 循环生成了以下程序集：

```
; 34   :       popCount = (pr) ? (popCount+1) : (popCount);
; 35   :       
; 36   :       std::cout << ((pr) ? ('*') : ('_')) << " ";

  00145 68 00 00 00 00   push    OFFSET $SG30347
  0014a 85 d2        test    edx, edx
  0014c 0f 94 c0     sete    al
  0014f f6 d8        neg     al
  00151 1a c0        sbb     al, al
  00153 24 cb        and     al, -53            ; ffffffcbH
  00155 04 5f        add     al, 95         ; 0000005fH
  00157 0f b6 d0     movzx   edx, al
  0015a 52       push    edx
  0015b 68 00 00 00 00   push    OFFSET ?cout@std@@3V?$basic_ostream@DU?$char_traits@D@std@@@1@A ; std::cout
  00160 e8 00 00 00 00   call    ??$?6U?$char_traits@D@std@@@std@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@0@AAV10@D@Z ; std::operator<<<std::char_traits<char> >
  00165 83 c4 08     add     esp, 8
  00168 50       push    eax
  00169 e8 00 00 00 00   call    ??$?6U?$char_traits@D@std@@@std@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@0@AAV10@PBD@Z ; std::operator<<<std::char_traits<char> >
  0016e 46       inc     esi
  0016f 83 c4 08     add     esp, 8
  00172 83 fe 20     cmp     esi, 32            ; 00000020H
  00175 72 a9        jb  SHORT $LL3@main 
```

供您参考，这是我的 cpu id 字符串和编译器版本。

```
PROCESSOR_ARCHITECTURE=x86
PROCESSOR_IDENTIFIER=x86 Family 6 Model 58 Stepping 9, GenuineIntel
PROCESSOR_LEVEL=6
PROCESSOR_REVISION=3a09

Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.40219.01 for 80x86 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-12-14T14:13:59.483

**要让 Microsoft 的 32 位 C/C++ 编译器发出指令，即使不是完全不可能，也是*极其困难的。*`CMOVcc`**

您必须记住的是，条件移动最初是在 Pentium Pro 处理器中引入的，虽然 Microsoft 有一个编译器开关可以*调整*这个第 6 代处理器（长期弃用的[`/G6`](https://msdn.microsoft.com/en-us/library/h66s5s0e(v=vs.71).aspx)）生成的代码，但它们从来没有发出可以运行的代码*仅*在此处理器上。代码仍然需要在第 5 代处理器（*即*Pentium 和 AMD K6）上运行，因此它不能使用`CMOVcc`指令，因为这些指令会产生非法指令异常。与 Intel 的编译器不同，全局动态调度没有（现在仍然没有）实现。

此外，值得注意的是，从未引入过*专门针对*第 6 代处理器及更高版本的交换机。没有`/arch:CMOV`或他们可能称之为。[`/arch`开关](https://msdn.microsoft.com/en-us/library/7t5yh4fd.aspx)的支持值直接从`IA32`（最低公分母，`CMOV`可能是非法的）到`SSE`. 但是，[文档](https://msdn.microsoft.com/en-us/library/7t5yh4fd.aspx) *确实*确认，正如人们所期望的那样，启用 SSE 或 SSE2 代码生成隐式地启用了条件移动指令以及在SSE*之前引入的任何其他指令的使用：*

> 除了使用 SSE 和 SSE2 指令外，编译器还使用支持 SSE 和 SSE2 的处理器修订版中存在的其他指令。一个例子是 CMOV 指令首先出现在 Intel 处理器的 Pentium Pro 版本上。

因此，为了让编译器发出`CMOV`指令，您必须设置`/arch:SSE`或更高。现在，当然，这没什么大不了的。您可以简单地设置`/arch:SSE`or`/arch:SSE2`并确保安全，因为所有现代处理器都支持这些指令集。

但这只是战斗的一半。即使您启用了正确的编译器开关，也很难让 MSVC 发出`CMOV`指令。以下是两个重要的观察结果：

1.  **MSVC 10 (Visual Studio 2010) 及更早版本几乎*从不*生成`CMOV`指令。**无论我尝试了多少源代码变体，我都*从未在输出中看到它们。*我说“实际上”是因为我可能错过了一些疯狂的边缘情况，但我非常怀疑。没有任何优化标志对此有任何影响。

    **但是，MSVC 11 (Visual Studio 2012)**至少在这方面对代码生成器进行了重大改进。这个和更高版本的编译器现在似乎至少*知道*`CMOVcc`指令的存在，并且*可以*在正确的条件下发出它们（*即*，`/arch:SSE`或更高版本，并使用条件运算符，如下所述）。

2.  我发现**哄骗编译器发出`CMOV`指令的最有效方法是使用*条件运算符***而不是长格式`if`-`else`语句。尽管就代码生成器而言，这两个结构应该是完全等价的，但它们不是。

    换句话说，虽然您*可能会*看到以下转换为无分支`CMOVLE`指令：

    ```
    int value = (a < b) ? a : b; 
    ```

    您将*始终*获得以下序列的分支代码：

    ```
    int value;
    if (a < b)    value = a;
    else          value = b; 
    ```

    至少，即使您使用条件运算符不会导致`CMOV`指令（例如在 MSVC 10 或更早版本上），您可能仍然有幸通过其他方式获得无分支代码——例如，`SETcc`或巧妙地使用`SBB`和`NEG`/// `NOT`。这就是您在问题中显示的反汇编所使用的，虽然它不如 最佳，但它肯定是*可比*的，差异不值得担心。（唯一的其他分支指令是循环的一部分。）`INC``DEC``CMOVcc`

 ** * *

如果您真的想要无分支代码（[手动优化时经常这样做](https://stackoverflow.com/questions/40991778/an-expensive-jump-with-gcc-5-4-0/40993519#40993519)），并且您没有任何运气让编译器生成您想要的代码，那么您需要更加聪明地编写源代码. 我很幸运地编写了使用按位或算术运算符无分支地计算结果的代码。

例如，您可能希望以下函数生成最佳代码：

```
int Minimum(int a, int b)
{
    return (a < b) ? a : b;
} 
```

您遵循规则 #2 并使用了条件运算符，但如果您使用的是旧版本的编译器，无论如何您都会得到分支代码。使用经典技巧智取编译器：

```
int Minimum_Optimized(int a, int b)
{
    return (b + ((a - b) & -(a < b)));
} 
```

生成的目标代码不是完全最优的（它包含一条`CMP`多余的指令，因为`SUB`已经设置了标志），但它是无分支的，因此仍然比对导致分支预测失败的随机输入的原始尝试快得多。

再举一个例子，假设您想确定一个 64 位整数在 32 位应用程序中是否为负数。您编写以下不言而喻的代码：

```
bool IsNegative(int64_t value)
{
    return (value < 0);
} 
```

并且会发现自己对结果非常失望。GCC 和 Clang 明智地优化了这一点，但 MSVC 吐出了一个讨厌的条件分支。（不可移植的）技巧是意识到符号位在高 32 位中，因此您可以使用按位操作显式地隔离和测试：

```
bool IsNegative_Optimized(int64_t value)
{
    return (static_cast<int32_t>((value & 0xFFFFFFFF00000000ULL) >> 32) < 0);
} 
```

此外，其中一位评论员建议使用内联汇编。虽然这是可能的（Microsoft 的 32 位编译器支持内联汇编），[但它通常是一个糟糕的选择](https://stackoverflow.com/a/35959859/366904)。内联汇编以相当大的方式破坏了优化器，因此除非您在内联汇编中编写*大量*代码，否则不太可能获得实质性的净性能提升。此外，Microsoft 的内联汇编语法极为有限。它在很大程度上以灵活性换取了简单性。特别是，没有办法指定*输入*值，因此您被困在将输入从内存加载到寄存器中，并且调用者被迫将输入从寄存器溢出到内存以进行准备。这产生了一种我喜欢称之为“a whole lotta shufflin' goin' on”的现象，或者简称为“慢代码”。在可以接受慢代码的情况下，您不会使用内联汇编。因此，最好（至少在 MSVC 上）弄清楚如何编写 C/C++ 源代码来说服编译器发出您想要的目标代码。即使您只能*接近*理想的输出，这仍然比使用内联汇编所付出的代价要好得多。

* * *

请注意，如果您以 x86-64 为目标，则不需要这些扭曲。**Microsoft 的 64 位 C/C++ 编译器`CMOVcc`在尽可能使用指令**方面更加激进，即使是旧版本也是如此。正如[这篇博文所解释](https://blogs.msdn.microsoft.com/vcblog/2009/11/02/visual-c-code-generation-in-visual-studio-2010/)的，与 Visual Studio 2010 捆绑的 x64 编译器包含许多代码质量改进，包括更好地识别和使用`CMOV`指令。

这里不需要特殊的编译器标志或其他注意事项，因为*所有*支持 64 位模式的处理器都支持条件移动。我想这就是为什么他们能够正确地使用 64 位编译器。我还怀疑在VS 2010中对x86-64编译器所做的一些更改被移植到VS 2012中的x86-32编译器，解释了为什么它至少知道存在`CMOV`，但它仍然不使用它与 64 位编译器一样积极。

底线是，在针对 x86-64 时，以最有意义的方式编写代码。优化器实际上知道如何完成它的工作！*

# android - Android：Ints.tryParse 总是返回“null”，即使字符串中有一个数字

> ID：13661289
> 
> 赞同：2
> 
> 时间：2012-12-01T16:27:58.813
> 
> 标签：android, tryparse

我用谷歌搜索了我的问题，并在 stackoverflow 上搜索了解决方案，但我找不到解决问题的方法。我正在尝试实现一个函数来检查 ANDROID_ID 是否已保存在 Apps 数据库中，或者是否没有。如果设备的 ANDROID_ID 为空，它会创建一个随机 UUID，然后将其保存在数据库中。我的问题是，每次我尝试使用“Ints.tryParse”解析字符串中的数字时，它都会返回 null，然后应用程序崩溃。我已经在两个 Galaxy S2 上试用过该应用程序。它在其中一个上崩溃，但在另一个上工作（一个使用 Android 4.1.2 CyanogenMod，一个使用 Stock 4.0）。它也会在模拟器中崩溃。顺便说一句，我将 Google Guava 库用于“Ints.tryParse”。

这是代码：

```
 UUID uuid;
    int finalresult = 0;
    String android_id = Secure.getString(getContentResolver(), Secure.ANDROID_ID);
    Log.v(TAG, "Android ID: " + android_id);
    String androidid = CharMatcher.DIGIT.retainFrom(android_id);
    Log.v(TAG, "Int0: " + androidid);
    Integer on2 = Ints.tryParse(androidid);
    if(on2 != null) {
        if(DEBUG_STATUS == 1) {
            Log.v(TAG, "Integer is: " + Integer.toString(on2));
        }
        int times = 3;
        finalresult = on2*times;
        if(DEBUG_STATUS == 1) {
            Log.v(TAG, "Result: " + Integer.toString(finalresult));
            Log.v(TAG, "Device ID: " + android_id + Integer.toString(finalresult));
        }
    }
    else
    {   
        uuid = UUID.randomUUID();
        String uuuid = CharMatcher.DIGIT.retainFrom(uuid.toString());
        Integer randomuuid = Ints.tryParse(uuuid);

        if(randomuuid == null) {
            Log.v(TAG, "Was null again...");
        }
        if(DEBUG_STATUS == 1) {
            Log.v(TAG, "Integer null!");
            Log.v(TAG, uuuid);
            Log.v(TAG, "UUID: " + randomuuid.toString());
        }
        int times = 3;
        finalresult = randomuuid.intValue()*times;
    } 
```

这是模拟器（Android 2.3.3）中的 LogCat：

```
> 12-01 16:14:22.505: V/******(410): Android ID: ea58466ebe002707 

> 12-01 16:14:51.845:V/******(410): Int0: 58466002707

> 12-01 16:14:51.865: V/******(410): Was null again...

> 12-01 16:14:51.875: V/******(410): Integer null!

> 12-01 16:14:51.875: V/******(410): 801094028350597

> 12-01 16:14:51.925: E/AndroidRuntime(410): FATAL EXCEPTION: main
> 12-01 16:14:51.925: E/AndroidRuntime(410): java.lang.RuntimeException:Unable to start activity ComponentInfo{*****/******}:
> .lang.NullPointerException 12-01 16:14:51.925:
> E/AndroidRuntime(410):    at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> android.app.ActivityThread.access$1500(ActivityThread.java:117) 12-01
> 16:14:51.925: E/AndroidRuntime(410):  at
> android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> android.os.Handler.dispatchMessage(Handler.java:99) 12-01
> 16:14:51.925: E/AndroidRuntime(410):  at
> android.os.Looper.loop(Looper.java:123) 12-01 16:14:51.925:
> E/AndroidRuntime(410):    at
> android.app.ActivityThread.main(ActivityThread.java:3683) 12-01
>  16:14:51.925: E/AndroidRuntime(410):     at
> java.lang.reflect.Method.invokeNative(Native Method) 12-01
> 16:14:51.925: E/AndroidRuntime(410):  at
> java.lang.reflect.Method.invoke(Method.java:507) 12-01 16:14:51.925:
> E/AndroidRuntime(410):    at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 12-01
> 16:14:51.925: E/AndroidRuntime(410):  at
> dalvik.system.NativeStart.main(Native Method) 12-01 16:14:51.925:
> E/AndroidRuntime(410): Caused by: java.lang.NullPointerException 12-01
> 16:14:51.925: E/AndroidRuntime(410):  at
> com.actionbarsherlock.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:526)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> com.actionbarsherlock.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:452)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> com.actionbarsherlock.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:438)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
> 12-01 16:14:51.925: E/AndroidRuntime(410):    ... 11 more 
```

老实说，我不知道可能出了什么问题...如您所见，字符串不是空的，它实际上显示了设备中的 ANDROID_ID。

如果您需要更多信息，请告诉我您需要什么，然后我将编辑该帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:56:34.937

使用`Long`( `Long.parseLong()`) 代替`Integer`，因为`Integer.MAX_VALUE`= 2 147 483 647，但您的`android_id`是 58 466 002 707，并且`UUID`是 801 094 028 350 597。 `Long.MAX_VALUE`是 9 223 372 036 854 775 807。

# r - 在 ggplot2 中使用 scale_colour_gradient(low="red", high="blue") 创建对称色阶

> ID：13661294
> 
> 赞同：6
> 
> 时间：2012-12-01T16:28:20.047
> 
> 标签：r, ggplot2

```
scale_colour_gradient(low="red", high="blue") 
```

生成一个看起来主要是红色的颜色渐变。我预计`red-violet-blue`中间有紫罗兰，但我得到了`red-still_red-violet-blue`

![red-still_red-violet-blue](../Images/81b02cccef4c270416b4a58f2d71434b.png)

如何获得以紫色为中心的渐变？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T16:52:41.620

```
scale_colour_gradientn(colours=c("red","violet","blue")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T16:56:01.160

```
library(ggplot2)

dsub <- subset(diamonds, x > 5 & x < 6 & y > 5 & y < 6)
dsub$diff <- with(dsub, sqrt(abs(x-y))* sign(x-y))
(d <- qplot(x, y, data=dsub, colour=diff))

max_val <- max(abs(dsub$diff))
values <- seq(-max_val, max_val, length = 3)

d + scale_colour_gradientn(colours=c("red","violet","blue"),
                           values = values, rescaler = function(x, ...) x, oob = identity) 
```

正如评论中所说，使用 scale_colour_gradient2 更简单

```
 d + scale_colour_gradient2(low='red',mid='violet',high='blue') 
```

![在此处输入图像描述](../Images/af27d8b4259aac6863dc2a639a75986e.png)

# php - 为每个在父母之后的孩子排序数组

> ID：13661298
> 
> 赞同：1
> 
> 时间：2012-12-01T16:29:15.320
> 
> 标签：php, arrays, sorting, parent-child

我有一个这样的数组：

```
<?php
array(
    array(
        'id' => 1,
        'parent_id' => null
    ),
    array(
        'id' => 2,
        'parent_id' => 1
    ),
    array(
        'id' => 3,
        'parent_id' => null
    ),
    array(
        'id' => 4,
        'parent_id' => 2
    )
) 
```

我需要在它的直系父母之后对每个孩子进行分类。因此，ID 4 项目应该紧跟在 ID 2 之后。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:30:53.327

此工作解决方案适用于[array_multisort()](http://php.net/array_multisort)。

尝试：

```
$data = array(
    array(
        'id' => 1,
        'parent_id' => null
    ),
    array(
        'id' => 2,
        'parent_id' => 1
    ),
    array(
        'id' => 3,
        'parent_id' => null
    ),
    array(
        'id' => 4,
        'parent_id' => 2
    )
);

$parent_ids = array();
foreach ($data as $item) {
    $parent_ids[]  = $item['parent_id'];
}

array_multisort($parent_ids, SORT_ASC, $data); 
```

如果您希望`null`值位于末尾，请将其替换`foreach`为：

```
foreach ($data as $item) {
    if (is_null($item['parent_id'])) {
        $item['parent_id'] = PHP_INT_SIZE;
    }
    $parent_ids[]  = $item['parent_id'];
} 
```

查看结果：`print_r($data);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:37:58.747

**工作解决方案**：PHP 有用户定义的排序函数[uasort](http://php.net/manual/en/function.uasort.php)我用它来对你的数组进行排序。

```
<?php
$data = array(
    array(
        'id' => 1,
        'parent_id' => null
    ),
    array(
        'id' => 2,
        'parent_id' => 1
    ),
    array(
        'id' => 3,
        'parent_id' => null
    ),
    array(
        'id' => 4,
        'parent_id' => 2
    )
);

function cmp($a, $b) {    
    if ($a['parent_id'] == $b['parent_id']) {
        return 0;
    }
    return ($a['parent_id'] < $b['parent_id']) ? -1 : 1;
}

uasort($data, 'cmp');
echo '<pre>';
print_r($data);
echo '</pre>'; 
```

# powershell - Windows Powershell：调用“帮助”或其他无法识别的功能时出现错误消息

> ID：13661306
> 
> 赞同：2
> 
> 时间：2012-12-01T16:30:10.783
> 
> 标签：powershell, cmdlet

尝试执行某些功能时，我在 Powershell 中收到以下错误。例如，输入“帮助目录”会导致：

```
PS C:\Users\Admin> help dir
The term "more.com" is not recognized as a cmdlet ...
At line: 14 char: 22
*    $input: | more.com <<<< 
```

我之前尝试使用“| more”，只能假设它以某种方式附加了此错误消息，但我不知道如何摆脱它。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:55:57.677

我将 C:\Windows\System32 （由于某种原因返回）添加到 PATH 环境变量中，重新启动，然后 BOOM，返回它以赢得它。

不知道为什么它失踪了，但确实如此。

# .htaccess - .htaccess 重定向问题，仅适用于首次加载网页

> ID：13661308
> 
> 赞同：1
> 
> 时间：2012-12-01T16:30:16.747
> 
> 标签：.htaccess, redirect

我正在使用 .htaccess 为我的旧页面/目录应用 301 重定向。

然而，奇怪的是，似乎只在第一次加载页面时重定向。

示例步骤：

1.  我将“/page1.html”重定向到“http://www.test.com/page/1/”
2.  我上传了包含所有链接的新 .htaccess 文件。
3.  我通过浏览器访问了“page1.html”，它运行良好！
4.  我为“page1.html”重新输入了相同的 URL，然后按 Enter，但它现在重定向到错误的 URL。很奇怪！
5.  我重新上传了 .htaccess，没有任何变化，我重新输入了相同的 URL，然后再次工作。
6.  再次进入，然后再次失败。

很奇怪的人对吧？你有解决这个问题的方法吗？或者也许可以解释为什么它的行为非常奇怪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T08:42:52.663

将此标记为已解决。原来这只是浏览器的缓存问题。为避免这种新手错误，请通过隐身窗口或在我们浏览器的内置功能的隐私浏览中测试您的 htaccess 重定向。或者，您可以在每次测试时清除缓存。:-)

# android - Android 后退按钮代码从未执行

> ID：13661312
> 
> 赞同：0
> 
> 时间：2012-12-01T16:30:28.913
> 
> 标签：android

我的活动中有以下代码。我为所有这些方法设置了断点。当我按下菜单按钮时，它会输入 onKeyDown 和 onKeyUp。当我按下后退按钮时，应用程序关闭，手机返回主屏幕，没有通过我的任何断点。

编辑：这应该可以根据大多数来源工作：

```
@Override
public void onBackPressed() {
    SwitchToMenuState();
} 
```

然而，事实并非如此。我已经尝试了以下代码块的所有排列，但它们都没有被调用：

```
@Override
public void finish()
{
    SwitchToMenuState();
}   

public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        SwitchToMenuState();
    }
    return true;
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        SwitchToMenuState();
    }
    return true;
} 
```

我正在使用 Android 2.3 和 Processing，尽管它似乎与 Processing 无关。Eclipse 告诉我我正在覆盖 android.app.Activity.onBackPressed。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:31:09.597

您只需要 onKeyDown

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        //Your code here

            return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

我认为这是因为您没有返回超级部分。这对我有用，你不需要 onbackpressed 或 onkeyup 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:10:59.847

在 android 1.x 中使用 onKeyDown 在 android 2.x 中使用 onBackPressed

并且只使用其中一个，而不是两者

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T16:46:21.623

当您按下返回时，如果在此活动之前没有活动，您的应用程序将关闭。您可以开始使用： startActivity(intent);

# iphone - 如何在目标中的 UIImage 上添加球形滤镜效果（鱼眼） - iPhone SDK 中的 C

> ID：13661319
> 
> 赞同：0
> 
> 时间：2012-12-01T16:31:49.147
> 
> 标签：iphone, objective-c, ios, image-processing

> **可能重复：**
> [气泡效果中的 iOS 图像](https://stackoverflow.com/questions/11614162/ios-images-in-a-bubble-effect)

我想在 iphone App 中的 UIImage 上添加鱼眼滤镜效果。在谷歌搜索上，我得到了像球形图像效果和晕影图像效果的效果。我已经完成了晕影效果，但无法实现球形图像效果。任何人都可以建议如何实现这一点。

谢谢

# java - Java中的舍入问题

> ID：13661323
> 
> 赞同：1
> 
> 时间：2012-12-01T16:32:03.303
> 
> 标签：java

我正在尝试使用 Cramer 的规则做一个快速的 2 vars 方程求解器，但由于某种原因，java 一直在四舍五入我的答案，所以我没有得到正确的答案。

获得单一答案的基本规则是

```
((a11*a22)-(a12*a21))!=0) 
```

解决方案应该是

```
double sol1 = (b1*a22-b2*a12) / (a11*a22-a12*a21);
double sol2 = (b2*a11-b1*a21) / (a11*a22-a12*a21); 
```

但由于某种原因，对于 1、2、3、4、5、6，我得到 -4.0 和 4.0 而不是 -4.0 和 4.5

如果有帮助，那就是有问题的代码：

```
if (((a11*a22)-(a12*a21))!=0) {
   double sol1 = (b1*a22-b2*a12) / (a11*a22-a12*a21);
   double sol2 = (b2*a11-b1*a21) / (a11*a22-a12*a21);
   System.out.println("Single solution: ("+sol1+", "+sol2 +")");
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:38:10.193

注意演员表**加倍**......

```
if (((a11*a22)-(a12*a21))!=0) {
   double sol1 = (double)(b1*a22-b2*a12) / (a11*a22-a12*a21);
   double sol2 = (double)(b2*a11-b1*a21) / (a11*a22-a12*a21);
   System.out.println("Single solution: ("+sol1+", "+sol2 +")");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T16:35:32.613

在操作之前将任何变量显式转换为双精度：

```
 double sol1 = ((double)b1*a22-b2*a12) / (a11*a22-a12*a21);
   double sol2 = (b2*a11-b1*a21) / ((double)a11*a22-a12*a21); 
```

或者只是将您的数字之一乘以 1.0 以使它们成为十进制：

```
 double sol1 = (1.0*(b1*a22-b2*a12)) / (a11*a22-a12*a21);
   double sol2 = (b2*a11-b1*a21) / (1.0*(a11*a22-a12*a21)); 
```

这是必需的，因为目前它正在执行操作`int`并导致`int`分配给`double`.

一旦您将分子或任何参与变量乘以 1.0 或将其显式转换为 double，它就会变为 double，**然后剩余的变量会自动提升为 double，从而产生`double`**所需的**结果。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T16:38:49.363

这可能是因为操作数是整数。

当您在整数之间执行运算时，结果是另一个整数（这就是它被“四舍五入”的原因）。在您的情况下，执行操作后将结果转换为双精度（因此整数结果转换为双精度）。您需要做的是在双精度之间执行操作，因此结果是双精度。这可以通过简单地将除法中涉及的变量之一的类型更改为双精度（例如 b1、a22、a11、b2 或 a12）来完成：其他变量将自动提升为双精度。

示例代码：

```
double b1 = /* whatever */;
// ..
if (((a11*a22)-(a12*a21))!=0) {
    double sol1 = (b1*a22-b2*a12) / (a11*a22-a12*a21);
    double sol2 = (b2*a11-b1*a21) / (a11*a22-a12*a21);
    System.out.println("Single solution: ("+sol1+", "+sol2 +")");
} 
```

或者，如果您不希望变量的类型为 double，则可以只转换分子或分母（或两者，但不会有任何区别）：

```
if (((a11*a22)-(a12*a21))!=0) {
    double sol1 = (double)(b1*a22-b2*a12) / (a11*a22-a12*a21);
    double sol2 = (b2*a11-b1*a21) / (double)(a11*a22-a12*a21);
    System.out.println("Single solution: ("+sol1+", "+sol2 +")");
} 
```

此外，如果计算分子（或分母）所涉及的任何变量为双精度，则整个分子将“转换”为双精度，因此除法的结果为双精度（因为分子或分母中至少有一个是双精度）。但是，如果你有这样的代码：

```
if (((a11*a22)-(a12*a21))!=0) {
    double sol1 = (double)someOtherIntVariable + (b1*a22-b2*a12) / (a11*a22-a12*a21);
    //...
} 
```

它不起作用，因为除法是在 int 变量之间执行的，然后添加了一个 double 变量。这将与您现在遇到相同的问题

# c++ - 函数可以命名为默认值吗？

> ID：13661328
> 
> 赞同：2
> 
> 时间：2012-12-01T16:32:29.203
> 
> 标签：c++, visual-studio-2012, c++11, keyword

我在 Visual Studio 2012 中创建了一个函数来检查一个项目是否是默认项目并去调用它`default()`。但是，我注意到当我完成并等待几秒钟后，名称不再加粗，并且没有显示 Intellisense 错误。很感兴趣，我试了一下：

```
void default(){}

int main() {
    default();
} 
```

此代码适用于具有常规编译器和 2012 年 11 月 CTP 编译器的 Visual Studio 2012，但不能在 GCC 4.7.2 或[http://llvm.org/demo](http://llvm.org/demo)上编译。我意识到这`default`用于开关和`= default`某些班级成员。VS2012不支持后者，但它显然支持前者，如果我将函数名更改为`delete`, `nullptr`, or `switch`, or确实会报错`case`。

在 GCC 上，我得到了这个：

> 错误：“默认”之前的预期 unqualified-id
> 在函数“int main()”中：
> 错误：case 标签不在 switch 语句中
> 错误：预期的“：”在“（”标记
> 之前）错误：预期的主表达式在“）”标记之前

Clang给了我这个：

> 错误：预期的不合格 ID
> void default(){}
> ........^

我现在显然正在更改它的名称，但是 VS 接受这个是错误的，或者它是否可能随着语言的添加而特别`= default`改变`= delete`？如果 VS 不支持，这就是程序出错的原因，我可以理解它为什么接受它。

我在规范中发现了这一点（C++11 § 6.1/2）：

> 案例标签和默认标签应仅出现在 switch 语句中。

由于它没有被用作标签，后面有冒号，我想可以说它是允许的，但是为什么要`case`编译呢？我猜有一些更具体的函数名称，但我找不到它。

您是否允许命名函数`default()`，C++03 和 C++11 之间的规则是否不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:36:13.330

`default`标识符保留用作关键字：

> 表 4 中显示的标识符保留用作关键字（即，它们在阶段 7 中被无条件地视为关键字），但在*属性标记中除外*

表 4 ^(†</sup> 在所有其他关键字中包含`default`. VC++ 错误地接受*属性标记*`default`之外的标识符，并且函数名不是*属性标记*..)

 **^(†</sup> 是 C++11 中的表 4，但 C++98 和 03 中的表 3。尽管如此，它们都包含`default`.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T16:33:28.800

这不被允许。您不能在函数或变量的声明中使用任何 C++ 关键字。没有例外。此规则在所有 C++ 标准中都是相同的。**

# javascript - 在drawImage下绘制描边

> ID：13661330
> 
> 赞同：1
> 
> 时间：2012-12-01T16:32:32.230
> 
> 标签：javascript, html, canvas

我正在尝试使用 HTML5 和 Javascript 创建一个着色书应用程序。我正在尝试将动态 png 图像加载到画布上并在下面绘制笔触。但它似乎不起作用......

我也尝试过使用分层画布，但它似乎也不起作用。有没有办法在图像下分层描边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:03:02.057

如果您的 png 图像具有透明区域（应该在其中绘制用户笔划），您可以尝试：

1.  首先在画布上绘制整个图像。
2.  正常处理用户笔划（检测 mousedown、mousemove 等），但跟踪“修改区域”（即第一次和最后一次单击之间的矩形）
3.  当每个笔画完成时，再次绘制刚刚改变的画布区域（前一个矩形），这样用户的笔画将保持可见，并抛出 png 图像的透明区域。

这样，用户可以在用户的​​笔划（填充颜色）上绘制但保留原始 png 图像（例如铅笔画）。

编辑：一个更好的主意可能是使用两个画布/图层：第一个（上图）将具有原始 png 图像（具有透明区域）。当用户点击那里时，您可以在第二个画布（如下）中绘制笔画，因此您的 png 将一直结束，而无需在每个笔画上重新绘制额外的工作。此外，它还可以轻松实现“擦除”工具。

当然，在保存到磁盘、下载打印之前，您需要合并两个画布。

# web-services - 组织休息完整的网络服务输出

> ID：13661333
> 
> 赞同：2
> 
> 时间：2012-12-01T16:32:40.513
> 
> 标签：web-services, rest, jersey

我正在写 resfull web service vai Jersey。以 json 格式返回数据。Web服务有2个方法，第一个返回用户对象，第二个用户对象的ArrayList；这是我的用户类

```
public class User {
    private int id;
    private String firstName;
    private String surName;
    private String address;
    private int status
    } 
```

问题是我想在第一种方法中返回只有 id、firtName 和 surName 的用户，输出示例：`{"id":"1","firstName":"William","surName":"Dodgson"}` 和带有 id 的 UserList，在第二种方法中返回地址，输出示例： `[{"id":"1","address":"some address"}, {"id":"2","address":"some address"}]`

我应该如何管理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:40:22.743

我不知道球衣。但是你可以用继承来划分那个类。首先创建一个基本用户类：

```
public class User {
    private int id;
    private String firstName;
    private String surName;
} 
```

和扩展类

```
public class UserMoreInfo extends User {

    private String address;
    private int status
    } 
```

最后，在每种方法中，您都可以返回不同的对象。

# .net - C#中的运算符重载和Linq Sum

> ID：13661335
> 
> 赞同：12
> 
> 时间：2012-12-01T16:32:43.493
> 
> 标签：.net, linq, c#-4.0, operator-overloading

我有一个自定义类型 ( `Money`)，它具有到十进制的隐式转换和`+`. 当我有这些类型的列表并调用 linq`Sum`方法时，结果是十进制的，而不是`Money`. 我怎样才能让`+`运营商主持并从`Sum`?

```
internal class Test
{
    void Example()
    {
        var list = new[] { new Money(10, "GBP"), new Money(20, "GBP") };
        //this line fails to compile as there is not implicit 
        //conversion from decimal to money
        Money result = list.Sum(x => x);
    }
}

public class Money
{
    private Currency _currency;
    private string _iso3LetterCode;

    public decimal? Amount { get; set; }
    public Currency Currency
    {
        get {  return _currency; }
        set
        {
            _iso3LetterCode = value.Iso3LetterCode; 
            _currency = value; 
        }
    }

    public Money(decimal? amount, string iso3LetterCurrencyCode)
    {
        Amount = amount;
        Currency = Currency.FromIso3LetterCode(iso3LetterCurrencyCode);
    }

    public static Money operator +(Money c1, Money c2)
    {
        if (c1.Currency != c2.Currency)
            throw new ArgumentException(string.Format("Cannot add mixed currencies {0} differs from {1}",
                                                      c1.Currency, c2.Currency));
        var value = c1.Amount + c2.Amount;
        return new Money(value, c1.Currency);
    }

    public static implicit operator decimal?(Money money)
    {
        return money.Amount;
    }

    public static implicit operator decimal(Money money)
    {
        return money.Amount ?? 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T16:40:17.210

`Sum`只知道`System`.

你可以`Aggregate`这样使用：

```
Money result = list.Aggregate((x,y) => x + y); 
```

因为这是调用`Aggregate<Money>`，它会使用你的`Money.operator+`并返回一个`Money`对象。

# scala - 如何编写与数据库无关的 Play 应用程序并执行首次数据库初始化？

> ID：13661339
> 
> 赞同：62
> 
> 时间：2012-12-01T16:33:16.750
> 
> 标签：scala, playframework-2.0, slick

我正在使用带有[Play Framework 2.1 的](https://www.playframework.com/)[Slick](http://slick.typesafe.com/) ，但遇到了一些麻烦。

给定以下实体...

```
package models

import scala.slick.driver.PostgresDriver.simple._

case class Account(id: Option[Long], email: String, password: String)

object Accounts extends Table[Account]("account") {
  def id = column[Long]("id", O.PrimaryKey, O.AutoInc)
  def email = column[String]("email")
  def password = column[String]("password")
  def * = id.? ~ email ~ password <> (Account, Account.unapply _)
} 
```

...我必须为*特定*的数据库驱动程序导入一个包，但我想在**生产中使用****H2**进行**测试**和**PostgreSQL**。我应该如何进行？

 ***我可以通过覆盖*单元测试中的驱动程序设置来解决此问题：

```
package test

import org.specs2.mutable._

import play.api.test._
import play.api.test.Helpers._

import scala.slick.driver.H2Driver.simple._
import Database.threadLocalSession

import models.{Accounts, Account}

class AccountSpec extends Specification {

  "An Account" should {
    "be creatable" in {
      Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver") withSession {
        Accounts.ddl.create                                                                                                                                          
        Accounts.insert(Account(None, "user@gmail.com", "Password"))
        val account = for (account <- Accounts) yield account
        account.first.id.get mustEqual 1
      }
    }
  }
} 
```

我不喜欢这个解决方案，我想知道是否有一种优雅的方式来编写与 DB 无关的代码，因此使用了两种不同的数据库引擎——一个用于测试，另一个用于生产？

我也不想使用进化，更喜欢让 Slick 为我创建数据库表：

```
import play.api.Application
import play.api.GlobalSettings
import play.api.Play.current
import play.api.db.DB

import scala.slick.driver.PostgresDriver.simple._
import Database.threadLocalSession

import models.Accounts

object Global extends GlobalSettings {

  override def onStart(app: Application) {
    lazy val database = Database.forDataSource(DB.getDataSource())

    database withSession {
      Accounts.ddl.create
    }
  }
} 
```

我第一次启动应用程序时，一切正常……当然，第二次启动应用程序时它崩溃了，因为表已经存在于 PostgreSQL 数据库中。

也就是说，我的最后两个问题是：

1.  如何确定数据库表是否已经存在？
2.  如何使上述`onStart`方法与 DB 无关，以便我可以使用 测试我的应用程序`FakeApplication`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-02T02:31:42.160

您可以在此处找到有关如何使用 cake 模式/依赖注入将 Slick 驱动程序与数据库访问层分离的示例：[https](https://github.com/slick/slick-examples) ://github.com/slick/slick-examples 。

## 如何将 Slick 驱动程序和测试应用程序与 FakeApplication 解耦

前几天我写了一个 Slick 集成库供 play 使用，将驱动依赖移动到 Play 项目的 application.conf 中：[https](https://github.com/danieldietrich/slick-integration) ://github.com/danieldietrich/slick-integration 。

在这个库的帮助下，您的示例将按如下方式实现：

**1) 将依赖项添加到 project/Build.scala**

```
"net.danieldietrich" %% "slick-integration" % "1.0-SNAPSHOT" 
```

添加快照存储库

```
resolvers += "Daniel's Repository" at "http://danieldietrich.net/repository/snapshots" 
```

或本地存储库，如果 slick-integration 在本地发布

```
resolvers += Resolver.mavenLocal 
```

**2) 将 Slick 驱动程序添加到 conf/application.conf**

```
slick.default.driver=scala.slick.driver.H2Driver 
```

**3) 实现 app/models/Account.scala**

在 slick-integration 的情况下，假设您使用自动递增的 Long 类型的主键。pk 名称是“id”。Table/Mapper 实现具有默认方法（delete、findAll、findById、insert、update）。您的实体必须实现“插入”方法所需的“withId”。

```
package models

import scala.slick.integration._

case class Account(id: Option[Long], email: String, password: String)
    extends Entity[Account] {
  // currently needed by Mapper.create to set the auto generated id
  def withId(id: Long): Account = copy(id = Some(id))
}

// use cake pattern to 'inject' the Slick driver
trait AccountComponent extends _Component { self: Profile =>

  import profile.simple._

  object Accounts extends Mapper[Account]("account") {
    // def id is defined in Mapper
    def email = column[String]("email")
    def password = column[String]("password")
    def * = id.? ~ email ~ password <> (Account, Account.unapply _)
  }

} 
```

**4) 实现 app/models/DAL.scala**

这是控制器用来访问数据库的数据访问层 (DAL)。事务由相应组件中的表/映射器实现处理。

```
package models

import scala.slick.integration.PlayProfile
import scala.slick.integration._DAL
import scala.slick.lifted.DDL

import play.api.Play.current

class DAL(dbName: String) extends _DAL with AccountComponent
    /* with FooBarBazComponent */ with PlayProfile {

  // trait Profile implementation
  val profile = loadProfile(dbName)
  def db = dbProvider(dbName)

  // _DAL.ddl implementation
  lazy val ddl: DDL = Accounts.ddl // ++ FooBarBazs.ddl

}

object DAL extends DAL("default") 
```

**5) 实现 test/test/AccountSpec.scala**

```
package test

import models._
import models.DAL._
import org.specs2.mutable.Specification
import play.api.test.FakeApplication
import play.api.test.Helpers._
import scala.slick.session.Session

class AccountSpec extends Specification {

  def fakeApp[T](block: => T): T =
    running(FakeApplication(additionalConfiguration = inMemoryDatabase() ++
        Map("slick.default.driver" -> "scala.slick.driver.H2Driver",
          "evolutionplugin" -> "disabled"))) {
      try {
        db.withSession { implicit s: Session =>
          try {
            create
            block
          } finally {
            drop
          }
        }
      }
    }

  "An Account" should {
    "be creatable" in fakeApp {
      val account = Accounts.insert(Account(None, "user@gmail.com", "Password"))
      val id = account.id
      id mustNotEqual None 
      Accounts.findById(id.get) mustEqual Some(account)
    }
  }

} 
```

## 如何判断数据库表是否已经存在

这个问题我不能给你足够的答案...

...但也许这不是你想要做的。如果你给一个表添加一个属性，比如说`Account.active`？如果您想保护当前存储在表中的数据，那么更改脚本就可以完成这项工作。目前，这样的修改脚本必须手工编写。可`DAL.ddl.createStatements`用于检索创建语句。应该对它们进行排序以更好地与以前的版本进行比较。然后使用 diff（与以前的版本）手动创建更改脚本。在这里，进化用于改变数据库模式。

这是一个关于如何产生（第一次）进化的例子：

```
object EvolutionGenerator extends App {

  import models.DAL

  import play.api.test._
  import play.api.test.Helpers._

    running(FakeApplication(additionalConfiguration = inMemoryDatabase() ++
        Map("slick.default.driver" -> "scala.slick.driver.PostgresDriver",
          "evolutionplugin" -> "disabled"))) {

    val evolution = (
      """|# --- !Ups
         |""" + DAL.ddl.createStatements.mkString("\n", ";\n\n", ";\n") +
      """|
         |# --- !Downs
         |""" + DAL.ddl.dropStatements.mkString("\n", ";\n\n", ";\n")).stripMargin

    println(evolution)

  }

} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-09-28T00:33:06.230

我也试图解决这个问题：在测试和生产之间切换数据库的能力。将每个 table 对象包装在一个 trait 中的想法是没有吸引力的。

我不是想在这里讨论蛋糕图案的优缺点，但我找到了另一种解决方案，供有兴趣的人使用。

基本上，制作一个像这样的对象：

```
package mypackage
import scala.slick.driver.H2Driver
import scala.slick.driver.ExtendedProfile
import scala.slick.driver.PostgresDriver

object MovableDriver {
  val simple = profile.simple
  lazy val profile: ExtendedProfile = {
    sys.env.get("database") match {
      case Some("postgres") => PostgresDriver
      case _ => H2Driver
    }
  }
} 
```

显然，你可以在这里做任何你喜欢的决策逻辑。它不必基于系统属性。

现在，而不是：

```
import scala.slick.driver.H2Driver.simple._ 
```

你可以说

```
import mypackage.MovableDriver.simple._ 
```

更新：一个 Slick 3.0 版本，由 trent-ahrens 提供：

```
package mypackage

import com.typesafe.config.ConfigFactory

import scala.slick.driver.{H2Driver, JdbcDriver, MySQLDriver}

object AgnosticDriver {
  val simple = profile.simple
  lazy val profile: JdbcDriver = {
    sys.env.get("DB_ENVIRONMENT") match {
      case Some(e) => ConfigFactory.load().getString(s"$e.slickDriver") match {
        case "scala.slick.driver.H2Driver" => H2Driver
        case "scala.slick.driver.MySQLDriver" => MySQLDriver
      }
      case _ => H2Driver
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T15:39:36.390

[play-slick](https://github.com/playframework/play-slick)与其他答案中提出的完全相同，并且似乎在 Play/Typesafe 的保护伞下。

您只需导入`import play.api.db.slick.Config.driver.simple._` ，它会根据`conf/application.conf`.

它还提供了更多的东西，比如连接池、DDL 生成......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-21T17:38:50.800

如果像我一样，您没有使用 Play！对于该项目，Nishruu[在这里提供了一个解决方案](https://www.reddit.com/r/scala/comments/3q9kqb/is_it_possible_to_write_driveragnostic_tables_in/)**

# symfony - 从 parameters.ini 传递“空”加密并在 config.yml 中使用它

> ID：13661342
> 
> 赞同：5
> 
> 时间：2012-12-01T16:33:29.540
> 
> 标签：symfony, configuration, swiftmailer

我正在尝试设置一个空值`app/config/parameters.ini`并将其`app/config/config.yml`用于`swiftmailer.encryption`配置参数。我需要在 parameters.ini 中设置它，因为我有不同的环境，每个环境都使用不同的邮件配置。

[Symfony 文档](http://symfony.com/doc/2.0/reference/configuration/swiftmailer.html#encryption)说这个配置参数应该是一个字符串值，并且“有效值是 tls、ssl 或 null”。

我的第一个猜测是添加`mailer_encryption="null"`到 parameters.ini 和`encryption: %mailer_encryption%`config.yml。但这会导致错误：

> “InvalidConfigurationException：路径“swiftmailer.encryption”的配置无效：不支持“null”加密”。

如果我在 parameters.ini 中使用`mailer_encryption=null`或，我会得到另一个错误：`mailer_encryption=`

> “InvalidConfigurationException：路径“swiftmailer.encryption”的配置无效：“不支持加密”。

如果我通过将 config.yml 更改为来停止引用参数`encryption:`，它会起作用，但这并不能解决我的目标。

我正在使用 Symfony 2.0.15，其中包含 Swiftmailer。[这是 2.0 分支](https://github.com/symfony/symfony/tree/2.0)。

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:31:13.267

AFAIK，您可以使用 yml 格式的参数文件。所以尝试创建 parameters.yml 并将其导入到您的 config.yml

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:40:44.243

你有没有试过〜？就像在 yml 配置中一样。

# java - 以下数据结构的集合

> ID：13661343
> 
> 赞同：0
> 
> 时间：2012-12-01T16:33:31.920
> 
> 标签：java, tree

我从数据库中检索国家、州和城市。`List<Object[]>`该查询以每个对象数组包含 Country、State 和 City的格式返回数据。

我正在考虑将其放入 Tree 集合中，但找不到任何好的示例。任何人都可以请帮忙。

有没有更好的解决方案将这些数据放在一起。我需要遍历这些数据。

查询输出示例：

*   美国-纽约-长岛
*   美国-纽约-皇后区
*   美国-新泽西-新泽西

我最初的想法是创建 2 个哈希图。第一个将包含 key=country 和 value=state，第二个地图将包含 key=state 和 value=city。所以现在如果我想知道美国境内的城市，首先找到 key=US 的值。然后将第一张地图（NY，NJ）的值作为第二张地图的键，我将从第二张地图返回城市。这听起来很奇怪还是有什么更好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:36:16.857

`city`使用、`state`和属性创建一个类`country`，然后返回其中`List`的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:41:57.470

您可以创建具有 City、State 和 Country 属性的类，并覆盖 equals n hashcde 方法...

除此之外，您必须实现 Comparable 接口并覆盖类中的 compareTo 方法。由于城市-国家-国家将是一个独特的组合，您可以使用 TreeSet 集合来添加从数据库中检索到的那些记录。

# excel - excel添加新数据并下推旧数据

> ID：13661346
> 
> 赞同：0
> 
> 时间：2012-12-01T16:33:56.840
> 
> 标签：excel, excel-formula

我正在为我公司的员工制作一个电子表格，以添加他们的进出时间。我已经有了显示本周所有日子的公式。员工输入该周的时间。下周到来时，数据将发生变化，旧的时间将被删除。现在我想知道是否可以使用公式将输入的时间复制到同一本书的另一张纸中。问题是它必须添加到上周（以及前一周等）的数据中，这些数据已经存在，而不是覆盖它。

这在 VBA 中很容易，但我想在开始编写宏之前看看是否有办法用公式来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T21:49:17.790

仅因为公式不存储数据，所以无法使用公式来实现这一点。

# hibernate - 如何交换受唯一索引限制的值对

> ID：13661347
> 
> 赞同：2
> 
> 时间：2012-12-01T16:33:58.277
> 
> 标签：hibernate, unique-constraint

我们有一个基于 Hibernate (33.) 的 Web 应用程序，并且正在发现与交换受唯一索引限制的数据值对相关的问题。在我们的 HBM 机票中，我们有

```
<many-to-one name="participants" class="net.umbrella.entity.ParticipantModel" fetch="select">
    <column name="PARTICIPANTID" not-null="false" />
</many-to-one>
<many-to-one name="flights" class="net.umbrella.entity.FlightModel" fetch="select">
    <column name="FLIGHTID" not-null="true" />
</many-to-one> 
```

在功能上可以使用分配给参与者 P1 的票 A 加上分配给参与者 P2 的票 B 的数据对并交换两个参与者。票 A 最终将分配给参与者 P2，票 B 将分配给参与者 P1。但是，FLIGHTID + PARTICIPANTID 有一个唯一的约束。

当 Hibernate 发布第一个更新以将票证 A 上的参与者 P1 更改为 P2 时，抛出 GenericJDBCException

```
Attempt to insert duplicate key row in object 'FLIGHTTICKET' with unique index 'IDX_FLIGHTTICKET_UQ' 
```

有没有人对此有共同的解决方案？

谢谢西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T16:41:19.437

所以，你有这样的事情：

```
Participant temp = pair1.getParticipant();
pair1.setParticipant(pair2.getParticipant());
pair2.setParticipant(temp); 
```

相反，只需执行以下操作：

```
Participant temp1 = pair1.getParticipant();
Participant temp2 = pair2.getParticipant();
pair2.setParticipant(null);
session.flush();
pair1.setParticipant(temp2);
pair2.setParticipant(temp1); 
```

中间刷新将确保一次只有一对引用参与者。

# sphinx - 狮身人面像年度指数

> ID：13661352
> 
> 赞同：2
> 
> 时间：2012-12-01T16:34:32.630
> 
> 标签：sphinx

我有一个包含 200 万条记录的 MySQL 数据库。我已经在使用 sphinx 来索引数据，然后快速搜索它。

我有两个索引。一个大索引每天凌晨 3 点轮换，一个较小的索引只保存增量更改。它每 30 分钟轮换一次，并且仅索引数据库中的新行（那些在凌晨 3 点之后插入的行）。

一切都是好的。搜索正在工作。但我正在寻找一些改进。我不需要每天重新索引大数据库，因为一旦将信息插入数据库，它就不会改变（我只有插入，没有更新）。所以重建大索引是绝对没用的。

是否可以将此索引拆分为年度甚至月度索引？这会加快搜索速度还是减慢搜索查询速度？任何示例如何组织索引和数据源？如果我切换到实时索引会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:07:37.880

您可以只使用合并功能

[http://sphinxsearch.com/docs/current.html#index-merging](http://sphinxsearch.com/docs/current.html#index-merging)

每天一次将您的“增量”合并回“主要”。合并后想更新计数器表，因为主表中的数据发生了变化，所以值也发生了变化。

（通常，您拥有的索引越多，搜索就会受到影响。最终，搜索大量小索引所花费的工作量将超过节省的工作量。 - 例外情况是您只能搜索部分数据。例如，如果您有查询仅搜索去年的记录，可以对其进行调整，以便仅搜索最新的索引。这比搜索所有记录而丢弃许多记录更有效。）

# github-for-mac - GitHub for Mac 错误：git：'credential-osxkeychain' 不是 git 命令

> ID：13661354
> 
> 赞同：35
> 
> 时间：2012-12-01T16:34:50.600
> 
> 标签：github-for-mac

使用 GitHub for Mac 应用程序（版本 87）时，我收到以下错误：

> git: 'credential-osxkeychain' 不是 git 命令。请参阅“git --help”。
> 
> 错误：请求的 URL 返回错误：访问 https://github.com/[PROJECT URL]/info/refs 时出现 403
> 
> 致命：HTTP 请求失败 (256)

git 命令行工具（版本 1.8.0）安装在`/usr/local/git/bin`git-credential-osxkeychain 正确安装在`/usr/local/git/bin`.

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2019-04-12T06:03:29.823

[![在此处输入图像描述](../Images/4e1d585dd4fbde7ca7f3ed7e2884179c.png)](https://i.stack.imgur.com/qz7tp.png)

当我尝试运行此命令时，没有错误

```
brew untap homebrew/homebrew-dupes 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-03-08T09:16:59.933

`git: 'credential-osxkeychain' is not a git command. See 'git --help'.`升级 git 后，此错误消息消失了

```
brew upgrade git

==> Upgrading 1 outdated package:
git 2.11.1 -> 2.21.0 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-02T01:51:26.357

此问题的根源在于 Mac 版 GitHub 对其可执行文件使用的目录路径与命令行工具不同。

**Mac 版 GitHub：** /Applications/GitHub.app/Contents/Resources/git/bin

**命令行工具：** /usr/local/git/bin/

因此，当 GitHub for Mac 尝试同步分支时，它会显示错误，因为它找不到 git-credential-osxkeychain 可执行文件。

解决问题：

1.  启动终端
2.  为 git-credential-osxkeychain 从***Command Line Tools Dir***到***GitHub for Mac Dir创建一个符号链接***

`ln -s <git-command-line-tools dir path>/git-credential-osxkeychain <github for mac path>/git-credential-osxkeychain`

这是我在系统上使用的命令：

`ln -s /usr/local/git/bin/git-credential-osxkeychain /Applications/GitHub.app/Contents/Resources/git/bin/git-credential-osxkeychain`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-04T21:18:22.073

这总是发生在源树应用程序和您更改设置以使用系统 git 而不是带有源树的嵌入式 git 的解决方案中，因为源树使用的是旧版本，或者您可以使用 git 可执行文件的路径更新设置，而您应该在 /usr/bin/git 中找到它，或者您可以打印哪个 git 并指向您的源树应用程序来使用它

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-27T15:35:02.577

[http://backlogtool.com/git-guide/cn/reference/trouble-shooting.html](http://backlogtool.com/git-guide/cn/reference/trouble-shooting.html)

如果你是windows，每次执行push/pull时HTTPS都需要密码，只是第一次

但在 Mac 中，您可以使用与钥匙串连接的身份验证助手。使用 Homebrew 的用户在安装 Git 时会自动安装身份验证助手。此外，您需要手动安装。

如果要验证是否有安装认证助手，可以使用以下命令进行确认。

`git credential-osxkeychain`

如果没有安装鉴权助手，会显示如下内容。

`git: 'credential-osxkeychain' is not a git command. See 'git --help'.`

此时，您可以将认证助手下载到正确的路径。

1.  `curl -s -O http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain`
2.  `chmod u+x git-credential-osxkeychain`
3.  `mv git-credential-osxkeychain /usr/local/bin`

安装后，设置开启认证助手。

4.  `git config --global credential.helper osxkeychain`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-07-05T15:03:11.020

如果您在使用时遇到此问题`brew update`，请尝试

```
brew update --debug --verbose 
```

您可以查看详细日志，并找到真正的原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-26T19:27:50.617

我必须这样做，`sudo ln -s /usr/local/git/bin/git-credential-osxkeychain /usr/bin/git-credential-osxkeychain`因为我升级了 git，然后将 /usr/local/git/bin/git 复制到 /usr/bin/git

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-06T09:10:17.793

我为此苦苦挣扎了一段时间，但发现[这](https://docs.github.com/en/github/using-git/caching-your-github-credentials-in-git)解决了我的问题。

**第 1 步**检查你有 git credential-osxkeychain

```
$ git credential-osxkeychain
# Test for the cred helper
> Usage: git credential-osxkeychain <get|store|erase> 
```

如果不安装 Xcode 命令行工具 ( `xcode-select --install`)，或者`brew install git`

**第 2 步**告诉 Git 使用`osxkeychain helper`配置`global credential.helper`：

```
$ git config --global credential.helper osxkeychain
#Set git to use the osxkeychain credential helper 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-25T21:20:31.803

环境

> /usr/local/git/bin/git-credential-osxkeychain

在您的路径中也有效，或者您的路径可能在任何地方。

我不确定哪种解决方案更可取。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-17T22:41:46.910

在与我的一位同事一起解决这个问题后，我们只需将 SourceTree 更新到最新版本即可解决。

对于未来的查看者，在进入符号链接路径之前，请确保您为源树启用了自动更新（首选项->更新选项卡），然后检查更新（在 Mac 上的源树菜单中）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-30T12:56:12.963

我对 Fork.app 有同样的问题，应用程序的 git 实例无法使用钥匙串，这有帮助（或更改为系统或自制 git 实例，它列在应用程序的首选项中）：

```
cd /Volumes/Macintosh HD/Applications/Fork.app/Contents/Resources/git-instance/bin

./git config --global credential.helper osxkeychain 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-04T04:55:24.573

就像[@plough 的回答](https://stackoverflow.com/a/56905490/41321)`brew update`一样，由于使用了使用 HTTPS 访问远程存储库的私人水龙头，我在运行时遇到了同样的问题。

根本原因是 git 找不到配置的凭证助手，因为默认情况下会从环境中`brew`清除。`PATH`

有两种解决方法。

1.  `HOMEBREW_NO_ENV_FILTERING=1 brew update`不理`PATH`会，因此将使用您当前的 git 安装并找到凭证助手。每次键入都有些笨拙，因此如果您使用此解决方案，请将其保存为别名或 1-liner 脚本。

    更新：您也可以`HOMEBREW_FORCE_BREWED_GIT=1 brew update`使用 brew 安装的 git 而不是系统之一。此版本无需依赖设置的路径即可找到凭证助手。

2.  我首选的解决方法是将有问题的水龙头的远程 URL 更改为使用 SSH 样式的 URL（并确保您配置了有效的 SSH 密钥）。你不必记住不同的咒语`brew update`，它是永久性的。

    *   在一个终端中，`cd /usr/local/Homebrew/Library/Taps/ORG/homebrew-PRIVATE_TAP_NAME`
    *   `git config remote.origin.url`将显示一个值`https://github.com/ORG/homebrew-PRIVATE_TAP_NAME`
    *   将其更改为等效的 SSH 样式 URL：`git config remote.origin.url git@github.com:ORG/homebrew-PRIVATE_TAP_NAME.git`

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2018-06-27T07:38:11.097

尝试 ：`git config --global credential.helper git`

# c++ - std::remove 不起作用

> ID：13661355
> 
> 赞同：1
> 
> 时间：2012-12-01T16:35:04.050
> 
> 标签：c++, stl

我的测试程序的目标是擦除一个简单的字符串向量中的单元格，如下所示。程序失败（分段错误）。

```
static void display(std::vector<std::string> const &vec)
{
    std::vector<std::string>::const_iterator It = vec.begin();
    for (; It != vec.end(); ++It)
        std::cout << *It << " ";
    std::cout << std::endl;
}

int         main(void)
{
    std::vector<std::string> vec;
    size_t  index = 0;

    vec.push_back("Toto");
    vec.push_back("Titi");
    vec.push_back("Tata");
    vec.push_back("Tutu");

    display(vec);

    std::vector<std::string>::iterator It = vec.begin();

    for (size_t idx = 0; It != vec.end(); ++It, idx++)
        if (!(*It).compare("Tutu"))
            index = idx;

    vec.erase(std::remove(vec.begin(), vec.end(), index), vec.end()); //Segmentation fault

    display(vec);

    getchar();
    return (0);
} 
```

有人可以帮助我吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T16:38:14.637

```
vec.erase(std::remove(vec.begin(), vec.end(), index), vec.end()); 
```

您需要将实际元素（在这种情况下为 type `std::string`）传递给您的`erase`函数。

因此，而不是`index`，它应该是`somestring`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:40:42.447

*   您不应混合使用迭代器和自制索引。仅使用迭代器。
*   复制之类的算法 - 当您想与实际容器类型分离时，可以使用外部算法，并且有一些成员函数可以完成优化的工作。在你的情况下 vec erase 为你做任何事情，只需传递找到的迭代器

    vec.erase(它);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:21:56.140

由于您正在检查是否相等，因此只需使用`std::remove`：

```
vec.erase( std::remove( vec.begin(), vec.end(), "Tutu" ),
           vec.end() ); 
```

这是标准的成语。如果由于某种原因，您必须自己编写循环：

```
std::vector<std::string>::const_iterator current = vec.begin();
while ( current != vec.end() ) {
    if ( *current == "Tutu" ) {
        current = vec.erase( current ) ;
    } else {
        ++ current;
    }
} 
```

（再次，标准成语。）

# inno-setup - 将用户完成的表单添加到 Inno Setup

> ID：13661364
> 
> 赞同：2
> 
> 时间：2012-12-01T16:36:32.740
> 
> 标签：inno-setup

我想添加一个小表格，由用户在安装程序时使用 Inno Setup 填写。然后需要将表格和预定义的电子邮件地址通过电子邮件发送给我。

表单需要在几个领域，如；

*   用户名
*   地址
*   电子邮件
*   电话号码等

一旦我有一个例子，我希望能够改进我正在寻找的领域。

对此的任何帮助将不胜感激，否则我对 Inno Setup 的性能非常满意，并且能够执行所有其他任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T19:50:27.937

对于数据捕获，您可以调用[CreateInputQueryPage](http://www.jrsoftware.org/ishelp/topic_isxfunc_createinputquerypage.htm)函数在向导内创建一个新页面。

该页面*专门*用于以编辑形式获取输入。

例子：

```
[Code]
var
  Page: TInputQueryWizardPage;
  UserName, UserCompany: String;

procedure InitializeWizard();
begin
  Page := CreateInputQueryPage(wpWelcome,
  'Personal Information', 'Who are you?',
  'Please specify your name and the company for whom you work, then click Next.');

  { Add items (False means it's not a password edit) }
  Page.Add('Name:', False);
  Page.Add('Company:', False);

  { Set initial values (optional) }
  Page.Values[0] := ExpandConstant('{sysuserinfoname}');
  Page.Values[1] := ExpandConstant('{sysuserinfoorg}');
end; 
```

对于电子邮件部分，由于 Inno Setup 缺乏发送电子邮件支持，我的建议是

*   创建一个专门用于发送电子邮件的简单应用程序，将其作为安装的一部分包含在内，并在表单完成后调用它
*   寻找 Inno Setup 扩展，也许支持发送电子邮件（我不知道）
*   代替直接发送电子邮件，您可以创建一个*网络桥*：您网站中的一个简单网页，它通过获取参数接收信息，然后向您发送电子邮件。由于您可以通过 Windows API 调用执行此获取，因此直接在 Inno Setup 中实现会更容易。这不是最安全的方法，就好像有人发现它可能被滥用以向您发送虚假电子邮件一样，但您可以编写代码以最大限度地减少这种机会。

# matplotlib - 仅清除 matplotlib 图形的一部分

> ID：13661366
> 
> 赞同：6
> 
> 时间：2012-12-01T16:36:39.783
> 
> 标签：matplotlib

我正在使用嵌入在 WxPython GUI 中的 matplotlib 图来呈现一些数据。图的内容（显示的数据）随着单击按钮的功能不断变化，...

数据分为两种。

1）等高线

```
self.axes.contour(x_scale_map,y_scale_map,matrix,cl,cmap=my_cmap,extent=0,matrix.shape[1]-1,0,matrix.shape[0]-1)) 
```

这加载速度相对较慢（~1s），但不会经常更改。

2）在这个轮廓的顶部，我绘制了一些线条

```
self.axes.axhline(y,color='black') 
```

这些线条显然是立即绘制的，并且经常随着用户点击的功能而变化。在这些情况下，之前绘制的线条需要消失，而新的线条需要出现，而等高线图保持不变。

现在，我的问题如下。我还没有找到只删除线条而不是轮廓的方法。获得所需结果的唯一方法似乎是：

```
self.axes.clear() 
```

然后重新绘制轮廓和新线。但如前所述，每次重新加载轮廓都很慢，因此很烦人。

有没有办法只清除图中的线条？我试图通过执行以下操作来使用叠加子图：

```
self.axes1 = self.fig.add_subplot(111)
self.axes2 = self.fig.add_subplot(111)
self.axes1.contour(...)
self.axes2.axhline(y,color='black')
self.axes2.clear() 
```

但最后一行清除了整个数字。

有谁知道如何实现所需的功能？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T01:09:45.153

下面的[问答](https://stackoverflow.com/questions/4981815/how-to-remove-lines-in-a-matplotlib-plot)给出了这个问题的解决方案。

换句话说，要能够从图中删除一条线：

1）通过在绘制时存储其引用来跟踪线：

```
my_line = self.axes.axhline(y,color='black') 
```

2) 然后按如下方式进行移除：

```
my_line.remove()
del my_line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T14:52:14.993

通过使用等效的 self.axes2.cla() 来清除指定的轴，我成功地解决了这样的问题。就我而言，我必须使用 sharex 和 sharey 以及 self.axes2.patch.set_aplha(0.0) 来使 facecolor 透明并看透下面的图。

不过，我现在的问题是我在 axes1 图上定义了一个选择器，并且它似乎不会在存在覆盖图的情况下触发。

# scheme - 方案中的文件夹

> ID：13661367
> 
> 赞同：1
> 
> 时间：2012-12-01T16:36:49.830
> 
> 标签：scheme

我正在学习积累和折叠，但我的代码中有问题。我想比较所有列表中的元素，但 foldr 只使用第一个和第二个元素。这是我的代码：

```
(define accum?
  (lambda (list1 pre?)
  (foldr (lambda (x y) 
               (if (pre? (car list1) (cadr list1)) #t #f))
         #f
         list1)))

(accum? '(1 2 3 4) <) --> #t
(accum? '(3 2 3 4) <) --> #f
(accum? '(1 2 5 4) <) --> #t (should be #f)
(accum? '(5 7 2 3) <) --> #t (should be #f) 
```

你知道哪里错了吗？顺便说一句，最好只使用 (pre? (car list1) (cadr list1)) 而不使用 if --> (if <...> #t #f)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:03:35.390

`apply`使用比较运算符接收可变数量的参数这一事实可以更轻松地解决此问题：

```
(apply < '(1 2 3 4))
=> #t

(apply < '(1 2 5 4))
=> #f 
```

**更新**

特别是对于这个问题，`foldr`它不是适合这项工作的工具（尽管这并非不可能，正如您所[展示](https://stackoverflow.com/questions/13670780/need-t-but-get-first-element-scheme)的那样） - 在遍历列表时没有要“累积”的值，列表要么是有序的或者不是给定的谓词。

从评论中，我了解到该`pre?`过程可以是任意的`lambda`，只接收两个参数。

一个可能的解决方案是创建所有连续元素对的所有列表，并检查谓词是否对所有元素都成立。请注意，最后一个元素没有对应的对，因此我们需要将其从对列表中排除。为此，我将定义一个特殊的`zip`过程，给定两个输入列表，它负责创建一个对列表，同时考虑到列表可以具有不同长度的事实：

```
(define (zip lst1 lst2)
  (if (or (null? lst1) (null? lst2))
      '()
      (cons (list (car lst1) (car lst2))
            (zip (cdr lst1) (cdr lst2)))))

(zip '(1 2 3) '(2 3))
=> '((1 2) (2 3)) 
```

现在放在一起，我们可以像这样解决原来的问题：

```
(define (accum? lst pre?)
  (andmap (lambda (tuple)
            (pre? (car tuple) (cadr tuple)))
          (zip lst (cdr lst)))) 
```

请记住，它不适用于空列表，但为此添加特殊情况很简单。现在可以任意进行比较`lambdas`：

```
(accum? '(1 2 3) (lambda (a b) (= a (- b 1))))
=> #t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:44:08.220

它只使用第一个和第二个元素，因为您明确使用`(car list1)`and `(cadr list1)`，它得到了第一个和第二个元素。

请注意，当您实际上不使用`x`and`y`时，传递给 lambda 的参数。这是一个明确的迹象，你做错了什么。

PS：这与您的问题无关，但是写作与写作`(if condition #t #f)`几乎是一回事`condition`。所以，是的，省略它`if`会更好，因为它没有任何意义。

# ruby-on-rails - 来自不同视图的 Ruby on Rails 列表

> ID：13661369
> 
> 赞同：0
> 
> 时间：2012-12-01T16:37:05.963
> 
> 标签：ruby-on-rails

有没有办法从不同的不相关视图列出（索引）表？我有一个使用 jquery Fullcalendar 和一个事件表的日历视图。日历没有模型，所以我无法将它与事件联系起来。

使用事件/索引中的相同代码不起作用：

```
<% @events.each do |event| %> 
```

或者

```
<% Events.each do |event| %> 
```

我得到：

```
You have a nil object when you didn't expect it! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:42:39.247

在任何视图中，您都可以从任何数据库表中显示您想要的任何内容，您只需将其传递给控制器​​中的正确操作。

因此，在显示日历视图的任何控制器/操作中，添加一个`@events = Event.all` （或根据需要缩小搜索范围）。然后这个实例变量可以在视图中访问，你可以像以前一样调用它：

```
<% @events.each do |event| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:43:43.567

根据我对您的问题的理解，您需要将日历视图放到您可以在其他地方调用和使用的部分，在您的应用程序的其他视图中。[Rails Guide on Layouts and Rendering](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)可以帮助你解决这个问题。

在您看来，这样的事情就是您所追求的：

```
<%= render :partial => "/events/calendar" %> 
```

# php - htmlspecialchars 等效于 mysql

> ID：13661370
> 
> 赞同：0
> 
> 时间：2012-12-01T16:37:30.333
> 
> 标签：php, mysql, escaping, xss

我正在数据库中查询从表单获得的 userInput 文本，并将在 HTML 页面中显示该文本。为了防止 XSS，我需要遍历结果并应用 htmlspecialchars()，当然，我将 fetchAll() 更改为 fetch() 并在其中应用 htmlspecialchars()，但使用原生 MySQL 函数并包括它在我的查询中。我搜索但找不到一个。一个存在吗？我可以创建自己的吗？谢谢

```
$sql ='SELECT userInput FROM table WHERE fk_id=123';
$stmt = db::db()->query($sql);
return $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:52:56.150

这一切都取决于您要保存的数据。如果您要保存数据以直接显示在您的网站上，那么显然您需要 htmlspecialchars() 之类的。PDO 通过使用准备好的语句废弃了 mysql_real_escape() 等的使用。

作为铁律，每个字符串都必须转义到正确的目的地：HTML 字符串经历 HTML 转义，MySQL 字符串经历 MySQL 转义等。

编辑 ：

当您将其从数据库中取出（或将其中的任何内容作为 html 显示给用户）然后您再次将其转义，以便使用 htmlentities() 等来保护您的用户免受 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-16T10:49:06.750

6 years later and I think the answer to the first part is still "no, there isn't"... but to the second, "yes": you can create your own, if you wish, using MySQL stored procedures.

Anyway, probably the best way to handle the situation of a cross-site scripting attack is to remove any script tags or inline script before the html is stored into the database, whether as a MySQL stored procedure (tricky!) or in the script before you send the html to the database.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-02T08:54:43.307

```
UPDATE messages SET message = REPLACE(REPLACE(REPLACE(message,'&','&amp;'),'<', '&lt;'), '>', '&gt;') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-01T19:52:51.417

转义数据不应在数据库中完成，而应在 PHP 应用程序中完成。此外，它应该始终在视图而不是模型中完成。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-01T17:31:39.070

我的建议：使用对象。使用 setter/getter 创建您自己的类，并定义它将如何存储/返回您的数据。

前任：

```
class UserRow{
    public $id;
    public $email;
    protected $bio;

    public function getBio(){
        return htmlspecialchars($this->bio);
    }

    public function __set($property, $value){
        $this->$property = $value;
    }

    public function __get($property){
        $getter = 'get'.$property;
        if(is_callable(array($this,$getter))){
            return $this->$getter();
        }else{
            return $this->$property;
        }
    }
} 
```

和

```
$stmt = $pdo->query("SELECT * FROM user");
$stmt->fetchAll(PDO::FETCH_CLASS, 'UserRow'); 
```

# android - Leadbolt 执行错误

> ID：13661374
> 
> 赞同：0
> 
> 时间：2012-12-01T16:38:03.907
> 
> 标签：android, leadbolt

我一直在尝试在我的应用中实现 Leadbolt 广告，但无法在控制器上设置 Adlistener。我可以添加的方法与[pdf](http://www.leadbolt.com/docs/Leadbolt_android_app_ad_guide_v400.pdf)中描述的方法完全不同。我可以在我的应用中展示广告，但不能使用监听器。

这是我的代码：

```
 final Activity act = this;
                  myController = new AdController(act, MY_LB_SECTION_ID, new AdListener() {

                    @Override
                    public void onDismissScreen(Ad arg0) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onLeaveApplication(Ad arg0) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onPresentScreen(Ad arg0) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onReceiveAd(Ad arg0) {
                        // TODO Auto-generated method stub

                    }

                  });

                  myController.loadAd(); 
```

我得到的错误是：*构造函数 AdController(Activity, String, new AdListener(){}) 未定义*

这是[pdf](http://www.leadbolt.com/docs/Leadbolt_android_app_ad_guide_v400.pdf)文件中的代码，但这些方法对于 eclipse 来说似乎是未知的：

```
final Activity act = this;
AdController myController = new AdController(act, 
"MY_LB_SECTION_ID", new AdListener() {
public void onAdLoaded() {
}
public void onAdClicked() {
}
public void onAdClosed() {
act.finish();
}
public void onAdCompleted() {
act.finish();
}
public void onAdFailed() {
act.finish();
}
public void onAdProgress() {
}
public void onAdAlreadyCompleted() {
act.finish();
}
public void onAdHidden() {} // function is deprecated
public void onAdPaused() {
act.finish();
}
public void onAdResumed() {
}
});
myController.loadAd(); 
```

任何想法，我做错了什么？我没有在清单中添加任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:45:24.677

从您引用的 PDF 中：

> 包含此代码后，访问您的发布商门户并添加“应用广告 (SDK)”部分并使用获取代码图标检索“MY_LB_SECTION_ID”的值。

`MY_LB_SECTION_ID`是整数 ID，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:59:50.317

到铅栓：

原来，com.pad.android.listener.AdListener; 或 com.Leadbolt.AdListener；与导入 com.google.ads.AdListener 发生冲突；这是 AdMob AdListener。这就是我无法添加导入语句的原因。

您应该扩展您的文档，因此如果您的听众与任何其他广告网络发生冲突，如何使用它，因为它并不明显。MobFox 也在使用 com.adsdk.sdk.AdListener。

要在使用其他广告网络的 AdListener 的同时使用您的 AdListener，我的第一行如下所示：

```
public class MainActivity extends Activity implements AdListener, com.google.ads.AdListener { 
```

第一个是**MobFox**，第二个是**AdMob**。我没有实现**leadbolt的**AdListener，因为我在代码中使用了它：

```
AdController myController = new AdController(act, MY_LB_SECTION_ID_BANNER_ALL, new com.pad.android.listener.AdListener() { 
```

这样它就可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T21:47:14.743

我遇到了同样的问题，因为我也同时使用 AdMob，但我找到了一种更简单的方法来解决这个问题。

**而不是使用：**

```
AdController ad = new AdController(act, "MY_LB_SECTION_ID", new AdListener() {
    ...
} 
```

**我用了：**

```
AdController ad = new AdController(act, "MY_LB_SECTION_ID", new com.<leadbolt_package_name>.AdListener() {
    ...
} 
```

考虑到我使用了这个导入：

```
import com.<leadbolt_package_name>.AdController; // in my case, it was something like 'fgadcbgxysr' 
```

这将直接读取 LeadBolt 库方法，而不是碰撞方法。希望它可以帮助其他用户，尽管我的回复来晚了。

# mysql - MySQL 报告 - 订单历史

> ID：13661381
> 
> 赞同：0
> 
> 时间：2012-12-01T16:38:21.940
> 
> 标签：mysql, reporting

我必须为报告创建一个 MySQL 查询。

我有一张`history`记录产品订单状态变化的表格。对于订单的生命周期（订单流程），我有以下状态：新的、已确认的、正在处理的、已发货的、已交付的、已取消的、已退货的。订单不一定遵循此状态流，例如：新订单可以立即取消，也可以在处理过程中取消。这使得准确的报告更加复杂。

现在我想对已确认、处理、发货和交付的订单制作供应链报告。但此报告应不包括在任何阶段取消或退回的订单。

考虑这个例子：

客户下了订单 (id: 34)。初始状态：新。由代理确认，状态设置为已确认。供应链经理验证可用性、处理状态的变化，然后发货，然后交付。

另一个订单 (id: 55) 来了，新的，已确认，正在处理但已取消。`history`好像：

```
id  order_id status
111 34       new
112 34       confirmed
113 55       new
114 55       confirmed
115 55       processing
116 34       processing
117 55       cancelled
118 34       shipped
119 34       delivered 
```

如何进行报告查询以仅获取那些

1.  确认、处理、发货和交付。
2.  确认、处理、取消。
3.  确认，取消
4.  等等...

如何编写查询以获取此类报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:50:58.753

对于新订单：从历史记录中选择不同（订单ID），其中状态=新处理的新订单：从历史记录中选择不同（订单ID），其中状态=已处理，依此类推

对于那些新的、处理的和交付的订单

从历史中选择 t1.order_id 作为 t1，历史作为 t2，历史作为 t3，其中 t1.order_id=t2.order_id 和 t2.order_id=t3.order_id 和 t1.status=new 和 t2.status = 已处理且 t3.status = 已交付

像这样继续为别人

# algorithm - 在一组向量中找到最佳余弦相似度

> ID：13661383
> 
> 赞同：9
> 
> 时间：2012-12-01T16:39:02.993
> 
> 标签：algorithm, math, cosine-similarity

我有 n 个向量，每个向量都有 m 个元素（实数）。我想找到所有对中余弦相似度最大的对。

直接的解决方案需要 O(n ² m) 时间。

有没有更好的解决方案？

**更新**

[余弦相似度/距离和](https://math.stackexchange.com/questions/102924/cosine-similarity-distance-and-triangle-equation)三角方程启发我，我可以用“弦长”代替“余弦相似度”，这会降低精度但会大大提高速度。（有许多解决度量空间中最近邻的现有解决方案，如[ANN](http://www.cs.umd.edu/~mount/ANN/)）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T17:58:31.837

余弦相似度[与欧几里得](http://www.cs.princeton.edu/courses/archive/spring12/cos598C/SVDforclustering.pdf)`sim(a,b)`距离有关 `|a - b|`

```
|a - b|² = 2(1 - sim(a,b)) 
```

对于单位向量`a`和`b`.

这意味着通过 L2 范数归一化后欧几里得距离最小时余弦相似度最大，问题归结为[最近点对问题](https://en.wikipedia.org/wiki/Closest_pair_of_points_problem)，可以在 O(n lg n) 时间内解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T15:10:12.233

您可以查看项目 simbase [https://github.com/guokr/simbase](https://github.com/guokr/simbase)，它是一个向量相似度 nosql 数据库。

Simbase 使用以下概念：

*   向量集：一组向量
*   基：向量的基，一个向量集中的向量具有相同的基
*   推荐：两个具有相同基的向量集之间的单向二元关系

您可以直接使用 redis-cli 进行管理任务，也可以直接以编程方式使用不同语言的 redis 客户端绑定。这是一个 Python 示例

```
 import redis

    dest = redis.Redis(host='localhost', port=7654)
    schema = ['a', 'b', 'c']
    dest.execute_command('bmk', 'ba', *schema)
    dest.execute_command('vmk', 'ba', 'va')
    dest.execute_command('rmk', 'va', 'va', 'cosinesq') 
```

# http - 为什么在基本身份验证中使用 Base64

> ID：13661384
> 
> 赞同：9
> 
> 时间：2012-12-01T16:39:08.543
> 
> 标签：http, header, basic-authentication

为什么“用户名：密码”的结果字符串文字在授权标头中使用 Base64 编码？它的背景是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-12T07:36:19.007

要理解以下内容，你应该对[“字符集”和“字符编码”的区别](http://www.w3.org/International/articles/definitions-characters/#charsets)有一个清晰的认识。

另外，请记住[Base64](http://en.wikipedia.org/wiki/Base64)是一种*编码*，[编码**不是**加密](http://www.di-mgt.com.au/encode_encrypt.html)。用 Base64 编码的任何内容都有意易于解码。

[Base64](http://en.wikipedia.org/wiki/Base64)编码，最重要的是，确保 user:pass 字符都是[ASCII](http://en.wikipedia.org/wiki/ASCII)字符集和 ASCII 编码的一部分。HTTP Basic auth 中的 user:pass 是 Authorization 标头字段值的一部分。HTTP 标头值是 ASCII（或扩展 ASCII）编码/解码的。因此，当您对 user:pass 进行 Base64 编码时，请确保它是 ASCII，因此是有效的标头字段值。

Base64 编码还为明文 user:pass添加了至少*某种混淆。*同样，这**不是**加密。但是，它确实会阻止普通人一目了然地阅读 user:pass。从安全角度来看，这似乎几乎毫无意义，我之所以将其包括在内，是因为以下背景信息。

**一些背景**

如果您查看[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-4.2)（现已过时）和[RFC 2617](https://www.rfc-editor.org/rfc/rfc2617#section-2)，您会发现它们分别将标头字段值**和**基本身份验证 user:pass 定义为 TEXT；即，ISO-8859-1 OCTECT（ISO-8859-1 是 8 位扩展 ASCII 编码）。这很奇怪，因为这使得作者*似乎*打算让兼容的 user:pass 使用与 HTTP 标头所需的字符集/编码相同的字符集/编码，在这种情况下，Base64 编码似乎毫无意义，除了琐碎的混淆。

也就是说，很难相信那些 RFC 的作者没有想到用户名/密码是非 ASCII（非 ISO-8859-1）字符集。假设他们有非 ASCII user:passes，他们可能会担心如何在所有 ASCII 标头集的中间包含/维护/传输非 ASCII 字节。Base64 编码 user:pass 当然很好地解决了这个问题。使用 Base64 还有一个更规范的原因——[使数据传输更可靠](https://stackoverflow.com/a/201510/99717)。我的理解是 HTTP 是[8-bit clean](http://en.wikipedia.org/wiki/8-bit_clean)；即使标头以 ASCII 形式提供，我不认为 user:pass 的 Base64 编码是为了使其传输更可靠。

如果不问原作者，我不确定我们是否会确定。 [这是 Julian Reschke 对该主题的有趣评论](https://stackoverflow.com/questions/5597086/base-64-encoding-in-http-basic-auth#comment6373528_5597178)。他是[RFC 5987, Character Set and Language Encoding for Hypertext Transfer Protocol (HTTP) Header Field Parameters](https://www.rfc-editor.org/rfc/rfc5987)的作者。他还在 HTTP RFC 方面做了大量工作，包括最新的 HTTP 1.1 RFC 大修。

当前处理 HTTP 标头编码的 HTTP 1.1 RFC [RFC 7230](https://www.rfc-editor.org/rfc/rfc7230#section-3.2.4)现在建议标头使用 USASCII（又名 ASCII，7 位 ASCII）。 [RFC 5987](https://www.rfc-editor.org/rfc/rfc5987)定义了一个标头参数编码规范——大概有些人正在使用它。 [RFC 7235](https://www.rfc-editor.org/rfc/rfc7235)是关于 HTTP 身份验证的 RFC 2617 的最新更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T16:40:41.537

这是[*userid-password*](https://www.rfc-editor.org/rfc/rfc1945#section-11.1)元组在编码之前的[生产规则：](https://www.rfc-editor.org/rfc/rfc1945#section-11.1)

 *```
userid-password   = [ token ] ":" *TEXT 
```

这里的[*token*](https://www.rfc-editor.org/rfc/rfc1945#page-12)指定如下：

```
 token          = 1*<any CHAR except CTLs or tspecials> 
```

这基本上是 32 到 126 范围内的[任何 US-ASCII 字符，但没有](https://www.rfc-editor.org/rfc/rfc1945#section-2.2)[一些特殊字符](https://www.rfc-editor.org/rfc/rfc1945#page-12)（`(`, `)`, `<`, `>`, `@`, `,`, `;`, `:`, `\`, `"`, `/`, `[`, `]`, `?`, `=`, `{`, `}`, 空格和水平制表符）。

并且[*TEXT*](https://www.rfc-editor.org/rfc/rfc1945#page-11)指定如下：

```
 TEXT           = <any OCTET except CTLs,
                    but including LWS> 
```

这基本上是除[控制字符](https://www.rfc-editor.org/rfc/rfc1945#page-11)（代码点 0-31、127 ）之外的任何[八位字节](https://www.rfc-editor.org/rfc/rfc1945#section-2.2)(0-255) 序列，但[包括线性空白](https://www.rfc-editor.org/rfc/rfc1945#page-11)序列，这是一个或多个空格或水平制表符，前面可能有一个 CRLF 序列：

```
 LWS            = [CRLF] 1*( SP | HT ) 
```

尽管这不会破坏标头字段值，但[*LWS*具有与单个空格相同的语义](https://www.rfc-editor.org/rfc/rfc1945#page-11)：

> 所有线性空格，包括折叠，都具有与 SP 相同的语义。

为了保持这样的序列不变，字符串在作为字段值放置之前被编码。*

# magento - 在类别中列出具有特定属性的产品

> ID：13661387
> 
> 赞同：0
> 
> 时间：2012-12-01T16:39:24.653
> 
> 标签：magento

我在 Magento 社区版中有一个名为“新功能”的类别。我有一个具有多个“值”的属性设置，其中一个是“新”。这个属性实际上是为了在产品图片上放置小横幅——比如“As Seen In...”或“25% off”等。

现在我们有了这个属性并且我们的“新”产品将该属性定义为“新”，我想做的是创建一个名为“最新消息”的新类别并列出该类别中具有上述属性集的所有产品到“新”。这可能吗？

这是可以在类别设置下的“自定义设计”选项卡中完成的吗？也许自定义布局更新中的某些内容？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:14:21.020

在您的产品系列中，您可以执行类似的操作

```
$collection->addAttributeToFilter('attribute_name', 'New'); 
```

阅读更多 @

[按属性列出产品](http://inchoo.net/ecommerce/magento/listing-products-by-attribute/)

[Magento - 检索具有特定属性值的产品](https://stackoverflow.com/questions/1332742/magento-retrieve-products-with-a-specific-attribute-value)

# iphone - 第一次推送vc然后呈现模态vc 12次时如何弹出？

> ID：13661388
> 
> 赞同：-1
> 
> 时间：2012-12-01T16:39:23.953
> 
> 标签：iphone, ios, ipad

我有一个导航控制器。我先推了一个VC，然后介绍了12个模态VC。现在我想弹出到根视图控制器。我怎样才能做到这一点？请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:58:40.583

您将需要关闭您呈现的 12 个模态视图。popViewController 或 popToRootViewController 将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T17:20:52.507

关闭您的模态视图以进入根视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T16:49:44.267

抱歉，我不确定我是否正确理解了您的问题。但是 UINavigationController 的
- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated
你在搜索什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:59:37.637

如果您有导航控制器并希望享受在单个命令中弹出多个级别的好处，那么您应该使用`pushViewController`（或推送转场）而不是`presentViewController`（或模态转场）。

正如其他人指出的那样，如果您正在纠正对后续控制器的推送，那么您可以通过以下方式弹出：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T17:59:11.617

告诉推送的 VC 到`dismissViewControllerAnimated:completion:`. 这将解雇*所有*提交的 VC。现在您可以弹出推送的 VC。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T18:07:56.563

在 AppDelegate 的实例变量中保留第一个 NavigationController。在 AppDelegate.h

```
@property (nonatomic, retain) UINavigationController *navigationControllerFirst; 
```

在 RootViewController viewDidLoad 中添加以下内容。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    app.navigationControllerFirst = self.navigationController;
} 
```

然后，为了实现你想要的，在第 12 个呈现的模式中添加以下函数以返回到 RootViewController。

```
- (IBAction)GoToHome:(id)sender {
    AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [app.navigationControllerFirst dismissViewControllerAnimated:YES completion:^{
        [app.navigationControllerFirst popToRootViewControllerAnimated:YES];
    }];
} 
```

# c++ - 为什么 std::function 不是有效的模板参数，而函数指针是？

> ID：13661391
> 
> 赞同：21
> 
> 时间：2012-12-01T16:40:04.790
> 
> 标签：c++, templates, c++11, function-pointers, std-function

我已经定义了名为的类模板`CallBackAtInit`，其唯一目的是在其初始化（构造函数）时调用一个函数。该函数在模板参数中指定。问题是模板不接受`std::function`作为参数；但他们接受函数指针。为什么？

这是我的代码：

```
#include <iostream>
#include <functional>

/* Does not work:*/     template <typename return_type, typename arg_type, std::function<return_type(arg_type)> call_back>
/* Work fine: *///      template <typename return_type, typename arg_type, return_type(*call_back)(arg_type)>

class CallBackAtInit {
public:
    CallBackAtInit(arg_type arg)
    {
        call_back(arg);
    };
};

void printInt(int i);

class HoldInt : private CallBackAtInit<void, int, printInt> {
public:
    HoldInt(int integer)
    : CallBackAtInit(integer)
    {}
    // ...
};

int main(int argc, char** argv)
{
    HoldInt hi(10);
    return 0;
}

void printInt(int i)
{
    std::cout << i << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T16:49:19.970

模板定义的*参数*可以有四种：

*   只能接受*类型*（或*模板*类型）的参数。
*   只能接受*整数值*的参数。
*   只能接受*指向成员值的指针的参数*。
*   `std::nullptr_t`(C++11 起)

当您`std::function`在模板定义中提及时，它既不属于上述类别。模板不能接受*类型*，也不能接受*整数值*或*指向成员值的指针*。

当参数是*函数指针类型*时，它可以接受函数指针（与类型匹配的函数的地址），它只是一个整数值。请注意，地址始终是一个整数值。所以它属于第二类，这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T16:48:42.510

因为标准不允许：

> 14.1 模板参数
> 
> 4 非类型模板参数应具有以下类型之一（可选 cv 限定）：
> 
> — 整数或枚举类型，
> 
> — 指向对象的指针或指向函数的指针，
> 
> — 对对象的左值引用或对函数的左值引用，
> 
> — 指向成员的指针，
> 
> — std::nullptr_t。

# sql - 来自 Sybase 的神秘 SQL 错误（错误 -680）

> ID：13661392
> 
> 赞同：2
> 
> 时间：2012-12-01T16:40:05.503
> 
> 标签：sql, sqlanywhere, dynamic-queries

我尝试在 PHP 中针对 Sybase SQL-Anywhere 数据库运行动态生成的 SQL 查询，但出现以下错误：

> `Warning: sybase_query(): message: SQL Anywhere Error -680: Invalid expression in WHERE clause of Transact-SQL outer join (severity 16) in /path/to/file.php`

**SQL 查询字符串：**

```
SELECT DISTINCT v_InventoryMaster.INV_ScanCode, v_InventoryMaster.INV_ReceiptAlias 
FROM ecrs.v_InventoryMaster
WHERE ( v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = 6 
  )
  OR v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = 14 
  )
  OR v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = 25 
  )
  -- more OR clause subqueries with different ILD_DIS_FK values
)
ORDER BY v_InventoryMaster.INV_ScanCode 
```

我对 SQL 或与数据库的接口并不完全陌生，但这条消息让我很困惑。它声称`WHERE`子句中有一个无效的表达式，但我看不到查询的结构是如何非法的。我的猜测是错误涉及`OR`两个搜索结果的合并。

此外，通过运行这三个单独的查询并组合结果（在 Excel 中），返回正确的结果集：

**查询一：**

```
SELECT DISTINCT v_InventoryMaster.INV_ScanCode, v_InventoryMaster.INV_ReceiptAlias 
FROM ecrs.v_InventoryMaster
WHERE ( v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = 6 
  )
ORDER BY v_InventoryMaster.INV_ScanCode 
```

**查询 B**

```
SELECT DISTINCT v_InventoryMaster.INV_ScanCode, v_InventoryMaster.INV_ReceiptAlias 
FROM ecrs.v_InventoryMaster
WHERE ( v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = 14 
  )
ORDER BY v_InventoryMaster.INV_ScanCode 
```

**查询 C**

```
SELECT DISTINCT v_InventoryMaster.INV_ScanCode, v_InventoryMaster.INV_ReceiptAlias 
FROM ecrs.v_InventoryMaster
WHERE ( v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = 25 
  )
ORDER BY v_InventoryMaster.INV_ScanCode 
```

为了澄清我想要的返回结果：

![在此处输入图像描述](../Images/9093ac8c37c9eb390625c346d69cf66d.png)

关于[Sybase 文档](http://dcx.sybase.com/1100/en/saerrors_en11/errm680.html)`error -680`的内容如下：

> 使用 Transact-SQL 语法的查询的 WHERE 子句中的表达式包含将提供 NULL 的表中的列与子查询或引用另一个表中的列的表达式进行比较。

1.  原始 SQL 查询有什么无效之处？

2.  记录在案的解释是什么意思？

3.  如何编辑原始 SQL 查询以获得所需的结果？

请注意，由于此查询是动态生成的，我想知道如何更改子句之间的`OR`语句：

语句结构：

```
 v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = value -- value dynamically chosen by user
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:22:17.967

“NOT IN”查询非常昂贵，特别是如果您像示例中那样应用它 3 次以上。我会旋转这个与使用“NOT IN”查询略有不同。我会离开加入并寻找任何为 NULL 的条目（即：未找到），但至少有一个具有条件的条目......

```
SELECT DISTINCT 
      vIM.INV_ScanCode, 
      vIM.INV_ReceiptAlias 
   FROM
      ecrs.v_InventoryMaster vIM
         LEFT JOIN ecrs.StockInventoryLinkDiscounts SILD6
            ON vIM.INV_PK = SILD6.ILD_INV_FK
            AND SILD6.ILD_DIS_FK = 6 
         LEFT JOIN ecrs.StockInventoryLinkDiscounts SILD14
            ON vIM.INV_PK = SILD14.ILD_INV_FK
            AND SILD14.ILD_DIS_FK = 14 
         LEFT JOIN ecrs.StockInventoryLinkDiscounts SILD25
            ON vIM.INV_PK = SILD25.ILD_INV_FK
            AND SILD25.ILD_DIS_FK = 25 
   WHERE
          (    SILD6.ILD_INV_FK IS NULL
            OR SILD14.ILD_INV_FK IS NULL
            OR SILD25.ILD_INV_FK IS NULL )
      AND (  case when SILD6.ILD_INV_FK IS NULL THEN 0 ELSE 1 end
           + case when SILD14.ILD_INV_FK IS NULL THEN 0 ELSE 1 end
           + case when SILD25.ILD_INV_FK IS NULL THEN 0 ELSE 1 end ) > 0
   ORDER BY 
      vIM.INV_ScanCode 
```

由于您的每个标准都是基于 PK 条目的 NOT IN，因此我只使用了一次库存主控。然后，对该外键匹配和相应的“DIS_FK”ID（分别为 6、14、25）进行 LEFT-JOIN 到库存链接折扣（SILD 别名）。

所以，现在，假设特定库存项目在 (SILD) 级别有 10 个折扣，包括 ID 1、6、10、11、22、25、等等、等等……此表将加入以查找匹配项同时为 6 和 25（通过不同的别名）找到 14 的一个。从你的场景中，你会想要这个条目。

这将我们带到 WHERE 子句。对于这一个库存项目，我想确保至少有一个条目为 NULL（即：折扣 14），并且至少有一个项目存在（即：6 和 25）。

现在，如果库存主数据有 1、5、12 的折扣，它将被忽略，因为不会发现 6、14 或 25 中的 NONE 从未考虑 WHERE 子句的其余部分。

您可以根据需要继续添加尽可能多的 (SILD) 实例，并保持模式继续运行，只需使用（正如我所拥有的）不同的别名来知道您指的是哪个。

WHERE 子句甚至可以更简化为以下内容

```
 WHERE
      (  case when SILD6.ILD_INV_FK IS NULL THEN 0 ELSE 1 end
           + case when SILD14.ILD_INV_FK IS NULL THEN 0 ELSE 1 end
           + case when SILD25.ILD_INV_FK IS NULL THEN 0 ELSE 1 end ) between 1 and 2 
```

因此，这样，您至少有一个条件符合条件，但最多比您的所有条件少 1 个。在此示例中，您有 3 个条件，因此 1 OR 2 将是有效的，零失败，三个失败......

如果您有 6 个标准，那么在 1 到 5 之间...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T17:06:53.187

您可以简单地替换片段：

```
v_InventoryMaster.INV_PK NOT IN (
    SELECT DISTINCT v_InventoryMaster.INV_PK 
    FROM ecrs.v_InventoryMaster, ecrs.StockInventoryLinkDiscounts
    WHERE v_InventoryMaster.INV_PK = StockInventoryLinkDiscounts.ILD_INV_FK
    AND StockInventoryLinkDiscounts.ILD_DIS_FK = value -- value dynamically chosen by user
  ) 
```

经过：

```
 NOT EXISTS (
    SELECT * 
    FROM  ecrs.StockInventoryLinkDiscounts sild
    WHERE sild.ILD_INV_FK = tbl.INV_PK
    AND sild.ILD_DIS_FK = value -- value dynamically chosen by user
    --           ^^^^^ NOTE: this should probably be sild.ILD_DIS_PK
  ) 
```

是外部查询`tbl`的相关名称；外部查询将变为：

```
SELECT DISTINCT v_InventoryMaster.INV_ScanCode
      , v_InventoryMaster.INV_ReceiptAlias 
FROM ecrs.v_InventoryMaster tbl 
```

另请注意，我`ecrs.v_InventoryMaster`从子查询中删除了该表，因为它已经存在于外部查询中，并且会导致检查与外部查询已经找到的*完全相同的行。*

这将给出完整的查询：

```
SELECT DISTINCT v_InventoryMaster.INV_ScanCode
      , v_InventoryMaster.INV_ReceiptAlias 
FROM ecrs.v_InventoryMaster tbl
WHERE NOT EXISTS (
    SELECT * 
    FROM  ecrs.StockInventoryLinkDiscounts sild
    WHERE sild.ILD_INV_FK = tbl.INV_PK
    AND sild.ILD_DIS_FK = 6
  )
OR NOT EXISTS (
    SELECT * 
    FROM  ecrs.StockInventoryLinkDiscounts sild
    WHERE sild.ILD_INV_FK = tbl.INV_PK
    AND sild.ILD_DIS_FK = 14
  )
OR NOT EXISTS (
    SELECT * 
    FROM  ecrs.StockInventoryLinkDiscounts sild
    WHERE sild.ILD_INV_FK = tbl.INV_PK
    AND sild.ILD_DIS_FK = 25
  )
; 
```

我的猜测是解析器被对`ecrs.v_InventoryMaster`. 另一种可能性是范围表已满（如果您有很多子查询项）

# javascript - 设置页面上现有的工具提示和稍后加载的工具提示

> ID：13661397
> 
> 赞同：0
> 
> 时间：2012-12-01T16:40:32.133
> 
> 标签：javascript, jquery, events, coffeescript

我有以下 CoffeeScript：

```
$ ->
  $("[rel='tooltip']").tooltip
    html: false
    delay: { show: 500, hide: 100 }
    placement: 'bottom' 
```

这会在页面加载时设置[Twitter Bootstrap 工具提示。](http://twitter.github.com/bootstrap/javascript.html#tooltips)我的问题是我将 AJAX 链接加载到选项卡中，并且我需要在该 AJAX 加载的内容中设置工具提示。我认为解决方案是使用`on`，但我无法弄清楚要调用它的元素以及要使用的事件。我试过：

```
$(document).on 'ready', "[rel='tooltip']", ->
  console.log 'setting up tooltips' 
```

但是控制台消息从未出现，所以这似乎不起作用。

我想要一段代码来设置加载时页面上的任何工具提示，以及将来出现的任何工具提示。

**编辑：** [charlietfl 的回答](https://stackoverflow.com/a/13661456/38743)做到了！在我的`$ ->`回调之外，我放置了：

```
$(document).tooltip
  selector: "[rel='tooltip']"
  html: false
  delay: { show: 500, hide: 100 }
  placement: 'bottom' 
```

现在我已经在页面中的工具提示设置好了，并且出现在 AJAX 加载的选项卡中的新工具提示也设置好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:47:16.730

Bootstrap 已经内置了委派方法。使用该`selector`选项来委派代码运行时不存在的未来元素：

```
$(document).tooltip({
     selector: "[rel='tooltip']"
      /* other options*/
}) 
```

参考：http: [//twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:44:26.673

您可以设置一个全局 ajax 事件处理程序，例如[`ajaxSuccess()`](http://api.jquery.com/ajaxSuccess/)：

```
$(document).ajaxSuccess(function() {
    $("[rel='tooltip']").tooltip({ //... etc 
```

这将在每次新的 ajax 调用成功时运行回调并附加工具提示。

# asp.net-mvc-4 - DropCreateDatabaseIfModelChanges（）不起作用

> ID：13661404
> 
> 赞同：4
> 
> 时间：2012-12-01T16:41:36.327
> 
> 标签：asp.net-mvc-4

我正在使用带有 EF Code First 5 的 MVC 4。我有点新，所以我只是从默认模板创建一个项目。

该项目正在与数据库对话，并且记录正在持久化。我们在工作中使用 DropCreateDatabaseIfModelChanges，我正在尝试让它与默认模板项目一起使用。我在模板项目的 SimpleMembershipInitializer 中找到了 SetInitializer 调用，并且一直在尝试使用它：

```
 Database.SetInitializer<NPContext>(new DropCreateDatabaseIfModelChanges<NPContext>()); 
```

代替

```
 Database.SetInitializer<NPContext>(null); 
```

它不起作用 - 信息仍将保留在数据库中，但不会被删除并使用新模式重新创建。我还尝试在 Application_Start() 中设置初始化程序。在调试模式下，我没有崩溃或可见错误。

我对设置我正在使用的工具不是非常熟悉，我尝试四处寻找设置数据库权限（我使用的是 SQLEXPRESS，但我确实有 SQL Management Studio 2012），但不确定用户会做什么是或设置什么权限。

谁能引导我朝着正确的方向前进？在这一点上，我正在旋转我的轮子并浪费时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:13:07.050

Here is how I do this in my application using `Application_Start()`. First, I have an initializer class that handles seeding my database when it is recreated:

```
public class MyContextInitializer : DropCreateDatabaseIfModelChanges<MyContext>
{
    // Seed your database or anything else you want to do
} 
```

Then in `Application_Start()` set your initializer:

```
Database.SetInitializer(new MyContextInitializer()); 
```

# php - 拒绝访问 PHP 文件 (Nginx)

> ID：13661406
> 
> 赞同：6
> 
> 时间：2012-12-01T16:41:45.390
> 
> 标签：php, linux, ubuntu, nginx, webserver

我希望 Nginx 拒绝访问特定的 PHP 文件，我们称之为它`donotexposeme.php`，但它似乎不起作用，PHP 脚本照常运行。这是我在配置文件中的内容：

```
location / {
    root /var/www/public_html;
    index index.php;
}

location ~ \.php$ {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME /var/www/public_html$fastcgi_script_name;
    include fastcgi_params;
}

location /donotexposeme.php {
    deny all;
} 
```

当然，我每次编辑配置时都会这样做`sudo service nginx reload`（或）。`restart`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T17:02:15.653

可以在这里找到 nginx 确定哪个位置匹配的顺序：

[http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

使用其中任何一个都将在任何其他正则表达式之前匹配：

```
location = /donotexposeme.php 
```

或者

```
location ^~ /donotexposeme\.php 
```

第一个是完全匹配，而后者是正则表达式前缀匹配。

# wpf - WPF动态图像未出现

> ID：13661408
> 
> 赞同：0
> 
> 时间：2012-12-01T16:41:51.043
> 
> 标签：wpf, vb.net, image, bitmap

经过大量研究，我被困住了，因为我无法让图像动态显示。

这与这个问题几乎相同：[Dynamic loading of images in WPF](https://stackoverflow.com/questions/569561/dynamic-loading-of-images-in-wpf)

这是我目前的实际代码

```
Dim logo As New Image
        Dim logoSource As New BitmapImage
        logoSource.BeginInit()
        logoSource.UriSource = New Uri("../../Images/CarpeDiemLogo.gif", UriKind.Relative)
        logoSource.CacheOption = BitmapCacheOption.OnLoad
        logoSource.EndInit()

        logo.Height = 109
        logo.Width = 172
        logo.HorizontalAlignment = Windows.HorizontalAlignment.Right
        logo.VerticalAlignment = Windows.VerticalAlignment.Top
        logo.Source = logoSource
        logo.Stretch = Stretch.Uniform
g.Children.Add(logo)'Where g is a grid 
```

如您所见，它非常相似，但我遇到了问题。我正在尝试将图像添加到用作标题模板的用户控件中，以便使用此打印引擎进行打印：http: [//www.codeproject.com/Articles/238135/WPF-Print-Engine-Part-I](http://www.codeproject.com/Articles/238135/WPF-Print-Engine-Part-I)

在打印引擎中的某个时刻，它会通过此行代码

```
var header = XamlReader.Parse(PrintTableDefination.HeaderTemplate) as FrameworkElement; 
```

如果 logoSource.CacheOption = BitmapCacheOption.OnLoad 没有注释，它会告诉我“'System.Windows.Media.Imaging.BitmapImage'的初始化引发了异常'行和行位置 826。”

但是，如果该行被注释，它会通过但不显示图像。

有什么我做错了吗？Xaml 阅读器的局限性？我已经搜索并尝试了不同的方法来动态创建图像，但没有一个加载它。

任何建议都会被考虑和尝试。我此刻很绝望……

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:11:33.070

我最终修改了打印引擎的源代码，并将标题传递给打印标题的函数，我将替换在标题模板中放置的标签内容中的“@title”。

可悲的是，这并没有回答最初的问题，但对我来说这是一种解决方法。

# php - XML 文件上的多个 PHP foreach 循环保留了先前 foreach 循环中的数据

> ID：13661412
> 
> 赞同：0
> 
> 时间：2012-12-01T16:42:40.527
> 
> 标签：php, xml, if-statement, foreach

我目前正在使用 PHP 将一个 xml 文件拆分为多个较小的文件。为此，我从一组标题创建新的 xml 文件，然后使用 foreach 循环遍历原始 xml 文件，并使用 if 语句检查每个“产品”的“子类别”是否与其中一个匹配相关文件，然后在 if 语句中添加相关数据。

我的问题是第一个文件只包含相关数据，但之后的每个文件都包含来自先前已填充文件的数据以及它自己的数据。

下面的代码显示了这里的工作 - 我目前对每个子类别都有单独的 foreach 循环，但我不知道为什么，例如，搜索 subcategory3 会选择 subcategory1、subcategory2 和 subcategory3（尽管我可能遗漏了一些东西相当明显！）...

```
foreach( $xml->product as $product )
{
    // Look for different subcategories
    if (strpos($product->category ,'subcategory1') !== false)
    {
        // write data to xml file and save
        $root = $xmlFile->createElement("product");
        $root = $xmlFile->appendChild($root);

        // These lines are repeated for the various nodes
        $xml_node = $xmlFile->createElement("node1");
        $xml_node = $root->appendChild($xml_node);
        $node1Text = $xmlFile->createTextNode($product->node1);
        $node1Text = $xml_node->appendChild($node1Text);

        // Re-save the xml file
        $xmlFile->save("file.xml");
    }
} 
```

任何帮助将不胜感激 - 在此先感谢各位！

哦，我还简要地尝试了一些子类别的 foreach 循环，并为不同的子类别使用了 if 和 elseif，但得到了相同的结果..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:56:59.367

好的，我通过随机尝试解决了这个问题 - 在任何 foreach 循环提取 xml 数据之前，我已经在标题数组上使用 foreach 创建了新的 xml 文件。但是，当我删除循环以创建文件并将它们单独放在循环之前以提取数据时，问题就消失了。在我看来这似乎不合逻辑，但显然就是这样！

# java - java.io.IOException 使用 com.jexcel.util.ExcelAdapter 在 java 中部署在 linux

> ID：13661413
> 
> 赞同：0
> 
> 时间：2012-12-01T16:42:41.243
> 
> 标签：java, linux, ioexception

作为背景，我正在使用**com.jexcel.util.ExcelAdapter**对通过 jasperreports 生成的 Excel 文件进行密码保护。这目前在 Windows 中执行时工作得很好，但现在当我在 linux 服务器中执行我的 java 代码时导致错误。

它说 ：

```
java.io.IOException: Cannot run program "cmd": java.io.IOException: error=2, No such file or directory 
  at java.lang.ProcessBuilder.start(Unknown Source)
  at java.lang.Runtime.exec(Unknown Source)
  at java.lang.Runtime.exec(Unknown Source)
  at java.lang.Runtime.exec(Unknown Source)
  at com.jexcel.util.ExcelAdapter.setPasswordXlsFile(ExcelAdapter.java:65) 
```

请帮忙。我正在使用 linux konsole 执行我的代码`java -jar PassProtect.jar`

我找到了这些链接：

[java中受密码保护的xls/xlsx文件](https://stackoverflow.com/questions/11170363/password-protected-xls-xlsx-file-in-java)

[使用 apache poi 创建受密码保护的 excel 文件？](https://stackoverflow.com/questions/8817290/create-a-password-protected-excel-file-using-apache-poi?lq=1)

两人都说**Apache POI**和**JExcel Api**都没有传递保护现有 excel 文件的功能（他们所能做的就是写保护 excel 工作表）。我已经知道这个可悲的事实。:(

**com.jexcel.util.ExcelAdapter**实际上为我做了诀窍，它确实可以通过保护整个工作簿（因此，如果您不需要在 linux 服务器上执行代码，请尝试使用它，因为这只有效在窗户上）。这就是问题所在，我需要在 linux 中执行我的代码，如上所述，ExcelUtil 无法为我做到这一点。你知道任何类似于 ExcelUtil 但可以在 linux 上运行的东西吗？

我不能使用像**Aspose**这样的商业软件。我也不能将文件保存在受密码保护的 zip 文件中，因为我需要将 excel 文件传输到 ftp 服务器，而且我需要通过电子邮件发送，如果我将其存储在 zip 文件中，这是不可能的（是吗？我无法发送或传输 zip 文件本身，因为收件人会期待 .xls 文件）。

请帮我。是否有任何方法或任何 API 或任何示例代码可以密码保护 linux 接受的文件？到目前为止，我的想法已经用完了（搜索结果都在说同样的事情）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:55:12.957

不确定，但从异常看来，适配器似乎正在尝试执行 Windows 命令外壳“cmd.exe”，这不太可能在任何不是 Windows 的操作系统下工作......也许你应该尝试不同的方法，如果您的应用程序需要在 linux 下运行。作为 Apache 项目的一部分，有一些 Java 库可用于处理办公文档。看看[http://poi.apache.org/](http://poi.apache.org/)

# iphone - 模型呈现 12 个视图控制器，现在关闭到特定的 VC，我该怎么做

> ID：13661415
> 
> 赞同：-2
> 
> 时间：2012-12-01T16:42:47.683
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [如何在第一次推送 vc 然后呈现模态 vc 12 次时弹出？](https://stackoverflow.com/questions/13661388/how-to-pop-when-first-pushed-vc-then-presented-modal-vc-12-times)

我是模型（呈现）12 个视图控制器，现在我想解雇一个特定的 VC，我该怎么做。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:25:00.137

关闭您的模态视图以到达根视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:58:43.423

您可以像下面这样关闭尽可能多的控制器，例如：下面的代码将关闭 2 个视图控制器，只需添加 parentviewontroller：

```
[[self parentViewController] dismissModalViewControllerAnimated:animated]; //dismiss 2 viewcontrollers

[[self parentViewController] parentViewController] dismissModalViewControllerAnimated:animated]; //dismiss 3 viewcontrollers 
```

看看这个：[http ://www.youtube.com/watch?v=cKV5csbueHA](http://www.youtube.com/watch?v=cKV5csbueHA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:37:56.103

如果你想一步完成，那么你必须从你想返回的控制器调用dismissViewControllerAnimated:completion:。这将关闭链中在它之后出现的所有控制器。如果您需要通过在最后一个控制器中的按钮单击（或其他用户交互）来执行此操作，那么您可能必须发送一个 NSNotification ，您想要返回的控制器，侦听并采取行动以解除所有的控制器。

# javascript - 设置属性后如何更新对话窗口？

> ID：13661416
> 
> 赞同：0
> 
> 时间：2012-12-01T16:42:49.040
> 
> 标签：javascript, firefox-addon

在我的 Firefox 插件中，我有一个小的非模态窗口在用户浏览时保持打开状态。该插件还有一个工具栏。当按下工具栏上的按钮时，会调用一个函数来设置窗口中某些属性的值。

现在，在我的代码中，我可以很好地调用该函数，但窗口永远不会改变。

`onload`但是，我用侦听器调用相同的函数，它在那里工作正常。我`alert`在函数中放了一个，它确实被调用了，但更改从未显示在窗口中。

如何确保更改显示在我的窗口上？这是我的一些示例代码：

```
 var windowManager = Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator);
    var mywindow = windowManager.getMostRecentWindow('mywindow');
    if (mywindow) {
        alert("found it!");
        var thislabel = document.getElementById("mylabel");
        thislabel.setAttribute("label", "New Text");
    } else { 
        alert("The window is not open.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:49:47.923

我在这里猜测，但也许您需要访问正确的文档？

```
var thislabel = mywindow.document.getElementById("mylabel");

// alert something if the element was found
thislabel !== null && alert('found'); 
```

# java - EJB3.0/JPA entitybeans之间的多对多关系

> ID：13661422
> 
> 赞同：1
> 
> 时间：2012-12-01T16:43:23.237
> 
> 标签：java, database, jakarta-ee, jpa, ejb-3.0

我正在使用 Java EE JSP/EJB3，但在实现表之间的关系时遇到问题。

作为解释我的问题的测试示例，我想出了一个汽车模型和一个品牌关系。在此 Web 应用程序中，用户首先创建品牌。然后创造汽车，因为没有一个或多个品牌就不可能存在汽车。一个品牌可以拥有许多汽车，而汽车可以属于多个品牌。此外，我希望从 Brand 我可以访问像以下 brand.cars 这样的汽车，从 Cars 访问像 car.brands 这样的品牌。而这一切都是由 Car 驱动的，因为它是最后创建的。

我不知道上述推理是否是实现这一点的最佳方式。这个想法是能够以更少的问题访问两种方式。

```
public class Brand implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id")
    private long id;

    @Column(name="brand_name")
    private String brand_name;

    @ManyToMany(mappedBy="cars") 
    private List<Car> cars;
} 
```

以下是汽车实体 bean：

```
public class Car implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id")
    private long id;

   @JoinTable(name = "CarBrand",
       joinColumns =
       @JoinColumn(name = "CAR_ID", referencedColumnName = "id"),
       inverseJoinColumns =
       @JoinColumn(name = "BRAND_ID", referencedColumnName = "id"))
   private List<Brand> brands;
} 
```

我设法创建了一个品牌，但是当我尝试创建具有特定品牌的汽车时，它给了我以下信息

```
WARNING: Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLIntegrityConstraintViolationException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL121201171525140' defined on 'BRAND'.
Error Code: -1
Call: INSERT INTO Brand 
```

我究竟做错了什么 ？

# c++ - 头文件中的类声明和定义是否在每个包含上编译？

> ID：13661426
> 
> 赞同：2
> 
> 时间：2012-12-01T16:43:43.460
> 
> 标签：c++, compilation, header-files

如果我**没有**将类声明和定义分开，而是将我的类定义放在头文件中，那么是否会为包含该头文件的每个源文件重新编译此定义代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T16:48:04.303

它为每个[翻译单元](http://en.wikipedia.org/wiki/Translation_unit_%28programming%29)编译一次（然后从中构建目标文件）。除非您在编译器中使用某种形式的预编译头功能。

您通常在标题中放置的多重包含保护是为了避免仅在同一个翻译单元中进行多次编译。除非标头的编译结果已经被编译器的预编译标头机制存储在某个地方，否则标头将需要在下一个翻译单元中再次编译。

这就是为什么 C++ 代码的编译速度往往比 C 代码慢的原因之一，以及为什么正确使用前向声明和避免不需要的`#include`语句很重要的原因之一。我已经看到通过使用前向声明而不是包含整个标题来将构建时间缩短一半的情况。

# python - Django/Python：如何将整数转换为等效的枚举字符串？

> ID：13661427
> 
> 赞同：3
> 
> 时间：2012-12-01T16:43:48.297
> 
> 标签：python, django

> **可能重复：**
> [Django 打印选择值](https://stackoverflow.com/questions/4274243/django-print-choices-value)

在其中一个模型中的 Django 中，我有以下枚举：

```
PRIORITY = (
        ('2',     _(u'High')),
        ('1',   _(u'Medium')),
        ('0',      _(u'Low')),
    )

priority = models.CharField(max_length=1, choices=PRIORITY, default='1') 
```

将优先级发送给模板时，该值仍然是整数，这不太好。我想用文字而不是数字来显示优先级。

```
context = Context({'priority':self.priority}) 
```

有没有办法在将优先级发送到模板之前不使用任何 if 语句将优先级转换为实际字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T16:52:31.877

是的，根据[文档](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display)，您可以获得这样的人类可读值：

```
context.get_priority_display() 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-01T16:52:45.053

左边的值是 Django 用来存储在数据库中的值。它不必是整数。只需使两个值相同：

```
PRIORITY = (
        ('high',     _(u'High')),
        ('Medium',   _(u'Medium')),
        ('Low',      _(u'Low')),
    ) 
```

# java - 在 | 上拆分字符串 Java中的（管道）

> ID：13661433
> 
> 赞同：4
> 
> 时间：2012-12-01T16:44:33.647
> 
> 标签：java, regex, string, split

我有以下文字：`ARIYALUR:ARIYALUR|CHENNAI:CHENNAI|COIMBATORE:COIMBATORE|CUDDALORE:CUDDALORE|DINDIGUL:DINDIGUL|ERODE:ERODE|KANCHEEPURAM:KANCHEEPURAM|KANYAKUMARI:KANYAKUMARI|KRISHNAGIRI:KRISHNAGIRI|MADURAI:MADURAI|NAMAKKAL:NAMAKKAL|NILGIRIS:NILGIRIS|PERAMBALUR:PERAMBALUR|PONDICHERRY:PONDICHERRY|SALEM:SALEM|THANJAVUR:THANJAVUR|THENI:THENI|THIRUVALLUR:THIRUVALLUR|THOOTHUKUDI:THOOTHUKUDI|TIRUNELVELI:TIRUNELVELI|VELLORE:VELLORE|VILLUPURAM:VILLUPURAM|VIRUDHUNAGAR:VIRUDHUNAGAR|`

我试图做一个`split("|")`，但我的数组是由单个字符而不是每个区组成的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T16:46:02.977

`|`是正则表达式中的特殊符号。改为使用`\\|`。

我将解释为什么我附加了 2 个斜杠。为了逃避`|`，我需要`\|`。但是，要表示字符串`\|`,`"\\|"`是必需的，因为`\`它本身需要在字符串横向进行转义。

而且，正如 xagyg 在评论中指出的那样， split 会将参数视为正则表达式。它不会被视为纯字符串。

在这个用例中，您可能有兴趣了解[Pattern.quote](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)。你可以做到`Pattern.quote("|")`。这样，任何字符都不会被视为特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:59:41.817

您需要在代表的元字符之前使用转义`|`字符`OR`。**此外，由于您需要将拆分中的正则表达式作为字符串传递，因此您还需要转义转义字符。**

试试下面：

```
 String str = "ARIYALUR:ARIYALUR|CHENNAI:CHENNAI|COIMBATORE:COIMBATORE|CUDDALORE:CUDDALORE|DINDIGUL:DINDIGUL|ERODE:ERODE|KANCHEEPURAM:KANCHEEPURAM|KANYAKUMARI:KANYAKUMARI|KRISHNAGIRI:KRISHNAGIRI|MADURAI:MADURAI|NAMAKKAL:NAMAKKAL|NILGIRIS:NILGIRIS|PERAMBALUR:PERAMBALUR|PONDICHERRY:PONDICHERRY|SALEM:SALEM|THANJAVUR:THANJAVUR|THENI:THENI|THIRUVALLUR:THIRUVALLUR|THOOTHUKUDI:THOOTHUKUDI|TIRUNELVELI:TIRUNELVELI|VELLORE:VELLORE|VILLUPURAM:VILLUPURAM|VIRUDHUNAGAR:VIRUDHUNAGAR|";
    String [] tokens = str.split("\\|"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-05T14:23:34.873

```
public static String[] splitWord(String x){
    String[] j = new String [200];
    for(int i=0;i<x.split("\|").length;i++){
        j[i] = x.split("\|")[i];
    }
    return j;
} 
```

我为这些类型的情况想出了这种方法。要使用它，请调用该方法并指定您需要访问的单词：

```
Classname.splitWord(String)[word in array]; 
```

# azure - Windows Azure - 直接使用存储服务对来自远程客户端的操作运行逻辑

> ID：13661435
> 
> 赞同：0
> 
> 时间：2012-12-01T16:44:43.957
> 
> 标签：azure, azure-storage, azure-table-storage, azure-blob-storage

设计一个 Azure 应用程序，其中远程客户端将以 ~1 写入/秒的频率“流式传输”数据/图像。数据将进入表存储，图像将进入 Blob 存储。

我可能想在这些写入被接受之前运行逻辑。例如，限制写入频率或在出现错误或篡改或其他支持操作（如缩略图、服务总线使用或任何事情）的情况下验证数据。

一种选择是通过在工作角色上运行的 REST 服务来管道所有操作。该服务会将数据推送到存储中，并执行所需的操作。然而，鉴于客户端可以直接访问存储服务（共享访问签名保护访问），这似乎是一个不必要的瓶颈，尽管可以增加更多。此外，如果有机会将这种逻辑推到其他地方，那么拥有一个角色会增加成本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:22:24.533

如果您的远程客户端具有有效的 SAS，他们可以根据 SAS 中定义的内容（读取、写入、删除......）对资源执行任何他们想要的操作。无法在存储级别添加任何额外的逻辑。

您可以使用 Windows Azure 网站：

1.  您可以使用充当 Blob/表和队列服务外观的网站。这样您就可以控制访问这些服务的方式。您的远程客户端不会直接访问存储服务。
2.  您可以使用网站来分发 SAS。这将允许您的客户直接访问存储服务，同时您的网站控制他们是否以及多长时间可以访问存储服务。但请记住，即使您分发 SAS 1 分钟，在那一分钟内，他们也可以使用 SAS 中定义的权限做任何他们想做的事情。如果您想做诸如验证之类的事情...，这对您来说不是最佳选择。

与工人角色相比，网站真的很便宜（甚至是免费的）。

# c++ - 分叉进程的零星堆栈指针分段错误

> ID：13661437
> 
> 赞同：3
> 
> 时间：2012-12-01T16:44:50.463
> 
> 标签：c++, linux, process, embedded-linux

我正在尝试调试一个进程，该进程偶尔会在访问堆栈指针时出现分段错误。

用于在 main() 的第一行之前进行段错误的进程 { 现在段错误移动到该行的另一个位置。

如果它没有崩溃，那么该过程将无限期地继续正确运行。

我猜这与进程实例化的方式有关：

```
pid_t COsAbstraction::Start(const uint32_t coreId, const char* argv[])
{
    pid_t pid;
    sigset_t mask;
    sigset_t save;

    /*
     * Block SIGCHLD
     */
    sigemptyset(&mask);
    sigaddset(&mask, SIGCHLD);
    pthread_sigmask(SIG_BLOCK, &mask, &save);

    pid = fork();
    if(pid < 0)
    {
        _exit(false);
    }
    if (pid != 0)
    {
        // I am the parent
        pthread_sigmask(SIG_UNBLOCK, &save, NULL);
        return pid;;
    }
    // I am the child
    // Replace myself with the desired process
    execvp(argv[ 0 ],  const_cast<char**>(argv))

    _exit(0); 
```

}

崩溃代码（零星）：

```
(gdb) disassemble 
Dump of assembler code for function main:
0x0804c663 <main+0>:    lea    0x4(%esp),%ecx
0x0804c667 <main+4>:    and    $0xfffffff0,%esp
0x0804c66a <main+7>:    pushl  -0x4(%ecx)
0x0804c66d <main+10>:   push   %ebp
0x0804c66e <main+11>:   mov    %esp,%ebp
0x0804c670 <main+13>:   push   %edi
0x0804c671 <main+14>:   push   %esi
0x0804c672 <main+15>:   push   %ebx
0x0804c673 <main+16>:   push   %ecx
0x0804c674 <main+17>:   sub    $0x525a8,%esp
0x0804c67a <main+23>:   call   0x804a22e <__i686.get_pc_thunk.bx>
0x0804c67f <main+28>:   add    $0x6125,%ebx
0x0804c685 <main+34>:   mov    (%ecx),%eax
0x0804c687 <main+36>:   mov    %eax,-0x52578(%ebp)
0x0804c68d <main+42>:   mov    0x4(%ecx),%ecx
0x0804c690 <main+45>:   mov    %ecx,-0x5257c(%ebp)
0x0804c696 <main+51>:   movl   $0x0,-0x418(%ebp)
0x0804c6a0 <main+61>:   movl   $0x400,0x8(%esp)
0x0804c6a8 <main+69>:   movl   $0x0,0x4(%esp)
0x0804c6b0 <main+77>:   lea    -0x410(%ebp),%eax
0x0804c6b6 <main+83>:   mov    %eax,(%esp)
0x0804c6b9 <main+86>:   call   0x8049c4c <memset@plt>

(gdb) info registers 
eax            0xf746d564       -146352796
ecx            0xf746d4e0       -146352928
edx            0xf746d500       -146352896
ebx            0x444a7ff4       1145733108
esp            0xf741af10       0xf741af10
ebp            0xf746d4c8       0xf746d4c8
esi            0x8050b30        134548272
edi            0x8049d90        134520208
eip            0x804c67a        0x804c67a <main+23>
eflags         0x210282 [ SF IF RF ID ]
cs             0x23     35
ss             0x2b     43
ds             0x2b     43
es             0x2b     43
fs             0x0      0 
```

此代码在 24 核 RedHat Linux 2.6 设备上运行。

更新：

原来崩溃与调用过程无关！简单的“hello world”在 shell 执行数百次时也会崩溃：

```
#include <stdio.h>
int main(int argc, char* argv[])
{
    char a[100*1024];
    a[0] = '1';
    printf("Hello There!\n");
    return 0;
} 
```

我应该提交一个新问题还是修改这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:07:54.233

C 程序崩溃是因为您正在退出程序堆栈。

关键是一个变量像

```
char a[100*1024]; 
```

在堆栈上分配，它的大小是有限的，当你指向数组的开头时，如果进程.

给你举个例子，我只是修改了代码，因为我在amd64上，所以我有

```
#include <stdio.h>
int main(int argc, char* argv[])
{
    char a[12*1024*1024];
    a[0] = '1';
    printf("Hello There!\n");
    return 0;
} 
```

所以我试图在堆栈中放入一个 12 MB 的变量。如您所见，堆栈的默认大小是 8MB，当我尝试执行它时，我得到了这个：

```
ottavio@magritte:/tmp$ ulimit -s
8192
ottavio@magritte:/tmp$ ./x 
Segmentation fault 
```

但是如果我增加堆栈大小，它会起作用

```
ottavio@magritte:/tmp$ ulimit -s 16384
ottavio@magritte:/tmp$ ./x 
Hello There!
ottavio@magritte:/tmp$ 
```

# c# - 如何判断我使用的是哪个 Bing 地图版本？

> ID：13661440
> 
> 赞同：0
> 
> 时间：2012-12-01T16:45:31.600
> 
> 标签：c#, windows-store-apps, bing-maps

我的 Bing 地图引用有问题吗？

在参考文献 | 添加参考，我添加1.0版本

但如果我看一下工具 | 扩展和更新 | 已安装 | SDK，它说它是版本 1.1.20120927.1

为什么编号不匹配？我是否以某种方式实际上没有引用最新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:42:00.250

SDK 中的版本号是正确的。参考面板中显示的数字具有误导性。它显示主要版本号，但没有告诉您次要版本。只要您只安装了一个版本的 Bing Maps 控件并且没有安装测试版，那么您就可以了，因为只会使用已安​​装的版本。如果您的应用程序试图引用未安装的旧版地图控件，则在编译时会出现错误或在引用上看到警告图标。

# nhibernate - 使用 NHibernate-Futures 获取多对一

> ID：13661443
> 
> 赞同：3
> 
> 时间：2012-12-01T16:45:41.743
> 
> 标签：nhibernate, nhibernate-futures

我有一个类似于下面的类图。

我正在使用这个示例，因为它比解释我正在处理的域更简单。

```
public class Cheque {

   public FinanceAccount Account {get;set;}

   public Customer customer {get;set;}

   public Branch Branch {get;set;}
} 
```

一个`Cheque`实体`ManyToOne`与三个实体的其余部分有关系。

现在的关系**不是双向的**。

如何编写一个有效的期货查询来获取一个列表，`Cheques`这样我就不会得到 N+1 来加载`Account`, `Customer`, `Branch`？

我尝试过使用左连接，但想知道这是否可以使用简化的 SQL 来完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:32:34.967

我们可以达到所需的结果（没有 N+1）——但 Futures 不会是正确的 NHibernate 功能。我们可以使用它们，但获取`many-to-one`实体的技巧在别处（见下文）。此处所述的期货：[http](http://ayende.com/blog/3979/nhibernate-futures) ://ayende.com/blog/3979/nhibernate-futures 的意思是：

... Future() 和 FutureValue() 本质上是一种将**查询执行推迟**到以后执行的方式，此时 NHibernate 将获得有关应用程序应该做什么的更多信息，并相应地对其进行优化

所以我们可以把更多的查询放到一个批次中。查询可以是例如一组查询，结果是：

*   总检查
*   前 20 个检查预测
*   上周提取的最大金额
*   等等

因此，在这种情况下，我们可以将“不同”类型的查询放入`Future`.

但是要获取`many-to-one`没有 N+1 的实体 - 我们可以使用标准 Criteria API。因此，即使这些属性被映射为懒惰的选择作为获取：

```
<many-to-one name="Account" class="FinanceAccount" column="AccountId" 
       lazy="proxy" fetch="select"/> 
```

此标准将仅创建一个带有左连接的选择：

```
var list = session.CreateCriteria<Cheque>()
  .SetFetchMode("Account", NHibernate.FetchMode.Join)
  .SetFetchMode("customer", NHibernate.FetchMode.Join)
  .SetFetchMode("Branch", NHibernate.FetchMode.Join)
  .Future<Cheque>()
  // or
  // .List<Cheque>() ... will be the same right now
  ; 
```

这将导致只有一个 SQL 选择语句，加入 Check 及其引用属性。

# node.js - MongoDB 和 Node.js 中的动态查询

> ID：13661445
> 
> 赞同：6
> 
> 时间：2012-12-01T16:45:50.720
> 
> 标签：node.js, mongodb, express, mongodb-query

我正在使用后端的 Mongodb 开发 nodejs/express 应用程序。在我的一个 API 调用中，取决于特定查询字符串参数的存在或另一个我想使用 $gt 或 $lt 向 Mongodb 发出查询。

在某些情况下，我们想要比`tokenId`using $lt 少的东西，但在其他情况下，我们想要比`tokenId`using $gt 更大的东西。我们如何在不重复查询的情况下做到这一点？

这是一个示例查询：

```
collection.find({'film_id': {$in : genre}, '_id': {$lt: tokenId}}).sort({'_id': -1}).limit(25).toArray(function(error, films) 
```

有没有办法在不实际执行 2 个不同查询的情况下动态创建查询？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T17:13:33.277

以编程方式构建您的查询对象：

```
var query = {'film_id': {$in : genre}};
if (param) {
    query._id = {$lt: tokenId};
} else {
    query._id = {$gt: tokenId};
}
collection.find(query).sort({'_id': -1}).limit(25).toArray(function(error, films); 
```

**更新**

现在 Node.js 4+ 支持[计算属性名称](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)，您可以`query`一步创建：

```
var query = {
    film_id: {$in: genre},
    _id: {[param ? '$lt' : '$gt']: tokenId}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T20:15:58.010

上面的代码可能不起作用。上述动态查询将解析为以下 Ex。令牌是一个整数 35。

```
collection.find("_id":"{$gt: 35}")
          .sort({'_id': -1}).limit(25).toArray(function(error, films); 
```

导致错误

**正确的语法应该是：**

```
collection.find("_id":{$gt: 35}). 
```

双“”引号不应该在那里。

# sql - SQL 完整性约束 VarChar 比较

> ID：13661455
> 
> 赞同：1
> 
> 时间：2012-12-01T16:47:15.233
> 
> 标签：sql, oracle, plsql, dml

我在为表创建编写完整性约束检查时遇到了困难。以下是我的建表语句：

```
CREATE TABLE User (
UName VARCHAR(15) PRIMARY KEY,
FName VARCHAR(15),
LName VARCHAR(15)
); 
```

我正在寻找的完整性约束是 UName（用户名）不能包含名字和/或姓氏。

我可以在没有 PL/SQL 的情况下编写这个吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:07:33.420

是的，您需要将其定义为`TABLE CHECK CONSTRAINT`（而不是针对 UNAME 列，因为它引用同一表中的其他列），如下所示：

```
CREATE TABLE User
(
    UNAME VARCHAR(100),
    FNAME VARCHAR(100),
    LNAME VARCHAR(100),
    CONSTRAINT CHECK_USERS 
        CHECK(INSTR(UNAME, FNAME) = 0 AND INSTR(UNAME, LNAME) = 0)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:25:32.850

为了使 sql 更可靠，我建议使用大写。用户肯定会努力使登录看起来像姓/名，但我偶然发现了他们在名字/姓氏中使用第一个大写字母但用户名使用小写的情况，反之亦然。

所以考虑使用

```
CREATE TABLE User
(
    UNAME VARCHAR(100),
    FNAME VARCHAR(100),
    LNAME VARCHAR(100),
    CONSTRAINT CHECK_USERS 
        CHECK(INSTR(upper(UNAME), upper(FNAME)) = 0 AND INSTR(upper(UNAME), upper(LNAME)) = 0)
) 
```

# javascript - 在 Sublime Text 下获得完整的 JS 自动补全

> ID：13661462
> 
> 赞同：102
> 
> 时间：2012-12-01T16:48:13.860
> 
> 标签：javascript, sublimetext2

我刚刚在 Windows Vista 下安装了 Sublime Text，即使按照[这篇文章](https://stackoverflow.com/questions/10636410/modifying-sublime-text-2-for-js)中给出的建议，即显式设置`View > Syntax > JavaScript > JavaScript`，我也只能看到基于我之前输入的建议。我什至安装了[SublimeCodeIntel 插件](https://github.com/Kronuz/SublimeCodeIntel)，但无济于事。

据我了解，在我写“pars”的那一刻，我应该得到“parseFloat”和“parseInt”选项，就像在 Chrome 开发者工具中一样，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-16T22:45:34.183

建议（基本上）基于当前打开文件中的文本以及您定义的任何片段或完成（[ref](http://sublimetext.info/docs/en/extensibility/completions.html)）。如果您需要更多文字建议，我建议：

*   [为常用操作添加您自己的片段](https://tutsplus.com/lesson/your-first-snippet/)。
*   [为常用词添加您自己的补全](http://sublimetext.info/docs/en/extensibility/completions.html#example)。
*   通过[Package Control](https://tutsplus.com/lesson/package-control/)[添加其他人的代码片段](https://tutsplus.com/lesson/adding-snippets-through-package-control/)。
*   您可以[在 github 上找到更多片段](https://github.com/search?q=sublime%20javascript%20snippet&p=1&ref=searchbar&type=Repositories&l=)。
*   使用[Zen 编码](https://tutsplus.com/lesson/zen-coding-2/)（可通过[Package Control](https://tutsplus.com/lesson/package-control/)获得）或[Emmet](https://tutsplus.com/lesson/emmet/)。
*   还有各种包可以调整代码完成的工作方式。我喜欢[SublimeCodeIntel](https://github.com/SublimeCodeIntel/SublimeCodeIntel)，但请查看此问题的其他答案以获取更多选项。

作为旁注，我真的建议[安装 Package control](https://tutsplus.com/lesson/package-control/)以充分利用 Sublime 社区。上面的一些选项使用包控制。我还强烈推荐[tutsplus Sublime 教程视频](https://tutsplus.com/course/improve-workflow-in-sublime-text-2/)，其中包含有关在使用 Sublime 时提高效率的各种信息。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-06-01T13:59:10.667

Ternjs 是获取 JS 自动补全的新选择。[http://ternjs.net/](http://ternjs.net/)

**崇高插件**

Sublime Text 中维护得最好的 Tern 插件称为[“tern_for_sublime”](https://packagecontrol.io/packages/tern_for_sublime)

还有一个名为[“TernJS”](https://github.com/emmetio/sublime-tern)的旧插件。它没有维护，并且包含几个与性能相关的错误，这些错误会导致 Sublime Text 崩溃，因此请避免这种情况。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-04-08T14:33:49.460

如前所述，[tern.js](http://ternjs.net/)是一个新的且有前途的项目，其中包含用于 Sublime Text、Vim 和 Emacs 的插件。我在 Sublime 中使用[TernJS](http://emmet.io/blog/sublime-tern/)已经有一段时间了，我得到的建议比标准的要好得多：

![在此处输入图像描述](../Images/9d68eb11b6e9ba484c73e87ad09020db.png)

Tern 扫描项目中的所有 .js 文件。您可以通过在 .sublime-project 文件中添加“libs”来获得对 DOM、nodejs、jQuery 等的支持：

```
"ternjs": {
    "exclude": ["wordpress/**", "node_modules/**"],
    "libs": ["browser", "jquery"],
    "plugins": {
        "requirejs": {
            "baseURL": "./js"
        }
    }
} 
```

![在此处输入图像描述](../Images/06603ce1913bb6610c6b8c032441695e.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-04T14:51:54.967

有三种方法

*   使用 SublimeCodeIntel 插件

*   使用 CTags 插件

*   手动生成 .sublime-completion 文件

这篇博文（我的）详细描述了这些方法：http: [//opensourcehacker.com/2013/03/04/javascript-autocompletions-and-having-one-for-sublime-text-2/](http://opensourcehacker.com/2013/03/04/javascript-autocompletions-and-having-one-for-sublime-text-2/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-01-26T00:14:25.107

我开发了一个名为[JavaScript Enhancements](https://github.com/pichillilorenzo/JavaScriptEnhancements)的新插件，您可以在**Package Control**上找到它。它在底层使用[Flow](https://github.com/facebook/flow)（来自 Facebook 的 JavaScript 静态类型检查器）。

此外，它提供**智能 javascript 自动完成**（与我的其他插件 JavaScript Completions 相比）、**实时错误**、**代码重构**以及许多有关创建、开发和管理**javascript 项目的****功能**。

 **请参阅[Wiki](https://github.com/pichillilorenzo/JavaScriptEnhancements/wiki)以了解它提供的所有功能！

这个插件的介绍可以在这篇[css-tricks.com](https://css-tricks.com/)文章中找到：[将 Sublime Text 3 变成 JavaScript IDE](https://css-tricks.com/turn-sublime-text-3-into-a-javascript-ide/)

只是一些快速截图：

![](../Images/07fb5a255293fba0e748c283233eab37.png) ![](../Images/4730ee2e51d94266921c32c1f7287243.png) ![](../Images/5374795029a0b3923041f11cbf189c67.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-13T13:31:51.243

截至今天（2019 年 11 月），Microsoft 的**TypeScript 插件**可以满足 OP 的要求：[https](https://packagecontrol.io/packages/TypeScript) ://packagecontrol.io/packages/TypeScript 。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-09T18:26:55.660

检查片段是否具有`<tabTrigger>`以特殊字符开头的属性。如果这样做，它们将不会出现在自动完成框中。这是当前 Windows 上可用*jQuery*插件的问题。

有关更多详细信息，请参阅我[在此线程上的答案。](https://stackoverflow.com/a/16468494/1199685)**

# android - iOS 中的子 ViewController 与 Android 中的 Fragment 相同吗？

> ID：13661465
> 
> 赞同：2
> 
> 时间：2012-12-01T16:48:31.487
> 
> 标签：android, ios, design-patterns

在我当前的应用程序中，我想将 aa xib 文件用于屏幕的子部分，并在其他屏幕中重新使用它。我从 xib 加载了一个 UIView 并将其添加到另一个 UIView 中，该 UIView 将充当它的 VC。并且该视图将用作 UI 的片段以在多个地方使用。

但是，我发现这是一种打破 MVC 的权宜之计，为什么 View 处理 Controller 应该处理的内容，即使所有内容都由一个 VC 处理，该 VC 开始看起来像一个 GOD 对象。

然后我发现在 iOS5 中对于部分 UI 有一个子视图控制器的概念。有人用过吗？是不是类似于Android中fragments的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:51:28.157

是的，我用过它们，而且它们很容易使用，尤其是当你使用故事板时。它们是否像 Android 中的片段，我不能说。

在情节提要中，您只需添加一个容器视图（从对象列表中），这将自动创建一个嵌入到另一个控制器的嵌入segue，该控制器的视图将与容器视图的大小相同。当包含容器视图的控制器是时，该控制器将由系统实例化（您没有代码）。

# c++ - 拥有自己的链表的对象

> ID：13661469
> 
> 赞同：1
> 
> 时间：2012-12-01T16:49:08.787
> 
> 标签：c++, object, linked-list

我正在学习C++。我遇到了一个相当有趣的问题，我希望将他们的食物托盘存储在 Customer 类中。基本的想法是一个顾客可以有一个由饮料和食物组成的托盘。

我最初的想法是使用以下课程。

```
class Customer
{
private:
    std::string firstName;
    std::string lastName;
    int tablenumber;
    //LinkList<Tray> myTray = new LinkList<Tray>();
    //or
    //LinkList<Tray> myTray;
public:
    Customer();
    Customer(std::string sFirstName, std::string sLastName, 
        int sTableNumber);
    ~Customer(void); 
```

处理让对象在自身内部存储 Linklist 的正确方法是什么？那么在调用客户构造函数时，他们可以添加订单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:04:52.713

听起来您希望您的客户能够在食品托盘中放置许多食品。因此，持有某种食品容器（不一定是链表）并提供`Customer`类型方法来添加或删除食品是有意义的。这个容器将代表您正在谈论的托盘：

```
class Customer
{
private:
    std::string firstName;
    std::string lastName;
    LinkList<FoodItem> myTray;
public:
    AddFoodItemToTray(const FoodItem& item) { myTray.push(item);}
    RemoveFoodItemFromTray(const FoodItem& item) { myTray.remove(item=; } 
}; 
```

如果您希望您的`Customer`类可以从元素列表中初始化，那么您只需为此添加一个构造函数：

```
explicit Customer(const LinkList<FoodItem>& tray) : myTray(tray) {} 
```

最好将餐桌编号留给客户，让某种餐桌类知道它拥有哪些顾客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:56:32.660

在讨论细节之前，让我先解决一个更基本的问题。

考虑作为解决方案 并不**好。**`LinkList<Tray> myTray = new LinkList<Tray>();`

这样想， **每个**客户都会有**自己的**托盘。因此，您需要为每位客户提供一个新托盘。

请记住，类只是一个蓝图。

因此，`LinkList<Tray> myTray;`在对象的构造函数中，每次创建客户时分配一个新托盘。它看起来像：

```
Customer()
{
//other construction 
 myTray = new LinkList<Tray>();
} 
```

请注意，您现在必须像`LinkList<Tray> * myTray;`要动态分配列表一样声明它。

现在您可以`myTray`根据您的要求使用。例如。你可能喜欢打电话 `myTray.addToList(MyNewItem)`之类的。

**假设**：

当每个对象共享相同的值时，您将它们声明为`static`. 但是你提到`within a Customer class` **了他们** `food tray`，所以我假设这里不是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:56:58.623

编写另一个以托盘类型对象的链表作为参数的构造函数。

# android - Android 应用程序在 onLoadFinished() 上崩溃

> ID：13661474
> 
> 赞同：0
> 
> 时间：2012-12-01T16:49:27.293
> 
> 标签：android, android-cursorloader

我正在使用 SQLite 数据库来存储名为 Reservations 的对象，这些对象显示在 ListView 中。我曾经将光标与已弃用的函数 startManagingCursor() 一起使用，但当显示 ListView 的活动时，它会使我的应用程序崩溃。

所以我尝试使用 CursorLoaders 和 ContentProviders 来代替，我这样做了：

```
 package com.example.my.app;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.ListView;

public class FlightBook extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor>
{
    private ListView ReservationList = null;
    private Cursor c = null;
    private ReservationsBDD rdb = new ReservationsBDD(this);
    private SimpleCursorAdapter mAdapter;

    private static final int LOADER_ID = 0;
    private static final String[] PROJECTION = new String[] {MaBaseSQLite.getColReference(), MaBaseSQLite.getColLastname()};//{ "_id", "text_column" };
    private LoaderManager.LoaderCallbacks<Cursor> mCallbacks;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_flight_book);

        ReservationList = (ListView) findViewById(R.id.flightList);

        //Initialiser la base de données
        rdb.open();

        String[] from = { MaBaseSQLite.getColLastname() }; //{ "text_column" };
        int[] to = { R.id.reference_entry, R.id.lastname_entry }; //{ R.id.text_view };

        /* Display the bdd */
        //mAdapter = new SimpleCursorAdapter(this.getBaseContext(), R.layout.flight_book_list, c, from, to);

        mAdapter = new SimpleCursorAdapter(this, R.layout.flight_book_list, null, from, to, 0);
        mCallbacks = this;

        ReservationList.setAdapter(mAdapter);
        getSupportLoaderManager().initLoader(LOADER_ID, null, mCallbacks);

        //Gérer le clic simple sur un élément de la listView
        ReservationList.setOnItemClickListener(new OnItemClickListener() 
        {
            long selectedItemID = 0;
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
            {
                Reservation res = rdb.getReservationWithID(id);

                   //Afficher l'activité adéquate
                   Intent myIntent = new Intent(view.getContext(), ReservationInfo.class);
                   myIntent.putExtra("ReservationReference", res.getReference());
                   myIntent.putExtra("LastName", res.getLastname());
                   startActivityForResult(myIntent, 0);
            }
        });

        //Gérer le clic long sur un élément de la listView
        ReservationList.setOnItemLongClickListener (new OnItemLongClickListener() 
        {
            long selectedItemID = 0;

            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) 
            {
                //selectedItemID = ((View) parent.getItemAtPosition(position)).getId();
                return onLongListItemClick(view, position, id);
            }
            protected boolean onLongListItemClick(final View v, final int pos, long id) 
            {
               final String str=ReservationList.getItemAtPosition(pos).toString();
               Log.i("ListView", "onLongListItemClick string=" + str);
               AlertDialog.Builder builder = new AlertDialog.Builder(FlightBook.this);
               builder.setMessage("Delete this entry from Flight Book?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
               {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                       Log.i("ID",""+pos);
                       rdb.removeReservationWithID((int)mAdapter.getItemId(pos));
                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() 
               {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                       dialog.cancel();
                   }
               });
               AlertDialog alert = builder.create();
               alert.show();
               return true;
            }
        });
    }

    public void onPause()
    {
        super.onPause();
        mAdapter.notifyDataSetInvalidated();
        mAdapter.changeCursor(null);
    }

    public void onDestroy()
    {
        super.onDestroy();
        rdb.close();
    }

    public void onStart()
    {
        super.onStart();
    }

    public void onStop()
    {
        super.onStop();
    }

    public void onResume(Bundle savedInstanceState) 
    {
        super.onResume();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.activity_flight_book, menu);
        return true;
    }

    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) 
    {
        // TODO Auto-generated method stub
        return new CursorLoader(FlightBook.this, ReservationProvider.CONTENT_URI, PROJECTION, null, null, null);
    }

    //@Override -> won't work, says "must override a superclass method"
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) 
    {
        mAdapter.swapCursor(cursor);
    }

    //@Override -> won't work, says "must override a superclass method"
      public void onLoaderReset(Loader<Cursor> loader) 
      {
        mAdapter.swapCursor(null);
      }
} 
```

出于某种原因，我一直在调查，一旦我启动此活动，应用程序就会崩溃。

这是我的内容提供者：

```
package com.example.my.app;

import android.content.ContentProvider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;

public class ReservationProvider extends ContentProvider 
{
    private ReservationsBDD mDB;
    private static final String AUTHORITY = "com.example.my.app.ReservationProvider";
    public static final int RESERVATION = 100;
    public static final int RESERVATION_ID = 110;
    private static final String RESERVATIONS_BASE_PATH = "reservations";
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
            + "/" + RESERVATIONS_BASE_PATH);
    public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
            + "/mc-reservation";
    public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
            + "/mt-reservation";

    private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    static 
    {
        sURIMatcher.addURI(AUTHORITY, RESERVATIONS_BASE_PATH, RESERVATION);
        sURIMatcher.addURI(AUTHORITY, RESERVATIONS_BASE_PATH + "/#", RESERVATION_ID);
    }

    @Override
    public int delete(Uri arg0, String arg1, String[] arg2) 
    {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public String getType(Uri arg0) 
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Uri insert(Uri arg0, ContentValues arg1) 
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean onCreate() 
    {
        mDB = new ReservationsBDD(getContext());
        return true;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) 
    {
        SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
        queryBuilder.setTables(mDB.getMaBaseSQLite().TABLE_RESERVATION);
        int uriType = sURIMatcher.match(uri);
        switch (uriType) 
        {
            case RESERVATION_ID:
                queryBuilder.appendWhere(ReservationsBDD.COL_ID + "=" + uri.getLastPathSegment());
                break;
            case RESERVATION:
                // no filter
                break;
            default:
                throw new IllegalArgumentException("Unknown URI");
        }
        Cursor cursor = queryBuilder.query(mDB.getMaBaseSQLite().getReadableDatabase(), projection, selection, selectionArgs, null, null, sortOrder);
        cursor.setNotificationUri(getContext().getContentResolver(), uri);
        return cursor;
    }

    @Override
    public int update(Uri arg0, ContentValues arg1, String arg2, String[] arg3) 
    {
        // TODO Auto-generated method stub
        return 0;
    }

} 
```

我做错了什么？：（ 提前致谢。

PS：ReservationsBDD 是一个从 MaBaseSQLite 获取项目的 DAO，它是一个 SQLiteOpenHelper。

# python - 检查字符串是否在python中按字母顺序排列

> ID：13661479
> 
> 赞同：12
> 
> 时间：2012-12-01T16:50:13.507
> 
> 标签：python, string, sorting

我整理了以下代码来检查字符串/单词是否按字母顺序排列：

```
def isInAlphabeticalOrder(word):
    word1=sorted(word)
    word2=[]
    for i in word:
        word2.append(i)
    if word2 == word1:
        return True
    else:
        return False 
```

但我觉得除了将字符串转换为列表之外，必须有一种更有效的方法（更少的代码行）来检查。是不是有一个操作数可以按字母顺序对字符串进行排序而不将每个字符变成一个列表？任何人都可以提出更有效的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-01T17:08:18.163

这具有 O(n) 的优点（对字符串进行排序是 O(n log n)）。如果一个字符（或字符串）在 Python 中按字母顺序出现在另一个字符之前，则它“小于”另一个字符，因此为了查看字符串是否按字母顺序，我们只需要比较每对相邻字符即可。另外，请注意您使用 range(len(word) - 1) 而不是 range(len(word)) ，否则您将在循环的最后一次迭代中超出字符串的边界。

```
def isInAlphabeticalOrder(word):
    for i in range(len(word) - 1):
        if word[i] > word[i + 1]:
            return False
    return True 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-01T16:57:03.847

这是一种简单的（和 Python 惯用的）方法：

```
def isInAlphabeticalOrder(word):
    return word==''.join(sorted(word))

>>> isInAlphabeticalOrder('abc')
True
>>> isInAlphabeticalOrder('acb')    
False 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-03T09:01:01.200

这是最简单的：

```
def alphabetical(word):
    return list(word) == sorted(word) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-01T17:10:28.367

试试这个，作为一个单行：

```
all(x <= y for x, y in zip(word, word[1:])) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-01T16:55:41.830

你可以`generator`像这样在你的函数中使用： -

```
def isInAlphabeticalOrder(word):
    return all((word[i+1] >= word[i] for i in range(len(word) - 1))) 
```

生成器从给定范围中获取每个值`i`，并将该索引处的字符与前一个索引中的字符进行比较。并将所有比较结果传递给`all`函数，`True`如果所有值都是`True`.

```
>>> def isInAlphabeticalOrder(word):
        return all((word[i+1] >= word[i] for i in range(len(word) - 1)))

>>> isInAlphabeticalOrder("rohit")
False
>>> isInAlphabeticalOrder("aabc")
True
>>> isInAlphabeticalOrder("abc")
True 
```

* * *

当然那不考虑`case-insensitivity`。如果你想考虑它，那么将return语句更改为： -

```
return all((str.lower(word[i+1]) >= str.lower(word[i]) for i in range(len(word) - 1))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-05T04:10:16.317

几个答案已经解决了实际的字符串比较。但我想补充一点关于您的返回逻辑。

初学者编写如下代码是很常见的：

```
if something == somethingElse:
  return True
else:
  return False 
```

该代码总是可以像这样简化：

```
return something == somethingElse 
```

如果该代码一开始没有意义，它会读作“将某些内容与SomethingElse进行比较，并返回比较结果”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-12T08:32:04.570

如果单词按字母顺序排列，程序将返回 true，否则返回 false。第二个参数 wordList 初始化为 None 意味着程序将检查您输入的任何单词，包括数字：

```
def isAlphabeticalOrder(word, wordList = None):
if (len(word) > 0):
    curr = word[0]
for letter in word:
    if (curr > letter):
        return False
    else:
        curr = letter
if wordList is None:
    return True
return word in wordList 
```

# c - 如何检查数字是否溢出'int'

> ID：13661481
> 
> 赞同：12
> 
> 时间：2012-12-01T16:50:19.160
> 
> 标签：c, integer-overflow

> **可能重复：**
> [在 C/C++ 中检测整数溢出的最佳方法](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)

我在一次采访中被问到这个问题：“将数字的字符串表示形式转换为整数”。但是如果这个数字超过了可以存储在一个 32 位整数中的最大值，它必须抛出一个错误。我的问题是我们如何检查一个数字是否溢出 32 位 unsigned int ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T17:12:58.973

在循环中，您获得了由前几位确定的整数的当前值。你将要做：

```
curval = curval * 10 + digit;  // digit converted from '0'..'9' to 0..9 already 
```

您可以使用以下方法测试溢出：

```
if (curval > UINT32_MAX / 10 || (curval == UINT32_MAX / 10 && digit > UINT32_MAX % 10))
    ...overflow would occur...
else
    curval = curval * 10 + digit; // overflow did not occur 
```

除法和取模操作是编译时操作，而不是运行时操作。

与使用“大于 32 位无符号整数进行计算”相比，这种方法的一个优点是，它可以`uintmax_t`通过将常量从 UINT32_MAX 更改为 UINT64_MAX 或 UINTMAX_MAX 来扩展以使用更大的整数（64 位整数和整数） . 这就是所有必要的（当然，除了更改变量类型）。

* * *

相同的基本测试也适用于有符号类型，但有一个额外的复杂性。出于演示目的使用 16 位整数更容易（输入和思考的数字更少），所以我切换到 16 位二进制补码`short`：

*   `USHRT_MAX`= 65535
*   `SHRT_MAX`= 32767
*   `SHRT_MIN`= -32768

问题是该`short`类型可以存储 -32768 但您可以累积的最大正值是 32767。对于除 SHRT_MIN 之外的所有值，上面的测试都可以正常工作。有办法解决这个困境。一种是`curval`在计算过程中将 存储为负值，如果它应该是正值，则在返回之前将其取反。那么你的测试可能是：

```
if (curval < SHRT_MIN / 10 || (curval == SHRT_MIN / 10 && digit > -(SHRT_MIN / 10))
    ...overflow would occur...
else
    curval = curval * 10 - digit; // Note subtraction! 
```

在否定负值之前，您仍然必须检查`curval`不是。`SHRT_MIN`（理论上，您应该检查`-SHRT_MAX != SHRT_MIN`以允许除二进制补码以外的其他系统；我引用的限制值满足该条件。）

当然，同样的想法和技巧也适用于`INT_MAX`、和。`INT32_MAX``INT64_MAX``INTMAX_MAX`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T16:56:19.803

（我查看了这个问题的[可能重复项](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)，我不确定阅读内容会有多大用处，因为在面试环境中，您应该描述一般的想法/方法）

* * *

回答面试问题的一部分是提出澄清问题（面试官期望你提供的重要清单项目之一）。

因此，您的调查范围至少应包括以下内容：

*   你可以使用`unsigned long long`/ `uint64_t`（64 位 int）吗？
*   字符串从哪里来？`stdin`/ 从文件中读取 / 硬编码为字符串文字？
*   它是否以十进制表示形式提供给您？二进制/八进制/十六进制？
*   应该抛出什么样的错误？我们是否尝试恢复并继续执行？故障安全默认值是多少？

假设您的面试官告诉您它是十进制表示+您可以使用`unsigned long long`：

*   首先检查位数： 32 位`unsigned int`范围在`0 to 4,294,967,295`. 如果数字的十进制字符串表示超过 10 个字符（超过 10 位），则它已经溢出；引发错误。
*   接下来，将数字保存到 an`unsigned long long`并除以`UINT32_MAX+1=4294967296`。如果结果大于`0`，则溢出；引发错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:02:27.583

使用`uint64_t`. 您将一次添加一个数字；对于每个数字，您将乘以 10 并添加下一个字符的值。处理完每个字符后，查看结果是否大于`UINT32_MAX`; 如果是，则以错误退出（或在溢出时应该执行的任何操作）。完成后，将数字作为`uint32_t`. `uint64_t`,`uint32_t`并`UINT32_MAX`在 中定义`stdint.h`。

# python - 卸载旧版本python（fedora）

> ID：13661487
> 
> 赞同：1
> 
> 时间：2012-12-01T16:51:02.730
> 
> 标签：python, fedora

我需要安装python 3.2，但我已经在fedora 16上安装了python 2.7。我下载了python 3.2并安装了它，但是当我运行这个命令时：

```
>python 
```

我有：

```
Python 2.7.3 (default, Jul 24 2012, 11:41:34) 
[GCC 4.6.3 20120306 (Red Hat 4.6.3-2)] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

如何删除或卸载此版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:07:05.123

Fedora 中的默认 python 仍然是 python 2.x（参见[此处](http://fedoraproject.org/wiki/Python3)）。所以你需要输入“python3”来启动3.x解释器。从您的 Fedora 安装中删除 python 2.x 不是一个好主意，因为可能有许多系统函数使用/需要 python 2.x。如果您真的希望能够只键入“python”来运行 3.x 解释器，我建议您修改`.bash_login`主目录中的文件，`python`为`/usr/bin`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T17:04:45.903

你不会，除非你想破坏你的系统。从存储库安装`python3`包并将其调用为`python3`.

# python - 窗口不出现

> ID：13661495
> 
> 赞同：2
> 
> 时间：2012-12-01T16:52:14.707
> 
> 标签：python, user-interface, python-2.7, pyqt, pyqt4

我写了一个程序，在系统托盘中创建一个图标，然后单击鼠标右键显示 3 点注释的上下文菜单，创建新注释和退出，通过按菜单创建新注释表单应该出现，但它没有出现. 为什么？

```
from PyQt4 import QtCore, QtGui, uic
import sys

class NoteForm(QtGui.QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent)
        uic.loadUi("note.ui", self)

def main():
    app = QtGui.QApplication(sys.argv)

    tray = QtGui.QSystemTrayIcon()
    icon = app.style().standardIcon(QtGui.QStyle.SP_DesktopIcon)
    tray.setIcon(icon)
    tray.show()
    CreateMenu(tray, app)
    sys.exit(app.exec_())

def CreateMenu(tray, app):
    m1 = QtGui.QMenu("Menu 1")
    m2 = QtGui.QMenu("Notes", m1)
    actNewNote=QtGui.QAction("Create new note", m1)
    actNewNote.triggered.connect(viewNote)
    #m1.addAction("Create new note", viewNote)
    m1.addMenu(m2)
    m1.addSeparator()
    m1.addAction("Quit", app.quit)
    tray.setContextMenu(m1)

def viewNote():
    note=NoteForm()
    note.show()

if __name__ == '__main__':
    main() 
```

笔记.ui

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>WindowNote</class>
 <widget class="QDialog" name="WindowNote">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>707</width>
    <height>356</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Заметка</string>
  </property>
  <widget class="QWidget" name="">
   <property name="geometry">
    <rect>
     <x>20</x>
     <y>10</y>
     <width>671</width>
     <height>331</height>
    </rect>
   </property>
   <layout class="QGridLayout" name="gridLayout">
    <item row="0" column="0" colspan="3">
     <widget class="QLineEdit" name="TitleNote"/>
    </item>
    <item row="1" column="0" colspan="3">
     <widget class="QTextEdit" name="textNote"/>
    </item>
    <item row="2" column="0">
     <widget class="QPushButton" name="buttonOK">
      <property name="text">
       <string>OK</string>
      </property>
     </widget>
    </item>
    <item row="2" column="1">
     <widget class="QPushButton" name="buttonCancel">
      <property name="text">
       <string>Отмена</string>
      </property>
     </widget>
    </item>
    <item row="2" column="2">
     <widget class="QPushButton" name="buttonDeleteNote">
      <property name="text">
       <string>Удалить заметку</string>
      </property>
     </widget>
    </item>
   </layout>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:24:23.537

该`viewNote`函数不保存`NoteForm`对其创建的实例的引用。该`show()`函数立即返回而不阻塞，因此对话框在显示后立即被垃圾收集。

要修复它，请使用[exec_](http://qt-project.org/doc/qt-4.8/qdialog.html#exec)运行对话框，或保留全局引用：

```
def viewNote():
    note = NoteForm()
    note.exec_() 
```

或者：

```
def viewNote():
    global note
    note = NoteForm()
    note.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:18:46.607

您必须`QDialog.exec_()`在`viewNote()`. 并启用该`Create new Note`操作。所以像这样：

```
def CreateMenu(tray, app):
    m1 = QtGui.QMenu("Menu 1")
    m2 = QtGui.QMenu("Notes", m1)
    actNewNote=QtGui.QAction("Create new note", m1)
    actNewNote.triggered.connect(viewNote)
    m1.addAction("Create new note", viewNote)
    m1.addMenu(m2)
    m1.addSeparator()
    m1.addAction("Quit", app.quit)
    tray.setContextMenu(m1)

def viewNote():
    note=NoteForm()
    note.show()
    note.exec_() 
```

或者你可以作为一个全局变量传递`note`，就像这样：

```
def viewNote():
    global note
    note = NoteForm()
    note.show() 
```

# html - CSS 字幕问题

> ID：13661498
> 
> 赞同：1
> 
> 时间：2012-12-01T16:52:33.330
> 
> 标签：html, css

我的字幕有问题。
当我将鼠标悬停在每张照片上时，如何让标题出现在每张照片下方。

问题是它们都出现在左下角的一侧。

这是HTML代码：

```
<div id="content2">
<ul style="width: 5020px; height: 600px;">  
<li class="image" style="width: 392px;"><img src="images/pr1x.jpg" ><p class="caption">1st    caption</p></li>
<li class="image" style="width: 392px;"><img src="images/pr2x.jpg" ><p class="caption">2st    caption</p></li>
</ul></div> 
```

这是CSS代码：

```
li.image p.caption {
position:absolute;
display: none;
font-size: 28px;
color: red;
}
li.image:hover p.caption {
display: list-item;
}​
#content2{
width: 150%;
height: 600px;
float:left;
overflow:hidden;
}
#content2 p{
width: 150%;
}
.scrollbar-hor{
background-color: #e5e2de;
height: 24px;
width: 150%;
float:left;             
}
.handle-hor{
height: 25px;
width: 400px;
background: url(http://brafitting.info/images/bar.jpg) no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:01:47.407

我会尝试新的 HTML5 元素`figure`和`figcaption`
[http://html5doctor.com/the-figure-figcaption-elements/](http://html5doctor.com/the-figure-figcaption-elements/)

## HTML

```
<ul>
    <li>
        <figure>
            <img src="http://lorempixel.com/100/200">
            <figcaption>Caption</figcaption>
        </figure>
    </li> 
    <li>
        <figure>
            <img src="http://lorempixel.com/100/200">
            <figcaption>Caption</figcaption>
        </figure>
    </li>
</ul> 
```

## CSS

```
figcaption  {  display: none;}
figure:hover figcaption {display: block;}
li {display:inline-block;border: 1px solid green;}
figure {border: 1px solid gold; margin:0;}
ul { margin: 0; padding:0; 1px solid blue;}
li { margin:0; padding:0;vertical-align: top;} 
```

[http://jsfiddle.net/5Pcxv/10/](http://jsfiddle.net/5Pcxv/10/)

# android - 如何将 Android ViewPager 设置为仅包含一个视图或布局？

> ID：13661499
> 
> 赞同：1
> 
> 时间：2012-12-01T16:52:32.847
> 
> 标签：android, android-viewpager

我正在为正确实现视图寻呼机所需的概念而苦苦挣扎。通过遵循一些教程并参考 developer.android.com，我能够获得一个几乎功能齐全的视图寻呼机。寻呼机将翻阅几个已设置为从“我的消息 0”到“我的消息 9”的文本视图。问题是视图寻呼机*还*翻转了活动底部的按钮和按钮正上方的红色块。

![视图寻呼机翻转中的问题](../Images/48d303c293d8a632345cabb4e344e4f4.png)

我想让视图寻呼机只循环浏览文本。你能帮我理解我做错了什么吗？

我有一个代表仪表板的活动：

```
public class DashBoard extends FragmentActivity
{
  private static final int NUMBER_OF_PAGES = 10;

  private ViewPager mViewPager;
  private MyFragmentPagerAdapter mMyFragmentPagerAdapter;

  public void onCreate(Bundle icicle){
  super.onCreate(icicle);
  setContentView(R.layout.dashboard);

  mViewPager = (ViewPager) findViewById(R.id.viewpager);
  mMyFragmentPagerAdapter = new    MyFragmentPagerAdapter(getSupportFragmentManager());
  mViewPager.setAdapter(mMyFragmentPagerAdapter);

  }

     private static class MyFragmentPagerAdapter extends FragmentPagerAdapter{
 public MyFragmentPagerAdapter(FragmentManager fm)
 {
     super(fm);
 }

 @Override
 public Fragment getItem(int index)
 {
     return PageFragment.newInstance("My Message " + index);
 }

 @Override
 public int getCount(){
     return NUMBER_OF_PAGES;
  }
  } 
```

和页面片段的类：

```
public class PageFragment extends Fragment {

public static PageFragment newInstance(String title){

  PageFragment pageFragment = new PageFragment();
  Bundle bundle = new Bundle();
  bundle.putString("title", title);
  pageFragment.setArguments(bundle);
  return pageFragment;
    }

    @Override
    public void onCreate(Bundle icicle){
  super.onCreate(icicle);

    }

    @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle icicle){
  View view = inflater.inflate(R.layout.dashboard, container, false);
  TextView textView = (TextView) view.findViewById(R.id.textViewPage);
  textView.setText(getArguments().getString("title"));
  return view;

     }

    } 
```

最后，我的仪表板 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/dashbaordLabel"
android:layout_width="match_parent"
android:layout_height="wrap_content"
>

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    />
<TextView
    android:id="@+id/textViewPage"
    android:layout_width = "match_parent"
    android:layout_height= "wrap_content"
    />  

<Button
    android:id="@+id/newGoalButton"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/stringNewGoal"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:onClick="createNewGoal"
    />

<RelativeLayout
    android:id="@+id/SpaceBottom"
    android:layout_width="match_parent"
    android:layout_height="75dp"
    android:layout_above="@id/newGoalButton"
    android:background="@color/red"
>

   </RelativeLayout>
     </RelativeLayout> 
```

关于我的 xml 的注释，我尝试将文本视图包装在一些视图寻呼机标签中，例如：

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    >
<TextView
    android:id="@+id/textViewPage"
    android:layout_width = "match_parent"
    android:layout_height= "wrap_content"
    />  
</android.support.v4.view.ViewPager> 
```

但所做的只是让文本视图从屏幕上消失，而按钮和红色块仍然像原来的问题一样循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:56:20.473

似乎您对.`Activity`和.`View``PageFragment`

您至少需要两种布局。所需的第一个布局是托管所使用的`FragmentActivity`。此布局将包含您的`ViewPager`，以及在屏幕上与 一起保持静态的其他内容`ViewPager`，例如按钮等。此布局几乎就是您所显示的内容（您的第一个 XML 列表）。

第二种布局是在`onCreateView()`您的`PageFragment`. 假设您只是想在 simple `TextView`s 之间切换，那么`onCreateView()`会膨胀和返回的布局将是一个专用的 XML 布局，其中只包含一个`TextView`.

换句话说，您的 XML 布局的以下部分：

```
<TextView
android:id="@+id/textViewPage"
android:layout_width = "match_parent"
android:layout_height= "wrap_content"
/> 
```

...需要从那里取出并放入单独的布局中，例如`fragment_layout.xml`，并且您要在`onCreateView()`.

# r - 在 roxygen2 中使用 @ 符号

> ID：13661505
> 
> 赞同：5
> 
> 时间：2012-12-01T16:53:04.663
> 
> 标签：r, roxygen, roxygen2

> **可能重复：**
> [在 Roxygen2 样式文档中转义“@”](https://stackoverflow.com/questions/8809004/escaping-in-roxygen2-style-documentation)

如何在 roxygen 文档中使用@，如下所示：

```
#' @param arg An argument that uses the symbol @ 
```

这将在您运行`roxygenize`而不将@ 放入.Rd 文件时引发警告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T16:54:45.510

你可以用另一个@来逃避它

```
#' @param arg An argument that uses the symbol @@ 
```

# haskell - Haskell 导入模块

> ID：13661510
> 
> 赞同：-1
> 
> 时间：2012-12-01T16:53:48.523
> 
> 标签：haskell, import, module, ghci

我需要将 Data.Char 导入到我的 .hs 文件中，以便在 GHCi 中运行脚本。当我只添加“import Data.Char”时，控制台似乎会抱怨并给我解析错误。我该如何正确地做到这一点？我知道它可能很简单，但我自己找不到答案。

产生错误的原因：

```
import Data.Char

hashString :: [Char] -> Int -> [Char]
hashString [] a = []
hashString (x:xs) a = (intToDigit((digitToInt x) * a)):hashToString( xs (a - 1) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:34:12.363

那你不喜欢吗？尝试先学习它，然后看看它是如何进行的，试一试:)

无论如何，如果那是您的问题，`Data.Char`则没有名为 的函数。`hashToString`不过，您确实需要`Data.Char`为`intToDigit`and导入`digitToInt`。

# php - PHP帮助woth正则表达式，从第一个字符串到最后一个字符串

> ID：13661515
> 
> 赞同：0
> 
> 时间：2012-12-01T16:54:27.923
> 
> 标签：php, expression

谁能帮我写 preg_replace 正则表达式来清理一些文本。

我有很多这样的网址

```
<a href="http://en.wikipedia.org/wiki/Love&amp;sa=U&amp;ei=bzS6UMKFKcfZ4QTN0YDIBg&amp;ved=0CB0QFjAA&amp;usg=AFQjCNHE2IgCwu8N2aauurN6HW6YjgILgQ"> 
```

所以，我想从

```
&amp; 
```

至

```
"> 
```

你能告诉我如何用正则表达式做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:00:13.893

```
$string = '<a href="http://en.wikipedia.org/wiki/Love&sa=U&ei=bzS6UMKFKcfZ4QTN0YDIBg&ved=0CB0QFjAA&usg=AFQjCNHE2IgCwu8N2aauurN6HW6YjgILgQ">';

$string = preg_replace('/"(http[^&]+)&[^"]+"/', '"$1"', $string);

echo $string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:09:46.837

```
$url = '<a href="http://en.wikipedia.org/wiki/Love&amp;sa=U&amp;ei=bzS6UMKFKcfZ4QTN0YDIBg&amp;ved=0CB0QFjAA&amp;usg=AFQjCNHE2IgCwu8N2aauurN6HW6YjgILgQ">';

$regex = '(&amp;.+">)Ui'; // THE REGULAR EXPRESSION
$replacement = ''; // YOU CAN PLACE HERE YOUR REPLACEMENT IF NEEDED

$clean_url = preg_replace($regex, $replacement, $url);

var_dump($clean_url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:21:10.303

您不需要正则表达式。

```
$string = substr($string, 0, strpos($string, '&amp;'))
   . substr($string, strpos($string, '>')); 
```

# ios - 当自定义 viewController 添加为根视图控制器而不是导航控制器作为 self.window.rootViewController 时，视图未加载

> ID：13661522
> 
> 赞同：1
> 
> 时间：2012-12-01T16:55:35.207
> 
> 标签：ios

我正在使用 xcode 4.5.2 的主从模板。我没有将其保留`UINavigationController`为`rootViewController`，`UIWindow`而是用我自己的 ViewController 替换它，并用一个简单的闪屏作为它的视图。显示初始屏幕后，我想将`navigationController`as `self.window.rootviewController`（包含 master 和`detailViewControllers`）推送。

问题是虽然我`ViewController`正在初始化并且它`viewDidLoad`被调用但它的视图（启动屏幕没有显示）。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)

{LoginViewController *loginViewController = [[[LoginViewController alloc] initWithNibName:@"LoginViewController_iPhone" bundle:nil] autorelease];
//        loginViewController.masterViewController = loginViewController;

          [self.window setRootViewController:loginViewController];
          [self.window addSubview:loginViewController.view];

if (BOOL condition is YES)
{
 MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController_iPhone" bundle:nil] autorelease];
        self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
        //self.window.rootViewController = self.navigationController;
} 
```

`LoginViewController`是带有闪屏的自定义控制器。那么如何在使用导航控制器时从 App 委托更改启动屏幕？（主从模板）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:06:36.460

这可能不是这样做的方法。您应该保持主从结构原样（作为窗口的根视图控制器），并在应用程序首次启动时将启动屏幕显示为模态视图控制器。只需在主视图控制器的 viewDidLoad 方法中使用 presentViewController:animated: 呈现您的 LoginViewController。

编辑后：如果您想按照您尝试的方式进行操作，那么您拥有的代码几乎是正确的。可以使用以下代码从登录控制器（而不是应用程序委托）完成：

```
if (BOOL condition is YES) {
     MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController_iPhone" bundle:nil] autorelease];
     UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
     self.view.window.rootViewController = navigationController;
} 
```

# javascript - 两个元素上的 Jquery mouseleave 事件

> ID：13661541
> 
> 赞同：1
> 
> 时间：2012-12-01T16:57:57.277
> 
> 标签：javascript, jquery, mouseleave

我想在鼠标离开两个元素时触发一个事件。我找到了以下 jsfiddle 这正是我正在寻找的：

[http://jsfiddle.net/pFTfm/54/](http://jsfiddle.net/pFTfm/54/)

它使用以下代码：

```
var count = 0;
$('#d1, #d2').mouseenter(function(){
    count++;
    $('#d3').show();
}).mouseleave(function(){
    count--;
    if (count == 0) { 
        $('#d3').hide();
        $('#d3').css('background-color', 'orange');
    }
});
​ 
```

但是，该事件仍然会被触发，正如您通过 div 更改其背景颜色所看到的那样。

我希望仅在鼠标真正离开两个元素时触发事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T17:03:59.003

怎么样：

```
var count=0;
$('#d1, #d2').mouseenter(function(){
    count++;
    $('#d3').hide();
}).mouseleave(function(){
    count--;

    setTimeout(function(){
        if (count==0){
                $('#d3').show();
            }
    },50);
});
​ 
```

[jsFiddle](http://jsfiddle.net/opherv/nEKtq/)

小超时是为了确保鼠标实际上离开了两个元素，而不是离开一个并进入另一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T17:13:06.243

您无法阻止事件的发生，但您可以检查相关目标（您来自的元素）并检查它是否是其中一个。如果是，只需从事件处理程序返回。

就像是：

```
var checkRelated = function(e) {
    var id = e.relatedTarget.id;
    return id == 'd1' || id == 'd2';
}

$('#d1, #d2').mouseenter(function(e){
    if (checkRelated(e)) return;
    $('#d3').show();
}).mouseleave(function(e){
    if (checkRelated(e)) return;
    // now we know we actually left both elements
    $('#d3').hide();
}); 
```

演示：http: [//jsfiddle.net/pFTfm/57/](http://jsfiddle.net/pFTfm/57/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T18:14:37.357

另一种变体使用`.setTimeout()`

```
var timer;

$('#d1, #d2').hover(function(){
    if( timer ) clearTimeout( timer );
    $('#d3').show();
},
function(){
    timer = setTimeout( function( ) {
        $('#d3').hide().css('background-color', 'orange');
    }, 100 );
}); 
```

[**在这里**](http://jsfiddle.net/pFTfm/59/)提琴[](http://jsfiddle.net/pFTfm/59/)

# java - JToolbar 不显示背景颜色

> ID：13661544
> 
> 赞同：1
> 
> 时间：2012-12-01T16:58:24.173
> 
> 标签：java, swing, netbeans, gui-designer, jtoolbar

即使我从*Netbeans GUI Designer*设置了背景颜色，我`JToolbar`也没有显示*背景颜色*。设置背景颜色的代码甚至包含在自动生成的代码中。有什么问题？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:15:56.903

如果 GUI 编辑器没有正确生成背景颜色，您可能需要自己设置背景颜色。尝试使用`setBackground`. 这个方法的 Javadoc 在[这里](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setBackground%28java.awt.Color%29)。*

# c# - 检查图片框中的图片与资源图片相同

> ID：13661545
> 
> 赞同：1
> 
> 时间：2012-12-01T16:58:37.903
> 
> 标签：c#, winforms, image

我有问题。。

当用户单击清除照片时，我的图片框会将图片更改为图片“no_photo”..

这是我的代码

```
 private void btnClearPhoto_Click(object sender, EventArgs e)
    {
        picEmp.Image = chuki2_spp.Properties.Resources.no_photo;
    } 
```

当用户修改当前记录时。它将从资源中检查照片是否相同。如果相同，记录将保存为 DBNull.Value。

```
if (picEmp.Image == chuki2_spp.Properties.Resources.no_photo)
{
    sqlComm.Parameters.AddWithValue("@empPicture", DBNull.Value);
}

else
{
    sqlComm.Parameters.AddWithValue("@empPicture", data);
} 
```

用户更新记录后，仍保留旧图片。不会在数据库中更改为空值。如何修复该代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:03:16.897

这不起作用，因为 picEmp.Image == chuki2_spp.Properties.Resources.no_photo 不正确。尽管它们持有“相同”的图像，但您正在比较两个不同的对象。

考虑使用标志来确定 Image 是否已更改。

# css - 如何将居中 div 的内容向左对齐？

> ID：13661551
> 
> 赞同：2
> 
> 时间：2012-12-01T16:59:25.017
> 
> 标签：css

我在另一个 div 中居中了一个 div，但想左对齐居中的内部 div 的内容。我怎样才能做到这一点？

我当前的 HTML 如下所示：

```
<div style="border: solid 1px #ff0000;text-align:center;">     
  <div style="border:solid 1px #00ff00;">
      <img src="/some_url_1/" style="width: 80px; height 80px; border: 0"/>
      <img src="/some_url_2/" style="width: 80px; height 80px; border: 0"/>
  </div>
</div> 
```

目前，图像在内部 div 内居中，但我希望它们与居中内部 div 的左侧对齐。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T17:01:26.167

使用边距使内部元素居中：

```
<div id="outer">
    <div id="inner">
        Things to align to the left
    </div>
</div> 
```

使用以下 CSS：

```
#inner {
    width: 75%;
    margin: 0 auto;
    text-align: left; /* generally don't need to explicitly state this */
} 
```

演示：http: [//jsfiddle.net/W95Qy/](http://jsfiddle.net/W95Qy/)

另外，作为一个友好的建议，请尽量将 CSS 排除在 HTML 之外。它通常会使您的代码更易于阅读、管理并保持您在该领域工作的长期理智；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:01:17.310

您可以使用`text-align: left`内部 div 执行此操作，如下所示：

```
<div style="border: solid 1px #ff0000; text-align: center;">     
  <div style="border:solid 1px #00ff00; text-align: left;">
      <img src="/some_url_1/" style="width: 80px; height 80px; border: 0"/>
      <img src="/some_url_2/" style="width: 80px; height 80px; border: 0"/>
  </div>
</div> 
```

​</p>

# ruby-on-rails - 无法使用 accept_nested_attributes_for 创建部分对象

> ID：13661559
> 
> 赞同：1
> 
> 时间：2012-12-01T17:00:04.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试构建一个允许用户更新一些记录的表单。但是，它们无法更新每个字段，因此我将进行一些显式处理（目前在控制器中）以更新模型相对于表单。这是我正在尝试的方法：

家庭型号：

```
class Family < ActiveRecord::Base
  has_many :people, dependent: :destroy
  accepts_nested_attributes_for :people, allow_destroy: true, reject_if: ->(p){p[:name].blank?}
end 
```

在控制器中

```
def check
  edited_family = Family.new(params[:family])
  #compare to the one we have in the db
  #update each person as needed/allowed
  #save it
end 
```

形式：

```
= form_for current_family, url: check_rsvp_path, method: :post do |f|
  = f.fields_for :people do |person_fields|
    - if person_fields.object.user_editable
      = person_fields.text_field :name, class: "person-label"
    - else
      %p.person-label= person_fields.object.name 
```

我想，问题是`Family.new(params[:family])`试图将人们从数据库中拉出来，我得到了这个：

```
ActiveRecord::RecordNotFound in RsvpsController#check

Couldn't find Person with ID=7 for Family with ID= 
```

那是，我猜，因为我没有在嵌套表单中添加家庭 id 字段，我想我可以这样做，但我实际上并不需要它从数据库中加载任何内容，所以我会而不是。我也可以通过自己挖掘参数哈希来获取我需要的数据来解决这个问题，但这并不容易。从 params 哈希中创建一个对象然后使用它似乎最好。

有没有更好的办法？我怎样才能创建嵌套对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:03:43.703

我建议不要使用这些参数实例化一个新的 Family 对象，而是为 check rsvp 操作[创建一个成员路由](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions "创建成员路由")。该路线将采用以下形式：

```
resources :families do
  member do
    post 'check_rsvp'
  end
end 
```

form_for 将自动传递 current_family 的 id，因此检查操作将如下所示：

```
def check
  edited_family = Family.find(params[:id])
  # ...
end 
```

虽然这在功能上似乎等同于自己添加家庭 id 参数，但我认为它优于或者基于其他参数实例化一个新的家庭对象，因为：

1.  它更加地道（The Rails Way™）。
2.  它的代码更少。
3.  您获得了edited_family 对象的[引用透明度](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29 "参照透明度")，这减少了由于基于已持久化的属性的新Active Record 对象的临时实例化而可能发生的细微错误的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:59:04.673

我最终接受了@244an 的建议：

```
class Person < ActiveRecord::Base
  belongs_to :family

  def temp_id
    @temp_id || self.id
  end

  def temp_id=(new_id)
    @temp_id = new_id
  end
end 
```

在表格中：

```
= form_for current_family, url: check_rsvp_path, method: :post, html: {class: "form-inline"} do |f|
  #people-list
    = f.fields_for :people, include_id: false do |person_fields|
      = person_fields.hidden_field :temp_id
      #rest of the form here 
```

然后在我的控制器中：

```
def check
    @edited_family = Family.new(params[:family])

    current_people = Hash[current_family.people.map{|p| [p.id, p]}]

    @edited_family.people.each do |person|
      current_person = current_people[person.temp_id.to_i]

      next unless current_person

      current_person.name = person.name if current_person.user_editable
      current_person.attending = person.attending
      current_person.save!
    end

    current_family.responded = true
    current_family.save!

  end 
```

我将该字段添加到模型中的原因是我想不出一个好的方法`hidden_field`来重命名该字段。

无论如何，它感觉超级哈克，但它有效。我真正想要的只是一种告诉`new`不要尝试将子对象与数据库匹配的方法，即使它们有 id。

# linux - 用linux删除文件名中的第一个单词

> ID：13661562
> 
> 赞同：2
> 
> 时间：2012-12-01T17:00:17.953
> 
> 标签：linux, bash

我有大量需要重命名的文件。该名称当前为“sink-foobar”。我想删除“sink-”。必须有办法用 bash 做到这一点，但我没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T17:01:15.437

简单的 ：

```
rename 's/sink-//' *files 
```

它是 Perl，有时命名为`prename`，它默认安装在 Ubuntu 和许多发行版上。

为确保您拥有正确的，请运行以下命令：

```
file $(readlink -f $(type -p rename)) | grep &>/dev/null -i perl &&
    echo "Good version" ||
        echo "ELF version, not the good one" 
```

在 Debian 和衍生版本（Ubuntu ...）上，您可以使用以下命令将其设置为默认值：

```
 update-alternatives --set rename /usr/bin/vendor_perl/rename 
```

见[https://metacpan.org/module/rename](https://metacpan.org/module/rename)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T17:02:27.090

它总是*文字* `sink-`吗？如果是这样，请使用参数扩展和去除前缀模式：

```
NAME='sink-foobar'
echo ${NAME#sink-} 
```

所以，作为一个完整的脚本：

```
for f in sink-*; do
  mv -- "$f" "${f#sink-}";
done 
```

# asp.net-web-api - 默认使用 ASP.NET Web API 返回 json

> ID：13661563
> 
> 赞同：13
> 
> 时间：2012-12-01T17:00:26.933
> 
> 标签：asp.net-web-api, mediatypeformatter

默认情况下是否可以从 ASP.NET Web API 而不是 XML 返回 json？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-01T18:08:18.803

这是默认完成的。`JsonMediaTypeFormatter`注册为第一个`MediaTypeFormatter`，如果客户端未请求特定格式的响应，ASP.NET Web API 管道会为您提供`application/json`格式响应。

如果您只想支持`application/json`，请删除所有其他格式化程序并仅离开`JsonMediaTypeFormatter`：

```
public static void Configure(HttpConfiguration config) {

    var jqueryFormatter = config.Formatters.FirstOrDefault(x => x.GetType() == typeof(JQueryMvcFormUrlEncodedFormatter));
    config.Formatters.Remove(config.Formatters.XmlFormatter);
    config.Formatters.Remove(config.Formatters.FormUrlEncodedFormatter);
    config.Formatters.Remove(jqueryFormatter);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-15T19:27:00.540

@tugberk 的解决方案并没有真正实现更改默认格式化程序的目标。它只是让 JSON 成为*唯一*的选择。如果您想将 JSON 设为默认值并仍支持所有其他类型，则可以执行以下操作：

```
public static void Configure(HttpConfiguration config) {
    // move the JSON formatter to the front of the line
    var jsonFormatter = config.Formatters.JsonFormatter;
    config.Formatters.Remove(jsonFormatter);
    config.Formatters.Insert(0, jsonFormatter);
} 
```

注意：JSON 是 Web API 2.0 的默认格式化程序。

# javascript - 如何解析（无限）嵌套对象表示法？

> ID：13661568
> 
> 赞同：3
> 
> 时间：2012-12-01T17:01:17.873
> 
> 标签：javascript, parsing, object, for-loop, infinite-loop

我目前正在对转换此对象哈希感到头疼：

```
"food": {
    "healthy": {
        "fruits": ['apples', 'bananas', 'oranges'],
        "vegetables": ['salad', 'onions']
    },
    "unhealthy": {
        "fastFood": ['burgers', 'chicken', 'pizza']
    }
} 
```

像这样：

```
food:healthy:fruits:apples
food:healthy:fruits:bananas
food:healthy:fruits:oranges
food:healthy:vegetables:salad
food:healthy:vegetables:onions
food:unhealthy:fastFood:burgers
food:unhealthy:fastFood:chicken
food:unhealthy:fastFood:pizza 
```

从理论上讲，它实际上只是在跟踪路径和最终结果的同时遍历对象。

不幸的是，在我完成所有嵌套之前，我不知道如何循环。

```
var path;
var pointer;
function loop(obj) {
    for (var propertyName in obj) {
        path = propertyName;
        pointer = obj[propertyName];

        if (pointer typeof === 'object') {
            loop(pointer);
        } else {
            break;
        }        
    }
};

function parse(object) {
    var collection = [];

}; 
```

有两个问题相互影响：

1.  如果我使用递归编程，它会丢失已经解析的属性的状态。
2.  如果我不使用它，我将无法解析无限。

有什么想法如何处理吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:08:15.807

您的递归函数不起作用的原因是您将状态存储在它之外。您需要其中的状态*，*以便每次调用都跟踪其状态。

像这样的东西：

```
var obj = /* ... the object ... */;
var lines = loop([], "", obj);

function loop(lines, prefix, obj) {
    var key, sawOne = false;

    // Is it an array?
    if (Object.prototype.toString.call(obj) === "[object Array]") {
        // Yes, in your example these are all just strings to put
        // at the end, so do that
        for (key = 0; key < obj.length; ++key) {
             lines.push(prefix + ":" + obj[key]);
        }
    }
    else {
        // No, it's an object. Recurse for each property, adding the
        // property to the prefix we use on each line
        for (key in obj) {
            loop(lines, prefix ? (prefix + ":" + key) : key, obj[key]);
        }
    }

    return lines;
} 
```

完全即兴且未经测试，但你明白了。

编辑：但显然它有效，因为[Michael Jasper](https://stackoverflow.com/users/602554/michael-jasper)非常友好地制作了一个[现场演示](http://jsbin.com/ucoyel/6)（[源](http://jsbin.com/ucoyel/6/edit)），我稍微调整了它。

# c++ - 重载函数打印

> ID：13661572
> 
> 赞同：1
> 
> 时间：2012-12-01T17:01:49.523
> 
> 标签：c++, arrays, printing

对于其中一项任务，我需要创建一个重载函数***print***来打印数组的一个元素或所有元素。打印整个数组我没有问题：

```
for( int i = 0; i < size; i++)
    cout << list [ i ] <<endl; 
```

但是我如何使相同的功能只打印一个特定的元素呢？我看到的方式是询问用户要打印什么，一个元素或所有数字。或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:05:07.347

打印整个阵列

```
print (const int *arr) const
{
   // code you have written
} 
```

打印特定的数组元素

```
print (const int *arr, const int index)const // overloaded function
{
  // validate index and print arr[index]
   if (index >=0 && index<size)
       cout << *(arr+index)

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:10:54.263

（由于您在谈论重载，我假设您使用的是 C++。）

重载另一个函数的函数不再是同一个函数。在您的情况下，您需要一个打印一个元素的函数。换句话说，只有一个`int`：

```
void print(int num)
{ cout << num << endl; } 
```

然后，您提供一个重载，该重载采用一个范围并打印它：

（请注意，在一个范围内，`end`元素是指“超出范围末尾的一个”，不应打印。）

```
void print(int* begin, int* end)
{
    while (begin != end) {
        cout << *begin << endl;
        // Or if you want to follow correct decomposition design:
        // print(*begin);
        ++begin;
    }
} 
```

两个函数的用法：

```
int array[3] = {1, 2, 3};
print(array[0]);
print(array, array + 3); 
```

# android - 在不同的 Android 手机上接收 UDP 会产生不同的结果

> ID：13661577
> 
> 赞同：1
> 
> 时间：2012-12-01T17:02:40.887
> 
> 标签：android, udp, android-wifi, galaxy

我愿意在我的安卓移动设备上创建一个服务器和客户端程序。设备在同一个wifi网络上相互通信，因此，必须实现一些简单的扫描机制——客户端电话通过某种广播搜索服务器电话。

我做了什么：

我的协议 - 客户端电话在 wifi 上广播消息端口**p ，服务器侦听端口****p**。当服务器收到广播消息时，它会发回一条消息，从而向客户端发现自己。

我的代码 - 我在我的应用程序上打开了一个广播套接字，它发送一条广播消息。同时，我的 PC 上有一个 python 脚本，它可以监听和回复——我使用 python 以便我的测试更容易——PC 上的 Wireshark，我可以看到**所有内容**。

怎么了：

当我使用我的一部 Galaxy S 手机时，它可以工作并且我得到了回应。当我使用另一部 Galaxy S 手机时，它不起作用。

现在这就是我所知道的：工作的手机实际上有 Nexus ROM 版本。4.1.1 不能用的手机有2.3.3 普通galaxy ROM

python 代码表示它接收从**两部手机发送的****两个**广播，并回复它们而不引发任何异常。

 **到目前为止，我一直认为问题可能是 1\. 旧版本的手机。2\. windows 防火墙 3\. 路由器防火墙

所以我打开了 Wireshark，确实我看到两部手机都在发送他们的广播——它是在 Wireshark 上登录的。 **但是python脚本只响应了第一个。** 所以这就是为什么 1 和 3 无关紧要 - 如果路由器防火墙阻止了我的 UDP，我仍然会看到 python 服务器响应，与旧版本的手机相同。

为了摆脱 2 我只是禁用了 Windows 防火墙 - 仍然是同样的问题。

有谁知道为什么会发生这种影响？

谢谢！

编辑

我的python代码：

```
def scan(data, addr, sock):
    print "received scan message:", data, addr
    name = u"name".encode("utf-16-le")
    data = "DISC" + short2bytes(len(name)) + name
    print "sending back %s to %s" % (data, addr)
    sock.sendto(data, addr)

if __name__ == "__main__":
    sock = socket(AF_INET, SOCK_DGRAM)
    sock.bind(('', UDP_PORT))
    while 1:
        data, addr = sock.recvfrom(1500)
        print "received packet " + data
        if data.startswith("SCAN"):
            scan(data, addr, sock) 
```

编辑2：

好的！似乎我的代码和协议确实有效。事实证明，2.3.3 手机存在一些严重的 ARP 问题。经过一些重置后，它可以完美运行！**

# ios - 如何在 iPhone 锁定屏幕上显示绿色，就像充电电池一样？

> ID：13661579
> 
> 赞同：-1
> 
> 时间：2012-12-01T17:02:58.890
> 
> 标签：ios, uicolor

我试图让一种颜色显示在屏幕上，就像充电电池一样（如图所示）：![充电电池](../Images/45f9499f9c01a8006358c9788775da54.png)

在查看了`UIColor` [此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html)的 Apple 文档后，我尝试同时使用两者`colorWithHue:saturation:brightness:aplha:`并`colorWithRed:green:blue:alpha:`获得一种颜色以显示为这样。

例如，当我`colorWithHue:.3 saturation:.84 brightness:1 alpha:.5`在黑色背景上使用时，它会呈现如下颜色：

![myGreen 与 colorWithHue:saturation:brightness:alpha:](../Images/40608d638e7ed7de2f7732b059cffe7a.png)

或`colorWithRed:0 green:1 blue:0 alpha:.5`黑色背景上的显示如下：

![myGreen 与 colorWithRed:green:blue:alpha:](../Images/e8a9138ae8e9f1ad8d813637b11f6234.png)

它没有那种半透明或有光泽的外观。

有没有更好的使用方法？还是我只是没有正确的价值观？（我尝试了很多组合）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:13:24.890

`UIColor`仅表示一种具有不透明度值的颜色（如果您已指定一种颜色）。在您的情况下，您可能想要使用图像，或者覆盖`drawRect`自定义`UIView`类（核心图形）中的方法。看看[这里](http://www.codeproject.com/Articles/93563/Introduction-to-iOS-Graphics-APIs-Part-1)对后者的简要介绍。

# javascript - jQuery中的参考？

> ID：13661586
> 
> 赞同：2
> 
> 时间：2012-12-01T17:03:43.870
> 
> 标签：javascript, jquery

如何更改 jQuery 中的代码，这些代码将在 html 中引用上述项目？

html代码如下：

```
<div class="dramer">
    <ul>
        <li> </li>
        <li> <a class="shares" href="#"> Click </a> </li>
        <li> </li>
        <li> </li>
    </ul>

    <div class="drops"> </div>

</div> 
```

jQuery中的代码：

```
$('a.shares').click(function (event) {
    event.preventDefault();
    event.stopPropagation();
    $(this).next(."drops").slideToggle(400);    
}); 
```

jQuery 中的函数旨在显示和隐藏无法触及的 div`<li>`和`<ul>`

如何修改代码以隐藏 jQuery 并显示 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:08:24.533

直接瞄准

```
$(".drops").slideToggle(400); 
```

如果您需要它具有上下文意识，这样的事情可能会起作用

```
$(this).closest(".dramer").find(".drops").slideToggle(400); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:10:21.347

~~`$ (this). next(. "drops"). slideToggle (400);`~~

```
$(this).closest('.dramer').children('.drops').slideToggle(400); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:09:52.760

试试怎么样

```
$ ('a.shares'). click (function (event) {
         event.preventDefault ();
         event.stopPropagation ();
         $(this).parent(".dramer").children(".drops").slideToggle(400);
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:22:11.410

我不确定我明白你的意思。如果你的意思是你想隐藏你的孩子的 div ，你可以试试这个：

```
$ ('a.shares'). click (function (event) {
    event.preventDefault ();
    event.stopPropagation ();
    $(".drops").slideToggle (400);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T17:13:44.633

您应该上到`.shares`和之间共享的最近的祖先，`.drops`然后`.drops`从那里找到：

```
$(".shares").on("click", toggleDrops);

function toggleDrops (event) {
    $(this).closest(".dramer").find(".drops").slideToggle(400);
    return false;
} 
```

# ruby-on-rails - :reject_if 嵌套属性为空

> ID：13661587
> 
> 赞同：0
> 
> 时间：2012-12-01T17:03:49.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, nested-forms, nested-attributes

我有一个嵌套表单，其中每个帖子都有很多位置。问题是，如果用户创建了一个位置，然后将其留空，它会用空白数据填充我的表。

我认为这会在我的`post.rb`模型中做到这一点：

```
 accepts_nested_attributes_for :locations, :allow_destroy => true, :reject_if => proc { |attributes| attributes['name'].blank? } 
```

但是它们仍然在空白时滑过并被保存。知道为什么吗？

编辑：这是评论中要求的哈希：

```
Parameters: {"utf8"=>"✓","authenticity_token"=>"r74iCzC4tJgVI6FiCEH7XzfiTmaqKihF5JSs7Ow3MSI=", "post"=>{"title"=>"This is a test blog post fo
r stack overflow", "body"=>"This is a test blog post for stack overflow", "tag_list"=>"", "locations_attributes"=>{"0"=>{"name"=>"London", "long
itude"=>"-0.1276831", "latitude"=>"51.5073346"}, "1354382846976"=>{"name"=>"Paris", "longitude"=>"2.3522219", "latitude"=>"48.856614"}, "1354382
849464"=>{"name"=>"", "longitude"=>"", "latitude"=>""}, "1354382850624"=>{"name"=>"", "longitude"=>"", "latitude"=>""}}}, "_wysihtml5_mode"=>"1"
, "name"=>"", "legname"=>"Paris", "longitude"=>"2.3522219", "latitude"=>"48.856614", "commit"=>"Submit"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:52:35.697

我通过将属性分离到一个数组中并删除空白然后从表中删除任何空白行来解决这个问题。

```
locations = []
locations = locations.delete_if { |elem| elem.flatten.empty? } 
```

`after_save { |location| location.destroy if location.name.blank? }`

感谢您的建议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:06:29.653

您没有为您的位置模型显示代码，但听起来您需要添加验证，例如：

```
validates :name, :longitude, :latitude, presence: true 
```

如果没有这些，则可以使用这三个字段的空白值来构建位置记录。您可能得到的只是 post_id。

# c# - 类型类型的（官方）术语是什么？

> ID：13661589
> 
> 赞同：7
> 
> 时间：2012-12-01T17:03:53.157
> 
> 标签：c#, types, metadata, naming, roslyn

我正在使用 Roslyn 编写一个应用程序来在语法和语义上分析 C# 源代码。对于正在分析的源代码中定义的每种类型，我想存储它是引用类型（类）、值类型（结构）还是接口。

类型类型的适当/官方术语是什么？

例子：

```
class A
{
    //This type's type (A's type) is 'class' (i.e. a reference type).
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T17:54:14.650

如果你想知道官方名称，请查看官方来源：C# 语言规范。从那里引用（§1.3 类型和变量；强调我的）：

> C#中有两种**类型**：值类型和引用类型。[…]
> 
> C#的值类型进一步分为简单类型、枚举类型、结构类型和可空类型，C#的引用类型进一步分为类类型、接口类型、数组类型和委托类型。

然后有一个表将这些类型组描述为**category**，还有这个引用：

> C# 的**五类类型**是用户可定义的：类类型、结构类型、接口类型、枚举类型和委托类型。

虽然后来（在 §4 类型中）：

> C# 语言的类型分为两大**类**：值类型和引用类型。

总而言之，规范称它们为类型的类别，尽管它对该术语的使用不是很一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T18:10:55.200

在类型论中，类型的类型通常称为它的*种类*。这主要描述了一种类型的参数化形式，尽管它也可以用于其他分类。但我不确定它是否自然适用于您在这里所指的分类。似乎 C# 也没有一个“官方”术语。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T08:53:03.353

我已经看到我们在 Roslyn 源代码中使用“种类”，例如“可以声明 5 种可能的类型”。但是我不认为有一个官方定义的术语。我会使用“种类”或“种类”。

# linux - 在没有 root 的非标准位置使用 glibc 构建 GCC

> ID：13661592
> 
> 赞同：10
> 
> 时间：2012-12-01T17:04:07.097
> 
> 标签：linux, gcc, glibc

我有一个没有 root 访问权限的系统，但我需要安装当前版本的 GCC (4.7.2)。

该系统正在运行 Linux 2.6.18 的 x86_64 构建，并且已经具有 GCC 4.1（即使 --version 说它是用它构建的，也不支持 C++）。

编辑 5：此时，以下步骤只是我尝试过的一组事情。从那以后，我开始打扫几次。我正在寻找一个人来详细说明我需要的确切顺序，以便将所有东西都放入所需的所有开关中。

这是我到目前为止所经历的过程（其中 ROOT 是我的主目录中的一个文件夹）

```
 make-3.82>./configure --prefix=$ROOT && make && make install && hash -r
binutils-2.23>./configure --prefix=$ROOT && make && make install
autoconf-2.69>./configure --prefix=$ROOT && make && make install
automake-1.9>./configure --prefix=$ROOT && make && make install
flex-2.5.37>./configure --prefix=$ROOT && make && make install
libunwind-1.1>./configure --prefix=$ROOT && make && make install
gcc-4.7.2-scratch>../gcc-4.7.2/configure --prefix=$ROOT \
    --disable-multilib --disable-nls --enable-languages=c,c++ \
    && make && make install && hash -r
ncurses-5.9>./configure --prefix=$ROOT && make && make install
texinfo-4.13>./configure --prefix=$ROOT && make && make install
glibc-2.14-scratch>touch $ROOT/etc/ld.so.conf 
```

[使用来自http://sourceforge.net/apps/trac/unattended/wiki/ModifyingTheBootDisk#PatchGLibc](http://sourceforge.net/apps/trac/unattended/wiki/ModifyingTheBootDisk#PatchGLibc)的补丁修补 glibc （更正 2.14 的行号）

```
glibc-2.14-scratch>../glibc-2.14/configure --prefix=$ROOT \
    --with-headers=$3_3_4_HEADERS && make && make install 
```

我添加的标志是为了摆脱`undefined reference to '__isoc99_sscanf'`. 我不知道实际上需要什么标志组合来解决这个问题，但它解决了这些标志的问题。

```
gcc-4.7.2-scratch2>../gcc-4.7.2/configure --prefix=$ROOT \ 
    --disable-multilib --disable-nls --enable-languages=c,c++ \
    CPPFLAGS="-I$ROOT/include" CFLAGS="-g -O2 -lc" \
    CXXFLAGS="-g -O2 -lc" LDFLAGS="-L$ROOT/lib \
    -L$ROOT/lib64" && make && make install 
```

现在我在 GCC 构建期间收到此错误：

```
build/genmddeps ../../gcc-4.7.2/gcc/config/i386/i386.md > tmp-mddeps
build/genmddeps: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by build/genmddeps) 
```

该错误是有道理的，因为 /lib64 中的 libc 是 2.5 版，但我不知道如何让 GCC 使用我构建的安装到 $ROOT/lib 的那个。

编辑 1：添加 -rpath 没有帮助，但我将我的 lib 目录添加到 LD_RUN_PATH 和 LD_LIBRARY_PATH。使用这些设置我无法运行任何东西，因为我收到了错误`[program_name]: error while loading shared libraries: /home/mrambiguous/root/lib/libc.so.6: ELF file OS ABI invalid`

需要注意的另一件奇怪的事情是，当我尝试使用 -rpath 建议时，我开始从 GCC 收到有关无法识别的命令行选项（例如 -V）的错误。我必须将其设置为使用系统的 GCC 4.1。现在我不确定我的第一个 GCC 版本是否以某种方式损坏，或者它是否曾经被使用过。

编辑 2：我刚刚在 vim 中打开了 libc.so.6 以查看是否可以在纯文本中找到有关 ABI 的任何内容，并且其中包含版权信息。`libc ABIs: UNIQUE IFUNC`

它还确认 GCC 4.7.2 在同一文本块中工作。`Compiled by GNU CC version 4.7.2`

编辑 3：删除了 $ROOT，重新安装了所有内容，同样的问题是无法将 -V 和 -qversion 识别为有效选项。

编辑 4：我尝试使用 编辑 ELF 标头`brandelf -t SVR4 libc.so.6`，但这只是给了我一个新错误`unexpected PLT reloc type 0x25`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-01T14:15:29.210

我很着急，所以我无法详细分析您的错误消息。

新的 glibc 和旧的 glibc 不仅 ABI 不兼容，而且还有头文件，请参阅[gcc bug 52922](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52922)。

因此，任何混合都会导致像您遇到的错误，您需要非常小心。

手动调音非常乏味。

如果你的目标是使用 gcc-4.7.2，我推荐你使用[Gentoo Prefix](http://prefix.gentoo.org)。我有很多在 RHEL 5 上运行的 Gentoo Prefix 实例（它有 2.6.18 内核、gcc-4.1 和 glibc-2.5，就像你一样）。这会在 glibc-2.5 之上编译 gcc-4.7.2。

如果您想要使用更新的 glibc 获得一些乐趣，请查看[Prefix/libc](http://wiki.gentoo.org/wiki/Prefix/libc)。不过，这是一项正在进行中的工作。预计会有很多破损。但这不会是一个很大的缺点，因为您正在尝试手动编译一个现代工具链，不是吗？

# php - onclick php后更新表

> ID：13661594
> 
> 赞同：0
> 
> 时间：2012-12-01T17:04:19.007
> 
> 标签：php, javascript, mysql, ajax, onclick

我建立系统通知并遇到问题。

对于登录的用户，我希望在 onclick 从“new = 1”到 new =“0”后更新表“通知”。

我如何在使用 ajax 或其他东西的 onclick 后更新数据库。如果我像这样使用 ajax 发送请求服务器：

```
 function readNotifications(str)
    {
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","controlpanel.php?notification=readNews",true);
    xmlhttp.send();
    } 
```

服务器不知道要更新警报的用户 ID。如果我在某个时间发送 USER ID，则可以更改 USER ID，每个人都可以更新彼此的通知，这并不安全。

对不起我的英语，如果我不明白你可以问一个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:16:02.357

我认为一旦用户登录，最好将 user_id 保存在会话变量中。

```
<?php
session_start();
// store session data
$_SESSION['user_id']=100001;
?> 
```

并在处理 ajax 请求期间从后面的代码中访问它。

```
$_SESSION['user_id'] 
```

如果您使用 cookie ，
您仍然可以从您的服务器端代码中接受它。

```
$_COOKIE["user_id"]; 
will do it. 
```

只需确保将 withCredentials 属性设置为 true。

```
var req= new XMLHttpRequest();
req.withCredentials = true; 
```

# haskell - Snaplets 是否适合大型应用程序，或者您可以直接在 snap-core 之上构建？

> ID：13661595
> 
> 赞同：3
> 
> 时间：2012-12-01T17:04:22.067
> 
> 标签：haskell, haskell-snap-framework

我打算用 Snap 编写 webapps。

但对我来说，坚持使用 snap-core 比使用 snaplets 和 lens 要简单得多。

从长远来看，是否可以在不借助 Lens 的情况下手动开始开发`snap init barebones`然后添加抢劫模板、HDBC 数据库持久性等？Snap 核心团队在实践中鼓励使用 Snaplets 和 snap-core 的力度有多大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:17:35.357

正如 ocharles 所说，您当然可以在不使用 snaplets 的情况下在 snap-core 中构建大型 Web 应用程序。然而，snaplet 是直接根据我们对现实世界应用程序的经验开发的。我们观察到我们最终总是写了很多相同的样板。对于几乎任何足够复杂的应用程序，我们发现您通常至少需要一个 reader 和/或 state monad。事实上，即使你只使用 snap-core + heist，你很有可能会开始想要它，因为你必须在使用它的任何地方传递 HeistState。

所以我想说 snap 和 snap-core 之间的选择大致相当于 C 和汇编语言之间的选择。有人可能会争辩说，C 有这些复杂的概念，比如“for”和“while”，但汇编语言只需要简单的 jmp 概念就简单得多。但最后我们都知道，C 似乎值得付出认知开销，因为“for”和“while”体现了我们一直使用的模式。

但是，我要说的是，您很有可能无需编写自己的 snaplet 就可以构建大型 Web 应用程序。现在有许多有用的 snaplet 可以处理许多常见任务，您可以使用它们中的任何一个，而无需实际编写自己的独立 snaplet。编写自己的 snaplet 唯一真正的好处是，如果您将在多个 Web 应用程序中使用它，或者如果您想发布它以便其他人受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:33:25.513

这当然是*可能的*，但我不会推荐它。Snaplets 为您提供了很多管道，基本上是免费的——而且它们不需要太多的工作就可以开始。如果您要手动支持 HDBC 支持和其他东西，那么大概您会想要拥有自己的 monad，以及`MonadSnap`. 我敢打赌，这已经比首先使用 snaplets 更复杂了。

我认为坚持使用一点也不`snap-core`简单，我认为您将产生*更多*令人困惑的代码，因为您现在必须编写对您的应用程序不重要的东西。

[这](https://github.com/metabrainz/musicbrainz-data-service/blob/master/src/MusicBrainz/Service.hs#L85)是我为工作中的项目设置基本 snaplet 的一个非常简单的示例 - 仅 40 行代码。你所知道的关于 snap-core 的一切仍然适用于 snaplets（因为处理程序是 的实例`MonadSnap`）。

所以不 - 你不必使用 snaplets，但我个人强烈推荐它们。

# antlr - ANTLR 4 中规则中的选项发生了什么变化？

> ID：13661596
> 
> 赞同：4
> 
> 时间：2012-12-01T17:04:31.917
> 
> 标签：antlr, antlr4

这不能在 ANTLR 4 中编译：

```
Number options { backtrack=true; }
  : (IntegerLiteral Range)=> IntegerLiteral { $type = IntegerLiteral; }
  | (FloatLiteral)=> FloatLiteral { $type = FloatLiteral; }
  | IntegerLiteral { $type = IntegerLiteral; }
  ; 
```

因为 backtrace=true... 它发生了什么？

我应该在 ANTLR 4 instread 中使用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:46:18.710

目前，ANTLR v4 中没有规则级别的选项。请注意，`backtrack=true`不再需要，因为新的解析算法不需要回溯。另请注意，在 ANTLR v3 中，`backtrack=true`在词法分析器规则中无效，只有解析器规则。

# android - println 需要一条消息。为什么？

> ID：13661598
> 
> 赞同：0
> 
> 时间：2012-12-01T17:04:40.863
> 
> 标签：android, nsurlconnection, runtime-error

我编写了应该发送用户名并传递给 url 的程序，但是当我运行程序时，程序出现运行时错误。我不知道为什么以及如何解决这个问题？

logCat 中的错误是 java.lang.NullPointerException: println needs a message

GetFromUrl.java

```
 @SuppressLint("NewApi")
class GetFromURL extends AsyncTask<String,Void, String> {

InputStream is = null;

@Override
protected String doInBackground(String... urls) {

    URL url=null;
    String response=null;
    String parameters=null;
    OutputStreamWriter request=null;

    try {
        url = new URL("http://myurl.com/");
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        Log.i("catch1", "of get");
        e1.printStackTrace();

    }

    try {
        HttpURLConnection urlConnection=(HttpURLConnection)url.openConnection();
        urlConnection.setDoOutput(true);
        //setRequestProperty();
        urlConnection.setRequestMethod("GET");
        request=new OutputStreamWriter(urlConnection.getOutputStream());
        request.write("UserName=user&Password=pass");
        InputStreamReader inStream=new InputStreamReader(urlConnection.getInputStream());
        response=convertStreamToString(inStream);
    inStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.i("catch2", "of get");
        e.printStackTrace();

    }
    return response;
  }
   private static String convertStreamToString(InputStreamReader is) {
    BufferedReader reader = new BufferedReader(is);
    StringBuilder sb = new StringBuilder();

    String line ="";
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        Log.i("catch3", "of get");
        e.printStackTrace();

    } finally {
        try {
            is.close();
        } catch (IOException e) {
            Log.i("catch4", "of get");
            e.printStackTrace();
        }
    }
    return sb.toString();
}

  } 
```

MainActivity.java

```
public class MainActivity extends Activity {
      @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button.setOnClickListener(onClickListener);        
     }
private OnClickListener onClickListener=new OnClickListener(){
    public void onClick(View v){
          AsyncTask<String, Void, String> async;
          String result="test";
          async=new GetFromURL().execute("U="+user+"&K="+pass);
            try {
                result = async.get();
                Log.i("RESULT", result);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                Log.i("catch1", "of main");
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                Log.i("catch2", "of main");
                e.printStackTrace();
            }       
    }
   };
} 
```

感谢帮助 。干杯。

# android - Android：除了IQ控制之外，使用不同密度的图像有什么好处吗？

> ID：13661604
> 
> 赞同：0
> 
> 时间：2012-12-01T17:05:26.037
> 
> 标签：android, image

我已阅读[此问题](https://stackoverflow.com/questions/11620416/android-purpose-of-using-images-with-different-pixel-density)，但仍不确定不同 DPI 目标的价值。不支持多密度图像会增加 .apk 文件的大小，而仅使用高分辨率图像就可以为所有屏幕提供解决方案（使用自动缩放）？除非将应用程序限制在手机和平​​板电脑上，否则用户只能安装一个二进制文件，因此文件越小越好。

图像的缩小是否取决于硬件实现，有时会使用混乱的最近邻重采样，或者我可以确信无论硬件如何，它都会是双线性重采样，这对照片来说很好？提供适当大小的位图是否有显着的性能提升？

在我看来，额外的一两个资产文件可能是成本大于收益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:39:21.543

我自己也在玩同样的事情。Eclipse 使添加每个分辨率变得容易，因为您只需添加一个 Android 图标集，它会自动为您创建正确的尺寸，它使应用程序更大一点。显然，仅 Froyo (API 8) 支持 XHDPI，因此如果您要在此之前支持，则需要包含 HDPI。同样是旧设备，重新缩放看起来不太好而且速度较慢，但​​是新设备并没有真正的区别。在 Google IO 上，我记得他们说如果您的目标是 API 8 或更高版本，则可以使用 XHDPI。

# python - web-app：服务器函数的命名空间

> ID：13661606
> 
> 赞同：0
> 
> 时间：2012-12-01T17:05:34.780
> 
> 标签：python, web-applications, flask

我想在我的服务器上计算函数，例如`median()`or `average()`。目前我通过将这些函数映射到一个 URL 来做到这一点，即`/computeMedian`. 我也可以将所有函数放入一个`/computeFunction`URL，然后将函数名称与数据一起发布。这种方法或更好的方法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:20:51.073

Flask 的方法没有错。

```
@app.route('/compute/<function>', methods=['GET']) 
def compute(function): 
   if function == 'average':
      return ComputeAverage(request.args.get('list_of_averages')) 
```

# c++ - 接口中的升压信号

> ID：13661610
> 
> 赞同：2
> 
> 时间：2012-12-01T17:05:51.670
> 
> 标签：c++, qt, boost, interface, signals

我正在为 Qt 应用程序制作后端模型，并且出于可移植性的考虑（如果我决定废弃 Qt），我使用 boost 作为模型背后的库而不是 Qt。

Qt 有一个很棒的插件系统，它需要使用接口在插件和主应用程序之间进行通信。正因为如此（并且模型的某些部分可以无缝更改），我已经根据实现所有纯虚函数的接口类来定义我的模型。尽管我没有使用 Qt 宏 (QT_DECLARE_INTERFACE) 将它们声明为接口，但我认为在声明给 Qt 的“包装器”接口中使用它们没有问题，这将是未来插件的面孔。

**继续我的问题**：我在某处读到一个类被认为是 C++ 中的接口，如果 1）它具有除虚拟析构函数之外的所有纯虚拟成员，并且 2）没有成员变量。对我来说，这似乎是纯粹的约定，因为编译器并不关心它是否是一个“接口”类。在对 Qt 插件和接口进行了一些试验和错误之后，在我看来，插件的接口只需要确保它所引用的所有内容都具有一些公共代码库（即，除了由共享库支持的类之外，不使用其他类，除非class 也是一个接口），因此不会有任何未解析的函数。我不确定我是否解释得很好，所以如果需要进一步澄清，我可以给出。

**我的问题是这个**因为在我看来 boost 信号只是一个由共享库支持的模板化成员变量（插件也会引用 boost），我可以在注定用于 Qt 接口的类中使用 boost 信号吗？兼容插件？

*代码示例*

我知道这个类可能可以被 Qt 插件接口引用：

```
class IBlock
{
public:
    virtual ~IBlock() {}

    virtual int getId() = 0;
    virtual std::string getGroup() = 0;
    virtual std::string getName() = 0;
    //etc...
}; 
```

但是这个也可以吗？

```
#include "iblockinput.h" //just another interface I made. relationship is: block has many inputs
#include <boost/smart_ptr.hpp>
#include <boost/signals2.hpp> //signals2 is both thread safe and doesn't make the Qt moc angry

class IBlock
{
public:
    virtual ~IBlock() {}

    virtual int getId() = 0;
    virtual std::string getGroup() = 0;
    virtual std::string getName() = 0;
    //etc...

    boost::signals2::signal<void (boost::weak_ptr<IBlockInput>)> sigInputAdded; //there are 4 of these
}; 
```

如果可以的话，这将非常方便，因为尽管 Qt 不允许将 Qt 信号放入接口中（moc 将使用最终无法解析的代码填充它），但它允许它们被字符串名称引用。据我所知，Boost 不允许整个字符串引用，因此在将插槽附加到接口对象时，能够将信号作为普通变量引用会真正清理干净。

# c# - 如何将 LINQ 结果匿名类型传递给另一个方法？

> ID：13661615
> 
> 赞同：4
> 
> 时间：2012-12-01T17:06:16.397
> 
> 标签：c#, linq

> **可能重复：**
> [如何将匿名类型传递给方法？](https://stackoverflow.com/questions/55101/how-can-i-pass-an-anonymous-type-to-a-method)

我想将 LINQ 结果的集合传递给另一个方法

这是 LinQ 代码

```
var sets =
        from a in patient
        from b in patient
        from c in patient
        from d in patient
        from l in patient
        where a.VisitNum < b.VisitNum && b.VisitNum < c.VisitNum && c.VisitNum < d.VisitNum && d.VisitNum < l.VisitNum
        select new { a, b, c, d, l }; 
```

查询呈现这样的结果“组合”

```
 ID    Visit DAte       Visit number    Rational 
    -------------------------------------------------
   a- 1     14/05/2011           1           new
   b- 1     15/06/2012           2           Emergency 
   c- 1     17/07/2012           3           Check-Up

   a- 1     14/05/2011           1           new
   b- 1     15/06/2012           2           Emergency 
   c- 1     18/12/2012           5           Check-Up 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:16:28.683

`new { a, b, c, d, l }`创建一个[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)的项目，因此整个 LINQ 查询的返回值也会导致匿名类型。要在方法中传递这样的值，我建议将其转换为已知类型。如果您想从具体实现中抽象出一个方法，只需引入一个新类和一个接口：

目前尚不清楚查询是做什么的以及哪些项目类型会相应地更新类和类型名称：

```
interface IResultSet
{
   TypeA A { get; }
   TypeB B { get; }
   TypeC C { get; }
   TypeD D { get; }
   TypeL L { get; }
}

class ResultSet : IResultSet
{
   public ResultSet(inject all property values here) {}

   public TypeA A { get; private set; }
   public TypeB B { get; private set; }
   public TypeC C { get; private set; }
   public TypeD D { get; private set; }
   public TypeL L { get; private set; }
}

IEnumerable<IResultSet> sets =
    from a in patient
    from b in patient
    from c in patient
    from d in patient
    from l in patient
    where a.VisitNum < b.VisitNum 
          && b.VisitNum < c.VisitNum 
          && c.VisitNum < d.VisitNum 
          && d.VisitNum < l.VisitNum
    select new ResultSet(a, b, c, d, l); 
```

请记住，LINQ`Select()`已延迟执行，因此在您访问结果集枚举之前​​不会执行查询本身，因此如果您需要立即执行它，只需`.ToList()`在查询结束时添加调用：

延期：

```
ProcessData(sets); 
```

立即执行：

```
ProcessData(sets.ToList());

// Now you can pass results in a method like this
public void ProcessData(IEnumerable<IResultSet> items) 
```

最后，我建议不要使用`dynamic`类型来抽象此类匿名类型，您可以使用它，但在某些特殊情况下，这将是足够的决定。在您的情况下，它会降低代码的可读性并破坏类型安全，`dynamic`非常适合[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)引擎和处理动态结构数据的东西，但对于那些不太了解 OOP 基础知识的人来说，它不是灵丹妙药。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:18:17.503

您不能将匿名类型直接传递给另一个方法，因为解决方法很少：

首先，您可以通过`dynamic`参数传递它：

```
var at = new { a = 1, b = 2, c = 3, d = 4, l = 5 };
ProcessAnonymousType(at);

void ProcessAnonymousType(dynamic at)
{
  Console.WriteLine("Anonymous type data: {0}, {1}, {2}", at.a, at.b, at.c);
} 
```

您可以通过对象传递匿名类型实例并使用反射来访问属性（实际上这与前一个非常相似，但您需要付出更多努力）：

```
void ProcessAnonymousType(object at)
{
    // Use reflection to access a, b, c properties
} 
```

而且，与往常一样，您可以使用命名类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:31:40.350

您可以像这样传递类型化参数（以及匿名类型化）：

```
void Method<T>(T obj)
{
} 
```

然后使用反射提取出存储在里面的所有公共属性。任何非类型变量**都**可以作为参数传递，如下所示：

```
var item = new { Foo = 1, Bar = "2" };
Method(item); 
```

而且不会有例外。至于反射，这段代码

```
object[] values = typeof(T)
    .GetProperties(BindingFlags.Instance | BindingFlags.Public)
    .Select(W => W.GetValue(obj, null)).ToArray(); 
```

将在方法内生成项目的公共属性数组`Method`。[`Result image`](http://pasteboard.co/1faJ1zRr.png).

# html - 图像不粘在页面底部

> ID：13661616
> 
> 赞同：2
> 
> 时间：2012-12-01T17:06:21.613
> 
> 标签：html, css, web-applications

我得到了[这个设计](http://festivals.ie:8080/festivals/)，我正试图将它应用到[我的网站上](http://festivals.ie/)。请注意，该`<html>`元素有一个背景图像（手在空中），它粘在页面底部。

但是，当我将 css 文件迁移到我的应用程序时，由于某种原因，此图像出现在页面的中间位置。我检查了相关的 CSS，在这两种情况下都是：

```
html {
 background-attachment: fixed;
    background-clip: border-box;
    background-color: transparent;
    background-image: url("../../img/bg.svg");
    background-origin: padding-box;
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    outline: 0 none !important;
} 
```

那么为什么图像在这里粘在页面底部，而在[这里](http://festivals.ie:8080/festivals/)却出现在页面的[中间](http://festivals.ie/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:16:59.243

你已经`height: 100%`为你的`html`和设置了`body`。通常这样做是为了能够拥有全高元素。但在这种情况下，这被证明是问题的原因。删除它可以解决问题。

签入 Firebug 或 Chrome Inspector，您会看到如下内容：

```
html, body {
    height: 100%;
} 
```

去掉它。或从您的样式表中覆盖它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T17:15:09.737

由于`body { height: 100% }`样式，它不适用于第二个站点。

静态/bundle-bundle_responsive_head.css：

```
html, body {
    height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T17:14:38.790

看起来第一个链接的计算高度设置为使图像位于底部，而对于图像出现在部分下方的链接，计算高度要低得多。 `height: 170px;`相比`height: 2006px;`

~~我不确定是什么为您设置了高度，但是将其分类将解决您的图像问题~~

编辑：实际上它似乎在这条规则中，它只在这些网站之一上：

```
media="screen, projection"
html, body {
   height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T17:16:19.813

看起来它实际上是body标签上的背景图像没有粘在底部。关闭`height: 100%`bundle-bundle-responsive-head.css 中的正文规则可以修复它，但我不确定这将如何影响网站上的其他内容。

我通过在 Chrome 中使用 DOM 检查器并打开/关闭各种元素的规则来查看它们会产生什么效果，从而发现了这一点。

# common-lisp - 调用加载时文件规范中的奇怪符号

> ID：13661617
> 
> 赞同：4
> 
> 时间：2012-12-01T17:06:23.217
> 
> 标签：common-lisp

我正在尝试熟悉一个大型项目，可能最初是用 Allegro Common Lisp 编写的。我遇到了这段代码：

```
(load "epilog:lib;compile.lisp") 
```

谁能解释一下这是什么意思？也许，如果这有帮助，“epolig”是一个包的名称“lib;compile.lisp”是一个文件“lib/compile.lisp”，或者我可以理解。

这是做某事的标准方式吗？如果是这样，这段代码的意图是什么？SBCL 不将冒号识别为文件名中的特殊字符，即它报告`Couldn't load "epilog:lib;compile.lisp": file does not exist.`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T17:43:10.920

**逻辑路径名是标准的 Common Lisp 功能**

它不是一个符号，它是一个逻辑路径名。

Common Lisp 有一个可移植的[逻辑路径名](http://www.lispworks.com/documentation/HyperSpec/Body/19_c.htm)工具。目的是从物理路径名或任何其他类型的路径名中抽象出来`/usr/local/lisp/src/epilog/lib/compile.lisp`（`lispm:>sources>epilog>lib>compile.lisp.432`想想 Unix、Mac OS X、Windows 等之间的区别）。

目的是为您的软件使用**一个单一的路径名方案和一个单一的逻辑文件组织**。无论您在哪台机器上以及文件在哪里，您所需要的只是从真实文件组织到逻辑 Lisp 组织的映射。

**历史**

这个工具来自有许多不同的操作系统和许多不同的文件（DEC VMS、IBM MVS、Multics、Unix、Lisp Machines、MS DOS、Macs ......）的时代。Lisp 机器是联网的，可以与各种计算机通信——因此他们学习了所有这些计算机的本机文件语法。在不同的实验室（MIT、Xerox、SRI，...），网络上有不同的机器和不同的文件服务器。但是 Lisp 用户想要加载`epilog:src;load.lisp`却不记得这些东西到底在哪里：在本地机器上？但是哪里？在文件服务器上？但是哪里？因此，在每个网络上都有一个注册表，用于从真实文件位置到逻辑路径名的转换。

所以这就像一个早期的文件“URIs”工具——统一资源标识符。

**举例说明**

`"epilog:lib;compile.lisp"`是*逻辑路径名*的名称。

*   `epilog`是逻辑主机的名称
*   `lib;`是目录路径
*   `compile`是文件名
*   `lisp`是文件类型

**逻辑路径名翻译**

您需要的是逻辑路径名和物理路径名之间的转换：

假设我们有一个只有一个翻译规则的逻辑主机 EPILOG。此 Lisp 的所有文件都在这台机器上，位于`/usr/local/sources/epilog/`. 所以我们使用一些 Unix 约定。

```
CL-USER 40 > (setf (logical-pathname-translations "EPILOG")
                   `(("**;*.*" "/usr/local/sources/epilog/**/*.*")))
(("**;*.*" "/usr/local/sources/epilog/**/*.*")) 
```

上面只有一个翻译规则：

从`EPILOG:**;*.*`到`/usr/local/sources/epilog/**/*.*`。

它将逻辑主机及其所有子目录映射到 UNIX 文件系统中的目录。

可以有更多规则：

*   文档可能在不同的地方
*   较大的文件系统上可能有数据文件
*   编译的 fasl 文件可能存储在其他地方
*   它可能使用来自其他物理目录的逻辑子目录

但是，同样，这里我们只使用一个翻译规则。

**示例解释 - 第 2 部分**

现在我们可以解析一个逻辑路径名：

```
CL-USER 41 > (pathname "epilog:lib;compile.lisp")
#P"EPILOG:LIB;COMPILE.LISP" 
```

让我们描述一下：

```
CL-USER 42 > (describe *)

#P"EPILOG:LIB;COMPILE.LISP" is a LOGICAL-PATHNAME
HOST           "EPILOG"
DEVICE         :UNSPECIFIC
DIRECTORY      (:ABSOLUTE "LIB")
NAME           "COMPILE"
TYPE           "LISP"
VERSION        NIL 
```

正如你在上面看到的，这些部分是从我们的字符串中解析出来的。

现在我们还可以看到逻辑路径名如何转换为真实路径名：

**将逻辑路径名转换为物理路径名**

```
CL-USER 43 > (translate-logical-pathname "epilog:code;ui;demo.lisp")
#P"/usr/local/sources/epilog/code/ui/demo.lisp" 
```

因此，现在当您调用 时`(load "epilog:lib;compile.lisp")`，Lisp 将翻译逻辑路径名，然后真正从翻译后的物理路径名加载文件。我们还真正想要的是，用于所有目的的 Lisp 都记住逻辑路径名 - 而不是物理路径名。例如，当文件有一个名为 的函数时`FOO`，我们希望 Lisp 记录函数源的位置 - 但使用逻辑路径名。通过这种方式，您可以将已编译的文件、已编译的应用程序或 Lisp 映像移动到另一台计算机上，更新翻译，然后它将能够立即找到源`FOO`- 如果它在该机器上可用或在可访问的网络上的某个地方可用那台机器。

**逻辑路径名需要翻译**

要使用逻辑路径名，需要像上面那样进行逻辑路径名转换。通常它们自己存储在翻译文件中。定义翻译，加载它，然后您可以使用相应的逻辑路径名来编译和加载文件。使用它们的典型软件系统，因此需要相应的翻译。有时需要根据您的文件路径进行编辑，但有时可以在加载翻译文件时计算它们。您将查看逻辑主机和翻译的定义位置和方式。

**历史第 2 部分**

在 Symbolics Lisp 机器上，有一个站点范围的目录，可以在其中注册系统和逻辑路径名。加载一个系统然后可以使用这个中央目录查找系统定义，它通常还加载一个翻译文件。因此，该机制告诉您系统的结构是什么（文件、版本、补丁、系统版本……），并告诉您它的位置（可以分散在多个主机或文件系统上）。

逻辑路径名在较新的软件中使用得不多——你有时会在某些较旧的软件中遇到它们，尤其是那些在 Lisp 机器上运行的软件——这个特性在整个系统中被广泛使用。

# c# - 默认控件集合

> ID：13661618
> 
> 赞同：0
> 
> 时间：2012-12-01T17:06:35.180
> 
> 标签：c#, winforms, collections, controls

当我`WinForm`使用设计器创建控件并将其添加到我的控件时，我的控件是否会与其他所有控件一起自动添加到集合中？

假设有 20 个`TextBox`，我需要同时清除它们，而不是这样称呼它：

```
txtbox1.Clear();
txtbox2.Clear();
txtbox3.Clear();
... 
```

我知道我应该在没有设计器的情况下手动创建每个控件并将它们添加到集合中，但现在为时已晚。那么知道我是否可以访问整个控件组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:09:57.583

试试这个

```
private void ClearTextBoxes()
{
 Action<Control.ControlCollection> func = null;

 func = (controls) =>
     {
         foreach (Control control in controls)
             if (control is TextBox)
                 (control as TextBox).Clear();
             else
                 func(control.Controls);
     };

 func(Controls);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:10:14.120

哦，在我写完我的问题后，我实际上发现了如何做到这一点。我可以使用`foreach loop`on `this.controls`。然后我测试控件是否为`TextBox`.

```
foreach (Control x in this.Controls)
{
  if (x is TextBox)
  {
    ((TextBox)x).Text = String.Empty;
  }   
} 
```

# javascript - 消息回调同步错误

> ID：13661621
> 
> 赞同：0
> 
> 时间：2012-12-01T17:06:58.913
> 
> 标签：javascript, google-chrome-extension, content-script

在我的扩展程序的内容脚本中，我从 background.js 请求数据，如下所示：

```
fireOnNewTopic ();  // Initial run on cold start or full reload.

window.addEventListener ("hashchange", fireOnNewTopic,  false);

function fireOnNewTopic () {
/*-- For the pages we want, location.hash will contain values
    like: "#!newtopic/{group title}"
*/
  if (location.hash) {
    var locHashParts    = location.hash.split ('/');
    if (locHashParts.length > 1  &&  locHashParts[0] == '#!newtopic') {
        var subjectStr  = '';
        var bodyStr  = '';
        switch (locHashParts[1]) {
            case 'opencomments-site-discussions':
            chrome.extension.sendMessage({name:"domain"},
                function(response)
                {
                subjectStr = response.domain;   
                });
            chrome.extension.sendMessage({name:"url"},
                function(response)
                {
                bodyStr = "URL of last page visited: " +                        response.url;   
                });
                break;
            default:
                break;
        }

        if (subjectStr && bodyStr) {
            runPayloadCode (subjectStr, bodyStr);
        }
    }
  }
} 
```

不幸的是，由于 sendMessage() 与回调异步运行，在代码到达 runPayloadCode() 时，subjectStr 和 bodyStr 仍然为 null，因为 background.js 中的代码尚未完成。同步代码以便在调用 runPayloadCode() 时填充 subjectStr 和 bodyStr 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:29:59.043

要详细说明 Sudarshan 所说的将两个请求合并为一个（抱歉，需要代码，所以不能只是评论），您可以这样做...
**发送**

```
chrome.extension.sendMessage({url: true, domain:true}, function(response) {
  console.debug('The url is "'+response.url+'" and the domain is"'+response.domain+'"');
  if (repsone.url && response.domain) {
            runPayloadCode (subjectStr, "URL of last page visited: " + response.domain);
        }
}); 
```

或者，如果您出于某种原因想要它更像您的案例，也许这就是您想要的东西......

```
 if(location.hash) {
        var locHashParts = location.hash.split('/');
        if(locHashParts.length > 1 && locHashParts[0] == '#!newtopic') {
            var subjectStr = '';
            var bodyStr = '';
            var request = {};
            switch(locHashParts[1]) {
            case 'opencomments-site-discussions':

                request = {
                    url: true,
                    domain: true
                }
                break;
            default:
                break;
            }

            chrome.extension.sendMessage(request, function(response) {
                console.debug('The url is "' + response.url + '" and the domain is"' + response.domain + '"');
                if(repsone.url && response.domain) {
                    runPayloadCode(subjectStr, "URL of last page visited: " + response.domain);
                }
            });

        }
    }
} 
```

**听**

```
chrome.extension.onMessage.addListener(
function(request, sender, sendResponse) {
    var response = {};
    if(request.url) {
        response.url = "someURL";
    }
    if(request.domain) {
        response.domain = "someDomain";
    }
    sendResponse(response);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:17:25.347

您可以尝试以下代码：

```
case 'opencomments-site-discussions':
chrome.extension.sendMessage({
    name: "domain"
},

function (response) {
    subjectStr = response.domain;
  if(subjectStr){
    chrome.extension.sendMessage({
        name: "url"
    },

    function (response) {
        bodyStr = "URL of last page visited: " + response.url;
        if (bodyStr) {
            runPayloadCode(subjectStr, bodyStr);
        }
    });
}
}); 
```

但是，您不能将两个消息合并到单个消息中（因为我认为它们是独立的`chrome.extension.sendMessage({name: "url"})`）`chrome.extension.sendMessage({name: "domain"})`并消除多重嵌套吗？

# twitter4j - twitter4j - 按 ID 获取推文

> ID：13661625
> 
> 赞同：5
> 
> 时间：2012-12-01T17:07:26.023
> 
> 标签：twitter4j

当我有推文 ID 和用户 ID 时，如何获取推文？我有一个包含以下行的文件：

```
userID  tweetID 
```

我想我应该去：

```
Query query = new Query("huh ?");
QueryResult result = twitter.search(query);
List<Status> tweets = result.getTweets(); 
```

但我不知道如何拼写`query`

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T23:19:02.503

好吧，这不是搜索电话。这条推文显然被调用`Status`了，通过 ID 检索一条的代码是：

```
 final Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_KEY_SECRET);
    AccessToken accessToken = new AccessToken(TWITTER_TOKEN,
            TWITTER_TOKEN_SECRET);
    twitter.setOAuthAccessToken(accessToken);
    try {
        Status status = twitter.showStatus(Long.parseLong(tweetID));
        if (status == null) { // 
            // don't know if needed - T4J docs are very bad
        } else {
            System.out.println("@" + status.getUser().getScreenName()
                        + " - " + status.getText());
        }
    } catch (TwitterException e) {
        System.err.print("Failed to search tweets: " + e.getMessage());
        // e.printStackTrace();
        // DON'T KNOW IF THIS IS THROWN WHEN ID IS INVALID
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-25T07:02:48.297

接受的答案不再有效。根据[this page](https://stackoverflow.com/questions/11505862/twitter-integrationconsumer-key-secret-pair-already-set)中的答案，代码应更改为以下内容：

```
 String consumerKey = xxxxxxx,
            consumerSecret = xxxxxxx,
            twitterAccessToken = xxxxxxx,
            twitterAccessTokenSecret = xxxxxxx,
            Tweet_ID = xxxxxxx;

    ConfigurationBuilder builder = new ConfigurationBuilder();
    builder.setOAuthConsumerKey(consumerKey);
    builder.setOAuthConsumerSecret(consumerSecret);
    Configuration configuration = builder.build();
    TwitterFactory factory = new TwitterFactory(configuration);
    final Twitter twitter = factory.getInstance();

    //twitter.setOAuthConsumer(consumerKey, consumerSecret);
    AccessToken accessToken = new AccessToken(twitterAccessToken, twitterAccessTokenSecret);
    twitter.setOAuthAccessToken(accessToken);
    try {
        Status status = twitter.showStatus(Long.parseLong(Tweet_ID));
        if (status == null) { //
            // don't know if needed - T4J docs are very bad
        } else {
            System.out.println("@" + status.getUser().getScreenName()
                    + " - " + status.getText());
        }
    } catch (
            TwitterException e) {
        System.err.print("Failed to search tweets: " + e.getMessage());
        // e.printStackTrace();
        // DON'T KNOW IF THIS IS THROWN WHEN ID IS INVALID
    } 
```

# javascript - MongoDB javascript 传递参数

> ID：13661631
> 
> 赞同：1
> 
> 时间：2012-12-01T17:07:58.240
> 
> 标签：javascript, mongodb, map, arguments, reduce

我有一个关于将 MongoDB javascript 中的参数传递给 map 函数的问题。目前，我想到的是这样的：

```
var map = function(n) {
    if(this.x == n){
        emit(this.x);
    }
}
var reduce = function(key, values) {
    values.forEach(function(x) {
        //do something
    });
    return {nd:values};
}
db.smsdb.mapReduce(map(2), reduce, "collection") 
```

但是当我试图这样做时，外壳返回一个错误“不是代码”......所以我猜我没有以正确的方式这样做。有没有人对这种问题有正确的解决方案，我很高兴能把它做对。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:28:31.820

这一行：

```
db.smsdb.mapReduce(map(2), reduce, "collection") 
```

正在调用`map(2)`，结果 ( `undefined`) 作为 map 函数传递`mapReduce`。

而是做这样的事情：

```
db.smsdb.mapReduce(function(){ map.call(this, 2); }, reduce, "collection") 
```

**更新**

以上不起作用，因为该函数在map 函数运行`map`的范围内不可用。`mapReduce`所以你必须把它包装成一个可以生成你需要的地图函数的函数：

```
var mapper = function(n) {
    function map() {
        if(this.x == n){
            emit(this.x);
        }
    }
    return map;
};
db.smsdb.mapReduce(mapper(2), reduce, "collection"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T11:23:47.363

***Mapreduce 中的 scope 代表 Map Reduce 中的全局参数*** 正如@Dave Griffith 所指出的，您可以使用`mapReduce`函数的范围参数。

我很难弄清楚如何正确地将它传递给函数，因为正如其他人所指出的那样，文档不是很详细。最后，我意识到需要`mapReduce`3 个参数：

```
map function
reduce function
object with one or more of the params defined in the doc
Eventually, I arrived at the following code in Javascript:

// I define a variable external to my map and to my reduce functions
var KEYS = {STATS: "stats"};

function m() {
    // I use my global variable inside the map function
    emit(KEYS.STATS, 1);
}

function r(key, values) {
    // I use a helper function
    return sumValues(values);
}

// Helper function in the global scope
function sumValues(values) {
    var result = 0;
    values.forEach(function(value) {
        result += value;
    });
    return value;
}

db.something.mapReduce(
    m,
    r,
    {
         out: {inline: 1},
         // I use the scope param to pass in my variables and functions
         scope: {
             KEYS: 1,
             sumValues: 22// of course, you can pass function objects too
         }
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:22:56.183

我还应该指出，这个解决方案也有效：

`var map = function() { if(this.x == n){ emit(this.x); } } db.smsdb.mapReduce(mapper, reduce, {out:"nodes",scope:{n:2}});`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:19:20.150

你可以这样做：

```
db.smsdb.mapReduce(function() { return map(2); }, reduce, "collection") 
```

# iphone - 即使 userInteractionEnabled = NO 在 firstResponder 上显示 UITextField 键盘

> ID：13661632
> 
> 赞同：3
> 
> 时间：2012-12-01T17:08:06.523
> 
> 标签：iphone, objective-c, ios, uitextfield, uikeyboard

我有一个 UITextField 是第一响应者。我想在进入视图时显示键盘，但我想这样做用户将无法编辑它，并且光标也将一直隐藏。

当您单击键盘字母时，它将写入 UITextField，但用户将无法在其中编辑任何内容，甚至无法复制。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T21:55:04.347

好的，根据我的评论，我的解决方案是让代理`UITextField`的`hidden`属性设置为`YES`. 我所做的是将隐藏的文本字段添加到视图中，然后调用`becomeFirstResponder`它。用户不知道此文本字段存在。在来自文本字段的委托回调中，我获取用户输入的文本并将其添加到 a `UITextView`（尽管您可以将文本添加到您想要的任何内容，就像`UITextField`您的问题中的一样）。我关闭`userInteractionEnabled`了可见文本视图。这会产生您想要的效果。

我创建了一个上传到 Github 的示例项目。（如果您不熟悉它，只需单击 zip 按钮下载它，解压缩并打开 .xcodeproj 文件）。[https://github.com/MaxGabriel/HiddenTextField](https://github.com/MaxGabriel/HiddenTextField)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:26:53.943

我`UISearchBar`在我的`viewController`. 我这样做了：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.searchBar becomeFirstResponder];
} 
```

这对于 a 应该是一样的`UITextField`。

至于禁用编辑，请使用：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    return NO;
} 
```

您应该将 viewController 设置为`UITextField`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:10:43.343

编辑答案：试试这个：

```
1\. [txtField becomeFirstResponder]; 
2\. txtField.enabled = NO; 
3\. when some press on keyboard, then txtField.enabled = YES; 
```

看看这个：[http ://www.youtube.com/watch?v=cKV5csbueHA](http://www.youtube.com/watch?v=cKV5csbueHA)

# python - 龙卷风和postgresql

> ID：13661636
> 
> 赞同：2
> 
> 时间：2012-12-01T17:08:30.673
> 
> 标签：python, facebook, postgresql, tornado

我正在使用来自[facebook 的龙卷风的演示](https://github.com/facebook/tornado/blob/master/demos/blog/blog.py)

但我不想使用 MySQL 并试图用 PG 替换它所以我继续修改如下：

```
define("port", default=8888, help="run on the given port", type=int)
define("pgsql_host", default="127.0.0.1:5432", help="blog database host")
define("pgsql_database", default="pgdb", help="blog database name")
define("pgsql_user", default="admin", help="blog database user")
define("pgsql_password", default="pgpass", help="blog database password") 
```

和

```
 # Have one global connection to the blog DB across all handlers
    self.db = tornado.database.Connection(
        host=options.pgsql_host, database=options.pgsql_database,
        user=options.pgsql_user, password=options.pgsql_password) 
```

但是当我运行它时应用程序只是挂起，如何正确地将其迁移到 PG？

实际上我在一段时间后得到错误：

```
 Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/database.py", line 84, in __init__
    self.reconnect()
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/database.py", line 101, in reconnect
    self._db = MySQLdb.connect(**self._db_args)
  File "/usr/lib/pymodules/python2.7/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/usr/lib/pymodules/python2.7/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (2013, "Lost connection to MySQL server at 'reading initial communication packet', system error: 0") 
```

为什么它连接到 MySQL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T18:45:10.220

您确定可以将它与包括 PostgreSQL 在内的不同 RDBMS 一起使用吗？它使用[torndb](https://github.com/bdarnell/torndb)包，该包是为与 MySQL 一起工作而编写的。

所以我认为如果你想将它与 PostgreSQL 一起使用，你应该为 postgresql 编写自己的 torndb 包。

编辑：正如您在[Tornado Wiki](https://github.com/facebook/tornado/wiki/Links)上看到的，您必须拥有 postgresql 包装器（[momoko](https://github.com/FSX/momoko)或[psycopg](http://initd.org/psycopg/)），有一些链接可供进一步研究。

EDIT2：Momoko 描述：
“Tornado 的异步 Psycopg2 包装器。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T05:30:31.707

`tornado.database`（将在 3.0 中脱离 Tornado）是一个轻量级的 MySQL 包装器。它不支持 MySQL 以外的任何东西。

好消息是，正如@sufleR 所指出的，您有一些选择。您可以直接使用[pyscopg](http://www.initd.org/psycopg/)，也可以使用[momoko](https://github.com/FSX/momoko)，它是 pyscopg 的异步包装器。

# python - 如何使用 datetime 模块在 python 中获取第一秒和最后一秒

> ID：13661641
> 
> 赞同：8
> 
> 时间：2012-12-01T17:09:22.390
> 
> 标签：python, datetime

如何使用 datetime 模块在 python 中获取第一秒和最后一秒，这意味着 00:00:01 和 23:59:59。

我想得到今天之前的六个日期时间。

因此，例如：

今天 12 月 10 日，我想得到

12/9 00:00:01 和 23:59:59

...

12/4 00:00:01 和 23:59:59

非常感谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-01T17:11:47.287

只需使用[`datetime.time.min`](http://docs.python.org/2/library/datetime.html#datetime.time.min)和[`datetime.time.max`](http://docs.python.org/2/library/datetime.html#datetime.time.max)：

```
>>> import datetime
>>> datetime.time.min
datetime.time(0, 0)
>>> datetime.time.max
datetime.time(23, 59, 59, 999999) 
```

您可以[将](http://docs.python.org/2/library/datetime.html#datetime.datetime.combine)其与`datetime.date`实例结合以获得完整`datetime.datetime`实例：

```
>>> datetime.datetime.combine(datetime.date.today(), datetime.time.max)
datetime.datetime(2012, 12, 1, 23, 59, 59, 999999) 
```

要重用现有`datetime.datetime`实例，请将该方法与实例上的`.combine()`方法一起使用以创建新实例：`.date()``datetime.datetime``datetime.datetime`

```
>>> datetime.datetime.combine(datetime.datetime.now().date(), datetime.time.min)
datetime.datetime(2012, 12, 1, 0, 0) 
```

要获取*一系列*日期，请使用`datetime.timedelta`实例创建偏移量。相对于今天的一系列日期很容易：

```
today = datetime.date.today()
lastweek = today - datetime.timedelta(days=7)
for i in range(7):
    aday = lastweek + datetime.timedelta(days=i)
    first = datetime.datetime.combine(aday, datetime.time.min)
    last = datetime.datetime.combine(aday, datetime.time.max)
    print first, last 
```

# sql-server - 如何向用户授予权限？

> ID：13661644
> 
> 赞同：0
> 
> 时间：2012-12-01T17:09:46.217
> 
> 标签：sql-server, permissions

我有一个数据库`projeto`和一个用户`USUARIO`。我应该怎么做才能`USUARIO`访问`projeto`？

我试过了：

```
GRANT ALL ON projeto TO USUARIO 
```

但我收到以下错误：

```
Msg 15151, Level 16, State 1, Line 1     
Cannot find the object 'projeto', because it does not exist or you do not have permission. 
```

我正在使用该`sa`帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:23:01.917

这个错误意味着 SQLServer 找不到名为的对象`"Projeto"`...证明有一个名为...的数据库`"Projeto"`...也许你写错了...检查它运行这个查询`"Select * from sys.databases"`和你的“授予”问题...这里是官方的授予命令的 Microsoft 文档[http://msdn.microsoft.com/en-us/library/ms187965.aspx](http://msdn.microsoft.com/en-us/library/ms187965.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:55:17.460

如果您确实想授予 Projeto 数据库的所有权限，请将它们添加到该数据库中的 db_owner 角色。那是：

```
use [Projeto];
create user [usario]
exec sp_addrolemember @rolename = 'db_owner', @membername = 'usario'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:18:35.093

这可能是一个解决方案吗？

“object_name 是 TABLE、VIEW、STORED PROC 和 SEQUENCE 等数据库对象的名称”

也许您正在尝试授予数据库权限并且`GRANT`不接受数据库名称为`object_name`. 我从未尝试过授予数据库权限，所以我不确定这是否是问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:18:43.447

我认为您是在该数据库（不仅仅是数据库实例）上创建用户之后：

```
USE projeto
CREATE USER USUARIO  FOR LOGIN USUARIO 
```

以上将现有登录名（数据库实例用户）USUARIO 链接到 projeto 数据库上的新用户。

在此之后，您可以通过在 USUARIO 上使用 GRANT 命令进一步扩展权限，因为您现在在数据库中拥有该用户。

# java - JTable 中的动画拖放

> ID：13661648
> 
> 赞同：-1
> 
> 时间：2012-12-01T17:10:03.953
> 
> 标签：java, swing, animation, jtable, drag-and-drop

你知道一些使表格中的拖放更加用户友好的方法吗？例如：拖动时行粘在鼠标上，其他行在拖动时交换位置。你能给我推荐一些图书馆吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:25:20.077

我建议您花点时间阅读[The Rabbit Hole](http://rabbit-hole.blogspot.com.au/search?updated-min=2012-01-01T00:00:00-05:00&updated-max=2013-01-01T00:00:00-05:00&max-results=1)，其中有一些关于拖放主题的优秀文章。

这些是大多数感兴趣的文章

*   [平滑 JList 放置目标动画](http://rabbit-hole.blogspot.com.au/2006/04/smooth-jlist-drop-target-animation.html)
*   [平滑的树掉落动画](http://rabbit-hole.blogspot.com.au/2006/05/smooth-tree-drop-animation.html)
*   [我的拖动图像比你的好](http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html)
*   [死简单的拖动](http://rabbit-hole.blogspot.com.au/2006/06/dead-simple-drags.html)
*   [花式滴](http://rabbit-hole.blogspot.com.au/2006/06/fancy-drops.html)
*   [为所有人拖动图像](http://rabbit-hole.blogspot.com.au/2006/06/fancy-drops.html)
*   [Drop Target Navigation，或者你拖着行李，让门卫拿到门](http://rabbit-hole.blogspot.com.au/2006/08/drop-target-navigation-or-you-drag.html)
*   [摆动拖动图像（改进）](http://rabbit-hole.blogspot.com.au/2006/08/swing-drag-images-improved.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-01T20:25:20.373

好吧，Java 库通常并不擅长“动画”。有一种方法可以使用 Java 附带的 D 和 D 库来做到这一点，但它需要交换行的值，而不是交换行本身。

Java 在这类东西上非常有限。您要么对自己的库进行硬编码，要么使用其他具有此类任务库的语言。

# vba - (VBA) 建立一个 ADODB.Connection 从 Excel 访问

> ID：13661651
> 
> 赞同：1
> 
> 时间：2012-12-01T17:10:24.523
> 
> 标签：vba, ms-access, database-connection, pivot, oledbconnection

我一直在寻找一段时间，但在这个问题上我找不到任何帮助。

我有一个共享的 Access 2007 数据库作为源。我有链接到该数据库中的表的 excel 数据透视表。我最终将有多个 excel 文件链接到数据库（和多个用户），因此，出于访问性能的原因，我想避免与数据库的剩余打开连接，即使连接是只读的。

我已经在 excel 中建立了连接，但我正在尝试编写 VBA 代码来打开与访问表的连接刷新数据透视缓存，然后删除连接。我知道我没有正确地将各个部分组合在一起。有人可以帮我吗？先感谢您。

```
Sub ConnectToAccessAttempt()

Set cn = New ADODB.Connection
cn.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=DB_Name.accdb;Persist Security Info=False"

ActiveWorkbook.PivotCaches(1).CommandText = "table_Name"

ActiveWorkbook.RefreshAll        

End Sub 
```

# firefox - 设置默认的 Firefox 首选项

> ID：13661657
> 
> 赞同：1
> 
> 时间：2012-12-01T17:11:04.323
> 
> 标签：firefox, selenium, configuration, mozilla

我们的持续集成过程使用 Selenium，在过去几个月中，由于 Firefox 自身更新（无论是在开发人员机器上还是在 CI 服务器上），它已经两次被淘汰。

因此，我们将前一个版本的 firefox 与后一个版本一起安装（这次是在一个名为 firefox-16 的目录中），直到 Selenium 赶上。

问题是，app.update.auto 设置（在 about:config 中）默认设置为 true - 这意味着它迟早会更新到 17 并且 selenium 会中断。`/usr/lib/firefox-16/defaults/pref`因此，我们在包含的文件夹中安装了一个 all-no-update.js 文件

```
user_pref("app.update.auto", false); 
```

其中（[根据 MDN](https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/A_brief_guide_to_Mozilla_preferences)）应该覆盖任何其他值。不幸的是，它不起作用 - about:config 页面仍将自动更新显示`app.update.auto`为 true。 [这个 MDN 页面](https://developer.mozilla.org/en-US/docs/Code_snippets/Preferences#Default_preferences)说：

> 所有基于 Mozilla 的应用程序都读取（应用程序目录）/defaults/preferences/*.js

但不幸的是，这也不起作用 - 值保持不变。

我搜索了 Bugzilla 数据库，但找不到任何相关信息（除了 all.js 文件被升级删除的事实，因此请务必使用 all- *** .js 文件）。

有没有人足够了解 Mozilla Firefox 的工作原理来告诉我如何设置这个偏好值？（请不要说“点击 about:config 页面”——它需要自动确保构建可重复且稳定）。

谢谢，詹姆斯

* * *

编辑：抱歉，如果上述内容不清楚：我可以为新创建的配置文件创建默认首选项，就可以了。但由于用户已经有一个配置文件，这不会有任何影响。我可以在每台机器上为禁用此设置的每个用户创建一个新的配置文件 - 但这是很多开销。世界各地的系统管理员肯定会以某种方式使用此功能：一种用集中设置的方式覆盖给定偏好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:14:47.413

最可能的原因是使用`user_pref()`功能 - 正如名称已经说过的那样，这是为用户的首选项（在用户的配置文件中）保留的，应该使用默认首选项`pref()`。

您还必须考虑到您放入此目录的任何内容都是*默认*首选项，它们可以在浏览器配置文件中（在那里的文件`prefs.js`中）被覆盖。如果您没有使用干净的配置文件，则可以在那里设置首选项，然后默认设置不会有任何影响。

供参考：[Mozilla 偏好的简要指南](https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/A_brief_guide_to_Mozilla_preferences)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T12:37:39.273

来自 MDN：[企业部署（配置）](https://developer.mozilla.org/en-US/Firefox/Enterprise_deployment#Configuration)

> 有些配置项需要`lockPref`设置，例如`app.update.enabled`. 如果设置为 just ，它将不起作用`pref`。

怀疑这也可能适用`app.update.auto`。尽管我找不到任何特定于任何给定附加组件的明显（即名为*update*）配置选项。`about:config`所以我什至不知道每个附加设置是否是首选？

# android - 无法获取 Calendar.WEEK_OF_YEAR

> ID：13661666
> 
> 赞同：5
> 
> 时间：2012-12-01T17:12:27.120
> 
> 标签：android, sqlite, calendar

我一直试图让这个工作好几天，我正在扯掉我的头发。我想我只需要另一双眼睛来帮助我。

我将“条目”存储在数据库中，每个条目在输入时都有一个 Unix 时间戳。我有一个系统，用户可以选择任何日期并查看同一周存储的条目。当我让用户设置一个自定义的一周的第一天并且`Calendar.setFirstDayOfWeek().`我永远无法从数据库中获得正确的返回值时，问题出现了周二）。

```
public void getEntries() {

    /* Make sure temp Calendar has same first day */
    temp = Calendar.getInstance();
    temp.setFirstDayOfWeek(date.getFirstDayOfWeek());
    /* Common date ranges in unix time */
    long oneday = 86400000L;
    long oneweek = 604800000L;
    long onemonth = 2628000000L;
    long oneyear = 31536000000L;
    /* The custom date in unix time. For example, the user may have selected Dec. 1, 2012 */
    long set_time = date.getTimeInMillis();
    entries.clear();
    dba.open();

    /* This query gets entries within 1 week and 1 day of the user-set date just to be safe */
    Cursor cc = dba.query("Date < " +(set_time+oneweek+oneday)+ " AND Date > " +(set_time-oneday-oneweek));
            if(cc.moveToFirst()) do {
                /* Set temp calendar to the timestamp of the entry in database */
                long unix = cc.getLong(1);
                temp.setTimeInMillis(unix);
                System.out.println("Temp calendar set to "+temp.getTime().toGMTString()+ " fdow("+temp.getFirstDayOfWeek()+") week("+temp.get(Calendar.WEEK_OF_YEAR)+"), user calendar set to "+date.getTime().toGMTString()+" fdow("+date.getFirstDayOfWeek()+") week("+date.get(Calendar.WEEK_OF_YEAR)+")");
                if(temp.get(Calendar.WEEK_OF_YEAR) == date.get(Calendar.WEEK_OF_YEAR)
                && temp.get(Calendar.YEAR) == date.get(Calendar.YEAR) )
                    /* Entry object is instantiated and added to ArrayList if WEEK_OF_YEAR in temp calendar matches WEEK_OF_YEAR in global calendar */
                    entries.add(createEntryFromCursor(cc));
            } while(cc.moveToNext());

} 
```

在我的测试中，我知道在 2012 年 11 月 30 日有一个条目。将一周的第一天设置为星期二（并且条目是在星期五），如果用户将日期设置为，这应该返回 1 个结果12 月 1 日，如果用户设置为 11 月 26 日（星期一），则没有结果。但是，我得到 1 个结果。怎么了？！

## 编辑

我还是真的需要帮助！我已经用我当前的代码更新了上面的内容。我仍然得到奇怪的结果。例如，一周的第一天是星期一，我从以下渠道得到`System.out`：

`12-09 11:46:38.465: I/System.out(15130): Temp calendar set to 9 Dec 2012 19:29:59 GMT fdow(2) week(49), user calendar set to 9 Dec 2012 14:51:59 GMT fdow(2) week(50)`

这就是说 2012 年 12 月 9 日发生在 2 个不同`WEEK_OF_YEAR`的 s (49/50) 中，即使两个日历的一周的第一天都等于 2。嗯.. 什么？

## 解决方案

我放弃了获取`WEEK_OF_YEAR`并按照建议获取`Date`本周的开始和结束。

```
 // get rollback amt
            temp.setTimeInMillis(set_time);
            int rollback = 0;
            int dayofweek = date.get(Calendar.DAY_OF_WEEK);
            while(dayofweek != temp.getFirstDayOfWeek()) {
                dayofweek--;
                if(dayofweek == 0) dayofweek = 7;
                rollback--;
            }
            int rollfwd = rollback + 6;

            // get start bound
            temp.setTimeInMillis(set_time);
            temp.roll(Calendar.DAY_OF_YEAR, rollback);
            temp.set(Calendar.HOUR_OF_DAY, 0);
            temp.set(Calendar.MINUTE, 1);
            Date start = temp.getTime();
            // get end bound
            temp.setTimeInMillis(set_time);
            temp.roll(Calendar.DAY_OF_YEAR, rollfwd);
            temp.set(Calendar.HOUR_OF_DAY, 23);
            temp.set(Calendar.MINUTE, 59);
            Date end = temp.getTime(); 
```

然后我可以检查`Date`条目是否介于以下之间：

```
if(entrydate.after(start) && entrydate.before(end)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:59:04.780

您可以在android中使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)来获取week_of_year并验证查询用户选择日期的条件。

第 1 步：**获取用户选择星期的选项。** 例如：27

第 2 步：**获取一周的开始和一周的结束。** 第 27 周开始到第 27 周结束。

第 3 步：**使用这两个边界条件过滤您的结果集。**

希望这将帮助您解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T11:26:26.210

> 12-09 11:46:38.465：I/System.out(15130)：临时日历设置为 2012 年 12 月 9 日 19:29:59 GMT fdow(2) 周 (49)，用户日历设置为 2012 年 12 月 9 日 14:51 :59 GMT fdow(2) 周 (50)

您的 Temp 日历值和您的用户日历值之间存在将近 5 小时的差异。

您正在使用 GMT 输出日期字符串：

> temp.getTime().toGMTString()

而您的日历对象将使用本地时区。

> temp.get(Calendar.WEEK_OF_YEAR)+")

这些时间可能在格林威治标准时间的同一天/一周，但不是您当地的时区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T18:55:18.900

这将为您提供自该周的星期一以来的日子

```
int daysSinceMonday = (7 + calendar.get(Calendar.DAY_OF_WEEK) - Calendar.MONDAY) % 7; 
```

使用它来重新计算一周的开始时间。

# c# - 检测 IIS 何时在 Azure 中回收

> ID：13661667
> 
> 赞同：2
> 
> 时间：2012-12-01T17:12:31.827
> 
> 标签：c#, .net, iis, azure, azure-web-roles

我正在以 Web 角色在 Azure 中开发 WCF 服务。我在内存中建立了一个索引，并用它来服务 wcf 请求。我的问题是，在 iis 回收后，这个索引从内存中消失了。有什么办法可以检测到回收事件，并再次将索引复制到内存中？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:25:23.507

是的，您可以在**Application_End**事件中检测到它（在您的 Global.asax.cs 中）。

更好的解决方案是不要将索引放在内存中。由于您使用的是 Web 角色，因此您可以使用 Windows Azure 缓存（您无需为此支付额外费用）。通过使用 Windows Azure 缓存，您可以将索引存储在内存中，但不能存储在应用程序池的进程中。它仍然非常快，并且可以在应用程序池回收中存活下来。

另一个优点是，当您将索引存储在 Windows Azure 缓存中时，同一部署中的所有实例和角色将能够使用相同的缓存。这意味着它们都将使用您存储在其中的相同索引。

# javascript - ExtJS：检测网格数据更改的网格面板事件是什么

> ID：13661675
> 
> 赞同：5
> 
> 时间：2012-12-01T17:13:10.003
> 
> 标签：javascript, extjs, extjs4.1

我有一个 GridPanel，在工具栏中我有两个按钮“拒绝更改”和“保存更改”。下面的代码显示了每个按钮的作用，到目前为止一切都按预期工作。

```
Ext.define('APP.view.MyGrid' ,{
    extend: 'Ext.grid.Panel',

    ...

    initComponent: function() {    
        var me=this;
        me.store = myStore;         
        me.plugins = [
            Ext.create('Ext.grid.plugin.CellEditing', {
                clicksToEdit: 1, autoCancel: false
            }),
        ];          
        me.rejectBtn = {
            xtype:'button', id:'kbsGridCancelBtn', text:'Reject changes',
            handler: function() { me.store.rejectChanges(); }
        },      
        me.saveBtn = {
            xtype:'button', id:'kbsGridSaveBtn', text:'Save changes',
            handler: function() { me.store.sync(); }
        },      
        me.bbar = Ext.create('Ext.toolbar.Toolbar', {
            items : [{ xtype: 'tbfill'},me.rejectBtn,'-',me.saveBtn] 
        });

        me.callParent(arguments);
    }

    ...

}); 
```

**仅当用户修改了网格数据时，**如何启用/禁用按钮（或任何其他操作）？即仅当任何网格行/字段变脏时（反之亦然）？我的代码应该听哪个听众？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:02:33.777

如问题所示，[`CellEditing`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing)网格中有一个插件。通过监听 CellEditing Plugin 的[`validateedit`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing-event-validateedit)事件，该事件在网格中的数据发生更改时触发，可以使用该事件的参数使用 Model 实例的[`set`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-set)函数来更新存储的行。当然，在完成所需的验证之后。代码根据[`getModifiedrecords`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-getModifiedRecords)返回的内容决定是否启用/禁用按钮。

代码：

```
...

listeners: {
    'validateedit': function(cep, e, eOpts) {
        var me = this,            
            rowIdx = e.rowIdx, // row index
            fieldName = e.field,
            newVal = e.value,
            storeRow = this.store.getAt(rowIdx);

        // assuming valid input, proceed with the below    
        storeRow.set(fieldName, newVal);

        // if modified records > 0 then enable buttons
        var enableButtons = Boolean(me.store.getModifiedRecords().length);

        if (enableButtons) {
            /* enable buttons */
        } else { /* disable buttons */ }        

    }, scope: this
}

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T22:23:13.613

Ext.data.Store 数据已更改（此，eOpts）。每当 Store 中的记录以某种方式发生更改时触发 - 这可能包括添加或删除记录，或更新现有记录中的数据 [http://docs.sencha.com/ext-js/4-1/#!/api /Ext.data.Store-event-datachanged](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-event-datachanged)

```
function dataChangedFun(store){
    // code here
}

myStore.on("datachanged", dataChangedFun, this); 
```

当您手动更改商店的记录时，请致电`dataChangedFun(myStore);`

# mysql - 在 MySQL 中选择哪个引擎

> ID：13661676
> 
> 赞同：0
> 
> 时间：2012-12-01T17:13:11.613
> 
> 标签：mysql, web-applications

我在 MySQL 中设计网上商店数据库，下面是我的代码：

```
CREATE  TABLE IF NOT EXISTS `eshop`.`sellers` (
  `seller_id` INT(11) NOT NULL ,
  `seller_name` VARCHAR(45) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  `contacts` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`seller_id`) ,
  UNIQUE INDEX `seller_id_UNIQUE` (`seller_id` ASC) ,
  UNIQUE INDEX `seller_name_UNIQUE` (`seller_name` ASC) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8

CREATE  TABLE IF NOT EXISTS `eshop`.`goods` (
  `good_id` INT NOT NULL ,
  `name` VARCHAR(45) NOT NULL ,
  `description` TEXT NULL ,
  `price` INT NULL ,
  `photo` VARCHAR(45) NOT NULL ,
  `owner_name` VARCHAR(45) NULL ,
  `new` TINYINT(1) NOT NULL ,
  `approvement_status` TINYINT NOT NULL ,
  `contacts` VARCHAR(150) NOT NULL ,
  `date` DATE NOT NULL ,
  `seller_id_fk` INT NOT NULL ,
  PRIMARY KEY (`good_id`) ,
  UNIQUE INDEX `good_id_UNIQUE` (`good_id` ASC) ,
  INDEX `seller_id_fk` (`seller_id_fk` ASC) ,
  CONSTRAINT `seller_id_fk`
    FOREIGN KEY (`seller_id_fk` )
    REFERENCES `eshop`.`sellers` (`seller_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8 
```

我在选择 MySQL 引擎时遇到了问题，从[这篇文章](https://stackoverflow.com/questions/20148/myisam-versus-innodb)中我了解了 MyISAM 和 InnoDB 之间的区别。在我的项目中，由于商店商品的浏览量将超过添加量，因此读取量将多于写入量，因此我需要 MyISAM，但在上面的脚本中，我使用了 InnoDB，因为它支持外键。我应该选择什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:17:39.023

您要问的问题是关于优化和性能的。如果你足够幸运，你的股票和用户群变得非常大，那么你可以担心调整一些东西，这样你就有了很多性能。您还可以利用 MySQL 数据库引擎技术的未来进步。您所拥有的将适用于数十万用户和数万件待售物品。

现在，不要浪费时间担心这些事情。使用你所拥有的，完成你的项目的开发，并在公众面前发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:21:16.723

如果您使用 MyISAM，您的应用程序必须自己维护引用完整性，因此我将根据应用程序框架的设计做出决定。

# python - Python：计算几个（相同长度）列表平均值的快速方法？

> ID：13661677
> 
> 赞同：12
> 
> 时间：2012-12-01T17:13:17.710
> 
> 标签：python

有没有一种简单的方法来计算 Python 中几个（相同长度）列表的平均值？说，我有`[[1, 2, 3], [5, 6, 7]]`，并且想要获得`[3,4,5]`。这是要做100000次，所以希望它快。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-01T17:21:21.200

如果您正在使用`numpy`（这里似乎更合适）：

```
>>> import numpy as np
>>> data = np.array([[1, 2, 3], [5, 6, 7]])
>>> np.average(data, axis=0)
array([ 3.,  4.,  5.]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T17:15:26.277

```
In [6]: l = [[1, 2, 3], [5, 6, 7]]

In [7]: [(x+y)/2 for x,y in zip(*l)]
Out[7]: [3, 4, 5] 
```

（您需要决定是否需要整数或浮点数学，以及使用哪种除法。）

在我的电脑上，上面需要 1.24us：

```
In [11]: %timeit [(x+y)/2 for x,y in zip(*l)]
1000000 loops, best of 3: 1.24 us per loop 
```

因此处理 100,000 个输入需要 0.124 秒。

有趣的是，NumPy 数组在如此小的输入上速度较慢：

```
In [27]: In [21]: a = np.array(l)

In [28]: %timeit (a[0] + a[1]) / 2
100000 loops, best of 3: 5.3 us per loop

In [29]: %timeit np.average(a, axis=0)
100000 loops, best of 3: 12.7 us per loop 
```

如果输入变大，相对时间无疑会改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T17:29:20.407

扩展 NPE 的答案，对于包含`n`要平均的子列表的列表，使用这个（一个 numpy 解决方案可能更快，但我的只使用内置插件）：

```
def average(l):
    llen = len(l)
    def divide(x): return x / llen
    return map(divide, map(sum, zip(*l))) 
```

这将所有子列表相加，然后将结果除以子列表的数量，产生平均值。您可以内联`len`计算并转换`divide`为类似 的 lambda `lambda x: x / len(l)`，但使用显式函数并预先计算长度应该会快一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T20:16:21.380

略微修改的版本，可顺利处理 RGB 像素：

```
def average(*l):
  l=tuple(l)
  def divide(x): return x // len(l)
  return list(map(divide, map(sum, zip(*l))))
print(average([0,20,200],[100,40,100]))
>>> [50,30,150] 
```

# sql - 如何从 azure sql 中删除一个条目？

> ID：13661688
> 
> 赞同：0
> 
> 时间：2012-12-01T17:15:03.133
> 
> 标签：sql, azure

这是我的 azure sql 数据库的屏幕截图。我想删除用户 Nazerke。我已经删除了该行，当我想保存它时，它给了我“WHERE 附近的语法错误”，正如您在数据库顶部看到的那样。如何删除用户以及可能的解决方案？![在此处输入图像描述](../Images/6c08bd56cf8a02a0c4bb9267bafca2f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:32:27.393

看起来密码包含奇怪的字符，也许 Silverlight 应用程序有支持这些字符的问题（不确定）。您能否尝试删除其他记录，例如用户名为**JDuck**的用户？

**更新：**实际的解决方法可以在这个问题中找到：[how to change permission for the service account in azure's sql management portal](https://stackoverflow.com/questions/13662752/how-to-change-permission-for-the-service-account-in-azures-sql-management-porta/13663466#13663466)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:13:21.167

这只是您创建的用户定义表？只需删除该行：`delete from [dbo].[Users] where Guid = '<guid>'`

# ruby - 红宝石，没有方法错误

> ID：13661690
> 
> 赞同：0
> 
> 时间：2012-12-01T17:15:18.853
> 
> 标签：ruby

运行以下 ruby​​ 脚本时，我收到以下错误：

```
s3parse.rb:12:in `block in <class:AccountLog>': undefined method `extract_account_id' for AccountLog:Class (NoMethodError) 
```

我不认为它应该是一个类方法，有没有理由不考虑我的方法？

```
class AccountLog
attr_accessor :bytes, :account_id, :date

    def extract_account_id(line)
            line.match(%r{accounts/(\d+)}).captures.join.to_i
    end

    s3log = File.open('vidcoder.txt').each do |line|
        account_log = AccountLog.new
        account_log.date = line.match(%r{\[[^:]*}).to_s.delete"[" #need to finish this regex to make it work
        account_log.account_id = extract_account_id(line)
        account_log.bytes = line.match(%r{^.*\s+HTTP.*\s+-\s+(\d+)\s+}).captures.join.to_i
        puts "\n" 
        puts "The api request on #{account_log.date} was fromm account number #{account_log.account_id} and the bytes were #{account_log.bytes}"
    end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:23:59.543

`def extract_account_id`将定义一个实例方法。

在您调用它的方式中，您需要一个类方法。

像这样定义它：

```
def self.extract_account_id(line) 
```

或者，因为您已经有一个`AccountLog`实例，所以使用它来调用`extract_account_id`：

```
account_log.account_id = account_log.extract_account_id(line) 
```

请注意，第二种方式不需要更改方法定义，只需`extract_account_id`通过`account_log`实例调用。

我想你会想把`s3log = File...`类定义放在外面。

或者改用一个常量：`S3log = ...`

然后你可以访问它`AccountLog::S3log`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:24:08.857

你有什么理由不认为它应该是一个类方法？您在类方法的上下文中使用它，这就是为什么它说类 AccountLog 没有这样的方法。

如果你命名你的方法，`self.extract_account_id(line)`我相信它会起作用。

从你想要做的事情来看，我认为这就是你想要的？

```
class AccountLog
  attr_accessor :bytes, :account_id, :date

  def self.extract_account_id(line)
    line.match(%r{accounts/(\d+)}).captures.join.to_i
  end
end

s3log = File.open('vidcoder.txt').each do |line|
  account_log = AccountLog.new
  account_log.date = line.match(%r{\[[^:]*}).to_s.delete"[" #need to finish this regex to make it work
  account_log.account_id = extract_account_id(line)
  account_log.bytes = line.match(%r{^.*\s+HTTP.*\s+-\s+(\d+)\s+}).captures.join.to_i
  puts "\n" 
  puts "The api request on #{account_log.date} was fromm account number #{account_log.account_id} and the bytes were #{account_log.bytes}"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:34:09.687

虽然您可以采用类方法方法，但似乎还有更多工作要做。

您应该将提取逻辑本身放在一个方法中，而不是让它在您的类中闲逛。然后在类之外，有一个 AccountLog 实例，您可以在其中调用用于提取日志和帐户 ID 的方法。那时，您可以使用这些值做一些事情。

类方法与否是我认为在类更干净之后我们可以探索的细节。

# gwt - GWT Celltable IE9 问题

> ID：13661691
> 
> 赞同：3
> 
> 时间：2012-12-01T17:15:22.497
> 
> 标签：gwt, gwt-2.5

当我在单元格表中对 TextInputCell 使用 KeyboardSelectionPolicy.DISABLED 时，事件未正确触发，因此始终不会调用 FieldUpdater。

我的代码片段看起来像这样

```
 CellTable<String> cellTable = new CellTable<String>();
 cellTable.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.DISABLED);
 Column<String, String> column = new Column<String, String>(new TextInputCell()) {
@Override
public String getValue(String object) {
    //Do something
}
};
column.setFieldUpdater(new FieldUpdater<String, String>() {

@Override
public void update(int index, String object, String value) {
    //Do something
}
});
cellTable.addColumn(column); 
```

我是唯一一个面临这个问题的人还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:53:31.143

是的，我是对的，这是在 gwt 问题跟踪器中报告的。

[错误编号 7804](http://code.google.com/p/google-web-toolkit/issues/detail?can=2&q=7804&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars&id=7804)

我在跟踪 gwt 的已知 IE 问题时发现了这一点。

我还没有尝试过，但据报道。如果我是你，我会寻找问题跟踪器。

# grails - 简单的 Hello World Grails 表单提交

> ID：13661695
> 
> 赞同：6
> 
> 时间：2012-12-01T17:15:50.827
> 
> 标签：grails, web

我是 Grails 的新手，我正在尝试使用一个非常简单的示例。我应该提交一个表单并在屏幕上显示“Hello World”。它由以下控制器组成：

```
package surface

class SearchController {

 def index() {
    render(view: "search")
 }

 def result() {
    render "Hello World"
 }
} 
```

和一个视图，其形式为：

```
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<g:form name="searchform" url="result">
<g:textArea cols="80" rows="30" name="searchfield"/>
<g:actionSubmit value="Ask"/>
</g:form>
</body>
</html> 
```

当我单击“询问”时，我收到 404 错误，但浏览器正确访问“/surface/search/result”。当我不使用表单直接输入该地址时，“Hello World”会正确显示。这可能是显而易见的，但我似乎无法从文档中找出为什么这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:44:41.660

作为@Tom Metz 答案的补充，您在 Grails 控制器结构中需要记住的是，每个公共方法都被视为一个[action](http://grails.org/doc/latest/guide/theWebLayer.html#understandingControllersAndActions)。此操作映射到一个 url。在您的示例中将存在`/search/index`和`/search/result`（控制器+操作）。

的文档`g.form`是正确的，因为这说明了；

> url（可选）- 包含操作、控制器、id 等的映射。

因此，要更正您的视图，您可以将操作设置为已注释，或者您可以调整使用 url 的方式：

```
<g:form name="myForm" url="[action:'result',controller:'search']"> 
```

# java - 检索 Map 中的对象

> ID：13661699
> 
> 赞同：1
> 
> 时间：2012-12-01T17:16:12.190
> 
> 标签：java, map, hashcode

当我更改对象的实例变量时，我试图将对象检索为 Map 中的键。就我而言，当我在 Map 结构中搜索关键对象时，它应该在 hashCode 方法返回与最初相同的值时出现。但是，根据以下代码，我无法通过更改了变量权重值的方法 get() 检索对象：

```
public class Car  implements Comparable<Car> {

 int weight;
 String name;

 public Car(int w, String n) {
    weight=w;
    name=n;
 }

public boolean equals(Object o){
    if(o instanceof Car){
        Car d = (Car)o;
        return ((d.name.equals(name)) && (d.weight==weight));
    }
    return false;

}

public int hashCode(){
    return weight/2 + 17;
}

public String toString(){
    return "I am " +name+ " with weight: "+weight;
}

public int compareTo(Car d){
    if(this.weight>d.weight)
        return 1;
    else if(this.weight<d.weight)
        return -1;
    else
        return this.name.compareTo(d.name);
}

}

public static void main(String[] args) {
    Car d1 = new Car(107, "a");
    Car d2 = new Car(110, "b");
    Car d3 = new Car(110, "c");
    Car d4 = new Car(107, "a");

    Map<Car, Integer> m = new HashMap<Car, Integer>();
    m.put(d1, 1);
    m.put(d2, 2);
    m.put(d3, 3);
    m.put(d4, 16);

    System.out.println(m.get(d1).toString());
    d1.weight = 34;
    System.out.println(m.get(new Car(34, "a")));

    for(Map.Entry<Car, Integer> me : m.entrySet())
        System.out.println(me.getKey().toString() + " value: " +me.getValue());

} 
```

输出是：

```
16

null

I am a with weight: 34 16

I am c with weight: 110 3

I am b with weight: 110 2 
```

但是，如果我不更改 weight 的值（省略行：）`d1.weight = 34;`，只需使用以下代码行：

```
System.out.println(m.get(new Car(107, "a"))); 
```

输出是：

```
16

16

I am a with weight: 107 value: 16

I am c with weight: 110 value: 3

I am b with weight: 110 value: 2 
```

它实际上找到了对象。它是否以两种方式达到预期的输出，或者它是否也应该在第一个版本中找到并检索到该对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T17:24:31.807

在将可变对象作为键存储在哈希表中时，您应该非常小心。哈希码仅在对象插入时计算一次。如果您稍后以影响其哈希码的方式更改对象，则很可能无法找到它。

每当进行此类更改时，您都需要删除该对象并重新插入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:31:42.983

```
System.out.println(m.get(new Car(34, "a"))); 
```

您的地图在此处返回 null，因为它不包含哈希码为 34 的键对象。

然而随着

```
System.out.println(m.get(new Car(107, "a"))); 
```

您的地图确实返回了一个对象，因为它确实包含一个哈希码为 70 的关键对象。

# orbeon - Orbeon：如何设置 a 的 href标记，基于 a 中的当前节点 ?

> ID：13661703
> 
> 赞同：1
> 
> 时间：2012-12-01T17:16:28.670
> 
> 标签：orbeon

我正在尝试根据 xforms:repeat 中当前节点的叶子值设置标签的 href 属性。我尝试了不同的语法，但无法使其工作。这是我最后一次尝试（使用 xforms:var）。注意：迭代和列表都可以，只是 href 不是（空指针异常）。

```
<xforms:repeat id="sous_menu_branches" nodeset="./Branches/Branche">
    <xhtml:li>
         <xforms:var name="brancheId" value="./BrancheId"/>
         <xhtml:a href="/notes-saisie/?brancheId={$brancheId}">         
             <xforms:output ref="Nom" mediatype="text/html"/>
         </xhtml:a>
     </xhtml:li>
</xforms:repeat> 
```

实际上，当我尝试在我的视图（view.xsl）中使用 xforms:var 时，我总是遇到 java 空指针错误。例如，在下面的代码片段中，第一个 xforms:output 抛出异常，但不是第二个（应该访问相同的值）：

```
 <xforms:repeat id="sous_menu_branches" nodeset="./Branches/Branche">
     <xhtml:li>
         <xforms:var name="current-item" value="."/>
         <xforms:output id="my-count" ref="$current-item/Nom"/>
         <xhtml:a href="/notes-saisie/?brancheId=888">        
             <xforms:output ref="./Nom" mediatype="text/html"/>
         </xhtml:a>
     </xhtml:li>
 </xforms:repeat> 
```

谁能告诉我我做错了什么？提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:20:43.367

您没有说您使用的是哪个版本的 Orbeon Forms，但我怀疑您使用的是尚不支持`xforms:var`. 尝试`xxforms:variable`改用。

# c# - 从 2 个派生类中选择正确的枚举列表

> ID：13661707
> 
> 赞同：5
> 
> 时间：2012-12-01T17:17:25.877
> 
> 标签：c#, dictionary, enums, modeling

我正在构建一个图书库应用程序，我有一个抽象图书类、两种类型的派生图书和两个将保存图书类型的枚举。每本书都可以与一种或多种类型相关。

```
 abstract public class Book
    {   
       public int Price { get; set; } 
       ...
    }

    public enum ReadingBooksGenre
    {
       Fiction,
       NonFiction
    }

    public enum TextBooksGenre
    {
        Math,
        Science
    } 

    abstract public class ReadingBook : Book
    { 
        public List<ReadingBooksGenre> Genres { get; set; }
    }

    abstract public class TextBook : Book
    {   
        public List<TextBooksGenre> Genres { get; set; }
    } 
```

现在我想根据书籍类型保存折扣（没有双重折扣，只计算最高折扣），所以我正在考虑制作两个字典来保存每种类型的所有折扣，如​​下所示：

```
 Dictionary<ReadingBooksGenre, int> _readingBooksDiscounts;
    Dictionary<TextBooksGenre, int> _textBooksDiscounts; 
```

所以现在我需要检查每本书的类型以找到最高的折扣，有没有比这更好的方法：

```
 private int GetDiscount(Book b)
    {
        int maxDiscount = 0;
        if (b is ReadingBook)
        {
            foreach (var genre in (b as ReadingBook).Genres)
            {
                // checking if the genre is in discount, and if its bigger than other discounts.
                if (_readingBooksDiscounts.ContainsKey(genre) && _readingBooksDiscounts[genere]>maxDiscount)
                {
                    maxDiscount = _readingBooksDiscounts[genere];
                }
            }
        }
        else if (b is TextBook)
        {
            foreach (var genre in (b as TextBook).Genres)
            {
                if (_textBooksDiscounts.ContainsKey(genre) && _textBooksDiscounts[genere]>maxDiscount)
                {
                    maxDiscount = _textBooksDiscounts[genere];
                }
            }
        }
        return maxDiscount;
    } 
```

有没有办法在不检查类型的情况下选择正确的字典？或者甚至是一种不用字典或使用字典的方法？也许以某种方式将书籍类型与枚举联系起来？

很高兴听到任何改进建议。

（根据书名、日期和作者，还有很多折扣。甚至更多的书类型，这就是为什么这种方式对我来说不合适的原因）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:59:30.483

您的`GetDiscount`方法是违反[开放/封闭原则的经典示例。](http://en.wikipedia.org/wiki/Open/closed_principle)当您添加新书类型时，您必须将新`if`块添加到`GetDiscount`.

更好的方法是使用一些现有的技术，这些技术允许您添加新功能而无需修改现有代码。例如，[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)。我将编写一些复合折扣评估器的实现草案。您可以轻松地添加基于任何书籍属性（日期、价格等）的新折扣评估器。

另外，我将使用接口而不是继承。继承是两个实体之间非常紧密的联系，在这种情况下它是过度的。

清单有 167 行，所以这里是更舒适的[pastebin 复制](http://pastebin.com/SyM0cK6u)

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            var compositeDiscountEvaluator = ConfigureEvaluator();
            var scienceBook = new TextBook
                               {
                                   Date = DateTime.Now,
                                   Price = 100,
                                   Genres = new[] {TextBooksGenre.Math}
                               };
            var textBook = new TextBook
                               {
                                   Date = DateTime.Now,
                                   Price = 100,
                                   Genres = new[] {TextBooksGenre.Math, TextBooksGenre.Science}
                               };
            var fictionBook = new ReadingBook
                        {
                            Date = DateTime.Now,
                            Price = 200,
                            Genres = new[] {ReadingBooksGenre.Fiction}
                        };
            var readingBook = new ReadingBook
                                  {
                                      Date = DateTime.Now,
                                      Price = 300,
                                      Genres = new[] {ReadingBooksGenre.Fiction, ReadingBooksGenre.NonFiction}
                                  };
            Console.WriteLine(compositeDiscountEvaluator.GetDiscount(scienceBook));
            Console.WriteLine(compositeDiscountEvaluator.GetDiscount(textBook));
            Console.WriteLine(compositeDiscountEvaluator.GetDiscount(fictionBook));
            Console.WriteLine(compositeDiscountEvaluator.GetDiscount(readingBook));
        }

        private static IDiscountEvaluator ConfigureEvaluator()
        {
            var evaluator = new CompositeDiscountEvaluator();
            evaluator.AddEvaluator(new ReadingBookDiscountEvaluator());
            evaluator.AddEvaluator(new TextBookDiscountEvaluator());
            return evaluator;
        }
    }

    class CompositeDiscountEvaluator : IDiscountEvaluator
    {
        private readonly ICollection<IDiscountEvaluator> evaluators;

        public CompositeDiscountEvaluator()
        {
            evaluators = new List<IDiscountEvaluator>();
        }

        public void AddEvaluator(IDiscountEvaluator evaluator)
        {
            evaluators.Add(evaluator);
        }

        public bool CanEvaluate<TGenre>(IBook<TGenre> book)
        {
            return evaluators.Any(e => e.CanEvaluate(book));
        }

        public int GetDiscount<TGenre>(IBook<TGenre> book)
        {
            if (!CanEvaluate(book))
                throw new ArgumentException("No suitable evaluator");
            return evaluators.Where(e => e.CanEvaluate(book)).Select(e => e.GetDiscount(book)).Max();
        }
    }

    interface IDiscountEvaluator
    {
        bool CanEvaluate<TGenre>(IBook<TGenre> book);
        int GetDiscount<TGenre>(IBook<TGenre> book);
    }

    class ReadingBookDiscountEvaluator : IDiscountEvaluator
    {
        private readonly IDictionary<ReadingBooksGenre, int> discounts;

        public ReadingBookDiscountEvaluator()
        {
            discounts = new Dictionary<ReadingBooksGenre, int>
                            {
                                {ReadingBooksGenre.Fiction, 3},
                                {ReadingBooksGenre.NonFiction, 4}
                            };
        }

        public bool CanEvaluate<TGenre>(IBook<TGenre> book)
        {
            return book is ReadingBook;
        }

        public int GetDiscount<TGenre>(IBook<TGenre> book)
        {
            var readingBook = (ReadingBook) book;
            return readingBook.Genres.Select(g => discounts[g]).Max();
        }
    }

    class TextBookDiscountEvaluator : IDiscountEvaluator
    {
        private readonly IDictionary<TextBooksGenre, int> discounts;

        public TextBookDiscountEvaluator()
        {
            discounts = new Dictionary<TextBooksGenre, int>
                            {
                                {TextBooksGenre.Math, 1},
                                {TextBooksGenre.Science, 2}
                            };
        }

        public bool CanEvaluate<TGenre>(IBook<TGenre> book)
        {
            return book is TextBook;
        }

        public int GetDiscount<TGenre>(IBook<TGenre> book)
        {
            var textBook = (TextBook) book;
            return textBook.Genres.Select(g => discounts[g]).Max();
        }
    }

    interface IBook<TGenre>
    {
        int Price { get; set; }
        DateTime Date { get; set; }
        TGenre[] Genres { get; set; }
    }

    class ReadingBook : IBook<ReadingBooksGenre>
    {
        public int Price { get; set; }
        public DateTime Date { get; set; }
        public ReadingBooksGenre[] Genres { get; set; }
    }

    class TextBook : IBook<TextBooksGenre>
    {
        public int Price { get; set; }
        public DateTime Date { get; set; }
        public TextBooksGenre[] Genres { get; set; }
    }

    enum TextBooksGenre
    {
        Math,
        Science
    }

    public enum ReadingBooksGenre
    {
        Fiction,
        NonFiction
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:57:00.170

我将创建一个接受字典和相应类型的书的通用方法。这样，您可以获得足够通用的算法并且您的代码非常干净。自然地，这样 GetDiscount 也是通用的，但你不能以错误的方式混合它们。（哦，是的，Book 也是通用的，类型返回正确的类型。）我认为这段代码可以用一点 LINQ 来实现，但也许不值得付出额外的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T19:41:39.770

在我看来，系统中的“流派”概念对于简单的枚举来说太复杂了。我会将这个概念推广到它自己的类层次结构中：

```
public class Genre
{
    public int Discount { get; set; }
}
public class ReadingBooksGenre : Genre { }
public class TextBooksGenre : Genre { }

abstract public class Book<T> where T : Genre
{
    public List<T> Genres { get; set; }
    public int Discount
    {
        get
        {
            return (Genres.Count == 0) ? 0 : Genres.Max(g => g.Discount);
        }
    }
}
abstract public class ReadingBook : Book<ReadingBooksGenre> { }
abstract public class TextBook : Book<TextBooksGenre> { } 
```

# google-visualization - 修改饼图的尺寸（谷歌图表工具）

> ID：13661708
> 
> 赞同：0
> 
> 时间：2012-12-01T17:17:28.353
> 
> 标签：google-visualization

**短版**- 我想[`google.visualization.PieChart`](https://developers.google.com/chart/interactive/docs/gallery/piechart)在构造后修改对象的宽度/高度，但我找不到任何文档指出它是如何完成的。

**上下文**- 我正在构建一个在谷歌地图上覆盖一堆数据的可视化。在某些纬度/经度坐标处，我想渲染一个饼图标记，详细说明与该地点相关的某些统计数据。

为避免屏幕混乱，我想根据当前缩放级别改变饼图标记的尺寸。这需要我重新渲染当前可见的所有标记，或者最好更改所有标记的宽度/高度属性。

![谷歌地图上的饼图](../Images/58812eead3dd99910b07320d9a692733.png)

我目前使用以下设置来呈现我的图表：

```
 legend: {position: "none"},
        width: 200,
        height: 200,
        backgroundColor: "transparent",
        pieSliceText: "none",
        colors: ["#C10001", "#F79647", "#92D051", "#558ED5", "#7F7F7F"],
        tooltip: {textStyle: {fontSize: 14}} 
```

有没有办法在创建图表后更改图表的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:41:59.340

我不认为 API 中有什么东西。不过，使用一点点 Javascript，您应该能够修改包含图表的 SVG 标记的属性。一种可能的方法是添加一个 viewBox 属性，该属性将放大或缩小饼图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:51:52.940

到目前为止，我唯一可行的解​​决方案是使用更改的宽度/高度设置重新绘制整个图表。此代码段使用 jQuery。

```
for (var i = 0; i < dataPoints.length; ++i) {
    var drawingOptions = $.extend({}, defaultDrawOptions);
    drawingOptions.width = defaultDrawOptions.width*(currentZoom/defaultZoom);
    drawingOptions.height = defaultDrawOptions.height*(currentZoom/defaultZoom);

    dataPoints[i].chart.draw(dataPoints[i].dataSource, drawingOptions);
} 
```

如您所见，这种半生不熟的解决方案相当笨拙，并且可能会不必要地降低性能。

# multithreading - 多线程文件上传同步

> ID：13661713
> 
> 赞同：21
> 
> 时间：2012-12-01T17:17:53.130
> 
> 标签：multithreading, macos, delphi, upload, firemonkey

目前我正在开发一个 Delphi XE3 客户端/服务器应用程序来传输文件（使用 Indy FTP 组件）。客户端部分监视一个文件夹，获取其中的文件列表，将它们上传到服务器并删除原始文件。上传是由一个单独的线程完成的，该线程一个一个地处理文件。文件的范围从 0 到几千不等，它们的大小也有很大差异。

这是一个为 OSX 和 Windows 编译的 Firemonkey 应用程序，所以我不得不使用 TThread 而不是我更喜欢的 OmniThreadLibrary。我的客户报告说应用程序随机冻结。我无法复制它，但由于我对 TThread 没有太多经验，我可能在某处放置了死锁条件。我读了很多例子，但我仍然不确定一些多线程细节。

应用程序结构很简单：
主线程中的计时器检查文件夹并将有关每个文件的信息放入记录中，该记录进入通用 TList。此列表保存有关文件名称、大小、进度、文件是完全上传还是必须重试的信息。所有这些都显示在带有进度条等的网格中。这个列表只能由主线程访问。之后，通过调用 AddFile 方法（下面的代码）将列表中的项目发送到线程。该线程将所有文件存储在一个线程安全队列中，例如[http://delphihaven.wordpress.com/2011/05/06/using-tmonitor-2/](http://delphihaven.wordpress.com/2011/05/06/using-tmonitor-2/)
当文件上传时，上传线程通知主线程调用同步。
主线程定期调用 Uploader.GetProgress 方法来检查当前文件进度并显示出来。这个函数实际上不是线程安全的，但它会导致死锁，还是只返回错误的数据？

什么是进行进度检查的安全有效的方法？

那么这种方法可以吗还是我错过了什么？你会怎么做？
例如，我想创建一个新线程只是为了读取文件夹内容。这意味着我使用的 TList 必须是线程安全的，但必须始终访问它以刷新 GUI 网格中显示的信息。不是所有的同步都会减慢 GUI 的速度吗？

我已经发布了下面的简化代码，以防有人想看它。如果没有，我很乐意听到一些关于我应该使用什么的意见。主要目标是在 OSX 和 Windows 上工作；能够显示有关所有文件的信息和当前文件的进度；无论文件的数量和大小如何，都能做出响应。

这是上传线程的代码。为了便于阅读，我删除了一些内容：

```
type
  TFileStatus = (fsToBeQueued, fsUploaded, fsQueued);
  TFileInfo = record
    ID: Integer;
    Path: String;
    Size: Int64;
    UploadedSize: Int64;
    Status: TFileStatus;
  end;

  TUploader = class(TThread)
  private
    FTP: TIdFTP;
    fQueue: TThreadedQueue<TFileInfo>;
    fCurrentFile: TFileInfo;
    FUploading: Boolean;
    procedure ConnectFTP;
    function UploadFile(aFileInfo: TFileInfo): String;
    procedure OnFTPWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
    procedure SignalComplete;
    procedure SignalError(aError: String);
  protected
    procedure Execute; override;
  public
    property Uploading: Boolean read FUploading;
    constructor Create;
    destructor Destroy; override;
    procedure Terminate;
    procedure AddFile(const aFileInfo: TFileInfo);
    function GetProgress: TFileInfo;
  end;

procedure TUploader.AddFile(const aFileInfo: TFileInfo);
begin
  fQueue.Enqueue(aFileInfo);
end;

procedure TUploader.ConnectFTP;
begin
  ...
    FTP.Connect;
end;

constructor TUploader.Create;
begin
  inherited Create(false);
  FreeOnTerminate := false;
  fQueue := TThreadedQueue<TFileInfo>.Create;
  // Create the TIdFTP and set ports and other params
  ...
end;

destructor TUploader.Destroy;
begin
  fQueue.Close;
  fQueue.Free;
  FTP.Free;
  inherited;
end;

// Process the whole queue and inform the main thread of the progress
procedure TUploader.Execute;
var
  Temp: TFileInfo;
begin
  try
    ConnectFTP;
  except
    on E: Exception do
      SignalError(E.Message);
  end;

  // Use Peek instead of Dequeue, because the item should not be removed from the queue if it fails
  while fQueue.Peek(fCurrentFile) = wrSignaled do
    try
      if UploadFile(fCurrentFile) = '' then
      begin
        fQueue.Dequeue(Temp);  // Delete the item from the queue if succesful
        SignalComplete;
      end;
    except
      on E: Exception do
        SignalError(E.Message);
    end;
end;

// Return the current file's info to the main thread. Used to update the progress indicators
function TUploader.GetProgress: TFileInfo;
begin
  Result := fCurrentFile;
end;

// Update the uploaded size for the current file. This information is retrieved by a timer from the main thread to update the progress bar
procedure TUploader.OnFTPWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
begin
  fCurrentFile.UploadedSize := AWorkCount;
end;

procedure TUploader.SignalComplete;
begin
  Synchronize(
    procedure
    begin
      frmClientMain.OnCompleteFile(fCurrentFile);
    end);
end;

procedure TUploader.SignalError(aError: String);
begin
  try
    FTP.Disconnect;
  except
  end;
  if fQueue.Closed then
    Exit;

  Synchronize(
    procedure
    begin
      frmClientMain.OnUploadError(aError);
    end);
end;

// Clear the queue and terminate the thread
procedure TUploader.Terminate;
begin
  fQueue.Close;
  inherited;
end;

function TUploader.UploadFile(aFileInfo: TFileInfo): String;
begin
  Result := 'Error';
  try
    if not FTP.Connected then
      ConnectFTP;
    FUploading := true;
    FTP.Put(aFileInfo.Path, ExtractFileName(aFileInfo.Path));     
    Result := '';
  finally
    FUploading := false;
  end;
end; 
```

以及与上传者交互的部分主线程：

```
......
// Main form
    fUniqueID: Integer;  // This is a unique number given to each file, because there might be several with the same names(after one is uploaded and deleted)
    fUploader: TUploader;         // The uploader thread
    fFiles: TList<TFileInfo>;
    fCurrentFileName: String;     // Used to display the progress
    function IndexOfFile(aID: Integer): Integer;    //Return the index of the record inside the fFiles given the file ID
  public
    procedure OnCompleteFile(aFileInfo: TFileInfo);
    procedure OnUploadError(aError: String);
  end;

// This is called by the uploader with Synchronize
procedure TfrmClientMain.OnUploadError(aError: String);
begin
  // show and log the error
end;

// This is called by the uploader with Synchronize
procedure TfrmClientMain.OnCompleteFile(aFileInfo: TFileInfo);
var
  I: Integer;
begin
  I := IndexOfFile(aFileInfo.ID);
  if (I >= 0) and (I < fFiles.Count) then
  begin
    aFileInfo.Status := fsUploaded;
    aFileInfo.UploadedSize := aFileInfo.Size;
    FFiles.Items[I] := aFileInfo;
    Inc(FFilesUploaded);
    TFile.Delete(aFileInfo.Path);
    colProgressImg.UpdateCell(I);
  end;
end;

procedure TfrmClientMain.ProcessFolder;
var
  NewFiles: TStringDynArray;
  I, J: Integer;
  FileInfo: TFileInfo;
begin
    // Remove completed files from the list if it contains more than XX files
    while FFiles.Count > 1000 do
      if FFiles[0].Status = fsUploaded then
      begin
        Dec(FFilesUploaded);
        FFiles.Delete(0);
      end else
        Break;

    NewFiles := TDirectory.GetFiles(WatchFolder, '*.*',TSearchOption.soAllDirectories);
    for I := 0 to Length(NewFiles) - 1 do
    begin
          FileInfo.ID := FUniqueID;
          Inc(FUniqueID);
          FileInfo.Path := NewFiles[I];
          FileInfo.Size := GetFileSizeByName(NewFiles[I]);
          FileInfo.UploadedSize := 0;
          FileInfo.Status := fsToBeQueued;
          FFiles.Add(FileInfo);

      if (I mod 100) = 0 then
      begin
        UpdateStatusLabel;
        grFiles.RowCount := FFiles.Count;
        Application.ProcessMessages;
        if fUploader = nil then
          break;
      end;
    end;

    // Send the new files and resend failed to the uploader thread
    for I := 0 to FFiles.Count - 1 do
      if (FFiles[I].Status = fsToBeQueued) then
      begin
        if fUploader = nil then
          Break;
        FileInfo := FFiles[I];
        FileInfo.Status := fsQueued;
        FFiles[I] := FileInfo;
        SaveDebug(1, 'Add:    ' + ExtractFileName(FFiles[I].Path));
        FUploader.AddFile(FFiles[I]);
      end;
end;

procedure TfrmClientMain.tmrGUITimer(Sender: TObject);
var
  FileInfo: TFileInfo;
  I: Integer;
begin
  if (fUploader = nil) or not fUploader.Uploading then
    Exit;
  FileInfo := fUploader.GetProgress;
  I := IndexOfFile(FileInfo.ID);
  if (I >= 0) and (I < fFiles.Count) then
  begin
    fFiles.Items[I] := FileInfo;
    fCurrentFileName := ExtractFileName(FileInfo.Path);
    colProgressImg.UpdateCell(I);
  end;
end;

function TfrmClientMain.IndexOfFile(aID: Integer): Integer;
var
  I: Integer;
begin
  Result := -1;
  for I := 0 to FFiles.Count - 1 do
    if FFiles[I].ID = aID then
      Exit(I);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:56:51.180

这可能是一个长镜头，但这是另一种可能性[前一个答案可能更有可能]（我刚刚遇到过，但以前知道的）：使用 Synchronize 可能导致死锁。这是一个关于为什么会发生这种情况的博客： [Delphi-Workaround-for-TThread-SynchronizeWaitFor-.aspx](http://www.finalbuilder.com/Resources/Blogs/PostId/675/Delphi-Workaround-for-TThread-SynchronizeWaitFor-.aspx)

文章的相关点：

> 线程 A 调用 Synchronize(MethodA)
> 
> 线程 B 调用 Synchronize(MethodB)
> 
> 然后，在主线程的上下文中：
> 
> 处理消息时主线程调用 CheckSynchronize()
> 
> CheckSynchronize 被实现为批处理所有等待的调用（*）。所以它会拾取等待调用的队列（包含 MethodA 和 MethodB）并一一循环遍历它们。
> 
> MethodA 在主线程的上下文中执行。假设 MethodA 调用 ThreadB.WaitFor
> 
> WaitFor 调用 CheckSynchronize 来处理任何对 Synchronize 的等待调用
> 
> 理论上，这应该然后处理 ThreadB 的 Synchronize(MethodB)，让 Thread B 完成。但是，MethodB 已经拥有第一个 CheckSynchronize 调用，因此它永远不会被调用。
> 
> 僵局！

[Embarcadero QC 文章](http://qc.embarcadero.com/wc/qcmain.aspx?d=22267)更详细地描述了该问题。

虽然我在上面的代码中没有看到任何 ProcessMessages 调用，或者就此而言，在同步期间将调用 WaitFor，但在调用同步时，另一个线程将同步调用为好吧 - 但是主线程已经同步并且正在阻塞。

一开始我并没有这样做，因为我倾向于避免像瘟疫一样的同步调用，并且通常使用其他方法从线程设计 UI 更新，例如消息传递和带有消息通知的线程安全列表，而不是同步调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:06:51.587

这可能不是问题，但 TFileInfo 是一个记录。

这意味着当作为（非 const/var）参数传递时，它会被复制。这可能会导致记录中的字符串等问题，在复制记录时不会更新引用计数。

要尝试的一件事是将其设为类并将实例作为参数传递（即指向堆上数据的指针）。

其他需要注意的是线程 32 位系统上的共享 Int64（例如您的大小值）。

更新/读取这些不是原子完成的，您没有任何特定的保护措施，因此读取值可能会由于线程而导致高低 32 位不匹配。（例如读取高 32 位，写入高 32 位，写入低 32 位，读取低 32 位，在不同线程中进行读写）。这可能不会导致您看到的问题，除非您正在处理 > 4GB 的文件传输，否则不太可能给您带来任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T22:03:03.463

死锁肯定很难发现，但这可能是问题所在。在您的代码中，我没有看到您在 enqueue、peek 或 dequeue 中添加了任何超时 - 这意味着它将采用 Infinite 的默认值。

enqueue 中有这一行 - 这意味着，就像任何同步对象一样，它将阻塞直到 Enter 完成（它锁定监视器）或超时发生（因为你没有超时，它将永远等待）

```
TSimpleThreadedQueue.Enqueue(const Item: T; Timeout: LongWord): TWaitResult;
...    
if not TMonitor.Enter(FQueue, Timeout) 
```

我还将假设您基于 Dequeue 自己实现了 PEEK——只是您实际上并没有删除该项目。

这似乎实现了自己的超时 - 但是，您仍然拥有以下内容：

```
function TSimpleThreadedQueue.Peek/Dequeue(var Item: T; Timeout: LongWord): TWaitResult;
...
if not TMonitor.Enter(FQueue, Timeout) 
```

超时是无限的 - 所以，如果你在 peek 方法中等待它发出无限超时信号，那么你不能在不阻塞等待 peek 方法完成的情况下从第二个线程排队无限超时。

这是来自 TMonitor 的评论片段

```
Enter locks the monitor object with an optional timeout (in ms) value. 
Enter without a timeout will wait until the lock is obtained. 
If the procedure returns it can be assumed that the lock was acquired. 
Enter with a timeout will return a boolean status indicating whether or 
not the lock was obtained (True) or the attempt timed out prior to 
acquire the lock (False). Calling Enter with an INFINITE timeout 
is the same as calling Enter without a timeout. 
```

由于实现默认使用 Infinite，并且没有提供 TMonitor.Spinlock 值，这将阻塞线程，直到它可以获取 FQueue 对象。

我的建议是更改您的代码如下：

```
 // Use Peek instead of Dequeue, because the item should not be removed from the queue if it fails
  while true do
    case fQueue.Peek(fCurrentFile,10) 
      wrSignaled:
        try
          if UploadFile(fCurrentFile) = '' then
          begin
            fQueue.Dequeue(Temp);  // Delete the item from the queue if succesful
            SignalComplete;
          end;
        except
          on E: Exception do
            SignalError(E.Message);
        end;
      wrTimeout: sleep(10);
      wrIOCompletion,
      wrAbandoned,
      wrError: break;
    end; //case 
```

这样，peek 就不会无限期地持有 FQueue 的锁，而是为 Enqueue 留下一个窗口来获取它并从主 (UI) 线程添加文件。

# mysql - MySQL获得唯一性和排序

> ID：13661714
> 
> 赞同：-1
> 
> 时间：2012-12-01T17:18:00.267
> 
> 标签：mysql, group-by

如何选择具有唯一**string1**条目的最后 10 行并按 id 排序？行具有以下结构：

```
id | string1 | string2 | ... | stringN 
```

使用**GROUP BY string1**和**ORDER BY id DESC**结果包含唯一行，但不是来自表的尾部。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:27:08.450

您应该使用按`string1`列排序的分组排名`ID`，然后选择排名为 的所有前 10 条记录`1`，按 ID desc 排序（如果 DESC 按 ID 排序给您表的尾部）。如果您在为 MySQL 编写组排名 SQL 时需要帮助，可以参考[此](https://stackoverflow.com/a/532941/240078)。SQL Server 提供了[`RANK()`](http://msdn.microsoft.com/en-us/library/ms176102.aspx)开箱即用的功能。

# php - Node.js 如何让不同的用户按顺序做事？

> ID：13661718
> 
> 赞同：0
> 
> 时间：2012-12-01T17:18:21.663
> 
> 标签：php, javascript, node.js, asynchronous

我正在考虑使用 Node.js 来构建协作工具。我想意识到一个用户做某事，使另一个用户做某事。

所以有一个顺序。如果有 3 个用户，则序列将是 1,2,3,1,2,3...您可以想象一个有无限玩家的国际象棋游戏。

那么 Node.js 是如何让不同的用户按顺序做事的呢？

我真的想要一些参考或代码示例。

非常感谢。

# c - 我正在研究图表的连通性。为什么我得到分段错误：11？

> ID：13661719
> 
> 赞同：0
> 
> 时间：2012-12-01T17:18:25.530
> 
> 标签：c, undefined-behavior

```
 void checkconnections(int matrix[N][N], int connected[N], int j)
     {
     int i;

     for(i=0;i<N;i++)
     {
         if(matrix[i][j]>0)
         {
              connected[i]=1;
              j=i;
              checkconnections(matrix, connected, j);
         }
     } 
```

}

我有一个连接矩阵，其中的值是随机生成的。如果它们已连接，则将值设置为 1，否则将值设置为 0。N 在标头中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T00:40:11.447

您会遇到分段错误，因为将导致无限递归并且堆栈将溢出。

只需解决如果`matrix[4][5]`和`matrix[5][4]`都非零时会发生什么。

# python - 如何运行需要一组模块的在线 python 代码？

> ID：13661723
> 
> 赞同：6
> 
> 时间：2012-12-01T17:18:43.220
> 
> 标签：python, compiler-construction, module

如何运行拥有/需要一组模块的在线 python 代码？[（例如 numpy、matplotlib）关于 python 3 中的解释器的问题2737539](https://stackoverflow.com/questions/2737539/python-3-online-interpreter-shell)和[3356390](https://stackoverflow.com/questions/3356390/is-there-an-online-interpreter-for-python-3)的答案/建议没有用，因为这些编译器在这种情况下不能正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T21:40:39.763

我找到了一个支持多个模块的模块，我检查`numpy, scipy, psutil, matplotlib, etc`并支持所有模块。查看 pythonanyware 编译器，[这里有一个示例控制台，但是你可以](https://www.pythonanywhere.com/try-ipython/)[在这里](https://www.pythonanywhere.com/pricing/)注册帐户，我相信有一个免费版本。我记得我去年使用了那个在线编译器，它工作得很好，但是对于免费帐户，它有一定的限制。它还有一个 bash 控制台，允许您运行 python 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T11:12:13.187

你可以试试这个作为沙盒，它也支持 numpy：http: [//ideone.com](http://ideone.com)

# android - 检查用户是否更新了应用程序或安装了新副本？

> ID：13661725
> 
> 赞同：2
> 
> 时间：2012-12-01T17:18:51.147
> 
> 标签：android

我将使用新的数据结构为我的应用程序发布更新，因此如果用户正在更新我的应用程序，我需要更新他们当前的数据。所以我想知道如何以编程方式检查用户是否更新了我的应用程序或安装了新副本（如果安装了新副本，我不需要更新任何内容）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T17:26:53.383

## SQLite

如果您的数据在 SQLite 数据库中，您可以在[`SQLiteOpenHelper.onUpgrade()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade(android.database.sqlite.SQLiteDatabase,%20int,%20int)).

## 检查以前的版本

如果没有，您需要某种方法来检查设备上打开的先前版本。就像是：

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
// Use SharedPreferences to store something like "LAST_VERSION_RUN" = pInfo.versionName 
```

然后，您可以检查以前的版本是否不等于当前版本。当然，这种代码也必须在以前的版本中。一旦应用程序已经在野外，就无法实现检测应用程序是否已升级的代码。

## 检查当前版本

我想在这种情况下你可以做的是检测应用程序版本，然后设置一个标志以不再更新数据模式。因此，假设您的应用版本是 1.0.2，现在是 1.0.3：

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
if (pInfo.versionName.equals("1.0.3") && /* some SharedPreference value */ == false) {
    // upgrade
    // set SharedPreference value to true
} 
```

如果您不使用 SQLite，我认为这将是实现此功能的最佳方式。

# debugging - 在 Intellij IDEA 中隐藏没有源代码行的堆栈帧

> ID：13661726
> 
> 赞同：1
> 
> 时间：2012-12-01T17:18:55.950
> 
> 标签：debugging, intellij-idea

在 Grails 中编程 Intellij IDEA 11 Ultimate 调试器中有很多无用的堆栈帧。事实上，14 个可见帧中只有 3 个是有意义的，附加了源行，其他 11 个是指第 -1 行。（我只是在谈论来自我的消息来源的帧。）

是否可以隐藏那些烦人的框架？

# android - Android - 创建实用程序类来播放声音

> ID：13661730
> 
> 赞同：0
> 
> 时间：2012-12-01T17:19:28.977
> 
> 标签：android, media-player

单击按钮时，我想播放一种声音。许多活动都发出相同的声音。所以我认为创建一个具有播放声音方法的 Utility 类可能是个好主意，我将从各种活动中调用它，而不是在所有其他活动中创建 MediaPlayer 变量。所以我创建了这个 Utility 类：

```
public class Utilities extends Activity {

public MediaPlayer mpPositive;
public MediaPlayer mpNegative;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mpPositive = MediaPlayer.create(this, R.raw.click_positive);
    mpNegative = MediaPlayer.create(this, R.raw.click_negative);
}

public void playPositive() {
    mpPositive.start();
}

} 
```

在我的活动中，我导入了这个文件。然后我尝试像这样使用它：

```
public class ActivityListCategories extends ListActivity implements
     OnClickListener {
        private Utilities myUtilities;
        ...rest of the code...

    public void onCreate(Bundle savedInstanceState) {

    myUtilities = new Utilities();
            ...rest of the code...
            }
    }

public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btnAdd:
        myUtilities.playPositive();
                    ...rest of the code...
} 
```

但是当我单击按钮时 - 我的应用程序崩溃了。我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:27:33.400

您的代码崩溃是因为该`onCreate()`方法`Utilities`永远不会被调用，因为您没有将它用作正常的`Activity`，并且它不遵循 Activity 生命周期。因此，您的`this`参考将始终为空。

相反，尝试使它成为一个普通的 Java 类，例如：

```
public class Utilities extends Activity {

    public MediaPlayer mpPositive;
    public MediaPlayer mpNegative;

    public Utilities(Context context) {
        mpPositive = MediaPlayer.create(context, R.raw.click_positive);
        mpNegative = MediaPlayer.create(context, R.raw.click_negative);
    }

    public void playPositive() {
        mpPositive.start();
    }

} 
```

然后创建一个对象如下：

```
Utilities utils = new Utilities(this); 
```

确保此行在`onCreate()`您的主要活动中或之后。

# wordpress - 我可以在小部件菜单中的特定小部件下显示一些东西吗

> ID：13661741
> 
> 赞同：0
> 
> 时间：2012-12-01T17:21:33.273
> 
> 标签：wordpress, widget

有一个名为“widget context”的插件，当它们在小部件管理菜单中展开时，它会在小部件下方显示 html 代码。

我想做同样的事情，但只显示在特定的小部件下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:26:53.717

**这不是**一件容易的事。

我在这里给出的答案与我在 WordPress ^(StackExchange)中给出的类似 Q的答案[完全相同。](https://wordpress.stackexchange.com/a/72939/12615)

> *我知道插件 Widget Logic 正是这样做的。*
> *剖析其代码，下面的摘录将在所有小部件中输出一个文本区域。*

^*在选定的小部件上显示框会使任务更加困难......

# iphone - 在 uitabbar 上禁用/隐藏 uitabbaritem

> ID：13661743
> 
> 赞同：1
> 
> 时间：2012-12-01T17:21:42.240
> 
> 标签：iphone, cocoa-touch, uitabbarcontroller, uitabbar

我在[这里](https://stackoverflow.com/questions/4037160/remove-uitabbaritem)找到了我认为可以完成这项工作的代码。

```
`/* suppose we have a UITabBar *myBar, and an int index idx */  
NSMutableArray modifyMe = [[myBar items] mutableCopy];  
[modifyMe removeObjectAtIndex:idx];  
NSArray *newItems = [[NSArray alloc] initWithArray:modifyMe];  
[myBar setItems:newItems animated:true];` 
```

问题是，我应该在哪里编写这段代码才能工作？
我试着把它放进去，`viewDidLoad`但`UITabBarController`没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:09:37.020

如果您从 修改选项卡栏项目`UITabbarController`，则不能使用`setItems:animated:`. 从文档：

> 在 iOS 3.0 及更高版本中，当标签栏与标签栏控制器对象关联时，您不应尝试使用此类的方法和属性来修改标签栏。以这种方式修改标签栏会导致抛出异常。相反，对标签栏或其项目的任何修改都必须通过标签栏控制器界面进行。

相反，换掉你的`viewControllers`属性`UITabbarController`，删除与`UIViewController`你想要删除的标签栏项目相对应的属性。例如，如果要删除第二个标签栏项目：

```
NSMutableArray *newViewControllers = [NSMutableArray arrayWithArray:self.viewControllers];
[newViewControllers removeObjectAtIndex:1];
[self setViewControllers:newViewControllers]; 
```

# uitableview - 使用 DetailView 向 NSMutable 数组添加搜索

> ID：13661744
> 
> 赞同：0
> 
> 时间：2012-12-01T17:21:46.083
> 
> 标签：uitableview, ios6, uisearchbar

我有我正在处理的项目，我需要将搜索添加到我的`uitableview`. 我一直在查看很多代码，但大多数都不是我想要的，我无法修改它们。有人可以帮我将搜索添加到我的`tableview`. 我也想推`detailview`from `searcharray`。先感谢您。

这是.h`uitableview`

```
#import <UIKit/UIKit.h>

@interface Reds : UITableViewController {
NSMutableArray *dummyArray;
}
- (void) setupData;

@end 
```

这是.m`uitableview`

```
#import "Reds.h"
#import "RedsDetail.h"

@interface Reds ()

@end

@implementation Reds

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
[self setupData];
}

- (void) setupData {
dummyArray = [[NSMutableArray alloc] init];

[dummyArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"dummy 1", @"name" , @"image1.JPG", @"image" , @"dummy 1 description textview", @"description", nil]];
[dummyArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"dummy 2", @"name" , @"image1.JPG", @"image" , @"dummy 2 description textview", @"description", nil]];
[dummyArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"dummy 3", @"name" , @"image1.JPG", @"image" , @"dummy 3 description textview", @"description", nil]];

}
- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [dummyArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

cell.textLabel.text = [[dummyArray objectAtIndex:indexPath.row] objectForKey:@"name"];
return cell;
}

#pragma mark - Table view delegate

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if([[segue identifier] isEqualToString:@"DummyDetail"]){
    RedsDetail *dummyDetail = [segue destinationViewController];
    NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
    dummyDetail.dummyImageString = [[NSString alloc] initWithString:[[dummyArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
    dummyDetail.dummyTextString = [[NSString alloc] initWithString:[[dummyArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
    dummyDetail.title = [[NSString alloc] initWithString:[[dummyArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
}
}

@end 
```

这是.h`detailview`

```
#import <UIKit/UIKit.h>

@interface RedsDetail : UIViewController {

IBOutlet UIImageView *dummyImage;
IBOutlet UITextView *dummyText;
NSString *dummyImageString;
NSString *dummyTextString;

}

@property (nonatomic, retain) NSString *dummyImageString;
@property (nonatomic, retain) NSString *dummyTextString;
@end 
```

最后是.m`detailview`

```
#import "RedsDetail.h"

@interface RedsDetail ()

@end

@implementation RedsDetail
@synthesize dummyImageString, dummyTextString;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

dummyImage.image = [UIImage imageNamed:dummyImageString];
dummyText.text = dummyTextString;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

@end 
```

我知道对于大多数人来说这可能是一个简单的答案，但我无法弄清楚，我需要帮助。我真的很感谢你们花时间帮助我。如果您的答案有所不同，我也正在使用 xcode 4.5 ios 6 故事板。

阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:23:34.280

对于搜索，创建一个 searchArray 和一个 searchText，还需要一个调用 didChange 方法的文本字段。

使用它将文本字段链接到 didChange 方法：

```
[self.searchTextField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

然后在 didChange 中更新 searchText 并调用 updateSearchArray。

```
-(void)textFieldDidChange:(UITextField*)textField
{
    searchTextString = textField.text;
    [self updateSearchArray];
} 
```

在 updateSearchArray 中，您比较通过原始数组 (dummyArray)，如果名称包含在搜索中，则将其添加到 searchArray。

```
-(void)updateSearchArray
{
    if (searchTextString.length != 0) {
        searchArray = [NSMutableArray array];
        for ( NSDictionary* item in dummyArray ) {
            if ([[[item objectForKey:@"name"] lowercaseString] rangeOfString:[searchTextString lowercaseString]].location != NSNotFound) {
                [searchArray addObject:item];
            }
        }
    } else {
        searchArray = dummyArray;
    }

    [self.tableView reloadData];
} 
```

* * *

在您现在使用 dummyArray 的 tableview 方法中使用 searchArray。

更新了 tableview 方法

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [searchArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [[searchArray objectAtIndex:indexPath.row] objectForKey:@"name"];
    return cell;
} 
```

此外，您需要在将所有数据添加到数组后调用 reloadData。并添加了 updateSearchArray 方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setupData];
    [self updateSearchArray];
    [self.tableView reloadData];
} 
```

* * *

* * *

**为了更容易实现这一点，我制作了一个示例项目。你可以在这里下载：** [http ://www.rolandkeesom.com/SearchExample.zip](http://www.rolandkeesom.com/SearchExample.zip)

* * *

* * *

# c++ - 如何在 Windows 中为 Unix/Linux 编译 C++ 应用程序

> ID：13661745
> 
> 赞同：1
> 
> 时间：2012-12-01T17:22:02.793
> 
> 标签：c++, windows, g++

我有一个使用 wxWidgets 用 C++ 编写的应用程序。如何在 Windows 中为 Linux 和 Unix 操作系统（如 Debian、FreeBSD、CentOS）编译它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:29:14.257

不完全确定我是否理解了这个问题，但我想你是在问是否可以在 windows 环境中使用编译器为 linux 编译应用程序。

我的简短回答：不，但是。

但是：您也许可以在 Windows 中使用[Cygwin](http://www.cygwin.com/)，但是我认为有一种更简单的方法。如果您对将计算机设置为具有多个分区并在其中至少一个分区上安装 linux 感到不舒服，您可以使用[VirtualBox](https://www.virtualbox.org/wiki/Downloads)、[VMWare](http://www.vmware.com/)或类似的虚拟化软件在您的 Windows 机器上“安装” linux。从那里您可以设置构建环境等。至于如何，我会让你的 Windows 构建保持原样，然后为 Linux 创建一个 Makefile（或使用[CMake](http://www.cmake.org/)替换你的 Windows 特定构建器（如果使用 Visual Studio 等，则为 vsproj）和 linux 特定构建器（make )) 以便您的源代码可以在 Windows 和 linux 上编译，而无需修改实际代码或项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T17:29:13.760

我建议使用[CMake](http://www.cmake.org/)作为构建系统

# ios - 搜索时在表上加载结果

> ID：13661746
> 
> 赞同：0
> 
> 时间：2012-12-01T17:22:07.683
> 
> 标签：ios, uitableview

我不确定如何解决这个问题，我只是在学习表格。我有下面的代码，可以在您键入时过滤数组。搜索栏向上移动，控制器在搜索下方变暗，但是当我输入第一个字母时，结果不会在下方生成。

这是对 Apple 示例项目的修改。表格搜索

我错过了什么？

新的VC加载时键盘似乎拖到后面提前谢谢你

```
//  itemsSearchViewController.m

#import "itemsSearchViewController.h"
#import "SearchRecipeViewController.h"
#import "firstAppDelegate.h"

@interface itemsSearchViewController ()

@end

@implementation itemsSearchViewController

@synthesize listContent, filteredListContent, savedSearchTerm, savedScopeButtonIndex, searchWasActive;
@synthesize delegate;
@synthesize itemsToPass;

/*
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

#pragma mark -
#pragma mark Lifecycle methods
*/

- (void)viewDidLoad
{

    //[super viewDidLoad];

    self.title = @"items Search";

    //write names of itemss to array
    NSString *path =[[NSBundle mainBundle] pathForResource:@"possibleitemss" ofType:@"plist"];
    NSArray *content = [NSArray arrayWithContentsOfFile:path];
    self.listContent =[NSArray arrayWithArray:content];
    if([content count] == 0)

    {
        NSLog(@"nsma is empty");
    }
    NSLog(@"list contents%@", listContent);

   // NSLog(@"list content = %@", listContent);
        // create a filtered list that will contain products for the search results table.

    self.filteredListContent = [NSMutableArray arrayWithCapacity:[self.listContent count]];

        // restore search settings if they were saved in didReceiveMemoryWarning.
    if (self.savedSearchTerm)
        {
        [self.searchDisplayController setActive:self.searchWasActive];
        [self.searchDisplayController.searchBar setSelectedScopeButtonIndex:self.savedScopeButtonIndex];
        [self.searchDisplayController.searchBar setText:savedSearchTerm];

        self.savedSearchTerm = nil;
        }

    [self.tableView reloadData];
    self.tableView.scrollEnabled = YES;
}

- (void)viewDidUnload
{
    //self.filteredListContent = nil;
}

- (void)viewDidDisappear:(BOOL)animated
{
        // save the state of the search UI so that it can be restored if the view is re-created
    self.searchWasActive = [self.searchDisplayController isActive];
    self.savedSearchTerm = [self.searchDisplayController.searchBar text];
    self.savedScopeButtonIndex = [self.searchDisplayController.searchBar selectedScopeButtonIndex];
}

- (void)dealloc
{
    [listContent release];
    [filteredListContent release];

    [super dealloc];
}

#pragma mark -
#pragma mark UITableView data source and delegate methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    /*
     If the requesting table view is the search display controller's table view, return the count of
     the filtered list, otherwise return the count of the main list.
     */
    if (tableView == self.searchDisplayController.searchResultsTableView)
        {
        return [self.filteredListContent count];
        }
    else
        {
        return [self.listContent count];
        }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
    if (cell == nil)
        {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID] autorelease];
        }

    /*
     If the requesting table view is the search display controller's table view, configure the cell using the filtered content, otherwise use the main list.
     */
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    /*
     If the requesting table view is the search display controller's table view, configure the next view controller using the filtered content, otherwise use the main list.
     */

}

#pragma mark -
#pragma mark Content Filtering
//as user types this is happening
-(void) filterResults:(NSString *)searchText{
    NSMutableArray *test = [NSMutableArray arrayWithArray:self.listContent];

    [self.filteredListContent removeAllObjects]; // First clear the filtered array.
        for (int i=0; i<[test count]; i++) {
            NSString *stringResult = [test objectAtIndex:i];
            NSComparisonResult result = [stringResult compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

            if (result == NSOrderedSame){
                [self.filteredListContent addObject:stringResult];

            }
        }
    [self.filteredListContent sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)];//sort alphabetically
    NSLog(@"filtered results = %@",self.filteredListContent);
}

#pragma mark -
#pragma mark UISearchDisplayController Delegate Methods

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{items

    [self filterResults:searchString];
    //[self filterContentForSearchText:searchString scope:

    // [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

        // Return YES to cause the search result table view to be reloaded.
    return YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text] scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];

        // Return YES to cause the search result table view to be reloaded.
    return YES;
}
- (IBAction)itemsSelected: (id)sender{

    if ( self.delegate != nil && [self.delegate respondsToSelector:@selector(showSearchRecipeView)] ) {
        [self.delegate showSearchRecipeView];

    }
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:16:02.913

我的猜测是以下之一：

*   资源路径是`possibleitemss`——这是一个错字吗？
*   您是否已验证阵列已被填充？
*   你`searchDisplayController:shouldReloadTableForSearchScope:`真的回来了吗？

In other words, I'd step into each of these functions and watch the that the flow is behaving how you expected, and that your arrays are in fact populated.

Let me know if that helps.

# java - JSch 的密钥文件格式是什么？

> ID：13661750
> 
> 赞同：0
> 
> 时间：2012-12-01T17:22:27.990
> 
> 标签：java, jsch, private-key

JSch 有一个方法`addIdentity(String prvkey, String passphrase)`，其中 prvkey 是私钥文件。应该是什么格式？

我有 Putty、OpenSSH 和 SSHCom 的密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:16:56.847

您用于 ssh 的文件在 Jcsh 中使用

# c - TimeVal 结构秒和微秒

> ID：13661753
> 
> 赞同：4
> 
> 时间：2012-12-01T17:22:47.017
> 
> 标签：c

我如何知道从 1970 年 1 月 1 日 00:00:00 到现在使用 timeval 之间的秒数和微秒数？谢谢。

```
struct timeval {
  long tv_sec; /*seconds since 1/1/1970*/
  long tv_usec; /*microseconds since tv_sec*/
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:27:41.403

你打电话`gettimeofday()`

```
struct timeval tv;
gettimeofday(&tv, NULL);
tv.tv_sec  /* seconds */
tv.tv_usec /* microseconds */ 
```

但是`gettimeofday()`已经过时了，该手册建议使用[clock_gettime(2)](http://linux.die.net/man/3/clock_gettime)代替：

```
struct timespec tp;
clock_gettime(CLOCK_REALTIME, &tp);
tp.tv_sec  /* seconds */
tp.tv_usec /* nanoseconds divide by 1000 to get microseconds*/ 
```

# antlr - ANTLR4 中的语义谓词？

> ID：13661754
> 
> 赞同：14
> 
> 时间：2012-12-01T17:22:52.607
> 
> 标签：antlr, antlr4

您如何将这部分用 ANTLR 3 编写的代码翻译成 ANTLR 4？

```
expr: (Identifier '.')=> (refIdentifier)
  | (Identifier '!')=> (refIdentifier)
  | (Identifier '=>')=> (lambdaExpression); 
```

我的意思是这种语义谓词现在似乎不存在。我可以用什么代替？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T18:18:18.080

在 ANTLR v4 中，不再有*门控语义谓词*, `{ ... }?=>`，也不再有*句法谓词*, `( ... )=>`，因为 v4 中使用的解析算法可以解决歧义（不再需要此类谓词）。所以，这应该只适合你：

```
expr
 : refIdentifier
 | refIdentifier
 | lambdaExpression
 ; 
```

请注意，v4 中只有一种谓词：*语义谓词*, `{ ... }?`。例如，如果您需要检查令牌的内容，可以这样做：

```
id_capitals_only
 : {_input.LT(1).getText().matches("[A-Z]+")}? ID
 ;

ID
 : [a-zA-Z]+
 ; 
```

## 编辑

正如 Sam Harwell 在评论中提到的那样：

> 语义谓词 {...}? 在 V4 中的工作方式与 V3 中的门控语义谓词类似。V3 中的非门控谓词在 ANTLR 4 中没有对应的谓词。

# javascript - 在 HTML5 视频期间启动 JavaScript 动画

> ID：13661756
> 
> 赞同：0
> 
> 时间：2012-12-01T17:23:06.983
> 
> 标签：javascript, html, html5-video

当 HTML5 背景视频达到某个点时，我想要我的动画。现在它在视频结束后开始。有没有办法在视频到达某个点后找到视频的进度并开始动画？这是我的代码。

```
// Browser Window Size and Position 
function animCD_pageWidth() { return window.innerWidth != null? window.innerWidth : document.documentElement && document.documentElement.clientWidth ?       document.documentElement.clientWidth : document.body != null ? document.body.clientWidth : null;}  

function animCD_pageHeight() {return  window.innerHeight != null? window.innerHeight : document.documentElement && document.documentElement.clientHeight ?  document.documentElement.clientHeight : document.body != null? document.body.clientHeight : null;} 

// Add the canvas to the DOM object and kick off our animation sequnce 
function animCD_start() 
{        

    if (animCD_loaded) return; 

    // - Add them to the document (done here since it needs to be done after the DOM object is loaded 
    document.body.appendChild(animCD_cBack);     
    document.body.appendChild(animCD_cDisk); 
    document.body.appendChild(animCD_cMidd); 
    document.body.appendChild(animCD_cFore); 
    document.body.appendChild(animCD_cBuff); 
    document.body.appendChild(animCD_cBuf2); 

    animCD_loaded = true; 

    // - Start animating 
    animCD_Loop(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:55:36.970

您可以收听视频的“时间更新”事件。然后在事件处理程序中，您将检查当前时间，如果时间合适，则启动动画。

例如，如果变量`v`是对您的播放器的引用，我可以通过这种方式将当前时间记录到控制台：

```
v.addEventListener('timeupdate',
  function(evt) 
  {
    // Your code here
    console.log(evt.target.currentTime);
  }); 
```

**注意1：我以addEventListener为例**，你应该依赖你正在使用的库的相应方法，以获得最大的跨浏览器兼容性。

注意2：请注意，返回给您的时间不是精确的整数。您可以检查当前时间是否大于某个阈值，执行您的操作然后断开处理程序，或者将 alreadyPlayedAnimation 状态保存在变量中的某个位置。

# sql - SQL*Plus 中的清屏

> ID：13661757
> 
> 赞同：10
> 
> 时间：2012-12-01T17:23:13.563
> 
> 标签：sql, oracle, sqlplus

我正在运行以下报告，但出现错误

```
/* Simple table formatting */

clear screen;
accept Report_File char prompt 'Enter a file name for summary report ';

/*Set up column headers*/
col StoreCode format A8 heading 'Store Code';
col DESCRIPTION format A8 heading 'Item Description';
col PRICE format $999999.99 heading 'Price';
col QUANTITY format 999 heading 'Quantity';
col (Price*Quantity) format $999999.99 heading 'Value';

/*Format and title pages */

set Pause off;
set Feedback off;
set Space 6;
set newpage 2;
set pagesize 54;
set linesize 200;
set underline =;
title center 'Current Stock Value by Store' skip 2 left -
            'prepared by Jason Kemeys' &Report_Officer right -
            &Todays_Date skip4;
btitle center format 999 SQL.PNO;

/* Set breaks and computes */

break on StoreCode skip 2 on SuppCode skip 1 on Report;
compute sum of (Price*Quantity) on StoreCode;
compute sum of (Price*Quantity) on Report;

/*Select data & send to file*/

spool &Report_File;

select StoreCode, Description, Quantity, Price, (Price*Quantity)
from Stocks
order by StoreCode;

spool off;

/* Clear all settings */

clear breaks;
clear columns;
clear computes;
set Pause on; 
```

只需要知道它为什么显示错误以及如何让它运行；第一次用 SQL 做报告。

这是我得到的错误

> 清屏；* 第 2 行的错误：ORA-00900：无效的 SQL 语句

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-23T12:43:10.357

`cl scr`是SQL中用来清屏的命令。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-01T23:26:08.570

我怀疑这取决于您使用的 Oracle 版本。

这[应该在版本 11.2 中工作，](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve012.htm#SQPUG033)但引用[10g 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12012.htm#SQPUG033)：

> CLEAR SCREEN 在 SQL*Plus 中不可用。

[11.1 文档](http://docs.oracle.com/cd/B28359_01/server.111/b31189/ch12012.htm#SQPUG033)中没有相同的注释，这意味着您使用的是 Oracle 10g 或更早版本。如果这个假设是真的，那么你能做的就很少了。

如果您使用的是 Windows，或者，如果您使用的是 Linux，您*可以*使用[`host`](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch4.htm#sthref891)SQL*Plus 中的命令来运行，但我不确定它是否会产生完全相同的效果。如果可能的话，它只是：[`cls`](http://en.wikipedia.org/wiki/Cls_%28command%29)[`clear`](http://linux.die.net/man/1/clear)

```
host cls 
```

`host`从 SQL*Plus 运行操作系统命令，因此会*出现*清屏。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-13T01:51:20.183

只需使用`cl scr`命令清除 SQL 加号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T20:15:44.510

很少出现“;” 在您的代码中实际上是需要的。例如，以“清除屏幕”命令开头的命令不需要分号。当您添加一个时，它会起作用，但我不确定同一文件中的所有后续命令。需要它们的命令仅限于 INSERT、UPDATE、DELETE、COMMIT、ROLLBACK 等。

其次，如果你从 SQL 文件中得到奇怪的反馈，并且如果你在 Linux/Unix 之外编写它们，这通常会导致 SQLPLUS 抱怨不可见字符。通过 VI 和 CAT 命令查看该文件，并注意任何奇怪的地方。

# html - html输入并选择不同的高度

> ID：13661759
> 
> 赞同：10
> 
> 时间：2012-12-01T17:23:33.757
> 
> 标签：html, select, input

我设置高度：

```
input,select{height: 20px;} 
```

但是在浏览器中它的高度是`input : 20px`and `select 18px`，我不知道为什么，因为在输入和选择之前被重置。如果我删除`<!DOCTYPE html>`然后是好的，但是 IE 没有居中页面。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T17:26:30.417

这可以通过将`box-sizing`元素的属性设置为来纠正`border-box`：

```
input, select{
  box-sizing: border-box;
} 
```

供应商特定的前缀喜欢`moz-`或`webkit-`可能适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:43:00.697

I was able to set the height of my `SELECT` to exactly what I wanted in IE8 and 9\. The trick is to set the `box-sizing` property to `content-box`. Doing so will set the content area of the `SELECT` to the height, but keep in mind that `margin`, `border` and `padding` values will not be calculated in the width/height of the `SELECT`, so adjust those values accordingly.

```
select {
    display: block;
    padding: 6px 4px;
    -moz-box-sizing: content-box;
    -webkit-box-sizing:content-box;
    box-sizing:content-box;
    height: 15px;
} 
```

Here is a working [jsFiddle](http://jsfiddle.net/8fkgg/2/). Would you mind confirming and marking the appropriate answer?

# java - 100门任务：for循环不起作用，否则很好

> ID：13661760
> 
> 赞同：0
> 
> 时间：2012-12-01T17:23:36.967
> 
> 标签：java

```
public class OneHundredDoors 
{
    static OneHundredDoors.Door[] doors = new OneHundredDoors.Door[100];

    static public class Door
    {
        public int doorClosed = 0;

        public void open ()
        {
            this.doorClosed = 0;
        }
        public void close ()
        {
            this.doorClosed = 1;
        }
        private void printStatus (int address)
        {
            if (this.doorClosed == 0)
            {
                System.out.println("Door: " + address + " is Open!");
            }
        }
        public void printStatusOfAll ()
        {
            for (int i = 0; i < doors.length; i++)
            {
                doors[i].printStatus(i);
            }

        }
        public void passDoor (int increment)
        {
            for (int k = 0; k < doors.length; k += increment)
            {
                if (doors[k].doorClosed == 0)
                {
                    doors[k].close();
                }
                else
                {
                    doors[k].close();
                }                       
            }
        }
    }
    public static void main (String [] args)
    {
        for (int i = 0; i < doors.length; i++)
        {
            doors[i] = new OneHundredDoors.Door ();
        }
        for (int j = 0; j < doors.length; j++)
        {
            doors[5].passDoor(j);
        }
        doors[5].printStatusOfAll();    
    }
} 
```

我的问题是doors[5].passDoor(j) 的循环根本不起作用。在运行时或编译时都不会出现错误。什么都没发生。离开程序一段时间然后再回来什么都不做，这表明它没有在后台做任何事情。现在这段代码解决了这个问题，如果你简单地说 door[5].passDoor(2) 然后是 3，然后是 4 到 100。问题是这样做很浪费，因此我想用 for环形。

关于对象的静态数组：对不起，我这样做是为了在测试阶段让事情变得更容易，并在我启动并运行时修复问题（通过将数组设为类 Door 的私有）。

我只是真的在这里发布这个，因为我完全不知道为什么会这样。在互联网上搜索没有错误，没有冻结，所以我知道它可能不是无限（或长）循环，而且似乎没有人在 100 扇门上遇到类似的问题（尽管这可能是因为他们没有采用面向对象像我所做的那样接近它）。此外，如果您像我所说的那样输入 100 次代码，代码完全可以正常工作（或者至少，如果我有耐心实际输入 100 次，它似乎会这样做）。

最后请注意，这里的循环不适用于 j < x 的任何 x 值。（因此，我在这里缺少的东西必须是显而易见的和简单的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:29:33.287

`passDoor`不起作用的原因是您将`increment`of传递`0`给：

```
for (int k = 0; k < doors.length; k += increment) { 
```

所以`k`从不增加的值会导致无限循环。

# javascript - jQuery加载函数不能加载

> ID：13661769
> 
> 赞同：1
> 
> 时间：2012-12-01T17:24:10.637
> 
> 标签：javascript, jquery

我已经在这个[网站上](http://orchidaberdeen.com/)工作了很长一段时间了，我遇到了一个在每一点上都胜过我的错误。

问题出在网站的画廊部分。当用户点击圆圈时，网站会打开以显示更多缩略图。当用户点击较小的缩略图时，应该会出现一个灯箱。

可悲的是，情况并非如此，我认为这是因为一次加载了太多 jQuery。由于缩略图页面是由 jQuery 加载的外部 html 文件，因此当我尝试加载灯箱插件时，浏览器似乎不想加载它。

当在它自己的单独页面上查看页面时，灯箱效果会起作用，例如这里， http: [//orchidaberdeen.com/6_toggle/1.html](http://orchidaberdeen.com/6_toggle/1.html)

这些是我尝试过的东西，

```
(function loading() {
  $.get('js/view.min.js?auto', function() {
    $('body').load('6_toggle/1.html#externalContent');
  });
})(); 
```

这个我也试过

```
$(".plus_1").click(function() {
  $.getScript("js/view.min.js?auto", function(data, textStatus, jqxhr) {
     console.log(data); //data returned
     console.log(textStatus); //success
     console.log(jqxhr.status); //200
     console.log('Load was performed.');
  });
}); 
```

这行代码正在加载外部 html 文件，

```
t_slide.load("6_toggle/"+page+".html", function() { 
```

如果有人有任何建议或知道可以在页面加载后重新触发 jquery 的修复程序，或者知道这是否甚至不可能，那么将不胜感激。

非常感谢，

卡梅伦

# xcode - 如何在没有自动布局的情况下调整 iphone 5 的视图大小

> ID：13661770
> 
> 赞同：0
> 
> 时间：2012-12-01T17:24:17.637
> 
> 标签：xcode, resize, storyboard, iphone-5, autolayout

我正在使用故事板。在过去的两周里，我一直在尝试让自定义页面视图控制器工作[http://www.wannabegeek.com/?p=168](http://www.wannabegeek.com/?p=168)。我终于发现这种特殊方法不适用于自动布局。

所以现在我被困住了，有没有办法让视图调整到 iphone 5，我已经查找了不同的方法，但似乎它们针对 xibs 进行了优化（我没有使用）。

至少，我将如何删除对 iphone 5 的支持，因为现在当我运行 iphone 5 模拟器时，所有像素都被添加到左侧，使我的应用偏离中心 :(

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:28:20.370

这将完全取决于您想要做什么，但这就是我的做法。为了使我的布局适用于 iPhone 5，我从底部测量我想要靠近屏幕底部的任何项目：

```
CGRect settingsButtonFrame = CGRectMake(10, self.view.frame.size.height - 80, 26, 26); 
```

# php - 当大于定义的数量时，给予新数量的东西

> ID：13661773
> 
> 赞同：0
> 
> 时间：2012-12-01T17:24:50.167
> 
> 标签：php

好的，所以我试图在每次用户完成一项任务时奖励大奖条目，但是当任务奖励超过一定数量时，我想给出多个条目。

让我分解一下。

当用户完成奖励 0.05 美元或更多的任务时，他们将获得 1 个进入累积奖金的机会。我想要达到的就是这个。当他们完成价值 0.50 美元的任务时，他们会额外获得 1 个条目，然后每多 0.25 美元，他们就会再获得 1 个条目，因此如果他们完成价值 1.00 美元的任务，他们应该总共获得 4 个条目。1 表示初始 0.05 美元，1 表示任务价值 0.50 美元，1 表示达到 0.75 美元，1 表示达到 1.00 美元

我不知道该怎么做。所以我在数据库中更新时所拥有的就是这个。

```
if($offprate >= $rafminp || $offcrate >= $rafminc){
$stmt=$db->prepare("UPDATE accounts SET jackpot_e=jackpot_e+'1' WHERE username = ?");
$stmt->bind_param('s', $username);
$stmt->execute();
} 
```

这只是最初的 0.15 美元

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:40:07.617

我是不是想得太简单了？

```
$amount = 0.5;
$credits = 0;
switch($amount) {
  case 0.05: $credits = 1; break;
  case 0.50: $credits = 2; break;
  case 0.75: $credits = 3; break;
  case 1.00: $credits = 4; break;
}
$stmt=$db->prepare("UPDATE accounts SET jackpot_e=jackpot_e+'$credits' WHERE username = ?"); 
```

甚至可能：

```
$all_amounts = array(0.05, 0.50, 0.75, 1.00);
$credits = array_search($amount, $all_amounts)+1; # returns -1 when not found 
```

如果您没有确切的值，请将 switch 语句替换为 if-else 级联。

* * *

重新阅读您的问题，金额似乎没有上限。在这种情况下：

```
$credits = 0;
if($amount == 0.05)
  $credits = 1;
if($amount >= 0.50) 
  $credits = floor(2+($amount-0.50)/0.25); 
```

# oracle - 创建一个页面来显示带有外键的数据

> ID：13661777
> 
> 赞同：1
> 
> 时间：2012-12-01T17:25:16.893
> 
> 标签：oracle, oracle-apex

我正在创建一个 APEX 应用程序，允许学生申请工作安置，并允许管理员查看所有交互。我想创建一个页面来显示所有学生的应用程序。

首先，这是所涉及表的数据库架构： ![在此处输入图像描述](../Images/1cd58d39798a0e3ff32d2ea523f427c3.png)

全尺寸链接：http: [//i.stack.imgur.com/QU1Pr.png](https://i.stack.imgur.com/QU1Pr.png)

我有一份包含学生列表的报告，并且添加了“查看应用程序”列。我已将“查看应用程序”列设为可链接，它会转到新页面。问题是，我不知道如何显示管理员当前正在查找的学生的所有应用程序。

我能想到的唯一方法是将`RECORD_NUMBER`（表中的PK `students`）传递到新页面，然后使用它执行一些SQL，并用返回的内容填充页面字段。但我不知道该怎么做。我不知道如何获取`RECORD_NUMBER`要在 SQL 中使用的值，也不知道如何使用 SQL 返回的内容填充表单字段。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:16:27.007

因此，您有一页列出了申请和已申请的学生。我们将该页面称为 1。如果我理解您要执行的操作，您可以创建一个页面 2，其中包含一个报告和一个隐藏的页面项目。调用页面项目 P2_RECORD_NUMBER。

使用查询创建报告：

```
SELECT *
  FROM tbl_jobs j
 INNER JOIN tbl_applications a on a.job_id = j.id
 INNER JOIN tbl_students s ON s.record_number = j.record_number
 WHERE s.record_number = :P2_RECORD_NUMBER 
```

现在编辑第 1 页上的链接，使其指向第 2 页并使用用户单击的行的记录号填充 P2_RECORD_NUMBER。我面前没有 Apex，但我认为您可以通过编辑该列的报告属性来做到这一点。此外，您可以使用表单的 url `http://site.com/f?p=<APP_ID>:<PAGE_ID>:0::::P2_RECORD_NUMBER:<record_number>`。（我是凭记忆这样做的，可能冒号的数量有误。）

如果上面的查询没有返回任何行，您还需要一些默认文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:39:52.097

只需为管理员创建一个新页面并输入如下查询

```
SELECT *
  FROM tbl_students s
  JOIN tbl_applications a USING (record_number)
  JOIN tbl_jobs j ON a.job_id = j.id 
```

你知道在哪里添加查询吗？

# c# - 有没有办法获取页面上所有可见属性的列表？

> ID：13661781
> 
> 赞同：0
> 
> 时间：2012-12-01T17:25:26.470
> 
> 标签：c#, asp.net, properties, visible

我想在`OnClick()`特定按钮的方法中获取页面上所有可见属性的列表。有没有办法在 asp.net 中的 c# 中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:31:37.403

您需要递归迭代页面中的所有控件并找到可见的控件：

```
List<Control> visibleList = null;
protected void FindVisibleControls(Control parent) 
{
    foreach(Control c in parent.Controls) 
    {
       if (c.Visible)
       {
          visibleList.Add(c);
       }

       if (c.HasControls())
          FindVisibleControls(c);
    }
} 
```

**用法**- 在您的按钮中单击调用它，如下所示：

```
protected Button1_Click(object sender, EventArgs e)
{
   visibleList = new List<Control>();
   FindVisibleControls(this);
} 
```

# ruby-on-rails - Rails 3 中的关联

> ID：13661782
> 
> 赞同：1
> 
> 时间：2012-12-01T17:25:37.843
> 
> 标签：ruby-on-rails

我有三个模型，程序 Subprograms1 Subprograms2

程序 -> has_many :subprograms1 , :subprograms2

子程序 1 -> has_and_belongs_to_many：程序

子程序 2 -> has_and_belongs_to_many：程序

我想获取所有 Subprograms1 和 Subprograms2 属于特定程序。

有没有可能在铁轨上。

提前致谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:27:55.977

如果我理解正确，您应该能够通过访问 Programs 模型中的属性来访问所有 Subprograms1 和 Subprograms2

```
p = Programs.find(10)
sp1 = p.Subprograms1 
sp2 = p.Subprograms2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:42:42.953

如果您的数据中的结构是扁平的（其他子程序下方没有子程序），您可以使用 Active Record 的[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations) 来使用对多个其他表（不仅仅是一个）的引用，因此您可以设置从 Programs 到 Subprograms1*和*对 Subprograms2的引用并通过一个电话将它们全部检索出来。

如果数据中的结构很深（子程序可以有其他子程序），您应该将所有 3 个表放在一个表中，并使用[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)来管理数据树并检索与程序关联的所有（深层）子程序. 有[许多 Ruby Gems](https://www.ruby-toolbox.com/categories/Active_Record_Nesting)可以帮助您实现这一目标。

# c# - 包装 APM 样式时将“状态”传递给任务并行库

> ID：13661786
> 
> 赞同：1
> 
> 时间：2012-12-01T17:26:12.650
> 
> 标签：c#, asynchronous, task-parallel-library, azure-table-storage

我有以下扩展方法，我想将状态传递给：

```
 // Overload 2
    public static Task<TableQuerySegment<T>> ExecuteQuerySegmentedAsync<T> (this CloudTable tbl, TableQuery<T> query, TableContinuationToken continuationToken, CancellationToken token) where T : ITableEntity, new()
    {
        return tbl.ExecuteQuerySegmentedAsync<T>(query, continuationToken, null, null, token);
    }

    // Overload 5
    public static Task<TableQuerySegment<TElement>> ExecuteQuerySegmentedAsync<TElement>(this CloudTable tbl, TableQuery<TElement> query, TableContinuationToken continuationToken, TableRequestOptions opt, OperationContext ctx, CancellationToken token) where TElement : ITableEntity, new()
    {
        ICancellableAsyncResult result = null;

        if (opt == null && ctx == null)
            result = tbl.BeginExecuteQuerySegmented<TElement>(query, continuationToken, null, tbl);
        else
            result = tbl.BeginExecuteQuerySegmented<TElement>(query, continuationToken, opt, ctx, null, tbl);

        var cancellationRegistration = token.Register(result.Cancel);

        return Task.Factory.FromAsync(result, iAsyncResult =>
        {
            CloudTable currentTable = iAsyncResult.AsyncState as CloudTable;

            cancellationRegistration.Dispose(); // todo: handle cleanup of this (deregistration)
            return currentTable.EndExecuteQuerySegmented<TElement>(result);
        });
    }

    // Overload 3
    public static Task<TableQuerySegment<R>> ExecuteQuerySegmentedAsync<T, R>(this CloudTable tbl, TableQuery<T> query, EntityResolver<R> resolver, TableContinuationToken continuationToken, CancellationToken token) where T : ITableEntity, new()
    {
        return tbl.ExecuteQuerySegmentedAsync<T, R>(query, resolver, continuationToken, null, null, token);
    }

    // Overload 6
    public static Task<TableQuerySegment<R>> ExecuteQuerySegmentedAsync<TElement, R>(this CloudTable tbl, TableQuery<TElement> query, EntityResolver<R> resolver, TableContinuationToken continuationToken, TableRequestOptions opt, OperationContext ctx, CancellationToken token) where TElement : ITableEntity, new()
    {
        ICancellableAsyncResult result = null;

        if (opt == null && ctx == null)
            result = tbl.BeginExecuteQuerySegmented<TElement, R>(query, resolver, continuationToken, null, null);
        else
            result = tbl.BeginExecuteQuerySegmented<TElement, R>(query, resolver, continuationToken, opt, ctx, null, null);

        var cancellationRegistration = token.Register(result.Cancel);

        return Task.Factory.FromAsync(result, iAsyncResult =>
        {
            CloudTable currentTable = iAsyncResult.AsyncState as CloudTable;

            cancellationRegistration.Dispose(); // todo: handle cleanup of this (deregistration)
            return currentTable.EndExecuteQuerySegmented<R>(result);
        });
    } 
```

所以我可以这样调用代码

```
 // prepare the query
            trustsInBatchesOf100 = tableSymmetricKeys.ExecuteQuerySegmentedAsync(query, token, opt, ctx, cancelToken);

            // my state
            object mystate  = trustsInBatchesOf100.AsyncState; 
```

我一直试图弄清楚我应该如何修改扩展方法以包含`stateObject`. 困难在于我在[TaskFactory.FromAsync](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)中找到正确的重载并在扩展方法中正确实现它。

**问题**

> 如何修改上述扩展方法以正确接受状态参数？

**更多源代码**

```
 private CloudTableClient tableClient;
    private CloudStorageAccount account;
    private TableRequestOptions opt;

    List<Task<TableResult>> AllRunningTasks = null;

    public async Task GetTrustsAndValues(string thingToSearchFor,string trustStartingPoint, 
        int depth,
        TableQuery query,                             
         OperationContext ctx, CancellationToken cancelToken)
    {
        TrustState asyncState = new TrustState() { ThingToSearchFor = thingToSearchFor, TimeStarted = DateTime.UtcNow };

        var ret = new TrustTree<string>(thingToSearchFor, "start", 10);

        CloudTableClient client = account.CreateCloudTableClient();
        CloudTable tableSymmetricKeys = client.GetTableReference("SymmetricKeys5"); 

       // List<Task> taskList = new List<Task>();

        TableContinuationToken token = new TableContinuationToken() { };
        Task<TableQuerySegment<DynamicTableEntity>> trustsInBatchesOf100 = null;

        while (true)
        {
            // prepare the query
            trustsInBatchesOf100 = tableSymmetricKeys.ExecuteQuerySegmentedAsync(query, token, opt, ctx, cancelToken);

            object mystate  = trustsInBatchesOf100.AsyncState;

            // Run the method
            trustsInBatchesOf100.Wait();

            // Create tasks for each of the 100 domains found.
            IEnumerable<Task<TableResult>> getTrustDataQuery =
                          from domainData in trustsInBatchesOf100.Result select QueryPartnerForData(ref ret,domainData, thingToSearchFor, client, cancelToken);

            // Save the count of lookups as appropriate  
            asyncState.RunningDirectQueries = getTrustDataQuery.Count();

            // Run up to 100 lookups on those domains.
            var runningTasks = getTrustDataQuery.ToList();

            // Add running tasks to the full compilation of running tasks
            AllRunningTasks.AddRange(runningTasks );

            // Prepare for next iteration or quit
            if (token == null)
            {
                break;
            }
            else
            {
                token = trustsInBatchesOf100.Result.ContinuationToken;

                // todo: persist token  token.WriteXml()
            }
        }
    }

    private static Task<TableResult> QueryPartnerForData(ref  TrustTree<string> tree, DynamicTableEntity domainData, string thingToSearchFor, CloudTableClient client, CancellationToken cancelToken)
    {
        // Create the table client.
        CloudTable tableDirectQuery = client.GetTableReference(String.Format("{0}_FW", domainData.RowKey));

        // Retrieve the entity with partition key of "Smith" and row key of "Jeff"
        TableOperation tableOperation = TableOperation.Retrieve(domainData.RowKey, thingToSearchFor);

        // Retrieve entity asynchronously
        return tableDirectQuery.ExecuteAsync(tableOperation, cancelToken);
    }

    public async void SaveCompletedQueriesTo()
    {
        while (AllRunningTasks.Count > 0)
        {
            // Identify the first task that completes.
            Task<TableResult> firstFinishedTask = await Task.WhenAny(AllRunningTasks);

            // ***Remove the selected task from the list so that you don't
            // process it more than once.
            AllRunningTasks.Remove(firstFinishedTask);

            // Await the completed task.
            var taskOfTableResult = await firstFinishedTask;

            //todo: asyncState: need to know what the 
            // - target to save to is.
        }

        // TODO: if all tasks have completed then update 
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T17:35:34.947

你见过[Microsoft.WindowsAzure.StorageClient.Async](https://github.com/AArnott/Microsoft.WindowsAzure.StorageClient.Async)项目吗？（也[可在 NuGet 上获得](http://nuget.org/packages/Microsoft.WindowsAzure.StorageClient.Async)）。它可能会提供一些想法，或者已经解决了您的问题。否则，请考虑在正确的情况下将您的更改贡献给该项目。

# android - 如何将最小 DatePicker 日期设置为当前日期

> ID：13661788
> 
> 赞同：59
> 
> 时间：2012-12-01T17:26:33.680
> 
> 标签：android, android-datepicker

我想将用户可以在 DatePicker 中选择的最小日期设置为当前日期。我试过这个：

```
DatePicker datePicker = (DatePicker) findViewById(R.id.event_date);
datePicker.setMinDate(System.currentTimeMillis()); 
```

这给了我以下例外：

```
12-01 12:23:31.226: E/AndroidRuntime(10311): Caused by: java.lang.IllegalArgumentException: fromDate: Sat Dec 01 12:23:31 EST 2012 does not precede toDate: Sat Dec 01 12:23:31 EST 2012 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-12-01T17:41:52.977

该错误表示您无法将最短日期设置为*现在*。尝试减去一秒：

```
datePicker.setMinDate(System.currentTimeMillis() - 1000); 
```

* * *

从源代码来看，最小日期必须早于，不等于，当前日期：

```
if (date.before(mMinDate)) {
    throw new IllegalArgumentException("fromDate: " + mMinDate.getTime()
            + " does not precede toDate: " + date.getTime());
} 
```

所以你只需要从 now ( `System.currentTimeMillis()`) pass中减去足够的时间`date.before(mMinDate)`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-07-02T10:01:06.850

如果您不想使用自定义对话框。使用这个单行代码：

```
datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis()); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-09T07:28:57.550

检查 Android *DatePickerDialog*设置*最小*和*最大日期*代码。

这里是[例子](http://android--examples.blogspot.com/2015/05/how-to-use-datepickerdialog-in-android.html)。

```
final Calendar c = Calendar.getInstance();  
    int year = c.get(Calendar.YEAR);  
    int month = c.get(Calendar.MONTH);  
    int day = c.get(Calendar.DAY_OF_MONTH);  
DatePickerDialog dpd = new DatePickerDialog(getActivity(),AlertDialog.THEME_TRADITIONAL,this,year, month, day);  

    //Get the DatePicker instance from DatePickerDialog  
    DatePicker dp = dpd.getDatePicker();  
    //Set the DatePicker minimum date selection to current date  
    dp.setMinDate(c.getTimeInMillis());//get the current day  
    //dp.setMinDate(System.currentTimeMillis() - 1000);// Alternate way to get the current day  

    //Add 6 days with current date  
    c.add(Calendar.DAY_OF_MONTH,6);  

    //Set the maximum date to select from DatePickerDialog  
    dp.setMaxDate(c.getTimeInMillis());  
    //Now DatePickerDialog have 7 days range to get selection any one from those dates 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-06-27T19:31:21.180

这对我来说非常有效。简单而美好。

```
DatePickerDialog dialog = new DatePickerDialog(this, this,
              Calendar.YEAR,Calendar.MONTH,
                Calendar.DAY_OF_MONTH);

        dialog.getDatePicker().setMinDate(Calendar.getInstance().getTimeInMillis());
        dialog.show(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-19T11:56:59.187

将此行添加到您的 DatePicker Fragment 会将最小日期设置为当前日期并禁用前几个月。

```
datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T17:31:13.813

这可以帮助你。

```
Calendar cal=Calendar.getInstance();

int year=cal.get(Calendar.YEAR);
int month=cal.get(Calendar.MONTH);
int day=cal.get(Calendar.DAY_OF_MONTH);
int hour=cal.get(Calendar.HOUR_OF_DAY);
int min=cal.get(Calendar.MINUTE);

datePicker.updateDate(year, month, day);

timePicker.setCurrentHour(hour);
timePicker.setCurrentMinute(min); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T17:41:11.300

试试这个

```
datePicker.setMinDate(new GregorianCalendar.getTimeInMillis()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-12T10:26:18.963

```
datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis()); 
```

或者

```
DatePickerDialog dialog = new DatePickerDialog(this, this,
          Calendar.YEAR,Calendar.MONTH,
            Calendar.DAY_OF_MONTH);

    dialog.getDatePicker().setMinDate(Calendar.getInstance().getTimeInMillis());
    dialog.show(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-23T12:41:23.950

```
datePicker.getDatePicker().setMinDate(System.currentTimeMillis() - 1000); 
```

最短的日期不能是瞬间

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-13T18:02:49.350

对于自定义日期

```
Calendar c = Calendar.getInstance();
c.set(2017, 0, 1);//Year,Month -1,Day
your_date_picker.setMaxDate(c.getTimeInMillis()); 
```

# sql - SQL 从 y 获取 count(x) ，其中有一个特定的 x

> ID：13661795
> 
> 赞同：1
> 
> 时间：2012-12-01T17:27:32.383
> 
> 标签：sql

为此，我如何在 SQL 中实现视图？我想获取第 2 本书所在的书架中存在的书籍数量。'2' 是书的 ID，这本书也有一个书架 ID 归属于它。我如何找到它的书架编号，然后搜索其中有多少本书？

```
 SELECT COUNT(b.book_id)
    FROM book b, shelf s 
```

我已经尝试了一些事情，但真的不知道如何前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:30:31.617

如果`BOOK`表已经有`shelf_id`属性，那么下面的查询会返回你在同一个书架上的书的数量`book 2`：

```
SELECT COUNT(*) FROM books
WHERE shelf_id = (SELECT shelf_id FROM books WHERE book_id = 2) 
```

这个计数`book 2`也包括，顺便说一句。SQL Server 的过程定义如下：

```
CREATE PROCEDURE sp_get_count_of_books_in_shelf_by_book_id
(
    @book_id INT
)
AS
    SELECT COUNT(*) FROM books
    WHERE shelf_id = (SELECT shelf_id FROM books WHERE book_id = @book_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:33:40.687

```
 SELECT COUNT(b2.*)
    FROM book b1 JOIN book b2
         ON b1.shelf_id = b2.shelf_id
     where b1.book_id = 2; 
```

或者

```
 SELECT COUNT(b2.*)
    FROM book b2 
    where b2.shelf_id in (select shelf_id from book b1 where b1.book_id = 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:36:50.860

这应该可以正常工作：

```
SELECT COUNT(b.book_id)
FROM book b 
INNER JOIN (SELECT s.shelf_id FROM book b1, shelf s WHERE b1.shelf_id = s.shelf_id AND b1.book_id = 2) j ON b.shelf_id = j.shelf_id 
```

# node.js - MeteorJS 高负载应用

> ID：13661800
> 
> 赞同：4
> 
> 时间：2012-12-01T17:27:57.937
> 
> 标签：node.js, meteor

这些已经存在了吗？有没有人对使用 meteor.js 框架的高负载应用程序有任何实际经验？是否有任何基于此技术的已知服务或应用程序或设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:56:33.177

2013 年 4 月 4 日更新：由于 Meteor 的会话亲和性，我们无法在 Heroku 上进行扩展，因此我们使用 ELB 迁移到了 EC2。我们已经用大约 800 个并发用户对此进行了测试，这是我们使用 Heroku 获得的 4 倍。FMI：[1] [http://www.ripariandata.com/blog/creating-an-aws-elastic-load-balancer](http://www.ripariandata.com/blog/creating-an-aws-elastic-load-balancer)

2013 年 1 月 18 日更新：我们使用 blitz.io 对我们的应用程序进行了一些负载测试。在具有 MongoHQ 后端的单个 heroku Dyno 上，我们能够在超时开始超过 1 秒之前达到 35 个并发操作。在 Dyno 死机并需要重新启动之前，我们能够进行 180 个并发操作。这与我们使用五字段复合索引的最复杂查询背道而驰，它返回 10-30 个文档，并随机使用 0-30 的跳过值（模拟分页）。

目前，增加测功机的数量并没有显着提高性能。我们正在调查瓶颈，并将报告我们的发现。

# mongodb - 无法从 mongodb 中删除集合

> ID：13661801
> 
> 赞同：22
> 
> 时间：2012-12-01T17:28:03.087
> 
> 标签：mongodb

无法从 shell 中删除集合，

集合可用并且我的 php 脚本正在访问它（选择|更新）

但是当我使用时：

```
db._registration.drop() 
```

它给了我一个错误：

```
Date, JS Error: TypeErrorL db._registration has no properties (shell): 1 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-01T17:48:53.067

问题不在于删除集合。问题在于访问集合。因此，您将无法从 shell 更新、查找或使用它进行任何操作。正如在[mongodb JIRA](https://jira.mongodb.org/browse/SERVER-445)`_`中指出的那样，当集合中包含,`-`或之类的字符时，这是一个错误`。`

 `尽管如此，这种类型的集合名称是可以接受的，但它会导致 shell 出现问题。

您可以使用以下命令在 shell 中删除它：

```
db.getCollection("_registration").drop() 
```

或这个

```
db['my-collection'].drop() 
```

但我宁愿重命名它（当然，如果可能并且不会有很多变化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-07T16:33:24.633

您还可以使用：

```
db["_registration"].drop() 
```

哪种语法也适用于 JS。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-28T23:57:30.257

由于某种原因，双引号“_registration”对我不起作用..但单引号“_registration”有效`

# javascript - “可拖动” 只能垂直拖动？

> ID：13661806
> 
> 赞同：4
> 
> 时间：2012-12-01T17:28:34.900
> 
> 标签：javascript, jquery, css, draggable

我有这个页面，提示您向上拖动它以显示实际页面。我想知道是否有任何选项，以便您只能垂直（Y 轴）拖动它，即“向上”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T17:30:39.497

是的，这是可能的。

```
$( "#draggable" ).draggable({ axis: "y" }); 
```

检查这个：http: [//jqueryui.com/draggable/#constrain-movement](http://jqueryui.com/draggable/#constrain-movement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:31:14.363

如果您使用的是 jQuery UI，则有一个[`axis`](http://api.jqueryui.com/draggable/#option-axis)选项：

```
$(elem).draggable({ axis: 'y' }); 
```

# c++ - 在类中初始化向量

> ID：13661807
> 
> 赞同：1
> 
> 时间：2012-12-01T17:28:45.797
> 
> 标签：c++, class, vector

这段代码在课堂外效果很好 -

```
const char* list[] = {"Author: ", "Label: ", "Price: ", "Date: "};
vector<string> vlist(list, list+4); 
```

但是当我把它放到类中时，它的行为就像一个函数 - 编译器给我错误“列表”不是类型，错误：预期的'，'或'...'在'+'标记等之前？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:32:09.647

常见的模式如下：

```
class MyClass {
public:
   template<class It>
   MyClass(It beg, It end) : vec(beg,end) { }

private:
   std::vector<std::string> vec;
 };
int main() {
   std::string s[] = { "abc", "bcd" };
   MyClass c(s, s+2);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:32:14.923

数组大小不能在类内初始化器中自动推断。相反，您需要指定大小：

```
const char* list[4] = {"Author: ", "Label: ", "Price: ", "Date: "}; 
```

您的`vlist`成员可以从临时初始化：

```
vector<string> vlist = vector<string>(list, list + 4); 
```

但这可能效率低下。最好在构造函数中初始化它以避免临时性。

但是，您确定完全需要普通`list`数组吗？因为如果没有，那么这样做会容易得多：

```
vector<string> list = {"Author: ", "Label: ", "Price: ", "Date: "}; 
```

此外，您需要确保在编译器中启用了 C++11 模式。使用 GCC 或 Clang 将是`-std=c++11`或`-std=g++11`（对于 GNU 扩展）编译器标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T17:33:30.637

你得到一个错误，因为你的类定义不能调用函数，只能声明它们。您可以在类的构造函数中使用初始化列表来解决这个问题：

```
const char* list[] = { "Author: ", "Label: ", "Price: ", "Date: " };

class c
{
    vector<string> vlist;
    c() : vlist(list, list + 4) {}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:31:19.783

如果您使用的是 C++11，您可以通过*初始化列表*直接初始化您的向量：

```
vector<string> vlist {"Author: ", "Label: ", "Price: ", "Date: "}; 
```

如果没有，您必须在构造函数中执行此操作，很可能通过`push_back`：

```
Class::Class() {
    vlist.push_back("Author :");
    vlist.push_back("Label :");
    vlist.push_back("Price :");
    vlist.push_back("Date :");
} 
```

无论如何，如果最终您要使用`vector`.

# java - 实时捕捉音频和处理节奏

> ID：13661809
> 
> 赞同：0
> 
> 时间：2012-12-01T17:29:01.350
> 
> 标签：java, audio, real-time

我想捕捉音频并实时显示节奏。是否有一些示例可用于如何执行此类操作？

我在网上搜索了音频处理库，但我不知道如何让它工作，因为大多数库都有录制音频的示例。

请指出我正确的方向。亲切的问候，马丁

# jquery - 如何将多组引导单选按钮的值相加？

> ID：13661810
> 
> 赞同：1
> 
> 时间：2012-12-01T17:29:07.657
> 
> 标签：jquery, twitter-bootstrap

寻求一些帮助，试图获取两个选定按钮的值，添加它们，然后输出答案......

我在这里整理了一个[js fiddle，](http://jsfiddle.net/jesusthatsgreat/3dPJA/)而 jQuery 从来都不是我的强项，所以我很难理解引导程序的单选按钮，这些单选按钮实际上不是“传统”单选按钮......

```
<div class="control-group">
<h4>How much you wanna give me today?</h4>
    <div class="controls">
         <div class="btn-group" id="pay-me-friend" data-toggle="buttons-radio">
              <button type="button" name="dollar" class="btn" value="100">$100</button>
              <button type="button" name="dollar" class="btn" value="200">$200</button>
              <button type="button" name="dollar" class="btn" value="300">$300</button>
              <button type="button" name="dollar" class="btn" value="400">$400</button>
         </div>
    </div>
</div>
<div class="control-group">
    <h4>How much you wanna multiply that by?</h4>
        <div class="controls">
           <div class="btn-group" id="pay-me-multiply" data-toggle="buttons-radio">
              <button type="button" name="multiple" class="btn" value="1">1</button>
              <button type="button" name="multiple" class="btn" value="2">2</button>
              <button type="button" name="multiple" class="btn" value="3">3</button>
              <button type="button" name="multiple" class="btn" value="4">4</button>
           </div>
        </div>
</div>
<hr>
<div class="well">Total amount you'll pay me: <span id="displaynumber"></span></div> 
```

这是我使用 javascript 的起点......我还应该补充一点，我想使用 keyup 函数，这样答案就可以随时改变......

```
$('#pay-me-friend > button.active').keyup(function(){    
    var no1 = $('#pay-me-friend > button.active').val(); 
    var no2 = $('#pay-me-multiply > button.active').val();    
    $('#displaynumber').html(no1 + no2);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:29:30.723

您目前无法在 Bootstrap API 中使用任何事件，但他们使用的点击处理程序的简单覆盖可以使其更容易。

Bootsrap 问题中的此线程表明他们不愿意添加此功能：

[https://github.com/twitter/bootstrap/issues/2380](https://github.com/twitter/bootstrap/issues/2380)

以下将替换当前的单击处理程序并添加一个新的单击处理程序，其中触发了自定义事件。只需在引导加载之后和使用它的代码之前添加它：

```
$(document).off('click.button.data-api').on('click.button.data-api', '[data-toggle^=button]', function(e) {
    var $btn = $(e.target);
    if (!$btn.hasClass('btn')) {
        $btn = $btn.closest('.btn')
    };
    $btn.button('toggle');
    /* this is only change to code in bootstrap.js*/
    $btn.trigger('button_click');
}); 
```

现在在您的代码中，您可以将处理程序绑定到自定义事件`button_click`：

```
$('#pay-me-friend > button').on('button_click', function() {
    /* do calcs*/

}) 
```

演示：http: [//jsfiddle.net/3dPJA/1/](http://jsfiddle.net/3dPJA/1/)

您将需要修改您的计算代码以使其在未进行`NaN`两种选择时不会得到

# image - Drupal 图像缓存问题

> ID：13661815
> 
> 赞同：0
> 
> 时间：2012-12-01T17:29:28.373
> 
> 标签：image, drupal-6

我正在使用 Drupal6 并且图像缓存早些时候工作正常......但最近几天它不工作并且它抛出错误“图像无法显示，因为它包含错误。” 早些时候我有这个问题，我解决了它，我在

例如，如果我有图像 URL，像这样，`http://localhost/drupal/sites/defaults/files/imagecache/profile_85/pictures/vinodkumar_8542.jpg`

它在浏览器中正确显示，但是当我使用这样的路径时，相同的图像不起作用

```
http://localhost/drupal/index.php?q=sites/defaults/files/imagecache/profile_85/pictures/vinodkumar_8542.jpg 
```

请帮我解决这个大问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:05:55.723

这发生在我身上，因为我做了一个具有不同编码的自定义模块我发现我的模块在“php标签”之前包含“i<< j”，这使得我的图像损坏，因为它在图像的标题中添加了这个编码..检查你的文件 . 您可以尝试安装图像验证码以查看 drupal 是否可以生成图像，如果不能，那么您可以尝试我的解决方案，因为它在经历了很多次之后对我有用。你可以检查这个网站：

[http://drupal.org/node/1843304](http://drupal.org/node/1843304)

[http://drupal.org/node/1302076](http://drupal.org/node/1302076)

[http://drupal.org/project/issues/imagecache?status=All&categories=All](http://drupal.org/project/issues/imagecache?status=All&categories=All) “检查未解决的问题”

# vb.net - VB.NET LINQ 加入 2 个表，然后按列分组，然后求和

> ID：13661817
> 
> 赞同：0
> 
> 时间：2012-12-01T17:29:38.443
> 
> 标签：vb.net, linq, group-by, sum

数据表1

```
Name   Quantity
A       2
B       5
C       3
D       4 
```

数据表2

```
 Name   Quantity
    A       1
    B       3
    F       4
    G       4 
```

加入两个数据表后的预期结果按名称分组，然后为每个组求和数量，将结果放入新数据表中

```
 Name   Quantity
    A       3
    B       8
    C       3
    D       4
    F       4
    G       4 
```

使用 LINQ 可以做到这一点吗？请注意，我将字段值访问为`row.Field(of T)("Name")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:20:58.787

试试这个。如果两张表都相同，我认为您需要 Union

```
Dim query = From x in ((From p in DataTable1
                Select p).Union(From pd in DataTable2 Select pd))
                Group x By Key = x.Name Into grouping = Group
                let myProdSum = grouping.Sum(Function(x) => x.Quantity)
                Select New With {.Name = grouping.Key, .TotalQty = myProdSum}

ForEach s in query 
  Console.WriteLine("{0} : {1}" , s.Name, s.TotalQty)
Next 
```

# python - Python双循环？while 和 for 循环？

> ID：13661818
> 
> 赞同：0
> 
> 时间：2012-12-01T17:29:49.550
> 
> 标签：python, loops, for-loop, while-loop, double

我想循环一系列 c 值？我怎么做？我尝试在外部使用 for 循环或 while 循环：

注意：我希望 c 介于 4 到 15 之间，有 120 个值

```
for c in range(4,15):
    i=0
    while i< nt-1: #if i<nt-1 is true, the body below will be excuted
        #Update the acceleration using the following equation
        x[i+1] = (-y[i]-z[i])*deltat+x[i]
        #Update the velocity using the follwing equation
        y[i+1] =(x[i]+a*y[i])*deltat+y[i]
        #Update the displacement, using follwing equation
        z[i+1] = (b+z[i]*(x[i]-c))*deltat+z[i]
        #go to next time step
        i=i+1 
```

或者

```
c=arange(4,15,1)
for p in c:
   while i< nt-1: #if i<nt-1 is true, the body below will be excuted
        #Update the acceleration using the following equation
        x[i+1] = (-y[i]-z[i])*deltat+x[i]
        #Update the velocity using the follwing equation
        y[i+1] =(x[i]+a*y[i])*deltat+y[i]
        #Update the displacement, using follwing equation
        z[i+1] = (b+z[i]*(x[i]-p))*deltat+z[i]
        #go to next time step
        i=i+1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:31:59.270

由于您已经在使用 NumPy，以下可能是最自然的：

```
for c in np.linspace(4, 15, 120):
   ... 
```

该[`linspace()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html)调用产生 120 个值：

```
In [33]: np.linspace(4, 15, 120)
Out[33]: 
array([  4\.        ,   4.09243697,   4.18487395,   4.27731092,
         4.3697479 ,   4.46218487,   4.55462185,   4.64705882,
         4.7394958 ,   4.83193277,   4.92436975,   5.01680672,
        ...
        14.35294118,  14.44537815,  14.53781513,  14.6302521 ,
        14.72268908,  14.81512605,  14.90756303,  15\.        ]) 
```

# java - JTable#repaint() 未按预期运行

> ID：13661821
> 
> 赞同：0
> 
> 时间：2012-12-01T17:29:58.000
> 
> 标签：java, swing, jtable, abstracttablemodel

此应用程序从文本文件中提取数据并将其插入到`JTable`. 如果`Observer`文件发生更改并重新加载数据，则每 300 毫秒检查一次。我的班上有`setChanged()`and 。`notifyObservers()``Observer`

当数据被添加到表中时，a`getRowCount()`报告该行已添加，通知器正在运行。几乎所有东西都在工作，除了`repaint()`. 我已经尝试过`revalidate()`，`fireTableDataChanged()`但都无济于事。我将不胜感激这方面的一些帮助。整个过程不报告编译错误。

表模型

```
package HardwareDbFile;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.StringTokenizer;
import java.util.Vector;
import javax.swing.table.AbstractTableModel;

public class HardwareFileTableModel extends AbstractTableModel{
    protected Vector data;
    protected Vector columnNames ;
    protected String datafile;

    public HardwareFileTableModel(String file){
        datafile = file;
        initVectors();  
    }

    public void initVectors() {
        String aLine ;
        data = new Vector();
        columnNames = new Vector();
        try {
            FileInputStream fin =  new FileInputStream(datafile);
            try (BufferedReader br = new BufferedReader(new InputStreamReader(fin))) {
                StringTokenizer st1 = new StringTokenizer(br.readLine(), "|");
                while(st1.hasMoreTokens()) {
                    columnNames.addElement(st1.nextToken());
                }
                // extract data
                while ((aLine = br.readLine()) != null) {
                    StringTokenizer st2 = new StringTokenizer(aLine, "|");
                    while(st2.hasMoreTokens()) {
                        data.addElement(st2.nextToken());
                    }
                }
            }
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
    @Override
    public int getRowCount() {
        return data.size() / getColumnCount();
    }

    @Override
    public int getColumnCount(){
        return columnNames.size();
    }

    @Override
    public String getColumnName(int columnIndex) {
        String colName = "";

        if (columnIndex <= getColumnCount()) {
            colName = (String)columnNames.elementAt(columnIndex);
        }
        return colName;
    }

    @Override
    public Class getColumnClass(int columnIndex){
        return String.class;
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return false;
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        return (String)data.elementAt( (rowIndex * getColumnCount()) + columnIndex);
    }

    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    }
} 
```

观察者类

```
package HardwareDbFile;

import java.awt.event.*;
import java.io.*;
import java.util.*;
import javax.swing.Timer;

 public class HardwareFileObserver extends Observable implements ActionListener {
     Timer time = new Timer(300,this); // check every 300ms
     long lastModified;
     String file ;

     HardwareFileObserver (String string) {
         file = string;
         File f = new File(file);
         lastModified = f.lastModified(); // original timestamp
         time.start();
     }

     @Override
     public void actionPerformed(ActionEvent e) {
         File f = new File(file);
         long actualLastModified = f.lastModified();
         if (lastModified != actualLastModified) {
             // the file have changed
             lastModified = actualLastModified;
             setChanged();
             notifyObservers();
         }
     }
} 
```

主班

```
 public class HardwareInventoryUI extends javax.swing.JFrame implements Observer {

    private String datafile = "hardware.dat";
    private String dataFilePath = "C:\\Windows\\Temp\\hardware.dat";
    protected HardwareFileTableModel model;

    /**
     * Creates new form HardwareInventoryUI
     */
    public HardwareInventoryUI() {
        initComponents();

        model = new HardwareFileTableModel(dataFilePath);
        HardwareFileObserver  fileWD;

        // this Observable object is monitoring any file change
        fileWD = new HardwareFileObserver(dataFilePath);
        fileWD.addObserver(this);
    }

    @Override
    public void update(Observable o, Object arg) {
        // reload data because data file have changed
        model.initVectors();
        jTable.repaint();
    } 
```

添加录制按钮

```
 private void jAddRecordActionPerformed(java.awt.event.ActionEvent evt) {                                           

        String toolID = jToolID.getText();
        String toolName = jToolName.getText();
        String quantity = jQuantity.getText();
        String itemPrice = jItemPrice.getText();
        try {
            model = new HardwareFileTableModel(dataFilePath);
            FileWriter fstream = new FileWriter(dataFilePath, true);
            try (BufferedWriter newRecord = new BufferedWriter(fstream)) {
                newRecord.newLine();
                newRecord.write(toolID + "|"+ toolName + "|" + quantity + "|" + itemPrice );
            }
        } catch (IOException ex) {
            Logger.getLogger(HardwareInventoryUI.class.getName()).log(Level.SEVERE, null, ex);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:39:54.530

1.  您`TableModel`应该实施`Observer`，而不是您的观点。在`update()`方法中，更新`data`和`fireTableDataChanged()`. A`JTable`监听它`TableModel`并自动更新自身作为响应。

2.  [还要考虑这里](https://stackoverflow.com/a/3072979/230513)提到的观察者模式的替代实现。

3.  [如此处](https://stackoverflow.com/a/13500910/230513)所示，您的实现`setValueAt()`不正确。您需要触发将通知监听表更改的事件：

    ```
    @Override
    public void setValueAt(Object value, int row, int column) {
        // update data
        fireTableCellUpdated(row, column);
    } 
    ```

4.  如果您的内容`datafile`可以作为命令的标准输出获得，您可以使用[此处](https://stackoverflow.com/a/13660545/230513)概述的方法消除该文件。

附录：正如@kleopatra 评论的那样，“请注意，使用表现良好的模型，您无需考虑视图更新，它们只是自动发生 :-) 或者反过来：如果手动重绘视图（例如表、树、列表）似乎是一个解决方案，模型实现不正确。”

# cross-browser - 获取 crossrider 中的活动标签 url

> ID：13661832
> 
> 赞同：2
> 
> 时间：2012-12-01T17:30:51.007
> 
> 标签：cross-browser, crossrider

我了解到 crossrider.com 正在帮助我们为不同的浏览器开发扩展，同时保持相同的代码。

我有两个问题

问题一：

在浏览了 crossrider 中的文档和库之后，我仍然想知道如何获取活动标签 url。

问题2：

单击工具栏图标后，我还需要打开一个弹出窗口，类似于谷歌浏览器扩展。我遇到了crossrider边栏插件。但是，我无法动态更改侧边栏的 url。我们是否有任何其他像弹出窗口一样打开的 crossrider 插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:34:01.523

回答 Q1：您可以使用我们的 appAPI.tabs。**onTabSelectionChanged** (function callback([{ *tabId* , *tabUrl* }])) 方法（即将记录）。要跟踪 ActiveTab URL，在回调中，只需将全局变量设置为回调的可选*tabUrl*参数。Chrome 和 Firefox 目前支持此功能。

回答 Q2：恐怕目前还没有原生的弹窗插件（欢迎您写一个并提交考虑**;-)**）。但是，您可以在扩展中配置和使用 jQueryUI 弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:41:38.363

我需要在 IE 中获取活动标签 URL。如果在 IE 中无法使用 jquery，我们可以使用消息传递 api 将消息从页面发送到后台范围，并将活动选项卡 url 存储在后台的全局变量中吗？

# visual-studio-2010 - 卸载 Visual Studio 2010 组件

> ID：13661833
> 
> 赞同：2
> 
> 时间：2012-12-01T17:30:55.877
> 
> 标签：visual-studio-2010

我已经在 SuperUser 网站上问过这个问题，但由于这么多 SO 用户的专业知识，我想我会在这里问这个问题。
我最近安装了 Visual Studio 2010 Professional（用于大学项目）。我们必须为系统建模 scrum 管理设计一个虚拟界面（即允许用户创建和计划敏捷项目）。我们不需要做任何真正的编码，只需要设计接口——但是，如果我们选择，我们可以添加一点 C#（我们只用 Java 编程，而且我们处于初级水平，这就是为什么有这么少的编码）。

我安装了 Visual Studio 的专业版，只需要 C# 包。该程序最终安装了以下所有内容：

```
Microsoft SQL Server 2008 R2 Data-Tier Application Framework  
Microsoft SQL Server 2008 R2 Data-Tier Application Project  
Microsoft SQL Server 2008 R2 Management Objects  
Microsoft SQL Server 2008 R2 Management Objects (x64)  
Microsoft SQL Server 2008 R2 Transact-SQL Language Service  
Microsoft SQL Server Compact 3.5 SP2 ENU  
Microsoft SQL Server Compact 3.5 SP2 x64 ENU  
Microsoft SQL Server Database Publishing Wizard 1.4  
Microsoft SQL Server System CLR Types  
Microsoft SQL Server System CLR Types (x64)  
Microsoft Sync Framework Runtime v1.0 SP1 (x64)  
Microsoft Sync Framework SDK v1.0 SP1  
Microsoft Sync Framework Services v1.0 SP1 (x64)   
Microsoft Sync Services for ADO.NET v2.0 SP1 (x64)  
Microsoft Team Foundation Server 2010 Object Model - ENU  
Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.4148  
Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.4974  
Microsoft Visual C++ 2010 x64 Runtime - 10.0.30319  
Microsoft Visual C++ 2010 x86 Runtime - 10.0.30319  
Microsoft Visual Studio ADO.NET Entity Framework Tools  
Microsoft Visual Studio 2010 Professional - ENU  
Microsoft Visual Studio 2010 Tools for Office Runtime (x64)   
Microsoft Visual Studio Macro Tools 
```

我听说我无法摆脱 SQL Server Compact，因为它是运行 Visual Studio 所必需的。我也知道 Visual Studio 2010 Professional - ENU 是实际程序。但是，在这些之后，考虑到我对程序的需求，我可以卸载什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:24:48.100

我会回答我自己的问题。有人实际上对要做什么发表了评论，但他们似乎已将其删除。我不记得是谁了——向他们道歉。

我正在使用 Visual Studio 2010 Professional，因为我们通过我们大学与 Microsoft 开发人员网络的连接免费获得了它。

然而，这个软件的免费版本没有很多我不需要的东西——Visual Studio Express。可在以下网址找到：http:
[//www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

# android - 如何以编程方式打开上下文菜单？

> ID：13661841
> 
> 赞同：1
> 
> 时间：2012-12-01T17:31:31.613
> 
> 标签：android, contextmenu

我需要在 oncreate 方法中打开上下文菜单。我做什么：

```
public class MainActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        cont = new CustomViewContainer(this);
        setContentView(cont);

        this.openContextMenu(cont);
    }
    @Override  
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)
    {  
        super.onCreateContextMenu(menu, v, menuInfo);  
        menu.setHeaderTitle("Select");  
        menu.add(0, v.getId(), 0, "a");  
        menu.add(0, v.getId(), 0, "b");
        menu.add(0, v.getId(), 0, "c");  
    }
} 
```

但是我没有看到菜单。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:34:28.757

根据[文档](http://developer.android.com/reference/android/app/Activity.html#openContextMenu%28android.view.View%29)[，`openContextMenu(View)`](http://developer.android.com/reference/android/app/Activity.html#openContextMenu%28android.view.View%29)您必须先致电[`registerForContextMenu(View)`](http://developer.android.com/reference/android/app/Activity.html#registerForContextMenu%28android.view.View%29)：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    cont = new CustomViewContainer(this);
    setContentView(cont);

    registerForContextMenu(cont);
    openContextMenu(cont);
} 
```

# php - 如何在不覆盖目标文件的情况下复制文件？

> ID：13661842
> 
> 赞同：3
> 
> 时间：2012-12-01T17:31:32.733
> 
> 标签：php, file

我制作的脚本是。

```
<?php

$source_file = 'http://www.domain.tld/directory/img.png'; 
$dest_file = '/home/user/public_html/directory/directory/img.png'; 

copy($source_file, $dest_file);

?> 
```

每次脚本运行时，我都需要不删除和重新上传该图像。我希望它是 img1.png、img2.png、img3.png 等。或者 img(Date,Time).png、img(Date,Time).png 等。这可能吗？如果可以，如何我要这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T18:25:00.550

如果您担心覆盖文件，则可以添加时间戳以确保唯一性：

```
$dest_file = '/home/user/public_html/directory/directory/img.png';

// /home/user/public_html/directory/directory/img1354386279.png
$dest_file = preg_replace("/\.[^\.]{3,4}$/i", time() . "$0", $dest_file); 
```

如果您想要更简单的数字，您可以采取稍微多一点的任务路线并更改目标文件名，只要具有该名称的文件已经存在：

```
$file = "http://i.imgur.com/Z92wU.png";
$dest = "nine-guy.png";

while (file_exists($dest)) {
    $dest = preg_replace_callback("/(\d+)?(\.[^\.]+)$/", function ($m) {
        return ($m[1] + 1) . $m[2];
    }, $dest);
}

copy($file, $dest); 
```

匿名函数回调可能需要使用更高版本的 PHP；我用 5.3.10 进行了测试，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:38:08.477

```
<?php

$source_file = 'http://www.domain.tld/directory/img.png'; 
$dest_file = '/home/user/public_html/directory/directory/img.png'; 
if(!is_file($dest_file)){
copy($source_file, $dest_file);
}
else{
$fname = end(explode('/',$dest_file));
$fname = time().'-'.$fname;
$dest_file = dirname($dest_file).'/'.$fname;
copy($source_file,$dest_file);
}
?> 
```

使用此代码这将在文件名之前添加时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:40:47.820

您可以使用[重命名（）。](http://in2.php.net/rename)

**例如：**

```
rename ("/var/www/files/file.txt", "/var/www/sites/file1.txt"); 
```

**或者** 您也可以使用[复制](http://de.php.net/manual/en/function.copy.php)

```
$source_file = 'http://www.domain.tld/directory/img.png'; 
$dest_file = '/home/user/public_html/directory/directory/img.png'; 
if(!is_file($dest_file)){
copy($source_file, $dest_file);
} 
```

或者如果你想增加时间，你可以试试这样。

```
 $source="http://www.domain.tld/directory/";
 $destn ="/home/user/public_html/directory/directory/";
 $filename="image.png";
 $ex_name = explode('.',$filename));
 $newname = $ex_name[0].'-'.time().$ex_name[1]; //where $ex_name[0] is filename and $ex_name[1] is extension.

 copy($source.filename,$destn.$newname ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:46:39.300

```
$source_file = 'http://www.domain.tld/directory/img.png'; 
$dest_file = '/home/user/public_html/directory/directory/img'.uniqid().'.png'; 
copy($source_file, $dest_file); 
```

uniquid 为您提供一个唯一的 ID，它很少可能被覆盖......

我也会为每个月制作文件夹或与图像的 id 相关

像

```
mkdir(ceil($imgId / 1000), 0777); 
```

# .net - 当属性已声明为父元素的属性时，使用 XPath 匹配名称格式为 ParentElement.Property 的元素

> ID：13661851
> 
> 赞同：4
> 
> 时间：2012-12-01T17:32:07.897
> 
> 标签：.net, xml, xpath, xsd, xpath-1.0

我有一个如下的 XML 文件：

```
<Main>
    <Element1 Property1="Hello" Property3="world">
        <Element1.Property2>again</Element1.Property2>
        <Element1.Property3>Dave</Element1.Property3>
    </Element1>
    <Element2 Property1="Hello" Property3="world">
        <Element2.Property2>again</Element2.Property2>
        <Element2.Property1>
            <SpecialElementForSayingHi/>
        </Element2.Property1>
    </Element2>
</Main> 
```

我需要使用 XPath 匹配以下元素 - 除非有办法使用模式禁止它们存在，但我不相信有：

```
<Element1.Property3>Dave</Element1.Property3>
...
<Element2.Property1>
    <SpecialElementForSayingHi/>
</Element2.Property1> 
```

具体来说，我需要匹配元素名称采用以下格式的所有元素：

```
ParentElementName.NameOfAttributeThatExistsOnTheParentElement 
```

我在 .Net 中工作，不想为此使用外部库，所以如果可以使用 XPath 1.0 来实现，那将是理想的。如果它效率更高，我愿意使用匹配重复属性而不是元素的系统。

**编辑：**实际上没有问题。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:46:30.627

您可以使用`LINQ2XML`

```
XElement doc=XElement.Load("yourXML.xml");
foreach(XElement elm in doc.Elements())
{
    var attr=elm.Attributes();
     foreach(var elm1 in elm.Elements())
     {
          if(attr.Any(x=>elm1.Name.ToString().EndsWith(x.Name.ToString())) 
              elm1.ToString();//this contains your required XML
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T21:24:17.443

我试过用 XPAth 1.0 来做，但没有成功，也许可以用 XPath 2 或 XQuery 来做。在 .NET 中最好使用 LINQ：

```
var xml = @"
    <Main>
         <Element1 Property1=""Hello"" Property3=""world"">
             <Element1.Property2>again</Element1.Property2>
             <Element1.Property3>Dave</Element1.Property3>
         </Element1>
         <Element2 Property1=""Hello"" Property3=""world"">
             <Element2.Property2>again</Element2.Property2>
             <Element2.Property1>
                 <SpecialElementForSayingHi/>
             </Element2.Property1>
         </Element2>
   </Main>";

   var doc = XDocument.Load(new StringReader(xml));

   var result = doc.Root.Descendants().
            Where(x => x.Parent.Attributes().
                                Any(y => x.Name == x.Parent.Name + "." + y.Name)
            ); 
```

如果你想得到字符串作为结果，你可以这样做

```
 var result = doc.Root.Descendants().
            Where(x => x.Parent.Attributes().
                                Any(y => x.Name == x.Parent.Name + "." + y.Name)
            ).Select(e => e.ToString()).Aggregate((current, next) => current + next); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T22:31:31.067

这在 XPath 1.0 中是不可能的，因为它缺少诸如范围变量之类的特性或将函数指定为位置步骤的能力。

**这是一个 XPath 2.0 解决方案**：

```
/*/*/*
    [substring-before(name(), '.') eq name(..)
   and
     substring-after(name(), '.') = ../@*/name()
    ] 
```

**基于 XSLT 2.0 的验证：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:sequence select=
  "/*/*/*
    [substring-before(name(), '.') eq name(..)
   and
     substring-after(name(), '.') = ../@*/name()
    ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档应用此转换时：**

```
<Main>
    <Element1 Property1="Hello" Property3="world">
        <Element1.Property2>again</Element1.Property2>
        <Element1.Property3>Dave</Element1.Property3>
    </Element1>
    <Element2 Property1="Hello" Property3="world">
        <Element2.Property2>again</Element2.Property2>
        <Element2.Property1>
            <SpecialElementForSayingHi/>
        </Element2.Property1>
    </Element2>
</Main> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
<Element1.Property3>Dave</Element1.Property3>
<Element2.Property1>
            <SpecialElementForSayingHi/>
        </Element2.Property1> 
```

# python-sphinx - 狮身人面像添加到图像或图形的链接

> ID：13661853
> 
> 赞同：17
> 
> 时间：2012-12-01T17:32:13.133
> 
> 标签：python-sphinx

我正在Sphinx中尝试一些相当基本的东西。我有一些图像，但我更喜欢将它们保持得非常小，并且我希望允许用户单击它们以获取更大的图像。我没有找到将`image:`or`figure:`与`ref:`or结合起来的语法方式`link:`。

```
.. image:: _static/my_image_small.png 
```

和我在同一个文件夹`my_image_large.png`中。

如果您想出一个解决方案，较大的图像应该只是一个带有明确链接的文件，还是我应该创建一个带有附加`image:`标签的 reSt 文件？另一种方法是使用 reSt 文件中的图像大小，但我仍然不知道如何创建从小图像到大图像的链接。

感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T21:42:18.387

只需使用`target`指令。你最终会得到类似的东西：

```
.. image:: _static/my_image_small.png
   :target: _static/my_image_large.png 
```

在源代码中使用对静态文件夹的引用并不是绝对必要的。当您构建文档时，它们将被复制到 _images 文件夹中（因此您将在构建中拥有它们两次，而不需要它们）。

我总是在我管理图像的源文件夹旁边使用一个名为图形的文件夹。然而，my_image_large.png 文件，您可能希望放置在 _static 文件夹中，因为内容将在构建时被复制。

# linux - 我的 linux 服务器“创建的进程数”和“上下文切换”增长得非常快

> ID：13661858
> 
> 赞同：3
> 
> 时间：2012-12-01T17:33:10.327
> 
> 标签：linux, multithreading, context-switching

**编辑**：这里有更详细的答案：[https ://serverfault.com/questions/454192/my-linux-server-number-of-processes-created-and-context-switches-are-growth](https://serverfault.com/questions/454192/my-linux-server-number-of-processes-created-and-context-switches-are-growing)

我的服务器有一个奇怪的行为：-/。是一个VPS。当我这样做时`cat /proc/stat`，我可以看到每秒如何创建大约 50-100 个进程并发生大约 800k-1200k 上下文切换！所有这些信息都与服务器完全空闲，没有流量或程序运​​行。

顶部显示 0 平均负载和 100% 空闲 CPU。

我已经关闭了所有不需要的服务（httpd、mysqld、sendmail、nagios、named...），但问题仍然存在。我也是`ps -ALf`每秒都做，看不到任何变化，`ps`每次只创建一个新进程，PID和之前一样+1，所以没有创建新进程，所以我认为进程增长`cat /proc/stat`必须是线程（是的，似乎也计算线程创建`processes`，`/proc/stat`因为这表明：[http ://webcache.googleusercontent.com/search?q=cache:8NLgzKEzHQQJ:www.linuxhowtos.org/System/procstat.htm&hl=es&tbo=d&gl=es&strip =1](http://webcache.googleusercontent.com/search?q=cache:8NLgzKEzHQQJ:www.linuxhowtos.org/System/procstat.htm&hl=es&tbo=d&gl=es&strip=1) )。

我已更改为`/proc`dir 并完成`cat [PID]\status`了与`ls`（包括内核）列出的所有 PID，并且在任何进程中`voluntary_ctxt_switches`也没有`nonvoluntary_ctxt_switches`以相同的速度增长`cat /proc/stat`（仅几十/秒）。

我也完成`strace -p PID`了所有进程，因此我可以查看是否有任何进程正在创建线程或其他东西，但唯一有一点移动的进程`ssh`是`read`/`write`操作，因为数据正在发送到我的终端。

在那之后，我已经完成`vmstat -s`并看到它`forks`以同样的速度`processes`增长`/proc/stat`。正如[http://linux.die.net/man/2/fork](http://linux.die.net/man/2/fork)所说，每个人都会`fork()`创建一个新的 PID，但我的服务器 PID 没有增长！

我能想到的最后一件事是，所有的过程数据`proc/stat`和`vmstat -s`显示都与存储在同一台机器上的所有其他 VPS 共享，但我不知道这是否正确......如果有人能对此有所了解，我将不胜感激。

# java - Libgdx：围绕 z 轴旋转（矩阵变换）

> ID：13661859
> 
> 赞同：2
> 
> 时间：2012-12-01T17:33:12.447
> 
> 标签：java, matrix, libgdx, transformation

我基本上想将以下代码片段（Y轴向上）复制到libgdx：

```
let archer = Vector3d(1.0,0.0,1.0)
let target = Vector3d(4.0,0.0,5.0)
let travel = target - archer
let transform = Matrix4d.CreateTranslation(-archer) *
                Matrix4d.CreateRotationY(Math.Atan2(travel.Z,travel.X)) 
Vector3d.Transform(archer, transform) // transforms archer to (0,0,0)
Vector3d.Transform(target, transform) // transforms target to (5,0,0) 
```

来源： [https ://gamedev.stackexchange.com/questions/33901/how-to-make-an-arrow-land-at-a-specific-position-in-3d-world-space](https://gamedev.stackexchange.com/questions/33901/how-to-make-an-arrow-land-at-a-specific-position-in-3d-world-space)

这是我的方法（Z轴向上）：

```
archer = new Vector3(1,1,0);        
target = new Vector3(4,5,0);        
Vector3 travel = new Vector3(target).sub(new Vector3(archer));
float degree = (float) Math.toDegrees(Math.atan2(travel.y, travel.x));
Matrix4 transform = new Matrix4().setToTranslation(new Vector3(archer).mul(-1));
transform.mul(new Matrix4().rotate(0, 0, 1, degree));//in my case Z-Axis is up !    
archer.mul(transform); //-1.2,0.39999998,0  should be: 0,0,0
target.mul(transform); //-2.6000001,5.2,0.0 should be: 5,0,0 
```

我得到错误的结果，我找不到我的错误，但我想这与第 6 行中的旋转部分有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T00:39:35.367

我想应该是

```
archer = new Vector3(1,0,1);        
target = new Vector3(4,0,5); 
```

# php - Ajax / PHP 更新 DIV

> ID：13661860
> 
> 赞同：0
> 
> 时间：2012-12-01T17:33:18.723
> 
> 标签：php, jquery, ajax, html

我正在使用以下内容来更新名为“输出”的 DIV。这可以正常工作，但有一个例外，我希望回显条目来更新父页面。

```
<script type="text/javascript">
<!--
var divid = 'output';
var loadingmessage = '<img src="working.gif">';
function AJAX(){
var xmlHttp;
try{
xmlHttp=new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
return xmlHttp;
}
catch (e){
try{
xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
return xmlHttp;
}
catch (e){
try{
xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
return xmlHttp;
}
catch (e){
alert("Your browser does not support AJAX!");
return false;
}
}
}
}
function formget(f, url) {
var poststr = getFormValues(f);
postData(url, poststr);
}
function postData(url, parameters){
var xmlHttp = AJAX();
xmlHttp.onreadystatechange =  function(){
if(xmlHttp.readyState > 0 && xmlHttp.readyState < 4){
document.getElementById(divid).innerHTML=loadingmessage;
}
if (xmlHttp.readyState == 4) {

document.getElementById(divid).innerHTML=xmlHttp.responseText;
}
}

xmlHttp.open("POST", url, true);
xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlHttp.setRequestHeader("Content-length", parameters.length);
xmlHttp.setRequestHeader("Connection", "close");
xmlHttp.send(parameters);
}

function getFormValues(fobj)

{
var str = "";
var valueArr = null;
var val = "";
var cmd = "";

for(var i = 0;i < fobj.elements.length;i++)

{
switch(fobj.elements[i].type)

{

case "select-one":

str += fobj.elements[i].name +
"=" + fobj.elements[i].options[fobj.elements[i].selectedIndex].value + "&amp;amp;";
break;

}
}

str = str.substr(0,(str.length - 1));
return str;

}

//--></script> 
```

这称为使用：

```
<input type='button' name='Send' value='submit' onclick="javascript: formget(this.form, 'foo.php');"> 
```

我遇到的问题是 foo.php 运行一系列 exec() 命令，每个命令之间是一个 echo 语句，我希望在输出 div 中显示该语句。

所以它会做类似的事情：

echo "存档文件"; exec ("tar -cvf bar.tar bar.txt foo.txt");

echo "备份/用户"; exec ("tar -cvf /user.tar /user/*");

我希望用户看到working.gif，但在它下面每个来自foo.php 的echo 语句可以做到吗？怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:34:31.497

我不能说我曾经尝试过用一个 AJAX 请求在不同的时间发回大块数据，所以我不确定这是否可能。目前会发生什么？你是只得到第一个回显的消息，还是只得到最后的整个响应？

我知道有两件事会起作用：

1.  将您的 PHP 脚本分解为多个脚本，并使用单独的 AJAX 请求按顺序执行它们。这仅在分离的脚本不相互依赖或您找到其他方法在分离的脚本中保持状态时才有效。

2.  创建一个 iframe 并将 PHP 脚本加载到其中，而不是使用 AJAX 请求。然后刷新 PHP 脚本的输出应该可以工作了。（如果您曾经使用过 Wordpress，我相信他们会使用这种技术来显示插件更新的进度。）

# xml - 查询 linq 到 xml

> ID：13661861
> 
> 赞同：2
> 
> 时间：2012-12-01T17:33:22.037
> 
> 标签：xml, linq, linq-to-xml

我有这个 xml 文件。我正在尝试获取特定 servername 属性的所有 dbistance。对于每个 dbistance 信息组，我想在列表框中添加这样的连接结果 DEFAULT - DBCATALOG - USERNAME - PASSWORD - 1433 请我...开始讨厌 linq :)

```
 <?xml version="1.0" encoding="utf-8" ?>
<root>
  <server servername="SRV01">
    <dbistance>
      <istancename>DEFAULT</istancename>
      <catalog>DBCATALOG01</catalog>
      <username>USERNAME</username>
      <password>PASSWORD</password>
      <port>1433</port>
    </dbistance>
    <dbistance>
      <istancename>DEFAULT</istancename>
      <catalog>DBCATALOG02</catalog>
      <username>USERNAME</username>
      <password>PASSWORD</password>
      <port>1433</port>
    </dbistance>
  </server>

  <server servername="SRV02">
    <dbistance>
      <istancename>DEFAULT</istancename>
      <catalog>DBCATALOG01</catalog>
      <username>USERNAME</username>
      <password>PASSWORD</password>
      <port>1433</port>   
    </dbistance>
  </server>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:56:11.487

尝试这个

```
var doc = XDocument.Load(new StringReader(xml));
var result = doc.Root
                .Descendants("dbistance")
                .Select(elem => elem.Descendants()
                                    .Select(elem2 => elem2.Value)
                                    .Aggregate((current, next) => current + " - " + next)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:12:26.263

我将解析 xml 和结果格式拆分为两个操作。但这里有一个查询：

```
XDocument xdoc = XDocument.Load(path_to_xml);
string serverName = "SRV01";
IEnumerable<string> dbInstances =
            xdoc.Descendants("server")
                .Where(s => (string)s.Attribute("servrname") == serverName)
                .Descendants("dbinstance")
                .Select(db => String.Format("{0} - {1} - {2} - {3} - {4}", 
                    (string)db.Element("istancename"),
                    (string)db.Element("catalog"),
                    (string)db.Element("username"),
                    (string)db.Element("password"),
                       (int)db.Element("port"))); 
```

`istancename`顺便说一句，您的标签中有错字。

* * *

还考虑创建将保存数据并为您进行格式化的类：

```
public class DbInstance
{
    public string InstanceName { get; set; }
    public string Catalog { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public int Port { get; set; }

    public override ToString()
    {
        return String.Format("{0} - {1} - {2} - {3} - {4}", 
                  InstanceName, Catalog, UserName, Password, Port));
    }
} 
```

解析 xml（您可以在单独的方法中执行此操作，这将返回 DbInstance 对象的集合）：

```
XDocument xdoc = XDocument.Load(path_to_xml);
string serverName = "SRV01";
IEnumerable<DbInstance> dbInstances =
            xdoc.Descendants("server")
                .Where(s => (string)s.Attribute("servrname") == serverName)
                .Descendants("dbinstance")
                .Select(db => new DbInstance() {
                    InstanceName = (string)db.Element("istancename"),
                    Catalog = (string)db.Element("catalog"),
                    UserName = (string)db.Element("username"),
                    Password = (string)db.Element("password"),
                    Port = (int)db.Element("port") }); 
```

只需将实例分配给列表框（重写 ToString 方法即可）：

```
listBox.DataSource = dbInstances; 
```

# c# - 在服务器和客户端之间发送查询结果的最有效方式是什么

> ID：13661864
> 
> 赞同：3
> 
> 时间：2012-12-01T17:33:34.903
> 
> 标签：c#, sql, client-server

我有这个用 C# 编写的服务器/客户端应用程序。服务器端有一个 SQL Server，当客户端需要一个表时，它向服务器应用程序发送请求，服务器应用程序连接到 SQL Server 并检索表并通过 NetworkStream 将其发送给客户端。

这是发送 DataSet XML 流的服务器端代码

```
using (var networkStream = new NetworkStream(m_workerSocket[0]))
{
     dataSet.WriteXml(networkStream);
} 
```

我正在将这个 xml 文件作为字节读取并将其转换为字符串并再次将其转换为 DataSet。这是客户端代码：

```
TextReader reader = new StringReader(richTextRxMessage.Text);
DataSet dataSet = new DataSet();
dataSet.ReadXml(reader);
DataTable dtProd = new DataTable();
dataGridView1.DataSource = dataSet.Tables[0]; 
```

我的问题是这是在客户端/服务器之间发送表的有效方式吗？像 10k 条目这样的大表会不会有问题？我能做些什么来优化它？

除了这些表格，例如即时消息或不同类型的文件之外，服务器和客户端之间还会有很多通信。那么如何处理和分类大量数据，无论是文件还是数据集等。例如，我应该`<DATASET>, <DOCFILE>`在发送数据之前放置自定义字符串标签（例如等）以识别我正在发送的数据类型吗？谢谢你。

PS：我正在使用异步服务器和客户端来发送和接收数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:02:51.700

取决于你所说的高效。有几个权衡取舍。你想节省带宽吗？那么像 JSON 和 XML 这样的纯文本格式就不是可行的方法了。使用不那么冗长且支持压缩而不必使用 Base64 编码的协议会是一个更好的主意。当然，这意味着您将使用更多的 CPU 周期。还需要考虑缓存。您能否验证客户的数据自上次请求以来是否已失效？如果是这样，那么可以存储整个集合甚至部分集合的缓存机制将节省更多带宽。当然，这意味着如果您直接缓存到驱动器，您将使用更多的内存和可能更多的硬盘空间。

我认为您的问题比您意识到的要深入一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:16:42.980

您应该将 WCF 用于此类任务。 [你可以在这里读到它](http://msdn.microsoft.com/en-us/library/ms731082.aspx)

# python - django 中的自定义用户模型不允许在管理员中设置密码

> ID：13661865
> 
> 赞同：5
> 
> 时间：2012-12-01T17:33:37.343
> 
> 标签：python, django, django-admin, django-1.5

我创建了一个自定义用户模型，我在我的应用程序中成功使用了它。

问题是在管理员中，在用户编辑屏幕上，我得到了当前密码哈希的显示，而不是用于设置密码的非常有用的界面。

我在 Python 2.7 上使用 Django 1.5b1。

为了管理用户界面，我如何说服 Django 管理员像对待本机用户一样对待我的用户模型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T17:45:34.383

文档建议您需要向 admin 注册自定义模型，并定义一些方法，以便管理界面与自定义用户模型一起使用。

您可能还必须为用户定义内置表单。

来自[自定义用户和 django.contrib.admin](https://docs.djangoproject.com/en/dev/topics/auth/customizing/)

*您还需要向管理员注册您的自定义用户模型。如果您的自定义用户模型扩展了 AbstractUser，您可以使用 Django 现有的 UserAdmin 类。但是，如果您的 User 模型扩展了 AbstractBaseUser，您将需要定义一个自定义 ModelAdmin 类。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T19:13:26.400

只需将其添加到您的表单中：

```
 password = ReadOnlyPasswordHashField(
      label= ("Password"),
      help_text= ("Raw passwords are not stored, so there is no way to see "
                  "this user's password, but you can change the password "
                  "using <a href=\"password/\">this form</a>.")) 
```

借自[https://stackoverflow.com/a/15630360/780262](https://stackoverflow.com/a/15630360/780262)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-29T08:18:41.473

至少在 1.10 中，我能够做到以下几点。比上面的简单。我把它放在 admin.py 中：

```
from django.contrib.auth.admin import UserAdmin
from django.contrib import admin
from myapp.models import MyUser

class MyUserAdmin(UserAdmin):
    model = MyUser

    fieldsets = UserAdmin.fieldsets + (
            (None, {'fields': ('a_custom_field',)}),
    )

admin.site.register(MyUser, MyUserAdmin) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T02:45:23.040

如果您正在扩展 AbstractBaseUser，您将需要两个表单，一个创建表单，一个不带密码的更新表单，从 ModelForm 派生。

然后在 Admin 表单中，指定单独的创建和更新表单，以及相应的字段集：

```
class MyUserAdmin(UserAdmin):
    # The forms to add and change user instances
    form = UserChangeForm
    add_form = UserCreationForm

    fieldsets = (
        (None, {'fields': ('email', 'first_name', 'last_name')}),
    )
    add_fieldsets = (
        (None, {'fields': ('email', 'password', 'password2', 'first_name', 'last_name')}),
    ) 
```

新用户的密码将起作用。在预定义的 django 表单中而不是在管理员中更改密码。

# silverlight-5.0 - SL 超出浏览器应用程序 - SecurityException

> ID：13661870
> 
> 赞同：1
> 
> 时间：2012-12-01T17:34:10.620
> 
> 标签：silverlight-5.0, out-of-browser

我的 SL5 浏览器外应用程序可以在一台计算机上运行，​​但不能在另一台计算机上运行。
在两台计算机上，应用程序都内置并从以管理员身份运行的 VS2012 启动。
SecurityException 发生在这里：

```
Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) 
```

一个可能相关的问题：在引发异常的计算机上，应用程序在默认浏览器中运行，而在另一台计算机上，应用程序在浏览器之外运行。

任何见解将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:28:20.723

相关问题很明显：您无法使用浏览器应用程序中的标准 Silverlight 访问本地文件夹，但您可以使用 OOB 访问本地文件夹。

因此，您必须将您的功能限制为浏览器外模式或在浏览器中启用提升的权限（这非常痛苦，请参阅 SO：[search results](https://stackoverflow.com/search?q=%5Bsilverlight-5.0%5D%20elevated%20browser)上的各种问题）。

# sql-server - 表格不会显示在 VS Express 2012 for Web 中新创建的 .mdf 下

> ID：13661872
> 
> 赞同：1
> 
> 时间：2012-12-01T17:34:19.203
> 
> 标签：sql-server, database, visual-studio-express

只是试图让我的脚湿透，并从应该是一个简单的数据库 Web 应用程序开始。以下是我为启动该项目所采取的步骤。谁能看到我做错了什么？

1.  新项目
2.  Visual Basic > ASP.NET 空 Web 应用程序
3.  右键单击新创建的解决方案 > 添加 > 添加 ASP.NET 文件夹 > App_Data
4.  右键单击新创建的 App_Data 文件夹 > 添加 > 新项目 > SQL Server 数据库（在 Visual Basic > 数据下）
5.  选择数据库资源管理器 (Ctrl + Alt + S) 并展开数据连接
6.  右键单击新创建的 .mdf > 刷新
7.  展开 .mdf，右键单击表 > 添加新表
8.  创建表架构
9.  将表另存为 .sql 文件

这就是我碰壁的地方。下一步是为关系数据库创建另一个表，但我创建多少表并不重要——它们都不会出现在数据库资源管理器的 Tables 文件夹下。因此我无法继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T13:49:53.493

您可以单击表格顶部的更新按钮，然后将其保存在现有的 mdf 文件中，在表格下方有一个 sql 查询，您可以在 [table] 内编辑表格。这意味着替换名称表。要查看更改或您的表是否已创建，您必须右键单击数据库连接上的表文件夹并刷新。

# windows-phone-7 - 如何将 Windows Phone 应用程序转换为全景应用程序？

> ID：13661873
> 
> 赞同：-1
> 
> 时间：2012-12-01T17:34:20.727
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone-7.1.1

我的应用程序中有一个屏幕，其中包含 GPS 详细信息。现在我想我会在这个页面上添加一张地图。所以我想在用户从左向右滑动时显示这张地图。我觉得全景应用程序会对此有好处。知道如何将其转换为全景应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:54:05.663

创建一个新项目并选择全景模板。

然后添加旧应用的 UI 代码，添加为新项目的全景项目。您可以没有任何全景项目。检查此[全景控制链接](http://msdn.microsoft.com/en-us/windowsphonetrainingcourse_usingpivotandpanoramacontrols_topic4.aspx)

# physics - 基于物理的步行（从一个新的零开始）

> ID：13661876
> 
> 赞同：0
> 
> 时间：2012-12-01T17:34:45.243
> 
> 标签：physics, game-physics, physics-engine, bulletphysics

看到这个视频，我很惊讶，很自然地，我想尝试自己做。[http://www.youtube.com/watch?v=P_DeZUg9HiY](http://www.youtube.com/watch?v=P_DeZUg9HiY)

有谁知道他是如何让角色走路的？看1:15的视频。你认为他在腿上使用了什么样的 Bullet 物理约束？他是在制造某种弹簧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T21:40:01.440

这是一个巨大的学术研究领域。有关初学者，请参阅本文：

[http://graphics.stanford.edu/projects/bio-locomotion/](http://graphics.stanford.edu/projects/bio-locomotion/)

游戏肯定可以使用比论文中使用的更简单的控制方案。

# java - 在 Android 4.2 中访问 /sdcard

> ID：13661877
> 
> 赞同：6
> 
> 时间：2012-12-01T17:34:48.457
> 
> 标签：java, android

我正在开发一个需要直接访问 sdcard 根文件夹的应用程序，但是在 Android 4.2 中，标准 /sdcard 目录现在指向特定于运行应用程序的用户的“模拟”sdcard。这不好，因为我的应用程序需要访问存储在 sdcard 顶层的文件。有谁知道如何在 Android 4.2 中直接访问 SD 卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:11:42.423

也许我误解了你的问题，但是，我的 Nexus Galaxy 运行 Android 4.2.1，我可以使用`Environment.getExternalStorageDirectory()`. 返回的目录是`/storage/emulated/0`，但内容是 的`/sdcard`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:43:40.533

您可以将存储目录用作文件类型吗？( `java.io.File`)

如果是这样，您可以通过在您的方法中使用如下代码来获取外部存储（通常是 SD 卡，但将是没有 SD 卡的手机上的主存储）：

```
File path = Environment.getExternalStorageDirectory(); 
```

此外，访问存储需要`READ_EXTERNAL_STORAGE`您的 Android Manifest 中的权限 -`WRITE_EXTERNAL_STORAGE`如果修改了任何数据，则需要此权限。以下是清单中出现的这些权限：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

资料来源：

[http://developer.android.com/reference/android/os/Environment.html](http://developer.android.com/reference/android/os/Environment.html) [http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

# c++ - c++ 类中的 curl 问题

> ID：13661878
> 
> 赞同：1
> 
> 时间：2012-12-01T17:34:53.183
> 
> 标签：c++, curl

我在 stackoverflow 上阅读了几篇关于 c++/curl 的文章并组装了以下内容。主要目标是在一个类的实例中处理整个请求——也许稍后在辅助线程中。

我的问题是：“content_”虽然地址相同，但似乎保持空白

HttpFetch.h：

```
class HttpFetch
{
private:
    CURL *curl;
    static size_t handle(char * data, size_t size, size_t nmemb, void * p);
    size_t handle_impl(char * data, size_t size, size_t nmemb);
public:
    std::string content_;
    static std::string url_;
    HttpFetch(std::string url);
    void start();
    std::string data();
}; 
```

HttpFetch.cpp：

```
HttpFetch::HttpFetch(std::string url) {

    curl_global_init(CURL_GLOBAL_ALL); //pretty obvious
    curl = curl_easy_init();

    content_.append("Test");
    std::cout << &content_ << "\n";

    curl_easy_setopt(curl, CURLOPT_URL, &url);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &content_);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &HttpFetch::handle);
    //curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L); //tell curl to output its progress
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);

    //std::cout << &content_ << "\n";
}

void HttpFetch::start() {

    curl_easy_perform(curl);
    curl_easy_cleanup(curl);
}

size_t HttpFetch::handle(char * data, size_t size, size_t nmemb, void * p)
{
    std::string *stuff = reinterpret_cast<std::string*>(p);

    stuff->append(data, size * nmemb);

    std::cout << stuff << "\n"; // has content from data in it!

    return size * nmemb; 
} 
```

主.cpp：

```
#include "HttpFetch.h"
int main(int argc, const char * argv[])
{

    HttpFetch call = *new HttpFetch("http://www.example.com");
    call.start();

    ::std::cout << call.content_ << "\n"
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:02:23.293

您的代码有几个问题。主要问题是线路

```
HttpFetch call = *new HttpFetch("http://www.example.com"); 
```

您创建一个新的 HttpFetch 实例并将其复制到另一个实例。所以你有两个实例和两个内容字符串。要删除此问题，请将其更改为：

```
HttpFetch call("http://www.example.com"); 
```

另一个错误是行

```
curl_easy_setopt(curl, CURLOPT_URL, &url); 
```

应该是

```
curl_easy_setopt(curl, CURLOPT_URL, url.c_str()); 
```

如果您考虑过像 HttpFetch 这样的类中的资源管理，您本可以避免此类问题。由于 HttpFetch 管理一个资源（一个 curl 句柄），您必须考虑如何初始化和清理该资源以及如何处理复制、分配或移动。如果您使用 C++11，最简单的解决方案是使用`std::unique_ptr`为您处理所有这些东西的 a。

```
class HttpFetch
{
public:
    HttpFetch(const std::string& url);
    void start();
    void Print(std::ostream& stream);
private:
    typedef void (*cleanup)(CURL*);
    typedef std::unique_ptr<CURL, cleanup> CurlHandle;

    CurlHandle curlHandle;
    std::string content_;

    static size_t handle(char * data, size_t size, size_t nmemb, void * p);
};

HttpFetch::HttpFetch(const std::string& url) 
    : curlHandle(curl_easy_init(), &curl_easy_cleanup)
{
    curl_easy_setopt(curlHandle.get(), CURLOPT_URL, url.c_str());
    curl_easy_setopt(curlHandle.get(), CURLOPT_WRITEDATA, &content_);
    curl_easy_setopt(curlHandle.get(), CURLOPT_WRITEFUNCTION, &HttpFetch::handle);
    curl_easy_setopt(curlHandle.get(), CURLOPT_FOLLOWLOCATION, 1L);
}

size_t HttpFetch::handle(char * data, size_t size, size_t nmemb, void * p){
    std::string *stuff = static_cast<std::string*>(p);
    stuff->append(data, size * nmemb);
    return size * nmemb; 
}

void HttpFetch::start() {
    content_.clear();
    curl_easy_perform(curlHandle.get());
}

void HttpFetch::Print(std::ostream& stream){
    stream << content_;
}

int main()
{
    //HttpFetch call = *new HttpFetch("...");  // this is a copiler error now
    HttpFetch call("http://www.google.com");
    call.start();

    call.Print(std::cout);
} 
```

使用`unique_ptr`您的类 HttpFetch 变得不可复制且只能移动。在您提供在不同 HttpFetch 实例之间复制或共享 CURL 句柄的逻辑之前，这是有意义的。

# java - 使用 Java Swing，mouseEntered 被 mouseMoved 所掩盖。有一个简单的解决方法吗？

> ID：13661881
> 
> 赞同：1
> 
> 时间：2012-12-01T17:35:17.947
> 
> 标签：java, swing, jpanel, drawstring, mousemotionevent

基本上，我必须简单地绘制文本“鼠标输入”，然后是它的坐标。当未实现 mouseMoved 时，我的代码会成功执行此操作。如果是，它永远不会显示鼠标进入并直接转到“鼠标移动到”。我可以理解 mouseMoved 是如何做到这一点的，因为进入面板也会在该位置移动鼠标。我已经尝试将移动存储在矢量中并显示它们（对于这个项目来说还不是必需的），但它仍然没有绘制鼠标输入的内容。这让我怀疑有更深层次的原因造成了这种情况。有简单的解决方法吗？

我为未完成的原始代码道歉（未完成，因为它还没有完成我需要它做的所有事情，但它确实可以使用它的 GUI 对应物编译和运行）。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Vector;
import javax.swing.*;

public class DrawingArea extends JPanel {

int x1, x2, y1, y2;
int shapeType;
char mouseAction;
Vector<String> eventList = new Vector<String>();

public DrawingArea() {
    initialize();
}

public void initialize() {

    addMouseListener(new MouseAdapter() {

      public void mouseEntered(MouseEvent m) {
          x1 = m.getX();
          y1 = m.getY();
          mouseAction = 'a';
          shapeType = 0;
          repaint();

      }

     public void mouseExited (MouseEvent m) {
         x1 = m.getX();
         y1 = m.getY();
         mouseAction = 'b';
         shapeType = 0;
         repaint();
     }

      public void mousePressed(MouseEvent m) {

          x1 = m.getX();
          y1 = m.getY();
          mouseAction = 'd';
          shapeType = 0;
          repaint();
      }
      public void mouseReleased(MouseEvent m) {

          x2 = m.getX();
          y2 = m.getY();
          repaint();
      }
    });

  addMouseMotionListener(new MouseMotionAdapter() {

      public void mouseMoved (MouseEvent m) {

          x2 = m.getX();
          y2 = m.getY();
          mouseAction = 'c';
          shapeType = 0;
          repaint();
      }

       public void mouseDragged(MouseEvent m) {

             x2 = m.getX();
             y2 = m.getY();
             repaint();
          }
      });
}

public void output(String event, MouseEvent m) {

}

public void setShapeType(int num) {

    if (num == 1) {
        shapeType = 1;
        mouseAction = 'z';
        repaint();
    }
    else if (num == 2) {
        shapeType = 2;
        mouseAction = 'z';
        repaint();
    }
    else if (num == 3) {
        shapeType = 0;
        mouseAction = 'z';
        repaint();
    }
}

public void paint(Graphics g) {
    super.paint(g);

    if (shapeType == 1) {

        g.drawString("Rectangle", 25,25);

    }
    else if (shapeType == 2)
        g.drawString("Circle", 25, 25);

    if (mouseAction == 'a') {
        g.drawString("Mouse entered at (" + x1+ ", " + y1 + ")", 25, 25);
    }

    else if (mouseAction == 'b') {
        g.drawString("Mouse exited at (" + x1 + ", " + y1 + ")", 25, 25);

    }

    else if (mouseAction == 'c') {
        g.drawString("Mouse moved at (" + x2 + ", " + y2 + ")", 25, 25);

    }

    else if (mouseAction == 'd') 
        g.drawString("Mouse clicked at (" + x1 + ", " + y1 + ")", 25, 25);
}
} 
```

作为参考，这里是 GUI 代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SimpleGUI extends JFrame {

DrawingArea drawArea = new DrawingArea();

public SimpleGUI() {
    createGUI();
}

public void createGUI() {

    JFrame main = new JFrame();
    main.setVisible(true);
    main.setSize(500, 600);
    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel right = new JPanel(new GridLayout(20,1));
    JPanel bottom = new JPanel();

    JButton rect = new JButton("Rectangle");
    JButton circ = new JButton("Circle");
    JButton erase = new JButton("Erase");
    JButton send = new JButton("Send");

    JTextField text = new JTextField(30);

    right.add(rect);
    right.add(circ);
    right.add(erase);

    bottom.add(text);
    bottom.add(send);

    drawArea.setBackground(Color.WHITE);

    main.add(drawArea, BorderLayout.CENTER);
    main.add(right, BorderLayout.EAST);
    main.add(bottom, BorderLayout.SOUTH);

    rect.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            drawArea.setShapeType(1);
        }
    });

    circ.addActionListener (new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            drawArea.setShapeType(2);
        }

    });

    erase.addActionListener (new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            drawArea.setShapeType(3);
        }
    });

}

public static void main (String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new SimpleGUI();
        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:39:56.700

问题不在于听众，而在于您的渲染逻辑......

```
if (mouseAction == 'a') {
    g.drawString("Mouse entered at (" + x1 + ", " + y1 + ")", 25, 25);
} else if (mouseAction == 'b') {
    g.drawString("Mouse exited at (" + x1 + ", " + y1 + ")", 25, 25);
} else if (mouseAction == 'c') {
    g.drawString("Mouse moved at (" + x2 + ", " + y2 + ")", 25, 25);
} else if (mouseAction == 'd') {
    g.drawString("Mouse clicked at (" + x1 + ", " + y1 + ")", 25, 25);
} 
```

基本上，当鼠标进入时，它会触发 a `mouseAction`of `a`，紧接着是 a `mouseAction`of `c`。

我推测重绘管理器永远不会有时间渲染`a`，因为`c`它会覆盖它。

如果您更新了绘制代码以分离运动和动作之间的逻辑，您应该能够看到差异。

```
g.drawString("Mouse " + (mouseEntered ? "entered" : "exited") + " at (" + x1 + ", " + y1 + ")", 25, 50);
if (mouseAction == 'c') {
    g.drawString("Mouse moved at (" + x2 + ", " + y2 + ")", 25, 25);
} else if (mouseAction == 'd') {
    g.drawString("Mouse clicked at (" + x1 + ", " + y1 + ")", 25, 25);
} 
```

我添加了一个`mouseEntered`字段，这是一个简单的`boolean`值，设置为`true`from`mouseEntered`和`false`from`mouseExited`

此外，约定更喜欢覆盖`paintComponent`方法而不是`paint`. `paintComponent`是双缓冲的，`paint`不是。

# c++ - 子类化 vtk 样式：未定义的引用

> ID：13661882
> 
> 赞同：0
> 
> 时间：2012-12-01T17:35:36.857
> 
> 标签：c++, qt, vtk

我想继承一个 vtkInteractorStyleImage 来改变鼠标在 clics 上的行为。我正在使用 Qt Creator，并且成功尝试了 vtkinteractorStyleImage 等。

这是我的代码。

# vtkinteractorstylevisor.h：

```
#define VTK_EXCLUDE_STRSTREAM_HEADERS

#ifndef VTKINTERACTORSTYLEVISOR_H
#define VTKINTERACTORSTYLEVISOR_H
#include <vtkInteractorStyleImage.h>

class VTK_RENDERING_EXPORT vtkInteractorStyleVisor : public vtkInteractorStyleImage
{
public:
    static vtkInteractorStyleVisor* New();
    vtkTypeMacro(vtkInteractorStyleVisor, vtkInteractorStyleImage)

    virtual void OnLeftButtonDown();

protected:
vtkInteractorStyleVisor();
~vtkInteractorStyleVisor();

};

#endif // VTKINTERACTORSTYLEVISOR_H 
```

# vtkinteractorstyle.cpp

```
#include <vtkinteractorstylevisor.h>
#include <vtkObjectFactory.h>

vtkStandardNewMacro(vtkInteractorStyleVisor) 
```

我想开始实现左键单击行为，但编译这个我得到这个错误：

> vtkinteractorstylevisor.cpp:-1: error: undefined reference to `vtkInteractorStyleVisor::vtkInteractorStyleVisor()' :-1: error: collect2: error: ld returned 1 exit status

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:59:09.857

好，我知道了。

我忘了在 .cpp 文件中包含构造函数和析构函数的实现。

感谢您花时间阅读本文。

# php - PHP包含和数据库连接

> ID：13661883
> 
> 赞同：0
> 
> 时间：2012-12-01T17:35:37.980
> 
> 标签：php, include

在我的 PHP 代码中，我总是遇到无法在某处使用 include 的问题！

例如，我使用 MySQL 连接到我的数据库，并创建了一个 global.php 来包含并连接到我的数据库并将其用于所有其他 PHP 文件。

但在某个地方我不断收到错误：

```
Fatal error: Cannot redeclare connect() (previously declared in C:\xampp\htdocs\mypm\functions\global.php:4) in C:\xampp\htdocs\mypm\functions\global.php on line 7 
```

我不能在其他 PHP 文件中包含或使用一些使用 global.php 的文件！

有什么建议么？谢谢

这是代码

```
require ('users.php'); function get_gravatar($id) { $email = get_email($id); $s = 80; $d = 'mm'; $r = 'g'; $img = false; $atts = array();
$url = 'http://www.gravatar.com/avatar/'; $url .= md5( strtolower( trim($email) ) ); 
$url .= "?s=$s&d=$d&r=$r";
    if ( $img ) {
       $url = '<img src="' . $url . '"'; foreach ( $atts as $key => $val ) $url .= ' ' . $key . '="' . $val . '"'; $url .= ' />'; } return $url; 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:37:33.880

PHP 有替代版本，`include()`可以`require()`解决这个问题。使用`include_once()`或`require_once()`用于可能包含在多个文件中的文件，以防止公共文件多次包含在您的代码中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T17:37:41.363

你需要做：

```
include_once 'global.php'; 
```

*   [http://us1.php.net/manual/en/function.include-once.php](http://us1.php.net/manual/en/function.include-once.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T17:38:34.497

你不能做`include "db.php";`你必须输入`require_once "db.php";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:42:58.360

请向我们提供代码。除非我们无法调查这个问题。您可能会错误地将同一文件包含在同一代码中。请张贴代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T17:43:13.430

页面上是否加载了多个 php 文件？

变量被多次定义

# php - PDO 连接不在类之间移动

> ID：13661887
> 
> 赞同：1
> 
> 时间：2012-12-01T17:36:22.330
> 
> 标签：php, class, pdo, oop

```
class Group extends dbConnection { //Class for group, for ex. employe and employers.
    public $name;  // Name of group
    public $pdo;

    public function __construct ($name, dbConnection $pdo) {
    $this->pdo = $database->pdo;
    }

    public function getGroupList() {  
        try //                       FAULTY LINE BELOW \/\/\/\/\/\/\/
        {
          $pdo -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); //to catch exceptions

          $stmt = $pdo -> query('SELECT id, Name, Skills FROM '.$this->name); //sql query with group name
          $list = $stmt->fetchAll(PDO::FETCH_NUM); //fetch statement into array
          $stmt -> closeCursor();
          unset($stmt);
          return var_dump($list); //gives pure data
        }
        catch(PDOException $e) 
        {
          return 'There was some error: ' . $e->getMessage();
        }
    }

} 
```

和 dbConnect 类：

```
 class dbConnection {
    public $pdo;
    public function __construct () {
        $this->dbConnect();
    }
    public function dbConnect () {
        if((count($_POST) == 6)&&($_GET['a'] == "connect")) {
            $host = $_POST['host'];
            $port = $_POST['port'];
            $username = $_POST['username'];
            $password = $_POST['password'];
            $database = $_POST['database']; 
            try{
                    $pdo = new PDO('mysql:host='.$host.';dbname='.$database.';port='.$port, $username, $password );
                    echo 'Connection successful!';
                    return $pdo;
            }
            catch(PDOException $e){
                    echo 'Error: ' . $e->getMessage();
            }   
        }
    }
} 
```

和执行：

```
$conn = new dbConnection;
$workers = new Group("workers", $conn);
$workers->getGroupList(); 
```

之后：“连接成功”我收到错误：

致命错误：在第 14 行调用非对象上的成员函数 setAttribute()

我认为班级组只是没有从 dbConnection 获得 $pdo。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:39:13.047

更改（在 dbConnect 类中）

```
$pdo = new PDO('mysql:host='.$host.';dbname='.$database.';port='.$port, $username, $password ); 
```

到

```
$this->pdo = new PDO('mysql:host='.$host.';dbname='.$database.';port='.$port, $username, $password ); 
```

也改变以下

```
public function __construct ($name, $database) {
  $this->pdo = $database->pdo;
} 
```

同样在`Group`课堂上，使用`$this->pdo`代替`$pdo`

# c# - 控制台暂停方式

> ID：13661890
> 
> 赞同：6
> 
> 时间：2012-12-01T17:36:42.063
> 
> 标签：c#, console

由于我是 C# 新手，所以我在 Google 上搜索了我曾经在 C++ 中使用的各种东西。其中之一是控制台应用程序中的暂停可能性。

很多人提出了不同的方法，比如

```
System.Console.ReadKey(true);
System.Console.WriteLine(); 
```

其他人甚至展示了“应该”比其他人更有效的自制功能。决定哪个是更好的解决方案真是令人头疼。

谁能举例说明 C# 如何解释它们以及哪种方式应该是最有效的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-10T16:49:25.353

使用以下任一方法运行程序：

1.  `ctrl`+`F5`

或如 Rajesh 建议的那样

2.  `Console.ReadKey() //pauses for any key`

3.  `Console.ReadLine() //pauses for enter key`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T10:06:18.890

如果您谈论的是内置的“暂停”命令，您可以随时调用它——即使它很丑陋。这是我使用的：

```
static void Pause()
{
    Console.WriteLine();
    var pauseProc = Process.Start(
        new ProcessStartInfo()
            {
                FileName = "cmd",
                Arguments = "/C pause",
                UseShellExecute = false
            });
    pauseProc.WaitForExit();
} 
```

通常是这样的：

```
if (Environment.UserInteractive())
    Pause(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T17:49:58.170

我通常使用`do`and`while`来暂停控制台。然后，如有必要，如果您按特定键，控制台应恢复。

**例子**

```
do
{

/*  while (!Console.KeyAvailable) //Continue if pressing a Key press is not available in the input stream
    {
        //Do Something While Paused
    } 
*/

} while (Console.ReadKey(true).Key != ConsoleKey.Escape); //Resume if Escape was pressed 
```

如果您将其保留为，则只有在暂停时按下`//Do Something While Paused`该键时控制台才会恢复。`Esc`

但是，如果您不希望控制台应用程序恢复，您可以`while (true);`使用`while (Console.ReadKey(true).Key != ConsoleKey.Escape);`

**例子**

```
do
{
    //break; //Resume
} while (true); //Continue while True (Always True) 
```

**注意**：控制台应用程序将暂停，因为这样做`do { } while (Condition);`只是告诉控制台应用程序您正在做某事。因此，控制台应用程序将等待操作执行。然后，通常在无事可做时关闭。
**注意**：`while`用于循环。因此，除非条件变为假，否则应用程序不会关闭。

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-23T08:22:53.077

或者您可以使用 Pat 所做的，但用于 Arguments 而不是

```
Arguments = "/C pause" 
```

您可以使用

```
Arguments = "/C TIMEOUT /t 4 /nobreak > NUL" 
```

其中数字 4 是控制台在执行其余程序之前将暂停的秒数。

整个功能将是

```
static void Pause(int sec)
    {
        Console.WriteLine();
        var pauseProc = Process.Start(
            new ProcessStartInfo()
            {
                FileName = "cmd",
                Arguments = "/C TIMEOUT /t " + sec + " /nobreak > NUL",
                UseShellExecute = false
            });
        pauseProc.WaitForExit();
    } 
```

您将使用暂停功能调用它，暂停秒数。

```
Pause(4); 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-08-13T18:51:28.150

你可以写“Console.ReadLine();” 这也是有目的的。

# android - 尝试将新对象插入应用引擎数据库时出错

> ID：13661894
> 
> 赞同：1
> 
> 时间：2012-12-01T17:36:50.757
> 
> 标签：android, google-app-engine, google-cloud-endpoints

这是我第一次让应用引擎工作，所以也许我只是错过了某个地方的一步，但我正在尝试像这样将东西插入到应用引擎数据库中

```
Builder endpointBuilder = new Manufacturerendpoint.Builder(AndroidHttp.newCompatibleTransport(),new JacksonFactory()
    , new HttpRequestInitializer() {
        public void initialize(HttpRequest httpRequest) { }
    });

    Manufacturerendpoint manufacturer = CloudEndpointUtils.updateBuilder(endpointBuilder).build();

    String[] manufacturers = this.getResources().getStringArray(R.array.manufacturers);
    ContentValues v = new ContentValues();
    ContentValues val = new ContentValues();
    for(int i = 0; i < manufacturers.length; i++){
        Manufacturer manu = new Manufacturer();
        manu.setManufacturerName(manufacturers[i]);
        manu.setManufacturerID(i);
        try{
            Manufacturer result = manufacturer.insertManufacturer(manu).execute();
            Log.d("TAG", "TAG");
        }catch(Exception e){
            e.printStackTrace();
        } 
```

当我通过模拟器在本地服务器上运行它时，它工作正常，但是当我将代码上传到应用引擎时，我得到一个`response error`

```
12-01 12:06:16.019: W/System.err(2589): com.google.api.client.googleapis.json.GoogleJsonResponseException: 404 Not Found
12-01 12:06:16.019: W/System.err(2589): Not Found
12-01 12:06:16.029: W/System.err(2589):     at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:114)
12-01 12:06:16.029: W/System.err(2589):     at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40)
12-01 12:06:16.029: W/System.err(2589):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:417)
12-01 12:06:16.039: W/System.err(2589):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
12-01 12:06:16.039: W/System.err(2589):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
12-01 12:06:16.039: W/System.err(2589):     at com.tyczj.bowling.Bowlers.tables(Bowlers.java:716)
12-01 12:06:16.039: W/System.err(2589):     at com.tyczj.bowling.Bowlers.run(Bowlers.java:859)
12-01 12:06:16.039: W/System.err(2589):     at java.lang.Thread.run(Thread.java:856)
12-01 12:24:21.989: W/System.err(2589): javax.net.ssl.SSLException: Read error: ssl=0x670d1160: I/O error during system call, Connection reset by peer
12-01 12:24:22.029: W/System.err(2589):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_read(Native Method)
12-01 12:24:22.029: W/System.err(2589):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:664)
12-01 12:24:22.039: W/System.err(2589):     at libcore.io.Streams.readSingleByte(Streams.java:41)
12-01 12:24:22.039: W/System.err(2589):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:648)
12-01 12:24:22.039: W/System.err(2589):     at libcore.io.Streams.readAsciiLine(Streams.java:201)
12-01 12:24:22.049: W/System.err(2589):     at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:573)
12-01 12:24:22.049: W/System.err(2589):     at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:821)
12-01 12:24:22.049: W/System.err(2589):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
12-01 12:24:22.059: W/System.err(2589):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
12-01 12:24:22.059: W/System.err(2589):     at libcore.net.http.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:134)
12-01 12:24:22.059: W/System.err(2589):     at com.google.api.client.http.javanet.NetHttpResponse.<init>(NetHttpResponse.java:37)
12-01 12:24:22.059: W/System.err(2589):     at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:101)
12-01 12:24:22.059: W/System.err(2589):     at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:980)
12-01 12:24:22.069: W/System.err(2589):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:399)
12-01 12:24:22.069: W/System.err(2589):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
12-01 12:24:22.069: W/System.err(2589):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
12-01 12:24:22.069: W/System.err(2589):     at com.tyczj.bowling.Bowlers.tables(Bowlers.java:716)
12-01 12:24:22.069: W/System.err(2589):     at com.tyczj.bowling.Bowlers.run(Bowlers.java:859)
12-01 12:24:22.079: W/System.err(2589):     at java.lang.Thread.run(Thread.java:856) 
```

还有什么我应该做的吗？我用这个[例子](http://devthots.blogspot.in/2012/07/building-awesome-android-apps-with.html)作为参考

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:06:19.453

虽然 Google Cloud Endpoints 处于受信任的测试人员阶段，但您需要先将您的应用程序列入白名单，然后才能部署它。要被列入白名单，您必须申请[受信任的测试人员计划](http://endpoints-trusted-tester.appspot.com)并被接受。目前，我们已经放慢了接受速度，因此您可能不会被接受，或者可能会在很长一段时间后被接受。

如您所见，本地开发应该可以正常工作。

# objective-c - 解决方法：使用未声明的标识符“_cmd”

> ID：13661899
> 
> 赞同：0
> 
> 时间：2012-12-01T17:37:28.497
> 
> 标签：objective-c, c, logging, macros, nsstring

我有一个特殊的`NSLog`方法 swizzle，它将当前方法打印为日志语句的一部分。

对于 Objective-C 方法，我有一个宏，它使用：`NSStringFromSelector(_cmd)`

对于非 Objective-C 方法，我有第二个宏使用，`__PRETTY_FUNCTION__`因为`_cmd`未定义。

我现在正在尝试对两者使用相同的宏，因此我正在尝试测试它是否已定义并认为我可以这样做：

```
NSString *command = (&_cmd != nil ? NSStringFromSelector(_cmd) : [NSString stringWithCString:__PRETTY_FUNCTION__ encoding:NSUTF8StringEncoding]) 
```

`Use of undeclared identifier '_cmd'`但是当宏用于非 Objective-C 方法时，我仍然会遇到一些错误。如何进行运行时测试以确定是否`_cmd`已定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:47:23.693

您无法在运行时测试是否`_cmd`已定义。

`__PRETTY_FUNCTION__`宏在 Objective-C 方法中定义。随处使用`__PRETTY_FUNCTION__`，不要尝试使用`_cmd`.

例子：

```
- (IBAction)mapWasTapped:(UITapGestureRecognizer *)sender {
    NSLog(@"%s", __PRETTY_FUNCTION__);
} 
```

这是输出：

```
2012-12-01 11:45:30.036 TestApp[92581:c07] -[MainViewController mapWasTapped:] 
```

# php - Blueimp jQuery 文件上传 - 列出数据库中的图像

> ID：13661902
> 
> 赞同：2
> 
> 时间：2012-12-01T17:37:50.430
> 
> 标签：php, jquery, database, file-upload, blueimp

我需要帮助。请给我提意见。

我使用 Blueimp jQuery File Upload 脚本并添加数据库连接，并将所有上传图像添加到 db 文件中。如果您在再次打开上传页面时知道此脚本，则脚本会显示旧的上传文件

但**我只需要显示我的 property_id 图像**示例**property_id='1'**我该怎么做？

我的基础设施是这样的

数据库表名：property_images

image_id property_id 订单图片

1 1 1 图像.jpg

2 1 2 图像2.jpg

3 1 3 图像3.jpg

4 2 1 图像.jpg

//------------此代码部分将所有图像写入数据库---------------------------- --

```
function query($query) {
$database = $this->options['database'];
$host = $this->options['host'];
$username = $this->options['username'];
$password = $this->options['password'];
$link = mysql_connect($host,$username,$password);
if (!$link) {
die(mysql_error());
}
$db_selected = mysql_select_db($database);
if (!$db_selected) {
die(mysql_error());
}
$result = mysql_query($query);
mysql_close($link);
return $result;
}
function add_img($whichimg)
{
    $property_id= $_POST['property_id'];
$add_to_db = $this->query("INSERT INTO property_images (image,property_id) VALUES ('".$whichimg."','".$property_id."')") or die(mysql_error());
return $add_to_db;
}
function delete_img($delimg)
{
$delete_from_db = $this->query("DELETE FROM property_images WHERE image = '$delimg'") or die(mysql_error());
return $delete_from_db;
} 
```

我认为这个脚本使用这个代码来列出图像但是如何改变这个代码

```
protected function get_file_object($file_name) {
    if ($this->is_valid_file_object($file_name)) {
        $file = new stdClass();
        $file->name = $file_name;
        $file->size = $this->get_file_size(
            $this->get_upload_path($file_name)
        );
        $file->url = $this->get_download_url($file->name);
        foreach($this->options['image_versions'] as $version => $options) {
            if (!empty($version)) {
                if (is_file($this->get_upload_path($file_name, $version))) {
                    $file->{$version.'_url'} = $this->get_download_url(
                        $file->name,
                        $version
                    );
                }
            }
        }
        $this->set_file_delete_properties($file);
        return $file;
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:30:43.077

列表是通过`get_file_objects`方法（使用`scandir`方法）完成的。用您的选择查询替换 scandir。然后它遍历调用`get_file_object`您提到的方法的结果。所以这`get_file_objects`是你想要改变的方法。

# python - 通过存储字符串。入门 - Tkinter/Python

> ID：13661906
> 
> 赞同：1
> 
> 时间：2012-12-01T17:38:00.317
> 
> 标签：python, tkinter, tkinter-entry

我正在创建一个有助于求解二次方程的程序 - 这只是布局的弃子，但本质上，当我输入参数 (和) 时`A`，它应该存储它，然后我可以稍后使用它。`B``C`

这是我到目前为止得到的（不要介意名称和文字，它是丹麦语）：

```
Vara = StringVar()
Varb = StringVar()
Varc = StringVar()

#Parabel
def Parabel():

    parabel = Tk()
    parabel.minsize(600, 400)
    parabel.maxsize(600,400)
    parabel.title("Parablens rødder")

    pLabel = Label(parabel, text = "Parablens rødder").pack(side = TOP)
    pLabel1 = Label(parabel, text = "Indtast parameterne A, B, C:").pack()
    #A
    pLabel2 = Label(parabel, text = "A:").pack()
    pEntry1 = Entry(parabel, textvariable = Vara).pack()
    #B
    pLabel3 = Label(parabel, text = "B:").pack()
    pEntry2 = Entry(parabel, textvariable = Varb).pack()
    #C
    pLabel4 = Label(parabel, text = "C:").pack()
    pEntry3 = Entry(parabel, textvariable = Varc).pack()

    pButton = Button(parabel, text = "OK", command = para ).pack()

def para():
    a = Vara.get()
    b = Varb.get()
    c = Varc.get()

    print(a,b,c) # just to test if they got stored, 
```

从我所读到的内容来看，这应该可以，但是当我打印 a,b,c 时，它会变成空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:42:48.433

如果这是完整的程序，那么它有一些问题。在我的 PC 上它根本没有运行（没有 GUI，异常），也许你可以运行它，但它不会做任何合乎逻辑的事情。这就是为什么：

1）您不能在调用之前创建 StringVar `Tk()`。在我的代码（试图修复你的）中，我在一开始就添加了两行：

```
from Tkinter import *
root = Tk() 
```

2) 你没有激活 Tkinter 的主循环。我在 Parabel() 的底部添加了这一行：

```
root.mainloop() 
```

3）我添加了一行调用你的函数：

```
Parabel() 
```

我让它运行正常。

# awk - awk“如果”语句

> ID：13661907
> 
> 赞同：4
> 
> 时间：2012-12-01T17:38:01.283
> 
> 标签：awk

我有一个文件

```
foo
--
bar 
```

我只想要分隔符上方的线条。我已经为此苦苦挣扎了太久，并尝试了许多变体。我的一个班轮是：

```
echo -e "foo\n-- \nbar" | gawk -v x=0 -- '/^--\ / { x++ } ; IF (x==0) {print} ' 
```

这应该只打印“foo”，但我得到了整个文件输出。如果我改为打印 x 我得到

```
0
1
1 
```

我似乎无法让 make awk 根据 x 的值有条件地打印一行。我知道我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:41:37.227

尝试这样做：

```
echo -e "foo\n-- \nbar" | awk '/^--/{exit}1' 
```

**解释**

*   `/^--/`是匹配当前行开头的字符串的正则表达式
*   `{}`如果条件为*真*，则执行部分（前一个正则表达式）
*   `1`就像`{print}`：默认情况下，`awk`如果条件为*真*，则在 STDOUT 上打印。虽然对于 awk`1`是*正确*的，但它会打印当前行。

命令的分解：

```
echo -e "foo\n-- \nbar" | awk '
    {
        if (/^--/) {
            exit
        }
        else {
            print
        }
    }
' 
```

替代分解：

```
echo -e "foo\n-- \nbar" |
awk '(/^--/) { exit }
             { print }' 
```

这强调了有两个模式动作规则；具有显式模式和退出操作的一种；另一个具有隐式模式和打印动作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T18:00:44.223

如果你`sed`更喜欢：

```
sed -n '/^--$/q;p' file.txt 
```

解释：`sed`逐行读取文件。如果 sed 找到该模式`^--$`（即，正好包含 的行`--`）它退出（即`q`命令），否则，`sed`打印出该行的内容（使用`p`命令）。请注意，这`sed`是使用该`-n`选项启动的，即除非使用命令明确告知，否则不会输出任何内容`p`。由于在找到`sed`分隔符时退出`--`（即在`p`命令之前），因此不会打印此分隔符。

好处`sed`是它比`awk`这个任务更快。

**编辑。**正如 glenn jackman 在评论中指出的那样，使用 GNU sed，您可以使用：

```
sed '/^--$/Q' file.txt 
```

（当我回答时，我不在具有`sed`with命令的计算机上）。`Q`谢谢格伦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T17:58:12.553

您的原始脚本在正确的行上，但太复杂了：

```
echo -e "foo\n-- \nbar" | gawk '/^--\ / { x++ } { if (x==0) print}' 
```

变量会自动创建并归零`awk`（因此您不需要`-v x=0`等）。“点双破折号”代码很好。分号是不必要的（充其量）。这`IF (x == 0) {print}`很奇怪。Mac OS X 10.7.5 上的`awk`接受它，但我不确定它在做什么。替换动作针对每一行，`x`在打印前测试是否为零。

就个人而言，我可能会`sed`为此使用：

 ~~~~```
echo -e "foo\n-- \nbar" | sed '/^--/q' 
```~~  ~~[按照gniourf_gniourf 的](https://stackoverflow.com/users/1815797/gniourf-gniourf)[建议](https://stackoverflow.com/a/13662135/15168)修复我的`sed`命令：

```
echo -e "foo\n-- \nbar" | sed -n '/^--/q;p' 
```

您可以使用[sputnick](https://stackoverflow.com/users/465183/sputnick)在他的[回答](https://stackoverflow.com/a/13661945/15168)`awk`中显示的命令来模仿它。

```
echo -e "foo\n-- \nbar" | awk '/^--/ {exit} 1' 
```

1 匹配每一行（它始终为真）并触发默认操作，即“打印 $0”。你也可以写：

```
echo -e "foo\n-- \nbar" | awk '/^--/ {exit} {print}' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T14:54:57.947

在 GNU awk 中，您可以将记录分隔符设置为仅包含“--”的行，然后仅打印第一条记录：

```
$ gawk -v RS='\n--\n' 'NR==1' file
foo 
```

或者如果性能是一个问题：

```
$ gawk -v RS='\n--\n' 'NR==1{print;exit}' file
foo 
```

这样您就可以稍后增强脚本以打印您可能想要的任何其他记录：

```
$ cat file
the
quick
--
brown
fox
--
jumped
$
$ gawk -v RS='\n--\n' 'NR==1' file
the
quick
$ gawk -v RS='\n--\n' 'NR==2' file
brown
fox
$ gawk -v RS='\n--\n' 'NR==3' file
jumped 
```~~~~

# c++ - C++ CreateWindowEx 返回 NULL

> ID：13661912
> 
> 赞同：2
> 
> 时间：2012-12-01T17:38:56.557
> 
> 标签：c++, windows

我正在尝试使用 C++ 设置一个简单的窗口，但我对`CreateWindowEx`返回的调用`NULL`。我使用的大部分代码来自MSDN 网站上的[示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/ff381409%28v=vs.85%29.aspx)我尝试过的任何方法都没有奏效，任何帮助将不胜感激。

这是代码：

```
//Include the windows header
#include <Windows.h>

//Forward declaration of the WndProc function
LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);

//Main entry point
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow) {
    //Window class name
    const wchar_t windowName[] = L"Window Class";

    //Set up window class
    WNDCLASS wnd;
    wnd.lpfnWndProc = WndProc;
    wnd.hInstance = hInstance;
    wnd.lpszClassName = windowName;

    //Register window class
    RegisterClass(&wnd);

    //Create window
    //! This returns NULL
    HWND hWnd = CreateWindowEx(
        0,
        windowName,
        L"Windows Programming",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        NULL,
        NULL,
        hInstance,
        NULL
        );

    //Simple check to see if window creation failed
    if(hWnd == NULL) {
            //Pause
        system("PAUSE");
        return -1;
    }

    //Show the window
    ShowWindow(hWnd, nCmdShow);

    //Main message loop
    MSG msg;
    while(GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}

//WndProc function
LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {
    switch(msg) {
    case WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hDc = BeginPaint(hWnd, &ps);

            FillRect(hDc, &ps.rcPaint, (HBRUSH) (COLOR_WINDOW + 1));

            EndPaint(hWnd, &ps);

            return 0;
        }
    case WM_DESTROY:
        {
            PostQuitMessage(0);
            return 0;
        }
    }

    return DefWindowProc(hWnd, msg, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T18:16:43.850

请注意，来自 MSDN 的示例在设置它关心的字段之前将 WNDCLASS 的所有字段清零。

```
WNDCLASS wnd = { };  // from MSDN example 
```

空大括号是用于将整个结构初始化为 0 的 C 和 C++ 简写。通常将其写为`{ 0 }`，这在技术上略有不同，但具有相同的净效果。

在您的代码中，您删除了初始化：

```
WNDCLASS wnd;  // your code 
```

因此，您可能会在其他重要字段之一（例如`cbClsExtra`or ）中获得一些垃圾值`cbWndExtra`，从而使该类无法注册。由于该类未注册，因此您无法创建该类的窗口。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-01T17:58:26.573

我已经让你的代码工作了。基本上我在使用 WNDCLASS（或 WNDCLASSEX）结构时所做的就是使用所有参数来确保不会遗漏任何东西。

```
//Include the windows header
#include <Windows.h>

//Forward declaration of the WndProc function
LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);

//Main entry point
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow) {
    //Window class name
    const wchar_t windowName[] = L"Window Class";

    //Set up window class
    WNDCLASS wnd;
    wnd.cbClsExtra = 0;
    wnd.cbWndExtra = 0;
    wnd.hCursor = LoadCursor(0, IDC_ARROW);
    wnd.hIcon = LoadIcon(0, IDI_WINLOGO);
    wnd.lpszMenuName = 0;
    wnd.style = 0;
    wnd.hbrBackground = 0;
    wnd.lpfnWndProc = WndProc;
    wnd.hInstance = hInstance;
    wnd.lpszClassName = windowName;

    //Register window class
    RegisterClass(&wnd);

    //Create window
    //! This returns NULL
    HWND hWnd = CreateWindowEx(
        0,
        windowName,
        L"Windows Programming",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        NULL,
        NULL,
        hInstance,
        NULL
        );

    //Simple check to see if window creation failed
    if(hWnd == NULL) {
            //Pause
        system("PAUSE");
        return -1;
    }

    //Show the window
    ShowWindow(hWnd, nCmdShow);

    //Main message loop
    MSG msg;
    while(GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}

//WndProc function
LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {
    switch(msg) {
    case WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hDc = BeginPaint(hWnd, &ps);

            FillRect(hDc, &ps.rcPaint, (HBRUSH) (COLOR_WINDOW + 1));

            EndPaint(hWnd, &ps);

            return 0;
        }
    case WM_DESTROY:
        {
            PostQuitMessage(0);
            return 0;
        }
    }

    return DefWindowProc(hWnd, msg, wParam, lParam);
} 
```

# cryptography - 快速查找 Schnorr 群生成器的方法

> ID：13661913
> 
> 赞同：4
> 
> 时间：2012-12-01T17:38:59.913
> 
> 标签：cryptography, primes, gmp, number-theory, prime-factoring

要找到[Schnorr 群生成器](http://en.wikipedia.org/wiki/Schnorr_group)，我必须找到三个数字 p、q 和 r，这样：

*   p = qr + 1
*   p 和 q 是素数

当 p 和 q 应该是非常大的素数时，很难找到满足所有标准的 q 和 r。我尝试使用 GNU GMP 库随机查找 q 和 r，但我在笔记本电脑上的 30 分钟内没有找到符合上述标准的数字。

有没有什么快速的方法可以找到这样的数字和 Schorr 群生成器？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:23:20.983

[我在当前 DSA 规范](https://csrc.nist.gov/publications/detail/fips/186/4/final)的 A1.1.2 章中找到了这种方法。

所描述的方法的要点是

1.  选择素数`q`；
2.  选择一个较大的值`X`（与期望的大小大致相同`p`）；
3.  计算`p = X - (X mod 2q) + 1`（即现在`p = 1 (mod 2q)`）；
4.  检查是否`p`是素数。

# c# - 使用 EF 5 实现项目结构

> ID：13661916
> 
> 赞同：0
> 
> 时间：2012-12-01T17:39:21.337
> 
> 标签：c#, entity-framework, project

我正在尝试按照以下博客中的说明实现项目结构：

[博客](http://www.toplinestrategies.com/dotneters/net/wcf-entity-framework-and-n-tier-solutions-part-2/?lang=en/comment-page-1/#comment-1954)

首先我将解释我的目标：我正在尝试使用 EntityFramework 5 创建以下结构

*   DAL - 包括 EF 5
*   模型层 - 包括从 EF 5 生成的 POCO 类
*   MVC 项目 - 表示层

现在，此博客解释了如何使用 EF 4 进行操作，但在 EF 5 中无法剪切和粘贴 POCO 实体，这是一个不同的项目。

接下来我想创建扩展 POCO 实体的元数据类

我做了以下事情：

*   创建了一个名为（“DAL”）的类项目并从数据库创建了 EF5
*   从 edmx 文件创建 POCO 实体
*   创建了一个名为“ModelLayer”的不同类项目

现在我的问题是我无法将 MyEntities.tt 文件从 DAL 项目移动到“DataModel”项目

接下来我想创建一个扩展 POCO 实体的元数据类

有人成功吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:33:05.723

如果您使用的是 .tt 模板文件，请在模板文件的顶部更改以下行以指向相对于文件结构的 edmx 文件位置

在我的模板文件中，它位于第 5 行（VB.Net）：

```
Const inputFile As String = "..\..\..\SFHDDATA\OP.edmx" 
```

我的 edmx 文件位于此处：

C:!DEV\SFHD\Branches\iGEDIA_2\iGEDIA_2\SFHDDATA

我的另一个带有 tt 文件的项目在这里：

C:!DEV\SFHD\Branches\iGEDIA_2\iGEDIA_2\SFHDModel\AGG\POCO

当您重新编译时，如果您没有指向正确的文件夹，您将收到一条错误消息。

如果您使用的是 c#，请在路径前使用 @

# android - 使用 2 个显示器的通用图像加载器

> ID：13661918
> 
> 赞同：4
> 
> 时间：2012-12-01T17:39:27.060
> 
> 标签：android, universal-image-loader

如何将 FadeInBitmapDisplayer 和 RoundedBitmapDisplayer 添加到我的图像中？

这是我的 DisplayImageOptions

```
options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.appwidget
.cacheInMemory().displayer(new FadeInBitmapDisplayer(1500))
.build(); 
```

是否有可能只使用一次淡入效果？如果它已加载并且我向下滚动我的列表并再次向上滚动它不会第二次 FadeIn？

提前非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T15:03:47.543

> 如何将 FadeInBitmapDisplayer 和 RoundedBitmapDisplayer 添加到我的图像中？

当前版本没有办法。您可以创建自己的显示器（扩展 BitmapDisplayer）并将代码从 FadeInBitmapDisplayer 和 RoundedBitmapDisplayer 复制到您的类中。

> 是否有可能只使用一次淡入效果？

几乎一切皆有可能:) 但这不会那么方便。

您可以在某些地图中保留显示的图像 URL（`Map<String, Boolean>`= [图像 URL<->isDisplayed]）并在`imageLoader.displayImage(...)`调用前检查此地图。如果当前 URL 的图像在地图中（即显示图像），则仅使用 RoundedBitmapDisplayer 选项。如果当前 URL 的图像不在地图中，则使用 FadeInBitmapDisplayer+RoundedBitmapDisplayer 显示器的选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-20T14:27:27.990

> 如何将 FadeInBitmapDisplayer 和 RoundedBitmapDisplayer 添加到我的图像中？

也有这个问题。我使用了 NOSTRA 的好建议，这是我的自定义课程：

```
public class FadeInRoundedBitmapDisplayer extends RoundedBitmapDisplayer {

    int durationMillis;
    String noRoundedCornersTag;

    public FadeInRoundedBitmapDisplayer(int durationMillis, int roundPixels,
            String noRoundedCornersTag) {
        super(roundPixels);
        this.durationMillis = durationMillis;
        this.noRoundedCornersTag = noRoundedCornersTag;
    }

    @Override
    public Bitmap display(Bitmap bitmap, ImageView imageView,
            LoadedFrom loadedFrom) {
        imageView.setImageBitmap((imageView.getTag() != null && imageView
                .getTag().equals(noRoundedCornersTag)) ? bitmap : super
                .display(bitmap, imageView, loadedFrom));

        animate(imageView, durationMillis);

        return bitmap;
    }

    public static void animate(ImageView imageView, int durationMillis) {
        AlphaAnimation fadeImage = new AlphaAnimation(0, 1);
        fadeImage.setDuration(durationMillis);
        fadeImage.setInterpolator(new DecelerateInterpolator());
        imageView.startAnimation(fadeImage);
    }

} 
```

您可以将 a 传递`String noRoundedCornersTag`给构造函数。这使您可以`imageView`在 XML 布局中指定单个 s 标记以跳过圆角半径过程（适用于背景图像等），例如：

```
<ImageView
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:tag="@string/no_rounded_corners_tag" /> 
```

构造函数调用如下所示：

```
new FadeInRoundedBitmapDisplayer(Constants.IMAGE_FADING_TIME,
  getResources().getDimension(R.dimen.image_corner_radius),
  getResources().getString(R.string.no_rounded_corners_tag)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-03T15:26:28.643

我不得不更新@saschoar 解决方案，因为它不适用于当前的通用图像加载器版本（1.9.4）。解决方案非常相似。看一看：

```
public class FadeInRoundedBitmapDisplayer extends RoundedBitmapDisplayer {

    int durationMillis;

    public FadeInRoundedBitmapDisplayer(int durationMillis, int roundPixels) {

        super(roundPixels);
        this.durationMillis = durationMillis;
    }

    @Override
    public void display(Bitmap bitmap, ImageAware imageAware, LoadedFrom loadedFrom) {

        super.display(bitmap, imageAware, loadedFrom);

        animate(imageAware.getWrappedView(), durationMillis);
    }

    public static void animate(View imageView, int durationMillis) {

        AlphaAnimation fadeImage = new AlphaAnimation(0, 1);
        fadeImage.setDuration(durationMillis);
        fadeImage.setInterpolator(new DecelerateInterpolator());
        imageView.startAnimation(fadeImage);
    }
} 
```

您可以使用此解决方案以这种方式定义 DisplayImageOptions：

```
 DisplayImageOptions displayImageOptions = new DisplayImageOptions.Builder()
        .displayer(new FadeInRoundedBitmapDisplayer(3000, 1000))
        .build();

    ImageLoader imageLoader = ImageLoader.getInstance();
    imageLoader.displayImage(imageUrl, imageView, displayImageOptions); 
```

# android - 无法解析从 android 中的服务器检索到的 json 字符串，但可以解析为 android 中定义的字符串

> ID：13661920
> 
> 赞同：0
> 
> 时间：2012-12-01T17:39:40.940
> 
> 标签：android, json

尝试`JSONObject`在 android中创建时出现此错误

`org.json.JSONException: Value {"0" : [{"original" : "car", "translation" : "araba"}]}`类型`java.lang.String`不能转换为`JSONObject`

如果我使用从服务器返回的字符串，我会收到上述错误`HttpClient`。

如果我在上面使用相同的字符串并定义一个静态字符串并解析它就可以了。`HttpClient`使用检索时是否存在一些我必须考虑的解码或编码问题`JSON`？

我`JSON`在 c# 中手动构建字符串作为测试并返回它

```
return "{\"0\" : [{\"original\" : \"car\", \"translation\" : \"araba\"}]}"; 
```

这是代码

```
 HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        String s = "http://10.0.2.2:63200/OnlineArabic/api/datasen";
        HttpGet httpGet = new HttpGet(s);

    HttpResponse response = httpClient.execute(httpGet, localContext);
    HttpEntity entity = response.getEntity();
    InputStream instream = entity.getContent();

     BufferedReader reader = new BufferedReader(new InputStreamReaderinstream , "UTF-8"),8 );
         StringBuilder sb = new StringBuilder();

         String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

        String result= convertStreamToString(instream);             
    String jsonString = sb.toString();
    JSONObject jObject = new JSONObject(jsonString); 
```

任何的想法？

这是日志：

```
12-01 13:48:08.156: W/System.err(22947): org.json.JSONException: Value {&quot;0&quot; : [{&quot;original&quot; : &quot;car&quot;, &quot;translation&quot; : &quot;araba&quot;}]} of type java.lang.String cannot be converted to JSONObject
12-01 13:48:08.160: W/System.err(22947):    at org.json.JSON.typeMismatch(JSON.java:107)
12-01 13:48:08.160: W/System.err(22947):    at org.json.JSONObject.<init>(JSONObject.java:158)
12-01 13:48:08.160: W/System.err(22947):    at org.json.JSONObject.<init>(JSONObject.java:171)
12-01 13:48:08.170: W/System.err(22947):    at com.ls.audioplayer.MainActivity.call(MainActivity.java:137)
12-01 13:48:08.170: W/System.err(22947):    at com.ls.audioplayer.MainActivity$1.onClick(MainActivity.java:294)
12-01 13:48:08.180: W/System.err(22947):    at android.view.View.performClick(View.java:2408)
12-01 13:48:08.180: W/System.err(22947):    at android.view.View$PerformClick.run(View.java:8816)
12-01 13:48:08.190: W/System.err(22947):    at android.os.Handler.handleCallback(Handler.java:587)
12-01 13:48:08.190: W/System.err(22947):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-01 13:48:08.221: W/System.err(22947):    at android.os.Looper.loop(Looper.java:123)
12-01 13:48:08.221: W/System.err(22947):    at android.app.ActivityThread.main(ActivityThread.java:4627)
12-01 13:48:08.221: W/System.err(22947):    at java.lang.reflect.Method.invokeNative(Native Method)
12-01 13:48:08.231: W/System.err(22947):    at java.lang.reflect.Method.invoke(Method.java:521)
12-01 13:48:08.231: W/System.err(22947):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-01 13:48:08.240: W/System.err(22947):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-01 13:48:08.240: W/System.err(22947):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:30:34.980

Ensure that the server is sending UTF-8 encoded data. Also see that there are no new line characters in the beginning/end.

Eclipse's logcat tool will help you find these special characters. Logcat on command line sometimes doesnt render the special characters.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:05:35.097

My only though is that you are somehow destroying the string as it comes in with your httpget code, I would recommend you use a library for http requests such as [EasyHttpClient](https://github.com/uscheller/EasyHttpClient/blob/master/src/EasyHttpClient.java) , just create that class in your project and then instead of all that code you have do

```
EasyHttpClient client = new EasyHttpClient();
String jsonString = client.get("http://10.0.2.2:63200/OnlineArabic/api/datasen"); 
```

Then see if you can put that in an object. I cant test that code unfortunately I only have android 4.2 installed here.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:58:06.303

In your code,

BufferedReader reader = new BufferedReader(new InputStreamReaderinstream , "UTF-8"),8 );

change this to

BufferedReader reader = new BufferedReader(new InputStreamReader(instream , "UTF-8"),8 );

# c++ - 处理可能相关顶点的创建/销毁时的 VBO/VAO 内存管理实践

> ID：13661921
> 
> 赞同：2
> 
> 时间：2012-12-01T17:39:48.807
> 
> 标签：c++, algorithm, opengl, data-structures, opengl-3

我搞砸了一个用 C++/OpenGL 创建 2D 墙的简单概念。每面墙由 4 个顶点描述，水平或垂直延伸，并且还具有颜色。如果它们发生碰撞，墙壁就会相互连接。由墙壁形成的周边由简单的矩形填充。

![原来的](../Images/883593cf89e34c3e022757bf0144a6f9.png)

我的想法是将许多墙的顶点数据存储在一个 VBO 中。或者每个属性有多个，然后放在 VAO 中？在一个 VBO 中交错并通过 VAO 访问？无论如何，一个物体中有许多墙。如果我存储的任何空间都用完了，请制作另一个 VBO（或我正在使用的任何东西）来存储另一组墙。我还希望有相交的墙，例如以直角，共享顶点以节省空间。

但是，墙是可变的，因此可以随时添加、移动或删除顶点。这将需要跟踪 VBO 中的空闲块，然后根据需要将墙数据分配给它们。这也意味着如果我有多个 VBO，共享顶点的 2 个墙必须在同一个 VBO 中，这可能会引起各种头痛。但同时，我不想为每一面墙都做一个VBO，这最多不过是一个非常简单的4个顶点的东西。

原始图像发生的一些更改示例： ![改变](../Images/720cd3e34e7e410f4f51c87e7d0ceaa2.png)

这种情况通常如何处理？是否需要滚动我自己的内存分配方案才能与 VBO 一起使用，或者是否有一个不需要太多工作的适当快速的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:18:43.207

为什么你认为 VBO 可能会用完空间？我的意思是，对于大多数 GPU 而言，VBO 的最大大小约为 16-32-64Mb，这已经很多了！（也在[这里](https://stackoverflow.com/questions/3218097/opengl-vbo-technicalities-in-c)检查）

如果您可以将所有数据放在一个 VBO 中，那么问题就简单多了。我只是在需要更改所有数据时重新缓冲它们（我相信这不会经常发生，除非您想在每一帧中添加/移除一堵墙）。

如果这在您的情况下不可接受，我建议您从开源代码中查看一些流行的实现，例如这里有 osg 的 GLBufferObject [。](http://www.openscenegraph.org/projects/osg/browser/OpenSceneGraph/trunk/src/osg/BufferObject.cpp?rev=10600)

看一下`GLBufferObject::compileBuffer()`功能；在您的情况下，每个都`osg::BufferEntry`可以是一组连接的墙。要渲染场景，您必须查询此类以获取每个数据的偏移量。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T18:04:40.930

我想说，每当您的数据更改（包括在初始创建时）为所有顶点分配一个新缓冲区（重用 VBO 名称，但孤立旧的并分配新的存储）并将顶点从您自己的数据结构复制到 VBO .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T17:31:59.800

方法很大程度上取决于您的要求。

*   您的目标平台（PC、手机）的性能如何？
*   你的缓冲区会有多大（~1Mb、~10mb、~100Mb）？
*   您将多久更新一次数据（每帧或偶尔）？

我不建议您实现内存管理器，除非确实有必要。即您的缓冲区大于几兆字节并且您经常更新。对于小缓冲区，您可以使用合适的数据结构在 CPU 上保存和处理所有数据，并在渲染之前构建缓冲区并将所有数据流式传输到 GPU。即使用 GL_STREAM_DRAW 创建缓冲区并在每一帧完全更新它。

如果不是这样，那么实现一种内存管理器。为避免移动数据，请使用退化三角形（即，当您移除墙壁时，移动墙壁顶点，使其组成将由光栅化器剔除的三角形）。保留一组自由顶点（构成退化三角形的顶点）的列表，并使用它们来构建新的墙。添加一堵墙应该不是问题。您可以使用您想要的任何缓冲区，但这几乎没有必要（最近我实现了一个使用 ~300Mb VBO 的应用程序，它可以无缝地运行在所有现代硬件上）。

# visual-studio-2010 - 视觉工作室中缺少字符串

> ID：13661923
> 
> 赞同：1
> 
> 时间：2012-12-01T17:39:56.607
> 
> 标签：visual-studio-2010

我的 IDE（Visual Studio 2010 Ultimate）有一个错误，我在谷歌上找不到任何东西。

UI 中到处都缺少字符串，没有明显的原因。

昨天它工作正常，但今天早上用户界面一团糟。我修复了 VS，我卸载/重新安装了 Visual Studio，我删除了注册表项以尝试重置它们，但没有任何效果。

[http://i1244.photobucket.com/albums/gg580/daves456/vsbug.png](http://i1244.photobucket.com/albums/gg580/daves456/vsbug.png)

# hover - 将鼠标悬停在容器 div 上单独突出显示嵌套的 div

> ID：13661924
> 
> 赞同：6
> 
> 时间：2012-12-01T17:39:56.963
> 
> 标签：hover

我在类`.one`( `.one :hover`) 上放置了一个“悬停”功能以将其更改`background-color`为灰色。每当我将鼠标悬停在容器div上时，我都希望它突出显示两个`div`s ( )。`.two, .three``.one`

但是，它所做的是将鼠标分别悬停在两个嵌套`div`的 s ( `.two`, `.three`) 上。有人可以解释为什么会这样，我必须做些什么来突出整个 div`.one`创建一个单一的纯灰色 div？

下面是我使用的 CSS。

```
.one {
  width: 200px;
  display: inline-block;
}

.two {
  background-color: rgba(0, 51, 102, 1);
  width: 50px;
  height: 100px;
  float: left;
}

.three {
  background-color: rgba(0, 204, 204, 1);
  width: 150px;
  height: 100px;
  float: right;
}

.one :hover {
  background-color: rgba(153, 153, 153, 1);
}
```

```
<div class="one">
  <div class="two">
  </div>
  <div class="three">
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T18:47:13.263

我认为这个 CSS 会帮助你：

```
.one:hover .two, .one:hover .three {
background-color: rgba(153,153,153,1);} 
```

# android - 我的应用程序总是显示“Hello World”

> ID：13661925
> 
> 赞同：1
> 
> 时间：2012-12-01T17:40:01.387
> 
> 标签：android, andengine

嗨，我是 Android 开发的新手。

我想使用 AndEngine 创建一个简单的游戏。所以我想尝试一个小样本。但是当我将 apk 文件部署到我的 nexus7 时。但是当我运行应用程序时，它总是在屏幕中央显示“Hello World”，背景为白色。但它应该显示具有特定背景颜色的图像。

这是我的代码：

```
public class MainActivity extends SimpleBaseGameActivity {
private static final float CAMERA_WIDTH = 720;
private static final float CAMERA_HEIGHT = 480;
private Camera mCamera;
private BitmapTextureAtlas mBitmapTextureAtlas;
private Engine mEngine;
private TextureRegion mFaceTextureRegion;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public EngineOptions onCreateEngineOptions() {

    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

    return new EngineOptions(true,
            ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(
                    CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
}

@Override
protected void onCreateResources() {

    this.mBitmapTextureAtlas = new BitmapTextureAtlas(
            mEngine.getTextureManager(), 32, 32,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.mBitmapTextureAtlas, this,
                    "face_box.png", 0, 0);

    getTextureManager().loadTexture(this.mBitmapTextureAtlas);
}

@Override
protected Scene onCreateScene() {

    this.mEngine.registerUpdateHandler(new FPSLogger());
    final Scene scene = new Scene();
    scene.setBackground(new Background(new Color(0, 255, 128)));
    final int centerX = (int) ((CAMERA_WIDTH - this.mFaceTextureRegion
            .getWidth()) / 2);
    final int centerY = (int) ((CAMERA_HEIGHT - this.mFaceTextureRegion
            .getHeight()) / 2);
    final Sprite face = new Sprite(centerX, centerY,
            this.mFaceTextureRegion, new VertexBufferObjectManager());
    scene.attachChild(face);

    return scene;
} 
```

}

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:46:10.140

由于您使用的是 AndEngine SimpleBaseGameActivity，因此您不需要这个

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

“Hello world”出现是因为您正在设置内容视图，删除对 onCreate 的覆盖，它应该可以工作。

# c++ - c ++需要字符串的唯一ID，但无论顺序如何，始终相同

> ID：13661928
> 
> 赞同：1
> 
> 时间：2012-12-01T17:40:16.480
> 
> 标签：c++, ascii, unique, document

我需要一个唯一的 ID 用于读入 c++ 程序的文档，该程序将携带到数据库中。无论它所绑定的文档是首先通过程序运行、单独运行还是在一堆其他文档的中间运行，ID 都需要相同。这样我就可以尊重数据库中文档的覆盖。

我考虑使用文档名称的 ASCII 值，例如

员工规格页面.doc 358

但它具有相同的价值

回答警告.doc 358

这意味着当我在程序中运行第二个文档时，它会覆盖第一个文档的存在。

ID 必须是一个数字并且必须是唯一的，但它必须始终可以重新生成，而不必交叉引用数据库本身（因为该程序与数据库导入程序分开运行）

希望有人有一些想法，因为我很难过。

**编辑：**我尝试使用 MD5 转换“Employee Spec Page.doc”和“Answer Warnings.doc”并得到以下字符表示：

回答警告：2dcb2503c48f5472bfdbafe28d565a9d
员工规格页面：a9be4c1428c11b406072c0bd3dab2dee

但是，当我将 char* 转换为 unsigned int

```
char* docID = md5.digestString(pDocument->m_csDocumentName.GetBuffer());
pDocument->m_csDocID.Format("%i",(unsigned int)docID); 
```

我得到两者都是：

回答警告：1634456
员工规格页面：1634456

我从这里得到了 md5 类：http: [//bobobobo.wordpress.com/2010/10/17/md5-c-implementation/](http://bobobobo.wordpress.com/2010/10/17/md5-c-implementation/)

我究竟做错了什么？我需要它是一个整数，否则我将无法将 ID 存储在数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:52:24.777

您需要的是一个[散列](http://en.wikipedia.org/wiki/Hash_function)函数，该函数生成一个足够大的数字以避免冲突。[MD5](http://en.wikipedia.org/wiki/MD5)（如上面提到的 piokuc）应该没问题

您可以通过简单地截断 MD5 结果来生成更短的密钥。但请注意，您会增加发生碰撞的机会。128 位有超过 10^38 个不同的密钥；64位有超过10^19；32 位有超过 10^9 (4.294.967.296)。所以 32 位几乎有机会在两个特定文档之间发生冲突。对于 10.000 个文档，您有 1% 的机会至少发生一次冲突。接受某个密钥长度取决于您的要求。您当然可以实现碰撞检测和碰撞解决。

如果您的“数据库”仅允许使用短键，则您必须实施冲突解决方案。有关如何做到这一点的想法，请参阅[Hash_table Collision_resolution](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution)

来自[维基百科](http://en.wikipedia.org/wiki/Birthday_attack)：'10^-18 到 10^-15 是典型硬盘的不可纠正误码率。理论上，128 位的 MD5 哈希或 UUID 应该保持在该范围内，直到大约 8200 亿个文档'

* * *

到您的具体库：

如果你查看 md5 头文件，有

```
public:
    // an MD5 digest is a 16-byte number (32 hex digits)
    BYTE digestRaw[ 16 ] ; 
```

因此您可以随时检索二进制摘要

```
MD5 md5;
char* docID = md5.digestString(pDocument->m_csDocumentName.GetBuffer());
unsigned int hash_ui = *(unsigned int *)digestRaw; 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T17:45:25.413

您可以使用 md5 算法生成 id，您会很容易找到一个免费的实现。

# ssh - Erlang SSH 守护进程没有主机密钥 alg

> ID：13661929
> 
> 赞同：2
> 
> 时间：2012-12-01T17:40:21.770
> 
> 标签：ssh, erlang

我正在尝试运行 otp 中为 ssh 守护程序提供的以下示例： [https ://raw.github.com/erlang/otp/maint/lib/ssh/examples/ssh_sample_cli.erl](https://raw.github.com/erlang/otp/maint/lib/ssh/examples/ssh_sample_cli.erl)

```
1> c(ssh_sample_cli).
ssh_sample_cli.erl:146: Warning: this expression will fail with a 'badarith' exception
{ok,ssh_sample_cli}
2> ssh_sample_cli:listen(1111).
{ok,<0.51.0>} 
```

从我的外壳我尝试连接，但我得到以下信息：

```
$ ssh localhost -p 1111 -oLoglevel=DEBUG
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to localhost [::1] port 1111.
debug1: Connection established.
debug1: identity file /Users/eric/.ssh/id_rsa type 1
debug1: identity file /Users/eric/.ssh/id_rsa-cert type -1
debug1: identity file /Users/eric/.ssh/id_dsa type -1
debug1: identity file /Users/eric/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version Erlang
debug1: no match: Erlang
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-sha1 none
debug1: kex: client->server aes128-cbc hmac-sha1 none
no hostkey alg
$ 
```

为什么会这样？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:02:32.613

我的主机密钥必须可以从 Erlang 访问。解决方案是将我的 ssh 主机密钥复制到文件夹更改权限中，以便 Erlang 可以访问它并使用该`{system_dir, "/<folder>/ssh/"}`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:17:50.427

尝试使用：

% ssh -o 'HostKeyAlgorithms ssh-rsa,ssh-dss' ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T19:12:03.700

这主要是为了我将来的参考，但是......我不小心用密码设置了我的主机密钥。[不建议这样做。](https://support.ssh.com/manuals/server-zos-admin/55/Defining_Server_Host_Key.html)

相反，它们应该在没有密码的情况下设置。

# database - 将日期和时间 VB 插入数据库表

> ID：13661933
> 
> 赞同：0
> 
> 时间：2012-12-01T17:40:44.063
> 
> 标签：database, vb.net, date, time

我正在使用 DateTimePicker 来选择日期，以及一个有时间的 TextBox。

我正在尝试将两个值都插入到表中，但它不起作用

```
INSERT INTO dt (date) VALUES('" & DateTimePicker1.Text  & TextBox1.Text & "'); 
```

该`date`列是`datetime`类型。

代码显示此错误：从字符串转换日期时间时转换失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:05:05.390

由于其表示形式的文化差异，您真的不想将日期时间作为字符串传递给您的数据库。相反，您可以使用参数传递日期时间类型。对于 SQL Server，你需要一些类似的东西

```
Dim dt As DateTime
dt = DateTimePicker1.Value.Date ' use only the date portion '
Dim tim As DateTime
If DateTime.TryParse(TextBox1.Text, tim) Then
    dt = dt + tim.TimeOfDay ' use only the time portion '
Else
    MsgBox("Could not understand the value in the time box. Using midnight.")
End If

Dim sql As String = "INSERT INTO dt (date) VALUES (@DateTime)"

Dim sqlCmd As New SqlCommand(sql, sqlConn)
sqlCmd.Parameters.Add(New SqlParameter With {.ParameterName = "@DateTime", .SqlDbType = SqlDbType.DateTime, .Value = dt})
'TODO: ExecuteNonQuery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:54:56.373

您的日期必须经过格式化，才能将某种文化正确插入数据库。或者只使用文化中性字符串，例如`dd-MMM-yyyy`.

您的第一步是创建一个 DateTime`DateTimePicker1.Text`并且`TextBox1.Text`- 您可以使用[ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)。然后将您的 DateTime 格式化为`.ToString("G")`- 查看 MSDN 上的这篇文章以获取更多标准格式：[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

[这里](https://stackoverflow.com/a/13358665/897326)描述了类似的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:46:29.563

您需要在两个文本框的文本之间留一个空格：

```
insert into dt (date) values('" & DateTimePicker1.Text & " " & TextBox1.Text & "') 
```

# python - Vim：如何在 Python 中显示所有补全而不是扩展为“self”并使用全补全？

> ID：13661935
> 
> 赞同：3
> 
> 时间：2012-12-01T17:40:49.273
> 
> 标签：python, vim, python-3.x, omnicomplete

`self`当函数/类/等没有开始字符时，我真的不需要扩展的“特性” 。尚未指定，我宁愿让它显示该上下文中所有可用功能的列表。

有没有办法以某种方式启用它？

恐怕这是在 python3complete 中硬编码的`(/usr/share/vim/vim73/autoload/python3complete.vim)`，在这种情况下：该脚本是否有任何更改版本？
（这个是针对 的`python3`，但是应该是一样的`python2.x`，没测试过。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:03:02.717

你在使用 snipMate 插件吗？如果你是，那么可能有一个带有触发器“.”的片段，它将扩展为“self.”。

在名为 python.snippets 的文件中看起来像这样：

```
snippet .
       self. 
```

删除这些行。

# visual-studio-2012 - 跨度标记 Visual Studio 大纲

> ID：13661937
> 
> 赞同：0
> 
> 时间：2012-12-01T17:41:00.753
> 
> 标签：visual-studio-2012, html, collapse, outlining

是否有在 Visual Studio 2012 中为 HTML 跨度标签添加大纲？

我可以折叠 Div 标签但不能折叠标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:57:23.130

答案似乎是

*   在编辑器中单击鼠标右键
*   格式化和验证
*   标记特定选项按钮
*   客户端 HTML 标签
*   跨度
*   为标签启用大纲

# flash - Adobe Flash 媒体服务器聊天

> ID：13661941
> 
> 赞同：2
> 
> 时间：2012-12-01T17:41:10.990
> 
> 标签：flash, chat, flash-media-server, videochat

我正在使用 Flash Media Development Server 4.5 创建一个小型聊天应用程序。我已经在 Flash 中创建了我所有的用户界面组件。

要拥有一个聊天应用程序，用户需要相互之间来回发送消息。Flash 播放器如何连接到其他 Flash 播放器？例如，如果您有一组 20 名成员。您如何将特定消息发送给客户而不是群组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:43:27.073

聊天应用程序的示例是 www.red5chat.com 。免费使用。并检查代码 flash 和 Java。向服务器中的客户端代码发送私人消息是

```
public void send_private(String fromPseudo, String DestinationID,String msg) {
        //IConnection current = Red5.getConnectionLocal();
        Iterator<IConnection> it = scope.getConnections();
        log.debug("send_private to "+DestinationID+" "+msg);
        //String uid = scope.getClient().getId();
        while (it.hasNext()) {
        IConnection conn = it.next();
        String id=conn.getClient().getId();
        log.debug("id="+id+ " senTO="+DestinationID);
        //if (sendTo.equals(id)) log.info("PAREIL"); else log.info("differents");

        if (!(DestinationID.equals(id))) continue;
        log.info("receive_private "+DestinationID+" "+msg);
            if (conn instanceof IServiceCapableConnection) {
                ((IServiceCapableConnection) conn).invoke("receivePrivateMsg", new Object[]{fromPseudo, msg});
                log.info("received_private "+DestinationID+" "+msg);
            }   
        }
    } 
```

# actionscript-3 - 从内联 Callout 调用父视图中的函数（作为确认警报）

> ID：13661950
> 
> 赞同：0
> 
> 时间：2012-12-01T17:42:24.803
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex4.6, flex-mobile

我正在尝试向我的联网 flex 移动应用程序添加[一个内联标注](http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb706aafb086131b54b6ec7-8000.html#WSf32eaeda604069473c9c12bb131ddea1166-8000)，该应用程序会询问用户 - 如果她真的确定，她想离开聊天室。

但是我得到编译器错误 - 因为下面的（非静态）函数`fetch(MyEvent.LEAVE)`属于父视图。

有没有办法调用它（可能通过`outerDocument`,`parent`或`owner`类似的东西）？

```
<fx:Declarations>
    <fx:Component className="ConfirmLeave">
        <s:Callout 
            horizontalPosition="middle"
            verticalPosition="middle">
            <s:VGroup>
                <s:Label text="Are you sure?" />
                <s:HGroup>
                    <s:Button id="_leaveYes"
                              label="Yes"
                              click="fetch(MyEvent.LEAVE)" />
                    <s:Button id="_leaveNo"
                              label="No"
                              click="close()" />
                </s:HGroup>
            </s:VGroup>
        </s:Callout>        
    </fx:Component>
</fx:Declarations> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:57:50.823

[通过PopUpEvent.CLOSE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/PopUpEvent.html)事件的侦听器自己解决了这个问题：

```
private var _confirmLeave:ConfirmLeave = new ConfirmLeave();

_confirmLeave.addEventListener(PopUpEvent.CLOSE, handleLeaveCallback);

_confirmLeave.open(this, true);

        private function handleLeaveCallback(event:PopUpEvent):void {
            if (!event.commit)
                return;

            fetch(MyEvent.LEAVE);
        } 
```

# python - 高斯算法显示出意外的行为

> ID：13661953
> 
> 赞同：1
> 
> 时间：2012-12-01T17:42:42.577
> 
> 标签：python, algorithm, python-2.7

我已经实现了一个没有旋转的高斯算法。

```
import matplotlib.pyplot as plt
import numpy as np
import scipy as sp

def gauss_solve(A,b):
    """
    args: coefficient matrix A of dim(nxn) and vector b of dim(n) 
    of a system of linear equations with n unknowns.
    note: no zeroes on the main diagonal of A allowed!

    returns: vector x of dim(n) which solves the SLE
    """
    while np.ndim(A) != 2 or A.shape[0] != A.shape[1]:
        A = input(["The matrix you entered is not square, specify new input matrix A: "])
#    print "A ok."
    while np.ndim(b) != 1 or A.shape[1] != b.shape[0]:
        b = input(["The dimension of the constant vector b is incorrect, please specify new input vector b"])
#    print "b ok."
    if np.linalg.det(A) == 0:
        return "This linear system doesn't have a single unique solution."
#    print "System does have solution: "
    n = len(b)
    for i in xrange(n): # create triangular matrix
        if A[i,i] == 0:
            return "This implementation doesn't allow A to have zero entries on the main diagonal."
        A[i] = A[i]/float(A[i,i])
        b[i] = b[i]/float(A[i,i])
        for l in xrange(i+1,n):
            A[l] -= A[i]*A[l,i]
            b[l] -= b[i]*A[l,i]
    r = np.zeros(n) # result
    for i in xrange(n):
        r[-(i+1)] = b[-(i+1)] - np.dot(r,A[-(i+1)])
    return r

def test_gauss():
    m = 10
    e = 0.1
    A = sp.rand(m,m)
#    A,b = np.array([[e,1.],[1.,1.]]),np.array([1.,e])
    b = sp.rand(m)
    print gauss_solve(A,b)
    print "Build-in function says: \n", np.linalg.solve(A,b)

test_gauss() 
```

测试函数可以为`A`和生成随机条目`b`。我认为一切都很好，但我这里有一个矩阵，会导致意想不到的结果：

```
A = [[e 1] [1 1]]
b = [1 e] 
```

因为`e != 1`解析解是

```
x = [-1 e+1] 
```

但是我尝试了一些值，但我`e`没有得到分析解决方案。甚至内置功能也`solve(A,b)`失败了。例如的第一个条目`x`总是`0`（尽管它应该是`-1`，完全独立于`e`）。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:00:58.527

`A`您对和的并行更新*不*`b`正确，因为您正在`b`使用. 您需要替换以下行：*`A`*

 *```
A[i] = A[i]/float(A[i,i])
b[i] = b[i]/float(A[i,i]) 
```

有类似的东西：

```
divisor = A[i,i]
A[i] = A[i]/float(divisor)
b[i] = b[i]/float(divisor) 
```

同样，这些行：

```
A[l] -= A[i]*A[l,i]
b[l] -= b[i]*A[l,i] 
```

和

```
multiplier = A[l,i]
A[l] -= A[i]*multiplier
b[l] -= b[i]*multiplier 
```

在您的原始代码中，`b`什么都不做的行（忽略浮点精度问题）：代码的第一部分除以`b[i]`，而`1.0`第二部分从.`0.0``b[i]``b[l]`*

# c - 同时使用纹理和照明

> ID：13661957
> 
> 赞同：0
> 
> 时间：2012-12-01T17:42:57.990
> 
> 标签：c, opengl, textures, glut, lighting

我正在尝试在实心茶壶上映射一维纹理，它工作正常我会添加灯光。
当我调用 glMaterialfv 时，材质的颜色会覆盖纹理的颜色。所以在这个简单的例子中，我只是将茶壶涂成黄色。但如果我也使用 glMaterialfv，那么茶壶将采用我在 glMaterialfv 中指定的颜色。
我会知道如何将材料的颜色设置为在所有点上都具有与纹理相同的颜色。这是我尝试过的，认为它正在工作：

```
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>
#import <stdlib.h>
#import <math.h>

void makeRound(GLfloat* angle);

GLuint width=640, height=480;
GLfloat angle=0.0;
GLuint texture;
GLfloat (*pixels)[3];
float coeff[]= {1, 0 ,0 ,0};

inline void makeRound(GLfloat* angle)
{
    int intValue= *angle;
    GLfloat decimal= *angle - floor(*angle);
    intValue%=360;
    *angle= intValue+decimal;
}

void init()
{

    glEnable(GL_DEPTH_TEST);
    glViewport(-500, -500, 1000, 1000);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, width/(float)height, 1, 1000);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);

    // Lights

    glShadeModel(GL_FLAT);

    glMaterialfv(GL_FRONT, GL_AMBIENT, (const GLfloat[]) {1,0,0} );
    glMaterialfv(GL_FRONT, GL_DIFFUSE, (const GLfloat[]) {1,0.25,0} );
    glMaterialfv(GL_FRONT, GL_SPECULAR, (const GLfloat[]) {1,0.75,0} );
    glMaterialfv(GL_FRONT, GL_SHININESS, (const GLfloat[]) {1,1,0} );

    glLightfv(GL_LIGHT0, GL_AMBIENT, (const GLfloat[]) {0,0,0} );
    glLightfv(GL_LIGHT0, GL_DIFFUSE, (const GLfloat[]) {1,1,0} );
    glLightfv(GL_LIGHT0, GL_SPECULAR, (const GLfloat[]) {0.5,0.5,0} );

    glEnable(GL_LIGHT0);
    glEnable(GL_LIGHTING);

    // Texture

    pixels= calloc(256,sizeof(GLfloat[3]));
    for(GLuint i=0; i<256; i++)
    {
        pixels[i][0]= pixels[i][1]= 1.0;
    }

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_1D, texture);
    glTexParameteri(GL_TEXTURE_1D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_1D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_1D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexImage1D(GL_TEXTURE_1D, 0, GL_RGB, 256, 0, GL_RGB, GL_FLOAT, pixels);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexGeni(GL_S, GL_TEXTURE_GEN_MODE, GL_OBJECT_LINEAR);
    glTexGenfv(GL_S, GL_OBJECT_PLANE, coeff);
    glEnable(GL_TEXTURE_GEN_S);
    glEnable(GL_TEXTURE_1D);
    glEnable(GL_CULL_FACE);
    glEnable(GL_AUTO_NORMAL);
    glEnable(GL_NORMALIZE);
    glEnable(GL_CW);
    glCullFace(GL_BACK);
}

void display()
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glColor3ub(255, 255, 255);
    glPushMatrix();
    glRotatef(angle, 0, 1, 0);
    glBindTexture(GL_TEXTURE_1D, texture);
    glutSolidTeapot(10);
    glPopMatrix();

    glFlush();
}

void keyboard(unsigned char key, int x, int y)
{
    if(key=='+')
    {
        angle+=5.0;
    }
    else if(key=='-')
    {
        angle-=5.0;
    }
    else
    {
        return;
    }
    makeRound(&angle);
    glutPostRedisplay();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH | GLUT_SINGLE);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(width, height);
    glutCreateWindow(argv[0]);
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    init();
    glutMainLoop();
    return 0;
} 
```

但是茶壶不是黄色的，如果我取消所有初始化灯光和材质的行，茶壶是黄色的。
我想做类似的事情：

```
glMaterialfv(GL_FRONT, GL_AMBIENT, color_of_the_texture_at_every_pixel ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:03:15.217

材质的颜色乘以纹理的颜色。如果您希望所有原始纹理颜色都通过，那么您需要使材质为白色。

# node.js - 无法为 POST API 创建程序

> ID：13661962
> 
> 赞同：0
> 
> 时间：2012-12-01T17:43:28.703
> 
> 标签：node.js

**尝试对 POST API 执行测试时发生以下错误**

*events.js:71 抛出参数 [1]; // 未处理的“错误事件”错误：在 Object.afterConnect [as oncomplete] (net.js:760:19) 的 errnoException (net.js:769:11) 处连接 ECONNREFUSED*

**代码如下：**

```
var http = require('http');
assert = require('assert')

var opts = {
host:'localhost',
port:8000,
path:'/send',
method:'POST',
headers:{'content-type':'application/x-www-form-urlencoded'}
}

var req = http.request(opts,function(res) {
res.setEncoding('utf8')

var data = ""
res.on('data', function(d) {
data += d
})

res.on('end',function() {
assert.strictEqual(data, '{"status":"ok","message":"Tweet recieved"}')
})
})

req.write('tweet=test')
req.end() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:46:35.037

你需要创建一个服务器（tweet.js）

```
var express = require('express');
var app = express.createServer();
app.listen(8000);
var tweets = [];
app.get('/', function(req, res) {
  res.send('Welcome to Node Twitter');
})
app.post('/send', express.bodyParser(), function(req, res) {
  if (req.body && req.body.tweet) {
    tweets.push(req.body.tweet);
    res.send({status:"ok", message:"Tweet received"});
  } else {
    //no tweet?
    res.send({status:"nok", message:"No tweet received"});
  }
});
app.get('/tweets', function(req,res) {
  res.send(tweets);
}); 
```

并使用“node tweet.js”运行它

# model-view-controller - 尽管用户打开页面，如何通过控制器强制执行每个请求

> ID：13661964
> 
> 赞同：0
> 
> 时间：2012-12-01T17:43:43.790
> 
> 标签：model-view-controller, jsp, servlets

在 MCV 2 中，如果用户直接进入页面（键入链接），则不会使用控制器页面。那么如何执行日志记录和安全性呢？

如何强制每个直接页面访问首先通过控制器页面？

我确实需要用户直接访问网页，但希望它们通过控制器进行路由。

过滤器和将 JSP 放入 WEB-INF 将不允许这样做。和过滤器也不允许谷歌搜索引擎？

我确实希望对要访问的每个页面进行计算/记录，同时希望用户直接进入一个页面，并且不需要对搜索引擎大惊小怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:49:21.007

您可以随时添加过滤器来捕获每个请求。

这是 Apache Shiro 示例：

请注意，url-pattern 匹配所有内容

```
<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:57:44.703

将所有 jsp 文件放在 WEB-INF 文件夹中...然后用户无法直接访问该 jsp 路径...其安全流程...在每个 jsp 路径中，您应该添加 WEB-INF 前缀。您的路径将是 WEB-INF/home.jsp

# vba - 使用 Excel VBA 代码的条件格式

> ID：13661965
> 
> 赞同：15
> 
> 时间：2012-12-01T17:44:03.900
> 
> 标签：vba, excel, conditional-formatting

我有 Range 对象调用`DistinationRange`，其中包含对范围的引用`B3:H63`

我想动态地使用 Excel VBA 代码应用以下两个条件格式规则。（因为范围不会一直相同）

> 1.  如果单元格列 D 为空白，则不应应用任何格式（需要使用 Stop If True there）
> 2.  如果 E 列的单元格中的值小于 F 列的单元格中的值，则该整行应具有绿色背景。

我尝试了很多使用录音，但录音不正确。

请帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-01T22:52:34.317

这将为您的简单案例提供答案，但是您能否扩展您将如何知道需要比较哪些列（在这种情况下为 B 和 C）以及初始范围（`A1:D5`在这种情况下）是什么？然后我可以尝试提供更完整的答案。

```
Sub setCondFormat()
    Range("B3").Select
    With Range("B3:H63")
        .FormatConditions.Add Type:=xlExpression, Formula1:= _
          "=IF($D3="""",FALSE,IF($F3>=$E3,TRUE,FALSE))"
        With .FormatConditions(.FormatConditions.Count)
            .SetFirstPriority
            With .Interior
                .PatternColorIndex = xlAutomatic
                .Color = 5287936
                .TintAndShade = 0
            End With
        End With
    End With
End Sub 
```

注意：这是在 Excel 2010 中测试的。

编辑：根据评论更新代码。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-08-06T13:46:43.647

我想我刚刚发现了一种使用 VBA 以预期方式应用重叠条件的方法。经过数小时尝试不同的方法后，我发现在创建每一个方法之后，改变条件格式规则的“适用于”范围是有效的！

这是我的工作示例：

```
Sub ResetFormatting()
' ----------------------------------------------------------------------------------------
' Written by..: Julius Getz Mørk
' Purpose.....: If conditional formatting ranges are broken it might cause a huge increase
'               in duplicated formatting rules that in turn will significantly slow down
'               the spreadsheet.
'               This macro is designed to reset all formatting rules to default.
' ---------------------------------------------------------------------------------------- 

On Error GoTo ErrHandler

' Make sure we are positioned in the correct sheet
WS_PROMO.Select

' Disable Events
Application.EnableEvents = False

' Delete all conditional formatting rules in sheet
Cells.FormatConditions.Delete

' CREATE ALL THE CONDITIONAL FORMATTING RULES:

' (1) Make negative values red
With Cells(1, 1).FormatConditions.add(xlCellValue, xlLess, "=0")
    .Font.Color = -16776961
    .StopIfTrue = False
End With

' (2) Highlight defined good margin as green values
With Cells(1, 1).FormatConditions.add(xlCellValue, xlGreater, "=CP_HIGH_MARGIN_DEFINITION")
    .Font.Color = -16744448
    .StopIfTrue = False
End With

' (3) Make article strategy "D" red
With Cells(1, 1).FormatConditions.add(xlCellValue, xlEqual, "=""D""")
    .Font.Bold = True
    .Font.Color = -16776961
    .StopIfTrue = False
End With

' (4) Make article strategy "A" blue
With Cells(1, 1).FormatConditions.add(xlCellValue, xlEqual, "=""A""")
    .Font.Bold = True
    .Font.Color = -10092544
    .StopIfTrue = False
End With

' (5) Make article strategy "W" green
With Cells(1, 1).FormatConditions.add(xlCellValue, xlEqual, "=""W""")
    .Font.Bold = True
    .Font.Color = -16744448
    .StopIfTrue = False
End With

' (6) Show special cost in bold green font
With Cells(1, 1).FormatConditions.add(xlCellValue, xlNotEqual, "=0")
    .Font.Bold = True
    .Font.Color = -16744448
    .StopIfTrue = False
End With

' (7) Highlight duplicate heading names. There can be none.
With Cells(1, 1).FormatConditions.AddUniqueValues
    .DupeUnique = xlDuplicate
    .Font.Color = -16383844
    .Interior.Color = 13551615
    .StopIfTrue = False
End With

' (8) Make heading rows bold with yellow background
With Cells(1, 1).FormatConditions.add(Type:=xlExpression, Formula1:="=IF($B8=""H"";TRUE;FALSE)")
    .Font.Bold = True
    .Interior.Color = 13434879
    .StopIfTrue = False
End With

' Modify the "Applies To" ranges
Cells.FormatConditions(1).ModifyAppliesToRange Range("O8:P507")
Cells.FormatConditions(2).ModifyAppliesToRange Range("O8:O507")
Cells.FormatConditions(3).ModifyAppliesToRange Range("B8:B507")
Cells.FormatConditions(4).ModifyAppliesToRange Range("B8:B507")
Cells.FormatConditions(5).ModifyAppliesToRange Range("B8:B507")
Cells.FormatConditions(6).ModifyAppliesToRange Range("E8:E507")
Cells.FormatConditions(7).ModifyAppliesToRange Range("A7:AE7")
Cells.FormatConditions(8).ModifyAppliesToRange Range("B8:L507")

ErrHandler:
Application.EnableEvents = False

End Sub 
```

# ios - 更新了 iPad 上的应用程序崩溃

> ID：13661966
> 
> 赞同：1
> 
> 时间：2012-12-01T17:44:18.537
> 
> 标签：ios, xcode, ipad, updates

这很有趣。我有一个通用应用程序。iPhone 和 iPad 版本都共享相同的类，只是有不同的 xib 文件。我经常收到报告说，更新 iPad 版本后，它无法运行，并且只是崩溃。但是，对 iPhone 版本的更新工作得很好。删除 iPad 应用程序，重新启动并重新安装将修复启动时崩溃的问题。

更新受影响的代码：

好的，所以在重新符号化并查看受影响的代码行之后，这是我认为导致问题的所有区域。

我希望应用程序第一次提出问题，并且仅在第一次运行应用程序时，所以在 AppDelegate didFinishLaunchingWithOptions 我有：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if (! [defaults boolForKey:@"notFirstRun"]) {
    UIAlertView *firstrun = [[UIAlertView alloc] initWithTitle:@"Sermon Preference" message:@"Do you prefer audio only, or video sermons?  (This setting can be changed at any time in the Settings Page.)" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Audio", @"Video", nil];
        [firstrun show];
        [firstrun release];
    [defaults setBool:YES forKey:@"notFirstRun"];
} 
```

然后我仍然在 AppDelegate 中：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
        if (buttonIndex == 0)       {   
            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            NSString *nope = @"Audio";
            [defaults setObject:nope forKey:@"videosermons"];
            [defaults synchronize];

        }
        if (buttonIndex == 1)        {
            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            NSString *yup = @"Video";
            [defaults setObject:yup forKey:@"videosermons"];
            [defaults synchronize];        }

        } 
```

我希望在“设置”窗口中更改这些值，因此在“设置”类中我有：

```
- (void)viewDidLoad
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

        NSString *currently = [defaults objectForKey:@"videosermons"];

    if ([currently isEqualToString:@"Audio"]) {
        segment.selectedSegmentIndex = 0;
    }
    if ([currently isEqualToString:@"Video"]) {
        segment.selectedSegmentIndex = 1;
    }

    NSString *firstName = [defaults objectForKey:@"firstName"];
    if (firstName  == nil) {

    }
    else {
        myTextField.text = firstName;
    }
    NSURL *url = [NSURL URLWithString:@"http://www.bellavenue.org/worship.html"];
    self.content = [NSString stringWithContentsOfURL:url];
    [super viewDidLoad];
} 
```

崩溃日志所说的导致崩溃的行是：

```
 if ([currently isEqualToString:@"Audio"]) { 
```

仅在 iPad 上且仅在更新已安装的先前版本而不是新安装时才导致崩溃的所有原因是什么？

更新崩溃日志：

```
Incident Identifier: EE5B1A62-12DB-4ED5-95CD-0C68CE1614BA
CrashReporter Key:   92fbea1d35e30ff292ba7362f93548dceedefe66
Hardware Model:      iPad2,5
Process:         Bell Avenue [1013]
Path:            /var/mobile/Applications/CE1AE921-5767-4B3C-B223-2C098041C73E/Bell Avenue.app/Bell Avenue
Identifier:      Bell Avenue
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-12-01 14:11:10.653 -0600
OS Version:      iOS 6.1 (10B5105c)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3411529e 0x34053000 + 795294
1   libobjc.A.dylib                 0x33f3297a 0x33f2a000 + 35194
2   CoreFoundation                  0x34118e02 0x34053000 + 810498
3   CoreFoundation                  0x3411752c 0x34053000 + 804140
4   CoreFoundation                  0x3406ef64 0x34053000 + 114532
5   Bell Avenue                     0x0008652e -[Settings viewDidLoad] (Settings.m:64)
6   UIKit                           0x3396578c 0x337c5000 + 1705868
7   UIKit                           0x3396d5fa 0x337c5000 + 1738234
8   UIKit                           0x3399786a 0x337c5000 + 1910890
9   UIKit                           0x33820ae4 0x337c5000 + 375524
10  UIKit                           0x337c8f7c 0x337c5000 + 16252
11  UIKit                           0x337c8a10 0x337c5000 + 14864
12  UIKit                           0x337c845e 0x337c5000 + 13406
13  GraphicsServices                0x3afaf59e 0x3afa9000 + 26014
14  GraphicsServices                0x3afaf1ce 0x3afa9000 + 25038
15  CoreFoundation                  0x340ea16e 0x34053000 + 618862
16  CoreFoundation                  0x340ea112 0x34053000 + 618770
17  CoreFoundation                  0x340e8f94 0x34053000 + 614292
18  CoreFoundation                  0x3405beb8 0x34053000 + 36536
19  CoreFoundation                  0x3405bd44 0x34053000 + 36164
20  UIKit                           0x3381f7c8 0x337c5000 + 370632
21  UIKit                           0x3381c644 0x337c5000 + 357956
22  Bell Avenue                     0x000832fe main (main.m:13)
23  libdyld.dylib                   0x39d7ab1c 0x39d79000 + 6940

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x385b6350 0x385a5000 + 70480
1   libsystem_c.dylib               0x3a64d11e 0x3a61e000 + 192798
2   libsystem_c.dylib               0x3a68996e 0x3a61e000 + 440686
3   libc++abi.dylib                 0x33e1cd4a 0x33e19000 + 15690
4   libc++abi.dylib                 0x33e19ff4 0x33e19000 + 4084
5   libobjc.A.dylib                 0x33f32a74 0x33f2a000 + 35444
6   libc++abi.dylib                 0x33e1a078 0x33e19000 + 4216
7   libc++abi.dylib                 0x33e1a110 0x33e19000 + 4368
8   libc++abi.dylib                 0x33e1b594 0x33e19000 + 9620
9   libobjc.A.dylib                 0x33f329cc 0x33f2a000 + 35276
10  CoreFoundation                  0x3405bf1c 0x34053000 + 36636
11  CoreFoundation                  0x3405bd44 0x34053000 + 36164
12  UIKit                           0x3381f7c8 0x337c5000 + 370632
13  UIKit                           0x3381c644 0x337c5000 + 357956
14  Bell Avenue                     0x000832fe main (main.m:13)
15  libdyld.dylib                   0x39d7ab1c 0x39d79000 + 6940

Thread 1:
0   libsystem_kernel.dylib          0x385b6d98 0x385a5000 + 73112
1   libsystem_c.dylib               0x3a624cf6 0x3a61e000 + 27894
2   libsystem_c.dylib               0x3a624a12 0x3a61e000 + 27154
3   libsystem_c.dylib               0x3a6248a0 0x3a61e000 + 26784

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x385a6648 0x385a5000 + 5704
1   libdispatch.dylib               0x3aee2974 0x3aeda000 + 35188
2   libdispatch.dylib               0x3aee2654 0x3aeda000 + 34388

Thread 3:
0   libsystem_kernel.dylib          0x385b6d98 0x385a5000 + 73112
1   libsystem_c.dylib               0x3a624cf6 0x3a61e000 + 27894
2   libsystem_c.dylib               0x3a624a12 0x3a61e000 + 27154
3   libsystem_c.dylib               0x3a6248a0 0x3a61e000 + 26784

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x385b60fc 0x385a5000 + 69884
1   libsystem_c.dylib               0x3a61f124 0x3a61e000 + 4388
2   WebCore                         0x38db41c0 0x38da8000 + 49600
3   WebCore                         0x38db40f2 0x38da8000 + 49394
4   CoreFoundation                  0x340ea6ca 0x34053000 + 620234
5   CoreFoundation                  0x340e89bc 0x34053000 + 612796
6   CoreFoundation                  0x340e8de8 0x34053000 + 613864
7   CoreFoundation                  0x3405beb8 0x34053000 + 36536
8   CoreFoundation                  0x3405bd44 0x34053000 + 36164
9   WebCore                         0x38db22a8 0x38da8000 + 41640
10  libsystem_c.dylib               0x3a62f30e 0x3a61e000 + 70414
11  libsystem_c.dylib               0x3a62f1d4 0x3a61e000 + 70100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:01:10.517

系统导致应用程序中止 ( `SIGABRT`)。代码中有几个问题：

1.  中的所有代码都`viewDidLoad`应该在`viewWillAppear:`. 当 iOS 加载视图时，没有任何代码与执行相关。
2.  `self.content = [NSString stringWithContentsOfURL:url]`是一个同步调用，阻塞主线程多长时间。您应该异步调用它或使用 NSOperationQueue 加载内容，然后再次在主线程上设置它。现在这会阻塞视图控制器的加载过程，这是一个更糟糕的主意。
3.  未显示异常消息，但我怀疑您的`currently`对象不是类型`NSString`并且它得到一个`unrecognized selector sent to instance`错误。

您可能想阅读有关如何阅读和使用崩溃报告的本系列：[http ://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

# windows - Windows 7 批处理：执行 ECHO 的输出

> ID：13661970
> 
> 赞同：-1
> 
> 时间：2012-12-01T17:44:48.503
> 
> 标签：windows, redirect, batch-file, echo, execute

出于某种原因，由于一般性，这个问题被关闭了。然而，这是一个关于批处理脚本的具体问题。我进行了编辑以使其更清晰。

具体来说，我想要一个批处理文件来运行这样的命令：

```
start Firefox "http://www.billboard.com/charts/hot-100?chartDate=2012-12-01" 
```

但明天日期将提前一天。也就是说，明天的命令将如下所示：

```
start Firefox "http://www.billboard.com/charts/hot-100?chartDate=2012-12-02" 
```

我设计了一个包含这两行的批处理文件：

```
set BBURL=start Firefox "http://www.billboard.com/charts/hot-100?chartDate=%date:~10,4%-%date:~4,2%-%date:~7,2%"
echo %BBURL% 
```

这些行给了我想要的命令，每天更新，如上所示。但他们实际上并没有运行命令。所以我的问题是：

1.  有一个更好的方法吗？
2.  如何重定向或执行“echo %BBURL%”输出，使其作为命令运行？
3.  如果我想更改命令以指定过去的日期（例如，一年中的同一天，但提前 10 年），正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:47:06.297

你不能这样做：

```
set BBURL=start Firefox "http://www.billboard.com/charts/hot-100?chartDate=%date:~10,4%-%date:~4,2%-%date:~7,2%"
%BBURL% 
```

# r - 默认返回system.time

> ID：13661974
> 
> 赞同：5
> 
> 时间：2012-12-01T17:45:18.800
> 
> 标签：r

我必须对大数据集进行广泛的数据操作（主要使用 data.table、RStudio）。我想监控每个步骤的运行时间，而不需要在每个步骤上显式调用 system.time() 。

默认情况下，是否有一个包或简单的方法来显示每个步骤的运行时间？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:02:15.783

这不完全是您所要求的，但我已经编写了`time_file`（https://gist.github.com/4183595），它`source()`是一个 R 文件，并运行代码，然后重写文件，插入包含每个多长时间的注释顶级语句开始运行。

即`time_file()`变成这样：

```
{
  load_all("~/documents/plyr/plyr")
  load_all("~/documents/plyr/dplyr")
  library(data.table)
  data("baseball", package = "plyr")
  vars <- list(n = quote(length(id)), m = quote(n + 1))
}

# Baseline case: use ddply
a <- ddply(baseball, "id", summarise, n = length(id))

# New summary method: ~20x faster
b <- summarise_by(baseball, group("id"), vars)

# But still not as fast as specialised count, which is basically id + tabulate
# so maybe able to eke out a little more with a C loop ?
count(baseball, "id") 
```

进入这个：

```
{
  load_all("~/documents/plyr/plyr")
  load_all("~/documents/plyr/dplyr")
  library(data.table)
  data("baseball", package = "plyr")
  vars <- list(n = quote(length(id)), m = quote(n + 1))
}

# Baseline case: use ddply
a <- ddply(baseball, "id", summarise, n = length(id))
#:    user  system elapsed
#:   0.451   0.003   0.453

# New summary method: ~20x faster
b <- summarise_by(baseball, group("id"), vars)
#:    user  system elapsed
#:   0.029   0.000   0.029

# But still not as fast as specialised count, which is basically id + tabulate
# so maybe able to eke out a little more with a C loop ?
count(baseball, "id")
#:    user  system elapsed
#:   0.008   0.000   0.008 
```

它不会对顶级`{`块内的代码进行计时，因此您可以选择不对您不感兴趣的内容进行计时。

我认为无论如何都不会自动将计时添加为顶级效果，而无需以某种方式修改您运行代码的方式 - 即使用类似`time_file`而不是`source`.

您可能想知道每个顶级操作的计时对代码的整体速度有何影响。嗯，这很容易用微基准来回答；）

```
library(microbenchmark)
microbenchmark(
  runif(1e4), 
  system.time(runif(1e4)),
  system.time(runif(1e4), gc = FALSE)
) 
```

因此，时间增加的开销相对较小（我的计算机上为 20µs），但默认的 gc 每次调用增加了大约 27 ms。因此，除非您有数千个顶级调用，否则您不太可能看到太大的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T15:03:36.030

对于这个额外的答案，我必须完全归功于**@jbecker**的IRC 频道，但对我来说，解决方案在这里： [http ://adv-r.had.co.nz/Profiling.html](http://adv-r.had.co.nz/Profiling.html)`Freenode``#R`

这里只是一点点的味道：

**“要了解性能，您可以使用分析器。有许多不同类型的分析器。R 使用一种相当简单的类型，称为采样或统计分析器。采样分析器每隔几毫秒就会停止执行代码并记录当前正在执行的函数执行（以及调用该函数的函数，等等）。例如，考虑下面的 f()："**

```
library(lineprof)
f <- function() {
  pause(0.1)
  g()
  h()
}
g <- function() {
  pause(0.1)
  h()
}
h <- function() {
  pause(0.1)
} 
```

# c# - gtk# 在 TreeView 中的 CellRendererCombo

> ID：13661976
> 
> 赞同：0
> 
> 时间：2012-12-01T17:45:26.067
> 
> 标签：c#, grid, gtk#, gtktreeview, cellrenderer

我想要一个`Gtk.TreeView`具有第一列的组合框，我将能够在其中选择我希望第一列成为的值。下面是我的代码。

```
 Gtk.TreeViewColumn compteColumn = new TreeViewColumn();
        Gtk.CellRendererCombo compteCellCombo = new CellRendererCombo();
        compteColumn.PackStart(compteCellCombo, true);
        compteColumn.AddAttribute(compteCellCombo, "text", 0);
        compteColumn.Title = "Compte Name";
        compteCellCombo.Editable = true; 
```

我试图在互联网上搜索`Gtk.CellRendererCombo`属性，但没有发现任何有价值的东西，我尝试了其中的一些：

*   文本
*   文本栏
*   模型
*   可编辑

但似乎没有任何效果，至于它生成这种消息的“文本”属性：

```
(eAppGtk:2528): Gtk-WARNING **: gtkliststore.c:608: Unable to convert from GtkSharpValue to gchararray

(eAppGtk:2528): Gtk-WARNING **: gtkliststore.c:608: Unable to convert from gchararray to gint 
```

非常感谢您对出了什么问题的深入了解，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:15:56.283

What I thought should be attribute set by a string in the `Gtk.TreeViewColumn.AddAttribute(cell, attribute, columnIndex)`, could be set by the C# Properties' fashion. The Column Index in this situation is the Property TextColumn.

The rest should speak for itself in the code below:

```
this.compteComboBox = new CompteComboBox(this.window.CompteManager, new ComboBox());

Gtk.TreeViewColumn compteColumn = new TreeViewColumn();
Gtk.CellRendererCombo compteCellCombo = new CellRendererCombo();
compteColumn.PackStart(compteCellCombo, true);
compteColumn.Title = "Compte Name";
compteCellCombo.TextColumn = 0;
compteCellCombo.Editable = true;
compteCellCombo.Edited += OnEdited;
compteCellCombo.HasEntry = true;
compteCellCombo.Model = this.compteComboBox.ComboBox.Model;
compteCellCombo.Text = this.compteComboBox.ComboBox.ActiveText; 
```

# windows - 访问 Windows 动画库的原始参数

> ID：13661983
> 
> 赞同：0
> 
> 时间：2012-12-01T17:46:11.183
> 
> 标签：windows, animation

我正在利用 Windows 动画库。我希望能够访问在 Windows 动画库中定义动画的原始参数？

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:46:11.183

是的。

您可以利用 Windows.UI.Core.AnimationMetrics 库来测量诸如 StaggerDelay、DelayLimit、ZOrder 等内容。

ApplicationDescription 类公开了在特定目标上执行的单个动画效果的集合，以构成完整的 Windows 不透明度、缩放或平移动画。

你可以在这里阅读更多：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.animationmetrics.animationdescription.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.animationmetrics.animationdescription.aspx)

# java - Spring MVC：之间的区别 和 标签？

> ID：13661985
> 
> 赞同：66
> 
> 时间：2012-12-01T17:46:27.457
> 
> 标签：java, spring, spring-mvc, annotations

前几天开始研究这个Spring Hello World教程：http: [//viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/](http://viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/)

在本教程中，Spring DispatcherServlet 是使用*spring-servlet.xml*文件配置的，这个：

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"

xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context.xsd">

<context:component-scan base-package="net.viralpatel.spring3.controller" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

在这个文件中，我使用**context:component-scan**标签来表示 Spring 必须扫描我的文件以搜索注解，例如，当控制器类发现一个方法被**@RequestMapping("/hello")**注解注解时知道此方法处理向以“/hello”结尾的 URL 的 HTTP 请求。这很简单...

现在我的疑问与我可以在 STS\Eclipse 中自动构建的 Spring MVC 模板项目有关。

当我在 STS 中创建一个新的 Spring MVC 项目时，我的*DispatcherServlet*是由一个名为**servlet-context.xml**的文件配置的，该文件包含一些类似于前面的示例文件的配置。

在这个文件中，我仍然有组件扫描标签：

```
<context:component-scan base-package="com.mycompany.maventestwebapp" /> 
```

但我还有另一个标签（看起来有类似的任务），这个：

```
<annotation-driven /> 
```

这两个标签有什么区别？
另一个“奇怪”的事情是前面的示例（不使用注释驱动标签）与 STS 使用 Spring MVC 模板项目创建的项目非常相似，但是如果我从其配置中删除注释驱动标签文件项目不运行并给我以下错误：**HTTP Status 404 -**

在堆栈跟踪中，我有：

**警告：org.springframework.web.servlet.PageNotFound - 在 DispatcherServlet 中找不到带有 URI [/maventestwebapp/] 的 HTTP 请求的映射，名称为“appServlet”**

但为什么？前面的例子在没有注释驱动标签的情况下运行良好，这个控制器类非常相似。实际上，只有一种方法可以处理对“/”路径的 HTTP 请求

这是我的控制器类的代码：

```
package com.mycompany.maventestwebapp;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

/**
 * Handles requests for the application home page.
*/
@Controller
public class HomeController {

private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

/**
 * Simply selects the home view to render by returning its name.
 */
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {
    logger.info("Welcome home! The client locale is {}.", locale);

    Date date = new Date();
    DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

    String formattedDate = dateFormat.format(date);

    model.addAttribute("serverTime", formattedDate );

    return "home";
} 
```

有人可以帮我理解这件事吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-01T18:34:25.000

`<mvc:annotation-driven />`意味着您可以定义 spring beans 依赖项，而无需实际在 XML 中指定一堆元素或实现接口或扩展基类。例如`@Repository`告诉 spring 一个类是一个 Dao 而不必扩展`JpaDaoSupport`DaoSupport 或其他一些子类。类似地`@Controller`告诉 spring 指定的类包含将处理 Http 请求的方法，而无需实现 Controller 接口或扩展实现控制器的子类。

当 spring 启动时，它读取它的 XML 配置文件并`<bean`在其中查找元素，如果它看到类似的东西`<bean class="com.example.Foo" />`并且 Foo 被标记，`@Controller`它知道该类是一个控制器并将其视为控制器。默认情况下，Spring 假定它应该管理的所有类都明确定义在 beans.XML 文件中。

组件扫描告诉 spring 它应该在类路径中搜索 com.mycompany.maventestweapp 下的所有类`<context:component-scan base-package="com.mycompany.maventestwebapp" />`并查看每个类以查看它`@Controller`是否`@Repository`有bean 工厂就像您输入了 XML 配置文件一样。`@Service``@Component``<bean class="..." />`

在一个典型的 Spring MVC 应用程序中，您会发现有两个 Spring 配置文件，一个配置应用程序上下文的文件通常以 Spring 上下文侦听器启动。

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

Spring MVC 配置文件通常以 Spring 调度程序 servlet 开始。例如。

```
<servlet>
        <servlet-name>main</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>main</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

Spring 支持分层 bean 工厂，因此在 Spring MVC 的情况下，调度程序 servlet 上下文是主应用程序上下文的子级。如果向 servlet 上下文询问名为“abc”的 bean，它将首先在 servlet 上下文中查找，如果在其中找不到它，它将在父上下文中查找，即应用程序上下文。

数据源、JPA 配置、业务服务等通用 bean 是在应用程序上下文中定义的，而 MVC 特定配置不是与 servlet 关联的配置文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-02T20:44:48.527

```
<context:component-scan base-package="" /> 
```

告诉 Spring 扫描这些包的注释。

```
<mvc:annotation-driven> 
```

注册了一个RequestMappingHanderMapping、一个RequestMappingHandlerAdapter和一个ExceptionHandlerExceptionResolver来支持MVC自带的@RequestMapping、@ExceptionHandler等带注解的控制器方法。

这也启用了一个 ConversionService，它支持注释驱动的输出格式以及注释驱动的输入验证。它还支持@ResponseBody，您可以使用它来返回 JSON 数据。

您可以在 @Configuration 类中使用 @ComponentScan(basePackages={"...", "..."} 和 @EnableWebMvc 使用基于 Java 的配置来完成相同的事情。

查看 3.1 文档以了解更多信息。

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-02T16:15:00.340

注释驱动向 Spring 指示它应该扫描带注释的 bean，而不是仅仅依赖 XML bean 配置。组件扫描指示在哪里寻找这些 bean。

这是一些文档：[http ://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-enable](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-enable)

# date - 使用日期的标识符

> ID：13661986
> 
> 赞同：0
> 
> 时间：2012-12-01T17:46:27.703
> 
> 标签：date, excel-2007, uniqueidentifier, stata

这可能是一个非常简单的问题，但我无法弄清楚。我有数据，其中每一行都是一个人的独特结果。数据集中的人都有一个唯一标识符（Unique ID）。

我想在新列中创建第二个（非唯一）标识符（日期 ID），这是该人出现在数据中的第一个日期。我想在 Stata 中执行此操作，如果不可能，我猜 Excel 会没问题。

例如我有：

```
Unique ID       Date    Outcome
   1          1/1/2000     A
   2          2/11/2003    B
   2          2/12/2003    B
   2          3/6/2004     A
   3          4/4/1997     A
   3          8/11/2011    A
   4          9/16/1995    B
   4          9/17/1995    B
   4          9/18/1995    C
   4          9/19/1995    E
   4          9/20/1995    A
   4          2/17/1996    A
   4          9/16/1996    A
   4          9/17/1996    B
   5          10/16/1995   C
   5          10/17/2005   C
   5          12/31/2008   A 
```

我想：

```
Unique ID       Date    Outcome           Date ID
   1          1/1/2000     A             1/1/2000
   2          2/11/2003    B             2/11/2003
   2          2/12/2003    B             2/11/2003
   2          3/6/2004     A             2/11/2003
   3          4/4/1997     A             4/4/1997
   3          8/11/2011    A             4/4/1997
   4          9/16/1995    B             9/16/1995
   4          9/17/1995    B             9/16/1995
   4          9/18/1995    C             9/16/1995
   4          9/19/1995    E             9/16/1995
   4          9/20/1995    A             9/16/1995
   4          2/17/1996    A             9/16/1995
   4          9/16/1996    A             9/16/1995
   4          9/17/1996    B             9/16/1995
   5          10/16/1995   C             10/16/1995
   5          10/17/2005   C             10/16/1995
   5          12/31/2008   A             10/16/1995 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:44:48.707

A more direct one-line solution is

```
bysort unique_id (date) : gen date_id = date[1] 
```

Note that `replace` is a command, not a function. `search by` to get a reference to a tutorial on `by:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:21:56.680

这可能不是最有效的方法，但我想通了：

首先我创建了一个计数器，计算每个人在数据中的次数

```
sort unique_id
by unique_id: gen individual_counter = _n 
```

然后我使用这个计数器创建了一个新变量，它是个人在数据中的第一个日期，或者缺失值“。”。

```
gen date_id = date if individual_counter == 1 
```

Lastly, I used the replace function to replace missing values from above (i.e., the first day listed)

```
replace date_id = date_id[_n-1] if date_id >= . 
```

# javascript - 在javascript中使句号加粗

> ID：13661994
> 
> 赞同：-1
> 
> 时间：2012-12-01T17:47:02.267
> 
> 标签：javascript

所以我正在做一些简单的事情并遇到问题。我想使用句点作为索引的显示，而不是像 1,2,3,4 这样的数字......我公然插入句点，它就像我想要的那样工作，但尺寸很小。我一直在谷歌搜索并没有找到解决方案。有谁知道 Ascii 的东西，我可以用它来使句点看起来像一个项目符号点（通常很大），所以任何使用我的程序的人都可以点击大项目符号（句点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:49:27.123

使用`li`HTML 元素怎么样？更多信息：[https ://developer.mozilla.org/en-US/docs/HTML/Element/li](https://developer.mozilla.org/en-US/docs/HTML/Element/li)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:52:43.637

我可能误解了您的问题，但您可能会为此使用无序列表。

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item N</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T17:53:31.577

# 使用字符实体或 Unicode 字符

[您可以使用此Wikipedia List of XML and HTML Character Entities](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)找到更合适的字符。

例如，这些可以做：

*   ♦ ( `&diams;`)
*   • ( `&#x2022;`)
*   ‣ ( `&#x2023;`)
*   ◦ ( `&#x25E6;`)
*   ⁃ ( `&#x2043;`)
*   ∙ ( `&#x2219;`)

您也可以根据您的字体使用小写的“o”。

# 或者使用 CSS 属性来设置文本样式

定义一个 CSS 类：

```
 .periods {
      font-weight: bold;
      // anything else you want to style
  } 
```

你想实现这样的目标：

```
 <span class="periods">.</span> 
```

# 如果你想要一个列表...

然后使用这样的 CSS 类：

```
.dotted-list li {
  list-style-type: disc;
  // or any other style as listed in the first table on:
  // https://developer.mozilla.org/en-US/docs/CSS/list-style-type
} 
```

和一个类似的列表：

```
<ul class="dotted-list">
  <li>entry 1</li>
  <li>entry 2</li>
  <li>entry 3</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T17:54:13.530

您始终可以使用 Unicode 项目符号字符，而不是使用句点并将其设为粗体：

[http://www.fileformat.info/info/unicode/char/2022/index.htm](http://www.fileformat.info/info/unicode/char/2022/index.htm)

在 javascript 字符串中`"\u2022"`，它会是这样的： •</p>

# java - Android中非常简单的适配器重排技术

> ID：13661996
> 
> 赞同：0
> 
> 时间：2012-12-01T17:47:09.157
> 
> 标签：java, android

我有一个搜索引擎，可以在预定义的字符串中执行搜索。我想以自定义字体而不是 android 默认显示结果列表！我还有一个简单的自定义字体应用程序。但不能为此做一个好的适配器。

这是自定义字体应用程序

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView)findViewById(R.id.tv);
    Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
    tv.setTypeface(cFont);

<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="@string/hello"
android:textSize="18sp"
android:id="@+id/tv"
/> 
```

这是产品搜索应用程序：

公共类 ProductList 扩展 Activity {

```
 // List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_product_list);

    String asim02 = System.getProperty("line.separator");

    String products[] = {
            "Apple" + asim02 +"Definition1", 
            "Orange" + asim02 +"Definition2",
            "Banana"+ asim02 +"Definition3", 
            "Onion"+ asim02 +"Definition4", };

    lv = (ListView) findViewById(R.id.list_view);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.p_list,   products);
    lv.setAdapter(adapter);

<TextView

        android:textColor="?android:textColorPrimary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15sp"
        android:id="@+id/p_list"
        /> 
```

请帮忙制作适配器！！！我很新，看不懂！！！需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:46:38.337

您必须按照 Pravin 的建议使用自定义适配器。在 getview() 方法中，您必须为 texview 设置字体。您必须将 TrueType (TTF) 甚至 OpenType 文件 (OTF) 字体放入项目中的 assets 文件夹中。

```
 TextView tv = (TextView) findViewById(R.id.myfontfile);
    Typeface face = Typeface.createFromAsset(getAssets(),"fonts/CHOCD.otf");
    tv.setTypeface(face); 
```

您可以在以下链接中查看更多详细信息[http://vimaltuts.com/android-tutorial-for-beginners/android-custom-font-example](http://vimaltuts.com/android-tutorial-for-beginners/android-custom-font-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:07:24.360

为此，您必须使用自定义 ListView 适配器并在其 getView 方法中设置字体。

一些教程： [教程 1](http://www.ezzylearning.com/tutorial.aspx?tid=1763429) [更多 Tuts](http://www.androidguys.com/2008/07/14/fancy-listviews-part-one/)

# vim - 我的 MacVim 顶部的奇怪栏？

> ID：13661997
> 
> 赞同：3
> 
> 时间：2012-12-01T17:47:12.170
> 
> 标签：vim, macvim

我的 MacVim 顶部有一个栏，每次我在一个窗口中打开多个缓冲区时，它都会像这样列出它们：

![开业时的酒吧](../Images/b20df302e144f59007890bd31f3e1b49.png)

这很好，除非我然后键入 ":bn" 以进入下一个缓冲区，否则该条将不再准确。它显示了“contact.html”的重复条目，而“bio.html”没有条目：

![切换缓冲区后的条形图](../Images/6edbcab56fb8311add2c138de7ff8365.png)

如果它工作正常，这个栏会很有用。但如果它不会，那么我想摆脱它。问题是，我不知道它是如何到达那里的。

那么，有谁知道如何解决这个问题或摆脱它？

我的 .vimrc 在这里，如果有帮助的话：[https](https://github.com/austintrose/Vim-Files) ://github.com/austintrose/Vim-Files 。我在我的 .vimrc 中找不到任何与它相关的东西。：-/

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T10:14:53.663

这看起来像“文本模式”选项卡行。通常，选项卡将显示在基于 GUI 的选项卡行中，但是这一行（来自您的`.vimrc`）：

```
 set guioptions= 
```

删除禁止 GUI 选项卡并恢复为“文本模式”选项卡的选项`e`。( )选项`guioptions`的描述是这样说的：`e``guioptions``:help 'go-e'`

> 使用“showtabline”指示时添加标签页。…当'e'缺失时，可以使用非GUI标签页行。

* * *

如果您想禁用制表符行，那么您可能应该设置`showtabline`为`0`使其始终被禁用：

```
set showtabline=0 
```

`if has("gui_running")`如果您只想将它​​应用于您的 Vim 的 GUI 实例，您可以将它放在您的部分中，或者您也可以无条件地禁用基于 tty 的 Vim 实例中的制表符行。

或者，如果您想拥有基于 GUI 的选项卡，请确保`guioptions`包含`e`, 并且`showtabline`非零：

```
set guioptions=e  " instead of clearing this, set it to only `e`
set showtabline=1 " one is the default value 
```

* * *

`:tabnext`顺便说一句，您可以使用和`:tabprevious`（在正常模式下`gt`和`gT`分别）导航选项卡。