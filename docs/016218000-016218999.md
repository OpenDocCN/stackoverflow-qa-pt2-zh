# StackOverflow 问答 16218000-16218999

# series-40 - Nokia Web Tools 可以访问设备 API 吗？

> ID：16218006
> 
> 赞同：0
> 
> 时间：2013-04-25T14:50:19.673
> 
> 标签：series-40

我正在使用 Nokia Web Tools 开发 Web 应用程序，但我需要访问设备 api，例如型号名称，例如 Nokia Asha 301 或 E72 等。可以吗？如果没有，是否可以通过纯常规 javascript API 获取设备名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T01:55:15.190

答案不是，除了位置，但同样，位置 api 在 HTML 5 中，所以不是真的

# image - 如何从 RGB 图像中检索原始矩阵？

> ID：16218010
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:50:28.600
> 
> 标签：image, matlab, image-processing

在 Matlab 中，如何从 RGB 图像中检索原始矩阵？就我而言，我有一个 50x360 矩阵。在 imagesc 之后，我将其保存为 jpeg 文件。现在，我需要从 jpeg 文件中加载回矩阵（50x360）。有什么办法吗？如果使用 imread，矩阵尺寸将为 1366x628x3，与 50x360 不同。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:55:34.647

像这样：

```
im = imread('image.jpg')
size(im)
ycoord = 20;
xcoord = 20;
im(ycoord,xcoord,1) %for R
im(ycoord,xcoord,2) %for G
im(ycoord,xcoord,2) %for B 
```

# ios - 取消选择 Segment 的默认值

> ID：16218012
> 
> 赞同：1
> 
> 时间：2013-04-25T14:50:31.173
> 
> 标签：ios, objective-c, xcode, uisegmentedcontrol

我正在尝试使用数组加载段控件。当我这样做时，它选择男性作为默认值。我不希望选择男性或女性，默认情况下都未选择。

```
- (id)initWithAnimal:(ITAnimal *)Animal isEdit:(BOOL)isEdit
{
self = [super init];
if (self) {
    // Custom initialization
    _Animal = Animal;
    _genders = [NSArray arrayWithObjects:@"Male", @"Female", nil];
    if (!_Animal) {
        _Animal = [[ITData sharedObject] managedObjectFromName:@"ITAnimal"];
        _Animal.gender = [_genders objectAtIndex:0];

    }
    _isEdit = isEdit;

    // gender controll
    self.genderControl = [[UISegmentedControl alloc] initWithItems:_genders];
    [self.genderControl addTarget:self action:@selector(genderChanged:) forControlEvents:UIControlEventAllEvents];
    }
    return self;
}

}
else if (indexPath.row == 2) {
    BOOL isIn = NO;
    for (id view in cell.contentView.subviews) {
        if ([view isEqual:self.genderControl]) isIn = YES;
    }
    if (!isIn) [cell.contentView addSubview:self.genderControl];

    [cell.detailTextLabel setHidden:_isEdit];
    [self.genderControl setSelectedSegmentIndex:[_genders indexOfObject:content]];

    [self.genderControl setHidden:!_isEdit];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:53:44.420

您可能应该使用：

```
[self.genderControl setSelectedSegmentIndex:UISegmentedControlNoSegment]; 
```

[*来自苹果的文档：*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

> 默认值为 UISegmentedControlNoSegment （未选择段），直到用户触摸一个段。将此属性设置为 -1 以关闭当前选择。当控件处于瞬时模式时，UISegmentedControl 会忽略此属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:52:39.353

你正在寻找

```
[segmentcontrol setSelectedSegmentIndex:-1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T10:28:52.380

我不知道这对某人来说是否仍然是一个问题.. 但是如果您使用的是故事板.. 选择您放置在 viewController 和属性 Inspector --> Segmented Control --> Behavior 中的 segmentedIndex 取消选中选中的复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-30T18:05:28.363

如果您在这里寻找 SwiftUI 的解决方案，只需将您的 currentSelection 值默认设置为 -1。

```
 struct Parent: View {

      @State private var currentSelection = -1

      var segmentOptions = ["Green", "Blue"]

      var body: some View {
        HStack {

            Picker(selection: $currentSelection, label: Text("What is your favorite color?")) {
                ForEach(0..<segmentOptions.count) { index in
                    Text(self.segmentOptions[index]).tag(index)
                }
            }.pickerStyle(SegmentedPickerStyle())
        }
      }
    } 
```

# .net - 如何在 vba 中使用 .net 委托

> ID：16218013
> 
> 赞同：1
> 
> 时间：2013-04-25T14:50:32.000
> 
> 标签：.net, vba, delegates

我有一个用 C# 编写的 .net DLL，它公开了一些委托。现在，它们在 VBA 对象资源管理器中可见并显示为“类”。但是如何实例化它并使其指向具有相同签名的 VBA 函数并将其传递回以该委托作为参数的 C# 函数？

我应该可以做到的吧！？我的 DLL 注册了 COM 互操作，是否有任何 COM 属性必须装饰委托或什么？

谢谢，安德烈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T15:00:54.400

使用后期绑定，您将无法使用 VBA IntelliSense 进行编程，使用正确的参数调用函数：

例如：实例化你的类

```
Private obj As Object
Set obj = CreateObject("NAMESPACE.CLASS") 
```

并使用您班级中的方法

```
obj.METHOD(a,b,c) 
```

如果您需要以编程方式注册 DDL，您可以使用

```
Shell "c:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe c:\MYDLL.dll /codebase" 
```

# android - 在Android地图的上半部分设置当前位置

> ID：16218018
> 
> 赞同：0
> 
> 时间：2013-04-25T14:50:40.420
> 
> 标签：android, android-layout, map

我在 googlemap 上绘制当前位置。但我只显示了地图的一半（另一半隐藏在另一个视图下，但我无法更改）。

我想将相机移动到当前位置的地图上半部分的中心，你能帮我这样做吗？有没有办法设置我想显示当前位置的视图的 x 和 y？

我正在使用 Google Maps Android API v2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:56:40.423

google.maps.Map 类有一个名为 setCenter 的方法，它接受 google.maps.LatLng 作为其唯一参数。此方法将地图以给定的 LatLng 为中心。使用一些巧妙的代码，您可以首先在地图上使用 getCenter() 方法来确定地图的真实中心，然后将该 LatLng 的纬度与视口顶部的纬度进行平均。这将为您提供新中心的纬度。您的新中心的经度将保持不变。将地图设置为这个新的坐标对，您的问题就解决了。

快乐编码！

*   路由映射器

# autotools - 为什么 autoconf 缓存我的宏？

> ID：16218020
> 
> 赞同：2
> 
> 时间：2013-04-25T14:50:45.960
> 
> 标签：autotools, autoconf

我正在创建一个 android.m4 文件以轻松查找 android SDK/NDK 中程序的路径。

android.m4 文件包含一个名为的辅助函数`_android_path_found_notfound`：

```
# _android_path_found_notfound(variable, program, path, found, notfound)
#
# search for a program in path. If found, 'variable' is set to the absolute path,
# then executes 'found', otherwise, 'variable' is set to '' and 'notfound' is run
m4_define([_android_path_found_notfound],
    [AC_PATH_PROG([_android_temp_],[$2],[_android_notfound],[$3])
     AS_IF( [test x"$_android_temp_" = x"_android_notfound"],
        [$1=""
        AC_SUBST([$1],[])
        $5],
        [$1="$_android_temp_"
        AC_SUBST([$1],[$_android_temp_])
        $4] )]) 
```

以及许多使用该辅助函数的函数：

```
AC_DEFUN([AC_PROG_ANDROID],
     [_android_path_found_notfound([ANDROID],[android],[$ANDROID_HOME:$PATH],[$1],[$2])]
)

AC_DEFUN([AC_PROG_DX],
     [_android_path_found_notfound([DX],[dx],[$ANDROID_HOME:$PATH],[$1],[$2])]
)

... 
```

但是，当我运行一个调用`AC_PROG_ANDROID`then的配置脚本时`AC_PROG_DX`，我得到了这个：

```
checking for android... /opt/android-sdk-update-manager/tools/android
checking for dx... (cached) /opt/android-sdk-update-manager/tools/android 
```

第二行指向与第一行相同的程序，并读取**(cached)**。为什么会缓存结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:18:51.997

AC_PATH_PROG 将其结果保存在一个特定于 autoconf 的变量中，它链接到 AC_PATH_PROG 中给出的变量。因此，如果您说 AC_PATH_PROG([something],...，那么它会记住“某事”的答案。由于您的 AC_PROG_ANDROID 和 AC_PROG_DX 都设置了值 _android_temp_，因此该结果将被缓存并稍后使用。

修复它的最简单方法可能是对 AC_PROG_ANDROID 和 AC_PROG_DX 使用不同的变量

# jquery - setTimeout，使用 jQuery 显示和隐藏

> ID：16218021
> 
> 赞同：1
> 
> 时间：2013-04-25T14:50:51.727
> 
> 标签：jquery, settimeout

我有一个大的我想显示 onload 然后让它超时以显示较小的图像。然后在鼠标悬停时，使用 jQuery 在大图像中滑动，在鼠标上滑出大图像并滑入小图像。这是我的代码，我只有 mouseover、mouseout 功能。我需要它从显示 5 秒的大屏幕开始，然后滑入较小的屏幕。：

```
<script type="text/javascript">   
    $(document).ready(function () {
        $(".expanded").show();
        $(".collapsed").hide();

        $(".collapsed").mouseover(function () {
            $(".collapsed").slideUp(500);
            $(this).next(".expanded").slideToggle(500);
        });

        $(".expanded").mouseleave(function () {
            $(".expanded").slideUp(500);
            $(".collapsed").slideDown(500);      
        });  
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:05:43.327

尝试这个：

```
$(document).ready(function () {
    setTimeout(function(){
        toggleImage($(".expanded"));
    },5000);

    $(".collapsed").hide();

    //toggle the componenet with class msg_body
    $(".collapsed").mouseover(function () {
        toggleImage($(".collapsed"));
    });

    $(".expanded").mouseleave(function () {
        toggleImage($(".expanded"));
    });

});

function toggleImage(img) {
    $(img).slideUp(500, function() {
        $(this).siblings("img").slideToggle(500);
    });

    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:02:05.977

我将创建一个全局变量“readyforHovering”，在超时到期之前将其设置为 false，例如：

```
var readyforHovering = false;

$(document).ready(function () {

setTimeout(function() {
  //Code to hide the large image and show the smaller image goes here

  //Now enable hovering...
  readyforHovering = true;
}, 5000);

        $(".expanded").show();
        $(".collapsed").hide();
        //toggle the componenet with class msg_body
        $(".collapsed").mouseover(function () {
            if (readyforHovering) {
               $(".collapsed").slideUp(500);
               $(this).next(".expanded").slideToggle(500);
            }
        });

        $(".expanded").mouseleave(function () {
            if (readyforHovering) {
               $(".expanded").slideUp(500);
               $(".collapsed").slideDown(500);
            }

               });

    }); 
```

您不希望用户在 5 秒过后才能悬停，并且您已经显示了较小的图像......这就是 readyforHovering 变量的重点。

# bash - Bash 脚本 echo 正在执行一个奇怪的替换

> ID：16218022
> 
> 赞同：3
> 
> 时间：2013-04-25T14:50:54.260
> 
> 标签：bash, shell, glob, substitution

意识到 bash 对双引号、单引号、括号等非常挑剔——我今天遇到了一个奇怪的行为，无法解释。问题本身很容易避免，但我不明白原因。我有兴趣了解为什么会发生这种情况只是为了提高我的 bash 知识。

这是一个简短的示例——文件 test.sh 的内容：

```
msg="Usage: command password [dbhost] [database] [user] [query] [filetag]"
echo $msg 
```

然后运行：

```
sh test.sh 
```

我预计输出将是：

```
Usage: command password [dbhost] [database] [user] [query] [filetag] 
```

然而我得到的是：

```
Usage: command password [dbhost] [database] [user] y [filetag] 
```

如果我将单词“query”更改为“querx”，则输出的那部分变为“x”。

如果我将“查询”一词更改为“xuery”，则输出的那部分将变为“x y”。

如果我把“query”这个词改成“xuerx”，那部分输出就变成了“x x”。

没有名称为 query、querx 等的本地或环境变量。

这是在 RedHat 上。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:07:41.227

[Bourne 兼容 shell的](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06)[*单词扩展*](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06)序列是

1.  波浪号扩展
2.  参数扩展
3.  命令替换
4.  算术展开
5.  字段拆分
6.  路径名扩展
7.  报价删除

因此，在参数扩展之后`$msg`，路径名扩展`[query]`会查找查找名为`q`、`u`、`e`或的`r`文件`y`。你有一个名为 的文件`y`，对吧？

请注意，此行为取决于`f`选项的设置。with`set -f`不执行路径名扩展，而 with `set +f`it 是。

当然，您也可以双引号 echo arg，因为路径名扩展不会对引用的单词执行。

# c# - AES加密C#解密Java？

> ID：16218026
> 
> 赞同：3
> 
> 时间：2013-04-25T14:51:01.150
> 
> 标签：c#, java, encryption, aes, rijndael

我试图在 Java 中解密 C# 加密数据但没有成功。我使用 PKCS7 填充的 128 位密钥和块大小。这是 C# 代码：

```
 public byte[] Encrypt(byte[] data, byte[] key)
    {
        using (var ms = new MemoryStream())
        {
            using (var aes = RijndaelManaged.Create())
            {
                aes.Key = key;
                aes.IV = key;
                var stream = new CryptoStream(ms, aes.CreateEncryptor(aes.Key, aes.IV), CryptoStreamMode.Write);
                stream.Write(data, 0, data.Length);
                stream.FlushFinalBlock();
                return ms.ToArray();
            }
        }
    } 
```

这是java代码：

```
private static Key generateKey() throws Exception {

    Key key = new SecretKeySpec(Files.readAllBytes(Paths.get("D:/Temp/cr.key")), "AES");

    return key;
}

public static byte[] decrypt(byte[] encryptedData) throws Exception {
    Key key = generateKey();

    Cipher c = Cipher.getInstance("AES/CBC/PKCS7Padding", "BC");

    IvParameterSpec ivSpec = new IvParameterSpec(key.getEncoded());
    c.init(Cipher.DECRYPT_MODE, key, ivSpec);

    System.out.println(c.getBlockSize());

    c.update(encryptedData);
    byte[] decValue = c.doFinal();
    return decValue;
}

public static void main(String[] args) throws Exception {
    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

    byte[] bb = decrypt(Files.readAllBytes(Paths.get("d:\\Temp\\cr~\\OEBPS\\Chapter001.html")));
           //decompressFile(bb, new File("D:\\Temp\\enc.html"));
} 
```

知道有什么问题吗？

谢谢

更新

* * *

对不起，我真笨，我忘了写实际的错误信息。这里是：

> 线程“主”javax.crypto.BadPaddingException 中的异常：在 javax.crypto.Cipher.doFinal(Cipher.java:1970) 的 org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(Unknown Source) 处的垫块损坏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:38:12.820

您忘记了[`Cipher.update(byte[]): byte[]`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#update%28byte%5b%5d%29)只要处理了完整的密文块，它就会返回数据。

注意：显然不是这个问题的答案，因为异常指向另一个错误。但是上面代码中仍然存在一个错误。

# php - 我们可以从 php 中的 $_SERVER 从客户端浏览器中检索地理定位信息吗？

> ID：16218037
> 
> 赞同：0
> 
> 时间：2013-04-25T14:51:27.620
> 
> 标签：php, localization, geolocation, ip-geolocation

一些现代浏览器无法激活（或不激活）地理定位。那么，当它被激活时，我们如何从 php 服务器中检索它，就像在 $_SERVER 变量中一样？

有没有像 user-agent 这样的本地化特殊常量？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:09:36.243

请记住，从客户端生成的任何内容都可能被欺骗。据我所知，`$_SERVER`或`get_browser()`函数不收集地理位置。

您可以使用 HTML 做的一件事是使用[GeoLocation API](http://diveintohtml5.info/geolocation.html) `navigator.geolocation`来提取一些所需的信息，并使用调用将其发送到服务器脚本`async ajax`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:13:57.100

从技术上讲，是的。您使用 $_SERVER['REMOTE_ADDR'] 获得 IP。如果没有像 MaxMind 的 GeoIP 数据库这样的 IP 查找 API，这不会告诉你任何事情。

# vba - 从另一个 VBA 代码注释 vba 代码

> ID：16218039
> 
> 赞同：2
> 
> 时间：2013-04-25T14:51:30.427
> 
> 标签：vba, excel, excel-2007

我想从另一个代码 VBA 中评论包含 Msg Box 的行。我正在尝试使用 Library VBA EXTENSIBILITY，但我没有找到解决方案。

欢迎任何帮助。

这是我的代码：

```
Sub CommentCode()
        Dim VBProj As VBIDE.VBProject
        Dim VBComp As VBIDE.VBComponent
        Dim CodeMod As VBIDE.CodeModule
        Dim LineNum As Long
        Const QUOTE = ' 

        Set VBProj = ActiveWorkbook.VBProject
        Set VBComp = VBProj.VBComponents("ThisWorkbook")
        Set CodeMod = VBComp.CodeModule

        With CodeMod
            LineNum = .CreateEventProc("Open", "Workbook")
            LineNum = LineNum + 1
            .InsertLines LineNum,  QUOTE 
        End With
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:05:47.493

首先，请改变

`Const QUOTE = '`

对此：

`Const QUOTE = "'"`

基本上你的报价（或`Rem`）将是一个字符串，需要用引号引起来。

至于**VB Extensibilty**，您可能需要在找到该行后删除该行，并在开头插入带有注释的新行。

请参阅[Chip Pearson：在 VBA 编辑器中编程](http://www.cpearson.com/excel/vbe.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T08:26:55.530

我已经找到了解决此代码问题的方法：

```
Sub CommentCodeModule(wb As Workbook)
        Dim VBProj As VBIDE.VBProject
        Dim VBComp As VBIDE.VBComponent
        Dim CodeMod As VBIDE.CodeModule
        Dim WordToFind As String
        Dim SL As Long ' start line
        Dim EL As Long ' end line
        Dim SC As Long ' start column
        Dim EC As Long ' end column
        Dim Found As Boolean
        Dim LineNum As Long
        Set VBProj = wb.VBProject
        Set VBComp = VBProj.VBComponents("Module3")
        Set CodeMod = VBComp.CodeModule

        WordToFind = "test"

        With CodeMod
            SL = 1
            EL = .CountOfLines
            SC = 1
            EC = 255
            Found = .Find(target:=FindWhat, StartLine:=SL, StartColumn:=SC, _
                EndLine:=EL, EndColumn:=EC, _
                wholeword:=True, MatchCase:=False, patternsearch:=False)
            Do Until Found = False
                Debug.Print "Found at: Line: " & CStr(SL) & " Column: " & CStr(SC)
                EL = .CountOfLines
                SC = EC + 1
                EC = 255

                Found = .Find(target:=FindWhat, StartLine:=SL, StartColumn:=SC, _
                    EndLine:=EL, EndColumn:=EC, _
                    wholeword:=True, MatchCase:=False, patternsearch:=False)
            Loop
             LineNum = SL
             .DeleteLines LineNum

            .InsertLines LineNum, "  ' test"
        End With
    End Sub 
```

感谢所有帮助过我的人。

# ruby - resque 如何检查何时运行作业？

> ID：16218042
> 
> 赞同：3
> 
> 时间：2013-04-25T14:51:39.187
> 
> 标签：ruby, redis, delayed-job, resque

我找到了 Resque：

> [https://github.com/elucid/resque-delayed](https://github.com/elucid/resque-delayed)

而且我可以看到我可以安排延迟的作业。我的问题是，它如何检查延迟的工作？如果我在一个月内有 5000 个延迟作业，我希望它不会每 10 秒检查一次所有延迟作业。

那么它是如何完成的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:48:39.463

它不必检查所有延迟的作业。它在 Redis 中维护一个排序集，作业按预定时间排序。请参阅以下代码：

[https://github.com/elucid/resque-delayed/blob/master/lib/resque-delayed/resque-delayed.rb](https://github.com/elucid/resque-delayed/blob/master/lib/resque-delayed/resque-delayed.rb)

每次守护进程唤醒时，只需要检查集合中的第一项（使用 ZRANGEBYSCORE 命令）。守护进程一一获取相关作业，直到轮询查询没有返回结果，然后它再次休眠。

通过获取 n 乘 n 的作业可以进一步提高性能。它可以使用服务器端 Lua 脚本作为轮询查询来实现：

```
local res = redis.call('ZRANGEBYSCORE',KEYS[1], "-inf", ARGV[1], 'LIMIT', 0, 10 )
if #res > 0 then
   redis.call( 'ZREMRANGEBYRANK', KEYS[1], 0, #res-1 )
   return res
else
   return false
end 
```

在一次往返中，此脚本获得 10 个作业（如果可用），并将它们从 zset 中删除。比 Resque-delayed 目前需要的 11 ZRANGEBYSCORE 和 10 ZREM 好得多。

# c# - 如何查看垃圾回收的内容？

> ID：16218043
> 
> 赞同：4
> 
> 时间：2013-04-25T14:51:40.830
> 
> 标签：c#, mono, garbage-collection, unity3d

有什么方法可以查看被垃圾内容的内容吗？

基本上我能够看到，当我有一个 GC 峰值时，已经收集了 1200 个这样和这样类型的对象，所以也许我可以识别和重构以避免首先出现垃圾。

这是 Unity（Mono 环境），所以我不能使用任何重型工具，如 Ants Memory Profiler，甚至 Mono HeapShot，因为我无法控制可执行文件的启动方式。

我已经阅读了有关 GC 通知的信息，但它们似乎没有包含在 Mono Unity 正在使用的版本中，而且无论如何我认为它不会给我想要的详细程度（会吗？）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:29:38.073

现在，不，您无法获取当前正在收集的内容。最重要的是，即使可以，也为时已晚，因为 GC 仅适用于已处置的对象。毕竟，GC 对不再引用的对象起作用。

您不应该有“GC Spike”，因为 GC 通常足够智能，不会成为集合中所有内容的瓶颈。最重要的是，除非被告知，否则 GC 很少“立即”收集。

如果由于某种原因您可以证明 GC 确实是一个性能问题，您可以创建一种预收集器，您可以在其中存储您确定要消失的项目，它会以较慢的速度释放它们的引用并调用手动对它们进行 GC。

# php - PHP：为什么这是一个无限循环？

> ID：16218046
> 
> 赞同：0
> 
> 时间：2013-04-25T14:51:44.643
> 
> 标签：php, loops, while-loop, combinations, infinite-loop

```
$x = 0;
$y = 0;

while ($x < 6);
{
    while ($y < 6)
    {
    echo "INSERT INTO map_location(xLoc,yLoc) VALUES ($x,$y)"; 
    $y++;
    }
    $x++;
} 
```

我正在尝试使用PHP脚本批量生成SQL语句以生成从0到6的x，y坐标的所有可能组合。那应该是总共49个组合，我不想一个一个地插入它们. 我正在努力弄清楚为什么这是一个无限循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:54:29.610

这个说法：

```
while ($x < 6); 
```

基本上是这样的：

```
while ($x < 6) { } 
```

这是一个~~无限~~的无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:53:51.017

你的第一个之后似乎有一个分号`while`，从逻辑上讲，

```
$x = 0; 
while ( $x < 6 ); 
// the above statement is always going to be true because x = 0 (and 0 is less than 6), hence, always going to loop. 
```

删除分号，你应该设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:00:27.313

尝试这个：

```
for ($x=0;$x<=6;$x++)

    for ($y=0;$y<=6;$y++)

         echo "INSERT INTO map_location(xLoc,yLoc) VALUES ($x,$y) <br />"; 
```

# ios - 关于 .h 和 .m 文件（如何管理）

> ID：16218047
> 
> 赞同：1
> 
> 时间：2013-04-25T14:51:45.193
> 
> 标签：ios, objective-c

嘿有经验的程序员！

我想问你一些关于干净代码的事情:)

我想保持我的代码干净并使它变得更好，所以这就是我的问题：

1）我应该把#imports放在哪里？我的原则：（而且我认为它们不好）

*   #import 框架应始终位于 .h 中
*   #import .h 文件应始终在 .m 中
*   .h 文件应该只有@class，而不是导入（不包括 UIKit 等框架）
*   代表应该在.m

    ```
    @interface ViewController() <UIAlertViewDelegate> 
    @end 
    ```

2）我应该把我的实例变量放在哪里？

*   私有变量和受保护变量必须在 .m 中
*   公共必须在 .h 中

3）我应该把我的方法放在哪里？

*   在 .h 中公开
*   .m 中的私有（是的，我知道我的“私有方法”并不是真正私有的，只是隐藏了）

（顺便说一句，这很明显）

4)#defines 呢？

*   全局 - 始终在 .h 中
*   仅在该类中使用 - 始终在 .m 中

5）我应该把 NSNotification 全局标识符放在哪里以及如何组织它们

*   #define NSNotificationDataSourceDidLoadData @"NSNotificationDataSourceDidLoadData" in .h 文件中将发送此通知的类

但 ....

*   苹果在 .h 文件中有很多私人的东西
*   在大多数情况下，我的 .h 文件只是.. EMPTY :)

一年前，我遇到了另一种情况——**一切**都在 .h 中，但我认为这也很糟糕

该怎么办？你使用什么原则？谢谢！

那是关于编码风格的问题，而不是关于“如何使其可编译”的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:03:41.823

这是我的做法：

*   通常`#import <Foundation/Foundation.h>`还是`#import <UIKit/UIKit.h>`进入 .pch 文件。没有头文件或实现文件再次执行这些导入（使 iOS 和 Mac OS X 之间的代码共享更容易一点）。
*   在 .h 文件中：
    *   仅在绝对必要时才导入其他 .h 文件，例如因为它们定义了类以外的类型（枚举、结构、具有 typedef 的所有内容），然后在当前 .h 文件中使用这些类型。
    *   类是前向声明的 ( `@class Foo;`) 以避免拉入其他 .h 文件。
    *   接口只包含其他类可以访问的东西！这里没有私人物品！
*   在 .m 文件中：
    *   包括您需要的所有 .h 文件。但不是更多;-)
    *   私有实例变量和属性在类扩展 ( `@interface Foo ()`) 中定义。
    *   私有方法不再需要“前向声明”，所以不要这样做。

在极少数情况下，一个类包含一些类应该访问但“普通”用户不应该访问的一些东西，我创建`foo_protected.h`具有定义“受保护”方法的类类别的标题。

关于`#define`s 的一句话：尽可能避免使用它们。如果可能，请使用`const`变量或`enum`s，因为附加类型信息可以帮助编译器以这种方式捕获更多错误。例如，使用`enum`s 有一个很好的优势，如果你有 a`switch`但没有处理 的所有值，你会收到警告`enum`。如果您添加一个新值，您将在忘记处理它们的任何地方收到警告，这是您在 s 中没有得到`#define`的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T15:00:34.830

就个人而言，我认为答案很简单。现在可以在 .m 文件中声明实例变量，并且可以在*.m*文件`@implementation`的类扩展中声明属性和协议采用，所以我不会在*.h*文件中放置*任何**我*不必放在那里的东西。

 **** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T15:05:31.000

> 导入框架应始终在 .h

没有为什么？

> 导入 .h 文件应始终在 .m 中

这很模糊。如果您需要在头文件中导入某些内容怎么办？你想继承一个类，你做什么？`#import "SomeClass.h"`在标题中。

> .h 文件应该只有@class，而不是导入（不包括 UIKit 等框架）

无脑。（对不起，确实如此。请参阅上面的推理。）

> 2）我应该把我的实例变量放在哪里？

由于其他类确实不应该访问 ivars （即建议不要让您的 ivars `public`），您可以将它们放在任何地方：标头很好（并且对于与 v1.0 脆弱的运行时 API 兼容很有用），但是您也可以将所有内容都放在类扩展中。

> 3）我应该把我的方法放在哪里？

你说对了，差不多。

> 4)#defines 呢？

这也很好，就我而言。基本上，将定义和枚举放在它们需要可见的地方。

> Apple 在 .h 文件中有很多私人内容在大多数情况下，我的 .h 文件只是.. EMPTY :)

好吧，即使是苹果也不是很符合他们的风格。始终如一。

空标题？如果您不需要标题，请不要使用标题。使用标头为您的类、函数和类型声明提供接口。***

# c# - 检查表单中的空字段

> ID：16218055
> 
> 赞同：-3
> 
> 时间：2013-04-25T14:52:11.047
> 
> 标签：c#, wpf, constraints

是否可以检查任何空文本框的表单，而不必使用 if 来检查每个单独的文本框？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:56:07.950

我对 WPF 不太熟悉，但您可能会尝试获取表单中的子元素列表，并为每个元素检查它们是否属于`Textbox`. 如果是这样，请执行您的验证。

# c - 在没有填充的情况下处理 C 中的位数组

> ID：16218063
> 
> 赞同：3
> 
> 时间：2013-04-25T14:52:32.400
> 
> 标签：c, embedded, bit

我正在编写一个在 Altera NIOS II 处理器上运行的 C 程序。该程序必须通过特定的内存位置连接到 FPGA 测试板上的 VHDL 模块。我的接口是通过一个宏提供的，它指定了一个基本内存地址。VHDL 程序员已从该基地址分配了 32 位内存，我将用二进制数据填充该基地址，这些数据分为四个“元素”，即 [0-11|12-15|16-23|24-31] .

我的问题是，将这些数组“元素”作为单独的数据类型处理的最佳方法是什么。我想将整个数组声明为一个结构来处理数据并使用位字段声明不同的字段，但我的理解是这会将填充引入 32 位数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:06:19.153

> 据我了解，[使用位域] 会将填充引入 32 位数组

使用位域不会引入填充，除非您明确要求它：语言标准禁止编译器在位域之间填充：

> **C99 标准，第 6.7.2.1.10 节：**如果剩余空间足够，则结构中紧跟另一个位字段的位字段应打包到同一单元的相邻位中。如果剩余空间不足，则将不适合的位域放入下一个单元还是与相邻单元重叠是实现定义的。单元内位域的分配顺序（高位到低位或低位到高位）是实现定义的。

您可以通过指定宽度为零的位字段来强制填充，如下所示：

```
struct hw_reg {
    int a:10;
    int :0; // Yes, this is legal.
    int b:6;
}; 
```

在您的情况下，前 12 位之后仍有足够的空间来分配接下来的 4 位，因此不会有填充。如果您需要以不同方式拆分寄存器（例如，12-5-7-8），则填充的使用将由实现定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:59:04.397

> 二进制数据分成四个“元素”，即[0-11|12-15|16-23|24-31]。

我会尝试

```
struct vhdl_data {
    uint32_t a : 12;   // bits  0-11
    uint32_t b :  4;   // bits 12-15
    uint32_t c :  8;   // bits 16-23
    uint32_t d :  8;   // bits 24-31
}; 
```

# signalr - SignalR 是否适用于 40 系列？

> ID：16218064
> 
> 赞同：0
> 
> 时间：2013-04-25T14:52:33.243
> 
> 标签：signalr, series-40

我正在尝试使用 SignalR，但我想知道 40 系列是否支持它，特别是诺基亚 Asha 手机是否支持它。有谁知道？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T02:25:44.330

答案是肯定的，我使用诺基亚网络工具成功地让它工作了。请参阅[此博客文章](http://agilefromthegroundup.blogspot.com/2012/09/getting-signalr-and-phonegap-working.html)，了解您需要执行哪些操作才能使其正常工作。

# java - ArrayList 在 do..while 循环中未按预期工作

> ID：16218066
> 
> 赞同：1
> 
> 时间：2013-04-25T14:52:37.320
> 
> 标签：java, string, arraylist, do-while

我有以下循环，它创建了一个完全适合屏幕的字符串，可以说它创建了一个页面。

```
 for (int i = 0; i < totalLine; i++) {

        temp = enterLine(mTextView, textToBeShown, i);
            full = full + temp;

    } 
```

所以在迭代完成后`full`保留一页。

我想要做的是创建一个外部迭代，它允许我创建多个页面，要创建的页面数量没有定义。因此，如果没有更多页面要创建，则需要停止迭代。

我尝试了以下代码，但由于某种原因，在调用页面时`Pages.get(1)`它会给出整个字符串，而不仅仅是`full`/ 页面。例如，如果 i 三个字符串已添加到`ArrayList` **页面**中，则将有三个字符串，`ArrayList`但它们都具有相同的值。

通过对 的一些测试`Log`，我知道第一次迭代运行良好，并且`full`在第一次迭代中给出了预期值的含义，第二`do`次迭代也给出了预期值`full`等等。

```
 do{
    for (int i = 0; i < totalLine; i++) {

        temp = enterLine(mTextView, textToBeShown, i);
        if(temp.trim().length() == 0){
            break;
        }else{
            full = full + temp;
        }
    }
    Pages.add(full); 
```

所以问题是我做错了什么`ArrayList`，为什么它没有按我的预期工作。

**编辑**

这是`enterLine`代码： More`Log`的使用感觉不需要全部显示。

```
public String enterLine(TextView mTextView, String textBeShown, int i){

        String A;
        int number = mTextView.getPaint().breakText(textToBeShown, 0, textToBeShown.length(),true,mTextView.getWidth(), null);

        if(textToBeShown.substring(number-1,number) != " "){
            number = textToBeShown.substring(0,number).lastIndexOf(" ");
            Log.e("TAG1", "Found " + i);
        }

        A = (textToBeShown.substring(0, number) + "\n");
        Log.e(TAG, textToBeShown.substring(0, number));
        textToBeShown = textToBeShown.substring(number, textToBeShown.length());
        return A;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:04:22.123

从它的外观来看，它不是您的数组列表，而是您的循环。Add 将一个元素添加到 arraylist，get(index) 从列表中获取第 index 个元素。那里没问题。

您的问题是它在循环之后将完整添加到页面，此时完整已经包含所有内容。将 pages.add 放入循环中，它将被修复。确保每次迭代都完全重置。将 full = "" 放在循环的开头。那时应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:19:32.333

```
do{
    full=""
    for (int i = 0; i < totalLine; i++) {
        temp = enterLine(mTextView, textToBeShown, i);
        if(temp.trim().length() == 0){
            break;
        }else{
            full = full + temp;
        }
    }
    Pages.add(full);
}while(...) 
```

或更好

```
do{
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < totalLine; i++) {
        temp = enterLine(mTextView, textToBeShown, i));
        if(temp.trim().length() == 0){
            break;
        }else{
            builder.append(temp);
        }
    }
    Pages.add(builder.toString());
}while(...) 
```

# apache - 如何阻止具有“无数据”IP 地址的攻击者，这怎么可能？

> ID：16218078
> 
> 赞同：1
> 
> 时间：2013-04-25T14:53:09.497
> 
> 标签：apache, .htaccess, cpanel

我有一个具有“无数据”IP 地址的攻击者访问我的网站，我查看了 cpanel 最新访问者统计信息，但我不知道这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:35:03.487

如果有攻击者并且您阻止了他的 IP 地址，他只会使用代理。你真的不能那样赢。只要确保你没有任何明显的安全漏洞，最终他会放弃并离开。根据他试图获取的信息的敏感程度，请务必注意它是否被访问，或者您的网站是否发生变化，但除此之外，让小家伙自己累死。

# c++ - URI 错误时如何处理来自 StorageFile::OpenAsync 的异常

> ID：16218082
> 
> 赞同：1
> 
> 时间：2013-04-25T14:53:20.127
> 
> 标签：c++, file-io, windows-8, exception-handling, concurrency-runtime

我有一段代码可以在 URI 有效时从 http URI 正确加载图像，但我无法弄清楚如何在 URI 无效时捕获 OpenAsync 抛出的异常（结果为 404）。

问题是当包含对 OpenAsync 的调用的 lambda 退出时，会抛出异常；在 try/catch 块中不会引发异常。

问题是：

捕获 StorageFile::OpenAsync 抛出的异常的正确方法是什么？

```
auto bm = ref new BitmapImage();
try {
    Uri^ uri = ref new Uri("http://invaliduri.tumblr.com/avatar/128");

    auto task = Concurrency::create_task(CreateStreamedFileFromUriAsync("temp-web-file.png", uri, nullptr));

    task.then([] (StorageFile^ file) {
        try {
            return file->OpenAsync(FileAccessMode::Read);
        } catch (...) {
            // this does not catch the exception because the exception
            //   occurs after this lambda is exitted
        }
    }).then([bm](IRandomAccessStream^ inputStream) {
        try {
            return bm->SetSourceAsync(inputStream);
        } catch (...) {
            // this does not catch the exception because the exception
            //   occurs before this lambda is entered
        }
    });
} catch (...) {
    // and obviously this would not catch the exception
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-11T21:25:45.157

3年后我有这个问题。我参考[了这篇文章](https://msdn.microsoft.com/windows/uwp/threading-async/asynchronous-programming-in-cpp-universal-windows-platform-apps)。然后，我的情况如下解决，

```
#include<ppltasks.h>
...
auto file = ref new Windows::Foundation::Uri::Uri("ms-appx:///SomeFile.txt");
concurrency::create_task(Windows::Storage::StorageFile::GetFileFromApplicationUriAsync(data))
.then([](Windows::Storage::StorageFile^ f) {
    return Windows::Storage::FileIO::ReadTextAsync(f);
})
.then([this](String^ s) {
    this->someFileContent = s;
})
.then([](concurrency::task<void> t) {
    try {
        t.get();
    } catch(Platform::COMException^ e) {
        OutputDebugString(e->Message->Data());
    }
}); 
```

此异步任务链可能会失败`GetFileFromApplicationUriAsync`或`ReadTextAsync`抛出异常。关键是当抛出时唯一匹配的`then(...)`原型是最后一个。进入`try`块时，`task::get`代表您重新抛出并发类捕获的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T20:36:44.070

```
task.then([] (StorageFile^ file) {  // this is where the exception is actually thrown 
```

该行最有可能引发异常，因为为了能够将 StorageFile 传递给 lambda，.then 正在对任务执行非显式 get()。您正在使用所谓的“价值延续”，而您可能想要“任务延续”并在那里检查异常。

```
auto task = Concurrency::create_task(CreateStreamedFileFromUriAsync("temp-web-file.png", uri, nullptr));

task.then([] (concurrency::task<StorageFile^> fileTask) {

    StorageFile^ file;

    try 
    {
        file = fileTask.get(); // this is what actually throws if Uri is wrong

        create_task(file->OpenAsync(FileAccessMode::Read)).then(/* ... */);

    } catch (...) 
    {
        // nothing to do here
    }
 }); 
```

# xpages - 很多字段会导致部分刷新变慢吗？

> ID：16218089
> 
> 赞同：2
> 
> 时间：2013-04-25T14:53:46.020
> 
> 标签：xpages

我的表单上有很多字段。不完全确定有多少，但如果没有结束，它必须接近 100。

我有一个字段的更改事件，使用以下公式对计算字段进行部分刷新。

```
return document1.getItemValueString("txtCustomScore"); 
```

`txtCustomScore`是有事件的字段。

更新此字段需要 3-4 秒。所有其他字段是否会以某种方式影响刷新该字段所需的时间？需要3-4秒。

我什至尝试过 `getValue`而不是`getItemValueString`. 正如此线程中所建议的那样： [从富文本控件中使用 replaceItemValue 设置文档字段？](https://stackoverflow.com/questions/15774972/setting-a-document-field-with-replaceitemvalue-from-a-rich-text-control)

但是更新计算域仍然需要 3-4 秒。

除了从表单中删除字段之外，还有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:33:17.173

是的，它确实。即使对于部分刷新，所有组件值都会被评估并构建服务器端结果树。正如汤米建议的那样，部分执行模式可能是您的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T20:43:59.137

我强烈建议您观看 XPages Masterclass 视频系列 1（请参阅：[http](http://tonymcguckin.wordpress.com/2013/04/22/xpages-masterclass-series-1/) ://tonymcguckin.wordpress.com/2013/04/22/xpages-masterclass-series-1/ ）。

然后，您将能够自省 XPage 请求处理生命周期阶段并分析您的应用程序。这将揭示处理成本背后的确切原因。

# opencv - 如何为 OpenCV 创建 CSV 文件

> ID：16218090
> 
> 赞同：-4
> 
> 时间：2013-04-25T14:53:49.317
> 
> 标签：opencv

我正在阅读 OpenCV 上的面部识别，它要求我为我的项目使用 CSV 文件。我正在使用 Ubuntu 12.04，我认为它告诉我使用 Python 编写代码。我不知道代码，我想要的是将自己的图像放入 CSV 文件并让它工作。我怎么做？我只有 C++ 背景，我不知道该怎么做。有人可以教我如何制作其中一个文件吗？我已经google了很长时间，但没有结果。

[http://docs.opencv.org/trunk/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:57:38.440

这里的[CSV](https://en.wikipedia.org/wiki/Comma-separated_values)文件用于定义学习数据库`FaceRecognition`，它只是一个图像文件列表和一个相应的主题 ID：

```
/path/to/subject1image1.jpg;0
/path/to/subject1image2.jpg;0
/path/to/subject1image3.jpg;0
...
/path/to/subject2image1.jpg;1
/path/to/subject2image2.jpg;1
...
/path/to/subject3image1.jpg;2
... 
```

如果你有时间，你可以手动完成，或者你可以使用他们的 python 脚本。

要使用脚本，您只需尊重文件层次结构`/basepath/<subject>/<image.ext>`，然后只需运行脚本，`python`它就会生成相应的 CSV 文件。

# session - 为什么我的 AppFabric 缓存中有多个缓存项具有相同的键？

> ID：16218092
> 
> 赞同：2
> 
> 时间：2013-04-25T14:53:54.233
> 
> 标签：session, caching, appfabric, distributed-caching, appfabric-cache

我在两台服务器上有我的网站代码，我想要它们之间的共享缓存，所以我使用的是 Microsoft AppFabric。我只希望缓存中有一个项目——不是每个站点访问者一个项目，总共只有一个项目。

我用来尝试完成此操作的代码如下，但是，它没有按照我想要的方式工作。我认为问题在于缓存中有很多项目，尽管它们都具有相同的密钥。但这可能是正在发生的其他事情。有关详细信息，请参阅代码注释。

在`Web.config`：

```
<dataCacheClient>
    <hosts>
      <host name="MyHost1" cachePort="22233"/>
      <host name="MyHost2" cachePort="22233"/>
    </hosts>
    <securityProperties mode="None" protectionLevel="None" />
</dataCacheClient>
...
<system.web>
    <sessionState mode="InProc" customProvider="AppFabricCacheSessionStoreProvider">
        <providers>
            <add
                name="AppFabricCacheSessionStoreProvider"
                type="Microsoft.ApplicationServer.Caching.DataCacheSessionStoreProvider"
                cacheName="MyCache"
                sharedId="MySharedApp"/>
        </providers>
    </sessionState>
    ...
</system.web> 
```

在`Global.asax.cs`：

```
private static DataCacheFactory _cacheFactory = new DataCacheFactory();
private static DataCache _cache;

private void RegisterCacheEntry(){
    try
    {
        // Set up cache
        _cache = _cacheFactory.GetCache("MyCache");

        // Prevent duplicate key addition
        if (_cache.GetCacheItem(CacheItemKey) != null || _cache.Get(CacheItemKey) != null) 
            return;

        // Add item to cache
        _cache.Add(CacheItemKey, CacheItem, TimeSpan.FromMinutes(10));

        // When the cache item is removed, the callback:
        // 1) sends me an email 
        // 2) adds the same item with the same key to the cache again.
        // So I SHOULD be getting one email every 10 minutes.
        // However, it starts with one, but the number of emails that I get increases every 10 minutes.
        // i.e., I get one email at time t=0, two emails at t=1, three at t=2, then four, etc.
        _cache.AddItemLevelCallback(CacheItemKey, DataCacheOperations.RemoveItem, CacheItemRemovedCallback);
    }
    catch (Exception e){}
} 
```

如果您想了解有关我在做什么以及为什么要执行此操作的更多信息，我正在尝试使用[此处](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)所述的缓存超时来模拟 Windows 服务。但我试图让它在两台服务器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T11:07:46.800

您在 web.config 中添加了 AppFabric 会话状态提供程序。所有会话都将保留在集群中：这就是您有多个缓存项的原因。

此外，您需要在系统中添加额外的错误管理，如此[处](http://msdn.microsoft.com/en-us/library/hh334285%28v=azure.10%29.aspx)所述：

> 缓存主机只能在内存中保存一定数量的缓存操作。根据系统负载，某些缓存客户端在缓存主机队列中被截断之前可能不会收到通知。当由于缓存服务器故障而导致数据丢失而集群的其余部分仍在运行时，缓存客户端也可能会错过通知。在这些情况下，您的缓存客户端可以通过使用失败通知来发现它错过了一些缓存通知。您的应用程序可以使用 AddFailureNotificationCallback 方法添加回调以接收失败通知。有关更多信息，请参阅添加失败通知回调

**编辑：** `CacheItemRemovedCallback`提供从缓存中删除的密钥。检查它是否始终相同。我还建议不要将分布式缓存限制为单个项目：如果其他人在缓存中添加某些内容，您的系统将失败。

# java - 如何在mongodb中使用where条件从集合中获取不同的值？

> ID：16218093
> 
> 赞同：4
> 
> 时间：2013-04-25T14:53:54.757
> 
> 标签：java, mongodb, morphia

如何从具有 where 条件的集合中获取不同的值？

例如，我有 Worker 类，其中包含 status 和 workerId 以及其他字段，在这里我想检索具有 status="ACTIVE" 的不同 workerId；

我已经进行了足够的谷歌搜索，但找不到任何解决方案

任何帮助，将不胜感激

提前致谢！

编辑

对不起，伙计们，我没有正确提出我的问题。我希望使用 morphia 而不是使用 mongodb 本机查询来完成此操作。

这可以使用 MapReduce 完成吗？请帮帮我！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-10T06:56:49.203

很抱歉延迟发布，

```
BasicDBObject dbObject=new BasicDBObject();
dbObject.append("status","ACTIVE"); 
```

这`dbObject`将作为 where 条件，

```
DBCollection dBCollection = datastore.getCollection(MyEntity.class);
List id=dBCollection.distinct("id",dbObject); 
```

此 ID 列表将包含所有不同的 ID，其`status="ACTIVE"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:27:27.240

[distinct](http://docs.mongodb.org/manual/reference/command/distinct/)作为命令而不是查询被支持（不知道为什么）。试试下面

```
db.runCommand ( 
    { 
        distinct: 'name-of-collection',
        key: 'worker-id',
        query: { 'status': 'ACTIVE' }
    } 
) 
```

# ios - TableView 滚动指示器与标题重叠

> ID：16218098
> 
> 赞同：2
> 
> 时间：2013-04-25T14:54:06.910
> 
> 标签：ios, ios5, uiscrollview, uitableview

![iphone应用程序表头](https://i.stack.imgur.com/gmhY6.png)

**情况**

做我需要的`TableView`一切，因为它

1.  允许我将行动画化（不容易用 a 完成`UIView`）
2.  允许在顶部使用非滚动标题。

**问题**

1.  滚动指示器（右上角）覆盖了标题。我预计它会停在标题的底部，但显然情况并非如此。
2.  如果我允许弹跳并且您下拉得太远，则标题会随着内容一起下拉。那不行。

**实现**

我可以通过切换到 UIView 来解决我当前的问题，但随后会引入其他问题。

1.  如果我使用 UIView 为行设置动画，我必须跟踪所有视图的位置，并确保在引入新视图时它们都移动正确的距离。
2.  1 还不错，但考虑到屏幕旋转的问题，它成为了虫子安家的好地方。

**问题**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:05:44.857

对于滚动指示器，您可以使用：

```
 tableView.scrollIndicatorInsets = UIEdgeInsetsMake(yourHeaderHeight, 0, 0, 0); 
```

如果您不希望在启用表格视图弹跳时移动标题，您应该用 UIView 替换标题，并且表格视图应该从 UIView 的底部开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:59:25.023

也许你可以做这样的事情

```
containerView
    |
    |--- headerView (subview of containerView)
    | 
    |--- tableView/scrollView (subview of containerView) 
```

因此，您将 与 分开，`headerView`并且`tableview`滚动视图指示器将仅位于 tableView 上。这是假设您的意思是表视图标题而不是节标题。

# spring-data-jpa - QueryDSL NoSuchMethodError: jpa.JPQLQuery.from()

> ID：16218100
> 
> 赞同：3
> 
> 时间：2013-04-25T14:54:13.127
> 
> 标签：spring-data-jpa, nosuchmethoderror, querydsl

试图让 Query Dsl（版本 3.1.1）和 Spring Data JPA（版本 1.3.1.RELEASE）启动并运行..

我的问题是这个错误信息......

```
 java.lang.NoSuchMethodError: com.mysema.query.jpa.JPQLQuery.from([Lcom/mysema/query/types/EntityPath;)Lcom/mysema/query/jpa/JPQLCommonQuery;
  at org.springframework.data.jpa.repository.support.Querydsl.createQuery(Querydsl.java:88)
  at org.springframework.data.jpa.repository.support.QueryDslJpaRepository.createQuery(QueryDslJ  paRepository.java:131) 
```

好像是版本兼容冲突。但是我应该为 Spring Data JPA 1.3.1.RELEASE 使用什么版本的 QueryDSL？

我希望在[这里](http://repo1.maven.org/maven2/org/springframework/data/spring-data-jpa/1.3.1.RELEASE/spring-data-jpa-1.3.1.RELEASE.pom)找到答案，但我看不到使用了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:01:06.333

> 但是我应该为 Spring Data JPA 1.3.1.RELEASE 使用什么版本的 QueryDSL？

查询DSL 2.9

# javascript - 我可以使用 javascript 在 Mobile Safari (iphone) VS UIWebView (WebKit) 上检测用户吗？

> ID：16218103
> 
> 赞同：0
> 
> 时间：2013-04-25T14:54:14.583
> 
> 标签：javascript, iphone, ios, objective-c, uiwebview

我希望能够区分在 iphone 或 ipad 中包含的普通 Safari 上访问我的网站的用户与在原生 iOS 应用程序中通过 UIWebView 访问相同内容的用户之间的区别。

我希望有一种方法可以使用 javascript 和用户代理字符串？任何正确方向的进一步调查将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T15:53:30.957

我建议您在本机 iOS 应用程序的 URL 字符串中发送一个 GET 变量，并将该值保存到您的网络服务器上的会话变量中。然后使用 session 变量为 Mobile Safari 和 UIWebview 做不同的事情

当您请求您的站点时，在您的 iOS 应用程序中添加获取变量

**iOS**

```
NSString *urlQueryString = @"?BrowserType=iOSNative";
NSString *URLPath = [NSString stringWithFormat:@"http://www.yoursite.com/%@",urlQueryString ];
NSURL *requestURL = [NSURL URLWithString:URLPath];
NSURLRequest *request = [NSURLRequest requestWithURL:requestURL];
[self.webview loadRequest:request]; 
```

**PHP**

```
if(isset($_REQUEST['BrowserType']))
{
    //Used for tracking is this is an iOS Native App user.   
    //This will not be set by the mobile browser user
    $browserType = filter_var($_REQUEST['BrowserType'], FILTER_SANITIZE_STRING);
    $_SESSION['BrowserType']=$browserType;
}
if ($_SESSION['BrowserType']=="iOSNative")
{
    echo 'This is the native App and shouldn't display on the mobile page';
} 
```

# c# - 将 XML 数据作为 C# 中的列保存到数据库中

> ID：16218104
> 
> 赞同：0
> 
> 时间：2013-04-25T14:54:15.237
> 
> 标签：c#, xml, sql-server-2008

我正在编写一个 C# 应用程序来监视新创建的 xml 文件，并且我想将这些 XML 文件中的一些数据插入到 SQL 数据库中。一个文件是数据库中的一行。

最好和最简单的方法是什么？

到目前为止，我所做的是用我想要的 XML 列定义一个 DataTable。之后，我在 DataSet 上使用 ReadXML。这给了我一个包含一个表和一个行的数据集，以及我想要的列。到目前为止它是完美的。但我找不到只将这个新 DataRow 插入我的 MSSQL 数据库的好方法。我还没有该行的任何唯一 ID。这会让事情变得更容易吗？我不想将我的数据集与数据库映射，我只是在做一个插入......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:03:57.217

您可以执行以下操作来获取 ID：

```
 string query = "INSERT INTO Employees (EmployeeID, Name, Phone) "+
                   "OUTPUT INSERTED.EmployeeID "+
                   "VALUES (NEWID(), 'John Kris', '99-99999')";
    Guid lastId = (Guid)command.ExecuteScalar(); 
```

你做的其他事情对我来说听起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T11:31:11.323

我使用 LINQ to SQL 来解决这个问题。我设置它有点像这里描述的： [LINQ to SQL](https://stackoverflow.com/a/11295371/1049723)。在我使用的数据上下文中[InsertOnSubmit](http://msdn.microsoft.com/en-us/library/bb763516.aspx)。

# javascript - 从 localhost 测试 Google Analytics

> ID：16218105
> 
> 赞同：2
> 
> 时间：2013-04-25T14:54:16.330
> 
> 标签：javascript, html, seo, google-analytics

我已经看到了：[你能在 localhost 地址上测试谷歌分析吗？](https://stackoverflow.com/questions/4375447/can-you-test-google-analytics-on-a-localhost-address)并[让谷歌分析按照建议的方式查看测试服务器](https://stackoverflow.com/questions/10317190/getting-google-analytics-to-see-a-test-server)，但没有任何效果。

我做了什么：

*   编辑了我的主机文件以具有几个额外的域。
*   在我的本地 Apache httpd 服务器上创建虚拟主机。
*   在 Google Analytics 中创建了一个帐户，在该帐户中创建了几个“属性”（如在属于我的网站中）。
*   编写了一个测试 HTML 页面，该页面将向 Google Analytic 服务报告页面视图。

所有列表如下所示：

`c:/Windows/System32/drivers/etc/hosts`

```
127.0.0.1   ad-test             # for testing ad banners
127.0.0.1   testing.foo.tv      # for testing ad banners
127.0.0.1   testing.foo-sdk.tv  # for testing ad banners 
```

相关部分`httpd.conf`

```
<VirtualHost *:80>
ServerName ad-test
DocumentRoot D:/cygwin/home/wvxvw/projects/AdModule
   <Directory "D:/cygwin/home/wvxvw/projects/AdModule">
        AllowOverride All
        Order Allow,Deny
        Allow from all
        Require all granted
    </Directory>
</VirtualHost> 
```

*（对于所有其他主机看起来都一样）*

该`AdModule`目录有以下`index.html`文件：

```
<html><head></head><body>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXX-3']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script></body></html> 
```

*（还有一个使用较新 API 的变体，但为了简短起见，我没有发布它）*

上述 HTML 页面中的`document.domain`属性设置为我在 Google Analytics（分析）帐户设置中指定的域。

当我查看发送到 Google Analytics 服务的请求时，我可以看到 JavaScript 正在加载，然后是 gif 图像。我可以在没有错误的情况下调用其他 API 函数，但仪表板中没有显示任何内容。

**更新**

两天后我回到了我的电脑上，这是我在谷歌分析页面上找到的：

![在此处输入图像描述](https://i.stack.imgur.com/Gb9lJ.png)

问题解决了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:39:30.283

您可以使用左侧导航中的“实时”-> 概览来查看实时数据

# c++ - 多线程编程 - ACE_thread_t 或 ACE_Task

> ID：16218112
> 
> 赞同：1
> 
> 时间：2013-04-25T14:54:28.950
> 
> 标签：c++, multithreading, ace

我想使用 ACE 编写一个多线程进程（在 linux 上）。在c++中实现线程时使用ACE_Task和ACE_thread_t有什么区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:06:18.517

ACE_thread_t 实际上是一个低级句柄。要使用 ACE 实现多线程应用程序，请实现从 ACE_Task 或 ACE_Task_Base 派生的类。有关如何执行此操作的大量示例，请参阅 ACE_wrappers/examples/Threads 或 ACE_wrappers/tests。

# jquery - 未捕获的类型错误：对象 [object Object] 没有“live”方法

> ID：16218120
> 
> 赞同：16
> 
> 时间：2013-04-25T14:54:50.190
> 
> 标签：jquery, object, jquery-validation-engine

收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'live' 
```

从此 JavaScript 和 jQuery 代码：

```
init: function(options) {
  var form = this;
  if (!form.data('jqv') || form.data('jqv') == null ) {
    options = methods._saveOptions(form, options);
    // bind all formError elements to close on click
    $(".formError").live("click", function() {

      //Getting error here:
      //Uncaught TypeError: Object [object Object] has no method 'live'

    });
  }
  return this;
}; 
```

为什么`live`缺少方法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-25T14:57:49.737

`.live`在 jquery 1.9 中被**删除**

请参阅文档：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

* * *

尝试`.on`改用：

```
$(document).on('click', '.formError', function(){ 
   //your event function
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T14:57:04.493

根据[文档](http://api.jquery.com/live/)，`.live()`自 1.7 以来已被弃用并在 1.9 中*删除。*

您要么必须降级 jQuery，要么使用更新版本的验证插件（如果可用）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-12T14:17:45.530

> **.live() removed**

The .live() method has been deprecated since jQuery 1.7 and has been removed in 1.9\. We recommend upgrading code to use the .on() method instead.

To exactly match

```
 $("a.foo").live("click", fn) 
```

You should write

```
 $(document).on("click", "a.foo", fn). 
```

For more information, see the [.on() documentation](http://api.jquery.com/on/). In the meantime, the jQuery Migrate plugin can be additionally used to restore the .live() functionality.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T10:00:03.603

有一个 migrate 库可以帮助您在升级时从以前的 jQuery 版本过渡：[jQuery migrate plugin](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin/ "jQuery 迁移插件")。您需要在 jQuery 之后将它包含在您的源代码中。从 jQuery 网站：

> jQuery Migrate 插件的未压缩开发版本包括控制台日志输出，用于在使用特定已弃用和/或删除的功能时发出警告。这使得它作为一种迁移调试工具很有价值，用于查找和修复现有 jQuery 代码和插件中的问题。它可以用于 jQuery 核心版本的诊断，一直到 1.6.4。
> 
> 该插件的压缩版本不会生成任何日志输出，并且可以在需要 jQuery 1.9 或更高版本但还必须使用较旧的不兼容 jQuery 代码或插件时在生产站点上使用。理想情况下，这只会用作短期解决方案，但这是由您做出的决定。

# javascript - Javascript+Python：将数组发送到 Python 脚本，将结果返回给 Javascript

> ID：16218123
> 
> 赞同：0
> 
> 时间：2013-04-25T14:54:55.223
> 
> 标签：javascript, python, nltk

我想建立一个网页，通过 Javascript API 获取一些 Facebook 状态更新并将它们排序到一个数组中。然后我想把这个数组发送到一个 Python 脚本，它可以专门用[NLTK 做语言分析。](http://nltk.org/)在 Python 中获得合适的结果后，我想将该脚本的结果返回到 Javascript 以显示给用户等。这听起来可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:56:39.640

是的，完全。查看 Google App Engine 以构建此类功能。特别是查看这些链接：

App Engine 上的 NLTK：在 Google App Engine和[http://code.google.com/p/nltk-gae/](http://code.google.com/p/nltk-gae/)[上使用 Python NLTK (2.0b5)](https://stackoverflow.com/questions/1286301/using-the-python-nltk-2-0b5-on-the-google-app-engine)

App Engine 上的 Facebook API：[https ://developers.google.com/appengine/articles/shelftalkers](https://developers.google.com/appengine/articles/shelftalkers)

我假设您希望使其具有交互性，因为您提到了“用户”一词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:01:48.603

从 Javascript 调用服务是一个非常常见的问题。解决它的一种方法是编写一种称为 Web 服务的特定类型的网站，它会使流程类似于...

*   Javascript 使用 Ajax（异步 Javascript 和 XML）向您的 Web 服务发送 HTTP 请求，其中包含您要处理的信息。
*   Webservice 接收请求并执行请求的处理（例如通过调用 NLTK）
*   生成的数据通过同一个 Http 连接发回
*   调用一个 javascript 函数并传递数据的结果

发送请求的最简单方法是使用[jQuery](http://jquery.com/)。格式化要来回传递的数据的最简单方法是 JSON（JavaScript 对象表示法）。

一个示例调用看起来像这样......

```
$.json({
  url: "/url/of/Webservice",
  data: {
         "SomeKey": "SomeValue",
         "SomeList": ["Item1", "Item2", "Item3"]
         /*... etc */
        }
}).done(function(response) {
  //Assuming a response that looks like this: {"Result": "Some Result"}
  alert("The Webservice said: " + response.Result);
}); 
```

如何实现 Web 服务取决于您。如果您想使用 Python，[Django](https://www.djangoproject.com/)是帮助您入门的众多优秀框架之一

# android - 是否可以创建一个 Android 服务来处理自定义 APN 以修复 ICS 限制？

> ID：16218124
> 
> 赞同：0
> 
> 时间：2013-04-25T14:55:03.370
> 
> 标签：android, service, android-4.0-ice-cream-sandwich

我有一个在 Android 2.3 上运行良好的应用程序，但我的客户计划很快将他的设备升级到 Android 4.0.4。

他们的设备有一个自定义固件，里面有我的软件。该应用程序会自动创建自定义 APN 并具有其他功能。

我在 ICS 中有两个限制：如果用户不手动启动程序，程序将不会运行，并且我无法创建自定义 APN，因为权限已从 Android 中删除。

我正在考虑创建一个新应用程序（一项服务）来创建 APN 并更改旧应用程序以调用这个新应用程序。

新的将使用相同的固件证书进行签名。阅读一些帖子，如果您的软件使用系统证书签名，您可以创建 APN。这是正确的吗？

另一个问题：这个新服务，显然没有界面，所以用户不会手动启动一次。我可以编写一个应用程序来启动它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T12:06:23.493

如果有人想知道答案：您需要使用系统证书并将您的软件放入固件中。

# jms - 这种使客户端 ID 和订阅名称在多线程环境中唯一的方法是否有效？

> ID：16218131
> 
> 赞同：0
> 
> 时间：2013-04-25T14:55:18.073
> 
> 标签：jms, jms-topic

我正在构建一个应用程序，它将使用来自多个主题的消息，转换消息，然后将它们发布到多个主题。查找 connectionfactory 对象后，我正在使用此代码

```
Connection con = cf.createConnection();
String clientId = "APP"+ con.hashCode();
con.setClientId(clientId); 
```

在创建持久订阅时，我正在使用这个 MessageConsumer consumer = session.CreateDurableSubscriber(topic,"DurableSubscribtion"+clientId, topic.getSelector, true);

每个连接都应该有唯一的客户端 ID 和订阅名称。

关闭连接后，我尝试使用新创建的连接的 hashCode 再次访问相同的订阅，这种方法会起作用吗？或者我是否需要指定订阅名称，如 SUBSCRIBER1、SUBSCRIBER3、SUBSCRIBER2 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:28:37.490

是的，您必须指定一个“可重复”的客户端 ID，以便下次可以显示相同的客户端 ID。否则，您将创建订阅的负载（可能是 Integer.MAX_VALUE？），这些订阅将全部失效。

您需要设计一个有意义的命名方案。例如，如果您订阅的每个主题都有一个订阅者，只需将客户端 ID 命名为**<topic_name> +“durSub-Admin”**或其他名称。

如果您使用的是 ActiveMQ，由于[VirtualTopics](http://activemq.apache.org/virtual-destinations.html) ，这会更容易一些。

# postgresql - Rails 3 ActiveRecord save() 方法和自动增量主键字段

> ID：16218133
> 
> 赞同：0
> 
> 时间：2013-04-25T14:55:21.430
> 
> 标签：postgresql, activerecord, ruby-on-rails-3.1

我将在 2.2.2 上运行的 Rails 站点迁移到 Rails 3.1。

我现在注意到，在 Rails 3 上，过去在 2.2.2 中工作的 save() 调用 (INSERTS) 在 3.1 中没有

数据库中的 id 字段是主键，因此它具有以下属性：

非空
自增

![在此处输入图像描述](https://i.stack.imgur.com/sstWB.png)

现在，当 save() 方法在这些表上运行时，我得到：

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  null value in column "id" violates not-null constraint 
```

嗯，所以我查看了 save() 创建的生成 SQL，实际上它在列列表中包含 id 字段并将其分配为零：

```
 PG::Error: ERROR:  null value in column "id" violates not-null constraint
: INSERT INTO "server_updates" ("action", "created_at", "field_number", "id", "status", "table_number", "value") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id" 
```

所以，我的问题是如何让 ActiveRecord 在从 save() 调用生成 SQL 时不包含 id 列？

我当然不想从列中删除 NOT NULL 规则，也不想用原始 SQL 查询重写所有这些 save() 调用。

添加`set_primary_key "id"`到模型中解决了这个问题，但对我来说似乎真的很混乱和不规则/红宝石

你们都做了什么来解决这个问题？

感谢您的帮助

这是出现错误的模型之一：

```
class ServerUpdate < ActiveRecord::Base

   def ServerUpdate.run_code code
     su = ServerUpdate.new
     su.action = 3 # run code
     su.value = code
     su.status = 1
     su.save
   end

   def ServerUpdate.new_insert_for_table table
      su = ServerUpdate.new
      su.action = 1  # Create New Record
      su.table_number = table.to_i
      su.save
      return su
   end

   def ServerUpdate.new_update_for_table_where_field_equals_value table, field, value
      su = ServerUpdate.new
      su.action = 2  # Update Record
      su.table_number = table.to_i
      su.field_number = field.to_i
      su.value = value.to_s
      su.status = 1 ## This used to be in process() method below
      su.save
      return su
   end

   def ServerUpdate.new_delete_for_table_where_field_equals_value table, field, value
      su = ServerUpdate.new
      su.action = 999  # Delete Record
      su.table_number = table.to_i
      su.field_number = field.to_i
      su.value = value.to_s
      su.save
      return su
   end

   def set_value_for_field value, field, behavior=0
      sui = ServerUpdateItem.new

      sui.server_update_id = self.id
      sui.field_number = field.to_i
      sui.value = value.to_s

      b = 0
      b = 1 if behavior == "prepend" or behavior == 1
      b = 2 if behavior == "append" or behavior == 2
      sui.behavior = b

      sui.save
   end

   def process
      We are now setting status=1 in method:  
      ServerUpdate.new_update_for_table_where_field_equals_value table, field, value
     self.status = 1
     self.save
   end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:07:29.130

添加`set_primary_key "id"`到模型中解决了这个问题，但对我来说似乎真的很乱而且没必要

# java - 将 OWL 公理转换为曼彻斯特语法

> ID：16218139
> 
> 赞同：2
> 
> 时间：2013-04-25T14:55:40.190
> 
> 标签：java, owl, owl-api

有没有办法将 OWL 公理转换为曼彻斯特语法？我知道 OWL-API 将允许您将曼彻斯特语法中的句子解析为 OWL 函数式语法，但我需要完全相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:42:01.373

非常感谢您为我指明了正确的方向，这就是我解决问题的方法。

`public static void main(String[] args) throws ParserException, OWLOntologyCreationException {`

 ````
 File file=new File("ontology/pizza.owl");
    OWLOntologyManager manager;
    OWLOntology localOntology=null;
    OWLDataFactory factory ;

    try {

        //loading the ontology
        manager=OWLManager.createOWLOntologyManager();

        try {
            localOntology = manager.loadOntologyFromOntologyDocument(file);
        } catch (OWLOntologyCreationException e) {
            e.printStackTrace();
        }

        factory = localOntology.getOWLOntologyManager().getOWLDataFactory();

        OWLOntologyFormat format = manager.getOntologyFormat(localOntology);
        System.out.println("    format: " + format);

        ManchesterOWLSyntaxOntologyFormat manSyntaxFormat = new ManchesterOWLSyntaxOntologyFormat();
        if(format.isPrefixOWLOntologyFormat()) {
            manSyntaxFormat.copyPrefixesFrom(format.asPrefixOWLOntologyFormat());
        }

        manager.setOntologyFormat(localOntology, manSyntaxFormat);
        manager.saveOntology(localOntology, manSyntaxFormat);
        System.out.println("Manchester syntax: --- saved in Manchester.owl");

        ManchesterOWLSyntaxOWLObjectRendererImpl rendering = new ManchesterOWLSyntaxOWLObjectRendererImpl();

        OWLClass c1 = factory.getOWLClass(IRI.create("http://www.co-ode.org/ontologies/pizza/pizza.owl#IceCream"));

        Set<OWLClassExpression> c1eqclasses = c1.getEquivalentClasses(localOntology);
        for(OWLClassExpression c1e : c1eqclasses)
            System.out.println("Equivalent: "+rendering.render(c1e));

        c1eqclasses = c1.getDisjointClasses(localOntology);
        for(OWLClassExpression c1e : c1eqclasses)
            System.out.println("Disjoint: "+rendering.render(c1e));

        c1eqclasses = c1.getSubClasses(localOntology);
        for(OWLClassExpression c1e : c1eqclasses)
            System.out.println("Subclass: "+rendering.render(c1e));

        c1eqclasses = c1.getSuperClasses(localOntology);
        for(OWLClassExpression c1e : c1eqclasses)
            System.out.println("Superclass: "+rendering.render(c1e));

    }
    catch (OWLOntologyStorageException e) {
        System.out.println("Could not save ontology: " + e.getMessage());
    }

} 
````  `* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:16:21.447

OWL-API 还允许您读取以函数语法编写的本体并将其转换为曼彻斯特语法。

将本体编写为以曼彻斯特语法序列化的文件的代码示例：

```
File file = new File("/home/foo/bar.owl");
OWLOntologyFormat format = manager.getOntologyFormat(ontology);
ManchesterOWLSyntaxOntologyFormat manSyntaxFormat =
                                         new ManchesterOWLSyntaxOntologyFormat();
manager.saveOntology(ontology, manSyntaxFormat, IRI.create(file)); 
```

`manager`并且`ontology`是来自 OWL-API 的标准对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T22:35:43.033

在新版本的OWL API（我用的是4.0.1）中，使用这些方法

```
Set<OWLEquivalentAxiom> axioms = localOntology.getEquivalentClassesAxiom(c1); 
```

反而

```
Set<OWLClassExpression> c1eqclasses = c1.getEquivalentClasses(localOntology); 
```

对于其他呼叫也是如此。`

# java - apache ant：响应密码提示

> ID：16218141
> 
> 赞同：0
> 
> 时间：2013-04-25T14:55:48.697
> 
> 标签：java, ant

我正在使用 ant 将应用程序部署到 Glassfish 应用程序服务器，该服务器需要管理员用户/密码才能登录。您能解释一下如何在没有人工干预的情况下从 ant build.xml 本身提供密码吗？

（我了解不建议使用硬编码密码，但请忽略此问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:19:31.583

Ant`<input>`任务可以从用户那里读取密码，或者如果属性已经存在则跳过它。从它的文档：

```
<input
    message="Please enter db-username:"
    addproperty="db.user"
    defaultvalue="Scott-Tiger"
/> 
```

如果属性 db.user 已经存在，则不执行任何操作。如果没有，它会提示用户输入用户名，并将 db.user 属性设置为它。如果用户只是键入一个返回，它使用默认值。如果您是从 IDE 执行此操作，请查看其文档以设置正确的输入处理程序。对于密码，使用`<handler type="secure"/>`用作内部元素。

现在，您想将密码存储在单独的文件中。这不是一个好主意，但人们会这样做。所以，使用`<property>`任务：

```
<property name="db.password" value="CompletelyInsecure"/> <!-- or -->
<property file="db.properties"/> <!-- Where db.properties contains the db codes. --> 
```

对于您的情况，请使用这两种方法。我会使用一个属性文件，然后`<input>`任务。

为了了解这有多复杂，Maven 构建系统建议人们加密所有密码数据，并将解密密钥存储在随身携带的记忆棒上。

# c# - 我的 win 表单应用程序如何与 signalr 交互

> ID：16218142
> 
> 赞同：0
> 
> 时间：2013-04-25T14:55:50.940
> 
> 标签：c#, asp.net, winforms, signalr

我开发了一个基于 asp.net 和 signalr 的聊天应用程序，人们可以在其中向特定用户发送消息。

现在我想开发一个 win 表单聊天应用程序，它将连接到我基于 asp.net 的信号器集线器并获取所有登录用户并在网格中显示这些用户。

所以只要告诉我信号器是否可行，winform和网络表单用户可以相互交谈，但我的信号器集线器将只在网络中。如果是，请指导我如何使用 winform 开发此类应用程序，因为 Web 部件已准备好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:37:15.700

Mitul Suther 有[一篇](http://mscodingblog.blogspot.nl/2012/12/testing-signalr-in-wpf-console-and.html)关于在 WPF 中使用 SignalR的博客

# jenkins - Jenkins 从节点不会启动

> ID：16218143
> 
> 赞同：0
> 
> 时间：2013-04-25T14:56:02.230
> 
> 标签：jenkins, nodes, disconnect, slave

我设置了一个简单的 Jenkins 作业，出于某种原因，办公室中的某些计算机无法连接为从节点。
- 一台电脑连接正常，没有问题。
- 一个使用 java web start 连接，然后立即断开连接
- 一个尝试使用 java web start 运行，即使在重新安装 java 后也被带到 java 下载页面。

# vim - 仅当 Vim 中存在映射时如何取消映射

> ID：16218151
> 
> 赞同：27
> 
> 时间：2013-04-25T14:56:35.630
> 
> 标签：vim

[作为How do I override gf with vim-rails](https://stackoverflow.com/questions/15430440/how-do-i-override-gf-with-vim-rails)中接受的答案的后续，多次编辑同一个文件会导致以下错误：

```
Error detected while processing User Auto commands for "Rails.javascript.coffee*":
E31 : No such mapping 
```

我的违规行`vimrc`是

```
:autocmd User Rails.javascript.coffee* nunmap <buffer> gf 
```

仅当映射已存在时，如何通过取消映射来避免此错误？

（注意：多次编辑同一个文件可能看起来很奇怪，但我相信这是用 ack.vim 或 ag.vim 搜索的副作用）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-25T15:07:54.753

您可以使用 来检查映射，但通常的解决方案是通过在命令之前`if ! empty(maparg('gf', 'n')) ...`添加来抑制错误。`silent!``nunmap <buffer> gf`

# javascript - jQuery中的意外标记

> ID：16218158
> 
> 赞同：0
> 
> 时间：2013-04-25T14:56:49.717
> 
> 标签：javascript, jquery

[该站点](http://www.jamesperrett.co.uk/)运行良好，但突然出现错误。

意外的令牌（ - 这是什么意思？在我看来是正确的，并且已经工作了好几个月了。

```
<script>
    function (){      <--"Uncaught SyntaxError: Unexpected token (" here
        $(".message").focus(function() {
            $("#bubble").fadeOut();
        }).blur(function() {
            $("#bubble").fadeIn();
        });
    })();
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:57:55.950

您尚未指定函数名称...

IE：

```
function functionname() { ...} 
```

您可以稍后将其称为`functionname();`

我猜你正在尝试使用`(function () { ... })();`（IIFE）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T14:58:54.627

您忘记在之前添加一个左括号`function(`：

```
(function (){
    $(".message").focus(function() {
    $("#bubble").fadeOut();
   }).blur(function() {
    $("#bubble").fadeIn();
   });
})(); 
```

对于每个可能会想的人：*“但不，她只是忘记了函数名！！111eleven”*：

我假设她想使用[立即调用函数表达式](http://en.wikipedia.org/wiki/Immediately-invoked_function_expression)(IIFE)，这是一种 JavaScript 设计模式。

# gwt - 在 Selenium Grid 2 (WebDriver) 测试中识别 SmartGWT SelectItem 的方法

> ID：16218163
> 
> 赞同：1
> 
> 时间：2013-04-25T14:57:08.360
> 
> 标签：gwt, selenium-webdriver, smartgwt, selenium-grid

我正在尝试将 ID 设置为 SelectItem（更准确地说是其选项列表），以便能够在 Selenium Grid 2 测试期间识别它并且找不到任何方法。我需要的是找到列表并在上面选择（单击）一个值。

尝试和失败的意图：

1.  用于此目的的常用方法，`setID()`在`ensureDebugId()`SelectItem 中不可用
2.  该方法`setName()`不会在生成的 HTML 中留下任何痕迹
3.  在包含 SelectItem 的表单上找不到选项列表。SelectItem 由单独的元素组成：

    *   **标签**（标题）
    *   **textInput**（选定的值）
    *   **选择器**（显示选项下拉列表的按钮）
    *   **pickList**（选项下拉列表）

    如果您为包含此组件的表单设置一个 ID 以便通过它进行本地化，`className`您将无法发现**pickList**，因为它是在单击选择器并且生成的代码被放置在表单边界之外时生成的，因此您可以在表格中找不到它。可以在整个文档中找到它，但如果有多个列表，则无法知道哪个列表属于哪个 SelectItem。

欢迎任何建议。先感谢您。

**更新**：我想澄清一些事情以避免误解：我知道对于不同的 Selenium 工具和版本以及将它与 Smart GWT 一起使用的最佳方式有很多不同的意见。这个问题没有进入这些讨论。它仅限于问题标题中指示的边界：Selenium Grid 2 tests with WebDriver。

一些背景知识：在编码我们的 GWT 组件时，我们会用测试方法识别其中的一些（小心，不要重复）`setID()`，我们并不关心这些标识符可能会在生成的 HTML 中被读取。（由于某种原因，使用`ensureDebugId()`扭曲了我们的观点。此外，Isomorphic 的人建议忘记它，无论如何。）但`setID()`不适用于`FormItem`，即我们无法将 ID 设置为`SelectItem`（从 扩展`FormItem`）以便编写第一个测试非空选项将被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T13:18:30.550

我能找到的是 a`SelectItem`可以让您设置选择器图标名称，这是我们从未使用和/或需要的东西：

```
selectItemInstance.setPickerIconName("someName"); 
```

此名称稍后会出现在生成的 HTML 中。所以我们决定利用它并以这种方式分配一个 ID，就像`setID()`. 这些`WebDriver`方法允许您稍后`SelectItem`按照以下步骤按此名称查找元素：

`SelectItem`1)通过 ID找到表单（里面有元素）

2）找到`SelectItem`表单内的所有元素

`formElement.findElements(By.className("selectItemControl"));`

3）选择pickerIconName等于分配的ID的那个`setPickerIconName()`（循环通过找到的元素）：

```
selectItemElement.findElement(By.xpath("//*[@*='" + pickerIconNameID + "']")); 
```

4）找到后，单击它以获取生成的选项列表

```
pickerElement.click(); 
```

**注意：**选项列表***不是在第一次单击***元素之前生成的`SelectItem`，然后保持打开状态，从可见变为不可见。生成时，它超出了包含相应`SelectItem`. 这可能是个问题，因为如果窗口中有多个`SelectItem`元素（很可能），则必须找到*正确的*选项列表。可以应用几个标准来找到它。我们选择选项列表的位置作为最简单和最可靠的位置：“粘”在`SelectItem`元素上的选项列表应该是正确的。

5）在窗口中找到所有选项列表：

```
driver.findElementsByClassName("pickListMenuBody") 
```

6) 为`SelectItem`: using`getLocation()`和`getSize()`methods选择正确的选项列表，检查找到的选项列表中的哪个与通过*步骤 2 和 3*找到的元素（“selectItemControl”）`WebElement`相交/接触`SelectItem`

 *就是这样，从这里开始，只需在“listTable”中选择必要的项目（包含在选项列表元素中，即“pickListMenuBody”），您可能不止一次这样做。

请记住在搜索元素时考虑加载时间，并将您的实用程序/基础设施代码与测试代码分开，否则这将变得一团糟。

这不是最优雅的解决方案，但它对我们有用，我相信 GWT 和 Selenium 团队会及时提供更好的东西。

欢迎任何意见和建议（仅限使用 Selenium Grid 2）。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:55:09.280

这里有很多关于如何使用 Selenium 和 Smart GWT 的文档：

[http://www.smartclient.com/smartgwtee-latest/javadoc/com/smartgwt/client/docs/UsingSelenium.html](http://www.smartclient.com/smartgwtee-latest/javadoc/com/smartgwt/client/docs/UsingSelenium.html)

您不想使用您讨论过的方法。Smart GWT 生成的 DOM 被认为是内部细节，而不是直接使用 DOM，我们为您提供了一种基于抽象定位器的更强大的方法。*

# java - 同一实体的不同 json 视图

> ID：16218164
> 
> 赞同：0
> 
> 时间：2013-04-25T14:57:22.140
> 
> 标签：java, spring, rest, jboss7.x

我想知道您将如何启用同一实体的不同 json 视图（例如，公共数据和仅经过身份验证、列表视图、完整详细信息等）？

如果有 Jboss AS 7 + RestEasy 或 spring + jersey 。

我正在开发必须根据登录用户及其角色填充不同数据的应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T19:19:20.953

下面的链接可能会有所帮助

[http://wiki.fasterxml.com/JacksonJsonViews](http://wiki.fasterxml.com/JacksonJsonViews)

这详细解释了如何创建不同的视图并应用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:06:38.187

这取决于您希望如何设计您的应用程序。

这种需求的基本设计是使用会话管理为来自服务器的每个请求生成数据或 json。当请求来自浏览器时，它具有与来自同一浏览器的所有请求相关联的唯一会话。

1.  用户登录后，通过将该用户置于会话中或将布尔值置于该用户已登录的会话中，为该请求创建一个会话（该用户的手段）。

2.  因此，一旦在请求会话中设置了用户和登录的布尔值，那么来自该浏览器的每个请求都将具有这些变量可用。

3.  然后您可以通过检索会话变量基于用户和登录状态创建 JSON

# iphone - 更新现有的 iOS 应用程序

> ID：16218166
> 
> 赞同：0
> 
> 时间：2013-04-25T14:57:27.717
> 
> 标签：iphone, ios, app-store-connect

我在为客户开发 iOS 应用程序时遇到问题。我按照他的要求创建了客户应用程序的新版本，他似乎对此非常满意。现在我必须在 App Store 上发布它，唯一的问题是应用程序必须更新到更新的版本。之前的开发人员使用他自己的配置文件发布了应用程序，现在拒绝共享任何代码或配置文件。为了更准确，我没有客户端的证书、私钥和用于最初在应用商店启动应用程序的正确配置文件。如果我创建了一个全新版本的应用程序，甚至设法让以前的开发人员从应用程序商店中删除旧应用程序，客户端就会失去很多应用程序的用户。

你们能告诉我解决这个烂摊子的最好方法是什么吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:09:29.260

您将需要访问发布该应用程序的帐户。获得访问权限后，只需创建新证书和配置文件。

如果您无权访问该帐户，则无法更新该应用程序。

# https - HTTPS Web 应用程序通过 iPAD 等无线设备传输数据是否安全？

> ID：16218167
> 
> 赞同：1
> 
> 时间：2013-04-25T14:57:34.500
> 
> 标签：https, wireless

HTTPS Web 应用程序对浏览器和 Web 服务器之间的数据传输进行加密。当在 iPAD 等无线移动设备的浏览器上使用这个 HTTPS 应用程序时，数据传输是否仍然是加密的？

如果与 HTTPS 相比，无线传输加密是另一回事，对吗？

库存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:13:56.497

读[这个](http://en.wikipedia.org/wiki/OSI_model)。了解 OSI 模型将有助于了解设备如何与软件交互，反之亦然。

**编辑**
@Stock 网页中包含的数据内容由 HTTPS 协议保护。如果没有为无线配置添加保护（即 WPA、WEP 等），则仅意味着包裹 HTTPS 数据包的数据包不会被加密。来自网页的数据仍然是加密的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T20:13:00.517

这是一个经常被引用的陈述，甚至更经常实施的方法“我们正在使用 SSL 来保护所有通信，我们是安全的”。同时，关于“通道安全 vs. 代币安全”的话题发表的文章太多了，在这里重复这些论点几乎没有意义。因此，下面列出的只是单独使用通道安全性时最常见的陷阱的简要概述：

```
It provides only "point-to-point" security 
```

任何具有多个“跳”的通信都需要在沿途的每个通信节点之间建立单独的通道（和信任）。还有一个微妙的信任传递性问题，因为节点对 {A,B} 和 {B,C} 之间的信任不会自动暗示 {A,C} 信任关系。

```
Storage issue 
```

在服务器上接收到消息后（即使它不是预期的接收者），它们至少暂时以明文形式存在。将传输的信息存储在中间会加剧日志文件（任何人都可以浏览）和本地缓存中的问题或目标服务器。

看更多 ：

[https://www.owasp.org/index.php/Web_Services#Communication_security](https://www.owasp.org/index.php/Web_Services#Communication_security)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:00:14.013

就像你说的，数据在浏览器和网络服务器之间是加密的。加密将一直持续到 Web 浏览器接收到流量为止。之后，您将依靠 Web 浏览器和 Web 浏览器所在设备（在本例中为 iPad）的安全性来保护您的数据。

是的，无线传输加密是 HTTPS 之上（或之下，取决于你如何看待它）的一层。这两种加密方案应用于不同的协议层。无线传输加密仅适用于您的接入点 (AP) 和您的设备之间，因此您仍然需要 HTTPS 来保护您在服务器和 AP 之间。

# javascript - 新添加的选择选项不显示标题属性

> ID：16218171
> 
> 赞同：2
> 
> 时间：2013-04-25T14:57:45.443
> 
> 标签：javascript, jquery, html

我目前正在使用 ajax 将新选项附加到多选框，但即使我试图向它们添加标题属性，它们似乎根本没有显示。有什么我想念的吗？

![在此处输入图像描述](https://i.stack.imgur.com/T7uM5.png)

这是在 Coffeescript 中完成的：

```
$.ajax(
        type: 'get'
        url: '/Filter/LookupClassification'
        data: ( term: inputVal )
        dataType: 'json'
        success: (response)->
            select = document.getElementById('getClassBox')
            select.options.length = 0

            $.each(response, (key, value)->
                option = $(
                    '<option/>'
                    'title': value.toUpperCase()
                    'value': key
                ).text(key + ' - ' + value.toUpperCase())

                $('#getClassBox').append(option)
            )

            $('#selectClassBox option').each((index, value)->
                val1 = $(value).val()
                if $('#getClassBox option').val() is val1
                    $('#getClassBox option[value=' + val1 + ']').remove()
            )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:00:45.983

`<option>`元素不能有“title”属性。[请参阅规范。](http://dev.w3.org/html5/html-author/#the-option-element)

*编辑*——我的意思是，如果你想添加一个“title”属性是可以的，浏览器不会像在`<div>`or`<button>`元素上的“title”属性那样关注它。

*再次编辑*——你也应该忽略这一点，尽管它不在 HTML5 规范中，但`<option>`某些浏览器显然支持元素的“title”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:03:55.213

你可以简单地写这个来为你的下拉菜单添加选项：

```
select.options[select.options.length] = new Option(key + ' - ' + value.toUpperCase(), key); 
```

不要打扰标题属性。

# sql-server-2008 - SQL Server 2008 列到行数据

> ID：16218179
> 
> 赞同：0
> 
> 时间：2013-04-25T14:57:59.160
> 
> 标签：sql-server-2008, tsql

我的 SQL Server 数据库中有一个预算表，如下所示：

```
create table #cols (
   acctid int, 
   yr int, 
   pd01 numeric(15,2), 
   pd02 numeric(15,2), 
   pd03 numeric(15,2), 
          .
          .
          .
   pd13 numeric(15,2),
   primary key(acctid, yr)); 
```

我需要获取各个列中的数据并将其切换为基于行的格式表，如下所示：

```
create table #rows (
  acctid int, 
  yr int, 
  pd int, 
  amt numeric(15,2), 
  primary key(acctid, yr, pd)); 
```

现在我可以像这样运行 13 条 SQL 语句：

```
insert into #rows select acctid, yr, 1, pd01 from #cols;
    .
    .
    .
insert into #rows select acctid, yr, 13, pd13 from #cols; 
```

但我想知道是否有更有效/更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:19:48.473

另一个选择是**UNPIVOT**

```
select acctid,yr,CAST(RIGHT(pd,2) AS INT) as pd, amt
from #cols
UNPIVOT
(amt FOR pd IN ([pd01],[pd02],[pd03],..., [pd13])) unp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:00:50.567

你可以使用**联合所有**

```
insert into #rows
select acctid, yr, 1, pd01 from #cols;
union all
select acctid, yr, 2, pd02 from #cols;
union all
.....
union all
select acctid, yr, 13, pd13 from #cols; 
```

# c++ - OpenGL文本渲染示例不起作用

> ID：16218180
> 
> 赞同：0
> 
> 时间：2013-04-25T14:57:58.843
> 
> 标签：c++, opengl

我想在 OpenGL 中渲染文本。

我找到[了这个教程](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aFont_System)。我已经使用教程中提供的 fonttool 创建了字体二进制文件，我的字体渲染器似乎可以工作。但问题是，当我尝试在屏幕上渲染某些东西时，我得到的是彩色块。我认为我的问题可能出在预测中，因为他们将其留给用户设置，我不知道该怎么做。我的主要功能是使用教程提供的字体类。这里有什么问题？

编辑：它的样子：http: [//img138.imageshack.us/img138/2512/openglscreen.png](http://img138.imageshack.us/img138/2512/openglscreen.png)

```
#include "font.h"

Font * ft;

void display(void)
{
     glMatrixMode(GL_PROJECTION);
     glLoadIdentity();

     glOrtho(0, 512, 512, 0, 0, 1);
     glDisable(GL_DEPTH_TEST);
     glMatrixMode (GL_MODELVIEW);
     glClear(GL_COLOR_BUFFER_BIT);
     glLoadIdentity();
     glTranslatef(0.375, 0.375, 0);

     // Render text
     ft->Draw_String("OpenGL text rendering hello world", 5, 50);

     glutSwapBuffers();
   }
   void reshape(int w, int h)
   {
       glViewport(0, 0, w, h);
   }

   int main(int argc, char *argv[])
   {
       glutInit(&argc, argv);
       // creaing font renderer
       ft = new Font("compiledfont.c");

       glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);  
       glutInitWindowPosition(200,200);
       glutInitWindowSize(512,512);
       glutCreateWindow("OpenGL window");
       glutDisplayFunc(display);
       glutReshapeFunc(reshape);
       glutMainLoop();

       delete ft;
       return 0;
   } 
```

# python - 如何在 neo4django 中扩展关系类

> ID：16218181
> 
> 赞同：2
> 
> 时间：2013-04-25T14:58:00.033
> 
> 标签：python, neo4j, neo4django

我已经看到关系属性尚未在 neo4django 中实现。[此线程](https://stackoverflow.com/questions/13092066/neo4django-relationship-properties)中公开的解决方法是为每个与属性的关系创建一个新的节点类型。

我负担不起太多的计算，所以我不想使用这种技术。在阅读我看到的[源代码](https://github.com/scholrly/neo4django/blob/master/neo4django/db/models/relationships.py)`Relationship`时，作为类的文档字符串，这个：`"""Extend to add properties to relationships."""`

我的问题是，如何做到这一点？从哪里开始添加至少一个属性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T17:12:23.613

尽管有文档字符串，但这仍然是一个[悬而未决的问题](https://github.com/scholrly/neo4django/issues/1)——实际上是该项目最古老的问题。您可能有一种方法可以通过扩展`Relationship`and来完成它`BoundRelationship`，但在我能够关闭该问题之前，这并不容易。

我认为这个问题可能不会成为使用该项目的瓶颈，因为您可以为节点存储提供 Neo4j 比关系存储更多的内存来解决它。当然是 YMMV。

不过，我知道这感觉像是一种黑客行为。如果您确实需要自定义关系属性，最短路径可能会下降到 REST 客户端级别。要创建与属性的关系，您可以执行类似的操作

```
class Person(NodeModel):
  name = StringProperty()
  friends = Relationship('self', rel_type='friends_with')

pete = Person.objects.create(name='Pete')
dave = Person.objects.create(name='Dave')

# from the neo4j-rest-client [docs][2]
pete.node.relationships.create("friends_with", dave.node, since=123456789, introduced_at="Christmas party") 
```

WDYT？

# c# - C# var 关键字的使用

> ID：16218182
> 
> 赞同：0
> 
> 时间：2013-04-25T14:58:00.270
> 
> 标签：c#, var

我真的很困惑`var`. 我知道，这使代码更易于阅读，但是速度和内存呢？`C#`
`var`

一个。

1.  `var a = 100;`
2.  `int b = 100;`
3.  `int c; c = 100;`

B.

1.  `var listA = new List<obj>();`
2.  `List<obj>listB = new List<obj>();`
3.  `List<obj>listC; listC = new List<obj>();`

哪个更快？
有依赖类型吗？
在这两种情况下分配了多少内存以及何时分配了内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:59:57.337

> 哪个更快？

两者都不是，它们是一样的。

> 有依赖类型吗？

我不确定你在这里问什么，但是这些代码片段一旦被编译就没有区别，所以我不会。

> 在这两种情况下分配了多少内存以及何时分配了内存？

对所有人来说都是一样的。例如`int`，所有情况下都是 32 位。对于`List`示例，所有三个都将分配一个单词作为引用，加上实际列表实例的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:58:50.783

它纯粹是编译步骤功能。编译器推断左侧表达式的类型，并将其用作变量类型。所以产生的 IL 将是相同的。

所以：

```
var list1 = new List<int>();
List<int> list2 = new List<int>(); 
```

完全相同。但是我可以看到一些示例，其中指定类型会产生一些影响，例如：

```
var i1 = 5;
int i2 = 5;
//vs:
var i2 = 5;
object i2 = 5; 
```

因此，如果实际表达式类型与声明的变量类型完全相同，那么它们是完全相同的。但`var`如果表达式类型和变量类型不同，则可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:13:48.780

什么时候使用`var`，什么地方不使用。（因为这里已经回答了所有其他问题）为什么`var`？- 匿名类型和 LINQ

匿名（临时使用）类型：

```
var v = new { Amount = 108, Message = "Hello" }; 
```

一般的：

利用：

```
var myList = new List<string>(); 
```

这里很明显是什么类型`myList`- 代码阅读是好的

不要使用：

```
var properties = myPropertyHandler.GetProperties(); 
```

在这里，您不知道 GetProperties 返回什么类型 - 代码阅读不好。宣布：

```
AppProperties properties =  myPropertyHandler.GetProperties(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:01:54.820

`var`关键字只是一个语法糖。

它不存在于 IL 中，因此没有区别。

重复主题：

[在 C# 中使用“var”关键字会影响性能吗？](https://stackoverflow.com/questions/1756392/is-there-a-performance-hit-in-using-the-var-keyword-in-c)

[使用'var'会影响性能吗？](https://stackoverflow.com/questions/356846/c-sharp-var-vs-specific-type-performance)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T15:01:09.217

var 关键字只有在 C# 编译器生成程序集的 IL 代码时才起作用，要创建的变量类型由表达式右侧计算（必须指定且不能为空）。Var 不会影响运行时的任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T15:03:41.707

`var`是从右边语句返回的任何内容中推断出来的。这是由编译器完成的，所以当程序实际运行时，没有区别。

但是请注意，如果语句产生意外类型，您将不会收到编译器错误。

# python - 在 Jython 中使用 .pyd 库

> ID：16218183
> 
> 赞同：1
> 
> 时间：2013-04-25T14:58:03.050
> 
> 标签：python, jython, cpython, pyd

实际上我即将开始一个项目，在公司我们使用java作为owr web app server（IBM WebSpher）的主要技术，但现在我们需要将现有技术与最近购买并用C开发的新产品集成/CPython 并在 C 中提供 SDK 并在 CPython（.pyd 文件）中实现，现在我想知道 jython 是否支持这种库，实际上我正在使用 Jython 2.7b1？或者有没有办法使用这些库？

谢谢和问候， Serch

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:05:26.130

从[Jython 常见问题](http://www.jython.org/archive/22/userfaq.html#is-jython-the-same-language-as-python)...

> Jython 程序不能使用用 C 编写的 CPython 扩展模块。这些模块通常具有扩展名为 .pyc、.pyd 或 .dll 的文件。如果您想使用这样的模块，您应该寻找用纯 Python 或 Java 编写的等效模块。

唯一的解决方法是使用[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)将 CPython 嵌入 Java，尽管它可能会破坏使用 Jython 的目的。

# php - 如何更快地连接多个表

> ID：16218184
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:58:04.977
> 
> 标签：php, mysql, inner-join

我正在处理一个过于松散和复杂的旧结构和糟糕的设计数据库。可悲的是，我必须这样做。:(

我的 PHP 使用旧方法从表中查询每个信息。然后我用join重新编码。但是大问题出现了。查询这些信息需要近一分钟（有时更多）。

这是我的代码：

```
select *, car_db.id as cid, tbl_province.province_name as prov_name,
config_car_color.color_title as clr_title, 
config_car_color.description as clr_desc, 
car_viewer.vwr_id as viewers 
from car_db 
inner join tbl_province on tbl_province.province_code=car_db.prov 
inner join config_car_color on config_car_color.id=car_db.color 
inner join car_viewer on car_viewer.vwr_cid=car_db.id 
where car_db.tid='$_tid' 
```

从这段代码的最新查询开始，它花了 3.37 秒。但通常运行代码至少需要 30 秒。

问题是您能否建议我更快地处理这些行的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:00:58.060

创建以下索引：

```
car_db (tid)
tbl_province (province_code) -- might be PK
config_car_color (id) -- might be PK
car_viewer (vwr_cid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:04:08.407

首先，我可以看到这里发生了冗余。由于 * 会从所有表中选择所有内容，因此您仍然要再次选择其中一些列。尝试从这些表中仅选择您需要的列。

# c# - 从后面的代码访问信号器集线器类方法

> ID：16218187
> 
> 赞同：0
> 
> 时间：2013-04-25T14:58:14.550
> 
> 标签：c#, asp.net, signalr, code-behind

是否可以从 web 表单页面后面的代码执行在信号器中心声明的公共方法？

我找到了如何从使用后面的代码向客户端发送消息的示例

```
var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();

context.Clients.All.exampleMethod(); 
```

但我想访问集线器中的公共方法，例如从数据表`ConcurrentDictionary`或数据表返回一组与用户关联的客户端 ID。

有谁知道这是否可能，如果可以，如何在不向客户端广播消息并再次返回的情况下进行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:10:30.740

您应该在连接时注册客户端连接 ID。一旦你有了那个id；您可以使用

```
var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
context.Clients[connectionid].exampleMethod(); 
```

如果我没有 100% 正确，请原谅我，但我在火车上

这个链接应该给你一些帮助...... [http://www.tugberkugurlu.com/archive/mapping-asp-net-signalr-connections-to-real-application-users](http://www.tugberkugurlu.com/archive/mapping-asp-net-signalr-connections-to-real-application-users)

# jquery - 动态设置 Highcharts 系列和类别数据

> ID：16218189
> 
> 赞同：3
> 
> 时间：2013-04-25T14:58:17.743
> 
> 标签：jquery, highcharts

我尝试使用以下代码通过 AJAX 调用更新图表

```
$j(document).ready(function () {
    $j("#filter").click(function () {
        BuildReport();
    });

    $j("#container").highcharts({
        chart: {
            type: 'column',
            marginRight: 130,
            marginBottom: 100
        },
        title: {
            text: 'SEs open by Group',
            x: -20 //center
        },
        yAxis: {
            title: {
                text: ''
            },
            min: 0,
            allowDecimals: false
        },
        xAxis: {},
        tooltip: {
            formatter: function () {
                return '<b>' + this.x + '</b><br/>' +
                            this.series.name + ': ' + this.y + '<br/>' +
                            'Total: ' + this.point.stackTotal;
            }
        },
        plotOptions: {
            column: {
                stacking: 'normal',
                cursor: 'pointer',
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: {}
    });

    BuildReport();
});

function SetChartSeries(series) {
    debugger;
    chart = $j("#container").highcharts();
    chart.xAxis[0].setCategories(getReportCategories(series));
    chart.series = $j.map(series, function (item) {
        return {
            name: item.Name,
            color: item.Colour,
            data: $j.map(item.Items, function (list) {
                return {
                    name: list.Category,
                    y: list.Value,
                    id: list.ID
                };
            })
        };
    });
}

function getReportCategories(data) {
    var catArray = [];
    $j.each(data, function (index, value) {
        $j.each(value.Items, function (index, value) {
            if ($j.inArray(value.Category, catArray)) {
                catArray.push(value.Category);
            }
        });
    });

    return catArray;
}

function BuildReport() {
    $j.ajax({
        url: "ChartDataHandler.ashx",
        dataType: "json",
        cache: false,
        success: function (data) {
            SetChartSeries(data.Series);
        }
    });
} 
```

当页面加载或单击过滤器按钮时，BuildReport 调用处理程序并将系列数据传递给 SetChartSeries。从这里我可以看到图表属性已设置，但从未绘制图表。我在做一些明显错误的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T10:26:50.027

如果要创建新系列，则需要使用[Chart.addSeries()](http://api.highcharts.com/highcharts#Chart.addSeries%28%29)方法

如果要在现有系列中设置新数据，则需要使用[Series.setData()](http://api.highcharts.com/highcharts#Series.setData%28%29) 方法。

如我所见，您为每个请求和使用`addSeries`方法创建新系列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T05:51:45.490

如果要动态设置类别数据，需要使用 Axis.update() 方法

```
chart.xAxis[0].update({categories:arrayname,tickInterval:20},true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T18:02:34.630

以下是我为动态更新系列所做的。默认行为将重绘图表。检查[https://api.highcharts.com/class-reference/Highcharts.Chart#update](https://api.highcharts.com/class-reference/Highcharts.Chart#update)

```
$('#YourContainer').highcharts().update( {
    series:[{
      name: 'New Legend',
      data: [{
          name: 'New Category',
          y: data
      }]
    ]}
}) 
```

# java - Hibernate - 更新具有多对多关系的对象

> ID：16218190
> 
> 赞同：0
> 
> 时间：2013-04-25T14:58:20.847
> 
> 标签：java, hibernate, many-to-many

我有班级人员和班级角色。Person 和 Role 之间存在多对多的双向关系。如果我创建新的人，从数据库加载现有角色并将角色设置为人，它就可以工作。但是，如果我从数据库加载现有人员（已经有一些角色），从数据库加载另一个角色，将角色设置为人员 - 我得到 org.hibernate.NonUniqueObjectException 一个具有相同标识符值的不同对象已经与会话关联：角色。

我不知道问题出在哪里。

有我的 hbm.xml

```
<class name="Person" table="person">
  <id column="ID" name="id" type="java.lang.Integer">
    <generator class="native"/>
  </id>
  <property column="Name" name="name" type="string"/>
  <property column="Surname" name="surname" type="string"/>
 <property column="Email" name="email" type="string"/>    
 <set  name="roles" table="role_person" inverse="false" lazy="true" fetch="select" cascade="all">
    <key column="Person_ID"/>
    <many-to-many class="Role" column="Role_ID"/>
 </set>
</class>

<class name="Role" table="role">
  <id column="ID" name="id" type="java.lang.Integer">
    <generator class="native"/>
  </id>
  <property column="Name" name="name" type="string"/> 
  <set name="people" table="role_person" inverse="true" lazy="true" fetch="select">
    <key column="Person_ID"/>
    <many-to-many class="Role" column="Role_ID"/>
  </set>
 </class> 
```

我的代码：

```
Person person1 = LoadObjects.getPerson( with some ID); // this person has already role author
Person person2 = LoadObjects.getPerson( with another ID); // this person has already role owner 

Role roleOwner = LoadObjects.getOwnerRole();
Role roleAuthor = LoadObjects.getAuthorRole(); 
```

// 这个条件不能正常工作，它们总是正确的，即使它们不应该是正确的，但在这个例子中它们应该是正确的

```
if (!person1.getRoles().contains(roleOwner)) {
        person1.getRoles().add(roleOwner);
}
if (!person2.getRoles().contains(roleAuthor)) {
        person2.getRoles().add(roleAuthor);
}

SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
Session session = sessionFactory.openSession();
session.beginTransaction();

session.saveOrUpdate(person1);
session.saveOrUpdate(person2);

session.getTransaction().commit();
session.close(); 
```

有 getOwnerRole 方法：

```
 public static Role getOwnerRole() {
    Session s = sessionFactory.openSession();
    s.beginTransaction();
    List a = s.createQuery("from Role where name = 'Owner'").list();
    Role role = (Role) a.get(0);
    Hibernate.initialize(role.getPeople());
    s.close();
    return (Role) a.get(0);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:10:59.037

在您的 HBM 映射中存在一些错误。认为definatel那不是问题的原因。

```
<class name="Person" table="person">
  <id column="ID" name="id" type="java.lang.Integer">
    <generator class="native"/>
  </id>
  <property column="Name" name="name" type="string"/>
  <property column="Surname" name="surname" type="string"/>
 <property column="Email" name="email" type="string"/>    
 <set  name="roles" table="role_person" inverse="false" lazy="true" fetch="select" cascade="all">
    <key column="Person_ID"/> // This Should be ID As person id column name is ID..
    <many-to-many class="Role" column="Role_ID"/>// This Should be ID As well as ROLE id column name is ID..
 </set>
</class>

<class name="Role" table="role">
  <id column="ID" name="id" type="java.lang.Integer">
    <generator class="native"/>
  </id>
  <property column="Name" name="name" type="string"/> 
  <set name="people" table="role_person" inverse="true" lazy="true" fetch="select">
    <key column="Person_ID"/>// This Should be ID As ROLE id column name is ID..
    <many-to-many class="Role" column="Role_ID"/>// This Should be ID As well, as People  id column name is ID..
  </set>
 </class> 
```

# android - Android在按钮单击时播放声音

> ID：16218198
> 
> 赞同：1
> 
> 时间：2013-04-25T14:59:01.293
> 
> 标签：android, media-player

我试图在按钮单击时多次播放两个不同的 .wav 文件。我想播放 sound1 然后 sound2 然后 sound1 等等..这是代码片段。

```
 protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_box);
        mp = MediaPlayer.create(Box.this, R.drawable.sound1);
        mp2 = MediaPlayer.create(Box.this, R.drawable.sound2);
        handler = new Handler();

        sButton.setOnClickListener(new View.OnClickListener() 
        {
            @Override
            public void onClick(View v) 
            {
                rounds = new Integer(et.getText().toString());
                for(int j = 0; j < rounds; j ++)
                {
                    f();
                    g();
                }

            }
        });
    }

    public void f()
    {
        cdt1 =  new CountDownTimer(5000, 1000)
        {
             public void onTick(long millisUntilFinished) 
             {

             }
             public void onFinish() 
             {   
                 mp.setLooping(true);
                 mp.setVolume(1.0f, 1.0f);
                 mp.start();
             }}.start();

    }
    public void g()
    {
        cdt =  new CountDownTimer(7000, 1000)
        {
             public void onTick(long millisUntilFinished) 
             {

             }
             public void onFinish() 
             {   
                 mp2.setLooping(true);
                 mp2.setVolume(1.0f, 1.0f);
                 mp2.start();
             }}.start();     
    } 
```

每次播放声音时都要重置它们吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:24:47.980

you can check the mediaplayer if its still playing with something like:

```
if (mp.isPlaying()) {
    //do nothing
} else {
    //start new sound
} 
```

# java - JGraphT 中的简单无向无标签图不起作用？什么是 edgeClass 参数？

> ID：16218204
> 
> 赞同：1
> 
> 时间：2013-04-25T14:59:22.997
> 
> 标签：java, reflection, graph, jgrapht

我想`A<->B`在 JGraphT 0.8.3 中制作一个简单的无向无标签（边没有标签）图：

```
import org.jgrapht.graph.DefaultEdge;
import org.jgrapht.graph.SimpleGraph;

class A {
    public static void main(String[] args) {
        SimpleGraph<String, String> sg =
            new SimpleGraph<String, String>(String.class);
        sg.addVertex("A");
        sg.addVertex("B");
        sg.addEdge("A", "B");
        System.out.println("edges of A: " + sg.edgesOf("A"));
        System.out.println("edges of B: " + sg.edgesOf("B"));
    }
} 
```

我得到这个输出：

```
$ java -cp 'jgrapht-jdk1.6.jar:.' A
edges of A: []
edges of B: [] 
```

为什么顶点的边集是`A`空`B`的？还有for的类参数是`SimpleGraph`什么？它似乎是边缘的类型，但是由于我这里的边缘没有标记，所以肯定没关系吗？所有的图类似乎都将边 ( `edgeClass`) 的类作为参数。我找不到文档`edgeClass`中描述的位置。

* * *

我发现如果我标记边缘（将`addEdge`线更改为`sg.addEdge("A", "B", "an_edge");`）然后它可以工作......但我不想标记边缘......

```
$ java -cp 'jgrapht-jdk1.6.jar:.' A
edges of A: [an_edge]
edges of B: [an_edge] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:10:52.943

您不必标记边缘。您的方法中的问题是您告诉图形使用字符串作为边类型。一个适当的标准。做事的方式是：

```
 SimpleGraph<String, DefaultEdge> sg = new SimpleGraph<String, DefaultEdge>(DefaultEdge.class);
    sg.addVertex("A");
    sg.addVertex("B");
    sg.addVertex("C");
    sg.addEdge("A", "B");
    sg.addEdge("B", "C");
    System.out.println("graph: " + sg.toString());
    System.out.println("edges of A: " + sg.edgesOf("A"));
    System.out.println("edges of B: " + sg.edgesOf("B")); 
```

这将为您提供以下输出：

```
graph: ([A, B, C], [{A,B}, {B,C}])
edges of A: [(A : B)]
edges of B: [(A : B), (B : C)] 
```

因此，要解决此问题，有必要将您的边缘类切换到 DefaultEdge，如代码所示。

# vba - 访问 VBA - 在 Excel Sheet1 列 A 中搜索值并将相应的值放入 B 列？

> ID：16218205
> 
> 赞同：2
> 
> 时间：2013-04-25T14:59:22.613
> 
> 标签：vba, ms-access

在 VBA 中，我创建了一个`Collection`名为 C，如下所示：

```
Key      Item
Thing1   12
Thing2   15
Thing4   7
Thing6   3 
```

在我的 Excel 文件中，Sheet1 如下所示：

```
A        B
Thing1
Thing2
Thing3
Thing4
Thing5
Thing6 
```

我想查看 C 中的每个键，搜索 A 列，如果找到，将项目放入 B 列。结果将是：

```
A        B
Thing1   12
Thing2   15
Thing3
Thing4   7
Thing5
Thing6   3 
```

我最初以为我会通过循环遍历集合、获取密钥、在“A:A”中搜索匹配项，然后将“B#”设置为 Item 值来做到这一点……只是不确定语法。多读后，我认为`Key`无法访问该值。

```
Dim Count as Integer
Dim ItemToFind as String
Dim i as Integer

For Count = 1 to C.Count
    ItemToFind = C.Key(count) 'I don't think C.Key is a valid thing
    for i = 1 to 50 'there are less than 50 rows in Sheet1 to look thru        
        If Cells("A" & i).Value = ItemToFind Then
            Cells("B" & i).Value = C.Key(count)
        End If
    Next i
Next Count 
```

我在想也许我需要创建一个新`Class`的而不是使用`Collection`? 任何帮助，将不胜感激！

编辑：我正在尝试使用一个`Dictionary`对象。我能够将内容添加到字典并能够检索键，但是在检查 Excel 单元格值是否 = 字典键时会出现运行时错误。

我有一个名为“dict”的字典，并使用以下键和值加载它：

```
dict.Add Key:=Thing, Item:=TotalThings 
```

我正在使用此代码循环遍历 Dictionary 项目，并查看它们是否存在于工作表的 A 列中：

```
Dim Count as Integer
Dim KeyToFind as String
Dim i as Integer

For Count = 1 to dict.Count
    KeyToFind = dict.Keys(count)

    For i = 1 To 50
        If oExcel.Worksheets(1).Cells("A" & i).Value = KeyToFind Then
            oExcel.Worksheets(1).Cells("B" & i).Value = dict.Item(Count)
        End If
    Next i
Next Count 
```

在`If oExcel.Worksheets(1).Cells("A" & i).Value = KeyToFind Then`我收到运行时错误 1004：应用程序定义或对象定义错误。如果我在调试模式下将鼠标悬停在 KeyToFind 上，它确实包含字典中的第一个键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:10:07.260

我认为您通过从集合切换到字典做出了明智的选择。字典有一个`.Exists`应该有用的方法。考虑这个片段。

```
Dim dct As Object
Set dct = CreateObject("Scripting.Dictionary")
dct.Add "Thing1", 12
dct.Add "Thing2", 15
dct.Add "Thing4", 7
dct.Add "Thing6", 3
Debug.Print dct.Exists("BogusThing") ' returns False 
```

然后您可以使用`dct.Exists`工作表中的每一列 A 值...如果该键存在于字典中，则将匹配值存储到 B 列。

这可能不完全正确，但希望它足够接近让你开始。

```
Const lngRows As Long = 50
Dim objSheet As Object
Dim strKey As String

Set objSheet = oExcel.Worksheets(1) ' you know where oExcel comes from
Dim i As Long
For i = 1 To lngRows
    'strKey = objSheet.Cells("A" & i).value ' oops
    strKey = objSheet.Cells(i, 1).value
    If dct.Exists(strKey) Then
        'objSheet.Cells("B" & i).value = dct(strKey) ' oops again
        objSheet.Cells(i, 2).value = dct(strKey)
    End If
Next i 
```

# tomcat - Apache 与 mod_jk Tomcat 更改 DNS 超时 (TTL)

> ID：16218212
> 
> 赞同：0
> 
> 时间：2013-04-25T14:59:41.217
> 
> 标签：tomcat, apache2, mod-jk

我正在使用 GSLB APP 进行地理分布和负载平衡。

该APP是Apache-> Tomcat通过workers.properties中的**mod_jk**我有一些这样的：

worker.balancing.port=8009
**worker.balancing.host** =tomcats8009.gslb.domain.com
worker.balancing.type=ajp13
worker.balancing.socket_timeout=5

如果 Tomcat GSLB (tomcats8009.gslb.domain.com) 从 IP xxxx 更改为另一个 IP yyyy，则 dns 解析似乎被连接器 mod_jk 缓存，并且请求仍在询问 xxxx 。

为了解决问题，我必须“重新加载”以更新分辨率 yyyy

任何想法？Apache 或 mod_jk 连接器中是否有任何类型的 DNS 缓存？解决方案？

谢谢。
问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:38:03.490

我不知道 mod_jk 级别是否有任何属性，但您可以在 JDK 级别设置它。假设你有 Sun，参数将是 "sun.net.inetaddr.ttl" ；将其设置为零将关闭 dns 缓存。通常不建议这样做，因为关闭 dns 缓存会影响性能。

# asp.net-mvc - 如何根据 Viewbag 值有条件地对 KendoUI 网格进行分组或不分组

> ID：16218213
> 
> 赞同：0
> 
> 时间：2013-04-25T14:59:46.030
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid, viewbag

我需要将列名或值“无”传递给我的剑道网格，以便根据 Viewbag 元素的值有条件地对其进行分组。当我按预期传递它的组中的列名时。我的问题是如果传入值“无”，则不进行分组。我拥有的代码是：

```
@(Html.Kendo().Grid<dynamic>()
    .Name("exportGrid")
    .DataSource(dataSource =>
    {
        dataSource.Ajax()
        .Read("ReadGrid", "Report", new { id = Model.Inquiry_ID })
        .Group(grp => grp.Add(ViewBag.groupBy, typeof(string)))
        .Model(m =>
        {
            // Add the fields to the dynamic model
            foreach (var field in Fields)
            {
                switch (field.DATA_TYP_NUM)
                {
                    case 1: m.Field(field.INTERNL_NME, typeof(string)); break;
                    case 2: m.Field(field.INTERNL_NME, typeof(double?)); break;
                    case 3: m.Field(field.INTERNL_NME, typeof(double?)); break;
                    case 4: m.Field(field.INTERNL_NME, typeof(DateTime?)); break;
                }
            }
        })

        .ServerOperation(true);
    })
    .Groupable()
    .Filterable()
    .Sortable()
    .ColumnMenu()
    .Events(e => e.DataBound("onDataBound"))
    .Resizable(resize => resize.Columns(true))
    .Columns(columns => 
```

正如我所说 - 这很好，但我需要一种方法来排除`.Group(....)`条款`Viewbag.groupBy == "none"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:42:29.540

只需在`Group`选项中添加条件：

```
.Group(grp => {
    if(ViewBag.groupBy != "none") {
        grp.Add(ViewBag.groupBy, typeof(string));
    }
}) 
```

# algorithm - 最有效的马尔可夫链算法

> ID：16218215
> 
> 赞同：0
> 
> 时间：2013-04-25T14:59:51.320
> 
> 标签：algorithm, math

我当前的副项目需要使用 3x3x3 马尔可夫链。我想出的第一个实现是让矩阵中的每个位置都有机会移动到该位置（所有位置的值总和为 1）。根据矩阵中的值，这将导致：

*   平均 13.5 次比较
*   1 比较的最佳案例
*   27 次比较的最坏情况

我的下一个想法是将每一行和每一层的总和存储为一个额外的类变量数组。这将允许它在以下位置找到正确的位置：

*   平均 4.5 次比较（1.5 找层，1.5 找行，1.5 找位置）
*   3 次比较的最佳情况
*   9 次比较的最坏情况

我们已经可以看到这是一个更好的实现比较，但也有一些额外的数据需要存储。

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:34:33.710

马尔可夫链通过转换矩阵演变，在您的情况下可能是 27x27 矩阵。但是，您提出问题的方式意味着您不是在处理一般情况，并且有一些适用的特殊条件。

如果我这样做，我的第一个想法会是现在的计算机如此之快，以至于不值得担心初始版本的效率，并且最好获得一些初步结果。所以我只会开始担心后续版本的效率。特别是，您更高效的版本显然会更难正确，并且如果您保存的某些变量与马尔可夫链的底层状态不同步，可能会有点危险。因此，测试这种更有效实现的重要工具将是您首先想到的蛮力低效实现。

# matlab - 在matlab中求解符号和函数的卷积

> ID：16218218
> 
> 赞同：1
> 
> 时间：2013-04-25T15:00:00.157
> 
> 标签：matlab, convolution

我想在matlab中为两个heaviside函数解决卷积，问题是matlab不允许我这样做并弹出一个错误说：

```
??? Undefined function or method 'conv2' for input arguments of type 'sym'. 
```

这是我尝试做的：

```
syms x;
conv(heaviside(-1-x), heaviside(x+3)) 
```

我想我可以用 x 可以具有的值制作一个向量并使用该向量对其进行转换，但我不想预定义范围，所以我想将其保留为符号。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:24:49.747

您可以直接从定义（[http://en.wikipedia.org/wiki/Convolution](http://en.wikipedia.org/wiki/Convolution)）计算卷积，例如计算积分：

```
syms x t  
symb_conv = int(heaviside(-1-(t-x)) * heaviside(x+3), x, -inf, inf) 
```

**编辑：**

真的，在这些条件下，你的卷积似乎总是无穷大。

原始函数的绘图如下：

```
ezplot(heaviside(-1-x), [-10 10])
ezplot(heaviside(x+3), [-10 10]) 
```

![重质（-x-1）](https://i.stack.imgur.com/mPKXj.jpg) ![重质(x+3)](https://i.stack.imgur.com/NWGsE.jpg)

我们需要反映一个函数来接收卷积。让它成为第二个功能：

![在此处输入图像描述](https://i.stack.imgur.com/0302X.jpg)

如果我们比较第一个和最后一个图，我们可以看到这两个函数对于 x<-3 有无限的非零交集。这意味着 t=0 的卷积将是无穷大的。

如果我们尝试将最后一个图向任何方向移动，我们也将有无限的非零交点 x<(-3-t)。因此，对于任何 t，最终的卷积函数都是无穷大的。

# ruby-on-rails - 跳过CKeditor的身份验证？

> ID：16218222
> 
> 赞同：0
> 
> 时间：2013-04-25T15:00:21.120
> 
> 标签：ruby-on-rails, ckeditor, cancan

我在我的 Rails 应用程序中使用[ckeditor 。](https://github.com/galetahub/ckeditor)它工作得很好，但我没有设法让照片上传/浏览/发送到服务器工作！

我正在使用 cancan 并且正在获取`CanCan::AuthorizationNotPerformed at /pictures`，即使在注释掉`config.authorize_with :cancan`config/initializers/ckeditor.rb

所以我想取消注释`config.authorize_with :cancan`然后使用`skip_authorization_check`，但我不知道在哪里使用它！我是 Rails 新手。

我几乎尽我所能！

请问有什么帮助/线索/提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T06:39:23.257

查看`ckeditor/pictures_controller.rb`gem 可以让您了解如何解决问题。（`bundle open ckeditor`从应用程序的根目录使用，然后导航到`app/controller/ckeditor/`）

`ckeditor/pictures_controller.rb`因此，在您的 Rails 应用程序中创建一个包含以下内容的应用程序：

```
class Ckeditor::PicturesController < Ckeditor::ApplicationController
  load_and_authorize_resource

  def create
    @picture = Ckeditor::Picture.new
    respond_with_asset(@picture)
  end 

  def destroy
    @picture.destroy
    respond_with(@picture, :location => pictures_path)
  end 

protected

  def authorize_resource
    model = (@picture || Ckeditor::Picture)
    @authorization_adapter.try(:authorize, params[:action], model)
  end 
end 
```

这个解决方案的关键是`load_and_authorize_resource`and方法`authorize_resource`，`create`你就可以上传图片了。

`destroy`当您要删除上传的图像时，将调用该方法。

# javascript - innerHTML 正在处理 body 元素而不是 p 元素

> ID：16218223
> 
> 赞同：0
> 
> 时间：2013-04-25T15:00:21.450
> 
> 标签：javascript, html, innerhtml

如果电子邮件地址无效，我想在屏幕上显示一条消息“请输入有效的电子邮件地址”。body 元素的 innerHTML 语句工作正常，但我用于 p 元素的语句不起作用。

有一次我在测试它时，看到消息“请输入一个有效的电子邮件地址”显示，然后在我单击“无效”警告框的确定按钮后，该消息消失了。

**JavaScript：**

```
<script type="text/javascript">      
function validateEmail() {
    var emailRule =  /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;   
    if (emailRule.test(document.forms[0].email.value)) {
       document.getElementById("body").innerHTML = "Thank you for signing up for our newsletter! You will recieve a confirmation email shortly.";
       setTimeout("window.close()", 3000);
    }
    else
       window.alert("not valid");       //for debugging
       document.getElementById("message").innerHTML = "Please enter a valid email address";
}  
</script> 
```

**HTML：**

```
</head>
<body id="body">
<p>If you sign up for our newsletter you will be entered into a drawing to win free clothes every month!</p>
<br>
<p id="message"> </p>
<form action="" onsubmit="validateEmail();">
<p>Email: <input type="text" name="email"/>
<input type="submit" value="Sign up"/></p>
<br>
<input type="button" value="No thanks" onclick="window.close()"/>
<br>
</form>
<p><a href="privacy.html">Privacy Policy</a></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:08:16.020

该表单不提交任何内容，因为您不阻止默认操作。这就是消息出现（工作）和消失（页面重新加载）的原因

```
function validateEmail(e) {
    if( valid ) { /* stuff */ }
    else {
      e.preventDefault(); // Prevent form submission
    /* etc */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:09:07.477

[**在这里工作 jsFiddle。**](http://jsfiddle.net/TPa66/1/)

* * *

首先，如果您要保留 console.log，请在 else 语句中添加大括号 - 它可以在没有它们的情况下工作，但仅影响之后的一行，而您之后有两行，因此无论如果/其他。

此外，如果出现 else 语句，添加 Javascript 的**[event.preventDefault()](http://www.w3schools.com/jquery/event_preventdefault.asp)**以阻止表单提交：

```
else {
   event.preventDefault();
   document.getElementById("message").innerHTML = "Please enter a valid email address";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:13:12.557

无论语句的结果如何，表单都在提交。代码正在运行，但表单提交正在重新加载页面。添加`return false;`修复问题：

```
<script type="text/javascript">

function validateEmail() {
    var emailRule =  /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

    if (emailRule.test(document.forms[0].email.value)) {
         document.getElementById("body").innerHTML = "Thank you for signing up for our newsletter! You will recieve a confirmation email shortly.";
         setTimeout("window.close()", 3000);
    }
    else
         window.alert("not valid");       //for debugging
         document.getElementById("message").innerHTML = "Please enter a valid email address";
         return false; // this stops the form from submitting, and the page from reloading.
}

</script>

</head>
<body id="body">
<p>If you sign up for our newsletter you will be entered into a drawing to win free clothes every month!</p>
<br>
<p id="message"> </p>
<form action="" onsubmit="validateEmail();">
<p>Email: <input type="text" name="email"/>
<input type="submit" value="Sign up"/></p>
<br>
<input type="button" value="No thanks" onclick="window.close()"/>
<br>
</form>
<p><a href="privacy.html">Privacy Policy</a></p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:03:16.820

```
<script type="text/javascript">

function validateEmail() {
    var emailRule =  /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

    if (emailRule.test(document.forms[0].email.value)) {
         document.getElementById("body").innerHTML = "Thank you for signing up for our newsletter! You will recieve a confirmation email shortly.";
         setTimeout("window.close()", 3000);
    }
    else
    {
         window.alert("not valid");       //for debugging
         document.getElementById("message").innerHTML = "Please enter a valid email address";
    }
}

</script>

</head>
<body id="body">
<p>If you sign up for our newsletter you will be entered into a drawing to win free clothes every month!</p>
<br>
<p id="message"></p>
<form action="" onsubmit="validateEmail();">
<p>Email: <input type="text" name="email"/>
<input type="submit" value="Sign up"/></p>
<br>
<input type="button" value="No thanks" onclick="window.close()"/>
<br>
</form>
<p><a href="privacy.html">Privacy Policy</a></p>
</body>
</html> 
```

# java - 如何将 WatchService 转换为 Runnable？

> ID：16218225
> 
> 赞同：3
> 
> 时间：2013-04-25T15:00:24.607
> 
> 标签：java, nio, runnable

我有一个监视服务，它监视目录`ENTRY_DELETE`和事件`ENTRY_CREATE`并`ENTRY_MODIFY`根据事件执行逻辑。

我需要该服务来监视目录中的所有更改，而不是退出循环。但我还需要启动我的其他逻辑。

我怎样才能将这些方法重构为 a`Runnable`来实现这一点？

如果代码如下。

```
public static void main(String[] args) {        
    System.out.println("Started watching");
    FileServices fileServices = new FileServicesImpl();

    fileServices.setSrcDir(fileServices.getValue("srcdir","properties/abc.properties"));
    fileServices.setDestDir(fileServices.getValue("destdir","properties/abc.properties"));

    System.out.println(fileServices.getSrcDir());
    System.out.println(fileServices.getDestDir());

    Map<String,WatchEvent> files = new HashMap<>();
    MappingConsole mappingConsole = new MappingConsole();

    for(;;){
        files = fileServices.getEventMap();
        for(String f : files.keySet()){
            System.out.println("Size of files: "+files.size());
            if (files.get(f).kind() == ENTRY_CREATE || files.get(f).kind() == ENTRY_MODIFY) {
                System.out.println("Processing: " +f);
                mappingConsole.map940(fileServices.getSrcDir(),f,fileServices.getDestDir());
                System.out.println("Processed: " +f);
            }
        }
    }

} 
```

来自 FileServicesImpl：

```
@Override
public void monitorSrcDir(String srcDir){
    for(;;){
        try {
            WatchService watchService = FileSystems.getDefault().newWatchService();
            Path myDir = Paths.get(srcDir);
            WatchService watcher = myDir.getFileSystem().newWatchService();
            myDir.register(watcher, ENTRY_CREATE,ENTRY_DELETE, ENTRY_MODIFY);
            WatchKey watchKey = watcher.take();
            List<WatchEvent<?>> events = watchKey.pollEvents();
            for (WatchEvent event : events) {
                if (event.kind() == ENTRY_CREATE) {
                    System.out.println("Create: " + event.context().toString());
                    getEventMap().put(event.context().toString(), event);
                }
                if (event.kind() == ENTRY_DELETE) {
                    System.out.println("Delete: " + event.context().toString());
                    getEventMap().put(event.context().toString(), event);
                }
                if (event.kind() == ENTRY_MODIFY) {
                    System.out.println("Modify: " + event.context().toString());
                    getEventMap().put(event.context().toString(), event);
                }
            }
            watchKey.reset();
        }  catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:07:26.477

我这样做：

```
public class WatchServiceMonitor implements Monitor, Runnable, Closeable {
    private static Logger log = LoggerFactory.getLogger( WatchServiceMonitor.class.getName() );
    private Destination destination;
    private Path hotFolder;
    private Thread thread;

    public WatchServiceMonitor( Path hotFolder, Destination destination ) {
        this.hotFolder = hotFolder;
        this.destination = destination;

    }

    @Override
    public void close() throws IOException {
        try {
            stop();
        }
        catch ( InterruptedException e ) {
            log.warn( "request to stop failed, guess its time to stop being polite!" );
        }
    }

    @Override
    public void join() throws InterruptedException {
        thread.join();
    }

    @Override
    public void run() {
        try (WatchService watcher = FileSystems.getDefault().newWatchService()) {
            if ( log.isTraceEnabled() ) log.trace( "registering create watcher on " + hotFolder.toAbsolutePath().toString() );
            hotFolder.register( watcher, StandardWatchEventKinds.ENTRY_CREATE );
            if ( log.isDebugEnabled() ) log.debug( "watcher registration complete for " + hotFolder.toAbsolutePath().toString() );
            synchronized ( this ) {
                this.notifyAll();
            }
            for ( ;; ) {
                if ( thread.isInterrupted() ) break;

                WatchKey key = null;
                try {
                    log.trace( "waiting for create event" );
                    key = watcher.take();
                    log.trace( "got an event, process it" );
                }
                catch ( InterruptedException ie ) {
                    log.trace( "interruped, must be time to shut down..." );
                    break;
                }

                for ( WatchEvent<?> eventUnknown : key.pollEvents() ) {
                    WatchEvent.Kind<?> kind = eventUnknown.kind();

                    if ( kind == StandardWatchEventKinds.OVERFLOW ) return;

                    @SuppressWarnings( "unchecked" )
                    WatchEvent<Path> eventPath = (WatchEvent<Path>) eventUnknown;
                    Path path = hotFolder.resolve( eventPath.context() );
                    log.trace( "calling destination.transfer({})", path );
                    destination.transfer( path );
                    log.info( "transferred {} to destination" );

                    if (! key.reset()) {
                        break;
                    }
                }
            }
        }
        catch ( IOException ioe ) {
            log.error( ioe.getMessage(), ioe );
        }
        log.debug( "existing run loop" );
    }

    @Override
    public void start() throws InterruptedException {
        log.trace( "starting monitor" );
        thread = new Thread( this );
        thread.start();
        synchronized ( this ) {
            this.wait();
        }
        log.trace( "monitor started" );
    }

    @Override
    public void stop() throws InterruptedException {
        log.trace( "stopping monitor" );
        thread.interrupt();
        thread.join();
        thread = null;
        log.trace( "monitor stopped" );
    }
} 
```

该类`Destination`是我自己的一类，它知道如何从`WatchService`事件指示的路径转移。

所以，本质上我只是将整个`WatchService`循环包装在`run`一个`Runnable`实例的方法中。

# php - 如何从 php 字符串创建 JSON 对象？

> ID：16218226
> 
> 赞同：3
> 
> 时间：2013-04-25T15:00:25.137
> 
> 标签：php, string, json

我有一个包含 json 样式数据的大型 php 字符串，需要以某种方式将其转换为 json 对象。我的字符串如下所示：（它是一个大字符串）。字符串的语法并不完全是我在下面附上的，但这只是一个例子。我如何将下面的字符串像 $string 转换为 json 对象？谢谢。

```
$string = "
{
 \"name\": \"flare\",
 \"children\": [
  {
   \"name\": \"analytics\",
   \"children\": [
    {
     \"name\": \"cluster\",
     \"children\": [
      {\"name\": \"AgglomerativeCluster\", \"size\": 3938},
      {\"name\": \"CommunityStructure\", \"size\": 3812},
      {\"name\": \"HierarchicalCluster\", \"size\": 6714},
      {\"name\": \"MergeEdge\", \"size\": 743}
     ]
    }
    ]
  }
  ]
}
"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:02:11.040

用于[`json_decode()`](http://www.php.net/manual/en/function.json-decode.php)此：

```
$obj = json_decode($string);
var_dump($obj); 
```

输出：

```
class stdClass#1 (2) {
  public $name =>
  string(5) "flare"
  public $children =>
  array(1) {
    [0] =>
    class stdClass#2 (2) {
      public $name =>
      string(9) "analytics"
      public $children =>
      array(1) {
        ...
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:02:19.057

[没有 JSON object 这样的东西](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)。

你所拥有的是一个 JSON 文本，表示为 PHP 字符串文字。

如果要将其解析为 PHP 对象，请使用[`json_decode($string)`](http://php.net/json_decode).

如果要将其解析为 JavaScript 对象，则必须以某种方式将字符串传递给 JavaScript。这可能涉及将其打印到对 HTTP 请求的响应中，将其传递给[V8](http://php.net/manual/en/book.v8js.php)或其他一些技术，具体取决于您想用它实现什么。

# gcc - GCC/ARM 上的快速除法

> ID：16218228
> 
> 赞同：12
> 
> 时间：2013-04-25T15:00:30.450
> 
> 标签：gcc, assembly, arm, integer-division

据我所知，大多数编译器会通过乘法然后向右移位来进行快速除法。例如，如果您检查[这个 SO 线程](https://stackoverflow.com/questions/5558492/divide-by-10-using-bit-shifts)，它会说当您要求 Microsoft 编译器除以 10 时，它会将除数乘以 0x1999999A（即 2^32/10），然后将结果除以 2^32（使用向右移动 32 次）。

（编者注：链接的答案是错误的，直到。编译器不会这样做，因为它并不适用于所有输入。编译器会进行乘法和移位，但使用更复杂的方式来确定魔法常数和移位计数： [为什么 GCC 使用在实现整数除法时乘以一个奇怪的数字？](https://stackoverflow.com/questions/41183935/why-does-gcc-use-multiplication-by-a-strange-number-in-implementing-integer-divi)）

* * *

到现在为止还挺好。

但是，一旦我在 ARM 上使用 GCC 测试了相同的除以 10，编译器做了一些稍微不同的事情。首先它将被除数乘以 0x66666667 (2^34/10)，然后将结果除以 2^34。到目前为止，它与 Microsoft 相同，只是使用了更高的乘数。然而，在那之后，它从结果中减去 (dividend/2^31)。

**我的问题**：为什么在 ARM 版本上会有额外的减法？你能给我一个数字例子，如果没有那个减法，结果会是错误的吗？

如果你想检查生成的代码，它在下面（带有我的评论）：

```
 ldr     r2, [r7, #4] @--this loads the dividend from memory into r2
        movw    r3, #:lower16:1717986919 @--moves the lower 16 bits of the constant 
        movt    r3, #:upper16:1717986919 @--moves the upper 16 bits of the constant
        smull   r1, r3, r3, r2 @--multiply long, put lower 32 bits in r1, higher 32 in r3
        asr     r1, r3, #2 @--r3>>2, then store in r1 (effectively >>34, since r3 was higher 32 bits of multiplication)
        asr     r3, r2, #31 @--dividend>>31, then store in r3
        rsb     r3, r3, r1 @--r1 - r3, store in r3
        str     r3, [r7, #0] @--this stores the result in memory (from r3) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T15:27:36.957

> 然而，在那之后，它从结果中减去 (dividend/2^31)。

实际上，当右移负整数是算术右移（并且是 32 位宽）时，它减去`dividend >> 31`（`-1`对于负数）和 0 （对于非负被除数）。`dividend``int`

```
0x6666667 = (2^34 + 6)/10 
```

所以对于`x < 0`，我们有 ，写作`x = 10*k + r`，`-10 < r <= 0`

```
0x66666667 * (10*k+r) = (2^34+6)*k + (2^34 + 6)*r/10 = 2^34*k + 6*k + (2^34+6)*r/10 
```

现在，负整数的算术右移产生 的下限`v / 2^n`，所以

```
(0x66666667 * x) >> 34 
```

结果是

```
k + floor((6*k + (2^34+6)*r/10) / 2^34) 
```

所以我们需要看到

```
-2^34 < 6*k + (2^34+6)*r/10 < 0 
```

正确的不等式很容易，两者`k`都是`r`非正数，而且不是两者都是 0。

对于左不等式，需要进行更多分析。

```
r >= -9 
```

所以 的绝对值 `(2^34+6)*r/10`最多为`2^34+6 - (2^34+6)/10`。

```
|k| <= 2^31/10, 
```

所以`|6*k| <= 3*2^31/5`。

还有待验证

```
6 + 3*2^31/5 < (2^34+6)/10
1288490194   < 1717986919 
```

是的，没错。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T15:21:59.230

`x SAR 31``0xffffffff`对于 的负值`x`和`0x00000000`正值是(-1)。

因此，`rsb`如果股息为负，则从结果中减去 -1（与加 1 相同）。

假设您的股息是`-60`。只需乘法和移位，您就可以得到结果`-7`，因此它减去 -1 即可得到 的预期结果`-6`。

# qt - QStatusBar 上的 QProgressBar ：如何删除 QprogressBar 两侧的 2 条小垂直线？

> ID：16218232
> 
> 赞同：0
> 
> 时间：2013-04-25T15:00:39.177
> 
> 标签：qt, pyqt, pyside

我通过以下代码将 QLabel 之后的 QProgressBar 添加到 QStatusBar，但 QProgressBar 内衬有 2 条小垂直线。我想知道如何删除2条垂直线？

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MainWindow(QMainWindow):

    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.resize(800, 600)

        self.lb=QLabel('finding resource   ')

        self.pb = QProgressBar()
        self.pb.setRange(0, 0)
#        self.pb.setTextVisible(False)

        self.statusBar().addPermanentWidget(self.lb)
        self.statusBar().addPermanentWidget(self.pb, 1)

if __name__ == "__main__":
    app = QApplication(sys.argv)

    ui = MainWindow()
    ui.show()
sys.exit(app.exec_()) 
```

# vb.net - 在未安装 Acrobat Reader 的情况下查看 PDF 文件

> ID：16218237
> 
> 赞同：0
> 
> 时间：2013-04-25T15:00:55.393
> 
> 标签：vb.net, pdf, view

是否可以在未安装 Acrobat Reader 的情况下在 VB.NET 中查看 pdf 文件？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:06:44.840

您可以在默认浏览器上打开它，大多数浏览器都内置了 pdf 功能，因此您不需要 Adob​​e Reader。

您甚至可以使用`WebBrowser`对象在表单中显示 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:04:16.520

我自己没有测试过，但是[这个讨论](http://www.dreamincode.net/forums/topic/74198-how-to-view-pdf-file-in-vbnet/)应该有很多答案给你。链接中包含许多方法来显示 pdf 作为问题的答案：“如何创建自己的 pdf 查看器？”。此外，您在开发过程中可能面临的主要问题也得到了处理。

我从那里得到的两个答案是：

1-试试这条线：

```
System.Diagnostics.Process.Start("D:\test.pdf"); 
```

[2- 使用浏览器小部件，此链接中对此](http://www.c-sharpcorner.com/UploadFile/mahesh/WebBrowserInCSMDB12022005001524AM/WebBrowserInCSMDB.aspx)进行了简要说明。为此，您应该与其他人一起编写此行：

```
myWebbrowser.navigate("d:\test.pdf") 
```

# javascript - Create Dates Array in Javascript

> ID：16218239
> 
> 赞同：0
> 
> 时间：2013-04-25T15:00:57.410
> 
> 标签：javascript

I'm attempting to create an array of dates in Javascript based on a start date and an end date. I need the date format to look like `2013-04-25`

My code apparently doesn't work, but I can't seem to figure out why. Can someone assist?

```
//get today's date
var today = new Date();
today.setDate(today.getDate());

//get date from last week -7
var prevWeek = new Date();
prevWeek.setDate(prevWeek.getDate() -7);

//set initial date parameters
  var fromDate = prevWeek;
  var toDate = today;

//set date parameters to input parameters
function setDates() {
    fromDate =document.getElementById('fromDate').value;
    toDate = document.getElementById('toDate').value;
};

var dates = new Array();

//create date array
function setArray() {
    for(i = fromDate.getDate(), i <= toDate.getDate(), i.setDate(i.getDate() +1))
    {
    dates.push(new Date(i));
    };
};

//format date array
function formDates() {
    for(i = 0, i <= dates.length, i++)
    {
        var dd = dates[i].getDate();
        var mm = dates[i].getMonth()+1;
        var yyyy = dates[i].getFullYear();
        if(dd<10)   {dd = '0' + dd};
        if(mm<10){mm = '0' + mm};
        dates[i] = yyyy + '-' + mm + '-' + dd;
    };
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:13:03.810

Your loop signatures are wrong.

They should be delimited with `;` and not a `,`

A correct javascript for loop is made like this:

```
for(var i = 0; i <= 1000; i++){
} 
```

Using `var` statements here are also considered best practice due to javascript otherwise hoisting your `i` variable making it global to the function, or worst case scenario, your entire js-file.

# regex - 如何在 Emacs Regexp 中替换多个匹配的字符串？

> ID：16218241
> 
> 赞同：1
> 
> 时间：2013-04-25T15:01:00.513
> 
> 标签：regex, emacs

在 Emacs 正则表达式中，我正在做一个替换正则表达式，搜索这个

`<span class="small">\([^<]+\)</span>\([^<]+\)<span class="small">\([^<]+\)</span>`

并试图用这个替换它

`<span class="small">\1\2</span>`

我正在尝试连接两个匹配的字符串。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:57:41.660

如果没有说明它对您不起作用，我只能猜测您打算替换为`\1\3`而不是`\1\2`.

第二种可能性是您正在操作的文本实际上与您的正则表达式不匹配。

```
(switch-to-buffer (get-buffer-create "nst.html"))
(insert "<span class=\"small\">foo</span>bar<span class=\"small\">baz</span>")
(goto-char (point-min))
(replace-regexp
  "<span class=\"small\">\\([^<]+\\)</span>\\([^<]+\\)<span class=\"small\">\\([^<]+\\)</span>"
 "<span class=\"small\">\\1\\3</span>") 
```

尝试`M-x undo`在缓冲区中查看替换操作之前的样子。

（我想丢失文本`\2`是你的意图吗？）

# r - 从函数 R 输出多个对象

> ID：16218243
> 
> 赞同：0
> 
> 时间：2013-04-25T15:01:07.050
> 
> 标签：r

我不太确定这个问题是否已经存在。但是在浏览了互联网之后，我找不到任何与我的具体问题有关的东西。

因此，在 R 编程中，我想通过拆分数据帧来批量输出对象（特别是时间序列对象）。在此之前，我一直在为每个用户粘贴重复的连接命令，这感觉是一个非常乏味的过程，所以我想知道我是否可以构建一个通过变量分割数据帧的函数，应用 ts() 函数，标记该对象创建，并输出创建的所有对象。

现在理想情况下，我首先想到的是使用 by 命令并将函数应用于每个拆分。例如，下面是我尝试过的代码（注意，这只是一个小例子，我的真实数据框比这个大得多）。

```
#test df for stackoverflow
df<-data.frame(user=c(rep(1,5),rep(2,5),rep(3,5),rep(4,5)))
df$values<-c(10,20,30,40,9,19,29,39,11,21,31,41,12,22,32,42,8,18,34,44)

#playing around with the by command
dd<-by(df,df$user,FUN=function(x){
  time = ts(x$values,freqency=2),
  label = x$user[1],
  label<-time,
  return(label)
}) 
```

该错误只是说波浪形括号有错误。我也看过'plyr'包中的ddply，但我也无法让它工作。

任何建议/帮助/意见将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:15:37.763

如果我理解正确，您想通过变量拆分 data.frame 并将每个部分转换为时间序列对象。

您可以使用`plyr`并获取结果作为列表（如果您的每个用户的数据数量不相等）

```
require(plyr)
dlply(df, .(user), function(df) ts(df$value, frequency = 12)) 
```

`by`如果你愿意，你仍然可以使用

```
by(df$value, df$user, function(x) ts(x, frequency = 12))

## df$user: 1
##   Jan Feb Mar Apr May
## 1  10  20  30  40   9
## ------------------------------------------------ 
## df$user: 2
##   Jan Feb Mar Apr May
## 1  19  29  39  11  21
## ------------------------------------------------ 
## df$user: 3
##   Jan Feb Mar Apr May
## 1  31  41  12  22  32
## ------------------------------------------------ 
## df$user: 4
##   Jan Feb Mar Apr May
## 1  42   8  18  34  44 
```

# vb.net - VB.NET：在 ProcessCmdKey 中确定键是否打印的最简单方法？

> ID：16218249
> 
> 赞同：2
> 
> 时间：2013-04-25T15:01:27.700
> 
> 标签：vb.net, winforms, keyboard

识别击键是否是可打印字符（应该出现在文本框中）的最简单方法是什么？我想将 F1、Home 等键与实际出现在文本框中的键分开。我试图通过自己识别所有不可打印的字符来避免大量的 IF 语句。

由于控件的设计，不能使用 KeyUp、KeyPress 等事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:54:14.527

没有简单的方法。你**永远不**应该把自己放在这个位置。正如在 ProcessCmdKey 或 KeyDown 中所观察到的，虚拟键到 KeyPress 事件所观察到的键入键的转换非常复杂。这取决于用户选择的键盘布局。键盘布局因世界各地的机器而异。中文键盘看起来不像英文键盘，您当然可以想象这一点。此外，具有大量字符的语言，如中文和日文，使用专用程序允许用户从数万个字形中选择一个。IME（输入法编辑器）。

值得注意的问题还有“死键”，一些键盘上用于输入带有变音符号的字母的特殊键。在英语中不常见，在世界其他地方很常见。就像德语键盘上的 AltGr 键一样。这样的布局是非常*有状态*的，一个键会根据该状态产生*不同的打字字符。*换句话说，之前按下了哪些死键。此状态也是特定于进程的，不能由另一个进程检索。

我可能没有吓到你，对一个说英语的程序员来说很难做到。注意风，听起来您只想为自己的进程执行此操作，您可以调用 ToUnicodeEx() winapi 函数。它需要键盘状态，您可以通过调用 GetKeyboardState() 获得。它需要活动键盘布局，您可以从 GetKeyboardLayout() 获得。哪个需要线程 ID，您可以从 GetCurrentThreadId() 获得。返回值 1 或更大表示 KeyPress 事件可能会触发。访问 pinvoke.net 以获得正确的 pinvoke 声明。

# javascript - 一页中有两个数据表 - 如何仅滚动其中一个表？

> ID：16218252
> 
> 赞同：2
> 
> 时间：2013-04-25T15:01:37.877
> 
> 标签：javascript, jquery, scroll, datatable

我在一页中有两个数据表，初始化如下：

```
 //First table
    sListTable = $('#subListTable').dataTable({
                "sScrollY": "265px",
                "sDom": "frtiS",
                "bDeferRender": true,
                "aaSorting": [[ 1, "desc" ]],
                "aoColumnDefs": [
                    {"sType": "date", "aTargets": [1]}
                ]
    });

      //Second table
    pListTable = $('#projListTable').dataTable({
                "sScrollY": "265px",
                "sDom": "frtiS",
                "bDeferRender": true,
                "aaSorting": [[ 1, "desc" ]],
                "aoColumnDefs": [
                    {"sType": "date", "aTargets": [1]}
                ]
    }); 
```

如您所见，我为每个表使用了一个单独的变量，并且每个表都有自己的唯一 ID。

现在我有一个函数可以自动突出显示“projListTable”表中的一行，并根据某些事件将该行滚动到视图中：

```
//Auto-scroll to row with 'row_selected' class                          
var container = $('#projListTable,div.dataTables_scrollBody');
var scrollTo = $('#projListTable tbody tr.row_selected');
container.scrollTop(scrollTo.offset().top - container.offset().top); 
```

这个自动滚动脚本工作正常，但问题是它也会滚动另一个表（sListTable），即使如上所示专门指定了“projListTable”。

我需要做什么，这样只有“projListTable”是唯一受 container.scrollTop() 调用影响的？我有一种感觉，这是因为他们共享“div.dataTables_scrollBody”，但我不知道如何解决它。任何帮助深表感谢。

这是显示问题的实际代码：

[http://live.datatables.net/ekatik/8](http://live.datatables.net/ekatik/8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:53:42.057

你应该只选择目标表`.dataTables_scrollBody`，使用这个：

[看演示](http://live.datatables.net/ekatik/9)

```
 var container = $('#projListTable').closest('.dataTables_scrollBody');
  var scrollTo = $('#projListTable tbody tr.row_selected');
  container.scrollTop(0); 
  container.scrollTop(scrollTo.offset().top - container.offset().top); 
```

# java - java数组中的内存不足错误

> ID：16218254
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:01:45.377
> 
> 标签：java

我在 java 中的一种方法中使用了以下代码：

```
int []  byte_song = new int[8414449];
int []  int_song = new int[8414449 - 45]; 
```

如果我只是写：

```
int []  byte_song = new int[8414449]; 
```

它没有给我任何错误。但是，如果我写：

```
int []  byte_song = new int[8414449];
int []  int_song = new int[8414449 - 45]; 
```

它给了我`OutOfMemoryError`。

在我收到错误消息`System.gc();`之前，我也尝试过打电话。`int []int_song = new int[8414449 - 45];`有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:05:05.047

您需要分配更多内存。为此使用`-Xmx` [内存选项](https://stackoverflow.com/questions/5374455/what-does-java-option-xmx-stand-for)。JVM 有一个默认的内存量，超过该内存量将不允许您再分配，而且它通常小于您在计算机上拥有的内存量。

# java - 在 Java 中获取程序集版本

> ID：16218263
> 
> 赞同：3
> 
> 时间：2013-04-25T15:02:12.180
> 
> 标签：java, java-native-interface, .net-assembly

有什么方法可以让我用 Java 获取程序集或应用程序的版本吗？

例如，我有一个位于 Program Files 中的 .NET .dll 文件。我通常在这个 .dll 上调用“loadLibrary”，这样我就可以在 C++ 中调用 JNI 方法。

```
System.loadLibrary("MyJniAssembly"); 
```

有人可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:36:54.860

最简单的方法是在程序集中实现的另一个本机方法中公开该信息。如果您不能在那里执行此操作，则必须使用这种方法创建一个新程序集，但该程序集需要一个指示您感兴趣的程序集或类型的参数。

# php - 在 PHP & SQL 中从下到上阅读

> ID：16218265
> 
> 赞同：0
> 
> 时间：2013-04-25T15:02:16.677
> 
> 标签：php, sql

我正在使用数据库进行聊天。当我显示消息时，旧消息位于顶部，新消息位于底部。我怎样才能做到这一点，以便新消息排在首位。我已经尝试过，`ORDER BY Username DESC`但这只是让它按字母顺序排列。

这是我的完整代码

```
<html>
<head>
    <title>Jetup</title>
</head>
<body>
<form name="chatform" action="<?php echo $_SERVER['PHP_SELF']?>" method="post">
    <input type="text" name="chatuser"/>
<input type="text" name="chatinput"/>
<input type="image" name="send" value="Verzenden"/>
<br/>
<?php
    $connection = mysql_connect("localhost","root","usbw") or die ("Kon geen verbinding maken");
    mysql_select_db("chat") or die("Kan geen database selecteren");

    if(isset($_POST['chatinput']) && isset($_POST['chatuser'])){
        $input = $_POST['chatinput'];
        $user = $_POST['chatuser'];

        $query = "INSERT INTO chatterdata (Username, Message) VALUES ('".$user."', '" .$input."')";
        mysql_query($query) or die(mysql_error());
    }
    $display = mysql_query("SELECT * FROM chatterdata ORDER BY Username DESC, Message DESC");
    while($row = mysql_fetch_array($display)){
        echo($row['Username'] . " : " .$row['Message'] . "<br/>");
    }
?>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:08:01.257

您应该在您的 chatterdata 表中添加一个时间戳字段。

然后您可以按此字段订购

```
`added` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
```

这是一个示例字段，当您添加新消息时将自动更新，因此您无需在创建消息时向数据库中插入任何其他内容。

那么你可以像这样选择：

```
SELECT * FROM chatterdata ORDER BY added DESC 
```

在将值插入数据库之前，我肯定会考虑使用 PDO，或者至少使用 mysql_real_escape_string，因为这样做会带来巨大的安全隐患 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:08:23.120

您可以通过创建一个`SentDate`字段并按字段排序来完成这项工作`SentDate`。

```
INSERT INTO chatterdata(Username, Message, SentDate) VALUES ($user, $message, NOW()) 
```

由于较新的日期和时间将大于以前的消息，因此较新的日期和时间将显示在顶部。

# regex - VBA 正则表达式未按预期工作

> ID：16218269
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:02:22.753
> 
> 标签：regex, vba

好吧，我一直在尝试解决这个问题，但是对于正则表达式来说还很陌生，我一直不太成功。我的目标是产生一个匹配，将一个字符串与另一个可能更大或与前一个字符串相同大小的字符串进行比较。仅当第一个字符串 1\. 与另一个字符串的某些部分不区分大小写匹配时，才会发生此匹配，2\. 在另一个字符串中成功匹配的字符串应该是单独的单词或短语，而不是另一个单词的一部分，这意味着它以字符串开头或空格开头，以字符串结尾或空格结尾。来自熟练的正则表达式用户的任何帮助都将受到欢迎。

```
'this yields : run time error 5018 = Unexpected quantifier in regular expression
RegExPattern = "(\b|^)?" + "[" + ColumnArr(PhraseCt) + "]" + "(\b|[ ])?)" 
With RegEx
     .MultiLine = False
     .Global = True
     .IgnoreCase = False
     .Pattern = RegExPattern
End With
Set Matches = RegEx.Execute(SearchTerm) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:10:38.207

`\b`应该匹配字符串的开头（请参阅[VBA Excel 正则表达式 - 如果单词位于字符串开头，则 \b 单词边界不匹配](https://stackoverflow.com/questions/11867580/vba-exel-regex-b-word-boundary-doesnt-match-if-word-is-at-beginning-of-strin)以确认 Excel 2010 中的字符串）。所以你应该可以使用

```
RegExPattern = "\b" + ColumnArr(PhraseCt) + "\b" 
```

（假设这`ColumnArr(PhraseCt)`是您要搜索的词）。`IgnoreCase = True`如果您希望它不区分大小写，也可以使用。

# wpf - 更改 ListBoxItem 中内容的背景颜色

> ID：16218270
> 
> 赞同：1
> 
> 时间：2013-04-25T15:02:23.847
> 
> 标签：wpf, xaml, wpf-4.0

我是 WPF 新手；我有一个包含扩展器的列表框（扩展器周围有边框）：

```
<ListBox Background="Transparent" BorderBrush="Transparent">
    <ListBox.Style>
        <Style>
            <Style.Resources>
                <!-- Background of selected item when focussed -->
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
                <!-- Background of selected item when not focussed -->
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
            </Style.Resources>
        </Style>
    </ListBox.Style>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Border Margin="5" BorderThickness="2" BorderBrush="LightGray" CornerRadius="5">
                <Expander IsExpanded="True" Background="#f7f7f7">
                    <!-- Content -->
                </Expander>
            </Border>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ListBox> 
```

我想要的行为是所选项目的扩展器背景颜色变暗（例如#e0e0e0）。我找到了让我隐藏 ListBoxItem 的背景颜色的示例（这在代码中显示），但没有很好的资源来更改 ListBoxItem 中内容的背景颜色。我知道我需要设置一个触发器来执行此操作，但我不知道如何设置它，无论是 ListBox 还是 Expander 的触发器。

如何设置适当的触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:26:52.783

```
 <DataTemplate>
     <Border Margin="5" BorderThickness="2" BorderBrush="LightGray" CornerRadius="5">
       <Expander IsExpanded="True" Background="#f7f7f7" Name="expander">

       </Expander>
     </Border>
   <DataTemplate.Triggers>
     <DataTrigger Binding="{Binding IsSelected,RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
       <Setter Property="Background" Value="#e0e0e0" TargetName="expander"/>
     </DataTrigger>
   </DataTemplate.Triggers>
 </DataTemplate> 
```

# javascript - Angular.js 和 DAO 模式

> ID：16218271
> 
> 赞同：9
> 
> 时间：2013-04-25T15:02:24.400
> 
> 标签：javascript, activerecord, angularjs, dao

首先我必须承认我对 Angular.js 很陌生，而且我之前没有使用过任何新一代的 js 框架，比如 Backbone 或 Knockout。我正在创建一个使用 RESTful API 与服务器通信的应用程序。我在 Angular 文档和博客笔记中做了很多工作，以便我能做对。

我发现的例子主要是[$resource](http://docs.angularjs.org/api/ngResource.$resource "$资源")。它看起来很不错：许多内置方法，当您正确设计 REST 接口时，您甚至不必再编写任何东西。

但我（以及我的整个团队）更习惯于 JavaEE 思考模型层的方式：轻量级模型类（POJO 等）、持久化和获取模型的 DAO 类以及可选的 DAO 和控制器之间的服务层。另一方面，在 Angular 中 $resource 创建了一些更类似于活动记录的东西。

我已经想出了两种在 Angular 中实现 DAO 模式的方法：

1.  从头开始编写所有内容，一直到 $http 抽象级别。我会将每个 DAO 方法实现为 $http 调用，注意错误。
2.  使用 $resource 对象通常像轻量级模型类，并将它们传递给 DAO，DAO 是唯一负责在它们上调用 .$save() 等操作的单元。当然，我们不能阻止在不同的地方调用它，但是这种约定的解决方案对我来说已经足够了。

由于重用现有代码，第二种方式对我来说看起来更好。$resource 具有良好的 promise 对象行为，如果我不必自己实现它，我会很高兴。

所以最后的主要问题是：主动记录方法是在 Angular、Backbone 和其他类似工具中进行数据访问的唯一方法吗？也许有人已经尝试在他的代码中加入更类似于 DAO 的类似解决方案，并且可以分享他的想法？

第二个问题：在处理错误、连接丢失和其他问题时，$resource 对象是否足够？考虑到这一点是否值得使用 $resource 或者最好从较低级别的 $http 开始。

我在项目的开始，我知道这个决定很可能会影响到以后的整个项目生命，所以我想选择最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:33:05.437

我完全同意。这是我的做法：

```
bankApp.factory("CustomerRepository", function ($resource) {
    var customerRepository = $resource("rest/customers/:id", {id:'@id'}, {'update': {method:'PUT'}});
    // You can also add addition repository like $http calls onto the
    // customerRepository like getting the count and other stuff.
    return customerRepository;
}); 
```

然后，您可以在任何需要的地方注入 CustomerRepository。例如：

```
bankApp.controller("BankController", function ($scope, CustomerRepository) {

    $scope.customers = CustomerRepository.query();

    $scope.createCustomer = function () {
        CustomerRepository.save($scope.customer, function (customer) {
            ...
        });
    };

    ...

    $scope.saveCustomer = function () {
        CustomerRepository.update($scope.customer, function (customer) {
            ...
        });
    };
}); 
```

# python - 在python中将unicode西里尔符号转换为字符串

> ID：16218274
> 
> 赞同：5
> 
> 时间：2013-04-25T15:02:26.510
> 
> 标签：python, string, unicode, python-2.7

当我尝试转换 unicode 时：

```
a = u"Тест" 
```

要字符串：

```
str(a) 
```

我收到了这个错误：

```
'ascii' codec can't encode characters in position 0-3: ordinal not in range(128) 
```

我需要 str(a) 给我输出：

```
>> str(a)
>> 'Тест' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:06:42.350

选择一种可以编码西里尔符号的编码，例如 UTF-8：

```
>>> a = u'Тест'

>>> a.encode('utf-8')
'\xd0\xa2\xd0\xb5\xd1\x81\xd1\x82' 
```

ASCII 表没有西里尔字符的代码点，因此您需要明确指定编码。

但是，如果您只想打印字符串，那么您应该关心的是终端的编码和系统字体。

# javascript - Google 地图 API 从 V2 转换为 V3

> ID：16218277
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:02:41.020
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-api-2

我想将以下 2 个 google map V2 API 事件转换为 V3，但我一生都无法弄清楚该怎么做，有人可以给我一些指示吗？

```
 GEvent.addListener(map, "click", function(overlay, point){
    if (point != null) {
      window.status = "Click " + point.lat() + ", "+ point.lng();
    } 
          else if (overlay != null) 
        {
      window.status = "Overlay " + lastPoint.lat() + ", "+ lastPoint.lng();
    }
});
GEvent.addListener(map, "mousemove", function(point){
 lastPoint = point;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:11:18.437

尝试这个：

```
google.maps.event.addListener(map, 'click', function(event) {
  console.log(event.latLng);
}); 
```

*“v3 事件侦听器中不存在覆盖参数。如果您在 v3 地图上注册点击事件，则回调只会在用户点击基本地图时发生。如果您需要对这些点击做出反应，您可以在可点击的覆盖上注册额外的回调. "* - [https://developers.google.com/maps/articles/v2tov3#events](https://developers.google.com/maps/articles/v2tov3#events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T10:11:54.287

如果您需要点击覆盖并让覆盖可点击，请从覆盖传播点击：

```
var map = new google.maps.Map(document.getElementById("mapcanvas"), mapOptions);

google.maps.event.addListener(map, 'click', function(event) {
    console.log(event.latLng);
});

google.maps.event.addListener(overlay, 'click', function(event) {
    google.maps.event.trigger(map, 'click', event);
}); 
```

# c# - C#如何保证一个WPF控件的满载

> ID：16218278
> 
> 赞同：2
> 
> 时间：2013-04-25T15:02:41.007
> 
> 标签：c#, wpf, dependency-properties

我有一个控件，我向其中添加了自定义行为。

该行为有两个 DependencyProperties：

```
public SomeObject Player {
    get { return (e)GetValue(PlayerProperty); }
    set { SetValue(PlayerProperty, value); }
}

// Using a DependencyProperty as the backing store for Player.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty PlayerProperty =
    DependencyProperty.Register("Player", typeof(IVideoPlayerDTO), typeof(PlayerStreamBehavior), new UIPropertyMetadata(null));

public IntPtr Handle {
    get { return (IntPtr)GetValue(HandleProperty); }
    set { SetValue(HandleProperty, value); }
}

// Using a DependencyProperty as the backing store for Handle.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty HandleProperty =
        DependencyProperty.Register("Handle", typeof(IntPtr), typeof(PlayerStreamBehavior), new UIPropertyMetadata(IntPtr.Zero, OnHandleChanged)); 
```

每个都绑定到 WPF 中的某个对象。问题是在`OnHandleChanged`具有行为的控件完全加载之前激活了 Handle 属性，这会在尝试将 HwndHost 添加到控件时引发异常。在尝试添加 HwndHost 之前，如何确保控件已完全加载？Ps: 试过用`OnAttached()`，但是没用。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:11:01.803

尝试这个：

```
public MyControl()
{
    this.Loaded += MyControl_Loaded;
}

private void MyControl_Loaded(object sender, RoutedEventArgs e)
{
   // Control is full loaded
} 
```

# php - PHP打开多个连接

> ID：16218283
> 
> 赞同：0
> 
> 时间：2013-04-25T15:02:53.153
> 
> 标签：php, mysql, xampp

我想在不同的浏览器选项卡中运行同一脚本的多个脚本实例。我希望他们有不同的 MySQL 连接。每个都有其独特的联系。

我知道它[`mysql_connect`](http://php.net/manual/en/function.mysql-connect.php)有第四个参数`$new_link`应该打开一个新链接，但即使这样通常也不会打开一个新连接。有时确实如此。

我在 Widows 机器上安装了 XAMPP。

问题是：我如何绝对强制 PHP/MySQL 为脚本的每个实例打开一个新连接？脚本运行大约 2 分钟。

`http://localhost/myscript.php`

以下是 MySQL 代码的摘录。首先从数据库加载一个工作分配并将其标记为进行中：

```
public function loadRange() {
    try{
        $this->db()->query('START TRANSACTION');
        $this->row = $this->db()->getObject("
            SELECT * FROM {$this->tableRanges}
            WHERE
                status = " . self::STATUS_READY_FOR_WORK . "
                AND domain_id = {$this->domainId}
            ORDER BY sort ASC
            LIMIT 1");
        if(!$this->row) throw new Exception('Could not load range');
        $this->db()->update($this->tableRanges, $this->row->id, array(
            'thread_id' => $this->id,
            'status' => self::STATUS_WORKING,
            'run_name' => $this->runName,
            'time_started' => time(),
        ));
        $this->db()->query('COMMIT');
    } catch(Exception $e) {
        $this->db()->query('ROLLBACK');
        throw new Exception($e->getMessage());
    }
} 
```

然后脚本可能会也可能不会根据它找到的内容在另一个表中插入行。

最后，当任务完成时，分配行再次更新：

```
 $this->db()->update($this->tableRanges, $this->row->id, array(
        'status' => self::STATUS_EXECUTED,
        'time_finished' => time(),
        'count' => $count,
    )); 
```

特别是，该`$this->tableRanges`表看起来已被锁定。知道为什么会这样吗？它是一个 InnoDB 表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:05:02.050

> 我想在不同的浏览器选项卡中运行同一脚本的多个脚本实例。我希望他们有不同的 MySQL 连接。每个都有其独特的联系。

实际情况就是这样，无需任何额外的努力

> 问题是：我如何绝对强制 PHP/MySQL 为脚本的每个实例打开一个新连接。

答：什么都不做：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:19:22.817

每次您点击`http://localhost/myscript.php`一个新实例时都会运行。该实例的所有内容都是唯一的，Web 服务器生成一个新的 PHP 线程，其中所有资源、连接、变量都是唯一的。

只有状态管理设备，例如`sessions`，如果您在同一浏览器中使用不同的选项卡，也可以共享。如果你用不同的浏览器点击相同的 URL，状态管理资源也会不同。

要回答您的问题，就像之前提到的其他人一样 - 如果您使用的是每个实例，您的连接是不同的`mysql_connect`。您可以创建一个在应用程序退出时不会关闭的持久连接，并且`reuses`使用`mysql_pconnect`. 但是在您的代码中，您似乎使用的是后者，在这种情况下，您很好。

您可以尝试设置隔离读取级别，以防止在读取选择时表停滞

`SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED ;`

[更多信息可以在这里找到。](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)

同样，我想需要花点时间才能找到最有效的选项。

# java - DB2 或 Java 中的问题 - 处理 CLOB 数据类型

> ID：16218284
> 
> 赞同：0
> 
> 时间：2013-04-25T15:02:56.513
> 
> 标签：java, db2

我需要完全按照[这个](https://stackoverflow.com/questions/7188542/db2-comma-separated-output)问题从 DB2 中提取逗号分隔值，所以在快速谷歌搜索后，我通过在我的 select 子句中使用以下函数找到了解决方案：

```
SUBSTR(XMLCAST(XMLGROUP(', ' || col_1 AS C ORDER BY col_1)  AS clob), 3) AS RES_COL 
```

现在，返回的输出是 CLOB 而不是 VARCHAR。我尝试增加 VARCHAR 限制，但它给出了 CAST 错误。现在，我在 JAVA 中阅读此 CLOB 列时遇到了以下异常。

```
SQL state [HY000]; error code [0]; [BEA][DB2 JDBC Driver]SQLDIAGGRP was specified and not null.; nested exception is java.sql.SQLException: [BEA][DB2 JDBC Driver]SQLDIAGGRP was specified and not null.
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:407)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:458) 
```

我无法找到有关此异常的确切含义的任何帮助？我的理解是它与 JDBC 驱动程序有关，但有人可以对此进行更多解释吗？

否则，DB2 高手能否告诉我如何返回 VARCHAR 而不是 CLOB，让 JAVA 在查询时不报错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:16:14.767

通过在 XMLCAST 输出上使用 CAST 和 TRIM DB2 函数，我能够解决这个问题。现在我可以从查询中返回 VARCHAR 并且 JAVA 代码也可以正常工作。

```
 SUBSTR(TRIM(CAST(XMLCAST(XMLGROUP(', ' || col_1 AS C ORDER BY col_1) AS clob) AS VARCHAR(4096))), 3) AS RES_COL 
```

# perl - Mojolicious 自动启动/init() 子程序

> ID：16218287
> 
> 赞同：2
> 
> 时间：2013-04-25T15:03:02.880
> 
> 标签：perl, mojolicious

是否有为所有可用的 Mojolicious 路线编写自动启动子程序/方法的方法/功能？

也许是一个自动助手，但我还不知道该怎么做。

我认为这对于为几乎所有可用路由初始化数据库连接 $self->{dbh} 尤其有用，......所以我可以这样写：

```
helper DB => sub { state $dbh = Database->new };

get '/' => sub {
    my $self = shift;
    //$self->{dbh}  // is automatically initialized & shared
};

get '/another_route' => sub {
    my $self = shift;
    //$self->{dbh}  // also initialized & shared

}; 
```

代替：

```
get '/' => sub {
    my $self = shift;
    $self->{dbh} = init_db();
};

get '/another_route' => sub {
    my $self = shift;
    $self->{dbh} = init_db();
}; 
```

PS：我正在使用 Mojolicious:Lite、Perl 5.16、SQLite3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:22:29.417

我不是 100% 确定我理解你的问题，`helper`几乎完全符合你的要求，但你不应该使用对象的散列。以下是您将如何使用您的代码：

```
helper db => sub { state $dbh = Database->new };

get '/' => sub {
    my $self = shift;
    $self->db->do_somthing();
};

get '/another_route' => sub {
    my $self = shift;
    my $dbh = $self->db;
    ...
}; 
```

`helper`方法可供所有控制器、模板和主应用程序使用。

# python - Python：sys.path.append 与导入？

> ID：16218288
> 
> 赞同：2
> 
> 时间：2013-04-25T15:03:03.687
> 
> 标签：python, ironpython, python-import

我有一个（单个）.py 脚本。在其中，我需要导入一个库。

为了找到这个库，我需要调用 sys.path.append。但是，我不想硬编码库的路径，而是将其作为参数传递。

所以我的问题是，如果我在这个文件中创建一个函数（set_path），我需要导入文件，并且导入失败，因为路径尚未附加。

有什么好的方法可以解决这个问题？

评论后澄清：

*   我正在使用 IronPython，库路径是 CPython/lib 的路径。这条路径（可能）在每个系统上都不同。
*   据我所知，我不能通过 sys.argv 传递任何东西，因为脚本是在嵌入式 python 解释器中运行的，并且没有 main 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:05:01.170

您不应该在全局范围内进行导入，而是在附加路径后调用的函数内进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:06:35.223

也许使用 sys.argv 将文件作为参数传递，将其添加到路径中，然后导入它。然后像这样运行你的程序：

```
python my_program.py somefolder/some_import.py 
```

这是使用 sys.argv 的参考：http: [//www.pythonforbeginners.com/systems-programming/python-sys-argv/](http://www.pythonforbeginners.com/systems-programming/python-sys-argv/)

# wpf - 125000 是绘制边框的最大宽度吗？

> ID：16218292
> 
> 赞同：0
> 
> 时间：2013-04-25T15:03:31.337
> 
> 标签：wpf, xaml, width

以下简单的 XAML 在滚动查看器内的网格底部放置了一个边框，并将网格的宽度链接到滑块的值。

```
<Window x:Class="BorderWidth.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DrawBorder">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Grid Height="100" VerticalAlignment="Top" HorizontalAlignment="Left" Width="{Binding Value, ElementName=slider}">
                <Border BorderBrush="Gray" BorderThickness="0,0,0,1"/>
            </Grid>
        </ScrollViewer>
        <TextBox  Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Value, ElementName=slider}"/>
        <Slider x:Name="slider" Minimum="124000" Maximum="126000" Grid.Row="2" VerticalAlignment="Center" Margin="10"/>
    </Grid>
</Window> 
```

虽然宽度小于 125000 边框显示，但在该值之后它消失了。[边界控件的文档中](http://msdn.microsoft.com/en-us/library/system.windows.controls.border.aspx)没有提到最大宽度，并且控件的最大宽度通常[被记录](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.width.aspx)在介于`Single.MaxValue`和之间`Double.MaxValue`，即远大于 125000。这个 125000 上限是错误吗？还是记录在某处？

# asp.net-mvc - MVC Entity Framework 4 中的一对多关系出错

> ID：16218294
> 
> 赞同：0
> 
> 时间：2013-04-25T15:03:33.167
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

当我运行我的代码优先 MVC 应用程序并尝试访问 DeveloperAccountModel 详细信息页面或另一个加载父对象和 DeveloperAccountModel 集合的视图时，我收到以下错误：**导航属性“重定向”不是一个声明的属性输入“DeveloperAccountModel”**。在这一点上，我没有访问该属性（它确实存在！）只是试图加载 DeveloperAccountModel。

```
 [Table("sitedata")]
public class DeveloperAccountModel
{
    [Required]
    [RegularExpression("^[0-9]*$")]
    [Display(Name = "User id")]
    [Key]
    [Column("_rowid")]
    public long RowId { get; internal set; }

    // Other properties removed

    [Display(Name = "Redirects")]
    [NotMapped]
    [InverseProperty("DeveloperAccount")]
    public List<SiteRedirectModel> Redirects { get; internal set; }
} 
```

然后是依赖模型

```
[Table("siteredirects")]
public partial class SiteRedirectModel
{
    [Key]
    [Column("_rowid")]
    [Display(Name = "RowId")]
    public int RowId { get; internal set; }

    [Column("_siteid")]
    [Display(Name = "Developer account id")]
    public long DeveloperAccountModelId { get; internal set; }

    [NotMapped]
    [ForeignKey("DeveloperAccountModelId")]
    public virtual DeveloperAccountModel DeveloperAccount { get; internal set; }
} 
```

我已经尝试了各种教程和示例的多种变体，包括发生此错误或类似错误的其他时间，但我没有看到真正简单的东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:32:39.913

简单地说，从两个属性中删除`[NotMapped]`属性。因此，您的属性定义应如下所示：

```
// In SiteRedirectModel
[ForeignKey("DeveloperAccountModelId")]
public virtual DeveloperAccountModel DeveloperAccount { get; internal set; }

// In DeveloperAccountModel
[Display(Name = "Redirects")]
[InverseProperty("DeveloperAccount")]
public List<SiteRedirectModel> Redirects { get; internal set; } 
```

# ruby-on-rails - rails3 用户每天只能投票一次

> ID：16218295
> 
> 赞同：0
> 
> 时间：2013-04-25T15:03:41.603
> 
> 标签：ruby-on-rails, validation, rate, vote

```
class Rate < ActiveRecord::Base
 attr_accessible :image_id, :rate, :user_id
 belongs_to :image
 belongs_to :user
 validate :user_can_rate_after_one_day

 before_save :default_values

def default_values
 self.rate ||=0
end

protected
  def user_can_rate_after_one_day
    r=Rate.where(:image_id =>image_id, :user_id=> user_id).order("created_at DESC").limit(1)

    if( (Time.now - 1.day) < r[0].created_at)
      self.errors.add(:rate,"you can only vote once per day") 
    else
      return
    end
  end
end 
```

我有一个评分模型，我希望用户每天只能评分一次。我编写了 user_can_rate_after_one_day 方法来验证它。如果我删除该功能，用户可以多次评价，如果我添加该功能，用户不能评价它。有人知道这里有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-23T05:46:41.533

我也有同样类型的问题。我试图创建一个应用程序，其中特定用户只能为当天添加站立。我在控制器创建操作中编写了代码。逻辑与您的问题几乎相似，但我在您的代码中发现了一个问题，由于未正确比较您的日期`Time.now - 1.day`以这种格式返回`2018-01-22 11:24:23 +0545`并`standup[0].created_at`以这种格式返回`Mon, 22 Jan 2018 08:58:57 UTC +00:00`。因此，为了解决这个问题，我将日期都转换为相同的格式，即 `(Time.now - 1.day).strftime('%F %H:%M:%S') < standup[0].created_at.strftime('%F %H:%M:%S')`返回`true`，并且代码有效。

它也可能对其他观众有帮助。

# php - 将工具提示添加到 css printfile 表

> ID：16218305
> 
> 赞同：0
> 
> 时间：2013-04-25T15:04:01.513
> 
> 标签：php, css, tooltip

我想从文件中打印一个表格，这样非极客群体可以在没有我帮助的情况下轻松更新表格。问题是我希望表格的第一行为每列打印不同的工具提示。我如何在 php 中执行此操作，或者有更好的方法吗？

`echo "<tr><th>Date Available From (TOOLTIP) </th><th> Photo (TOOLTIP)</th><th> Age (TOOLTIP)</th><th> Breed (TOOLTIP)</th>`

```
<?php 
$tdcount = 1; $numtd = 13; // number of cells per row 
print "<table class='hovertable'>";
print "<tr><th colspan=13><h1>AVAILABLE HORSES</h1></th></tr>";
       echo "<tr><th>Date Available From  </th><th>Photo</th><th>Age</th><th>Breed</th><th>Gender</th><th>Height</th><th>Colour</th><th>Price</th><th>Bred</th><th>Training</th><th>Known soundess illness injuries</th><th>Description</th><th>Status</th></tr>";

        $f = fopen("available.txt", "r") or die("can't open file"); 
        while (!feof($f)) { 
        $arrM = explode(",",fgets($f)); 
    $row = current ( $arrM ); 
    if ($tdcount == 1) 
    print "<tr onmouseover=\"this.style.backgroundColor='#f9ce68';\" onmouseout=\"this.style.backgroundColor='#d4e3e5';\">"; print "<td>$row </td>"; 
        if ($tdcount == $numtd) { 
            print "</tr>"; 
            $tdcount = 1; 
        } else { 
            $tdcount++; 
        } 
        } 
        if ($tdcount!= 1) { 
            while ($tdcount <= $numtd) { 
                print "<td>&nbsp;</td>"; $tdcount++; 
            } print "</tr>"; 
        } 
        print "</table>"; 
    ?> 
```

解决它。

从 php 中拉出表格和第一行，它们不需要在那里，现在我可以按照我想要的方式将工具提示放在图像上。

感谢大家的建议！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:25:16.320

**要部分回答您的问题，您可以使用 :**
`<th title='Date Available From'>Date Available From</th>`，仅在 Firefox 和 IE7 中测试。

至于您关于人们自己更新字段的问题，您必须查看数据库；平面文件或 SQL。

所有标题都已添加到表格的第一行：

```
<?php

$tdcount = 1; $numtd = 13; // number of cells per row 
print "<table class='hovertable'>";
print "<tr><th colspan=13><h1>AVAILABLE HORSES</h1></th></tr>";
   echo "<tr><th title='Date Available From'>Date Available From  </th><th title='Photo'>Photo</th><th title='Age'>Age</th><th title='Breed'>Breed</th><th title='Gender'>Gender</th><th title='Height'>Height</th><th title='Colour'>Colour</th><th title='Price'>Price</th><th title='Bred'>Bred</th><th title='Training'>Training</th><th title='Known soundess illness injuries'>Known soundess illness injuries</th><th title='Description'>Description</th><th title='Status'>Status</th></tr>";

    $f = fopen("available.txt", "r") or die("can't open file"); 
    while (!feof($f)) { 
    $arrM = explode(",",fgets($f)); 
$row = current ( $arrM ); 
if ($tdcount == 1) 
print "<tr onmouseover=\"this.style.backgroundColor='#f9ce68';\" onmouseout=\"this.style.backgroundColor='#d4e3e5';\">"; print "<td>$row </td>"; 
    if ($tdcount == $numtd) { 
        print "</tr>"; 
        $tdcount = 1; 
    } else { 
        $tdcount++; 
    } 
    } 
    if ($tdcount!= 1) { 
        while ($tdcount <= $numtd) { 
            print "<td>&nbsp;</td>"; $tdcount++; 
        } print "</tr>"; 
    } 
    print "</table>"; 
?> 
```

# sql - 如何处理表连接中的可为空列

> ID：16218314
> 
> 赞同：1
> 
> 时间：2013-04-25T15:04:28.427
> 
> 标签：sql, sql-server, join, null

我有一种情况，我试图查找在版本中有效的属性。我在下面有一个版本表和属性表。属性记录有一个版本，它们被引入和删除。

我正在尝试选择在引入和删除之间的属性。但是删除为空，这使我的加入变得混乱。我已经用下面的 SQL 进行了补偿（以一种丑陋的方式）。如果删除的 in 为 null，我将其设置为 int 的最大值。这可行，但是当 Removed In 为 null 时忽略连接中的第二个限定条件会很好。有什么想法吗？

```
**Version**
    id      Name
    ---     -----------------
    1           VersionA
    2           VersionB

**Property**
    id          Name                IntroducedInVersion     RemovedInVersion
    ---         -----------------   -------------------     -----------------
    1               Property1       1                       null
    2               Property2       1                       2

SELECT 
    p.PropertyName
    ,p.IntroducedInVersion
    ,p.RemovedInVersion
FROM
    Version v
    join Property p on p.IntroducedInVersion <= v.Id 
        and ISNULL(cp.RemovedInVersion, 2147483647) > v.Id
WHERE 
    v.Id = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:13:28.707

你可以这样做：

```
SELECT 
  p.PropertyName
  ,p.IntroducedInVersion
  ,p.RemovedInVersion
FROM Version v
join Property p
  on (RemovedInVersionp is null
    and v.id > IntroducedInVersion)
    or
    v.id between IntroducedInVersion
         and RemovedInVersion - 1
WHERE  v.Id = 1 
```

但我认为它的性能不如您原来的查询。

更好的选择是：

```
SELECT 
  p.PropertyName
  ,p.IntroducedInVersion
  ,p.RemovedInVersion
FROM Version v
join Property p
  on v.id between IntroducedInVersion
       and ifnull(RemovedInVersion - 1, v.id)
WHERE v.Id = 1 
```

之所以有效，是因为一个值等于它自己，所以它会“介于”它自己和另一个值之间。

# android - 单击android ListActivity中的项目不起作用

> ID：16218315
> 
> 赞同：1
> 
> 时间：2013-04-25T15:04:30.677
> 
> 标签：android, imageview, listactivity, listadapter

我有带有自定义 ArrayAdapter 的 ListActivity 和列表​​项的以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" 
android:paddingTop="5dip"
android:paddingBottom="5dip" >

<ImageView
    android:id="@+id/image"
    android:layout_width="48dip"
    android:layout_height="48dip" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/white"
        android:textSize="24.5sp" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/white" 
        android:textSize="12sp"/>
</LinearLayout> 
```

我的问题是，我无法单击任何列表项。到目前为止，我尝试将`focusable`,设置`clickable`为`false`（我发现这可能会有所帮助）我的 ImageView，但不幸的是，问题仍然存在。请帮忙，这一直困扰着我一整天。谢谢你。

编辑：好的，所以威廉的回答帮助我解决了这个问题，现在唯一的问题是，当我将背景颜色更改为黑色时（通过在清单中为此列表活动设置新主题），单击项目不会突出显示它。这是我的文件夹中活动主题的自定义样式`<style name="ContentsListTheme"> <item name="android:background">@color/black</item> </style>`。`res/values/styles/`

为了清楚起见，再一次，默认的 ListActivity 背景颜色是白色。我要黑色 当我从上面应用样式时，单击时列表活动项突出显示被禁用。如何再次启用它，以默认突出显示颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:07:34.113

在你`oncreate`尝试这个

```
ListView lv = getListView();
lv.setTextFilterEnabled(true);
lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
    int position, long id) {
}); 
```

**或者**你可以编写这个函数来处理列表项的点击

```
protected void onListItemClick(ListView l, View v, int position, long id) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:18:42.823

尝试这个

```
ListView lv=(ListView)findViewById(yourlistview);
Lv.setonItemClickListener(this);

public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

    paret.getItemAtPositon(position);
    //this returns you an object cast it into the same object you passed to your adapter cast to string if values passed were string
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:11:02.503

我有这个工作代码，我认为你的 Java 代码是问题所在。

```
public class NewsListActivity extends Activity implements OnItemClickListener 
```

...

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);
        listView = (ListView) findViewById(R.id.listView);
        listView.setAdapter(new NewsDataArrayAdapter(NewsListActivity.this, headlines));
        listView.setOnItemClickListener(this); 
```

...

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        if (v == null) {
            return;
        } 
```

# c# - 尝试上传到 FTP：System.Net.WebException：系统错误

> ID：16218318
> 
> 赞同：6
> 
> 时间：2013-04-25T15:04:36.193
> 
> 标签：c#, ftp, ftpwebrequest

我有一个接受 XML 并最终根据 XML 中的信息上传文件的 API。上传是按计划进行的（也来自 XML），我已经测试了它周围的所有东西，并且知道它可以工作。

我在每个时间周期中尝试上传的第一个文件大约有 40% 的时间出现错误（时间周期 = 某些文件为 45 分钟，其他文件为 30 分钟）。

这是我的上传代码：

```
try {
    LoggerFTP.Log("Uploading file: " + filename, false);

    // Create the request.
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(appSettingsFTP.ftpUrl + @"/" + filename);
    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.Timeout = 6000000; //set to 100 minutes
    //request.Timeout = -1; //set to infinite

    // Add the login credentials.
    request.Credentials = new NetworkCredential(appSettingsFTP.ftpLogin, appSettingsFTP.ftpPassword);

    // Grab the file contents.
    StreamReader sourceStream = new StreamReader(appSettingsFTP.uploadFileDirectory + filename);
    byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
    sourceStream.Close();
    request.ContentLength = fileContents.Length;

    // Copy the file contents to the outgoing stream.
    Stream requestStream = request.GetRequestStream();
    requestStream.Write(fileContents, 0, fileContents.Length);
    requestStream.Close();

    FtpWebResponse response = (FtpWebResponse)request.GetResponse();
    //Logger.Log(filename.ToString() + " " + "Upload Complete, Status: " + response.StatusCode + " " + response.StatusDescription, false);
    //Took response.StatusDescription out because it appears to be creating extra line feeds.
    LoggerFTP.Log(filename.ToString() + " " + "Upload Complete, Status: " + response.StatusCode, false);
}
catch (Exception ex) {
    LoggerFTP.Log(ex.ToString(), false);
} 
```

我已经研究了这个问题，并在网上看到了一些关于它可能是速度的东西。就像，有一个超时。但是我将 FtpWebRequest 的超时设置为 100 分钟，所以不可能是这样吗？我不知道。这也是作为服务运行的，因此很难测试代码的这方面。

这是在我的记录器（e.ToString）中记录的异常：

```
System.Net.WebException: System error. ---> System.Net.InternalException: System error.
   at System.Net.PooledStream.PrePush(Object expectedOwner)
   at System.Net.ConnectionPool.PutConnection(PooledStream pooledStream, Object owningObject, Int32 creationTimeout, Boolean canReuse)
   at System.Net.FtpWebRequest.FinishRequestStage(RequestStage stage)
   at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.Net.FtpWebRequest.RequestCallback(Object obj)
   at System.Net.CommandStream.Dispose(Boolean disposing)
   at System.IO.Stream.Close()
   at System.IO.Stream.Dispose()
   at System.Net.ConnectionPool.Destroy(PooledStream pooledStream)
   at System.Net.ConnectionPool.PutConnection(PooledStream pooledStream, Object owningObject, Int32 creationTimeout, Boolean canReuse)
   at System.Net.FtpWebRequest.AttemptedRecovery(Exception e)
   at System.Net.FtpWebRequest.SubmitRequest(Boolean async)
   --- End of inner exception stack trace ---
   at System.Net.FtpWebRequest.GetRequestStream()
   at CPMainSpringAPIExportsSC.UploadFTP.FTPUploadMethod(String viewname, String filename) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-20T23:38:47.673

我在尝试通过 SSL 进行 FTP 的 SSIS 包中得到完全相同的堆栈跟踪。如果没有 SSL，它就可以很好地工作，但是一旦我启用 SSL，它就会爆炸。

```
 System.Net.WebException: System error. --->
    System.Net.InternalException: System error.    at
    System.Net.PooledStream.PrePush(Object expectedOwner)    at
    System.Net.ConnectionPool.PutConnection(PooledStream pooledStream, Object owningObject, Int32 creationTimeout, Boolean canReuse)    at
    System.Net.FtpWebRequest.FinishRequestStage(RequestStage stage)    at
    System.Net.FtpWebRequest.SyncRequestCallback(Object obj)    at
    System.IO.Stream.Close()    at
    System.Net.ConnectionPool.Destroy(PooledStream pooledStream)    at
    System.Net.ConnectionPool.PutConnection(PooledStream pooledStream, Object owningObject, Int32 creationTimeout, Boolean canReuse)    at
    System.Net.FtpWebRequest.AttemptedRecovery(Exception e)    at
    System.Net.FtpWebRequest.SubmitRequest(Boolean async)
    --- End of inner exception stack trace ---    at
    System.Net.FtpWebRequest.CheckError()    at
    System.Net.FtpWebRequest.GetRequestStream()    at
    ST_0ff7348de65a468bb358ab0206e3721f.ScriptMain.Main() in c:\Users\Stephens\AppData\Local\Temp\Vsta\e664c8a71bb647ff9e9dc6ac32d7b615\ScriptMain.cs:line 155 at 
    System.Net.FtpWebRequest.CheckError()    at
    System.Net.FtpWebRequest.GetRequestStream()    at
    ST_0ff7348de65a468bb358ab0206e3721f.ScriptMain.Main() in c:\Users\Stephens\AppData\Local\Temp\Vsta\e664c8a71bb647ff9e9dc6ac32d7b615\ScriptMain.cs:line 155 
```

因为这个错误太笼统了，所以我决定查看 .NET 源代码，看看是否能找到关于什么是破坏的线索。如果你去这里：

[http://labs.developerfusion.co.uk/SourceViewer/browse.aspx?assembly=SSCLI&namespace=System.Net#{%22pageClientState%22%3A%22type-2844%2Ccsharp%22}](http://labs.developerfusion.co.uk/SourceViewer/browse.aspx?assembly=SSCLI&namespace=System.Net#%7B%22pageClientState%22%3A%22type-2844%2Ccsharp%22%7D)

并跳到第 281 行，您将看到内部 void PrePush(object expectedOwner) 的定义，这是发生异常时正在执行的操作。这是它的样子：

```
 internal void PrePush(object expectedOwner)
    {
        lock (this) {
            //3 // The following tests are retail assertions of things we can't allow to happen.
            if (null == expectedOwner) {
                if (null != m_Owner && null != m_Owner.Target)
                    throw new InternalException();
                // new unpooled object has an owner
            }
            else {
                if (null == m_Owner || m_Owner.Target != expectedOwner)
                    throw new InternalException();
                // unpooled object has incorrect owner
            }

            m_PooledCount++;

            if (1 != m_PooledCount)
                throw new InternalException();
            // pushing object onto stack a second time
            if (null != m_Owner)
                m_Owner.Target = null;
        }
    } 
```

最终我发现 FtpWebRequest 只支持显式 FTP（端口 21）而不支持隐式 FTP（端口 990）。此处明确说明了这一点：

[.NET FtpWebRequest 是否同时支持隐式 (FTPS) 和显式 (FTPES)？](https://stackoverflow.com/questions/1842186/does-net-ftpwebrequest-support-both-implicit-ftps-and-explicit-ftpes)

无论如何，就我而言，这是一个防火墙问题。最初我们配置为隐式 FTP，即端口 989、990、49152-65535（根据供应商的技术人员）。我咨询了我的网络人员，我们为明确开放了 20、21、989、990 和 40000-655535 端口，之后一切都像冠军一样工作。

但是，在您的情况下，您似乎对连接池感到兴奋。这里有一篇关于这个主题的好帖子：

[如何提高 FtpWebRequest 的性能？](https://stackoverflow.com/questions/1016690/how-to-improve-the-performance-of-ftpwebrequest)

您可能想看看如何设置连接池，看看是否可以取得一些进展。希望这可以帮助！

问候，

斯图尔特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T14:13:01.680

我知道这是一个老话题，但对于任何有同样问题的人来说，缺少的代码是：

```
 request.EnableSsl = false; 
```

# ruby-on-rails - Ruby on Rails SQlite 3 数据库查询

> ID：16218319
> 
> 赞同：0
> 
> 时间：2013-04-25T15:04:48.423
> 
> 标签：ruby-on-rails, ruby

我一直在网上寻找有关如何对 Ruby on Rails 进行查询的信息，我可以找到如何构建查询的信息，但找不到我放置物理代码的位置。我对 Ruby on Rails 很陌生。

我有一个名为故事的数据库，它有我制作的标题和内容列。我有一个页面用于输入标题和内容，然后存储到数据库中，然后我有一个页面显示数据库的所有内容，但我不明白如何进行查询以查找让我们说，“一条记录其内容或标题包含某个单词或短语”

```
 <%= @story.content %> 
```

所以我知道在屏幕上显示内容，我只是对查询做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:23:51.260

在 Rails 中使用活动记录而不是直接 sql 查询

这是一个很好的链接来解释它......

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

例如，假设您有后期模型并且您想要

1.  索引所有帖子然后使用

    @posts = Post.all

2.  你想显示特定的帖子，通过 id 找到它

    @post = Post.find(params[:id])

3.  创建一个新帖子

    @post = Post.new

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:21:51.797

根据您的查询，在您的控制器中写如下

```
@stories = Story.where("stories.content IS NOT NULL")  #Records those has a content
@stories = Story.where("stories.title LIKE%a_certain_word_or_phrase%") # Records that contains a certain word or phrase 
```

如果您只想从数据库中获取一个 recoed，您可以使用 .first .last 例如

```
@sotory = Story.where("stories.content IS NOT NULL").first #first item which has content
@sotory = Story.where("stories.content IS NOT NULL").first #last item which has content 
```

您也可以通过 id 找到

```
@story = Story.find(1) # finds the record with id = 1 
```

等等 ......

我认为您需要一个很好的教程。由于您是新手，请查看[Ruby on Rails 指南：Active Record 查询接口](http://guides.rubyonrails.org/active_record_querying.html)

# laravel - Laravel 3.x 资产：如何包含外部 url

> ID：16218328
> 
> 赞同：0
> 
> 时间：2013-04-25T15:05:04.733
> 
> 标签：laravel, assets, laravel-3

我正在尝试在 Laravel Assets 容器中包含一个 google CDN jquery 链接，但该链接被连接到我的站点地址，如下所示：

```
<script src="http://mybeautifulsite.com/<script src=" http:="" ajax.googleapis.com="" ajax="" libs="" jquery="" 1.8.3="" jquery.min.js"=""></script> 
```

有没有办法将外部链接包含到资产容器中？

**编辑**

这是我用来包含资产的代码：

```
Asset::add('jquery', '<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T22:12:22.540

应该只是：

```
Asset::add('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'); 
```

虽然[文档](http://laravel.com/docs/views/assets#registering-assets)没有明确讨论绝对 URL，但代码是以处理它们的方式编写的。

# c++ - 在 CPP 中，可以 for replace while 和 if replace switch？

> ID：16218331
> 
> 赞同：1
> 
> 时间：2013-04-25T15:05:09.340
> 
> 标签：c++

我想每个`switch`算法都可以被算法重写`if...else if...else`，那为什么我们还需要`switch`更多呢？***代码效率***有很大差异吗？

同样的问题也适用于`for`循环`while`算法。

# excel - 使用带有过滤的公式的 Excel 数据验证列表

> ID：16218332
> 
> 赞同：15
> 
> 时间：2013-04-25T15:05:10.513
> 
> 标签：excel, excel-formula, validation

我有以下工作簿：

工作表**帐户**：

![帐户工作表](https://i.stack.imgur.com/9NLQd.png)

工作表**帖子**：

![帖子工作表](https://i.stack.imgur.com/5R844.png)

我想知道是否可以使用公式将列表类型的数据验证定义到工作表**帖子中的整个****B**列，以便数据验证弹出窗口仅显示帐户工作表中的帐户**ID**，其中**网站**列**与****帖子**中选定行的**网站**列匹配工作表，哪些在**状态**列中具有*活动值？*

 *******用 SQL-ish 或 LINQ-ish 的话：

> 从帐户中选择 ID，其中网站 = @SelectedPostRow.Website 并且状态 = 活动

第二张图片上的标记显示了哪些值应显示在下拉列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:53:45.330

是的，您可以这样做，但它需要一些支持设置。

首先，对于您的每个网站选项，您需要为您要创建的下拉列表中的选项创建一个命名范围。

为此，只需突出显示单元格列表并右键单击，选择命名范围

然后，您需要为您的网站名称创建一个查找列表到命名范围的可能性

然后在您的数据验证源中使用这样的论坛：

```
=indirect(vlookup(a1,$i$8:$j$13,2,false)) 
```

然后whala，下拉列表会根据网站价值而变化。

现在，如果您还需要自动化命名范围位，您可以将它们更改为包含整个列，然后使用数据透视表来提取数据。每个网站选项只需要一个独立的支点。

每次您提取新数据时，您都需要刷新枢轴，但它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T12:40:52.387

这个问题需要一点准备。在同一个工作表或另一个工作表中，复制您的数据（或添加相关单元格）

在 A 列中，您有一个可以排名的数字。我用（单元格A2）获得它：

> =IF(C2=$J$2,1,0)*IF(E2="活动",1,0)*ROW()

在 B 列中对数字进行排名并排除不需要的行 (B2)：

> =IF(A2=0,0,RANK(A2,A:A))

然后，您可以使用 G 列中的枚举（手动输入）在 H 列中进行 VLOOKUP。H1 的公式：

> =IFERROR(VLOOKUP(G2,$B$2:$D$9,3,FALSE),"")

现在您可以根据 H 列设置验证

![截屏](https://i.stack.imgur.com/mFu9A.png)

PS：公式中可能有小错误，因为我是从意大利语翻译过来的，我无法用英语进行测试。*******

# java - 将 Unicode 文本从数据库显示到 JTextArea

> ID：16218343
> 
> 赞同：0
> 
> 时间：2013-04-25T15:05:42.757
> 
> 标签：java, unicode, jtextarea

我有一个数据库，其中包含多种语言的文本，例如英语、印地语、泰卢固语、泰米尔语、马拉地语。

英语和印地语文本显示完美。但是当我选择泰卢固语、泰米尔语等其他语言时，它会显示方框。

```
 JTextArea txtMessage = new JTextArea();
            txtMessage.setLineWrap( true );     
            txtMessage.setWrapStyleWord( true );
            JScrollPane scrollPane = new JScrollPane(txtMessage);
            scrollPane.setBounds(93, 125, 226, 97);
            frame.getContentPane().add(scrollPane);

 lang = cbLanguage.getSelectedItem().toString();
 String sql2 = "Select message from messages where language = '"+lang+"';";
try {
    result = statement.executeQuery(sql2);
    while(result.next()){
        txtMessage.setText(result.getString(1));
    }
} catch (SQLException e) {
            // TODO Auto-generated catch block
        e.printStackTrace();
} 
```

如何让它正确显示泰米尔语和泰卢固语字体？

# hadoop - Hive 总是给出“在编译时确定的减少任务数：1”，无论我做什么

> ID：16218350
> 
> 赞同：1
> 
> 时间：2013-04-25T15:05:53.803
> 
> 标签：hadoop, hive

```
create external table if not exists my_table
(customer_id STRING,ip_id STRING)
location 'ip_b_class'; 
```

接着：

```
hive> set mapred.reduce.tasks=50;
hive> select count(distinct customer_id) from my_table;
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks determined at compile time: 1 
```

里面有 160GB，加上 1 个减速器需要很长时间......

```
[ihadanny@lvshdc2en0011 ~]$ hdu 
Found 8 items
162808042208   hdfs://horton/ip_b_class 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:55:23.497

从逻辑上讲，这里不能有多个减速器。除非来自各个地图任务的所有不同客户 ID 都集中到一个地方，否则无法确定区别并且无法生成单个计数。换句话说，除非您将所有客户 ID 堆放在一个位置，否则您不能说每个 ID 都是不同的并最终计算它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T15:06:10.837

@Rags 提供的原始答案和解释是正确的。附加的链接通过重写查询为您提供了很好的解决方法。我建议如果您不想重写查询，请使用此选项为减速器提供更多内存：

```
set mapreduce.reduce.java.opts=-Xmx8000m 
```

该选项将 reducer 使用的最大内存设置为 8 GB。如果你有更多，那么你可以在这里指定更高的值。希望这可以帮助

# javascript - Jquery如何使用多个div的显示效果给出方向？

> ID：16218352
> 
> 赞同：0
> 
> 时间：2013-04-25T15:06:03.067
> 
> 标签：javascript, jquery, html

我有一些 jQuery 代码的问题，我试图在表单中显示一些字段，但只有当用户单击是时它们才必须出现，并且当他单击否时隐藏。这有效但是当它显示字段时，它将它们安装在彼此的顶部。我试图给它方向，但没有工作。这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<style>
div { background:#def3ca; margin:3px; width:80px;
display:none; float:left; text-align:center; }
</style>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>

<label> Do you want to create a new entry?  </label>
<button id="showr" type="button" >YES</button>
<button id="hidr" type="button" >NO</button>
<br/>

<div class="mydiv">
 <label> Field #1 
 <span class="small">Describe your field</span>
 </label>
 <textarea  rows="10" cols="40" name="" id=""  ></textarea>
</div>

<div class="mydiv">
 <label> Field #2
 <span class="small">Describe your field</span>
 </label>
 <textarea  rows="10" cols="40" name="" id=""  ></textarea>
</div>

<script>
$("#showr").click(function () {
$("div").first().show("fast", function showNext() {
$(this).next("div").show("fast", showNext);
});
});

$("#hidr").click(function () {
$("div").hide(1000);
});
</script>

</body>
</html> 
```

[相关的jsFiddle](http://jsfiddle.net/Cwalkdawg/RUyxD/)

如果有人有想法请告诉我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:13:39.920

将此添加到您的样式中：

```
.mydiv{ clear:both;} 
```

你说的方向是什么意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:36:05.807

## [jsFiddle](http://jsfiddle.net/Cwalkdawg/RUyxD/3/)

要获得包括居中在内的所需结果，请使用以下 CSS：

```
.mydiv {
    background:#def3ca;
    margin: 0 auto;
    width:400px;
    text-align:left;
    clear:both;
    display: none;
}
.mytext {
    text-align:center;
}
.wrapper {
    display:block;
} 
```

使用以下标记：

```
<div class="wrapper">
    <label>Do you want to create a new entry?</label>
    <button id="showr" type="button">YES</button>
    <button id="hidr" type="button">NO</button>
    <br/>
    <div class="mydiv">
        <label>Field #1 <span class="small">Describe your field</span>

        </label>
        <div class="mytext">
            <textarea rows="10" cols="40" name="" class="txtField" id=""></textarea>
        </div>
    </div>
    <div class="mydiv">
        <label>Field #2 <span class="small">Describe your field</span>

        </label>
        <div class="mytext">
            <textarea rows="10" cols="40" name="" class="txtField" id=""></textarea>
        </div>
    </div>
</div> 
```

请注意，我在所有内容周围添加了一个包装器，`display: block`然后将其设置在您的边距中，因为`.mydiv`我将其设置为`0 auto`. 这允许居中。

我还对您的 jQuery 进行了一些改进。

```
$("#showr").click(function () {
    $(".mydiv").show("fast");
});

$("#hidr").click(function () {
    $(".mydiv").hide(1000);
}); 
```

# c# - 如何在silverlight c#中以星路径的形状剪辑网格？

> ID：16218353
> 
> 赞同：0
> 
> 时间：2013-04-25T15:06:14.520
> 
> 标签：c#, silverlight, xaml, windows-phone-8

我有一个`Grid`&`Star`形`Path`。

```
 <Path x:Name="StarPath" Data="M213,135 L183,213 L87,246 L159,288 C159,288 140,372 140,375 C140,378 226,329 226,329 L303,367 L280,275 L316,216 L246,219" Fill="#FF0EB679" HorizontalAlignment="Left" Height="241.132" Margin="86.5,134.5,0,0" Stretch="Fill" Stroke="Black" UseLayoutRounding="False" VerticalAlignment="Top" Width="230"/>
 <Grid HorizontalAlignment="Left" Height="300"  Width="300" Background="#FFD11010"/> <br/><br/> 
```

我正在尝试获取我的`Grid in the shape of Star shaped Path`.
任何人都可以为我提供任何提示或样本`Clipping Grid by Path by Code`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:12:49.687

您可以尝试调整[此方法](https://stackoverflow.com/questions/396500/convert-a-silverlight-text-to-a-path)...

`MyGrid.Clip = getPathGeometry(StarPath.Data.ToString());`

您必须添加“||” 在 if 测试中，并更改 data.replace 为`data = data.Replace("M", " M").Replace("C", " C").Replace("L", " L");`

# c# - new object[] {} 和 new [] {} 有什么区别？

> ID：16218354
> 
> 赞同：1
> 
> 时间：2013-04-25T15:06:17.590
> 
> 标签：c#

有时当将任意对象数组传递给 Activator 时，我会看到以下符号：

```
new [] {5, "Five"} 
```

在其他情况下，这似乎需要一个命名的对象字典，我看到了：

```
new {Numeric = 5, Textual = "Five"} 
```

这第二个表达式究竟是什么创建了一个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:09:39.280

第一个代码生成一个对象数组。

实际上，第二个代码无法编译。如果你的意思是`new [] { new { Numeric = 5, Textual = "Five"} }`它是一个匿名类型的数组，但你应该澄清一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:07:25.000

第二个声明看起来像匿名类型，但它不会编译。您似乎想要拥有一组匿名对象，您可以像这样创建它们：

```
var anonArray = new[] { new { Numeric = 5, Textual = "Five" }, 
                        new { Numeric = 6, Textual = "Six" }}; 
```

[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)：

> 匿名类型提供了一种方便的方法，可以将一组只读属性封装到单个对象中，而无需先显式定义类型。类型名称由编译器生成，在源代码级别不可用。每个属性的类型由编译器推断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:19:10.340

第一个示例是创建一个类型数组，`object`并在其中放入一个整数和一个字符串。

第二个示例是创建一个匿名类型的数组（大小为 1）。（当`new []`数组`new {Numeric = 5, Textual = "Five"}`（`Numeric`type `int`（类型是根据分配给它的内容推断出来的）并且具有 value和type和 value`5`的属性。`Textual``string``"Five"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:20:12.617

第一个示例是一个`object`s 数组。它包含两个对象： an`int` `5`和 a `string` `"Five"`。第二个是匿名类型的数组。它包含一个对象。一个对象有两个属性，`int Numeric`一个值为`5`，`string Textual`一个值为`"Five"`。

第二种更加明确和类型安全，但作为匿名类型，在本地上下文之外没有用处；第一个在某些情况下可能很有用，例如通过反射将参数传递给方法。

# java - Java，读取一行文本并写入单独的文件

> ID：16218364
> 
> 赞同：-2
> 
> 时间：2013-04-25T15:06:43.687
> 
> 标签：java, readfile, createfile

问这个问题很愚蠢，但我想知道。我必须阅读一行文本并写入单独的文件。我知道如何阅读一行并处理该文本，但我不知道将两者放在一起。我有一个包含数据的文本文件，顶部有标题，我需要每个新文件的标题以及新文件下一行的数据。我能够为此创建逻辑。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:14:45.790

网上很多例子

```
PrintWriter writer = null;
try {
    writer = new PrintWriter(new FileWriter(new File("pathToNewFile")));

    //do reading etc
    writer.println(stringVariableToWrite);

} catch (IOException e) {
    System.err.println(e);
} finally {
    if (writer != null){
        writer.close();
        if (writer.checkError()) {
             System.err.println(e);
        }
    }
} 
```

# android - 自动更新 TextView

> ID：16218369
> 
> 赞同：0
> 
> 时间：2013-04-25T15:06:50.173
> 
> 标签：android, android-webview, android-contentprovider, textview

我有一个带有 textview 的活动，每次按下上一个或后退按钮时都会显示不同的引号。如果我在 arrays.xml 文件中添加 10000 个引号，然后将其传递给 textview，那将非常有趣。

有没有我可以使用的方法，从我自己的博客中提取文本并在文本视图中显示引用。我的意思是，我不必提示用户更新整个应用程序，只需在云上进行更新，每次用户连接到应用程序时它都会在应用程序中更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T03:10:08.823

只需尝试解析您的 xml 提要并将该内容显示到 textview 中。您还可以使用文本文件并使用不同的索引显示其内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T15:15:31.967

您是否查看过 Google Cloud Messaging (GCM) 服务，看看这是否可以帮助您？我从来没有看过它，只是以为我在某个地方读到了其他开发人员的信息！

# javascript - 背景图像div周围不需要的边框

> ID：16218370
> 
> 赞同：0
> 
> 时间：2013-04-25T15:06:50.753
> 
> 标签：javascript, html, css, mobile-safari, background-image

我的背景图像周围有一条细线或边框。我正在通过javascript动态更改父div的高度，以便内部div（具有背景图像集）将“粘”到窗口底部。

桌面浏览器上不会出现线条，但在脚本运行后的移动浏览器上，通常会在其周围出现一个细边框：

![在此处输入图像描述](https://i.stack.imgur.com/anVAs.jpg)

边界在左边，它应该的方式在右边。有什么建议么？

这是脚本：

```
<script type="text/javascript">
function layoutHandler(){
    if(window.innerHeight > 1061){
    var newsize = 150 + (window.innerHeight - 1061);

        document.getElementById("footerwrapper").style.height = newsize+'px';
    }
    else {
        document.getElementById("footerwrapper").style.height = '150px';
    }
}
window.onload = layoutHandler;

window.onresize = layoutHandler;
layoutHandler();
</script> 
```

然后内部 div 设置如下：

```
#inner {
    background-color: #FFF;
    padding: 0px;
    height: 150px;
    bottom: 0px;
    width: 100%;
    position: absolute;
    background-image: url(Images/grad.png);
    background-repeat: repeat-x;
} 
```

**编辑：** 好的，在对此进行了更多测试后，我缩小了范围。（这可能会令人沮丧）它在 iPad 的纵向模式下最为明显。我关闭了“repeat-x”，它完全消失了。这让我尝试了一个更宽的背景图像，它不会在 iPad 的宽度内重复，它消除了这个问题。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T14:35:55.713

我有同样的问题，删除`repeat-x`解决了它。我认为这是手机浏览器的错误。

# c# - 使用 C# 显示水晶报表

> ID：16218371
> 
> 赞同：2
> 
> 时间：2013-04-25T15:06:52.240
> 
> 标签：c#, crystal-reports, report

我对 C# 比较陌生，而且我从未使用过 Crystal Reports，所以如果我确实使用了不正确的术语，我深表歉意。我正在尝试显示由某些 C# 代码调用的报告。通过在这里跟踪很多线程，我设法提出了以下代码，它确实构建了一个调试。但是，当代码运行时，它不会显示报告。

这是代码：

```
private void forAllQualitiesToolStripMenuItem_Click(object sender, EventArgs e) {
    CrystalReportViewer rv = new CrystalReportViewer();
    string reportPath = @"C:\Documents and Settings\rp\Desktop\StockByStatus.rpt"; 

    ReportDocument r = new ReportDocument();

    r.Load(reportPath);
    rv.Visible = false; // i put this in because when i ran the code without it, it said the report must not be visible and the program would fall down
    rv.ReportSource = r;
    rv.InitReportViewer();
    ShowDialog(rv);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T06:14:51.533

```
 ReportDocument cryRpt = new ReportDocument();
    cryRpt.Load(@"CRYSTAL REPORT PATH HERE\CrystalReport1.rpt");
    crystalReportViewer1.ReportSource = cryRpt;
    crystalReportViewer1.Refresh(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:03:31.727

```
private void forAllQualitiesToolStripMenuItem_Click(object sender, EventArgs e) {

                    {
                        CrystalReportViewer rv = new CrystalReportViewer();
                        doc = new ReportDocument();
                        doc.Load(Server.MapPath("MR.rpt"));
                        doc.SetDatabaseLogon("sa", "Admin123", "vivek", "PURCHASE", false);
                        reportdocument.SetParameterValue("@MRNO", ddlmrno.SelectedValue);
                        rv .ReportSource = doc;
                    } 
```

现在试试这个代码作为参考代码....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T09:28:23.083

最好添加 Windows 表单并将 Crystel 报表查看器拖放到表单中。它会自动设置为全屏。您可以使用报表查看器查看应用程序中的所有晶体报表。***注意：您需要根据我们的 Visual Studio 版本安装 Crystel 报告运行时兼容版本。***

[![在此处输入图像描述](https://i.stack.imgur.com/Ub9Hp.png)](https://i.stack.imgur.com/Ub9Hp.png)

现在您可以在按钮按下事件中调用这样的报告

```
 private void btOPdetailRep_Click(object sender, EventArgs e)
 {
   try
  {
    load();
    frmReports.printproparty = 7;   //7 what i assign numer for identify report
    frmReports objshow = new frmReports();
    objshow.ShowDialog();
  }
    catch (Exception ex)
  {
    MessageBox.Show("Details Printing Error!");
  }
} 
```

然后在报告表单加载事件中编写此代码

```
string username = "sa";       //USERNAME AND PASSWORD FOR REPORT LOADING
 string password = "123";
if (printproparty == 7)
  {
   ReportDocument cryRpt = new ReportDocument();
   cryRpt.Load(@"op payment.rpt");
   cryRpt.SetDatabaseLogon(username, password);
   reports.ReportSource = cryRpt;
   reports.RefreshReport();
   reports.Refresh();
  } 
```

# asp.net - ViewModel 中的 Thread.CurrentThread.CurrentUICulture 与 Accept-Language

> ID：16218382
> 
> 赞同：3
> 
> 时间：2013-04-25T15:07:07.740
> 
> 标签：asp.net, asp.net-mvc, globalization

**全球化：**问这个问题的原因是为了更好地理解`Thread.CurrentThread.CurrentUICulture`ViewModels 和 Controllers 中的属性和错误消息是如何工作的

我已经设置了我的项目并覆盖`OnActionExecuting`了我的控制器的方法我已经根据存储在 cookie 中的用户选择设置了语言。

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    base.OnActionExecuting(filterContext);

    HttpCookie cookie = Request.Cookies["lang"];

    string lang = cookie != null ? cookie.Value : "en-US";
    System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(lang);
} 
```

现在，在此之后，检查`Accept-Language`浏览器发送的 http 请求中的标头，用户更改没有反映 - 值仍然是“en-US”。这让我觉得这两者并不依赖。

我也将代码移至 Global.asax，但效果相同。从昨天就开始了。

该`Thread.CurrentThread.CurrentUICulture`设置会影响页面上的文本，但不会影响 ViewModel 注释中的错误消息或属性。但是当`Accept-Language`从浏览器更改时，错误消息会从正确的资源文件中挑选出来。

*   是否可以操纵`Accept-Language`标题？- 这似乎是只读的
*   *主要问题*：如何`Thread.CurrentThread.CurrentUICulture`工作？这似乎是互联网上大多数示例/文章/博客等使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:25:43.857

为了使用 ASP.NET MVC 在公共站点上正确实现全球化，我建议以下内容：

*   **使用 URL 的（片段）来确定文化**，而不是 cookie。否则将无法链接到预定义语言的页面，搜索引擎将无法索引您的内容。
*   浏览器首选项可用于在首次访问时*重定向*到适当的语言（例如，在*没有*任何 URL 片段的情况下调用主页时：www.mysite.com 重定向到 www.mysite.com/en-US/ 对于具有 en-US 的用户浏览器中的首选项）
*   `OnActionExecuting`文化初始化为时已*晚*。我建议阅读[Alex Adamyan](http://adamyan.blogspot.ch/2010/07/addition-to-aspnet-mvc-localization.html)关于 ASP.NET MVC 本地化的文章，并实现**自定义路由处理程序**来初始化 UiCulture/Culture。这也适用于模型绑定（例如，在视图模型类上使用资源和属性时）。

至于您的其他问题：修改标头实际上没有意义，`Accept-Language`因为客户端将它们发送到服务器。即使您可以修改它们，客户也永远不会知道。

# html - css向左扩展文本并保留容器宽度

> ID：16218390
> 
> 赞同：0
> 
> 时间：2013-04-25T15:07:29.667
> 
> 标签：html, css

请看这个小提琴 - [http://jsfiddle.net/grimmus/vawE9/4/](http://jsfiddle.net/grimmus/vawE9/4/)

```
<div class="refresh">
        <div class="date" id="date">
            As of 1/10/2013 16:44 2013 (GMT + 1)
        </div>
        <div class="loading"id="loading">
            Loading...
        </div>
</div> 
```

在蓝色框中，我试图在日期和加载文本之间切换。日期文本可以是不同的宽度，我希望这个宽度在隐藏文本并显示加载文本时保持不变。日期的宽度应尽可能向左扩展。加载文本应始终左对齐

显示加载文本时，我很难保持框的宽度。我想到的一个解决方案是将可见性隐藏到日期文本，然后将加载文本相对定位在这个具有更高 z-index 的 div 上。这似乎很复杂，希望有一个更简单的解决方案。

建议/建议/提示最受欢迎。

ps需要在ie7+下工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:50:34.463

试试这个**[jsFiddle 示例](http://jsfiddle.net/vawE9/10/)**：

**jQuery**

```
setInterval(function () {
    $('#date').animate({
        opacity: .01
    }, 0, function () {
        $('#loading').fadeIn(0).delay(2000).fadeOut(0, function () {
            $('#date').animate({
                opacity: 1
            }, 0)
        });
    })
}, 4000); 
```

**CSS**

```
body {
    margin:25px;
}
.container {
    background:#ccc;
    height:50px;
    width:100%;
}
.refresh {
    background:blue;
    color:#ccc;
    height:20px;
    float:right;
    margin-right:25px;
    min-width:150px;
    text-align:left;
    position:relative;
}
.date {
    position:relative;
}
.loading {
    display:none;
    position:absolute;
    top:0px;
} 
```

# c# - 无法将“System.DateTime”类型的对象转换为“System.String”类型

> ID：16218396
> 
> 赞同：0
> 
> 时间：2013-04-25T15:07:44.450
> 
> 标签：c#, asp.net, datetimepicker

得到一个让我难过的错误。我假设它很简单，但似乎无法弄清楚这一点，这是导致错误的代码：

```
if ((string) _nullableDateTimePicker1.Value != string.Empty && _nullableDateTimePicker1.Value != null) {
     _nullableDateTimePicker1.Value = null;
} 
```

在我的 Windows 窗体中单击搜索按钮时，这就是我弹出的内容：

> 无法将“System.DateTime”类型的对象转换为“System.String”类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:10:09.957

`_nullableDateTimePicker1`看起来is的可空类型实例的类型`DateTime`不是字符串；您需要与 a 进行比较`DateTime`或将其转换为字符串。

所以，从最简单的意义上说：

```
_nullableDateTimePicker1.Value.ToString() != string.Empty 
```

但是，请注意不检查的危险`HasValue`，因为这会导致`NullReferenceException`if `Value`is `null`；所以，你的支票有点倒退。

即使那样，如果*不是* `null`，您也会有`DateTime.MinValue`，因此`ToString`不会返回空字符串。因此，检查`null`可空的东西，如果不是`null`，比较`DateTime.MinValue`（除非你的代码中有一个特别的怪癖，这意味着它可能有*不同*的“默认”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:13:24.843

此代码应该可以工作：

```
if (_nullableDateTimePicker1.Value != null && Convert.ToString(_nullableDateTimePicker1.Value) != string.Empty) {
     _nullableDateTimePicker1.Value = null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:14:19.820

DateTimePicker.Value 返回 DateTime 类型，您不能将其转换为字符串，您需要转换为字符串。

```
string dateTime = _nullableDateTimePicker1.Value.ToString(); 
```

所以你的代码将是：

```
string dateTime = _nullableDateTimePicker1.Value.ToString();
if (!string.IsNullOrEmpty(dateTime)) 
{
    dateTime = null; 
 } 
```

我不确定将 DateTimePicker 值设置为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:09:46.763

`if ((string) _nullableDateTimePicker1.Value .....`

可能，`_nullableDateTimePicker1.Value`返回一个`DateTime`. 正如消息所解释的，您不能直接将 a`DateTime`转换为 a `string`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T15:10:05.160

在这一部分`(string) _nullableDateTimePicker1.Value != string.Empty`中，您尝试将值转换为字符串。但是`Value`是`DateTime`。如果第二部分就足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T15:10:59.160

```
(string) _nullableDateTimePicker1.Value 
```

当 _nullableDateTimePicker1 为空时引发异常。

`(string)`尝试检查值是否不为空时不要使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T15:11:10.710

看起来您的`_nullableDateTimePicker1`对象是`Nullable<DateTime>`( `DateTime?`)，在这种情况下，您会收到此错误，因为您无法将其转换为字符串。

```
(string) _nullableDateTimePicker1.Value 
```

看起来您只是想确保它具有有效的 DateTime，在这种情况下，您只需要进行 null 检查。在不确切知道您要做什么的情况下，这是我的建议。

# c - 如果没有收到 FIN/ACK 或 RST，如何在 tcp 服务器程序中终止 tcp 连接

> ID：16218397
> 
> 赞同：0
> 
> 时间：2013-04-25T15:07:44.777
> 
> 标签：c, tcp, network-programming

我写了一个 tcp 服务器程序（linux c）并在主机 B 上运行它

如果主机 A 与主机 B 建立 TCP 连接

然后在不发送 FIN/ACK 的情况下关闭

如何在 tcp 服务器中编写源代码来终止这个 tcp 连接？

使用原始套接字来制作假 RST？

或其他方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:15:52.030

`close()`一旦确定连接不再可用，就只是服务器端的套接字。最终，套接字将在内部超时并开始向读/写操作报告错误，此时您可以将其关闭。如果您不想等待那么久，那么在您自己的代码中实现超时，或者作为协议中的 keepalive/ping 命令，或者作为一个简单的计时器来跟踪客户端与服务器最后一次交换任何数据的时间. 如果超时期限到期，请关闭套接字，而不管其实际状态如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T23:16:51.937

在这种情况下我不确定，但是如果您创建一个包含所有打开连接的二进制文件：

```
FILE *ptr_myfile;
ptr_myfile=fopen("test.bin","wb"); //opened sockets
//.. your code ..
sockfd[k] = socket(AF_INET, SOCK_STREAM, 0);
fwrite(&sockfd[k], sizeof(sockfd[k]), 1, ptr_myfile_soc);
//.. your code ..
close(ptr_myfile); 
```

如果主机 A 在未发送 FIN/ACK 的情况下关闭，则在另一个可执行文件中，您将从该文件中读取并关闭相关套接字：

```
fread(&sockfd[k],sizeof(sockfd[k]),1,ptr_myfile_soc);
printf("closing %d \n",k );
close(sockfd[k]); 
```

# android - GCMIntentServce onRegistered 成功后 Android 应用程序崩溃

> ID：16218398
> 
> 赞同：0
> 
> 时间：2013-04-25T15:07:49.557
> 
> 标签：android, crash, google-cloud-messaging

我遇到的情况是，全新安装的 Android 应用程序在到达`onRegistered`我`GCMIntentService`文件中的函数后会崩溃。GCM 注册成功，我可以在下次打开应用程序时检索 GCM 注册 ID，但我不希望它在用户第一次打开它时崩溃。

我用它来要求注册：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
     GCMRegistrar.register(this, getResources().getString(R.string.gcmToken));
} 
```

这是我的`GCMIntentService`文件

```
public class GCMIntentService extends GCMBaseIntentService {

    private static final String LOG_TAG = "GCM";

    public GCMIntentService() {
        super( "###############" ); // use my GCM ID
        // TODO Auto-generated constructor stub
        Log.i( LOG_TAG, "GCMIntentService constructor called" );
    }

    @Override
    protected void onError( Context arg0, String errorId ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onError called: " + errorId );
    }

    @Override
    protected void onMessage( Context arg0, Intent intent ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onMessage called" );
        Log.i( LOG_TAG, "Message is: " + intent.getStringExtra( "message" ) );
    }

    @Override
    protected void onRegistered( Context arg0, String registrationId ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onRegistered called" );
        Log.i( LOG_TAG, "Registration id is: " + registrationId );

        // ! ! ! CRASHES HERE ! ! !

    }

    @Override
    protected void onUnregistered( Context arg0, String registrationId ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onUnregistered called" );
        Log.i( LOG_TAG, "Registration id is: " + registrationId );
    }
} 
```

这是 LogCat 的崩溃部分

```
V/GCMBaseIntentService(9604): Releasing wakelock
W/dalvikvm(9604): threadid=10: thread exiting with uncaught exception (group=0x40020950)
E/AndroidRuntime(9604): FATAL EXCEPTION: IntentService[GCMIntentService-##########-1]
E/AndroidRuntime(9604): java.lang.ClassCastException: android.app.Application
E/AndroidRuntime(9604): at com.myfile.app.GCMIntentService.onRegistered(GCMIntentService.java:85)
E/AndroidRuntime(9604): at com.google.android.gcm.GCMBaseIntentService.handleRegistration(GCMBaseIntentService.java:296)
E/AndroidRuntime(9604): at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:197)
E/AndroidRuntime(9604): at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
E/AndroidRuntime(9604): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(9604): at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(9604): at android.os.HandlerThread.run(HandlerThread.java:60)
D/dalvikvm(9604): GC_FOR_MALLOC freed 3478 objects / 299784 bytes in 815ms 
```

这是清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myfile.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <!--  B1 - BSG DEV -->

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.VIBRATE"/>

    <!--  Google Cloud Messaging -->
    <permission android:name="com.myfile.app.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.myfile.app.permission.C2D_MESSAGE" /> 
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <!--  Google Cloud Messaging -->

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon1"
        android:label="@string/app_name" >

        <activity
            android:name="com.myfile.app.MainActivity"
            android:label="@string/app_name" 
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.myfile.app.myclass" android:screenOrientation="portrait"/>  

            <!--  Google Cloud Messaging -->
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.myfile.app" />
          </intent-filter>
        </receiver>
        <service android:name=".GCMIntentService" />
        <!--  Google Cloud Messaging -->

        </application>

</manifest> 
```

任何关于为什么会发生这种情况的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:13:43.730

您是否在 Manifest 上注册了 Receiver and Intent 服务？

例子：

```
<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
                    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                    <category android:name="PACKAGE_NAME" />
                </intent-filter>
            </receiver>
            <service android:name=".GCMIntentService"></service> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T06:38:33.323

您可以从以下路径获得正确的 jar：

**android-sdk-windows\extras\google\gcm\gcm-client\dist**

看看这个例子：

[GCM 示例](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

# lua - 在 Lua 中“在调试器中”编写代码的方法？

> ID：16218399
> 
> 赞同：6
> 
> 时间：2013-04-25T15:07:50.427
> 
> 标签：lua, koneki

我只是玩了一下 Lua 并尝试了 Koneki eclipse 插件，这非常好。问题是，当我对正在调试的函数进行更改时，更改在保存更改时不会生效。所以我不得不重新启动应用程序。如果我可以在调试器中进行更改并且它们会像使用 Smalltalk 或在某种程度上像 Java 中的热代码替换那样即时生效，那就太好了。有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:53:03.977

在一定程度上有一些限制是可能的。我一直在开发提供此功能的[IDE/调试器。](http://studio.zerobrane.com)它使您可以访问远程控制台以在正在运行的应用程序的上下文/环境中执行命令。IDE 还支持[实时编码](https://stackoverflow.com/a/10937422/1442917)，它会在您更改代码时重新加载修改过的代码；[在此处](http://studio.zerobrane.com/tutorials.html)查看演示。

主要限制是您不能修改当前正在运行的函数（至少在不更改 Lua VM 的情况下）。这意味着您对当前正在运行的函数所做的更改只有在您退出并重新进入该函数后才能看到。它适用于重复调用相同函数的环境（例如游戏引擎调用`draw`），但可能不适用于您的情况。

另一个挑战是处理 upvalues（在函数外部创建并在函数内部引用的值）。有一些方法可以“读取”当前的上值并在创建（新）函数时重新创建它们，但是它需要一些代码分析来找到将重新创建哪些函数来查询它们的上值，获取当前值，然后用这些upvalue创建一个新环境并为它们分配适当的值。我当前的实现没有这样做，这意味着您需要使用全局变量作为解决方法。

前几天在 Lua 邮件列表上也有[相关讨论。](http://lua-users.org/lists/lua-l/2013-04/msg00641.html)

# c++ - 在包含函数调用的范围内持续的临时函数参数

> ID：16218403
> 
> 赞同：0
> 
> 时间：2013-04-25T15:08:02.037
> 
> 标签：c++

考虑一个填充缓冲区的典型函数：

```
const char* fillMyBuffer( const char* buf, int size ); 
```

假设这个函数用一些有用的数据填充缓冲区，我想在调用后几乎立即使用这些数据，然后我想摆脱缓冲区。

一种有效的方法是在堆栈上分配：

```
doStuff();

{
    char myBuf[BUF_LEN];
    const char* pBuf = fillMyBuffer( myBuf, BUF_LEN );

    processBuffer( pBuf );
}

doOtherStuff(); 
```

所以这对我的库来说很棒，因为缓冲区是在堆栈上分配的——基本上没有分配、使用和丢弃的成本。它持续包含大括号的整个范围。

但我有一个图书馆，我一直在做这种模式。我想稍微自动化一下。理想情况下，我想要如下所示的代码：

```
doStuff();

{
    // tricky - the returned buffer lasts the entire scope of the braces.
    const char* pBuf = fillMyBufferLocal();

    processBuffer( pBuf );
}

doOtherStuff(); 
```

但是如何实现呢？

我做了以下，这似乎有效，但我知道这违反了标准：

```
class localBuf
{
public:
    operator char* () { return &mBuf[0]; }
    char mBuf[BUF_LEN];   
};

#define fillMyBufferLocal()   fillMyBuffer( localBuf(), BUF_LEN ); 
```

实际上，缓冲区在包含大括号的整个生命周期中都在堆栈上持续存在。但是标准说对象只需要持续到函数返回。例如，从技术上讲，它就像我在函数内部的堆栈上分配缓冲区一样不安全。

有没有一种安全的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:19:49.647

我通常会推荐您的原始解决方案。它将缓冲区的分配与填充分开。但是，如果要实现此`fillMyBufferLocal`替代方案，则必须动态分配缓冲区并返回指向它的指针。当然，如果你返回一个指向动态分配内存的原始指针，那么以后应该销毁内存就很不清楚了。相反，返回一个封装适当所有权的智能指针：

```
std::unique_ptr<char[]> fillMyBufferLocal()
{
  std::unique_ptr<char[]> buffer(new char[BUF_LEN]);
  // Fill it
  return buffer;
} 
```

然后你可以像这样使用它：

```
auto buffer = fillMyBufferLocal();
processBuffer(buffer.get()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:20:19.897

我认为您不应该这样做。它只会使代码更难理解。

自动存储持续时间意味着当一个对象超出范围时，它就会被销毁。在这里，您想欺骗系统，使其*行为*类似于创建具有自动存储持续时间的对象（即在堆栈上分配），但不遵守相应的规则（即从`fillMyBuffer()`.

在我看来，您可以做的最接近、有意义的事情是使用`fillMyBuffer()`可以重用的全局缓冲区，或者让该缓冲区成为`static`内部的变量`fillMyBuffer()`。例如：

```
template<int BUF_LEN = 255>
const char* fill_my_buffer()
{
    static char myBuf[BUF_LEN];
    // Fill...
    return myBuf;
} 
```

但是，我强烈建议重新考虑您的要求，并且：

*   继续使用您当前采用的解决方案（即在堆栈上透明分配）；或者
*   在内部动态分配缓冲区`fillMyBuffer()`并将 RAII 包装器（如 a `unique_ptr`）返回到此动态分配的缓冲区。

**更新：**

作为最后的绝望尝试，您可以定义一个宏来`fill_my_buffer()`为您进行分配和调用：

```
#define PREPARE_BUFFER(B, S) \
    char buffer[S]; \
    const char* B = fill_my_buffer(buffer, S); 
```

然后你可以这样使用它：

```
PREPARE_BUFFER(pBuf, 256);
processBuffer(pBuf); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:36:33.760

您可以编写一个包含基于堆栈的缓冲区并转换为 char const * 的类，例如

```
void processBuffer(char const * buffer);
char const * fillMyBuffer(char const * buffer, int size);
int const BUF_LEN = 123;

class Wrapper
{
public:
  Wrapper(char const * (*fill)(char const *, int))
  {
    fill(&m_buffer[0], m_buffer.size());
  }

  operator char const * () const { return &m_buffer[0]; }

private:
  std::array<char, BUF_LEN> m_buffer;
};

void foo()
{
  Wrapper wrapper(fillMyBuffer);

  processBuffer(wrapper);

} 
```

# android - 无法为 SharedPreferences 或数据库创建目录

> ID：16218408
> 
> 赞同：3
> 
> 时间：2013-04-25T15:08:14.857
> 
> 标签：android, preferences, android-2.3-gingerbread, htc-android

启动应用程序时我们遇到了崩溃，它尝试创建共享首选项并从数据库中读取。它发生在运行 Gingerbread 的不同设备中，主要是 HTC，也有 LG，而且它们没有 root。

```
E/ApplicationContext(2630): Couldn't create directory for SharedPreferences file /data/data/com.example.project/shared_prefs/com.example.project_preferences.xml

E/Database(2630): sqlite3_open_v2("/data/data/com.example.project/databases/project.db", &handle, 6, NULL) failed 
```

我们正在使用 Roboguice 初始化 SharedPreferences。

卸载应用程序并重新安装它似乎有帮助，但我们没有办法对我们的用户说。

我环顾四周，发现人们通常在有根设备或特定三星设备中遇到此问题。

提前致谢！

注意：我们的真实包名是唯一的，我已经在上面的代码中更改了它，所以它不是公开的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-16T13:38:16.057

您需要在 AndroidManifest.xml 中添加权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

我和你有同样的问题，我用上面的方法解决了。我认为您也必须忘记权限。试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:30:31.357

我建议您将应用程序的包名称从更改`com.example.project`为更独特的名称。可能有此问题的用户在他们的设备上使用相同的包名称安装了另一个应用程序，从而导致冲突。

# java - 系统清除属性不起作用。怎么可能？

> ID：16218410
> 
> 赞同：14
> 
> 时间：2013-04-25T15:08:16.637
> 
> 标签：java

我真的不明白！

我运行包含 cod 的单元测试：

```
 String progDir = "prog.dir";
  System.clearProperty(progDir);
  System.out.println(System.getProperty(progDir)); 
```

在控制台上我看到 prog dir 路径。虽然必须有空。

我在 setUp 块中设置了这个变量。这是junit测试。此变量需要所有其他测试，但不需要，因此我尝试在此测试方法开始时清理它。如果我从 setUp 块中删除此 var 的设置，则此测试将通过。

System.setProperty 工作正常。

怎么可能？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:47:25.863

如果一个属性没有在`Properties`对象中定义，那么将在父对象`getProperty`中查找`Properties`

[`Properties`javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#getProperty%28java.lang.String%29)说：

> ```
> public String getProperty(String key) 
> ```
> 
> 在此属性列表中搜索具有指定键的属性。**如果在该属性列表中未找到该键，则递归地检查默认属性列表及其默认值。**`null`如果未找到该属性，则该方法返回。

`clearProperty`调用`Hashtable.remove`since`remove`不会被覆盖，`Properties`因此不会影响默认属性列表。

因此，清除的属性很可能仍然可见，`getProperty`因为`System`javadoc 没有指定系统`Properties`是分层的还是平面的。

# java - 不考虑零的 arrayList 的最小值

> ID：16218412
> 
> 赞同：-4
> 
> 时间：2013-04-25T15:08:24.217
> 
> 标签：java, arraylist, min

我有一个数组列表，例如 [2.3, 0.0, 1.34, 0.0, 4.3]，我想找到这个数组列表的最小值，但不考虑这个数组中的零。这意味着我正在寻找一个在上述列表中的 2.3、1.3 和 4.3 中返回 1.34 作为最小值的函数。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:10:44.050

是的。编写一个遍历数组的 for 循环，设置一个 double 变量等于数组中的最小值。除非该值为零，否则忽略它。你有什么问题？

# ruby-on-rails - 我如何理解 actionpack 并使用 Rails 调试它

> ID：16218413
> 
> 赞同：1
> 
> 时间：2013-04-25T15:08:24.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我阅读源代码时，我只是没有概念或没有调试方法。确切地说，我不知道从哪里开始。

我的理解是：

首先我需要阅读的是路由。但是我不知道启动服务时的初始化路由在哪里。我试图从 Rake 理解开始。但我不知道如何将它们关联起来。**这很重要，我不知道他们如何互动**。我只知道肤浅的概念，……接下来该怎么办？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:10:46.860

路由通常在 中定义`config/routes.rb`，您可以通过运行来测试它们是否正常工作，`rake routes`以查看它们是如何被解释的。

如果您保持路由表简单（最好遵循严格的 REST-ful 方法），那么您将拥有如下条目：

```
resources :users 
```

如果您偏离 REST-ful 方法（有时这是必要的），请注意这会使您的路由文件复杂化，因此在执行此操作之前要小心。

`rake`是 Rails 和其他 Ruby 应用程序用来执行实用功能的通用实用程序。在 Rails 世界中，它主要用于执行`rake test`，`rake routes`因为大多数其他功能都由`rails`命令本身处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:17:26.543

我会先阅读一些 Rails 指南（[http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)）

调试 Rails 应用程序将是一个好的开始 [http://guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html)

# nsstring - NSString 循环字符和 NSDictionary objectForKey

> ID：16218415
> 
> 赞同：0
> 
> 时间：2013-04-25T15:08:34.403
> 
> 标签：nsstring, nsdictionary

我有一个 NSString @"Test" 和 NSDictionary @"T" -> @"String1" | @"e" -> @"String2" | @"s" -> @"String3"

我想遍历字符串的所有字符，并为每个字符执行 NSDictionary objectForKey 方法。

结果应该是一个 NSString @"String1 String2 String 3 String 1"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:05:03.313

这是执行此操作的一种方法：

```
 NSString       *str    = @"test!";
    NSDictionary   *dict   = @{@"t":@"T",@"e":@"E",@"s":@"S"};
    NSMutableArray *result = [NSMutableArray array];

    for (NSUInteger i=0, n=str.length;  i<n;  i++) {
        NSString *key = [str substringWithRange:NSMakeRange(i, 1)];
        id value = dict[key];
        [result addObject:(value != nil)? value : @"?"];
    } 
```

# jquery - 使用 jQuery 更改每个页面上的 CSS 属性

> ID：16218416
> 
> 赞同：0
> 
> 时间：2013-04-25T15:08:36.677
> 
> 标签：jquery, css, class, navigation, menuitem

我正在尝试为网站制作导航菜单。悬停事件 (jQuery) 更改`<div>`背景位置，以便用户可以看到他指向的位置。我想要达到的最终效果是这样的：

[http://jsfiddle.net/WAckU/](http://jsfiddle.net/WAckU/)

这个解决方案的问题是，当我点击`<li>`（页面更改）时，我失去了变量（背景位置重置）所以我想知道是否有任何解决方法，也许只是将 CSS 类添加到我点击的元素（类似于一些 Wordpress 主题)? 我还想避免通过 cookie 保留值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:27:34.240

检查window.location.href中的当前页面，并根据它最初设置背景图像

```
var currentpage = window.location.href.split("/").pop();
switch(currentpage){
    case "page1.php": $(".topmenu").css('background-position', position1);break;
    case "page2.php": $(".topmenu").css('background-position', position2);break;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:22:27.267

为什么不将变量初始化为每页上所需的值？或者，如果您不想例外，请让 js 查看 url 以找出它在哪里。

# jquery - 无法识别返回的 json 响应

> ID：16218417
> 
> 赞同：0
> 
> 时间：2013-04-25T15:08:37.920
> 
> 标签：jquery, mysql, json, asp-classic

我有我们网站 www.phmotorcycles.co.uk/parts/brakes.html 的生产和测试环境。在页面的右侧有一组过滤器控件。现在在测试环境中，这可以完美运行。

在页面加载时调用从数据库返回 JSON 响应的 ASP 页面：

`[{"value":"ktm"}]`

函数调用如下：

```
function loadFilters(p,l,c) {
$.post('../supportScripts/productFilters.asp',{
    level: l,
    productManufacturer: $("#partMan").val(),
    productGroup: p,
    bikeModel: $("#partBM").val(),
    modelYear: $("#partMY").val(),
    ajax: 'false'}, function(data) {

        var sel = $("#" + c);
        var s = jQuery.parseJSON(data);
        sel.empty();
        sel.append('<option value=\'0\'>Please Select</option>');
        for (var i=0; i<s.length; i++) {
            sel.append('<option value="' + s[i].value + '">' + s[i].value.toUpperCase() + '</option>');
        }
    });
} 
```

我遇到的问题是在 for 循环中，因为 firefox 报告 s 为空。

我已经比较了两种环境中的所有代码，它们与数据库上的存储过程相同。

这个问题困扰了我一段时间，我什至通过 fiddler 运行它，请求标头和响应是相同的，直到它在实时服务器上中断。

有人对我如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:18:10.593

你不需要使用`jQuery.parseJSON`. 您的服务器正在返回`Content-type: application/json`，因此 jQuery 正在为您解析它。它使用`Content-type`“智能猜测”您的 AJAX 调用的返回类型。

您*应该*做的是将第四个参数传递给`$.post`, `'json'`。这告诉 jQuery 你期待 JSON，即使`Content-type`错误也会为你解析它。

```
function loadFilters(p,l,c) {
    $.post('../supportScripts/productFilters.asp',{
        level: l,
        productManufacturer: $("#partMan").val(),
        productGroup: p,
        bikeModel: $("#partBM").val(),
        modelYear: $("#partMY").val(),
        ajax: 'false'
    }, function(data) {
        var sel = $("#" + c);
        sel.empty();
        sel.append('<option value="0">Please Select</option>');
        for (var i=0; i < data.length; i++) {
            sel.append('<option value="' + data[i].value + '">' + data[i].value.toUpperCase() + '</option>');
        }
    }, 'json');
} 
```

# javascript - jQuery .click TD 不触发

> ID：16218418
> 
> 赞同：0
> 
> 时间：2013-04-25T15:08:38.607
> 
> 标签：javascript, jquery, html

所以我只是想在我单击表格中的单元格时弹出一个消息框。我看过很多关于 $("td").click(function () { 等的线程，但这些对我的表不起作用。我不知道为什么。

HTML：

```
<body>
<div id="tableArea">
    <table class="table table-bordered" id="myTable">
        <tr>
            <td bgcolor="green" id='a1'>1</td><td>2</td>
        </tr>
    </table>
</div>
</body> 
```

和 javascript/jQuery:

```
<script type="text/javascript">
    $("td").click(function(e) {
        alert('Anything');
    });
</script> 
```

我看不出这段代码与许多其他线程有什么不同，但这不起作用。注意：我正在使用 Bootstrap，如果这有所不同的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:11:19.297

您应该在 $(document).ready() 之后捕获单击事件。

```
<script type="text/javascript">
    $(document).ready(function() {
        $("td").click(function(e) {
            alert('Anything');
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:17:43.133

```
$(document).ready( function(){
    $("td").on('click', function(e) {
        alert('Anything');
    });
}); 
```

为您的标记工作正常。

[在 jsfiddle 上看到](http://jsfiddle.net/KZSuN/)

# c# - 在实例之间共享缓存

> ID：16218424
> 
> 赞同：1
> 
> 时间：2013-04-25T15:08:52.497
> 
> 标签：c#, asp.net, caching

我有一个应用程序，我为它缓存了几个数据（.net 缓存）。通常，此应用程序使用 2 或 3 个实例运行。

每当创建一个新实例来处理请求时，内存使用量就会翻倍。我想知道是否每个新实例都会创建自己的缓存。

这是真的吗？如果是，有没有办法在同一应用程序的实例之间共享缓存？

提前感谢您分享宝贵的知识！

编辑 ：

语言 c# 请看下面我们如何缓存的例子：

```
System.Web.HttpContext ctx
            = System.Web.HttpContext.Current;
  ctx.Cache.Insert("siteViewModel", siteViewModel, null,
DateTime.Now.AddHours(Int32.Parse(siteViewModel.ApplicationSettings["dtoCacheDurationHours"])), System.Web.Caching.Cache.NoSlidingExpiration,
                 System.Web.Caching.CacheItemPriority.Default, OnCachedItemRemoved); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:16:47.507

您还可以针对您的方案评估 Microsoft Velocity。Velocity 将为您提供分布式和内存缓存。

链接： [使用分布式缓存构建更好的数据驱动应用程序](http://msdn.microsoft.com/en-us/magazine/dd861287.aspx "使用分布式缓存构建更好的数据驱动应用程序")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:45:12.283

首先我需要告诉你不能在多个实例之间使用缓存。您还可以使用 Windows azure 缓存系统跨应用程序共享缓存，并且使用 RESTful 方式轻松使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:40:11.803

我根本没有玩过这个，但我知道[AppFabric 提供分布式缓存功能](http://msdn.microsoft.com/en-us/library/ff383731%28v=azure.10%29.aspx)。您可能想查看[一些](http://msdn.microsoft.com/en-us/library/ff383406%28v=azure.10%29.aspx) [类似这样](http://msdn.microsoft.com/en-us/library/ff731039.aspx)的示例。

# javascript - 对象无法更改其自身成员的值

> ID：16218425
> 
> 赞同：0
> 
> 时间：2013-04-25T15:08:54.977
> 
> 标签：javascript, object

我创建了具有成员 x 和 y 的对象类型 a，还有一些更改成员值的函数。我已经看到调试器中的成员发生了变化。但是没有一个成员改变。你可以解释吗？x 和 y 的行为有什么不同吗？一个是局部变量，另一个是参数。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <div id="debug"></div>
    <script src="Scripts/jquery-2.0.0.min.js"></script>
    <script>
        function a(y) {
            var x = 0;
            return {
                x: x,
                y: y,
                getX: getX,
                getY: getY,
                processX: processX,
                processY: processY,
            }
            function getX() {
                return x;
            }
            function getY() {
                return y;
            }
            function processX() {
                this.x = 1;
            }
            function processY() {
                this.y = 100;
            }
        }
        $(function () {
            var objs = [];
            for (var i = 0; i < 3; i++) {
                objs[i] = a(i);
            }
            objs[0].processX();
            objs[1].processY();
            objs.forEach(function (o) {
                $("#debug").append($("<p>").text(o.x + " " + o.y));
                $("#debug").append($("<p>").text(o.getX() + " " + o.getY()));
//result:
//1 0
//0 0
//0 100
//0 1
//0 2
//0 2
            });
        });
    </script>
</body>
</html> 
```

奇怪的是，如果我编写一个函数来访问成员，就可以获得正确的值。为什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:10:59.677

`this`当您想修改对象属性时，您必须明确涉及：

```
 function getX() {
            return this.x;
        }
        function getY() {
            return this.y;
        }
        function processX() {
            this.x = 1;
        }
        function processY() {
            this.y = 100;
        } 
```

在您的原始代码中，这四个函数中对“x”和“y”的引用将被解析为外部函数（称为“a”的函数）中的局部变量“x”和“y”。该“a”函数包括一个名为“y”的参数和一个`var`“x”的声明。

# c# - C# Console.Write 使用 While 循环插入更多记录？

> ID：16218427
> 
> 赞同：0
> 
> 时间：2013-04-25T15:09:02.977
> 
> 标签：c#, loops, console, while-loop, console-application

我想在下面的代码中插入一个 while 循环，以便插入多个记录。

代码输出要求输入名称和 ID，然后将它们打印到文本文件中。

这是我的代码：

```
Console.Write(" Enter your ID: ");
int ID = int.Parse(Console.ReadLine());
Console.Write(" Enter your Name: ");
string Name = Console.ReadLine();
Console.WriteLine(" Thank you! you are logged in as " + Name + " " + ID);
StreamWriter sw = new StreamWriter("fileone.txt", true);
Console.SetOut(sw);
Console.WriteLine("Thank you! you are logged in as " + Name + " " + ID);
Console.Read();

sw.Close(); 
```

如何使用 while 循环让程序要求输入另外 10 条记录？

任何答案将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:25:04.013

我已经重新格式化了你的代码。您可以在安全地将 ID 转换为整数的同时使用 Int32.TryParse()。

```
 int count = 0;
                while (count < 10)
                {
                    Console.Write(" Enter your ID: ");
                    int ID = int.Parse(Console.ReadLine());

                    Console.Write(" Enter your Name: ");
                    string Name = Console.ReadLine();

                    string output = string.Format("Thank you! you are logged in as {0} {1}", Name, ID);
                    Console.WriteLine(output);
                    File.AppendAllText("fileone.txt", output + Environment.NewLine);

                    count++;
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:24:10.643

不确定我是否理解。将代码包装在 for 循环中？

```
for (int i=0; i<10; i++)
{
  ... your code
} 
```

当然，您必须使用 i 循环变量为每个用户 ID 和密码对构造不同的磁贴名称。

# java - 使用 SAX 解析 XML

> ID：16218429
> 
> 赞同：0
> 
> 时间：2013-04-25T15:09:07.090
> 
> 标签：java, xml, sax

示例 xml ,

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <Issue>
     <Snippet>     
           sri;;
           hiil
           bye;
           tc;
    </Snippet>
    </Issue> 
```

是否可以在片段标签中获取整个字符？

如果这是实现，

```
 public void startElement(String uri, String localName,
             String qName, Attributes attributes) throws SAXException {
      temp = "";
      if (qName.equalsIgnoreCase("Issue")) {
             acct = new Account();

      public void endElement(String uri, String localName, String qName)
             throws SAXException {

      if (qName.equalsIgnoreCase("Issue")) {
             // add it to the list
             accList.add(acct);
       else if(qName.equalsIgnoreCase("Snippet"))
           {
               acct.setPrimarySnippet(temp);
           } 
```

O/p 为 tc；但我需要片段标签内的整个值才能打印出来。

# 使用数组列表。用于获取和检索值的 getter 和 setter 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:12:12.123

使用方法“字符”。

http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/helpers/DefaultHandler.html#characters(char[], int, int)

意思是，您必须实现`startElement`and`endElement`方法（以表明您正在输入和退出“片段”标签，然后该`characters`方法将返回字符。

```
 public void startElement(String uri, String localName,
             String qName, Attributes attributes) throws SAXException {
      temp = "";
      if (qName.equalsIgnoreCase("Issue")) {
             someFlagVariable = true;

 public void endElement(String uri, String localName, String qName)
             throws SAXException {
      if (qName.equalsIgnoreCase("Issue")) {
             someFlagVariable = false;
      }
 }
public void characters(char[] ch,
                   int start,
                   int length)
            throws SAXException{
   if (someFlagVariable ){
       String content = new String(ch, start, length).trim(); //this is your content
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:31:38.197

是的。

您应该在 characters() 方法中获取“temp”的值（您设置为主要片段的值）。

但是，您应该知道，并不能保证 characters() 将在何时执行，并且可能会在单个节点内多次调用。因此，在您覆盖 characters() 方法时，您需要构建一个字符串 - 这样当您到达 endElement() 时，您将拥有完整的值。

[您可以在此处](https://github.com/nerdability/AndroidRssReader/blob/master/src/com/nerdability/android/rss/parser/RssHandler.java)查看示例实现

但你基本上想要这样的东西：

```
StringBuffer chars = new StringBuffer();

public void startElement(String uri, String localName, String qName, Attributes atts) {
    chars = new StringBuffer();
}

public void endElement(String uri, String localName, String qName) throws SAXException {
    if (qName.equalsIgnoreCase("Issue")) {
        // add it to the list
        accList.add(acct);
     else if(qName.equalsIgnoreCase("Snippet")){
        acct.setPrimarySnippet(chars);
     }
}

public void characters(char ch[], int start, int length) {
    chars.append(new String(ch, start, length));
} 
```

（尽管请注意，上述方法仅在您只关心叶节点中的文本时才有效 - 因为我们在 startElement() 上新建 stringBuffer，如果您想要非叶节点的文本，那么您需要在startElement() 方法，因此您只能在正确的时间重新实例化字符串缓冲区）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:40:05.700

1) 要在 Snippet 中打印文本，您应该实现

```
public void characters(char ch[], int start, int length) 
```

2) Snippet 中的文本包含多行，使用 SAX，您将分别获取每一行，此行为记录在 SAX API 中，它可能取决于提供者，但至少使用 JDK 默认 SAX 解析器您无法更改它。试试 StAX，它有解决这个问题的 XMLInputFactory.IS_COALESCING 选项。

# apache - Apache - 允许目录列表但下载文件需要 vaild-user

> ID：16218433
> 
> 赞同：1
> 
> 时间：2013-04-25T15:09:11.607
> 
> 标签：apache, file, directory, download, www-authenticate

我想让我的朋友在不记录的情况下查看目录中的所有文件。但是当他们想下载文件时，我想对他们进行身份验证。这个怎么做 ？

现在我有这样的事情：

```
AuthUserFile /var/....../.htpasswd
AuthName "VIP"
AuthType Basic
require valid-user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T09:51:18.143

你可以使用一个`FilesMatch`规则。

查看[终极 .htaccess 指南](http://www.askapache.com/htaccess/htaccess.html#Password_Protect_multiple_files)了解更多信息。

# mysql - 为什么要删减变量？

> ID：16218434
> 
> 赞同：0
> 
> 时间：2013-04-25T15:09:27.843
> 
> 标签：mysql, join, resultset

高中学生试图为我们学校创建一个 Facebook 版本。现在，在我们发布之前，我们一直在连接试用数据库中的表。

要加入表格帖子、用户和朋友：

```
用户
用户名
1 哈莉  
2 迪伦
3 萨丽娜
4 多米尼克

朋友们
用户朋友
1 2
1 3
1 4
2 1
3 1
4 1
2 4
4 2
3 2
2 3

帖子
| 用户 | 邮政编码 | 发布 |
+--------+--------+------+
| 1 | 101 | 这是虎书！|
| 2 | 102 | 我怀孕了。|
| 1 | 103 | 我喜欢偷看|
| 4 | 104 | 巨大的巴斯光年岩石。|
| 3 | 105 | 模具塔克模具 |
| 1 | 106 | Murhur de derpity derp |
| 2 | 107 | 香蕉意大利面鱿鱼| 高分辨率照片| CLIPARTO
| 4 | 108 | 鸡|
```

我们使用了这段代码：

```
SELECT users.user, 
       users.name, 
       posts.postid, 
       posts.post, 
       tmp.friend 
FROM   (SELECT friend, 
               user 
        FROM   friends 
        GROUP  BY friend) AS tmp 
       JOIN users 
         ON tmp.user = users.user 
       JOIN posts 
         ON posts.user = users.user; 
```

结果是：

```
+--------+---------+--------+---------- --+--------+
| 用户 | 姓名 | 邮政编码 | 发布 | 朋友 |
+--------+---------+--------+---------- --+--------+
| 1 | 哈莉 | 101 | 这是虎书！| 2 |
| 1 | 哈莉 | 101 | 这是虎书！| 3 |
| 1 | 哈莉 | 101 | 这是虎书！| 4 |
| 2 | 迪伦 | 102 | 我怀孕了。| 1 |
| 1 | 哈莉 | 103 | 我喜欢偷看| 2 |
| 1 | 哈莉 | 103 | 我喜欢偷看| 3 |
| 1 | 哈莉 | 103 | 我喜欢偷看| 4 |
| 1 | 哈莉 | 106 | Murhur de derpity derp | 2 |
| 1 | 哈莉 | 106 | Murhur de derpity derp | 3 |
| 1 | 哈莉 | 106 | Murhur de derpity derp | 4 |
| 2 | 迪伦 | 107 | 香蕉意大利面鱿鱼| 高分辨率照片| CLIPARTO 1 |
+--------+---------+--------+---------- --+--------+
```

它删除了由用户 3 和 4 发布的帖子 104、105 和 108。它忽略了用户 2 是用户 3 和 4 的朋友以及它显示的用户 1 的事实。

为什么不显示用户 3 和 4？我们应该尝试不同的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:06:15.093

看看你的子查询返回什么：

```
| FRIEND | USER |
-----------------
|      1 |    2 |
|      2 |    1 |
|      3 |    1 |
|      4 |    1 | 
```

由于`GROUP BY`，您会丢失与 s 关联的多个`user`值`friend`。

为什么您使用子查询而不是简单地`JOIN`使用`friends`表本身？

```
SELECT users.user,
   users.name,
   posts.postid,
   posts.post,
   friends.friend
FROM friends
   JOIN users
     ON friends.user = users.user
   JOIN posts
     ON posts.user = users.user; 
```

```
| USER |    NAME | POSTID |                        POST | FRIEND |
------------------------------------------------------------------
|    1 |  Hallie |    101 |          This is TigerBook! |      2 |
|    1 |  Hallie |    103 |                I like peeps |      2 |
|    1 |  Hallie |    106 |      Murhur de derpity derp |      2 |
|    1 |  Hallie |    101 |          This is TigerBook! |      3 |
|    1 |  Hallie |    103 |                I like peeps |      3 |
|    1 |  Hallie |    106 |      Murhur de derpity derp |      3 |
|    1 |  Hallie |    101 |          This is TigerBook! |      4 |
|    1 |  Hallie |    103 |                I like peeps |      4 |
|    1 |  Hallie |    106 |      Murhur de derpity derp |      4 |
|    2 |   Dylan |    102 |              I am pregnant. |      1 |
|    2 |   Dylan |    107 |      banana spaghetti squid |      1 |
|    2 |   Dylan |    102 |              I am pregnant. |      3 |
|    2 |   Dylan |    107 |      banana spaghetti squid |      3 |
|    2 |   Dylan |    102 |              I am pregnant. |      4 |
|    2 |   Dylan |    107 |      banana spaghetti squid |      4 |
|    3 |  Sarina |    105 |              Die Tucker die |      1 |
|    3 |  Sarina |    105 |              Die Tucker die |      2 |
|    4 | Dominic |    104 | Giant Buzz Lightyears rock. |      1 |
|    4 | Dominic |    108 |                     chicken |      1 |
|    4 | Dominic |    104 | Giant Buzz Lightyears rock. |      2 |
|    4 | Dominic |    108 |                     chicken |      2 | 
```

[http://sqlfiddle.com/#!2/27eb3d/6](http://sqlfiddle.com/#!2/27eb3d/6)

# ruby - Chrome 的自定义配置文件

> ID：16218435
> 
> 赞同：7
> 
> 时间：2013-04-25T15:09:28.930
> 
> 标签：ruby, google-chrome, selenium, selenium-webdriver, selenium-chromedriver

环境：Mac OS X 10.8.3、Ruby 2.0.0p0、selenium-webdriver 2.32.1、ChromeDriver 26.0.1383.0。

我想更改默认浏览器语言。我正在测试该站点是否正确检测到浏览器语言并以该语言显示页面。

我能够将 Firefox 语言设置为德语：

```
require "selenium-webdriver"

profile = Selenium::WebDriver::Firefox::Profile.new 
profile["intl.accept_languages"] = "de"

caps = Selenium::WebDriver::Remote::Capabilities.firefox(firefox_profile: profile) 
caps.platform = "Linux" 
caps.version = 20

driver = Selenium::WebDriver.for( 
:remote, 
url: "http://USERNAME:ACCESS-KEY@ondemand.saucelabs.com:80/wd/hub", 
desired_capabilities: caps)

driver.navigate.to "http://sandbox.translatewiki.net/" 
```

我想使用 Chrome（和其他浏览器，如果可能的话）做同样的事情。

我尝试了几件事试图在 Chrome 中以德语打开页面，但每次页面都以英语而不是德语显示。

```
require "selenium-webdriver"

profile = Selenium::WebDriver::Chrome::Profile.new 
profile["intl.accept_languages"] = "de"

caps = Selenium::WebDriver::Remote::Capabilities.chrome(firefox_profile: profile) 
caps.platform = "Linux" 
caps.version = ""

driver = Selenium::WebDriver.for( 
:remote, 
url: "http://USERNAME:ACCESS-KEY@ondemand.saucelabs.com:80/wd/hub", 
desired_capabilities: caps)

driver.navigate.to "http://sandbox.translatewiki.net/" 
```

如果我更改`firefox_profile: profile`为`profile: profile`or `chrome_profile: profile`，则页面每次都以英语（而不是德语）打开。

据我在[API 文档](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Remote/Capabilities.html)中看到的，仅`:firefox_profile`支持。

我能够在[本地机器](http://filipin.eu/2013/04/19/chrome-profiles.html)上做到这一点，但在使用 Sauce Labs 时却不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T10:37:28.257

这应该有效：

```
require "selenium-webdriver"

profile = Selenium::WebDriver::Chrome::Profile.new 
profile["intl.accept_languages"] = "de"

caps = Selenium::WebDriver::Remote::Capabilities.chrome(
  platform: "Linux", 
  version: "", 
  'chrome.profile' => profile.as_json['zip']
)

Selenium::WebDriver.for(:remote, 
  url: "http://...@ondemand.saucelabs.com:80/wd/hub", 
  desired_capabilities: caps
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T08:48:42.493

哇，SauceLabs + Chrome + Selenium + Ruby 的文档非常不一致，有时甚至相互矛盾。不幸的是，我没有要测试的 SauceLabs 帐户，所以我所能做的就是给你一些建议。

[该文档](http://code.google.com/p/selenium/wiki/ChromeDriver)说 ChromeDriver 不支持自定义配置文件是一个已知问题。 [这篇文章](https://stackoverflow.com/a/16025733/712765)展示了如何为 Chrome 设置自定义配置文件。去搞清楚。

为此设置配置文件或默认语言不是标准[WebDriver 有线协议](http://code.google.com/p/selenium/wiki/JsonWireProtocol)的一部分，因此您可能不走运。

一种解决方法是将浏览器设置为使用代理并在代理中添加/替换代理中的 Accept-Language 标头。

尽管如此，通过 Selenium Ruby 代码，看起来那个帖子可能是关于什么的，所以试试这个：

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile["intl.accept_languages"] = "de"

caps = Selenium::WebDriver::Remote::Capabilities.chrome
caps['chromeOptions'] = { 'profile'    => profile.as_json['zip'] }
driver = Selenium::WebDriver.for( 
:remote, 
url: "http://USERNAME:ACCESS-KEY@ondemand.saucelabs.com:80/wd/hub", 
desired_capabilities: caps)

driver.navigate.to "http://sandbox.translatewiki.net/" 
```

编辑：似乎`--lang-`开关没有做你想做的事，所以忽略以下内容。我把它留在这里留给后代。

这可能有效（忘记配置文件，使用命令行开关）：

```
caps = Selenium::WebDriver::Remote::Capabilities.chrome
caps['chrome.switches'] = ['--lang-de'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T11:32:13.723

现在你可以只使用这个方法

```
 def launch_browser options={}

    language = options.fetch(:language, "en_US")
    url = options.fetch(:url, "www.google.com")

    prefs = {
        :intl => {
            :accept_languages => language
        }
    }
    browser = Watir::Browser.new :chrome, :prefs => prefs

    browser.goto url
  end 
```

然后你只需要打电话

```
 launch_browser :language => "de" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:32:05.147

我在本地机器上看到德语翻译，使用：

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile["intl.accept_languages"] = "de"
@driver = Selenium::WebDriver.for :chrome, :profile => profile  
@target = 'http://sandbox.translatewiki.net/' 
```

操作系统：10.7.5

ruby 1.9.3p0（2011-10-30 修订版 33570）[x86_64-darwin11.4.2]

# c# - 在 ServiceStack 中是否可以模拟 Request.OriginalRequest 对象进行单元测试？

> ID：16218440
> 
> 赞同：6
> 
> 时间：2013-04-25T15:09:38.313
> 
> 标签：c#, unit-testing, moq, servicestack

我想让我的 ServiceStack 服务可测试。

目前我有：

```
[RequireFormsAuthentication]
public object Delete(DeleteRequest request)
{
     var originalRequest = (HttpRequest)Request.OriginalRequest;
     var identity = originalRequest.RequestContext.HttpContext.User.Identity;
     return othercode(identity);
} 
```

RequireFormsAuthentication 在哪里

```
public class RequireFormsAuthenticationAttribute : RequestFilterAttribute
{
    public override void Execute(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        var originalRequest = (HttpRequest)req.OriginalRequest;
        var identity = originalRequest.RequestContext.HttpContext.User.Identity;
        if (!identity.IsAuthenticated)
        {
            res.StatusCode = (int)HttpStatusCode.Forbidden;
            res.EndServiceStackRequest(skipHeaders: true);
        }
    }
} 
```

我已经模拟了“othercode()”使用的所有依赖项，剩下的就是基类 Service 中的东西。是否有一种模式/策略/方法/我缺少的东西让这变得微不足道？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-01T13:14:11.450

以下是使用 Moq 进行测试的方法。此服务在查询字符串中查找“键”和“值”，并在请求 DTO 中查找另一个参数。该服务根据给定的值返回一个字符串响应。

```
 [Test]
    public void MyTest()
    {
        var mockRequestContext = new Mock<IRequestContext>();
        var mockedHttpRequest = new Mock<IHttpRequest>();

        NameValueCollection querystring = new NameValueCollection();
        querystring.Add("myKey", "myValue");

        mockedHttpRequest.SetupGet(r => r.QueryString).Returns(querystring);

        mockRequestContext.Setup(x => x.Get<IHttpRequest>()).Returns(mockedHttpRequest.Object);

        AboutService service = new AboutService
        {
            RequestContext  = mockRequestContext.Object,
        };

        AboutResponse response = (AboutResponse)service.Any(new About
        {
            Company = "myOtherValue",
        });

        Assert.AreEqual(0, response.QueryResult);
        Assert.AreEqual("validResponse", response.Version);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T22:41:47.890

我很抱歉没有使用最小起订量……已经使用 RhinoMocks 完成了其中的一些工作。我认为这个概念应该转移到起订量。 [这](https://stackoverflow.com/questions/15754824/how-to-test-servicestack-service-using-moq/15769871#15769871)可能是一个很好的资源以及[this](https://stackoverflow.com/questions/16063554/how-can-i-mock-servicestack-ihttprequest/16066959?noredirect=1#comment22951697_16066959)。

无论如何，我认为下面的测试代码应该可以帮助您入门。您的模拟接缝`Request.OriginalRequest`正在`Service.RequestContext`用模拟对象替换。然后你只需要嘲笑除此之外的一切。这将是很多“嘲笑”，如果你每次嘲笑一堂课时都对自己重复“你在嘲笑我吗”，那几乎是令人愉快的。

```
[Test]
public void testsomethign()
{
    var mockedRequestContext = MockRepository.GenerateMock<IRequestContext>();
    var mockedHttpRequest = MockRepository.GenerateMock<IHttpRequest>();
    var mockedOriginalRequest = MockRepository.GenerateMock<HttpRequestBase>();
    var mockedOriginalRequestContext = MockRepository.GenerateMock<RequestContext>();

    mockedOriginalRequest.Stub(x => x.RequestContext).Return(mockedOriginalRequestContext);
    mockedHttpRequest.Stub(x => x.OriginalRequest).Return(mockedOriginalRequest);

    mockedRequestContext.Stub(x => x.Get<IHttpRequest>()).Return(mockedHttpRequest);
    var service = new ServiceTests()
    {
        RequestContext = mockedRequestContext
    };

    service.Delete(new DeleteRequest());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-23T18:18:26.630

Be sure to check out the namespace: ServiceStack.ServiceInterface.Testing.
In there you can find a MockRequestContext that you can use as follows:

```
var mockContext = new ServiceStack.ServiceInterface.Testing.MockRequestContext();
//do stuff to set it up if desired...

AboutService service = new AboutService
{
    RequestContext  = mockContext
}; 
```

# c# - 实体框架 4：看似简单的查询出现动态代理错误？

> ID：16218443
> 
> 赞同：0
> 
> 时间：2013-04-25T15:09:42.947
> 
> 标签：c#, entity-framework, linq-to-entities, table-per-hierarchy

我在我的 POCO 实体框架应用程序中进行了 Linq To Entities 查询，如下所示：

```
var orders = stateRepository.Get()
                           .OfType<OrderedState>()
                           .Where(x => x.Id == stateId)
                           .Include(x => x.Order);
return orders.FirstOrDefault(); 
```

这`OfType`是因为 State 实体使用 Table Per Hierarchy 继承。只有`OrderedState`及其子级拥有`Order`可供他们使用的财产。

但是，当我运行它时，我遇到了以下错误：

> 无法从包含 My.NameSpace.Entities.OrderedState' 类型对象的 EntityCollection 添加、附加或删除类型为“System.Data.Entity.DynamicProxies.OrderedState_6F372135E57CB68DDA1A42541A941E1F0848887EABD8BD4833D0159C9D8B055F”的对象。”

`OrderedState`这是因为 EntityFramework 对继承并共享公共属性的事实感到困惑`OrderState`，这是我感兴趣的？如果我`.Include(x => x.Order)`从 Linq 语句中删除，则可以避免错误，但是当我的全部目的是准确检索该值时，与此 State 相关的 Order 本身返回为 null。

编辑：随着更多的研究，我意识到一些更奇怪的事情正在发生。我的 TPH 继承层次结构是这样的：

```
BasicState
  has many -> StatefulEntities
  has a -> CreationDate

LocationState : BaseState
   has a -> EntityLocation

ReceivedState : LocationState
   has a -> ReceivedDate

ApprovedState : LocationState
  has a -> ApprovedBy

OrderedState 
  has a -> Order

DispatchedState : OrderedState
  has a -> DispatchNumber 
```

因此，当我寻找它时，`OrderedState`它可能是 OrderedState 或 A DispatchedState，但我感兴趣的是加载`Order`属性，如果我有一个未类型化的 BaseState 对象列表，我将无法执行此操作。

我现在意识到的是，当我拥有`.Include( x => x.Order)` *实体框架时会忽略类型参数。*当我调整我的种子数据并开始收到这种类型的错误消息时，这变得更加清晰：

> 无法从包含 My.NameSpace.Entities.OrderedState' 类型对象的 EntityCollection 添加、附加或删除类型为“System.Data.Entity.DynamicProxies.ReceivedState_6F372135E57CB68DDA1A42541A941E1F0848887EABD8BD4833D0159C9D8B055F”的对象。”

我对此感到惊讶，所以我想我会尝试加强类型：

```
var orders = stateRepository.Get()
                           .OfType<OrderedState>()
                           .Where(x => x is OrderedState && x.Id == stateId )
                           .Include(x => x.Order); 
```

果然，当我不尝试包含该`Order`属性时，我只得到 OrderedStates 回来。一旦我使用`Include`我就会得到一个异常，因为我故意试图避免返回的类型无法返回。我正在查询的 Id 绝对是 OrderedState 的 ID——事实上，我调用的方法只接受 OrderedState 对象作为测试，看看这是否会阻止这个问题。

我的目标是从 TPH 表中检索单个类型化元素，包括只有该类型化元素才有的子属性。

# php - 使用 Zend Framework 发送邮件：“无法建立连接”

> ID：16218444
> 
> 赞同：1
> 
> 时间：2013-04-25T15:09:43.877
> 
> 标签：php, zend-framework, smtp, sendmail

我现在正在开发一个“旧”的 php/zend 项目。我在本地安装它，一切都很好，除了在用户完成表单后应用程序发送确认邮件的部分。

我遇到的错误基本上是“无法建立连接”

这是代码：

公共函数 sendMail($user, $gain=null) { 全局 $config;

```
$this->_view->url   = $config->app->url;

$tr = new Zend_Mail_Transport_Smtp($config->app->mail->server);
Zend_Mail::setDefaultTransport($tr);

$mail = new MGMail($config->app->mail->key, true);
$mail->setFrom($config->app->mail->from, $config->app->mail->fromName);

if ($gain == null)
{
    $object = $config->app->mail->object->inscription;
    $render = $this->_view->render('inscription.phtml');
}
else
{
    switch ($gain)
    {
        case 'peignoir':
            $gain_name = 'un '.$gain;
        case 'casquette':
            $gain_name = 'une '.$gain;
    }

    $object = sprintf($config->app->mail->object->gain, $gain_name);
    $render = $this->_view->render($gain.'.phtml');
}

$mail->setSubject($object);
$mail->addTo($user->email, $user->first_name.' '.$user->last_name);
$mail->setBodyText($render);

$mail->send();

$this->saveSendEmail($object, $render, $user); 
```

}

```
$config->app->mail->server 
```

在我的 application.ini 中仅包含“localhost”

我需要做什么来解决这个问题？有没有要激活的php模块？对不起，如果这对你来说很明显，我已经很长时间没有研究这个了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:13:10.527

确保您在正在使用的机器上本地运行 SMTP 服务。您可以通过在端口 25 上使用 telnet 到 localhost 来检查：

> 远程登录本地主机 25

如果超时，则很可能您没有安装或运行 SMTP 服务器：

> C:\Users\username>telnet localhost 25 Connecting To localhost...Could not open connection to the host, on port 25: Connect failed

那是你的问题。

要解决它，您需要安装和配置邮件服务器。我过去使用过 hmailserver (www.hmailserver.com)，它运行良好。

# django - 为什么在 django 设置中将 debug 设置为 false 会阻止 Heroku 应用程序在开发和生产中加载？

> ID：16218446
> 
> 赞同：6
> 
> 时间：2013-04-25T15:09:48.903
> 
> 标签：django, heroku

在我的设置中，我设置`DEBUG=False`了，但这反而在开发和生产中产生了 500 错误。所以我环顾四周，发现了这个（[设置 DEBUG = False 导致 500 错误](https://stackoverflow.com/questions/15128135/django-setting-debug-false-causes-500-error)）并尝试了一下。

```
ALLOWED_HOSTS = ['www.heroku.com'] 
```

但这不起作用，我做错了什么？我正在使用 heroku 托管

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T15:41:31.943

您的应用程序未托管在 www.heroku.com 上。相反，尝试

```
ALLOWED_HOSTS = [".herokuapp.com"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T04:11:02.313

你试过了吗

```
python manage.py collecstatic 
```

?

您应该查看文件目录，因为在生产静态文件目录更改中。heroku 使用 whitenouse

# c# - 在 C# 中破坏引用的最佳实践

> ID：16218451
> 
> 赞同：0
> 
> 时间：2013-04-25T15:10:08.207
> 
> 标签：c#, pass-by-reference

我想知道如果我不能将任何内容设置为 null （因为程序将无法工作），然后不能使用 Dispose: `(if object!=null) {object.Dispose();}`，并且不知道在哪里以及如何重新初始化对象（它也应该重新初始化所有变量）。

另外，我在哪里可以找到 .Net Memory Profiler 好的问题顾问，告诉您如何解决他发现的可能表明内存泄漏的问题？

例如：对于

```
 Direct EventHandler roots (Show details) (Ignore...)
 Disposed instances (Show details) (Ignore...)
 Pinned instances (Show details) (Ignore...)
 Undisposed instances (remove external references) (Show details) (Ignore...)
 Large instances (Show details) (Ignore...)
 Duplicate instances (Show details) (Ignore...)
 Direct delegate roots (Show details) (Ignore...) 
```

等等

# sql - 组合和缩短两个 where 子句条件

> ID：16218455
> 
> 赞同：2
> 
> 时间：2013-04-25T15:10:16.330
> 
> 标签：sql, sql-server

架构：

```
CREATE TABLE #exclGeoKeys (xKEY INT);
INSERT INTO #exclGeoKeys
    values
    (1),
    (2);

CREATE TABLE #y (NAME CHAR(1),xKEY INT);
INSERT INTO #y
    values
    ('A',1),
    ('C',2),
    ('D',NULL),
    ('E',3),
    ('F',4); 
```

我可以缩短以下内容以产生相同的结果并且不需要该部分`OR xKEY IS NULL`吗？

```
SELECT *
FROM   #y
WHERE  xKEY NOT IN 
                 (
                 SELECT * 
                 FROM #exclGeoKeys
                 ) 
       OR 
       xKEY IS NULL; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:32:23.917

将选项与 NOT [EXISTS](http://msdn.microsoft.com/en-us/library/ms188336.aspx)运算符一起使用

```
SELECT *
FROM #y t
WHERE NOT EXISTS (
                  SELECT 1
                  FROM #exclGeoKeys t2
                  WHERE t.xKEY = t2.xKEY
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/53789/2)上的演示[](http://sqlfiddle.com/#!3/53789/2)

 **带有 EXISTS 和 EXCEPT 运算符的选项

```
SELECT *
FROM #y t
WHERE EXISTS (
              SELECT t.xKEY
              EXCEPT
              SELECT t2.xKEY
              FROM #exclGeoKeys t2
              ) 
```

带有 NOT EXISTS 和 INTERSECT 运算符的选项

```
SELECT *
FROM #y t
WHERE NOT EXISTS (
                  SELECT t.xKEY
                  INTERSECT
                  SELECT t2.xKEY
                  FROM #exclGeoKeys t2
                  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T20:10:40.567

虚幻价值

```
SELECT *
FROM   #y
WHERE  coalesce(xKEY,-1) NOT IN 
                 (
                 SELECT *
                 FROM #exclGeoKeys
                 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T20:17:52.693

尝试使用左连接？

```
SELECT #y.*
FROM   #y
LEFT JOIN #exclGeoKeys excl on excl.xKEY = #y.xKEY
WHERE excl.xKEY IS NULL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:29:09.140

试试这些：

```
--USING NOT EXISTS (DOES NOT REQUIRE THE IS NULL SECTION)

SELECT *
FROM #y AS T1
WHERE NOT EXISTS(SELECT * FROM #exclGeoKeys AS T2 WHERE T1.xKEY = T2.xKEY) 
--OR T1.xKEY IS NULL;

--USING NOT IN
SELECT *
FROM #y AS T1
WHERE T1.xKEY NOT IN (SELECT T2.xKEY FROM #exclGeoKeys AS T2) 
OR T1.xKEY IS NULL; 
```

希望这可以帮助**

# ssis - 如何从 SSIS 中的目标数据库中删除记录

> ID：16218456
> 
> 赞同：0
> 
> 时间：2013-04-25T15:10:16.467
> 
> 标签：ssis

相同的数据库存在于两台服务器上。为了简单起见，我将它们称为源和目标。我需要比较记录并删除那些只存在于目标中而不存在于源中的记录。我不能使用 Execute SQL，因为这两个数据库都存在于不同的服务器上，并且它们之间没有链接。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:50:25.773

您可以使用源表中的 ID 填充目标上的表。然后在目标数据库上使用执行 SQL 任务从目标表中删除您填充的表中不存在的行。例如，类似：

```
DELETE FROM TargetTable
WHERE ID NOT IN (SELECT ID FROM TableIDsFromDestination) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:44:32.723

您可以做的是在目标服务器中创建一个暂存基础，您将在其中复制信息而不查找参考，之后您可以直接在同一服务器中进行比较。

我希望它有所帮助。

# xml - 使用模式忽略 XSLT 模板中的子节点

> ID：16218457
> 
> 赞同：1
> 
> 时间：2013-04-25T15:10:24.770
> 
> 标签：xml, xslt

我正在将 XML 文档转换为 HTML 文件以供在线显示（作为电子书）。

XML 文件中的每一章都包含在 a 中`<div>`并有一个标题 ( `<head>`)。我需要将每个标题显示两次——一次作为目录的一部分在开头，第二次在每章的顶部。我曾经`mode="toc"`在里面`<xsl:template>`这样做过。

我的问题是我的一些`<head>`标题有一个子元素`<note>`，其中包含编辑脚注。当标题出现在章节顶部时，我需要处理这些`<note>`标签，但我不希望它们显示在目录中（即当`mode="toc"`.

我的问题是如何告诉样式表处理`<head>`目录的元素，但忽略任何子元素（它们应该发生）？

这是一个没有注释的示例标题，在目录模式下显示正常：

```
<div xml:id="d1.c1" type="chapter">
  <head>Pursuit of pleasure. Limits set to it by Virtue—
  Asceticism is Vice</head>
  <p>Contents of chapter 1 go here</p>
</div> 
```

这是一个带有注释的注释，我希望在生成目录时将其删除：

```
<div xml:id="d1.c6" type="chapter">
  <head>Happiness and Virtue, how diminished by Asceticism in an indirect
  way.—Useful and genuine obligations elbowed out by spurious ones<note
  xml:id="d1.c6fn1" type="editor">In the text, the author has noted at this 
  point: 'These topics must have been handled elsewhere: perhaps gone through 
  with. Yet what follows may serve for an Introduction.'</note></head>
  <p>Contents of chapter 6 go here</p>
</div> 
```

我的 XSL 目前看起来像这样：

```
<xsl:template match="tei:head" mode="toc">
    <xsl:if test="../@type = 'chapter'">
        <h3><a href="#{../@xml:id}"><xsl:apply-templates/></a></h3>
    </xsl:if>
</xsl:template> 
```

我尝试在`toc`模式中添加一个新的空白模板匹配以供注意，但无济于事。例如：

```
<xsl:template match="tei:note" mode="toc"/> 
```

我也试过`tei:head/tei:note`了`\\tei:head\tei:note`

在与整个文档 ( `/`) 匹配的模板中，我使用以下内容显示目录：

```
<xsl:apply-templates select="//tei:head" mode="toc"/> 
```

我尝试添加以下内容，但无济于事：

```
<xsl:apply-templates select="//tei:head/tei:note[@type = 'editorial']"
mode="toc"/> 
```

任何帮助，将不胜感激！

ps 这是我第一次在 SE 上发帖，所以如果我错过了重要的细节，请告诉我，我会澄清的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:38:32.623

在执行特定于 toc 的处理时，您通常需要传递模式：

```
<xsl:template match="tei:head" mode="toc" />
<xsl:template match="tei:head[../@type = 'chapter']" mode="toc">
  <h3><a href="#{../@xml:id}"><xsl:apply-templates mode="toc" /></a></h3>
</xsl:template> 
```

注意 上的`mode`属性`xsl:apply-templates`。如果你这样做，那么你的模板`tei:note`应该被遵守。

如果您使用的是身份模板，这可能意味着您需要一个用于该`toc`模式的模板。

或者，如果您在达到 后并不真正需要特定于模式的处理`tei:head`，您可以这样做：

```
<xsl:template match="tei:head" mode="toc" />
<xsl:template match="tei:head[../@type = 'chapter']" mode="toc">
  <h3><a href="#{../@xml:id}">
    <xsl:apply-templates select="node()[not(self::tei:note)]" />
  </a></h3>
</xsl:template> 
```

# mysql - 需要帮助从三个 MySQL 表中检索数据

> ID：16218458
> 
> 赞同：1
> 
> 时间：2013-04-25T15:10:27.357
> 
> 标签：mysql

我有三个名为“users”、“user_hobbies”和“hobbies”的表。以下是带有值的示例表；
下面是**用户**表`fields id, name and age`

```
╔════╦══════╦═════╗
║ ID ║ NAME ║ AGE ║
╠════╬══════╬═════╣
║  1 ║ abc  ║  23 ║
║  2 ║ xyz  ║  24 ║
║  3 ║ pqr  ║  21 ║
╚════╩══════╩═════╝ 
```

下面是带有字段 id、user_id 和 hobby_id的**user_hobbies表**

```
╔════╦═════════╦══════════╗
║ ID ║ USER_ID ║ HOBBY_ID ║
╠════╬═════════╬══════════╣
║  1 ║       1 ║        1 ║
║  2 ║       1 ║        2 ║
║  3 ║       1 ║        3 ║
║  4 ║       2 ║        4 ║
║  5 ║       2 ║        3 ║
║  6 ║       2 ║        5 ║
║  7 ║       3 ║        2 ║
║  8 ║       4 ║        6 ║
╚════╩═════════╩══════════╝ 
```

. 下面是带有字段 id 和 desc的**爱好表**

```
╔════╦═══════════╗
║ ID ║   DESC    ║
╠════╬═══════════╣
║  1 ║ music     ║
║  2 ║ chatting  ║
║  3 ║ cricket   ║
║  4 ║ badminton ║
║  5 ║ chess     ║
║  6 ║ cooking   ║
╚════╩═══════════╝ 
```

. 实际要求是我需要一个查询来检索姓名、年龄、hobby_id 和 desc（参见下面的示例）

```
╔══════╦═════╦══════════╦═════════════════════════╗
║ NAME ║ AGE ║ HOBBYID  ║        DESC             ║
╠══════╬═════╬══════════╬═════════════════════════╣
║ abc  ║  23 ║ 1,2,3    ║ music,chatting,cricket  ║
║ pqr  ║  21 ║ 2        ║ chatting                ║
║ xyz  ║  24 ║ 4,3,5    ║ badminton,cricket,chess ║
╚══════╩═════╩══════════╩═════════════════════════╝ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:13:23.030

您需要先连接这些表并使用一个名为 的聚合函数`GROUP_CONCAT()`。

```
SELECT  a.Name,
        a.Age,
        GROUP_CONCAT(c.ID) hobbyIDs,
        GROUP_CONCAT(c.desc) descList
FROM    users a
        INNER JOIN user_hobbies b
            ON a.ID = b.user_ID
        INNER JOIN hobbies c
            ON b.hobby_ID = c.ID
GROUP   BY a.Name, a.Age 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d3172/3)
*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔══════╦═════╦══════════╦═════════════════════════╗
║ NAME ║ AGE ║ HOBBYIDS ║        DESCLIST         ║
╠══════╬═════╬══════════╬═════════════════════════╣
║ abc  ║  23 ║ 1,2,3    ║ music,chatting,cricket  ║
║ pqr  ║  21 ║ 2        ║ chatting                ║
║ xyz  ║  24 ║ 4,3,5    ║ badminton,cricket,chess ║
╚══════╩═════╩══════════╩═════════════════════════╝ 
```

# sql - 不理解 ANSI SQL 内连接语法中“ON”子句后的“AND”

> ID：16218461
> 
> 赞同：2
> 
> 时间：2013-04-25T15:10:34.123
> 
> 标签：sql, oracle, postgresql

我有一个连接到一个表的查询。我完全理解 company_no 的内部连接。即使有另一个带有**`=`**符号的连接条件，我也会理解的。但是在 ON 子句之后的大于或等于是`AND ts.trans_date >= mtd.trans_date`什么？我无法理解这是在做什么。

```
SELECT  ts.trans_date, ts.company_no, ts.transactions, ts.mtd_transactions, SUM(mtd.transactions) AS tabulated_mtd_transactions
FROM    transactions_tbl ts
    INNER JOIN transactions_tbl mtd
    ON  ts.company_no = mtd.company_no
    AND ts.trans_date >= mtd.trans_date
        WHERE   ts.company_no = 1080 
                    AND ts.trans_date >= '2010-08-01'
            AND mtd.trans_date >= '2010-08-01'
GROUP BY    ts.trans_date, ts.company_no, ts.transactions, ts.mtd_transactions
ORDER BY    ts.trans_date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:13:28.473

`transaction`此查询尝试为某家公司构建运行总和。

基本上，它获取`transactions_tbl`该公司以 开头的每条记录`2010-08-01`，将其连接到同一公司的同一张表中早于该（并且仍然晚于`2010-08-01`）的所有记录，并找到这些记录的总和。

从 PostgreSQL 8.4 和 Oracle 8i 开始，有一种更有效的方法可以做到这一点：

```
SELECT  *,
        SUM(transactions) OVER (PARTITION BY company_no ORDER BY trans_date)
FROM    transactions_tbl
WHERE   ts.company_no = 1080
        AND ts.trans_date >= '2010-08-01'
ORDER BY
        trans_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T01:05:53.227

查询中的“内部联接”等效于两个表的叉积，然后对结果进行选择，其中 where 子句是内部联接的 ON 部分中的谓词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:13:39.397

出于某种原因，您是否需要执行显式的 INNER JOIN 语句？

```
SELECT  ts.trans_date, ts.company_no, ts.transactions, ts.mtd_transactions, SUM(mtd.transactions) AS tabulated_mtd_transactions
FROM    transactions_tbl ts, transactions_tbl mtd
WHERE
    ts.company_no = mtd.company_no
    AND ts.trans_date >= mtd.trans_date
    AND ts.company_no = 1080 
    AND ts.trans_date >= '2010-08-01'
    AND mtd.trans_date >= '2010-08-01'
GROUP BY    ts.trans_date, ts.company_no, ts.transactions, ts.mtd_transactions
ORDER BY    ts.trans_date 
```

这应该与您的语句相同，而不会混淆显式 INNER JOIN 语句。

如果你真的想收拾东西...

```
SELECT  ts.trans_date, ts.company_no, ts.transactions, ts.mtd_transactions, SUM(ts.transactions) AS tabulated_mtd_transactions
FROM    transactions_tbl ts
WHERE ts.company_no = 1080 
AND ts.trans_date >= '2010-08-01'
GROUP BY    ts.trans_date, ts.company_no, ts.transactions, ts.mtd_transactions
ORDER BY    ts.trans_date 
```

我认为这应该有效，只要`ts.trans_date >= mtd.trans_date`是一个错误。

# clearcase - 配置规范未选择 ClearCase 结帐版本

> ID：16218464
> 
> 赞同：4
> 
> 时间：2013-04-25T15:10:41.547
> 
> 标签：clearcase

从使用基本 ClearCase 的快照视图中，我想从我的快照视图中未选择的分支中检出文件的最新版本。我希望这是可能的，因为您可以从版本树浏览器工具中做到这一点。

但是，[该`checkout`命令](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_checkout.htm)的文档声称您不能在快照中执行此操作（强调我的）：[**编辑：**是的，您可以！见下文。]

> 非标准结账
> 
> 默认情况下， checkout 命令会检出以下版本：
> 
> *   分支上的最新版本，如果您使用的是动态视图
> *   视图中当前加载的版本，如果您使用的是快照视图
> 
> 要修改不同的版本，您可以使用 –version 选项或在该版本上创建子分支。（参见 mkbranch 参考页）。此外，从单一视图中，您一次只能对每个元素进行一次结帐。
> 
> 注意：当您在**快照**视图中工作时，可以检出的目录元素的唯一版本是视图中当前加载的版本。因此，**-version 和-branch 选项不起作用。**

如何从命令行签出未选择的版本？

* * *

[**编辑：**在这里我误读了“注意：”部分。帮助的意思是不能使用or args 检出**目录**，但可以检出普通文件。]`-version``-branch`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:44:40.670

[OP dss539](https://stackoverflow.com/users/55721/dss539)选择的实际解决方案是`cleartool checkout`直接使用（见[`cleartool checkout`手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_checkout.htm)）

```
cleartool checkout -bra/nch branch-pname | -ver/sion 
```

它适用于动态*或快照*视图中的文件（不是目录）。

* * *

如果您不想修改当前快照文件的配置规范，那么您可以：

*   要么使用单独的视图（动态视图，以便立即选择正确的版本），然后随意修改*另一个*（动态视图）的配置规范，
    然后将版本复制回您的快照视图。
    另请参阅“[如何从 ClearCase 中的特定分支中选择版本？](https://stackoverflow.com/a/3297002/6309) ”以获取配置规范示例。
    ...
    实际上，您甚至不需要修改该动态视图的配置规范：
    您可以使用要直接访问 [的版本的](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)[**扩展路径名并复制正确的版本。**](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)

*   或使用[`cleartool get`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_get.htm)命令（这是“发送到”在版本树上所做的）。
    请参阅“ [clearcase 命令备份文件的前一版本？](https://stackoverflow.com/a/5381646/6309) ”
    （此处不需要单独的视图）

# sql - 通过删除“存在”和“不存在”来优化 Oracle 查询

> ID：16218467
> 
> 赞同：4
> 
> 时间：2013-04-25T15:10:52.237
> 
> 标签：sql, oracle

我最近将一段代码在 Oracle 数据库上投入生产，其中一位经验丰富的开发人员对其进行了审查，他提到我有太多的`exists`和`not exists`语句，应该有办法删除它们，但距离他已经太久了不得不使用它，并且不太记得它是如何工作的。目前，我将返回并使这段代码更易于维护，因为它可能在未来几年随着业务逻辑/需求的变化而多次更改，我想继续优化它，同时使其更易于维护.

我试过查找它，但我能找到的只是关于替换`not in`和`not exists`不返回实际结果的建议。

因此，我想知道可以做些什么来优化`exists`/`not exists`或者是否有办法编写`exists`/`not exists`以便 oracle 将在内部对其进行优化（可能比我能做的更好）。

例如，如何优化以下内容？

```
UPDATE
    SCOTT.TABLE_N N
SET
    N.VALUE_1 = 'Data!'
WHERE
    N.VALUE_2 = 'Y'
    AND
    EXISTS
    (
        SELECT
            1
        FROM
            SCOTT.TABLE_Q Q
        WHERE
            N.ID = Q.N_ID
    )
    AND
    NOT EXISTS
    (
        SELECT
            1
        FROM
            SCOTT.TABLE_W W
        WHERE
            N.ID = W.N_ID
    ) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T16:09:54.147

你的陈述对我来说似乎很好。

在任何优化任务中，不要考虑模式。不要想，“`(not) exists`又坏又慢，`(not) in`超级酷又快”。

想一想，数据库在每个步骤中做了多少工作，你如何衡量它？

一个简单的例子：

**-- 不在：**

```
23:59:41 HR@sandbox> alter system flush buffer_cache;

System altered.

Elapsed: 00:00:00.03
23:59:43 HR@sandbox> set autotrace traceonly explain statistics
23:59:49 HR@sandbox> select country_id from countries where country_id not in (select country_id from locations);

11 rows selected.

Elapsed: 00:00:00.02

Execution Plan
----------------------------------------------------------
Plan hash value: 1748518851

------------------------------------------------------------------------------------------
| Id  | Operation              | Name            | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT       |                 |     1 |     6 |     4   (0)| 00:00:01 |
|*  1 |  FILTER                |                 |       |       |            |          |
|   2 |   NESTED LOOPS ANTI SNA|                 |    11 |    66 |     4  (75)| 00:00:01 |
|   3 |    INDEX FULL SCAN     | COUNTRY_C_ID_PK |    25 |    75 |     1   (0)| 00:00:01 |
|*  4 |    INDEX RANGE SCAN    | LOC_COUNTRY_IX  |    13 |    39 |     0   (0)| 00:00:01 |
|*  5 |   TABLE ACCESS FULL    | LOCATIONS       |     1 |     3 |     3   (0)| 00:00:01 |
------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter( NOT EXISTS (SELECT 0 FROM "LOCATIONS" "LOCATIONS" WHERE
              "COUNTRY_ID" IS NULL))
   4 - access("COUNTRY_ID"="COUNTRY_ID")
   5 - filter("COUNTRY_ID" IS NULL)

Statistics
----------------------------------------------------------
          0  recursive calls
          0  db block gets
         11  consistent gets
          8  physical reads
          0  redo size
        446  bytes sent via SQL*Net to client
        363  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
         11  rows processed 
```

**- 不存在**

```
23:59:57 HR@sandbox> alter system flush buffer_cache;

System altered.

Elapsed: 00:00:00.17
00:00:02 HR@sandbox> select country_id from countries c where not exists (select 1 from locations l where l.country_id = c.country_id );

11 rows selected.

Elapsed: 00:00:00.30

Execution Plan
----------------------------------------------------------
Plan hash value: 840074837

-------------------------------------------------------------------------------------
| Id  | Operation         | Name            | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |                 |    11 |    66 |     1   (0)| 00:00:01 |
|   1 |  NESTED LOOPS ANTI|                 |    11 |    66 |     1   (0)| 00:00:01 |
|   2 |   INDEX FULL SCAN | COUNTRY_C_ID_PK |    25 |    75 |     1   (0)| 00:00:01 |
|*  3 |   INDEX RANGE SCAN| LOC_COUNTRY_IX  |    13 |    39 |     0   (0)| 00:00:01 |
-------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - access("L"."COUNTRY_ID"="C"."COUNTRY_ID")

Statistics
----------------------------------------------------------
          0  recursive calls
          0  db block gets
          5  consistent gets
          2  physical reads
          0  redo size
        446  bytes sent via SQL*Net to client
        363  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
         11  rows processed 
```

在此示例中，NOT IN 读取两倍的数据库块并执行更复杂的过滤 - 问问自己，为什么选择它而不是 NOT EXISTS？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:39:50.620

当您需要时，没有理由避免使用 EXISTS 或 NOT EXISTS。在您给出的示例中，这可能正是您想要使用的。

典型的困境是是使用 IN/NOT IN，还是 EXISTS/NOT EXISTS。它们的评估方式截然不同，根据您的具体情况，评估速度可能更快或更慢。

请参阅[此处](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:953229842074)了解比您可能想要的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:57:01.757

我不知道它是否更快，但这里有一种不用`EXISTS`/的方法`NOT EXISTS`：

```
MERGE INTO TABLE_N T
USING (
  SELECT N.ID, 'Data!' AS NEW_VALUE_1
  FROM SCOTT.TABLE_N N
  INNER JOIN SCOTT.TABLE_Q Q
      ON Q.N_ID = N.ID
  LEFT JOIN SCOTT.TABLE_W W
      ON W.N_ID = N.ID
  WHERE N.VALUE_2 = 'Y'
  AND W.ID IS NULL
) X
ON ( T.ID = X.ID )
WHEN MATCHED THEN UPDATE
    SET T.VALUE_1 = X.NEW_VALUE_1; 
```

# postgresql - 删除记录时锁定数据库表 - 了解 postgresql 中的“已提交读”事务隔离

> ID：16218478
> 
> 赞同：1
> 
> 时间：2013-04-25T15:11:20.847
> 
> 标签：postgresql, transactions, lua

我有一个网络应用程序，它将提供删除属于用户的小部件的功能。我现在进行删除的逻辑如下所示：

```
local delete_widget = function(widgetid, user)
   local retval = ""      

         sql = "DELETE FROM widgets Where widgetid="..widgetid
         cur, err = assert(con:execute(sql))
         if not err then
               sql = "SELECT * FROM widgets where widgetid = ".. widgetid
               listofwidgets = executesqlandreturntable(sql)
               if #listofwidgets == 0 then
                    retval = "Deleted widget"
               else
                    retval = "Unable to delete widget"
               end
         else
               retval = "unable to delete widget"
         end 
   return retval
end 
```

我想知道我是否应该将其更改为交易。现在，如果删除尝试由于某种原因失败，我什么也不做。我只是进行选择以查看它是否仍然存在，如果存在，我会抛出错误。

我想知道是否应该执行完整的开始事务/提交/回滚，以便如果选择语句发现小部件仍然存在，它将回滚删除 sql 语句。

但我有以下问题：

1.  如何使用 pgadmin3 检查我的事务隔离级别的当前值是多少？

2.  如果我将其保留为默认值 - 根据我所阅读的内容是“已提交的” - 这将在我完成删除和选择命令时锁定小部件表，对吗？这意味着在此事务完成之前，没有其他人可以从小部件表中进行选择，对吧？鉴于我将拥有数百名用户，这听起来不是一件好事。

任何意见/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:30:04.400

1.  不知道。
2.  现代数据库允许您获取行级别的锁，而不必锁定整个表，这是非常低效的。所以在这种情况下，只有行级锁才会被获取，直到事务完成。这意味着其他用户将能够从表中进行选择，但只能选择未被您的事务锁定的行。

我不知道您为什么在删除该行后发出另一个选择。删除应该成功，否则查询将返回错误（例如，由于锁定超时）。没有必要再次检查。

因此，在这种情况下，不需要启动事务，因为 DELETE 隐式获取该行的写锁。除非自动提交被关闭，否则你无论如何都必须提交。

# jquery - 增加最大 Ajax POST 大小

> ID：16218481
> 
> 赞同：0
> 
> 时间：2013-04-25T15:11:24.150
> 
> 标签：jquery, ajax, variables, post, limit

只是想知道是否可以增加与 AJAX 一起使用的 POST 变量的大小限制？
事实上，我试图在数据库中插入一个长的 html 代码字符串，但它总是被裁剪？
A 找到了几种解决方案，但似乎没有任何效果......

## 这是我的 Javascript 代码：

```
$(document).ready(function() {
        $('#send_ajax').click(function() {
            var html = escape($('#html_code').val());

            $.ajax({
                 type: "POST",
                 url: "test.php",
                 data: { html_code: html },
                 success: success
            });

        });
}); 
```

它可以工作，但是当我在我的文本区域（#html_code）中放入一个大字符串（HTML 代码）时，该字符串会自动在数据库中剪切。所以，我只有一半的字符串。

## 这是我尝试过的：

**.htaccess 文件：**
php_value post_max_size 20M
php_value upload_max_filesize 20M
LimitRequestBody 0
LimitXMLRequestBody 0

**Apache httpd.conf 文件：**
LimitRequestBody 0

你能帮助我吗 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:14:05.583

您应该检查数据库中字段的最大长度。例如，如果您的字段设置为 VARCHAR(1000)，它将只接受 1000 个字符。相应地增加数据类型的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T21:19:24.103

如果您的帖子结果完全是空的（这不是 OP 的问题），那么您很可能会遇到自己（或公司）施加的 PHP 服务器限制。

在 php.ini 文件中增加的设置是：

```
post_max_size = 8M 
```

我将我的增加到 32M，重新启动了我的服务器，并且能够成功发布我想要的内容。

# python - 在 Python 中设置路径

> ID：16218482
> 
> 赞同：0
> 
> 时间：2013-04-25T15:11:26.097
> 
> 标签：python, path

有没有办法在 Python 中设置终端路径？我有一些已编译的二进制文件，我想在文件夹中使用，我们就说`foo.exe`in `C:/Program Files/PostgreSQL/9.2/bin`，我认为`os`or`sys`模块中必须有一些可以工作的东西，但我找不到任何东西：

```
# This works, but ugly
psqldir = 'C:/Program Files/PostgreSQL/9.2/bin'
currentdir = os.getcwd()
os.chdir(psqldir)
os.system('foo')
os.chdir(currentdir)

# Does not work
os.system('set PATH=%PATH%;C:/Program Files/PostgreSQL/9.2/bin')
os.system('foo')

# Does not work
sys.path.append('C:\\Program Files\\PostgreSQL\\9.2\\bin')
os.system('foo') 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:17:04.203

像这样的东西应该工作......

```
import os

psqldir = 'C:/Program Files/PostgreSQL/9.2/bin'
os.environ['PATH'] = '%s;%s' % (os.environ['PATH'], psqldir)
os.system('foo') 
```

...或者只是`foo.exe`通过它的完整路径调用...

```
os.system('C:/Program Files/PostgreSQL/9.2/bin/foo') 
```

但是，正如kindall（现已删除）的答案所建议的那样，值得注意的是[`os.system()`](http://docs.python.org/2/library/os.html#os.system)文档中的这一段......

> 该[`subprocess`](http://docs.python.org/2/library/subprocess.html#module-subprocess)模块提供了更强大的工具来生成新进程并检索其结果；使用该模块优于使用此功能。有关一些有用的秘诀，请参阅文档中的[用子流程模块替换旧功能](http://docs.python.org/2/library/subprocess.html#subprocess-replacements) 部分。`subprocess`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:22:29.097

我的理解是你需要添加一个环境变量。我认为您应该能够使用 os.system/os.environ 或 subprocess 来做到这一点。还考虑到您在 Windows 上，您可能需要查看这些文章

[http://code.activestate.com/recipes/416087/](http://code.activestate.com/recipes/416087/)

[http://code.activestate.com/recipes/159462/](http://code.activestate.com/recipes/159462/)

# authentication - ZF2 中使用 Doctrine 2 进行身份验证的多个身份属性

> ID：16218483
> 
> 赞同：1
> 
> 时间：2013-04-25T15:11:25.977
> 
> 标签：authentication, doctrine-orm, zend-framework2

我有带有输入文本字段的登录表单：

*   团队名字
*   用户名
*   用户密码

我有两张桌子

*   `groups`
    *   `id`
    *   `name`
*   `users`
    *   `id`
    *   `name`
    *   `group_id`

我有它的映射实体和关联。

但是用户名在 table 中不是唯一的`users`，因为不同的组可以包含同名的用户。因此我需要：

1.  `name`在表格中查找分组依据`groups`
2.  在有条件`name`的表中查找用户`users``where group_id=<group_id>`

如何在 Zend Framework 2 中使用 Doctrine 2 正确地做到这一点？所有官方文档和示例都描述了身份属性为单列（[示例](https://github.com/acaciovilela/zf2-DoctrineModule/blob/master/docs/authentication.md)）的情况。

对不起我的语言不好。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T20:38:55.023

我没有自己实现 Doctrine 的身份验证服务，而是决定通过我的身份验证表单的 isValid() 方法中的表单验证来实现它。

例子：

```
<?php

namespace My\Form\Namespace;

use Zend\Form\Form;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\InputFilter\InputFilterProviderInterface;

class Auth extends Form implement InputFilterProviderInterface
{
    protected $_em;

    public function __construct(ServiceLocatorInterface $sm)
    {
        parent::__construct('auth');

        // inject Doctrine's Entity Manager
        $this->_em = $sm->get('Doctrine\ORM\EntityManager');

        // login field
        $this->add(...);

        // password field
        $this->add(...);

        // group_name field
        $this->add(...);
    }

    public function getInputFilterSpecification()
    {
        //Input filter specification here
        ...
    }

    public function isValid()
    {
        /*
         * input filter validations
         */
        if (!parent::isValid())
            return false;

        /*
         * group exists validation
         */
        $group = $this->_em
            ->getRepository('<Group\Entity\Namespace>')
            ->findOneBy(array(
                'name' => $this->get('group_name')->getValue(),
            ));
        if (!$group){
            $this->get('group_name')
                ->setMessages(array(
                    'Group not found',
                ));
            return false;
        }

        /*
         * user exists validation
         */
        $user = $this->_em
            ->getRepository('<User\Entity\Namespace>')
            ->findOneBy(array(
                'group_id' => $group->getId(),
                'name' => $this->get('login')->getValue(),
            ));
        if (!$user){
            /*
             * It's not good idea to tell that user not found,
             * so let it be password error
             */
            $this->get('password')
                ->setMessages(array(
                    'Login or password wrong',
                ));
            return false;
        }

        /*
         * password validation
         */
        $password = $this->get('password')->getValue();
        // assume that password hash just md5 of password string
        if (md5($password) !== $user->getPassword()){
            $this->get('password')
                ->setMessages(array(
                    'Login or password wrong',
                ));
            return false;
        }

        return true;
    }
} 
```

`$form->isValid()`在控制器内部，调用以确保用户输入了正确的身份验证数据就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T04:57:36.017

我也有同样的问题。

我必须在同一个应用程序中进行两次身份验证，因为我的老板不想要两个数据库。所以，我必须制作两个用户表和两个登录页面。

一条通往管理员的路线 -> /admin/login 和其他用户的前端 -> /login

我试图在学说身份验证数组中进行更多身份验证，但没有奏效。

我想我会在学说 github 页面上打开一个问题。

# database - 从数据库和文件夹中的图片创建 PDF

> ID：16218485
> 
> 赞同：1
> 
> 时间：2013-04-25T15:11:28.730
> 
> 标签：database, excel, pdf-generation, jpeg, directory

我正在寻找有关从文件夹中的文本和图片数据库创建单个 PDF 文件的方法的建议。

PDF 的一页将包含广告牌的图片和来自数据库的 5 个不同的文本字段。每个广告牌的图片（pdf页面）都包含在子文件夹中。该数据库目前只是在excel中。

我已经考虑为每个广告牌创建一个 html 页面并使用 Adob​​e Pro 将其转换为 PDF，但不想为此设置 php 服务器。

这是一个一次性的任务，所以我正在寻找一种快速的方法来完成它。有没有可用的软件包工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T12:10:50.297

我最终只是将数据导入 MySQL 并编写了一个 PHP 脚本来为 PDF 文件的页面创建 HTML 布局。然后，我使用 Adob​​e Acrobat Pro Extended 中的“从网页创建”功能创建了 PDF 文件。希望这可以帮助某人。

# java - 将字符串从 php 传递给 java

> ID：16218487
> 
> 赞同：0
> 
> 时间：2013-04-25T15:11:42.137
> 
> 标签：java, php, gzip

我有这样的情况。

我的一些数据是使用 php 中的 gzdeflate() 函数压缩并存储在数据库中的。现在我需要对存储在数据库中的数据做一些工作。我在 Java 中尝试了很多选项（包括 GZipStream、Inflater 等），但无法从数据库中检索数据。

所以我想到了在 php 中使用 gzinflate() 函数，并且能够很容易地检索数据。现在我在 php 中的一个变量中有数据，我想将它传递回我的 java 程序，以便我可以继续我以前的工作。

我遇到了一些选项，如 Java/PHP 桥、Caurces 和所有但也找不到方法。

有没有办法解决我的这个要求。我现在在这部分停留了一段时间，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:15:08.347

尝试使用 java 解压[JZlib库。](http://www.jcraft.com/jzlib/)JZlib 可以膨胀被 zlib 压缩的数据。

# java - 停止日期掉零

> ID：16218488
> 
> 赞同：0
> 
> 时间：2013-04-25T15:11:47.913
> 
> 标签：java, android

如何阻止整数在时间中丢弃零？我试过用

```
String.format("%02d", minutes); 
```

但它不起作用，我相信它很简单！

```
Date dt = new Date();
int hours = dt.getHours();
int minutes = dt.getMinutes();
String curTime = hours + ":" + minutes;
String.format("%02d", minutes);
updatedat.setText("Updated at " + curTime); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:14:16.550

改用 SimpleDateFormat 对象来格式化日期/时间。

```
Date date = new Date(); // initializes to current time
DateFormat df = new SimpleDateFormat("h:mm");
updatedat.setText("Updated at " + df.format(date)); 
```

[在此处](https://developer.android.com/reference/java/text/SimpleDateFormat.html)阅读有关 SimpleDateFormat 和格式规范的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:19:21.520

它不起作用的原因是因为`String.format("%02d", minutes);`是一个返回字符串的函数

对于您的情况，如果分钟为 8 分钟，`String.format("%02d", minutes);`将返回`08`

因此，要使其正常工作，您必须具备以下条件：

```
String curTime = hours + ":" + String.format("%02d", minutes); 
```

我也同意你不应该像这样格式化时间，使用日期格式化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:16:55.493

包含 0 的一种简单方法是使用如下函数：

```
public String TwoCh(int i) { String s= "0" + Integer.toString(i); return s.substring(s.length() - 2); } 
```

然后（尽管 getHours 和 getMinutes 都已弃用），您可以执行以下操作

```
String curTime = TwoCh(dt.getHours())+ ":" + TwoCh(dt.getMinutes()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:29:10.867

我认为您想要做的是按照以下格式获取时间 22:01

为此，使用 simpleDateFormat 您可以阅读完整的文档，请访问[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# java - 无法扩展类并对 ArrayList 进行排序

> ID：16218495
> 
> 赞同：-2
> 
> 时间：2013-04-25T15:12:24.103
> 
> 标签：java, arraylist

无法弄清楚如何从扩展类中对 arrayList 进行排序...

这是我所拥有的：

通讯录类：

```
import java.util.ArrayList;
import java.util.Iterator;

public class AddressBook
{
  private ArrayList<Entry> data;

  public AddressBook()
  {
    this.data = new ArrayList();
  }

  public String add(Entry paramEntry)
  {
    //Some code      }

   public ArrayList<Entry> getAddressBook()
  {
    return this.data;
  }

  public String getAll()
  {
    //Some code      
   }
} 
```

扩展地址簿类：

```
import java.util.*;
import java.lang.Comparable;

public class ExtendedAddressBook extends AddressBook
{

   public ExtendedAddressBook()
    {

    }

    public String getAll()
    {
        String listAll = "Address Book\n";

        ArrayList<Entry> allEntries = getAddressBook();

        Collections.sort(allEntries);

        for ( Entry entry : allEntries )
        {

                ListAll = ListAll + entry.toString();

        }
        return ListAll;
    }

} 
```

所有条目类：

```
import java.lang.Comparable;

public class AllEntries extends Entry implements Comparable<Entry> 
{

    public int compareTo(Entry otherEntry) 
    {
        int d = this.getFirstName().compareTo(otherEntry.getFirstName());
        if (d == 0)
        {
           d =  this.getLastName().compareTo(otherEntry.getLastName()); 
         }
        return d;

    }
} 
```

当我尝试编译时，我在以下行 Collections.sort(allEntries); 在 ExtendedAddressBook 类中。有人可以指出我哪里出错了，如果它甚至可以扩展一个类以便可以对 arrayList 进行排序？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:19:44.617

你有几个问题。首先，您创建了一个扩展 Entry 添加 Comparable 接口的 AllEntries 类，但是您实际上并没有创建任何 AllEntries 对象。但无论如何你都不应该那样做。相反，您应该这样做：

```
Collections.sort(allEntries, new Comparator<Entry>() {
    public int compare(Entry o1, Entry o2) {
        return o1.getFirstName().compareTo( o2.getFirstName() );
    }
}); 
```

**---- 完整示例 ----**

```
package com.example;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.Collections;
import java.util.List;

public class SortExample {
    private static class Entry {
        private String firstName;
        private String lastName;

        public Entry( String firstName, String lastName ) {
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

        public String toString() {
            return firstName + " " + lastName;
        }
    }

    public static void main( String[] args ) {
        List<Entry> list = new ArrayList<Entry>();
        list.add( new Entry( "Homer", "Simpson" ) );
        list.add( new Entry( "George", "Jettson" ) );
        list.add( new Entry( "Fred", "Flinstone" )  );
        list.add( new Entry( "Fred", "Durst" ) );

        Collections.sort( list, new Comparator<Entry>() {
            public int compare( Entry o1, Entry o2 ) {
                int compareValue = o1.getFirstName().compareTo( o2.getFirstName() );
                if ( compareValue == 0 ) {
                    compareValue = o1.getLastName().compareTo( o2.getLastName() );
                }
                return compareValue;
            }
        } );

        for ( Entry entry : list ) {
            System.out.println( entry );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:18:56.993

有两个版本`Collections.sort`。

第[一个](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)只接受一个集合作为参数，并根据元素的*自然顺序对其元素进行排序*。也就是说，元素类型必须实现`Comparable`，并且是`compareTo`这个类的方法用于确定元素的排序方式。

第二[个](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)以集合和 a[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)作为参数，并根据 Comparator 对元素进行排序。这意味着对集合中元素的类型没有限制。

您可以采用这种方法编写自己的方法，`Comparator<Entry>`而不是修改现有的类，然后将其传递给 Collections.sort。既然这是一个任务，我就从这里交给你……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:18:17.593

看来你不需要类*AllEntries* ..

根据评论编辑：由于`Entry`无法修改，将类 AllEntries 更改为 a`EntryComparator implements Comparator<Entry>`并执行**compare()**方法，使用您已经创建的 compareTo() 方法作为基础

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T12:01:48.443

更新 - 通过将 AllEntries 类替换为：

```
public class EntryComparator implements Comparator<Entry>
{    
    public int compare(Entry o1, Entry o2) {
       //The compare code

    }
} 
```

并使用以下方法调用 ExtendedAddressBook 中的方法：

```
Collections.sort(allEntries, new EntryComparator()); 
```

# ios - 如何动态决定要转换到哪个屏幕（iOS 游戏）

> ID：16218496
> 
> 赞同：0
> 
> 时间：2013-04-25T15:12:30.200
> 
> 标签：ios, xcode, uiviewcontroller, uistoryboardsegue

我对如何在我的游戏中最好地执行屏幕转换有点困惑。我需要执行以下转换 [Main Menu] -> [Character Select] -> [Stage Select]

到目前为止，我一直在使用 Interface Builder 从 [Main Menu] 中的控件“单击'n拖动”到 [Character Select] 并选择模态 segue 类型。但后来我意识到，在第二次运行游戏时，玩家不需要再次进入[角色选择]屏幕。然后我会有以下流程 [Main Menu] -> [Stage Select]

所以我的问题是：

1）模态转换是推荐的方式吗？我看到的所有使用模态转换的例子都是弹出或类似的。我不想使用导航栏，因为我认为这些不是游戏的好设计选项。

2) 我在某处看到我不应该在这里使用 segues，而是使用“presentViewController:animated:completion:”，但这让我想到了另一组问题。

3）为了了解presentViewController ...我最终在苹果文档[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html) 中没有解释很多事情，

3.1）例如如何在Interface Builder中设置Controller的NIB文件名？（我是否必须创建一个 .xib 文件）。实际上这个 NIB/XIB 文件非常混乱。

我尝试将控制器类的名称作为 NIB 名称传递，如下所示：

```
MyController* controller = [UIViewController alloc] initWithNibName:@"MyController"... 
```

但我得到一个例外“无法在捆绑中加载NIB......”

3.2）此外，文档指出我应该将 controller.delegate 设置为 self 但 UIController 没有委托属性。我必须自己在呈现的控制器中定义一个委托属性吗？

3.3）第二个参数“bundle”呢，我应该总是传入'nil'还是应该传入mainBundle？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:31:18.507

您应该使用 segue 来调用：

```
- (void)performSegueWithIdentifier:(NSString *)identifier sender:(id)sender 
```

当您想要执行`[Main Menu] -> [Stage Select]`转换时。在你的 UIViewController 子类中创建一个 segue，配置它，然后根据需要使用它。

`UIControl`或者，在您看来，您已经有了一个`[Main Menu] -> [Character Select]`可以：

1.  改变它执行的segue
2.  `Menu->Stage`在启用和取消隐藏segue控件时禁用并隐藏它

# javascript - 在一个页面中多次执行谷歌图片搜索

> ID：16218498
> 
> 赞同：1
> 
> 时间：2013-04-25T15:12:33.220
> 
> 标签：javascript, html, google-search-api

我想写一个网页，可以动态生成从谷歌搜索中获取的图像。这些图片的搜索条件不同，所以我需要执行几次谷歌搜索，而我发现它非常困难。我尝试从谷歌提供的源代码修改这些代码，但它只能执行一次搜索：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
   <title>Google Search API Sample</title>
 <script src="https://www.google.com/jsapi"></script>
 <script type="text/javascript">

  google.load('search', '1');

  var imageSearch;
    var keyword="sexy";

  function searchComplete() {

    // Check that we got results
    if (imageSearch.results && imageSearch.results.length > 0) {

      // Grab our content div, clear it.
      var contentDiv = document.getElementById('content');
      contentDiv.innerHTML = '';

      var results = imageSearch.results;
      for (var i = 0; i < results.length; i++) {
        // For each result image to the screen
        var result = results[i];
        var imgContainer = document.createElement('div');

        var newImg = document.createElement('img');

        // There is also a result.url property which has the escaped version
        newImg.src=result.tbUrl;

        imgContainer.appendChild(newImg);

        // Put our title + image in the content
        contentDiv.appendChild(imgContainer);
      }

      //clear search 
      imageSearch.clearResults();

    }
  }

  function OnLoad() {

    // Create an Image Search instance.
    imageSearch = new google.search.ImageSearch();

    // Set searchComplete as the callback function when a search is 
    // complete.  The imageSearch object will have results in it.
    imageSearch.setSearchCompleteCallback(this, searchComplete, null);

    imageSearch.execute(keyword);
  }

  function hi(){
      keyword="usa";
      alert('hi');
       google.setOnLoadCallback(OnLoad);
      imageSearch.execute(keyword);
  }  

 google.setOnLoadCallback(OnLoad);

</script>

 </head>
  <body style="font-family: Arial;border: 0 none;">
   <button value="hi" onClick="hi">hi</button>
<div id="content">Loading...</div>
</body>
</html> 
```

程序只能在 OnLoad 方法中执行搜索。实际上，我尝试通过将 google.setOnLoadCallback(OnLoad) 放入 hi() 函数中多次调用它，但它没有用。希望有人可以帮助我解决这些问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T19:20:33.407

该`hi`功能对我来说没有多大意义：

```
function hi(){
    keyword="usa";
    alert('hi');
    google.setOnLoadCallback(OnLoad);
    imageSearch.execute(keyword);
} 
```

因为`onLoadCallbak`已经设置，并且*在*中执行了搜索`OnLoad`。这在搜索库加载时调用。这只发生一次，在页面加载后的某个时刻。

您需要做`hi`的事情与您正在做的事情相同`OnLoad`：

```
// Create an Image Search instance.
imageSearch = new google.search.ImageSearch();

// set a DIFFERENT callback (if different handling require)
imageSearch.setSearchCompleteCallback(this, searchComplete, null);

// set "keyword" to what your next search should be for
imageSearch.execute(keyword); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T10:08:37.087

更改`<button value="hi" onClick="hi">hi</button>`为

`<button value="hi" onClick="hi()">hi</button>`

# c# - C# linq groupby 返回不正确的组

> ID：16218502
> 
> 赞同：4
> 
> 时间：2013-04-25T15:12:43.667
> 
> 标签：c#, linq

我试图了解 linq 是如何工作的。我写了一个测试应用程序，但它没有按我期望的方式工作。从下面的代码中，我希望看到项目“test1”和“test4”组合在一起，但我不明白。相反，我要返回 4 个单独的组。意味着其中一项正在组合在一起。有人可以解释我做错了什么吗？谢谢。

```
public class linqtest
{   public int x1;
    public int x2;
    public string x3;

    public linqtest(int a, int b, string c)
    {
        x1 = a;
        x2 = b;
        x3 = c;

    }

    public bool Equals(linqtest other)
    {

        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;

        return x1 == other.x1 &&
                x2 == other.x2;

    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof(linqtest)) return false;
        return Equals((linqtest)obj);
    }
}
linqtest tc14 = new linqtest(1, 4, "test1");
inqtest tc15 = new linqtest(3, 5, "test2");
linqtest tc16 = new linqtest(3, 6, "test3");
linqtest tc16a = new linqtest(1, 4, "test4");

List<linqtest> tclistitems = new List<linqtest>();
tclistitems.Add(tc14);
tclistitems.Add(tc15);
tclistitems.Add(tc16);
tclistitems.Add(tc16a);

IEnumerable<IGrouping<linqtest, linqtest>> tcgroup = tclistitems.GroupBy(c => c); 
```

为什么 tcgroup 包含 4 个组？我期待3组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:14:06.827

发生错误是因为您覆盖`Equals`而不覆盖`GetHashCode`. 这两个必须一起覆盖，否则`GroupBy`将不起作用。

将此代码添加到您的课程以解决此问题：

```
public override int GetHashCode()
{
    // You are ignoring x3 for equality, so hash code must ignore it too
    return 31*x1+x2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:17:11.823

您不需要覆盖`Equal`方法，只需利用匿名类，因为匿名类基于以下属性进行比较`struct`：

```
tcgroup = tclistitems.GroupBy(c => new { c.x1, c.x2 }); 
```

# php - PHP / SQL将用户ID添加到新用户的查找表中

> ID：16218513
> 
> 赞同：0
> 
> 时间：2013-04-25T15:13:27.797
> 
> 标签：php, sql

我有一个脚本，它将一个新用户添加到数据库中并将它们存储在用户表中。我还有一个合同表（合同列表）和一个用户到合同的查找/链接表。

当您不知道他们将获得的唯一 ID 是什么时，我想知道将新用户添加到合同表的最佳方式？

例子：

**第 1 步**- 注册表单有正常的用户输入、用户名、密码等和许多合同复选框（所有合同也有唯一的 ID）。

**第 2 步**- 提交表单并将用户详细信息添加到用户表中，并为该新用户生成唯一 ID。

**步骤 3** - 使用所选合同的唯一 ID 和新用户的唯一 ID 将步骤 1 中选择的合同插入 users_contracts 表。

这就是我大脑受阻的地方。我如何知道新用户的唯一 ID 是什么？

目前我能想到的唯一方法是正常插入新用户，然后再次查询新用户名并从数据库中提取新用户 ID，然后在第三个查询中将其插入 users_contracts 表中。

就像是：

```
INSERT INTO `users` _POST DATA FROM FORM 
```

然后获取上面的 INSERTED 用户并存储在一个变量中：

```
SELECT FROM users _POST USERNAME 
```

然后将其添加到 users_contracts 表中：

```
INSERT INTO users_contracts _POST contracts and the above created variable for the users ID 
```

抱歉应该提到我使用 PDO 进行插入和所有数据库活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:17:04.070

运行用户插入查询后，运行：

```
$userId = mysql_insert_id(); 
```

返回先前插入的行的 ID。

编辑：因为有人会提到它，你应该实际使用 mysqli_insert_id() 因为 mysql_insert_id() 和其他 MySQL（而不是 MySQLi）最终将被弃用。

# php - 我应该如何清理仅在页面上使用的 _GET 变量？

> ID：16218516
> 
> 赞同：2
> 
> 时间：2013-04-25T15:13:28.907
> 
> 标签：php, wordpress, security, sanitization

我对 PHP 相当陌生，并且正在使用几个 _GET 变量来确定页面布局/Web 服务数据和页面上的一些其他逻辑。我没有存储数据或写入任何类型的数据库。我应该为此使用哪种消毒方法？

例如，我正在使用的一个 var 是这样的：

```
$querystring = $_SERVER['QUERY_STRING'];
if(isset($_GET['semester']) && $_GET['semester'] != ''){
  $listxml = simplexml_load_file("http://path/to/webservice/?".str_replace('semester','term',$querystring)); 
```

如果查询字符串设置了 ?semester= 而不是空白，那么我将其替换为 'term' 并按原样通过查询字符串传递给 Web 服务 URL（Web 服务使用 term 变量但 term 变量会干扰使用 wordpress 并重定向到该“术语”（WP 中的标签/类别）的帖子页面，因此我将其作为学期传递给 WP，然后将其更改为用于 Web 服务调用的术语。

因此，在这种情况下，除了将它按原样传递给 Web 服务之外，我没有对 _GET 做任何事情，Web 服务对查询字符串所做的事情不在我的掌控之中，但我应该以任何方式为他们“准备”它吗？

--

我也遇到过类似的情况：

```
$display = '';      
if (isset($_GET['display'])) {  
  $display = $_GET['display']; //set sort via querystring
} else {
  $display = 'interest'; //set to default by interest 
} 
```

之后：

```
<div id='byalphabet' class='<?php global $display; if($display != 'alphabet'){echo 'hide';} ?>'> 
```

和

```
<div id="byinterest" class="<?php global $display; if($display != 'interest'){echo 'hide';} ?>"> 
```

--

还用于一些动态javascript：

```
$view = '';
if (isset($_GET['view'])) { 
  $view = $_GET['view']; //set view via querystring
} 
```

之后：

```
<script>
<?php if ($view != ''){ $view = str_replace('/','',$view); ?>
jQuery('#<?php echo $view; ?>').trigger('click'); //activate view option accordion pane 
jQuery('html,body').animate({'scrollTop':jQuery('#<?php echo $view; ?>').offset().top - 50},500); //scrollTo view
</script> 
```

--

其他情况包括在数组中搜索 _GET 值`array_search($_GET['major'], $slugs);`并使用以下方法重定向页面：

```
 $parts = explode('/',$_SERVER['REQUEST_URI']);
 Header( "HTTP/1.1 301 Moved Permanently" ); //SEO friendly redirect
 Header( "Location: http://www.site.ca/programs/outline/".$parts[3]."/" ); 
```

编辑：我已经阅读了许多弹出的建议的类似问题，但它们主要是指以其他方式使用数据，例如插入数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:58:13.943

您应该始终清理输入参数。即使您没有在数据库中使用它们，您仍然容易受到跨站点脚本/XSS 攻击。

```
<?php $view = $_GET['view'] ?>
<script>jQuery('#<?php echo $view; ?>').trigger('click');</script> 
```

例如，给定上面的代码，如果`?view=page_one`你的 JavaScript 看起来像`jQuery('#page_one').trigger('click');`.

但是，如果您的查询字符串是`?view=hacked%27)%3B%20alert(document.cookies)%3B%20jQuery(%27%23page_one`- 现在您的 javascript 在页面上如下所示：

```
jQuery('#hacked'); alert(document.cookies); jQuery('#page_one').trigger('click'); 
```

可以很容易地将`alert()`AJAX 请求发送到不同的服务器。

最终，您所做的清理类型取决于您使用输入的上下文。在此示例中，您可能希望确保对单引号进行转义，但不同的实现可能会有所不同。

关于清理输入的好文章：http: [//coding.smashingmagazine.com/2011/01/11/keeping-web-users-safe-by-sanitizing-input-data/](http://coding.smashingmagazine.com/2011/01/11/keeping-web-users-safe-by-sanitizing-input-data/)

# php - 使用时间通过php从数据库中检索特定内容

> ID：16218517
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:13:35.683
> 
> 标签：php, time, dayofweek

我正在尝试根据当地时间在网站上显示信息。每个元素有 3 个元素。

```
1\. A start time from 01 - 24
2\. An end time from 00 - 60
3\. A day of the week from Mon - Sun 
```

我想要做的是根据日期和时间从数据库中加载特定元素。我该怎么做？在 php/mysql 中是否有任何脚本可以执行此操作？

我已经设法使用下面的脚本从数据库中获取所有元素以根据日期加载；

```
<? 

$day = date('l');  // weekday name (lower-case L) 
$time = (int)date("Gi");

$getdays = mysql_query("SELECT * FROM pages WHERE title = '".$day."'"); $getdays = mysql_fetch_array($getdays);
$getonair = mysql_query("SELECT * FROM pages WHERE subnav LIKE '%".$getdays['id']."%' AND type = '10'"); 

while ($goa = mysql_fetch_array($getonair)) {   

?><? echo $goa['id']; ?> - <? echo $goa['content']; ?></div>
<? } ?> 
```

这目前将显示数据库中今天的所有元素及其开始和结束时间，即

```
item 1
start time: 1700
end time: 1730
content: some content here

item 2
start time: 1400
end time: 1430
content: some content here

item 3
start time: 0400
end time: 1430
content: some content here

item 4
start time: 1800
end time: 1830
content: some content here

item 5
start time: 2200
end time: 2230
content: some content here 
```

我现在需要做的是找出一种方法来选择正确的项目并根据当前时间显示它。我该怎么做呢？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:50:54.463

好吧，在绞尽脑汁并浏览了一些文章之后，我想出了一种使它起作用的方法，而且非常简单。检查下面的查询以获取更多详细信息。

```
<? 

$day = date('l');  // weekday name (lower-case L) 
$time = (int)date("Gi");

$getdays = mysql_query("SELECT * FROM pages WHERE title = '".$day."'"); $getdays =   
mysql_fetch_array($getdays);
$getonair = mysql_query("SELECT * FROM pages WHERE subnav LIKE '%".$getdays['id']."%'
`content` <= '".$time."' AND `caption` >= '".$time."' AND type = '10'"); 

while ($goa = mysql_fetch_array($getonair)) {   

?><? echo $goa['id']; ?> - <? echo $goa['content']; ?></div>
<? } ?> 
```

# ios - ABPeoplePickerNavigationController。需要在同一个视图控制器中显示联系人

> ID：16218518
> 
> 赞同：1
> 
> 时间：2013-04-25T15:13:36.933
> 
> 标签：ios, objective-c, xcode, xcode4.5

我有一个嵌入在导航控制器中的视图控制器。它有一个按钮和一个表格视图。我需要将手机中的联系人加载到此视图控制器的表格视图中，但发生的情况是打开了一个显示联系人的新导航控制器。这是 .m 文件的代码：

```
- (IBAction)showContacts:(id)sender
{
    ABPeoplePickerNavigationController *picker =
    [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self; 

   // picker.modalPresentationStyle = UIModalPresentationCurrentContext;
    //picker.modalInPopover = YES;
  //  [self.navigationController presentModalViewController:picker animated:YES];
    [self presentModalViewController:picker animated:YES];
}

- (void)peoplePickerNavigationControllerDidCancel:
(ABPeoplePickerNavigationController *)peoplePicker
{
    [self dismissModalViewControllerAnimated:YES];
}

- (BOOL)peoplePickerNavigationController:
(ABPeoplePickerNavigationController *)peoplePicker
      shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    // [self displayPerson:person];
    [self dismissModalViewControllerAnimated:YES];

    return NO;
}

- (BOOL)peoplePickerNavigationController:
(ABPeoplePickerNavigationController *)peoplePicker
      shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property
                              identifier:(ABMultiValueIdentifier)identifier
{
    return NO;
} 
```

我猜这是非常标准的代码。如何让联系人显示在具有按钮的视图控制器的表视图中，而不是在不同的控制器中？

好的，现在我已经这样做了：

```
 - (IBAction)syncContacts:(id)sender
    {
        ABAddressBookRef addressBook = ABAddressBookCreate();
        CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
        for (int i = 0; i < ABAddressBookGetPersonCount(addressBook); i++) {
            ABRecordRef ref = CFArrayGetValueAtIndex(allPeople, i);
            NSString *contact = (NSString *)CFBridgingRelease(ABRecordCopyCompositeName(ref));
            NSLog( @"%@", contact);
            phoneContacts[i] = contact;
        }
         NSLog(@"%@",phoneContacts);
    } 
```

我已将方法的名称更改为 syncContacts（为方便起见）。当 NSLog(@"%@",contact) 被执行时，各个联系人被获取并显示在日志中。但是当我将联系人复制到 phoneContacts 数组（可变）中时，它不是在复制。我尝试过 addObject、insertObject:atIndex:、replaceObjectAtIndex:withObject: 等，但 phoneContacts 数组仍然为空。它已在 didViewLoad() 中初始化。由于没有任何内容存储在 phoneContacts 数组中，因此表格视图也没有被填充，因为它使用了 phoneContacts 数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:25:05.903

您将需要以编程方式访问 AddressBook 框架，而不是通过 AddressBookUI。您可以将 tableView 数据源设置为以下结果：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFMutableArrayRef peopleMutable = CFArrayCreateMutableCopy(
                                          kCFAllocatorDefault,
                                          CFArrayGetCount(people),
                                          people
                                  ); 
```

请参阅：http: [//developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:24:02.663

> 如何让联系人显示在具有按钮的视图控制器的表视图中

根据定义，如果您使用 ABPeoplePickerNavigationController，则不能，因为显示联系人的是一个新的视图控制器。新的视图控制器 = 不同的视图。换句话说，这是使用内置 ABPeoplePickerNavigationController 来避免自己做大量工作的代价。

另一种方法是发明*自己的*界面。您必须自己解析联系人数据库并呈现*数据*。这不是不可能的。这是我书中描述如何解析联系人数据库的部分：

[http://www.aeth.com/iOSBook/ch31.html#_address_book_database](http://www.apeth.com/iOSBook/ch31.html#_address_book_database)

但老实说，我认为您应该接受使用 ABPeoplePickerNavigationController 所涉及的妥协——调整*您的*界面以按照 ABPeoplePickerNavigationController 想要使用的方式做事。你会为自己节省很多时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T13:29:57.897

我通过将 ABPeoplePickerNavigationController 的视图嵌入到我自己的视图控制器中来完成这项工作：

```
- (void)embedContactsView {
    self.contactsController = [[ABPeoplePickerNavigationController alloc] init];
    [self.contactsController setPeoplePickerDelegate:self];

    //embed the view
    [self addChildViewController:self.contactsController];
    [self.view addSubview:self.contactsController.view];
    //if your view controller is a navigation controller make sure you
    //hide the nav bar or it will overlap the contacts search.
    [self.navigationController setNavigationBarHidden:YES];
} 
```

您甚至可以更改联系人选择器的导航栏（例如隐藏取消按钮）：

```
- (void)customiseContactsTabBar { //if this doesn't work be sure to call it in viewDidAppear
    //customise the apple picker a bit
    [self.contactsController.topViewController.navigationItem setTitle:@"Everyone"];
    self.contactsController.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(newButtonPressed)];
} 
```

虽然这种方法有点 hacky，但它比实现一个完整的自定义联系人选择器更有意义，以便它可以嵌入到另一个控制器中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-31T13:53:30.140

```
- (void)peoplePickerNavigationController:(ABPeoplePickerNavigationController*)peoplePicker didSelectPerson:(ABRecordRef)person
{
 [self dismissViewControllerAnimated:NO completion:^{
     ABPersonViewController *personController = [[ABPersonViewController alloc] init];

     [personController setDisplayedPerson:person];
     [personController setPersonViewDelegate:self];
     [personController setAllowsEditing:NO];
     personController.displayedProperties = [NSArray arrayWithObjects:
                                             [NSNumber numberWithInt:kABPersonPhoneProperty],
                                             nil];         
     [self.navigationController pushViewController:personController animated:YES];
 }];
} 
```

# android - 如何在android应用程序中同时使用移动wifi和数据连接用于不同目的

> ID：16218520
> 
> 赞同：4
> 
> 时间：2013-04-25T15:13:38.453
> 
> 标签：android, wifi, data-connections

我正在从事一项研究任务，我需要同时使用 wifi 和移动数据连接来完成 Android 应用程序中的不同任务。可能吗？如果是，那怎么办？任何解决方法的建议也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T20:56:26.183

有点晚了，但直接回答是否定的。

Android 会在可用时自动更改为 WiFi，因为它更快。

对不起

如果您将设备植根，也许有一种方法

# magento - Magento - 在管理员中使用变量复制电子邮件模板的行为

> ID：16218525
> 
> 赞同：1
> 
> 时间：2013-04-25T15:13:48.640
> 
> 标签：magento

我想在 Magento 中有一个功能，我可以在其中向管理员添加文本字段，并允许用户添加一个代码片段，其中将有一个变量的占位符。

在运行时，我将通过 getStoreConfig 获取代码片段并将变量/占位符替换为我需要的值。

除了如何添加变量和替换之外，我已经设法做所有事情。

所以我不需要帮助在管理员等中创建配置。

例如，用户在配置字段中输入以下内容：

```
<script>
  alert('{{amazing_value}}');
</script> 
```

然后在我的模板中我会这样做：

```
$codeSnippet = Mage::getStoreConfig('path_to_config');
$amazingValue = "This will replace the variable";

// Something here :) (this bit im not sure about where the variable is translated)

echo $codeSnippet 
```

那时的输出是：

```
 <script>
      alert('This will replace the variable');
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:42:11.093

在您的“这里的东西”区域，您可以尝试：

```
 $codeSnippet = str_replace("{{amazing_value}}",$amazingValue,$codeSnippet); 
```

# asp.net-mvc - 对来自可信来源（例如 AD）的输出进行编码

> ID：16218536
> 
> 赞同：1
> 
> 时间：2013-04-25T15:14:20.753
> 
> 标签：asp.net-mvc, active-directory, security, xss

最近，我们一直在讨论对来自受信任源（如 Active Directory）的输出数据进行编码的优点。我们有一个 Web 应用程序，它显示从 AD 查询的用户列表，并允许以各种方式对其进行管理。论据认为，如果来自 AD 的数据不是 Html 编码的，那么如果您有权访问域控制器，则可以注入脚本并对站点执行 XSS 样式攻击；例如，通过添加脚本作为 AD 用户的名字。

两种思想流派（1 用于不验证，2 用于验证）似乎是：

1.  如果您可以访问 DC，则可以做的比将代码注入显示您已经访问的信息的站点要糟糕得多。您也可以直接查看信息。那么为什么要打扰呢？
2.  如果您是域管理员，您可以制造这种攻击，从而创建一个后门，即使您离开公司也可以访问信息。

我认为手头的问题确实是一个更普遍的问题，除了防范恶意输入的常见做法之外，您是否需要防范（并因此编码）来自受信任来源的输出数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T22:02:36.393

始终进行输出编码是一种很好的做法。你已经用 MVC 标记了这个问题，所以我假设你的 Web 应用程序是一个 MVC 应用程序。如果您使用的是 Razor 视图，则会自动对输出进行编码。更多细节[在这里](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)。

# c++ - 在 OpenGL 中使用 PlayFile 苹果示例会冻结 OpenGL，直到播放声音结束

> ID：16218542
> 
> 赞同：0
> 
> 时间：2013-04-25T15:14:33.490
> 
> 标签：c++, xcode, opengl, audio

我正在使用 C++ 开发一个使用 OpenGL 的 Xcode 小应用程序。我试图找到一种向我的应用程序添加简单声音的方法。我对 OpenAL 不太成功（Alut 在 Mac 中不可用）并且无法使 sfml 和 SDL 在我的系统上工作。所以我决定尝试 Apple 的 PlayFile 示例：

[http://developer.apple.com/library/mac/#samplecode/PlayFile/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008651](http://developer.apple.com/library/mac/#samplecode/PlayFile/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008651)

我可以使用这个例子播放声音。但是，当声音开始播放时，OpenGL 会冻结，即所有动画都会停止，直到声音播放完毕。

我检查了文件 PlayFile.cpp 并找到了这一行：

```
 usleep ((int)(fileDuration * 1000\. * 1000.)); 
```

我认为它负责冻结OpenGL。在这行之前，我们开始播放声音。在这一行之后，我们清理缓冲区。有什么方法可以更改代码，以便声音开始播放，OpenGL 继续其任务，一旦声音播放完毕，我们就清理缓冲区？我尝试使用指针等其他解决方案在播放开始后进行清理，但现在我无法从应用程序中发出任何声音。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T14:31:44.610

好的，经过几天的研究，我找到了解决此问题的方法。我使用 pthread 创建多个线程，每个线程一个。我刚刚添加

```
#include <pthread.h> 
```

到任何定义线程的文件。我为我的声音和线程定义了一个列表：

```
pthread_t threads[3];
string sounds[3] = {"back.wav", "Arrow1.wav", "Arrow2.wav"}; 
```

并使用了一个简单的功能：

```
void * playSound(void *threadid)
{
long tid;
tid = (long)threadid;
player(sounds[tid], 1);
pthread_exit(NULL);
} 
```

当我创建一个线程时播放声音：

```
pthread_create(&threads[2], NULL, playSound, (void *)2); 
```

这样我的动画可以很容易地与声音相结合。

# sql - 在 SQL 选择语句中还使用逗号分隔的表列表时，如何执行连接？

> ID：16218543
> 
> 赞同：4
> 
> 时间：2013-04-25T15:14:34.020
> 
> 标签：sql, sql-server, tsql, select

这显然是 SQL Server 中正确的语法：

```
SELECT a.id, b.name
FROM Table1 a, Table2 b
WHERE a.id = b.fk1 
```

这是这样的：

```
SELECT a.id, c.status
FROM Table1 a
JOIN Table3 c ON a.id = c.fk2 
```

但这显然不是：

```
SELECT a.id, b.name, c.status
FROM Table1 a, Table2 b
JOIN Table3 c ON a.id = c.fk2
WHERE a.id = b.fk1 
```

我通常不想以第三种情况的样式构建查询（实际上也不是第一种情况），但这可能是编辑我公司已经编写的一些代码时阻力最小的路径。有人将第一个表格用于五个不同的表，我真的需要通过 JOIN 语句在第六个表中工作，而不要冒险弄乱他们已经拥有的东西。即使我可以根据需要直接重写他们的东西，但我真的很想知道如何在第三种情况下做类似的事情。

在示例中完全按原样运行代码，第三种情况给我这个错误消息：

```
The multi-part identifier "a.id" could not be bound. 
```

什么在语法上打破了第三种情况？可以应用什么简单的修复？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:32:45.150

同样，我不建议这样做。但是，您可以将 更改`,`为 a `cross join`：

```
SELECT a.id, b.name, c.status
FROM Table1 a cross join Table2 b
JOIN Table3 c ON a.id = c.fk2
WHERE a.id = b.fk1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:18:15.383

这段代码：

```
SELECT a.id, b.name, c.status
FROM Table1 a, Table2 b
JOIN Table3 c ON a.id = c.fk2
WHERE a.id = b.fk1 
```

正在做一个交叉连接`a`和一个内部连接的结果`b`和`c`。`c`无法访问 中的任何字段，`a`因为正在对 执行联接`b`。您应该做的是将查询更改为：

```
SELECT a.id, b.name, c.status
FROM Table1 a
     inner join Table2 b on a.id = b.fk1
     inner JOIN Table3 c ON a.id = c.fk2 
```

# c++ - Boost 与 .Net 随机数生成器

> ID：16218544
> 
> 赞同：2
> 
> 时间：2013-04-25T15:14:39.437
> 
> 标签：c++, boost, random, f#

我在 F# (.Net) 和 C++ 中开发了相同的算法（用于估计隐藏马尔可夫模型参数的 Baum-Welch）。在这两种情况下，我都开发了相同的测试，它生成具有已知分布的随机测试数据，然后使用算法来估计参数，并确保它收敛到已知的正确答案。

问题是测试在 F# 情况下工作正常，但在 C++ 实现中无法收敛。我在一些真实世界的数据上比较了这两种算法，它们给出了相同的结果，所以我的猜测是测试数据的生成在 C++ 案例中被破坏了。因此我的问题是：.Net 4 附带的随机数生成器是什么（我认为这是 VS2010 的默认版本）？

在 F# 中，我正在使用：

```
let random = new Random()
let randomNormal () = //for a standard normal random variable
    let u1 = random.NextDouble()
    let u2 = random.NextDouble()
    let r = sqrt (-2\. * (log u1))
    let theta = 2\. * System.Math.PI * u2
    r * (sin theta)
//random.NextDouble() for uniform random variable on [0-1] 
```

在 C++ 中，我使用标准的 Boost 类：

```
class HmmGenerator
{
public:
    HmmGenerator() :
         rng(37), //the seed does change the result, but it doesn't  make it work
         normalGenerator(rng, boost::normal_distribution<>(0.0, 1.0)),
         uniformGenerator(rng, boost::uniform_01<>()) {}//other stuff here as well
private:
    boost::mt19937 rng;
    boost::variate_generator<boost::mt19937&, 
                           boost::normal_distribution<> > normalGenerator;
    boost::variate_generator<boost::mt19937&, 
                           boost::uniform_01<> > uniformGenerator;
}; 
```

我应该使用这两种生成随机数的方式来期待不同的结果吗？

编辑：另外，.Net 中使用的生成器是否在 Boost 中可用（理想情况下具有相同的参数），所以我可以在 C++ 中运行它并比较结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:20:12.017

> 因此我的问题是：.Net 4 附带的随机数生成器是什么（我认为这是 VS2010 的默认版本）？

从[文档上`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)

> Random 类的当前实现基于 Donald E. Knuth 的减法随机数生成器算法。有关详细信息，请参阅 DE Knuth。“计算机编程的艺术，第 2 卷：半数值算法”。Addison-Wesley，马萨诸塞州雷丁，第二版，1981 年。

.

> 我应该使用这两种生成随机数的方式来期待不同的结果吗？

与其他现成的随机生成器相比，您在 C++ 中使用的 Mersenne-Twister 算法被认为是非常可敬的。

我怀疑您的代码中的任何差异都存在于其他地方。

# javascript - 无法确定在 node.js 的 console.log 中是否使用“，”或“+”

> ID：16218546
> 
> 赞同：0
> 
> 时间：2013-04-25T15:14:52.767
> 
> 标签：javascript, node.js

这是 config.json 文件：

```
{
"username": "myname",
"api-key": "test",
"name": "testname",
"version": 1
} 
```

这是 node.js 文件

```
var fs=require("fs");
console.log("Start");
var contents=fs.readFileSync("config.json");
console.log("Contents: " +contents);
var config=JSON.parse(contents);
console.log("Username: ", config.username); 
```

现在我是否使用

```
console.log("Username: ", config.username); 
```

或者我使用

```
console.log("Username:" +config.username); 
```

我在输出中得到相同的结果。但是，它在记录其他变量时会给出不同的结果。使用“，”和使用“+”时无法获取。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:19:32.800

如果您使用`+`then 那是一个[连接运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#String_operators)，并且您将单个字符串（或数字）传递给`log()`.

如果您使用 a `,`，那么您将传递多个参数。

如果您传递多个参数，并且您没有使用格式化字符串，那么它们每个都将通过`inspect`.

有关更多详细信息，请参阅[console.log](http://nodejs.org/api/stdio.html#stdio_console_log_data)和[util.inspect的文档。](http://nodejs.org/api/util.html#util_util_inspect_object_options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:26:37.473

不同之处在于，如果一个或多个变量是字符串，则 + 运算符与连接运算符不同，如果两个变量都是非字符串化数字，则与加法运算符不同。, 分隔符始终将每个变量分别转换为字符串并分别记录它们。

# c# - 我可以使用什么事件处理程序来判断 DataGrid 控件何时完成排序？

> ID：16218548
> 
> 赞同：0
> 
> 时间：2013-04-25T15:14:55.627
> 
> 标签：c#, .net, sorting, datagrid, sorted

我只是想知道我可以使用什么事件处理程序来告诉我 DataGrid 控件何时完成排序。我知道有一个排序事件，但是当它完成此操作时，我似乎找不到任何东西。只要我能找到在控件完成排序后触发的事件，任何解决方法都会很有用。

这是此控件上的事件列表：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.datagrid_events.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid_events.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:59:17.213

默认情况下，排序是在 UI 线程中同步完成的。如果您从 DataGrid 派生一个类并覆盖 OnSorting 方法，您可以做您想做的事。如果调用基类的 OnSorting 方法，则在返回时进行排序。

```
public class MyDataGrid : DataGrid
{
...
  override OnSorting(DataGridSortingEventArgs eventArgs)
  {
    // sorting begins
    DataGrid::OnSorting(eventArgs);
    // sorting done
  }
} 
```

这给出了更详细的答案：[如果 DataGrid 列已排序（而不是排序），我如何得到通知](https://stackoverflow.com/questions/8416961/how-can-i-be-notified-if-a-datagrid-column-is-sorted-and-not-sorting)

# jquery - 向上或向下移动滚动条

> ID：16218549
> 
> 赞同：2
> 
> 时间：2013-04-25T15:14:55.960
> 
> 标签：jquery, css

当我浏览 extjs 示例时，我遇到了这种行为[http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/array-grid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/array-grid.html)

当您单击一行并开始向上或向下移动光标时，滚动条会随之移动，当您到达最后一条记录时，滚动条会与您一起向下移动。

该示例使用了一些键盘事件，但在我的示例中，我只是尝试突出显示该行，希望我能理解这是如何完成的。

这是我的例子[http://jsfiddle.net/thiswolf/phEax/](http://jsfiddle.net/thiswolf/phEax/)

这就是我得到滚动条的方式

```
.tableholder{border:2px solid red; overflow-y:auto;height:300px} 
```

当您向上或向下移动行时，是什么使滚动条一起移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:33:58.700

[签出这个小提琴](http://jsfiddle.net/phEax/2/)。除了您的代码之外，它还使用以下代码来模仿您所针对的非常基本的表格控件版本

```
 var cntnr = $('.tableholder');
        var cntnr_height = cntnr.height();
        var cntnr_top = cntnr.offset().top;
        var cntnr_scrolltop = cntnr.scrollTop();
        var all_rows = $('tr', cntnr)
        var row_height = $(all_rows.get(0)).height();

        $('.tableholder').click(function (ev) {
           var t = ev.target;
           if (t.tagName != 'TD' && t.tagName != 'TR')
              return;

           var the_row = t.tagName == 'TR' ? $(t) : $(t.parentNode)
           all_rows.removeClass('current')
           the_row.addClass('current');
        })

        $('#deselect').click(function () {
           all_rows.removeClass('current');
        })

        $(document).click(function (ev) {
           /*if ($(ev.target) != cntnr && $(ev.target).parents().filter(cntnr).length == 0 && $(ev.target).hasClass('container'))
            all_rows.removeClass('current');*/
        }).keydown(function (ev) {

              //don't scroll if no rows are selected
              if (all_rows.filter('.current').length == 0) {
                 return;
              }

              var keycode = ev.which;

              if ([38, 40].indexOf(keycode) !== -1) {
                 ev.preventDefault();
              }
              else {
                 //we only scroll on up/down arrow
                 return;
              }

              var the_row = all_rows.filter('.current');
              var next = the_row.next();
              var prev = the_row.prev();

              //check if reached extremes of table
              if (
                 keycode == 40 && !next.length
                    || keycode == 38 && !prev.length
                 )
                 return false;

              the_row.removeClass('current');

              if (keycode == 40) {
                 if (next.offset().top + row_height + 10 - cntnr_top > cntnr_height + cntnr.scrollTop()) {
                    cntnr.scrollTop(cntnr.scrollTop() + row_height);
                 }
                 next.addClass('current');
                 setDataFromRow(next)
              }
              else {
                 if (prev.offset().top < cntnr.scrollTop()) {
                    cntnr.scrollTop(cntnr.scrollTop() - row_height);
                 }
                 prev.addClass('current');
                 setDataFromRow(prev)
              }
           });

        function setDataFromRow(row) {
           if (!row instanceof jQuery)
              row = $(row)

           ip_id.val($('td:nth-child(1)', row).html());
           ip_firstname.val($('td:nth-child(2)', row).html());
           ip_lastname.val($('td:nth-child(3)', row).html());
           ip_country.val($('td:nth-child(4)', row).html());
           ip_city.val($('td:nth-child(5)', row).html());
           ip_town.val($('td:nth-child(6)', row).html());
           ip_gender.val($('td:nth-child(7)', row).html());

        }

        var curr = $("tr").eq(1);
        curr.addClass("current");

        /*$('#id').val('0');
         $('#firstname').val('firstname');
         $('#lastname').val('lastname');
         $('#country').val('country');
         $('#city').val('city');
         $('#town').val('town');
         $('#gender').val('gender');*/

        var ip_id = $('#id'),
           ip_firstname = $('#firstname'),
           ip_lastname = $('#lastname'),
           ip_country = $('#country'),
           ip_city = $('#city'),
           ip_town = $('#town'),
           ip_gender = $('#gender');

        setDataFromRow(curr);

        /* your event handlers for buttons here  */ 
```

请注意，此代码可能并非在所有方面都是完美的。我还没有触及您在某些方面出错的事件处理代码：DI 希望您从该代码中获得起点和方向

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:19:33.390

看看这个[http://jsfiddle.net/Memolition/DcaG4/](http://jsfiddle.net/Memolition/DcaG4/)

```
$('table tr').click(function() {
    var now_index = $(this).index();
    $('table tr').removeClass('back_change');
    $(this).addClass('back_change');
});
$(document).keydown(function(event){
    var keycode=(event.keyCode?event.keyCode:event.which);
     if(keycode == '40') {
        event.preventDefault();
        $('table tr.back_change').removeClass('back_change').next().addClass('back_change');
        $('div').animate({
         scrollTop: $('table tr.back_change').offset().top
     }, 2000);
    }
});
$(document).keydown(function(event){
    var keycode=(event.keyCode?event.keyCode:event.which);
    if(keycode == '38') {
        event.preventDefault();
        $('table tr.back_change').removeClass('back_change').prev().addClass('back_change');
        $('div').animate({
         scrollTop: $('table tr.back_change').offset().top
     }, 100);
   }
}); 
```

# vb.net - 提供者：SQL 网络接口，错误：25 - 连接字符串无效

> ID：16218553
> 
> 赞同：0
> 
> 时间：2013-04-25T15:15:13.747
> 
> 标签：vb.net, connection-string

我使用 VS2012 和 SQL 2008R2 在本地计算机上开发了这个应用程序。我正在尝试将其移至生产服务器。它是带有 2012 SQL Server 的虚拟服务器。我检查了远程连接的所有属性，一切都已启用。应用程序将打开登录屏幕，一旦我输入用户名和密码（这是使用 WSAT 在我的计算机上创建的。现在我收到此错误：建立与 SQL Server 的连接时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：25 - 连接字符串无效）这就是我所拥有的网络配置：

```
<connectionStrings>
    <remove name="LocalSqlServer" />
<add connectionString="Server=\\events;Database=Digital Signage;Integrated Security=true" name="DSConnectionString" />
    <add connectionString="data source=\\events;Integrated Security=SSPI;AttachDBFilename=c:\\DS\aspnetdb.mdf;User Instance=true" name="LocalSqlServer" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:24:53.933

Not entirely sure, but some points which may help you troubleshoot:

*   You can use a resource like [this](http://www.connectionstrings.com/sql-server-2012) to help you generate the appropriate connection string
*   I am not sure that `Server=\\events` sounds entirely right - you should perhaps replace this with the actual SQL instance name here when deploying remotely (either `<machine name>` or `<machine name>\<instance name>` for a named instance)
*   You probably don't need to explicitly state the port which SQL Server is listening on (if it's still the default 1433), but something to keep in mind
*   Do you have anywhere that you explicitly reference the connection string `LocalSqlServer` in your code? If so, have you changed that to reference the connection string `DSConnectionString` before building and deploying? (**NB.** It may be better to just keep the connection string entry but change the value of the connection string to what you need for the SQL 2012 instance, rather than creating a new connection string entry but I'm not sure about your specific use case)

# workflow - ActivitiException：未知变量类型名称 alfrescoScriptNode

> ID：16218554
> 
> 赞同：0
> 
> 时间：2013-04-25T15:15:14.423
> 
> 标签：workflow, alfresco, activiti

我正在使用 alfresco 社区版及其 activiti 工作流引擎。我想在我的 java 类中访问 activiti 任务和执行；设置并获取一些变量。但是*RuntimeService*有一个问题，调用它的方法时会抛出异常：

```
org.activiti.engine.ProcessEngine.getRuntimeService().getVariables(taskExecutionId)) 
```

它抛出：

```
org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.activiti.engine.ActivitiException: unknown variable type name alfrescoScriptNode
### The error may involve org.activiti.engine.impl.persistence.entity.VariableInstanceEntity.selectVariablesByExecutionId-Inline
### The error occurred while setting parameters
### Cause: org.activiti.engine.ActivitiException: unknown variable type name alfrescoScriptNode
at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:8)
at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:77)
at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:69)
at org.activiti.engine.impl.db.DbSqlSession.selectList(DbSqlSession.java:182)
at org.activiti.engine.impl.persistence.entity.VariableInstanceManager.findVariableInstancesByExecutionId(VariableInstanceManager.java:47)
at org.activiti.engine.impl.persistence.entity.ExecutionEntity.loadVariableInstances(ExecutionEntity.java:880)
at org.activiti.engine.impl.persistence.entity.VariableScopeImpl.ensureVariableInstancesInitialized(VariableScopeImpl.java:57)
at org.activiti.engine.impl.persistence.entity.VariableScopeImpl.collectVariables(VariableScopeImpl.java:78)
at org.activiti.engine.impl.persistence.entity.VariableScopeImpl.getVariables(VariableScopeImpl.java:65)
at org.activiti.engine.impl.cmd.GetExecutionVariablesCmd.execute(GetExecutionVariablesCmd.java:58)
at org.activiti.engine.impl.cmd.GetExecutionVariablesCmd.execute(GetExecutionVariablesCmd.java:28)
at org.activiti.engine.impl.interceptor.CommandExecutorImpl.execute(CommandExecutorImpl.java:24)
at org.activiti.engine.impl.interceptor.CommandContextInterceptor.execute(CommandContextInterceptor.java:42)
at org.activiti.engine.impl.interceptor.LogInterceptor.execute(LogInterceptor.java:33)
at org.activiti.engine.impl.RuntimeServiceImpl.getVariables(RuntimeServiceImpl.java:81) 
```

我搜索了它，但没有相关结果。

# c# - 我可以在一个应用程序中为 2 个数据库使用相同的实体模型吗

> ID：16218559
> 
> 赞同：1
> 
> 时间：2013-04-25T15:15:37.067
> 
> 标签：c#, entity-framework

我必须创建一个应用程序，它将常用配置设置从一个数据库复制到另一个数据库（相同的模式）。我想知道是否可以使用一个实体模型来访问两个数据库。假设需要复制的是商店和产品。我可以使用相同的模型从 serverA.databaseA 获取存储，然后插入到 server.databaseB 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:51:30.343

`DbSet`您可以在两个不同的 DbContext 类中有两个相似的 s。正如评论中提到的，真正的问题是处理身份列和 IMO 与上下文附件。我认为最好的方法是手动处理标识列并以分离状态从 db 获取数据。

# c# - C# 正则表达式：让我们解析 Objective-C

> ID：16218561
> 
> 赞同：0
> 
> 时间：2013-04-25T15:15:38.347
> 
> 标签：c#, .net, ios, objective-c, regex

我正在尝试解析一个 x-code 项目来翻译它。

我有 3 或 4 个大型应用程序要翻译，所以我启动了一个 C# 项目来执行此操作。

我在使用正则表达式时遇到了很大的麻烦。

有谁知道如何提取这样的字符串：

要解析的字符串：

```
title = [[Object alloc] initWithTitle:@"My Title" andParam:@"A complex \"param\"" andAFormat:@"Hello %@",toto]; 
```

结果应该像一个数组：

`ObjC "My Title", "A complex \"param\"", "Hello %@"`

我对这个很迷茫......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:46:55.347

If you're trying to translate a set of strings within a project, then I'd strongly recommend converting all string instances such as @"My Title" to the localizable macro:

NSLocalizedString(@"My Title", @"Comment which will appear above My Title, such as ObjC \"My Title\"");

These can then be extracted using the genstrings command line utility, which will generate a strings file with entries like:

/* Comment which will appear above My Title, such as ObjC "My Title" */ @"My Title" = @"My Title";

This means that integrating the translated strings back into your project becomes very simple.

The native way to approach localizing strings within your application is documented here:

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html)

# javascript - HTML5 视频作为 Sench Touch iOS App 的闪屏

> ID：16218563
> 
> 赞同：1
> 
> 时间：2013-04-25T15:15:42.700
> 
> 标签：javascript, ios, extjs, sencha-touch, html5-video

我想将 HTML5 视频显示为 Sench Touch iOS 应用程序的启动画面。我正在使用以下代码：

**索引.html：**

```
 <video id="splashScreen"  autoplay="autoplay" width="100%" height="100%" 
                            src="train.mp4" type="video/mp4"></video>

    <script type="text/javascript">
        function embedVideo() {
            var el = document.getElementById('splashScreen');
            el.src= "train.mp4";
            el.load();
        }
        </script> 
```

在**App.js 中：**

```
 launch: function() {

            var task = Ext.create('Ext.util.DelayedTask', function () {
                                  Ext.fly('splashScreen').destroy();
                                  });
            task.delay(4000);
            Ext.Viewport.add(Ext.create('TEC.view.Main'));
          } 
```

它显示了我不希望它显示的播放控件，并且它也不会在 4 秒后显示我的下一个屏幕（主），因为我希望它在 4 秒后被销毁。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T22:19:27.067

移动设备不允许您通过网络/HTML 自动播放视频。在 iOS 和 Android 上播放视频都需要用户交互。恐怕此时您对视频闪屏的想法是不可能的（没有用户交互）。

如果您想在 Phonegap 中包装您的移动应用程序，您可以自动播放您的 HTML 视频：

[在 PhoneGap 中自动播放视频](https://stackoverflow.com/questions/9078098/autoplay-video-in-phonegap)

# php - 使用 symfony2 和 twig 创建文件文本

> ID：16218564
> 
> 赞同：2
> 
> 时间：2013-04-25T15:15:42.663
> 
> 标签：php, file, symfony, text, twig

我想用 twig 从 symfony2 控制器生成文件文本。

与普通的 html 模板一样，但使用纯文本，并将文件保存在某处。

可能吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T07:24:34.693

终于明白了。

我想生成 bash 脚本。

1.  在正确的位置创建模板，例如

    ```
    myBundle/Resources/views/MyController/mytemplate.sh.twig 
    ```

2.  在 ScriptGenerator 类中

    ```
    // Load the template
    $template = $this->twig->loadTemplate('myBundle:MyController:mytemplate.sh.twig');
    // Render the whole template
    $script = $template->render($parameters); 
    ```

3.  在你想使用它的地方，放置这个代码。

    ```
    namespace myproject\myBundle\Controller;

    use Symfony\Bundle\FrameworkBundle\Controller\Controller;

    use myproject\myBundle\Generator\ScriptGenerator;

    class myController extends Controller
    {
        public function myAction()
        {
            $twig = $this->get('twig');
            $generator = new ScriptGenerator($twig);
            $parameters = array(
                'a parameter' => "whatever"
            );
            $script = $generator->setScript($parameters);

            file_put_contents('whereyouwant',$script);

            ...
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:25:40.150

是的，这是可以做到的。您必须在路线定义 (.txt) 中输入正确的格式

您还必须设置正确的`Content-Type`标题，

```
 $response->headers->set('Content-Type', 'text/plain'); 
```

事实上，[Response 对象](http://symfony.com/doc/current/book/http_fundamentals.html#requests-and-responses-in-symfony)通常填充 HTML 代码，但它也可以包含纯文本（带有 text/plain 的 Content-Type 标头）、图像或其他格式。

您还应该在模板名称上使用正确的格式，

```
XXXYourBundle:XXXX:temlate_name.txt.twig // In case you're using Twig as a templating Engine 
```

# javascript - Javascript - 从鼠标更改事件中查找特定表单

> ID：16218566
> 
> 赞同：0
> 
> 时间：2013-04-25T15:15:43.583
> 
> 标签：javascript

我有一个包含 4 个单独的下拉选项表单的网页，并且我有一个 javascript 函数，当通过鼠标更改任何表单时会调用该函数。

如何确定从事件对象更改了哪些特定表单以及随后进行的特定选项更改？

我似乎所有的例子都假设我对每个单独的表单都有一个专用的 javascript 函数。但我希望能够“即时”构建表单，因此我需要通过单个 javascript 函数传递所有表单更改。

回答这个问题 - 这里有更多信息：

我确实使用 jQuery（但我是新手） - javascript 事件设置代码行是：

```
 document.onchange=this.audioselect 
```

并且 audioselect 函数目前只有一行 - 一个警报，证明每次表单更改都会调用它：

```
alert("audio Select this: " + evtobj.type.toString(). ). 
```

表单的定义与此类似（每个后续表单名称都会递增：

"

```
 <div id="videoSlot" style="position: absolute; left:250px; top:450.0px; background-     color:green;">
           <img src="http://localhost:9000/HomeVu1/HomeVu1/skin/HomeVu.jpg"
                                width="210.0"
                                height="140.0"
                                           alt="HomeVu1/skin/HomeVu.jpg"
                                           title="HomeVu1/skin/HomeVu.jpg"/>
                                                      <br /> 
    <strong>Select Image 1 Audio
    <form name="audio_form_1" >
      <select name="menu_1" >
                <br />
    <option name = "audio_1" value = "1" >OH Intro </option>

    <option name = "audio_2" value = "2" >OH Front </option>

    <option name = "audio_3" value = "3" >OH Plot </option>

    <option name = "audio_4" value = "4" >OH Hall </option>
</select>   <br /> </form>  </div>" 
```

感谢期待。

-麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:19:27.977

也许为每个表单提供唯一的 id，以便您知道单击了哪个下拉菜单并相应地运行您专用的 javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:52:16.423

jQuery 非常适合这项任务。在不同的浏览器中附加事件可能会很痛苦。这是一个指向 jsFiddle 的链接，它显示了一个简单的示例，说明如何实现您所说的内容：http: [//jsfiddle.net/UK2zH/1/](http://jsfiddle.net/UK2zH/1/)

您需要单击屏幕左上角的运行按钮，然后从表单中进行选择以查看您从何处选择的警报。

在 jsFiddle 中，我将一个 jQuery 事件侦听器附加到文档 - 如果要动态创建表单，这很重要。事件监听器设置为只关注表单元素中发生的事件。

```
$(document).on("change", "form", function(e){
    var currentForm = $(this);
    var formName = currentForm.attr('name');
    var selectedOption = currentForm.find('option:selected').val();
    alert("form: " + formName + ", selected: " + selectedOption);
}); 
```

附加的函数将接收触发事件的元素作为“this”。然后我们可以使用更多的 jQuery（通过在 jQuery 选择器中包装“this”）来轻松访问表单名称和选定选项等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T14:46:57.967

感谢您的意见 - 我有一些工作。首先，我必须将脚本与我拥有的另一组鼠标事件函数分开放置，formName 也未定义，而（奇怪的是）选项 selectedOption 设置正确。但是，能够从“this.name”中获取表单名称 - 请参见下面的脚本：

有点混合，但确实有效。

"

```
$(document).on("change", "form", function(e){

             var currentForm = $(this);
             var formName = currentForm.attr('name');
     var selectedOption = currentForm.find('option:selected').val();

    alert(
        "audio Select Form: " + currentForm.name + " Option: " + selectedOption
            + " this name:" + this.name 
        )

});
</script>" 
```

谢谢 - 迈克

# java - 解析不在逗号之间的空格的快捷方式？

> ID：16218567
> 
> 赞同：0
> 
> 时间：2013-04-25T15:15:45.253
> 
> 标签：java, regex, string, split

是否有一种简短的方法（可能是 str.split 变体）通过空格解析字符串，同时在引号之间绕过它？

示例：这应该拆分“这不是”等等

结果：

```
[0] - this; [1] - should; [2] - be; [3] - split; [4] - "this is not"; 
[5] - and; [6] - so; [7] - on; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:30:03.043

尝试这个：

```
String words = input.split(" +(?=([^\"]*\"[^\"]*\")*[^\"]*$)"); 
```

仅当右侧有偶数个引号时才表示拆分。它不适合转义引号，但这并不难做到 - 只是变得非常难以阅读。

# javascript - 禁用复选框上的jQuery单击事件未触发

> ID：16218568
> 
> 赞同：4
> 
> 时间：2013-04-25T15:15:45.690
> 
> 标签：javascript, jquery

我有一个复选框列表，我试图通过在选择 2 个后禁用所有未选中的复选框来限制最多 2 个复选框。

这很好用，但是如果用户单击禁用的复选框，我会尝试向用户显示一条消息，让他们知道为什么不能选择超过 2 个。我正在尝试`click()`在禁用的复选框上触发事件，但它实际上并没有开火。有任何想法吗？

```
 var totalChecked = 0;
    var checkedLimit = 1;

    jQuery(".post-to-facebook").change(function() {
        if (jQuery(this).attr("checked") == "checked") {
            if (totalChecked < checkedLimit) {
                totalChecked += 1;

                if (totalChecked == checkedLimit) {
                    jQuery(".post-to-facebook[checked!='checked']").attr("disabled", true);
                }
            } else {
                jQuery(this).attr("checked", false);

                alert("You can only post twice to Facebook at one time. This is to avoid spam complaints, we don't want to spam on your page!");
            }
        } else {
            totalChecked -= 1;

            if (totalChecked < checkedLimit) {
                jQuery(".post-to-facebook[checked!='checked']").attr("disabled", false);
            }
        }
        console.log(totalChecked);
    });

    // THIS DOES NOT FIRE
    jQuery(".post-to-facebook:disabled").click(function() {
        alert("You can only post twice to Facebook at one time. This is to avoid spam complaints, we don't want to spam on your page!");
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:30:47.927

[（来自我在如何在 chrome 和 firefox 中右键单击时禁用/启用复选框的](https://stackoverflow.com/questions/16174527/how-to-disable-enable-a-checkbox-on-right-click-in-chrome-and-firefox/16174913#16174913)回答）

您可以在其顶部堆叠一个透明元素（因此用户看不到它），相同的大小/形状，并侦听该单击事件。启用后，隐藏该堆叠元素。

这里有一些让你开始的东西：http: [//jsfiddle.net/8dYXd/4/](http://jsfiddle.net/8dYXd/4/)

它使用这种结构：

```
<span>
    <input id='a' type='checkbox' disabled="disabled" />
    <span class="disabled-detector"></span>
</span> 
```

这个CSS：

```
span {
    position: relative;
}

span.disabled-detector {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    opacity: 0;
}

input+span.disabled-detector {
    display: none;
}

input[disabled]+span.disabled-detector {
    display: inline;
} 
```

请注意您仍然可以“单击”禁用的元素。

从技术上讲，您可以只使用父级`<span>`- 给它一个特殊的`class`，然后监听点击事件。这些事件将从其后代中冒出来，所以应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T15:18:03.830

禁用元素不会接收事件，因为它们完全被禁用。

您需要假装使用 CSS 和 JavaScript 本身禁用了某些功能。通过这种方式，您可以应用样式，包括指针（或缺少指针）来模拟禁用状态，但仍能接收事件。你也可以用另一个元素覆盖元素并监听那个东西上的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T10:01:51.970

制作复选框`readonly`会有所帮助，因为事件将被触发。虽然要注意[行为上的差异](https://stackoverflow.com/questions/7730695/whats-the-difference-between-disabled-disabled-and-readonly-readonly-for-te)。

```
<input type="checkbox" name="yourname" value="Bob" readonly="readonly" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:22:51.110

它不会触发点击事件，因为它已被禁用。您可以通过用另一个元素临时覆盖它并处理`onclick`覆盖层来解决这个问题。否则，您将不得不使用样式将其变灰，以便它*看起来*只是禁用。

# c# - 将“引用”传递给 Dictionary 元素？

> ID：16218575
> 
> 赞同：1
> 
> 时间：2013-04-25T15:16:14.167
> 
> 标签：c#

所以我有：

```
ConcurrentDictionary<string, int> dict; 
```

我想传递对其元素之一的引用，假设`dict["x"]`是一个方法，并允许该方法更改/设置该元素。是否可以做到这一点，还是我必须通过字典本身？此外，即使该元素不作为字典中的键存在，是否也可以这样做？还是它必须是字典中包含的有效键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:23:21.923

是的，通过使用委托。可以从更改函数中调用此委托。然后，委托将更改或设置字典中的键/值。

```
void DoChangeMyElement<T>(Action<T> changeIt)
{
    changeIt(123);
} 
```

您可以使用以下方法调用此方法：

```
ConcurrentDictionary<string, int> dict = new ...;
DoChangeMyElement(value => dict["X"] = value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:19:53.927

> 我想传递对其一个元素的引用，假设 dict["x"] 给一个方法，并允许该方法更改/设置该元素。是否可以做到这一点，或者我必须通过字典本身？

只需通过字典，正如 Sam 所说，无论如何它是一个引用类型。

> 此外，即使该元素不作为字典中的键存在，是否可以这样做？

不，那是不可能的，你必须添加它，然后将它发送到函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:18:26.727

通过整体没有坏处`Dictionary`。毕竟它本身就是一个引用类型，传递`Dictionary`会比通过引用传递更好的形式。

但我想你可以封装你 int 并像这样传递它

```
public class IntContainer
{
    int value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:24:20.290

您必须传递整个字典和密钥，然后让该方法执行所需的操作。这样做的基本原因是您只能通过引用传递字段和局部变量，而不是属性（包括索引器属性）。

如果您真的很想这样做，您可以使用反射和/或委托来完成您想要完成的事情，但这不是最好的方法。

# delphi - Delphi，应用程序扩展，Windows 7

> ID：16218576
> 
> 赞同：1
> 
> 时间：2013-04-25T15:16:19.180
> 
> 标签：delphi, windows-7, scaling, dpi

今天是个好日子。

我对用于 Windows 7 的 Delphi 7 应用程序有疑问。

它非常适合像 XP 这样的旧 Windows，但在 Win7 上，表单被缩放到更高的 dpi，这完全破坏了表单上的所有内容。

所以，我的问题 - 有没有办法修复它以在 win7 上正常工作，或者以某种方式完全禁用缩放？

我试图搜索，但找不到任何对我有用的东西，我非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-12T20:03:39.470

我在 2003 年左右（当时）大 22 英寸的 XP 上看到了这种现象（作为聘请的顾问）：MS C++ 应用程序上的按钮消失在表单的右侧。当时，开发人员（500 公里外） ) 以前从未见过这种现象。

我最近通过以下方式在 D7 中解决了类似的问题：

1.  在旧的开发机器上设置大字体并调整（相当中等的）表单大小以容纳可见组件。但是，设置大字体让老win2000崩溃，再也无法完全恢复...
2.  在更现代的机器（带有 D7 的 XP）上，我在 Form1 上将 Scaling 属性设置为 False，效果很好，即字体更小。有问题的程序在几台预装 Win7 的壁挂式触摸屏 PC 上运行，这些 PC 具有令人难以置信的大字体（因为它是触摸屏）。

我找不到比在开发人员机器上临时设置 Silly Large Fonts 并看看会发生什么更好的方法。（我看到这里现在有很多相关的问题！...）

# .net - Oracle dotnet DBMS 输出查询

> ID：16218577
> 
> 赞同：2
> 
> 时间：2013-04-25T15:16:27.403
> 
> 标签：.net, oracle, dbms-output

我正在.net 中运行一些代码，使用.net 中的oracleclient。SQL 代码可以使用 DBMS_PUT_LINE 函数输出许多响应，然后我通过调用 DBMS_GET_LINE 来检索这些响应。如果输出只是特定的文本行，即 'DBMS_OUTPUT.PUT_LINE('USER IS NOT AVAILABLE : PLEASE CONTACT SYSTEM ADMINISTRATOR');' 然后对 get_line 的调用工作正常，我得到了那个文本。但是，如果调用是输出 SQL 错误消息，'DBMS_OUTPUT.PUT_LINE(SQLERRM);' 然后我得到以下错误返回，'ORA-06502: PL/SQL: numeric or value error: hex to raw conversion error'

真正奇怪的是，如果我第二次运行完全相同的代码（包括关闭并重新连接到数据库），那么对 get_line 的调用将返回正在输出的实际错误消息。

我的代码基本上执行以下操作：

打开数据库连接 使用 executeNonQuery 运行 SQL 查询 创建输出参数，例如：

```
Dim anonymous_block = "begin dbms_output.get_line(:1, :2); end;"

aCmd.CommandText = anonymous_block
aCmd.Parameters.Add("1", OracleType.VarChar, 32000)
aCmd.Parameters("1").Direction = ParameterDirection.Output
aCmd.Parameters.Add("2", OracleType.Int32)
aCmd.Parameters("2").Direction = ParameterDirection.Output 
```

然后运行另一个 executeNonQuery 以获取输出。

然后用 .close() 关闭数据库

但在第二次运行时，它得到了正确的输出。我可能有一些东西我第一次没有正确设置？

有什么想法吗？我总是可以只运行两次代码，但这似乎非常低效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:13:32.247

首先，设计一个应用程序在客户端和服务器之间进行有意义的交互`dbms_output`是一种糟糕的方法。如果您的存储过程需要向调用者发送信息，则应通过`OUT`参数或异常来完成。让存储过程捕获异常，尝试将其写入`dbms_output`缓冲区，然后让应用程序尝试从`dbms_output`缓冲区读取以确定是否存在异常，这不是编写应用程序的可扩展方法。

也就是说，如果您要从`dbms_output`缓冲区中获取数据，则需要在循环中执行此操作。在您的特定情况下，错误堆栈包含多行数据（可能只有一次调用，`dbms_output.put_line`但文本包含内部换行符。您需要循环直到`status`（第二个参数）返回 1。

# opencart - OpenCart - 我可以从外部访问数据吗？

> ID：16218578
> 
> 赞同：1
> 
> 时间：2013-04-25T15:16:30.707
> 
> 标签：opencart

我有一个与电子商店直接交互的桌面应用程序的计划。我的目标是创建一个使用电子商店的桌子并通过这个应用程序将其呈现给商店的应用程序。在我进入它之前，我想找到一个购物车软件（最好是许多网络主机提供的 oneclick 安装），它可以让我访问它的表格并随意修改/读取/写入，而无需通过网站。我可以用 OpenCart 做到这一点吗？如果不是，我应该朝哪个方向射击？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:48:33.310

通常这是不可能的，除非您直接使用一些可以直接连接到数据库服务器的数据库管理工具。不过有一些选择：

*   为桌面应用程序编写一个 API - 它可以基于 Web 服务 - 桌面应用程序将与之通信（需要做更多的工作，但这应该是最好的解决方案）
*   让桌面应用程序直接连接到数据库服务器（与 OpenCart 使用的设置相同；只需要桌面应用程序开发）
*   或者正如我提到的，为 MySQL 使用桌面 DBMS 工具（或通用的工具），其中有很多，很多也是免费的......（根本没有开发，但我不确定这是否是理想的解决方案)

# jquery - 如何将 add rel="lightbox" 附加到特定链接？

> ID：16218579
> 
> 赞同：2
> 
> 时间：2013-04-25T15:16:41.987
> 
> 标签：jquery, wordpress, menu, hyperlink, rel

我正在 wordpress 中构建一个站点，需要在菜单中的特定链接中添加一个灯箱。我尝试了几种方法，但似乎无法让它们起作用。我敢肯定这只是我处理它的方式的一个混淆。

无论如何，[这里有一个 jsFiddle](http://jsfiddle.net/aFLLB/)来展示我的最新尝试。 `$("a[href$=login.asp").attr("rel", "lightbox")`

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:21:58.040

有几点不对：

1）您没有关闭属性选择器括号（如已建议的那样）

2）您的 href 值包含一个句号，因此您也需要将值括在引号中

这就是你想要的：

```
$("a[href$='login.asp']").attr("rel", "lightbox") 
```

[这是一个工作示例](http://jsfiddle.net/aFLLB/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:18:06.497

您`]`的 jQuery 选择器中缺少 a 。尝试`$("a[href$=login.asp]").attr("rel", "lightbox")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:26:49.817

试试这个更新的小提琴：http: [//jsfiddle.net/aFLLB/9/](http://jsfiddle.net/aFLLB/9/)

添加了大括号和引号

```
href$='login.asp' aswell 
```

# mysql - MySQL 使用索引获得最快的结果

> ID：16218580
> 
> 赞同：3
> 
> 时间：2013-04-25T15:16:45.083
> 
> 标签：mysql, performance, indexing

我有以下索引结构，可以帮助我们更快地检索：

```
CREATE TABLE IF NOT EXISTS `index_site` ( `id_building` char(32) NOT NULL, `id_client` char(32) NOT NULL, `id_broker` smallint(5) unsigned NOT NULL, `kind_client` char(1) NOT NULL, `city` smallint(6) unsigned NOT NULL, `lat` float(10,6) NOT NULL, `lng` float(10,6) NOT NULL, `zone` smallint(2) unsigned NOT NULL, `sector` smallint(4) unsigned NOT NULL, `subregion` smallint(6) unsigned NOT NULL, `country` char(2) NOT NULL, `habs` smallint(5) unsigned NOT NULL, `bath` smallint(5) unsigned NOT NULL, `persons` smallint(5) unsigned NOT  NULL, `include_elevator` enum('1','0') NOT NULL, `build_level` varchar(20) NOT NULL, `area` mediumint(8) unsigned NOT NULL, `area_um` enum('1','2','3','4','5') NOT NULL, `area_str` varchar(10) NOT NULL, `code` char(10) NOT NULL, `title` tinytext NOT NULL, `type_offer` varchar(50) NOT NULL, `offer_name` varchar(20) NOT NULL, `comments` text NOT NULL, `type_building` varchar(50) NOT NULL, `address` tinytext NOT NULL, `sector_name` tinytext NOT NULL, `city_name` varchar(50) NOT NULL, `subregion_name` varchar(50) NOT NULL, `area_terrain` varchar(10) NOT NULL, `area_um_terrain` tinyint(4) NOT NULL, `image` varchar(70) NOT NULL, `image_total` tinyint(2) unsigned NOT NULL, `build_status` tinyint(3) unsigned NOT NULL, `tags` text NOT NULL, `url` varchar(200) NOT NULL, `include_offer_value` enum('1','0') NOT NULL, `offer_value` varchar(15) NOT NULL, `offer_value_format` varchar(20) NOT NULL, `prc_comission` varchar(5) NOT NULL, `date_added` datetime NOT NULL, `date_updated` datetime NOT NULL, `date_expire` datetime NOT NULL, `date_suspended` date NOT NULL, `visits` int(11) NOT NULL, `kind_offer` tinyint(4) NOT NULL, `kind_building` tinyint(5) unsigned NOT NULL, `kind_building_type` tinyint(5) unsigned NOT NULL, `mark_bld` tinyint(3) unsigned NOT NULL, `mark_bld_color` char(7) NOT NULL, `status` tinyint(1) unsigned NOT NULL, `is_made` enum('0','1') NOT NULL, `is_project` enum('0','1') NOT NULL, `is_bm` enum('0','1') NOT NULL, `is_demo` enum('0','1') NOT NULL, `is_leading` enum('0','1') NOT NULL, `visible_in_metasearch` mediumtext NOT NULL, `visible_in_web` mediumtext NOT NULL, `seller_image` varchar(150) NOT NULL, `seller_name` varchar(50) NOT NULL,
KEY `id_broker` (`id_broker`), KEY `id_client` (`id_client`), KEY `kind_building` `kind_building`), KEY `city` (`city`), KEY `offer_value` (`offer_value`), KEY `is_bm` (`is_bm`), KEY `status` (`status`), KEY `sector` (`sector`), KEY `zone` (`zone`), KEY `area` (`area`), KEY `prc_comission` (`prc_comission`), KEY `is_made` (`is_made`), KEY `is_leading` (`is_leading`), KEY `id_building` (`id_building`), KEY `date_added` (`date_added`), KEY `code` (`code`), KEY `country` (`country`), KEY `habs` (`habs`), KEY `kind_offer` (`kind_offer`), FULLTEXT KEY `tags` (`tags`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED; 
```

是的，太大了！！！:)

好的，主题是结构我在找到结果时使用一些键；这是正常的，我执行以下查询：

```
SELECT * FROM `index_site` WHERE kind_building='1' AND kind_offer='1' AND city='1' 
```

这个查询花了 0.0179 秒，很好，但我在查询中添加了 EXPLAIN：

```
EXPLAIN SELECT * FROM `index_site` WHERE kind_building='1' AND kind_offer='1' AND city='1' 
```

我得到以下结果：

```
+----+-------------+------------+-------------+-------------------------------+-------------------------------+---------+------+------+-------------------------------------------------------------+
| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra | +----+-------------+------------+-------------+-------------------------------+-------------------------------+---------+------+------+-------------------------------------------------------------+
| 1 | SIMPLE | index_site | index_merge | kind_building,city,kind_offer | kind_offer,city,kind_building | 1,2,1 | NULL | 184 | Using intersect(kind_offer,city,kind_building); Using where |
+----+-------------+------------+-------------+-------------------------------+-------------------------------+---------+------+------+-------------------------------------------------------------+ 
```

我使用了正确的键，但是在 MySQL 的 Extra 列中，当我得到“使用位置”时，他们说“你看起来有问题”。

我的问题是，如果我有一个正确的索引查询，那么“使用 where”有什么问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:22:46.700

从文档：

> 如果该`Extra`列还显示`Using where`，则表示该索引正在用于执行键值查找。

您正在`*`从表中选择所有字段 ( )。

由于并非所有字段都被合并相交中使用的索引覆盖，因此需要在表本身中查找字段。

尝试运行这个：

```
SELECT  kind_building, kind_offer, city
FROM    index_site
WHERE   kind_building = '1'
        AND kind_offer = '1'
        AND city = '1' 
```

，`Using where`应该去。

# python - Python 类实例存储在列表中以存储单独的实例

> ID：16218582
> 
> 赞同：1
> 
> 时间：2013-04-25T15:16:49.450
> 
> 标签：python, class, variables, global

```
from datetime import datetime

class sms_store:
    def __init__(self):
        self.store = [] #Keeps resetting / not saving data from previous instances
        self.message_count = 0 #Keeps resetting / not saving data from previous instances
    def add_new_arrival(self,number,time,text):
        self.store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        self.message_count += 1

newsms = sms_store()
time = datetime.now().strftime('%H:%M:%S')
newsms.add_new_arrival("23456",time, "hello, how are you?") 
```

如上面评论部分所示，我想要一个列表来存储来自各种实例的信息。不是一个实例，而是几个单独的信息实例，列表是一个可访问的列表，我可以在其中编辑它，它保存来自不同实例的信息。它不这样做。它在每个实例后重置。

我已经尝试过全局变量路由但不理解它并且不认为它会起作用。我在类外设置了一个全局变量，并在类内创建了一个对象以存储在列表中，但它给了我一个错误：**UnboundLocalError: local variable 'message_count' referenced before assignment**。

我正在做一项需要在交互式 python 站点中使用类的练习：http: [//openbookproject.net/thinkcs/python/english3e/classes_and_objects_I.html#term-class](http://openbookproject.net/thinkcs/python/english3e/classes_and_objects_I.html#term-class)

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:46:23.577

You should not create a new instance of sms_store each time:

```
newsms = sms_store()
newsms.add_new_arrival("23456", datetime.now().strftime('%H:%M:%S'), "hello, how are you?")
newsms.add_new_arrival("65432", datetime.now().strftime('%H:%M:%S'), "I'm fine, thanks") 
```

works just fine

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:25:23.460

看起来你想要一个类变量。

代码应如下所示：

```
from datetime import datetime

class Sms_store:
    store = []
    message_count = 0

    def __init__(self):
        pass

    def add_new_arrival(self,number,time,text):
        Sms_store.store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        Sms_store.message_count += 1

newsms1 = Sms_store()
time = datetime.now().strftime('%H:%M:%S')
newsms1.add_new_arrival("23456",time, "hello, how are you?")

newsms2 = Sms_store()
time = datetime.now().strftime('%H:%M:%S')
newsms2.add_new_arrival("23456",time, "hello, how are you?")

print Sms_store.store 
```

这样，变量`store`将`message_count`被`Sms_store`类的所有实例共享。

# ios - JSONKit 基准测试

> ID：16218583
> 
> 赞同：15
> 
> 时间：2013-04-25T15:16:54.230
> 
> 标签：ios, jsonkit

我从 [http://www.bonto.ch/blog/2011/12/08/json-libraries-for-ios-comparison-updated/](http://www.bonto.ch/blog/2011/12/08/json-libraries-for-ios-comparison-updated/)中提取了代码，并在我的本地机器上对其进行了测试。

我对结果感到惊讶，并且**NSJSonSerialization**提供了比**JSONKit**更好的性能。

NSJSonSerialization 在速度方面真的超过了 JSONKit 还是我做错了什么？

![twitter_timeline_json.png](https://i.stack.imgur.com/Ww5wb.png)

**twitter_timeline.json**

![重复json.png](https://i.stack.imgur.com/3aznl.png)

**重复.json**

![random_json.png](https://i.stack.imgur.com/JjKWY.png)

**随机.json**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-11T10:40:39.540

你没有做错任何事。

iOS 6 中的情况发生了变化。Apple 大大提高了`NSJSONSerialization`. 使用 iOS 6 及更高版本时，它是最快的。

JSONKit 也有一年没有更新了。它正在落后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-11T12:33:36.860

Interestingly, there are still people out there who care about JSON parser performance ;)

About three years ago, I developed my own JSON parser with the goal to make it fast and with a low memory foot-print. Since then, I was interested how it compares to others, especially NSJSONSerialization and JSONKit. I do have a number of bench marks which I run occasionally, to check how new compilers and OSs did improve the parsers. I also forked Bonto's bench, fixed a few errors, added a few pathological JSON files and added my own parser as well.

Well, I can confirm that during the last years, the performance of `NSJSONSerialization` has been improved greatly. It's now comparable to JSONKit for many work loads. If I remember right, a certain test took 690ms for NSJSONSerialization iOS 5.0, while it now performs at 520ms on iOS 6.1\. JSONKit took about 524ms - and now with the same sources - it takes about 500ms, the latter solely due to better compilers.

Since I was curious, I gathered some results, compiled with Xcode (soon available) and a few screenshots taken from my forked Bonto's bench mark.

The test includes my own parser library (JPJson) in the test with name "JPJsonData" (the newest version which is not yet checked in into GitHub), in a fair and comparable test. I ensured, JSONKit has been compiled with all optimizations enabled, and disabled assertions, so that it is as fast as possible.

The test has been run on this hardware, an iPad 2 (the second variant), with these specs:

> **System Name: iPhone OS System Version: 6.1.3 Model: iPad Localized Model: iPad Platform: iPad2,2 Hardware Model: K94AP Platform Type: 14 Platform String: iPad 2G CPU Frequency: 475.113 MHz BUS Frequency: 475.113 MHz Total Memory: 502 MByte User Memory: 419 MByte**

![enter image description here](https://i.stack.imgur.com/fDZYs.png)

* * *

Some other test file, pretty much average JSON:

![enter image description here](https://i.stack.imgur.com/Yy7ed.png)

* * *

JSON with mostly numbers:

![enter image description here](https://i.stack.imgur.com/INLJ6.png)

* * *

JSON with mostly random Unicode strings.

These JSON Strings do contain "Unicode noncharacters" and "Unicode NULL" characters. JSONKit does not allow those characters - thus is fails. JPJson won't allow them by default, but it has options which when set, allow those characters in JSON Strings:

![enter image description here](https://i.stack.imgur.com/1hiuL.png)

* * *

# Update

I ran the benchmark for an iPhone 5s on iOS 7, for both 32-bit and 64-bit.

JSONKit failed to compile for 64-bit.

```
System Name: iPhone OS
System Version: 7.0.4
Model: iPhone
Localized Model: iPhone
Platform: iPhone6,2
Hardware Model: N53AP
Platform Type: 18
Platform String: Unknown iPhone
CPU Frequency: 0 MHz
BUS Frequency: 0 MHz
Total Memory: 999 MByte
User Memory: 858 MByte 
```

All timings in milli seconds.

```
-----------------------------------
twitter_timeline.json

| Library             |  32-bit |  64-bit |
|---------------------|--------:|--------:|
| JSONKitData         |   1.68  |       *)|
| JPJsonData          |   1.16  |    1.29 |
| NSJSONSerialization |   2.44  |    2.21 |
| SBJsonData          |   6.05  |    6.69 |

-----------------------------------
appache_builds.json

| Library             |  32-bit |  64-bit |
|---------------------|--------:|--------:|
| JSONKitData         |    2.80 |      *) |
| JPJsonData          |    3.21 |    3.52 |
| NSJSONSerialization |    3.23 |    4.17 |
| SBJsonData          |   10.41 |   11.75 |

-----------------------------------
mesh.json

| Library             |  32-bit |  64-bit |
|---------------------|--------:|--------:|
| JSONKitData         |   87.64 |      *) |
| JPJsonData          |   25.46 |   20.34 |
| NSJSONSerialization |  144.25 |   34.25 |
| SBJsonData          |  105.60 |  107.70 |

-----------------------------------
sample.json

| Library             |  32-bit |  64-bit |
|---------------------|--------:|--------:|
| JSONKitData         |  failed |      *) |
| JPJsonData          |    5.97 |    6.39 |
| NSJSONSerialization |   18.94 |   13.66 |
| SBJsonData          |  failed |   88.19 |

-----------------------------------
random.json

| Library             |  32-bit |  64-bit |
|---------------------|--------:|--------:|
| JSONKitData         |   23.01 |      *) |
| JPJsonData          |   17.69 |   20.62 |
| NSJSONSerialization |   28.83 |   28.60 |
| SBJsonData          |   82.93 |   82.74 |

*) Failed to compile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-11T09:26:33.280

我在 iPhone 4 (ios7) 和 iPhone 4S (ios 6.1) 上运行测试，NSJSONSerialization 在这两种情况下都更快。

![在此处输入图像描述](https://i.stack.imgur.com/EkxjG.png)

![在此处输入图像描述](https://i.stack.imgur.com/FESfk.png)

# r - 使用 apply 重写循环

> ID：16218586
> 
> 赞同：3
> 
> 时间：2013-04-25T15:16:57.653
> 
> 标签：r

新手问题：大约 50K 元素的 data.frame 上的这个双循环评估*非常*缓慢，需要 30 多秒。我在网上读到我应该使用某种形式的 apply 函数来解决这个问题，但到目前为止还不能得到正确的代码。从具有增益结果的第一个 data.frame 开始，目标是获得第二个 data.frame，其中仅填充大于目标的值，所有其他值都为 0。

此代码有效：

```
ExcessGain = function(Value, Target){
  max(0,Value - Target)
}

Pcnt_O_O_x = data.frame()

for (j in 1:ncol(Pcnt_O_O)){
  for (i in 1:nrow(Pcnt_O_O)){
    Pcnt_O_O_x[i,j] = ExcessGain(Pcnt_O_O[i,j], GainTargetPcnt)
  }
} 
```

我可以使用应用函数而不是内部循环以某种方式加快速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:30:15.560

您的函数看起来只是从数组中每个单元格的值中减去一个目标值。任何负值都将替换为 0。在这种情况下，您不需要任何循环，您可以使用 R 内置的矢量化来执行此操作：

```
set.seed(123)
# If you have a data.frame of all numeric elements turn it into a matrix first
df <- as.matrix( data.frame( matrix( runif(25) , nrow = 5 ) ) )

target <- 0.5
df
#        X1        X2        X3         X4        X5
#1 0.2875775 0.0455565 0.9568333 0.89982497 0.8895393
#2 0.7883051 0.5281055 0.4533342 0.24608773 0.6928034
#3 0.4089769 0.8924190 0.6775706 0.04205953 0.6405068
#4 0.8830174 0.5514350 0.5726334 0.32792072 0.9942698
#5 0.9404673 0.4566147 0.1029247 0.95450365 0.6557058

df2 <- df - target
df2
#          X1          X2          X3         X4        X5
#1 -0.21242248 -0.45444350  0.45683335  0.3998250 0.3895393
#2  0.28830514  0.02810549 -0.04666584 -0.2539123 0.1928034
#3 -0.09102308  0.39241904  0.17757064 -0.4579405 0.1405068
#4  0.38301740  0.05143501  0.07263340 -0.1720793 0.4942698
#5  0.44046728 -0.04338526 -0.39707532  0.4545036 0.1557058

df2[ df2 < 0 ] <- 0
df2
#        X1         X2        X3        X4        X5
#1 0.0000000 0.00000000 0.4568333 0.3998250 0.3895393
#2 0.2883051 0.02810549 0.0000000 0.0000000 0.1928034
#3 0.0000000 0.39241904 0.1775706 0.0000000 0.1405068
#4 0.3830174 0.05143501 0.0726334 0.0000000 0.4942698
#5 0.4404673 0.00000000 0.0000000 0.4545036 0.1557058 
```

这是一些基准测试，以显示在 a 上`matrix`运行与在a 上运行的速度差异`data.frame`。`f.df( df )`并且`f.m( m )`是分别在具有 100 万个元素的 data.frame 和矩阵上运行的两个函数：

```
require( microbenchmark )
microbenchmark( f.df( df ) , f.m( m ) , times = 10L )

#Unit: milliseconds
#     expr        min         lq     median         uq        max neval
# f.df(df) 6944.09808 9009.39684 9233.18528 9533.75089 10036.5963    10
#   f.m(m)   37.26433   39.00189   40.46229   41.15626   130.6983    10 
```

当矩阵很大时，对矩阵进行操作要快*两个数量级。*

如果你*真的*需要使用 apply 函数，你可以像这样应用到矩阵的每个单元格：

```
m <- matrix( runif(25) , nrow = 5 )
target <- 0.5
apply( m , 1:2 , function(x) max(x - target , 0 ) )
#         [,1]      [,2]       [,3]      [,4]      [,5]
#[1,] 0.4575807 0.0000000 0.15935928 0.0000000 0.1948637
#[2,] 0.0000000 0.0000000 0.00000000 0.0000000 0.0000000
#[3,] 0.0000000 0.0000000 0.00000000 0.0000000 0.0000000
#[4,] 0.3912719 0.0000000 0.06155316 0.1533290 0.0000000
#[5,] 0.3228921 0.4697041 0.23554353 0.1352888 0.0000000 
```

# css - Twitter Bootstrap 布局在视口调整大小时均匀“包裹”

> ID：16218593
> 
> 赞同：1
> 
> 时间：2013-04-25T15:17:17.170
> 
> 标签：css, twitter-bootstrap, responsive-design, viewport

我正在尝试使用 Twitter Bootstrap 创建响应式布局。有一个图像“网格”（100x100），我想以 1,2 或 4 宽的行显示。我在“.container-fluid”中使用“.row”，然后使用 span3 来包含行内的每个项目。

```
<div class="container-fluid">
    <div class="row">
             <div class="span3 product"><img src="//placehold.it/100x100"></div>
             <div class="span3 product"><img src="//placehold.it/100x100"></div>

             <div class="span3 product"><img src="//placehold.it/100x100"></div>
             <div class="span3 product"><img src="//placehold.it/100x100"></div>
    </div>
    <div class="row">
             <div class="span3 product clearfix"><img src="//placehold.it/100x100"></div>
             <div class="span3 product"><img src="//placehold.it/100x100"></div>

             <div class="span3 product"><img src="//placehold.it/100x100"></div>
             <div class="span3 product"><img src="//placehold.it/100x100"></div>
    </div> 
</div> 
```

问题是当浏览器调整到一定宽度时，布局变化不均匀。例如，当视口在 769px 和 795px 宽之间时，我得到包含 3 个项目的行，而下一行包含 1 个项目。我宁愿有 2 或 4 个项目的“偶数”行。[在 Bootply 上查看演示](http://bootply.com/59986)。

Bootstrap 有开箱即用的方法，还是我需要自定义视口计算来获得这种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T23:46:52.743

将 .row div 的类更改为 .row-fluid。

这样可以连续显示 4 个项目，或者如果您将窗口缩小到某个点，则仅显示一个。它永远不会连续做 3 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T23:07:24.457

为什么不把代码中间的部分去掉，让浏览器处理布局呢？这将允许您的物品正确堆叠，您还可以指定最小宽度以确保您不会变得太小。

将平铺项目连续包装意味着您的项目将始终在新行上创建一个中断，删除它将允许使布局不均匀的项目浮在其他项目旁边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T23:32:26.177

像 Vijay Ramamurthy 说的那样，将行的类别更改为 row-fluid 。

或者根据需要使用同位素插件来适应您的画廊：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)

# jboss7.x - 使用 openJpa 模块时，slf4j 在 JBOSS 中不起作用

> ID：16218596
> 
> 赞同：1
> 
> 时间：2013-04-25T15:17:27.590
> 
> 标签：jboss7.x, slf4j, openjpa, openjpa-maven-plugin

当我不使用 openJpa 时，我的 EAR 应用程序运行良好。一旦我使用 open JPA，我就会得到“SLF4J 无法加载类 blaaa”。如何配置 openJpa 模块以使用我从 pom.xml 提供的 SL4J 并避免该错误？

我使用 JBOSS 7.1.1

**pom.xml**

```
<properties>

    <slf4j.version>1.7.3</slf4j.version>
    <logback.version>1.0.10</logback.version>
       </properties>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>${logback.version}</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-core</artifactId>
        <version>${logback.version}</version>
    </dependency> 
```

…………

**openjpa 模块.xml**

```
<module xmlns="urn:jboss:module:1.1" name="org.apache.openjpa">  
    <resources>  
        <resource-root path="openjpa-2.2.0.jar"/>  
        <resource-root path="openjpa-all-2.2.0.jar"/>  
    </resources>  
        <dependencies>  
            <module name="javax.persistence.api"/>  
            <module name="javax.transaction.api"/>  
            <module name="javax.validation.api"/>  
            <module name="org.apache.commons.lang"/>  
            <module name="org.apache.commons.collections"/>  
            <module name="org.slf4j"/>  
        </dependencies>  
</module> 
```

**jboss-部署-结构.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<jboss-deployment-structure>
    <deployment>
        <!-- Exclusions allow you to prevent the server from automatically adding some dependencies     -->
        <exclusions>
            <module name="org.slf4j" />
            <module name="org.slf4j.impl" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

**错误**

```
10:17:53,854 ERROR [stderr] (MSC service thread 1-4) SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".

10:17:53,860 ERROR [stderr] (MSC service thread 1-4) SLF4J: Defaulting to no-operation (NOP) logger implementation

10:17:53,866 ERROR [stderr] (MSC service thread 1-4) SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.

10:17:53,873 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-4) Critical error during deployment: : java.lang.LinkageError: loader constraint violation: when resolving interface method "org.slf4j.ILoggerFactory.getLogger(Ljava/lang/String;)Lorg/slf4j/Logger;" the class loader (instance of org/jboss/modules/ModuleClassLoader) of the current class, org/slf4j/LoggerFactory, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for resolved class, org/slf4j/ILoggerFactory, have different Class objects for the type org/slf4j/Logger used in the signature
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242) [openjpa-all-2.2.0.jar:2.2.0]
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:254) [openjpa-all-2.2.0.jar:2.2.0]
    at net.sf.ehcache.CacheManager.<clinit>(CacheManager.java:131) [ehcache-ee-2.6.2.jar:]
    at com.zreflect.emyed.whiteboard.controller.CacheController.<init>(CacheController.java:39) [classes:]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_25]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [rt.jar:1.6.0_25]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_25]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_25]
    at java.lang.Class.newInstance0(Class.java:355) [rt.jar:1.6.0_25]
    at java.lang.Class.newInstance(Class.java:308) [rt.jar:1.6.0_25]
    at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:256) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:255) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]

10:17:54,007 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/emyed-whiteboard]] (MSC service thread 1-4) Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener: java.lang.RuntimeException: java.lang.LinkageError: loader constraint violation: when resolving interface method "org.slf4j.ILoggerFactory.getLogger(Ljava/lang/String;)Lorg/slf4j/Logger;" the class loader (instance of org/jboss/modules/ModuleClassLoader) of the current class, org/slf4j/LoggerFactory, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for resolved class, org/slf4j/ILoggerFactory, have different Class objects for the type org/slf4j/Logger used in the signature
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]
Caused by: java.lang.LinkageError: loader constraint violation: when resolving interface method "org.slf4j.ILoggerFactory.getLogger(Ljava/lang/String;)Lorg/slf4j/Logger;" the class loader (instance of org/jboss/modules/ModuleClassLoader) of the current class, org/slf4j/LoggerFactory, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for resolved class, org/slf4j/ILoggerFactory, have different Class objects for the type org/slf4j/Logger used in the signature
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242) [openjpa-all-2.2.0.jar:2.2.0]
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:254) [openjpa-all-2.2.0.jar:2.2.0]
    at net.sf.ehcache.CacheManager.<clinit>(CacheManager.java:131) [ehcache-ee-2.6.2.jar:]
    at com.zreflect.emyed.whiteboard.controller.CacheController.<init>(CacheController.java:39) [classes:]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_25]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [rt.jar:1.6.0_25]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_25]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_25]
    at java.lang.Class.newInstance0(Class.java:355) [rt.jar:1.6.0_25]
    at java.lang.Class.newInstance(Class.java:308) [rt.jar:1.6.0_25]
    at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:256) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:255) [jsf-impl-2.1.7-jbossorg-2.jar:]
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:43:24.223

看起来您可能获得了两个不同版本的 sfl4j。添加`<scope>provided</scope>`到您的 slf4j 依赖项。另一种选择是提供一个[jboss-deployment-structure.xml](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7#ClassLoadinginAS7-JBossDeploymentStructureFile)来排除服务器 slf4j。

示例 jboss-deployment-structure.xml：

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2">
    <deployment>
        <exclusions>
            <module name="org.slf4j" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

还要确保您没有传递 slf4j 依赖项，例如 sfl4j-jdk14.jar。

# sql - 在 SQL 中计算总计

> ID：16218602
> 
> 赞同：0
> 
> 时间：2013-04-25T15:17:57.873
> 
> 标签：sql

我有两个表，表 a 和表 b。

表a的设置如下......

用户

```
Id  ...  InspectStat    PurchaseStat    SoldStat    POSStat
------------------------------------------------------------
 1        
 2
 3 
```

特性

```
UserId  ...  Stage  
---------------------------------------------------    
    1        Inspect 
    3        Purchase
    1        Sold
    2        POS 
```

我正在尝试编写一个作业，它将每小时计算每个用户在每个阶段的总属性的百分比。所以例如，最终结果应该是这样的（假设只有这 4 个属性）

```
Id  ...  InspectStat    PurchaseStat    SoldStat    POSStat
------------------------------------------------------------
 1           .5               0             .5         0
 2            0               0              0         1.0
 3            0               1.0            0         0 
```

我努力了

```
ALTER PROCEDURE [dbo].[StatCounter]

AS
DECLARE @PropertyCount as float 

BEGIN

set @PropertyCount = (select count(AcquisitionAssociateId) from [dbo].[Properties],     [dbo].[Users]
WHERE
    [dbo].[Users].Id = [dbo].[Properties].AcquisitionAssociateId) 
update [dbo].[Users]
set [dbo].[Users].PurchaseStat = ((select count (AcquisitionAssociateId) from [dbo].[Properties]
WHERE 
    [dbo].[Users].Id = [dbo].[Properties].AcquisitionAssociateId 
    and 
    [dbo].[Properties].Stage = 'Purchase') / @PropertyCount)

...Repeat for 3 other stages 
```

这个方法正确地计算了每个阶段的属性数量，但是在执行它之后，我意识到它实际上在做的是计算用户分配给它们的属性的数量，而不是得到多少属性的不同计数个人用户实际上有。我正在学习 SQL，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:30:29.173

这是支点的一种特殊情况。下面使用 进行计算`avg()`。它为统计数据分配“1”的值，并且平均值除以行上的总数：

```
select userid,
       avg(case when Stage = 'Inspect' then 1.0 else 0.0 end) as InspectStat,
       avg(case when Stage = 'Purchase' then 1.0 else 0.0 end) as PurchaseStat,
       avg(case when Stage = 'Sold' then 1.0 else 0.0 end) as SoldStat,
       avg(case when Stage = 'POS' then 1.0 else 0.0 end) as POSStat
from properties p
group by userid 
```

# cocoa-touch - 调试时进入自定义框架

> ID：16218603
> 
> 赞同：1
> 
> 时间：2013-04-25T15:18:00.397
> 
> 标签：cocoa-touch, cocoa, debugging

我创建了一个自定义 iOS 框架，它像任何内置框架一样添加到项目中。

调试时是否可以进入框架代码？我知道如果我们将它添加为依赖项目，我们可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:36:06.483

如果要调试，应将其添加为项目。以下讨论可能会对您有所帮助。

[http://www.cocoabuilder.com/archive/xcode/270461-source-debugging-of-3rd-party-framework.html](http://www.cocoabuilder.com/archive/xcode/270461-source-debugging-of-3rd-party-framework.html)

# c# - 在 C# 中跨多个函数使用多个变量

> ID：16218605
> 
> 赞同：0
> 
> 时间：2013-04-25T15:18:06.363
> 
> 标签：c#, variables

我正在尝试编写一个与 I/O 卡接口的程序。硬件提供的文档是用 C# 编写的，我以前从未使用过 C#。所以，如果这个问题看起来非常基本或基本，请原谅我。

使用制造商的函数，每个 I/O 引脚至少需要 3 个变量，并且有 55 个引脚。这意味着很多定义的变量。在编写代码时，我发现它非常难看。我在这里和那里重复使用可以很容易地成为功能的片段。但是让它们成为一个函数，我失去了访问大量变量的能力。有一些简单的方法可以做到这一点吗？

这是我目前正在使用的缩短版本。丢失的部分看起来是一样的。我正在使用VS2012。提前致谢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Threading;

/* Tool Changer Controller Program
 * In theory, this program will run the tool changer through a full cycle.
 * This includes:     removing the current tool, 
 *                    placing the current tool in its appropriate location on the carousel,
 *                    moving the carousel to the correct location of the new tool,
 *                    placing the new tool in the spindle so it is ready for use.
 */
namespace Tool_Changer
{

class Program
{
    static void Main(string[] args)
    {
        // Create PoKeys55 device object
        PoKeysDevice_DLL.PoKeysDevice device = new PoKeysDevice_DLL.PoKeysDevice();

        // Define all pins and correlate to correct pin
        // Pin: Pin #, Status: pass/fail returned, State: On/Off status
        // Swivel
        byte SwivelCCWA_Pin = 0; //Set*
        bool SwivelCCWA_Status = false;
        bool SwivelCCWA_State = false;

        byte SwivelCWA_Pin = 2; //Set*
        bool SwivelCWA_Status = false;
        bool SwivelCWA_State = false;

        // Telescope
        byte TeleExtA_Pin = 4; //Set*
        bool TeleExtA_Status = false;
        bool TeleExtA_State = false;

        byte TeleRetA_Pin = 6; //Set*
        bool TeleRetA_Status = false;
        bool TeleRetA_State = false;
        // Grabber
        byte GrabberOpen_Pin = 12; //Set*
        bool GrabberOpen_Status = false;
        bool GrabberOpen_State = false;

        byte ToolPresent_Pin = 13; //Get
        bool ToolPresent_Status = false;
        bool ToolPresent_State = false;

        // Begin Tool Change procedure.
        SwivelCWA_State = false;
        SwivelCCWA_State = true;
        SwivelCWA_Status = device.SetOutput(SwivelCWA_Pin, SwivelCWA_State); // Turn off CW
        SwivelCCWA_Status = device.SetOutput(SwivelCCWA_Pin, SwivelCCWA_State); // Turn on CCW
        Thread.Sleep(1000);

        GrabberOpen_State = true;
        GrabberOpen_Status = device.SetOutput(GrabberOpen_Pin, GrabberOpen_State); // Open Grabber

        TeleRetA_State = false;
        TeleExtA_State = true;
        TeleRetA_Status = device.SetOutput(TeleRetA_Pin, TeleRetA_State); // Turn off retract
        TeleExtA_Status = device.SetOutput(TeleExtA_Pin, TeleExtA_State); // Turn on extend
        Thread.Sleep(1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:30:58.500

如果您使用结构来保存公共变量，代码将变得更漂亮和更紧凑。例如：

```
public struct Item
{
    public Item(byte pin, bool status, bool state)
    {
        Pin = pin;
        Status = status;
        State = state;
    }

    public byte Pin;
    public bool Status;
    public bool State;
} 
```

然后不是像这样单独设置每个变量：

```
byte SwivelCCWA_Pin = 0; //Set*
bool SwivelCCWA_Status = false;
bool SwivelCCWA_State = false; 
```

您将只能使用这样的一行代码：

```
Item swivelCCWA = new Item(0, false, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:38:12.833

为每个引脚创建一个包含所有输出设置的字典：

```
 Dictionary<int, bool> pinStates = new Dictionary<int, bool> 
 {
     {0, false},
     {2, true},
     {12, false},
     {13, false}
 }; 
```

然后你可以创建一个函数来设置所有的输出引脚并在另一个字典中检索结果：

```
Dictionary<int, bool> pinResults = new Dictionary<int, bool>();
foreach(KeyValuePair<int, bool> pinState in pinStates)
{
    pinResults[pinState.Key] = device.SetOutput(pinState.Key, pinState.Value); 
} 
```

此时，所有输出引脚都已设置，并且您的第二个字典已填充结果。您可以通过以下方式检索结果：

```
bool resultOfPin12 = pinResults[12]; 
```

# oracle - 具有两个标识符的 Oracle 条件索引

> ID：16218609
> 
> 赞同：4
> 
> 时间：2013-04-25T15:18:13.037
> 
> 标签：oracle, indexing

是否可以在两列上创建条件索引？

```
CREATE UNIQUE INDEX idx_dup_wfc
    ON WF_WORKFLOW_CLASS (CASE WHEN is_active = 1
      THEN (NAME, DEPT_OWNER)
         ELSE NULL
      END) 
```

但是返回`ORA-00906: missing left parenthesis`以下作品

```
CREATE UNIQUE INDEX idx_dup_wfc
    ON WF_WORKFLOW_CLASS (CASE WHEN is_active = 1
      THEN NAME
         ELSE NULL
      END) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:21:56.343

是的，但是您必须为每列执行一个 CASE：

```
CREATE UNIQUE INDEX idx_dup_wfc
    ON WF_WORKFLOW_CLASS 
     (CASE WHEN is_active = 1 THEN NAME END
     ,CASE WHEN is_active = 1 THEN DEPT_OWNER END
     ) 
```

（代码中的 ELSE 是多余的）。

# c# - RegEx.Match 没有返回预期的字符串

> ID：16218610
> 
> 赞同：2
> 
> 时间：2013-04-25T15:18:14.863
> 
> 标签：c#, regex

我是 C# 中正则表达式的新手。我阅读了我能得到的任何东西，并试图想出一个正则表达式来从我的日志中提取日期时间值。这就是我正在使用的：

```
value = Regex.Match("abc 2012‎-‎12‎-‎23 01:13:51.253", 
                   @"\b20[0-9][0-9]‎-[0-1][0-9]‎-‎[0-3][0-9] [0-2][0-9]:[0-5][0-9]:[0-5][0-9].\d+")
             .Value; 
```

但每次我得到“”的价值。有人可以帮我看看我做错了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:32:05.053

问题*非常*微妙。您的搜索字符串中有一个隐藏的控制字符。就在每个连字符前后都有一个`0x200e`或**从左到右的**字符。我通过复制您的代码并检查字节确认了这一点。您也可以通过将光标放在 之前`-`并按退格键来测试这一点。

您的模式字符串也包含这些隐藏的控制字符，在第一个连字符之前，在第二个连字符之前和之后。

一旦我从搜索字符串和模式字符串中删除了这个字符的所有实例，模式就会正确匹配。

你最好的办法是在你尝试做任何其他事情之前从你的输入中去除这些字符。如果您按照其他人的建议进行 RegEx 或传统的 DateTime 解析，这适用。这是从字符串中删除这些字符的最简单方法：

```
input = input.Replace(char.ConvertFromUtf32(0x202e).ToString(), string.Empty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:39:22.787

以下是使用 匹配字符串的方法`DateTime.ParseExact`：

```
string dateString = "2012-12-23 01:13:51.253";
string format = "yyyy-MM-dd hh:mm:ss.fff";

DateTime dateTime = DateTime.ParseExact(dateString, format, CultureInfo.InvariantCulture); 
```

我不确定字符串的“abc”部分是什么，但如果这是一个月的三个字母缩写，您可以将格式字符串更改为：

```
string format = "MMM yyyy-MM-dd hh:mm:ss.fff"; 
```

以下是日期时间解析的自定义格式代码的完整列表：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:22:47.890

如果您只是想学习正则表达式，那么您可以使用：

```
@"(^((((0[1-9])|([1-2][0-9])|(3[0-1]))|([1-9]))\x2F(((0[1-9])|(1[0-2]))|([1-9]))\x2F(([0-9]{2})|(((19)|([2]([0]{1})))([0-9]{2}))))$)" 
```

如果它是应用程序的有效用例，那么您应该将其**解析**为一个`DateTime`对象，使用类似`DateTime.ParseExact`.

# c - fputs 与 fprintf 和 double

> ID：16218614
> 
> 赞同：1
> 
> 时间：2013-04-25T15:18:21.663
> 
> 标签：c, file, printf, fputs

我需要将双精度值放入文件中。因此，对于我必须输出的所有其他字符串，我使用 fputs，因为我认为 fputs 比 fprintf 更快。

但是如果我想输出双精度值，我不能用 fputs 做到这一点，所以我尝试了 fprintf。这是非常缓慢的。如果我更换 fprintf 并将 fputs("TEST",file); 放在那里，我需要更多时间。

我怎样才能像字符串一样快地输出双倍。需要我先将其转换为字符串吗？

我发现了一些转换。但是如果我使用它们，我会像使用 fprintf 一样慢。

那么我怎样才能将双精度放到一个文件中，就像我把一个字符串放到文件中一样快呢？

```
 fputs("TEST",fileout); //FAST
  fprintf(fileout, "%f",p); //SLOW 
```

编辑：

fprintf 双倍的时间：

```
END.PROCESSING.DATA: 2013-04-26 08:10:33.000
END.CALC.IN.FILE: 2013-04-26 08:11:13.000 
```

fputs 字符串的时间：

```
END.PROCESSING.DATA: 2013-04-26 08:14:10.000
END.CALC.IN.FILE: 2013-04-26 08:14:37.000 
```

当时的代码：

```
now = time (0);
strftime (buff, 100, "%Y-%m-%d %H:%M:%S.000", localtime (&now));
printf ("END.PROCESSING.DATA: %s\n", buff);

//output file
FILE *fileout;
fileout = fopen("out.txt","w");
double p;
for(i=0; i<17000;i++){
  for(j=0; j<i;j++){
    for(z=0;z<400;z++){
      //DO SOME WORK
    }
    p = 1.0;
    fputs(allsubsts[i],fileout);
    fputs(";",fileout);
    fputs(allsubsts[j],fileout);
    fputs(";",fileout);
    //fprintf(fileout, "%.21g", p);
    fputs("TEST",fileout);
    fputs(";\n",fileout);
  }
}
fclose(fileout);

now = time(0);
strftime(buff,100,"%Y-%m-%d %H:%M:%S.000", localtime(&now));
printf("END.CALC.IN.FILE: %s\n",buff); 
```

时间之间的变化只是我把双而不是 TEST 字符串放在文件中的变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:22:53.347

将浮点数转换为十进制表示基本上是一个缓慢的操作。您可以尝试使用说明`%a`符而不是将`%f`其存储为十六进制浮点数；这应该快得多，并且可以安全地保留原始值而不是差的近似值。如果你需要小数，你应该使用`%.21g`or 类似的，而不是`%f`，因为后者会失去大部分的精度。

如果这些对您来说都不够快，那么您可能需要直接保存值的二进制表示。

# javascript - grails remotefunction：无法访问参数

> ID：16218619
> 
> 赞同：0
> 
> 时间：2013-04-25T15:18:34.327
> 
> 标签：javascript, ajax, grails, dojo

我的 GSP 文件中的 javaScript 函数中有一个 remoteFunction 调用：

```
function fnCreateEntitiesPerForceChart() {
      var interval = $("#entitiesPerForceTimeIntervalSelect").val();
      interval = escape(interval);
      var url = '${createLink(controller: 'federation', action: 'createEntitiesPerForceChart')}?interval='+interval;
      $("#entitiesPerForceChart").attr("src", url);
alert("interval is: " + interval);
      ${remoteFunction(controller: 'federation', 
        action: 'getEntitiesPerForceTable', 
        params: '\'interval\''+':'+interval, 
        onSuccess: 'fnUpdateEntitiesPerForceTable(data,textStatus)')}; 
    } 
```

当我检查页面源时，远程函数会创建以下代码：

```
try{DojoGrailsSpinner.show();}catch(e){} dojo.xhr('Get',{content:{'interval':null}, preventCache:true, url:'/FederationReporter/federation/getEntitiesPerForceTable', load:function(response){  fnUpdateEntitiesPerForceTable(data,textStatus); }, handle:function(response,ioargs){try{DojoGrailsSpinner.hide();}catch(e){} }, error:function(error,ioargs){try{DojoGrailsSpinner.hide();}catch(e){}  } });; 
```

为什么我的变量被替换为“null”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:16:18.510

尝试这个 ：

```
function fnCreateEntitiesPerForceChart() {
  var interval = dojo.byId("entitiesPerForceTimeIntervalSelect").get("value");
  // [...] rest of your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:44:55.233

`params`在`remoteFunction`通话中试试这个

`params: '\'interval\': + interval'`

# php - 使用 php 从 JSON 解析值

> ID：16218621
> 
> 赞同：0
> 
> 时间：2013-04-25T15:18:37.863
> 
> 标签：php, json

我是 PHP 和 JSON 的新手，所以希望有人能帮助我。

我有一个 PHP，第 3 方对其执行 POST 以提供 JSON 数据。发送的数据示例如下：

```
> {   "created": 1326853478,   "livemode": false,   "id":
> "evt_00000000000000",   "type": "charge.succeeded",   "object":
> "event",   "data": {
>     "object": {
>       "id": "ch_00000000000000",
>       "object": "charge",
>       "created": 1366838716,
>       "livemode": false,
>       "paid": true,
>       "amount": 1000,
>       "currency": "gbp",
>       "refunded": false,
>       "fee": 59,
>       "fee_details": [
>         {
>           "amount": 59,
>           "currency": "usd",
>           "type": "stripe_fee",
>           "description": "Stripe processing fees",
>           "application": null,
>           "amount_refunded": 0
>         }
>       ],
>       "card": {
>         "object": "card",
>         "last4": "4242",
>         "type": "Visa",
>         "exp_month": 2,
>         "exp_year": 2016,
>         "fingerprint": "cniJDyeew54ashW6Iyr",
>         "country": "US",
>         "name": "wibble3",
>         "address_line1": null,
>         "address_line2": null,
>         "address_city": null,
>         "address_state": null,
>         "address_zip": null,
>         "address_country": null,
>         "cvc_check": "pass",
>         "address_line1_check": null,
>         "address_zip_check": null
>       },
>       "captured": true,
>       "failure_message": null,
>       "amount_refunded": 0,
>       "customer": null,
>       "invoice": null,
>       "description": null,
>       "dispute": null
>     }   } } 
```

我希望能够提取某些项目然后根据这些值进行处理。

使用这段代码，我可以很容易地提取“类型”：

```
$body = @file_get_contents('php://input');
$event_json = json_decode($body);
print $event_json->{'type'}; 
```

但是我无法提取“费用”，例如，这似乎是我成功从中提取价值的一个级别，或者“描述”又是另一个级别。

我希望能够从这个 JSON 字符串中只提取某些项目（例如，类型、费用、描述、Last4），但我完全迷失了。我很欣赏这可能是一项相当基本的任务，但我无处可去。

任何帮助，感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:26:24.907

您可以通过以下方式快速实现此目的：

```
$body = @file_get_contents('php://input');
$event_json = json_decode($body, true);
print $event_json['data']['object']['fee']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:23:21.943

首先，我建议`true`作为第二个参数传递给`json_decode`. 这会产生一个关联数组而不是一个对象，这使它更容易使用。

然后，您可以这样做：

```
$fee = $event_json['data']['object']['fee']; 
```

您可以根据需要多次链接这些方括号，以深入研究数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:26:42.263

你有多层次的对象，所以使用：

```
echo($event_json->data->object->fee); 
```

基本上，您正在回`fee`显，它是对象 name 的成员，而 name`object`又是对象的属性， named`data`又是`$event_json`对象的成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:23:53.347

当您执行 json_decode 时，您将获得此数据的数组。因此，您可以像这样访问数据：

```
$event_json['data']['object']['fee'] 
```

祝你好运

# linux - .comment 部分有两行

> ID：16218624
> 
> 赞同：6
> 
> 时间：2013-04-25T15:18:47.037
> 
> 标签：linux, elf

如 readelf 所示，我在注释部分有一个包含两行的可执行文件：

```
readelf -p .comment ac_test

String dump of section '.comment':
  [     0]  GCC: (SUSE Linux) 4.3.4 [gcc-4_3-branch revision 152973]
  [    39]  GCC: (GNU) 4.6.0 
```

4.3.4 编译器是安装在 Suse Linux 中的编译器，但 4.6 是从源代码编译的。我已将 PATH 修复为指向 4.6，以便编译可执行文件。

我怀疑是否以任何方式使用了 4.3.4 工具链。

我的问题是：为什么我在 .comment 部分有两个编译器？这有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T15:22:05.367

很难用那一点点信息说，但是来自 4.3.4 编译器的注释很可能来自链接到您的二进制文件的对象或库（即您没有使用 4.6 编译器自己编译它）。

# c++ - 使用 SIMD 命令的程序中的分段错误

> ID：16218630
> 
> 赞同：0
> 
> 时间：2013-04-25T15:19:00.907
> 
> 标签：c++, simd

这里有什么问题？当我运行程序时，它说，`Segmentation Fault (Core Dumped)`. 我使用了一些 SIMD 命令。

```
float function ( Point p1, Point p2, int dim )
{
      int k;
      float result=0.0;
      float *p3;
      p3 = (float*) malloc (16);
      k=dim%4;

      __m128 *v_p1 = (__m128*)p1.coord;
      __m128 *v_p2 = (__m128*)p2.coord;
      __m128 *v_p3 = (__m128*)p3;

      for (int i=0; i<dim/4; i++){
             *v_p3= _mm_sub_ps(*v_p1,*v_p2);
      }
      for(int i=0; i<dim; i++){
             result+=p3[i];
      }
      return(result);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:44:49.407

正如评论所说，在使用 SIMD 内部函数时，内存中的数据必须对齐（在这种特殊情况下，16 字节对齐），以防您在 UNIX 系统中尝试使用以下方式分配数据`posix_memalign()`：

[http://pubs.opengroup.org/onlinepubs/009695399/functions/posix_memalign.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/posix_memalign.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:45:02.610

任何`SIMD _ps`指令都需要`16`字节对齐的数据。据我所知，至少没有正确对齐，所以如果你不使用正确对齐的数据，你`p3`肯定会得到一个。`seg fault`我自己无法运行此代码，但如果您`__m128`按值分配给变量，您应该没问题，因为它们应该正确对齐：

```
 __m128 v_p1 = _mm_set_ps( ... ); // not sure of the argument 
  __m128 v_p2 = _mm_set_ps( ... ); // not sure of the argument 
  __m128 v_p3 = _mm_set_ps1(p3) ; 
```

# javascript - jQuery从一个id获取总位置

> ID：16218632
> 
> 赞同：0
> 
> 时间：2013-04-25T15:19:03.817
> 
> 标签：javascript, jquery, css, scroll

我想在 Ajax 重新加载容器内的内容后将焦点位置设置在变量 #id 上。容器本身就`overflow:auto;`在里面，所以如果内容太大，我会看到一个滚动条。但是在插入新内容后，我无法将焦点设置在我要设置的#id 上。

我首先尝试将焦点设置在 ID 上：

```
<script type="text/javascript">
function SetFocus(ulID) {
  var HeightUL = $("#"+ulID).offset();
  $("#"+ulID).focus();
}
</script> 
```

后来我试图得到这个 ID 的总高度，所以我可以`offset()`在上面加上`$("#"+ulID).offset().top;`or `$("#"+ulID).position().top;`。

```
function SetFocus(ulID) {
  var HeightUL = $("#"+ulID).offset().top;
  $("#"+ulID).stop().animate({ scrollTop: HeightUL }, 'fast');
} 
```

但这也不起作用。`position()`我得到 0 作为回报，它只`offset()`返回对象相对于其父对象的高度。而不是对象在其容器内的总高度。

的HTML：

```
<div class="info-container edit" id="info-container-edit">
  <span class="cat">Info 1</span>
  <ul id="Info1" class="cat-list music">
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
  </ul>
  <span class="cat cat">Info 2</span>
  <ul id="Info2" class="cat-list music">
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
  </ul>
  <span class="cat cat">Info 3</span>
  <ul id="Info3" class="cat-list music">
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
  </ul>
  <span class="cat cat">Info 4</span>
  <ul id="Info4" class="cat-list music">
    <li>...</li>
    <li>...</li>
    <li>...</li>
    <li>...</li>
  </ul>
</div> 
```

Ajax 代码刷新容器`#info-container-edit`。我的问题是例如我想专注`#Info3`于`SetFocus('Info3');`. 似乎它返回的是容器的高度，`#Info2`而不是容器的总`#info-container-edit`​​高度`#Info3`。

谁能指出如何解决这个问题？如果我可以在其容器中获得#id 的位置高度，我应该可以解决问题。或者如何将显示焦点设置在#id 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:59:07.890

试试这个

```
$(document).ready(function(){
    $(window).scrollTop($('#Info2').offset().top);
}); 
```

看到它[在 jsfiddle工作](http://jsfiddle.net/Am4Rn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:02:02.433

你可以使用[`.scrollIntoView()`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)：

```
document.getElementById(ulID).scrollIntoView(false); 
```

# java - 为 json 响应创建一个类

> ID：16218644
> 
> 赞同：0
> 
> 时间：2013-04-25T15:19:28.237
> 
> 标签：java, json

我正在尝试以下从网上下载的代码。这是关于阅读谷歌搜索页面的总搜索结果。

```
import com.google.gson.Gson;
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;
import java.net.URLEncoder;

    public class Test {

        public static void main(String[] args) throws Exception {
            String google = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=";
            String search = "my";
            String charset = "UTF-8";

            URL url = new URL(google + URLEncoder.encode(search, charset));
            System.out.println(google + URLEncoder.encode(search, charset));
            Reader reader = new InputStreamReader(url.openStream(), charset);
            GoogleResults results = new Gson().fromJson(reader, GoogleResults.class);

            System.out.println(results.getResponseData().getResults().size());

        }
    } 
```

搜索结果是

```
"queries": {
  "nextPage": [
   {
    "title": "Google Custom Search - flowers",
    "totalResults": 10300000,
    "searchTerms": "flowers",
    "count": 10,
    "startIndex": 11,
    "inputEncoding": "utf8",
    "outputEncoding": "utf8",
    "cx": "013036536707430787589:_pqjad5hr1a"
   }
  ], 
```

我想为上述响应创建类“GoogleResults”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:27:35.630

问题是您使用非限定名称引用 GoogleResults 类而不导入它。

使用完全限定名称或导入它。我会发布一个示例，但我不确定课程在哪里。

编辑：通过搜索您发布的代码，我找到了一个[完整的示例](http://www.programcreek.com/2012/05/call-google-search-api-in-java-program/)。事实证明，这`GoogleResults`不是一个标准库类，它是一个你需要自己定义的类。

```
class GoogleResults{

    private ResponseData responseData;
    public ResponseData getResponseData() { return responseData; }
    public void setResponseData(ResponseData responseData) { this.responseData = responseData; }
    public String toString() { return "ResponseData[" + responseData + "]"; }

    static class ResponseData {
        private List<Result> results;
        public List<Result> getResults() { return results; }
        public void setResults(List<Result> results) { this.results = results; }
        public String toString() { return "Results[" + results + "]"; }
    }

    static class Result {
        private String url;
        private String title;
        public String getUrl() { return url; }
        public String getTitle() { return title; }
        public void setUrl(String url) { this.url = url; }
        public void setTitle(String title) { this.title = title; }
        public String toString() { return "Result[url:" + url +",title:" + title + "]"; }
    }
} 
```

# php - 使用 div 打印表格以创建删除部分

> ID：16218646
> 
> 赞同：0
> 
> 时间：2013-04-25T15:19:31.923
> 
> 标签：php, html-table

我在下面发布的代码遍历结果集并打印元素（数据库中图像的路径），以便图像按顺序显示。每行只有 3 张图像。我希望能够拥有相同的概念（即每行 3 个图像或单元格），但我希望在其下方有另一个 div 以包含删除照片一词。

```
$n = 3;
echo "<table style='margin-right: 100px;'>";
echo "<tr>";
for($i=1; $i<=count($gallery);$i++){
    $temp = array();
    $temp = $gallery[$i-1];
    echo "<td><div id='gallery_pic'><img id='single_pic' src='". $temp->path . "' /></div></td>";
    if($i % $n ==0){
        echo "</tr><tr>";
    }
}
echo '</tr>';
echo '</table>';
echo "</table>"; 
```

这个想法是个人资料的所有者应该能够通过单击它来删除照片。我将处理这个问题，我只是不确定如何通过使用删除字每行添加另一行来处理以相同顺序打印的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:24:17.883

简单的。`div`之后添加一个新的`div#gallery_pic`并将其宽度设置为 100%，这将迫使它位于图像下方...

```
echo "<table style='margin-right: 100px;'>";
echo "<tr>";
for($i=1; $i<=count($gallery);$i++){
    $temp = array();
    $temp = $gallery[$i-1];
    echo "<td><div id='gallery_pic'><img id='single_pic' src='". $temp->path . "' /></div><div class='delete_wrap'><a href='?delete_id=" . {image_id} . " style='width:100%'>Delete</a></div></td>";
    if($i % $n ==0){
        echo "</tr><tr>";
    }
}
echo '</tr>';
echo '</table>';
echo "</table>"; 
```

# requirejs - 使用 requireJS 实例化对象

> ID：16218649
> 
> 赞同：0
> 
> 时间：2013-04-25T15:19:34.547
> 
> 标签：requirejs

我有一个像这样定义的模型对象

```
blog.js

define({title: '', url: '', summary: ''}); 
```

我正在使用该`blog`模型来保存来自服务的数据，并且我需要填充一个`blogs`. 如何`blog`在另一个模块的循环中实例化一个新的？

我试过`blog`作为一个需要对象传入，但它保持它在循环内的引用，一遍又一遍地留下一个相同对象的数组。

```
othermodule.js

define(['blog'], function(blog) {
//... more code
  $.each(data, function(index, b) {
    var tmpBlog = blog;
    //...
    list.push(tmpBlog);
  });
}); 
```

我也尝试过使用`var blog = require('blog');`产生相同的结果。

那么如何使用 requirejs 实例化博客对象呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:44:07.477

好的，我想通了。我错误地定义了`blog`模型。`function blog(){...}`我需要像这样返回一个：

```
define(function() {
  return function blog() {
    var self = this;
    this.title = '';
    //...
  };
}); 
```

另一个模块像这样使用它：

```
define(['models/blog'], function (model) {
  var tmpBlog = new model();
  tmpBlog.title = 'some title';
} 
```

# jakarta-ee - 如何访问 weblogic 10.3.6 中定义的 JNDI 数据源

> ID：16218663
> 
> 赞同：8
> 
> 时间：2013-04-25T15:20:18.883
> 
> 标签：jakarta-ee, weblogic, datasource, jndi

我已经使用我的 weblogic 控制台创建了一个 JNDI 数据源，但我无法从我的 web 应用程序访问该对象。以下是详细信息

在 weblogic 10.3.6 中，我将数据源的 JNDI 名称指定为：`jdbc/mydb`

为了从我的 Web 应用程序获取数据库连接，我在我的 Web 应用程序中编写了以下代码：

```
Context initContext = new InitialContext();
DataSource ds = (DataSource)initContext.lookup("java:/comp/env/jdbc/mydb");
jndiConnection = ds.getConnection(); 
```

早些时候我使用 Tomcat 作为服务器，当我在文件中配置资源详细信息时，我能够获得数据库连接`tomcat/conf/server.xml`，但是当我开始使用 weblogic 服务器时，我收到以下错误：

```
Cannot establish DB connection to JNDI:java:/comp/env/jdbc/mydb While trying to look up /comp/env/jdbc/mydb in /app/webapp/sample.war/1811641702\. caused by: javax.naming.NameNotFoundException: While trying to look up /comp/env/jdbc/mydb in /app/webapp/sample.war/1811641702.; remaining name '/comp/env/jdbc/mydb' 
```

我已经尝试过此链接中提到的选项：[如何在 WebLogic 上查找 JNDI 资源？](https://stackoverflow.com/questions/6500632/how-to-lookup-jndi-resources-on-weblogic)但我仍然面临问题。

请让我知道我在哪里做错了，访问JNDI对象的过程是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T19:38:51.270

参考帖子后：[Tomcat vs Weblogic JNDI Lookup](https://stackoverflow.com/questions/47676/tomcat-vs-weblogic-jndi-lookup?rq=1)我已经修改了我的代码。

在我的 web 应用程序的 java 程序中使用以下代码解决了我的问题：

```
Context initContext = new InitialContext();
DataSource ds = (DataSource)initContext.lookup("jdbc/mydb");
jndiConnection = ds.getConnection(); 
```

同样在 weblogic 控制台中，我已将我的 JNDI 对象添加到部署了我的 Web 应用程序的管理服务器（在服务器选项下）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T06:42:02.350

在 weblogic 12c 中尝试了您的答案，但没有奏效..！

当我尝试仅使用 dataSource 的名称`myDB`（删除`jdbc/`）时，它工作正常。

```
Context initContext = new InitialContext();
DataSource ds = (DataSource)initContext.lookup("myDB");
jndiConnection = ds.getConnection(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-12T11:26:02.743

Weblogic 12c 的相同解决方案是

将以下依赖项添加到您的 pom.xml.. 创建一个具有当前中间件主页值 ${oracleMiddlewareHome} 的变量，然后...

```
<dependency>
        <groupId>weblogic</groupId>
        <artifactId>webservices</artifactId>
        <version>12.1.3</version>
        <scope>system</scope>
        <systemPath>
            ${oracleMiddlewareHome}/wlserver/server/lib/weblogic.jar
        </systemPath>
    </dependency> 
```

现在使用下面的代码：

```
 Hashtable<String, String> h = new Hashtable<String, String>(7);
h.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
h.put(Context.PROVIDER_URL, "t3://localhost:7001");//add ur url
h.put(Context.SECURITY_PRINCIPAL, "weblogic");//add username
h.put(Context.SECURITY_CREDENTIALS, "welcome1");//add password

    Bundle bundle;
    try {
        InitialContext ctx = new InitialContext(h);
       DataSource dataSource = ((DataSource) ctx.lookup("jdbc/ContextBindingDS"));
        bundle = (Bundle) ctx.lookup(BUNDLE_JNDI_NAME);

    } catch (NamingException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }catch (Exception e){
        e.printStackTrace();
    } 
```

# c++ - SIMD 和压缩和标量双精度之间的区别

> ID：16218665
> 
> 赞同：22
> 
> 时间：2013-04-25T15:20:21.993
> 
> 标签：c++, x86, sse, simd, intrinsics

在实现 SIMD 支持时，我正在阅读英特尔的内在指南。我有一些困惑，我的问题如下。

1.  `__m128 _mm_cmpeq_ps (__m128 a, __m128 b)`文档说它用于比较打包的单精度浮点数。“打包”是什么意思？我是否需要以某种方式打包我的浮点值才能使用它们？

2.  对于双精度，有一些内在函数`_mm_cmpeq_sd`，比如比较“较低”的双精度浮点元素。低位和高位双精度元素是什么意思？我可以使用它们来比较 C++`double`类型元素的向量吗？或者我需要在比较它们之前以某种方式处理它们吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-25T15:26:20.817

在 SSE 中，128 位寄存器可以表示为 4 个 32 位元素或 2 个 64 位元素。

SSE 定义了两种类型的操作；标量和打包。标量运算仅对最不重要的数据元素（位 0~31 或 0~63）进行运算，打包运算并行计算所有元素。

[`_mm_cmpeq_sd`](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cmpeq_sd&expand=830)设计用于处理双精度（64 位）浮点元素，并且只会比较两个操作数（标量）的最低有效数据元素（前 64 位）。

[`_mm_cmpeq_pd`](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cmpeq_pd&expand=830,821)被设计用于双精度（64 位）浮点元素，但将并行（打包）比较每两组 64 位。

[`_mm_cmpeq_ss`](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cmpeq_ss&expand=830,827)设计用于处理单精度（32 位）浮点元素，并且只会比较两个操作数（标量）的最低有效数据元素（前 32 位）。

[`_mm_cmpeq_ps`](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cmpeq_ps&expand=830,827)设计用于处理单精度（32 位）浮点元素，并将并行（打包）比较每组 32 位。

如果您使用 32 位浮点数，则可以将浮点数打包成四组以利用 128 位空间。这样，`_mm_cmpeq_ps`就可以并行进行 4 个比较。

如果您使用的是 64 位双精度，则可以成对打包双精度以利用 128 位空间。这样，`_mm_cmpeq_pd`就可以并行进行 2 个比较。

如果您一次只想进行一次比较，**可以使用`_mm_cmpeq_sd`比较两个 64 位 double 或`_mm_cmpeq_ss`比较两个 32 位 float**。

请注意，`_mm_cmpeq_sd`and`_mm_cmpeq_pd`是 SSE2，而`_mm_cmpeq_ss`and`_mm_cmpeq_ps`是 SSE。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-25T15:26:55.563

在这种情况下，“打包”的意思是“将几个相同类型的东西放在一个块中”——所以“打包的单精度浮点数”是指存储为 128 位值的 4 * 32 位浮点数。

您需要使用各种`PACK*`指令将每个值“打包”到寄存器中，或者将数据已经“打包”在内存中，例如（多个）4 个浮点值的数组[适当对齐]。

标量表示寄存器低位中的“一个值” `n`（例如，a`double`是 128 位 SSE 寄存器的低 64 位）。

# ruby-on-rails - 在 Rails 路由中强制使用斜杠

> ID：16218670
> 
> 赞同：11
> 
> 时间：2013-04-25T15:20:43.697
> 
> 标签：ruby-on-rails, relative-path, rails-routing, trailing-slash

使用 {:trailing_slash => true} 在链接中添加尾部斜杠很容易，但这并不能说明用户是否输入了非斜杠 url。有没有办法通过路由器中的重定向来强制使用斜杠？

```
get "/:controller/:id" => redirect{|params| "/#{params[:controller]}/#{params[:id]}/" } 
```

以上导致循环。

为什么？

“./subclass”的相对链接

```
/parent/1 
```

与

```
/parent/1/ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-08T14:59:00.003

在 config/application.rb 文件中，添加

```
config.action_controller.default_url_options = { :trailing_slash => true } 
```

在应用程序类

# php - 链接按钮不再启动到彩盒

> ID：16218673
> 
> 赞同：0
> 
> 时间：2013-04-25T15:20:48.760
> 
> 标签：php, jquery, colorbox

由于不推荐使用的 jQuery，我只需要更新到新版本的颜色框​​。

以前我有一个链接到表单上的提交按钮的颜色框（呈现“感谢您的消息！”）

由于更新了彩盒，这不再有效。

这是与 colorbox 1.3 一起使用的原始代码，而不是在 colorbox 1.4 上

```
 function SendMailForm(){
    var dataString = $("#form1").serialize();
    $.ajax({
      type:"POST",
      url:"sendmail.php",
      data:dataString,
      cache:false,
      success:function(html){
       $("#HiddenBox").show();
       $("#HiddenBox").html(html);
       $.fn.colorbox({'href':'#HiddenBox', 'open':true, 'inline':true, 'width':'600px', 'height':'200px'});
       $(document).bind('cbox_closed', function(){
        $("#HiddenBox").hide();
      });

     }  
   });
  } 
```

点击提交按钮导致`#HiddenBox`显示使用`.show()`

隐藏框代码是非常简单的颜色框代码：

```
<div id="HiddenBox" style='display:none'>
      <span class="colorBox">Thanks for your message</span>
        <p>I'll get back to your query as soon as I can!</p>
    </div 
```

在页面上实际上找不到与此相关的任何 JS 错误，但它不再启动颜色框！

[在这里](http://www.jamesperrett.co.uk/)查看真实网站并尝试填写表格

表格：

```
<form id="form1" class="formular" method="post" action="Javascript:SendMailForm();">
    <fieldset>
      <input  data-validation-placeholder="Name" class="validate[required] text-input" type="text" name="reqplaceholder" id="reqplaceholder" placeholder="Name" data-prompt-position="topRight:-79,15" />
    <br /><br />
      <input  data-validation-placeholder="Email" class="validate[required] text-input" type="text" name="reqplaceholder" id="reqplaceholder" placeholder="Email" data-prompt-position="topRight:-79,15" />
    <br /><br />
      <textarea value="What's on your mind?" data-validation-placeholder="Message" class="validate[required] text-input message" type="text" name="message" id="reqplaceholder" class="message" placeholder="What's on your mind?" data-prompt-position="topRight:-79,15" ></textarea>
    <br /><br />
  <input class="button" type="submit">
    </fieldset>
</form> 
```

发邮件：

```
<?php
  $name = $_POST['name'] ;
  $email = $_POST['email'] ;
  $message = $_POST['message'] ;

  if(mail( "blah@jamesperrett.co.uk", "Message via JamesPerrett.com",
    $message, "From: $email" )):
      echo "<div id='contact_thanks' style='padding:10px; background:#fff;height:200px;'>";
      echo "<span class='colorBox'>Thanks!</span>";
      echo "<p>Thanks for your message, I'll get back to you as soon as I can!</p>";
      echo "</div>";
  endif;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:15:54.923

我不确定我们正在谈论的颜色框是否相同，我使用了这个：

[http://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/)

如我所见，它直接支持ajax（`$('.ajax').colorbox()`），所以我不明白你为什么要自己编写代码，但没关系。

但是，似乎您希望 html 响应颜色框中显示的 ajax，并且在用户关闭颜色框后，它会显示文档中原本隐藏的内容。下面的代码可以做到这一点：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="colorbox.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="jquery.colorbox.js"></script>

        <script language='javascript'>
            function SendMailForm() {
                var dataString=$('#form1').serialize();

                $.ajax({
                    type: 'POST',
                    url: 'sendmail.php',
                    data: dataString,
                    cache: false,
                    success:
                        function (html) {
                            $('#HiddenBox').show();
                            var node=document.createElement('div');
                            node.innerHTML=html;
                            document.body.appendChild(node);
                            id_1.click();
                            document.body.removeChild(node);
                        }
                });
            }

            $(document).ready(
                function () {
                    $('.inline').colorbox({ inline: true, width: '50%' });
                }
                );
        </script>
    </head>

    <body>
        <form id='form1' class='formular' method='post' action='javascript:SendMailForm();'>
            <fieldset>
                <input data-validation-placeholder='Name' class='validate[required] text-input' type='text' name='reqplaceholder' id='reqplaceholder' placeholder='Name' data-prompt-position='topRight:-79,15' />
                <br /><br />
                <input data-validation-placeholder='Email' class='validate[required] text-input' type='text' name='reqplaceholder' id='reqplaceholder' placeholder='Email' data-prompt-position='topRight:-79,15' />
                <br /><br />
                <textarea value="What's on your mind?" data-validation-placeholder='Message' class='validate[required] text-input message' type='text' name='message' id='reqplaceholder' class='message' placeholder="What's on your mind?" data-prompt-position='topRight:-79,15' ></textarea>
                <br /><br />
                <input class='button' type='submit'>
            </fieldset>
        </form> 

        <a id='id_1' class='inline' href="#contact_thanks" style='display: none'></a>

        <div id='HiddenBox' style='display:none'>
            <span class='colorBox'>Thanks for your message</span>
            <p>I'll get back to your query as soon as I can!</p>
        </div>
    </body>
</html> 
```

注意链接到由 响应的同一文档的标记，`a`我为响应的 html 添加了一个节点，并在显示颜色框后删除。`id_1``contact_thanks``sendmail.php`

# javascript - 将对象传递给需要模块时出现Node.js引用错误

> ID：16218675
> 
> 赞同：1
> 
> 时间：2013-04-25T15:21:03.577
> 
> 标签：javascript, node.js

我正在尝试开发 Node.js Web 应用程序，并且正在尝试将一些初始化步骤委托给不同的模块

我的 server.js 文件

```
var express = require('express')
var app = express();  
var appInfo = {
    port:8000,
    appName:'MyApp',
    authExceptions:[],
    addExceptions:function(exceptionString){      
      authExceptions.push(exceptionString);
    }
};
var appConfigFile = '../MyApp/config';
logMsg('Reading file:'+appConfigFile); 
require(appConfigFile)(app,appInfo);
app.listen(appInfo.port); 
```

我的 config.js 文件是

```
module.exports=function(app, appInfo){
   appInfo.addExceptions('/employee/*');
} 
```

当我运行它时，我得到以下异常

```
ReferenceError: authExceptions is not defined
    at Object.applicationInfo.(anonymous function).addExceptions(c:\my
projects\Server\server.js:8:7) 
```

我在想 JavaScript 通过引用传递对象，所以我想知道为什么会出现这个错误。请提前帮助和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:26:43.130

您将`authExceptions`其视为当前范围内~~的（全局）变量~~和可解析（自由）变量，但事实并非如此：它是`appInfo`对象的属性。

试试这个：

```
...
addExceptions: function(exceptionString) {      
  this.authExceptions.push(exceptionString);
} 
```

# php - 从 Real stdClass 对象到 Mock

> ID：16218676
> 
> 赞同：0
> 
> 时间：2013-04-25T15:21:10.260
> 
> 标签：php, mocking, stdclass

我有一个 Soap WebService，它返回具有不同属性的 StdClass 对象。我想做的是创建一个模拟 WebService 返回的 StdClass 的 Mock 对象。我不想做的是手动创建模拟对象。我不想序列化、反序列化对象，因为我可能想在 VCS 中编辑属性值。

所以基本上我需要把这个：

```
stdClass Object
(
    [paramA] => 1
    [paramB] => 2
    [paramC] => 3
    [paramD] => Array
    (
        [0] => stdClass Object
            (
                [paramD1] => 'blabla'
                [paramD2] => 'blabla' 
```

进入这个：

```
$object = new stdClass;
$object -> paramA = 1;
$object -> paramB = 2;
$object -> paramC = 3;
$object -> paramD -> paramD1 = "blabla";
$object -> paramD -> paramD2 = "blabla"; 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:27:04.510

快速构建 stdClass 对象的一种好方法是将数组转换为对象（在[*Type Juggling*](http://php.net/language.types.type-juggling)中概述）：

```
$object = (object) array('prop' => 'value'); 
```

如图所示，键成为属性名称，值成为它们的值：

```
echo $object->prop; # value 
```

这也适用于彼此，例如拥有一组子对象：

```
$object = (object) array(
    'prop'     => 'value',
    'children' => array(
        (object) array('prop' => 'value'),
    ),
); 
```

这会给你一些类似的东西：

```
echo $object->children[0]->prop; # value 
```

看起来这就是你要找的东西。

有关更多示例和变体，另请参阅[将数组转换为对象 PHP 。](https://stackoverflow.com/q/1869091/367456)

# sql-server - 而不是插入子查询返回超过 1 个值

> ID：16218679
> 
> 赞同：0
> 
> 时间：2013-04-25T15:21:17.293
> 
> 标签：sql-server, triggers

下面的触发器有问题。我认为问题在于一次将多行添加到数据库中。

它需要适用于插入的 n* 行。

代码的意思是在插入时检查 ESHID 列与另一个表的 ID 在 4 个字符后开始

因此，如果有匹配项并且 isPersonalised 为 0，那么我需要将状态设置为 3，否则它应该保持与原始 FulfilmentStatus 相同。

```
ALTER TRIGGER [dbo].[setStatus] 
   ON  [dbo].[ESH_OrderLine]
   INSTEAD OF INSERT
AS 
BEGIN
    INSERT INTO ESH_OrderLine(

        OrderID,
        ESHID,
        ESHVersion,
        GBPPrice,
        Currency,
        FulfilmentStatus,
        FulfilmentDate
    )SELECT

        OrderID,
        ESHID,
        ESHVersion,
        GBPPrice,
        Currency,
        (
            SELECT "Status" =
            CASE
                WHEN isPersonalised = 1 THEN '0'    --PERSONALISED CD
                ELSE '3'                            -- NON PERSONALISED CD
            END
            FROM KSAT_CDs
            WHERE ID= SUBSTRING( (  
                                    SELECT ESHID FROM INSERTED
                                    WHERE ESHID like 'PHZB%' 
                                ),5,10)

            UNION
            SELECT "Status" =
                CASE
                WHEN ESHID = 'PNP' THEN '0'     --POSTAGE AND PACKING
            ELSE '4'                            --DOWNLOAD
            END
            FROM INSERTED
            WHERE ESHID NOT LIKE 'PHZB%'
        ) as FulfilmentStatus,
        FulfilmentDate
     FROM
    INSERTED

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:43:22.170

将您的第一部分更改`union`为此有帮助吗？

```
SELECT "Status" =
            CASE
                WHEN k.isPersonalised = 1 THEN '0'    --PERSONALISED CD
                ELSE '3'                            -- NON PERSONALISED CD
            END
            FROM KSAT_CDs k
            inner join inserted i on k.ID = substring(i.ESHID, 5, 10)
            where i.ESHID like 'PHZB%' 
```

# twitter - ios6 Tweet 通过 SLRequest 并编辑源字段

> ID：16218681
> 
> 赞同：0
> 
> 时间：2013-04-25T15:21:20.780
> 
> 标签：twitter, ios6

我正在尝试编辑已记录的推文的“来源”字段：[https ://dev.twitter.com/docs/platform-objects/tweets](https://dev.twitter.com/docs/platform-objects/tweets)

下面的代码成功发布了一条推文，但是当我在 tweetdeck 上拉出这条推文时，它仍然说它是通过 ios 发布的。感觉 NSDictionary 不是编辑这个的地方，但是似乎流程中没有更好的地方，我找不到任何示例/文档来清理它。感谢您提前提供任何帮助。

```
NSDictionary *message = @{@"status": contents,
                          @"source": @"<a href=\"http://www.example.com\" rel=\"nofollow\">App Name</a>"};            
NSURL *requestURL = [NSURL
                                 URLWithString:@"http://api.twitter.com/1/statuses/update.json"];

SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                    requestMethod:SLRequestMethodPOST
                                    URL:requestURL parameters:message];

postRequest.account = twitterAccount;
[postRequest performRequestWithHandler:^(NSData *responseData,
    NSHTTPURLResponse *urlResponse, NSError *error)
    {
                 NSLog(@"Twitter HTTP response: %i", [urlResponse 
                                                      statusCode]);
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T11:23:17.437

您所指的文档解释了返回字段的含义。

你不能自己设置源，没有API。

您可以在[此处](https://dev.twitter.com/docs/api/1.1/post/statuses/update)`POST statuses/update`找到API 。

此外，您发布的代码使用了不久前关闭的 API 版本 1。

现在您必须使用 API 版本 1.1。

# c# - 使用 ajax 动态加载用户控件并具有 jquery 文档就绪功能

> ID：16218684
> 
> 赞同：2
> 
> 时间：2013-04-25T15:21:26.120
> 
> 标签：c#, jquery, ajax, webforms

我有一个将通过加载的用户控件

```
public static string RenderControl(Control control)
{
    var controlWriter = new StringWriter();
    var htmlWriter = new Html32TextWriter(tw);
    control.RenderControl(writer);
    htmlWriter.Close();            
    return controlWriter.ToString();
} 
```

AJAX用来写html

```
$('#testDiv').html(result.d); 
```

这是通过 ajax Post 调用的。它可以很好地加载用户控件，但是由于 javascript 文档加载已经触发，我无法使用 jquery 的 document.Ready。

我的情况是**我需要动态加载用户控件并拥有 jquery document.ready fire**或类似的东西。我宁愿不使用更新面板，但如果这是完成此操作的唯一方法，那么这就是我将使用的方法。

**我的问题的优雅解决方案是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:29:58.860

您可以使用内置的 jQuery ajaxStop 事件在 ajax 调用完成时触发。

[http://api.jquery.com/ajaxStop/](http://api.jquery.com/ajaxStop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:26:59.300

我通过在加载和显示 ajax 内容后触发的自定义事件解决了类似的问题。

加载并显示后触发ajax函数内部的事件：

```
$(document).trigger('ajaxLoadCallback'); 
```

并在您的 document.ready 脚本中捕获它：

```
$(document).on('ajaxLoadCallback', function() {
    // Your ready functions
} 
```

如果您为应该在 document.ready 之后执行的所有内容创建一个函数，那么您可以`readyFunctions()`在 document.ready 和触发自定义事件之后调用此函数（例如）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:30:54.523

```
public partial class Default : Page 
{
  [WebMethod]
  public static string GetDate()
  {
    return DateTime.Now.ToString();
  }
}

$(function(){
$.ajax({
  type: "POST",
  url: "Default.aspx/GetDate",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
});
}); 
```

# security - 使用 CDI（Java Web 应用程序除外）

> ID：16218688
> 
> 赞同：0
> 
> 时间：2013-04-25T15:21:34.390
> 
> 标签：security, dependency-injection, aspectj, cdi, shiro

从 Doc im 试图学习 Context 和 Dependency injection 。 [在教程](http://docs.oracle.com/javaee/6/tutorial/doc/gjbju.html)中，CDI 似乎只能在 Web 应用程序中使用。我可以在 Java 控制台项目中使用 CDI 吗？如何？我添加了 javax.enterprice.deploy 和 cdi-api 之类的库。我正在尝试测试 Apache Shiro 我参考了Balusc 详细教程的这一[部分，但我需要在没有 JSF 和 web Appli 的情况下进行管理](http://balusc.blogspot.com/2013/01/#DeclarativeRestrictionInBeanMethods)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:52:40.450

[http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html_single/#d0e5335](http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html_single/#d0e5335)

是的，它可以在 SE 环境中使用，尽管许多范围在 SE 环境中不起作用，也没有真正意义。

# sql-server - 在 CTE 或子查询中优化

> ID：16218694
> 
> 赞同：2
> 
> 时间：2013-04-25T15:21:44.797
> 
> 标签：sql-server, sql-server-2008-r2, query-optimization, common-table-expression

**设置：**

我正在试验`OPTIMIZE FOR`SQL Server 2008 R2 中的子句。我已将以下内容放在查询的末尾。

```
OPTION (OPTIMIZE FOR (@UserType= 'M', @Date UNKNOWN)) 
```

**问题：**

但是，我收到以下错误。

```
The variable "@UserType" is specified in the OPTIMIZE FOR clause, but is not used in the query. 
```

此变量在查询内的子查询中使用，并且仅在该位置使用。

如果我尝试将 移动`OPTIMIZE FOR`到子查询中，则存储的过程不会编译。同样，我不能将子查询放在 CTE 中并在其中进行优化；那也不编译。

```
Incorrect syntax near the keyword 'OPTION'. 
```

**问题：**

有什么方法可以`OPTIMIZE FOR`在 CTE 或子查询中使用子句？我更喜欢使用 CTE，因为它们通常更干净、更易读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:37:30.650

关键字必须始终放在最`option`外层选择查询的末尾。

例如：

```
declare @var int = 1;

with cte
as (
    select @var as val
)
select * from cte
option (optimize for (@var = 2)) 
```

# scala - Scala中的面向对象

> ID：16218695
> 
> 赞同：6
> 
> 时间：2013-04-25T15:21:47.610
> 
> 标签：scala

从 Martin Odersky 的 Scala 课程中，我有以下练习（这是一个给出答案的视频练习）：

" 提供表示非负整数的抽象类 Nat 的实现

不要在此实现中使用标准数字类。相反，实现一个子对象和一个子类。

一个用于数字零，另一个用于严格的正数。"

这是代码：

```
abstract class Nat {
  def isZero : scala.Boolean
  def predecessor : Nat
  def successor = new Succ(this)
  def + (that : Nat) : Nat
  def - (that : Nat) : Nat
}

object Zero extends Nat {
  def isZero = true
  def predecessor = throw new Error("0.predecessor")
  def + (that: Nat) = that
  def - (that: Nat) = if(that.isZero) this else throw new Error("negative number")
}

class Succ(n : Nat) extends Nat {
  def isZero = false
  def predecessor = n
  def +(that : Nat) = new Succ(n + that)
  def -(that: Nat) = n - that.predecessor
} 
```

在 Scala 工作表中，我有：

```
object NatTests {
  new Successor(Zero).+(new Successor(Zero))  
} 
```

它返回一个新的 Sucessor。我认为我没有完全理解这段代码，因为我应该能够在不扩展代码的情况下添加非零对象？如果是这样，这是如何实现的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T19:08:09.173

您*可以*添加非零数字/对象，而无需扩展任何类`Nat`、、`Zero`或`Succ`。当您使用`natObj`类型的对象`Nat`并构造一个新对象`new Succ(natObject)`时，新对象表示的数字比所`natObj`表示的数字大一。

也许能够查看对象，这会更清楚一点：

```
abstract class Nat {
  def isZero : Boolean
  def predecessor : Nat
  def successor = new Succ(this)
  def + (that : Nat) : Nat
  def - (that : Nat) : Nat
}

object Zero extends Nat {
  def isZero = true
  def predecessor = throw new Error("0.predecessor")
  def + (that: Nat) = that
  def - (that: Nat) = if(that.isZero) this else throw new Error("negative number")

  override def toString = "0 => Zero"
}

class Succ(n : Nat) extends Nat {
  def isZero = false
  def predecessor = n
  def + (that : Nat) = new Succ(n + that)
  def - (that: Nat) = if (that.isZero) this else n - that.predecessor

  override def toString = {
    def findNumber(nat: Nat): Int = 
      if (nat.isZero) 0 
      else 1 + findNumber(nat.predecessor)
    val number = findNumber(this)
    String.valueOf(number) + " => " + 
            ((1 to number) fold ("Zero")) ( (s,_) => "Succ(" + s + ")")
  }
} 
```

现在，您的 Scala 工作表将向您显示对象表示的数字及其内部结构：

```
object NatTests extends App {
  val nat0 = Zero                                 
  val nat1 = new Succ(Zero)                       
  val nat2 = new Succ(nat1) // or new Succ(new Succ(Zero))
  val nat3 = new Succ(nat2) // or new Succ(new Succ(new Succ(Zero)))

  println(nat0)             //> 0 => Zero
  println(nat1)             //> 1 => Succ(Zero)
  println(nat2)             //> 2 => Succ(Succ(Zero))
  println(nat3)             //> 3 => Succ(Succ(Succ(Zero)))
  println(nat2 + nat2)      //> 4 => Succ(Succ(Succ(Succ(Zero))))
  println(nat3 + nat2)      //> 5 => Succ(Succ(Succ(Succ(Succ(Zero)))))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:36:12.257

您很可能希望递归地实现它们

我不确定确切的语法，但它会是这样的

```
def +(that : Nat) = (this.predecessor + that.successor)
def -(that: Nat) = if (that.isZero) this else (this.predecessor - that.predecessor) 
```

此外，由于您的对象是不可变的，因此没有真正的理由每次都创建一个新对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:54:55.403

我就是这样写的：

```
sealed trait Nat {
  def isZero : scala.Boolean
  def predecessor : Nat
  def successor = Succ(this)
  def + (that : Nat) : Nat
  def - (that : Nat) : Nat  = 
       if (that.isZero) this else this.predecessor - that.predecessor
}

case object Zero extends Nat {
  def isZero = true
  def predecessor = sys.error("predecessor of zero")
  def + (that: Nat) = that
}

case class Succ(predecessor : Nat) extends Nat {
  def isZero = false
  def +(that : Nat) = this.predecessor + that.successor
} 
```

# tsql - 从未清事务中读取已删除或更新值

> ID：16218701
> 
> 赞同：1
> 
> 时间：2013-04-25T15:22:02.000
> 
> 标签：tsql

我试图打开事务然后删除一条记录，现在我需要将删除的记录插入到事件表中。问题是我看不到结果，因为它已被删除。

```
CREATE procedure [dbo].[TestData] ( @clientid bigint ) As
Begin 
    print ''abc''
    insert into Client_Event_Log values ( getdate(),0,@clientid,100,''B0AE3162-671C-E211-AF2A-00155D051024'',NULL)

    BEGIN TRY
    BEGIN TRAN

        Delete from access_types    -- There is only record in the table.

        8559230 abc 101 0   2010-01-01 10:25:25.000

        select * from access_types  -- cann't see the deleted record even before the session.

        DECLARE @cGTAEventLog bigint
        select @cGTAEventLog=Access_Type_Id from access_types 

        exec TestData @cGTAEventLog   -- Now i am passing 8559230 to the SP to insert into event   
               table but it has been delete before so can't insert NULL

        Commit Tran
    END TRY
    BEGIN CATCH
        ROLLBACK TRAN
        --Error message
        PRINT 'Error: ' + 
            CONVERT(VARCHAR,ERROR_NUMBER()) + ' - ' + 
            CONVERT(VARCHAR,ERROR_SEVERITY()) + ' - ' + 
            CONVERT(VARCHAR,ERROR_STATE()) + ' - ' + 
            ERROR_MESSAGE() + 
        ' Raise Error occurred at line ' + CONVERT(VARCHAR,ERROR_LINE())
    END CATCH
END 
```

我需要找到一种在删除后访问数据的方法，以便我可以插入到事件表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:41:37.520

假设您使用的是 SQL Server 2005 或更高版本，您可以使用`output clause`访问虚拟“已删除”表并将其内容存放在表变量中。类似于以下内容

```
DECLARE @TmpTable TABLE (ID INT, ......)

DELETE
FROM access_types
OUTPUT Deleted.ID,... INTO @TmpTable 

select * from @TmpTable 
```

# bash - crontab 不执行 bash 脚本

> ID：16218705
> 
> 赞同：4
> 
> 时间：2013-04-25T15:22:17.073
> 
> 标签：bash, shell, cron, crontab

我很少使用 Linux，因此对 bash 脚本和 cron 作业没有任何经验。这其实是我的第一次尝试。因此，修复它可能非常简单。

我有以下内容：

/etc/cron.d/clear-mixtape-dir.sh 权限为：644

```
#!/bin/bash
# Clears the /tmp/mixtape2 directory
rm -rf "/tmp/mixtape2/"* 
```

我的 crontab 文件如下所示：

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root
HOME=/

*/15 * * * * /etc/cron.d/clear-mixtape-dir.sh >/dev/null 2>&1 
```

我试图每 15 分钟执行一次 .sh 脚本。

我发现的一切都说这应该有效，但事实并非如此。

在这种情况下，文件权限（在 /tmp/mixtape2/ 中的文件上）之类的东西是否重要？或者可能是在实际 .sh 脚本上设置的权限 - 也许他们需要设置为可执行？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T01:04:00.853

**从脚本中删除 .sh 扩展名，`/etc/cron.d`它将被调用。**

`run-parts`忽略名称中带有句点的文件，因此 .sh 扩展名会阻止您的脚本运行。

从`man cron`——

> 文件必须符合 run-parts(8) 使用的相同命名约定：它们必须仅由大小写字母、数字、下划线和连字符组成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:25:16.843

注意：这些注释是指 /etc/crontab。

在做任何其他事情之前，您正在访问哪个 cron`crontab -e`或

```
su -vim
<your-favorite-editor> /etc/crontab 
```

如果您使用的是 crontab -e，则该 crontab 形式中不存在用户字段。这可能就是你不跑步的原因。

在您的示例中，您的用户字段是 *. 我会将其设为 root 或具有适当权限的用户。

在运行这个程序之前，我会创建一个虚拟的 crontab 条目，它只会回显“Hello”并每分钟运行一次。让它在你正在编辑的 crontab 上工作（crontab -e 或 vim /etc/crontab）。然后使用它作为模板，让你的脚本运行。

接下来，查看 cron 是否正在运行：

`ps -ef | grep cron`

如果它没有运行，请成为 root 并通过 enter 启动它

`/etc/init.d/cron start`（Ubuntu 和红帽）。

由于权限问题，您已经有了一个很好的答案，建议您将 root 添加为用户。我将建议更多的东西来帮助你调试。这些年来，我遇到了很多 cron 问题。

1) 将电子邮件设置为已知地址，除非您将持续监控 root 的电子邮件

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/local/bin:/usr/bin
MAILTO=fred@somewhere.com
HOME=/ 
```

2) 在一切正常运行之前，`>/dev/null 2>&1`从您的 cron 条目中取出，以便您在脚本运行后看到生成的电子邮件中的输出。

3)`*/15`降低到大于脚本运行所需的时间间隔 - likr `*/5`，因此脚本运行得更频繁。

4）我不知道确切的原因，但是我用完 cron 的脚本必须设置自己的环境，尽管在 cron 中以该用户身份运行。这可能包括诸如`cd /home/script-owner`运行`source .bashrc`和调用设置环境变量的其他脚本之类的步骤。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T15:33:22.327

```
 */15 * * * * root /etc/cron.d/clear-mixtape-dir.sh >/dev/null 2>&1 
```

添加用户`root`，因为您的权限似乎仅适用于 root。

# mysql - 我需要根据值的第一个字符查询 MYSQL 记录

> ID：16218707
> 
> 赞同：0
> 
> 时间：2013-04-25T15:22:25.203
> 
> 标签：mysql, select, limit

我有 1 个包含 8000 条记录的 MYSQL 表。我想通过全名的第一个字符查询名字、中间名和姓氏。例如，我有 40 行记录（名字、中间名和姓氏），它们的名字的第一个字符是 SSS。我的问题是，我如何查询“SSS”以仅返回 6 个结果，当我再次查询“SSS”时，我需要另外 6 个结果，依此类推，直到所有 40 条记录查询结束。

我使用了以下查询，但只返回前 6 个结果，当我下次查询“SSS”时，它一遍又一遍地返回相同的结果。拜托我需要你的帮忙。

```
SELECT * 
FROM Table  
WHERE  (UPPER(FName) LIKE UPPER('S%') 
       AND UPPER(MName) LIKE UPPER('S%') 
       AND UPPER(LName) LIKE UPPER('S%') 
ORDER BY ID 
LIMIT 6 OFFSET 0 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:27:24.500

您按 ID 订购 - 很好。记住上次返回数据集的最大 ID，下次查询时添加条件 ID > your_last_max_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:50:37.767

第二次，更改偏移量：

```
LIMIT 6 OFFSET 6 
```

接着

```
LIMIT 6 OFFSET 12 
```

等等

# .net - 如何使用自定义记录器进行 vs 测试？

> ID：16218714
> 
> 赞同：3
> 
> 时间：2013-04-25T15:22:39.453
> 
> 标签：.net, visual-studio, unit-testing, mstest

[我正在尝试根据https://github.com/JakeGinnivan/VSTest.TeamCityLogger](https://github.com/JakeGinnivan/VSTest.TeamCityLogger)和[http://msdn.microsoft.com/en-us/library/vstudio/jj155796.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj155796.aspx)将此自定义 Teamcity 记录器用于 VsTest

复制`vstest.teamcity.logger.dll`到后，`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\Extensions`我让它使用命令

```
"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe" Tests.dll /logger:vstest.teamcity.logger.dll/TeamCityLogger 
```

但是，其他用户尚未`vstest.teamcity.logger.dll/`在该位置安装。他们确实在工作目录中有它。如何运行 vstest 指定精确路径？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-12-14T16:21:17.410

作为一个选项，您可以为用户提供一个方便的脚本，以便在测试运行之前将 dll 复制到 Visual Studio 文件夹中。

# jquery - 如何在 Asp.net MVC 中创建 Json 文件

> ID：16218722
> 
> 赞同：0
> 
> 时间：2013-04-25T15:22:54.770
> 
> 标签：jquery

我正在学习一个 Jquery 教程，它告诉我制作一个 Json 文件......但我在 Visual Studio 中没有找到任何具有该扩展名的东西......如何使用 Visual Studio 创建一个 .json 文件？

# matlab - 如何让 fprintf 显示更高的精度？

> ID：16218728
> 
> 赞同：1
> 
> 时间：2013-04-25T15:23:10.270
> 
> 标签：matlab, printf

我正在尝试使用以下 fprintf 代码

```
 n
      m
     fprintf('The minimum value of the modulus of the image of C_r is %d \n\nThe correspoding point is at %d \n\n',m,n) 
```

我得到了结果

```
 n =

  3.632213809443102 + 3.680287679864827i

m =

   5.170831128945713

The minimum value of the modulus of the image of C_r is 5.170831e+000 

The correspoding point is at        3.632214e+000 
```

我分别打印了 n 和 m 的值，以显示我希望它们如何显示——如何让 fprintf 以更高的精度显示数字？我尝试更改 %d 条款但无济于事

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:26:25.320

怎么样

```
fprintf( '%.15f\n', m ); 
```

打印 15 位数字

# solr - 如何在一个请求中使用自动建议/拼写更正的关键字查询 Solr？

> ID：16218733
> 
> 赞同：1
> 
> 时间：2013-04-25T15:23:23.413
> 
> 标签：solr, autosuggest, fieldcollapsing

亚马逊等网站上的许多流行搜索下拉菜单（[示例图片](http://i.imgur.com/aQyM8WD.jpg)）使用自动建议的词以及分组（Solr 中的字段折叠）。

虽然我可以使用两个请求在 Solr 中复制相同的功能（第一个是获取建议，第二个是使用最可能的建议进行实际查询），但我想知道这是否可以在一个请求本身中完成。

我了解获得建议的方式有很多种（术语组件、方面、Solr 的内置（[Suggester](http://wiki.apache.org/solr/Suggester)），我愿意使用其中任何一种，如果这意味着我将能够获得一切（组 + 建议）在一个请求中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:53:34.867

I have not tested it yet.. but i try this for my auto_suggest..

[Auto Suggestion With multi words/terms using SOLR](http://androidyou.blogspot.in/2011/08/how-to-auto-suggesting-with-multi.html)

# java - Eclipse RCP：没有启动应用程序的命令行参数

> ID：16218735
> 
> 赞同：2
> 
> 时间：2013-04-25T15:23:25.910
> 
> 标签：java, eclipse, eclipse-rcp

我有一个在 3.x 中启动的 RCP 应用程序，现在我已经完成了到 4.x 的软迁移。

我需要为最终用户添加命令行参数选项，例如 -version、-help 等。所以当用户`myApp -version`在控制台中键入时，它不会启动应用程序，只显示版本号。

谢谢！

我在我的应用程序课上试过这个，

```
public Object start(IApplicationContext context) throws Exception {
        String[] args = Platform.getCommandLineArgs();
        int i = 0;
        while (i < args.length)
        {
            if (args[i].equals("-v"))
            {
                System.out.println("Version ABC");
                return IApplication.EXIT_OK;
            }
            i++;
        }

        Display display = PlatformUI.createDisplay();
        try {
            int returnCode = PlatformUI.createAndRunWorkbench(display, new ApplicationWorkbenchAdvisor());
            if (returnCode == PlatformUI.RETURN_RESTART)
                return IApplication.EXIT_RESTART;
            else
                return IApplication.EXIT_OK;
        } finally {
            display.dispose();
        }

    } 
```

它不会启动 UI，但会启动启动画面。有没有一种方法可以`getCommandLineArgs()`在启动画面开始之前放置？

SplashHandler 尝试：我尝试绑定自己的 SplashHandler，但遇到了同样的问题。当我到达 SplashHandler 的 init 方法时，带有初始图像的 shell 已经显示出来，我认为这个 shell 是在我的任何类可以进行更改之前创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:18:04.370

在说明 Java VM*之前*，启动器（典型的 eclipse.exe 或类似程序）会显示启动画面。初始屏幕根据条目显示`osgi.splashPath=platform\:/base/plugins/...`显示`configuration/config.ini`。

你唯一的出路是

1.  从`config.ini`
2.  显示你自己的启动画面`IApplication.start(...)`

请注意，与今天相比，启动屏幕会“延迟”，并且`SplashHandler`不会自动实例化和调用（尽管您可以自己做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:40:53.740

我还没有查看 4.x 文档，但是您可以在 GUI 启动之前使用 IApplication 中的*start*[方法](http://help.eclipse.org/indigo/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/equinox/app/IApplication.html#start%28org.eclipse.equinox.app.IApplicationContext%29)来处理这个问题。

然后在应用程序实际启动之前做这样的事情......

```
Map args = context.getArguments();

String[] parms_ = (String[]) args.get("application.args");
List parms = Arrays.asList(parms_);

if (parms.contains("-version")) {
    System.out.println("version found");
    return IApplication.EXIT_OK;
} 
```

# jquery - ajax jquery上下文问题无法解决

> ID：16218745
> 
> 赞同：2
> 
> 时间：2013-04-25T15:24:08.257
> 
> 标签：jquery

尽管将上下文设置为“this”，但无法触发预期的方法。在 createNewTable 函数中的以下代码中，“this.joinTable(data.tableId);” 尽管将上下文设置为此，但无法触发。

我如何解决这个问题。请帮忙。

```
var homePageKeycontroller = {

    currentIndex:0,
    tables: new Array("newGame"),

    init: function(){
        this.select();
    },

    select : function(){
        $(".box").css({
            background:"#FFAB25"
        });
        $("#"+this.tables[this.currentIndex]).css({
            background:"gray"
        });
    },
    next : function(){
        this.currentIndex++;
        if(this.currentIndex > this.tables.length-1)
            this.currentIndex = 0;
        this.select();
    },
    previous : function(){
        this.currentIndex--;
        if(this.currentIndex <= 0)
            this.currentIndex = 0;
        this.select();
    },
    createNewTable : function(){
        $.ajax({
            url: "http://mywebiste.com/createAjaxTable",
            type:'post',
            dataType:'json',
            context:this,
            success:function(data){
                if(data.status == JsonStatus.OK){
                    alert("Table ID: "+data.tableId);
                    this.joinTable(data.tableId); // issue here
                }
            }
        });
    },
    handleUserChoice : function(){
        if(this.tables[this.currentIndex] ==='newGame'){
            this.createNewTable();
        }
    },
    joinTable : function(_tId){
        $.ajax({
            url:"http://mywebsite.com/JoinTable",
            type:'post',
            dataType:'json',
            data:{tableId:_tId},
            context:this,
            success:function(data){
                if(data.status == JsonStatus.OK){
                    this.showTable(); //issue here
                }
            }
        });
    },
    showTable : function(){
        $.ajax({
            url : 'http://mywebsite.com/showTable',
            success:function(data){
                DOM.mainCanvas.html(data);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:20:53.907

根据 jQuery API 文档

> 所有回调中的**this**引用是设置中传递给**$.ajax的****context**选项中的对象；如果未指定**上下文，则****这**是对 Ajax 设置本身的引用。

 ******因此，要使其正常工作，您可以在 ajax 调用之前将**对此**的引用存储在变量中，或者直接在回调中调用 homePageKeyController.joinTable()：

```
createNewTable : function(){
    var self = this;
    $.ajax({
        url: "http://mywebiste.com/createAjaxTable",
        type:'post',
        dataType:'json',
        context:this,
        success:function(data){
            if(data.status == JsonStatus.OK){
                // Use self variable here since "this" belongs to callback
                // function context.
                // or call homePageKeyController.joinTable(data.tableId) instead.
                self.joinTable(data.tableId);
            }
        }
    });
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:21:32.993

这里的问题是在 'success' 方法中，'this' 关键字是指包含 'success' 方法的 ajax 对象。

解决此问题的简单解决方法是：

```
var homePageKeycontroller = {

  var that = this;

  createNewTable : function(){
    $.ajax({
        url: "http://mywebiste.com/createAjaxTable",
        type:'post',
        dataType:'json',
        context:this,
        success:function(data){
            if(data.status == JsonStatus.OK){
                alert("Table ID: "+data.tableId);
                that.joinTable(data.tableId);
            }
        }
    });
},

joinTable : function(_tId){
    $.ajax({
        url:"http://mywebsite.com/JoinTable",
        type:'post',
        dataType:'json',
        data:{tableId:_tId},
        context:this,
        success:function(data){
            if(data.status == JsonStatus.OK){
                that.showTable();
            }
        }
    });
},
showTable : function(){
    $.ajax({
        url : 'http://mywebsite.com/showTable',
        success:function(data){
            DOM.mainCanvas.html(data);
        }
    });
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:37:45.527

也许尝试 .done() 语法而不是 :success。我在使用成功方法时遇到过这类问题，但在使用 done() 方法时从未遇到过。

```
createNewTable : function(){
        $.ajax({
            url: "http://mywebiste.com/createAjaxTable",
            type:'post',
            dataType:'json',
            context:this
        }).done(function(data){
            if(data.status == JsonStatus.OK) {
                alert("Table ID: "+data.tableId);
                this.joinTable(data.tableId); // issue here
            }
        });
    }, 
```******

# sql-server-2008 - 是否可以为 Sql Server 2008 中的特定行数制作脚本？

> ID：16218750
> 
> 赞同：1
> 
> 时间：2013-04-25T15:24:21.150
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一个包含 100k+ 行数据的表。是否可以仅使用 MSSQL Server 2008 为最后 1000 行数据生成脚本（插入）？例如，Tasks > Generate Scripts... 正在插入表中的所有数据。这个脚本很重。我知道我可以使用 Query > Results to File。然后编写一个程序来解析结果并生成一个脚本，但是否存在更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:30:39.020

不，我敢肯定，就让 SSMS 为您执行此操作而言，您很不走运。正如您所说，您始终可以选择所需的数据，将其导出并进行一些操作以创建插入脚本。使用 SQL Server 2008，这可能很简单

```
INSERT INTO MyTable (Col1, Col2) 
VALUES
(1,'test1'),
(2,'test2'),
(3,'test3'), --997 more 
```

它仍然需要一些工作，但至少你不必写这`INSERT INTO MyTable`部分 1000 次......

# javascript - 仅使用 jquery 处理输入键盘按钮单击

> ID：16218756
> 
> 赞同：0
> 
> 时间：2013-04-25T15:24:34.090
> 
> 标签：javascript, html, css

hi2all 我只需要处理输入按钮事件，但我的代码句柄输入即使我点击

另一个按钮

例如，当我从 kb 中单击 Shift+enter 时，它会处理单击我想防止这样的事情

我想单独处理按回车

{ ***_* __ *_* __ *_* __ *_* __** 另一个问题我想在每个附加文本之后添加新行

我的代码在这里

```
<!DOCTYPE HTML>
<html>

    <head>
        <meta http-equiv="content-type" content="text/html" />
        <meta name="author" content="gencyolcu" />
        <title>Untitled 1</title>
        <style>
</style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                $("#button1").click(function() {
                    $(this).attr("disabled", true);
                });
                $("#entr").keypress(function(e) {
                    if (e.which == 13) {
                        alert("enter pressed");
                        $("#texts").append($("#entr").val());
                    }
                });
            });
        </script>
    </head>

    <body>
        <div id="m" style="background-color: darkorange;">click me to change webpage background</div>
        <input id="entr" type="text" value="enter some text here" />
        <input id="button1" type="button" value="me" />
        <p id="texts">text in text box will appended here
            <br />
        </p>
    </body>

</html>
<script type="text/javascript">
    //change the color of webpage when clicking the div
    var x = document.getElementById("m");
    x.addEventListener("click", function() {
        document.body.style.backgroundColor = "darkturquoise";
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:30:34.847

//`//will work for shift+enter if (event.keyCode == 13 && event.shiftKey) { }` [如何检测“shift+enter”并在 Textarea 中生成新行？](https://stackoverflow.com/questions/6014702/how-do-i-detect-shiftenter-and-generate-a-new-line-in-textarea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:28:07.550

这是你需要做的。将您的事件绑定`keypress`到正文。

```
jQuery(document).ready(function(){
    jQuery('body').on('keypress', function(e){
        //  We are looking for the action "enter"
        if(e.which == 13){
            //  Must not be with shift
            if(event.shiftKey !== true){
                alert(' Enter ! ');
            }
        }
    });
}); 
```

要添加新行，您必须附加`MyVar = MyVar + '<br />'+"\r\n";`

# c++ - 如何预取不常用的代码？

> ID：16218757
> 
> 赞同：4
> 
> 时间：2013-04-25T15:24:42.713
> 
> 标签：c++, low-latency, prefetch

我想将一些代码预取到指令缓存中。代码路径很少使用，但我需要它在指令缓存中，或者至少在 L2 中，因为它在极少数情况下使用。我提前通知了这些罕见的情况。_mm_prefetch 是否适用于代码？有没有办法在缓存中获取这个不经常使用的代码？对于这个问题，我不关心可移植性，所以即使 asm 也会这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T16:01:12.523

答案取决于您的 CPU 架构。

也就是说，如果您使用 gcc 或 clang，您可以使用该[`__builtin_prefetch`](http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Other-Builtins.html)指令来尝试生成预取指令。在 Pentium 3 和更高版本的 x86 型架构上，这将生成一条`PREFETCHh`指令，该指令请求加载到数据缓存层次结构中。由于这些架构具有统一的 L2 和更高的缓存，因此可能会有所帮助。

该函数如下所示：

```
__builtin_prefetch(const void *address, int locality); 
```

`locality`参数应在 0...3 范围内。假设`locality`直接映射到指令的`h`一部分`PREFETCHh`，您想要传递 1 或 2，这要求将数据加载到 L2 和更高的缓存中。请参阅[*英特尔® 64 和 IA-32 架构软件开发人员手册第 2B 卷：指令集参考，MZ* (PDF)](http://download.intel.com/products/processor/manual/253667.pdf)第 4-277 页。（[在此处查找其他卷](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。）

如果您正在使用另一个没有 的编译器`__builtin_prefetch`，请查看它是否具有该`_mm_prefetch`功能。您可能需要包含一个头文件才能获得该功能。例如，在 OS X 上，该函数和`locality`参数的常量在`xmmintrin.h`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T15:40:23.520

没有任何（官方 [1] x86）指令来预取代码，只有数据。我发现这是一个相当奇怪的用例，其中代码路径是事先知道的，但很少执行，并且预取代码有很大的好处。很高兴了解您在哪里得出的结论，即为这种特殊情况预加载代码有很大的好处，因为它不仅需要分析代码在没有被命中时显着变慢很长一段时间，但还要确定在处理器可以通过其正常的加载代码机制预取代码之前实际加载代码的空闲总线周期。

您也许可以使用`prefetch`获取 L2 的指令，该指令通常在 I 和 D 缓存之间共享。

[1] 我知道有一些“秘密”指令允许处理器操作缓存内容，但由于这些指令需要大量额外的工作，即使您可以在用户模式代码中使用它们[我希望这是不是一些内核模式代码]。

# html - 错误 - Chrome XP HTML 锚属性 href mailto：奇怪的图标

> ID：16218761
> 
> 赞同：1
> 
> 时间：2013-04-25T15:24:56.903
> 
> 标签：html, google-chrome, windows-xp, href, mailto

一位客户向我发送了 Chrome XP 中这个奇怪错误的屏幕截图（不确定是哪个版本。）这些电子邮件图标出现在后台或内联中。我不确定他们来自哪里。我什至不知道从哪里开始。有什么建议么？

[https://www.dropbox.com/s/g972f3g05ibwsuo/website%20email.jpg](https://www.dropbox.com/s/g972f3g05ibwsuo/website%20email.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T19:43:34.610

这是由名为 Tout 的电子邮件/浏览器插件应用程序引起的错误。一旦我能够安装应用程序，我就能看到该错误是由浏览器应用程序的注入图标继承的样式规则引起的。

从中吸取的教训是，子选择器可能会在注入浏览器应用程序的未知环境中导致问题。

这是客户端特定的浏览器问题。

# .net - 向数据集添加行不会更新数据库（C#）

> ID：16218762
> 
> 赞同：0
> 
> 时间：2013-04-25T15:24:58.390
> 
> 标签：.net, c#-4.0, dataset

一个非常简单但非常令人沮丧的问题。我已经将一个数据网格绑定到一个本地数据库，以便玩耍并自学有关数据集和 c# 的知识。绑定数据，没问题。自定义填充（和 sql 选择），没问题。接下来是添加记录。因此，我添加了以下代码：

```
private void bAdd_Click(object sender, EventArgs e)
        {
            DataRow newRow = abbtestDataSet.Tables["main"].NewRow();
            newRow["Name"] = "Simon";
            newRow["Age"] = 23;
            abbtestDataSet.Tables["main"].Rows.Add(newRow);
        } 
```

数据网格更新没有问题，但是数据从未真正提交到数据库。我到处寻找解决方案或我可能会错过的东西，但一无所获；至少从我所见，我做的一切都是正确的。

那么我错过了什么？无疑是非常愚蠢的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:47:31.620

我相信您将需要使用 a`DataAdapter`将更新的内容实际发送`DataSet`到数据库。

查看以下链接以获取更多信息：

[http://www.java2s.com/Tutorial/CSharp/0560__ADO.Net/UseDataTabletoinsertaRow.htm](http://www.java2s.com/Tutorial/CSharp/0560__ADO.Net/UseDataTabletoinsertaRow.htm)

[为初学者使用 ADO.NET](http://www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners)

第一个链接的相关示例是：

```
 string ConnectionString ="server=(local)\\SQLEXPRESS;database=MyDatabase;Integrated Security=SSPI;";
    SqlConnection conn = new SqlConnection(ConnectionString);

    conn.Open();

    SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM Employee ORDER BY ID", conn);

    SqlCommandBuilder builder = new SqlCommandBuilder(adapter);

    // Create a dataset object
    DataSet ds = new DataSet("EmployeeSet");
    adapter.Fill(ds, "Employee");

    // Create a data table object and add a new row
    DataTable EmployeeTable = ds.Tables["Employee"];
    DataRow row = EmployeeTable.NewRow();
    row["FirstName"] = "R";
    row["LastName"] = "D";
    row["ID"] = "10";
    EmployeeTable.Rows.Add(row);

    // Update data adapter
    adapter.Update(ds, "Employee"); 
```

# bit-manipulation - Think Pascal 中的位函数

> ID：16218767
> 
> 赞同：2
> 
> 时间：2013-04-25T15:25:06.153
> 
> 标签：bit-manipulation, pascal

我正在将 Mac Think Pascal 上编写的旧程序转换为 Windows 上的 Pascal。Think Pascal 具有位操作功能，例如

```
btst(n, i : longint) : boolean
bitxor(i, j : longint) : longint
bclr(n, i : longint) : longint
bset(n, i : longint) : longint 
```

...和别的。如果您知道这些功能的作用，请提供帮助。

我找到了一些相关信息，例如[“从传统的 Macintosh Pascal 编译器移植到 GNU Pascal”](http://www.microbizz.nl/gpc.html)。本文档使用按位运算符（如`and`、`or`和）实现位函数。但是，我不确定文档中的描述是否正确。`shr``shl`

我知道函数的大致含义：

*   `btst(n,i)`如果 n 的第 i 位为 1，则为 True，否则为 False
*   `bitxor(i,j)`是按位“异或”
*   `bclr(n, i)`将 n 的第 i 位设置为 0
*   `bset(n, i)`将 n 的第 i 位设置为 1

但是，我不知道函数中变量的正确顺序是什么（例如`btst(n,i)`或`btst(i,n)`）。另外，位是如何编号的？从左到右，从0还是1开始？感谢您对这四个功能的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:38:23.727

（抱歉，需要更多空间）

Dev Pascal 1.9.2 在 Free Pascal 中的构建本质上是一个测试版，而且非常非常古老，并且自 2002 年以来就缺乏这些功能。但据我所知，dev-pascal 可以与较新的 FPC 一起使用。Lazarus 非常接近重新编译东西本身:_)

将**{$mode macpas}**放在程序和/或“接口”行之后（在一个单元中）。命令行也是可能的， **-Mmacpas**（适用于所有由编译器调用编译的，除非在源代码中被 $mode 否决）

您命名的函数在 MacPasc 模式下受支持，但 bitxor 称为 bxor()。Afaik MacPascal 主要模拟 CodeWarrior Pascal，但由于这主要是一个超集，因此认为 afaik 通常可以正常工作。添加了一些思想。

由于 macpascal 知识相当少，您可能想要订阅 main fpc list [main fpc list](http://www.freepascal.org/maillist.var "fpc-帕斯卡")或[Mac Pascal List](http://lists.sonic.net/mailman/listinfo/mac-pascal "苹果帕斯卡列表")。

[General Lazarus Forum](http://www.lazarus.freepascal.org/index.php?action=forum "拉撒路论坛")也被滥用于 FPC 目的，尽管我预计那里了解旧苹果方言的人会更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-19T02:18:56.187

位在一个字节中从 0 到 7 编号，或者在一个字中从 0 到 15 编号。位 0 是最右边的位。因此，如果位 0 为 1，所有其他位为 0，则字节或字的整数值为 1。

# javascript - 有效地将大型 2d 地图存储在内存中

> ID：16218770
> 
> 赞同：0
> 
> 时间：2013-04-25T15:25:21.297
> 
> 标签：javascript

我正在创建一个类似于口袋妖怪的 2d 平铺游戏，所以我正在创建一个地图编辑器来创建地图。
游戏将在网络上，因此地图编辑器必须是网络。
我不知道如何将地图存储在内存中：
我认为我可以使用二维数组，但地图可能非常大，导致大量内存使用/内存不足问题。
如何在不使用所有浏览器内存的情况下有效地将整个地图存储在内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:35:18.270

该标准似乎没有将整个地图加载到内存中，而只是当前视口或`bounds`在映射世界中被引用。

您将检查任何地图平移、滚动或缩放的边界并获取相应的图块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:35:04.023

存储地图的内存不应该太大。您可以制作以 json 格式存储数据的特殊地图文件。

```
echo json_encode(array(array(4, 2, 6, 4), array(4, 2, 6, 4), array(4, 2, 6, 4), array(4, 2, 6, 4))); 
```

```
// do some loading of the generated file
var map = <...>, i, j; // loaded data

for(i in map) {
  if(map.hasOwnProperty(map[i]))
  // etc
} 
```

例如，数组中的数字指向一个 id，只是为了保持它的小。您也可以在其中放置磁贴名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T02:24:45.567

我也在做一个2D平铺游戏......

您可以使用单独的数组来更轻松地创建地图，如下所示：

```
var mapX = [];
var mapY = [];
var mapType = []; 
```

mapX 是瓦片 x 位置的数组，mapY 是瓦片 y 位置的数组，mapType 描述瓦片的类型（例如 0 = 水，1 = 草，2 = 泥土，3 = 岩石等.)。然后你可以有一个功能来制作这样的瓷砖：

```
function createTile(x,y,type){
mapX.push(x);
mapY.push(y);
mapType.push(type);
} 
```

正在使用：

```
createTile(50,50,1); 
```

将在 (50,50) 位置创建一个草块。

# ruby-on-rails - Rails 3.2 - Update Attributes at Create - I'm stuck

> ID：16218775
> 
> 赞同：1
> 
> 时间：2013-04-25T15:25:33.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

trying to create an "award" record. I have 2 selection boxes calling the Employee model to populate the Nominator and Nominee in the Award.

The Employee table gets dropped and recreated every night via a batch job, so I need to capture all the metadata attributes (first_name, last_name, etc) of the Nominator and Nominee at the time of award creation.

Normally, I would just have an employee_id foreign key in the award model, then call the employee attributes dynamically, but the employee data is dropped each night, so I'm totally stuck on the logic on how to do this. Please help! And thanks in advance!

```
class AwardsController < ApplicationController
def create
    @award = Award.new(params[:award])

    respond_to do |format|
      if @award.save
        format.html { redirect_to new_award_path, notice: 'Award was successfully created.' }
        format.json { render json: @award, status: :created, location: @award }
      else
        format.html { render action: "new" }
        format.json { render json: @award.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

-

```
<%= form_for(@award) do |f| %>
  <% if @award.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@award.errors.count, "error") %> prohibited this award from being saved:</h2>

      <ul>
      <% @award.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 
<h4>I am...</h4>
  <label>Name</label>
    <%= f.collection_select :nominator_username, Employee.active.order(:last_name), :username, :lastfirst, :include_blank => true %>

<hr>
<h4>I would like to nominate...</h4>
    <label>Name</label>
    <%= f.collection_select :nominee_username, Employee.active.order(:last_name), :username, :lastfirst, :include_blank => true %>

    <h4>For providing the following...</h4>
    <%= f.text_area :award_description, :size => "50x7" %>

    <button type="submit">Submit</button>
    <div class="spacer"></div><p>

<% end %> 
```

-

```
class CreateAwards < ActiveRecord::Migration
  def change
    create_table :awards do |t|
        t.string    :nominator_first_name
        t.string    :nominator_last_name
        t.string    :nominator_username
        t.string    :nominator_phone
        t.string    :nominator_employee_number
        t.string    :nominator_mail_station
        t.string    :nominee_first_name
        t.string    :nominee_last_name
        t.string    :nominee_username
        t.string    :nominee_employee_number
        t.string    :nominee_phone
        t.string    :nominee_mail_station
        t.text      :award_description
        t.timestamps
    end
  end
end 
```

**UPDATE:**

Okay, I created a rake task:

```
#\lib\tasks\import.rake
require 'csv'

desc "Import employees from csv file"
task :import => [:environment] do

  file = "db/users.csv"

  CSV.foreach(file, :headers => true) do |row|
    Employee.find_or_create_by_username({
      :username => row[0],
      :last_name => row[1],
      :first_name => row[2],
      :employee_number => row[3],
      :phone => row[4],
      :mail_station => row[5]
    }
    )
  end
end 
```

When I run rake import.rake, I get:

```
*Don't know how to build task 'import.rake'*

/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/task_manager.rb:49:in `[]'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:142:in `invoke_task'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.4/bin/rake:33:in `<top (required)>'
/.rvm/gems/ruby-1.9.3-p286/bin/rake:23:in `load'
/.rvm/gems/ruby-1.9.3-p286/bin/rake:23:in `<main>' 
```

**UPDATE - Here is my final rake task. I am getting an error with the final update_column block: *undefined method 'update_column' for nil:NilClass***

```
require 'csv'

desc "Import employees from csv file"
task :import => [:environment] do

  file = "db/users1.csv"

    to_be_deactivated = {}
        Employee.all.each do |e|
        to_be_deactivated[ e.employee_number ] = true
    end

  CSV.foreach(file, headers: true) do |row|
    e = Employee.find_or_create_by_employee_number( row[:employee_number] )

    to_be_deactivated[ e.employee_number ] = false

    e.update_attributes(
      :last_name => row[1],
      :first_name => row[2],
      :phone => row[4],
      :mail_station => row[5]) 

    e.save
    end

    to_be_deactivated.each do |n|
        e = Employee.find_by_employee_number( n )
        e.update_column(:active, false)
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:52:16.320

If this is a Rails application, and you're not just piggy-backing on a legacy database, then I would recommend to not drop and re-import the employee table entirely, but to run a Rails-based import job, which uses the accounting employee-number to match records, and then does a `find_or_create_by_employee_number` -- so your Rails ids stay the same throughout your app.

You can set-up Rails to access multiple databases, and you can then read from the accounting DB and match those records against the Rails app's DB.

If you can't get direct read access to the accounting DB, then use the nightly dump, to populate a temporary DB, which you access as a secondary DB in Rails, and then match the employee records with a script/runner or rake based script that you can start via cron or delayed job.

That is probably the cleaner way to deal with this.

Then you can just use the Rails id for the employees in your awards model.

Dropping the database table, and re-creating it every night is not a good idea, because all your references become useless.

* * *

If you don't like that suggestion, then you could use the internal accounting employee number as the unique identifier in the awards model. You don't need to store all the other attributes, because the employee number will not change for the same person -- just do a `find_by_employee_number`

* * *

```
 to_be_deleted = {} # empty Hash
 Employee.all.each do |e|
     to_be_deleted[ e.employee_number ] = true
 end

 # now run your rake task with LDAP import.
 CSV.foreach(file, :headers => true) do |row|
   e = Employee.find_or_create_by_employee_number( row[:employee_number] )

   to_be_deleted[ e.employee_number ] = false

   #... 
   e.update_attributes( ... )
   e.save
 end

 # any records which were not updated by the LDAP import
 # need to be deleted:

 to_be_deleted.each do |n|
    e = Employee.find_by_employee_number( n )
    e.destroy  # also deletes associated records; otherwise use delete
 end 
```

# database - Codeigniter 从模型中获取结果

> ID：16218776
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:25:34.993
> 
> 标签：database, codeigniter, model

我有一个名为 main 的控制器...这里我有这个代码。

```
$data['companies'] = $this->companies->getAllCompanies();
$this->load->view('main_view',$data); 
```

我已经像这样在构造器中加载了名为公司的模型：

```
$this->load->model('companies'); 
```

这是我的模型：

```
class Companies extends CI_Model{    
 function getAllCompanies()
 {
       $this -> db -> select('*');
       //$this -> db -> from('companies');

       $query = $this -> db -> get('companies');

       if($query -> num_rows() > 0)
       {
         return $query->result();
       }
       else
       {
         return false;
       }
 }} 
```

我收到此错误：

```
( ! ) 致命错误：在第 193 行的 C:\wamp\www\awt\system\database\drivers\pdo\pdo_driver.php 中的非对象上调用成员函数 execute()
调用堆栈

5 0.0299 4303144 公司->getAllCompanies( ) ..\main.php:32

```

这段代码有什么问题请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:35:23.663

听起来你有某种 sql 错误。尝试启用`db_debug`标志`application/config/database.php`并检查表名等。您也可以尝试在错误位置（在 system/database/drivers/pdo/pdo_driver.php:191 下）打印生成的 sql 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T10:50:12.200

```
class Companies extends CI_Model{    
 function getAllCompanies()
 {
       $this -> db -> select('*');
       //$this -> db -> from('companies');

       $result = $this -> db -> get('companies');

       if($query -> num_rows() > 0)
       {
         return $result;
       }
       else
       {
         return false;
       }
 }} 
```

进行上述更改。

# php - 使用 AJAX 请求长 PHP 脚本

> ID：16218778
> 
> 赞同：0
> 
> 时间：2013-04-25T15:25:40.013
> 
> 标签：php

我正在构建一个从 SQL 数据库动态加载的网站。为此，我创建了一个 PHP 文件来处理所有 AJAX 以及 Post 和 Get 请求（每个页面都有几个`php include`.

PHP 还不是很长（250 行），但最终可能会变得更长。一切都包裹在`<?php **** ?>`标签中，并且清晰而有条不紊地由`switch`和组成`case`。所以我每次只需要几行。

我的问题是：*每个* `include`请求是否加载/下载*所有*文件，或者只是相应的部分？换个说法，假设 10,000 行长的脚本会减慢*浏览器的*速度，还是只是服务器的响应时间？

我对这一切感到担忧。

提前致谢。

PS：这个统一`sql`请求的想法来自一位一直坚持[Multititer Architecture](http://en.wikipedia.org/wiki/Multitier_architecture)的电脑工程师朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:29:56.503

当您`include`创建一个文件时，整个文件内容都将在该点插入/执行到脚本中。根据包含的情况，如果您包含响应不需要的文件，您可能会减慢响应速度。

[http://us3.php.net/manual/en/function.include.php](http://us3.php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T18:59:43.513

我有一个很好的解决方案！（这是我自己的问题）

取而代之的是解析变量`$option`以输入 a`switch case case case .... case case endswitch`我想我可以将 PHP 拆分为许多不同的 PHP，并使用它们对应的案例名称。

因此，`case('sports')`我现在将使用 a而不是使用 ，`<?php include('some_folder/'.$option.'.php');?>`这将避免每次调用时将整个文件转换为二进制文件。

由于`PHP`是在服务器上处理的，包含的文件将一直存在，它只需要处理 20 行代码而不是 400 行（最终，更多）。

确定，谢谢

# ios - 关闭模态视图控制器

> ID：16218781
> 
> 赞同：1
> 
> 时间：2013-04-25T15:25:46.457
> 
> 标签：ios, modalviewcontroller

我已将代码添加到我的 didFinishLaunchingWithOptions 方法中，以便在从通知中打开应用程序时打开特定视图。我在该视图的导航栏中添加了一个“关闭”按钮。我试图让该按钮在关闭模式视图后将用户带到主屏幕。现在，当用户点击按钮时，应用程序崩溃。这里有人有什么想法吗？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // This prevents the UA Library from registering with UIApplcation by default when
    // registerForRemoteNotifications is called. This will allow you to prompt your
    // users at a later time. This gives your app the opportunity to explain the benefits
    // of push or allows users to turn it on explicitly in a settings screen.
    // If you just want everyone to immediately be prompted for push, you can
    // leave this line out.
    // [UAPush setDefaultPushEnabledValue:NO];

    //Create Airship options dictionary and add the required UIApplication launchOptions
    NSMutableDictionary *takeOffOptions = [NSMutableDictionary dictionary];
    [takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

    // Call takeOff (which creates the UAirship singleton), passing in the launch options so the
    // library can properly record when the app is launched from a push notification. This call is
    // required.
    //
    // Populate AirshipConfig.plist with your app's info from https://go.urbanairship.com
    [UAirship takeOff:takeOffOptions];

    // Set the icon badge to zero on startup (optional)
    [[UAPush shared] resetBadge];

    // Register for remote notfications with the UA Library. This call is required.
    [[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                                         UIRemoteNotificationTypeSound |
                                                         UIRemoteNotificationTypeAlert)];

    // Handle any incoming incoming push notifications.
    // This will invoke `handleBackgroundNotification` on your UAPushNotificationDelegate.
    [[UAPush shared] handleNotification:[launchOptions valueForKey:UIApplicationLaunchOptionsRemoteNotificationKey]
                       applicationState:application.applicationState];

    // self.tabBarController = [[UITabBarController alloc] initWithNibName:@"KFBViewController" bundle:nil];
    KFBViewController *rootView = [[KFBViewController alloc] initWithNibName:@"KFBViewController" bundle:nil];
    KFBNavControllerViewController *navController = [[KFBNavControllerViewController alloc] initWithRootViewController:rootView];
    navController.delegate = rootView;
    UIViewController *aboutUs = [[AboutUs alloc] initWithNibName:@"AboutUs" bundle:nil];
    KFBNavControllerViewController *navController1 = [[KFBNavControllerViewController alloc] initWithRootViewController:aboutUs];

    UIViewController *contactUs = [[ContactUs alloc] initWithNibName:@"ContactUs" bundle:nil];
    KFBNavControllerViewController *navController2 = [[KFBNavControllerViewController alloc] initWithRootViewController:contactUs];

    UIViewController *kyfb = [[KYFB alloc] initWithNibName:@"KYFB" bundle:nil];
    KFBNavControllerViewController *navController3 = [[KFBNavControllerViewController alloc] initWithRootViewController:kyfb];

    // UIViewController *rsfm = [[RSFM alloc] initWithNibName:@"RSFM" bundle:nil];
    // KFBNavControllerViewController *navController4 = [[KFBNavControllerViewController alloc] initWithRootViewController:rsfm];

    // UIViewController *li = [[LegislatorInfo alloc] initWithNibName:@"LegislatorInfo" bundle:nil];
    // KFBNavControllerViewController *navController5 = [[KFBNavControllerViewController alloc] initWithRootViewController:li];

    // UIViewController *events = [[Events alloc] initWithNibName:@"Events" bundle:nil];
    // KFBNavControllerViewController *navController6 = [[KFBNavControllerViewController alloc] initWithRootViewController:events];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    //self.viewController = [[KFBViewController alloc] initWithNibName:@"KFBViewController" bundle:nil];
    //self.window.rootViewController = self.viewController;
    self.tabBarController = [[KFBTabBarViewController alloc] init];
    self.tabBarController.viewControllers = @[navController, navController1, navController2, navController3];
    // self.tabBarController.customizableViewControllers = nil;

    self.window.rootViewController = self.tabBarController;
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    // If application is launched due to  notification,present another view controller.
    UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

    if (notification)
    {
        ActionAlertsViewController *actionAlerts = [[ActionAlertsViewController alloc] initWithStyle:UITableViewStylePlain];
        WebViewController *wvc = [[WebViewController alloc]init];
        [actionAlerts setWebViewController:wvc];
        KFBNavControllerViewController *navController7 = [[KFBNavControllerViewController alloc] initWithRootViewController:actionAlerts];
        actionAlerts.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc ] initWithTitle:@"Dismiss" style:UIBarButtonItemStyleBordered target:self action:@selector(dismiss:)];
        [self.window.rootViewController presentViewController:navController7 animated:NO completion:nil];
    }

    return YES;
}

- (IBAction)dismiss
{
    [self.window.rootViewController dismissViewControllerAnimated:NO completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:07:08.517

您从窗口的根视图控制器 self.tabBarController 中呈现此控制器，但从导航控制器中将其关闭。尝试这个：

```
[self.window.rootViewController dismissViewControllerAnimated:NO completion:nil]; 
```

**编辑后：**

我现在看到了问题——您的条形按钮项的操作方法是dismiss:（带有冒号），而您实现了没有冒号的dismiss。它们必须相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:27:44.083

通过 Touch Up Inside 函数用 pe 和 UiButton 调用它

```
[self dismissModalViewControllerAnimated:YES]; 
```

# asp.net - 如何在 asp.net 中更改 BoundField 的控件

> ID：16218783
> 
> 赞同：0
> 
> 时间：2013-04-25T15:25:48.407
> 
> 标签：asp.net

你能改变一个BoundField的控件吗？

```
<asp:BoundField DataField="week1" HeaderText="week1" SortExpression="beginDate" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:06:13.603

您无法更改使用 BoundField 时创建的控件 - 这是根据您绑定到的字段的数据类型自动选择的（为布尔字段创建 CheckBox，为文本类型字段创建标签）。

如果要将数据绑定到不同类型的控件，则需要使用[TemplateField ：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.aspx)

```
<asp:templatefield headertext="week1">
    <itemtemplate>
        <asp:label id="weekOneLbl" Text= '<%# Eval("week1") %>' runat="server"/>
    </itemtemplate>
</asp:templatefield> 
```

默认情况下，您的 BoundField 将使用 Label 控件（如上）。但是使用 TemplateField，您可以将其更改为只读文本框：

```
<asp:templatefield headertext="week1">
    <itemtemplate>
        <asp:TextBox ID="weekOneLbl" Text= '<%# Eval("week1") %>' runat="server" ReadOnly="True" />
    </itemtemplate>
</asp:templatefield> 
```

# model-view-controller - 如何从孩子通知父类？

> ID：16218785
> 
> 赞同：0
> 
> 时间：2013-04-25T15:25:52.217
> 
> 标签：model-view-controller, cocos2d-iphone, key-value-observing

我正在尝试解决一个架构问题，但我想找到最合适的方法。

我有游戏场景 GameLayer.h，这是我在这种情况下的看法。我也有我试图成为控制器的 GameEngine 类。我有从 CCNode 派生的自定义 Egg 类，以及通过 Egg 类中的调度实现的一些计时器逻辑。我通过 addChild 方法在游戏场景中添加了许多 Egg 对象。所以GameEngine.m导入GameLayer.h，GameLayer.m导入Egg.h

在每个 Egg 中的计时器用完后，我想收到通知，即执行一些操作、增加分数等。问题是实现这种情况的最佳方法是什么。我也想遵守 MVC 规则我想到的快速解决方案是

1.  在 Egg 类中包含 Gamelayer.h 并在其中调用一些更新方法。更新视图（自我）并通知 GameEngine 保存新分数。
2.  在 Egg 类中包含 Gamelayer.h 并在其中调用一些更新方法。在更新方法中调用另一个更新方法，该方法现在在 GameEngine.h 中，现在来自 GameEngine 保存分数，并更新 Gamelayer（视图）
3.  实施 KVO。问题是我以前从未做过，我不知道观察者应该是 GameLayer 还是 GameEngine

请帮助，任何例子表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:05:23.610

更多选择：

1.使用[NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)。您的 Eggs 会发布通知，而您的 GameLayer 会观察。

2\. 使用[协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html#//apple_ref/doc/uid/TP40011210-CH11-SW1)。例子：

```
// in Egg.h

@class Egg;
@protocol EggDelegate
// an example method
-(void)egg:(Egg *)egg hadSomethingHappen:(int)parameter;
@end

@interface Egg: CCNode
@property (weak) id<EggDelegate> delegate;
@end

// in Egg.m
/// something happened and delegate has to be notified?
[self.delegate egg:self hadSomethingHappen:someNumber]; 
```

然后声明 GameLayer 来支持这个协议：

```
@interface GameLayer : CCLayer <EggDelegate> 
```

在 GameLayer 中实现协议的方法并使其成为 Egg 对象的委托：

```
// somewhere in GameLayer
Egg *egg = [Egg node];
egg.delegate = self;

...

//protocol implementation
-(void)egg:(Egg *)egg hadSomethingHappen:(int)parameter
{
// do something
} 
```

# php - 我应该如何将数组的值分开为偶数，奇数？

> ID：16218786
> 
> 赞同：0
> 
> 时间：2013-04-25T15:25:54.703
> 
> 标签：php

**问题**

目前我的输出是这样的**PNL 测试 1,10，PNL 测试 2,55，**我想操纵它并将它存储在两个不同的变量中作为字符串，如：

**$teams** = "PNL 测试 1，PNL 测试 2";

**$amount** = "10, 55";

请让我知道我应该如何以上述格式拆分。

**代码**

```
while ($row1 = mysql_fetch_assoc($result)){
    $profit = 0;
    $total = 0;
    $loss = 0;
    $final_array = '';
    $final_array .= $teams = $row1['t_name'].",";
    $teams = explode(",", $teams);

    $transact_money = $row1['pnl_amount'];
    $pnl_results = $row1['pnl'];

    $transact_money = explode("|", $transact_money);
    $pnl_results = explode("|", $pnl_results);
    for($i=0; $i<count($transact_money); $i++){
        if($pnl_results[$i]=='Profit'){
            $profit = $profit + $transact_money[$i];
        }else{
            $loss = $loss + $transact_money[$i];
        }//end if
    }//end for..
    $team_profits = $profit - $loss.",";
    $final_array .= $team_profits;

    echo $final_array;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:41:39.553

```
$string = "PNL testing 1,10,PNL testing 2,55,";
preg_match_all("/(PNL testing \d+),(\d+),/", $string, $result);
$teams = implode(",", $result[1]);
$amount = implode(",", $result[2]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:39:36.787

```
$s = "PNL testing 1,10,PNL testing 2,55";
$res = array();
$result = preg_match_all("{([\w\s\d]+),(\d+)}", $s, $res);
$teams  = join(', ', $res[1]); //will be "PNL testing 1, PNL testing 2"
$amount = join(', ', $res[2]); //will be "10, 55" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:07:34.580

不像 RegExp 那样花哨，但更明显：

```
$final_array = "PNL testing 1,10,PNL testing 2,55";

$final_array_array = explode(',', $final_array);

$teams = array();
$amount = array();
$index = 0;

foreach ($final_array_array as $item) {
    switch ($index) {
        case 0:
            $teams[] = $item;
            break;
        case 1:
            $amount[] = $item;
    }
    $index = 1-$index;
} 
```

# javascript - 在对象数组中循环

> ID：16218787
> 
> 赞同：0
> 
> 时间：2013-04-25T15:26:02.737
> 
> 标签：javascript, arrays, for-loop

我必须使用 for 循环遍历对象的对象。

我想在数组中间的索引处开始迭代 - 我不想从第一个元素开始。

```
for(var i=elementId in this._uiElementsData)
    {
        cont++;

        if(cont == 1)
        {
            var element = this._uiElementsData[i];              
            uno = element.uiElementIndex;
        }
        else if(cont == 2)
        {
            var element = this._uiElementsData[i];              
            dos = element.uiElementIndex;
        }
        else if(cont > 2)   break;      

    } 
```

我试过了，但它从数组的第一个元素开始......我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:29:09.577

你不能像这样从中途索引开始吗？

```
var halfWay = (this._uiElementsData.length / 2);

// if 6 elements in the array / 2 = 3, start at 3rd element
for(var i= halfWay; i < this._uiElementsData.length, i++)
{
    var index = (i + 1); // index is zero based for the array, so plus 1
    var element = this._uiElementsData[i]; // 3rd item in the array... 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:28:59.527

```
n = desired_start_point;
uno = this._uiElementsData[n].uiElementIndex;
dos = this._uiElementsData[n+1].uiElementIndex;
tres = .. 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:29:44.970

你真的不想要一个`for..in`循环，只是一个`for`循环

```
// start at index 1
for (var i = 1; i < this._uiElementsData.length; ++i) {
   // do stuff
} 
```

# c - How can i declare a file name in c language?

> ID：16218788
> 
> 赞同：0
> 
> 时间：2013-04-25T15:26:02.920
> 
> 标签：c

I have this c module:

```
#include "stdafx.h"
#include "targetver.h"

#include "libavutil\mathematics.h"
#include "libavcodec\avcodec.h"

FILE fileName; 
```

I did File fileName;

This i have init function:

```
void init(const char *filename)
{
    fileName = filename;
    avcodec_register_all();
    printf("Encode video file %s\n", fileName); 
```

So i did fileName = filename; The reason i did is that i have another function i did called start():

```
void start()
{
    /* open it */
    if (avcodec_open2(c, codec, NULL) < 0) {
        fprintf(stderr, "Could not open codec\n");
        exit(1);
    }
//    f = fopen(filename, "wb");
    errn = fopen_s(&f,fileName, "wb");

    if (!f) {
        fprintf(stderr, "Could not open %s\n", fileName);
        exit(1);
    }
} 
```

And in start i had filename but it didn't find it so i wanted to use fileName instead. But i'm getting now few errors:

On this line: fileName = filename; on the = symbol i'm getting red line error:

Error 1 error C2440: '=' : cannot convert from 'const char *' to 'FILE'

Then on this line: errn = fopen_s(&f,fileName, "wb") On the fileName i'm getting:

Error 2 error C2065: 'filename' : undeclared identifier

Same error number 2 on this line on the fileName: fprintf(stderr, "Could not open %s\n", fileName);

Then another error on the fileName = filename:

```
6   IntelliSense: no operator "=" matches these operands
        operand types are: FILE = const char * 
```

Last error: 7 IntelliSense: no suitable conversion function from "FILE" to "const char *" exists

All i wanted to do is to declare global fileName variable to use it in all places.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:28:24.693

`FILE`是一种类型，用于表示打开的文件（它包含文件句柄、文件中的位置等）。您不能将 a 存储`char *`在 type 的变量中`FILE`，因为它们是不同的类型。[在此处阅读有关 FILE 类型的信息](http://en.wikipedia.org/wiki/C_file_input/output#Member_types)。

您要做的是存储文件名。文件名是一个字符串。改用 a `const char *`。您的错误消息准确地告诉您：“无法将字符串转换为文件”。

```
Error 1 error C2440: '=' : cannot convert from 'const char *' to 'FILE' 
```

阅读这些错误并尝试理解它们的实际含义可以帮助您解决此类问题。如果编译器抱怨将一种类型转换为另一种类型，这清楚地表明您对值的类型或您尝试将其分配给的变量感到困惑。

# android - 使用随机 Q 和多个 A 创建 Android 测验

> ID：16218789
> 
> 赞同：1
> 
> 时间：2013-04-25T15:26:05.893
> 
> 标签：android, database, sqlite, random

我正在尝试制作一个简单的测验应用程序。我需要让问题以随机顺序弹出。现在，我对布局和按钮的操作没有任何问题，这个小测验的概念我也很熟悉，因为我在 VB 中使用 MySQL 完成了它，我对使用 sqlite 太不熟悉了。现在，我的问题是： 1\. 我可以用 MySql 创建一个 Android 应用吗？2\. 如果我不能，我如何制作/编码一个带有如下字段的 sqlite 数据库：

> 身份证 | 问题 | 选项A | 选项B | 对的问题

我会将 RightQuestion 中的字符串与单选按钮 id 匹配，以验证用户单击的每个答案。

我读过[这个](https://stackoverflow.com/questions/14957682/how-to-random-questions-in-the-quiz-using-json-array-in-android)、[这个](https://stackoverflow.com/questions/15194258/android-how-can-i-display-random-buttons-to-a-simple-quiz-game/15194323#15194323)和[这个](https://stackoverflow.com/questions/15205137/android-how-can-i-get-the-right-list-of-answers-in-a-quiz-game-with-random-ques)，但没有一个是我要找的。我需要一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:34:04.253

从我的角度来看，您可以通过 Web 服务器使用 mysql，您可以向服务器发送请求，服务器将与 mysql 交互。

另一方面，在 Android 中[使用 Android SQLite 数据库的 sqlite 编程只需要参考这里](http://www.vogella.com/articles/AndroidSQLite/article.html)

# php - PDO - bindParam 不工作

> ID：16218797
> 
> 赞同：4
> 
> 时间：2013-04-25T15:26:28.453
> 
> 标签：php, mysql, pdo

我正在创建一个 PDO 类以在我的项目中使用，但由于我是新手，我无法将参数绑定到准备好的 sql 语句，没有任何错误。这是要做到这一点的功能：

```
# ::bindParam
public static function bind()
{
    # get function arguments
    $args = func_get_args();

    # check for any arguments passed
    if (count($args) < 1)
    {
        return false;
    }

    foreach ($args as $params)
    {
        # named variables for convenience
        $parameter = $params[0];
        $variable = $params[1];
        $data_type = isset($params[2]) ? $params[2] : PDO::PARAM_STR;
        $length = isset($params[3]) ? $params[3] : null;

        # bind param to query
        Database::$statement->bindParam($parameter, $variable, $data_type, $length) or die('error');
    }
} 
```

和一个准备好的 sql 语句：

```
SELECT * FROM `users` WHERE `email` = :email AND `password` = :password LIMIT 1 
```

有人可以指出我正确的方向吗？此时查询不会产生任何错误。请注意，我假设问题就在这里，尽管它可能不是，因为我只使用了 bindParam() 和 prepare()。

**编辑**- 触发代码

```
 $email = $_POST['email'];
    $password = $_POST['password'];

    $password = hash('sha256', $password);

    $this->db->prepare('SELECT * FROM `users` WHERE `email` = :email AND `password` = :password LIMIT 1');
    $this->db->bind(
        array(':email', $email),
        array(':password', $password)
    );
    $status = $this->db->execute();

    if ($status)
    {
        $result = $this->db->fetch('assoc');

        $this->template->user = $result;
    }
    else
    {
        $this->template->user = false;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T16:04:03.913

正如@YourCommonSense 已经提到的那样，原始 PDO 接口更清晰一些，但是问题可能是由于使用 function[`PDOStatement::bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)而不是[`PDOStatement::bindValue()`](http://www.php.net/manual/en/pdostatement.bindvalue.php).

这两者之间的区别在于，第一个采用[变量引用](http://php.net/manual/en/language.references.php)，它在循环中不断被覆盖`foreach`，而最后一个采用变量的实际值。

* * *

如果你正在寻找一些更友好的数据库连接接口，你为什么不试试[Doctrine DBAL](http://www.doctrine-project.org/projects/dbal.html)呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T15:40:18.043

去掉这个功能就好了，PDO已经有了

```
$email = $_POST['email'];
$password = $_POST['password'];

$password = hash('sha256', $password);

$this->db->prepare('SELECT * FROM `users` WHERE `email` = :email AND `password` = :password LIMIT 1');
$stmt = $this->db->execute(array(':email'=> $email,':password' => $password));
$this->template->user = $this->db->fetch(); 
```

这就是您需要的*所有*代码（假设您的类的执行是常规 PDO 执行）

或者，在原始 PDO 中制作：

```
$email = $_POST['email'];
$password = $_POST['password'];
$password = hash('sha256', $password);

$sql  = 'SELECT * FROM users WHERE email = ? AND password = ? LIMIT 1';
$stmt = $this->db->prepare($sql);
$stmt->execute(array($email, $password));
$this->template->user = $stmt->fetch(); 
```

因此，您的课程似乎需要比原始 PDO 更多的代码。你确定你需要这门课吗？

# javascript - Jquery SlideToggle, prevent toggle in particular circumstance

> ID：16218798
> 
> 赞同：0
> 
> 时间：2013-04-25T15:26:29.157
> 
> 标签：javascript, jquery, accordion, slidetoggle

So I have an H3 that has a grey background rectangle. When you click anywhere in that grey background, a particular div performs a slideToggle(). This works fine.

Now, Inside that H3 I also have a link that calls a jquery function that does something. That works fine too.

But my issue is this, since the link is inside the H3, after its functions executes, it also executes the slideToggle() because I clicked somewhere inside the H3.

So the question becomes, How do I prevent the slideToggle() from happening when I click on the link. I imagine I can use a flag but I'm hoping there is a more elegant way.

Any help would be appreciated.

**The HTML code**

```
<h3 id="data_id"> 
    <a href="#" id="random_id" >Random</a>   
</h3>

<div id="data_div_id">
    // The data here is irrelevant to the issue at hand
</div> 
```

**The Jquery Code**

```
$('#data_id').click(function() {   
    $('#data_div_id').slideToggle('slow');      
}); 

$('#random_id').click(function(event) {
    // it does something irrelevant to the issue at hand
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:27:50.353

您可以使用**[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)**来阻止事件冒泡。

[**jsFiddle在这里。**](http://jsfiddle.net/GEkr5/)

```
$('#data_id').click(function() {   
    $('#data_div_id').slideToggle('slow');      
}); 

$('#random_id').click(function(event) {
    event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:29:22.497

尝试跳过您不希望事件发生的元素：

```
$('#data_id').click(function(event) {   
    if (event.target !== this)
        return;
    $('#data_div_id').slideToggle('slow');      
}); 
```

像这样只有#data_id会触发切换，因为你的h3在那个div中，当你点击它们时它也会被执行，但只有一次来自实际点击容器

# vb.net - Compare String with Strings in array

> ID：16218804
> 
> 赞同：0
> 
> 时间：2013-04-25T15:26:45.380
> 
> 标签：vb.net

I'm trying to use this script to compare a users input from a text box with the 22 correct words. I'm not looking for multiple cases, such as `VICE` is in `ADVICE` so it would be 2 values; **I want it to have the string values to accept only equal values**.

At the moment, it is only recognizing the first word `TIED` and displays a message box "found", but it doesn't not recognize any other word in the list.

I am writing in visual basic script

```
Private Sub btnSubmit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSubmit.Click
    Dim StrCorrect() As String = {"TIED", "VICE", "ICED", "DIVE", "DIET", "DATE", "CITE", "CAVE", "AIDE", "ACED", "CITED", "ACTED", "VACATE", "CATTIE", "ADVICE", "AVIATE", "ACTIVE", "VACATED", "DICTATE", "AVIATED", "ACTIVATE", "ACTIVATED"}
    Dim Find As String = userinput
    For Each Str As String In StrCorrect
        If StrComp(Str, userinput, CompareMethod.Text).ToString = 0 Then
            MsgBox("Found" & userinput)
            Return
        Else : MsgBox("incorrect word")
            Return
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:46:30.640

The problem is that your loop is explicitly returning if the first item isn't a match. You only know you don't have a match if your loop completes without finding one, so try something like this instead:

```
For Each Str As String In StrCorrect
    If StrComp(Str, userinput, CompareMethod.Text).ToString = 0 Then
        MsgBox("Found" & userinput)
        Return
    End If
Next

MsgBox("incorrect word") 
```

This will only display "incorrect word" if *all* of the items in your list fail the first test.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:46:46.960

Try like below, It will help you...

**Sample :**

```
Dim result As String() = Array.FindAll(StrCorrect, Function(s) s.Equals(Find))
If (result.Length > 0) Then
  MsgBox("Found : " & userinput)
Else
  MsgBox("incorrect word")
End If 
```

**Full Code :**

```
Dim StrCorrect() As String = {"TIED", "VICE", "ICED", "DIVE", "DIET", "DATE", "CITE", "CAVE", "AIDE", "ACED", "CITED", "ACTED", "VACATE", "CATTIE", "ADVICE", "AVIATE", "ACTIVE", "VACATED", "DICTATE", "AVIATED", "ACTIVATE", "ACTIVATED"}
Dim Find As String = userinput
Dim result As String() = Array.FindAll(StrCorrect, Function(s) s.Equals(Find))
If (result.Length > 0) Then
  MsgBox("Found : " & userinput)
Else
  MsgBox("incorrect word")
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:39:45.807

为什么`STRCOMP`？如果您想要完全匹配，为什么不直接比较呢？

```
 For Each Str As String In StrCorrect
        If Str = Find Then
            MessageBox.Show("Found :" & Str)
        End If
    Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:40:17.140

我会使用 for 循环，比如

```
For i As Integer = 0 To StrCorrect.Length - 1
        If StrCorrect(i) = Find Then
            MsgBox("Found" & Find)
            Return
        'End if

        'The else statement simply alerting that it didnt find the right word on this iteration
        'The else can be removed if you dont want this alert
        Else
            MsgBox("incorrect word")
            'Return
        End If
Next 
```

# eclipse - Eclipse SVN 提交未更新的版本？

> ID：16218809
> 
> 赞同：0
> 
> 时间：2013-04-25T15:26:56.270
> 
> 标签：eclipse, svn

我正在尝试提交一个过时版本的 java 项目，但它不会让我不更新它。我不想更新它，因为更新的版本都搞砸了，所以我检查了一个旧版本......有没有办法在 svn 上创建一个新项目？我无法让它显示在我们的存储库中。当我右键单击项目然后选择团队时，我应该选择什么选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:43:59.643

将您的工作副本分支到主存储库，因此您将有两个工作副本可供参考。您将可以访问这两个版本，以便您可以执行必要的操作...[参考链接](http://codefez.com/creating-projects-in-subversion-trunk-tags-branches/) 请参阅分支、标签和主干...。

# sql - Creating a Stored Procedure

> ID：16218814
> 
> 赞同：3
> 
> 时间：2013-04-25T15:27:09.813
> 
> 标签：sql, sql-server, tsql, sql-server-2008, stored-procedures

I am trying to create a stored procedure that will allow me to update the ActualArrivalDate and ActualDepartureDate in a TripStop table where StopTypeCode = Drop in the TripStopOrder table.

```
Create Proc spUpdateTable
@OrderID int, @ArrivalDate datetime, @DepartureDate datetime

As

Begin 

   Begin Transaction
   Select * From dbo.TripStopOrder
   Join dbo.TripStop ON dbo.TripStopOrder.TripStopID = dbo.TripStop.TripStopID
   Where OrderID = ''and StopTypeCode ='Drop' 
```

Once I find this record I need to grab the TripStopId and pass it into the Update statement. Not sure how to this...can I use a temp table then run another Select statement to pick up the TripStopID?

```
 Update dbo.TripStop SET ArrivalDate='',DepartureDate=''
   Where TripStopID = ''

End
Commit 
```

Any ideas or suggestions would be greatly appreciated. ~Newbie~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:30:48.887

您可以将值分配给变量，例如`@TripStopId`：

```
DECLARE @TripStopId INT

Select @TripStopid = TripStopId
From dbo.TripStopOrder
Join dbo.TripStop ON dbo.TripStopOrder.TripStopID = dbo.TripStop.TripStopID
Where OrderID = ''and StopTypeCode ='Drop' 
```

然后你可以在你的`UPDATE`声明中使用它。

```
Update dbo.TripStop SET ArrivalDate='',DepartureDate=''
Where TripStopID = @TripStopId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:32:32.137

不要执行 SELECT 然后执行 UPDATE，只需更改 UPDATE 语句中的 WHERE 子句：

```
WHERE TripStopID = (SELECT T.TripStopID FROM TripStopOrder O
INNER JOIN TripStop T ON O.TripStopID = T.TripStopID
WHERE OrderID = @OrderID AND StopTypeCode = 'Drop') 
```

# android - 有什么方法可以在 4.0 设备上使用 fontFamily 吗？

> ID：16218832
> 
> 赞同：0
> 
> 时间：2013-04-25T15:28:10.260
> 
> 标签：android, android-layout

`android:fontFamily`应用于大于 16 的设备。这意味着 4.1 具有此属性，但例如 4.0.4 没有。所以我正在尝试使用

```
android:fontFamily="sans-serif-light" 
```

获得全息字体。它在 4.2 中很酷，但在 4.0.4 中不行，它显示了一些默认字体。

反正有没有通过xml设置它？还是我必须通过代码设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:59:31.360

最简单的方法是在您的代码上执行此操作！将字体放在您的资产文件夹中，在您的文本视图中创建并设置它：

```
TextView text = (TextView) findViewById(R.id.textview03);
Typeface tf = Typeface.createFromAsset(getAssets(), "Molot.otf");
text.setTypeface(tf); 
```

可以在 xml 上执行此操作。想起来要困难得多。您必须扩展 TextView 组件并在您的 xml 上使用它，而不是典型的 android TextView。

查看[此答案](https://stackoverflow.com/questions/2376250/custom-fonts-and-xml-layouts-android)以获取有关如何实现此目的的更多详细信息。

# javascript - 如何修改 node.js 流

> ID：16218833
> 
> 赞同：4
> 
> 时间：2013-04-25T15:28:10.390
> 
> 标签：javascript, node.js, amazon-s3, stream

我正在从 S3 流式传输一个 xml 文件。我需要为 sphinx 搜索引擎构建一个具有不同结构的新 xml 文件。我已经从 S3 流式传输文件，将其通过管道传输到我的 SAX 解析器，但现在我需要弄清楚如何对流进行修改（在 SAX 解析器之后）并上传到 S3。

```
parser.on('startElement', function(name, attrs) {
    // Do something
}); 
```

我发现似乎是一个很棒的 S3 库，它名为[knox](https://github.com/LearnBoost/knox)，所以我目前正在使用该库。我没有被困在这个图书馆上，只是我发现它似乎很不错。在示例中，他们必须将数据流式传输到 S3 的代码仅来自 HTTP 请求。我对流比较陌生，因为我有 PHP 背景。

诺克斯示例流：

```
http.get('http://google.com/doodle.png', function(res){
  var headers = {
      'Content-Length': res.headers['content-length']
    , 'Content-Type': res.headers['content-type']
  };
  client.putStream(res, '/doodle.png', headers, function(err, res){
    // Logic
  });
}); 
```

我想我需要在这方面做点什么。

```
parser.on('startElement', function(name, attrs) {

  var headers = {
      'Content-Length': res.headers['content-length']
    , 'Content-Type': res.headers['content-type']
  };
  client.putStream(res, '/doodle.png', headers, function(err, res){
    // Logic
  });

}); 
```

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T21:25:14.190

[对 Node 新流的](http://calv.info/an-introduction-to-nodes-new-streams/)讨论明确谈到了从 S3 转换流。

*注意：这是指在 Node 0.10.x 中实现的流*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T08:25:48.550

[https://www.npmjs.org/package/through](https://www.npmjs.org/package/through)

这个模块会做你需要的。

# wcf - 未调用自定义 UserNameSecurityTokenHandler.ValidateToken。如何注册和调用令牌处理程序？

> ID：16218834
> 
> 赞同：1
> 
> 时间：2013-04-25T15:28:10.400
> 
> 标签：wcf, wif

基于 MSDN 文档，我创建了一个自定义 UserNameSecurityTokenHandler 并放入 CanValidateToken 覆盖和 ValidateToken 覆盖。我以为我已将 WCF Web 服务配置为使用自定义处理程序，但 ValdiateToken 永远不会被调用。这是自定义令牌处理程序：

```
public class CustomUserNameSecurityTokenHandler : UserNameSecurityTokenHandler 
{
    public override bool CanValidateToken
    {
        get { return true; }
    }

    public override ReadOnlyCollection<ClaimsIdentity> ValidateToken(SecurityToken token)
    {
        System.Diagnostics.Debugger.Launch();

        if (token == null)
        {
            throw new ArgumentNullException();
        }
        var userNameToken = token as UserNameSecurityToken;
        if (userNameToken == null)
        {
            throw new SecurityTokenException("Invalid token");
        }

        if ( userNameToken.UserName != userNameToken.Password )
        {
            throw new SecurityTokenException("Invalid username or password.");
        }
        var claims = new List<Claim>
            {
                new Claim(System.IdentityModel.Claims.ClaimTypes.Name, userNameToken.UserName),
                new Claim(
                    "http://schemas.microsoft.com/ws/2008/06/identity/claims/ClaimTypes.AuthenticationInstant",
                    XmlConvert.ToString(DateTime.UtcNow, "yyyy-MM-ddTHH:mm:ss.fffZ"),
                    "http://www.w3.org/2001/XMLSchema#dateTime")
            };

        return new ReadOnlyCollection<ClaimsIdentity>(new List<ClaimsIdentity> {new ClaimsIdentity(claims, "Password")});
    }
} 
```

调试器不启动。当我调用它时，客户端代码总是失败。这是该站点的 WCF web.config 条目：

```
 <configSections>
 <section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
</configSections>
<appSettings>
  <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings>
<system.web>
  <compilation debug="true" targetFramework="4.5" />
  <httpRuntime targetFramework="4.5"/>
</system.web>
<system.serviceModel>
  <services>
    <service name="WcfUserName.Service1">
      <endpoint address="Service1.svc" binding="netHttpBinding"
        contract="WcfUserName.IService1" />
      <host>
        <baseAddresses>
          <add baseAddress="https://localhost/WcfUserName" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <bindings>
    <netHttpBinding>
      <binding>
        <security mode="TransportWithMessageCredential">
          <message clientCredentialType="UserName" />
        </security>
      </binding>
    </netHttpBinding>
  </bindings>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceCredentials useIdentityConfiguration="true" />
        <serviceAuthorization principalPermissionMode="Always"/>
        <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
     </serviceBehaviors>
  </behaviors>
 <protocolMapping>
      <add binding="netHttpBinding" scheme="https" />
 </protocolMapping>    
 <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
 </system.serviceModel>
 <system.webServer>
 <modules runAllManagedModulesForAllRequests="true"/>
 <directoryBrowse enabled="true"/>
 </system.webServer>
<system.identityModel>
  <identityConfiguration name="identconfig">
    <securityTokenHandlers>
      <remove type="System.IdentityModel.Tokens.WindowsUserNameSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <add type="WcfUserName.Security.CustomUserNameSecurityTokenHandler, WcfUserName"/>
    </securityTokenHandlers>
  </identityConfiguration>
 </system.identityModel> 
```

我认为我的配置有问题，但不知道是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:29:04.907

AFAIK，您需要在 web.config 中正确配置它。这意味着您需要添加您的 securitytokenhandler，但还要删除默认的用户名密码处理程序。因此，您需要 <remove> 以前的处理程序，或者重新开始并 <clear> 配置文件中的 securitytokenhandlers 集合。

# php - 标头后的返回值

> ID：16218835
> 
> 赞同：0
> 
> 时间：2013-04-25T15:28:10.873
> 
> 标签：php

我使用标题来允许用户在单击按钮时下载文件。下面的代码在一个函数中。

```
header('Content-Disposition: attachment;
filename='.date("Ymd",$date).".removethis");

echo $data;

exit();

return true; 
```

但是我在调​​用函数时没有捕捉到返回值。是否有可能有一个 exit() 却有一个函数的返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:30:17.327

不。

您可以返回 true，然后在调用该函数的代码中调用 exit()，也许？

```
$val = theFunction($data);
if ($val) {
    exit;
} else {
    // error or something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:29:55.603

该函数[`exit()`](http://www.php.net/manual/en/function.exit.php)将立即终止程序。`exit()`所以在;之后不会执行任何代码。

```
exit(); // program terminates
// not executed
return true; 
```

# ruby-on-rails - "\xC2" to UTF-8 in conversion from ASCII-8BIT to UTF-8

> ID：16218838
> 
> 赞同：5
> 
> 时间：2013-04-25T15:28:35.070
> 
> 标签：ruby-on-rails, encoding, haml, rubinius

I have a rails project that runs fine with MRI 1.9.3\. When I try to run with Rubinius I get this error in `app/views/layouts/application.html.haml`:

> "\xC2" to UTF-8 in conversion from ASCII-8BIT to UTF-8

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T15:28:35.070

事实证明该页面有一个无效字符（一个interpunct '·'），我通过以下代码发现了它（归功于[this gist](https://gist.github.com/jeregrine/3912739) and [this question](https://stackoverflow.com/q/13003287/512507)）：

```
lines = IO.readlines("app/views/layouts/application.html.haml").map do |line|
  line.force_encoding('ASCII-8BIT').encode('UTF-8', :invalid => :replace, :undef => :replace, :replace => '?')
end

File.open("app/views/layouts/application.html.haml", "w") do |file|
  file.puts(lines)
end 
```

运行这段代码后，我可以用一个简单的方法找到有问题的字符，并将代码移动到顶部`git diff`的帮助文件中。`# encoding: utf-8`我不确定为什么 MRI 不会失败，但它应该因为我没有指定 haml 文件的编码。

# java - goodFeatureToTrack 中使用的输入 Mat

> ID：16218840
> 
> 赞同：0
> 
> 时间：2013-04-25T15:28:35.433
> 
> 标签：java, opencv

我正在尝试用`goodFeatureToTrack`java中的函数检测特征。它总是在那里崩溃。这是我的代码：

```
Mat eyeRegion = detectCascade();//i used here cascadeclassifier to detect eye region
if(eyeRegion.empty())
    Log.i("face_calibrated","eye region is empty"); 
```

我确保我的区域不是空的。

```
if(eyeRegion.channels()==1) 
{
  //i convert my mat to rgb to detectfeatures
    Imgproc.cvtColor(eyeRegion, eyeRegion, Imgproc.COLOR_GRAY2RGB);
    Log.i("face_calibrated","eyeRegion is channel1");
} 
```

这是问题所在：

```
Imgproc.goodFeaturesToTrack(eyeRegion,cornersA,4,0.01,5.0,null,3,false,0.04); 
```

我已宣布`cornersA`为全球`MatOfPoint`

```
public MatOfPoint cornersA = new MatOfPoint(); 
```

在这个函数中应该使用什么类型的输入垫（RGB 或 GREY）？

# php - PHP SOAP webservice with NuSOAP gives no result if WSDL is configured

> ID：16218843
> 
> 赞同：0
> 
> 时间：2013-04-25T15:29:04.137
> 
> 标签：php, web-services, soap, nusoap

I have a php soap webservice which I've created with using NuSOAP. I use the file 'test.php' to test it in the browser as '[http://www.mydowmain.com:8080/webservice/5/test.php](http://www.mydowmain.com:8080/webservice/5/test.php)'.

**My code:**

*webservice.php*

```
<?php
 require_once('../lib/nusoap.php');

 $server = new nusoap_server();

 $server ->configureWSDL('server', 'urn:server'); //this line causes to 'no result'
 $server ->wsdl->schemaTargetNamespace = 'urn:server'; //this line causes to 'no result'
 $server -> register('getData');

 function getData ()
 {
   $items = array(array("item1"),array("item2"));
   return $items;
}

 $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
 $server ->service($HTTP_RAW_POST_DATA);
?> 
```

*test.php*

```
<?php
  require_once('../lib/nusoap.php');
  $client = new nusoap_client("http://www.mydowmain.com:8080/webservice/5/webservice.php?wsdl");

  $result = $client ->call('getData');

  print_r($result);
?> 
```

**Problem:**

If I remove these lines

```
$server ->configureWSDL('server', 'urn:server'); 
$server ->wsdl->schemaTargetNamespace = 'urn:server'; 
```

it shows me the result fine. Otherwise I get a blank screen, get nothing. But I really need to configure the WSDL.

How can I edit the *webservice.php* so that the WSDL will be configured and I can get the result array on the *test.php* ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-05T09:30:36.370

要查看有关客户端的错误信息，您可以添加以下内容：

```
$result = $client->call('getData'); 

$err = $client->getError();
if ($err) {
// Display the error
echo '<h2>Error</h2>' . $err;
// At this point, you know the call that follows will fail
        exit();
}
else 
{ 
echo $result; 
} 
```

之后，在 server.php 中，可能寄存器需要更多关于返回值的信息。

```
$server->register('getData', 
  array("response"=>"xsd:string"),
    'http://www.mydowmain.com:8080'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T08:06:50.617

尝试改变这个：

```
$server ->wsdl->schemaTargetNamespace = 'urn:server'; 
```

进入这个：

```
 $server ->wsdl->schemaTargetNamespace = $namespace; 
```

并在其上定义 $namespace 。这对我有用。

这是我的 NuSOAP 网络服务代码：

```
require_once("lib/nusoap.php");
$namespace = "http://localhost:8080/Testservice/service.php?wsdl";
$server = new soap_server();
$server->configureWSDL("TestService");
$server->wsdl->schemaTargetNamespace = $namespace; 
```

# c# - Collection modified during foreach error

> ID：16218851
> 
> 赞同：0
> 
> 时间：2013-04-25T15:29:21.203
> 
> 标签：c#, .net, collections, foreach, iterator

I know you can't modify a collection during a `foreach`, but I should be able to set variable values of the underlying iterator through it. For some reason the method below, every time it executes is giving be the "Collection was modified..." error:

```
private static IInstrument AdjustForSimpleInstrument(DateTime valueDate, IInstrument temp)
{
    var instr = temp;
    foreach (var component in instr.Components)
    {
        component.Schedule.ScheduleRows.RemoveAll(
                sr =>
                ((sr.Payment != null) && (sr.Payment.PaymentDate != null) &&
                 (sr.Payment.PaymentDate.AdjustedDate.Date <= valueDate.Date)));

        if (
            !component.ScheduleInputs.ScheduleType.In(ComponentType.Floating, ComponentType.FloatingLeg,
                                                      ComponentType.Cap, ComponentType.Floor)) continue;

        foreach (var row in component.Schedule.ScheduleRows)
        {
            var clearRate = false;
            if (row.Payment.CompoundingPeriods != null)
            {
                if (row.Payment.CompoundingPeriods.Count > 0)
                {
                    foreach (
                        var period in
                            row.Payment.CompoundingPeriods.Where(
                                period => ((FloatingRate)period.Rate).ResetDate.FixingDate > valueDate))
                    {
                        period.Rate.IndexRate = null;
                        clearRate = true;
                    }
                }
            }
            else if (row.Payment.PaymentRate is FloatingRate)
            {
                if (((FloatingRate)row.Payment.PaymentRate).ResetDate.FixingDate > valueDate)
                    clearRate = true;
            }
            else if (row.Payment.PaymentRate is MultipleResetRate)
            {
                if (
                    ((MultipleResetRate)row.Payment.PaymentRate).ChildRates.Any(
                        rate => rate.ResetDate.FixingDate > valueDate))
                {
                    clearRate = true;
                }
            }
            if (clearRate)
            {
                row.Payment.PaymentRate.IndexRate = null;
            }
        }
    }
    return temp;
} 
```

Am I just missing something easy here? The loop that is causing the exception is the second, this one:

```
foreach (var row in component.Schedule.ScheduleRows) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:57:27.650

我怀疑这不是 .NET 框架的东西，所以我假设该行连接到它的集合。修改行的内容，可能会改变它在集合中的位置，从而修改集合，这在某些 foreach 操作中是不允许的。

解决方案很简单：创建集合的副本（通过使用 LINQ）。

```
foreach (var row in component.Schedule.ScheduleRows.ToList())
    ... 
```

# ios - 这个日期字符串是什么格式的？

> ID：16218855
> 
> 赞同：5
> 
> 时间：2013-04-25T15:29:26.760
> 
> 标签：ios, nsdateformatter, date-format, date-formatting, iso8601

我试图将一堆 NSStrings 转换为 NSDate 对象。这是一个示例字符串：

```
2013-04-25T15:51:30.427+1.00 
```

但我无法弄清楚它是什么格式，到目前为止我有（问号是我被难住的位）：

```
yyyy-MM-ddTHH:mm:ss????zzz 
```

我遇到的主要问题是“.427”部分，但如果我在其他地方犯了错误，请告诉我:)

有没有人有任何想法？或者可以指出所有可能的日期格式说明符的列表？我发现了这个：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)这很有用，但它似乎没有我坚持的“.427”部分的任何说明符。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T15:43:02.947

正确的格式是`yyyy-MM-dd'T'HH:mm:ss.SSSZZZZZ`.

请参阅[Unicode 日期格式模式](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)。

此外，时区格式`ZZZZZ`的`+00:00`格式已添加到 iOS 6 中，并且在 iOS 5 或更早版本下不受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:37:04.007

根据[W3 ，它是 ISO 8601 指定的有效日期格式](http://www.w3.org/TR/NOTE-datetime)

> 格式如下。此处显示的组件必须完全存在，并带有这个标点符号。请注意，“T”按字面意思出现在字符串中，表示时间元素的开始，如 ISO 8601 中所指定。
> 
> 年：YYYY（例如 1997） 年和月：YYYY-MM（例如 1997-07） 完整日期：YYYY-MM-DD（例如 1997-07-16） 完整日期加上小时和分钟：YYYY-MM-DDThh:mmTZD （例如 1997-07-16T19:20+01:00）完整日期加上小时、分钟和秒：YYYY-MM-DDThh:mm:ssTZD（例如 1997-07-16T19:20:30+01:00）完整日期加上小时、分钟、秒和秒的小数部分 YYYY-MM-DDThh:mm:ss.sTZD（例如 1997-07-16T19:20:30.45+01:00）
> 
> 在哪里：
> 
> ```
>  YYYY = four-digit year
>  MM   = two-digit month (01=January, etc.)
>  DD   = two-digit day of month (01 through 31)
>  hh   = two digits of hour (00 through 23) (am/pm NOT allowed)
>  mm   = two digits of minute (00 through 59)
>  ss   = two digits of second (00 through 59)
>  s    = one or more digits representing a decimal fraction of a second
>  TZD  = time zone designator (Z or +hh:mm or -hh:mm) 
> ```

在您的情况下，日期具有毫秒精度，请尝试添加`.sss`到格式

# c# - How to update two tables with one dataset?

> ID：16218856
> 
> 赞同：0
> 
> 时间：2013-04-25T15:29:27.767
> 
> 标签：c#, sql, save, sql-update

I have a dataset with data from two SQL tables in.

How can I update both tables with the updated dataset? (since join does not work)

```
 da = new SqlDataAdapter("select * from xxxx join.....", conn);
             builderForTable1 = new SqlCommandBuilder(da);
             da.Update(dataSetEmp, "Table"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:41:25.157

如果您提供给数据适配器的查询返回多个结果集，则 SQLDataAdapter.Fill() 方法可以执行此操作。

```
var da = new SqlDataAdapter("select * from customers; select * from orders;", conn);
da.Fill(myDataset);

var customersDataTable = myDataset.Tables[0];
var ordersDataTable = myDataset.Tables[1]; 
```

然后，您可以根据需要添加自己的 DataRelations。

```
myDataset.Relations.Add(new DataRelation(
    "CustomerOrders",
    customersDataTable.Columns["CustomerID"],
    ordersDataTable.Columns["CustomerID"]
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-21T23:36:56.400

```
Public Shared Function GetRecords(ByRef CNobj As System.Data.SqlClient.SqlConnection,
                                   ByRef RSobj As System.Data.DataSet,
                                   ByVal SQLquery As String,
                                   ByVal TableName() As String,
                                   Optional ByVal PrimKeys() As String = Nothing,
                                   Optional ByRef adapter As SqlDataAdapter = Nothing) As Integer

    On Error Resume Next
    Dim DataOkay As Integer = 0                             '[Set to negative if data bad]

    Dim suppliersAdapter As SqlDataAdapter = New SqlDataAdapter()

    'Create connection object, won't create if already exists
    If ConnectToDB(CNobj, False) = False Then
        'error creating object, Session("ErrorMsg") set by called code
        Return -1
    End If

    ' Open the connection.
    If CNobj.State = ConnectionState.Closed Then
        CNobj.Open()
    End If

    ' Create a SqlCommand to retrieve Suppliers data.
    Dim suppliersCommand As SqlCommand = New SqlCommand(SQLquery, CNobj)

    suppliersCommand.CommandType = CommandType.Text

    ' Set the SqlDataAdapter's SelectCommand.
    suppliersAdapter.SelectCommand = suppliersCommand

    ' Fill the DataSet.
    RSobj = New DataSet()
    suppliersAdapter.Fill(RSobj)
    If (Err.Number <> 0) Then
        DataOkay = -1
        _contexts.Session("ErrorMsg") = "Error reading records: " +
            DelDoubleQuotesInString(Err.Description)
        Call Err.Clear()
    ElseIf (RSobj.Tables.Count = 0) Then
        DataOkay = -2
        _contexts.Session("ErrorMsg") = "No tables read reading records for sql=" + SQLquery
    Else
        ' A table mapping names the DataTables.
        Dim IDX As Integer
        For IDX = 0 To TableName.Count - 1
            RSobj.Tables(IDX).TableName = TableName(IDX)
            If PrimKeys IsNot Nothing Then
                Dim primstr = PrimKeys(IDX)
                Dim primarr = Split(primstr, ",")
                Dim primcol(primarr.Count) As DataColumn
                Dim pidx As Integer
                For pidx = 0 To primarr.Count
                    primcol(pidx) = RSobj.Tables(IDX).Columns.Item(primarr(pidx))
                Next
                RSobj.Tables(IDX).PrimaryKey = primcol
            End If

        Next
        adapter = suppliersAdapter
    End If
    Return DataOkay
End Function

  Public Shared Function UpdateDB(ByRef dset As System.Data.DataSet, ByVal adapter As SqlDataAdapter)
    If dset.HasChanges = False Then
        Return True
    End If
    ' has multiple tables, select's separated by ;
    Dim SelectQry As String = adapter.SelectCommand.CommandText
    Dim commands() As String = Split(SelectQry, ";")
    Dim idx As Integer = 0

    For Each Table As System.Data.DataTable In dset.Tables
        'Connection object is global in shared ASP.NET module
        If CNobj.State = ConnectionState.Closed Then
            CNobj.Open()
        End If
        'Change select for table being updated.
        adapter.SelectCommand.CommandText = commands(idx)

        Dim cb As SqlCommandBuilder
        cb = New SqlCommandBuilder(adapter)

        adapter.InsertCommand = cb.GetInsertCommand(True)
        adapter.UpdateCommand = cb.GetUpdateCommand(True)
        adapter.DeleteCommand = cb.GetDeleteCommand(True)

        Try

            adapter.AcceptChangesDuringUpdate = True
            'force order delete, update, insert
            adapter.Update(Table.Select(Nothing, Nothing, DataViewRowState.Deleted))
            Table.AcceptChanges() 'Have to do after delete!
            adapter.Update(Table.Select(Nothing, Nothing, DataViewRowState.ModifiedCurrent))
            adapter.Update(Table.Select(Nothing, Nothing, DataViewRowState.Added))
        Catch
            HttpContext.Current.Session("ErrorMsg") = "Error saving data to DB: " + Err.Description
            adapter.SelectCommand.CommandText = SelectQry
            Return False
        End Try
        idx += 1
        cb.Dispose()
    Next
    'Put original select back for next call
    adapter.SelectCommand.CommandText = SelectQry
    Return True
End Function 
```

我包括了我正在使用的两个例程。如果使用带分号的 select 调用，第一个例程将获得多个表。我传入表名数组以分配给每个表。如果数据集要更新到服务器，那么我还将传入主键和对适配器的引用以传递给更新调用。

我知道它是在 VB 而不是 C# 中，但我正在转换为 ASP.NET 的经典 ASP 已经在 VB 中，我不想在它之上移植到 C#。

更新代码为每个表的每个更新调用拆分选择字符串。

错误 - 上述代码不适用于所有表。对于一张表，如果我不接受更改，它将不会更新 - 出现并发错误。在另一张表上，它指出我在调用 acceptchanges 之前修改了 13 行 - 但在调用后变为零，因此没有更新记录。我的猜测是，为一个出现并发错误的表生成的更新 SQL 是废话，不应该调用 acceptchanges。当我解决这个问题时，我会更新帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:45:20.147

也许您可以使用事务？

```
SqlTransaction tr = conn.BeginTransaction();
    da = new SqlDataAdapter("select * from xxxx join.....", conn);
    builderForTable1 = new SqlCommandBuilder(da);
    da.Update(dataSetEmp, "Table");
    // ...
tr.Commit(); 
```

参考：

*   [SqlTransaction](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)

# jquery - 在 JSON 中循环字符串

> ID：16218857
> 
> 赞同：2
> 
> 时间：2013-04-25T15:29:28.233
> 
> 标签：jquery

我的 JSON 看起来像这样：

```
{"RoomNoList":[{"RoomNo":"ML100"},{"RoomNo":"ML100"},{"RoomNo":"ML100"},{"RoomNo":"ML100"}]} 
```

我想遍历字符串并获取`RoomNo`值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:31:04.990

这应该在现代浏览器中完成这项工作：

```
var numbers = obj.roomNoList.map(function(item) {
    return item.RoomNo;
}; 
```

使用 jQuery：

```
var numbers = $.map(obj.roomNoList, function(item) {
    return item.RoomNo;
}); 
```

也可以看看：[`jQuery.map()`](http://api.jquery.com/jQuery.map/) [`Array.map()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/map)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:31:37.850

你可以这样做。

```
for(i=0; objJson.RoomNoList.length; i++)
    alert(objJson.RoomNoList[i].RoomNo) 
```

# java - How to list multi-dimensional arrays values in a loop

> ID：16218858
> 
> 赞同：1
> 
> 时间：2013-04-25T15:29:37.663
> 
> 标签：java, arrays, loops

So first off, sorry if this appears if I am asking you to do my homework...just me you are not, this question only involves one tiny little aspect of the entire program that is in the making...In other words this isn't close to be finished.

I would ask my teacher, but its an online course. So then I would ask my friends for advice, but I'm the only kid in my school taking this computer science course. (It's a small school)

Anyways this program when completed, will allow a teacher to input a list of students of four grades per student. Eventually I'll add some code that allows the teacher to find the averages of each student etc etc.

However at the moment I'm only in the process of listing students. Where there is a small problem...

Every time I list a student (their last and first name) along with the four test scores, it all outputs nicely. However when I go to output the second student with a different name and different test scores, it outs the different name...but the test scores of the previous student.

Ex.

John Smith: 67 68 57 87

Jane Doe: 67 68 57 87 (even though it should Jane Doe: 54 68 75 91)

And clearly that is a problem...since all students do not have the exact same grades...ever..

Okay code below...

```
public class StudentGradesView extends FrameView {
    int [][] aryStudent = new int [15][4]; //[15] being number of students and [4] being test scores...
    String[] studentNames = new String[15]; // I'm thinking this is might unnecessary now...but we'll see
    int numOfStudents = 0; //starting number of students at 0....

    int marks = 0;

    int test1;
    int test2;
    int test3;
    int test4;

    public StudentGradesView(SingleFrameApplication app) {
        //unimportant...just stuff added for GUI..
    }

    private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {
        //test1Field through test4Field are the test scores....
        aryStudent[numOfStudents][0] = Integer.parseInt(test1Field.getText());
        aryStudent[numOfStudents][1] = Integer.parseInt(test2Field.getText());
        aryStudent[numOfStudents][2] = Integer.parseInt(test3Field.getText());
        aryStudent[numOfStudents][3] = Integer.parseInt(test4Field.getText());

        StringBuilder sb = new StringBuilder();

        for (int x=0; x < numOfStudents ; x++) {
            sb.append(firstNameField.getText() + " " + lastNameField.getText());
            for (int y=0; y < 4; y++) {
                sb.append(" " +aryStudent[x][y]);
            }
            sb.append("\n");
        }
        studentListField.setText(sb.toString());
        numOfStudents ++;
    }                                        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:45:40.393

First of all, you want

```
for (int x=0; x<= numOfStudents; x++) 
```

or when numOfStudents = 0 you'll never go into the loop.

Also, does addButtonActionPerformed have a for loop that contains the code you've given us? Otherwise, it seems like every time you go into that method numOfStudents will be 0 and when you exit it'll be 1, but the code is only executed for numOfStudents = 0\. Am I missing something?

# php - Timeout on "ON DUPLICATE KEY UPDATE"

> ID：16218859
> 
> 赞同：0
> 
> 时间：2013-04-25T15:29:43.593
> 
> 标签：php, mysql, timeout

My query was just fine but i needed to check if there are duplicates on the ID and date/time field so i used

```
mysqli_query($link, "
        INSERT INTO wsmdata VALUES ('', '".mysqli_real_escape_string($link, $_POST['wsmID'])."',
 '".mysqli_real_escape_string($link, $a[0])." ".mysqli_real_escape_string($link, $a[1])."', '".mysqli_real_escape_string($link, $a[2])."')
        ON DUPLICATE KEY
        UPDATE bar = '".mysqli_real_escape_string($link, $a[2])."'") or die (mysqli_error($link)); 
```

I'm having a foreach loop that loops through all the uploaded files. It procese 1008 rows into the database but then i get:

```
Fatal error: Maximum execution time of 30 seconds exceeded in F:\XAMPP\htdocs\logsysteem\adddata.php on line 30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:33:08.553

这是因为您没有设置脚本的时间期限。

你有两个选项可以让它工作：
1/`set_time_limit()`在你的 php 脚本的顶部使用 2/在你的配置文件
中更改这个值`php.ini`

如果是个人脚本，我建议您使用第一个解决方案。

编辑：有关进一步说明，请阅读此[http://fr2.php.net/set_time_limit](http://fr2.php.net/set_time_limit)

# java - Java, return if trimmed String in List contains String

> ID：16218863
> 
> 赞同：55
> 
> 时间：2013-04-25T15:29:48.750
> 
> 标签：java, arrays, string, list

In Java, I want to check whether a String exists in a `List<String> myList`.

Something like this:

```
if(myList.contains("A")){
    //true
}else{
    // false
} 
```

The problem is myList can contain un-trimmed data:

```
{'  A', 'B  ', '  C  '} 
```

I want it to return true if my item `'B'` is in the list. How should I do this? I would like to avoid a looping structure.

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-11-06T01:41:56.130

使用 Java 8 流 API：

```
List<String> myList = Arrays.asList("  A", "B  ", "  C  ");
return myList.stream().anyMatch(str -> str.trim().equals("B")); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-04-25T15:33:28.057

您需要迭代您的列表并调用[`String#trim`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29)搜索：

```
String search = "A";
for(String str: myList) {
    if(str.trim().contains(search))
       return true;
}
return false; 
```

或者，如果您想执行**忽略大小写搜索**，请使用：

```
search = search.toLowerCase(); // outside loop

// inside the loop
if(str.trim().toLowerCase().contains(search)) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-25T20:44:00.040

您可以使用正则表达式在一行中完成：

```
if (myList.toString().matches(".*\\bA\\b.*")) 
```

这段代码应该执行得很好。

* * *

顺便说一句，您可以从变量构建正则表达式，如下所示：

```
.matches("\\[.*\\b" + word + "\\b.*]") 
```

当搜索词在开始/结束处包含开/关方括号时，我在每一端添加了`[`和`]`以防止误报匹配。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-25T15:31:36.303

```
String search = "A";
for(String s : myList)
    if(s.contains(search)) return true;
return false; 
```

这将遍历列表中的每个字符串，并检查它是否包含您要查找的字符串。如果它只是您想要捕获的空间，您可以这样做：

```
String search = "A";
for(String s : myList)
    if(s.replaceAll(" ","").contains(search)) return true;
return false; 
```

这将在搜索之前首先用空字符串替换空格。此外，如果您只想先修剪字符串，您可以执行以下操作：

```
String search = "A";
for(String s : myList)
    if(s.trim().contains(search)) return true;
return false; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-25T20:49:21.987

尝试这个：

```
for(String str: myList) {
    if(str.trim().equals("A"))
       return true;
}
return false; 
```

您需要使用`str.equals`or`str.equalsIgnoreCase`代替，`contains`因为`contains`in works 与in`string`不一样`contains``List`

```
List<String> s = Arrays.asList("BAB", "SAB", "DAS");
s.contains("A"); // false
"BAB".contains("A"); // true 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-31T17:58:42.723

您可以使用自己的代码。如果您不想使用上面所说的循环结构，则不需要使用循环结构。只有您必须专注于删除空间或修剪列表的字符串。

如果您使用的是 java8，您可以使用代码的单行简单地修剪字符串：

```
myList = myList.stream().map(String :: trim).collect(Collectors.toList()); 
```

上面这行的重要性在于，将来你也可以使用 List 或 set。现在您可以使用自己的代码：

```
if(myList.contains("A")){
    //true
}else{
    // false
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-25T15:36:32.533

您可以使用近似字符串匹配库来执行此操作，例如[SecondString](http://secondstring.sourceforge.net/)，但这几乎可以肯定是矫枉过正 - 只需使用提供的 for 循环答案之一。

# c# - 如何在 Html Helper (GroupName) 中检索 Display 属性

> ID：16218870
> 
> 赞同：1
> 
> 时间：2013-04-25T15:30:13.887
> 
> 标签：c#, asp.net-mvc, html-helper

在 HtmlHelper 中，我试图通过使用检索属性的 DisplayAttribute.GroupName

```
 ModelMetadata.FromLambdaExpression(expression, html.ViewData) 
```

但是，ModelMetadata 中缺少属性“GroupName”。

我搜索了解决方案，我看到的都是相当复杂的操作，而我希望这可以更容易解决。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T22:51:49.493

我有一个可能有用的例子。我用它来创建一个自定义助手。希望这对你有用：

```
 public static MvcHtmlString DatePickerFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, string className)
 {
     if (expression == null)
     {
            throw new ArgumentNullException("expression");
     }
     var expressionText = ExpressionHelper.GetExpressionText(expression);
     var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
     var me = (expression.Body as MemberExpression);
     var display = me
                .Member
                .GetCustomAttributes(typeof(DisplayAttribute), false)
                .Cast<DisplayAttribute>()
                .FirstOrDefault();
     string paramDisplayName = display.Name; //this is what you need
     return  new MvcHtmlString(DatePicker(htmlHelper, expressionText, className, htmlHelper.ViewData.Eval(expressionText), validations));
} 
```

这就是我调用这个方法的方式：

```
@Html.DatePickerFor(model => model.SelectedMilestone.DeliveryDate, "core2-form-textbox-date") 
```

# php - PHP - 将变量分配给动态列表对象

> ID：16218877
> 
> 赞同：0
> 
> 时间：2013-04-25T15:30:28.670
> 
> 标签：php, magento

我有一段 PHP 代码（在 Magento 安装中），它生成一个 URL 列表，我需要为每个 URL 放置一个变量，例如第一个 URL 可以分配给`$curGBP`，第二个URL 可以分配给，`$curEUR`依此类推.. .我已经设法产生了变量名需要的东西，所以它只是把拼图的最后一部分放在一起。

我目前有这个代码：

```
<?php foreach ($this->getCurrencies() as $_code => $_name): ?>
<?php echo $this->getSwitchCurrencyUrl($_code) ?>
<?php echo "\$cur"?><?php echo $_code ?><br />
<?php endforeach; ?> 
```

产生这个输出：

```
../GBP/uenc/SESSIONID/ $curGBP  
../EUR/uenc/SESSIONID/ $curEUR
../USD/uenc/SESSIONID/ $curUSD
../AED/uenc/SESSIONID/ $curAED 
```

我需要添加什么到 foreach 部分才能将 URL 分配给变量？

**注意：** SESSIONID 是一个长字符串，为了简洁起见，我在此示例中已将其替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:35:31.510

```
<?php foreach ($this->getCurrencies() as $_code => $_name): ?>
<?php ${"cur$_code"} = $this->getSwitchCurrencyUrl($_code) ?>
<?php endforeach; ?> 
```

那应该将货币网址分配给您想要的变量名称。

有关更多信息，如果您不知道它是如何工作的，请查看变量变量： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

# excel - Excel - Creating a dynamic dropdown of values that match a string

> ID：16218883
> 
> 赞同：1
> 
> 时间：2013-04-25T15:30:38.753
> 
> 标签：excel, drop-down-menu, reference, spreadsheet, vlookup

In excel I am trying to create a dropdown which pulls in all values where part of that value is in the cell next to the dropdown

So I have a spreadsheet with 2 columns, a description and a price.

I have another spreadsheet which will have the dropdown and in the cell to the left of the dropdown I will enter text. When entering text, I want the dropdown to find all values in the other spreadsheet where this text matches.

Finally once they click the dropdown it will take the price into the cell to the right.

First of all does anyone know if this is possible. If it is if you could give me just a little guidance in how to do it it would be much appreciated. I'm not expecting a fools guide just a nudge in the right direction and i'll work out the rest.

Thanks

Mike

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T15:18:02.093

最后我设法通过使用vb代码来做到这一点。

# gradle - Can gradle extensions handle lazy evaluation of a property?

> ID：16218888
> 
> 赞同：16
> 
> 时间：2013-04-25T15:30:49.170
> 
> 标签：gradle

I'm writing a custom gradle plugin to handle some vaguely complicated work and I have run into a frustrating problem while using properties to configure some of the tasks that the plugin applies.

```
apply plugin: myPlugin

//Provide properties for the applied plugin
myPluginProps {
    message = "Hello"
}

//Define a task that uses my custom task directly
task thisTaskWorksFine(type: MyTask) {
    input = myPluginProps.message
}

//Define a plugin that will apply a task of my custom type
class MyPlugin implements Plugin<Project> {
    void apply(Project project) {
        project.extensions.create('myPluginProps', MyPluginExtension)

        project.task(type: MyTask, 'thisTaskWorksIncorrectly') {
            input = project.myPluginProps.message
        }
    }
}

//The extension used by my custom plugin to get input
class MyPluginExtension {
    def String message
}

//The task used by both the standard build section and the plugin
class MyTask extends DefaultTask {
    def String input

    @TaskAction
    def action() {
        println "You gave me this: ${input}"
    }
} 
```

The results from using this file are as follows:

```
$ gradle thisTaskWorksFine thisTaskWorksIncorrectly
:thisTaskWorksFine
You gave me this: Hello
:thisTaskWorksIncorrectly
You gave me this: null

BUILD SUCCESSFUL 
```

I consider this to be very unexpected. To my mind, applying a task from the plugin and writing one directly should result in the same output when given the same input. In this case, both tasks are given `myPluginProps.message` as input, but the task applied by the plugin is greedy and evaluates to null early on. (During the apply phase?)

The only solution I have found is to use closures in the plugin task's configuration block like so:

```
//Define a plugin that will apply a task of my custom type
class MyPlugin implements Plugin<Project> {
    void apply(Project project) {
        project.extensions.create('myPluginProps', MyPluginExtension)

        project.task(type: MyTask, 'thisTaskWorksIncorrectly') {
            input = { project.myPluginProps.message }
        }
    }
} 
```

That solves the greedy evaluation problem pretty nicely *except* that now the custom task has to be modified to expect and deal with a closure. It's not terrifically hard to do, but I don't think it should be the task's responsibility to deal with the closure, since the plugin is "to blame".

Am I using extensions incorrectly here? Or are they just not adequate? The official stance appears to be that [we should use extensions](http://forums.gradle.org/gradle/topics/whats_the_difference_between_plugin_conventions_vs_plugin_extensions) but I've yet to find any examples where extensions could do what I need. I can move forward with my use of closures and writing a bunch of boilerplate getters that do closure eval and setters that can handle closures and normal types, but it seems very against the philosophy of groovy and therefore gradle. I would be very happy if there is a way that I can use extensions and get the lazy evaluation automatically.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T17:15:36.760

**编辑**

下面的答案现在已经过时了。由于我为它提供了比约定映射更好的机制，因此引入了一种称为[惰性属性](https://docs.gradle.org/current/userguide/lazy_configuration.html#lazy_configuration)的机制。

* * *

这个问题的通常解决方案是使用约定映射：

```
class MyPlugin implements Plugin<Project> {
    void apply(Project project) {
       project.extensions.create('myPluginProps', MyPluginExtension)

        project.task(type: MyTask, 'thisTaskWorksIncorrectly') {
            conventionMapping.input = { project.myPluginProps.message }
        }
    }
} 
```

然后在任务中：

```
class MyTask extends DefaultTask {
    def String input

    @TaskAction
    def action() {
        println "You gave me this: ${getInput()}"
    } 
```

}

请注意，我明确使用了 getter `input`- 如果您直接引用该字段，则约定映射不会启动。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-20T08:46:56.957

[Peter 在我的问题中的](https://stackoverflow.com/questions/25379967/retrieving-conventionmapping-in-custom-plugin#comment39598034_25388282)回答表明，conventionMapping 功能肯定会消失。最好避免它。

`afterEvaluate`用于解决*延迟配置问题*使我的代码比约定映射方法更干净。

```
class MyPlugin implements Plugin<Project> {
    void apply(Project project) {
        project.extensions.create('myPluginProps', MyPluginExtension)

        project.afterEvaluate {
            project.task(type: MyTask, 'thisTaskWorksIncorrectly') {
                input = project.myPluginProps.message
            }
        }
    }
} 
```

# visual-studio - Pdb 让我的项目总是“过时”

> ID：16218892
> 
> 赞同：1
> 
> 时间：2013-04-25T15:30:57.053
> 
> 标签：visual-studio, debugging

由于 pdb，我的项目总是过时。在 VS 输出窗口中，我总是看到：'项目已过时。输入文件 foo.dll 早于输出 foo.pdb'。总是一样。为什么会发生这种情况？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:35:03.973

现在我成立了原因......这是因为项目文件中项目项生成的程序集的使用：如果您在 foo 项目文件中将定义：

```
 <ItemGroup>
      <ThisAssembly Include="$(TargetDir)\foo.dll" />
  </ItemGroup> 
```

比你的项目总是过时的：输入文件 foo.dll 比输出 foo.pdb... VS 2012 Sp2。那是可悲的。

# java - 我需要一个只有一个实现的接口吗？

> ID：16218894
> 
> 赞同：4
> 
> 时间：2013-04-25T15:30:58.613
> 
> 标签：java, oop

我有一个接口，它只有一个实现。以下对表示一个简单的 java 对象。我想删除该接口并直接使用一个对象。但我想了解何时需要它以及为什么以这种方式设计它。这样做绝对不是为了减轻单元测试的覆盖率。那么，为什么我的项目中只有一个实现的接口呢？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T15:35:17.737

当您可能扩展/更改项目时，界面很有用。例如，如果您通过将数据存储在文本文件中来启动项目，然后决定从数据库更改为这样做。如果这两个都是同一个接口的实现，那么将第一个换成第二个是非常简单的。只是在使用它的类中交换具体实现的一个例子。例如，简单地改变

```
IStorage storage = new FileStorage(); 
```

至

```
IStorage storage = new DBStorage(); 
```

虽然为单个实现提供一个接口似乎毫无意义，但它可以为您节省以后的大量重构工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:37:08.640

如果您为实现定义接口并在程序中使用该接口，您始终可以自由地编写新实现并用旧实现替换它，而无需更改使用它的类的代码。

最好的做法是使用接口而不是实现，这样更改需求的危害较小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:02:28.003

有时您认为使用接口会很有用，但事实证明您只有一个实现。这并不总是一件坏事，但有时只是浪费精力。

来自[YAGNI的原则](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)

> 总是在你真正需要的时候实施，而不是在你预见到你需要它们的时候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:44:05.877

这取决于。但这不是一个坏主意。

在 C 和许多版本的 Pascal 中，将接口与实现分开是常见的做法。当模块依赖的实现发生变化时，它可以帮助编译器避免不必要的重新编译模块。

在 Java 中，编译器通常不是问题。Java 提供了公共、受保护、私有和包私有（隐式）访问类，它们限制了其他类在多大程度上可以依赖于特定类的细节。Javadoc 提供（默认情况下）省略不需要和不需要的细节的文档。我们还有被广泛推广的 YAGNI 原则：如果“你不需要它”，就不要设计它。

然而，在 Java 中使用显式接口而不是直接使用实现提供了一个额外的机会，可以非常清楚地了解特定类的用户应该依赖什么结构和行为。实现多个接口的能力意味着特定类的用户甚至可以指定对实现的一个或多个特定方面的依赖，例如它的可序列化性质。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T15:42:32.307

如果您正在为您的代码进行单元测试（我希望您这样做），那么您很有可能需要通过一些存根实现来模拟您的类的使用。所以你至少需要接口来进行单元测试。

PS 我知道，像 Mockito 这样的现代模拟框架可以基于类进行模拟，所以从技术上讲，你可以在没有接口的情况下实现这一点。但是（对我来说）感觉就像 hack，因为这正是应该使用界面的地方。

# android - 需要停止将日期选择器复制到 2 个文本视图中

> ID：16218895
> 
> 赞同：0
> 
> 时间：2013-04-25T15:31:02.787
> 
> 标签：android

我有 2 个图像按钮和 2 个文本视图。以下代码将相同的日期写入我不想要的 2 个文本视图，当我单击一个图像按钮时，它意味着写入 edittext1，当单击第二个时，它应该写入 edittext2

这是我的代码

```
public void selectDate(View view) {
        DialogFragment newFragment = new SelectDateFragment();
        newFragment.show(getSupportFragmentManager(), "DatePicker");
    }

    public void populateSetDate(int year, int month, int day) {
        DepartDate = (TextView)findViewById(R.id.editText1);
        DepartDate.setText(month+"/"+day+"/"+year);

    }

    public void populateSetDate1(int year1, int month1, int day1) {

        ReturnDate = (TextView)findViewById(R.id.editText2);
        ReturnDate.setText(month1+"/"+day1+"/"+year1);

    }

    public class SelectDateFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            final Calendar calendar = Calendar.getInstance();
            int yy = calendar.get(Calendar.YEAR);
            int mm = calendar.get(Calendar.MONTH);
            int dd = calendar.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity(), this, yy, mm, dd);
        }

        public void onDateSet(DatePicker view, int yy, int mm, int dd) {
            populateSetDate(yy, mm+1, dd);
            populateSetDate1(yy, mm+1, dd);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:45:38.190

```
public void selectDate(View view) {
    DialogFragment newFragment = new SelectDateFragment(view);
    newFragment.show(getSupportFragmentManager(), "DatePicker");
}

public void populateSetDate(int year, int month, int day, View v) {
    DepartDate = v;
    DepartDate.setText(month+"/"+day+"/"+year);

}

public class SelectDateFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
    private View view;
    public SelectDateFragment(View view) {
        this.view = view;
    }
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Calendar calendar = Calendar.getInstance();
        int yy = calendar.get(Calendar.YEAR);
        int mm = calendar.get(Calendar.MONTH);
        int dd = calendar.get(Calendar.DAY_OF_MONTH);
        return new DatePickerDialog(getActivity(), this, yy, mm, dd);
    }

    public void onDateSet(DatePicker view, int yy, int mm, int dd) {
        populateSetDate(yy, mm+1, dd);
        populateSetDate1(yy, mm+1, dd);

    } 
```

# jquery - 如何用slideUp和slideDown jquery关闭子菜单

> ID：16218901
> 
> 赞同：0
> 
> 时间：2013-04-25T15:31:26.803
> 
> 标签：jquery

我正在尝试用这种方法关闭子菜单，上下推动id，此时代码slideDown子菜单，推动ID...我想关闭并slideUp ID...任何想法，谢谢提前！

```
var submenu;    

$('.menu-desktop li').click(function(){
    id = $(this).attr('id');
    $('#intro-home, #breadcrumbs-pc').animate({'margin-top':'2.4rem'}, 100)
    $('.menu-desktop ul:not(:first-child)').slideUp(100)
    $('.menu-desktop').find('.'+id).delay(200).slideDown(100)
    $('#intro-home, #breadcrumbs-pc').delay(200).animate({'margin-top':'5rem'}, 100) 

    $('.menu-desktop').find('.'+id).slideToggle("fast")
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:10:46.513

检查这个 jsFiddle ，看看它是否满足您的需求。

[http://jsfiddle.net/droppedonjapan/a66nN/3/](http://jsfiddle.net/droppedonjapan/a66nN/3/)

这是肉：

```
$('.main-menu li').click(function(){
    var elems = $('ul:not(.main-menu)').length;
    var $refClass = $('.' + $(this).attr('data-ref'));
    var visible = $refClass.is(':visible');

    $('ul:not(.main-menu)').slideUp(100, function() {
        if (elems == 1) {
            if (!visible) $refClass.slideDown('fast');
        }
        elems--;
    });
}); 
```

我在 slideUp() 函数上使用回调。每次元素完成 slideUp 动画时都会调用它。当最后一个元素完成隐藏时，如果您尝试显示/隐藏的菜单不可见，那么它将显示它。如果它是可见的，则在菜单隐藏后它不会做任何事情。

# javascript - 如何通过 JavaScript 更改 CSS 渐变？

> ID：16218902
> 
> 赞同：4
> 
> 时间：2013-04-25T15:31:29.603
> 
> 标签：javascript, html, css, styles

我有一个 div 应用了以下渐变：

```
/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #2E2E28 0%, #4D4C48 100%);
/* Opera */ 
background-image: -o-linear-gradient(top, #2E2E28 0%, #4D4C48 100%);
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #2E2E28), color-stop(1, #4D4C48));
/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #2E2E28 0%, #4D4C48 100%);
/* IE10+ */
background: -ms-linear-gradient(top,  #2E2E28 0%,#4D4C48 100%);
/* W3C */
background: linear-gradient(top,  #2E2E28 0%,#4D4C48 100%); 
```

我怎样才能将“#2E2E28”更改为另一个数字，但仍然避免跨浏览器的噩梦？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T16:03:55.857

以下函数将采用两种颜色作为参数并返回您指定的样式字符串，并将适当的子字符串替换为给定的颜色。

[您可以在这里](http://jsfiddle.net/barney/D9W4v/)看到这一点。

```
var makeGradientStyle = function(){
    var gradientString = '\
        /* Mozilla Firefox */ \
background-image: -moz-linear-gradient(top, {colour1} 0%, {colour2} 100%);\
        /* Opera */ \
        background-image: -o-linear-gradient(top, {colour1} 0%, {colour2} 100%);\
        /* Webkit (Safari/Chrome 10) */ \
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, {colour1}), color-stop(1, {colour2}));\
        /* Webkit (Chrome 11+) */ \
        background-image: -webkit-linear-gradient(top, {colour1} 0%, {colour2} 100%);\
        /* IE10+ */\
        background: -ms-linear-gradient(top,  {colour1} 0%,{colour2} 100%);\
        /* W3C */\
        background: linear-gradient(top,  {colour1} 0%,{colour2} 100%);\
    ';

    return function(colour1, colour2){
        return gradientString.replace(/\{colour1\}/g, colour1).replace(/\{colour2\}/g, colour2)
    }
}(); 
```

然后，您可以按以下方式申请。缺点在于您要替换整个样式字符串，但是您可以使用

```
var p = document.getElementById('p');

p.setAttribute('style', p.getAttribute('style') + '; ' + makeGradientStyle('#ff0000', '#0000ff')); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T15:57:35.547

使用 jQuery，它将是：

```
$('.gradient').css({'background-image': 'linear-gradient(to top,  #2E2E28 0%, #4D4C48 100%)'}); 
```

对于野生动物园：

```
$('.gradient').css({'background-image': '-webkit-linear-gradient(top,  #2E2E28 0%, #4D4C48 100%)'}); 
```

请参阅[此处以获取实时示例](http://jsfiddle.net/soyuka/jr9T2/3/)。

似乎可以跨浏览器工作。

**编辑**：

我做了一个小插件，可以帮助你使用不同的颜色：

```
;(function($) {
    var isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);

    var methods = {
        init: function (settings) {

            settings = $.extend( {
              'colors'         : ['red', 'blue'],
              'direction'      : 'top'
            }, settings);

            return this.each(function(){
                if($.isArray(settings.colors) && settings.colors.length >= 2) {
                    $(this).css({ 
                        'background':
                        methods.gradientToString(settings.colors, settings.direction)
                    });
                } else {
                    $.error('Please pass an array');
                }

            });

        },
        gradientToString: function (colors, direction) {

            var nbColors = colors.length;

            //If no percent, we need to calculate them
            if(colors[0].percent === undefined) {

                //Passed only colors as an array we make it an object
                if(colors[0].color === undefined) {
                    var tmp = [];
                    for(i=0; i < nbColors; i++)
                        tmp.push({'color':colors[i]});

                    colors = tmp;
                }

                var p = 0,
                    percent = 100 / (nbColors - 1);

                //calculate percent
                for(i=0; i< nbColors; i++) {
                    p = i === 0 ? p : (i == nbColors-1 ? 100 : p + percent);
                    colors[i].percent = p;
                }
            }

            var to = isSafari ? '' : 'to';

            //build the string
            var gradientString = isSafari ? '-webkit-linear-gradient(' : 'linear-gradient(';

           gradientString += to +' '+ direction;

            for(i=0; i < nbColors; i++)
               gradientString += ', '+ colors[i].color + ' ' + colors[i].percent + '%';

            gradientString += ')';
            return gradientString;

        }

    };

    $.fn.gradientGenerator = function () {
        return methods.init.apply( this, arguments );
    };
})(jQuery); 
```

例如像这样使用它：

```
$('.gradient').gradientGenerator({
    colors : ['#2E2E28', '#4D4C48']
});

$('.change-color').on('click', function(e) {

    e.preventDefault();
    $('.gradient').gradientGenerator({
        colors : [{color:'#4D4C48',percent:0}, {color:'#282827', percent:30}, {color:'#2E2E28', percent: 100}],
        direction : 'left'
    });

}); 
```

看到它**[在这里工作](http://jsfiddle.net/soyuka/vnQke/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T17:36:39.717

基于 Barney 的出色回答，这里有一个小的 jQuery 插件：

```
(function($) { 

  $.fn.cssGradient = function(options) {

    // support multiple elements

    if(this.length > 1){
      this.each(function(){
        $(this).cssGradient(options);
      });
      return this;
    }

    // private variables

    var that = this;

    var metaData = {};
    metaData['version'] = "1.0.0";

    // settings

    // Extend our default options with those provided.
    // Note that the first argument to extend is an empty
    // object – this is to keep from overriding our "defaults" object.

    var defaultOptions = {
          background:'',
          color1:'',
          color2:''
        }

    var settings = $.extend({},defaultOptions,options);

    // private methods

    var init = function() {
      start();
      return that;
    }

    var start = function(){
      var element = jQuery(that);
      var attr = element.attr('style');
      var style = "";
      if (typeof attr !== typeof undefined && attr !== false) {
        style = element.attr('style') + makeGradientStyle(settings.background,settings.color1,settings.color2);
      }
      else{
        style = makeGradientStyle(settings.background,settings.color1,settings.color2);
      }
      element.attr('style',style);
    }

    var makeGradientStyle = function(background,color1,color2){
      var gradientString = 'background:{background};background-image:-moz-linear-gradient(top,{color1} 0%,{color2} 100%);background-image:-o-linear-gradient(top,{color1} 0%,{color2} 100%);background-image:-webkit-linear-gradient(top,{color1} 0%,{color2} 100%);background-image:-ms-linear-gradient(top,{color1} 0%,{color2} 100%);background-image:linear-gradient(to bottom,{color1} 0%,{color2} 100%);';
      return gradientString.replace(/\{background\}/g,background).replace(/\{color1\}/g,color1).replace(/\{color2\}/g,color2);
    }

    // public methods

    this.version = function() {
      console.log('cssGradient plugin version: ',metaData['version']);
    };

    return init();

  }

})(jQuery); 
```

**并实施：**

```
var cssGradient = jQuery('.foo').cssGradient({background:'#fff',color1:'#fff',color2:'#ff0000'}); 
```

# c4 - 使用 CAKeyframeAnimation 为 C4Image 自定义动画

> ID：16218915
> 
> 赞同：1
> 
> 时间：2013-04-25T15:31:59.203
> 
> 标签：c4

我正在移植一个现有的 iOS 应用程序来学习 C4，我需要使用自定义动画来使用 CAKeyframeAnimation 从屏幕外滑入具有“弹入”效果的图像。

**对我来说，使用 C4 实现更复杂的动画的最佳方法是什么？**

*图像创建*

```
C4Image *v = [C4Image imageNamed:@"assets/images/ca/defense.png"];
v.frame = CGRectMake(1500, 300, 400, 400); // off screen
[self addImage:v]; 
```

*先前实现中使用的 CAKeyframeAnimation*

```
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position.x"];
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
animation.duration = 0.5;

int steps = 100;
NSMutableArray *values = [NSMutableArray arrayWithCapacity:steps];
double value = 0;
float e = 2.71;
for (int t = 0; t < steps; t++) {
    value = 200 * pow(e, -0.055*t) * cos(0.08*t) + x; //418
    [values addObject:[NSNumber numberWithFloat:value]];
}

animation.values = values;
animation.removedOnCompletion = NO;
animation.fillMode = kCAFillModeForwards;
animation.delegate = self;
animation.beginTime = CACurrentMediaTime() + delay; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:31:50.370

C4 中的所有可视对象都有一个您可以访问的图层属性。创建 a 时，`CAKeyframeAnimation` 您可以将此属性用作要添加动画的对象。

上面的代码工作得很好（尽管我确实稍微调整了数字以确保对象在画布上）。

我将代码更改为：

```
#import "C4WorkSpace.h"

@implementation C4WorkSpace {
    C4Image *v;
}

-(void)setup {
    v = [C4Image imageNamed:@"C4Table"];
    v.origin = CGPointMake(self.canvas.center.x , self.canvas.center.y);
    v.borderColor = C4RED;
    v.borderWidth = 1.0f;
    v.width = self.canvas.width / 2.0f;
    [self.canvas addImage:v];
}

-(void)touchesBegan {
    CAKeyframeAnimation *animation = [CAKeyframeAnimation
                                      animationWithKeyPath:@"position.x"];
    animation.timingFunction = [CAMediaTimingFunction
                                functionWithName:kCAMediaTimingFunctionLinear];
    animation.duration = 0.5;

    int steps = 100;
    NSMutableArray *values = [NSMutableArray arrayWithCapacity:steps];
    double value = 0;
    float e = 2.71f;
    float x = v.origin.x;
    for (int t = 0; t < steps; t++) {
        value = 200 * pow(e, -0.025*t) * cos(0.08*t) - x; //418
        [values addObject:@(value)];
    }

    animation.values = values;
    animation.removedOnCompletion = NO;
    animation.fillMode = kCAFillModeForwards;
    animation.delegate = self;
    animation.beginTime = CACurrentMediaTime() + 1.0f;

    [v.layer addAnimation:animation forKey:@"position.x"];
}

@end 
```

你可以抓住这个工作[git repo](https://github.com/C4Code/CAKeyframeAnimation)

我必须做的主要事情是：

```
[v.layer addAnimation:animation forKey:@"position.x"]; 
```

我所做的其余更改只是坐标和颜色，以确保一切正常。

# ios - 登录 iOS 应用程序

> ID：16218928
> 
> 赞同：0
> 
> 时间：2013-04-25T15:32:37.070
> 
> 标签：ios, objective-c, login

每当我完成需要登录的应用程序时，我总是将登录屏幕设置`rootViewController`为`UINavigationController`.

我一直想知道这是否是最好的方法？

有这样做的标准模式吗？

我是否应该在 rootViewController 顶部有一个模式屏幕作为登录屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:40:07.577

我一直在使用模态视图控制器有两个原因：

1：因为如果用户之前已经登录并且不想在应用程序自动登录时导航到主屏幕时添加整个 VC，我必须实现自动登录功能。IT 制作加载和动画更快地释放额外的 VC。

2：我不希望在应用程序的整个过程中加载加密代码，以防有人想要对加密和身份验证过程进行快照。虽然不确定这是否完全必要，但在应用程序期间将登录代码保存在内存中似乎很糟糕。

然而，在未来的应用程序中，我不会做任何事情，而是创建一个登录视图，在询问登录详细信息时动画进出。我认为这看起来最好，因为模态视图控制器没有最好的动画。

# c++ - 如何用 swig 实例化模板类的模板方法？

> ID：16218929
> 
> 赞同：9
> 
> 时间：2013-04-25T15:32:37.950
> 
> 标签：c++, python, swig

我在 C++ 中有一个类，它是一个模板类，这个类的一个方法在另一个占位符上模板化

```
template <class T>
class Whatever {
public:
    template <class V>
    void foo(std::vector<V> values);
} 
```

当我将此类传输到 swig 文件时，我做到了

```
%template(Whatever_MyT) Whatever<MyT>; 
```

不幸的是，当我尝试`foo`从 python 调用 What_MyT 的实例时，我得到一个属性错误。我以为我必须实例化成员函数

```
%template(foo_double) Whatever<MyT>::foo<double>; 
```

这是我会用 C++ 编写的，但它不起作用（我收到语法错误）

问题出在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-29T00:12:42.123

首先声明成员模板的实例，然后声明类模板的实例。

### 例子

```
%module x

%inline %{
#include<iostream>
template<class T> class Whatever
{
    T m;
public:
    Whatever(T a) : m(a) {}
    template<class V> void foo(V a) { std::cout << m << " " << a << std::endl; }
};
%}

// member templates
// NOTE: You *can* use the same name for member templates,
//       which is useful if you have a lot of types to support.
%template(fooi) Whatever::foo<int>;
%template(food) Whatever::foo<double>;
// class templates.  Each will contain fooi and food members.
// NOTE: You *can't* use the same template name for the classes.
%template(Whateveri) Whatever<int>;
%template(Whateverd) Whatever<double>; 
```

### 输出

```
>>> import x
>>> wi=x.Whateveri(5)
>>> wd=x.Whateverd(2.5)
>>> wi.fooi(7)
5 7
>>> wd.fooi(7)
2.5 7
>>> wi.food(2.5)
5 2.5
>>> wd.food(2.5)
2.5 2.5 
```

**参考：** [SWIG 2.0 文档中的](http://www.swig.org/Doc2.0/SWIGDocumentation.html)[6.18 模板](http://www.swig.org/Doc2.0/SWIGDocumentation.html#SWIGPlus_nn30)（搜索“成员模板”）。

# wordpress-theming - 在搜索页面中显示带有链接的类别名称

> ID：16218933
> 
> 赞同：0
> 
> 时间：2013-04-25T15:32:47.217
> 
> 标签：wordpress-theming, wordpress

您如何显示类别标题及其各自的链接和内容。

我有我的代码，帖子上的内容正在运行，但在类别的标题/链接上却没有

一些东西链接这个：

```
<?php
/*
    Template Name: Search
*/
?>

<?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); ?>
   <?php 
    echo '<a href="'. get_category_link($current_cat_id). '>'. the_category(' ').'</a> '; ?>                    
    the_title();
   the_excerpt();    
<?php endwhile; ?>

    <?php else : ?>

        <h2>No posts found.</h2>

    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:43:18.787

使用[`get_the_category_list`](http://codex.wordpress.org/Function_Reference/get_the_category_list)：

```
$categories_list = get_the_category_list( ', ' );
if( $categories_list ) echo $categories_list; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:46:25.190

我确实通过使用此代码解决了它

```
<?php  echo '<a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . the_category(" ").'</a> '; ?> 
```

# php - CodeIgniter 2.x 后端和前端管理

> ID：16218934
> 
> 赞同：0
> 
> 时间：2013-04-25T15:32:51.383
> 
> 标签：php, codeigniter-2

我在同一个网站上看到了许多关于后端和前端方法布局的主题、文章和一些非常聪明的帖子。

我想听听您对每种类型的引入的前端/后端管理人员的反馈（优点和缺点），他们对 codeigniter 有过真正的体验：

1.  控制器分离部分

    ```
    ./web/system/...
    ./web/application
         /application/controllers/* (config/controllers/hooks/models/views...)
         /application/controllers/admin/* (config/controllers/hooks/models/views...) 
    ```

2.  cms的应用类型

    ```
    ./web/system/...
    ./web/front/* (config/controllers/hooks/models/views...)
    ./web/admin/* (config/controllers/hooks/models/views...) 
    ```

3.  子应用

    ```
    ./web/system/...
    ./web/application
         /application/admin/controllers/* (config/controllers/hooks/models/views...)
         /application/front/controllers/* (config/controllers/hooks/models/views...) 
    ```

感谢您的建议和提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:36:25.240

我们为我们的应用程序所做的是创建一个如下结构：

应用程序文件夹分为三个子文件夹 backend frontend common

这有助于我们更好地构建我们的资源，例如，当后端出现问题时，我们不需要筛选前端文件。

# google-app-engine - 在 gae 数据存储中，命名空间中的所有实体是否都存储在分布式网络的同一部分？

> ID：16218936
> 
> 赞同：0
> 
> 时间：2013-04-25T15:33:00.360
> 
> 标签：google-app-engine, google-cloud-datastore

参考 gae 文档：[https ://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)

它说：实体组关系告诉 App Engine 将多个实体存储在分布式网络的同一部分。

我的问题：

1）在命名空间的情况下是否成立？我的意思是，在多租户应用程序的情况下，每个租户的命名空间决定了属于该命名空间的实体在分布式网络中的同一部分的存储？

2) 为每个租户和命名空间使用实体组是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:59:37.997

1) 否 2) 并非总是如此。这取决于您的目标和访问模式。

# javascript - 为什么在这种情况下 document.getElementById 的结果为 null？

> ID：16218937
> 
> 赞同：1
> 
> 时间：2013-04-25T15:33:03.400
> 
> 标签：javascript, windows-8, windows-runtime, winjs

我基本上是 JavaScript 和 WinJs 的新手。按照[本](http://msdn.microsoft.com/en-ca/library/windows/apps/hh986964.aspx)教程学习它。

我的 default.html 如下

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>HelloWorld</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-light.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- HelloWorld references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
</head>
<body>
    <h1 class="headerClass">Hello, World!</h1>
    <div class="mainContent">
        <p>What's your name</p>
        <input id="nameInput" type="text" />
        <button id="helloButton">Say "Hello"</button>
        <div id="greetingOutput" />
        <label for="ratingControlDiv">
            Rate this greeting:
        </label>
        <div id="ratingControlDiv" data-win-control="WinJS.UI.Rating" />
        <div id="ratingOutput" />
    </div>
</body>
</html> 
```

我的default.js如下

```
// For an introduction to the Blank template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232509
(function () {
    "use strict";

    WinJS.Binding.optimizeBindingReferences = true;

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                // TODO: This application has been newly launched. Initialize
                // your application here.
            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }
            args.setPromise(WinJS.UI.processAll().then(function completed() {

                // Retrieve the div that hosts the Rating control.
                var ratingControlDiv = document.getElementById("ratingControlDiv");

                // Retrieve the actual Rating control.
                var ratingControl = ratingControlDiv.winControl;

                // Register the event handler. 
                ratingControl.addEventListener("change", ratingChanged, false);

                // Retrieve the button and register our event handler. 
                var helloButton = document.getElementById("helloButton");
                helloButton.addEventListener("click", buttonClickHandler, false);

            }));

        }
    };

    app.oncheckpoint = function (args) {
        // TODO: This application is about to be suspended. Save any state
        // that needs to persist across suspensions here. You might use the
        // WinJS.Application.sessionState object, which is automatically
        // saved and restored across suspension. If you need to complete an
        // asynchronous operation before your application is suspended, call
        // args.setPromise().
    };

    function buttonClickHandler(eventInfo) {
        var userName = document.getElementById("nameInput").value;
        var greetingString = "Hello, " + userName + "!!!";
        document.getElementById("greetingOutput").innerText = greetingString;

    }

    function ratingChanged(eventInfo) {

        var ratingOutput = document.getElementById("ratingOutput");
        ratingOutput.innerText = eventInfo.detail.tentativeRating;
    }

    app.start();
})(); 
```

我在 ratingChanged 中将 ratingOutput 设为 null。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:13:05.617

正如其他评论所指出的，请务必使用关闭，因为自关闭的 div 不重视 HTML5。在 Jeffrey 提供的链接中，有来自验证器的引用，我相信：“用于非空 HTML 元素的自闭合语法 (/>)。忽略斜杠并将其视为开始标记。”

问题不在于 ratingOutput div，而是它之前用于 Rating 控件的那个。我将您的代码放入一个新项目并重现了您的结果，并且可以在 Visual Studio 的 DOM Explorer 中看到 ratingOutput div 根本不存在于 DOM 中。

为什么会这样？它是上面引用加上 WinJS.UI.processAll 在 ratingControlDiv 中创建 WinJS 控件的方式的组合。WinJS 实例化进程（在 processAll 中）有效地将 ratingOutput 视为 ratingControlDiv 的子项，并将其替换为真实的控件内容。

换句话说，您看到的行为与您编写此标记完全一样：

```
<div id="ratingControlDiv" data-win-control="WinJS.UI.Rating">
    <div id="ratingOutput"></div>
</div> 
```

除非 WinJS 控件明确说明它以某种方式与子元素一起工作（如语义缩放控件），否则无法保证子元素将被保留。

因此 ratingOutput 被评级控件实例化从 DOM 中删除。

使用适当的关闭标签，可以解决问题：

```
<div id="ratingControlDiv" data-win-control="WinJS.UI.Rating"></div>
<div id="ratingOutput"></div> 
```

很好的问题——我将把这个注释添加到我现在正在编写的第二版中。

Kraig（作者，[使用 HTML、CSS 和 JavaScript 编程 Windows 8 应用程序，](http://aka.ms/BrockschmidtBook)来自 Microsoft Press 的免费电子书）

# html - 除非 html 包含一个类，否则应用 CSS

> ID：16218938
> 
> 赞同：0
> 
> 时间：2013-04-25T15:33:04.363
> 
> 标签：html, css

除非它包含一个类，否则是否可以将样式应用于项目？以这个 html 为例：

```
<div class="nav">
    <ul>
        <li><span class="selected">Page 1</span></li>
        <li><span>Page 2</span></li>
        <li><span>Page 3</span></li>
        <li><span>Page 4</span></li>
    </ul>
</div> 
```

我目前有这个CSS：

```
.nav li span{
    display: block;
    padding: 5px 0 5px 20px;
    cursor: pointer;
    border: solid 1px transparent;
    border-right: 0;
    border-left: 0;
    color: #777;
}
.nav li span.selected, .nav li:hover span{
    background-color: #deeaf4;
    border: solid 1px #2392F3;
    border-right: 0;
    border-left: 0;
    color: #000000;
}
.nav li:hover span{
    border: solid 1px transparent;
    border-right: 0;
    border-left: 0;
} 
```

当我将鼠标悬停在其中一个跨度上时，我如何应用第二个 CSS 块，**除非**它包含类`selected`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:34:25.967

是的，一种方法是利用[`not()`](http://www.w3.org/TR/css3-selectors/#negation)伪类和属性选择器，例如

```
span:not([class=selected]) {
/* Quotes around the value are optional */
color: slategray;
} 
```

[http://jsfiddle.net/Gt78B/](http://jsfiddle.net/Gt78B/)

可悲的是，对否定伪类的支持仅限于 IE 9 + [http://caniuse.com/css-sel3](http://caniuse.com/css-sel3)尽管属性选择器得到广泛支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:37:23.720

只需 css 你应该能够做到这一点：

```
.nav li span.selected,
.nav li span.selected:hover,
.nav li:hover span{
    background-color: #deeaf4;
    border: solid 1px #2392F3;
    border-right: 0;
    border-left: 0;
    color: #000000;
} 
```

这应该使您的选择器更加具体，并忽略边框颜色的变化。

# java - 在鼠标光标下获取RGB值卡住

> ID：16218939
> 
> 赞同：-2
> 
> 时间：2013-04-25T15:33:08.640
> 
> 标签：java

我在使用此代码时遇到问题。我希望能够移动鼠标并获得鼠标所在位置的像素值（红色、绿色、蓝色）。我无法使用“getRGB”。你将如何开始。有人可以指出我正确的方向。

```
 import java.awt.Color;
    import java.awt.MouseInfo;
    import java.awt.Point;
    import java.awt.PointerInfo;
    import java.awt.Robot;

   public class PixelColor {
   public static void main(String[] args) throws Exception {
    PointerInfo pointer;
    pointer = MouseInfo.getPointerInfo();
    Point coord = pointer.getLocation();

    Robot robot = new Robot();
    robot.delay(2000);

    int red = getred();
    int green= getgreen();
    int blue= getblue();
    int color = new Color (red,green,blue).getRGB();

    while(true) {
        coord = MouseInfo.getPointerInfo().getLocation();  
        color = getred();

        {
    System.out.println(getRGB());

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:43:24.427

研究使用 Robot 的 getPixelColor 方法：

```
color = robot.getPixelColor(coord.x, coord.y); 
```

例如，

```
import java.awt.AWTException;
import java.awt.Color;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.Robot;

public class PixelColor {
   private static final long SLEEP_DELAY = 400L;

   public static void main(String[] args) {
      Point coord;
      Robot robot = null;

      try {
         robot = new Robot();
      } catch (AWTException e) {
         e.printStackTrace();
         System.exit(-1);
      }

      Color color = null;
      while (true) {
         coord = MouseInfo.getPointerInfo().getLocation();
         color = robot.getPixelColor(coord.x, coord.y);
         System.out.println(color);
         try {
            Thread.sleep(SLEEP_DELAY);
         } catch (InterruptedException e) {}
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:44:34.660

要获取鼠标指针所在的像素颜色，需要在循环的每一次迭代中获取鼠标位置，然后使用robot.js的方法`getPixelColor`。

```
while(true) 
{
    pointer = MouseInfo.getPointerInfo();
    coord = pointer.getLocation();
    System.out.print(coord.x + " " + coord.y);
    System.out.println(" color: " + robot.getPixelColor(coord.x, coord.y).getRed() +                                             
                           ", " + robot.getPixelColor(coord.x, coord.y).getGreen() + 
                ", " + robot.getPixelColor(coord.x, coord.y).getBlue());
} 
```

# google-analytics - 使用 Google Analytics 跟踪游戏进度

> ID：16218941
> 
> 赞同：3
> 
> 时间：2013-04-25T15:33:11.780
> 
> 标签：google-analytics

我们正在创建一个 Android 游戏，我们希望在其中使用 Google Analytics 来跟踪用户的进度和参与度。

我通读了自定义维度/指标文档，并获得了关于如何将分析用于游戏的一些很好的见解。我不完全确定如何为我们的用例建模。

该游戏是一款棋盘游戏，您可以在其中玩三种不同的模式。此外，我们有 10 种不同的难度级别可以应用于一个模式。

*   模式 1 线性进展，尽管难度很大
*   模式 2 让用户选择难度
*   模式3没有难度。这是本地玩家对玩家。

我想问的问题是：

*   用户多久玩一次特定模式？
*   哪种模式最受欢迎？
*   他们在特定模式下玩什么难度级别？
*   一个模式中某个难度级别的完成率是多少？

我想自定义维度和指标的巧妙组合可以回答这些问题。如果有人愿意向我暗示正确的方向，我将不胜感激。

# jquery - 使用 CSS 和 jQuery 将高度更改为奇数行

> ID：16218945
> 
> 赞同：0
> 
> 时间：2013-04-25T15:33:24.873
> 
> 标签：jquery, css, rows, alternate

我有一个有 3 列的表。第二列不需要有样式。这样，每隔一行就不需要样式和 20px 的高度。我想直接用 jQuery 来做这件事。在 jsfiddle 示例中，第二行高度是我希望所有备用行的高度为（20px），但如果不将类高度设置为 0px 并将类直接应用于标签，则无法实现。有人可以帮忙吗？（我希望我很清楚）。谢谢！

我的示例在 jsfiddle 中。[http://jsfiddle.net/squirc77/g6gKQ/]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:45:30.087

首先，您不需要将此高度样式添加到行中，因为它只会干扰 jQuery 样式，因此请摆脱

```
height: 85px; 
```

在

```
#tbl_notice td { border: 1px solid #f2f2f2; width: 400px; height: 85px; vertical-align:middle; background: transparent url(images/fieldsetBgLg.png) repeat-x; } 
```

你实际上并不需要这条线。

```
#tbl_notice tr td.oddRow{height:0px;} 
```

只需确保摆脱奇数行和中间列中的无间断空格（nbsp;，因为这会阻止您将行和列设置为您希望的任何高度和宽度。

在这些更改之后，您的 jQuery 代码应该可以正常工作。

[这](http://jsfiddle.net/g6gKQ/36/)是我所做的更改的 JSFiddle。

# c# - 将 Autofac 的 ReplaceInstance 与接口类型一起使用

> ID：16218946
> 
> 赞同：4
> 
> 时间：2013-04-25T15:33:27.090
> 
> 标签：c#, autofac

根据[文档](https://code.google.com/p/autofac/wiki/LifetimeEvents)，我可以使用激活事件来“将实例切换为另一个实例或将其包装在代理中”，但我无法让它工作。

这是我尝试过的：

```
[TestFixture]
public class ReplaceInstanceTest
{
    public interface ISample { }
    public class Sample : ISample { }
    public class ProxiedSample : ISample {
        private readonly ISample _sample;
        public ProxiedSample(ISample sample) {
            _sample = sample;
        }
    }

    [Test]
    public void ReplaceInstance_can_proxy_for_interface_type()
    {
        var builder = new ContainerBuilder();
        builder.RegisterType<Sample>()
               .As<ISample>()
               .OnActivating(x =>
                  x.ReplaceInstance(new ProxiedSample(x.Instance)))
               .SingleInstance();
        var container = builder.Build();

        var sample = container.Resolve<ISample>();
        Assert.That(sample, Is.InstanceOf<ProxiedSample>());
    }

} 
```

以上导致类转换异常，因为 autofac 正在尝试转换`ProxiedSample`为`Sample`实例，但事实并非如此。

是否可以`ReplaceInstance`在[ActivatingEvent](https://code.google.com/p/autofac/wiki/LifetimeEvents)上使用来代理 autofac（2.6 或 3.0）中的对象？

我知道可以使用[RegisterDecorator](https://code.google.com/p/autofac/wiki/AdaptersAndDecorators)，但我的实际实现既配置代理又条件代理，所以如果可能的话，我更喜欢使用激活事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:11:02.910

Travis 在 autofac 列表上做出了回应，[详细说明了围绕此问题的一些挑战](https://groups.google.com/forum/?fromgroups=#!topic/autofac/BPdp3RpGbBw)。在他的评论和 NSGaga 的建议之间，我想出了以下解决方法：

```
[Test]
public void ReplaceInstance_can_proxy_for_interface_type_when_using_multi_stage_registration()
{
    var builder = new ContainerBuilder();
    builder.RegisterType<Sample>().AsSelf();
    builder.Register(c => (ISample)c.Resolve<Sample>())
           .OnActivating(x => x.ReplaceInstance(new ProxiedSample(x.Instance)))
           .SingleInstance();
    var container = builder.Build();

    var sample = container.Resolve<ISample>();
    Assert.That(sample, Is.InstanceOf<ProxiedSample>());
} 
```

可以使注册更紧凑：

```
builder.Register<ISample>(c => new Sample()).OnActivating(/*...*/); 
```

这种方法的缺点是，如果`Sample`构造函数发生更改，注册也必须更改，我通过具体类型的额外注册避免了这种情况。

# jquery - 使用 Jquery 将内容保持在固定标题下方

> ID：16218948
> 
> 赞同：2
> 
> 时间：2013-04-25T15:33:30.387
> 
> 标签：jquery, css, resize, window, height

这是一个[JS fiddle](http://jsfiddle.net/R4d57/7/)隔离我的问题

我有一个带有浮动内容的固定标题，它定义了宽度和高度，随着窗口变小，标题的大小会增加。

我需要的是具有“page-bump”类的div始终与标题相同的高度，以便#header下方的内容将与#header的底部齐平。

现在我有了它，所以每当刷新页面时，.page-bump 都会分配一个高度，它等于标题，太棒了！但是，它不会随着窗口大小的调整而更新。下面的代码：

HTML

```
<div id="header">
<div class="thing1"></div>
<div class="thing2"></div>
</div>
<div class="page-bump"></div> 
```

CSS

```
#header {
background-color:#0000FF;
width:100%;
position:fixed;
}
.thing1 {
float:left;
background-color:#a7a7a7;
width:300px;
height:50px;
}
.thing2 {
float:left;
background-color:#f2f2f2;
width:300px;
height:50px;
} 
```

Javascript/Jquery

```
var pageBump = function () {
var headerHeight = $('#header').height();
$('.page-bump').css('height',headerHeight);
};
$(window).resize(pageBump()); 
```

有什么建议么？提前致谢 ：）

# asp.net-mvc - 如何将脚本加载到局部视图 MVC 中

> ID：16218950
> 
> 赞同：1
> 
> 时间：2013-04-25T15:33:53.170
> 
> 标签：asp.net-mvc, razor, partial-views

我有一个使用 Razor 的 MVC 应用程序。我有一个使用 jquery 脚本的部分视图。jquery 脚本仅在局部视图中而不是 _layout 视图中引用时才有效。使用 firebug 时，在局部视图中引用该脚本时，我看不到该脚本。有没有办法引用 _layout 中的所有脚本并让它在所有视图和部分视图中工作？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:48:17.237

在您的`ActionResult`, 而不是做`return PartialView()`而不是`return View()`. 这将允许您渲染脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-03T19:17:49.100

好吧，也许您可​​以在这些 jquery 脚本的 bundle.config 中创建一个包，并在您的 _layout 中调用：

```
 bundles.Add(new ScriptBundle("~/bundles/NameBundle").Include(
             "~/SomeFolder/Scripts/YourJquery.js")); 
```

在你的 _layout.cshtml 中：

```
<body> 
   @Scripts.Render("~/bundles/NameBundle")
</body> 
```

这样每个获得 _Layout 的人也将获得那些 Jquery。

放入 _Layout 后，我​​不建议在其他视图中调用混合 jquery

# ios - segue 后 NSString 未正确传递

> ID：16218952
> 
> 赞同：1
> 
> 时间：2013-04-25T15:33:57.963
> 
> 标签：ios, segue

我正在使用一个故事板和一个似乎可以正常工作的条件转场。但是，当我将字符串传递给新视图控制器时，当我尝试使用 NSLog 将其打印出来时，它在新视图控制器中显示为 null。

VC1：

```
[self performSegueWithIdentifier: @"userDetailsSegue" sender: self];

    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"userDetailsSegue"])
{
    UIStoryboard *mainStoryboard1 = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    tableView1 * secondView = (tableView1*)[mainStoryboard1 instantiateViewControllerWithIdentifier:@"userDetails"];
    //tableView1 * secondView = [[tableView1 alloc] init];
    [secondView setNetID:userNameTextField.text];
    //NSLog(secondView.netID);
    NSLog(@"Works");
}
} 
```

VC2.h：

```
#import "ViewController.h"
@interface tableView1 : UITableViewController
{
    NSString *netID;
}

@property (nonatomic, retain) IBOutlet NSString *netID;

@end 
```

VC2.m:

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"my netID is: %@", netID);
NSLog(@"test:");} 
```

输出：

```
2013-04-25 10:23:56.576 HwPlusPlus[14240:c07] Works
2013-04-25 10:23:56.579 HwPlusPlus[14240:c07] my netID is: (null)
2013-04-25 10:23:56.580 HwPlusPlus[14240:c07] test: 
```

我试图设置 netID = [[NString alloc] init]; 在 VC2 中，但这也无济于事。知道我做错了什么吗？它拉起第二个视图控制器刚刚找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:42:44.620

下次请使用大写字母作为您的第一个字符`VC`，并尝试为您选择有意义或独特的名称`VCs`

VC1：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"userDetailsSegue"])
    {
        tableView1 * secondView =segue destinationViewController];
        secondView.netID=userNameTextField.text;
    }
} 
```

VC2.h：

```
#import "ViewController.h"
@interface tableView1 : UITableViewController
{
    NSString *netID;
}

@property (nonatomic, strong)NSString *netID;

@end 
```

VC2.m:

```
@implementation tableView1
@synthesize netID;
- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"my netID is: %@", self.netID);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:36:46.093

问题是这一行：

```
tableView1 * secondView = (tableView1*)[mainStoryboard1 instantiateViewControllerWithIdentifier:@"userDetails"]; 
```

您现在正在不必要地制作一个额外的视图控制器。不要那样做！它是错误的视图控制器，它永远不会出现在界面中；你只是在制作它，设置它，然后把它扔掉，毫无意义。`segue`in`prepareForSegue`已经有一`destinationViewController`组即将出现的视图控制器。使用它：

```
tableView1 * secondView = (tableView1*)segue.destinationViewController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:41:20.877

你应该试试这个：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
       if ([segue.identifier isEqualToString:@"SegueIdentifier"]) {
           UIViewController *viewController = segue.destinationViewController;
           // you can also use custom view controllers but you have to add a cast to that custmo view controller
           [viewController setNetID:userNameTextField.text]; 
       }
    } 
```

还要确保传递给 UIViewController 的值不为零。

# ms-access - 我如何使用访问传递查询来访问 sql sp

> ID：16218953
> 
> 赞同：1
> 
> 时间：2013-04-25T15:34:01.400
> 
> 标签：ms-access

我有一个存储过程在 SQL 中有 4 个参数，并且想要构建一个应用程序来访问 exec 这个 SP。

我有一个访问表单，它有四个文本框，只需键入传递参数和一个按钮即可单击，其中包含如下代码

```
 Private Sub Command13_Click()

  Dim dbs As DAO.Database
  Dim qdf As DAO.QueryDef
  Dim strSQL As String
  Const c_strSQL As String = "EXEC sp_xCopy @CurCo={P1}, @CurNumber={P2}, @NewCo={P3},   @NewNumver={P4}"

 Set dbs = CurrentDb     Set qdf = dbs.QueryDefs("QueryCopyVendor") 
 strSQL = Replace(c_strSQL, "{P1}", "Forms!CopyVendor!CurCo") 
 strSQL = Replace(strSQL, "{P2}", "Forms!CopyVendor!CurNumber") 
 strSQL = Replace(strSQL, "{P3}", "Forms!CopyVendor!NewCo")
 strSQL = Replace(strSQL, "{P4}", "Forms!CopyVendor!NewNumber")
 qdf.SQL = strSQL
 qdf.Execute
 Set qdf = Nothing
 Set dbs = Nothing

 End Sub 
```

但是当我提交时，我得到了同伴错误：

run_time 错误“3065”无法执行选择查询

这是否意味着我的 SP 中不能有选择查询？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:00:01.740

> 这是否意味着我的 SP 中不能有选择查询？

不，错误消息告诉您 Access 认为您的查询是 SELECT 查询（或某种返回记录的查询）并且您正在尝试`.Execute`它。Access 不喜欢这样，因为它认为您应该将返回的记录分配给`Recordset`.

要在 DAO 中创建传递查询 (PTQ)，您必须

*   将 QueryDef 的`.Connect`属性设置为至少`ODBC;`, 和
*   如果不返回行集，则将该`.ReturnsRecords`属性设置为`False`

以下是创建 PTQ 的基本代码：

```
Sub CreatePTQ()
Dim cdb As DAO.Database, qdf As DAO.QueryDef
Set cdb = CurrentDb
Set qdf = cdb.CreateQueryDef("ptq")
qdf.Connect = "ODBC;"
qdf.ReturnsRecords = False
qdf.SQL = "EXEC foo"
qdf.Close
Set qdf = Nothing
Set cdb = Nothing
End Sub 
```

此外，在您的代码中，您将用表单控件的*名称*替换占位符，例如...

```
strSQL = Replace(c_strSQL, "{P1}", "Forms!CopyVendor!CurCo") 
```

...当您应该用控件的*值*替换这些占位符时...

```
strSQL = Replace(c_strSQL, "{P1}", Forms!CopyVendor!CurCo) 
```

`EXEC`...请记住，如果任何参数是字符串，那么您需要在语句中为它们加上引号。

# c# - 将对象序列化为 XML

> ID：16218957
> 
> 赞同：1
> 
> 时间：2013-04-25T15:34:12.170
> 
> 标签：c#, asp.net, xmlserializer

我在 C# 设置中有一个将自身序列化为 XML 的类，并且这个类也有一个它序列化的对象列表。

```
[XmlRoot("Config")]
public class ConfigSerializer {

    [XmlArray("Nodes")]
    public List<Node> LstNodes { get; set; }  

} 
```

这是 Node 的类声明。

```
[XmlRoot("N")]
public class Node {
  // has a few different properties
} 
```

问题：当我将 ConfigSerializer 的实例序列化为 XML 时，它不会像我期望的那样序列化 XML，因为它与节点列表有关。看起来像这样...

```
<Config>
  <Nodes>
    <Node></Node>
  </Nodes>
</Config> 
```

但我希望它看起来像这样（因为 Node 类的 XmlRoot 声明）......

```
<Config>
  <Nodes>
    <N></N>
  </Nodes>
</Config> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:47:16.073

你可以用这个

```
 [XmlRoot("Config")]
    public class ConfigSerializer
    {
        [XmlArray("Nodes"),XmlArrayItem("N")]
        public List<Node> LstNodes { get; set; }
    } 
```

# php - 从表中选择作为另一个带有附加字符的表

> ID：16218958
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:34:13.147
> 
> 标签：php, sql, concatenation

我有一个包含许多整数的表，它是索引，例如`235,567,2,43,45,66,7`

我希望每条记录在字符串的开头和结尾都有逗号字符，例如。`,235,567,2,43,45,66,7,`

是否可以进行这样的查询？

```
select ','.data.',' from mytable as testtable 
```

我知道这行不通，但有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:36:00.820

是的，使用`CONCAT()`

```
select CONCAT(',', data, ',') from mytable as testtable 
```

或者`CONCAT_WS()`

```
select CONCAT_WS(',', data) from mytable as testtable 
```

* * *

如果你有这样的行：

```
data
1
2
3
4 
```

你想要的输出是`,1,2,3,4,`，然后使用`GROUP_CONCAT`

```
select CONCAT_WS(',', GROUP_CONCAT(data)) from mytable as testtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:38:17.080

```
SELECT CONCAT(  ",", data,  "," ) 
FROM mytable 
```

那是你要找的吗？返回结果的开头和结尾只有逗号？

# android - Galaxy Note - 使用 WPA2 打开 wifi 网络共享时，Android 操作系统崩溃（不是应用程序）

> ID：16218964
> 
> 赞同：1
> 
> 时间：2013-04-25T15:34:21.023
> 
> 标签：android, android-wifi, wifimanager, wifi

下面的方法`enableHotspot`适用于开放网络，但如果我使用那些未注释的配置设置 WPA2 网络，wifi 网络共享保持开启大约 10 秒，并且不执行任何其他操作或触摸屏幕，操作系统崩溃并且我得到黑屏. 3 秒后，它会返回禁用 wifi 网络共享并关闭应用程序。

如果我在 Galaxy Tab 7" 或中文设备上运行相同的进程，设备会自行重启。

这是上面提到的方法：

```
public static void enableHotspot(String networkSSID,String networkPass, Context context){
    // Enable tethering
    WifiConfiguration config = new WifiConfiguration();
    config.SSID = networkSSID;

    //WPA2
    config.hiddenSSID = true;
    config.preSharedKey = quoteNonHex(networkPass, 64);
    config.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    config.allowedProtocols.set(WifiConfiguration.Protocol.RSN); // For WPA2
    config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
    config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP); //this needs a server radius
    config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
    config.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    config.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
    config.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);

    //Simpler WPA2
    //config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
    //config.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
    //config.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);

    //OPEN
    //config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);

    WifiApManager wapm = new WifiApManager(context);
    wapm.setWifiApEnabled(config, true);

    Log.d("","Wifi Tethering is enabled.");

}

private static String quoteNonHex(String value, int... allowedLengths) {
    return isHexOfLength(value, allowedLengths) ? value : convertToQuotedString(value);
}

private static boolean isHexOfLength(CharSequence value, int... allowedLengths) {
    if (value == null || !HEX_DIGITS.matcher(value).matches()) {
        return false;
    }
    if (allowedLengths.length == 0) {
        return true;
    }
    for (int length : allowedLengths) {
        if (value.length() == length) {
            return true;
        }
    }
    return false;
} 
```

**更新 1**

这是按我的应用程序名称过滤的日志，并且`Clicked on Card Button`正是`enableHotspot`开始执行的点：

```
 04-25 16:43:10.610: I/SalesTest.activity.SalesCheckout(12526): Clicked on Card Button
            04-25 16:43:10.710: D/(12526): Wifi Tethering is enabled.
            04-25 16:43:10.840: D/dalvikvm(12526): GC_CONCURRENT freed 1709K, 35% free 32659K/49991K, paused 1ms+3ms
            04-25 16:43:34.805: I/ActivityThread(12526): Removing dead content provider: settings
            04-25 16:43:36.060: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.060: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.060: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.060: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.060: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.065: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.065: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.065: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.065: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8
            04-25 16:43:36.065: E/InputQueue-JNI(12526): channel 'xxxx' ~ Publisher closed input channel or an error occurred.  events=0x8 
```

这是完整的日志，请注意`*** FATAL EXCEPTION IN SYSTEM PROCESS`：

```
 04-25 16:43:10.610: I/testSalesactivity.SalesCheckout(12526): Clicked on Card Button
            04-25 16:43:10.625: I/power(8588): *** acquire_dvfs_lock : lockType : 1  freq : 1000000 
            04-25 16:43:10.625: I/ActivityManager(8588): START {intent.toShortString} from pid 12526
            04-25 16:43:10.625: D/PowerManagerService(8588): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1000000  uid : 1000  pid : 8588  tag : ActivityManager
            04-25 16:43:10.625: W/ActivityManager(8588): mDVFSLock.acquire()
            04-25 16:43:10.645: D/ActivityManager(8588): Trying to launch applicationName
            04-25 16:43:10.660: I/SurfaceFlinger(1690): id=161(18) createSurface 0x33e6c (1x1),1 flag=0
            04-25 16:43:10.660: D/PowerManagerService(8588): acquireWakeLock flags=0xa tag=KEEP_SCREEN_ON_FLAG uid=1000 pid=8588   myUID=1000 myPID=8588 myTID=8588
            04-25 16:43:10.705: E/WifiService(8588): Invoking mWifiStateMachine.setWifiEnabled
            04-25 16:43:10.705: D/WifiService(8588): setWifiApEnabled: allowWifiAp: true
            04-25 16:43:10.710: D/(12526): Wifi Tethering is enabled.
            04-25 16:43:10.710: D/WifiP2pService(8588): P2pDisabledState{ what=131203 when=-1ms }
            04-25 16:43:10.720: E/WifiHW(8588): check .ccode.info
            04-25 16:43:10.720: E/WifiHW(8588): /data/.ccode.info already exist!
            04-25 16:43:10.720: E/WifiHW(8588): ====[WIFI]MODULE is semcove=====
            04-25 16:43:10.725: D/com.android.internal.telephony.gsm.FastDormancyStateHelper(8782): onReceive() action=android.net.wifi.WIFI_AP_STATE_CHANGED
            04-25 16:43:10.765: I/SurfaceFlinger(1690): id=162(19) createSurface 0x3ffe4 (800x1280),2 flag=400
            04-25 16:43:10.765: V/PhoneStatusBar(8701): setLightsOn(true)
            04-25 16:43:10.790: I/ClipboardServiceEx(8588): mCBPickerDialog enter case. MSG_DISMISS_DIALOG
            04-25 16:43:10.840: D/dalvikvm(12526): GC_CONCURRENT freed 1709K, 35% free 32659K/49991K, paused 1ms+3ms
            04-25 16:43:10.850: D/DEFERED_APP_VISIBILITY(8588): tweaking closing app
            04-25 16:43:10.855: I/ActivityManager(8588): Displayed shortComponentName: +213ms
            04-25 16:43:11.080: I/SurfaceFlinger(1690): id=160 Removed idx=2 Map Size=5
            04-25 16:43:11.080: I/SurfaceFlinger(1690): id=160 Removed idx=-2 Map Size=5
            04-25 16:43:11.080: I/power(8588): *** release_dvfs_lock : lockType : 1 
            04-25 16:43:11.080: D/PowerManagerService(8588): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
            04-25 16:43:11.080: W/ActivityManager(8588): mDVFSLock.release()
            04-25 16:43:11.840: D/com.android.internal.telephony.gsm.FastDormancyStateHelper(8782): onReceive() action=android.net.conn.TETHER_STATE_CHANGED
            04-25 16:43:11.840: D/Tethering(8588): sendTetherStateChangedBroadcast 1, 0, 0
            04-25 16:43:11.840: E/MTPJNIInterface(10598): tethering status = false
            04-25 16:43:11.855: D/Tethering(8588): InitialState.processMessage what=4
            04-25 16:43:11.860: D/Tethering(8588): sendTetherStateChangedBroadcast 0, 0, 0
            04-25 16:43:11.860: D/com.android.internal.telephony.gsm.FastDormancyStateHelper(8782): onReceive() action=android.net.conn.TETHER_STATE_CHANGED
            04-25 16:43:11.865: E/MTPJNIInterface(10598): tethering status = false
            04-25 16:43:11.870: D/SoftapController(8552): Softap fwReload - Ok
            04-25 16:43:11.870: W/dalvikvm(8588): threadid=83: thread exiting with uncaught exception (group=0x40c721f8)
            04-25 16:43:11.875: E/AndroidRuntime(8588): *** FATAL EXCEPTION IN SYSTEM PROCESS: Thread-127
            04-25 16:43:11.875: E/AndroidRuntime(8588): java.lang.NullPointerException
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at java.nio.charset.ModifiedUtf8.countBytes(ModifiedUtf8.java:75)
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at java.nio.charset.ModifiedUtf8.encode(ModifiedUtf8.java:119)
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at java.io.DataOutputStream.writeUTF(DataOutputStream.java:197)
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at android.net.wifi.WifiApConfigStore.writeApConfiguration(WifiApConfigStore.java:187)
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at android.net.wifi.WifiApConfigStore.access$400(WifiApConfigStore.java:47)
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at android.net.wifi.WifiApConfigStore$ActiveState$1.run(WifiApConfigStore.java:118)
            04-25 16:43:11.875: E/AndroidRuntime(8588):     at java.lang.Thread.run(Thread.java:856)
            04-25 16:43:11.880: E/android.os.Debug(8588): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_sys_error
            04-25 16:43:11.905: I/dumpstate(12661): Check if stand-alone
            04-25 16:43:11.920: I/dumpstate(12661): begin
            04-25 16:43:12.045: E/lights(8588): write_int: path /sys/devices/virtual/sec/sec_touchkey/brightness, value 2
            04-25 16:43:12.045: W/PowerManagerService(8588): Timer 0x7->0x3|0x3
            04-25 16:43:12.045: I/PowerManagerService(8588): Ulight 7->3|0
            04-25 16:43:12.045: D/PowerManagerService(8588): setLightBrightness : mButtonLight : 0
            04-25 16:43:12.055: E/DataRouter(1688): usb connection is true 
            04-25 16:43:12.055: E/DataRouter(1688): DSR is ON. Don't send DTR ON.
            04-25 16:43:12.900: D/Tethering(8588): sendTetherStateChangedBroadcast 1, 0, 0 
```

有没有人遇到过类似的问题？关于发生了什么的任何线索？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-30T08:17:12.193

使用反射调用**setWifiApConfiguration方法的****WifiManager**时，**ssid**的**WifiConfiguration**参数不能为空，否则会导致部分手机系统设置入口，部分手机直接重启，logcat中会看到如下日志：

 ****```
java.lang.NullPointerException
at java.nio.charset.ModifiedUtf8.countBytes(ModifiedUtf8.java:75)
at java.nio.charset.ModifiedUtf8.encode(ModifiedUtf8.java:119)
at java.io.DataOutputStream.writeUTF(DataOutputStream.java:197)
at android.net.wifi.WifiApConfigStore.writeApConfiguration(WifiApConfigStore.java:207)
at android.net.wifi.WifiApConfigStore.access$400(WifiApConfigStore.java:57)
at android.net.wifi.WifiApConfigStore$ActiveState$1.run(WifiApConfigStore.java:138)
at java.lang.Thread.run(Thread.java:848) 
```****

# sql - T-SQL：从日期表中获取当前 + 前几年

> ID：16218974
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:34:48.000
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的日期表中有 2009 年到 2015 年的年份值。我只想得到从 Min(year) 到 Current(year) 的年份。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:36:33.167

只需选择与当前年份“小于或等于”的 thouse

```
select * from table where datepart(year, date) <= datepart(year, getdate()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:36:43.527

我认为你正在寻找这样的东西：

```
SELECT *
  FROM yourTable
  WHERE year BETWEEN (SELECT MIN(year) FROM yourTable) AND DATEPART(year, GETDATE()) 
```

或者，如果您没有年份而是完整日期：

```
SELECT *
  FROM yourTable
  WHERE theDate BETWEEN (SELECT DATEPART(year, MIN(theDate)) FROM yourTable) AND DATEPART(year, GETDATE()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:39:59.880

我认为最简单的是：

```
select *
from t
where YearValue <= year(getdate()) 
```

最小值会自行处理——在最小值之前您没有数据。

# php - 在 html 标记中拆分为 2 个模式

> ID：16218978
> 
> 赞同：-1
> 
> 时间：2013-04-25T15:35:00.880
> 
> 标签：php, split

我有一个这样的html标签

```
<img src="ngakak.gif" title="ngakak" /> 
```

我想用 2 种模式分割标签，它们是`title=`和`/>` 。然后将产生这样的数组：

```
Array
 (
     [0] => <img src="ngakak.gif"
     [1] => "ngakak"
 ) 
```

我希望在一个正则表达式中直接拆分 2 种模式。如何用 preg_split 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:37:33.043

您是否要从所有 img 标签中提取标题元素？

```
preg_match_all('/< *[img][^>]*title *= *["']{0,1}([^"'>]*)/',$content,$matches); 
```

# matlab - 在 Matlab 中更改图形字体没有效果

> ID：16218979
> 
> 赞同：9
> 
> 时间：2013-04-25T15:35:02.330
> 
> 标签：matlab, ubuntu, fonts, matlab-figure

我在标签和图例中渲染希腊字符时遇到问题，所以我认为切换字体可能会有所帮助。因此，我发现了一个更大的问题——Matlab 似乎根本不尊重我的字体设置。

我试过了，当然，

```
set(gcf, 'FontName', 'Ubuntu')
set(gca, 'FontName', 'Ubuntu') 
```

但也像

```
set(findall(gca, 'type', 'text'), 'FontName', 'Ubuntu') 
```

和

```
set(0,'DefaultAxesFontName', 'Ubuntu') 
```

我也尝试过切换渲染器，

```
set(0, 'DefaultFigureRenderer', 'OpenGL') % also tried 'zbuffer' and 'painters' 
```

我什至进入了图中的属性编辑器，并手动更改了字体。不管我做什么，字体都是一样的，丑陋的等宽字体（见下图）。这张图片是用图的菜单栏中的另存为...命令保存的，但是eg`print -dpng 'fonttest.png'`也不起作用。

我已经`fc-list`在我的终端和`listfonts`Matlab 命令提示符下仔细检查了`Ubuntu`字体是否已安装并且可用。我正在运行 Matlab R2012b。

如何在我的图形中设置字体？

**更新：**
正如评论中所建议的，我试图看看这是否可能是[Ubuntu 上的 Java 的问题](https://askubuntu.com/questions/116782/why-do-fonts-look-horrible-in-any-java-application)。果然，从 OpenJDK 切换到 Oracle Java 有所帮助，但还不够——我可以使用 Helvetica 和其他一些字体，但我无法在已安装的字体中自由选择。例如，Ubuntu 字体不起作用。（但是，在 Matlab 的主 GUI 中确实如此——我在菜单等中将字体更改为 Ubuntu，在编辑器和命令窗口中将字体更改为 Consolas，并且呈现正常。）

每当我选择一种不起作用的图形字体时，Matlab 都会使用下面屏幕截图中显示的内容作为后备。

![在此处输入图像描述](https://i.stack.imgur.com/FMVWe.png)

*,* `p`和*这里应该是希腊字母 pi、theta 和 phi（它们是用 etc 指定的*`q` *）* *，但我猜字体没有这些字符。**第三个图的 y-label 中奇怪的东西是瑞典语 ö - 它应该不是编码问题，因为文件保存为 UTF-8，这也是*`f` *`\pi` *`slCharacterEncoding` *返回的，所以我假设这也是一种字体问题。***

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-27T15:00:02.230

安装 xfonts-75dpi 和 xfonts-100dpi 对我来说是默认设置。

```
sudo apt-get install xfonts-75dpi xfonts-100dpi 
```

然后注销并重新登录。

这似乎允许符号（例如 \pi）和字体大小（例如 set(h, 'FontSize', 14)）更改（使用默认的 Matlab 字体）。

机器设置：Ubuntu 12.04 x64 和 Matlab R2012b

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T16:25:37.207

尝试使用选项“Interpreter”、“LaTex”（默认为“Interpreter”、“Tex”）。这可能会让你得到一个错误更少的字体渲染器。**

# knockout.js - 在 Knockout 中实现菜单 - 在具有不同视图模型的视图之间切换

> ID：16218989
> 
> 赞同：1
> 
> 时间：2013-04-25T15:35:26.210
> 
> 标签：knockout.js

本质上，我正在尝试实现 RobN 的极其简单的模板切换器[http://jsfiddle.net/rniemeyer/XYz8M/](http://jsfiddle.net/rniemeyer/XYz8M/)，它使用“模板”数据绑定。

```
 (---SO wants code here - see fiddle for complete code---)
   <div id="templateContent" data-bind='template: { name: currentView() }'></div>

   var viewModel = {
      currentView: ko.observable("template-1"),
      toggleView: function() {
       this.currentView(this.currentView() === "template-1" ? "template-2" : "template-1");   
     }
  };

  ko.applyBindings(viewModel); 
```

我已经看到了很多其他简单的示例，并且所有示例都为每个加载的模板使用相同的 viewModel 类。例外 - RobN 的 SamplePresentation 应用程序（我没有足够的代表点来发布另一个链接）虽然令人印象深刻，但我发现很难连接到我的 noobie KO 体验。我认为他是在他的 section.activate() 方法中这样做的，但是，我不清楚。

我想在一个真正的应用程序中使用这个概念，但是有绑定上下文问题。这是我想要做的：http: [//jsfiddle.net/jockor/DSEDh/4/](http://jsfiddle.net/jockor/DSEDh/4/)

```
 This line intentionally left blank (please see fiddle vs. mangling code here) 
```

基本上，当按下导航链接/按钮时，我只想将正文内容面板换成另一个模板。该模板将需要由其自己的视图模型支持的自己的数据。

上面的小提琴是我对这个概念的简化版本 - 只是试图在 Cats 和 Dogs 面板之间切换。我遇到的是绑定到“模板”数据绑定的数据用于加载的猫/狗模板。

有人可以告诉我我是否正确执行此操作，或者我是否在滥用“模板”绑定概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:08:11.627

我已经修改了你的 jsfiddle 来工作：

[http://jsfiddle.net/5rmAL/2/](http://jsfiddle.net/5rmAL/2/)

您还需要切换`data`模板绑定的字段。您只是在切换模板名称，我可以从您的代码中看到您也在寻找一种更改视图模型数据的方法。因此，我粗略地实现了它，以便在切换名称时将数据从 viewModel 切换到 viewModel。有更优雅的方法可以做到这一点，但 jsfiddle 只是为了演示。

通过改变`data`您可以修改模板指向的内容以获取其数据。通过使那个可观察的，我能够拥有它指向开关的数据。我上面的快速粗略实现使用了一个简单的对象，该对象在 observable 中保存模板名称和数据。由于模板名称和数据要同时切换，所以我更新了 observable 内部对象中的值，然后手动告诉 observable 其值发生了变化。如果更改模板名称之前的数据，它会尝试绑定之前的模板。同样，如果您更改数据之前的名称，它将尝试将旧数据绑定到新模板。因此，为了做到这一点而不会因为在重新绑定模板时找不到变量和东西而崩溃，您需要以某种方式确保您的`template`在您完成更改模板名称和要指向的数据之前，绑定不会更新。

编辑：我注意到您的淘汰赛绑定中有一个函数处理程序，它将 $data 作为第一个参数传递给函数。Knockout 总是首先将 $data 作为第一个参数传递给函数，所以我`function () { ....goto($data); }`用`....goto`(... = stuff) 替换了你的。这只是一种侧节点（甚至不需要对您的函数签名进行任何修改）。

# jquery - 动态附加 jQuery UI Spinner

> ID：16218996
> 
> 赞同：3
> 
> 时间：2013-04-25T15:35:50.980
> 
> 标签：jquery, jquery-ui, dynamic, append, jquery-ui-spinner

我在使用 jQuery UI Spinner 小部件时遇到问题。在 html 中添加输入时它工作正常；但是，当我动态添加输入时，它不起作用。我创建了一个微调器在此处动态添加时不起作用的示例：[jsfiddle example](http://jsfiddle.net/BsgCr/1/)

```
function injectSpinner(){
    console.log("Injecting Spinner");

    var p = document.createElement('p');
    var label = document.createElement('label');
    var text = document.createTextNode("Select a value:");
    var input = document.createElement('input');

    label.appendChild(text);
    label.setAttribute("for", "spinner");
    p.appendChild(label);

    input.setAttribute("id", "spinner");
    input.setAttribute("name", "value");
    p.appendChild(input);

    $("#spinner").spinner();

    $("#moduleArea").append(p);
}; 
```

我已经将此方法与许多其他 jQuery UI 小部件一起使用，似乎没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:42:50.757

在调用 .spinner() 之前，输入必须是 DOM 的一部分。
所以请在[我相应地更新你的小提琴](http://jsfiddle.net/BsgCr/2/)`$("#moduleArea").append(p);` **之前** 打电话。`$("#spinner").spinner();`

# php - fpdf换行符不起作用

> ID：16218997
> 
> 赞同：1
> 
> 时间：2013-04-25T15:35:54.737
> 
> 标签：php, knockout.js, fpdf

我有一个淘汰赛 observable，其中包含一个包含换行符的文本。

像这样：

```
 var  str += item.first_name +  " " + item.last_name + "," + item.occupation + "\n\n"; 
 str += "RE :" + item.first_name +  " " + item.last_name + ", DOB: "
                            + item.date_of_birth + "\n"; 
text = ko.observable(str); 
```

我用来显示字符串的方法是：

```
$pdf->MultiCell(0,8,$text); 
```

我在我的 pdf 中得到的结果是：

```
 Dr. Bart grahamson,MBBSRE :Jack Junior, DOB: 1985-01-02 
```

什么是捕捉这些换行符的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:06:34.200

使用 \n 和 \r。

```
var  str += item.first_name +  " " + item.last_name + "," + item.occupation + "\n \r\r \n"; 
 str += "RE :" + item.first_name +  " " + item.last_name + ", DOB: "
                            + item.date_of_birth + "\n \r"; 
text = ko.observable(str); 
```