# StackOverflow 问答 15793000-15793999

# ios - 使用 NSLayoutConstraint 添加 UIButton

> ID：15793001
> 
> 赞同：1
> 
> 时间：2013-04-03T16:32:02.980
> 
> 标签：ios, objective-c, ios6

我有下面的代码。但我在视图中看不到 UIButton 。帮助！

```
UIButton *addTag = [UIButton buttonWithType:UIButtonTypeRoundedRect];

[_overlayView addSubview: addTag];

[_overlayView setTranslatesAutoresizingMaskIntoConstraints:NO];

[_overlayView addConstraint:[NSLayoutConstraint constraintWithItem:_overlayView
                             attribute:NSLayoutAttributeCenterX
                             relatedBy:NSLayoutRelationEqual
                                toItem:addTag
                             attribute:NSLayoutAttributeCenterX
                            multiplier:1
                              constant:0]];

[_overlayView addConstraint: [NSLayoutConstraint constraintWithItem: _overlayView
                             attribute: NSLayoutAttributeBottom
                             relatedBy: NSLayoutRelationGreaterThanOrEqual
                                toItem:addTag
                             attribute:NSLayoutAttributeBottom
                            multiplier:1
                              constant:20]];

[addTag setTitle:@"Add Tag" forState:UIControlStateNormal]; 
```

我需要指定高度和宽度吗？有没有办法可以自动设置。

如果添加 [addTag sizeToFit]，则左上角会显示一个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:42:09.717

嗯……我花了一天半的时间。但我回答了我自己的问题。

我需要将翻译自动调整掩码更改为按钮上的约束，而不是视图上的约束。

```
[addTag setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

代替

```
[_overlayView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

# javascript - 通过单击 HTML/JS 文档中的图像加载视频

> ID：15793002
> 
> 赞同：1
> 
> 时间：2013-04-03T16:32:03.093
> 
> 标签：javascript, html, shockwave

我有一个简单的 HTML/JS 文档，在单击尝试播放视频的图像后，我在其中：

```
<!DOCTYPE html>
<html lang="en">

<head>
<script type="text/javascript">
    var embedCode = '<object data="http://www.youtube.com/watch?v=Ac_qGnPX8eI" type="application/x-shockwave-flash" height="240" width="320"><param name="src" value="http://www.youtube.com/watch?v=Ac_qGnPX8eI"><param name="allowfullscreen" value="true"></object>'
</script>
</head>

<body>
<div id="videocontainer">
    <img src="C:\thesis\100GreatP\eclipse_ws\test\src\org\cnstar\wiki\data\calm_waters.jpg" onclick="document.getElementById('videocontainer').innerHTML = embedCode;" height="240" width="320" />
</div>
</body>
</html> 
```

但是，点击图片后，没有任何反应。问题中已经解释了这个问题[replace image with a video embeded](https://stackoverflow.com/questions/838878/replace-image-with-a-video-embeded/)，其中解决方案以我在 HTML 文档中的方式呈现。但这对我不起作用。安装在计算机上的 Shockwave/Flash 播放器。没有成功加载任何浏览器（IE、Firefox、Chrome）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:17:07.707

取得了网站的这项权利[https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

```
<script type="text/javascript">
var embedCode = '<object width="640" height="390"> <param name="movie" value="http://www.youtube.com/watch?v=Ac_qGnPX8eI"></param> <param name="allowScriptAccess" value="always"></param><embed src="https://www.youtube.com/v/u1zgFlCw8Aw? version=3&autoplay=1" type="application/x-shockwave-flash" allowscriptaccess="always" 
width="640" height="390"></embed></object>'

<script> 
  function playVid(){
document.getElementById('videocontainer').innerHTML = embedCode
 } 
```

```
<div id="videocontainer">
<img       src="../../../../thesis/100GreatP/eclipse_ws/test/src/org/cnstar/wiki/data/calm_waters.jpg"     onclick="playVid();" height="240" width="320" >
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:37:52.807

如果正确遵循[YouTube JavaScript API](https://developers.google.com/youtube/js_api_reference)，您可以通过点击加载视频。只需阅读 API 即可。使用点击链接阅读 API 页面底部的演示。

[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

# jquery-ui - 如何为每个项目自定义位置 jquery-ui 工具提示

> ID：15793005
> 
> 赞同：1
> 
> 时间：2013-04-03T16:32:16.213
> 
> 标签：jquery-ui, tooltip

我使用默认代码申请所有具有标签 img 或属性为 tootltip 和标题的网站

```
$(document).tooltip({
        track: true,
        items: "img, [tooltip], [title]",
        content: function() {
            var element = $( this );

            if ( element.is("[tooltip]") ) {
                var src = element.attr("tooltip");
                return "<img src='" + src + "' width='100'>";
            }
            if ( element.is( "[title]" ) ) {
                return element.attr( "title" );
            }
            if ( element.is( "img" ) ) {
                return element.attr( "alt" );
            }   
        }
    }); 
```

但在某些情况下，我想更改另一个标签名称的位置。示例：使用具有 class="custome" 的标签，它将更改另一个位置 my 和 at，相反它使用默认位置。怎么做？

先生，我的英语不好

# ios - 创建具有宽度和高度的按钮表

> ID：15793006
> 
> 赞同：0
> 
> 时间：2013-04-03T16:32:16.867
> 
> 标签：ios, uibutton

我正在使用按钮创建一个单词搜索游戏来存储字母，并且我需要创建一个具有一定数量的列和行的表格。因此，如果表格应该是 15 x 20，我有一个用于 tableWidth 和 tableHeight 的 ivar，我需要制作 300 个按钮并将它们放在视图上。我不能使用界面生成器，所以我不确定如何创建按钮并将它们放置在视图上。有人对我有任何指示吗？让我知道是否需要更好地解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:58:37.573

编辑：我刚刚看到您对另一个您不想使用`UITableView`. 我将在下面留下我的原始答案，因为这是一种很好的方法（特别是如果当前并非所有按钮都可见），但您也可以执行以下简单的操作：

```
for (int i = 0; i < NUMBER_OF_ROWS; ++i) {
    for (int j = 0; j < NUMBER_OF_COLUMNS; ++j) {
        UIButton *newButton = [[UIButton alloc] init];
        newButton.frame = ... // Calculate frame based on i and j
        // Customize other behavior of the button (appearance, targets, etc) based on i and j
        [superviewToAddButtonTo addSubview:newButton];
        // If not using ARC: [newButton release];
    }
} 
```

* * *

`UITableView`第一次使用时可能会感到困惑。

第一件事是创建一个自定义子类`UITableViewController`，它为您声明了一些好东西，并自动将您的类设置为符合两个相关协议（`UITableViewDelegate`和`UITableViewDataSource`）。然后，您需要覆盖提供有关您的表的信息的方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    cellIdentifier = @"Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:cellIdentifier]; // if you're not using ARC, make sure to autorelease...

        for (int i = 0; i < NUMBER_OF_COLUMNS; ++i) {
            UIButton *newButton = [[UIButton alloc] init];
            // Set the frame and customize the button in other ways, and then...
            [cell addSubview:newButton];
            // If you're not using ARC, make sure to release...
        }
    }
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return NUMBER_OF_ROWS;
} 
```

您可以执行其他各种操作来自定义表格，但这应该可以为您提供所需的基本功能。因此，为了实际将其中之一添加到您的应用程序中，您将执行以下操作：

```
MyTableViewControllerSubclass *tableViewController = [[MyTableViewControllerSubclass alloc] init];
[superViewToAddTableTo addSubview:tableViewController.tableView];
// If you're not using ARC, make sure to release the tableViewController in your dealloc method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:42:31.547

iOS 表格只有一列，因此每一行都是一个单元格。您可以使用多个按钮填充每个单元格，并使其看起来像多列。还要查找 UICollectionView。

您需要以编程方式创建 UIButton，如下所示：

[如何以编程方式创建基本的 UIButton？](https://stackoverflow.com/questions/1378765/how-do-i-create-a-basic-uibutton-programmatically).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:47:51.690

UIButton 是一个视图 (UIView)。以编程方式创建它，给它一个框架（您必须为每个按钮计算它），并将其作为子视图添加到您的整体网格视图中。

如果你不知道 UIView 是什么，如何让一个 UIView 成为另一个 UIView 的子视图，视图定位是如何工作的等等（例如什么是框架），请阅读我的书：

[http://www.aeth.com/iOSBook/ch14.html](http://www.apeth.com/iOSBook/ch14.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:49:08.767

1.  获取`width`屏幕。

2.  获取`height`屏幕。

3.  分别找到每个按钮`w`和。`h``width/15``height/20`

4.  循环 r=0 到 14 步 +1 转到第 5 步。

5.  循环 c=0 到 19 步 +1 转到第 6 步。

6.  用 x=0*width, y=0*height, width, height 制作框架

7.  如果需要，使用上面的框架制作一个按钮，设置标题，目标/动作。

8.  下一个 c 循环

9.  下一个 r 循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T17:02:48.447

如果您不想使用 UITableView，我建议您将自定义视图容器与您的按钮放在一起。

循环遍历您的行和列，并将 UIButtons 作为子视图添加到您的主视图。您必须通过它们的框架处理 UIButton 的放置，并调整它们的高度/宽度以适应网格。这是一些狡猾的伪代码：

```
#import "ViewController.h"

@interface ViewController ()

@property (nonatomic) NSMutableArray *buttons;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // 320 x 460 for regular iPhone screen size
    // 320 / 8 = 40 px width
    // 460 / 10 = 46 px tall
    // 8 * 10 = 80 buttons

    double width = 40.0;
    double height = 46.0;

    double xOffset = 0.0;
    double yOffset = 0.0;

    int rowCount = 0;
    int columnCount = 0;

    for(int i = 0; i < 80; i++) {

        xOffset = columnCount * width;
        yOffset = rowCount * height;

        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = CGRectMake(xOffset, yOffset, width, height);
        button.tintColor = [UIColor redColor];

        [self.view addSubview:button];

        columnCount++;

        if (columnCount == 8)
            columnCount = 0;

        if (i == 9 ||
        i == 19 ||
        i == 29 ||
        i == 39 ||
        i == 49 ||
        i == 59 ||
        i == 69 ||
        i == 79)
        rowCount++;
    }
}

@end 
```

我敢肯定，这可以大大改进，但它会在指定的尺寸中绘制一个按钮网格。

# active-directory - 查询LDAP组的其他域成员

> ID：15793008
> 
> 赞同：0
> 
> 时间：2013-04-03T16:32:19.923
> 
> 标签：active-directory, ldap

我的 LDAP 组`TestGroup`具有`A`. 它包含来自域`A`和`B`的成员`C`。

当我查询 的**所有**成员时`TestGroup`，它只返回域中的成员`A`- 组的域。

`TestGroup`无论域如何，如何查询 的所有成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:47:52.170

您当前的过滤器正在寻找`user`直接属于该组的所有对象。您需要获取组对象，并枚举`member`属性。这将为您提供每个成员的专有名称。如果您需要访问成员的对象，那么您将不得不使用类似 (distinguishedName=) 的东西来搜索它。

这并不容易。您必须决定是否要递归获取成员。我很确定来自其他域的用户由外部安全主体容器中的虚拟对象表示。

# openerp - OpenERP 7 HR Payslip Python 代码

> ID：15793009
> 
> 赞同：0
> 
> 时间：2013-04-03T16:32:20.383
> 
> 标签：openerp

我正在尝试使用以下 python 代码创建一个名为 Basic Daily 的工资规则：

```
result = contract.wage * worked_days.WORK100.number_of_days 
```

但它给出了错误：为薪金规则定义的错误python代码。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:03:39.420

![在此处输入图像描述](https://i.stack.imgur.com/8q33e.png)您似乎没有在合同中定义工作时间表。如果您想使用工作日，那么您必须在合同中定义工作时间表，在表格中计算工作天数和休假天数

# asp.net-mvc - 将 Nuget 用于共享视图

> ID：15793015
> 
> 赞同：6
> 
> 时间：2013-04-03T16:32:45.673
> 
> 标签：asp.net-mvc, nuget

我正在启动一个新的应用程序，它将与未来的其他应用程序共享相同的导航栏（至少内容）。这些都将托管在同一个域上，但可能是不同的服务器。

我知道 Nuget 可用于共享库，但它在共享共享视图中的潜在用途是什么，例如 _SharedHeader、_Master 页面。例如，每个应用程序都必须拉下新的 nuget 包并重新部署以查看导航栏中的更改，但此代码更改位于一个位置，而不是在每个应用程序中更新 _SharedHeader。

还有其他更好的选择吗？我不确定 ISS 中的站点如何继承共享视图，我遇到过它们在虚拟目录中共享 web.configs。

是否可以使用一个 nuget 包来共享视图，这是一个好主意，其他可能的后果是什么？我对 nuget、mvc 和相关主题的了解非常初级，但这似乎是管理代码的好主意。

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:36:00.760

您可以使用 NuGet 包安装预定义的共享视图（将由多个项目使用）。查看@ [http://docs.nuget.org/docs/creating-packages/configuration-file-and-source-code-transformations](http://docs.nuget.org/docs/creating-packages/configuration-file-and-source-code-transformations)了解更多详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:15:41.257

为了从类库中共享视图，您必须编译它们。为此目的有一个名为[RazorGenerator](http://razorgenerator.codeplex.com/)的插件。如何使用 RazorGenerator 超出了我可以在答案中提供的范围，但是上面的链接和一些在线研究应该可以为您提供设置它所需的一切。

一旦你在类库中获得了你的视图，用它创建一个 nuget 包的工作方式与其他任何东西一样。再说一次，让谷歌指引方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:48:06.990

您可以使用 NuGet 包的功能来包含内容，而不仅仅是库来实现这一点。安装 NuGet 包后，它会将共享视图复制到您的项目中。如果您的项目需要，这将使您能够调整这些共享视图。

这是[Nuspec 参考](http://docs.nuget.org/docs/reference/nuspec-reference)。我无法直接链接到它，但向下滚动到**File Element Examples**，然后是**Content Files**

# ruby - JRuby 调试 IDE 的问题

> ID：15793022
> 
> 赞同：1
> 
> 时间：2013-04-03T16:33:01.283
> 
> 标签：ruby

我试图让调试器为 JRuby 1.7.3 工作：

我安装了 ruby​​-debug / base / ide gems。然后我尝试在 Aptana 和 NetBeans 上运行一个基本的 Ruby 脚本。在这两种情况下，我都会得到以下跟踪：

```
Fast Debugger (ruby-debug-ide 0.4.17.beta16, ruby-debug-base 0.10.5.rc3) listens on 127.0.0.1:55687
Hello World
10432: Exception in DebugThread loop: Bad file descriptor - Bad file descriptor
Backtrace:
org/jruby/RubyIO.java:2052:in `close'
  from: C:/jruby-1.7.3/lib/ruby/gems/shared/gems/ruby-debug-ide-0.4.17.beta16/lib/ruby-debug-ide/interface.rb:44:in `close'
  from: C:/jruby-1.7.3/lib/ruby/gems/shared/gems/ruby-debug-ide-0.4.17.beta16/lib/ruby-debug-ide/ide_processor.rb:102:in `process_commands'
  from: C:/jruby-1.7.3/lib/ruby/gems/shared/gems/ruby-debug-ide-0.4.17.beta16/bin/../lib/ruby-debug-ide.rb:121:in `start_control'
  from: org/jruby/RubyProc.java:261:in `call'
  from: org/jruby/RubyProc.java:213:in `call' 
```

我现在使用的是预发布版本，但是在使用发布版本时我得到了同样的错误。

注意：我使用 NetBeans 中的内置 Ruby 解释器（不是 JRuby）成功调试。

# java - 获取密码

> ID：15793024
> 
> 赞同：0
> 
> 时间：2013-04-03T16:33:03.817
> 
> 标签：java

我有一个 Java 程序，它有两个类，主类和`appGUI`类。

这是主类：

```
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class Main {

    /**
     * @param args
     */

    public static void main(String[] args) throws Exception {

        appGUI gui = new appGUI();
        gui.setVisible(true);

        String password = ""; //The password entered...
        try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update(password.getBytes());
        System.out.println(new BigInteger(1, md.digest()).toString(16));

        } catch(NoSuchAlgorithmException e) {
            e.printStackTrace();
        }

    }

    } 
```

这是 appGUI 类：

```
 import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
/*
 * Created by JFormDesigner on Wed Apr 03 19:24:35 BST 2013
 */

/**
 * @author Hrach Ghapantsyan
 */
public class appGUI extends JFrame {
    public appGUI() {
        initComponents();
    }

    private void loginButtonActionPerformed(ActionEvent e) {
        // TODO add your code here
    }

    private void initComponents() {
        // JFormDesigner - Component initialization - DO NOT MODIFY  //GEN-BEGIN:initComponents
        // Generated using JFormDesigner Evaluation license - Hrach Ghapantsyan
        loginPasswordField = new JPasswordField();
        loginUsernameField = new JTextField();
        usernameLabel = new JLabel();
        passwordLabel = new JLabel();
        loginButton = new JButton();
        titleLabel = new JLabel();

        //======== this ========
        setTitle("Experimental X | Administrator Login");
        Container contentPane = getContentPane();
        contentPane.setLayout(null);
        contentPane.add(loginPasswordField);
        loginPasswordField.setBounds(80, 65, 100, loginPasswordField.getPreferredSize().height);
        contentPane.add(loginUsernameField);
        loginUsernameField.setBounds(80, 35, 100, loginUsernameField.getPreferredSize().height);

        //---- usernameLabel ----
        usernameLabel.setText("Username:");
        contentPane.add(usernameLabel);
        usernameLabel.setBounds(20, 40, 55, usernameLabel.getPreferredSize().height);

        //---- passwordLabel ----
        passwordLabel.setText("Password:");
        contentPane.add(passwordLabel);
        passwordLabel.setBounds(20, 70, 55, passwordLabel.getPreferredSize().height);

        //---- loginButton ----
        loginButton.setText("Login");
        loginButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                loginButtonActionPerformed(e);
            }
        });
        contentPane.add(loginButton);
        loginButton.setBounds(80, 95, 100, loginButton.getPreferredSize().height);

        //---- titleLabel ----
        titleLabel.setText("Experimental X | Administrator Login");
        contentPane.add(titleLabel);
        titleLabel.setBounds(45, 10, 190, titleLabel.getPreferredSize().height);

        { // compute preferred size
            Dimension preferredSize = new Dimension();
            for(int i = 0; i < contentPane.getComponentCount(); i++) {
                Rectangle bounds = contentPane.getComponent(i).getBounds();
                preferredSize.width = Math.max(bounds.x + bounds.width, ``preferredSize.width);
                preferredSize.height = Math.max(bounds.y + bounds.height, preferredSize.height);
            }
            Insets insets = contentPane.getInsets();
            preferredSize.width += insets.right;
            preferredSize.height += insets.bottom;
            contentPane.setMinimumSize(preferredSize);
            contentPane.setPreferredSize(preferredSize);
        }
        setSize(270, 170);
        setLocationRelativeTo(getOwner());
        // JFormDesigner - End of component initialization  //GEN-END:initComponents
    }

    // JFormDesigner - Variables declaration - DO NOT MODIFY  //GEN-BEGIN:variables
    // Generated using JFormDesigner Evaluation license - Hrach Ghapantsyan
    private JPasswordField loginPasswordField;
    private JTextField loginUsernameField;
    private JLabel usernameLabel;
    private JLabel passwordLabel;
    private JButton loginButton;
    private JLabel titleLabel;
    // JFormDesigner - End of variables declaration  //GEN-END:variables
} 
```

当我运行 Java 代码时，appGUI 类被激活，这会导致弹出窗口。弹出一个登录框。弹出登录框时，要求用户输入其用户名和密码。

我想要发生的是当用户单击登录时，它将密码提交给 Main 类并执行以下操作：

```
 String password = "the password that the user just inputed"; 
```

在里面：

```
 public static void main(String[] args) throws Exception {} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:56:13.330

一种方法是：

1.  使您的 appGUI 成为“主”类的内部类（请给一个更好的名称，我们暂时称它为测试。）

2.  在“测试”类中将您的密码声明为实例变量

3.  创建[内部类的实例](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

    ```
    Test q1=new Test()  
    appGUI gui = q1.new appGUI(); 
    ```

4.  在您的 loginButtonActionPerformed 方法中

    ```
     private void loginButtonActionPerformed(ActionEvent e) {
               // TODO add your code here
              password=loginPasswordField.getText();
           } 
    ```

5.  这不会完全解决您的问题。对内部类的调用可以在一个单独的线程中进行，以便您“测试”类/主线程等到您的用户完成提交，然后您可以使用 MessageDigest 进行帖子解析

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:56:59.683

在您的`Main`班级中为密码创建一个`PRIVATE String`变量。您可以简单地将现有的`String password`并将其移动到班级本身。

然后创建`PUBLIC SetPassword`方法来为这个字符串赋值，也在`Main`类中。

在`appGUI`用户单击“登录”按钮后执行操作的方法中的类中，调用此`GetPassword`方法并将来自 GUI 的密码字符串传递给它。

我希望以上内容可以提供足够的提示，而无需我为您编写实际代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T16:47:58.597

当您制作密码字符串时，您需要向其中添加一个 var，以便您稍后可以定义该字符串 = 表示 var。前任。

```
String password = new String("Somthing"); 
```

然后

```
 appGUI gui = new appGUI();

 if(gui.actionPerformed(loginPasswordField2).equals(password){

 } 
```

将其添加到您的主类，然后将其添加到您的 actionlister

```
 String loginPasswordFeild2 = new String(loginPasswordFild2) 
```

您必须事先定义密码，但它仍然可以使用。

# ios - iBooks 打开 PDF -“无法从没有窗口的视图中呈现弹出窗口”

> ID：15793025
> 
> 赞同：0
> 
> 时间：2013-04-03T16:33:07.247
> 
> 标签：ios, objective-c, ipad

我是一名 Objective-C 菜鸟，试图在我的应用程序的 iBooks 库中打开 PDF 文件。

我使用以下代码 - 它似乎创建了打开的对话框，但我收到一个错误 - “无法从没有窗口的视图中呈现弹出框”。我不知道如何纠正这个......我在这里做错了什么？

```
- (void) showOptionsMenu
{
    NSURL *fileURL = [NSURL fileURLWithPath:@"ibooks://test.pdf"];
    docController = [self setupControllerWithURL:fileURL usingDelegate:self];
    bool didShow = [docController presentOptionsMenuFromBarButtonItem:self.toolbarItems[0] animated:YES];
    if(!didShow)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Sorry, app not found" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:43:52.983

通过为我的 UIDocumentInteractionController 声明一个属性来解决问题。

# java - Spring MVC 将 HTTP POST 请求作为 HTTP GET 转发到另一个控制器

> ID：15793026
> 
> 赞同：0
> 
> 时间：2013-04-03T16:33:09.830
> 
> 标签：java, spring, jsp, model-view-controller

我试图让我的控制器使用一些参数将 POST 请求转发到另一个控制器：

```
@Controller
@RequestMapping("/register")
public class RegisterController {
    //...
    @RequestMapping(method=RequestMethod.POST)
    public String processSubmit(@Valid Voter voter, BindingResult result, HttpServletRequest request) {
          //...
          request.setAttribute("firstName", voter.getFirstName());
          request.setAttribute("lastName", voter.getLastName());
          request.setAttribute("ssn", voter.getSsn());
          logger.info("VoterID exists, returning redirect:/question/prepare");
          return "forward:/question/get";
        }
}

@Controller
@RequestMapping("/question")
public class QuestionController {
    //...
    @RequestMapping(value="/get", method=RequestMethod.GET)
    public String prepareVoterBean(@RequestParam String firstName, 
            @RequestParam String lastName, @RequestParam String ssn, Model model) {
        logger.info("QuestionController got GET REQUEST for " + firstName + lastName + ssn);
        VoterBean bean = new VoterBean();
        bean.setFirstName(firstName);
        bean.setLastName(lastName);
        bean.setSsn(ssn);
        model.addAttribute("questions",bean);
        return "questionPage";
    }
} 
```

我正在尝试编写 QuestionController 以使用从 processSubmit() 收到的参数创建一个新模型。问题是当我从 processSubmit 返回：/question/get 时，请求作为 HTTP POST 请求转发，并且服务器返回 HTTP 状态 405 -“不支持请求方法'POST'。为了构建新模型在 QuestionController 中，我认为我需要从 processSubmit() 转发 HTTP GET 请求。

我对 Spring Web MVC 框架文档进行了一些研究，并阅读了重定向前缀可用于从 POST 方法将请求作为 GET 请求转发，但是当我尝试重定向前缀（即`return redirect:/question/get`）时，服务器返回 HTTP 400 - The request sent by客户端在语法上不正确。我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:43:42.927

只是不要那样做。

在辅助方法中分解出两个控制器方法之间的公共部分，并从两个控制器方法中调用此辅助方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:38:39.677

原因是`the uri of /question/get requires params(firstName, lastName, ssn)`，但是当重定向到它时，你什么也没给它。也许可以帮助你:)

# javascript - 图像未在 Angular 中使用 ng-src 更新

> ID：15793027
> 
> 赞同：4
> 
> 时间：2013-04-03T16:33:11.577
> 
> 标签：javascript, angularjs

在我的控制器中，我调用了一项服务。该服务向 PHP 文件发出请求，该文件为我提供了图像的 URL。

原因是图像位于“Media Vault”中，这意味着我需要生成一个像这样的散列 URL 才能查看它：

`http://xxxx.vo.llnwd.net/o35/s/xxx/test/thumbs/slide1.jpg?e=1365006137&h=5852aeaf5beeeebff05a601801b61568`

上面的 URL 已经过期，因此您不会从该特定链接中看到任何内容。

我的图像标签是这样的：

`<img id="thumbnail" class="glow" ng-src="{{currentThumb}}" width="200" height="150"/>`

我的控制器中的 currentThumb 是：

```
$scope.currentThumb = ImageService.getImage({
    'type' : 'thumb',
    'index' : $scope.currentIndex + 1,
    'location' : $scope.location
}); 
```

我的服务看起来像这样：

```
app.factory('ImageService', function($http)
{
    var image = null;
    return {
        promise:null,
        getImage: function($data)
        {
            this.promise = $http.post('resources/auth.php',$data, {timeout:20000}).success(function(response)
            {
                image = response;
                log(response);
            })
        }
    }
}); 
```

当前 ImageService 成功返回了一个 URL（至少它在控制台中显示了该 url），并且当单击控制台中的日志结果时，图像加载正常。图像不更新的任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:26:45.607

我不确定您需要如何调用它，但另一种可能更好的方法是`ImageService.getImage()`在控制器的解析块中调用它。这样它就在控制器和视图处理之前全部加载。

**jsfiddle**

[http://jsfiddle.net/HYDmj/1/](http://jsfiddle.net/HYDmj/1/)

**看法**

```
<div ng-app="main">
  <div ng-controller="ExampleController">
    <h1>currentThumb</h1>
      <img ng-src="{{currentThumb.data}}">
  </div>
</div> 
```

**代码**

```
var app = angular.module('main',[]);

app.factory('ImageService', function($http)
{
    image = null;
    return {
        getImage: function($data)
        {
            image = $http.post('http://dopserv1.dop.com/test/auth.php', $data, {timeout:20000})
            return image
        }
    }
});

function ExampleController($scope, ImageService)
{
    $scope.currentThumb = ImageService.getImage({
        'type' : 'thumb',
        'index' : 1,
        'location' : 'http://digitalout.vo.llnwd.net/o35/s/mobilevforum/test/'
    });
} 
```

# asp.net - 每次刷新页面时插入记录

> ID：15793028
> 
> 赞同：0
> 
> 时间：2013-04-03T16:33:16.310
> 
> 标签：asp.net

我在代码后面有这个：当我在数据库中插入一行时，它是正确的，但是当我刷新页面时，最后插入的行被一次又一次地插入。

```
 protected void ButtonExecute_Click(object sender, EventArgs e)
        {

            string connectionString =cs.getConnection();
            string insertSql = "INSERT INTO profitCategories(name, IdUser) VALUES(@name, @UserId)";

            using (SqlConnection myConnection = new SqlConnection(connectionString))
            {
                myConnection.Open();
                SqlCommand command = new SqlCommand(insertSql, myConnection);

                command.Parameters.AddWithValue("@name", TextBoxCategory.Text);
                command.Parameters.AddWithValue("@UserId", cui.getCurrentId());
                command.ExecuteNonQuery();
                myConnection.Close();
            }
            TextBoxCategory.Text = string.Empty;

        } 
```

这解决了我的问题：[为每个页面刷新插入新行](https://stackoverflow.com/questions/1984090/new-row-inserted-for-each-page-refresh?lq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:47:51.217

在方法结束时，执行重定向到同一页面，这将清除 POST 数据。

像这样的东西：

```
Response.Redirect(HttpContext.Current.Request.Url.AbsoluteUri); 
```

# c# - 导致问题的 URL 百分比

> ID：15793031
> 
> 赞同：1
> 
> 时间：2013-04-03T16:33:21.480
> 
> 标签：c#, asp.net

我有一个需要下载的文件名，文件名中有一个`%`。问题是，当生成 URL 时，编码后的 URL 将更`%`改为`%25`. 从视觉的角度来看，这似乎是正确的，但是当您尝试下载文件时却找不到它。有任何想法吗？

`NavigateUrl = "GetAttachment.ashx?eKey=" + HttpUtility.UrlEncode(row[0].ToString());`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:36:43.567

您需要对其进行 html 解码，`%25`是 html 编码（十六进制）`%`符号的值。你可以这样做[`System.Web.HttpUtility.HtmlDecode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:37:51.453

如果可能的话，我会首先重新命名路径/文件以不包含“%”。我个人尝试并建议在 URL 链接和其他正在转换的数据形式（例如数据库插入和文件名）中保留空格和大多数符号 :) 祝你的项目好运！

# c++ - 在两个文本文件中查找最常用的单词

> ID：15793037
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:33:35.850
> 
> 标签：c++, arrays, string, file, fstream

我有两个 txt 文件都多次使用相同的单词。我设法将它们都拉入数组并通过插入排序格式化了其中一个非格式化的 txt 文件。

现在我需要比较这两个格式化的数组来找到最常用的词以及它们被使用的次数。

我知道我可以使用 for 循环，遍历每个数组，但我不确定如何。有什么帮助吗？

编辑：这是我到目前为止所拥有的。

```
#include<iostream>
#include<fstream>
#include<string>
using namespace std;

const int size = 100;
void checkIF(string x)
{
    fstream infile;
    cout << "Attempting to open ";
    cout << x;
    cout << "\n";
    infile.open(x);
    if( !infile )
    {
        cout << "Error: File couldn't be opened.\n";
    }
    else
    {
        cout << "File opened succsesfully.\n";
    }
}
void checkFile()
{
    string f1 = "text1.txt", f2 = "abbreviations.txt";
    checkIF(f1);
    checkIF(f2);
}

string* readFiles(string txt1[],string abb[])
{
    fstream intxt1("text1.txt");
    fstream inabb("abbreviations.txt");
    int i = 0;
    while (!intxt1.eof())
    {   
        intxt1 >> txt1[i];
        //cout << txt1[i];
        i++;
    }
        while (!inabb.eof())
    {   
        inabb >> abb[i];
        //cout << abb[i];
        i++;
    }

    return txt1;
    return abb;
}

string* insertionSort(string txt1[], int arraySize)
{
    int i, j;
    string insert;

    for (i = 1; i < arraySize; i++)
    {
        insert = txt1[i];
        j = i;
        while ((j > 0) && (txt1[j - 1] > insert))
        {
            txt1[j] = txt1[j - 1];
            j = j - 1;
        }
        txt1[j] = insert;
    }
    return txt1;
}

void compare(string txt1[],string abb[])
{

}

void main()
{
    string txt1Words[size];
    string abbWords[size];
    checkFile();
    readFiles(txt1Words,abbWords);
    insertionSort(txt1Words,100);
    compare(txt1Words,abbWords);
    system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:13:43.287

首先让我们解决“两个文本文件中最常用的单词”的问题。这实际上取决于您如何定义最常用的。您基本上有两组带有计数的单词。

例如

档案一：`"apple apple apple banana"`

文件 B：`"apple apple banana orange orange orange orange orange"`

如果您将其存储为一组名称和计数，您将得到

档案一：`{("apple",5), ("banana",1)}`

文件 B：`{("apple",2), ("banana",1), ("orange",5)}`

*注意：这不是代码，它只是一个模型符号。*

那么在这个小例子中，**两个**文件最常用的是什么？但问题是“apple”是否应该是最常用的，因为它出现在两个文件中？或者“橙色”应该是最常用的，因为它在其中一个文件中使用最多？

我假设你想要这两组的某种交集。因此，只有出现在两个文件中的单词才算数。另外，如果我是你，我会按单词出现的最小值对单词进行排名，这样文件 A 中的 5 个“苹果”就不会对“苹果”的权重太高，因为它在文件 B 中只出现了两次。

所以如果我们把它写在代码中你会得到这样的东西

```
class Word
{
public:
    std::string Token;
    int Count;

    Word (const std::string &token, int count)
        : Token(token), Count(count) {}
}; 
```

和

```
 std::map<std::string, int> FileA;
    std::map<std::string, int> FileB;

    std::vector<Word> intersection;

    for (auto i = FileA.begin(); i != FileA.end (); ++i)
    {
        auto bentry = FileB.find (i->first); //Look up the word from A in B
        if (bentry == FileB.end ())
        {
            continue; //The word from file A was not in file B, try the next word
        }

        //We found the word from A in B
        intersection.push_back(Word (i->first,std::min(i->second,bentry->second))); //You can replace the std::min call with whatever method you want to qualitate "most common"
    }

    //Now sort the intersection by Count
    std::sort (intersection.begin(),intersection.end(), [](const Word &a, const Word &b) { return a.Count > b.Count;});

    for (auto i = intersection.begin (); i != intersection.end (); ++i)
    {
        std::cout << (*i).Token << ": " << (*i).Count << std::endl;
    } 
```

看到它运行：http: [//ideone.com/jbPm1g](http://ideone.com/jbPm1g)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:45:32.583

Insted 使用数组使用向量。

不是

```
string txt1Words[size]; 
```

但

```
vector<string> txt1Words; 
```

你可以简单地使用

```
std::count(txt1Words.begin(), txt1Words.end(), word_to_search); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:42:10.427

也许您应该从将每个单词映射到它的使用次数的哈希图开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:42:39.867

您可以为找到的每个单词使用地图。

```
std::map<std::string, int> wordmap;

for (int i = 0; i < arraylength; ++i)
{
   ++wordmap[array[i]];
} 
```

我假设这`array`是一个数组`std::string`。之后，您可以使用特定单词查询地图并获取该单词的计数。

```
wordmap[word] // returns count for word 
```

# sql-server - TSQL：动态更改选择结果列顺序

> ID：15793038
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:33:39.113
> 
> 标签：sql-server, tsql

是否可以动态更改结果集列顺序？

伪代码示例：

```
select [city], [state], [country] 
from mystuff
result order 2,1,3 
```

这样结果集将是

```
state | city | country
California, LA, US 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:46:59.690

不，列顺序由 SELECT 列表确定。如果有一个查询由于某种原因必须保持完整，您可以将其用作派生表。例如：

```
SELECT [city], [state], [country]
FROM (fixedquery) as X 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:10:54.507

你可以试试下面的方法，它会帮助你...

**询问 ：**

```
Declare @order as varchar(100), @Query varchar(1000), @Query2 varchar(1000)
set @order = 123

While len(@order) > 0
begin
      set @Query = IsNull(@Query,'') + 
                              case substring(@order, 1,1)
                                    when  1 then 'city' 
                                    when  2 then 'state'
                                    when  3 then 'country'
                              end + 
                              Case when len(@order) > 1 then ',' else '' end
      set @order = substring(@order, 2,len(@order))
end

set @Query2 = 'select ' + @Query + ' from mystuff'

Exec (@Query2) 
```

**输出 ：**

```
If you give order as 123 then

City -- State -- Country as result    

If you give order as 213 then 

State -- City --Country as result

If you give order as 231 then

State -- Country -- City as result 
```

看看这个...

# canvas - 三.js画布渲染和透明度

> ID：15793040
> 
> 赞同：3
> 
> 时间：2013-04-03T16:33:42.360
> 
> 标签：canvas, three.js

请查看启用和禁用 WebGL 的演示[。](http://stemkoski.github.com/Three.js/Wireframe.html)

当您在 WebGL 和画布渲染之间切换时（它会自动完成，因为 javascript 会检测您是否有 WebGL），仅线框球体（左侧的第一个球体）会发生变化。

启用 WebGL 后，您还可以看到球体背面的线框（其他球体上隐藏的部分，因为它们具有非透明材料）。

由于 WebGL 被禁用，您无法再欣赏透明度。

我正在准备一个演示，我想为那些不支持 WebGL 的浏览器提供支持：透明是至关重要的，因为我的想法完全基于它。我的演示文稿只有一个 6 面立方体，我想即使是旧 CPU 也可以毫无问题地以透明线框呈现它。

three.js 支持这个吗？有什么办法可以做到吗？我应该如何设置材质以使其即使在画布渲染中也能正常工作？

为了进一步证明我的观点，[这](http://stemkoski.github.com/Three.js/Dashed-3D.html)是第二个演示。与您在 WebGL 和画布之间切换的问题相同。

当前线框材质是这样声明的：

```
new THREE.MeshBasicMaterial( { color: 0x00ee00, wireframe: true, transparent: true } ); 
```

但仅在 WebGL 中表现如预期。

[Jsfiddle在这里](http://jsfiddle.net/DtMQG/)

谢谢阅读！

*ps 如果这不能满足我的需要，我愿意采用 Three.js 的任何替代方案。我必须准备这个演示，但我没有数学/几何知识来自己做这个，即使它像旋转 3d 立方体一样简单。*

使用 webgl：

![在此处输入图像描述](https://i.stack.imgur.com/T2wFA.png) ![在此处输入图像描述](https://i.stack.imgur.com/0Fg3n.png)

使用画布渲染：

![在此处输入图像描述](https://i.stack.imgur.com/kSzRC.png) ![在此处输入图像描述](https://i.stack.imgur.com/UyaLi.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T08:09:48.550

使用 时适用于您的情况的技巧是`CanvasRenderer`在同一位置创建两个相同的立方体 - 第二个是反面的。为方便起见，您可以将它们都添加到父对象中，但这不是必需的。

```
var wireframeMaterial = new THREE.MeshBasicMaterial( { color: 0x00ee00, wireframe: true, transparent: false, opacity: 1 } ); 

var wireframeMaterial2 = new THREE.MeshBasicMaterial( { color: 0x00ee00, wireframe: true, transparent: false, opacity: 1, side: THREE.BackSide } ); 

var cube = new THREE.Mesh( geometry, wireframeMaterial );
            parent.add( cube );

var cube2 = new THREE.Mesh( geometry, wireframeMaterial2 );
            parent.add( cube2 ); 
```

编辑：更新小提琴：http: [//jsfiddle.net/k0vcnkqh/](http://jsfiddle.net/k0vcnkqh/)

三.js r.70

# symfony-1.4 - 尝试编辑记录时获取“未知方法 Estado::”

> ID：15793046
> 
> 赞同：0
> 
> 时间：2013-04-03T16:33:54.943
> 
> 标签：symfony-1.4, symfony-forms

与此[问题](https://stackoverflow.com/questions/15777717/data-isnt-saved-when-i-send-the-form-in-symfony-1-4-20)相关，我在尝试编辑之前创建的任何记录时遇到错误。这是错误（我省略了一些不相关的部分，因为没有过多地扩展帖子）：

> 500 | 内部服务器错误 | Doctrine_Record_UnknownPropertyException 未知方法 Estado::
> 
> SF_ROOT_DIR/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Record.php 行 2658 中 () 的堆栈跟踪 ... }
> 
> ```
>  }
> 
>     throw new Doctrine_Record_UnknownPropertyException(sprintf('Unknown method 
> ```
> 
> %s::%s', get_class($this), $method));
> 
> ```
> }
> 
> /** at Doctrine_Record->__call('', array()) in SF_ROOT_DIR/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/record/sfDoctrineRecord.class.php 
> ```
> 
> 第 197 行 ... at sfDoctrineRecord->__call('', array()) in n/a line n/a ... at Estado->() in n/a line n/a ... at call_user_func(array (object('Estado'), '')) 在 SF_ROOT_DIR/plugins/sfDependentSelectPlugin/lib/source/sfDependentSelectObjectSource.class.php 第 56 行 ... 在 SF_ROOT_DIR/plugins/sfDependentSelectPlugin/ 中的 sfDependentSelectObjectSource->getRefValue('15') lib/widget/sfWidgetFormDependentSelect.class.php 第 98 行 ... 在 SF_ROOT_DIR/plugins/sfDependentSelectPlugin/lib/widget/sfWidgetFormObjectDependentSelect 中的 sfWidgetFormDependentSelect->render('persona[estado_id]', '15', array(), null)。 class.php 第 70 行 ... 在 sfWidgetFormObjectDependentSelect->render('persona[estado_id]', '15', array(),null) 在 SF_ROOT_DIR/plugins/sfDependentSelectPlugin/lib/widget/sfWidgetFormDoctrineDependentSelect.class.php 第 67 行 ... 在 SF_ROOT_DIR/lib 中的 sfWidgetFormDoctrineDependentSelect->render('persona[estado_id]', '15', array(), null) /vendor/symfony/lib/widget/sfWidgetFormSchema.class.php 第 512 行 ... 在 SF_ROOT_DIR/lib/vendor/symfony/lib/ 中的 sfWidgetFormSchema->renderField('estado_id', '15', array(), null) form/sfFormField.class.php 第 119 行 ...在 SF_ROOT_DIR/lib/vendor/symfony/lib/form/sfFormField.class.php 第 58 行中的 sfFormField->render()class.php 第 512 行 ...在 SF_ROOT_DIR/lib/vendor/symfony/lib/form/sfFormField.class.php 第 119 行中的 sfWidgetFormSchema->renderField('estado_id', '15', array(), null) .. . 在 SF_ROOT_DIR/lib/vendor/symfony/lib/form/sfFormField.class.php 第 58 行中的 sfFormField->render()class.php 第 512 行 ...在 SF_ROOT_DIR/lib/vendor/symfony/lib/form/sfFormField.class.php 第 119 行中的 sfWidgetFormSchema->renderField('estado_id', '15', array(), null) .. . 在 SF_ROOT_DIR/lib/vendor/symfony/lib/form/sfFormField.class.php 第 58 行中的 sfFormField->render()

我不知道在哪里寻找这个**Estado::**或者它失败的地方，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:13:44.187

所以问题在于小部件的定义。使用的原始定义：

```
$this->widgetSchema['estado_id'] = new sfWidgetFormDoctrineDependentSelect(array( 
    'model' => 'Estado', 
    'add_empty' => 'Seleccione estado', 
    'ajax' => true 
)); 

$this->widgetSchema['municipio_id'] = new sfWidgetFormDoctrineDependentSelect(array( 
    'model' => 'Municipio', 
    'depends' => 'Estado', 
    'add_empty' => 'Seleccione municipio', 
    'ajax' => true, 
    'order_by' => array('nombre', 'asc') 
)); 
```

这两个小部件都属于类`sfWidgetFormDoctrineDependentSelect`，但实际上只有`municipio_id`依赖关系。

似乎`sfWidgetFormDoctrineDependentSelect`需要一个`ref_method`或`depends`选项集才能正常工作。

如果您将其更改`estado_id`为此它将起作用：

```
$this->widgetSchema['estado_id'] = new sfWidgetFormDoctrineChoice(array( 
    'model' => 'Estado', 
    'add_empty' => 'Seleccione estado',
)); 
```

# mysql - MySQL - tinytext 和 varchar 有什么区别？

> ID：15793048
> 
> 赞同：0
> 
> 时间：2013-04-03T16:34:00.087
> 
> 标签：mysql, varchar, tinytext

多年来，我一直在编写 php/mysql 代码，假设 varchar 是在您知道输入字符串的长度时使用的——例如，如果报告编号始终是 20 个字母数字字符。或者，我一直认为当您想将字符串限制在 0 到 255 个字节之间时应该使用 Tinytext，但它的大小是可变的（如用户名字段）。

今天在[http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)上阅读规范，看起来 varchar 和 tinytext 完全相同 - 一个可变长度字符串，其限制在 0 到 255 之间字节。两者有什么区别？每个的预期用例是什么？

# c# - 升级到 Visual Studio 2012.2 后发布网站停止工作

> ID：15793051
> 
> 赞同：1
> 
> 时间：2013-04-03T16:34:10.300
> 
> 标签：c#, visual-studio, visual-studio-2012, publishing

好的，在将我的 Visual Studio 从 2012 升级到 Visual Studio 2012.2 ( [http://www.asp.net/vnext](http://www.asp.net/vnext) ) 后，我无法发布我的网站。

当右键单击我的 Web 项目并单击“发布网站”时，我得到的窗口也与我使用的不同。但是，我已经像这样设置了我的发布配置文件：

![在此处输入图像描述](https://i.stack.imgur.com/FoJHx.png)

然后我得到依赖错误，你可以在这里看到（是的，没有关于 DropBox 物理路径的讨论，这不应该是问题）：

![在此处输入图像描述](https://i.stack.imgur.com/szkTE.png)

我可以轻松构建项目，并且在发布到 DEBUG 模式时也可以发布。

您可以在此处查看我的 SLN 文件，并且所有链接似乎都是正确的。我唯一的疑问是 Release.AspNetCompiler.TargetPath，因为这是它使用的旧路径。：

```
Project("{E24C65DC-7377-472B-9ABA-BC803B73C61A}") = "Client", "Client\", "{E9447A39-3F6B-4603-B476-FB72BDB41015}"
    ProjectSection(WebsiteProperties) = preProject
        TargetFrameworkMoniker = ".NETFramework,Version%3Dv4.5"
        ProjectReferences = "{92655DFC-29BE-4EEE-A211-E96811E113AA}|GKBusiness.dll;{BFD0BEE2-D00B-4F25-A3D4-D6C5351FA6E4}|GKDatabase.dll;{A4A80063-3996-4B53-992A-0ED1C3D78959}|Utils.dll;{D998D4C0-A7C1-495C-A40B-3926F3CF593A}|MathLibrary.dll;{7F454D7D-8AD6-49A2-88C6-6DD569168618}|Common.dll;"
        Debug.AspNetCompiler.VirtualPath = "/Client"
        Debug.AspNetCompiler.PhysicalPath = "Client\"
        Debug.AspNetCompiler.TargetPath = "PrecompiledWeb\Client\"
        Debug.AspNetCompiler.Updateable = "true"
        Debug.AspNetCompiler.ForceOverwrite = "true"
        Debug.AspNetCompiler.FixedNames = "false"
        Debug.AspNetCompiler.Debug = "True"
        Release.AspNetCompiler.VirtualPath = "/Client"
        Release.AspNetCompiler.PhysicalPath = "Client\"
        Release.AspNetCompiler.TargetPath = "PrecompiledWeb\Client\"
        Release.AspNetCompiler.Updateable = "true"
        Release.AspNetCompiler.ForceOverwrite = "true"
        Release.AspNetCompiler.FixedNames = "false"
        Release.AspNetCompiler.Debug = "False"
        VWDPort = "16481"
        DefaultWebSiteLanguage = "Visual C#"
    EndProjectSection
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "GKBusiness", "GKBusiness\GKBusiness.csproj", "{92655DFC-29BE-4EEE-A211-E96811E113AA}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "GKDatabase", "GKDatabase\GKDatabase.csproj", "{BFD0BEE2-D00B-4F25-A3D4-D6C5351FA6E4}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Utils", "Utils\Utils.csproj", "{A4A80063-3996-4B53-992A-0ED1C3D78959}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "MathLibrary", "MathLibrary\MathLibrary.csproj", "{D998D4C0-A7C1-495C-A40B-3926F3CF593A}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Common", "Common\Common.csproj", "{7F454D7D-8AD6-49A2-88C6-6DD569168618}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "GKTest", "GKTest\GKTest.csproj", "{8BA66640-32FE-4DE1-B527-8986BD3F8713}"
EndProject
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = "Solution Items", "Solution Items", "{2394BF74-243E-4521-9E2C-AEDC2AFB0D97}"
    ProjectSection(SolutionItems) = preProject
        GodeKarakterer.vsmdi = GodeKarakterer.vsmdi
        Local.testsettings = Local.testsettings
        TraceAndTestImpact.testsettings = TraceAndTestImpact.testsettings
    EndProjectSection
EndProject 
```

我真的不知道出了什么问题。但我当然希望能够发布我的网站！

我已尝试重新启动 Visual Studio、重建解决方案、清理解决方案并重新启动计算机。

谢谢微软 - 我喜欢这个更新.. Grrrr！:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:08:43.617

我在 Visual Studio 2012 中的发布选项也遇到了一些令人讨厌的问题。

您可能想尝试一些事情：
- 删除发布配置文件（同时检查文件系统）。
- 清洁溶液。
- 关闭 Visual Studio。
- 重新启动您的 PC（以终止所有网络服务器进程）。
- 清洁温度。C:\Windows\Microsoft.Net\Framework\ 下的文件。
- 启动 Visual Studio。
- 建造。
- 重新创建发布配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:15:15.777

我想，您需要永久放弃**Visual Studio 2010**或**11**，并且不要卸载它们中的任何一个。如果您在其中打开解决方案，您似乎会重新破坏**Visual Studio 2012 。**

1.  打开开始菜单并输入*“%AppData%”*并输入以进入您的**应用程序数据文件夹**。
2.  如果您没有被自动放置在该文件夹中，请转到*“漫游”*文件夹。
3.  打开*“微软”*文件夹。
4.  打开*“VisualStudio”*文件夹。
5.  您将看到一个名为*“11.0”*的 VS 2012 文件夹以及一个名为*“10.0”*的 VS 2010 文件夹。
6.  删除或重命名*“10.0”*文件夹。
7.  删除或重命名不是*“11.0”*文件夹的所有其他文件夹。
8.  重新启动**Visual Studio 2012**。

看看你的**Visual Studio 2012**是否可以工作。祝你好运！

# d - D语言的语言自省

> ID：15793058
> 
> 赞同：3
> 
> 时间：2013-04-03T16:34:35.117
> 
> 标签：d

是否有类似 D 语言的 lint 之类的东西，或者是否有任何框架可以快速构建检查器？

**编辑 1**

回想起来，我记得我一周前看过工具 DScanner。该工具只能返回类名和其他一些东西，但它包括一个完整的 Lexer 和 Parser。

源代码[https://github.com/Hackerpilot/Dscanner](https://github.com/Hackerpilot/Dscanner)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:21:35.117

> D语言有没有类似lint的东西

[Stefan Rohe 将在今年的 D 会议上介绍 AnalyzeD](http://dconf.org/talks/rohe.html)。但是，[AnalyzeD 网站](http://analyzed.no-ip.org/)目前似乎已关闭。

> 或者是否有任何框架可以快速构建检查器？

[Brian Schott 正在研究 std.d.lexer](http://forum.dlang.org/post/dpdgcycrgfspcxenzrjf@forum.dlang.org)，这是对 Phobos（D 的标准库）的提议包含，它将允许对 D 程序进行词法分析。

其他一些项目可以在 D Wiki 上找到：

[http://wiki.dlang.org/Lexers_Parsers](http://wiki.dlang.org/Lexers_Parsers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T22:45:03.043

除了已经提到的`std.lexer`，还有一个非常不错的项目叫做 Pegged。

[Pegged](https://github.com/PhilippeSigaud/Pegged) 是 Philippe Sigaud 的解析表达式语法 (PEG) 生成器。在运行时和编译时解析。有一个很好的[教程](https://github.com/PhilippeSigaud/Pegged/wiki/Pegged-Tutorial)解释了如何使用它。

# r - R - 比较和删除数据框中具有相同列值的行，同时保留其中一个

> ID：15793062
> 
> 赞同：2
> 
> 时间：2013-04-03T16:34:51.927
> 
> 标签：r, dataframe

我有一个数据框，它由几行组成，“名称”列中的值相同，但“距离”列中的值不同。我想删除“名称”中具有相同条目的所有行，只保留距离最小的行。有没有比比较所有行更简单的方法，并在比较它们的“距离”值之前检查它们的“名称”条目是否相同？真实的数据框大约是 14000 行 x 14 列。我一直在寻找答案，但还没有找到任何东西，所以我会非常感谢任何帮助！

这将是原始数据框：

```
 name      distance number
[1,] "apple"   "2.5"    "4"   
[2,] "banana"  "3"      "6"   
[3,] "apple"   "1"      "2"   
[4,] "satsuma" "4"      "8"   
[5,] "satsuma" "7.5"    "1"   
[6,] "melon"   "3"      "3"   
[7,] "satsuma" "1"      "6" 
```

这就是我想要得到的（不一定按这个顺序）：

```
 name      distance number
[1,] "banana"  "3"      "6"   
[2,] "apple"   "1"      "2"   
[3,] "melon"   "3"      "3"   
[4,] "satsuma" "1"      "6" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:54:02.577

`name`首先，按and对 data.frame 进行排序`distance`，然后将要保留的行标记为每个名称的第一行：

```
sorted <- dat[order(dat$name, dat$distance), ]

keep <- c(TRUE, head(sorted$name,-1) != tail(sorted$name,-1)) 
```

结果是

```
sorted[keep, ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:42:44.367

你可以使用`aggregate`和`merge`喜欢下面

```
DF <- read.table(text='name      distance number
apple   2.5    4   
banana  3      6   
apple   1      2   
satsuma 4      8   
satsuma 7.5    1   
melon   3      3   
satsuma 1      6', header=TRUE)

merge(DF, aggregate(distance ~ name, data = DF, min))
##      name distance number
## 1   apple        1      2
## 2  banana        3      6
## 3   melon        3      3
## 4 satsuma        1      6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:46:32.977

几个开始的指针：

使您的数据尽可能易于其他人阅读。 `dput(head(your_data))`是一个很好的方法。还有两个你的数据是在一个矩阵而不是一个数据框中，所以你的数据类型是字符的限制最少，所以你的所有数据都是一个字符。我认为在这里将其存储为 data.frame 更好，因为您有混合数据类型。因此，我立即将您的数据作为数据框读取，并确保距离列是数字。

```
dat <- read.table(text='
name      distance number
"apple"   "2.5"    "4"   
"banana"  "3"      "6"   
"apple"   "1"      "2"   
"satsuma" "4"      "8"   
"satsuma" "7.5"    "1"   
"melon"   "3"      "3"   
"satsuma" "1"      "6"', header=T)  

dat$distance <- as.numeric(dat$distance)

#split by grouping variable
splitdat <- split(dat, dat$name)

#find the minimum distance and index that 
out <- lapply(splitdat, function(x) {
    x[which.min(x$distance), ]
})

#put it all back together as a data frame
data.frame(do.call(rbind, out), row.names=NULL) 
```

这是许多方法之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:58:22.427

我看到@geektrader 的聚合合并方法，但想知道合并是否可能是 CPU 和内存密集型的：

```
do.call(rbind, by( DF, DF['name'], function(d) d[which.min(d$distance), ] ) )
           name distance number
apple     apple        1      2
banana   banana        3      6
melon     melon        3      3
satsuma satsuma        1      6 
```

# php - Wordpress 子页面分页

> ID：15793067
> 
> 赞同：0
> 
> 时间：2013-04-03T16:35:10.900
> 
> 标签：php, wordpress, pagination, parent-child

我在调用子页面以显示的模板上有以下查询：

```
<?php $parent = $post->ID; ?>   
<?php query_posts(array('showposts' => 3, 'paged' => $page_num, 'post_parent' => $post-    >ID, 'post_type' => 'page', 'orderby'  => 'menu_order', 'order' => 'ASC'));?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

它工作正常，但我真的不需要对结果进行分页，我尝试了很多插件来实现这一点，但没有一个工作，在最好的场景中，分页插件正确显示了我有多少页，但是当我点击第二页时向我显示了相同的结果，网址更改为 /mysite/category/page/2/ 但它不会更改内容。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:43:38.590

你是如何设置 $page_num 的？

您是否使用 get_query_var() 更新变量？如果没有，您可以使用类似这样的方法来设置变量：

```
$page_num = (get_query_var('paged')) ? get_query_var('paged') : 1; 
```

看看： [http ://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query](http://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:53:25.363

感谢 Codebrick，我的代码现在看起来像这样并且可以正常工作！

```
<?php $parent = $post->ID; ?>   
<?php $page_num = (get_query_var('paged')) ? get_query_var('paged') : 1; ?>
<?php query_posts(array('paged' => $page_num, 'post_parent' => $post->ID, 'post_type' => 'page', 'orderby'  => 'menu_order', 'order' => 'ASC', 'posts_per_page' => 3, 'paged' => $paged));?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

剩下的就是你想要的:)

# assembly - 堆、栈和数据段是否在同一个汇编程序上？

> ID：15793069
> 
> 赞同：7
> 
> 时间：2013-04-03T16:35:13.897
> 
> 标签：assembly, cpu, heap-memory, stack-memory

据我所知，一个汇编程序分为两个 - 1）代码2）数据。现在，当我们在 c\c++ 上编写代码时，代码被加载到内存中，然后 CPU 开始执行代码，一条一条指令，作为汇编程序。我的问题是： 1\. c 代码存储在哪里？我的意思是，当我在 Visual Studio 中运行一个程序时，代码是否加载到其中一个——堆、堆栈……？2.所以内存实际上分为Stack，Heap和Date段，但是当CPU执行程序时，作为汇编程序，它们都是1个具有相同数据区域的汇编程序还是它们形成的，比如说2还是 3 个从一个跳到另一个的汇编程序？

** 让我添加这个问题，也许它会澄清我的意图：当我启动一个 C 程序时，代码（机器指令）被加载到内存中。所以，这是一个汇编程序。但是内存划分是如何发生的呢？我的意思是，堆栈、数据段等不同的内存部分如何修改汇编程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T16:37:37.923

来自维基百科：

> PC 架构支持程序中的几个基本读写内存区域，即：堆栈、数据和代码。堆是程序可用的另一个地址空间区域，操作系统可以从其中动态分配或释放内存，以响应诸如 malloc 和 free 之类的系统调用。

*我建议你阅读[全文](http://en.wikipedia.org/wiki/Data_segment)*

SO上还有这个问题： [堆，堆栈，文本等不同的段与物理内存有何关系？](https://stackoverflow.com/questions/9226088/how-the-diff-segments-like-heap-stack-text-section-are-related-to-the-physical)

此外，这些文章可能值得一读。尤其是最后一个：

*   [什么是栈段？](http://wiki.answers.com/Q/What_is_stack_segment)
*   [C51：创建固定堆栈段](http://www.keil.com/support/docs/2638.htm)
*   [8086中的堆栈段和额外段](http://imbhargav.wordpress.com/2012/11/28/stack-segment-and-extra-segment-in-8086/)

要回答您的问题：

*1.c代码存放在哪里？*

在代码段中。

*2.所以内存实际上被划分为Stack、Heap和Date段，*

在实模式下，是的。在保护模式下……取决于。极其简化：程序内存映射到物理内存。每个程序都存在于自己的地址空间中。

如果您想了解更多信息，我推荐这些文章：

*   [实模式](http://en.wikipedia.org/wiki/Real_mode)
*   [保护模式](http://en.wikipedia.org/wiki/Protected_mode)
*   [实模式和保护模式的区别](http://www.geek.com/chips/difference-between-real-mode-and-protected-mode-574665/)

*3.但是当CPU执行程序时，作为一个汇编程序，它们都是1个具有相同数据区域的汇编程序还是它们形成的，比如说2个或3个汇编程序从一个跳转到另一个？*

不，没有跳跃。处理器寄存器指向要执行的下一条指令。其他人则指向堆栈等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T18:29:08.983

*段*或*节*是对象和可执行文件中的连续划分，很像书中的章节。stack 和 bss 部分在文件中不存在，但在运行时创建。

这些部分的重点主要是将程序划分为操作系统可以以不同方式保护的区域。为了安排*这一点，*这些部分必须从页面边界开始并且在内存中是连续的。

基本（“重要”）部分是......

*文本*或*代码*- 操作系统将对此部分进行写保护，并且由于它是不可变的，它还可以在运行相同可执行文件的多个进程或线程之间共享它

*数据*- 操作系统将映射此 r/w 并且不会直接^(​​1)共享它

*bss* - 本节由零初始化数据组成。

*stack* - 通常与程序分离，它通常从更高的地址向下增长

最后两个部分不在可执行文件中，因为它们不需要任何初始化。

如果您询问它们是如何实现的，那么，汇编器和链接器会创建一个目录，并像书中的章节一样以二进制形式写出各个部分。操作系统然后分别读取它们并将它们放在地址空间的不同部分中。

类 Unix 系统和 Windows 之间的细节和术语不同，但原理是相同的。

* * *

^(1\. 是*的，写时复制*也允许共享数据。)

# dotnetnuke - 无法将皮肤应用于 DotNetNuke 6

> ID：15793071
> 
> 赞同：0
> 
> 时间：2013-04-03T16:35:15.747
> 
> 标签：dotnetnuke, skins

首先感谢您的关注。

我的电脑上安装了 dotnetnuke 6.x。

我使用管理>>扩展>>管理>>安装扩展向导安装新皮肤，并根据Dotnetnuke网站上的说明单独安装皮肤和容器。

但是当我安装新皮肤时，皮肤只加载在皮肤页面上，我在我网站的其他页面上看不到新皮肤的任何部分。我检查了皮肤编辑器页面上的所有复选框，例如主机、站点、网站和管理员。

似乎有些东西在我的系统上无法正常工作，但我找不到原因，我该如何找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:09:45.777

转到**管理 --> 站点设置，然后在外观部分下，通过在****站点皮肤**选项旁边选择要使用的皮肤来选择它。

完成后，进入每个页面并转到**Page settings**并在**Advanced settings --> Appearance 部分**下选择**Page Skin**组合框并选择**None Specified**。

希望这可以帮助。

# excel - 可以在excel中提示输入吗？

> ID：15793075
> 
> 赞同：1
> 
> 时间：2013-04-03T16:35:24.803
> 
> 标签：excel

是否可以提示用户在 excel 中输入值而不使用 VBA 或 C++ 脚本？还是只能使用 VBA/C++ 来完成？

我对所有 excels 功能都很陌生。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:38:43.260

以这种方式提示只能使用 VBA 完成。

但是，您可以在没有 VBA 的情况下创建数据验证规则，当用户输入错误的值时会提示用户：http: [//office.microsoft.com/en-us/excel-help/apply-data-validation-to-cells -HP010072600.aspx](http://office.microsoft.com/en-us/excel-help/apply-data-validation-to-cells-HP010072600.aspx)

# clojure - 如何从序列元素中删除 ^M

> ID：15793077
> 
> 赞同：2
> 
> 时间：2013-04-03T16:35:34.180
> 
> 标签：clojure

我已经大脑冻结，需要帮助找出从一个或多个序列元素中删除 \return \newline 字符的最佳方法。我知道 \return 是 13 而 \newline 是 10。我需要帮助弄清楚如何在地图或过滤器中使用它。

我从一个变成向量的程序接收数据，看起来像这样

```
AT|254 Torrence Ave||Scuffington|ZA|12345|7248|541|C029^M\n
|11|900036|e| 
```

但应该是这样的：

```
AT|254 Torrence Ave||Scuffington|ZA|12345|7248|541|C029|11|900036|e| 
```

删除回车的最佳方法是什么？

我试过过滤器，但不知道如何表示 a `<CR>`，所以过滤器给了我所有不是 a 的元素`<CR>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:45:12.023

^M（字符 nr 13）文字的 clojure 代码是`\return`, and `"\r"`if 是字符串文字的一部分。

所以你可以使用类似的东西：

```
(apply str (filter (fn [c] (not= c \return)) "string with \r characters")) 
```

# php - PHP：大数组迭代

> ID：15793080
> 
> 赞同：1
> 
> 时间：2013-04-03T16:35:46.703
> 
> 标签：php, arrays, iteration

当我对从读取 XLS 文件获得的数组进行迭代时，我一直遇到这个问题，当我有一个包含 19000 行的文件时，它突然停在第 9700 行而没有出现任何错误。

首先，我虽然是内存或时间执行，但事实并非如此，我将内存限制修改为 2GB，时间执行为 90 秒。

这是我正在使用的代码......

```
$data = new Spreadsheet_Excel_Reader();
$data->setOutputEncoding('CP1251');
data->read(basename($_FILES['excel_file']['name']));
echo $data->sheets[0]['numRows']."<br><br>";
$i=0;
$n = $data->sheets[0]['numRows'];
echo $n."<br>";
foreach ($data->sheets[0]['cells'] as $cell) {
   echo "$i - ".$cell[1].", ";
   $i++;
} 
```

# shell - xargs 和 find 的使用

> ID：15793083
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:36:01.500
> 
> 标签：shell, find, xargs

我有以下问题。我想打印几个文件的内容。每个文件位于不同的目录中，并且具有相同的名称。

```
/home/User1/data.txt
/home/User2/data.txt
/home/User3/data.txt 
```

每个文件都包含单个字符串。我想实现以下输出：

```
User1 string_from_data.txt
User2 string_from_data.txt
User3 string_from_data.txt 
```

我尝试使用以下推荐：

```
find . -iname "data.txt" | xargs cat 
```

但它只返回每个 data.txt 的内容

```
string_from_data.txt
string_from_data.txt
string_from_data.txt 
```

如何正确书写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:54:54.333

```
find . -iname "file*" -exec sh -c 'dirname $1 | xargs basename; cat $1' _ {} \; 
```

# android - Google Docs 电子表格中缺少“创建旧表单”？

> ID：15793084
> 
> 赞同：1
> 
> 时间：2013-04-03T16:36:02.730
> 
> 标签：android, google-docs, acra

其他人的 Google 文档电子表格中是否缺少“工具”->“创建旧表单”选项？到目前为止，我已经将它用于几个使用 ACRA 的应用程序。我去为一个新的应用程序创建一个新的电子表格，导入了模板，但该选项不再显示在我的工具菜单下。如果这最终被弃用，那么它可能会使 ACRA 对新项目无用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:15:28.493

谷歌在大约 9 个月前表示这种用法已被弃用，这在 ACRA 文档中得到了回应。您只需要使用另一个后端。Keven 创建了 ACRAlyzer，并且有像 BugSense 这样的选项提供免费和付费层级。

# node.js - 解析 utf-8 CSV 文件

> ID：15793087
> 
> 赞同：3
> 
> 时间：2013-04-03T16:36:15.510
> 
> 标签：node.js

我正在尝试解析包含 Node.js 中的 utf8 字符的 CSV 文件。

这是我的代码：

```
fs.readFile(path + files[i], 'utf-8', function(err, data) {
    if(err) { console.log(err); }
    console.log(data);
    // do something
}); 
```

问题是由于某种原因，utf8 字符无法正确显示（� 代替真实字符）。

我尝试用 'utf-8' 替换 'utf8' 或编写整个对象：

```
{encoding: 'utf8'} 
```

但这些方法都不起作用。

稍后在我的程序中，我使用 socket.io 将数据发送到浏览器，但这并没有改变任何东西，让我相信问题不在于终端/浏览器。

提前致谢 ！

# debugging - 托管时 CLRProfiler 未连接到 CLR

> ID：15793088
> 
> 赞同：2
> 
> 时间：2013-04-03T16:36:15.823
> 
> 标签：debugging, clr-hosting, clrprofiler

我有一个承载 CLR 的本机 Win32 应用程序，以使用 C# 作为一种复杂的“脚本”语言。

我遇到了内存泄漏，我决定尝试使用 Microsoft 的 CLR Profiler 进行调查。（我不确定泄漏是否得到管理，并且希望这个工具可以帮助揭示这一点，一方面。）

但是，当我告诉 CLRProfiler 启动我的（本机）应用程序时，尽管我的应用程序总是在运行的第一秒左右启动 CLR，但 CLRProfiler 继续显示提示`Waiting for application to start common language runtime`，即使我的应用程序显然正在运行其托管代码。

*如果 CLRProfiler 是由仅托管程序用于启动 CLR 的存根启动的，而不是*在应用程序显式加载和启动时，CLRProfiler 是否只能连接到 CLR `MSCOREE.DLL`？还是我只是做错了什么？

或者在启动 CLR 以使 CLRProfiler 与它相处时，我的本机应用程序需要做些什么（希望很简单）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:04:42.407

在做了两件事之后，我得到了它的工作：

1.  使用 CLR Profiler 的 .NET Framework 2.0 版本 - 有一个单独的 .NET Framework 1.1 版本，这是我最初发现的版本。它可能不适用于 CLR 2.0 及更高版本；和

2.  在管理员帐户下运行 CLR Profiler 和应用程序。

因此，只是为了确认，是的，CLR Profiler（至少是 Framework 2.0 版本）确实适用于托管 CLR 的本机应用程序（它自然只检查托管代码。）

# java - 错误：Java Null 和字符串输入异常

> ID：15793094
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:36:33.730
> 
> 标签：java, string, exception, nullpointerexception, try-catch

所以我想做一个验证检查，检查输入框是否为空，以及它是否有一个无效的参数，比如Java中的字符串。但是，此代码不起作用，它表示未定义 argumnet 类型。userid 是双精度的，我想检查输入框是否为空。我还想通过 try catch 块检查是否添加了任何无效数据（例如字符串）。输入框没有任何用于测试目的的验证。

```
if (userid != null);
catch (Exception e)   {  
logger.warn("Add data", e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:38:32.927

`double`是原始类型，永远不能`null`在 Java 中。如果要检查`null`，请使用`Double`，它是包装类型。

很难说出你的代码在这里做什么。你有`if`一个空的身体，所以它实际上什么都不做。另外，您希望在哪里引发异常？最后你不应该抓到`Exception`。口袋妖怪风格的异常处理表明你没有正确处理你的异常。

# mongodb - MongoDB GridFS 大小限制

> ID：15793096
> 
> 赞同：1
> 
> 时间：2013-04-03T16:36:36.973
> 
> 标签：mongodb, gridfs

我使用 MongoDB 作为将数据集存储为一系列列的便捷方式，其中有一个文档存储给定列的值，另一个文档存储 detaset 的详细信息，以及与其他文档的映射关联的列值。随着事情变得越来越大，我现在面临的问题是我不能再将整个列存储在一个文档中。

我知道还有 GridFS 选项，唯一的缺点是我相信它将文件存储为 blob，这意味着我将失去对列的一部分或指定索引处的值的随机访问，这令人难以置信从文档存储中很有用，但是我可能没有任何其他选择。

所以我的问题是：GridFS 是否也对文档的大小施加了上限，如果是的话，有人知道这是什么吗？我查看了 hte docs 并没有找到任何东西，但可能是我没有在正确的地方寻找，或者存在限制但没有很好的记录。

谢谢， 瓦卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T06:20:27.313

## 网格文件系统

根据[GridFS 文档](http://docs.mongodb.org/manual/core/gridfs/)：

```
Instead of storing a file in an single document, GridFS divides a file
into parts, or chunks, and stores each of those chunks as a separate
document. By default GridFS limits chunk size to 256k. GridFS uses
two collections to store files. One collection stores the file chunks,
and the other stores file metadata. 
```

GridFS 将允许您存储任意大的文件，但这对您的用例没有帮助。GridFS 中的文件实际上是一个大型二进制 blob，您不会获得结构化文档和索引的任何好处。

## 架构设计

您面临的基本挑战是您的模式设计方法。如果您正在创建的文档可能会超过 16Mb 的文档限制，那么随着文档大小的增加，这些也会对您的数据库存储和碎片产生重大影响。

适当的解决方案是重新考虑您的模式方法，以便您不会有无限的文档增长。这可能意味着展平您正在增长的“列”数组，以便它由文档集合而不是数组表示。

一个更好的（和单独的）问题是如何根据预期的数据增长模式重构您的模式。

# ios - 自定义 UITableViewCell 和子视图位置

> ID：15793107
> 
> 赞同：0
> 
> 时间：2013-04-03T16:37:22.037
> 
> 标签：ios, objective-c, uitableview, subviews, layoutsubviews

在我的自定义 UITableViewCell 中，我重写了方法（void）layoutSubviews，在此方法中我设置了新的子视图位置：

```
for (NSUInteger i = 0; i < views.count; ++i) {
    ViewData *viewData = (ViewData *)[views objectAtIndex:i];

    CGFloat x_pos = i <= currentViewPos ? 0 : contentViewWidth;
    viewData.x_current = x_pos + viewData.width * viewData.x_anchor;

    [viewData.view setCenter:CGPointMake(viewData.x_current, viewData.view.center.y)];

    if (i < currentViewPos) {
        [viewData.view setAlpha:0.5f];
    } else {
        [viewData.view setAlpha:1.0f];
    }
} 
```

当我的表格第一次加载时 - 所有项目都有正确的位置，但是当我按下某个项目并按下下一个视图控制器，然后返回我的表格时 - 第二个和下一个子视图在屏幕上不可见。只有 Alpha 属性是正确的。但是 layoutSubviews 被调用。如果我尝试滚动我的 UITableView - 重绘的项目将正确显示。

我做错了什么？

谢谢！

# c# - 在号召性用语之前我在哪里花时间？

> ID：15793110
> 
> 赞同：1
> 
> 时间：2013-04-03T16:37:26.880
> 
> 标签：c#, asp.net-mvc

> **回答**请检查您的 html 结构。

我有控制器和动作。

```
public class HomeController
{
   private Stopwatch controller_action;
   public HomeController()
   {
        controller_action = new Stopwatch();
        controller_action.Start();
   }
   public ActionResult Cars(KendoDataSourceRequest request)
   {
      controller_action.Stop();
      System.Diagnostics.Debug.WriteLine(controller_action.Elapsed);
   }
} 
```

我从弹出窗口调用动作汽车。

我的操作：我打开弹出窗口并捕捉 100 毫秒我关闭弹出窗口并打开弹出窗口并捕捉 200 毫秒......

而这一次又一次地重复 100ms, 200, 300...

如何检查结束构造函数之后和开始操作之前发生了什么？

**更新** 我使用了 miniProfiler 我有结果：

![在此处输入图像描述](https://i.stack.imgur.com/N0to6.png)

这只是 Chrome 中的 IE8 和 IE9 都很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:46:09.367

查看[MiniProfiler](http://miniprofiler.com/)。它非常容易集成到 MVC 中，并且会直接在应用程序的 UI 中提供有关您的操作和 MVC 在幕后执行的操作的重要信息。

您还可以使用它来添加自定义分析消息，这些消息可以在调试期间自动打开，但在生产代码中关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:52:25.430

好吧， Stopwatch.Stop() 不会重置 Elapsed 间隔。因此，如果您关闭弹出窗口并重新打开它，您似乎会获得与第一次 Start() 调用的当前时差。

也许您的方法应该如下所示：

```
public ActionResult Cars(KendoDataSourceRequest request)
   {
      controller_action.Stop();
      System.Diagnostics.Debug.WriteLine(controller_action.Elapsed);
      controller_action.Restart();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:43:15.083

.NET 的 MVC 框架不是开源的吗？您可以下载源代码并找出答案。

~~但是，它不断增加的原因可能是因为创建了一个控制器实例，并重新用于多个请求。~~没关系。

# asp.net-mvc - 用户 - 组 - ASP.NET MVC 的权限用户界面设计

> ID：15793122
> 
> 赞同：2
> 
> 时间：2013-04-03T16:37:55.390
> 
> 标签：asp.net-mvc, model-view-controller, user-interface

ASP.NET MVC 的新功能。我正在寻找一些不完全特定于 MVC 的 UI 设计理念。可能没有确切的答案，但这是我已经开始的。

需要有一个带有 3 个选项卡的页面。权限 | 团体 | 用户

1) 权限视图将允许您对网格中的权限执行 CRUD 操作 仅当权限未在任何组中使用时才允许删除特定权限。

2) 在组视图中，网格中允许对组进行 CRUD 操作。此外，还提供了一个权限链接，允许为组执行映射（添加/删除）权限同样，仅当组未被任何用户使用时，才允许对组执行 DELETE 操作。

3) 在用户视图中，将显示系统中所有现有的用户。网格显示允许按用户名、名字或姓氏搜索用户。应为每个用户提供组链接，单击该链接允许为用户进行映射（添加/删除）组。在同一视图中的此映射下方，应提供单独的权限覆盖部分，以便可以使用 IsGranted (true/false) 添加特定权限。

数据库设计说明：

![在此处输入图像描述](https://i.stack.imgur.com/Glht1.png)

1) 组将被分配权限。根据用户所属的组，用户将获得权限。

2) UserPermissionOverrides 将处理以下情况 - 用户需要被授予某些权限（无论他们处于何种角色）或 - 如果需要从用户撤消某些权限，即使他们属于某个组。这将使我们能够灵活地处理添加或删除特定权限的特殊场景。

因此，当用户登录时 - 上面的 1) 将用于检索用户的组权限，然后 2) 将被执行以检索覆盖（授予/撤销）。结合 1) 和 2) 将为我们提供用户的最终权限，然后将其存储在表单身份验证 cookie 中以防止进一步的数据库命中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:43:11.553

你的模型和功能对我来说都很有意义。但是，我认为您需要重新审视您为界面采用的 UX 原则。

1.  写一些用户故事，即安全系统的用户打算做什么以及他们需要为这次访问实现什么目标。

2.  您不必总是将您的 UI 与您的模型紧密耦合，即仅仅因为您以某种方式构建了您的模型，这些实体不需要作为 CRUD 操作的主要对象呈现给用户。系统的用户可能不太可能进来，添加权限并离开。

关于上述内容，我个人会将您的用户权限 UI 作为向导而不是一组选项卡来处理：

*   第 1 步：选择用户或添加用户。
*   第 2 步：他们需要哪些角色（提供添加角色的机会）。
*   第 3 步：他们属于哪些组（如有必要，让他们在此处添加组）。

...或类似的。

基本上，您的目标应该是让您的用户尽快进出系统。我认为创建用户故事和从中收集的向导的行为将是我在系统的 UX 设计中采用的方法。

祝你好运！

# web - Kendo Web Grid 编辑命令和本地数据

> ID：15793123
> 
> 赞同：1
> 
> 时间：2013-04-03T16:37:55.627
> 
> 标签：web, grid, kendo-ui

以下代码是 Kendo 文档中内置命令示例的扩展版本

```
<!DOCTYPE html5>
<html>
<head>
    <title>Untitled Page</title>
    <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.web.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#grid").kendoGrid({
                columns: [
                    { field: "name" },
                    { command: ["edit", "destroy"]} // displays the built-in "edit" and "destroy" commands
                ],
                editable: "inline",
                dataSource: new kendo.data.DataSource ({
                    data: [{ name: "Jane Doe" }, { name: "Joe Soap" }, { name: "Fred Blogs"}]
                })
            });
        });
     </script>
</head>
<body>
    <div id="grid"></div>

</body>
</html> 
```

单击任何“编辑”按钮都可以正常工作。如果您现在单击另一个“编辑”按钮而不取消第一个按钮，则原始编辑行将被取消，但现在所有编辑按钮都无法在编辑模式下打开一行。当网格使用远程数据源时，不会演示此行为。

剑道知道这个问题吗？

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:50:18.610

当模型中没有`id`定义时，这是一个常见的问题（这实际上不是 Kendo UI 的问题，可能是一个没有明确记录的行为）。

请改用此`grid`定义：

```
$("#grid").kendoGrid({
    columns   : [
        { field: "name" },
        { command: ["edit", "destroy"]} // displays the built-in "edit" and "destroy" commands
    ],
    editable  : "inline",
    dataSource: new kendo.data.DataSource({
        data  : [
            { id: 1, name: "Jane Doe" },
            { id: 1, name: "Joe Soap" },
            { id: 2, name: "Fred Blogs"}
        ],
        schema: {
            model: {
                id: "id"
            }
        }
    })
}); 
```

我已经`id`为每一行添加了和字段，然后我将其定义`schema.model.id`为`id`. 看到它在[这里运行](http://jsfiddle.net/OnaBai/m9evC/)

# android - 从 sd 卡拍摄视频并将其放入 gridview 的问题

> ID：15793126
> 
> 赞同：1
> 
> 时间：2013-04-03T16:37:57.940
> 
> 标签：android, file, video, gridview, adapter

我无法从 SD 卡中获取视频并将其设置为 gridview。这就是我目前所困的地方。到目前为止，我的逻辑是我试图将目录设置为字符串数组，然后将这些值与适配器一起使用。我也不太确定将视频转换为缩略图。它当前所做的是显示一个白屏。您的帮助将不胜感激。

```
 public class Gridview extends Activity {

    private static final String thepath = "/sdcard/Pictures/";
    private static final File path =  Environment.getExternalStoragePublicDirectory(thepath);
    private static final String TAG = null;
    String[] Reelfiles;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.preview);

        File directory = new File(thepath);
        directory.mkdirs();
        Reelfiles = directory.list();

        GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new VideoAdapter(this, Reelfiles));

        }

public class  VideoAdapter extends BaseAdapter {
    Context mContext;
    Bitmap bmThumbnail;

    private String[] Reelfiles;
    public VideoAdapter(Context c) {

    }

    public VideoAdapter(Context context, String[] Reelfiles) {
          this.mContext = context;
          this.Reelfiles = Reelfiles;
      }
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        bmThumbnail = ThumbnailUtils.createVideoThumbnail(Reelfiles[position], Thumbnails.MICRO_KIND);

        ImageView imageView = new ImageView(mContext);
        imageView.setImageBitmap(bmThumbnail);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
        return imageView;

    }

        } 
```

预览.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"

/> 
```

我的日志

```
04-03 12:18:10.079: E/MediaMetadataRetrieverJNI(14433): getFrameAtTime: videoFrame is a NULL pointer
04-03 12:18:10.089: E/MediaMetadataRetrieverJNI(14433): getFrameAtTime: videoFrame is a NULL pointer
04-03 12:18:10.094: E/MediaMetadataRetrieverJNI(14433): getFrameAtTime: videoFrame is a NULL pointer
04-03 12:18:10.104: V/InputMethodManager(14433): Starting input: tba=android.view.inputmethod.EditorInfo@415218b0 ic=null
04-03 12:18:10.119: E/MediaMetadataRetrieverJNI(14433): getFrameAtTime: videoFrame is a NULL pointer
04-03 12:18:10.264: W/SurfaceView(14433): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=false left=false top=false 
```

# php - 我的 php 代码没有将用户输入发送到数据库

> ID：15793131
> 
> 赞同：0
> 
> 时间：2013-04-03T16:38:16.057
> 
> 标签：php, sql, database

这是我的代码

```
<?php
include("inc/scripts/mysql_connect.inc.php");
?>
<?php
$reg = @$_POST['reg'];
    //Declaring Variables
        $fn = "";           //First Name
        $ln = "";           //Last Name
        $em = "";           //Email
        $em2 = "";          //Email Confirm
        $pswd = "";     //Password
        $pswd2 = "";        //Password Confirm
        $d = "";            //Sign Up Date
    //Registration Form
        $fn = strip_tags(@$_POST['first_name']);        //First Name
        $ln = strip_tags(@$_POST['last_name']);     //Last Name
        $em = strip_tags(@$_POST['email']);         //Email
        $em2 = strip_tags(@$_POST['email2']);           //Email Confirm
        $pswd = strip_tags(@$_POST['password']);        //Password
        $pswd2 = strip_tags(@$_POST['password2']);  //Password Confirm
        $d = date("Y-m-d");                        //Sign Up Date

if($reg) {
    if($fn&&$ln&&$em&&$em2&&$pswd&&$pswd2) {
        if($em==$em2){
            if($pswd==$pswd2) {
                if(strlen($fn)>32||strlen($ln)>32) {
                    echo "First name and Last name must be no more than 32 characters!";
                }
                else {
                    if(strlen($pswd)>30||strlen($pswd)<5) {
                        echo "Your password must be between 5 and 30 characters ...";
                    }
                    else {
                        $pswd = md5($pswd);
                        $pswd2 = md5($pswd2);
                        $query = mysql_query("INSERT INTO users VALUES('','$fn','$ln','$em','$pswd','$d','0')");
                        die("<h2>Welcome to bakpakk!</h2>");
                    }
                }
            }
            else {
                echo "Your passwords do not match!";
            }
        }
        else {
            echo "Your emails do not match!";
        }
    }
    else {echo "Please fill in all fields ...";}
}
?> 
```

用户登录系统将此信息发布到数据库。“mysql_connect.inc.php”看起来像这样

```
<?
    mysql_connect("localhost","root","250317") or die(myspq_error());
    mysql_select_db("bakpakk");
?> 
```

当我在输入字段（名字、姓氏、电子邮件、密码等）中输入数据时，它不会发布到数据库中的表中。我似乎无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:52:25.960

多个可能的问题（注意我不是 PHP 中的 MySQl 的专家）：

我将从删除声明的变量开始，将它们声明为上面的“”，然后再次将它们声明为我假设你想要的值。

你说的地方：

```
$query = mysql_query("INSERT INTO users VALUES('','$fn','$ln','$em','$pswd','$d','0')"); 
```

看起来您的第一个变量等于空，这（特别是如果这是主键）会导致 MySQL 死掉。

接下来要尝试的两件事是：

```
mysql_connect("localhost","root","250317") or die(myspq_error()); 
```

最后好像有错别字，换成

```
or die (mysql_error()); 
```

如果尝试后它不起作用，请告诉我们:) 祝你好运！

更新：

这是我几个月前写的一个有效的数据库连接和插入示例，我认为它可以帮助您检测任何错误或拼写错误。

```
<?php

/**
* @author Steven Byrne
* @copyright 2012
* @version 5.2
 */

  if(isset($_POST['btn'])){
     $btn       = mysql_real_escape_string($_POST['btn']);
     $username  = mysql_real_escape_string($_POST['username']);
     $email     = mysql_real_escape_string($_POST['email']);
     $name      = mysql_real_escape_string($_POST['name']);

          $link = mysql_connect('localhost','username','password') or die(mysql_error(). "Could not connect to database.");
 $dbsel= mysql_select_db('database', $link) or die("Couldn't select database");

    //Your validation code

    //MySQL

            $donation_date = date(Ymd);
    $sql = "INSERT INTO mcdonations (username,email,name,amount,date)
                           VALUES ('$username','$email','$name','$name','$donation_date')";
        $result = mysql_query($sql) or die(mysql_error() . "<P>" . $sql);
        exit();
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:30:49.210

由于我的评论实际上是您问题的答案，因此我将其正式发布。

您收到此错误是因为您没有启用 PHP 速记。因此为什么

```
<?
    mysql_connect("localhost","root","250317") or die(myspq_error());
    mysql_select_db("bakpakk");
?> 
```

不管用。将此块替换为

```
<?php
    mysql_connect("localhost","root","250317") or die(myspq_error());
    mysql_select_db("bakpakk");
?> 
```

瞧。

# signal-processing - 计算从图像中提取的一组数据的谐波

> ID：15793138
> 
> 赞同：0
> 
> 时间：2013-04-03T16:38:36.910
> 
> 标签：signal-processing

我正在实施一种称为跟踪变换的方法来进行图像分析。该算法使用一组像素值的变换来提取图像的许多特征（在我的例子中是与纹理有关的特征）。这是一篇描述该算法的论文：[http ://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=18&cad=rja&ved=0CGoQFjAHOAo&url=http%3A%2F%2Fpdf.aminer.org% 2F000%2F067%2F295%2Ftexture_classification_with_thousands_of_features.pdf&ei=lV9cUez_GYrx2QX-voCgDw&usg=AFQjCNEbCd8GBm4X8V4vk0PYyQwPZPlWyg&sig2=KTtvd1XxtvuUpCDeBzUu4A](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=18&cad=rja&ved=0CGoQFjAHOAo&url=http%3A%2F%2Fpdf.aminer.org%2F000%2F067%2F295%2Ftexture_classification_with_thousands_of_features.pdf&ei=lV9cUez_GYrx2QX-voCgDw&usg=AFQjCNEbCd8GBm4X8V4vk0PYyQwPZPlWyg&sig2=KTtvd1XxtvuUpCDeBzUu4A)（链接）

该算法最终构造了一个“三重特征”，它是一个表征图像的数字，是通过对从所有角度穿过图像的所有跟踪线提取的像素值应用第一组变换来计算的。在纸上，您可以从第 2 页开始看到此描述，图 1 显示了此类跟踪线的抽象，该跟踪线由其角度 (phi) 和线与图像中心的距离 (d) 定义。所以我们可以用 (phi,d) 对来描述每条跟踪线。

现在在论文的下一页（第 3 页）中，我们有表 1，它是应用于由跟踪线提取的像素值的一组函数。应用于所有跟踪线的这些功能中的每一个都会生成图像的另一种表示。然后将另一组泛函（出现在第 4 页的表 2 中的那些）应用于沿基本上沿参数 d 生成的列的图像的新表示，这样，图像的另一个新表示。

最后，另一组函数应用于最后一个表示，它是参数 phi 上的值数组，参数 phi 是角度参数（这意味着我们有 360 个描述图像的值，一个用于跟踪线的每个角度）。您可以在第 4 页表 3 的论文中看到这些功能。

现在，最后一组函数中的一些必须应用于参数 phi 上图像的最后表示，需要计算这组 360 值的谐波。首先，我需要计算一次谐波，然后计算一次到四次谐波的幅度和相位，但我不知道该怎么做。

我希望这能更好地解释它。您可以阅读论文的前几页，因为那里可能会更好地解释它。图 1 清楚地表明了我通过跟踪线的含义以及 (phi,d) 对表示的每条线。

谢谢

# php - 从其他服务器访问图像

> ID：15793143
> 
> 赞同：1
> 
> 时间：2013-04-03T16:38:55.910
> 
> 标签：php

我正在尝试制作一个 php“图像下载器”，到目前为止一切都按照我想要的方式进行。我面临的问题可能是我试图访问的服务器的某种安全性。例如，这个[**url**](https://yande.re/sample/2f7b6c5d87d90f173769d999e60861c8/yande.re%20250521%20sample.jpg)会显示我想用我的服务器下载的图像。

但是，如果我尝试至少在我的网站中显示带有该 URL 的图像，它根本不会出现。我无法显示我网站的网址，但这只是一个简单的`<img />`标签。

有什么办法可以解决这个问题还是我应该退出？

PS只是为了说明我的代码没有错，我可以从我迄今为止尝试过的其他网站下载任意数量的图像。并且不要问我代码，因为即使`<img src="url_here.jpg" />`不起作用，所以看php代码是没有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:47:11.337

是的，它不会出现，因为其他服务器正在阻止图像的热链接。

一个典型的例子是

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?yande.re/.*$ [NC]
RewriteRule \.(gif|jpg|js|css)$ - [F] 
```

解决方案。

*   通过 curl 加载图像
*   保存到 CDN
*   然后将其显示在您的网站上

**概念证明**

```
$url = 'https://yande.re/sample/2f7b6c5d87d90f173769d999e60861c8/yande.re%20250521%20sample.jpg';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31");
curl_setopt($ch, CURLOPT_REFERER, "https://yande.re");
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$data = curl_exec($ch);
curl_close($ch);

// $data is file data
$post   = array('image' => base64_encode($data), 'key' => "YOUR_API_KEY_ITS_FREE");
$timeout = 30;
$curl    = curl_init();

curl_setopt($curl, CURLOPT_URL, 'http://api.imgur.com/2/upload.json');
curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $post);
$json = curl_exec($curl);
curl_close ($curl);

$json = json_decode($json);
printf("<img src\"%s\" / >",$json->upload->links->small_square); 
```

输出

![在此处输入图像描述](https://i.stack.imgur.com/U1ZI9.jpg)

# linux - 如何在 linux 中使用 bash 从文本文件中提取行？

> ID：15793147
> 
> 赞同：1
> 
> 时间：2013-04-03T16:39:03.780
> 
> 标签：linux, bash, grep

我想使用 bash 脚本从 linux 中的文本文件中提取**任何**包含**MAC 地址**的行，然后如果可能的话将其保存到另一个文件中？

有使用 sed 和 grep 删除行的不同示例，但到目前为止我还不能让它们为我工作。一般来说，我对编程不是很好，所以它可能比我认为的要容易得多。

下面是我从中提取的文本文件示例。

猫测试.txt

```
spawn ssh -l user x.x.x.x -p 22 "arp"
DD-WRT Mega
Release xx/xx/xx (SVN revison:xx)
root@x.x.x.x password:
Device1 (x.x.x.x) at xx:xx:xx:xx:xx:xx [ether] on br0
Device2 (x.x.x.x) at xx:xx:xx:xx:xx:xx [ether] on br0
Device3 (x.x.x.x) at xx:xx:xx:xx:xx:xx [ether] on br0 
```

以下是我正在寻找的结果。

结果.txt

```
Device1 (x.x.x.x) at xx:xx:xx:xx:xx:xx [ether] on br0
Device2 (x.x.x.x) at xx:xx:xx:xx:xx:xx [ether] on br0
Device3 (x.x.x.x) at xx:xx:xx:xx:xx:xx [ether] on br0 
```

如果有人知道如何从一个文件中提取包含 MAC 地址的行并通过 bash 脚本将它们发送到另一个文本文件，那将是一个很大的帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:43:31.480

这可能是最简单的使用`grep`：

```
grep -E '(..:){5}..' < infile.txt > outfile.txt 
```

值得注意的是，这在强制匹配方面有点放松，而不是严格只匹配有效的 mac 地址，但这个表达式也更简单一些，很可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:44:38.280

尝试：

```
grep -E "(..:){5}.." file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:45:17.800

试试这个：

```
grep '([0-9A-F]{2}[:-]){5}([0-9A-F]{2})' < in.txt > out.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:55:18.550

尝试这样做，这是最可靠，最强大的解决方案 =)

```
grep -E '\b([[:xdigit:]]{2}:){5}[[:xdigit:]]{2}\b' < file > newfile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T16:51:17.863

对于初学者来说，你可以使用 grep，然后你可以转到 sed，然后你可以学习 awk。看到这是您的第一个问题，发布它肯定比谷歌问题花费更多的精力:)

# java - 什么是 Maven 存储库协议？

> ID：15793153
> 
> 赞同：19
> 
> 时间：2013-04-03T16:39:18.693
> 
> 标签：java, maven, maven-2

最近我学到了很多关于 Maven 的知识，印象非常深刻。我在哪里可以找到有关以与 Maven 相同的方式与存储库进行通信、部署和检索的信息？这是通过一些已发布的协议完成的吗？

我找到了有关 OSGI（和 OBR）的信息，但不知道这是否是我应该研究的。

我想在 .net 中执行此操作（无论出于何种原因）。如果有人可以将我指向正确的组件，我不介意查看 java 源代码，但更愿意指向协议规范。

[编辑] 我看到很多关于 HTTP 的答案。我想进一步澄清一下，我不是在寻找传输协议，而是在寻找 API 协议。例如，简单对象访问协议 (SOAP) 使用超文本传输​​协议来传输消息。Maven的访问协议是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T16:51:59.503

正如khmarbaise 已经说过的，在大多数情况下传输协议是http(s)，但还有其他可用的协议，例如本地存储库的简单文件访问、WebDAV、SCP、SFTP 等。maven 存储库更像是一种特殊的目录布局。像 Nexus 或 Artifactory 这样的服务器提供了额外的功能，比如代理远程存储库或某些检查，比如身份验证。

[https://maven.apache.org/guides/introduction/introduction-to-repositories.html](https://maven.apache.org/guides/introduction/introduction-to-repositories.html)

取自 [http://wiki.jfrog.org/confluence/display/rtf/repository+layouts](http://wiki.jfrog.org/confluence/display/rtf/repository+layouts) Maven 存储库布局： `[orgPath]/[module]/[baseRev](-[folderItegRev])/[module]-[baseRev](-[fileItegRev])(-[classifier]).[ext]`

例子 `org/eclipse/jetty/jetty-ajp/7.0.2.v20100331/jetty-ajp-7.0.2.v20100331.jar`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T16:43:02.250

通常的协议是 http 此外，对于 .net，已经存在一个称为[nuget](http://nuget.org/)的解决方案，它已经支持它并与一些存储库管理器（如 neuxs 和 artifactory）一起使用。

啊...Maven 使用它自己的协议。没有 SOAP 等。可能看看[这里](http://maven.apache.org/guides/mini/guide-wagon-providers.html)会有所帮助。而且[这个](http://maven.apache.org/wagon/wagon-providers/wagon-http/)。

*更新* 您可以简单地通过 wget 从 Maven 存储库下载一个工件 ...这只是一个 http-get 操作。上传一个工件只是一个 http-put ...你可以通过 curl 来做到这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-15T09:12:02.197

严格来说，Maven 没有特殊的访问协议。Maven 使用纯 HTTP 从存储库中获取工件。存储库应该有特殊的布局，即 URL 结构（简单地投影到通常的目录结构）。您可以通过以特殊方式组织目录来组织自己的 repo：`[orgPath]/[module]/[baseRev](-[folderItegRev])/[module]-[baseRev](-[fileItegRev])(-[classifier]).[ext]`在服务器端无需任何特殊软件。

因此，它更多的是关于目录结构而不是特殊协议。非常简单和有效的方法。

当然，如果你想围绕它提供额外的服务（比如搜索、访问控制、统计等），你应该自己做。这就是[JFrog](https://www.jfrog.com)使用其[Artifactory](https://www.jfrog.com/artifactory/)产品所做的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T17:43:15.483

据我所知，并没有真正的协议。Maven 存储库只是通过 HTTP（或在本地目录中）可用的特定资源结构。[在 Codehaus 上有一个有点过时的描述](http://docs.codehaus.org/display/MAVEN/Repository+Layout+-+Final)。

“部署到”存储库意味着*以您希望的任何方式*上传文件，只要以后可以从上述布局中获取。该[插件的](http://maven.apache.org/plugins/maven-deploy-plugin/)[文档`deploy`](http://maven.apache.org/plugins/maven-deploy-plugin/)提供了 FTP 和 SSH 的示例，这意味着将简单的文件上传到这样的目录结构中。但是您也可以将文件上传到自定义 Web 服务，该服务将它们存储在数据库中，然后通过 HTTP 适当地公开。Maven 不会真的在乎。工件部署、存储和存储库访问是分离的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-04T18:08:18.493

HTTP GET，格式如下：

```
GET /content/repositories/approved-from-central/commons-logging/commons-logging-api/1.1/commons-logging-api-1.1.pom HTTP/1.1
Cache-control: no-cache
Cache-store: no-store
Pragma: no-cache
Expires: 0
Accept-Encoding: gzip
User-Agent: Apache-Maven/3.3.9 (Java 1.8.0_102; Windows 7 6.1)
Host: localhost
Connection: Keep-Alive 
```

我在这里记录了它[http://www.javamonamour.org/2017/10/maven-to-repository-protocol.html](http://www.javamonamour.org/2017/10/maven-to-repository-protocol.html)

# whitespace - 试图在代码块中保留空格

> ID：15793155
> 
> 赞同：2
> 
> 时间：2013-04-03T16:39:21.913
> 
> 标签：whitespace, markdown

我正在尝试使用降价来格式化网页。部分网页有块引号和代码块。在某些代码块中，前导和尾随空格（空行）很重要。我在这方面找不到太多，也无法弄清楚如何包含前导空行和尾随空行。

```
> empty_line
> empty_line
> Stuff Here
> empty_line
> empty_line 
```

.. 如果那有意义的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:27:47.237

如果您可以使用 HTML 标签，您是否尝试过使用 pre 标签？

```

东西1在这里

东西2在这里

```

当然，我`pre`在最顶部使用 HTML 标签括号并在底部关闭该标签。如您所见，使用此标记会保留空白行 + 创建一个代码块。

# vb.net - 在 Visual Studio 中确保登录信息的安全

> ID：15793159
> 
> 赞同：0
> 
> 时间：2013-04-03T16:39:34.587
> 
> 标签：vb.net, visual-studio-2010

在我的程序中，我有一个简单的登录提示，以便只有某些用户可以进入程序，并根据用户使程序功能不同。我想做的是在不通过在线数据库的情况下安全地存储用户登录信息（用户名、密码等）的信息。我知道使用文本文件来存储这些信息是一个非常糟糕的主意，而且我确信有一种更简单的方法来做到这一点，而不是在我的程序内部创建一个登录信息数组。大家能给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:11:33.773

哈希是您所需要的。将哈希函数粘贴到您的代码中，`MD5`所有主要平台都可以在线使用函数。然后将您的散列对存储在您的配置文件中。设计一种巧妙的方法，将密码与您的准入选项组合到另一个哈希中，以便文件是防编辑的。通过这种方式，您可以分发帐户配置，并且如果您没有犯一个微不足道的密码错误，它将按照您的意愿工作。配置文件行示例（为清楚起见，哈希被截断为 6 个字符）：

`1a2b3c print;search;evaluate 4d5e6f`

此处，1a2b3c 为`MD5(username.Text+verysecret)`，动词为帐户权限，4d5e6f 为`MD5(line[1]+verysecret+password.Text)`其中 line[1] 为存储动词的配置行的拆分结果，其余为用户密码。

请注意密码是如何被动词自动加盐的，以及如何保护动词不被编辑，因为这会使密码哈希无效。verysecret 常量是隐藏在可执行代码中的东西，它会阻止任何人计算哈希值并解锁程序。

散列不是非对称密码或密钥对；一个有动机的攻击者无论如何都可以破解您的程序以完全绕过保护，因此进一步研究是没有用的。

如果您很便宜地找到了一个非对称方案，但又足够狡猾，您可以更改该 MD5 函数中的一些初始化常量。这将使您的代码更难破解，尤其是在制作假冒帐户文件时。

编辑：身份验证时，不要只是`if(hashfromconfig == computedhash)...`脚本小子知道如何挂钩字符串比较功能。改为写`if(MD5(hashfromconfig) == MD5(computedhash))...`...然后字符串比较将像以前一样工作，只是它不会看到您进入想要伪造文件的宝贵密钥哈希。理想情况下，将多个版本的 MD5 函数分散在您的代码中并以不同的方式命名。使用`if(foo(hashfromconfig) == bar(computedhash))...`效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:50:58.797

“无需通过在线数据库。” - 你的意思是在客户端？

在这种情况下，“安全存储”和“客户端”几乎是相互排斥的术语。

如果不接触某种在线（服务器端）源，绝对没有办法安全地存储数据。如果您正在接触服务器端源，它也可能是一个数据库。

# c# - Tooltip 内容稍微不够宽

> ID：15793164
> 
> 赞同：0
> 
> 时间：2013-04-03T16:39:39.837
> 
> 标签：c#, javascript, jquery, asp.net, qtip2

我正在使用 QTip2 显示工具提示：

![在此处输入图像描述](https://i.stack.imgur.com/qsAOb.png)

工具提示的内容是这样制作的：

```
 public string GetHours()
    {
        DateTime d = Convert.ToDateTime(Request.Form["date"]);

        Bump b = new Bump();
        string r = "";
        var emps = ResourceManager.GetAllEmployees().OrderBy(p => p.EmployeName);
        foreach (Employee e in emps)
        {
            var scheds = b.GetAllToday(d,e.EmployeID, null);
            decimal hours = b.GetHours(scheds, d);
            hours = GetDayHours() - hours;
            string hrs = Time.Hours(Math.Abs(hours));
            if (hours < 0)
            {
                hrs = "<b>-" + hrs + "h" + "</b>";
            }
            else
            {
                hrs += "h";
            }
            r += "<div class=\"hour-content\">";
            r += "<div class=\"hour-title\">";
            r += e.EmployeName + ": ";
            r += "</div>";
            r += "<div class=\"hour-data\">";
            r += hrs;
            r += "</div>";
            r += "</div>";

        }

        JavaScriptSerializer js = new JavaScriptSerializer();
        string strJSON = js.Serialize(Server.HtmlDecode(r));

        return strJSON;
    } 
```

样式是：

```
.hour-data
{
    display:inline;
    float:right;
}
.hour-title
{
    display:inline;
} 
```

QTip 是这样制作的：

```
$(this).qtip({
    content: {
        text: 'Loading...', // The text to use whilst the AJAX request is loading
        ajax: {
            url: 'CalendarServices.aspx/GetHours', // URL to the local file
            type: 'POST', // POST or GET
            data: 'date=' + date
        }
    },
    position:{
        target: 'mouse'
    },
    //  show: { event: 'click' },
    hide: { event: 'mousedown mouseleave' },
    style: {
        padding: 5,
        color: 'black',
        textAlign: 'left',
        border: {
            width: 1,
            radius: 3
        },
        classes: {
            tooltip: 'ui-widget',
            tip: 'ui-widget',
            title: 'ui-widget-header',
            content: 'ui-widget-content'
        }
    }
}); 
```

我想要的是时间对齐正确，但最长的名字不会像这里看到的那样下沉。

我不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:53:41.153

这是因为 qtip 的默认值`maxWidth`是固定的`280px`

```
.ui-tooltip, .qtip{
    position: absolute;
    left: -28000px;
    top: -28000px;
    display: none;

    max-width: 280px;
    min-width: 50px;

    font-size: 10.5px;
    line-height: 12px;
} 
```

您需要通过设置新样式来覆盖此默认值：

```
.my_custom_qtip_width {
    max-width: 1200px;
    min-width: 0px;
} 
```

并在 qtip 样式属性中插入这个新创建的 css 类：

```
style: {
    classes: 'my_custom_qtip_width'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:41:40.640

将 hour-title 的宽度设置为它的最大宽度，你应该完成了。

# hadoop - 在本地模式下配置 hadoop

> ID：15793167
> 
> 赞同：2
> 
> 时间：2013-04-03T16:39:51.660
> 
> 标签：hadoop, mapreduce, hdfs

嗨，我已经在虚拟机上以伪分布式模式成功安装了 hadoop。我在eclipse中编写代码，而不是作为jar文件导出到hadoop集群，而不是在那里进行调试。现在只是为了学习目的，我试图在我的 Windows 机器上以本地配置模式安装 hadoop。通过这样做，我将能够进行测试，而无需经历创建 jar 文件、导出和在 hadoop 集群上进行测试的所有麻烦。

我的问题是任何人都可以帮助我了解 hadoop 如何在 windows 上的本地模式（hdfs 与本地文件系统）下工作，以及如何在 windows 机器上的本地机器中配置 hadoop（我可以遵循哪些步骤）。

我尝试关注各种博客来做同样的事情，但无法从中了解很多。所以在这里张贴相同。

让我知道是否需要任何其他信息。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:43:02.273

不幸的是，您不能从一开始就在 Windows 上使用 hadoop - 但是，您可以使用[Cygwin](http://www.cygwin.com/)来有效地实现相同的目标。

我设法设置了直接从 cygwin 运行的本地模式和分布式模式，但是由于 Unix 和 Windows 路径样式之间的各种 cygpath 转换问题，我无法让伪分布式正常工作。

但是，在实践中，我仍然使用 jar 制作 jar 并将它们直接发送到集群`rsync`，因为一旦您的项目达到一定的测试量级，它会更快，并且可以从 windows 上的 eclipse 到 linux 集群进行远程调试。

# sql-server - SSIS 无法访问远程服务器上的数据文件

> ID：15793169
> 
> 赞同：0
> 
> 时间：2013-04-03T16:40:07.307
> 
> 标签：sql-server, permissions, ssis, etl

我们有一个简单的 SSIS 包，可以将平面文件导入表中。唯一的问题是平面文件驻留在网络共享上，现在我唯一遇到的问题是当我尝试从本地计算机上的 SSMS 执行它时。

*   所以我的机器是 ws1 运行 Sql Server management studio (SSMS)
*   实例在 srv1 上运行
*   平面文件驻留在 srv2 上的网络共享 share1
*   所以连接字符串是\srv2\share1\folder\file.txt
*   我得到的错误是：`cannot open the datafile "\\srv2\share1\folder\file.txt"`

当我在 srv1 上使用 SSMS 运行它时，它就像一个魅力！我只在ws1上得到这个错误......

这里有一些更多信息：

*   share1 对每个人都具有完全权限。
*   SSIS 服务帐户在域帐户下运行。
*   我正在尝试从 SSISDB 而不是从 MSDB 执行包。

## **2013 年 4 月 4 日添加**

我在上面运行了进程监视器（procmon），结果如下：

*   当它在 srv1 上执行时，它以一个`QueryOpen`操作开始，createFile、ReadFile 等等等等一切都导致`SUCCESS`......
*   当它在 ws1 上执行时，它以 FileSystemControl 操作开始，路径是`\\srv2\IPC$`，结果是`NO SUCH DEVICE`，细节是，`Control: FSCTL_DFS_GET_REFERRALS`然后它有另一个`FileSystemContro`成功的操作，细节是`Control: FSCTL_NETWORK_DELETE_CONNECTION`，然后它有很多尝试访问文件`\\srv2\share1\folder\file.txt`但`ACCESS DENIED`对于所有.. .
*   果然，当我查看属性时，用户是有权访问共享的域用户，因为它已共享给所有人......

谁能定义这个奥秘？

# reporting-services - 如何将多个值传递给 SSRS 中的多值参数

> ID：15793171
> 
> 赞同：5
> 
> 时间：2013-04-03T16:40:19.073
> 
> 标签：reporting-services, reportingservices-2005

我会尽量通过过度简化报告结构来解释这个问题。报表一包含 1 个名为 ResourceCenter 的组，然后在其下包含一行总计。总计实际上是一个组，但分组是在 SQL 中完成的，并显示在一个详细组中。报告如下所示：

```
Report 1

ResourceCenter 1
Total1 11 
Total2 4
Total3 8

ResourceCenter2
Total1 12
Total2 11
Total3 6 
```

从这个报告中，我需要深入到另一个具有一堆多值参数的报告。对于钻取，我可以对除 EmployeeNumber 之外的所有内容使用单个值。为此，我需要能够将 EmployeeNumbers 列表传递给报表 2 中的多值参数。EmployeeNumbers 当前不存在于报表 1 中的任何数据集或参数中，而是基于 ResourceCenter。因此，如果用户已运行 Report 1 并单击 ResourceCenter 1，我需要能够将与 ResourceCenter 1 关联的 EmployeeNumbers 列表传递给 Report 2 中的多值参数，以使 Report 2 能够正确处理它。

注意：我应该补充一点，我创建了两个 SQL 函数，它们接受 ResourceCenter 的输入，然后返回员工列表。一个是返回单列 EmployeeNumbers 的表值函数。另一个是标量值函数，它将 EmployeeNumbers 作为逗号分隔值返回。然后我有一些自定义代码在后台运行 SQL 函数并返回列表。我在返回 SSRS 可以使用的数据集方面没有取得任何成功，但我已经能够让标量值函数“工作”，因为我可以在虚拟报告上创建一个字段并查看输出。不过，我没有任何运气让报告 2 接受逗号分隔的列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T18:21:02.980

[此人](http://www.keepitsimpleandfast.com/2012/04/passing-multi-value-parameter-to-drill.html)正在进行钻取，似乎已经解决了一个多值参数的类似问题。在这种情况下，它必须针对 IN 子句进行格式化。

```
=SPLIT(JOIN(Parameters!SomeParameterName.Value,","),",") 
```

如果 Report2 不采用这种格式，您可能必须添加一个单独的单值参数，该参数将接受逗号分隔的字符串，然后您必须对其进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T23:02:19.017

我正在使用 SSRS 2016，我的数据集基于存储过程，但将多值参数传递给向下钻取似乎不再是问题。默认情况下，当您选择一个多值参数时，它会为您提供类似 Parameters!ParName(0).Value 的内容，它只会传递第一个值。但是，如果您删除 (0) 并将其保留为参数！ParName.Value，它似乎可以很好地传递所有值。

# matlab - 有效地生成唯一的整数对

> ID：15793172
> 
> 赞同：14
> 
> 时间：2013-04-03T16:40:21.253
> 
> 标签：matlab, random, integer

在 MATLAB 中，我想生成`n`range 中的随机整数对`[1, m]`，其中每一对都是唯一的。为了唯一性，我认为这对中数字的顺序是不相关的，`[3, 10]`因此等于`[10, 3]`。此外，每一对应该由两个不同的整数组成；即`[3, 4]`可以，但`[3, 3]`会被拒绝。 *编辑：*应该以相同的可能性选择每个可能的对。

（显然，对参数的约束是`n <= m(m-1)/2`。）

我已经能够在很小的时候成功地做到这`m`一点，就像这样：

```
m = 500; n = 10;                   % setting parameters

A = ((1:m)'*ones(1, m));           % each column has the numbers 1 -> m
idxs1 = squareform(tril(A', -1))'; 
idxs2 = squareform(tril(A, -1))';   
all_pairs = [idxs1, idxs2];        % this contains all possible pairs

idx_to_use = randperm( size(all_pairs, 1), n );  % choosing random n pairs
pairs = all_pairs(idx_to_use, :)       

pairs =

   254   414
   247   334
   111   146
   207   297
    45   390
   229   411
     9    16
    75   395
    12   338
    25   442 
```

但是，矩阵`A`的大小为`m x m`，这意味着当`m`变大（例如超过 10,000）时，MATLAB 会耗尽内存。

我考虑过生成大量随机数`randi(m, [n, 2])`，并反复拒绝重复的行，但我担心在`n`接近`m(m-1)/2`.

有没有一种更简单、更简洁的方法来生成唯一的不同整数对？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T18:36:45.157

当以正确的方式看待时，简单，轻松。

您希望生成 n 对整数 [p,q]，使得 p 和 q 位于区间 [1,m] 中，并且 p

有多少对可能的配对？对的总数仅为 m*(m-1)/2。（即，从 1 到 m-1 的数字之和。）

所以我们可以在 [1,m*(m-1)/2] 范围内生成 n 个随机整数。Randperm 很好地做到了这一点。（旧的 matlab 版本不允许 randperm 的第二个参数。）

```
k = randperm(m/2*(m-1),n); 
```

（请注意，我以一种有趣的方式用 m 编写了这个表达式，在一个奇怪的地方除以 2。这避免了一些接近上限的 m 值的精度问题。）

现在，如果我们将每个可能的对 [p,q] 与 k 中的一个整数相关联，我们就可以从 k 中生成的整数倒推到一对 [p,q]。因此，该列表中的前几对是：

```
{[1,2], [1,3], [2,3], [1,4], [2,4], [3,4], ..., [m-1,m]} 
```

我们可以将它们视为大小为 m x m 的严格上三角数组中的元素，因此这些元素位于主对角线之上。

```
q = floor(sqrt(8*(k-1) + 1)/2 + 1/2);
p = k - q.*(q-1)/2; 
```

看到这些公式从 k 中展开的元素中恢复 p 和 q。我们可以说服自己这确实有效，但也许这里有一个简单的方法就是这个测试：

```
k = 1:21;
q = floor(sqrt(8*(k-1) + 1)/2 + 3/2);
p = k - (q-1).*(q-2)/2;
[k;p;q]'

ans =
     1     1     2
     2     1     3
     3     2     3
     4     1     4
     5     2     4
     6     3     4
     7     1     5
     8     2     5
     9     3     5
    10     4     5
    11     1     6
    12     2     6
    13     3     6
    14     4     6
    15     5     6
    16     1     7
    17     2     7
    18     3     7
    19     4     7
    20     5     7
    21     6     7 
```

另一种测试方法是显示所有对都是针对小案例生成的。

```
m = 5;
n = 10;
k = randperm(m/2*(m-1),n);
q = floor(sqrt(8*(k-1) + 1)/2 + 3/2);
p = k - (q-1).*(q-2)/2;

sortrows([p;q]',[2 1])
ans =
     1     2
     1     3
     2     3
     1     4
     2     4
     3     4
     1     5
     2     5
     3     5
     4     5 
```

是的，看起来一切都很完美。现在尝试使用 m 和 n 的一些大数来测试使用的时间。

```
tic
m = 1e6;
n = 100000;
k = randperm(m/2*(m-1),n);
q = floor(sqrt(8*(k-1) + 1)/2 + 3/2);
p = k - (q-1).*(q-2)/2;
toc

Elapsed time is 0.014689 seconds. 
```

该方案适用于大约 1e8 的 m，然后由于双精度中的精度误差而失败。在 m/2*(m-1) 超过 2^53 之前，确切的限制应该是 m 不大于 134217728。一个不错的功能是不需要拒绝重复对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:54:18.750

这更像是一种通用方法，而不是 matlab 解决方案。

您如何先执行以下操作，然后填充如下所示的向量。

```
x[n] = rand()
x[n + 1] = x[n] + rand() %% where rand can be equal to 0. 
```

然后你再次执行以下操作

```
x[n][y] = x[n][y] + rand() + 1 
```

而如果

```
x[n] == x[n+1] 
```

您将确保尚未选择同一对。

完成后，如果您希望矩阵随机分布，您可以在矩阵上运行置换算法。

这种方法将为您提供所有可能性或 2 个整数对，并且它在 O(n) 中运行，其中 n 是矩阵的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:15:29.973

以下代码可以满足您的需要：

```
n = 10000;
m = 500;
my_list = unique(sort(round(rand(n,2)*m),2),'rows');
my_list = my_list(find((my_list(:,1)==my_list(:,2))==0),:);
%temp = my_list;    %In case you want to check what you initially generated.
while(size(my_list,1)~=n)
    %my_list = unique([my_list;sort(round(rand(1,2)*m),2)],'rows');
    %Changed as per @jucestain's suggestion.
    my_list = unique([my_list;sort(round(rand((n-size(my_list,1)),2)*m),2)],'rows');
    my_list = my_list(find((my_list(:,1)==my_list(:,2))==0),:);
end 
```

# android - 在 App-start 上启动多个课程

> ID：15793173
> 
> 赞同：0
> 
> 时间：2013-04-03T16:40:26.437
> 
> 标签：android

我有一个带有按钮等的登录活动。在后台，我想使用带有一些图像的全屏 ViewPager，它为用户提供有关功能等的一些信息。

如果我的 manifest.xml 看起来像这样，我只会看到我的按钮、徽标等，而没有背景图像：

```
<activity
       android:name="com.lo.android.activity.LoginActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

如果我将其更改为以下类，我会看到背景图像，但没有登录按钮等。如何在应用程序启动时运行多个类，包括 LoginActivity 和 PageIndicatorActivity？

```
<activity
       android:name="com.lo.android.viewpager.PageIndicatorActivity"> 
```

登录活动：

```
package com.lo.android.activity;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import com.lo.android.R;
import com.lo.android.main.Main;
import com.lo.android.service.UserTokenService;

public class LoginActivity extends Activity {

    private Button loginButton;
    private Button registerButton;
    private EditText emailInput;
    private EditText passwordInput;
    private UserTokenService userTokenService;
    private Runnable userTokenServiceCallback;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_login);

        // TODO Workaround, use Async solution
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        // End of workaround

        emailInput = (EditText) this.findViewById(R.id.email);
        passwordInput = (EditText) this.findViewById(R.id.password);
        loginButton = (Button) this.findViewById(R.id.loginButton);
        loginButton.setOnClickListener(new LoginButtonClickListener());
        registerButton = (Button) this.findViewById(R.id.registerButton);
        registerButton.setOnClickListener(new RegisterButtonClickListener());

        emailInput.setText("marco.mueller@haufe-lexware.com");

        userTokenServiceCallback = new Runnable() {
            public void run() {
                JSONObject json = userTokenService.getResponse();
                try {
                    UserTokenService.userToken = json.getString("SaUser");
                    Toast.makeText(getApplicationContext(), "Login erfolgreich!", Toast.LENGTH_SHORT).show();

                    goToMain();
                } catch (JSONException e) {
                    Toast.makeText(getApplicationContext(), "Fehler: " + json.toString() + "\n" + e.toString(), Toast.LENGTH_LONG).show();

                }
            }
        };
    }

    private void goToMain() {
        Intent in = new Intent(LoginActivity.this,Main.class);startActivity(in);
    }

    private class LoginButtonClickListener implements OnClickListener {

        public void onClick(View v) {
            String email = emailInput.getText().toString();
            String password = passwordInput.getText().toString();
            userTokenService = new UserTokenService(getApplicationContext(), userTokenServiceCallback);
            userTokenService.call(email, password);
        }
    }

    private class RegisterButtonClickListener implements OnClickListener {

            @Override
            public void onClick(View arg0) {

                Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri
                        .parse("https://www.lo.de/lp/registration/?cid=232"));

                startActivity(browserIntent);

            }
    }
} 
```

页面指​​示器活动：

```
package com.lo.android.viewpager;

import com.lo.android.R;
import com.lo.android.activity.LoginActivity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.View;

public class PageIndicatorActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
        ViewPagerAdapter adapter = new ViewPagerAdapter(this, imageArra);
        ViewPager myPager = (ViewPager) findViewById(R.id.viewpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);

    }
    public void login(View v) {
        Intent in = new Intent(PageIndicatorActivity.this, LoginActivity.class);
        startActivity(in);
    }

    private int imageArra[] = { R.drawable.antartica1, R.drawable.antartica2,
            R.drawable.antartica3, R.drawable.antartica4,
            R.drawable.antartica5, R.drawable.antartica6,
            R.drawable.antartica7, R.drawable.antartica8 };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_login, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:42:22.497

只需使用 . 从您的第一个 Activity 开始您的第二个 Activity `startActivity(Intent)`。

# ios - CLGeocoder 曾经返回一个地标

> ID：15793174
> 
> 赞同：9
> 
> 时间：2013-04-03T16:40:37.070
> 
> 标签：ios, clgeocoder

我想恢复[这个](https://stackoverflow.com/questions/10417022/how-to-get-multiple-placemarks-from-clgeocoder)和[这个](https://stackoverflow.com/questions/11344188/clgeocoder-only-returning-one-placemark)问题，因为这个问题对我来说仍然存在，所以我正在写一个新问题。

这是我的代码：

```
- (SVGeocoder*)initWithParameters:(NSMutableDictionary*)parameters completion:(SVGeocoderCompletionHandler)block {
self = [super init];

self.operationCompletionBlock = block;

Class cl = NSClassFromString(@"CLGeocoder");
if (cl != nil)
{
    if (self.geocoder_5_1 == nil) {
        self.geocoder_5_1 = [[cl alloc] init];
    }

    NSString *address = [parameters objectForKey:kGeocoderAddress];
    [self.geocoder_5_1 geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {
        NSMutableArray *svplacemarks = [NSMutableArray arrayWithCapacity:1];
        SVPlacemark *placemark;
        NSLog(@"placemarks[count] = %i", [placemarks count]);
        for (CLPlacemark *mark in placemarks) {
            placemark = [[SVPlacemark alloc] initWithPlacemark:mark];
            [svplacemarks addObject:placemark];
        }

        self.operationCompletionBlock([NSArray arrayWithArray:svplacemarks],nil,error);
    }];

}
else
{
    self.operationRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://maps.googleapis.com/maps/api/geocode/json"]];
    [self.operationRequest setTimeoutInterval:kSVGeocoderTimeoutInterval];

    [parameters setValue:@"true" forKey:kGeocoderSensor];
    [parameters setValue:[[NSLocale currentLocale] objectForKey:NSLocaleLanguageCode] forKey:kGeocoderLanguage];
    [self addParametersToRequest:parameters];

    self.state = SVGeocoderStateReady;
}
return self;
} 
```

这是我个人的 SVGeocoder 版本（相当粗糙），使用 CLGeocoder 进行前向地理编码，具有 iOS < 5.1 的追溯兼容性

我使用这个解决方案是因为谷歌条款阻止使用地图 API 而不在谷歌地图上显示结果。

问题与前面提到的问题相同：CLGeocoder 只返回一个地标，日志打印出一个不错的

> “地标[计数] = 1”。

我的问题是，有谁知道是否有另一种方法来检索前向地理编码或其他一些神奇的东西（Apple 地图应用程序为我执行的同一查询显示多个标记，例如“通过 roma”）？

* * *

编辑 ROB 的解决方案

```
Class mkLocalSearch = NSClassFromString(@"MKLocalSearch");

if (mkLocalSearch != nil)
{
    NSString *address = [parameters objectForKey:kGeocoderAddress];
    MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];

    request.region = MKCoordinateRegionForMapRect(MKMapRectWorld);

    request.naturalLanguageQuery = address;

    MKLocalSearch *localsearch = [[MKLocalSearch alloc] initWithRequest:request];
    [localsearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {

        NSMutableArray *svplacemarks = [NSMutableArray arrayWithCapacity:1];
        SVPlacemark *placemark;
        NSLog(@"response.mapItems[count] = %i", [response.mapItems count]);

        for (MKMapItem *item in response.mapItems)
        {
            placemark = [[SVPlacemark alloc] initWithPlacemark:item.placemark];
            [svplacemarks addObject:placemark];
        }

        self.operationCompletionBlock([NSArray arrayWithArray:svplacemarks],nil,error);
    }];
} 
```

这是一个有趣的解决方案，它提供了另一种观点。不幸的是，即使我将区域设置为全球，我仍然会得到一个不错的日志

> response.mapItems[count] = 1

查询是“via roma”，这是意大利非常常见的街道名称，以至于我认为我们几乎可以在任何意大利城市找到它。

也许我做错了什么？

* * *

编辑 2 - 新测试：

将 World Rect 转换为 CLRegion，代码来自[这里](https://gist.github.com/esromneb/3402711)

```
 NSString *address = [parameters objectForKey:kGeocoderAddress];

    // make a conversion from MKMapRectWorld to a regular CLRegion
    MKMapRect mRect = MKMapRectWorld;
    MKMapPoint neMapPoint = MKMapPointMake(MKMapRectGetMaxX(mRect), mRect.origin.y);
    MKMapPoint swMapPoint = MKMapPointMake(mRect.origin.x, MKMapRectGetMaxY(mRect));

    float ewDelta= neMapPoint.x - swMapPoint.x;
    float nsDelta= swMapPoint.y - neMapPoint.y;

    MKMapPoint cMapPoint = MKMapPointMake(ewDelta / 2 + swMapPoint.x, nsDelta / 2 + neMapPoint.y);

    CLLocationCoordinate2D neCoord = MKCoordinateForMapPoint(neMapPoint);
    CLLocationCoordinate2D swCoord = MKCoordinateForMapPoint(swMapPoint);

    CLLocationCoordinate2D centerCoord = MKCoordinateForMapPoint(cMapPoint);

    CLLocationDistance diameter = [self getDistanceFrom:neCoord to:swCoord];

// i don't have the map like showed in the example so i'm trying to center the search area to the hypothetical center of the world
    CLRegion *clRegion = [[CLRegion alloc] initCircularRegionWithCenter:centerCoord radius:(diameter/2) identifier:@"worldwide"];
    [self.geocoder_5_1 geocodeAddressString:address inRegion: clRegion completionHandler:^(NSArray *placemarks, NSError *error) {
        NSMutableArray *svplacemarks = [NSMutableArray arrayWithCapacity:1];
        SVPlacemark *placemark;
        NSLog(@"placemarks[count] = %i", [placemarks count]);
        for (CLPlacemark *mark in placemarks) {
            placemark = [[SVPlacemark alloc] initWithPlacemark:mark];
            [svplacemarks addObject:placemark];
        }

        self.operationCompletionBlock([NSArray arrayWithArray:svplacemarks],nil,error);
    }]; 
```

...我得到通常的“地标 [count] = 1”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:50:48.637

显然，`CLGeocoder`如果地址被多次点击（即区域足够大以至于简单的街道地址不明确），它将返回多个地标，但如果区域足够小或者提供的地址是，它通常只会找到一个匹配项足够独特。

虽然它不是一个通用的解决方案，有效的 iOS 6.1，你有`MKLocalSearch`，它会进行更一般的查找（包括企业名称等）：

```
MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];
request.region = self.mapView.region;
request.naturalLanguageQuery = textField.text;

MKLocalSearch *localsearch = [[MKLocalSearch alloc] initWithRequest:request];
[localsearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {
    for (MKMapItem *item in response.mapItems)
    {
        Annotation *annotation = [[Annotation alloc] initWithPlacemark:item.placemark];
        annotation.title = item.name;
        annotation.phone = item.phoneNumber;
        annotation.subtitle = item.placemark.addressDictionary[(NSString *)kABPersonAddressStreetKey];
        [self.mapView addAnnotation:annotation];
    }
}]; 
```

我想这一切都取决于您期望收到什么样的多次点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:11:16.547

有一些地址 CLGeocoder 确实会返回多个地标。我发现的一个例子是“Herzel 13, Haifa, Israel”。我使用该`geocodeAddressDictionary:completionHandler:`方法，并为地址获得相同的 2 个结果（可以将其设置为街道/城市/国家，也可以设置为街道 - 结果是相同的）。

很难找到这样的例子，当然它们将来可能会改变。出于某种原因，Apple 地图应用程序显示“您的意思是...”对话框以获取更多地址。

# php - 从 example.com/test.php/foo/bar 中删除 .php

> ID：15793175
> 
> 赞同：0
> 
> 时间：2013-04-03T16:40:38.097
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, rewrite

我正在寻找一种方法来简单地从 url 中删除“.php”，同时忽略 .php 之后的所有内容

所以`example.com/test.php/foo/bar`会变成`example.com/test/foo/bar`

然后在 PHP 模板中，我可以随意搜索和使用 foo 或 bar。我发现删除 .php 的所有内容都会干扰最后的变量。

**更新**：我通过从文件名中删除 .php 然后使用`ForceType`. 虽然如果我可以保留 .php 扩展名仍然很好，这样我的代码编辑器就知道如何突出显示语法:)

```
<FilesMatch "^test$">
    ForceType application/x-httpd-php5
</FilesMatch> 
```

**更新 2** 这是我尝试成功使用的 RewriteRule，但是当我在后面添加斜杠和一些内容时，会导致 500 内部服务器错误

```
RewriteEngine On
RewriteBase /
# remove .php; use THE_REQUEST to prevent infinite loops
    RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
    RewriteRule (.*)\.php$ $1 [R=301]
# remove index
    RewriteRule (.*)/index$ $1/ [R=301]
# remove slash if not directory
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} /$
    RewriteRule (.*)/ $1 [R=301]
# add .php to access file, but don't redirect
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteCond %{REQUEST_URI} !/$
    RewriteRule (.*) $1\.php [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:18:46.697

你的最后一个街区快到了。但是，您需要更多种类的[`RewriteCond`](http://www.google.com/search?q=RewriteCond)s 才能使其与可选的 PATH_INFO 一起使用。

即您需要首先匹配来自 REQUEST_FILENAME/_URI 的单词字符，*然后*测试是否存在同名的 .php 脚本：

```
RewriteCond %{REQUEST_URI}           ^/(w+)/
RewriteCond %{DOCUMENT_ROOT}/%1.php  -f
RewriteRule ^(\w+)/(.+)$ $1.php/$2   [L] 
```

最后一个 RewriteRule 取决于现有的尾随变量。`http://example.com/test`为没有 PATH_INFO的普通请求添加通用规则块之一。请注意，此特定集仅适用于 webroot 中的 xyz.php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:25:14.403

请尝试重新检查：

```
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) ^/%1.php/%2/%3 
```

# ios - 带有 UIViewController 的 UITabBarController 没有 tabbaritem

> ID：15793177
> 
> 赞同：1
> 
> 时间：2013-04-03T16:40:44.053
> 
> 标签：ios, objective-c, uitabbarcontroller, uitabbaritem

我是 iOS 开发的新手并且遇到这样的问题，如果有人可以帮助我：我的项目由一个视图（主视图）和一个带有 3 个视图的 tabbarcontroller 组成。我怎样才能做到这一点，该主视图将显示 tabbarcontroller，但不向其添加 tabbar 项，如下所示：

```
-------------    -------------    -------------    -------------
|   HOME    |    |  VIEW  1  |    |  VIEW 2   |    |  VIEW 3   |
|CONTROLLER |    |CONTROLLER |    |CONTROLLER |    |CONTROLLER | 
|           |    |           |    |           |    |           |
|           |    |           |    |           |    |           |    
|           |    |           |    |           |    |           |    
|           |    |           |    |           |    |           |    
-------------    -------------    -------------    -------------
|VC1|VC2|VC3|    |VC1|VC2|VC3|    |VC1|VC2|VC3|    |VC1|VC2|VC3|
-------------    -------------    -------------    ------------- 
```

主视图是 UITableViewController。我也在使用故事板，如果它很重要的话

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:46:16.367

我认为如果不像这样添加到 TabBarController 就不可能显示 VC。[也许你可以隐藏它，它的猜测没有尝试过]。

但我不明白 tabBar 控制器中主视图的目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:58:33.423

您可以将标签栏添加到 Home 控制器，并为项目提供与标签栏控制器标签栏上相同的名称。Home 控制器应作为其标签栏的委托，您可以实现委托方法 tabBar:didSelectItem: 以切换到正确的控制器。

从您的问题中不清楚您希望如何从家庭控制器到标签栏控制器，因此很难就如何在标签栏控制器内切换到正确的控制器给您任何更具体的建议。

# android - 为应用程序的每个页面创建一个菜单

> ID：15793178
> 
> 赞同：1
> 
> 时间：2013-04-03T16:40:46.887
> 
> 标签：android, menu, tabs

我正在开发一个 Android 应用程序。我不是从头开始做的，而是从前开发者提供的现有资源中做的。我在主页上有一个菜单，有 4 个选项卡，如下所示：

```
public class MenuGen extends TabActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);
        onLoading();
    } 
```

等等。但是在单击每个选项卡下显示的视图的某些元素后，菜单消失（这是正常的）。有没有简单的方法让它“停留”？让它永久存在于应用程序的每个视图中？我不知道我是否清楚，但我想为我的应用程序提供一个永久的 4 个选项卡可点击菜单。怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:23:59.807

我不认为菜单会一直打开。当它失去焦点时，它会隐藏起来。作为一种替代方法，您可以创建按钮以使其始终可见。

这是另一个类似类型的问题。核实

[始终保持 Android 菜单打开：onOptionsMenu](https://stackoverflow.com/questions/8545420/keep-android-menu-open-at-all-times-onoptionsmenu)

# database - 在哪里存储元数据

> ID：15793181
> 
> 赞同：0
> 
> 时间：2013-04-03T16:40:59.220
> 
> 标签：database

我们建立了一种算法，可以帮助我们向用户提供相关文章。在特定时间间隔内，该算法将在后台从与视图、评论和投票相关的大量数据中计算元数据，例如平均年龄、年龄分布和性别系数。

话虽如此，将此元数据存储为 Articles 表中的字段有什么缺点吗？或者，我应该创建一个单独的表（例如 Article_Data）来存储信息吗？我只是不确定此元数据的更新会在多大程度上干扰选择文章。

在大多数情况下，我们将选择文章及其元数据并将其加入用户数据（年龄、性别等）以向用户展示相关内容。唯一不需要元数据的情况是我们向用户展示特定文章时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:43:40.167

如果字段定义明确，并且数量有限，请将它们放在“文章”表中。

如果要为每篇文章存储多个元数据字段记录，则需要另一个表，与 Articles 表具有一对多的关系。

如果字段没有明确定义、用户定义或有很多字段，您可能需要一个新表，其中每个元数据项有一行。但从长远来看，这更难处理。

**另见**
[http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

# qt - Qt：跨平台维护 GUI 控件

> ID：15793184
> 
> 赞同：0
> 
> 时间：2013-04-03T16:41:22.513
> 
> 标签：qt, qt4

我正在编写一个适用于 Linux 和 Windows 的 Qt GUI 应用程序。我已经能够将它部署在 Linux 和 Windows 上，并支持各自平台的共享库。

它在 Windows 和 Linux 上运行得非常好，只是当我运行已部署的二进制文件时，控件在 Linux 上没有按预期显示。例如，QGroupBox 根本看不到，按钮和文本标签大小与我设置的不同。

**如果我在 Linux 上运行 Qt Creator，控件看起来还不错。** 我需要与其他必需的共享库一起部署 UI 的任何特定文件，以确保控件在所有平台上看起来都很好？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:14:28.197

尝试使用参数运行您的程序`-style windowsxp`。你也应该看看`QStyle`它的衍生物。在某些情况下，您必须编写与平台相关的代码，例如：

```
#ifdef Q_OS_WIN
    label->setFrameStyle(QFrame::Panel | QFrame::Raised);
#else
    label->setFrameStyle(QFrame::Box | QFrame::Sunken);
#endif
statusBar->addWidget(label); 
```

# django - 向 Django Admin 添加额外功能

> ID：15793191
> 
> 赞同：0
> 
> 时间：2013-04-03T16:41:41.013
> 
> 标签：django, django-models, django-admin, django-views

这是一个相当简单的想法，但我不确定我应该从哪里开始阅读。

我想要做的就是在 Django Admin 中为模型添加一个额外的操作。

例如，我有一个基本的客户管理系统，其中我有客户、公司和发票的模型来跟踪谁欠什么。我要做的就是添加一个操作或按钮，当使用时，它会从发票、客户和可能的公司中提取信息，然后将这些信息放入 PDF 文档中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:19:40.083

您必须覆盖每个模型的管理模板才能添加按钮 =>[覆盖管理模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)

要生成 PDF，请定义按下按钮后调用的视图。确保为您的管理员用户设置[正确的权限](https://docs.djangoproject.com/en/dev/topics/auth/default/#topic-authorization)。

# android - Android AsyncTask publishProgress 不更新对话框

> ID：15793197
> 
> 赞同：4
> 
> 时间：2013-04-03T16:42:21.870
> 
> 标签：android

我正在尝试更新进度对话框以增加 1-100% 之类的内容。但是，没有任何事情会增加。它总是只显示 0。尽管如此，我可以看到我的 Log Cat 中打印出的数字，并且一切都在应该在 100 之后结束。

有人看到我错过了什么吗？提前感谢您的任何帮助。

```
 private class DownLoadSigTask extends AsyncTask<String, Integer, String> {
    private final ProgressDialog dialog = new ProgressDialog(NasStorageNasList.this);
    // Set the fileName and filesize to be used later
    String fileName = (String) recordItem.get(mPresentDown).get("name");
    String filesize = (String) recordItem.get(mPresentDown).get("filesize");

    // can use UI thread here
    @Override
    protected void onPreExecute() {
        this.dialog.setMessage("Downloading " + fileName + " from the server. Please wait.");
        this.dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        this.dialog.setCancelable(false); 
        this.dialog.setCanceledOnTouchOutside(false);
        this.dialog.show();
    }

    // automatically done on worker thread (separate from UI thread)
    @Override
    protected String doInBackground(final String... args) {
        // Here is where we need to do the downloading of the 

        try {
            File destDir = new File(LOCALDOWNROOT);
            if (!destDir.exists()) {
                destDir.mkdirs();
            }

            File outputFile = new File(destDir, fileName);
            Log.e("What is the filename path to download? ", REMOTEDOWNROOT + DATADIRECTORY + fileName);
            InputStream fis = sardine.get(REMOTEDOWNROOT + DATADIRECTORY + "/"
                    + fileName.replace(" ", "%20"));

            FileOutputStream fos = new FileOutputStream(outputFile);
            byte[] buffer = new byte[1444];
            Log.e("What is the length of the File Size? ", filesize);

            long total = 0;
            int byteread = 0;
            while ((byteread = fis.read(buffer)) != -1) {
                downloadTotal += byteread;
                // Here is the WHILE LOOP that we will want to give the user 

                publishProgress((int)(total*100/Long.parseLong(filesize)));
                Log.e("CurrentAmount Downloaded: ", String.valueOf((int)(downloadTotal*100/Long.parseLong(filesize))));
                // How can I tell the UI the downloaded percentage?
                // So, far I am updating the log cat...but nothing for the user.

                fos.write(buffer, 0, byteread);
            }
            fis.close();
            fos.close();

        } catch (IOException e) {
            e.printStackTrace();
        }

        // Just Return null because the void task
        return null;
    }
    // add in a progress bar update
    @Override
    protected void onProgressUpdate(Integer...progress) {
        this.dialog.setProgress(progress[0]);
    }

    // can use UI thread here
    @Override
    protected void onPostExecute(final String errMsg) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
        }

            Toast.makeText(NasStorageNasList.this, "File Download Done!",
                    Toast.LENGTH_SHORT).show();

    }
}// end DownloadSigTask 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T16:44:47.597

你有“错字”错误。您需要将`publishProgress()`方法中的**总**变量替换为**downloadTotal**。

```
publishProgress((int) (downloadTotal * 100 / Long.parseLong(filesize))); 
```

您的**总**变量仅在循环之前分配为零，并且永远不会更改为其他值。因此，您执行的除法`0 / filesize`始终为 0。

# objective-c - 在属性名称中使用 for 循环的变量

> ID：15793199
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:42:27.413
> 
> 标签：objective-c

我想在属性名称中使用 for 循环的变量，例如：

```
@interface
{
Player *rival1, *rival2, *rival3;
}

int number;
for (number=1; number<=3; number++){
    rival+number = [[Player alloc] init]; //The compiler accepts this.
    rival+number.name = @"";
    //^This line gives the error: "use of undeclared identifier 'rival'"
    //For the first loop, I want it work like: rival1.name = @"";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:53:03.823

这不是解决这个问题的特别干净的方法，但要回答你提出的问题：

```
- (void)generateRivals
{
    for (int i = 1; i < 4; i++)
    {
        NSString *propertySetString = [NSString stringWithFormat:@"setRival%d", i];
        Rival *rival = [[Rival alloc] init];
        [self performSelector:@selector(NSSelectorFromString(propertySetString)) withObject:rival];
    }

} 
```

我们创建了一个选择器（我还没有测试过，但理论上它应该可以工作），它对应于由 i 表示的属性实例的 getter。

根据您添加的评论，您似乎真正想要的是可变数量的玩家（可能不超过一定数量），并且能够单独引用它们。

从架构上讲，与其创建指向每个竞争对手的属性，不如将它们全部放在一个数组中（并将其作为类的属性保存）。所以你会像这样创建它们：

```
- (void)generateRivals:(NSUInteger)numberOfRivals
{

    NSMutableArray *rivalsArray = [[NSMutableArray alloc] initWithCapacity:numberOfRivals];
    for (int i = 0; i < numberOfRivals; i++)
    {
        Rival *rival = [[Rival alloc] init];
        [rivalsArray insertObject:rival atIndex:i];
    }

    [self setRivalsArray:rivals];
} 
```

然后，当您需要访问特定竞争对手时，调用这样的方法，该方法将返回您传递的索引号处的竞争对手：

```
- (Rival *)rivalWithNumber:(NSUInteger)number
{
    return [[self rivalsArray] objectAtIndex:number];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:53:48.373

您不能即时创建属性变量名称并使用它，因为名称在编译过程中会丢失

你可以把它们放在一个数组中并枚举它

```
Player rival1 = [[Player alloc] init];
Player rival2 = [[Player alloc] init];
Player rival3 = [[Player alloc] init];

for (Player *p in @[rival1, rival2, rival3]) {
    p.name = @"";
} 
```

* * *

可能最好的方法是从一开始就保持阵列中的竞争对手

```
@interface …
@property(strong) NSArray *rivals;
@end

@implementation …

//in some useful method, like initializer
_rivals = [NSMutableArray array]
for (int i = 0; i < 3 ++i){
    //create player and add to array
}

@end 
```

* * *

您可能想研究[Key Value Coding](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)。

您需要为您的竞争对手创建属性

```
@interface …

@property(strong) Player *rival1;
@property(strong) Player *rival2;
@property(strong) Player *rival3;

@end

@implementation …

-(id)init…
{
    if(self = [super init…]){
        for (int i = 1; i < 4; ++i) {
            Player *rival = [[Player alloc] init];
            rival.name = [NSString stringWithFormat:@"rival%d", i];
            [self setValue: rival forKey:[NSString stringWithFormat:@"rival%d", i]];
        }
    }
    return self;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:42:18.910

而不是运行`for`循环来设置玩家的名称，只需在类 的方法中`@""`添加该行 。它比编写循环更快，更实用。您还可以创建一个方法，如`name = @""``init``Player``for`

```
-(id)initWithName:(NSString *)initName{
    self = [super init];
    if (self){
      name = initNane;
    }
    return self;
} 
```

在创建播放器时设置播放器的名称。虽然如果你绝对想要一个`for`循环，你可以使用 vikingosegundo 之前发布的方法。

# java - HOWTO：识别数据库连接字符串

> ID：15793202
> 
> 赞同：-4
> 
> 时间：2013-04-03T16:42:30.907
> 
> 标签：java, android, database

基本上我想为论坛开发一个 Android 应用程序，但我没有关于后端数据库的信息，但是我在这个论坛上注册并且我有有效的用户名和密码。无论如何我可以识别后端数据库，以便我可以直接连接到数据库并在那里获取帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:03:34.290

如果论坛没有任何严重的安全漏洞，NO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:47:38.313

您必须从论坛的网页上抓取数据。试试雅虎[管道](http://pipes.yahoo.com/pipes/)。

# knockout.js - Breezejs - 查询本地缓存的模式

> ID：15793204
> 
> 赞同：6
> 
> 时间：2013-04-03T16:42:38.190
> 
> 标签：knockout.js, breeze, single-page-application

我有一个由 PeriodId 过滤的名为 Item 的类。有很多时期——但我们一次只需要看一个。我想向用户展示初始数据加载（比如 PeriodId==1）。然后我希望用户能够查询/过滤其他时间段。

如果用户选择 PeriodId==2，我希望 entityManager 查询本地缓存，如果有数据，则返回该数据。如果它不在本地缓存中，我希望它查询服务器，并将 PeriodId==2 的集合添加到缓存中。如果用户随后单击 PeriodId==1，则该数据应该已经在缓存中，而不是往返于服务器。

使用下面的代码，我每次选择一个时间段时都会访问服务器（即使我只是来回切换）。有没有解决这个问题的模式......我不知道这里的主键。

```
var getItems = function (myObservable, periodId, forceRemote) {

    var pId = periodId ? periodId : 1;

    var query = entityQuery.from('Item')
        .orderBy(orderBy.items)
        .where("PeriodId", "==", pId);

    if (!forceRemote) {
        var r = getLocal(query);
        if (r) {
            if (r.length > 3) {
                myObservable(r);
                return Q.resolve();
            }
        }
    }

    return manager.executeQuery(query)
        .then(querySucceeded)
        .fail(queryFailed);

    function querySucceeded(data) {
        if (myObservable) {
            myObservable(data.results);
        }
    }
};

function getLocal(query) {
    try {
        return manager.executeQueryLocally(query);
    } catch(e) {
        // set was not found in local cache, return null - forcing trip to server
        return null;
    }
} 
```

**更新：**

结合 Jay 的建议，（我必须将 'param' 重命名为 'pId'，将 'q' 重命名为 'query'，如果 forceRemote==true 则重置 queryParamCache，并且我必须在 FetchStrategy 前面加上 'breeze。'）：

```
var queryParamCache = {};

var getItems = function(myObservable, periodId, forceRemote) {

    if (forceRemote) {
        queryParamCache = {};
    }

    var pId = periodId ? periodId : 1;

    var query = entityQuery.from('Item')
        .orderBy(orderBy.items)
        .where('PeriodId', '==', pId);

    var isInCache = queryParamCache[pId];

    if (isInCache && !forceRemote) {
        query = query.using(breeze.FetchStrategy.FromLocalCache);
    } else {
        queryParamCache[pId] = true;
        query = query.using(breeze.FetchStrategy.FromServer);
    }

    return manager.executeQuery(query)
        .then(querySucceeded)
        .fail(queryFailed);

    function querySucceeded(data) {
        rosterObservable(data.results);
    }
};

function queryFailed(error) {
    var msg = 'Error retreiving data. ' + error.message;
    logError(msg, error);
    throw error;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:50:40.307

一个更简单的想法可能只是缓存您是否已执行查询的事实。而不是使用**executeQueryLocally方法，在这种情况下，使用指定****FetchStrategy**的能力更容易。请注意，在使用 **FetchStrategy.FromLocalCache**时，您仍然会返回一个 Promise，但该 Promise 实际上会立即执行。好的部分是您不必区别对待远程和本地查询。

```
var queryParamCache = {};
var getItemsPromise = function (periodId, forceRemote) {

    var pId = periodId ? periodId : 1;

    var query = entityQuery.from('Item')
        .orderBy(orderBy.items)
        .where("PeriodId", "==", pId);

    var isInCache = queryParamCache[pId];
    if (isInCache && !forceRemote) {
        q = q.using(FetchStrategy.FromLocalCache);
    } else {
        queryParamCache[pId] = true;
        q = q.using(FetchStrategy.FromServer);
    }
    return  manager.executeQuery(q);
} 
```

这种方法的另一个特点是它还处理“远程”查询不返回记录的情况。因此，与测试本地查询是否实际返回数据不同，当您尚未运行查询和*没有满足查询的*数据时，这将是错误的，这种方法只是跟踪您是否曾经执行过查询，不管其结果如何。

# android - 如何避免在 Android 上启动 phonegap 应用程序时显示标题栏？

> ID：15793218
> 
> 赞同：1
> 
> 时间：2013-04-03T16:43:10.797
> 
> 标签：android, cordova

我在 android 上的 phonegap 应用程序有一个启动画面。但是，每次在显示启动画面之前，都会在启动画面之前显示一个带有标题栏（带有应用程序名称的图标）的空白屏幕。我怎样才能让它消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:23:00.093

试试`requestWindowFeature(FEATURE_NO_TITLE)`你的活动的 onCreate() 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:19:00.930

如果您也可以全屏显示，那么如果您将其添加到 mainfest 中可能会有所帮助-

```
<application 
    android:icon="@drawable/icon" 
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> 
```

# perl - 在此处文档中插入常量的首选方法是什么？

> ID：15793219
> 
> 赞同：10
> 
> 时间：2013-04-03T16:43:13.183
> 
> 标签：perl

我确信有几种方法可以在下面的 <> 中插入值“bar”，但是最干净的方法是什么，为什么？

```
use constant FOO => 'bar';

my $msg = <<EOF;
Foo is currently <whatever goes here to expand FOO>
EOF 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T16:59:38.133

这里有两种文档：

*   `<<'END'`，其行为大致类似于单引号字符串（但没有转义），并且
*   `<<"END"`, 还有`<<END`, 其行为类似于双引号字符串。

要在双引号字符串中插入值，请使用标量变量：

```
my $foo = "bar";
my $msg = "Foo is currently $foo\n"; 
```

或者使用 arrayref 插值技巧

```
use constant FOO => "bar";
my $msg = "Foo is currently @{[ FOO ]}\n"; 
```

您还可以定义模板语言来替换正确的值。根据您的问题域，这可能会更好，也可能不会更好：

```
my %vars = (FOO => "bar");
my $template = <<'END';
Foo is currently %FOO%;
END

(my $msg = $template) =~ s{%(\w+)%}{$vars{$1} // die "Unknown variable $1"}eg; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T21:38:49.793

许多 CPAN 模块在常量方面比`use constant`pragma 做得更好，但问题在于它们不是标准 Perl 包的一部分。不幸的是，在您可能不拥有的机器上下载 CPAN 模块可能非常困难。

因此，我决定坚持下去，`use constant`直到 Perl 开始将类似的东西`Readonly`作为其标准模块的一部分包含在内（并且只有当 RedHat 和 Solaris 等发行版决定更新到 Perl 的这些版本时。我仍然坚持使用 5.8.8在我们的生产服务器上。）

幸运的是，`use constant`如果您知道从黑客传到黑客的神秘和神秘的咒语，您可以插入定义的常量。

把`@{[...]}`常数放在一边。这也可以与类中的方法一起使用：

```
use 5.12.0;
use constant {
    FOO => "This is my value of foo",
};

my $data =<<EOT;
this is my very long
value of my variable that
also happens to contain
the value of the constant
'FOO' which has the value
of @{[FOO]}
EOT

say $data; 
```

### 输出：

```
这是我的很长
我的变量的值
也恰好包含
常数的值
'FOO' 具有价值
这是我对 foo 的价值
```

### 使用方法：

```
say "The employee's name is @{[$employee->Name]}"; 
```

### 在旁边：

还有另一种使用我以前使用的*常量*`use constant`的方法。它是这样的：

```
*FOO = \"This is my value of foo";
our $FOO;

my $data =<<EOT;
this is my very long
value blah, blah, blah $FOO
EOT

say $data; 
```

您可以将`$FOO`其用作任何其他标量值，并且不能修改。您尝试修改该值并获得：

> 尝试修改只读值...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T19:29:51.173

使用[Const::Fast](http://search.cpan.org/perldoc/Const::Fast)代替`Readonly`or `constant`。它们在没有任何扭曲的情况下进行插值。请参阅[CPAN 模块以定义常量](http://neilb.org/reviews/constants.html)：

> 对于条件编译，常量是一个不错的选择。它是一个成熟的模块并且被广泛使用。
> 
> ...
> 
> 如果您想要数组或散列常量，或不可变的丰富数据结构，请使用 Const::Fast。这与 Attribute::Constant 之间的竞争很激烈，但 Const::Fast 似乎更成熟，并且发布了更多版本。

另一方面，您似乎正在编写自己的模板代码。不。相反，使用一些简单的东西，比如[HTML::Template](http://search.cpan.org/perldoc/HTML::Template)：

```
use HTML::Template;

use constant FOO => 'bar';

my $tmpl = HTML::Template->new(scalarref => \ <<EOF
Foo is currently <TMPL_VAR VALUE>
EOF
);

$tmpl->param(VALUE => FOO);
print $tmpl->output; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T17:13:11.127

您是否考虑过使用[“只读变量”](https://metacpan.org/module/Readonly)作为常量？
*perlcritic 将其推荐为严重级别 4（默认为级别 5）*

```
use Readonly;
Readonly my $FOO => 'bar';

my $msg = <<"EOF";
Foo is currently <$FOO>
EOF 
```

PS **Module `Const::Fast`（受 nodule 启发`Readonly`）似乎是一个更好的选择。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-09T16:43:23.447

迟到了，但是[另一个版本的 arrayref 技巧](http://docstore.mik.ua/orelly/perl/cookbook/ch01_11.htm)可以在标量上下文中做到这一点：`${\FOO}`. 示例，在 cygwin 上的 perl 5.22.2 中测试：

```
use constant FOO=>'bar';
print <<EOF
backslash -${\FOO}-
backslash and parens -${\(FOO)}-
EOF 
```

生产

```
backslash -bar-
backslash and parens -bar- 
```

感谢[d-ash](https://stackoverflow.com/users/878560/d-ash)向我介绍了这项技术，他在[此处](https://github.com/interpreters/perlpp/blob/b4a0abed5c66f53c6f1c415f29300496a33995f0/lib/Text/PerlPP.pm#L32)`perlpp`的源预处理器中使用了该技术（[另请参阅此答案](https://stackoverflow.com/a/15027444/2877364)）。（免责声明：我现在是- [GitHub](https://github.com/interpreters/perlpp) ; [CPAN](https://metacpan.org/pod/Text::PerlPP)的主要维护者。）`perlpp`

# xml - xml 模式中是否有任何方法可以让一个属性始终大于 xml 元素中的另一个属性？

> ID：15793221
> 
> 赞同：0
> 
> 时间：2013-04-03T16:43:14.630
> 
> 标签：xml, xsd

这是`xml`：

```
<range from="100" to="200"/> 
```

那么，如何写一个`xsd`来保证属性`to`总是大于`from`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:45:08.037

Schema，顾名思义，只会定义文档的模式，而不是验证条件数据。你必须在你的应用程序中这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:44:23.573

在 XSD 1.1 中，您可以使用对“范围”类型的断言来施加该约束。在 XSD 1.0 中，约束是不可表达的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T06:07:53.610

这是一个示例，可查看如何在您的情况下添加 XSD 1.1 断言：

```
<xs:complexType>
    <xs:attribute name="to" type="xs:integer"/>
    <xs:attribute name="from" type="xs:integer"/>
    <xs:assert test="@to > @from"/>
</xs:complexType> 
```

在“assert”元素的“test”属性中，您可以引入 XPath 2.0 表达式。

# xsd - 没有 xsd 的 jaxb 绑定自定义

> ID：15793223
> 
> 赞同：0
> 
> 时间：2013-04-03T16:43:16.060
> 
> 标签：xsd, jaxb, wsdl, wsimport

我有一个 wsdl（我没有 .xsd 文件），我想从中生成类。使用 wsimport 我得到一个类树，它是 Web 服务模式本身及其依赖项的标准映射。我得到了 com->(microsoft,mycompany), org->(apache) 之类的东西。

但是我需要将包 com.mycompany 和里面的所有类重新映射到 com.mycompany.test 中。

因此，我尝试使用 ws import 的 -b 选项创建一个 docbinding.xml，即模式自定义 XML。内容是：

```
<jxb:bindings version="2.1"  xmlns:jxb="http://java.sun.com/xml/ns/jaxb"     xmlns:xs="http://www.w3.org/2001/XMLSchema">
<jxb:bindings node="wsdl:definitions/wsdl:types/xsd:schema[@targetNamespace='http://mycompany.com/test/']">
 <jaxb:package name="com.mycompany.test"/>
</jxb:bindings>
</jxb:bindings> 
```

使用以下语法启动 wsimport：

```
wsimport -p com.mycompany -b docbinding.xml https://mycompany.com/nicews/test.svc?wsdl 
```

我得到一个停止生成类的初始错误：

```
[ERROR] XPath error: null
... 
```

如何修复绑定 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:56:48.890

如果类型位于单独的 XSD 文件中。这是做到这一点的方法。

创建两个配置文件。

wsdl.jxb

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxws:bindings
  xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
  wsdlLocation="https://mycompany.com/nicews/test.svc?wsdl"
  xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
    <jaxws:package name="com.mycompany.wsdl"/> <!-- namespace what you want here -->
</jaxws:bindings> 
```

xsds.jxb

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings version="2.1"
           xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
           xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
           xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
           xmlns:xs="http://www.w3.org/2001/XMLSchema" >

    <!-- This is used becuase we don't need to differentiate between absent and nil elements, you may want to differentiate.  If so, remove this binding -->
    <jaxb:globalBindings generateElementProperty="false">
      <xjc:simple />
    </jaxb:globalBindings>  

    <!-- REPEAT THIS SECTION FOR EACH XSD, replacing schemaLocation and package with whatever you want -->
    <jaxb:bindings
           schemaLocation="http://mycompany.com/someWsdlIncludeLocation?xsd=xsd0"
           node="/xs:schema">
          <jaxb:schemaBindings>
        <jaxb:package name="com.mycompany.dto.saml" />
          </jaxb:schemaBindings>
    </jaxb:bindings>
    <!-- END SECTION -->
</jaxb:bindings> 
```

在同一目录下创建批处理文件

```
rmdir /S /Q build
rmdir /S /Q dist
rmdir /S /Q src
mkdir build
mkdir dist
mkdir src
"%JAVA_HOME%\bin\wsimport.exe" -b wsdl.jxb -b xsds.jxb -s src -d build -keep http://mycompany.com/someWSDLlocation?wsdl
"%java_home%\bin\jar" cf dist/mycompanyClient.jar -C build/ .
"%java_home%\bin\jar" cf dist/mycompanyClient-src.jar -C src/ . 
```

看看这是否适合你。确保为您的 wsdl/xsd 位置和所需的包适当地编辑 JXB 文件。

# python - Scipy：加快二维复积分的计算

> ID：15793224
> 
> 赞同：11
> 
> 时间：2013-04-03T16:43:25.183
> 
> 标签：python, numpy, scipy, integration, complex-numbers

我想使用 scipy.integrate 中的 dblquad 重复计算二维复积分。由于评估的数量会很高，我想提高我的代码的评估速度。

Dblquad 似乎无法处理复杂的被积函数。因此，我将复数被积函数分为实部和虚部：

```
def integrand_real(x, y):
    R1=sqrt(x**2 + (y-y0)**2 + z**2)
    R2=sqrt(x**2 + y**2 + zxp**2)
    return real(exp(1j*k*(R1-R2)) * (-1j*z/lam/R2/R1**2) * (1+1j/k/R1))

def integrand_imag(x,y):
    R1=sqrt(x**2 + (y-y0)**2 + z**2)
    R2=sqrt(x**2 + y**2 + zxp**2)
    return imag(exp(1j*k*(R1-R2)) * (-1j*z/lam/R2/R1**2) * (1+1j/k/R1)) 
```

y0、z、zxp、k 和 lam 是预先定义的变量。为了评估半径为 ra 的圆的面积上的积分，我使用以下命令：

```
from __future__ import division
from scipy.integrate import dblquad
from pylab import *

def ymax(x):
    return sqrt(ra**2-x**2)

lam = 0.000532
zxp = 5.
z = 4.94
k = 2*pi/lam
ra = 1.0

res_real = dblquad(integrand_real, -ra, ra, lambda x: -ymax(x), lambda x: ymax(x))
res_imag = dblquad(integrand_imag, -ra, ra, lambda x: -ymax(x), lambda x: ymax(x))
res = res_real[0]+ 1j*res_imag[0] 
```

根据分析器，这两个被积函数被评估了大约 35000 次。总计算大约需要一秒钟，这对于我想到的应用程序来说太长了。

我是使用 Python 和 Scipy 进行科学计算的初学者，我很高兴看到指出提高评估速度的方法的评论。是否有方法可以重写 integrand_real 和 integrand_complex 函数中的命令，从而显着提高速度？

使用 Cython 之类的工具编译这些函数是否有意义？如果是：哪种工具最适合此应用程序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T17:37:48.530

通过使用 Cython，您可以获得大约 10 倍的速度，见下文：

```
In [87]: %timeit cythonmodule.doit(lam=lam, y0=y0, zxp=zxp, z=z, k=k, ra=ra)
1 loops, best of 3: 501 ms per loop
In [85]: %timeit doit()
1 loops, best of 3: 4.97 s per loop 
```

这可能还不够，坏消息是，如果使用相同的自适应集成算法，这可能与 C/Fortran 中的一切速度非常接近（最多可能为 2 倍）。（scipy.integrate.quad 本身已经在 Fortran 中。）

为了更进一步，您需要考虑不同的方法来进行集成。这需要一些思考 --- 现在不能从我的脑海中提供太多。

或者，您可以减小评估积分的容差。

```
# 在 Python 中执行
#
# >>> 导入 pyximport; pyximport.install(reload_support=True)
# >>> 导入 cython 模块

cimport numpy 作为 np
cimport cython

来自“complex.h”的 cdef extern：
    双复 csqrt(双复 z) nogil
    双复数 cexp(双复数 z) nogil
    双Creal（双复数z）诺吉尔
    双 cimag（双复数 z）诺吉尔

从 libc.math cimport sqrt

从 scipy.integrate 导入 dblquad

cdef 类参数：
    cdef public double lam, y0, k, zxp, z, ra

    def __init__(self, lam, y0, k, zxp, z, ra):
        self.lam = 拉姆
        自我.y0 = y0
        自我.k = k
        自我.zxp = zxp
        自我.z = z
        自我.ra = ra

@cython.cdivision（真）
def integrand_real（双 x，双 y，参数 p）：
    R1 = sqrt(x**2 + (yp.y0)**2 + pz**2)
    R2 = sqrt(x**2 + y**2 + p.zxp**2)
    返回 creal(cexp(1j*pk*(R1-R2)) * (-1j*pz/p.lam/R2/R1**2) * (1+1j/pk/R1))

@cython.cdivision（真）
def integrand_imag(double x, double y, 参数 p):
    R1 = sqrt(x**2 + (yp.y0)**2 + pz**2)
    R2 = sqrt(x**2 + y**2 + p.zxp**2)
    返回 cimag(cexp(1j*pk*(R1-R2)) * (-1j*pz/p.lam/R2/R1**2) * (1+1j/pk/R1))

def ymax（双 x，参数 p）：
    返回 sqrt(p.ra**2 + x**2)

def doit(lam, y0, k, zxp, z, ra):
    p = 参数(lam=lam, y0=y0, k=k, zxp=zxp, z=z, ra=ra)
    rr, err = dblquad(integrand_real, -ra, ra, lambda x: -ymax(x, p), lambda x: ymax(x, p), args=(p,))
    ri, err = dblquad(integrand_imag, -ra, ra, lambda x: -ymax(x, p), lambda x: ymax(x, p), args=(p,))
    返回 rr + 1j*ri

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T16:47:40.783

您是否考虑过多处理（多线程）？似乎您不需要进行最终集成（在整个集合上），因此简单的并行处理可能就是答案。即使您确实必须进行集成，您也可以等待正在运行的线程完成计算，然后再进行最终集成。也就是说，您可以阻塞主线程，直到所有工作人员都完成。

[http://docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-24T09:20:55.447

[quadpy](https://github.com/nschloe/quadpy#disk)（我的一个项目）支持许多磁盘功能的集成方案。它支持复值函数并且是完全向量化的。例如，[Peirce 的](https://www.jstor.org/stable/2098722)83 阶方案：

```
from numpy import sqrt, pi, exp
import quadpy

lam = 0.000532
zxp = 5.0
z = 4.94
k = 2 * pi / lam
ra = 1.0
y0 = 0.0

def f(X):
    x, y = X
    R1 = sqrt(x ** 2 + (y - y0) ** 2 + z ** 2)
    R2 = sqrt(x ** 2 + y ** 2 + zxp ** 2)
    return exp(1j * k * (R1 - R2)) * (-1j * z / lam / R2 / R1 ** 2) * (1 + 1j / k / R1)

scheme = quadpy.disk.peirce_1957(20)
val = scheme.integrate(f, [0.0, 0.0], ra)

print(val) 
```

```
(18.57485726096671+9.619636385589759j) 
```

# node.js - 在 Node.js 的 readFile 方法中处理超时回调事件

> ID：15793227
> 
> 赞同：0
> 
> 时间：2013-04-03T16:43:35.367
> 
> 标签：node.js, asynchronous

**我的要求如下：**

我有 3 个大文件 big_file_1、big_file_2 和 big_file_3。我想异步读取这 3 个大文件，只有在所有文件的读取完成后才处理我的其余代码。

```
fs.readFile('big_file_1', function (err, data) {
  if (err) throw err;
  content_1 = data;
});
fs.readFile('big_file_2', function (err, data) {
  if (err) throw err;
  content_2 = data;
});
fs.readFile('big_file_3', function (err, data) {
  if (err) throw err;
  content_3 = data;
});
// Do something with content_1, content_2 and content_3 
```

如何在 Node.JS 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:50:25.943

您可以使用[异步库](https://npmjs.org/package/async)`parallel`的功能来做到这一点：

```
async.parallel([
  fs.readFile.bind(fs, 'big_file_1'),
  fs.readFile.bind(fs, 'big_file_2'),
  fs.readFile.bind(fs, 'big_file_3')
], function (err, results) {
  if (err) throw err;
  content_1 = results[0]
  content_2 = results[1]
  content_3 = results[2]
  /* TODO do some cool stuff */
}) 
```

或者，您可以手动执行此操作：

```
int steps_done = 0
fs.readFile('big_file_1', function(err, data) {
  if (err) throw err
  content_1 = data
  if (++steps_done == 3) do_next_step()
})
fs.readFile('big_file_2', function(err, data) {
  if (err) throw err
  content_2 = data
  if (++steps_done == 3) do_next_step()
})
fs.readFile('big_file_3', function(err, data) {
  if (err) throw err
  content_3 = data
  if (++steps_done == 3) do_next_step()
}) 
```

# android - viewpagerindicator 中的 ListFragment 在 AsyncTask 上失败

> ID：15793228
> 
> 赞同：1
> 
> 时间：2013-04-03T16:43:37.870
> 
> 标签：android, actionbarsherlock, android-viewpager, android-listfragment

我正在开发一个带有 viewpagerindicator 和 actionsherlock 的应用程序。我已经实现了一个选项卡屏幕，但是当我在 SherlockListFragment Async 中加载数据时，片段在几个片段更改后消失了。

我有四个选项卡 A、B、C、D，当我加载数据时，异步切换 A 到 B 没问题，但是当我切换到 C 时，A 不显示片段，当我切换到 D 时，不再显示片段.

没有错误被抛出。

我的片段页面适配器是这样的：

```
class PaginationAdapter extends FragmentPagerAdapter {
    public PaginationAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {

        return new CustomFragment();
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return CONTENT[position % CONTENT.length].toUpperCase(Locale.getDefault());
    }

    @Override
    public int getCount() {
      return CONTENT.length;
    }
} 
```

这是有效的片段：

```
public final class CustomFragment extends SherlockListFragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new SimpleAdapter(getSherlockActivity(), getData(),
         R.layout.descuentos_layout,  new String[] { "title" },
         new int[] { R.id.txtTitle }));
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.custom_list_fragment, null);
    return view;
}

protected List<Map<String, String>> getData() {
        List<Map<String, String>> myData = new ArrayList<Map<String, String>>();

        for (int i = 1; i < 20; i++){
            Map<String, String> temp = new HashMap<String, String>();
            temp.put("title", "Item " + i);
            temp.put("ItemId", String.valueOf(i));
            myData.add(temp);
        }

        return myData;
    }

} 
```

但这不会：

```
public final class DescuentosFragment extends SherlockListFragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ListViewLoaderTask llt = new ListViewLoaderTask();
    llt.execute("");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.descuentos_list_fragment, null);
    return view;
}

private class ListViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter> {

    @Override
    protected SimpleAdapter doInBackground(String... str) {

        SimpleAdapter adapter = new SimpleAdapter(getSherlockActivity(), getData() , R.layout.descuentos_layout,new String[] { "title" },
                 new int[] { R.id.list_title });

        return adapter;
    }

    @Override
    protected void onPostExecute(SimpleAdapter adapter) {

        ListView listView = getListView();
        listView.setAdapter(adapter);
    }

    protected List<Map<String, String>> getData() {
        List<Map<String, String>> myData = new ArrayList<Map<String, String>>();

        for (int i = 1; i < 20; i++){
            Map<String, String> temp = new HashMap<String, String>();
            temp.put("title", "Item " + i);
            temp.put("ItemId", String.valueOf(i));
            myData.add(temp);
        }

        return myData;
    }

}
} 
```

怎么了？谢谢

# breeze - 不支持在同一个查询中使用微风执行选择和展开

> ID：15793231
> 
> 赞同：5
> 
> 时间：2013-04-03T16:43:40.340
> 
> 标签：breeze, durandal

我用 Durandal/breeze 开发了一个 asp.net 解决方案。

这是我获取所有托运人的代码：

```
var query = EntityQuery.from('Shippers')
               .select('id, name, street, city');

return manager.executeQuery(query)
        .then(querySucceeded)
        .fail(queryFailed); 
```

以下是相关模型：

```
public class Shipper
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public string Street { get; set; }
    public string Number { get; set; }
    public City City { get; set; }
}

public class City
{
    public int Id { get; set; }        
    public string Name { get; set; }
    public string PostCode { get; set; }
    public Country Country { get; set; }
} 
```

现在我还需要包括国家

```
public class Country
{
    [Key]
    public int Id { get; set; }
    public string Code { get; set; }
    public string Name { get; set; }
} 
```

但是通过实际查询，我没有得到国家。

我尝试：

```
var query = EntityQuery.from('Shippers')
               .select('id, name, street, city')
               .expand('City.Country'); 
```

但我得到了错误：

`use of both 'expand' and 'select' in the same query is not currently supported`

**我的问题**：如何获得国家？

* * *

**更新**

正如 Jay 建议的那样，我们可以这样做：

```
var query = EntityQuery.from('Shippers')
       .select('id, name, street, city, city.country') 
```

现在，我得到了一个`city_Country`对象：

![在此处输入图像描述](https://i.stack.imgur.com/mjm6q.png)

我不明白为什么我们得到这个`city_Country`，因为城市\国家对象中已经有国家数据：

![在此处输入图像描述](https://i.stack.imgur.com/3DLnL.png)

此外，它给我带来了问题，因为我的下一条语句尝试将我的 dto 映射到我的实体中，并且该`city_Country`对象在我的实体中不存在，并且在映射时发生错误。

下面我们看到我的实体对象并且没有`city_Country`对象：

![在此处输入图像描述](https://i.stack.imgur.com/OigsG.png)

我必须在我的映射上做一些特别的事情来避免它吗？

以下是我的映射操作功能：

```
function mapToEntity(entity, dto) {
     // entity is an object with observables
     // dto is from json
     for (var prop in dto) {
          if (dto.hasOwnProperty(prop)) {
             entity[prop](dto[prop]);
          }
     }
     return entity;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:49:51.297

我不确定使用投影来“部分”填充实体是一种好习惯，这就是你正在做的事情。Breeze 将自动映射它在您的结果集中找到的任何真正的“实体”。那么为什么不简单地使用

```
var query = EntityQuery.from('Shippers')
    .where(...)
    .expand('city.country'); 
```

直接结果将是托运人的集合，但每个托运人的城市和嵌套国家属性也将完全解析为实体。它们将通过返回的*托运人*的导航提供，但如果您想直接查询它们，它们也将在 entityManager 缓存中可用。

第二个注意事项：Breeze“扩展”语义具有与实体框架相同的限制。这意味着我们不能扩展投影的属性。

所以你可以跳过投影（如上）

```
var query = EntityQuery.from('Shippers')
   .where(...)
   .expand('city.country') 
```

并获得完整的“托运人”实体，城市上的“城市”和“国家”属性都被填充。......或者你可以做一个投影，在这种情况下你自己执行扩展的等价物。即

在这种情况下，您将

```
var query = EntityQuery.from('Shippers')
  .select('id, name, street, city, city.country') 
```

在这种情况下，结果集中的每个项目都将包含 5 个属性。请注意，在这种情况下，只有“city”和“city.country”属性将被添加到 entityManager 的缓存中，因为它们是结果集中唯一的“真实”实体。即没有托运人的

要明确的想法是查询的“结果”和查询的“副作用”是不同的。查询的顶级结果将完全符合您的预期。查询的“副作用”是您执行的任何“扩展”的结果。这些不会改变查询的形状，它们只是改变结果中任何嵌套“实体”属性的分辨率。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:28:34.157

我们确实允许这样做：

```
var query = EntityQuery.from('Shippers')
           .select('id, name, street, city, city.country') 
```

# c++ - 什么是 C++ 中的预存读取？

> ID：15793236
> 
> 赞同：8
> 
> 时间：2013-04-03T16:44:07.107
> 
> 标签：c++, memory

[我今天看到的一篇文章](http://reviews.cnet.com/8301-3514_7-57577639/samsung-joins-mozillas-quest-for-rust/)谈到了 Rust 编程语言（由 Mozilla 开发）以及它打算如何取代 C++。Rust 被引用的好处之一是缺乏**预内存读取**。引用 Mozilla 首席技术官 Brendan Eich...

> 他说，Rust 中“没有预内存读取”，但在 C++ 中有。这些问题“导致了很多浏览器漏洞”，Rust 可以解决这些问题。

有趣的是，目前在谷歌上只有 4 次点击“pre-memory reads”这个短语，所有这些都指的是文章本身。什么是 C++ 中的预存读取，为什么它不好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T16:55:20.443

似乎对文章进行了更正。[更正后](http://reviews.cnet.com/8301-3514_7-57577639/samsung-joins-mozillas-quest-for-rust/?part=rss&subj=cnet&tag=title&utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20cnet/NnTv%20%28CNET%20River%20RSS%29)的报价如下：

> 他指出，每年浏览器都会在 CanSecWest 会议的年度 Pwn2Own 竞赛中成为黑客攻击的受害者。他说，Rust 中“没有**空闲的内存读取**”，但在 C++ 中有。这些问题“导致了很多浏览器漏洞”，并且可以通过自编译语言 Rust 来解决。

我认为这可以解释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T16:58:49.817

那篇文章还包含这句话，这显然是错误的：

> C++ 在设计上是不安全的，”他说。“它让你陷入困境，这个术语意味着代码在本机运行并且在 CPU 能够理解之前不必编译，“但它是不安全的。

所以，我认为可以肯定地说这篇文章是不可靠的，并且可能错误地引用了他。

# python - TypeError : clean_country() 只需要 1 个参数（给定 0）

> ID：15793237
> 
> 赞同：0
> 
> 时间：2013-04-03T16:44:09.923
> 
> 标签：python, django, forms, class, self

```
class FilterForm(forms.Form):
    currency = forms.ChoiceField(choices=Currency_choices)
    continent = forms.ChoiceField(choices=Select_continent())   
    def clean_country(self):
        continent = self.cleaned_data['continent']
        result = Select_country(continent)
        return result 
    country = forms.ChoiceField(choices=clean_country()) //error is here 
```

我正在尝试获取 Continent 中的选定字段并显示该大陆的所有国家/地区，因此请尝试使用 clean_country 返回所选大陆的国家/地区列表。但我有 TypeError : clean_country() 只需要 1 个参数（给定 0）那么我该如何使用这个函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:32:57.343

我认为您应该使用`AJAX`更好的方法。您可以使用 jQuery 检查所选项目并将该数据发送到您的视图。然后你可以这样做`anything you need`。

如果需要更多解释，请说出来。

# excel - Excel VBA [复杂的 .formulaR1C1 不工作]

> ID：15793240
> 
> 赞同：0
> 
> 时间：2013-04-03T16:44:15.953
> 
> 标签：excel, excel-formula, vba

这是我的代码行：

`ActiveCell.FormulaR1C1 = "='Main'!R[9]C[0]&LEFT("" "",5-LEN('Main'!R[9]C[1])) &'Main'!R[9]C[1]&"" ""&DAY('Main'!R[4]C[8]) & ""-"" & UPPER(TEXT('Main'!R[4]C[8],""mmm"")) & ""-"" &YEAR('Main'R[4]C[8])&"" "" & 'Main'!R[9]C[3] & "" "" & 'Main'!R[9]C[4] & "" "" & LEFT('Main'!R[9]C[5],35)& LEFT("" "",35-LEN(LEFT('Main'!R[9]C[5],35))) & "" "" & LEFT("" "", 12-LEN('Main'!R[9]C[6]))& 'Main'!R[9]C[6] & "" "" & 'Main'!R[9]C[7] & "" "" & LEFT('Main'!R[4]C[9],9) & LEFT("" "",9-LEN(LEFT('Main'!R[4]C[9],9))) & "" "" & 'Main'!R[9]C[2] & LEFT("" "",4-LEN('Main'!R[9]C[2])) & "" DATALOAD"""`

我得到一个`run-time error 1004`说法，它是一个`application-defined or object-defined error`。问题是我对 VBA 不是很熟悉。这个公式中有很多东西。基本上，我需要的只是将数据以 EXACT 格式粘贴到新工作表上。这就是为什么会有一堆空格之类的。我之所以使用`R1C1`，是因为每行在工作表 1 上都有不同的数据，需要相应地粘贴到工作表 2 中。

关于为什么此代码遇到错误的任何想法？任何帮助将不胜感激。

为了澄清：我的整个宏如下......

```
Dim row As Integer
Dim col As String
col = "A"
row = 1
Do Until IsEmpty(ActiveCell) 
     Sheets("Protected").Select 
     Range(col & row).Select 
     ActiveCell.FormulaR1C1 = "big long code as mentioned above goes here"
     Sheets("Main").Select
     ActiveCell.Offset(1, 0).Select 
     row = row + 1 
```

**从评论中复制**

实际工作公式为

`=Main!A11&LEFT(" ",5-LEN(Main!B11)) &Main!B11&" "&DAY(Main!$D$6) & "-" & UPPER(TEXT(Main!$D$6,"mmm")) & "-" &YEAR(Main!$D$6)&" " & Main!D11 & " " & Main!E11 & " " & LEFT(Main!F11,35)& LEFT(" ",35-LEN(LEFT(Main!F11,35))) & " " & LEFT(" ", 12-LEN(Main!G11))& Main!G11 & " " & Main!H11 & " " & LEFT(Main!$E$6,9) & LEFT(" ",9-LEN(LEFT(Main!$E$6,9))) & " " & Main!C11 & LEFT(" ",4-LEN(Main!C11)) & " DATALOAD"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:04:57.577

当您有一个工作公式时，最好的办法是记录一个宏来查看 Excel 如何将公式存储在单元格中。

这是我从宏中得到的

`ActiveCell.FormulaR1C1 = "=Main!R[10]C[-3]&LEFT("" "",5-LEN(Main!R[10]C[-2])) &Main!R[10]C[-2]&"" ""&DAY(Main!R6C4) & ""-"" & UPPER(TEXT(Main!R6C4,""mmm"")) & ""-"" &YEAR(Main!R6C4)&"" "" & Main!R[10]C & "" "" & Main!R[10]C[1] & "" "" & LEFT(Main!R[10]C[2],35)& LEFT("" "",35-LEN(LEFT(Main!R[10]C[2],35))) & "" "" & LEFT("" "", 12-LEN(Main!R[10]C[3]))& Main!R[10]C[3] & "" "" & Main!R[10]C[4] &" & " LEFT(Main!R6C5,9) & LEFT("" "",9-LEN(LEFT(Main!R6C5,9))) & "" "" & Main!R[10]C[-1] & LEFT("" "",4-LEN(Main!R[10]C[-1])) & "" DATALOAD"""`

您可以将此公式与您的公式进行比较，看看缺少什么:)

# sql - SQL 到 XML 并将其保存为机器上的 XML 文件

> ID：15793245
> 
> 赞同：0
> 
> 时间：2013-04-03T16:44:27.970
> 
> 标签：sql, xml, oracle, xml-parsing, oracle11g

我有一个以 XML 格式给出结果的查询。现在我想将此结果保存为 XML 文件，以便可以将其用于其他目的。

```
SELECT XMLElement("DEPARTMENT"
                 , XMLForest(department_id as "ID"
                            , department_name as "NAME"
                            )
                 )
  FROM departments
 WHERE department_id IN (10, 20); 
```

我将如何在 oracle (PL/SQL) 中做到这一点。
我刚刚阅读了有关 UTL_FILE 的内容，但老实说，一个示例在 Linux 和 Windows 上都会对我有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:12:06.157

见评论中的链接。你也可以试试 SYS_XMLGEN：

```
SELECT SYS_XMLGEN(XMLElement("DEPARTMENT"
             , XMLForest(deptno as "ID"
                        , dname as "NAME"
                        )
             )
             ) xml_output
  FROM scott.dept
 WHERE deptno IN (10, 20)
/ 
```

# css - Chrome 的 CSS 问题 - 导航元素凹凸

> ID：15793246
> 
> 赞同：0
> 
> 时间：2013-04-03T16:44:30.047
> 
> 标签：css, google-chrome, navigation, positioning

为班级制作学术模型。它是仅使用 HTML 和 CSS 对现有公司网页的简单复制。上周在所有浏览器中一切正常。我昨天打开它提交前检查它，有问题。

仅在 Chrome 中，我的导航栏的最后一个元素被直接降低了 19 像素。

这页纸。[链接](http://webdev2.kennesaw.edu/IS3760/Section1/jbyford/capstone/index.html)
css。[关联](http://webdev2.kennesaw.edu/IS3760/Section1/jbyford/capstone/css/stylesheet.css)

相关的CSS。

```
#navbar {
    position:absolute;
    display:block;
    top: 115px;
    left:0px;
    width:100%;
    height: 45px;
    background:url(../images/navbar_section.png) repeat-x;
    padding:0px;
    margin:0 auto;
    text-align:center;
    -webkit-box-shadow: 0px 2px 2px rgba(50, 50, 50, 0.27);
    -moz-box-shadow:    0px 2px 2px rgba(50, 50, 50, 0.27);
    box-shadow:         0px 2px 2px rgba(50, 50, 50, 0.27);
}
#navmenu {
    float:left;
    left:50%;
    position:relative;
    width:964px;
}
#navmenu ul, li {
    display: inline;
}
#navmenu li a {
    font-size:1em;
    float: left;
    color: white;
    font-weight:bold;
    border-left:2px groove #008dcb;
    text-decoration: none;
    line-height:45px;
    position:relative;
    margin-left:auto;
    margin-right:auto;
    right:50%;
    padding-left:10px;
    padding-right:10px;
    width:138px;
}
#navmenu li a:hover {
    color: white;
    background:url(../images/navbar_visited.png);
}
#navmenu li:last-child a {
    border-right:2px groove #008dcb;
} 
```

相关的html。

```
<div id="navbar">
  <div id="navmenu">
    <ul>
      <li><a href="#">SHOP</a></li>
      <li><a href="#">WHY ALLTEL</a></li>
      <li><a href="#">PLANS</a></li>
      <li><a href="#">APPS & MORE</a></li>
      <li><a href="#">CAREERS</a></li>
      <li><a href="#">EMPLOYEES</a></li>
    </ul>
  </div><!--end of navmenu-->
</div><!--end of navbar--> 
```

我知道如果你查看 css 文件，看到 navmenu 和 navmenu2，可能会有点混乱，但只关注 navmenu，因为第二个是我没有实现的不同样式。

我尝试删除宽度元素而错误没有变化。
我试过只将上面的代码复制到一个新的 html 文档中。同样的错误。

我完全不知所措。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:19:10.170

清除填充。这是一个帖子，所以这个问题有一个列出的、公认的解决方案。

# asp.net-web-api - 部署到 Azure 的 WebApi - 控制器不工作（500 错误）

> ID：15793252
> 
> 赞同：2
> 
> 时间：2013-04-03T16:44:52.313
> 
> 标签：asp.net-web-api, dynamics-crm-2011

我有一个 WebApi 项目，它包装了 Dynamics CRM Online Web 服务并提供了一个 REST api。我有一个简单的控制器，可以从 CRM 获取一些联系人并将它们返回给调用者。

当我在本地模拟器中运行它时，一切正常。但是，当我将项目部署到 Azure 时，我可以访问主页，但控制器都返回 http 500 错误。为什么会发生这种情况？以及如何进行故障排除以获取更多详细信息？

更新

问题在于在 Azure 中运行 Web 角色的 Server 2012 实例上缺少 Microsoft.IdentityModel.dll。我通过在 RDP 中打开 Web 角色实例、安装 Fiddler 并从 Fiddler 向本地 IIS 服务器发出请求来发现这一点。它以详细的错误响应。

现在我的问题是弄清楚如何在 Windows Azure Web 角色上启用 IdentityModel。您应该能够通过 Server 2012 添加角色和功能向导添加它，但它完全锁定在 Web 角色上。您不能选中任何尚未选中的框。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:56:49.023

问题是当 Web 角色本身不存在时，它可以访问 Windows Identity Foundation。Marc Schweigert 在此处提供了执行此操作的明确步骤：

[http://blogs.msdn.com/b/devkeydet/archive/2013/01/27/crm-online-amp-windows-azure-configuring-single-sign-on-sso.aspx](http://blogs.msdn.com/b/devkeydet/archive/2013/01/27/crm-online-amp-windows-azure-configuring-single-sign-on-sso.aspx)

转到视频的 23:00 标记，您将看到 4 个必要步骤：

1.  参考 Microsoft.IdentityModel.dll（需要安装 WIF SDK）设置复制本地 = true
2.  在您的 Web 角色项目中创建 RegisterWIFGAC.cmd
3.  在调用 RegisterWIFGAC.cmd 的 ServiceDefinition.csdef 中创建启动任务
4.  将 GacUtil 添加到项目（在启动任务中使用）以在每次 Web 角色启动时将 Microsoft.IdentityModel.dll 放入 GAC）。

# javascript - 清除 Knockout 中的所有可观察绑定

> ID：15793253
> 
> 赞同：1
> 
> 时间：2013-04-03T16:44:53.160
> 
> 标签：javascript, knockout.js

我现在正在开发一个控制面板应用程序，每个工具都加载自己的 Javascript 文件，其中大部分包含一些 Knockout 绑定。Knockout 本身被加载到文档头部，但是工具被异步加载到#body div 中，所以我担心元素将继续被绑定，即使在加载了不同的工具之后也是如此。如果同一个元素被绑定多次，我认为这会导致内存泄漏和一些故障。在我加载新工具之前，是否可以一次清除所有 Knockout 绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:21:32.267

我会推荐的一般模式是这样的：

```
//obviously doesn't have to be an object literal
var viewModel = {
  currentTool: ko.observable()
};

ko.applyBindings(viewModel); 
```

然后，像这样绑定你的页面：

```
<div data-bind="with: currentTool">
     ...content here
</div> 
```

现在，当页面最初被绑定时，该区域不会被渲染为`currentTool`未定义的，但 KO 将复制子项以用作“模板”。

当您填充`currentTool`observable 时，它​​将呈现元素的副本并绑定内容。

当您更改 时`currentTool`，KO 将清理现有的绑定和元素，并渲染/绑定元素的新副本。

因此，您只需调用一次并根据您要显示的内容`ko.applyBindings`继续更新。`currentTool`

# ios - UITextView 更改 URL

> ID：15793255
> 
> 赞同：0
> 
> 时间：2013-04-03T16:44:55.487
> 
> 标签：ios, uitextview

我有一个 UITextView 有一个文字说 www.foo.com

当用户单击它时，我想访问 www.foo.com/bar/cow/index.html 而不是 UITextView 的 text 属性中显示的内容

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:59:52.070

让你的班级遵守`UITextViewDelegate`协议。然后`- (void)textViewDidBeginEditing:(UITextView *)textView`以类似的方式实现：

```
 - (void)textViewDidBeginEditing:(UITextView *)textView{

    NSString *url = [NSString stringWithFormat:@"%@<additionalTextHere>", textView.text]; 
    //do whetever with url

} 
```

# sql-server - CHAR(10) 有时有效

> ID：15793256
> 
> 赞同：-3
> 
> 时间：2013-04-03T16:44:57.857
> 
> 标签：sql-server, tsql

在 SQL 中

例如，我想打印

```
Ali 
is going to Alex 
```

所以我说

声明 @x varchar(max) set @x = 'Ali' + CHAR(10) + 'is going to Alex'

输出出现在一行而不是两行

在某些服务器中，即使使用 CHAR(13)，它也能很好地工作

任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:03:41.400

如果你想要一个正确的 CR+LF 对，你应该使用：

```
declare @x varchar(max); 
set @x = 'Ali' + CHAR(13) + CHAR(10) + 'is going to Alex' 
```

现在，无论您在 ASP 页面中的何处查看，它是如何被翻译的，我不知道。如果您希望`\r\n`etc. 出现在字符串中，那么也许您应该考虑使用这些值而不是`CHAR(10)`.

# java - 连接后android套接字卡住了

> ID：15793259
> 
> 赞同：0
> 
> 时间：2013-04-03T16:45:01.113
> 
> 标签：java, android, sockets, ip, port

我正在尝试制作一个应用程序来扫描特定开放端口（5050）范围内的所有 ip，如果它是开放的，则在 LOG 上写一些消息。

继承人的代码：

```
public void run(){
        for(int i=0;i<256;i++)
        {
            Log.d("NetworkScanner","attemping to contact 192.168.1."+i);
            try {
                Socket socket=new Socket(searchIP+i,5050);
                possibleClients.add(searchIP);
                socket.close();

                Log.d("NetworkScanner"," 192.168.1."+i+" YEAAAHHH");

            } catch (UnknownHostException e) {

                Log.d("NetworkScanner"," 192.168.1."+i+" unavailable");
            } catch (IOException e) {
                e.printStackTrace();
            }

        }

    } 
```

编辑：这是一个新问题：即使在没有打开端口的情况下在线找到主机，扫描过程（for循环）也会在移动到下一个之前卡住很长时间。扫描每台主机也需要相当长的时间！

最终解决方案是使用默认构造函数创建一个 Socket 对象，然后为主机创建 InetAddr 对象，然后使用套接字 api 的 Connect(InetAddr,timeout) 函数，超时以毫秒（约 300 毫秒）为单位，仅扫描每个 ip 300 毫秒或更短（小于 200 毫秒可能会出错）和多线程并行扫描使得扫描范围内所有 IP 的速度最快 5 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:51:00.580

`Exception`抛出no 时，您将跳出循环。

你需要删除`break;`

* * *

要解决您的新问题：

当然，它很慢。你期待什么？您正在尝试与子网中的每个 IP 建立连接，这需要时间。您似乎只是在尝试找出网络上可用的设备，因此您可以通过查看[此](https://stackoverflow.com/questions/3345857/how-to-get-list-of-ip-connected-in-lan-using-java)答案来稍微减少时间。他正在使用接受超时值的内置`isReachable`方法。这仍然需要一些时间，但不会花费太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:50:51.843

删除“break;”...它会停止迭代。

# vb.net - 将空字符串转换为 InvalidCastException 时，System.Exception“不是 T 的有效值”吗？

> ID：15793260
> 
> 赞同：0
> 
> 时间：2013-04-03T16:45:04.037
> 
> 标签：vb.net, exception-handling, casting, .net, rethrow

我遇到过几次这种情况，对我来说，.NET 操作应该抛出 System.Exception 而不是更具体的东西似乎是非常错误的。是否有理由不将此特定实例重新抛出为 InvalidCastException？将这种情况与 InvalidCastException 处理程序混为一谈不是更合适吗？

对于上下文，方法是这样的：

```
<System.Runtime.CompilerServices.Extension()> _
Public Function Parse(Of T)(ByVal str As String) As T
    Dim tc As TypeConverter = TypeDescriptor.GetConverter(GetType(T))
    If tc IsNot Nothing Then
        Dim prs As T = tc.ConvertFromString(str)

        Return prs
    Else
        Throw New InvalidCastException("Cannot convert from " & GetType(T).Name & " to String.")
    End If
End Function 
```

我正在考虑`Dim prs[...]Return prs`使用上面的 System.Exception 捕获。

当字符串只是“”时，罪魁祸首是 System.Exception “不是有效值”异常

“应该”是什么例外？或者 System.Exception 对于这种情况真的是一个很好的例外吗？

编辑：进一步思考， System.Exception 仅仅是方法被调用的结果吗？ [`Int32.Parse`方法（字符串）](http://msdn.microsoft.com/en-us/library/b3h1hf19.aspx)显示`FormatException`为该函数抛出的异常——这将是考虑这种情况的最佳异常吗？

# c++ - std::tr1::array 编译错误

> ID：15793261
> 
> 赞同：2
> 
> 时间：2013-04-03T16:45:04.957
> 
> 标签：c++, arrays, tr1

```
C++ requires a type specifier for all declarations
  ...char, 16>>, MAXPreBorder> _preCloselist) 
```

我的代码是：

```
std::tr1::unordered_set<std::tr1::array<unsigned char, 16> >
  dfs(Graphnode _root,
      std::tr1::array<unsigned char, 16> goal,
      unsigned char _totalDepth,
      queue<Graphnode> _preload1,
      queue<Graphnode> _preload2,
      std::tr1::array<
        std::tr1::unordered_set<std::tr1::array<unsigned char, 16>>, 
        MAXPreBorder> _preCloselist
     ) 
```

所以问题是这样的：

```
std::tr1::array<
  std::tr1::unordered_set<std::tr1::array<unsigned char, 16>>, 
  MAXPreBorder> _preCloselist 
```

知道这是错的吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:48:57.100

可能是你的编译器不喜欢`>>`in

```
std::tr1::unordered_set<std::tr1::array<unsigned char, 16>> 
```

这只保证在 C++11 中有效。尝试

```
std::tr1::unordered_set<std::tr1::array<unsigned char, 16> > 
```

# c# - 在 C# 中调用 SQL 连接方法

> ID：15793266
> 
> 赞同：1
> 
> 时间：2013-04-03T16:45:16.347
> 
> 标签：c#, sql-server, class, methods

我将此方法调用到我的登录表单。我不知道这有什么问题。我创建了一个名为 MyConnection 的类，该类包含我的 SQL ConnectionString。我想要的是我可以调用这个函数。名为 Myfunction 的 Class1 方法将被调用到我的登录表单，因此调用连接字符串会更快。

```
public static class MyConnection
{
    public static SqlConnection getConnection()
    {                
        string conn = "Data Source=EDGAR-PC\\SQLEXPRESS;Initial Catalog=Project1;Integrated Security=True";
        SqlConnection myConn = new SqlConnection(conn);
        return myConn;    
    }    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:59:16.450

您不能实例化静态类。你可以这样称呼它：

```
using (var connection = MyConnection.getConnection())
{
    connection.Open();
    //do whatever you need
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T05:11:38.780

由于无法实例化静态类，因此您必须像这样调用：

```
private static void OpenSqlConnection(string connectionString)
    {
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
        }
    } 
```

# java - 来自硬盘中保存页面的 XMLHttpRequest

> ID：15793270
> 
> 赞同：0
> 
> 时间：2013-04-03T16:45:23.193
> 
> 标签：java, ajax, flash, xmlhttprequest, httprequest

我在硬盘上保存了一个页面，然后我打开它，想从保存的 html 文件连接到 Internet 上的服务器网站。当尝试使用`XMLHttpRequest`手动加载到浏览器中的文件执行 HTTP 请求时，它基本上无法执行。你能告诉我我该怎么做吗？或者有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:46:51.947

除非是跨域 xmlHttpRequest，否则会因为同源策略而失败。

# c++ - C++11 函数返回时会发生什么

> ID：15793274
> 
> 赞同：4
> 
> 时间：2013-04-03T16:45:32.983
> 
> 标签：c++, c++11

我想知道当我有这样的功能时会发生什么：

```
typedef std::unordered_map<std::string,std::string> stringmap;

stringmap merge (stringmap a,stringmap b) 
{
  stringmap temp(a); temp.insert(b.begin(),b.end()); return temp;
} 
```

函数返回时会发生什么？

'temp' 是否在被销毁（超出范围）之前复制到临时 r 值，并且 C++11 可能经过 NRVO 优化（因此，'temp' 的副本直接写入返回目标插槽）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T16:52:44.370

什么都不应该被复制。有两种可能：

*   `temp`移动到调用者范围内的一个对象；或者
*   移动被省略，并`temp`成为调用者范围内对象的别名。这被称为“返回值优化”。

在 2011 年之前（特别是没有移动语义），第一种情况需要复制而不是移动。第二种情况在 C++98 和 11 中是允许的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T16:50:26.990

NRVO 意味着它`temp`本身是在返回值位置构造的。如果没有 RVO，是的，`temp`它会在被销毁之前从堆栈上的位置复制/移动到返回值位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T16:49:50.020

这通常会在没有任何特殊规则的情况下导致从`temp`函数的返回值复制。但是，该标准中有两条旨在改进这一点的规则。首先是可以省略副本（12.8/31）：

> 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cvunqualified 类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，复制/move 操作可以通过将自动对象直接构造到函数的返回值中来省略

这通常称为命名返回值优化 (NRVO)，是[返回值优化 (RVO)](http://en.wikipedia.org/wiki/Return_value_optimization)的一种特殊情况。

第二个是，由于这种情况符合上述复制省略的标准，它会首先被认为是一个移动（12.8/32）：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数，并且要复制的对象由左值指定之外，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

因此编译器将尝试以下步骤：

*   该类是否有移动构造函数？
    *   如果是这样，要么移动它，要么忽略移动。
    *   如果没有，该类是否具有复制构造函数？
        *   如果是这样，请移动它或删除副本。
        *   如果没有，我们不能复制或移动这个对象。

请注意，该类必须具有移动或复制构造函数才能使其工作，即使移动或复制被省略。

# iphone - 如何为 UITableViewCell 内的文本字段设置新值？

> ID：15793277
> 
> 赞同：0
> 
> 时间：2013-04-03T16:45:36.733
> 
> 标签：iphone, ios, uitableview

当我调用 [Self.table reloadData] 时，此代码是否会触发

```
if (cell == nil){...} 
```

我想知道，因为我在单元格中添加了一个 UITextField：

```
//cellForRowAtIndexPath
static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        recepientTextField = [[UITextField alloc] initWithFrame:CGRectMake(cell.contentView.frame.origin.x+40, 10, 469, 20)];
        [cell addSubview:recepientTextField];
    }
    recepientTextField.text = recipient;
    return cell; 
```

然后我从互联网上下载了一些东西，然后我想`recepientTextField.text`在 TableView 中显示这些信息。所以我打电话给`recipient`变量设置一个新值，然后`[self.tableView realoadData]`它崩溃了。我认为这与文本字段分配有关。我怎样才能解决这个问题？之后如何更改文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:57:25.777

重新加载时，`cell != nil`案例来了，那里`recipientTextField`有空引用，因此崩溃

试试这个

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    recepientTextField = [[UITextField alloc] initWithFrame:CGRectMake(cell.contentView.frame.origin.x+40, 10, 469, 20)];
    [recepientTextField setTag:333];
    [cell addSubview:recepientTextField];
}

UITextField *TF=(UITextField *)[cell viewWithTag:333];
TF.text = recipient;
return cell; 
```

# oop - 我应该为每个数据库表设置一个单独的类吗？

> ID：15793282
> 
> 赞同：0
> 
> 时间：2013-04-03T16:46:00.647
> 
> 标签：oop, database-design, orm

我认为这是一种很好的做法，因为它有助于清楚地表示类之间的关系。但是，根据该网站，它不是：

[http://www.tonymarston.net/php-mysql/good-bad-oop.html#a5](http://www.tonymarston.net/php-mysql/good-bad-oop.html#a5)

那么，为每个数据库表设置一个类是否是良好的 OO 实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:44:43.077

简要阅读引言中的文章，这些观点被认为是对作者写的另一篇文章的“抱怨”。我相信作者实际上是在说每个表一个类是一种好方法，并解释了原因，并为它辩护，反对诸如“此代码导致数据库和类之间存在有问题的依赖关系”之类的言论。

每个班级都有一张桌子当然是一个很好的起点，但是就像任何模式一样，它不一定是所有情况下都需要的东西。一个示例是联结表，其中可能只有一个类可以处理许多不同联结表的交互。同样，您可能拥有一对一关系的表，更适合作为单个类的程序。

# mysql - Symfony2 应用程序：仅主机数据库

> ID：15793288
> 
> 赞同：0
> 
> 时间：2013-04-03T16:46:16.857
> 
> 标签：mysql, symfony, cloud

所以我想用 Symfony2 创建这个应用程序。我不想在线托管它，但我想在线处理数据库（Mysql 或类似的云）。那可能吗 ？如果是，我该如何配置 parameters.ini 文件？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:51:29.330

您只需在`parameter.yml`文件中提供正确的参数即可。

例如：

```
# app/config/parameters.yml
parameters:
    database_driver:    pdo_mysql
    database_host:      cloud.service.com
    database_name:      your_personnal_db
    database_user:      your_user
    database_password:  your_password 
```

您还需要确保您的服务器可以访问数据库。

[http://symfony.com/doc/current/book/doctrine.html#configuring-the-database](http://symfony.com/doc/current/book/doctrine.html#configuring-the-database)

# php - mySQL PHP 更新 - 101

> ID：15793299
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:46:51.627
> 
> 标签：php, mysql, sql, sql-update

喜欢这个网站，我一直在学习 mysql 和 php 来帮助我设计和 iPhone 消息客户端（用于娱乐目的，而不是发布到应用商店）

我遇到了一个问题，试图更新表中的特定项目，基本上我试图让用户阅读消息后将消息标记为已读，但是一直收到错误

错误信息：

> 无法更新数据：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'read='MAYBE' WHERE id='19'' 附近使用正确的语法

这是我从中发送 GET 的 URL 示例。这应该找到 row/id #19 并将 READ 标记为 YES，因此它已被读取，之前它被设置为 NO。

```
 http://myawesomesite.com/markasread.php?idnumber=19&readmessage=MAYBE 
```

这是我的代码：

```
<?php
$useridnumber = $_GET['idnumber'];
$didread = $_GET['readmessage'];

$conn = mysql_connect("sqlurl.com","sqllogin","sqlpassword");
if(! $conn )
{
  die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydatabase');
$sql = ("UPDATE messages SET read='$didread' WHERE id='$useridnumber'");

$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not update data: ' . mysql_error());
}
echo "Updated data successfully\n";
mysql_close($conn);
?> 
```

任何帮助或澄清都会令人惊讶，我知道我的登录信息在相同的 php 和 sql 注入上，但我认为由于这个应用程序只供两个人进行私人聊天，所以我现在不需要真正解决任何安全问题.... :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:54:51.570

`read`是 mysql 中的保留字 - 文档：[http ://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

您将需要使用反引号来转义它 - `。另外，删除 the`()`周围的括号，`$sql`因为它们不是必需的。

```
$sql = "UPDATE `messages` SET `read`='$didread' WHERE `id`='$useridnumber'"; 
```

# extjs - Sencha Touch Controller 推视图

> ID：15793302
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:00.990
> 
> 标签：extjs, view, controller, touch, pushviewcontroller

我试图弄清楚为什么当我将视图推送到 Ext.Navigation.View 控件时，我推送的视图会呈现，但我推送的数据却没有。该视图使用一些 json 数据（姓名和姓氏）呈现一个非常简单的 DataView 控件。

如果我通过“Ext.Create”显式创建视图（请参阅控制器中注释掉的行），它将起作用，但我确信我已经完成了此操作，您可以在其中推送视图的“xtype”和任何相关属性/数据视图。我对吗？

顺便说一句，我已经测试了从表单提交回调返回的 json，一切都很好。似乎视图不想呈现我发送的数据作为“推送”的一部分。这是我的代码。我错过了什么吗？：

看法：

```
Ext.define('MyCo.Booking.view.PatientClinicSearchResults', {
extend : 'Ext.DataView',
xtype : 'DataViewPatientSearchResults',

itemTpl : '{Name}',
store : {
        fields : ['Name'],
        autoLoad : true
    } 
```

})

控制器 ：

```
Ext.define('MyCo.Booking.controller.Main', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        navViewClinics : 'NavViewClinics',
        formPanelClinicPatientSearch : 'FormPanelClinicPatientSearch'
    },
    control: {
        'NavViewClinics list' : { 
            itemtap : 'ClinicUserSearch'
        },

        'FormPanelClinicPatientSearch button' : {
            tap : 'ClinicPatientSearchResults'
        }
    }
},

ClinicUserSearch : function(list, index, element, record) {
    this.getNavViewClinics().push({ xtype : 'FormPanelClinicPatientSearch' });
},

ClinicPatientSearchResults : function(button, e) {
    var form = this.getFormPanelClinicPatientSearch();
    var navClinics = this.getNavViewClinics();

    form.submit({
        success : function(form, result) {

        // var view = Ext.create('MyCo.Booking.view.PatientClinicSearchResults', {
        //     title : 'Search Results',
        //     fullscreen: true,
        //     store: {
        //         fields: ['Name'],
        //         data : result.items
        //     },

        //     itemTpl: '<div>{Name}</div>'
        // });

        // navClinics.push(view);

        navClinics.push({ xtype : "DataViewPatientSearchResults", 
          title : 'Test',
           store : { 
                    data : result.items 
            }
        });

        }
    });        
} 
```

});

从表单提交回调收到的 JSON：

```
{
"success" : true,
"items" :   [
                {
                "Name": "Jon",
                "Surname": "Doe"
                },
                {
                "Name": "Karl",
                "Surname": "Doe"
                }
            ]
} 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:41:20.080

问题解决了。我从视图中删除了商店声明，它起作用了。只需要通过 itemTpl 属性引用数据。

# isapi-rewrite - ISAPI 用查询字符串中的关键字重写块请求

> ID：15793303
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:03.533
> 
> 标签：isapi-rewrite, request.querystring

如何使用 ISAPI Rewrite 在查询字符串中阻止带有某些关键字的请求。

即洛丽塔，模特，女孩等......

Query_String 示例：

pid=12263&pid=12263&sourcingName=Qxcfljaw&sourcingEmail=thebest%40hotmail.com&sourcingPhone=76513817313&sourcingQty=87&sourcingComments=What's+the+last+date+I+can+post+this+to+to+arrive+in+time+for+Christmas%3F +http%3A%2F%2Flsmagazinexl.kazeo.com+lolita+model+dads+girl++Wonder+what+was+wrong+with+the+original+sounds+so+they+had+to+replace+them+有+这些+显然+和+荒谬+假+一个。%0A+

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:21:58.033

能够做到这一点。

重写条件 %{QUERY_STRING} 。*(?:nude|lolita|porn|viagra|cialis|naked|preteen)。*[NC] 重写规则 .* - [F]

# javascript - 为什么这个动画回调不等到动画完成？

> ID：15793304
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:06.380
> 
> 标签：javascript, jquery, html, css

两个动画同时被调用（有时多次）....

```
<div id="home-bt" class="button"></div>
<div id="about-bt" class="button"></div>
<div id="beauty-bt" class="button"></div>
<div id="pamper-bt" class="button"></div>
<div id="gallery-bt" class="button"></div>
<div id="news-bt" class="button"></div>
<div id="contact-bt" class="button"></div>
</div>

</div>
<div class="page-container" id="home">
home

</div>
<div class="page-container" id="about">
about

</div> etc... 
```

```
$(document).ready(function() {
  $(".page-container").hide();

 $("#home-bt").click(function() {
$(".page-container").hide(2000, function(){
    $("#home").show("slow");
  });  }); etc..... 
```

我也试过这个，结果相同......

```
$(document).ready(function() {
  $(".page-container").hide();

 $("#home-bt").click(function() {
$("#about,#beauty,#pamper,#gallery,#contact,#news").hide(2000, function(){
    $("#home").show("slow");
  });  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:57:04.547

因为您最初`.page-container`通过添加隐藏了`$(".page-container").hide();`

如果您在选择器上单击一次然后再次单击，则它会等待指定的时间显示它。

[在这里提琴](http://jsfiddle.net/RCA9k/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:49:45.230

如果你实现这样的东西，它会起作用：

```
 var waiter = setInterval(function () {
                            if (!$('#something').is(":animated")) {
                                clearInterval(waiter);
                                $('#animateafterwait').show("fade", {}, 1000);
                            }
                        }, 300); 
```

# java - 如何在创建后使用 @Component 注释的 bean 上设置属性？

> ID：15793307
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:10.853
> 
> 标签：java, spring, spring-3

我有一个带注释的 bean，`@Component`它`<context:component-scan/>`使用`<context:property-placeholder/>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:21:16.260

用 注释字段`@Value("propertyName")`。

请参阅相关问题：[@Controller 类中的 Spring @Value 注释未评估属性文件中的值](https://stackoverflow.com/questions/11890544/spring-value-annotation-in-controller-class-not-evaluating-to-value-inside-pro)

# python - 使用 maven 从依赖项向包中添加类

> ID：15793309
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:29.700
> 
> 标签：python, python-3.x, ycsb

我正在尝试在 Windows 上运行[YCSB](https://github.com/brianfrankcooper/YCSB)。bin 文件夹中有一个 python 脚本可以运行它。

[这](https://github.com/brianfrankcooper/YCSB/blob/master/bin/ycsb)是文件的内容。当我在 Windows 上的 cygwin 中运行它时，我得到：

```
$ ./bin/ycsb load basic -P workloads/workloada
  File "./bin/ycsb", line 51
  print "Usage: %s command database [options]" % sys.argv[0]
                                           ^
SyntaxError: invalid syntax 
```

我到处寻找，看看有什么问题，但找不到任何东西。我试过单引号，转义引号和 "".format()

Python 版本 3.3.0

# aptana - 如何在 Aptana 中禁用字符串修饰（或者无论如何调用它）？

> ID：15793312
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:34.277
> 
> 标签：aptana

当我在 php 文件中标记字符串然后键入 a `'`、或时`"`，标记的文本将不会被键入的字符替换。相反，它可以用, , ... 括起来</p> `(``[``'…'``"…"`

我当然知道这是一个功能。但我想关闭这个功能，因为我不喜欢它。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:26:20.297

`Window > Preferences > Aptana Studio > Editors`- 取消选择“用匹配的字符换行选定的文本”。

这曾经也让我发疯，但它已经在我身上成长了。

# excel - Excel从持续时间中减去持续时间

> ID：15793319
> 
> 赞同：0
> 
> 时间：2013-04-03T16:47:52.553
> 
> 标签：excel, time

不确定我是否可以在这里发布这个问题，但要抓住机会。我试着找出这些的在线资源。每个人都建议拥有像这样的列

*   及时
*   午餐时间
*   午餐回来时间
*   超时

我不想那样做，我想分 3 列来做。

我正在创建一个 Excel 时间表模板

*   及时
    *   单元格 A1：**上午 9:05**（格式化时间：下午 1:30）
*   时差
    *   单元格 B1： **下午 6:15**（格式化时间：下午 1:30）
*   休息时间
    *   单元格 C1： 0: **30 h:mm** （格式自定义 h:mm *h:mm*）

要获得休息后的总持续时间，我需要计算**(B1-A1) - C1**

**B1-A1**工作完美，但如果我尝试排除休息时间，那么我会遇到问题。

我正在使用 Excel 2013

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:52:13.797

确保您的结果单元格是*h:mm*格式。

此外，由于您正在处理时间表，我建议您对所有“总计”单元格使用*[h]:mm*格式，这些单元格的小时数将超过 24 小时（否则它将从 0 开始；40 小时看起来像只有 16 个）。

到目前为止，您共享的任何内容都不应该是问题：

![在此处输入图像描述](https://i.stack.imgur.com/0Q1kV.png)

A 列和 B 列采用*h:mm AM/PM*格式
C、D 和 E 列采用*[h]:mm*格式

也许您可以确保工作簿是自动计算的，否则看起来这些值不会相加。

# java - 导入 JAR 后的 Android java.lang.NoClassDefFoundError

> ID：15793324
> 
> 赞同：2
> 
> 时间：2013-04-03T16:48:16.270
> 
> 标签：java, android, jar, runtime-error

我有问题...

我制作了一个 Jar（称为“GeoFence.jar”），我必须在 Android 项目中使用它。所以，我所做的是：

1.  看看这么多的网站 HowTo 的
2.  在 android 项目中创建“libs”文件夹。
3.  添加我的 JAR（手动）
4.  然后我去了 Java Build Path 并检查了我的 JAR 是否包含在 Android Dependences 中。
5.  最后我做了必要的导入来使用我需要的 JAR 类。

完成所有这些之后，我运行了我的应用程序，它抛出了这个错误：

![在此处输入图像描述](https://i.stack.imgur.com/XVilq.png)

而且我不明白发生了什么，因为，我修复了项目属性并清理了它。它仍然无法正常工作。

这是我的结构和构建路径。

![在此处输入图像描述](https://i.stack.imgur.com/qUtUy.png)

![在此处输入图像描述](https://i.stack.imgur.com/VivuF.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:02:06.340

如果您转到 Android Dependencies 文件夹，您应该能够展开 GeoFence.jar 文件。`com.elias.polygon.City`这样，如果您继续扩展子文件夹，您应该能够找到该类。

如果您**看**不到它，您可能在导出 jar 文件时出错。

*   要解决导出[问题，请参阅此问题](https://stackoverflow.com/questions/423938/java-export-to-an-jar-file-in-eclipse)

如果您可以**看到**该类，则您的构建路径/项目属性中有错误

*   要解决项目设置，[请参阅此问题](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:16:32.557

在两个 stpe 以下添加 jar 使用：但对你来说只做第二个。

```
1\. Your Project -> right click -> Properties -> Java Build Path -> Libraries -> Add Jar -> yourjar.jar
2\. Your Project -> right click -> Properties -> Java Build Path -> Order & Export --> Select All --> OK 
```

之后只需清理您的项目并运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T16:38:28.610

我遇到的问题是，我想导入的 jar 使用了一些在 android 中不是“允许”的包，所以我必须以不同的方式来做。

之后，它发生了同样的情况，但问题是 Jar 是在 v1.7 中构建的。当我在 v1.6 中构建时，android 接受了它。

所以，首先要寻找：

1.  不要使用 android 中不允许的包
2.  查看在哪个版本中构建了解决方案。

# hadoop - 弹性 MapReduce 的后挂钩

> ID：15793326
> 
> 赞同：4
> 
> 时间：2013-04-03T16:48:20.763
> 
> 标签：hadoop, amazon-web-services, hadoop-streaming, emr

我想知道是否有 EMR（Elastic MapReduce）的后期处理示例？我想要实现的是在亚马逊的 Hadoop 完成工作后立即向一群人发送电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:09:09.000

您需要配置作业结束通知 URL。

jobEnd.notificationUrl

AWS 将点击此 url，可能带有指示哪个作业已完成的查询变量（作业 ID）。

然后，您可以让服务器上的这个 URL 处理您的电子邮件通知，假设您已经存储了电子邮件和工作 ID 之间的关系。

[https://issues.apache.org/jira/browse/HADOOP-1111](https://issues.apache.org/jira/browse/HADOOP-1111)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T07:48:37.940

一种更简单的方法是使用[Amazon CloudWatch](http://aws.amazon.com/cloudwatch/)（监控系统）和[Amazon Simple Notification Service (SNS)](http://aws.amazon.com/sns/)来监控并通知您和其他人您的 EMR 作业的状态。

例如，您可以为集群设置警报以检查何时空闲。一旦工作完成（或失败），它将设置为 1，然后您可以通过电子邮件（或什至 SMS）获得 SNS 通知。您可以针对 JobsFailed 计数和其他指标设置类似的警报。

有关 EMR 相关指标的完整列表，您可以查看[EMR 文档](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_ViewingMetrics.html#UsingEMR_ViewingMetrics_MetricsReported)

您可以在此处查看有关它的更多信息：http: [//docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_ViewingMetrics.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_ViewingMetrics.html)

# java - 根据焦点设置 jpanel 中的默认按钮。

> ID：15793328
> 
> 赞同：1
> 
> 时间：2013-04-03T16:48:20.943
> 
> 标签：java, swing, jbutton, defaultbutton

我有几个 JPanel，每个 JPanel 都自己实现它们的逻辑、按钮和字段。这些面板都添加到 JFrame 上，但有时会添加到另一个面板上，然后再添加到框架上......

我想要实现的是当它的任何继任者具有焦点时，hte 默认按钮是 panel1 的 ok 按钮。对所有其他人来说都是一样的......

这该怎么做？面板本身没有 JRootPane，我不想用逻辑来打扰 Frame。

欢迎每一个提示;)。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:55:43.990

> 我有几个 JPanel，每个 JPanel 都自己实现它们的逻辑、按钮和字段。这些面板都添加到 JFrame 上，但有时会添加到另一个面板上，然后再添加到框架上......

*   使用[卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

> 我想要实现的是当它的任何继任者具有焦点时，hte 默认按钮是 panel1 的 ok 按钮。对所有其他人来说都是一样的......

*   使用[CardLayout（SO 上的 Q&A）](https://stackoverflow.com/search?q=[java]+[swing]+cardlayout)并添加与每张卡片对应的单独[Swing 动作，](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)[使用 setEnabled(true/false) 进行 Swing 动作，而不是在运行时向 JButton 添加/删除 Swing 动作](https://stackoverflow.com/a/15766289/714968)

*   您可以使用[EventHandler](https://stackoverflow.com/a/9007348/714968)，然后您可以触发从字符串值折叠的操作（例如 CardName + ButtonName + 可访问上下文 + UsersAccess + 等），

> 面板本身没有 JRootPane，我不想用逻辑来打扰 Frame。

*   我认为你是对的，使用`CardLayout`

# jquery - 遍历表行，计算（乘）输入值，在另一个输入中设置结果

> ID：15793329
> 
> 赞同：0
> 
> 时间：2013-04-03T16:48:25.460
> 
> 标签：jquery, each

鉴于此html：

```
<table class="hours-table">
    <tr>
        <th>Hours</th>
        <th>Hourly Rate</th>
        <th>Date Total</th>
    </tr>
    <tr>
        <td class="hours"><input type="text" class="hours" name="hours-01" value="" /></td>
        <td class="rate"><input type="text" class="rate" name="rate-01" value="" /></td>
        <td class="date-total"><input type="text" class="date-total" name="date-total-01" value="" /></td>
    </tr>
</table>

<p><a class="calculate" href="#" title="calculate row">Calculate</a></p> 
```

我正在尝试遍历行，获取每行中的小时数和费率值，将它们相乘并在“日期总计”输入中设置该值（不一定必须是总数的输入，但我会还要对多列进行另一次计算）

为什么一千次尝试获取这些值不起作用，我花了几个小时挠头，例如：

```
$('.calculate').on('click', function() {
    $('.hours-table tr').each(function() {
        var hours = $(this).find('input.hours').val(); // nope
        var hours = $('input.hours', this).val(); // nope
        var hours = $('input.hours', $this).val(); // nope
        //var dateTotal = (hours * rate);
        //$(this).find('input.date-total').val(dateTotal);
        return false;
    }) //END .each
}) // END click 
```

请问，我在这个循环中做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:59:00.163

`return false;`在循环中使用`$.each`将退出它。我认为您的意思是`return false;`要为`click`处理程序 - 防止默认行为`<a>`并停止事件传播。因此，如果您将其`return false;`移出一层，它似乎可以工作：

```
$(document).ready(function () {
    $('.calculate').on('click', function() {
        $('.hours-table tr').each(function() {
            var hours = $(this).find('input.hours').val();
            var rate = $(this).find('input.rate').val();
            var dateTotal = (hours * rate);
            $(this).find('input.date-total').val(dateTotal);
        }); //END .each
        return false;
    }); // END click 
}); 
```

**演示：http:** [//jsfiddle.net/Lr5pq/1/](http://jsfiddle.net/Lr5pq/1/)

**更新：**

获取`undefined`and的问题`NaN`是因为这是选择所有`<tr>`元素 - 包括您的标题行：

```
<tr>
    <th>Hours</th>
    <th>Hourly Rate</th>
    <th>Date Total</th>
</tr> 
```

由于您的循环在第一行之后立即退出（第一行是标题行），因此任何`console.log`/debugging 都是针对标题行的。因此，当然不会找到任何元素。要解决这个问题，您应该使用`<thead>`和`<tbody>`分开目的。所以你的表应该是这样的：

```
<table class="hours-table">
    <thead>
        <tr>
            <th>Hours</th>
            <th>Hourly Rate</th>
            <th>Date Total</th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td class="hours"><input type="text" class="hours" name="hours-01" value="" /></td>
            <td class="rate"><input type="text" class="rate" name="rate-01" value="" /></td>
            <td class="date-total"><input type="text" class="date-total" name="date-total-01" value="" /></td>
        </tr>
    </tbody>
</table> 
```

你的`tr`选择器应该是：

```
$('.hours-table').find('tbody').find('tr').each(function() { 
```

（我喜欢使用`.find()`长选择器而不是长选择器，但重点是您将`tbody`部分添加到仅针对`<tbody>`行）

**演示：http:** [//jsfiddle.net/Lr5pq/4/](http://jsfiddle.net/Lr5pq/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T17:37:33.390

你可以使用以下。

```
 $("#hours-table tr").each(function () {
    var hours = $(this).find(".hours input").val();
    var rate = $(this).find(".rate input").val();
    var total= (hours * rate);
   $(this).find(".total input").val(total);  // Updates text box 
```

});

# winapi - 在 WinAPI C++ 中绘制形状

> ID：15793330
> 
> 赞同：4
> 
> 时间：2013-04-03T16:48:26.323
> 
> 标签：winapi, drawing, border

我正在研究通过 WinAPI C++ 绘制形状我试图用 WM_PAINT 上的一些代码绘制 2 个椭圆：

```
PAINTSTRUCT ps;
HDC hdc = BeginPaint(hWnd, &ps);
HPEN hPen = CreatePen(PS_DASHDOTDOT, 2, NULL);SelectObject(hdc, hPen);
Ellipse(hdc, 100, 200, 400, 400);
Ellipse(hdc, 300, 300, 500, 510);   

DeleteObject(hPen);
EndPaint(hWnd, &ps); 
```

但输出是：

![在此处输入图像描述](https://i.stack.imgur.com/O15mL.png) 我期望的结果是两个形状都不在另一个前面。边框是点划线。谁能告诉我我的错误？感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:48:19.040

`Ellipse()`（像所有 GDI 形状函数一样）使用当前画笔填充形状，这就是您的输出看起来像这样的原因。有关详细信息，请参阅[设置笔和画笔颜色](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145096%28v=vs.85%29.aspx)。

如果您只想要没有填充的椭圆，请首先选择一个空笔刷：

`SelectObject( hdc, GetStockObject( NULL_BRUSH ) );`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:50:36.253

一个出现在另一个之上，因为您不仅要绘制轮廓，还要填充它。要停止填充，您可以选择“空心画笔”，有时也称为“空画笔”。

```
HBRUSH hbrOld = SelectObject(hdc, GetStockObject(HOLLOW_BRUSH));
// draw your ellipses here 
```

您只能创建[宽度为 1 或 0 的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183509%28v=vs.85%29.aspx)虚线或虚线笔。您使用了 2，因此命令失败。

此外，您应该在删除之前将笔从 DC 中重新选择出来。

# c# - 如何在 C# 和 SQL 中格式化 Datetime 和 datetime2 以满足我的需要

> ID：15793332
> 
> 赞同：1
> 
> 时间：2013-04-03T16:48:30.810
> 
> 标签：c#, asp.net, sql, entity-framework, datetime

我对此很陌生，我正在使用具有`Datetime`type 属性的 MVC 视图模型：

```
namespace FP.WebUI.Models
{
    public class AdminSessionsViewModel
    {
        NewSession _NewSession = new NewSession();
        public NewSession NewSession { get { return _NewSession; } set { _NewSession = value; } }
        public IEnumerable<Sessions> CurrentSessions { get; set; }
    }

    public class NewSession
    {
        [Required]
        public string Title { get; set; }
        public string Description { get; set; }
        [Required]
        public DateTime Date { get; set; }
    }
} 
```

我希望`Date`属性像这种格式：**27/05/2013 06:44AM**和 SQL 数据库中的相同。

我真的不知道如何`Date`在类内部配置`NewSession`以在我的文本框中自动显示为这样，并且当映射回实体框架时将像这样保存在数据库中。

这是我的实体框架流利的 API 配置：

```
namespace FP.Domain.Configurations
{
    public class SessionsConfig : EntityTypeConfiguration<Sessions>
    {
        public SessionsConfig()
        {
            ToTable("Sessions");
            Property(p => p.Name).IsRequired();
            Property(p => p.PhotosCount).IsRequired();
            Property(p => p.CoverPhoto).IsRequired();
            Property(p => p.Date).HasColumnType("datetime2").HasPrecision(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:53:14.263

您需要将`[DisplayFormat]`属性添加到 DateTime 属性。那应该照顾用户界面。看到这个答案：[Converting DateTime format using razor](https://stackoverflow.com/questions/4679352/converting-datetime-format-using-razor)

```
[Required]
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy hh:mm tt}", ApplyFormatInEditMode = true)]
public DateTime Date { get; set; } 
```

您不需要控制日期时间在 SQL Server 中的存储方式 - 它将存储为日期，而不是字符串。您可以使用[`FORMAT()`](http://msdn.microsoft.com/en-us/library/hh213505.aspx)T/SQL 中的函数在存储过程等中格式化该日期。如果您没有 MSSQL 2012，您可以使用`DATEPART()`或`CONVERT()`函数。

# regex - sed 用特殊字符替换字符串

> ID：15793338
> 
> 赞同：0
> 
> 时间：2013-04-03T16:48:47.967
> 
> 标签：regex, linux, string, bash, sed

我正在尝试在 linux 中用文件中的特殊字符替换下面指示的字符串。我尝试在每个特殊字符前使用反斜杠，但出现错误。一定是遗漏了什么。我如何实现以下目标。提前致谢：

```
filter = [ "a/sda[0-9]*$/",  "r/sd.*/" ]   ---> Replace this line with below line

filter = [ "a/sda[0-9]*$/", "a/sdb[0-9]*$/", "r/sd.*/" ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:54:23.413

对于您的示例，这有效

```
sed 's@",@", "a/sdb[0-9]*$/",@' 
```

输出：

```
kent$  echo 'filter = [ "a/sda[0-9]*$/",  "r/sd.*/" ]'|sed 's@",@", "a/sdb[0-9]*$/",@'                                                         
filter = [ "a/sda[0-9]*$/", "a/sdb[0-9]*$/",  "r/sd.*/" ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:05:57.567

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")和列策略：

```
$ awk '{$3=$3 "a/sdb[0-9]*$/\042, "; print}' file.txt
filter = [a/sdb[0-9]*$/",  "a/sda[0-9]*$/", "r/sd.*/" ] 
```

# bash - 如何将在 shell 脚本中输入的所有参数移动到文件夹中？

> ID：15793343
> 
> 赞同：0
> 
> 时间：2013-04-03T16:48:58.887
> 
> 标签：bash, shell, command, arguments

我正在尝试将运行脚本时给出的所有参数移动到一个`RecycleBin`目录中。我设置`RecycleBin`为我的主文件夹中的一个目录，使用`RecycleBin="$HOME/Recycled"`.

然后我想将所有参数文件/目录移动到`RecycleBin`目录中。

这是我到目前为止所得到的：

```
for  i in $* 
do
if [ $* -e ]
then
mv $i /path/to/RecycleBin/$*.`date +"%Y%m%d.%H%M%S"`
else
echo "The file does not exist"
fi
done 
```

在哪里`.date +"%Y%m%d.%H%M%S"`附加`(date command)`每个文件的版本

并且`for i in $*`正在检查命令中的所有参数。

输出看起来像这样 ./script.sh file1 file2 file3 - 3 个文件被移入其中`RecycleBin`

这不起作用，因为我的循环功能不正确。

非常感谢帮助

谢谢皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:53:36.073

```
[ $* -e ] 
```

该测试应该是这样的：

```
[ -e "$i" ] 
```

同样在`mv`您应该使用的命令中，`$i`而不是`$*`. 就我个人而言，我会完全摆脱这种`if`说法。`mv`如果文件不存在，将打印出错误消息，无需自己做。

要处理带有空格的文件名，最好使用`"$@"`代替`$*`，并用引号将变量名括起来，如下所示：

```
for file in "$@"; do 
    mv "$file" "/path/to/RecycleBin/$file.$(date +%Y%m%d.%H%M%S)"
done 
```

# jquery - 我没有从查询中得到结果，而我应该从中得到结果

> ID：15793347
> 
> 赞同：0
> 
> 时间：2013-04-03T16:49:11.690
> 
> 标签：jquery, ruby-on-rails

我正在使用 rails-jquery-autocomplete 填写`cabinet_name`如下表格：

```
<%= autocomplete_field_tag :cabinet_name, '', cabinets_autocomplete_cabinet_name_path %> 
```

连同其他数据，以下是传递给设备控制器的参数：

```
{"utf8"=>"✓",
"authenticity_token"=>"/0yFGrlBy0y+2ksTkQN50Dmfpw7ZWBKsO2zswAigJZI=",
"device"=>{"name"=>"Test dropdown",
"device_model_id"=>"621",
"device_unit_count"=>"1",
 "position"=>"1",
 "row_id"=>"1"},
 "cabinet_name"=>"0055-COMM-ANNEX-C3",
 "commit"=>"Create Device"} 
```

如您所见，哈希中肯定有一个`cabinet_name`正在传递。`device`这是 中的代码`devices_controller`：

```
def create
  if params[:cabinet_name]
    @cabinet = Cabinet.where("name LIKE ? ", params[:cabinet_name])
  else
    @cabinet = Cabinet.find(params[:device][:cabinet_id])
  end
...
 @device.row_id = @cabinet.row_id 
```

这是根据命令行输出运行的查询，请注意：

```
 ←[1m←[35mCabinet Load (2.9ms)←[0m  SELECT `cabinets`.* FROM `cabinets` WHERE (
name LIKE '0055-COMM-ANNEX-C3' ) 
```

这是我运行的手动查询和结果，显示了一个柜记录的结果：

```
mysql> select `cabinets`.* from `cabinets` where name like '0055-COMM-ANNEX-C3'

---------------+
| id   | name               | row_id | data_center_id | cabinet_type_id | creat
d_at          | updated_at          | row_name | cabinet_name | capacity_used |
not_cabinet | grid_location_name | grid_location_id | is_rack | alias_name
   | room_id | mark_review | mark_validated | mark_audit | last_audit_note | ma
k_deleted | purpose | total_power_kpm | total_max_power_kpm | total_heat_btu |
otal_max_heat_btu | total_heat_kpm | total_max_heat_kpm | total_spec_ratings |
ean_efficiency |

------------------+----------------+--------------------+--------------------+-
---------------+
| 1389 | 0055-COMM-ANNEX-C3 |   NULL |              3 |               1 | 2012-
1-05 21:55:23 | 2012-11-21 16:21:34 | C3       | C3           |             2 |
       NULL | C3                 |             2287 |       0 | 0055-COMM-ANNEX
C3 |       4 |        NULL |           NULL |       NULL | NULL            |
     NULL | NULL    |              42 |                  64 |            200 |
              280 |              8 |                 10 |                  0 |
          NULL |

------------------+----------------+--------------------+--------------------+-
---------------+
1 row in set (0.00 sec) 
```

这是浏览器抛出的错误，说明现在选择了内阁：

```
undefined method `row_id' for #<ActiveRecord::Relation:0x5845368> 
```

如果您了解问题，请提供一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:52:10.050

您收到此错误是因为您正在调用`@device.row_id`, where `@device`is `Cabinet.where("name LIKE ? ", params[:cabinet_name])`。如果您想要第一个橱柜名称为 like 的橱柜，请将其`params[:cabinet_name]`更改为：

```
Cabinet.where("name LIKE ? ", params[:cabinet_name]).first 
```

然后，您可以`row_id`按预期调用它。本质上，您调用`row_id`的是`ActiveRecord::Relation`，而不是 的实例`Cabinet`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:53:35.530

```
 @cabinet = Cabinet.where("name LIKE ? ", params[:cabinet_name]) 
```

该行返回一个结果集合，因此当您尝试从集合中获取 id 时，您的代码正在爆炸。

您可以执行以下操作：

```
 @cabinet = Cabinet.where("name LIKE ? ", params[:cabinet_name]).first 
```

抢到第一个结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:57:26.793

`.where`返回一个`Array`not a single `Object`，您期望它返回一个 single ，并且您正在匹配完整的字符串，因此如果是这种情况，则`Object`无需使用，`like`

所以要么

假设橱柜名称是唯一的并且您需要完全匹配，您应该使用以下内容

```
@cabinet = Cabinet.find_by_name(params[:cabinet_name]) 
```

或者

或者，如果您期望获得多个结果而不是获得想要处理的任何结果（如果您想要第一个结果）

```
@cabinet = Cabinet.where("name LIKE ? ", params[:cabinet_name]).first 
```

# python - 如何使用python连接三个excels文件xlsx？

> ID：15793349
> 
> 赞同：10
> 
> 时间：2013-04-03T16:49:17.333
> 
> 标签：python, excel, openpyxl

您好，我想使用 python 连接三个 excels 文件 xlsx。

我曾尝试使用 openpyxl，但我不知道哪个函数可以帮助我将三个工作表附加到一个工作表中。

你有什么想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-03T18:49:32.720

这是一种基于[pandas](http://pandas.pydata.org)的方法。（它`openpyxl`在幕后使用。）

```
import pandas as pd

# filenames
excel_names = ["xlsx1.xlsx", "xlsx2.xlsx", "xlsx3.xlsx"]

# read them in
excels = [pd.ExcelFile(name) for name in excel_names]

# turn them into dataframes
frames = [x.parse(x.sheet_names[0], header=None,index_col=None) for x in excels]

# delete the first row for all frames except the first
# i.e. remove the header row -- assumes it's the first
frames[1:] = [df[1:] for df in frames[1:]]

# concatenate them..
combined = pd.concat(frames)

# write it out
combined.to_excel("c.xlsx", header=False, index=False) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T17:04:01.460

我会使用[xlrd](https://pypi.python.org/pypi/xlrd)和[xlwt](https://pypi.python.org/pypi/xlwt)。假设您实际上只需要附加这些文件（而不是对它们进行任何实际工作），我会做类似的事情：打开一个要写入的文件`xlwt`，然后对于其他三个文件中的每一个，循环数据并将每一行添加到输出文件中。为了让你开始：

```
import xlwt
import xlrd

wkbk = xlwt.Workbook()
outsheet = wkbk.add_sheet('Sheet1')

xlsfiles = [r'C:\foo.xlsx', r'C:\bar.xlsx', r'C:\baz.xlsx']

outrow_idx = 0
for f in xlsfiles:
    # This is all untested; essentially just pseudocode for concept!
    insheet = xlrd.open_workbook(f).sheets()[0]
    for row_idx in xrange(insheet.nrows):
        for col_idx in xrange(insheet.ncols):
            outsheet.write(outrow_idx, col_idx, 
                           insheet.cell_value(row_idx, col_idx))
        outrow_idx += 1
wkbk.save(r'C:\combined.xls') 
```

如果你的文件**都有**标题行，你可能不想重复，所以你可以修改上面的代码看起来更像这样：

```
firstfile = True # Is this the first sheet?
for f in xlsfiles:
    insheet = xlrd.open_workbook(f).sheets()[0]
    for row_idx in xrange(0 if firstfile else 1, insheet.nrows):
        pass # processing; etc
    firstfile = False # We're done with the first sheet. 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-23T23:32:48.480

当我结合 excel 文件（mydata1.xlsx、mydata2.xlsx、mydata3.xlsx）进行数据分析时，我会这样做：

```
import pandas as pd
import numpy as np
import glob

all_data = pd.DataFrame()
for f in glob.glob('myfolder/mydata*.xlsx'):
   df = pd.read_excel(f)
   all_data = all_data.append(df, ignore_index=True) 
```

然后，当我想将其保存为一个文件时：

```
writer = pd.ExcelWriter('mycollected_data.xlsx', engine='xlsxwriter')
all_data.to_excel(writer, sheet_name='Sheet1')
writer.save() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-19T15:11:05.320

`openpyxl`仅具有（没有一堆其他依赖项）的解决方案。

该脚本应该负责将任意数量的 xlsx 文档合并在一起，无论它们有一张还是多张。它将保留格式。

在 openpyxl 中有一个复制工作表的功能，但它只能来自/复制到同一个文件。某处还有一个函数 insert_rows ，但它本身不会插入任何行。因此，恐怕我们一次只能（乏味地）处理一个单元格。

尽管我不喜欢使用`for`循环并且宁愿使用像列表理解这样紧凑而优雅的东西，但我在这里看不到如何做到这一点，因为这是一个副作用展示。

归功于在工作簿之间复制的[这个答案。](https://stackoverflow.com/questions/23332259/copy-cell-style-openpyx)

```
#!/usr/bin/env python3

#USAGE
#mergeXLSX.py <a bunch of .xlsx files> ... output.xlsx
#
#where output.xlsx is the unified file

#This works FROM/TO the xlsx format. Libreoffice might help to convert from xls.
#localc --headless  --convert-to xlsx somefile.xls

import sys
from copy import copy

from openpyxl import load_workbook,Workbook

def createNewWorkbook(manyWb):
    for wb in manyWb:
        for sheetName in wb.sheetnames:
            o = theOne.create_sheet(sheetName)
            safeTitle = o.title
            copySheet(wb[sheetName],theOne[safeTitle])

def copySheet(sourceSheet,newSheet):
    for row in sourceSheet.rows:
        for cell in row:
            newCell = newSheet.cell(row=cell.row, column=cell.col_idx,
                    value= cell.value)
            if cell.has_style:
                newCell.font = copy(cell.font)
                newCell.border = copy(cell.border)
                newCell.fill = copy(cell.fill)
                newCell.number_format = copy(cell.number_format)
                newCell.protection = copy(cell.protection)
                newCell.alignment = copy(cell.alignment)

filesInput = sys.argv[1:]
theOneFile = filesInput.pop(-1)
myfriends = [ load_workbook(f) for f in filesInput ]

#try this if you are bored
#myfriends = [ openpyxl.load_workbook(f) for k in range(200) for f in filesInput ]

theOne = Workbook()
del theOne['Sheet'] #We want our new book to be empty. Thanks.
createNewWorkbook(myfriends)
theOne.save(theOneFile) 
```

使用 openpyxl 2.5.4、python 3.4 测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-07T21:39:19.190

您可以简单地使用 pandas 和 os 库来执行此操作。

```
import pandas as pd
import os
#create an empty dataframe which will have all the combined data
mergedData = pd.DataFrame()
for files in os.listdir():
    #make sure you are only reading excel files
    if files.endswith('.xlsx'):
        data = pd.read_excel(files, index_col=None)
        mergedData = mergedData.append(data)
        #move the files to other folder so that it does not process multiple times
        os.rename(files, 'path to some other folder') 
```

mergeData DF 将包含您可以导出到单独的 excel 或 csv 文件中的所有组合数据。相同的代码也适用于 csv 文件。只需在 IF 条件下替换它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-14T15:33:54.573

只是为了添加到 p_barill 的答案，如果您有需要复制的自定义列宽，您可以将以下内容添加到 copySheet 的底部：

```
 for col in sourceSheet.column_dimensions:
            newSheet.column_dimensions[col] = sourceSheet.column_dimensions[col] 
```

我只会在评论他或她的回答时发布这个，但我的声誉还不够高。

# 3g - 带有诺基亚手机 3G 数据连接的 Android 平板电脑

> ID：15793352
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:49:25.180
> 
> 标签：3g, tablet-pc

这是检查场景可能性的技术问题。诺基亚手机（Lumia、N9、symbain 手机、S40）是否可以与 Android 平板电脑使用 3G 数据连接？

或者任何方式使用手机的 3G 数据连接与平板电脑？

我的手机有无限数据连接。但我用的不多。所以我打算将它与平板电脑一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:26:36.697

是的，只要您有
(1) 来自网络运营商的 APN 以通过他们的网络建立数据连接，以及
(2) 合适的设备，就可以将您的手机用作调制解调器，通过 USB 电缆连接到平板电脑手机的驱动程序。在 Windows 上，智能手机是即插即用的，但我没有任何在 Android 上使用它们的经验。

在平板电脑上，您还需要一些软件来控制调制解调器 - 类似于[此处列出的 Mobile Broadband Connect 3.0 应用程序](http://softwaretopic.informer.com/android-vodafone-mobile-broadband/)

您可以使用[Android Telephony Manager](http://developer.android.com/reference/android/telephony/TelephonyManager.html)自己编写一个简单的连接应用程序。

或者，您可以手动连接，使用 AT 命令和合适的 AT 命令程序（在 Windows 中，它将是超级终端）。 [该线程](http://forums.androidcentral.com/android-applications/21625-hyperterminal-like-app.html)描述了 Android 的可能等效项。[3gpp TS27.007 规范](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)中描述了建立数据连接的标准 AT 命令。 不同的制造商有很多变化，但是使用标准命令应该可以进行简单的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T18:21:36.333

是的，如果：1\. 您的标签已植根 2\. 您的标签支持 USB 主机模式或 otg 模式（您可以在网上检查或下载 USB 主机诊断）（只需单击开始诊断）

过程 Downoad ppp 小部件根据 pc 套件设置配置您的 apn 然后在诺基亚 pc 套件模式下通过 USB 插入您的手机现在等待 10 秒并单击连接您现在完成

（请关闭您的 wifi，因为 ppp 小部件会为您的标签创建虚拟 wifi）任何查询 contsct rld0989@gmail.com（不要少休息，我每天只检查一次我的 gmail）

# watir - 如何从 watir 中的多个相同属性中查找文本？

> ID：15793353
> 
> 赞同：2
> 
> 时间：2013-04-03T16:49:32.567
> 
> 标签：watir, watir-webdriver

我想`Line Lo`从以下值中查找并单击该值。以下`li`有超过 100 条记录具有相同的类名。如何找到`Line Lo`并单击该值。

```
<div id="loc">
  <ul id="tab">
    <li class="criteria">
      <div class="bud">
        <div class="inner">
          <div class="attr">Code Lo</div>
        </div>
      </div>
    </li>
    <li class="criteria">
      <div class="bud">
        <div class="inner">
          <div class="attr">Line Lo</div>
        </div>
      </div>
    </li>
    <li class="criteria">
      <div class="bud">
        <div class="inner">
          <div class="attr">Add Lo</div>
        </div>
      </div>
    </li>
  </ul>
</div> 
```

当我尝试时，`browser.ul(id: "tab").li(class: "criteria").div(text: "Line Lo")`

得到失败错误。

```
Unable to locate element, using(:class => "Criteria", :tag_name=>"li" 
```

我尝试了不同的不同属性来查找文本`Line Lo`，但我失败了。

另外，这个元素是第 45 个，所以可以在点击之前向下滚动并闪烁这个值吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:33:49.653

你尝试过的原始东西

```
browser.ul(id: "tab").li(class: "criteria").div(text: "Line Lo") 
```

失败是因为当有多个元素可以匹配您指定的条件时，watir 将使用它找到的第一个元素。因此，要求 watir 做的事情将等同于英语中的以下内容

*找到第一个带有 id 'tab' 的无序列表，然后在该列表中找到第一个具有类 'criteria' 的列表项，然后在该列表项中找到一个带有文本 'Line Lo' 的 div。*

由于该列表中的第一个 LI 不包含带有该文本的 div，因此它失败了。

**点击最里面的 div**（*根据评论，这是你想要做的*）

```
browser.div(:class => "attr", :text => "Line Lo").click 
```

也就是*给我找一个带有“attr”类和文本“Line Lo”的div，然后让div自己点击*

* * *

*这些其他选项是在不清楚 OP 到底是哪个 div 时提出的，但我要离开它们，因为它们可能会为其他在类似问题上苦苦挣扎的人提供信息*

单击包含上述 div 的 div（父级）。

```
browser.div(:class => "inner", :text => "Line Lo").click 
```

如果那个父 div 没有唯一性（没有类等），你仍然可以像这样得到它

```
browser.div(:class => "attr", :text => "Line Lo").parent.click 
```

单击包含所有内容的 li 标签

```
browser.li(:class => "criteria", :text => "Line Lo").click 
```

对于其中任何一个，如果您需要限制只查看该特定列表，然后像这样指定

```
browser.ul(:id => "tab").li(:class => "criteria", :text => "Line Lo").click 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:06:31.393

你可以试试：

```
browser.ul(:id => 'tab').div(:class => 'attr', :text => 'Line Lo').click 
```

使用时`.click`，它应该在被点击之前滚动到视图中。

# iphone - 在像收藏夹一样滑动 uitableviewcell 上显示删除按钮

> ID：15793354
> 
> 赞同：0
> 
> 时间：2013-04-03T16:49:37.567
> 
> 标签：iphone, objective-c, cocoa-touch

我正在使用以下代码

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    // Return YES if you want the specified item to be editable.
    return YES;
}

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //add code here for when you hit delete
    }
}

-(void)swipePressed:(UISwipeGestureRecognizer *)gestureRecognizer
{
    CGPoint p = [gestureRecognizer locationInView:self.myTable];
    NSIndexPath *indexPath = [self.myTable indexPathForRowAtPoint:p];
    if (indexPath == nil)
        NSLog(@"long press on table view but not on a row");
    else
    {
        [[self.myTable cellForRowAtIndexPath:indexPath] setEditingAccessoryType: UITableViewCellEditingStyleDelete];
    }
} 
```

swipePressed 运行但没有显示删除按钮...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:57:52.763

您无需安装滑动手势识别器即可实现 UITableView 的滑动删除功能。此功能由 UITableView 委托免费提供给您。这也不是正确使用`setEditingAccessoryType`. 完全去掉滑动手势识别器和方法，然后实现方法：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleDelete;
} 
```

# java - 将变量从 JSP 传递到 servlet

> ID：15793355
> 
> 赞同：2
> 
> 时间：2013-04-03T16:49:38.833
> 
> 标签：java, jsp, servlets, httprequest

一直以来，当我在 Google 上搜索时，我得到了十几个答案，这些答案发布在 Stackoverflow 中，关于从 JSP 将变量传递给 servlet。但我想知道，我没有得到答案：`How to pass a variable from JSP to a servlet class? Is it possible?`

实际上我正在做一个简单的*电话簿*应用程序。在这里，我必须将联系人 ID 发送到 servlet 以进行编辑和删除。我怎样才能传递这个值？

> 我知道，我们可以通过使用将变量从 servlet 传递给 JSP`request.setAttribute(key, value)` 但是当我使用它在 JSP 中设置变量并再次通过使用获取它时，`session.getAttribute(key )`结果为空。

神救救我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T20:27:24.120

**在纯 Servlets/JSP 世界中（如从 JSP 到 servlet）**向服务器传递/提交数据的标准方式是使用**[**HTML 表单**](http://www.w3.org/TR/html401/interact/forms.html)，即与使用其他技术（ASP.NET， PHP 等）。而且不管是纯HTML页面还是JSP页面。将数据从表单提交到服务器的推荐/最常用方法是*POST*。**

 **您还可以在路径后面**的请求 URL 中包含的查询字符串中传递数据**（当您在表单中使用*GET方法而不是**POST*时也会发生这种情况）。但这是针对简单的情况，例如为分页构造 URL 等（您可以在此处查看使用附加查询构造 URL 的示例：[在 JSP 中编写 URL](https://stackoverflow.com/a/15712154/814702)） 在 URL 中传递参数的示例： *`http://example.com/foo?param1=bar&page=100`*

 *有关使用***GET*****和*****POST*****方法****提交数据的区别，请****阅读此处：**

 ***   [HTML 表单上的 GET 与 POST 请求](http://webdesign.about.com/od/forms/a/get-and-post-requests.htm)

*   [在 HTML 表单中，使用 GET 方法与 POST 有什么区别？](http://www.programmerinterview.com/index.php/general-miscellaneous/html-get-vs-post/)

因此，您可以配置一些*servlet*来处理从 JSP 或 HTML 等发送/提交的数据。强烈建议使用*POST*方法提交数据，并分别使用[`doPost()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doPost(javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse))servlet 中的方法处理提交的数据。然后，您将使用以下[ServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html)方法之一获取客户端在请求中传递的参数：

*   [java.lang.String getParameter(java.lang.String name)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String))
*   [java.util.Map getParameterMap()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap())
*   [java.util.Enumeration getParameterNames()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterNames())
*   [java.lang.String[] getParameterValues(java.lang.String name)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues(java.lang.String))

这是一个很好的示例教程：[处理客户端请求：表单数据](http://www.java-programming.info/tutorial/pdf/csajsp2/03-Form-Data.pdf)

以上教程来自以下课程：
[Building Web Apps in Java: Starting & Intermediate Servlet & JSP Tutorials](http://courses.coreservlets.com/Course-Materials/csajsp2.html)

* * *

**使用 Java EE交换数据的另一种方法**是将数据作为属性存储在不同的**范围**内。（以下是我对 SO 的回答之一的摘录）

Java EE 5 中有**4 个作用域**（请参阅[Java EE 5 教程：使用作用域对象](http://docs.oracle.com/javaee/5/tutorial/doc/bnafo.html#bnafp)）。在 Java EE 6 和 Java EE 7 中有**5 个作用域**（请参阅[Java EE 6 教程：使用作用域](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbk.html)和[Java EE 7 教程：使用作用域](http://docs.oracle.com/javaee/7/tutorial/cdi-basic008.htm#GJBBK)）。最常用的是：

*   *请求范围*
*   *会话范围*
*   *应用范围*（Web Context）

您可以通过设置适当的属性在上述所有范围内存储一些数据。

这是 Java EE API 文档中与**请求范围相关的**[ServletRequest.setAttribute(String, Object)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute(java.lang.String,%20java.lang.Object))方法的引用：

 **> ```
> void setAttribute(java.lang.String name,
>                   java.lang.Object o) 
> ```
> 
> 在此请求中存储一个属性。**在请求之间重置属性**。此方法最常与 RequestDispatcher 结合使用。
> ...

*因此，对于每个新请求，您在请求*中设置的先前属性都将丢失。在*请求*中设置属性后，您**必须**将请求转发到所需的页面。如果您重定向，这将是一个全新的请求，因此之前设置的属性将丢失。（如果您仍想使用重定向，请阅读：[Servlet Redirection to same page with error message](https://stackoverflow.com/a/14638621/814702)）

[在HttpSession](http://docs.oracle.com/javaee/6/api/index.html?javax/servlet/http/HttpServletRequest.html)（在**会话范围内**）中设置的那些属性将与会话存在一样长，当然，只有会话所属的用户才能使用。

至于上下文属性，它们意味着对整个 Web 应用程序（**应用程序范围**）和所有用户都可用，而且只要 Web 应用程序存在，它们就会存在。

也许这篇文章也对您有用：[Java EE 6 范围如何影响用户交互](http://www.devx.com/Java/Article/47975)

* * *

还要注意以下**问题**。你写道（引用）：

> 我知道，我们可以使用 request.setAttribute(key, value) 将变量从 servlet 传递给 jsp 但是当我使用它在 jsp 中设置变量并再次使用 session.getAttribute(key) 获取它时，结果为空。

正如用户 @neel 和 @Sanchit 所注意到的，您正在`request`对象中设置一个属性，但试图从`session`. 难怪你会遇到`null`这种情况。

* * *

希望这会帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-07-20T14:12:40.403

当然是 ！从 jsp 向 jsp 传递参数的情况下，我们可以简单地使用锚标记（*<a href="page.jsp"?=parameter>*）。*& 然后用parameter = request.getParameter("parameter");*将该参数放入其他 jsp 中 但在 Jsp To Servlet 案例中，协议如图所示![在此处输入图像描述](https://i.stack.imgur.com/jVC24.png)

& 在 Servlet 中检索该参数，再次使用 *parameter = request.getParameter("parameter");********

# ios - iCloud 同步 plist 文件

> ID：15793357
> 
> 赞同：0
> 
> 时间：2013-04-03T16:49:44.857
> 
> 标签：ios, synchronization, sync, icloud, icloud-api

我不擅长编程，这是我的第一个应用程序。我使用本教程制作了应用程序：http: [//mobile.tutsplus.com/tutorials/iphone/building-a-shopping-list-application-from-scratch-part-1/ ?search_index=4](http://mobile.tutsplus.com/tutorials/iphone/building-a-shopping-list-application-from-scratch-part-1/?search_index=4) [http://mobile。 tutsplus.com/tutorials/iphone/building-a-shopping-list-application-from-scratch-part-2/?search_index=2](http://mobile.tutsplus.com/tutorials/iphone/building-a-shopping-list-application-from-scratch-part-2/?search_index=2)

所有数据都存储在 plist 文件中。一切正常。但现在我想让 icloud 同步，我试图找到解决方案，但大多数教程都是关于如何同步核心数据或只是 NSUserDefaults。

您能否在 github 上显示一些我可以使用的代码或一些教程“如何同步 plist 文件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T05:29:49.260

本文档包含开始使用 iCloud 所需了解的内容。它有 NSUserDefaults、Core Data 和 Documents。iCloud 可能是一项难以使用的技术。您将通过直接阅读文档了解更多信息。教程可能很好，但它们无法涵盖所有​​内容。如果您想真正了解它并了解它的工作原理，请阅读 Apple 的官方文档。

[https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/Introduction.html](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/Introduction.html)

# android - 尝试在目标活动中获取 ParcelableArray 时出现 RuntimeException

> ID：15793364
> 
> 赞同：0
> 
> 时间：2013-04-03T16:50:01.660
> 
> 标签：android, bundle, parcelable, runtimeexception

我正在尝试将一组自定义对象传递给一个活动。我已经实现了 parcelable ：

```
public class WidgetState {

    static class Light implements Parcelable
    {
        int id;
        String text;
        int offColor,onColor;
        boolean on=false;

        boolean isRows;
        int size;

        public static final Parcelable.Creator<Light> CREATOR = new Parcelable.Creator<Light>() {
        public Light createFromParcel(Parcel in) {
            return new Light(in);
        }

        public Light[] newArray(int size) {
            return new Light[size];
        }
    };
        @Override
        public int describeContents() {
            return 0;
        }

        public Light(Parcel src)
        {
            id = src.readInt();
            text = src.readString();
            offColor = src.readInt();
            onColor = src.readInt();
            on = src.readInt()==1;
            isRows = src.readInt()==1;
            size = src.readInt();
        }

        public Light() { }

        @Override
        public void writeToParcel(Parcel dest, int flags) {
            dest.writeInt(id);
            dest.writeString(text);
            dest.writeInt(offColor);
            dest.writeInt(onColor);
            dest.writeInt(on?1:0);
            dest.writeInt(isRows?1:0);
            dest.writeInt(size);            
        }       
    }
} 
```

我可以在启动活动中将单个对象放入捆绑包中并通过以下方式检索它

```
bundle.putParcelable(new WidgetState.Light(),"light"); 
```

并通过以下方式在结果活动中检索它

```
WidgetState.Light light = (WidgetState.Light)getIntent().getExtras().getParcelable("light") 
```

但是当像这样打包和排列时

```
bundle.putParcelableArray(new WidgetState.Light[4],"lights"); 
```

我可以在第一个活动中做到这一点

```
WidgetState.Light[] lights = (WidgetState.Light[])bundle.getParcelableArray("lights");
intent.putExtras(bundle);
startActivityForResult(intent,1); 
```

但是在第二个活动中，当我调用时我得到了一个 RuntimeException

```
WidgetState.Light [] lights = (WidgetState.Light []) state.getParcelableArray("lights"); 
```

这是第一个活动中的所有代码

```
Intent intent = new Intent(MainActivity.this,GuiActivity.class);

Bundle bundle = new Bundle();
bundle.putParcelable("light", new WidgetState.Light());
bundle.putParcelableArray("lights", new WidgetState.Light[4]);                  

WidgetState.Light[]lights = (WidgetState.Light[])bundle.getParcelableArray("lights");

intent.putExtras(bundle);

startActivityForResult(intent,1); 
```

而第二个

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gui);      

    Bundle state = (savedInstanceState!=null)?savedInstanceState:getIntent().getExtras();

    try {
        WidgetState.Light light = (WidgetState.Light) state.getParcelable("light");
        // Throws RuntimeException on next line
        WidgetState.Light [] lights = (WidgetState.Light []) state.getParcelableArray("lights");

        Toast.makeText(this, "Good bundle", Toast.LENGTH_SHORT).show();

    }
    catch ( RuntimeException e)
    {
        Toast.makeText(this, "Failed to read bundle", Toast.LENGTH_SHORT).show();
    }
} 
```

我错过了什么？

# perl - Perl：读取文件时跳过第 N 行

> ID：15793367
> 
> 赞同：4
> 
> 时间：2013-04-03T16:50:03.287
> 
> 标签：perl, loops

在解析文本文件时如何跳过第 9 行？

这是我得到的

```
use strict; use warnings;
open(my $fh, '<', 'file.txt') or die $!;
my $skip = 1;
while (<$fh>){
    $_=~ s/\r//;
    chomp;
    next if ($skip eq 9)
    $skip++;
} 
```

不确定这是否有效，但我确信这样做更有说服力。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T16:54:12.853

您可以使用[`$.`](http://perldoc.perl.org/perlvar.html#%24.)：

```
use strict; use warnings;
open(my $fh, '<', 'file.txt') or die $!;
while (<$fh>){
    next if $. == 9;
    $_=~ s/\r//;
    chomp;
    # process line
} 
```

也可以使用`$fh->input_line_number()`

# html - 将 HTML 代码更改为 CSS

> ID：15793368
> 
> 赞同：0
> 
> 时间：2013-04-03T16:50:07.220
> 
> 标签：html, css

我了解 css 并有一个外部文件，但我不知道如何将所有内容从这个 poll 移动到 css 文件。投票位于 div id "poll" 下，因此我在 css 中所做的任何更改都会影响整个投票，而不是特定部分。我可以将投票问题和答案分成单独的 div，还是有更好的方法来重新编写代码？

我知道投票仍然有效，但我喜欢井井有条，因此验证器显示了许多错误。

```
<div id="poll">
<form method="post" action="http://poll.pollcode.com/t78ar8">
    <table>
        <tr>
            <th colspan="2">What game site do you visit most?</th>
        </tr>
        <tr>
            <td>
                <input type="radio" name="answer" value="1" id="t78ar8answer1">
            </td>
            <td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer1">Ign</label></font>

            </td>
        </tr>
        <tr>
            <td width="5">
                <input type="radio" name="answer" value="2" id="t78ar8answer2">
            </td>
            <td>&nbsp;
                <label for="t78ar8answer2">GameSpot</label>
            </td>
        </tr>
        <tr>
            <td width="5">
                <input type="radio" name="answer" value="3" id="t78ar8answer3">
            </td>
            <td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer3">GameFAQs</label></font>

            </td>
        </tr>
        <tr>
            <td width="5">
                <input type="radio" name="answer" value="4" id="t78ar8answer4">
            </td>
            <td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer4">GamerZone</label></font>

            </td>
        </tr>
        <tr>
            <td width="5">
                <input type="radio" name="answer" value="5" id="t78ar8answer5">
            </td>
            <td>&nbsp;<font face="Tahoma" size="2" color="000000"><label for="t78ar8answer5">Mmohut</label></font>

            </td>
        </tr>
        <tr>
            <td colspan="2" height="10">
                <center>
                    <input type="submit" value=" Vote ">&nbsp;&nbsp;
                    <input type="submit" name="view" value=" View ">
                </center>
            </td>
        </tr>
        </a>&nbsp;</font>
        </td>
        </tr>
    </table>
</form>
</div> 
```

这是视觉效果的 jsfiddle [http://jsfiddle.net/qX3Jp/](http://jsfiddle.net/qX3Jp/)。另外，我知道代码的格式不正确。我这样做是因为它都在一行中并且更难阅读。如果需要任何其他信息，请在拒绝我的问题之前询问。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:27:21.220

这是一个[jsfiddle](http://jsfiddle.net/wh1t3w0lf21/PWQnp/)，展示了我将如何做到这一点。没有表格，因为我讨厌表格，并认为唯一应该使用它们的时间是显示数据，而不是用于页面布局。

此外，所有样式都与标记分开。

对于那些懒得点击链接的人...这里是代码。

HTML：

```
<div id="poll">
    <form method="post" action="http://poll.pollcode.com/t78ar8">

        <h2 id="title">What game site do you visit most?</h2>

        <div id="radio_btns">
            <input type="radio" name="answer" value="1" id="t78ar8answer1">Ign<br />
            <input type="radio" name="answer" value="2" id="t78ar8answer2">GameSpot<br />
            <input type="radio" name="answer" value="3" id="t78ar8answer3">GameFAQs<br />
            <input type="radio" name="answer" value="4" id="t78ar8answer4">GamerZone<br />
            <input type="radio" name="answer" value="5" id="t78ar8answer5">Mmohut
        </div>
        <div id="submit_btns">
            <input type="submit" value=" Vote ">
            <input type="submit" name="view" value=" View ">
        </div>
    </form>
</div> 
```

CSS：

```
#poll {
    margin: 30px 0px 0px 5px;
    font-family: Tahoma;
}
#radio_btns {
    margin-bottom: 5px;
    font-size: 13px;
}
#radio_btns input {
    margin: 5px 10px 5px 5px;
}
#title {
    margin-bottom: 3px;
    font-size: 13px;
}
#submit_btns {
     margin: 0px 0px 0px 60px;
} 
```

请注意，我将标记分成多个部分并给它们提供了 ID，以使 CSS 样式更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:30:16.657

我完成了完整的表格并删除了我认为不必要的元素：表格+更多。我将字体信息放在body标签中。CSS 中的其他所有内容都与布局相关。

CSS：

```
* {
    padding:0;
    margin:0;
}
body {
    font-family:Tahoma, Geneva, sans-serif;
    font-size:14px;
    color:#000;
}
label {
    display:block;
}
fieldset {
    border:none;
    text-align:center;
}
legend {
    font-weight:bold;
} 
```

HTML：

```
<form method="post" action="http://poll.pollcode.com/t78ar8" id="poll">
        <legend>What game site do you visit most?</legend>
        <label for="t78ar8answer1"><input type="radio" name="answer" value="1" id="t78ar8answer1"> Ign</label>
        <label for="t78ar8answer2"><input type="radio" name="answer" value="2" id="t78ar8answer2"> GameSpot</label>
        <label for="t78ar8answer3"><input type="radio" name="answer" value="3" id="t78ar8answer3"> GameFAQs</label>
        <label for="t78ar8answer4"><input type="radio" name="answer" value="4" id="t78ar8answer4"> GamerZone</label>
        <label for="t78ar8answer5"><input type="radio" name="answer" value="5" id="t78ar8answer5"> Mmohut</label>
        <fieldset>
          <input type="submit" value=" Vote ">
          <input type="submit" name="view" value=" View ">
        </fieldset>
    </form> 
```

# ruby-on-rails - Ruby on rails 中存在任何视图层对象吗？

> ID：15793377
> 
> 赞同：0
> 
> 时间：2013-04-03T16:50:35.913
> 
> 标签：ruby-on-rails, model-view-controller, sequence-diagram

我被要求绘制序列图来表示 Ruby on rails 中的 MVC 模式。由于序列图是“**对象图**”，**模型、控制器、视图**应该是对象。在 Ruby on rails 中，有模型、控制器的对象，但是 rails 中是否有任何“视图对象”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:17:56.530

Rails 中的视图对象在那里，但它们隐藏在模板基础结构后面。

当控制器对象中的操作方法想要呈现页面时——通过显式调用`render`或通过返回隐式返回——Rails 基础结构调用 的子类`ActionView::TemplateHandlers`，传入您的`.erb`模板和控制器中设置的任何实例变量。模板处理程序解析出 HTML 位，找到嵌入`<% %>`标签中的 ruby​​ 位，并从中构建一个对象。然后它调用对象中的一个方法来进行渲染。您可以在视图中的代码出现错误时生成的堆栈跟踪中看到这一点的证据。`<% 0 / 0 %>`我通过放入视图生成了以下错误：

```
divided by 0 (ActionView::Template::Error)
  ./app/views/home/index.html.erb:9:in `/'
  ./app/views/home/index.html.erb:9:in `block in _app_views_home_index_html_erb___2383790952439350653_70222507697420'
  /Users/dpassage/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.11/lib/action_view/helpers/capture_helper.rb:40:in `block in capture'
  /Users/dpassage/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.11/lib/action_view/helpers/capture_helper.rb:187:in `with_output_buffer'
... 
```

该方法`_app_views_home_index_html_erb___2383790952439350653_70222507697420`是在运行时由`ActionView`.

结果是您可以将这些`.erb`模板视为 MVC 中的视图对象。如果您定义了帮助渲染过程的辅助方法，它们也是视图层的一部分。

# xamarin.ios - PerformSegue 正确调用

> ID：15793378
> 
> 赞同：0
> 
> 时间：2013-04-03T16:50:38.217
> 
> 标签：xamarin.ios, xamarin

Xamarin / MonoTouch 的新手

我有一个通用故事板应用程序（ipad 和 iphone） 我使用故事板

因此，我将 MainViewController 的 segue 链接到了 secondaryViewController (educateViewController)。

我不使用也不想使用导航控制器（我可以在本机 iOS 中执行此操作）

我正在为 PerformSegue 调用而苦苦挣扎，这导致

> System.Exception：在已被 GC 处理的 MyTestApp.educateViewController (0x9827E50) 类型的托管对象上从 Objective-c 调用选择器 ---> System.Exception：未找到 MyTestApp.educateViewController::.ctor(System.整数点）

我有私人教育视图控制器教育屏幕；

和 ViewDidLoad()

```
partial void educate (MonoTouch.Foundation.NSObject sender)
        {
            solveIt(sender);

            if (valid) {
                if (UserInterfaceIdiomIsPhone) {
                    this.PerformSegue("educate", this);  <<<< error occurs here
                } else if (UserInterfaceIdiomIsiPad) {
                    this.Instructor.Hidden = false;
                }
            }
        } 
```

仅当它在 iPhone 上时才应调用 Segue

欢迎大家帮忙，先谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:35:34.070

您需要确保 EducateViewController 实现以下构造函数：

```
public EducateViewController (IntPtr handle) : base (handle)
{
} 
```

这应该允许从情节提要中实例化视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T11:01:58.513

**执行 Segue：**

```
this.PerformSegue("segueIdentifier here", this); 
```

**在目标类上，添加：**

```
protected MyCustomController(IntPtr handle) : base(handle)
        {
            // Note: this .ctor should not contain any initialization logic.
        } 
```

注意：请将“MyCustomController”更改为您的目标控制器名称。

# python - 为什么我不能为整数编程设置 SciPy 的约束优化？

> ID：15793381
> 
> 赞同：6
> 
> 时间：2013-04-03T16:50:48.423
> 
> 标签：python, numpy, scipy, mathematical-optimization

[我已经读到整数编程要么非常棘手，要么无法使用 SciPy](https://stackoverflow.com/questions/12180822/integer-step-size-in-scipy-optimize-minimize) 进行，我可能需要使用 zibopt 之类的东西在 Python 中进行。但我真的认为我可以通过为 SciPy 优化的向量中的每个元素创建一个“二元”约束来做到这一点。

为此，我利用了[http://docs.python-guide.org/en/latest/writing/gotchas/#late-binding-closures](http://docs.python-guide.org/en/latest/writing/gotchas/#late-binding-closures)中的闭包技巧， 并为每个元素创建了一个约束函数，如下所示：

```
def get_binary_constraints(vector, indices_to_make_binary=None):
    indices_to_make_binary = indices_to_make_binary or range(len(vector))
    for i in indices_to_make_binary:
        def ith_element_is_binary(vector, index=i):
            return vector[index] == 0 or vector[index] == 1
        yield ith_element_is_binary

test_vector = scipy.array([0.5, 1, 3])
constraints = list(get_binary_constraints(test_vector))
for constraint in constraints:
    print constraint(test_vector) 
```

打印：

```
False
True
False 
```

然后我修改了 fmin_cobyla 的 get_binary_constraints，它的约束是[“所有函数必须 >=0”的序列](http://docs.scipy.org/doc/scipy-0.7.x/reference/generated/scipy.optimize.fmin_cobyla.html#scipy.optimize.fmin_cobyla)。

```
def get_binary_constraints(vector, indices_to_make_binary=None):
    indices_to_make_binary = indices_to_make_binary or range(len(vector))
    for i in indices_to_make_binary:
        def ith_element_is_binary(vector, index=i):
            return int(vector[index] == 0 or vector[index] == 1) - 1
        yield ith_element_is_binary 
```

它为相同的测试向量 [0.5, 1, 3] 打印以下内容：

```
-1
0
-1 
```

因此，只有数组中的第二个值满足 >= 0 的条件。

然后，我设置了一个非常简单的优化问题，如下所示：

```
from scipy import optimize
import scipy

def get_binary_constraints(vector, indices_to_make_binary=None):
    indices_to_make_binary = indices_to_make_binary or range(len(vector))
    for i in indices_to_make_binary:
        def ith_element_is_binary(vector, index=i):
            return int(vector[index] == 0 or vector[index] == 1) - 1
        yield ith_element_is_binary

def objective_function(vector):
    return scipy.sum(vector)

def main():
    guess_vector = scipy.zeros(3)
    constraints = list(get_binary_constraints(guess_vector))
    result = optimize.fmin_cobyla(objective_function, guess_vector, constraints)
    print result

if __name__ == '__main__':
    main() 
```

这就是我得到的：

```
Return from subroutine COBYLA because the MAXFUN limit has been reached.

NFVALS = 1000   F =-8.614066E+02    MAXCV = 1.000000E+00
X =-2.863657E+02  -2.875204E+02  -2.875204E+02
[-286.36573349 -287.52043407 -287.52043407] 
```

在我去使用 R 的 LPSolve 包或为此安装 zipobt 之前，我真的很想看看我是否可以只使用 SciPy。

我做错了什么，或者这在 SciPy 中是不可能的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T17:02:39.737

问题在于，尽管看起来不直观，但[整数规划](http://en.wikipedia.org/wiki/Linear_programming#Integer_unknowns)从根本上来说是一个比实数线性规划更困难的问题。您链接到的 SO 线程中有人提到 SciPy 使用[Simplex](http://en.wikipedia.org/wiki/Simplex_algorithm)算法。该算法不适用于整数规划。您必须使用不同的算法。

如果您确实找到了一种使用 Simplex 有效解决整数规划的方法，那么您已经解决了[P=NP](http://en.wikipedia.org/wiki/P_=_NP_problem)问题，对于第一个解决的人来说价值[1,000,000 美元。](http://en.wikipedia.org/wiki/Millennium_Prize_Problems#P_versus_NP)

# jquery - 试图让两个 div 块彼此相邻并填充页面

> ID：15793384
> 
> 赞同：1
> 
> 时间：2013-04-03T16:50:55.203
> 
> 标签：jquery, html, css

[http://jsfiddle.net/UeLMA/1/](http://jsfiddle.net/UeLMA/1/)

的HTML：

```
<div id="left" style="background: red; display: inline-block; float: left">
    aaaa<br />
    aaaaa
</div>
<div id="right" style="background: yellow; float: left"></div> 
```

我希望#right 填充#left 未使用的屏幕的其余部分。为了实现这一点，我正在使用 jquery：

```
$('#left').height($(window).height());
$('#right').height($(window).height());
$('#right').width($(window).width() - $('#left').outerWidth()); 
```

唯一的问题：它不起作用。这是 jsfiddle：http: [//jsfiddle.net/UeLMA/1/](http://jsfiddle.net/UeLMA/1/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:56:57.510

**工作版本：http:** [//jsfiddle.net/UeLMA/4/](http://jsfiddle.net/UeLMA/4/)

将此重置添加到您的 CSS：

```
* {
margin: 0;
padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:55:15.740

您拥有的两个 div 不会占用整个窗口，因此第二个 div 的宽度不适合第一个。将第二个宽度更改为`$('#right').parent().width() - $('#left').outerWidth()`它可以工作。

这是一个小提琴：

[http://jsfiddle.net/UeLMA/5/](http://jsfiddle.net/UeLMA/5/)

我正在做的是使用`.parent()`选择器而不是窗口来确保我正在调整 div 大小的东西是它们实际适合的东西。我相信它们适合`body`具有一些边距或填充将其从窗口中设置出来的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:57:03.090

你不需要 jQuery 来实现这一点。只是一些基本的 CSS 原则。

1.  要达到 100% 的高度，您想要 100% 高度的元素的所有父级也必须设置为 100% 高度。

    **CSS：** `html, body, #left, #right { height: 100%; margin:0; }`

2.  要填充页面宽度，只需将两个块元素浮动到左侧并将它们的宽度设置为`50%`（或等于 100% 的不同比率）

    **CSS：** `#left, #right { float: left; width: 50%; }`

您可以在此处查看工作示例：http: [//jsfiddle.net/UeLMA/2/](http://jsfiddle.net/UeLMA/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T17:01:52.593

您必须考虑主体周围的填充和边距。

[http://jsfiddle.net/UeLMA/6/](http://jsfiddle.net/UeLMA/6/)

CSS：

```
#left { background: red; display: inline-block; float: left }
#right { background: yellow; float: left; }
body {padding: 0; margin: 0;} 
```

并更改`outerWidth()`为`width()`：

```
$('#left').width() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T16:59:06.963

无需使用 JQuery。您的代码中的主要问题是 div 默认采用 100% 宽度，因此右侧 div 位于下方，因此只需根据需要为左右 div 提供宽度，添加 height:100%; 到他们每个人并删除 Jquery 代码

# jquery-ui - (function(){ .......... }); 作品

> ID：15793390
> 
> 赞同：2
> 
> 时间：2013-04-03T16:51:06.940
> 
> 标签：jquery-ui, jquery

嘿伙计们，我是一个新人，试图找出一些令人困惑的方法

```
 var delay = (function(){
      var timer = 0;
      return function(callback, ms){

        clearTimeout (timer);
        timer = setTimeout(callback, ms);
      };
    })(); 
```

这是我找到的一段代码，它被用作

```
$("input").keyup(function() {
    delay(function(){
      alert('works');
    }, 1000 );
}); 
```

我知道上面的代码在我测试过时可以工作，但我不明白 (function(){ 的意思是什么，以及回调如何具有

```
 function(){alert('works');} 
```

作为之前没有接受参数时的参数..！

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:26:28.487

`delay`设置为由立即执行的函数返回的函数 (function(){ …return function()... })(); 立即执行一个的函数，也会在 timer 变量周围创建闭包。

功能（）{ … }）（）; 不完全是一个window.ready。相反，它在任何地方执行。注意`()`最后的。它返回另一个函数，该函数保存在可变延迟内。

然后在输入键上 1 秒后显示警报，但是为了防止**在 1 秒内**多次按下向上键时多次显示警报，定时器周围的闭包用于取消使用 clearTimeout 调用前一个定时器

```
 $("input").keyup(function() {
        delay(function(){
          alert('works');
        }, 1000 );
    });
//delay takes 2 params callback and ms
//ms:1000
//set the callback as: 
        function(){
          alert('works');
        }

now delay invokes following code that has already created closure around timer var.

    function(callback, ms){

            clearTimeout (timer); //attempts to cancels previous timer event that would invoke alert callback
            timer = setTimeout(callback, ms); //call back the above set callback after ms value i.e. 1000 milli seconds
      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:11:03.317

函数只是将多行代码包装在一起的一种方式。

你可以让它匿名并立即执行：

```
 (function (){ alert("I'm working!");})(); 
```

然后，您可以给它起一个名称，例如：

```
 function myFunction(){ alert("I'm working!");} 
```

你可以调用它：

```
 myFunction(); 
```

你可以做

```
 $("input").keyup(function() {
         delay( myFunction, 1000 );
     }); 
```

一旦在输入输入时抬起一个键，它将在 1000 毫秒后运行 myFunction。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:20:15.303

分配给`delay`匿名函数的调用，该函数关闭计时器变量并返回第二个匿名函数，该函数接受两个参数，`callback`并且`ms`（因此，的类型`delay`也是两个参数的函数）清除与`timer`变量关联的句柄，然后调用回调。如果您的呼叫延迟比超时更快，并且您只想响应最近的呼叫，则很有用。

我们可以这样做以使其（稍微）更清楚：

```
//define the closure
var closure = function() {
   var timer = 0;
   return function(callback, ms) {
     clearTimeout (timer);
     timer = setTimeout(callback, ms);
   };
};
//invoke the closure to return the function that we will actually use as delay
var delay = closure(); 
```

# ruby-on-rails - Rails 4.0.0.beta 1 和 Mongoid

> ID：15793400
> 
> 赞同：3
> 
> 时间：2013-04-03T16:51:36.403
> 
> 标签：ruby-on-rails, mongoid, ruby-on-rails-4

我只是在尝试 Mongodb 和最新的 rails 设置。

我正在使用 Rails 4.0.0.beta 1、Ruby 2.0.0p0 和 mongoid 4.0.0。

我有一个问题：我可以按预期创建和删除对象，但不能更新对象。没有返回错误，并且开发日志显示更改的参数正在正确传递。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:15:56.990

深入挖掘我发现 mongoid 4.0.0 仍然引用 moped 1.4.5，它官方只支持 ruby​​ 版本到 1.9.3。

github 上最新的 moped 版本是 2.0.0，它适用于 ruby​​ 2.0.0，但尚未发布到 gem 存储库。

看来我可能需要等待一段时间才能尝试这种组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:06:34.770

我已经能够执行 CRUD 操作 - 但是现在在我的控制器中（仅用于测试/峰值）我允许所有参数通过 strong_parameters。

在我的 Gemfile 中，我有：

```
gem 'mongoid' , git: 'https://github.com/mongoid/mongoid.git' 
```

在控制器中我有：

```
params.require(:foo).permit! # allows everything, and bad security!!! 
```

请参阅此 railscast：（[http://railscasts.com/episodes/400-what-s-new-in-rails-4](http://railscasts.com/episodes/400-what-s-new-in-rails-4)）或代码：（[https://github.com/railscasts/400-what-s- new-in-rails-4](https://github.com/railscasts/400-what-s-new-in-rails-4) )

使用 strong_parameters 查看控制器代码的更改，因为我认为这就是让您在更新时静默失败的原因:)

在我的一个模型上，有一些非常深的 has_many :foo 和 foo has_many :bar 和 bar has_many :baz，我在每个模型上都有 accept_nested_attributes_for。

所以只是说你可能想多尝试一下，或者在你尝试和我之前之间的 mongoid 下划线有更新。

# javascript - 使用 Durandal 动态创建 SPA

> ID：15793406
> 
> 赞同：0
> 
> 时间：2013-04-03T16:51:52.607
> 
> 标签：javascript, knockout.js, single-page-application, durandal

对于我们的单页应用程序，我们需要构建一个系统来“实时”创建视图和视图模型，而不是将一组定义的视图和视图模型作为 .html 和 .js 文件存在于服务器上。< /p>

这将是一个 Intranet 应用程序，我们希望最终用户能够在使用应用程序时定义他们在应用程序中看到和使用的内容。例如，最终用户 A 创建视图 1、视图 2 和视图 3，而最终用户 B 选择创建视图 4 和视图 5，依此类推。然后在浏览器会话中创建这些视图，并以某种方式保存以供用户下次使用该应用程序时使用。

他们可以随意命名这些视图（例如，仪表板 1、工厂视图 2 等），然后他们可以选择一个或多个“小部件”出现在每个视图上。“小部件”将是一组 JavaScript/HTML/CSS 代码，类似于 Web 表单世界中的用户控件，将执行其特定功能并能够拖动和调整大小。当然，用户添加到每个视图中的所有小部件都将被保存以供后续使用。

因此，每次最终用户 A 打开应用程序时，他们都会看到他们的 3 个视图作为顶部的选项卡（在配置视图时以他们命名的任何名称命名），他们将能够导航到视图并查看和查看与他们在每个视图上选择的小部件进行交互。

我们的应用程序有点像 Trello，其中视图可以由最终用户添加、更新、删除等，“小部件”可以动态添加到视图中、移动、删除、更新等。以动态创建的方式。

在研究 SPA 时，视图和视图模型被开发为实际的物理文件，它们存在于生产 Web 服务器上，并为所有用户提供预期的功能。但是，我们的 SPA 在可用视图/页面方面需要更加动态。

这种场景可以使用Durandal吗？如果是这样，关于如何构建这样的东西的任何指导？

或者，这对杜兰达尔来说是不可能的吗？如果是这样，对我们来说更好的道路是什么？

作为最后的手段，我们是否需要创建某种 html 和 JavaScript 生成器，以便在用户选择配置选项后输出文件？

或者？？？？？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:19:48.893

durandal 是一个帮助创建单页应用程序 (SPA) 的框架。SPA 本质上只是一个感觉像桌面应用程序的网站。

您可以创建的唯一限制是浏览器的限制。

您可以构建在浏览器中运行的任何东西.. 都可以在 durandal 中使用。

您可以在 1 个水疗中心内拥有多个水疗中心。

如果需要，您也可以动态下载 css/html/js。

关于如何构建应用程序有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:56:45.053

我认为没有什么能阻止你这样做。

当您在 Durandal 启动时定义路线时，您可以拥有灵活的路线，这样您就可以使用保存的视图数据来帮助构建它。但我有一种感觉，你基本上想要一个其他迷你应用程序所在的外壳？您的视图/小部件是否与主应用程序完全分开？如果是这样，您可能真的不需要自定义路由。

我正在做类似的事情。我使用 iframe 来托管应用程序，并且用户能够移动它们。不过，我并没有坚持用户布置的内容。

# c# - 如果存在超过 37 个字符，如何将字符串拆分为多行

> ID：15793409
> 
> 赞同：1
> 
> 时间：2013-04-03T16:52:05.133
> 
> 标签：c#, arrays, string

如果存在超过 37 个字符，如何将字符串拆分为多行？

例句

> 敏捷的棕狐跳过了懒狗

它应该成功

> 敏捷的棕狐跳过了
> 懒狗

虽然第 37 个字符是“L”

我想按单词分组。

这是我的代码

```
private string sentence(string statement)
{
    string completedWord = "";
    string temp = "";
    string[] wordArray = statement.Split(' ');
    for (int i = 0; i < wordArray.Length; i++)
    {
        temp = completedWord + wordArray[i] + ' ';
        if (temp.Length < 37)
        {
            completedWord = completedWord + wordArray[i] + ' ';
        }
        else
        {
            completedWord = completedWord + "\n" + wordArray[i] + ' ';
        }
        temp = "";
    }
    return completedWord;
} 
```

一旦句子是 37 个字符，它就一直在做`else`。我希望每行在添加之前为 37 `\n`。仅当句子长于 37 个字符时才会发生这种情况

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:11:14.503

这应该可以解决问题。顺便说一下，为了方便起见，我将使用 StringBuilder。

```
static string sentence(string statement)
{
  if (statement.Length > 37)
  {
    var words = statement.Split(' ');        
    StringBuilder completedWord = new StringBuilder();
    int charCount = 0;

    if (words.Length > 1)
    {
      for (int i = 1; i < words.Length - 1; i++)
      {
        charCount += words[i].Length;
        if (charCount >= 37)
        {
          completedWord.AppendLine();
          charCount = 0;
        }

        completedWord.Append(words[i]);
        completedWord.Append(" ");
      }
    }

    // add the last word
    if (completedWord.Length + words[words.Length - 1].Length >= 37)
    {
      completedWord.AppendLine();
    }
    completedWord.Append(words[words.Length - 1]);
    return completedWord.ToString();
  }
  return statement;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-25T08:29:41.473

您可以像下面那样执行字符串子字符串方法，

```
 string WrapText(string statement, int Length)
        {            
            StringBuilder completedWord = new StringBuilder();

            completedWord.Append(statement.Substring(0, Length));//cut the specifed legth from long string
            completedWord.AppendLine();
            completedWord.Append(statement.Substring(Length));//read remainig letters
            return completedWord.ToString();
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-20T04:18:37.217

我用这个：

```
 /// <summary>
    /// Wrap lines in strings longer than maxLen by interplating new line
    /// characters.
    /// </summary>
    /// <param name="lines">the lines to process</param>
    /// <param name="maxLen">the maximum length of each line</param>
    public static string[] wrap_lines(string[] lines, int maxLen)
    {
        List<string> output = new List<string>();

        foreach (var line in lines)
        {
            var words = line.Split(' ');
            string newWord = words[0] + " ";
            int len = newWord.Length;

            for (int i = 1; i < words.Length; i++)
            {
                if (len + words[i].Length + 1 > maxLen)
                {
                    len = 0;
                    newWord += "\n";
                    i--;
                }
                else
                {
                    len += words[i].Length + 1;
                    string ch = i == words.Length - 1 ? "" : " ";
                    newWord += words[i] + ch;
                }
            }
            output.Add(newWord);
        }
        return output.ToArray();
    } 
```

它假定没有词长于`maxLen`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:06:10.020

更正了你的 for 循环：

```
for (int i = 0; i < wordArray.Length; i++)
            {
                //temp = completedWord + wordArray[i] + ' ';      //remove it
                temp = temp + wordArray[i] + ' ';    //added
                if (temp.Length < 37)
                {
                    completedWord = completedWord + wordArray[i] + ' ';
                }
                else
                {
                    completedWord = completedWord + "\n";    //corrected
                    temp = "";     //added
                }
                //temp = "";       //remove it
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T17:07:39.057

您可以包含一个记录当前记录的行数的字段：

```
string completedWord = "";
    string temp = "";
    string[] wordArray = statement.Split(' ');
    int lines = 1;
    for (int i = 0; i < wordArray.Length; i++)
    {

        temp = completedWord + wordArray[i] + ' ';
        if (temp.Length < 37* lines)
        {
            completedWord = completedWord + wordArray[i] + ' ';
        }
        else
        {
            completedWord = completedWord + "\n" + wordArray[i] + ' ';
            lines += 1;
        }
        temp = "";
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T17:15:47.073

添加第一个 \n 后，字符串将始终超过 37 个字符，因此第一个 if(len<37) 测试只会返回一次 true。

相反，您需要另一个变量，即

```
string tempLine = ""; 
```

然后，当您遍历您的单词集合时，通过 tempLine 构建一个由总计 <= 37 个字符的单词组成的行，一旦达到最大值，将其添加到 completedWord，然后在下一个循环之前重置 tempLine = ""。

```
temp = tempLine + wordArray[i] + ' ';
if (temp.Length < 37)
{
    tempLine = tempLine + wordArray[i] + ' ';
}
else
{
    completedWord = completedWord + tempLine + "\n";
    tempLine = "";
}
temp = ""; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-12T08:20:20.190

这是我的尝试。它是一个简短的递归函数，接受您希望分成多行的字符串，以及每行的最大长度（截止点）作为参数。

它将输入文本的子字符串从开头获取到所需的行长，并将其添加到“输出”变量中。然后它将输入字符串的剩余部分返回给函数，在该函数中它不断递归调用自身，直到剩余部分的长度小于所需的行长，此时它返回输出变量。

希望这很清楚。

```
 public static string breakString(string s, int lineLength){
    string output = "";
    if(s.Length > lineLength){
        output = output + s.Substring(0, lineLength) + '\n';
        string remainder = s.Substring(lineLength, s.Length-lineLength);
        output = output + breakString(remainder, lineLength, maxLines);
    } else {
        output = output + s;    
    }

    return output;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-23T15:34:30.080

当前接受的答案过于复杂，不确定是否准确（见评论）。一个更简单和准确的解决方案是：

```
public static class StringExtensions
{
    public static string BreakLongLine(this string line, int maxLen, string newLineCharacter)
    {
        // if there is nothing to be split, return early
        if (line.Length <= maxLen)
        {
            return line;
        }

        StringBuilder lineSplit = new StringBuilder();

        var words = line.Split(' ');
        var charCount = 0;
        for (var i = 0; i < words.Length; i++)
        {
            if (charCount + words[i].Length >= maxLen)
            {
                // '>=' and not '>' because I need to add an extra character (space) before the word
                // and last word character should not be cut
                lineSplit.Append(newLineCharacter);
                charCount = 0;
            }

            if (charCount > 0)
            {
                lineSplit.Append(' ');
                charCount++;
            }

            lineSplit.Append(words[i]);
            charCount += words[i].Length;
        }

        return lineSplit.ToString();
    }
} 
```

请注意，此解决方案：

1.  不要在行尾留空格；
2.  代码更干净。例如，具有更少的条件并且它会提前返回以提高代码准备度

我**还用单元测试介绍了这个方法，**所以你可以看到它是有效的：

```
public class StringExtensionsTests
{
    [Fact]
    public void SplitIntoTwoLines()
    {
        // arrange
        const string longString = "Four words two lines";

        // act
        var resultString = longString.BreakLongLine(10, "\n");

        // assert
        Assert.Equal("Four words\ntwo lines", resultString);
    }

    [Fact]
    public void SplitIntoThreeLines()
    {
        // arrange
        const string longString = "Four words two lines";

        // act
        var resultString = longString.BreakLongLine(9, "\n");

        // assert
        Assert.Equal("Four\nwords two\nlines", resultString);
    }

    // https://stackoverflow.com/questions/15793409/how-to-split-a-string-into-multiple-lines-if-more-than-37-characters-are-present
    [Fact]
    public void StackOverflowExample()
    {
        // arrange
        const string longString = "The Quick Brown Fox Jumped Over The Lazy Dog";

        // act
        var resultString = longString.BreakLongLine(37, "\n");

        // assert
        Assert.Equal("The Quick Brown Fox Jumped Over The\nLazy Dog", resultString);
    }
} 
```

# php - 如何在动态内容中使用来自锚标记的 jQuery .load() 调用

> ID：15793414
> 
> 赞同：0
> 
> 时间：2013-04-03T16:52:16.757
> 
> 标签：php, javascript, jquery, ajax, modal-dialog

我有一个搜索页面，它从表单中获取用户输入，然后将该信息发送到 PHP 文件，该文件将 cURL 调用发送到外部服务器。然后，PHP 文件从服务器获取返回的数组，并将一些 HTML 回显到原始搜索页面中的“结果”div。

我想做的是设置它，以便当用户单击“结果”div 中的一个行项目时，会出现一个模式窗口，其中包含有关单击的单个项目的更多信息。

我知道如何创建一个 jQuery 脚本，该脚本将处理对单个唯一链接的单击，并通过再次查询服务器来生成模式窗口（通过一个单独的 PHP 文件，该文件使用附加信息格式化模式框并正确调整大小）。我*不*知道如何使用动态创建的内容来处理所有这些。

这是第一个 PHP 文件的回显：

[在编辑时删除；见下文]

它对服务器返回的数组中的每个“列表”执行此操作。

这是我在单击#modalLaunch div 中的锚标记时创建模态窗口的想法（这来自我一直用来弄清楚如何操作模态窗口及其内容的测试页面）：

[在编辑时删除，见下文]

我开始怀疑我需要完全放弃这种方法并尝试使用“onClick”策略，但我不知道如何在所有函数之间传递相关信息。帮助！

编辑：

问这个问题我做得非常糟糕。对不起。这是我正在使用的代码的更好表示：

**PHP 文件：**

（$data 是从外部服务器提取的数组。我已经删除了一堆无关变量，所以假设它们映射到一些合理的东西。）

```
$data = unserialize($data);

$listings = $data["listings"];

echo "<ul id='listings_grid'>";

for($i=0;$i<$data["count"];$i++)
{
    $url = "/listings/".$listing_id;

    echo "<li>
            <a href='' target='_blank' data-listing-id='".$listing_id."'>
                    <div class='listing_thumb_image_container'>
                        <img class='listing_thumb_image' src='".$mainPhoto."'/>
                    </div>
                    <div class='listing_thumb_content'>
                        <br>Rent: $".$rent."
                        <br>Bedrooms: ".($bedrooms_count==0 ? "Studio" : ($bedrooms_count=='0.5' ? "Convertible" : $bedrooms_count))."
                        <br>Listing ID: ".$listing_id."
                    </div>
            </a>
        </li>";

}

echo "</ul>"; 
```

**搜索页面：**

（再次，抽出很多多余的东西。）

```
<?php
<script>

$(document).ready(function(){
$.post($("#html-form").attr("action"),$("#html-form").serialize(),function(data){
    $("#search_results").html(data);
});
});

$(document).ready(function(){
$("#html-form").on('change submit',function(){
    $.post($("#html-form").attr("action"),$("#html-form").serialize(),function(data){
        $("#search_results").html(data);
    });
    return false;
});
});

$(document).on('click','#search_results li',function(){
$('.modalDialog').css('display','block','opacity','1','pointer-events','auto');
var href = $(this).children('a').attr('href');
$('#openModalContent').load(href);
return false;
});

</script>

<div id="openModal" class="modalDialog">
<div>
    <a href="#close" title="Close" class="close">X</a>
    <div id="openModalContent"></div>
</div>

</div>

<div id="content">

<div id="search_form"><form></form></div>
<div id="search_results" style="margin:0 auto;"></div> 

</div>

<?php include ('footer.php'); ?> 
```

那么我从这里去哪里呢？出于某种原因，当我插入到目前为止答案提供的选项时，我没有看到模式框出现。它可能与 CSS 有关：目前，模态窗口只有在受到 :target 伪类时才会变得不透明。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:20:47.790

如果您希望动态生成的内容能够执行此操作，如果您使用 JQuery 1.9 及更高版本，请尝试以下操作：

```
$(document).on('click','#openModalContent li',function(){
    var href = $(this).children('a').attr('href');
    $('#yourModalBox').load(href).show(888);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:03:58.320

将 data-listing-id 属性添加到生成的 HTML 中的锚点：

```
<a href='".$url."' target='_blank' data-listing-id='".$listing_id."'> 
```

并在您的点击处理程序中使用该属性，例如：

```
$('#modalLaunch a').click(function(){
    $('#openModalContent').load('/listings.php', {id:$(this).data("listing-id")});
}); 
```

# sql-server - 如何在 T-SQL 中拆分非定界字符串

> ID：15793418
> 
> 赞同：1
> 
> 时间：2013-04-03T16:52:36.973
> 
> 标签：sql-server, tsql, string-parsing

我需要拆分一个没有分隔符的字符串值。我在银行工作，我正在选择一个 GL 帐号，需要将帐号与分行号码分开。问题是这两个值都作为一个长字符串传递，帐号为 10 位，帐户分支为 4 位。例如 01234567891234 需要更改为 0123456789.1234。

我发现的每一件事都说要使用 CHARINDEX 或 SUBSTRING。据我了解，两者都需要一个字符来搜索。如果有人可以提供另一个功能和一些示例代码，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:54:11.143

你可以做一些简单的事情，比如

`left(str, 10) + '.' + right(str, 4)`

如果你知道它总是一个 14 个字符的字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:58:04.640

您还可以使用`STUFF`如下功能：

```
declare @accNo varchar(14) = '01234567891234'

select stuff(@accNo,11,0,'.') 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/11900)

# mysql - 查询多个表，包括具有空外键 MySQL 的行

> ID：15793432
> 
> 赞同：3
> 
> 时间：2013-04-03T16:53:19.370
> 
> 标签：mysql, null, foreign-keys, multiple-tables

这是我第一次使用 mysql，我需要一些帮助。我找不到任何解决方案可能是因为它太容易了，或者我太菜鸟无法正确查找它。

我想从我的测试数据库中的多个表中进行查询。假设表格是：

类别（*id_category，*id_product）

产品（*id_product、id_category、id_supplier、id_manufacturer）

制造商（*id_manufacturer，名称）

供应商（*id_supplier，名称）

带有 * 的列是整数主键，而不是具有 auto_increment 的 null（从 1 开始）。其他 id 列只是整数外键（默认为空）。

我需要一个查询，还包括产品表上具有空 id_manufacturer 和/或 id_supplier 的行。产品表中的那些空字段返回值“0”，所以当我进行如下查询时

```
SELECT category.id_product, manufacturer.name, supplier.name 
FROM category, product, manufacturer, supplier 
WHERE category.id_category = product.id_category AND manufacturer.id_manufacturer = product.id_manufacturer AND supplier.id_supplier = product.id_supplier; 
```

没有显示具有空值 (0) 的行。我希望您以最干净和最有效的方式指出我，而无需更改表属性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:02:35.867

然后你需要使用左连接。

```
SELECT category.id_product, manufacturer.name, supplier.name, P.ID_PRODUCT
FROM product
LEFT JOIN category C
ON C.id_category = P.id_category
LEFT JOIN manufacturer M
ON M.id_manufacturer = P.id_manufacturer 
LEFT JOIN supplier S
ON S.id_supplier = P.id_supplier; 
```

这些将给出产品表的所有行，即使它没有来自其他表的对应行。

# c# - 如何使用c#从excel文件中读取数据

> ID：15793442
> 
> 赞同：74
> 
> 时间：2013-04-03T16:53:45.223
> 
> 标签：c#, .net, excel, ms-office

我的应用程序需要从 excel 文件中读取数据。我正在使用 .Net 和 c# 进行开发。我无法在系统中安装 MS Office。因此，我的应用程序无法读取 excel 文件并在为 excel 加载 dll 时引发错误。

如何在未安装 ms office 的系统中访问我的应用程序中的 excel 文件？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-04-03T17:00:43.500

可以选择使用`OleDB`和使用 Excel 工作表，如数据库中的数据表......

只是一个例子......

```
string con =
  @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\temp\test.xls;" + 
  @"Extended Properties='Excel 8.0;HDR=Yes;'";    
using(OleDbConnection connection = new OleDbConnection(con))
{
    connection.Open();
    OleDbCommand command = new OleDbCommand("select * from [Sheet1$]", connection); 
    using(OleDbDataReader dr = command.ExecuteReader())
    {
         while(dr.Read())
         {
             var row1Col0 = dr[0];
             Console.WriteLine(row1Col0);
         }
    }
} 
```

此示例使用`Microsoft.Jet.OleDb.4.0`提供程序打开和读取 Excel 文件。但是，如果文件的类型为 xlsx（来自 Excel 2007 及更高版本），则需要下载[Microsoft Access 数据库引擎](https://www.microsoft.com/en-us/download/details.aspx?id=13255)组件并将其安装在目标计算机上。

提供者称为`Microsoft.ACE.OLEDB.12.0;`. 注意这个组件有两个版本，一个是32bit的，一个是64bit的。为您的应用程序的位数和安装的 Office 版本（如果有）选择合适的版本。要使该驱动程序正确地为您的应用程序工作，有很多怪癖。[例如看这个问题](https://stackoverflow.com/questions/17716207/the-microsoft-ace-oledb-12-0-provider-is-not-registered-on-the-local-machine-w/17716238#17716238)。

当然，您不需要在目标机器上安装 Office。

虽然这种方法有一些优点，但我认为您应该特别注意您的问题[Reading excel files from C#](https://stackoverflow.com/questions/15828/reading-excel-files-from-c-sharp)中的评论所指示的链接。关于数据类型的正确解释以及单个 Excel 单元格中的数据长度超过 255 个字符时存在一些问题

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-03T16:56:20.617

用于读取 Excel 97-2003 文件 (XLS) 的[CSharpJExcel](http://sourceforge.net/projects/jexcelapi/)，用于读取 Excel 2007/2010 文件（Office Open XML 格式，XLSX）的 ExcelPackage，以及[似乎](http://excelpackage.codeplex.com/)能够处理这两种格式的[ExcelDataReader](https://github.com/ExcelDataReader/ExcelDataReader)

祝你好运！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-03T16:55:00.477

将 Excel 文件保存为 CSV，并使用 C# 使用[FileHelpers 之](http://filehelpers.sourceforge.net/)类的 CSV 阅读器库读取生成的文件。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-03T17:14:32.690

我没有可用的机器来测试它，但它应该可以工作。首先，您可能需要安装[2007 Office System Driver: Data Connectivity Components](http://www.microsoft.com/en-us/download/details.aspx?id=23734)或[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255)。然后尝试以下代码，注意您需要在下面的 Select 语句中更改工作表的名称以匹配您的 Excel 文件中的工作表名称：

```
using System.Data;
using System.Data.OleDb;

namespace Data_Migration_Process_Creator
{
    class Class1
    {
        private DataTable GetDataTable(string sql, string connectionString)
        {
            DataTable dt = null;

            using (OleDbConnection conn = new OleDbConnection(connectionString))
            {
                conn.Open();
                using (OleDbCommand cmd = new OleDbCommand(sql, conn))
                {
                    using (OleDbDataReader rdr = cmd.ExecuteReader())
                    {
                        dt.Load(rdr);
                        return dt;
                    }
                }
            }
        }

        private void GetExcel()
        {
            string fullPathToExcel = "<Path to Excel file>"; //ie C:\Temp\YourExcel.xls
            string connString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 12.0;HDR=yes'", fullPathToExcel);
            DataTable dt = GetDataTable("SELECT * from [SheetName$]", connString);

            foreach (DataRow dr in dt.Rows)
            {
                //Do what you need to do with your data here
            }
        }
    }
} 
```

注意：我没有一个环境来测试它（一个安装了 Office），所以我不能说它是否可以在你的环境中工作，但我不明白为什么它不应该工作。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-03T16:55:35.030

将 excel 文件转换为`.csv`文件（*逗号分隔值*文件），现在您可以轻松读取它。

# java - Double to BigDecimal，比较两者

> ID：15793446
> 
> 赞同：2
> 
> 时间：2013-04-03T16:53:59.973
> 
> 标签：java, double, bigdecimal

我必须进行双重比较，我尝试了很多东西，但没有任何效果..他们负责停止循环。首先，使用 (double) Math.round(x*10000000)/10000000 比较 double 的他们自己，工作得很好，但后来.. 数字是相同的，但不是（反之亦然），所以循环无休止地继续。尝试将它们四舍五入并比较长值，仍然相同。最后，尝试使用 Big-decimal，再次遇到问题。

```
BigDecimal value=new BigDecimal(Double.toString(decimalNumber),MathContext.DECIMAL32);  

BigDecimal temp=new BigDecimal(Double.toString((1/count)*sum),MathContext.DECIMAL32); 
```

这段代码有什么问题？据我所知，最好使用字符串构造函数，所以我正在使用它。第二行返回一个多汁的“java.lang.NumberFormatException”，如果我将第二行编辑为例如 5.3222，一段时间后，第一行返回相同的错误。我应该用 BigDecimals 替换双精度数，仅用于此比较吗？这对我来说似乎很愚蠢，必须有一种简单的方法来进行这种比较。

我正在尝试比较双打，精度至少为 1*10^-7。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:07:14.897

鉴于浮点数的范围很大，要比较两个浮点数彼此之间的接近程度，您通常会使用 *相对差异*。

`x`和之间的相对差异`y`是`Math.abs((x-y)/x)`。如果相对差异低于某个阈值，您可以认为 x 和 y 相等，例如：

```
if (Math.abs((x-y)/x) < 1e-9) {
    // x is nearly equal to y
} 
```

**更新：**这个实现虽然有一些问题：

*   它不是对称的：如果 x = y，我们也期望 y = x。
*   如果 x 或 y 为零，它们的比较总是不相等，因为相对差异为 1 或无穷大。
*   如果 x 和 y 都为零，则它们比较为不相等，因为左侧计算的是 0/0 (NaN)

更好的实现首先检查 x 和 y 是否接近零，然后除以最大或最小。[您可以在 Bruce Dawson 的Comparing floating point numbers](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)中阅读有关此问题的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T17:29:51.757

如果 A 是 Double 而 B 是 BigDecimal，为什么不暂时将 A 提升为 BigDecimal 进行比较？

# r - PNG图为空的原因及解决方法

> ID：15793448
> 
> 赞同：0
> 
> 时间：2013-04-03T16:54:05.167
> 
> 标签：r

我在 R 中有以下功能

```
pairwise.yearly.plot <- function(data.source, data.target, suffix=".PR", years=2003:2007) {
  # plot pairwise year data for time series representation of data                                                                                                                                                                 
  first <- years[1]
  last <- years[length(years)]
  nc <- last - first #2007-2003                                                                                                                                                                                                    
  par(mfrow=c(nc, nc))
  for(y1 in years) {
    for(y2 in years) {
      if(y1 < y2) {
        year.source <- num.to.colname(y1);
        if(suffix == ".PE") {
          year.target <- paste(num.to.colname(y1), y2, sep=".");
        } else {
          year.target <- paste(num.to.colname(y2), suffix, sep="");
        }
        plot(data.source[[year.source]], data.target[[year.target]], xlab=y1, ylab=paste(y2, suffix,sep=""))
      }
      else if(y1 > y2) {
        frame()
      }
    }
  }
} 
```

当我调用它时：

```
png("output.png")
pairwise.yearly.plot(foo, bar)
dev.off() 
```

我得到一个空的 png 文件。当我将图形设备设置为 pdf 时，不会发生这种情况。谁能告诉我为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:25:58.803

问题是您调用的绘图命令比使用 par(mfrow=c(nc, nc)) 准备的要多

如果 nc 为 4，那么您准备 16 个单元格进行绘制，但循环占 25 个操作。如果这些额外操作中的最后一个是 frame() 你最终会得到一张空白图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-20T16:18:05.730

如果您正在使用`ggplot`，请使用此模板：

```
png("PNG_FILE.png")
g <- ggplot(....)
print(g)
dev.off() 
```

# processing - Processing.js 的 PDE 不显示也不显示错误

> ID：15793449
> 
> 赞同：0
> 
> 时间：2013-04-03T16:54:10.463
> 
> 标签：processing, processing.js, processing-ide

我正在尝试将通过处理制作的 pde 嵌入到香草 html 页面中：

这是我的代码：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="application/javascript" src="processing-1.4.1.min.js"></script>
</head>
<body>
    <canvas width="700" height="821" data-processing-sources="jailmap2012capacity.pde"></canvas>
</body>
</html> 
```

加载页面时，什么也没有出现。

我没有在 Firefox 的控制台中显示任何错误，但我在 Chrome 中收到一个错误，显示第 6 行的 client.js 的“未捕获的类型错误：无法调用未定义的方法 'addListener'”，但我没有不认为这与问题有关。

处理 pde 在处理 IDE 中正确呈现。

想法？建议？想法？谢谢！

编辑：在脚本链接中将“源”更改为“src”。

**解决方案：** 处理 IDE 中生成的默认 .pde 似乎不包括在 Web 上使用所需的预加载标签。

供参考： http: [//processingjs.org/reference/preload/](http://processingjs.org/reference/preload/)

图像和字体需要在 .pde 的第一行预加载，如下所示：

```
/* @pjs preload="path/image_1.gif, path/image_2.gif"; font="path/font_1.eof, path/font_2.eof"; */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:49:14.907

javascript 不是“application/javascript”，它是“text/javascript”，如果您正在使用，请不要输入类型。这不是必需的。在哪个注释上：在顶部添加。有了这些，如果使用 localhost 或在线运行它并不能解决问题（除非您告诉浏览器允许从文件中获取文件 XHR，否则您无法可靠地从 file:/// 运行），请检查您的控制台日志并报告回来错误是什么。

# shell - 如何使用 shell 脚本从文件中获取变量的值？

> ID：15793452
> 
> 赞同：2
> 
> 时间：2013-04-03T16:54:15.470
> 
> 标签：shell, grep, configuration-files, ini

有一个文件`post_check.ini`我需要为其设置值：

```
Max_value=2 
```

我将如何从中获得`2`价值`Max_value`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:57:38.347

尝试

```
grep -Po '(?<=Max_value=).*' post_check.ini 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:59:59.153

```
Max_value=$(sed -n '/^Max_value=\([0-9]*\)$/s//\1/p' post_check.ini) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T01:00:36.610

我推荐使用 crudini，它是一个从 shell 操作 ini 文件的专用工具

```
value=$(crudini --get /usr/post_check.ini section Max_value) 
```

有关使用和下载的详细信息，请访问： [http ://www.pixelbeat.org/programs/crudini/](http://www.pixelbeat.org/programs/crudini/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:15:31.600

您可能会发现使用正确的配置文件解析器很有用。给定以下`.ini`文件：

```
$ cat post_check.ini
[section 1]
Max_value=123
[section 2]
Max_value=456 
```

以下`python`脚本将打印`123`：

```
import ConfigParser, os
config = ConfigParser.ConfigParser()
config.read('post_check.ini')
print config.get('section 1','Max_value') 
```

如果您需要使用配置文件，这是最可靠和可修改的方法。

# sql-server - 如何将xml值转换为表格

> ID：15793458
> 
> 赞同：0
> 
> 时间：2013-04-03T16:54:27.570
> 
> 标签：sql-server, xml, tsql

下面的代码只返回 6 行，只有第一个值。我想要 6 行有各自的值

```
 DECLARE @txml XML 
    SET @txml ='
    <row ch="&#x9;" unicode_value="9" cnt="3" />
    <row ch="&#xA;" unicode_value="10" cnt="5" />
    <row ch="&#xD;" unicode_value="13" cnt="5" />
    <row ch=" " unicode_value="32" cnt="962" />
    <row ch="&amp;" unicode_value="38" cnt="32" />
    <row ch="(" unicode_value="40" cnt="8" />
    '
    SELECT x.value('(/row/@cnt)[1]', 'int') AS cnt
    FROM  @txml.nodes('/row') AS tbl( x ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:57:57.703

您正在获取第一项值，因为这就是您的 XPath 表达式的定义方式：`'(row/@cnt)[1]'`

`[1]`第一次出现匹配`row/@cnt`表达式的状态，`cnt`从第一个`<row>`元素获取属性值。

将您的查询更改为：

```
SELECT x.value('@cnt', 'int') AS cnt
FROM  @txml.nodes('/row') AS tbl( x ) 
```

它将`cnt`获取当前元素的属性值`<row>`，并不总是第一个。

**[演示](http://sqlfiddle.com/#!3/d41d8/11881)**

# javascript - 一个像素填充，带画布

> ID：15793464
> 
> 赞同：1
> 
> 时间：2013-04-03T16:54:54.853
> 
> 标签：javascript, html, canvas, mapping, pixel

这可能是一个有点愚蠢的问题，但是......是否可以根据用户点击的位置逐个像素地填充 HTML 画布元素？

我想要一个空白画布，用户将一次单击一个像素，这将填充一种颜色，然后将该用户/像素输入数据库。

这将如何完成？我怎么知道什么像素，什么用户点击了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:37:48.780

是的，您可以根据鼠标点击单独设置每个画布像素。

以下是使用 context.getImageData 和 context.putImageData 设置单个像素的方法：

```
 function setPixel(x, y, red, green, blue) {
        pixPos=( (~~x) + (~~y)) * 4;
        var pxData = ctx.getImageData(x,y,1,1);
            pxData.data[0]=red;
            pxData.data[1]=green;
            pxData.data[2]=blue;
            pxData.data[3]=255;
            ctx.putImageData(pxData,x,y);
    } 
```

通过添加这样的事件侦听器，您可以获得鼠标单击的 X/Y 位置：

```
 // get the position of the canvas relative to the web page
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    // tell the browser to send you mouse down events
    // Here I use jquery -- be sure to add jquery or just do addEventListener instead
    $("#canvas").mousedown(function(e){handleMouseDown(e);});

    // handle the mousedown events that the browser sends you
    function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      setPixel(mouseX,mouseY,red,green,blue);
    } 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/wtStf/](http://jsfiddle.net/m1erickson/wtStf/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    var red=255;
    var green=0;
    var blue=0;

    function setPixel(x, y, red, green, blue) {
        pixPos=( (~~x) + (~~y)) * 4;
        var pxData = ctx.getImageData(x,y,1,1);
            pxData.data[0]=red;
            pxData.data[1]=green;
            pxData.data[2]=blue;
            pxData.data[3]=255;
            ctx.putImageData(pxData,x,y);
    }

    function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      setPixel(mouseX,mouseY,red,green,blue);
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

**[编辑附加问题]**

您可以轻松地修改代码以设置像素块，如下所示：

```
var blockWidth=25;
var blockHeight=25;

function setPixel(x, y, red, green, blue) {
    pixPos=( (~~x) + (~~y)) * 4;
    var pxData = ctx.getImageData(x,y,blockWidth,blockHeight);
    for(var n=0;n<blockWidth*blockHeight;n++){
        pxData.data[n*4+0]=red;
        pxData.data[n*4+1]=green;
        pxData.data[n*4+2]=blue;
        pxData.data[n*4+3]=255;
    }
        ctx.putImageData(pxData,x,y);
} 
```

# c++ - 如何同时在多个 .cpp 和头文件中使用向量？

> ID：15793465
> 
> 赞同：0
> 
> 时间：2013-04-03T16:54:57.223
> 
> 标签：c++

我有一个 main.cpp 和一些类，它们中的每一个都定义在两个文件中：一个头文件和一个 .cpp 文件。在 main.cpp 我有一个二维向量。我想在类的成员函数中使用这个向量。首先我尝试包含主文件，但我收到了重新定义错误。之后我尝试在另一个 .h 文件中定义向量。但这也没有用。所以我应该怎么做才能在定义一些类时使用这个向量，这样它就可以保存成员函数所做的更改。

不幸的是，向量是全球性的！

有关更多信息，此向量是游戏板。这个游戏有一些对象：怪物、人类、宝藏和一些陷阱。该板在主要功能之前是全局定义的。main.cpp 中有一些函数使用了这个板，而我上面提到的 3 行的类在其成员函数中使用了这个板。

是使用'extern'的解决方案吗？（我不知道它是什么，我只是在答案中看到它！-如果它是解决方案，我应该搜索一下。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:11:17.127

你可以这样写：

**啊**

```
extern vector< vector<int> > vec2D; //declare the 2d vector here 
```

**a.cpp**

```
#include "a.h"    
vector< vector<int> > vec2D;  //define the 2d vector here 
```

**主文件**

```
#include "a.h"
//use the 2d vector here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:20:42.150

主文件

```
#include <vector>

std::vector<std::vector<int>> myArray;

int main(int argc, char **argv)
{
   // blah...
   myArray.add(5);
} 
```

并在您的其他文件中：

```
#include <vector>

extern std::vector<std::vector<int>> myArray; 
```

使用**extern**关键字可以告诉编译器“嘿，这个对象在这里，它不存在......但别担心！一旦链接器组装编译的对象，你就会找到它！”。

也可以使用“ **extern** ”关键字来加载序列化数据（如bmp2c，它制作一个包含图片二进制数据的.c文件）

编辑：另外，重要的是这两个对象具有完全相同的名称（区分大小写）。

# javascript - 使用 Javascript 验证日期输入

> ID：15793467
> 
> 赞同：0
> 
> 时间：2013-04-03T16:55:04.787
> 
> 标签：javascript, validation, date

我的表单中有一个输入字段日期，并希望添加 Javascript 验证以确保其始终大于今天的日期。我尝试了以下方法，但是当用户单击输入字段并进行更改时，似乎没有调用该函数。

```
<input type="text" name="InsertRecordGuestOrders_Delivery_date" id="InsertRecordGuestOrders_Delivery_date" value=""/>

<script type="text/javascript">

function validateDate()
{
var del_date = document.getElementById('InsertRecordGuestOrders_Delivery_date').value;

if (Date.parse(del_date) < Date.now()) {
    document.getElementById('InsertRecordGuestOrders_Delivery_date').value = '';
    alert("Delivery date has to be later than today");
    }
}

document.getElementById('InsertRecordGuestOrders_Delivery_date').onChange = validateDate();

</script> 
```

关于我做错了什么有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:57:25.690

您希望将`validateDate`函数分配给`onchange`属性，而不是执行函数并分配其返回值。改变这个：

```
document.getElementById('...').onChange = validateDate(); 
```

对此：

```
document.getElementById('...').onChange = validateDate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:01:39.277

这一行：

```
document.getElementById('InsertRecordGuestOrders_Delivery_date').onChange = validateDate(); 
```

应该：

```
document.getElementById('InsertRecordGuestOrders_Delivery_date').onchange = validateDate; 
```

注意括号不见了。如果您立即调用它，您将分配返回值`validateDate()`作为 onchange 处理程序。您希望将函数本身分配为处理程序，而不是函数的返回值。

另外，应该是`onchange`，不是`onChange`。

# sql - 消除 SQL 命令的“不在”

> ID：15793469
> 
> 赞同：0
> 
> 时间：2013-04-03T16:55:10.007
> 
> 标签：sql, oracle

我想取一个 Oracle 表的样本，但不包括另一个表中的条目。我有一个当前有效的查询，但我很确定当子选择获得超过 1000 条记录时它会爆炸。

```
select user_key from users sample(5)
where active_flag = 'Y'
and user_key not in (
    select user_key from user_validation where validation_state <> 'expired'
); 
```

如果*没有*`not in`. _ 我曾想过使用`minus`，但随着新条目被添加到 user_validation 表中，我的样本量将继续下降。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:38:50.540

您可以使用以下命令执行此操作`left outer join`：

```
select *
from (select u.user_key,
             count(*) over () as numrecs
      from users u left outer join
           user_validation uv
           on u.user_key = uv.user_key and
              uv.validation_state <> 'expired'
      where u.active_flag = 'Y' and uv.user_key is null
     ) t
where rownum <= numrecs * 0.05 
```

您正在使用示例子句。目前尚不清楚您是否只想要您选择的 5% 中的不匹配数据，或者您是否想要 5% 的不匹配数据。这是后者。

编辑：根据作者的评论添加示例：

```
select user_key from (
  select u.user_key, row_number() over (order by dbms_random.value) as randval
  from users u 
    left outer join user_validation uv 
    on u.user_key = uv.user_key 
    and uv.validation_state <> 'expired'
  where u.active_flag = 'Y' 
  and uv.user_key is null
) myrandomjoin where randval <=100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:03:28.993

```
select us.user_key
from users us -- sample(5)
where us.active_flag = 'Y'
and NOT EXISTS (
    SELECT *
    from user_validation nx
    where nx.user_key = us.user_key
    AND nx.validation_state <> 'expired'
    ); 
```

顺便说一句：我注释掉了示例（5），因为我不知道它是什么意思。（但我坚信这无关紧要）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:58:55.553

```
select u.user_key from users u, user_validation uv
where u.active_flag = 'Y'
and u.user_key=uv.user_key 
uv.validation_state= 'expired'; 
```

这是一个双重否定查询，x不在未过期ID列表中，相当于x在过期ID列表中，这就是我所做的，除了将子查询更改为连接。

# opengl - 如何在 GLSL 中的几何着色器上获得少量顶点

> ID：15793475
> 
> 赞同：0
> 
> 时间：2013-04-03T16:55:25.843
> 
> 标签：opengl, glsl, shader, geometry-shader

顶点着色器处理后我需要得到 4 个顶点。具有目标的原始（四边形）绘图：GL_TRIANGLE_STRIP。

我的代码：

```
layout(lines_adjacency) in;
layout(triangle_strip, max_vertices = 4) out;

in vs_output
{
   vec4 color;
} gs_in[];

out gs_output
{
   vec2 st   ;
   vec4 color;
} gs_out;

void main()
{
   gl_Position  = gl_in[0].gl_Position;
   gs_out.st    = vec2(0.0f, 0.0f);
   gs_out.color = gs_in[0].color;
   EmitVertex();

   gl_Position  = gl_in[1].gl_Position;
   gs_out.st    = vec2(0.0f, 1.0f);
   gs_out.color = gs_in[1].color;
   EmitVertex();

   gl_Position  = gl_in[2].gl_Position;
   gs_out.st    = vec2(1.0f, 0.0f);
   gs_out.color = gs_in[2].color;
   EmitVertex();

   gl_Position  = gl_in[3].gl_Position;
   gs_out.st    = vec2(1.0f, 1.0f);
   gs_out.color = gs_in[3].color;
   EmitVertex();

   EndPrimitive();
} 
```

编译器抛出错误：“数组索引超出范围”

我如何在几何着色器上获得 4 个顶点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:29:03.100

> 具有目标的原始（四边形）绘图：GL_TRIANGLE_STRIP。

原始类型必须与您的输入原始类型匹配。只需用 绘制`GL_LINES_ADJACENCY`，每 4 个顶点为一个独立的四边形。

更好的是，不要再用几何着色器破坏你的表现了。最好将纹理坐标作为输入传递。或者，如果做不到这一点，请在顶点着色器中执行此操作：

```
out vec2 st;
const vec2 texCoords[4] = vec2[4](
  vec2(0.0f, 0.0f),
  vec2(0.0f, 1.0f),
  vec2(1.0f, 0.0f),
  vec2(1.0f, 1.0f)
);

void main()
{
  ...

  st = texCoords[gl_VertexID % 4];

  ...
} 
```

假设您使用`glDrawArrays`而不是`glDrawElements`.

# django - Django 模板动态 URL

> ID：15793478
> 
> 赞同：0
> 
> 时间：2013-04-03T16:55:33.960
> 
> 标签：django, dynamic, django-templates, href

假设我有一组重复使用 HTML 块的模板。我想将重用的 HTML 放入一个`{% include %}`或`{% block reused-stuff %}`但其中一个 HTML 标记是`href`我似乎无法动态生成的。（这类似于面包屑问题。）

以下是重复 HTML 的示例：

```
<td><a href="{% url analytics:buyer-stats:brand client.slug %}">{{ row.brand }}</a></td>
<td>{{ row.num_leads }}</td>
<td>{{ row.num_sold }}</td>
<td>{{ row.revenue }}</td>
<td>{{ row.scrub_rate|default_if_none:"N/A" }}</td> 
```

注意第一个`<td>`包括`href`to `analytics:buyer-stats:brand`。我需要将该值动态更改为其他几个值（取决于使用此包含或块的模板）。即`analytics:buyer-stats:offer`,`analytics:buyer-stats:client`等

关于如何在模板端完成此操作的任何建议？`row`使用 传递对象很容易`with row=my_data`，但是如何传递 url 值？

编辑：这个项目使用 Django 1.4 和 Python 2.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:03:07.913

这种语法在 Django 1.5 中无效，正因为如此。您现在必须使用变量或用引号括起来的文字字符串作为 url 名称。这使得做你喜欢的事情变得容易：为视图名称定义一个上下文变量，并在 url 标记中使用它。

# c# - 使用 C# 获取带有 *.tif 文件掩码的目录中的文件

> ID：15793479
> 
> 赞同：3
> 
> 时间：2013-04-03T16:55:35.213
> 
> 标签：c#, winforms, dos

所以，我觉得问这个很蹩脚，但我有点难过。我正在尝试获取以 tif 结尾的目录中的文件列表......只有 tif ......不是 tiff。所以，我在 C# 中做了这个......

```
Directory.GetFiles(path, "*.tif", SearchOption.TopDirectoryOnly); 
```

我希望它只返回 tif 文件，但事实并非如此。我也得到 tiff。我想如果我提供面具***.tif？****那会让我两个都得到，但不是面具*****.tif**。我也在命令提示符下尝试了它，并且在 DOS 中我也得到了两者。我在这里错过了什么吗？这对我来说似乎是错误的。我想我可以在之后对结果进行消毒，但如果我不必这样做，那将是最好的。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:01:43.030

来自[MSDN：](http://msdn.microsoft.com/en-us/library/ms143327.aspx)

> 在 searchPattern（例如，“*.txt”）中使用星号通配符时，匹配行为会因指定文件扩展名的长度而异。文件扩展名**恰好为三个字符的 searchPattern 返回扩展名为三个或更多字符**的文件，其中前三个字符与 searchPattern 中指定的文件扩展名匹配。文件扩展名为一个、两个或三个以上字符的 searchPattern 仅返回扩展名与 searchPattern 中指定的文件扩展名完全匹配的文件。**使用问号通配符时，此方法仅返回与指定文件扩展名匹配的文件。**例如，给定目录中的两个文件“file1.txt”和“file1.txtother”，“file?.txt”的搜索模式只返回第一个文件，而“file*.txt”的搜索模式返回两个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:00:43.733

这就是[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)的工作方式。从手册：

> 在 searchPattern 中使用星号通配符（例如“*.txt”）时，扩展名正好是三个字符长时的匹配行为与扩展名长度多于或少于三个字符时的匹配行为不同。文件扩展名正好为三个字符的 searchPattern 返回具有三个或更多字符扩展名的文件，其中前三个字符与 searchPattern 中指定的文件扩展名匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:08:01.213

`Directory.GetFiles`内部使用[`FindFirstFile`来自 Win32 API 的函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)。

从以下文档`FindFirstFile`：

> • 搜索包括长文件名和短文件名。

具有长文件名的文件`asd.tiff`将具有短文件名`asd~1.tif`，这就是它出现在结果中的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T22:01:54.173

匹配的字符扩展名超过三个，**除非**路径位于网络共享（或映射的驱动器）上。由于某种原因，该模式仅匹配远程驱动器上的长文件名。**

# java - Java中的线程同步

> ID：15793483
> 
> 赞同：1
> 
> 时间：2013-04-03T16:55:38.540
> 
> 标签：java, multithreading, synchronization

你有一个存储对象 O。

假设您在一个线程中有 n 个读取器方法和一个写入器方法。如果 writer 方法被线程调用，则没有一个 reader 方法应该能够访问 O，但是如果 reader 方法访问 O，则任何其他 reader 可以访问 O，但不能访问 writer。我可以使用 Java 中的“同步”语句以某种方式实现此行为吗？如果没有：我还能如何实现这一目标？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T16:57:28.907

你可以使用一个[`ReadWriteLock`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html). 您将它分配到读写器线程可以访问它的地方。也许将它传递给他们的构造函数。

```
ReadWriteLock readWriteLock = new ReentrantReadWriteLock(); 
```

读者会这样做：

```
Lock lock = readWriteLock.readLock();
lock.lock();
try {
  // do read operations here...
} finally {
  lock.unlock();
} 
```

作家会这样做：

```
Lock lock = readWriteLock.writeLock();
lock.lock();
try {
  // do write operations here...
} finally {
  lock.unlock();
} 
```

# c# - 相对于另一个元素定位一个元素

> ID：15793484
> 
> 赞同：3
> 
> 时间：2013-04-03T16:55:41.343
> 
> 标签：c#, winforms, layout, position, element

我的表单中有两个标签。第二个在第一个的下方。在列表框索引更改时，它们都填充了文本，并且它们都设置了 MaximumSize 属性，因此它们只能垂直增长。当上面的标签填充了足够长的字符串时，它的内容就会覆盖在第二个标签上。

有没有简单的方法将元素的位置绑定到另一个元素的高度？或者我应该以编程方式根据所选元素的高度更改位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:57:39.653

除了以编程方式响应 SizeChanged，您还可以使用 FlowLayoutPanel...

# symfony - 带有两个实体管理器的 symfony 教义手动绑定选择标签

> ID：15793486
> 
> 赞同：2
> 
> 时间：2013-04-03T16:55:42.720
> 
> 标签：symfony, doctrine-orm

我用谷歌搜索了很多试图找到我的问题的答案，但没有运气。

我在两个不同的数据库中有两个表，`db1.pages`我`db2.layouts`已经定义了两个实体管理器，我可以成功地将这两个管理为不相关的实体。

我的问题在 table 上`db1.pages`，我有一`layout_id`列包含对该`db2.layouts.id`列的引用，我没有在两者之间创建关联，因为据我了解，学说不支持。我成功地`PageType`使用以下代码显示了可能布局的选择列表：

```
$builder
  ->add('name', null, array('label' => 'Name'))
  ->add('label', null, array('label' => 'Title'))
  ->add('home', null, array('label' => 'Homepage'))
  ->add('layoutId', 'entity', array(
          'class' => 'USGMCMSBundle:Layouts',
          'property' => 'label',
          'label' => 'Layout',
      )) 
```

但它没有选择与存储到`layoutId`. 有没有办法选择当前选定的项目并在用户选择其他项目时保持同步？

也许使用`EventSubscriber`? 但在哪个阶段？还是有更好的解决方案？

希望我说清楚了（对不起我的英语）

# java - 在java中创建一个评级系统

> ID：15793488
> 
> 赞同：0
> 
> 时间：2013-04-03T16:55:53.647
> 
> 标签：java, statistics, rating

我正在尝试对数字列表进行评分，例如。[297, 720, 840, 903, 1110, 1170] 在 1 到 10 的范围内，10 是最低的，1 是最高的。

所以 list.get(0) 将是 9/10 或 10/10，而 list.get(2) 将是 10 中的 5 或 6。

我怎样才能在java中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:06:13.390

我建议类似：`note = 10 - 9 * (value - minValue) / (maxValue - minValue)`

```
 List<Integer> list = Arrays.asList(297, 720, 840, 903, 1110, 1170);
    Collections.sort(list);
    Integer min = list.get(0);
    Integer max = list.get(list.size() - 1);
    List<Integer> notes = new ArrayList<Integer>();
    for (Integer i : list) {
        notes.add(10 - (int) 9.0 * (i - min) / (max - min));
    }
    System.out.println(notes); 
```

这使：

```
[10, 6, 5, 4, 2, 1] 
```

# c# - C#中的命令行输出验证

> ID：15793489
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:55:58.653
> 
> 标签：c#, .net, command-line

我在实际命令提示符下的输出如下所示：

```
Name:   My Software
Version:  1.0.1
Installed location: c:\my folder 
```

我正在尝试通过 c# 代码获取此输出

```
System.Diagnostics.ProcessStartInfo procStartInfo = new System.Diagnostics.ProcessStartInfo("cmd", "/c " + "my command to execute");   

// The following commands are needed to redirect the standard output.
// This means that it will be redirected to the Process.StandardOutput StreamReader.
procStartInfo.RedirectStandardOutput = true;
procStartInfo.UseShellExecute = false;

// Do not create the black window.
procStartInfo.CreateNoWindow = true;

// Now we create a process, assign its ProcessStartInfo and start it
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.StartInfo = procStartInfo;
proc.Start();

// Get the output into a string
string result = proc.StandardOutput.ReadToEnd();
string[] lines = result.Split(new string[] { System.Environment.NewLine, }, System.StringSplitOptions.None);
foreach (string tmp in lines)
{
    if (tmp.Contains("Version"))
    {
        isAvailable= true; 
    }
} 
```

我不想只检查版本标签，我正在尝试获取版本值并进行比较，例如，如果值为 1.0.1，我想要该值并与 2.0.0 进行比较。

我可以使用`indexof`(like `result.IndexOf("Version:");`) - 但这并没有让我了解版本的价值

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:07:32.133

您应该使用[.NET Version 类](http://msdn.microsoft.com/en-us/library/hdxyt63s.aspx)和它的[CompareTo(Object) 方法](http://msdn.microsoft.com/en-us/library/s3bf0xb2.aspx)来进行比较。

```
var input = new Regex(@"(?<=Version:)\s*(.*)").Matches(@"Name:   My Software
Version:  1.0.1
Installed location: c:\my folder")[0].Value.Trim();

var a = new Version(input);
var b = new Version("2.0.0");

int comparison = a.CompareTo(b);

if(comparison > 0)
{
    Console.WriteLine(a + " is a greater version.");
} 
else if(comparison == 0)
{
    Console.WriteLine(a + " and " + b +" are the same version.");
}   
else
{
    Console.WriteLine(b + " is a greater version.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:03:59.503

```
string versionText;
var stuff = tmp.Split(":");
if(stuff[0].Trim() == "Version")
{
    isAvailable = true;
    versionText = stuff[1].Trim();
}

if(versionText == expectedVersionText)  // Do something specfic. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:11:16.600

试试下面...它会帮助你...

而不是`Contains`使用`IndexOf`...检查单词

```
if (tmp.IndexOf("Version") != -1)
{
isAvailable = true;
string[] info = tmp.Split(':');
string version = info[1].Trim();
Console.WriteLine(version);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:01:45.250

您可能想使用正则表达式：

```
^Version:\s*(.*)$ 
```

应该与括号内的版本号匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T17:18:30.790

```
 string sought = "Version:";
            foreach (string tmp in lines)
            {
                if (tmp.Contains(sought))
                {
                    int position = tmp.IndexOf(sought) + sought.Length;
                    string version = tmp.Substring(tmp.IndexOf(sought) + sought.Length);
                    string[] versionParts = version.Split('.');
                    VersionCompare(versionParts, new string[]{"2", "0", "0"});
                }
            }
/// <summary>Returns 0 if the two versions are equal, else a negative number if the first is smaller, or a positive value if the first is larder and the second is smaller.</summary>
private int VersionCompare(string[] left, string[] right)
{
    for(int i = 0; i < Math.Min(left.Length, right.Length); ++i)
    {
        int leftValue = int.Parse(left[i]), rightValue = int.Parse(right[i]);
        if(leftValue != rightValue) return leftValue - rightValue;
    }
    return left.Length - right.Length;
} 
```

# asp.net - ASP.NET 标记不在 OnClientClick 中展开

> ID：15793494
> 
> 赞同：2
> 
> 时间：2013-04-03T16:56:17.077
> 
> 标签：asp.net, webforms

我有以下两个按钮：

```
<asp:Button ID="btnVote" runat="server" Text="Vote!" PostBackUrl="<%$RouteUrl:id=2, routename=Results%>"/><br />
<asp:Button ID="btnResults" runat="server" Text="Results ->" OnClientClick="location.href='<%$RouteUrl:id=2, routename=Results%>'"/> 
```

第一个`<%$ %>`按预期扩展，而第二个（相同！）按类型使用（= 未扩展）。我很新`ASP.NET`，来自`PHP`，这是来自我的学习/测试站点。
我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:10:44.913

ASP.NET 表达式语法 ( `<%$ ... %>`) 只能用于直接将值分配给服务器控件的属性。我认为您遇到的问题是表达式语法嵌入在字符串中，而不是直接绑定到“OnClientClick”属性。

尝试将第二个按钮更改为

```
<asp:Button ID="btnResults" runat="server" Text="Results ->" OnClientClick="<%$RouteUrl:id=2, routename=Results%>" /> 
```

如果可行，您可能需要修改表达式以返回所需的额外文本。或者，创建另一个返回所述信息的路由（包含在“location.href”属性中的当前值）。

您可以在此处找到有关这些表达式的更多信息：[ASP.NET 表达式概述](http://msdn.microsoft.com/en-us/library/d5bd1tad.aspx)。

# mysql - mySQL encrypt() 函数的objective-c实现

> ID：15793496
> 
> 赞同：0
> 
> 时间：2013-04-03T16:56:21.680
> 
> 标签：mysql, ios, objective-c

我有一个我不能放弃的带有散列密码的 mySQL 数据库。我需要复制 mySQL 的 encrypt() 函数，以便在我创建的 iOS 应用程序中登录的哈希创建保持一致。（我使用密码的前 2 个字符作为加密功能的盐）

有没有人这样做过？我尝试根据在其他地方找到的代码将以下类别添加到 NSString ，但结果字符串甚至不接近。（我在 NSData 上有一个 base64 类别，是的，我是 CCCrypt 呼叫的新手）

```
-(NSString*) encryptWithSalt:(NSString *)salt {
NSString *token = self;

const void *vplainText;
size_t plainTextBufferSize = [token length];
vplainText = (const void *) [token UTF8String];
CCCryptorStatus ccStatus;
uint8_t *bufferPtr = NULL;
size_t bufferPtrSize = 0;
size_t movedBytes = 0;

bufferPtrSize = (plainTextBufferSize + kCCBlockSizeDES) & ~(kCCBlockSizeDES - 1);
bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
memset((void *)bufferPtr, 0x0, bufferPtrSize);

uint8_t iv[kCCBlockSizeDES];
memset((void *) iv, 0x0, (size_t) sizeof(iv)); // zero out iv
const void *vkey = (const void *) [salt UTF8String];

ccStatus = CCCrypt(kCCEncrypt,
        kCCAlgorithmDES,
        kCCOptionPKCS7Padding | kCCModeCBC,
        vkey,
        kCCKeySizeDES,
        iv,
        vplainText,
        plainTextBufferSize,
        (void *)bufferPtr,
        bufferPtrSize,
        &movedBytes);

NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];

NSString* hash;
if (ccStatus == kCCSuccess) {
    hash = [myData base64EncodedString];
}

return hash;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:17:40.833

该`crypt()`功能无法使用 CCCrypt 模拟，因为盐用于更改 DES 电子盒。这使得使用中的密码不再是真正的 DES。

但是，它仍然只是`crypt()`功能。直接调用它：

```
- (NSString*) encryptWithSalt:(NSString *)salt {
    return [NSString stringWithUTF8String:crypt([self UTF8String], [salt UTF8String])];
} 
```

顺便说一句，使用密码的前两个字符作为 salt 是一个**巨大**的安全漏洞，因为它将密码搜索空间缩小到六个字符（因为前两个字符被 salt 泄露）。

# c++ - Boost 进程间分配器 - 管理文件大小

> ID：15793497
> 
> 赞同：5
> 
> 时间：2013-04-03T16:56:20.133
> 
> 标签：c++, boost-interprocess

首先，我将概述带有源的域。

```
namespace bip=boost::interprocess;

typedef bip::allocator<int, bip::managed_mapped_file::segment_manager> allocator;
typedef bip::vector<int, allocator> vector;

bip::managed_mapped_file m_file(open_or_create, "./file", constant_value);    
bip::allocator alloc(m_file.get_segment_manager());
bip::vector *vec = m_file.find_or_construct<vector>("vector")(alloc); 
```

我不关心底层文件的最终大小，但我无法预见这个值。是否有任何增强机制可以处理调整基础文件的大小？或者我必须自己抓住 bip::bad_alloc 并关心这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-11T22:40:54.993

阅读文档的[这一部分](http://www.boost.org/doc/libs/1_55_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_memory_segment_advanced_features.growing_managed_memory)。

`grow()`您有可能是您需要的静态成员函数：

```
bip::managed_mapped_file::grow("./file", extra_bytes); 
```

但是您必须确保没有人在使用该文件，这就是他们称之为*离线生长*的原因。根据问题，这可能是不可能的。

# weblogic - 释放 XASession XAResource - 手动登记

> ID：15793507
> 
> 赞同：0
> 
> 时间：2013-04-03T16:57:09.613
> 
> 标签：weblogic

在我们的 MDB 中，我们在 DB 和 Tibco 外部服务器队列之间有一个 Xatransaction。我们在下面使用了外部服务器 XaResouce。

MDB 位于 Weblogic 服务器 10.3.6、JDK 1.6 上。

```
init()---
        XAConnection tempXAConn = xaConn;

        TibjmsXAConnectionFactory xaConnFactory = (TibjmsXAConnectionFactory)ServiceLocator.getInstance().getJNDIReferencedObject(JMS_Q_CONNECTION_FACTORY_JNDI_XA);

       xaConn = xaConnFactory.createXAConnection(JMS_USER,JMS_PSWD);

getsession()---
XASession xaSession = xaConn.createXASession();
TransactionHelper txHelper = TransactionHelper.popTransactionHelper();
Transaction tx = txHelper.getTransaction();
tx.enlistResource(xaSession.getXAResource()); 
```

交易运作良好。我们正在使用一个连接并为每条消息创建新的 xasession。

但问题是释放资源。在几千条消息之后，我看到堆包含相同数量的 Tibjmsxasession、Tibjmsxaresource、Tibjmslongkey 对象。这会导致内存不足的问题。

我们不能在事务之间使用 session.close()。

事务是容器管理的。只有登记是手动完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:35:48.520

我用了

tx.registerSynchronization(new SessionSynchronization());

SessionSynchronization 实现了 Synchronization，有 afterCompletion 和 beforeCompletion 2 个方法。

session.close 可以在 afterCompletion 内部调用。session 可以在 threadlocal 中维护。

# iis - VS 编译的 TypeScript 代码不能在 Chrome/FF 中运行？

> ID：15793512
> 
> 赞同：0
> 
> 时间：2013-04-03T16:57:26.403
> 
> 标签：iis, utf-8, visual-studio-2012, typescript, web-essentials

**更新**

> 您可以阅读下面的所有详细信息.. 但基本上，现在不管我做什么 VS2012 Typescript 正在编译和保存 ANSI 文件......
> 
> 我可以手动将文件重新保存为 UTF-8 并且一切正常..
> 
> 我在 Windows 8 上，我已经在 3 个不同城市的 5 个不同开发人员使用的 5 台不同机器上重现了这个问题......
> 
> 唯一的共同点是 Windows 8

我有一个示例项目，它在 IE 中运行良好，但在 Chrome 或 FF 中根本没有。看起来文件编码不正确，IE 正在解决它，但 Chrome 和 FF 不是......

例如，这里是编译后的 JavaScript 文件的前几个赞

```
/// <reference path="../Framework/Core.ts" /> 
var MVVM; 
(function (MVVM) {
var Application = (function () {
    function Application() {
        this.core = undefined;
        this.templatePath = "Atlatl/Templates/";
        this.viewPath = "Atlatl/Views/";
        this.dependentScriptsPath = "Scripts/";
        this.viewModelsPath = "Atlatl/App/ViewModels/";
        this.frameworkPath = "Atlatl/Framework/";
        this.pages = {
        }; 
```

这是 Chrome “认为”它从 IIS（8 和 8 express）接收到的内容：

> 昨天爼晥牥湥散潆瑡㵨⸢⼮墙浡睥牯⽫潃敲琮≳⼠ാ瘊牡䴠噖㭍਍昨天湵潩⁮䴨噖⥍笠਍†††庆⁲灁汰捩瑡潩⁮‽无聊潩⁮⤨笠

更新

这是文件的 chrome 调用的标题

- 要求 -

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Host:localhost:40665
If-Modified-Since:Wed, 03 Apr 2013 16:33:17 GMT
If-None-Match:"153551f28830ce1:0"
Referer:http://localhost:40665/
User-Agent:Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31 
```

- 回复 -

```
Accept-Ranges:bytes
Date:Wed, 03 Apr 2013 17:06:28 GMT
ETag:"153551f28830ce1:0"
Server:Microsoft-IIS/8.0
X-Powered-By:ASP.NET
X-SourceFiles:=?UTF-8?B?QzpcUHJvamVjdHNcUmFuZG9tV29ya1xNdmNBcHBsaWNhdGlvbjEyXE12Y0FwcGxpY2F0aW9uMTJcQXRsYXRsXEFwcFxhcHAuanM=?= 
```

里面没什么好笑的...

我尝试了以下所有编译方法，但都失败了，都是一样的

1) 仅在 VS 中使用 TypeScript 编译器

2) 使用 Web Essentials

A) 设置和不设置 UTF-8 BOM 标志为真

B）在构建时重新编译和不重新编译

我可以提供一个示例项目，或者如果您阅读本教程，您将看到我在说什么[https://github.com/CatapultSystems/atlatl/wiki/Visual-studio-hello-world](https://github.com/CatapultSystems/atlatl/wiki/Visual-studio-hello-world)

我完全不知道是什么原因造成的……而且我全神贯注于发生了什么……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:40:42.107

我认为这与编译或 TypeScript 无关。

生成的 JavaScript 文件没有 BOM 是可以的。

响应应该包含`Content-Length: XXXX`和`Content-Type: application/javascript`- 而你的没有。这似乎是一种`304 Not Modified`回应，而不是一种回应`200 OK`。

您是否尝试过使用 Ctrl+F5 在 Chrome 中强制刷新？

**更新**

在记事本中重新保存选择 UTF-8 的 JavaScript 文件只是添加了 BOM（假设 JS 文件的内容是 7 位 ASCII）。

您应该能够通过设置 Web Essentials 添加 BOM 或添加虚拟字符串常量来产生相同的效果

```
var dummyChars = "Ù"; 
```

到您的 TypeScript 文件。完成此操作后，JavaScript 文件应与从记事本生成的保存文件相同。

# javascript - If/The Javascript 显示 HTML 代码

> ID：15793517
> 
> 赞同：1
> 
> 时间：2013-04-03T16:57:37.783
> 
> 标签：javascript, html, canvas, if-statement

我有一些 html5 和 javascript 代码来创建一个旋转的轮盘赌。它分为 14 个结果。我的问题是，我怎样才能获得一些独特的 HTML 代码来显示每个轮子的结果。例如，如果轮子落在 Business 上，则一些文本会出现在轮子下方，其中包含有关 Business 的信息。

这是我的 HTML 代码，下面是一个工作示例的链接：

```
<!--[if IE]><script type="text/javascript" src="/sites/default/files/1010/source/excanvas.js"></script><![endif]-->
<input type="button" value="spin" onclick="spin();" style="float: left;" />
<canvas id="wheelcanvas" width="800" height="750"></canvas>
<script type="application/javascript">
  var colors = ["#B8D430", "#3AB745", "#029990", "#3501CB",
               "#2E2C75", "#673A7E", "#CC0071", "#F80120",
               "#F35B20", "#FB9A00", "#FFCC00", "#FEF200", "#B2DF00", "#5C8300"];
  var classes = ["Business", "Office Education", "Continuing Care Assistant", "Practical Nursing",
                     "Primary Care Paramedic", "Early Childhood Education", "Cooking", "Electrician",
                     "Heavy Equipment Operator", "Industrial Mechanic - Millwright", "Plumbing & Pipefitting", "Truck Driver Training", "Welding", "Power Engineering"];

  var startAngle = 0;
  var arc = Math.PI / 7;
  var spinTimeout = null;

  var spinArcStart = 10;
  var spinTime = 0;
  var spinTimeTotal = 0;

  var ctx;

  function draw() {
    drawRouletteWheel();
  }

  function drawRouletteWheel() {
    var canvas = document.getElementById("wheelcanvas");
    if (canvas.getContext) {
      var outsideRadius = 300;
      var textRadius = 260;
      var insideRadius = 100;

      ctx = canvas.getContext("2d");
      ctx.clearRect(5,0,1000,1000);

      ctx.strokeStyle = "black";
      ctx.lineWidth = 2;

      ctx.font = 'bold 10px sans-serif';

      for(var i = 0; i < 14; i++) {
        var angle = startAngle + i * arc;
        ctx.fillStyle = colors[i];

        ctx.beginPath();
        ctx.arc(400, 400, outsideRadius, angle, angle + arc, false);
        ctx.arc(400, 400, insideRadius, angle + arc, angle, true);
        ctx.stroke();
        ctx.fill();

        ctx.save();
        ctx.shadowOffsetX = -1;
        ctx.shadowOffsetY = -1;
        ctx.shadowBlur    = 0;
        ctx.shadowColor   = "rgb(220,220,220)";
        ctx.fillStyle = "black";
        ctx.translate(400 + Math.cos(angle + arc / 2) * textRadius, 400 + Math.sin(angle + arc / 2) * textRadius);
        ctx.rotate(angle + arc / 2 + Math.PI / 2);
        var text = classes[i];
        ctx.fillText(text, -ctx.measureText(text).width / 2, 0);
        ctx.restore();
      } 

      //Arrow
      ctx.fillStyle = "black";
      ctx.beginPath();
      ctx.moveTo(400 - 4, 400 - (outsideRadius + 5));
      ctx.lineTo(400 + 4, 400 - (outsideRadius + 5));
      ctx.lineTo(400 + 4, 400 - (outsideRadius - 5));
      ctx.lineTo(400 + 9, 400 - (outsideRadius - 5));
      ctx.lineTo(400 + 0, 400 - (outsideRadius - 13));
      ctx.lineTo(400 - 9, 400 - (outsideRadius - 5));
      ctx.lineTo(400 - 4, 400 - (outsideRadius - 5));
      ctx.lineTo(400 - 4, 400 - (outsideRadius + 5));
      ctx.fill();
    }
  }

  function spin() {
    spinAngleStart = Math.random() * 10 + 10;
    spinTime = 0;
    spinTimeTotal = Math.random() * 3 + 4 * 1000;
    rotateWheel();
  }

  function rotateWheel() {
    spinTime += 30;
    if(spinTime >= spinTimeTotal) {
      stopRotateWheel();
      return;
    }
    var spinAngle = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
    startAngle += (spinAngle * Math.PI / 180);
    drawRouletteWheel();
    spinTimeout = setTimeout('rotateWheel()', 30);
  }

  function stopRotateWheel() {
    clearTimeout(spinTimeout);
    var degrees = startAngle * 180 / Math.PI + 90;
    var arcd = arc * 180 / Math.PI;
    var index = Math.floor((360 - degrees % 360) / arcd);
    ctx.save();
    ctx.font = 'bold 30px sans-serif';
    var text = classes[index]
    ctx.fillText(text, 400 - ctx.measureText(text).width / 2, 400 + 10);
    ctx.restore();
    document.getElementById('wheelResult').innerHTML = 'Test' + text;
  }

  function easeOut(t, b, c, d) {
    var ts = (t/=d)*t;
    var tc = ts*t;
    return b+c*(tc + -3*ts + 3*t);
  }

  draw();
</script>

<p id="wheelResult"></p> 
```

[http://www.ctrc.sk.ca/wheel.html](http://www.ctrc.sk.ca/wheel.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:18:59.203

有几种方法可以做到这一点，但这是我要做的方式。您可以使用 display:none 的 css 样式创建一个 div 标签，然后使用所需的信息对其进行设置，并根据需要隐藏和显示它。

例子：

```
<script>
    var htmlData = ['<h1>Business</h1><br><span>What is Business?</span><br>...', ...];
    ....
    function spin()
    {
        //Hide description box.
        document.getElementById('idDescriptionBox').style.display = 'none';

        spinAngleStart = Math.random() * 10 + 10;
        ....
    }
    ....
    function stopRotateWheel()
    {
        ....
        //Set description and display it.
        var descriptionBox = document.getElementById('idDescriptionBox');
        descriptionBox.innerHTML = htmlData[index];
        descriptionBox.style.display = 'block';
    }
    ....
</script>
<div id="idDescriptionBox" style="display:none;">
    <!--Description info in here-->
    ....
</div> 
```

# asp.net-mvc - ASP MVC3 - 将集合项传递到部分视图

> ID：15793520
> 
> 赞同：0
> 
> 时间：2013-04-03T16:57:42.017
> 
> 标签：asp.net-mvc, asp.net-mvc-3, list, asp.net-mvc-2, partial-views

我有一个`List`使用单独模型的集合 (a) 创建的视图模型。在我们的数据库中，我们有两个表：`BankListMaster`和`BankListAgentId`。“主”表的主键用作代理 ID 表的外键。

由于 Master/Agent ID 表具有一对多的关系，因此我创建的视图模型包含一个`List`对象`BankListAgentId`。在我们的编辑页面上，我希望能够显示与特定银行关联的任何和所有代理 ID，并让用户能够添加或删除它们。

我目前正在阅读[Steve Sanderson](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)关于编辑可变长度列表的博客文章。但是，从数据库中提取现有项目时，它似乎并未涵盖此特定场景。

我的问题是您能否将特定的集合项传递给局部视图，如果可以，您将如何正确地将其编码到局部视图中？下面的代码表明

`The name 'item' does not exist in the current context`

但是，我也尝试`for`在局部视图中使用带有索引的常规循环和这种语法：

`model => model.Fixed[i].AgentId`

但这只是告诉我该名称`i`在当前上下文中不存在。视图不会使用任何一种方法呈现。

下面是视图中的代码

```
@model Monet.ViewModel.BankListViewModel
@using (Html.BeginForm())
{
    <fieldset>
        <legend>Stat(s) Fixed</legend>
        <table>
        <th>State Code</th>
        <th>Agent ID</th>
        <th></th>
            @foreach(var item in Model.Fixed)
            {
                @Html.Partial("FixedPartialView", item)       
            }
        </table>
    </fieldset>
} 
```

这是部分视图

```
@model Monet.ViewModel.BankListViewModel

<td>
    @Html.DropDownListFor(item.StateCode,
        (SelectList)ViewBag.StateCodeList, item.StateCode)
</td>
<td>
    @Html.EditorFor(item.AgentId)
    @Html.ValidationMessageFor(model => model.Fixed[i].AgentId)
    <br />
    <a href="#" onclick="$(this).parent().remove();" style="float:right;">Delete</a>
</td> 
```

这是视图模型。它当前将固定/可变代理 Id 列表初始化为 10，但这只是启动和运行此页面的一种解决方法。最后，希望是允许列表根据需要变大或变小。

```
public class BankListViewModel
{
    public int ID { get; set; }
    public string BankName { get; set; }
    public string LastChangeOperator { get; set; }
    public Nullable<System.DateTime> LastChangeDate { get; set; }

    public List<BankListAgentId> Fixed { get; set; }
    public List<BankListAgentId> Variable { get; set; }
    public List<BankListAttachments> Attachments { get; set; }

    public BankListViewModel()
    {
        //Initialize Fixed and Variable stat Lists
        Fixed = new List<BankListAgentId>();
        Variable = new List<BankListAgentId>();

        Models.BankListAgentId agentId = new BankListAgentId();

        for (int i = 0; i < 5; i++)
        {
            Fixed.Add(agentId);
            Variable.Add(agentId);

        }

        //Initialize attachment Lists
        Attachments = new List<BankListAttachments>();
        Attachments.Add(new BankListAttachments());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:03:34.163

问题在于您的部分观点。在您的主视图中，在循环中，您正在传递一个`BankListAgentId`对象。但是，您的局部视图的模型类型是`@model Monet.ViewModel.BankListViewModel`.
此外，当不存在时，您正在尝试访问`item`在局部视图中调用的变量。与其`item`用于访问您的数据，`Model`不如在任何其他视图中使用。每个视图（甚至是部分视图）都有自己的模型类型。

您的局部视图应如下所示：

```
@model Monet.ViewModel.BankListAgentId

<td>
    @Html.DropDownListFor(model => model.StateCode,
        (SelectList)ViewBag.StateCodeList, Model.StateCode)
</td>
<td>
    @Html.EditorFor(model => model.AgentId)
    @Html.ValidationMessageFor(model => model.AgentId)
    <br />
    <a href="#" onclick="$(this).parent().remove();" style="float:right;">Delete</a>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:03:42.323

您传递到局部视图的模型是 BankListAgentId--- 因为您在创建局部视图时正在循环它们的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:07:54.620

到目前为止，你做的一切都是正确的。您正在遍历您的列表，为每个列表项调用部分并将该项目传递给部分。似乎您缺少的部分是当您将项目传递给部分时，该项目*成为*部分的模型。因此，您可以像在任何其他视图中一样与它进行交互，即`@Model.BankName`,`@Html.DisplayFor(m => m.BankName)`等。

# c++ - Windows 错误报告何时创建转储文件？是否可配置？这在 Windows 7 中是否发生了变化？

> ID：15793521
> 
> 赞同：6
> 
> 时间：2013-04-03T16:57:43.627
> 
> 标签：c++, windows, crash-reports, windows-error-reporting

我依靠[Windows 错误报告](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)为大型多线程应用程序创建完整的用户模式转储。我知道当我开始使用它时（2012 年初），这些转储包含所有应用程序内存，以及在应用程序崩溃时准确的所有线程的完整堆栈（引发未处理的异常等）。但在去年的某个未知时刻，WER 创建的故障转储发生了变化。它们仍然包含所有内存，但只显示一个线程，并且堆栈似乎来自进程已经关闭之后**：**

```
 ntdll.dll!_LdrpCallInitRoutine@16()  + 0x14 bytes   
    ntdll.dll!_LdrShutdownProcess@0()  + 0x141 bytes    
    ntdll.dll!_RtlExitUserProcess@4()  + 0x74 bytes 
    kernel32.dll!_UnhandledExceptionFilter@4()  + 0x18928 bytes 
```

这是一个使用 VS2010 SP1 编译的非托管（无法管理？）32 位 C++ 应用程序，在 64 位 Win7 SP1 上运行（并保持更新）。有谁知道去年改变了 WER 行为的任何 Windows 更新？除了“HKLM\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps\AppName.exe”之外，还有什么可配置的吗？

此外，通过调用“RaiseFailFastException”来终止应用程序仍然会导致良好的转储，并为所有线程提供有效的堆栈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T19:06:33.880

啊哈！第三方库正在调用 SetUnhandledExceptionFilter，这会阻止 Windows 错误报告获取原始异常。他们的处理程序进行了一些内部清理，然后调用了中止，此时 WER 终于能够创建转储。

对于遇到此类问题的任何人，我建议检查已安装的处理程序（SetUnhandledExceptionFilter、set_terminate 等的返回值）是否符合您的预期（如果您依赖 WER，则为 null，或者您自己的处理程序或 CrashRpt）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T17:08:46.383

最好让您的应用程序在崩溃时自行转储。你只需要调用[SetUnhandledExceptionFilter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680634%28v=vs.85%29.aspx)函数，指定回调。在回调中，使用转储类型的[MiniDumpWriteDump](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)函数。`MiniDumpWithFullMemory`

每当发生未处理的（由您的代码）异常时，都会调用您的异常过滤器。在回调中，最好枚举并挂起进程的所有其他线程。

您可能还需要为`SetUnhandledExceptionFilter`自己安装一个挂钩！为什么？好吧，**CRT 总是会禁用**任何已安装的异常过滤器，并且通过挂钩功能，您可以避免这种情况。

# python - 在 Tkinter 上制作滚动条

> ID：15793523
> 
> 赞同：2
> 
> 时间：2013-04-03T16:57:49.660
> 
> 标签：python, numpy, matplotlib, tkinter, scrollbar

我需要一个滚动条在元素下滚动，看到当从第一个窗口创建超过 30 个元素时，屏幕没有填充正确的模式：

```
import numpy as np
import matplotlib.pyplot as plt
from Tkinter import *
import tkMessageBox
import tkSimpleDialog
from matplotlib import pylab

prefixo = "vetor"

def makeWidgets():
    global entries
    window = Tk()

    window.title('Vetores')
    form = Frame(window)
    form.pack()
    entries = {}
    numero = tkSimpleDialog.askinteger("Vetores", "Digite o numero de vetores a serem usados:")

    for ix in range(numero):
        label = "%s %s" % (prefixo , ix + 1)
        lab = Label(form, text=label)
        ent = Entry(form)
        lab.grid(row=ix, column=0)
        ent.grid(row=ix, column=1)
        entries[label] = ent

    Button(window, text="Histograma",  command=histograma).pack(side=LEFT)
    Button(window, text="Media",  command=media).pack(side=LEFT)
    Button(window, text="Mediana", command=mediana).pack(side=LEFT)    
    window.mainloop()

    def pegavalores():
        valores = []
        for chave, entrada in sorted(entries.items()):
            valores.append(entrada.get())
        valores = np.asarray(valores, dtype=np.float64)
        return valores

    def histograma():
        histograma = pegavalores()
        pylab.grid(True)  
        plt.hist(histograma)
        plt.show()

    def media():
        media = pegavalores()
        elementos = len(media)
        valormedio = np.sum(media)/elementos
        tkMessageBox.showinfo("Media", valormedio)

    def mediana():
        mediana = pegavalores()
        resultado = np.median(mediana)
        tkMessageBox.showinfo("Mediana", resultado)

window = makeWidgets() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:07:11.237

您必须使用滚动条小部件（[http://effbot.org/tkinterbook/scrollbar.htm](http://effbot.org/tkinterbook/scrollbar.htm)）。不幸的是，它不适用于框架。当我使用 Tkinter 时，我发现这个扩展非常有用：

[http://tkinter.unpythonic.net/wiki/VerticalScrolledFrame](http://tkinter.unpythonic.net/wiki/VerticalScrolledFrame)

如果将它包含在脚本中，则很容易将小部件放在内部框架中以获得垂直滚动条，例如：

```
window.title('Vetores')
form = VerticalScrolledFrame(window)
form.pack(fill=BOTH, expand=1)
entries = {}
numero = tkSimpleDialog.askinteger("Vetores", "Digite o numero de vetores a serem usados:")

for ix in range(numero):
    label = "%s %s" % (prefixo , ix + 1)
    lab = Label(form.interior, text=label)
    ent = Entry(form.interior) ... 
```

# debugging - 如何使用 pdb 文件设置断点？

> ID：15793527
> 
> 赞同：1
> 
> 时间：2013-04-03T16:57:55.227
> 
> 标签：debugging

我需要在源项目不存在的部署机器上调试问题。我已经在那里复制了 pdb 文件，附加到进程并加载了我感兴趣的 dll 的符号。我想在定义为的类中的特定函数处设置断点

```
namespace Microsoft.ApplicationServer.Integration.Infrastructure.Deployment.ProvisioningService
{
   internal class LifeCycleManager : IntegrationStatelessComponentBase
   {
       private async Tasks.Task ProcessStartedDeploymentWorkflowsAsync() 
```

所以我为 Microsoft.ApplicationServer.Integration.Infrastructure.Deployment.ProvisioningService.LifeCycleManager.ProcessStartedDeploymentWorkflowsAsync 创建了一个新的函数断点

但它说“智能感知找不到指定的位置”。我还尝试在最后指定 () 并得到相同的结果。为什么它不起作用？

此外，即使我把它弄坏了，我也明白它只会在调试期间显示 JIT 编译的汇编代码。发生这种情况时，如何打开源文件并将其用于调试？我是否需要在 Visual Studio 中打开一个编译项目，或者我可以只指向源文件？

在我开枪之前请帮忙。

# laravel - Laravel 外观和紧耦合控制器

> ID：15793531
> 
> 赞同：1
> 
> 时间：2013-04-03T16:58:05.117
> 
> 标签：laravel, facade, tightly-coupled-code

我很难理解如何才能做到最好。我了解外观如何作为语法糖工作，以呈现清晰的静态代码布局风格，同时保持代码松耦合和可测试。

但是我有以下问题。每当我有一个控制器时，控制器都依赖于类的负载。让我们以输入类为例。每个控制器都是一个 IoC 容器，所以实际上这很好。因为如果我想用另一个类更改输入类。我只需要创建一个实现正确接口的新类。然而，这意味着我的应用程序中的每个控制器都依赖于相同的输入类。我理解对吗？

所以我读了这篇非常好的文章： http: [//www.nathandavison.com/posts/view/16/using-dependency-injection-and-ioc-in-laravel-4-controllers](http://www.nathandavison.com/posts/view/16/using-dependency-injection-and-ioc-in-laravel-4-controllers)

简而言之，它建议在您的控制器中使用依赖注入 (DI)。例如

```
class UsersController extends BaseController
{
    protected $response;
    protected $request;
    protected $validator;
    protected $hasher;
    protected $user;
    public function __construct(
        Response $response,
        \Illuminate\Http\Request $request,
        \Illuminate\Validation\Factory $validator,
        \Illuminate\Hashing\BcryptHasher $hasher,
        User $user
    ) {
        $this->response = $response;
        $this->request = $request;
        $this->validator = $validator;
        $this->hasher = $hasher;
        $this->user = $user;
    }
    public function getIndex()
    {
        return $this->response->make('Hello World!');
    }
} 
```

和

```
$app->bind('UsersController', function($app) {
    $controller = new UsersController(
        new Response,
        $app->make('request'),
        $app->make('validator'),
        $app->make('hash'),
        new User
    );
    return $controller;
}); 
```

这确实是有道理的，但这不是框架的理念，因为它绕过了外观......我想听听关于这种方法的意见。这是好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:15:21.150

我认为您一直在遵循与我刚刚回答的另一个人相同的教程。不要重复我自己，请看[我对他问题的回答](https://stackoverflow.com/a/15848849/280329)。

# java - Liferay 开发者客户端网络服务

> ID：15793532
> 
> 赞同：1
> 
> 时间：2013-04-03T16:58:05.370
> 
> 标签：java, eclipse, web-services, liferay

我按照这个[文档示例](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/soap-web-services)（或[这个链接](http://www.liferay.com/it/web/antonio.junior/blog/-/blogs/consuming-liferay-web-services)）来创建一个简单的 Web 服务客户端 liferay。

为什么此代码示例具有此导入：

```
import com.liferay.portal.model.CompanySoap;
import com.liferay.portal.model.UserGroupSoap;
import com.liferay.portal.service.http.CompanyServiceSoap;
import com.liferay.portal.service.http.CompanyServiceSoapServiceLocator; 
import com.liferay.portal.service.http.UserGroupServiceSoap;
import com.liferay.portal.service.http.UserGroupServiceSoapServiceLocator; 
import com.liferay.portal.service.http.UserServiceSoap;
import com.liferay.portal.service.http.UserServiceSoapServiceLocator; 
```

（在我的示例中，我在（例如）上编译了错误，`UserGroupServiceSoapServiceLocator`因为没有进入`com.liferay.portal`...）

我会使用这些导入：

```
import com.liferay.client.soap.portal.model.*;
import com.liferay.client.soap.portal.service.*;
import com.liferay.client.soap.portal.service.http.*; 
```

什么时候需要使用这些导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-14T10:54:31.513

当我尝试访问 Liferay 提供的 Web 服务时，我也遇到了一些问题。但我可以给你答案。这些导入用于多个 Web 服务导入。我正在使用 Liferay 6.2，我也在尝试完成您给定的链接。 [http://localhost:8080/api/axis/Portal_CompanyService?wsdl](http://localhost:8080/api/axis/Portal_CompanyService?wsdl) [http://localhost:8080/api/axis/Portal_UserGroupService?wsdl](http://localhost:8080/api/axis/Portal_UserGroupService?wsdl) 和 UserServices 链接在那里。对于这三个，您必须通过提供链接来使用相同的 Web 服务客户端存根创建过程。谢谢

# macos - 是否可以从 Matlab 向 OSX 的通知中心发送通知？

> ID：15793534
> 
> 赞同：5
> 
> 时间：2013-04-03T16:58:09.057
> 
> 标签：macos, matlab, notifications

我想在我的 Matlab 代码运行完毕后向通知中心发送通知。我在 Mountain Lion 10.8.3 上并拥有 Matlab 2012b。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-23T20:10:29.933

这是一个完整的功能。它将 Matlab 显示为名称和图标，单击通知将带您进入 Matlab：

```
function notify(message)
  escaped_message = strrep(message, '"', '\"');
  [~, ~] = system(['/usr/local/bin/terminal-notifier ' ...
                   '-title Matlab ' ...
                   '-group com.mathworks.matlab ' ...
                   '-activate com.mathworks.matlab ' ...
                   '-sender com.mathworks.matlab ' ...
                   '-message "' escaped_message '"']);
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:24:47.403

[terminal-notifier](https://github.com/julienXX/terminal-notifier)是“从命令行在 Mac OS X 10.8 上发送用户通知”的工具。[`system`](http://www.mathworks.com/help/matlab/ref/system.html)Matlab 可以使用或向 Mac OS X 命令行发送命令[`!`](http://www.mathworks.com/help/matlab/matlab_env/creating-opening-changing-and-deleting-files-and-folders.html#f0-38522)。把这些放在一起，你可以在你的 m 文件中写这样的东西：

```
!terminal-notifier.app/Contents/MacOS/terminal-notifier -message "Testing..." 
```

为了使事情更容易，您可能希望创建自己的函数，以便可以这样调用它：

```
notify("Notifications from Matlab!") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-24T02:00:44.917

要添加到解决方案，这里是如何通过 Matlab 的函数和从命令行执行 AppleScript[`system`](http://www.mathworks.com/help/matlab/ref/system.html)的终端命令来完成的。[`osascript`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/osascript.1.html)下面的函数接受一个`message`参数和可选`title`的`subtitle`, 和`alert`sound 参数。还完成了对输入的一些粗略转义。`alert`声音参数可以是系统偏好设置的声音窗格的声音效果选项卡中的任何命名声音，例如`'Sosumi'`。

```
function status=notify(msg,titl,subtitl,alert)
%NOTIFY  Display OS X notification message window
%   NOTIFY(MESSAGE,TITLE,SUBTITLE,SOUND)

rep = @(str)strrep(regexprep(str,'["\\]','\\$0'),'''','\"');
cmd = ['osascript -e ''display notification "' rep(msg)];
if nargin > 1 && ischar(titl)
    cmd = [cmd '" with title "' rep(titl)];
    if nargin > 2 && ischar(subtitl)
        cmd = [cmd '" subtitle "' rep(subtitl)];
        if nargin > 3 && ischar(alert) && ~isempty(alert)
            cmd = [cmd '" sound name "' rep(alert)];
        end
    end
else
    cmd = [cmd '" with title "Matlab'];
end
status = system([cmd '"''']); 
```

[您可以从我的 GitHub](https://github.com/horchler/notify)下载此功能的更完整版本。与基于 的解决方案不同[`terminal-notifier`](https://github.com/julienXX/terminal-notifier)，我不相信通知菜单的图标可以更改。但是，该功能应该可以在任何 OS X 10.8 或 10.9 系统上运行，并且不需要安装/下载任何东西。此代码在 OS X 10.9.3 和 10.11.4 下进行了测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T17:00:59.830

## 使用两个功能：

1.  从 bash 运行 matlab
2.  `say done`或`say error`（[阅读更多](https://apple.stackexchange.com/questions/9412/how-to-get-a-notification-when-my-commands-are-done)）

    matlab -nojvm -nodesktop -r "run .m" && 说完成 || 说错误

# c++ - 为什么找不到 cudart32_50_35.dll？

> ID：15793540
> 
> 赞同：1
> 
> 时间：2013-04-03T16:58:25.297
> 
> 标签：c++, cuda

我正在尝试开始学习一些基本的 CUDA，并且我已经设法让应用程序编译，但是当我调试它时，它说：

`The program can't start because cudart32_50_35.dll is missing from your computer.`

该文件的每个可能路径都位于系统环境变量中，但它仍然无法找到它。

我正在使用 Windows 8 和 Microsoft Visual C++ 2010 Express 进行编码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:10:17.570

您需要确保在路径中有此内容，并**确保在更改系统路径时重新启动 Visual Studio** ......它仍将使用旧路径，直到您重新启动程序！

对于 Windows 7，CUDA v5.0 的二进制路径是`%CUDA_BIN_PATH%`, 或`C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin`. 看看你是否也一样。

或者，正如 sgar91 指出的那样，您可以将上述路径中的所有 .dll 文件复制到您拥有 exe 的同一位置......但这可能有点多。一般来说，您不必以管理员身份运行，我有几个以标准用户身份运行 CUDA 的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:16:57.617

我自己发现的。请始终以管理员身份运行应用程序！

# google-app-engine - App Engine 多租户 SSL 和计费

> ID：15793541
> 
> 赞同：1
> 
> 时间：2013-04-03T16:58:28.900
> 
> 标签：google-app-engine, ssl, multi-tenant, billing

所以我知道我们可以让许多客户使用我们的应用程序，并且我们可以使用基于域名或其他标准的命名空间来分离每个客户的数据。

还有一种方法可以让不同的客户端为每个单独计费的域使用不同的 SSL？那么整体计费呢，有没有办法知道应该向客户收取多少费用，或者有没有办法查看每个客户/域使用的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:13:11.323

首先，要获取命名空间的静态信息：

```
from google.appengine.api import namespace_manager
from google.appengine.ext.db import stats

namespace_manager.set_namespace('')  # Unlock DB from namespace
namespace_stat = stats.NamespaceStat.get_by_key_name(namespace)

statadistics = {
    'bytes': namespace_stat.bytes,
    'entities': namespace_stat.count}

# Please note that statics are not upto date.
# Last update can be read from namespace_stat.timestamp
# read more at https://developers.google.com/appengine/docs/python/datastore/stats 
```

我不知道 GAE 是否可以使用多个 SSL 域。也许带有`*.yourdomain.com`SSL 证书的子域可以帮助你，`The Invoice Machine`使用这些方法。

# ruby-on-rails-3 - 功德宝石可以重新计算声望，重新评估徽章和等级吗？

> ID：15793547
> 
> 赞同：4
> 
> 时间：2013-04-03T16:58:40.210
> 
> 标签：ruby-on-rails-3, rubygems, badge, merit-gem

我想在我的 rails 应用程序中添加一个积分、等级和徽章系统。

[功德](https://github.com/tute/merit)宝石看起来很酷，但我想在使用它之前确定它是如何工作的。

定义徽章的方式

```
# app/models/merit/badge_rules.rb
grant_on 'comments#vote', :badge => 'relevant-commenter', :to => :user do |comment|
  comment.votes.count == 5
end 
```

和点

```
# app/models/merit/point_rules.rb
score 10, :to => :post_creator, :on => 'comments#create' do |comment|
  comment.title.present?
end 
```

建议将操作作为钩子完成，在这些情况下，就在操作 (`comments#vote`或) 之后。`comments#create`我还没有看过徽章和积分的计算/归属是如何工作的，所以我不确定。

随着我的应用程序会随着时间的推移而发展，我希望能够更改积分和徽章规则并重新评估它们。例如：假设我首先决定在帐户激活时给予 10 分。我希望能够将其更改为 20，然后重新评估所有激活的配置文件并获得 +10 点增加。徽章也是一样。

这个宝石支持吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T00:38:57.557

可以在具有优点宝石的应用程序中重新计算声誉。Merit 会记录哪些动作触发了`Merit::Action`模型中的哪些点/徽章授予，并映射到`merit_actions`表中。

以下脚本应该可以工作（先备份，因为我还没有在生产中这样做）：

```
# 1\. Reset all badges/points granting
Merit::BadgesSash.delete_all
Merit::Score::Point.delete_all

# 1.1 Optionally reset activity log (badges/points granted/removed until now)
Merit::ActivityLog.delete_all

# 2\. Mark all `merit_actions` as unprocessed
Merit::Action.all.map{|a| a.update_attribute :processed, false }

# 3\. Recompute reputation rules
Merit::Action.check_unprocessed
Merit::RankRules.new.check_rank_rules 
```

[关于优点内部的注释（“一般优点工作流程”维基页面）](https://github.com/tute/merit/wiki/General-merit-workflow)。

# jpa - JPA：修改后的分离实体和原始实体之间的差异

> ID：15793548
> 
> 赞同：1
> 
> 时间：2013-04-03T16:58:42.217
> 
> 标签：jpa, ejb, jpa-2.0, eclipselink, ejb-3.1

在 JSF 中使用 EJB 和 JPA 构建 Web 应用程序 我想知道如何获取实体的修改字段。

让我们举一个简单的例子：

```
@Entity
@Table
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", nullable = false)
    private Integer id;

    @Column(name = "firstname", nullable = false, length = 45)
    private String firstname;

    // ...
} 
```

现在在我的 EJB 的方法“编辑”中：

```
@Singleton
public class UserService {

    @PersistenceContext
    protected EntityManager em;

    public void edit(User user) {
        this.em.merge(user);
    }
} 
```

我想知道发生了什么变化，例如说“用户最初被命名为 'john' 他现在是 'johny'！”。

我正在做的步骤：

1）搜索 ID 为 1 的用户 2）显示表单（作为 html）帮助 JSF（绑定由 JSF 管理） 3）编辑名字字段 4）提交表单，我正在编辑我的用户对象 5）在持久化之前我想和旧的比较一下 6）问题是我不能用`this.em.find(1);`我已经得到它来获取它

我试过 ：

```
@Singleton
public class UserService {

    @PersistenceContext
    protected EntityManager em;

    public void edit(User user) {
        System.out.println("USER 1 : " + user.getFirstname());
        User u2 = this.em.find(User.class, 1);
        System.out.println("USER 1 : " + user.getFirstname());
        System.out.println("USER 2 : " + user.getFirstname());
        this.em.merge(user);
        System.out.println("USER 1 : " + user.getFirstname());
        System.out.println("USER 2 : " + user.getFirstname());
    }
} 
```

我越来越 ：

```
USER 1 : johny
USER 1 : johny
USER 2 : johny
USER 1 : johny
USER 2 : johny 
```

我很确定 JPA 在内部确实知道已修改的内容，是否有一种神奇的方法，或者我应该保留自己的旧值还是自己使用 SQL 查询数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:17:02.873

看，

[http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F)

但您也可以只创建一个不在同一事务/持久性上下文中的新 EntityManager，因此将返回数据库中当前的数据。（请注意，这可能与开始时的不同，因为其他用户可能已经更改了数据）。

# maven - maven 运行时范围，但传递依赖项具有编译范围

> ID：15793551
> 
> 赞同：2
> 
> 时间：2013-04-03T16:58:47.710
> 
> 标签：maven, maven-compiler-plugin

项目 A 依赖于具有运行时范围的项目 B。项目 B 依赖于具有编译范围的项目 C。如果项目 A 中的代码调用项目 C 中的函数，我希望项目 A 的 mvn compile 会失败，但事实并非如此。

预期的行为是什么？

我将 maven 3.0.4 与 maven-compiler-plugin 2.5.1 和 maven-dependency-plugin 2.5 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:26:50.620

The maven documentation gives [a slightly confusing until you understand it](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope) table.

To work out what the scope is you need to follow the following path of entries...

1.  Start from the ultimate parent project and merge all the `<dependencies>` list. Do the same for `<dependencyManagement>`. When merging, the `groupId:artifactId:type:classifier` is the key, child poms which have dependencies with the same key overwrite whatever values they specify.

2.  Now you need to apply the `<dependencyManagement>` to the `<dependencies>` list to fill in any blanks.

At this point we now know the dependencies of the current project. The scopes in this list correspond to the row you select from the table.

For each dependency in the list, you repeat the above process to compute the dependencies effective dependency list (yes including ths step too) and then the scope of these dependencies correspond with the column selection in the table.

Once you have worked out the transitive dependencies, and their scopes via the table, for each dependency, you then apply the current module's `<dependencyManagement>` overriding `scope`, `version` and `exclusions` as defined by `<dependencyManagement>` and there you have the effective transitive dependency list.

There are other more subtle effects which are there to retain existing behaviour where bugs have essentially become features, and version ranges can further confuse things, but above shoud give a god general understanding of the problem space

# javascript - 如何为淘汰视图模型中的每个可观察对象添加扩展器？

> ID：15793562
> 
> 赞同：0
> 
> 时间：2013-04-03T16:59:20.723
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我正在尝试为我的视图模型中的所有可观察对象添加扩展器。我的数据来自服务器，所以我无法一一指定属性。

我试过了，但它不起作用，我在这个例子中使用了来自淘汰赛 js 网页的 logChange 扩展器。

```
var addingExtender = {
  key: function (data) {
        return data.id;
    },
  create: function(options) {
            return ko.observable(true).extend({ logChange: "Value Changed" });

    }
};
ko.mapping.fromJS(data, addingExtender, self); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:27:51.240

我最终做了一个函数来一个一个地添加扩展器。

```
function addStorage(koViewModel,name) {
    for (var observableKey in koViewModel) {
        if (ko.isObservable(koViewModel[observableKey]) 
        && !isObservableArray(koViewModel[observableKey])) {

            koViewModel[observableKey].extend({ persist: name === undefined ?
                   url + observableKey : url + name +     "." + observableKey });
        }

        if (typeof koViewModel[observableKey] === "object") {
            for (var observables in koViewModel[observableKey]) {
                if (ko.isObservable(koViewModel[observableKey][observables]) 
                && !isObservableArray(koViewModel[observableKey][observables])) {

                    koViewModel[observableKey][observables].extend({ persist: url +
                           observableKey + "." + observables });
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-02T22:41:21.357

使用 Typescript 语法，**递归扩展叶子 observables**

```
extendObservables(vm: object): void {
    for (var observableKey in vm) {
        if (!vm.hasOwnProperty(observableKey) || observableKey == "__ko_mapping__") {
            continue;
        }

        if (ko.isObservable(vm[observableKey]) && typeof ko.unwrap(vm[observableKey]) === "object") {
            this.extendObservables(ko.unwrap(vm[observableKey]));
        } else if (ko.isObservable(vm[observableKey])) {
            extendObservable(vm[observableKey]);
        } else if (typeof vm[observableKey] === "object") {
            this.extendObservables(vm[observableKey]);
        }
    }
} 
```

# file - 在屏幕上回显命令

> ID：15793572
> 
> 赞同：0
> 
> 时间：2013-04-03T17:00:03.937
> 
> 标签：file, text, batch-file, command

我想在屏幕上回显一个命令。我正在为某人制作一些教程，我想显示当他们按下回车键时将要运行的命令。

例如，到目前为止我有这个：

```
echo off

echo Tutorial

pause

echo .
echo .
echo This will show how to read the first line of a text file and place into another text file
echo .
echo .

pause

set /p texte=< test.txt
echo FOR %P IN (%texte%) DO(echo blah >> test2.txt)

pause 
```

但是，当它到达最后一个回显时它将不起作用，因为我正在回显一个命令而不仅仅是一个文本。有没有办法回显命令？

编辑：当我尝试运行这样的东西时，一旦到达最后一个 echo 命令，它会说有一个错误，它说我正在尝试在 echo 命令之后运行一些东西。但实际上，我正在尝试做的是显示我将在下一行或类似这些行中使用的命令。

这只是我正在做的一个例子，如果实际的 echo 语句通常没有意义，我很抱歉。我只是想知道是否有办法回显命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:03:17.807

在大多数 shell 中，都有一个调试模式来实现你想要的。例如，在 Korn shell 中，您可以键入`set -x`来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:52:32.087

因为还没有人回答，我打算在我的手机上尝试一下。

它给出错误的原因是因为你需要逃避一些东西。

```
Echo for ^%p in ^(^%texte^%^) do ^(echo Blah ^>^> test2.txt ^) 
```

这花了大约 20 分钟，所以我最好至少得到一个赞成票。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:33:19.503

`>`是一个特殊的符号，所以你需要转义它。bash 中的转义字符是 carat:`^`因此`^>^>`应该解决这个问题，但是 batch 的解释仍然`%`不同。为此你需要`%%`。这：

```
Echo FOR %%P IN (%%texte%%) DO(echo blah ^>^> test2.txt) 
```

将完全按照您的意愿输出命令。此外，如果您`@`在关闭回声之前添加它不会`echo off`在脚本开头回显。

# python - Python - 我可以（或应该）更改 os.path.sep 吗？

> ID：15793573
> 
> 赞同：11
> 
> 时间：2013-04-03T17:00:05.713
> 
> 标签：python

我正在编写一个脚本来解析多个日志文件并维护已处理文件的列表。当我阅读要处理的文件列表时，我使用`os.walk`并获得类似于以下内容的名称：

```
C:/Users/Python/Documents/Logs\ServerUI04\SystemOut_13.01.01_20.22.25.log 
```

这是由以下代码创建的：

```
filesToProcess.extend(os.path.join(root, filename) for filename in filenames if logFilePatternMatch.match(filename)) 
```

似乎“root”使用正斜杠作为分隔符（我在 Windows 上并发现更方便），但“文件名”使用反斜杠，所以我最终得到的文件路径不一致，因为它包含正斜杠和反斜杠的混合作为分隔符。

我尝试使用以下方法设置分隔符：

```
os.path.sep = "/" 
```

和

```
os.sep = "/" 
```

在 .join 之前，但它似乎没有任何效果。我意识到理论上我可以操纵字符串，但从长远来看，我希望我的脚本能够在 Unix 和 Windows 上运行，所以如果可能的话，我希望它是动态的。

我错过了什么吗？

更新：

根据下面的有用回复，我的问题似乎是自己造成的，为方便起见，我设置了用作 root 的初始路径，如下所示：

```
logFileFolder = ['C:/Users/Python/Documents/Logs'] 
```

当我将其更改为：

```
logFileFolder = ['C:\\Users\\Python\\Documents\\Logs'] 
```

一切正常，我生成的文件路径全部使用“\”。看起来我的方法是错误的，因为我试图让 Python 改变行为而不是纠正我设置的值。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T17:06:06.457

我会把手指从 os.sep 上移开，并在结合根和文件名的结果上使用 os.path.normpath()：

```
filesToProcess.extend(os.path.normpath(os.path.join(root, filename)) 
            for filename in filenames if logFilePatternMatch.match(filename)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-26T08:38:50.923

我更喜欢以下实用功能。

```
from os.path import sep, join

def pjoin(*args, **kwargs):
  return join(*args, **kwargs).replace(sep, '/') 
```

它将两种变体（linux 风格和 windows 风格）转换为 linux 风格。windows和linux都支持python中的'/'分隔符。

我拒绝了简单的**os.sep.join(['str','str','str'])**因为它没有考虑现有的分隔符。以 sep.join vs vanilla join 为例：

```
In[79]: os.sep.join(['/existing/my/', 'short', 'path'])
Out[79]: '/existing/my/\\short\\path'
In[80]: os.path.join('/existing/my/', 'short', 'path')
Out[80]: '/existing/my/short\\path' 
```

可以使用以下建议修复香草连接：

```
In[75]: os.path.normpath(os.path.join('/existing/my/', 'short', 'path'))
Out[75]: '\\existing\\my\\short\\path' 
```

到目前为止，一切都很好。但随后我们介绍了以下场景，我们将从 Windows 与 linux 进行交互。

```
local_path = os.path.normpath(os.path.join('C:\\local\\base', 'subdir', 'filename.txt'))
remote_path = os.path.normpath(os.path.join('/remote/base', 'subdir', 'filename.txt'))
sftp_server.upload(local_path, remote_path) 
```

上面将失败，因为 sftp 服务器需要一个“/”分隔符，而 os.path.normpath 将在 Windows 上规范化为“\”。

通过使用 pjoin 实用程序功能或类似功能，它可以跨操作系统、Web、ftp 等工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-20T08:17:13.347

我`'/'.join([path1, path2])`用来解决这个问题，因为'/'在 windows 和 linux 中运行良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T17:20:08.773

你最好不要触摸`os.sep`，`os.path.sep`因为它们不是`os.path.join`正在使用的东西。您可以`os.path.normpath`按照 Anthon 的建议使用。另一种选择是拥有自己的简单路径连接：

`os.sep.join([i1,i2,i3])`

# java - JAX-RS (REST Easy) InMemoryClientExecutor/ClientRequest 异常

> ID：15793574
> 
> 赞同：0
> 
> 时间：2013-04-03T17:00:07.727
> 
> 标签：java, web-services, exception, jax-rs, resteasy

我正在尝试使用 InMemoryClientExecutor 调用本地 JVM 上的服务，这些服务返回 javax.ws.rs.core.Response 对象。我可以让它工作，但只能通过像这样指定 String 类型：

```
String response = new ClientRequest("/myService", executor)
    .get(String.class)
    .getEntity(); 
```

由于服务的签名是这样的：

```
@GET
@Path("/myService")
public Response getSomeData(@Form MyFormBean bean) {
    //...blah...
} 
```

但是，我想取回实际的 Response 对象，以便我可以取出实体并在我的新“聚合”响应中返回这些对象。当我只返回字符串时，Jackson Parser 不会将其视为 JSON，而只是一个常规字符串，因此它会执行诸如将换行符编码为 \n 等操作。

每当我做类似的事情时：

```
String response = new ClientRequest("/myService",executor)
    .get(Response.class)
    .getEntity(); 
```

甚至这只是为了获取普通的请求对象：

```
String response = new ClientRequest("/myService", executor).get().getEntity(); 
```

我得到以下异常：

```
Exception Occured: org.jboss.resteasy.client.ClientResponseFailure: Unable to find a MessageBodyReader of content-type application/json and type null
    at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:523)
    at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:514)
    at org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:415)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:377)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:338) 
```

再往下还有：

```
Servlet.service() for servlet Resteasy threw exception: org.jboss.resteasy.spi.LoggableFailure: Unable to find contextual data of type: javax.servlet.http.HttpServletRequest
    at org.jboss.resteasy.core.ContextParameterInjector$GenericDelegatingProxy.invoke(ContextParameterInjector.java:56)
    at $Proxy210.getScheme(Unknown Source) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:38:35.497

没有`Response`从服务器返回的对象，只是一个数据流，在您的情况下，它是 JSON 格式的某个实体的表示。尝试将此数据反序列化回客户端的 Response 对象是行不通的，因为您实际上是在说 JSON 代表一个`Response`对象，但它不是（它代表***曾经包含**在 Response 中的实体）。

好消息是，还有其他获取实体的方法，不需要尝试将其反向旋转为`Response`. 您需要在客户端的类路径中有实体：

```
MyEntity response = new ClientRequest("/myService", executor)
    .get(MyEntity.class)
    .getEntity(); 
```

替换`MyEntity`为您期望收到的实际实体的类型。

# php - 如何在 Windows 上的 PHP 环境中防止会话超时

> ID：15793575
> 
> 赞同：1
> 
> 时间：2013-04-03T17:00:10.090
> 
> 标签：php, iis, iis-7, windows-server-2008

我有一个在 IIS7 ( Windows 2008 ) 上运行的 PHP 5.4.9 应用程序。

用户登录并在需要重复登录的可变时间后超时。

在 IIS 中，我将以下时间设置为 240 分钟以缓解问题，但我仍然有用户在阈值之前超时。

```
Application Pools  > Advanced Settings > Idle Time Out
Session State > Time Out 
```

还有什么我可以尝试的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-12T10:04:33.660

如果您将会话文件存储在默认文件夹中，则可能有另一个软件正在清除临时文件。所以将会话文件夹移动到其他地方。

# xml - 交叉引用 XSL 文件

> ID：15793578
> 
> 赞同：0
> 
> 时间：2013-04-03T17:00:23.167
> 
> 标签：xml, xslt, xslt-1.0

假设我有一个使用两个 XSL 文件的 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="first.xsl"?>
<?xml-stylesheet type="text/xsl" href="second.xsl"?>

<name>
        <firstname>Andy</firstname>
        <lastname>Ray</lastname>
</name> 
```

第一个 XSL 文件是从第二个 XSL 文件导入模板转换并显示输出。

第一个 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:import href="second.xsl"/>

<xsl:template match="/">
<html>
<body>
  <xsl:apply-imports/>
</body>
</html>
</xsl:template>

</xsl:stylesheet> 
```

第二个 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
<xsl:for-each select="name">
<xsl:value-of select="concat(firstname,lastname)"/>
</xsl:for-each>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

所有三个文件都位于我的本地文件夹中。

如何查看第一个 XSL 的最终输出？我是否必须将其保存为 .html 文件，然后在 IE 上运行它，或者是否有一个在线 XSLT 编辑器可以接受多个 XSL 文件输入并显示输出？

我是这种语言的新手，因此您可以提供任何指导，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:49:24.850

我不知道有任何产品对多个 xml 样式表处理指令有用。我知道有些处理器选择最后一个，有些选择第一个。

如果您想运行转换管道（其中每个转换都将前一个转换的输出作为输入），那么您可以通过多种方式来控制它：例如，使用 XProc、Ant、自定义 Java 代码或 xmlsh .

# cordova - 如何更改 dojo 工具栏按钮的字体？

> ID：15793579
> 
> 赞同：0
> 
> 时间：2013-04-03T17:00:23.447
> 
> 标签：cordova, fonts, dojo

我正在使用 dojo 工具包来开发 iphone 应用程序。我已经将 Webding 字体导入 phonegap 项目，但我不知道如何更改工具栏按钮的字体。任何人都可以帮忙吗？

问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:44:59.393

尝试使用以下内容覆盖您的 css 文件中的 dojo css mblToolBarButton 类：

```
.mblToolBarButton {
line-height: 19px;
text-align: center;
font-family: Verdana; // Your font, try system fonts first
font-size: 20px;
font-weight: bold;

} 
```

# asp.net - 无法加载类型' ' - ASP.NET

> ID：15793581
> 
> 赞同：1
> 
> 时间：2013-04-03T17:00:35.470
> 
> 标签：asp.net, iis

我有一个正在开发的 WebApp 我已经完成它并且它在本地工作但是当我上传它时我得到了

无法加载类型“MyApp.GenerateData”

我的 asp 页面包含这个

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="GenerateData.aspx.cs" Inherits="MyApp.GenerateData" %> 
```

我的 GenerateData.aspx.cs 代码：

```
namespace MyApp
{
    public partial class GenerateData : PageEstateAdministrator
    {
        protected void Page_Load(object sender, EventArgs e)
        {
             // DO WORK
        }
    }
} 
```

我究竟做错了什么？

# c - 为什么这里不需要动态分配

> ID：15793582
> 
> 赞同：1
> 
> 时间：2013-04-03T17:00:37.343
> 
> 标签：c, dynamic

为什么这段代码不需要动态分配？

```
int knapSack(int W, int wt[], int val[], int n)

{
   int i, w;
   int K[n+1][W+1];

   // Build table K[][] in bottom up manner
   for (i = 0; i <= n; i++)
   {
       for (w = 0; w <= W; w++)
       {
           if (i==0 || w==0)
               K[i][w] = 0;
           else if (wt[i-1] <= w)
                 K[i][w] = max(val[i-1] + K[i-1][w-wt[i-1]],  K[i-1][w]);
           else
                 K[i][w] = K[i-1][w];
       }
   }

   return K[n][W];
} 
```

我一直觉得我不能用变量的大小声明数组，比如`K[n+1][W+1];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:02:50.233

这是 C99 的一项功能。它为您在堆栈上动态分配。

这是 GCC 中可变长度数组工作的解释：http: [//gcc.gnu.org/onlinedocs/gcc/Variable-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)

# c - 以winAVR开头

> ID：15793591
> 
> 赞同：0
> 
> 时间：2013-04-03T17:01:04.140
> 
> 标签：c, controllers, avr, notepad

从 pascal 7 到 delphi，我有 20 多年的编程经验。我想开始使用 C 对微控制器进行编程，大多数电子套件推荐的工具是带有程序员笔记本的 winAVR。我已经安装了软件并想开始编译代码，但至少可以说我迷路了，找不到任何简单的文档来让自己走上可以开始测试代码的轨道。谁能提供一些好的入门材料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:26:28.073

Whereas for PC's the usual first program is ["Hello, World!"](http://en.wikipedia.org/wiki/Hello_world_program), in the embedded world (one lacking displays, as least to start with, the equivalent is the [blinky led](http://www.google.com/search?q=blinky%20led%20program): you attach a LED to some output pin of your processor ([don't forget the current-limiting resistor!](https://electronics.stackexchange.com/questions/64179/wiring-3v-leds-what-size-battery): you need a resistor in series with the LED), and you make the LED blink. You can find plenty of blinky LEDs for AVR, but we can write one right here:

```
// The next define tells delay.h what your CPU speed is, assuming 1Mhz
#define F_CPU 1000000UL
#include <util/delay.h>

main() {
   while(1) { // loop forever
      DDRB = 0xFF;     // Set the direction of all pins 
                       // on port B to OUTPUT (can change to some other port)
      PORTb = 0xFF;    // Set all pins on port B high (can change to some other port)
      _delay_ms(1000); // Wait one second;
      PORTb = 0x00;    // Set all pins on port B low (can change to some other port)
      _delay_ms(1000); // Wait one second;
   }
} 
```

It should compile on WinAVR, and load correctly. Change `PORTB` and `DDRB` to some other port of you'd like. Note that this program changes all the pins on that port: so if your port B has 8 pins, all of them will blink a led hooked up to them. Don't forget the current-limiting resistors, and that LEDs are directional: they only work when plugged in one way, and not the other.

# matlab - 将 ASCII 串行数据分离成单独的矩阵

> ID：15793600
> 
> 赞同：2
> 
> 时间：2013-04-03T17:01:29.253
> 
> 标签：matlab, serial-port, ascii, scanf

第一次在这里发海报。我正在使用加速度计来测量三个轴 x、y 和 z。我通过 pic 微控制器流式传输三个变量，并通过 UART 以 ASCII 格式发送到我的笔记本电脑。使用 fscanf 命令，我收到一串逗号分隔的数据，格式为 x=0000,y=0508,z=0000,x=0000,y=0503,z=0000 等...我想分隔信息并放置成 x = 形式的三个矩阵`[005, 010, 000....]`；y = `[503, 000, 450....]`; z = `[000, 000, 500.....]`; 用于进一步分析，绘图等。到目前为止，这是我的代码：

```
clear all;
close all;

s = serial('COM4'); %assigns the object s to serial port

set(s, 'InputBufferSize', 256); %number of bytes in inout buffer
set(s, 'FlowControl', 'hardware');
set(s, 'BaudRate', 9600);
set(s, 'Parity', 'none');
set(s, 'DataBits', 8);
set(s, 'StopBit', 1);
set(s, 'Timeout',10);

disp(get(s,'Name'));
prop(1)=(get(s,'BaudRate'));
prop(2)=(get(s,'DataBits'));
prop(3)=(get(s, 'StopBit'));
prop(4)=(get(s, 'InputBufferSize'));

fopen(s); %opens the serial port
fscanf(s) 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:06:02.513

您可以使用`regexp`：

```
>> str = 'x=0000,y=0508,z=0000,x=0000,y=0503,z=0000';
>> pat = '([xyz])=([0-9\.]*),?';
>> toks = regexp(str, pat, 'tokens')
toks = 

Columns 1 through 5

{1x2 cell}    {1x2 cell}    {1x2 cell}    {1x2 cell}    {1x2 cell}

Column 6

{1x2 cell}

>> toks{1}

ans = 

'x'    '0000' 
```

末尾的问号`pat`使其对没有尾随的情况不敏感`','`，并且如果您也不想提取变量名（即，在您的情况下，您可能不需要此信息因为您知道它们总是以相同的顺序出现），然后只需删除`()`around `[xyz]`。

要以双精度形式提取值，您可以执行以下操作：

```
newXYZ = zeros(length(toks) / 3, 1); 
newFilledLocs = zeros(size(newXYZ)); 
curRow = 1;
for nTok = 1:length(toks)
    col = [];
    switch toks{nTok}{1}
        case 'x', col = 1; 
        case 'y', col = 2; 
        case 'z', col = 3; 
        otherwise, error('Invalid variable name ''%s''', toks{nTok{1}});
    end; 
    newXYZ(curRow, col) = str2double(toks{nTok}{2});
    if all(newFilledLocs(curRow, :))
        curRow = curRow + 1; 
    end
end 
```

# c# - 如何将 List<> 作为字段存储在数据库中？- C#（SQL Server 精简版）

> ID：15793601
> 
> 赞同：1
> 
> 时间：2013-04-03T17:01:36.160
> 
> 标签：c#, database, list, sql-server-ce

我有一个对象，我想将其字段存储在数据库中。我将使用 SQL Server Compact Edition（带有 Visual C# Express 2010）。作为记录，我对使用数据库（以及一般的数据库）进行编程是相当新的。该程序将每天用于阅读电子邮件、处理其中的订单、存储它们并在必要时访问它们以帮助完成订单。订单列表将变得非常大，无法存储在列表中、写入文件、从文件创建列表等。问题是每个订单都包含所购买商品的列表。我知道我可以用二进制或 XML 序列化列表，并将该数据用作字段。但是，这会阻止我根据该列表进行搜索/选择。例如，如果我想根据里面的物品来查找订单，或查看特定商品的购买次数。由于列表的大小是任意的，我不能只创建一堆字段并只填写我需要的字段（在我看来，这无论如何都是个坏主意）。

在写这篇文章时，我意识到了一个错误。如果我再次序列化列表，我可以比较序列化的数据以再次找到相同的列表（虽然，这假设相同的数据每次都以相同的方式序列化）。但是，我仍然无法找到任何特定的项目。

那么，有没有办法将项目列表存储在固定数量的字段中（最好是 1 个），并且仍然能够通过查询搜索其内容（我很可能会使用 LINQ）？

编辑：解决我到目前为止所得到的：首先，谢谢！我开始拼凑我必须做的事情，但我并不完全在那里。共识似乎是每组项目都有一个表格。这是否意味着我每个月都会创建数千张表？

重新阅读我的问题后，我意识到我必须更清楚。收到订单后，我解析数据并将其存储在 Order 对象中，该对象由客户信息和商品列表组成。这是我要存储的简化版本：

```
class Order{
    private DateTime date;
    private String orderNumber;
    private String buyerName;
    private List<Item> items;
    private String address;
}

class Item{
    private String itemCode;
    private String description;
    private int quantity;
} 
```

那么我是否必须为我创建的每个列表创建一个新表，或者我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:05:13.360

**更新：** 如果您是该主题的新手，这可能是一对多关系的有用参考（特别是查看第二个也是最受好评的答案）：[使用 SQL Server 创建一对多关系](https://stackoverflow.com/questions/1308339/create-a-one-to-many-relationship-using-sql-server)

您需要在数据库中为您的订单项创建一个新表，然后创建与订单表的外键关系。这将是一对多的关系。像下面这样的东西 - 显然你需要创建一个 FK 关系，但你明白了要点。

**现存的**

```
CREATE TABLE Order (
  OrderID INT,
  PONumber VARCHAR,
  ItemsList VARCHAR
) 
```

**新的**

```
CREATE TABLE Order (
  OrderID INT,
  PONumber VARCHAR
)

CREATE TABLE LineItem(
  LineItemID INT,
  Description VARCHAR,
  Quantity INT,
  SequenceNumber INT,
  OrderID INT -- <--- Important one here
) 
```

请注意，如果您只想创建一个简单的查找，则关系将相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:03:52.573

您可以创建一个单独的表来保存它的项目，而不是将列表存储为字段。此 ListTable 中的记录将有一个字段指向原始表中的记录 ID。这样你就可以在之后编写各种查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:04:01.043

这可以通过多种方式解决，但如果您希望能够直接查询数据，则应该使用单独的表重新设计数据库，在该表中存储带有参考 ID 的列表数据。毕竟，数据库都是关于数据列表的。

# java - Java - 在 Amazon SimpleDB 中创建域

> ID：15793602
> 
> 赞同：3
> 
> 时间：2013-04-03T17:01:36.357
> 
> 标签：java, amazon-simpledb

我正在使用 Amazon SimpleDB 并尝试使用以下教程创建数据库。基本上它会抛出一个错误，即发生错误：java.lang.String 无法转换为 org.apache.http.HttpHost。完整的堆栈跟踪如下：

> 发生错误：java.lang.String 无法转换为 org.apache.http.HttpHost java.lang.ClassCastException：java.lang.String 无法在 org.apache.http.impl 中转换为 org.apache.http.HttpHost。 client.DefaultRequestDirector.execute(DefaultRequestDirector.java:416) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient. java:805) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784) at com.xerox.amazonws.common.AWSQueryConnection.makeRequest(AWSQueryConnection.java:474) at com.xerox.amazonws .sdb.SimpleDB.makeRequestInt(SimpleDB.java:231) 在 com.xerox.amazonws.sdb.SimpleDB.createDomain(SimpleDB.java:155) 在 com.amazonsimpledb.SDBexample1.main(SDBexample1.java:19)

我的代码如下（注意我已将 AWS 访问 ID 和密钥替换为实际值）：

```
public static void main(String[] args) {

     String awsAccessId = "My aws access id";
     String awsSecretKey = "my aws secret key";

     SimpleDB sdb = new SimpleDB(awsAccessId, awsSecretKey, true);

     try {
        Domain domain = sdb.createDomain("cars");

        System.out.println(domain);

    } catch (com.xerox.amazonws.sdb.SDBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

关于为什么会发生上述错误的任何想法。

我感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T15:26:06.367

看来您正在使用[Typica](http://code.google.com/p/typica/)客户端库，该库自 2011 年中期以来几乎没有维护过，请参阅例如[罕见的提交](http://code.google.com/p/typica/source/list)和[稳定增长的未解决问题](http://code.google.com/p/typica/issues/list)，其中最新的似乎正是您的问题，请参阅[使用 Apache HttpClient 4.2 的 ClassCastException](http://code.google.com/p/typica/issues/detail?id=135)：

*   据记者称，*一旦我们降级回 Apache HttpClient 4.1，一切似乎都可以正常工作*，所以这最终可能是一个临时的解决方法。

无论哪种方式，我都强烈建议切换到官方的[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)（或其他语言[SDK](http://aws.amazon.com/tools/)之一），它不仅受到定期支持和维护，而且还密切跟踪所有 AWS API 更改（诚然，这不是t 这对于[Amazon SimpleDB](http://aws.amazon.com/simpledb/)至关重要，它基本上是冻结技术，但您稍后会更轻松地使用过多的[AWS 产品和服务](http://aws.amazon.com/products-solutions/)）。

*   此外，如果您使用的是 IDE，您可以从[AWS Toolkit for Eclipse中受益。](http://aws.amazon.com/eclipse/)

SDK 包括几个示例（也可通过 Eclipse Toolkit 向导获得），其中一个是用于 SimpleDB 的 - 这是关于您的示例的精简代码摘录：

```
BasicAWSCredentials basicAWSCredentials = new BasicAWSCredentials(
    awsAccessId, awsSecretKey);
AmazonSimpleDB sdb = new AmazonSimpleDBClient(basicAWSCredentials);
Region usWest2 = Region.getRegion(Regions.US_WEST_2);
sdb.setRegion(usWest2);

try {
    // Create a domain
    String myDomain = "MyStore";
    System.out.println("Creating domain called " + myDomain + ".\n");
    sdb.createDomain(new CreateDomainRequest(myDomain));

    // ...
    // Delete a domain
    System.out.println("Deleting " + myDomain + " domain.\n");
    sdb.deleteDomain(new DeleteDomainRequest(myDomain));
} catch (AmazonServiceException ase) {
    // ...
} catch (AmazonClientException ace) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:55:04.740

请尝试使用服务器和端口创建 SimpleDB 实例，并让我知道它是否有效。

```
public SimpleDB objSimpleDB = null;
private String awsAccessKeyId = "access key";
private String awsSecretAccessKey = "secret key";
private boolean isSecure= true;
private String server = "sdb.amazonaws.com";
private int port=443;

try{
SimpleDB objSimpleDB = new SimpleDB(awsAccessKeyId, awsSecretAccessKey, isSecure, server, port);
Domain domain = objSimpleDB .createDomain("cars");
} catch (com.xerox.amazonws.sdb.SDBException e) {
      //handle error
} 
```

# .net - 访问共享变量引发对象引用错误

> ID：15793607
> 
> 赞同：0
> 
> 时间：2013-04-03T17:01:49.123
> 
> 标签：.net, vb.net

我在表单中有一个共享变量。

```
Public Class FormHome
      Public Shared db_config As Dictionary(Of String, String) 
```

当我尝试从另一个表单访问这个变量时，

```
FormHome.db_config.ContainsKey("m") 
```

它在我的系统（Windows 7）中运行良好。但是我在 Windows XP（客户端系统）中恰好在该行中遇到对象引用错误（System.NullReferenceException）。

在这两个地方，应用程序都使用 .NET 4.0 框架（版本 - 4.0.30319.18034）。似乎很奇怪。是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:13:10.290

这段代码

```
Public Shared db_config As Dictionary(Of String, String) 
```

仅*声明请求类型的变量*( `db_config`)。它不会*创建*该类型的对象。

在创建对象之前，`db_config`它仍然为 null，因此尝试访问它会导致`NullReferenceException`.

要创建对象，您需要使用`New`关键字。例如：

```
db_config = New Dictionary(Of String, String)() 
```

您需要确保在第一次尝试访问变量的值*之前创建此对象。*因为您使用的是静态 ( `Shared`) 变量，所以在类的实例构造函数中执行此操作可能为时已晚。常规实例构造函数仅在您创建对象的实例时才会执行。

因此，我建议在对象的静态构造函数中进行。正如[语言规范](http://msdn.microsoft.com/en-us/library/aa711965.aspx)更详细地解释的那样，在访问该类的任何静态成员时，可以保证运行时已经执行了类的静态构造函数。

将以下代码添加到您的`FormHome`类中：

```
Shared Sub New()
    db_config = New Dictionary(Of String, String)()
End Sub 
```

# wordpress - CarouFREDSel 插件：媒体查询触发轮播中可调整大小的图像

> ID：15793611
> 
> 赞同：3
> 
> 时间：2013-04-03T17:02:08.863
> 
> 标签：wordpress, caroufredsel

我有这个轮播作为一个 wordpress 插件，看起来像这样（完整的浏览器窗口宽度）： ![在此处输入图像描述](https://i.stack.imgur.com/6OBZw.jpg)

当我调整浏览器窗口的大小时，图像的大小是相同的，直到触发媒体查询：

```
@media screen and (min-width: 1470px) {
    #image-carousel { height: 500px; }
    #carousel-images img { width: 980px; height: 500px; }

    #prev, #next { height: 500px; }
    #prev { left: -490px; }
    #next { right: -490px; }
}

@media screen and (min-width: 500px) and (max-width: 1470px) {
    #image-carousel { height: 383px; }
    #carousel-images img { width: 750px; height: 383px; }

    #prev, #next { height: 383px; }
    #prev { left: -375px; }    
    #next { right: -375px; }
} 
```

然后我调整需要调整大小的 div 的大小，并且图像会正确缩小，但会发生这种情况： ![在此处输入图像描述](https://i.stack.imgur.com/tjzy9.png) 图像“未居中”。在创建轮播时发生的某些过程不会（自然地）触发。我现在解决这个问题的方法是：（我知道 javascript 不是 DRY，这只是一个例子）

```
onCreate: function (data) {
    $(window).resize( function () {
        if( $(window).width() > 1470 ) {
            $(".dev7-caroufredsel-carousel").carouFredSel({
                // Create the carousel again...    
            });
        } else if ( $(window).width() <= 1470 ) {
            $(".dev7-caroufredsel-carousel").carouFredSel({
                // Create the carousel again...    
            });
        }
    });
} 
```

在`onCreate`轮播的情况下，当浏览器窗口超过给定限制时，我将 resize 事件绑定`window`到重新创建轮播。这行得通，我认为这不会成为问题，但是...

这似乎是一件坏事，而不是正确的方法，我想知道我该如何正确地做到这一点？

# c - C 结构、内存分配和结构

> ID：15793615
> 
> 赞同：1
> 
> 时间：2013-04-03T17:02:27.537
> 
> 标签：c, malloc, structure

因此，任务是读取文件并将数据推送到结构中。数据文件是：

```
babe 12 red 12
deas 12 blue 12
dsa 12 red 512
bxvx 15 blue 52
reed 18 black 15 
```

虽然代码是这样的

```
struct shoes {
    char name[8];
    int size;
    char color[8];
    int price;       
};
//open file
shoes *item=(struct shoes*)malloc(sizeof(struct shoes));
for (i=0; !feof(file); i++) {
    item=(struct shoes*)realloc(item,sizeof(struct shoes)+i*sizeof(struct shoes));
    fscanf(file,"%s %i %s %i\n",(item+i)->name,(item+i)->size,(item+i)->color,(item+i)->price);
} 
```

但程序每次都会崩溃。dbg 说：在当前上下文中没有符号“项目”。错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:14:12.040

问题是您没有传递*指向*要使用读取的整数的指针`fscanf`，而是传递整数本身。

`fscanf`将它们视为指针。他们指向哪里？谁知道-整数未初始化，因此它们可以指向*ANYWHERE*。因此，*崩溃*。

因此修复：

```
fscanf(file,"%s %i %s %i\n",
    (item+i)->name,
    &((item+i)->size),
    (item+i)->color,
    &((item+i)->price)); 
```

请注意，您不需要相同的`name`和`color`因为数组退化为指针，所以您已经传递了正确的东西。

请考虑放弃`item+i`符号；`item[i]`随便看代码就更清晰更容易理解了*：*

```
fscanf("%s %i %s %i\n", 
    item[i].name, 
    &item[i].size, 
    item[i].color,
    &item[i].price); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:29:46.077

您的代码有一些错误：1）除非您使用 C++ 编译器进行编译，否则您需要鞋的 typedef ...但是您应该标记此 C++。2) feof 直到实际尝试读取文件末尾之后才返回 false，因此您的代码使鞋子 1 的数组太大。3）您将整数传递给 fscanf 而不是它们的地址。

如果编译为 C 代码而不是 C++ 代码，则不需要对 malloc 和 realloc 进行强制转换，建议不要这样做。还有其他文体问题让你的代码更难理解。试试这个：

```
typedef struct {
    char name[8];
    int size;
    char color[8];
    int price;       
} Shoe;

// [open file]

Shoe* shoes = NULL; // list of Shoes
Shoe shoe; // temp for reading

for (i = 0; fscanf(file,"%s %i %s %i\n", shoe.name, &shoe.size, shoe.color, &shoe.price) == 4; i++)
{
    shoes = realloc(shoes, (i+1) * sizeof *shoes);
    if (!shoes) ReportOutOfMemoryAndDie();
    shoes[i] = shoe;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T17:04:05.320

你确定*调试器*这么说吗？我很惊讶它甚至编译...

你自找的：

```
struct shoes *item 
```

如果您没有证明您的结构的 typedef，则每次引用它时都必须明确地说“struct”。

第二个注意事项：

```
item=(struct shoes*)realloc(item... 
```

不要分配与[`realloc()`](http://linux.die.net/man/3/realloc)传递给它的指针相同的指针。如果重新分配失败，它将返回 NULL，这可能会杀死你。你应该确保你正在检查初始`malloc()`和`realloc()`

第三点：

您需要将int 的*地址*传递给 fscanf()。

```
fscanf(file,"%s %i %s %i\n",(item+i)->name,&((item+i)->size),(item+i)->color,&((item+i)->price)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T17:26:35.260

您的代码有两个问题：

第一个。结构：

你可以用两种方式定义你的结构，就像你做的那样：

```
struct shoe{    
 char name[8];
 int size;
 char color[8];
 int price;  
}; 
```

在这种情况下，您应该将指向它的指针称为：

```
struct shoe *item; 
```

另一种（可能更方便？）使用 typedef 和 defenition 的方式：

```
typedef struct {    
 char name[8];
 int size;
 char color[8];
 int price;  
} shoe; 
```

在这种情况下，您应该将指向它的指针称为：

```
shoe *item; 
```

因此，您发布的代码不应该编译。

第二个：

在您展示的情况下，应该为 fscanf 提供指向整数/字符的指针。你已经正确地传递了 char 指针（因为你传递了一个 char 数组的名称，它实际上是一个指向第一个元素的 char 指针），但是你已经传递了一些整数并且 fscanf 需要指向它应该填充的整数的指针，所以你的代码应该是：

```
fscanf(file,"%s %i %s %i\n",(item+i)->name,&((item+i)->size),(item+i)->color,&((item+i)->price)); 
```

# android - 背景图像阻塞 Android:Hint -- EditText -- Android

> ID：15793616
> 
> 赞同：0
> 
> 时间：2013-04-03T17:02:34.443
> 
> 标签：android, android-layout, android-edittext, android-xml

我使用 InkScape 剪切图像。从这里我用draw9patch制作了一个.9 png图像。.9 现在位于我的 drawables-hdpi 文件夹中。我已将此图像作为 res/layout 文件中 EditText 的背景。图像显示，但它覆盖了来自 android:hint 的文本。

这是布局文件的代码---

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/Black"
android:orientation="vertical" >

<EditText
    android:id="@+id/etCommands"
    android:layout_width="fill_parent"
    android:layout_height="35dp"
    android:background="@drawable/silvertextbox"
    android:ems="10"
    android:gravity="center"
    android:hint="Type a Command"   //This text is covered by @drawable
    android:password="true" >

    <requestFocus />
</EditText> 
```

就像我说的，我的问题是 android:hint 被 android:background 覆盖。如何确保 android:hint 的文本在背景@drawable 之上？

我会在下面发布一张图片来显示图形布局，但我显然没有 10 个声望点。我想知道我是否必须在代码方面做一些事情来使@drawable 透明/半透明。还是我必须先使用 Inkscape 使 @drawable 透明/半透明？感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:04:14.247

尝试为 设置一些填充`textbox.it`，应该可以解决问题。

# wordpress - 扩展现有的 wordpress 插件

> ID：15793622
> 
> 赞同：0
> 
> 时间：2013-04-03T17:02:55.567
> 
> 标签：wordpress

我想知道是否可以扩展现有的 wordpress 插件。例如添加一些新功能但不触及原始插件文件。这可能吗？

**编辑**

我找到了解决方案。例如在 woocommerce 插件中，我需要在单一产品中添加一些 html，所以我在 function.php 中写道：

```
add_action( 'woocommerce_single_product_summary', 'woocommerce_single_product_my_custom_function', 15 );

function woocommerce_single_product_my_custom_function(){
echo '<p>this is my html code</p>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:06:21.300

除非原始定义了要扩展的钩子，否则恐怕这是不可能的。我建议你这样做的方法是复制插件目录并在其定义中给它一个不同的名称

# javascript - 如何使用 Ajax 调用 JavaScript 文件并在该 JavaScript 文件中使用逻辑

> ID：15793623
> 
> 赞同：0
> 
> 时间：2013-04-03T17:02:56.807
> 
> 标签：javascript, ajax

有没有办法在[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)调用中调用 JavaScript 文件并在该文件中使用逻辑？

例如，我目前正在使用[Sencha Touch](http://en.wikipedia.org/wiki/Sencha_Touch)调用 JSON 文件，如下所示：

```
Ext.Ajax.request({
    url : 'resources/data/userdata.json',
        headers : {
            "Content-Type" : "application/json"
        },
        callback : function (options, success, response) {
            obj = JSON.parse(response.responseText);
            for (var i = 0; i < obj.length; i++) {
                console.log(obj[i].name);
            }
        }
    }); 
```

但是是否有可能调用一个 JavaScript 文件并根据传入的参数在该文件中执行一些逻辑？

我知道我可以用服务器文件（ASP.NET、PHP 等）来做到这一点......我只是想知道这是否可以使用 JavaScript 文件。

我尝试调用 window.onload 函数或使用立即函数，但我仍然将所有文本返回到文件中，而不仅仅是我试图返回的 JSON...：

```
(function(){
    return '[{ "name": "todd", "lastname":"vance"}, { "name": "joe", "lastname":"schmoe"}] ';
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:28:27.360

您需要评估从 Ajax 获得的结果，`eval(myajaxresponse);`. 这可以调用其中的 JavaScript 代码，或者它可以注册函数以便您以后使用它们。您可以在 Stack Overflow 问题*[Calling a JavaScript function returned from an Ajax response](https://stackoverflow.com/questions/510779)*中获得更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:30:26.423

您始终可以将函数的字符串表示形式分配给 JSON 中的键：

*methods.json*用法（基于您的代码）：

```
return '{method: ["(function(arg1, arg2){// do stuff})", "(function(arg1){// do other stuff})"]}';

...

var args = [arg1, arg2, argsetc];
Ext.Ajax.request({
    url: 'resources/data/userdata.json',
    headers: {
            "Content-Type": "application/json"
    },
    callback: function (options, success, response) {
        obj = JSON.parse(response.responseText);
        for (var i = 0; i < obj.method.length; i++) {
            var method = eval(obj.method[i]);
            method.apply(method, args); // Executes the method with arguments
        }
    }
}); 
```

还要确保`{}`在 JSON 中包含前面和后面的内容，以便对其进行解析并按预期工作。;)

# c# - windows phone 8：c#系统内存不足异常：从网络加载大量图像

> ID：15793625
> 
> 赞同：0
> 
> 时间：2013-04-03T17:03:04.010
> 
> 标签：c#, memory, windows-phone-8, storage, windows-phone

这是我在 Windows Phone 环境中开发的首批应用程序之一，所以我基本上是边学边学。我有一个带有枢轴控件的应用程序，并且在三个枢轴项中的每一个上都有一个 LongListSelector。当您滚动来自网络的图像时，它们会加载到 longlistselector 中，这是无限滚动（因为一旦在底部看到您的图像就会加载更多）。但是，在测试中，如果我疯狂滚动以下载大量图像，则会收到以下错误：

```
'System.OutOfMemoryException' occurred in System.Windows.ni.dll 
```

因为我每次都加载一些相同的图像，所以我实现了 PersistentImageCache (Kawagoe.Storage) 来缓存图像。

[http://kawagoe.codeplex.com/wikipage?title=Storage.PersistentImageCache](http://kawagoe.codeplex.com/wikipage?title=Storage.PersistentImageCache)

当用户向下滚动时，我是否必须以某种方式卸载图像，并在用户向上滚动时重新加载它们？或者为每张 X 图像清除内存？（我有 HTC 8S，所以这对于内存更大的手机可能不是问题）。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T06:45:08.067

由于您正在为 wp8 进行开发，因此请考虑对 longlistselector 使用网格布局，如本示例所示：

[http://code.msdn.microsoft.com/wpapps/PhotoHub-Windows-Phone-8-fd7a1093](http://code.msdn.microsoft.com/wpapps/PhotoHub-Windows-Phone-8-fd7a1093)

Afaik 他们做了许多先进的内存节省技术，如分页 3 页内容、延迟加载内容实现方法和位图缓存。

我可以毫无问题地展示 100 个 hubtiles（臭名昭著的记忆棒）

额外提示：您可以通过设置较低的 maximumflickvelocity 来控制滚动速度，这让您有更多时间来做您需要做的事情。

# c# - 有没有办法直接获取目录结构并将其解析为C#中的Json？

> ID：15793627
> 
> 赞同：1
> 
> 时间：2013-04-03T17:03:12.163
> 
> 标签：c#, asp.net-mvc

我想知道是否有办法获取特定的目录结构并将其解析为 json，以便我可以使用 jquery 插件创建客户端树视图模式。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:10:23.270

使用 JSON.NET：

```
JToken GetDirectory(DirectoryInfo directory)
{
    return JToken.FromObject(new
    {
        directory = directory.EnumerateDirectories()
            .ToDictionary(x => x.Name, x => GetDirectory(x)),
        file = directory.EnumerateFiles().Select(x => x.Name).ToList()
    });
} 
```

示例用法：

```
var json = GetDirectory(new DirectoryInfo("...some path...")).ToString(); 
```

这将为您提供如下所示的 JSON：

```
{
    "directory":
    {
        "dirA": {
            "file" : [ "file0.txt", "file1.jpg" ]
        },
        "emptyDir": {
        }
    },
    "file": [ "file2.png" ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:09:30.303

事实上，有一种使用[Json.NET](http://james.newtonking.com/pages/json-net.aspx)将 C# 对象转换为 JSON 的简单方法。

您只需创建一个`List<>`包含您想要的数据然后调用

```
var wrapper = new { TreeData= list };
string json = JsonConvert.SerializeObject(wrapper); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T17:08:29.723

您可以创建自定义类，例如：

```
abstract class DirectoryChildItem
{
    public string Name { get; set; }
}

class Directory : DirectoryChildItem
{
    public List<DirectoryChildItem> Childs { get; set; }
}

class File : DirectoryChildItem
{
} 
```

然后你应该使用静态类 System.IO.Directory 遍历你的文件系统并使用上面的类创建项目。遍历文件系统后，在您的 ASP.NET MVC 操作中使用“return Json(obj)”方法

# javascript - 带有弹出框/点击框的 2 路绑定指令

> ID：15793630
> 
> 赞同：1
> 
> 时间：2013-04-03T17:03:20.313
> 
> 标签：javascript, angularjs, angularjs-directive

我真的很享受 Angular 的体验，但遇到了以下绊脚石。

我正在尝试使用 Angular 中的 popover/clickover 小部件进行 2 路绑定，但遇到了几个问题 - 首先，绑定似乎只有在我开始在该`input`字段中输入时才会启动，其次，即使它确实启动了，它也不会'似乎不是特别'可靠' - 有时 $scope 中的变量没有更新，我认为传达这个问题的最简单方法是尝试在 jfiddle 中使用 UI。

```
 element.clickover({
            global: true,
            width: 400,
            scope: {
                dto: '=dto'
            },
            content: "<div id='my-poppy' class='btn-toolbar'> Edit note :{{dto.id}} <input class='span2' ng-model='dto.note'> <button class='btn btn-success' ng-click='save(dto); '>Update</button></div>"
        }).on('shown', function () {
            $compile($("#my-poppy").contents())(scope);

        }); 
```

下面的 jsfiddle 包含所有代码。有没有人遇到过这个问题？

[http://fiddle.jshell.net/Bfu79/2/](http://fiddle.jshell.net/Bfu79/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:42:39.333

编译后需要一个`$digest`循环。只需`scope.$apply()`在该行之后添加一个权利`$compile`，一切都会顺利进行。

# stream - 在 Prolog 中读取流时是否总是需要使用 '.\n' ？

> ID：15793632
> 
> 赞同：2
> 
> 时间：2013-04-03T17:03:24.870
> 
> 标签：stream, prolog, pipe, iso-prolog

我正在使用管道来通信两个 Prolog 进程，每次我到达`read/2`谓词以从我的管道中读取消息时，程序都会阻塞并保持这种状态。我不明白为什么会发生这种情况（我尝试了非常简单的程序），最后我意识到了三件事：

1.  每次我`write/2`用来发送消息时，发送者进程都必须以`.\n`. 如果消息没有这样结束，接收进程将卡在`read/2`谓词上。
2.  如果发送方不刷新输出，则消息不会留在管道缓冲区中。这似乎很明显，但一开始并不适合我。
3.  虽然当消息没有被刷新时`read/2`是阻塞的，根本不是阻塞的，所以在这种情况下`wait_for_input/3`不需要。`flush_output/1`

### 例子：

这不起作用：

```
example1 :-
    pipe(R,W),
    write(W,hello),
    read(R,S). % The program is blocked here. 
```

那个也行不通：

```
example2 :-
    pipe(R,W),
    write(W,'hello.\n'), 
    read(R,S). % The program is blocked here. 
```

虽然这两个，做工作：

```
example3 :-
    pipe(R,W),
    write(W,'hello.\n'),
    flush_output(W),
    read(R,S).
example4 :-
    pipe(R,W),
    write(W,'hello.\n'),
    wait_for_input([W],L,infinite). 
```

现在我的问题是为什么？从管道读取（实际上是从您可能想要读取的任何流中读取）时，Prolog 仅“接受”以句点结尾的整行是否有原因？为什么`read`阻塞而不阻塞`wait_for_input/3`（假设消息没有被刷新）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:17:16.467

有效的 Prolog 读取项总是以句点结尾，称为`end char (* 6.4.8 *)`. 在 6.4.8 其他标记中，标准内容如下：

> 结束字符后应跟随布局字符或`%`.

所以这就是标准的要求。

除了空格、制表符和其他布局字符以及`%`. 然而，由于 ttys 和相关缓冲的流行，坚持使用换行符似乎是一个很好的惯例。

需要 end char 的原因是 Prolog 语法允许中缀和后缀运算符。考虑作为输入

```
f(1) + g(2). 
```

阅读时`f(1)`您可能会认为这已经是整个术语，但是您仍然必须等待该期间以确保此后没有中缀或后缀。

另请注意，您必须使用`writeq/1`or`write_canonical/1`来生成可以回读的输出。你不能使用`write/1`.

例如，考虑`write([(.)+ .]).`首先，这是有效的语法。点后面紧跟着其他字符。备注`.`通常称为末尾的句点，而在 Prolog 文本中称为点。

`write/1`将其写为`[. + .]`. 请注意，第一个`.`现在后面是一个空格。所以当这个文本被读回时，只会`[.`被读到。

还有很多其他丑陋的例子，比如这个，通常他们不会打你。但是一旦你被击中，你就会被击中......

# binding - ASIHTTPRequest Monotouch 绑定回调/事件

> ID：15793633
> 
> 赞同：1
> 
> 时间：2013-04-03T17:03:27.637
> 
> 标签：binding, event-handling, xamarin.ios, asihttprequest

我正在尝试将 ASIHTTPRequest 目标 c 库包装到 monotouch，但我被困在 . Objective-C头文件包含

**@property (assign) SEL requestDidFinishSelector;**

当我使用单点触控绑定生成器时，它会生成

**[导出（“requestDidStartSelector”）]**

**选择器 RequestDidStartSelector { get; 放; }**

这编译成功，但没有被调用。我希望能够做到

**networkQueue.RequestDidFinish += HandleRequestFinish;**

来自我的 C# 代码。

是否有人已经拥有 ASIHTTPRequest 单点触控绑定或指导我如何连接回调事件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:16:31.043

选择器只会将句柄返回给您可以使用的“选择器”。

您需要做的是或多或少地像这样编写事件处理程序：

```
class MyCallbacker {
    public MyCallbacker (Action t) { this.t = t; }

    [Preserve (Conditional=true)]
    [Export ("MyCallBack")]
    void Callback () {
         t ();
    }
}

event RequestDidFinish {
    add {
         requestDidFinishSelector = new Selector ("MyCallback");
         new MyCallbacker (() => value);
    }
} 
```

# c++ - 查找立体图像中斑点的真实位置和大小

> ID：15793637
> 
> 赞同：0
> 
> 时间：2013-04-03T17:03:35.977
> 
> 标签：c++, opencv, object-recognition

有没有人知道如何在立体图像中找到斑点或物体的大小？我知道立体图像输出深度信息，但我想知道检测到的物体有多大或多高。假设我在检测到的对象周围找到了一个边界矩形，该对象位于房间更远的位置。如何以厘米等度量单位找到边界矩形的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:29:18.790

1.  对于立体声对，您需要找到立体声对的基本矩阵/基本矩阵
2.  检测对象或对象上的点，并在两个图像中找到它们的对应关系/匹配。对于第 1 点和第 2 点，请参阅立体声教程。
3.  深度可以从立体对信息中获得。但是对于对象所在的高度，您必须让计算机了解哪个是您的参考，因为高度 = 0（如地板）。因此，如果您可以让计算机了解地板的位置，那么地板与物体之间 y 坐标的差值就是您的身高。

# c# - 使用来自组合框选择 c# 的 mysql 数据值填充文本框

> ID：15793640
> 
> 赞同：0
> 
> 时间：2013-04-03T17:03:41.680
> 
> 标签：c#, mysql, combobox, textbox, populate

我正在尝试用我的数据库中的值填充我的文本框，因此当用户从组合框中选择老师的姓名时，文本框将填充他们的联系方式。这是我到目前为止的代码。没有错误，但是当我从组合框中选择一个值时，文本框仍然是空白的。

```
 private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        MySqlConnection cs = new MySqlConnection(connectionSQL);
        cs.Open();

        DataSet ds = new DataSet();

        MySqlDataAdapter da = new MySqlDataAdapter("Select * from Teacher WHERE name='" + comboBox1.Text + "'", cs);

        MySqlCommandBuilder cmd = new MySqlCommandBuilder(da);

        da.Fill(ds);

        if (comboBox1.SelectedIndex > 0)
        {

            NameBox.Text = ds.Tables[0].Rows[0]["name"].ToString();
            AddressBox.Text = ds.Tables[0].Rows[0]["address"].ToString();

        } 
```

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:07:33.477

我必须相信，根据您的代码，问题就在这里：

```
if (comboBox1.SelectedIndex > 0) 
```

如果列表中只有一个项目**或**用户选择了第一个项目，则查询将运行，但不会填充文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:45:06.540

您在验证所选索引之前查询数据库，并且您应该检查大于 -1 而不是 0 的所选索引。

```
private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (comboBox1.SelectIndex < 0) 
    {
        // Don't want to suffer database hit if nothing is selected
        // Simply clear text boxes and return
        NameBox.Text = "";
        AddressBox.Text = "";
    }
    else 
    {
        MySqlConnection cs = new MySqlConnection(connectionSQL);
        cs.Open();

        DataSet ds = new DataSet();

        // You only need to select the address since you already have the name unless 
        // they are displayed differently and you want the database display to show
        MySqlDataAdapter da = new MySqlDataAdapter("Select address from Teacher WHERE name='" + comboBox1.Text + "'", cs);

        MySqlCommandBuilder cmd = new MySqlCommandBuilder(da);

        da.Fill(ds);

        NameBox.Text = comboBox1.Text;
        AddressBox.Text = ds.Tables[0].Rows[0]["address"].ToString();
    }
} 
```

此外，如果名称在组合框中的显示方式与在数据库中的显示方式不同，这种方式很容易被忽略，例如名字和姓氏之间的额外空格或其他难以明显检测到的内容，这可能会导致查询不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T13:48:17.817

```
AddressBox.DataBind();
NameBox.DataBind(); 
```

# asp.net - 未设置对象引用。登录失败

> ID：15793656
> 
> 赞同：0
> 
> 时间：2013-04-03T17:04:21.123
> 
> 标签：asp.net, sql, sql-server, vb.net

我正在使用 VS 2012 Professional 和 SQL Server 2012 Express。

我有两个问题。

**首先：**我正在尝试运行**Registration.aspx**，但我在**MasterPage**的这一行上收到错误：

```
 txtLoginUser.Visible = True 
```

* * *

```
Object reference not set to an instance of an object. 
```

**母版页：**

```
<%@ Master Language="VB" CodeFile="MasterPage.master.vb" Inherits="MasterPage" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<script runat="server">

    Protected Sub Page_Load(sender As Object, e As EventArgs)

        If Session("userid") = Nothing Then
            txtLoginUser.Visible = True
            txtLoginPass.Visible = True

        Else

            Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
            Dim useridComm As String = "SELECT name, surname FROM users WHERE user_id=@userid"
            Dim sqlUserID As New SqlCommand

            conn.Open()

            Dim userid As String = Session("userid")

            sqlUserID = New SqlCommand(useridComm, conn)
            sqlUserID.Parameters.AddWithValue("@userid", userid)
            Dim datareader As SqlDataReader = sqlUserID.ExecuteReader()
            If datareader.HasRows Then
                Response.Redirect("Default.aspx")
                lblLoggedIn.Text = datareader("name").ToString() & " " & datareader("surname").ToString()
            End If
            datareader.Close()
            conn.Close()

        End If
    End Sub

   Protected Sub Button1_Click(sender As Object, e As EventArgs)

        Dim loginSQL As New SqlCommand
        Dim loginComm As String

        Dim CommonFunctions As New CommonFunctions()
        Dim dec_pass As String = CommonFunctions.EncryptPassword(txtLoginPass.Text.Trim)

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")

        loginComm = "SELECT user_id FROM users WHERE username=@username and password=@password"

        conn.Open()

        loginSQL = New SqlCommand(loginComm, conn)
        loginSQL.Parameters.AddWithValue("@username", txtLoginUser.Text.ToString)
        loginSQL.Parameters.AddWithValue("@password", dec_pass)
        Dim dr As SqlDataReader = loginSQL.ExecuteReader()
        dr.Read()

        If dr.HasRows Then
            Session("userid") = dr("user_id")
        ElseIf dr.HasRows = False Then

            lblRegister.ForeColor = Drawing.Color.Red
            lblRegister.Text = "Incorrect Username/Password."
        End If
        dr.Close()
        conn.Close()

    End Sub

</script>

<head>
    <meta charset="utf-8" />
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <title></title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />
</head>

<body>

    <form id="form1" runat="server">

<div id="wrapper">

    <header id="header">
        <strong>Header:</strong> Mobile CMS

        </header>

<section id="login">

    <div id="login-form">

            <asp:ContentPlaceHolder id="ContentPlaceHolder2" runat="server">

                <p>

                    <asp:Label ID="lblUsername" runat="server" Font-Bold="True" Text="U:"></asp:Label>
&nbsp;<asp:TextBox ID="txtLoginUser" runat="server" BorderStyle="None" BorderWidth="0px" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Label ID="lblUsername0" runat="server" Font-Bold="True" Text="P:"></asp:Label>
                    <asp:TextBox ID="txtLoginPass" runat="server" BorderStyle="None" BorderWidth="0px" TextMode="Password" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Button ID="btnLogin" runat="server" BorderStyle="None" OnClick="Button1_Click" Text="Login" />

                </p>

                <p>

                    <asp:Label ID="lblRegister" runat="server" Font-Bold="True" Font-Underline="True" ForeColor="#0000CC" Text="Register"></asp:Label>

                    <asp:ContentPlaceHolder ID="ContentPlaceHolder3" runat="server">
                        <asp:Label ID="lblLoggedIn" runat="server" Text=""></asp:Label>
                    </asp:ContentPlaceHolder>

                </p>

                </asp:ContentPlaceHolder>

    </div>

</section>

<div class="navigation-bar">
       <ul class="navigation-menu">

            <li><a href="#" class="home">Home</a></li>
            <li><a href="#" class="mainsettings">Settings</a></li>
            <li><a href="#" class="profile">Profile</a>

                <ul>
                    <li><a href="#" class="messages">Messages</a></li>
                    <li><a href="#" class="settings">Profile Settings</a></li>
                </ul>

            </li>
            <li><a href="#" class="uploads">Uploads</a></li>
            <li><a href="#" class="documents">Media</a>

                <ul>
                    <li><a href="#" class="docs">Documents</a></li>
                    <li><a href="#" class="others">Others</a></li>
                </ul>

            </li>

            <li><a href="#" class="projects">Projects</a>

                <ul>
                    <li><a href="#" class="yprojects">Your Projects</a></li>
                    <li><a href="#" class="otherprojects">Other Projects</a></li>
                </ul>

            </li>

        </ul>

    </div>

    <section id="middle">

        <div id="container">
            <div id="content">
                <div>
                    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

                    </asp:ContentPlaceHolder>
                </div>
        </div>
        </div>

    </section>

    <footer id="footer">
        <strong>Footer:</strong> adsfdsgfds
    </footer>

</div>

    </form>

</body>
</html> 
```

**注册.aspx：**

```
<%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false" CodeFile="Registration.aspx.vb" Inherits="Registration" %>

<%-- Add content controls here --%>
<asp:Content ID="Content1" runat="server" contentplaceholderid="ContentPlaceHolder1">

        <p>
            <strong>Name</strong></p>
        <p>
            <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
        </p>
        <p>
            <strong>Surname</strong></p>
        <p>
            <asp:TextBox ID="txtSurname" runat="server"></asp:TextBox>
        </p>
        <p>
            <strong>Username&nbsp;&nbsp;
            <asp:Label ID="lblUsername" runat="server" BorderStyle="Solid" Font-Bold="True" ForeColor="Red" Visible="False"></asp:Label>
            </strong></p>
        <p>
            <asp:TextBox ID="txtUsername" runat="server"></asp:TextBox>
        </p>
        <p>
            <strong>Password</strong></p>
        <p>
            <asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox>
        </p>
        <p>
            <strong>Confirm Password</strong></p>
        <p>
            <asp:TextBox ID="txtCPassword" runat="server" TextMode="Password"></asp:TextBox>
        </p>
        <p>
            <strong>Email</strong>
            <asp:RequiredFieldValidator ID="req4" runat="server" ControlToValidate="txtEmail" Text="*" />
            <asp:RegularExpressionValidator
              ID="emailValidator"
              runat="server"
              ErrorMessage="Incorrect Email!"
              controltovalidate="txtEmail"
              validationexpression="\w+\w*\@\w+\w+\w*\.(com|edu|org|gov)" Font-Bold="True" ForeColor="Red"

              ></asp:RegularExpressionValidator>

            </p>
        <p>

            <asp:TextBox ID="txtEmail" runat="server" Width="198px"></asp:TextBox>
        </p>
        <p>
            <strong>Confirm Email</strong>

            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="txtCEmail" Text="*" />
             <asp:RegularExpressionValidator
              ID="RegularExpressionValidator2"
              runat="server"
              ErrorMessage="Incorrect Confirmation Email!"
              controltovalidate="txtCEmail"
              validationexpression="\w+\w*\@\w+\w+\w*\.(com|edu|org|gov)" Font-Bold="True" ForeColor="Red"

              ></asp:RegularExpressionValidator>

        </p>
        <p>
            <asp:TextBox ID="txtCEmail" runat="server" Width="191px"></asp:TextBox>

        </p>
        <p>
            <strong>Address </strong>
        </p>
        <p>
            <strong>
            <asp:TextBox ID="txtAddress1" runat="server" Width="237px"></asp:TextBox>
            </strong>
        </p>
        <p>
            <strong>
            <asp:TextBox ID="txtAddress2" runat="server" Width="238px"></asp:TextBox>
            </strong>
        </p>
        <p>
            <strong>City</strong></p>
        <p>
            <asp:TextBox ID="txtCity" runat="server" Width="143px"></asp:TextBox>
        </p>
        <p>
            <strong>Country</strong></p>
        <p>
            <asp:DropDownList ID="drpCountry" runat="server" DataSourceID="XmlDataSource1" DataTextField="iso" DataValueField="iso">
            </asp:DropDownList>
            <asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/countries/countries.xml"></asp:XmlDataSource>
        </p>
        <p>
            <strong>Date of Birth&nbsp;&nbsp;
            <asp:Label ID="lblCal" runat="server" BorderStyle="Solid" Font-Bold="True" ForeColor="Red" Visible="False"></asp:Label>
            </strong></p>
        <p>
            <asp:Calendar ID="calDOB" runat="server" BackColor="White" BorderColor="#999999" Font-Names="Verdana" Font-Size="8pt" ForeColor="Black" Height="180px" Width="200px" CellPadding="4" DayNameFormat="Shortest" EnableTheming="True">
                <DayHeaderStyle Font-Bold="True" Font-Size="7pt" BackColor="#CCCCCC" />
                <NextPrevStyle VerticalAlign="Bottom" />
                <OtherMonthDayStyle ForeColor="#808080" />
                <SelectedDayStyle BackColor="#666666" ForeColor="White" Font-Bold="True" />
                <SelectorStyle BackColor="#CCCCCC" />
                <TitleStyle BackColor="#999999" BorderColor="Black" Font-Bold="True" />
                <TodayDayStyle BackColor="#CCCCCC" ForeColor="Black" />
                <WeekendDayStyle BackColor="#FFFFCC" />
            </asp:Calendar>

        </p>

        <p>
            <asp:DropDownList ID="drpMonth" runat="server" AutoPostBack="True">
            </asp:DropDownList>
            <asp:DropDownList ID="drpYear" runat="server" AutoPostBack="True">
            </asp:DropDownList>
        </p>
        <p>
            <strong>Occupation</strong></p>
        <p>
            <asp:TextBox ID="txtOccupation" runat="server" Width="143px"></asp:TextBox>
        </p>
        <p>
            <strong>Work Location</strong></p>
        <p>
            <asp:TextBox ID="txtWorkLocation" runat="server" Width="143px"></asp:TextBox>
        </p>
        <p>
            &nbsp;</p>
        <p>
            <asp:Button ID="btnRegister" runat="server" BorderStyle="Solid" Text="Register" />
        </p>
        <p>
            <strong>
            <asp:Label ID="lblFields" runat="server" BorderStyle="Solid" Font-Bold="True" ForeColor="Red" Visible="False"></asp:Label>
            </strong>
        </p>
        <p>
            &nbsp;</p>

</asp:Content>

<asp:Content ID="Content2" runat="server" contentplaceholderid="ContentPlaceHolder2">
</asp:Content> 
```

**第二：**第二个问题是，当我运行 MasterPage 并输入登录详细信息时，登录将不起作用，如果我单击两次，我会得到：

![输入两次登录凭据（结果）](https://i.stack.imgur.com/BeazZ.png)

怎么了？我怎么解决这个问题？

我想要做的是，如果具有“用户 ID”的会话可用，它将显示“欢迎，姓氏”，如果没有，则重新显示登录屏幕（2 个文本框，按钮 + 标签）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:36:14.790

1.  您需要将登录内容移到 id 的 ContentPlaceHolder 之外`ContentPlaceHolder2`。

2.  由于无限重定向，您收到第二个错误。您在`default.aspx`并且您的母版页看到您已登录，运行您的查询，并将您重定向回`default.aspx`......并且循环继续。您需要摆脱该重定向。

处理身份验证的更好方法是不使用该会话变量，而只需设置一个身份验证 cookie。您可以使用[FormsAuthentication.RedirectFromLoginPage 之](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)类的东西。

所以像：

```
If dr.HasRows Then
    FormsAuthentication.RedirectFromLoginPage(dr("user_id"), true) 
```

使用此 cookie，您将能够使用许多内置的 ASP.NET 功能来处理登录/身份验证。

# performance - 如何使 eclipselink 在批量插入方面表现更好

> ID：15793658
> 
> 赞同：1
> 
> 时间：2013-04-03T17:04:45.187
> 
> 标签：performance, jpa, jdbc, eclipselink

我正在测试 eclipselink 以使批量数据插入 derby。同组数据对比，eclipse链接jdbc批量更新耗时加倍。

```
I have enabled the batchupdate feature of eclipse link, and the other properties:

        <property name="eclipselink.jdbc.batch-writing" value="JDBC"/>
        <property name="eclipselink.jdbc.batch-writing.size" value="1000"/>
        <property name="eclipselink.jdbc.cache-statements" value="true"/>
        <property name="eclipselink.jdbc.cache-statements.size" value="30"/>
        <property name="eclipselink.cache.shared.default" value="false"/>
        <property name="eclipselink.jdbc.read-connections.max" value="20"/>
        <property name="eclipselink.jdbc.read-connections.min" value="1"/>
        <property name="eclipselink.jdbc.write-connections.min" value="1"/>
        <property name="eclipselink.jdbc.write-connections.max" value="30"/> 
```

问题是如何使eclipse链接更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:14:39.550

请包括代码和 SQL 日志。还包括您的 JDBC 代码，并确保它是 kosher（结束语句等）。

你在使用序列预分配吗？如果没有，那么您将不会获得任何批处理（检查您的 SQL 日志以查看批处理是否正在发生）。

我不会更改连接池默认值，您的效率低于默认值（初始 1，最小 32，最大 32，没有单独的读/写池）。具有不同的最小值/最大值会导致连接节流，这很糟糕。

见， [http://java-persistence-performance.blogspot.com/2011/06/how-to-improve-jpa-performance-by-1825.html](http://java-persistence-performance.blogspot.com/2011/06/how-to-improve-jpa-performance-by-1825.html)

由于 JPA 在 JDBC 之上运行，因此总是比完全优化的 JDBC 代码花费更多的时间。但是确实有让你使用 Java 对象而不编写 JDBC 代码的优点，并且只通过更改标志而不是重写代码来进行诸如批量写入之类的重大优化。

# installation - 将合并模块添加到 Wix 项目导致升级失败

> ID：15793659
> 
> 赞同：3
> 
> 时间：2013-04-03T17:04:48.373
> 
> 标签：installation, wix, windows-installer, wix3.6, merge-module

因此，我有一个使用 WiX 编写的产品安装程序，一旦合并了“Microsoft_VC100_CRT_x86.msm”合并模块，它就无法正确升级。安装过程中不会删除旧产品。如果从项目中删除合并模块，则会按原样删除旧版本。

合并模块非常简单地包含在 Directory 节点下：

```
<Directory Id="ProgramFilesFolder">
  <Merge Id="VC10_CRT_MergeId1" Language="0" SourceFile="c:\\Program Files (x86)\\Common Files\\Merge Modules\\Microsoft_VC100_CRT_x86.msm" DiskId="1" />
... other stuff
</Directory> 
```

然后在特性中引用：

```
<Feature Id="MainFeature" Title="Core Files" Level="1">
  <MergeRef Id="VC10_CRT_MergeId1" />
  ... other stuff
</Feature> 
```

我正在增加产品的版本号，但升级失败，新版本安装在旧版本之上，但没有执行正确的升级 - 两个版本都列在“添加或删除程序”中。

旧产品应按如下方式删除：

```
<InstallExecuteSequence>
  <RemoveExistingProducts After='InstallValidate'/>
</InstallExecuteSequence> 
```

我还根据[http://jpassing.com/2007/06/16/where-to-place-removeexistingproducts-in-a-major-msi-upgrade/](http://jpassing.com/2007/06/16/where-to-place-removeexistingproducts-in-a-major-msi-upgrade/)尝试了 RemoveExistingProducts 的各种其他职位，结果相同。

在安装程序的详细日志中可以看到以下内容：

```
MSI (s) (AC:44) [19:48:22:300]: Doing action: RemoveExistingProducts
MSI (s) (AC:44) [19:48:22:300]: Note: 1: 2205 2:  3: ActionText 
Action start 19:48:22: RemoveExistingProducts.
MSI (s) (AC:44) [19:48:22:300]: Note: 1: 2205 2:  3: Error 
MSI (s) (AC:44) [19:48:22:300]: Note: 1: 2228 2:  3: Error 4: SELECT `Message` FROM `Error` WHERE `Error` = 22 
MSI (s) (AC:44) [19:48:22:301]: Note: 1: 2205 2:  3: Error 
MSI (s) (AC:44) [19:48:22:301]: Note: 1: 2228 2:  3: Error 4: SELECT `Message` FROM `Error` WHERE `Error` = 23 
MSI (s) (AC:44) [19:48:22:301]: Note: 1: 2205 2:  3: Error 
MSI (s) (AC:44) [19:48:22:301]: Note: 1: 2228 2:  3: Error 4: SELECT `Message` FROM `Error` WHERE `Error` = 16 
MSI (s) (AC:44) [19:48:22:301]: Note: 1: 2205 2:  3: Error 
MSI (s) (AC:44) [19:48:22:301]: Note: 1: 2228 2:  3: Error 4: SELECT `Message` FROM `Error` WHERE `Error` = 21 
Action ended 19:48:22: RemoveExistingProducts. Return value 1. 
```

在 WiX 构建日志中，我得到以下信息（但从内存中这对于 VC 运行时 msms 来说是正常的？）：

```
1>light.exe(0,0): warning LGHT1076: ICE82: This action SystemFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 has duplicate sequence number 1 in the table InstallExecuteSequence
1>light.exe(0,0): warning LGHT1076: ICE82: This action SystemFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 has duplicate sequence number 1 in the table InstallUISequence
1>light.exe(0,0): warning LGHT1076: ICE82: This action SystemFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 has duplicate sequence number 3 in the table AdminExecuteSequence
1>light.exe(0,0): warning LGHT1076: ICE82: This action SystemFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 has duplicate sequence number 3 in the table AdminUISequence
1>light.exe(0,0): warning LGHT1076: ICE82: This action SystemFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 has duplicate sequence number 3 in the table AdvtExecuteSequence 
```

msi 中的 InstallExecuteSequence 如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/WulkH.png)

如果删除了合并模块（由于安装程序中的文件更新，需要将其包含在内），则升级将按预期进行。这是合并模块的东西/WiX/Windows 安装程序中的错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:46:25.737

您在升级时没有收到任何错误消息？它通过了，但你留下了两个添加/删除条目和一个混乱的文件系统？听起来您的两个版本不共享相同的升级代码。

如果您尝试进行[小升级](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370037%28v=vs.85%29.aspx)，则不会触发 RemoveExistingProducts。文件应该更新，但您将保留一个添加/删除条目。

如果您尝试进行将触发 RemoveExistingProducts 的重大升级，但您需要正确设置[升级元素](http://wix.sourceforge.net/manual-wix2/wix_xsd_upgrade.htm)。

另外，作为提示，不要使用合并模块。由于 Windows Installer 组件规则的工作方式，在小升级时，您无法删除合并模块添加的组件。您将需要进行重大升级。（或者手动将旧合并模块中的所有组件代码添加到您的项目中。不好玩。）根据您所有东西的设置方式，强制进行重大升级可能会很麻烦。

如果您添加合并模块并且稍后需要将其删除，您将遇到此问题。或者，如果您想将 VS 2010 模块替换为 VS 2012 模块。MS 甚至打破了服务包之间的组件规则一次。通过在产品安装期间或之前运行 vcredist*.exe 来安装它们要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:59:22.290

你发现问题了吗？检查您正在添加的合并模块的版本是否比您正在安装的系统上已经存在的版本旧。在这种情况下，MSI 会删除 VC++ 文件，但不会放下新文件，因为它们较旧。

编辑：我找到了解决您问题的方法！！你应该使用： RemoveExistingProducts After="InstallFinalize

参考：http: [//blogs.msdn.com/b/astebner/archive/2007/02/08/assemblies-may-be-missing-from-the-gac-or-winsxs-cache-after-an-msi-主要升级.aspx](http://blogs.msdn.com/b/astebner/archive/2007/02/08/assemblies-may-be-missing-from-the-gac-or-winsxs-cache-after-an-msi-major-upgrade.aspx)

我有同样的问题，改变这个解决了它。

# javascript - 需要使用 javascript 在邮政编码字段中添加空格

> ID：15793661
> 
> 赞同：-2
> 
> 时间：2013-04-03T17:05:03.937
> 
> 标签：javascript

我需要在一个表单中在邮政编码字段中添加一个空格，从最后一个字符开始的第三个。这是国际邮政编码，因此这就是我需要这个的原因。

例如，有人输入：

xxxxxx123

作为他们的邮政编码，我需要将其重新格式化为：

xxxxxx 123

至少在提交时。

这是我开始的，但我不知道从哪里开始......

```
function addSpaceToZip()
{
    zip = $U.getObj('zip').value;
    zipLength = zip.length; 
    zipNewLength =  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:21:56.727

可能最简单的方法是只使用烘焙的子字符串函数。

```
function addSpaceToZip()
{
   var zip = $U.getObj('zip').value;
   return zip.substring(0, zip.length - 3) + ' ' + zip.substring(zip.length - 3);
} 
```

# javascript - 带有完整网站按钮的移动网站

> ID：15793666
> 
> 赞同：0
> 
> 时间：2013-04-03T17:05:30.873
> 
> 标签：javascript

我正在寻找一种方法来执行以下操作

1.  如果他们在移动设备上，它会转到 -> m.domainname.com/
2.  我希望这个可扩展，以便将来我可以做 -> m.domainname.com/iphone 或 /ipad 等。
3.  我希望有一个绕过功能，允许用户绕过网站的移动版并直接进入完整版（即使他们在智能手机上）。

我过去看过这段代码，但最近没能找到它，我想确保我以最好的方式做到这一点。

如果可能，请提供代码示例或我可以找到代码/代码教程的地方。

如果您看到我没有包含在我应该拥有的任何其他标签，请添加它们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:09:33.410

第 1 点和第 2 点必须通过用户代理检查来完成。这相对容易——如果您使用服务器端语言，您可以轻松查看 User-agent: 标头（但请注意，它可能会被欺骗！）。[您可以在http://www.useragentstring.com/pages/useragentstring.php](http://www.useragentstring.com/pages/useragentstring.php)找到按浏览器排序的完整列表。例如，Safari 页面包含所有 iPad 用户代理版本。

第 3 点将是第 1 点的改进 - 您需要使用他们的版本对用户进行 cookie。

所以，在纯 JS 中，这会很困难。不是不可能，但很难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:10:44.183

*   [您可以在http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)找到不同的方法来检测它是否是移动设备。他们的 Javascript 示例：

> (function(a,b){if(/(android|bb\d+|meego).+mobile|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)| iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm(os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6 )0|symbian|treo|up.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50 [1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny| yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s)|avan|be(ck|ll|nq)|bi(lb|rd) |bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd )|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em( l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|*)|g1 u|g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi (pt|ta)|hp(i|ip)|hs-c|ht(c(-| |*|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac(|-|/)|ibro|idea|ig01|ikom| im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(|/)|klon|kpt|kwc-|kyo(c|k)|le(no| xi)|lg( g|/(k|l|u)|50|54|-[aw])|libw|lynx|m1-w|m3ga|m50/|ma(te|ui|xo)|mc( 01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-||o|v) |zz)|mt(50|p1|v)|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0 (0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1 |p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt |se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro (ve|zo)|s55/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk/|se(c(-|0|1) |47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft| ny)|sp(01|h-|v-|v)|s​​y(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t- mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(.b|g1|si)|utst|v400|v750|veri|vi(rg|te)| vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )| webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0,4)))window.location=b}) (navigator.userAgent||navigator.vendor||window.opera,'[http://detectmobilebrowser.com/mobile](http://detectmobilebrowser.com/mobile) ');

*   如您所见，您可以轻松更改希望他们导航到的 url。
*   许多网站使用一个简单的对话框来询问用户他们是想使用普通网站还是移动网站，你也可以这样做。我在我的一个网站上使用 jQuery Mobile，所以我只使用一个普通的对话框：

![对话](https://i.stack.imgur.com/E1B9h.png)

祝你好运。

# java - 通知后跟另一个通知

> ID：15793667
> 
> 赞同：2
> 
> 时间：2013-04-03T17:05:32.283
> 
> 标签：java, multithreading, locking, notify

如果您通知一个锁，然后立即再次通知该锁，会发生什么？假设有 2 个或更多线程在等待该锁。是否保证两个线程被唤醒？或者是否有可能只有一个线程被唤醒，这意味着第二个通知变得过时了？

```
lock.notify();
lock.notify(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:08:21.923

> 假设有 2 个或更多线程在等待该锁。是否保证两个线程被唤醒？

是的。每个通知从等待队列中取出一个线程并将其放入阻塞队列中——被唤醒的线程必须首先获得对相关`synchronized`锁的访问权。如果只有 1 个线程在锁上等待，那么第二个线程`notify()`什么也不做。

重要的是要意识到线程*不会*立即开始执行。由于它必须在一个`synchronized`块中`lock`才能执行它，所以它必须在它可以运行之前`wait()`访问另一个。`lock`块队列中可能已经有多个其他线程，等待访问`lock`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:12:54.960

我怀疑这种行为类似于调用 notifyAll()（在这种情况下，它更像是 notifyTwo()）

> 被唤醒的线程将以通常的方式与可能正在积极竞争以在该对象上同步的任何其他线程竞争；例如，被唤醒的线程在成为下一个锁定该对象的线程时不享有可靠的特权或劣势。

# c# - 在非托管 C++ 程序中实现 C# DLL COM 文件

> ID：15793668
> 
> 赞同：1
> 
> 时间：2013-04-03T17:05:40.207
> 
> 标签：c#, c++, com, unmanaged

这是我的另一个问题，也导致了这个问题作为参考： [如何从非托管 C++ 调用托管 C++ 方法](https://stackoverflow.com/questions/15772765/how-to-call-managed-c-methods-from-un-managed-c)

我已经成功创建了一个 C# COM 文件。现在我需要简单解释一下如何在非托管 C++ 中实现它。

我正在关注这个例子，但 c++ 部分很弱。 [http://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C](http://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C)

这是我的 COM 文件

```
using System;
using System.Runtime.InteropServices;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace cSharpRiJHarn
{
    [Guid("ED1483A3-000A-41f5-B1BC-5235F5897872")]
    public interface DBCOM_Interface
    {
        [DispId(1)]
        String encrypt(string s);
        [DispId(2)]
        String decrpyt(string s);
    }

    [Guid("A6BCEC1D-B60C-4c97-B9AD-1FE72642A9F8"),
    InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface DBCOM_Events
    {
    }

    [Guid("7C13A8C6-4230-445f-8C77-0CA5EDECDCB5"),
    ClassInterface(ClassInterfaceType.None),
    ComSourceInterfaces(typeof(DBCOM_Events))]
    public class RijndaelLink : DBCOM_Interface
    {
        public String encrypt(String s)
        {
            return Rijndael.EncryptString(s); 
        }
        public String decrpyt(String s)
        {
            return Rijndael.DecryptString(s);
        }
    }
} 
```

我只想要一个非常基本的示例，将其与非托管代码一起使用。请在您的回答中包括：

*   我需要包含项目还是只包含 COM 的源文件
*   我需要添加参考吗
*   传递字符串并使用 cout 打印出来的一个非常基本的示例。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T22:02:52.873

您需要做的第一件事是在 .NET 中正确定义 COM 对象，以供非托管世界（C++ 或其他）使用。这是一个体面的定义：

```
namespace cSharpRiJHarn
{
    [Guid("ED1483A3-000A-41f5-B1BC-5235F5897872")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    [ComVisible(true)]
    public interface IRijndaelLink
    {
        string encrypt(string s);
        string decrypt(string s);
    }

    [Guid("7C13A8C6-4230-445f-8C77-0CA5EDECDCB5")]
    [ComVisible(true)]
    public class RijndaelLink : IRijndaelLink
    {
        public string encrypt(string s)
        {
            return Rijndael.EncryptString(s); 
        }

        public string decrypt(string s)
        {
            return Rijndael.DecryptString(s); 
        }
    }
} 
```

接下来，您需要使用[RegAsm](http://msdn.microsoft.com/en-us/library/tzat5yw6.aspx)工具为 COM 注册此 .NET 程序集。我还建议你用它构建一个[类型库（.TLB）](http://msdn.microsoft.com/library/windows/desktop/aa367061.aspx)，像这样（我想你为 X86 构建整个东西，而不是 X64）：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe YourAssembly.dll /tlb:YourAssembly.tlb /codebase 
```

请适应您的实际路径。还要检查代码库 arg，因为您在生产中可能不需要它。

这将构建一个包含接口和类的 .TLB 文件。它之所以有效，是因为我们添加了[ComVisible](http://msdn.microsoft.com/library/system.runtime.interopservices.comvisibleattribute.aspx)属性。您还会注意到我没有定义 Dispatch 或 Dual 接口，因为在这个示例中，我不需要[COM 自动化](http://msdn.microsoft.com/library/windows/desktop/ms221608.aspx)（VB、VBA）或任何脚本语言（VBScript、JScript）支持，只有更容易使用的 IUnknown 接口在普通的 C/C++ 中，而不是 IDispatch 接口。

现在，有一种简单的方法可以使用 Microsoft 特定的 C++ 扩展将其导入非托管 C++ 世界：[#import Directive](http://msdn.microsoft.com/en-us/library/8etzzkb6.aspx)，类似于在 .NET 中添加引用。这是一个使用 COM 对象的示例控制台应用程序：

```
#include "stdafx.h"
#import  "c:\MyPathToTheTlb\YourAssembly.tlb" // import the COM TLB

using namespace YourAssembly;

int _tmain(int argc, _TCHAR* argv[])
{
    CoInitialize(NULL); // needed to enter COM space
    IRijndaelLinkPtr ptr(__uuidof(RijndaelLink)); // create the COM Object with the desired interface
    _bstr_t s = ptr->encrypt("hello"); // call the function
    printf("%S", (LPWSTR)s); // for example
    CoUninitialize();
    return 0;
} 
```

您会注意到#import 指令还创建了很酷的包装器（_bstr_t，因为 .NET 字符串将在此处导出为自动化 BSTR，即使对于 IUnknown 接口也是如此）用于字符串处理，所以这没什么大不了的。

这不是所有这些工作的唯一方法，但恕我直言，这是最简单的方法之一。

# bioinformatics - 如何使用 NCBI Batch Entrez 获取所有记录

> ID：15793669
> 
> 赞同：0
> 
> 时间：2013-04-03T17:05:42.970
> 
> 标签：bioinformatics

我在一个平面文件中有超过 200,000 个加入，需要从 NBCI 检索相关条目。

我使用 Batch Entrez ( [http://www.ncbi.nlm.nih.gov/sites/batchentrez](http://www.ncbi.nlm.nih.gov/sites/batchentrez) ) 来完成这项工作。但是遇到了几个问题：

1.  初始文件被拆分为多个子文件，每个子文件包含 4000 行。但似乎 Batch Entrez 对返回的文件有一些大小限制。例如：如果前 1000 份资料都有几万行达到大小限制，则其余 3000 份资料将被拒绝，不会被搜索。

我脑海中的一种可能的解决方案是将文件拆分为更多子文件并单独搜索。然而，这需要太多的手动工作。

所以我只是想知道是否有任何其他解决方案，或者可以使用任何代码。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:49:32.037

您的问题听起来很适合 Bio-star 工具包。这是使用[BioSmalltalk的解决方案](http://code.google.com/p/biosmalltalk/)

```
| giList gbReader |
giList := (BioObject openFullFileNamed: 'd:\Batch_entrez_1.txt') contents lines.
gbReader := BioNCBIGenBankReader new.
gbReader
    genBankRecordsFrom: 'nuccore'
    format: #setModeXML
    uids: giList.
(BioGBSeqCollection newFromXMLCollection: gbReader searchResults)
    collect: [: e | BioParser 
                       tokenizeNcbiXmlBlast: e contents 
                       nodes: #('GBAuthor' 'GBSeq_definition') ] 
```

要执行/调试脚本，只需选择它，然后右键单击将打开 Smalltalk 世界菜单。

API 会自动拆分并获取您的加入列表（在 Batch_entrez_1.txt 中包含的脚本中）维护 NCBI Entrez 发布限制以避免处罚。

结果格式是 XML（这是一种解析或过滤特定字段的“简单”格式），尽管它可以是[Entrez 支持的任何检索模式](http://www.ncbi.nlm.nih.gov/books/NBK25499/#chapter4.EFetch)，例如设置 #setModeText 将回答 ASN.1 表示。将“nuccore”替换为您要查询的数据库。最后选择有趣的字段，在脚本中我选择了“GBAuthor”和“GBSeq_definition”，但您可以自由选择任何[可用节点](http://www.ncbi.nlm.nih.gov/dtd/NCBI_GBSeq.mod.dtd)。

# iphone - 如何从具有特殊主题标签的 Instagram 中检索图像？

> ID：15793678
> 
> 赞同：1
> 
> 时间：2013-04-03T17:06:12.880
> 
> 标签：iphone, ios, objective-c, xcode, instagram

我的客户想在 Instagram 上分享一张图片。我已经在 instagram 上实现了共享图像。但我无法使用特殊的标签共享它。到目前为止，这是我的代码。

```
- (IBAction)sharePhotoOnInstagram:(id)sender {

    UIImagePickerController *imgpicker=[[UIImagePickerController alloc] init];
    imgpicker.delegate=self;
    [self storeimage];
    NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
    if ([[UIApplication sharedApplication] canOpenURL:instagramURL])
    {

        CGRect rect = CGRectMake(0 ,0 , 612, 612);
        NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/15717.ig"];

        NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];
        dic.UTI = @"com.instagram.photo";
        dic.delegate = self;
        dic = [self setupControllerWithURL:igImageHookFile usingDelegate:self];
        dic = [UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
        dic.delegate = self;
        [dic presentOpenInMenuFromRect: rect inView: self.view animated: YES ];
        //  [[UIApplication sharedApplication] openURL:instagramURL];
    }
    else
    {
        //   NSLog(@"instagramImageShare");
        UIAlertView *errorToShare = [[UIAlertView alloc] initWithTitle:@"Instagram unavailable " message:@"You need to install Instagram in your device in order to share this image" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

        errorToShare.tag=3010;
        [errorToShare show];
    }
}

- (void) storeimage
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"15717.ig"];
    UIImage *NewImg = [self resizedImage:picTaken :CGRectMake(0, 0, 612, 612) ];
    NSData *imageData = UIImagePNGRepresentation(NewImg);
    [imageData writeToFile:savedImagePath atomically:NO];
}

-(UIImage*) resizedImage:(UIImage *)inImage: (CGRect) thumbRect
{
    CGImageRef imageRef = [inImage CGImage];
    CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(imageRef);

    // There's a wierdness with kCGImageAlphaNone and CGBitmapContextCreate
    // see Supported Pixel Formats in the Quartz 2D Programming Guide
    // Creating a Bitmap Graphics Context section
    // only RGB 8 bit images with alpha of kCGImageAlphaNoneSkipFirst, kCGImageAlphaNoneSkipLast, kCGImageAlphaPremultipliedFirst,
    // and kCGImageAlphaPremultipliedLast, with a few other oddball image kinds are supported
    // The images on input here are likely to be png or jpeg files
    if (alphaInfo == kCGImageAlphaNone)
        alphaInfo = kCGImageAlphaNoneSkipLast;

    // Build a bitmap context that's the size of the thumbRect
    CGContextRef bitmap = CGBitmapContextCreate(
                                                NULL,
                                                thumbRect.size.width,       // width
                                                thumbRect.size.height,      // height
                                                CGImageGetBitsPerComponent(imageRef),   // really needs to always be 8
                                                4 * thumbRect.size.width,   // rowbytes
                                                CGImageGetColorSpace(imageRef),
                                                alphaInfo
                                                );

    // Draw into the context, this scales the image
    CGContextDrawImage(bitmap, thumbRect, imageRef);

    // Get an image from the context and a UIImage
    CGImageRef  ref = CGBitmapContextCreateImage(bitmap);
    UIImage*    result = [UIImage imageWithCGImage:ref];

    CGContextRelease(bitmap);   // ok if NULL
    CGImageRelease(ref);

    return result;
}

- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate
{  
    UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];
    interactionController.delegate = self;

    return interactionController;
}

- (void)documentInteractionControllerWillPresentOpenInMenu:(UIDocumentInteractionController *)controller
{

}

- (BOOL)documentInteractionController:(UIDocumentInteractionController *)controller canPerformAction:(SEL)action
{
    //    NSLog(@"5dsklfjkljas");
    return YES;
}

- (BOOL)documentInteractionController:(UIDocumentInteractionController *)controller performAction:(SEL)action
{ 
    //    NSLog(@"dsfa");
    return YES;
}

- (void)documentInteractionController:(UIDocumentInteractionController *)controller didEndSendingToApplication:(NSString *)application
{
    //    NSLog(@"fsafasd;");
} 
```

**注意：这工作正常。**

我在**[http://instagram.com/developer/iphone-hooks/](http://instagram.com/developer/iphone-hooks/)**上关注了他们的文档，但无法从中得到更好的主意！现在不知道下一步该做什么来共享带有标签和其他信息的图像。

**其次**，我想将与特定主题标签共享的所有图像检索到应用程序中。

请指导我！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:34:50.070

首先，从[iPhone Hooks](http://instagram.com/developer/iphone-hooks/)的“文档交互”下：

> 要在您的照片中包含预填充的标题，您可以将文档交互请求上的注释属性设置为包含键“InstagramCaption”下的 NSString 的 NSDictionary。注意：此功能将在 Instagram 2.1 及更高版本上可用。

您需要添加以下内容：

```
dic.annotation = [NSDictionary dictionaryWithObject:@"#yourTagHere" forKey:@"InstagramCaption"]; 
```

其次，如果您想下拉具有特定标签的图像，您需要查看[标签端点。](http://instagram.com/developer/endpoints/tags/)

# c# - ObjectContext 不添加实体

> ID：15793680
> 
> 赞同：0
> 
> 时间：2013-04-03T17:06:14.363
> 
> 标签：c#, entity-framework-4

我正在像这样向对象上下文添加一个实体

```
public partial class MyEntities : ObjectContext
.
.
. 
```

在另一个类中，我有以下代码

```
using (MyEntities dbContext = new MyEntities())
{
  Info x = new Info();

  dbContext.AddToInfo(x);
} 
```

但是，当我在向其添加“x”后检查“dbContext”中的信息中的实体时，手表会说 dbContext.Info“枚举没有产生任何结果”。

这是 Watch 窗口的屏幕截图

![VS 观察窗口](https://i.stack.imgur.com/iS8Kv.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:12:26.487

尝试 ：

```
using (MyEntities dbContext = new MyEntities())
{
  Info x = new Info();

  dbContext.YourTableObjectSet.AddObject(x);
} 
```

YourTableObjectSet 是代表您的表的 ObjectSet 的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:25:59.900

然后添加一个新实体，它只存在于 ObjectStateManager 中。为了让您的实体出现在 ObjectSet 中，您需要调用 dbContext.SaveChanges。

如果您希望能够枚举所有实体，则需要查询 ObjectSet 和 ObjectStateManager。

```
dbContext.Infos.Union(dbContext.ObjectStateManager.GetObjectStateEntries(EntityState.Added).Select(e=> e.Entity).OfType<Info>) 
```

（语法可能有误，我只从内存转换 vb.net 的代码）

# javascript - 使用 jqGrid 内联编辑进行排序

> ID：15793683
> 
> 赞同：2
> 
> 时间：2013-04-03T17:06:20.460
> 
> 标签：javascript, jquery, jqgrid

有没有直接的方法`jqGrid`通过内联编辑在客户端对数据进行排序？当行可编辑时，即使单击行标题，它也不会对数据进行**排序。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:24:33.617

如果某行正在编辑，则无法对网格进行排序。我认为您提出问题的原因是对内联编辑的工作原理和排序的工作原理存在误解。

开始编辑时，编辑行中的原始数据将保存在内部参数`savedRow`数组中。用户可以随时将当前修改恢复到原始状态或将当前值保存在网格中。如果`keys: true`启用了内联编辑选项，则用户可以使用`Esc`或`Enter`键来恢复/保存当前行的更改。允许多行同时处于编辑模式，用户可以保存一些行并恢复一些其他行。

网格的排序意味着从内部参数应用当前过滤器**重建完整的网格内容。****jqGrid**支持*多页*。网格排序始终意味着对网格的*所有数据进行*可选过滤的排序。排序后是否应根据参数值仅显示当前页面。`postData`****`page`****

 ****要对处于编辑模式的网格进行排序，需要确定当前正在编辑的行应该做什么。在常见情况下，丢弃当前更改或保存都不是好的解决方案。即使有人会先尝试保存当前的编辑数据（旧状态和当前状态），然后对数据进行排序，然后再开始编辑一次，这在通常情况下无法正常工作。实施这种情况可能有很多问题

1.  当前编辑行可能在另一个页面上，现在不可见
2.  现在可以更改数据。所以用旧数据填充`savedRow`数组可能是错误的，当前编辑数据也可能是错误的。
3.  当前编辑行可以从另一个用户中删除。所以它不能存在于新的网格内容中。
4.  如果我们决定在排序之前保存数据，是否可能在保存过程中出现一些验证错误或并发错误。因此，需要先要求用户解决所有冲突，然后才能进行保存。
    ...

因此，对处于编辑模式的网格进行排序并不容易。实施方式可能取决于项目要求。由于上述问题（以及许多其他我没有提到的问题），jqGrid 只是测试内部`savedRow`数组（用于在编辑开始之前保存行的旧状态）是否为空。如果`savedRow`数组不为空，则现在正在编辑某些行或单元格（在出售编辑模式的情况下）。在这种情况下，对相应列标题的任何单击都将被忽略并且不进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T18:55:15.850

我遇到了同样的问题——如果任何行处于编辑模式，则无法排序。就我而言，用户编辑的状态是什么并不重要。我的网格是客户端，页面上有一个保存按钮，用户单击以提交更改。

我做了一些挖掘，找到了一个适合我的解决方案。我希望它可以帮助其他人。基本上我所做的是重新排序列标题上的点击事件，以便我的是第一个。然后在我的点击事件中我调用 saveRows。

这是我从另一个线程[这里得到的关于重新排序事件](https://stackoverflow.com/questions/2360655/jquery-event-handlers-always-execute-in-order-they-were-bound-any-way-around-t)的一段代码：

```
 $.fn.bindUp = function(name, fn) {
        // bind as you normally would
        // don't want to miss out on any jQuery magic
        this.on(name, fn);

        // Thanks to a comment by @Martin, adding support for
        // namespaced events too.
        this.each(function() {
            var handlers = $._data(this, 'events')[name.split('.')[0]];
            // take out the handler we just inserted from the end
            var handler = handlers.pop();
            // move it at the beginning
            handlers.splice(0, 0, handler);
        });
    }; 
```

然后在我的代码中添加一个处理程序来保存行：

```
 $("th.ui-th-column", $("#pacPaymenReviewGridNEW")[0].grid.hDiv).bindUp('click', function(e) {
        var $th = $(e.currentTarget).closest("th");
        if ($th.length > 0) {
            pacTransferFundMaint.saveRowsById('#pacPaymenReviewGridNEW');
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T06:48:00.257

经过研究，我发现了以下算法：

1.  捕捉标题点击事件。例如 ('th').click(function(){})
2.  `saveRow`保存该事件发生时处于编辑模式的行数据
3.  识别被点击的标题。
4.  使用该标题按升序或降序对网格数据进行排序。像
    `$('#dataGrid').jqGrid('setGridParam', ({ data: list, sortname: columnHeader, sortorder: 'asc',rowNum: list.length })).trigger('reloadGrid');`

5.  使选定的行再次可编辑。`editRow`可用于此。

**注意：**步骤 2 到 5 应该在步骤 1 的事件中执行（标题点击事件）****

# cordova - Phonegap 远程媒体流延迟

> ID：15793689
> 
> 赞同：1
> 
> 时间：2013-04-03T17:06:42.783
> 
> 标签：cordova, stream, external, media, delay

一直在寻找并没有找到这个问题的直接答案。

这仅在IOS上

我正在像这样使用phonegap的媒体类。

```
var src = 'http://www.remotefile.com/test.mp3';
var MusicFile = new Media(src, onSuccess, onError);

MusicFile.play(); 
```

它将在大约 10-30 秒后播放文件。

似乎音乐文件必须转到外部服务器并完全下载文件才能播放。没有缓冲正在完成的音频文件。

这可以使用phonegap吗？

# xpages - 从弹出菜单中找不到道场

> ID：15793690
> 
> 赞同：0
> 
> 时间：2013-04-03T17:06:43.983
> 
> 标签：xpages

我收到一个错误：

脚本解释器错误，line=3，col=28：[ReferenceError] 'dojo' not found

```
 1: viewScope.ppChoice=context.getSubmittedValue();
 2: dBar.info("I am here");
 3: var fileUploadPanel = dojo.byId("#{id:fileUploadPanel}");
 4: var fileUpload1 = dojo.byId("#{id:fileUpload1}");
 5: var butImport = dojo.byId("#{id:butImport}");
 6: dojo.style(fileUploadPanel, "display", "block");
 7: dojo.window.scrollIntoView(butImport);
 8: fileUpload1.focus(); 
```

在扩展库弹出菜单的 onItemClick 事件上。同样的代码在正常的按钮事件中运行得很好。我现在确实打算不使用弹出菜单，但我仍然很好奇为什么我会从 onItemClick 事件中得到这个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:47:26.723

xe:dropDownButton 的 onItemClick 事件需要服务器端 JS。您将 SSJS 与作为客户端 JS 的 dojo 混合使用。

# r - 非 ggplot 聚类图的不同颜色（至少 11 种）

> ID：15793695
> 
> 赞同：0
> 
> 时间：2013-04-03T17:07:02.380
> 
> 标签：r, plot

好吧，我想，这是一个挑战！我在这上面花了几个小时，想在遇到路障时最后一次尝试。

我正在绘制一个看起来像这样的集群图（我刚刚意识到我无法发布图像。所以，这是我正在使用的数据框和命令）。

再现性数据框：

```
structure(list(PC1 = c(2.2256, 1.4809, -0.26, 2.2323, -2.9459, 
-0.8887, -4.4638, -2.4257, -0.0317, 2.6486, 0.152, -1.2285, -0.1575, 
0.2191, -2.739, -2.1619, -3.0452, -0.5263, -2.6021, 2.4344, -3.3099, 
-1.6198, -1.5211, 1.8298, 0.3087, -1.5687, -4.6785, -0.3389, 
-0.1651, -0.6272, -1.705, -1.5658, -2.1851, 9.689, -2.1915, 0.2614, 
-2.7237, -3.2731, 3.4681, 0.3675, 3.5045, 10.9197, -1.1395, -0.4404, 
1.2303, -0.4029, 1.0831, 1.3574, 0.7774, -0.0421, -2.6289, 1.2752, 
4.6786, -3.3749, -1.7164, 0.8981, -4.7529, -0.4039, -1.8553, 
1.1387, -1.648, 1.2547, -1.1931, -0.926, -0.8275, -0.4611, 0.553, 
-3.5188, -0.7385, -3.5622, 1.8351, -1.5409, 0.6458, 2.8193, -1.0229, 
1.3415, 2.1953, -1.0201, -0.3953, -0.69, 0.0324, -2.6105, -2.5362, 
2.9971, -0.3935, -0.1593, -1.0181, -1.7703, 2.5865, 0.2388, -2.5744, 
-0.977, 0.8738, -1.282, -0.3212, -4.5051, 2.5541, 0.939, 0.2235, 
-4.0283, -0.6163, -0.7022, 3.1862, -4.1619, 0.14, -1.7597, 3.1879, 
0.9497, -0.4271, -0.7919, -0.0288, -3.8525, -3.9967, 2.075, 1.7007, 
11.1462, 2.7227, -1.8918, -2.3526, 11.5197, -0.2416, 2.8507, 
0.4484, -1.4711, 1.9363, 1.305, 0.7839, -0.8864, -3.0569, -3.0861, 
-0.3328, -0.8241, -1.4074, -2.6751, -2.6399, 1.9194, -2.13, -3.7832, 
9.6771, 0.2056, -0.0926, 0.0071, -2.5723, 1.2282, -2.7776, -4.6016, 
-2.5425, 10.4316, 0.6533, -5.0102, -2.3975, -0.9215, -4.8145, 
-1.9591, -0.9514, -0.3105, 0.9918, -0.6624, 2.1525, -2.8638, 
-0.9873, -1.029, -0.1707, 1.7098, -5.6037, -0.5896, 6.268, -3.1572, 
-3.2034, -4.0433, 0.38, 3.583, 0.3973, -0.0873, 4.9091, 1.5223, 
-1.4587, 1.5949, -4.7834, -1.5867, -1.6688, -0.5916, 2.0728, 
-2.1145, 10.652, -3.217, -0.2973, -3.4136, -4.3339, 3.4852, -1.3428, 
0.8035, -1.2665, -1.5503, 5.8025, 0.7781, -0.4766, -5.579, -4.3625, 
1.4434, -2.1981, 1.3691, 3.2523, -4.7446, -1.1033, 1.5775, 2.8077, 
-3.7935, -0.9483, -1.0598, -2.2209, -1.419, -1.9619, 0.5149, 
-3.3048, -0.3856, -2.3847, -0.938, 2.7408, -1.9428, -0.9983, 
-2.3646, 1.8657, -0.9576, -2.9655, -2.8098, -4.0351, 0.1078, 
1.7308, 0.9215, -2.9707, 2.2219, 7.8006, -2.1898, -1.0951, -0.5461, 
-5.4806, 0.0708, -2.3331, -0.088, -2.3114, 1.1267, -0.9264, 0.9225, 
0.0624, -4.3882, -2.5275, -2.4429, -0.9523, -3.6885, 5.1539, 
-2.6542, -3.6966, -3.3687, -5.1634, 0.5688, 0.9247, -4.6081, 
-1.8565, 2.1829, -3.16, -2.588, -0.5039, 7.6707, -0.4142, -4.345, 
-4.6737, 0.7462, 1.3465, -1.1949, 1.9076, -2.05, -3.2861, 1.2469, 
0.8937, -1.6392, -0.8577, -0.0177, -2.7009, 0.2848, 11.9307, 
3.5277, -3.1443, 0.9763, -1.8637, -0.4509, -1.4086, 0.9918, -4.1019, 
-2.6204, 2.199, -4.2807, 2.1375, 0.2313, -4.5694, -2.6465, 1.5511, 
-2.1972, -3.6588, -0.94), PC2 = c(1.062, -3.8278, -2.2686, 1.137, 
2.6166, 7.7512, -1.7719, 2.4735, -1.7442, -1.0233, -4.0604, 1.4224, 
-2.1057, -2.2437, 0.034, 0.7467, -3.9813, -2.0182, 1.3059, 0.7223, 
0.9685, 1.7667, -2.2334, -1.9834, -0.3307, -2.2389, -3.8387, 
3.0782, -4.137, 0.5813, -2.9272, -0.1671, -3.5508, -0.3841, 0.1688, 
-2.4125, -4.6203, 0.491, -0.8238, -0.9563, 0.9952, -1.5027, -3.7886, 
-4.3074, -0.9484, 4.0531, -6.0254, -2.5213, -1.5968, 0.1942, 
5.183, -4.5221, -0.4104, -2.3955, 0.1762, -0.037, 1.213, -2.7664, 
0.3025, -2.1785, 1.7589, -2.7747, 1.8594, -1.8585, 0.1826, -0.4348, 
-3.7679, 2.4107, -9e-04, 0.102, -2.2939, 3.758, -0.7306, 0.1016, 
-2.625, -0.7092, 0.5654, 0.869, -2.5551, -5.5576, 0.0563, 1.0645, 
-1.5076, -0.0124, -3.7385, 3.5632, 0.6315, 3.6795, -2.5951, -0.506, 
1.5813, 0.4424, -6.1987, 1.9711, -0.1391, -0.7236, -1.6882, -1.6159, 
1.616, -1.0355, 3.7336, -2.4115, 0.769, 2.7689, -2.218, 1.9332, 
-1.5474, -2.2945, 2.8818, -3.8946, -2.2153, -2.2179, 0.1367, 
4.1974, -0.5861, -0.823, 1.724, -4.331, 0.0725, -1.1548, 7.844, 
-0.3664, -2.8116, -2.0724, -0.7442, -3.4079, 2.2524, 3.2092, 
2.0544, 2.7299, -4.7838, 2.5654, -5.5837, -4.0581, 1.0475, -0.4572, 
-2.9878, -2.641, -0.7713, -2.9609, 1.2831, -2.2095, 2.6252, 5.3245, 
0.7972, -0.6487, -0.8716, 0.5108, -0.2301, -3.9016, 0.287, 1.2736, 
1.5818, -3.9952, -2.1491, 2.5403, 1.6406, -3.0673, 1.6671, 4.4645, 
-0.2323, -1.2833, 3.1283, 1.943, -1.7386, -3.1695, 2.06, -1.4619, 
-4.7212, -4.3526, -0.878, -2.247, -1.7027, -3.1427, 4.4404, 1.4203, 
-3.1345, -2.6465, -1.7373, 2.8601, -1.1626, 3.8693, -0.8583, 
0.7912, -3.8168, -5.5851, 3.4861, -0.5579, -0.0445, 1.3809, -1.3812, 
-4.0318, 6.7811, 2.5582, 3.2445, 0.9699, -2.5507, -0.9889, 0.6898, 
-3.3987, -4.3716, 2.1602, -2.6728, -1.8145, 5.0164, 2.3748, 1.5508, 
0.7534, 1.1681, -1.6018, 0.0308, -2.135, -1.5724, -5.7036, 0.025, 
0.8324, 2.4963, 2.0653, -0.3984, -0.3348, -4.1734, 0.7979, -3.0556, 
-4.5411, 0.7944, 0.1973, -3.0621, 6.1245, -3.2084, -1.3371, -0.6685, 
-0.7438, -0.6533, -2.895, 4.3857, -2.201, 1.0328, 2.9484, -1.0609, 
-1.1653, -0.6915, -1.442, -3.1566, 1.7276, 1.1668, -3.6144, -3.3186, 
3.8696, -5.2487, 2.4558, -2.1328, -1.0334, -1.5281, -5.7793, 
-0.7524, -3.4909, 4.335, -0.3089, -0.8972, -1.0694, -0.5497, 
-1.1873, 9e-04, -3.5336, 1.6173, 2.891, -3.5485, -5.5309, 0.5986, 
0.5252, -6.6428, 0.6717, -1.7727, -0.5078, -4.8289, -0.857, -0.451, 
-0.4197, 1.0673, -2.8686, -0.376, 2.066, -1.4398, 0.6436, 2.6821, 
-3.4937, -1.3001, 1.6406, 1.712, -2.6586, 0.0102, -2.308, 0.2749, 
-1.4558, -0.5235, 1.2903, 1.2796, 4.6678, 3.2834, -3.4908), PC3 = c(1.8194, 
-2.5651, -2.4701, -1.7064, 1.1729, -0.4935, 3.3485, 1.7217, -2.7786, 
6.3311, -3.6903, 0.3025, -2.9235, -2.8914, -0.5739, 3.6833, -1.497, 
1.4005, 2.2265, 4.5632, 0.8387, 0.694, -2.3551, 1.1719, 4.6177, 
0.6201, 2.3209, -0.6963, -3.0441, 1.5237, -0.3986, 1.1555, 1.9629, 
3.4838, -0.4774, -2.7396, 0.9682, 3.7912, 2.1377, -1.8566, 0.9613, 
-0.1837, 4.214, -0.8082, 3.5541, -1.8595, -2.7905, -2.5326, -0.8995, 
-0.7312, -0.1763, -2.0726, 2.5378, 0.6211, 1.6998, 1.5665, 0.4586, 
-2.3965, 0.3287, -2.0237, -1.1516, 1.4491, 3.2198, 2.8354, 0.1725, 
1.5858, -2.8418, 2.3849, -0.0492, 2.9697, 1.5061, -1.9589, 1.1382, 
0.0703, 0.2773, 2.7847, 0.6627, -2.0828, -2.6255, -1.4492, 1.6866, 
0.2628, -2.102, -0.7487, -2.5129, -0.3193, 1.3504, -0.417, -2.5764, 
3.22, 1.5988, 1.3732, -2.7233, -1.5127, 0.1545, 1.7917, 3.2315, 
-3.2092, 1.6798, 0.5898, -1.5925, -1.7699, 5.322, 0.5261, 3.0634, 
0.3691, 2.0846, 0.9458, -0.7351, -3.2953, -3.1213, 1.0529, 0.9614, 
0.031, 1.9807, 1.0511, 2.3976, -1.5736, 1.1312, 1.2936, 0.0059, 
3.1171, -1.2461, -2.9551, 2.0226, 0.5991, -2.4565, -0.4575, 2.4161, 
5.1449, -2.9822, 0.8863, -3.825, -2.2242, 1.6873, 2.5818, -1.9726, 
0.0108, 4.4975, -1.5744, -1.7228, -3.1268, 2.2604, -1.3887, 0.0045, 
1.4843, 0.3979, 2.0207, 1.6031, -2.1704, 0.6586, 1.3145, 1.4932, 
0.3033, -1.6698, 0.2015, -1.9904, -2.2213, -0.815, 0.9555, 4.6244, 
-1.7535, -0.8152, 2.1398, 1.4181, -2.9203, 2.7319, 1.671, -1.1838, 
1.9147, 4.5097, 1.8006, -2.1203, -0.7905, 1.9587, 4.8921, -1.7787, 
1.8319, 1.4435, -2.226, 2.3515, -2.7543, 0.5666, 0.2525, 0.8702, 
-3.2293, 1.9826, 0.9395, 3.1577, 1.5882, 2.8963, -1.6802, -0.8536, 
1.6328, 0.4904, -1.023, -2.341, 2.4352, 2.7221, -2.6323, -1.9808, 
4.0606, 3.4985, 1.2773, -1.3579, 2.8691, 2.704, 4.0382, 0.928, 
-0.4525, 0.8558, -3.4121, 0.7687, -2.9728, 1.3936, 2.1161, 2.1325, 
-0.4083, 2.2895, 2.1118, -0.2269, 1.0511, -2.518, -1.6614, 1.4253, 
1.1722, 1.1326, -0.5715, 1.2108, -3.125, -0.5934, 5.1605, 2.7877, 
-2.807, -0.7033, -0.956, 1.3176, -1.8061, 2.4586, 1.323, 2.563, 
-2.9877, 0.683, -1.8166, -1.2402, 1.4299, -2.5613, 0.5736, -3.4245, 
0.0788, 0.4948, 1.0333, 0.5982, -3.0088, 2.7771, -2.0868, 0.4091, 
2.9316, 1.1828, 4.2806, 2.0805, 1.9528, -1.1379, 2.204, -0.8486, 
-1.2042, -0.5654, -2.7485, -0.9031, 0.9803, -2.1279, 0.2206, 
2.0372, -2.0573, 0.0986, 0.2512, -0.5894, -1.2828, -0.1711, -2.5129, 
0.5729, 1.5563, 1.9921, -2.5638, 1.6535, -3.1877, -1.6301, -1.9904, 
3.6299, -1.9487, -0.1593, -1.1259, -0.0364, 2.8499, 0.8245, 1.9109, 
6.6634, -0.4726, 4.0705, 0.1674), PC4 = c(-1.6809, 2.227, -0.075, 
-0.6021, 0.6097, 1.3754, -0.1437, 0.7101, -0.1795, -0.0401, 0.6585, 
-1.6154, -1.8066, -1.0366, -1.0494, -0.0897, 2.1065, 0.022, 0.3171, 
-1.1914, 0.812, 0.407, -0.4577, -0.2013, 0.3993, -1.3618, -1.3296, 
1.0466, 0.8122, -0.5493, -0.8828, -0.8294, 0.1012, -0.1122, 1.5744, 
-0.7616, 0.3152, -0.3369, -1.5726, -0.4943, -0.5911, -0.3582, 
0.1438, -2.2296, -0.6858, 0.1225, -0.7572, 0.1741, -0.7606, 2.1613, 
0.7969, 1.4509, -0.2938, 0.7183, 1.1652, 0.3502, 1.6445, -0.2476, 
-0.2286, 0.0116, 0.2442, -0.9639, 0.1028, -0.3746, -0.0617, -1.6034, 
0.6863, -0.3183, 0.7681, -0.2873, -0.7857, 1.0165, 0.1969, -0.2992, 
0.4876, -0.9068, -1.0005, -0.8244, 0.1367, -1.7777, -0.6293, 
0.6, -3.2697, -1.4074, -2.1328, 0.5042, 0.9385, 0.6153, 1.2522, 
-1.3579, 0.875, -0.3984, -1.4517, -1.1958, -0.4924, 0.7429, 1.1159, 
-0.6791, 1.2641, -0.877, 0.0022, -0.5704, 0.3748, 0.5973, -1.0422, 
1.7233, -0.7283, -2.0859, 0.8287, -4.6005, 0.5384, 0.9084, 1.188, 
-0.1872, -0.7145, 0.098, -1.0977, -0.4468, -0.3076, -0.1735, 
0.5855, 0.0253, 0.4055, -1.8864, -2.1891, 1.0356, 0.8634, -0.0115, 
0.4144, 0.2565, -2.2025, 1.408, -3.1021, -2.2058, -0.8091, -2.1892, 
-0.1375, -1.2207, -1.1782, 0.6638, -0.8493, -1.0138, -0.6362, 
0.3053, 1.0213, -0.063, -1.9581, -1.2428, 0.1985, -4.8922, 0.4737, 
0.0275, -1.7479, 0.5607, 1.2613, 1.3478, -1.6331, 0.1288, -1.2546, 
-0.8544, -0.2725, -0.0153, 0.491, 0.0808, 1.1406, -1.0728, -0.2708, 
-0.825, 0.0739, 0.8085, 0.8602, 1.3676, -0.4863, 2.1234, -0.8973, 
-0.2006, -0.2972, 0.0494, 1.3275, 1.742, 1.2568, 0.5658, -0.8907, 
1.1019, -0.6784, -3.0089, -0.1071, -0.0348, 0.4956, -1.5965, 
-4.578, 2.0233, 1.8164, -0.8634, 0.1338, -1.6979, 1.2467, -0.3596, 
1.2227, -0.6044, -1.5277, -1.0158, 0.4926, 0.8544, 0.6129, 0.2976, 
0.3437, -0.6874, -0.1675, -0.8576, 1.4413, -0.4621, 0.9578, -1.2836, 
-0.8432, -1.3462, 1.5717, 0.9858, 0.3494, 0.2312, -0.8992, 0.7922, 
1.2108, 1.0855, -0.6685, 0.5451, -0.2918, 1.6725, -1.0919, 0.242, 
0.9622, -1.1156, -0.5224, -0.6458, 2.1272, -1.1929, 0.3822, -0.8822, 
-0.7896, -0.752, 0.2748, -0.6986, -0.6214, -0.0754, 0.7125, 2.1072, 
-3.2647, -2.1716, -2.6933, 1.4873, -0.1674, -0.7573, -2.3392, 
0.1607, 1.4757, 2.5337, 0.3551, 2.1733, -2.2058, 0.1276, 0.0814, 
0.7431, 2.6913, 0.4411, -1.0256, 0.676, -2.2243, 0.8293, -0.7375, 
1.1858, 0.6847, 1.2721, -2.0652, -3.1561, -2.1539, 0.1553, 0.3163, 
0.0641, -0.4027, -0.967, -0.5773, -0.3537, -0.3323, 0.3336, -0.0722, 
-0.006, -1.2042, -1.6331, 1.3997, -1.3688, 0.1338, -1.0674, -0.9948, 
-2.1507, 0.3999, -0.4026, -0.7439, -0.1672, 1.7708, -1.7547), 
    cluster = c(3L, 2L, 2L, 5L, 4L, 1L, 4L, 4L, 2L, 3L, 2L, 3L, 
    2L, 2L, 4L, 3L, 2L, 3L, 4L, 3L, 4L, 3L, 2L, 3L, 3L, 3L, 4L, 
    1L, 2L, 3L, 2L, 3L, 3L, 5L, 4L, 2L, 2L, 4L, 5L, 2L, 5L, 5L, 
    3L, 2L, 3L, 1L, 2L, 2L, 2L, 3L, 1L, 2L, 5L, 4L, 3L, 3L, 4L, 
    2L, 3L, 2L, 1L, 3L, 3L, 3L, 3L, 3L, 2L, 4L, 3L, 4L, 3L, 1L, 
    3L, 5L, 2L, 3L, 3L, 1L, 2L, 2L, 3L, 4L, 2L, 5L, 2L, 1L, 3L, 
    1L, 2L, 3L, 4L, 3L, 2L, 1L, 3L, 4L, 3L, 2L, 3L, 4L, 1L, 2L, 
    5L, 4L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 4L, 4L, 1L, 3L, 5L, 5L, 
    2L, 4L, 5L, 1L, 3L, 2L, 2L, 3L, 2L, 1L, 1L, 4L, 4L, 2L, 3L, 
    2L, 2L, 4L, 3L, 2L, 4L, 5L, 2L, 1L, 2L, 4L, 1L, 4L, 4L, 4L, 
    5L, 3L, 4L, 4L, 3L, 4L, 2L, 2L, 1L, 1L, 2L, 5L, 1L, 3L, 2L, 
    1L, 3L, 4L, 2L, 5L, 4L, 2L, 4L, 3L, 3L, 2L, 2L, 5L, 3L, 2L, 
    3L, 4L, 1L, 3L, 1L, 3L, 3L, 5L, 2L, 3L, 4L, 4L, 5L, 3L, 2L, 
    1L, 3L, 5L, 3L, 2L, 4L, 4L, 2L, 2L, 3L, 3L, 4L, 1L, 3L, 5L, 
    4L, 3L, 2L, 3L, 2L, 3L, 2L, 4L, 3L, 4L, 1L, 3L, 3L, 2L, 4L, 
    2L, 2L, 4L, 4L, 4L, 1L, 2L, 2L, 4L, 3L, 5L, 2L, 1L, 2L, 4L, 
    1L, 4L, 3L, 4L, 2L, 2L, 1L, 1L, 4L, 2L, 1L, 2L, 4L, 5L, 4L, 
    4L, 2L, 4L, 2L, 1L, 4L, 3L, 3L, 4L, 4L, 2L, 5L, 1L, 4L, 4L, 
    2L, 3L, 3L, 2L, 3L, 4L, 2L, 2L, 3L, 3L, 2L, 4L, 2L, 5L, 5L, 
    4L, 2L, 3L, 2L, 2L, 1L, 4L, 2L, 3L, 4L, 3L, 3L, 4L, 4L, 3L, 
    1L, 4L, 2L), brgroupnum = c(4L, 11L, 11L, 10L, 1L, 10L, 14L, 
    14L, 11L, 14L, 3L, 1L, 11L, 11L, 3L, 5L, 3L, 3L, 14L, 14L, 
    14L, 1L, 11L, 3L, 14L, 14L, 14L, 10L, 11L, 10L, 3L, 14L, 
    10L, 14L, 14L, 11L, 3L, 14L, 3L, 10L, 4L, 14L, 2L, 3L, 14L, 
    10L, 3L, 11L, 3L, 10L, 14L, 11L, 14L, 14L, 1L, 2L, 14L, 11L, 
    14L, 11L, 14L, 3L, 6L, 1L, 10L, 2L, 11L, 14L, 10L, 14L, 3L, 
    10L, 6L, 4L, 3L, 14L, 3L, 3L, 11L, 3L, 1L, 14L, 3L, 4L, 3L, 
    10L, 2L, 10L, 11L, 3L, 1L, 1L, 3L, 14L, 10L, 14L, 4L, 11L, 
    7L, 6L, 10L, 11L, 7L, 14L, 1L, 14L, 3L, 6L, 10L, 3L, 11L, 
    14L, 14L, 14L, 14L, 14L, 6L, 3L, 14L, 14L, 10L, 3L, 11L, 
    11L, 4L, 3L, 10L, 10L, 14L, 14L, 3L, 14L, 3L, 3L, 14L, 6L, 
    11L, 14L, 14L, 11L, 3L, 11L, 1L, 1L, 12L, 6L, 14L, 14L, 1L, 
    3L, 14L, 1L, 14L, 3L, 11L, 14L, 3L, 11L, 10L, 14L, 6L, 11L, 
    10L, 4L, 1L, 11L, 14L, 14L, 3L, 14L, 7L, 14L, 11L, 11L, 7L, 
    14L, 11L, 4L, 14L, 10L, 14L, 10L, 4L, 14L, 14L, 3L, 1L, 14L, 
    14L, 4L, 10L, 3L, 10L, 6L, 14L, 12L, 11L, 14L, 14L, 11L, 
    11L, 6L, 14L, 14L, 10L, 11L, 4L, 14L, 2L, 14L, 14L, 11L, 
    14L, 3L, 14L, 1L, 14L, 14L, 14L, 14L, 3L, 14L, 11L, 3L, 14L, 
    2L, 6L, 1L, 3L, 11L, 14L, 14L, 14L, 11L, 10L, 3L, 14L, 10L, 
    14L, 6L, 14L, 11L, 3L, 10L, 10L, 14L, 3L, 1L, 3L, 14L, 12L, 
    14L, 14L, 3L, 14L, 11L, 14L, 14L, 10L, 14L, 14L, 6L, 11L, 
    14L, 10L, 10L, 3L, 3L, 11L, 1L, 3L, 14L, 14L, 4L, 3L, 14L, 
    12L, 3L, 12L, 11L, 14L, 14L, 14L, 10L, 1L, 11L, 11L, 3L, 
    1L, 3L, 14L, 3L, 2L, 6L, 14L, 14L, 14L, 10L, 14L, 3L), brgroupttl = c("CA1", 
    "O N", "O N", "R", "O S1", "R", "O Br", "O Br", "O N", "O Br", 
    "O H", "O S1", "O N", "O N", "O H", "O Fr", "O H", "O H", 
    "O Br", "O Br", "O Br", "O S1", "O N", "O H", "O Br", "O Br", 
    "O Br", "R", "O N", "R", "O H", "O Br", "R", "O Br", "O Br", 
    "O N", "O H", "O Br", "O H", "R", "CA1", "O Br", "L4", "O H", 
    "O Br", "R", "O H", "O N", "O H", "R", "O Br", "O N", "O Br", 
    "O Br", "O S1", "L4", "O Br", "O N", "O Br", "O N", "O Br", 
    "O H", "Mr", "O S1", "R", "L4", "O N", "O Br", "R", "O Br", 
    "O H", "R", "Mr", "CA1", "O H", "O Br", "O H", "O H", "O N", 
    "O H", "O S1", "O Br", "O H", "CA1", "O H", "R", "L4", "R", 
    "O N", "O H", "O S1", "O S1", "O H", "O Br", "R", "O Br", 
    "CA1", "O N", "Pr", "Mr", "R", "O N", "Pr", "O Br", "O S1", 
    "O Br", "O H", "Mr", "R", "O H", "O N", "O Br", "O Br", "O Br", 
    "O Br", "O Br", "Mr", "O H", "O Br", "O Br", "R", "O H", 
    "O N", "O N", "CA1", "O H", "R", "R", "O Br", "O Br", "O H", 
    "O Br", "O H", "O H", "O Br", "Mr", "O N", "O Br", "O Br", 
    "O N", "O H", "O N", "O S1", "O S1", "Occ", "Mr", "O Br", 
    "O Br", "O S1", "O H", "O Br", "O S1", "O Br", "O H", "O N", 
    "O Br", "O H", "O N", "R", "O Br", "Mr", "O N", "R", "CA1", 
    "O S1", "O N", "O Br", "O Br", "O H", "O Br", "Pr", "O Br", 
    "O N", "O N", "Pr", "O Br", "O N", "CA1", "O Br", "R", "O Br", 
    "R", "CA1", "O Br", "O Br", "O H", "O S1", "O Br", "O Br", 
    "CA1", "R", "O H", "R", "Mr", "O Br", "Occ", "O N", "O Br", 
    "O Br", "O N", "O N", "Mr", "O Br", "O Br", "R", "O N", "CA1", 
    "O Br", "L4", "O Br", "O Br", "O N", "O Br", "O H", "O Br", 
    "O S1", "O Br", "O Br", "O Br", "O Br", "O H", "O Br", "O N", 
    "O H", "O Br", "L4", "Mr", "O S1", "O H", "O N", "O Br", 
    "O Br", "O Br", "O N", "R", "O H", "O Br", "R", "O Br", "Mr", 
    "O Br", "O N", "O H", "R", "R", "O Br", "O H", "O S1", "O H", 
    "O Br", "Occ", "O Br", "O Br", "O H", "O Br", "O N", "O Br", 
    "O Br", "R", "O Br", "O Br", "Mr", "O N", "O Br", "R", "R", 
    "O H", "O H", "O N", "O S1", "O H", "O Br", "O Br", "CA1", 
    "O H", "O Br", "Occ", "O H", "Occ", "O N", "O Br", "O Br", 
    "O Br", "R", "O S1", "O N", "O N", "O H", "O S1", "O H", 
    "O Br", "O H", "L4", "Mr", "O Br", "O Br", "O Br", "R", "O Br", 
    "O H")), .Names = c("PC1", "PC2", "PC3", "PC4", "cluster", 
"brgroupnum", "brgroupttl"), row.names = c(12L, 235L, 421L, 534L, 
344L, 579L, 112L, 940L, 236L, 708L, 246L, 339L, 234L, 253L, 854L, 
661L, 643L, 782L, 942L, 723L, 998L, 354L, 226L, 832L, 244L, 659L, 
180L, 545L, 94L, 610L, 804L, 147L, 485L, 80L, 946L, 656L, 631L, 
989L, 800L, 498L, 35L, 901L, 459L, 248L, 697L, 590L, 169L, 72L, 
670L, 497L, 48L, 749L, 220L, 979L, 319L, 469L, 959L, 364L, 928L, 
213L, 947L, 819L, 404L, 460L, 605L, 430L, 71L, 927L, 507L, 984L, 
833L, 562L, 397L, 40L, 780L, 702L, 818L, 853L, 426L, 688L, 474L, 
944L, 774L, 39L, 678L, 573L, 464L, 494L, 885L, 803L, 470L, 437L, 
264L, 925L, 565L, 691L, 19L, 420L, 2L, 398L, 503L, 204L, 50L, 
47L, 458L, 945L, 808L, 399L, 505L, 690L, 369L, 130L, 991L, 873L, 
735L, 886L, 382L, 687L, 127L, 888L, 517L, 794L, 613L, 105L, 10L, 
170L, 549L, 609L, 976L, 663L, 684L, 1003L, 683L, 628L, 934L, 
415L, 273L, 744L, 669L, 274L, 21L, 87L, 346L, 317L, 373L, 396L, 
113L, 297L, 475L, 768L, 910L, 318L, 111L, 796L, 428L, 903L, 842L, 
225L, 540L, 938L, 413L, 254L, 539L, 38L, 343L, 654L, 219L, 107L, 
644L, 139L, 51L, 709L, 277L, 240L, 33L, 705L, 268L, 14L, 142L, 
570L, 922L, 491L, 11L, 929L, 741L, 629L, 331L, 988L, 118L, 20L, 
486L, 78L, 569L, 392L, 859L, 5L, 224L, 201L, 971L, 57L, 650L, 
381L, 732L, 836L, 577L, 309L, 16L, 982L, 429L, 183L, 936L, 230L, 
165L, 74L, 969L, 444L, 986L, 912L, 863L, 159L, 805L, 933L, 616L, 
771L, 133L, 447L, 407L, 335L, 789L, 422L, 964L, 716L, 301L, 93L, 
594L, 835L, 999L, 522L, 121L, 611L, 135L, 751L, 785L, 560L, 581L, 
664L, 640L, 348L, 673L, 914L, 82L, 179L, 839L, 638L, 134L, 621L, 
860L, 665L, 488L, 733L, 119L, 380L, 314L, 288L, 512L, 493L, 758L, 
76L, 626L, 473L, 376L, 950L, 202L, 43L, 831L, 954L, 4L, 852L, 
375L, 152L, 887L, 862L, 879L, 525L, 351L, 270L, 229L, 844L, 330L, 
783L, 869L, 759L, 431L, 388L, 987L, 974L, 727L, 552L, 911L, 779L
), class = "data.frame") 
```

命令：

```
library(cluster)
plotcluster(ctsubset[,1:4],ctsubset$cluster,cex=0.8,
        col = factor(ctsubset$brgroupnum),
        main="clusters and groups")
legend("bottomright", 
   legend = unique(ctsubset$brgroupttl),pch=19,
   cex=0.7, col=unique(factor(ctsubset$brgroupnum))) 
```

我遇到的问题是颜色。如您所见，绿色、红色、黑色在图例中重复出现，我无法清楚地看到不同的组（由 编码`$groupnum`）。

我尝试过但没有成功的替代方案（因为我不太了解它们）正在使用（1）color brewer（2）colorRampPalette 和（3）grid.raster

我所关心的是能够在我的传奇和情节中看到颜色的良好区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:13:53.843

更改`col=factor(ctsubset$brgroupnum)`11 个值`colors()`

您可以使用我很久以前制作的代码查看颜色：

```
cores <- function() {

 par(mar=c(0,0,0,0),mgp=c(0,0,0))
 plot(c(0:24),type='n') 
 c <- 0

 mouse <- function(b, x, y) {
  x <- as.integer(x*26)
  y <- as.integer(y*26)
  print(colors()[(x+26*y) %% 657 + 1])
  return()
 } 
 k <- colours()[(1:26^2 - 1) %% 657 + 1]
 for (i in 1:26) {
  for (j in 1:26) {
   c <- c+1
   polygon(c(j,j,j-1,j-1),c(i,i-1,i-1,i)-1,col=k[(c-1) %% 657 + 1])
  }
 }
 getGraphicsEvent('Click on a colour!',onMouseDown=mouse)

}
cores() 
```

您也可以使用`rainbow(11)`.

# javascript - 在画布上绘制图像 - 比真实更大

> ID：15793702
> 
> 赞同：18
> 
> 时间：2013-04-03T17:07:19.277
> 
> 标签：javascript, html, canvas, drawimage

我想从画布上的 jpg 文件中绘制图像。我的代码：

```
var canvas = document.getElementById('my_canvas');
  var ctx = canvas.getContext('2d');
  var imageObj = new Image();

  imageObj.onload = function() {
    ctx.drawImage(imageObj, 0, 0);
  };
  imageObj.src = 'img/my_image.jpg'; 
```

问题是画布上的图像比文件中的大得多。为什么？如何绘制图像真实尺寸？

更新：结果：http: [//jsfiddle.net/AJK2t/](http://jsfiddle.net/AJK2t/)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-03T18:08:26.183

这是你的问题：

```
<canvas style="width: 700px; height: 400px;" id="konf"></canvas> 
```

您正在设置画布的**视觉大小**，而不是**像素数**。因此，浏览器正在放大画布像素。

最简单的解决方法是：

```
<canvas width="700" height="400" id="konf"></canvas> 
```

`width`和参数控制画布中的`height`像素数。如果没有 CSS 样式，画布的默认视觉大小也将是这个大小，导致每个屏幕像素一个画布像素（假设您没有缩放 Web 浏览器）。

[从我对相关问题的回答中](https://stackoverflow.com/a/5045549/405017)复制/粘贴：

> 想想如果你有一个 32x32 的 JPG （它*有*1024 个总像素）但是通过 CSS 指定它应该*显示*为`width:800px; height:16px`. 同样的事情也适用于 HTML Canvas：
> 
> *   canvas 元素本身的`width`和`height`属性决定了您可以绘制多少像素。如果您不指定画布元素的高度和宽度，则[按照规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#attr-canvas-width)：
>     *“宽度属性默认为 300，高度属性默认为 150。”*
>     
>     
> *   `width`和`height`CSS 属性控制元素在屏幕上显示的大小。如果未设置 CSS 尺寸，则元素的固有尺寸用于布局。
>     
>     
> 
> 如果您在 CSS 中指定与画布的实际尺寸不同的大小，则浏览器必须根据需要对其进行拉伸和挤压以进行显示。你可以在这里看到一个例子：http: [//jsfiddle.net/9bheb/5/](http://jsfiddle.net/9bheb/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:12:04.047

**工作示例**：http: [//jsfiddle.net/jzF5R/](http://jsfiddle.net/jzF5R/)

为了缩放图像，您需要提供您想要的缩放宽度和高度`ctx.drawImage()`：

```
// x, y, width, height
ctx.drawImage(imageObj, 0, 0, 100, 50); 
```

保持原始图像大小：

```
ctx.drawImage(imageObj, 0, 0, imageObj.width, imageObj.height); 
```

防止画布溢出页面：

```
ctx.canvas.width = document.body.clientWidth; 
```

您可以轻松地将图像宽度和高度缩放到原始图像的 70%：

```
ctx.drawImage(imageObj, 0, 0, imageObj.width * 0.7, imageObj.height * 0.7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-12T10:06:42.027

要在画布（或其他东西）上显示 MJPEG 流而不在 HTML 中定义画布的宽度和高度，所以只使用 CSS 来获得响应式画布并适合页面，我使用它：

```
//get size from CSS
var sizeWidth = context.canvas.clientWidth;   
var sizeHeight = context.canvas.clientHeight;   
//here the solution, it replaces HTML width="" height=""
canvas.width = sizeWidth;
canvas.height = sizeHeight;
...........
context.drawImage(imageObj, 0, 0, imageObj.width, imageObj.height, 0, 0, sizeWidth, sizeHeight); 
```

无论画布的大小如何，图片都完全包含在画布中（不会保留高度和宽度之间的比率，但没关系，一个`height:auto;`in css 可以解决这个问题）。

等等瞧！

# r - 通过库“rbbg”从bloomberg下载数据时出错

> ID：15793703
> 
> 赞同：1
> 
> 时间：2013-04-03T17:07:20.890
> 
> 标签：r, bloomberg, rjava

我有一个 R 代码可以定期从 Bloomberg 下载数据。从 4 个月前到最近，它一直运行良好。库“rbbg”仍然成功加载，当我生成连接时，消息似乎没问题：

```
R version 2.15.2 (2012-10-26) 
rJava Version 0.9-3 
Rbbg Version 0.4-155 
Java environment initialized successfully.
Adding S:/Projects/RCDS/APIv3/JavaAPI/v3.4.6.6/bin/blpapi-3.4.6-6.jar to Java classpath
Bloomberg API Version 3.4.6.6 
```

但是，当我开始使用 tick(...) 从 Bloomberg 下载数据时，该过程停止并出现错误消息：

```
Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  : 
  java.lang.IllegalStateException: Session Not Started 
```

根据此错误消息，我无法判断出什么问题。它可以在 rJava 或 Bloomberg API 中，甚至可以在其他地方。我怀疑由于某些更新而存在版本冲突，但我不确定。非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T17:39:57.347

根据我的经验，我认为您需要先登录彭博（通过终端/GUI）才能使 API 正常工作。

# python - 其他替换单个字符的方法

> ID：15793715
> 
> 赞同：3
> 
> 时间：2013-04-03T17:08:09.143
> 
> 标签：python, python-3.x

是否有更简单的方法来执行以下操作：

```
def replace(txt,pos,new_char):
    return txt[:pos] + new_char + txt[pos+1:] 
```

执行以下操作？

```
>>> replace('12345',2,'b')
'12b45' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:10:12.223

刚刚测试了一些解决方案以找到最佳性能，

测试器源代码为：

```
import __main__
from itertools import permutations
from time import time

def replace1(txt, pos, new_char):
    return txt[:pos] + new_char + txt[pos+1:]

def replace2(txt, pos, new_char):
    return '{0}{1}{2}'.format(txt[:pos], new_char, txt[pos+1:])

def replace3(txt, pos, new_char):
    return ''.join({pos: new_char}.get(idx, c) for idx, c in enumerate(txt))

def replace4(txt, pos, new_char):    
    txt = list('12345')
    txt[pos] = new_char
    ''.join(txt)

def replace5(txt, pos, new_char):
    return '%s%s%s' % (txt[:pos], new_char, txt[pos+1:])

words = [''.join(x) for x in permutations('abcdefgij')]

for i in range(1, 6):
    func = getattr(__main__, 'replace{}'.format(i))

    start = time()
    for word in words:
        result = func(word, 2, 'X')
    print time() - start 
```

结果是：

```
0.233116149902
0.409259080887
2.64006495476
0.612321138382
0.302225828171 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:21:50.763

不确定这是否更简单：

```
>>> txt = list('12345')
>>> txt[2] = 'b'
>>> ''.join(txt)
'12b45' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:20:59.680

不确定“更好”，但另一种方法是适应以下内容：

```
>>> ''.join({2: 'b', 4: 'x'}.get(idx, c) for idx, c in enumerate(s))
'12b4x' 
```

# xml - 无法在 xml 配置中将依赖对象配置为构造函数参数

> ID：15793717
> 
> 赞同：0
> 
> 时间：2013-04-03T17:08:12.357
> 
> 标签：xml, configuration, castle-windsor

[这类似于：[（stackoverflow：多个构造函数）](https://stackoverflow.com/questions/1746387/castle-windsor-problem-with-multiple-constructors%20%28multiple%20constructors%29) ]

我有以下课程：

具有以下构造函数的“ServiceHost:IServiceHost”：

“公共服务主机（ServiceBase baseService）”

[注意，这实际上是“System.ServiceProcess.ServiceBase”的派生词]。如果我手动 - 在代码中 - 将我的“ServiceToHandle:ServiceBase”作为“baseService”参数传递，一切都很好。现在，我尝试通过 xm-configuration 做同样的事情，并配置了两个映射：

```
<component id="TheServiceToControl"
   service="ServiceDemo.ServiceToHandle, ServiceToHandle1"
   type="ServiceDemo.ServiceToHandle, ServiceToHandle1"
>
</component>

<component id="TheServiceController-AKA-ServiceHost"
   service="ServiceDemo.IServiceHost, IServiceHost"
   type="ServiceDemo.ServiceHost, ServiceHost"
>
    <parameters>
        <serviceBase>${TheServiceToControl}</serviceBase>
    </parameters>

</component> 
```

当我加载时：

```
var container = new WindsorContainer(new XmlInterpreter());
IServiceHost host = container.Resolve<IServiceHost>(); 
```

我期待一个已配置的主机对象，它必须使用从“System.ServiceProcess.ServiceBase”派生的附加“TheServiceToControl”对象（我的对象）构建。但我遇到了一个丑陋的错误：

未处理的异常：Castle.MicroKernel.Handlers.HandlerException：无法创建组件“TheServiceController-AKA-ServiceHost”，因为它需要满足依赖关系。

'TheServiceController-AKA-ServiceHost' 正在等待以下依赖项： - 服务'System.ServiceProcess。**ServiceBase** ' 未注册。

我试图添加 System.ServiceProcess 程序集，但我没有办法，它可以制作！

如果有人可能可以解释，这里发生了什么，那就太好了！我没想到必须在层次结构中创建所有对象。

无论如何，谢谢，最好的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:08:39.273

我认为您必须使用以下服务注册您的 ServiceDemo.ServiceToHandle：ServiceBase 即

```
<component id="TheServiceToControl"
   service="ServiceDemo.ServiceBase, ServiceToHandle1"
   type="ServiceDemo.ServiceToHandle, ServiceToHandle1"
>
</component> 
```

解析 TheServiceController-AKA-ServiceHost 时，它将查找服务 ServiceBase，而不是它的派生类型。这样，您还应该能够省略 TheServiceController-AKA-ServiceHost 的参数部分

亲切的问候，马尔维恩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:12:13.297

非常感谢; 我 - 直到现在 ;-) - 昨晚太累了，无法回答我自己的问题 ;-) ....

我误解了 xml-tag 是什么。它是构造函数签名中我的方法的参数名称。它是这个：

```
public ServiceHost(ServiceBase baseService) 
```

那么这个配置就成功了：

```
 <component id="TheServiceController-AKA-ServiceHost"
               service="ServiceDemo.IServiceHost, IServiceHost"
               type="ServiceDemo.ServiceHost, ServiceHost"
        >
            <parameters>
                <baseService>${TheServiceToControl}</baseService>
            </parameters>

        </component> 
```

所以，“baseService”这个词必须匹配，而不是类型。

但是很多，非常感谢！

兄弟，++马布拉

# iphone - 将 uiimage 加载到 uitableviewcell 的背景中的最佳方法

> ID：15793720
> 
> 赞同：1
> 
> 时间：2013-04-03T17:08:21.037
> 
> 标签：iphone, ios, objective-c

我想在我的 uitableviewcell 的背景中放置一个自定义 uiimage，但我不知道最好的方法是什么。一种方法是放置一个 iboutlet 类型的 uiimage 并在那里加载图像。我认为的另一种方法是创建一个视图并替换背景视图。我认为最后一个是最好的，但我不知道什么是最好的选择。

另一方面，我不知道应该在哪里更改背景。我认为在 cellforrow 方法中，当我第一次创建单元格时，而不是在我重用它们时。你怎么看？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:15:11.860

在`cellForRowAtIndexpath`初始化单元格后的方法中，创建一个带有单元格边界的图像视图，然后将图像视图添加到其中，然后将其设置为单元格的背景视图

用这个

```
cell.backgroundView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"foo.png"]] autorelease]; 
```

# c++ - 用 old_value 将元素替换为向量中的 new_value - C++

> ID：15793722
> 
> 赞同：0
> 
> 时间：2013-04-03T17:08:21.917
> 
> 标签：c++, stl, stdvector

我正在浏览一些遗留代码，并发现了一些可以改进的地方。
根据设计，向量具有指向类的指针，并且向量中的所有元素都是唯一的。

函数`ReplaceVal`将向量中具有 old_value 的元素替换为 new_value，方式如下：

```
iterator i, i_e;
i   = vector->begin();
i_e = vector->end ();
for (; i != i_e; ++i)
{
    if ((*i) == old_child)
        break;
}
// Insertion
    vector->insert_call(new_child, i);

// Since, the pointers are invalidated, do another find for erase
    i   = vector->begin();
    i_e = vector->end ();
    for (; i != i_e; ++i)
    {
        if ((*i) == old_child)
            break;
    }
// Finally, erase the old_value
    vector->erase_call(i); 
```

因此，本质上，这涉及**移动元素两次**，*每次插入和擦除*，如果您要在向量中间插入和擦除元素。
对于**n 次插入和删除调用**，平均而言，*如果每次移动 m 个元素，则***复杂度为。** `O(n*m)`

 *我认为，如果我使用`std::replace`这里提到的@MSDN[文档](http://msdn.microsoft.com/en-us/library/44hkey01%28v=vs.71%29.aspx)和[std_replace_example](http://msdn.microsoft.com/en-us/library/z3h6k5xa%28v=vs.71%29.aspx) ，这可以得到改进。

**std::replace**的复杂性在于`O(n)`比较 old_value 和 new_value & 1 赋值操作。这很简单：

```
replace (vector.begin( ), vector.end( ), old_value , new_value); 
```

如果我错了，请纠正我，并就我错过的任何事情分享反馈。
PS insert 和erase 是自定义调用，它们还会更新给定元素的left_sibling 和right_sibling 指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:14:37.697

你甚至不需要这样做：

```
iterator position = std::find( vector->begin() vector->end(), old_child );
if ( position == vector->end() ) {
    throw NoSuchElement();
}
*position = new_child; 
```

应该做的伎俩 - 没有擦除和插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:17:35.417

向量擦除返回一个迭代器，指向被擦除后的元素的位置

```
iter = myvector->erase(i); 
```

然后您可以使用该迭代器进行插入。

```
myvector->inster(iter, new_value); 
```

或相反。vector insert 返回一个指向插入元素的迭代器

```
iter = myvector->inster(i, new_value);

myvector->erase(iter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:18:05.743

为什么不使用其中之一？

*   `std::set`
*   `std::multiset`
*   `std::unordered_set`
*   `std::unordered_multiset`

为什么你有这样的复杂性？有没有什么目的。也可能在`vector`其他地方使用，但您也可以使用*集合*和向量进行搜索。*

# jaxb - EAR 文件：jaxb.properties 文件在哪里

> ID：15793729
> 
> 赞同：1
> 
> 时间：2013-04-03T17:08:34.827
> 
> 标签：jaxb

如果我有如下 EAR 文件...

```
EAR
  EJB
  JAR
  WAR 
```

我会将 jaxb.properties 文件放在哪里。/？。/罐/？别的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:13:14.240

`jaxb.properties`应该与用于引导 JAXBContext 的类之​​一在同一个包中。阅读[此博客](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)了解更多详情

# wordpress - Wordpress - 自定义分类法在某些情况下没有结果。需要完善查询

> ID：15793732
> 
> 赞同：0
> 
> 时间：2013-04-03T17:08:56.373
> 
> 标签：wordpress, categories, taxonomy

最终，我将不得不回退到为我的自定义帖子类型中的标签和类别编写自定义查询，但现在我宁愿希望我可以用 wordpress 的方式来做。

**问题：**如果您查看我的网站（帖子底部），有些类别会显示结果，有些则不会。我试图让父类别甚至显示他们的孩子，允许对图像结果进行分类钻取，按类别进行细化。也许它过于雄心勃勃？这似乎是合理的。

这是构建查询的代码：

```
if ( is_tax( 'image-type' ) ) {

    $term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) );            
    $term_ID = $term->term_taxonomy_id;

    $children = get_term_children( $term_ID, 'image-type' );
    array_push($children, $term_ID);

    $tax_query = array(
         array(
             'taxonomy' => 'image-type',
            'field' => 'id',
            'terms' => $children,

        ) 
    );
} 
```

*这为父母和*孩子设置了部分查询。

查询：

```
if ( get_query_var('paged') )

    $paged = get_query_var('paged');

elseif ( get_query_var('page') )

    $paged = get_query_var('page');

else
    $paged = 1;

$local_query = array(  
    'post-type' => 'image',
    'paged' => $paged,
    'tax_query' => $tax_query,

); 
```

故障站点1：[http ://www.clipartillustrations.com/image-type/all-illustrations-images/](http://www.clipartillustrations.com/image-type/all-illustrations-images/)

故障点 2： http: [//photominingstock.com/earth/](http://photominingstock.com/earth/)

这两个都是测试站点。如果您查看图像页面，您会发现其中许多确实在类别中，但它们没有显示在类别页面上。

在我发现分类法不能共享相似的术语或者一个会给出 404 之前，事情一直运行得相当好。我试图以这种方式进行补救，这似乎进展顺利，但可能给我带来了上述问题：

第一个问题>> [Custom Taxonomy Slug Hook？](https://stackoverflow.com/questions/15777177/custom-taxonomy-slug-hook)

修复一个问题，再做一个。

整个事情可能会通过更智能的查询来解决 - 所以希望我能醒来，看到一个更有资格的人向我展示它应该写的方式：D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:03:05.450

解决方案：

两行需要调整：

```
$term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) );            
$term_ID = $term->term_taxonomy_id; 
```

修订和工作：

if ( is_tax( '图像类型' ) ) {

```
 $term = get_term_by( 'slug', get_query_var( 'image-type' ),  'image-type' );            
    $term_ID = $term->term_id;

    $children = get_term_children( $term_ID, 'image-type' );
    array_push($children, $term_ID);

    $tax_query = array(
         array(
             'taxonomy' => 'image-type',
            'field' => 'id',
            'terms' => $children,

        ) 
    );
} 
```

# php - 在两个选择器块之间查找文本

> ID：15793734
> 
> 赞同：0
> 
> 时间：2013-04-03T17:09:03.033
> 
> 标签：php, dom, curl, simple-html-dom

所以，有我的代码：

```
<div id="first">
 <div id="third">Lorem</div>
   Lorem Ipsum Dolorez [...]
 <script></script>
  ....

 <div id="second">
  Lorem Ipsum[...]
  <a href=""/>
 </div>
  ....
</div> 
```

我需要得到`Lorem Ipsum Dolorez [...]`哪个在~~两个 div~~块之间，一个块`div`和一个块`script`，`Lorem Ipsum[...]`哪个在 div 内部，但没有超链接。

我尝试使用`simple_html_dom.php`，但我不知道该怎么做。

编辑：这是一个网站 - 我无法更改此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:32:50.637

[您可以使用DOM 库](http://www.php.net/manual/en/book.dom.php)和 xpath选择这些节点：（注释中嵌入的说明）

```
$html = '
    <div id="first">
 <div id="third">Lorem</div>
    Lorem Ipsum Dolorez [...]
     <script></script>
    this never gets picked up
   <div id="second">
     Lorem Ipsum[...]
       <a href=""></a>
        <span> this span is extraced since its not an anchor element </span>
    </div>
  </div>';

$doc = new DOMDocument;
$doc->loadHTML($html);

$xpath = new DOMXPath($doc);
$first_lorem = $xpath->query('//div[@id="first"]/div[@id="third"]/following-sibling::text()[following::script]');
// first, find the div#first and inside that a div#third ...
// ... and take text node siblings of that div ...
// ... if those siblings have a script node following them (so if there's a <script> after them)

$first_lorem_html = '';
// loop the results and concat the html output
foreach ($first_lorem as $node) {
    $first_lorem_html .= $doc->saveHTML($node);
}
print $first_lorem_html;

// get the every child of div#second except the ones named 'a'
$second_lorem = $xpath->query('//div[@id="second"]/node()[name() != "a"]');
$second_lorem_html = '';
foreach ($second_lorem as $node) {
    $second_lorem_html .= $doc->saveHTML($node);
}
print $second_lorem_html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:31:44.687

尝试使用 strip_tags php 函数。例子：

```
echo strip_tags('<div id="second">Lorem Ipsum[...]<a href=""/></div>'); 
```

回报：

> 洛雷姆·伊普苏姆[...]

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:36:37.340

根据 simple_html_dom 参考：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

你可以这样做：

```
 $html->find('div[id=third]', 0)->plaintext 
```

# c# - MarshalAs(UnmanagedType.LPWStr) 和 Marshal.PtrToStringUni() 之间的区别

> ID：15793736
> 
> 赞同：6
> 
> 时间：2013-04-03T17:09:04.610
> 
> 标签：c#, .net, marshalling, dllimport, extern

我想导入这样的函数：

```
[return: MarshalAs(UnmanagedType.LPWStr)]
[DllImport("DLL.dll", EntryPoint="FuncUtf16", ExactSpelling=true, PreserveSig=true, CharSet=CharSet.Unicode)]
public static extern string Func(); 
```

但这给了我这样的错误：

“Windows 已在 Test.exe 中触发断点。这可能是由于堆损坏，这表明 Test.exe 或它已加载的任何 DLL 中存在错误。”

当我反复按“继续”时，该功能确实给出了预期的输出。但是，当我偶然将上述声明变为：

```
[DllImport("DLL.dll", EntryPoint="FuncUtf16", ExactSpelling=true, PreserveSig=true, CharSet=CharSet.Unicode)]
public static extern IntPtr Func(); 
```

（将返回类型更改为 IntPtr）并按如下方式调用它：

```
Dim a As IntPtr = Func()
Dim Str As String = Runtime.InteropServices.Marshal.PtrToStringUni(a) 
```

，我没有收到任何错误，而且效果很好！使用“MarshalAs”方式在 dll 中声明函数有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T17:14:15.687

为返回 a 的方法编写 PInvoke 签名`char* / wchar_t*`需要非常小心，因为 CLR 特殊情况`string`返回类型。它做出以下假设

*   `char*`转换为后必须释放内存`string`
*   内存分配给`CoTaskMemAlloc`

如果其中任何一个不正确（通常是这种情况），那么程序就会出错。

一般来说，最好简单地返回一个`IntPtr`并手动编组字符串，就像你对`PtrToStringUni`.

# javascript - nodejs函数到包含函数代码的字符串

> ID：15793737
> 
> 赞同：4
> 
> 时间：2013-04-03T17:09:07.733
> 
> 标签：javascript, node.js

我对nodejs真的很陌生。有没有办法将函数内容转换为字符串？像，如果我有：

```
function() {
    ....
} 
```

我想要“function() { .... }”。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:10:27.053

函数已经有一个`toString()`方法......所以`(function() {}).toString()`应该可以工作。

例如，在节点 REPL 中：

```
> (function() { console.log("hello"); }).toString()
'function () { console.log("hello"); }' 
```

这是一些[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString)的链接。

# webrtc - WebRTC 能够向对等点广播一个本地视频流但从多个远程对等点接收/显示多个视频流吗？

> ID：15793744
> 
> 赞同：3
> 
> 时间：2013-04-03T17:09:28.020
> 
> 标签：webrtc

基本上我有一个媒体服务器，我在会议中有多个客户端发送一个流并接收多个流（媒体服务器不会混合流以使其成为 1:1）。我有这样的 WebRTC/Chrome 附加并可以在 1:1 场景中交换流，但不清楚是否/如何使用 WebRTC 进行 1:N。重申一下，它不是点对点 XN，它是发送一个，接收多个。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:23:42.123

该规范允许在单个 RTCPeerConnection 中接收（和发送）多个流。但是，Chrome（我相信）和 Firefox 中的当前实现还没有启用它。您可以接收多个 RTCPeerConnections，因此一种可能的解决方法是让您有多个 RTCPeerConnections 到服务器，其中一个是发送，而其他是只接收（createOffer() 到（不）提供的限制在不添加 MediaStream 的情况下接收音频和视频）。

这将与规范类似，但您将负责管理 N RTCPeerConnections。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:14:43.103

您似乎需要 webRTC 的 peer 2 peer 实现。我不确定，但你应该检查这些：

[https://hacks.mozilla.org/2013/03/webrtc-data-channels-for-great-multiplayer/](https://hacks.mozilla.org/2013/03/webrtc-data-channels-for-great-multiplayer/)

[https://github.com/js-platform/p2p](https://github.com/js-platform/p2p)

# algorithm - 如何在 24 bpp 显示器上最好地显示 30+ bpp 图形？

> ID：15793747
> 
> 赞同：1
> 
> 时间：2013-04-03T17:09:46.420
> 
> 标签：algorithm, image-processing, graphics, dithering

在常规 24 bpp 显示器上显示每通道超过 8 位的最忠实图形的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:11:45.553

我能想到的最佳解决方案是基于改变每一帧的随机抖动。这结合了抖动与不具有固定抖动模式的优点，并且由于给定像素每秒多次更改值，因此您认为更接近这些不同值的平均值，这更接近原始“深色”值而不是任何给定的 24 bpp 值。

# 它看起来如何

渐变的绿色，无抖动，抖动（显示 10 帧），然后以相同的方式增强可见性：

![带状渐变](https://i.imgur.com/MUuLBY7.gif)

![抖动渐变](https://i.imgur.com/UMhhhrd.gif)

![增强的带状渐变](https://i.imgur.com/rBWtwwP.gif)

![增强的抖动渐变](https://i.imgur.com/k5ZUqOp.gif)

# 抖动

抖动是通过将每个通道的伽马压缩深色值与随机值相加，然后四舍五入到最接近的 8 位值来实现的。使用在 -0.5 和 0.5 之间均匀分布的随机数似乎很自然（我说的是在 8 位伽马压缩值中相当于 1 的单位，例如 0 和 1 或 254 和 255 之间的差异） ，但是这会导致一种带状伪影，其中接近 8 位值的梯度值几乎没有噪声，而离任何 8 位值最远的值会显示更多噪声。高斯噪声更合适，因为它提供了更平滑的噪声水平。我选择了 1.0 的 sigma，但为了减少噪音，可以使用 0.8 的 sigma。

您可以通过取两个随机数来创建高斯 PRNG，`n1`并将`n2`它们分别拟合在 [-1 , 1] 范围内，并且它们是否代表单位圆内的一个点（如果`sum`它们的平方和小于或等于 1 ，否则重新开始）返回`sqrt(-2\. * log(sum) / sum) * n1`。

# 实际实施

我选择通过将每通道 15 位的线性 RGB 帧缓冲区转换为每通道 8 位的 sRGB 帧缓冲区来实现这一点。sRGB 的线性部分只是一个细节，我使用查找表将线性值转换为 gamma 压缩值（我选择使这些中间值使用 13 位，您可以将其视为 sRGB 值的 8.5 定点符号）。

不用说，您不会为每个像素生成一个新的随机高斯数，您需要预先计算一堆并将它们放入循环缓冲区中。我选择了 16384 个，是的，只有 16384 个，我通过在这个缓冲区中选择一个随机入口点来避免任何重复模式，一个随机长度（在 100 到 1123 之间，这是非常任意的），当我到达长度的结束我选择了一个新的随机起点和一个新的随机长度。通过这种方式，我可以从相对较小的数字缓冲区中获得相当随机的非重复模式。缓冲区中的数字以 2.5 定点格式存储，这样它们都在 -4.0 和 4.0 之间，涵盖了我想要的高斯随机数范围。只需确保添加 0。

以下是每个像素和每个通道的基本工作原理：

15 位线性值——通过 LUT——> 13 位（8.5 定点）伽马压缩值，然后添加 2.5 定点随机数，然后向右 SHIFT 5 位。

现在你得到一个介于 -4 和 260 之间的整数值，你可以使用 if()s 来限制它们，但是使用 264 元素 LUT 会更快，它为负数返回 0（你可以通过分配使用负数作为索引您的缓冲区然后执行 buffer = &buffer[4]，我猜会为您节省一个加法）并且对于 255 以上的数字返回 255。此外，我对三个颜色通道中的每一个都使用相同的随机数，这可以避免色度噪声，尽管可以说是如果这三个使用独立的数字，结果可能看起来不那么嘈杂。

对于单个像素的红色通道，我的代码如下所示： `sfb[i].r = bytecheck_l.lutb[lsrgb_l.lutint[fb[i].r] + dither_l.lutint[id] >> 5];` sfb 是 sRGB 24 bpp 缓冲区，fb 是 45 bpp 线性 RGB 缓冲区，lsrgb_l.lutint[] 是线性到伽马压缩 LUT，dither_l.lutint[] LUT包含 2.5 定点格式的随机高斯数和 bytecheck_l.lutb[] 返回值裁剪为 [0 , 255]。

# 表现

我在 1400x820 SDL 窗口中获得超过 50 FPS 的测试梯度，仅使用 2.4 GHz Core 2 Quad Q6600 的一个内核和双通道 800 MHz DDR2 内存，按当前标准来看，这台机器有点平庸，所以这个解决方案似乎绝对适合现代电脑。

如果我的任何解释需要澄清，请告诉我。

# jquery - 使用 jquery 解析多维 JSON 文件

> ID：15793748
> 
> 赞同：0
> 
> 时间：2013-04-03T17:09:57.143
> 
> 标签：jquery, json

我正在尝试使用 jquery 解析此 JSON 文件以访问设置为“true”的“onpage”字段。然后使用该项目中的其他字段（描述、图标、名称和 url）。我可以进入“项目”，但可以弄清楚如何进入“项目”内的“页面”。谢谢

```
[
{
    "group": "Home",
    "url": "http://www.home.com/"
},
{
    "group": "Production",
    "items": [
        {
            "onpage": true,
            "desc": "View local trails",
            "icon": "img/trails.png",
            "name": "Trails",
            "url": "https://www.home.com/go/Trails"
        },
        {
            "onpage": false,
            "desc": "Edit local trail",
            "icon": "img/traileditor.png",
            "name": "Trail Editor",
            "url": "https://www.home.com/go/Editor/"
        }
    ]
} 
```

]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:12:08.190

一旦你解析了它，你就有了一个包含两个对象的数组。这些对象中的第二个具有一个属性 ，`items`它是一个对象数组。该`items`数组中的第一个条目`onpage`等于`true`。所以直接路径是：

```
itemWithOnPageTrue = theParsedData[1].items[0]; 
```

如果你需要找到它，你可能会使用一对循环：

```
var itemWithOnPageTrue;
$.each(theParsedData, function() {
    var found;
    if (this.items) {
        $.each(this.items, function() {
            if (this.onpage) {
                itemWithOnPageTrue = this;
                found = true;
                return false;
            }
        });
        if (found) {
            return false;
        }
    }
}); 
```

[`$.each`](http://api.jquery.com/jQuery.each/)如果您返回 false，将停止循环，这就是我们在找到第一个匹配项时这样做的原因。如果您不返回任何内容或返回不同的值，它将继续循环。

拥有`itemWithOnPageTrue`后，您可以访问其其他属性，例如`itemWithOnPageTrue.desc`,`itemWithOnPageTrue.icon`等。

# jquery-ui - AngularJs + JqueryUI 滑块初始值

> ID：15793751
> 
> 赞同：3
> 
> 时间：2013-04-03T17:10:02.030
> 
> 标签：jquery-ui, angularjs, angularjs-directive

这是我在这里的第一篇文章，所以我希望它会是全面的。

我正在使用 AngularJs，并且使用 angular 指令添加了一个 JqueryUI 滑块。我找到了很多关于如何做到这一点的例子，但没有一个例子告诉我如何从范围内将初始值添加到滑块。

这是我创建的 [jsfiddle](http://jsfiddle.net/ntaUJ/21/)

```
var testApp= angular.module('testApp',['ngResource']);

testApp.factory('remoteRequest', function($resource) {
var remoteRequest = $resource('/echo/json/');
return remoteRequest;
});

testApp.directive('sliderDays', function() {
return {
    link: function(scope, elem,attrs) {
        $(elem).slider({
            range: true,
            min: scope.days[1],
            max: scope.days[scope.days.length-1],
            values: [scope.days[0], scope.days[1]],
            slide: function( event, ui ) {
                console.log(ui.values[ 0 ] +" "+ ui.values[ 1 ]                 );
            }
        });
    }
}
});

function TestCtrl($scope, $resource, remoteRequest)
{
$scope.prova=1;
$scope.days=[];
var ret= remoteRequest.get(function(){
     $scope.days=[1,2,3,4,5,10,25];
});
} 
```

任何形式的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:17:45.707

这是您代码中的一个工作小提琴，我在更改的地方添加了注释。你遇到的一个主要问题是你试图`scope.days`在它有任何数据之前访问数组元素。

**小提琴**

[http://jsfiddle.net/ntaUJ/24/](http://jsfiddle.net/ntaUJ/24/)

**看法**

```
<div ng-app="testApp">
    <div ng-controller="TestCtrl">
        <p><span>{{days[0]}}</span> - <span>{{days[days.length-1]}}</span></p>
        <div slider-days days="days"></div>
    </div>
</div> 
```

**代码**

```
var testApp= angular.module('testApp',['ngResource']);

testApp.directive('sliderDays', function() {
  return {
    link: function(scope, elem,attrs) {
      $(elem).slider({
        range: true,
        min: scope.days[1],
        max: scope.days[scope.days.length-1],
        values: [scope.days[0], scope.days[scope.days.length-1]],
        slide: function( event, ui ) {
          console.log(ui.values[0], ui.values[1]);
        }
      });
    }
  }
});

function TestCtrl($scope)
{
    $scope.days=[1,2,3,4,5,10,25];
} 
```

# python - 在请求中处理文本和重置

> ID：15793752
> 
> 赞同：0
> 
> 时间：2013-04-03T17:10:02.950
> 
> 标签：python, python-2.7, python-requests

决定使用 Python 请求来编写 REST 客户端。一切都适用于 POST，但在 GET 上一切都不太顺利。

REST 服务器预先`throw 'allowIllegalResourceCall is false.';`添加到所有 GET 响应（作为反网络钓鱼机制）。使用标准 python 正则表达式库很容易删除，使用以下语句：（`re.sub('\A.*[;]\n', "", r.text)`可能不完美，但可以完成工作）。（假设 r 是响应数据结构）

但是，当我将后处理的文本重置回 r.text 时，就会出现问题：`r.text = re.sub('\A.*[;]\n', "", r.text)`这会引发以下异常：`AttributeError: can't set attribute`，这会让我相信文本是只读字段。（我想重置文本字段，所以我可以使用 Response 对象的 json 功能）

所以现在我已经解决了背景问题，我想我的问题是有没有人知道解决方案以及为什么 text 是只读属性？（注意，我知道我可以在实际请求源中为 text 属性添加一个设置器，但出于多种原因（不想破坏未来版本的构建、可移植性等） ））。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:13:10.563

如果您只想解码 JSON，则无需再次设置*属性*：`text`

```
import json

json.loads(re.sub('\A.*[;]\n', "", r.text)) 
```

如果您迫切需要修复响应正文，请`response._content`改为设置；首先从`.content`属性中读取它：

```
r._content = re.sub('\A.*[;]\n', "", r.content) 
```

# mongodb - MongoDB 错误：无法连接到服务器

> ID：15793753
> 
> 赞同：0
> 
> 时间：2013-04-03T17:10:09.817
> 
> 标签：mongodb

我有一个月的问题，我没有找到解决方案。我的笔记本电脑和PC都有这些问题（我之前开始使用mongod）：

> 错误：无法连接到服务器 127.0.0.1:27017 src/mongo/shell/mongo.js:91 异常：连接失败
> 
> 错误：无法连接到服务器 127.0.0.1:27017 src/mongo/shell/mongo.js:93 异常：连接失败
> 
> 错误：无法连接到服务器 127.0.0.1:27017 src/mongo/shell/mongo.js:L112 异常：连接失败

我已经启动了没有任何参数的 mongod 进程。而且我通过 ping 127.0.0.1 收到回复消息

顺便说一句，我使用的是 windows 操作系统，它没有任何权限问题。另外我从头开始数据目录但没有工作。（mongod的日志文件没有错误）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-29T23:23:15.113

我收到此错误是因为我不小心运行了“mongo.exe”而不是“mongod.exe”。所以，当然，Mongo 抱怨它没有数据库可以连接。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:53:19.970

哎呀！我的问题解决了。问题是一个名为“Proxifier”的软件阻止了我的本地主机。我关闭了它，它工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-29T05:11:57.053

打开您的任务管理器..单击服务..找到mongodb并右键单击它...单击开始... bhoom您的问题已解决..打开cmd并检查它

# r - 将 R 列表转换为缺少/NULL 元素的数据框

> ID：15793759
> 
> 赞同：19
> 
> 时间：2013-04-03T17:10:23.943
> 
> 标签：r, list, dataframe, plyr

给定一个列表：

```
alist = list(
  list(name="Foo",age=22),
  list(name="Bar"),
  list(name="Baz",age=NULL)
 ) 
```

将其转换为具有名称和年龄列且缺少值的数据框的最佳方法是什么（我将按优先顺序接受 NA 或“”）？

使用失败的简单方法`ldply`是因为它尝试将每个列表元素转换为数据框，但由于长度不匹配，所以使用 NULL barfs 的那个。我目前最好的是：

```
> ldply(alist,function(s){t(data.frame(unlist(s)))})
  name  age
1  Foo   22
2  Bar <NA>
3  Baz <NA> 
```

但这很恶心，数字变量成为一个因素......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T17:22:24.983

Step1：删除`NULL`项目

```
non.null.list <- lapply(alist, Filter, f = Negate(is.null)) 
```

Step2：将所有内容堆叠在一起：

```
library(plyr)
rbind.fill(lapply(non.null.list, as.data.frame))
#   name age
# 1  Foo  22
# 2  Bar  NA
# 3  Baz  NA 
```

* * *

**编辑**：如果您有一个`NULL`适用于所有列表项的变量，它不会出现在您的最终输出中。相反，如果您想要一个用 填充的列`NA`，则第一步不应该删除`NULL`s，而是用 s 替换它们`NA`：

第 1 步替代方案：替换`NULL`为`NA`：

```
non.null.list <- lapply(alist, lapply, function(x)ifelse(is.null(x), NA, x)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-03T21:06:15.187

提到只需要一个循环的评论，只需将两个循环的主体放在一起，就可以通过[@flodel 的回答来实现：](https://stackoverflow.com/a/15793965/892313)

```
rbind.fill(lapply(alist, function(f) {
  as.data.frame(Filter(Negate(is.null), f))
})) 
```

给予

```
 name age
1  Foo  22
2  Bar  NA
3  Baz  NA 
```

# c# - Xpath - 节点序列的数字比较失败，仅使用第一个节点

> ID：15793772
> 
> 赞同：2
> 
> 时间：2013-04-03T17:10:55.577
> 
> 标签：c#, xpath

我发现在 Xpath 表达式中使用“数字”函数时，该函数仅使用序列中的第一个节点。问题的一个例子：

```
using System.Xml;
using System;
namespace ConsoleApplication1
{
    public class Program
    {
        public static void Main()
        {
            XmlDocument doc = new XmlDocument();            
            doc.LoadXml(
@"<baseball>
    <games>
        <game>
            <id>1</id>
            <stadiumId>7</stadiumId>
            <attendance>4999</attendance>
        </game>
        <game>
            <id>2</id>
            <stadiumId>5</stadiumId>
            <attendance>600</attendance>
        </game>
        <game>
            <id>3</id>
            <stadiumId>5</stadiumId>
            <attendance>789</attendance>
        </game>
    </games>
    <stadiums>
        <stadium><id>5</id><capacity>1000</capacity></stadium>
        <stadium><id>7</id><capacity>5000</capacity></stadium>
        <stadium><id>9</id><capacity>560</capacity></stadium>
    </stadiums>
</baseball>");

            printNodes("what stadiums had games occur in them?",
                doc.SelectNodes("/baseball/stadiums/stadium[./id/text()=/baseball/games/game/stadiumId/text()]"));

            printNodes("what stadiums had games occur in them? this time converting to numbers before doing comparison",
                doc.SelectNodes("/baseball/stadiums/stadium[number(./id/text())=number(/baseball/games/game/stadiumId/text())]"));
        }//Main

        private static void printNodes(string description, XmlNodeList nodeList)
        {
            Console.WriteLine("-----" + description + "-------");
            foreach (XmlNode node in nodeList)
                Console.WriteLine(node.OuterXml);
            Console.WriteLine("-------------------");
        }       
    }//class
}//namespace 
```

输出是：

```
-----what stadiums had games occur in them?-------
<stadium><id>5</id><capacity>1000</capacity></stadium>
<stadium><id>7</id><capacity>5000</capacity></stadium>
-------------------
-----what stadiums had games occur in them? this time converting to numbers before doing comparison-------
<stadium><id>7</id><capacity>5000</capacity></stadium>
------------------- 
```

它仅在第二个输出中返回体育场 7 的原因（尽管 Xpath 查询在逻辑上相同）是因为第一个棒球/游戏/游戏节点的 StadiumId 为 7。没有评估其他游戏节点。

这是数字功能的预期功能吗？有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:29:04.203

第一：`number`按设计仅转换节点集中的第一个元素 - 请参阅[XPath 规范中的数字](http://www.w3.org/TR/xpath/#function-number)。

第二： `=`在 XPath 中更像是“任意对匹配”而不是“两边都相等”。因此，您的第一个陈述是正确的，因为“游戏/游戏”中有*一个元素*与“id”匹配“体育场”，第二个无法按预期工作，因为“游戏/游戏/体育场Id”节点列表由“数字”转换" 函数只是列表中第一个的 ID（见上文）。

如果您要编写许多 XPath 表达式，请阅读规范，至少是定义“=”如何工作的[布尔部分。](http://www.w3.org/TR/xpath/#booleans)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:11:11.910

**如果你真的想比较数字，在 XPath 2.0 中你可以使用**：

```
 /*/stadiums/*
        [xs:integer(id) = /*/games/*/stadiumId/xs:integer(.)] 
```

**基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:sequence select=
  "/*/stadiums/*
         [xs:integer(id) = /*/games/*/stadiumId/xs:integer(.)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<baseball>
    <games>
        <game>
            <id>1</id>
            <stadiumId>7</stadiumId>
            <attendance>4999</attendance>
        </game>
        <game>
            <id>2</id>
            <stadiumId>5</stadiumId>
            <attendance>600</attendance>
        </game>
        <game>
            <id>3</id>
            <stadiumId>5</stadiumId>
            <attendance>789</attendance>
        </game>
    </games>
    <stadiums>
        <stadium>
            <id>5</id>
            <capacity>1000</capacity>
        </stadium>
        <stadium>
            <id>7</id>
            <capacity>5000</capacity>
        </stadium>
        <stadium>
            <id>9</id>
            <capacity>560</capacity>
        </stadium>
    </stadiums>
</baseball> 
```

**对 XPath 表达式求值，并将该求值的结果（选定元素）复制到输出**：

```
<stadium>
            <id>5</id>
            <capacity>1000</capacity>
</stadium>
<stadium>
            <id>7</id>
            <capacity>5000</capacity>
</stadium> 
```

# java - Jodatime 时区转换

> ID：15793773
> 
> 赞同：0
> 
> 时间：2013-04-03T17:10:55.690
> 
> 标签：java, datetime, timezone, jodatime, timezone-offset

我正在使用 Joda 时间来验证带有时区的时间戳。当我通过无效的日期或时间时，它按预期工作。例如，当我以秒为单位传递 99 时，它给出了以下错误：

```
Exception in thread "main" org.joda.time.IllegalFieldValueException: Cannot  
parse "20131231235999+00": Value 99 for secondOfMinute must be in the range [0,59] 
```

我期待它会抛出类似的异常，因为我也通过了无效的时区。我期待 UTC 偏移值小于 -12 且大于 +14 小时（[http://en.wikipedia.org/wiki/List_of_time_zones_by_UTC_offset](http://en.wikipedia.org/wiki/List_of_time_zones_by_UTC_offset)）。当偏移值超过 23 小时时，它确实给出了以下错误。

```
Exception in thread "main" java.lang.IllegalArgumentException: Invalid
format: "20131231235959+24" is malformed at "24" 
```

我想我遗漏了一些东西，因为它表明 24 小时内出现错误。有人可以解释为什么它允许偏移值 < -12 和 > 14 小时。

下面给出了一个示例程序，输出不同的偏移量：

```
public static void main(String[] args) throws ParseException, DatatypeConfigurationException
{
    DateTimeFormatter dtf = DateTimeFormat.forPattern("yyyyMMddHHmmssZ").withZoneUTC();
    String dateString = "";

    for (int i = 0; i < 24; i++)
    {
        if (i < 10)
        {
            dateString = "20131231235959+0" + i;
            DateTime dt1 = dtf.parseDateTime(dateString);
            System.err.println(dateString + " = " + dt1);
        }
        else
        {
            dateString = "20131231235959+" + i;
            DateTime dt1 = dtf.parseDateTime(dateString);
            System.err.println(dateString + " = " + dt1);
        }
    }

    for (int i = 0; i < 24; i++)
    {
        if (i < 10)
        {
            dateString = "20131231235959-0" + i;
            DateTime dt1 = dtf.parseDateTime(dateString);
            System.err.println(dateString + " = " + dt1);
        }
        else
        {
            dateString = "20131231235959-" + i;
            DateTime dt1 = dtf.parseDateTime(dateString);
            System.err.println(dateString + " = " + dt1);
        }
    }
}

Output:

20131231235959+00 = 2013-12-31T23:59:59.000Z  20131231235959-00 = 2013-12-31T23:59:59.000Z
20131231235959+01 = 2013-12-31T22:59:59.000Z  20131231235959-01 = 2014-01-01T00:59:59.000Z
20131231235959+02 = 2013-12-31T21:59:59.000Z  20131231235959-02 = 2014-01-01T01:59:59.000Z
20131231235959+03 = 2013-12-31T20:59:59.000Z  20131231235959-03 = 2014-01-01T02:59:59.000Z
20131231235959+04 = 2013-12-31T19:59:59.000Z  20131231235959-04 = 2014-01-01T03:59:59.000Z
20131231235959+05 = 2013-12-31T18:59:59.000Z  20131231235959-05 = 2014-01-01T04:59:59.000Z
20131231235959+06 = 2013-12-31T17:59:59.000Z  20131231235959-06 = 2014-01-01T05:59:59.000Z
20131231235959+07 = 2013-12-31T16:59:59.000Z  20131231235959-07 = 2014-01-01T06:59:59.000Z
20131231235959+08 = 2013-12-31T15:59:59.000Z  20131231235959-08 = 2014-01-01T07:59:59.000Z
20131231235959+09 = 2013-12-31T14:59:59.000Z  20131231235959-09 = 2014-01-01T08:59:59.000Z
20131231235959+10 = 2013-12-31T13:59:59.000Z  20131231235959-10 = 2014-01-01T09:59:59.000Z
20131231235959+11 = 2013-12-31T12:59:59.000Z  20131231235959-11 = 2014-01-01T10:59:59.000Z
20131231235959+12 = 2013-12-31T11:59:59.000Z  20131231235959-12 = 2014-01-01T11:59:59.000Z
20131231235959+13 = 2013-12-31T10:59:59.000Z  20131231235959-13 = 2014-01-01T12:59:59.000Z
20131231235959+14 = 2013-12-31T09:59:59.000Z  20131231235959-14 = 2014-01-01T13:59:59.000Z
20131231235959+15 = 2013-12-31T08:59:59.000Z  20131231235959-15 = 2014-01-01T14:59:59.000Z
20131231235959+16 = 2013-12-31T07:59:59.000Z  20131231235959-16 = 2014-01-01T15:59:59.000Z
20131231235959+17 = 2013-12-31T06:59:59.000Z  20131231235959-17 = 2014-01-01T16:59:59.000Z
20131231235959+18 = 2013-12-31T05:59:59.000Z  20131231235959-18 = 2014-01-01T17:59:59.000Z
20131231235959+19 = 2013-12-31T04:59:59.000Z  20131231235959-19 = 2014-01-01T18:59:59.000Z
20131231235959+20 = 2013-12-31T03:59:59.000Z  20131231235959-20 = 2014-01-01T19:59:59.000Z
20131231235959+21 = 2013-12-31T02:59:59.000Z  20131231235959-21 = 2014-01-01T20:59:59.000Z
20131231235959+22 = 2013-12-31T01:59:59.000Z  20131231235959-22 = 2014-01-01T21:59:59.000Z
20131231235959+23 = 2013-12-31T00:59:59.000Z  20131231235959-23 = 2014-01-01T22:59:59.000Z 
```

谢谢，

阿南德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:04:20.360

来自 ISO 8601：

> 当需要表示当地时间与当天UTC的差异时，差异的表示可以用小时和分钟表示，也可以只用小时表示。如果当地时间早于或等于当天的 UTC，则应表示为正数（即带前导加号 [+]），如果晚于 UTC，则应表示为负数（即带前导减号 [-]）天。仅当时间刻度之间的差异恰好是整数小时时，才可以省略差异的分钟时间元素。基本格式：±hhmm 示例：+0100 ±hh +01 扩展格式：±hh:mm 示例：+01:00

它没有明确提到范围，但它们确实使用了与小时相同的字母。鉴于[joda 时间默认使用 ISO 8601，](http://joda-time.sourceforge.net/cal_iso.html)似乎暗示偏移的范围与时间表示的小时值的范围相同。

# python - 在继承自 SimpleXMLRPCServer 的类的 __init__ 上调用 serve_forever

> ID：15793779
> 
> 赞同：0
> 
> 时间：2013-04-03T17:11:11.303
> 
> 标签：python, python-2.7, simplexmlrpcserver

这是错的吗？

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
from random import randint

def TicTacServer(SimpleXMLRPCServer):

    def __init__(self,host):
        super(TicTacServer,self).__init__(host)
        self.resetGame()
        super(TicTacServer,self).register_function(self.addPlayer)
        super(TicTacServer,self).register_function(self.getBoard)
        super(TicTacServer,self).register_function(self.whoGoesFirst)
        super(TicTacServer,self).register_function(self.insertMove)
        super(TicTacServer,self).register_function(self.whosTurnIsIt)
        super(TicTacServer,self).register_function(self.gameIsReady)
        super(TicTacServer,self).register_function(self.resetGame)
        super(TicTacServer,self).serve_forever() 
```

所有这些功能都已声明并按预期工作。我不知道这是否可能，python 不会抛出任何错误，但我无法使用它连接到它

```
xmlrpclib.ServerProxy 
```

这是代理服务器的代码：

```
from xmlrpclib import ServerProxy

class TicTacClient(ServerProxy):
    def __init__(self,host):
        ServerProxy.__init__(self,host)
        self.board = self.getBoard() 
```

这是我得到的错误

```
Traceback (most recent call last):
  File "tictacClient.py", line 77, in <module>
    client = TicTacClient('http://localhost:8081')
  File "tictacClient.py", line 7, in __init__
    self.board = self.getBoard()
  File "C:\Python27\lib\xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "C:\Python27\lib\xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "C:\Python27\lib\xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "C:\Python27\lib\xmlrpclib.py", line 1292, in single_request
    self.send_content(h, request_body)
  File "C:\Python27\lib\xmlrpclib.py", line 1439, in send_content
    connection.endheaders(request_body)
  File "C:\Python27\lib\httplib.py", line 954, in endheaders
    self._send_output(message_body)
  File "C:\Python27\lib\httplib.py", line 814, in _send_output
    self.send(msg)
  File "C:\Python27\lib\httplib.py", line 776, in send
    self.connect()
  File "C:\Python27\lib\httplib.py", line 757, in connect
    self.timeout, self.source_address)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
socket.error: [Errno 10061] No connection could be made because the target machine actively refused it 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:22:10.113

在检查了 SimpleXMLRPCServer 源之后，我想出了这个，女巫正在工作，我现在可以连接到它。

```
from SimpleXMLRPCServer import SimpleXMLRPCServer

class TicTacServer(SimpleXMLRPCServer):

    board = [u' '] * 10
    player = []

    public = ('addPlayer','getBoard','whoGoesFirst','insertMove','whosTurnIsIt','gameIsReady','resetGame')

    def _dispatch(self, method, params):

        if method in self.public:
            func = getattr(self,method)
            return func(*params)
        else:
            raise Exception('method "%s" is not supported' % method)

server = TicTacServer(('localhost',8081))
server.serve_forever() 
```

来自 Python27/Lib/SimpleXMLRPCServer.py：

```
The default implementation
attempts to dispatch XML-RPC calls to the functions or instance
installed in the server. Override the _dispatch method inhereted
from SimpleXMLRPCDispatcher to change this behavior. 
```

# javascript - 当用户单击符号时插入新的输入文件

> ID：15793781
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:11:16.180
> 
> 标签：javascript, html

我如何允许用户添加例如他需要的带有数字的书籍，这个需要没有限制，所以如果他点击添加另一个网页将打开一个新的输入字段。最后他会点击提交按钮。

```
<html>
<head></head>
<body>
<?php
if(isset($_POST['submit']))
{?>
<td><input type="submit" value="Add another"/></td>

<?php } ?

?>
<form action="" method="post">
<table>
<tr>
<td><input type="text" name="need"/></td>
<td><input type="submit" value="Add another"/></td>
</tr>
</table>
<input type="submit" value="submit"/>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:47:28.637

这是基本的 Javascript，我创建了一个小的 Demo Example 来帮助您理解。如果您有任何问题，请告诉我。

**演示：http:** [//jsfiddle.net/VdW3P/1/](http://jsfiddle.net/VdW3P/1/)

```
<fieldset>
<legend>Demo</legend>
<form method="POST">
<div id="dynamicInput">
          Entry 1<br /><input type="text" name="myInputs[]">
</div>
<input type="button" value="Add another text input" onClick="addInput('dynamicInput');"></br>
</form>
</fieldset> 
```

Javascript代码：

```
var counter = 1;
var limit = 3;
function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]'>";
          document.getElementById(divName).appendChild(newdiv);
          counter++;
     }
} 
```

# wpf - 响应事件时运行命令

> ID：15793791
> 
> 赞同：1
> 
> 时间：2013-04-03T17:11:34.933
> 
> 标签：wpf, xaml, events, mvvm, command

基本上，我试图响应 WPF 控件引发的事件，但不是使用代码隐藏，而是运行命令（ICommand）。

我有一个名为 CouponView 的窗口和一个名为 SingleBetView 的 UserControl。我有一个名为 CouponViewModel 的 ViewModel，它是 CouponView 的 DataContext，还有一个名为 BetsViewModel 的 ViewModel，它是 SingleBetView 的 DataContext。我将 SingleBetView 添加到 CouponView 并将其设置为 DataContext ，如下所示：

```
<View:SingleBetView DataContext="{Binding Path=BetsViewModel}" /> 
```

SingleBetView 包含一个DataGrid，我要响应这个网格的KeyDown 事件。我创建了一个名为 DownArrowRepeatsStakesCommand 的 Command 类，并在 BetsViewModel 中放置了一个实例，如下所示：

```
public DownArrowRepeatsStakesCommand DownArrowRepeatsStakesCommand { get; set; } 
```

然后我在 BetsViewModel 的构造函数中实例化它，如下所示：

```
DownArrowRepeatsStakesCommand = new DownArrowRepeatsStakesCommand(_bets); //_bets is an observable collection, my DataGridView is bound to this ObservableCollection and when the KeyDown is pressed, I want to update various elements 
```

我知道我可以很容易地将按钮链接到我的命令，只需将其绑定到 ViewModel 中的实例，如下所示：

```
Command="{Binding DownArrowRepeatsStakesCommand}" 
```

但是这似乎不适用于响应事件：

```
KeyDown="{Binding DownArrowRepeatsStakesCommand} 
```

我收到以下运行时错误：

```
A 'Binding' cannot be set on the 'AddKeyDownHandler' property of type 'DataGrid'. A 'Binding' can only be set on a DependencyProperty of a DependencyObject. 
```

我尝试了 Reed 关于使用 MVVM light 的建议（我通过 NuGet 添加的）以及在[此处](http://geekswithblogs.net/lbugnion/archive/2009/11/05/mvvm-light-toolkit-v3-alpha-2-eventtocommand-behavior.aspx)找到的步骤，理论上很好，但出现以下错误：

> 无法加载文件或程序集“GalaSoft.MvvmLight.Extras.WPF4，PublicKeyToken=1673db7d5906b0ad”或其依赖项之一。该系统找不到指定的文件。

这是我添加到 DataGrid 的 XAML：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="KeyUp">
        <command:EventToCommand Command="{Binding DownArrowRepeatsStakesCommand, Mode=OneWay}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

这是一个屏幕截图（没有内部异常）：

![截屏](https://i.stack.imgur.com/nLs2H.png)

我还收到以下两个警告：

*   无法将“EventTrigger”类型的实例添加到“TriggerCollection”类型的集合中。只允许使用“T”类型的项目。
*   不能将“EventTrigger”类型的值添加到“TriggerCollection”类型的集合或字典中。

有点懵！

有什么方法可以做我在命令中尝试做的事情，或者它是唯一选项的代码隐藏？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:13:55.720

WPF 不直接支持这一点。您需要一些额外的“粘合剂”，例如[MVVM Light 的 EventToCommand](http://geekswithblogs.net/lbugnion/archive/2009/11/05/mvvm-light-toolkit-v3-alpha-2-eventtocommand-behavior.aspx)实现，它允许您获取任何事件并将其映射到`ICommand`ViewModel 中的一个。

# mysql - 如果仅在 where 子句中使用日期，则使用 MySQL 查询不会返回数据，但如果我包含其他参数，则会返回数据

> ID：15793792
> 
> 赞同：0
> 
> 时间：2013-04-03T17:11:34.900
> 
> 标签：mysql, sql

我目前无法访问实际代码来向您展示，但我在运行查询时遇到问题，如果我使用 where 子句且唯一参数是日期，该查询不会返回任何结果。但是，如果我还包含另一个参数，例如 ID，那么它会返回结果。

例如，这将不返回任何结果：

```
SELECT *
FROM table
WHERE date >= '2013-01-01' 
```

而这将返回结果：

```
SELECT *
FROM table
WHERE date >= '2013-01-01' and ID = 2 
```

我已经让其他人查看它以确认它没有任何意义。类似的查询工作正常。如果没有人知道我将在明天更新实际查询。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:20:45.480

这是在黑暗中拍摄，但由于“日期”也是字段类型 - 当 WHERE 中仅使用具有此名称的字段时，可能存在某种冲突。

# html - IE9 HTML5 视频仅在缓存清除后可见

> ID：15793796
> 
> 赞同：2
> 
> 时间：2013-04-03T17:11:51.230
> 
> 标签：html, video, internet-explorer-9

html5 视频适用于所有浏览器。除了在IE9中它只在缓存被清除后显示；

清除缓存后第二次页面刷新不再显示弹窗；

该视频在基础 3 中显示。IE9 开发者工具显示计算的 css：

```
box-sizing: border-box;
float: none;
height: 416px;
width: 640px;
visibility: visible; 
```

但是，如果这将是一个 CSS 问题，那么视频将永远不会显示。此外，视频播放正常，没有编码问题。

IE9+8 HTML5 视频的可能重复 [- 视频加载但“不可见”](https://stackoverflow.com/questions/15685722/ie98-html5-video-video-loads-but-invisible)

**编辑**添加了错误的展示[点击这里](http://321zeno.com/staging/videotest/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:20:12.800

作为快速修复，我从 css 中删除了视频的高度属性，并在打开模式后触发的回调中使用 javascript 添加了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T20:50:59.530

我知道这已得到解答，但我遇到了这个问题，这可能对将来的某人有所帮助。

我添加`autoplay`为属性，mp4 出现在我面前。这是我的工作视频示例

```
<video  width="680" height="520" autoplay loop controls src="source-of-vido.mp4">
 </video> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:48:50.000

您是在本地机器上还是在服务器上进行测试？在 IE 浏览器中，您可以尝试... F12 > 缓存 > 选择始终从服务器刷新

很难知道您在 IE 浏览器中设置了什么。:) 最佳 k

# r - 根据 R 中的阈值创建子集

> ID：15793800
> 
> 赞同：0
> 
> 时间：2013-04-03T17:12:05.513
> 
> 标签：r, dataframe

我需要根据数据帧的上 85-95% bin 对数据帧中的值进行子集化。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:14:48.903

您可以使用`quantile`来确定哪个值是 85 或 95% bin。接下来，您可以使用正常的 R 子集语法来仅获取高于该阈值的数据。

```
df[df$value > quantile_thold,] 
```

# java - 使用 JSF Validators 查询数据库

> ID：15793804
> 
> 赞同：0
> 
> 时间：2013-04-03T17:12:09.277
> 
> 标签：java, jsf

我正在使用 JSF，并且正在构建一个注册网页。我正在尝试使用验证器来检查用户选择的用户名是否已经存在。但我没有找到如何查询数据库来检查用户名。我尝试过 EJB 注入，但它不起作用，我有一个空指针异常。

```
@FacesValidator("usernameUnicityValidator")
public class UsernameUnicityValidator implements Validator {
    @EJB
    private ArticleFacadeLocal articleFacade;

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (value==null) {
            FacesMessage message = new FacesMessage("The username cannot be empty");
            message.setSeverity(FacesMessage.SEVERITY_FATAL);
            throw new ValidatorException(message);
        }
        if (userFacade.findByUsername((String)value)) {
            FacesMessage message = new FacesMessage("Username already exist");
            throw new ValidatorException(message);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:26:22.080

在 Faces 2.2/2.3 发布之前，将不支持 @EJB 注入。见[http://arjan-tijms.omnifaces.org/p/jsf-22.html](http://arjan-tijms.omnifaces.org/p/jsf-22.html)

对于 JSF2.0/2.1，目前还没有真正好的替代方案。`FacesContext.validationFailed()` 通常对于这种情况，我所做的是在我的页面的支持bean中执行这种“验证”，然后使用`FacesContext.addMessage(...)`. 这不是一个理想的解决方案，因为您将表示逻辑与业务逻辑混合在一起。

# bash - 如何根据字符串拆分一行

> ID：15793806
> 
> 赞同：0
> 
> 时间：2013-04-03T17:12:18.653
> 
> 标签：bash, variables

如果我有以下字符串：

```
variable_A=12345variable_B=54321variable_C=24680 
```

如何根据字符串的内容将其拆分，例如，如果我想提取“variable_B”之后的所有内容，结果将是

```
variable_B=54321variable_C=24680 
```

“分隔符/字符串”将包含在最终结果中0

这是在 bash 环境中。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:49:50.343

因此，您只想删除分隔符前面的所有内容，但将所有其他变量保留在最终输出中？

另一种纯 bash 方法删除并包括分隔符，并将分隔符添加到前面：

```
$ foo="variable_A=12345variable_B=54321variable_C=24680"
$ foo="variable_B${foo#*variable_B}"
$ echo "${foo}"
variable_B=54321variable_C=24680 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:13:44.347

试试这个 ：

使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")：

```
$ echo 'variable_A=12345variable_B=54321variable_C=24680' |
    grep -o "variable_B.*" 
```

使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
$ echo 'variable_A=12345variable_B=54321variable_C=24680' |
    sed -r 's@.*(variable_B.*)@\1@' 
```

输出是：

```
variable_B=54321variable_C=24680 
```

# ruby - get 不在 Ruby 方法中调用

> ID：15793810
> 
> 赞同：0
> 
> 时间：2013-04-03T17:12:52.627
> 
> 标签：ruby

在 Ruby 中，我想向用户显示一个实例变量的值，然后询问该值应该使用什么`gets.chomp`。因为我将对几个变量执行此操作，所以我想用一种方法检查该值。我的困难是当我调用`gets`一个方法时，程序运行而不要求用户输入。

这是代码的相关部分：

```
class TagPodcast

  # ... Code to pull ID3v2 tags from MP3 file

  def inspect_tags
    puts "Title: " + @title
    set_tag(self.title)
  end

  def set_tag(tag)
    new_value = gets.chomp
    tag = new_value unless new_value == ""
  end

end

TagPodcast.new("myfile.mp3").inspect_tags 
```

当我运行该程序时，它会打印`Title: My Title Here`但随后退出而不要求输入。我需要做什么才能打电话`gets`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:37:53.847

这个（稍微修改过的）程序按预期要求我输入（只是添加了访问器和构造函数）：

```
class TagPodcast
  attr_accessor :title

  def initialize(filename)
    @filename = filename
  end

  def inspect_tags
    puts "Title: " + @title
    set_tag(self.title)
  end

  def set_tag(tag)
    new_value = gets.chomp
    tag = new_value unless new_value == ""
  end
end

tp = TagPodcast.new("myfile.mp3")
tp.title = 'Dummy Title'

tp.inspect_tags 
```

但是，您的代码有一个不同的问题。变量是按值而不是按引用传递给方法的，所以这段代码不会像预期的那样运行：

```
class Foo
  attr_accessor :variable

  def set_var(var)
    var = 'new value'
  end

  def bar
    self.variable = 'old value'
    set_var(self.variable)

    puts "@variable is now #{self.variable}"
  end
end

Foo.new.bar 
```

这将打印`@variable is now old value`。我可以想到两种解决方法。或者在方法之外设置实例变量，如下所示：

```
class Foo
  attr_accessor :variable

  def do_stuff
    'new value'
  end

  def bar
    self.variable = 'old value'
    self.variable = do_stuff

    puts "@variable is now #{self.variable}"
  end
end

Foo.new.bar 
```

或者使用 Ruby 强大的元编程功能，并`instance_variable_set`通过将其名称作为符号传递来动态设置实例变量：

```
class Foo
  attr_accessor :variable

  def set_var(var)
    instance_variable_set var, 'new value'
  end

  def bar
    self.variable = 'old value'
    set_var(:@variable)

    puts "@variable is now #{self.variable}"
  end
end

Foo.new.bar 
```

至于您最初的问题，我们需要更多地了解执行上下文。可能 STDIN 不是您在执行时所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:04:43.067

确保您从标准输入中获取输入：

```
STDIN.gets.chomp 
```

或者

```
$stdin.gets.chomp 
```

# google-chrome - 为什么当我请求特定 URL 时 Chrome 会挂起？

> ID：15793812
> 
> 赞同：2
> 
> 时间：2013-04-03T17:13:06.260
> 
> 标签：google-chrome

对于我正在处理的网站上的一个特定页面，Chrome 会挂起发送该页面的请求。我检查了服务器上的 Apache 访问和错误日​​志，请求根本没有发送。这是我在 Chrome 网络控制台中看到的内容：

![在此处输入图像描述](https://i.stack.imgur.com/h92Lh.png)

Chrome 会像这样等待请求等待几分钟，并且不会真正加载页面。

如果我通过添加一些垃圾 GET 参数来更改我请求的 URL（例如，更改`https://mysite/index.php?page=results_bundles`为`https://mysite/index.php?page=results_bundles&foobar`页面加载正常。如果我在隐身窗口中发出相同的请求，页面加载正常，如果我从不同的浏览器发出它加载正常.

我试过清除缓存无济于事。什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:28:31.397

禁用所有扩展并清除域的 cookie 后，我仍然没有结果。我最终关闭并重新打开了 chrome，重新启用了我的所有扩展，现在它工作正常。不知道实际问题是什么，但这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:16:30.287

尝试清除此域的 cookie。

根据您的解释，这是隐身和非隐身之间的唯一区别。

您的扩展也可能导致此问题。

检查 Apache 的访问日志是否设置正确。

# ruby - 从类返回实例变量的值时遇到问题

> ID：15793813
> 
> 赞同：1
> 
> 时间：2013-04-03T17:13:10.220
> 
> 标签：ruby, ruby-on-rails-3.2

我确信这是一个简单的问题，但它让我发疯了。我在模型类中有一个方法，actual_effort，它正在调用辅助类中的函数。辅助类中的函数正在设置一个实例变量，我应该能够在模型类中看到但不能。我使用控制台调试它，但仍然看不到它。我可以在辅助类中显示变量，并带有注释掉的 puts，这证明它正在被设置。

模型类

```
class WorkFlow < ActiveRecord::Base
  require 'helpertest'

  def actual_effort    
    v1 = HelperTest.new()
    v1.setActualEffort(1000)
    v1.actual_effort
  end 
end 
```

助手类

```
class HelperTest
  attr_accessor :actual_effort

  def setActualEffort(eff)
    actual_effort = eff

    #puts actual_effort
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:18:45.690

使用 self 来引用成员变量。

```
class HelperTest
  attr_accessor :actual_effort

  def setActualEffort(eff)
    self.actual_effort = eff

    #puts actual_effort
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:19:03.597

setActualEffort 方法中的 actual_effort 是一个局部变量。您需要一个实例变量。那是

```
def setActualEffort(eff)
  @actual_effort = eff

  #puts actual_effort
end 
```

注意：这相当于 self.actual_effort = eff

# sql-server - 如何在生产数据库上制作集群 PK 非集群？

> ID：15793817
> 
> 赞同：0
> 
> 时间：2013-04-03T17:13:16.127
> 
> 标签：sql-server, tsql

我在本质上是一个日志表上有一个集群 PK，显然不应该集群。

当我做：

```
alter table mytable drop constraint pk_mytable 
```

我的机器上的数据库副本需要一个绝对的时间（5 分钟以上），所以在生产数据库上总是不会工作而不会导致超时或超时。

为什么不是即时操作？它在做什么？

有什么方法可以在不使我的网站脱机的情况下实现这一目标？

**更新：**该表有几百万行，有几个 5？其他非聚集索引

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:44:30.440

聚集索引使用 MS SQL Server 物理设置磁盘上的记录顺序（我假设您正在使用它）。因此，这将导致整个 IO 堆，因为它会重写整个表。

如果您不指定聚集索引，我相信 SQL 无论如何都会为您创建一个，因为它使用它来交叉引用索引，而不必从表中读取记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:55:41.480

我不确定您为什么要这样做，但这是最好的方法：

1.  创建一个具有相同结构的新表（除了没有任何索引）。
2.  将当前表中的所有数据导入新表
3.  删除当前表
4.  将新表重命名为旧表名
5.  创建任何非聚集索引（如果您的原始表有非聚集索引并且如果您需要这些索引）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:06:02.210

我怀疑当您尝试删除主键时表上存在某种形式的锁定，一般来说，在每个表上都有一个聚集索引实际上是一个好习惯。这实际上加快了一些操作，例如删除和更新等。除了您的表是日志表这一事实之外，您想要删除它的理由是什么？同样，一般来说，如果我所讨论的表是某种形式的临时表，它需要并发/大型插入快速，我只会倾向于堆，因此我会问这个问题，你有没有性能问题是插入表时可以量化，想要删除集群主键的另一个可行原因是集群键错误，即宽、易变且不单调增加，除非你有一个基于固态的 I/O 子系统，它不受随机 I/O 的影响，就像基于旋转磁盘的存储一样。Nigels 的说法是正确的，SQL Azure 是一个例外，这要求 ** 每个 ** 表都有一个聚集索引，他们的 HA 架构依赖于此。

# python - 如何设置 webdriver 在每个命令后等待？

> ID：15793819
> 
> 赞同：1
> 
> 时间：2013-04-03T17:13:20.900
> 
> 标签：python, selenium-webdriver

webdriver 是否有任何方法可以在每个命令后设置超时？在每个命令之后写 time.sleep(n) 令人毛骨悚然......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:22:55.190

您可以使用`WebDriverWait`或`WebDriverWait.until`。[此处](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_support/selenium.webdriver.support.wait.html?highlight=webdriverwait#selenium.webdriver.support.wait.WebDriverWait)的文档对它们的工作方式进行了完整描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:09:52.853

我目前正在使用这个

```
protected void sleep(int i) {
driver.manage().timeouts().implicitlyWait(i, TimeUnit.SECONDS);
}

sleep(1); 
```

司机在继续前睡了 1 秒。

我不知道这是否正是你想要的。

# android - 加载设置时屏幕上的神器 google nexus 4

> ID：15793822
> 
> 赞同：1
> 
> 时间：2013-04-03T17:13:38.850
> 
> 标签：android, android-camera, surfaceview, nexus-4

我在我的应用程序中定义了一个设置功能，它在我尝试过的每部手机上都能完美运行，除了 Nexus 4。访问设置时它显示的屏幕是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/qqXXN.png)

我认为这与在我的应用程序上使用相机的事实和资源的释放有关，但是由于它在任何其他手机上都没有发生在我身上，我不知道如何处理这个错误的发现。

任何帮助都会很有用。

# android - 如何创建一个可以与所有客户端一起使用的 android 共享意图？

> ID：15793824
> 
> 赞同：1
> 
> 时间：2013-04-03T17:13:41.807
> 
> 标签：android, android-intent, twitter, share

嗨，我正在开发应用程序，我想使用共享意图发布带有照片的推文。首先我搜索并找到了一个适用于官方客户端的意图，我想要的是我的应用程序适用于所有客户端。

这是我的代码：

```
 String message = "Here goes my message";
    Uri screenshotUri = Uri.parse("file:///sdcard/screenshot.jpeg");
    try {
        Intent sharingIntent = new Intent(Intent.ACTION_SEND);
        sharingIntent.setClassName(getApplicationContext(),findTwitterClient().getPackage());
        sharingIntent.putExtra(Intent.EXTRA_TEXT, message);
        sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
        startActivity(sharingIntent);
    } catch (Exception e) {
        Log.e("In Exception", "Comes here");

        //This also opens a dialog that

    } 
```

我还具有以下功能来了解设备上安装了哪些客户端。

```
public Intent findTwitterClient() {
    final String[] twitterApps = {
            // package // name - nb installs (thousands)
            "com.twitter.android", // official - 10 000
            "com.twidroid", // twidroyd - 5 000
            "com.handmark.tweetcaster", // Tweecaster - 5 000
            "com.thedeck.android" /* TweetDeck - 5 000*/ };
    Intent tweetIntent = new Intent();
    tweetIntent.setType("text/plain");
    final PackageManager packageManager = getPackageManager();
    List<ResolveInfo> list = packageManager.queryIntentActivities(
            tweetIntent, PackageManager.MATCH_DEFAULT_ONLY);

    for (int i = 0; i < twitterApps.length; i++) {
        for (ResolveInfo resolveInfo : list) {
            String p = resolveInfo.activityInfo.packageName;
            if (p != null && p.startsWith(twitterApps[i])) {
                tweetIntent.setPackage(p);
                return tweetIntent;
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:55:05.867

如果你的 URL 以“ [http://twitter.com](http://twitter.com) ”开头，Android 会询问用户应该用什么应用打开推文。几乎任何注册该 URL 方案的应用程序都可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:50:29.957

您不能保证您可以与所有 Twitter 客户端共享。意图是应用程序之间的一种接口。每个客户端自己决定它支持处理哪些意图。你可以很容易地想象一个自定义的 Twitter 客户端，它不处理除主启动之外的任何意图。

# php - $_POST 不反映使用 jQuery post ajax 发送的数据

> ID：15793833
> 
> 赞同：0
> 
> 时间：2013-04-03T17:14:21.320
> 
> 标签：php, jquery, json

我正在使用 ajax/json 将值发送到 php 函数，然后该函数将在页面上显示数据。我正在发送两个值`$hours`和`$memberID`，但我似乎只能检索`$hours`而不是`$memberID`。我通过 Firebug 运行该页面，在 javascript 页面上，两个变量的值在发送之前就被读取了。在 PHP 表单中，我运行了多个条件/回显语句以打印出两个值，但仅`$hours`显示。有任何想法吗？

PHP：

```
$result = array();
        if(!empty($_POST['hours'])) {
            $result['type'] = "success";
            $result['memberID'] = (int)$_POST['memID'];
            $result['hours'] = (int)$_POST['hours'];
            $result = json_encode($result);
            echo $result;
         } 
```

Javascript：

```
 //numberofMembers is the total number of entries in the database
function subtractHours(numberofMembers) {
document.body.style.cursor = "wait";
var hours = document.getElementById("hours");
var i = 1;
var studentID;
while(i < numberofMembers) {        
    studentID = document.getElementById("member"+i);    
    alert(studentID.value);
    if(studentID && studentID.checked) {            
        $.ajax({
            type : 'post',
            datatype: 'json',
            url : 'hours_subtract.php',
            data : {hours : hours.value, memID : studentID.value},
            success: function(response) {
                if(response == 'success') {
                    alert('Hours subtracted!');
                } else {
                    alert('Error!');
                }
            }
        }); 
        //$.post( "subtract.php", {person: personId, personSalary: personSalary} );
    }
    i++;
}   
} 
```

PHP(HTML 表单):

```
echo "<input type='checkbox' name='member{$attNumber}' id='member{$attNumber}' value=$studentID/>$attendees<br />"; 
```

编辑：如果我运行 a `var_dump($_POST['memberID']);`，它会打印出`NULL`. 如果我运行 a `var_dump($_POST)`，它会打印出来`array(2) { ["hours"]=> string(1) "1" ["member3"]=> string(8) "5101813/" }`。

编辑：我在 PHP 代码中添加了使用`member3`. 编辑 2：这就是整个 Javascript 函数。PHP 代码是我处理数据的全部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:59:47.330

问题是您的示例并没有真正向我们展示您正在使用的代码。

以下复制了您的 AJAX 请求，这是此问题的本质：

```
$.post(
    'hours_subtract.php',
    {
        hours : "test-val-1",
        memberID : "test-val-2"
    },
    function(resp) {
        // Handle the response
    }
); 
```

只有两个值被发送到服务器 -`hours`和`memberID`

但是，您声明`var_dump($_POST)`显示：

`{ ["hours"]=> string(1) "1" ["member3"]=> string(8) "5101813/" }`

但是在您的 ajax 请求中，没有这样的`member3`，并且`memberID`$_POST 中也不存在。正如其他人所提到的，也许 memberID 的值为 null 并且没有被发送 - 但这并不能解释`member3`来自哪里。

我建议弄清楚你为什么`member3`在那里，它来自哪里，并在`memberID`javascript 端对值进行调试以找出它是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:34:42.517

在使用 jQuery Ajax 时，如果发送的数据参数之一为 null 或未定义，则将其丢弃，不会发送到服务器。由于您没有在 PHP（服务器端）中获取此属性，因此很可能在初始客户端页面上没有正确设置它。

```
memberID.value // check this value 
```

您可以检查 memberID.value 是否返回预期值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:37:40.480

我在我的网站上遇到了类似的问题。事实证明，我的 ajax 请求没有`$_POST`像我预期的那样通过流发送数据。它实际上是通过请求正文发送的。

要访问它，我必须执行以下操作：

```
json_decode(file_get_contents(“php://input”)); 
```

这从请求正文中提取信息并将 json 数据（这是我将数据发送到服务器的格式）解码为 PHP 可用的内容。不确定，但您可能会遇到类似的问题。

# regex - 关于成功格式的 Django 正则表达式

> ID：15793838
> 
> 赞同：0
> 
> 时间：2013-04-03T17:14:40.440
> 
> 标签：regex, django

嗨，我正在尝试将新网关集成到[django-sms-gateway](https://bitbucket.org/schinckel/django-sms-gateway/)中，但这可能是一个正则表达式问题。

配置网关时，它会要求提供 success_format 并声明...

> 解析响应的正则表达式。可能包含“gateway_message_id”、“status_message”和“status_code”的命名组。

给出的例子是...`ID: (?P<gateway_message_id>.+)`

我试图与之集成的网关声明了这一点，因为那里有返回参数......

> 第一行是一个简单的标题，显示了返回的 3 个列的名称。第二行包含 3 列，每列由 | 分隔 （管道）字符。

返回参数将如下所示：

> 错误代码|错误文本|提交参考
> 
> 0|短信提交|eb725f96b4b094d5f8318741cc1a545f-2

上面的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:21:56.683

他们所说的只是您可以定义成功响应的外观。如果我理解正确，这就是你想要的：

```
(?P<status_code>[0-9]+)|(?P<status_message>.+)|(?P<gateway_message_id>[a-zA-Z0-9-]+) 
```

# spring - 有什么用 ?

> ID：15793842
> 
> 赞同：2
> 
> 时间：2013-04-03T17:14:53.580
> 
> 标签：spring, spring-mvc

我首先想澄清一下，在堆栈溢出和其他论坛中有很多关于此的讨论。我已经阅读了这些并理解了背后的一些概念`<mvc:annotation-driven />`。但我越读越困惑。在我读过`<mvc:annotation-driven />`的一些回复中，它支持`@ResponseBody`. 但由于我是初学者，我安装了 sping-mvc-showcase 应用程序，发现此注解大量使用，而没有使用`<mvc:annotation-driven />`. 你能告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:27:04.133

如果您使用 Spring MVC 的 xml 配置，这就是您设置对使用 MVC 注释（和其他一些东西）的支持的方式。使用较新版本的 Spring MVC，您可以改为使用纯 Java 配置您的应用程序，您可以通过将注释添加`@EnableWebMVC`到您的配置类来实现相同的目的。

```
@Configuration
@EnableWebMVC
public class MyConfig {
    // rest of config
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:58:18.053

Spring MVC 或 Spring 的任何实现都可以通过两种方式配置 Xml 或基于 Java。简单地`<mvc:annotation-driven>`在您的 Xml 配置文件中使用标记意味着您正在向 Spring 指定您将使用 Spring 必须在您的基于 Java 的程序中寻找的 Spring 注释，例如可以是任何东西 -

```
@Controller
public class index() {
 ...
} 
```

当您的应用程序正在初始化并且 Spring 扫描您在配置中指定的基本包时，将在 Spring 的容器中注册为控制器。还有注释，例如

> “@EnableWebMvc”

只需启用各种可以使用的类，这些类非常有用并且专门设计用于帮助使用 Spring 开发 MVC Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T17:33:07.350

不仅使您能够使用与 MVC 相关的注释。查看[架构](http://www.springframework.org/schema/mvc/spring-mvc.xsd)将显示您可以配置 HttpMessageConverters、HandlerMethodArgumentResolvers、HandlerMethodReturnValueHandlers、异步请求处理选项、FormattingConversionServices、JSR-303 Validator、ContentNegotiationManager、MessageCodesResolver 等。

如果您自己没有配置任何这些，它将为您提供默认值。

它只影响 Servlet MVC。

# nginx - (nginx) 每个请求的 Gzip 与静态 gzip

> ID：15793847
> 
> 赞同：5
> 
> 时间：2013-04-03T17:15:05.747
> 
> 标签：nginx

如果您使用标志配置和安装 nginx，`--with-http_gzip_static_module`然后打开静态 gzipping `gzip_static on;`。

[HttpGzipStaticModule](http://wiki.nginx.org/HttpGzipStaticModule)

使用静态 gzip，当 nginx 收到文件请求时，它会尝试读取并返回扩展名为“.gz”的相同文件。

我的问题是：这似乎是比在用户发出请求时压缩文件更好的选择，因为文件已经被压缩了，对吧？你赢得速度，你可以更快地提供文件。现在我已经压缩了字体文件，我向用户发送了一个包含所有 js（连接、缩小和压缩）的包，另一个包含所有 css 的包。我还应该预压缩图像吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T19:10:03.353

是的，使用 HttpGzipStaticModule 更好（如果可能），原因有两个：

1.  您不必为每个请求都 gzip，这意味着：
    *   服务器上的负载更小（因此服务器使用的功率和产生的热量更少）
    *   更快的响应（由于服务器要做的工作更少）
2.  您可以使用更高的 gzip 级别（nginx`gzip --fastest`默认使用），这意味着：
    *   服务器使用的网络带宽更少
    *   再次更快的响应（由于较小的传输大小，因此传输速度稍快）

请注意，较少的负载和较少的带宽使用都会降低您的数据中心费用（尽管这仅对于大型繁忙的站点才真正值得注意）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-20T02:09:16.930

由于问题的那部分没有得到回答：

不要压缩图像。JPEG 和 PNG 文件已经被压缩，使用 gzip 重新压缩它们可能效果不大，实际上可能会导致文件**变大**。默认情况下，nginx 不使用其 per-request gzip 模块压缩图像文件。

如果您想减小图像的大小，您可能需要查看[webp](https://developers.google.com/speed/webp/)文件格式或可以为您处理优化图像的[pagespeed模块。](http://ngxpagespeed.com/ngx_pagespeed_example/)

# php - PHP将对象实例分配给静态属性不起作用

> ID：15793851
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:15:13.600
> 
> 标签：php, oop, laravel

我正在使用 Laravel，但`new`关键字出现错误。我还是 OOP 概念的新手，我做错了什么？

**错误：**

```
Line 3: syntax error, unexpected 'new' (T_NEW) 
```

**代码：**

```
class User extends Eloquent{

    public static $user = new Fb();

    public function mySnippets(){
        return Snippet::all()->where('author','=',self::$user->getUser());
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:19:52.897

不能在属性声明中使用 new。因此，您必须在需要时进行设置。由于您可能想从静态上下文中使用它，因此构造函数可能不合适（仅在您`new`在类上使用时才会调用它，并且每个对象中都会有不同的实例`Fb`）。

像这样可能会更好：

```
public static function getUser() {
   if (self::$user == null) self::$user = new Fb();
   return self::$user;
} 
```

然后总是通过检索静态属性

```
self::getUser() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:18:02.483

您只能使用基本类型初始化成员变量。

您必须在类声明之后分配给静态变量，或者提供进行分配的类级`init`方法等。

```
class User extends Eloquent {
  public static $user = null;

}

User::$user = new Fb(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:34:08.373

除了其他答案，

> 我还是 OOP 概念的新手，我做错了什么？

基本上什么都有。你有全局状态和静态方法，这很糟糕。仅使用静态类来包装事物并不意味着您使用 OOP 范式。

```
class User extends Eloquent
{
    public static $user = new Fb();

    public function mySnippets(){
        return Snippet::all()->where('author','=',self::$user->getUser());
    }

} 
```

这是错误的。就 OOP 而言，这应该类似于这个：

```
class User extends Eloquent
{
    private $fb;

    public function __construct(FB $fb)
    {
       $this->fb = $fb;
    }

    public function mySnippets()
    {
      return Snippet::all()->where('author', '=', $this->user->getUser());
    }
}

//Usage:

$fb = new FB();
$user = new User($fb);

var_dump($user->mySnippets()); 
```

# sql - 在 Access 查询中使用嵌套内部联接时 From 中的语法错误

> ID：15793853
> 
> 赞同：1
> 
> 时间：2013-04-03T17:15:28.670
> 
> 标签：sql, ms-access, syntax-error

在使用以下查询时（基于 Microsoft SQL 格式指南，因为我是 Access 新手，但对 SQL 有经验）我收到错误：

```
SELECT SW.USGS_NO, Q.SampleDate
FROM SW_PROPERTIES SW 
Inner Join (Locations L 
Inner join [(]Sample_Point P [
Inner Join [(]T_TestEvents E [
Inner Join [(]T_WQData Q )]
on E.TestEvent=Q.TestEvent)]
on P.SamplePnt=E.SamplePnt)]
on L.LocationPnt=P.LocationPnt)
on SW.SiteID=L.LocationPnt 
```

错误很简单：

“FROM 子句中的语法错误。”

关闭错误后，“[(]SamplePoint P [”中的重命名或最终“P”将突出显示。

我知道表之间的链接是有效的，我只想要最高和最低表中的数据。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-26T13:13:49.363

尝试这个

```
SELECT SW.USGS_NO, Q.SampleDate
FROM ((([SW_PROPERTIES] SW 
Inner Join ([Locations] L 
Inner join [Sample_Point] P 
Inner Join [T_TestEvents] E 
Inner Join [T_WQData] Q
on E.TestEvent=Q.TestEvent)
on P.SamplePnt=E.SamplePnt)
on L.LocationPnt=P.LocationPnt)
on SW.SiteID=L.LocationPnt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:19:49.130

方括号的意义是什么？

我删除了它们，并且由于您只是使用 INNER JOIN，因此您甚至不需要括号。尝试这个：

```
SELECT 
    SW.USGS_NO, 
    Q.SampleDate

FROM SW_PROPERTIES SW 
Inner Join Locations L 
    on SW.SiteID=L.LocationPnt
Inner join Sample_Point P
    on L.LocationPnt=P.LocationPnt
Inner Join T_TestEvents E
    on P.SamplePnt=E.SamplePnt
Inner Join T_WQData Q 
    on E.TestEvent=Q.TestEvent 
```

# c - 如何在不耦合任务/线程之间共享数据？

> ID：15793860
> 
> 赞同：2
> 
> 时间：2013-04-03T17:15:52.847
> 
> 标签：c, microcontroller, shared, coupling

我正在用**C**开发一个相当复杂的微控制器应用程序，我对如何在不同任务/线程之间“链接”我的共享数据而不耦合它们有一些疑问。

到目前为止，我一直使用时间片调度程序来运行我的应用程序，因此不需要数据保护。但我想让应用程序正确，我想让它为以后的多线程操作系统做好准备。

我试图通过使用与我正在使用的实际系统完全不同的系统来简化我的问题。我无法添加图片，因为我是新用户，但我会尝试解释一下：

我们有 4 个任务/线程：3 个输入线程，它们通过硬件抽象层 (HAL) 从不同的传感器读取一些传感器数据。收集的传感器数据存储在任务域中（即：它们不会是全局的！！）。现在我们也有 1 个输出任务，我们称之为“调节器”。调节器必须使用（读取）从所有 3 个传感器收集的传感器数据才能生成正确的输出。

问题：Regulator 如何在不与其他任务耦合的情况下读取存储在不同输入任务中的收集数据？

调节器必须只通过引用知道输入任务及其数据（即：没有#includes，没有耦合）。

到目前为止，Regulator 都有一个指向每个所需传感器数据的指针，并且该指针是在初始化时设置的。由于数据保护，这在多线程应用程序中不起作用。

我可以`getSensorValue()`为每个传感器值创建一些使用信号量的函数，然后使用函数指针将它们链接到 Regulator。但这会占用大量内存！有没有更优雅的方式来做到这一点？我只是在寻找输入。

我希望这一切都是可以理解的：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:30:27.003

根据您在问题和评论中的描述，您似乎最担心传感器和调节器之间的接口是低内存的，实现细节最少，并且不知道每个传感器实现的明确细节。

由于您使用 C 语言并且没有一些 C++ 类功能可以通过继承使封装变得更容易，因此我建议您从每个 Sensor 线程创建一个通用数据包，该数据包传递给 Regulators 而不是传递函数指针。一个结构体

```
struct SensorDataWrap {
    DataType *data;
    LockType *lock;
    ... other attributes such as newData or sensorName ...
}; 
```

将允许您将数据传递给监管机构，您可以在读取之前锁定。同样，传感器在写入之前需要锁定。如果您将数据更改为双指针`DataType **data`，则可以使写入命令只需要锁定交换底层指针所需的时间。然后，Regulator 只需要来自每个线程的单个 SensorDataWrap 结构来处理该线程的信息，而不管 Sensor 实现细节如何。

LockType 可以是信号量，也可以是任何允许单次访问获取的更高级别的锁定对象。任何此类锁的内存占用量应该只有几个字节。此外，您没有在此处复制数据，因此相对于传感器读数，您的内存大小不应该有任何乘法效应。您正在使用的硬件应该有足够的空间来保存来自您描述的传感器的数据的单个副本，以及足够的闪存空间来容纳信号量或锁定对象。

通信的实现细节现在仅限于锁定、执行操作、解锁，并且不需要复杂的函数指针或 SensorN 特定的标头包含。它应该接近任何线程共享数据程序所需的最小逻辑。该程序还应该可以在没有重大更改的情况下转移到其他微控制器 - 通信仅真正受到线程和锁的存在/不存在的限制。

另一种选择是传递一个三重缓冲区对象并进行缓冲区翻转以避免信号量和锁。这种方法需要创建原子整数/布尔支持（如果你有信号量，你很可能已经被编译器公开了）。可以在[此博客](http://remis-thoughts.blogspot.com/2012/01/triple-buffering-as-concurrency.html)上找到使用三重缓冲区进行并发的指南。这种方法将使用更多的活动内存，但它是避免大多数并发问题的一种非常巧妙的方法。

# javascript - 如何在 Ember.js RC2 的索引模板中的元素上运行一些 JS

> ID：15793865
> 
> 赞同：3
> 
> 时间：2013-04-03T17:16:22.673
> 
> 标签：javascript, jquery, html, ember.js, handlebars.js

我正在编写一个 Ember.js 应用程序，我想在视图呈现后立即在`div`一个类上运行以下 Javascript 代码：`navbar`

```
$('.navbar').affix({offset: -1000}); 
```

我不知道在 Ember 中有任何方法可以轻松地做到这一点，因为标准的 JQuery`$(document).ready()`不适用于 Ember 应用程序。必须有一些简单的方法来做到这一点，但[这个问题的所有其他答案](https://stackoverflow.com/questions/8881040/using-ember-js-how-do-i-run-some-js-after-a-view-is-rendered)似乎都是复杂的解决方法，并且基于 Ember.js 的过时版本。

**有问题的模板：**

```
<script type="text/x-handlebars">
  <div class="navbar" data-spy="affix">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
      </div>
    </div>
  </div>

  {{outlet}}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:23:48.973

当您谈到“索引模板”时，我假设您指的是 ApplicationView 的模板：

```
App.ApplicationView = Ember.View.extend({
    didInsertElement : function(){
        var that = this;
        Ember.run.next(function(){
            that.$('.navbar').affix({offset: -1000});
        });
    }
}); 
```

**这种溶液的成分是什么？**

1.  `didInsertElement`View 是放置 jQuery 和 jQuery 插件初始化逻辑的正确位置。
2.  `didInsertElement`当您的视图的 DOM-Element 已插入，**但内部元素尚未**插入时，将调用该钩子。因此，我将您的逻辑包装在对`Ember.run.next()`. 此调用确保在您的视图完全呈现后运行逻辑，因为它在**Ember Run Loop**结束时运行，该循环负责将必要的更改同步到 DOM。

**更新：Thomas 提出了更好的解决方案，以减少渲染和运行 JS 逻辑之间的延迟：**

```
App.ApplicationView = Ember.View.extend({
    didInsertElement : function(){
        var that = this;
        Ember.run.schedule('afterRender',function(){
            that.$('.navbar').affix({offset: -1000});
        });
    }
}); 
```

根据OP的第一个解决方案的问题：

> 有什么方法可以减少元素呈现和 JQuery 运行之间的延迟，或者这根本不可能？当模板渲染后元素实时更改时，这看起来很有趣。

根据托马斯的说法：

> 我已经使用*next*和*schedule*在我自己的应用程序中运行 jquery 并且 Brad 提到的延迟在 schedule 中明显减少甚至不存在

**对 Ember Run Loop 的伟大概念感兴趣的人的进一步阅读：http:** [//alexmatchneer.com/blog/2013/01/12/everything-you-never-wanted-to-know-about-the-ember-运行循环/](http://alexmatchneer.com/blog/2013/01/12/everything-you-never-wanted-to-know-about-the-ember-run-loop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:23:24.817

我的假设：

*   该代码是您的 HTML 页面中唯一的内容（连同您的 JavaScript 包括在内）。
*   这是您的 JavaScript 文件中的唯一代码：

    应用程序 = Ember.Application.create();

如果这两个假设是正确的，那么您不是在使用索引模板，您实际上是在使用应用程序模板。每个视图都有一个初始化函数。您要做的最简单的事情是像这样覆盖该函数：

```
App.ApplicationView = Ember.View.extend({
    init: function(){
        this._super();
        alert('do something here');
    }
}); 
```

[这是一个 Fiddle 供您查看](http://jsfiddle.net/commadelimited/CGSXg/1/)。

# c++ - 链接 c/c++ 的问题

> ID：15793870
> 
> 赞同：0
> 
> 时间：2013-04-03T17:17:07.347
> 
> 标签：c++, c

我在静态链接方面有点问题。我有一个静态库（libkells.lib），它由一个包含函数声明的头文件和一个包含函数实现的 .cpp 文件组成。我成功地将两者编译成 .o 文件，然后用它们构建了静态库。

然后我有一个文件 mcmd.cpp 调用 .lib 文件中的函数。我已将静态库中涉及的头文件包含在此 mcmd.cpp 文件中。此文件 (mcmd.cpp) 成功编译为 .o 文件，但是当我尝试将其构建为可执行文件时，我的编译器返回如下消息：

> libkells.lib(libkells.o)：在函数 ZNKSt13move_iteratorIPSsE4baseEv 中。对 __cxa_end_catch 的未定义引用，对 __cxa_begin_catch 的未定义引用

以及许多其他错误。当我仔细查看这些错误消息时，这些错误似乎源自某个名为`include/c++/bits/stl_iterator.h`. 我在 Windows 上使用 mingw 4.7.1。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:47:18.300

您没有链接 libstdc++ 或不使用 g++，简而言之，“gcc”驱动程序是 C 驱动程序，而不是 C++ 驱动程序，最终不会链接 C++ 运行时。如果需要，您可以在命令行中显式添加 -lstdc++，或者，绝对是一般的首选，只需使用 'g++'

# ios - 无法在 iOS 上正确实施 Grand Central Dispatch

> ID：15793871
> 
> 赞同：0
> 
> 时间：2013-04-03T17:17:12.900
> 
> 标签：ios, objective-c, xcode, opengl-es

当一些代码在后台线程上运行时，我正在尝试更新和加载 UIProgressBar。当后台线程完成加载创建头像时，它应该将变量 avatarFinishedLoading 更新为 TRUE，这使得 Open GL ES 更新方法中的代码开始运行。

```
- (void)viewDidAppear:(BOOL)animated
{
    [self performSelectorOnMainThread:@selector(updateProgressBar) withObject:nil waitUntilDone:NO];

    dispatch_queue_t loadAvatarAndFrames = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(loadAvatarAndFrames, ^{
        [self createAvatar];
        dispatch_async(dispatch_get_main_queue(), ^{
            avatarFinishedLoading = TRUE;
        });
    });
}

- (void)updateProgressBar {
    float progress = [threadProgressView progress];
    if (progress < 1) {
        threadProgressView.progress = progress + (float)0.01;
        [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(updateProgressBar) userInfo:nil repeats:NO];
    }else{
        [threadProgressView setHidden:TRUE];
    }
}

- (void)update
{
    // Set colour of background
    glClearColor(self.backgroundColour.x, self.backgroundColour.y, self.backgroundColour.z, self.backgroundColour.w);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    if (avatarFinishedLoading == TRUE){
       //Do Some Code
    }
} 
```

应用程序崩溃并显示错误消息：0xf5a2503: movzwl (%eax,%ecx,2), %eax exec_bad_access

我无法弄清楚我哪里出错了，因为这对我来说似乎没问题。

**编辑**

在后台线程上执行此代码时，我似乎遇到了 GL 错误：1280。如果我在主线程上运行“createAvatar”方法，我不会收到任何 GL 错误，并且头像按预期呈现

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:38:43.020

设置 ivar 的方式没有任何问题，因为这是在主线程上完成的。

```
dispatch_async(dispatch_get_main_queue(), ^{
      avatarFinishedLoading = TRUE;
}); 
```

是否有可能在`-createAvatar`后台线程上触摸不应该触摸的方法？

# objective-c - 数据隐藏和 Objective-C 合成器

> ID：15793873
> 
> 赞同：0
> 
> 时间：2013-04-03T17:17:18.623
> 
> 标签：objective-c

如果属性需要是私有的并且语言支持自动 getter/setter 方法创建，那么究竟应该如何声明它们？

是根据需要覆盖自动创建的 getter 或 setter 的唯一方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:20:38.513

在 .m（实现）文件的顶部：

```
// Private category on your class, declared at top of implementation file.
@interface MyClass ()
@property (nonatomic, copy) NSString * privateString;
@end

@implementation
... 
@end 
```

这些“私有属性”仅在您的实现中可见。 **请注意**，ObjC 没有运行时访问限制的功能。如果他们愿意，其他对象仍然可以调用您的私有 getter 和 setter（尽管这会产生编译器警告）。

# google-maps - 谷歌地图 - 可拖动标记，不受约束的坐标值？

> ID：15793877
> 
> 赞同：2
> 
> 时间：2013-04-03T17:17:34.140
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3

使用 Google Maps v3，我正在尝试使用始终以地图位置为中心的标记创建地图。当标记可拖动时，标记永远不会在同一地图的镜像上复制（我的意思是您在缩放级别 1 时看到的相同地图）。当标记的拖动被禁用时，它会在地图镜像上复制，但是然后以 zoom:1 左右平移地图最终会导致标记被镜像覆盖。我无法理解这种行为，所以它一定是某种资源管理的事情。但是，真正的问题是我正在尝试提取地图/标记的坐标，但纬度/经度值只是无限增加！由于某种原因，纬度/经度值没有限制......

我知道我在一年前遇到了同样的问题，但我不记得解决方案是什么，而且我从该项目中获得的代码并不清楚是什么解决了它！我认为修复可能与 LatLngBounds 有关？

```
 $(function(){

    var map = $('#map').gmap3({

        getgeoloc:{

        callback : function(latLng){
        // GEOLOCATION ALLOWED:
          if (latLng){
            $(this).gmap3({
              marker:{
                latLng:latLng,
                options:{
                draggable:false
                },
                events:{
                    dragend: function(marker, event, context){
                    window.currentmarkercenter = marker.getPosition();
                    document.getElementById('markerCoordinates').innerHTML = window.currentmarkercenter;
                    var map = $(this).gmap3("get");
                    map.panTo(window.currentmarkercenter);
                    }
                }
              },
              map:{
              options:{
              center:latLng,
              zoom:14
              },
              events:{
                center_changed: function(map, event, context){
                    window.currentmapcenter = map.getCenter();
                    document.getElementById('markerCoordinates').innerHTML = window.currentmapcenter;
                    var marker = $(this).gmap3({get:{name:"marker"}});
                marker.setPosition(window.currentmapcenter);
                    }
                }
              }
            });
            window.geolocation = 1;

          } else {
          //GEOLOCATION DENIED:
          $(this).gmap3({
            marker:{
                latLng:[38.27269,   -96.46094],
                options:{
                draggable:false
                },
                events:{
                    dragend: function(marker, event, context){
                    window.currentmarkercenter = marker.getPosition();
                    document.getElementById('markerCoordinates').innerHTML = window.currentmarkercenter;
                    var map = $(this).gmap3("get");
                    map.panTo(window.currentmarkercenter);
                    }
                }
              },
              map:{
              events:{
                center_changed: function(map, event, context){
                    window.currentmapcenter = map.getCenter();
                    document.getElementById('markerCoordinates').innerHTML = window.currentmapcenter;
                    }
                }
              }
            });
            }
          }
        }
    });
        }); 
```

HTML：

```
<div id="map" style="width:100%;margin-left:auto;margin-right:auto;"></div>
<div id="markerCoordinates" style="display:block;position:absolute;top:6px;left:42px;"></div> 
```

我也在使用[http://gmap3.net/en/](http://gmap3.net/en/)，我现在会后悔的决定，除了当我用它的一个演示文件中的代码替换我的 JS 时（在map & 让你平移），坐标值和“地图镜像”按预期工作！我难住了！

# xpath - 带有通配符的 xpath 断言因 soapUI Maven 插件而失败

> ID：15793883
> 
> 赞同：2
> 
> 时间：2013-04-03T17:17:59.860
> 
> 标签：xpath, maven-plugin, soapui

我在 xpath 断言中使用通配符，选中了复选框，并且在soapUI 客户端中传递了案例。然而，基于 mvn 插件的所有这些带有 xpath + 通配符的断言在我的 Jenkins 工作中都失败了

这是我在 POM 中的依赖项

```
<plugin>
<groupId>eviware</groupId>
<artifactId>maven-soapui-plugin</artifactId>
<version>4.0.1</version>
<dependencies>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.8.2</version>
</dependency>
</dependencies> 
```

这是断言失败

> 16:26:48,179 错误 [SoapUITestCaseRunner] 断言失败-> XPathContains 比较失败，预期 [*]，实际为 [101500052082]

# python - 打印大量格式化数据时如何避免Broken Pipe错误？

> ID：15793886
> 
> 赞同：11
> 
> 时间：2013-04-03T17:18:08.033
> 
> 标签：python, format, string-formatting, ioerror, broken-pipe

我正在尝试打印在我的`stdout`. 为此，我使用[str.format](http://docs.python.org/2/library/string.html#string-formatting)方法。`head`一切正常，但是当我使用命令 a管道输出以查看第一行时`IOError`。

这是我的代码：

```
# creating the data
data = []$
for i in range(0,  1000):                                            
  pid = 'pid%d' % i
  uid = 'uid%d' % i
  pname = 'pname%d' % i
  data.append( (pid, uid, pname) )

# find max leghed string for each field
pids, uids, pnames = zip(*data)
max_pid = len("%s" % max( pids) )
max_uid = len("%s" % max( uids) )
max_pname = len("%s" % max( pnames) )

# my template for the formatted strings
template = "{0:%d}\t{1:%d}\t{2:%d}" % (max_pid, max_uid, max_pname)

# print the formatted output to stdout
for pid, uid, pname in data:
  print template.format(pid, uid, pname) 
```

这是我在运行命令后得到的错误：`python myscript.py | head`

```
Traceback (most recent call last):
  File "lala.py", line 16, in <module>
    print template.format(pid, uid, pname)
IOError: [Errno 32] Broken pipe 
```

谁可以帮我这个事？

我试图放入`print`一个`try-except`块来处理错误，但之后控制台中有另一条消息：

```
close failed in file object destructor:
sys.excepthook is missing
lost sys.stderr 
```

`sys.stdout.write`我还尝试通过两个连续的和`sys.stdout.flush`调用立即刷新数据 ，但什么也没发生。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T17:26:00.580

`head`读取`stdout`然后*关闭*它。这导致`print`失败，它在内部写入`sys.stdout`，现在关闭。

您可以简单地*捕捉*并`IOError`静默退出：

```
try:
    for pid, uid, pname in data:
        print template.format(pid, uid, pname)
except IOError:
    # stdout is closed, no point in continuing
    # Attempt to close them explicitly to prevent cleanup problems:
    try:
        sys.stdout.close()
    except IOError:
        pass
    try:
        sys.stderr.close()
    except IOError:
        pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-17T20:18:22.460

您看到的行为与 Python3 中的缓冲输出实现相关联。使用 -u 选项或设置环境变量 PYTHONUNBUFFERED=x 可以避免该问题。有关 -u 的更多信息，请参见手册页。

```
$ python2.7 testprint.py | echo

Exc: <type 'exceptions.IOError'>
$ python3.5 testprint.py | echo

Exc: <class 'BrokenPipeError'>
Exception ignored in: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'>
BrokenPipeError: [Errno 32] Broken pipe
$ python3.5 -u testprint.py | echo

Exc: <class 'BrokenPipeError'>
$ export PYTHONUNBUFFERED=x
$ python3.5 testprint.py | echo

Exc: <class 'BrokenPipeError'> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-07T23:47:00.847

一般来说，我会尝试捕捉我能逃脱的最具体的错误。在这种情况下，它是`BrokenPipeError`：

```
try:
    # I usually call a function here that generates all my output:
    for pid, uid, pname in data:
        print template.format(pid, uid, pname)
except BrokenPipeError as e:
    pass  # Ignore. Something like head is truncating output.
finally:
    sys.stderr.close() 
```

如果这是在执行结束时，我发现我只需要关闭`sys.stderr`. 如果我不关闭`sys.stderr`，我会得到一个 BrokenPipeError 但没有堆栈跟踪。

这似乎是编写输出到管道的工具的最低限度的修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-14T17:57:09.860

Python3 和调试日志也有这个问题。如果您的脚本与网络通信或执行文件 IO，则简单地删除 IOError 并不是一个好的解决方案。尽管这里有提到，但由于某种原因，我无法捕捉到 BrokenPipeError。

发现一篇关于恢复 sigpipe 的默认信号处理程序的博客文章：http: [//newbebweb.blogspot.com/2012/02/python-head-ioerror-errno-32-broken.html](http://newbebweb.blogspot.com/2012/02/python-head-ioerror-errno-32-broken.html)

简而言之，在大部分输出之前将以下内容添加到脚本中：

```
if log.isEnabledFor(logging.DEBUG):  # optional
    # set default handler to no-op
    from signal import signal, SIGPIPE, SIG_DFL
    signal(SIGPIPE, SIG_DFL) 
```

这似乎发生在 head 上，但不是其他程序，如 grep ——正如提到的 head 关闭标准输出。如果您不经常在脚本中使用 head，则可能不值得担心。

# html - 使用 Excel VBA 屏幕抓取互联网 - 无法引用第二页

> ID：15793887
> 
> 赞同：1
> 
> 时间：2013-04-03T17:18:09.663
> 
> 标签：html, excel, vba, web-scraping, screen-scraping

我的问题相对简单，而且令人发狂地回避。这与我在互联网和 StackOverflow 上发现的许多问题没有什么不同，但没有任何建议可以帮助我解决这个小难题......

使用 Excel2010 我没有在单个字段中输入数据，提交它（第 1 部分）并捕获几行数据（第 2 部分），以列表/表格格式粘贴到 excel 中（第 30 部分 - 并执行 999,999 次......第 1 部分和第 3 部分正在运行 - 第 2 部分拒绝承认新的 Internet 窗口，所有 gettagnames 和 SelectTable 变通办法只使用原始 URL - 附件是使用 Sendkeys 的绝望尝试 - 更糟糕的是！ - 对于第一个循环 - 然后绝对没有！

无论如何，代码应该相当简单 - 对编码顺序中的一些混乱表示歉意 - 这取决于我开始用手术刀切掉一些位，但经过数小时的混乱后才使用斧头......

```
Dim HTMLdoc As HTMLDocument
Dim ie As InternetExplorer

Sub EPF_FSA()

'Application.DisplayAlerts = False
Application.EnableEvents = False

Dim iHTML_Element As IHTMLElement
Dim sURL As String
Dim miss1 As Integer
Dim FrmNo As Long
Dim FrmName As String
Dim Address1 As String
Dim Address2 As String
Dim Address3 As String
Dim Address4 As String
Dim Address5 As String
Dim Address6 As String
Dim Address7 As String
Dim Address8 As String
Dim AnyLuck As String
Dim RowNum As Integer
Dim ColNum As Integer

RowNum = 1
ColNum = 1

FrmNo = 100111

While FrmNo <= 100112
'Do While FrmNo <= 100112
On Error GoTo Err_Clear
sURL = "http://www.fsa.gov.uk/register/epfSearchForm.do"

Set ie = CreateObject("internetexplorer.application")
'Set Ex = CreateObject("MicrosoftExcel.application")
ie.navigate sURL
ie.Visible = True

Do
' Wait till the Browser is loaded
Loop Until ie.readyState = READYSTATE_COMPLETE

Set HTMLdoc = ie.document

HTMLdoc.all.epfref.Value = FrmNo

For Each iHTML_Element In HTMLdoc.getElementsByTagName("input")

If iHTML_Element.Type = "submit" Then miss1 = miss1 + 1
If miss1 = 2 Then iHTML_Element.Click: Exit For
Next

Err_Clear:
If Err <> 0 Then Err.Clear
Resume Next
'PART 2 ********************************************************************
Do
' Wait till the Browser is loaded
Loop Until ie.readyState = READYSTATE_COMPLETE

Call SendKeys("^a")
DoEvents
Call SendKeys("^c")
DoEvents

      ActiveSheet.PasteSpecial Format:="Text", link:=False, DisplayAsIcon:=False
        range("A2").Select

'Copy and select relevant text to sheet 2

  Worksheets("Sheet1").Activate
 FrmName = Cells(39, "A").Value

 Address1 = Cells(59, "A").Value
 Address2 = Cells(60, "A").Value
 Address3 = Cells(61, "A").Value
 Address4 = Cells(62, "A").Value
 Address5 = Cells(63, "A").Value
 Address6 = Cells(64, "A").Value
 Address7 = Cells(65, "A").Value
 Address8 = Cells(66, "A").Value
 AnyLuck = Cells(47, "A").Value

  Worksheets("Sheet2").Activate
 Cells(RowNum, "A").Value = FrmNo
 Cells(RowNum, "B").Value = FrmName
 Cells(RowNum, "C").Value = Address1
 Cells(RowNum, "D").Value = Address2
 Cells(RowNum, "E").Value = Address3
 Cells(RowNum, "F").Value = Address4
 Cells(RowNum, "G").Value = Address5
 Cells(RowNum, "H").Value = Address6
 Cells(RowNum, "I").Value = Address7
 Cells(RowNum, "J").Value = Address8
 Cells(RowNum, "K").Value = AnyLuck
   RowNum = RowNum + 1
'ActiveCell.Offset(1, 0).Select
  Worksheets("Sheet1").Activate
    Cells.Select
    Selection.Delete Shift:=xlUp
    range("A2").Select
'MsgBox (FrmNo & Chr(10) & FrmName)
'Part 3
FrmNo = FrmNo + 1
ie.Quit
ie.Quit
Wend
'Loop

Application.EnableEvents = True

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:36:34.887

看起来你可以直接进入结果页面。尝试：

```
sUrl = "http://www.fsa.gov.uk/register/epfRefSearch.do?epfRef="
sUrl = sUrl & frmNo 
```

然后只需导航到该页面。然后，实际的详细信息位于 ID 为“box”的 div 中

# pari-gp - 如何在 PARI/GP 中制作多行嵌套 for 循环？

> ID：15793890
> 
> 赞同：9
> 
> 时间：2013-04-03T17:18:15.117
> 
> 标签：pari-gp

如何在 PARI/GP 中创建跨越每个级别的多行的嵌套循环？我经常需要在 for 循环中做很多事情，而且为了可读性，我不喜欢将循环写在一行上。对于一个变量的循环，我一直在这样做：

```
for(i=1,10,{
    printf("%u\n",i);
}) 
```

但是，对于嵌套循环，我只设法将换行符放在一个级别。这有效：

```
for(i=1, 10, for(j=1, 10, {
     printf("%2u\t%2u\n", i, j);
})); 
```

这也有效：

```
for(i=1, 10, {
     for(j=1, 10, printf("%2u\t%2u\n", i, j));
}); 
```

但是，这是我真正想做的：

```
for(i=1, 10, {
     for(j=1, 10, {
          printf("%2u\t%2u\n", i, j);
     });
}); 
```

最后一个例子不起作用；它给出了一个错误：

```
 ***   sorry, embedded braces (in parser) is not yet implemented.
... skipping file 'nested_for.gp'
  ***   at top-level: printf("%2u\t%2u\n",
  ***                 ^--------------------
  *** printf: not a t_INT in integer format conversion: i.
  ***   Break loop: type 'break' to go back to GP 
```

我在 OS X 10.8.3 上使用 PARI/GP 2.5.3。我将脚本写入文件并使用Bash`nested_for.gp`运行它们。`gp ./nested_for.gp`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T15:12:45.137

与我们对类 C 语法的期望相反，大括号在 GP 中没有定义块。它们只允许在多个连续行上拆分指令序列。他们不筑巢；另一方面，您可以将循环嵌套在单个 { } 块中：

```
{
  for (i = 1, 10,
    for (j = 1, 10,
      print (i+j))) 
} 
```

多行命令通常出现在用户函数中，在这样的上下文中可能看起来更自然：

```
fun(a, b) =
{
  for (i = 1, a,
    for (j = 1, b, 
      print (i+j)));
} 
```

# xcode - 使用 XCODE 删除 SQLITE 中的重复行

> ID：15793892
> 
> 赞同：0
> 
> 时间：2013-04-03T17:18:20.727
> 
> 标签：xcode, sqlite, uitableview

我目前正在使用 Xcode 创建和编辑 SQLITE 文档。

目前我使用以下语法在 uitableview 中使用 didselectrowatindex 输入和删除数据库中的重复项。但它似乎没有工作。

```
NSString *sql = @"INSERT INTO RECENT ('NAME', 'TITLE', 'VIDEO', 'IMAGE', 'DESCRIPTION' ) VALUES (?,?,?,?,?);delete from RECENT where rowid not in (select max(rowid) from RECENT group by 'IMAGE');";` 
```

我试图实现的是将数据添加到 sqlite 数据库。如果数据已经在数据库中，那么删除这一行并确保最新的位于 uitableview 的顶部。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:55:11.373

改用这个 SQL 似乎更简单：

```
INSERT OR REPLACE
INTO recent (name, title, video, image, description)
VALUES (?,?,?,?,?) 
```

当然，这只适用于合适的`UNIQUE`约束（在`image`我建议的列上，基于您之前使用的代码）。

# php - php 使用在另一个类中查询 db 的类函数

> ID：15793897
> 
> 赞同：0
> 
> 时间：2013-04-03T17:18:37.690
> 
> 标签：php, class, static, instantiation

我设置了多个类，他们都需要访问数据库，他们这样做。当我想在另一个类中使用一个函数时，麻烦就来了。

```
class General
{

private $_db = NULL;
private $_db_one;
private $_db_two;
private $offset;

public function __construct ( PDO $db ) {

    $this->_db     = $db;
    $this->_db_one = 'lightsnh_mage1';
    $this->_db_two = 'lightsnh_inventory';  
    $this->offset  = 10800; 

}
public function getTableNames() {

    $sql = 'SELECT TABLE_NAME 
            FROM INFORMATION_SCHEMA.TABLES
            WHERE TABLE_TYPE = "BASE TABLE" AND TABLE_SCHEMA="' . $this->_db_two . '"';

    $statement = $this->_db->query($sql);
    $result = $statement->fetchAll(PDO::FETCH_ASSOC);
    return $result;
} 
```

这工作正常，然后我的其他班级以相同的方式连接。正如您将在下面的“Distributors”类中看到的那样，我在构造函数中实例化了我的“General”类。在我边写边学习的过程中，我不禁觉得有一种更通用或更有效的连接方式。

```
class Distributors
{

private $_db = NULL;
private $_db_one;
private $_db_two;
private $_source_tbl;
public  $lights;

public function __construct ( PDO $db ) {

    $this->_db = $db;
    $this->_db_one = 'lightsnh_mage1';
    $this->_db_two = 'lightsnh_inventory';
    $this->_source_tbl = 'distributors';
    // is this the best way to get functions from another class inside of this class? I have 10 classes I will need to repeat this for.
    $this->lights = new General($db);

}

public function getInventorySources() {

    // calling function from General class inside my distributor class
    $tables = $this->lights->getTableNames();

    // using result of General function inside of a function from Distributors class
    $sql = 'SELECT * FROM `' . $tables . '` WHERE `exclude` = 0';
    $statement = $this->_db->query($sql);
    $result = $statement->fetchAll(PDO::FETCH_ASSOC);

    return $result;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:01:42.310

`Singleton` 只是另一种形式的全局状态，这是不好的。你应该总是避免它。

从您的代码示例中，

```
public function __construct ( PDO $db ) {

    $this->_db = $db;
    $this->_db_one = 'lightsnh_mage1';
    $this->_db_two = 'lightsnh_inventory';
    $this->_source_tbl = 'distributors';
    // is this the best way to get functions from another class inside of this class? I have 10 classes I will need to repeat this for.
    $this->lights = new General($db);
} 
```

当您以这种方式实例化时，`$this->lights = new General($db);`您会从全局范围中获取 General 类。因此，模拟和单元测试几乎是不可能的。

`General`相反，您应该像 for 一样注入一个实例`PDO`。像这样：

```
public function __construct (PDO $db, General $general)
{

    $this->_db = $db;
    $this->_db_one = 'lightsnh_mage1';
    $this->_db_two = 'lightsnh_inventory';
    $this->_source_tbl = 'distributors';
    // is this the best way to get functions from another class inside of this class? I have 10 classes I will need to repeat this for.
    $this->lights = $general;
} 
```

你会这样使用它：

```
$pdo = new PDO(...);
$pdo->setAttribute(...);

$general = new General($pdo);
$distributors = new Distributors($pdo, $general); 
```

> 这是从这个类中的另一个类获取函数的最佳方法吗？我有 10 节课需要重复。

是的，你应该重复一遍，不是实例化，而是依赖注入。这使您的代码更易于维护，并且不会引入全局状态。

除此之外，您的`General`班级似乎明显违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T17:39:36.313

您应该使用单例在您的类中获取数据库，或者使用一些 ORM。

关于带单例的 mysql 类：

[使用单例类在php中建立数据库连接](https://stackoverflow.com/questions/6873033/establishing-database-connection-in-php-using-singleton-class)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T17:45:38.200

我不知道你遇到了什么问题，但我认为函数 getTableNames 会返回一个对象或一个数组，所以结果`$tables`不是字符串`var_dump($tables);`，看看里面有什么`$tables`

试着用谷歌搜索你的出路。

# sql-server - 使用 unixODBC 连接时“找不到数据源名称”

> ID：15793904
> 
> 赞同：1
> 
> 时间：2013-04-03T17:19:03.510
> 
> 标签：sql-server, django, unixodbc

我从以下位置收到此错误`views.py`：

> ('IM002', '[IM002] [unixODBC][Driver Manager]Data source name not found, and no default driver specified (0) (SQLDriverConnectW)')

这里是 `views.py`将数据库数据保存到一个json文件

```
connstr = 'DRIVER={SQL Server};SERVER=dev_appserver;DATABASE=DemoApp;'
conn = pyodbc.connect(connstr)
cursor = conn.cursor()

cursor.execute("""
            SELECT book_id, book_name, author_name, publisher_name, email, bookref
            FROM Book
            """)

rows = cursor.fetchall()

rowarray_list = []
for row in rows:
    t = (row.book_id, row.book_name, row.author_name, row.publisher_name, 
         row.email, row.bookref)
    rowarray_list.append(t)

j = json.dumps(rowarray_list)
rowarrays_file = 'student_rowarrays.json'
f = open(rowarrays_file,'w')
print >> f, j

objects_list = []
for row in rows:
    d = collections.OrderedDict()
    d['book_id'] = row.book_id
    d['book_name'] = row.book_name
    d['author_name'] = row.author_name
    d['publisher_name'] = row.publisher_name
    d['email'] = row.email
    d['bookref'] = row.bookref
    objects_list.append(d)

j = json.dumps(objects_list)
objects_file = 'student_objects.json'
f = open(objects_file,'w')
print >> f, j

conn.close() 
```

这被编码为将数据库数据写入 json 文件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T18:56:02.190

当您连接到数据库时，您似乎没有传递用户名或密码。

尝试这样的事情：

```
connstr = 'DRIVER={SQL Server};SERVER=dev_appserver;DATABASE=DemoApp;UID=username;PWD=password'
conn = pyodbc.connect(connstr) 
```

# c++ - 访问其他程序并改变其行为（主要是关于非官方多人游戏模组）

> ID：15793908
> 
> 赞同：3
> 
> 时间：2013-04-03T17:19:20.933
> 
> 标签：c++, windows, reverse-engineering

所以我最近研究了一些逆向工程，我真的很想更好地了解像[sa-mp](http://www.sa-mp.com/)和[黑手党 2 多人游戏](http://m2-multiplayer.com/)这样的东西是如何制作的。当我连接到 sa-mp 中的服务器并启动游戏时。它此时是否注入了一个dll或其他东西来控制游戏的流程并从城市等中删除所有的NPC？我并没有真正要求任何真正具体的东西，而只是这个想法。我查看了一些类似项目的[源代码](https://code.google.com/p/mtasa-blue/source/browse/#svn/trunk/MTA10/multiplayer_sa)，但并没有真正了解这一切是如何开始的。我很感激知道这些事情的人可以启发我。

自从我发现这些模组以来，这确实是我感兴趣的事情，所以我期待收到您的来信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:39:01.960

开发此类软件时需要完成的大部分工作是逆向工程。

这包括弄清楚游戏客户端是如何工作的，以及你将如何使用它来执行任务。通常要寻找的东西可能包括：

*   包含游戏所有实体的数据结构/容器
*   您需要从中读取信息的重要类别的结构（职位，健康，弹药......）
*   控制客户端的方法。这从简单的东西开始，例如模拟按键以调用游戏的控制功能或直接操纵网络流量。

之后，与目标进程交互的首选方式是编写动态库 (DLL)。这样做的主要优点是您与目标共享虚拟内存，因此能够像拥有所有数据一样取消引用指针。可以直接读写内存，调用函数，绕行函数等。

如果您对客户有足够的了解，您可以将其修改到您想象的极限。

在我看来，您链接的 mod 也创建了自己的服务器。该服务器将只是一个常规游戏服务器（使用您收集的信息构建），您可以完全控制它。客户端需要在 DLL 中实现。

# c - C - while 循环中的 fscanf 跳过用户输入

> ID：15793909
> 
> 赞同：1
> 
> 时间：2013-04-03T17:19:24.333
> 
> 标签：c, while-loop, scanf

所以我运行程序，它进行打印，读取我从键盘输入的字符，切换到适当的情况，但不是返回循环顶部并在 fscanf 处停止以接收进一步的输入，它起作用就像它已经收到新行或其他内容并切换到默认情况，再次返回循环顶部并期待输入。我错过了什么？

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main () {
  char *command;
  command = malloc (2);

  while (1) {
    printf ("Type help for usage\n");
    printf ("Enter command: \n");
    fscanf (stdin,"%c",command);

    switch (command[0]) {
      case 'a':
        printf ("a\n");
        break;

      case 'h':
        printf ("help\n");
        break;

      default:
        printf ("default\n");
    }
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:21:53.157

那是因为当您输入时`a`，您还键入了一个换行符`'\n'`，并且`%c`在第二遍时拾取换行符。

如果你分配`char command[2];`和使用`scanf("%1s", command)`，你应该避免大多数问题。转换说明`%s`符跳过前导空白并将`1`输入限制为单个非空白字符，这应该可以充分帮助您。

就个人而言，我仍然会使用：

```
 char line[4096];

 while (fgets(line, sizeof(line), stdin) != 0)
 {
     char command[2];
     if (sscanf(line, "%1s", command) == 1)
         ...got a command...
     else
         ...failed...
 } 
```

喜欢这个的一个原因是它每次都吃换行符，但更重要的是，如果出现问题，您可以在错误报告中使用整行信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:28:14.027

如果用户输入许多命令，那么在 2 个输入命令之间会有一个换行符。你必须`fscanf`通过在字符串格式的开头添加空格来捕捉这个换行符`" %c"`才能做到这一点

```
fscanf (stdin," %c",command); 
```

您可以将`command`as`char`和 not 定义为指针：

```
 char command; 
```

如果你这样做，`fscanf`应该改为

```
fscanf (stdin,"%c",&command);

switch (command) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:32:34.250

```
 switch (command[0]) {
      case 'a':
    printf ("a\n");
    fflush(stdin);
        break;

      case 'h':
    printf ("help\n");
    fflush(stdin);
        break;

      default:
    printf ("default\n");
    fflush(stdin);
    }
  } 
```

你也可以使用 Fflush 来解决这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:42:59.680

您应该使用函数释放输入缓冲区`fflush(stdin);`。之后，您将能够接受下一个输入。

# javascript - 使用 jQuery 的意外标记 <

> ID：15793910
> 
> 赞同：0
> 
> 时间：2013-04-03T17:19:26.097
> 
> 标签：javascript, jquery

这真的很困扰我，我不知道如何解决这个问题。我创建问题的代码是这样的：

```
$("#add-warmup").click(function(){
    $("#warmup").empty().prepend('<td><input type="text" name="distance-warm" maxlength="7" size="4"> miles</td><td><input type="text" name="duration-warm" maxlength="8" size="8" placeholder="HH:MM:SS" /></td><td>Warmup<input type="hidden" name="type-warm" value="Warmup" /></td><td><select name="shoe-warm"><option value=""><?= str_repeat('&nbsp;', 12); ?></option>></select></td>');
>}); 
```

我只想单击一个链接并将当前行替换为输入的实际值，但我不断收到`Unexpected token <`报价第一部分的错误。事情就像`.prepend('<p> test</p>');`工作一样简单，但这并不。t

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:22:56.103

尝试更换这个

```
<?= str_repeat('&nbsp;', 12); ?> 
```

和

```
<?= str_repeat("&nbsp;", 12); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:25:48.813

如果你包装你要预先准备的东西，它会起作用吗？

```
$("#add-warmup").click(function(){

$("#warmup").empty().prepend($('<td><input type="text" name="distance-warm" maxlength="7" size="4"> miles</td> <td><input type="text" name="duration-warm" maxlength="8" size="8" placeholder="HH:MM:SS" /></td> <td>Warmup<input type="hidden" name="type-warm" value="Warmup" /></td>
<td><select name="shoe-warm"><option value=""><?= str_repeat('&nbsp;', 12); ?></option> </select></td>'));

}); 
```

编辑：从你的截图：[http ://gyazo.com/1f01eabd8e3acacc3eb534f5a88fc6cf.png?1365010212](http://gyazo.com/1f01eabd8e3acacc3eb534f5a88fc6cf.png?1365010212)

啊哈！罪魁祸首现身！您的文本在开头后的行开始 ' 请参见此处：[在 JavaScript 中创建多行字符串](https://stackoverflow.com/questions/805107/creating-multiline-strings-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:26:01.990

发布的代码有一些问题。您在使用单引号`'`的字符串内使用未转义的单引号 ( )。`<?= str_repeat('&nbsp;', 12); ?>`应该是`<?= str_repeat(\'&nbsp;\', 12); ?>`或`<?= str_repeat("&nbsp;", 12); ?>`。

另请注意，您在 jQuery 中使用 PHP。（除非 JS 是由 PHP 生成的。）

但是你的错误是因为你在函数结束时`Unexpected token >`有一个额外的事实。`>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:29:58.723

和：

```
.prepend('<p>test</p>'); 
```

尝试

```
.prepend('\<p\>test\<\/p\>'); 
```

还尝试将您要添加的 HTML 保留在一行中。

我还注意到，当我发布此代码时，您的代码中充满了回车。也删除这些

# r - 有关 Rcpp 异常的更多信息

> ID：15793912
> 
> 赞同：1
> 
> 时间：2013-04-03T17:19:31.493
> 
> 标签：r, exception, rcpp

使用 Rcpp 编写 R 扩展时，是否可以在引发异常时获取更多信息？例如，默认情况下，当索引超出范围时，我得到：

```
Error in myfunction(V) :
  index out of bounds   
Calls: source ... eval -> myfunction -> .Call -> cpp_exception
Execution halted 
```

在这一点上，我不知道它可能发生在代码的哪个位置。使用调试信息编译代码时是否可以打印堆栈？Rcpp 异常可以做到这一点吗？

在段错误上，我想我可以尝试使用[deadhandler](https://github.com/vmarkovtsev/DeathHandler)，但我也在寻找常规异常的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:10:39.407

那很可能不是来自您的代码/ Rcpp 代码。

如果您使用 Rcpp 处理异常，您可以在 R 级别控制和恢复消息（前提是您从`std::exception`etc 派生）。那里有很多例子，例如[这个 SO post](https://stackoverflow.com/questions/8438701/raising-exceptions-in-rcpp)。

但是要捕获这样的“随机”错误，您可能需要使用调试器。

# matlab - 如何将图像放入数组？

> ID：15793913
> 
> 赞同：-2
> 
> 时间：2013-04-03T17:19:40.497
> 
> 标签：matlab, components, labeling

我有[这个 matlab 函数](http://people.sc.fsu.edu/~jburkardt/m_src/image_components/i4mat_components.m)，它应该在图像中标记连接的组件。这是一个问题：我怎样才能给这个函数输入？

```
function [ component_num, c ] = i4mat_components ( m, n, a ) 
```

如果您感到困惑，您可以轻松打开给定的链接并在那里阅读更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:28:18.273

您只需要以下内容：

```
a = imread('my_epicly_awesome_picture.jpg'); 
```

## 编辑

为了澄清，您可以像这样调用您的函数：

```
a = imread('tiger.jpg');
%If your input image is RGB and you want grayscale:
%a = rgb2gray(a);
[m, n] = size(a);
[component_num, c] = i4mat_components(m, n, a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:20:09.097

虽然这会很奇怪，但该函数似乎需要图像及其大小作为输入。

因此，假设您的图像被调用`myimage`，那么函数调用将是：

```
[component_num,c] = i4mat_components (size(myimage,1), size(myimage,2),myimage ) 
```

# asp.net-mvc-4 - Bundles.RenderScripts

> ID：15793920
> 
> 赞同：1
> 
> 时间：2013-04-03T17:20:00.483
> 
> 标签：asp.net-mvc-4, cassette

我有 3 个文件
• jquery.ui.core • jquery.ui.widget • jquery.ui.tabs

我必须按此顺序本身获取推荐人

但 Bundles.RenderScripts 认为按字母顺序添加引用。

我尝试明确完成 Bundles.Reference 按顺序排列的 3 个文件。它没有用。

如何指定我需要的订单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:25:42.427

通过通配符添加脚本默认按字母顺序加载它们，这通常不是您想要的。CSS 和 JavaScript 文件经常需要以特定（非字母）顺序添加。您可以通过添加自定义 IBundleOrderer 实现来降低此风险，但显式添加每个文件不太容易出错。例如，您将来可能会向文件夹添加新资产，这可能需要您修改 IBundleOrderer 实现。

更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer%28VS.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer%28VS.110%29.aspx)

来源：[http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T07:55:42.510

我通过在 Bundle.txt 文件中添加这些脚本文件名解决了这个问题。见 [http://getcassette.net/documentation/v1/configuration/bundle-descriptor-file](http://getcassette.net/documentation/v1/configuration/bundle-descriptor-file)

# iphone - 工具栏上的 xcoded 静音按钮可将应用程序的声音静音

> ID：15793925
> 
> 赞同：2
> 
> 时间：2013-04-03T17:20:19.797
> 
> 标签：iphone, ios, objective-c, xcode, xcode4.5

我是 iOS 开发的新手。我有一个简单的“点击器”应用程序，每次单击屏幕按钮时都会发出声音（mp3 文件）。

我想实现一个静音按钮，当它被选中时：

1.  按钮图像更改（并保持更改直到再次选择）

2.  仅应用程序的声音已静音

3.  再次选择时返回原始状态 - 声音开启和前一个按钮图像

这是我播放声音的方式：

```
- (IBAction)click;

#import "soundButtonViewController.h"

@implementation soundButtonViewController

-(IBAction)click
{
   CFBundleRef mainBundle = CFBundleGetMainBundle();
   CFURLRef soundFileURLRef;
   soundFileURLRef =CFBundleCopyResourceURL(mainBundle, 
   (CFStringRef)@"click",CFSTR ("mp3"), NULL);
   UInt32 soundID;
   AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
   AudioServicesPlaySystemSound(soundID);
} 
```

在任何地方都有这样的示例代码吗？我已经做了一些研究，似乎有一些方法，但想要针对我的要求。任何帮助或方向将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:30:03.793

为了更改按钮，我通常的做法是创建一个 BOOL 来跟踪按钮的状态。在这种情况下，BOOL 是“muteOn”，按钮的 IBOutlet 是 muteButton。然后，我使用此代码来控制按钮图像以及应用程序是否静音。如果 muteON 设置为 YES，您还可以在单​​击操作（如下所示）中放置 if/then 以播放声音或不执行任何操作。记得在 .h 文件中声明你的 Bool 。

```
-(IBAction)muteToggle{

if (muteOn == YES) {
    muteOn = NO;
    UIImage *buttonImage = [UIImage imageNamed:@"muteOff.png"];
    [muteButton setImage:buttonImage forState:UIControlStateNormal];
}

else {
    muteOn = YES;
    UIImage *buttonImage = [UIImage imageNamed:@"muteOn.png"];
    [muteButton setImage:buttonImage forState:UIControlStateNormal];
}

}

-(IBAction) click {

 if (muteOn == YES){
//Do Nothing
 }

 else{
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef =CFBundleCopyResourceURL(mainBundle, 
 (CFStringRef)@"click",CFSTR ("mp3"), NULL);
  UInt32 soundID;
 AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
  AudioServicesPlaySystemSound(soundID);

}
} 
```

# jquery - “timeupdate”事件函数在重新绑定后触发两次

> ID：15793926
> 
> 赞同：1
> 
> 时间：2013-04-03T17:20:21.313
> 
> 标签：jquery, html5-audio, jquery-events

我在 jQuery 中的`<audio>`元素`timeupdate`事件有问题（我使用的是 1.7.1 版）。我的目标是将函数绑定到它，然后取消绑定，然后再次绑定。它的行为与我在 Firefox、Google Chrome 和 Internet Explorer 10 中的预期不同。Firefox 和 Google Chrome 的行为相同，但 Internet Explorer 10 的行为不同（惊喜！）。当然，我希望它适用于所有三个。

我认为最好用代码本身来描述问题（问题的细节在 HTML 的 second 中`<p>`）：

**HTML**

```
<p>Click the circle on the right whose color matches the circle on the left. Do this four times.</p>

<p>Clicking the incorrect color will play audio. As soon as the singing starts, a message is logged to the console. This works the first time, but after that, it starts happening twice.</p>

<div class="goal"></div>
<div class="choices"></div>

<audio id="audio-try_again" preload="auto">
    <source src="try_again.ogg">
    <source src="try_again.mp3">
</audio> 
```

**CSS**

```
.goal, .choices {
    float: left;
    width: 50%;
} 
```

**JavaScript**

```
$.randomize = function(arr) {
    for (var j, x, i = arr.length; i; j = parseInt(Math.random() * i, 10), x = arr[--i], arr[i] = arr[j], arr[j] = x);
    return arr;
};

function factorial(num) {
    var rval = 1;

    for (var i = 2; i <= num; i++) {
        rval = rval * i;
    }

    return rval;
}

function generate_objects() {
    this_pair = get_object_pair();

    if (used_pairs.length < total_permutations) {
        while ($.inArray(this_pair, used_pairs) > -1) {
            this_pair = get_object_pair();
        }
    }
    else {
        used_pairs = [];
    }

    used_pairs.push(this_pair);

    objects = this_pair.split('|');

    object_to_find = objects[0];
    other_object = objects[1];

    $('.goal').html('<a href="javascript:void(0);"><img src="' + images[object_to_find] + '" alt=""></a>');
    $('.choices').html('');

    choices = [
        $('<a href="javascript:void(0);" class="correct"><img src="' + images[object_to_find] + '" alt=""></a>'),
        $('<a href="javascript:void(0);" class="incorrect"><img src="' + images[other_object] + '" alt=""></a>')
    ];

    $.randomize(choices);

    $.each(choices, function(index, value) {
        $('.choices').append(value);
    });

    $('#audio-try_again').on('timeupdate', function() {
        if (try_again_audio_element.currentTime >= 5) {
            $(this).off('timeupdate');

            console.log('Highlight the correct image.');

            $('.correct').animate({opacity: 0.25}, 200, function() {
                $(this).animate({opacity: 1}, 200, function() {
                    $('.correct').animate({opacity: 0.25}, 200, function() {
                        $(this).animate({opacity: 1}, 200);
                    });
                });
            });
        }
    });

    $('.goal, .choices').fadeIn();
}

function get_object_pair() {
    object_to_find = other_object = get_random_index();

    while (other_object == object_to_find) {
        other_object = get_random_index();
    }

    return object_to_find + '|' + other_object;
}

function get_random_index() {
    return Math.floor(Math.random() * total_images);
}

function question_answered() {
    if (correct_answers == 4) {
        alert('You have correctly answered four questions.');
    }
    else {
        $('.goal, .choices').fadeOut(function() {
            $('#audio-try_again').off('timeupdate');

            setTimeout(generate_objects, 200);
        });
    }
}

$(document).ready(function() {
    correct_answers = 0;

    images = [
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAcUlEQVR42qXT0QnAIAxFUUfJNJlOp+gwWUfIAOkTUpBAC/V9nI9KuKDV1iIqhQEGM1muaZ3fPwQ6OMQLzxmpAYGrDH+5QPZAh/ipPwEFPwg4aMvDiUNjBYwI2ApMIjDpAL0F+hDp30heJP4q84+Jfs43txnFT7FsW/cAAAAASUVORK5CYII=',
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAcUlEQVR42qWT0QnAIAxEHSXTZDqdosNknYADpCekIJZW2kPeh3I8TIwl7ktBAwY8sTzTNT1vBFTQQTzQMyOrQMCRoS2ZlVlQQXykXgJ9u/amHC3ZnPhJGwIjBDYETgicFtAl0E2kn5EcJH6U+c9Ef+cTtijFT/BuGVoAAAAASUVORK5CYII=',
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAcUlEQVR42qWT0QnAIAxEHSXTOF2dosNkHcEB0hMOwUAp9j7eh3J5YExKRMlU0ICDTpx3NWW3g4ELDBAvDGYsCwzcDH3CrC0BrXECa9abx6mANbWwOfGTNgUuCHwKuiDoskB+gtxE+RvFQdJHWV8meZ0ftTfFT731dloAAAAASUVORK5CYII=',
        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAa0lEQVR42qXT0QnAIAwE0IziNE6XTOEwWSeQAex9hFKKbaknvB+JB1Eji9XBwCGK116Xl9VAIWE+yKppq8PjLPw27iEK8ye99pwbAVlnxWBuMhAnAhwkiICgA+gW6Eukn5H8SPxX5oeJHucDimXHMWd8ov0AAAAASUVORK5CYII='
    ];

    total_images = images.length;
    total_permutations = factorial(total_images) / factorial(total_images - 2);

    try_again_audio_element = $('#audio-try_again')[0];

    $(document).on('click', '.correct', function() {
        if (!$(this).hasClass('disabled')) {
            $('.correct, .incorrect').addClass('disabled');

            correct_answers++;
            question_answered();
        }
    }).on('click', '.incorrect', function() {
        if (!$(this).hasClass('disabled')) {
            $('.correct, .incorrect').addClass('disabled');

            try_again_audio_element.play();
        }
    });

    $('#audio-try_again').on('ended', function() {
        question_answered();
    });

    used_pairs = [];
    generate_objects();
}); 
```

演示：http: [//jsfiddle.net/j8LXE/](http://jsfiddle.net/j8LXE/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:40:47.870

看起来问题是这个块：

```
$('.goal, .choices').fadeOut(function() {
   $('#audio-try_again').off('timeupdate');
   setTimeout(generate_objects, 200);
}); 
```

选择器`$('.goal, .choices')`将返回一个包含两个元素的 jQuery 集合，这意味着回调函数被调用两次（每个匹配元素一次）。

对于您的特定应用，克服此问题的一种快速而肮脏的方法是：

```
$('.goal, .choices').fadeOut(function() {
   if ( $(this).is('.goal') ) return;
   $('#audio-try_again').off('timeupdate');
   setTimeout(generate_objects, 200);
}); 
```

本质上，它只会执行该回调中的内容一次。

# sql - 如何轻松将 Vs 2010 开发的 .sdf 转换为 SQL Server 数据库

> ID：15793927
> 
> 赞同：0
> 
> 时间：2013-04-03T17:20:23.210
> 
> 标签：sql, sql-server, visual-studio-2010

我的机器上没有安装 SQL Server。因此，我决定开始使用`.sdf`VS2010 中的 SQL Server Compact Edition ( )。在那之后，我现在安装了 SQL Server，现在我想将其转换`.sdf`为“真正的”SQL Server 数据库。

我该怎么做 ？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:30:55.360

您应该将`connectionString`指向 Compact SQL 的指向更改为新的 SQL Server 实例。之后在您的 Context 文件中，在一个名为的静态构造函数中：

```
static YourDbContext()
{
    Database.SetInitializer(new CreateDatabaseIfNotExists<YourDbContext>());
} 
```

这应该根据您的模型创建您的数据库和表。如果您需要插入任何数据，您应该`Enable-Migrations`在一个配置文件中使用createdc8 覆盖`Seed`方法。

一件重要的事情**不要**假设您拥有 CREATE 或 DROP DATABASE 或执行表修改的权利或特权。

我假设您使用的是 EF Code First 方法。您的上下文文件可能如下所示：

```
public YourDbContext : DbContext
{
    static YourDbContext()
    {
        // Database.SetInitializer<DbContext>(null); // Change this line to the next one
        Database.SetInitializer(new CreateDatabaseIfNotExists<YourDbContext>());
    }

    // The rest of implementation 
} 
```

在 Visual Studio 内部`Package Manager Console`执行：

```
Enable-Migrations -ProjectName YourProjectName 
```

（如果您有多个 DbContext 实现，则需要按照 Enable-Migrations 向您返回的错误消息中的说明进行操作。）

完成此操作后，您会注意到一个`Migrations`包含一个文件的新文件夹`Configuration.cs`。打开它，您将看到方法 Seed。

```
protected override void Seed(YourDbContext context)
{
    //  This method will be called after migrating to the latest version.
     //  You can use the DbSet<T>.AddOrUpdate() helper extension method 
    //  to avoid creating duplicate seed data. E.g.
    //
    //    context.People.AddOrUpdate(
    //      p => p.FullName,
    //      new Person { FullName = "Andrew Peters" },
    //      new Person { FullName = "Brice Lambson" },
    //      new Person { FullName = "Rowan Miller" }
    //    );
    //

    // Here you can call your context.DbSetImplementation.Add(new Something {...});
} 
```

就是这样。

# c++ - C++：Linux：调用 write() 时 TCP/IP 程序崩溃

> ID：15793928
> 
> 赞同：3
> 
> 时间：2013-04-03T17:20:35.080
> 
> 标签：c++, linux, unix, tcp

我有一个循环，它通过 TCP/IP 不断向客户端写入数据。连接打开如下：

```
newsockfd = accept(sockfd,
            (struct sockaddr *) &cli_addr,
            &clilen); 
```

以下行在循环中连续执行（睡眠时间为 0.1 秒），以便将数据写入客户端：

```
n = write(newsockfd,data.c_str(),data.length()+1); //+1 to include NULL in null terminated string
if(n>=0)
{
    cout<<"success"<<endl;
}
else
{
    cout<<"Fail"<<endl;
    close(newsockfd);
    newsockfd = -1;
} 
```

如果连接因任何原因断开，我希望服务器能够读取以接收新连接。因此，如果写入失败，我将再次准备好接受与第一个命令的新连接。

我的问题如下：该方法第一次成功，所以如果从客户端断开连接，write() 返回一个负数，我立即知道连接有问题，所以我关闭它并期待一个新的一。服务器收到新的连接，但下次使用 write() 时，程序立即崩溃。

为什么会这样？请帮忙，我是 TCP/IP 方面的新手。

如果您需要，请询问更多信息。

求助者要求：

堆栈跟踪：

错误：信号 13：

```
 /mnt/hgfs/Dropbox/common_src/LinuxTCP/Server/ServerLinux-build-desktop-Qt_4_8_1_in_PATH__System__Release/ServerLinux[0x402155]
    /lib/x86_64-linux-gnu/libc.so.6(+0x364a0)[0x7ffc57ac04a0]
    /lib/x86_64-linux-gnu/libpthread.so.0(write+0x10)[0x7ffc5836dcb0]
    /mnt/hgfs/Dropbox/common_src/LinuxTCP/Server/ServerLinux-build-desktop-Qt_4_8_1_in_PATH__System__Release/ServerLinux[0x4023b6]
    /mnt/hgfs/Dropbox/common_src/LinuxTCP/Server/ServerLinux-build-desktop-Qt_4_8_1_in_PATH__System__Release/ServerLinux[0x401b54]
    /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7ffc57aab76d]
    /mnt/hgfs/Dropbox/common_src/LinuxTCP/Server/ServerLinux-build-desktop-Qt_4_8_1_in_PATH__System__Release/ServerLinux[0x402081] 
```

* * *

变量定义：它是一个类：

身体：

```
int sockfd, portno, n;
struct sockaddr_in serv_addr;
struct hostent *server; 
```

* * *

构造函数启动的东西：

```
LinuxTCPServer::LinuxTCPServer(int port, bool nonblocking)
{
if(nonblocking)
    sockfd = socket(AF_INET, SOCK_NONBLOCK | SOCK_STREAM, 0);
else
    sockfd = socket(AF_INET, SOCK_STREAM, 0);

if (sockfd < 0)
   error("ERROR opening socket");
bzero((char *) &serv_addr, sizeof(serv_addr));
portno = port;

serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(portno);

if (bind(sockfd, (struct sockaddr *) &serv_addr,
         sizeof(serv_addr)) < 0)
         error("ERROR on binding");

listen(sockfd,5);
clilen = sizeof(cli_addr);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:14:15.543

假设 Linux >= 2.2，替换这个：

```
n = write(newsockfd,data.c_str(),data.length()+1); 
```

有了这个：

```
n = send(newsockfd, data.c_str(), data.length()+1, MSG_NOSIGNAL); 
```

`send(2)`然后将返回 -1 并将 errno 设置为 EPIPE，而不是生成致命的 SIGPIPE。或者，忽略 SIGPIPE。

当您收到 SIGPIPE 时，后面的连接`newsockfd`已断开。我们没有足够的代码来重现问题、客户端和服务器，所以说实际上可能出了什么问题是没有实际意义的。但是，将 SIGPIPE 转换为 EPIPE 至少会让您的服务器有机会处理断开的连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:11:55.310

您的堆栈跟踪表明程序因信号 13 而崩溃，这意味着您的管道已损坏。

这表明您的连接已断开，但您仍在尝试写入。请参阅此线程以了解为什么这可能导致管道损坏错误：[是什么导致了管道损坏错误？](https://stackoverflow.com/questions/4584904/what-causes-the-broken-pipe-error)

现在，关于如何解决这个问题，我怀疑您实际上并没有在您的“接受”呼叫中获得正确的连接设置。确保在调用 write 之前检查“接受”调用的状态。

我认为导致您的接受呼叫失败的问题可能在连接的另一端。

# arden-syntax - 在雅顿获取当前正在运行的传销名称

> ID：15793933
> 
> 赞同：8
> 
> 时间：2013-04-03T17:20:44.570
> 
> 标签：arden-syntax

如何获取当前运行的 MLM 名称，开头没有用户名？特殊关键字`THIS_MLM_NAME`以 格式返回`USERNAME-302364198::MLM_NAME_HERE`MLM 的名称，但我只想要 MLM 的名称本身。

我尝试使用`SUBSTRING`：

```
SUBSTRING 200 CHARACTERS
STARTING AT ((FIND "::" IN THIS_MLM_NAME) + 2)
FROM THIS_MLM_NAME; 
```

但这只是返回`null`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:20:44.570

问题是这`THIS_MLM_NAME`实际上不是 Arden 字符串。如果你测试`THIS_MLM_NAME IS STRING`你会得到错误的。要解决此问题，请将其转换为字符串`THIS_MLM_NAME AS STRING`：

```
ThisMLMName := SUBSTRING 200 CHARACTERS
   STARTING AT ((FIND "::" IN STRING (THIS_MLM_NAME AS String)) + 2)
   FROM (THIS_MLM_NAME AS String); 
```

由于在 Sunrise Acute Care 的 Arden 实现中没有调试器，我编写了以下 MLM 来帮助显示有关变量的信息（命名模块`MOD_VARIABLE_INFO`或更改代码以匹配实际名称）：

```
// data slot
(Variable, Padding) := ARGUMENT;
Result := "";
IF NOT EXIST Padding THEN
   Padding := "";
ENDIF;
CR := (13 FORMATTED WITH "%c") || Padding;
Delimiter := "";
MOD_VARIABLE_INFO := MLM 'MOD_VARIABLE_INFO';
IF Variable IS LIST THEN
   Result := Result || "List(" || (COUNT Variable) || ") [" || CR || "   ";
   FOR Item IN Variable DO
      Result := Result || Delimiter;
      TempResult := CALL MOD_VARIABLE_INFO WITH Item, Padding || "   ";
      Result := Result || TempResult;
      Delimiter := "," || CR || "   ";
   ENDDO;
   Result := Result || CR || "]";
ELSEIF Variable IS STRING THEN
   Result := Result || "String";
ELSEIF Variable IS NUMBER THEN
   Result := Result || "Number";
ELSEIF Variable IS BOOLEAN THEN
   Result := Result || "Boolean";
ELSEIF Variable IS NET_OBJECT THEN
   Result := Result || ".Net Object";
ELSEIF Variable IS NULL THEN
   Result := Result || "Null";
ELSEIF Variable IS OBJECT THEN
   Result := Result || "Object {" || CR || "   ";
   FOR Attr IN (EXTRACT ATTRIBUTE NAMES Variable) DO
      Result := Result || Delimiter || Attr || ": ";
      Item := ATTRIBUTE Attr FROM Variable;
      TempResult := CALL MOD_VARIABLE_INFO WITH Item, Padding || "   ";
      Result := Result || TempResult;
      Delimiter := "," || CR || "   ";
   ENDDO;
   Result := Result || CR || "}";
ELSE
   Result := Result || "Unknown (" || Variable || ")";
ENDIF;
// logic slot
CONCLUDE True;
// action slot
RETURN Result; 
```

虽然此 MLM 为 . 返回“未知” `THIS_MLM_NAME`，但它至少表明它不是任何本机 Arden 数据类型，也不是 .Net 数据类型。

在 Sunrise MLM 编辑器中，您可以通过语法检查 MLM，然后单击“语法检查 MLM”选项卡，选择“函数定义”，然后查看右下方窗格中的代码来查看底层 Lisp 中发生了什么。搜索`THIS_MLM_NAME`，你会发现`(SETQ THIS_MLM_NAME 'USERNAME-302364198::MLM_NAME)`。从这里您可以看到该变量已被设置为一个普通的带引号/未计算的 lisp 表达式，而不是一个字符串，它看起来像`(SETQ THIS_MLM_NAME "USERNAME-302364198::MLM_NAME")`.

# google-app-engine - IOException：更改了索引规范

> ID：15793935
> 
> 赞同：3
> 
> 时间：2013-04-03T17:20:46.717
> 
> 标签：google-app-engine, gae-search

我正在使用 Eclipse Juno/Google Plugin for Eclipse 开发 GWT 2.5.1 和 GAE/J 1.7.6 Web 应用程序，并且我正在尝试使用 Search API。升级到 1.7.6 GAE SDK 后，开始发生以下情况：

1.  当应用程序在 GAE 开发模式下运行并且我的索引被填充时，它随后可以通过编程方式访问。
2.  如果开发模式被终止并重新启动，程序访问尝试将失败（不返回结果），如下所示：

    ```
    SEVERE: Failed to access index
    java.io.IOException: Changed index specification for description_index
    at com.google.appengine.api.search.dev.LuceneDirectoryMap.getDirectory(LuceneDirectoryMap.java:198)
    at com.google.appengine.api.search.dev.LuceneDirectoryMap$FileBased.getDirectory(LuceneDirectoryMap.java:64)
    at com.google.appengine.api.search.dev.LocalSearchService.search(LocalSearchService.java:438) 
    ```

由于 Search API 正在开发中，我更愿意使用带有最新错误修复和改进的 SDK。有人对异常的原因有任何建议吗？

## 更新

已在 App Engine SDK for Java 版本 1.7.7.1 中修复，可从[App Engine 下载页面](https://developers.google.com/appengine/downloads)获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:56:01.920

1.7.7.1 SDK for Java 中发布的修复。看[这里](http://code.google.com/p/googleappengine/issues/detail?id=9088)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:44:15.780

今天，我们发现了同样的问题，我们目前唯一可能的解决方法是更改​​版本 1.7.5 / 1.7.4 的 appengine sdk。

我想会有重大变化，但在它们稳定之前，我们不应该使用或依赖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T17:52:50.813

Google 代码中已为此打开了一个问题：

[https://code.google.com/p/googleappengine/issues/detail?id=9088](https://code.google.com/p/googleappengine/issues/detail?id=9088)

如果您认为此问题对您很重要，并且解决方法还不够，请确保为该问题加注星标，以便将其升级以进行修复。

# wpf - WPF 中的内容演示者

> ID：15793937
> 
> 赞同：1
> 
> 时间：2013-04-03T17:20:57.440
> 
> 标签：wpf, xaml

我的印象是 ContentPresenter 会显示控件的内容。

但是，如果我使用这个：

```
<Button  Content="Remove table">
    <Button.Template>
    <ControlTemplate>
     <Grid x:Name="grid" >
      <Border x:Name="border"  BorderBrush="Black" BorderThickness="1"  >
        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
      </Border>
     </Grid>
    </ControlTemplate>
    </Button.Template>
</Button> 
```

实际上没有显示任何文本。我在哪里弄错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:27:10.260

添加 TargetType="Button" 将显示您期望的文本。

```
<ControlTemplate TargetType="Button"> 
```

**参考：http:** [//msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)

# r - 根据其他 2 个条件获取一个变量的平均值并运行 rcorr

> ID：15793938
> 
> 赞同：0
> 
> 时间：2013-04-03T16:31:53.303
> 
> 标签：r, correlation

我的数据如下所示：

**country_name** --------**城市**----------- **area_change_pc**
孟加拉国------------博格拉--------(33.33)
孟加拉国-- ----------Chandpur-- (-41.76)
印度---------Dewas--------(12.95)
巴基斯坦----------------奎达------(4.08)
巴基斯坦----------------Vehari---- ----(206.01)
...

然后，我根据 4 个意外事件创建了一个名为增长的新变量：负 (<0)、小 (>=0, <15)、中 (>=15, <50) 和大 (>= 50)，代码如下：

```
urbanization$growth[urbanization$area_change_pc<0]<-"1\. negative"
urbanization$growth[urbanization$area_change_pc>=0 & area_change_pc<15]<-"2\. small"
urbanization$growth[area_change_pc>=15 & area_change_pc<50]<-"3\. medium"
urbanization$growth[area_change_pc>=50]<-"4\. large" 
```

现在数据看起来像这样：

**country_name** --------**城市**------------ **area_change_pc** ----**增长**
孟加拉国------------博格拉--------（ 33.33)---------------------3。中等
孟加拉国------------昌德普尔--（-41.76）---------1。负
印度------------德瓦斯------(12.95)---- ----2。缓慢
的巴基斯坦----奎达--------(4.08)--------- -2。缓慢
的巴基斯坦----------------Vehari--------(206.01)------4。大
...

我正在尝试创建一个如下所示的表：

```
 Bangladesh    India     Pakistan      Total
negative   
small 
medium
large 
```

每个单元格将由`Area_Change`这些意外事件的平均值填充。例如，第一个单元格应该是`Area_Change`所有负增长的孟加拉城市的平均值。我想`Total`成为所有国家增长组的平均值。我想出了如何`area_change_pc`使用 tapply 获得每个国家的平均值：

```
with(urbanization, tapply(area_change_pc, list(growth,country_name), mean)) 
```

给了我（填写的数据值 - 与我给出的数字不匹配，因为我使用的是完整的数据集，所以我把它们排除在外）：

```
----------------Bangladesh    India     Pakistan
negative   
small 
medium
large 
```

但是，我不知道如何创建一个总列。最终，我想要总列，以便我可以测试每个国家和增长组之间的显着差异与该增长组的平均值（因此，孟加拉国负增长区域的平均面积变化与平均变化显着不同在所有国家的地区？）。有谁知道我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:22:42.797

首先，使示例数据可重现：

```
urbanization <- read.table(text=
"country_name City area_change_pc
Bangladesh Bogra 33.33
Bangladesh Chandpur -41.76
India Dewas 12.95
Pakistan Quetta 4.08
Pakistan Vehari 206.01", header=TRUE, stringsAsFactors = FALSE) 
```

二、这里有一个更简单的制作`growth`列的方法

```
urbanization$growth <- cut(urbanization$area_change_pc,
                           breaks = c(-Inf, 0, 15, 50, Inf),
                           labels = c("1\. negative", "2\. slow", 
                                      "3\. medium", "4\. large"),
                           right = FALSE) 
```

可以使用`reshape2`包重新排列和汇总这些数据。

```
library("reshape2")

dcast(urbanization, growth~country_name, 
      fun.aggregate = mean, value.var="area_change_pc", 
      margins = "country_name") 
```

这使

```
 growth Bangladesh India Pakistan   (all)
1 1\. negative     -41.76   NaN      NaN -41.760
2     2\. slow        NaN 12.95     4.08   8.515
3   3\. medium      33.33   NaN      NaN  33.330
4    4\. large        NaN   NaN   206.01 206.010 
```

# scripting - 在脚本中下载后安装？

> ID：15793940
> 
> 赞同：0
> 
> 时间：2013-04-03T17:21:13.027
> 
> 标签：scripting, vbscript, batch-file, windows-installer

我想下载一个 msi 并安装它，所有这些都在一个脚本中静默进行。我想尝试类似`start iexplore.exe http://domain.com/file.msi /qn`但不幸的是，它只会下载 MSI 而不会开始安装。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:59:12.143

您还必须“启动”下载的文件。它将下载到默认下载位置（Windows 7 中的 C:\Users[username]\Downloads，除非它已被更改）。但是，您必须让文件等待下载完成，否则将无法运行 msi。据我所知，没有内置的方法可以让它检查你，所以你只需要考虑最长的预期下载时间，以秒为单位。等待可以通过几种不同的方式完成，具体取决于您使用的操作系统。一个例子是

```
timeout /t [seconds] /nobreak > NUL 
```

这接受以秒为单位的等待时间，并且 /nobreak 意味着它忽略按键（这通常表示在计时器完成之前继续。）。另一种方法是让批处理文件 ping 一个无效的 IP 地址 (1.1.1.1) 一定的毫秒数。例如

```
PING 1.1.1.1 -n 1 -w [milliseconds] >NUL 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:51:03.880

干得好。我还没有测试过它，但我至少已经从另一个项目中获得了 JScript 函数。用`.bat`扩展名保存它，根据需要修改该`set url=`行，然后运行它。

```
@if (@a==@b) @end /*

:: batch portion

@echo off
setlocal

set url=http://domain.com/file.msi
set saveloc=%temp%\file.msi

cscript /nologo /e:jscript "%~f0" "%url%" "%saveloc%"

msiexec /i "%saveloc%" /qn /norestart

:installwait
ping -n 2 0.0.0.0 >NUL
wmic process where name="msiexec.exe" get name 2>NUL | find /i "msiexec" >NUL && goto installwait

del "%saveloc%"

goto :EOF

:: JScript portion */

function fetch(url) {
    var xObj = new ActiveXObject("Microsoft.XMLHTTP");
    xObj.open("GET",url,true);
    xObj.setRequestHeader('User-Agent','XMLHTTP/1.0');
    xObj.send('');
    while (xObj.readyState != 4) WSH.Sleep(50);
    return(xObj);
}

function save(xObj, file) {
    var stream = new ActiveXObject("ADODB.Stream");
    with (stream) {
        type = 1;
        open();
        write(xObj.responseBody);
        saveToFile(file, 2);
        close();
    }
}

save(fetch(WSH.Arguments(0)), WSH.Arguments(1)); 
```

# perl - 以下 perl 脚本的一些帮助

> ID：15793942
> 
> 赞同：0
> 
> 时间：2013-04-03T17:21:16.637
> 
> 标签：perl, merge, concatenation

在合并/连接/组合/绑定等方面需要帮助

1.  我有几个 ascii 文件，每个文件都定义一个变量，我已将其转换为单列数组

我有许多变量的列数据，所以我需要像执行列绑定一样`R`将其设为一个文件。

我可以这样做，`R`但文件太多。能够用一个代码完成这将有助于节省大量时间。

使用以下代码，perl 新手，需要帮助。

```
@filenames = ("file1.txt","file2.txt");
open F2, ">file_combined.txt" or die;
for($j = 0; $j< scalar @filenames;$j++){
    open F1, $filenames[$j] or die;
    for($i=1;$i<=6;$i++){$line=<F1>;}
    while($line=<F1>){
        chomp $line;
        @spl = split '\s+', $line;
        for($i=0;$i<scalar @spl;$i++){
            print F2 "$spl[$i]\n";
            paste "file_bio1.txt","file_bio2.txt"> file_combined.txt;
        }
    }
    close F1;
} 
```

此处的输入文件是栅格的 Ascii 文本文件。它们看起来像这样

```
32 12 34 21 32 21 22 23 
12 21 32 43 21 32 21 12 
```

上面提到的没有粘贴语法的代码将这些文件转换为单个列

```
32 
12 
34  
21 
32 
21 
22 
23
12 
21
32 
43 
21  
32 
21 
12 

The output should look like this
12  21  32
32  23  23
32  21  32
12  34  12
43  32  32
32  23  23
32  34  21
21  32  23 
```

每列代表一个不同的 ascii 文件。我需要大约 15 个这样的 ascii 文件到一个数据帧中。我可以在 R 中做同样的事情，但它会消耗大量时间，因为文件和感兴趣区域的数量太多并且文件也有点大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:00:28.367

让我们逐步了解您所拥有的...

```
# files you want to open for reading..
@filenames = ("file1.txt","file2.txt");

# I would use the 3 arg lexical scoped open
# I think you want to open this for 'append' as well
# open($fh, ">>", "file_combined.txt") or die "cannot open";
open F2, ">file_combined.txt" or die;

# @filenames is best thought as a 'list'
# for my $file (@filenames) {
for($j = 0; $j< scalar @filenames;$j++){
    # see above example of 'open'
    # - $filenames[$j] + $file
    open F1, $filenames[$j] or die;

    # what are you trying to do here? You're overriding 
    # $line in the next 'while loop'
    for($i=1;$i<=6;$i++){$line=<F1>;}
    # while(<$fh1>) {
    while($line=<F1>){
        chomp $line;
        # @spl is short for split? 
        # give '@spl' list a meaningful name
        @spl = split '\s+', $line;
        # again, @spl is a list...
        # for my $word (@spl) {
        for($i=0;$i<scalar @spl;$i++){
            # this whole block is a bit confusing. 
            # 'F2' is 'file_combined.txt'. Then you try and merge
            # ( and overwrite the file) with the paste afterwards...
            print F2 "$spl[$i]\n";
            # is this a 'system call'? 
            # Missing 'backticks' or 'system'
            paste "file_bio1.txt","file_bio2.txt"> file_combined.txt;
        }
    }
    # close $fh1
    close F1;
}
# I'm assuming there's a 'close F2' somewhere here.. 
```

看起来你正在尝试这样做：

```
@filenames = ("file1.txt","file2.txt");
$oufile = "combined_text.txt";
`paste $filenames[0] $filenames[1] > $outfile`; 
```

# java - 无法序列化我的类 Java

> ID：15793944
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:21:18.350
> 
> 标签：java, class, serialization

似乎我无法序列化我的名为“Ban”的课程：

```
class Ban implements Serializable{
        /**
         * 
         */
        transient Date start;
        transient Date end;
        String explination;
        String from;
        public Ban(Date s, Date e, String ex, String f){
            start = s;
            end = e;
            explination = ex;
            from = f;
        }
    } 
```

当我尝试用 objectoutputstream 打印它时，它给了我一个错误......你能帮我序列化这个类吗？顺便说一句：瞬态是什么意思？

好吧，它是 bukkit，但应该这样做：

```
[SEVERE] java.io.NotSerializableException: me.bubblegumsoldier.Ban.Main
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeObject(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.util.HashMap.writeObject(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2013-04-03 19:30:30 [SEVERE]    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.lang.reflect.Method.invoke(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at java.io.ObjectOutputStream.writeObject(Unknown Source)
2013-04-03 19:30:30 [SEVERE]    at me.bubblegumsoldier.Ban.Main.save(Main.java:113)
2013-04-03 19:30:30 [SEVERE]    at me.bubblegumsoldier.Ban.Main.onDisable(Main.java:247)
2013-04-03 19:30:30 [SEVERE]    at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:219)
2013-04-03 19:30:30 [SEVERE]    at org.bukkit.plugin.java.JavaPluginLoader.disablePlugin(JavaPluginLoader.java:481)
2013-04-03 19:30:30 [SEVERE]    at org.bukkit.plugin.SimplePluginManager.disablePlugin(SimplePluginManager.java:400)
2013-04-03 19:30:30 [SEVERE]    at org.bukkit.plugin.SimplePluginManager.disablePlugins(SimplePluginManager.java:393)
2013-04-03 19:30:30 [SEVERE]    at org.bukkit.craftbukkit.v1_5_R2.CraftServer.disablePlugins(CraftServer.java:277)
2013-04-03 19:30:30 [SEVERE]    at net.minecraft.server.v1_5_R2.MinecraftServer.stop(MinecraftServer.java:331)
2013-04-03 19:30:30 [SEVERE]    at net.minecraft.server.v1_5_R2.MinecraftServer.run(MinecraftServer.java:438)
2013-04-03 19:30:30 [SEVERE]    at net.minecraft.server.v1_5_R2.ThreadServerApplication.run(SourceFile:573) 
```

我的保存代码如下所示：

变量：

```
public static HashMap<String, Ban> banned = new HashMap<String, Ban>(); 
```

节省部分：

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(file));
oos.writeObject(banned);
oos.flush();
oos.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:44:25.357

看来您已将 Ban 定义为另一个名为 Main 的类的非静态内部类：

```
public class Main {

    class Ban {
        ...
    }
} 
```

这意味着每个 Ban 实例都有对其外部 Main 实例的隐式引用。上面的代码类似于下面的代码：

```
public class Main {
    static class Ban {
        private Main main;
    }
} 
```

或公共类 Main { }

```
class Ban {
    private Main main;
} 
```

因此，当您序列化 Ban 时，您也在序列化这个不可序列化的隐式实例，因此出现异常。

使 Ban 成为顶级类或静态内部类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:28:12.717

发布的 Ban 类没有任何问题。也许错误是由您的类产生的，包括不可序列化的 Main 字段变量。但是问题中贴出的代码是可以序列化的；我们可以运行这个：

公共类 Ban 实现 Serializable {

```
 transient Date start;
  transient Date end;
  String explination;
  String from;

  public Ban(Date s, Date e, String ex, String f) {
     start = s;
     end = e;
     explination = ex;
     from = f;
  }

  public String toString() {
     return "Ban{" + "start=" + start + ", end=" + end + ", explination=" + explination + ", from=" + from + '}';
  }

  public static void main(String[] args) throws IOException, ClassNotFoundException {
     Ban x = new Ban(new Date(), new Date(), "Transient means do not serialize.", "Thorn");
     File f = new File("test.out");
     ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(f));
     out.writeObject(x);
     out.close();

     ObjectInputStream in = new ObjectInputStream(new FileInputStream(f));
     Ban fromFile = (Ban) in.readObject();
     System.out.println(fromFile);
     in.close();
  } 
```

}

产生的输出是：

```
 Ban{start=null, end=null, explination=Transient means do not serialize., from=Thorn} 
```

请注意，即使我给了它们值，输出的两个日期都为空。瞬态值未序列化**。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:25:29.670

Java中的transient关键字用于指示不应序列化字段。有关更多详细信息，请参阅这篇文章[为什么 Java 有瞬态字段？](https://stackoverflow.com/questions/910374/why-does-java-have-transient-variables)

没有您的错误 cpde，我们无法为您提供帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:28:14.480

瞬态变量不能被序列化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T17:45:02.857

这些`transient`字段未序列化，它们将`null`在从流中读取之后。该错误似乎来自一个名为的内部类，该类`Main`在您的代码示例中缺失并且未实现`Serializable`！

# javascript - 如何在禁用 javascript 时更改导航菜单的外观。

> ID：15793954
> 
> 赞同：0
> 
> 时间：2013-04-03T17:21:56.700
> 
> 标签：javascript, jquery

我正在使用使用 javascript 的导航菜单重新构建一个网站，但是当禁用 javascript 时，下面的子菜单的列表堆栈。无论如何，我是否让它们消失或将它们的颜色更改为白色，以便在禁用 javascript 时与正文背景颜色混合？

我在旋转木马、内容滑块和 jquery 选项卡上遇到了这个问题。当我使用 Easy Slider 时，我给了列表的个人 ID，然后在 css 标记中将显示设置为无，这有效，但其中任何一个都不起作用。

我正在使用的导航菜单是[http://www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/examples/](http://www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/examples/)

内容滑块 - [http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui/](http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui/)

我读过一篇关于优雅降级的文章，但我不太明白。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:23:44.257

您可以使用`noscript`标签向将隐藏这些元素（例如，给定它们`display: none`）的页面添加样式规则，如下所示：

```
<noscript>
<style>
relevantSelector {
    display: none;
}
</style>
</noscript> 
```

`noscript`仅当浏览器没有 JavaScript 或 JavaScript 已关闭时，才会包含标记中的内容。您还可以使用此技术来显示非 JavaScript 导航元素。

# xml - 在 XSL 中将字符附加到字符串

> ID：15793955
> 
> 赞同：2
> 
> 时间：2013-04-03T17:21:58.467
> 
> 标签：xml, xslt, xslt-1.0

此 XML 包含要附加的字符串、字符串长度和要附加的字符的详细信息。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
    <input>
        <string>Auckland</string>
        <len>12</len>   
        <char>#</char>
    </input>

    <input>
        <string>Ohio</string>
        <len>3</len>    
        <char>*</char>
    </input>
 </data> 
```

我还有一个 XSLT，它应该（理想情况下）使用这个逻辑：while（字符串长度 < 指定长度）{ concatenate(char, string) } else { 将字符串截断到指定长度}

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template name="append" match="/">
    <xsl:param name="char"></xsl:param>
    <xsl:param name="string"></xsl:param>
    <xsl:param name="len"></xsl:param>
    <xsl:value-of select="$string" />
    <html>
    <body>
    <xsl:for-each select="data/input">
        <xsl:choose>
            <xsl:when test="string-length(string) &lt; len" >
                <xsl:call-template name="append">
                    <xsl:with-param name="char" select="char" />
                    <xsl:with-param name="string" select="concat(char,string)" />
                    <xsl:with-param name="len" select="len" />
                </xsl:call-template>
            </xsl:when>
        </xsl:choose>
    </xsl:for-each>
    </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

出于某种原因，循环没有按预期工作。循环执行一次并显示结果。

例如，对于第一个 XML 输入，输出应该是####Auckland，但结果是#Auckland。你能帮我找出这段代码中的缺陷吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:43:27.550

**这是一个简单、高效且非递归的 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pFiller" select=
 "'$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$'"/>

   <xsl:template match="/">
      <html>
         <body>
            <xsl:apply-templates select="data/input"/>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="input">
    <div>
     <xsl:value-of select=
     "concat(string, substring(translate($pFiller,'$', char), 1, len))"/>
    </div>
   </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<data>
    <input>
        <string>Auckland</string>
        <len>12</len>
        <char>#</char>
    </input>
    <input>
        <string>Ohio</string>
        <len>3</len>
        <char>*</char>
    </input>
</data> 
```

**产生了想要的正确结果：**

```
<html>
   <body>
      <div>Auckland############</div>
      <div>Ohio***</div>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:56:20.043

我假设您指定使用 XSLT 1.0；这将是 2.0 中微不足道的单行代码。但是，如果您愿意假设字符串的最大长度，我们仍然可以做一些简单的事情。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template name="append" match="/">
        <html>
            <body>
                <xsl:for-each select="data/input">
                    <xsl:value-of select="substring(concat(char,char,char,char,char,char,char,char,char,char,.), 10 + string-length() - len, len)"/>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

如果您对最大长度的假设不满意，您可以随时使用 hack：

```
<xsl:variable name="char" select="char"/>
<xsl:variable name="chars">
    <xsl:for-each select="//*[position() &lt;= $len]">
        <xsl:value-of select="$char"/>
    </xsl:for-each>
</xsl:variable> 
```

`len`除非大于输入文档中的节点数，否则哪个有效。然后你可以做

```
<xsl:for-each select="data/input">
    <xsl:value-of select="substring($chars,.), string-length(), len)"/>
</xsl:for-each> 
```

归根结底，尽管递归技术在 XSLT 1.0 中很常见，而且学习起来很有用，但在这种特殊情况下它并不是真正需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:47:13.220

当我尝试您的 XSLT 时，我没有得到任何文本输出，主要是因为在您的代码中，您命名的**附加**模板需要**字符串**和**len**参数，但您分别使用**字段**和**长度**参数调用它。此外，您的命名模板还匹配顶级文档元素，并且就目前而言，它将多次输出**html 。**

拥有一个同时也是命名模板的匹配模板是非常好的。试试这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
      <html>
         <body>
            <xsl:apply-templates select="data/input"/>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="input" name="append">
      <xsl:param name="char" select="char"/>
      <xsl:param name="string" select="string"/>
      <xsl:param name="length" select="number(len)"/>
      <xsl:choose>
         <xsl:when test="string-length($string) &lt; $length">
            <xsl:call-template name="append">
               <xsl:with-param name="char" select="$char"/>
               <xsl:with-param name="string" select="concat($char,$string)"/>
               <xsl:with-param name="length" select="$length"/>
            </xsl:call-template>
         </xsl:when>
         <xsl:otherwise>
            <div>
               <xsl:value-of select="$string"/>
            </div>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<html>
<body>
<div>####Auckland</div>
<div>Ohio</div>
</body>
</html> 
```

注意参数的默认值的使用。第一次访问模板时，通过模板匹配，值将默认为相关元素的值。当您随后将其作为命名模板调用时，它将使用您传递给它的值作为参数。

编辑：如果您希望截断超过所需长度的值，只需`<xsl:value-of select="$string"/>`用此行替换现有值：

```
<xsl:value-of select="substring($string, 1, $length)"/> 
```

# coffeescript - 带有 Derby Auth 错误的 Derby.js

> ID：15793956
> 
> 赞同：0
> 
> 时间：2013-04-03T17:22:00.593
> 
> 标签：coffeescript, derbyjs

我刚从 Derby 开始，然后开始集成 MongoDB 和 derby-auth。但是，我遇到了麻烦，无法弄清楚。以下代码返回其下方的堆栈跟踪。找出导致错误的原因非常困难。这是使用 derby -c new project 生成的新项目。我所知道的是它与这`auth.store(store)`条线有关。

**更新**：我`example/`在 derby-auth 中也遇到了这个问题，但仅限于我的第一个请求，所以我猜这与数据库连接有关。

```
http = require 'http'
path = require 'path'
express = require 'express'
gzippo = require 'gzippo'
derby = require 'derby'
app = require '../app'
serverError = require './serverError'
auth = require('derby-auth')
MongoStore = require('connect-mongo')(express)

## SERVER CONFIGURATION ##

expressApp = express()
server = http.createServer expressApp

derby.use(require 'racer-db-mongo')
derby.use(derby.logPlugin)
store = derby.createStore
  listen: server
  db:
    type: 'Mongo'
    uri: 'mongodb://localhost/admin'

module.exports = server
auth.store(store)

ONE_YEAR = 1000 * 60 * 60 * 24 * 365
root = path.dirname path.dirname __dirname
publicPath = path.join root, 'public'

# Authentication strategies (providers actually)
strategies =
  facebook:
    strategy: require('passport-facebook').Strategy
    conf:
      clientID: 'boo'
      clientSecret: 'boo'

# Authentication optionss
options =
  domain: (if process.env.NODE_ENV is 'production' then "http://www.mydomain.com" else "http://localhost:3000" )

expressApp
  .use(express.favicon())
  # Gzip static files and serve from memory
  .use(gzippo.staticGzip publicPath, maxAge: ONE_YEAR)
  # Gzip dynamically rendered content
  .use(express.compress())

  # Uncomment to add form data parsing support
  .use(express.bodyParser())
  .use(express.methodOverride())

  # Uncomment and supply secret to add Derby session handling
  # Derby session middleware creates req.session and socket.io sessions
  .use(express.cookieParser())
  .use(store.sessionMiddleware
    secret: 'mooo'
    cookie: {maxAge: ONE_YEAR}
    store: new MongoStore({ url: 'mongodb://localhost/admin' })
  )

  # Adds req.getModel method
  .use(store.modelMiddleware())

  # Authentication
  .use(auth.middleware(strategies, options))

  # Creates an express middleware from the app's routes
  .use(app.router())
  .use(expressApp.router)
  .use(serverError root)

## SERVER ONLY ROUTES ##

expressApp.all '*', (req) ->
  throw "404: #{req.url}" 
```

堆栈跟踪：

```
TypeError: Cannot read property '_at' of undefined
    at Model.mixin.proto._createRef ($derbypath/node_modules/derby/node_modules/racer/lib/refs/index.js:158:20)
    at Model.mixin.proto.ref ($derbypath/node_modules/derby/node_modules/racer/lib/refs/index.js:124:19)
    at $derbypath/lib/app/index.js:18:11
    at Object.fail ($derbypath/node_modules/derby/node_modules/racer/lib/descriptor/descriptor.Model.js:268:21)
    at Object.module.exports.events.middleware.middleware.subscribe.add._res.fail ($derbypath/node_modules/derby/node_modules/racer/lib/pubSub/pubSub.Store.js:80:40)
    at module.exports.events.init.store.eachContext.context.guardReadPath.context.guardReadPath ($derbypath/node_modules/derby/node_modules/racer/lib/accessControl/accessControl.Store.js:25:26)
    at next ($derbypath/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
    at guard ($derbypath/node_modules/derby/node_modules/racer/lib/accessControl/accessControl.Store.js:156:36)
    at next ($derbypath/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
    at run ($derbypath/node_modules/derby/node_modules/racer/lib/middleware.js:10:12)
    at $derbypath/node_modules/derby/node_modules/racer/lib/pubSub/pubSub.Store.js:88:11
    at next ($derbypath/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
    at Object.run [as subscribe] ($derbypath/node_modules/derby/node_modules/racer/lib/middleware.js:10:12)
    at module.exports.server._addSub ($derbypath/node_modules/derby/node_modules/racer/lib/descriptor/descriptor.Model.js:237:26)
    at Object.Promise.on ($derbypath/node_modules/derby/node_modules/racer/lib/util/Promise.js:29:7)
    at Model.module.exports.server._addSub ($derbypath/node_modules/derby/node_modules/racer/lib/descriptor/descriptor.Model.js:221:29)
    at subscribe ($derbypath/node_modules/derby/node_modules/racer/lib/descriptor/descriptor.Model.js:267:9)
    at Model.module.exports.proto.subscribe ($derbypath/node_modules/derby/node_modules/racer/lib/descriptor/descriptor.Model.js:106:7)
    at $derbypath/lib/app/index.js:17:16
    at onRoute ($derbypath/node_modules/derby/lib/derby.server.js:69:7)
    at app.router ($derbypath/node_modules/derby/node_modules/tracks/lib/index.js:96:16)
    at callbacks ($derbypath/node_modules/derby/node_modules/tracks/node_modules/express/lib/router/index.js:160:37)
    at param ($derbypath/node_modules/derby/node_modules/tracks/node_modules/express/lib/router/index.js:134:11)
    at param ($derbypath/node_modules/derby/node_modules/tracks/node_modules/express/lib/router/index.js:131:11)
    at pass ($derbypath/node_modules/derby/node_modules/tracks/node_modules/express/lib/router/index.js:141:5)
    at Router._dispatch ($derbypath/node_modules/derby/node_modules/tracks/node_modules/express/lib/router/index.js:169:5)
    at dispatch ($derbypath/node_modules/derby/node_modules/tracks/lib/index.js:43:21)
    at Object.middleware [as handle] ($derbypath/node_modules/derby/node_modules/tracks/lib/index.js:58:7)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at app.use.fn ($derbypath/node_modules/express/lib/application.js:121:9)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:127:23)
    at pass ($derbypath/node_modules/express/lib/router/index.js:107:24)
    at Router._dispatch ($derbypath/node_modules/express/lib/router/index.js:170:5)
    at Object.router ($derbypath/node_modules/express/lib/router/index.js:33:10)
    at Context.next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Context.actions.pass ($derbypath/node_modules/derby-auth/node_modules/passport/lib/passport/context/http/actions.js:77:8)
    at SessionStrategy.authenticate ($derbypath/node_modules/derby-auth/node_modules/passport/lib/passport/strategies/session.js:52:10)
    at attempt ($derbypath/node_modules/derby-auth/node_modules/passport/lib/passport/middleware/authenticate.js:243:16)
    at Passport.authenticate ($derbypath/node_modules/derby-auth/node_modules/passport/lib/passport/middleware/authenticate.js:244:7)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Passport.initialize ($derbypath/node_modules/derby-auth/node_modules/passport/lib/passport/middleware/initialize.js:69:5)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.handle ($derbypath/node_modules/derby-auth/index.js:71:16)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.module.exports [as handle] ($derbypath/node_modules/derby-auth/node_modules/connect-flash/lib/flash.js:20:5)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.expressInit [as handle] ($derbypath/node_modules/express/lib/middleware.js:31:5)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.query [as handle] ($derbypath/node_modules/express/node_modules/connect/lib/middleware/query.js:44:5)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Function.app.handle ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:198:3)
    at Object.app.use.fn [as handle] ($derbypath/node_modules/express/lib/application.js:117:11)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.modelMiddleware [as handle] ($derbypath/node_modules/derby/node_modules/racer/lib/session/session.Store.js:119:5)
    at next ($derbypath/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at store.get.next ($derbypath/node_modules/derby/node_modules/racer/node_modules/connect/lib/middleware/session.js:313:9)
    at $derbypath/node_modules/derby/node_modules/racer/node_modules/connect/lib/middleware/session.js:337:9
    at sessStore.load.sessStore.get ($derbypath/node_modules/derby/node_modules/racer/lib/session/session.Store.js:262:11)
    at process.startup.processNextTick.process._tickCallback (node.js:245:9) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:45:19.763

在 $derbypath/lib/app/index.js:18:11 检查这一行

# git - 将所有更改恢复为先前提交的状态

> ID：15793958
> 
> 赞同：1
> 
> 时间：2013-04-03T17:22:04.283
> 
> 标签：git, version-control

我在 Git 中工作，想知道将我对这个 Repo 的所有更改恢复到特定提交的最佳方法。例如，这是我的日志的示例：

```
commit hash#1

commit hash#2

commit hash#3

commit hash#4 
```

我在我的`master` 分支中，希望将对此 repo 所做的所有更改恢复为提交 hash#4。这意味着我想撤消在 hash#1、hash#2 和 hash#3 中提交的更改。

我不想重写/删除历史，因为这是一个公共回购。而且我确实想（重新）提交哈希＃4，一旦它被恢复。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:26:46.447

尝试以下

```
git reset --hard commit_hash_4
git reset --soft commit_hash_1 
```

第一个命令将重置工作目录并返回 commit_hash_4。第二个命令会将头部移回 commit_hash_1。此时提交将保留线性历史记录，但会为您提供 commit_hash_4 的状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:20:25.880

每个（[http://git-scm.com/2011/07/11/reset.html](http://git-scm.com/2011/07/11/reset.html)）的重置概述：

> 重置命令以特定顺序覆盖这三个树，当你告诉它时停止。
> 
> 1) 移动 HEAD 指向的任何分支（如果 --soft 则停止）
> 
> 2）然后，使索引看起来像那样（在这里停止，除非--hard）
> 
> 3）然后，使工作目录看起来像这样

只是想与遇到此问题的任何其他用户分享。

# javascript - 分隔数组 JavaScript 中的元素

> ID：15793962
> 
> 赞同：0
> 
> 时间：2013-04-03T17:22:17.847
> 
> 标签：javascript, arrays

我有一个基于用户点击各种问题和警报生成的数组，如下所示：

> A队，球员1，黄色，C1

每次发生事件（在足球比赛中）时都会创建这种数组。比赛结束后，我想将这些事件中的每一个都放入我的数据库中。我想知道如何用 a 分隔数组的每个部分，`;`以便将要爆炸的数组看起来像这样：

> A队，球员1，黄色，C1；B 队，球员 5，红色，S6

我创建第一个数组没有问题，只需要知道如何添加`;`我想知道这是否可能成为数组中的数组？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:26:13.850

假设我了解您的问题：

我认为二维数组将是实现您所追求的最简单的方法。您还可以查看创建对象并将这些对象放入数组中。看起来好像您正在这样做，但我不完全确定，因为您的示例信息量不大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:29:04.910

理想情况下，您应该将这些字符串推入一个数组，然后将它们推入一个包含所有其他数组（二维数组）的数组：

示例：http: [//jsbin.com/ecoput/2/edit](http://jsbin.com/ecoput/2/edit)

```
var data = [["Team A","Player 1","Yellow","C1"],["Team B","Player 5","Red","S6"]] 
```

在此之后，你应该`join`数组。

```
data.join(";"); 
```

这将导致：

```
"Team A,Player 1,Yellow,C1;Team B,Player 5,Red,S6" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:29:38.373

查看您的代码以了解如何创建数组会很有帮助，但您的最后一条语句可能是正确的。听起来您需要一个关联数组，或者更好的是某种集合。这些数据代表什么？

A队的球员1收到黄牌？什么是C1？如果您可以发布一些代码并解释您要捕获的内容会更有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:34:17.743

根据您的问题，我猜您使用的是字符串，而不是实际的数组。

考虑使用对象数组，因为 event 是单个实体，而不是实体列表：

```
[{team:"Team A", player:"Player 1", type:"Yellow", code:"C1"}, 
 {team:"Team B", player:"Player 5", type:"Red", code:"S6"}] 
```

将事件添加到对象数组的代码：

```
function addEvent(events, team, player, type, code) {
  events.push({team:team, player:player, type:type, code:code});
} 
```

如果您需要将单个事件存储为数组：

```
[["Team A", "Player 1", "Yellow", "C1"], 
 ["Team B", "Player 5","Red", "S6"]] 
```

您可以使用此代码将事件添加到“数组数组”：

```
function addEvent(events, team, player, type, code) {
  events.push([team, player, type, code]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T17:42:41.673

也许以下内容可以解决您的问题（只要我理解正确）：

```
var array = ["Team A", "Player 1", "Yellow", "C1", 
             "Team B", "Player 5", "Red", "S6"];

var result = "";
for ( var i = 0; i < array.length; i += 4) {
    result += array.slice(i, i+4).join(",");
    if ( i+4 < array.length ) result += ";";
}

console.log(result);
// prints: Team A,Player 1,Yellow,C1;Team B,Player 5,Red,S6; 
```

稍后您可以使用以下命令反转此操作`split`：

```
var array2 = result.split(/,|;/);
// array == array2 
```

# c# - C# 绘制具有精确坐标的矩形。如何？

> ID：15793967
> 
> 赞同：0
> 
> 时间：2013-04-03T17:22:41.533
> 
> 标签：c#

如何在 C# 中使用精确坐标绘制矩形？

例子：

```
Rectangle test1 = new Rectangle(X, Y, Width, Height); 
```

**宽度**和**高度**值似乎**必须是整数**。

是否可以以某种方式给出矩形，**英寸大小的坐标**？

```
Rectangle test2 = new Rectangle(100, 50, 1.93inches, 0.52inches); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:25:47.590

您必须转换知道英寸和像素之间的转换，这取决于屏幕分辨率。我想你可以这样做：

```
Graphics graphics = this.CreateGraphics();
var dpiX = graphics.DpiX;
var dpiY = graphics.DpiY;
var rectangle = new Rectangle(100, 50, Math.Round(1.93 * dpiX), Math.Round(0.52 * dpiY)); 
```

# actionscript-3 - flash as3 试图从外部 swf 播放音频并收到消息“调用可能未定义的方法”

> ID：15793972
> 
> 赞同：0
> 
> 时间：2013-04-03T17:22:57.693
> 
> 标签：actionscript-3, flash-cs5

我可以毫无问题地从外部库加载图形，但由于某种原因，所有音频都不会加载/播放。

这是我正在使用的加载器类...

```
package  
{
    import flash.display.LoaderInfo;
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.net.URLRequest;
    import flash.text.Font;

    public class LoadLibrary extends MovieClip
    {
        private var gear:MovieClip = new mcGear();
        private var txtLoading:BlankClip;

        private var _gameLib:String = "";

        private var _Impact:Font = new Impact();

        public function LoadLibrary(gameLibrary:String) 
        {
            _gameLib = gameLibrary;

            addChild(gear);
            gear.x = 512;
            gear.y = 384;
            gear.alpha = .2;
            gear.scaleX = .33;
            gear.scaleY = .33;

            txtLoading = new BlankClip(_Impact, "LOADING...", -400, -60, 800, 120, 26, "center", 5);
            addChild(txtLoading);
            txtLoading.x = 512;
            txtLoading.y = 525;
            txtLoading.alpha = .2;                      

            var request:URLRequest = new URLRequest(_gameLib);          
            LoadVars.LIBLOADER.contentLoaderInfo.addEventListener(Event.COMPLETE, gameLibraryLoaded);
            LoadVars.LIBLOADER.load(request);               
        }

        private function gameLibraryLoaded(e:Event):void 
        {
            removeChild(gear);
            removeChild(txtLoading);

            LoadVars.LIBLOADER.contentLoaderInfo.removeEventListener(Event.COMPLETE, gameLibraryLoaded);

            var loaderInfo:LoaderInfo = LoaderInfo(e.currentTarget);
            LoadVars.APPDOMAIN = loaderInfo.applicationDomain;

            dispatchEvent(new GameEvents(GameEvents.LIBRARY_LOADED));
        }

    }

} 
```

以及我的主要课程中的功能......

```
private function loadLib():void 
{
    _loadGraphics = new LoadLibrary("Elemental_Library.swf");
    addChild(_loadGraphics);        

    _loadGraphics.addEventListener(GameEvents.LIBRARY_LOADED, test);
}       

private function test(e:GameEvents):void 
{
    trace("LOADED");

    var music:Sound = new GameMusic();
    music.play();           
} 
```

一切正常，直到我尝试 music.play 并得到“1180：调用可能未定义的方法 GameMusic”。我尝试了其他几个音频剪辑，我得到了同样的信息。我尝试创建一个新库并仅导入一个音频文件，相同的消息。我验证我使用了正确的链接名称，而疯狂的部分是所有电影剪辑都可以从同一个库中加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:34:21.867

将测试更改为...

```
private function test(e:GameEvents):void 
{ 
    trace("LOADED"); 
    var musicClass:Class = Class(LoadVars.APPDOMAIN.getDefinition("GameMusic")); 
    var music:Sound = Sound(new musicClass()); music.play();     
} 
```

我知道这很愚蠢：P

# java - 复选框始终未选中（无论默认值是什么）

> ID：15793974
> 
> 赞同：0
> 
> 时间：2013-04-03T17:23:00.330
> 
> 标签：java, android

在这里，我在 xml 文件夹中有我的偏好。无论我将什么设置为“defaultValue”，当我打开我的偏好活动时，我总是会看到未选中的框。这是某种错误吗？

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

  <CheckBoxPreference 
     android:title="Enabled" 
     android:defaultValue="true" 
     android:key="checkbox_enabled_disabled"/>   

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:35:24.223

在 You`PreferenceActivity`子类中，您可以触发以下代码。

```
checkboxPref=(CheckBoxPreference)findPreference("myPreference");
checkboxPref.setChecked(true); 
```

这只是其中一种方法。基本上，当用户手动取消选中首选项时，您必须处理不执行此代码的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:06:31.880

实际上，这个错误已经被修复了。我只是一个白痴（或日食）

问题是，当我在模拟器上安装应用程序时，它确实加载了默认值。（我在 XML 中定义的那个）然后我改变了它（在模拟器中）。因此，我在程序中添加了更多代码，然后再次运行它，但问题是我更改的先前值仍存储在模拟器中，即使我更新并从 Eclipse 运行应用程序。这就是为什么我总是以错误的价值起床（我在程序中将其保留为错误）。

# jquery - 如何将 JSON 数据发布到 Action Method ？

> ID：15793976
> 
> 赞同：0
> 
> 时间：2013-04-03T17:23:04.333
> 
> 标签：jquery, .net, asp.net-mvc-4

我正在向服务器 (.Net) 发布信息，但在将数组传递给控制器​​操作时遇到了问题。我已经尝试了几乎所有可能的组合，但没有任何运气。然而，其中之一让我感到困惑。

如果我执行此请求：

```
var dataArray = [ { /* some plain object */ }, { /* another plain object */ ], ... ];

$.ajax(url, {
   type: "post",
   data: { models: dataArray }
}); 
```

导致发送的请求数据如下

```
models[0][property1]:value1
models[0][property2]:value2
...
models[1][property1]:value3
models[0][property2]:value4
... 
```

不幸的是，.Net MVC4 不理解该请求。在我尝试过的相关[SO 问题](https://stackoverflow.com/questions/5489461/pass-array-to-mvc-action-via-ajax)`traditional: true`之后，但发送到服务器的请求如下所示：

```
models:[object Object] 
```

显然，它发送的不是对象，而是字符串`"[object Object]"`。……这有什么问题？我是否注定要为每个涉及非原始参数的请求发送序列化字符串（并且必须在服务器端手动反序列化它们）？

**注意**：这是我的操作方法。至于现在，我尝试的一切都会导致

1.  该参数是一个正确大小的数组，但每个项目都是一个新的未修改（空）对象或
2.  参数为空

    ```
    [HttpPost]
    public ActionResult UpdateModels(Models.SimpleModel[] models) 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:34:36.883

尝试使用`JSON.stringify`类似的数组`JSON.stringify(dataArray)`

# 更新

如果我们在使用 ajax 调用时使用 stringify，MVC3 会自动将字符串数据转换为 .NET 对象。我认为 MVC4 也应该如此。

**更新 2**
将 contentType 属性设置为 application/json；字符集=utf-8

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:39:01.227

**示例 jQuery**

```
var MyConnectionList = {
    ColorList: []
};

function SendStream() {
    MyConnectionList.ColorList.push({
        "Name": 'Test1',
        "Color": 'red'
    });

    MyConnectionList.ColorList.push({
        "Name": 'Test2',
        "Color": 'Green'
    });

    $.ajax({
        url: url,
        data: JSON.stringify(MyConnectionList),
        async: true,
        type: 'POST',
        beforeSend: function (xhr, opts) {
        },
        contentType: 'application/json; charset=utf-8',
        complete: function () {  },
        success: function (data) {
        }
    });
} 
```

**样品控制器**

```
public ActionResult SendStream(List<Sample> ColorList)
{
    return null;
} 
```

# mysql - mysql查询结果有限

> ID：15793982
> 
> 赞同：1
> 
> 时间：2013-04-03T17:23:32.087
> 
> 标签：mysql, limit

在表中我有一个字段：必须是 1、2 或 3 的位置。我需要提取所有记录，但如果位置是 1，如果位置是 2，我需要从 2 到最后的记录，如果位置是 3，我需要从 2 到最后的记录我需要从 13 到最后的记录我尝试这样做但不起作用，我不确定这是正确的方法：

```
(
SELECT * FROM articoli
WHERE posizione = 1  
ORDER BY datapubb DESC 
LIMIT 2 , 5000
)

UNION

(
SELECT * FROM articoli
WHERE posizione = 2  
ORDER BY datapubb DESC 
LIMIT 3 , 5000
)

UNION

(
SELECT * FROM articoli
WHERE posizione = 3
ORDER BY datapubb DESC 
LIMIT 13 , 5000
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T18:19:35.790

我已经解决了：

```
SELECT 
    *
FROM
    (SELECT 
        idarticoli, titolo, posizione, pubblicato, datapubb
    FROM
        jaretene_news.articoli
    WHERE
        posizione = 1 AND pubblicato = 1
    LIMIT 1 , 5840) AS q 
UNION ALL SELECT 
    *
FROM
    (SELECT 
        idarticoli, titolo, posizione, pubblicato, datapubb
    FROM
        jaretene_news.articoli
    WHERE
        posizione = 2 AND pubblicato = 1
    LIMIT 3 , 5840) AS r 
UNION ALL SELECT 
    *
FROM
    (SELECT 
        idarticoli, titolo, posizione, pubblicato, datapubb
    FROM
        jaretene_news.articoli
    WHERE
        posizione = 3 AND pubblicato = 1
    LIMIT 8 , 5840) AS s
ORDER BY datapubb DESC 
```

# c++ - CDHtmlDialog、window.external 和 XP (RTM)

> ID：15793984
> 
> 赞同：0
> 
> 时间：2013-04-03T17:23:40.320
> 
> 标签：c++, mfc

我为 MFC 中的 CDHtmlDialog 定义的 Javascript 挂钩（使用 BEGIN_DISPATCH_MAP..END_DISPATCH_MAP）在 XP 中不可用（RTM.. 不允许服务包），因为“window.external”（挂钩所在的位置）似乎是不明确的。IE 处于其默认配置中，除了最小化其安全设置。

有没有解决的办法？

# javascript - JS原型继承：孩子使用相同的父属性？

> ID：15793985
> 
> 赞同：5
> 
> 时间：2013-04-03T17:23:43.793
> 
> 标签：javascript, prototypal-inheritance, prototype-programming

假设我有 Player 对象：

```
var player = function(name) {
    this.handlers = {};
}

player.prototype.on = function(event, callback) {
    if (!this.handlers[event]) {
        this.handlers[event] = [];
    }
    this.handlers[event].push(callback);
} 
```

效果很好，我可以创建玩家，每个玩家都有自己的一组处理程序。现在假设我需要继承自`player`：

```
var testPlayer = function(name) {
    this.name = name;
};

testPlayer.prototype = new player(); 
```

现在，当我创建`testPlayer`'s 时，它们每个都共享相同的`handlers`属性：

```
var adam = new testPlayer('Adam');
adam.on('test', function(){});

var eve = new testPlayer('Eve');
// eve.handlers == {'test':<function>} 
```

我在这里想念什么？我明白每个`testPlayer`的原型都是`new player`我在描述子类时创建的同一个对象。但是有没有办法让所有的 testPlayers 拥有自己的一组处理程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:29:20.117

对于那些习惯于经典继承的人来说，这确实看起来很奇怪，但这就是原型继承的工作方式。要为每个实例提供一个单独的处理程序对象，您需要在子构造函数上指定一个。这将隐藏原型的同名属性：

```
var testPlayer = function(name) {
    this.name = name;
    this.handlers = {};
};

testPlayer.prototype = new player(); 
```

`on`另一种解决方案是根据您的方法按需创建此阴影属性：

```
player.prototype.on = function(event, callback) {
    // Check for a handlers property on the instance
    if(!this.hasOwnProperty('handlers') {
        this.handlers = {};
    }
    if (!this.handlers[event]) {
        this.handlers[event] = [];
    }
    this.handlers[event].push(callback);
} 
```

* * *

**有趣的事实**

如果您正在修改原型上的对象（或数组）的属性，这只是一个问题。如果您尝试分配给原型上的属性，则会自动创建一个本地阴影属性（您不能从实例分配给原型属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:33:43.490

这里的问题是这是在*构造函数*`handlers`中添加的一个属性，所以当你这样做时

 *```
testPlayer.prototype = new player(); 
```

您正在将一个全新`player`对象的每个属性添加到`testPlayer.prototype`，其中*包括* `handlers`.

所以，`handlers`每个`testPlayer`对象都有一个属性，当你添加一个属性时，`handlers`你是在将属性添加到*原型*中的对象，而不是`testPlayer`对象。

简而言之，在调用该`on`方法时，您将属性添加到`testPlayer.prototype.handlers`，而不是`adam.handlers`或`eve.handlers`。

为了安全起见，定义：

```
var testPlayer = function(name) {
    this.name = name;
    this.handlers = {};
}; 
```*

# python - Django：如何将外键检查设置为 0

> ID：15793990
> 
> 赞同：6
> 
> 时间：2013-04-03T17:24:04.193
> 
> 标签：python, mysql, django, django-models

好的，所以我正在将数据库从 sqlite 迁移到 mysql，我几乎没有错误，但我已经解决了它们。现在我有这个选项的问题，因为我不知道如何禁用它。我试过了

```
DATABASES = {

 'default': {
    'ENGINE': 'django.db.backends.mysql',
    'NAME': 'slave',                     
    'USER': 'root',                     
    'PASSWORD': 'root',                 
    'OPTIONS': {
                "init_command": "SET foreign_key_checks = 0;",
           },
    'HOST': '',                    
    'PORT': '',                      
   }
} 
```

但它不起作用，我不知道为什么。

Ofc 我使用 json 文件进行迁移

```
python manage.py dumpdata --indent 2 --natural > dump.json
python manage.py loaddata dump.json 
```

当我开始加载数据时，我可以看到：

```
SET SQL_AUTO_IS_NULL = 0
SET foreign_key_checks=0 
```

但过了一段时间：

```
SELECT (1) AS `a` FROM `xxx` WHERE `xxx`.`id` = 8  LIMIT 1
SET foreign_key_checks=1 
```

然后我看到异常。Traceback 并不重要，因为它与外键连接，您可以在此处阅读更多信息

[http://coffeeonthekeyboard.com/django-fixtures-with-circular-foreign-keys-480/](http://coffeeonthekeyboard.com/django-fixtures-with-circular-foreign-keys-480/)

我知道我需要禁用此选项。

我试过了 ：

[http://djangosur.tumblr.com/post/7842592399/django-loaddata-mysql-foreign-key-constraints](http://djangosaur.tumblr.com/post/7842592399/django-loaddata-mysql-foreign-key-constraints)

但就像我说的那样，它不起作用。

有人可以帮忙吗...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-13T04:02:56.513

你可以把它放在你的末尾`settings.py`：

```
import sys
if 'loaddata' in sys.argv:
    # only change this for loaddata command.
    DATABASES['default']['OPTIONS'] = {
       "init_command": "SET foreign_key_checks = 0;",
    } 
```

# database-design - 如何从 DFD 绘制 ER 图

> ID：15793997
> 
> 赞同：0
> 
> 时间：2013-04-03T17:24:35.643
> 
> 标签：database-design, entity-relationship, dataflow-diagram

我正在做我的大学作业，我需要从我已经完成的 DFD 中绘制一个 ER 图。ER 中的实体是什么，仅来自 DFD 的数据存储，还是我需要添加其他内容？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T15:32:08.317

如果 ER 图旨在描述概念数据模型，那么每个商店和每个数据流（或其中的组件）都应该在 ER 中找到一个位置。概念数据模型描述了“你在谈论什么”，因为你不仅谈论商店，还谈论数据流，因此需要对它们进行描述。

但是，如果 ER 旨在成为数据库设计的基础，那么存储就足够了。

第一种方法更有意义，因为概念数据模型和 DFD 提供了大致相同的抽象级别。朝着数据库设计迈出一步是一个整体的细节层次。