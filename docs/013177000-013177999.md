# StackOverflow 问答 13177000-13177999

# regex - Autohotkey 正则表达式在多行中去除 html 标签

> ID：13177004
> 
> 赞同：2
> 
> 时间：2012-11-01T12:23:15.103
> 
> 标签：regex, autohotkey

我在 html 文件中有以下标记，我只需要使用自动热键和正则表达式从中获取文本“XX(1119601.1)”。由于结束标签仅在几个换行符后出现，我无法获取标签之间的文本。

```
 <dd class="call_number">
      <!-- holdings allowed -->
    XX(1119601.1)

       </dd> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:03:45.317

```
txt =
(Ltrim
    <dd class="call_number">
       <!-- holdings allowed -->
    XX(1119601.1)
    </dd>
)

RegexMatch(txt, "<dd .+?>(.*)</dd>", m)
msgbox % RegexReplace(m1, "<!.+>") 
```

此代码首先匹配标签中的所有内容（您可以使其更具体，例如仅匹配标签中的字符串），然后替换 Html 注释。

您也可以使用 RegexReplace 删除不需要的换行符。

**编辑：** 将 RegexMatch 更改为不自动删除换行符。

# ruby-on-rails - Rails 和 Postgreql 连接空间

> ID：13177005
> 
> 赞同：0
> 
> 时间：2012-11-01T12:23:24.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, concatenation

我有一个自动完成用户的搜索字段，它正在工作，但我将我的数据库从 mySQL 迁移到 Postgresql，但无法让连接工作。当我输入名字或姓氏时，当我的用户输入名字姓氏（它们之间有一个空格）时，它不再工作并且无法让它工作或弄清楚该怎么做。

那是我的 SQL 命令：

```
 @users = User.find(:all,:conditions => ['(last_name LIKE ? OR first_name LIKE ? OR    (first_name || last_name) LIKE ? OR (last_name || first_name) LIKE ?) AND adult = ?', "%#{params[:term]}%", "%#{params[:term]}%", "%#{params[:term]}%", "%#{params[:term]}%", false]) 
```

我的问题在这里： (first_name || last_name) 当用户键入 FirstNameLastName 时将返回正确的值，因此 concat 在这里工作，但是当我尝试添加空格时，我无法弄清楚我试过的错误是什么：

```
(first_name ||' '|| last_name) or (first_name ||" "|| last_name) 
```

但是这些都不起作用我在stackoverflow上找到了另一个线程但无法让它工作，我不明白为什么......

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:33:55.713

不知道 Rails 但怎么样

```
'....(first_name || \' \' || last_name)...' 
```

# ssis - 如何将数字转换为字符串并将其作为参数传递给执行流程任务？

> ID：13177007
> 
> 赞同：16
> 
> 时间：2012-11-01T12:23:26.537
> 
> 标签：ssis

我在 SSIS 2008 R2 中使用*执行进程任务。*我有一个`idVar`数据类型为*Int32*的变量。我需要将此变量传递给`Arguments`任务的属性，以便进程可执行文件可以将此变量作为参数。我使用表达式分配`@idVar`给`Arguments`.

现在系统说我需要将 Int 转换为 String 所以我在表达式生成器中使用了以下表达式

```
(DT_STR, 10, 1252) @[User::IdVar] 
```

它给出了以下错误：

```
Expression cannot be evaluated.

Additional information:
The expression "(DT_STR, 10, 1252) @[User:IdVar]" has a result type of "DT_STR", 
which cannot be converted to a supported type.

(Microsoft.DataTransformationServices.Controls) 
```

将数字转换为字符串的正确方法是什么？

![错误](../Images/b1bffc63ba9574e36c259c2016117a2c.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-01T12:59:14.377

### 问题原因：

*`Arguments`**“控制流*”选项卡上可用的“*执行流程任务*”中的属性需要数据类型的值，而不是。*`DT_WSTR``DT_STR`*

 *### SSIS 2008 R2 包说明了问题和修复：

*在Business Intelligence Development Studio (BIDS) 2008 R2*中创建一个 SSIS 包，并将其命名为*`SO_13177007.dtsx`*. 使用以下信息创建一个包变量。

```
Name   Scope        Data Type  Value
------ ------------ ---------- -----
IdVar  SO_13177007  Int32      123 
```

![变量窗格](../Images/abd4b4ac9db8701cfcbe7532ef83ff3d.png)

*将Execute Process Task*拖放到*Control Flow*选项卡上，并将其命名为*Pass arguments*

![控制流选项卡](../Images/c271fb69c14a737c613169627bc320d8.png)

双击*执行流程任务*以打开*`Execute Process Task Editor`*. 单击*表达式*页面，然后单击*表达式*属性上的*省略号*按钮以查看.**`Property Expression Editor`**

 *![执行流程任务编辑器](../Images/68cfb75307f6669e2a7101220ead06e1.png)

在*属性表达式编辑器*上，选择属性*`Arguments`*并单击属性上的*省略号*按钮以打开*`Expression Builder`*.

![属性表达式编辑器](../Images/2b0e881e9839ede96b6f3b7a9fedb6c9.png)

在*表达式生成器*上，输入以下表达式并单击*`Evaluate Expression`*。此表达式尝试将变量中的整数值转换*`IdVar`*为字符串数据类型。

```
(DT_STR, 10, 1252) @[User::IdVar] 
```

![表达式生成器 - DT_STR](../Images/90c2177de86fb1183291612e1433b42a.png)

单击*Evaluate Expression*将显示以下错误消息，因为*Execute Process Task*上的 Arguments 属性需要一个 data type 的值*`DT_WSTR`*。

![整数到 ANSI 字符串转换错误](../Images/18bcafb1b8b557aaa9a063c3bc839deb.png)

要解决此问题，请更新如下所示的表达式以将整数值转换为数据类型*`DT_WSTR`*。单击*Evaluate Expression*将在*Evaluated value*文本区域中显示该值。

```
(DT_WSTR, 10) @[User::IdVar] 
```

![表达式生成器 - DT_WSTR](../Images/adcbed2a83dd7861508f2508c898d3b6.png)

### 参考：

*`DT_STR`*要了解数据类型和*`DT_WSTR`*SSIS 中的差异，请阅读 MSDN 上的文档[*集成服务数据类型*](http://msdn.microsoft.com/en-us/library/ms141036.aspx)。以下是文档中关于这两种字符串数据类型的引用。

### DT_STR

一个以 null 结尾的 ANSI/MBCS 字符串，最大长度为 8000 个字符。（如果列值包含额外的空终止符，则字符串将在出现第一个空值时被截断。）

### DT_WSTR

一个以 null 结尾的 Unicode 字符串，最大长度为 4000 个字符。（如果列值包含额外的空终止符，则字符串将在出现第一个空值时被截断。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-28T07:39:47.977

表达式：“总计数：” + (DT_WSTR, 11)@[User::int32Value]

对于 Int32 -- (-2,147,483,648 到 2,147,483,647)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-16T14:59:36.980

表达式：“总计数：” + (DT_WSTR, 5)@[User::Cnt]**

# jquery - fancybox / jquery 在关闭时重定向

> ID：13177016
> 
> 赞同：0
> 
> 时间：2012-11-01T12:23:55.730
> 
> 标签：jquery, fancybox

我在这里有一个花式框内联表单

[http://keith464.fahrradhamburg.de/Messen/](http://keith464.fahrradhamburg.de/Messen/)

*   安梅尔登

第 1 点 - 它“中断”/当我尝试发送表单时出现以下错误

Uncaught TypeError: Object [object Object] has no method 'on' - 这是针对这一行的 `$("#send").on("click", function(){`

忽略该错误，并将其更改为 `$("#messform").submit(function() {`

我有一个新问题，当fancybox关闭时，它会重定向页面，我该如何阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:53:59.440

```
$("#messform").submit(function() { 
```

正在调用表单动作，所以`return false;`在里面使用。不知道这是否是问题，但试一试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:54:33.717

为了清楚起见，您只想更改fancybox 的内容？

如果是这种情况，那么我建议如下：

```
$("#messform").submit(function() {
                var emailval  = $("#contactEmail").val();
                var msgval    = $("#c_message").val();
                var msglen    = msgval.length;
                var mailvalid = validateEmail(emailval);

                var mailvalid = true;
                var msgval    = $("#c_message").val();
                var msglen    = msgval.length;

                if(mailvalid == true && msglen >= 4) {
                    // if both validate we attempt to send the e-mail
                    // first we hide the submit btn so the user doesnt click twice
                    $("#send").replaceWith("<em>sending...</em>");

                    $.ajax({
                        type: 'POST',
                        url: 'sendmesse.php',
                        data: $("#messform").serialize(),
                        success: function(data) {
                            if(data == "true") {
                                $("#messform").fadeOut("fast", function(){
                                    $(this).before("<strong>Success! Your feedback has been sent, thanks :)</strong>");
                                    // setTimeout($.fancybox.close(), 1000);
                                    // $('.fancybox').close();
                                    // $.fancybox.close();
                                    setTimeout(function(){ $.fancybox.close();}, 1000);

                                });
                            }
                        }
                    });
                } 
```

// 这部分很重要，因为您使用的是 ajax 帖子，因此您希望忽略正常的表单提交。返回假；}); });

# java - Tomee 服务器：java.net.ConnectException：连接被拒绝：连接

> ID：13177020
> 
> 赞同：0
> 
> 时间：2012-11-01T12:24:00.937
> 
> 标签：java, eclipse, eclipse-plugin

我正在尝试在 tomee 服务器上部署我的网络服务。

当我使用 maven 目标作为“tomme:run”来启动服务器时，它给出了以下错误：

```
 [INFO] Running 'run'. Configured TomEE in plugin is localhost:8080 (plugin shutdown port is 8005)
    EError opening zip file or JAR rror occurred during initialization of VM
    agent library failed to init: instrument
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    manifest missing : C:\Documents
    [INFO] Total time: 30.844s
    [INFO] Finished at: Thu Nov 01 17:36:15 IST 2012

[INFO] Final Memory: 10M/26M
[INFO] ------------------------------------------------------------------------
java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:525)
    at java.net.Socket.connect(Socket.java:475)
    at java.net.Socket.<init>(Socket.java:372)
    at java.net.Socket.<init>(Socket.java:186)
    at org.apache.openejb.config.RemoteServer.stop(RemoteServer.java:366)
    at org.apache.openejb.maven.plugin.AbstractTomEEMojo$2.run(AbstractTomEEMojo.java:568) 
```

但如果我使用 startup.bat 文件启动服务器，一切正常。

有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:00:12.750

这似乎有点旧，但以防万一。

看来，当您使用 tomee 插件时，首先无法启动服务器，这就是连接被拒绝问题的原因。因为它试图连接到关闭端口以关闭服务器，但显然它不可用，因为服务器从未启动。

因此，您应该关注“错误打开 zip 文件或 JAR 错误发生在 VM 代理库初始化失败无法初始化：仪器”。任何机会，您本地 maven 存储库中的工件可能已损坏？

最好的问候， 南达那

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:38:53.977

不完全相同的情况，但我遇到了这个错误：

“VM 代理库初始化期间发生错误无法初始化：仪器打开 zip 文件时出错或缺少 JAR 清单：C:apache-tomee-plus-1.5.2/lib/openejb-javaagent.jar

当我试图在我的 Windows 机器上的 Cygwin 终端中以“./catalina.sh start”的形式启动 TomEE 时。无论我尝试一个新的完整的 TomEE 还是一个已经存在的 Tomcat 与 TomEE 战争，结果都是一样的。当我在 Windows 终端中使用批处理文件作为“catalina start”时工作正常。我真的不太关心进一步追问这个问题，但似乎 Tommy 喜欢你使用原生 shell。

# c# - 更改程序集位置后找不到程序集的命名空间

> ID：13177021
> 
> 赞同：0
> 
> 时间：2012-11-01T12:24:01.910
> 
> 标签：c#

:( 测试项目在不同的客户资料上...

换的时候问题就解决了。

* * *

我创建了一些包含 GUI 的项目——编译这个项目后我得到了 dll，我可以调用“显示”方法来查看 GUI 的对话框。

我将 dll 输出路径更改为项目的全局 bin - 现在我的测试项目只执行显示对话框并不能很好地使用 dll 的命名空间。

我删除了 dll 的引用并使用全局 bin 目录的位置再次设置它 - 我再次收到错误消息

找不到类型或命名空间名称“XXXXXXX”（您是否缺少 using 指令或程序集

我仅在我重新设置 dll 位置 ==> 后第一次尝试运行测试项目时看到此消息，这意味着在编译时测试项目可以毫无问题地看到 dll 和他的命名空间。

这个怎么解决？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:32:18.023

:( 测试项目在不同的客户资料上...

换的时候问题就解决了。

# perl - 在文本中转义特殊字符

> ID：13177022
> 
> 赞同：1
> 
> 时间：2012-11-01T12:24:04.757
> 
> 标签：perl

我正在读取一个 xml 文件，并添加了一些额外的文本，但由于某些特殊字符会自动转换，因此我无法获得准确的文本。

我试试这个：

```
<book>
  <book-meta>
    <book-id pub-id-type="doi">1545</book-id>
    <book-title>Regenerating <?tex?> the Curriculum</book-title>
  </book-meta>
</book> 
```

脚本：

```
use strict;

use XML::Twig;

open(my $out, '>', 'Output.xml') or die "can't Create stroy file $!\n";

my $story_file = XML::Twig->new(
    twig_handlers => {
        'book-id'       => sub { $_->set_text('<?sample?>') },
        keep_atts_order => 1,
    },
    pretty_print => 'indented',
);

$story_file->parsefile('sample.xml');
$story_file->print($out); 
```

输出：

```
<book>
  <book-meta>
    <book-id pub-id-type="doi">&lt;?sample?></book-id>
      <book-title>Regenerating <?tex?> the Curriculum</book-title>
  </book-meta>
</book> 
```

我想输出为：

```
<book>
      <book-meta>
        <book-id pub-id-type="doi"><?sample?></book-id>
          <book-title>Regenerating <?tex?> the Curriculum</book-title>
      </book-meta>
    </book> 
```

如何在 XML 树枝中转义这种类型的字符。我尝试了该`set_asis`选项，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:56:00.153

`XML::Twig`正在为您正确插入字符串`<?sample?>`，因为您要求添加 PCDATA 节点，并且`<`必须`&lt;`在此类节点中替换为。但是，您想要的是一个*处理指令*节点。

插入此类节点的最简单方法`XML::Twig`是使用该`set_inner_xml`方法，该方法将从字符串中解析 XML 树片段并将其作为当前节点的内容插入。

如果你更换

```
$_->set_text('<?sample?>') 
```

和

```
$_->set_inner_xml('<?sample?>') 
```

那么你的代码应该做你想做的事。我得到的输出是

```
<book>
  <book-meta>
    <book-id pub-id-type="doi"><?sample?></book-id>
    <book-title>Regenerating <?tex?> the Curriculum</book-title>
  </book-meta>
</book> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:45:24.720

`<? ..... ?>`不是（部分）文本，而是处理指令。当您添加它时，您的 XML`set_text`将被处理为文本，因此`&lt;`.

我对`XML::Twig`自己不熟悉，但我认为您应该检查是否可以添加处理指令而不是文本。

# asp.net - 从下拉列表中选择的值必须是来自 linq 查询的表名

> ID：13177023
> 
> 赞同：0
> 
> 时间：2012-11-01T12:24:05.277
> 
> 标签：asp.net, linq, web-services

我的 linq 查询有问题。我想要一个带有下拉列表的搜索字段（文本框）。当我在“ProductID”上设置下拉列表时，他只需要在“ProductID”表中搜索，而当我将它放在“Productinformation”上时，他必须在“productinformation”表中搜索，我希望有人能理解这一点吗？

所以我想要的是以下查询：

```
 var textboxvalue = TextBox1.Text;
            var dropdownsearch = DropDownList1.SelectedValue;    

var Metadata = from m in db.Metadatas
                               join mm in db.Multimedias
                               on m.multimediaID equals mm.multimediaID
                               where (m. {{{Here i want the dropdownsearch}}} .ToString().Contains(textboxvalue) ||
                                      mm. {{{Here i want the dropdownsearch}}} .ToString().Contains(textboxvalue))

                               select new
                               {
                                   mm.ProductID,
                                   mm.filename,
                                   mm.filetype,
                                   mm.filesize
                               }; 
```

那么，如何从下拉列表中获取选定的值，作为查询中的表？通常您会将 m.ProductID 放入查询中，但我想要其中的 Selected 值，例如`m.(Dropdownlist1.Selectedvalue)`... 或`m.dropdownsearch`.. 这可能吗？如何？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:11:39.923

```
var Metadata = from m in db.Metadatas
               join mm in db.Multimedias
               on m.multimediaID equals mm.multimediaID
               select new { m, mm };

var filtered = Metadata.Where("m." + dropdownsearch + " like '@0'", textboxvalue);
var filtered = Metadata.Where("mm." + dropdownsearch + " like '@0'", textboxvalue);
var result = filtered.Select(f => new
                               {
                                   f.mm.ProductID,
                                   f.mm.filename,
                                   f.mm.filetype,
                                   f.mm.filesize
                               }; 
```

# wcf - 将基于 RSA 的加密添加到没有证书的 WCF 服务

> ID：13177024
> 
> 赞同：3
> 
> 时间：2012-11-01T12:24:06.257
> 
> 标签：wcf, security, networking, encryption

我正在寻找一种使用 WCF 在客户端和服务器之间加密消息的方法。WCF 提供了许多内置的安全机制来加密客户端和服务器之间的流量，但似乎没有什么符合我的要求。

**我不想使用证书**，因为它们太复杂了，所以请不要建议我使用证书。我不需要保密，所以我最好使用纯 RSA。

**我想要真正的安全性**，没有硬编码的密钥或其他东西。我正在考虑在每次服务器启动时生成一个公钥/私钥对。两个密钥都将仅存储在 RAM 中。然后当客户端连接它应该完全像 SSL 一样。就像[这里](https://stackoverflow.com/a/1571183/808723)描述的那样。

> 1.交换某种形式的私钥/公钥对；服务器生成一个密钥对并将私钥保存给自己并与客户端共享公钥（例如，通过 WCF 消息）
> 
> 2.使用该私钥/公钥对，交换一个共同的共享秘密，例如一个“加密密钥”，它将对称地加密您的消息（并且由于它是对称的，服务器可以使用相同的密钥来解密消息）
> 
> 3.在您的客户端上设置基础设施（例如，称为行为的 WCF 扩展）以在消息发出之前检查消息并使用您的共享密钥对其进行加密

那将是安全的，不是吗？

**是否有任何现有的解决方案来归档我所描述的内容？如果没有，我会自己创建它。我从哪里开始最好？哪种 WCF 自定义行为最好实现？**

* * *

**编辑：** 由于这不安全，我将采取以下方法：

安装服务器组件时，将生成新的 X509 证书并自动添加到（服务器的）证书存储区。此生成证书的公共部分将动态包含在客户端设置中。在客户端机器上运行客户端设置时，证书将安装到客户端的 trustet windows 证书存储中。

所以安装产品时没有额外的工作，一切都应该是安全的，就像我们想要的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:56:19.080

Alexandru Lungu 在 codeproject 上创建了一篇文章：

[具有自定义身份验证、授权、加密和压缩的 WCF 客户端服务器应用程序](http://www.codeproject.com/Articles/166044/WCF-Client-Server-Application-with-Custom-Authenti)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T14:11:13.923

你说过你不想使用证书。我不会强迫您使用证书，但是您缺少的一件事是证书是有目的的。

**证书证明您正在与之协商 SSL 连接的密钥属于您认为它所属的实体。** 如果您有某种方法可以在不使用证书的情况下确保这种情况，请务必使用原始密钥。

问题是，在第 1 步中：

`1.exchange some form of a private/public key pair; the server generates a key pair and keeps the private key to itself and shares the public key with the client (e.g. over a WCF message, for instance)`

客户端如何知道它从服务器接收到的公钥没有被中间人拦截并被 MITM 的密钥替换？

这就是证书存在的原因。如果您不想使用它们，则必须想出另一种解决此问题的方法。

你有一小群知名的客户吗？是否可以在客户端上预先配置服务器的公钥？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T13:25:30.043

## 不，这不安全！

由于没有保密性，攻击者可以进行中间人攻击，并且所有安全性都消失了。

**在服务器和客户端**之间加密消息的唯一真正安全的方法是实际使用数字证书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-09T23:32:59.167

抱歉，提供安全通信的唯一两种方法是：

1.  使用包含一系列信任关系（即证书）的公钥基础设施

或者

1.  使用共享密钥，也就是硬编码密钥。

没有其他方法可以解决所有已知的常见攻击媒介，例如中间人攻击、重放攻击等。这是铁的事实。

另一方面，我可以为您提供一个可以在一定程度上缓解您的问题的替代方案：**同时**使用.

1.  编写一个非常非常简单的 Web 服务，它唯一的工作就是生成对称密钥。通过 SSL 发布此服务。需要最终用户凭据身份验证才能获得对称密钥。

2.  在没有 SSL 的情况下编写其余服务，但使用通过第一个服务发布的对称密钥。

这样您的主应用程序就不必处理证书。

# django - 其他人可以访问的 Django 网站仅用于测试

> ID：13177026
> 
> 赞同：1
> 
> 时间：2012-11-01T12:24:14.430
> 
> 标签：django, localhost, web-hosting, mezzanine

现在该网站正在本地运行，我仍在努力。
在这样做的同时，我还必须让它对特定的用户组可见，因为我需要他们的反馈来添加/更改功能等。

我试图找到一个没有任何运气的免费网络托管（请参阅依赖项）。
我正在考虑创建一个 VPN，但是我将不得不使用我的 PC 作为虚拟机的主机，这远远不是我想要的。

因此，我的问题是： 1\. 哪种方法可以快速轻松
地实现这一目标（网站可见性**TESTING ）？**
2\. 如果专用的虚拟主机是最好的解决方案，请指点我一个易于使用且便宜的主机。到目前为止我尝试过的内容：[elastichosts](http://www.elastichosts.com/)、[alwasydata](https://www.alwaysdata.com/)、[stackable](http://stackable.com/)、[1FreeHosting](http://1FreeHosting.com)以及我现在不记得的其他内容。由于某种原因，我不能使用上述任何一种。

要考虑的另一个方面：我只想要这个用于**简单的测试**，我**不需要大量的服务器资源**。此外，由于只有 5 名测试人员，因此**流量将非常低。**这就是为什么我不会为此付出太多。我可能需要这个临时虚拟主机 2-3 个月。

Dependencies：
- 由于网站使用[mezzanine](http://mezzanine.jupo.org)，目前我只需要[mezzanine 的 dependencies](http://mezzanine.jupo.org/docs/overview.html#dependencies)。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:04:51.063

您始终可以在路由器上设置端口转发。这将允许您的测试人员直接访问您的应用程序。尽管这可能会使您的 PC 获得比您想要的更多的曝光率。

Heroku 有一个免费层。

在您的非免费选项中，linode 的实例每月收费 20 美元，但需要一些设置。Rackspace 在他们的云服务器系列中也有类似的选项。两者都不是合约服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:54:52.580

[我的博文涵盖了如何优雅地部署 Mezzanine 站点。](http://bscientific.org/blog/mezzanine-fabric-git-vagrant-joy/)与缓慢而痛苦的部署过程的成本相比，每月的托管成本微不足道。

现在，一个 EC2 微实例的成本仅为每月 3.50 美元左右。我在 EC2 服务器上创建和销毁暂存服务器，以供测试和与他人共享。

# android - Android：使 EditText 类似于 Chrome 的 URL 框

> ID：13177028
> 
> 赞同：2
> 
> 时间：2012-11-01T12:24:25.100
> 
> 标签：android, textbox, android-edittext

我正在为我学校的作业做聊天申请。

在我看来，Android 中默认的 EditText 看起来并不好。我想让它看起来像 Android 的 Chrome 中的 URL 框：

![Chrome 的编辑文本](../Images/792a945fbf1ee704032dab0a69c838e5.png)

我已经看到这种设计用于其他应用程序，例如[Catch Notes](https://play.google.com/store/apps/details?id=com.threebanana.notes&hl=en)（看起来很漂亮）。

那么，是否有任何内置选项可以更改 EditText 或者我们必须从头开始绘制它？谁能给个链接？我试着用谷歌搜索它，但我不知道正确的术语

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:29:24.713

![在此处输入图像描述](../Images/27bd0d5e15f1ed5dca874a093ae1989c.png)你可以通过透明的edittext背景来实现这一点。

所以把你的图像放在布局的背景中，并在其中放置一个edittext。并使edittext透明化..

或试试这个

```
<EditText
        android:id="@+id/tracknumbertxt"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="15dp"
        android:layout_toLeftOf="@+id/info"
        android:background="@drawable/enter_tracking_no"
        android:ems="10"
        android:hint="Enter Tracking No."
        android:paddingLeft="30dp"
        android:inputType="text"
        android:imeOptions="actionGo"

        android:singleLine="true" >

    </EditText> 
```

在这里我已经分配了填充左..

因此，根据您的设计，您必须设置 paddingRight 属性而不是 paddingLeft..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:37:46.680

盲目使用下面的布局样式..您将准备好布局。只需更换按钮背景，您就完成了。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@android:color/darker_gray"
    android:padding="5dip"
    android:gravity="center">
    <LinearLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_weight="1"
        android:background="@android:color/white"
        android:gravity="center"
        android:padding="5dip">
        <EditText android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:hint="Type URL"
            android:layout_weight="1"
            android:background="@android:color/transparent"/>
        <Button android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Refresh"/>
    </LinearLayout>
    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="btn1"/>
    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="btn2"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T12:41:41.640

SDK 本身没有任何东西可以使它看起来像那样。（也许如果您将使用限制为仅某个版本的操作系统，那么您可以使用该版本的默认样式，但这并不是一个真正可行的解决方案）

您将需要创建一个图像以用作 EditText 的背景，以使其看起来像您想要的那样。文本框和类似内容的最佳选择是使用[9-patch](http://developer.android.com/tools/help/draw9patch.html) [图像](https://stackoverflow.com/questions/4517693/how-does-a-9patch-png-work-in-android-apps)，或者创建[层列表](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList) [XML](https://stackoverflow.com/questions/8211929/styling-edittext-view-with-shape-drawable-to-look-similar-to-new-holographic-the)文件并以这种方式描述您的设计。无论哪种方式，该文件都将进入项目中的 res/drawable 文件夹，您可以将其设置为背景，如下所示：

```
<EditText android:id="@+id/et_whatever"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    background="@drawable/YOUR_FILE_NAME" /> 
```

# r - 使 *apply 的输出看起来很漂亮

> ID：13177030
> 
> 赞同：1
> 
> 时间：2012-11-01T12:24:27.760
> 
> 标签：r, knitr

我有以下行

```
apply(wrld_simpl@data, 1, FUN=function(x) sum(is.na(x))) 
```

给出以下输出

```
 ATG DZA AZE ALB ARM AGO ASM ARG AUS BHR BRB BMU BHS BGD BLZ BIH BOL MMR 
  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 
BEN SLB BRA BGR BRN CAN KHM LKA COG COD BDI CHN AFG BTN CHL CYM CMR TCD 
 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 
```

等等。我知道为这个数据集计算 NA 并没有多大意义，但是一旦我将这些数据与“本土”数据集合并，它就更有意义了，我的挑战仍然是一样的。后两个问题的出现是因为我想将其放入我使用 knitr 的报告中：

1.  我可以在交叉表中为所有变量生成此输出，即左列中的国家和一些变量（例如 wrld_simpl@data[6:11]）作为标题？

2.  如何将国家代码与国家名称 (wrld_simpl@data$NAME) 交换，因为不是每个读者都熟悉代码？

3.  如何将输出放入漂亮的表格（边框、标题、标签）？

任何指针表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:51:40.320

我将`plyr`包用于此类事情，因为 **ply-functions 的使用方式比默认的 *apply 方法更一致`r-base`。

```
library("plyr")
library("maptools")
data( wrld_simpl )
adply( wrld_simpl@data, 1, function(x) {
  sum(is.na( x[ c("LON", "LAT") ] )) # change to the columns you want to count the NA's on
})[ ,5:12 ] 
```

# php - 替换php中的urlpath

> ID：13177034
> 
> 赞同：1
> 
> 时间：2012-11-01T12:24:36.243
> 
> 标签：php

我是 php 新手。

我将默认图像路径设置为 \xampp\htdocs\Sample\tmp/one.jpg

我必须用 http:\localhost 替换 \xampp\htdocs

如果我以这种方式使用，我将获得所需的输出

```
$absolute = "\xampp\htdocs";
$relative = "http:\\localhost";
$imagepathurl = "\xampp\htdocs\Sample\tmp\/safety-masks_5092610ad4f3f.jpg";

echo str_replace($absolute,$relative,$imagepathurl); 
```

但我正在从数据库中获取 $imagepathurl。如果我以相同的甲酸盐使用它，我不会得到结果

```
$absolute = "\xampp\htdocs";
$relative = "http:\\localhost";

$imagepathurl = '"'.$imagepath.'"';
echo str_replace($absolute,$relative,$imagepathurl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:28:40.457

在第二个listing的时候添加`"`前后`$imagepath`为什么？

删除此行`$imagepathurl = '"'.$imagepath.'"';`，它应该可以工作：

```
$absolute = "\xampp\htdocs";
$relative = "http:\\localhost";

echo str_replace($absolute,$relative,$imagepath); 
```

**更新（例如该行的作用）**

```
$var = "MyString";   // Content of the String => MyString
$var = '"'.$var.'"'; // Content of the String => "MyString" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:29:33.280

使用该函数[`pathinfo`](http://www.php.net/manual/en/function.pathinfo.php)获取包含路径所有组件的数组作为结果。

然后您可以替换要更改的部分并再次连接路径组件以获得所需的新路径。

其他帖子中评论的方式只是一个字符串操作解决方案。如果您在处理解析路径时想要一些安全的东西，您应该使用 php 函数`pathinfo`。如果是一些相当简单的，那么`str_replace`将做的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:55:38.203

如果应用任何字符编码，请确保您的数据库不对字符串应用任何字符编码，然后首先解码字符串值，然后使用此代码。

```
$absolute = "C:\xampp\htdocs";
$relative = "http:\\localhost";
// if database contains encoded string decode first here
//creating absolute path for image (this will remove ./, ../ \, / to create operating system preferred path as windows uses \ and linuz user / as path separator ) 
$imagepathurl = realpath($imagepathurl);
// replasing absolute path to root directory with relative path
echo str_replace( $absolute , $relative , $imagepathurl); 
```

# java - 使用 Alarmmanager 在每天的特定时间启动和停止服务

> ID：13177045
> 
> 赞同：2
> 
> 时间：2012-11-01T12:25:17.697
> 
> 标签：java, android, time, alarmmanager

如何每天在特定时间使用警报管理器启动和结束功能

例如开始时间：07:00 结束时间：15:00

```
 Calendar cur_cal = new GregorianCalendar();
 cur_cal.setTimeInMillis(System.currentTimeMillis());//set the current time and date for this calendar

 Calendar cal = new GregorianCalendar();
 cal.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
 cal.set(Calendar.HOUR_OF_DAY, 07);
 cal.set(Calendar.MINUTE, 00);
 cal.set(Calendar.SECOND, cur_cal.get(Calendar.SECOND));
 cal.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
 cal.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
 cal.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));
Intent intent = new Intent(this, MyBroadcastReceiver.class);
    pendingIntent = PendingIntent.getBroadcast(
            this.getApplicationContext(), 234324243, intent, 0);
 AlarmManager alarm = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
 alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 30*1000, pendingIntent ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:42:53.840

设置一个在 7:00 开始的警报和一个在 15:00 停止的警报，使用 Intent-Extras 指定正确的操作（启动或停止）。

另外，比较[Using Alarmmanager to start a service at specific time](https://stackoverflow.com/questions/3052149/using-alarmmanager-to-start-a-service-at-specific-time?rq=1)

# javascript - 当这个 ajax jquery 触发器我想要一个加载 1 秒的图像

> ID：13177049
> 
> 赞同：0
> 
> 时间：2012-11-01T12:25:35.003
> 
> 标签：javascript, jquery, html, css, ajax

我有这个代码

```
<script type="text/javascript">
    $(function () {
        $(".a").live("click", function () {
            var $this = $(this),
        ProductImageId = $this.data('ProductImageId');
            $.ajax({
                url: '/Home/AddToCart',
                type: "post",
                cache: false,
                data: { ProductImageId: ProductImageId },
                success: function (data) {
                    data = eval(data);
                    $this.addClass('productSelected');
                },
                error: function (result) {
                    $(".validation-summary-errors").append("<li>Error connecting to server.</li>");
                }

            });
        }); 
```

每次有人单击此按钮时，我都希望图像加载 1 秒，以便用户知道发生了什么事..

任何形式的帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:29:03.650

就像是：

```
var $loader = $('<img src="loader.gif">').appendTo(document.body); 
```

进而

```
success: function (data) {
    setTimeout(function() {
        $loader.remove();
        data = eval(data);
        $this.addClass('productSelected');
    },1000);
} 
```

它将显示图像 1 秒 + ajax 加载时间。虽然，作为您网站的访问者，我可能更愿意跳过 1 秒的延迟......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:29:31.997

在发送之前添加如下：

```
beforeSend: function(){
    $("some element").append("<img src='url' id='one_sec_img' />");
    SetTimeout(1000, function(){
         $("#one_sec_img").hide();

     })
 } 
```

但是，我认为您的要求是正常的：
在这里，发送前的bcoz，只要单击触发ajax的按钮，就会加载图像，成功后可以隐藏图像。这是通常的过程，在这种情况下，不需要 setTimeout 。但是，如果您的要求是，图像应该只出现一秒，您可以使用设置超时。否则，下面的代码就足够了。

```
beforeSend: function(){
    $("some element").append("<img src='url' id='one_sec_img' />");

 },
success: function(res){
$("#one_sec_img").hide();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:32:19.113

尝试：

```
$(".a").click( function( ) {
    $("#idOfImage").show().delay( 1000 ).hide();
    // ajax call
}); 
```

否则，如果您只希望图像仅在 ajax 调用后消失

```
$(".a").click( function( ) {

        $("#idOfImage").show();

        $.ajax({
            // parameters
        }).done( function( ) {

            $("#idOfImage").hide( );
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:36:21.497

```
<script type="text/javascript">
    $(function () {
        $(".a").live("click", function () {
            var html=$(this).html();
            $(this).html('loading');//<img src="" /> 
            var $this = $(this),

        ProductImageId = $this.data('ProductImageId');
            $.ajax({
                url: '/Home/AddToCart',
                type: "post",
                cache: false,
                data: { ProductImageId: ProductImageId },
                success: function (data) {
                     $(".a").html(html);
                    data = eval(data);
                    $this.addClass('productSelected');
                },
                error: function (result) {
                    $(".validation-summary-errors").append("<li>Error connecting to server.</li>");
                }

            });
        }); 
```

试试这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T12:36:27.457

使用 jQuery BlockUI 插件来显示图像，也许它可以解决你的问题。

# php - PHP json_encode 一个数组并在 mysql 中存储返回

> ID：13177050
> 
> 赞同：0
> 
> 时间：2012-11-01T12:25:36.353
> 
> 标签：php, mysql, json

我想像`JSON`在mysql中一样存储一个php数组。为此，我有`meeting_point_json`type='longtext' 的列。

这是数组：

```
Array
(
    [1] => Array
        (
            [date] => 23/4/2012
            [meeting_time] => 23:04
            [meeting_place] => town hall
            [venue] => London
            [opponents] => Tigers
            [official_incharge] => Mr Putin
        )

    [2] => Array
        (
            [date] => 23/4/2050
            [meeting_time] => 13:04
            [meeting_place] => chief office
            [venue] => Kenya
            [opponents] => Peococks
            [official_incharge] => Mr Black
        )

    [3] => Array
        (
            [date] => dsad
            [meeting_time] => sadas
            [meeting_place] => jjjjj
            [venue] => jjjj
            [opponents] => dasds
            [official_incharge] => asad
        )

) 
```

这是php代码：

```
$data = json_encode($_POST['team_meeting_pt']);
    $sql = "UPDATE yami_sub_team set meeting_point_json = $data where id = $subteam_id";
    if(mysql_query($sql)){
        exit("Done!");
    }else{
        die('Something went wrong, changes not saved. Error details: ' . mysql_error());
    } 
```

它应该可以工作，但相反，我收到一个错误：

```
Something went wrong, changes not saved. Error details: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '"1":{"date":"23\/4\/2012","meeting_time":"23:04","meeting_place":"town hall","ve' at line 1 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:34:42.530

试试这条线，而不是你的：

```
$sql = "UPDATE yami_sub_team SET `meeting_point_json`='".$data."' WHERE `id`='".$subteam_id."';"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:41:39.037

请参阅： `$data`变量更改与`".$data."` 和 `$subteam_id`变量与`".$subteam_id."`

请记住 sql 查询仅作为字符串发送，而不是其中的变量......并按照您编写 PHP 的所有方式进行。始终用“..”和“..”包装变量

".." 和 '..' 取决于你的带状包装：例如：如果看起来像 `$string = mysql_query("SELECT DATA FROM ".$variable."");` 这样，你必须使用 ".." 包装！如果这样 的话`$string = mysql_query('SELECT DATA FROM '.$variable.'');` ，你必须使用 '..' 包装器！

祝朋友好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:27:54.250

它应该是这样的：

```
$sql = "UPDATE yami_sub_team set meeting_point_json = '" . mysql_escape_string($data) . "'where id = $subteam_id"; 
```

您可以在此处阅读有关该功能的更多信息：http: [//php.net/manual/en/function.mysql-escape-string.php](http://php.net/manual/en/function.mysql-escape-string.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:36:58.990

```
$data = "'" . mysql_escape_string(json_encode($_POST['team_meeting_pt'])) . "'"; 
```

在第一行更改

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-13T10:21:49.720

首先我会使用准备语句。并将结果绑定到它以避免所有的硬船。

```
$conn = new mysqli($servername, $username, $password, $dbname);
//replaced $data with ? for security reasons
$sql = "UPDATE yami_sub_team set meeting_point_json = ? where id = $subteam_id";
$stmt->$conn_prepare($sql);
//binds data to the ?
// the 's' states string is replacing  ?
$stmt->bind_param('s',$data);
if($stmt->execute()){
{
     exit("Done!");
}else{
    die('Something went wrong....);
} 
```

# php - 如何输出结果？

> ID：13177053
> 
> 赞同：0
> 
> 时间：2012-11-01T12:25:44.587
> 
> 标签：php

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

的输出`print_r($node)`如下。

```
[field_pimage] => Array
        (
            [und] => Array
                (
                    [0] => Array
                        (
                            [fid] => 4
                            [alt] => 
                            [title] => 
                            [width] => 1440
                            [height] => 900
                            [uid] => 1
                            [filename] => 200801232112524201.jpg
                            [uri] => public://200801232112524201.jpg
                            [filemime] => image/jpeg
                            [filesize] => 122349
                            [status] => 1
                            [timestamp] => 1351403970 
```

我想输出`[uri]`'s 的值，我该怎么做？

```
 $node->field_pimage->und->0->['uri'];  //but it doesn't work? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:27:38.490

您正在处理数组，而不是对象。

所以你要么需要`$node->field_pimage['und'][0]['uri']`（如果`$node`它本身是一个对象）或`$node['field_pimage']['und'][0]['uri']`（如果`$node`也是一个数组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:27:40.453

因为它是一个数组...应该使用...访问它

```
$node['field_pimage']['und'][0]['uri']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:27:55.087

```
echo $node["field_pimage"]["und"]["0"]["uri"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:28:20.300

由于它们都是数组，因此您可以使用此语法；

```
$node['field_pimage']['und'][0]['uri']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:49:28.020

它是一个多维数组。

向下处理数组的层次结构。

```
$uri = $node['field_pimage']['und'][0]['uri'];

print($uri); 
```

# php - 将服务器时钟同步到 NTP 服务器

> ID：13177055
> 
> 赞同：0
> 
> 时间：2012-11-01T12:25:52.757
> 
> 标签：php, codeigniter, amazon-web-services, ntp

我想使用 php 脚本将服务器时钟同步到 NTP 服务器，我使用 Codeignator 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T22:55:11.597

我有类似的需求，并[在此处发布了我的解决方案](https://stackoverflow.com/a/21805579/418584)。

就我而言，我正在处理的特定托管环境使其成为最佳可行选择，但最好通过安装 ntpd 并利用它来保持系统时钟准确。

# java - 使用 Collections.emptyList() 和 null 处理

> ID：13177060
> 
> 赞同：5
> 
> 时间：2012-11-01T12:26:28.207
> 
> 标签：java, null

说到在 Java 中处理“null”的最佳实践（尤其是“List”返回），从实体类的 getMethod 中返回“Collections.emptyList()”是一种好习惯吗？或者我们是否应该保持实体/数据类/方法整洁，并始终返回其值（甚至是 null），然后在代码中的其他位置处理该 null，例如；

```
Class Reference{

private Reference reference;

@XmlElement(name = "Reference")
public List<Reference> getReference() {
    if(reference==null){
        return Collections.emptyList();
    }
    return reference;
}

public void setReference(List<Reference> reference) {
    this.reference = reference;
}
} 
```

还是在我使用基本的 get 方法之后更好地处理那个 null？

**编辑/警告：**就我的场景而言，我注意到这种方法会使我的代码崩溃，我不知道为什么，当我后来打电话时；

```
References ref= (References) jaxbUnmarshaller.unmarshal(xmlReader) 
```

我得到一个不受支持的操作异常，但是当我从 collections.emtpyList 中清理我的 getMethod 时工作正常。使用 @XmlElement 标记时要小心

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:33:26.117

一般来说，`null`“empty”可以有不同的语义：`null`表示“它不存在”，而“empty”表示“它存在，但里面什么都没有”。

如果你的类在“不存在”和“空”之间没有语义差异，那么返回一个空集合更好：它`if`在所有调用者中保存一个语句，使他们的代码看起来更干净。此外，在这种情况下，我最初会设置`this.reference`为`Collections.emptyList()`，并`if`从 getter 中删除 an 。当然，在这种情况下，你的 setter 需要`null`-check 它的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T12:34:41.043

根据我的经验，在编写 Java 代码时会使用“合同式编程”或“合同式设计”（[链接）。](http://en.wikipedia.org/wiki/Design_by_contract)
这意味着，在您的示例中，如果您的引用不是由外部实体设置的，那么您只需返回 null。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T12:33:59.097

返回非空集合确实是一个好习惯。它使每个来电者免于做

```
if (list != null) {
    for (Item i : list) {
        ...
    }
} 
```

所以上面的代码没问题。`reference`但是在变量中禁止任何空值会更好。如果您有列表的 setter，则在传递的列表为 null 时使其抛出异常，或者将 null 转换为空集合。这样，即使您的类中的代码也不必为引用变量为空而烦恼。

如果你需要区分空列表和空列表，可以考虑使用[Guava 的`Optional`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Optional.html)类，这样会更清楚。

请注意：由于您有一个列表，因此应命名变量`references`（使用 final *s*），访问器应命名为`getReferences`and `setReferences`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T12:33:42.253

一般来说：取决于（如果您需要能够区分缺失列表和空列表）。

在 XML 访问库的​​情况下，似乎有一个约定总是返回一个*可变*列表，以便您可以通过它更新实体。至少这是所有自动生成的 WS-* 代码所做的。

例如，要添加一个参考，你会做

```
x.getReferences().add(someReference); 
```

如果您返回 null，这将导致异常。

OTOH，该约定没有或不需要参考列表的设置器（您只需清除列表并添加所有内容，而不是设置新列表）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T17:12:49.190

```
private Reference reference = Collections.emptyList();

public List<Reference> getReference() {
    return reference;
}

public void setReference(List<Reference> reference) {
    if(reference==null) 
        reference = Collections.emptyList();
    this.reference = reference;
} 
```

# java - Spring 控制台应用程序，从 JAR 外部加载属性文件

> ID：13177064
> 
> 赞同：0
> 
> 时间：2012-11-01T12:26:57.633
> 
> 标签：java, spring, configuration

我在控制台 Java 应用程序中使用 Spring。我的应用程序将部署如下：

```
folder/myJar.jar
folder/db/connection.properties 
```

如何在应用程序上下文中加载*connection.properties ？*`PropertyPlaceholderConfigurer`

我努力了

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="db/connection.properties"/>
</bean> 
```

但它不会工作。

我的数据库用户名/密码和其他详细信息需要这种方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T12:36:25.507

将前缀添加`file:`到位置值：

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="file:db/connection.properties"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T12:34:31.623

在 value 属性中指定文件在类路径上

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:db/connection.properties"/>
</bean> 
```

# c# - itemstyle-width 在 chrome 中不起作用，在 IE 中起作用

> ID：13177065
> 
> 赞同：0
> 
> 时间：2012-11-01T12:27:05.590
> 
> 标签：c#, asp.net, internet-explorer, firefox, google-chrome

我使用以下方法在 asp gridview 中创建标签。如果我这样使用，文本将出现在该标签中，但`IE`文本将出现在? 如何解决这个问题？`Chrome``FireFox``grid-view`

```
<asp:TemplateField HeaderText="text" itemstyle-width="100px" >                                              
      <ItemTemplate>
          <asp:Label ID="lbl" runat="server"  Text='There is no null-terminating character at the end of a C# string; therefore a C# string can contain ... of s1 and s2 are concatenated to form a single string, the two original strings are unmodified. ... For more information about how to create new strings that are based on modifications ... string quote Regex pattern strings are also interpreted at runtime, like string.Format(...). The Regex syntax contains instructions that are introduced by \. E.g. \d stands for a single character from the set 0...9\. I dnt go into the Regex syntax in this tip, but rather how to conveniently put such a Regex pattern into a C# string.'></asp:Label>
      </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:36:50.933

将 itemstyle-width="100px" 更改为 style="width: 100px;"

# java - 发送包含这些附件、htmlbody、内联图像或所有这些附件的 mime 消息？

> ID：13177068
> 
> 赞同：1
> 
> 时间：2012-11-01T12:27:18.897
> 
> 标签：java, jakarta-mail, mime, mime-message

据了解，我的电子邮件应用程序仅支持带有附件的纯文本。如果附件列表为空，我以简单的方式处理它，只需发送 mime 消息，如果附件列表不为空，我将为每个附件创建正文部分，为正文创建一个。将它们添加到设置为 mime 消息的 multipart 中。

但现在需要支持 html 部分和内联图像（其中图像将作为附件发送，html 正文将引用）​​。我知道 mime 的基础知识，即如何为每种 mime 类型创建正文部分。但实际上，当我不知道正文和附件列表将包含什么时，我不知道如何在运行 timw 时创建正文部分。例如，正文只能包含纯文本或 html 正文或带有附件的 html 正文或带有带附件的内联图像的 html 正文或带有附件的纯正文。

坦率地说，我不知道如何处理上述排列和组合的电子邮件正文和附件列表。（例如，有时我需要创建顶部消息作为多部分/混合包含正文部分作为多部分/替代和另一个正文部分平原，bla bla ....）。**是否有基于正文内容和附件列表处理这些所有场景的标准代码。请指出我正确的方向？**

这是旧的方法签名，它只支持带有附件的纯文本

```
 public void sendMimeEmail(List toMailAddresses,
  String fromMailAddress,   String body, List<AttachmentData> attachments) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:26:34.777

我不认为这里有什么魔法。您只需要足够的“if”语句来涵盖这些情况。

# matlab - 如何在 MATLAB 中计算传递函数的极限？

> ID：13177069
> 
> 赞同：0
> 
> 时间：2012-11-01T12:27:20.097
> 
> 标签：matlab

我有一个传递函数，假设`G=1/(1+s*0.23)`并想知道该传递函数的极限。

这意味着我想计算：

```
x(inf)=lim g(t) =  lim {1/s * G}
        t-> inf     s->0 
```

我怎样才能用 MATLAB 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:40:10.923

我认为您正在寻找[dcgain](http://www.mathworks.com/help/control/ref/dcgain.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:43:28.883

用于控制系统工具箱的“线性时不变 (LTI) 系统对象”模块具有许多用于分析 LTI 系统的简洁功能：

```
G = 1/(1=s*0.23);
T = ss(G);
y = step(T) 
```

`y[-1]`给你你正在寻找的限制。

# python - Pinax synch db 没有给我名为 debug_toolbar 的模块？

> ID：13177073
> 
> 赞同：0
> 
> 时间：2012-11-01T12:27:38.333
> 
> 标签：python, django, eclipse, pinax

我已经安装了 pinax，并创建了一个项目`pinax-admin`

之后，我只想将数据库与以下内容同步：

```
python manage.py syncdb
Error: No module named debug_toolbar 
```

我在 win 7 下运行 python 2.7.3 和 django 1.4.2。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:12:47.453

好了朋友们，

我解决了这个问题！这非常简单：

只需使用 pip 安装 django-debug-toolbar

pip install django-debug-toolbar

# java - 从命令行使用 Eclipse ant 插件？

> ID：13177075
> 
> 赞同：3
> 
> 时间：2012-11-01T12:27:39.350
> 
> 标签：java, eclipse, ant, command-line, eclipse-plugin

我知道这不是一个聪明的问题。

我需要从命令行使用 ant 并且 Eclipse 中有 Ant 插件，所以我尝试在 Eclipse 中指定 ANT_HOME 设置为该插件的目录。

```
C:\Users\Nikolay>ant
'ant' is not recognized as an internal or external command, operable program or batch file. 
```

[我应该从Apache](http://ant.apache.org/manual/install.html)安装单独的 Ant以从命令行启用 Ant 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T12:35:51.687

最好的解决方案可能是安装 ant，但您也可以使用来自 Eclipse 的二进制文件。您将在`eclipse\plugins\org.apache.ant_1.8.2.v20120109-1030`. 请注意，您机器上的插件版本可能不同。就像是：

`${eclipse_location}\plugins\org.apache.ant_1.8.2.v20120109-1030\bin\ant`

应该管用。但这应该只用于快速解决问题，直到您可以安装 ant。由于您将升级 Eclipse/插件并且路径将发生变化，因此您将需要以这种方式不断更新您的环境变量。

# google-chrome - Chrome NetLog 事件类型

> ID：13177084
> 
> 赞同：1
> 
> 时间：2012-11-01T12:28:12.113
> 
> 标签：google-chrome, chromium

我正在尝试使用不同的网络设置来计算页面呈现时间。为此，我正在查看 Chrome 创建的 NetLog（使用带有 --net-log-level=0 的 --log-net-log 标志）。但是，我无法理解创建的 JSON 日志；它主要与匹配事件类型有关。以本次活动为例：

```
{"params":{"delta":-871,"stream_id":3,"window_size":10484889},"phase":0,"source":{"id":78,"type":1},"time":"1292588413","type":163} 
```

根据net/base/net_log_event_type_list.h，没有事件类型有这样的参数。我在这里想念什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-05T05:45:27.170

NetLog 可能可以为您提供所需的数据，但所有这些事件都特定于单个请求——一个现代页面由数十个这些事件组成，因此您将在杂草中将它们拼凑在一起。相反，您可能正在寻找的是 NavTiming API！

在此处快速编写 API： [http ://www.igvita.com/2012/04/04/measuring-site-speed-with-navigation-timing/](http://www.igvita.com/2012/04/04/measuring-site-speed-with-navigation-timing/)

这将为您提供所有组件的详细统计信息，例如 DNS、重定向以及 DCL 和 onload 事件等。

# ibm-midrange - 是否可以在 CL 程序中将十六进制格式字符转换回十进制？

> ID：13177086
> 
> 赞同：1
> 
> 时间：2012-11-01T12:28:19.773
> 
> 标签：ibm-midrange, control-language

我有一个 RPG 程序 A 和一个 CL 程序 B。A 以数据结构作为入口参数调用 B。此数据结构包含字符以及压缩小数。B 中的入口参数被声明为字符变量，因此当从 A 传入入口参数时，十进制值以十六进制格式结束。我需要它们在 B 中的原始十进制值。有没有办法将这些十六进制字符串转换回 B 中的十进制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:03:49.063

你不需要转换。在数据结构中的适当位置定义十进制字段。

```
PGM (&STRUCT)
   DCL &STRUCT      *CHAR 12
   DCL &NAME        *CHAR 10   STG(*DEFINED) DEFVAR(&STRUCT)
   DCL &NBR         *DEC (3 0) STG(*DEFINED) DEFVAR(&STRUCT 11) 
```

*DEFINED 存储方法在位置固定时效果很好。在位置可能不同的情况下，请使用 *BASED 存储。

在此示例中，由格式参数确定的位置中有一个数值。该值将增加 1 或 2。

```
PGM (&STRUCT)
   DCL &STRUCT     *CHAR 80
   DCL &FMT        *CHAR 4
   DCL &P1         *PTR
   DCL &NUM        *DEC (3 0) STG(*BASED)
   ...
   CHGVAR &FMT %SUBSTR(&STRUCT 1 4)
   CHGVAR  &P1  %ADDRESS(&STRUCT)
   SELECT
      WHEN (&FMT = 'ONE ')  THEN(DO)
         CHGVAR %OFFSET(&P1) 20       /* POS 21 IN STRUCT */
         CHGVAR &NUM (&NUM + 1)       /* INCREMENT NUMBER BY 1 */
         ENDDO
      WHEN  (&FMT = 'TWO ')  THEN(DO)
         CHGVAR %OFFSET(&P1) 40       /* POS 41 IN STRUCT */
         CHGVAR &NUM (&NUM + 2)       /* INCREMENT NUMBER BY 2 */
         ENDDO
      OTHERWISE DO
         /* EXIT WITH ERROR */
         ...
         ENDDO
      ENDSELECT 
```

请参阅[CL 命令中的变量](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frbam6%2Fworkv.htm)

# python - 获得响应式 Django 视图

> ID：13177087
> 
> 赞同：1
> 
> 时间：2012-11-01T12:28:19.737
> 
> 标签：python, django, django-views, subprocess

我有一个 HTML 页面，其中有四个按钮 Start、Stop、Pause 和 Resume。按钮的功能是：

*   启动按钮：启动后端模拟器。（模拟器执行大约需要 3 分钟。）
*   停止按钮：停止模拟器。
*   暂停按钮：暂停模拟器。
*   恢复按钮：从暂停的阶段恢复模拟器。

单击时，每个按钮都会继续调用单独的视图函数。我面临的问题是，当我单击开始按钮时，它会通过 Python 视图中的函数调用启动模拟器。但正如我提到的，模拟器完成它的执行大约需要 3 分钟。因此，在 3 分钟内，我的 UI 完全没有响应。在呈现 Django 的当前视图之前，我无法按停止、暂停或恢复按钮。

那么解决这个问题的最佳方法是什么？我应该为模拟器生成一个非阻塞进程吗？如果是这样，在视图呈现后我如何才能知道新生成的进程已经完成了它的执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:28:41.037

前端肯定需要 Ajax。

[对于后端，您可以使用celery](http://celeryproject.org/)之类的东西，您可以使用它执行异步任务（启动/停止模拟器）。要与 celery 通信，您可以使用`polling`,`long polling`或`web sockets`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:55:34.600

我认为最简单的方法是使用 ajax 来启动他的模拟器。启动请求的响应可以在同一页面上更新。

但是，您仍然需要考虑如何暂停、恢复和停止由早期请求启动的模拟器。即如何管理和操纵模拟器的状态。

可能你想在数据库中更新它。

# algorithm - 我们为什么不这样转变？

> ID：13177089
> 
> 赞同：0
> 
> 时间：2012-11-01T12:28:23.013
> 
> 标签：algorithm, string-matching, knuth-morris-pratt

在研究字符串*的 Knuth-Morris-Pratt 算法时：*

```
ABC ABCDAB ABCDAB 
```

对于模式：

```
ABCDABD 
```

我被困在一个步骤上。我将突出显示我目前卡住的步骤。

```
ABC ABCDAB ABCDAB
ABCDABD

ABC ABCDAB ABCDAB
   ABCDABD

ABC ABCDAB ABCDAB
    ABCDABD

ABC ABCDAB ABCDAB
        ABCDABD--------------------(WHY THIS ?) 
```

我不明白上面的步骤。我希望上述步骤是：

```
ABC ABCDAB ABCDAB
          ABCDABD 
```

请解释“正确”步骤的逻辑/原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:12:58.473

当 ' ' 与 'D' 比较时，它会发现不匹配。并且这个算法“记住”之前的“AB”是比较的，所以它需要检查不匹配的字符是否是 'C' 。

KMP 方法的思想在“算法简介”一书中进行了解释。它与无限状态机方法非常相似，这可能有助于您理解它。

# mysql - mysql 'order by' 的阿拉伯字母问题

> ID：13177093
> 
> 赞同：6
> 
> 时间：2012-11-01T12:28:28.960
> 
> 标签：mysql

我的数据库中有阿拉伯语单词：

例子：

```
أحمد يحيى
احمد اسعد 
```

问题是：

我想按名称排序名称。

预期结果是：

```
احمد اسعد
أحمد يحيى 
```

但我得到了：

```
أحمد يحيى 
احمد اسعد 
```

`أ`前`ا`

我试过这个

```
select name from emp order by name; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:41:52.973

请检查您的数据库排序规则，它们应该设置为 utf8_general_ci 或 utf8_unicode_ci。这应该可以让您正确执行 order by etc。

如果运行独立查询，请尝试以下操作：

```
SET NAMES 'utf8';
SET CHARACTER SET utf8;
select name from emp order by name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:42:23.310

尝试对表定义使用波斯排序规则。例子

```
create table emp 
(
   id int,
   name text,
   ...
)
collate utf32_persian_ci; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T22:06:49.780

我遇到了同样的问题，我通过将类型更改为`utf16_bin`or any来解决它`_bin`。

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` int(11) NOT NULL,
  `name` varchar(100) COLLATE utf16_bin NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf16 COLLATE=utf16_bin; 
```

# c# - 如何将字典转换为对象并通过sql数据库保存

> ID：13177096
> 
> 赞同：0
> 
> 时间：2012-11-01T12:28:39.553
> 
> 标签：c#, sql-server

在 c# 语言中使用字典进行存储，并且该字典最终转换为对象，该对象最终存储到 SQL server..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:30:19.520

您可以将其序列化并将其保存为 json 字符串。您可以使用[http://nuget.org/packages/newtonsoft.json](http://nuget.org/packages/newtonsoft.json)来序列化和反序列化您的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:36:24.137

如果您确实想将字典转换为具有字典项作为属性的对象，可以使用 ExpandoObject：

```
var dict = new Dictionary<string, object> { { "Property", "foo" } };
var eo = new ExpandoObject();
var eoColl = (ICollection<KeyValuePair<string, object>>)eo;

foreach (var kvp in dict)
{
    eoColl.Add(kvp);
}

dynamic eoDynamic = eo;

string value = eoDynamic.Property; 
```

但我不确定这样做对你有什么帮助

# sonatype - Sonatype Insight - 应用程序健康检查 - 是否可以将应用程序组合详细信息共享到远程 Sonatype Insight 服务器

> ID：13177098
> 
> 赞同：4
> 
> 时间：2012-11-01T12:28:49.017
> 
> 标签：sonatype

有人用过`Sonatype Insight-Application Health Checker`吗？它要求您扫描您的应用程序（`war`,`jar`等`zip`），然后将其发现上传到`Sonatype Insight Server`. 之后，您会通过电子邮件获得报告，其中还包含指向交互式报告的在线链接。

我发现这种方法的问题是我的应用程序组合详细信息被上传到远程服务器（在我的组织控制之外），然后报告在任何人都可以访问的在线链接上发布。我不想要这个。有没有办法在不将详细信息上传到“远程服务器”的情况下生成此报告？

但更大的问题是，应用程序所有者和组织是否准备好在对其应用程序执行 IP 审计时将其应用程序组合详细信息分享到他们无法触及的服务器？

请让我知道对此的一般看法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T10:31:12.130

通常，如果您只是发送有关您的开源使用情况的元数据 - 这不是敏感信息。如果您有隐私问题，您还可以查看在云上提供类似服务的 White Source 软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:11:36.480

许多人使用该系统基于开源组件使用来生成其应用程序的快速简便的清单。如果您担心其他人理论上知道您正在使用哪些开源组件，那么您可能会对我们为企业提供的该工具的本地版本感兴趣。

# database - drupal watchdog 过滤数据库中的条目

> ID：13177099
> 
> 赞同：0
> 
> 时间：2012-11-01T12:28:49.820
> 
> 标签：database, drupal, drupal-6, watchdog

在drupal 6上，我可以根据严重性将看门狗的条目过滤到数据库中吗？

例如，我想排除“错误”严重性消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:09:52.627

您无法通过 Drupal 的 UI 控制写入监视程序表的内容，但您可以使用顶部折叠字段集中的过滤日志消息表单过滤最近日志条目 (/admin/reports/dblog) 上显示的消息页面的（展开字段集，CTR+单击要显示的每个严重性级别，然后单击过滤器按钮。

如果你真的想阻止 PHP 错误被写入 watchdog 表，你可以覆盖你服务器的 error_reporting (http://php.net/manual/en/function.error-reporting.php) 设置。

例如，您可以通过在 settings.php 文件中放置一个新指令来做到这一点。将此行添加到 settings.php 的底部：

```
error_reporting(E_ERROR); 
```

# objective-c - iOS UITableView 部分之间的空间不受控制？

> ID：13177101
> 
> 赞同：1
> 
> 时间：2012-11-01T12:28:53.683
> 
> 标签：objective-c, ios, uitableview

> **可能重复：**
> [减少 UITableView 部分之间的空间](https://stackoverflow.com/questions/2817308/reducing-the-space-between-sections-of-the-uitableview)

我使用`UITableView`分组样式，我想减少部分之间的间距。我试过这些：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    UIView* customView = [[UIView alloc] initWithFrame:CGRectMake(10.0, 0.0, 300.0, 32)];

    UIImageView* headerbg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"top_bg.png"]];
    headerbg.frame = CGRectMake(8.0, 0.0, 302.0, 44.0);
    [customView addSubview:headerbg];

    UILabel * headerLabel = [[FontLabel alloc] initWithFrame:CGRectZero fontName:@"HelveticaNeue-Medium"
                                               pointSize:16.0f];
    headerLabel.backgroundColor = [UIColor clearColor];
    headerLabel.opaque = NO;
    headerLabel.textColor = [UIColor colorWithRed:17.0/255.0 green:117.0/255.0 blue:1.0/255.0 alpha:1.0];
    headerLabel.frame = CGRectMake(10, 10.0, 300.0, 30);
    headerLabel.text = @"Reserve";

    [headerbg addSubview:headerLabel];

    if(section == 1 || section == 2)
    {
        headerbg.image = nil;
        headerLabel.text = nil;
        return nil;
    }
    return customView;
}

-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section{

    return nil;
}
- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if (section == 0) {

        return 25;
    }
    else
        return 0;

}
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{

    return 0;
} 
```

但是我在部分之间获得了更多空间。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:58:51.623

看看代码，我已经替换了你代码中的一些行：

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
return 1;
}
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
if (section == 0) 
    return 25;
else
    return 1;
}
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
 UIView* customView = [[UIView alloc] initWithFrame:CGRectMake(10.0, 0.0, 300.0, 32)];

UIImageView* headerbg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"top_bg.png"]];
headerbg.frame = CGRectMake(8.0, 0.0, 302.0, 44.0);
[customView addSubview:headerbg];

UILabel * headerLabel = [[FontLabel alloc] initWithFrame:CGRectZero fontName:@"HelveticaNeue-Medium"
                                           pointSize:16.0f];
headerLabel.backgroundColor = [UIColor clearColor];
headerLabel.opaque = NO;
headerLabel.textColor = [UIColor colorWithRed:17.0/255.0 green:117.0/255.0 blue:1.0/255.0 alpha:1.0];
headerLabel.frame = CGRectMake(10, 10.0, 300.0, 30);
headerLabel.text = @"Reserve";

[headerbg addSubview:headerLabel];

if(section == 1 || section == 2)
{
    headerbg.image = nil;
    headerLabel.text = nil;
    return [[[UIView alloc] initWithFrame:CGRectZero] autorelease];
}
return customView;
}
-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
return [[[UIView alloc] initWithFrame:CGRectZero] autorelease];
} 
```

# java - 从远程主机看不到activemq jmx mbeans

> ID：13177108
> 
> 赞同：1
> 
> 时间：2012-11-01T12:29:33.200
> 
> 标签：java, activemq, jmx

我`activemq`在远程服务器上运行。`JMX`当我使用（例如 with ）从我的开发机器连接到它时`jconsole`，我只看到一些 bean（代理`MBean`，但看不到`MBeans`队列、主题、连接等），而从 with 在服务器中它们都是可见的。

其他机器上看不到一些豆子怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:15:45.407

原因是代理的**多个实例**正在运行，而 MBeanServer 未正确启动。杀死所有代理进程，并干净启动完成了这项工作

# apache - Apache2 错误日志

> ID：13177113
> 
> 赞同：1
> 
> 时间：2012-11-01T12:30:06.690
> 
> 标签：apache, ubuntu, apache2, ubuntu-12.04

我正在运行 Apache 2.2 和 PHP5.3 运行 PHP 业务应用程序。从业务角度来看，一切正常，但是我的 apache error.log 中确实出现错误

```
[Thu Nov 01 12:07:17 2012] [error] [client 10.200.8.37] File does not exist: /var/www/webroot/itassistant
[Thu Nov 01 12:07:17 2012] [error] [client 10.200.8.37] File does not exist: /var/www/webroot/xmldata 
```

在我的 access.log 中记录了以下内容：

```
10.200.8.37 - - [01/Nov/2012:12:07:17 +0100] "GET /itassistant/ui/omaBaseFrame.htm HTTP/1.1" 404 490 "-" "Jakarta Commons-HttpClient/3.0.1"
10.200.8.37 - - [01/Nov/2012:12:07:17 +0100] "GET / HTTP/1.1" 200 348073 "-" "Jakarta Commons-HttpClient/3.0.1"
10.200.8.37 - - [01/Nov/2012:12:07:17 +0100] "GET /xmldata?item=All HTTP/1.1" 404 485 "-" "Jakarta Commons-HttpClient/3.0.1" 
```

PHP 日志没有给出错误。

PHP 应用程序是我正在运行的唯一应用程序，我的应用程序提供商说这不是由应用程序引起的。

我在 Ubuntu 12.04 服务器上运行。任何人都可以帮我找到这些错误的原因吗？我如何找出试图调用这些不存在的项目的内容以及原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:02:50.193

我的所有网络服务器上的访问日志中都有相同的消息。该消息每天都在同一时间记录。在我们的案例中，HP-SIM（Systems Insight Manager 监控工具）导致了这些消息。

# jquery - 使用 jQuery 的反向/反向滚动 onScroll

> ID：13177116
> 
> 赞同：2
> 
> 时间：2012-11-01T12:30:23.890
> 
> 标签：jquery, scroll, scrolltop

我想制作一个在左侧 div 上正常向下滚动的页面，但在右侧 div 上反向（向上）滚动。但是，当我在左侧开始滚动时，它不会在右侧开始滚动。当我滚动时，它只会向左滚动一段长度，然后按预期开始滚动。

[http://jsbin.com/orole3/36/edit](http://jsbin.com/orole3/36/edit)

我究竟做错了什么？

----------------------Javascript----------------------

```
$(document).ready(function(){
   $('#two').scrollTop($('#two')[0].scrollHeight);
   $('#one').scroll(function(){
     var length = $(this).scrollTop();
     $('#two').scrollTop((two.scrollHeight)-length);
   });
}); 
```

----------------------Html----------

```
<!DOCTYPE html>
<html>
<head>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  #one, #two{
    float: left;
    overflow: scroll;
    height: 100%;
    width: 50%;
  }
</style>
</head>
<body>
  <div id="one">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
  <div id="two">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:58:47.833

```
$(document).ready(function(){
   $('#two').scrollTop($('#two').height());
  var offset = $("#two").height() - $('#two').scrollTop();
   $('#one').scroll(function(){
     var length = $("#one").scrollTop();
     $('#two').scrollTop($('#two').innerHeight()-length-offset);
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:55:10.347

```
$(document).ready(function(){

   var height = $('#two')[0].scrollHeight;

   $('#two').scrollTop(height);

   height = $("#two").scrollTop();

   $('#one').scroll(function(){
     var length = $(this).scrollTop();

     console.log(height);
     console.log(length);

     $('#two').scrollTop(height - length);

   });
}); 
```

`scrollHeight`实际上不等于`scrollTop()`。

[http://jsbin.com/orole3/43/edit](http://jsbin.com/orole3/43/edit)

# asp.net - 获取日期选择器的动态 ID 时遇到问题

> ID：13177117
> 
> 赞同：0
> 
> 时间：2012-11-01T12:30:28.523
> 
> 标签：asp.net, jquery-ui-dialog, jquery-ui-datepicker

我想生成我的日期选择器的动态 id。下面的 jquery 函数显示了 datetimepicker，因为 id 被定义为静态的。

```
 $(function () {
    var dates = $("#ContentPlaceHolder1_gvdLCStatus_txtInvoiceDate_0").datepicker(
    {
        dateFormat: 'dd/mm/yy',
        defaultDate: '+1w',
        changeMonth: false,
        numberOfMonths: 1,
        showOn: 'both',
        buttonImage: 'Images/calendar_month.png',
        buttonImageOnly: true,
        onSelect: function (selectedDate) {
            var option = this.id == "ContentPlaceHolder1_gvdLCStatus_txtInvoiceDate_0" ? "minDate" : "maxDate",
                    instance = $(this).data("datepicker");
            date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings);
            dates.not(this).datepicker("option", option, date);
        }
    });
}); 
```

我想为 DatePicker 生成一个动态 ID。以及我如何`ve tried various time but couldn`找到实际的做法。谢谢。

```
<asp:GridView ID="gvdLCStatus" runat="server" DataKeyNames="LCID" AutoGenerateColumns="false"
                    AllowPaging="True" PageSize="4" EmptyDataText="No Record Found" CssClass="mGrid"
                    OnPageIndexChanging="gvdLCStatus_PageIndexChanging" OnRowCommand="gvdLCStatus_RowCommand"
                    OnSelectedIndexChanged="gvdLCStatus_SelectedIndexChanged" OnRowDataBound="gvdLCStatus_RowDataBound"
                    OnRowCreated="gvdLCStatus_RowCreated">
                    <AlternatingRowStyle CssClass="test" />
                    <Columns>
                        <asp:TemplateField HeaderText="LC Number">
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Eval("LCID") %>' Visible="false"></asp:Label>
                                <a href="#" onclick="linkbtnTest('<%# "#"+Eval("LCNumber") %>')">
                                    <%# Eval("LCNumber") %></a>
                                <%-- <div id='<%# Eval("ShipmentID") %>' style="display: none;">
                        </div>--%>
                                <div id='<%# Eval("LCNumber") %>' style="display: none;">
                                    <asp:GridView ID="gvShipmentStatus" runat="server" AutoGenerateColumns="false" DataKeyNames="ShipmentID"
                                        OnRowCommand="gvShipmentStatus_RowCommand" OnRowDataBound="gvShipmentStatus_RowDataBound"
                                        CssClass="mGrid">
                                        <Columns>
                                            <asp:BoundField DataField="InvoiceNumber" HeaderText="Invoice Number" />
                                            <asp:BoundField DataField="InvoiceDate" HeaderText="Invoice Date" />
                                            <asp:BoundField DataField="BLNumber" HeaderText="B/L Number" />
                                            <asp:BoundField DataField="BLDate" HeaderText="B/L Date" />
                                            <asp:BoundField DataField="VesselName" HeaderText="Vessel Name" />
                                            <asp:BoundField DataField="VoyageNumber" HeaderText="Voyage Number" />
                                            <asp:BoundField DataField="DueDate" HeaderText="Due Date" />
                                            <asp:BoundField DataField="ContractedShipmentSchedule" HeaderText="Shipment Schedule" />
                                            <asp:TemplateField HeaderText="Delete">
                                                <ItemTemplate>
                                                    <asp:ImageButton ID="ImgShipmentDelete" runat="server" ImageUrl='<%# isDelete_img(Session["isAdmin"].ToString()) %>'
                                                        Enabled='<%# isDelete(Session["isAdmin"].ToString()) %>' CommandName="DeleteShipmentRecord"
                                                        CommandArgument='<%# Eval("ShipmentID") %>' AlternateText="DeleteShipmentRecord"
                                                        OnClientClick="return confirm_delete();" Style='<%# delete_style(Session["isAdmin"].ToString()) %>' />
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="Edit">
                                                <ItemTemplate>
                                                    <%--                                                <asp:ImageButton ID="ImgShipmentEdit" runat="server" ImageUrl="~/Images/edit.png"
                                                CommandName="EditShipmentRecord" ImageAlign="Middle" CommandArgument='<%# Eval("ShipmentID") %>'
                                                AlternateText="EditShipmentRecord" OnClientClick='linkbtnTest(<%# Eval("ShipmentID) %>)' />
                                                    --%>
                                                    <asp:LinkButton ID="LinkButton1" runat="server" CommandName="EditShipmentRecord"
                                                        CommandArgument='<%# Eval("ShipmentID")+":"+Eval("LCStatusID")%>'>
                                                        <%--<asp:Label ID="Label2" runat="server" Text='<%# Eval("ShipmentID") %>' Visible="true"></asp:Label>--%> <img src="Images/edit.png" alt="Edit" />
                                                    </asp:LinkButton>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                        </Columns>
                                    </asp:GridView>
                                </div>
                                <%--</div>--%>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:BoundField DataField="ContractNumber" HeaderText="Contract Number" />
                        <asp:BoundField DataField="Amount" HeaderText="Amount" />
                        <asp:BoundField DataField="Qty" HeaderText="Quantity" />
                        <asp:TemplateField>
                            <ItemTemplate>
                                <a href="#" onclick="linkbtnTest('<%# "#"+Eval("LCID")%>')">Add Shipment Status</a>
                                <div id='<%# Eval("LCID") %>' style="display: none;">
                                    <table>
                                        <tr>
                                            <td class="td_records" style="padding-top: 5px;">
                                                Invoice Number
                                            </td>
                                            <td class="td_records" style="padding-top: 5px;">
                                                Invoice Date (dd/mm/yyyy)
                                            </td>
                                            <td class="td_records" style="padding-top: 5px;">
                                                B/L Number
                                            </td>
                                            <td class="td_records" style="padding-top: 5px;">
                                                B/L Date (dd/mm/yyyy)
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <asp:TextBox ID="txtInvoiceNumber" runat="server"></asp:TextBox>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="txtInvoiceDate" runat="server"></asp:TextBox>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="txtBLNumber" runat="server"></asp:TextBox>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="txtBLDate" runat="server"></asp:TextBox>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="td_records" style="padding-top: 5px;">
                                                VesselName
                                            </td>
                                            <td class="td_records" style="padding-top: 5px;">
                                                VoyageNumber
                                            </td>
                                            <td class="td_records" style="padding-top: 5px;">
                                                DueDate (dd/mm/yyyy)
                                            </td>
                                            <td class="td_records" style="padding-top: 5px;">
                                                ShipmntSchedule (dd/mm/yyyy)
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <asp:TextBox ID="txtVesselName" runat="server"></asp:TextBox>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="txtVoyageNumber" runat="server"></asp:TextBox>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="txtDueDate" runat="server"></asp:TextBox>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="txtShipmntSchedule" runat="server"></asp:TextBox>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px;">
                                                <asp:Button ID="btnSubmitShipment" runat="server" Text="Submit" CommandName="Select"
                                                    OnCommand="btnSubmitShipment_Command" CssClass="btnSubmitCSS" />
                                                <asp:Button ID="btnResetShipmentRecord" runat="server" Text="Reset" CssClass="btnSubmitCSS" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:ImageButton ID="imgDelete" runat="server" ImageUrl='<%# isDelete_img(Session["isAdmin"].ToString()) %>'
                                    Enabled='<%# isDelete(Session["isAdmin"].ToString()) %>' CommandName="DeleteRecord"
                                    CommandArgument='<%# Eval("LCID") %>' AlternateText="DeleteRecord" OnClientClick="return confirm_delete();"
                                    Style='<%# delete_style(Session["isAdmin"].ToString()) %>' />
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:ImageButton ID="imgEdit" runat="server" ImageUrl="~/Images/edit.png" CommandName="EditRecord"
                                    CommandArgument='<%# Eval("LCID") %>' AlternateText="EditRecord" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <PagerStyle CssClass="pgr" />
                </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:47:48.417

我找到了使用 asp.net 必填字段验证器验证它的替代方法。没有其他选择，必须保持时间限制。

多谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:12:29.937

为什么选择id？你为什么不使用班级名称？$('.datebox').dateTimepicker(...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:41:04.663

作为一个选项，您可以使用这样的选择器：

```
var dates = $("[id*='txtInvoiceDate']", "#<%= gvdLCStatus.ClientID %>")​ 
```

但最好考虑在文本框上设置 CssClass 属性并使用类选择器

# php - 从包含 youtube iframe 字符串的 php 变量中去除 src 属性值

> ID：13177122
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:30:31.933
> 
> 标签：php

任何人都可以建议或指出正确的导演如何从字符串中剥离字符串。

就我而言，我有这个变量。

```
$videoEmbed = the_sub_field('video_embed_code'); 
```

本质上就是这个字符串（示例）...

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/2RR-tzGOyi0" frameborder="0" allowfullscreen></iframe> 
```

我的问题是可以提取 src 属性值吗？但使用 php 而不是 javascript。

任何指示或帮助都将是最棒的。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T12:40:26.210

您可以使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)：

```
<?php 
$videoEmbed = '<iframe width="560" height="315" src="http://www.youtube.com/embed/2RR-tzGOyi0" frameborder="0" allowfullscreen></iframe>';
$doc = new DOMDocument();
$doc->loadHTML($videoEmbed);

$src = $doc->getElementsByTagName('iframe')->item(0)->getAttribute('src');

echo $src;
//http://www.youtube.com/embed/2RR-tzGOyi0
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:40:00.733

使用 PHP，一种方法是，

```
<?php

$iframe_code = '<iframe width="560" height="315" src="http://www.youtube.com/embed/2RR-tzGOyi0" frameborder="0" allowfullscreen=""></iframe>';
$root = simplexml_load_string($iframe_code);

echo $src = $root['src'];

?> 
```

**演示：** [http ://codepad.org/UEaNfo1A](http://codepad.org/UEaNfo1A)

# django - 将负值作为参数传递给 django 中的自定义管理命令

> ID：13177123
> 
> 赞同：1
> 
> 时间：2012-11-01T12:30:37.410
> 
> 标签：django

像许多其他人一样，我一直在通过构建测试应用程序来学习 django 上的 Web 开发。我已经建立了基本模型。我已经使用夹具填充了一些表，其中包含进一步测试所需的绝对最小数据。

现在对于不同的表，我想通过一个自定义管理命令创建数据元组，该命令采用所需的参数。`--save`如果这按预期工作，我将通过添加选项将创建的数据保存到数据库中。

命令的语法是这样的

```
create_raw_data owner_id temperature [--save] 
```

where`owner_id`是必需的，`temperature`（在 C 中）是可选的。在该`Handle`方法中，我使用*工厂男孩*`raw_data`用给定的参数等创建。

我确实遇到了一些问题，但是在 SO、google、django docs 等上搜索，我的命令运行良好。

除非我输入负温度...

然后我收到以下错误

```
Usage: C:\test\manage.py create_raw_data [options] 

Creates a RawData object. Usage:  create_raw_data owner_id temperature [--save]

C:\test\manage.py: error: no such option: -5 
```

我用于解析 args 的代码是这样的

```
for index, item in enumerate(args):
    if index == 0:
        owner_id = int(item)
    else index == 1:
        temp = int(item) 
```

我将 a`print(args)`作为第一行放在里面`Handle`，但似乎控件甚至没有到达这里。

我不确定是什么问题...请帮助...

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:53:40.910

解决了问题，因此为可能遇到此问题的其他人提供答案。

问题在于 optparse 的 parse_args 方法。我在很多地方读到过，虽然 optparse 已被弃用，而是推荐使用 argparse，但 django 建议使用 optparse，因为这就是它所使用的。长话短说，链接上的链接提出了一些替代方案，`create_raw_data 1 -- -5`并按预期使用了作品。所以我确实得到了解决方法。谢谢。

# java - 当对象 Hashcode 更改时，Hashmap 或 Hashset 中的查找会发生什么

> ID：13177124
> 
> 赞同：16
> 
> 时间：2012-11-01T12:30:39.267
> 
> 标签：java, hash, hashmap, hashcode, hashset

在 Hashmap 中，提供的键的哈希码用于将值放置在哈希表中。在哈希集中，对象哈希码用于将值放置在底层哈希表中。也就是说，hashmap 的优点是你可以灵活地决定你想要什么作为键，这样你就可以做这样的好事。

```
Map<String,Player> players = new HashMap<String,Player>(); 
```

这可以将诸如玩家姓名之类的字符串映射到玩家本身。

我的问题是当键的哈希码发生变化时查找会发生什么。

我希望这对于 Hashmap 来说并不是一个主要问题，因为我不希望也不希望密钥改变。在前面的例子中，如果球员的名字改变了，他就不再是那个球员了。但是，我可以使用键更改其他不是名称的字段来查找玩家，并且将来的查找将起作用。

但是，在 Hashset 中，如果有人稍微更改对象，则使用整个对象的哈希码来放置项目，该对象的未来查找将不再解析到 Hashtable 中的相同位置，因为它依赖于整个对象的哈希码。这是否意味着一旦数据在 Hashset 中就不应更改。还是需要重新散列？还是自动完成等？到底是怎么回事？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T12:52:06.820

在您的示例中， String 是不可变的，因此其哈希码无法更改。但是假设，如果一个对象的哈希码在哈希表中作为键时确实发生了变化，那么就哈希表查找而言，它可能*会消失。*我在对相关问题的回答中更详细地介绍了： [https](https://stackoverflow.com/a/13114376/139985) ://stackoverflow.com/a/13114376/139985 。（最初的问题是关于 a `HashSet`，但 a`HashSet`实际上是 a`HashMap`在幕后，所以答案也涵盖了这种情况。）

可以肯定地说，如果 HashMap 或 TreeMap 的键以影响它们各自`hashcode()`/`equals(Object)`或合同的方式发生突变`compare(...)`，`compareTo(...)`那么数据结构将“破坏”。

* * *

> 这是否意味着一旦数据在 Hashset 中就不应更改。

是的。

> 还是需要重新散列？还是自动完成等？

它不会自动重新散列。`HashMap`不会注意到密钥的哈希码已更改。事实上，在调整大小时，您甚至不会重新计算哈希`HashMap`码。数据结构会*记住*原始哈希码值，以避免在哈希表调整大小时重新计算所有哈希码。

如果您知道密钥的哈希码将要更改，则需要在更改密钥之前从表中删除该条目，然后再将其添加回来。（如果您在更改密钥后尝试`remove`/它，则很有可能无法找到该条目。）`put``remove`

> 到底是怎么回事？

发生的事情是你违反了合同。不要那样做！

合同由两部分组成：

1.  标准哈希码 / 等于 .javadoc 中指定[的](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html)合约`Object`。

2.  当对象的哈希码是哈希表中的键时，它不能更改的附加约束。

后一个约束没有在`HashMap` [javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html)中具体说明，但[javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html) for`Map`说：

> *注意：如果将可变对象用作映射键，则必须非常小心。`equals`如果对象的值以影响比较的方式更改，而对象是映射中的键，则不指定映射的行为。*

影响相等性（通常）的更改也会影响哈希码。在实现级别，如果条目的键的哈希码发生更改，则该条目*现在*`HashMap`通常位于错误的哈希桶中，并且对于执行查找的方法是不可见的。*`HashMap`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T12:42:46.457

在您的示例中，键是不可变的字符串。所以键的哈希码不会改变。当键的哈希码更改未定义并导致“奇怪”行为时会发生什么。请参见下面的示例，它打印 1、false 和 2。对象保留在集合中，但集合看起来像是损坏了（包含返回 false）。

[从Set 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)中提取：

> 注意：如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自身作为元素。

```
public static void main(String args[]) {
    Set<MyObject> set = new HashSet<>();
    MyObject o1 = new MyObject(1);
    set.add(o1);
    o1.i = 2;
    System.out.println(set.size());       //1
    System.out.println(set.contains(o1)); //false
    for (MyObject o : set) {
        System.out.println(o.i);          //2
    }
}

private static class MyObject {
    private int i;

    public MyObject(int i) {
        this.i = i;
    }

    @Override
    public int hashCode() {
        return i;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) return false;
        if (getClass() != obj.getClass()) return false;
        final MyObject other = (MyObject) obj;
        if (this.i != other.i) return false;
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:36:49.860

`HashSet`由`HashMap`. _

来自**javadocs**。

> 该类实现了由哈希表（实际上是 HashMap 实例）支持的 Set 接口。

因此，如果您**更改**哈希码，我怀疑您是否可以访问该对象。

## 内部实施细节

的`add`实现`HashSet`是

```
 public boolean add(E e) {
        return map.put(e, PRESENT)==null;
 } 
```

关键是元素，值只是一个名为 PRESENT 的虚拟对象

并且`contains`实现是

```
public boolean contains(Object o) {
        return map.containsKey(o);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:43:42.167

使用 Java 的哈希，根本找不到原始引用。在当前hashcode对应的bucket中查找，没有找到。

`contains`为了事后恢复，必须迭代Hash keySet，并且必须通过迭代器删除任何方法找不到的key 。最好是从映射中删除键，然后用新键存储值。*

# bison - 减少-减少语法冲突

> ID：13177131
> 
> 赞同：0
> 
> 时间：2012-11-01T12:31:07.877
> 
> 标签：bison, reduce-reduce-conflict

我在野牛中遇到以下语法的减少/减少冲突，因为 n 也是一个 epsilon 产生。

```
m   :                       {$$=line_no;}
    ;
n   :                       {   

                            $$.nl=makelist(line_no);
                            codelines[line_no].opcode=GOTO;
                            codelines[line_no].result=0;
                            line_no++;
                            }
    ;
selection_statement
    : IF '(' expression ')' m statement         %prec THAN
    | IF '(' expression ')' m statement n ELSE m statement
    | SWITCH '(' expression ')' statement
    ; 
```

如何修改它以消除此冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:57:06.860

正如您所说，问题是 的 epsilon 减少`n`，这需要与`ELSE`. 问题将出现在与 "ambiguous" 完全相同的情况下`else`，因为不清楚属于哪个`if`语句`n`。

显而易见且简单的解决方案是在 the`n`之后移动，`ELSE`因为归约动作发生在移位之前还是之后都没有任何区别，而在移位之后，即使`LALR`解析器也很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:39:35.727

您的语法似乎没有使用 m 的值。因此，您不妨删除对 m 及其规则的所有引用。

# c# - 如果服务器在路由器后面，如何获取用户的公共 IP？

> ID：13177134
> 
> 赞同：5
> 
> 时间：2012-11-01T12:31:12.283
> 
> 标签：c#, asp.net, ip, router

如果我的服务器在路由器后面，如何获取用户的公共 IP？

我正在努力：

```
protected string GetIPAddress() 
{
    System.Web.HttpContext context = System.Web.HttpContext.Current;
    string ipAddress = context.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
    if (!string.IsNullOrEmpty(ipAddress))
    {
        string[] addresses = ipAddress.Split(',');
        if (addresses.Length != 0)
        {
            return addresses[0];
        }
    }
    return context.Request.ServerVariables["REMOTE_ADDR"]; 
} 
```

但我得到的只是路由器网关。

显然，`REMOTE_ADDR`在我的情况下不起作用，也不会`HTTP_X_FORWARDED_FOR`。

关于如何在我的情况下获取用户的公共 IP 的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:34:47.507

您正在尝试在 HTTP 级别处理 IP 和路由。

在**应用层**，数据包已经通过**路由/IP**层，并且该信息已被剥离。

您在 HTTP 级别看到的数据包与远程端点在其**应用层**级别发送的数据包完全相同，没有 IP 信息，因此查看 HTTP 标头对恕我直言无济于事。

**编辑：**正如@Marc Gravell 所说，一些反向代理确实将此信息添加到 HTTP 标头中。所以你应该检查你的（如果你配置了一个），如果它这样做了。

**[此答案](https://stackoverflow.com/questions/6914457/why-does-servervariableremote-addr-returns-the-server-ip)**列出了您可以检查的其他一些服务器变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:49:23.650

没有办法得到它。

但是，您可以查看用户是从本地网络还是从 Web 打开页面。

如果 IP 是路由器分配给来自网络的请求的 IP，那么很明显它来自网络。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:35:44.337

唯一可靠的方法是联系互联网上的一些已知服务，它会告诉你它看到你的请求来自哪个 IP。当然，该服务必须继续运行并且可以访问，否则此功能会中断。例如，[http://whatismyip.com](http://whatismyip.com)

# css - 正则表达式排除网站

> ID：13177138
> 
> 赞同：0
> 
> 时间：2012-11-01T12:31:51.703
> 
> 标签：css, regex

我想使用[`@document regexp()`](https://developer.mozilla.org/en-US/docs/CSS/@document)规则[来排除某些网站应用规则。](https://stackoverflow.com/questions/13175899/how-to-use-document-rule-to-exclude-certain-sites-from-applying-rules-to)我可以用什么作为正则表达式来做到这一点？

# c# - 如何在 Gridview 中仅将 Rowspan 用于第一列

> ID：13177139
> 
> 赞同：10
> 
> 时间：2012-11-01T12:31:52.360
> 
> 标签：c#, asp.net, gridview

需要帮助来解决与 Gridview 布局相关的问题。我正在尝试使用 C#.Net 语言使用 Itemtemplate Columns 实现custome Gridview，并希望使用 RowSpan 属性包含视图。

![如下](../Images/527d7ee27305627b927ce5e65b8fb89d.png)

[我尝试使用下面的代码，但对我](http://csharpdotnetfreak.blogspot.com/2009/07/merge-gridview-cells-columns-aspnet.html)不起作用

请检查我使用的代码：

```
 protected void GridView31_DataBound1(object sender, EventArgs e)
{
    for (int rowIndex = grdView31.Rows.Count - 2; rowIndex >= 0; rowIndex--)
    {
        GridViewRow gvRow = grdView31.Rows[rowIndex];
        GridViewRow gvPreviousRow = grdView31.Rows[rowIndex + 1];
        for (int cellCount = 0; cellCount < gvRow.Cells.Count; cellCount++)
        {
            if (gvRow.Cells[cellCount].Text == gvPreviousRow.Cells[cellCount].Text)
            {
                if (gvPreviousRow.Cells[cellCount].RowSpan < 2)
                {
                    gvRow.Cells[cellCount].RowSpan = 2;
                }
                else
                {
                    gvRow.Cells[cellCount].RowSpan =
                        gvPreviousRow.Cells[cellCount].RowSpan + 1;
                }
                gvPreviousRow.Cells[cellCount].Visible = false;
            }
        }
    }

} 
```

但每次`gvRow.Cells[cellCount].Text == gvPreviousRow.Cells[cellCount].Text`都是空白。

因此，网格呈现出奇怪的形状。不知道这里发生了什么。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T12:54:18.657

改用 RowDataBound 事件：

```
void GridView31_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow )
    {
        if (e.Row.RowIndex % 4 == 0)
        {
            e.Row.Cells[0].Attributes.Add("rowspan", "4");
        }
        else
        {
            e.Row.Cells[0].Visible = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:49:35.413

```
 protected void GridView31_DataBound1(object sender, EventArgs e)
{
    int i = 1;
    for (int rowIndex = grdView31.Rows.Count - 2; rowIndex >= 0; rowIndex--)
    {
        GridViewRow gvRow = grdView31.Rows[rowIndex];
        GridViewRow gvPreviousRow = grdView31.Rows[rowIndex + 1];

        if (i % 4 !=0)
        {
            if (gvPreviousRow.Cells[0].RowSpan < 2)
            {
                gvRow.Cells[0].RowSpan = 2;
            }
            else
            {
                gvRow.Cells[0].RowSpan = gvPreviousRow.Cells[0].RowSpan + 1;
            }
            gvPreviousRow.Cells[0].Visible = false;
        }
        i++;
    } 
```

这对我有用。试错:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T08:37:32.230

```
 'VB.NET Code

Private Sub DG_Data_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles DG_Data.RowDataBound
            Try

                'fusion , rowspan , colspan , 
                If e.Row.RowType = DataControlRowType.DataRow Then
                    If e.Row.RowIndex Mod 4 = 0 Then
                        e.Row.Cells(0).Attributes.Add("rowspan", "4")
                    Else
                        e.Row.Cells(0).Visible = False
                    End If
                End If

            Catch ex As Exception
                jq.msgErrorLog(ex)
            End Try
        End Sub 
```

# android - 如何从另一个活动的 ArrayList 中删除项目并更新以前的活动？

> ID：13177140
> 
> 赞同：0
> 
> 时间：2012-11-01T12:31:54.523
> 
> 标签：android, arraylist, android-activity

我有一个 ArrayList 我正在发送项目 onItemClick 在另一个活动中：-

```
list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            Intent i = new Intent(MessageEmail.this, MessageByMessage.class);
            i.putExtra("msg_title", unreadMsgList.get(position).address);
            i.putExtra("full_msg",
                    unreadMsgList.get(position).unreadMessage);
            i.putExtra("pos", position);
            startActivity(i);
            finish();

        }
    }); 
```

并开始另一个活动并从此设置文本：-

```
title=getIntent().getExtras().getString("msg_title");
    message=getIntent().getExtras().getString("full_msg");
    position=getIntent().getExtras().getInt("pos");
    title_txt.setText(title);
    msg_txt.setText(message); 
```

现在**的问题是**我在这个活动中有一个删除按钮。**我想在 Button click 上删除项目 & 将打开我的第一个活动 Where List should be refresh**。提前致谢！迪潘克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:38:22.217

这里有一个很好的例子[来](http://www.helloandroid.com/tutorials/communicating-between-running-activities)说明如何在活动之间进行通信。基本上，您更新清单中的活动并设置`android:launchMode="singleTask"`。然后你处理`onNewIntent`被调用活动的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:41:25.130

使用`StartActivityForResult(yourIntent,YOUR_REQUEST_CODE);`和`onActivityResult`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode)
    {
        case YOUR_REQUEST_CODE:
            if(resultCode == RESULT_OK)
                yourArrayList.remove(theItemClicked);
                yourListview.notifySetDataChanged();
            break;

        default:
            break;
    }

} 
```

在 otherActivity 中，只需在 INTENT 中设置一些 Result，然后在 Delete Button 的 OnClick 事件中完成该 Activity。

# sql - SQL 相同的邮政编码

> ID：13177142
> 
> 赞同：0
> 
> 时间：2012-11-01T12:31:58.037
> 
> 标签：sql

```
select PERSON.fornavn, PERSON.efternavn, PERSON.postnr, POST.distrikt
from PERSON inner join POST on POST.postnr = PERSON.postnr
inner join MEDLEM on PERSON.personnr = MEDLEM.personnr
inner join FORMAND on MEDLEM.personnr = FORMAND.personnr
group by PERSON.fornavn, PERSON.efternavn, PERSON.postnr, POST.distrikt, FORMAND.afdnr
having FORMAND.afdnr = 3
order by PERSON.fornavn 
```

我需要显示与部门 3 的老板住在同一邮政编码的人，但结果没有意义。

Fornavn = 名字，Formand = 老板，Adresse = 地址，Afdeling = 部门（afdnr = 部门编号），Medlem = 成员

表：

```
PERSON: personnr, fornavn, adresse, postnr
POST: postnr, district
FORMAND: personnr, afdnr
MEDLEM: personnr, afdnr
AFDELING: afdnr, afdname 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:36:48.553

```
select PERSON.fornavn, PERSON.efternavn, PERSON.postnr, POST.distrikt
from PERSON inner join POST on POST.postnr = PERSON.postnr
inner join MEDLEM on PERSON.personnr = MEDLEM.personnr
inner join FORMAND on MEDLEM.personnr = FORMAND.personnr
where FORMAND.afdnr = 3
group by PERSON.fornavn, PERSON.efternavn, PERSON.postnr, POST.distrikt, FORMAND.afdnr
order by PERSON.fornavn 
```

尝试：

```
where FORMAND.afdnr = 3 
```

而不是

```
having FORMAND.afdnr = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:38:07.397

如果我理解正确（“与（部门 3 的老板）居住在同一邮政编码的人”，并假设只有一个老板：

```
select PERSON.fornavn, PERSON.efternavn, PERSON.postnr, POST.distrikt
from PERSON
inner join POST on POST.postnr = PERSON.postnr
where PERSON.postnr = (SELECT pf.postnr 
                       FROM FORMAND f
                       inner join PERSON pf ON f.personnr = pf.personnr 
                       WHERE f.afdnr = 3)
order by PERSON.fornavn 
```

注意：根据描述，您的查询毫无意义，除非我遗漏了什么。您正在通过 MEDLEM 加入 PERSON 到 FORMAND on `personnr`，这意味着您只会得到老板的记录 (PERSON.personnr = FORMAND.personnr)。

注意：如果有多个老板，您可以`=`将`WHERE`子句中的 更改`IN`为让所有与任何老板住在同一邮政编码的人。

* * *

万一我读错了，你的意思是“部门 3 的（与老板住在同一邮政编码的人）”，试试：

```
select p.fornavn, p.efternavn, p.postnr, POST.distrikt
from PERSON p
inner join POST on POST.postnr = p.postnr
inner join MEDLEM on p.personnr = MEDLEM.personnr
inner join FORMAND on MEDLEM.afdnr = FORMAND.afdnr
inner join PERSON pf on FORMAND.personnr = pf.personnr AND pf.postnr = p.postnr
where MEDLEM.afdnr = 3
order by PERSON.fornavn 
```

注意：同样，我相信您从问题中加入很奇怪。看上面。

# sql-server - SSIS 是实现此功能的方法吗？

> ID：13177143
> 
> 赞同：0
> 
> 时间：2012-11-01T12:31:59.973
> 
> 标签：sql-server, ssis

我有一个需要自动化的手动过程。以下是概述的步骤。SSIS 是实现以下所有步骤的正确方法吗？尤其是 CSV、zip 和电子邮件步骤的结果？这可以使用内置的 sql server 调度程序来完成吗？

1.  连接到 SQL Server：DARVIN,51401

2.  打开 SQL 查询：o:\Status Report.sql

3.  选择数据库：AdventureWorks

4.  在上面的菜单栏中选择“工具”，然后选择“选项”。

5.  当弹出窗口出现时，选择名为“结果”的选项卡，然后选择逗号分隔 (CSV) 的结果输出格式。单击“应用”，然后单击“确定”按钮。

6.  执行查询

7.  指示保存文件的位置，您可以将这些保存在 O:\Reports 文件名格式为：day^_^Report TSP MM-DD-YY

8.  让查询运行 15-25 分钟。

9.  查询完成后，打开保存报告的文件夹，右键单击报告标题并压缩为 zip 文件。（右键单击，发送到压缩（压缩）文件夹）完成后。

10.  复制保存的文件并放入：O:\zippedFiles\

11.  电子邮件：support@adventureworks.com 让他们知道您已将 zip 文件放在：O:\zippedFiles\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:03:52.967

这正是 SSIS 的用途：自动化数据传输过程。

唯一可能给您带来问题的 stp 是压缩部分。您可以使用第三方库，并执行自定义脚本任务来实现您想要的。您将不得不做一些 Vb.Net（或 C#）来实现该部分。

您想要的其余部分在 SSIS 中非常简单。

# java - JMX 连接超时

> ID：13177147
> 
> 赞同：0
> 
> 时间：2012-11-01T12:32:12.343
> 
> 标签：java, timeout, profiling, jmx

我正在使用 JVM 监视器来分析远程服务器上的应用程序。与远程服务器的连接非常慢，当我尝试连接时总是得到“连接超时”。我在远程调试此应用程序时遇到了类似的问题，我通过增加超时时间解决了这个问题。但是，我找不到为 JMX 连接执行此操作的方法。我确信我以正确的论点开始了我的应用程序，并且防火墙不是问题。

# java - Java 2D数组矩形错误

> ID：13177149
> 
> 赞同：0
> 
> 时间：2012-11-01T12:32:17.017
> 
> 标签：java

我对我之前提出的一个问题有一个补充。我有一个二维数组，我需要根据周围的 4 个元素来获取每个元素的大小。周围是上、下、左、右。如果一个或多个周围元素超出数组边界，即当前元素在边上，它会将超出边界的元素视为当前元素。我的程序仅在数组为正方形、4 x 4、5 x 5 等时才有效。但是当它是矩形时，4 x 5、5 x 6 等我得到一个错误。我相信这是因为 array.length 对于 x 和 y 不再相同。我不知道如何纠正这个错误，任何帮助将不胜感激！这是我当前的代码：

```
public class ArrayTest 
{ 

public static int[][] buildE(int[][] array)
{

    int [][] arrayE = new int[array.length][array.length];

    int up; 
    int down; 
    int left;
    int right; 

    for (int y = 0; y < array.length; y++)
    {
        for (int x = 0; x < array[y].length; x++)
        {

            //if element is on the top left
            if (y == 0 && x == 0)
            {

                up = array[y][x];
                down = array[y + 1][x];
                left = array[y][x];
                right = array[y][x + 1];

            }

            //if element is on bottom right
            else if (y == array.length - 1 && x == array.length - 1)
            {

                up = array[y - 1][x];
                down = array[y][x];
                left = array[y][x - 1];
                right = array[y][x];

            }

            //if element is on top right
            else if(y == 0 && x == array.length - 1)
            {

                up = array[y][x];
                down = array[y + 1][x];
                left = array[y][x - 1];
                right = array[y][x];

            }

            //if element is on bottom left
            else if (y == array.length - 1 && x == 0)
            {

                up = array[y - 1][x];
                down = array[y][x];
                left = array[y][x];
                right = array[y][x + 1];

            }

            //if element is on top 
            else if (y == 0) 
            { 

                up = array[y][x];
                down = array[y + 1][x];
                left = array[y][x - 1];
                right = array[y][x + 1];

            }  

            //if element is on left
            else if (x == 0)
            {

                up = array[y - 1][x];
                down = array[y + 1][x];
                left = array[y][x];
                right = array[y][x + 1];

            }

            //if element is on bottom
            else if(y == array.length - 1)
            {

                up = array[y - 1][x];
                down = array[y][x];
                left = array[y][x - 1];
                right = array[y][x + 1];

            }

            //if element is on right
            else if (x == array.length - 1)
            {

                up = array[y - 1][x];
                down = array[y + 1][x];
                left = array[y][x - 1];
                right = array[y][x];

            }

            //if element is not on an edge 
            else
            {

                up = array[y - 1][x];
                down = array[y + 1][x];
                left = array[y][x - 1];
                right = array[y][x + 1];    

            }

            int element = array[y][x];
            int magnitude = Math.abs(element - up) + Math.abs(element - down) + Math.abs(element - left) + Math.abs(element - right);

            System.out.println();
            System.out.print("#####################################");
            System.out.println();
            System.out.println("Array Element: " + array[y][x]);
            System.out.println("Up: " + up);
            System.out.println("Down: " + down);
            System.out.println("Left: " + left);
            System.out.println("Right: " + right);
            System.out.println("Magnitude: " + magnitude);
            System.out.println("X: " + x);
            System.out.println("Y: " + y);
            System.out.println("Array Length: " + array.length);

            arrayE[y][x] = magnitude;
        }
    }

    return arrayE;

}

public static void outputArray(int[][] array)
{

    for(int row = 0; row < array.length; row ++)
    {

        for (int column = 0; column < array[row].length; column++)
            System.out.printf("%d ", array[row][column]);
        System.out.println();

    }

}

public static void main(String[] args)
{

    int [][] myArray = {{1, 12, 13, 14, 15}, {2, 22, 23, 24, 25}, {3, 32, 33, 34, 35}, {4, 42, 43, 44, 45}, {5, 52, 53, 54, 55}, {6, 62, 63, 64, 65}};

    outputArray(myArray);
    outputArray(buildE(myArray));

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:44:23.890

首先，您的问题是您正在使用`array.length`两个索引。你应该使用`array[0].length`你的`y`坐标。你在很多地方都这样做，这就是为什么它不适用于矩形。

但是，对这类问题采用 OO 方法会更好。试试这个：

```
public class ArrayTest {
    public static enum Direction {
       LEFT, RIGHT, UP, DOWN, SELF;

       public int getValue(int[][] array, int yIndex, int xIndex) {
           switch(this) {
               case LEFT:
                   if (xIndex == 0) return array[yIndex][xIndex];
                   return array[yIndex][xIndex - 1];
               case RIGHT:
                   if (xIndex == array[yIndex].length - 1) return array[yIndex][xIndex];
                   return array[yIndex][xIndex + 1];
               case UP:
                   if (yIndex == 0) return array[yIndex][xIndex];
                   return array[yIndex - 1][xIndex];
               case DOWN:
                   if (yIndex == array.length - 1) return array[yIndex][xIndex];
                   return array[yIndex + 1][xIndex];
               default:
                   return array[yIndex][xIndex];
           }
       }
   }

    public static int[][] buildE(int[][] array) {
        int [][] arrayE = new int[array.length][array[0].length];

        for (int y = 0; y < array.length; y++) {
            System.out.println("y = " + y);
            for (int x = 0; x < array[y].length; x++) {
                arrayE[y][x] = 0;
                for (Direction d : Direction.values()) {
                    arrayE[y][x] += d.getValue(array, y, x);
                }
            }
        }

        return arrayE;
    }

    public static void outputArray(int[][] array) {
        for(int row = 0; row < array.length; row ++) {
            for (int column = 0; column < array[row].length; column++)
                System.out.printf("%d ", array[row][column]);
            System.out.println();
        }
    }

    public static void main(String[] args) {
        int [][] myArray = {{1, 12, 13, 14, 15}, {2, 22, 23, 24, 25}, {3, 32, 33, 34, 35}, {4, 42, 43, 44, 45}, {5, 52, 53, 54, 55}, {6, 62, 63, 64, 65}};

        outputArray(myArray);
        outputArray(buildE(myArray));
    }
} 
```

您是否看到让对象为您完成工作是如何消除大量复制粘贴代码和 if 语句的？教一个对象如何做一项工作，然后说`MyObject.doJob()`而不是让你的主对象做这项工作。代表！

# regex - sed 打印从正则表达式到正则表达式的行

> ID：13177153
> 
> 赞同：5
> 
> 时间：2012-11-01T12:32:37.083
> 
> 标签：regex, bash, sed

我有一个包含以下文本的文件：

```
text
START
This
has
to
be
printed
STOP
more text 
```

现在我希望打印 START 和 STOP 之间的文本。我写了以下内容：

```
cat file | sed '/START/,/STOP/p' 
```

但这似乎并没有做我想要的。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:47:17.287

如果要在开始和停止标志*之间打印，请尝试：*

```
sed -n '/START/,/STOP/ { //!p }' file.txt 
```

结果：

```
This
has
to
be
printed 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T12:35:55.040

```
cat file | sed -n '/START/,/STOP/p' 
```

需要 -n 来抑制 sed 的默认打印。

# iphone - NSUserdefaults可以保存两个同名数组吗

> ID：13177154
> 
> 赞同：0
> 
> 时间：2012-11-01T12:32:53.940
> 
> 标签：iphone, nsuserdefaults

NSUserdefault 可以保存两个同名数组还是替换以前的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:43:01.933

是的，它替换为相同的变量，并且 xcode 不允许在同一类中复制任何对象的相同名称，因此您的应用程序不会编译，直到您没有从类中删除任何一个数组名称...

**更新：-**

在`AppDelegate.h`文件中只声明变量...

```
NSUserDefaults  *userDefaults;
NSMutableArray *yourArray; 
```

后...

`AppDelegate.m`填入`applicationDidFinishLonching:`法_

```
userDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingtblArrayForSearch = [userDefaults objectForKey:@"yourArray"];
    if (dataRepresentingtblArrayForSearch != nil) {
        NSArray *oldSavedArray = [NSKeyedUnarchiverunarchiveObjectWithData:dataRepresentingtblArrayForSearch];
        if (oldSavedArray != nil)
            yourArray = [[NSMutableArray alloc]initWithArray:oldSavedArray];
        else
            yourArray = [[NSMutableArray alloc] init];
    } else {
        yourArray = [[NSMutableArray alloc] init];
    }
    [yourArray retain]; 
```

之后，当您要插入、更新或删除此用户的数据时默认使用波纹管代码...

对于删除记录，请使用以下        

```
[appDelegate.yourArray removeObjectAtIndex:IndexValue];// define integer value here on IndexValue 
```

         或插入记录使用下面..

```
[appDelegate.yourArray addObject:AddValueHere]; 
```

或者用新数组替换整个数组然后写这个

```
appDelegate.yourArray = YourNewArray; 

[appDelegate.yourArray retain]; 
```

之后保存整个数据`synchronize` `NSUserDefaults`，如下所示......         

```
NSData *data=[NSKeyedArchiverarchivedDataWithRootObject:appDelegate.yourArray];
    [appDelegate.userDefaults setObject:data forKey:@"yourArray"];
    [appDelegate.userDefaults synchronize]; 
```

# java - 如何在 java 类中处理和显示 DataDecodeException 的日志

> ID：13177156
> 
> 赞同：1
> 
> 时间：2012-11-01T12:33:00.080
> 
> 标签：java, exception, handler, smooks

我将 csv 文件读取到 java，所以我得到了 DataDecodeException，所以我该如何处理异常，直到我处理 smooks 异常并像这样打印日志“org.milyn.SmooksException：无法过滤源”。但我需要像这样打印日志 org.milyn.javabean.DataDecodeException：无法解码 bean 'customer' 上属性 'telcoId' 的绑定值 'A'。我怎样才能做到这一点？

例外：

```
15:24:18,471 INFO  [STDOUT] [Mobee]- INFO 2012-11-01 15:24:18,471 [] MigrationCustomerHome - CSV File ..C:\Users\PEDDU\AppData\Local\Temp\-3dd9162f-13abbd6ef67--7f5a5802617468662164441.upload
15:24:18,479 FATAL [application] org.milyn.SmooksException: Failed to filter source.
javax.faces.el.EvaluationException: org.milyn.SmooksException: Failed to filter source.
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:91)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:91)
    at javax.faces.component.UICommand.broadcast(UICommand.java:383)
    at org.ajax4jsf.component.AjaxActionComponent.broadcast(AjaxActionComponent.java:55)
    at org.ajax4jsf.component.AjaxViewRoot.processEvents(AjaxViewRoot.java:324)
    at org.ajax4jsf.component.AjaxViewRoot.broadcastEvents(AjaxViewRoot.java:299)
    at org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:256)
    at org.ajax4jsf.component.AjaxViewRoot.processApplication(AjaxViewRoot.java:469)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:251)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:244)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:530)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)
    at org.jboss.seam.web.RewriteFilter.process(RewriteFilter.java:98)
    at org.jboss.seam.web.RewriteFilter.doFilter(RewriteFilter.java:57)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:432)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.milyn.SmooksException: Failed to filter source.
    at org.milyn.delivery.sax.SmooksSAXFilter.doFilter(SmooksSAXFilter.java:86)
    at org.milyn.delivery.sax.SmooksSAXFilter.doFilter(SmooksSAXFilter.java:61)
    at org.milyn.Smooks._filter(Smooks.java:516)
    at org.milyn.Smooks.filterSource(Smooks.java:475)
    at com.manam.mobee.migrationCustomerManagement.MigrationCustomerHome.runSmooksTransform(MigrationCustomerHome.java:271)
    at com.manam.mobee.migrationCustomerManagement.MigrationCustomerHome.migrateCustomers(MigrationCustomerHome.java:100)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.ConversationInterceptor.aroundInvoke(ConversationInterceptor.java:56)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:97)
    at org.jboss.seam.util.Work.workInTransaction(Work.java:47)
    at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:91)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185)
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103)
    at com.manam.mobee.migrationCustomerManagement.MigrationCustomerHome_$$_javassist_seam_10.migrateCustomers(MigrationCustomerHome_$$_javassist_seam_10.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:335)
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:280)
    at org.jboss.el.parser.AstMethodSuffix.getValue(AstMethodSuffix.java:59)
    at org.jboss.el.parser.AstMethodSuffix.invoke(AstMethodSuffix.java:65)
    at org.jboss.el.parser.AstValue.invoke(AstValue.java:96)
    at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:77)
    ... 59 more
Caused by: org.milyn.javabean.DataDecodeException: Failed to decode binding value 'A' for property 'telcoId' on bean 'customer'.
    at org.milyn.javabean.BeanInstancePopulator.decodeDataString(BeanInstancePopulator.java:581)
    at org.milyn.javabean.BeanInstancePopulator.decodeAndSetPropertyValue(BeanInstancePopulator.java:482)
    at org.milyn.javabean.BeanInstancePopulator.bindSaxDataValue(BeanInstancePopulator.java:418)
    at org.milyn.javabean.BeanInstancePopulator.visitAfter(BeanInstancePopulator.java:348)
    at org.milyn.delivery.sax.SAXHandler.visitAfter(SAXHandler.java:389)
    at org.milyn.delivery.sax.SAXHandler.endElement(SAXHandler.java:204)
    at org.milyn.delivery.SmooksContentHandler.endElement(SmooksContentHandler.java:83)
    at org.milyn.csv.CSVReader.parse(CSVReader.java:379)
    at org.milyn.delivery.sax.SAXParser.parse(SAXParser.java:70)
    at org.milyn.delivery.sax.SmooksSAXFilter.doFilter(SmooksSAXFilter.java:75)
    ... 99 more
Caused by: org.milyn.javabean.DataDecodeException: Failed to decode Long value 'A'.
    at org.milyn.javabean.decoders.LongDecoder.decode(LongDecoder.java:52)
    at org.milyn.javabean.BeanInstancePopulator.decodeDataString(BeanInstancePopulator.java:579)
    ... 108 more
Caused by: java.lang.NumberFormatException: For input string: "A"
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Long.parseLong(Unknown Source)
    at java.lang.Long.parseLong(Unknown Source)
    at org.milyn.javabean.decoders.LongDecoder.decode(LongDecoder.java:50)
    ... 109 more 
```

小码：

```
try {
    //smooks Exception
} catch (SmooksException e) {

log.info("Smooks Exception   "+e);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:18:42.173

目前尚不清楚您的目标是什么，但我猜您希望在日志中看到完整的堆栈跟踪，而不仅仅是一行。如果是这种情况，您需要使用`log.error("Some message", e)`而不是`log.info("Some message " + e)`.

---根据OP的评论编辑---

这是一个示例代码，可以为您提供所需的内容。它遍历堆栈跟踪并挖掘出某种类型的第一个原因。当所需类型的原因多次出现并且您对第 2 次、第 3 次等发生感兴趣时，它可以扩展为处理案例：

```
try {
    throw new Exception(
        new Exception(
            new Exception(
                new RuntimeException("This is the one I am interested in", new RuntimeException()))));

} catch (Exception e) {
    dig(e);
}

private void dig(Throwable e) {
    if (e instanceof RuntimeException) {
        log.info("Some message " + e);

    } else if (e != null) {
        dig(e.getCause());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:20:01.237

您将需要创建一个新的自定义异常，然后抛出它。您可以随意命名。

这是一个描述创建自定义异常的过程的示例：http: [//java2novice.com/java_exception_handling_examples/create_custom_exception/](http://java2novice.com/java_exception_handling_examples/create_custom_exception/)

# jquery - jQuery 选择器在点击函数中的行为不符合预期？

> ID：13177158
> 
> 赞同：0
> 
> 时间：2012-11-01T12:33:08.147
> 
> 标签：jquery, jquery-selectors, scope

我在一个页面上有许多 div（包含 ace 编辑器）。编辑器本身应该只在请求时出现，所以我在每个 div 上方添加了一个锚点，并带有一个点击功能来公开它。

问题是，不仅仅是我想要显示的 div 出现，所有这些隐藏的 div 都没有隐藏？任何人都可以发现错误吗？

### HTML

```
<p>Description of block one:</p>
<a class="expand-textarea" style="display: none" href="#">Click to Edit</a>
<div id="pref_id1_cont" style="position:relative; height:250px; width: 100%;">
    <p>Ace Editor 1 goes here!</p>
</div>

<p>Description of block 2: </p> 
<a class="expand-textarea" style="display: none" href="#">Click to Edit</a>
<div id="pref_id2_cont" style="position:relative; height:250px; width: 100%;">
    <p>Ace Editor 2 goes here!</p>
</div> 
```

### JS

```
window.onload = function() {
    $('# pref_id1_cont').hide();
    $('.expand-textarea').show().click(function() {
        $(this).hide();
        $('#pref_id1_cont').show();
    });

    $('#pref_id2_cont').hide();
    $('.expand-textarea').show().click(function() {
        $(this).hide();
        $('#pref_id2_cont').show();
    });
}; 
```

[JSFiddle](http://jsfiddle.net/KTDyr/7/)

任何有关如何以更简单的方式执行此操作的建议也将不胜感激。目前这是我正在更新的一些旧代码，它依赖于许多模板。从长远来看，我希望只动态创建编辑器块，而不是为每个块复制 js。上面的方法只是为了检查我已经得到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:38:13.917

试试这个 -[**演示**](http://jsfiddle.net/KTDyr/10/)

```
window.onload = function() {
    $('[id^=pref_id]').hide();
    $('.expand-textarea').show().click(function() {
        $(this).hide().next('div').show();
    });
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:54:57.570

我会像这样处理这个问题：

[http://jsfiddle.net/KTDyr/14/](http://jsfiddle.net/KTDyr/14/)

HTML

```
<div class="con">
    <p class="expand-textarea-con">        
        Show the following HTML in the OPAC, 
        <a class="expand-textarea" href="#">Click to Edit</a>
    </p>
    <div class="expanded-textarea" style="display:none">
        <p>Ace Editor 1 goes here!</p>
        <p class="expanded-textarea-close">Close</p>
    </div>
</div> 
```

jQuery

```
$(".expand-textarea").click(function() {
    $(this).parent().parent().find('.expanded-textarea').show();
    $(this).parent().hide();

});    

$(".expanded-textarea-close").click(function() {
    $(this).parent().hide();
    $(this).parent().parent().find('.expand-textarea-con').show();

}); 
```

CSS

```
.expand-textarea {
display:inline;
color:blue;
text-decoration:underline;
cursor:pointer;
}

.expanded-textarea {
width: 100%; 
height:250px;    
position:relative;
background:orange;    
}

.expanded-textarea-close {
color:blue;
text-decoration:underline;
cursor:pointer;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:38:24.533

您在所有`a`标签上使用相同的类，因此当单击一个时，每个事件处理程序都会触发。尝试这样的事情：

```
window.onload = function() {
    $('#pref_id1_cont').hide();
    $('#pref_id2_cont').hide();
    $('#pref_id3_cont').hide();

    $('.expand-textarea').click(function() {
        $(this).next("div").show();
    });
};​ 
```

通过使用[`.next()`](http://api.jquery.com/next/)，你可以得到下一个`div`之后的`.expand-textarea`。在这种情况下，它是`pref_id#_cont`元素。

> 获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，则仅当它与该选择器匹配时，它才会检索下一个兄弟。

**[例子](http://jsfiddle.net/KTDyr/11/)**

# ruby-on-rails - Rails - 添加设计用户信息以发布

> ID：13177161
> 
> 赞同：0
> 
> 时间：2012-11-01T12:33:16.100
> 
> 标签：ruby-on-rails, ruby, devise

我有一个网络应用程序，用户可以通过 Devise 注册并发布图片供其他人投票。

我正在尝试将用户用户名附加到他们上传的照片上，但我无法终生弄清楚如何。

我想出了如何通过隐藏字段将 Devise user_id 输入表单，但用户名只是在数据库中显示为空白字段（不是`NULL`，只是空白）。

如何从 Devise 获取用户名而不是 user_id 来发布？

我有所有合适的`belongs_to`和`has_many`模型。

**表格。**

```
<% if current_user %>
    <%= simple_form_for Picture.new, :remote => true, :html => { :class => "form-horizontal" } do |f| %>
    <%= f.input :title %>
    <%= f.input :image, :as => :image_preview, :label => false, :input_html => {:preview_version => :thumb} %>
      <div class="control-group"> 
        <div class="controls">
          <a href="#" class="btn" id="file">Choose a File</a>
        </div>
      </div>
      <%= f.input :desc, :as => :text, :input_html => { :cols => 20, :rows => 3 }, :label => 'Description' %>
      <%= f.hidden_field :user_id %>
      <%= f.hidden_field :username %>
      <div class="control-group">
        <div class="controls">
          <div class="btn-group">
            <%= f.submit "Add Picture", :class => 'btn btn-primary' %>
            <button class="btn btn-danger" id="form-cancel">Cancel</button>
        </div>
      </div>
    <% end %> 
```

**图片控制器.rb**

```
def create  
  #This line inserts the user_id into the database
  @picture = current_user.pictures.create!(params[:picture])  
  @picture.save  
    respond_to do |format|  
      format.html { redirect_to pictures_url, notice: 'Thanks for your picture!' }  
      format.js  
    end  
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:49:01.617

您不需要隐藏字段。使用隐藏字段还会增加安全风险，用户可以上传图片并使其看起来像是由另一个用户上传的。要将当前用户的 id 和用户名添加到图片中，您需要做的就是修改您的控制器，如下所示：

```
@picture = Picture.new(params[:picture])
@picture.user_id = current_user.id
@picture.username = current_user.username # assuming the user model has a username field
@picture.save 
```

尽管更好的方法是将用户的 id 与图片一起存储，并确保图片模型具有`belongs_to :user`并且用户模型具有`has_many :pictures`，而不是将用户名与图片一起存储。当您想获取用户名时使用此方法，您可以通过以下方式访问它`picture.user.username`

# ios - 通过 https 进行 HTTP 直播

> ID：13177162
> 
> 赞同：1
> 
> 时间：2012-11-01T12:33:17.643
> 
> 标签：ios, apache, https

我只是在理解我是否可以让 Apple`HTTP`直播正常工作时遇到问题`HTTPS`。

我想在保存分段媒体文件的 apache 服务器**和 ios 客户端****之间建立 https 连接**，能够以这种方式流式传输内容。我在有证书和没有证书的情况下都试过了（包括中间证书），但没有任何效果。当我使用http时一切都很好，但是如果我切换到https它就不起作用了。**`SSLCertificateChainFile`**

 **有人有为此运行的 linx 配置吗？**

# android - Android（4.1版）模拟器

> ID：13177163
> 
> 赞同：0
> 
> 时间：2012-11-01T12:33:18.717
> 
> 标签：android, emulation, avd

最近我决定开始为安卓开发移动应用程序。我安装了 4.1 - 版本的 Android SDK。

当我启动模拟器时，我只是黑屏，没有任何启动。我选择了不同的设置，但没有其他任何事情发生。我的电脑运行的是 Ubuntu 10.04、256 MB 内存、1Ghz 处理器、32 MB 显卡。

我知道这几天这不是普通的电脑。所以我注意到当我在 Eclipse indigo ram 上制作新的 AVD 时，内存设置为 512MB，所以这是我的问题：

这是问题吗，如果是，请帮我解决它？（如果我安装不同版本的android，一切都会好起来的）。

给我解决它的建议。我正在祈祷启动 AVD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:53:02.183

看看推荐的[系统要求](http://developer.android.com/sdk/index.html)。256 MB RAM 太低了。说真的，我的手机有更多内存 :)

# javascript - 加载页面时出现多个花式框对话框。只显示最后一个fancybox

> ID：13177174
> 
> 赞同：0
> 
> 时间：2012-11-01T12:33:59.793
> 
> 标签：javascript, fancybox, onload

我正在尝试在页面加载时显示多个花式对话框。我可以让一个工作，但我如何让javascript循环停止并且在用户关闭第一个fancybox之前不打开另一个对话框？现在，我只看到第二个对话框。我不知道一开始我可能需要加载多少条花式框消息。谢谢！

这是javascript代码。（更新）

```
$(document).ready(
    if("0x000000000112009b"!=""){  
        tbRowId="0x000000000112009b".split(",");  
        width="300".split(",");  
        height="300".split(",");  
        $.fancybox({  
            "autoDimensions":"false",  
            "width":width[0],  
            "height":height[0],  
            "transitionIn":"none",  
            "transitionOut":"none",  
            "modal":false,  
            "hideOnOverlayClick":false,  
            "hideOnContentClick":false,  
            "enableEscapeButton":false,  
            "overlayShow":true,  
            "showCloseButton":true,  
            "href":"announce_popup.html?sid=AppjfrfijfdfHvXC&tbRowId="+tbRowId[0],  
            "onClosed":function(){  
                alert("start");  
                $.fancybox({  
                    "autoDimensions":"false",  
                    "width":width[1],  
                    "height":height[1],  
                    "transitionIn":"none",  
                    "transitionOut":"none",  
                    "modal":false,  
                    "hideOnOverlayClick":false,  
                    "hideOnContentClick":false,  
                    "enableEscapeButton":false,  
                    "overlayShow":true,  
                    "showCloseButton":true,  
                    "href":"announce_popup.html?sid=AppjfrfijfdfHvXC&tbRowId="+tbRowId[1]  
                });  
                alert("end.");  
            }  
        });  
    }  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:36:53.137

一次只能打开一个 fancyBox 实例。如果您`$.fancybox({..});`多次调用，则只会打开最后一个。您可以使用“afterClose”回调打开下一个。例子：

```
$.fancybox.open([{
    href : 'http://fancyapps.com/fancybox/demo/1_b.jpg',
    title : '1st title'
}
], {
    afterClose : function() {
        //There you can decide if you need to open next one
        $.fancybox.open(
        {
            href : 'http://fancyapps.com/fancybox/demo/2_b.jpg',
            title : '2nd title'
        });
    }
});​ 
```

看看在行动 - [http://jsfiddle.net/GE7hn/](http://jsfiddle.net/GE7hn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:12:09.623

我不完全确定您要做什么，但是如果您希望用户循环浏览每条消息，您可以提供如下所示的 rel 标签来创建组：

```
<a class="grouped_elements" rel="group1" href="image_big_1.jpg">
<img src="image_small_1.jpg" alt=""/></a>
<a class="grouped_elements" rel="group1" href="image_big_2.jpg"><src="image_small_2.jpg" alt=""/></a>   
<a class="grouped_elements" rel="group2" href="image_big_3.jpg"><img src="image_small_3.jpg" alt=""/></a> 
<a class="grouped_elements" rel="group2" href="image_big_4.jpg"><img src="image_small_4.jpg" alt=""/></a> 

/* This will create two galleries */

$("a.grouped_elements").fancybox(); 
```

我提供的代码直接来自 fancybox 文档，我建议检查一下。如果您有 javascript 创建消息和链接，那么创建组将很容易。

如果您需要在页面加载时显示对话框，可以通过以下方式轻松完成

```
$('.your_group_class').fancybox().trigger('click'); 
```

希望我有所帮助。

# php - htmlspecialchars + addlashes，有什么意义吗？

> ID：13177176
> 
> 赞同：0
> 
> 时间：2012-11-01T12:34:02.347
> 
> 标签：php, security, htmlspecialchars, addslashes

我正在尝试清理要保存在数据库中的字符串。我采取的第一步是使用`addslashes()`，但后来我意识到它并没有解决很多安全问题，所以我添加了`htmlspecialchars()`，现在我有了这行代码：

```
$val=htmlspecialchars(addslashes(trim($val))); 
```

`addslashes()`但是后来我想知道在将由 处理的字符串上使用是否有任何意义`htmlspecialchars()`，因为如果我没记错的话，后者将“删除”任何会导致问题的元素。

特别是，我想知道这是否会使服务器在没有任何实际需要的情况下工作两次。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T12:39:09.813

你完全错了。`addslashes()`是没有数据库转义功能的，使用你的数据库访问扩展自带的，比如`mysqli_real_escape_string()`.

`htmlspecialchars()`完整在这里没有意义。仅当您想在 HTML 中放置字符串时才使用它 - 这应该是在您输出内容时，而不是在将其存储在数据库中时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:41:57.100

将字符串保存到数据库时，我不会使用其中任何一个。

*   `addslashes()`仅转义引号字符和反斜杠字符 (\)。这不足以避免 SQL 注入，因为 DBMS 可能会使用其他必须转义的特殊字符。避免 SQL 注入的最佳方法是使用[PHP 数据对象](http://php.net/manual/en/book.pdo.php)及其对绑定参数的支持，这样您就可以将参数值完全排除在 SQL 字符串之外。如果由于某种原因不能选择 PDO，您至少应该使用特定于数据库的转义功能，例如，[`mysqli_real_escape_string`](http://www.php.net/manual/en/mysqli.real-escape-string.php)如果您使用的是 MySQL，以确保所有必要的字符都被转义。
*   `htmlspecialchars()`用于将非 HTML 字符串合并到 HTML 页面中；它转义对 Web 浏览器很重要的字符，例如尖括号，并且与数据库无关。假设您没有在数据库中生成和存储完整的 HTML 文档，则不应在将值放入数据库之前调用此函数。存储用户实际输入的内容，并在您*从*`htmlspecialchars()`数据库中检索值并将其实际放入某些 HTML 输出时调用。

# c# - web.config 配置错误

> ID：13177178
> 
> 赞同：1
> 
> 时间：2012-11-01T12:34:06.423
> 
> 标签：c#, asp.net, smtp, vcf-vcard

一切都应该很好，但是我的 web.config 给了我这个奇怪的错误。

如果我确定 web.config 中的字符串列表是好的，我怎么能得到这个错误？

**错误：**
配置错误说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

```
Parser Error Message: Unrecognized configuration section stringlist.

Source Error: 

Line 6:     <connectionStrings/>
Line 7:     
Line 8:         <stringlist key="SmtpServers">
Line 9:             <stringlistItem value="smtp.transip.nl" />
Line 10:            <stringlistItem value="localhost" />

Source File: C:\local\vCardGenerator.Website\vCardGenerator.Website\web.config    Line: 8 
```

**网络配置：**

```
 <stringlist key="SmtpServers">
        <stringlistItem value="smtp.transip.nl" />
        <stringlistItem value="localhost" />
    </stringlist> 
```

**班级：**

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Configuration;
using System.Net.Mail;
using System.Net.Configuration;
using Compulutions.Net;
using Compulutions.Web;
using System.IO;
using System.Web.Mail;
using System.Collections.Generic;
using System.ComponentModel;
using System.Web.Services.Description;

// System.Web.Mail.SmtpMail.SmtpServer
// using System.Web.Mail.SmtpClient;

namespace vCardGenerator.Website.Masterpage
{
    public class SendvCard
    { //
        public void MailvCard(string recipient, string filename)
        {
        Mailer smtp = new Mailer("smtpServers");

        /* SMTP - port 25 */

        smtp.AddAttachment(filename); //.vcf file Path
        smtp.FromAddress = new MailAddress("someone@domain.nl");
        smtp.Subject = "vCard";
        smtp.MailBody = "There is a vCard waiting for you in the attachment!";
        smtp.AddRecipient(recipient);

#if !DEBUG
        try
        {
#endif
            smtp.SendMail();
#if !DEBUG
        }

        catch (Exception ex)
        {
            Response.Write("Exception Occured:   " + ex);
                //Responds.Write("Sending vCard Failed, Please try again!")
        }
#endif
        }
    }
} 
```

类似问题不符合我的描述。我创建了一个 SendvCard.cs 实例并调用了类中的 send 方法（MailvCard）

**aspx.cs 本身：**

```
 //  Calls the method at the class
            smtp.MailvCard("user@domain.com", "C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");
        } 
```

如果需要，愿意提供任何其他/更多信息。

真挚地

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:10:29.120

您看到错误是因为您创建了一个新的 Section (stringlist) 而没有声明它。您必须首先在 web.config 的 configSections 区域中声明一个部分，如下所示：

```
<configSections>
    <section name="stringlist" type="System.Configuration.NameValueSectionHandler,System"/>
</configSections> 
```

将您的字符串列表放在下面的配置根目录中：

```
 <stringlist key="SmtpServers">
    <stringlistItem value="smtp.transip.nl" />
    <stringlistItem value="localhost" />
  </stringlist> 
```

有关示例以及如何访问这些值，请参阅此链接：[Customizing SectionGroups and Sections in Web.config](http://www.codeproject.com/Articles/7266/Customizing-SectionGroups-and-Sections-in-Web-conf)

此外，请记住，有许多明显更好的方法可以实现这一目标。例如 Rasedul.Rubel 建议的 mailSettings。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:53:21.433

```
//you can try by using the following smtp configuration in web.config

<system.net>
    <mailSettings>
      <smtp>
        <network host="SMTPServer" port="" userName="username" password="password" />
      </smtp>
    </mailSettings>
  </system.net>
  <appSettings>
    <add key="Email" value="you@yourwebsite.com"/>
  </appSettings>

//where host=your server name, port=server machines port number

//and in code behind write the code as follows:

       string fromEmail = ConfigurationManager.AppSettings["Email"].ToString();
    string toEmail = txtEmail.Text;
    MailMessage message = new MailMessage(fromEmailAddress, toEmailAddress);
    message.Subject = txtSubject.Text;
    message.Body = txtBody.Text;

    SmtpClient smtp = new SmtpClient();
    smtp.Send(message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:24:08.200

```
Action Mailer can be used to send email. email can be sent with attachment without using form. 
web config configuration for the smtp:

  <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network">
        <network host="smtp.gmail.com" port="25" userName="username" password="password" defaultCredentials="false" enableSsl="true"/>
      </smtp>
    </mailSettings>
  </system.net>

 configure smtp in IIS

attachment can be done using Attachments.Inline["" + fileName] = System.IO.File.ReadAllBytes(filePath);

for more information see the link below:
http://ratiyaranmal.blogspot.com/2012/06/send-email-in-mvc-using-actionmailer.html 
```

# linux - 什么是shell命令，它可以列出用于下载的当前目录的大小？

> ID：13177182
> 
> 赞同：0
> 
> 时间：2012-11-01T12:34:30.900
> 
> 标签：linux, shell

```
watch -n 3 du -sh >> log 
```

该命令可能每 3 秒更新一次值，但文件 log 中只存储当前目录的最新大小，**旧值被简单覆盖**，那么如何保留旧值，并将其存储到名为 log 的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:49:31.463

`watch`不会覆盖文件。事实上，不可能在重定向过程中覆盖文件。

所发生的`watch`只是保存连续屏幕之间的差异（使用 ANSI 代码）。它的设计初衷不是用来记录某些东西（因此无论如何它都被称为“手表”）。

用于`xxd`查看日志文件的真实内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:58:10.470

也许这可能会做更多你想要的：

```
while sleep 3
do
  du -sh
done >> log &
tail -F log 
```

# c# - 获取从调度程序计时器事件处理程序返回的值？

> ID：13177183
> 
> 赞同：1
> 
> 时间：2012-11-01T12:34:36.473
> 
> 标签：c#, wpf, dispatchertimer

我如何在调用位置获取从事件处理程序返回的值？我想做的是这样的

```
 ""  int a = timer.Elapsed += new ElapsedEventHandler((sender, e) => 
                on_time_event(sender, e, draw, shoul_l));   ""

                timer_start = true;
                timer.Interval = 2000;
                timer.Start();
                timer.Elapsed += new ElapsedEventHandler((sender, e) => 
                on_time_event(sender, e, draw, shoul_l));

                private int on_time_event(object sender, ElapsedEventArgs e,  
                DrawingContext dcrt, System.Windows.Point Shoudery_lefty)
                 {
                  .
                  .
                  .
                  .
                   return a_value;
                  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:36:56.537

将值放在启动它的类的成员变量上。如果需要使用锁来允许安全的多处理。由于这是 WPF，因此使该类遵守 INotifyPropertyChanged 并将其绑定到屏幕上的控件。

编辑（根据OP的要求）

我会使用后台工作人员而不是计时器，但概念是相同的（小心不要更新计时器中的 GUI 控件，但 BW 旨在允许这样做）。

```
public partial class Window1 : Window,  INotifyPropertyChanged
{
    BackgroundWorker bcLoad = new BackgroundWorker();
    private string _data;

    public string Data 
    { 
       get { return _data;} 
       set { _data = value; OnPropertyChanged("Data"); }
    }

    public Window1()
    {
        InitializeComponent();

        bcLoad.DoWork             += _backgroundWorker_DoWork;
        bcLoad.RunWorkerCompleted += _backgroundWorker_RunWorkerCompleted;
        bcLoad.RunWorkerAsync();
    }
    protected virtual void OnPropertyChanged( string propertyName )
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler( this, new PropertyChangedEventArgs( propertyName ) );
        }
    }
 } 
```

这是工作发生的地方

```
void _backgroundWorker_DoWork( object sender, DoWorkEventArgs e )
{
   e.Result = "Jabberwocky"; 
} 
```

这里是您为 GUI 安全设置值的地方。

```
void _backgroundWorker_RunWorkerCompleted( object sender, RunWorkerCompletedEventArgs e )
{
    Data = (string) e.Result;
} 
```

有关控件的另一个示例，请参见我的博客：[C# WPF: Threading, Control Updating, Status Bar and Cancel Operations Example All In One](http://omegacoder.com/?p=642)

# wpf - WPF Grid Column 未正确对齐图像

> ID：13177187
> 
> 赞同：0
> 
> 时间：2012-11-01T12:34:44.120
> 
> 标签：wpf, grid, alignment

下面网格视图的最后一列没有垂直显示在中心，尽管第一个图像是并且它们使用相同的查找方法来查找图像源（我拥有的资源字典对象定位器类）。最终图像 (CurrencyImg) 的图像底部与行的中间对齐，因此它向上延伸到视野之外并且不会填满行的下半部分。使困惑！

```
<Grid Name="grdCustomer" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300" />
                            <ColumnDefinition Width="220" />
                            <ColumnDefinition Width="50" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="30" />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="18"/>
                        </Grid.RowDefinitions>

                        <Image Source="{y:ImageStaticResource {Binding IconString}}" Margin="0,0,0,0" VerticalAlignment="Center" ></Image>
                        <TextBlock Grid.Column="1" Text="{Binding CustomerDesc}" VerticalAlignment="Center" />
                        <TextBlock Name="tbTxnCount" Grid.Column="2" Text="{Binding TxnCount}" VerticalAlignment="Center" />
                        <TextBlock Name="tbAmount" Style="{StaticResource myCustStyleColor}" Grid.Column="3" Text="{Binding Amount}" HorizontalAlignment="Right" VerticalAlignment="Center"  />
                        <TextBlock Name="tbCurrency" Grid.Column="4" Text="{Binding Currency}" HorizontalAlignment="Right" VerticalAlignment="Center"  />
                        <Image Name="imgCurrency"  Grid.Column="5" Margin="0,0,0,0"  Source="{y:ImageStaticResource {Binding CurrencyImg}}" VerticalAlignment="Center" />
                    </Grid> 
```

# sphinx - 狮身人面像空索引

> ID：13177191
> 
> 赞同：0
> 
> 时间：2012-11-01T12:34:52.413
> 
> 标签：sphinx

我正在尝试从表**域**创建索引。当我得到 10 个属性时，一切正常。当我添加第 11 个时，索引器返回：

```
collected 1629494 docs, 0.0 MB 
```

配置：

```
#...
sql_attr_uint       = did
sql_attr_string     = url
sql_attr_uint       = zone_id
sql_attr_uint       = first_letter
sql_attr_uint       = category_id
sql_attr_uint       = is_parking
#sql_attr_uint      = data3
sql_attr_uint       = views
sql_attr_uint       = data1
sql_attr_uint       = data2
sql_attr_uint       = is_top_site
#... 
```

当我删除 11 个属性中的任何一个时，一切正常。有某种限制吗？

# sql - T-SQL 将秒格式化为 HH:MM:SS 时间

> ID：13177192
> 
> 赞同：7
> 
> 时间：2012-11-01T12:34:54.413
> 
> 标签：sql, tsql, time, format, seconds

是否有任何棘手的方法来格式化秒，如小时：分钟：秒。例如，

> 3660

秒将显示为

> 01h 01m 00s

或者

> 01:01:00

我知道这样做的标准方法：

1.  将所有秒除以 3600 得到小时
2.  将剩下的秒数除以 60 得到分钟
3.  剩下的就是秒

我遇到了以下问题：

1.  我无法创建执行此操作的单独函数。

2.  我的代码使用了几个 CTE。因此，只能使用 CTE 声明变量。

3.  我无法使用标准解决方案，因为我的结果会比一天大 -[如何使用 T-SQL 将秒转换为 HH:MM:SS](https://stackoverflow.com/questions/1262497/how-to-convert-seconds-to-hhmmss-using-t-sql)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T12:39:57.063

```
SELECT RIGHT('00'+CONVERT(VARCHAR(10),Seconds/3600),2)  
    +':' 
    + RIGHT('00'+CONVERT(VARCHAR(2),(Seconds%3600)/60),2) 
    +':' 
    + RIGHT('00'+CONVERT(VARCHAR(2),Seconds%60),2) AS [HH:MM:SS] 
FROM table1 
```

结果：

| HH:MM:SS |
| --- |
| 01:01:00 |
| 01:03:20 |
| 01:10:00 |
| 00:10:00 |
| 00:01:00 |
| 00:00:30 |
| 24:00:00 |
| 24:06:40 |

[看到这个 SQLFiddle](http://sqlfiddle.com/#!18/8a5e8/21)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-09T20:33:35.280

试试这个：

```
SELECT CONVERT(TIME(0), DATEADD(SS,***seconds***,0),108) as 'FieldName' 
```

将返回`HH:MM:SS`

例子：

> 46800 秒 = 下午 1:00
> 
> 字段名 = 13:00:00

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T14:31:25.737

```
SELECT cast(seconds/3600 as varchar(6)) +
right(cast(dateadd(second, seconds,0) as time(0)), 6)
FROM <yourtable> 
```

# ios - 在 UICollectionView 中以编程方式选择项目

> ID：13177201
> 
> 赞同：17
> 
> 时间：2012-11-01T12:35:23.043
> 
> 标签：ios, objective-c, uicollectionview

我有一个`UICollectionViewController`：

```
- (NSInteger)collectionView:(UICollectionView *)collectionView 
     numberOfItemsInSection:(NSInteger)section {
    return [self.pageTastes count];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView  
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath {
     CellTasteCollectionView *cell = 
       [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" 
                                                 forIndexPath:indexPath];
     Taste *taste = [self.pageTastes objectAtIndex:indexPath.item];       
     [[cell imageView] setImage:taste.image];
     [cell setObjectId:taste.objectId];    
     return cell;
} 
```

有用。我有这个`viewDidLoad`，允许用户选择多个项目：

```
[self.collectionView setAllowsMultipleSelection:YES]; 
```

我想要的是，第一次加载 CollectionView 时，一些项目会根据它们的`objectId`in 以编程方式被选中`CellTasteCollectionView`。

以下是我的做法：

```
- (void)collectionView:(UICollectionView *)collectionView 
         didSelectItemAtIndexPath:(NSIndexPath *)indexPath{

    Taste *taste = [self.pageTastes objectAtIndex:indexPath.item];
    printf("%s\n", [taste.objectId UTF8String]);
} 
```

当用户单击项目时调用它 - 这不是我想要的：我希望在`UICollectionView`加载时自动选择项目。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T13:13:41.757

我认为您在[UICollectionView 类参考](https://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html)中缺少此方法：

```
- (void)selectItemAtIndexPath:(NSIndexPath *)indexPath 
                     animated:(BOOL)animated 
               scrollPosition:(UICollectionViewScrollPosition)scrollPosition 
```

如果要进行多项选择，可以多次使用此方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-10-17T07:02:49.760

`didSelectItemAt`如果您以`selectItem`编程方式调用，则不会调用。您应该在它之后手动调用该方法。

```
self.collectionView.selectItem(at: IndexPath(item: 0, section: 0), animated: true, scrollPosition: .bottom)
self.collectionView(self.collectionView, didSelectItemAt: IndexPath(item: 0, section: 0)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-06T04:56:16.067

对于正确的行为，连续调用 4 个函数：

```
// Deselect
self.collection.deselectItem(at: previousPath, animated: true)
self.collectionView(self.collection, didDeselectItemAt: previousPath)

// Select
self.collection.selectItem(at: path, animated: true, scrollPosition: .centeredVertically)
self.collectionView(self.collection, didSelectItemAt: path) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-17T07:15:35.283

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self.districtTableview selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionTop];
[self tableView:weakSelf.districtTableview didSelectRowAtIndexPath:indexPath]; 
```

我在tableview中使用了上述方法，并且有效。

# xcode - 将 ~/.gitconfig 选项 [push.default] 更新为“simple”后，无法在 XCode 4.5.1 中创建快照

> ID：13177203
> 
> 赞同：2
> 
> 时间：2012-11-01T12:35:31.470
> 
> 标签：xcode, git, snapshot

我能够在 XCode 4.5.1 中为我的项目创建快照。但现在同一个项目一直在告诉我：

```
Unable to create a snapshot
error: Malformed value for push.default: simple
error: Must be one of nothing, matching, tracking or current.
fatal: bad config file line 21 in /Users/oppih/.gitconfig 
```

我记得今天我之前把另一个项目推到 github 上时，我收到了这样的警告提示：

```
warning: push.default is unset; its implicit value is changing in 
Git 2.0 from 'matching' to 'simple'. To squelch this message 
and maintain the current behavior after the default changes, use: 

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use: 

  git config --global push.default simple 
```

所以我用谷歌搜索了一下，不久前发现了这个问题：[13148066](https://stackoverflow.com/questions/13148066/warning-push-default-is-unset-its-implicit-value-is-changing-in-git-2-0 "警告：push.default 未设置； 它的隐含价值在 Git 2.0 中正在发生变化")，并得到了解决，我使用了`git config --global push.default simple`因为“这是一个更直观的行为，这就是为什么默认值被更改为这个的原因。”

我认为我对 XCode 的问题必须与此 git 选项更新有关。

回到 XCode，我没有选择在我的 XCode 项目中设置 git repo，而是使用快照作为备份代码的一种方式。我认为 XCode 的快照中的 git 有一些技巧，我无法弄清楚。现在我想知道是否有人可以告诉我如何在 XCode 中重新启用快照（而不是更改 .gitconfig [push.default] 选项）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:06:19.020

我设法解决了我自己的问题。有关详细信息，请参见[问题 10449374](https://stackoverflow.com/questions/10449374/override-git-from-xcode-with-homebrew-version)。

这种情况下的主要问题是：Xcode 只需在 /Applications/Xcode.app/Contents/Developer/usr/bin 中安装（连同命令行工具）它自己的 git 版本。

不知何故，Xcode 还硬编码它会使用自己的工具版本（例如 git）。而且（我不知道为什么）Xcode 的“快照”功能与 git 有一些集成。

所以当我：

1.  通过自制软件安装了新版本的 git，
2.  更新 ~/.gitconfig 中的新 push.default 选项，
3.  想要在 Xcode 项目中创建快照

然后我会遇到我上面描述的问题。

这是我的解决方案：

1.  切换到 Xcode 目录：

    `cd /Applications/Xcode.app/Contents/Developer/usr/bin`

2.  像这样重命名 Xcode 的 git：

    `sudo mv ./git ./git-xcode-usr-bin`

3.  链接通过自制软件安装的我自己的 git：

    `sudo ln -s /usr/local/bin/git ./git`

我做了同样的事情`/usr/bin/git`

```
sudo mv /usr/bin/git /usr/bin/git-xcode-usr-bin
sudo ln -s /usr/local/bin/git /usr/bin/git 
```

这将实际链接`/usr/local/Cellar/git/1.8.0/bin/git`（因为我目前使用的是 git 1.8.0）

有点棘手，以后升级自制的git就得更新链接了。它确实适用于 Xcode 的快照和新的 push.default 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:45:46.383

好吧，您可以尝试通过此答案中提供的方法为 Xcode 指定另一个 .gitconfig 文件：[如何指定自定义全局 gitconfig 路径？](https://stackoverflow.com/questions/3592351/how-can-i-specify-custom-global-gitconfig-path#3595258).

例如，在为 Xcode 应用程序创建了 ~/.xcode_home 作为新的 $HOME 之后，您可以使用以下 shell 脚本来启动 Xcode：

```
HOME=$HOME/.xcode_home open "$(xcode-select --print-path)/../.." 
```

虽然它对用户不太友好......无论如何，您可能想检查一下：[在 OS X 中设置环境变量？](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x). 但请注意，全局覆盖 $HOME 可能**不是**一个好主意。

# css - 不同类/标签的相同css属性

> ID：13177207
> 
> 赞同：3
> 
> 时间：2012-11-01T12:35:46.430
> 
> 标签：css, class

当我想将相同的属性应用于不同的类/标签时，我会这样做：

```
#wrapper .content input[type=radio], .content input[type=checkbox]{
     border:none;
} 
```

或者：

```
#wrapper .content input[type=radio],input[type=checkbox]{
     border:none;
} 
```

或者：

```
#wrapper .content .block1, .block2{
     background:#FFF;
} 
```

这种用法有错吗？您会推荐一个网站或（电子）书或类似的网站来真正使用 css 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:37:49.393

在不知道 HTML 的情况下，除了最后一个可能是正确的。

您需要调用 block2 的 id 或类，所以它应该是：

```
#wrapper .content .block1, .block2 {
     background:#FFF;
} 
```

但是假设`.block2`在同一个`.content`div 中，那么您也可以更具体地执行以下操作：

```
#wrapper .content .block1, #wrapper .content .block2 {
     background:#FFF;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:42:51.513

通过使用

```
 #wrapper .content input[type=radio],input[type=checkbox]{
     border:none;
} 
```

您实际上是在说：具有 ID 包装器的元素，具有类内容和类型 radio 的输入类型应用以下内容： (border:none) ，对于页面上具有输入类型复选框的每个输入应用 (border:none) 。

逗号后面的所有内容都是从零开始的，不考虑前面提到的条款。

但正如 Andy 所说，如果没有 HTML 示例，我们可以做的就是解释它是如何解释的。（看看 block2 和 .block2 之间的区别。Block2 说有一个元素`<block2>`， .block2 说有一个元素（例如）`<fieldset class="block2"> </fieldset>`

**当我想将相同的属性应用于不同的类/标签时，我会这样做：**

要回答这个问题，如果您只想指定一个 class ，则无需明确提及 ID。你也可以这样做

`.content input[type=radio],input[type=checkbox]{ border:none; }`

这没有错误，但在这种情况下，它将应用于该类的所有元素。因此，假设您有 2 个字段集和一个类 .content ，那么将应用两个相同的 css 值。

所以如果你想指定哪个字段集，你应该使用封装元素的ID，后跟类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T08:54:47.587

我想

```
 #wrapper .content input[type=radio],input[type=checkbox]{
     border:none;
} 
```

最适合你

您实际上是在说：具有 ID 包装器的元素，具有类内容和类型 radio 的输入类型应用以下内容： (border:none) ，对于页面上具有输入类型复选框的每个输入应用 (border:none) 。

为此，您希望所有复选框都没有边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:40:05.930

您可以通过用逗号分隔它们来为不同的类/标签赋予相同的 css 属性。

前任。

```
.abc, .kbc, .xyz{

font-weight:bold;
} 
```

# android - 在 phonegap 中连接到服务器不成功

> ID：13177211
> 
> 赞同：4
> 
> 时间：2012-11-01T12:35:51.610
> 
> 标签：android, cordova, android-intent

我正在使用 phonegap，当我尝试加载 html 文件时收到此错误

> 与服务器的连接不成功。（文件：///android_asset/www/index.html）

我的代码：

```
import org.apache.cordova.DroidGap;

import android.os.Bundle;

import android.view.Menu;

public class LoadHtml extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.setIntegerProperty("loadUrlTimeoutValue", 60000);
        super.loadUrl("file:///android_asset/www/index5.html");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_first, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:04:23.937

问题可能是由于模拟器或设备的速度，网络太慢而无法在默认时间内完成通信。

使用 **super.setIntegerProperty("loadUrlTimeoutValue", 60000);** 在调用 **super.loadUrl("file:///android_asset/www/index.html");**

它为完成通信设置了 60 秒的超时时间。

这个对我有用。

# c++ - 在 Windows 8 中禁用 CUDA 的 TDR

> ID：13177214
> 
> 赞同：3
> 
> 时间：2012-11-01T12:35:57.237
> 
> 标签：c++, cuda

我最近发现了[这篇](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/03/06/disabling-tdr-on-windows-8-for-your-c-amp-algorithms.aspx)关于 C++AMP 的文章，您可以在其中临时禁用 Windows 8 中的 TDR。有没有办法将此解决方案应用于 CUDA？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:03:59.537

可以禁用 Windows WDDM 驱动程序超时检测和恢复机制，或者可以将超时延长到大于默认的 2 秒。超时检测和恢复记录在[MSDN](http://msdn.microsoft.com/en-us/windows/hardware/gg487368)上。

（*已编辑：上面的链接已失效。它提供的信息现在可以在[https://docs.microsoft.com/en-us/windows-hardware/drivers/display/tdr-registry-keys](https://docs.microsoft.com/en-us/windows-hardware/drivers/display/tdr-registry-keys)*获得）

Nsight Visual Studio Edition Nsight.Monitor 具有禁用或增加超时的设置。否则，您可以使用 MSDN 文章中的注册表项。确保在进行更改后重新启动计算机。

我建议您在完全禁用 TDR 之前增加 TdrDelay。

Tesla GPU 可以使用没有超时看门狗的 Tesla Compute Cluster 驱动程序。

# javascript - 在同一页面上使用两个相同的 jQuery 插件（Kwicks）

> ID：13177218
> 
> 赞同：0
> 
> 时间：2012-11-01T12:36:18.957
> 
> 标签：javascript, jquery, kwicks

我在一个网站上使用 jQuery 插件“Kwicks”并且有一些冲突。该插件在导航方面工作正常，但我想为一个单独的、较小的导航（仍然使用 Kwicks）在社交媒体上做同样的事情页面顶部。我已经尝试了像我这样的新手可以做的所有事情，但仍然无法让第二个 Kwicks nav 发挥作用。

这是网站：[http ://www.webexplosive.com/accu1](http://www.webexplosive.com/accu1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:47:17.277

首先，将您的 javascript 文件包含在页面的 head 部分中，并且只需要一次。

```
<head>
 <script src='js/jquery-1.8.1.min.js' type='text/javascript'></script>
 <script src='js/jquery.easing.1.3.js' type='text/javascript'></script>
 <script src='js/jquery.kwicks.js' type='text/javascript'></script>
</head> 
```

其次，您对菜单的引用是相同的，因此插件会感到困惑并且只会得到一个（取决于插件如何处理选择器）

所以要解决这个问题，给你 ul 标签一个 id 属性，如 menu1 和 menu2 （唯一）

```
<ul class='kwicks1 kwicks-vertical' id='menu1'>
    ...
</ul>
<ul class='kwicks kwicks-horizontal' id='menu2'>
   ...
</ul>

<script>
$(document).ready(function () {
    $('#menu1').kwicks({
        size: 125,
        maxSize: 250,
        spacing: 2,
        behavior: 'menu',
            easing: 'easeOutBounce',
            isVertical: true
    });
    $('#menu2').kwicks({
                size: 125,
                maxSize : 250,
                spacing : 2,
                behavior: 'menu' ,
                easing: 'easeOutBounce'
            });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:47:41.273

jsFiddle：http: [//jsfiddle.net/jphellemons/CXu4n/](http://jsfiddle.net/jphellemons/CXu4n/)

```
$('.kwicks-horizontal').kwicks({
    size: 125,
    maxSize : 250,
    spacing : 2,
    behavior: 'menu' ,
    easing: 'easeOutBounce' ,
    isVertical: false
});
$('.kwicks-vertical').kwicks({
    size: 200,
    maxSize : 300,
    spacing : 1,
    behavior: 'menu' ,
    easing: 'easeOutBounce' ,
    isVertical: true
}); 
```

# php - 从 5.1 更新到 5.5 后 PDO MySQL 错误 2013

> ID：13177224
> 
> 赞同：0
> 
> 时间：2012-11-01T12:36:34.100
> 
> 标签：php, mysql, ubuntu, pdo

我刚刚将 LAMP 开发机器从 Ubuntu 11.04 更新到 12.04 尝试运行我的 php 应用程序时出现以下错误：

```
SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query 
```

我的应用程序大量使用存储过程来处理数据库操作，但它从未抛出此错误。经过一番研究，我意识到这是在使用 5.5 版本的 MySQL 时发生的。我还在 mysql workbench 中测试了所有失败的程序，它们工作得很好。

这可能是 PDO 问题吗？有人遇到同样的问题吗？

我使用 mysql 沙箱解决了这个问题，但我想使用 mysql 5.5

我目前的版本是：

*   PHP: 5.3.10
*   mysql：5.5.24

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:18:28.633

作为我评论的重复问题的答案，您应该尝试使用选项启动 mysql 服务（mysqld）并检查文件`--log-warnings=2`中的真正问题是什么`hostname.err`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-02-21T11:03:13.297

终于在一年多后解决了这个问题。我们通过在我们自己的代码中更改结果获取算法来解决它。最初我们使用 PDOStatement::fetchAll 和 PDO::FETCH_ASSOC 来获取结果，现在它使用 PDO::FETCH_NUM 在循环中使用 PDOStatement::fetch 方法。

# scala - 使用通用隐式参数进行隐式转换

> ID：13177234
> 
> 赞同：6
> 
> 时间：2012-11-01T12:37:14.540
> 
> 标签：scala, implicit-conversion

我似乎将隐式转换与通用隐式参数结合起来不起作用，如下面的示例 2b 所示：

```
object Test {

  case class Foo(i: Int)
  case class Bar(i: Int)
  case class Zip(i: Int)

  object Foo {
    // 1)
    implicit def toBar(foo: Foo)(implicit g: Int => Bar): Bar = g(foo.i)
    // 2)
    implicit def toT[T](foo: Foo)(implicit g: Int => T): T = g(foo.i)
  }

  // 1)
  implicit val b = (i: Int) => Bar(i)
  val bar: Bar = Foo(3)    

  // 2a)
  implicit val z = (i: Int) => Zip(i)
  val zip: Zip = Foo.toT(Foo(3))

  // 2b)
  val zip2: Zip = Foo(3)    // <- compiler error, implicit conversion not applied

} 
```

是否有任何理论上的原因导致这不起作用，或者它是实施的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:30:13.500

对于它的价值，如果您运行以下代码的简化版本

```
case class Foo(i: Int)
case class Zip(i: Int)

implicit def toT[T](foo: Foo)(implicit g: Int => T): T = g(foo.i)

implicit val z = (i: Int) => Zip(i)

val zip2: Zip = Foo(3) // <- compiler error, implicit conversion not applied 
```

使用`-Yinfer-debug`，您将获得[大量](https://gist.github.com/3993598)关于幕后发生的事情的调试信息（Scala 2.9.2）。我不熟悉 Scala 编译器的内部结构，但以下两个输出片段可能暗示了这个问题。第一个是（要点的第 51 行）

```
[inferImplicit view] pt = this.Foo => this.Zip
Implicit search in Context(Main.$anon.zip2@ValDef scope=1100551785) {
  search    this.Foo => this.Zip
  target    $anon.this.Foo.apply(3)
  isView    true
  eligible  toT: [T](foo: this.Foo)(implicit g: Int => T)T
} 
```

我将其解释为“我们正在寻找一个隐含`this.Foo => this.Zip`且值得一看的候选者 is `toT: [T](foo: this.Foo)(implicit g: Int => T)T`。这个片段后面是输出，表明 Scala 然后尝试实例化`T`，但第 81 行最后说

```
inferMethodInstance, still undetermined: List(type T) 
```

我的解释是，Scala 以某种方式无法用 实例化`T`，`Zip`这就是最终放弃候选人的原因。

也就是说，我认为您的代码没有理论上的问题，我认为这只是编译器的一个缺点。

# mysql - 在为医院管理系统设计 msyql 数据库时需要帮助

> ID：13177235
> 
> 赞同：0
> 
> 时间：2012-11-01T12:37:14.480
> 
> 标签：mysql, database-design

我正在开发一个国家级的医院管理应用程序，即我国的所有医院都将使用它。

所以我需要知道我应该如何设计数据库。

这里会有最关心的医院和病人。我应该如何在 mysql 数据库中拥有这两个东西。我的意思是说，将所有医院的患者放在一张表中，将医院的患者放在另一张表中，并通过外键将它们链接起来是否很好。

检查下面的这些图片 ![医院表](../Images/f331fdfc2b9ab5c2e2ef20bb4dae41da.png)

![患者表](../Images/c78e682dd1e3aed37ddf26968656210f.png)

```
// Save Patient - Personal Details
$sql = "INSERT INTO ". TABLE_PATIENTS_PERSONAL ."";
$sql .= "(hospital_id, title, first_name, middle_name, last_name, date_of_birth, age, sex, occupation, marital_status, religion, tribe, preferred_language, datecreated, datemodified) VALUES";
$sql .= "($hospital_id, '$title', '$first_name', '$middle_name', '$last_name', '$date_of_birth', $age, '$sex', '$occupation', '$marital_status', '$religion', '$tribe', '$preferred_language', now(), now())";
$query = $mysql->query($sql); 
```

到目前为止，我已经这样做了，但我担心一旦记录数量增加，我将面临什么问题。

应用程序上线后，患者表应以百万计。所以我需要关于它应该如何设计的建议，这样就不会有处理大量记录和其他常见数据库问题等的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:44:22.273

1.  所有必需的索引都必须到位
2.  回到 RDBMS 的规范化和反规范化概念，以确定什么级别的规范化会有所帮助。
3.  确保您有足够的字段大小 - 我看到某些字段太长而某些字段太短
4.  不要有多余的字段（例如 - 年龄和出生日期）
5.  许多字段可能为空。检查否则您的第一条记录本身将失败
6.  其他问题与 DBA 相关，例如 DB 大小、功能等。请咨询您的 DBA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:47:10.090

对于任何好的关系数据库系统，我几乎没有使用 mysql 的经验，几百万条记录应该不是问题。

一张表中的患者和另一张表中的 hostipals 对我来说看起来不错，但是您还需要存档表来监视数据库中的任何更改，并且这些表会变得非常大。我会用触发器来做，并在每条记录上存储每一个更改（但我对 Oracle 很有经验，而且我习惯于非常大的表）。

还要确保用于搜索的字段不能为空（在 Oracle 中，索引不用于空值）。

# html5-canvas - 修复了 kinetic.js 舞台上的浮动形状

> ID：13177242
> 
> 赞同：0
> 
> 时间：2012-11-01T12:37:34.230
> 
> 标签：html5-canvas, kineticjs

我试图找到一个解决方案，如何通过使用 kineticjs 库层和阶段将固定分数表实现到可见阶段（画布）区域。基本思想是形状层可以滚动，舞台比可见的浏览器区域更宽，但分数表应该像许多休闲游戏一样一直固定在可见区域的某个位置。

为舞台/画布创建这种固定始终可见的形状的最佳方法是什么？有没有办法参考可见区域 xy 位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:21:38.880

制作固定位置组的最佳选择是在舞台上使用第二层或为您的对象创建两个组 - 一个保持在原位，另一个可以移动。我会采用双层方法，因为这允许您单独重绘图层，这样当一个更新信息时，您不需要重绘另一个。

```
 cvsObj.page = new Kinetic.Layer();
cvsObj.dynamic = new Kinetic.Layer();
cvsObj.stage.add(cvsObj.page);
cvsObj.stage.add(cvsObj.dynamic); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:13:26.223

我采用了两层方法，但实际上我的挑战是如何实现“页面”静态行为。我发现动力学层/阶段似乎没有为此提供方法，我需要使用其他方法在可视区域顶部制作“页面”层。为此，我使用了 jquery scrollTop() 和 scrollLeft() 函数。层方法 .setAbsolutePosition() 用于更新整个层的位置。此处 pageLayer 位置已更新，并且 dynamicLayer 不是这样命名可能有点混乱，但反映了您在浏览器上看到的内容。

这是一个简单的例子，我正在寻找什么。现在，当您滚动舞台时，绿色矩形移动，红色矩形和 x/y 位置计数器停留在可见区域。我在此处附上此解决方案和教程类型的内容，因为它可能有用。

```
<script>
  window.onload = function() {
    var stage = new Kinetic.Stage({
      container: 'container',
      width: 1600, height: 1600
    });
    var layerDynamic = new Kinetic.Layer();
    var layerPage = new Kinetic.Layer();

    var rectGreen = new Kinetic.Rect({
      x: 239, y: 75, width: 100, height: 50, fill: 'green'
    });
    var rectRed = new Kinetic.Rect({
      x: 100, y: 75, width: 100, height: 50, fill: 'red' 
    });
    var simpleText = new Kinetic.Text({
      x: 1, y: 1, text: "Init", textFill: "black"
    });

    layerDynamic.add(rectGreen);
    layerPage.add(rectRed);
    layerPage.add(simpleText);

    $(document).scroll(function(e) {
           var visibleXTop = $(this).scrollTop();
           var visibleYTop = $(this).scrollLeft();
           simpleText.setAttrs({text: visibleXTop + ' ' + visibleYTop});
           layerPage.setAbsolutePosition(visibleYTop , visibleXTop);
           layerPage.draw();
    });

    stage.add(layerDynamic);
    stage.add(layerPage);
  };
</script> 
```

# javascript - 在按钮单击时使用 jquery 从 gridview 的下拉列表中获取选定的项目

> ID：13177243
> 
> 赞同：1
> 
> 时间：2012-11-01T12:37:34.833
> 
> 标签：javascript, asp.net, gridview

我有gridview，我在其中添加了下拉列表和按钮。在Rowdatabound事件中，我正在填充下拉列表在按钮单击时，我想在同一行的客户端检查下拉列表中的选定项目我如何做到这一点。我能够在按钮上添加确认消息的脚本，如下所示：

```
<script type="text/javascript">
        function confirmpo() {
            if (confirm("Genrate order for this product?")) {
                return true;
            }
            else {
                return false;
            }
        }

    </script>

<asp:GridView ID="grdColorname" runat="server" onrowcommand="grdvendorname_RowCommand" >

<RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
<Columns>
<asp:BoundField DataField="ProductId" HeaderText="Company Id" Visible="false"/>
<asp:BoundField DataField="Productname" HeaderText="Product name" />
 <asp:TemplateField HeaderText="Actions" >
                 <ItemTemplate>
                 <asp:DropDownList ID="lstvendor" runat="server">
                 <asp:ListItem Text="Select" Value="-1"></asp:ListItem>
                 </asp:DropDownList>
                 </ItemTemplate>
                 </asp:TemplateField>
     <asp:TemplateField HeaderText="Actions">
                 <ItemTemplate>
                  <asp:Button ID="btnGenratepo" CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' CssClass="btnclassedit" runat="server" CommandName="GenratePO" Text="" ToolTip="Genrate P/O" OnClientClick="javascript:return confirmpo();"/>
 </ItemTemplate>
             </asp:TemplateField
</Columns>
<RowStyle CssClass="RowStyle" />

    <EmptyDataRowStyle CssClass="EmptyRowStyle" />

    <PagerStyle CssClass="PagerStyle" />

    <SelectedRowStyle CssClass="SelectedRowStyle" />

    <HeaderStyle CssClass="HeaderStyle" />

    <EditRowStyle CssClass="EditRowStyle" />

    <AlternatingRowStyle CssClass="AltRowStyle" /> 
</asp:GridView> 
```

关于如何做到这一点的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:45:07.807

如果我理解正确，在里面`confirmpo()`，你想看到`<select>`按钮所在行的值吗？

在这种情况下，首先您需要查看页面呈现的 HTML。网格视图将呈现为表格。您可以像这样使用传递给的事件`confirmpo()`：

```
function confirmpo(e) {
    var btn = e.srcElement;
    // .. locate the <select> element
    // .. insert rest of the code
} 
```

您可能应该通过`parentNode`属性到达`<tr>`，然后到达`<select>`. 使用 DOM 遍历库（例如[jQuery](http://jquery.com/) ）可以更轻松地完成所有这些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:49:07.620

看起来好像没有经过测试

```
$("#grdColorname input:button").click(function(){
 var selectedValue=$(this).parent('td').prev('td').find('input:select').value();
}); 
```

selectedValue 将包含下拉列表所需的值。

# php - DOMDocument 节点获取 HTML 内容

> ID：13177244
> 
> 赞同：2
> 
> 时间：2012-11-01T12:37:36.457
> 
> 标签：php, domdocument, innerhtml

> **可能重复：**
> [PHP 的 DomDocument 中的 innerHTML？](https://stackoverflow.com/questions/2087103/innerhtml-in-phps-domdocument)

我正在编写一个应用程序来从 rss 提要中获取预览内容。为此，我想获取特定 div 的 HTML 内容。

我正在获取的文本如下所示

```
<P>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean egestas enim non tellus interdum mollis. Pellentesque accumsan, purus quis facilisis vulputate,</P>
<P>leo enim rhoncus velit, non consectetur lacus libero a eros. Fusce rutrum, sapien eget facilisis placerat, metus enim sagittis ante, quis elementum velit tortor sit amet purus. </P>
<P>Mauris accumsan, dolor quis mollis iaculis, metus nisl lacinia neque, vel condimentum erat nisl ut lorem. Cras vestibulum urna in nisl ullamcorper rhoncus tincidunt massa </P>
<P>pretium. Nunc dui est, imperdiet et vulputate sit amet, facilisis semper ante. Duis ac ornare elit. Morbi gravida dolor vitae nunc tempus a hendrerit odio posuere. Morbi </p> 
```

但是当我卷曲页面并解析它并获取 nodeValue 我得到没有段落标签的文本

```
$dom = new DOMDocument();
$dom->validateOnParse = false;
$html = get_data($item['link']);
$dom->loadHTML($html);
$storycontents = $dom->getElementById('story-body-text');
echo '<TR><TD>'.$storycontents ->nodeValue.' </TD></TR>'; 
```

DOMDocument 中有没有办法获取特定 id 的“innerHTML”属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:46:27.183

感谢@simone[如何获取 DOMNode 的 innerHTML？](https://stackoverflow.com/questions/2087103/innerhtml-in-phps-domdocument)

```
$tmp_dom = new DOMDocument(); 
$tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
$innerHTML.=trim($tmp_dom->saveHTML()); 
```

没有出现在我的搜索中，但仍然感谢您。

# jsf - 使用 JSF 和 Primefaces 时更新消息字段的正确方法？

> ID：13177247
> 
> 赞同：1
> 
> 时间：2012-11-01T12:37:45.883
> 
> 标签：jsf, primefaces, facelets, updates

关于这个还有另一个问题，但我无法解决我的问题。 [jsf 和 primefaces 更新问题](https://stackoverflow.com/questions/5250370/jsf-and-primefaces-update-problem)

什么是正确的开始级别：？我只想更新messagePanel-messages，有什么问题。我尝试了 5 种不同的解决方案，但都没有成功。

```
<ui:composition template="./template.xhtml">

    <ui:define name="title">
        <h:outputText value="#{bundle.editXTZ_title} - #{XTZBean.username} - -->: #{RmaBean.selectedRma.rma}"></h:outputText>
    </ui:define>
    <h:panelGroup id="messagePanel" layout="block">
        <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
    </h:panelGroup>
    <ui:define name="body">
        <h:form id="formi">
            <p:accordionPanel activeIndex="#{XTZBean.activeIndex}">  
                <p:tab title="Muokkaa"> 
```

......更多代码然后

```
 <p:tab title="Avainsanat">  

                        <p:panelGrid id="avainsanaGrid" style="margin-top:20px;" styleClass="noBorders">
                            <p:row>
                                <p:column></p:column>
                                <p:column></p:column>

<p:row rendered="#{XTZBean.suljettu}">
                                <p:column></p:column>
                                <p:column></p:column>
                                <p:column><p:commandButton value="Tallenna" id="btnAvainsana" process="@this,avainsana" update="avainsanaGrid, :messagePanel"  
                                                           actionListener="#{XTZBean.talletaAvainsana}" style="width: 210px;"/></p:column>
                                <p:column></p:column>
                                <p:column></p:column>
                                <p:column></p:column>
                                <p:column></p:column>
                            </p:row> 
                         </p:panelGrid>  
                    </p:tab> 
```

谢谢！萨米人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:49:49.253

根据目前提供的信息（并假设`<ui:insert name="body">`不是在另一个`NamingContainer`组件中），`:messagePanel`是正确的。

但这`<h:panelGroup id="messagePanel">`不是在正确的地方。它完全在模板定义之外，因此完全被忽略了。它必须放在任何`<ui:define>`.

例如

```
<ui:define name="body">
    <h:panelGroup id="messagePanel" layout="block">
        <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
    </h:panelGroup>

    <h:form id="formi">
        ...
    </h:form>
</ui:define> 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)
*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

# javascript - div 在 jquery 中没有动画。为什么？

> ID：13177250
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:37:56.193
> 
> 标签：javascript, jquery

我创造了一个[小提琴](http://jsfiddle.net/pesAA/2/)。我正在尝试制作 jquery 动画，但是当我单击链接时它不会移动。为什么？我正在使用 jquery 转换插件。

这是我的代码

html

```
<header class="header"><a href="#" class="click">Click</a></header>
<section class="contents">
  <section class='home'>
    Hello akdjalskdjalskdjlasklasdjasljdasök
  </section>
</section> 
```

css

```
.contents {
  width: 300px;
  height: 400px;
  border: 1px solid red;
}
.home {
  position: absolute;
  border: 1px solid green;
} 
```

和js

```
$('.click').click(function () {
      $('.home').transition({x: '+100px'}, function () {
        alert('completed');
      });
    }); 
```

**更新**

我正在使用 jquery[转换](http://ricostacruz.com/jquery.transit/)插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:41:26.150

您需要使用`animate`and`left`而不是`transition`and `x`：

```
$('.click').click(function () {
    $('.home').animate({left: '+100px'}, function () {
        alert('completed');
    });
}); 
```

**演示：** <a href="http://jsfiddle.net/pesAA/15/" rel="nofollow">http://jsfiddle.net/pesAA/15/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:53:56.427

检查 jsFiddle 中的库。该框架可能是不必要的，但如果你想要它，你必须通过将[http://ricostacruz.com/jquery.transit/jquery.transit.min.js](http://ricostacruz.com/jquery.transit/jquery.transit.min.js)添加到“添加资源部分”`transition`来确保它包含在 jsFiddle 中”。此外，它似乎只适用于早期版本的 jQuery 而不是 v1.8.2 最新版本。否则你的代码很好。试试这个[演示](http://jsfiddle.net/pesAA/16/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:01:45.007

尝试这个：

```
<html>
<head>
<style>
.contents {
  width: 300px;
  height: 400px;
  border: 1px solid red;
}
.home {
  position: absolute;
  border: 1px solid green;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>
</head>
<body>
<header class="header"><span class="click">Click</span></header>
<section class="contents">
  <section class='home'>
    Hello akdjalskdjalskdjlasklasdjasljdasök
  </section>
</section>
</body>
<script> 
$('.click').on('click',function (evt) {
      $('.home').animate({left: '+100px'}, function () {
        alert('completed');
      });
    });
</script>
</html> 
```

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:43:23.913

从中获取`x`您想要沿水平轴设置动画的内容，那么[这应该适合您](http://jsfiddle.net/pesAA/8/)：

```
$(document).ready(function() { 
  $('.click').click(function () {
    $('.home').animate({left: '+100px'}, function () {
      alert('completed');
    });
  });
});​ 
```

您当前的代码将不起作用，因为`x`在这种情况下不是一个东西并且`transition`是不必要的。

您的 jsFiddle 不起作用，因为它不引用 jQuery，而是引用 Mootools。

# ios - UIView：layoutSubviews 与 initWithFrame

> ID：13177251
> 
> 赞同：7
> 
> 时间：2012-11-01T12:38:06.117
> 
> 标签：ios, uiview, uiscrollview

子类化时`UIView`，我通常将所有初始化和布局代码放在它的`init`方法中。但有人告诉我布局代码应该通过覆盖来完成`layoutSuviews`。SO上有一篇[文章](https://stackoverflow.com/questions/728372/when-is-layoutsubviews-called)解释了*何时*调用每种方法，但我想知道如何在实践中使用它们。

我目前将所有代码都放在`init`方法中，如下所示：

**MyLongView.m**

```
- (id)initWithHorizontalPlates:(int)theNumberOfPlates
{
    self = [super initWithFrame:CGRectMake(0, 0, 768, 1024)];

    if (self) {
        // Initialization code
        _numberOfPlates = theNumberOfPlates;

        UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:self.frame];
        [scrollView setContentSize:CGSizeMake(self.bounds.size.width* _numberOfPlates, self.bounds.size.height)];
        [self addSubview:scrollView];

        for(int i = 0; i < _numberOfPlates; i++){
            UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"a1greatnorth_normal_%d.jpg", i+1]];
            UIImageView *plateImage = [[UIImageView alloc] initWithImage:img];
            [scrollView addSubview:plateImage];
            plateImage.center = CGPointMake((plateImage.bounds.size.width/2) + plateImage.bounds.size.width*i, plateImage.bounds.size.height/2);
        }

    }
    return self;
} 
```

这是通常的任务：设置视图的框架，初始化 ivar，设置滚动视图，初始化 UIImages，将它们放在 UIImageViews 中，将它们布置出来。

我的问题是：哪些应该在 中完成`init`，哪些应该在 中完成`layoutSubviews`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T12:49:17.213

您的 init 应该使用所需的数据创建所有对象。您在 init 中传递给它们的任何帧都应该是它们的起始位置。

然后，在 layoutSubviews: 中，您更改所有元素的框架以将它们放置在它们应该去的地方。不应在 layoutSubviews: 中进行分配或初始化，仅更改其位置、大小等...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T12:56:16.633

如果您的自动调整大小仅与 autoresizingFlags 或 autolayout 完美配合，您*可以*只使用 init 来设置整个视图。

但一般来说，您应该在 layoutSubviews 中进行布局，因为这将在每次更改视图框架时调用，并且在其他需要再次布局的情况下。有时您只是不知道 init 中视图的最终帧，因此您需要如上所述灵活，或者使用 layoutSubviews，因为您在设置最终尺寸后在那里进行布局。

正如 WDUK 所提到的，所有初始化代码/对象创建都应该在您的 init 方法或任何地方，而*不是*在 layoutSubviews 中。

# css - 背景图像在 IE8 上无法正确显示

> ID：13177254
> 
> 赞同：2
> 
> 时间：2012-11-01T12:38:10.323
> 
> 标签：css, internet-explorer, cross-browser, background-image

我想在身体上显示背景图像。我有一个 css 文件，我用它控制身体属性。我想设置 background-size:100% 但它在 IE7 或 IE8 上不起作用。它适用于 Chrome、Firefox 和 IE9。如何为 IE7 和 IE8 更改它？

我的 CSS 文件：

```
body
     {

         background-image:url('http://www.blablabla.com/images/arka3.png');
         background-size: 100%;
         background-repeat: no-repeat;
         background-attachment: fixed;
         background-position: left;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:06:33.500

您可以将以下 CSS 用于 body 标签。

```
body
     {
        background: url('http://www.blahblahblah.com/images/arka3.png') #EBEBEB repeat-x 0 0;
 } 
```

您还可以将背景图像剪切为 1 或 2 像素宽以节省加载时间。

您也可以在条件 CSS 语句中添加新的 CSS，使其仅适用于 IE7 和 8。

注意：我没有时间对所有浏览器进行 QA，但我确实检查了 IE 8 和 FF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:08:28.037

尝试

HTML

```
<div id="container">
    <img id="bgImg" src="img.png"/>
</div> 
```

CSS

```
#bgImg {
    position: relative;
    width: 100%;
    height: auto;
}

#container {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: -1;
    left: 0;
    top: 0;
}

html,body {
    width: 100%;
    height: 100%;
} 
```

[​在这里](http://jsfiddle.net/bruno/7EMQb/1/)拨弄

# python - Pyramid i18n 使用两个语言环境目录

> ID：13177258
> 
> 赞同：1
> 
> 时间：2012-11-01T12:38:21.453
> 
> 标签：python, internationalization, pyramid, jinja2

如何在我自己的项目中使用包含包和语言环境目录中的语言环境目录。

我的主要功能

```
settings = dict(settings)
settings.setdefault('jinja2.i18n.domain', 'mypackage1, mypackage2') #NOT WORK!!!

config.include("mypackage1")
config.add_jinja2_search_path(("mypackage1:templates",
                               "mypackage2:templates"))

config.add_translation_dirs("mypackage1:locale/",
                            "mypackage2:locale/")
config.add_jinja2_search_path(("mypackage1:templates",
                               "mypackage2:templates"))

return config.make_wsgi_app() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:37:58.403

你可能误解了它的上下文。引用金字塔词汇表：

> 表示进行翻译的“上下文”的字符串。例如，如果翻译域是“programming-languages”，则单词“java”的翻译可能与翻译域是“coffee”不同。翻译域由一个或多个翻译目录中的一组 .mo 文件表示。

无法通过将其设置为“mypackage1，mypackage2”来累积上下文。您需要做的是确保所有翻译目录具有相同的域，在配置中设置它并`add_translation_dirs`使用多个目录调用。

# objective-c - 在自定义容器视图中旋转时 AutoLayout 不会调整视图大小？

> ID：13177263
> 
> 赞同：4
> 
> 时间：2012-11-01T12:38:25.563
> 
> 标签：objective-c, ios, autolayout

我有一个非常基本的容器视图，其中包含一个侧边栏并在内容区域中交换了视图控制器（想想 UISplitView，但带有一个小图标侧边栏/垂直 UITabBar）。

容器视图控制器使用 autoLayout 并在旋转时正确调整大小。Content viewController 1 使用自动布局并且是用 IB 制作的，所以它有一个 xib 文件。内容 viewController 2 继承自 UITableViewController 并且不使用 xib。

如果我将 viewController 1 分配为根视图控制器并旋转，则调整大小有效，这是我在 viewController 1 中获得的回调：

*   willRotateToInterfaceOrientation
*   更新视图约束
*   viewWillLayoutSubviews
*   didRotateFromInterfaceOrientation

但是，如果我将容器视图控制器分配为根视图控制器，加载 viewController 1 并旋转，则调整大小不起作用。而且我只在 viewController 1 中得到以下回调：

*   willRotateToInterfaceOrientation
*   didRotateFromInterfaceOrientation

在我的视图控制器容器中，这是我交换视图控制器的方法：

```
[self addChildViewController:toViewController];
[toViewController didMoveToParentViewController:self];

// Remove the old view controller
[fromViewController willMoveToParentViewController:nil];
[fromViewController.view removeFromSuperview];
[fromViewController removeFromParentViewController];

// Add the new view
[self.contentContainerView addSubview:toViewController.view]; 
```

现在，我确实收到了即将发生旋转的回调，但似乎既没有调用 updateViewConstraints 也没有调用 viewWillLayoutSubviews。这解释了为什么没有发生调整大小，但是为什么一旦我将视图控制器放入容器视图中就不会调用这些方法？

我还尝试在我的容器中显式返回 YES

```
shouldAutomaticallyForwardAppearanceMethods 
```

和

```
shouldAutomaticallyForwardAppearanceMethods 
```

虽然这应该已经是默认设置了。

此外，未使用 IB 制作的视图控制器（视图控制器 2）在容器内旋转时会正确调整大小。但是，我没有在这个上明确使用 NSLayoutConstraints，所以我怀疑它在旋转时默认使用 Springs 和 Struts 来调整大小。

我是否需要在我的视图控制器容器上转发一些其他事件以使自动布局视图控制器在旋转时正确调整大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:24:57.493

好的，我想我在视图控制器容器中缺少这个方法：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    self.contentViewController.view.frame = self.contentContainerView.bounds;
} 
```

虽然现在旋转时可以正确调整大小，但它仍然不会触发

```
updateViewConstraints 
```

在我的子视图控制器中。有趣的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T20:58:46.490

似乎 iOS 8 确实为您调用了 updateViewConstraints。但 iOS 7 没有。要在 iOS 7 中调用它，请调用 setNeedsUpdateConstraints，如下所示：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    [super willAnimateRotationToInterfaceOrientation:interfaceOrientation duration:duration];

    BOOL isiOS7 = floor(NSFoundationVersionNumber) <= NSFoundationVersionNumber_iOS_7_1;
    if (isiOS7) {
        // Trigger a call to updateViewConstraints
        [self.view setNeedsUpdateConstraints];
    }
} 
```

在 updateLayoutConstraints 中，检查哪个方向是布局的一个好方法是检查状态栏的方向。这适用于 7 和 8。

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
BOOL layoutAsLandscape = UIInterfaceOrientationIsLandscape(orientation); 
```

# php - 使用 php 客户端库 v3 将视频上传到 youtube

> ID：13177266
> 
> 赞同：0
> 
> 时间：2012-11-01T12:38:36.133
> 
> 标签：php, youtube-api, google-api-client, google-api-php-client

我正在尝试使用客户端库 v3 将视频上传到 youtube。

v3 库是实验性的，没有太多文档（提供的示例不包括 youtube）

我已经使用 oauth 2.0 正确验证了用户。当我有访问令牌时，我正在尝试使用此代码。

```
if ($client->getAccessToken()) {
    $snippet = new Google_VideoSnippet();
    $snippet -> setTitle = "Demo title";
    $snippet -> setDescriptio = "Demo descrition";
    $snippet -> setTags = array("tag1","tag2");
    $snippet -> setMimeType = 'video/quicktime';

    $video = new Google_Video();
    $video -> setSnippet($snippet);

    // Not sure what to do now....

    $_SESSION['access_token'] = $client->getAccessToken();
} 
```

从[文档](https://developers.google.com/youtube/v3/docs/videos/insert)中，

我需要提供一个**零件**参数

```
The part parameter serves two purposes in this operation. It identifies the properties that the write operation will set as well as the properties that the API response will include.

The part names that you can include in the parameter value are snippet, contentDetails, player, statistics, status, and topicDetails. However, not all of those parts contain properties that can be set when setting or updating a video's metadata. For example, the statistics object encapsulates statistics that YouTube calculates for a video and does not contain values that you can set or modify. If the parameter value specifies a part that does not contain mutable values, that part will still be included in the API response. 
```

但是除了我无法理解的python示例之外，它缺少文档。（示例在链接底部，我提供）

请不要给出 zend 库的示例/链接，它使用了我不想要的 auth-sub。我想使用 oauth 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:23:02.370

上传视频的代码如下所示。

```
$youtubeService->videos->insert($part, Google_Video $postBody, $optParams = array()); 
```

'part' 是您希望请求返回的内容。在这种情况下，可能只是`status`，它返回有关上传状态的信息。

Google PHP 客户端库的版本可能已经过时，因此您需要在[https://code.google.com/p/google-api-php-client/查看源代码](https://code.google.com/p/google-api-php-client/)

# .net - 在 vb .net 的 where 子句中使用 datetimepicker

> ID：13177267
> 
> 赞同：0
> 
> 时间：2012-11-01T12:38:36.847
> 
> 标签：.net, vb.net, oracle

```
 Dim con1 As OleDb.OleDbConnection
            Dim cmd As OleDb.OleDbCommand
            Dim query As String

            Dim rs As OleDb.OleDbDataReader
            con1 = New OleDb.OleDbConnection("Provider=MSDAORA.1;Data Source=localhost;Persist Security Info=True;Password=sys;User ID=nitishok")
            con1.Open()

            query = "select * from HOLDERSDB where DOB like '" + DateTimePicker1.Value + "' "
            cmd = New OleDb.OleDbCommand(query, con1)
            cmd.CommandType = CommandType.Text
            rs = cmd.ExecuteReader

            Dim da As New OleDb.OleDbDataAdapter(query, con1)

            Dim ds As New DataSet()
            da.Fill(ds, "HOLDERSDB")
            DataGridView1.DataSource = ds.Tables(0)

            con1.Close()
    enter code here 
```

我想要 HOLDERS 表中 DOB 为 datetimepicker1 的行 我发布的代码不返回任何结果。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:08:34.137

假设 DOB 是一个 DATE 字段（希望它是！）然后使用 TO_DATE 并且不要尝试比较 date=string，否则如果不是今天，那么您的代码将在某天失败。

```
"select * from HOLDERSDB where dob = to_date(" + DateTimePicker1.Value + ", 'dd-mon-yyyy') 
```

请参阅此处格式化 DateTimePicker 的返回

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx)

确保以与 TO_DATE 函数中的第二个参数相同的方式格式化它（不必像我所说的那样是 dd-mon-yyyy，Oracle 支持多种格式）。

此外，出于性能/安全原因，您应该使用绑定变量而不是将字符串粘贴到 SQL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:53:09.113

您需要采取的步骤来查明问题：

*   检查 的值`query`，是否正确？
*   手动对数据库运行查询，是否返回结果？
*   检查`ds`对象是否有数据使用`ds.Tables[0].Rows.Count`，大于 0？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:44:46.080

将 OleDbParameter 添加到[cmd.Parameters](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)而不是在查询中连接。这将减少黑客攻击的可能性，并帮助我插入正确类型的值。

另外，我不明白为什么您需要类似的声明。也许您应该使用普通的 = 运算符，尤其是当 DOB 是日期时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:45:16.963

一旦我使用：

```
Public Function SQLDate(p1 As Date) As String
    Return String.Format("{0}{1}{2}", p1.Year, p1.Month.ToString.PadLeft(2, "0"c), p1.Day.ToString.PadLeft(2, "0"c))
End Function 
```

所以：

```
Debug.Print(SQLDate(DateTimePicker1.Value)) =====> 20121101 
```

在 SQL 查询中使用：

```
String.Format("... WHERE DOB = '{0}'", SQLDate(DateTimePicker1.Value)) 
```

# java - 使用 Java/Swing 分配家庭作业

> ID：13177268
> 
> 赞同：1
> 
> 时间：2012-11-01T12:38:43.007
> 
> 标签：java, swing

我有一个关于用户界面和可用性测试的课程。我必须做一些我确信我可以弄清楚如何以编程方式做的事情，但是我没有摇摆经验，所以我不知道要使用哪些组件来完成这项工作。我的背景是 C#，所以我有时会摸索着寻找在 NetBeans 中使用的正确组件。

根据下面的描述，任何人都可以推荐什么样的文本字段可以完成这项工作？我在想 jFormattedTextField （基于名称），但我似乎无法弄清楚。

谢谢

* * *

提交将在通用实验室的 Linux 安装上运行的 Java 程序 (EN-2036)。提供以下功能：

*   将最后一个命令的输出（来自文件）加载到允许用户浏览数据的文本查看区域
*   仅将所有登录名加粗（不是整行）
*   将所有出现的用户指定登录名加粗
*   将所有出现的用户指定的登录名集加粗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:45:42.867

使用 JEditorPane 或 JTextpane，这些允许您为其中的文本添加样式

[教程链接](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)

# javascript - 溢出和调整大小问题

> ID：13177270
> 
> 赞同：2
> 
> 时间：2012-11-01T12:38:47.647
> 
> 标签：javascript, html, css, resize, overflow

我的网页有问题。

基本上，我有`<html>`on `overflow:hidden`，两个水平导航栏，一个固定的垂直侧边栏在左侧，在剩余的中心，一个 div 具有该`height: 90%`属性。

**编辑：**容器 div 具有`overflow: auto`属性。

内容通过 AJAX 加载到容器区域。内容主要由表格数据组成，关键是当内容过多时让容器区域滚动。在正常高度的普通显示器上一切正常，但是当它被带到笔记本电脑上时，由于 html 溢出，最后 1-2 行变得“隐藏”。

如果我将原始值减小`height: 90%`到较小的值，问题就解决了，但是在我切换到高度减小的大屏幕后，内容区域没有完全覆盖。

有没有办法通过 CSS 解决这个问题？如果没有，是否可以通过屏幕调整大小 javascript 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:52:35.403

最简单也可能是最快的方法是使用 Javascript。如果您专门设置表格数据容器的高度，您将获得对布局和一般项目间距的更多控制。

设置高度时，您必须考虑导航栏的高度，因此在 jQuery 中，代码如下所示：

```
function resizeMain()
{
    $('#tabularBox').height($(window).height() - $('#topBar').height() - $('#bottomBar').height());
}

// size it on load:
$(function(){
    resizeMain();
}

// and size it on resize
$(window).resize(resizeMain); 
```

当然，有很多方法可以优化这一点，但这就是想法。而且您必须注意小屏幕，但这无论如何都是 % 的问题。

最后，你需要**溢出：自动；**在我们的表格框中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:47:30.870

在高度为 90% 的 div 中放置溢出：自动或溢出：滚动。这只会向该 div 添加一个滚动条。

# iphone - 在 tabbarController 中获取 NavigationController 堆栈的 tabbarItem

> ID：13177275
> 
> 赞同：0
> 
> 时间：2012-11-01T12:39:03.940
> 
> 标签：iphone, objective-c, ios, ipad

我想在 .tabbaritem 的特定索引处获取`UIViewControllers`ie堆栈列表。请详细说明..！请大伙牵手`UINavigationController``UITabBarController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:51:46.010

如果您想在选项卡更改时检查这一点，请实现[UITabBarControllerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITabBarControllerDelegate/tabBarController%3adidSelectViewController%3a)的回调：

```
-(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{
    //if you're using navigationController
    UINavigationController *navC=(UINavigationController *)viewController;
    NSArray *arrayVc=navC.viewControllers;
    NSLog(@"%@",arrayVc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:51:56.980

做这个：

```
NSArray *arrControllers = self.tabBarController.viewControllers;
for(UIViewController *viewController in arrControllers)
{
   if([viewController isKIndOfClass:[UINavigationController class]])
   {
     //NavigationController
     UINavigationController *navCtrl = (UINavigationController *)viewController;
     NSLog(@"%@",navCtrl.viewControllers);
   }
   else
   {
     // view controller
   }
} 
```

# search - 使用 elasticsearch 在子文档中搜索词

> ID：13177276
> 
> 赞同：1
> 
> 时间：2012-11-01T12:39:07.653
> 
> 标签：search, document, elasticsearch

我有一个如下的索引文档结构；

```
{
   "term":"some term",
   "inlang":"some lang"
   "translations" : {
      {
          "translation":"some translation",
          "outlang":"some lang",
          "translations" : {
              {
                  "translation":"some translation 1"
                  "outlang": "some lang 1"
                  "translations" : {...}
              }
          }
      },
      ...
   } 
} 
```

我想在这些文件中找到翻译。但是，此翻译可以存在于本文档的任何级别。是否可以使用弹性搜索动态搜索词条？

例如，

```
{
   "query": {
      "*.translation":"searchterm"
   }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T19:24:43.257

我设法通过以下查询做到了这一点；

```
{
  "query": {
    "query_string": {
      "query": "someterm",
      "fields": ["*.translation"]
    }
  }
} 
```

或者

```
{
  "query": {
    "multi_match": {
      "query": "someterm",
      "fields": ["*.translation"]
    }
  }
} 
```

[您可以在此处](https://groups.google.com/forum/?fromgroups=#!search/Searching%2420term%2420in%2420subdocuments%2420with%2420elasticsearch/elasticsearch/-RZtZykZq5o/kzQNFu2cGHEJ)查看 elasticsearch google 群组对话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:12:36.223

不，我不相信这个功能目前内置在 ElasticSearch 中。这个答案表明[您可以使用脚本构建功能](https://groups.google.com/d/topic/elasticsearch/YYuJAvH7t6s/discussion)，但这会非常慢。

一般来说，ES 不能很好地处理嵌套数据。它支持嵌套字段，但许多更高级的搜索功能无法对复杂的嵌套数据进行操作。我的建议是对您的数据进行非规范化处理，以便每个翻译都由索引中的单个项目表示，并通过 ID 号将它们链接起来。

# android - AutoCompleteTextView 在应用程序中不起作用

> ID：13177287
> 
> 赞同：1
> 
> 时间：2012-11-01T12:39:57.663
> 
> 标签：android, map, autocompletetextview

在我的 android 地图应用程序中，我想制作一个**AutocompleteVextView**

这是我的代码：

```
public class AutoComplete extends MapActivity  {
private MapController mapController;
private MyLocationOverlay myLocation;
private MapView mapView;
private  AutoCompleteTextView textView;
public ArrayAdapter<String> adapter;
private TextView mStatusView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_auto_complete);

    mapView = (MapView) findViewById(R.id.map_view);
    mapController = mapView.getController();
    mapController.setZoom(10);
    mapView.setBuiltInZoomControls(true);
    myLocation = new MyLocationOverlay(this, mapView);
    myLocation.enableMyLocation();
    myLocation.runOnFirstFix(new Runnable() {
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());
            myLocation.getLastFix();
            mapView.getOverlays().add(myLocation);

        }
     });

//AutocompleteView  

     AutoCompleteTextView autoCompView = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
      autoCompView.setAdapter(new PlacesAutoCompleteAdapter(this, R.layout.list_item));

   }

@Override
protected void onResume() {
    super.onResume();
        myLocation.enableMyLocation();
}

@Override
protected void onPause() {
    super.onPause();
        myLocation.disableMyLocation();
}

@Override
protected boolean isRouteDisplayed() {
    return true;
}

private static final String LOG_TAG = "ExampleApp";

private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
private static final String OUT_JSON = "/json";

private static final String API_KEY = "02m46CJ1ckrhGhQPU3KjnXiR90H1Ovjg7Bum5Q";

private ArrayList<String> autocomplete(String input) {
    ArrayList<String> resultList = null;

    HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    try {
        StringBuilder sb = new StringBuilder(PLACES_API_BASE + TYPE_AUTOCOMPLETE + OUT_JSON);
        sb.append("??location=37.787930,-122.4074990" + API_KEY); 
        sb.append("?sensor=true&key=" + API_KEY);
        sb.append("&&radius=5000");
        sb.append("&input=" + URLEncoder.encode(input, "utf8"));

        URL url = new URL(sb.toString());
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
            Log.v(LOG_TAG,jsonResults.toString() );

        }
    } catch (MalformedURLException e) {
        Log.e(LOG_TAG, "Error processing Places API URL", e);
        return resultList;
    } catch (IOException e) {
        Log.e(LOG_TAG, "Error connecting to Places API", e);
        return resultList;
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }

    try {
        // Create a JSON object hierarchy from the results
        JSONObject jsonObj = new JSONObject(jsonResults.toString());
        JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

        // Extract the Place descriptions from the results
        resultList = new ArrayList<String>(predsJsonArray.length());
        for (int i = 0; i < predsJsonArray.length(); i++) {
            resultList.add(predsJsonArray.getJSONObject(i).getString("description"));
        }
    } catch (JSONException e) {
        Log.e(LOG_TAG, "Cannot process JSON results", e);
    }
    Log.i("List", resultList.toString());
    return resultList;
} 
```

下面显示的代码也是 AutoComplete 类的一部分

```
 private class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements Filterable {
    private ArrayList<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.
                    resultList = autocomplete(constraint.toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
            }};
        return filter;
    }
}

    } 
```

这是我的代码，它在我的应用程序中不起作用，为什么？
你能给点建议吗..我是安卓新手。谢谢..

# java - 如何将本地文件名传递给 ClassPathXmlApplicationContext？

> ID：13177288
> 
> 赞同：4
> 
> 时间：2012-11-01T12:39:58.993
> 
> 标签：java, spring, classpath, applicationcontext

“本地文件名”是指资源文件与类文件位于同一目录中。在下面的情况下，这是`JUnitRunner.class`文件。[`getResource()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)如果路径不以`/`'开头， Java 的文件可以处理此问题

我不知道，如何做同样的`ClassPathXmlApplicationContext`构造函数？

```
 package springtests;

import java.io.File;
import java.net.URISyntaxException;
import java.net.URL;

import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class JUnitRunner {

    private final static Logger log = LoggerFactory.getLogger(JUnitRunner.class);

    @Test
    public void test() throws URISyntaxException {

        String filename = "test01.xml";

        URL url = getClass().getResource(filename);

        File file = new File(url.toURI());
        log.info("File exists: {}", file.exists());

        try {
            new ClassPathXmlApplicationContext(filename);
        }
        catch(Exception e) {
            log.error("Can't load context", e);
        }

    }
} 
```

输出如下

```
15:32:27,375 3 [main] INFO springtests.JUnitRunner - 文件存在：true
15:32:27,422 50 [main] INFO org.springframework.context.support.ClassPathXmlApplicationContext - 刷新 org.springframework.context.support.ClassPathXmlApplicationContext@ee3aa7：启动日期 [Thu Nov 01 15:32:27 MSK 2012]；上下文层次的根
15:32:27,475 103 [main] INFO org.springframework.beans.factory.xml.XmlBeanDefinitionReader - 从类路径资源 [test01.xml] 加载 XML bean 定义
15:32:27,477 105 [main] 错误 springtests.JUnitRunner - 无法加载上下文
org.springframework.beans.factory.BeanDefinitionStoreException: IOException 从类路径资源 [test01.xml] 解析 XML 文档；嵌套异常为 java.io.FileNotFoundException: 类路径资源 [test01.xml] 无法打开，因为它不存在
    在 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
    在 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)

...

```

**更新**

XML 文件与类文件位于同一文件夹中。从看到它的事实可以`getResource()`看出。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T12:49:26.973

我没有正确理解您在问什么，但是您是否尝试过：

```
new ClassPathXmlApplicationContext("classpath*:test01.xml"); 
```

这将在所有类路径中搜索`test01.xml`. [您可以在 Spring资源](http://static.springsource.org/spring/docs/3.0.x/reference/resources.html)文档页面中阅读有关此内容的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:03:21.760

所以，你在包中的 xml 文件`springtests`和 AppContext 的正确创建应该是

```
new ClassPathXmlApplicationContext("springtests/test01.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:49:36.117

它可能需要配置`DocumentBuilderFactory`. [参考](http://flylib.com/books/en/1.104.1.61/1/)

例子 ：

```
@BeforeClass
public static void init() {
    System.setProperty("javax.xml.parsers.DocumentBuilderFactory", "com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T09:27:51.730

可以从相对于当前类的位置加载应用程序上下文。

这是实现它所需要做的一切：

```
URL resourceUrl = JUnitRunner.class.getResource("test01.xml");
ApplicationContext applicationContext = new GenericXmlApplicationContext(
    new UrlResource(resourceUrl)); 
```

# c# - 如何在 MVC 中通过重定向到用户友好的错误页面来创建异常

> ID：13177291
> 
> 赞同：0
> 
> 时间：2012-11-01T12:40:03.993
> 
> 标签：c#, asp.net-mvc, exception, controller, elmah

我有一个生成 Word 文档的 MVC 操作：

```
 [HttpGet]
    public ActionResult ExportToWord(string docId)
    {
    try
    {
      //...
      //Word-document generating is done here...
      //...
      return File(stream, MIMEAssistant.GetMIMEType("docx"), fileName + ".docx");
    }
    catch (Exception e)
    {
        throw new Exception("Problem with generating! " + e.ToString());
    } 
```

如果我有，我会得到带有 URL 的 Asp.Net 标准异常

```
http://localhost:18314/Export/ExportToWord?docId=5 
```

如果我有，我有相同的 URL。重定向未完成。它必须去

```
http://localhost:18314/Home/ErrorPage. 
```

现在用户不会得到任何错误页面，只是重新加载页面。页面重新加载不正确，因为 URL 是

```
http://localhost:18314/Export/ExportToWord?docId=5 
```

我希望这是可以理解的描述:)

问题：如何正确重定向到 .../Home/ErrorPage 并使用 Elmah 日志记录工具发送异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:41:44.677

您可以`return RedirectToAction("ErrorPage", "Home");`代替抛出异常。有[`RedirectToAction`](http://msdn.microsoft.com/en-us/library/dd470154%28v=vs.98%29.aspx)允许传递路由值的重载（因此您可以传递错误 ID、异常类型等）。

**更新**

当您想使用 ELMAH 记录异常时，我建议手动记录错误并重定向到操作：

```
catch(Exception e)
{
    Elmah.ErrorSignal.FromCurrentContext().Raise(e);
    return RedirectToAction("ErrorPage", "Home");
} 
```

# .net - .net：从 Excel 表动态生成 SQL 数据库中的表

> ID：13177292
> 
> 赞同：2
> 
> 时间：2012-11-01T12:40:09.083
> 
> 标签：.net, c#-4.0

在我的项目中，我必须根据上传的 Excel 表创建一个数据库表。那么，一旦使用asp.net的文件上传控件上传了该文件，谁能告诉我如何从Excel工作表动态生成SQL数据库中的表？

例如，我有一个`sheet1.xlsx`这样的 Excel 表

```
ID   Name  MoblieNO
1    xyz   1234
2    zxy   5678
3    abc   9012 
```

上传文件后，它应该在 sql 数据库中创建一个具有相同列数和相同数据类型的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:23:05.950

# 几点考虑

*   在我的示例中，我使用 Excel 电子表格的 CSV 插入，只是为了简化事情。无论您使用哪个，请确保您使用库来处理文件解析（例如，对 CSV 使用 string.Split(',') 将无法正确处理 CSV 中所有可能的变化。

*   对于您使用的任何库，对于我的算法，如果您可以使用 x,y 坐标访问任何给定的单元格，事情会变得更容易。

*   我不是根据这样的数据确定列类型的专家，也许有一种万无一失的方法。但在我看来，这*总是*会非常不稳定和具体化。例如，从 INT 与 BIGINT 转换。您确定类型所基于的值可能仅为 123，但填写该电子表格的人可能除了能够输入 123456784305 之类的值，但您不*知道*是否基于 123 进行转换。

*   指定最大长度或使用 VARCHAR 与 TEXT 也是如此。如果不先遍历整个记录集并确定每列的最大可能值，就很难做到这一点。

*   基于最后两点，我会说最终将所有内容存储为 VARCHAR 以保持表的灵活性，然后在运行时转换内容会更容易。

# 一个可能的解决方案

很高兴在这里提供更多细节，但希望代码 + 注释能很好地解释事情。

```
class Program
{
    static void Main(string[] args)
    {
        string fileName = "Products.csv";

        /* First, put all of our lines and columns into a list...
         * My code assumes that any library you use for this would allow you to access a specific cell using x,y co-ordinatates.
         */
        List<List<string>> lines = new List<List<string>>();
        using (StreamReader csvReader = new StreamReader(fileName))
        {
            string line;
            while ((line = csvReader.ReadLine()) != null)
            {
                List<string> columns = new List<string>(line.Split(','));
                lines.Add(columns);

            }
        }

        /* Now, iterate through each line.
         * 1) Break it into a further list of the colums for that line
         * 2) If this is the first line, assume we have headers, which will be the names of the table columns
         * 3) Check the second row of that column and determine it's data type. If the value is empty, then go to the next row and check that.
         * 4) Keep checking down the rows for each column until you find a value that can determine the data type.
         * 5) Use this information to write out the appropriate CREATE TABLE command, and execute.
         */

        //Use this dictionary to keep track of the type of each column later on.
        Dictionary<string, string> tableTypes = new Dictionary<string, string>();
        StringBuilder tableQuery = new StringBuilder("CREATE TABLE " + getTableName(fileName) + " (");

        for (int row = 0; row < lines.Count; row++)
        {
            List<string> currentColumns = lines[row];
            for (int column = 0; column < currentColumns.Count; column++)
            {
                //If this is the first row, need to determine the table structure for this column.
                if (row == 0)
                {
                    string columnName = currentColumns[column];
                    //Now check the same column for the row below, and try to determine it's type.
                    for (int checkRow = 1; checkRow < lines.Count; checkRow++)
                    {
                        string typeValue = getType(lines[checkRow][column]);
                        if (typeValue != null)
                        {
                            //Found a valid type for this column, add to query.
                            tableQuery.Append(columnName + " " + typeValue);
                            if (column < (currentColumns.Count - 1))
                            {
                                tableQuery.Append(",");
                            }
                            else
                            {
                                tableQuery.Append(")");
                                //We're done building the query... Execute it.
                                Console.WriteLine("Creating new table: " + tableQuery.ToString());
                            }
                            tableTypes.Add(columnName, typeValue);

                            //Stop looking for a non-empty value...
                            break;
                        }
                    }
                }

                //We're not in the first row anymore, use the dictionary created above to determine what column names to put into your INSERT queries.
                else
                {
                    //Insert the rest of the rows here...
                }
            }
        }
        Console.ReadLine();
    }

    /// <summary>
    /// This method will determine the Type of an object based on a string value
    /// </summary>
    /// <param name="Value">The string representation of a value. Eg. "1", "1.0", "foo", etc</param>
    /// <returns></returns>
    static string getType(string Value)
    {
        if (String.IsNullOrEmpty(Value) || String.IsNullOrWhiteSpace(Value))
        {
            return null;
        }

        long longValue;
        decimal decimalValue;

        if (Int64.TryParse(Value, out longValue))
            return "BIGINT";

        if (Decimal.TryParse(Value, out decimalValue))
            return "DECIMAL";

        //If none of the above worked, just return the type of string
        return "NVARCHAR";
    }

    static string getTableName(string Value)
    {
        string[] values = Value.Split('.');
        string name = values[0];
        name = name.Replace(" ", "");
        return name;
    }
} 
```

# asp.net - 在没有 WCF 的情况下连接到 WCF Web 服务

> ID：13177295
> 
> 赞同：0
> 
> 时间：2012-11-01T12:40:21.823
> 
> 标签：asp.net, web-services

我们有一个 ASP.NET 2.0 站点。第 3 方创建了一个我们应该连接的 Web 服务，而我天真地期望创建一个 2.0 风格的 Web 服务。当我得到 url 时，我期待看到一个 .asmx 后缀......但是却得到了一个带有 .svc 后缀的 url。

转到该页面告诉我通过运行 svcutil 创建一个 WCF 客户端......但是，我们还没有运行 .NET 3.0+。

由于它是一个 Web 服务，我认为基本功能应该基本相同，但我坦率地承认我对 WCF 基本上一无所知（但。）

我是否可以期望这最终会起作用，或者是否存在某种潜在的阻塞问题（WCF Web 服务在某些深刻的方面本质上是不同的）？是否有创建基本客户端的简单路径（如果我们在 3.0+ 世界中，就像 svcutil 一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:44:31.037

如果它使用 BasicHttpBinding (SOAP 1.1)，它可能是可互操作的。

在VS2010的“添加服务引用”对话框中，点击“高级”，然后点击“添加Web引用”按钮。

# java - 为什么 java.lang.Class.newInstance0() 在 java 内存模型下不是严格正确的？

> ID：13177298
> 
> 赞同：8
> 
> 时间：2012-11-01T12:40:29.150
> 
> 标签：java, memory-model

[`java.lang.Class.newInstance0()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Class.java#Class.newInstance0%28%29)我在 JDK 1.7 Update 7 中遇到了以下注释：

> 注意：以下代码在当前 Java 内存模型下可能并不完全正确。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:58:15.553

我可以看到此代码中的唯一问题是“cachedConstructor”字段是易失性的，虽然它保证了线程之间的值可见性效果，但这个特定的代码块有一个怪癖，即不同的线程可以在值将被分配之前将 cachedConstructor 视为 null线程之一，即初始化序列不是原子的。这只会导致可能会同时分配 cachedConstructor 几次，但如果没有人特别依赖它将是同一个 Constructor 实例，则不会破坏代码。如果 cachedConstructor 初始化块将被同步，那么它将是原子的，即 cachedConstructor 只分配一次，而与竞争条件无关。

也就是说，代码应该可以正常工作，但只允许多个线程同时过度重新计算缓存值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:36:01.910

> 当前的 Java 内存模型

问题是“电流如何”。

那段代码可能很古老，1.4 或更早版本，从那以后就没有人碰过它。

作者可能知道正在研究一种新的内存模型。

# c# - 运算符“&”不能应用于“字符串”和“整数”类型的操作数

> ID：13177302
> 
> 赞同：0
> 
> 时间：2012-11-01T12:40:53.250
> 
> 标签：c#, .net, type-conversion

我正在将字符串转换为十六进制，然后执行 & 操作。这是似乎有问题的场景：

```
byte[] buffer;
string hexoutput;
char[] WaitXMSvalues = WaitXMS.ToCharArray(); // WaitXMS is a textbox, input = 10
foreach (char letter in WaitXMSvalues)
{
     // Get the integral value of the character. 
     int value = Convert.ToInt32(letter);

     // Convert the decimal value to a hexadecimal value in string form. 
     hexoutput = String.Format("{0:X}", value);
}            

buffer[0] = Convert.ToByte(hexoutput & 0xFF); 
```

在上面的行中给我一个错误：

```
Operator '&' cannot be applied to operands of type 'string' and 'int' 
```

这里有什么问题？

我在我的 C++ 应用程序中这样做了，如下所示：

```
buffer[0] = WaitXMS->getText().getHexValue32() & 0xFF; 
```

并且似乎工作正常。我的 C# 代码有什么问题？

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:43:20.930

`hexoutput`是一个字符串；`&`字符串和整数之间没有定义的操作 - 你在问题中打错了吗？如果您尝试应用字节掩码，则当值是某种整数/字节时，您必须这样做；*不是*作为字符串。

例如，以下内容会起作用，但有些毫无意义：

```
buffer[0] = (byte) (Convert.ToByte(hexoutput, 16) & 0xFF); 
```

还有一个重大错误是您的`hexoutput`变量是在循环**内部**定义的，但在外部访问，再次表明显示的代码**不是**实际代码 - 这会产生编译器错误：

> 当前上下文中不存在名称“hexoutput”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:44:12.787

您正在尝试在字符串（十六进制输出）和整数（0xFF）之间进行按位**与。**你不能那样做。

但最终，如果您的目标是拥有一个字节数组，那么您为什么首先将其转换为十六进制格式的字符串？您应该能够：

```
buffer[0] = value & 0xFF; 
```

# .net - 在调用 WCF 服务时验证 STS 颁发的安全令牌

> ID：13177307
> 
> 赞同：0
> 
> 时间：2012-11-01T12:41:01.407
> 
> 标签：.net, wcf, web-services, wif, sts-securitytokenservice

我们已扩展`SecurityTokenService`由`Windows Identity Foundation`(WIF) 提供。它按预期发出令牌，并在调用我们拥有的所有其他 WCF 服务时将 SAML 令牌添加到 SOAP 标头中。

我可以看到安全令牌中存在的`NotBefore`和`NotOnOrAfter`Saml 条件中的正确值。

`NotOnOrAfter`但令人惊讶的是，即使在 SOAP 标头中的安全令牌中存在的 Saml 条件中存在的时间戳之后调用服务时，对其他 WCF 服务的每次调用也会成功。

1.  我不明白为什么会这样。我是否需要编写一些代码来拒绝具有过期安全令牌的呼叫？
2.  我需要为它创建自定义绑定或行为吗？
3.  WIF 或 WCF 不会自动处理这个基本的事情吗？
4.  如果您能指出一些很好的文档来解释幕后发生的事情，那就太好了！

我正在使用 .NET 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:00:28.130

此验证由 提供`SecurityTokenHandler`。使用哪个令牌处理程序取决于您的令牌类型和您的配置。

回答你的观点：

1.  这取决于令牌处理程序。对于 saml 令牌，这应该为您完成。
2.  通常——没有。
3.  就像第 1 点一样。
4.  我个人反汇编 Microsoft.IdentityModel.dll。

检查您的 web.config`<microsoft.identityModel><service><securityTokenHandlers>`部分。如果它被更改并且您使用自定义处理程序，那么您可能已经覆盖了在`SecurityTokenHandler.ValidateToken`. 如果没有，那么您必须弄清楚您的令牌类型。如果是 SAML1.1 或 SAML2.0，则应对其进行验证。如果没有，请分享您的令牌类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T05:58:23.477

在 ValitTo 日期到期加上 MaxClockSkew 参数的时间后，对 wcf 服务的调用将被拒绝。您可以通过配置服务来管理该参数。

# android - Android BroadcastReceiver 在单独的项目中

> ID：13177308
> 
> 赞同：0
> 
> 时间：2012-11-01T12:41:03.707
> 
> 标签：android, android-intent, broadcastreceiver

我正在开发两个 Android 应用程序。第一个从活动中调用广播接收器。第二个包含从第一个应用程序调用的广播接收器。

当它与呼叫者活动在同一个应用程序中时，我已经设法进行广播呼叫。但是，当我将接收器带到单独的项目时，它不起作用。我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:05:15.277

这就是我注册接收器的方式：

```
 <receiver
        android:name=".TestReceiver"
        android:enabled="true" 
        android:exported="true"
        android:process=":deltaFO">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
            <action android:name="com.myapp.intent.action.FILE_OPERATION" />
        </intent-filter>

    </receiver> 
```

这就是我发送意图的方式

```
Intent intent = new Intent("com.myapp.intent.action.FILE_OPERATION");
        intent.putExtra("operation", operation);
        context.sendBroadcast(intent); 
```

这是接收意图的类：

```
public class TestReceiver extends BroadcastReceiver{
public final String TAG="TestReceiver";

@Override
public void onReceive(Context context, Intent intent) {
    Log.i(TAG,"EXTERNAL BROADCAST...");

} 
```

}

# java - 在 JavaEE 中创建具有适当分层的 Web 服务

> ID：13177311
> 
> 赞同：1
> 
> 时间：2012-11-01T12:41:10.737
> 
> 标签：java, jakarta-ee, jax-rs

我正在使用 Java EE 来运行我的后端系统，我有一个关于如何在创建 Web 服务方面适当分层的问题。

我几乎按照 DDD 的原则组织我的应用程序，这意味着我有一个域层、存储库层和一个服务层。所以服务层用@Stateless注解，它们是我的EJB。

现在，我可以为 JAX-RS 框架添加更多注释来为这个服务类添加注释……但我不知道这是否正确，原因如下：

1.  这不会混合分层吗？
2.  然后我怎么能对我的网络服务进行版本控制？假设我今天创建了一个 web 服务，明天我发现它真的很糟糕，但是在晚上有人创建了一个使用它的应用程序，如果我将其丢弃，应用程序将无法再使用。我想要的是可以在 www.myurl.com/api/v1/customers 上找到的 web 服务和 www.myurl.com/api/v2/a_new_customers_webservice 上的新 web 服务

这就是我想要的某种东西。

可能还有其他缺点吗？

那么解决方案是什么？如果我说我创建了另一组使用 JAX-RS 注释进行注释的类，然后这些方法可以在内部使用来自服务层中 EJB 的方法，我是否正确？

如果有另一个 Web 服务版本，我可以创建另一组使用其他 URL 和逻辑的类。还是我都错了？你会如何组织这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:28:45.970

根本问题是如何组织代码以供重用。正如您所指出的，您可以：

1.  使用 JAX-RS 注释您的 EJB 服务以使其成为 Web 服务；
2.  创建重用其他常见 EJB 服务（一级间接）的 EJB Web 服务（即使用 JAX-RS 注释）；
3.  创建将公共逻辑重用为 POJO（一级间接）的 EJB Web 服务。

这三个对我来说都是有效的选择。

如果您对 EJB 服务的 API 有信心，但对 Web 服务的 API 没有信心（可能存在阻抗不匹配），我会选择 2。

如果您对 EJB 服务应该做什么没有信心，那么这可能是首先要弄清楚的事情；）

如果您现在有信心*，*但怀疑将来可能会发生变化，那么我现在会选择最简单的解决方案 1，然后根据必须更改的内容在必要时进行重构。应用[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)。

# windows-phone - Windows Phone - 开发来电显示应用

> ID：13177317
> 
> 赞同：1
> 
> 时间：2012-11-01T12:41:25.523
> 
> 标签：windows-phone

我自己不是 Windows Phone 开发人员，所以我提前为我缺乏知识表示歉意。

我们为客户提供的产品之一是来电显示应用程序。该软件执行以下操作：

1.  检测来电并获取来电号码
2.  如果在联系人中找不到号码，请在我们的服务器上进行姓名搜索（对 XML 接口的 HTTP Get 请求）
3.  如果从我们的服务器中找到姓名，请在电话响铃时将其显示在屏幕上
4.  （其他东西，例如将结果存储到联系人等）

我们已经在 Android 和 Symbian 上实现了该应用程序，并且运行良好。我想知道这种类型的应用程序是否甚至可以在 Windows Phone 上使用。据我们的分包商称，以前的版本并非如此。我想知道这是否真的是真的，以及 WP8 中的情况是否发生了变化。

**我的问题：**

1.  应用程序可以作为后台进程运行吗？
2.  来电是否会触发后台进程可以检测到的事件？
3.  您可以实时从来电中获取来电者电话号码吗？
4.  您可以在来电期间在后台执行搜索吗？
5.  您可以在来电期间在屏幕上显示任何内容吗？

从我用谷歌搜索的内容来看，我只发现提到了“模糊”事件，没有提到“呼叫”事件或类似事件。这不是很有希望，但我想听听实际开发人员的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:50:04.020

是的（查找“后台代理”，[http://www.jeffblankenburg.com/2011/11/25/31-days-of-mango-day-25-background-agents/](http://www.jeffblankenburg.com/2011/11/25/31-days-of-mango-day-25-background-agents/)）。

您应该从那里开始，然后执行与您的应用程序规范相关的更多独立研究。

根据杰夫的文章：

启动 Visual Studio 并创建一个新项目。在 Silverlight for Windows Phone 下，选择 Windows Phone 应用程序。将其命名为“MyAgentApp”。

您现在已经创建了主应用程序。它将负责两件事：

1) 拥有后台代理可以更新信息的动态磁贴

2）启动和停止后台代理

后台代理本身必须存在于自己的特殊项目中。将新项目添加到您的解决方案，选择 Windows Phone 计划任务代理。将其命名为 MyAgent。此项目将包含您的自定义代码，这些代码将在后台运行并更新动态磁贴。

最后，这很重要，转到 MyAgentApp 项目并添加对 MyAgent 的项目引用。这将允许您从应用程序中注册您的代理。另外，请注意在 WMAppManifest.xml 中自动创建的条目：

```
<Tasks> 
      <DefaultTask Name="_default" NavigationPage="MainPage.xaml" /> 
      <ExtendedTask Name="BackgroundTask"> 
        <BackgroundServiceAgent Specifier="ScheduledTaskAgent" Name="MyAgent" Source="MyAgent" Type="MyAgent.ScheduledAgent" />
      </ExtendedTask> 
    </Tasks> 
```

现在是时候把所有东西都连接起来了。打开 MainPage.xaml 并添加两个按钮，一个用于启动代理，另一个用于停止代理：

```
<StackPanel VerticalAlignment="Center"> 
        <Button Content="Start Background Agent" 
               Click="StartButton_Click"/> 
        <Button Content="Stop Background Agent" 
               Click="StopButton_Click"/>  
    </StackPanel> 
```

在 MainPage.xaml.cs 中，连接按钮以启动和停止代理：

```
private const string TASK_NAME = "MyAgent";
private void StartButton_Click(object sender, RoutedEventArgs e) 
{ 
    StartAgent(); 
}

private void StopButton_Click(object sender, RoutedEventArgs e) 
{ 
    StopAgentIfStarted(); 
}

private void StartAgent() 
{ 
    StopAgentIfStarted();

    PeriodicTask task = new PeriodicTask(TASK_NAME); 
    task.Description = "This is our custom agent for Day 25 - Background Agents";
    ScheduledActionService.Add(task); 
#if DEBUG 
    // If we're debugging, attempt to start the task immediately 
    ScheduledActionService.LaunchForTest(TASK_NAME, new TimeSpan(0, 0, 1));
#endif 
}

private void StopAgentIfStarted() 
{ 
    if (ScheduledActionService.Find(TASK_NAME) != null) 
    { 
        ScheduledActionService.Remove(TASK_NAME); 
    } 
} 
```

请注意，要创建我们的自定义代理，我们正在创建一个新的 PeriodicTask。然后，我们在查找和停止代理时使用该名称作为标识符。另请注意，我们指定了 PeriodicTask.Description – 这是必填字段，将出现在 Settings | 我们应用程序名称下的后台任务。

在 MyAgent 项目中，打开 ScheduledAgent.cs 并添加以下代码：

```
protected override void OnInvoke(ScheduledTask task) 
{ 
    UpdateAppTile(GetLastUpdatedTimeMessage()); 
}
private string GetLastUpdatedTimeMessage() 
{ 
    return string.Format("Last Updated: {0}", DateTime.Now); 
}

private void UpdateAppTile(string message) 
{ 
    ShellTile appTile = ShellTile.ActiveTiles.First(); 
    if (appTile != null) 
    { 
        StandardTileData tileData = new StandardTileData 
        { 
            BackContent = message 
        };

        appTile.Update(tileData); 
    } 
```

}

ScheduledAgent 有一个重要的重写方法——OnInvoke。这是您的代理将执行其后台任务的地方。如果您的任务已完成并且您不再需要运行代理，则可以调用 NotifyComplete() 来表示任务已成功完成，或者调用 Abort() 来表示您正在取消任务。要保持任务按间隔运行，只需不要调用任何一个，这就是我们在这里所做的。

# java - 获取主页的实时股票数据

> ID：13177320
> 
> 赞同：1
> 
> 时间：2012-11-01T12:41:37.350
> 
> 标签：java, php, javascript, html, stockquotes

我想创建一个显示实时股票图表的主页。我还想为某些指标安装筛选功能。因此，我需要大约数千家公司的实时股票数据。我想获得的数据应该在很短的时间内（大约 5 秒）收到。最苛刻的部分是我想在很短的时间内一次性接收它们并将它们保存在表格中以用于其他一些功能。我刚刚找到了一些从雅虎或类似的东西获取 CSV 数据的方法。但这种方法是以减慢时间段为前提的。

我不确切知道这种方法是否有一个通用术语，但我真的很高兴能获得一些关于一些方法来解决这个问题的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:44:53.320

至少对于前端，您需要实现一个 ajax 例程来提取股票数据并相应地填充您的页面 - 您可以将此 ajax 例程粘贴在 setInterval javascript 调用中（每 5 秒设置一次）。这样，您无需刷新页面即可获得实时更新。

至于后端——我不了解股票报价网站的最新情况，但如果其中一个较大的网站有免费的 API，你可以通过它访问，我不会感到惊讶。一种带有 PHP 的服务器端语言 - 但是我不确定他们免费提供的最小间隔 - 无论如何，这是您的 javascript/ajax 例程将调用的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T12:26:01.787

您需要实现 web socket 服务器或用户 web socket api 来获取数据。有几个提供证券交易所数据的 API。这是我的建议。

1.  NodeJS服务器与[`Socket.io`](https://socket.io/docs/)
2.  带有 iOS、android、javascript、Angular、[java](https://github.com/Gottox/socket.io-java-client)的套接字客户端。

在 NodeJS 服务器上，您可以从 api 检索股票数据，例如检查此[链接。](https://www.npmjs.com/package/node.bittrex.api)一旦你有了数据，你就可以通过套接字发出它，在客户端你可以监听事件。

使用 bittrex 和 NodeJS 服务器的用例。

```
bittrex.websockets.client(function() {
 console.log('Websocket connected');
   bittrex.websockets.subscribe(['BTC-ETH'], function(data) {
     if (data.M === 'updateExchangeState') {
       data.A.forEach(function(data_for) {
         console.log('Market Update for '+ data_for.MarketName, data_for);
      });
    }
  });
}); 
```

# css - 为什么我的多列间距在 Chrome 中不起作用？

> ID：13177321
> 
> 赞同：5
> 
> 时间：2012-11-01T12:41:39.733
> 
> 标签：css, google-chrome, css-multicolumn-layout

我的 CSS 列在 Chrome 中的显示方式与它们在 Firefox 和 IE9 中的显示方式不同。这是 Firefox 中的正确显示：

![Firefox 中的列](../Images/152b988d7c123d950fa422b1020cc30b.png)

以下是它在 Chrome 中的错误显示方式：

![Chrome 中的列](../Images/386d85a520c7e4450aa3896175c72893.png)

我尝试将 to 更改`li`为`display: inline-block`，这是 Chrome 中的一种改进，但随后较窄的列表项出现在同一个“单元格”中。

```
h3, h4 {
    font-weight: bold;
    padding: 0.5em 0;
}
.results {
    margin-top: 1em;
    box-shadow: 0 0 20px #99AABB;
    background-color: white;
    border: 3px solid #CCCCCC;
    margin-left: 2.7em;
    padding: 0 1em;
    position: absolute;
    right: 2.5em;
    text-align: left;
    z-index: 10;
}
.results ul {
    -moz-column-count: 6;
    -moz-column-gap: 1em;
    -webkit-column-count: 6;
    -webkit-column-gap: 1em;
    column-count: 6;
    column-gap: 1em;
}
.results ul.articles {
    -moz-column-count: 3;
    -moz-column-gap: 1em;
    -webkit-column-count: 3;
    -webkit-column-gap: 1em;
    column-count: 3;
    column-gap: 1em;
}
```

```
<div class="results">
    <h3>Search Results</h3>
    <div>
        <h4>Players</h4>
        <ul class="plain">
            <li>Barry Bannan</li>
            <li>Gareth Barry</li>
            <li>Leon Barnett</li>
            <li>Kyle Bartley</li>
            <li>Barry Ferguson</li>
            <li>Ashley Barnes</li>
            <li>Marvin Bartley</li>
            <li>Shaun Barker</li>
            <li>Arran Lee-Barrett</li>
            <li>Tyrone Barnett</li>
            <li>Ross Barkley</li>
            <li>Ronald Zubar</li>
            <li>Barry Douglas</li>
            <li>Patrick Barrett</li>
            <li>Darren Barr</li>
            <li>Ross Barbour</li>
            <li>David Barron</li>
            <li>Marc Bartra</li>
            <li>Beñat Etxebarria</li>
            <li>Wakaso Mubarak</li>
            <li>Abdel Barrada</li>
            <li>José Barkero</li>
            <li>Antonio Barragán</li>
            <li>Javier Baraja</li>
            <li>Sambou Yatabaré</li>
            <li>Cédric Barbosa</li>
            <li>Iheb Mbarki</li>
            <li>Barel Mouko</li>
            <li>Maxime Barthelme</li>
            <li>Joey Barton</li>
            <li>Christopher Glombard</li>
            <li>Filippo Lombardi</li>
            <li>Víctor Ibarbo</li>
            <li>Pablo Barrientos</li>
            <li>Andrea Barzagli</li>
            <li>Édgar Barreto</li>
            <li>Willyan Barbosa</li>
            <li>Barreto</li>
            <li>Tranquillo Barnetta</li>
            <li>Philipp Bargfrede</li>
            <li>Anass Achahbar</li>
            <li>Bart Schenkeveld</li>
            <li>Bart van Hintum</li>
            <li>Richard Barroilhet</li>
            <li>Bart Biemans</li>
            <li>Renato Ibarra</li>
            <li>Barry Maguire</li>
            <li>Nicklas Bärkroth</li>
            <li>Modou Barrow</li>
            <li>Hélder Barbosa</li>
            <li>Tó Barbosa</li>
            <li>Diego Barcellos</li>
            <li>Jean Barrientos</li>
            <li>Phil Bardsley</li>
        </ul>
    </div>
    <div>
        <h4>Clubs</h4>
        <ul class="plain">
            <li>Barnsley</li>
            <li>Barcelona</li>
        </ul>
    </div>
    <div>
        <h4>Articles</h4>
        <ul class="plain articles">
            <li>Rodgers has faith in youngsters</li>
            <li>Arsenal secure win in Barcelona</li>
            <li>Terry punishment a farce - Barton</li>
            <li>Barton says reputation 'unfair'</li>
            <li>Minnows BATE upset Bayern Munich</li>
            <li>Puyol ruled out of 'El Clasico'</li>
            <li>Hill outraged by penalty decision</li>
            <li>Swindon hit by transfer embargo</li>
            <li>VIDEO: Suarez behaviour embarrassing - Pulis</li>
            <li>Barcelona v Celtic</li>
            <li>Celtic can beat Barca, says Miku</li>
            <li>Barcelona wary of Celtic threat</li>
            <li>Ledley set for his 'biggest game'</li>
            <li>VIDEO: Ferguson to 'deal' with Ferdinand</li>
            <li>Celtic must be bold in Barcelona</li>
            <li>Black footballers' group possible</li>
            <li>AUDIO: Lennon proud of 'magnificent' Celtic</li>
            <li>Barnsley complete Rooney signing</li>
            <li>Celtic shine despite Barca blow</li>
            <li>Lennon blast at critic Schuster</li>
            <li>AUDIO: I am not God, insists Di Canio</li>
        </ul>
    </div>
</div>
```

我[制作了一个 JSFiddle](http://jsfiddle.net/B5f7n/)来演示这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:17:27.123

给父元素（在这个例子中，它是 body 标签）和“结果”div 一个 CSS 样式的 position: relative。（另外，从 .results CSS 中删除 position:absolute。）

```
body, .results {
  position: relative;
} 
```

[修改后的 JSFiddle](http://fiddle.jshell.net/2e2B7/1/)

如果 body 不是您实际用例中的父元素，您只需要一个带有 position:relative 的 .results div 的包装器。

# json - 如何使用 Bloomberg JSON API 作为 JSONP

> ID：13177322
> 
> 赞同：0
> 
> 时间：2012-11-01T12:41:39.127
> 
> 标签：json, jsonp, bloomberg

为了创建图表，我发现 Bloomberg 提供的是 JSON 格式的数据。请查看此 URL：[http](http://www.bloomberg.com/markets/chart/data/1Y/IBM:US) ://www.bloomberg.com/markets/chart/data/1Y/IBM:US这以 JSON 格式发送图表数据。我想在 Ajax 请求中获取这些数据，以便解析它并创建图表。但我不能使用 Ajax，因为这是一个跨域事务。我需要使用 JSONP。我不确定 Bloomberg API 如何支持 JSOP。如果您知道我们如何将 JSONP 与上述 url 一起使用，请告诉我。如果有任何替代方案，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:52:17.577

你不能。JSONP 要求服务器参与事务，以便它可以正确处理回调注入。如果服务器不提供它，则无法单方面强制它。

根据您的托管服务提供商的政策，您*可以*做的是让您的服务器端脚本加载彭博数据，然后从那里传递它，或者打印在初始页面中，或者作为对您自己的 JSON/JSONP 调用服务器（这可能是一个更好的主意，因为它使您可以更灵活地动态更新数据，并且还允许缓存页面的标记）。

请注意，一些托管服务提供商不允许传出请求，因为他们不希望他们的服务器被用作代理（毕竟，这基本上是我建议你做的）。您可以选择将 Bloomberg 列入白名单，或者您可能只需要将传出流量保持在最低限度（即在您的服务器上缓存 Bloomberg 数据，这样您就不会在每次有人加载您的页面时都刷新它）。检查您的托管条款。

# python - 无法从 SQLITE3 数据库中获取最后一行 ID

> ID：13177324
> 
> 赞同：3
> 
> 时间：2012-11-01T12:41:42.990
> 
> 标签：python, sqlite, python-2.7

我有一个要求输入的脚本，然后将该输入插入到表中。下次运行脚本时，我希望它告诉用户最后输入的 id 是什么。

该表如下所示： id INTEGER PRIMARY KEY AUTOINCREMENT, userid TEXT, domain TEXT, password TEXT, webserver TEXT, sqlserver TEXT

有人告诉我可以使用 SELECT seq from SQLITE_SEQUENCE WHERE name='table_name' 但它会产生以下文本：而不是最后一行的 id。

请注意，我是一个非常新的 Python / SQLite3 编码器！

供您参考，到目前为止的代码如下所示：

```
#!/usr/bin/python
import os, sys, sqlite3
######## CHECK SYSTEM COMPATIBILITY ########
if os.name =='posix':
    os.system("clear")#CLEAR SCREEN#
    pass
else:
    sys.exit("Operating System is not supported")
######## END CHECK SYSTEM COMPATIBILITY ########
######## CHECK IF SCRIPT IS RUN AS ROOT ########
#if os.geteuid() != 0:
#       sys.exit("Script must be run as root")
#else:
#       pass
####### END CHECK IF SCRIPT IS RUN AS ROOT ########
####### CREATE DATABASE AND CHECK IF TABLE EXISTS ##########
conn = sqlite3.connect("dat.db")
c = conn.cursor()
c.execute ('''CREATE TABLE IF NOT EXISTS kunder
            (id INTEGER PRIMARY KEY AUTOINCREMENT, userid TEXT, domain TEXT, password      TEXT, webserver TEXT, sqlserver TEXT)''')
conn.commit()
print c.execute ("SELECT seq from SQLITE_SEQUENCE WHERE name='kunder'")
conn.close()
######## DONE CREATE DATABASE AND CHECK IF TABLE EXISTS #########
###### ASK FOR INPUT ##########
########### HERE NEEDS TO BE A CHECK TO DETERMINE THE LATEST USERID - ALSO NEEDS TO BE    FOR WEBSERVER AND PASSWORD #################
userid = raw_input("Enter userid: ")
########### HERE NEEDS TO BE A CHECK TO SEE IF USERID EXISTS!!!!!#####################
domain = raw_input("Enter domain: ")
password = raw_input("Enter password: ")
########### NEEDS TO BE A WAY TO AUTOGENERATE A PASSWORD!!! ####################
webserver = raw_input("Enter webserver: ")
sqlserver = raw_input("Enter sqlserver: ")
###### FINISHED ASK FOR INPUT #######
######## DATABASE ###########
conn = sqlite3.connect("dat.db")
c = conn.cursor()
c.execute ("INSERT INTO kunder (userid, domain, password, webserver, sqlserver) VALUES    (?,?,?,?,?)", (userid, domain, password, webserver, sqlserver))
conn.commit()
conn.close()
####### DONE WITH DATABASE ########## 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:57:03.927

The SQL statement `SELECT max(id) FROM table_name` should give you the maximum id. If you're auto-incrementing then this would be the same as the last inserted.

Edit: To get the actual value in python means reading it from the cursor:

```
cursor = sqlite3.execute('SELECT max(id) FROM table_name')
max_id = cursor.fetchone()[0] 
```

`fetchone()` returns the first row from the select statement as a tuple (unless a row_factory is used), so `fetchone()[0]` will, in this case, return the first (and only) column in the first (and only) row, i.e. the max(id).

See [http://docs.python.org/2/library/sqlite3.html](http://docs.python.org/2/library/sqlite3.html) for more info.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:54:18.660

尝试使用`sqlite3_last_insert_rowid()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-04T21:34:49.990

```
import sqlite3

data_person_name = [('Michael', 'Fox'),
                    ('Adam', 'Miller'),
                    ('Andrew', 'Peck'),
                    ('James', 'Shroyer'),
                    ('Eric', 'Burger')]

con = sqlite3.connect(":memory:")
c = con.cursor()

c.execute('''CREATE TABLE q1_person_name
             (name_id INTEGER PRIMARY KEY,
              first_name varchar(20) NOT NULL,
              last_name varchar(20) NOT NULL)''')

for data_person in data_person_name:
    c.execute('INSERT INTO q1_person_name(first_name, last_name) VALUES (?,?)', data_person)
    # get the last rowid inserted
    last_name_id = c.lastrowid
    print(last_name_id) 
```

# c# - C# 嗅探器 - 接收到的数据

> ID：13177326
> 
> 赞同：-2
> 
> 时间：2012-11-01T12:41:46.553
> 
> 标签：c#, networking, sniffer

我尝试用 C# 编写嗅探器，并在 Google 中找到[了本](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)教程。我添加到类 TCPHeader

```
string wiad = Encoding.UTF8.GetString(byTCPData);
if (wiad.Contains("|"))
    MessageBox.Show(wiad); 
```

查看收到的消息，但我只能看到发送的数据包。我应该如何修改它以查看接收到的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:48:33.910

你可以实现一个基于 fiddler 核心库的嗅探器，我认为这是更好的选择。谢谢

FiddlerCore - 适用于您的 .NET 应用程序的 Fiddler 代理引擎 www.fiddler2.com/core/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T00:01:39.017

我遇到了同样的问题，最后发现是 Windows 防火墙阻止了你嗅探传入的包。关闭windows防火墙后，它会工作。Win10中可以在控制面板中关闭，或者 `netsh advfirewall set allprofiles state off` 像这样使用命令或者使用c#代码

```
public static void TurnOffFireWall()
{
    // Have only been tested in Win10
    Process proc = new Process();
    string top = "netsh.exe";
    proc.StartInfo.Arguments = "advfirewall set allprofiles state off";
    proc.StartInfo.FileName = top;
    proc.StartInfo.UseShellExecute = false;
    proc.StartInfo.RedirectStandardOutput = true;
    proc.StartInfo.CreateNoWindow = true;
    proc.Start();
    proc.WaitForExit();
} 
```

请注意，我只在win10上测试过，在其他系统下，命令可能会有点不同。

# c# - 如何将字符串数据类型转换为 SQL 的 varbinary 等效数据类型？

> ID：13177330
> 
> 赞同：0
> 
> 时间：2012-11-01T12:42:02.373
> 
> 标签：c#, sql-server, type-conversion

很抱歉问了愚蠢的问题，因为我是 C# 的新手。

目前正在使用 OLEDB 在 c# 中执行任务。场景是，我想插入一个包含用户名、密码等信息的表。数据库是 SQL Server。列密码具有数据类型 varbinary(100)。

我想从字符串数据类型转换为 SQL 的 varbinary 等效数据类型。我尝试了一点，但没有成功。

最初我只是尝试使用`reader.GetString(5)`. 但我得到的例外是：

```
"Specified cast is not valid." 
```

***我忘了在下面提到的事情***

我使用的阅读器是 OleDbDataReader。

```
oleParameter[7] = new OleDbParameter("@Password", OleDbType.VarBinary, 100);
oleParameter[7].Value = reader1.GetBytes(5); 
```

（这里我从一个表中读取并插入到另一个表中。）

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:50:38.133

您不能将二进制数据作为字符串读取，请使用该[`SqlDataReader.GetBytes`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getbytes%28v=vs.100%29.aspx)方法。

看看[这个](https://stackoverflow.com/questions/5371222/getting-binary-data-using-sqldatareader)...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:54:42.980

您需要在应用程序和 varbinary 列之间发送/接收字节。取回字节数组后，可以将其转换为字符串：

```
var bytes = reader.GetBytes(5);
var myString = Encoding.UTF8.GetString(bytes); // use the same encoding used
                                               // to create the bytes
                                               // when saving to the DB. 
```

要将字符串转换为字节数组：

```
var bytes = Encoding.UTF8.GetBytes(myString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:20:55.803

我得到了解决方案。

而不是编写下面的代码行，

```
oleParameter[7] = new OleDbParameter("@Password",  OleDbType.VarBinary, 100);
oleParameter[7].Value = reader1.GetBytes(5); 
```

我只是尝试如下代码：

```
 byte[] array = (byte[])reader1.GetValue(9);
  oleParameter[7] = new OleDbParameter("@Password",array); 
```

我没有指定该字段的数据类型，而是使用了构造函数 OleDbParameter(string name, object value)。

它工作正常。

感谢 Khellang 和 Eren Ersönmez 的回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T17:16:29.087

我只是想解释一下为什么 reader.GetBytes(5) 不起作用。我自己以前也遇到过这个问题。

为了使其正常运行，该特定字段不能在其中遇到任何空值。

您可以在尝试执行 .GetBytes(5) 操作之前使用 IsDBNull(reader(5)) 语句测试该值。

仅供参考！

# java - java中的高效状态机模式

> ID：13177347
> 
> 赞同：1
> 
> 时间：2012-11-01T12:43:16.053
> 
> 标签：java, performance, simulation, state-machine

我正在编写一个 java 模拟应用程序，它有很多实体要模拟。这些实体中的每一个在系统中的任何时候都具有一定的状态。对这种实体建模的一种可能且自然的方法是使用[状态（或状态机）](http://en.wikipedia.org/wiki/State_pattern)模式。问题是如果有很多状态切换，它会在运行时创建很多对象，这可能会导致系统性能不佳。我有哪些设计替代方案？我希望性能成为可维护性之后的主要标准。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:19:46.323

下面的代码将为您提供高性能（~10ns/事件）零运行时 GC 状态机实现。只要您在系统或组件中有状态的概念，就使用显式状态机，这不仅使代码干净且可扩展，而且让人们（甚至不是程序员）可以立即看到系统所做的事情，而无需挖掘大量回调：

```
abstract class Machine {
    enum State {
      ERROR,
      INITIAL,
      STATE_0,
      STATE_1,
      STATE_2;
    }

    enum Event {
      EVENT_0,
      EVENT_1,
      EVENT_2;
    }

    public static final int[][] fsm;
    static {
      fsm = new int[State.values().length][];
      for (State s: State.values()) {
        fsm[s.ordinal()] = new int[Event.values().length];
      }
    }

    protected State state = State.INITIAL;
    // child class constructor example
    // public Machine() {
    //   // specify allowed transitions
    //   fsm[State.INITIAL.ordinal()][Event.EVENT_0.ordinal()] = State.STATE_0.ordinal();
    //   fsm[State.STATE_0.ordinal()][Event.EVENT_0.ordinal()] = State.STATE_0.ordinal();
    //   fsm[State.STATE_0.ordinal()][Event.EVENT_1.ordinal()] = State.STATE_1.ordinal();
    //   fsm[State.STATE_1.ordinal()][Event.EVENT_1.ordinal()] = State.STATE_1.ordinal();
    //   fsm[State.STATE_1.ordinal()][Event.EVENT_2.ordinal()] = State.STATE_2.ordinal();
    //   fsm[State.STATE_1.ordinal()][Event.EVENT_0.ordinal()] = State.STATE_0.ordinal();
    //   fsm[State.STATE_2.ordinal()][Event.EVENT_2.ordinal()] = State.STATE_2.ordinal();
    //   fsm[State.STATE_2.ordinal()][Event.EVENT_1.ordinal()] = State.STATE_1.ordinal();
    //   fsm[State.STATE_2.ordinal()][Event.EVENT_0.ordinal()] = State.STATE_0.ordinal();
    // }

    public final void onEvent(Event event) {
      final State next = State.values()[ fsm[state.ordinal()][event.ordinal()] ];
      if (next ==  State.ERROR) throw new RuntimeException("invalid state transition");
      if (acceptEvent(event)) {
        final State prev = state;
        state = next;
        handleEvent(prev, event);
      }
    }

    public abstract boolean acceptEvent(Event event);
    public abstract void handleEvent(State prev, Event event);
} 
```

如果将 fsm 替换为大小为 S*E 的单向数组，它还将改善状态机的高速缓存邻近特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:35:30.177

我的建议：
您是否可以配置“转换管理”（即通过 XML）。

将 XML 加载到保存状态的存储库。
内部数据结构将是一个 Map：

```
Map<String,Map<String,Pair<String,StateChangeHandler>>> transitions; 
```

我选择的原因是，这将是从状态名称
到“输入”和新状态的映射：
每个映射定义了可能的输入和它导致的新状态之间的映射，该映射由状态名称和StateChangeHandler 稍后我将详细说明
存储库中的更改状态方法将具有以下签名：

`void changeState(StateOwner owner, String input)`

这种方式存储库在状态所有者使用它的意义上是无状态的，您可以复制一份，
而不必担心线程安全问题。
StateOwner 将是您的需要状态更改的类应该实现的接口。
我认为界面应该是这样的：

```
public interace StateOwner {
   String getState();
   void String setState(String newState);
} 
```

此外，您将拥有一个 ChangeStateHandler 接口：

```
public interface StateChangeHandler {
    void onChangeState(StateOwner, String newState) {
    }
} 
```

当存储库的 changeState 方法被调用时，它将
在数据结构中检查 stateOwner 的当前状态是否具有“输入”映射。如果它有这样的映射，它将检查输入是否有要更改的新状态，并调用 onChangeState 方法。
我会建议你有一个 StateChangeHandler 的默认实现，当然还有更明确​​地定义状态改变行为的子类。

正如我之前提到的，所有这些都可以从 XML 配置中加载，并且使用反射，您可以根据名称（如 XML 中所述）实例化 StateChangeHandler 对象，并将其保存在存储库中。

效率和良好的性能依赖于并使用以下几点获得：
一种。存储库本身是无状态的 - 不应保留 StateOwner 的内部引用。
湾。您在系统启动时加载一次 XML，之后您应该使用内存数据结构。
C。您将仅在需要时提供特定的 StateChangeHandler 实现，默认实现基本上什么都不做。
d。无需实例化处理程序的新对象（因为它们应该是无状态的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:01:32.370

这个提议不是通用的，它不[符合 UML](http://en.wikipedia.org/wiki/UML_state_machine) ，但对于[简单的事情来说，它是一个简单的 mean](http://en.wikipedia.org/wiki/KISS_principle)。

```
import java.util.HashMap;
import java.util.Map;

class Mobile1
{
   enum State {
      FIRST, SECOND, THIRD
   }

   enum Event {
      FIRST, SECOND, THIRD
   }

   public Mobile1() {       // initialization may be done by loading a file
      Map< Event, State > tr;
      tr = new HashMap<>();
      tr.put( Event.FIRST, State.SECOND );
      _fsm.put( State.FIRST, tr );
      tr = new HashMap<>();
      tr.put( Event.SECOND, State.THIRD );
      _fsm.put( State.SECOND, tr );
      tr = new HashMap<>();
      tr.put( Event.THIRD, State.FIRST );
      _fsm.put( State.THIRD, tr );
   }

   public void activity() {        // May be a long process, generating events,
      System.err.println( _state );// to opposite to "action()" see below
   }

   public void handleEvent( Event event ) {
      Map< Event, State > trs = _fsm.get( _state );
      if( trs != null ) {
         State futur = trs.get( event );
         if( futur != null ) {
            _state = futur;
           // here we may call "action()" a small piece of code executed
           // once per transition
         }
      }
   }

   private final Map<
      State, Map<
         Event, State >> _fsm   = new HashMap<>();
   private /* */ State   _state = State.FIRST;
}

public class FSM_Test {
   public static void main( String[] args ) {
      Mobile1 m1 = new Mobile1();
      m1.activity();
      m1.handleEvent( Mobile1.Event.FIRST );
      m1.activity();
      m1.handleEvent( Mobile1.Event.SECOND );
      m1.activity();
      m1.handleEvent( Mobile1.Event.FIRST );   // Event not handled
      m1.activity();
      m1.handleEvent( Mobile1.Event.THIRD );
      m1.activity();
   }
} 
```

输出：

```
FIRST
SECOND
THIRD
THIRD
FIRST 
```

# .net - AForge FFT (C#, .Net)

> ID：13177351
> 
> 赞同：1
> 
> 时间：2012-11-01T12:43:25.537
> 
> 标签：.net, fft, aforge

我有一个关于 AForge FFT 的问题。向 fft 我发送具有 2048 个元素的复杂数组。退出时我有 2048 个复杂元素。首先总是 = (127,0) 或 (128, 0-1)。而在 DFT 的属性上，前 1024 个元素 = 最后 1024 个元素，但对于 AForge.Math.FourierTransform.FFT 来说并非如此。我不明白我需要做什么。请帮我。我将其用作：

```
Complex [] Array =new Complex [2048];
/*******fill the array************/
FourierTransform.FFT(Array, FourierTransform.Direction.Forward); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:27:36.957

第一个元素对应于 DC (0 Hz) 分量，因此它通常等于用于收集输入数据的模拟硬件中的任何残余 DC 偏移。

对于纯实输入，FFT 的一半输出是冗余的，因为在这种情况下存在复共轭对称性。因此，只需使用 bin 0..1023 来表示从 0 到 Fs / 2 的频率（如果您关心绝对值，则应用 2 系数来补偿负频率 bin）。

有关解释 FFT 输出箱中的值的更多信息，请参阅[此答案](https://stackoverflow.com/a/4371627/253056)。

# ms-access - 对 Interbase DB 的联合查询访问

> ID：13177354
> 
> 赞同：1
> 
> 时间：2012-11-01T12:43:36.033
> 
> 标签：ms-access, odbc, interbase

我正在通过 ODBC (Easysoft) 版本 7 在 Interbase 数据库上执行来自 Access 2010 的查询。一切正常，除非我来触发这样的联合查询：

```
SELECT TRIP.TRIPDATE, RESERVATION.BOOKINGREF, RESERVATION.LEADNAME, TRIP.DRIVERID, RESERVATION.STATUS, RESERVATION.DATECANCELLED, TRIP.TRANSPORTTYPEID
FROM TRIP INNER JOIN RESERVATION ON TRIP.TRIPID = RESERVATION.ARRIVALTRIPID
WHERE (((TRIP.TRIPDATE) Between #2/1/2012# And #2/29/2012#) AND ((TRIP.DRIVERID)=2) AND ((RESERVATION.DATECANCELLED) Is Null) AND ((TRIP.TRANSPORTTYPEID)=12))

UNION 

SELECT TRIP.TRIPDATE, RESERVATION.BOOKINGREF, RESERVATION.LEADNAME, TRIP.DRIVERID, RESERVATION.STATUS, RESERVATION.DATECANCELLED, TRIP.TRANSPORTTYPEID
FROM TRIP INNER JOIN RESERVATION ON TRIP.TRIPID = RESERVATION.DEPARTURETRIPID
WHERE (((TRIP.TRIPDATE) Between #2/1/2012# And #2/29/2012#) AND ((TRIP.DRIVERID)=2) AND ((RESERVATION.DATECANCELLED) Is Null) AND ((TRIP.TRANSPORTTYPEID)=12)); 
```

当我从 Access 运行此查询时，我得到

> "ODBC --调用失败，[Easysoft][Interbase]动态 SQL 错误，SQL 错误代码 = -104，令牌未知 -line1，char 0，((#-104)"

自行运行选择查询时，它们可以正常工作，但是通过 UNION 加入时，我会收到此错误。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:41:45.797

您没有提及您的查询是直通查询还是在 Access 查询中使用链接的 ODBC 表。

### 如果您使用的是普通的 Access 查询

![正常访问查询](../Images/974897d996560016f2c3438babfbdb38.png)

在普通 Access 查询中使用链接的 ODBC 表时，Access 数据引擎将根据需要重写查询，以使它们与其他数据库引擎兼容。
有时，它可能会失败。

1.  确保每个`SELECT`查询都能独立运行并返回正确的数据。

2.  尝试更简单的`UNION`查询以确保问题来自`UNION`关键字本身。

3.  尝试`UNION ALL`

4.  尝试改用直通查询。

### 如果您使用的是直通查询

![直通查询](../Images/8ed13a158e3d49b4df87d8f54bfa48ec.png)

直通查询逐字发送到 ODBC 引擎，Access 只收集结果而不重写查询本身。

1.  确保每个`SELECT`查询都作为传递查询工作并独立返回正确的数据。

2.  确保[为 Interbase SQL 正确格式化文字日期](http://www.firebirdsql.org/en/firebird-date-literals/)。
    您使用的那些对于 Access SQL 是正确的，但不同的数据库接受不同的格式。

3.  尝试使用仅涉及 1 或 3 个字段的`UNION`简单语句进行更简单的查询。`SELECT`

4.  试试`UNION ALL`。

5.  您没有在问题中显示它，但以防万一，如果您使用了`ORDER BY`语句，则[必须包装](https://stackoverflow.com/questions/354224/combining-union-all-and-order-by-in-firebird)`UNION`查询。

6.  尝试转换字段的数据类型。可能是[某些字段的数据被错误地解释](http://www.delphifaq.com/faq/databases/interbase/f24.shtml)并且联合失败，因为它假设检索到的数据是不同的类型。

7.  请尝试改用标准 Access 查询。

# html - 如何将 Youtube 视频嵌入 HTML5 标签？

> ID：13177359
> 
> 赞同：19
> 
> 时间：2012-11-01T12:44:05.430
> 
> 标签：html, youtube, youtube-api

我正在实施需要将 youtube 视频嵌入 HTML5 标记的网站。你能告诉我我应该如何在不使用的情况下嵌入其中`<iframe>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-21T15:18:39.720

没有 Javascript 就没有办法做到这一点。但是出色的 MediaElement.js 库将为此目的出色地工作：

[http://mediaelementjs.com](http://mediaelementjs.com)

上面的示例显示了使用带有`<video>`标签的 YouTube 视频，但对于不支持 Flash 的浏览器，它也有一个后备方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T14:25:01.433

在不违反 YouTube 服务条款的情况下，您无法提取视频的来源。在网页中嵌入视频的唯一受支持方法是使用 iframe 嵌入。

# ruby-on-rails-3 - rails mongoid3 和 SEO URL

> ID：13177361
> 
> 赞同：0
> 
> 时间：2012-11-01T12:44:10.090
> 
> 标签：ruby-on-rails-3, seo, mongoid3

有没有为 mongoid3 gem 制作“friendly_ids”的好方法？

*slugoid* 似乎已被弃用，并且*KEY*不再是 mongoid3 的一部分。

任何答案都会非常有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:53:20.673

我正在使用**[mongoid-slugify](https://github.com/fxposter/mongoid-slugify)**，您只需提供一种生成 slug 的方法，例如：

```
def generate_slug
   self.name.parameterize
end 
```

在该代码中，我假设您的模型中有**名称**字段

# php - MySQL 更新 WHERE

> ID：13177364
> 
> 赞同：1
> 
> 时间：2012-11-01T12:44:13.033
> 
> 标签：php, mysql, select

我感觉我的语法不正确，但我无法缩小正在发生的事情的范围。我在 phpMyAdmin SQL 查询中运行该语句没有问题，所以希望我能指出正确的方向。我的代码如下：

```
else if ($resultdetails === 1) {
    $query3 = "update customer_det set `10k`='$_10k', 
      `14k`='$_14k', `18k`='$_18k', `21k`='$_21k', `22k`='$_22k', 
      `24k`='$_24k', `925k`='$_925k', `coins`='$coins', `bars`='$bars' 
      where `id` = '".$uid."'";
    $result3 = mysql_query($query3);
} 
```

`$resultdetails`是一个带有 EXISTS 函数的变量集。在 SQL 查询中，它`1`为我返回，因为我正在寻找的行确实存在。所以应该没有问题。

我尝试了双倍`==`和三倍，结果似乎没有任何差异。我相信三元组`===`意味着它是相同的，即数据类型相同且值相同。

我认为这里的问题是 WHERE 语句。任何想法或建议将不胜感激。我忘了提到`customer_det`要更新的表`id`是主键，自动递增。我`$uid`也从数据库中提取变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:55:00.673

你的sql查询是对的！但你`else if`的问题！看到您添加`===`，更改它，`==`我也怀疑您的变量声明，您的代码将如下所示：

```
else if ($resultdetails == 1) {
$query3 = "update customer_det set `10k`='".$_10k."',
`14k`='".$_14k."', `18k`='".$_18k."',
`21k`='".$_21k."', `22k`='".$_22k."', `24k`='".$_24k."', `925k`='".$_925k."', `coins`='".$coins."', `bars`='".$bars."' where `id` = '".$uid."'";
$result3 = mysql_query($query3);
} 
```

**编辑：**

```
 if (CONDITION :: IF FOUND ON DATABASE) {
  $query3 = "update customer_det set `10k`='".$_10k."',
 `14k`='".$_14k."', `18k`='".$_18k."',
 `21k`='".$_21k."', `22k`='".$_22k."', `24k`='".$_24k."', `925k`='".$_925k."',        `coins`='".$coins."', `bars`='".$bars."' where `id` = '".$uid."'";
 $result3 = mysql_query($query3);
 } else {
 // Insert query if not found
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:50:17.437

检查和的数据`$uid`类型`$_blahblah`

试试这个查询——

```
else if ($resultdetails == 1) {
    $query3 = "update customer_det set `10k`='$_10k', 
      `14k`='$_14k', `18k`='$_18k', `21k`='$_21k', `22k`='$_22k', 
      `24k`='$_24k', `925k`='$_925k', `coins`='$coins', `bars`='$bars' 
      where `id` = $uid";
    $result3 = mysql_query($query3);
} 
```

# windows - 在 Windows Azure 中的 VM 上设置 DNS

> ID：13177365
> 
> 赞同：0
> 
> 时间：2012-11-01T12:44:13.383
> 
> 标签：windows, iis, azure, dns

在 Windows Azure 上创建 VM 并设置 IIS 服务器时，我可以通过 Azure 提供的 dns 访问。有一种方法可以将我的域设置为 asp.net 应用程序吗？

比如，我的虚拟机 iis 上的 mysite.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:39:16.200

使用您自己的域/DNS 管理并为 Azure 生成的 DNS 条目设置 CNAME 别名。

# python - 如何使用位移在 Python 中构建一个短的字符？

> ID：13177372
> 
> 赞同：0
> 
> 时间：2012-11-01T12:44:32.373
> 
> 标签：python, bit-shift

我有两个 char 8 位值，我需要将它们组合起来以构建一个短的 16 位值。

在 C++ 中，我会这样做：

```
unsigned char lower = <someValue>;
unsigned char upper = <anotherValue>;
unsigned short combined = lower + (upper << 8); 
```

我怎样才能在 Python v2.6.2 中做同样的事情？

看起来它在 Python 中是一样的，但我想确保没有一些细微的区别：

```
lower = <someValue>
upper = <anotherValue>
combined = lower + (upper << 8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:57:19.363

It might be slightly overkill, but if you want to be really sure to avoid any hidden difference, I advise to fall back to C using [ctypes](http://www.freepascal.org/docs-html/rtl/ctypes/index-3.html) :

```
lower = ctypes.cschar(<somevalue>)
upper = ctypes.cschar(<anothervalue>)
combined = ctypes.csshort( lower + (upper << 8) ) 
```

Doing so, you have the advantage of having hard-typed your variable, which will make debugging easier in the future.

NB : I'm not really sure if the << operator still works with ctypes ( there is no reason not to ) .

# php - 使用信用卡付款而不保存订单的magento自动订单创建

> ID：13177375
> 
> 赞同：2
> 
> 时间：2012-11-01T12:45:02.820
> 
> 标签：php, zend-framework, magento, magento-1.6

我创建了一个 Magento 自动创建订单脚本，当我将付款方式设置为采购订单时它工作正常，当我尝试使用信用卡时它不会创建订单。

我使用下面的 cc 信息，但现在可以使用

```
 $orderPayment = Mage::getModel('sales/order_payment')
      ->setStoreId($storeId)
      ->setCustomerPaymentId(0)
      ->setMethod('ccsave')
      ->setCcNumber('6011111111111117')
      ->setCcOwner('ooooo')
      ->setCcType('Discover')
      ->setCcExpMonth('9')
      ->setCcExpYear('2014')
      ->setCcLast4(substr('6011111111111117',-4)); 
```

当我使用如下采购订单时，它可以工作

```
 $orderPayment = Mage::getModel('sales/order_payment')
          ->setStoreId($storeId)
          ->setCustomerPaymentId(0)
          ->setMethod('purchaseorder')
          ->setPo_number(' - '); 
```

我尝试了很多，任何人都可以帮助我，这是我的完整代码

```
<?php
    //run the reminders

    require_once '../app/Mage.php';
    $app = Mage::app();

    }
    //$products = array('35' => array('qty' => 1));
    $products;
    $order = Mage::getModel('sales/order')->load(50);
    $items = $order->getAllItems();
    $itemcount=count($items);
    foreach ($items as $itemId => $item)
    {
        //echo $item->getName().'<br/>';
       // echo $item->getPrice();
       // echo $item->getSku();
       $idx=$item->getProductId();
        $products[$idx]=array('qty'=>$item->getQtyToInvoice());
       // $products[]= $item->getQtyToInvoice().'<br/>';
    }
    //Mage::getSingleton('customer/session')->logout();

    print_r($products);

    //}      

      $customer = Mage::getModel('customer/customer')->load(16);
      /*$customerId is the id of the customer who is placing the order, it can be passed as an argument to the function place()*/

      $transaction = Mage::getModel('core/resource_transaction');
      $storeId = $customer->getStoreId();
      $reservedOrderId = Mage::getSingleton('eav/config')->getEntityType('order')->fetchNewIncrementId($storeId);

      $order = Mage::getModel('sales/order')
      ->setIncrementId($reservedOrderId)
      ->setStoreId($storeId)
      ->setQuoteId(0)
      ->setGlobal_currency_code('GBP')
      ->setBase_currency_code('GBP')
      ->setStore_currency_code('GBP')
      ->setOrder_currency_code('GBP');

      // set Customer data
      $order->setCustomer_email($customer->getEmail())
      ->setCustomerFirstname($customer->getFirstname())
      ->setCustomerLastname($customer->getLastname())
      ->setCustomerGroupId($customer->getGroupId())
      ->setCustomer_is_guest(0)
      ->setCustomer($customer);

      // set Billing Address
      $billing = $customer->getDefaultBillingAddress();
      $billingAddress = Mage::getModel('sales/order_address')
      ->setStoreId($storeId)
      ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_BILLING)
      ->setCustomerId($customer->getId())
      ->setCustomerAddressId($customer->getDefaultBilling())
      ->setCustomer_address_id($billing->getEntityId())
      ->setPrefix($billing->getPrefix())
      ->setFirstname($billing->getFirstname())
      ->setMiddlename($billing->getMiddlename())
      ->setLastname($billing->getLastname())
      ->setSuffix($billing->getSuffix())
      ->setCompany($billing->getCompany())
      ->setStreet($billing->getStreet())
      ->setCity($billing->getCity())
      ->setCountry_id($billing->getCountryId())
      ->setRegion($billing->getRegion())
      ->setRegion_id($billing->getRegionId())
      ->setPostcode($billing->getPostcode())
      ->setTelephone($billing->getTelephone())
      ->setFax($billing->getFax());
      $order->setBillingAddress($billingAddress);

      $shipping = $customer->getDefaultShippingAddress();
      $shippingAddress = Mage::getModel('sales/order_address')
      ->setStoreId($storeId)
      ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_SHIPPING)
      ->setCustomerId($customer->getId())
      ->setCustomerAddressId($customer->getDefaultShipping())
      ->setCustomer_address_id($shipping->getEntityId())
      ->setPrefix($shipping->getPrefix())
      ->setFirstname($shipping->getFirstname())
      ->setMiddlename($shipping->getMiddlename())
      ->setLastname($shipping->getLastname())
      ->setSuffix($shipping->getSuffix())
      ->setCompany($shipping->getCompany())
      ->setStreet($shipping->getStreet())
      ->setCity($shipping->getCity())
      ->setCountry_id($shipping->getCountryId())
      ->setRegion($shipping->getRegion())
      ->setRegion_id($shipping->getRegionId())
      ->setPostcode($shipping->getPostcode())
      ->setTelephone($shipping->getTelephone())
      ->setFax($shipping->getFax());

      $order->setShippingAddress($shippingAddress)
      ->setShipping_method('flatrate_flatrate')
      ->setShippingDescription('flatrate');

      $orderPayment = Mage::getModel('sales/order_payment')
      ->setStoreId($storeId)
      ->setCustomerPaymentId(0)
      ->setMethod('ccsave')
      ->setCcNumber('6011111111111117')
      ->setCcOwner('ooooo')
      ->setCcType('Discover')
      ->setCcExpMonth('9')
      ->setCcExpYear('2014')
      ->setCcLast4(substr('6011111111111117',-4));

      /*
      ->setPo_number(' - ');

      ->setCustomerPaymentId(3)
      ->setMethod('ccsave')
      ->setCcNumber('6011111111111117')
      ->setCcOwner('ooooo')
      ->setCcType('Discover')
      ->setCcExpMonth('9');
      ->setCcExpYear('2014');
      ->setCcLast4(substr('6011111111111117',-4));
      */
      $order->setPayment($orderPayment);
    //,'36'=>array('qty' => 1)
      // let say, we have 2 products
      $subTotal = 0;
     // $products = array('35' => array('qty' => 1));
      foreach ($products as $productId=>$product) {
      echo $product['qty'];
      $_product = Mage::getModel('catalog/product')->load($productId);
      $rowTotal = $_product->getPrice() * $product['qty'];
      $orderItem = Mage::getModel('sales/order_item')
      ->setStoreId($storeId)
      ->setQuoteItemId(0)
      ->setQuoteParentItemId(NULL)
      ->setProductId($productId)
      ->setProductType($_product->getTypeId())
      ->setQtyBackordered(NULL)
      ->setTotalQtyOrdered($product['rqty'])
      ->setQtyOrdered($product['qty'])
      ->setName($_product->getName())
      ->setSku($_product->getSku())
      ->setPrice($_product->getPrice())
      ->setBasePrice($_product->getPrice())
      ->setOriginalPrice($_product->getPrice())
      ->setRowTotal($rowTotal)
      ->setBaseRowTotal($rowTotal);

       $subTotal += $rowTotal;
      $order->addItem($orderItem);
      }
    echo $subTotal;
      $order->setSubtotal($subTotal)
      ->setBaseSubtotal($subTotal)
      ->setGrandTotal($subTotal)
      ->setBaseGrandTotal($subTotal);

      $transaction->addObject($order);
      $transaction->addCommitCallback(array($order, 'place'));
      $transaction->addCommitCallback(array($order, 'save'));
      $transaction->save(); 

      $order->sendNewOrderEmail();
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T06:59:09.637

您以错误的方式使用 ->setCcType('Discover')。您必须在此处指定 cc 类型的代码。例如，在签证的情况下，您应该使用

> ->setCcType('VI')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T07:00:54.963

这是我使用信用卡（已保存）以编程方式创建订单时的订单付款代码：

```
$orderPayment = Mage::getModel('sales/order_payment')
->setStoreId($store_id)
->setCustomerPaymentId(0)
->setMethod($method)
->setCcNumber($cc_number)
->setCcNumberEnc(Mage::getSingleton('payment/info')->encrypt($cc_number)
->setCcOwner($cc_owner)
->setCcType($cc_type)
->setCcExpMonth($cc_exp_month)
->setCcExpYear($cc_exp_year)
->setCcLast4(substr($cc_number,-4)); 
```

# android - 检测 Android 上的麦克风状态更改以检测录音

> ID：13177376
> 
> 赞同：0
> 
> 时间：2012-11-01T12:45:03.050
> 
> 标签：android, audio, detection, record, broadcast

我正在尝试制作一个主要功能是检测的Android APP

如果其他 android APP 正在使用麦克风录制语音。到目前为止，我学会了

AudioRecord 类中的 getRecordingState() 可用于获取状态

麦克风是否正在录音……但我需要广播之类的东西

所以我可以在麦克风状态开始录制语音时捕捉到意​​图......

任何想法 ？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:14:41.013

`getRecordingState()``AudioRecord`返回您调用该方法的特定实例的状态。它不会为所有记录器提供一些全局状态。

目前没有可用的 API 可供应用程序在全球范围内检查麦克风是否正在进行录音。有这些`AudioFlinger`信息（虽然不是关于正在录制*的*特定应用程序），但您掌握它的唯一方法是修改 Android 本身并运行您自己的自定义 Android 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T03:31:38.243

尝试`AudioManager.isMicrophoneMute()`

[http://developer.android.com/reference/android/media/AudioManager.html#isMicrophoneMute()](http://developer.android.com/reference/android/media/AudioManager.html#isMicrophoneMute())

# matlab - 从 .m 文件中获取参数值到 GUI

> ID：13177382
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:45:28.060
> 
> 标签：matlab, user-interface, parameters, matlab-guide

为了简短起见，我正在开发一个软件工具，我想在其中将参数从 .m 文件导入 GUI，但我找不到如何导入参数。我正在使用`iugetfile`“到达它”，但如何插入参数值？

如果我在 MATLAB（命令窗口）中打开文件，那么我会在工作区中获取参数。有没有一种简单的方法可以将参数读入 GUI 以便能够在那里的函数中使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:10:11.830

将数据写入 gui 的方法是使用 set。例如：set(handles.,'String','content')。您可以从此处查看写入和读取值的示例：[（mathworks 链接）](http://www.mathworks.com/help/matlab/creating_guis/gui-with-multiple-axes-guide.html?s_tid=doc_12b)

如果您需要读取参数值，我会使用 .mat 而不是 .m。

# ios - 是否有可能在 iOS 6 中获得蓝牙 MAC 和/或信号强度？

> ID：13177384
> 
> 赞同：1
> 
> 时间：2012-11-01T12:45:32.710
> 
> 标签：ios, bluetooth, triangulation, core-bluetooth

我正在开发一个在室内定位 iPhone 的系统。我正在考虑使用基于信号强度的蓝牙三角测量。

1.  是否可以在 iOS 6 上获取附近蓝牙设备的信号强度？
2.  是否可以获得手机的蓝牙MAC（这样我就可以识别手机并从另一端进行信号强度测量）
3.  基于蓝牙三角测量计算iPhone位置的任何其他想法？

这是一个餐厅类型的应用程序。餐厅想知道电话/应用程序坐在哪张桌子上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T16:09:41.580

如果您的 iOS 设备支持蓝牙 LE，您可以轻松获取它与传感器站之间的 RSSI，以及用于识别设备的 UUID。如果您在传感器端使用正确的软件，您也可以读取 MAC 地址，但我不相信 Core Bluetooth 会以与 RSSI 和 UUID 相同的方式公开此信息。

如果使用蓝牙 LE，有两种方法可以进行三角测量。一种是通过从一系列放置的传感器位置监视 iPhone 来进行三角测量，另一种是通过读取 iPhone 与从已知点进行广告的设备之间的信号强度来对 iPhone 本身进行三角测量。

后者可以通过在已知位置放置一系列 LE 外设并让它们定期发布广告来完成。在广告信息中，您可以标记房间内该外围设备的位置。`-centralManager:didDiscoverPeripheral:advertisementData:RSSI:`iPhone 可以读取这些广告，使用委托方法从中获取 RSSI 信息，并对其位置进行三角测量。

前一种方法会涉及更多一些。这将要求 iPhone 本身进入广告模式，使用新的 iOS 6.0 支持使 iPhone 成为蓝牙 LE 外围设备。然后，传感器位置可以通过这些广告数据包以及您为手机生成的 UUID 将 RSSI 从它们接收到 iPhone。您还可以在传感器节点上获取正在运行正确软件的手机的 MAC 地址。然后，中央服务器需要结合这些读数来对 iPhone 的位置进行三角测量。

您可能需要试验传输强度以确定这将提供什么样的分辨率。RSSI 信息很嘈杂，根据我的经验，在我的外围设备的正常传输水平下，它似乎只能解析为 +-30 英尺。您可以通过多个传感器站和较低的传输强度来改进这一点。

# c# - 将json post请求中的多个复杂参数传递给asp.net WebApi

> ID：13177386
> 
> 赞同：3
> 
> 时间：2012-11-01T12:45:33.290
> 
> 标签：c#, asp.net, json, post, asp.net-web-api

假设 ApiController 的动作具有多个参数：

```
[HttpPost]
public void AddAddress( Person person, Address address, int simple ) 
```

或类似的东西。现在我尝试发送一个带有内容类型`application/json`和 json 的 post 请求，如下所示：

```
{
  person: {...}, address: {..}, simple: 1
} 
```

只是假设它是有效的 json ;)

或在这样的 json 数组中： `[person, address, simple]`

但是 WebApi 无法识别这一点并告诉我它找不到操作，因为它不支持 json 请求中的多个参数。

我正在使用 HttpClient 从 C# 客户端执行此操作，我们想使用 json 进行发布请求。我想使用 WebApi.Client 包，它为 HttpClient 提供了几个有用的扩展，但我们有一个可移植的库项目（webapi 客户端不支持）。

我将如何支持此功能？

我尝试使用自定义 ActionFilter，它永远无法运行，因为它无法事先找到动作。我尝试了不知道上下文和参数的 MediaTypeFormatter，还尝试了 ModelBinder，它似乎也仅基于每个参数，并不总是被执行。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:25:08.340

带有格式化程序的 ASP.NET Web API 中的内置参数绑定策略仅支持映射到请求正文的单个复杂参数。在您的情况下，您正在尝试映射至少两个复杂的参数。不扩展此基础结构的最简单解决方案是创建一个包含这些参数作为属性的新模型类

```
public class AddressModel
{
  public Person Person { get; set; }
  public Address Address { get; set; }
  public int Simple { get; set; }
} 
```

并在您的控制器操作中使用该模型

```
public void AddAddress( AddressModel model ); 
```

# bug-tracking - Phabricator - arcland 由于错误的 git 调用而引发异常

> ID：13177388
> 
> 赞同：1
> 
> 时间：2012-11-01T12:45:47.510
> 
> 标签：bug-tracking, phabricator

我正在玩 phabricator，最近遇到了一个问题`arc land`：

我创建了一个测试存储库，进行了提交并将其放入 phabricator 中`arc diff`。按预期工作。提交位于名为“new_feature”的分支下。

在 phabricator 中，差异被拒绝用于测试目的。拒绝后，我尝试了`arc land`：

```
$ ~/git/test> git branch
   master
   * new_feature

$ ~/git/test> arc land
Landing current branch 'new_feature'.
Switched to branch master. Updating branch...
Exception
Command 'git pull --ff-only' failed with error #1:
stdout:

stderr:
You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').
See git-pull(1) for details.

If you often merge with the same branch, you may want to
use something like the following in your configuration file:

    [branch "master"]
    remote = <nickname>
    merge = <remote-ref>

    [remote "<nickname>"]
    url = <url>
    fetch = <refspec>

See git-config(1) for details. 
```

下一步，审阅者接受了补丁，但`arc land`抛出了相同的异常。想法？

# php - php和高延迟

> ID：13177391
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:45:56.233
> 
> 标签：php, apache-flex, latency, amfphp

我有一个 php 文件，以前用于编写带有标签的 xml 数据。现在我正试图让它成为一个基于远程对象的小对象。因此，我没有编写 xml，而是尝试返回一个包含一些大型多维数组的类对象。问题是它导致了高延迟。我不确定是否是我的 php 文件导致了延迟问题。

我的PHP代码：

```
 class output{
    public $grid;
    public $week;
    public $name;
    var $_explicitType = "org.test.output";
    }

    class manager1{

    function init($params,$arrayOut)
    {   

        $action = $params[0];
        switch ($action)
        {
            case "reload":  return $this->Reload($arrayOut);break; 

            default:return $this->form($arrayOut); 
        }

    }

    private function Reload($arrayOut)
    {

        $this->getSlice();
        $arrayOut->grid = $this->gridValue();
        $arrayOut->week = 'no data';    
        return $arrayOut;       

    }

    private function form($arrayOut)
    {

        $arrayOut->grid = $this->gridValue();
        $arrayOut->week= $this->getAllWeek($this->ThisYear);
        return $arrayOut;

    }
} 
```

AS-3 代码调用 php 函数：

```
 private function init():void{

        var _amf:RemoteObject = new RemoteObject();
     var params:Array = new Array(); //parameters array
     params.push("default");
     var arrayOut:output = new output();//strongly typed class
     _amf.destination = "dummyDestination";
     _amf.endpoint = "http://insight2.ultralysis.com/Amfhp/Amfphp/"; //amfphp home directory
     _amf.source = "manager1"; //the php class which will be called
     _amf.addEventListener(ResultEvent.Result, handleResult);
     _amf.init(params,arrayOut);
}

    private function handleResult(event:ResultEvent):void
        {
    datagrid.dataProvider = event.result.grid;
        } 
```

在我的应用程序中还有一个名为 output 的类：

```
 package org.test{
                public class output
                  {
                     public var grid:Array;
                     public var week:Array;
                  }
 } 
```

我正在使用它使用 amfphp 将值传递给 flex remoteobject。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:19:04.720

实际上，这很容易弄清楚。您可以使用作为 Flash Builder 一部分的网络监视器。它显示了请求时间和响应时间，因此您可以很好地了解问题出在 PHP 端还是 Flex 端。您还可以查看响应的大小。

请注意，与多维数组混合的远程对象可能比您想象的要大，但网络监视器将再次帮助您弄清楚这一点。

# java - to get the values from string tokenizer

> ID：13177401
> 
> 赞同：0
> 
> 时间：2012-11-01T12:46:36.740
> 
> 标签：java, string

I have written the code to spit the string i.e birthdate,I want to store it in 3 different vaiables how to do it. (Mday=1,Mmonth=1,MYear=2011).I am getting birtdate dynamically.also I am getting values in token.

```
StringTokenizer st = new StringTokenizer(BirtDate, "/");
                while (st.hasMoreElements()) {
                    String token = st.nextToken();
                    System.out.println("Token = " + token);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:51:01.957

> StringTokenizer 是一个遗留类，出于兼容性原因保留，但不鼓励在新代码中使用它。建议任何寻求此功能的人改用 String 的 split 方法或 java.util.regex 包

请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)

改为使用

```
String[] token = BirtDate.split("/") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:51:24.073

一种更好的方法是使用日期格式化程序和对象，如下所示：

```
 DateFormat format = new SimpleDateFormat("MM/dd/yyyy");
     Date date = format.parse("1/1/2012");
     //Calendar cal = new GregorianCalendar();
     Calendar cal = Calendar.getInstance();
     cal.setTime(date);
     int day = cal.get(Calendar.DAY_OF_MONTH);//You may want to add 1
     int month = cal.get(Calendar.MONTH);
     int year= cal.get(Calendar.YEAR); 
```

请注意：月份从 0 开始，因此您可能需要加 1。

# php - Use Google Analytics to count user visits from an image

> ID：13177402
> 
> 赞同：1
> 
> 时间：2012-11-01T12:46:37.200
> 
> 标签：php, javascript, google-analytics

i have a problem with PHP and Google Analytics. Basically what i want to do is to count a visit when the user access this image from my email `<img src='path/to/image' />` from his email client in in **Google Analytics**.

```
// If is a view then just show an image
if($mysqlAction == "VIEW")
{
    // Create a blank image and add some text
    header('Content-Type: image/jpeg');
    readfile('image.jpg');
    ?>
    <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35932495-2']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    <?php
} 
```

My problem is that after

```
 // Create a blank image and add some text
    header('Content-Type: image/jpeg');
    readfile('image.jpg'); 
```

it is useless to put any code, because the output of `script.php` will be like accessing an `image.jpg` , but i really need to count views in google analytics.

What i want :

1.  How can i solve this?
2.  Don't give me an alternative like TrackReports from Sendblaster ... or any similar solution.

My ideas are :

1.  My idea was something with double buffer like first show the analitycs code and then `ob_flush()` the image
2.  Fetch with `CURL` another page or something ...
3.  Use Analitics for PHP ...

Any solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:17:25.337

您可以使用广告系列跟踪标记您的超链接（请参阅[http://cutroni.com/blog/2008/11/04/email-tracking-with-google-analytics/](http://cutroni.com/blog/2008/11/04/email-tracking-with-google-analytics/)），但除此之外，我不知道您是如何可以做到这一点。在最好的情况下，电子邮件客户端中对 JS 的支持是不稳定的，当然，您不能在图像中包含 JS。我的建议只是在您的电子邮件中标记您的超链接，至少这样您就可以在 Analytics 内部知道有多少访问者来自您的电子邮件活动。

如果您想跟踪这些电子邮件中有多少被阅读等，那么它们可以在您当前的方法中使用（php 空白图像）。但是，您随后将无法将此数据发送到 Analytics，您必须开发自己的数据使用方式。

话虽如此，如今没有人被迫下载这些图像，因此您获得的指标充其量只是估计值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:11:17.987

我想你可以在这篇文章中找到解决方案：[http ://techpad.co.uk/content.php?sid=186](http://techpad.co.uk/content.php?sid=186)

作者实现 PHP 类从服务器端而不是客户端 JS 访问谷歌分析服务。

我希望它会有所帮助。

# silverlight - Silverlight 中的可滚动上下文菜单

> ID：13177405
> 
> 赞同：0
> 
> 时间：2012-11-01T12:46:49.527
> 
> 标签：silverlight, silverlight-5.0

我有上下文菜单类，它从 ComponentArt 继承“ContextMenu”类。

完整的层次结构是：

```
ChartContextMenu
  ComponentArt.ExtendedContextMenu
    ComponentArt.ContextMenu
      ComponentArt.Menu
        ItemsControl 
```

此菜单没有自己的 XAML，只是代码并附加到 XAML，如下所示：

```
<context:ChartContextMenu x:Name="contextMenu" Theme="{StaticResource Windows7Theme}" />. 
```

**问题：我想让这个菜单可以滚动。**

我知道如何使菜单可滚动，以防它具有 XAML（只是封装到 ScrollableView）。但是没有 XAML 怎么办呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:11:36.670

它看起来像解决方法。你不应该只在代码中创建控件。这是不好的做法！尝试混合 xaml/code。我确定它可以解决任何问题。ps 此外，您不能以编程方式为您的控件创建模板，但您可以使用如下代码从 XAML 字符串加载它：

```
public static DataTemplate Create(Type type)
{
    return (DataTemplate) XamlReader.Load(
        @"<DataTemplate
            xmlns=""http://schemas.microsoft.com/client/2007"">
            <" + type.Name + @"/>
          </DataTemplate>"
      );
} 
```

# objective-c - Objective-C：导航控制器中的模态代表为零

> ID：13177407
> 
> 赞同：0
> 
> 时间：2012-11-01T12:46:52.973
> 
> 标签：objective-c, delegates, uinavigationcontroller, presentmodalviewcontroller

我在需要呈现模式的导航控制器中有一个 ViewController。

ViewController 有这个作为它的标题：

```
@interface ViewController : BaseViewController<AuthenticateDelegate> 
```

并在呈现模态的 IBAction 中：

```
 AuthenticationController *authVC = [self.storyboard instantiateViewControllerWithIdentifier:@"AuthControllerView"];
        authVC.delegate = self;
        [self presentModalViewController:authVC animated:YES]; 
```

AuthenticationController 在它的 .h 文件中有这个：

```
@interface AuthenticationController: BaseViewController<UITextFieldDelegate>

@property (nonatomic, assign) id <AuthenticateDelegate> delegate;

@end 
```

如您所见，我已将“self”（ViewController）指定为 AuthenticationController 的委托，但由于某种原因，委托位于：

```
- (IBAction)SubmitAuthentication:(id)sender;
{
    [self.delegate validateUser:lblUsername.text :lblPassword.text];

    [self dismissModalViewControllerAnimated:YES];
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:48:41.873

您必须如下创建委托属性。

```
@property (nonatomic, strong) id <AuthenticateDelegate> delegate; 
```

# android - 应用内订阅试用期完成通知

> ID：13177408
> 
> 赞同：1
> 
> 时间：2012-11-01T12:46:56.153
> 
> 标签：android, in-app-purchase, subscription

我正在我的应用程序中实现 android 订阅。订阅文件称，该应用程序将通过购买令牌和其他详细信息收到成功付款的通知。

我要添加的订阅有试用期，我想在试用期结束前几天提醒用户。文档没有说明当用户以 0.0 美元的费用购买试用期订阅时是否会返回任何类型的响应。

如果 Google Play 在试用期到期或向用户收取 0.00 美元试用期时未通知应用程序，我如何在试用期结束前几天通知用户？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:31:02.720

我已经阅读了完整的文件，没有提到这种情况。如果您有任何后端服务器（建议在应用内使用），您可以在服务器上存储**购买日期**（购买时从谷歌返回），每次启动您都可以查询服务器剩余试用天数并通知用户.

另一种方法是您可以使用推送通知而不是查询您的服务器并向您的用户发送通知。这种方法将有优点和缺点

**优点：**即使您的应用程序在后台，您也可以通知用户。

**缺点：**用户可以停止来自您的应用程序的通知。

# java - Lucene 搜索停止工作

> ID：13177410
> 
> 赞同：1
> 
> 时间：2012-11-01T12:47:01.393
> 
> 标签：java, search, lucene

我在我的一个项目中使用 lucene 进行搜索。它在端口上作为单独的服务运行。每当有查询出现时，就会向该服务器发送一个请求，并返回一个结果映射。

我的问题是它在一段时间后停止工作。它可以正常工作 1 天左右。但是 1 天后它停止返回结果（即服务正在运行但结果为 0）。为了让它恢复工作，我必须重新启动服务，然后它才能再次开始正常工作。

请提出一些解决方案。如果需要，我很乐意提供更多信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:20:00.630

如果我猜测一个可能导致这种行为的简单错误，也许随着时间的推移您正在打开一堆索引写入器或索引读取器，并且没有正确关闭它们，从而用完您服务器上可用的文件描述符. 查看 'lsof' 是否在 '.cfs'、'.fdx' 和/或 '.fdt' 上显示很多打开的描述符（'ulimit -n' 可用于查看最大值）。

关于 IndexSearcher 需要注意的一件事，我发现它会导致问题：

关闭搜索器可能不会关闭底层阅读器。如果您将阅读器传递给搜索器，则在您关闭搜索器时它不会关闭（因为在这种情况下，它可能正在被其他对象使用）。一个例子：

```
//Assume I have an IndexWriter named indexwriter, which I reuse.
IndexSearcher searcher = new IndexSearcher(IndexReader.open(indexwriter, true));

//Use the searcher

searcher.close();
//We close the search, but the underlying reader remains open. 
```

现在这已经积累了一个未关闭的阅读器，并打开了一些索引文件描述符。如果此模式使用足够多次，随着时间的推移，它将停止响应。无论如何，这种错误的一个例子。

可以通过在关闭搜索器时简单地关闭阅读器来修复它，例如：`searcher.getIndexReader().close()`. 不过，可以找到更好的解决方案。重用阅读器，例如，当索引内容更改时可以刷新阅读器。

不知道这是否是您遇到的确切问题，但可能值得注意。

# vb.net - 如何动态捕获基于 DOS 的可执行文件的内容并保持打开状态以供处理？

> ID：13177411
> 
> 赞同：2
> 
> 时间：2012-11-01T12:47:02.847
> 
> 标签：vb.net, dos, capture, output

团队，

我会很感激你在这方面的帮助，

**我的项目背景：**我有一个可执行文件，例如 abcd.exe，它实际上是一种服务器，它在 MS DOS 窗口中自行打开，一旦启动，它就会继续运行。如前所述，由于它是一台服务器，它会不断记录一些日志跟踪，并不断在 DOS 窗口中逐行添加新行。该服务器需要一些参数才能启动，所以这里的参数是配置文件的路径，其中保存了所有配置详细信息。所以，要启动这个服务器，我需要在命令提示符中提供，

*开始 > 运行 > CMD

*abdc.exe -lookup "C:\MyServer\Bin\designConfig.properties"*

为避免手动步骤，我创建了批处理文件，例如 abcd.bat 并带有以下几行

“*标题：我的服务器 - 节点 1234（服务器）* ”

*abdc.exe -lookup "C:\MyServer\Bin\designConfig.properties"*

**我的机器和规格**

*   上面提到的 abdc.exe 文件是一个 64 位服务器。我的操作系统：Windows 7 64 位平台：VB Visual Studio 2012 或 MS Access VBA

**我的要求**

现在我创建了一个 VB 表单、多行文本框和按钮。我想，

1.  单击该按钮后，它应该查找可执行文件或批处理文件并通过接受参数来启动 abcd.exe 服务器程序。（我使用下面的代码完成了这个）

========================

```
 Dim abc As New Process
    Dim abcinfo As New System.Diagnostics.ProcessStartInfo
    abcinfo.FileName = "C:\ABCD\abdc.bat""
    abcinfo.RedirectStandardOutput = True
    abcinfo.RedirectStandardError = True

    abcinfo.UseShellExecute = False
    abcinfo.ErrorDialog = False

    abc.StartInfo = abcinfo
    abc.Start()
    Dim abclog As System.IO.StreamReader = abc.StandardError
    abc.BeginOutputReadLine()
    TextBox1.Text = abclog.ReadToEnd()
    abc.WaitForExit() 
```

========================

1.  这会打开可执行文件，即服务器，但 CMD 屏幕显示为空白，我已将其关闭以检查文本框中的详细信息。一旦我关闭它，文本框就会显示刚刚关闭的 ABC 服务器的内容。我可以拥有内容，但我的服务器现在没有运行！！

2.  所以我希望一旦我单击“启动服务器”按钮，（a）它应该启动 exe 程序，即服务器，（b）保持窗口不可见（它使用的 dos 窗口不应该对用户可见，也不应该在任务栏上最小化.) (c) 捕获该 DOS 窗口的内容并将它们显示在我的表单上的文本框中 (d) 最重要的是，每当在服务器屏幕上记录新的跟踪记录时更新 abc 服务器的内容，即在 DOS 屏幕上添加新行.

基本上，我将拥有该服务器实例的多个实例，并且我不希望用户在每个实例中都看到以检查日志。一旦他们从列表框中选择了特定的 abc 服务器实例，文本框应该显示来自相关 DOS 可执行窗口的实时内容。

我搜索了很多线程，但没有找到答案。任何帮助将不胜感激！！！

PS：这个服务器是用 C 开发的，我相信它不是一个控制台应用程序。

谢谢，普拉尚特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:22:10.567

抱歉，但我不太清楚您要做什么，但是如果您想在 DOS 窗口 (=cmd.exe) 中重定向输出，请按以下步骤操作：

```
your.exe yourparameter1 yourparameter2 >redirect_here.log 2>&1 
```

第一个`>`将 sysout 重定向到`redirect_here.log`-file 并将`2>&1`syserr 重定向到同一文件。

如果您想在另一个 DOS 窗口中跟踪写入`redirect_here.log`-file 的内容，您需要使用`tail.exe`. 如果我没记错的话，你可以在 Windows Resource Kit 中找到，但我使用的是与[UnxUtils](http://sourceforge.net/projects/unxutils/)`tail.exe`捆绑的。它是一个 zip 包，可以在 \usr\local\wbin\ 文件夹中找到，以及其他有用的工具。以下是使用方法：`tail.exe``tail.exe`

```
tail -f redirect_here.log 
```

`-f`-switch 表示您希望显示`tail.exe`新行，因为它们出现在`redirect_here.log`.

# twitter-bootstrap - 如何完全破坏引导模式窗口？

> ID：13177426
> 
> 赞同：89
> 
> 时间：2012-11-01T12:48:27.973
> 
> 标签：twitter-bootstrap, modal-dialog

我已经将**模式窗口**用于向导实现，它有大约 4,5 个步骤。我需要在**最后一步**（onFinish）和**OnCancel 步骤之后完全销毁它，而无需刷新页面**。我当然可以隐藏它，但是当我再次打开它时，隐藏模式窗口会恢复所有内容。有人可以帮我解决这个问题吗？

谢谢任何提示答案对我有帮助。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-08-11T07:20:46.607

如果是引导程序 3，您可以使用：

```
$("#mimodal").on('hidden.bs.modal', function () {
    $(this).data('bs.modal', null);
}); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-11-16T20:19:00.223

*注意：此解决方案仅适用于版本 3 之前的 Bootstrap。有关 Bootstrap 3 的答案，请参阅[user2612497 的这个](https://stackoverflow.com/a/18169689/177710)答案。*

你想做的是：

```
$('#modalElement').on('hidden', function(){
    $(this).data('modal', null);
}); 
```

这将导致模态在每次显示时自行初始化。因此，如果您使用远程内容加载到 div 或其他内容中，它将在每次打开时重新执行。您只是在每次隐藏后销毁模态实例。

或者每当你想触发元素的销毁（如果不是每次你都隐藏它）你只需要调用中间行：

```
$('#modalElement').data('modal', null); 
```

Twitter bootstrap 在 data 属性中寻找它的实例，如果一个实例存在它只是切换它，如果一个实例不存在它会创建一个新的。

希望有帮助。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-10-27T11:28:05.343

对于 3.x 版本

```
$( '.modal' ).modal( 'hide' ).data( 'bs.modal', null ); 
```

对于 2.x 版本（有风险；阅读下面的评论）当您创建引导模式时，页面上的三个元素被更改。因此，如果您想完全回滚所有更改，则必须为每个更改手动执行。

```
$( '.modal' ).remove();
$( '.modal-backdrop' ).remove();
$( 'body' ).removeClass( "modal-open" ); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-12-19T07:50:47.057

通过这种方式，您可以在不重新加载页面的情况下完全破坏模式。

```
$("#modal").remove();
$('.modal-backdrop').remove(); 
```

**但它会从您的 html 页面中完全删除模式。在此模态隐藏显示后将不起作用。**

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-05-15T07:41:35.207

我已经尝试过接受的答案，但它似乎对我不起作用，我不知道接受的答案应该如何工作。

```
$('#modalId').on('hidden.bs.modal', function () {
  $(this).remove();
}) 
```

这在我这边工作得很好。BS 版本 > 3

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-12T00:35:46.973

jQuery 的强大功能。`$(selector).modal('hide').destroy();`将首先删除您可能具有滑动效果的sinds，然后完全删除该元素，但是如果您希望用户在完成这些步骤后能够再次打开模式。您可能只想更新您想要重置的设置，因此要重置模式中的所有输入，如下所示：

```
$(selector).find('input, textarea').each(function(){
   $(this).val('');
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-25T03:07:55.513

引导 3 + jquery 2.0.3：

```
$('#myModal').on('hide.bs.modal', function () {
   $('#myModal').removeData();
}) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-09-09T08:17:57.620

如果您的模态框中有 iframe，则可以通过以下代码删除其内容：

```
$('#myModal').on('hidden.bs.modal', function(){
   $(this).find('iframe').html("");
   $(this).find('iframe').attr("src", "");
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-05T21:37:08.367

我的方法是使用[`clone()`](http://api.jquery.com/clone/)jQuery的方法。它会创建您的元素的副本，这就是您想要的：您的第一个未更改模式的副本，您可以随意替换它：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/8XCps/)

```
var myBackup = $('#myModal').clone();

// Delegated events because we make a copy, and the copied button does not exist onDomReady
$('body').on('click','#myReset',function() {
    $('#myModal').modal('hide').remove();
    var myClone = myBackup.clone();
    $('body').append(myClone);
}); 
```

我使用的标记是最基本的，所以你只需要绑定正确的元素/事件，你应该重置你的向导。

**小心**绑定[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)，或者在每次重置模态的内部元素时重新绑定，以便每个新模态的行为方式相同。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-09T22:47:47.040

据我了解，您不想删除它，也不想隐藏它？因为您可能想稍后重用它..但是如果您再次打开它，不希望它具有旧内容？

```
<div class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn">Close</a>
        <a href="#" class="btn btn-primary">Save changes</a>
    </div>
</div> 
```

如果您想将其用作动态模板，只需执行类似的操作

```
$(selector).modal({show: true})

....

$(selector).modal({show: false})
$(".modal-body").empty()

....

$(".modal-body").append("new stuff & text")
$(selector).modal({show: true}) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-07-18T15:58:06.207

这是我的解决方案：

`this.$el.modal().off();`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-08-10T13:50:06.980

也适用于引导程序 4.x

```
$('#modal_ID').modal( 'hide' ).data( 'bs.modal', null ); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-30T21:10:21.787

我有一个相同的场景，我会在单击按钮时打开一个新模式。完成后，我想将它从我的页面中完全删除...我使用 remove 删除模态.. 在按钮单击时，我将检查模态是否存在，如果为真，我将销毁它并创建一个新的模态..

```
$("#wizard").click(function() {
    /* find if wizard is already open */
    if($('.wizard-modal').length) {
        $('.wizard-modal').remove();
    }
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-16T12:31:57.933

```
$('#myModal').on('hidden.bs.modal', function () {
      $(this).data('bs.modal', null).remove();
});

//Just add .remove(); 
//Bootstrap v3.0.3 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-10-22T19:14:41.380

这完全从 DOM 中删除了模态，也适用于“附加”模态。

# #pickoptionmodal 是我的模态窗口的 ID。

```
$(document).on('hidden.bs.modal','#pickoptionmodal',function(e){

e.preventDefault();

$("#pickoptionmodal").remove();

}); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-07-19T03:22:32.940

我必须在通过按钮单击关闭模式后立即销毁它，所以我想出了以下内容。

```
$("#closeModal").click(function() {
    $("#modal").modal('hide').on('hidden.bs.modal', function () {
        $("#modal").remove();
    });
}); 
```

请注意，这适用于 Bootstrap 3。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-02-12T15:27:55.807

如果模态阴影仍然较暗并且不显示多个模态，那么这将很有帮助

```
$('.modal').live('hide',function(){
    if($('.modal-backdrop').length>1){
        $('.modal-backdrop')[0].remove();
    }
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-10-31T05:26:32.303

我不得不对不同的链接点击使用相同的模式。我只是用隐藏回调中模态的空“”替换了html内容。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-05-14T21:29:53.220

只有这对我有用

```
$('body').on('hidden.bs.modal', '.modal', function() {
    $('selector').val('');
}); 
```

强制选择器将它们设为空白是安全的，因为引导程序和 jquery 版本可能是导致此问题的原因

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-09-01T18:21:58.623

这对我有用。

```
$('.modal-backdrop').removeClass('in');
$('#myDiv').removeClass('in'); 
```

对话框和背景消失了，但当我下次单击按钮时它们又回来了。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-01-15T16:13:44.893

它适用于 Bootstrap v3.3.6

```
$('#dialog').modal()
.on('hide.bs.modal', function () {
    // Some Code
}).on('shown.bs.modal', function () {
    // Some Code
}).on('hidden.bs.modal', function () {
    $("#dialog").off();
}); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-02-21T21:35:10.747

单行完全删除隐藏（ES6）

`$("#myModal").on('hidden.bs.modal', (e)=>e.currentTarget.remove());`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-03-06T03:27:00.260

使用 ui-router 这可能是您的一个选择。它在关闭时重新加载控制器，以便在下次触发之前重新初始化模态内容。

```
$("#myModalId").on('hidden.bs.modal', function () {
  $state.reload();  //resets the modal
}); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-10-13T10:55:01.220

这在 BS4 上对我有用：

```
let $modal = $(this);
$modal.modal('hide').on("hidden.bs.modal", function (){
    $modal.remove();
}); 
```

我们在完全隐藏后删除模态。来自 BS 文档：

> hidden.bs.modal：当模式对用户完成隐藏时触发此事件（将等待 CSS 转换完成）​​。

* * *

## 回答 #25

> 赞同：-4
> 
> 时间：2016-10-19T16:34:35.980

我不知道这听起来如何，但这对我有用............

```
$("#YourModalID").modal('hide'); 
```

# api - Instagram API 用于获取带有特定主题标签的图片

> ID：13177428
> 
> 赞同：25
> 
> 时间：2012-11-01T12:48:36.273
> 
> 标签：api, tags, instagram

我想使用 PHP 从 Instagram 获取所有带有特定哈希标签的图片。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-05T07:59:50.027

首先，Instagram API 端点“标签”需要 OAuth 身份验证。

您可以使用以下 url 查询特定主题标签（在本例中为下雪）的结果

它的速率限制为每小时 5000 (X-Ratelimit-Limit:5000)

[https://api.instagram.com/v1/tags/snowy/media/recent](https://api.instagram.com/v1/tags/snowy/media/recent)

示例响应

```
{
  "pagination":  {
    "next_max_tag_id": "1370433362010",
    "deprecation_warning": "next_max_id and min_id are deprecated for this endpoint; use min_tag_id and max_tag_id instead",
    "next_max_id": "1370433362010",
    "next_min_id": "1370443976800",
    "min_tag_id": "1370443976800",
    "next_url": "https://api.instagram.com/v1/tags/snowy/media/recent?access_token=40480112.1fb234f.4866541998fd4656a2e2e2beaa5c4bb1&max_tag_id=1370433362010"
  },
  "meta":  {
    "code": 200
  },
  "data":  [
     {
      "attribution": null,
      "tags":  [
        "snowy"
      ],
      "type": "image",
      "location": null,
      "comments":  {
        "count": 0,
        "data":  []
      },
      "filter": null,
      "created_time": "1370418343",
      "link": "http://instagram.com/p/aK1yrGRi3l/",
      "likes":  {
        "count": 1,
        "data":  [
           {
            "username": "iri92lol",
            "profile_picture": "http://images.ak.instagram.com/profiles/profile_404174490_75sq_1370417509.jpg",
            "id": "404174490",
            "full_name": "Iri"
          }
        ]
      },
      "images":  {
        "low_resolution":  {
          "url": "http://distilleryimage1.s3.amazonaws.com/ecf272a2cdb311e2990322000a9f192c_6.jpg",
          "width": 306,
          "height": 306
        },
        "thumbnail":  {
          "url": "http://distilleryimage1.s3.amazonaws.com/ecf272a2cdb311e2990322000a9f192c_5.jpg",
          "width": 150,
          "height": 150
        },
        "standard_resolution":  {
          "url": "http://distilleryimage1.s3.amazonaws.com/ecf272a2cdb311e2990322000a9f192c_7.jpg",
          "width": 612,
          "height": 612
        }
      },
      "users_in_photo":  [],
      "caption":  {
        "created_time": "1370418353",
        "text": "#snowy",
        "from":  {
          "username": "iri92lol",
          "profile_picture": "http://images.ak.instagram.com/profiles/profile_404174490_75sq_1370417509.jpg",
          "id": "404174490",
          "full_name": "Iri"
        },
        "id": "471425773832908504"
      },
      "user_has_liked": false,
      "id": "471425689728724453_404174490",
      "user":  {
        "username": "iri92lol",
        "website": "",
        "profile_picture": "http://images.ak.instagram.com/profiles/profile_404174490_75sq_1370417509.jpg",
        "full_name": "Iri",
        "bio": "",
        "id": "404174490"
      }
    }
} 
```

你可以在这里玩：

[https://apigee.com/console/instagram?req=%7B%22resource%22%3A%22get_tags_media_recent%22%2C%22params%22%3A%7B%22query%22%3A%7B%7D%2C%22template %22%3A%7B%22tag-name%22%3A%22snowy%22%7D%2C%22headers%22%3A%7B%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime %22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D](https://apigee.com/console/instagram?req=%7B%22resource%22%3A%22get_tags_media_recent%22%2C%22params%22%3A%7B%22query%22%3A%7B%7D%2C%22template%22%3A%7B%22tag-name%22%3A%22snowy%22%7D%2C%22headers%22%3A%7B%7D%2C%22body%22%3A%7B%22attachmentFormat%22%3A%22mime%22%2C%22attachmentContentDisposition%22%3A%22form-data%22%7D%7D%2C%22verb%22%3A%22get%22%7D)

您需要使用“身份验证”作为 OAuth 2，系统会提示您通过 Instagram 登录。发布您可能必须在“模板”部分中重新输入“标签名称”。

所有与分页相关的数据都在响应中的“分页”参数中可用，并使用它的“next_url”来查询下一组结果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-22T14:38:44.227

目前尚无法使用多个标签搜索内容，目前仅支持单个标签。

> 首先，Instagram API 端点“标签”需要 OAuth 身份验证。

这并不完全正确，您只需要一个 API-Key。只需[注册](http://instagram.com/developer/register/)一个应用程序并将其添加到您的请求中。例子：

```
https://api.instagram.com/v1/users/userIdYouWantToGetMediaFrom/media/recent?client_id=yourAPIKey 
```

另请注意，用户名不是用户 ID。您可以在此处查找用户 ID [。](http://jelled.com/instagram/lookup-user-id)

搜索多个关键字的一种解决方法是，您为每个标签启动一个请求并比较服务器上的结果。当然，这可能会减慢您的网站速度，具体取决于您要比较的关键字数量。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-01T14:22:31.013

看看这里为了开始：http: [//instagram.com/developer/](http://instagram.com/developer/)

然后为了按标签检索图片，请看这里：http: [//instagram.com/developer/endpoints/tags/](http://instagram.com/developer/endpoints/tags/)

从 Instagram 获取标签不需要 OAuth，因此您可以通过以下 URL 进行调用：

`GET IMAGES` `https://api.instagram.com/v1/tags/{tag-name}/media/recent?access_token={TOKEN}`

`SEARCH` `https://api.instagram.com/v1/tags/search?q={tag-query}&access_token={TOKEN}`

`TAG INFO` `https://api.instagram.com/v1/tags/{tag-name}?access_token={TOKEN}`

# iphone - iOS 6 facebook sdk 3.1.1 登录错误

> ID：13177429
> 
> 赞同：5
> 
> 时间：2012-11-01T12:48:36.680
> 
> 标签：iphone, objective-c, facebook, ios6

我尝试使用 facebook 登录遵循[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)中的 facebook 教程来实现它，但在警报视图要求我允许我之后应用程序使用您的数据并按确定错误

**操作无法完成 。（com.facebook.sdk 错误 2）**

请注意，我在模拟器中，我在设置中输入了我的 FB 我的帐户，并且它已正确记录。

调试它的问题，错误的结果如下：

> （NSError *）$1 = 0x0ac77290 错误域=com.facebook.sdk 代码=2“操作无法完成。（com.facebook.sdk 错误 2。）”UserInfo=0xac77450 {com.facebook.sdk:ErrorLoginFailedReason= com.facebook.sdk:ErrorLoginFailedReason, com.facebook.sdk:ErrorInnerErrorKey=Error Domain=com.apple.accounts Code=7 "Facebook 服务器无法完成此访问请求：没有为应用存储 remote_app_id" UserInfo=0xaa91d40 {NSLocalizedDescription= Facebook 服务器无法完成此访问请求：没有为应用存储 remote_app_id}}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T13:06:56.120

您需要在developers.facebook.com 上的应用设置中提供您的应用捆绑ID

[iOS 6 Facebook 发布过程以“remote_app_id 与存储的 id 不匹配”结束](https://stackoverflow.com/questions/12671420/ios-6-facebook-posting-procedure-ends-up-with-remote-app-id-does-not-match-stor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T09:35:05.683

从设备设置中退出 Facebook 后，它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T09:52:49.877

由于这个原因，可能会出现这种错误：-

1.  可能是您的捆绑 ID 与developers.facebook.com/aaps 不同

2.  您可能没有对您的应用授予正确的权限。

3.  您没有在 iphone facebook 设置中启用 facebook 应用程序。

请按照下面给出的链接

[Facebook 注册：操作无法完成（com.facebook.sdk 错误 2）](https://stackoverflow.com/questions/16052078/facebook-registration-the-operation-couldnt-be-completed-com-facebook-sdk-er/16052146?noredirect=1#comment22908493_16052146)

我希望这可以消除您的所有疑问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:44:10.400

在带有 fb sdk 3.1.1 的 ios 6 中。请在“[FBSessio openActiveSessionWithReadPermissions...”方法中将权限参数作为“nil 或电子邮件”传递。在这里，我的代码效果很好。

```
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 )

-(void)showFBLogin
{
    [FBSession.activeSession closeAndClearTokenInformation];

    NSArray *permissions = [NSArray arrayWithObjects:@"email, publish_actions, publish_stream", nil];

#ifdef IOS_NEWER_OR_EQUAL_TO_6
    permissions = nil; or NSArray *permissions = [NSArray arrayWithObjects:@"email",nil];
#endif

    NSLog(@"\npermissions = %@", permissions);
    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         NSLog(@"\nfb sdk error = %@", error);
         switch (state) {
             case FBSessionStateOpen:
                 [[FBRequest requestForMe] startWithCompletionHandler:
                  ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
                      if (!error) {
                          //success
                      } 
                  }];
                 break;
             case FBSessionStateClosed:
                 //need to handle
                 break;
             case FBSessionStateClosedLoginFailed:
                 //need to handle
                 break;
             default:
                 break;
         }
     }];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T07:29:16.653

这对我有用：

转到 iPhone 的设置应用程序。打开您的 Facebook 设置 向下滚动到您的应用，并确保您的应用允许 Facebook 交互。

# c# - 在 WP7 上尝试访问该方法失败

> ID：13177431
> 
> 赞同：0
> 
> 时间：2012-11-01T12:48:49.097
> 
> 标签：c#, silverlight, windows-phone-7, stream, pdf-reader

我想将 PDFSharp 用于 WP7 库，但它会引发这样的异常

> “尝试访问该方法失败：PdfSharp.Pdf.PdfDocumentInformation..ctor(PdfSharp.Pdf.PdfDictionary)”

我的部分代码如下：

```
IsolatedStorageFile resurce = IsolatedStorageFile.GetUserStoreForApplication();

Stream str = new StreamReader(new IsolatedStorageFileStream("test7.pdf", FileMode.Open, FileAccess.Read, resurce)).BaseStream;
                PdfDocument document = new PdfDocument();
                document.Version = 14;
                document = PdfReader.Open(str); 
```

编辑：我找到了答案。问题是`document = PdfReader.Open(str);`。解决办法是`document = PdfReader.Open(str, PdfDocumentOpenMode.ReadOnly);`。您可以更改 OpenMode。

# php - 无法在...中加载“JavascriptHelper.php”帮助程序（Symfony 1.3.8 到 1.4.12 升级）

> ID：13177437
> 
> 赞同：1
> 
> 时间：2012-11-01T12:49:05.203
> 
> 标签：php, symfony1, symfony-1.4

我正在将现有网站从 Symfony 1.3.8 升级到 1.4.12。我不断收到有关 javascript 帮助程序的错误消息。经过一番研究，我发现这是由于助手的名称更改所致。

我在我的所有（数百个）php文件中进行了手动搜索/替换：

```
<?php use_helper('Javascript'); ?>

to:

<?php use_helper('JavascriptBase'); ?> 
```

然后我清除了缓存（手动删除了所有内容和子文件夹），然后重新启动了网站。该站点无法加载，当我检查 php_error.log 文件时，我发现了以下消息：

```
Unable to load "JavascriptHelper.php" helper in: 
    SF_ROOT_DIR/apps/frontend/modules/home/lib/helper, 
    SF_ROOT_DIR/apps/frontend/lib/helper, 
    SF_ROOT_DIR/lib/helper, 
    SF_ROOT_DIR/plugins/sfAssetsLibraryPlugin/lib/helper, 
    SF_ROOT_DIR/plugins/sfGoogleAnalyticsPlugin/lib/helper, 
    SF_SYMFONY_LIB_DIR/helper. 
```

我确定我已经替换了所有出现的地方，所以我进行了 grep 搜索：

```
 grep -lr "use_helper('Javascript'" . 2>/dev/null | grep -v .svn 
./doc/2colwideLHS.php
./log/php_errors.log.old
./apps/frontend/modules/sfGuardAuth/templates/registerSuccess.php.old 
```

可以看出，使用的文件都不包含旧的帮助程序名称 - 为什么它仍然无法正常工作，我错过了什么？

[[编辑]]

根据我得到的反馈，我决定禁用所有插件（Propel 插件除外）。这是我的 config/ProjectConfiguration.php 文件的样子：

```
<?php

 class ProjectConfiguration extends sfProjectConfiguration
 {
    public function setup()
    {
        $this->enablePlugins(array('sfPropelPlugin',
                                   /*'sfAssetsLibraryPlugin',
                                   'sfFormExtraPlugin',
                                   'sfGoogleAnalyticsPlugin',
                                   'sfGuardPlugin'*/));

    }
} 
```

但是，在清除缓存并刷新网页后，我得到与以前完全相同的错误。我现在越来越绝望，因为该网站已经被关闭了一天的大部分时间，我需要尽快让它恢复在线。

顺便说一句，我知道不再支持 1.4.12，但是 Symfony 将目标帖子从 Symfony 1.x 移动到 2.x 以至于升级到 2.0 将涉及整个站点的重写——我不这样做目前有资源要做，所以我正在尝试将工作站点升级到下一个最好的东西，1.4.12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:01:00.040

1.4应该没问题。我使用该代码库维护了许多站点。

现在，当您遇到实际问题时，我敢打赌它是您最有可能使用的插件之一`sfAssetsLibraryPlugin`。您还需要将它们升级到它们的 1.4 分支。如果它们还没有从 1.x 转换或有但有一些遗漏，那么你将不得不分叉它们并自己更新东西。

# php - Youtube API v3、topicId 和 freebase

> ID：13177438
> 
> 赞同：0
> 
> 时间：2012-11-01T12:49:05.690
> 
> 标签：php, youtube-api

所以我试图从 youtube 中提取特定视频游戏的视频。这我工作得几乎很好，但是在查询视频游戏标题时，一些（主要是与体育特许经营权、电影等共享名称的游戏）正在返回与视频游戏无关的结果。

我查看了[此处](https://developers.google.com/youtube/v3/docs/search/list)的文档并找到了 topicId 过滤器，但是我很难使用它。

如果我尝试在其中放入一些东西，它会返回：

```
$searchResponse = $youtube->search->list(array(
  'q' => $_GET['q'],
  'maxResults' => $_GET['maxResults'],
  'part' => 'id',
  'order' => 'relevance',
  'type' => 'video',
  'topicId' => '/m/0d6lp'
)); 
```

> （列表）未知参数：'topicId'

也无法使用 freebase API 返回我需要的主题。

我要做的就是仅使用以下内容过滤视频： ![Youtube 视频类别为“游戏”](../Images/193c4ad34d1cada3714d0fe1f9b49a92.png)

那么，我有什么想法可以仅使用搜索 API 将 youtube 搜索限制为视频游戏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:09:40.950

这个例子看起来有点不对劲。PHP 客户端的版本可能不会针对 YouTube 版本进行更新，但会检查代码。前往[https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)并查看源代码以获取最新版本，之后此代码应该可以正常工作。

```
$searchResponse = $youtube->search->listSearch('id', array(
  'q' => $_GET['q'],
  'maxResults' => $_GET['maxResults'],
  'order' => 'relevance',
  'type' => 'video',
  'topicId' => '/m/0d6lp'
)); 
```

调用`listSearch`而不是`list`，并将`part`作为第一个参数而不是放在数组中。

# c# - 移动图片框 C#

> ID：13177440
> 
> 赞同：1
> 
> 时间：2012-11-01T12:49:08.300
> 
> 标签：c#, picturebox, mousemove

这里是缝。我单击一个按钮并创建一个新的 PictureBox 没问题。当我单击并拖动时，我将图片移动到它的新位置。现在，当我再次单击该按钮时，我创建了同一个 PictureBox 的新实例，当我尝试移动旧的时，我最终移动了新创建的框。我认为这是因为它们都具有相同的名称：

```
PictureBox pic = new PictureBox(); 
```

如何通过单击在两个图片框之间切换？

****更新**** 感谢 Nilotpal 的回答，我设法解决了上述问题。唯一的问题是图片框现在似乎在晃动，或者在另一个实例和我正在拖动的那个实例之间来回切换位置。无论哪种方式，我真的不确定如何解决这个问题。有任何想法吗？

****更新**** 我拥有的代码：

```
 private void code128ToolStripMenuItem_Click(object sender, EventArgs e)
    {

        bNum++;
        Barcode barcode = new Barcode();

        pic = new PictureBox();
        pic.Name = "bCode" + bNum;
        pic.SizeMode = PictureBoxSizeMode.AutoSize;
        pic.Image = barcode.createBarcode(BarcodeLib.TYPE.CODE128, 300, 100, "123456789");

        pic.Show();
        labelHolder.Controls.Add(pic);
        pic.BringToFront();
        pic.MouseDown += pic_MouseDown;
        pic.MouseMove +=pic_MouseMove;
        pic.MouseUp += pic_MouseUp;
    }

    PictureBox thisPB;
     private void pic_MouseDown(object sender, MouseEventArgs e)
    {

        mouseDown = true;

        oldX = e.X;
        oldY = e.Y;

    }

    private void pic_MouseMove(object sender, MouseEventArgs e)
    {
        if(mouseDown)
        {

                thisPB = (PictureBox)sender;
                thisPB.Location = new Point(pic.Location.X - (oldX - e.X), pic.Location.Y - (oldY - e.Y));

                this.Refresh();

        }

    }

    private void pic_MouseUp(object sender, MouseEventArgs e)
    {

        mouseDown = false;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:59:37.293

```
 private void button1_Click(object sender, EventArgs e)
    {
        PictureBox pb = new PictureBox();
        pb.Top = 200;
        pb.Left = 200;
        pb.BackColor = Color.Gray;
        pb.MouseMove += new MouseEventHandler(pb_MouseMove);
        this.Controls.Add(pb);
    }

    void pb_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Left)
        {
            PictureBox thisPB = (PictureBox)sender;
            thisPB.Left = e.X;
            thisPB.Top = e.Y;
        }
    } 
```

移动会不稳定，您可以根据需要进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:26:15.110

修复！

旧代码：

```
Barcode barcode = new Barcode();
        pic = new PictureBox();
        pic.Name = "bCode" + bNum;
        pic.SizeMode = PictureBoxSizeMode.AutoSize;
        pic.Image = barcode.createBarcode(BarcodeLib.TYPE.CODE128, 300, 100, "123456789");

        pic.Show();
        labelHolder.Controls.Add(pic);
        pic.BringToFront();
        pic.MouseDown += pic_MouseDown;
        pic.MouseMove +=pic_MouseMove;
        pic.MouseUp += pic_MouseUp;
    }

    PictureBox thisPB;
    private void pic_MouseDown(object sender, MouseEventArgs e)
    {

        mouseDown = true;

        oldX = e.X;
        oldY = e.Y; }

    private void pic_MouseMove(object sender, MouseEventArgs e)
    {
        if(mouseDown)
        {
thisPB.Location = new Point(pic.Location.X - (oldX - e.X), pic.Location.Y - (oldY - e.Y));
                this.Refresh();

        }
    }

    private void pic_MouseUp(object sender, MouseEventArgs e)
    {
        mouseDown = false;
    } 
```

工作代码：

```
Barcode barcode = new Barcode();

        pic = new PictureBox();
        pic.Name = "bCode" + bNum;
        pic.SizeMode = PictureBoxSizeMode.AutoSize;
        pic.Image = barcode.createBarcode(BarcodeLib.TYPE.CODE128, 300, 100, "123456789");

        pic.Show();
        labelHolder.Controls.Add(pic);
        pic.BringToFront();
        pic.MouseDown += pic_MouseDown;
        pic.MouseMove +=pic_MouseMove;
        pic.MouseUp += pic_MouseUp;
    }

    PictureBox thisPB;
    private void pic_MouseDown(object sender, MouseEventArgs e)
    {             
        mouseDown = true;

        oldX = e.X;
        oldY = e.Y;           
    }

    private void pic_MouseMove(object sender, MouseEventArgs e)
    {
        if(mouseDown)
        {             
                thisPB = (PictureBox)sender;
                thisPB.Location = new Point(thisPB.Location.X - (oldX - e.X), thisPB.Location.Y - (oldY - e.Y));

                this.Refresh();                
        }            
    }

    private void pic_MouseUp(object sender, MouseEventArgs e)
    {
        mouseDown = false;           
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-02T09:04:51.390

您可能会发现这很有帮助。

```
static class ExtensionMethods
{
    public static Point Add(this Point original, Point value)
    {
        return new Point(original.X + value.X, original.Y + value.Y);
    }

    public static Point Subtract(this Point original, Point value)
    {
        return new Point(original.X - value.X, original.Y - value.Y);
    }
} 
```

# objective-c - NSNumber：否 == 0？

> ID：13177441
> 
> 赞同：1
> 
> 时间：2012-11-01T12:49:10.177
> 
> 标签：objective-c

```
NSNumber *x = [NSNumber numberWithBool:NO];
NSNumber *y = [NSNumber numberWithUnsignedInt:0];
assert([x isEqual:y]);
assert(x==y); 
```

第一个断言通过，第二个断言失败，为什么？因为他们的'objCType'不同？isEqual: 和 == operator 的定义有什么区别？

为什么我这样做：我必须在某个后端存储一个布尔值，其 API 需要一个 NSNumber 而不是 BOOL，所以我必须在存储它们之前将所有 BOOL 转换为 NSNumber。我也需要反之亦然。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:53:17.477

**运营`==`商**

该`==`运算符比较本机类型的值以及对象指针以查看它们是否完全相同。如果您想查看两个本机类型的值是否相等（`1 == 1`，其中 1 是`int`），这将很有用。它还可以让您查看两个指针是否指向同一个对象。例如，如果你有这个：

```
NSNumber *x = [NSNumber numberWithBool:NO];
NSNumber *y = x; 
```

then`x==y`为真，因为`x`指向与 相同的对象`y`。

**`isEqual:`方法_**

该`isEqual:`方法只是比较两者`NSObjects`，看它们是否是相同的*值*，但不一定是完全相同的*对象*。`[x isEqual:y]`问，“与？`x`相同`y`？”，而`x==y`问，“与？`x`指向同一个对象`y`？”

（请记住，当您使用 时`*`，您是在声明一个指针。）

**结论**

由于您没有使用本机类型的值或指针，因此您应该使用`isEqual:`. 该`isEqual:`方法比较两个对象的值，而不是对象本身。

此外，`[NSNumber numberWithBool:NO]`并且`[NSNumber numberWithUnsignedInt:0]`确实产生了相同的值，这就是`isEqual:`返回 true 的原因。

# php - 使用服装尺寸和额外值对数组进行排序

> ID：13177442
> 
> 赞同：1
> 
> 时间：2012-11-01T12:49:09.463
> 
> 标签：php, arrays

我目前正在尝试对属于数组的一些服装尺寸数组（SML XL XXL 等）进行排序。我可以通过以下功能做到这一点（感谢这个地方[Php Array Sorting Clothing Sizes (XXS XS SML XL XXL) and Numbers on a Dynamic Array](https://stackoverflow.com/questions/7647982/php-array-sorting-clothing-sizes-xxs-xs-s-m-l-xl-xxl-and-numbers-on-a-dynamic)）：

```
function cmp($a, $b) {

        $sizes = array(
        "XXS" => 0,
        "XS" => 1,
        "S" => 2,
        "M" => 3,
        "L" => 4,
        "XL" => 5,
        "XXL" => 6
        );

        $asize = $sizes[$a];
        $bsize = $sizes[$b];

        if ($asize == $bsize) {
            return 0;
        }

        return ($asize > $bsize) ? 1 : -1;

    }

    usort($the_array, "cmp"); 
```

这对于一个看起来像这样的数组来说非常好：$the_array("S", "M", "XL")。但是，我的数组看起来有点像这样：

```
$the_array = array("S : price £10", "XXL : price £10", "M : price £10", "XS : price £10") 
```

这使它不起作用......我需要一个理想情况下只查看数组的第一部分直到“：”的函数。有这样的事吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:17:53.070

此解决方案将在每个字符串的开头搜索大小值。它仅在没有尺寸是另一个尺寸的前缀时才有效，例如“X”将是“XL”的前缀。它不依赖于数据的特定格式；它将找到最早出现的有效大小字符串。

```
// Your comparison function:
function cmp($a, $b) {
  // Make the array static for performance.
  static $sizes = array('XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL');

  // Find the size of $a and $b (the first string for which strpos===0)
  $asize = 100; // Sort non-size strings after matching sizes.
  $apos = -1;
  $bsize = 100;
  $bpos = -1;
  foreach ($sizes AS $val => $str) {
    // It's important to use `===` because `==` will match on
    // FALSE, which is returns for no match.
    if (($pos = strpos($a, $str)) !== FALSE && ($apos < 0 || $pos < $apos)) {
      $asize = $val;
      $apos = $pos;
    }
    if (($pos = strpos($b, $str)) !== FALSE && ($bpos < 0 || $pos < $bpos)) {
      $bsize = $val;
      $bpos = $pos;
    }
  }

  return ($asize == $bsize ? 0 : ($asize > $bsize ? 1 : -1));
}

usort($the_array, 'cmp'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T16:31:29.430

适用于任意数量的 X。

```
function cmpSizes($a, $b) {
    list($a, $b) = array(strtolower($a), strtolower($b));
    $weights = array('s' => 1, 'm' => 2, 'l' => 3);
    $primaryWeights = array();
    foreach(array('a', 'b') as $var) {
        if(is_numeric(strpos($$var, 's'))) {
            $weight = $weights['s'];
        } elseif(is_numeric(strpos($$var, 'm'))) {
            $weight = $weights['m'];
        } elseif(is_numeric(strpos($$var, 'l'))) {
            $weight = $weights['l'];
        } else {
            return -1;
        }
        $primaryWeights[$var] = $weight;
    }
    if($primaryWeights['a'] === $primaryWeights['b']) {
        $xCt = array('a' => substr_count($a, 'x'), 'b' => substr_count($b, 'x'));
        if($xCt['a'] > $xCt['b']) {
            return $primaryWeights['a'] === $weights['s'] ? -1 : 1;
        } elseif($xCt['a'] < $xCt['b']) {
            return $primaryWeights['a'] === $weights['s'] ? 1 : -1;
        }
        return 0;
    } elseif ($primaryWeights['a'] > $primaryWeights['b']) {
        return 1;
    }
    return -1;
} 
```

所以示例代码

```
$userSizes = array('XS','S','XXXXS','XXL','L','M','XL');
usort($userSizes, 'cmpSizes');
var_dump($userSizes); 
```

产量

```
array(7) {
  [0] =>
  string(5) "XXXXS"
  [1] =>
  string(2) "XS"
  [2] =>
  string(1) "S"
  [3] =>
  string(1) "M"
  [4] =>
  string(1) "L"
  [5] =>
  string(2) "XL"
  [6] =>
  string(3) "XXL"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:52:23.777

在其回调中调用`usort()`和使用`explode()`将允许您对第一部分进行排序。

```
$sizes = array(
    "XXS" => 0,
    "XS" => 1,
    "S" => 2,
    "M" => 3,
    "L" => 4,
    "XL" => 5,
    "XXL" => 6
    );
$the_array = array("S : price £10", "XXL : price £10", "M : price £10", "XS : price £10");

// Anonymous function -- PHP 5.3+ only...
// Uses the $sizes array from the higher scope...
usort($the_array, function($a, $b) use ($sizes) {
  // Split each on space,colon,space
  list($asize, $aprice) = explode(' : ', $a);
  list($bsize, $bprice) = explode(' : ', $b);

  // Perform the usort comparison
  // which uses the sizes matched above as array keys to the $sizes array
  if ($sizes[$asize] == $sizes[$bsize]) {
    return 0;
  }
  return $sizes[$asize] < $sizes[$bsize] ? -1 : 1;
});

// Output:
var_dump($the_array);
array(4) {
  [0] =>
  string(15) "XS : price £10"
  [1] =>
  string(14) "S : price £10"
  [2] =>
  string(14) "M : price £10"
  [3] =>
  string(16) "XXL : price £10"
} 
```

如果分隔符并不总是`space,colon,space`如上所示并且有所不同，则需要使用`preg_split()`而不是`explode()`.

```
// Split on any number of spaces surrounding the :
list($asize, $aprice) = preg_split('/\s*:\s*/', $a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:53:27.107

如果您要做的只是按大小对数组进行排序，则可以执行以下操作：

```
/** THE SORT FUNCTION **/
function sortSize($data_arr)
{
    $sizes_arr = array('XXS' => 0, 'XS'  => 1, 'S'   => 2, 'M'   => 3, 'L'   => 4, 'XL'  => 5, 'XXL' => 6);

    $data_sort_arr = array();
    foreach ($data_arr as $value)
    {
        //get the size
        $size_item_arr = explode(':', $value);
        $size_item_str = trim($size_item_arr[0]);

        //get the position of size from sizes array
        $size_pos_int = intval($sizes_arr[$size_item_str]);

        //populate new array with sorted data
        $data_sort_arr[$size_pos_int] = $value;
    }

    //sort then reset keys numerically
    ksort($data_sort_arr);
    return array_values($data_sort_arr);
}
/** THE SORT FUNCTION **/

/** THE TEST **/
$data_arr = array("S : price £10", "XXL : price £10", "M : price £10", "XS : price £10");    
print_r(sortSize($data_arr));
/** THE TEST **/ 
```

我得到以下结果：

```
Array
(
    [0] => XS : price £10
    [1] => S : price £10
    [2] => M : price £10
    [3] => XXL : price £10
) 
```

我希望这是你需要的？！

干杯。

# android - phonegap android 2.2 调用javascript

> ID：13177448
> 
> 赞同：1
> 
> 时间：2012-11-01T12:49:22.837
> 
> 标签：android, cordova

我在 phonegap 中开发 android 应用程序我想从我的主要活动中调用 javascript。我使用了以下代码

appView.loadUrl("javascript:(function(){alert('sfksjf'); sessionStorage.setItem('notificationTap','Yes');})();");

这在 android 2.1 中工作得很好。

但在 android 2.2 中不调用 javascript 函数。

非常感谢任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:05:05.183

你应该使用：

```
appView.sendJavascript("(function(){alert('sfksjf'); sessionStorage.setItem('notificationTap','Yes');})();"); 
```

反而。

# selenium-webdriver - 无法在 selenium webdriver 中实例化类型 Select

> ID：13177452
> 
> 赞同：2
> 
> 时间：2012-11-01T12:49:34.347
> 
> 标签：selenium-webdriver

我正在尝试模拟一个测试用例，我必须从多选框中选择多个选项。我可以使用选择来做到这一点。但是，一旦我实例化选择，我就会收到以下错误。

“无法实例化类型选择”

我的代码是：

```
import java.awt.List;
import java.util.ArrayList;

import junit.framework.Assert;

import org.apache.bcel.generic.Select;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;

public class SeleniumFormTesting {
//piece of code to open the browser in firefox

Select selectBox = new Select(driver.findElement(By
            .cssSelector("select#id_contact")));
//in above select statement the error comes

} 
```

有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T13:41:50.377

尝试使用`Select`导入包。您可以使用以下命令将其导入您的项目：

`import org.openqa.selenium.support.ui.Select;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T00:08:08.820

尝试通过导入`Select`支持包：

```
import org.openqa.selenium.support.ui.Select; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-16T17:00:57.277

```
import java.awt.List;
import org.apache.bcel.generic.Select;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class SelectDOB {
    public static void main(String[] args) {
        //Code to open browser and facebook page
        Select s  = new Select(driver.findElement(By.xpath("//*[@id='day']")));
        s.selectByVisibleText("10");
        Select s  = new Select(driver.findElement(By.xpath("//*[@id='month']")));
        s.selectByVisibleText("May");
        Select s  = new Select(driver.fintdElement(By.xpath("//*[@id='year']")));
        s.selectByVisibleText("1980");
    }}
tried with this, still am getting error
Am getting "Cannot instantiate the type Select", 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-29T06:05:15.503

删除 >> 导入 o​​rg.apache.bcel.generic.Select;

仅使用 >> import org.openqa.selenium.support.ui.Select;

对我来说它有效。

# ruby - 带有输入和输出文件的 Rspec

> ID：13177454
> 
> 赞同：1
> 
> 时间：2012-11-01T12:49:35.103
> 
> 标签：ruby, file, rspec

我有一个处理文件并从该输入文件的内容生成输出文件的类。

我的问题很直接：我应该如何测试它？

在输入行中说我有这样一行：

```
"I love pets 1" 
```

我需要测试在输出文件中有这样一行：

```
"I love pets 2" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:13:07.327

您可以使用夹具文件作为示例输出并检查输出文件的内容（`File.read`使用适用于文件：

```
class StringProcessor
  def initialize(input)
    @input = input
  end

  def output
    # process @input and return string
  end
end

class FileProcessor < StringProcessor
  def initialize(file)
    super(File.read file)
  end

  def output(file)
    File.open(file, 'w') do |file|
      file.puts super()
    end
  end
end 
```

# asp.net-mvc - Mvc 状态替换

> ID：13177456
> 
> 赞同：0
> 
> 时间：2012-11-01T12:49:36.863
> 
> 标签：asp.net-mvc

我很难理解 mvc 的无状态问题。假设我有一个包含人员列表的屏幕。我想选择其中一个，一旦我选择了这个人，我想保留他的 ID，从我的左侧菜单中，我想打开一个显示他的订单的屏幕，一个显示他的帐户详细信息的屏幕……在 ASPX 中，我会只需将他的 PersonID 保留在会话中，并在整个网站上使用它。我怎样才能在 mvc 中做同样的事情？如果我将他的 id 保存在公共静态类的公共变量中怎么办？它会起作用吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:53:07.163

使用会话，就像在 ASPX 中一样。

使用具有静态`PersonID`属性的静态类，它将由所有用户共享......意味着每次设置值时，所有用户都将获得相同的值：不完全是您想要的，是吗？

> 因此，Web Forms 模型本质上抽象了许多特性，为 Web 开发人员提供了一个**模拟的有状态模型**。因此，您不必成为具有大量 HTML 和 JavaScript 知识的 Web 专家即可编写有效的 Web 应用程序。
> 
> 为了模拟 Web 上的有状态编程，ASP.NET Web 窗体引入了诸如视图状态、回发和整体事件驱动范例等功能。

[http://msdn.microsoft.com/en-us/magazine/dd942833.aspx](http://msdn.microsoft.com/en-us/magazine/dd942833.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:57:20.173

它不是无状态的 MVC，它的 HTTP。ASP.NET 和其他 Web 技术中的解决方法是服务器端会话状态和某种将来自一个客户端的无状态 http 请求关联到一个服务器端会话对象（通常使用 cookie 完成）。

所以只需使用`Session`or`TempData`属性。

# random - 计算机如何产生随机性？

> ID：13177457
> 
> 赞同：0
> 
> 时间：2012-11-01T12:49:37.493
> 
> 标签：random

> **可能重复：**
> [random() 实际上是如何工作的？](https://stackoverflow.com/questions/1359318/how-does-random-actually-work)

我的美术老师过去总是告诉我们计算随机性永远不是*真正*的随机性。作为一个决定论者，我认为随机性根本不存在，但我与编程相关的问题是：

**计算机究竟是如何产生“随机”数字的？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:53:07.787

计算机产生的随机数通常是*伪*随机数。请参阅：[伪随机数生成器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)。

基本上有一种算法可以确定性地产生一系列值。这些值分布在整个范围内，因此它们看起来像是随机的，但它们是完全可预测的。通常你用一些*种子*启动生成器，如果你使用相同的种子，生成器每次都会产生完全相同的输出。

# 也可以看看

*   [http://www.random.org/](http://www.random.org/) - 基于大气噪声的真正随机数

*   [http://www.entropykey.co.uk/](http://www.entropykey.co.uk/) - 基于晶体管模拟噪声的硬件 USB 设备

# ajax - 如何轮询特定的 HTTP POST

> ID：13177458
> 
> 赞同：0
> 
> 时间：2012-11-01T12:49:47.573
> 
> 标签：ajax, polling

好的，所以我像往常一样向带有参数的特定 URL 提交一个 http POST

```
var request = OpenLayers.Request.POST({
url: "http://test/services",
data: params 
```

});

我从服务器返回的 XML 包含有关（WPS）过程完成百分比的信息。最初，当我发送 POST 时，我得到的当然是 0%。我想弄清楚如何检索完全相同的 XML，以便我可以轮询并创建进度条。如果我复制 POST，它会创建一个全新的流程。所以我不会回到同样的过程。

所以我只是不知道如何准确地继续轮询以获取我需要的 XML。也许我需要以某种方式配置 GET ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:55:03.420

如何使用 ID？Post 返回进程的 ID，并使用带有此 ID 作为参数的附加 GET 返回当前进度。

# android - 如何单击位置选项卡中的按钮？

> ID：13177461
> 
> 赞同：1
> 
> 时间：2012-11-01T12:50:18.107
> 
> 标签：android, class, button

我在布局文件夹中有 2 个 java 类和 2 个 xml 文件。在 location.java 类中，我通过位置文件和 location.xml 文件设置内容视图有 5 个按钮，但在位置 java 类中没有实现 onClick 方法。当我单击位置选项卡中的按钮时，程序已停止，我不知道如何解决此问题？我是否在 Location.java 类中实现所有按钮的 onClick 方法？我在下面写我的代码：

请帮我

主.java

```
public class Main extends Activity {

private WebView mWebView;
private Button mHome;
private Button mProduct;
private Button mPlaces;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mWebView = (WebView)findViewById(R.id.web_view);
    mWebView.loadUrl("http://loyaltier.com/app/mobile/code/home/home.php");

    mHome = (Button)findViewById(R.id.button_home);
    mProduct=(Button)findViewById(R.id.button_product);
    mPlaces=(Button)findViewById(R.id.button_places);

    mHome.setOnClickListener(onClickListener);
    mProduct.setOnClickListener(onClickListener);
    mPlaces.setOnClickListener(onClickListener);

}
private OnClickListener onClickListener=new OnClickListener(){
    public void onClick(View v){
        switch(v.getId()){
        case R.id.button_home:
            mWebView.loadUrl("http://loyaltier.com/app/mobile/code/home/home.php");
            break;
        case R.id.button_product:
            mWebView.loadUrl("http://loyaltier.com/app/mobile/design/catalog/catalog1.php");
            break;
        case R.id.button_places:
            Intent i=new Intent(Main.this,Location.class);
            startActivity(i);
            break;
        }
    }
};
} 
```

位置.java

```
 public class Location extends MapActivity {
private FrameLayout linear;
private MapView map;
private MapController controller;
private EditText text_location;
double myLatitude;
double myLongitude;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);
    initMapView();
    initZoomControls();
    initMyLocation();
    //Not complete this method
    text_location.setOnKeyListener(new OnKeyListener(){
        public boolean onKey(View view, int keyCode,KeyEvent event){
            if(keyCode==KeyEvent.KEYCODE_ENTER){
            // The map should shows a location that user writes in edittex.
                return true;
            }
            return false;
        }
    });

}
@Override
protected boolean isRouteDisplayed() {
    // Required by MapActivity
    return false;
}
private void initMapView() {
    linear = (FrameLayout) findViewById(R.id.frame);
    text_location=(EditText)findViewById(R.id.text_location);
    map = (MapView) findViewById(R.id.mapView);
    controller = map.getController();
    map.setSatellite(true);
}
private void initZoomControls() {
    View zoomControls = map.getZoomControls();
    FrameLayout.LayoutParams p = new FrameLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,Gravity.CENTER_VERTICAL + Gravity.CENTER_HORIZONTAL);
    linear.addView(zoomControls, p);
}
private void initMyLocation() {
    final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
    overlay.enableMyLocation();
    overlay.enableCompass(); // no effect in emulator
    overlay.runOnFirstFix(new Runnable() {
        public void run() {
            // Zoom in to current location
            controller.setZoom(8);
            controller.animateTo(overlay.getMyLocation());
        }
    });
    map.getOverlays().add(overlay);

    myLatitude=(overlay.getMyLocation().getLatitudeE6())/1e6;
    myLongitude=(overlay.getMyLocation().getLongitudeE6())/1e6;

}
 } 
```

Main_Activity.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:gravity="bottom"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_home"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/home_icon"
        android:text="@string/button_home"
        android:textColor="@color/text_home" />

    <Button
        android:id="@+id/button_product"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/product_icon"
        android:onClick="Product"
        android:text="@string/button_product"
        android:textColor="@color/text_product" />

    <Button
        android:id="@+id/button_places"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/places_icon"
        android:onClick="Places"
        android:text="@string/button_places"
        android:textColor="@color/text_places" />

    <Button
        android:id="@+id/button_rewards"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/rewards_icon"
        android:onClick="Rewards"
        android:text="@string/button_rewards"
        android:textColor="@color/text_rewards" />

    <Button
        android:id="@+id/button_more"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/more_icon"
        android:onClick="More"
        android:text="@string/button_more"
        android:textColor="@color/text_more" />
</LinearLayout>

</LinearLayout> 
```

位置.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <FrameLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/frame"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:apiKey="0cPRv243zM1_S3ydsNg8MJP9_6BfCp642jOhPvQ"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true" />
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:orientation="horizontal"
        android:background="@color/backgroundTextSearch">
        <EditText
            android:id="@+id/text_location"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:lines="1"/>    
    </RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:layout_gravity="bottom"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_home"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/home_icon"
        android:text="@string/button_home"
        android:textColor="@color/text_home"
    />

     <Button
        android:id="@+id/button_product"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/product_icon"
        android:onClick="Product"
        android:text="@string/button_product"
        android:textColor="@color/text_product" 
        android:layout_toRightOf="@id/button_home"/>
     <Button
        android:id="@+id/button_places"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/places_icon"
        android:onClick="Places"
        android:text="@string/button_places"
        android:textColor="@color/text_places"
        android:layout_toRightOf="@id/button_product" />

    <Button
        android:id="@+id/button_rewards"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/rewards_icon"
        android:onClick="Rewards"
        android:text="@string/button_rewards"
        android:textColor="@color/text_rewards" 
        android:layout_toRightOf="@id/button_places"/>

    <Button
        android:id="@+id/button_more"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/more_icon"
        android:onClick="More"
        android:text="@string/button_more"
        android:textColor="@color/text_more"
        android:layout_toRightOf="@id/button_rewards" />

</RelativeLayout> 
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:02:51.820

只需`android:onClick`从布局文件中删除所有标签。看来你真的不知道他们需要什么。例如，如果您为按钮设置`android:onClick="Product"`标签，则意味着您必须在代码中实现此类功能来处理`onClick`事件。

```
@Override
public void Product(){
...
} 
```

`onClick`如果您在代码中定义回调，则绝对不需要在布局中使用此类标签。

# linux - 桌面双启动：完全资源可用性

> ID：13177463
> 
> 赞同：-1
> 
> 时间：2012-11-01T12:50:32.057
> 
> 标签：linux, operating-system, boot

我办公室里有几台 Windows 桌面暂时没有使用。我想在 Linux 上使用它们来进行概念验证练习。需要时，我需要随时发布带有 Windows 的桌面。我计划在它们上安装一个双引导操作系统（Linux 和 Windows），以便在需要时更容易发布它们。

使用双启动时，当我在 Linux 上将桌面用于 PoC 时，整个系统容量（CPU、内存、存储）是否可用，或者系统资源会被硬分区并且其中一部分永远不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:12:10.607

当前运行的操作系统将始终具有对计算机的完全访问权限。“双启动”不是机器本身识别的东西。这只是描述特定设置的术语。

# iphone - 当应用程序在后台时，每 5 分钟通过 iPhone 应用程序向服务器发送位置更新

> ID：13177464
> 
> 赞同：1
> 
> 时间：2012-11-01T12:50:32.207
> 
> 标签：iphone, ios

我想构建一个功能，用户的当前位置将每 5 分钟发送到服务器。听起来不像 Apple 会喜欢的东西。虽然这将是一个内部应用程序（并且用户知道他们的位置已被使用），但规则是否不那么严格？有人有这方面的经验吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T12:57:34.613

似乎是一个非常直接的案例。

在您的 PLIST 文件中启用后台定位服务要求，在您的应用描述中放置免责声明，说明在后台连续使用 GPS 会大大耗尽电池电量，然后让您的代码每 5 分钟上传一次 GPS 位置。

它甚至可以在后台工作:)

我在应用商店有一个应用程序，可以在用户开车时实时记录用户的路线，虽然它不会发送到服务器，但它会不断跟踪用户自己的位置，当用户完成后，他们可以停止 GPS追踪。

## 一些代码建议

跟踪用户的位置并不是一件简单的事情，但我可以建议一条学习路线，这不会太让人不知所措。

首先，您的问题有两个部分：

a) 跟踪用户的位置 b) 将用户的 GPS 坐标发送到服务器

## 跟踪用户的位置

可以通过两种方式跟踪用户的位置。您可以使用 CLLocationManager 来跟踪用户的位置，或者如果您想要快速而肮脏的方法，您可以使用 MKMapView 的委托方法：

```
// --------------------------------------------------------------
// Example .m files implementation
// --------------------------------------------------------------
-(void)viewDidLoad
{
    ...
    myMapView.delegate = self;
    ...
}

// --------------------------------------------------------------
// this MapView delegate method gets called every time your 
// user location is updated, you can send your GPS location
// to your sever here
// --------------------------------------------------------------
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    // pseudo-code
    double latitude = userLocation.coordinate.latitude;
    double longitude = userLocation.coordinate.longitude;

    // you need to implement this method yourself
    [self sendGPSToServerWithLatitude:latitude AndLongitude:longitude];
}

// sends the GPS coordinate to your server
-(void)sendGPSToServerWithLatitude:(double)paramLatitude AndLongitude:(double)paramLongitude
{
    // ------------------------------------------------------
    // There are other libraries you can use like
    // AFNetworking, but when I last tested AFNetworking
    // a few weeks ago, I had issues with it sending
    // email addresses or multiple word POST values
    // ------------------------------------------------------

    // here I am using ASIHttpRequest library and it's ASIFormDataRequest.h class
    // to make a POST value to a server. You need to build the server web service
    // part to receive the latitude and longitude
    NSURL *url = [NSURL urlWithString:@"http://www.youserver.com/api"];

    __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:[NSNumber numberWithDouble:paramLatitude] forKey:@"latitude"];
    [request setPostValue:[NSNumber numberWithDouble:paramLongitude] forKey:@"longitude"];
    [request setPostValue:userNameString forKey:@"username"];

    [request setCompletionBlock:^{
        NSDictionary *data = [request responseString];

        NSLog(@"Server response = %@", data);
    }];

    [request setFailedBlock:^{
        NSLog(@"Server error: %@", [[request error] localizedDescription]);
    }];

    [request startAsynchronous];
} 
```

**PHP 服务器端代码**

```
// --------------------------------------------------------------
// This is an example server implementation using PHP and Symfony
// web framework.
//
// You don't have to use PHP and Symfony, you can use .NET C# too
// or any other server languages you like to build the web service
// --------------------------------------------------------------

class DefaultController
{
    ...

    // -------------------------------------
    // expects and latitude and longitude
    // coordinate pair from the client
    // either using POST or GET
    // -------------------------------------
    public function recordGPSLocationAction()
    {
        // checks to see if the user accessing the
        // web service is authorized to do so
        if($this->authorize())
        {
            return new Response('Not authorized');
        }
        else // assume user is authorized from this point on
        {
            // check to see if user has passed in latitude and longitude
            if(!isset($_REQUEST['latitude']) || !isset($_REQUEST['longitude']
            || !isset($_REQUEST['username'])
            {
                throw $this->createNotFoundException('Username, Latitude or Longitude was not received');
            }
            else
            {
                // write your latitude and longitude for the specified username to database here

                ....

                return new Response('User GPS location saved');
            }
        }
    }
} 
```

# c++ - 如何声明一个静态向量成员

> ID：13177471
> 
> 赞同：1
> 
> 时间：2012-11-01T12:51:03.423
> 
> 标签：c++, static, extern

我在声明类型的静态成员时遇到了一些问题`std::vector<std::string>`，原则上我可以用数组替换它`std::string[]`。

我有很多麻烦：如果我将它声明为`static`然后我在实现（cpp 文件）中初始化它可以工作，但是如果我想创建一个从第二个文件中的第一个继承的新类，它会抱怨

```
error: invalid application of ‘sizeof’ to incomplete type ‘std::string []’ 
```

如果我在标题中标明它，我会遇到双重声明的问题。

什么是正确的方法？我必须使用外部吗？如何？

我有：

文件_A.h：

```
class A { public: static string s[]; } 
```

文件_A.cpp：

```
string A::s[] = { ... }; 
```

文件_B.h

```
class B : public A 
```

文件_B.cpp

```
void B::function()
{
for (string* s = A::s; s != A::s + sizeof(A::s) / sizeof(string); ++s)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:40:20.350

您误解了`sizeof`操作员在做什么。它为您提供数据*类型*的大小，而不是实际数据的大小。有时，数据类型的大小恰好与实际数据的大小相同。仅当数据类型本身定义了可以容纳多少数据时才会出现这种情况：

```
int a[50]; // 50 ints: sizeof(a) == 50 * sizeof(int) 
```

此外，`sizeof`只能对完整类型进行操作。这不是一个完整的类型：

```
int a[]; 
```

不完整类型是缺少确定其大小所需信息的类型。你将永远无法使用`sizeof`来获得`a`这里的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:24:27.877

你的错误是你试图 sizeof of `string s[]`。编译器对字符串数组的大小一无所知。

例如：

```
void B::function()
{
for (string* s = A::s; s != A::s + sizeof(A::s) / sizeof(string); ++s)
} 
```

在您的函数中，而不是 sizeof()。您可以使用`for (int i = 0; !A::s[i].empty(); ++i)`来获取字符串数组的大小。

PS。如果你不使用 sizeof(string[]). 您的代码将正常工作。

# html - 使内部H3和DIV的DIV跨度高度？

> ID：13177473
> 
> 赞同：0
> 
> 时间：2012-11-01T12:51:19.133
> 
> 标签：html, css

我有这样的布局......

```
<div style="width: 99%; border: 1px dotted #0683DA; padding: 8px;">
    <h3>Some Header</h3>
    <div class="d-dataGridBodyRow" style="padding: 0px">
        <table style="vertical-align: top;">
            <tr>
                <td colspan="4" id="ErrMsg" runat="server">
                </td>
            </tr>
            <tr>
                <td style="vertical-align: top; width: 15%;">
                    <p class="FieldLabel">
                        Field 1:</p>
                </td>
                <td>
                    <asp:TextBox ID="Field1" runat="server"></asp:TextBox>
                </td>
                <td style="vertical-align: top; width: 15%;">
                    <p class="FieldLabel">
                        Field 2:</p>
                </td>
                <td valign="top">
                    <asp:TextBox ID="Field2" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td style="vertical-align: top; width: 15%;">
                    <p class="FieldLabel">
                        Field 3:</p>
                    <br />
                    <asp:RegularExpressionValidator ID="Field3Validator" runat="server" ControlToValidate="Field3"
                        ErrorMessage="Some message." ValidationExpression="^\d{16}"
                        EnableClientScript="true" CssClass="errortext" />
                </td>
                <td valign="top">
                    <asp:TextBox ID="Field3" runat="server" MaxLength="16"></asp:TextBox>
                </td>
                <td style="vertical-align: top; width: 15%;">
                    <p class="FieldLabel">
                        Field 4:</p>
                    <br />
                    <asp:RegularExpressionValidator ID="Field4Validator" runat="server" ControlToValidate="Field4"
                        ErrorMessage="Some message."
                        ValidationExpression="\A[A-HJ-NPR-Z\d]{11}\d{6}\z" EnableClientScript="true"
                        CssClass="errortext" />
                </td>
                <td valign="top">
                    <asp:TextBox ID="Field4" runat="server" MaxLength="17"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td style="vertical-align: top; width: 15%;">
                    <p class="FieldLabel">
                        Field 5:</p>
                    <br />
                    <asp:RegularExpressionValidator ID="Field5Validator" runat="server" ControlToValidate="Field5"
                        ErrorMessage="Some message."
                        ValidationExpression="\A[A-HJ-NPR-Z\d]{11}\d{6}\z" EnableClientScript="true"
                        CssClass="errortext" />
                </td>
                <td valign="top">
                    <asp:TextBox ID="Field5" runat="server"></asp:TextBox>
                </td>
                <td style="vertical-align: top; width: 15%;">
                </td>
                <td valign="top">
                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <div class="d-formSubmitCont" style="padding-right: 20px;">
                        <!-- <asp:LinkButton CssClass="b-primaryBtnArrow" ID="Cancel" runat="server"><span>Cancel</span></asp:LinkButton> -->
                        <asp:LinkButton CssClass="b-primaryBtnArrow" ID="Find" runat="server" OnClick="Find_Click"
                            CausesValidation="true"><span>Find</span></asp:LinkButton>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div> 
```

...但是外部`div`仅跨越 的高度，`h3`我如何让它也跨越内部的高度`div`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:53:33.307

内部`div`没有内容，这就是它不占用任何空间的原因。将其更改为：

```
<div style="width: 99%; border: 1px dotted #0683DA; padding: 8px;">
    <h3>Some Header</h3>
    <div class="d-dataGridBodyRow" style="padding: 0px">&nbsp;
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:53:49.483

给内部 div 100% 的高度

```
<div class="d-dataGridBodyRow" style="padding: 0px; height:100%">
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:54:06.923

如果你在你的 div 中放一些东西，高度就会拉伸。

```
<div style="width: 99%; border: 1px dotted #0683DA; padding: 8px;">
    <h3>Some Header</h3>
    <div class="d-dataGridBodyRow" style="padding: 0px">
        Hello World
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T12:54:11.527

给第二个 div 一个高度，或者在里面放一些内容。目前它不占用空间，因此为什么不显示空间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T12:56:35.207

很可能您有一个使`.d-dataGridBodyRow`浮动的 CSS 规则。如果是这种情况，并且您希望外部`<div>`完全包围它，一个简单的方法是给它 CSS `overflow: hidden`。如果那是不可能的（你明确地想要溢出内容）试试[标准的 clearfix](http://www.webtoolkit.info/css-clearfix.html)。

# mysql - MySQL查询提取联赛排名

> ID：13177475
> 
> 赞同：0
> 
> 时间：2012-11-01T12:51:29.353
> 
> 标签：mysql

我有两个看起来像这样的 MySQL 表

团队

```
id  name    abbr_name   badge   slogan  captain
1   TEAM1   TM1     NULL    NULL    NULL
2   TEAM2   TM2     NULL    NULL    NULL
3   TAEM3   TM3     NULL    NULL    NULL
4   TEAM4   TM4     NULL    NULL    NULL
5   TEAM5   TM5     NULL    NULL    NULL
.... 
```

匹配条目

```
id  season  match_day   host    guest   time    host_score  guest_score  forfait mvp
1   1   1   3   4   NULL    10  2   NULL    43
2   1   1   5   6   NULL    2   2   NULL    16
3   1   1   9   10  NULL    6   3   NULL    49
4   1   1   2   1   NULL    5   5   NULL    29
5   1   1   7   8   NULL    4   2   NULL    52
6   1   2   1   4   NULL    7   3   NULL    75
.... 
```

我想做的是做一个查询，它可以给我所有带值的行

```
Team_Id, Team_name, Team_N_Match_Played, Team_N_Match_Won, Team_N_Match_Lost 
```

如果不使用 PHP 处理所有数据并直接使用 MySQL 查询，这是否可能？我不知道如何在 MySQL 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:05:16.243

使用 MySQL[计数](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)。

```
SELECT 
  t.Team_Id, t.Team_name, 
  COUNT(meh.id) + COUNT(meg.id) AS Team_N_Match_Played, 
  COUNT(meh.host_scrore > meh.guest_score) + COUNT(meg.guest_score > meg.host_scrore ) AS Team_N_Match_Won, 
  Team_N_Match_Lost 
COUNT(meh.host_scrore < meh.guest_score) + COUNT(meg.guest_score < meg.host_scrore )
FROM Teams AS t
JOIN Match_Entries AS meh ON t.id = meh.host
JOIN Match_Entries AS meg ON t.id = meg.guest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:29:47.930

像这样的事情会做到这一点

```
SELECT Teams.id, Teams.name, COUNT(a.id) + COUNT(d.id) + COUNT(c.id) + COUNT(f.id) + COUNT(b.id) + COUNT(e.id) AS GamesCnt, COUNT(a.id) + COUNT(d.id) AS GamesWon, COUNT(c.id) + COUNT(f.id) AS GamesLost, COUNT(b.id) + COUNT(e.id) AS GamesDrawn
FROM Teams
LEFT OUTER JOIN MatchEntries a ON Teams.id = a.host AND a.host_score > a.guest_score
LEFT OUTER JOIN MatchEntries b ON Teams.id = b.host AND b.host_score = b.guest_score
LEFT OUTER JOIN MatchEntries c ON Teams.id = c.host AND c.host_score < c.guest_score
LEFT OUTER JOIN MatchEntries d ON Teams.id = d.guest AND d.guest_score > d.host_score
LEFT OUTER JOIN MatchEntries e ON Teams.id = e.guest AND e.guest_score = e.host_score
LEFT OUTER JOIN MatchEntries f ON Teams.id = f.guest AND f.guest_score < f.host_score
GROUP BY Teams.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:47:55.323

MatchEntries = dc_match 团队 = dc_teams

```
SELECT
    team_id,
    name,
    SUM(P) AS played,
    SUM(W) AS won,
    SUM(D) AS draw,
    SUM(L) AS lost,
    SUM(PTS) AS points
FROM(
    SELECT
        host team_id,
        CASE
            WHEN host_score IS NULL THEN 0
            ELSE 1
        END P,
        IF (host_score > guest_score,1,0) W,
        IF (host_score = guest_score,1,0) D,
        IF (host_score < guest_score,1,0) L,
        CASE 
            WHEN host_score > guest_score THEN 3
            WHEN host_score = guest_score THEN 1 
            ELSE 0
        END PTS
    FROM dc_match

    UNION ALL

    SELECT
        guest team_id,
        CASE
            WHEN guest_score IS NULL THEN 0
            ELSE 1
        END P,
        IF (guest_score > host_score,1,0) W,
        IF (guest_score = host_score,1,0) D,
        IF (guest_score < host_score,1,0) L,
        CASE 
            WHEN guest_score > host_score THEN 3
            WHEN guest_score = host_score THEN 1 
            ELSE 0
        END PTS
    FROM dc_match
    ) AS RNK
LEFT JOIN dc_team t
    ON RNK.team_id = t.id
GROUP by team_id
ORDER BY points DESC 
```

# c# - 在 .NET 中模拟 System.Threading.Thread

> ID：13177476
> 
> 赞同：1
> 
> 时间：2012-11-01T12:51:32.623
> 
> 标签：c#, unit-testing, mocking

我的问题是 - 我有一个有依赖关系的类，一旦满足某个条件`System.Threading.Thread`，它就会成为线程。`Start()`我在模拟`System.Threading.Thread`.

我通常将**Moq**用于模拟对象，但我不能模拟一个`Thread`（因为它是密封的）。

我确实意识到我可以编写一些包含线程的包装器，然后模拟该包装器 - 但如果可能的话，我想避免这种情况。

提前感谢您的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:56:15.053

已经发布了几个问题，试图用一个好的答案来覆盖这个问题，就像[这里](https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code)的这个。对于 TLDR；问题空间实际上是您采用异步代码并尝试使其适应模拟框架和单元测试，这是同步的。长话短说，没有一个好的解决方案，但如果你点击链接，我相信有一些阴暗的解决方法。祝你好运

# ios - 无法安装 iOS MDM 配置文件

> ID：13177478
> 
> 赞同：0
> 
> 时间：2012-11-01T12:51:37.213
> 
> 标签：ios, configuration, mdm

我正在尝试通过 IPCU 在设备上安装配置文件，但我不断收到以下错误，我通过 IPCU 控制台恢复了该错误。

```
Nov  1 17:55:04 iPad mc_mobile_tunnel[1156] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov  1 17:55:04 iPad profiled[1157] <Notice>: (Note ) profiled: Service starting...
Nov  1 17:55:04 iPad profiled[1157] <Notice>: (Note ) MC: Removing profile 2a18cf02251b4682bf56c502d35060441e5bb4dca...
Nov  1 17:55:05 iPad profiled[1157] <Notice>: (Note ) MC: Profile 2a18cf02251b4682bf56c502d35060441e5bb4dca removed.
Nov  1 17:55:05 iPad profiled[1157] <Notice>: (Note ) MC: Removing certificate with persistent ID 636572740000000000000012
Nov  1 17:55:05 iPad mc_mobile_tunnel[1156] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov  1 17:55:05 iPad mc_mobile_tunnel[1158] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov  1 17:55:05 iPad mc_mobile_tunnel[1158] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov  1 17:55:05 iPad mc_mobile_tunnel[1159] <Notice>: (Note) MC: mc_mobile_tunnel starting.
Nov  1 17:55:05 iPad mc_mobile_tunnel[1159] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov  1 17:55:09 iPad mc_mobile_tunnel[1160] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov  1 17:55:09 iPad profiled[1157] <Notice>: (Note ) MC: Profile com.abc.lk queued for installation.
Nov  1 17:55:09 iPad mc_mobile_tunnel[1160] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov  1 17:55:18 iPad mc_mobile_tunnel[1163] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov  1 17:55:18 iPad profiled[1157] <Notice>: (Note ) MC: Profile com.abc.lk queued for installation.
Nov  1 17:55:18 iPad mc_mobile_tunnel[1163] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov  1 17:55:20 iPad profiled[1157] <Notice>: (Note ) MC: Checking for MDM installation...
Nov  1 17:55:20 iPad profiled[1157] <Notice>: (Note ) MC: ...finished checking for MDM installation.
Nov  1 17:55:20 iPad profiled[1157] <Notice>: (Note ) MC: Beginning profile installation...
Nov  1 17:55:32 iPad profiled[1157] <Notice>: (Error) MC: Connection to https://hostaddress.abc.lk/MDMServer/checkin failed with error: NSError:
Desc   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCHTTPTransactionErrorDomain
Code   : 23002
Type   : MCFatalError
Params : (
    "https://hostaddress.abc.lk/MDMServer/checkin"
)
Nov  1 17:55:32 iPad profiled[1157] <Notice>: (Error) MDM: Cannot Authenticate. Error: NSError:
Desc   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCHTTPTransactionErrorDomain
Code   : 23002
Type   : MCFatalError
Params : (
    "https://hostaddress.abc.lk/MDMServer/checkin"
)
Nov  1 17:55:32 iPad profiled[1157] <Notice>: (Error) MC: Cannot install MDM com.abc.lk.mdm2\. Error: NSError:
Desc   : The payload com.abc.lk.mdm2 could not be installed.
Sugg   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The payload com.abc.lk.mdm2 could not be installed.
US Sugg: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCInstallationErrorDomain
Code   : 4001
Type   : MCFatalError
Params : (
    "com.abc.lk.mdm2"
)
...Underlying error:
NSError:
Desc   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCHTTPTransactionErrorDomain
Code   : 23002
Type   : MCFatalError
Params : (
    "https://hostaddress.abc.lk/MDMServer/checkin"
)
Nov  1 17:55:32 iPad profiled[1157] <Notice>: (Error) MC: Rolling back installation of profile com.abc.lk...
Nov  1 17:55:32 iPad profiled[1157] <Notice>: (Error) MC: Installation of profile com.abc.lk failed with error: NSError:
Desc   : The profile Profile Name 6 could not be installed.
Sugg   : The payload com.abc.lk.mdm2 could not be installed.
US Desc: The profile Profile Name 6 could not be installed.
US Sugg: The payload com.abc.lk.mdm2 could not be installed.
Domain : MCProfileErrorDomain
Code   : 1009
Type   : MCFatalError
Params : (
    "Profile Name 6"
)
...Underlying error:
NSError:
Desc   : The payload com.abc.lk.mdm2 could not be installed.
Sugg   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The payload com.abc.lk.mdm2 could not be installed.
US Sugg: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCInstallationErrorDomain
Code   : 4001
Type   : MCFatalError
Params : (
    "com.abc.lk.mdm2"
)
...Underlying error:
NSError:
Desc   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCHTTPTransactionErrorDomain
Code   : 23002
Type   : MCFatalError
Params : (
    "https://hostaddress.abc.lk/MDMServer/checkin"
)
Nov  1 17:55:32 iPad profiled[1157] <Notice>: (Error) MC: Profile com.abc.lk failed to install with error: NSError:
Desc   : Profile Failed to Install
Sugg   : The profile Profile Name 6 could not be installed.
US Desc: Profile Failed to Install
US Sugg: The profile Profile Name 6 could not be installed.
Domain : MCInstallationErrorDomain
Code   : 4001
Type   : MCFatalError
...Underlying error:
NSError:
Desc   : The profile Profile Name 6 could not be installed.
Sugg   : The payload com.abc.lk.mdm2 could not be installed.
US Desc: The profile Profile Name 6 could not be installed.
US Sugg: The payload com.abc.lk.mdm2 could not be installed.
Domain : MCProfileErrorDomain
Code   : 1009
Type   : MCFatalError
Params : (
    "Profile Name 6"
)
...Underlying error:
NSError:
Desc   : The payload com.abc.lk.mdm2 could not be installed.
Sugg   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The payload com.abc.lk.mdm2 could not be installed.
US Sugg: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCInstallationErrorDomain
Code   : 4001
Type   : MCFatalError
Params : (
    "com.abc.lk.mdm2"
)
...Underlying error:
NSError:
Desc   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
US Desc: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
Domain : MCHTTPTransactionErrorDomain
Code   : 23002
Type   : MCFatalError
Params : (
    "https://hostaddress.abc.lk/MDMServer/checkin"
) 
```

我在上述错误消息中认为重要的重要部分是......

```
Desc   : The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid.
    US Desc: The server certificate for https://hostaddress.abc.lk/MDMServer/checkin is invalid. 
```

这里的困惑是我知道我正在使用 CA 颁发的有效服务器证书，其根证书安装在设备上。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:44:08.583

通过看到您的错误，我猜您在有效负载中缺少某些字段。尝试在不使用证书的情况下安装配置文件。

还有一件事，您应该使用受信任的证书。您是否使用从任何受信任实体获得的服务器证书？

# ios - 如何为放置在 uitableviewcel 内的标签重复设置动画？l

> ID：13177483
> 
> 赞同：0
> 
> 时间：2012-11-01T12:51:53.130
> 
> 标签：ios, animation, uitableview, uilabel

嗨，我需要为放置在每个 tableviewcell 内的标签设置淡入淡出动画。此动画应每 5 秒调用一次。所以我在 cellForRowAtIndexPath 中给出了动画。但是这个动画应该连续发生。我试着把它放在 nstimer 中，但是这个动画只发生在最后一行的标签上。所以现在我给了 cellForRowAtIndexPath。到目前为止，所有标签都会出现动画，但它仅在调用 cellforrowatindexpath 时发生。请指导我。这是我在 cellforrowatindexpath 的单元格创建之外给出的代码

```
 UILabel *rewardPtLabel = (UILabel*)[cell.contentView viewWithTag:kRewardlabelTag];
    rewardPtLabel.text = [NSString stringWithFormat:@"%@ %@",[appRecord objectForKey:@"ProductReward"],@""];//rewardPoints

     rewardPtLabel.alpha = 0;
     rewardPtLabel.textColor=[UIColor redColor];
     [UIView beginAnimations:nil context:nil];
     [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
     [UIView setAnimationDuration:2];
     rewardPtLabel.alpha = 1;
     [UIView commitAnimations];

     rewardPtLabel.textColor=[UIColor greenColor];
     [UIView beginAnimations:nil context:nil];
     [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
     [UIView setAnimationDuration:2];
     rewardPtLabel.alpha = 0;
     [UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:01:00.420

每个标签只设置**一次**动画。这意味着不是在每个 cellForRow: 调用中，而是仅在单元格创建时。或者之前删除动画，但这有点难看。
`[view.layer removeAllAnimations]`

1) 如果您使用的是 iOS 4 或更高版本，您应该使用基于块的动画方法。（你希望是什么），看`animateWithDuration:delay:options:animations:completion:`

2）查看`UIViewAnimationOptionRepeat`重复动画的动画选项

3）另见`UIViewAnimationOptionAutoreverse`所以你只需要设置一个方向的淡入淡出..

这将导致更少的代码和更好的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:52:39.263

它在标签中重复动画

```
-(void)animate
{

[UIView animateWithDuration:1
                          delay:0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{
                        //set animations
                     } 
                     completion:^(BOOL finished){
[self performSelector:@selector(animate) withObject:frdctrl afterDelay:1];
                     }];

} 
```

# vim - vim 方法突出显示较长的行

> ID：13177484
> 
> 赞同：1
> 
> 时间：2012-11-01T12:51:55.650
> 
> 标签：vim, command

在[这个页面上](http://vim.wikia.com/wiki/Highlight_long_lines)，我找到了这个模式

```
/\%>80v.\+ 
```

通过突出显示第 80 列之后的字符，有助于识别超过 80 个字符的行。

我无法理解它的一点一点解释。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:13:06.573

这其实很简单。

*   `\%>80v`在虚拟列号 80*之后*开始匹配，请参阅`:help %>`。

*   `.\+`匹配 1 个或多个任意字符，请参阅`:help /.`和`:help \+`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:41:45.600

这是您提出的问题的替代方法，而不是答案。希望没关系。

你也可以调查一下`colorcolumn`。

```
set colorcolumn=81,82,83 
```

将突出显示第 80 列之后的三个字符。如果您使用`textwidth`，那么您也可以使用相对值（如果您的 textwidth 针对不同的文件发生变化，这很酷）：

```
set textwidth=80
set colorcolumn=+1,+2,+3 
```

当然，您可以有尽可能少或尽可能多的值，按列分隔。我不认为它需要范围或“开放集”来“从第 N 列突出显示到行尾”。

颜色本身是由`ColorColumn`组定义的，所以如果它太花哨，你可以很容易地改变它。

我建议这样做的原因是，即使您使用搜索来查找内容，它也会起作用。:)

# python - 解析 sfv 格式文件的正则表达式

> ID：13177492
> 
> 赞同：0
> 
> 时间：2012-11-01T12:52:19.587
> 
> 标签：python, regex, file, parsing, verification

我正在尝试编写一个正则表达式来解析 python 中的 sfv 文件。基本上，这些行的格式是

> 文件名 crc_bytes

但是可以在所有地方添加空格，包括文件名。所以真正的格式是

> （空格）文件名（空格）crc_bytes（空格）

当文件名可以包含空格时。

现在，我正在尝试提取文件名和 crc_bytes。所以我试过：

```
'\s*(.+)\s+([^\s]+)' 
```

但它解析了

```
'   filename with spaces    crc  ' 
```

作为

```
'filename with spaces   ', 'crc' 
```

//太多空格------------^

知道如何摆脱这些空间吗？可能，以某种方式向后看？

### 奖金问题：

sfv 文件中的注释是以“;”开头的行。如果有人能够处理正则表达式中的评论，我将永远欠他的债。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:00:50.250

## 处理带空格的文件名

使用`(.+\S)`强制文件名以非空白 ( `'\S`) 字符结尾。

```
>>> import re
>>> reg=re.compile('\s*(.+\S)\s+(\S+)')
>>> reg.findall(line)
[('filename with spaces', 'crc')] 
```

## 避免评论

您可以使用前瞻或向正则表达式添加否定检查。但是，我认为添加另一个正则表达式会更具可读性：

```
>>> comment_line_regex=re.compile('\s*;.*')
>>> line1='   filename with spaces    crc  '
>>> line2=';  filename with spaces    crc  '
>>> line3='  ;  filename with spaces    crc  '
>>> lines = [line1, line2, line3] 
```

现在我们有三行，其中两行是注释行。以下仅解析不是注释的行：

```
>>> [reg.findall(l) for l in lines if not comment_line_regex.match(l)]
[[('filename with spaces', 'crc')]] 
```

或者，以更详细的方式：

```
>>> for line in lines:
...     if not comment_line_regex.match(line):
...             print reg.findall(line)
... 
[('filename with spaces', 'crc')] 
```

# git - 无法删除敏感数据

> ID：13177493
> 
> 赞同：4
> 
> 时间：2012-11-01T12:52:22.240
> 
> 标签：git

我从我的一位 git 代表中删除敏感数据时遇到问题。我阅读了[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)的手册页，并一一按照说明进行操作。

起初我成功地做到了：

```
$ git clone https://github.com/defunkt/github-gem.git 
```

接下来我成功地做到了

```
$ cd github-gem 
```

然后我尝试了以下但没有成功并收到以下消息

```
$ git filter-branch --index-filter 'git rm --cached --ignore-unmatch Rakefile' --prune-empty --tag-name-filter cat -- --all

fatal: ambigous argument 'rm': unknown revision or path not in the working tree. Use '--' to seperate paths from revisions 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T22:28:36.520

我知道这已经有一段时间了，但为了后人的缘故：我与这个问题斗争了一段时间 - Windows 上的解决方案是使用 " （双引号）而不是 ' （单引号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:07:24.587

我认为即使有`--ignore-unmatch`你仍然需要`--`消除歧义。喜欢：

```
git rm --cached --ignore-unmatch -- Rakefile
                                 ^^-this two dashes here 
```

# c# - Linq 中最好的异常处理方法：

> ID：13177499
> 
> 赞同：3
> 
> 时间：2012-11-01T12:52:48.197
> 
> 标签：c#, linq, exception-handling

有人可以建议 LINQ 中最好的异常处理机制吗？假设我有以下功能：

```
public List<test_dataRange> GetDataRange()
{
    testDataContext = new ParentDataContext(conn);
    List< test_dataRange > dataRange = (from pp in testDataContext. test_dataRanges
                                                    select pp).ToList();

    return dataRange;
} 
```

可以在这里应用的 LINQ 中最好的异常处理机制是什么？还有哪些具有事务的功能的最佳异常处理机制是什么，例如：

```
 public void UpdateQAProperty(Data_QAProperty qaProperty)
        {
            parentDataContext = new ParentDataContext(conn);
            DbTransaction dbTransaction = null;
            parentDataContext.Connection.Open();
            dbTransaction = masterDataContext.Connection.BeginTransaction();
            parentDataContext.Transaction = dbTransaction;
            var property = (from y in parentDataContext. QAProperties
                            where y.Id == qaProperty.Id
                            select y).FirstOrDefault();
            property.Height = qaProperty.Height;
            property.Caption = qaProperty.Caption;
            property.Width = qaProperty.Width;
            property.Length= qaProperty.Length;

            parentDataContext.SubmitChanges();
            dbTransaction.Commit();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:05:43.470

我认为您的 linq 查询运行良好。

```
var property = (from y in parentDataContext. QAProperties
                            where y.Id == qaProperty.Id
                            select y).FirstOrDefault(); 
```

但是，`FirstOrDefault`将返回第一个满足条件的对象，如果不存在，则返回 null。

尽管有财产存在的可能性`null`，你还是继续你的二传手。

```
 property.Height = qaProperty.Height;
 property.Caption = qaProperty.Caption;
 property.Width = qaProperty.Width;
 property.Length= qaProperty.Length; 
```

这将引发异常，因为属性是`null`.

我无法从您的帖子中判断这是否可以接受。（qaProperty.Id 是否为空？是否为零？为什么没有找到预期的属性？）

你有几个选择：

1.  当属性为空时，创建一个新的并将其添加到您的事务中
2.  当属性为空时优雅地转义并通知用户该属性未找到

回滚是不必要的。实体框架以前失败`parentDataContext.SubmitChanges();`过。如果`SubmitChanges`成功调用，则该工作单元中的所有记录都将被更新。

至于`using`方块，你可以把a`try-catch`插进去。

# windows - Windows 命令提示符从某个目录启动

> ID：13177505
> 
> 赞同：3
> 
> 时间：2012-11-01T12:53:06.960
> 
> 标签：windows, command-line, console, command-prompt

我有一个 .bat 文件

在文件中是这样的

```
d:
cd Doc
cd bestFolder 
```

问题是，当我双击启动 bat 文件时，会提示控制台，但几分钟后它就消失了:(

如何制作一个 bat 文件以在某个特定目录启动命令提示符？

注意：我希望能够在控制台显示后输入命令我不希望控制台在短时间内隐藏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:59:02.930

将此行`cmd`放在批处理文件的末尾。

```
@echo off    
d:
cd Doc
cd bestFolder
REM <any other commands you want to run>
cmd 
```

这将执行命令并**防止您的命令窗口关闭**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:56:43.337

为此，您可以创建 cmd.exe 的快捷方式并编辑快捷方式的属性。其中一个属性处理初始当前目录。

# php - 一个结果中的 3 个表的内部连接

> ID：13177509
> 
> 赞同：0
> 
> 时间：2012-11-01T12:53:21.613
> 
> 标签：php, mysql

我有 3 张桌子：

```
tb_document
============================
|document_id|document_title|
============================
|     1     |        A     |
|     2     |        B     |
|     3     |        C     |
============================

tb_wrapper_scho                  tb_wrapper_li
=============================    =============================
|id_scho|data_title|doc_name|    |id_sli |data_title|doc_name|
=============================    =============================
|   1   |  TitleA  |   A    |    |   1   |  TitleB  |   B    |
|   2   |  TitleC  |   C    |    =============================
============================= 
```

我想`data_title`从一个`tb_wrapper_scho`结果中`tb_wrapper_li`得到相同`doc_name`的结果`document_title``tb_document``$title`

这是查询：

```
SELECT
      tb_document.document_title,
      tb_wrapper_scho.data_title,
      tb_wrapper_scho.doc_name,
      tb_wrapper_li.data_title,
      tb_wrapper_li.doc_name
FROM
      INNER JOIN tb_wrapper_scho ON tb_document.document_title = tb_wrapper_scho.doc_name
      INNER JOIN tb_wrapper_li ON tb_document.document_title = tb_wrapper_li.doc_name
WHERE 
      document_id = '$doc_id' 
```

```
while ($row = mysql_fetch_array($sql)) {
     $title = $row['data_title'];
     print_r($title);
} 
```

它给了我空白的结果。请帮帮我..谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:40:24.640

由于您的表包含具有相同名称的列，因此在使用别名检索数据时，您必须将列名称更改为不同的名称。因此结果数组必须包含每个值的唯一索引。所以你的查询必须是

```
SELECT 
      d.document_title as document_title,
      s.data_title as scho_data_title,
      s.doc_name as scho_doc_name,
      li.data_title as li_data_title,
      li.doc_name as li_data_name
FROM
      tb_document d
      LEFT JOIN tb_wrapper_scho s ON d.document_title = s.doc_name
      LEFT JOIN tb_wrapper_li li ON li.doc_name = d.document_title 
WHERE 
      d.document_id = '$doc_id' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:42:49.003

```
SELECT
      tb_document.document_title,
      tb_wrapper_scho.data_title,
      tb_wrapper_scho.doc_name,
      tb_wrapper_li.data_title,
      tb_wrapper_li.doc_name

FROM tb_document AS tb_document

    LEFT JOIN tb_wrapper_scho AS tb_wrapper_scho ON (tb_wrapper_scho.doc_name=tb_document.document_title)
    LEFT JOIN tb_wrapper_li AS tb_wrapper_li ON (tb_wrapper_li.doc_name=tb_document.document_title)

WHERE tb_document.document_id = intval($doc_id); 
```

有什么好处吗？

您还可以检查 mysql_query 的结果，并且 mysql_fetch_array() 应该返回 TRUE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:54:35.760

您缺少该子句`tb_document`中的表格。`FROM`试试这个：

```
SELECT
      d.document_title,
      s.data_title,
      s.doc_name,
      i.data_title,
      i.doc_name
FROM  tb_document d
      INNER JOIN tb_wrapper_scho s ON d.document_title = s.doc_name
      INNER JOIN tb_wrapper_li i ON d.document_title =i.doc_name
WHERE 
      document_id = '$doc_id' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:30:10.453

我有想法，你喜欢吗：

```
SELECT * FROM
  (SELECT * FROM tb_document as tbDoc INNER JOIN tb_wrapper_scho as tbScho
  ON tbDoc.document_title = tbScho.doc_name
UNION
  SELECT * FROM tb_document as tbDoc INNER JOIN tb_wrapper_li as tblI
  ON tbDoc.document_title = tblI.doc_name)threeTableJoin ORDER BY `document_id` ASC 
```

仅此而已，祝朋友好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T12:57:28.577

```
SELECT
      tb_document.document_title,
      tb_wrapper_scho.data_title,
      tb_wrapper_scho.doc_name,
      tb_wrapper_li.data_title,
      tb_wrapper_li.doc_name
FROM tb_document
      left outer JOIN tb_wrapper_scho ON tb_document.document_title = tb_wrapper_scho.doc_name
      left outer JOIN tb_wrapper_li ON tb_document.document_title = tb_wrapper_li.doc_name
WHERE 
      document_id = '$doc_id' 
```

# css - 超大背景按钮滚动区域

> ID：13177514
> 
> 赞同：0
> 
> 时间：2012-11-01T12:53:35.977
> 
> 标签：css, button, background

我没有问题

*   导航栏上的翻转...但是，如果翻转背景不同且大小不同怎么办？我似乎无法设置 li 块的大小。我在按钮中看到了图像，但它只是其中的一小部分。我想我可以转而做直接的图像翻转，但我更愿意正确地做。

    谢谢

# android - Android 检查网络连接选项卡加载程序

> ID：13177518
> 
> 赞同：1
> 
> 时间：2012-11-01T12:53:58.050
> 
> 标签：android

我想在加载选项卡之前实施检查网络连接。谁能告诉我它是如何完成的？以下是我的主要活动代码。我仍然无法弄清楚它是如何完成的。请帮我。

谢谢

```
public class MainActivity extends SherlockFragmentActivity {
        Tab tab;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            if (!isNetworkAvailable()) {
        Toast.makeText(getApplicationContext(),
                "Internet Connection is Not Available", 10).show();
        finish();
    } else { 

    ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        tab = actionBar.newTab().setText("New Games")
                .setTabListener(new NewFragment())
                .setIcon(R.drawable.android);
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("TOP Games")
                .setTabListener(new TopFragment())
                .setIcon(R.drawable.apple);
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("BEST Games")
                .setTabListener(new BestFragment())
                .setIcon(R.drawable.reader);
        actionBar.addTab(tab);

}

private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager
            .getActiveNetworkInfo();
    return activeNetworkInfo != null;
}

    } 
```

日志猫：

```
11-01 21:55:35.023: E/AndroidRuntime(24710): FATAL EXCEPTION: main
11-01 21:55:35.023: E/AndroidRuntime(24710): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: java.lang.ClassNotFoundException: in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity in loader dalvik.system.PathClassLoader[/data/app/in.wptrafficanalyzer.actionbarsherlocknavtab-1.apk]
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.os.Looper.loop(Looper.java:130)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at java.lang.reflect.Method.invokeNative(Native Method)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at java.lang.reflect.Method.invoke(Method.java:507)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at dalvik.system.NativeStart.main(Native Method)
11-01 21:55:35.023: E/AndroidRuntime(24710): Caused by: java.lang.ClassNotFoundException: in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity in loader dalvik.system.PathClassLoader[/data/app/in.wptrafficanalyzer.actionbarsherlocknavtab-1.apk]
11-01 21:55:35.023: E/AndroidRuntime(24710):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-01 21:55:35.023: E/AndroidRuntime(24710):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
11-01 21:55:35.023: E/AndroidRuntime(24710):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:58:31.483

在你的 mainActivity Oncreate 方法中写下这段代码。

```
if (!isNetworkAvailable()) {
            Toast.makeText(getApplicationContext(),
                    "Internet Connection is Not Available", 10).show();
            finish();
        } else { 

        ActionBar actionBar = getSupportActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            tab = actionBar.newTab().setText("New Games")
                    .setTabListener(new NewFragment())
                    .setIcon(R.drawable.android);
            actionBar.addTab(tab);

            tab = actionBar.newTab().setText("TOP Games")
                    .setTabListener(new TopFragment())
                    .setIcon(R.drawable.apple);
            actionBar.addTab(tab);

            tab = actionBar.newTab().setText("BEST Games")
                    .setTabListener(new BestFragment())
                    .setIcon(R.drawable.reader);
            actionBar.addTab(tab);

    }

    private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager
                .getActiveNetworkInfo();
        return activeNetworkInfo != null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:00:20.303

```
public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         //Toast.makeText(context, "No Internet Connection", 1000);
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
 }

   if(CheckNetwork.isInternetAvailable(YourActivity.this))
    {
        //Load Tabs
     } 
```

我不确定这是否是您要找的。

# mysql - MySQL - 从多个表中选择第一个 3rd、第二个 3rd 和第三个 3rd

> ID：13177520
> 
> 赞同：0
> 
> 时间：2012-11-01T12:54:03.563
> 
> 标签：mysql, sql

给定 table1、table2 和 table3（假设它们的结构相同），是否可以选择 table1、table2 和 table3 的前 1/3 记录？那么第二个1/3呢？那么最后的1/3呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:01:26.697

**第一个 1/3 记录**：

```
SELECT *
FROM
(
    SELECT *
    FROM
    (
       SELECT * FROM Table1 
       UNION ALL 
       SELECT * FROM Table2
       UNION ALL
       SELECT * FROM Table3 
       UNION ALL
    ) sub
    ORDER BY ID DESC
    LIMIT 3
) t 
ORDER BY Id ASC
LIMIT 1 
```

**第二个2/3::**

```
SELECT *
FROM
(
    SELECT *
    FROM
    (
       SELECT * FROM Table1 
       UNION ALL 
       SELECT * FROM Table2
       UNION ALL
       SELECT * FROM Table3 
       UNION ALL
    ) sub
    ORDER BY ID DESC
    LIMIT 3
) t 
ORDER BY Id ASC
LIMIT 2, 1 
```

**最后 1/3 记录：**

```
SELECT *
FROM
(
    SELECT *
    FROM
    (
       SELECT * FROM Table1 
       UNION ALL 
       SELECT * FROM Table2
       UNION ALL
       SELECT * FROM Table3 
       UNION ALL
    ) sub
    ORDER BY ID DESC
    LIMIT 3
) t 
ORDER BY Id DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:01:35.803

尝试使用 LIMIT 和 OFFSET 子句，例如：

```
SELECT column FROM table1 LIMIT X OFFSET Y
union
SELECT column FROM table2 LIMIT X OFFSET Y+10
union
SELECT column FROM table3 LIMIT X OFFSET Y+20 
```

但你必须参数化 LIMIT 和 OFFSET .. 这是一种方式

# android - Android：使用 VPNService API 在 Android 4.0 中连接到 VPN 的示例代码

> ID：13177522
> 
> 赞同：24
> 
> 时间：2012-11-01T12:54:06.627
> 
> 标签：android, android-vpn-service

我是 android 新手，我正在尝试以编程方式建立并连接到我们自己的（不是Android 中存在`vpn`的默认`vpn`提供程序，即`PPTP`，等）。`L2TP``Setting -> Wireless and Networks`

我的情况是，我有按钮，当我单击按钮时，我需要配置自己的按钮，`vpn`并且链接（比如 www.google.com）应该通过`VPN`我配置的链接。

有没有示例代码？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-04-09T15:26:19.170

我不知道为什么我google了上千次，但没有*github的搜索*。找了好久，终于找到一篇写*得很漂亮*的。该代码实际上很漂亮，这是很少见的：

[https://github.com/hexene/LocalVPN](https://github.com/hexene/LocalVPN)

该项目不**使用**NDK 或任何本机代码，纯 java，这使其成为一个简单项目的完美开始（并不是说它不适合复杂项目）。工作流程非常简单：

*   当应用程序发出出站请求（从 android 操作系统到 Internet 上的某个服务器的请求）时，请求到达`LocalVPNService.class`
*   在`LocalVPNService`TCP/UDP 数据包中进行调查并提取源 IP 和目标 IP（`Packet.class`用于此目的）。
*   `LocalVPNService`代表启动请求的应用程序建立连接，并调用新`VpnService.protect()`创建的连接以避免循环。
*   然后将连接传递给处理程序，处理程序只需将字节从 / 传递到循环中的两个连接。UDP/TCP In/Out 的线程在不同的工作类和线程中进行管理。

如您所见，己烯已经完成了所有艰苦的工作和繁重的工作。

上面引用的所有类都可以在项目目录中找到。我从 github 快速查看了源代码，这里讨论的工作流程可能不准确。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T13:15:22.733

您可以参考与您的 android SDK 捆绑在一起的示例应用程序 ToyVpn。因此，只需查看示例并参考该应用程序。另请参阅[此](https://stackoverflow.com/questions/11471465/method-to-pass-username-and-password-in-vpnservice-builder)

除此之外，您还可以下载 Openvpn 的源代码。这是该链接的链接

[https://github.com/kghost/ics-openvpn](https://github.com/kghost/ics-openvpn)

谢谢

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-28T19:24:40.627

OpenSwan 解决方案： [https ://wiki.strongswan.org/projects/strongswan/wiki/AndroidVPNClient](https://wiki.strongswan.org/projects/strongswan/wiki/AndroidVPNClient)

OpenVPN 解决方案： [https ://code.google.com/p/ics-openvpn/](https://code.google.com/p/ics-openvpn/)

这两个都需要 Android [SDK](https://developer.android.com/sdk/index.html?hl=i)和[NDK](https://developer.android.com/tools/sdk/ndk/index.html)。

# c# - 带有背景颜色和图像的 WPF 椭圆

> ID：13177529
> 
> 赞同：6
> 
> 时间：2012-11-01T12:54:20.737
> 
> 标签：c#, wpf, windows-phone, fill, ellipse

我正在开发一个 Windows Phone 应用程序，我有一些省略号。是否可以在它们上有背景图像和背景颜色？

当我寻找它时，VS 只允许我用图像更改填充属性，但不允许我在填充 + 图像上保留颜色。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T13:14:10.260

只需使用两个椭圆，彼此重叠：

```
<Grid>
    <Ellipse Width="100" Height="60" Fill="Navy" />
    <Ellipse Width="100" Height="60">
        <Ellipse.Fill>
            <RadialGradientBrush>
                <GradientStop Color="#00FF0000" Offset="0" />
                <GradientStop Color="#FFFF0000" Offset="1" />
            </RadialGradientBrush>
        </Ellipse.Fill>
    </Ellipse>
</Grid> 
```

更改第二个的填充属性以使用您的图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-01T14:18:57.073

试试这个：

```
<Ellipse>
  <Ellipse.Fill>
    <ImageBrush ImageSource="/myimage.png" Stretch="Fill"></ImageBrush>
  </Ellipse.Fill>
</Ellipse> 
```

# windows - Windows 任务计划程序不工作

> ID：13177531
> 
> 赞同：0
> 
> 时间：2012-11-01T12:54:22.513
> 
> 标签：windows, login, scheduled-tasks, autohotkey, winlogon

我有一个在 SAP 上登录的脚本提取一些报告。该脚本必须在每个工作日凌晨 3 点运行，因此我将其设置为使用 Windows 任务计划程序定期运行。

当我测试它时，我已经在预定时间之前登录了 Windows，并且 AHK 脚本正在“运行”，但什么也没发生！

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:18:25.030

澄清一下：您的脚本必须 1）登录到**另一个**系统，2）做一些工作，3）返回一些结果并退出，对吗？

如果这**是**正确的：
1）将您的脚本分解为上述 3 个部分
2）使用尽可能多的日志记录分别运行每个部分，以检查每个阶段是否正常完成，并通过阅读日志。
3）只有在前一部分工作时才继续执行脚本的下一部分。

# f# - C# 是否处理不允许来自 F# 的 null 的类型仍然可以为空？

> ID：13177532
> 
> 赞同：7
> 
> 时间：2012-11-01T12:54:26.647
> 
> 标签：f#

它是 C# 和 F# 之间的互操作

在 F# 中，

```
type test =
{
    value: int
}

type Wrapper (value: test) =
    member val Value = value with get, set

let trythis = new Wrapper(null)  // error as expected 
```

然而，在 C#

```
 var trythis = new Wrapper(null);  //this runs fine 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T13:17:16.127

类型的不可为空约束是 F# 特有的功能，因此它在 .NET 中没有任何表示（因此 C# 不尊重它）。

事实上，即使在 F# 中使用不安全的`Unchecked.defaultof<_>`值，您也可以解决此问题：

```
let trythis = new Wrapper(Unchecked.defaultof<_>) 
```

如果要检查`null`暴露给 C# 的对象，这非常有用：

```
type Wrapper (value: test) =
    if value = Unchecked.defaultof<_> then
      invalidArg "value" "Value should not be null."
    member val Value = value with get, set 
```

# java - Nimbus 外观和感觉不可用

> ID：13177534
> 
> 赞同：4
> 
> 时间：2012-11-01T12:54:34.087
> 
> 标签：java, swing, look-and-feel, nimbus

我在 java 的 netbeans 7.2 中创建了一个 gui 应用程序。我在`JFrame`那里创建了一个。它在自动生成的代码中设置为 nimbus 外观。但我的框架看起来不像灵气。

所以我调试了代码，发现 nimbus 在返回的数组中不可用`getInstalledLookAndFeels()`。

那么我应该怎么做才能安装 nimbus 的外观和感觉呢？JDK 1.6 用于编译代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T13:35:07.600

确保您的 java 版本大于：JDK 6 Update 10。

[见这里](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)：

> Nimbus 是在 Java SE 6 Update 10 (6u10) 版本中引入的一种经过优化的跨平台外观。

您可以在此处下载最新的 Java (7u9) 和 Netbeans (7.2.1) 版本（捆绑）：

*   [Java SE 下载](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

之后你应该很高兴，不要忘记从内部设置 L&F `Event Disptach Thread`：

```
 //Create UI and set L&F on EDT
    SwingUtilities.invokeLater(new Runnable( ) {
        public void run( ) {
                //set L&F
                try {
                       for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                           if ("Nimbus".equals(info.getName())) {
                                   UIManager.setLookAndFeel(info.getClassName());
                                   break;
                           }
                       }
                    } catch (Exception e) {
                    // If Nimbus is not available, you can set the GUI to another look and feel.
                     e.printStackTrace();
                    }
            //create UI and components here
        }

    }); 
```

# php - 清单 jquery 移动发送

> ID：13177535
> 
> 赞同：0
> 
> 时间：2012-11-01T12:54:34.073
> 
> 标签：php, jquery, forms

我正在开发一个 jquery 移动应用程序。现在我希望用户能够发送清单。所以我做了一个清单，现在我必须把它发送到一个电子邮件地址。有人可以告诉我该怎么做吗？我知道应该用 PHP 来完成，但我的 PHP 技能不是那么好。我知道如何制作和发送联系表格，但在联系表格中没有需要填写和发送的复选框。

这是我的 HTML 页面中的代码：

```
<form id="form1" method="post" action="checklist.php">
<fieldset class="ui-corner-all" >

<div class="ui-checkbox">
<input id="checkbox-t0" class="custom" type="checkbox" name="checkbox-t0">

<label for="checkbox-t0">
<span class="ui-btn-inner ui-corner-top">
<span class="ui-btn-text">Vehicle checked for damage</span>
</span>
</label>
</div>

<div class="ui-checkbox">
<input id="checkbox-t1b" class="custom" type="checkbox" name="checkbox-t1b">
<label for="checkbox-t1b">
<span class="ui-btn-inner">
<span class="ui-btn-text">Oil checked</span>
</span>
</label>
</div>

<div class="ui-input-text">
<label for="achternaam" data-theme="a">
<span class="ui-btn-inner">
<span class="textbox"> Last name: </span></span>
</label>
<input type="text" name="achternaam">
</div>
</fieldset>

<fieldset>
<div class="ui-block-a"><button type="submit" name="submit"  data-theme="a" >Send</button></div>
</fieldset></form> 
```

还有更多的复选框，但这里没有必要显示一百个复选框。

那么如何让表单提交到某个电子邮件地址呢？任何帮助都会很棒，谢谢！

我是荷兰人，所以有些词是用荷兰语写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:50:09.127

就像您通常对联系表格所做的那样，复选框只是另一种输入类型，唯一的区别是，如果未选中，则不会在 POST 中发送任何值，如果没有为复选框设置值属性，则它将默认为打开。

检查 POST 中是否不存在该值（例如未检查）的最简单方法是构建一个包含所有输入的数组，然后循环遍历该数组，检查每个输入是否存在于 POST 数组中，如果没有相应处理，这也将消除不想处理的不需要的 POST 值。

```
<?php 
//Check for POST
if($_SERVER['REQUEST_METHOD']=='POST'){
    //All your inputs
    $expecting = array('achternaam','checkbox-t0','checkbox-t1b');
    //Start building your email
    $email_content = '';
    foreach($expecting as $input){
        //Is checkbox?
        if(substr($input,0,8)=='checkbox'){
            $email_content .= ucfirst($input).':'.(isset($_POST[$input]) && $_POST[$input] == 'on' ? 'True' : 'False'.'<br />');

        //achternaam and other non  checkbox-* keys
        }else{
            $email_content .= ucfirst($input).':'.(!empty($_POST[$input]) ? $_POST[$input] : 'Unknown').'<br />';
        }
    }

    /* Achternaam:Lawrence<br />Checkbox-t0:False<br />Checkbox-t1b:False<br /> */
    print_r($email_content);

    /* Mail it
    if(mail('the_email_to_send_too@example.com', 'My Subject', wordwrap($email_content))){
       //mail sent
    }else{
       //mail failed 2 send
    }
    */
}
?> 
```

# javascript - Javascript 日期解析

> ID：13177538
> 
> 赞同：0
> 
> 时间：2012-11-01T12:54:39.550
> 
> 标签：javascript, jquery, datetime

我有一个 JSON 服务为我提供分钟。然后我希望将这些分钟转换为 DD:HH:MM 格式。[天，小时，分钟]

谁能指出我正确的方向或告诉我如何做到这一点？

谢谢德文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:06:39.080

您可以创建一个通用函数来删除尽可能高的数字，然后再继续处理剩余的数字：http: [//jsfiddle.net/sL43t/1/](http://jsfiddle.net/sL43t/1/)。

```
var arr = [];
var value = 5467;

var gain = function(minutes) {
    var amount = Math.floor(value / minutes);
    arr.push(amount < 10 ? "0" + amount : amount);  // add zero padding if needed
    value %= minutes;
};

gain(24 * 60);  // minutes per day
gain(60);       // minutes per hour
gain(1);        // minutes per minute

var str = arr.join(":"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:11:10.610

您可以使用以下方法将分钟转换为天、小时和分钟：

```
// Helper
function z(n) {
  return (n<10? '0' : '') + n;
}

var n = 5467;
var days = n / 1440 | 0;
var hours = n % 1440 / 60 | 0;
var mins = n % 60;

alert( z(days) + ':' + z(hours) + ':' + z(mins) ); // 03:19:07 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:06:01.457

```
var t = 123456; // the given minutes

var days = Math.floor(t / (60 * 24));
var hours = Math.floor((t - days * 60 * 24) / 60);
var mintues = t - days * 60 * 24 - hours * 60; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:06:17.353

```
// assuming obj.totalMin to be total minutes
var obj = {
    totalMin : 4859
}

var days = Math.floor( obj.totalMin / (60 * 24));          
var hours = Math.floor( obj.totalMin / 60) - (days * 24);          
var minutes = obj.totalMin % 60;

document.write (days + ":" + hours + ":" + minutes);

​ 
```

[http://jsfiddle.net/vt6hZ/](http://jsfiddle.net/vt6hZ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:09:03.640

如果您不想为此编写自己的函数，您可以将数字转换为毫秒并使用它来创建日期对象。然后使用您选择的任何格式输出该日期对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T13:13:03.677

试试这个

```
 var totalMinutes = ;
        var days = totalMinutes/1440;
        var totalHours = totalMinutes%1440;
        var hours = totalHours/60;
        var minutes = totalHours%60;
        alert("DD:"+days+" HH:"+hours+" MM:"+minutes); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T13:40:32.487

我知道你找到了答案，但只是把它扔在那里，因为这对我来说似乎更容易，也许可以帮助别人：

```
function makeTime(v, lead) {
    v = parseInt(v); // ensures variable is an integer to do math too
    var days = Math.floor(v/1440),
        hrs = Math.floor(v/60 - (days*24)),
        mins = xmins % 60;
    var ret = {
        days: lead ? "" + (days < 10 ? "0" + days : days) : days,
        hrs: lead ? "" + (hrs < 10 ? "0" + hrs : hrs) : hrs,
        mins: lead ? "" + (mins < 10 ? "0" + mins : mins) : mins
    };
    ret.combo = ret.days + ":" + ret.hrs + ":" + ret.mins;
    return ret;
}

var xmins = 11404; // ou can se your data or whatever, this is just an example of minutes
var breakDown = makeTime(xmins); // this will return pure integers on each value
    //  OR!!
var breakDown = makeTime(xmins, true); // the true parameter just simply decides if you want leading variable, and string on each

// use

$("#eleID").text(breakDown.combo); 
```

# image - 重复（垂直）在 div 中不起作用

> ID：13177542
> 
> 赞同：1
> 
> 时间：2012-11-01T12:54:52.360
> 
> 标签：image, html, background, vertical-alignment

我目前正在使用 DIV 测试一些东西，而不是总是使用表格。

所以我创建了一个小设计，例如：

```
<div id="container">
    <div id="header"><h1>Header of the page</h1></div>
    <div style="width: 27px; float: left;"><img src="style/images/top_left_corner.jpg" alt="" /></div>
    <div style="width: 859px; float: left;"><img src="style/images/top_bar.jpg" alt="" /></div>
    <div style="width: 28px; float: left;"><img src="style/images/top_right_corner.jpg" alt="" /></div>
    <div style="width: 27px; float: left;"><img src="style/images/left_vert_bar1.jpg" alt="" /></div>
    <div style="width: 859px; float: left;">
        <div id="top_content">
            <div id="explanation">
                <span>Some text comes here</span>
            </div>

            <div id="form">
                <form method="post" action="index.php" enctype="multipart/form-data">
                    <label for="file">File:</label>
                    <input type="file" name="datei" size="40" maxlength="100000" />&nbsp;<input type="submit" name="sub" value="Submit" />
                </form>
            </div>
        </div>
    </div>
    <div style="width: 28px; float: left;"><img src="style/images/right_vert_bar1.jpg" alt="" /></div>
    <div class="left_dyn">&nbsp;</div>
        <div id="middle_content">
            <div id="form_output">Here is the outcome of the Form</div>
        </div>
    <div class="right_dyn">&nbsp;</div>
    <div style="width: 27px; float: left; clear: left;"><img src="style/images/left_vert_bar2.jpg" alt="" /></div>
    <div id="placeholder">&nbsp;</div>
    <div style="width: 28px; float: left;"><img src="style/images/right_vert_bar2.jpg" alt="" /></div>
    <div style="width: 27px; float: left;"><img src="style/images/bottom_left_corner.jpg" alt="" /></div>
    <div style="width: 859px; float: left;"><img src="style/images/bottom_bar.jpg" alt="" /></div>
    <div style="width: 28px; float: left;"><img src="style/images/bottom_right_corner.jpg" alt="" /></div>
    <div id="footer"><span>Some Footer Text</span></div>
</div> 
```

现在，带有`class="left_dyn"`并`class="right_dyn"`显示背景图像的 DIV 已在我的 CSS 文件中设置，并且当 DIV 中有一些内容时应该垂直重复`id="form_output"`

这是 CSS 文件中的方式`class="left_dyn"`和`class="right_dyn"`外观：

```
/* Dyn Design */
.left_dyn {
         background: url('../images/left_dyn_bar.jpg') repeat-y scroll;
         width: 27px;
         float: left;
}

.right_dyn {
         background: url('../images/right_dyn_bar.jpg') repeat-y scroll; 
         width: 28px;
         float: left;
} 
```

但是，当我在 DIV 中输入一些内容时，`id="form_output"`DIV`class="left_dyn"`会`class="right_dyn"`增加高度，但 bakcground 图像不会垂直重复:(

我的印象是我没有看到所有这些树木的树林。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:34:15.170

好的，我找到了解决方案：

就像我上面提到的那样，问题是您的 left_dyn 和 right_dyn 列不会随着 form_output div 扩展。该问题的一种解决方案是在这两个 div 上设置以下 css 规则：

```
padding-bottom: 32000px; /* Arbitrary number big enough to cover expanding content */
margin-bottom: -32000px; 
```

这将基本上扩展 left_dyn/right_dyn div 以匹配您的 form_output div 的高度。

然后，您必须在父容器上进行设置，因为这将隐藏任何溢出：

```
overflow: hidden; 
```

我尝试在您的页面上编辑此内联内容，并注意到它可以正常工作，但您的页脚有问题。这可以通过将页脚**放在**父包装之外轻松解决。

我在这里敲了一个快速演示来解释效果：http: [//jsfiddle.net/mWLL9/](http://jsfiddle.net/mWLL9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:45:38.840

@C.Felix 这是一个非常好的主意，因为现在没有人使用`table`创建网站。因为搜索引擎不抓取表格网站或者抓取速度很慢。因此，请始终尝试创建少表设计，这对 SEO 有好处。

您可以从这个网站在线学习：[w3schools.com](http://www.w3schools.com)

# magento - Magento Extra Totral 结帐显示问题

> ID：13177546
> 
> 赞同：0
> 
> 时间：2012-11-01T12:55:02.780
> 
> 标签：magento

我在一页结帐时添加了一个额外的总数。我添加了带有一些工具提示的自定义标题，它工作正常。但由于我做了magento升级，它显示了html标签。

![在此处输入图像描述](../Images/d03e19bdae8145eccc80159b714c1104.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:12:01.397

假设您使用的是 magento v1.7+

看看你的总模板 /app/design/frontend/base/default/template/checkout/total/default.phtml

Magento 正在使用 $this->escapeHtml() 转义 html

```
<?php if ($this->getRenderingArea() == $this->getTotal()->getArea()): ?><strong><?php endif; ?>
   <?php echo $this->escapeHtml($this->getTotal()->getTitle()); ?>
<?php if ($this->getRenderingArea() == $this->getTotal()->getArea()): ?></strong><?php endif; ?> 
```

看看/app/code/core/Mage/Core/Block/Abstract.php

```
public function escapeHtml($data, $allowedTags = null)
{
    return $this->helper('core')->escapeHtml($data, $allowedTags);
} 
```

要解决此问题，您可以删除`$this->escapeHtml()`或`$this->escapeHtml($this->getTotal()->getTitle(), array('span','a'))`

# c++ - 无法计算输出

> ID：13177550
> 
> 赞同：0
> 
> 时间：2012-11-01T12:55:23.123
> 
> 标签：c++, for-loop, do-while

> **可能重复：**
> [达夫的设备是如何工作的？](https://stackoverflow.com/questions/514118/how-does-duffs-device-work)

```
int n=5;
int q=(n+3)/4;
switch(n%4)
{ 
  case 0:do{ n++;
  case 3:n++;
  case 2:n++;
  case 1:n++;}while(--q>0);
}
 cout<<n; 
```

n 的值是多少？这只是代码片段，给出的答案是 10。看不到怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:07:34.993

的最终值为`n`10。在 switch 之前`n`是 5，并且`q`是 2。 Switch 转到案例 1。`n`在第一次迭代中增加 1 次，在第二次迭代中再增加 4 次。最后`n`的值为 5+1+4 = 10。

# c# - 物理、相对、绝对和其他路径

> ID：13177551
> 
> 赞同：12
> 
> 时间：2012-11-01T12:55:26.150
> 
> 标签：c#, .net, path, uri, unc

我的任务是编写一个可以接收不同类型的路径/url 的对象，并返回它是什么类型的路径/url。例如路径可以是

```
1\. [drive]:\Temp 
2\. \\Temp 
3\. Temp (assuming that it relative Temp), 
4\. /Temp 
5\. ~/Temp 
6\. file://[drive]:/Temp 
7\. file://Temp 
8\. [scheme]://something/Temp 
```

...等等。

我如何检查`C#`它是物理路径、相对 url 还是绝对 url？

我认为知道它是相对uri还是绝对uri相对容易，但是如何知道它是否是UNC路径？

我尝试使用 Uri 对象，它是 IsUnc 属性，但它并没有真正帮助我....对于 c:\temp 它返回 false，对于 "/temp"、"temp/" 和 "temp" 它会引发格式异常是不正确的。是否存在任何可以帮助我解决此问题的内置对象`.NET 3.5`，或者我可以使用什么算法来确定路径的类型？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-01T13:57:15.413

尝试这个：

```
var paths = new[]
{
   @"C:\Temp",
   @"\\Temp",
   "Temp",
   "/Temp",
   "~/Temp",
   "file://C:/Temp",
   "file://Temp",
   "http://something/Temp"
};

foreach (string p in paths)
{
   Uri uri;
   if (!Uri.TryCreate(p, UriKind.RelativeOrAbsolute, out uri))
   {
      Console.WriteLine("'{0}' is not a valid URI", p);
   }
   else if (!uri.IsAbsoluteUri)
   {
      Console.WriteLine("'{0}' is a relative URI", p);
   }
   else if (uri.IsFile)
   {
      if (uri.IsUnc)
      {
         Console.WriteLine("'{0}' is a UNC path", p);
      }
      else
      {
         Console.WriteLine("'{0}' is a file URI", p);
      }
   }
   else
   {
      Console.WriteLine("'{0}' is an absolute URI", p);
   }
} 
```

输出：

> 'C:\Temp' 是文件 URI
> '\\Temp' 是 UNC 路径
> 'Temp' 是相对 URI
> '/Temp' 是相对 URI
> '~/Temp' 是相对 URI
> 'file://C: /Temp' 是文件 URI
> 'file://Temp' 是 UNC 路径
> 'http://something/Temp' 是绝对 URI

# msbuild - 如何过滤 ItemGroup？

> ID：13177552
> 
> 赞同：5
> 
> 时间：2012-11-01T12:55:27.890
> 
> 标签：msbuild

我正在尝试从另一个创建过滤的项目组，其中过滤的项目组将仅包含第一个组中具有指定文件扩展名的项目。

我收到以下错误：

错误 MSB4190：在此条件“'%(Extension)'=='.sys'”中，不允许在位置 1 引用内置元数据“Extension”。

当我运行这个：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
         DefaultTargets="Go"
         ToolsVersion="4.0">

  <ItemGroup>
    <Files Include="X.exe"/>
    <Files Include="Y.sys"/>
  </ItemGroup>

  <ItemGroup>
    <SysFiles Include="%(Files.Identity)" Condition="'%(Extension)'=='.sys'">
    </SysFiles>
  </ItemGroup>

  <Target Name="Go">
    <Message Text="SysFiles=@(SysFiles)"/>
  </Target>

</Project> 
```

首先，我不明白为什么这个位置不允许元数据？它是msbuild的一些人为限制还是未实现的部分？

其次，实现这种转换的简洁方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:19:44.583

好的，我发现如果我在目标 Go 中指定 ItemGroup SysFiles，它将正常工作。

# c# - 如何在我的网页上使用分隔符文本符号 (<) 而不会出现 HTML 错误？

> ID：13177555
> 
> 赞同：1
> 
> 时间：2012-11-01T12:55:51.637
> 
> 标签：c#, asp.net, html, csv

对于我网页上的分页功能，我将使用符号 <，它是一个分隔符。当我运行 html 检查时，它给了我这个错误：

```
Line 747, Column 318: character "<" is the first character of a delimiter but occurred as data 
…quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, true))"><<   </a> 
```

我知道必须有办法解决这个问题。这是我的 aspx 代码的样子：

```
 <td>
     <asp:LinkButton ID="PagerPrev" runat="server" CommandName="Page" CommandArgument="Prev"
    Text="<&nbsp;&nbsp;&nbsp;" ToolTip="Previous" />
</td> 
```

如果您在 Text=" 之后看到我使用了 < 这就是 html 错误检查器正在接收的内容。感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:58:39.213

您必须像使用不间断空格一样对其进行编码：

`"<"`是`"&lt;"`

会`">"`是`"&gt;"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:58:56.767

使用 对值进行 HTML 编码`&lt;`。

如果您以编程方式更新文本，则可以使用[HttpServerUtility](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.aspx)（通过`Server`ASP.NET 页面的属性公开）：

```
PagePrev.Text = Server.HtmlEncode(theValue); 
```

> HTML 编码确保文本在浏览器中正确显示，并且不会被浏览器解释为 HTML。例如，如果文本字符串包含小于号 (<) 或大于号 (>)，浏览器会将这些字符解释为 HTML 标记的左括号或右括号。当字符被 HTML 编码时，它们被转换为字符串 < 和 >，这会导致浏览器正确显示小于号和大于号。

事实上，您甚至可以使用内联脚本在页面上执行此操作，但这在很大程度上是不必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:51:12.697

正如其他人所说，如果您使用“<” HTML 内容中的字符，需要将其转义为`&lt;`.

另一种方法是使用其他字符。在正常语言中，“<” 仅表示“小于”。使用诸如“←”之类的箭头字符可能更好地传达向后或向前的想法，例如：

```
<style>
.arrow { font-weight: bold; font-family: Verdana; }
</style>
<a href="..." title="previous page" class="arrow">&larr;</a> 
```

# asp.net-mvc-3 - 将具有列表属性的类从视图绑定到 MVC3 中的操作方法

> ID：13177558
> 
> 赞同：1
> 
> 时间：2012-11-01T12:55:54.943
> 
> 标签：asp.net-mvc-3, list, binding, actionmethod

我有一个`HomeController`具有以下操作方法的控制器：

```
public ActionResult DisplayData(MyViewModel myViewModel)
{
   // Do something with myViewModel           
} 
```

`ViewModel`: _

```
public class MyViewModel
{
    public List<string> Names { get; set; }
    public List<CustomViewModel> CustomVM { get; set; }
    public bool IsSpecial { get; set; }
} 
```

以及以下`View`

```
@model AppName.ViewModels.MyViewModel

@{ Html.RenderPartial("MyPartialView", Model);  }

<img src="@Url.Action("DisplayData", "Home", new RouteValueDictionary(Model))" alt="Image" /> 
```

我使用`Url.Action`这里描述的方式，但我在`DisplayData`action 方法中得到的是 null。在我得到的源代码中：

```
<img src="/Home/DisplayData?IsSpecial=true&amp;Name=System.Collections.Generic.List%601%5BSystem.String%5D&amp;CustomVM=System.Collections.Generic.List%601%5BVestibule.AppName.ViewModels.CustomViewModel%5D"" alt="Image" /> 
```

所以它实际上是在传递类型而不是值。唯一正确传递的变量值是 bool`IsSpecial`

ViewModel 反而被正确地传递给局部视图。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:38:14.703

“问题”是列表。MVC 试图绑定列表对象本身，而不是它们的值。有关绑定集合的示例，请参见[此处。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

您需要执行以下操作来生成 URL：

```
@for (int i = 0; i < Model.Names.Count(); i++)
{
 <img src="@Url.Action("DisplayData", "Home", new { IsSpecial = Model.IsSpecial, Name = Model.Names[i], CustomVM = Model.CustomVM[i].Property })" alt="Image" />
} 
```

**可能包含错误，我没有测试它。在您的情况下，这可能不是最好的方法，这只是一个例子**

但这当然取决于列表的长度。如果它们的长度不同，这将不起作用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:38:59.630

您真的要将这两个列表都传递给 GET 操作吗？GET 通常保留用于获取幂等实体。

您可能喜欢使用 POST 将数据发送到服务器，或者您必须考虑覆盖这些列表的 ToString() 方法，可能通过将它们包装在您自己的容器类型中。

# mysql - 狮身人面像在西里尔查询时返回空结果

> ID：13177560
> 
> 赞同：2
> 
> 时间：2012-11-01T12:56:00.577
> 
> 标签：mysql, character-encoding, sphinx

拉丁语和俄语转译仍然正常搜索（！）

```
$ search sumka   
using config file '/etc/sphinx/sphinx.conf'...
index 'test1': query 'sumka ': returned 636 matches of 636 total in 0.000 sec

displaying matches:
1\. document=154143, weight=1660, name=Сумка Sony LCS-MS10 Gray Alpha Текстильная сумка для фотокамеры Alpha Серый цвет, casual style (сумка почтальона) [LCSMS10H.AE], description_short=Сумка Sony LCS-MS10 Gray Alpha Текстильная сумка для фотокамеры Alpha Серый цвет, casual style (сумка почтальона) [LCSMS10H.AE]
                                     ...

$ search сумка

using config file '/etc/sphinx/sphinx.conf'...
index 'test1': query 'сумка ': returned 0 matches of 0 total in 0.000 sec

words:
1\. 'сумка': 0 documents, 0 hits 
```

听起来像这里的字符集问题，但我在 mysql 和查询中有 utf8

```
mysql> show variables like "character%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+

mysql> show variables like "collation%";
+----------------------+-----------------+
| Variable_name        | Value           |
+----------------------+-----------------+
| collation_connection | utf8_general_ci |
| collation_database   | utf8_general_ci |
| collation_server     | utf8_unicode_ci |
+----------------------+-----------------+ 

$ file words
words: UTF-8 Unicode text
$ cat words | search --stdin 

using config file '/etc/sphinx/sphinx.conf'...
index 'test1': query 'сумка
': returned 0 matches of 0 total in 0.000 sec

words:
1\. 'сумка': 0 documents, 0 hits 
```

这对于 php 客户端和 sphinx mysql 之类的客户端也是如此。

完整的狮身人面像配置在[这里](http://pastie.org/5166413)，但重要部分的引用：

```
source src1
{
...
sql_query_pre       = SET NAMES utf8
sql_query_pre       = SET CHARACTER SET utf8
...
}
index test1
{
...
charset_type    = utf-8
...
} 
```

我只发现了一个类似的问题，但 db 中有 latin1 字符集。

程序版本是：

```
mysql  Ver 14.14 Distrib 5.5.20, for Linux (x86_64) using readline 5.1
Sphinx 2.0.6-id64-release (r3473)
centos 5.8 
```

## 更新

将 charset_table 添加到配置来自[http://sphinxsearch.com/wiki/doku.php?id=charset_tables#cyrillic](http://sphinxsearch.com/wiki/doku.php?id=charset_tables#cyrillic)的表格，但仍然没有好处。

我还在本地 gentoo 上安装了 Sphinx 2.0.5-release (r3308)，它可以开箱即用地处理西里尔字母查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:35:26.953

你可以试试mysql接口吗？（ mysql -P 9306 -h 127.0.0.1 然后执行 SELECT * FROM test1 WHERE MATCH('сумка'); ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:40:33.343

它现在有效。

我不清楚它是什么，但它适用于默认配置和带有西里尔字母行的 example.sql，所以我转储了我的数据库并将其填满，它使它工作。我认为它修复了一些编码问题，迁移后可能会抛出几个 mysql 实例。

对不起我纯英语。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T12:34:44.860

问题可能是由于 mysql 编码。尝试取消注释此行：

```
#sql_query_pre      = SET NAMES utf8 
```

mysql 的默认编码可以不同于 utf8；

# google-app-engine - 在 GWT 和 AppEngine 之间共享类

> ID：13177562
> 
> 赞同：0
> 
> 时间：2012-11-01T12:56:03.560
> 
> 标签：google-app-engine, gwt

我使用 AppEngine (Java) 和 GWT 来设计我的应用程序。我有一个代表客户端（GWT）和服务器（AppEngine）都作用的对象的类。现在我有一个 AppEngine 类（它包含所有服务器端信息）和客户端使用的共享目录中的一个类（并在 RPC 调用之间传递）。现在我需要在两者之间转换的方法，并在服务器和客户端上重现所需的方法。这让我很头疼，当课程变得更复杂时，我发现容易出现错误。

我不只创建一个共享类的原因是我不想将我的一些服务器所说的逻辑、方法和属性暴露给客户端。但我读到的是，当 GWT 编译时，它会从编译的代码中删除未使用的方法和属性。这是真的吗，这会保护我不想在客户端上看到的代码吗？有什么我应该注意的问题吗？属性不用担心（我认为），因为它会混淆名称。我知道我可以使用瞬态关键字，这样服务器数据就不会在 RPC 调用中发送到客户端。

最好的是我可以在方法上添加一个注释，让 GWT 编译器知道它永远不应该编译这个方法，这样我就知道它永远不会进入编译后的 javascript。

最后，如果我将代码分开，这样的情况是否有最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:11:09.403

我找到了一种主要解决我的问题的解决方法。

我可能有一个调用我的代码的服务器组件的类，这将使 GWT 编译崩溃，因为它无权访问该类（比如它是 com.myproject.server.Class1）。我可以在 gwt.xml 文件中覆盖 GWT 中的包实现（参见此处[http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/DevGuideModuleXml](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/DevGuideModuleXml)）并制作一个 com。 myproject.client.com.myproject.server.Class1 实现被调用方法但可以返回 null 的类。这样，GWT 就有了一个可以编译的链接类。稍后在 GWT 编译中，它应该只删除此类/方法，因为它永远不会（希望）在 GWT 中被调用。

这可能是一个非常骇人听闻的解决方法，但如果仔细完成可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:46:02.793

如果我正确理解您的问题，我会说这不是一个好的设计。共享目录中的序列化对象应该是纯 POJO，您不应该在这些类中混合业务逻辑。

# php - 为什么 JRequest::getVar() 在我的自定义配置文件/注册插件中没有返回任何内容？

> ID：13177563
> 
> 赞同：1
> 
> 时间：2012-11-01T12:56:09.533
> 
> 标签：php, joomla, joomla2.5, joomla-extensions, joomla1.7

我制作了一个名为**esrnumber**的额外自定义字段。我`onUserBeforeSave()`在插件中的 php 文件中添加了一个函数。这应该从我的自定义字段中获取 esrnumber 以及从注册表单中获取名称，检查数据库，如果它们匹配则返回 true。从而允许用户注册。

问题是我似乎无法将表单中的字段值获取到这个 php 脚本中。下面是我的代码。

```
function onUserBeforeSave($user, $isnew, $new){
//sql code removed for example
    $foundesr = false;
    if ($_SERVER['REQUEST_METHOD'] == 'GET' && isset($_GET['esrnumber'])) {
    $test = $_GET['esrnumber'];
    } else if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['esrnumber']))         {
        $test = $_POST['esrnumber'];
    } else {
        $test = "booo";
    }
   if($foundesr == false){
        JError::raiseWarning(1000, JText::_('There is a problem with your ESR number, ' . JRequest::getVar('username') . JRequest::getVar('esrnumber') . JRequest::getVar('jform_username') . $test . 'it does not match that name in our records.'));
        return false;
    }
    return true;
} 
```

正如您所看到的，其中大部分是不必要的，我刚刚尝试了几种不同的方法来从注册表单字段中检索值，它们都返回空值。我哪里错了？我怎样才能简单地从我的表单中获取值到这个方法中？

这是 Joomla 为表单生成的*HTML*代码（asfaik 这是所有默认内容）

```
<div class="registration">
<form id="member-registration" action="/index.php/component/users/?task=registration.register" method="post" class="form-validate">
            <fieldset>
                <legend>User Registration</legend>
                <dl>
                                <dt>
                <span class="spacer"><span class="before"></span><span class="text"><label id="jform_spacer-lbl" class=""><strong class="red">*</strong> Required field</label></span><span class="after"></span></span>                                    </dt>
            <dd>&#160;</dd>
                                            <dt>
                <label id="jform_name-lbl" for="jform_name" class="hasTip required" title="Name::Enter your full name">Name:<span class="star">&#160;*</span></label>                                   </dt>
            <dd><input type="text" name="jform[name]" id="jform_name" value="pirateballoon@gmail.com" class="required" size="30"/></dd>
                                            <dt>
                <label id="jform_username-lbl" for="jform_username" class="hasTip required" title="Username::Enter your desired user name">Username:<span class="star">&#160;*</span></label>                                   </dt>
            <dd><input type="text" name="jform[username]" id="jform_username" value="pirateballoon@gmail.com" class="validate-username required" size="30"/></dd>
                                            <dt>
                <label id="jform_password1-lbl" for="jform_password1" class="hasTip required" title="Password::Enter your desired password - Enter a minimum of 4 characters">Password:<span class="star">&#160;*</span></label>                                    </dt>
            <dd><input type="password" name="jform[password1]" id="jform_password1" value="" autocomplete="off" class="validate-password required" size="30"/></dd>
                                            <dt>
                <label id="jform_password2-lbl" for="jform_password2" class="hasTip required" title="Confirm Password::Confirm your password">Confirm Password:<span class="star">&#160;*</span></label>                                    </dt>
            <dd><input type="password" name="jform[password2]" id="jform_password2" value="" autocomplete="off" class="validate-password required" size="30"/></dd>
                                            <dt>
                <label id="jform_email1-lbl" for="jform_email1" class="hasTip required" title="Email Address::Enter your email address">Email Address:<span class="star">&#160;*</span></label>                                 </dt>
            <dd><input type="text" name="jform[email1]" class="validate-email required" id="jform_email1" value="pirateballoon@gmail.com" size="30"/></dd>
                                            <dt>
                <label id="jform_email2-lbl" for="jform_email2" class="hasTip required" title="Confirm email Address::Confirm your email address">Confirm email Address:<span class="star">&#160;*</span></label>                                   </dt>
            <dd><input type="text" name="jform[email2]" class="validate-email required" id="jform_email2" value="pirateballoon@gmail.com" size="30"/></dd>
                                                                            </dl>
    </fieldset>
                <fieldset>
                <legend>User ESR Profile</legend>
                <dl>
                                <dt>
                <label id="jform_esrprofile_esrnumber-lbl" for="jform_esrprofile_esrnumber" class=" required">ESR Number<span class="star">&#160;*</span></label>                                   </dt>
            <dd><input type="text" name="jform[esrprofile][esrnumber]" id="jform_esrprofile_esrnumber" value="" class="required"/></dd>
                            </dl>
    </fieldset>
        <div>
        <button type="submit" class="validate">Register</button>
        or          <a href="/" title="Cancel">Cancel</a>
        <input type="hidden" name="option" value="com_users" />
        <input type="hidden" name="task" value="registration.register" />
        <input type="hidden" name="b44564159b9c7ebe3b7caf93cc5ce8de" value="1" />       </div>
</form> 
```

我个人从未调用过我创建的新方法，我只是创建了该方法，而 Joomla 似乎在提交表单时会自动调用它。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:57:05.750

```
$jinput = JFactory::getApplication()->input;
$fields = $jinput->get('jform','','array'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:14:37.313

首先，JRequest 已被弃用，不应在 2.5 中使用，并且在新的 Joomla 3.0 中已完全删除。而是像这样使用[JInput](http://docs.joomla.org/Retrieving_request_data_using_JInput)：

```
$jinput = JFactory::getApplication()->input;
$fields = $jinput->getArray('jform'); 
```

现在您应该能够像这样引用您的字段：

```
$fields['name'];
$fields['username'];
etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:30:01.047

解决了。如果有人找到这个线程并且需要知道，这就是我在`onUserBeforeSave($user, $isnew, $new)`函数中所做的。

```
JArrayHelper::getValue($new, 'name', 0, 'STRING') 
```

给你你的变量。只需更改名称的位置即可获取您想要的任何用户详细信息。要获得 ESR 编号（我的自定义字段），我必须这样做：

```
 foreach ($new['esrprofile'] as $k => $v) {
             $esrnumber = $v;
        } 
```

可能有一种更有效的方法可以从该数组中获取该 esr 编号，因为我认为那里只有一个数字实例，但这目前有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T17:05:26.240

您可以使用变量代替使用*JRequest来检索输入：*`$new`

```
echo $new->username;
echo $new->email; 
```

但是，`JRequest::getVar`不起作用的原因仅仅是因为您使用了错误的名称。似乎您正在尝试使用输入字段的 ID 而不是名称。

输入名称设置为*jform[name]*等。因此要使用*JRequest*检索它们，请获取整个数组：

```
$jform = JRequest::getVar('jform');
$username = $jform['username']; 
```

此外，如果您使用的是 Joomla 版本 > 2.5，请参阅*JInput*： [http ://docs.joomla.org/Retrieving_request_data_using_JInput](http://docs.joomla.org/Retrieving_request_data_using_JInput)

# apache - Apache 监听配置

> ID：13177564
> 
> 赞同：10
> 
> 时间：2012-11-01T12:56:11.110
> 
> 标签：apache, http, configuration

以下配置有什么区别

```
Listen *:80 //anything at port 80
Listen 192.168.0.34:80 //from an internal ip on port 80
Listen 173.194.35.23:80 //from an external ip on port 80 
```

其中哪一个是最好的配置（如果它们之间有任何区别）。我希望我的服务器可以从 Internet 访问，而不仅仅是从 LAN 访问。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T13:04:42.097

我总是用`*:80`.

您只能收听实际绑定到服务器网卡的 IP，但是拥有一个跨越内部和外部网络的服务器是不好的做法，恕我直言，所以我不会定义内部和外部地址。

唯一一次我认为有必要具体说明你监听的 IP 地址是如果你有特定的基于 IP 的虚拟主机。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T13:02:36.403

一台 Apache 服务器可以有多个域的多个 IP。

```
Listen *:80 --> Apache listens no matter what ip request the web browser
Listen 192.168.0.34:80 ---> Apache listens only if web browser requests http://192.168.0.34 . 192.x.x.x use to be internal IPs
Listen 173.194.35.23:80 ---- Apache listens only if web browser requests http://Listen 173.194.35.23 
```

如果您只有一个站点域，请听 *:80 就足够了。其他配置是将多个站点/域服务到一个 apache 服务器中。

一些文档示例[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

# php - div 刷新 javascript

> ID：13177569
> 
> 赞同：0
> 
> 时间：2012-11-01T12:56:24.930
> 
> 标签：php, javascript, html, page-refresh, autoscroll

我正在使用 div 刷新脚本（如下所示）。div 的内容包含一个自动滚动 ul（来自[http://www.dynamicdrive.com/](http://www.dynamicdrive.com/)的代码）。刷新工作正常。但是刷新后自动滚动不起作用

**刷新代码**

```
 <script type="text/javascript">
        window.onload = setupRefresh;
        function setupRefresh()
        {
            setInterval("refreshBlock();",1000);
        }

        function refreshBlock()
        {
            $('#list4').load("refreshpage");

        }
    </script> 
```

**自动滚动代码**

```
 <script type="text/javascript">

        var delayb4scroll=2000 //Specify initial delay before marquee starts to scroll on page (2000=2 seconds)
        var marqueespeed=1 //Specify marquee scroll speed (larger is faster 1-10)
        var pauseit=1 //Pause marquee onMousever (0=no. 1=yes)?

        var copyspeed=marqueespeed
        var pausespeed=(pauseit==0)? copyspeed: 0
        var actualheight=''

        function scrollmarquee(){
            if (parseInt(cross_marquee.style.top)>(actualheight*(-1)+8))
                cross_marquee.style.top=parseInt(cross_marquee.style.top)-copyspeed+"px"
            else
                cross_marquee.style.top=parseInt(marqueeheight)+8+"px"
        }

        function initializemarquee(){
            cross_marquee=document.getElementById("vmarquee")
            cross_marquee.style.top=0
            marqueeheight=document.getElementById("list4").offsetHeight
            actualheight=cross_marquee.offsetHeight
            if (window.opera || navigator.userAgent.indexOf("Netscape/7")!=-1){ //if Opera or Netscape 7x, add scrollbars to scroll and exit
                cross_marquee.style.height=marqueeheight+"px"
                cross_marquee.style.overflow="scroll"
                return
            }
            setTimeout('lefttime=setInterval("scrollmarquee()",30)', delayb4scroll)
        }

        if (window.addEventListener)
            window.addEventListener("load", initializemarquee, false)
        else if (window.attachEvent)
            window.attachEvent("onload", initializemarquee)
        else if (document.getElementById)
            window.onload=initializemarquee

    </script> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:58:44.760

您只需：

```
function refreshBlock()
        {
            $('#list4').load("refreshpage");
            initializemarquee();

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:01:14.883

似乎您需要`initializemarquee()`在加载完成后调用。您可以在`.load()`'s 回调中执行此操作。

```
function refreshBlock(){
  $('#list4').load("refreshpage", function(){
    clearInterval(lefttime);
    initializemarquee()
  });
} 
```

我差点忘了补充一点，你也想停止那个间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:13:48.063

为什么混合使用纯 JS 和 jQuery？如果你有 jQuery 使用它

这是我的重写。未经测试，但除了拼写错误或我认为可以在 jQuery 中完成但不能完成的事情之外，它应该完成整个事情

```
$(function() {
  var sId = setInterval(function {
    $('#list4').load("refreshpage");
  },1000);
  var $cross_marquee=$("#vmarquee")
  var delayb4scroll=2000 //Specify initial delay before marquee starts to scroll on page (2000=2 seconds)
  var marqueespeed=1 //Specify marquee scroll speed (larger is faster 1-10)
  var pauseit=true //Pause marquee onMousever (false=no. true=yes)?
  var copyspeed=marqueespeed;
  var pausespeed=(pauseit==0)? copyspeed: 0;
  var actualheight=$cross_marquee.height();
  var marqueeheight=$("#list4").height();
  $cross_marquee.top(0);

  if (window.opera || navigator.userAgent.indexOf("Netscape/7")!=-1){ //if Opera or Netscape 7x, add scrollbars to scroll and exit
    $cross_marquee.height(marqueeheight);
    $cross_marquee.css("overflow","scroll");
  }
  else var tId = setTimeout(function() { 
    lefttime=setInterval(
    function() { 
      var top = $cross_marquee.top(); 
      if (top>(actualheight*(-1)+8)) $cross_marquee.top(top-copyspeed)
      else $cross_marquee.top(marqueeheight+8);
     }

    },30)
    , delayb4scroll);

}); 
```

# ruby-on-rails-3.2 - Rails 服务器在创建 gemset 后显示错误

> ID：13177571
> 
> 赞同：0
> 
> 时间：2012-11-01T12:56:35.523
> 
> 标签：ruby-on-rails-3.2, rvm, gemset

我已经安装了rvm。为新项目创建 gemset 后，当我发出命令时`rails server`，它显示此错误`report_activate_error': Could not find RubyGem railties (>= 0) (Gem::LoadError) from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:211:in`激活`

所以我找到了一个解决方案，我需要给出`gem install rails`安装 rails 的命令。每个新项目都需要安装导轨吗？我很困惑。请指导我真实的事情。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:02:55.527

Gemsets 是分离的环境，你需要为每个新的 gemset 安装 gems，如果你总是使用相同版本的 rails，你可以在`global`gemset 中安装 gems：

```
rvm @global do gem install rails 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:18:40.347

Did you try "bundle install" on your project root? This could fix that error.

# .htaccess - 将 .htaccess 转换为 IIRF

> ID：13177572
> 
> 赞同：2
> 
> 时间：2012-11-01T12:56:37.553
> 
> 标签：.htaccess, iirf

我正在尝试转换为 IIRF，但它不起作用。IIRF 文档不是很有帮助。

原始代码：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_\-\/]+)$ ?g=$1 [L] 
```

我尝试添加斜杠，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:53:31.970

Options +FollowSymlinks 正在破坏您的 IIRF。您可以忽略它，因为 Windows 不使用符号链接。

# boost-python - 如何使用 boost.python 公开对齐的类

> ID：13177573
> 
> 赞同：2
> 
> 时间：2012-11-01T12:56:40.733
> 
> 标签：boost-python, memory-alignment

当尝试像这样公开对齐的类时：

```
class __declspec(align(16)) foo
{
public:
    void foo_method() {}
};

BOOST_PYTHON_MODULE(foo_module)
{
    class_<foo>("foo")
        .def("foo_method", &foo::foo_method);
} 
```

您最终会遇到错误（msvs 2010）：

```
error C2719: 'unnamed-parameter': formal parameter with __declspec(align('16')) won't be aligned,
see reference to class template instantiation 'boost::python::converter::as_to_python_function<T,ToPython>' being compiled 
```

到目前为止我找到的解决方案是使用智能指针来存储对象：

```
BOOST_PYTHON_MODULE(foo_module)
{
    class_<foo, boost::shared_ptr<foo>, boost::noncopyable>("foo")
        .def("foo_method", &foo::foo_method);
} 
```

没有更好的解决方案吗？这很烦人，因为您应该按值包装所有返回对象的函数以返回智能指针，并且性能也会降低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-17T08:51:03.907

我有同样的问题，想要一个不涉及 shared_ptr 的解决方案。它涉及专门一些 boost::python 类，以确保我们获得足够大的存储区域以能够在其中对齐我们的对象。

我写了一篇有点长的博客文章，解释了我是如何在[这里找到](http://fhtagn.net/prog/2015/04/16/quaternion_boost_python.html)这个解决方案的。以下是我找到的解决方案。我觉得这是一个相当黑客，所以也许它会破坏其他东西。但到目前为止，它*似乎*有效，我还没有发现更好的东西。

我试图公开一个 Eigen::Quaternionf （需要 16 个字节对齐）：

```
bp::class_<Quaternionf>("Quaternion", bp::init<float, float, float, float>())
  .def(bp::init<Matrix3f>())
  .add_property("w", get_prop_const(&Quaternionf::w))
  .add_property("x", get_prop_const(&Quaternionf::x))
  .add_property("y", get_prop_const(&Quaternionf::y))
  .add_property("z", get_prop_const(&Quaternionf::z))
  .def("matrix", &Quaternionf::matrix)
  .def("rotvec", &quaternion_to_rotvec); 
```

该解决方案涉及专业化 3 类：

**boost::python::objects::instance**请求比我们的类型需要的多 16 个字节，以确保我们可以对齐

```
...
union
{
    align_t align;
    char bytes[sizeof(Data) + 16];
} storage;
... 
```

**boost::python::objects::make_instance_impl**正确设置我们实例的 Py_SIZE

```
...
Holder* holder = Derived::construct(
  &instance->storage, (PyObject*)instance, x);
holder->install(raw_result);

// Note the position of the internally-stored Holder,
// for the sake of destruction
// Since the holder not necessarily allocated at the start of
// storage (to respect alignment), we have to add the holder
// offset relative to storage
size_t holder_offset = reinterpret_cast<size_t>(holder)
                        - reinterpret_cast<size_t>(&instance->storage)
                        + offsetof(instance_t, storage);
Py_SIZE(instance) = holder_offset;
... 
```

**boost::python::objects::make_instance**以便构造方法将对齐存储中的持有者

```
...
static inline QuaternionfHolder* construct(void* storage, PyObject* instance, reference_wrapper<Quaternionf const> x)
{
  // From the specialized make_instance_impl above, we are guaranteed to
  // be able to align our storage
  void* aligned_storage = reinterpret_cast<void*>(
    (reinterpret_cast<size_t>(storage) & ~(size_t(15))) + 16);
  QuaternionfHolder* new_holder = new (aligned_storage) 
    QuaternionfHolder(instance, x);
  return new_holder;
}
... 
```

完整代码如下：

```
typedef bp::objects::value_holder<Eigen::Quaternionf> QuaternionfHolder;

namespace boost { namespace python { namespace objects {

using namespace Eigen;

//template <class Data = char>
template<>
struct instance<QuaternionfHolder>
{
  typedef QuaternionfHolder Data;
    PyObject_VAR_HEAD
    PyObject* dict;
    PyObject* weakrefs;
    instance_holder* objects;

    typedef typename type_with_alignment<
        ::boost::alignment_of<Data>::value
    >::type align_t;

    union
    {
        align_t align;
        char bytes[sizeof(Data) + 16];
    } storage;
};

// Adapted from boost/python/object/make_instance.hpp

//template <class T, class Holder, class Derived>
template<class Derived>
struct make_instance_impl<Quaternionf, QuaternionfHolder, Derived>
{
    typedef Quaternionf T;
    typedef QuaternionfHolder Holder;

    typedef objects::instance<Holder> instance_t;

    template <class Arg>
    static inline PyObject* execute(Arg& x)
    {
        BOOST_MPL_ASSERT((mpl::or_<is_class<T>, is_union<T> >));

        PyTypeObject* type = Derived::get_class_object(x);

        if (type == 0)
            return python::detail::none();

        PyObject* raw_result = type->tp_alloc(
            type, objects::additional_instance_size<Holder>::value);

        if (raw_result != 0)
        {
            python::detail::decref_guard protect(raw_result);

            instance_t* instance = (instance_t*)raw_result;

            // construct the new C++ object and install the pointer
            // in the Python object.
            //Derived::construct(&instance->storage, (PyObject*)instance, x)->install(raw_result);
            Holder* holder = Derived::construct(
                &instance->storage, (PyObject*)instance, x);
            holder->install(raw_result);

            // Note the position of the internally-stored Holder,
            // for the sake of destruction
            // Since the holder not necessarily allocated at the start of
            // storage (to respect alignment), we have to add the holder
            // offset relative to storage
            size_t holder_offset = reinterpret_cast<size_t>(holder)
                                 - reinterpret_cast<size_t>(&instance->storage)
                                 + offsetof(instance_t, storage);
            Py_SIZE(instance) = holder_offset;

            // Release ownership of the python object
            protect.cancel();
        }
        return raw_result;
    }
};

//template <class T, class Holder>
template<>
struct make_instance<Quaternionf, QuaternionfHolder>
    : make_instance_impl<Quaternionf, QuaternionfHolder, make_instance<Quaternionf,QuaternionfHolder> >
{
    template <class U>
    static inline PyTypeObject* get_class_object(U&)
    {
        return converter::registered<Quaternionf>::converters.get_class_object();
    }

    static inline QuaternionfHolder* construct(void* storage, PyObject* instance, reference_wrapper<Quaternionf const> x)
    {
      LOG(INFO) << "Into make_instance";
      LOG(INFO) << "storage : " << storage;
      LOG(INFO) << "&x : " << x.get_pointer();
      LOG(INFO) << "&x alignment (0 = aligned): " << (reinterpret_cast<size_t>(x.get_pointer()) & 0xf);

      // From the specialized make_instance_impl above, we are guaranteed to
      // be able to align our storage
      void* aligned_storage = reinterpret_cast<void*>(
          (reinterpret_cast<size_t>(storage) & ~(size_t(15))) + 16);
      QuaternionfHolder* new_holder = new (aligned_storage) QuaternionfHolder(instance, x);
      LOG(INFO) << "&new_holder : " << new_holder;
      return new_holder;
      //return new (storage) QuaternionfHolder(instance, x);
    }
};

}}} // namespace boost::python::objects 
```

# android - URL Connection - no connection

> ID：13177578
> 
> 赞同：2
> 
> 时间：2012-11-01T12:57:05.883
> 
> 标签：android, mysql, http, url, connection

I want to connect to a URL and disconnect after that. But after my Update on Android 4.1 (worked before on 2.3.7) it doesn't work anymore! :/

Why? I have no Idea:

```
public void insert_into_Mysql() {
    URL url = new URL("http://***/insertOrder.php?product="+product+"&owner="+owner);
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    try {
        openActivityOverview(product);  
    } finally {
        urlConnection.disconnect();
    } 
```

Noting is inserted in the MySql-Table...

Thanks for Help! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:09:23.057

您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) 来打开 url 连接。

例如，请参阅以下链接：

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

[http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:05:32.980

在线程中写入 url 连接。

从 Android API v15 开始，它不需要在主线程上工作的繁重进程。所以你应该将你的逻辑移动到另一个线程，比如下面的源代码：

```
new Thread(new Runnable() {
   public void run() {
        // your logic
   }                        
}).start(); 
```

更多信息请参考[http://developer.android.com/guide/practices/responsiveness.html](http://developer.android.com/guide/practices/responsiveness.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:28:31.987

您可以使用 AsyncTask 执行后台操作，例如联网。

```
private class ATask extends AsyncTask
{

    public ATask()
    {
    }

    @Override
    protected Object doInBackground(Object... params) 
    {
        // Background logic here.
        return null;
    }   

    @Override
    protected void onPostExecute(Object result) 
    {
        // Foreground logic here.
    }
} 
```

或者，您可以禁用主线程上的无网络限制，但这通常被认为是一个坏主意，并且可能不应该在玩耍之外使用。

StrictMode.ThreadPolicy 策略 = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);

# ios - in app purchase strange behavior

> ID：13177579
> 
> 赞同：0
> 
> 时间：2012-11-01T12:57:14.193
> 
> 标签：ios, in-app-purchase

There was an error with the in-App-Purchase.

Requests are very long (>10 sec), and after the abolition of the request window appears several times: "enter your password".

The error is not stable, it appears and disappears on the iphone 3g. for ipad 3 and iPhone 4 does not have this error, even though requests are also very long.

It looks like a network problem, but with the Internet all right. Everything worked fine a few days ago.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:16:10.147

您的每个请求都将准确生成一个响应，以便调用一次：

```
productsRequest:(SKProductsRequest *)request didReceiveRespons 
```

检查你的 iPhone 模拟器有多少次点击这个功能——我相信你可以调试 storekit 的这一部分。

只有当您绝望地生成并重新生成产品请求时，才会导致多次登录提示。

此外，请确保您已退出常规 iTunes 帐户。出现提示后，使用您使用 iTunes-connect 网站创建的沙盒用户 ID 登录。

如果您看到点击 didReceiveRespons 的延迟很长，唯一的原因可能是外部延迟，您对此无能为力。

# svn - Restore SVN repository history after moving

> ID：13177586
> 
> 赞同：1
> 
> 时间：2012-11-01T12:57:37.223
> 
> 标签：svn

> **Possible Duplicate:**
> [Subversion: Moving Directories with History](https://stackoverflow.com/questions/108567/subversion-moving-directories-with-history)

I have old `svn` repository where all files located at the root. Now I create folders trunk, branches and tags and move all files to trunk. Unfortunately history was lost.

How can i restore history?

Before:

```
/repository/folder1
/repository/folder2 
```

After:

```
/repository/trunk/folder1
/repository/trunk/folder2 
```

# objdump - what does objdump mean by 'unsafe'?

> ID：13177587
> 
> 赞同：1
> 
> 时间：2012-11-01T12:57:38.203
> 
> 标签：objdump

objdump, run on a relatively modern 64-bit linux system, complains as follows about one of our shared libs:

use of unsafe function-scope static in ‘lib64/libwhatever.so’.

What does that mean?

The man page doesn't mention 'unsafe' or 'function-scope' anywhere I can see.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T02:25:07.843

据我所知，“功能范围”没有出现在 binutils 源代码树中。所以也许这来自供应商补丁；在这种情况下，您应该询问您的供应商。

# python - 打印 1 到 10 之间的随机数并在数字为 N 时停止的 While 循环

> ID：13177589
> 
> 赞同：3
> 
> 时间：2012-11-01T12:57:39.683
> 
> 标签：python, random, while-loop

这就是我所拥有的，但这只会生成一个随机数并无限打印该数字：

```
import random

x = random.randint(0,10)
y = 7
while x != y:
    print(x) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T13:00:29.037

类似的东西（在while内移动条件）：

```
stop_at = 7
while True:
    num = random.randint(0, 10)
    if num == stop_at:
        break
    print num 
```

或者，一个完整的重构：

```
from itertools import starmap, repeat, takewhile
from random import randint

for num in takewhile(lambda L: L != 7, starmap(randint, repeat( (0, 10) ))):
    print num 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:59:08.917

你几乎得到它，你需要在循环内生成一个新的随机数：

```
import random

x = random.randint(0,10)
y = 7
while x != y:
    print(x)   #Print old (non-7) random number
    x = random.randint(0,10)  #pick a new number.  I hope it's 7 so we can end this madness

print("You found {0}.  Congrats.  Go have a beer.".format(y)) 
```

# sql - 选择匹配的行作为列

> ID：13177591
> 
> 赞同：0
> 
> 时间：2012-11-01T12:57:44.977
> 
> 标签：sql, sql-server, pivot

我认为通过示例来展示会是最快的，所以这里有一个我的问题的简化版本。我正在使用 SQL Server。

这是数据模型

```
SURVEY       QUESTION        ANSWER
------       --------        -------
surveyId     questionId      answerId
             questionText    surveyId
                             questionId
                             answerText 
```

这是一些示例数据

```
SURVEY          QUESTION
 ----------      ------------ --------------
| surveyId |    | questionId | questionText |
 ----------      ------------ --------------
| 1        |    | 1          | Name         |
| 2        |    | 2          | E-Mail       |
 ----------     | 3          | Address      |
                | 4          | Phone        |
                 ------------ --------------
ANSWER
 -----------------------------------------------
| answerId | surveyId | questionId | answerText |
 -----------------------------------------------
| 1        | 1        | 1          | John       |
| 2        | 1        | 2          | john@aa.bb |
| 3        | 1        | 3          | New York   |
| 4        | 1        | 4          | 1112223344 |
| 5        | 2        | 1          | Pete       |
| 6        | 2        | 2          | pete@cc.dd |
| 7        | 2        | 3          | Boston     |
| 8        | 2        | 4          | 5556667788 |
 ----------------------------------------------- 
```

最后，这是我要选择的

```
RESULT
 ------------------------------
| surveyId | name | email      |
 ------------------------------
| 1        | John | john@aa.bb |
| 2        | Pete | pete@dd.cc |
 ------------------------------ 
```

我希望能够在运行时指定最终表格中需要哪些列。现在我可以通过执行以下操作得到这个结果

```
SELECT rName.surveyId, rName.requestor, rEmail.email 
FROM (SELECT a.answerText AS name, a.surveyId
      FROM answer a INNER JOIN question q ON a.questionId = q.questionId 
      WHERE a.surveyId = @surveyId AND q.questionText = 'Name') AS rName
INNER JOIN 
     (SELECT a.answerText AS name, a.surveyId
      FROM answer a INNER JOIN question q ON a.questionId = q.questionId 
      WHERE a.surveyId = @surveyId AND q.questionText = 'E-Mail') AS rEmail
ON rName.questionnaireId = rEmail.questionnaireId 
```

如您所见，它很丑陋，并且包含重复的代码。有没有办法做这个清洁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:01:51.233

```
SELECT  a.surveyID,
        MAX(CASE WHEN c.questionText = 'Name' THEN b.answerText ELSE NULL END) name,
        MAX(CASE WHEN c.questionText = 'E-Mail' THEN b.answerText ELSE NULL END) email
FROM    Survey a
        INNER JOIN Answer b
            ON a.surveyID = b.surveyID
        INNER JOIN Question c
            ON b.questionID = c.questionID
GROUP BY a.surveyID 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!3/59623/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:11:40.950

SQL Server 具有`PIVOT`可用于此类查询的函数。如果您知道要转换的值，则可以对这些值进行硬编码：

```
select surveyid, name, [e-mail]
from
(
  select a.answertext,
    q.questiontext,
    s.surveyid
  from survey s
  left join answer a
    on s.surveyid = a.surveyid
  left join question q
    on a.questionid = q.questionid
) src
pivot
(
  max(answertext)
  for questiontext in ([name], [e-mail])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9d404/4)

现在，如果您有未知数量的值，则可以`pivot`对数据使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(questiontext) 
                    from question
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT surveyid, ' + @cols + ' from 
             (
                select a.answertext,
                  q.questiontext,
                  s.surveyid
                from survey s
                left join answer a
                  on s.surveyid = a.surveyid
                left join question q
                  on a.questionid = q.questionid
            ) x
            pivot 
            (
                max(answertext)
                for questiontext in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9d404/5)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T13:16:01.930

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/70983/13)

```
select *
from
(
  select
      s.surveyid,
      q.questionText,
      a.answerText
  from SURVEY as s
      cross join QUESTION as q
      left outer join ANSWER as a on a.questionId = q.questionId and a.surveyId = s.SurveyId
) as M
pivot
(
  min(M.answerText)
  for M.questionText in ([Name], [E-Mail], [Address], [Phone])
) as P 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T13:19:42.023

可能不是 PIVOT 的“正确”用法，但以下方法可以解决问题（req. SQL2005 或更高版本）：

```
SELECT surveryId, [1] AS [name], [2] AS [e-mail]
FROM 
( SELECT a.surveryId, q.QuestionId, a.answerText
FROM dbo.Question q
INNER JOIN dbo.Answer a ON a.questionId = q.QuestionId
) tmp
PIVOT (
    MAX(answerText)
    FOR questionId IN ([1], [2])
) PvtTable 
```

# c# - Dynamically passing and using data to a WPF application without restarting it

> ID：13177595
> 
> 赞同：2
> 
> 时间：2012-11-01T12:58:12.537
> 
> 标签：c#, wpf, events

It's my first post on StackOverflow, so please be patient with me :)

I'm looking out for a way to pass a value to an already running application. The application should be able to accept this value and use it for further operations during its lifetime. I'd prefer not to logoff/restart the application in order to use the updated value.

The scenario would be something like this:

The application uses MachineName to initialize and populate some objects while it is being instantiated. Once it is up and running, I would like to pass a different workstation name to the application (possibly from command line) and the application should be able to use this MachineName and use it further down the line. I dont mind if I have perform same operations again to initialize the required objects with new MachineName name.

The application in question is a WPF app with C#. It's also using some WCF services as well. I was thinking to use a common registry key to store the workstation name and this registry key needs to be used/updated in the application. So it should be the first point of contact. But I'm not sure if this is a better approach. Any ideas please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:03:46.133

使用[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx). 当您的应用收到更改通知时，重新读取文件的内容并更新您的应用状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:48:14.790

首先，我认为你可能有点过于复杂了。如果你需要做的只是给你的应用程序一个新的字符串“MachineName”，那么你有几个选项（这当然不是你的所有选项，只是几个要考虑的）：

1.  由于这是一个 WPF 应用程序，我们可以假设某个用户正在与它进行交互……否则它也可能只是一个控制台应用程序。如果是这种情况，请创建一个视图，让用户能够更改 MachineName。可能是一个 ComboBox 列出了所有可用的 MachineNames 和一个按钮来开始您需要的重新初始化。
2.  您显然已经为服务呼叫做好了准备。您可以让您的应用程序既充当客户端又充当服务，从而允许您远程（阅读：在此应用程序之外）更新您的 MachineName。
3.  您可以将此应用程序设置为监视特定目录或文件（如@jlew 所指出的那样），当该文件发生某些更改时，您的应用程序将读取更改（新的 MachineName）并开始它的重新初始化例程。

我不知道你的全部要求，但我可能会为 1 和 2 设置它，这会给你更多的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:05:17.227

应用程序在启动时监听一个套接字端口或监视一个共享文件，如果应用程序再次带参数调用，只需打开套接字端口或将命令写入文件，第一个应用程序就可以重新初始化。

# macos - 如何在 OS X 10.4 上的 AppleScript 的 do shell 脚本中使用 UTF-8 编码的命令

> ID：13177602
> 
> 赞同：3
> 
> 时间：2012-11-01T12:58:23.807
> 
> 标签：macos, shell, applescript

我有一个程序可以生成一个 shell 脚本并通过苹果脚本运行它。我的输出是 UTF-8 编码的，我无法更改。在 OS X 10.6 及更高版本上运行良好。在 OS X 10.4（Tiger）上，只要我需要处理的文件名/路径包含 é、à、Ü 等变音符号，我的脚本就会失败。（我没有 10.5 可以尝试，所以我不知道关于那个）

我认为这是语言环境的问题。

```
do shell script "locale" 
```

给我：

```
"LANG=
LC_COLLATE=\"C\"
LC_CTYPE=\"C\"
LC_MESSAGES=\"C\"
LC_MONETARY=\"C\"
LC_NUMERIC=\"C\"
LC_TIME=\"C\"
LC_ALL=" 
```

所以我想以以下方式开始我的脚本：

```
export LC_ALL=en_US.UTF-8;
export LANG=en_US.UTF-8; 
```

可能会有所帮助，但事实证明它仍然不起作用。

我还能做些什么来使 utf-8 编码的 shell 脚本在 OS X 10.4 上工作我可以让 UTF-8 以其他方式工作还是可以将其转换为系统使用的默认字符编码？

**编辑：**

原来，从我想到的导出语句开始：

```
export LC_ALL=en_US.UTF-8;
export LANG=en_US.UTF-8; 
```

确实回答了我原来的问题。

这有效：

```
do shell script " export LC_ALL=en_US.UTF-8; export LANG=en_US.UTF-8; touch /ü" 
```

我的问题原来是我需要使用 osascript 才能立即将 shell 返回到生成它的进程，如下所示：

```
set myScriptAsString to "do shell script \" export LC_ALL=en_US.UTF-8; export LANG=en_US.UTF-8; touch /ü\""
do shell script "export LC_ALL=en_US.UTF-8; export LANG=en_US.UTF-8; osascript -e " & quoted form of myScriptAsString & " > /dev/null 2> /dev/null & " 
```

而且无论我将出口放在哪里，它都不适用于 osascript...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:04:30.373

**在OS X 10.5**上没问题

 ****当字符串包含扩展的 ASCII 字符时， OS X 10.4**上的`osascript`命令无法正确处理 UTF-8 编码文本。

 **解决方案：使用`MacRoman`编码，`osascript`处理没有问题。

```
set myScriptAsString to quoted form of "do shell script \"touch /ü\""
do shell script "tString=$(echo " & myScriptAsString & "| iconv -t MACROMAN -f UTF8-MAC); osascript -e \"$tString\" > /dev/null 2> /dev/null & " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-01T17:07:18.570

你让我免于自杀……不是在尝试使用自动化服务脚本处理 SublimeText 并使用 pbcopy 复制的数小时内……我很久以前就尝试过。没有。我现在就做

```
`echo '#{s.sub(/\s+$/, '')}'  | iconv -t MACROMAN -f UTF8-MAC  | pbcopy` 
```

## 谢谢！****

# asp.net - Asp.net 代码无法用于实现 rijndael 加密、解密？

> ID：13177605
> 
> 赞同：0
> 
> 时间：2012-11-01T12:58:32.583
> 
> 标签：asp.net, security, webforms, rijndaelmanaged

我正在阅读一本名为从 wrox 开始 asp.net 安全性的书，我在这一部分中，它显示了使用 rijndael 的代码片段，该示例未包含在可下载的源代码中。我决定在论坛中寻求（专业）帮助。

如果您也尝试测试它，并希望给出一个关于我如何实现它的示例（代码），那就太棒了。

这是代码：

```
public class EncryptionRijndael
{
        public EncryptionRijndael()
        {
                //
                // TODO: Add constructor logic here
                //
        }

    public static byte[] GenerateRandomBytes(int length)
    {
        byte[] key = new byte[length];
        RNGCryptoServiceProvider provider = new RNGCryptoServiceProvider();
        provider.GetBytes(key);
        return key;
    }

    public void GetKeyAndIVFromPasswordAndSalt(string password, byte[] salt,SymmetricAlgorithm symmetricAlgorithm,ref byte[] key, ref byte[] iv)
    {
        Rfc2898DeriveBytes rfc2898DeriveBytes =
        new Rfc2898DeriveBytes(password, salt);
        key =
        rfc2898DeriveBytes.GetBytes(symmetricAlgorithm.KeySize / 8);
        iv =
        rfc2898DeriveBytes.GetBytes(symmetricAlgorithm.BlockSize / 8);
    }

    public static byte[] Encrypt(byte[] clearText, byte[] key, byte[] iv)
    {
        // Create an instance of our encyrption algorithm.
        RijndaelManaged rijndael = new RijndaelManaged();
        // Create an encryptor using our key and IV
        ICryptoTransform transform = rijndael.CreateEncryptor(key, iv);
        // Create the streams for input and output
        MemoryStream outputStream = new MemoryStream();
        CryptoStream inputStream = new CryptoStream(
        outputStream,
        transform,
        CryptoStreamMode.Write);
        // Feed our data into the crypto stream.
        inputStream.Write(clearText, 0, clearText.Length);
        // Flush the crypto stream.
        inputStream.FlushFinalBlock();
        // And finally return our encrypted data.
        return outputStream.ToArray();
    }

    static byte[] Decrypt(byte[] cipherText, byte[] key, byte[] iv)
    {
        // Create an instance of our encyrption algorithm.
        RijndaelManaged rijndael = new RijndaelManaged();
        // Create an decryptor using our key and IV ;
        ICryptoTransform transform = rijndael.CreateDecryptor(key, iv);
        // Create the streams for input and output
        MemoryStream outputStream = new MemoryStream();
        CryptoStream inputStream = new CryptoStream(outputStream,transform,CryptoStreamMode.Write);
        // Feed our data into the crypto stream.
        inputStream.Write(cipherText, 0, cipher.Length);
        // Flush the crypto stream.
        inputStream.FlushFinalBlock();
        // And finally return our decrypted data.
        return outputStream.ToArray();
    }
} 
```

先生/女士，您的回答会很有帮助。谢谢++（如果你能告诉我如何正确调用加密和解密，那就太棒了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:10:49.597

我发现最好创建一个类来包装您的凭据，并创建一个单独的类来进行加密。这是我创建的...抱歉，它是在 vb 而不是 c# 中：

```
 Public Class SymmetricEncryptionCredentials
        Private _keyIterations As Integer

        Public ReadOnly Property ivString As String
            Get
                Return Convert.ToBase64String(Me.iv)
            End Get
        End Property
        Public ReadOnly Property saltString() As String
            Get
                Return Convert.ToBase64String(Me.salt)
            End Get
        End Property
        Public ReadOnly Property keyIterations As Integer
            Get
                Return _keyIterations
            End Get
        End Property

        Private Property keyPassword() As String
        Private Property salt() As Byte()
        Private ReadOnly Property key() As Security.Cryptography.Rfc2898DeriveBytes
            Get
                Return New Security.Cryptography.Rfc2898DeriveBytes(keyPassword, salt, keyIterations)
            End Get
        End Property
        Private Property iv() As Byte()

        ''' <summary>
        ''' Creates a set of encryption credentials based on the 
        ''' provided key, ivPassword, and salt string.
        ''' </summary>
        ''' <param name="keyPassword">The Secret key used for encryption</param>
        ''' <param name="salt">The salt string (not secret) from which the salt
        ''' bytes are derived.</param>
        ''' <remarks></remarks>
        Public Sub New(ByVal keyPassword As String, ByVal salt As String, ByVal iv As String, ByVal keyIterations As Integer)

            Me.keyPassword = keyPassword
            Me.iv = Convert.FromBase64String(iv)
            Me.salt = Convert.FromBase64String(salt)
            _keyIterations = keyIterations
        End Sub
        ''' <summary>
        ''' Creates a new set of encryption credentials based on the
        ''' provided key, while making a ivPassword and salt.
        ''' </summary>
        ''' <param name="keyPassword">The Secret key used for encryption</param>
        ''' <remarks>Creates a new set of encryption credentials based on the
        ''' provided key password, while making a ivPassword and salt.</remarks>
        Public Sub New(ByVal keyPassword As String, ByVal keyIterations As Integer)
            Me.keyPassword = keyPassword
            Me.iv = Passwords.GetRandomPassword(16, 16)
            Me.salt = Passwords.GetRandomPassword()
            _keyIterations = keyIterations
        End Sub
        ''' <summary>
        ''' Creates a new set of encryption credentials based on the
        ''' provided key, while making a ivPassword and salt. Uses
        ''' default PBKDF iteration count.
        ''' </summary>
        ''' <param name="keyPassword">The Secret key used for encryption</param>
        ''' <remarks>Creates a new set of encryption credentials based on the
        ''' provided key password, while making a ivPassword and salt.</remarks>
        Public Sub New(ByVal keyPassword As String)
            Me.New(keyPassword, AppSettings("defaultKeyPBKDFIterations"))
        End Sub
        ''' <summary>
        ''' Gets an AES Encryptor with key derived from RFC2898.
        ''' </summary>
        ''' <returns></returns>
        ''' <remarks></remarks>
        Public Function GetAESEncryptor() As Security.Cryptography.ICryptoTransform

            Dim aes As New Security.Cryptography.AesManaged

            aes.KeySize = 256
            aes.Key = Me.key.GetBytes(aes.KeySize / 8)
            aes.IV = Me.iv
            Return aes.CreateEncryptor()

        End Function
        Public Function GetAESDecryptor() As Security.Cryptography.ICryptoTransform

            Dim aes As New Security.Cryptography.AesManaged
            aes.KeySize = 256
            aes.Key = Me.key.GetBytes(aes.KeySize / 8)
            aes.IV = Me.iv
            Return aes.CreateDecryptor

        End Function

    End Class

 Public Class SymmetricEncryption
        Public Shared Function Encrypt(ByVal unencryptedValue As String, creds As SymmetricEncryptionCredentials) As String
            Dim inBytes() As Byte = System.Text.Encoding.UTF8.GetBytes(unencryptedValue)
            Dim outBytes() As Byte

            Using outStream As New IO.MemoryStream()
                Using encryptStream As New System.Security.Cryptography.CryptoStream(outStream, creds.GetAESEncryptor, Security.Cryptography.CryptoStreamMode.Write)
                    encryptStream.Write(inBytes, 0, inBytes.Length)
                    encryptStream.FlushFinalBlock()
                    outBytes = outStream.ToArray
                    encryptStream.Close()

                End Using
                outStream.Close()
            End Using
            Dim outString As String = Convert.ToBase64String(outBytes)

            Return outString
        End Function
        Public Shared Function Decrypt(ByVal encryptedValue As String, creds As SymmetricEncryptionCredentials) As String

            Dim inBytes() As Byte = Convert.FromBase64String(encryptedValue)
            Dim outString As String
            Using outStream As New IO.MemoryStream
                Using decryptionStream As New System.Security.Cryptography.CryptoStream(outStream, creds.GetAESDecryptor, Security.Cryptography.CryptoStreamMode.Write)
                    decryptionStream.Write(inBytes, 0, inBytes.Length)
                    decryptionStream.FlushFinalBlock()

                    Dim outBytes() As Byte = outStream.ToArray

                    outString = System.Text.Encoding.UTF8.GetString(outBytes)
                    decryptionStream.Close()
                End Using
                outStream.Close()
            End Using
            Return outString
        End Function
    End Class

  Public Class Passwords

        Public Shared Function GetRandomPassword(minLength As Integer, maxlength As Integer) As Byte()
            ' ***   1\.  Get how long the password will be
            Dim rand As New Random
            Dim passLength As Integer = rand.Next(minLength, maxlength)

            ' ***   2\.  Create an array of Bytes to hold the 
            '           random numbers used to make the string's chars
            Dim passBytes(passLength - 1) As Byte

            ' ***   3\.  Fill the array with random bytes.
            Dim rng As New Security.Cryptography.RNGCryptoServiceProvider
            rng.GetBytes(passBytes)

            Return passBytes

        End Function
        Public Shared Function GetRandomPassword() As Byte()

            Return GetRandomPassword(12, 32)

        End Function
End Class 
```

# hibernate - 使用复合键一对一休眠

> ID：13177611
> 
> 赞同：0
> 
> 时间：2012-11-01T12:58:52.887
> 
> 标签：hibernate, mapping, one-to-one, composite-primary-key

我的映射文件有问题，涉及一对一关系，复合主键，其中键的字段名称不匹配。

表格1：

```
<class entity-name="CompPkTest" table="compPkTest" catalog="data" mutable="true" polymorphism="implicit" dynamic-update="false" dynamic-insert="false" select-before-update="false" optimistic-lock="version">
<composite-id mapped="false" unsaved-value="undefined">
  <key-property name="id1" type="int">
    <column name="id1"/>
  </key-property>
  <key-property name="id2" type="int">
    <column name="id2"/>
  </key-property>
</composite-id>
<property name="details" type="string" unique="false" optimistic-lock="true" lazy="false" generated="never">
  <column name="Details" length="500"/>
</property>
<one-to-one name="CompPkTestDetail" entity-name="CompPkTestDetail" constrained="false" embed-xml="true"/> 
```

表 2：

```
<class entity-name="CompPkTestDetail" table="compPkTestDetail" catalog="data" mutable="true" polymorphism="implicit" dynamic-update="false" dynamic-insert="false" select-before-update="false" optimistic-lock="version">
<composite-id mapped="false" unsaved-value="undefined">
  <key-property name="idetail1" type="int">
    <column name="idetail1"/>
  </key-property>
  <key-property name="idetail2" type="int">
    <column name="idetail2"/>
  </key-property>
</composite-id>
<one-to-one name="CompPkTest" entity-name="CompPkTest" constrained="true" embed-xml="true"/>
<property name="someDetail" type="string" unique="false" optimistic-lock="true" lazy="false" generated="never">
  <column name="someDetail" length="300"/>
</property>
<property name="moreDetail" type="string" unique="false" optimistic-lock="true" lazy="false" generated="never">
  <column name="moreDetail" length="300"/>
</property> 
```

问题是查询表1时，“details”属性为空。如果我将 CompPkTestDetail 中的键属性名称更改为 id1 和 id2（同时保持列名不变），则关系按预期工作，并且查询返回“详细信息”的值。

我的问题：

上述映射 xml 是否是建立这种关联的正确方法（使用不匹配的字段名称）？

hibernate 强制字段名称必须匹配是否正确，或者这是一个错误？

请注意，在我的应用程序中没有实体类，并且休眠处于地图模式。我的应用程序可以完全动态地访问（任意）数据库，因此映射的 xml 是在运行时生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:39:31.807

```
<class entity-name="CompPkTest" table="compPkTest" >
  <composite-id>
    <key-property name="id1" column="id1"/>
    <key-property name="id2" column="id2"/>
  </composite-id>
  <one-to-one name="CompPkTestDetail" entity-name="CompPkTestDetail" property-ref="Parent"/>
</class>

<class entity-name="CompPkTestDetail" table="compPkTestDetail">
  <composite-id>
    <key-many-to-one name="Parent" entity-name="CompPkTest" >
      <column name="idetail1"/>
      <column name="idetail2"/>
    </key-many-to-one>
  </composite-id>
  <!--maybe needed if property-ref does not find the id property-->
  <property name="Parent" insert="false" update="false">
    <column name="idetail1"/>
    <column name="idetail2"/>
  </property>
</class> 
```

`Detail`应该有一个对其父级的正常引用和对它的引用`Master`。我不确定您是否必须在与 Parent 属性的一对一中指定 property-ref

# c# - 如果我们在其中使用“set”，选择查询是否会更改列数据值

> ID：13177612
> 
> 赞同：0
> 
> 时间：2012-11-01T12:58:51.623
> 
> 标签：c#, sql, sql-server-2008, stored-procedures

参考我的[上一个问题](https://stackoverflow.com/questions/13176567/temporary-sql-datafield/13177257#13177257)，有人在选择查询中说，如果我为表设置列数据值，它将不会在存储过程中更新表中的列值，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:00:14.233

不，不是的。选择查询只会返回该值，不会更新表中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:33:52.383

选择查询不能用于设置列值，您可以为此使用更新语句。但是您可以设置变量值，例如：
`declare @i int, @j int
select @i=1, @j=2`

所以它可以在那里工作，但不能在表格列上工作。

# ruby-on-rails - ruby on rails 连接条件（带 squeel）

> ID：13177615
> 
> 赞同：0
> 
> 时间：2012-11-01T12:58:57.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, squeel

我正在尝试使用 Squeel 来比较连接表之间的属性以及一些数学运算。

下面是一个查询示例：

```
Parent.joins{[child1, child2.grandchildren]}.
where{grandchildren.birth_datetime > Time.now - child1.age.years} 
```

我从 Squeel 收到一条错误消息，提示“TypeError: can't convert Squeel::Nodes::KeyPath into an exact number”

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:22:01.707

做

```
Parent.
  joins{[child1, child2.grandchildren]}.
  where{child2.grandchildren.birth_datetime > (Time.current - child1.age.years)} 
```

做这个把戏？

# api - 如何从谷歌地图 api 中查找坐标以在地图中显示数据库中的标记

> ID：13177617
> 
> 赞同：0
> 
> 时间：2012-11-01T12:59:03.910
> 
> 标签：api

我有一个搜索页面，我在其中将我的数据库中的属性显示为谷歌地图中的标记。现在我想修改这个搜索页面，以便任何用户都可以在谷歌地图中绘制一个圆形或多边形，并且只会在选定区域（由用户自己绘制）中从我们的数据库中获取属性。到目前为止，我在这里附上了我的代码。

图像中的圆圈显示所选区域，结果必须显示所选区域中可用的属性。我的表包含每个属性的纬度和经度 2 个不同的字段。

**Javascript代码：**

```
 <script type="text/javascript">
    var drawingManager;
    var all_overlays = [];
    var selectedShape;
    var colors = ['#1E90FF', '#FF1493', '#32CD32', '#FF8C00', '#4B0082'];
    var selectedColor;
    var colorButtons = {};

    function clearSelection() {
        if (selectedShape) {
            selectedShape.setEditable(false);
            selectedShape = null;
        }
    }

    function setSelection(shape) {
        clearSelection();
        selectedShape = shape;
        shape.setEditable(true);
        selectColor(shape.get('fillColor') || shape.get('strokeColor'));
    }

    function deleteSelectedShape() {
        if (selectedShape) {
            selectedShape.setMap(null);
        }
    }

    function deleteAllShape() {
        for (var i = 0; i < all_overlays.length; i++) {
            all_overlays[i].overlay.setMap(null);
        }
        all_overlays = [];
    }

    function selectColor(color) {
        selectedColor = color;
        for (var i = 0; i < colors.length; ++i) {
            var currColor = colors[i];
            colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
        }

        // Retrieves the current options from the drawing manager and replaces the
        // stroke or fill color as appropriate.
        var polylineOptions = drawingManager.get('polylineOptions');
        polylineOptions.strokeColor = color;
        drawingManager.set('polylineOptions', polylineOptions);

        var rectangleOptions = drawingManager.get('rectangleOptions');
        rectangleOptions.fillColor = color;
        drawingManager.set('rectangleOptions', rectangleOptions);

        var circleOptions = drawingManager.get('circleOptions');
        circleOptions.fillColor = color;
        drawingManager.set('circleOptions', circleOptions);

        var polygonOptions = drawingManager.get('polygonOptions');
        polygonOptions.fillColor = color;
        drawingManager.set('polygonOptions', polygonOptions);
    }

    function setSelectedShapeColor(color) {
        if (selectedShape) {
            if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
                selectedShape.set('strokeColor', color);
            } else {
                selectedShape.set('fillColor', color);
            }
        }
    }

    function makeColorButton(color) {
        var button = document.createElement('span');
        button.className = 'color-button';
        button.style.backgroundColor = color;
        google.maps.event.addDomListener(button, 'click', function () {
            selectColor(color);
            setSelectedShapeColor(color);
        });

        return button;
    }

    function buildColorPalette() {
        var colorPalette = document.getElementById('color-palette');
        for (var i = 0; i < colors.length; ++i) {
            var currColor = colors[i];
            var colorButton = makeColorButton(currColor);
            colorPalette.appendChild(colorButton);
            colorButtons[currColor] = colorButton;
        }
        selectColor(colors[0]);
    }

    function initialize() {
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 6,
            center: new google.maps.LatLng(22, 77),
            mapTypeId: google.maps.MapTypeId.HYBRID,
            disableDefaultUI: true,
            zoomControl: true
        });

        var polyOptions = {
            strokeWeight: 0,
            fillOpacity: 0.45,
            editable: true
        };
        // Creates a drawing manager attached to the map that allows the user to draw
        // markers, lines, and shapes.
        drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.POLYGON,
            markerOptions: {
                draggable: true
            },
            polylineOptions: {
                editable: true
            },
            rectangleOptions: polyOptions,
            circleOptions: polyOptions,
            polygonOptions: polyOptions,
            map: map
        });

        google.maps.event.addListener(drawingManager, 'overlaycomplete', function (e) {
            all_overlays.push(e);
            if (e.type != google.maps.drawing.OverlayType.MARKER) {
                // Switch back to non-drawing mode after drawing a shape.
                drawingManager.setDrawingMode(null);

                // Add an event listener that selects the newly-drawn shape when the user
                // mouses down on it.
                var newShape = e.overlay;
                newShape.type = e.type;
                google.maps.event.addListener(newShape, 'click', function () {
                    setSelection(newShape);
                });
                setSelection(newShape);
            }
        });

        // Clear the current selection when the drawing mode is changed, or when the
        // map is clicked.
        google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
        google.maps.event.addListener(map, 'click', clearSelection);
        google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);
        google.maps.event.addDomListener(document.getElementById('delete-all-button'), 'click', deleteAllShape);

        buildColorPalette();
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

上面的代码包含一些事件来处理搜索页面中的用户交互以绘制圆、多边形以在选定区域中搜索属性。

图像中的显示属性按钮必须在选定区域中显示属性标记。

我将如何获得圆形或多边形选定区域的纬度和经度？
我将如何查询我的数据库以获取该坐标范围？

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T14:29:26.673

我想自从您发布此问题以来，您已经找到了解决方案。但是，如果其他人需要答案，您可以通过以下方式获取绘图多边形的纬度/经度：

```
google.maps.event.addDomListener(drawingManager, 'polygoncomplete', function(polygon) {
    var polygonBounds = polygon.getPath();
} 
```

多边形的每个顶点的边界现在都在`polygonBounds`，只需迭代它并使用 lat / lng 做你想做的事

对于一个圆，您只需要中心的 lat / lng 及其半径

```
google.maps.event.addListener(drawingManager, 'circlecomplete', function(circle) {
        var radius = circle.getRadius();
        var center = circle.getCenter();
} 
```

希望它可以帮助某人

PS：我使用的是 GoogleMaps v3.14，我从未测试过其他版本。

# iphone - iOS API Kal 不能与 iPhone 5 一起编译

> ID：13177625
> 
> 赞同：0
> 
> 时间：2012-11-01T12:59:23.277
> 
> 标签：iphone, ios, calendar, ios-simulator

我在我的项目中使用 iOS Kal API。当我尝试使用我的 iPhone 4S 或 iPhone 5 Simulator 编译和运行该项目时，它运行良好，但是当我使用真正的 iPhone 5 尝试它时，我收到此错误：

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/sebliberal/Dropbox/Appli FACE 06/Version iPhone/FACE06/Twitter+OAuth/Libraries & Headers/libOAuth.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经搜索过这个错误，我将“仅构建活动架构”设置为“是”但我仍然有错误..有什么问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:16:59.920

阅读： [Framework (RestKit) 与 armv7s 不兼容](https://stackoverflow.com/questions/12493241/framework-restkit-not-compatible-with-armv7s)

这： [AdMob ARMv7s 支持](https://stackoverflow.com/questions/12569457/admob-armv7s-support)

或者这个： [iOS - 文件不包含 armv7s 切片](https://stackoverflow.com/questions/12737736/ios-file-does-not-contain-an-armv7s-slice)

或者是 SO 和互联网上的众多答案之一。

简短的回答是您需要更新您的库或从您支持的架构中删除 armv7s。

# java - 在android中打开缓存文件

> ID：13177628
> 
> 赞同：0
> 
> 时间：2012-11-01T12:59:27.880
> 
> 标签：java, android, java-io, android-file

我想打开一个我写的复制到我的*cacheDir*的文件（例如音频文件或图像），但似乎其他应用程序没有对该目录的权限。这很合理（我的逻辑告诉我只有 root 和应用程序可以访问这个文件夹），但是这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:07:28.427

好吧，这很明显，我的朋友，使用 activity.getExternalCacheDir() 获取 SD 卡上的缓存目录。只是不要忘记设置权限。

# android - 适用于 Android 的集中式排行榜

> ID：13177633
> 
> 赞同：3
> 
> 时间：2012-11-01T12:59:43.073
> 
> 标签：android, leaderboard

Android 是否提供像 Apple 的 Game Center 排行榜一样的集中排行榜功能？（这样就不需要使用 OpenFeint 之类的 3rd 方服务）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:04:21.733

没有像集中排行榜或其他统计数据这样的功能。您应该使用 Swarm 或 OpenFeint 等第三方库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:09:16.413

不，android 没有类似的服务。使用第三方，如 ScoreLoop、Crystal 或 OpenFeint（似乎有人买了它，现在叫 GREE）

# javascript - browserAction.setBadgeText 在 tabs.executeScript 回调中使用时未执行

> ID：13177635
> 
> 赞同：2
> 
> 时间：2012-11-01T12:59:47.787
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发我的第一个 Chrome 扩展程序。我有一个`popup.html`加载的默认弹出窗口`popup.js`。

我使用了 serg对Chrome 的 tabs.executeScript 的[回答](https://stackoverflow.com/a/4979785/727074)[——传递参数和使用库？](https://stackoverflow.com/questions/4976996/chromes-tabs-executescript-passing-parameters-and-using-libraries)作为弹出窗口->页面交互的灵感。

问题是以下点击处理程序`popup.js`有效：

```
function click(e) {
    chrome.browserAction.setBadgeText ( { text: "loading" } );
    chrome.tabs.executeScript(null,
        {code:"globalVarName = {'scriptOptions': {...}};" },
        chrome.tabs.executeScript(null, {file: "js/script.js"},
            chrome.browserAction.setBadgeText ( { text: "done" } ))
    );
    window.close();
} 
```

但以下没有：

```
function click(e) {
    chrome.browserAction.setBadgeText ( { text: "loading" } );
    chrome.tabs.executeScript(null,
        {code:"globalVarName = {'scriptOptions': {...}};" },
        chrome.tabs.executeScript(null, {file: "js/script.js"},
            function(){chrome.browserAction.setBadgeText ( { text: "done" } );})
    );
    window.close();
} 
```

我希望能够在完成时做不止一件事。

### 编辑：

我已经意识到第一个案例会立即执行`chrome.browserAction.setBadgeText()`，而不是在脚本完成执行时执行。所以这种情况可以忽略。我已经改写了问题标题以反映这一点。

我正在寻找的是为什么第二种情况的回调根本不执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:01:16.423

我很确定这里的罪魁祸首是`window.close()`关闭弹出窗口。执行此代码的同一弹出窗口（除了`script.js`在实际页面上执行的弹出窗口）。

因此，回调从未被执行。我当然只是在这里谈论案例 2（请参阅我对问题的编辑）。

我为任何未来访问者提供的最新完整工作代码：

```
var tabId = null;
function click(e) {
    chrome.browserAction.setBadgeText ( { text: "..." } );
    chrome.tabs.executeScript(tabId, 
        {code:"globalVarName= {...}" }, 
        function(){ 
            chrome.tabs.executeScript(tabId, {file: "js/script.js"},
                function(){chrome.browserAction.setBadgeText ( { text: "done" } );
                    setTimeout(function() { 
                        chrome.browserAction.setBadgeText ( { text: "" } ); 
                    }, 1000);
                }
            ); 
        } 
    );
} 
```

*另请注意，脚本的路径（`script.js`此处）是相对于扩展源根目录的，即位于的`manifest.json`位置。*

# solr - nutch 1.5.1 solrindex java.io.IOException：作业失败

> ID：13177637
> 
> 赞同：1
> 
> 时间：2012-11-01T12:59:58.067
> 
> 标签：solr, import, nutch

当我尝试在我的 sles 11 系统上使用以下命令时：

```
bin/nutch solrindex http://127.0.0.1:8983/solr/ crawl/crawldb -linkdb crawl/linkdb crawl/segments/* 
```

我收到此错误：java.io.IOException：作业失败！

我正在使用 Nutch 1.5.1 和 Solr 1.6.0。

我能找到的唯一日志是 hadoop.log，它显示了以下我：

```
2012-11-01 13:42:38,375 INFO  solr.SolrIndexer - SolrIndexer: starting at 2012-11-01 13:42:38
2012-11-01 13:42:38,915 INFO  indexer.IndexerMapReduce - IndexerMapReduce: crawldb: crawl/crawldb
2012-11-01 13:42:38,915 INFO  indexer.IndexerMapReduce - IndexerMapReduce: linkdb: crawl/linkdb
2012-11-01 13:42:38,915 INFO  indexer.IndexerMapReduce - IndexerMapReduces: adding segment: crawl/segments/20121101124801
2012-11-01 13:42:39,558 INFO  indexer.IndexerMapReduce - IndexerMapReduces: adding segment: crawl/segments/20121101125604
2012-11-01 13:42:39,599 INFO  indexer.IndexerMapReduce - IndexerMapReduces: adding segment: crawl/segments/20121101130601
2012-11-01 13:42:40,083 WARN  util.NativeCodeLoader - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2012-11-01 13:42:43,811 INFO  plugin.PluginRepository - Plugins: looking in: /srv/apache-nutch-1.5.1/plugins
2012-11-01 13:42:44,760 INFO  plugin.PluginRepository - Plugin Auto-activation mode: [true]
2012-11-01 13:42:44,760 INFO  plugin.PluginRepository - Registered Plugins:
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         the nutch core extension points (nutch-extensionpoints)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Basic URL Normalizer (urlnormalizer-basic)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Html Parse Plug-in (parse-html)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Basic Indexing Filter (index-basic)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         HTTP Framework (lib-http)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Pass-through URL Normalizer (urlnormalizer-pass)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Regex URL Filter (urlfilter-regex)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Http Protocol Plug-in (protocol-http)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Regex URL Normalizer (urlnormalizer-regex)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Tika Parser Plug-in (parse-tika)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         OPIC Scoring Plug-in (scoring-opic)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         CyberNeko HTML Parser (lib-nekohtml)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Anchor Indexing Filter (index-anchor)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Regex URL Filter Framework (lib-regex-filter)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository - Registered Extension-Points:
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Nutch URL Normalizer (org.apache.nutch.net.URLNormalizer)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Nutch Protocol (org.apache.nutch.protocol.Protocol)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Nutch Segment Merge Filter (org.apache.nutch.segment.SegmentMergeFilter)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Nutch URL Filter (org.apache.nutch.net.URLFilter)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Nutch Indexing Filter (org.apache.nutch.indexer.IndexingFilter)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         HTML Parse Filter (org.apache.nutch.parse.HtmlParseFilter)
2012-11-01 13:42:44,770 INFO  plugin.PluginRepository -         Nutch Content Parser (org.apache.nutch.parse.Parser)
2012-11-01 13:42:44,771 INFO  plugin.PluginRepository -         Nutch Scoring (org.apache.nutch.scoring.ScoringFilter)
2012-11-01 13:42:44,815 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:42:44,822 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:42:44,822 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:42:54,725 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:42:54,725 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:42:54,725 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:43:03,827 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:03,827 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:03,827 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:43:12,518 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:12,518 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:12,518 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:43:24,757 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:24,758 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:24,758 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:43:34,697 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:34,698 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:34,698 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:43:44,882 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:44,882 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:44,882 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:43:50,458 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:50,458 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:50,458 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-11-01 13:43:59,148 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:43:59,148 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:43:59,148 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:04,299 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:44:04,299 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:44:04,299 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:11,093 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:44:11,093 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:44:11,093 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:19,633 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:44:19,633 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:44:19,633 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:30,885 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:44:30,885 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:44:30,885 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:39,637 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:44:39,637 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:44:39,637 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:47,905 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter
2012-11-01 13:44:47,906 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off
2012-11-01 13:44:47,906 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter
2012-11-01 13:44:48,104 INFO  solr.SolrMappingReader - source: content dest: content
2012-11-01 13:44:48,105 INFO  solr.SolrMappingReader - source: title dest: title
2012-11-01 13:44:48,105 INFO  solr.SolrMappingReader - source: host dest: host
2012-11-01 13:44:48,105 INFO  solr.SolrMappingReader - source: segment dest: segment
2012-11-01 13:44:48,106 INFO  solr.SolrMappingReader - source: boost dest: boost
2012-11-01 13:44:48,106 INFO  solr.SolrMappingReader - source: digest dest: digest
2012-11-01 13:44:48,106 INFO  solr.SolrMappingReader - source: tstamp dest: tstamp
2012-11-01 13:44:48,106 INFO  solr.SolrMappingReader - source: url dest: id
2012-11-01 13:44:48,107 INFO  solr.SolrMappingReader - source: url dest: url
2012-11-01 13:44:48,398 INFO  solr.SolrWriter - Indexing 11 documents
2012-11-01 13:44:49,082 WARN  mapred.LocalJobRunner - job_local_0001
org.apache.solr.common.SolrException: Severe errors in solr configuration.  Check your log files for more detailed information on what may be wrong.  If you want solr to continue after configuration errors, change:    <abortOnConfigurationError>false</abortOnConfigurationError>  in solr.xml  ------------------------------------------------------------- org.apache.solr.common.SolrException: Schema Parsing Failed: multiple points         at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:688)  at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:123)      at org.apache.solr.core.CoreContainer.create(CoreContainer.java:481)    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335)      at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219)      at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)  at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)         at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:713)         at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)         at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)       at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)      at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)      at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.Server.doSt

Severe errors in solr configuration.  Check your log files for more detailed information on what may be wrong.  If you want solr to continue after configuration errors, change:    <abortOnConfigurationError>false</abortOnConfigurationError>  in solr.xml  ------------------------------------------------------------- org.apache.solr.common.SolrException: Schema Parsing Failed: multiple points       at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:688)  at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:123)      at org.apache.solr.core.CoreContainer.create(CoreContainer.java:481)    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335)      at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219)      at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)  at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)         at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:713)         at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)     at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)         at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)       at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)      at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)      at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)     at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)    at org.mortbay.jetty.Server.doSt

request: http://localhost:8983/solr/update?wt=javabin&version=2
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
        at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
        at org.apache.nutch.indexer.solr.SolrWriter.close(SolrWriter.java:142)
        at org.apache.nutch.indexer.IndexerOutputFormat$1.close(IndexerOutputFormat.java:48)
        at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.close(ReduceTask.java:466)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:530)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
2012-11-01 13:45:01,864 ERROR solr.SolrIndexer - java.io.IOException: Job failed! 
```

正如它所说，我检查了一个 solr 日志，但我找不到一个：/ 对此有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:57:23.857

1.  检查 Nutch 和 SOLR 端的架构是否相同
2.  更改为 schema.xml（第二个“.”导致问题 - 1.5.1 的错误）
3.  如果错误仍然存​​在，请检查下载并使用 SOLR 3.4.0，因为 Nutch 1.5.1 使用 SOLR 3.4.0 客户端 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T22:05:34.510

如果向下滚动，您会看到它在抱怨 schema.xml 错误。您可以发布您的 schema.xml 文件，我会寻找问题。我来这里是为了寻找 hadoop 原生平台错误的解决方案。

# jquery - 同时使用 CSS 过渡和 jQuery 动画

> ID：13177648
> 
> 赞同：2
> 
> 时间：2012-11-01T13:00:52.737
> 
> 标签：jquery, css

我正在试验 CSS 过渡和 jQuery UI 函数。在我回答我的问题之前，请查看以下演示。

1.  当您将鼠标悬停在[此](http://kode.co.nf/onlycss/)页面中的链接上时出现的效果**仅**使用CSS 过渡完成。

2.  在[这个](http://kode.co.nf/onlyjs/)页面中，我**只**使用jQuery 创建了相同的效果（注释掉了 CSS 转换规则）。

3.  [在这里](http://kode.co.nf/both/)，我只保留了 CSS 和 jQuery 代码原样，并注意到由于在 CSS 和 jQuery 中触发了两个事件（*我认为*），动画有相当大的延迟。

现在我的问题是我怎样才能同时保留它们并在用户的浏览器中有效地使用一种方法？例如，

*   当用户打开页面并且他的浏览器 **禁用**了 JavaScript时，它会运行 CSS 方法。
*   如果用户的浏览器不支持 CSS 过渡，它会运行 JavaScript 方法。

我怎样才能做到这一点？

**编辑 :** : 我阅读了有关 Modernizer 的信息，但如果在用户的浏览器中禁用 JavaScript，它不会有太大的好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:12:38.193

你考虑过使用[Modernizr](http://modernizr.com/)吗？

```
if(!Modernizr.csstransitions) { // Test if CSS transitions are supported
            $(function() {
                //animate
            });
        } 
```

# html - 当我滚动我的网站时，左侧栏与固定顶部菜单重叠？

> ID：13177649
> 
> 赞同：0
> 
> 时间：2012-11-01T13:00:56.887
> 
> 标签：html, css, web-services, web-applications, dhtml

当我滚动我的网站时，所有内容都在顶部固定菜单下方，但只有左侧栏与它重叠。谁能告诉我哪里做错了？？？？？？这是我的网站。[http://www.techonicals.com](http://www.techonicals.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:04:16.387

将 z-index 添加到您的菜单中，这将解决您的问题：

```
.menu {z-index:10000;} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T13:15:50.347

在 css 文件集中`.menu {z-index:1}`或超过 1 个 :о)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T13:53:27.237

您必须使用`z-index`高价值结帐此站点 [http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

您可以在此处检查最大值以及超出时会发生什么

[http://www.puidokas.com/max-z-index/](http://www.puidokas.com/max-z-index/)

# tapestry - 如何使用@Import 导入多个样式表

> ID：13177656
> 
> 赞同：1
> 
> 时间：2012-11-01T13:01:05.417
> 
> 标签：tapestry

目前我在我的班级上面有这个：

```
@Import(stylesheet="context:/styles/stylesheet1.css") 
```

但我需要为此页面导入更多样式。

如何使用@Import 导入多个样式表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:36:17.920

找到了解决方案：

```
@Import(stylesheet = {"path-to-stylesheet","path-to-stylesheet"}) 
```

# android - android横向双窗格调整大小

> ID：13177660
> 
> 赞同：2
> 
> 时间：2012-11-01T13:01:15.173
> 
> 标签：android, pane

我有一个应用程序，它基本上是一个 listView，当一个项目被选中时，它会显示一个详细信息屏幕。在横向中，我拆分屏幕，以便左侧窗格包含 listView，右侧窗格包含左侧所选项目的详细信息。双模式比例拆分为 45:55，在布局 xml 中硬编码。我想让用户能够根据自己的喜好更改比例。首选项中的某种设置就可以了。更好的是实际上在屏幕上的“小部件”，他们可以通过滑动来改变比例。我还没有找到实现这一目标的方法。有没有人有任何想法？

# java - Java Master - 远程从属工作库

> ID：13177662
> 
> 赞同：1
> 
> 时间：2012-11-01T13:01:25.070
> 
> 标签：java, remoting, agent, slave

我正在设计一个 Java 框架，该框架应该有一个由 master 组成的组件，该组件可以将 slave 放置在可通过 ssh 访问的远程机器上。此外，一旦从站启动，它应该连接到主站。最后，master 应该能够将可序列化的 POJO 传递给 slave，slave 将盲目执行并返回结果。

我知道这是一个完全相同的要求，即 Jenkins 控制器如何与其代理节点“对话”。我尝试只重用奴隶，但它似乎并不直截了当。

鉴于这些信息，

1.  是否已经有提供此功能的开源框架（JADE 除外）
2.  是否已经尝试在 OSS 社区中使用 slave 来构建它

# vb.net - 简单地从字符串中获取首字母 - Visual Basic

> ID：13177664
> 
> 赞同：3
> 
> 时间：2012-11-01T13:01:25.773
> 
> 标签：vb.net

简单的初学者练习：

有一个输入框，您可以在其中输入以空格分隔的姓名，然后从名字和姓氏中获取第一个字母并将其输出到标签

即（乔鲍勃）= JB

* * *

我知道这可以用数组来完成，但练习更多的是使用字符串函数，如 substring、IndexOf、Remove、Replace 等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:12:12.897

`Split`如果您不指定另一个分隔符，则默认情况下，有一个方便的字符串方法在空格处拆分字符串。

```
Dim words As String() = TextBox1.Text.Split()
Dim initials As String = ""
For Each word As String In words
    initials &= word(0)
Next 
```

`Char`注意：字符串可以像数组一样被索引。`word(0)`是 的第一个字符`word`。

```
initials &= word(0) 
```

是简写

```
initials = initials & word(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:17:43.820

你可以试试这个：

```
 dim str as String=TextBox1.Text
 Label1.Text=str.Remove(1, str.LastIndexOf(" ")).Remove(2) 
```

如果你愿意，你可以在一行中完成：

```
 Label1.Text = TextBox1.Text.Remove(1, TextBox1.Text.LastIndexOf(" ")).Remove(2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:00:33.183

也可以试试这样的！

```
Dim str As String = textBox1.Text
Dim initials As String = New String(str.Split(" "c).Select(Function(f) f(0)).ToArray) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T13:11:49.763

您可以尝试使用[SubString](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)和[Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法。

```
 Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Dim myInitials As String
    Dim myName As String = "Joe Bob"
    myInitials = myName.Substring(0, 1) & myName.Split(" ")(1).Substring(0, 1)
End Sub 
```

# objective-c - UIImageview的蒙版触摸区域

> ID：13177666
> 
> 赞同：0
> 
> 时间：2012-11-01T13:01:33.887
> 
> 标签：objective-c

我正在使用蒙版来删除图像中不需要的部分。使用下面的代码，这一切都可以正常工作。

然后我将点击手势事件附加到图像。但是，我希望将点击事件手势应用于蒙版图像的结果，而不是 UIimage 框架的完整大小。关于如何做到这一点的任何建议？

```
CALayer *mask = [CALayer layer];
mask.contents = (id)[[UIImage imageNamed:self.graphicMask] CGImage];
mask.frame = CGRectMake(0, 0, 1024, 768);

[self.customerImage  setImage:[UIImage imageNamed:self.graphicOff]];
[[self.customerImage  layer] setMask:mask];
self.customerImage.layer.masksToBounds = YES;

//add event listener
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(customerSelected)];
[self.customerImage addGestureRecognizer:tap]; 
```

## 更新 - 我的解决方案

最后我决定不使用蒙版，而是检查触摸点的像素颜色（如正确答案所示）。我使用了另一个问题的代码[https://stackoverflow.com/a/3763313/196361](https://stackoverflow.com/a/3763313/196361)。

我向视图控制器添加了一个方法，每当触摸视图时都会调用该方法。

```
- (void)touchesBegan:(NSSet*)touches
{
//check the colour of a touched point on the customer image
CGPoint p = [(UITouch*)[touches anyObject] locationInView:self.customerImage];

UIImage *cusUIImg = self.customerImage.image;

unsigned char pixel[1] = {0};
CGContextRef context = CGBitmapContextCreate(pixel,1, 1, 8, 1, NULL, kCGImageAlphaOnly);
UIGraphicsPushContext(context);
[cusUIImg drawAtPoint:CGPointMake(-p.x, -p.y)];
UIGraphicsPopContext();
CGContextRelease(context);
CGFloat alpha = pixel[0]/255.0;

//trigger click event for this customer if not already selected
if(alpha == 1.000000)
    [self customerSelected];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:41:10.297

如果您的蒙版是相当矩形的，那么最简单的方法是`UIView`在顶部添加透明，并带有与蒙版区域匹配的框架。然后，您将`UITapGestureRecognizer`直接添加到不可见视图中。

**编辑**

如果您希望完全根据掩码接受您的点击，那么您可以在点击位置读取掩码的像素颜色并检查您的阈值。

# celery - 如何在 Celery 中创建带有错误处理的顺序工作流？

> ID：13177672
> 
> 赞同：1
> 
> 时间：2012-11-01T13:01:51.540
> 
> 标签：celery

我目前正在将 Redis 用于包含几个步骤的工作流。对于每个步骤，工作人员从队列中抓取有效负载，完成后将其推送到下一个队列，下一个工作人员可以将其进一步处理。如果发生异常，工作人员会将任务放入一个特殊的队列中。

因此，关于通过应用程序的流程的应用程序逻辑在于工作人员本身。我现在想改用芹菜。

我知道在 Celery 中您可以使用子任务，但我看不到您如何表达针对不同条件（例如异常和超时）的特定错误处理。你应该使用不同的队列还是使用子任务，在代码中会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:15:52.663

我现在已经更彻底地阅读了这些文档，并且还做了一些测试，这很有效：

问题是将任务串联在一起，以便它们一个接一个地发生，但同时能够处理错误情况并“中断”流程并做其他事情，而不仅仅是中止。

*您可以使用link*将任务串在一起，如果其中有一个额外的参数 *link_error* ，它将用于失败。从阅读：

[http://docs.celeryproject.org/en/latest/userguide/calling.html#linking-callbacks-errbacks](http://docs.celeryproject.org/en/latest/userguide/calling.html#linking-callbacks-errbacks) 我做了这个：

```
res = add.apply_async((2, 2), link=mul.s(16), link_error=onerror.s()) 
```

这三个任务是 add、mul 和 onerror。Add 将两个数字相加， mul 将两个数字相乘。所以这会将 2 和 2 相加，然后总和将结转到下一步 (mul) 并乘以 16。但是，如果添加代码有错误，或者有错误的数据，或者如果发生其他错误但可检测到的错误, add 会抛出异常，并且会运行 onerror 任务而不是 mul。onerror 任务获取作业的 uuid，并且可以在数据库后端中查找作业（如果配置了这样的作业）。然后 onerror 任务可以归档作业或发送电子邮件或其他任何内容。

# jquery - q-unit 中的十进制值断言

> ID：13177673
> 
> 赞同：1
> 
> 时间：2012-11-01T13:01:59.210
> 
> 标签：jquery, qunit

如何以一定的公差断言正确的十进制值？

可以说我想断言这一点： `1 / 3`

我不想用这样的长字符串断言它：`equal(1 / 3, 0.3333333333333333)` 我想像这样指定它的容差：`equal(1 / 3, 0.33, 0.01)`//如...值可以从 0.32 到 0.34

这在q-unit中可能吗？一种可能的解决方案是，如果我将结果乘以 1000 并去掉所有小数位......但我将编写许多这样的测试，并且更愿意使用任何已经实现的 q-unit 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:02:38.463

似乎没有内置功能，但您可以自己制作：

```
function decEqual(actual expected, tolerance, message) {
      ok(Math.abs(actual - expected) <= tolerance, message);
} 
```

然后像这样使用它：

```
decEqual(1 / 3, 0.33, 0.01, 'Invalid third'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T03:31:32.240

qunit 有足够接近的插件。它使用 2 个断言方法扩展 qunit，这些方法完全符合您的需要： [https ://github.com/jquery/qunit/tree/master/addons/close-enough](https://github.com/jquery/qunit/tree/master/addons/close-enough)

# c# - 从事务范围调用 WCF 服务方法

> ID：13177674
> 
> 赞同：2
> 
> 时间：2012-11-01T13:02:06.030
> 
> 标签：c#, .net, wcf, transactions, transactionscope

我有如下代码：

```
 using (TransactionScope scope = TransactionScopeFactory.CreateTransactionScope())
      {

        *// some methodes calls for which scope is needed*
        ...
        ...
        *//than WCF method code for which I don't want transaction to be involved, but if it throws  an exception I don't wish scope to be completed*
        WcfServiceInstance.SomeMethod();
        scope.Complete();
      } 
```

我的问题是，我可以在 Transaction 范围内调用 WCF 服务方法而没有任何问题吗？（我不知道服务方法是如何实现的）另外，我想确保在wcf服务方法调用中不会涉及Transaction。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T13:27:28.287

WCF 服务方法可以是事务性的，也可以不是事务性的，这取决于它们的实现方式。如果您想确保您的服务调用不参与事务，请将服务调用包装在“被抑制的”事务范围内。这将抑制任何环境事务。

```
using( new TransactionScope(TransactionScopeOption.Suppress) 
{
    WcfServiceInstance.SomeMethod()
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T13:27:34.120

要从您的客户端应用程序向服务传播事务，您需要明确选择加入服务器和客户端上的事务流。如果您的客户正在使用事务感知绑定`(NetTcp, NetNamedPipe, WSHttp, WSDualHttp, & WSFederation)`，那么您应该会看到一个布尔属性`TransactionFlow`。将此设置为 false 将阻止任何事务从您的 cient 流向服务器。

您可以使用该属性对操作级别进行一些额外的控制`TransactionFlow`，但这是一个服务器端属性，因此如果您无权访问服务代码，这可能不是一个选项。

`TransactionFlow`如果该属性不能解决您的问题，请告诉我。了解在客户端上将此设置为 false 将阻止任何和所有事务从客户端传递到该特定端点绑定的服务。

# mysql - 亚马逊生态系统之外的 Amazon RDS mysqldump

> ID：13177675
> 
> 赞同：6
> 
> 时间：2012-11-01T13:02:12.023
> 
> 标签：mysql, amazon-web-services, amazon-rds

我想在亚马逊生态系统之外对我自己的本地磁盘进行每日 mysqldump。我几乎没有理由每天都这样做。

1.  **当**RDS\EBS 再次出现故障时，我想更好地控制我的数据库。
2.  RDS 仅允许您在同一可用区内进行还原。这真的让我很感动，因为可用性区域的自然灾害或网络故障几乎会使备份变得无用，因为您只能恢复到同一个区域。：/
3.  想要一个沙盒/测试数据库，我不必为空间和带宽付费。

我的大问题是，如果我每天对 50gb 数据库进行 mysql 转储，我的带宽\IO 成本会飙升吗？我假设他们会的！有没有人做过这样的事情？

**更新：**

*   我正在运行一个多可用区生产环境，但最近的中断仍然证明没有完全故障转移之类的事情。
*   我们公司有两个服务，一个面向前端的网站和内部处理。最重要的是我们的内部运营不会停止。如果需要，我们的网站可能会黑屏几个小时。在我的数字提示中拥有最近的 mysql 转储对我来说似乎是无价的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T19:09:05.513

因此，您有几点需要注意。

关于控制您的数据库，我不确定您在这里要做什么。如果您的生产数据库出现故障，您将无法控制它。即使您有它的本地备份，如果您没有地方托管该数据，那也对您没有多大好处。

您当前的生产 RDS 实例是否是一个多可用区实例以帮助防止可用区中断？如果是，故障转移将自动为您发生。

RDS 快照可用于在不同的可用区进行还原。请参阅此链接中的 rds-restore-db-instance 命令行文档 [http://docs.amazonwebservices.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-RestoreDBInstanceFromDBSnapshot.html](http://docs.amazonwebservices.com/AmazonRDS/latest/CommandLineReference/CLIReference-cmd-RestoreDBInstanceFromDBSnapshot.html)

请注意，您可以指定要还原到的 AZ。

基于 50GB 的每日备份，您将谈论仅用于备份的数据传输花费 180 美元。在与生产 RDS 实例相同的区域中简单地拥有一个小型测试 RDS 进行测试会便宜得多（我认为对于微型来说每月 5 美元）。这些盒子之间的所有数据传输（即将快照移动到它上面）都是免费的。

您可以在此处自行计算定价：http: [//aws.amazon.com/rds/#pricing](http://aws.amazon.com/rds/#pricing)

更不用说对生产进行日常备份会在锁定数据库以执行转储时中断生产数据库访问。当然，除非您付费拥有可以从中获取转储的 RDS 只读副本。

最后，RDS 和独立 MySQL 服务器之间在配置方面存在细微差别，我更希望我的测试环境与我的生产环境尽可能相似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T01:21:24.793

就试一试吧。我从亚马逊拉到我的本地 mysql 服务器，即 Ubuntu。

mysqldump 标志-h 标志.c3x4aregvxxx.us-east-1.rds.amazonaws.com -P 3306 -u cartersxxx -pxxxxxx | mysql -u root -pxxxxxx 标志

我无法在亚马逊预先确定账单，我正在积极尝试摆脱它们。仅供参考，我每月支付 72 美元购买 10GB 低带宽 mysql。恕我直言表大小决定成本。

# java - Forming this type of variables in java

> ID：13177676
> 
> 赞同：0
> 
> 时间：2012-11-01T13:02:16.693
> 
> 标签：java, arrays

```
var Var1 = ["0"];
var Var2 = ["0"];
var Var3 = ["0"];
var Var4 = ["0"]; 
```

How can i form this type of variables in java. This is of JavaScript. I tried something like this, but fail.

```
Array Var1[] = new["0"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:07:04.140

The syntax differs for Java:

```
String[] var1 = { "0" }; 
```

You can also do this:

```
String[] var1 = new String[] { "0" }; 
```

although the second `String[]` is optional in the array declaration.

Also

```
int[] var1 = { 0 }; 
```

for integer types.

See: [Arrays](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

# android - 安卓 Instagram

> ID：13177677
> 
> 赞同：2
> 
> 时间：2012-11-01T13:02:16.530
> 
> 标签：android

请帮忙！我想将我的照片分享到 Instagram。我使用 Intent 进行分享，但我根本不需要 Share 中的列表，例如 - Facebook、Instagram、Gmail、Bluetoth 等。我只需要 Instagram。我只想通过 onclickListener 将照片分享到 Instagram。怎么办？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-08T00:02:29.733

很久以前就被问到了。但明确的答案并不在这里。这就是为什么，我也想回答。

我已经使用了下面的代码并且它有效。它直接重定向到 Instagram 的裁剪屏幕。（当然，必须在设备上安装 Instagram 应用程序。）

```
...
Intent intent = createInstagramIntent("file://" + filePath);
startActivity(intent);
... 
```

和

```
private Intent createInstagramIntent(String uriString) {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("image/*");
    shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(uriString));
    shareIntent.setPackage("com.instagram.android");
    return shareIntent;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-01T13:06:40.563

创建调用 instagram 的自定义共享屏幕。

# silverlight - how to give imagepath to navigateuri in silverlight mvvm

> ID：13177678
> 
> 赞同：0
> 
> 时间：2012-11-01T13:02:17.783
> 
> 标签：silverlight, mvvm

In my Silverlight5 application that using mvvm, need to acheive the below one. I have the image folder that contains images. How to get the whole image path and assign it to the hyperlinkbutton.

```
<HyperlinkButton Content="Preview"  NavigateUri="{Binding image_value}"
                                                          TargetName="_blank" /> 
```

but i need to give the path like the following one ,

```
 ("./Images/{0}", String_Value) 
```

Help me to achieve this..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:46:20.613

您应该使用`Converter`which 将附加这些字符串：

```
public class ImagePathConverter : IValueConverter
{             
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parametr, CultureInfo culture)
    {
        var imgPath = "./Images/{0}";
        return string.Format(imgPath, value);
    }

    public object ConvertBack(object value, Type targetType, object parametr, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion

} 
```

并且`xaml`：

```
<Page.Resources>
   <converters:ImagePathConverter x:Key="imagePathConverter"/>
   ...
</Page.Resources>   

   ...

<HyperlinkButton Content="Preview"  NavigateUri="{Binding image_value, Converter={StaticResource imagePathConverter}}" TargetName="_blank" /> 
```

* * *

**我建议不要对路径进行硬编码，而是将其放入资源文件中，这将提供更大的灵活性。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:59:48.227

海我找到了解决方案..

```
 <HyperlinkButton Content="Preview" Margin="2"  NavigateUri="{Binding String_Value,StringFormat='http://localhost:23411/ClientBin/Images/{0}'}" VerticalAlignment="Center" TargetName="_blank" /> 
```

我把它放在我的代码中，它运行良好..

# python - 如何将 argparse 参数解析为字符串列表，在预定义的标志参数上停止？

> ID：13177679
> 
> 赞同：0
> 
> 时间：2012-11-01T13:02:19.733
> 
> 标签：python, python-3.x, argparse

如何解析由特殊预定义语法分隔的可变长度参数列表。一个例子：

```
 ./script --arg1 --cmdname otherscript --a1 --a2 --cmdname-- --arg3 
```

用脚本解析后`argparse`应该有三个参数：`arg1`, `cmdname`, `arg3`. 参数`cmdname`应包含三个值`otherscript`、`a1`、的列表`a2`。

拥有这样的配方对于能够将所有内容传递`cmdname`到`subprocess.popen(cmdname, ...)`调用中会很有用。

我在考虑子解析器。但我相信子解析器无法停止，并且与其他子解析器确实是互斥的。还有其他简单的，已经提供的方法吗？子类化`Action`是这样做的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:26:01.517

如果我们区分以 开头的参数和`--`同样以 开头的命令部分，这将有助于 argparse `--`。

所以如果`./script ++arg1 ++cmdname otherscript --a1 --a2 ++arg3` 可以接受，那么：

```
import argparse
import shlex

parser = argparse.ArgumentParser(prefix_chars = '+')
parser.add_argument('++arg1', action = 'store_true')
parser.add_argument('++arg3', action = 'store_true')
parser.add_argument('++cmdname', nargs = '*')
args = parser.parse_args(shlex.split("++arg1 ++cmdname otherscript --a1 --a2 ++arg3")) 
print(args) 
```

产量

```
Namespace(arg1=True, arg3=True, cmdname=['otherscript', '--a1', '--a2']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:08:45.840

正如您在帖子中指出的那样，子类`Action`化可能是执行此操作的方法——尽管如果`otherscript`argparse 不知道参数，这会变得非常棘手。您可能可以使用 来解决此问题`parse_known_args`，但可能无法解决。老实说，我真的认为最简单的方法是对`sys.argv`自己进行预处理。

```
import shlex
s = shlex.split("./script --arg1 --cmdname otherscript --a1 --a2 --cmdname-- --arg3")
def preprocess(lst):
    """
    process an iterable into 2 lists.
    The second list contains the portion bracketed by '--cmdname' and '--cmdname--'
    whereas the first portion contains the rest of it.
    """
    argv1,argv2 = [],[]
    current = argv1
    for i in lst:
        if i == '--cmdname':
           current = argv2
        elif i == '--cmdname--':
           current = argv1
        else:
           current.append(i)
    return argv1,argv2

l1,l2 = preprocess(s)
print l1
print l2 
```

`preprocess`另一个适用于具有方法的可切片对象的替代实现`.index`-`sys.argv`可以正常工作：

```
def preprocess(lst):
    """
    process an iterable into 2 lists.
    The second list contains the portion bracketed by '--cmdname' and '--cmdname--'
    whereas the first portion contains the rest of it.
    """
    try:
        i1 = lst.index('--cmdname')
        i2 = lst.index('--cmdname--')
        argv1 = lst[i1+1:i2]
        argv2 = lst[:i1]+lst[i2+1:]
    except ValueError:
        argv1 = lst
        argv2 = []

    return argv1,argv2 
```

* * *

另一种选择（在@unutbu 的出色评论中指出）是将命令行语法更改为更标准的东西，从而大大简化了问题：

```
./script --arg1 --cmd "otherscript --a1 --a2" --arg3 
```

`cmd`然后您可以像通常使用的那样进行解析`argparse`（指定`type=shlex.split`此参数以将其从字符串转换为参数列表）。

# c# - auto complete on asp.net control

> ID：13177681
> 
> 赞同：0
> 
> 时间：2012-11-01T13:02:21.143
> 
> 标签：c#, asp.net

hey I want to use autocomplete jquery in asp.net on a control which is used on a default1.aspx page. My control is searchinput.ascx which is in Registration folder. My ploblem is I have written web method (getmylist) on code file of searchinput control. but that method is never called. can anyone help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:38:53.760

没有代码很难帮助您，但一些常见原因可能是：

*   您没有正确使用 ClientID 值 - asp.net 控件在实际标记中的 id 与在设计器中的不同

*   您的 Web 方法有错误 - 您应该按 f12 打开您的 Web 开发人员工具栏并转到 NET 选项卡（至少在 Firefox 中）查看是否返回 500 错误代码或类似代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:27:55.750

[jQuery 网站](http://jqueryui.com/autocomplete/)

您可以从那里找到您需要的水。另外，请显示您的 ajax 调用，以便我可以尝试帮助您解决它不起作用。否则，您编写 Web 方法并从 jquery 自动完成进行 ajax 调用的方法应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:46:28.330

创建如下 Web 方法：

```
 [WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string[] GetPatientFirstName(string prefix)
{
    List<string> customers = new List<string>();
    using (SqlConnection conn = new SqlConnection())
    {
        string connectionstring = CCMMUtility.GetCacheForWholeApplication();
        conn.ConnectionString = connectionstring;
        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.CommandText = "select distinct top(10) PatientFirstname from tblMessage where  " +
            "PatientFirstname  like '%'+ @SearchText + '%' order by PatientFirstname";
            cmd.Parameters.AddWithValue("@SearchText", prefix);
            cmd.Connection = conn;
            conn.Open();
            using (SqlDataReader sdr = cmd.ExecuteReader())
            {
                while (sdr.Read())
                {
                    customers.Add(string.Format("{0}", sdr["PatientFirstname"]));
                }
            }
            conn.Close();
        }
        return customers.ToArray();
    }
} 
```

这是html代码：

```
 $(document).ready(function () {
        $('[ID$=txtPatientFirstname]').live('keyup.autocomplete', function () {

            $(this).autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '<%=ResolveUrl("~/Resources/WebService.asmx/GetPatientFirstName") %>',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    label: item.split('-')[0],
                                    val: item.split('-')[1]
                                }
                            }))
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                },
                minLength: 1
            });
        });
}); 
```

这是工作示例......希望这能解决您的问题..

# android - Android 2.3.5 device shows only 8 languages - are the rest there?

> ID：13177683
> 
> 赞同：1
> 
> 时间：2012-11-01T13:02:24.917
> 
> 标签：android

My company has an Android app which has translations for Portuguese for the various layouts and resource when the device is set to a Portuguese locale.

But I was testing it on one of the intended target devices (a stock out-of-the-box Samsung Media Player 4.0 running Android 2.3.5), and when I go to Settings>Select Locale, Portuguese is not one of the options! It only shows 8 - a few flavors of English and French, German, Italian, Spanish and Korean, and that's it!

Supposedly Gingerbread supports 57 locales - how do I set its locale to something other than the above 8? If I set it programmatically are all the other languages already in the OS, but just not exposed by the device manufacturer?

Thanks in advance.

# c++ - Handling lots of variable declarations

> ID：13177685
> 
> 赞同：1
> 
> 时间：2012-11-01T13:02:29.393
> 
> 标签：c++, variables, scope

I am implementing a class and I have a function that does things using lots of variables that need to be declared and initialised.

I'd like the variable declarations not to clutter the function and do something like:

```
doFunction(){
  declare();

  //Do things with variables declared in declare()
}
void declare(){
  //declare lots of variables here
} 
```

This does not work as the variables are scoped to declare() and aren't seen by doFunction(). What's a sensible way to handle this problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:06:55.977

由于您声明的每个变量都必须分配一个值，因此您应该将声明与初始化结合起来。换句话说，而不是

```
int x;
double y;
std::string z;
x = 1;
y = 2.0;
z = "3"; 
```

做这个：

```
int x = 1;
double y = 2.0;
std::string z("3"); 
```

这几乎是你可以用本地人推动这种方法的程度：声明变量是函数体的重要组成部分，你不能（并且可以说不应该）将它移动到远程位置。

您还可以将成员函数移动到嵌套的私有类中，将局部变量移动到类中，并在那里进行计算：

```
class specialCalc {
    int x;
    double y;
    std::string z;
    specialCalc() : x(1), y(2.0), z("3") {}
public:
    int calculate() {
        ...
    }
};

void doFunction() {
     specialCalc calc;
     cout << calc.calculate() << endl;
} 
```

PS：我故意不提及基于预处理器的解决方案，因为它们会对可读性产生负面影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:12:55.113

我并不是真的提倡这一点，但是：

```
struct Declare
{
    int x;
    float y;
    char z;
    vars() :x(1),y(3.14),z('z') {}
};

void doFunction()
{
    Declare vars;
    // use vars.x, vars.y and vars.z as your variables
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:38:06.870

您有多种选择：

1）克服它。如果您需要大量变量，您将需要忍受需要在某处声明它们的事实。

2) 将它们作为成员变量放入类或结构中，以便您可以在 .h 文件中声明它们，它们在 .C/.cpp 文件中将不可见。

3）将它们聚合成一个数组，只声明数组并在`for()`循环或其他东西中初始化它们。这只有在它们都是相似的类型并且你不做愚蠢的事情时才有效，比如“索引 4”是我的“计数器对象”，而“索引 5”是我要打印到的“东西”屏幕”，然后您就失去了与变量本身关联的名称，这在以后阅读代码时非常有用（当然）。

4）将它们放在其他地方的定义语句中：

```
#define MYVARS int a; char b[1024]; ...

void funstuff() {
    MYVARS
} 
```

5) 修改 IDE 以便在您查看代码时隐藏/折叠变量声明。

请注意，在所有这些选择中，数字 1 仍然可能是正确答案 :-)

# jquery - Uncaught SyntaxError: Unexpected token < in solr while ajax call

> ID：13177686
> 
> 赞同：0
> 
> 时间：2012-11-01T13:02:29.957
> 
> 标签：jquery, solr

我正在尝试将数据存储在 solr 服务器中，但页面显示错误

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script src="Include/JS/JqueryPlugin/jquery-1.8.2.min.js"></script>
<script>
    function save() {
        try {
            $.ajax({
                type: "POST",
                url: "http://192.168.10.113:8080/solr/update/json?commit=true",
                data: { "add": { "doc": { "id": "222222", "name": "Ruby on Trails" } } },
                contentType: "application/json; charset=utf-8",
                dataType: 'jsonp',
                crossDomain: true,
                jsonp: 'json.wrf'
            });
        }
        catch (err) {
            alert(err);
        }
    }
</script>
</head>
<body>
<input type="button" id="button" onclick="save()" value="Submit" />
</body>
</html> 
```

如何摆脱这个问题。我在google上搜索，发现html页面或js页面中的语法错误。

但就我而言，我没有检查任何错误。

请帮助解决此错误。

提前致谢

# plugins - Facebook 滑动框在 IE 9 中不稳定

> ID：13177690
> 
> 赞同：1
> 
> 时间：2012-11-01T13:02:56.400
> 
> 标签：plugins, internet-explorer-9, facebook-javascript-sdk

[我的网站](http://www.fedri.com)中的 facebook 插件有问题。它在 Firefox 中显示正确，但在 IE 9 中显示不稳定。它移动得很快，看不到。请在 IE 中打开我上面的链接并查看。

这是Overall_Header.Html 中的代码，位于Head 标记的关闭之后。

```
 <body id="phpbb" class="section-{SCRIPT_NAME} {S_CONTENT_DIRECTION}">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<a id="facebook_tab" href="https://www.facebook.com/fedriksa" title="Fedri on Facebook"><span><div class="fb-like-box" data-href="http://www.facebook.com/fedriksa" data-width="292" data-show-faces="false" data-stream="true" data-header="true"></div></span></a>
<div id="wrap"> 
```

而且，这是我引用 facebook_tab 的 .CSS 样式

```
#facebook_tab
{
    display: block;
    width: 38px;
    height: 102px;
    background: url("{T_THEME_PATH}/images/facebook_tab.png") no-repeat 0 0;
    right:0px;
    top:200px;
    position:fixed;
}

#facebook_tab span
{
    display: none;
}

#facebook_tab:hover {
width:292px;
padding-left:32px;
}

#facebook_tab:hover span
{
    display:block;
background-color:#fff;
border:2px solid #999;
border-radius:5px;
} 
```

请帮我摆脱这个。非常感谢。

# regex - 点后两位数的浮点数的正则表达式 (XX.XX)

> ID：13177691
> 
> 赞同：-2
> 
> 时间：2012-11-01T13:03:18.003
> 
> 标签：regex

我对正则表达式的了解不够好，而且我真的很想知道如何测试输入是否是点后两位数字的浮点数。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:10:19.940

如果 x 是数字：`^\d{2}\.\d{2}$`

如果 x 是单词字符`^\w{2}\.\w{2}$`

正则表达式的好工具：

*   [`RegExr`](http://gskinner.com/RegExr/)（网上，我觉得不是 C# Regex 方言但还是很有用的）
*   [`Regex Tester`](http://visualstudiogallery.msdn.microsoft.com/16b9d664-d88c-460e-84a5-700ab40ba452)（Visual Studio 扩展）

以我的经验，正则表达式并不难，但语法非常不直观，你真的必须记住它或拥有一个好的工具。

从好的方面来说，您只需要知道几个说明/关键字，但对于常见用途来说并没有太多。

我用正则表达式保存了一个小测试项目，所以我不必记住它们。在上面的正则表达式中，完成了以下操作：

*   '^' 匹配字符串的开头，如果你的字符串可以出现在字符串的中间，你需要删除它，也许用匹配单词边界的 \b 替换它
*   \d 匹配数字
*   \w 匹配任何单词字符（字母数字和下划线）。
*   {2} 表示前一个匹配项必须出现两次。您可以在这里使用许多变体。
*   \。匹配 '.' 它需要用 '\' 转义，因为 . 已被 Regex 使用（有一次是隐式的）
*   '$' 匹配字符串结尾（如果您的字符串可以出现在字符串中间，则替换为 \b）

# c++ - std::function/std::bind 的生命周期管理（在 Windows PostMessage 中将仿函数作为 lparam 传递）

> ID：13177696
> 
> 赞同：3
> 
> 时间：2012-11-01T13:03:30.173
> 
> 标签：c++, visual-studio-2010, winapi, visual-c++, c++11

这似乎只是一个 Windows 问题，但我的问题的本质实际上是 C++11（或 MS C++0x TR1）。它是关于传递`std::function`对象及其生命周期的。

我想有一个通过 Windows `PostMessage`API 异步执行的通用框架。这是当情况迫使我退出当前的消息处理并在消息队列中注册任务时。

该框架使用指向静态函数 (in `WPARAM`) 的指针和指向`LPARAM`包含“this”指针以及其他上下文的上下文的指针 (in) 运行良好。

我想把它提升到一个新的水平并使用绑定和函数结构。我在 Visual Studio 2010 上（即`std::function`存在但 TR1）。

到目前为止，这就是我所拥有的：

我正在`WM_ASYNC_TASK`通过教科书注册 a，并且我的 windows 程序（我实际上正在使用 WTL）运行良好。`PostMessage`工作正常，消息最终将`onAsyncTask`正确地按预期到达`wparam`and `lparam`。

```
const UINT WM_ASYNC_TASK = RegisterWindowMessage(L"Async-Task"); 
```

我有一个`CPlugin`，这是我要发送任务的地方。我有`CHiddenWindow`哪个是获取消息的 Window 实现。我希望将`onAsyncTask`功能转发回`CPlugin`. `hwnd`是窗口的句柄。

在`CPlugin`我有：

```
void CPlugin::ShowMessageBox( void* arg ) {
    wchar_t* text = (wchar_t*)arg;
    MessageBox( NULL, text, L"Title", MB_OK )
}

void CPlugin::Sender( ) {
    std::function<void(void*)> f = std::bind( &CPlug::ShowMessagebox, 
                                              this, 
                                              std::placeholders::_1 );
    PostMessage( hwnd, WM_ASYNC_TASK, (WPARAM)f, (LPARAM)"Hello!!" );
} 
```

在 WM_ASYNC_TASK 消息处理程序的 CHiddenWindow 中，我有：

```
void CHiddinWindow::onAsyncTask( WPARAM wparam, LPARAM lparam, /* more arguments */ )
{
    std::function<void(void*)> f = (std::function<void(void*)>)wparam;
    void* arg = lparam;
    f( arg );
} 
```

**问题**：

1.  目前，当我尝试将 f 强制转换为 WPARAM 时，编译器会抱怨`PostMessage`（`WPARAM`基本上是很长的）。
2.  如果我使用`f`:的地址，我可以`(WPARAM)&f`。
3.  这就提出了另一个关于 f 的生命周期的问题。我该如何保留它？
4.  当通过`&f`（保持`f`在外面`Sender()`- 不是我的愿望）时，我在`onAsyncHandler`尝试取消引用时遇到访问冲突`f`。
5.  关于生命周期，我可以将 f 置于`std::shared_ptr`某种控制之下吗？
6.  没有真正的理由将参数传递给 wparam 中的函数（在我的例子中是文本）。我认为应该有一种方法可以让`std::function`对象的文本部分，但语法失败。

正如我所说，我在可变参数模板之前使用 VS 2010。Microsoft 有 C++0x 的 TR1 实现。我正在寻找一个不包括 boost 的解决方案，因为它现在对我不可用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:39:12.050

1.  编译器是正确的，`std::function`是无法转换为的重要对象，`WPARAM`实际上是`unsigned int`.
2.  是的，这是可能的（实际上是唯一正确的方法），但会引发正确的类型转换和生命周期管理问题。
3.  生命周期`f`肯定由 管理`CPlugin`。当您将其绑定到成员函数时，它与`CPlugin`生命周期密切相关。`this``CPlugin`
4.  当然，这是因为`f`在超出`Sender()`函数范围（返回时）时被销毁。由于异步消息传递，这发生在`CHiddenWindow`处理消息之前。In`CHiddenWindow::onAsyncTask`指针`f`已经无效。
5.  `shared_ptr`是强制共享所有权的好工具（这是您的情况），但您仍然无法通过`WPARAM`.
6.  有什么问题`std::bind(&CPlugin::ShowMessagebox, this, "Hello!")`;？

这种框架的可能解决方案：

1.  创建全局异步任务队列，`CPlugin`并`CHiddenWindow`有权访问它
2.  队列中的每个任务都应具有唯一的标识符，例如计数
3.  `CPlugin::Sender()`将任务放入队列并将异步消息发布到`CHiddenWindow`任务 ID 为`WPARAM/LPARAM`. `Sender()`还在`CPlugin`实例中保留此任务 ID - 如果`CPlugin`实例在对等方处理所有消息之前被销毁，则应将其从队列中删除。
4.  `CHiddenWindow::onAsyncTask`获取任务 ID，在队列中搜索相应的任务，如果找到任务则运行任务函子。然后它从队列中删除任务。

当然，您可以使用一些简单（且错误）的解决方案，例如：

```
typedef std::function<void(void*)> Func;

void CPlugin::Sender()
{
    Func* f = new Func(std::bind(&CPlugin::ShowMessagebox, this, "Hello!"));
    PostMessage(hwnd, WM_ASYNC_TASK, (WPARAM)f, 0);
}

void CHiddenWindow::onAsyncTask(WPARAM wparam, LPARAM lparam)
{
    Func* f = (Func*)wparam;
    (*f)();
    delete f;
} 
```

但是这个解决方案有两个缺陷：

1.  如果发布的消息永远不会被接收者处理，例如它会因为某种原因被关闭怎么办？在这种情况下，`Func`对象将被泄露，浪费你的内存。
2.  如果`CPlugin`发送消息的实例在接收者处理消息之前被销毁怎么办？`f()`在这种情况下，您将在调用inside时出现未定义的行为（很可能是访问冲突/崩溃）`CHiddenWindow::onAsyncTask`。

因此，只有在您有很强的保证所有已发布的消息都将被接收者处理并且发送者不会在所有已发布的消息都被处理之前被破坏的情况下，您才应该考虑这种解决方案。

# c# - 在机器上的所有网站上包括 Javascript

> ID：13177697
> 
> 赞同：1
> 
> 时间：2012-11-01T13:03:34.433
> 
> 标签：c#, c++, window

我注意到在使用 3G 加密狗访问网络时。我访问的任何页面的末尾都包含一个 javacript 脚本。但仅适用于（html、htm、php、asp、aspx）。该脚本添加了下载质量降低的图像而不是全尺寸的功能，以节省带宽。但是，它的功能与我的问题无关。

我需要能够做同样的事情。对于进入我的机器的任何请求，我想要一个 javascript 包括。但不是 BHO 或浏览器扩展。

有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:13:22.220

我想我将使用 FiddlerCore 作为服务来做到这一点。这似乎是一种很好的干净方式。

[http://www.fiddler2.com/Fiddler/Core/](http://www.fiddler2.com/Fiddler/Core/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:07:52.670

您可能需要编写一个 Web 代理引擎来实现这一点。然后，您可以将其配置为透明代理（也许您需要为此实现网卡驱动程序），或者将机器上的所有浏览器配置为通过代理引导流量。

3G 加密狗可以通过各种方式实现这一点，例如在驱动程序软件中插入过滤器，或者甚至可能在硬件中进行某些处理（在我看来不太可能）。

# javascript - 选择一个图像并在 javascript 中操作它（不提交表单）

> ID：13177698
> 
> 赞同：0
> 
> 时间：2012-11-01T13:03:37.787
> 
> 标签：javascript, jquery, image, browser

有没有办法让用户从他的硬盘驱动器中选择一个图像而不将其提交给服务器在浏览器中使用这个图像？

我需要这个，因为我希望用户能够在将裁剪后的图像发送到服务器之前裁剪图像（从而保存帖子和一些数据字节）。

我试图做的是使用输入类型文件，然后捕获提交事件，但输入的值只是一个假路径（没用）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:26:34.233

这是一个非常基本的图像缩放示例（有许多全局变量，没有输入验证......）：http: [//jsfiddle.net/89HPM/3/](http://jsfiddle.net/89HPM/3/)。它使用[File API](http://www.w3.org/TR/file-upload/)和 canvas 元素。正如@anu 所说，可以使用画布的 toDataUrl 方法完成保存。以类似的方式，您可以实现裁剪。

**JavaScript**

```
(function init() {
    document.getElementById('picture').addEventListener('change', handleFileSelect, false);
    document.getElementById('width').addEventListener('change', function () {
        document.getElementById('canvas').width = this.value;
        renderImage();
    }, false);
    document.getElementById('height').addEventListener('change', function () {
        document.getElementById('canvas').height = this.value;
        renderImage();
    }, false);
}());

var currentImage;

function handleFileSelect(evt) {
    var file = evt.target.files[0];
        if (!file.type.match('image.*')) {
            alert('Unknown format');
        }
    var reader = new FileReader();

    reader.onload = (function(theFile) {
        return function(e) {
            currentImage = e.target.result;            
            renderImage();
        };
    })(file);

    reader.readAsDataURL(file);
 }

function renderImage() {
    var data = currentImage,
        img = document.createElement('img');
    img.src = data;
    img.onload = function () {
    var can = document.getElementById('canvas'),
        ctx = can.getContext('2d');
        ctx.drawImage(this, 0, 0, can.width, can.height);
    };
}​ 
```

**HTML**

```
<input type="file" name="picture" id="picture" /><br />
<input type="text" id="width" value="200" />
<input type="text" id="height" value="200" /><br />
<canvas width="200" height="200" style="border: 1px solid black;" id="canvas"></canvas>​ 
```

这是我针对该基本示例所做的博客文章：[blog.mgechev.com](http://blog.mgechev.com/2012/11/02/javascript-scale-image/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T13:07:59.693

新的 HTML5 File API 可能是您所寻找的最接近的解决方案：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

它允许您在 Javascript 中浏览和读取文件。做任何你喜欢的处理，然后上传到服务器。除此之外的任何事情都会非常棘手，并且可能不可避免地往返服务器。

这里的缺点是浏览器支持.....一如既往

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T13:13:36.930

我不确定哪些浏览器可以完美运行，但`HTML5`有. 让我给你一些可以为你使用的步骤。`DnD``File API``FileAPI`

1.  **DnD API：**当用户释放鼠标并发生鼠标抬起事件时，从 drop 事件开始。
2.  **DnD API：**`DataTransfer`从 drop 事件中获取对象
3.  **文件 API：**调用`DataTransfer.files`以获取 a `FileList`，表示已删除的文件列表。
4.  **File API：**遍历所有单独的 File 实例并使用一个`FileReader`对象来读取它们的内容。
5.  **文件 API：**使用该`FileReader.readAsDataURL(file)`调用，每次完全读取文件时，都会创建一个新的“数据 URL” *（RFC 2397）*格式的对象，并将一个包装它的事件触发到对象`onload`上的处理程序`FileReader`。仅供参考：“<code>data URL”对象是*Base64 编码的*二进制数据，具有规范定义的标头字符序列。浏览器理解它们。

6.  **HTML5 DOM：**将图像设置`href`为`File Data URL`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:26:39.550

你不能，原因如下：

*   由于这篇文章中所述的原因：[使用 jQuery 的文件输入的完整路径](https://stackoverflow.com/questions/3489133/full-path-from-file-input-using-jquery)

*   事实上，如果您甚至尝试创建一个`img`加载本地文件路径的元素，您将`Not allowed to load local resource:`在浏览器的控制台中收到错误消息。

*   事实上，一旦你有了一个图像，你只能改变它在屏幕上的外观，**而不能改变系统上的文件**或将改变后的图像发送到服务器

*   您已经声明您需要跨浏览器支持，因此 HTML5 File API 和 Canvas API 已经过时，即使它们只允许部分功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T02:45:46.220

我刚刚解决了一个与您无关的问题。

正如大家所说，您无法获得真实的图像文件地址。但是，您可以创建一个临时路径并在页面中显示图像，而无需将其提交到服务器。在下一段的旁边，我将展示它是多么容易。一旦你展示了它，你就可以使用一些 javascripts 事件来“伪裁剪”并获取裁剪参数（角）。最后，您可以将参数添加到某个隐藏字段并提交表单。因此，您可以使用 som php 在服务器上裁剪提交的图像，并使用多种图像格式保存结果，如 .png、jpg、gif 等。对不起，如果我没有编写完整的解决方案，没有足够的时间.

```
/* some scripting to bind a change event and to send the selected image
to img element */
$(document.ready(function(){
  $("input:file").each(function(){
    var id = '' + $(this).attr('id');   
    var idselector = '#'+id, imgselector=idselector+'-vwr';
    $(idselector).bind("change", function( event ){
      (imgselector).fadeIn("fast").attr('src', 
       URL.createObjectURL(event.target.files[0]));
    });
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<!-- create a img element to show the selected image and an input file element to select the image.
ID attribute is the key to have an easy and short scripting
note they are related suffix -vwr makes the difference
-->
<img src="" id="image-input-vwr" alt="image to be cropped">
<input type="file" id="image-input" name="image_input">
```

希望它对某些机构有所帮助，因为这是一个非常古老的问题。

路易斯·克韦多

# bash - 虚拟机启动后执行命令

> ID：13177702
> 
> 赞同：1
> 
> 时间：2012-11-01T13:03:48.393
> 
> 标签：bash, virtualbox

我已经厌倦了早上开始需要多少步骤。是的，我只需要几分钟就可以启动整个环境，但我真的更愿意在启动时运行一个命令并准备好立即启动。

我正在编写一个连接到 SqlServer 的 Rails 应用程序。为了开发它，我有一个在 VM 上使用的本地版本的数据库。我的手动过程是这样的：

```
Run VirtualBox.
Start the VM.
     When the VM is done booting:
          Open terminal
          Run `rails s`
          When rails is done starting:
                 open browser
                 navigate to localhost:3000 and start developing
Run Sublime 
```

我很想在一个脚本中做到这一点：

```
VirtualBox Windows7 &
sublime &
google-chrome & 
```

但我无法弄清楚如何在虚拟机完成启动*后才运行此命令：*

```
gnome-terminal --working-directory=git/my_project --tab -e 'rails s' --tab -e 'git status' 
```

此外，在rails s 成功*后*启动 chrome 会很好（但不是必需的） 。

这甚至可能吗？

我不反对投票，但感觉这是 VirtualBox 应该能够更自然地做的事情。

**编辑**

来自评论：

我正在使用带有两个桥接接口（一个用于无线，一个用于有线）的 Host-Only 网络。（无论我是否连接到网络，它都允许我使用 VM，并让我在有线和无线之间自由切换而不会注意到差异）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:22:17.193

以下是我的做法：

1.  在 VM 中，创建一个脚本，该脚本将找到默认网关，并继续 ping 它。并将其添加到用户的启动中。（需要解析`ipconfig /all`可以用 vbscript/python 完成。）
2.  在主机中，查看主机和虚拟机之间的网络接口。在主机上找到默认网关（`route -n`在 bash 脚本中解析输出）。由于两者都使用相同的物理接口，网关将相同（假设 NAT 和 ONE 物理接口）。使用 tcpdump，等待到网关的 ping 数据包。

选择“默认网关”是因为主机和虚拟机可以相互独立地找到它。另一种选择是硬编码主机地址。

主机上的主机 tcpdump 退出后，这意味着虚拟机处于活动状态并已启动到 windows 桌面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:16:17.057

我之前研究过这条查询线，我认为 Devil's Pie 是最接近设置它的方法：

[http://burtonini.com/blog/computers/devilspie](http://burtonini.com/blog/computers/devilspie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:13:17.803

你可以尝试从这个（VBoxManager startvm）开始：

[如何自动启动和关闭 VirtualBox 机器？](https://unix.stackexchange.com/questions/28611/how-to-automatically-start-and-shut-down-virtualbox-machines)

然后查看一些工作脚本以添加到您的 init.d 和/或 rc.local 一旦您的虚拟机按顺序完成其余工作：

[了解 Linux：/etc/init.d 目录](http://www.ghacks.net/2009/04/04/get-to-know-linux-the-etcinitd-directory/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-01T18:17:01.413

我需要编排类似的东西。我正在使用 Windows VM（来宾）作为我的 Linux 笔记本电脑（主机）的代理（它运行仅限 Windows 的企业 VPN 客户端）。该方法是**完全自动化来宾**并等待它准备好：

1.  主机必须没有时髦的路线（还）
2.  VM 启动并运行一个 powershell 脚本（通过 Windows 任务计划程序，启动时运行），该脚本连接 VPN 客户端并设置 ICS（Internet 连接共享，基本上是路由）。
3.  主机现在添加了通过 VM 的仅主机接口发送一些流量的时髦路由。如果过早添加这些路由，则第 2 步将不起作用。
4.  VM 还运行[squid](http://www.squid-cache.org/)（http 代理），它的端口是从主机转发的 NAT 端口，因此**localhost:3128**实际上是转到来宾。因此，使用此代理的 curl 进入公司网络并指示来宾是否已完全启动并连接。

（Squid 也可以作为这种复杂但非常方便的机制的备份，我仍然可以通过 corkscrew 等进行 ssh）

所以，我在主机上运行这个脚本（显示了简化版本）：

```
#!/bin/bash
VM=vm  #Name of the Virtual Machine
SCRIPT_DIR=/some/dir
PROXY_ADDRESS=localhost:3128 
REMOTE_CURL_HOST=any.corporate.hostname

function waitloop() {
    echo -n "Waiting to hear from $REMOTE_CURL_HOST "
    while ! curl -s -m 5 --proxy $PROXY_ADDRESS $REMOTE_CURL_HOST > /dev/null ; do
        echo -n .
        sleep 10
    done
    echo "!"
}

# a separate script that takes down my routes, you may not need this.
bash $SCRIPT_DIR/network-config-vboxnet0.sh down

# error is OK if it's already running
vboxmanage startvm $VM

waitloop && bash $SCRIPT_DIR/network-config-vboxnet0.sh up && echo "Completed" 
```

本质上，脚本一直等到 curl 通过 VM 运行。

# cuda - 在 CUDA 上包含整数的浮点数的“安全”算术

> ID：13177707
> 
> 赞同：0
> 
> 时间：2012-11-01T13:03:55.913
> 
> 标签：cuda

我目前正在研究在 CUDA 上使用浮点数而不是整数进行算术运算。由于整数运算与浮点运算相比非常慢，因此出现了必要性，因此在使用浮点数而不是整数时可能会提高性能。

我做了一个小实验并编写了一个简单的程序，该程序只是循环并将 1.0f 添加到变量中。结果表明，这可以达到 16777216.0f ..再向数字添加 1.0f 将使数字保持不变.. . 所以我想知道这个数字是最大数字，就运算符 +,-,* 而言，仅涉及整数将导致准确的整数结果，比如 +/-0.0001 精度？

问候丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:36:37.810

Jonathan Dursi 在他的评论中指出了一些重要的链接来解释浮点。

如果你看，你会注意到 16777216 是 2^24。浮点（单精度）有 23 位加上隐含的“1”（因为值是标准化的）。使用 24 位，您将能够表示从 1.0 * 2^0 到 1.11..11b * 2^23 的任何整数（实际上您也可以得到负数，因为符号位是分开的，并且使用特殊编码为零）。您会得到额外的值 (2^24)，因为它可以表示为 1.0 * 2^24。

当您尝试将 1 添加到 2^24 时，您会发现您会遇到 Jonathan 发布的链接中描述的舍入错误。

因此，对于整数，您需要将范围限制为 [-2^24,2^24]。如果你不能这样做，你要么需要仔细检查，要么将自己限制为整数！

# twitter-bootstrap - Twitter Bootstrap：浏览器找不到 Helvetica Neue 字体

> ID：13177708
> 
> 赞同：1
> 
> 时间：2012-11-01T13:04:00.937
> 
> 标签：twitter-bootstrap

我使用 twitter Bootstrap 并遇到了 Helvetica Neue 字体的问题。我的系统有这种字体 - Photoshop 将其显示为“Helvetica Neue LT Com”（屏幕截图），我正在尝试使用下一个声明：“Helvetica Neue”、“Helvetica Neue LT Com”、“Helvetica Neue LT Com 37 Thin Condensed” , Helvetica, Arial, sans-serif; 但我的浏览器总是使用 Arial。为什么？

[![http://imageshack.us/a/img545/6721/fontsn.jpg](../Images/4a73f7898f8bdd8060c74cf4178eab36.png)](https://i.stack.imgur.com/BMJsc.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:11:43.750

Helvetica 没有完整的浏览器支持；老实说，没有多少字体是完全网络安全的。

可以尝试使用[fontsquirrel](http://www.fontsquirrel.com/)生成字体生成；但根据经验，尝试以这种方式使用 Helvetica 时遇到了问题。

其他替代方法可能是使用来自 fontsquirrel 或[Google Web Fonts的类似字体，或者尝试在](http://www.google.com/webfonts)[CSS Font Stack](http://cssfontstack.com/)上找到一种 Web 安全字体，该字体显示 Mac OS X 和 Windows 上的字体支持，从该链接您可以看到 Helvetica 100% 受支持在 Mac 上，但在 Windows 上仅为 7.34%。

要点是不要使用 Helvetica。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:13:18.367

从问题和 Photoshop 屏幕截图中很难准确判断您的最终目标是什么，但基本上浏览器只会显示一些预定义[字体系列](http://www.w3schools.com/cssref/pr_font_font-family.asp)中的字体。因为 Helvetica 与 Arial 非常相似，即使您可以将 Helvetica 指定为显示字体，它也会默认为 Arial。

您确实可以通过诸如[Google Web Fonts](http://www.google.com/webfonts#AboutPlace%3aabout)之类的 Web 服务获得一些额外的选项，它本质上提供了一个 API，您可以指向该 API，以便获得用于浏览器显示的独特字体。这确实需要对 HTML、CSS 和 JavaScript 有基本的了解。

# android - 自定义进度条（无图像）

> ID：13177710
> 
> 赞同：1
> 
> 时间：2012-11-01T13:04:10.170
> 
> 标签：android, android-custom-view

我想创建一个图像中指定的进度条。我对如何创建自定义视图知之甚少。我检查了很多教程，但找不到起点。我没有关于进度条的图像。我应该画出来 我尝试覆盖 ondraw 方法，但我无法获得确切的外观。

这是图像：![图片](../Images/e6badd53abda13d476dfc97f83def12c.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:17:41.523

首先，您只需要一张加载弧的图像，因为它们是可复制的。

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

```
public class CustomView extends View 
{
public CustomView(Context context) 
{
    super(context);
}

protected void onDraw(Canvas canvas)
{
    canvas.drawBitmap(REFERENCETIBITMAPHERE, 0, 0, null);
}

@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
 {
    setMeasuredDimension(measureWidth(widthMeasureSpec), measureHeight(heightMeasureSpec));
 }

private int measureWidth(int measureSpec)
{
    int preferred = REFERENCETIBITMAPHERE.getWidth();
    return getMeasurement(measureSpec, preferred);
}

private int measureHeight(int measureSpec)
{
    int preferred = REFERENCETIBITMAPHERE.getHeight();
    return getMeasurement(measureSpec, preferred);
}

private int getMeasurement(int measureSpec, int preferred)
{
    int specSize = MeasureSpec.getSize(measureSpec);
    int measurement = 0;

    switch(MeasureSpec.getMode(measureSpec))
  {
    case MeasureSpec.EXACTLY:
        measurement = specSize;
        break;
    case MeasureSpec.AT_MOST:
        measurement = Math.min(preferred, specSize);
        break;
    default:
        measurement = preferred;
        break;
  }
    return measurement;
}
} 
```

您将需要创建自己的方法来接收某种指示加载进度的值，然后相应地重绘。

例如：

```
protected void onDraw(Canvas canvas)
{
    // Where loadProgress is an int of some sort.
    for(int i = 0; i < loadProgress; i++)
    {
        canvas.drawBitmap(REFERENCETIBITMAPHERE, REFERENCEBITMAPHERE.getWidth() * i, 0, null);
    }
} 
```

我希望这有帮助。=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:16:46.187

请试试这个。

```
private void showProgressDialog() {

    pDlg = new ProgressDialog(activity);
    pDlg.setMessage(processMessage);

    pDlg.setMax(100);
    pDlg.setProgressDrawable(c.getResources().getDrawable(R.drawable.my_progress_bar));
    pDlg.setCancelable(false);
    pDlg.show();

    } 
```

你的图像 = view.getResources().getDrawable(R.drawable.my_progress_bar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:16:56.260

你想创建自己的进度条，然后你可以覆盖任何视图类，覆盖 onDraw 方法并写下你自己的代码。

如果您需要一些示例，那么我将为您提供。

# c# - dbcontext 不包含“刷新”的定义

> ID：13177718
> 
> 赞同：13
> 
> 时间：2012-11-01T13:04:42.290
> 
> 标签：c#, frameworks, entity

我首先使用实体​​框架代码并收到以下编译错误。dbcontext 不包含“刷新”的定义。我见过很多使用 Refresh 方法的例子。但是当我将 Refresh 方法添加到我的 dbcontext 时，我得到了一个编译错误。我正在使用以下命名空间。

```
using System.Data;
using System.Data.Entity;
using System.Data.Linq; 
```

我缺一个吗？我试图查找它，但没有找到命名空间。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-01T13:07:34.423

DbContext 确实没有 Refresh() 方法。

您看到的示例可能正在使用[ObjectContext.Refresh()](http://msdn.microsoft.com/en-us/library/bb503718.aspx)。

你可以从另一个得到一个：

```
 db = new MyDbContext())
 ...   
 var ctx = ((IObjectContextAdapter)db).ObjectContext;
 ctx.Refresh(); 
```

这个[问题](https://stackoverflow.com/q/5340990/60761)有更多关于细节和差异的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:07:38.490

LINQ-to-SQL 有一个令人困惑的相似[`DataContext`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)类，它具有此方法。

实体框架：没有。

# r - R指挥官中S_Dbw输出中的“Inf”是什么意思？

> ID：13177720
> 
> 赞同：2
> 
> 时间：2012-11-01T13:04:49.050
> 
> 标签：r, cluster-analysis

我已经运行了 clv 包，它由 S_Dbw 和 SD 有效性索引组成，用于在 R 指挥官中进行聚类。(http://cran.r-project.org/web/packages/clv/index.html)

我使用 S_Dbw 索​​引评估了 DBSCAN、K-Means、Kohonen 算法的聚类结果。但是对于所有这三种算法，S_Dbw 都是“Inf”。

是“无限”的意思吗？为什么我要面对“Inf”。我的聚类结果有问题吗？

一般来说，S_Dbw 索​​引结果是什么时候“Inf”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:10:09.437

*将不同*算法与此类索引进行比较时要小心。

原因是索引本身几乎就是一种算法。对于每个索引，一个特定的聚类必然是“最好的”。索引和实际聚类算法之间的主要区别在于索引不会告诉您如何找到“最佳”解决方案。

一些例子：k-means 最小化从集群成员到集群中心的距离。单链路层次聚类将找到分区之间具有最佳最小距离的分区。好吧，DBSCAN 会找到数据集的分区，其中所有密度连接的点都在同一个分区中。因此，DBSCAN 是最佳的 - 如果您使用适当的措施。

严重地。不要假设因为一种算法在特定度量中的得分高于另一种算法就意味着该算法工作得更好。您通过这种方式发现的所有内容是**特定算法与特定度量更（相关）相关**。在概念层面上，将其视为度量和算法之间的一种相关性。

使用度量来比较*同一*算法的不同结果是不同的。那么显然，一种算法不应该比它本身带来好处。在参数方面可能仍然存在类似的效果。例如，当您增加 k 时，k-means 中的簇内距离*显然*应该下降。

事实上，许多衡量标准**甚至在 DBSCAN 结果上都没有明确定义**。因为 DBSCAN 有噪声点的概念，而索引*没有*AFAIK。

不要假设该措施*会*告诉您什么是“正确的”或“正确的”。更不用说什么是*有用*的或*新的*。因为您不应该使用聚类分析来找到特定度量的数学最优值，而是要了解有关您的数据的新的和有用的东西。这可能不是一些度量值。

回到指数。它们通常完全围绕 k-means 设计。从对 S_Dbw 的简短了解中，我的印象是*一个*“集群”由一个*单一的*对象（例如 DBSCAN 中的噪声对象），该值将变为无穷大 - 即：未定义。似乎该索引的作者没有考虑这种极端情况，而只是在没有出现这种情况的玩具数据集上使用它。R 实现无法解决此问题，除非从原始索引转移，而是将其转换为另一个索引。处理噪声对象和单例对象绝非易事。我还没有看到一个不会以某种方式失败的索引——通常，诸如“所有对象都是噪声”之类的解决方案要么得分完美，要么通过将每个噪声对象放在最近的位置来轻松改进每个聚类非单例集群。如果您*希望*您的算法能够说“这个对象不属于*任何*集群”，那么我不知道任何合适的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:07:45.833

IEEE 浮点标准将`Inf`和`-Inf`分别定义为正无穷和负无穷。这意味着您的结果太大而无法以给定的位数表示。

# c# - 填充数据表时出现 FormatException

> ID：13177722
> 
> 赞同：-1
> 
> 时间：2012-11-01T13:05:02.357
> 
> 标签：c#, asp.net, mysql

`FormatException`这行代码中总是有一个抛出，它说：

> 输入字符串的格式不正确。

这是代码：

```
private void btnRegister_Click(object sender, EventArgs e)
{
    try
    {
        con.Open();
        MySqlCommand cmd = new MySqlCommand();
        cmd.Connection = con;
        cmd.CommandType =CommandType.Text;

        cmd.CommandText = "SELECT DriverID, FirstName, LastName FROM Driver WHERE FirstName = @FirstName AND LastName = @LastName or DriverID = @DriverID";
        cmd.Parameters.AddWithValue("@FirstName", MySqlDbType.VarChar).Value = txtEmployeeFN.Text;
        cmd.Parameters.AddWithValue("@LastName", MySqlDbType.VarChar).Value = txtEmployeeLN.Text;
        cmd.Parameters.AddWithValue("@DriverID", MySqlDbType.VarChar).Value = txtEmpID.Text;
        MySqlDataAdapter adp = new MySqlDataAdapter();
        adp.SelectCommand = cmd;

        DataTable Mydt = new DataTable();

        adp.Fill(Mydt); <===Here is the line where the exception is

        con.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:09:06.007

您不需要 AddWithValue 和`.Value`. 利用：

```
 cmd.Parameters.AddWithValue("@FirstName", txtEmployeeFN.Text);
        cmd.Parameters.AddWithValue("@LastName", txtEmployeeLN.Text);
        cmd.Parameters.AddWithValue("@DriverID", txtEmpID.Text); 
```

如果要强制类型，请使用`Add`：

```
 cmd.Parameters.Add("@FirstName", MySqlDbType.VarChar).Value = txtEmployeeFN.Text;
    cmd.Parameters.Add("@LastName", MySqlDbType.VarChar).Value = txtEmployeeLN.Text;
    cmd.Parameters.Add("@DriverID", MySqlDbType.VarChar).Value = txtEmpID.Text; 
```

顺便检查一下，确保你的表格字段都是 VarChars。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:28:25.137

你不需要像这样添加参数，你应该简单地试试这个：-

```
cmd.CommandText = string.format(
"SELECT DriverID, FirstName, LastName 
FROM Driver WHERE FirstName = {0} AND LastName = {1} OR DriverID = {2}", 
txtEmployeeFN.Text.trim(),txtEmployeeLN.Text.trim(), txtEmpID.Text.trim()); 
```

如果输入字符串的格式仍然不正确，则说明存在语法问题。

为什么不在 Visual Studio 中打开服务器资源管理器并在您创建的数据连接上创建查询，它模仿您在代码中所做的事情。

Visual Studio 将显示您需要在代码中使用的 SQL 查询文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:13:02.823

我看到一些可能是问题的事情：

```
SELECT DriverID, FirstName, LastName 
FROM Driver 
WHERE FirstName = @FirstName 
    AND LastName = @LastName 
    or DriverID = @DriverID 
```

1.  DriverID 是整数吗？如果是这样，参数类型应该是整数，而不是`VarChar`
2.  如果`@DriverID`不是字符串格式的有效整数值，则可能引发此异常
3.  您的 where 子句可能无效。您应该对您正在使用的条件进行分组`OR`：

```
 WHERE (FirstName = @FirstName 
    AND LastName = @LastName)
    or DriverID = @DriverID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:08:57.580

像这样使用`AddWithValue`：

```
cmd.CommandText = "SELECT DriverID, FirstName, LastName FROM Driver WHERE FirstName = @FirstName AND LastName = @LastName or DriverID = @DriverID";
cmd.Parameters.AddWithValue("@FirstName", txtEmployeeFN.Text);
cmd.Parameters.AddWithValue("@LastName", txtEmployeeLN.Text);
cmd.Parameters.AddWithValue("@DriverID", txtEmpID.Text); 
```

但请注意，如果您使用的是**ODBC**，则不能使用命名参数。您必须使用位置参数。

# windows-phone-8 - 我可以在 Windows Phone 8 上将一些数据写入 SD 卡吗

> ID：13177731
> 
> 赞同：4
> 
> 时间：2012-11-01T13:05:35.707
> 
> 标签：windows-phone-8

我查看了Windows Phone 8 SDK文档，发现我们可以从SD卡读取数据，但是我们不能写东西，我的理解对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T14:52:49.547

您可以使用 ExternalStorage API 和 ID_CAP_REMOVABLE_STORAGE 功能获得对 SD 卡上指定文件的只读访问权限，但不能写入此存储。
[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720573(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720573(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:02:24.163

第三方应用程序不能直接写入应用程序的独立存储之外的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T05:54:05.140

UC 浏览器可以将文件导出到 sd 卡。我认为他们可以访问普通开发人员无法使用的扩展 API，我已经尝试与他们联系以了解他们是如何做到的，但到目前为止我还没有得到答复。所以，是的，这是可能的，但是他们实施的聪明的黑客或方法是不公开的。这是更多信息，[http ://forums.wpcentral.com/windows-phone-8/266236-developers-given-access-sd-card.html](http://forums.wpcentral.com/windows-phone-8/266236-developers-given-access-sd-card.html)

# shell - pexpect 响应包括请求的回声

> ID：13177732
> 
> 赞同：0
> 
> 时间：2012-11-01T13:05:40.910
> 
> 标签：shell, python-2.7, pexpect

我以前使用过`pexpect`and `sendline`，但这次我使用*管道*和*通配符*运行更长的命令，见下文：

```
commandToRun='/bin/bash -c "/var/scripts/testscripts//extract -o | tail -3"'
returnedString = sendLine(commandToRun) 
```

我的具有 sendLine 函数的类看起来很像这样：

```
 self.connection = pexpect.spawn('%s %s' % (protocol, host))
    self.connection.setecho(False)
    self.connection.setwinsize(300, 300) 
```

但是当我运行代码时，我看到它`returnedString`不仅包括响应，还包括请求。

所以如果我打印`returnedString`，它看起来像这样：

```
bin/bash -c "/var/scripts/testscripts//extract -o | tail -3"<cr>
100<cr>
102<cr>
103<cr> 
```

*为什么响应将请求包含在同一个缓冲区中？* 我已经设置`setecho(False)`了，它没有帮助！

编辑：（正确修复）我必须手动从响应中删除所有内容并删除请求。所以 setecho(False) 仍然什么都不做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:16:57.337

我自己找到了解决方案。（关闭回声作为回应）

```
commandToRun = 'bash -c "less /readfile | tail -4"'
yourConnection.sendLine("stty -echo")
commandResult = yourConnection.sendLine(commandToRun)
self.sendLine("stty echo") 
```

所以基本上，使用' `bash -c`'在shell中运行你的命令，然后`echo`在bash中打开。

# database - 这种方案使用什么类型的树？

> ID：13177733
> 
> 赞同：0
> 
> 时间：2012-11-01T13:05:42.107
> 
> 标签：database, database-design, tree

我正在尝试建立一个联系人管理器。我想到了一个具有几个属性的数据结构：

*   它是树状的，这意味着每条信息都可以分成子块（每个节点都有子节点）。例如，一个名为的字段`address`可能由`street`、`town`、`postal code`等子字段组成。

*   节点不必是唯一的，例如该`email`字段的多个节点应该能够彼此相邻共存（在同一级别）

我希望能够使用类似路径的方式探索树，例如通过路径访问节点：`address.street`或`name.first`. 访问其密钥多次出现的节点可以像`email[2]`.

所以一棵树可能看起来像：

```
contact
   ↳ name
        ↳ first      "foo"
        ↳ last       "von bar"
   ↳ email           "foo@bar.com"
   ↳ email           "baz@foo.de"
   ↳ address
           ↳ street  "foostreet 42"
           ↳ town    "barstadt"
           ↳ zip     "04229"
           ↳ country "footopia"
   ↳ address
           ↳ street  "barton alley 11"
           ↳ town    "foostadt"
           ↳ zip     "998877"
           ↳ country "alcabaz" 
```

这是什么树？我尝试过使用 Boost `property_tree`，但发现很难实现`address`应该在高级别拆分的事实（Boost 的标准方法会将`street`, `town`, ... 节点放在一个中`address`）。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:09:27.010

> 这是什么树？

这是一棵树；）

您可以使用 JSON 和 Jackson Lib 对树进行建模：

[http://www.mkyong.com/java/jackson-tree-model-example/](http://www.mkyong.com/java/jackson-tree-model-example/)

# apache-flex - Flex Windows 8 - 软件键盘不出现

> ID：13177736
> 
> 赞同：4
> 
> 时间：2012-11-01T13:05:59.367
> 
> 标签：apache-flex, windows-8

在我们的 Flex 应用程序上，在 Metro 模式下的 Windows 8 上，当触摸 TextInput 时，软件键盘不会出现。奇怪的是，如果你设置 displayAsPassword="true"，那么键盘就会出现。

如何让 TextInput 在 Win8 中使用软键盘？

# php - 在 PHP 简单 HTML DOM 解析器中动态排除内容

> ID：13177740
> 
> 赞同：2
> 
> 时间：2012-11-01T13:06:17.000
> 
> 标签：php, dom, html-parsing

我正在制作一个基于 PHP 的应用程序，它将使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)从站点获取内容。

我想动态地从内容中排除两个 HTML 标记之间的一些文本。

如果内容的源代码是：

```
Some description or content ETC ABC <span class="s"> May 3  2009 <b> ABC Some Text </b> Some photo or video... 
```

我想删除`<span class="s">`第一个`<b>`HTML 标记所包含的所有文本，因此输出将是：

```
Some description or content ETC ABC <span class="s"><b> ABC Some Text </b> Some photo or video... 
```

这应该使用`foreach`循环来完成，其想法是，将所有过滤后的文本放在一个变量中`$ftext`，然后必须应用一些简单的 PHP，如：

```
foreach($html->find('how_to_tell_those_filtered_text_here') as $ftext)
$result = str_replace($ftext, '', $result);
$result = str_get_html($result); 
```

那么，解决方案应该是什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:17:28.843

如果您使用 Arc90 HTML 内容提取器的可读性会更好

# android - 不推荐使用 Android 简单光标和类加载器

> ID：13177742
> 
> 赞同：2
> 
> 时间：2012-11-01T13:06:19.693
> 
> 标签：android, sqlite, simplecursoradapter

我正在尝试读取存储在 SQLite 中的数据。我正在关注一个使用简单光标适配器读取数据的教程，但是我现在发现它已被弃用。我读过有关类加载器的信息，但文档表明它适用于 API 11 及更高版本。我的目标级别 API 是 7？有没有人有什么建议？

下面的代码以防万一。

```
public class MyCourses extends ListActivity {

    static final String TEST = "com.example.mycoursetimetable.TEST";
    String [] MODULE;
    EditText EditCode, EditName;

    private database MODULEDATABASE;  
    ListView listContent;

    SimpleCursorAdpater cursorAdpater;
    Cursor cursor;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);

       listContent =(ListView)findViewById(R.id.contentlist);
       MODULEDATABASE = new database(this);

       cursor = MODULEDATABASE.getData();
       String [] from = new String[]{database.KEY_MODULECODE,database.KEY_MODULENAME};
       int[] to = new int[] {R.id.labelModuleCode,  R.id.labelEditModuleFull};

       cursorAdapter = new SimpleCursorAdapter(this,R.layout.listcourses,cursor,from,to);
       listContent.setAdapter(cursorAdapter);

        }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:14:03.533

这不是问题，您仍然可以`Loaders`从`android.support.v4`包装中使用。API 的外观和工作方式与 API >= 11 上的相同，因此任何为正版`Loader`课程设计的教程都适合您。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T15:55:06.517

您可以使用支持包中的 CursorLoader，[http://developer.android.com/reference/android/support/v4/content/CursorLoader.html](http://developer.android.com/reference/android/support/v4/content/CursorLoader.html)。这是一个很好的例子，它讨论了[http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html](http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html)

# javascript - jQueryMobile 对话框关闭按钮触发点击它后面的项目

> ID：13177744
> 
> 赞同：1
> 
> 时间：2012-11-01T13:06:26.447
> 
> 标签：javascript, jquery, jquery-mobile

在 jQuery Mobile 项目中，有一个对话框（不是弹出窗口），其中包含一些字段和两个按钮，样式如下：

```
 <a data-role="button" data-inline="true" data-transition="none" href="#"
            data-icon="check" data-iconpos="left" id="saveEdit">Save
        </a>
        <a data-role="button" data-inline="true" data-transition="none" href="#"
            data-icon="delete" data-iconpos="left" id="closeEdit">Cancel
        </a> 
```

单击其中一个时，单击事件处理程序将关闭对话框：

```
$(document).on("vclick", "#saveEdit", function () {

    LoginCookie(EditDoc, "Y");
    $('.ui-dialog').dialog('close');
}); 
```

但是，当这种情况发生时，还会在对话框“后面”的任何内容上触发 click 事件，几乎就像您正在“通过”对话框按钮点击一样，即使它仍然在按钮上触发 click 事件。有没有办法防止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T00:22:12.187

I'm finding the only thing that works for me is to make the modal blocking, particularly for laggy interfaces, like just about all older Android versions. You're intending for the user to tap on elements within the modal to close it. Here's a pattern as part of your handler:

```
window.setTimeout(function(){
        $(myModal).on({
            popupbeforeposition: function () { //make the popup blocking - no click outside to close
                $('.ui-popup-screen').off();
            }
        }).popup("open");
    }, 500); 
```

Of course, this means the user can't just tap outside the modal to close it. But if you have a lot of form or other interactive elements on the page, I think this is a pretty crucial adjustment for usability.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:03:29.977

这似乎已经解决了它：

```
 $(document).on("vclick", "#saveEdit", function (e) {

            e.preventDefault();

            LoginCookie(EditDoc, "Y");
            $('.ui-dialog').dialog('close');
        }); 
```

# iphone - iphone 的视频是 480 × 270px 是否强制适合 iphone 屏幕？

> ID：13177747
> 
> 赞同：0
> 
> 时间：2012-11-01T13:06:33.363
> 
> 标签：iphone, video

视频大小为尺寸：480 × 270px。编解码器：H.264，AAC 带字幕，适合宽度，但在 iphone 屏幕上留下黑色间隙：屏幕顶部和底部。

是否可以根据高度尺寸强制视频适合屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:38:03.420

查看您正在播放此视频的封闭控件的[autoresizedSubviews](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW6)和[contentMode View 属性 - 在情节提要中使用它们。](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW99)对于您的情况，大部分内容模式 = UIViewContentModeScaleToFill 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:42:36.020

iphone 3.x/4.x 系列中 a 的纵横比是 4:3。任何 4:3 宽高比的视频都将在播放时全屏播放。您需要确保您的视频具有相同的宽高比，并且在视频中，原始视频中没有空白（通过在任何桌面播放器上检查）

# c - 如果我在 malloc'd 结构中声明一个信号量并且我释放（）该结构，我还需要销毁信号量吗？

> ID：13177753
> 
> 赞同：0
> 
> 时间：2012-11-01T13:06:45.913
> 
> 标签：c

与C编程有关。

假设我这样做：

```
struct myStruct
{
    pthread_mutex_t myMutex;
    sem_t mySemaphore;
}; 
```

`

我 malloc 适当的大小并初始化信号量：

```
myStruct *create_myStruct()
{
    myStruct *temp; 

    temp = (myStruct *) malloc(sizeof(myStruct));
    sema_init(&sema, 0, 0);
    pthread_mutex_init(&(temp->myMutex), NULL);
    return temp;
} 
```

我还需要手动销毁信号量还是只调用 free 就可以了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:08:33.233

您需要销毁互斥锁*​​和*信号量，这需要在释放内存*之前发生。*否则你有资源泄漏，你的程序有未定义的行为。

一方面，你应该在心理上区分对象和它们所代表的状态，另一方面，对象存储在其中的内存。双方都不知道对方，两者都需要单独设置和拆除（并且以相反的顺序）。

# sql - 刷新表格链接

> ID：13177754
> 
> 赞同：0
> 
> 时间：2012-11-01T13:06:45.990
> 
> 标签：sql, database, vba, ms-access, linked-tables

我在浏览 Web 时发现了以下函数，它允许我在执行时将表动态链接到我的 Access 数据库：

```
Function createAttached(strTable As String, strPath As String, strBaseTable As String) As Boolean

'************************************************************************************
'* Create an attached table in the current database from a table in a different MDB file.
'* In:                                                                              *
'*   strTable - name of linked table to create                                      *
'*   strPath - path and name of MDB file containing the table                       *
'*   strBaseTable - name of table in strPath MDB                                    *
'* Out:                                                                             *
'*   Return value: True/False, indicating success                                   *
'* Modifies:                                                                        *
'*   Nothing, but adds a new table.                                                 *
'************************************************************************************

On Error GoTo CreateAttachedError

Dim tdf As TableDef
Dim strConnect As String
Dim fRetval As Boolean
Dim myDB As Database

    DoCmd.SetWarnings False
    Set myDB = CurrentDb
    Set tdf = myDB.CreateTableDef(strTable)

    With tdf
        .Connect = ";DATABASE=" & strPath
        .SourceTableName = strBaseTable
    End With

    myDB.TableDefs.Append tdf

    fRetval = True

    DoCmd.SetWarnings True

CreateAttachedExit:
    createAttached = fRetval
    Exit Function

CreateAttachedError:
    If Err = 3110 Then
        Resume CreateAttachedExit
    Else
        If Err = 3011 Then
            Resume Next
        End If
    End If

End Function 
```

此脚本有效，但是，如果表已链接，则它什么也不做（但仍会触发错误事件）。我希望使用相同的脚本来删除链接表（如果存在），或者至少刷新该链接以使路径正确。我不知道如何做到这一点，它可能很简单，但我不知道从哪里开始。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:50:09.510

这是我使用的。它还在尝试刷新链接之前测试表是否为链接表。此代码假定您要链接的数据库与您要链接的数据库位于同一文件夹中。如果没有，请删除“Application.CurrentProject.Path”并添加适当的路径。

```
Public Sub RelinkTables()
    Dim dbs As Database
    Dim Tdf As TableDef
    Dim Tdfs As TableDefs
    Set dbs = CurrentDb
    Set Tdfs = dbs.TableDefs
    For Each Tdf In Tdfs
        If Tdf.SourceTableName <> "" Then 'If the table source is other than a base table
            Tdf.Connect = ";DATABASE=" & Application.CurrentProject.Path & "\filename.accdb" 'Set the new source
            Tdf.RefreshLink 'Refresh the link
        End If
    Next 'Goto next table
End Sub 
```

# mysql - 在两列中查找具有最大匹配字符串的行

> ID：13177756
> 
> 赞同：0
> 
> 时间：2012-11-01T13:06:51.297
> 
> 标签：mysql, sql

说我有这个：

```
page_url                      | canvas_url
---------------------------------------------------------------
http://www.google.com/        | http://www.google.com/barfoobaz
http://www.google.com/foo/bar | http://www.google.com/foo 
```

我想找到按最长匹配排序的字符串开头的行。我面临的问题是找到最长的匹配字符串，而不仅仅是匹配的行也有匹配的行。IE

[http://www.google.com/foo](http://www.google.com/foo)匹配`page_url`第 1 行和`canvas_url`第 2 行，但如果它是两列的长度而不是匹配，它会认为第 1 行是更好的匹配，因为`canvas_url`第 1 行更长。

我可以抓取所有匹配项，然后在代码中过滤长度，如下所示：

```
SELECT *, LENGTH(canvas_url), LENGTH(page_url)
FROM app 
WHERE
    'http://www.google.com/foo' LIKE CONCAT(canvas_url, '%') OR
    'http://www.google.com/foo' LIKE CONCAT(page_url, '%') 
```

`canvas_url`或者执行 2 个子选择来获取各自的顶部匹配项`page_url`，然后在代码中将其过滤为 1，但我更愿意（除非有任何荒谬的性能问题）让数据库只返回我需要的内容。

我最关心的是 MySQL，但我需要以 SQLite 和 Postgress 为目标，所以我对其中任何一个的答案都很满意。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:14:06.910

这将有助于获得最长的实际匹配长度（不仅仅是记录中最长的 url）：

```
-- Get page_url matches
SELECT *, LENGTH(page_url) AS MatchLen
FROM app 
WHERE 'http://www.google.com/foo' LIKE CONCAT(page_url, '%') -- can't tell from question if this should be reversed
UNION ALL
-- Get canvas_url matches
SELECT *, LENGTH(canvas_url) AS MatchLen
FROM app 
WHERE 'http://www.google.com/foo' LIKE CONCAT(canvas_url, '%')
-- Bring the longest matches to the top
ORDER BY MatchLen DESC -- May need to add a tie-breaker here
LIMIT 1 
```

这是[SqlFiddle 上的一个运行示例](http://www.sqlfiddle.com/#!2/d0b96/4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:11:58.497

也许你只需要这样的东西？

```
SELECT page_url as url, LENGTH(page_url) as len
FROM pages WHERE 'http://www.google.com/foo' LIKE CONCAT(page_url, '%')
UNION
SELECT canvas_url as url, LENGTH(canvas_url) as len
FROM pages WHERE 'http://www.google.com/foo' LIKE CONCAT(canvas_url, '%')
ORDER BY len DESC
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:55:28.243

如果您只需要查找第一行，则需要 order by 和 limit。您必须对如何安排它有点聪明：

```
SELECT *, LENGTH(canvas_url), LENGTH(page_url)
FROM app 
WHERE canvas_url like concat('http://www.google.com/foo' '%') OR
      page_url like concat('http://www.google.com/foo', '%')
order by (case when canvas_url like concat('http://www.google.com/foo' '%') and
                    page_url like concat('http://www.google.com/foo', '%') and
                    LENGTH(canvas_url) < LENGTH(page_url)
               then LENGTH(page_url)
               when canvas_url like concat('http://www.google.com/foo' '%') and
                    page_url like concat('http://www.google.com/foo', '%') and
                    LENGTH(canvas_url) >= LENGTH(page_url)
               when canvas_url like concat('http://www.google.com/foo' '%')
               then LENGTH(canvas_url)
               else LENGTH(page_url)
          end)
limit 1 
```

这是按较长的匹配字符串排序，然后正好返回一行。请注意，这`LIMIT`不是标准的，因此不同的数据库具有不同的返回一行的机制。

# php - 设置语言环境 php 如何工作？以及它如何与 php date 一起使用？

> ID：13177757
> 
> 赞同：1
> 
> 时间：2012-11-01T13:06:52.537
> 
> 标签：php, wordpress

我正在使用此代码：`date("M j, Y", $end);`显示日期。

问题是我有多语言网站，带有 wordpress + qtranslate。

现在 M 是有问题的，因为它没有被翻译。我阅读了有关 setlocale php 的信息，有人关心解释它是如何工作的，或者它是否会起作用？

或者也许我应该找到一些特殊的 qtrnaslate 函数来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:23:37.937

Wordpress 有自己的国际日期日期格式化函数[date_i18n](http://codex.wordpress.org/Function_Reference/date_i18n)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:11:20.677

从手册开始`date()`

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

> 要格式化其他语言的日期，您应该使用 setlocale() 和 strftime() 函数而不是 date()。

# java - 带有 Mongodb 的 Java Spring 用户图像上传器

> ID：13177762
> 
> 赞同：2
> 
> 时间：2012-11-01T13:07:05.760
> 
> 标签：java, image, spring, uploader

我创建了一个基本的用户系统，人们可以在其中注册和登录。

它此时存储文本数据，但我想扩展代码以允许用户上传自己的图像。

我正在使用 mongodb，因此我可以在创建用户时将用户 ID 作为文件夹存储，因为他们添加自己的图像时它将进入该文件夹。

1.如何动态创建这些文件夹以及在哪里。我看过的文件夹通常会存储在WEB-INF中。

或者应该/可以将图像存储为 mongodb 中的 blob 文件？

2.如何在正确的位置正确地将图像复制/存储到这些文件夹中。

我已经尝试从这里调整代码[http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html](http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html)

它目前与用户无关，也没有将图像组织到文件夹中。最终我想自动缩放/裁剪图像以产生各种缩略图大小。

* * *

*文件上传.java*

 `````
package net.fileupload;

import org.springframework.web.multipart.MultipartFile;
public class FileUpload {
 MultipartFile file;
 public void setFile(MultipartFile file){
  this.file=file;
  }
 public MultipartFile getFile(){
  return file;
  }
 } 
````  `* * *

*文件上传控制器.java*

`package net.fileupload;`

 ````
 import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;
        import org.springframework.validation.BindException;
        import org.springframework.web.multipart.MultipartFile;
        import org.springframework.web.servlet.ModelAndView;
        import org.springframework.web.servlet.mvc.SimpleFormController;
        import java.io.InputStream;
        import java.io.OutputStream;
        import java.io.FileOutputStream;
        import java.util.*;

        import net.fileupload.FileUpload;;

        public class FileUploadController extends SimpleFormController{

          @Override
          protected ModelAndView onSubmit(HttpServletRequest request,
                   HttpServletResponse response, Object command, BindException errors)
                   throws Exception {
             FileUpload fileUpload = (FileUpload)command;
             MultipartFile multipartFile = fileUpload.getFile();
             String fileName="";

             // image type of file processing...
             System.err.println("-------------------------------------------");
             try {
               InputStream inputStream = null;
               OutputStream outputStream = null;
               if (multipartFile.getSize() > 0) {
                  inputStream = multipartFile.getInputStream();
                  fileName = request.getRealPath("") + "/images/"+ multipartFile.getOriginalFilename();
                  System.out.println(fileName);
                  outputStream = new FileOutputStream(fileName);
                  int readBytes = 0;
                  byte[] buffer = new byte[2000000];
                  while ((readBytes = inputStream.read(buffer, 0, 2000000)) != -1) {
                     outputStream.write(buffer, 0, readBytes);
                   }
                  outputStream.close();
                  inputStream.close();
                }       
              } catch (Exception e) {
                 e.printStackTrace();
              }
             // .......................................... 
             Map model = new HashMap();
             model.put("fileName", multipartFile.getOriginalFilename());
             model.put("filepath", "images/"+multipartFile.getOriginalFilename());

             return new ModelAndView(getSuccessView(), model);
           }
         } 
````  `* * *

*FileUploadValidator.java*

`package net.fileupload;`

 ````
 import org.springframework.validation.Errors;
    import org.springframework.validation.Validator;
    import net.fileupload.FileUpload;

    public class FileUploadValidator implements Validator{
        @Override
        public boolean supports(Class clazz){
            return FileUpload.class.isAssignableFrom(clazz);
         }  
        @Override
        public void validate(Object target, Errors errors){
          FileUpload fileUpload = (FileUpload)target;
          if(fileUpload.getFile().getSize()==0){
               errors.rejectValue("file", "error.empty.file", "Please Select File.");
            }
          System.out.println(fileUpload.getFile().getSize());

          if(fileUpload.getFile().getSize() > 2000000){
               errors.rejectValue("file", "error.empty.file", "File size more than 2000000 bytes ");
            }
        }
    } 
````  `**检索图像。**

理论上，以下内容应返回与用户相关的图像列表。不妨将这些图像作为 json 数组返回。

* * *

画廊控制器

`import java.util.ArrayList;`

 ````
 import java.util.List; 

        import com.mongodb.BasicDBObject;

        import com.mongodb.DBObject;

        public class GalleryController{

            public static List<DBObject> getGallery(){

                //__Prepare response
                List<DBObject> images = new ArrayList<DBObject>();
                BasicDBObject results = new BasicDBObject();

                BasicDBObject result = new BasicDBObject();

                    result.put("image1", "/images/Bannan.jpg");
                    result.put("image2", "/images/Koala.jpg");
                    result.put("image3", "/images/Monkey.jpg");

                    results.put("images", result);
                    images.add(results);

                return images;
            }

        } 
````  `* * *

侦听器控制器

 `/* * Gallery methods */`

 ````
 @RequestMapping(method=RequestMethod.GET, value={"/gallery"})
    public ModelAndView galleryDisplay(
            HttpServletRequest request, 
            HttpServletResponse response,
            @RequestParam(value="mode", required=false) String mode
        ) {
            String message = "search view for "+mode;

            List<DBObject> images = GalleryController.getGallery();
            System.out.println(images);

            String viewPage = "gallery/galleryview";

            return new ModelAndView(viewPage, "images", images);
    } 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:11:07.187

我当前的用户控制器看起来像这样。

如果我可以在这个级别为用户连接图像并将其提供给模板，那就太好了。

我当前的映射在以 id 作为参数的情况下效果很好。本地主机：8080/user?id=1312321321

 `````
/*
* User
*/
@RequestMapping(method=RequestMethod.GET, value={"/user","/user/{id}"})
public ModelAndView profileDisplay(
HttpServletRequest request,
HttpServletResponse response,
@RequestParam(value="id", required=false) String id
) throws UnknownHostException, MongoException {
ServiceSerlvet.appendSesssion(request);
//get search ALL users
BasicDBObject searchQuery = new BasicDBObject();
searchQuery.put("_id", new ObjectId(id));
List<DBObject> searchResponse = 
PersonController.searchUsers(searchQuery);

//System.out.println("response from search user method: 
"+searchResponse);

return new ModelAndView("user", "people", searchResponse);
} 
```````````

# mysql - 关于在 sql 中获取自动列

> ID：13177765
> 
> 赞同：4
> 
> 时间：2012-11-01T13:07:20.297
> 
> 标签：mysql, sql, sql-server, sql-server-2008, sql-server-2005

我在一个表中基本上有 50 个字段，我想定期从表中选择这些字段。

**问题是**：我必须手动编写所有这 50 个字段。

在智能或任何其他工具中是否有任何捷径可以让我获得所有领域。自动按下工具。

另外，如果有人知道这里有关于 sql 的额外插件，请在此处发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:32:45.547

我在这里参加聚会有点晚了（答案已经被接受）但无论如何……

您知道可以将表格中的列拖到 Sql Server 管理工作室的编辑器窗口中吗？

因此，要获取列，您可以在 SSMS 中展开表格，单击`Columns` *项目*（因为缺少更好的词）并将其拖到编辑器窗口。释放时，表格所有列的逗号分隔列表将插入到编辑器中您指向的位置。

它不像 autoexpanding 那样容易`*`，但是当你有很多列时它是一个很好的小技巧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:11:20.857

检查此[http://www.devart.com/dbforge/sql/sqlcomplete/download.html](http://www.devart.com/dbforge/sql/sqlcomplete/download.html)链接。它可能会帮助你。
它是一个很棒的 sql 智能感知工具。它具有提高生产力的所有功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:59:51.827

试试这个：

```
select name+',' from sys.columns where object_id=OBJECT_ID('tablename') 
```

现在您只需要复制结果并放在 select 关键字之后

# sed - sed 或 awk 删除模式匹配之间的行，不包括第二个标记的行

> ID：13177772
> 
> 赞同：0
> 
> 时间：2012-11-01T13:07:34.260
> 
> 标签：sed, awk

我有一个 sed 命令，它将成功打印匹配两种模式的行：

```
 sed -n '/PAGE 2/,/\x0c/p' filename.txt 
```

我没有想到的是，我希望它打印从第一个标记*到*第二个标记的所有行。`\x0c`令牌是一个大平面文件上的记录分隔符，我需要保持那行完整 。

在这两个令牌之间，数据是完全可变的，我没有可靠的锚点可以使用。

[澄清] 现在它打印所有之间的行`/PAGE 2/`和`/\x0c/`包括在内的所有行。我希望它打印`/PAGE 2/`到记录中的下一个`/\x0c/`。

[测试数据]`/x0c`将在该记录的第一行开头和最后一行开头。

我需要删除记录的第一行，通过下一条记录开始之前的行。

```
^L20-SEP-2006 01:54:08 PM         Foobars College                          PAGE 2
TERM: 200610               Student Billing Statement                     SUMDATA
99999

Foo bar                                                              R0000000
999 Geese Rural Drive                                           DUE: 15-OCT-2012
Columbus, NE 90210

--------------------------------------------------------------------------------
       Balance equal to or greater than $5000.00    $200.00
       Billing inquiries may be directed to 444/555-1212 or by
       email to bursar@foobar.edu.  Financial Aid inquiries should
       be directed to 444/555-1212 or finaid@foobar.edu.
^L20-SEP-2006 01:54:08 PM         Foobars College                          PAGE 1 
```

[预期结果]

```
 ^L20-SEP-2006 01:54:08 PM         Foobars College                          PAGE 1 
```

文件中会有多条这样的记录。我只能依靠`/PAGE 2/`令牌和`/x0c/`令牌。

[解决方案]：

在 Choruba 的带领下，我将他的命令编辑为：

`sed '/PAGE [2-9]/,/\x0c/{/\x0c$/!d}'`

大括号中的规则将自身应用于*任何*包含 a 的行`^L`，并选择性地忽略它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T13:21:13.110

编辑：OP提出的新问题的新答案（如何删除记录：

给定一个带有 control-Ls 分隔记录的文件，并希望从特定记录中打印特定行，只需将记录分隔符设置为 control-L，将字段分隔符设置为“\n”，然后打印任何你喜欢的内容。例如，要从他发布的输入中获取 OP 说他想要的输出，只需：

```
awk -v RS='^L' -F'\n' 'NR==3{print $1}' file 
```

此处显示的 ^L 表示文字 control-L，它是第三条记录，因为在输入文件中第一个 control-L 之前有一条空记录。

#

这是OP提出的原始问题的答案：

你要这个：

```
awk '/PAGE 2/ {f=1} /\x0c/{f=0} f' file 
```

但也试试这些看看差异（未来）：

```
awk '/PAGE 2/ {f=1} f; /\x0c/{f=0}' file
awk 'f; /PAGE 2/ {f=1} /\x0c/{f=0}' file 
```

最后，仅供参考，以下成语描述了如何在给定特定模式的情况下选择一系列记录进行匹配：

a) 从某个模式打印所有记录：

```
awk '/pattern/{f=1}f' file 
```

b) 以某种模式打印所有记录：

```
awk 'f;/pattern/{f=1}' file 
```

c) 在某种模式之后打印第 N 条记录：

```
awk 'c&&!--c;/pattern/{c=N}' file 
```

d) 在某种模式之后打印除第 N 条记录之外的每条记录：

```
awk 'c&&!--c{next}/pattern/{c=N}1' file 
```

e) 在某种模式之后打印 N 条记录：

```
awk 'c&&c--;/pattern/{c=N}' file 
```

f) 在某种模式之后打印除 N 条记录之外的每条记录：

```
awk 'c&&c--{next}/pattern/{c=N}1' file 
```

g) 从某个模式打印 N 条记录：

```
awk '/pattern/{c=N}c&&c--' file 
```

我将变量名称从“found”的“f”更改为“count”的“c”，因为这更能表达变量的实际含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T13:14:21.730

告诉`sed`不要打印包含字符的行：

```
sed -n '/PAGE 2/,/\x0c/{/\x0c/!p}' filename.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:09:55.167

我认为这会做到：

```
awk '/PAGE 2/{a=1}/\x0c/{a=0}{if(a)print}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:12:49.943

在这一行中，第二个`sed`删除 ( `d`) 最后一行 ( `$`)。

```
sed -n '/^START$/,/^STOP$/p' in.txt | sed '$d' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-06T19:17:48.267

在 Choruba 的带领下，我将他的命令编辑为：

`sed '/PAGE [2-9]/,/\x0c/{/\x0c$/!d}'`

# gwt - 如何在 GWT 应用程序中获取 CSS 更改

> ID：13177779
> 
> 赞同：0
> 
> 时间：2012-11-01T13:07:55.670
> 
> 标签：gwt, tomcat

使用 Tomcat，我通过 Maven 构建了一个新的 WAR。然后我将输出 WAR 复制到`$TOMCAT_HOME/webapps`. 然后，ROOT.war 爆炸，ROOT 出现。

如果我修改`ROOT/style/core.css`，当我重新运行时，我的网络应用程序会在运行时获取这些更改`$TOMCAT_HOME/bin/catalina.sh start`吗？

注意，这是一个 GWT 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:11:08.450

如果您更改文件夹内展开的 WAR 目录中的`webapps`文件，更改将立即可见。您甚至不必重新启动 Tomcat 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:21:03.453

我认为 GWT 有一种开发模式，可以将 CSS 作为静态文件加载，与应用程序的其余部分不同。这将使您可以在您的 gui 中看到磁盘上文件的正常编辑。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideDevMode](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideDevMode)

# php - Jquery 在图库中滑动以进行分页

> ID：13177780
> 
> 赞同：0
> 
> 时间：2012-11-01T13:07:56.187
> 
> 标签：php, html, touch

我已经成功地为其他网站上的幻灯片实现了滑动功能（使用 jquery.touchwipe.1.1.1），但现在有人问我是否可以使用一个根据每页帖子数量自动创建分页结果的画廊来做到这一点（ WordPress）。

在我开始修补它之前，我想知道这是否可能？而不是点击分页圈 - 客户希望能够触摸滑动浏览画廊页面（并且可能一旦图像在灯箱中打开）。

该网站是[http://markreeder.ca](http://markreeder.ca)

我很擅长编辑 php 并深入研究代码，但我绝对不像这个网站上的大多数人那样精通它。任何方向都会受到赞赏，因为我唯一需要做的就是在我儿子睡觉的下班后。

这是页面底部的分页代码：

```
 <div id="portfolio-pagination"><ul style="margin-left: 408px;"><li class="selected"></li><li></li><li></li><li></li></ul></div> 
```

我可以在那里找到一种使用 touchwipe 的方法吗？

先感谢您。

# javascript - 创建页面布局

> ID：13177781
> 
> 赞同：-5
> 
> 时间：2012-11-01T13:07:56.257
> 
> 标签：javascript, jquery, html, css, layout

我想准备一些模板。当用户选择一个时，布局必须改变。 [http://imageshack.us/photo/my-images/163/layoutselection.png/](http://imageshack.us/photo/my-images/163/layoutselection.png/)

我怎么能用javascript做到这一点？它也必须是响应式的。

任何人都可以发送示例或示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:36:14.463

响应式设计并不容易，有人可以给你一个样板代码。

您需要定义您面临的问题：

您有一个带有固定标记的网页，并且您只想通过 javascript 更改其布局？

您的标记是什么，默认情况下您的 css 是什么？

页面的多少部分应该“移动”？在哪种情况下哪个去哪儿？

例如：为布局 6 和 7（在链接图像上）订购相同的标记有点困难，因为在布局 6 中页面有 2 个部分，而在布局 7 中有 5 个部分。

告诉我们你以前做过什么：

你还有设计吗？您是否只是在研究该主题而尚未找到好的示例？你的项目有问题吗？

我的印象是你并不真正知道你想要什么以及你有什么选择。

所以我建议你阅读这篇关于响应式设计的文章。它是什么以及它是如何完成的。

例如，这是一个很好的起点：[http ://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

# actionscript-3 - Flash 调试播放器无法启动

> ID：13177786
> 
> 赞同：0
> 
> 时间：2012-11-01T13:08:25.833
> 
> 标签：actionscript-3, flash, apache-flex, adobe

我的 Flash Debug Player 出现重大问题。有一段时间它无法正常启动，或者至少看起来是这样。每当我访问启用了调试播放器的站点时，我都会得到一个悲伤的拼图和一条消息，说 Macromedia Flash Player 已崩溃。ADL 也是如此，我只能使用 -nodebug 标志运行它。

如果我安装常规 Flash Player 或使用 Chrome 内置的播放器，它就可以正常工作。

如果我没记错的话，这可能是在我在 Firefox 中安装 Flashbug 调试器时开始发生的。

我做了以下事情：

*   尝试安装旧版本的调试播放器
*   在安装新版本之前完全卸载了 flash 和 AIR
*   确保有一个 flashlog.txt 文件

我已将 mm.cfg 编辑为如下所示：

```
ErrorReportingEnable=1
TraceOutputFileEnable=1 
```

当我尝试使用调试播放器或 ADL 时，没有任何内容写入 flashlog.txt，它适用于常规播放器和启用了 -nodbug 的 ADL，所以我猜测播放器的日志记录部分会发生一些事情。运行 ADL 时，我在终端中收到“总线错误：10”。

谁能给我一个提示，或者关于如何解决这个问题的任何想法？当我卸载以进行全新安装或其他操作时，是否有一些隐藏的配置文件没有被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:37:47.707

请你能告诉我你正在运行什么版本。当您尝试从 Flex 或 Flash Builder 调试项目时出现错误？我在尝试使用 Firefox 调试 Flash Builder 中的项目时有类似的情况，解决方案（对我而言）是使用该[程序](http://helpx.adobe.com/flash-player/kb/uninstall-flash-player-windows.html)卸载 Flash Player，然后再次安装正确的版本，在这种情况下尝试使用版本 9 或 10。我希望它会有帮助的

# mono - 用于开发移动 Web 应用程序的 mvc4 模板

> ID：13177793
> 
> 赞同：1
> 
> 时间：2012-11-01T13:08:50.047
> 
> 标签：mono, monodevelop

我是 monoDevelop 3.0.4.7 的新手。因为没有 MVC4 模板所以，有人告诉我如何获取开发移动 Web 应用程序的模板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:24:50.097

虽然 Mono 3.0 现在[包含 MVC4 堆栈](http://tirania.org/blog/archive/2012/Oct-22.html)，但 MonoDevelop 3.0.4 的[发行说明](http://monodevelop.com/Download/What%27s_new_in_MonoDevelop_3.0.4)仅提及对 MVC2 和 MVC3 的支持。

如果您使用的是 MonoDevelop，那么我建议您暂时使用 MVC3。

我还没有遇到 MonoDevelop 的 MVC3 模板，所以对于我的上一个项目，我在 Visual Studio 中创建了一个 MVC3 基本应用程序，然后进行了必要的调整以使其在我的 Mac 上与 MonoDevelop 一起运行。

[此处](http://blog.yojimbocorp.com/2012/08/27/asp-net-mvc3-with-razor-view-engine-using-monodevelop-and-ubuntu-12-04/)和[此处](https://github.com/danielmiladinov/ASP.NET-MVC3-Razor-Mono-Bootstrap)有几个页面提供了有关使用 MonoDevelop 运行 MVC3 应用程序的有用信息。

# testng - 使用 TestNG 自动化功能测试？

> ID：13177801
> 
> 赞同：3
> 
> 时间：2012-11-01T13:09:19.550
> 
> 标签：testng, functional-testing

如何使用 TestNG 自动化功能测试，跨越多个 Java 进程？

我对尝试使用 TestNG 而不是 JUnit 产生了兴趣，因为它声称设计的不仅仅是单元测试，但我还没有找到一个具体的例子来说明如何做到这一点。

我有一个 Java 程序 (p1)，它监听来自某些特殊硬件的事件。它解析这些命令并将它们发送到另一个 Java 进程 (p2)，后者根据命令执行操作。

为了测试整个链条，我设法提出了以下临时解决方案：

1.  我有一个包含“假”硬件命令列表的文本文件
2.  我在 p1 中添加了一个 mock，它读取文本文件而不是监听事件
3.  我执行p1（p2已经在测试环境中运行）
4.  我比较了 p2 的日志输出，以验证它是否与列表中的命令匹配。

我使用一个简单的 shell 脚本来做到这一点——这可以用 TestNG 自动化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:35:20.807

您所拥有的是一个跨越多个进程的执行环境。这意味着您的测试环境必须能够根据需要自动创建这些流程。基本流程是标准的：设置、多次测试、拆卸。但是，设置和拆卸例程需要启动和停止进程、初始化输入、提供特定于测试的环境参数等。

`p1`根据您的描述，程序是否使用 Java似乎并不重要。您可以使用`java.lang.Runtime`来执行`p1`. 您已经预料到需要模拟硬件行为，所以我假设您已经知道如何`p1`在适当的集成测试模式下运行。如果出于某种原因您需要更多功能，`Runtime`请查看[JVMTI](http://docs.oracle.com/javase/6/docs/technotes/guides/jvmti/)，它是用于调试和检测的接口。

根据您想要或需要的测试方式，您可能会在为每个测试用例启动流程时遇到性能问题。在这种情况下，您需要一个进程用于一组测试。在这种情况下，您正在重用一项可能会失败的资产，因为它毕竟是一个测试环境。因此，您需要在每次测试开始时检查该进程是否正在运行。确保这一点的一种方法是将检查放入工厂方法中，该方法将主要的被测对象提供给测试用例。该类`java.lang.Process`不直接允许这种情况发生，但它确实为进程提供标准输入/输出。如果可用，在该通道上实现一个简单的“ping”接口就足够了。其他类型的共享资源也可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:09:43.660

是的，您可以使用 testNG 轻松自动化多个脚本。

TestNG 支持数据驱动测试；即，您在一个方法中提供所有数据，这些数据被传递给测试方法以执行检查（断言）。此外，所有这些都是通过 Annotation 发生的，因此您无需为此编写任何代码。

我会建议您使用 Eclipse 之类的 IDE（如果您还没有使用），并且有可用于 Eclipse 的插件。通过 Eclipse；编写测试用例及其自动化变得非常容易。会建议你只是谷歌; 你会找到足够多的例子。

Junit 4 也同样出色。

# mobile - 使用 yeoman 开发移动网站？

> ID：13177804
> 
> 赞同：1
> 
> 时间：2012-11-01T13:09:30.193
> 
> 标签：mobile, workflow, toolchain, yeoman

我目前正在寻找一种工具/工作流程来支持我创建我们网站的移动版本。由于我们网站的主题，这应该是专用的移动版本，而不是我们主站点的响应版本。

我遇到了 yeoman，它看起来很有前途，有很多我会使用的功能，比如 CSS 和 JS 缩小、Spriting 等，还有很多支持我部署网页的工具。

然而，据我所知，yeoman 的主要关注点是“普通”网络应用程序，而不是移动应用程序。我对吗？是否有人已经将 yeoman 用于移动网站，有哪些经验和/或需要注意的点？有没有其他选择可以考虑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:41:26.270

试试yeoman[的移动样板](https://github.com/sindresorhus/generator-mobile-boilerplate)生成器。
它搭建了[H5BP 移动](http://html5boilerplate.com/mobile/)样板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:18:17.600

你是对的，Yeoman 适用于你想要构建的任何 Web 应用程序；不仅仅是移动特定的。

对于网站的移动版本；它们可以制作成类似于桌面网站，尽管您仍然必须牢记响应能力，因为并非所有设备的大小都相同。

就要考虑的框架而言，[Lungo](http://lungo.tapquo.com/)是一个出色的 UI 框架，可用于制作具有原生外观的网站。

# c# - 将 javascript 写入 ASP.NET 的最佳方式

> ID：13177805
> 
> 赞同：1
> 
> 时间：2012-11-01T13:09:38.773
> 
> 标签：c#, javascript, asp.net, .net

我的场景是用户可以点击页面上的 12 个不同的项目，根据他们点击的项目，一个 div 将填充文本。我在想一个很好的方法是在他们第一次请求时将所有不同的文本字符串传递给客户端，而不是进行 12 次不同的 AJAX 调用。我认为使用初始加载时间预先加载客户端会更好，因为文本字符串无论如何都不长。

我想弄清楚的是在我的 C# 代码后面编写 javascript 字典/hastable 并将其传递给加载页面的最佳方法。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:13:28.097

*   您可以创建 12 个隐藏的 div，用 HTML 填充它们并根据用户单击的内容显示适当的 div。

*   您可以将 Dictionary 对象转换为 JavaScript 对象文字，例如：

```
var pageContent = {
    button1: "some content",
    button2: "some other content"
    // ...
}; 
```

看看[System.Runtime.Serialization.Json 命名空间](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.aspx)和代码的[这个答案](https://stackoverflow.com/questions/5597349/c-sharp-dictionary-to-json)。然后，您可以根据单击的按钮使用内容填充 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:21:16.133

```
protected void btnHey_Click(object sender, EventArgs e)
{
 StringBuilder sb = new StringBuilder();

 sb.Append("<script language='javascript'>alert('HEY');</script>");

 // if the script is not already registered

 if (!Page.ClientScript.IsClientScriptBlockRegistered(Page.GetType(), "HeyPopup"))

      ClientScript.RegisterClientScriptBlock(Page.GetType(), "HeyPopup", sb.ToString());
} 
```

你可以看看这个[http://www.dreamincode.net/forums/topic/185586-aspnet-calling-javascript-from-code-behind/](http://www.dreamincode.net/forums/topic/185586-aspnet-calling-javascript-from-code-behind/)我希望它有帮助......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:29:36.773

从客户的角度来看，您基本上有两种选择：

1.  在页面加载时触发 AJAX 调用以异步获取数据。（见 Sjoerd 的回答）
2.  让 ASP 将数据直接推送到您的 HTML/JavaScript 中。（见 Ewerton / Scorpio 的回答）

如果你不喜欢让 ASP 动态生成你的 JS，你也可以让它输出一个包含你的数据的脚本标签：

```
<script type="text/json" id="strings">
     <asp:Literal runat="server" ID="JavascriptData" />
</script> 
```

产生：

```
 <script type="text/json" id="strings">
     { "div1" : "First String",
       "div2" : "Second String",
       "etc" : "And so on" }
 </script> 
```

然后在你的 javascript 中读取数据：

```
var json = document.getElementById('strings').InnerHTML;
var strings = JSON.Parse(json); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:12:33.120

ScriptManager.RegisterStartupScript 可以解决问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T13:18:31.547

为了自己解决这样的问题，我做了一个返回 JSON 的 HttpHandler：

```
public class JsonData : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
        var json = serializer.Serialize(GetData());
        context.Response.ContentType = "application/json";
        context.Response.Write(json);
    }
} 
```

在我的 ASPX 的 Javascript 中，我使用 jQuery 来检索数据：

```
$.getJSON("/JsonData.ashx", null, function (data) { ... }); 
```

这实际上是一个带外解决方案，因为 ASPX 文件检索带有数据的第二个文件。

我有时也看到是这样的：

```
<script>
    var myData = '<asp:Literal runat="server" ID="JavascriptData" />';
</script> 
```

然后在代码隐藏中填充 JavascriptData。我不太喜欢这种方法，但它很简单而且很有效。不要忘记转义您的报价。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T13:23:41.087

您可以将 html 内容以字符串格式存储在隐藏字段中，也可以从服务器端代码中填充 12 个单独的 div。然后根据按钮点击编写一些javascript来显示隐藏div。

# iphone - 在 iphone 应用程序中从服务器访问和播放视频

> ID：13177807
> 
> 赞同：1
> 
> 时间：2012-11-01T13:09:49.063
> 
> 标签：iphone, video, streaming

我已经尝试研究其他一些问题和答案，但没有找到任何特定于我的问题的内容。

我正在将网络服务器中的视频文件播放到应用程序中 - 标准程序。但是，应用程序承认文件路径是可访问的，但它不会播放文件？我试过 .mov、.m4v (h.264) 等都无济于事。

有谁知道我做错了什么？谢谢

# fullcalendar - 链接到全日历事件

> ID：13177809
> 
> 赞同：0
> 
> 时间：2012-11-01T13:10:02.247
> 
> 标签：fullcalendar

我有一个完整的日历视图，默认显示当前月份视图。我通过 json 调用获取不同的事件，一切正常。

我的问题是。我如何从另一个页面链接到特定事件，以便它在正确日期的“日”视图中打开。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:41:32.717

看看这个小提琴：http: [//jsfiddle.net/100thGear/krJcL/](http://jsfiddle.net/100thGear/krJcL/)

这利用`changeView`和`goToDate`FullCalendar 方法来模拟您需要的内容。

可能会帮助您入门。让我知道这是否有帮助！

# shell - 按变量执行脚本变量

> ID：13177810
> 
> 赞同：0
> 
> 时间：2012-11-01T13:10:05.453
> 
> 标签：shell, unix, scripting, scripting-language

我有一个脚本，它如下所示，

```
instant_client="/root/ora_client/instantclient_11_2"

output=`$instant_client/sqlplus -s HRUSER/HRUSER@TOMLWF <<EOF
set heading off
set feedback off
set lines 10000
set pagesize 10000
select count (1) from onboardingcandidates o, candidatedetails c where o.candidateid=c.candidateid and o.JOININGSTATUS='0091' and to_date(o.joiningdate)=to_date(sysdate+5);
EOF
exit
`

query=(`$instant_client/sqlplus -s HRUSER/HRUSER@TOMLWF <<EOF
set heading off
set feedback off
set lines 10000
set pagesize 10000
select o.candidateid from onboardingcandidates o, candidatedetails c where o.candidateid=c.candidateid and o.JOININGSTATUS='0091' and to_date(o.joiningdate)=to_date(sysdate+5);
EOF`)
i=0
echo "Throwing individual arrays:"
while [ $i -lt $output ]
do
    a=${query[$i]}
    echo Candidate[$i]=$a
    i=$(($i+1))
done 
```

输出：

```
Throwing individual arrays:
Candidate[0]=cand1
Candidate[1]=cand2
Candidate[2]=cand3
Candidate[3]=cand62 
```

所需输出

一切正常。

我需要的是，我一次需要 1 个输出。

即，如果我运行上面的脚本，那么应该控制输出。

它应该在提示符下一次抛出 1 个输出。

这可能吗 ？？

如果您还需要什么，请询问。我希望我能清楚我的怀疑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:33:54.807

所以你正在运行两个查询，一个是获取结果的数量，第二个是获取结果。

如果您只想有一个查询，您可以遍历结果数的计数。由于变量`query`是一个数组，您可以使用：

```
${#query[*]} 
```

作为结果行数，然后使用：

```
while [ $i -lt ${#query[*]} ] 
```

作为循环条件。

如果您想一次显示一个结果，并且需要在它们之间输入，那么您可以`read`在回显之后添加一个。

如果要显示特定的返回行，那么，假设例程按原样调用，那么要显示的行号作为第一个参数传入`$1`，那么可以使用：

```
a=${query[$1]}
echo Candidate[$1]=$a 
```

如果您只想在该行显示结果而不显示`Candidate[]`文本，那么您可以回显：

```
echo ${query[$1]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:35:42.310

如果我正确理解了您的问题，在您的 echo 语句打印输出之前，请输入以下行：

```
read dummy 
```

这将提示您输入一些键，输入后将显示下一行输出。

# iphone - UINavigationController + UITabBar。viewDidLoad 中的垂直定位错误

> ID：13177812
> 
> 赞同：2
> 
> 时间：2012-11-01T13:10:15.413
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbar, xcode4.5

使用 XCode 4.5 & iOS6

我创建了一个带有 UITabBar (NIB) 的 UINavigationController，并且第一次启动的选项卡垂直定位不正确。当您单击第二个选项卡并再次单击第一个选项卡时，垂直定位就可以了。

所以......第一次运行完成后如何正确定位第一个选项卡？

查看错误的定位：

[http://img231.imageshack.us/img231/2159/badbf.png](http://img231.imageshack.us/img231/2159/badbf.png)

我的代码：

AppDelegate.h

```
@interface bib_AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UINavigationController *mainControllercode;
@property (strong, nonatomic) UITabBarController *tabBarController; 
```

在 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // change defaul selected icon tabbar color to orange
    [[UITabBar appearance] setSelectedImageTintColor:[UIColor orangeColor]];

    // Override point for customization after application launch.
    UIViewController *viewController1 = [[agendaViewController alloc] initWithNibName:@"agendaViewController" bundle:nil];
    UIViewController *viewController2 = [[messagesViewController alloc] initWithNibName:@"messagesViewController" bundle:nil];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];

    self.mainControllercode = [[UINavigationController alloc] initWithRootViewController:self.tabBarController];
    self.window.rootViewController = self.mainControllercode;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

议程视图控制器.h

```
#import <UIKit/UIKit.h>

@interface agendaViewController : UIViewController
@end 
```

议程视图控制器.m

```
#import "agendaViewController.h"

@interface agendaViewController ()

@end

@implementation agendaViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = NSLocalizedString(@"Agenda", @"Agenda");
    self.tabBarItem.image = [UIImage imageNamed:@"83-calendar"];
}
return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
     // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

**编辑1：**

我用你可以看到的 Storyboards 创建了一个示例项目。我想在没有 Storyboard 的情况下拥有相同的功能，请在此处下载：

[http://www.freefilehosting.net/atestsb](http://www.freefilehosting.net/atestsb)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:56:03.400

你正在以错误的方式解决这个问题。

UITabBarController 应该有一个 UINavigationControllers 的集合，然后将它们的根控制器设置为主 Nib。然后每个选项卡处理自己的导航堆栈。

您当前将 UITabBarController 放在 UINavigationController 的根目录中。当您在导航堆栈中移动时，这将导致问题以及删除标签栏。

查看此链接以获取更多详细信息以编程方式处理它：

[http://www.xdracco.net/howto-implement-uinavigationcontroller-uitabbarcontroller-programmatically/](http://www.xdracco.net/howto-implement-uinavigationcontroller-uitabbarcontroller-programmatically/)

# php - Yii：遵循严格的 MVC 规则，确保所有业务逻辑都在适当的位置

> ID：13177824
> 
> 赞同：0
> 
> 时间：2012-11-01T13:11:13.547
> 
> 标签：php, yii, yii-cmodel

坚持 Yii 中的 MVC 基础知识，我试图将我的业务规则嵌入到模型类中，但在实现它时遇到了问题。手头的问题是阻止用户创建重复条目并在模型类中编写函数来检查表中是否已经存在该条目。我想在我的模型类中编写一个方法来查询相同模型的基础表，如果新的业务实体存在，它只会返回 false。如果我在控制器中对此进行编码，我可以实现所需的功能，但我想将其保留在模型中，以便无论在何处使用该模型，我都可以访问该方法并坚持 MVC 基础知识，它规定了瘦控制器和厚模型。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:50:55.627

最好的方法是避免直接在控制器中使用活动记录实例（至少）。

相反，您应该创建类似[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)的结构，其中包含您`CActiveRecord`和`CFormModel`实例之间的交互。这将使您更好地将表示层（视图、控制器和模板）与模型层隔离开来。

这样的服务还能够保持（有时，对）它所使用的实例`CActiveRecord`抛出的错误/异常。`CFormModel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:28:00.537

[跨站点请求伪造预防](http://www.yiiframework.com/doc/guide/1.1/en/topics.security#cross-site-request-forgery-prevention)可能是您正在寻找的？除非您对“重复条目”的想法与您的业务模型直接相关，在这种情况下，您可以覆盖[CActiveRecord.beforeSave()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord/#beforeSave-detail)并将您的逻辑放在那里，如果此方法返回 false，则记录将不会保存到数据库。

如果您使用后一种方法，并且希望将错误传递给视图并显示给用户，则始终可以使用[CModel.addError()](http://www.yiiframework.com/doc/api/1.1/CModel/#addError-detail)方法，在这种情况下是在您的 beforeSave 方法中。

不过，还有另一种选择，即使用[自定义验证器](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule)。

哪个更合适？取决于您的业务逻辑。

# magento - 具有特定 ID 的 magento 产品集合

> ID：13177825
> 
> 赞同：11
> 
> 时间：2012-11-01T13:11:16.363
> 
> 标签：magento

我选择产品

```
$products = Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('entity_id', array('in' => $productIds)); 
```

我如何归档该集合与 $productIds 中的 ID 的顺序相同？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-01T15:08:17.117

```
 $productIds = array(1,3,2);
    $products = Mage::getModel('catalog/product')->getCollection()
                ->addAttributeToFilter('entity_id', array('in' => $productIds));

    $products->getSelect()->order("find_in_set(entity_id,'".implode(',',$productIds)."')");

    foreach($products as $product)
    {
        echo $product->getEntityId();
        echo $product->getSku();
    } 
```

看更多 @

*   [Magento 以任意顺序获取产品集合](https://stackoverflow.com/questions/3990266/magento-get-a-product-collection-in-an-arbitrary-order)

*   [如何按IN子句的顺序选择mysql行](https://stackoverflow.com/questions/4986731/how-to-select-mysql-rows-in-the-order-of-in-clause)

# excel - 从我的插件自定义 Office (Word/Excel/PowerPoint) 标准工具栏、功能区、菜单和上下文菜单

> ID：13177831
> 
> 赞同：2
> 
> 时间：2012-11-01T13:11:27.720
> 
> 标签：excel, plugins, ms-office, hook, office-interop

我有一个用 C++ 实现的 Office 插件。

取决于我的插件的上下文和逻辑，我想启用/禁用 Office 的一些现有 UI 元素（菜单、功能区、上下文菜单和旧 Office CommandBars）。

请帮助或向我指出如何执行此操作的资源（也感谢 C# 或 VBA 资源）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:13:55.897

在 Excel VBA 中摆脱主要违规者（功能区、命令栏）的几件事。

显示和隐藏 Ribbon 界面：

```
Application.ExecuteExcel4Macro "SHOW.TOOLBAR(""Ribbon"",False)"
Application.ExecuteExcel4Macro "SHOW.TOOLBAR(""Ribbon"",True)" 
```

[在旧版本的 Excel 中显示和隐藏命令栏](http://www.vbaexpress.com/kb/getarticle.php?kb_id=282)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T07:26:49.203

1）显示隐藏功能区项目：

您无法设置启用状态或切换内置功能区控件的可见性，此功能保留用于 MS Office 的内部工作 -[更多](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/63e5a99d-ff24-48a9-b56c-a9e962654b58)

反之亦然，因为您*可以*设置启用状态或切换*自定义*功能区项目的可见性。同样，用户将无法通过自定义功能区界面进行更改：

```
myTabName.Groups[0].Items[0].Enabled = false;
myTabName.Groups[0].Items[1].Visible = false; 
```

2) 在命令栏、Office 上下文菜单方面，您可以执行任何自定义，例如更改启用和可见性状态以及添加您自己的。

您还可以根据条件更改命令栏属性 -[示例](https://stackoverflow.com/questions/11816358/ms-word-add-in-right-click-handler/13119519#13119519)

3) 有关您可以和不能在功能区中执行的完整列表自定义，请查看以下两篇文章：

Office UI 自定义 - [UI 功能比较](http://msdn.microsoft.com/en-us/library/bf08984t%28v=vs.100%29.aspx)和[我可以自定义功能区吗](http://office.microsoft.com/en-za/word-help/can-i-customize-the-ribbon-HA010227754.aspx)

# python - Arcmap 字段计算器 Python sPrefix

> ID：13177832
> 
> 赞同：0
> 
> 时间：2012-11-01T13:11:31.043
> 
> 标签：python, prefix, arcmap

我正在使用字段计算器在 Arcmap 中工作。

我的价值观如下：

> "addr:city"="Bielefeld","addrostcode"="33699","addr:street"="Westerkamp" "addr:city"="Bielefeld","addr:street"="Detmolder Straße" "addr:城市"="比勒费尔德","地址:housenumber"="34"

我想将它们提取到单个属性中。

所以我想我需要这样的代码：

> 昏暗的城市
> 
> if sPrefix = "addr:city": 返回 "addr:city" 之后的所有内容，直到出现逗号

任何想法如何解决这个问题。不幸的是，我没有太多经验。

谢谢，

乌里！

这是一个截图

[截屏](http://i.stack.imgur.com/mtXCI.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:17:07.250

看看 python 的[csv](http://docs.python.org/2/library/csv.html)模块。

**编辑：**

我从未使用过 Arcmap，但我想您仍然可以在其中导入模块。如果字符串非常规则，您可以在没有它的情况下解析数据：

例如。

```
#test.py

def func(s, srch):
    parts = dict([item.replace('"','').split('=') for item in s.split(',')])
    return parts.get(srch,'')

if __name__ == '__main__':
    tags = '"addr:city"="Bielefeld","addrostcode"="33699","addr:street"="Westerkamp"'
    print func(tags, 'addr:city')

>python test.py
>Bielefeld 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:19:10.597

像这样，定义你自己的功能：

```
In [40]: def func(x,item):
    spl=strs.split(",")
    for y in spl:
        if item in y:
            return y.split("=")[-1].strip('"')

   ....:         
   ....:         

In [53]: strs='"addr:city"="Bielefeld","addrostcode"="33699","addr:street"="Westerkamp"'

In [54]: func(strs,"addr:city")
Out[54]: 'Bielefeld'

In [55]: func(strs,"addr:street")
Out[55]: 'Westerkamp' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:20:03.117

当我阅读您的问题时，您想提取一个看起来像`'"addr:city"="Bielefeld","addr:housenumber"="34"'`单个（键，值）对的字符串。最简单的方法可能是使用 csv 阅读器 (http://docs.python.org/2/library/csv.html)。您将需要确定如何在您的用例中准确使用它，但这里有一个通用示例，它可能会起作用：

```
import csv
for pairs in csv.reader(attribute_list):
    key, value = pair.split('"="')
    print key, value 
```

# java-ee-5 - 未找到 ElException 方法

> ID：13177833
> 
> 赞同：1
> 
> 时间：2012-11-01T13:11:31.450
> 
> 标签：java-ee-5

我在一个使用 seam 和 jsf 的项目中工作。我想从视图部分（一个 xhtml 文件）调用一个方法。

我有这个：

```
<h:outputText value="#{thePoliciesAdmin.getMinusUsage()}"/> 
```

我在 thePoliciesAdmin 类中创建了该方法，但是当我运行该应用程序时，出现以下异常：

> javaxElException ..找不到方法：PoliciesAdmin.getMinusUsage()。

我能做些什么？

# eclipse - Eclipse 中的 Facelets 格式化/自动缩进

> ID：13177836
> 
> 赞同：0
> 
> 时间：2012-11-01T13:11:41.447
> 
> 标签：eclipse, jsf, facelets

如何让 Facelets 页面的格式化/自动缩进工作？我已在项目属性中将 JSF 添加到我的项目方面，这会显示 JSF 标记等的自动完成功能，但我找不到格式化/自动缩进代码的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:21:53.733

在 Eclipse Indigo SR2 上的 Facelets 文件上，与您在 Java 源文件`Ctrl`++上使用的快捷方式相同。它们将根据您可以在*Window > Preferences > XML > XML Files > Editor*中配置的 XML 语法规则进行格式化。另一种触发方式是右键单击 Facelets 文件，然后选择*Source > Format*。`Shift``F`

 **我也在使用[JBoss Tools 插件](http://jboss.org/tools)，但这个功能并不特定于 JBoss Tools 插件。**

# shell - 在 shell 脚本中，如何使用变量安全地更改当前目录？

> ID：13177839
> 
> 赞同：1
> 
> 时间：2012-11-01T13:11:48.883
> 
> 标签：shell, command-line, cd

以下 shell 脚本将当前目录更改为桌面。

```
v=~/Desktop/
cd $v
pwd # desktop 
```

以下脚本将当前目录更改为主目录，而不是生成错误。

```
cd $undefined_variable
pwd # home directory
echo $? # 0 
```

如果我拼错了新当前目录的变量，我担心脚本会删除重要文件。

一般来说，你如何在 shell 脚本中使用变量安全地更改当前目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:30:23.747

采用：

`cd ${variable:?}`

如果 $variable 未定义或为空，则 bash 将抛出错误并退出。它就像`set -u`选项一样，但不是通过文件全局的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:15:27.773

您可以使用`test -d`条件（检查指定的变量是否为目录），即

```
if [[ -d $undefined_variable ]]
then
  cd $undefined_variable
  echo "This will not be printed if $undefined_variable is not defined"
fi 
```

另请参阅[此处](http://unixhelp.ed.ac.uk/CGI/man-cgi?test)了解更多测试选项...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:17:47.703

每次展开未定义的变量时，您都可以`set -u`退出并出现错误。`bash`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T13:29:51.893

Bourne Shell 有一个**构造来用一个值代替未定义的变量**, `${varname-subtitution}`。如果变量未定义，您可以使用它来拥有一个安全的后备目录：

```
 cd "${undefined-/tmp/backupdir}" 
```

如果有一个名为 的变量`undefined`，它的值被替换，否则`/tmp/backupdir`被替换。

请注意，我还将变量扩展放在双引号中。这用于防止对包含空格的字符串进行*分词*（在 Windows 目录中非常常见）。这样，它甚至适用于带有空格的目录。

有关所有 shell 替换结构的详细信息（POSIX shell 还有七个），请阅读您的 shell 手册的**参数替换**部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T13:36:29.207

您必须*编写*一个包装器（这在 bash 中工作）：

```
cd() {
    if [ $# -ne 1 ] ;then
        echo "cd need exactly 1 argument" >&2
        return 2
      fi
    builtin cd "$1"
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T13:16:56.180

是的，如果你不带参数输入，那是 shell ，`cd`它会跳转到主目录。您可以在`cd`命令之前检查 null 或空的变量。

检查类似（只有在 targetDir 不为空时才调用 cd）：

```
test -z "$targetDir" || cd $targetDir 
```

检查类似（只有在 targetDir 确实存在时才调用 cd）：

```
test -d "$targetDir" && cd $targetDir 
```

**注意：**感谢-1，也应该阅读最后一句话。所以我添加了真正的答案。

# android - Android 支持多种设备和屏幕

> ID：13177840
> 
> 赞同：2
> 
> 时间：2012-11-01T13:11:50.513
> 
> 标签：android, screen

我创建了以下布局来支持多种设备和屏幕：

```
layout-normal
layout-normal-land
layout-sw240dp
layout-sw240dp-land
layout-sw320dp
layout-sw320dp-land 
```

并在清单中包含以下内容

```
<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:anyDensity="true" /> 
```

我还创建了一个带有 ICS 4.0.3 皮肤 WVGA800、LCD 密度 240..etc 的 AVD

当我在模拟器上运行我的应用程序时，我观察到它从 layout-sw240dp 加载了一些资源，从 layout-sw320dp 加载了一些资源

我通过更改这些目录的 XML 文件中的一些文本来确认它。

我的问题是对于相同的设备配置，为什么要从不同的布局目录加载资源？

我在 android 多屏幕支持文档中找不到有关此问题的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:19:57.530

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。检查支持多个屏幕的链接。[http://www.youtube.com/watch?v=kFhgmS2Kc7k](http://www.youtube.com/watch?v=kFhgmS2Kc7k)。支持多版本，避免代码重复。请浏览链接。

# mongodb - mongodb副本集同步失败

> ID：13177841
> 
> 赞同：0
> 
> 时间：2012-11-01T13:11:54.913
> 
> 标签：mongodb, replication

自从我在 mongodb 中添加了一个新数据库后，它就停止同步 replicaSet 辅助实例，即运行时出现数据库名称`show dbs`但显示为`(empty)`

**辅助**节点的日志文件中存在重复错误，该错误也出现在

```
"errmsg" : "syncTail: ... 
```

下面是 rs.Status() 在**主节点上的输出**

```
PRIMARY> rs.status()
{
        "set" : "contoso_db_set",
        "date" : ISODate("2012-11-01T13:05:22Z"),
        "myState" : 1,
        "syncingTo" : "dbuse1d.int.contoso.com:27017",
        "members" : [
                {
                        "_id" : 0,
                        "name" : "dbuse1a.int.contoso.com:27017",
                        "health" : 1,
                        "state" : 1,
                        "stateStr" : "PRIMARY",
                        "optime" : {
                                "t" : 1351775119000,
                                "i" : 2
                        },
                        "optimeDate" : ISODate("2012-11-01T13:05:19Z"),
                        "self" : true
                },
                {
                        "_id" : 1,
                        "name" : "dbuse1d.int.contoso.com:27017",
                        "health" : 1,
                        "state" : 2,
                        "stateStr" : "SECONDARY",
                        "uptime" : 4108139,
                        "optime" : {
                                "t" : 1351405977000,
                                "i" : 12
                        },
                        "optimeDate" : ISODate("2012-10-28T06:32:57Z"),
                        "lastHeartbeat" : ISODate("2012-11-01T13:05:21Z"),
                        "pingMs" : 1,
                        "errmsg" : "syncTail: 10068 invalid operator: $oid, syncing: { ts: Timestamp 1351576230000|1, h: -2878874165043062831, op: \"i\", ns: \"new_contoso_db.accounts\", o: { _id: { $oid: \"4f79a1d1d4941d3755000000\" }, delegation: [ \"nE/UhsnmZ1BCCB+tiiS8fjjNwkxbND5PwESsaXeuaJw=\""
                },
                {
                        "_id" : 2,
                        "name" : "dbuse1a.int.contoso.com:8083",
                        "health" : 1,
                        "state" : 7,
                        "stateStr" : "ARBITER",
                        "uptime" : 10671267,
                        "optime" : {
                                "t" : 0,
                                "i" : 0
                        },
                        "optimeDate" : ISODate("1970-01-01T00:00:00Z"),
                        "lastHeartbeat" : ISODate("2012-11-01T13:05:21Z"),
                        "pingMs" : 0
                }
        ],
        "ok" : 1
}
PRIMARY> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:20:28.933

我找到的解决方案是从辅助数据库中删除整个数据库

```
# rm -rf /data/db
# mkdir -p /data/db 
```

然后重新启动 mongo 并设置副本集。

[在Mongo 的文档](http://www.mongodb.org/display/DOCS/Resyncing+a+Very+Stale+Replica+Set+Member)中查看更多信息

> **RS102 同步错误怎么办**
> 
> 如果您的成员之一已离线并且现在落后太远而无法赶上，您将需要重新同步。有很多方法可以做到这一点。执行完全重新同步。如果停止失败的 mongod，删除 dbpath 中的所有数据（包括子目录），然后重新启动它，它会自动重新同步自身。显然，首先备份数据会更好/更安全。如果磁盘空间足够，只需将其移动到机器上的备份位置（如果合适）。如果数据库很大或网络速度很慢，重新同步可能需要很长时间——即使是理想化的 1 TB 数据也需要三个小时才能通过千兆以太网传输。*

# c# - 私有 TestInitialize 方法未初始化对象

> ID：13177844
> 
> 赞同：18
> 
> 时间：2012-11-01T13:11:56.053
> 
> 标签：c#, visual-studio-2012, mstest, private-members

我有一个测试类，基本上应该如下所示：

```
[TestClass]
public class MyTest
{
    private MyClass o1;
    private MyClass o2;

    [TestInitialize]
    private void PrepareObjects()
    {
        o1 = new MyClass();
        o2 = new MyClass();
    }

    [TestMethod]
    public void TestEquality()
    {
        Assert.IsTrue(o1.Equals(o2));
    }        
} 
```

但是当我运行测试时，我得到一个`NullReferenceException`. 如果我把断点放在里面`PrepareObjects`然后`TestEquality`我可以看到那个`TestInitialize`时候还没有被调用`TestEquality`。

从私有更改`PrepareObjects`为公共可以解决此问题。为什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-01T13:13:16.607

测试框架只寻找公共方法。同样，如果您设为`TestEquality`私有，*则*不会运行，如果您设为`MyTest`内部，则显示的内容将*不会*运行。

# c# - 关于一些资源的部署问题

> ID：13177851
> 
> 赞同：2
> 
> 时间：2012-11-01T13:12:17.233
> 
> 标签：c#, deployment, visual-studio-2012, advanced-installer

我在 Visual Studio 2012 中部署软件时遇到问题。首先，我无法通过 VS12 安装“InstallShield Limited Edition”，因此我目前正在测试[Advanced Installer](http://www.advancedinstaller.com)。

我的问题是因为在我的程序中我正在获取一个 .pdf 文件并对其进行修改，然后再将它们展示给用户。这些 PDF:s 在程序资源文件夹中，但不随安装程序一起使用，因此我的应用程序由于找不到它而崩溃。我的 .chm 文件（帮助文件）也是如此？

我的客户正在使用 XP，当我尝试直接从 VS12 发布软件时，它可以在我的计算机 Windows 8 上运行，但不能在他的计算机上运行。该应用程序甚至不会为他启动。

那么如何将我的 pdf 部署到安装程序文件，或者为什么这还没有完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:20:03.427

项目中似乎没有自动导入 PDF 和 CHM 文件。你在 VS 中创建了什么类型的项目？

要在设置中添加这些文件，请使用 Advanced Installer VS 扩展中的“ **Edit in Advanced Installer** ”按钮，然后转到“文件和文件夹”页面。在那里，您应该将这两个文件添加到所需的文件夹中并保存项目。

# git - 为什么 git log 中的提交日期乱序？

> ID：13177852
> 
> 赞同：15
> 
> 时间：2012-11-01T13:12:16.690
> 
> 标签：git

当我执行“git log”时，为什么提交的日期不正确？

我正在查看我的存储库的 1 个分支。日期应该安排妥当吧？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T13:20:18.310

不能保证日期应该按任何顺序排列。事实上，您可以使用 Git 轻松伪造日期。

不过，这很可能是由于变[基](http://git-scm.com/book/en/Git-Branching-Rebasing)或挑选樱桃造成的。例如，我经常做的是在本地提交一些工作，然后`git pull --rebase`. 结果是历史被重写，因此我的提交现在是`origin/master`同时引入的提交的子项，但`git rebase`不会更改过程中提交的日期。`git cherry-pick`有同样的效果。

如果您想查看提交更改的日期，您可以`git log --pretty=fuller`查看`CommitDates`以及`AuthorDates`. 这些更有可能是有序的，但即使在这里，也不能保证。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T13:24:18.937

不，不一定。

Git 跟踪两个日期。作者日期表示原作者提交的时间。在电子邮件补丁的情况下，它可能取自电子邮件日期。该补丁可能会在更晚的时间应用。

提交日期通常按照提交时间的顺序排列，并且只有在其父项存在时才能进行提交。如果提交被重新定位或精选，它将被赋予一个新的提交日期，但原始作者日期将被保留。然而，即使是提交日期也是取自它所在机器的本地系统时间，因此它受制于本地时钟的设置。一般来说，不能保证这在机器上是准确的或一致的。

（两个日期都包含时区信息。）

# vb.net - 使用 vb dotnet 自动登录到 Windows 安全表单

> ID：13177859
> 
> 赞同：1
> 
> 时间：2012-11-01T13:12:47.663
> 
> 标签：vb.net

我正在尝试使用 VB .Net 构建一个应用程序，该应用程序将自动登录 ADP，以便我可以自动下载考勤卡报告。我试图展示一张图片，但因为我是新手，所以我不能。您可以通过访问[https://portal.adp.com/public/index.htm](https://portal.adp.com/public/index.htm)并单击用户登录来查看表单。有人可以告诉我如何填充用户名和密码文本框吗？我花了很多时间搜索，但一直找不到任何有关此的信息。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:22:02.490

如果您使用 a[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)与站点交互，您可以简单地使用该[`Credentials`](http://msdn.microsoft.com/en-us/library/system.net.webclient.credentials.aspx)属性，因为这是标准的 HTTP 登录。

```
Dim client As New WebClient()
client.Credentials = new NetworkCredential("username", "password")
Dim pageData As String = client.DownloadString("https://portal.adp.com/wps/employee/employee.jsp") 
```

这里有更多关于[`NetworkCredential`](http://msdn.microsoft.com/en-us/library/system.net.networkcredential_members%28v=vs.80%29.aspx)类的信息。你也可以看看[这个](http://social.msdn.microsoft.com/Forums/en/Vsexpressvcs/thread/95070e0a-5972-4b27-bbf0-0d5f3795f28c)。如果您使用的是`WebBrowser`控件，则可以使用[此方法](http://www.codeproject.com/Answers/220962/Webbrowser-with-Credentials)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:53:08.027

您可以创建一个 Internet Explorer 加载项，并使用它来填写表单和登录。这是我找到的教程。

[http://www.add-in-express.com/creating-addins-blog/2012/07/09/create-addons-ie10/](http://www.add-in-express.com/creating-addins-blog/2012/07/09/create-addons-ie10/)

# google-chrome - 使用键盘在 Google Chrome 中浏览/导航

> ID：13177862
> 
> 赞同：2
> 
> 时间：2012-11-01T13:12:59.603
> 
> 标签：google-chrome, google-chrome-extension

我想浏览一个教程网站并用我的键盘而不是鼠标标记所述代码。（用于复制和粘贴到我的编辑器）我喜欢广泛使用键盘。我知道我曾经安装了一个支持光标键盘导航的扩展。但不幸的是，我忘记了扩展名是如何命名的，或者我是否将它与 Firefox 一起使用。我搜索了一段时间并尝试了不同的扩展。但我找不到它。有没有人可以帮我找到解决方案？

# oracle - 如何在 oracle 11g 中创建一个没有多余表的干净的 oracle 数据库

> ID：13177867
> 
> 赞同：2
> 
> 时间：2012-11-01T13:13:10.217
> 
> 标签：oracle, oracle11g

为什么我通过 oracle sql developer 在我的 oracle 11g express 中新创建的连接中看到这些现成的表？我所做的是，我刚刚创建了一个新连接，用户名作为系统，密码作为 sasori... .然后当我点击“表格”时，我看到很多表格不是我自己创建的

```
AQ$_DEF$_AQERROR_F
AQ$_INTERNET_AGENTS
AQ$_INTERNET_AGENT_PRIVS
AQ$_QUEUE_TABLES
DEF$_DESTINATION
DEF$_PROPAGATOR
DEF$_PUSHED_TRANSACTIONS
LOGMNRC_DBNAME_UID_MAP
LOGMNRC_GSBA 
```

等等等等……等等……我怎样才能创建一个没有自动创建的表的新连接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:37:25.387

一个新的数据库带有几个标准用户。这允许您管理数据库。其中一项任务是创建您自己的用户。

首先，您作为用户系统创建一个连接。

当您作为系统连接时，您现在可以创建一个新用户。

使用此新用户凭据建立新连接。

# javascript - 为什么 IE8 上的黑白 window.clearTimeout 和 clearTimeout 有区别？

> ID：13177868
> 
> 赞同：1
> 
> 时间：2012-11-01T13:13:12.270
> 
> 标签：javascript, internet-explorer, overriding

我正在尝试覆盖**clearTimeout**函数，该函数在除 IE 之外的所有浏览器中都可以正常工作（在 IE8 中测试）

```
clearTimeout = function(){}; 
```

IE8 给出以下错误：

```
Object doesn't support this action 
```

但当我这样做时，

```
window.clearTimeout = function(){}; 
```

它可以很好地覆盖 clearTimeout。为什么会出现这种行为？

此外，在我的代码中，我直接调用**clearTimeout**而不是**window.clearTimeout**。因此，即使我覆盖 clearTimeout（通过第二种方式），也会调用本机 clearTimeout 而不是覆盖的 clearTimeout。什么可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:28:29.917

> 在 IE 中，属性 setTimeout 最初存在于窗口的原型上，而不是窗口本身。因此，当您请求 window.setTimeout 时，它实际上会遍历原型链上的一步来解析引用。同样，当您请求 setTimeout 时，它会沿着作用域链向下遍历，然后到窗口，然后沿着原型链向下遍历以解析引用。
> 
> 我怀疑 IE 有一个内置的优化，它会自动缓存隐含全局变量的分辨率，这些全局变量在全局对象的原型上一直被发现。这样做是有充分理由的，因为这些是通常要求的参考，并且遍历该链的成本很高。但是，它必须将此引用设置为只读，因为它只是一个缓存优化。这具有不幸的副作用，即在尝试通过将引用用作左值来分配引用时引发异常。

资料来源： http: [//www.adequatelygood.com/2011/4/Replaceing-setTimeout-Globally](http://www.adequatelygood.com/2011/4/Replacing-setTimeout-Globally)

# php - 饼干停止工作

> ID：13177873
> 
> 赞同：-1
> 
> 时间：2012-11-01T13:13:38.280
> 
> 标签：php, cookies, xampp

我有 XAMPP 2.5.8 for Windows 在 Win 7 上运行作为开发平台，就在最近我失去了将 cookie (PHP) 设置为将来过期的能力（它们在会话结束时过期）。

我在使用 phpMyAdmin 时遇到了很多问题，并将其升级到 3.5.1。我不知道这是否与我的 cookie 问题有关，但它是在同一时间范围内。

我尝试了多个浏览器并验证了我的系统时间是 PHP 看到的，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:20:51.677

我会仔细检查过期时间、cookie 路径和域。

您还可以检查客户端是否覆盖了此行为。例如，Firefox 有一个名为“在我关闭 Firefox 之前保留 Cookie”（工具 - 选项 - 隐私 - Cookies）的选项，它可能会产生影响。

# sql - 将多行组合成一行与多对多

> ID：13177874
> 
> 赞同：0
> 
> 时间：2012-11-01T13:13:40.973
> 
> 标签：sql, sql-server

使用 SQL Server 我有以下表格/数据

**CUS_VISIT**

```
Cus_ID    Cus_Vis_ID
1           01
1           02
2           01 
```

和

**CUS_EVENT**

```
Cus_Event_ID    Cus_ID    Cus_Vis_ID
001               1            01
002               1            01 
```

和

**CUS_XREF**

```
Cus_ID    Cus_Event_ID    Cus_Prt_ID    Cus_Seq_No
1            001               1           1
1            001               2           1 
```

和

**CUS_PRT**

```
Cus_ID    Cus_Prt_ID    Prt_Cd
1            1            1A
1            2            2A 
```

我已经尝试了很多查询，但没有包括它们，因为我认为它会混淆事情......他们中的大多数都使用了 xml 路径功能但无济于事（我没有尝试过 pivot，因为有大量代码列表）。

我正在尝试获取以下内容

```
SQL RESULTS

Cus_ID     Prt_Cd     Cus_Vis_ID
1           1A,2A        1 
```

我最终得到的是

```
SQL RESULTS

Cus_ID     Prt_Cd     Cus_Vis_ID
1           1A           1
1           2A           1 
```

这些表由...链接

```
CUS_VISIT.Cus_ID    = CUS_EVENT.Cus_ID 
CUS_VISIT.Cus_Vis_ID  = CUS_EVENT.Cus_Vis_ID
CUS_VISIT.Cus_ID = CUS_XREF.Cus_ID
CUS_EVENT.Cus_Event_ID = CUS_XREF.Cus_Event_ID    
CUS_XREF.Cus_Prt_ID = CUS_PRT.Cus_Prt_ID 
CUS_XREF.Cus_ID = CUS_PRT.Cus_ID 
```

如果我放弃`CUS_XREF.Cus_Prt_ID = CUS_PRT.Cus_Prt_ID` 加入，我几乎可以得到我想要的东西，但是我得到`Prt_Cd`了客户的所有零件代码 ( )，而不仅仅是那次访问的零件代码。

如果看到我不成功的查询会有所帮助，或者如果我遗漏了任何内容，请告诉我。谢谢你的帮助。

--

这是我的子查询

```
stuff((
                  select ',' + B.prt_cd
                    from CUS_PRT B 
                    WHERE B.prt_cd = XREF.prt_cd  -- this is killing me
                    and XREF.cus_id=B.cus_id and 
                    -- some extra criteria i need but didn't think involved in my issue
                    B.prt_typ='1'  
                    and B.valid_entry='Y' and B.cur_entry_ind='Y'
                    for xml path('')),1,1,'') 
```

这是我最近的尝试。我添加了一个新帖子，因为我没有意识到编辑会将其再次移到列表顶部...我想我需要另一个子查询，但不确定在哪里以及如何将它与其他两个查询联系起来。

```
select distinct CUS_EVENT.cus_id, CUS_EVENT.cus_visit_id,
    (Select CUS_PRT.prt_cd + ',' AS [text()]
    From CUS_PRT, CUS_XREF
    where 
    CUS_EVENT.cus_id=XREF.cus_id
    and CUS_EVENT.cus_event_id = XREF.cus_event_id 
    and CUS_XREF.cus_id=CUS_PRT.cus_id 
    and CUS_XREF.cus_prt_id = CUS_PRT.cus_prt_id 
    and CUS_XREF.prt_seq_no ='1'
    order by CUS_PRT.prt_cd
    for XML PATH('')) [Codes]
from CUS_EVENT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:18:27.307

您需要在您的选择中执行子查询，以便将多行中的值连接到单行中。

请参阅此答案以获取解决方案：[https ://stackoverflow.com/a/545672/745511](https://stackoverflow.com/a/545672/745511)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:39:02.933

我通过创建一个仅将 prt_cd 与事件相关联的视图解决了这个问题，然后创建了另一个基于该视图的视图，该视图结合（连接）了一个事件的所有 prt_cd ......不知道为什么，但从未能够找到方法是一键查询。

# json - IronJS：如何将 JSON（作为字符串参数发送）解析为 JavaScript 函数中的方法

> ID：13177879
> 
> 赞同：2
> 
> 时间：2012-11-01T13:13:59.967
> 
> 标签：json, ironjs

我是 IronJS 新手，在 JavaScript 方法中解析 JSON 时遇到困难。

我的 C# 代码

```
string jsonString = "{\"Name\": \"Ankur\", \"Sex\": \"Male\"}";
var o = new IronJS.Hosting.CSharp.Context();
o.ExecuteFile(@"C:\CustomScript.js");
var handleJson = o.Globals.GetT<FunctionObject>("HandleJson");
var result = handleJson.Call(o.Globals, jsonString).Unbox<string>();
Console.WriteLine(result); 
```

CustomScript.js 中的 JavaScript 方法

```
function HandleJson(jsonStr) {
obj = JSON.parse(jsonStr);
return obj.Name;
} 
```

每次我这样做时，我都会收到错误消息**“ReferenceError: JSON is not defined”**

猜猜，“JSON.parse”方法是浏览器原生的，在服务器端不可用。我可以使用 jQuery 方法**obj = $.parseJSON(jsonStr);** 也是，但不知道如何加载 jQuery 文件。

关于我做错了什么或如何解决它的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:22:28.823

我找到了解决办法。

JSON.parse 是服务器上的未知 JS 方法（这就是我们收到错误的原因）......所以，我们需要在 CustomScript.js 文件之前添加/加载**“json2.js”**，然后我们就可以了。

json2.js 可以从以下位置下载：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

以下是我更新的代码。

更新的 C# 代码

```
 string jsonString = "{\"Name\": \"Ankur\", \"Sex\": \"Male\"}";
        var o = new IronJS.Hosting.CSharp.Context();
        o.ExecuteFile(@"C:\json2.js");
        o.ExecuteFile(@"C:\CustomScript.js");
        var handleJson = o.Globals.GetT<FunctionObject>("HandleJson");
        var result = handleJson.Call(o.Globals, jsonString).Unbox<string>();
        Console.WriteLine(result); 
```

CustomScript.js 中不需要更改

干杯!

# database - 实现数据库——如何开始

> ID：13177882
> 
> 赞同：16
> 
> 时间：2012-11-01T13:14:06.923
> 
> 标签：database, language-agnostic, nosql, implementation

一段时间以来，我一直在努力学习编程。我研究过 Java 和 Python，我对它们的语法很满意。最近，我想利用我所学到的知识从头开始编写一个有形的软件。

我想实现一个数据库引擎，一种 NoSQL 数据库。我整理了一个小文档，在我的整个编码过程中都遵循了规范。但我只知道一堆关键词。我不知道从哪里开始。

有人可以帮助我了解如何收集这种工作所需的知识以及学习的顺序吗？我已经搜索过文档，但我觉得我最终会找到不相关/错误的内容，或者从错误的点开始，因为实现一个完整的数据库引擎*（似乎）*是一项非常复杂的任务。

我不想表达我更喜欢论文、白皮书和（电子）书籍而不是其他项目的代码，因为我问过一个问题，人们通常会以*“阅读项目 - x”的形式得到回答源代码”*。我没有达到舒适阅读和理解源代码的水平。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-01T14:29:11.930

首先，您可能会看到[如何编写一个简单的数据库引擎](https://stackoverflow.com/q/1052189/230886)的答案。虽然它专注于 SQL 引擎，但答案中仍然有很多好的材料。

否则，一个好的项目教程是[实现 B-Tree 数据库类](http://www.codeproject.com/Articles/7410/Implementation-of-a-B-Tree-Database-Class)。示例代码是用 C++ 编写的，但对所做的事情和原因的描述可能是您无论如何都想看的。

此外，在 MSDN 上还有[Designing and Implementing Structured Storage (Database Engine) 。](http://msdn.microsoft.com/en-us/library/bb510424%28v=sql.105%29.aspx)那里有大量信息可以帮助您完成学习项目。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-02-02T16:07:33.673

因为接受的答案只提供（良好的）其他资源的链接，所以我想我会分享我编写[webdb](https://github.com/download/webdb)的经验，这是一个用于浏览器的小型实验数据库。我还邀请您阅读源代码。它很小。您应该能够通读它并在几个小时内基本了解它在做什么。***警告****：我在这方面是一个 n00b，自从写了它之后，我学到了很多关于它的知识，并且发现我做错了一些事情。不过，它可以帮助您入门。*

## 基础知识：BTree

我开始调整 AVL 树以满足我的需要。AVL 树是一种自平衡二叉搜索树。您将键*K*和相关数据（如果有）存储在一个节点中，然后将所有项目存储`key < K`在*左*子树中的节点中，并将所有项目存储`key > K`在*右*子树中。如果要支持非唯一键，可以使用数组来存储数据项。

这棵树将为您提供基础知识：*创建*、*更新*、*删除*以及一种通过键快速获取项目的方法，或者键 < x 或键在 x 和 y 之间的所有项目等。它可以作为我们表的索引.

# 架构

作为下一步，我编写了让客户端代码定义模式的代码。诸如此类的方法`createTable()`。模式通常与 SQL 相关联，但即使是非 SQL 类型也有模式；他们通常要求您标记 ID 字段和您要搜索的任何其他字段。您可以使您的架构随心所欲，但您通常希望至少对哪些列用作主键以及哪些字段将被频繁搜索并需要索引进行建模。

# 创建数据结构来存储表

我决定使用我在第一步中创建的树来存储我的项目。这些是简单的 JS 对象。在定义了哪个字段包含 PK 之后，我可以简单地将项目插入到树中，使用该字段的值作为键。这使我可以按 ID（范围）快速查找。

接下来，我为需要索引的每一列添加了另一棵树。在这些树中，我没有存储完整的记录，而只存储了密钥。因此，要按姓氏获取客户，我将首先使用姓氏索引来获取 ID，然后使用主键索引来获取实际记录。我不只是存储（引用）实际对象的原因是因为它使集合操作更简单一些（见下一步）

# 查询

现在我们有了一个包含 PK 和搜索字段索引的表，我们可以实现查询。我没有把它走得太远，因为它很快就会变得复杂，但是你可以通过一些基础知识来获得一些不错的功能。WebDB 不实现连接；所有查询仅对单个表进行操作。但是一旦你理解了这一点，你就会看到一条非常清晰（虽然漫长而曲折）的路径来进行连接和其他复杂的事情。

在 WebDB 中，要让所有客户使用`firstName = 'John'`和`city = 'New York'`（假设这是两个搜索字段），您可以编写如下内容：

```
var webDb = ...
var johnsFromNY = webDb.customers.get({
  firstName: 'John',
  city: 'New York'
}) 
```

为了解决这个问题，我们首先进行两次查找：我们获取名为“John”的所有客户 ID 的集合*X* ，以及来自纽约的所有客户 ID的集合*Y。*然后，我们对这两个集合执行交集，以获取所有来自纽约的名为“John” *AND的客户的 ID。*然后，我们遍历我们的一组结果 ID，获取每个 ID 的实际记录并将其添加到结果数组中。

使用联合和交集等集合运算符，我们可以执行*AND*和*OR*搜索。我只实现了*AND*。

进行联接（我认为）涉及在内存中创建临时表，然后在查询运行时使用联接结果填充它们，然后将查询条件应用于临时表。我从来没有到过那里。接下来我尝试了一些同步逻辑，但这太雄心勃勃了，从那里开始走下坡路:)

# php - PHP正则表达式匹配两个html标签之间的字符串，标签未知

> ID：13177884
> 
> 赞同：0
> 
> 时间：2012-11-01T13:14:15.240
> 
> 标签：php, regex, preg-replace

好的，这是我的问题：

我有一个链接，比如：[http ://www.blablabla.com/watch?v=1lyu1KKwC74&feature=list_other&playnext=1&list=AL94UKMTqg-9CfMhPFKXPXcvJ_j65v7UuV](http://www.blablabla.com/watch?v=1lyu1KKwC74&feature=list_other&playnext=1&list=AL94UKMTqg-9CfMhPFKXPXcvJ_j65v7UuV)

链接在两个标签之间，如下所示：

```
<br>http://www.blablabla.com/watch?v=1lyu1KKwC74&feature=list_other&playnext=1&list=AL94UKMTqg-9CfMhPFKXPXcvJ_j65v7UuV<br></p> 
```

将此正则表达式与 preg_replace 一起使用：

```
'@(^|[^\/]|[^>])('.addcslashes($link,'.?+').')([^\w\/]|[^<]$)@i' 
```

像这样：

```
preg_replace('@(^|[^\/]|[^>])('.addcslashes($link,'.?+').')([^\w\/]|[^<]$)@i', "***",$strText); 
```

结果字符串是：

```
<br***p> 
```

这是错的！

应该是

```
 <br>***<br></p> 
```

我怎样才能得到想要的结果？我已经竭尽全力试图解决这个问题。

我想提一下，`str_replace`甚至替换另一个有效链接中的链接，所以这不是一个好方法，我需要两个边界之间的完全匹配，即使边界是文本或另一个 HTML 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:45:36.773

假设您出于某种原因不想使用 DOM 解析器，我相信按照您的意图进行操作很简单，如下所示：

```
preg_replace('@(^|[^\/]|[^>])('.addcslashes($link,'.?+').')([^\w\/]|[^<]$)@i', "$1***$3",$strText); 
```

这使用 $1 和 $3 放回您在正则表达式中匹配的定界文本。

正如其他人所指出的，使用 DOM 解析器更可靠。

这是做你想做的吗？

# iphone - 无法访问另一个对象中的对象成员变量

> ID：13177887
> 
> 赞同：0
> 
> 时间：2012-11-01T13:14:31.887
> 
> 标签：iphone, objective-c, ios5, cocos2d-iphone

我定义了两个类：`Player`和`HelloWorldLayer`. 在`HelloWorldLayer`中，我定义了一个成员变量：`NSArray *bullets`。在`Player`中，我定义了一个成员变量`HelloWorldLayer *hwLayer`。现在在其中一个`Player`函数中，我想用 访问项目符号`hwLayer.bullets`，但它不起作用并给出编译错误。我附上了屏幕截图 - 谁能帮我确定问题出在哪里？

![播放器.h](../Images/4e6da92282c052782bbb8067116d8678.png)

![播放器.m](../Images/e84147785351a54f652d7954d1370840.png)

![HelloWorldLayer.h](../Images/f498dd63c1c6f68490e8ee22dd425248.png)

![HelloWorldLayer.me](../Images/6d8b629ff91c4eee00d94c7f9f76d112.png)

![功能](../Images/d742b625e477ee7cc6590e506b374f35.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:18:43.880

`HelloWorldLayer`您在标题中前向声明

```
@class HelloWorldLayer; 
```

它允许您声明 _hwlayer 实例变量。但是，仅开始使用其属性是不够的：您必须将包含的标头导入`HelloWorldLayer`到引用 .m 文件的 .m 文件中`bullets`。

或者，您可以使用方括号语法，如下所示：

```
[_hwlayer bullets] 
```

这不需要导入标头。

# drupal - 如何使用 php 获取字段的预告片？

> ID：13177890
> 
> 赞同：0
> 
> 时间：2012-11-01T13:14:44.617
> 
> 标签：drupal, drupal-6, teaser

有没有办法用 php 获取字段的预告值？我可以使用像这样的一些 php 获取字段值..

```
<?php print $node->field_country[0]['value'] ?> 
```

我试过这个..

```
<?php print $node->field_country[0]['teaser'] ?> 
```

但这不起作用。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:25:53.113

你有没有尝试过

```
<?php print $node->field_country['und'][0]['value'] ?> 
```

这可以工作。

如果没有，请使用

```
<?php print_r($node->field_country); ?> 
```

遍历字段的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:43:07.460

字段没有“teaser”和“full”值。只有节点具有测试器和完整视图。

要在 Drupal 6 中查看字段数组的全部内容，请安装 Devel 模块并使用：

```
<?php dpm($node->field_country); ?> 
```

注意前面的建议：

```
<?php print $node->field_country['und'][0]['value'] ?> 
```

与 Drupal 7 中的字段结构有关。

# actionscript-3 - XMLListCollection 的 Flex 中的两个排序字段是否有优先级？

> ID：13177892
> 
> 赞同：0
> 
> 时间：2012-11-01T13:14:53.193
> 
> 标签：actionscript-3, apache-flex, flex4

当您为排序（ISort）提供两个字段时，排序算法是否有优先级？即，如果您按日期和时间排序，那么排序是否仅在日期相等时排序时间？

下面的示例代码：

```
private function sortXMLListCollection(listCollection:XMLListCollection, fields:Array):XMLListCollection
{
    var descendingSort:Sort = new Sort();
    descendingSort.fields = new Array();

    for each( var field:String in fields)
    {
        descendingSort.fields.push(new SortField(field, true));
    }

    listCollection.sort = descendingSort;
    listCollection.refresh();

    return listCollection;
}

Function Call: sortXMLListCollection(patchCollection, ["date", "time"]);

Sample XML:
<patch>
  <time>08:44:46</time>
  <date>10/10/12</date>
</patch>
<patch>
  <time>08:51:09</time>
  <date>10/10/12</date>
</patch>
<patch>
  <time>08:46:04</time>
  <date>10/11/12</date>
</patch> 
```

不知何故，上述功能无法按我的预期工作。我希望它首先比较日期，并且仅在日期相等时才对时间进行排序。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:15:43.823

你的问题不是你的代码......这是你的xml。

如果添加根节点，您的代码将按预期工作：

```
var xml:XML = 
    <root>
      <patch>
        <time>08:44:46</time>
        <date>10/10/12</date>
      </patch>
      <patch>
        <time>08:51:09</time>
        <date>10/10/12</date>
      </patch>
      <patch>
        <time>08:46:04</time>
        <date>10/11/12</date>
      </patch>
    </root>

var patchCollection:XMLListCollection = new XMLListCollection(xml.patch);

sortXMLListCollection(patchCollection, ["date", "time"]); 
```

# java - 在带有 Mysql 的 Jdbc 中使用准备好的语句进行批量插入非常慢

> ID：13177894
> 
> 赞同：2
> 
> 时间：2012-11-01T13:15:03.650
> 
> 标签：java, mysql

在带有 Mysql 的 Jdbc 中使用准备好的语句进行批量插入非常慢我正在尝试插入 3 亿条记录。记录分为 29 个表我尝试每批 2000 和 1000 条记录插入的时间分别为 20 和 10 分钟只有一个表有 20 列剩余所有表将有 3 到 6 列

Java 代码在 5 秒内读取 10000 行，但批量插入需要 90 分钟的时间

我正在使用 4GB 内存的 Windows 7

## 我的 Mysql my.ini 配置是

```
[client]

port=3306

[mysql]

default-character-set=latin1

[mysqld]

max_allowed_packet=100M
wait_timeout=3000

port=3306

basedir="C:/Program Files (x86)/MySQL/MySQL Server 5.1/"

datadir="C:/ProgramData/MySQL/MySQL Server 5.1/Data/"

default-character-set=latin1

default-storage-engine=INNODB

sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

max_connections=100

query_cache_size=0

table_cache=256

tmp_table_size=33M

thread_cache_size=8

myisam_max_sort_file_size=100G

myisam_sort_buffer_size=66M

key_buffer_size=53M

read_buffer_size=64K
read_rnd_buffer_size=256K

sort_buffer_size=256K

innodb_additional_mem_pool_size=3M

innodb_flush_log_at_trx_commit=1

innodb_log_buffer_size=2M

innodb_buffer_pool_size=206M

innodb_log_file_size=52M

innodb_thread_concurrency=10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:28:51.827

我的建议是对`DROP`所有表的索引、`INSERT`行，然后重新创建索引。如果数据库不需要为插入的每一行更新索引，它可以更快地插入数据。与使用“随机”插入序列构建索引相比，可以从头开始创建索引。

如果您可以将各个表的行按主键顺序排序，并按该顺序插入它们，它也可能会有所改善。

最后，批处理是大量小请求的成本与进行大/长事务的成本之间的权衡。尝试使用比您当前使用的更小和更大的批量大小进行试验。

# spring-security - 根据身份验证和授权重定向到特定页面

> ID：13177895
> 
> 赞同：0
> 
> 时间：2012-11-01T13:15:05.910
> 
> 标签：spring-security, ldap

我正在构建一个应用程序，我在其中根据用户的角色授权用户。角色在 Ldap 中定义。我们拥有财务、云计算和销售三个角色。根据我们希望在成功登录时重定向到特定页面的角色。如果登录失败，它应该重定向到某个错误页面。

我在 spring-security.xml 中编写了以下内容。我无法重定向到不同的页面。

```
 <beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <http auto-config="true">
        <intercept-url pattern="/finance*" access="ROLE_FINANCE"  />

        <logout logout-success-url="/logout" />
        <intercept-url pattern="/cloud*" access="ROLE_CLOUD" />

        <logout logout-success-url="/logout" />
        <intercept-url pattern="/sales*" access="ROLE_SALES" />

        <!-- <form-login login-page="/login1" default-target-url="/login1"
            authentication-failure-url="/loginfailed" /> -->
        <logout logout-success-url="/logout" />
        <!-- <form-login login-page="/login.vtu" authentication-success-handler-ref="customHandler"
            authentication-failure-url="/login.vtu?error=true" default-target-url="/login.vtu"
            login-processing-url="/j_security_check"  />  -->
    </http>
 <authentication-manager>
         <ldap-authentication-provider 
           user-search-filter="(uid={0})"
           user-search-base="cn=worldAdmin"
           group-search-filter="(uniqueMember={0})"
           group-search-base="cn=worldAdmin"
           group-role-attribute="cn"
           role-prefix="ROLE_">
         </ldap-authentication-provider>
 </authentication-manager>

 <ldap-server url="ldap://localhost:12389/o=xyz" manager-dn="cn=xyzAdmin,cn=worldAdmin,o=xyz" manager-password="abc" /> 

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:57:17.513

*   使用 authentication-success-handler-ref 根据用户角色重定向到特定页面。*（根据 Spring Security，authentication-success-handler-ref 不应与 default-target-url（或 always-use-default-target-url）结合使用，因为实现应始终处理到后续目的地的导航）*

*   登录失败时使用 authentication-failure-url 重定向：

```
    <form-login login-page="/login.vtu" authentication-success-handler-ref="customHandler"
            authentication-failure-url="/login.vtu?error=true" />

     <bean id="customHandler" class="xyzweb.handler.CustomHandler" />

```

```
    公共类 CustomHandler 扩展 SavedRequestAwareAuthenticationSuccessHandler {
       @覆盖
       public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication)
            抛出 IOException，ServletException {
              //authentication.getAuthorities() 检查角色
              如果（是财务角色）{
                  response.sendRedirect(getFinancialRedirectUrl());
              }
        }
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T22:55:45.057

登录.xhtml

```
<h:head >
    <f:metadata>
      <f:event type="preRenderView" listener="#{loginBean.onPageLoad}"/>
  </f:metadata>
</h:head> 
```

登录豆

```
public void onPageLoad(){
    Authentication auth = SecurityContextHolder.getContext().getAuthentication();
    if (!(auth instanceof AnonymousAuthenticationToken)) {
        try {
            FacesContext.getCurrentInstance().getExternalContext().redirect(url);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# c# - 更改文化失败日期时间转换

> ID：13177897
> 
> 赞同：0
> 
> 时间：2012-11-01T13:15:12.613
> 
> 标签：c#, culture

DateTime 令人沮丧的问题，我们有一个带有日期选择器的部分，如果文化设置为 en-GB 并且日期是 01/11/2012 (dd/mm/yyyy)，然后文化被交换为中文 (zh -CN) 日期以旧文化格式传递，当它转换为 DateTime 时，日期时间变为 2012/1/11，而文化应该是 (yyyy/mm/dd)。

这似乎是我遇到的唯一一种转换出错的文化，因为它应该是 2012/11/1，因为 11 是一个月。

有谁知道为什么它不能正确转换？

对不起，伙计们，这是我的错，因为不够清楚，需要更多细节。

我们有一个允许用户选择日期范围的报告表单，在该表单上，我们使用日期范围选择器 (http://www.filamentgroup.com/lab/update_date_range_picker_with_jquery_ui/) 填充提交给过滤器的只读文本框结果。用户可以从下拉列表中选择他们当前的文化（我们的用户需要，因为他们希望在不更改浏览器设置的情况下轻松地在英文和中文之间切换，如果文化是 en-GB，则日期范围字符串可能显示为“01/01/2012- --01/11/2012"，即 2012 年 1 月 1 日 - 2012 年 11 月 1 日。这存储在 url 中，例如：&DateRange=01%2F01%2F2012+---+01%2F11%2F2012。

现在，如果用户切换到中文，它会使用所有相同的查询参数调用当前页面，但也会更改文化参数（我们允许通过 URL 参数覆盖文化），这意味着日期格式 01/11/2012 在查询字符串，当我们使用：

```
DateTime.TryParse(endDateString, out endDate); 
```

DateTime 对象包含 2012 年 1 月 11 日而不是 2012 年 11 月 1 日的日期。

有没有一种方法可以存储日期字符串所在的文化信息，并在交换文化时使用它转换为新的文化信息？

任何更好的想法都将不胜感激，从 en-GB 交换到 en-IN（印度）似乎与交换到 es-MX（墨西哥）一样工作正常。它似乎只是中文，但这可能是基于这些语言日期格式的运气。

非常感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:14:38.460

```
DateTime.TryParse(endDateString, out endDate); 
```

正在使用服务器上默认的任何文化。

基本解决方案是：

```
var ci = GetCultureInfoFromRequest();
DateTime.TryParse(endDateString, out endDate, ci); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:19:14.660

在这种情况下，使用字符串来移动日期时间，如果您不处理日期时间而只是存储它。之后，您可以在将其存储到数据库之前更改格式。

# sql - 如何查找日期是奇数周还是偶数周？

> ID：13177901
> 
> 赞同：0
> 
> 时间：2012-11-01T13:15:35.253
> 
> 标签：sql, sql-server, stored-procedures

在我的桌子上，我每天都有：

```
Id_______Startdate _______ EndDate __________MondayMorning _____MondayEvening ___TuMorning  ....  
121 _____2012-01-01________2012-12-31 ________2 ___________________2______________2   
122 _____2012-02-01________2012-08-05 ________1 ___________________2______________3 
```

我已经使用 Startdate 和 EndDate 生成了一个日期列表。

我想知道这个日期是属于奇数周还是偶数周，以便我可以从输出中筛选出编号为 3 或 1 的日期（参见第二条记录）。

如何过滤属于奇数周和偶数周的日期为 1 和 3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:18:10.850

您可以使用`datepart`with`wk`参数来确定周数：

```
 SELECT datepart(wk, YourDate) 
```

从那里，您可以使用模数来确定周数是偶数还是奇数：

```
 SELECT datepart(wk, YourDate) % 2 
```

偶数周返回 0，奇数周返回 1。

# javascript - 如何将maya 3D模型包含到三个js中？

> ID：13177903
> 
> 赞同：5
> 
> 时间：2012-11-01T13:15:44.630
> 
> 标签：javascript, three.js

我想将我的 3D 模型包含到网页中。如何将 Maya 3D 模型包含到三个 js 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:14:59.523

首先，您必须以`obj`格式导出模型。确保您已`python 2.7`安装。

然后，您可以使用包含在其中的脚本将其转换`obj`为`js`格式-`python``three.js``convert_obj_three.py`

将您的模型和`python`脚本放在同一个文件夹中`python`以使其更容易。

然后在命令行运行：

```
python convert_obj_three.py -i infile.obj -o outfile.js 
```

`infile.obj`您从 Maya 导出的模型的名称在哪里，并且`outfile.js`是您希望加载的文件`three.js`。

一旦你有一个转换后的文件，你可以在这里用类似于这个脚本的东西来加载它，我正在创建 3 个模型，但你可以用它来加载一个：

```
function loadModel() {
    loader = new THREE.JSONLoader();
    loader.load("js/your_model.js", function( geometry ) {
    box = [];

    group = new THREE.Object3D();
    scene.add(group);

            // here i'm creating 3 objects of same model
    for (var i = 0; i < 3; i++)
    {
        box[i] = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({map: THREE.ImageUtils.loadTexture("js/your_texture.jpg")}));
        box[i].scale.set(20,20,20);
        box[i].position.x = (120*i) - 150;
        group.add(box[i]);
    }
        callSomeFunctionOnceLoaded();
        },"js"
    );
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-02T13:39:39.890

我刚刚开始制作一个简单的导出器来从 OBJ 转换为 Three.JS 3.1 版 JSON 格式。所以如果你不想使用 python 导出器，你可以使用这个。

[https://github.com/theMaxscriptGuy/Windows_Programs/tree/master/Obj_To_ThreeJS](https://github.com/theMaxscriptGuy/Windows_Programs/tree/master/Obj_To_ThreeJS)

谢谢

# java - 我的正则表达式不会删除 java 中数字之间的破折号

> ID：13177906
> 
> 赞同：2
> 
> 时间：2012-11-01T13:15:58.973
> 
> 标签：java, regex

我曾尝试在 JAVA 中使用正则表达式来替换手机号码字符串中的任何有趣字符，但是，它似乎无法删除数字之间的“-”

这是我的代码，

```
// Remove all (,),-,.,[,],<,>,{,} from string

myMobileNumber.replaceAll("[^\\d]", ""); 
```

示例 65-12345678

它仍然允许 - 通过而不将其删除。=(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T13:19:08.327

您应该重新分配结果。String 是一个不可变对象，包括所有方法`.replaceAll`都不会修改它。

```
myMobileNumber = myMobileNumber.replaceAll("[^\\d]", ""); 
```

（顺便说一句，该模式`"\\D"`等效于`"[^\\d]"`。）

# jsf-2 - FacesConverter forClass 不适用于复合组件

> ID：13177911
> 
> 赞同：4
> 
> 时间：2012-11-01T13:16:25.177
> 
> 标签：jsf-2, converters, composite-component

我有一个简单的复合组件，它必须呈现一个 inputText。当输入值并按下 commandButton 时，将引发以下异常：

```
java.lang.IllegalArgumentException: Cannot convert 1 of type class java.lang.String to class sample.entity.Product 
```

当我使用 h:inputText 而不是 d:myInputText 它工作正常。

是否可以为复合组件使用 FacesConverter 和属性 forClass？我不喜欢使用标签 f:converter 的转换器属性或转换器 ID。有人帮我吗？

**页面代码：**

```
<h:form>
  <h:messages />
  Product Id: <h:myInputText value="#{productController.product}"/>
  <h:commandButton value="Submit" action="#{productController.someAction()}" />
  Product Description: <h:outputText value="#{productController.product.description}"/>
</h:form> 
```

**复合代码：**

```
<composite:interface>
   <composite:attribute name="value"/>
   <composite:editableValueHolder name="value" targets="#{cc.clientId}:value"/>
</composite:interface>

<composite:implementation>
   <div id="#{cc.clientId}">
      <h:inputText id="value" value="#{cc.attrs.value}"/>
      <h:message for="#{cc.clientId}:value" />
    </div>
</composite:implementation> 
```

**托管豆代码：**

```
@Named("productController")
@RequestScoped
public class ProductController {

  private Product product;

  public Product getProduct() {
    if (product == null) {
        product = new Product();
    }
    return product;
  }

  public void setProduct(Product product) {
    this.product = product;
  }

  public void someAction() {
    System.out.println("Product " + product);
  }
} 
```

**转换器代码：**

```
@FacesConverter(forClass = Product.class)
public class ProductConverter implements Converter {

  @Override
  public Object getAsObject(FacesContext fc, UIComponent uic, String value) {
    System.out.println("[DEBUG] getAsObject: " + value);
    if (value == null || "".equals(value)) {
        return null;
    }
    //TODO: some logic to get entity from database.
    return new Product(new Long(value));
  }

  @Override
  public String getAsString(FacesContext fc, UIComponent uic, Object o) {
    System.out.println("[DEBUG] getAsString: " + o);
    if (o == null) {
        return null;
    }
    return String.valueOf(((Product) o).getId());
  }
} 
```

**实体代码：**

```
 public class Product {

      private Long id;
      private String description;

      public Product() {
      }

  public Product(Long id) {
    this.id = id;
  }

  public Long getId() {
    return id;
  }

  public void setId(Long id) {
    this.id = id;
  }

  public String getDescription() {
    return description;
  }

  public void setDescription(String description) {
    this.description = description;
  }

  @Override
  public int hashCode() {
    int hash = 7;
    hash = 29 * hash + (this.id != null ? this.id.hashCode() : 0);
    return hash;
  }

  @Override
  public boolean equals(Object obj) {
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    final Product other = (Product) obj;
    if (this.id != other.id && (this.id == null || !this.id.equals(other.id))) {
        return false;
    }
    return true;
  }

  @Override
  public String toString() {
    return "Product{" + "id=" + id + '}';
  }
} 
```

我使用 Mojarra 2.1.14、Glassfish 3.1 和 CDI。最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:48:48.473

我能够在 Mojarra 2.1.14 中重现它。这是 Mojarra 中的一个错误。它在 MyFaces 2.1.9 中运行良好。我已将其作为[问题 2568](https://github.com/eclipse-ee4j/mojarra/issues/2572)报告给 Mojarra 家伙。同时，除了在客户端中明确指定 a`<f:converter for>`或转移到 MyFaces （尽管它也有自己的一组特定的怪癖/问题）之外，没有其他选择。

# mysql - 存储和返回总分的最佳数据库字段类型

> ID：13177912
> 
> 赞同：-1
> 
> 时间：2012-11-01T13:16:25.230
> 
> 标签：mysql

我有一个具有以下结构的数据库表

*   ID
*   项目
*   类别
*   分数

'score' 单元格只能具有以下值：

*   '' （空白的）
*   -1
*   0
*   1

我应该使用什么字段类型来存储“分数”值，以便在我根据项目 ID 查询时能够获得总分？枚举？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:18:43.153

为什么不使用`TINYINT`（*您不需要任何转换*）作为数值。

```
Score
=======
0
1
2
3 
```

*后续问题，为什么需要空行或空白？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:39:36.787

出于可读性的原因，我宁愿使用 ENUM。稍后可能很难理解数字 3 或 0 在您的表中的确切含义，但使用 ENUM 值的正确名称，即使在一年后您也可以轻松识别它。

另外的。当 ENUM 中的元素数小于 255 时，ENUM 使用与 tinyint 相同的字节数 (1)。

# c# - c#在确保实体实现接口后访问实体的属性

> ID：13177914
> 
> 赞同：0
> 
> 时间：2012-11-01T13:16:32.570
> 
> 标签：c#, generics, interface, poco

我需要在某些操作上更新我的 POCO 实体的某些属性。

我定义了以下接口：

```
public interface IEntityPOCO
{
    Guid Id { get; set; }
}

public interface IHasLastChange : IEntityPOCO
{
    DateTime LastChange { get; set; }
} 
```

这是一个示例操作方法：

```
public void SomeStuff<T>(T entity) where T : class, IEntityPOCO
{
    entity.Id = Guid.NewGuid(); // Works like a charm.

    if (entity is IHasLastChange)
    {
        entity.LastChange = DateTime.Now; // Doesn't work. D'oh.
        (IHasLastChange)entity.LastChange = DateTime.Now; // Doesn't work either.
    }
} 
```

*   由于 POCO 可能实现了很多不同的属性（都具有相应的接口），因此使用不同的函数签名来解决问题几乎是不可能的。
*   出于性能原因，我宁愿不使用反射。

有什么可行的方法让我摆脱痛苦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:20:11.220

你需要更多`()`的铸件：

```
 // (IHasLastChange)entity.LastChange = DateTime.Now;
   ((IHasLastChange)entity).LastChange = DateTime.Now; 
```

> 因为有很多不同的属性

然后使用临时变量将很快得到回报：

```
if (entity is IHasLastChange)
{
    lastChange = (IHasLastChange) entity;
    lastChange.LastChange = DateTime.Now; 
    lastChange. ... 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:26:36.057

执行此操作的常用方法是将实体转换为`as`并检查它是否为`null`，如下所示：

```
var lastChangedEntity = entity as IHasLastChange;
if (lastChangedEntity != null)
{
    lastChangedEntity.LastChange = DateTime.Now;
} 
```

但是随着不同接口数量的增加，这会导致令人讨厌的代码异味。

如果是这种情况，请考虑使用[策略模式](http://www.codeproject.com/Articles/52807/Design-Patterns-Part-1-The-Strategy-Pattern)来处理它，这样您将遵守[开放/封闭原则 (OCP)](http://en.wikipedia.org/wiki/Open/closed_principle)并使您的应用程序更易于维护。

**编辑：**一个策略模式的例子是：

```
public void SomeStuff<T>(T entity) where T : class, IEntityPOCO
{
    entity.Id = Guid.NewGuid(); // Works like a charm.

    // _processors is a List<IProcessEntities>
    var processors = _processors.Where(p => p.CanProcess(entity));

    foreach (var processor in processors)
    {
        processor.Process(entity);
    }
}

public interface IProcessEntities
{
    bool CanProcess<T>(T entity) where T : class, IEntityPOCO;

    void Process<T>(T entity) where T : class, IEntityPOCO;
}

public class LastChangedProcessor : IProcessEntities
{
    public bool CanProcess<T>(T entity) where T : class, IEntityPOCO
    {
        return typeof(IHasLastChange).IsAssignableFrom(typeof(T));
    }

    public void Process<T>(T entity) where T : class, IEntityPOCO
    {
        var lastChangeEntity = entity as IHasLastChange;
        if (lastChangeEntity != null) 
        {
            lastChangeEntity.LastChange = DateTime.Now;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:20:24.290

你需要投。

```
var hasLastChange = entity as IHasLastChange;
hasLastChange.LastChange = DateTime.Now; //It works! 
```

或者

```
((IHasLastChange)entity).LastChange = DateTime.Now; //It also works! 
```

# javascript - 图像地图合并

> ID：13177916
> 
> 赞同：0
> 
> 时间：2012-11-01T13:16:40.470
> 
> 标签：javascript, html, xhtml

我想要做的就是我有一张包含不同州的国家地图，并在用户单击该州时在单独的页面中描述该州。我创建了一个以不同状态为区域的图像地图，但我无法放置被点击状态的实际坐标。

这是我的代码：

```
<script language="JavaScript"> 
function point_it(event,id){
pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById("pointer_div").offsetLeft;
pos_y = event.offsetY?(event.offsetY):event.pageY-document.getElementById("pointer_div").offsetTop;
k=pos_x;
document.getElementById(id).coords.value=k;
}
</script>
</head>
<body>
<br><br>
<h1>Country Locations</h1>
<div id="pointer_div">
<img alt="country map " src="images/country.jpg"       

onclick="point_it(event,'state')"     width="500" height="300" usemap="#map" />

</div>
<map name="map">
<area  id="State" alt="IT" shape="default" coords=" " href="#bang" />
</map> 
<div id="bang"><h3>State</h3></div>
<p>Located at Country</p> 
```

# windows - 如何截屏 Windows 7 桌面和登录屏幕？（即远程监控）

> ID：13177918
> 
> 赞同：0
> 
> 时间：2012-11-01T13:16:52.370
> 
> 标签：windows, screenshot, headless, remote-management

我的公司有大约 50 - 60 台机器需要远程管理。

他们设置为自动登录，但我想执行以下活动：

*   捕获屏幕截图（用于诊断目的，如果某些东西不起作用）
*   启动/停止/终止进程
*   启动/停止/终止服务
*   重启机器

这似乎很简单，但我想获得有关执行此操作的最佳方法的信息。我最大的问题是“不管发生什么”捕获屏幕截图。例如，如果我编写一个 Windows 服务，它无法捕获桌面会话屏幕或登录屏幕。

编辑：我更喜欢将此作为 Windows 服务，因此即使用户未登录（即如果自动登录出现问题）它也可以运行，但这似乎不可能。此外，如果机器中有人 RDP，我还想捕获一个屏幕。基本上，我想确切地知道每台机器发生了什么并远程监控它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:46:57.473

**远程捕获屏幕截图**

[Boxcutter](http://keepnote.org/boxcutter/)会这样做（虽然我不知道登录屏幕，但理论上如果你在下面使用 PSExec 运行它应该）

**启动/停止/终止进程和启动/停止/终止服务**

[PSExec、PSList、PSKill、PSService SysInternals](http://technet.microsoft.com/en-us/sysinternals)的所有部分都将在这里工作

**重启机器**

通过 PSExec 运行关机命令或使用 -m 标志和要关机的 PC 名称运行关机命令。

PSTools 和远程关机确实需要/希望机器与您的 PC 位于同一域中，并且您必须拥有相关 PC 的管理员权限

# java-ee-6 - 嵌入式容器是否可以与 JBoss 7 一起使用？

> ID：13177919
> 
> 赞同：2
> 
> 时间：2012-11-01T13:16:53.907
> 
> 标签：java-ee-6, jboss7.x, embedded-container

前段时间，我用 GlassFish 试用了 EJB 3.1 的可嵌入容器 API。

现在我尝试用 JBoss 7.1 做同样的事情，但无法让它工作。我花了一些时间研究这个问题，但只发现其他人有这个问题，没有答案或例子。

我知道 Arquillian，它或多或少地消除了对用于测试 EJB 的可嵌入容器的需求，但仍然对可行的解决方案感兴趣。

因此，这是适用于 GlassFish 的代码：

```
Map<String, Object> params = new HashMap<String, Object>();
//param is needed due to GlassFish bug http://java.net/jira/browse/GLASSFISH-16285
params.put(EJBContainer.APP_NAME, "MyAppName");
EJBContainer container = EJBContainer.createEJBContainer(params);
MyBean instance = (MyBean) container.getContext().lookup("java:global/MyAppName/classes/MyBean");
instance.doSomething("data");
container.close(); 
```

# ios - 特定单元格的 UITableView 中的迭代

> ID：13177934
> 
> 赞同：0
> 
> 时间：2012-11-01T13:17:48.757
> 
> 标签：ios

我在 UITableView 的单元格中有数据和图像。我想更改特定单元格的图像，每个单元格都有一个代码。

我无法找到迭代单元格的表格视图的方法。

这是我的 tableview 功能的快照。

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellText = nil;

    NSArray *keys = [[[self packageItems] allKeys] 
                     sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
    cellText = [keys objectAtIndex:[indexPath row]];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] 
                 initWithStyle:UITableViewCellStyleDefault
                 reuseIdentifier:CellIdentifier];
        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    }
    cell.imageView.image=[UIImage imageNamed:@"checkbox.png"];
    //cell.imageView.image=[UIImage imageNamed:@"checkbox-checked.png"];

    return cell;
} 
```

还有另一个功能，我想将单元格图像更改为 cell.imageView.image=[UIImage imageNamed:@"checkbox-checked.png"];

```
- (void)OnAction
{
    static NSString *CellIdentifier = @"Cell";
    NSIndexPath *indexPath = [[NSIndexPath alloc] initWithIndex:0];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath ];
    cell.imageView.image=[UIImage imageNamed:@"checkbox-checked.png"];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:27:16.493

如果您不想使用功能更改表格视图中的某些内容，则不必创建新单元格，只需修改实际单元格即可。只需在您的 cellForRowAtIndexPath 委托中创建条件：

```
if(indexPath == indexToModify) {
    cell.imageView.image=[UIImage imageNamed:@"checkbox-checked.png"];
} else {
    cell.imageView.image=[UIImage imageNamed:@"checkbox.png"];
} 
```

最后在您的 - (void)OnAction 方法中使用：

```
[self.tableView reloadData]; 
```

# java - 正则表达式帮助，来自标签子标签内属性的数据

> ID：13177935
> 
> 赞同：1
> 
> 时间：2012-11-01T13:17:49.530
> 
> 标签：java, html, regex, parsing

所以我只想快速说明正则表达式是解决这个问题的合适解决方案，它正在解析的 html 的格式总是相同的。

我有兴趣解析的特定 html 看起来类似于以下内容

```
<a href="" target="" onCick=""><img style="" onmouseover="" onmouseout="" src="" alt="" /></a> 
```

我有兴趣从该字符串中提取“src”和“alt”标签。正则表达式真的让我感到困惑，以至于我真的不明白我在用它做什么。所以真正的帮助将不胜感激。意义重大，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:20:11.533

您使用哪种语言？正则表达式方言有一些细微差别。

无论哪种方式，对于 JavaScript，您都可以使用

```
var match = /src="(.*?)"\s+alt="(.*?)"/.exec(pieceOfHTML);
// match[1] should be the src, match[2] the alt 
```

或者对于 Python，

```
match = re.search(r'src="(.*?)"\s+alt="(.*?)', pieceOfHTML)
# match.group(1) and match.group(2) respectively 
```

*编辑*重新评论：

```
<a href=".*?"\s+target=".*?"\s+onCick=".*?"><img style=".*?"\s+onmouseover=".*?" onmouseout=".*?"\s+src="(.*?)"\s+alt="(.*?)" 
```

应该是一个体面的正则表达式，只匹配所需的模式，对空格宽容。

# java - 小型图书馆管理程序的问题

> ID：13177947
> 
> 赞同：0
> 
> 时间：2012-11-01T13:18:34.613
> 
> 标签：java

我在拼凑这个时遇到了很大的麻烦。我有基本的读写功能。我需要检查来自文件“Books.txt”的输入，以便：

*   ISBN 有效
*   CopyNumber、Year 和 Statistics 应该是数字
*   Title、Author 和 Publisher 必须包含值
*   BorrowDate 必须是有效日期
*   ReturnDate（如果可用）必须是有效日期
*   LibraryCardNumber（如果可用）必须是数字。

如果没有借书，则最后两个字段不存在。

来自“Books.txt”的 2 个示例行：

```
9780140455168#2#The Twelve Caesars#Suetonius#Penguin Classics#2007#3#101009#101030#5478
9780141188607#1#Claudius the God#Robert Graves#Penguin Classics#2006#2#080123 
```

错误行应写入带有错误消息的“ErrorLines.txt”，例如 Wrong ISBN。无错误的书籍应写入按作者姓名排序的“NewBooks.txt”。

这是我到目前为止所得到的。我不是在寻找一个完整的解决方案，因为我显然还有很长的路要走，但是如果有人愿意给我一些指示，我将非常感激！是的，这是家庭作业：D

我是否需要进行尝试循环来验证输入...？

图书馆类：

```
import java.util.ArrayList;
import java.util.*;
import java.io.*;
import java.io.IOException;

public class Library {

public void readFromFile (String filename) throws IOException {

String inLine;
File inFile;

    inFile = new File("Books.txt");
    BufferedReader fIn = new BufferedReader(new FileReader(inFile));

        inLine = fIn.readLine();
        while (inLine != null) {
            inLine = fIn.readLine();
            aBookList.add(inLine + "\n");
        }
        fIn.close();
    }

public void writeToFile (String fileName) throws IOException {

    BufferedWriter bw = null;
        try {
            bw = new BufferedWriter(new FileWriter(fileName));

            bw.write("???"); //Dont know what to put here...
            bw.newLine();
        } catch (IOException e) {
            System.out.println("Error writing file.");
        } finally {
            bw.close();
        }
    }

 public static boolean isISBN13Valid(isbn) {
        int check = 0;
        for (int i = 0; i < 12; i += 2) {
            check += Integer.valueOf(isbn.substring(i, i + 1));
        }
        for (int i = 1; i < 12; i += 2) {
            check += Integer.valueOf(isbn.substring(i, i + 1)) * 3;
        }
        check += Integer.valueOf(isbn.substring(12));
        return check % 10 == 0;
    }
} 
```

这是 Book 类：

```
import java.util.*;
import java.io.*;

public class Book {
Book b = new Book();
private static ArrayList<String> aBookList = new ArrayList<String>();

private String Isbn;
private int CopyNumber;
private String Title;
private String Author;
private String Publisher;
private int Year;
private int Statistics;
private String BorrowDate;
private String ReturnDate;
private int LibraryCardNumber;

public void bookInfo (String nIsbn, int nCopyNumber, String nTitle, String nAuthor, String nPublisher, int nYear,
        int nStatistics, String nBorrowDate, String nReturnDate, int nLibraryCardNumber) {

    Isbn = nIsbn; 
    CopyNumber = nCopyNumber; 
    Title = nTitle; 
    Author = nAuthor; 
    Publisher = nPublisher; 
    Year = nYear;
    Statistics = nStatistics; 
    BorrowDate = nBorrowDate; 
    ReturnDate = nReturnDate; 
    LibraryCardNumber = nLibraryCardNumber;
}

public void bookInfo (String Row) {
    StringTokenizer sT = new StringTokenizer(Row);
    Isbn = sT.nextToken("#");
    CopyNumber = Integer.parseInt(sT.nextToken("#") );
    Title = sT.nextToken("#");
    Author = sT.nextToken("#");
    Publisher = sT.nextToken("#");
    Year = Integer.parseInt(sT.nextToken("#") );
    Statistics = Integer.parseInt(sT.nextToken("#") );
    BorrowDate = sT.nextToken("#");
    ReturnDate = sT.nextToken("#");
    LibraryCardNumber = Integer.parseInt(sT.nextToken("#") );
}
public void setIsbn(String nIsbn) {
    Isbn = nIsbn;       
}
public void setCopynumber(int nCopyNumber) {
    CopyNumber = nCopyNumber;       
}
public void setTitle(String nTitle) {
    Title = nTitle;     
}
public void setAuthor(String nAuthor) {
    Author = nAuthor;       
}
public void setPublisher(String nPublisher) {
    Publisher = nPublisher;     
}
public void setYear(int nYear) {
    Year = nYear;       
}
public void setStatistics(int nStatistics) {
    Statistics = nStatistics;       
}
public void setBorrowDate(String nBorrowDate) {
    BorrowDate = nBorrowDate;       
}
public void setReturnDate(String nReturnDate) {
    ReturnDate = nReturnDate;
}
public void setLibraryCardNumber(int nLibraryCardNumber) {
    LibraryCardNumber = nLibraryCardNumber;
}

 public String getAll () {
    String s = " ";
    return (Isbn + s + CopyNumber + s + Title + s + Author + s + Publisher + s +
                   Year + s + Statistics + s + BorrowDate + s + ReturnDate + s +
                   LibraryCardNumber);
}
public void showAll () {
    String t = "\t";
    System.out.println(Isbn + t + CopyNumber + t + Title + t + Author + t +
                       Publisher + t + Year + t + Statistics + t + 
                       BorrowDate + t + ReturnDate + t + LibraryCardNumber);
}
} 
```

最后是带有 main 方法的 Main 类：

```
public class Main<aBookList> implements Comparable<aBookList> {
public static void main(String [] args) throws Exception {

    new Library().readFromFile("Books.txt");

    new Library().writeToFile("NewBooks.txt");
    new Library().writeToFile("ErrorLines.txt");

}

@Override
public int compareTo(aBookList o) {
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:19:18.160

as it is homework, i will point you direction, not give you code

1) you have lot of mess here, ie i'm not sure why you have compare in your main class? instead of creating getAll method in bookInfo(which is named against java nameing convention) just override toString method

2) why do you have list of strings? read a line, convert this into book, if book is valid add it to your list, otherwise report an error

3) move your isISBN13Valid method to book

4) write to file -> loop through your list, and save each element into file by `bw.write(book.toString())`,

5) create second method createErrorFile, then each error what you will have add into your error list, and after you call that method, you will sace each element into given file, it is not perfetc solution, better will be if you add error to file each time when it occur.

6) create one instance of library in your main method, and just call on it all your method, and avoid using static fields in your project(sometimes you must, but if you don;t need, just avoid them)

7) names for method import/ export i think sounds nicer than read from file read from file

# sencha-touch - Sencha 触摸可滚动面板不适用于 android

> ID：13177948
> 
> 赞同：0
> 
> 时间：2012-11-01T13:18:34.190
> 
> 标签：sencha-touch, scrollbar, extjs

我使用 sencha touch 2.0 构建了移动 Web 应用程序，我有一个常规面板对象：

```
{
   html : "content",
   scrollable : true
} 
```

当我使用可滚动选项时，我在 android 上遇到问题。滚动条出现，但所有内容都不可见......只是空白。

但是，在 iPhone 上，我可以看到内容并且一切正常。

为什么会发生？我需要做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:16:31.630

请提及

**'全屏：真'**

创建此面板时

谢谢

贾弗

# c# - Foreach 更改属性。什么是 PropertyInfo？

> ID：13177950
> 
> 赞同：2
> 
> 时间：2012-11-01T13:18:36.197
> 
> 标签：c#, reflection, arraylist, propertyinfo

我一直在阅读旧问题和搜索 MSDN 帮助，但我无法真正理解 PropertyInfo 是什么，特别是与遍历数组列表的问题有关

[c# foreach（对象中的属性）...有没有一种简单的方法可以做到这一点？](https://stackoverflow.com/questions/9893028/c-sharp-foreach-property-in-object-is-there-a-simple-way-of-doing-this))

我做了一个简单的类

```
public MyClass
{
public double myProperty; // etc
} 
```

然后我将类对象添加到列表中。我想遍历列表，只更改每个对象的属性

```
foreach ( MyClass i in MyClassList)
{
foreach ( double myProperty in i.GetType().GetProperties() )
{
// do something
}

} 
```

但我得到一个错误。在链接的问题（上面）中，它说使用 PropertyInfo 而不是'double。应该替换 myProperry 的“双重”的 PropertyInfo 是什么，它代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:22:54.013

你可能想要这个：

```
foreach (MyClass i in MyClassList)
{
    foreach (var myProperty in i.GetType().GetProperty("myProperty") )
    {
        myProperty.SetValue(i, 1.23);
    }
} 
```

这相当于：

```
foreach (MyClass i in MyClassList)
{
    i.myProperty = 1.23;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:30:09.717

`PropertyInfo`仅表示为该类型定义了属性的事实；它不是每个对象 - 它是针对类型的。您不需要任何实例即可获得`PropertyInfo`.

但是，首先请注意，这`myProperty`当前不是一个属性：让我们先修复它：

```
public MyClass
{
    public double MyProperty {get;set;}
} 
```

现在我们可以通过询问“它拥有的所有属性”来了解该属性，即

```
PropertyInfo[] props = typeof(MyClass).GetProperties(); 
```

或单个属性，可能在运行时从配置中获取名称：

```
PropertyInfo prop = typeof(MyClass).GetProperty("MyProperty"); 
```

您可以检查 a`PropertyInfo`的名称、类型、属性等 - 对于库代码非常有用。但是，在常规代码中，最简单的选择就是使用静态 C#：

```
foreach(MyClass obj in MyClassList) {
    obj.MyProperty = 123.45;
} 
```

如果您*需要*通过反射来做到这一点，那么您可以使用`SetValue`：

```
foreach(MyClass obj in MyClassList) {
    prop.SetValue(obj, 123.45, null);
} 
```

但是，除非您花费更长的时间，否则反射相对较慢。例如，针对“我会在运行时知道名称”场景的另一种替代方案是[FastMember](http://nuget.org/packages/FastMember)；那么你可以这样做：

```
var accessor = TypeAccessor.Create(typeof(MyClass));
string propName = "MyProperty";
object value = 123.45;
foreach(MyClass obj in MyClassList) {
    accessor[obj, propName] = value;
} 
```

这将比原始反射快得多，同时在运行时查找属性名称方面具有更大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:22:05.883

GetProperties 返回 PropertyInfo 对象的集合。

然后，您需要迭代（或搜索）该集合以获得所需的属性。

有关使用 GetProperties() 的示例，请参见此处

[http://rhondatipton.net/2010/02/28/using-getproperties-in-c/](http://rhondatipton.net/2010/02/28/using-getproperties-in-c/)

# selenium - 如何使用 selenium2 验证日期格式

> ID：13177963
> 
> 赞同：-1
> 
> 时间：2012-11-01T13:19:16.407
> 
> 标签：selenium, testng, selenium-webdriver

谁能让我知道如何使用 TestNG 使用 selenium webdriver 验证电子邮件和日期格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:38:17.183

尝试这个

```
String REGEX = "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"; 

//You may find anyother pattern for a valid email. Choose the one which you feel better 
```

然后在 Selenium 中，

```
WebElement element = driver.findElement(By.Id("yourId")); 
```

像这样检查，

```
assertTrue(element.getText().matches(REGEX)); 
```

或者你可能在 testng.xml 中有这个正则表达式，并在你的测试类中由@Paramaters 使用它。选择是你的。对于这次访问[，从 testng.xml 获取参数](http://testng.org/javadoc/org/testng/annotations/Parameters.html)

# magento - Magento 的 Nginx + PHP-FPM + FastCGI 缓存配置

> ID：13177965
> 
> 赞同：6
> 
> 时间：2012-11-01T13:19:23.147
> 
> 标签：magento, caching, nginx, fastcgi, php

你们中的一些人可能已经注意到最近由 Magento 发布的[优化 Magento 以获得最佳性能](http://info.magento.com/Optimizing_Magento_for_Peak_Performance.html)白皮书。尽管它主要是为 EE 用户编写的，但我相信我们也可以使用社区版的大部分技巧。

仔细阅读后，我继续将他们建议的 Nginx + fastcgi/proxy 缓存配置与我的 Magento 标准虚拟主机配置合并并进行了一些小的改进。这是我想出的：

```
fastcgi_cache_path /tmp/fcgi levels=1:2 keys_zone=MAGE:64m max_size=128m inactive=10h;

server {
listen  99999; ## Nginx port
server_name  domain.com www.domain.com;
root  /www/magento; ## App folder
index  index.php;

location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires  max;
    access_log  off;
    log_not_found  off;
}

location /index {
    try_files  $uri @fcgi_nocache;
}

location /checkout {
    try_files  $uri @fcgi_nocache;
}

location / {
    try_files  $uri @fcgi_cache;
    if ($cookie_frontend) { return 413; }
    if ($cookie_CUSTOMER_AUTH) { return 413; }
    if ($request_method = POST ) { return 413; }
    error_page 413 = @fcgi_nocache;
}

# Deny access to hidden files
location ~ (/(app/|includes/|/pkginfo/|var/|report/config.xml)|/\.svn/|/.hta.+) {
    deny  all;
}

# Forward paths like /js/index.php/x.js to relevant handler
location ~ .php/ {
    rewrite ^(.*.php)/ $1 last;
}

# Manually purge pages
location ~ /purge(/.*) {
    fastcgi_cache_purge MAGE "$scheme$request_method$host$1";
}

location @fcgi_cache {
    #if (!-e $request_filename) { rewrite / /index.php last; } ## Catch 404s that try_files miss
    fastcgi_pass  unix:/var/spool/phpfpm.sock; ## php-fpm socket
    include  fastcgi_params;
    fastcgi_connect_timeout  60;
    fastcgi_send_timeout  60;
    fastcgi_read_timeout  60;
    fastcgi_buffer_size  4k;
    fastcgi_buffers  512 4k;
    fastcgi_busy_buffers_size  8k;
    fastcgi_temp_file_write_size  256k;
    fastcgi_intercept_errors  off;        
    fastcgi_param SCRIPT_FILENAME  $document_root/index.php;
    fastcgi_param SCRIPT_NAME  /index.php;
    #fastcgi_keep_conn  on; # NGINX 1.1.14        
    fastcgi_temp_path  /tmp/fcgi2 1 2;

    fastcgi_cache  MAGE;
    #fastcgi_cache_key  "$request_method|$http_if_modified_since|$http_if_none_match|$host|$request_uri"; ## Original
    fastcgi_cache_key  "$scheme$request_method$host$request_uri$http_if_modified_since$http_if_none_match";
    #fastcgi_cache_lock  on 5s; # NGINX 1.1.12
    fastcgi_cache_valid  200 301 302 304 1h;
    fastcgi_hide_header  "Set-Cookie";

    if ($http_cookie !~ "X-Store=1" ) {
        add_header Set-Cookie "X-Store=1; path=/";
    }

    fastcgi_ignore_headers  "Cache-Control" "Expires" "Set-Cookie";
    fastcgi_cache_min_uses  1;
    fastcgi_cache_valid  30m;
    fastcgi_cache_use_stale  updating error timeout invalid_header http_500;
    fastcgi_cache_bypass  $cookie_EXTERNAL_NO_CACHE $cookie_CUSTOMER_AUTH;
    fastcgi_no_cache  $cookie_EXTERNAL_NO_CACHE $cookie_CUSTOMER_AUTH;

    #add_header  X-Cache-Status $upstream_cache_status; # Test
}

location @fcgi_nocache {
    #if (!-e $request_filename) { rewrite / /index.php last; } ## Catch 404s that try_files miss
    fastcgi_pass  unix:/var/spool/phpfpm.sock; ## php-fpm socket
    include  fastcgi_params;
    fastcgi_connect_timeout  60;
    fastcgi_send_timeout  60;
    fastcgi_read_timeout  60;
    fastcgi_buffer_size  4k;
    fastcgi_buffers  512 4k;
    fastcgi_busy_buffers_size  8k;
    fastcgi_temp_file_write_size  256k;
    fastcgi_intercept_errors  off;        
    fastcgi_param SCRIPT_FILENAME  $document_root/index.php;
    fastcgi_param SCRIPT_NAME  /index.php;
    #fastcgi_keep_conn  on; # NGINX 1.1.14        
    fastcgi_temp_path  /tmp/fcgi2 1 2;

    if ($http_cookie !~ "X-Store=1" ) {
        add_header Set-Cookie "X-Store=1; path=/";
    }
    #add_header  X-Cache-Status $upstream_cache_status; # Test
}

} 
```

经过一些测试，AB 的结果似乎令人印象深刻，但我真的不相信它们是否准确以及缓存系统是否完全按预期工作。有人可以详细说明 @fcgi_cache 和 @fcgi_nocache 以及 cookie 背后的实际逻辑是什么吗？谁实际上在获取缓存页面？当 PHP-FPM 关闭时，陈旧的缓存似乎不起作用（？）。我对我得到的不同标题有点困惑和困惑。

有人建议吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:50:59.240

this type of config is absolutely useless for magento, they used it only to get maximum "dummy" throughput, and this config logics even breaks in few places. you would better configure hole-punching full page cache extension, it will reinsert your dynamic blocks and will keep your site always in cache. there must be as well cache refresh for newly added products and qty changes, etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T15:09:27.460

我知道这是一个老问题，但如果有人偶然发现这个线程，我只想指出最新的 Magento 版本（>=1.13 企业和>=1.8 社区）将破坏这种 nginx 缓存方法。

升级并启用缓存后，如果您的用户正在查看缓存页面，他们将无法再添加到购物车。这背后的原因是，Magento 为“添加到购物车”按钮添加了一个 url 表单键，以防止跨站点脚本。打开 nginx 缓存后，第一个 URL 表单键将被缓存，下一组用户将加载未附加到其会话的无效表单键。据我所知，也没有办法打孔 nginx 缓存，这（引用 ADM）使得“nginx 缓存绝对无用”。如果有人知道是否有办法打孔 nginx 缓存，我会全神贯注。

如果您继续使用 nginx 缓存，我强烈建议您看看如何在不禁用它的情况下站起来，这将在升级到最新的 Magento 版本时为您省去很多麻烦。

# c# - 列等于列表项的 Lambda 表达式

> ID：13177967
> 
> 赞同：4
> 
> 时间：2012-11-01T13:19:33.427
> 
> 标签：c#, linq, lambda

我有一个包含不同列的一般结果，包括**id**列。我也有一个`List`有一组*id*的。我想获得`List`item(id) 与**Id**列值匹配的结果。

我尝试循环执行此操作：

```
foreach(int Uid in idList)
{
    queryResults = queryResults.Where(security => security.id== Uid);
} 
```

但这给了我在**queryResults**中的一条记录，这是 List 中的最后一个**Uid**。我想要的是， List 中所有**Uid**的记录都应该在**queryResults**中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T13:22:21.690

您需要将每个项目的 id 与存储在`idList`. 这可以通过`Where`您使用的 -extension`queryResult`结合使用的`Contains`-method 来实现`idList`：

```
var idList = new List<int>{1, 2, 3, 4} // This is your list holding the ids
var result = queryResult.Where(security => idList.Contains(security.SecuritiesId)); 
```

这将检查每个项目`queryResult`是否`SecuritiesId`包含在包含相关 ID 的列表中。

# iphone - 如何获取应用内通话信息

> ID：13177973
> 
> 赞同：0
> 
> 时间：2012-11-01T13:19:53.677
> 
> 标签：iphone, ios, call

`openURL`您如何使用iOS sdk 中的方法从您的应用程序中获取有关呼叫的信息（例如呼叫者和呼叫号码（或源和目标电话号码）、呼叫日期和呼叫持续时间等） ？有什么可能的方法吗？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:22:49.533

在 iOS 中，您无法从您的 App 访问任何其他 App 的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:31:03.787

无法通过苹果记录的 api 访问通话记录，但如果您使用 sm google，您会发现有一些方法可以访问此信息（取决于 iOS - 意味着 iOS4 的方法/api 与 iOS 3 不同），您可以使用这些方法访问此日志，但是您将无法在 Applestore 上发布该应用程序。

# d3.js - D3.JS - 如何将网格线添加到我的饼图中

> ID：13177974
> 
> 赞同：2
> 
> 时间：2012-11-01T13:19:56.903
> 
> 标签：d3.js, pie-chart

我将饼图示例扩展为： 饼图的半径取决于百分比。我想每 20% 添加网格线（圆圈），但我不知道怎么做。

这是更新的csv：

年龄、人口、百分比 <5,2704659,67 5-13,4499890,38 14-17,2159981,91 18-24,3853788,49 25-44,14106543,71 45-64,8819342,88 =65,612463 ,64

这是具有不同半径的饼图部分的更新代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
  background: #333;
}

.arc path {
  stroke: #fff;
    stroke-width: 2px;
}

.arc grid {
    stroke: #fff;
    stroke-width: 1;
    stroke-dasharray: 5,5;
}

.arc text {
    fill:#fff;
    font-size:12px;
    font-weight:bold;
}

.arc line {
  stroke: #fff;
}

</style>
<body>
<script src="d3.js"></script>
<script>

var width = 960,
    height = 500,
    radius = Math.min(width, height) / 2 - 10;

var color = d3.scale.ordinal()
    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

var arc = d3.svg.arc()
    .outerRadius(function(d) { return 50 + (radius - 50) * d.data.percent / 100; })
    .innerRadius(20);

var pie = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.population; });

var grid = d3.svg.area.radial()
    .radius(150);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

d3.csv("data.csv", function(error, data) {

  data.forEach(function(d) {
    d.population = +d.population;
    d.percent = d.percent;
  });

  var g = svg.selectAll(".arc")
      .data(pie(data))
    .enter().append("g")
      .attr("class", "arc");

    g.append("path")
        .attr("d", arc)
        .style("fill", function(d) { return color(d.data.age); });

    g.append("text")
        .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .text(function(d) { return d.data.age; });

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:44:22.333

首先设置刻度数：

```
var numTicks = 5;   // Each tick is 20% 
```

然后创建数据以创建网格线：

```
var sdat = [];
for (i=0; i<=numTicks; i++) {
    sdat[i] = (radius/numTicks) * i;
} 
```

然后你可以使用一个函数来创建径向网格线，你可以从 d3.csv 块中调用它：

```
addCircleAxes = function() {
    var circleAxes, i;

    svg.selectAll('.circle-ticks').remove();

    circleAxes = svg.selectAll('.circle-ticks')
      .data(sdat)
      .enter().append('svg:g')
      .attr("class", "circle-ticks");

    // radial tick lines
    circleAxes.append("svg:circle")
      .attr("r", String)
      .attr("class", "circle")
      .style("stroke", "#CCC")
      .style("opacity", 0.5)
      .style("fill", "none");

    // Labels for each circle
    circleAxes.append("svg:text")
      .attr("text-anchor", "center")
      .attr("dy", function(d) { return d - 5 })
      .style("fill", "#fff")
      .text(function(d,i) { return i * (100/numTicks) });

}; 
```

一个例子在这里：[http ://bl.ocks.org/3994129](http://bl.ocks.org/3994129)

（借自： http: [//kreese.net/blog/2012/08/26/d3-js-creating-a-polar-area-diagram-radial-bar-chart/](http://kreese.net/blog/2012/08/26/d3-js-creating-a-polar-area-diagram-radial-bar-chart/)）

# internet-explorer-8 - Internet Explorer 8 和 vaadin 的空白页

> ID：13177976
> 
> 赞同：2
> 
> 时间：2012-11-01T13:19:57.030
> 
> 标签：internet-explorer-8, vaadin

vaadin 应用程序始终显示为空白页。调试输出显示

JavaScriptException：（TypeError）：Objekt erwartet 编号：-2146823281 描述：Objekt erwartet 1877 个 JSONReferenced 可绘制字符的处理时间为 31 毫秒：8

“Objekct erwartet”的意思是“预期的对象”。

这发生在公司的每个 IE8 上，而不是 FireFox。它在 Tomcat 7 服务器上运行。工作目录和临时目录已被清除。同时，tomcat已被完全删除并重新安装。缓存已被清除。?restartApplication 被调用。

另一台机器的tomcat上的相同战争文件有效。

知道问题可能是什么吗？或者我如何才能更深入地解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:23:31.653

我不知道 IE 的灵魂发生了什么，但您可以尝试 IETester 程序（免费）并使用 DebugBar 工具（[http://www.my-debugbar.com/wiki/IETester/HomePage](http://www.my-debugbar.com/wiki/IETester/HomePage)）。也许您在 DebugBar 的 HTTP(s) 选项卡中找到了一些线索。祝你好运！

ps：脚本和其他安全设置都可以在IE中允许吗？

# sql-server - 有关于使用 MS SQL Server 和 MediaWiki 的任何信息吗？

> ID：13177979
> 
> 赞同：0
> 
> 时间：2012-11-01T13:20:04.080
> 
> 标签：sql-server, sql-server-2008-r2, mediawiki

我想知道是否可以将 mediawiki 1.18 与 MS SQL 服务器（特别是 MS SQL 服务器 2008 r2）一起使用，如果可能的话，在哪里可以找到有关它们一起工作的一些信息。我知道 mysql 是更好的解决方案，但我们的客户坚持使用 oracle DB 或 MS SQL。而且我更喜欢 MS SQL，因为我也使用过 oracle db，但我们仍然必须购买它。有人可以帮我吗？
我的 mediawiki 的当前版本是 1.18

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:45:23.727

试试这个 [https://bugzilla.wikimedia.org/show_bug.cgi?id=9767](https://bugzilla.wikimedia.org/show_bug.cgi?id=9767)

（我知道不是 1.18）

# css - div 从底层 div 继承光标样式

> ID：13177984
> 
> 赞同：0
> 
> 时间：2012-11-01T13:20:16.623
> 
> 标签：css

我有这个我无法解决的问题，我正在尝试向网站上的某些 div 添加放大/缩小光标，.l 图像有一个很好的放大光标，点击后，新的 .esc div 是加载（作为灯箱）

```
.l{
cursor: -webkit-zoom-in; cursor: -moz-zoom-in;
}
.esc {
 cursor: -webkit-zoom-out; cursor: -moz-zoom-out;
}

#media{
 cursor:default;
} 
```

假设#media div 包含在 .esc div 中。#media div 有一些区域实际上什么都没有，在这些区域中，鼠标光标不是：default，而是-webkit-zoom-out。

我还没有找到解决这个问题的方法，知道吗？

```
-------------------------
|.esc                   |
|    ----------------   |
|   |  #media       |   |
|   | -----  ---    |   |
|   | |   | |   |   |   |
|   | |   | |   |   |   |
|   | |   | -----   |   |
|   | |   |    *    |   |
|   | |   |         |   |
|   | -----         |   |
|    ----------------   |
------------------------- 
```

* 这里应该是 cursor:default; 但它是-moz-zoom-out

这是一个 jsfiddle：http: [//jsfiddle.net/mmbFu/](http://jsfiddle.net/mmbFu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:21:49.527

好的，检查一下，查看您的代码并查找这些行：

```
 <a href="/random.php?media=media" style="color:#91BD09">RANDOM</a>
            </div>
         </div>
      </div> 
```

它非常接近底部，最后一个div？那是您的#media 的结束标签。现在这样做：

```
 <a href="/random.php?media=media" style="color:#91BD09">RANDOM</a>
            </div>
         </div>
      </div>
<div style="clear:both"></div> 
```

插入那个div，它总是会按照页面的正常流程清除其他元素。希望对你有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:35:48.130

也许`#media`比它的内容小（给它一个可见的背景来验证）。如果给出内容`float:left`或`float:right`

有几种方法可以使容器扩展到其内容：

*   在末尾添加一个不可见的元素`#media`并给它`float:none; clear:both`。
*   将容器设置为(或)`overflow`以外的位置。`visible``hidden``auto`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:35:11.993

您是否检查过您的 div#media 与里面的两个块具有相同的高度/宽度？所以 div 覆盖了整个区域，可能必须添加 float:left 以使其继承子对象的大小。

正如@George所说，使用jsfiddle修复会更容易。

# c# - 选择多个项目的组合框

> ID：13177989
> 
> 赞同：-3
> 
> 时间：2012-11-01T13:20:24.913
> 
> 标签：c#, wpf, combobox

有人可以解释这种行为吗？

![在此处输入图像描述](../Images/1655aab401b45773d641c6544f120fea.png)

* * *

不仅`MouseOver`突出显示多个项目（不打算），而且当我`Select`项目时（鼠标悬停）代码转到 Selection_Changed 事件，该事件会更改其右侧的图片（按预期）但在加载图片时，出现错误出现消息，指出路径中有无效字符。

* * *

```
BD.Shape xShape = new BD.Shape();
comboBoxShapes.ItemsSource = xShape.GetListOfShapes(); 
```

* * *

```
 public List<String> GetListOfShapes()
    {
        List<String> iList = new List<String>();
        try
        {
            GetConnectionString iGet = new GetConnectionString();
            System.Data.OleDb.OleDbConnection iConnect = new System.Data.OleDb.OleDbConnection();
            iConnect.ConnectionString = iGet.ConnectionString();
            iConnect.Open();
            System.Data.OleDb.OleDbCommand iCommand = new System.Data.OleDb.OleDbCommand();
            iCommand.Connection = iConnect;
            iCommand.CommandText = "Select ShapeName from Shapes ";
            System.Data.OleDb.OleDbDataReader iRead = iCommand.ExecuteReader();
            while (iRead.Read())
            {
                Shape iShape = new Shape();
                iShape.ShapeName = iRead["ShapeName"].ToString();
                iList.Add(iShape.ShapeName);
            }

        }
        catch
        {
            MessageBox.Show("Someone better call batman or something `\\(^_^)_/`");
        }
        return iList;
    } 
```

![在此处输入图像描述](../Images/ae8ecee8948e917952a5c1202d0af886.png)

* * *

请注意，如果我选择任何其他带有破折号`-`的东西，它只会选择一个项目。没有隐藏/无效字符....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:38:05.690

您确定数据中没有换行符吗？

调试该列表中的项目计数。

```
 string same = "same" + Environment.NewLine + "next Line";
 List<string> lstring = new List<string> { "one", "two - a", "two - b", "three", "three", same, same };
 cb1.ItemsSource = lstring; 
```

这具有您描述的选择行为。

# c# - DateTime.ParseExact - 无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部

> ID：13177990
> 
> 赞同：0
> 
> 时间：2012-11-01T13:20:28.717
> 
> 标签：c#, datetime

我正在使用此代码来解析我的日期：

DateTime.ParseExact(someElement.Attribute("date").Value, "ddd MMM dd HH:mm:ss CEST yyyy", CultureInfo.InvariantCulture);

“日期”属性等于：Fri Nov 02 16:30:00 CET 2012

但我仍然得到这个错误，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:21:51.693

你有`CEST`你的格式字符串，但`CST`在你的实际日期属性中。

# matlab - Matlab 子图轴

> ID：13177993
> 
> 赞同：1
> 
> 时间：2012-11-01T13:20:45.433
> 
> 标签：matlab

我对 9 个情节的轴发生的事情有一点问题，这些情节被子绘制在一起。我`subplot(3,3,x)`用来制作一个由 9 个图组成的 3x3 网格，并使用自定义标记轴的刻度

```
set(gca, 'XTickLabel', {'0,0','0,1','0,2','1,0','1,1','1,2','2,0','2,1','2,2'});
set(gca, 'YTickLabel', {'0,0','0,1','0,2','1,0','1,1','1,2','2,0','2,1','2,2'}); 
```

问题是，并非所有指定的刻度都出现在子图上——只有大约一半，而且它们出现在错误的地方。

我猜这是 matlab 认为没有足够的空间来放置所有的刻度和标签并因此显示一个压缩的子集，但如果它只是这样做看起来会很好。我如何让它全部显示出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:16:41.453

您可以设置图形轴的“Xtick”和“Ytick”属性。它们定义了哪些刻度是可见的。在您的情况下，您想显示前 9 个 xticks 和前 9 个 yticks - 以下命令将执行此操作：

```
set(gca,'Xtick',1:9, 'Ytick',1:9) 
```

如果您想显示每第二个刻度，您将使用：

```
set(gca,'Xtick',1:2:9,'Ytick',1:2:9) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:38:42.717

您使用这些命令设置自定义刻度标签，它们会显示当时刻度的位置。你可以看到刻度是什么

```
get(gca,'YTick'); 
```

例如：

```
plot(-2:2)
get(gca,'YTick'); 
```

返回`[-2 -1.5 -1 -0.5 0 0.5 1 1.5 2]`。如果你现在使用

```
set(gca,'yticklabel',{'a','b','c','d','e'}) 
```

然后这些字母将出现在所有刻度上，从第一个 ( `-2`) 开始，并且由于刻度比刻度标签多，刻度标签将重复，如您所见： ![在此处输入图像描述](../Images/5d29eb598a355938a669e8caaf1d0db9.png)

所以这些是刻度，但也许你只想使用标签，我添加了以下内容：

```
ylabel('this is the ylabel');
xlabel('and this the xlabel'); 
```

![在此处输入图像描述](../Images/2dcd526896facaaea43cb8cdbe479e3b.png)

玩弄它并了解发生了什么，这并不难；）

PS：使用 subplot，您可以创建不同的轴并分别为每个轴对象设置不同的刻度。默认情况下，轴*没有*链接或其他东西，而是完全独立的！当您使用`gca`时，它返回*当前*轴，即带有子图：最后一个创建或选择的轴`subplot(3,3,x)`！

因此，如果您想设置刻度，标签是所有轴上的任何其他内容，您必须分别为所有轴设置，即：

```
subplot(3,3,1);
  xlabel('x');
  ylabel('y');
  title('subplot (1,1)');
  set(gca,'xticklabel',{'a','b','c'});
subplot(3,3,2);
  xlabel('x');
  ylabel('y');
  title('subplot (1,2)');
subplot(3,3,1);
  xlabel('x');
  ylabel('y');
  title('subplot (1,1)');
etc. 
```

![在此处输入图像描述](../Images/2be82587b4e455b7dcda0527d9dedef9.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:23:39.547

这是空间的问题。如果您增加绘图窗口的大小，Matlab 将显示更多的刻度，反之亦然。您还可以减小字体大小以适应轴上的更多刻度（尝试使用`set(gca,'FontSize',5)`或任何其他字体大小值）。

# java - 带有 actionperformed actionlistner 的文本字段

> ID：13177996
> 
> 赞同：0
> 
> 时间：2012-11-01T13:20:53.097
> 
> 标签：java, swing, jdbc, jlabel, jtextfield

我有一个 jTextField 和一个 jLabel。我想在用户完成输入后自动将数据从数据库获取到我的标签。

```
subcode_txt.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            Object obj=e.getSource();
            if(obj==subcode_txt){
            jst=subcode_txt.getText();
            try{

            rs=st.executeQuery("Select * from facultydtls where sub_code like '"+jst+"'");
            rs.next();
            faculty_lab.setText(rs.getString("f_name"));
            sem_lab.setText(rs.getString("sem"));
            subject_lab.setText(rs.getString("sub"));
            department_lab.setText(rs.getString("dept"));

            rs.close();

        }
        catch(Exception ewt){
            JOptionPane.showMessageDialog(null,"Invalid Subject Code");
        }
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:38:00.913

1.  如果您想对用户输入做出反应，a`DocumentListener`是比 a 更好的方法`KeyListener`
2.  您可以选择一个`ActionListener`，当用户点击时触发`ENTER`
3.  您不应在事件调度线程上执行数据库查询。请改用工作线程。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
4.  该`close`语句应放在一个`finally`块中

话虽这么说，你到底在问什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:47:18.047

使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)`JTextComponents`是在 Swing中处理文本事件的首选方法。

数据库查询需要大量资源，并且应该在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)之外完成，以防止 UI “冻结”。看看`SwingWorker`在这个[例子](https://stackoverflow.com/questions/9564266/how-to-stop-a-swingworker)中使用。

请注意，为每个加载数据`DocumentEvent`可能会向数据库发送大量不必要的请求。有两种可能的解决方案：

*   使用[Ehcache](http://ehcache.org/)等框架进行数据缓存- 以最佳方式加载数据。
*   虽然与您的要求有些不同，但您可以在用户提供`JButton`完整数据时使用负载来加载数据`String`。

**更新：**

**在短期内：**

在查询中添加 SQL 通配符以匹配部分字符串：

```
st.executeQuery("Select * from facultydtls where sub_code like '%" + jst + "%'"); 
```

**在长期：**

使用`PreparedStatement`. 它有以下好处：

*   防止 SQL 注入攻击，特别是考虑到用户可以输入作为 SQL 查询一部分的字符串。
*   `PreparedStatement`占位符字符将采用任何必需的字符串引号。

# awk - 如何替换空格零？

> ID：13177997
> 
> 赞同：1
> 
> 时间：2012-11-01T13:20:55.823
> 
> 标签：awk, gsub

我有一个文件：

```
 nr  kl1  kl2  kl3  kl4 
 d1  15   58   63   58 
 d2       3    3      
 d3  3         8    0 
```

我想打印：

```
 nr  kl1  kl2  kl3  kl4 
 d1  15   58   63   58 
 d2  0    3    3    0  
 d3  3    0    8    0 
```

我尝试了 gsub 解决方案，但它不起作用。

```
awk '{gsub(/ /, 0, $2); print }' file 
```

感谢您的帮助。

**编辑：**

**Ed Morton**解决方案适用于 gawk，但不适用于 mawk。

```
$ gawk 'BEGIN{ FIELDWIDTHS="5 5 5 5 5"; OFS="" }NR>1 {for (i=2;i<=NF;i++)$i=sprintf("%-5d",$i)}{ sub(/ +$/,""); print }' file
 nr  kl1  kl2  kl3  kl4
 d1  15   58   63   58
 d2  0    3    3    0
 d3  3    0    8    0 
```

.

```
$ mawk 'BEGIN{ FIELDWIDTHS="5 5 5 5 5"; OFS="" }NR>1 {for (i=2;i<=NF;i++)$i=sprintf("%-5d",$i)}{ sub(/ +$/,""); print }' file 
 nr  kl1  kl2  kl3  kl4
d115   58   63   58
d23    3
d33    8    0 
```

如何做同样的事情，但mawk？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:42:45.993

您尝试的方法无效，因为您的字段没有用空格分隔，它们是固定宽度。用 GNU awk 试试这个：

```
BEGIN{ FIELDWIDTHS="5 5 5 5 5"; OFS="" }

NR>1 {
   for (i=2;i<=NF;i++)
      $i=sprintf("%-5d",$i)
}
{ sub(/ +$/,""); print } 
```

# php - jQuery jEditables 在选项卡上提交

> ID：13177999
> 
> 赞同：1
> 
> 时间：2012-11-01T13:21:05.237
> 
> 标签：php, jquery, jeditable

我正在使用 jQuery 和可编辑插件创建一个内联可编辑表。

到目前为止它运行良好，但只会在按 ENTER 后提交并保存到数据库。我在这里找到了一个线程，它帮助我在框之间切换，但在按下 TAB 时它不提交数据。

我允许我在框之间切换的代码如下：

```
$('.editScheduleRow').bind('keydown', function(evt) {

    if (evt.keyCode==9) {

        var nextBox='';
        var currentBoxIndex=$(".editScheduleRow").index(this);

        if (currentBoxIndex == ($(".editScheduleRow").length-1)) {
            nextBox=$(".editScheduleRow:first");         //last box, go to first
        } else {
            nextBox=$(".editScheduleRow").eq(currentBoxIndex+1);    //Next box in line
        }

        $(this).find("input").blur();
        $(nextBox).click();  //Go to assigned next box

        return false;           //Suppress normal tab

    };

}); 
```

要使用 ENTER 提交，我使用以下命令：

```
$(".editScheduleRow").editable("../../includes/ajax/save-schedule-row.php", {

    "submitdata": function ( value, settings ) {
        return { fieldname: this.getAttribute('fieldname'), rowID: this.getAttribute('id') };

    },

}); 
```

我还发现了一个带有建议的线程，但它对我不起作用：[jEditable submit on TAB 以及 ENTER](https://stackoverflow.com/questions/7852016/jeditable-submit-on-tab-as-well-as-enter)

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:47:49.643

我最初的答案是基于阅读 jQuery Editable 的文档，这是一个 jQuery 扩展，名称相似，但与问题中的 jEditable 不同。让我们用正确的库再试一次。

问题是您在按 Tab 时将焦点从输入框移开，但是当焦点从输入框移开时，它不会保存内容。为了说明这一点，请尝试以下操作：单击其中一个字段并对其进行编辑，然后单击文档上的其他位置。您将在表中看到该值 - 这就是您在元素上使用`blur()`jQuery 函数模拟的内容。

（再次）有两种方法可以解决这个问题。首先，我们可以修改程序在字段失去焦点时的行为：

```
 [..]
    "submitdata": function ( value, settings ) {
        return { fieldname: this.getAttribute('fieldname'), rowID: this.getAttribute('id') 
    };
    "onblur": "submit";
},
[..] 
```

这样做的效果是，在进行我上面描述的实验以帮助您了解它为什么不起作用时，您现在还会看到它被保存了。这可能不是你想要的。在这种情况下，您可以改为确保触发提交而不是模糊：

替换这一行：

```
 $(this).find("input").blur(); 
```

通过这个：

```
 $(this).find("form").submit(); 
```

现在实验将不再导致值发生变化，但它不再是对我们正在做的事情的准确模拟，当按下 Tab 时，值将被更改。