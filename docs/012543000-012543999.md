# StackOverflow 问答 12543000-12543999

# mysql - MySQL主键

> ID：12543004
> 
> 赞同：1
> 
> 时间：2012-09-22T10:36:30.340
> 
> 标签：mysql

```
 CREATE TABLE branch_book_list (
       branch_name CHAR(10),
       book_ISBN CHAR (13),
       book_name CHAR(40),
       PRIMARY KEY (branch_name, book_ISBN)
   ) 
```

一些博客说关系中只能有一个主键，但是当我执行这个 MySQL 时会创建表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:41:29.650

一个主键可以包含多个列。那时它仍然是一把钥匙。

不过，将主键设为单列数字/自动值是一个很好的做法，也称为*代理键*。对于 Branch_name 和 ISBN 的实际唯一组合，您可以使用*唯一索引*就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:55:36.067

您的版本中有一个复合主键，有些人会告诉您避免这种情况，但您真正的问题是规范化。

例如，在您的设计中，每个分支只能拥有一本书的副本。书名将重复。对于分支地址，书籍作者等，那里没有任何意义......

规范化您的表格

它应该是具有唯一键 ISBN 的书籍（您也可以将其设为主要，但这可能会导致问题）

具有某些标识符的分支，例如 BranchID

Stock BookID，BranchID，数量？

如果这是一个图书馆，那么通常每本书都有一个注册号，所以你可以颠倒一些东西

并转到由注册号、BranchID 和 BookId (ISBN) 键入的 Stocks，然后去掉复合键。

摆脱这一点的关键是想象你在纸上做所有这些，你是否愿意为每个分支浏览整个股票清单，重命名一本书，或者将作者添加到每个分支。应该不是吧？编写代码来做一些低效的事情，工作量更少，但没有更多乐趣。

# asp.net - 无法在工作目录中的子文件夹中加载图像 - 谷歌地图标记图标

> ID：12543005
> 
> 赞同：0
> 
> 时间：2012-09-22T10:36:32.457
> 
> 标签：asp.net, google-maps-api-3, path, google-maps-markers

一个简单的问题，但无法找到解决方案。

我有一些图像文件放在我的 ASP.NET 网站的工作目录中的一个名为**图标的子文件夹中。**我想在初始化期间为我的谷歌地图上的标记设置一个图像。但这行不通。我试过了-

```
var marker= new google.maps.Marker({icon:'E:\cdeez\Sites\googletest 5\icons\busballon.png', position:pos,map:map}); 
```

它给出了一个错误：

> 不允许加载本地资源：file:///E:/​​cdeezSitesgoogletest%205icons%08usballon.png

但是，如果我将图像放在工作目录中，则没有问题。我想给出绝对路径也不是正确的方法。那么在上述情况下正确的方法是什么。（只是提醒一下 - 上面的代码将在**aspx**文件中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:04:55.500

根据[MarkerOptions 文档](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)，图标应该是一个 URL。但是，如果网站是通过 http 提供的，浏览器往往会忽略本地文件（嵌入`file:///`） - 我认为这就是您的情况。

我建议尝试以下步骤：

*   尝试使用相对路径，例如`icon: "/icons/busballon.png"`
*   尝试使用文件的 http 路径，例如`icon: "http://yoursite.com/icons/busballon.png"`

# google-maps - 为什么 iwloc=near 隐藏整个谷歌地图而不是突出地址气泡？

> ID：12543007
> 
> 赞同：0
> 
> 时间：2012-09-22T10:36:49.097
> 
> 标签：google-maps, hide, embed

当我在我的 Google 地图嵌入代码中将“iwloc=A”属性更改为“iwloc=near”（以删除地址气泡）时，整个地图就会消失！其他人经历过这种情况或可能知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T11:55:12.833

最近也遇到了这个问题。试试`iwloc=addr`。

# jquery - IE9 和lake.js

> ID：12543012
> 
> 赞同：0
> 
> 时间：2012-09-22T10:37:20.400
> 
> 标签：jquery, internet-explorer-9

我在页面上使用[lake.js jquery 插件](http://alligator.github.com/lake.js/)，为了使其正常工作/看起来正确，您必须使用 display:none;

在 IE9 上，任何触发并使图像在脚本中可见的东西都不起作用。它使它不可见。在其他一切上它都可以正常工作。

我想知道这里是否有人可能知道这背后的答案或原因，因为作者尚未在 github 上回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:17:17.033

试试这个

```
 style="display: inline-block;visibility:hidden;"/> 
```

[http://www.hoekern.com/lake/index.php](http://www.hoekern.com/lake/index.php)

至少在ie9中工作；

# iphone - 我在下面附加了一个 JSON 文件，我想在控制台中打印它，目前我使用的是 xcode 4.4

> ID：12543013
> 
> 赞同：-5
> 
> 时间：2012-09-22T10:37:22.007
> 
> 标签：iphone, objective-c, json

```
companies:[
{
  "name":"APPLE",
  "id":"1",
  Departments:[
  {
     "name":"Designing",
     "id":"1.1",
     Employees:[
     {
     "name":"Ramesh",
     "id":"1.1.1",
     "salary":"4lakhs"
     },
     {
     "name":"Suresh",
     "id":"1.1.2",
     "salary":"4lakhs"
     },
      {
     "name":"Mukesh",
     "id":"1.1.3",
     "salary":"4lakhs"
     }
     ]
     },

     {
     "name":"Developing",
     "id":"1.2",
     Employees:[
     {
     "name":"Ram",
     "id":"1.2.1",
     "salary":"4lakhs"
     },
     {
     "name":"Sam",
     "id":"1.2.2",
     "salary":"4lakhs"
     },
      {
     "name":"Dham",
     "id":"1.2.3",
     "salary":"4lakhs"
     }
     ]
     },

     {
     "name":"Testing",
     "id":"1.3",
     Employees:[
     {
     "name":"Rocky",
     "id":"1.3.1",
     "salary":"4lakhs"
     },
     {
     "name":"Jockey",
     "id":"1.3.2",
     "salary":"4lakhs"
     },
      {
     "name":"Sockey",
     "id":"1.3.3",
     "salary":"4lakhs"
     }
     ]
     }
     ]
     },

{
  "name":"GOOGLE",
  "id":"2",
  Departments:[
  {
     "name":"Designing",
     "id":"2.1",
     Employees:[
     {
     "name":"Ramesh",
     "id":"2.1.1",
     "salary":"4lakhs"
     },
     {
     "name":"Suresh",
     "id":"2.1.2",
     "salary":"4lakhs"
     },
      {
     "name":"Mukesh",
     "id":"2.1.3",
     "salary":"4lakhs"
     }
     ]
     },

     {
     "name":"Developing",
     "id":"2.2",
     Employees:[
     {
     "name":"Ram",
     "id":"2.2.1",
     "salary":"4lakhs"
     },
     {
     "name":"Sam",
     "id":"2.2.2",
     "salary":"4lakhs"
     },
      {
     "name":"Dham",
     "id":"2.2.3",
     "salary":"4lakhs"
     }
     ]
     },

     {
     "name":"Testing",
     "id":"2.3",
     Employees:[
     {
     "name":"Rocky",
     "id":"2.3.1",
     "salary":"4lakhs"
     },
     {
     "name":"Jockey",
     "id":"2.3.2",
     "salary":"4lakhs"
     },
      {
     "name":"Sockey",
     "id":"2.3.3",
     "salary":"4lakhs"
     }
     ]
     }
     ]
     }
     ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:48:55.960

假设您有一个捆绑文件（因为从问题中不清楚），您可以使用以下代码读取该文件：

```
NSString * path = [[NSBundle mainBundle] pathForResource:@"YOU_FILE_NAME" ofType:@"txt"];

NSString *jsonString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil]; 
```

然后使用以下命令将其打印到控制台：

```
NSLog(@"%@",jsonString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:49:22.800

使用[SBJson](https://github.com/stig/json-framework)解析然后 NSLog 它

```
 NSString *replycode=[jsonResponse objectForKey:@"replyCode"];
        NSLog(@"Reply = %@",replycode); 
```

# .net - 重构解决方案以使用 Entity Framework 4.3（代码优先）

> ID：12543015
> 
> 赞同：0
> 
> 时间：2012-09-22T10:37:43.430
> 
> 标签：.net, entity-framework, refactoring, ef-code-first

我想对这个问题提出一些建议：我们有一个使用经典`ADO.NET`数据访问的解决方案（它已经有 4 年以上的历史了）。数据访问体系结构已经建立在`.NET 2.0.` 我们的数据类是简单的类，例如，`FooDataBaseObject`（名称实际上并不重要），它具有 CRUD 操作的默认实现。我们的属性标有自定义属性（保存必要的数据，例如表中相应列的名称等）。数据类也是如此（自定义属性用于指定表名等）。

* * *

实体之间的关系在特殊的 .xsd 和 .xml 文件中指定。表本身很少有外键和其他典型约束（我们实际上继承了这个表，客户禁止我们修改它们，因为它们仍然使用导入和导出引擎）。但我确信我能够说服人们重构数据库。

* * *

问题在于现有服务。有没有办法引入 EF 仍然可以使用旧的 ado.net 服务？我目前正在考虑使用**EF Code First**方法的想法，因为我不需要生成我的实体或继承某些特定的类等，而不是我将能够（我希望）`DbContext`为它们构造一个并映射到现有的数据库。此外，可能还有一种方法可以为我们的旧数据类创建*镜像*类。说`Customer`-> `CustomerEntity`。`CustomerEntity`将镜像 the 的所有必要属性，`Customer`然后在`DbContext`and中使用`DbSet`，这样我们就可以`CustomerEntity`在新服务中使用，也可以`Customer`在旧服务中使用。

我想听听这种方法的潜在瓶颈以及这种可能性的可能性（这真的是真的吗？）或者其他一些建议等。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:34:08.613

如果表没有外键关系，使用 EF 会遇到很多问题。EF 通常会依赖这些关系来在代码中创建关系。

当然，您可以将它们视为单独的表 -> 单独的对象并手动处理所有键。

您不太可能在不修改的情况下将类映射到旧代码，因为旧代码似乎依赖于它自己的辅助方法以及提交或回滚数据的方式。在不了解现有对象模型的情况下，很难说。

我要做的是创建一个 EF 模型，然后在升级应用程序时开始逐步使用它。只要您现有的代码孤立地处理事物，并且整个代码没有太多的依赖关系。

# mysql - MySQL 嵌套事务 - 不回滚

> ID：12543018
> 
> 赞同：3
> 
> 时间：2012-09-22T10:38:04.063
> 
> 标签：mysql, transactions, rollback

> **可能重复：**
> [MySQL 中是否允许嵌套事务？](https://stackoverflow.com/questions/1306869/are-nested-transactions-allowed-in-mysql)

我有一个使用事务的存储过程，并且在事务内部调用另一个也使用事务并更新表的过程。第二个过程在循环内调用，每次调用都会更新一行。第二个过程还创建一个临时表。引擎是用于永久表的 InnoDB 和用于临时表的 MyISAM。MySQL 版本是 5.5.16。

如果发生错误，我想要回滚第二个过程所做的所有更新。

这可能吗 ？我知道一个 DDL 语句并开始事务；将发出提交，但有办法解决吗？

代码看起来像这样：（回滚显然不起作用）

```
delimiter $$
drop procedure if exists `proc1`$$
create procedure `proc1`( 
  ...#some variables
) 
modifies sql data

begin
    declare error int default 0;
    declare continue handler for sqlexception
    begin 
        set error=1;
    end;

     drop temporary table if exists table1;
     create temporary table table1 (

         id int unsigned, 
         col1 decimal(12,6) default 0, 
         col2 decimal (12,6) default 0, 
         col3 decimal (12,6),

         primary key (id)) engine=MyISAM;

     START TRANSACTION;
        begin
           declare id_1 int unsigned;
           declare v1 decimal(12,6) default 0;
           declare v2 decimal(12,6) default 0;
           declare v3 decimal(12,6) default 0;

           declare done int default 0;

          declare cur cursor for select id, col1, col2 from table1;
          declare continue handler for not found set done=1;

          begin
              open cur; 
              wh: while done=0 do
                  fetch cur into id, v1, v2;
                   if done=1 then
                          leave wh;
                   end if;

                   set v3=v1+v2 ;                                      
                   update table1 set col3=v3 where id =id_1;

                   CALL  proc2(id_1, v1, v2, v3);

                   end while wh;
                   close cur;
                   set done=0;
                 end;

            end;
           if error=0 then
                  commit;
                  set status=1;

            else 
                  rollback;
                 set status=-1;
            end if;

end$$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T11:03:17.660

您一次只能打开一项交易。在已经存在事务时尝试启动新事务会导致现有事务被提交。[但是，您可以使用savepoints](http://dev.mysql.com/doc/refman/5.5/en/savepoint.html)模拟嵌套事务。

# ruby-on-rails - Rails：重构 HTML 生成辅助方法以使用部分 - 如何在那里使用块？

> ID：12543025
> 
> 赞同：0
> 
> 时间：2012-09-22T10:39:01.897
> 
> 标签：ruby-on-rails, views, helpers

在我之前的问题[开发生成 HTML 的辅助函数之后：我应该使用嵌套的 content_tag()s 还是 partials？](https://stackoverflow.com/questions/12530692/developing-helper-functions-that-generate-html-should-i-rather-use-nested-conte/12530753#12530753)我现在确信重写我的一些更复杂的 HTML 生成辅助函数以使用模板而不是嵌套`content_tag()`调用。

所以这是我原来的助手：

```
def bootstrap_navlist(&block)
  classes = ['nav', 'nav-list']

  content_tag(:ul, class: classes.join(' ')) do
    capture(self, &block)
  end
end 
```

这就是我现在想出的使用部分：

```
def bootstrap_navlist(&block)
  render partial: 'bootstrap/navlist'
end

# views/bootstrap/_navlist.html.erb
<ul class="<%= ['nav', 'nav-list'].join(' ') %>">
  How do I output the block here??
</ul> 
```

该块看起来像这样，但它可以是您喜欢的任何 HTML：

```
= bootstrap_navlist do |navlist|
  = navlist.item 'Home', '#'
  = navlist.sublist 'Meine Favoriten', '/favorites' do |sublist| 
```

你可以猜到，我不确定如何在视图中输出块。我应该简单地在帮助程序中捕获它并将其作为`:local`变量传递吗？还是有更常见的方法？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:06:15.303

这是内容标签没有深度嵌套的情况，作为助手是合理的。

你的助手和部分看起来像这样：

```
def bootstrap_navlist(&block)
  render template: 'bootstrap/navlist', :locals => { :block => block }
end

<ul class="nav nav-list">
  <%= capture(self, &block) %>
</ul> 
```

# javascript - HTML 页面加载时间过长，页面变得无响应

> ID：12543026
> 
> 赞同：0
> 
> 时间：2012-09-22T10:39:05.397
> 
> 标签：javascript, html, jsp

我的网页加载时间过长。原因是该页面有一个包含大约 3000 列的 HTML 表，并且每列中都有一个文本框。有没有办法让我可以减少加载时间或建议是否有其他选择。

提前致谢

编辑 - 好的，让我告诉你确切的情况，我的表格需要显示日期数据，而日期（如 2012 年 12 月 14 日）将是列标题本身。最新日期将是第一列，然后会出现过去的日期，例如 (14-Dec-2012|13-Dec-2012|12-Dec-2012 .....) 每天系统日期更改时将添加一个新列作为第一列。大约有200行。它是一个 JSP 页面，在 for 循环中我首先创建表头，然后在第二个 for 循环中创建包含文本框中值的表格单元格（以便用户可以随时编辑它们）。

代码示例 - 标题 -

```
<%
    Date today = new Date();
    String col = "";
    today = RDUtils.addDays(today, 1);
for(int i=0;i<=columnCount;i++){
    today = RDUtils.addDays(today, -1);
    col = RDUtils.getStringDateCol(today);
%>
<th class="TableHeader"><div><%=col%></div></th>
<%} %> 
```

表格单元格 -

```
for(int j=0;j<=columnCount;j++){%>
    <input maxlength="5" onblur="fillZero(this);" onFocus='clearField(this);' onkeypress="if (checkEnter())return false;" onkeyup='if (checkEnter()) move("<%=i %>");' size="5" type="text" name="txtEntry<%=de.getId()%>" value="<%=val%>" id="<%=de.getId()%>"/></div> </td> 
```

JS 函数 -

```
function checkEnter(e){
    characterCode = e.keyCode;
    return characterCode == 13;
}
function fillZero(obj){
if(obj.value==''){
    obj.value = 0;
}
 }
 function clearField(obj){
var perfix = obj.name.substring(8, obj.name.length);
var chkObj = document.getElementById('deCheck'+perfix);
if(!chkObj.checked)chkObj.checked=true;
if(obj.value==0){
    obj.value = '';
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:47:42.810

### 最好使用[Datatables](http://www.datatables.net/)使用分页。

并使用 AJAX 方法。

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "sAjaxSource": '../ajax/sources/arrays.txt'
    } );
} ); 
```

# datetime - 如何在 xPages 中制作服务器端世界时钟

> ID：12543035
> 
> 赞同：0
> 
> 时间：2012-09-22T10:40:32.537
> 
> 标签：datetime, timezone, xpages, serverside-javascript

我想向用户显示不同城市/时区的时间，如下所示：

伦敦 2012-02-01 11:30:00 GMT (0)

纽约 2012-02-01 06:30:00 GMT (-6)

斯德哥尔摩 2012-02-01 12:30:00 GMT (+1)

我需要它在 ssjs 中并且是通用的，这样服务器所在的时区就无关紧要了。

我一直在玩下面的代码行，但无法让它工作

```
var dt:NotesDateTime = session.createDateTime("Today");
dt.setNow()

//dt.convertToZone(-6,true)
//return dt.getGMTTime()
//return dt.getZoneTime() 
```

GMT 可以，但用户时区也可以，如 GMT、UTC 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:35:33.367

在这种情况下，我会远离 NotesDateTime 对象，而使用 Java Date 对象。您可以执行以下操作：

```
var d:java.util.Date = new java.util.Date();

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");

print(dateFormat.format(d));

dateFormat.setTimeZone(TimeZone.getTimeZone("Europe/London"));
print(dateFormat.format(d));

dateFormat.setTimeZone(TimeZone.getTimeZone("America/New_York"));
print(dateFormat.format(d)); 
```

请记住，更改 Java Date 的时区不会更改日期本身，它只会更改日期的显示方式。

# c++ - 将边数限制为随机生成图中的一个顶点

> ID：12543045
> 
> 赞同：1
> 
> 时间：2012-09-22T10:42:34.217
> 
> 标签：c++, boost, graph, boost-graph

我使用 Boost 图形库生成了一个随机无向图。

我随机添加顶点和边的数量如下：

```
RNGType rng( time(0) );
    boost::uniform_int<> one_to_four( 1, (N-1) );
    boost::variate_generator< RNGType, boost::uniform_int<> >gen(rng, one_to_four);
    for(int i =0; i<(N-1); i++)
    {
        int k = 0;
        while(k<4)
        //while(k<(N/2))
        {  
            int n  = gen();
            // Adding edges onto graph

            if(!boost::edge(i, n, g).second && !boost::edge(n, i, g).second)    
                {
                if(i !=n )
                {       
                add_edge(i, n, g);
                k++;
                }
                }
        }
    } 
```

可以看出，我将边数限制为 4，`while(k<4)`但它仅适用于传入边。我想将传入和传出边都限制为 4。例如，如果我输入顶点数为 10，我得到：

```
graph G{
0;
1;
2;
3;
4;
5;
6;
7;
8;
9;
0--1 ;
0--2 ;
0--2 ;
0--2 ;
1--3 ;
2--1 ;
2--4 ;
3--2 ;
3--2 ;
3--4 ;
3--0 ;
4--1 ;
4--9 ;
4--8 ;
5--
and so on..
} 
```

可以看出，已经有 4 个来自 0 的出边，并且有一个来自 (3,0) 的入边，因此离开和进入顶点 0 的边数变为 5，我想将其限制为 4 或者可能少于但不超过 4 个。

任何帮助将非常感激。

提前非常感谢。

干杯！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:07:25.147

您可以使用 和 请求节点的传入和传出边`in_degree`数`out_degree`。

如果您初始化`k`为`in_degree(i, g) + out_degree(i, g)`0 而不是 0，您将确保您将考虑已为节点 i 添加的边。

在添加 i 和 n 之间的边之前，您还需要检查`(in_degree(n) + out_degree(n) + 1) <= 4`。这将确保您不会向其中一个随机节点添加太多边。

# wpf - 如何将两个 ObservableCollection(s) 绑定到一个 ListBox？

> ID：12543046
> 
> 赞同：-1
> 
> 时间：2012-09-22T10:42:34.440
> 
> 标签：wpf

有人知道如何在一个 ListBox 中绑定两个 ObservableCollections 吗？这两个 ObservableCollections 都有一个要显示在 ListBox 中的属性字符串“名称”， ![在此处输入图像描述](../Images/c71e5bee6be573b52a42edcd7ae15810.png)

在 ListBox 顶部区域，将显示 ObservableCollection1 项，而在 ListBox 底部区域我想显示 ObservableCollection2 项，怎么做？

```
<ListBox x:Name="m_CtrlMediaList" Grid.Column="2" AllowDrop="True" SelectionMode="Extended">
    <ListBox.ItemsSource>
        <CompositeCollection>
            <CollectionContainer Collection="{Binding directorys}"/>
            <CollectionContainer Collection="{Binding files}"/>
        </CompositeCollection>
    </ListBox.ItemsSource>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical">
                <TextBlock Text="{Binding name, Mode=OneWay}" FontWeight="Bold" FontSize="14"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

数据如下： class ElementFile { ... string name (get;set;} ...

```
}
 class ElementDirectory
{
...
      string name (get;set;}
 ...
    public ObservableCollection<ElementDirectory> directorys { get; set; }
    public ObservableCollection<ElementFile> files { get; set; }
...
} 
```

为什么不能显示“姓名”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:45:33.313

[复合系列](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCEQFjAA&url=http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx&ei=q5ZdUNOWFOid0AW0yYHoCg&usg=AFQjCNHpTNkM6fKqs52uihQumY8Az9yb2A)就是您要寻找的。[例子](http://zamjad.wordpress.com/2010/05/18/using-composite-collection-in-c/)。

# iphone - 通过控制器传递复杂对象（核心数据）

> ID：12543051
> 
> 赞同：1
> 
> 时间：2012-09-22T10:44:13.143
> 
> 标签：iphone, ios, core-data

我完全迷路了。

问题是通过我的向导中的视图控制器传递数据。我的项目包含 4 个视图控制器：

*   Step1ViewController，可填写名称
*   Step2ViewController，可填写昵称
*   Step3ViewController，可以填写邮箱地址，
*   Step4ViewController，可填写兴趣，完成

所有视图控制器都被推送到导航控制器。可以通过单击导航工具栏上的栏按钮进入下一步。我想要实现的是收集步骤中的所有数据并在最后一步创建保存 NSManagedobject（通过单击完成按钮）。因此，当用户在步骤 2 中退出并重新启动应用程序时，应该没有保存的对象。所以他将重新启动向导。当核心数据中有一个人对象时，会加载另一个视图（这是委托类中的一个条件）

我知道当你有一个简单的模型模式时，可以使用 prepareForSegue 方法轻松地将数据传递给控制器​​。收集所有变量并创建和保存核心数据对象。为了将数据传递回上一步，我可以使用协议。

但是在我的应用程序中，我的模型模式要复杂得多。我的向导包含大约 18 个步骤，并且 Person 模型有很多相关模型（如培训计划、兴趣等），所以我认为在变量中收集所有数据并在最后一步将它们全部组合起来确实不是一个好方法。

做这个的最好方式是什么？

我上传了一个向导示例应用程序，其中包含几个步骤和 2 个模型（人员和兴趣（one-2-many））。希望这会让它更清楚。随意修改代码：[https ://github.com/stalkert/WizardPrototype](https://github.com/stalkert/WizardPrototype)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:18:57.613

我想到了两个想法——每个都有自己的优点和缺点。两者都使用可变字典的概念，该字典将保存您最终需要的所有各种数据。此外，您将添加一个带有 NSNumber 对象的 key='step'。

1）假设所有视图控制器最初都不存在，他首先控制器创建字典，添加它应该提供给它的数据，并将“步骤”设置为两个。然后它创建并运行一个新的 viewController，在一个属性中将字典传递给它。第二个验证步骤是否正确，添加应该的内容，然后将其传递给另一个控制器。这里的“步骤”作为一个测试，实际上字典处于它应该处于的阶段。

2）假设视图控制器已经实例化，然后使用与上面相同的“步骤”概念，但使用通知。第一步完成后，将字典存储在默认值、类或单例对象或 appDelegate 中（在属性中）。发送通知 - 并添加一个 userInfo，它是完整的字典或提供下一步的数字。应该执行步骤 3 的控制器可以看到轮到它，因此它应该变为活动状态（自动切换 UITabBarController 选项卡等）。

在任何一种情况下，当最后一步完成时，将字典发送到管理存储库的类或直接执行。

# git - 如何在没有历史记录的情况下推送新分支

> ID：12543055
> 
> 赞同：125
> 
> 时间：2012-09-22T10:45:05.170
> 
> 标签：git

我有两个不相关的分支，master 和 configs 的 git repo。我已经创建了配置，清除了所有文件，然后只放在配置文件中。现在我想将它推送到远程仓库，但因为它是新的、空的分支（没有我所有更改的日志和原始分支的旧修订）。

我怎样才能清除所有的历史并推动它？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-09-22T11:32:02.917

清除所有文件并不会消除历史记录。您需要先创建一个没有历史记录的分支，然后添加您的配置文件。这些天`git checkout`有一个`--orphan`选项可以创建一个没有历史的分支。以下是有关该`--orphan`选项的信息：

> --orphan <新分支>
> 
> 创建一个名为 <new_branch> 的新孤立分支，从 <start_point> 开始并切换到它。在这个新分支上进行的第一次提交将没有父级，它将成为与所有其他分支和提交完全断开的新历史的根。
> 
> 索引和工作树的调整就像您之前运行过“git checkout <start_point>”一样。这允许您通过轻松运行“git commit -a”来创建一个新的历史记录，该历史记录记录一组类似于 <start_point> 的路径以进行根提交。
> 
> 当您想从提交中发布树而不暴露其完整历史时，这可能很有用。您可能希望这样做以发布一个项目的开源分支，该项目的当前树是“干净的”，但其完整历史记录包含专有或其他受累的代码位。
> 
> 如果你想开始一个断开的历史记录，记录一组与 <start_point> 完全不同的路径，那么你应该在创建孤立分支后立即通过运行“git rm -rf”清除索引和工作树。 " 从工作树的顶层开始。之后，您将准备好准备新文件、重新填充工作树、从其他地方复制它们、提取 tarball 等。

这是[checkout](http://git-scm.com/docs/git-checkout)文档的链接。你也可以跑步`git help checkout`。

一旦您创建了没有历史记录的分支，那么当您将其推送到服务器时，它也不会具有该历史记录。FWIW，它帮助我将其`git push`视为“使远程分支看起来与我的本地分支相同”。所以如果你有历史，并且推动，它就会有历史。如果你不这样做，那么推送的分支不会。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-01-22T19:53:54.367

*我怎样才能清除所有的历史并推动它？*

```
git checkout --orphan <name_you_choose_for_orphan_branch>
git commit 
```

然后你可以运行你的

```
git push <remote-name> <branch-name> 
```

* * *

参看。[这个单线](https://stackoverflow.com/a/23486788/1429450)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-03-17T16:29:00.267

我需要这样做以向自由职业者发送一些代码，而无需共享私人信息或删除我的历史记录。

如果你们中的任何人使用 SourceTree，这就是我设法做到的。如果我做错了什么或忘记了什么，请告诉我，因为我对源代码控制管理非常不熟悉。

1.  我去了源树上的终端按钮。
2.  我使用以下命令创建了一个新的“孤儿”分支：“git checkout --orphan clean-ver”，其中 clean-ver 是我的分支名称
3.  我关闭了终端，看到我的提交日志被清除了，因为我在一个新的孤立分支中。我暂存了所有源代码并提交了更改。
4.  我在存储库>添加远程或存储库>存储库设置>添加中设置了我的 bitbucket 存储库。
5.  我关闭了它，然后单击了按钮
6.  我选择了我的新“clean-ver”分支说好的。

当我检查 bitbucket 时，似乎这似乎有效并丢弃了我的提交历史记录。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-20T08:28:02.377

```
git checkout --orphan <name_you_choose_for_orphan_branch>
git rm . -r -f 
```

# php - PHPUnit - 我是否认为我不能使用模拟来测试依赖注入容器？

> ID：12543057
> 
> 赞同：3
> 
> 时间：2012-09-22T10:45:30.787
> 
> 标签：php, mocking, tdd, phpunit

我正在对依赖注入容器进行单元测试。

在最基本的层面上，我正在测试对象图的创建是否正确。这使用了加载到 DIC 中的反射和规则的混合。

DIC 使用类定义工作，并且由于模拟的无依赖性，我认为它们不适合这项任务是否正确？

在不使用模拟的情况下，这是我的一个测试的外观：

```
public function testObjectGraphCreation() {
    $a = $this->dic->create('A');
    $this->assertInstanceOf('B', $a->b);
    $this->assertInstanceOf('C', $a->b->c);
    $this->assertInstanceOf('D', $a->b->c->d);
    $this->assertInstanceOf('E', $a->b->c->e);
    $this->assertInstanceOf('F', $a->b->c->e->f);
} 
```

（显然，这种链接和公共依赖项仅用于测试）

我已经定义了几个类来完成这项工作：

```
class A {
    public $b;

    public function __construct(B $b) {
        $this->b = $b;
    }
}

class B {
    public $c;

    public function __construct(C $c) {
        $this->c = $c;
    }
}

class C {
    public $d;
    public $e;

    public function __construct(D $d, E $e) {
        $this->d = $d;
        $this->e = $e;
    }
}

class D {

}
class E {
    public $f;
    public function __construct(F $f) {
        $this->f = $f;
    }
}

class F {} 
```

由于这个测试的性质，我是否认为我不能为此使用生成的模拟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:03:27.280

你是对的。这是高度不可测试的代码。

相反，正确的 DI 方法是将这些对象注入到需要它们的对象/方法中：

```
A::__construct(B $b) { $this->b = $b; } 
```

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:18:39.047

这看起来更像是一次集成测试，您可以同时测试整个 DI 系统。相反，看看你可以在哪里模拟系统的一部分——而不是它创建的对象。如果没有看到所涉及的课程，我无法做出有根据的猜测。

虽然您可能无法使用 PHPUnit 的模拟对象，但您*可以*推出自己的一次性模拟来做同样的事情。例如，要通过`Database::setPassword`使用从容器中获取的值调用来测试设置属性，您将创建一个模拟`Database`类，将密码放入容器中，并要求容器创建对象。

```
class MockDatabase {
    public $passwordSet = false;
    public function setPassword($password) {
        if ($password != 'password') {
            throw new InvalidArgumentException('Expected "password"');
        }
        $this->passwordSet = true;
    }
}

...

function testInjectProperty() {
    $container = Container::create(array(
        'password' => 'password',
    ));
    $database = $container->create('MockDatabase');
    self::assertTrue($database->passwordSet);
} 
```

# android - Android：即使用户关闭应用程序，也会在后台连续运行应用程序

> ID：12543060
> 
> 赞同：-2
> 
> 时间：2012-09-22T10:45:56.953
> 
> 标签：android

我是 android 新手，我正在尝试一个应用程序作为“预定消息传递”。场景：假设您想在下午 6 点向您的朋友发送一些消息。然后您只需输入一个条目，届时将自动发送消息。但是现在我遇到的问题是，即使用户尝试关闭应用程序，应用程序也必须始终运行，因为否则不会发送消息。谁能给我一个小演示。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:06:13.397

您可以将任务作为服务运行。或者最好使用警报。查看 AlarmManager 系统服务

# c# - 从串口接收到字符串时，如何使动态创建的按钮闪烁或更改颜色？

> ID：12543063
> 
> 赞同：0
> 
> 时间：2012-09-22T10:46:21.407
> 
> 标签：c#, .net, serial-port

当从串行端口接收到值时，如何使动态创建的按钮中的特定按钮闪烁并更改其颜色。它应该是这样的：如果从串行端口接收到一个字符，按钮阵列中的一个按钮应该开始闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:54:21.947

您可以使用这篇文章 - 基于 `SerialPort.DataReceived Event`

在实例上创建：

```
 SerialPort mySerialPort = new SerialPort("..");//Adjust value

    mySerialPort.BaudRate = ...;//Adjust value
    mySerialPort.Parity = Parity.None;
    mySerialPort.StopBits = StopBits.One;
    mySerialPort.DataBits = ..;//Adjust value
    mySerialPort.Handshake = Handshake.None;

    mySerialPort.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

    mySerialPort.Open();

    Console.WriteLine("Press any key to continue...");
    Console.WriteLine();
    Console.ReadKey();
    mySerialPort.Close(); 
```

事件 ：

```
 private static void DataReceivedHandler(object sender,  SerialDataReceivedEventArgs e)
 {
        //Change
 } 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)

改变颜色：

```
<input type="button" value="click me" onclick="this.style.color='#000000';
this.style.backgroundColor = '#ffffff'" /> 
```

您可以使用此代码 - 基于`RegisterClientScriptBlock`

```
 // Get a ClientScriptManager reference from the Page class.
      ClientScriptManager cs = Page.ClientScript;
      StringBuilder cstext2 = new StringBuilder();
      cstext2.Append("<script type=\"text/javascript\">");
      cstext2.Append("document.getElementById("button").bgcolor="#Insert Color Here";</");
      cstext2.Append("script>");
      cs.RegisterClientScriptBlock(.., .., cstext2.ToString(), false); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/z9h4dk8y.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/z9h4dk8y.aspx)

# php - 无法在 PHP 中运行 bash 脚本

> ID：12543064
> 
> 赞同：5
> 
> 时间：2012-09-22T10:46:50.173
> 
> 标签：php, linux, bash, swi-prolog

我正在尝试在 PHP 中运行 bash 脚本，但无法运行它。php -v

```
PHP 5.3.10-1ubuntu3.2 with Suhosin-Patch (cli) (built: Jun 13 2012 17:19:58)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

Ubuntu 12.04 LTS 64 位。

我的PHP代码：

```
 $cmd='/www/var/pl/bash.sh';
    $retval =-1;
    exec( $cmd, $output ); //executing the exec function.
    foreach( $output as $tmp ) 
    { 
        echo "$tmp <br>"; 
    }; 
```

bash.sh：

```
 #!/bin/bash
swipl --quiet -s /var/www/pl/ples.pl -g "f(R, gel), writeln(R),open('/var/www/pl/in.txt',write, Stream),
write(Stream, (R)),
nl(Stream),
close(Stream)" -t halt. 
```

我究竟做错了什么？

我可以在 Linux 终端中运行 bash.sh。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T10:53:09.747

当您在终端中运行脚本时，您是在您登录的帐户下执行它。您有一个带有搜索路径等的 shell 设置。

当 php 执行脚本时，它没有 shell 设置，而是在 webserver 用户帐户下运行。执行时：

*   确保你有完整的文件路径 `swipl`，这还不够，应该是`/path/to/swipl`
*   确保**网络服务器进程**有足够的访问权限来获取它需要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:51:05.273

很可能是路径或权限问题；例如，运行 Web 应用程序的用户不知道`swipl`程序在哪里。

在 'ing之前将 2>&1 添加到命令行`exec`，以便它告诉您问题所在。或者，您可以在 Web 服务器错误日志（或 PHP 错误日志；检查其路径和 php.ini 中的设置）中找到 stderr 输出。

# iphone - 如何在不使 GUI 无响应的情况下进行 Web 服务调用

> ID：12543065
> 
> 赞同：1
> 
> 时间：2012-09-22T10:46:56.470
> 
> 标签：iphone

我有一个`UISearchBar`和`UISearchDisplayController`。当用户在其中写入文本时， `searchBar:textDidChange:`我会调用 Web 服务来过滤我的 TableView。问题是在我从 Web 服务获得结果之前，GUI 没有响应。我尝试使用 解决它`[self performSelector:@selector(callWebService:) withObject:searchText];`，但它仍然没有响应。

编辑：按照 Flink 的建议，我改为`performSelector`，`performSelectorInBackground`但现在 tableView 没有正确过滤，它只显示“无结果”。甚至`tableView:numberOfRowsInSection:`没有被调用。

再次编辑：我得到“无结果”的原因是由于没有调用`reloadData`正确的 tableView。`UISearchDisplayController`有一个名为 的属性`searchResultsTableView`。所以最后我使用的是`[self.searchDisplayController.searchResultsTableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:false];`现在它工作正常。

需要注意的是，虽然我选择了`performSelectorInBackground`，但我可能应该尝试使用`sendAsynchronousRequest`方法 on `NSURLConnection`- 请参阅 AliSoftware 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:11:04.130

您需要使您的网络呼叫异步。

[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

在您的情况下，您可以更改`performSelector`为`performSelectorInBackground`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:32:35.740

您应该避免创建后台队列或线程来执行您的网络请求（这就是这样`performSelectorInBackground:`做的），因为这会为此创建一个工作线程，这不如在`NSRunLoop`.

专用线程将使处理器定期激活线程以检查是否有一些数据，为此创建一个线程是相当大的。在运行循环上调度请求（作为运行循环源）将使用网络中断来通知来自套接字的传入数据，因此只有在有实际数据可用时才会激活。

为此，只需**使用`NSURLConnection`**.

*   一种解决方案是使用由提供的委托方法`NSURLConnection`（这是旧的方法，是`NSURLConnection`iOs3 API 中可用的唯一方法）
*   另一个更现代的解决方案是使用`NSURLConnection`更易于使用和编码的块 API。

    ```
    [NSURLConnection sendAsynchronousRequest:request
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse* response, NSData* receivedData, NSError* error)
     {
       // Your code to execute when the network request has completed
       // and returned a response (or timed out or encountered an error)
       // This code will execute asynchronously only once the whole data is available
       // (the rest of the code in the main thread won't be blocked waiting for it)
     }];
    // After this line of code, the request is executed in the background (scheduled on the run loop)
    // and the rest of the code will continue: the main thread will not be frozen during the request. 
    ```

在[URL 加载系统编程指南](http://developer.apple.com/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)和[`NSURLConnection`类参考](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)中阅读更多内容。

# oop - 如何在 Haskell 中实现这个 OOP 案例？

> ID：12543070
> 
> 赞同：1
> 
> 时间：2012-09-22T10:47:24.780
> 
> 标签：oop, haskell, types

在项目中，我有几种不同的类型，定义在不同的模块中，每个都有相关的功能（功能名称相同，含义非常相似，所以以下有意义）。现在我想创建一个列表，其中可以（同时）拥有所有这些类型的实例。我能想到的唯一可能是这样的：

```
data Common = A{...} | B{...} | ... 
```

但这意味着将定义保存在一个地方，而不是在不同的模块中（对于 A、B、...）。有一个更好的方法吗？

**UPD**

我对haskell很陌生，写了一些与我的学习相关的程序。在这种情况下，我有不同的`FormalLanguage`定义方法：`FiniteAutomata`，`Grammars`等等。它们中的每一个都有共同的功能（`isAccepted`, `representation`, ...），所以有一个列表似乎合乎逻辑，其中元素可以是这些类型中的任何一种。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T14:49:22.713

通过假设正确的解决方案是将不同的类型存储在列表中，您将 OOP 思维方式带入 Haskell。我将从检验这个假设开始。

通常我们将不同类型存储在同构列表中，因为它们支持公共接口。为什么不直接将通用接口分解出来并将其存储在列表中呢？

不幸的是，您的问题没有描述该通用接口是什么，因此我将仅介绍一些常见示例作为演示。

第一个例子是一堆值，`x`，`y`和`z`，它们都支持`Show`具有签名的函数：

```
(Show a) => a -> String 
```

`show`我们可以直接调用值并将结果字符串存储在列表中，而不是存储我们稍后要显示的类型：

```
list = [show x, show y, show z] :: String 
```

过早调用不会受到惩罚，因为 Haskell 是一种惰性语言，并且在我们真正需要字符串之前`show`不会实际评估s。`show`

或者该类型可能支持多种方法，例如：

```
class Contrived m where
    f1 :: m -> String -> Int
    f2 :: m -> Double 
```

我们可以将上述形式的类转换为等效的字典，其中包含将方法部分应用于我们的值的结果：

```
data ContrivedDict = ContrivedDict {
    f1' :: String -> Int,
    f2' :: Double } 
```

...我们可以使用这个字典将任何值打包到我们期望它支持的公共接口中：

```
buildDict :: (Contrived m) => m -> ContrivedDict
buildDict m = ContrivedDict { f1' = f1 m, f2' = f2 m } 
```

然后我们可以将这个通用接口本身存储在列表中：

```
list :: [buildDict x, buildDict y, buildDict z] 
```

同样，我们没有存储不同类型的值，而是将它们的共同元素分解出来存储在列表中。

然而，这个技巧并不总是奏效。病态的例子是任何期望两个相同类型的操作数的二元运算符，例如类中的`(+)`运算符`Num`，它具有以下类型：

```
(Num a) => a -> a -> a 
```

据我所知，没有很好的基于字典的解决方案来部分应用二元运算并将其存储以保证将其应用于相同类型的第二个操作数。在这种情况下，存在类型类可能是唯一有效的方法。但是，我建议您尽可能坚持使用基于字典的方法，因为它允许比基于类型类的方法更强大的技巧和转换。

有关此技术的更多信息，我建议您阅读 Luke Palmer 的文章：[Haskell Antipattern: Existential Typeclass](https://lukepalmer.wordpress.com/2010/01/24/haskell-antipattern-existential-typeclass/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T10:59:01.460

有几种可能：

可能性一：

```
data Common = A AT | B BT | C CT 
```

AT、BT 和 CT 在各自的模块中描述

可能性2：

```
{-# LANGUAGE ExistentialQuantification #-}

class CommonClass a where
    f1 :: a -> Int

data Common = forall a . CommonClass a => Common a 
```

这与 OOP 超类几乎相同，但您不能进行“向下转型”。然后，您可以为所有模块中的公共类的成员声明实现。

@Gabriel Gonzalez 建议的可能性 3：

```
data Common = Common {
     f1 :: Int
} 
```

因此，您的模块通过使用闭包对“私有”部分进行抽象来实现通用接口。

然而，Haskell 设计通常与 OOP 设计完全不同。虽然可以在 Haskell 中实现每个 OOP 技巧，但它可能不是惯用的，所以正如@dflemstr 所说，欢迎提供有关您的问题的更多信息。

# c# - 组合框选定项

> ID：12543073
> 
> 赞同：0
> 
> 时间：2012-09-22T10:47:34.547
> 
> 标签：c#, combobox

我是 C# 新手，我有一个问题，我找不到其他问题。我创建了一个这样的组合框：

```
ComboBox lijst = new ComboBox(); 
```

我还添加了一些项目和位置：

```
lijst.Location = new Point(400, 25);

lijst.Text = "Basis";
lijst.Items.Add("Basis");
lijst.Items.Add("Zuilen");
lijst.Items.Add("Vuur");
lijst.Items.Add("Zigzag"); 
```

问题是您现在可以选择一个项目并按下触发下一个方法的按钮。

```
private void bereken(object sender, System.EventArgs e)
{
    string nr = Convert.ToString(lijst.SelectedIndex);

    Label tekstuitvoer = new Label();
    tekstuitvoer.Location = new Point(100, 100);
    tekstuitvoer.Size = new Size(70, 20);
    tekstuitvoer.Text = nr;

    this.Controls.Add(tekstuitvoer);
} 
```

但这是我的问题。按下按钮后， tekstuitover.Text 的结果将始终相同。因此，如果您在选择“Vuur”时按下按钮，则结果将始终为 2。之后更改组合框项目无关紧要。输出将始终为 2。但是当我重新启动程序并选择第四个选项而不是第三个时，现在结果始终为 3。

你能帮我解决这个问题吗？有没有办法重置字符串 nr？

提前致谢。我希望你们能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:26:12.150

我花了一段时间才弄清楚你在说什么。将`SelectedIndexChanged`事件处理程序添加到您的组合框，并从那里触发您的标签代码，您可以摆脱按钮。

但是，就目前情况而言，您将在每次更改时创建一个新的标签组件。更简单的是在设计时添加一个并在事件中设置文本属性。

# java - java中的空匿名内部类

> ID：12543075
> 
> 赞同：22
> 
> 时间：2012-09-22T10:47:44.610
> 
> 标签：java, guava, inner-classes, anonymous-class

我正在查看[Guava 库](http://code.google.com/p/guava-libraries/)，在[`TypeToken`](http://code.google.com/p/guava-libraries/wiki/ReflectionExplained#TypeToken).

```
TypeToken<List<String>> stringListTok = new TypeToken<List<String>>() {}; 
```

**空匿名内部类**的确切用途是什么？它有哪些有用的场景？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-22T10:55:44.167

这样做的目的是允许`TypeToken`找到实例的*超类*——这将保留类型参数信息。

例如，虽然一个`ArrayList<String>`对象不知道它的元素类型是`String`，但由于擦除，超类信息*没有*丢失，所以`new ArrayList<String>{}`知道它的超类是`ArrayList<String>`，而不仅仅是`ArrayList`。`TypeToken`使用该技术来表示构造的泛型类型。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-22T10:54:45.567

有一种用途，番石榴可能会使用。如您所知，类型在编译后会丢失，但如果在类级别指定类型，则编译后不会丢失，可以通过反射提取。我将在一分钟内将代码用于提取类型。

* * *

编辑我不知道代码是否有用，但在这里

```
public class Reflect {

    public static void main(String[] args) {
        Super<String> aStringSuper = new Super<String>() {};
        aStringSuper.method();

        Super<List<Integer>> aListSuper = new Super<List<Integer>>() {};
        aListSuper.method();
    }

}

class Super<T> {

    public void method() {
        Type genericSuperclass = this.getClass().getGenericSuperclass();
        ParameterizedType parameterizedType = (ParameterizedType) genericSuperclass;
        for(Type type : parameterizedType.getActualTypeArguments()) {
            System.out.println(type);
        }
    }
} 
```

# c - USART接收中断stm32

> ID：12543076
> 
> 赞同：1
> 
> 时间：2012-09-22T10:47:46.637
> 
> 标签：c, stm32, interruption, usart

我在处理 STM32 和 USART 中断的地图上进行开发。配置 USART1 并启用接收中断后。没有检测到接收中断的问题？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T02:42:35.653

如果不知道您正在使用哪个特定处理器、您正在使用哪个板和/或您正在使用哪个编译器，这样的问题很难回答。但为了提供帮助，这是我的代码。

这是我的 GPIO 和 NVIC 初始化代码，使用 Sourcery CodeBench Lite 和安装在定制板上的 STM32F4 处理器。

```
GPIO_InitTypeDef GPIO_InitStructure;
NVIC_InitTypeDef NVIC_InitStructure;

GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;

RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);
RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);

GPIO_PinAFConfig(GPIOB, GPIO_PinSource10, GPIO_AF_USART3);
GPIO_PinAFConfig(GPIOB, GPIO_PinSource11, GPIO_AF_USART3);  
GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11;
GPIO_Init(GPIOB, &GPIO_InitStructure);

// Enable the USART RX Interrupt 
USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);
NVIC_InitStructure.NVIC_IRQChannel = USART3_IRQn;
NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
NVIC_Init(&NVIC_InitStructure); 
```

当然，您的设置将根据您的处理器、电路板和中断优先级而有所不同。

这是我的中断处理程序代码。在我的开发环境中，此处理程序在我的启动程序集文件中声明为对`Default_Handler`...

```
Default_Handler:
b .  

/* ... */

.word     USART3_IRQHandler

/* ... */

.weak      USART3_IRQHandler      
.thumb_set USART3_IRQHandler,Default_Handler 
```

...所以只要我提供这个中断处理程序的新声明和实现，弱引用就会被替换。这是我的代码的样子。

```
//Interrupt handler declaration
void USART3_IRQHandler(); 
```

如果您使用的是 C++，则需要按如下方式声明它：

```
//Interrupt handler declaration in C/C++
#ifdef __cplusplus
 extern "C" {
#endif
void USART3_IRQHandler();
#ifdef __cplusplus
 }
#endif 
```

这是中断处理程序的实现。

```
//Interrupt handler implementation
void USART3_IRQHandler()
{
    //handle interrupt
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-11T23:33:10.450

这是配置STM32 USART（USART3）和中断处理程序的简短代码。

**配置和初始化**

```
 void Init_USART3()
   {
     // PB.11 = RX    Floating Input
     // PB.10 = TX    Alternate function output Push-pull 50 MHz
     RCC->APB2ENR = RCC->APB2ENR | (RCC_APB2ENR_IOPBEN);
     RCC->APB1ENR |= RCC_APB1ENR_USART3EN;      // enable clock for  USART3.

     GPIOB->CRH = GPIOB->CRH & 0xFFFF00FF;
     GPIOB->CRH = GPIOB->CRH | 0x00004B00;

     USART3->BRR  =72000000/9600;                    // set baudrate. 
     USART3->CR1  |= (USART_CR1_RE | USART_CR1_TE);  // RX, TX enable. 
     USART3->CR1  |= USART_CR1_UE;                   // USART3 enable.  
     USART3->CR1  |= USART_CR1_RXNEIE;    // UART3 Receive Interrupt Enable.
     // Enable interrupt fromUSART1(NVIC level) 
     NVIC_EnableIRQ(USART3_IRQn);   
   } 
```

**处理接收中断**

```
void USART3_IRQHandler()
{
  if(USART3->SR & USART_SR_RXNE)
  {
    // Do Something
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-10T00:01:19.260

确保不要在尝试中断的同一个 usart 上调用 HAL_UART_Transmit()。这是因为此函数调用 UART_WaitOnFlagUntilTimeout() 来禁用中断。上面提到的user7404301最有可能调用它的trace printf()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T11:25:45.010

我之前对 Eclipse(GCC) 有同样的问题，最后我发现了问题。问题不在于代码，而在于“trace_printf”，如果您在运行时使用此 API 打印任何详细信息，“trace_printf”将中断 uart，您的接收中断将永远不会发生。所以，试一试，不要使用它并设置断点来查看您收到的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T14:49:45.267

**处理接收中断的示例编码**

```
//USART1 Interrupt Handler
    void USART1_IRQHandler(void)
    {
      if(USART_GetITStatus(USART1, USART_IT_RXNE) != RESET)//enter interrupt when STM32 receice data.
      {
         USART_ClearITPendingBit(USART1, USART_IT_RXNE);
         USART_Temp_Data = (unsigned char) USART_ReceiveData(USART1); //receive a char
      }
    } 
```

# android - 如何在 viewpager 中缩放和平移 imageview 图像

> ID：12543078
> 
> 赞同：0
> 
> 时间：2012-09-22T10:47:50.600
> 
> 标签：android, android-viewpager

我有一个查看寻呼机。
我在其中使用 Image View 来显示图像。
图像滚动完美，但我无法平移和缩放图像。
我怎样才能做到这一点？
可以使用 webview 吗？我试图这样做，但它没有正确缩放。页面缩放但图像未缩放

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:51:11.737

Android 图像视图默认不支持捏合和缩放。

使用[任何支持捏合和缩放的自定义视图](https://github.com/jasonpolites/gesture-imageview)或使用[ScaleGestureDetector](http://android-developers.blogspot.kr/2010/06/making-sense-of-multitouch.html)自己实现。

# java - 如何在父线性布局下方添加相对布局？

> ID：12543085
> 
> 赞同：0
> 
> 时间：2012-09-22T10:49:12.137
> 
> 标签：java, android, android-layout, layout

我有这个带有线性布局的活动（称为 myLayout），其中有两个按钮。然后，我动态地创建了一个 textView 数组，并将它们添加到一个新的相对布局（称为 relLayout）中。现在我想把这个 relLayout放在 myLayout 中这两个按钮的**下面。**但我不知道如何，也许有`myLayout.addView(relLayout, fparams);`但我不知道如何定义 fparams ..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:56:19.373

`myLayout`将包括and在内的整个布局页面包装`relLayout`到另一个`RelativeLayout`. 然后你会像这样指定到`relLayout`下面的位置`myLayout`：

```
android:layout_below="@id/myLayout_ID" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:57:51.597

**-**首先让 a`LinearLayout`作为`Main Parent layout`名为**L1**的假设，其中`Vertical orientation.`

**-**然后创建第二个`LinearLayout`名称作为**L2**作为`child to the parent`布局**L1**，与`Vertical orientation`

**-**将 2`button`放在这个孩子身上`LinearLayout L2.`

**-**设置这个`LinearLayout`L2 属性命名`Layout_weight as 1.`

**-**现在把`RelativeLayout`这个LinearLayout L2放在下面，然后动态生成`textView`here....

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" android:layout_weight="1">

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </RelativeLayout>

</LinearLayout> 
```

# jquery - JQuery 使用来自选定表行的数据填充表单字段

> ID：12543087
> 
> 赞同：2
> 
> 时间：2012-09-22T10:49:23.640
> 
> 标签：jquery, html-table, jquery-selectors

我有一个简单的表格，每行末尾都有一个编辑按钮，如下所示：

```
<table class='document_table'>
<tr>
    <td>Item1</td>
    <td>Item2</td>
    <td>Item3</td>
    <td><a href='javascript:void(0);' class='edit_doc'>Edit</a></td>
</tr>
<tr>
    <td colspan='4'>Item4</td>
</tr>
<tr>
    <td colspan='4'>Item5</td>
</tr>
<tr>
    <td>Item1</td>
    <td>Item2</td>
    <td>Item3</td>
    <td><a href='javascript:void(0);' class='edit_doc'>Edit</a></td>
</tr>
<tr>
    <td colspan='4'>Item4</td>
</tr>
<tr>
    <td colspan='4'>Item5</td>
</tr>
</table> 
```

我需要做的是，当单击编辑按钮时，用三行中的数据填充表单。请注意，行数是动态的。

表单html如下：

```
 <label>Input 1<label>
 <input type='text' class='input1' />
 <label>Input 2<label>
 <input type='text' class='input2' />
 <label>Input 3<label>
 <input type='text' class='input3' />...etc 
```

到目前为止，我的 jQuery 如下但不工作....

```
var row1=$(this).closest('tr').find('td').eq(0).val();
$('.input1').val(row1); 
```

我还必须能够从接下来的两行中获取值:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:53:59.253

您应该使用`.html()`而不是`.val()`，如下所示：

```
var row1=$(this).closest('tr').find('td').eq(0).html(); 
```

要获取其他行，您可以执行以下操作：

```
var td = $(this).closest('tr').find('td');
var row1 = td.eq(0).html();
var row2 = td.eq(1).html();
var row3 = td.eq(2).html(); 
```

# meteor - Meteor ORM 多态和 Mongo 文档

> ID：12543089
> 
> 赞同：4
> 
> 时间：2012-09-22T10:49:39.117
> 
> 标签：meteor

我听说[即将推出 Meteor ORM](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/aawhBBHsDrk)。

我有兴趣以与[Django 的多态模型](https://github.com/bconstantin/django_polymorphic)类似的方式使用它。

首先，Mongo Documents 是否提供类似于 django-polymorphic 的多态表示，其次，如何使用 Meteor Collections 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-08T18:50:43.230

在你写你的问题时，这可能是不可行的，但现在可以通过`transform`在实例化`new Mongo.Collection`或执行时使用选项来实现`MyCollection.find`or `findOne`。鉴于您想做多态模型，您很可能会`transform`在查询期间使用该选项。

查看`transform`以下文档中的选项：

[http://docs.meteor.com/#/full/mongo_collection](http://docs.meteor.com/#/full/mongo_collection)

[http://docs.meteor.com/#/full/find](http://docs.meteor.com/#/full/find)

[http://docs.meteor.com/#/full/findone](http://docs.meteor.com/#/full/findone)

这是一个例子：

```
// Your MongoDB collections
Resources = new Mongo.Collection('resource');

// Define your model
function ProductModel (resource) { /* Model Stuff */ }

// As you fetch your data, instantiate the models using the `transform` option
var product = Resources.findOne(myFilter, {
  transform: function (document) {
    return new ProductModel(document);
  }
}); 
```

有很多软件包可以让您立即获得模型的能力，例如[Astronomy](https://atmospherejs.com/jagi/astronomy)和[Graviton](https://github.com/emmerge/graviton)。

# python - 试图找到一个不等式的纯python整数线性规划求解器

> ID：12543092
> 
> 赞同：1
> 
> 时间：2012-09-22T10:50:05.153
> 
> 标签：python, google-app-engine, linear-programming

我有一个用 App Engine (python) 编写的程序，我想在其中使用整数线性规划求解器。我能找到的所有求解器似乎都是部分用 C 编写的，所以我想它们不会在 App Engine 中工作。

任何人都知道一个可以解决不等式整数线性规划的纯python库吗？

我设法找到了这个[http://projects.scipy.org/scipy/ticket/1252](http://projects.scipy.org/scipy/ticket/1252)但它似乎没有处理不平等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:32:36.243

这似乎可以解决问题：http: [//labix.org/python-constraint](http://labix.org/python-constraint)

# c# - .NET 中的嵌套字典集合

> ID：12543094
> 
> 赞同：2
> 
> 时间：2012-09-22T10:50:22.487
> 
> 标签：c#, .net, collections, dictionary

.NET`Dictionary<TKey, TValue>`对象允许分配键/值，如下所示：

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict["1"] = "foo";
dict["2"] = "bar"; 
```

但我不能像这样使用字典：

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict["F1"]["F2"]["F3"] = "foo";
dict["2"]["X"] = "bar"; 
```

.NET 中是否有允许我嵌套的集合`[]`，或者我必须创建自己的集合？

如果我必须创建自己的，我会怎么做？

**编辑：**

如果我可以拥有期望唯一键的实现，这也会很有用，如下所示：

```
dict["F1"]["F2"]["F3"] = "foo";
dict["F1"]["F2"]["F3"] = "bar"; //result is "bar" because "foo" was overridden 
```

以及一个密钥可以多次使用的实现

```
dict["F1"]["F2"]["F3"] = "foo";
dict["F1"]["F2"]["F3"] = "bar"; //result can be "foo" and "bar" 
```

这可能吗？

**编辑（根据 Jon Skeet 的问题）：**

我想使用这样的结构（作为一个非常粗略的例子）：

```
json["data"]["request"]["name"] = "username";
json["data"]["request"]["pass"] = "password"; 
```

解决为

```
{ data: { request: { name: "username", pass: "password" } } } 
```

并且同样会有 XML 等的等价物。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T12:02:03.773

由于需要任意长的嵌套，我提出了以下解决方案，据我所知，根据我的测试，它不会中断：

```
public class NestedDictionary<K, V> : Dictionary<K, NestedDictionary<K, V>>
    {
        public V Value { set; get; }

        public new NestedDictionary<K, V> this[K key]
        {
            set { base[key] = value; }

            get
            {
                if (!base.Keys.Contains<K>(key))
                {
                    base[key] = new NestedDictionary<K, V>();
                }
                return base[key];
            }
        }
    } 
```

**测试：**

```
NestedDictionary<string, string> dict = new NestedDictionary<string, string>();
dict["one"].Value = "Nest level 1";
dict["one"]["two"]["three"].Value = "Nest level 3";
dict["FieldA"]["FieldB"].Value = "Hello World";

Console.WriteLine(dict["one"].Value);
Console.WriteLine(dict["one"]["two"]["three"].Value);
Console.WriteLine(dict["FieldA"]["FieldB"].Value); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-22T10:53:31.290

你可以使用标准字典来做到这一点，你只需要声明嵌套：

```
Dictionary<string, Dictionary<string, string>> dict = ...
string test = dict["first"]["second"]

Dictionary<string, Dictionary<string, Dictionary<string, string>>> dict = ...
string test = dict["first"]["second"]["third"]

etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T17:28:34.623

为与 vb6 一起工作而创建的原始COM 对象将通过创建具有相应名称`Dictionary`的类型的新项来响应访问不存在项的尝试。`Dictionary`这种方法允许存储某些内容`MyDict["Foo"]["Bar"]`而无需先创建`MyDict["Foo"]`. 这种方法的问题在于，虽然人们在执行写入时希望添加`"Foo"`to ，但如果尝试评估，则宁愿不创建这样的项目。`MyDict``MyDict["Foo"]["Bar"]``MyDict["Foo"]["Bar"].ValueOrDefault(someDefaultValue)`

我使用过这样的集合，因为它们可以方便地对某些事物进行建模（从概念上讲，它们很像 XML 文档）。一种可行的方法是声明只包含其他字典的字典在语义上被视为可以随时删除的非实体。当隐式添加子集合时，在添加它的项目中设置一个标志，指示应该检查可能被删除的项目（或保留可能存在多少此类项目的计数器）。然后以合理的频率浏览字典并删除这些“死”项目。

另一种方法是让字典中的索引器不返回实际项目，而是返回“临时索引器”类型，该类型保留对父对象的引用并具有内部方法`GetNestedForReading`、`SetNestedForReading`、`GetValue`和`SetValue`，这些方法链接回它。然后一个语句`Foo["Bar"]["Boz"] = "George";`最终将有效执行`Foo.SetNestedForReading("Bar").SetValue("Boz", "George");`，而`z = Foo["Bar"]["Boz"];`将有效执行`Foo.GetNestedForReading("Bar").GetValue("Boz");`。使用不存在的键调用`SetNestedForReading`方法将创建并返回一个新的嵌套项；该`GetNestedForReading`方法将是一个不可变的“空”项目。因此，使用这种方法将避免创建空项目。

虽然后一种方法比前一种方法更复杂，但它还有另一个优点。可以让每个节点单独将其集合保存为共享的深度不可变字典或非共享的可变字典；如果一个`GetNestedForWriting`call 看到嵌套对象是不可变的，它可以构造一个新的浅可变对象来保存相同的项目。如果将可变节点的克隆方法定义为使用所有子节点的（不可变的）克隆创建一个新的不可变节点，并且将不可变节点的克隆方法定义为返回自身，那么克隆大部分不可变的树变得非常便宜。如果有一个新克隆的（因此不可变的）四级树，每级有 16 个项目（总共 65,536 个叶节点），并且所有节点都是共享不可变的，那么更新叶节点只需要替换一个叶和四个其他节点与可变的。再次克隆树只需要为已经被可变对象替换的节点创建新的不可变对象（例如复制五个东西）。尽管人们会拥有一棵完全可变的树的便利，

我在这种方法中看到的最大“问题”是，为了避免一些奇怪的行为，必须使用类似`MyDict["Foo"]["Bar"].Value = "George"`. 如果使用隐式转换运算符来避免该要求，那么有人会期望这样的语句`var st = MyThing["Foo"]["Bar"];`定义`st`为当时所持有的`string`任何内容的快照；`MyThing["Foo"]["Bar"]`相反，它将它定义为将索引的东西`MyThing["Foo"]["Bar"]`。如果必须使用`.Value`从这种类型读取或写入字符串，那么变量不是字符串的事实将很明显。如果有人使用隐式运算符来允许这样的赋值，那么行为会很奇怪。太糟糕了，函数无法指定“不允许此返回值用于类型推断”。

顺便说一句，索引器类型可以是类或泛型结构。如果它是一个类，对`foo["Bar"]["boz"]["baz"]...`嵌套`N`深度的访问可能需要创建`N`临时堆对象。如果它是通用结构，则需要创建`N`结构，但嵌套更深的结构会变得更大。对于合理的嵌套级别，通用结构可能会更有效，但类可能更容易使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T11:48:50.830

我认为，您的案例是使用的好地方`DynamicObject`。`Dictionary<string, object>`我将在内部使用 json 创建一个示例。

同样的想法也可以用于 xml。

```
string json = @"{""Name"":""Joe"",
                 ""Age"":30,
                 ""Address"":{ ""City"":""NY"" }}";

dynamic dynObj = new DynamicJson(json);

Console.WriteLine(dynObj.Name);
Console.WriteLine(dynObj.Age);
Console.WriteLine(dynObj.Address.City); 
```

--

```
public class DynamicJson : DynamicObject
{
    Dictionary<string, object> _Dict;

    public DynamicJson(string json)
    {
        _Dict = (Dictionary<string, object>)new JavaScriptSerializer().DeserializeObject(json); 
    }

    DynamicJson(Dictionary<string, object> dict)
    {
        _Dict = dict;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;
        object obj;
        if (!_Dict.TryGetValue(binder.Name, out obj)) return false;

        if (obj is Dictionary<string, object>)
        {
            result = new DynamicJson((Dictionary<string, object>)obj);
        }else
        {
            result = obj;
        }
        return true;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T10:54:44.653

使用`Dictionary`as `TValue`：

```
var dict2 = new Dictionary<string, Dictionary<string, string>>();
var dict3 = new Dictionary<string, Dictionary<string, Dictionary<string, string>>>(); 
```

例如：

```
var dict =
    new Dictionary<string, Dictionary<string, string>>
        {
            {
                "F1", new Dictionary<string, string>
                            {
                                {"F2", "foo"}
                            }
                }
        };

dict["F1"]["F2"] = "bar"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T11:00:31.217

您必须决定是否支持固定数量的字符串键进行查找，或者如果键的数量可以变化，则提供更通用的键机制。对于第一种情况，请尝试以下操作：

```
Dictionary<string,Dictionary<string,string>> dict =
    Dictionary<string,Dictionary<string,string>>();
dict["F1"]["F2"] = "foo";
Dictionary<string,Dictionary<string,Dictionary<string,string>>> dict2 =
    Dictionary<string,Dictionary<string,string>>();
dict2["F1"]["F2"]["F3"] = "bar"; 
```

对于第二种情况，您可以执行以下操作：

```
Dictionary<string[],string> dict = new Dictionary<string[],string>(new MyEqualityComparer());
dict[new string[] {"F1","F2"}] = "foo";
dict[new string[] {"F1","F2","F3"}] = "bar"; 
```

MyEqualityComparer 类类似于：

```
public class MyEqualityComparer : IEqualityComparer<string[]>
{
    public int GetHashCode(string[]item)
    {
         int hashcode = 0;
         foreach (string s in item)
         { 
             hashcode |= s.GetHashCode();
         }
         return hashcode;
    }

    public bool Equals(string [] a, string [] b)
    {
         if (a.Length != b.Length)
             return false;
         for (int i = 0; i < a.Length; ++i)
         {
             if (a[i] != b[i])
                 return false;
         }
         return true;
   } 
```

# javascript - 根据下拉菜单选择显示选定的 div

> ID：12543097
> 
> 赞同：0
> 
> 时间：2012-09-22T10:50:51.410
> 
> 标签：javascript, html, drop-down-menu

我很乐意在以下情况下寻求帮助：

假设我们有**div** `DIV1`、`DIV2`和。 假设我们有带有选项**的下拉**菜单，和。`DIV3``DIV4`
**`CHOICE1``CHOICE2``CHOICE3`**

 **我想实现如下所述的功能：

*   如果用户选择`CHOICE1`，显示`DIV1`，隐藏其他。
*   如果用户选择`CHOICE2`，显示`DIV1`和`DIV3`隐藏其他。
*   如果用户选择`CHOICE3`、显示和`DIV2`，隐藏其他人。`DIV3``DIV4`

你明白了，我相信:-) 谢谢你的帮助，查理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:38:58.380

你也可以做这样的事情。您有您的菜单项，单击该菜单项会获取单击项的索引，然后打开相应的一系列 div。这种方法的唯一技巧是 div 和菜单项列表的顺序必须相同。

```
$(document).ready(function() {
    $('.menu-container li').click(function(){
        var clickedIndex = $(this).index();
        $('.div-container div').css('display', 'none');
        $('.div-container div').eq(clickedIndex).css('display', 'block');
    });
}); 
```

祝你好运，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:57:26.467

尝试这个：

```
$(document).ready(function(){
    $("#choice").change(function(){
        $("div[id^='div']").hide();                
        var val = $(this).val();
        if(val == "CHOICE1"){
           $("#div1").show();
        }
        if(val == "CHOICE2"){
           $("#div1").show();
           $("#div3").show();
        }
    })
})​ 
```

演示在这里：http: [//jsfiddle.net/6Vxw5/](http://jsfiddle.net/6Vxw5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:04:47.813

只是一个想法：0.成为您的选择，例如...

```
<select name="mySelect">
    <option value="0">a</option>
    <option value="1">b</option>
</select> 
```

1.- 设置一个将选项值与 div 相关联的数组：

```
var myDivs = [["div1"], ["div2", "div3"]] 
```

2.-设置切换可见性功能onchange：

```
jQuery('select').change(toggleDivVisibility); 
```

3.- 定义功能：

```
function toggleDivVisibility() {
    jQuery('div').css('display', 'none');
    var divIds = myDivs[this.value];
    for(var d = 0, maxD = divIds.length; d++; d < maxD) {
        var divId = divIds[d];
        jQuery("#"+divId).css('display', 'block');
    }
} 
```

显然，有些行应该改进，但我想你会明白的。**

# php - 将 PHP 字符串分享到 Facebook

> ID：12543098
> 
> 赞同：0
> 
> 时间：2012-09-22T10:51:02.130
> 
> 标签：php, facebook, string, post, share

我想知道是否可以使用 PHP / AJAX 将一串文本共享给 Facebook？例如，我使用 PHP 返回一个 SQL 查询，然后使用与按钮对应的相同文本字符串来分享到我的 Facebook 墙。因此，它在 PHP 中可能看起来像这样：

```
while($note_row = mysql_fetch_row($result)) {

echo '<p> "' . $note_row['my_note_text'] . ' "</p>';

echo '<input type="button" id="' . $note_row['my_note_id'] . '" class="share-to-facebook" value="share" />';

} 
```

如果有人对这是否可能有一些建议，我会非常高兴。如果我的 PHP 错误，我也很抱歉，我还没有检查过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:04:48.127

你有一些选择：

**共享者.php**

[https://www.facebook.com/note.php?note_id=407822831963](https://www.facebook.com/note.php?note_id=407822831963)

创建共享链接。您可以设置标题和网址。

**提要对话框**

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

创建共享对话框。描述和图像等的更多选项。可能是 sharer.php 的替代品。

如果您需要从您的应用程序发布到墙上，您需要通过让用户接受您的应用程序到 Facebook 来获取权限。[在https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)阅读有关身份验证的更多信息

# iphone - 如何在 iPhone 中设置时间倒计时？

> ID：12543100
> 
> 赞同：0
> 
> 时间：2012-09-22T10:51:06.127
> 
> 标签：iphone, ios, time, countdown

我想设置时间倒计时，比如从 60 秒开始，然后经过 59、58、57 等……这个经过的时间显示在屏幕底部，如何设置？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:01:57.563

您可以通过`NSTimer`查看我的示例来做到这一点 - 已声明

```
NSTimer *timer;
int count; 
```

全球在你的`ViewController.h`班级
然后你可以开始你的倒计时`viewDidLoad:`方法。

```
- (void)viewDidLoad
{
    //label is your **UILabel**
    label.text = @"60";
    count = 59;
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countDown) userInfo:nil repeats:YES];

}

-(void)countDown
{
    if(count > 0)
    {
        label.text = [[NSNumber numberWithInt:count] stringValue];
        count --;
    }
    else
    {
        [timer invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T11:02:59.590

你可以像这样使用：

在like上声明一个`NSTimer`对象`@interface``NSTimer *aTimer;`

```
-(void)viewDidLoad
{
    aTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(elapsedTime) userInfo:nil repeats:YES];
}

-(void)elapsedTime
{
    static int i = 60;

    label.text = [NSString stringWithFormat:@"%d",i];

    i--;
    if(i<0)
    {
       [aTimer invalidate];
       aTimer = nil;
    }
} 
```

这里的 label 是 a `IBOutlet UILabel`，即设置为 interface。

# android - Android：java.lang.OutOfMemoryError 虽然非常小的数据库

> ID：12543104
> 
> 赞同：2
> 
> 时间：2012-09-22T10:51:36.847
> 
> 标签：android, database, sqlite

我正在开发一个应用程序来存储两个人之间的一些赌注。

现在我对此非常陌生，尤其是使用 SQLite。问题是，尽管我的数据库中只有 2 或 3 个条目，但我一直收到以下错误消息之一。

**1号**

```
09-22 10:19:36.138: E/AndroidRuntime(21351): FATAL EXCEPTION: main
09-22 10:19:36.138: E/AndroidRuntime(21351): java.lang.OutOfMemoryError
09-22 10:19:36.138: E/AndroidRuntime(21351):    at java.util.Vector.newElementArray(Vector.java:120)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at java.util.Vector.growByOne(Vector.java:466)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at java.util.Vector.add(Vector.java:153)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at challenge.sql.CustomDataSource.getAllEntries(CustomDataSource.java:172)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at challenge.main.OverviewActivity.updateOverview(OverviewActivity.java:40)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at challenge.main.OverviewActivity.onCreate(OverviewActivity.java:29)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.Activity.performCreate(Activity.java:4465)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.os.Looper.loop(Looper.java:137)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at android.app.ActivityThread.main(ActivityThread.java:4340)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at java.lang.reflect.Method.invokeNative(Native Method)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at java.lang.reflect.Method.invoke(Method.java:511)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-22 10:19:36.138: E/AndroidRuntime(21351):    at dalvik.system.NativeStart.main(Native Method) 
```

**2号**

```
09-22 10:19:20.308: E/AndroidRuntime(21337): FATAL EXCEPTION: main
09-22 10:19:20.308: E/AndroidRuntime(21337): java.lang.OutOfMemoryError: [memory exhausted]
09-22 10:19:20.308: E/AndroidRuntime(21337):    at dalvik.system.NativeStart.main(Native Method)
09-22 10:19:20.318: E/System(21337): Uncaught exception thrown by finalizer
09-22 10:19:20.378: E/System(21337): java.lang.IllegalStateException: Don't have database lock!
09-22 10:19:20.378: E/System(21337):    at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
09-22 10:19:20.378: E/System(21337):    at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
09-22 10:19:20.378: E/System(21337):    at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
09-22 10:19:20.378: E/System(21337):    at android.util.LruCache.trimToSize(LruCache.java:197)
09-22 10:19:20.378: E/System(21337):    at android.util.LruCache.evictAll(LruCache.java:285)
09-22 10:19:20.378: E/System(21337):    at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
09-22 10:19:20.378: E/System(21337):    at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
09-22 10:19:20.378: E/System(21337):    at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
09-22 10:19:20.378: E/System(21337):    at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
09-22 10:19:20.378: E/System(21337):    at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
09-22 10:19:20.378: E/System(21337):    at java.lang.Thread.run(Thread.java:856) 
```

**3号**

```
09-22 10:19:20.308: E/SQLiteDatabase(21337): close() was never explicitly called on database '/data/data/challenge.main/databases/DBCHALLENGES' 
09-22 10:19:20.308: E/SQLiteDatabase(21337): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at challenge.sql.CustomDataSource.open(CustomDataSource.java:33)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at challenge.main.OverviewActivity.updateOverview(OverviewActivity.java:38)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at challenge.main.OverviewActivity.onCreate(OverviewActivity.java:29)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.Activity.performCreate(Activity.java:4465)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.os.Looper.loop(Looper.java:137)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at android.app.ActivityThread.main(ActivityThread.java:4340)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at java.lang.reflect.Method.invokeNative(Native Method)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at java.lang.reflect.Method.invoke(Method.java:511)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    09-22 10:19:20.308: E/SQLiteDatabase(21337):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-22 10:19:20.308: E/SQLiteDatabase(21337):    at dalvik.system.NativeStart.main(Native Method) 
```

现在问题是 - 正如我认为的那样 - 是由我课堂`getAllEntries()`上的这种方法引起的`OverviewActivity`

```
public void updateOverview(){
        datasource = new CustomDataSource(this);
        datasource.open();
        Game game = datasource.getSpecificGame(challengeName);
        entries = datasource.getAllEntries();
        datasource.close();

            (...)
} 
```

这是`CustomDataSource`类中的代码

```
public Vector<FootballEntry> getAllEntries(){
    Vector<FootballEntry> entries = new Vector<FootballEntry>();

    Cursor cursor = database.query(CustomSQLiteHelper.TABLE_FOOTBALL, allColumns2, null, null, null, null, null);
    cursor.moveToFirst();

    while(!cursor.isAfterLast()){
        FootballEntry entry = cursorToEntry(cursor);
        entries.add(entry);
        cursor.moveToNext();
    }
    cursor.close();
    return entries;
}

private FootballEntry cursorToEntry(Cursor cursor){
    cursor.moveToFirst();
    FootballEntry game = new FootballEntry();
    game.setID(cursor.getLong(0));
    game.setDate(cursor.getString(1));
    game.setHome(cursor.getInt(2));
    game.setPlatform(cursor.getString(3));
    game.setTeam1(cursor.getString(4));
    game.setStars1(cursor.getDouble(5));
    game.setTeam2(cursor.getString(6));
    game.setStars2(cursor.getDouble(7));
    game.setGoals1(cursor.getInt(8));
    game.setGoals2(cursor.getInt(9));
    game.setFinished(cursor.getInt(10));
    return game;
 } 
```

这里的构造函数`CustomDataSource`和方法`open()`和`close()`

```
public CustomDataSource(Context context){
        dbHelper = new CustomSQLiteHelper(context);
}

public void open() throws SQLException{
        database = dbHelper.getWritableDatabase();
}

public void close(){
        dbHelper.close();
} 
```

注意：我读过几次，我的 CustomSQLiteHelper 应该扩展 SQLiteOpenHelper，就是这样。

我不完全明白为什么会抛出这个错误。每次我想使用数据库时，我都会创建一个新的`CustomDataSource`、调用`open()`、执行工作和调用`close()`。这里有什么问题？首先我想，错误是由我的Activity的方法和方法中的puttin引起的`open()`，但删除它们不会造成任何差异。同样，每个活动我只创建一个实例，并在使用它之后关闭它。`onResume()``close()``onClose()``CustomDataSource`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T11:00:50.057

不要调用**cursorToEntry**`cursor.moveToFirst();`方法，因为它会将您的请求变成无限循环。因此，即使您从数据库中获取了两条记录，您当前的逻辑也会继续创建这两条记录的对象，直到设备内存不足。

# gwt - RequestFactory 客户端服务继承中的 GWT Bug

> ID：12543106
> 
> 赞同：-1
> 
> 时间：2012-09-22T10:52:04.617
> 
> 标签：gwt, requestfactory

我在创建具有常用方法（例如持久、更新、删除）的通用 RequestContext 时遇到问题，并且其他请求类扩展了此类。我得到以下异常：

```
com.google.web.bindery.requestfactory.server.ReportableException: Could not locate RequestContext operation 
```

在谷歌搜索后发现了这个[问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=6794) 和这篇[文章](https://stackoverflow.com/questions/7433910/requestfactory-service-inheritance-on-the-client-in-gwt-2-4)。我认为它还没有解决。无论如何，我不需要在所有请求类中重复每个方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:36:27.530

好吧，当一个错误被报告并且仍然打开时，是的，它仍然没有解决，因此，解决方法仍然适用。所以不，目前除了在子接口中重新声明方法之外别无他法。

# php - PHP 和 JavaScript 日期不匹配 - 奇怪的异常

> ID：12543107
> 
> 赞同：1
> 
> 时间：2012-09-22T10:52:16.080
> 
> 标签：php, javascript

HTML/PHP：

```
<button onclick="change_value(<?php echo $date?>)">Go</button> 
```

JavaScript：

```
function change_value(date_used)
{
    alert(date_used);
} 
```

当我右键单击按钮并单击“检查元素”按钮时，正确显示了参数，即如下所示：

```
<button onclick="change_value(2012-08-22)">Go</button> 
```

但是`alert`JavaScript 中的`1981`. 仅此而已`1981`。不仅日期错了，格式也错了。

这是怎么回事，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:53:58.443

改变

```
<button onclick="change_value(<?php echo $date?>)">Go</button> 
```

对此：

```
<button onclick="change_value('<?php echo $date?>')">Go</button> 
```

您应该将其作为字符串传递给 JavaScript ...

# c# - 正则表达式：从引号中提取所有单词

> ID：12543109
> 
> 赞同：6
> 
> 时间：2012-09-22T10:52:20.583
> 
> 标签：c#, regex, split

通过使用正则表达式，我如何提取双引号中的所有文本，以及此类字符串中引号中的所有单词：

```
01AB "SET 001" IN SET "BACK" 09SS 76 "01 IN" SET 
```

第一个正则表达式应该提取双引号内的所有文本，例如

```
SET 001
BACK
01 IN 
```

第二个表达式应该提取字符串中的所有其他单词

```
01AB
IN
SET
09SS
76
SET 
```

对于第一种情况，效果很好`("(.*?)")`。如何从引号中提取所有单词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T10:59:29.257

试试这个表达式：

```
(?:^|")([^"]*)(?:$|") 
```

与之匹配的组将排除引号，因为它们包含在非捕获括号`(?:`和`)`. 当然，您需要转义双引号以在 C# 代码中使用。

如果目标字符串以带引号的值开始和/或结束，则此表达式也将匹配空组（对于初始引号和尾引号）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T11:23:07.437

试试这个正则表达式：

```
\"[^\"]*\" 
```

用于[`Regex.Matches`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches%28v=vs.100%29.aspx)双引号中的文本，并[`Regex.Split`](http://msdn.microsoft.com/en-us/library/b5k3ak3e%28v=vs.100%29.aspx)用于所有其他单词：

```
var strInput = "01AB \"SET 001\" IN SET \"BACK\" 09SS 76 \"01 IN\" SET";
var otherWords = Regex.Split(strInput, "\"[^\"]*\""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T11:04:02.850

也许您可以尝试用空字符串替换引号内的单词，例如：

```
Regex r = new Regex("\".*?\"", RegexOptions.CultureInvariant | RegexOptions.Compiled | RegexOptions.Singleline);
        string p = "01AB \"SET 001\" IN SET \"BACK\" 09SS 76 \"01 IN\" SET";

        Console.Write(r.Replace(p, "").Replace("  "," ")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T11:02:46.983

您需要否定第一个表达式中的模式。

（？！图案）

看看[这个链接](https://stackoverflow.com/questions/2637675/how-to-negate-the-whole-regex)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-30T11:58:19.693

如果建议您需要所有句子块 - 引用而不是那些 - 那么有更简单的方法可以使用正则表达式来分隔源字符串。**拆分**：

```
static Regex QuotedTextRegex = new Regex(@"("".*?"")", RegexOptions.IgnoreCase | RegexOptions.Compiled);

var result = QuotedTextRegex
                .Split(sourceString)
                .Select(v => new
                    {
                        value = v,
                        isQuoted = v.Length > 0 && v[0] == '\"'
                    }); 
```

# web - 从桌面开发切换到基于 Web 的开发

> ID：12543111
> 
> 赞同：0
> 
> 时间：2012-09-22T10:52:56.550
> 
> 标签：web, web-applications, cloud

我最近在考虑改变我作为开发人员的主要个人资料，我想对此提出一些意见和见解。

我不住在硅谷，我在一个东欧国家，硅谷的嗡嗡声大约在 5 年后才出现，如果有的话。Python、Rails、node.js 根本不是主流或“时髦”，一切都围绕着 PHP、Java、.NET。

我并不是说我们产生了糟糕的代码，有很多优秀的开发人员，我只是说在技术方面，我们有点落后。

我的经验主要是 C# 桌面，但我也使用 PHP 和 Java，2/3 部分桌面应用程序。最近，我正在深入研究 JavaScript 技术和 Python——我真的很喜欢它！

我决定主要转向网络技术，包括可以传输到桌面领域的技术。

**例如：**

最近我有一个涉及桌面应用程序的项目。客户并不真正关心我使用什么技术，但我选择了 C# WinForms，因为我从中获得了最丰富的经验。但是，这可以通过其他任何方式轻松完成，我在想也许有一个基于 JavaScript 的应用程序的解决方案，或者其他什么，我不知道。

我的问题是你们建议哪些语言可以应用于桌面和网络。

我一直在玩 node.js 和 Python，但说实话对这些可能性不太熟悉。我看到了云应用程序和移动开发的未来，所以我的决定是一个战略性的决定。

请省略“如果你喜欢桌面开发，坚持下去”，因为我也喜欢 Web 开发，我只是想主要转向它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:44:34.983

如果您正在做的应用程序可以作为 Web 应用程序完成，但您只是希望它位于用户桌面上并且在没有 Internet 连接的情况下工作，那么您应该去 Web 开发恕我直言

主要挑战是以一种易于桌面用户的方式打包 Web 服务器应用程序。

我知道有两种解决方案：

1.  将包含所有依赖项的 Web 应用程序打包到单个 Java EE .war 文件中，并使用简单的 Tomcat Web 服务器将其放在桌面上（这可以使用 JRuby/warbler 完成）。

2.  替代方法是使用 Web 服务器创建 VMware 映像（Web 服务器将在服务器启动脚本中启动，因此用户只需启动 VMware 实例）。

# linux-kernel - U-Boot 在加载内核时挂起？

> ID：12543122
> 
> 赞同：5
> 
> 时间：2012-09-22T10:54:43.283
> 
> 标签：linux-kernel, arm, u-boot

我正在研究飞思卡尔板 imx50evk。我已经使用 LTIB（Linux 目标映像生成器）构建了 uboot.bin 和 uImage。在 U-Boot 提示符下输入`bootm addr`命令，然后在显示消息“正在加载内核...”后挂起

```
> MX50_RDP U-Boot > boot

MMC read: dev # 0, block # 2048, count 6290 partition # 0 ... 
6290 blocks read: OK
## Booting kernel from Legacy Image at 70800000 ...
   Image Name:   Linux-2.6.35.8
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    1323688 Bytes =  1.3 MB
   Load Address: a0008000
   Entry Point:  a0008000
   Verifying Checksum ... OK
   Loading Kernel Image ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:37:26.760

您需要验证您的主板在 0xa0008000 处确实有 RAM，这是内核“加载地址”。U-Boot 可能会在图像挂起时尝试​​将图像复制到该内存区域。

[*根据您的评论，我假设您已验证物理地址 0xAXXXXXXX 处不存在主存储器。*]

您正在使用的 uImage 文件是使用该`mkimage`实用程序从 zImage 文件创建的。

您可能必须手动编辑看起来像的行

```
zreladdr-y     := 0xa0008000 
```

在`arch/arm/mach-XXX/Makefile.boot`你的董事会。约定是该地址应该是物理 RAM 的基址加上 0x8000 (32K) 的偏移量。然后调整文件中的其他值。删除该`zImage`文件并为内核执行另一个*make*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T08:24:52.983

在为 Rockchip 的 rk3288 构建 3.20 开发内核时，我发现使用 LZO 图像压缩会使设备在“启动内核”时挂起。我认为这是因为构建主机 LZO 和部署的解压缩代码之间的版本不匹配，因此任何压缩算法都可能发生这种情况。在我的情况下切换到 gzip 修复它。

这只是我对为什么更改压缩算法会产生可引导内核的假设。如果我错了，请纠正我。

# tsql - 上一行的 TSQL 累积列

> ID：12543127
> 
> 赞同：2
> 
> 时间：2012-09-22T10:55:38.140
> 
> 标签：tsql, sql-server-2008-r2, cumulative-sum

> **可能重复：**
> [在 SqlServer 中计算运行总计](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)

我需要使用前一行中的值来生成累积值，如下所示。对于 2000 年的每个代码，起始基数始终为 100。我需要使用 tsql 代码来实现这一点。

```
id                Code              Yr             Rate           Base        

1                   4               2000           5              100                                  
2                   4               2001           7              107 (100+7)             
3                   4               2002           4              111 (107+4)                              
4                   4               2003           8              119 (111+8)
5                   4               2004           10             129 (119+10)
6                   5               2000           2              100
7                   5               2001           3              103 (100+3)
8                   5               2002           8              111 (103+8)
9                   5               2003           5              116 (111+5)
10                  5               2004           4              120 (116+4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:38:31.817

好的。我们有这样的表 CREATE Table MyTbl(id INT PRIMARY KEY IDENTITY(1,1), Code INT, Yr INT, Rate INT) 我们想通过代码计算累积值。所以我们可以像这样使用查询：

1）递归（需要更多资源，但输出结果如示例所示）

```
with cte as
(SELECT *, ROW_NUMBER()OVER(PARTITION BY Code ORDER BY Yr ASC) rn
FROM MyTbl),

recursion as
(SELECT id,Code,Yr,Rate,rn, CAST(NULL as int) as Tmp_base, CAST('100' as varchar(25)) AS Base FROM cte
WHERE rn=1
UNION ALL
SELECT cte.id,cte.Code,cte.Yr,cte.Rate,cte.rn, 
CAST(recursion.Base as int),
CAST(recursion.Base+cte.Rate as varchar(25))
FROM recursion JOIN cte ON recursion.Code=cte.Code AND recursion.rn+1=cte.rn
)

SELECT id,Code,Yr,Rate, 
CAST(Base as varchar(10))+ISNULL(' ('+ CAST(Tmp_base as varchar(10))+'+'+CAST(Rate as varchar(10))+')','') AS Base 
FROM recursion
ORDER BY 1

OPTION(MAXRECURSION 0) 
```

2）或者我们可以使用更快的查询而不使用递归。但结果是不可能生成像'107（100+7）'这样的字符串（只有像'107'这样的字符串）

```
SELECT *,

    100 +
    (SELECT ISNULL(SUM(rate),0) /*we need to calculate only the sum in subquery*/
    FROM MyTbl AS a
    WHERE
        a.Code=b.Code /*the year in subquery equals the year in main query*/
        AND a.Yr<b.Yr /*main feature in our subquery*/
        ) AS base

FROM MyTbl AS b 
```

# unit-testing - 如何在单元测试库（Windows 商店应用程序）中添加命名空间？

> ID：12543130
> 
> 赞同：0
> 
> 时间：2012-09-22T10:55:57.070
> 
> 标签：unit-testing, using, windows-store-apps

我有一些测试课

```
using System;
using Microsoft.VisualStudio.TestPlatform.UnitTestFramework;
using Praktyka.Models;

namespace PraktykaTest
{
    [TestClass]
    public class PictureManagerTest
    {
        [TestMethod]
        public void LoadImagesTest()
        {
           var pic = new PictureManager();
            pic.LoadImages(new List<String>
                                               {
                                                   "1.jpg",
                                                   "2.jpg"
                                               });

          // Assert.AreEqual(@"dataImages\1.jpg",pic.Current().UriSource);
           Assert.AreEqual("test","test");
        }
    }
} 
```

我有编译错误

```
The type or namespace name 'List' could not be found (are you missing a using directive or an assembly reference?) 
```

和

```
Cannot initialize object of type 'List<string>' with a collection initializer 
```

如何添加参考以正确使用 Lists ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:04:14.240

首先，添加对`System.Collections.Generic`命名空间的引用以获取通用 List<> 类。然后尝试重新编译。

# objective-c - 在 NSStatusItem 中使用 NSProgressIndicator

> ID：12543134
> 
> 赞同：3
> 
> 时间：2012-09-22T10:56:35.270
> 
> 标签：objective-c, macos, cocoa, nsstatusitem, nsprogressindicator

我正在使用此代码（受此处其他问题的启发）：

```
- (void)showProgressIndicator {

    if (statusItem) {

        NSLog(@"wassup");
        NSView *progressIndicatorHolder = [[NSView alloc] init];
        NSProgressIndicator *progressIndicator = [[NSProgressIndicator alloc] init];
        [progressIndicator setBezeled: NO];
        [progressIndicator setStyle: NSProgressIndicatorSpinningStyle];
        [progressIndicator setControlSize: NSSmallControlSize];
        [progressIndicator sizeToFit];
        [progressIndicator setUsesThreadedAnimation:YES];
        [progressIndicatorHolder addSubview:progressIndicator];
        [progressIndicator startAnimation:self];
        [statusItem setView:progressIndicatorHolder];
        [progressIndicator setNextResponder:progressIndicatorHolder];
        [progressIndicatorHolder setNextResponder:statusItem];
    }
} 
```

不幸的是，一旦此代码运行，状态项（最初显示图像）就会消失......为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:48:50.770

您可能需要在其超级视图中显式设置`frame`on `progressIndicatorHolder`then center `progressIndicator`，例如：

```
CGRect holderRect = progressIndicatorHolder.bounds;
CGRect indicatorRect = progressIndicatorHolder.frame;
indicatorRect.origin.x = (holderRect.size.width - indicatorRect.size.width)/2.0f;
indicatorRect.origin.y = (holderRect.size.height - indicatorRect.size.height)/2.0f;
progressIndicator.frame = indicatorRect; 
```

作为替代方案，如果您发现想要进行更复杂的布局，您可以`NSStatusItem`从 nib 加载 的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:35:20.087

以下代码对我有用。

```
progressIndicator = [[NSProgressIndicator alloc] init];

[progressIndicator setBezeled: YES];
[progressIndicator setStyle: NSProgressIndicatorSpinningStyle];
[progressIndicator setControlSize: NSSmallControlSize];
[progressIndicator sizeToFit];
[progressIndicator setUsesThreadedAnimation:YES];

oldView = [statusItem view];
[statusItem setView:progressIndicator];

[progressIndicator sizeToFit];
[statusItem setView:progressIndicator];
[progressIndicator startAnimation:self]; 
```

请注意 progressIndicatorHolder 没有在任何地方设置。

# message - 如何在 CL 程序中显示文件的底部显示消息？

> ID：12543135
> 
> 赞同：1
> 
> 时间：2012-09-22T10:56:46.633
> 
> 标签：message, ibm-midrange

假设已在 CL 程序中声明了一个显示文件。它接受一些用户输入并对其进行一些验证。如果验证失败，将在显示文件的底部显示一条消息。是否有可能在 CL 中实现这一点？我曾尝试使用 MSGTYPE(*DIAG) 的 SNDPMMSG，但该消息仅在程序终止后显示，而不是在执行期间显示文件上。

要发送的消息是从消息文件中检索的，因此使用字段显示消息不适用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T00:31:00.337

通常我们使用消息子文件来实现您上面的要求。它可以在 CL 和 RPG 的显示文件中完成

对于 CL 示例，您可以在此处阅读[http://www.mcpressonline.com/cl/the-cl-corner-letting-the-user-know-what-s-right-and-wrong.html](http://www.mcpressonline.com/cl/the-cl-corner-letting-the-user-know-what-s-right-and-wrong.html)。您可以搜索“cl 程序消息子文件”以获取其他示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:36:08.833

在显示文件 DDS 中定义一个 75 个字符的字段。称之为消息。在您的 CL 中执行以下操作：

```
if (&option *ge '35') do
  CHGVAR &MESSAGE 'Invalid option chosen'
  goto getOption
enddo 
```

# python - Python：将函数名称和参数列表传递给类实例

> ID：12543137
> 
> 赞同：0
> 
> 时间：2012-09-22T10:57:07.167
> 
> 标签：python

我已经定义了一个类，它采用 [fname1,[parameters1],fname2,[parameters2],...] 形式的列表作为创建实例的参数。

这个想法是让实例一次执行列表中的所有函数，将它们各自的参数传递给它们——这工作得很好，但我想出的实现非常难看。它看起来像这样：

```
# (The input list is split up and transformed into two lists -
# one containing the function names as strings, the other one containing tuples)
# (It then runs a for-loop containing the following statement)

exec '%s%s'%(fname[i],repr(parameter_tuple[i])) 
```

哪个输出并运行'fname（parameters，more_parameters，and，so，on）'，就像它应该做的那样。

我不知道为什么，但是自从我编写了这个代码后，我因此认为我应该为此受到一次非常好的打击......虽然它有效，但我只**知道**必须有一个不那么丑陋的实现。有谁愿意帮我看看吗？或者也许是为了打败我？;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:59:57.500

如果可以的话，这里最简单的答案是简单地传递函数而不是函数名，然后做一个简单的：

```
for function, params in zip(functions, parameters):
    function(*params) 
```

请注意我使用`zip()`来一​​次循环两个列表。这是比循环索引更 Pythonic 的选项。

或者，或者，使用[`itertools.starmap()`](http://docs.python.org/library/itertools.html#itertools.starmap).

如果你真的不能直接传递函数，那就更难了。一方面，任何依赖变量名称的解决方案本质上都是脆弱的，因此最好的选择是创建一个从函数名称到函数的显式字典，然后查找函数。

否则，我建议使用该[`inspect`](http://docs.python.org/library/inspect.html)模块来查找您想要的功能。例如：

```
import inspect
import sys

def some_function():
       ...

print(dict(inspect.getmembers(sys.modules[__name__], inspect.isfunction))) 
```

产生：

```
{'some_function': <function some_function at 0x7faec13005a0>} 
```

但是请注意，这种方法的效率要低得多，而且更加迂回。最好的答案仍然是传递函数本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:04:52.567

这是一个函数，它接受一个函数列表（不是函数名）和一个参数列表（或元组）：

```
def callmany(funs, funargs):
    return [f(*args) for (f,args) in zip(funs, funargs)] 
```

它返回一个结果列表，其中结果中的第一个元素是使用 funargs 中的第一个参数列表调用 funs 中的第一个函数的结果。像这样：

```
callmany([len, range], [["hello"], [1, 10]])
>> [5, [1, 2, 3, 4, 5, 6, 7, 8, 9]] 
```

# blackberry-webworks - 使用 javascript 在 Blackberrywebworks 中检索 Blackberry OS

> ID：12543138
> 
> 赞同：0
> 
> 时间：2012-09-22T10:57:16.673
> 
> 标签：blackberry-webworks

如何使用 javascript 在 Blackberrywebworks 中检索 Blackberry OS 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:44:23.080

只需使用`blackberry.system.softwareVersion`并且不要忘记添加`<feature id="blackberry.system" />`到您的 config.xml

你可以在这里找到完整的文档 [https://developer.blackberry.com/html5/apis/blackberry.system.html#.softwareVersion](https://developer.blackberry.com/html5/apis/blackberry.system.html#.softwareVersion)

# asp.net - 使用 ASP.NET 表单身份验证时如何获取当前登录用户的用户 ID？

> ID：12543141
> 
> 赞同：0
> 
> 时间：2012-09-22T10:57:51.167
> 
> 标签：asp.net, silverlight, silverlight-4.0, login, userid

我目前在 ASP.NET 中遇到问题（使用 Silverlight 4）。我需要获取`UserID`当前登录用户的身份，（我正在使用表单身份验证）。我怎样才能得到这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:37:36.567

您可以创建自定义表单身份验证票并将其他数据写入票证。一旦通过身份验证，您就可以从票证中读取额外的价值。

在我的许多应用程序中，我倾向于将用户的 ID 和显示名称存储在其中，以避免每次请求都必须访问数据库，并且效果很好。

手动创建票证如下所示：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, userState.UserId,
                                                        DateTime.Now, DateTime.Now.AddDays(10),
                                                        rememberMe, userState.ToString());

string ticketString = FormsAuthentication.Encrypt(ticket);
HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, ticketString);
if (rememberMe)
    cookie.Expires = DateTime.Now.AddDays(10);

HttpContext.Response.Cookies.Add(cookie); 
```

您基本上可以传递两个值 - 名称参数（第二个）和用户数据。如果您想要用户名之外的数据，您可以使用 userdata 参数。

然后，当您需要读取数据时，请确保您首先经过身份验证，然后您可以读取用户数据：

```
if (this.User.Identity != null && this.User.Identity is FormsIdentity)                 
  userData = ((FormsIdentity)this.User.Identity).Ticket.UserData; 
```

您在 userData 中存储的内容完全取决于您。它可以是一个简单的值（例如您的用户 ID），也可以是更复杂的值，例如您可以在字符串之间序列化的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:02:37.813

If i am correct you want to pass UserID from web application to silverlight application.

1st step:Add a web service(.asmx/.svc) in web application create a operation contract for the same.

2nd step:In web service get userId and return the same.

3 step:Add service reference in silverlight app of web service created in web

4 th step call the method using async method.

here is the link which should help you [http://www.codeproject.com/Articles/37522/7-Simple-Steps-to-Connect-SQL-Server-using-WCF-fro](http://www.codeproject.com/Articles/37522/7-Simple-Steps-to-Connect-SQL-Server-using-WCF-fro)

# android - 在android中使用滚动视图时如何使图像大小适合屏幕

> ID：12543144
> 
> 赞同：1
> 
> 时间：2012-09-22T10:58:16.003
> 
> 标签：android, imageview, scrollview

我正在使用带有 wrap_content 的滚动视图和水平滚动视图中包裹的图像。图像的大小大于屏幕大小，内容溢出屏幕，启用滚动。我怎样才能让它适合屏幕并且只在我想要的时候启用滚动（当我缩放图像时）。

PS：webview 不符合我的要求。

# ruby-on-rails - 使用 nginx 将 Wordpress 作为子文件夹添加到现有的 rails 站点

> ID：12543145
> 
> 赞同：2
> 
> 时间：2012-09-22T10:58:23.407
> 
> 标签：ruby-on-rails, nginx, subdirectory

我有一个使用 rails (unicorn) 和 nginx 的正在运行的应用程序。我的客户要求我将 wordpress 博客作为子文件夹移动到现有服务器上。假设当前站点是 www.example.com。博客链接应该是 www.example.com/blog 我没有成功配置 nginx 到服务器 wordpress 博客。我当前的 nginx 配置是：

```
upstream app_server_dinchi {
  server unix:/tmp/.sock fail_timeout=0;
}

server {
  listen 80;
  server_name example.com www.example.com;

  keepalive_timeout 5;
  root /home/ubuntu/websites/example_staging/current/public;

  try_files $uri/index.html $uri.html $uri @app;

  location @app {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://app_server_dinchi;
 }

 #blog configuration
 location /blog {
    root /home/ubuntu/websites/blog.example.com;
    index index.php;
 }

 location ~ /blog/.+\.php$ {
   fastcgi_pass   127.0.0.1:9000;
   fastcgi_param  SCRIPT_FILENAME       /home/ubuntu/websites/blog.example.com$fastcgi_script_name;
 }

 location ~* \.(js|css|png|jpg|gif)$ {
    if ($query_string ~ "^[0-9]+$") {
      expires max;
      break;
    }
  }

 error_page 500 502 503 504 /500.html;
 location = /500.html {
   root /home/ubuntu/websites/example_staging/current/public;
 }

} 
```

当我尝试访问 example.com/blog 时，我收到 404。有人可以指点我如何添加此子文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T01:11:55.247

我认为您正在转发给@app，而它应该是@app_server_dinchi

# asp.net-mvc - 计划将 https 用于 MVC 网站（使用域/子域） - 最佳实践？

> ID：12543146
> 
> 赞同：0
> 
> 时间：2012-09-22T10:58:31.463
> 
> 标签：asp.net-mvc, ssl, https, subdomain, orchardcms

我必须建立一个新的 MVC 4 网站，在我的默认页面中，我有一个用于记录用户的链接。我知道 MVC 能够更改显示页面内的显示窗口。

为了安全起见，我必须考虑使用 https：

*   客户的登录视图。
*   联系人的登录视图，可将他们的邮件发送到内部邮件服务器。
*   登录视图以在内部邮件服务器中打开邮件。

我想知道关于域名拆分（布局）的最佳做法应该是什么，我是否需要仅使用主域名并仅使用 1 个 SSL 证书进行保护，或者可能必须使用多个子域，如 *.mydomain.com 并使用每个子域 1 个证书。

解释更多：

当 URL 使用相同的域名更改时，SSL 的行为应该是什么。

例如，可以使用以下方法来达到相同的目的：

[https://www.domain.com/userlogin.aspx](https://www.domain.com/userlogin.aspx)和[https://www.domain.com/contact.aspx](https://www.domain.com/contact.aspx)可能应该使用相同的证书，但如果我们使用 par 示例：

[https://www.admin.domain.com/](https://www.admin.domain.com/)和 [https://www.mail.domain.com/](https://www.mail.domain.com/)必须使用两个不同的证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:56:49.450

您是否考虑过使用区域？是否必须拥有，我引用：**3 或 4 个子域**？如果没有，那么你可以使用区域，这可能会导致你有这样的事情：

```
site.com/area/controller/action

site.com/customer/account/login
site.com/admin/users 
```

无论如何，**我的**建议是看看 MVC 中的区域。

*   [ASP.NET MVC 2 - 领域](http://www.asp.net/mvc/videos/mvc-2/how-do-i/aspnet-mvc-2-areas)。
*   [在 ASP.NET MVC 应用程序中使用区域](http://www.codeguru.com/csharp/.net/net_asp/mvc/article.php/c20227/Using-Areas-in-ASPNET-MVC-Application.htm)。
*   [Asp.Net MVC 2 领域](http://elegantcode.com/2010/03/13/asp-net-mvc-2-areas/)。
*   [ASP.NET MVC 区域 - 构建应用程序的更好方法](http://sankarsan.wordpress.com/2012/04/14/asp-net-mvc-areasa-better-way-to-structure-the-application/)。

这些链接应该让您快速了解您可以对区域进行哪些操作。同样，**如果不需要**拥有多个子域，您可以使用一个证书来代替。

# android - Android：启用了多项选择和子项的 ListView

> ID：12543147
> 
> 赞同：1
> 
> 时间：2012-09-22T10:58:36.183
> 
> 标签：android

我正在尝试将我的联系人放在列表视图中。现在我知道 using`simple_list_item_multiple_choice`可以让我选择多个联系人，但它只查看没有数字的姓名。

另一方面，`simple_list_item_2`可用于显示姓名和号码，但支持仅选择一个联系人。

有没有将它们结合起来的模板？如果没有，我如何构建具有这两个功能的自定义列表？

编辑：这是我正在使用的代码

```
CursorLoader cl = new CursorLoader(this,ContactsContract.CommonDataKinds.Phone.CONTENT_URI, PROJECTION, null, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME+" ASC");
Cursor c = cl.loadInBackground();
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_multiple_choice, // Use a template
                                                         // that displays a
                                                         // text view
                    c, // Give the cursor to the list adapter
                    new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME},
                    new int[] { android.R.id.text1},0); 

setListAdapter(adapter); 
```

这里 SimpleCursorAdapter 的第二个参数是，`simple_list_item_multiple_choice`但它只支持处理`android.R.id.text1`. 所以我只能使用项目，不能使用子项目。

但是在下面的代码中

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_expandable_list_item_2, // Use a template
                                                         // that displays a
                                                         // text view
                    c, // Give the cursor to the list adapter
                    new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, ,ContactsContract.CommonDataKinds.Phone.NUMBER},
                    new int[] { android.R.id.text1,android.R.id.text2},0); 
```

我可以同时给它`ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME`and`NUMBER`写成`android.R.id.text1`and `android.R.id.text2`，但不能使用多项选择功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:17:42.097

正如Dipu所说，您应该制作自己的自定义布局。要显示姓名和联系人，您需要两个文本视图和一个用于检查的复选框。

您可以从本教程开始编码：

[http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html](http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html)

向 country_info.xml 添加一个文本视图将解决您的问题。

**添加**

要使用自定义列表视图布局，您必须实现自己的适配器。

本教程（2\. 自定义 ArrayAdapter 示例）将帮助您弄清楚如何做到这一点。

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:04:41.223

Heejin 提供的答案非常好，但实现自定义 ArrayAdaptor 并不重要。我只需要编写一个自定义布局并将其发送给`SimpleCursorAdaptor`构造函数。

自定义布局表示列表视图中每个项目的布局。我需要每一行包含一个`CheckedTextView`和另一个小`TextView`的子项。所以我制作了一个名为 row_view.xml 的布局，其内容如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <CheckedTextView
        android:id="@+id/checkedTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:checkMark="?android:attr/listChoiceIndicatorMultiple"
        android:text="CheckedTextView" />

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

然后我刚刚在构造函数中使用了它

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.row_view, // Use a template
                                                         // that displays a
                                                         // text view
                    c, // Give the cursor to the list adapter
                    new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone.NUMBER},
                    new int[] { R.id.checkedTextView, R.id.textView},0); 

setListAdapter(adapter); 
```

这是完整的代码

```
public class MultipleContacts extends ListActivity implements OnItemClickListener {
    private static final String[] PROJECTION = new String[] {
        ContactsContract.CommonDataKinds.Phone._ID
        ,ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME
        ,ContactsContract.CommonDataKinds.Phone.NUMBER
    };

    SimpleCursorAdapter adapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.multiple_contacts);
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        getListView().setOnItemClickListener(this);
        // Get a cursor with all people

        CursorLoader cl = new CursorLoader(this,ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                PROJECTION, null, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME+" ASC");

        Cursor c = cl.loadInBackground();
        adapter = new SimpleCursorAdapter(this,
                R.layout.row_view, // Use a template
                                                     // that displays a
                                                     // text view
                c, // Give the cursor to the list adapter
                new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone.NUMBER},
                new int[] { R.id.checkedTextView, R.id.textView},0); 

        setListAdapter(adapter);
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        //what to do when an item is clicked
        CheckedTextView checkedTextView = (CheckedTextView) v.findViewById(R.id.checkedTextView);
        Toast.makeText(this, checkedTextView.getText(), Toast.LENGTH_SHORT).show();
    }   
} 
```

请注意，我有两种布局，一种用于列表视图本身（称为`multiple_contacts`），此处提供的布局（称为`row_view`）是列表视图中每个项目的布局。我所需要的`multiple_contacts`就是写`setContentView(R.layout.multiple_contacts);`

# iphone - iphone：使用 uiwebview 无法播放 youtube 视频

> ID：12543151
> 
> 赞同：-1
> 
> 时间：2012-09-22T10:59:18.997
> 
> 标签：iphone, objective-c, video

我想使用 uiwebview 播放你的视频，我使用以下代码播放视频

```
[self playVideo:@"http://www.youtube.com/watch?v=WL2l_Q1AR_Q" frame:CGRectMake(20, 70, 280, 250)];

- (void)playVideo:(NSString *)urlString frame:(CGRect)frame
{
    NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";
    NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];
    [self.view addSubview:videoView];
    [videoView release];
    NSLog(@"%@",html);
} 
```

但我无法在我的模拟器中观看视频。

谁能说我在哪里犯了错误？提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:01:06.070

您的代码在真实设备上运行良好。我在我的 iPhone 4 iOS 5.0 上对其进行了测试。我认为问题在于模拟器，而不是您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:09:37.230

值得注意的是，这段代码只能在设备上运行，不能在模拟器中运行。

```
- (void)playVideo
    {
        float width = 200.0f;
            float height = 200.0f;

            NSString *youTubeURL = @"http://www.youtube.com/watch?v=ZiIcqZoQQwg";

            UIWebView *wv = [[[UIWebView alloc] init] autorelease];
            wv.frame = CGRectMake(60, 60, width, height);

            NSMutableString *html = [[[NSMutableString alloc] initWithCapacity:1] autorelease];
            [html appendString:@"<html><head>"];
            [html appendString:@"<style type=\"text/css\">"];
            [html appendString:@"body {"];
            [html appendString:@"background-color: transparent;"];
            [html appendString:@"color: white;"];
            [html appendString:@"}"];
            [html appendString:@"</style>"];
            [html appendString:@"</head><body style=\"margin:0\">"];
            [html appendFormat:@"<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\"", youTubeURL];
            [html appendFormat:@"width=\"%0.0f\" height=\"%0.0f\"></embed>", width, height];
            [html appendString:@"</body></html>"];

            [wv loadHTMLString:html baseURL:nil];

            [self.view addSubview:wv]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:14:10.867

只需使用此代码向您展示Tube 视频：！！//首先`IBOutlet UIWebView *webView`在(.h)文件中初始化和合成

```
 [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=ZiIcqZoQQwg"]]]; 
```

# java - java swing中的html文件浏览

> ID：12543154
> 
> 赞同：1
> 
> 时间：2012-09-22T10:59:51.180
> 
> 标签：java, swing, html-parsing

我以 Java swing 形式显示 Html 文件数据。内容正在显示，但某些格式受到干扰。正在显示图像，但格式受到干扰。并且超链接不起作用，您能建议我的代码吗，我正在使用以下代码。setContentType 方法有问题吗

```
 File htmlFile = new File("e:/test/help4t.htm");
             htmlPane = new JEditorPane();
            htmlPane.setContentType("text/html");
        htmlPane.setPage(htmlFile.toURI().toURL());
         //URL url= new URL("http://www.lawcrux.com");

       //  htmlPane.setPage(url);
         htmlPane.addHyperlinkListener(this);

        JScrollPane jsp= new JScrollPane(htmlPane);

                cp.add(jsp);
        jsp.setBounds(750, 50, 600, 600);  

        } catch (Exception ex) {
        JOptionPane.showMessageDialog(null, "exception is" + ex);
        } 
```

请帮忙

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:11:45.123

好吧，`JEditorPane`只支持 HTML 3.2。

即使上面说了；我不建议使用没有库（或您自己的库 - 除非那是您的项目）来帮助您渲染 html。看看（纯Java库）：

*   [Lobo 项目](http://lobobrowser.org/cobra/getting-started.jsp)（Lobo 项目旨在开发一个完全用 Java 编写的可扩展浏览器和 RIA 平台，不仅支持 HTML 和 Javascript，还支持渲染任意富互联网应用程序 (RIA) 语言）

*   [Ekit](http://www.hexidec.com/ekit.php)（Ekit 是一个免费的开源 Java HTML 编辑器小程序和应用程序。Ekit 独立版还允许加载和保存 HTML，以及序列化并保存为 RTF。它正在接近其第一个生产版本。）

*   [DJ 项目](http://djproject.sourceforge.net/ns/index.html)（NativeSwing 库允许将一些本地组件轻松集成到 Swing 应用程序中，并提供一些本地实用程序来增强 Swing 的 API。它由一个框架库和一个基于 SWT 的实现组成，它提供了许多丰富的组件。这个基于 SWT 的实现的关键组件当然是一个丰富的 Web 浏览器和一个 Flash 播放器，尽管它还提供了一个多媒体播放器、一个 HTML 编辑器和一个语法荧光笔。）

*   [CSSBox](http://cssbox.sourceforge.net/)（CSSBox 是一个用纯 Java 编写的 (X)HTML/CSS 渲染引擎。它的主要目的是提供有关渲染的页面内容和布局的完整且可进一步处理的信息。但是，它也允许显示渲染的文档。）

*   [RealObjects](http://www.realobjects.com/products/project-martha/)（虽然不是免费的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T11:07:37.997

你为什么不使用`Jsoup`它，它提供了一个非常方便的 API 来**提取和操作数据。**

**请参阅此链接：**

[http://jsoup.org/](http://jsoup.org/)

# python - 在服务器将cookie设置为客户端之前获取django会话ID

> ID：12543163
> 
> 赞同：2
> 
> 时间：2012-09-22T11:00:38.403
> 
> 标签：python, django, session

当浏览器第一次请求服务器时，django 会生成一个 session obj，然后写入一个 set cookie header 来设置 session id 作为一个 cookie 响应。我的问题是如何在没有访问请求的情况下获取这个新生成的 sess id。COOKIES，请注意，此时，客户端不知道 sessid，因为尚未发送第一个响应。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:05:06.830

尝试

```
request.session.session_key 
```

如果它不起作用，`request.session.save()`请先做

# r - 参考类、制表符补全和强制方法定义

> ID：12543166
> 
> 赞同：7
> 
> 时间：2012-09-22T11:01:03.727
> 
> 标签：r, s4, reference-class

我目前正在使用参考类编写一个包。我在阅读各种资料时遇到了一个问题：

[R 参考类中的方法初始化](https://stackoverflow.com/questions/7331518/method-initialisation-in-r-reference-classes)

[无法在 Snowfall 中可靠地使用 RefClass 方法](https://stat.ethz.ch/pipermail/r-devel/2011-June/061260.html)

我认为是因为引用方法并非全部复制到类中的每个对象，而是在第一次访问时被复制。

[https://stat.ethz.ch/pipermail/r-devel/2011-June/061261.html](https://stat.ethz.ch/pipermail/r-devel/2011-June/061261.html)

例如定义：

```
test <- setRefClass("TEST",
                fields = list( a = "numeric"),
                methods = list(
                   addone = function(){
                                        a <<- a+1
                                      },
                   initialize = function(){
                                            a <<- 1
                                          }
                              )
               )

example <- test$new() 
```

所以 example 是 class 的一个新对象`TEST`。`example$`在控制台中键入和制表符给出

```
> example$
# example$.->a         example$.refClassDef example$.self        
# example$a            example$initialize 
```

因此该方法`addone`未作为选项提供。但是可以调用：

```
example$addone() 
```

现在标签再次显示

```
# > 
# > example
# Reference class object of class "TEST"
# Field "a":
# [1] 2
# > example$
# example$.->a         example$.refClassDef example$.self        
# example$a            example$addone       example$field        
# example$initialize   example$show 
```

所以现在`addone`和`field`和`show`作为选项呈现。

Martin Morgan 建议在上述链接之一中强制定义方法。这很好用

```
test <- setRefClass("TEST",
                fields = list( a = "numeric"),
                methods = list(
                   addone = function(){
                                        a <<- a+1
                                      },
                   initialize = function(){
                                            a <<- 1
                                            .self$addone #force definition
                                          }
                              )
               )

example <- test$new() 
```

所以现在制表符给出：

```
# > example$
# example$.->a         example$.refClassDef example$.self        
# example$a            example$addone       example$initialize 
```

我的一些课程有超过 30 种方法，所以我想尽可能简洁地做到这一点。我已经定义：

```
test <- setRefClass("TEST",
                fields = list( a = "numeric"),
                methods = list(
                   addone = function(){
                                        a <<- a+1
                                      },
                   initialize = function(){
                      a <<- 1
                      eval(parse(text=paste0('.self$',ls(test$def@refMethods))))
                                          }
                              )
               )

example <- test$new() 
```

制表符现在给出：

```
# > example$
# example$.->a         example$.refClassDef example$.self        
# example$a            example$addone       example$callSuper    
# example$copy         example$export       example$field        
# example$getClass     example$getRefClass  example$import       
# example$initFields   example$initialize   example$show         
# example$trace        example$untrace 
```

虽然这有效，但感觉有点笨拙。也`test$def@refMethods`被使用而不是`getRefClass("TEST")$def@refMethods`这样，感觉有点不对劲。以前有没有人处理过这个问题。

有没有更好的方法来解决问题？如果问题过于冗长，感谢您的任何建议和道歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T15:59:35.900

我想知道你的目标是什么？功能名称与选项卡完成一起显示？那么值得在 R-devel 邮件列表中发布一个功能请求。原始场景的处理更优雅，`usingMethods`如`?setRefClass`. 持续的黑客攻击可能是

```
initialize = function(...) {
    methods <- getRefClass(class(.self))$methods()
    eval(parse(text=paste0(".self$", methods)))
    callSuper(...)
} 
```

选项卡完成可以通过`.DollarNames`在`utils`包中自定义，所以

```
.DollarNames.TEST <- function(x, pattern)
    grep(pattern, getRefClass(class(x))$methods(), value=TRUE) 
```

也许可以为此在类层次结构的基础上编写 S3 方法？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-03T09:50:38.840

我知道这是一个老问题，但在谷歌上搜索 refClass 选项卡完成时它仍然是最重要的条目，所以我只添加一个更新：

不要像 Martin 建议的那样在 .DollarNames 函数中使用 grep，而是使用 utils 包中的 findMatches，因为它可以更好地与不同的 Rgui 配合使用（grep 将在点击选项卡时删除您部分输入的名称）

```
.DollarNames.TEST <- function(x, pattern){
    utils:::findMatches(pattern, getRefClass(class(x))$methods())
} 
```

这也是列表和 data.frames 内部处理选项卡完成的方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T01:51:46.840

@Martin Morgan 指出这被称为制表符完成。该软件包`rcompletion`和后来`rcompgen`的任务是实现这一目标。他们现在已经搬到`utils`.

[r完成更新](http://r.789695.n4.nabble.com/R-R-pkgs-rcompletion-update-td815363.html)

我查看了代码，`completion.R`并从中可以确定`utils:::.DollarNames.environment`正在处理参考类的选项卡完成。

[完成.R](http://svn.r-project.org/R/trunk/src/library/utils/R/completion.R)

重新定义函数似乎实现了tab补全：

```
assignInNamespace( x = ".DollarNames.environment",
                     function(x, pattern = "") {
    y <- NULL
    if(isS4(x) && !is.null(x[['.refClassDef']])){
      if(.hasSlot(x$.refClassDef,'refMethods')){
        y<-x$.refClassDef@refMethods
        y<-ls(y, all.names = TRUE, pattern = pattern)
      }
    }
    x<-ls(x, all.names = TRUE, pattern = pattern)
    unique(c(x,y))
                                               }
,ns = "utils") 
```

需要注意的一些事项：

*   我只会将其用于我自己的用途。目前我正在调试和记录一个包。我有一些冗长的方法名称，并且无法准确记住它们是什么，因此制表符完成将有很大帮助。

*   不赞成`assignInNamespace`在包装中使用（如果未禁止）请参阅`?assignInNamespace`。

*   强制定义方法更为可取。

# sql-server - 传递 TSQL 函数数据库名称

> ID：12543168
> 
> 赞同：3
> 
> 时间：2012-09-22T11:01:24.613
> 
> 标签：sql-server, tsql, function, dynamic

有什么方法可以将数据库名称传递给 tsql 函数，以便它可以在该数据库上执行选择

```
ALTER function [dbo].[getemailjcp]
(
@DB_Name varchar(100)
)
Returns varchar(4000)
AS
BEGIN
DECLARE @out varchar (4000);
DECLARE @in varchar (1000);
Set @out = 
(select substring
((select ';' + e.email from 
(SELECT DISTINCT ISNULL(U.nvarchar4, 'NA') as email 
FROM [@DB_Name].dbo.Lists ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:48:43.740

为了创建动态 SQL 语句，您应该存储过程。例如：

```
DECLARE @DynamicSQLStatement NVARCHAR(MAX)
DECLARE @ParmDefinition NVARCHAR(500)
DECLARE @FirstID BIGINT

SET @ParmDefinition = N'@FirstID BIGINT OUTPUT'
SET @DynamicSQLStatement=N' SELECT @FirstID=MAX(ID) FROM ['+@DatabaseName+'].[dbo].[SourceTable]'

EXECUTE sp_executesql @DynamicSQLStatement,@ParmDefinition,@FirstID=@FirstID OUTPUT

SELECT @FirstID 
```

在这个例子中：

1.  @DatabaseName 是作为参数传递给您的过程。

2.  @FirstID 是输出参数——这个值可能是从你的过程中返回的。

在这里您可以找到有关“sp_executesql”的更多信息：

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T16:50:12.160

更好的解决方案可能是将“@DatabaseName”（一个字符变量）替换为：

“DB_NAME(<@DBId>)”。

然后，您可以继续传递数据库名称，但首先将它们转换为 fcn 中的 ID。如果使用“sp_executesql”来帮助防止 SQL 注入（“DB_NAME()”不是变量/不能被替换），也有点解决了在其中构建带有 char 变量的 SQL stmt 的矛盾。

所以你会有这个：

```
DECLARE @DynamicSQLStatement NVARCHAR(MAX)
DECLARE @ParmDefinition NVARCHAR(500)
DECLARE @FirstID BIGINT
DECLARE @DBId INT

SET @DBId = DB_ID(@Db_Name) --raise the proper security/robustness** concern if this doesn't resolve.

SET @ParmDefinition = N'@FirstID BIGINT OUTPUT'
SET @DynamicSQLStatement=N' SELECT @FirstID=MAX(ID) FROM ['+DB_NAME(@DBId)+'].[dbo].[SourceTable]' 
```

# android - 看不到适配器 gui

> ID：12543173
> 
> 赞同：0
> 
> 时间：2012-09-22T11:02:43.707
> 
> 标签：android

我创建了一个适配器，将一些消息文本设置为 textView 和一个简单的按钮，但仍然看不到该适配器的 GUI。

我没有任何错误，但在那之前的屏幕上仍然看不到适配器。

适配器代码：

```
public class messageDisplayAdapter extends ArrayAdapter {

public Context mContext;
private String message;
public AlertDialog alertDialog;
private int id;

public messageDisplayAdapter(Context context, int textViewResourceId, String message) {
    super(context, textViewResourceId);
    mContext = context;
    id = textViewResourceId;
    this.message=message;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row == null) {
     LayoutInflater inflater =LayoutInflater.from(this.mContext);
     row = inflater.inflate(R.layout.message, parent, false);
    }
   // final int itemPosition = position;
    TextView Item = (TextView) row.findViewById(R.id.textView );
    Button btn = (Button) row.findViewById(R.id.ButtonOk);
    btn.setOnClickListener( new View.OnClickListener() {
    public void onClick(View v) {
  // Toast.makeText(getApplicationContext(), "Toast from button"+                        //Colors[itemPosition], Toast.LENGTH_SHORT).show();    
  }
 });
    return row;

} 
```

以及显示适配器的类：

```
 protected void onPostExecute(String result) {
    try {
        Dialog.dismiss();
        Intent intent = new Intent(this.context, Class.forName(this.newActivity));

        context.startActivity(intent);
        //finish();}

    } catch (ClassNotFoundException ex) {
      /*  messageDisplayAdapter messageDisplayAdapter = new messageDisplayAdapter(this.context, R.layout.message, "error on loading");
        messageDisplayAdapter.showMessage();
    */

     ListView lv =new ListView(this.context); 
    lv.setTextFilterEnabled(true);
    messageDisplayAdapter  listAdapter= new messageDisplayAdapter(this.context,R.layout.message,"error on loading");
   // listAdpter.setListAdapter(listAdapter); // on test
    lv.setAdapter(listAdapter); // on test

    }

} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:59:43.517

尝试在getView中给textView添加setText，如下

```
public class messageDisplayAdapter extends ArrayAdapter {

public Context mContext;
private String message;
public AlertDialog alertDialog;
private int id;

public messageDisplayAdapter(Context context, int textViewResourceId, String message) {
  super(context, textViewResourceId);
  mContext = context;
  id = textViewResourceId;
  this.message=message; 
}

public View getView(int position, View convertView, ViewGroup parent) {
  View row = convertView;
  if (row == null) {
   LayoutInflater inflater =LayoutInflater.from(this.mContext);
   row = inflater.inflate(R.layout.message, parent, false);
  }
 // final int itemPosition = position;
  TextView Item = (TextView) row.findViewById(R.id.textView );
  Item.setText(message); // Try This line
  Button btn = (Button) row.findViewById(R.id.ButtonOk);
  btn.setOnClickListener( new View.OnClickListener() {
  public void onClick(View v) {
// Toast.makeText(getApplicationContext(), "Toast from button"+                             //Colors[itemPosition], Toast.LENGTH_SHORT).show();    
  }
});
return row;

} 
```

另外请尝试遵循命名约定。

# javascript - IOS应用程序开发UI中的滚动条不起作用

> ID：12543184
> 
> 赞同：1
> 
> 时间：2012-09-22T11:04:10.213
> 
> 标签：javascript, html, css, ios, cordova

IOS 应用程序开发与电话差距。Myindex.html 代码（相关）如下：-

```
 <script type="application/javascript" src="iscroll.js"></script>
    <script>

        var myScroll;
        function loaded() {
            setTimeout(function () {
                       myScroll = new iScroll('edit');
                       }, 100);
        }
        window.addEventListener('load', loaded, false);
      ..
      ..
      </script>

    <style type="text/css">
    #toolHome,#toolEdit,#toolSetting,#toolMessage{
        position: fixed;
        width: 100%;
        height: 10%;
        display:table;
        z-index:20;
    }
    </style> 

</head>
<body id="bd">
    <div id="toolEdit" class="toolbar">
        <h1 id="pageTitle">Edit</h1>
        <a id="preButton" class="button" onclick="home()">Message List</a>
    </div>
    <div id="edit" title="Edit" ></div>
    <div id="bottomButtons" style="position:fixed;top:90%;width:100%;display:table;height:11%;z-index:20;display:none;"><a class="redButton buttomButton" style="width:22%;position:relative;top:4px" align="left" onclick="deleteList()"><img src="iui/t/default/trash.png" >&nbsp;Delete</a></div>
 </body> 
```

所以在这里， div 'toolEdit' 包含标题部分。div 'edit' 包含当内容超出可用空间时需要垂直滚动的内容部分。div 'bottomButtons' 是包含删除按钮的页脚。z-index 已为页眉和页脚提供，因此内容在页眉和页脚下方滑动。问题是，内容的底部在尝试向上滚动（位于页脚下方）时不会滚动，如果尝试使用页脚，则使其空白。

也尝试使用 iscroll 插件（显示在代码中），但它没有帮助。任何建议将不胜感激。提前致谢。

# wix - 维克斯。取消安装时回滚自定义操作

> ID：12543196
> 
> 赞同：5
> 
> 时间：2012-09-22T11:05:11.573
> 
> 标签：wix, installation, custom-action, rollback

我有一个自定义操作

```
<CustomAction Id="myActionId" BinaryKey="myAction" DllEntry="MySimpleAction" Execute="immediate" Return="check" />

<InstallExecuteSequence>
      <Custom Action="myActionId" After="InstallInitialize">CHECKBOXCOPYPROP=1</Custom>
</InstallExecuteSequence> 
```

我的自定义操作会备份和解析数据库。我需要在取消安装时进行回滚（删除数据库）。我做了：

```
<CustomAction Id="myActionId" BinaryKey="myAction" DllEntry="MySimpleAction" Execute="immediate" Return="check" />
<CustomAction Id="myActionRollbackId" BinaryKey="myActionRollback" DllEntry="MySimpleAction" Execute="rollback" Return="check" />

<InstallExecuteSequence>
      <Custom Action="myActionId" After="InstallInitialize">CHECKBOXCOPYPROP=1</Custom>
      <Custom Action="myActionRollbackId" Before="myActionId">CHECKBOXCOPYPROP=1</Custom>
</InstallExecuteSequence> 
```

但我有一个错误。

如果我这样做：

```
<CustomAction Id="myActionId" BinaryKey="myAction" DllEntry="MySimpleAction" Execute="immediate" Return="check" />
<CustomAction Id="myActionRollbackId" BinaryKey="myActionRollback" DllEntry="MySimpleAction" Execute="immediate" Return="check" />

<InstallExecuteSequence>
      <Custom Action="myActionId" After="InstallInitialize">CHECKBOXCOPYPROP=1</Custom>
      <Custom Action="myActionRollbackId" After="myActionId">CHECKBOXCOPYPROP=1</Custom>
</InstallExecuteSequence> 
```

我的自定义操作 myActionRollbackId 有效。

取消安装时如何运行回滚？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:24:52.920

在安装时运行并对数据库执行某些操作的自定义操作应该被推迟 ( `Execute='deferred'`)。其对应的回滚动作应该是`Execute='rollback'`。当您安排这些自定义操作时，应该首先执行回滚操作。

此外，请确保条件设置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T04:45:05.573

安装总是在事务中完成。当您启动安装程序时，它首先会创建一个称为安装脚本的内容，该脚本类似于安装时将执行的操作列表。当我们将一些自定义操作设置为**Execute="immediate"**时，它会立即执行，但是当我们将我们的操作设置为 **Execute="deferred"**时，它会添加到安装脚本中，因此回滚变得很容易。现在需要注意的一点是，我们可以在**Execute="immediate"**模式下访问 session，但是我们不能在 **Execute="deferred"**模式下访问 session。如果我们尝试访问会话，它将给出错误，在这种情况下，这可能是您错误的原因......

# matlab - 如何从matlab中具有相同大小的几个矩阵中选择出现率较高的值？

> ID：12543197
> 
> 赞同：1
> 
> 时间：2012-09-22T11:05:17.437
> 
> 标签：matlab, matrix

我想要一个执行以下操作的程序：

*   读取几个大小相同的矩阵（1126x1440 双精度）

*   选择每个单元格中出现次数最多的值（矩阵中的 i、j 相同）

*   将此值写入具有相同大小 1126x1440 的输出矩阵中相应的 i,j 位置，以便该输出矩阵在每个单元格中具有来自所有输入矩阵的相同位置的最常出现的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:48:39.653

基于@angainor 的回答，我认为有一种更简单的方法可以使用该`mode`函数。

```
nmatrices - number of matrices
n, m      - dimensions of a single matrix
maxval    - maximum value of an entry (99) 
```

首先将数据组织成一个维度为 [n X m X nmatrices] 的 3-D 矩阵。例如，我们可以生成以下 3-D 形式的随机数据：

```
CC = round(rand(n, m, nmatrices)*maxval); 
```

然后最频繁值的计算是一行：

```
B = mode(CC,3);   %compute the mode along the 3rd dimension 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:51:26.183

这是您需要的代码。我介绍了一些常量：

```
nmatrices - number of matrices
n, m      - dimensions of a single matrix
maxval    - maximum value of an entry (99) 
```

我首先使用 rand 生成示例矩阵。矩阵变为向量并连接在 CC 矩阵中。因此，CC 的维度是 [m*n, nmatrices]。CC 的每一行都包含所有矩阵的单独 (i,j) 值 - 您要分析的那些。

```
CC = [];
% concatenate all matrices into CC
for i=1:nmatrices
    % generate some example matrices
    % A = round(rand(m, n)*maxval);
    A = eval(['neurone' num2str(i)]);
    % flatten matrix to a vector, concatenate vectors
    CC = [CC A(:)];
end 
```

现在我们做真正的工作。我必须转置CC，因为matlab适用于基于列的矩阵，所以我想分析CC的各个列，而不是行。接下来，使用 histc 我在 CC 的每一列中找到最常出现的值，即在所有矩阵的 (i,j) 条目中。histc 计算 CC 每一列中落入给定箱（在您的情况下为 1:maxval）的值。

```
% CC is of dimension [nmatrices, m*n]
% transpose it for better histc and sort performance
CC = CC';
% count values from 1 to maxval in every column of CC
counts = histc(CC, 1:maxval); 
```

计数具有维度 [maxval, m*n] - 对于原始矩阵的每个 (i,j)，您都知道 1:maxval 中给定值的表示次数。现在要做的最后一件事是对计数进行排序并找出最常出现的计数。我不需要排序计数，我需要可以告诉我的排列，计数中的哪个条目具有最高值。这正是你想知道的。

```
% sort the counts. Last row of the permutation will tell us, 
% which entry is most frequently found in columns of CC
[~,perm] = sort(counts);

% the result is a reshaped last row of the permutation
B = reshape(perm(end,:)', m, n); 
```

B是你想要的。

# c# - 同一类中的多个组件属性，访问其中一个会触发全选

> ID：12543201
> 
> 赞同：0
> 
> 时间：2012-09-22T11:05:52.820
> 
> 标签：c#, nhibernate

我有一个具有不同属性的类，每个属性都映射到不同的复杂类型（组件）。问题是当我尝试访问其中一个属性时，NHibernate 也会导致获取另一个组件的列，尽管这两个属性都启用了延迟加载。

```
var user = _session.Load<User>(userId);
user.PasswordInfo.Password; /* This causes to load other properties from another
       component property, e.g. user.MemebershipInfo.IsOnline */ 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:10:27.847

这是预期的行为。

一次加载所有惰性属性。此功能背后的想法是，您将主要将其用于 blob 属性或大多数工作流中未使用的属性组。

这是一件好事。否则，具有多个惰性属性的类将获得许多数据库调用，只是为了显示这些属性的值。

# classpath - Windows 上的 RxTx 安装 java.lang.NoClassDefFoundError: gnu/io/CommPort

> ID：12543202
> 
> 赞同：2
> 
> 时间：2012-09-22T11:06:00.523
> 
> 标签：classpath, java, rxtx

我放入`rxtxcomm.jar`文件`jre/lib/ext`夹，但我仍然得到`NoClassDefFoundError`这个文件夹不是自动进入全局类路径吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:29:59.837

是的，它会自动进入类路径，但 RXTXcomm 使用 JNI /native 外部库（.so 和 .dll 文件），在命令行中运行程序时必须提供它们的路径：

```
java -jar yourprogram.jar -Djava.library.path="PATH_TO_EXTERNAL_LIBRARIES" 
```

对于 Linux：

假设您将[rxtx.zip](http://rxtx.qbang.org/pub/rxtx/rxtx-2.1-7-bins-r2.zip)解压到 /home/user/

如果您有 32 位 x86 平台：

> PATH_TO_EXTERNAL_LIBRARIES = /home/user/Linux/i686-unknown-linux-gnu/

如果您有 64 位 x86 平台，它将是：

> PATH_TO_EXTERNAL_LIBRARIES = /home/user/Linux/x86_64-unknown-linux-gnu/

对于窗户：

假设你下载并解压到 C:\rxtxt

> PATH_TO_EXTERNAL_LIBRARIES = C:\rxtxt\Windows\i368-mingw32\

如果您发现从命令行执行此操作很麻烦，您可以从您的代码执行此操作（*在*通过 RXTXcomm 打开端口之前）：

```
System.setProperty("java.library.path","PATH_TO_EXTERNAL_LIBRARIES"); 
```

编辑：

当然，除了上述所有内容之外，您还必须将 RXTXcomm.jar 放入您的类路径中。如果从命令行作为 jar 打包程序运行 - yourprogram.jar - 在 jar 中，您必须有一个 META-INF 文件夹，其中包含 MANIFEST.MF 和以下条目：

```
Class-Path: lib/RXTXcomm.jar
Main-Class: pkg.Main 
```

并且 yourprogram.jar 必须在具有文件夹 lib 的文件夹中，其中 RXTXcomm.jar 也是类

```
public static void main(String[] args) 
```

方法必须被称为 Main 并驻留在名为 pkg 的包中（只需将 pkg.Main 替换为您拥有的任何内容）。

然后您可以成功运行您的程序并打开一个串行端口（如果有）。这种方法还消除了在 jre/lib/ext 文件夹中复制任何内容的需要

编辑^2：

或者，如果您不想将程序打包到 jar 中，请将自己定位在包含文件夹 pkg 的文件夹中并写入：

```
java -cp PATH_TO_RXTX/RXTXcomm.jar -Djava.library.path="PATH_TO_EXTERNAL_LIBRARIES" pkg.Main 
```

（所有路径都可以是相对的或绝对的）

编辑^3：

但我会推荐[Java Simple Serial Connector](http://code.google.com/p/java-simple-serial-connector/)而不是 RXTXcomm：

*   它处理来自多个线程的重负载，而不是 RXTXcomm（在生产中测试）
*   外部库打包在 jar 中，因此无需设置 java.library.path

# java - 在事件侦听器中启用 Java 菜单项

> ID：12543206
> 
> 赞同：3
> 
> 时间：2012-09-22T11:07:15.613
> 
> 标签：java, swing, event-listener, jmenuitem

您好，我试图从事件侦听器中启用我的 JMenuItem，但它似乎超出了范围。我是 Java 新手，所以我将如何正确处理这个问题。所述事件侦听器将更改为新视图并启用禁用的菜单项。

```
 //Create and add MenuItems
    JMenuItem fileItem0 = new JMenuItem("Load");
    collMenu.add(fileItem0);

    JMenuItem fileItem1 = new JMenuItem("Add");
    fileItem1.setEnabled(false);
    collMenu.add(fileItem1);

    JMenuItem fileItem2 = new JMenuItem("Delete");
    fileItem2.setEnabled(false);
    collMenu.add(fileItem2);

    //Add Menu bar to frame
    menubar.add(collMenu);

    //Menu Item Functions
    fileItem0.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent actionEvent) {
            JOptionPane.showMessageDialog(null,"You selected: Load.");
            //Enable fileitem1 & 2 here ?? 
        }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T11:11:06.853

我希望这个小例子能帮助你消除疑惑......

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class MenuExample extends JFrame {
    JMenuBar menuBar = new JMenuBar();
    JMenu menu = new JMenu("File");
    JMenu menu1 = new JMenu("Edit");
    JMenuItem item1 = new JMenuItem("New");
    JMenuItem item2 = new JMenuItem("Open");

    public MenuExample() {
        setJMenuBar(menuBar);
        setVisible(true);
        setSize(400, 200);
        menuBar.add(menu);
        menuBar.add(menu1);
        menu.add(item1);
        menu.add(item2);
        item1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JFileChooser chooser = new JFileChooser();
                chooser.showOpenDialog(null);

            }

        });
        item2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JFileChooser chooser = new JFileChooser();
                chooser.showOpenDialog(null);

            }

        });

    }

    public static void main(String[] args) {
        MenuExample ex = new MenuExample();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:23:24.837

不要在同一方法中声明这些菜单项（fileitem1 和 fileitem2）。只需在您的方法之外声明您的 fileitem1 和 fileitem2 即可。

这解决了你的问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T11:31:02.010

`JMenuItem`将您尝试访问的s`final`改为从内部类 ( `addActionListener(new ActionListener() {...}`) 中访问。

> 内部类需要 **`JMenuItem`在内部访问`ActionListener`** 才能是最终的。为了避免匿名委托引用的 java 变量中的闭包产生奇怪的副作用。

这是一个例子：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        initComponents(frame);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        JMenuBar menuBar = new JMenuBar();

        JMenu menu1 = new JMenu("File");

        JMenuItem itemLoad = new JMenuItem("Load");
        //delcare them as final to be accessed from within an inner class
        final JMenuItem itemAdd = new JMenuItem("Add");
        final JMenuItem itemDel = new JMenuItem("Del");

        itemAdd.setEnabled(false);
        itemDel.setEnabled(false);

        itemLoad.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                itemAdd.setEnabled(true);
                itemDel.setEnabled(true);
            }
        });

        menu1.add(itemLoad);
        menu1.add(itemAdd);
        menu1.add(itemDel);
        menuBar.add(menu1);
        frame.setJMenuBar(menuBar);
    }
} 
```

# c++ - 运算符 = 重载

> ID：12543208
> 
> 赞同：2
> 
> 时间：2012-09-22T11:08:01.527
> 
> 标签：c++, operator-overloading, assignment-operator

假设我有这个：

```
struct coor
{
   int x;
   int y;
   COORD operator=(coor c)
   {
      COORD C={c.x,c.y}
      return C;
   }
} 
```

我需要这样做：

```
coor c={0,0};
COORD C=c; 
```

我可以将运算符重载添加到`coor`，但你如何做到这一点以返回左侧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T11:10:51.773

操作员`=`必须为对象本身的成员赋值。返回值只是为了使`a = b = c`类似的事情起作用。在您的情况下，这无关紧要。此外，如果有`A = B`，将使用`=`定义的 in `A`，如果有`B = A`，则使用`=`in `B`。您需要编写一个带有参数并更新其成员的`=`in 。`COORD``coor`

以下不调用 operator `=`：

```
COORD C=c; 
```

它调用匹配的构造函数。

并且 operator= 必须返回`*this`这样的事情：`a=b=c=d`工作，但这是传统的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:15:57.970

```
struct coor
{
   int x;
   int y;
   COORD operator=(coor c)
   {
      COORD C;
      C.x = c.x;
      C.y = c.y;
      return C;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T11:25:37.337

要重载`operator=`以便将对象分配给`coor`对象`COORD`，您必须在 内部执行此操作`COORD` `struct`：

```
struct COORD
{
    int x;
    int y;
    COORD& operator=(coor& c)
    {
        this->x = c.x;
        this->y = c.y;
        return *this;
    }
}; 
```

但是，正如其他人所提到的，这种重载适用于以下分配：

```
coor c = {0,0};
COORD C;
C = c; 
```

但不是为了

```
coor c = {0,0};
COORD C = c; 
```

因为第二行实际上是调用 COORD 的构造函数，它接受一个对象`coor`作为参数。身体可能看起来像：

```
COORD(coor c):x(c.x),y(c.y)
{
} 
```

# html - 扩大一个div的宽度，直到所有的孩子都适合

> ID：12543211
> 
> 赞同：0
> 
> 时间：2012-09-22T11:08:40.543
> 
> 标签：html, css

我正在尝试制作一个简单的滑块，所以我使用一个 div (#container) 来保存我需要滑动的项目（这个 div 将有溢出：隐藏），一个我想要移动的 div (#slider)以便所有项目将一起移动，以及适合滑块的 div。

我希望滑块的宽度扩大，直到所有项目都适合与 float:left 的同一行。

我有这个 jsFiddle： http: [//jsfiddle.net/rBFPL/5/](http://jsfiddle.net/rBFPL/5/)我需要一些帮助才能使同一行上的红色 div 和青色 div 扩大其宽度。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:19:52.803

**更新：http:** [//jsfiddle.net/HCYPD/3/](http://jsfiddle.net/HCYPD/3/)

```
#container {
    width : 400px;
    height : 200px;
    position : relative;
    background : yellow;
    overflow: hidden;
}

#slider {
    margin : 5px;
    position : absolute;
    background : cyan;
    width: auto;
    height : 190px;
    white-space: nowrap;
}

#slider div {
    margin : 20px;
    width: 100px;
    height: 150px;
    position : relative;
    display: inline-block;
    background : red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:39:25.020

我已经制作了这个[**jsFiddle**](http://jsfiddle.net/LYm2f/)，我认为它可以做到你所说的，我只在 chrome 上测试过。

**更新**：第二次[**尝试**](http://jsfiddle.net/LYm2f/1/)

```
#container {
    background : yellow;
    padding: 5px;
    white-space: nowrap;
    overflow: hidden;
    position : fixed;
    width : 400px;
}
#slider {
    background : cyan;
    position : fixed;
}
#slider div {
    margin : 20px;
    width: 100px;
    height: 150px;
    position : relative;
    float : left;
    background : red;
} 
```

# android - 如果用户在getview方法中更改android中编辑文本中的值，如何更新或刷新列表视图

> ID：12543212
> 
> 赞同：0
> 
> 时间：2012-09-22T11:08:56.737
> 
> 标签：android

`ListView`如果用户在方法中更改了`EditText`Android 中的值，我该如何更新或刷新`getView()`？我正在使用自定义适配器使用哈希映射填充列表视图数据。我正在验证`EditText`一些不需要关注的编辑文本行。我正在使用触摸侦听器进行验证。我正在验证是否`EditText`只接受数字和十进制字符。`getView()`如果用户更改编辑文本值，则在自定义适配器调用 textwatcher的方法中。我正在更新 hashmap 并调用 适配器类`notifydatasetchange`中的`afterTextchange()`方法。如果我调用 notifydatasetchange 方法键盘显示错误，无法提供价值`EditText`？

谢谢

# php - yiilite.php 文档不可用

> ID：12543214
> 
> 赞同：0
> 
> 时间：2012-09-22T11:09:39.027
> 
> 标签：php, yii, aptana3

使用 Aptana Studio 3.0（基于 Eclipse）我看不到函数的文档，我只收到这条消息：yiilite.php 文档不可用。

知道如何排序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:34:13.123

这里有少量关于yiilite.php的信息[http://www.yiiframework.com/doc/guide/1.1/en/topics.performance](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance)

# javascript - 如何在 JavaScript 中使用 HTML 语法？

> ID：12543215
> 
> 赞同：0
> 
> 时间：2012-09-22T11:10:02.270
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 应用程序并使用剃刀语法。

我想在 cshtml 文件中的 JavaScript 中使用 HTML 代码，但我对如何在 razor 语法中使用双引号感到困惑。有关系吗？

这是代码行：

```
<span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

@Html.DisplayFor(ModelItem => item.CommentDateTime)

<span class="EmpName"><button type="button" id = "@item.Id" class="deleteComment">Delete</button></span> 
```

我用 JavaScript 写了下面的代码，对吗？

```
 success: function (data) {
     $("p.p12").append
           ("<div style=\"background-color:#FAFAFA\";>Recently Added... <br /><a href=\"../../Employee/Details/" + data.OwnerID + "\">" + data.OwnerName + "</a>"
           + data.cmtDateTime + "<button type=\"button\" id = \" + data.Id  +  "\class=\"deleteComment\">Delete</button></span><br />" + data.msg + "</div>");                    
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:13:46.533

> 我在 JScript 中写了下面的代码，对吗？

不，这似乎不对。生成的 HTML 已损坏。您需要更加注意语法，属性和引号之间的空格很重要。此外，您似乎在硬编码 url 而不是使用 url 助手。试试这样：

```
$('p.p12').append(
    '<div style="background-color:#FAFAFA;">Recently Added... <br /><a href="@Url.Action("Details", "Employee", new { id = "__id__" })'.replace('__id__', data.OwnerID) + '">' + data.OwnerName + '</a>' + data.cmtDateTime + '<span><button type="button" id=' + data.Id  + ' class="deleteComment">Delete</button></span><br />' + data.msg + '</div>'
 ); 
```

或者正如我[在这里](https://stackoverflow.com/a/12542177/29407)向您建议的那样，恕我直言，哪种方法更正确。

或者由于您使用的是 AJAX 调用，而不是从控制器操作返回 JSON，而是返回一个 ParialView，您将在其中使用适当的 HTML 帮助程序正确构建标记。

像这样：

```
[HttpPost]
public ActionResult SomeAction(SomeViewModel args)
{
     MyViewModel model = ...
     return PartislView("_SomePartial", model);
} 
```

然后在您的强类型部分 ( `_SomePartial.cshtml`) 中构建标记，没有任何字符串连接和混合 javascript 和 HTML 的意大利面条代码：

```
@model MyViewModel

<div style="background-color:#FAFAFA;">
    Recently Added... 
    <br />
    @Html.ActionLink(Model.OwnerName, "Details", "Employee", new { id = Model.OwnerID }, null)
    @HtmlDisplayFor(x => x.cmtDateTime)
    <span>
        <button type="button" id="@Model.Id" class="deleteComment">Delete</button>
    </span>
    <br />
    @HtmlDisplayFor(x => x.msg)
</div> 
```

现在，您的 AJAX 成功回调中剩下的就是刷新相应的 DOM 部分：

```
success: function(html) {
    $('p.p12').append(html);
} 
```

# c# - C# 处理固定宽度文件

> ID：12543223
> 
> 赞同：3
> 
> 时间：2012-09-22T11:11:29.247
> 
> 标签：c#, file, width, fixed

我有一组具有不同列数和字段大小的固定宽度文件。

文件的顶部以如下行开头：

AAAAABBCCCCCCCCCCDDD等

字符的变化表示一个字段的结束和另一个字段的开始。我猜这可以有人用来计算代码的字段大小，然后将相同的值应用于下面的实际数据行。

然后我想将所有读取的数据输出到 XLS 文件甚至 DataGrid 中，但我的问题是我不知道如何编码。

任何帮助将不胜感激 ：）

* * *

/编辑：

我实现了 Cuong 的解决方案，虽然在我的家用 PC 上测试效果很好，但我必须用 c# v4 编译它，因为我们的工作 PC 有 Windows XP。

无论如何，在读取输入文件时，我收到以下错误：

```
************** Exception Text **************
System.ObjectDisposedException: Cannot read from a closed TextReader.
   at System.IO.__Error.ReaderClosed()
   at System.IO.StreamReader.ReadLine()
   at System.IO.File.<InternalReadLines>d__0.MoveNext()
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.IO.File.InternalWriteAllLines(TextWriter writer, IEnumerable`1 contents)
   at System.IO.File.WriteAllLines(String path, IEnumerable`1 contents)
   at FixedWidthFiles.Main.buttonProcessFile_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
FixedWidthFiles
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/TEMP/FixedWidthFiles.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Core
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
---------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:14:55.783

[根据 Visual Basic 的](http://msdn.microsoft.com/en-us/library/zezabash.aspx)此操作指南使用类[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类型。

您需要告诉它字段的宽度。鉴于您的第一行，这很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:25:42.910

您可以使用[TextReader.Read](http://msdn.microsoft.com/en-us/library/97e90x91.aspx)方法。例如：

```
 string input; // Test string

    // Replace new StringReader with a StreamReader to read a file
    using (TextReader textReader = new StringReader(input))
    {
        // Read first line to get structure
        var groupings = textReader.ReadLine().GroupBy(x => x);

        while (textReader.Peek() != -1)
        {
            // Convert to a string for easier handling than char[]
            List<string> fields = new List<string>();

            // Get the fields on each ling
            foreach (IGrouping<char, char> grouping in groupings)
            {
                char[] field = new char[grouping.Count()];
                textReader.Read(field, 0, field.Length);
                fields.Add(new string(field));
            }

            // Do something with "fields". The name of each field is
            // in grouping.Key at the same index.

            // Move to next line
            textReader.ReadLine();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T08:21:37.117

下面的例子如何写入csv文件（excel类型），重点是你需要读取第一行并计算宽度：

```
var lines = File.ReadLines("C:\\input.txt");

var widthList = lines.First().GroupBy(c => c)
                             .Select(g => g.Count())
                             .ToList();

var list = new List<KeyValuePair<int, int>>();

int startIndex = 0;

for (int i = 0; i < widthList.Count(); i++)
{
    var pair = new KeyValuePair<int, int>(startIndex, widthList[i]);
    list.Add(pair);

    startIndex += widthList[i];
}

var csvLines = lines.Select(line => string.Join(",", 
                    list.Select(pair => line.Substring(pair.Key, pair.Value))));

File.WriteAllLines("C:\\test.csv", csvLines); 
```

# c - 数组的值和地址是相同的，除了传递给函数时？

> ID：12543225
> 
> 赞同：2
> 
> 时间：2012-09-22T11:11:56.400
> 
> 标签：c, arrays, pointers

```
void pass_arr(int arr[]);

void pass_arr_test()
{
    int arr[5] = {1,2,3,4,5};

    printf( "arr  = %p\n"
            "&arr = %p\n\n", arr, &arr);

    pass_arr(arr);
}

void pass_arr(int arr[])
{
    printf( "passed arr  = %p\n"
            "passed &arr = %p\n\n", arr, &arr);
} 
```

* * *

输出：
arr = 0x28ccd0
&arr = 0x28ccd0

通过 arr = 0x28ccd0
通过 &arr = 0x28ccc0

* * *

有人可以解释为什么在创建 arr 的块中评估时 arr 的值和地址指向同一个地址，但是当将值和地址传递到两个不同的地址时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:13:29.183

那是因为在函数**`arr`中实际上是一个指针**，而不是一个数组。获取指针的地址不会产生与数组相同的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T13:18:56.847

除非它是、 或 一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of”类型的*表达式*将被转换（“decay”）为“指针”，表达式的值将是数组¹的第一个元素的地址。 `_Alignof``&`*`T``T`*

 *你打电话时

```
`pass_arr(arr)`; 
```

表达式`arr`从类型“5 元素数组`int`”转换为“指针`int`”，或`int *`.

注意数组第一个元素的地址就是数组本身的地址；这就是为什么在打印和int的结果时会得到相同的*值*，但请记住*类型*是不同的；表达式转换为 type ，但有 type ；这对于指针算术之类的事情很重要。`arr``&arr``pass_arr_test`*`arr``int *``&arr``int (*)[5]`*

 *其次，在函数原型的上下文中，形式的声明`T a[]`和`T a[N]`被解释为`T *a`；`a`实际上被声明为指针而不是数组。²

要记住的重要一点是**数组不是指针**。相反，在大多数情况下，数组*表达式*会根据需要**转换**为指针。

* * *

^(1 - [N1570，6.3.2.1](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)左值、数组和函数指示符，¶ 3)
^(2 - [N1570，6.7.6.3](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)函数声明符（包括原型），¶ 7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:19:46.363

这是由于`pass by value`语义，其中 pass_arr 方法中的 arr 是堆栈上的局部指针变量，其值是`arr`从 pass_arr_test 方法传递的位置。因此，`arr`pass_arr 和 pass_arr_test 中的变量都指向相同的位置，因此值是相同的。由于它们是两个不同的指针，所以它们的内存地址是不同的。在数组定义的情况下， arr 只是数组开头的别名，因此它的位置和值是相同的。**

# java - 获取重定向的 HTTP URL 时显示 Webstart 安全对话框

> ID：12543233
> 
> 赞同：0
> 
> 时间：2012-09-22T11:13:34.933
> 
> 标签：java, security, redirect, java-web-start

我们有一个使用 Java WebStart 部署的应用程序。有一个显示一些 HTML 内容的 JEditorPane。该 HTML 还包含图像。如果服务器因为实际资源被移动而返回 HTTP 3xx 状态代码，则会显示 WebStart 安全对话框。此对话框要求用户确认是否应允许应用程序从某个主机获取数据。

一个非常简单的示例应用程序：

```
package test;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Main extends JFrame {

public Main() {

    JEditorPane p = new JEditorPane();
    p.setContentType("text/html");
    p.setEditable(false);
    p.setText("<html><img src=\"XXXX\" /></html>");

    add(p);

    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(500, 500);
    setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            new Main();
        }
    });
}

} 
```

XXXX -> [http://www.hon.ch/HONcode/Seal/HONConduct432264.jpg](http://www.hon.ch/HONcode/Seal/HONConduct432264.jpg) 安全对话框出现

XXXX -> [http://www.uni-due.de/imperia/md/images/cms/ude-logo.png](http://www.uni-due.de/imperia/md/images/cms/ude-logo.png) **没有**安全对话框出现

JNLP 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="6.0+" codebase="." href="xxx.jnlp">
<information>
    <title>xxx</title>
    <vendor>xxx</vendor>
</information>
<security>
    <all-permissions/>
</security>
<update check="always" policy="always" />
<resources>
    <java version="1.7+" java-vm-args="-Xmx150m" />
    <jar href="xxx-signed.jar" main="true" />
</resources>
<application-desc main-class="test.Main">
</application-desc>
</jnlp> 
```

有没有一种简单的方法可以禁用这些安全对话框？如果不是，我们必须通过我们的应用程序后端获取图像。

# c - 禁用 __thread 支持

> ID：12543234
> 
> 赞同：4
> 
> 时间：2012-09-22T11:13:45.840
> 
> 标签：c, linux, pthreads

我正在实现一个非常轻量级的 pthread 替换库。我想完全禁用 __thread 有几个原因。

1.  这是浪费内存。如果我要创建一千个线程，它与用 __thread 声明变量的上下文无关， ~~它们仍将分配~~ *程序仍将分配*1000* 数据字节的大小并且从不使用它。它与大规模并发模型根本不兼容。如果我们需要只有 8K 堆栈的极轻量级光纤，那么只有 4K 的 TLS 块将是每个线程使用的内存的 50% 的开销。在某些情况下，TLS 开销会很大。
2.  TLS 是一个复杂的标准，我根本没有时间/资源来支持它。太贵了 我个人认为这个标准设计得很糟糕。它应该定义了必须由链接器提供的标准函数，以便线程库可以控制 TLS 分配发生的位置并插入所需的相关偏移量和地址。标准的 ELF 实现也被 pthread 感染了，期望 pthread 大小的结构来计算偏移量，这使得它很难适应其他东西。
3.  这只是一个糟糕的模式。它鼓励使用全局变量并创建具有静态函数/副作用的函数。如果我们正在创建易于分析的正确程序，这不是我们想要进入的领域。
4.  如果我们真的需要“线程上下文”来实现一些在幕后跟踪线程状态的魔法（比如分配或取消跟踪），为什么不首先公开 TLS 用来理解该上下文的魔法呢？就我个人而言，我只是`%fs`直接使用寄存器。由于显而易见的原因，这在库中是不可能的，但为什么他们一开始就应该知道线程呢？为什么不正确地设计它们，以便它们首先在参数列表中获得所需的上下文相关数据？

我的问题很简单：如果您不小心使用了 __thread 支持并让 clang 发出错误，最简单的方法是什么？如果我加载恰好需要 TLS 的动态库，我怎么会出错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:05:10.930

我相信最简单的方法是无条件地将这样的内容添加到您的 CFLAGS 中（如果您希望它是系统全局的，可能来自 clang 的等效 gcc 规范文件）：

```
-D__thread='^-^' 
```

其中右侧可以是 C 程序中任何时候在语法上无效的任何内容（违反约束）。

至于防止使用 TLS 加载库，您必须修补链接器和/或动态链接器以拒绝它们。如果您只是在谈论`dlopen`，您的程序可以首先读取文件并解析 ELF 标头以进行 TLS 重定位，然后拒绝该库（不将其传递给`dlopen`）（如果有）。这甚至可以通过`LD_PRELOAD`包装器实现。

我同意你的观点，尤其是在其当前的实现中，通常应该避免使用 TLS，但请问你是否衡量了成本？我认为在设计用于使用它的系统上*完全*消除它是相当困难的，并且有很多低垂的果实可以减少臃肿。你用的是哪个libc？如果它是 glibc，我很确定 glibc 有很多 TLS，它现在在内部使用它......当然，如果你正在编写自己的线程实现，那将需要与标准库的其余部分进行大量交互，所以也许你已经在修补它了......？

* * *

顺便说一下（无耻的插件如下），我们在[musl libc中有](http://www.musl-libc.org)[一个非常轻量级的线程实现](http://git.musl-libc.org/cgit/musl/tree/src/thread)，目前没有 TLS。但如果您可以按原样使用整个库，它可能会满足您对特定项目的需求，或者有可以借用的有用代码（许可证是 MIT）。

# symfony - date_default_timezone_get()：依赖系统的时区设置是不安全的

> ID：12543236
> 
> 赞同：26
> 
> 时间：2012-09-22T11:14:01.063
> 
> 标签：symfony, timezone, php

谁能告诉我为什么在安装了最新 MAMP 的全新格式化 macbook 中运行 app/console 时出现此错误？

> 警告：date_default_timezone_get()：依赖系统的时区设置是不安全的。您需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们在 /../Logger.php 第 112 行中为“EEST/3.0/DST”选择了“Europe/Helsinki”

我检查了 php.ini 的路径并标出了`date.timezone = "Europe/Athens"`

还多次重新启动 MAMP/apache。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-05-05T14:50:34.717

在 AppKernel.php 写：

```
public function init() {
    date_default_timezone_set( 'Europe/Lisbon' );
    parent::init();
} 
```

由于`init()`已弃用（并将在 Symfony2 3.0 中删除），因此建议在构造函数中移动代码，如下例所示：

```
public function __construct($environment, $debug) {
    parent::__construct($environment, $debug);
    // get rid of Warning: date_default_timezone_get(): It is not safe to rely on the system's timezone
    date_default_timezone_set( 'Europe/Paris' );
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-22T11:39:22.403

OS X 中的默认值`php.ini`位于：

```
/private/etc/php.ini 
```

无论如何，您可以告诉 CLI php[加载 MAMP 设置](http://forum.mamp.info/viewtopic.php?f=2&t=8484)，或者使用[MAMP 命令本身的别名](https://stackoverflow.com/questions/4262006/how-to-use-mamps-version-of-php-instead-of-the-default-on-osx)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-22T11:21:00.677

你没有编辑好的 php.ini 文件

您可以使用以下方法获取完整的 phpinfo()：

```
php -i 
```

而且，在那里，使用了 php.ini 文件：

```
$ php -i | grep 'Configuration File'
Configuration File (php.ini) Path => /etc
Loaded Configuration File => /etc/php.ini 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-01T19:49:45.237

我遇到了同样的问题，确实有一个命令行，并且在 Yosemite 上运行 MAMP/Native Mac PHP 服务，当我尝试按照此页面上的说明进行操作时，似乎没有一个对我有用。

当我运行 php 命令时：

```
$ php -i | grep 'Configuration File'
Configuration File (php.ini) Path => /etc
Loaded Configuration File => <em>(Blank)</em> 
```

我意识到 CLI 使用的 php.ini 实际上是 php.ini.default 文件。我创建了一个指向该文件的符号链接作为 php.ini 并且一切正常。

My-MacPro:/etc/$ ln -s php.ini.default php.ini

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-05T10:40:38.520

我确实遵循了您的答案，但就我而言，它们都不起作用。我决定去更改 **logger.php**文件`date_default_timezone_get()` 中的内容。

 **我替换为我的时区设置（“欧洲/柏林”），一切顺利！

老派的解决方案，但仍然是一个解决方案。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-28T17:45:09.170

我的 SF2 安装遇到了完全相同的问题。

要解决此问题，只需进入您的`php.ini`文件`/etc/php.ini`并将文件更改为如下所示（调整您的时区以适合您的本地时区）：

```
;;;;;;;;;;;;;;;;;;; ; Module Settings ; ;;;;;;;;;;;;;;;;;;;

[Date] 
; Defines the default timezone used by the date functions 
; http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone 
date.timezone = Europe/London 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-26T17:50:32.720

您在 Mac OSX 中的默认 php.in 位于与文件`/etc/php.ini`完全相同的位置`/private/etc/php.ini`。

你应该知道你有可能使用两个并行运行的 php 版本。我遇到了这个问题，因为我使用的是本机 mac osx php，但是我必须通过 homebrew 安装一个 php 包，然后我通过 homebrew 获得了另一个版本的 php。虽然我的`php.ini`文件中已经配置了时区`/etc/php.ini`，但我仍然遇到同样的问题，所以我运行：

```
php -i | grep 'Configuration File' 
```

为了配置正确的文件，我得到了：

```
Configuration File (php.ini) Path => /usr/local/etc/php/5.3
Loaded Configuration File => /usr/local/etc/php/5.3/php.ini
PHP Warning:  Unknown: It is not safe to rely on the system's 
timezone settings. You are *required* to use the date.timezone 
setting or the date_default_timezone_set() function. In case you 
used any of those methods and you are still getting this warning,
you most likely misspelled the timezone identifier. We selected 
'America/Buenos_Aires' for 'ART/-3.0/no DST' instead in Unknown on line 0 
```

然后我知道我必须编辑`/usr/local/etc/php/5.3/php.ini`文件。

在那之后，一切顺利。我没有那个问题了。

我希望它能帮助你解决这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-22T11:16:09.677

通常，CLI 和 Apache 有单独`php.ini`的文件。确保您已编辑所需的内容。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-10T06:14:18.047

默认情况下，Mac 在控制台中使用位于以下位置的 PHP：

/private/etc/php.ini

你应该使用这个，因为 MAMP 总是取消设置时区变量，你总是会得到那个错误。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-06T14:54:10.277

我在 OS X 10.9 上遇到了类似的问题。我的问题`php.ini`是`/etc`. 我通过创建`php.ini`包含以下内容的文件解决了这个问题：

```
date.timezone = Europe/Athens 
```**

# node.js - 使用 Node.JS 播放音频

> ID：12543237
> 
> 赞同：35
> 
> 时间：2012-09-22T11:14:08.893
> 
> 标签：node.js, audio

我目前正在使用[`child_process`](http://nodejs.org/api/child_process.html)命令行在`mplayer`本地机器上播放音频，以及我的 Node.JS 应用程序。这行得通，但它并不是一个很好的解决方案。我最大的问题是从 mplayer 开始到音频开始播放需要 500 毫秒。

有没有更好的播放音频的方法？最好是压缩音频，但我会尽我所能。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-02T01:58:44.497

我建议使用[node-speaker](https://github.com/TooTallNate/node-speaker)，它将原始 PCM 数据输出到您的扬声器（基本上，它播放音频）。

如果您正在播放诸如 mp3 文件之类的文件，您可能需要先将其解码为 PCM 数据，这正是[node-lame](https://github.com/TooTallNate/node-lame)所做的。

希望有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-14T14:17:13.747

我发现（在 Mac OS 上）最简单的是使用

```
exec('afplay whatever.mp3', audioEndCallback) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-22T11:57:59.863

我想你问的是在 nodejs 生态系统中是否有任何好的模块可以处理音频？

每当你有这类问题时，你应该首先去[npmjs](https://npmjs.org/)并输入一个合适的关键字。

这是我在 npmjs 网站上找到的与[音频](https://npmjs.org/browse/keyword/audio)相关的模块列表。

substacks 的[音频](https://github.com/substack/baudio)对我来说看起来不错。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-02-22T21:32:45.930

介绍，[`audic`](https://github.com/Richienb/audic)。它不使用任何本机依赖项，​​因此它不会像更高层的答案那样中断。

观察：

```
import Audic from 'audic';

const audic = new Audic('audio.mp3');

await audic.play();

audic.addEventListener('ended', () => {
    audic.destroy();
}); 
```

或更简单地说：

```
import {playAudioFile} from 'audic';

await playAudioFile('audio.mp3'); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-07-14T10:27:09.857

您还可以使用`play-sound`模块：

使用 npm 安装，运行命令：

```
npm install play-sound --save 
```

现在在您的代码中使用：

```
var player = require('play-sound')(opts = {})

 player.play('./music/somebody20.flac', function (err) {
   if (err) throw err;
   console.log("Audio finished");
 }); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-10-23T07:37:31.853

查看[sound-play](https://www.npmjs.com/package/sound-play)，这是一个无需使用外部播放器即可在 Windows 和 MacOS 上运行的简单解决方案：

```
const sound = require('sound-play')
sound.play('music.mp3') 
```

免责声明：我是这个包的作者。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-06-13T00:32:42.953

查看[node-groove](https://github.com/andrewrk/node-groove) - Node.js 绑定到 libgroove：

> 该库提供播放列表上音频的解码和编码。它旨在用作音乐播放器应用程序的后端，但它足够通用，可用作任何音频处理实用程序的后端。

免责声明：我编写的库是免费的、开源的，不隶属于任何产品、服务或公司。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-03T11:36:48.230

您可以使用播放声音模块和路径来实现此目的。

```
npm install play-sound

import path from 'path'; 
const __dirname = path.resolve();
import sound from 'sound-play';

const filePath = path.join(__dirname, "file.mp3");
sound.play(filePath); 
```

# jquery - Jquery Datepicker - 根据输入字段设置最大值和最小值

> ID：12543241
> 
> 赞同：1
> 
> 时间：2012-09-22T11:14:24.597
> 
> 标签：jquery, jquery-ui

我的 jQuery：

```
$('#begindate').datepicker();
$('#enddate').datepicker(); 
```

开始日期和结束日期不得超过今天的日期。

并且结束日期不能早于开始日期。

如何使用 jquery datepicker 设置这些限制？

例如，如果您首先设置结束日期，则开始日期限制将是结束日期设置为的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:17:12.557

你的意思是[http://jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)吗？

请参阅示例[http://jqueryui.com/demos/datepicker/date-range.html](http://jqueryui.com/demos/datepicker/date-range.html)

根据您的要求，您可以结合[http://jqueryui.com/demos/datepicker/#min-max](http://jqueryui.com/demos/datepicker/#min-max)

# solr - 完整导入 URL DataImportHanlder

> ID：12543244
> 
> 赞同：1
> 
> 时间：2012-09-22T11:14:39.307
> 
> 标签：solr, full-text-search

我已经配置了我的 solr 数据导入处理程序，现在想要完全导入。在 Solr Wiki 页面上，我发现检查我的配置的一种方法是：

> 使用浏览器点击 _http://local_host:8983/solr/db/dataimport 以验证配置。

这是正确的吗？参数“db”在以前的 URL 中是什么？我认为这是我之前在某处输入的参数之一，但不清楚是哪个。它没有写在页面上。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T11:29:43.773

您要查找的网址是：

```
http://localhost:8983/solr/{collection_name}/dataimport?command=full-import 
```

教程：

*   [http://solr.pl/en/2010/10/11/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-1/](http://solr.pl/en/2010/10/11/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-1/)
*   [http://solr.pl/en/2010/11/01/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-2/](http://solr.pl/en/2010/11/01/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-2/)
*   [http://solr.pl/en/2010/11/22/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-3/](http://solr.pl/en/2010/11/22/data-import-handler-%E2%80%93-how-to-import-data-from-sql-databases-part-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T18:41:41.107

此命令用于通过 URL 完全导入。

```
curl -X POST \
  http://local_host:8983/solr/db/dataimport \
  -H 'Accept: application/json, text/javascript, */*; q=0.01' \
  -H 'Accept-Encoding: gzip, deflate, br' \
  -H 'Accept-Language: pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7' \
  -H 'Cache-Control: no-cache' \
  -H 'Connection: keep-alive' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -H 'Origin: http://localhost:8983' \
  -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36' \
  -H 'X-Requested-With: XMLHttpRequest' \
  -d 'command=full-import&clean=true&commit=true&wt=json&indent=true&verbose=false&optimize=false&debug=false' 
```

# django - 将异构 django 模型对象列表转换为 json 对象

> ID：12543246
> 
> 赞同：0
> 
> 时间：2012-09-22T11:15:11.257
> 
> 标签：django, django-models

我有一个 Django 模型对象列表说

```
a=[obj1_mod1, obj2_mod2......objn_modn] 
```

其中 obj1_mod1 = model1 中的对象 1 等等。

现在我想从中创建一个 json 对象，该对象从模型对象 django pythons 中查找所有字段，例如：

```
{"mod1":{f1_mod1:val1, f2_mod1:val2,....}
 "mod2":{f1_mod2:val1,f2_mod2:val2,....}

"modn":{f1_modn:val1, f2_modn:val2,....}
} 
```

其中 f1_mod1 = 模型 1 的字段 1，对应的 val 1 = f1_mod1 的属性。

如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:51:22.233

使用[`values`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values-list)查找，它返回一个字典。

```
from collections import defaultdict

instance_list = [obj1_mod1, obj2_mod2 .... objn_modn]
json_dict = defaultdict(dict)

for i in instance_list:
   json_dict[unicode(i)] = i.values()

jsonified = json.dumps(json_dict) 
```

# mysql - MySQL LONGTEXT 分页

> ID：12543247
> 
> 赞同：2
> 
> 时间：2012-09-22T11:15:21.187
> 
> 标签：mysql, pagination, longtext

我有包含`LONGTEXT`. 我的问题是我想检索特定帖子的部分内容（基本上是分页）

我使用以下查询：

```
SELECT SUBSTRING(post_content,1000,1000) FROM posts WHERE id=x 
```

这在某种程度上很好，但问题在于位置和长度。大多数时候，第一个词和最后一个词是不完整的，这是有道理的。

如何从位置 x 检索长度为 y 的完整单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:15:33.043

大概您这样做是为了节省 MySQL 服务器和运行应用程序的机器之间的网络流量开销。碰巧的是，您不会在 MySQL 服务器上节省任何其他类型的工作负载。它必须从磁盘中获取 LONGTEXT 项目，然后通过`SUBSTRING`.

大概您已经根据可靠的性能分析决定必须保存此网络流量。既然您知道它不会节省太多 MySQL 服务器工作量，您可能想重新审视这个分析。您的节省将是微不足道的，除非您有数以万计的很长的 LONGTEXT 项目和大量的流量来检索和显示其中的一部分。

换句话说，这是一个优化任务。雅格尼？ [http://en.wikipedia.org/wiki/YAGNI](http://en.wikipedia.org/wiki/YAGNI)

如果您确实需要它，您将不得不创建软件来逐字处理 LONGTEXT 项目。您最好的选择是在您的客户端软件中执行此操作。首先检索文章的第一页和一两篇文章。然后，解析文本以查找完整的单词。在第一页中找到最后一个完整的单词及其后面的空格后，该字符位置就是下一页的起始位置。

这种任务在 MySQL 存储过程中是一个巨大的痛苦。另外，当您在存储过程中执行此操作时，您将在共享且难以扩展的资源（MySQL 服务器机器）上使用处理周期，而不是在可克隆的客户端机器上使用。

我知道我没有给你干净的代码来做你要求的事情。但是按照你的建议去做显然不是一个好主意。

**编辑**：

观察：1 GB 的服务器 RAM 大约需要 20 美元。像 memcached 这样的缓存系统在有效利用价值 100 美元的内存方面做得很好。这对于您描述的用例来说已经足够了。

另一个观察结果：许多提供大型文档的公司使用文件系统而不是 DBMS 来存储它们。文件系统可以很容易地在内容服务器之间共享或复制，并且文件可以很容易地随机访问而没有任何开销。

将整本书存储在单个 BLOB 或 CLOB 中有点创新。如果您可以按某种细分（页面）来拆分书籍？章节？千字块？- 并为每个段创建单独的数据行，您的 DBMS 将比您描述的要好得多。

如果你还是要这样做，这就是你要做的：

1.  总是在每个段中检索比您需要的多 100 个字符。例如，当您需要字符 30000 - 35000 时，检索 30000 - 35100。

2.  检索段后，查找数据中的第一个分词（第一个段除外）并从该词开始显示。

3.  同样，在 100 个额外字节中找到第一个分词，并显示到该分词。

因此，您获取的数据可能是 30000 - 35100，而您显示的数据可能是 30013 - 35048，但它会是整个单词。

# jquery - jQuery拖放 - 仅允许列表中的一项

> ID：12543248
> 
> 赞同：3
> 
> 时间：2012-09-22T11:15:55.437
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-sortable

我使用[**jQuery UI Sortable中的这个示例**](http://jqueryui.com/demos/sortable/#empty-lists)

我在拖放时遇到问题。
表号 3 -`sortable3`应该只能接收一件物品。

这是我的 HTML

```
<div class="demo">

<ul id="sortable1" class='droptrue'>
    <li class="ui-state-default">Can be dropped..</li>
    <li class="ui-state-default">..on an empty list</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class='dropfalse'>
    <li class="ui-state-highlight">Cannot be dropped..</li>
    <li class="ui-state-highlight">..on an empty list</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul>

<ul id="sortable3" class='droptrue'>
</ul> 
```

我的 CSS

```
#sortable1, #sortable2, #sortable3{
    list-style-type: none; 
    margin: 0; 
    padding: 0; 
    float: left; 
    margin-right: 10px; 
    background: #eee; 
    padding: 5px; 
    width: 143px;
}

#sortable1 li, #sortable2 li, #sortable3 li{
    margin: 5px; 
    padding: 5px; 
    font-size: 1.2em; 
    width: 120px; 
} 
```

我的脚本

```
$(function() {
    $("ul.droptrue").sortable({
        connectWith: "ul"
    });

    $("ul.dropfalse").sortable({
        connectWith: "ul",
        dropOnEmpty: false
    });

    $("#sortable1, #sortable2, #sortable3").disableSelection();
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:23:57.183

为防止任何额外的项目被丢弃到`sortable3`中，如果已超过最大数量，请取消丢弃。

下面的代码是您当前的代码，我只添加了最后一个将接收到的事件附加到第三个可排序的方法。

```
$(function() {
    $("ul.droptrue").sortable({
        connectWith: "ul",
    });

    $("ul.dropfalse").sortable({
        connectWith: "ul",
        dropOnEmpty: false
    });

    $("#sortable1, #sortable2, #sortable3").disableSelection();

    $("#sortable3").on("sortreceive", function(event, ui) {
        var $list = $(this);

        if ($list.children().length > 1) {
            $(ui.sender).sortable('cancel');
        }
    });
});​ 
```

### [演示](http://jsfiddle.net/FranWahl/EGcY8/)​</h3>

# javascript - PHP 是否存在任何视图引擎，所以我的 asp.net mvc 站点将 PHP 作为我的视图的语言？

> ID：12543251
> 
> 赞同：0
> 
> 时间：2012-09-22T11:16:10.983
> 
> 标签：javascript, asp.net, html, design-patterns

现在我正在使用 asp.net mvc，这是一个很好的框架。但是，将来，我想使用 php 或 ruby​​ 为我的 asp.net MVC 站点开发视图。

我不确定这个概念叫什么，但我知道有些东西存在。

我认为，我必须生成带有清晰 html、javascript 的页面并使用 json 传输数据。我可以使用哪些模式以及如何实现导航？

还有其他事情可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:47:04.250

如果您希望使用 PHP 代码为 asp.net MVC 站点创建 VIEWS，您可以选择 PHP View Engine。

它允许您用 PHP 语言编写 ASP.NET MVC 视图。

[http://phpviewengine.codeplex.com/](http://phpviewengine.codeplex.com/)是您可以关注的链接。

这样一来，控制器和模型的所有 ASP.NET 代码都将保持不变，您可以在 PHP 中创建视图。

我希望这是你要找的。

另一个用于 php 的视图引擎很[清晰](http://sharpy.codeplex.com/)，我希望这也适合你。最重要的是，我不确定红宝石是否有任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:39:42.327

> 我希望从 C# 中获得最大无界，以便在服务器端 php 或 ruby​​ 上快速实现。

根据此评论，您唯一的选择是让服务器端代码以标准格式（如 JSON）返回数据，并严重依赖客户端模板将数据转换为 HTML。

LinkedIn 也有类似的问题。他们拥有三种不同的服务器端技术，并且很难重用组件。[这里](http://engineering.linkedin.com/frontend/leaving-jsps-dust-moving-linkedin-dustjs-client-side-templates)有一篇关于他们的经验的很好的文章，还有一篇关于不同模板技术的比较的[文章](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T11:49:28.010

考虑使用 Mustache (http://mustache.github.com/) 作为您的视图引擎。它将允许 PHP、.NET 和 JS 使用视图并使用服务器生成的内容进行渲染。Nustache 也有一个用于 ASP.NET MVC 的库，以使转换变得容易。

# sql-server - AppHarbour提供的SQL Server连接方法

> ID：12543256
> 
> 赞同：1
> 
> 时间：2012-09-22T11:17:18.170
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3, sql-server-2005, appharbor

我是 AppHarbour 的新手，我正在尝试在这里部署一个 ASP.NET MVC 3 Web 应用程序。我已成功部署 Web 应用程序。

现在我想在提供的数据库上运行一些 sql 脚本。

为此，我已按照以下步骤...

**第 1 步：** ![在此处输入图像描述](../Images/3f63805b0609cabf04e3326865677e7b.png) **第 2 步：** ![在此处输入图像描述](../Images/2cad7c12f0887294471792818fae19cf.png) **第 3 步：** ![在此处输入图像描述](../Images/908af95387a3491c7c58fad84c0631ee.png)

现在在这里我得到服务器名称、用户名和密码以及数据库名称，但是！

当我尝试使用连接到该数据库时，`SQL Server Management Studio`我无法连接到它。

我总是收到以下错误消息

> > 标题：连接到服务器无法连接到 e2f7c78d*********b9.sqlserver.sequelizer.com。
> > 
> > 附加信息：此版本的 Microsoft SQL Server Management Studio 只能用于连接 SQL Server 2000 和 SQL Server 2005 服务器。(连接Dlg)

请有人可以帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:50:23.007

Appharbor 使用 Sql Server 2008 R2（Microsoft SQL Server Express Edition with Advanced Services，版本 10.50.1600.1）。使用 Microsoft SQL Server Management Studio 2008 R2 或更高版本，它应该可以工作。

# ios - 使用自定义缓动曲线重新实现基于 UIView 块的动画方法

> ID：12543259
> 
> 赞同：4
> 
> 时间：2012-09-22T11:17:27.190
> 
> 标签：ios, uiviewanimation, easing-functions

如果需要更高级的曲线，UIView 的基于块的动画方法中缺少自定义缓动曲线会导致核心动画。

[如何使用 Core Animation 创建自定义缓动函数](https://stackoverflow.com/questions/5161465/how-to-create-custom-easing-function-with-core-animation)`CAKeyframeAnimation`中讨论了使用 Category on 执行此操作的方法？.

为了保持我的代码干净和可维护，我想更进一步，重新实现`UIView`基于块的方法，并包含一个描述缓动曲线函数的块。结果类别`UIView`看起来像这样：

```
+ (void)animateWithDuration:(NSTimeInterval)duration easingCurveFunction:(double(^)(double))function  animations:(void (^)(void))animations; 
```

有谁知道苹果如何实现基于块的动画方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-31T02:24:07.803

我不确定是否要创建基于块的方法，但我发现实现自定义缓动函数并仍然使用基于块的动画的一种相当简单的方法是覆盖图层的`addAnimation:(CAAnimation *)anim forKey:(NSString *)key`方法并换成不同的缓动函数您想要动画的任何视图。

首先，继承 CALayer，并添加以下方法...

```
// CustomViewLayer.m

#import "CustomViewLayer.h"

@implementation CustomViewLayer

- (void)addAnimation:(CAAnimation *)anim forKey:(NSString *)key
{
    if ([anim isKindOfClass:[CABasicAnimation class]]) {

        // intercept the animation and insert your own easing function
        int x1 = 0.250;
        int y1 = 1.185;
        int x2 = 0.210;
        int y2 = 1.000;
        CAMediaTimingFunction *func = [CAMediaTimingFunction functionWithControlPoints:x1 :y1 :x2 :y2];
        anim.timingFunction = func;    
    }

    [super addAnimation:anim forKey:key];
}

@end 
```

在您的视图子类中，确保您返回自定义图层类...

```
// CustomView.m

#import "CustomView.h"
#import "CustomViewLayer.h"

@implementation CustomView

+ (Class)layerClass
{
    return [CustomViewLayer class];
}

@end 
```

然后，您可以使用标准的基于块的动画方法，例如...

```
[UIView animateWithDuration:0.3 animations:^{
    [customView setFrame:newFrame];
}]; 
```

...并且将使用自定义缓动功能。它可能无法解决您所有的问题，但它很容易做到，并且仍然允许您使用基于块的动画。但是请记住，缓动函数将适用于通过基于块的方法进行动画处理的所有动画。因此，例如，如果您想为 alpha 属性设置动画，但又不想使用自定义缓动功能，您将不得不摆弄它，或者可能会想出一个完全不同的解决方案。

最后，可以在这里找到一个用于轻松创建和测试缓动函数的很棒的工具：http: **[//matthewlein.com/ceaser/](http://matthewlein.com/ceaser/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:31:31.910

我不知道Apple如何实现他们的基于块的方法，但是阅读[BlocksKit](https://github.com/zwaldowski/BlocksKit)源代码，我知道要实现你提到的方法，你可能需要：

1.  声明一个 UIView 类别，例如 UIView (block)
2.  在类别中，添加一个 NSTimer 属性以触发/使具有给定持续时间的计时器无效
3.  在类别中，添加一个块属性以保留 easingCurveFunction 块代码
4.  在类别中，添加另一个块属性以保留动画块代码
5.  在基于块的方法中，设置计时器，将块代码保存到属性
6.  当计时器触发时，运行 easingCurveFunction 块和动画块，因为您将它们保存在属性中

在将我自己的基于块的方法添加到 Apple 的类时，我实际上遵循了这种做法。

# grails - Grails在和条件中添加两列

> ID：12543260
> 
> 赞同：0
> 
> 时间：2012-09-22T11:17:31.230
> 
> 标签：grails

我有两个表，需要在 grails 中为具有一对多关系的表编写以下查询。

`Recipe`带列的表, `a`, `b`,`c`带列的`d`
表, , ,`Ingredient``a``f``g``h`

我需要在 Grails 中编写这个 SQL。

```
SELECT a, b
FROM recipe r
WHERE c+d NOT IN (SELECT g FROM Ingredient) 
```

我们如何在 Grails 中的表的`c`条件`d`下组合列？`Recipe`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:53:44.503

所以你不要在grails中写sql。Grails 使用了一种称为 GORM 的 hibernate 的 groovy 抽象/实现：

[http://grails.org/doc/latest/guide/single.html#GORM](http://grails.org/doc/latest/guide/single.html#GORM)

“多对一和一对一”部分将描述如何正确建模数据。

要进行查询，您可能需要查看 where 子句。

```
def query = Pet.where {
   owner.firstName == "Joe" || owner.firstName == "Fred" && type == "dog" 
} 
Pet joeOrFredsDog = query.find() 
```

这种类型的查询记录在这里： http: [//grails.org/doc/latest/ref/Domain%20Classes/where.html](http://grails.org/doc/latest/ref/Domain%20Classes/where.html)

# iphone - iphone5和iphone4兼容的屏幕高度

> ID：12543264
> 
> 赞同：3
> 
> 时间：2012-09-22T11:18:11.370
> 
> 标签：iphone, ios

> **可能重复：**
> [如何支持更高的 iPhone 5 屏幕尺寸？](https://stackoverflow.com/questions/12397811/how-do-i-support-the-taller-iphone-5-screen-size)

我是 iPhone 新手，我有一点疑问。现在iphone5的屏幕高度是568，之前iphone的屏幕高度是480。iphone5的应用程序如何实现。iphone5及以下版本是否应该一直检查视图或控制器？如果我错了请纠正我。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T11:39:27.513

以下是要点 *如果您想利用 iPhone5 的全高创建大小正好为 640x1136 像素的启动屏幕，名称为 default-568h@2x.png *如果您有旋转问题，请检查 a)window.rootViewController = firstViewcontroller （不要将视图添加到您的窗口） b）实现新的 rorate 委托功能

*使用 viewDidLayoutSubviews 而不是 viewDidLoad 来设置相对于窗口的小部件尺寸 *您可以手动检查屏幕尺寸并加载正确的图像，如下所示：

```
 UIImage* myImage;
CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f) {
   myImage = [UIImage imageNamed:@"myImage-568h@2x.png"];
} else {
} 

myImage = [UIImage imageNamed:@"myImage.png"]; 
```

或使用以下 GIT 要点中的分类 [https://gist.github.com/3719620](https://gist.github.com/3719620)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T13:12:35.003

只需使用

```
CGRectGetHeight([UIScreen mainScreen].applicationFrame)
CGRectGetWidth([UIScreen mainScreen].applicationFrame) 
```

获取屏幕的高度和宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T11:22:11.490

在您的项目中（在 XCode 4.5 中）转到“支持文件”组（自动创建）。你必须使用那些 Default@2x.png/Default-568h@2x.png 文件。！！

这是操作系统调整窗口大小以填充 iPhone 5 显示屏所需的关键更改。[Redth#](http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/)已经发布了一篇关于您可能需要进行的此调整和其他与尺寸相关的调整的文章。

！！

# xpages - xPages 在重建后继续向服务器发出请求

> ID：12543265
> 
> 赞同：0
> 
> 时间：2012-09-22T11:18:47.353
> 
> 标签：xpages, xpages-extlib

我在重建后遇到 xPages 问题，如果用户在重建后尝试访问页面，则网页开始向服务器发出持续请求，应用程序使用 extlib 和动态内容控件。

这里最大的问题是，如果您在网页中发出间隔 ajax 请求，那么在没有用户操作的情况下也会发生同样的问题。因此，在添加新设计后打开网页的所有用户都会自动遇到这个问题，这可能会杀死服务器。

我不确定，但我认为这可能是扩展库问题

这里有一个关于这个问题的 youtube 视频：

[http://www.youtube.com/watch?v=y15XLtWsq80&feature=youtu.be](http://www.youtube.com/watch?v=y15XLtWsq80&feature=youtu.be)

# javascript - 使用 javascript DOM 创建一个 facebook 登录按钮

> ID：12543267
> 
> 赞同：0
> 
> 时间：2012-09-22T11:19:28.877
> 
> 标签：javascript, dom, facebook-javascript-sdk

我正在尝试使用dom（createElement，appendChild ...）添加一个facebook登录按钮，在facebook开发者网站之后，我写道：

```
var loginFB = document.createElement('div');
    loginFB.id = "loginFacebook";
    loginFB.class="fb-login-button";
    loginFB.innerHTML = "Login with Facebook"; 
```

我还在我的 javascript 脚本中添加了所需的 facebook 函数。

我的网页中有一个 div ：

但这似乎不起作用。我有一个“用 facebook 登录”，出现但完全是黑色的。

您知道如何实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:13:16.917

> 我还在我的 javascript 脚本中添加了所需的 facebook 函数。

这到底是什么意思呢？

如果您在 SDK 完成加载后添加 XFBML 标签，您必须调用[FB.XFBML.parse](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)以显式地为这些标签重新解析文档（或其部分）。

# svn - SVN 中的分支、标签、主干

> ID：12543268
> 
> 赞同：3
> 
> 时间：2012-09-22T11:19:43.270
> 
> 标签：svn, tortoisesvn

> **可能重复：**
> [Subversion 存储库中的“branch”、“tag”和“trunk”是什么意思？](https://stackoverflow.com/questions/16142/what-do-branch-tag-and-trunk-mean-in-subversion-repositories)

我一直在阅读有关 SVN 控件的信息，但我找不到我的问题的正确答案。回答时请尽量简单，因为我不明白 Google 上已有的复杂答案。如果可以的话，请给我一个例子，以便于理解。*我希望不能理解某事并要求一个简单的答案不是犯罪*。

1.  什么是分支、标签、主干？
2.  为什么我们应该使用 Branch、Tag、Trunk ？
3.  如何正确使用 Branch、Tag、Trunk？
4.  何时使用 Branch、Tag、Trunk？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T11:35:10.760

我将尝试用几个简单的词来解释它。

**主干**是发展的主线。这通常是您开始使用的代码库。

**分支**是单独的开发线。当您将中继代码用于不同目的、项目或其他时，这就是您所做的，而不会与中继代码冲突。

**Tag**更像是一个标签，用来在未来更容易找到一些东西。

这些功能可以帮助您管理代码库，您必须自己决定何时使用什么，具体取决于您的项目的外观。

也许可以试试Apache Subversion[的维基百科页面](http://en.wikipedia.org/wiki/Apache_Subversion#Branching_and_tagging)，这并不难理解。或者查看[这篇很棒的 SO 帖子](https://stackoverflow.com/questions/698313/what-is-trunk-branch-and-tag-in-subversion)，它提出了类似的问题。然而，最好的来源是[手册本身](http://svnbook.red-bean.com/nightly/en/index.html)。

# ruby - 如何在启用 ruby 的环境中在 Apache 或 Litespeed 上运行 Ramaze 应用程序？

> ID：12543273
> 
> 赞同：0
> 
> 时间：2012-09-22T11:20:09.080
> 
> 标签：ruby, litespeed

同样在 Cpanel 中，我有 Rubygems 和 Rails 图标可以转到这些页面。

我可以看到有关如何在 Apache 上设置 Sinatra 的教程，但它们不适用于 Ramaze，我正在使用 Litespeed 服务器。

对于另一个问题，如何在启用 ruby​​ 的环境中在 Apache 上运行[Ramaze 应用程序？](http://ramaze.net)也许 Apache 和 Litespeed 是双重安装的。

我添加了[https://gist.github.com/2cf310f39b13f5d6f3b4](https://gist.github.com/2cf310f39b13f5d6f3b4)作为我的`.htaccess`文件，它不适用于[http://compesh.uk.to](http://compesh.uk.to) Cpanel 说我也有 Apache，但网上说 Litespeed。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:09:10.070

对于 ruby​​ 应用程序（例如，phusion 乘客），您需要的不仅仅是 apache。Ramaze 是一个基于 rake 的应用程序 gem，所以你应该看看这一面......

“部署 ramaze”的第一个谷歌结果：http: [//www.codeotaku.com/blog/2009-10/ramaze-and-rack](http://www.codeotaku.com/blog/2009-10/ramaze-and-rack)

祝你好运 ！;-)

# c++ - GMOCK 错误：不允许 MOCK_METHOD11

> ID：12543274
> 
> 赞同：1
> 
> 时间：2012-09-22T11:20:19.307
> 
> 标签：c++, unit-testing, gmock

当我模拟一个有 11 个参数的函数时，它会给出一条错误消息：

> 错误：'function_name' 不是类型

我在用

```
MOCK_METHOD11(function_name,int(param1,param2,....,param11); 
```

是不是不能模拟11个参数的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:09:43.797

GMock 最多支持 10 个（包括）模拟函数的参数。因此，您不能将其用于开箱即用的功能。你可以做什么来模拟这个方法：

1.  （优选）重构此方法以减少参数数量。如此多的参数使方法难以控制和理解。

2.  引入中间代理接口，该接口将具有类似的方法，只接受 10 个参数。这很容易实现：

    ```
    class OriginalInterface
    {
    public:
        virtual void method(int param1, int param2) = 0;
    };

    class ProxyInterface : public OriginalInterface
    {
    public:
        virtual void method(int param1, int param2)
        {
            method1(param1);
            method2(param2);
        }
        virtual void method1(int param1) = 0;
        virtual void method2(int param2) = 0;
    };

    // Now you mock on ProxyInterface
    class MockInterface : public ProxyInterface
    {
    public:
        MOCK_METHOD1(method1, void(int));
        MOCK_METHOD1(method2, void(int));
    }; 
    ```

在我的示例中，我将具有 2 个参数的方法拆分为 2 个方法。我认为这个想法很明确。

3\. （不是最佳的）您可以尝试更改 gmock 源以添加 METHOD11 typedefs ..

# mysql - Mysql执行子查询

> ID：12543278
> 
> 赞同：2
> 
> 时间：2012-09-22T11:22:00.180
> 
> 标签：mysql, subquery

假设我有这样的查询

```
SELECT DISTINCT customer_name 
FROM borrower 
WHERE customer_name in (SELECT customer_name FROM depositor) 
```

我们可以将上面视为两个查询

**一个**

```
SELECT DISTINCT customer_name 
FROM borrower 
WHERE customer_name 
```

**乙**

```
SELECT customer_name 
FROM depositor 
```

哪个先执行？这条规则对所有子查询都一样吗？

我们可以编写哪些类型的子查询？给我一些指导以开始使用教程链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:23:48.207

**编辑**为第一个答案是*错误*的。但解释是正确的：|

**A**先执行。当子查询相互关联时，应用上面介绍的“所有”子查询。

```
+----+--------------------+-----------+----------------+---------------+---------------+---------+------+------+----------+--------------------------+
| id | select_type        | table     | type           | possible_keys | key           | key_len | ref  | rows | filtered | Extra                    |
+----+--------------------+-----------+----------------+---------------+---------------+---------+------+------+----------+--------------------------+
|  1 | PRIMARY            | borrower  | index          | NULL          | customer_name | 52      | NULL |    6 |   100.00 | Using where; Using index |
|  2 | DEPENDENT SUBQUERY | depositor | index_subquery | customer_name | customer_name | 52      | func |    1 |   100.00 | Using index              |
+----+--------------------+-----------+----------------+---------------+---------------+---------+------+------+----------+--------------------------+ 
```

顺便提一句。MySQL 6 将消除这个问题，并且`PRIMARY`两个查询的选择类型都将变为。见[1](http://www.bigdbahead.com/?p=187)

# html - CSS后代与子层次结构不起作用

> ID：12543279
> 
> 赞同：1
> 
> 时间：2012-09-22T11:22:09.127
> 
> 标签：html, css, css-selectors

下面是一段简单的 HTML/CSS 代码，我在其中输入了两个 URL：

*   第一个 URL (Google) 是 div 的子级。
*   第二个 URL (Bing) 只是 div 的后代。

使用子选择器意味着只有 Google URL 应该是红色的。

但在实施中，不知何故**，** Google 和 Bing URL 都是红色的。（另外，有趣的是，当我删除该`<h1>Text</h1>`元素时，只有 Google URL 是红色的。）

**是什么原因？**

这是 HTML 摘录：

```
<div class="mydiv">
    <a href="http://www.google.com">Google</a>
    <p>
        <h1>Text</h1>
        <a href="http://www.bing.com">Bing</a>
    </p>
</div> 
```

和 CSS 提取：

```
.mydiv > a {
    color:red;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T11:30:36.803

这有点棘手。

首先`<h1>`是块元素。接下来要注意的是，它`<p>`只能包含内联元素。一旦遇到块元素作为元素的子`<p>`元素，打开的元素`<p>`就会隐式关闭。

所以（在内部）你的 HTML 片段被转换成这个（据我所知，关闭`</p>`被忽略）：

```
<div class="mydiv">
        <a href="http://www.google.com">Google</a>
        <p></p>
        <h1>Text</h1>
        <a href="http://www.bing.com">Bing</a>
</div> 
```

现在，如您所见，两个`<a>`标签都是您的直接后代，`<div>`因此您的 CSS 规则适用于它们。

删除`<h1>`标签时的行为相应地如下：您`<p>`没有隐式关闭。因此，第二个`<a>`仍然是子级`<p>`，CSS 不适用于它。

我认为，你想要的最好使用另一个`<div>`而不是`<p>`标签来实现（甚至可能是`<article>`，`<section>`或类似的）。

# windows-phone-7 - WP7 在使覆盖元素可见后缺少鼠标向上事件

> ID：12543281
> 
> 赞同：0
> 
> 时间：2012-09-22T11:22:33.467
> 
> 标签：windows-phone-7, mouseevent

我正在模拟器中开发一个 WP7 应用程序。

我有一个页面，上面有两个矩形，rect1 和 rect2。rect2 与 rect1 重叠。

```
<Rectangle Name="rect1" Grid.Row="1" Width="200" Height="200" Fill="Aqua" MouseLeftButtonDown="rect1_MouseLeftButtonDown" MouseLeftButtonUp="rect1_MouseLeftButtonUp" />
<Rectangle Name="rect2" Margin="100,100,0,0" Grid.Row="1" Width="200" Height="200" Fill="Red" MouseLeftButtonUp="rect2_MouseLeftButtonUp"  Visibility="Collapsed" /> 
```

当我单击 rect1 时，它会收到一个鼠标按下事件，并且在此事件的代码中我使 rect2 可见。然后鼠标在新可见的 rect2 上。我松开鼠标按钮，然后等待 rect2 上的鼠标向上事件。

rect2 没有收到鼠标向上事件。

rect1 也没有。

页面也不行。

鼠标上移事件到哪里去了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:01:45.863

事实证明这是预期的行为，并且没有规则说每个鼠标按下事件都应该有一个相应的鼠标按下事件。

我通过使用操作事件解决了我的问题：

```
ManipulationStarted
ManipulationCompleted
ManipulationDelta 
```

# android - 打开 XML 文件时看不到图形布局

> ID：12543282
> 
> 赞同：3
> 
> 时间：2012-09-22T11:22:49.790
> 
> 标签：android, eclipse, adt, eclipse-adt

它显示一个空白屏幕。然后我必须单击蓝色/灰色星形图标并选择`App theme`，然后元素才会显示在调色板中。然后我必须将一个元素从调色板拖到空白屏幕上并放下它。然后将出现图形布局。

在我开始玩主题和`ActionbarSherlock`.

我尝试恢复所有 Android 和 XML 设置的默认设置，但没有成功。

有谁知道如何修复它，以便在我打开布局 XML 文件时显示 XML 图形编辑器？

（我正在使用的 xml 不是空白的。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T11:58:12.040

我每天都面临这个问题，特别是当我`Andorid Project`向工作区添加新时，我找到的唯一解决方案是**重新启动 Eclipse**，我希望这对你也有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T12:01:47.317

试试这样：

> 右键单击 Package Explorer 视图中的布局文件之一

**`Open With -> Android Layout Editor`**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:04:30.127

如果我没有在图形布局编辑器的右上角选择 android 版本，有时会发生这种情况。因为相同的主题在不同版本的 Android 中可能看起来不同，所以我猜 Eclipse 不知道要向您展示什么，除非您为您选择的主题选择特定版本的 android。

如果我使用 Google API 版本而不是 Android XX 版本作为我的项目的目标构建，它有时也会发生在我身上。可能是开发者工具中的一些错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T09:02:56.583

我猜您的问题与 Eclipse 相关，但下次请尝试具体说明您的 IDE，因为它可能会帮助您获得正确的答案。如果您使用的是 Eclipse，我建议您检查您的[Android SDK Tools Eclipse 插件 (ADT)](http://tools.android.com/release)是否是最新的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T16:42:05.887

好的，所以我最好的理解是，您以某种方式覆盖或更改了该项目的默认主题，而不是 AppTheme。假设这是同一个项目，您应该能够在样式 xml 文件 (ProjectPath/res/values/styles.xml) 中更改它。

作为参考，我的工作正常，我的项目的 styles.xml 看起来像这样（新项目）：

```
<resources>

    <style name="AppTheme" parent="android:Theme.Light" />

</resources> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T10:25:45.990

尝试在启动 eclipse 时增加 -Xms128m -Xmx1024m。我有同样的问题，因为我没有足够的内存。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T06:46:06.133

在 Eclipse 中，右键单击您的 XML 文件并选择**打开**方式，然后选择**XML 编辑器**

在页面底部，您将看到**设计**和**源**选项卡。单击源以查看您想要的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-28T15:49:58.090

我的从不刷新。所以我打开另一个文件然后返回然后刷新。即使我去调色板刷新它也不起作用。也像提到的其他人一样，确保您的 api 版本适用于您想要呈现的内容。所以我的设置为 api 20，但我的项目在 api 17 上运行，所以请使用它。这是一张图片：

![在此处输入图像描述](../Images/f3c9551fe501cc6c7061a3f98a81e9af.png)

注意地雷是如何设置为 17 的 - 你的可能是 20 或其他与你的清单不同的东西。相应地改变它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-24T11:13:45.407

andoird Studio 用户的解决方案。以下解决方案对我有用。

**文件 --> 使缓存无效并重新启动 --> 使缓存无效并重新启动。**

希望这对你也有用。

# android - 使用 facebook 详细信息登录到我的应用程序后，出现如附件所示的错误

> ID：12543285
> 
> 赞同：1
> 
> 时间：2012-09-22T11:23:08.477
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/833951b4b68ccc8c37b3b4013d1d9726.png)![在此处输入图像描述](../Images/64e9ee6a1cfa7ef7fbda59051471976d.png)![在此处输入图像描述](../Images/4c0f5a36798a8b9d986132d546bda5c2.png)使用 facebook 详细信息登录到我的应用程序后，我收到错误，如附件所示，成功登录后如何显示我的应用程序屏幕。

# android - 阻止离线模式或重新路由到 URL

> ID：12543290
> 
> 赞同：1
> 
> 时间：2012-09-22T11:23:38.667
> 
> 标签：android, connection, offline

我希望我的 android 应用程序只能在线使用。如果用户没有互联网连接，我想阻止用户使用其中的任何内容，并向他显示一个带有快速消息的弹出窗口和指向 Play 商店的浏览器链接。

我已经看到其他有关检查连接状态的答案的问题，但我不确定 1）在我的应用程序中放置此代码的位置 2）如果用户离线，如何防止用户访问任何内容 2）什么是最好的显示带有短文本消息和 Playstore 链接的弹出窗口的解决方案

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:21:28.787

对于您的第一个问题，您可以在启动时轻松关闭应用程序：

```
ConnectivityManager connectivityManager 
          = (ConnectivityManager) ctx.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    if(activeNetworkInfo == null){
      finish();
    } 
```

这不会给用户任何迹象表明您的应用在没有 WiFi 的情况下受到限制，但它会完成这项工作，您可以在关闭之前轻松添加对话框。这需要放在主启动器活动的 onCreate() 中。

第二：

```
AlertDialog.Builder builder = new AlertDialog.Builder(mActivity)
                .setTitle(title)
                .setMessage(message)
                .setPositiveButton("Play Store", new Dialog.OnClickListener() {
                    public void onClick(DialogInterface dialogInterface, int i) {
                        dialogInterface.dismiss();
                        final Intent MyIntent = new Intent(Intent.ACTION_VIEW, 
                        Uri.parse("market://details?id=myid"));
                        startActivity(MyIntent);
                    }
                })
                .setNeutralButton("No thanks!", new Dialog.OnClickListener(){
                    public void onClick(DialogInterface dialogInterface, int i) {
                        dialogInterface.dismiss();
                    }
                });
        builder.create().show(); 
```

这将弹出一个小窗口，点击后会将用户带到市场。

# php - 启动 php 脚本的第二个按钮，如何？

> ID：12543292
> 
> 赞同：0
> 
> 时间：2012-09-22T11:24:15.390
> 
> 标签：php, jquery

我已经阅读了[这个问题](https://stackoverflow.com/questions/1697484/a-button-to-start-php-script-how/)的答案，只需单击一个按钮即可执行 PHP 脚本。但是如果我有一个“*嵌套按钮*”，像这样：

```
 <?php
    if(!empty($_POST['act'])) {
        echo "Ready to rock!";
        $someVar = "Rock n Roll";
        if(!empty($_POST['act2'])) {
            echo $someVar;
        } else {
    ?>
        <form method="POST" action="">
            <input type="hidden" name="act2" value="run">
            <input type="submit" value="Rock It!">
        </form>
    <?php
        }
    } else {
    ?>
    <form method="POST" action="">
        <input type="hidden" name="act" value="run">
        <input type="submit" value="Show It!">
    </form>
    <?php } ?> 
```

我听说我的问题可以用 jQuery 解决，但我不知道。

请任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:30:32.757

要在服务器上执行脚本，请使用表单的 action 属性：

```
<form method="POST" action="myscript.php"> 
```

单击 a 时`input type="submit"`，浏览器将转到表单周围的操作`input type="submit"`

嵌套不是问题，因为浏览器总是会寻找*“环绕”的形式*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:57:12.273

就像@DTukans 在这里所说的那样，您需要隐藏字段。如果您要发布第二个表单，如果您没有包含第一个表单中的 act 值的隐藏字段，则 act 的值将丢失。

在 php 中，您还可以通过给出`input[type="submit"]`名称来检查您提交的提交按钮，例如`<input type="submit" name="form2">`，然后您可以检查您是否通过： 提交了该表单 `if (isset($_POST['form2'])) {}`，但这里不是这种情况。

使用隐藏的输入，你会很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:43:56.887

问题出在第二种形式中，因此它永远不会在此代码中调用，因为它在第一个 $_POST 变量 IF 语句中失败，因为在第二种形式中您没有 POST 变量“act”。所以你需要添加它

```
<form method="POST" action="">
    <input type="hidden" name="act" value="run">
    <input type="hidden" name="act2" value="run">
    <input type="submit" value="Rock It!">
</form> 
```

使用此表格，您应该会看到`echo $someVar;`

ps 如果表单操作属性是 emtpy，默认情况下它会将表单提交到相同的 php 脚本

# sorting - Slickgrid 仅对父行进行排序

> ID：12543293
> 
> 赞同：1
> 
> 时间：2012-09-22T11:24:16.810
> 
> 标签：sorting, slickgrid

我有一个数据视图，它将呈现如下所示，

```
item1
  item2
  item3
item4 
```

其中，第 1 项和第 4 项是父母，是否可以仅对这两项进行排序？即使在排序之后，子项（2 和 3）也会在其父项下吗？请说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:30:14.587

您可以通过实现自定义 onSortHandler 来做到这一点。这是我的做法：

1.  创建您的排序功能

    函数 customOnSortHandler_1(value1, value2, sortAsc) {...}

2.  在页面上指定列元数据时添加了一个属性

    ..., onSortHandler:customOnSortHandler_1, ...

3.  将此处理程序订阅到 onSort 事件

在您的 customOnSortHandler 中，您可以做任何您想做的事情 :)

# php - 谷歌地图 API 锁定 iPhone 上整个网页的缩放级别？

> ID：12543296
> 
> 赞同：0
> 
> 时间：2012-09-22T11:24:35.853
> 
> 标签：php, iphone, html, google-maps-api-3

我在我的网站中实现了一个风格化的谷歌地图，当我在 iphone 上查看页面时，它会锁定网页的缩放级别。“地图”仍然可以“捏”缩放，但网页不是。我不知道如何打开网页和地图的捏缩放？在此先感谢任何帮助者！这是该页面的链接 - [http://esdaledesigns.com/contact.php](http://esdaledesigns.com/contact.php)

```
 <script type="text/javascript">
      function initialize() {

          // Create an array of styles.
  var styles = [
  {
    "stylers": [
      { "hue": "#ff6e00" },
      { "saturation": -67 }
    ]
    }
  ];

  // Create a new StyledMapType object, passing it the array of styles,
  // as well as the name to be displayed on the map type control.
  var styledMap = new google.maps.StyledMapType(styles,
    {name: "The Stockwell"});

  // Create a map object, and include the MapTypeId to add
  // to the map type control.
  var mapOptions = {
    zoom: 16,
    center: new google.maps.LatLng(51.890488, 0.899154),
    mapTypeControlOptions: {
      mapTypeIds: ['map_style'], 
    },
  };
  var map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);

  var myLatlng = new google.maps.LatLng(51.890488, 0.899154);
  var marker = new google.maps.Marker({
      position: myLatlng,
      animation: google.maps.Animation.DROP,
      map: map,
      title:"The Stockwell"
  });

  //information
  var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">The Stockwell Colchester</h2>'+
    '<div id="bodyContent">'+
    '<p>THE STOCKWELL<br />18 WEST STOCKWELL STREET<br />COLCHESTER<br />ESSEX<br />CO1 1HN<br /></p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
});

//Associate the styled map with the MapTypeId and set it to display.
  map.mapTypes.set('map_style', styledMap);
  map.setMapTypeId('map_style');
}
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:40:33.243

好的，解决了……

就是在我发布的脚本上方几行的这段代码，就在 google api 键的上方。 `<meta name="viewport" content="initial-scale=2.0, user-scalable=no" />`我将 user-scalable 更改为“yes”，将 initial-scale 更改为“0.5”，一切正常。希望这对其他人有帮助。

# android - 如何在 android 小部件中将 ImageButton 更改为其选定状态？

> ID：12543297
> 
> 赞同：1
> 
> 时间：2012-09-22T11:24:58.073
> 
> 标签：android, widget, imagebutton

为什么我不能使下面的代码工作？

```
widgetBtn.setSelected(true); 
```

或者

```
views.setBoolean(R.id.widgetBtn, "setSelected", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T06:13:38.037

尝试这个..

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
     <item android:drawable="@drawable/pressed1" android:state_pressed="true"/>
    <item android:drawable="@drawable/nopressed"/>

</selector> 
```

在你的drawable中。

# c# - 有多少天属于某个日期范围？

> ID：12543300
> 
> 赞同：1
> 
> 时间：2012-09-22T11:25:45.890
> 
> 标签：c#, .net, algorithm

假设我有一个包含 2012/09/21 23:59:59 的开始对象和一个包含 2012/09/22 00:01:02`DateTime`的结束对象。`DateTime`这两个对象之间的差异只有一分钟多一点，但属于这个日期范围的天数等于 2。

我读过其他类似的问题，我认为`TimeSpan`类`DateTime`不提供执行此类计算的方法。如何计算属于某个日期范围的天数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T11:29:18.247

采用：

```
DateTime dateTime1 = DateTime.Parse("2012/09/21 23:59:59");
DateTime dateTime2 = DateTime.Parse("2012/09/22 00:01:02");
TimeSpan difference = dateTime1 - dateTime2; 
```

该变量`difference`包含两个日期之间的时间。例如，使用[TotalDays](http://msdn.microsoft.com/en-us/library/system.timespan.totaldays.aspx)属性来获取天数的差异。

如果要排除时间部分，请使用 DateTime 上的[Date](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性，例如：

```
TimeSpan difference = dateTime1.Date - dateTime2.Date; 
```

在这种情况下，TotalDays 将为 1 而不是 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:30:18.473

您可以执行以下操作：

```
System.DateTime dtTodayNoon = new System.DateTime(2006, 9, 13, 12, 0, 0);
System.DateTime dtTodayMidnight = new System.DateTime(2006, 9, 13, 0, 0, 0);
System.TimeSpan diffResult = dtTodayNoon.Subtract(dtYestMidnight);
Console.WriteLine("Yesterday Midnight - Today Noon = " + diffResult.Days);
Console.WriteLine("Yesterday Midnight - Today Noon = " + diffResult.TotalDays);
Console.ReadLine(); 
```

如果要包括夏令时：

```
System.TimeSpan diffResult = dtTodayNoon.ToUniversalTime().Subtract(dtYestMidnight.ToUniversalTime()); 
```

如果时区很重要，您也可以使用 DateTimeOffSet

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:29:11.560

不

```
(dateTime2 - dateTime1).TotalDays 
```

为你工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T11:29:30.377

> 我读过其他类似的问题，我认为 TimeSpan 和 DateTime 类不提供执行此类计算的方法。

他们当然会这样做。

[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)是要使用的类。我猜您正在寻找[TotalDays](http://msdn.microsoft.com/en-us/library/system.timespan.totaldays.aspx)属性，不是吗？

```
DateTime date1 = ...;
DateTime date2 = ...;
TimeSpan difference = date2 - date1;
int totalNumberOfDays = difference.TotalDays; 
```

# android - android webview打不开url但是手机浏览器可以打开

> ID：12543301
> 
> 赞同：5
> 
> 时间：2012-09-22T11:25:47.373
> 
> 标签：android, url, webview

我无法加载的网址

[http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxn%2F7bvn0ayzZySqVssDl3gbF6MnYRKHHUdcB3aJvSsy9BYnoGzvR6KxV8lKdtva8B8jzzIkjsGKfqPZV6Xsb0GvL9dwnAjjjJo%2FBmPilqOqPAb4WJjL3C5sjoaZ1gW%2FGA%2B8RO92rSapI&pid=mm_23353219_0_0&spm=2014.21047752.2.0](http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxn%2F7bvn0ayzZySqVssDl3gbF6MnYRKHHUdcB3aJvSsy9BYnoGzvR6KxV8lKdtva8B8jzzIkjsGKfqPZV6Xsb0GvL9dwnAjjjJo%2FBmPilqOqPAb4WJjL3C5sjoaZ1gW%2FGA%2B8RO92rSapI&pid=mm_23353219_0_0&spm=2014.21047752.2.0)

但我可以使用相同的代码打开“ [http://www.google.com ”。](http://www.google.com)

手机浏览器可以打开。

需要帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:37:14.677

尝试添加

`wv.getSettings().setJavaScriptEnabled(true);`

在加载 URL 之前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T12:11:23.783

xml:

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:background="#ff00ff">
<WebView 
android:id="@+id/webView1"  
android:layout_width="match_parent"
android:layout_height="match_parent"/>
</LinearLayout> 
```

班级：

```
 wb=(WebView)findViewById(R.id.webView1);
        wb.loadUrl("http://ursite/");
        wb.setWebViewClient(new WebViewClient());

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:33:38.173

xml中的WebView：

```
<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="75dp" /> 
```

在班上：

在字符串中调用您的网站链接并像这样调用

```
 WebView wv=(WebView) findViewById(R.id.webview);
    wv.loadUrl(your string); 
```

我试过了，它的工作原理......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T12:42:46.833

发布您用于打开 WebView 的代码。

顺便说一句，你有没有添加

`<uses-permission android:name="android.permission.INTERNET"/>`

到您的应用程序清单？

# javascript - 用正则表达式在javascript中分割字符串？

> ID：12543306
> 
> 赞同：1
> 
> 时间：2012-09-22T11:26:15.883
> 
> 标签：javascript, regex, split

我在javascript中有以下字符串，

```
Id:121,RefId:123,Date:Sep 22, 2012 12:00:00 AM 
```

当我尝试使用 , 作为分隔符将其拆分为 3 个键值对时，它给了我错误的输出，因为在日期中还有另一个 ,（逗号）。
所以我想我必须使用正则表达式。
我想显示如下；

```
Id:121   
RefId:123   
Date:Sep 22, 2012 12:00:00 AM 
```

谁能建议如何使用正则表达式克服日期中的额外逗号？
提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T11:35:44.820

`,`您的意思是在后面的不是空格上拆分？

```
'Id:121,RefId:123,Date:Sep 22, 2012 12:00:00 AM  '.split(/,(?=\S)/);
// will give you ["Id:121", "RefId:123", "Date:Sep 22, 2012 12:00:00 AM  "] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T11:37:33.360

如果你真的想要一个正则表达式（而不是有限的拆分），你可以这样做：

```
var text = "Id:121,RefId:123,Date:Sep 22, 2012 12:00:00 AM";
text.match(/^(.+?),(.+?),(.+)$/); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T11:42:05.537

如果你想使用正则表达式，你可以试试这个：

```
re = /^Id:(\d+),RefId:(\d+),Date:(.+)/
matches = re.exec("Id:121,RefId:123,Date:Sep 22, 2012 12:00:00 AM")
matches[1] // "121"
matches[2] // "123"
matches[3] // "Sep 22, 2012 12:00:00 AM" 
```

# c# - 在树视图中显示文件夹和文件（仅限 .doc/docx）及其图标

> ID：12543308
> 
> 赞同：0
> 
> 时间：2012-09-22T11:26:36.920
> 
> 标签：c#, asp.net, winforms

我在 C# 中创建一个窗口窗体，我有一个`TreeView`控件。我必须执行以下任务：

*   单击浏览按钮
*   选择基础文件夹
*   显示基本文件夹的所有文件（`.doc`/ `.docx`）和文件夹及其图标
*   单击子文件夹将其展开并显示其中包含的文件和文件夹

请给我一些建议/链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:04:43.340

我使用了以下代码：

```
 void GetTree(string strSearchPath)
        {
            treeFiles.Nodes.Clear();
            SetNode(treeFiles, strSearchPath);
            treeFiles.TopNode.Expand();
        }

        void SetNode(TreeView treeName, string path)
        {
            DirectoryInfo dirInfo = new DirectoryInfo(path);
            TreeNode node = new TreeNode(dirInfo.Name);
            node.Tag = dirInfo;
            GetFolders(dirInfo, node);
            GetFiles(dirInfo, node);
            treeName.Nodes.Add(node);
        }

        void GetFolders(DirectoryInfo d, TreeNode node)
        {

            try
            {
                DirectoryInfo[] dInfo = d.GetDirectories();

                if (dInfo.Length > 0)
                {
                    TreeNode treeNode = new TreeNode();
                    foreach (DirectoryInfo driSub in dInfo)
                    {
                        treeNode = node.Nodes.Add(driSub.Name, driSub.Name, 0, 0);
                        GetFiles(driSub, treeNode);
                        GetFolders(driSub, treeNode);
                    }
                }
            }
            catch (Exception ex) { }

        }

        void GetFiles(DirectoryInfo d, TreeNode node)
        {
            var files = d.GetFiles("*.doc*");
            FileInfo[] subfileInfo = files.ToArray<FileInfo>();

            if (subfileInfo.Length > 0)
            {
                for (int j = 0; j < subfileInfo.Length; j++)
                {
                    bool isHidden = ((File.GetAttributes(subfileInfo[j].FullName) & FileAttributes.Hidden) == FileAttributes.Hidden);
                    if (!isHidden)
                    {
                        string strExtention = Path.GetExtension(subfileInfo[j].FullName);
                        if (strExtention.Contains("doc"))
                        {
                            TreeNode treeNode = new TreeNode();
                            string path = subfileInfo[j].FullName;
                            string name = subfileInfo[j].Name;
                            treeNode = node.Nodes.Add(path, name, 1, 1);
                            AddBookMarkFile(path, treeNode);
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:29:27.117

这必须帮助你[http://www.csharp-examples.net/get-files-from-directory/](http://www.csharp-examples.net/get-files-from-directory/)

# objective-c - 如何在基于页面的应用程序中添加更多 UIguesture

> ID：12543311
> 
> 赞同：0
> 
> 时间：2012-09-22T11:27:58.927
> 
> 标签：objective-c, ios, xcode, ipad, uipageviewcontroller

我正在为我的一个应用程序使用基于页面的应用程序。

有一个 Uigesture 已经用于滑动页面，如果你点击页面就会滑动。但我想添加更多手势，如果我点击其他一些功能应该可以工作。

例如，如果我点击按钮栏应该出现或者如果我点击放大应该发生。

那么我怎么能在已经发生点击滑动页面的地方做到这一点。我不希望页面滑动发生，而是我希望其他 Uigesture 工作。

# php - 解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM

> ID：12543312
> 
> 赞同：-1
> 
> 时间：2012-09-22T11:28:14.393
> 
> 标签：php, database, phpmyadmin

我在 php 中使用对象。我有一个对象连接到数据库服务器 $con 对象和 $opt（操作）对象来向数据库服务器发送查询，到现在为止没有问题，问题是我将 $con 对象定义为静态，我在$opt 对象，如下面的代码所示

```
 class operations{

   public static $con = null;
   public function __construct($tableName = null){

     // Creating  an object of connection 
     self::$con = new config();
     self::$con = self::$con->getConnection();
   }

  } 
```

所以当我想调用 $con 对象时没有问题

```
mysql_query($query,$opt::$con) or die (mysql_error()); 
```

但在服务器上出现此错误

```
Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:33:54.313

T_PAAMAYIM_NEKUDOTAYIM 是希伯来语，它指的是 PHP 的范围解析运算符（“::”）。如果您收到此消息，则意味着 PHP 看到了一个类名，并希望您使用范围解析运算符访问它。

**更新：**

在看到对您的代码的编辑后，您在通话中犯了一个错误。正确的语法是：

```
mysql_query( $query, operations::$con ) or die (mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:42:44.407

您的范围解析是出乎意料的，这意味着您在糟糕的上下文中使用它。你什么时候使用“::”？之后`self` `static`，类名或表示类名的字符串：

```
 static::PropertyOrMethod;
 self::PropertyOrMethod;
 CLassName::PropertyOrMethod
 $string = "className";
 $string::PropertyOrMethod 
```

取而代之的是，您在类的实例上使用它，而 php 不喜欢它。您应该使用 mysql_query($query,operations::$con) 或 die (mysql_error());

# android - Android：呈现实时值

> ID：12543314
> 
> 赞同：0
> 
> 时间：2012-09-22T11:28:33.113
> 
> 标签：android

是否有任何开源引擎可用于以折线图和其他类型图表的形式呈现实时值。随着使用网络传递的数据，它将动态更新自身并绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:34:01.013

我正在使用[AChartEngine](http://www.achartengine.org/)绘制折线图。

它只提供绘图功能。实现实时数据绑定是您的工作。

**添加**

JFreeChart 是 Java 中最著名的一种，但它不支持 Android，因为它使用了 Swing。

AFreeChart 是 JFreeChart 的 android 支持端口。

[http://code.google.com/p/afreechart/](http://code.google.com/p/afreechart/)

截图：[http ://afreechart.googlecode.com/svn/doc/screenshot/index.html](http://afreechart.googlecode.com/svn/doc/screenshot/index.html)

我不确定它是否提供了您想要使用的图表类型，但我认为替代方案并不多，而这个可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:22:00.727

图形视图：[http ://www.jjoe64.com/p/graphview-library.html](http://www.jjoe64.com/p/graphview-library.html)

它目前仅支持折线图和条形图，但它的占用空间非常小，并且还支持动态数据。不是很复杂。

他们的演示中有动态数据示例。

# java - iText、Unicode 字符和 Java

> ID：12543315
> 
> 赞同：7
> 
> 时间：2012-09-22T11:28:40.837
> 
> 标签：java, fonts, itext

我有一个文本编辑程序，可以将其输出保存到 PDF 文件中。

它还将所有文本保存到 PDF 字典中，可以从中再次读取。问题是在我的母语中，像 č,ć,đ,ž,š 这样的字符很常见......

当我在我的程序 GUI 中编写这些字符时，很好，它们都出现了（我（目前）正在使用 java 的 arial 字体）。

当我保存它并打开 PDF I Adob​​eReader 时，č ić 缺失，đ、ž 和 š 打印正常。我正在使用自定义（truetype）字体（BookAntiqua，从[这里](http://fontzone.net/font-details/Book+Antiqua/)下载。

这是编码的问题，还是字体本身的问题（它不支持đ、ž、š字符）？

此外，当我再次将 PDF 加载到我的程序中时，仍然缺少丢失的字母，并且 đ、ž、š 与 ⎕ 符号和类似符号交换...这是如何编写 PDF 的问题还是有其他问题？

底线是，我希望这五个字符在我的程序 GUI 和 PDF 文档中可见，并且它们可以从 PDF 的字典中正确检索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:36:07.370

我有同样的问题。我已经解决了更改支持这些字母的字体，忘记了名字，也许是 Arial unicode？- 需要试验那是什么字体 - 而不是我将该字体嵌入到 pdf 中。那是完美的。我的名字有一些奇怪的字符:)

[编辑：这里](https://stackoverflow.com/questions/626632/itext-embed-font-in-a-pdf)有一个示例如何做到这一点，并为字段设置它，[这里](http://itextpdf.com/examples/iia.php?id=199)还有另一个代码片段，这可能会有所帮助。

# variables - 从 Pascal 中的另一个变量获取变量

> ID：12543316
> 
> 赞同：1
> 
> 时间：2012-09-22T11:28:44.653
> 
> 标签：variables, dynamic, pascal

我对 PASCAL 有疑问。

在 Javascript 中，我可以这样做：

```
window.b = 'hello';
var a = 'b';

/* And I can get variable b having only variable a */

console.log(window[a]); // output = hello 
```

如何在 Pascal 中获得相同的结果？

提前感谢您的回答:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:19:10.900

Pascal 是一种强类型编译语言，你不能像在 JS 或 Python 中那样轻松地进行这种变量/类型操作。这不是您在 Pascal 中所做的事情。特别是，Pascal 没有内置的反射功能，因此它无法解释自己的源代码来知道字符串“b”是指对象中调用的`b`变量`window`。

它也不能声明无类型变量——所有变量都**必须**有类型，所以这`var a`是不可能的，编译器不会尝试猜测你需要什么。

我看不出你这样做会取得什么成就。Pascal 不应该以这种动态的方式使用，您不应该尝试将语言弯曲到您的意愿 - 使用它，因为它旨在用于获得最佳结果。

# c# - 静默 MSI 卸载不删除安装文件夹

> ID：12543319
> 
> 赞同：1
> 
> 时间：2012-09-22T11:28:59.140
> 
> 标签：c#, .net, visual-studio-2010, installation

我使用 Visual Studio msi 安装程序创建了一个空项目。在安装时，它只是为项目创建文件夹和 exe 文件。

但是当我尝试静默卸载时，它会从程序列表中删除安装，但它会离开文件夹。我还需要删除该文件夹，并且希望在不在代码中手动删除它的情况下执行此操作。

```
 // This is how to uninstall a basic msi app

        // Create the uninstall process.
        Process proc = new Process();

        // Define the parameters for the process
        proc.StartInfo.FileName = "msiexec.exe";

        // This is the Product Code from your Basic MSI InstallShield Project

        proc.StartInfo.Arguments = "/x" + " " + ProductCode + " " + "/qn";

        // Start the process.
        proc.Start();

        // Wait for the uninstall process to end.
        proc.WaitForInputIdle();
        proc.WaitForExit();

        // Release resources.
        proc.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:44:37.213

[`/L logfile.txt`](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx#BKMK_SetLogging)使用命令行选项指示 MSI 输出日志文件`msiexec`。它应该告诉您为什么卸载程序无法删除安装文件。可能的原因包括文件夹被锁定（需要重新启动才能删除）或文件夹的文件权限阻止删除。有关详细信息，请参阅[Wix 安装程序无法删除安装文件夹](https://stackoverflow.com/questions/11102256/wix-installer-could-not-remove-installation-folder)或[Installshield，卸载程序未删除所有文件夹](https://stackoverflow.com/questions/3949840/installshield-uninstalling-program-not-removing-all-folders)。

# macos - CKEditor 和 NSColorPanel：一个谜

> ID：12543320
> 
> 赞同：0
> 
> 时间：2012-09-22T11:29:01.917
> 
> 标签：macos, cocoa, webview, ckeditor, nscolorpanel

我正在使用 WebView 在我的 Cocoa 应用程序中集成 HTML 编辑器[CKEditor 。](http://ckeditor.com/)

到目前为止，它按预期工作，除了一件事：如果我在应用程序的其他任何地方打开一个[NSColorPanel](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorPanel_Class/Reference/Reference.html)并选择一种颜色，CKEditor 中选择的颜色会自动改变！

这怎么可能发生？NSColorPanel（一个 Cocoa 窗口）如何与 CKEditor（一个 HTML 小部件！）通信？最后，我怎样才能防止这种行为？

**代码**

我通过子类化 WebView 和覆盖来加载 CKEditor `initWithFrame:frameName:groupName`。

```
- (id) initWithFrame:(NSRect)frame frameName:(NSString *)frameName groupName:(NSString *)groupName {
    if (self = [super initWithFrame:frame frameName:frameName groupName:groupName]) {
        NSURL *baseURL = [[NSBundle bundleForClass:self.class] URLForResource:@"ckeditor" withExtension:nil];
        [self.mainFrame loadHTMLString:kCKEditorTemplate baseURL:baseURL];
    }
    return self;
} 
```

NSColorPanel 是这样打开的：

```
- (IBAction)menuColor:(id)sender {
    [[NSColorPanel sharedColorPanel] orderFront:self];
} 
```

**到目前为止我发现了什么**

*   [WebView](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)类参考说 WebView 实现`changeColor:`：

> 此方法由 NSColorPanel 发送方调用，其行为类似于 NSTextView 中的 changeColor: 方法。

但是，我尝试覆盖`changeColor:`它并没有被调用。

*   当通过 NSColorPanel 更改选择颜色时，CKEditor 添加一个`<font>`元素而不是一个`<span>`元素（就像通过工具栏更改文本颜色时所做的那样）。这意味着选择颜色不会通过传统方式（可能是粘贴板？）改变。
*   [NSFontPanel 也会](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSFontPanel_Class/Reference/Reference.html)发生同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:02:10.673

我对可可和 webview 没有任何经验，我只能尝试考虑 IE activeX 控件，所以我可能错了。

话虽如此：

如果插入的代码使用的是字体而不是跨度，那么我认为它不是 CKEditor 而是 Webkit 是它正在插入该代码的那个。

您可以尝试加载一个页面，而不是 CKEditor 实例，它只有一个内容可编辑的 div，然后执行相同的测试以验证它是否在 webkit 中完成：

```
<div contentEditable=true>this is editable, select some text and open the nscolorpanel</div> 
```

# python - 使用时区偏移解析 UNIX 时间戳（例如“14232335 +0200”）

> ID：12543328
> 
> 赞同：2
> 
> 时间：2012-09-22T11:29:57.457
> 
> 标签：python, parsing, datetime, timezone, unix-timestamp

我正在尝试解析 python 中的一些时间戳。它们看起来像这样：

```
1334423456 +0200 
```

其中显然第一部分是 UNIX 时间戳，第二部分是时区偏移量，格式为“+HHMM”/“-HHMM”。我试图把它变成一个 python.datetime 对象。

我可以将第一部分与 datetime.fromtimestamp 一起使用：

```
datetime.fromtimestamp(s.split()[0]) 
```

但我不知道如何将第二部分（时区偏移）应用于它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T11:32:47.837

最简单的方法是使用[`iso8601`模块](https://en.wikipedia.org/wiki/ISO_8601)；它包括一个（内部）时区解析器，*几乎*可以处理您的格式；我们需要插入一个`:`以使其匹配 ISO 8601 时区：

```
import iso8601
stamp, tz = s.split()
timezone = iso8601.iso8601.parse_timezone(tz[:3] + ':' + tz[3:])
dt = datetime.fromtimestamp(int(stamp)).astimezone(timezone) 
```

# c# - 如何使用 c# 在远程 linux 机器上执行 Putty 命令

> ID：12543330
> 
> 赞同：0
> 
> 时间：2012-09-22T11:30:11.440
> 
> 标签：c#, session, putty, winscp

我有一些 Putty 命令集，我总是运行这些命令在远程 Linux 机器上执行相同的任务。

现在我想通过 c# windows 应用程序做同样的事情？

请建议，我探索了很多方法，但没有成功。请建议。

例如我输入以下命令进入目录。

cd ABC\DEF

谢谢，萨曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:33:46.373

为 C# 使用 SSH 库，例如[C# Library for SSH and Telnet](https://stackoverflow.com/questions/4881587/c-sharp-library-for-ssh-and-telnet)或[https://stackoverflow.com/questions/622278/ssh-library-for-creating-ssh-connections-in-c-sharp](https://stackoverflow.com/questions/622278/ssh-library-for-creating-ssh-connections-in-c-sharp)中建议的库。使用 SSH 连接到机器，进行身份验证，输入所需的命令，然后查看任何输出并检查错误/

# matlab - 读取包含数字和 ASCII 字母的字符串中的数字

> ID：12543335
> 
> 赞同：1
> 
> 时间：2012-09-22T11:31:05.427
> 
> 标签：matlab

我有以下字符串，包括数字和 ASCII 字母，并尝试在 MATLAB 中读取最后一个数字（等号后的数字）而不打扰其他人。如何使用 sscanf 读取该数字？

```
tline = '1,            ,[1024], Application, CBR Server,Total Packets Received = 484' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:39:23.817

如果您可以在没有 sscanf 的情况下生活，那么这应该可以解决问题`regexp`

`t = regexp(tline, '(?<=[=]\s*)(\d*)', 'match');`

`number = str2num(t{1});`

# c - 检查 Unix 消息队列是否为空

> ID：12543338
> 
> 赞同：5
> 
> 时间：2012-09-22T11:31:45.610
> 
> 标签：c, unix, message-queue

有人可以告诉我如何检查消息队列中是否有任何消息。消息队列在基于 linux 的操作系统中用 C 语言实现。我只想检查特定时间消息队列中是否有任何消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T11:35:51.963

只需使用

```
msgctl() 
```

函数，并在返回时检查 msqid_ds 结构，此结构中的 msg_qnum 是队列中的消息量。这是一个带有示例的链接：[msgctl example](http://uw714doc.sco.com/en/SDK_sysprog/IC_CntllMsgQueues.html#ipc_i6)，它比您想要的更多，但是在 msgctl() 调用之后，您只需检查我上面提到的结构中的该字段。

```
#include <sys/msg.h>

main() {
  int msqid = 2;
  int rc;
  struct msqid_ds buf;
  int num_messages;

  rc = msgctl(msqid, IPC_STAT, &buf);
  num_messages = buf.msg_qnum;
} 
```

这个例子应该做你想做的，并且只做你想做的。

# c# - 我需要计算查询数。我是否需要编写另一个 SQL 查询

> ID：12543343
> 
> 赞同：2
> 
> 时间：2012-09-22T11:32:35.883
> 
> 标签：c#, sql

```
 public void KT1_Sprint3_GetGroupList()
    {
        string Query = 
                "SELECT name,alias,emailAdd FROM dbo.UserAccountDetailsList ua
                 WITH (NOLOCK) INNER JOIN dbo.UserTestType ut WITH (NOLOCK) ON
                 ua.UserTestTypeId = ut.UserTestTypeID WHERE ut.Code in 
                 ('Distribution','TestGroup') and ua.IsActive = 1";

        SQlOperation(Query);

        ??????
    } 
```

我需要计算查询数。我需要编写另一个 SQL 查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:36:32.243

您可以`count`在查询中使用

```
select count(*) as row_count
from your_table ua
where ua.IsActive = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:36:52.457

你想要返回的行数吗？当您循环 ResultSet 时，您可以在代码中增加一个计数器。

对于另一种查询方法：

`SELECT COUNT(*) FROM table AS ua WHERE ua.IsActive=1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T16:44:35.097

由于您封装了实际的 SQL 调用。

```
SQlOperation(Query); 
```

我们无法确定您使用的是什么。

如果您使用数据表，它在

```
dt.rows.count(); 
```

如果您使用的是数据阅读器，则在循环浏览记录时您自己计算它。

我假设您的意图不是单独调用计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:46:29.090

如果您要在需要计数之前执行 Query，只需检查返回的 DataTable 中的行数。如果您想对计数进行单独查询，那么在不重复 Query 中的所有 SQL 逻辑的情况下执行此操作的一种方法是：

```
string CountQuery = @"
    SELECT COUNT(*)
    FROM
    (
        {0}
    ) x
".Format(Query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T11:38:13.000

此查询将为您提供行数 + 所需的行。

```
SELECT ua.COL_NAME,
(SELECT COUNT(*) FROM your_table) as count
FROM your_table ua
WHERE ua.IsActive = 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T11:38:51.400

您可以按如下方式更改您的 SQL 语句：

```
SELECT Name, 
   (SELECT COUNT(*) FROM Table) AS count
FROM Table WHERE Status='URGENT'; 
```

那么你也会有计数。但你为什么要这个？

# android - 当调用 onResume 时，应用程序会抛出 ArrayIndexOutOfBouds

> ID：12543348
> 
> 赞同：0
> 
> 时间：2012-09-22T11:33:11.290
> 
> 标签：android, arrays, onresume

当我单击主页按钮时，会调用 onPause 方法，但是当我调用前面的应用程序时，会调用 onResume 并且它会崩溃。

索引超出范围时有代码：

```
while (isRunning) {
                if (!ourHolder.getSurface().isValid())
                    continue;

                Canvas canvas = ourHolder.lockCanvas();
                canvas.drawRGB(02, 02, 150);
                fingerx = (x - (Gball.getWidth() / 2));
                fingery = (y - (Gball.getHeight() * 2));
                for (int i = 0; i < balls.size(); i++) { // here...
                    ballX[i] = i * 155;
                    canvas.drawText("" + score, 40, 100, paint);
                    canvas.drawBitmap(balls.get(i), ballX[i], ChangingY[i],
                            null); 
```

错误是：

```
FATAL EXCEPTION: Thread-9140
java.lang.ArrayIndexOutOfBoundsException: length=4; index=4
at com.example.mygame.GFXSurface$GameSurface.run(GFXSurface.java:199)
at java.lang.Thread.run(Thread.java:864) 
```

我知道这里的索引应该是 5，但如果是这样，应用程序甚至都不会启动

简历：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    ourSurfaceView.resume();
}

public void resume() {
            isRunning = true;
            ourThread = new Thread(this);
            ourThread.start();
        } 
```

运行方法：

```
@Override
        public void run() {

            for (int j = 0; j < 4; j++) {
                balls.add(j, RandomBall());
            }
            Paint paint = new Paint();
            paint.setColor(Color.RED);
            paint.setTextSize(100);
            paint1.setStyle(Style.FILL);
            paint1.setColor(Color.RED);

            while (isRunning) {
                if (!ourHolder.getSurface().isValid())
                    continue;

                Canvas canvas = ourHolder.lockCanvas();
                canvas.drawRGB(02, 02, 150);
                fingerx = (x - (Gball.getWidth() / 2));
                fingery = (y - (Gball.getHeight() * 2));
                for (int i = 0; i < balls.size(); i++) {
                    ballX[i] = i * 155;
                    canvas.drawText("" + score, 40, 100, paint);
                    canvas.drawBitmap(balls.get(i), ballX[i], ChangingY[i],
                            null);
                    if (x != 0 && y != 0 && mode == 0) {
                        if (fingerx < 0) {
                            canvas.drawBitmap(Gball, 0, fingery, null);
                        } else if (fingery < 0) {
                            canvas.drawBitmap(Gball, fingerx, 0, null);
                        }
                        else
                            canvas.drawBitmap(Gball, fingerx, fingery, null);
                        checkForCollision(i);
                    }
                    if (ChangingY[i] <= canvas.getHeight()) {
                        ChangingY[i] += 1 * speed;
                    } else if (ChangingY[i] > canvas.getHeight()) {
                        ChangingY[i] = -72;
                        if (speed <= 11)
                            speed += 0.25;
                        removeAndAdd(this, i);

                    }
                }

                ourHolder.unlockCanvasAndPost(canvas);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:44:43.283

您正在根据 的大小进行循环，`balls`但在您的循环中，您正在访问两者`ballX` 并`ChangingY`使用 index `i`。如果`ballX`小于球，那么您将获得 ArrayIndexOutOfBoundsException。

由于您`ballX`在循环期间更新数组中的值，因此您可能希望使用`balls`循环开始之前的大小创建一个新数组：

```
ballX = new int[balls.size()]; 
```

不知道 ChangeY 是什么，但你需要确保它至少和球一样大。

# c# - TimeSpan ToString "[d.]hh:mm"

> ID：12543349
> 
> 赞同：11
> 
> 时间：2012-09-22T11:33:18.753
> 
> 标签：c#, tostring, timespan, custom-formatting

我试图将 TimeSpan 格式化为字符串。然后我从 MSDN 获得过期以生成我的自定义字符串格式。但它不说话。它返回“格式异常”。

为什么？我不明白...

```
var ts = new TimeSpan(0, 3, 25, 0);
var myString = ts.ToString("[d'.']hh':'mm"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T11:49:34.653

我认为您正在尝试执行[`c`标准格式](http://msdn.microsoft.com/en-us/library/ee372286.aspx)的可选日期和小数秒部分。据我所知，自定义格式字符串无法直接实现这一点。 [TimeSpan FormatString with optional hours](https://stackoverflow.com/questions/4709505/timespan-format-with-hours-optional)与您遇到的问题相同，我建议与他们的解决方案类似：使用扩展方法为您构建格式字符串。

```
public static string ToMyFormat(this TimeSpan ts)
{
    string format = ts.Days >= 1 ? "d'.'hh':'mm" : "hh':'mm";
    return ts.ToString(format);
} 
```

然后使用它：

```
var myString = ts.ToMyFormat(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T11:38:43.330

当您使用在格式字符串中定义了含义的符号时，通常会发生此错误。调试这些的最好方法是有选择地删除字符，直到它工作。您删除的最后一个字符是问题之一。

在这种情况下，查看[自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)，方括号是问题所在。用“\”转义它们，例如：

```
var ts = new TimeSpan(0, 3, 25, 0);
var myString = ts.ToString("\\[d'.'\\]hh':'mm"); 
```

[编辑：添加]

如果值为 0，则客户自定义 TimeSpan 格式字符串页面上没有提到省略文本的方法。在这种情况下，请考虑`if`语句或`?:`运算符。

# javascript - 为什么在 Chrome 中设置 box-shadow 不起作用？

> ID：12543350
> 
> 赞同：1
> 
> 时间：2012-09-22T11:33:42.723
> 
> 标签：javascript

这是javascript

```
 <script type="text/javascript">
 function Change(obj, evt)
 {
    if(evt.type=="focus")
        obj.className ="textboxOnClickStyle";

    else if(evt.type=="blur")
       obj.className ="textboxStyle";
 }
 </script> 
```

这是文本框的代码

```
<asp:TextBox  ID="txtFirstName" runat="server" CssClass="textboxStyle" onfocus
 ="Change(this, event)" onblur ="Change(this, event)" CausesValidation="True"> 
</asp:TextBox> 
```

我试图通过在单击文本框时应用另一个 CSS 来使我的文本框具有发光/阴影。此代码在 Firefox 中运行良好，但在 chrome 中没有任何反应。谁能指出为什么？

**编辑** CSS 代码

```
.textboxStyle
 {
border-color: #9ECAED;
 border-radius: 3px 3px 3px 3px;

  }

 .textboxOnClickStyle
 {
-moz-box-shadow: 0 0 10px 1px #6DC421;
    -webkit-box-shadow: 0 0 10px 1px #6DC421;
     box-shadow: 0 0 10px 1px #6DC421;

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:18:42.530

根据这个[WebKit 的错误报告 #45417](https://bugs.webkit.org/show_bug.cgi?id=45417)（和[Chromium 的下游一个](http://code.google.com/p/chromium/issues/detail?id=54577)）。您需要将*显式* `border`设置为解决方法才能使其正常工作。

```
.textboxOnClickStyle {
  -moz-box-shadow: 0 0 10px 1px #6DC421;
  -webkit-box-shadow: 0 0 10px 1px #6DC421;
  box-shadow: 0 0 10px 1px #6DC421;
  border: none;
} 
```

# python - dict 模拟 switch 运算符

> ID：12543352
> 
> 赞同：2
> 
> 时间：2012-09-22T11:33:49.613
> 
> 标签：python, python-3.x

在我的教科书中，我读到新手需要一些时间来识别这种结构：

```
choice = 'ham'
print ({
    'spam': 1.25, 
    'ham': 1.99,
    'eggs': 0.99,
    'bacon': 1.10
}[choice]) 
```

结果：

```
The result is 1.99 
```

说实话，我连一根绳子都抓不住，说什么解开。你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T11:36:08.413

它是一个 python 字典文字，结合使用`choice`作为键的查找：

```
mapping = {'spam': 1.25, 'ham': 1.99, 'eggs': 0.99, 'bacon': 1.10}
choice = 'ham'
price = mapping[choice]
print(price) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T12:23:38.360

如果选择不在字典中，您甚至可以将 .get 插入其中以返回一个值。

```
mapping = {'spam': 1.25, 'ham': 1.99, 'eggs': 0.99, 'bacon': 1.10}
choice = 'beans'
price = mapping.get(choice, 'not listed')
print(price) 
```

将返回

```
not listed 
```

# haskell - 多核处理器上的 Haskell 运行时结构

> ID：12543355
> 
> 赞同：4
> 
> 时间：2012-09-22T11:33:59.237
> 
> 标签：haskell, parallel-processing, runtime, multicore, numa

我知道 Haskell 运行时会在每个内核上创建一个操作系统线程。然后运行时将轻量级线程/用户线程调度到这些预先部署的操作系统线程上。大致。

但是 Haskell 运行时是如何构建的——它是整体的，还是由单独的部分组成的？

我真正想知道的是 RT 本身在内核之间的可扩展性和可分布性如何——例如，我理论上是否可以拥有 1000 个内核的系统并在 5% 的内核上启动 Haskell RT（作为 50 个独立或分布式 RT） ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:54:29.660

多核运行时的设计：

*   [多核运行时是如何设计的](http://community.haskell.org/~simonmar/papers/multicore-ghc.pdf)
*   [具有线程局部堆的多核垃圾收集器](http://community.haskell.org/~simonmar/papers/local-gc.pdf)
*   [垃圾收集器服务如何工作](http://community.haskell.org/~simonmar/papers/parallel-gc.pdf)

Cloud Haskell（分布式 Haskell）：

*   [迈向云端的 Haskell](http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/remote.pdf)
*   [Cloud Haskell：开胃菜](http://www.well-typed.com/blog/68)

# javascript - WinJS 导航模板 + ListView

> ID：12543358
> 
> 赞同：1
> 
> 时间：2012-09-22T11:34:37.690
> 
> 标签：javascript, listview, navigation, windows-8, winjs

我从导航模板开始，并尝试将 ListView WinControl 放入页面（不是 home.html）。插入 HTML 可以正常工作，Javascript 也可以正确执行。

但是，当尝试使用 data-win-options 绑定列表视图时，我遇到了我在 JS 中的就绪处理程序中定义的命名空间尚不存在的问题，因此应用程序会引发异常。

如果我在就绪事件之前定义命名空间，也不例外，但我在就绪处理程序中执行的“公共”变量的更新不会反映在 ListView 中，只有当我再次导航回页面时，才是 ListView正确填写数据。

我发现现在使 ListView 工作的唯一方法是直接更新

```
document.getElementById('myListView').winControl.itemDataSource 
```

这真的不是我想走的路。我希望绑定在 HTML 中。

所以总结一下，在Navigation Template中绑定ListView的正确方法是什么？还是只有我一个有这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:53:29.273

这里有几个活动部分。

首先，因为您拥有数据源的变量不是“可观察的”——它不会通知任何人它已更改。这不是 JavaScript 本质上可以做到的。

其次，您已经通过`data-win-options`存储桶传递了它——它只是捕获了值，并没有努力去观察它。

有几种方法可以解决这个问题：

a）利用您找到的方式，但使您的变量可观察，并通过添加更改处理程序在更改时传输值。这不是您想要的声明性，但也不错。

```
var yourVariable = WinJS.Binding.as({ dataSource: null });
yourVariable.bind("dataSource", function(oldVal, newVal) {
    document.getElementById("yourListView").winControl.itemDataSource = newVal;
});

yourVariable.dataSource = getMyDataYo(); 
```

b) 在 HTML 中设置声明式绑定，并使用数据上下文调用 WinJS.Binding.processAll()。

HTML：

```
<div data-win-control="WinJS.UI.ListView"
     data-win-options="{ itemTemplate:... }"
     data-win-bind="winControl.itemDataSource: dataSourceProperty"
</div> 
```

JS：在你准备好的处理程序中：

```
var dataContext = WinJS.Binding.as({ dataSourceProperty: dataSourceInstance });
WinJS.Binding.processAll(element, dataContext); 
```

如果您保存了 dataContext 实例，那么当您`dataSourceProperty`将来使用新的数据源设置时，列表视图将重新加载，并重新布局。

# php - PHP数组函数，返回给定键的子集

> ID：12543361
> 
> 赞同：31
> 
> 时间：2012-09-22T11:35:12.780
> 
> 标签：php, arrays, higher-order-functions, built-in

我正在寻找一个执行以下操作的数组函数：

```
$myArray = array(
  'apple'=>'red',
  'banana'=>'yellow',
  'lettuce'=>'green',
  'strawberry'=>'red',
  'tomato'=>'red'
);
$keys = array(
  'lettuce',
  'tomato'
);

$ret = sub_array($myArray, $keys); 
```

其中 $ret 是：

```
array(
  'lettuce'=>'green',
  'tomato'=>'red'
); 
```

我自己写下来没有问题，问题是我想避免foreach循环并采用内置函数或内置函数的组合。在我看来，这就像一个通用且常见的数组操作 - 如果循环是唯一的选择，我会感到惊讶。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-01-19T21:31:43.337

这有效：

```
function sub_array(array $haystack, array $needle)
{
    return array_intersect_key($haystack, array_flip($needle));
}

$myArray = array(
    'apple'=>'red',
    'banana'=>'yellow',
    'lettuce'=>'green',
    'strawberry'=>'red',
    'tomato'=>'red'
);
$keys = array(
    'lettuce',
    'tomato'
);

$ret = sub_array($myArray, $keys);

var_dump($ret); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T11:41:24.643

您可以使用 array_intersect_key，但它使用带有键和值的第二个数组。它使用键计算数组的交集以进行比较

[array_intersect_key](http://php.net/manual/en/function.array-intersect-key.php)

```
<?php
$array1 = array('blue'  => 1, 'red'  => 2, 'green'  => 3, 'purple' => 4);
$array2 = array('green' => 5, 'blue' => 6, 'yellow' => 7, 'cyan'   => 8);
$array3 = array('green' => '', 'blue' => '', 'yellow' => '', 'cyan' => '');
$array4 = array('green', 'blue', 'yellow', 'cyan');

var_dump(array_intersect_key($array1, $array2));
var_dump(array_intersect_key($array1, $array3));
var_dump(array_intersect_key($array1, $array4));
?> 
```

上面的示例将输出：

```
array(2) {
  ["blue"]=>
  int(1)
  ["green"]=>
  int(3)
}

array(2) {
  ["blue"]=>
  int(1)
  ["green"]=>
  int(3)
}

array(0) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-12T16:54:10.717

> ```
>  $ret = array_filter($myArray, function ($key) use ($keys) {
>         return in_array($key, $keys);
>     }, ARRAY_FILTER_USE_KEY); 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-20T21:01:45.090

单线：

```
$subArray = array_intersect_key($items, array_fill_keys($keys, 1)); 
```

例子：

```
<?php
$items = [ 'product_id' => 1234, 'color' => 'green', 'qty' => 5, 'desc' => 'Shirt' ];
$keys = [ 'product_id', 'desc' ];
$subArray = array_intersect_key($items, array_fill_keys($keys, 1));
var_dump($subArray); 
```

产生：

```
array(2) {
  ["product_id"]=>
  int(1234)
  ["desc"]=>
  string(5) "Shirt"
} 
```

适用于：

*   数字键，
*   关联数组，
*   混合数组，
*   具有非唯一值的数组

# asp.net - 多个子域 FormsAuthentication 不起作用，使用 Web API MVC 4

> ID：12543362
> 
> 赞同：2
> 
> 时间：2012-09-22T11:35:16.207
> 
> 标签：asp.net, cookies, forms-authentication, asp.net-web-api

我正在做一个需要网站和移动应用程序的项目，几乎具有相同的功能。因此，为此我正在使用**Asp.net Web API**构建 API ，它也将用于网站和移动应用程序。

API地址是：api.domain.com 网站地址是：testing.domain.com

问题：

现在在 api.domain.com，我允许用户登录，**FormsAuthentication**在那里与**Cookies**一起使用。

当用户通过身份验证时，它会获得**200 个 Http Satus**以及**Set-Cookie** Header，其中还提到了允许的域。

这是请求和响应：

```
**Request**

Request URL:http://api.domain.com/account/login
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:139
Content-Type:application/x-www-form-urlencoded
Host:api.domain.com
Origin:http://testing.domain.com
Referer:http://testing.domain.com/Login.aspx?ReturnUrl=%2fteacherpanel
User-Agent:Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Form Dataview URL encoded
__VIEWSTATE:/wEPDwUKMTY1NDU2MTA1MmRkmpJ4YQ4kteUpklwLOmcHppPgq/RHqfw7tilyk8pJp0Y=
UserName:ishan
Password:pass

**Response**

Access-Control-Allow-Headers:Content-Type
Access-Control-Allow-Methods:PUT, GET, POST, DELETE, OPTIONS
Access-Control-Allow-Origin:*
Cache-Control:no-cache
Content-Length:0
Date:Sat, 22 Sep 2012 10:23:38 GMT
Expires:-1
Pragma:no-cache
Server:Microsoft-IIS/7.5
Set-Cookie:.Teacher=A3BD94D26CF733F6F223198ADE40D87C76D8ECC663D7CEDD6E3FF18B0ED23032F6089EF24141E0B65F3F29503A3AC1670C92B9CE4EF7D986974ABE61AB5F0C837245D1A30A8D8E8E058F9AFDD89281CBAB9A3EB98B4A320E689718AF9E76E4911506EBA7FD4244336D8409CFB6D77B179764726B550AB0FFF7A6508658615A57; domain=domain.com, .domain.com; path=/; HttpOnly
X-AspNet-Version:4.0.30319
X-Powered-By:ASP.NET 
```

现在根据响应，浏览器应该将此 cookie 发送到服务器，并将每个请求发送到此域**domain.com**或其任何子**域**。

但这并没有发生，今天早上它对我有用，但我不知道发布后发生了什么。

另外为了更多参考，这里是我用来设置 cookie 并检查用户是否登录的代码。

此处为登录用户，此检查在 API 中执行，位于 api.domain.com。

```
[AllowAnonymous]
        [HttpPost]
        public HttpResponseMessage Login(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                Teacher t;
                if (Teacher.Login(model.UserName,model.Password,out t))
                {
                   // Roles.AddUserToRole(t.ID.ToString(), "teacher");

                    FormsAuthentication.SetAuthCookie(t.ID.ToString(), model.RememberMe);

                    FormsAuthenticationTicket ft = new FormsAuthenticationTicket(
                     1,                                   // version
                     t.ID.ToString(),   // get username  from the form
                     DateTime.Now,                        // issue time is now
                     DateTime.Now.AddMinutes(30),         // expires in 10 minutes
                     true,      // cookie is not persistent
                     "teacher"                              // role assignment is stored
                        // in userData
                     );

                    string enTicket = FormsAuthentication.Encrypt(ft);

                    HttpResponseMessage res = Request.CreateResponse(HttpStatusCode.OK);

                    System.Net.Http.Headers.CookieHeaderValue cokie = new System.Net.Http.Headers.CookieHeaderValue(FormsAuthentication.FormsCookieName, enTicket);
                    cokie.Domain = "domain.com  .domain.com";
                    IEnumerable<System.Net.Http.Headers.CookieHeaderValue> cookies = new System.Net.Http.Headers.CookieHeaderValue[] { cokie };

                    res.Headers.AddCookies(cookies);

                    return res;

                }
                return Request.CreateResponse(HttpStatusCode.Unauthorized);
            }

            // If we got this far, something failed, redisplay form
            return Request.CreateResponse(HttpStatusCode.Unauthorized);
        } 
```

现在在 testing.domain.com，只需在 web.config 中根据其角色检查用户的身份验证。

```
<location path="TeacherPanel">
    <system.web>
      <authorization>
        <allow roles="teacher" />
        <deny users="?" />
      </authorization>
    </system.web>
  </location> 
```

这些是我发现通过这个问题进行研究的细节。随意提出任何建议，每条线索都会有所帮助。

**testing.domain.com 的 Web 配置中的身份验证部分**

```
 <authentication mode="Forms">
      <forms name=".Teacher" loginUrl="Login.aspx" protection="All" path="/" timeout="30" domain=".domain.com" />
    </authentication> 
```

**api.domain.com 的 Web 配置中的身份验证部分**

```
 <authentication mode="Forms">
  <forms  name=".Teacher"
    cookieless="UseCookies"
    requireSSL="false"
     domain=".domain.com"
     />
</authentication> 
```

**添加机器密钥并将过期时间添加到 Cookie 后**

**通过浏览器发布请求以进行身份​​验证：**

```
POST /account/login HTTP/1.1
Host: api.domain.com
Connection: keep-alive
Content-Length: 123
Origin: http://testing.domain.com
User-Agent: Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Content-Type: application/x-www-form-urlencoded
Accept: */*
Referer: http://testing.domain.com/TeacherLogin.aspx?ReturnUrl=%2fteacherpanel
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

__VIEWSTATE:/wEPDwUKMTY1NDU2MTA1MmRkCjMwS9YdCRDD3Qsd4GYnLj+tGGg=
UserName:username
Password:pass 
```

**服务器发送的响应：**

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Server: Microsoft-IIS/7.5
Set-Cookie: .Teacher=9C8FD43FABDC1817D21272361CBF798BB64C364DECC62E2F5F666D1B2A248076C67737D89B03F515D4D81524345584B11E206B2DDEAD5AA846A15BC17B32D86DF1C95A2943766AB5955C99A8DD0D5984089131838E158A90241B60D40A2D928086486E2BA3DDE95814E7FA303845FBDE235D69F54B6891852A09A80F7465FF8C59957A4D; expires=Wed, 26 Sep 2012 10:02:46 GMT; max-age=432000; domain=.domain.com; path=/; secure; httponly
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: PUT, GET, POST, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type
Date: Tue, 25 Sep 2012 10:02:46 GMT
Content-Length: 0 
```

**接下来获取发送到 testing.domain.com 的请求以进行测试（由于浏览器未将 cookie 发送回服务器而失败）：**

```
GET / HTTP/1.1
Host: testing.domain.com
Connection: keep-alive
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Accept: */*
Referer: http://testing.domain.com/TeacherLogin.aspx?ReturnUrl=%2fteacherpanel
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

**猜猜为什么浏览器不发回 Cookie？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:55:14.583

这里可能会发生两件事：

1.  如果您在 API 和测试 web.config 中都没有 machinekey，那么您可能正在使用从 .Net Framework machine.config 或 web.config 继承的设置。这将为每个应用程序生成不同的密钥，因此在一个应用程序中发布的 cookie 不能被另一个应用程序解密。您应该将相同的[machinekey 部分](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.100%29.aspx)添加到每个 web.config。您可以使用许多在线生成器之一，例如[这个](http://aspnetresources.com/tools/machineKey)。

2.  另一个问题是尝试将多个域放在单个 cookie 中。更改此行：

    cokie.Domain = "domain.com .domain.com";

对此：

```
cokie.Domain = ".domain.com"; 
```

实际上，查看您的部分，您甚至可能不需要此行，因为它们都设置为在 .domain.com 发出 cookie

编辑：还检查您的 web.config 的[httpCookies 部分](http://msdn.microsoft.com/en-us/library/ms228262%28v=vs.90%29.aspx)，以控制是否在设置了安全标志的情况下发送 cookie。例如在开发环境中你想关闭安全标志：

```
<httpCookies httpOnlyCookies="true" requireSSL="false" /> 
```

还有[表单标签 requireSSL property](http://msdn.microsoft.com/en-us/library/1d3t3c61%28v=vs.90%29.aspx)，但我认为这不适用于您的情况，因为您是手动发布 cookie。

# c# - 在 F# 中使用 SqlDataReader

> ID：12543363
> 
> 赞同：8
> 
> 时间：2012-09-22T11:35:44.337
> 
> 标签：c#, list, ado.net, f#, sqlclient

在 C# 中，我使用 sql 脚本将数据添加到 List 中，其中 T 将是一个类，其字段/属性映射到 sql 脚本。

我怎么能在 F# 中做到这一点？这篇文章以标准方式使用存储过程。

```
using (conn)
{
    conn.Open();
    using (SqlCommand cmd = new SqlCommand("dbo.query_here", conn))
    {
    cmd.CommandText = "dbo.query_here";
    cmd.CommandType = System.Data.CommandType.StoredProcedure;
    cmd.CommandTimeout = 600;
    cmd.Parameters.Add(new SqlParameter("@x1", Convert.ToString(x)));
    cmd.Parameters.Add(new SqlParameter("@y1", y));
    cmd.Parameters.Add(new SqlParameter("@z1", z));
    SqlDataReader reader = cmd.ExecuteReader();
    while (reader.Read())
    {
        MyListOfClasses.Add(new MyDataClass(reader.GetInt32(reader.GetOrdinal("x"))           
                                            reader.GetDouble(reader.GetOrdinal("y")),
                                            reader.GetDouble(reader.GetOrdinal("a")),
                                            reader.GetDouble(reader.GetOrdinal("b"))));
    }
    reader.Close();
}
conn.Close(); 
```

我意识到 F# 可能并不像这样直接，但我需要以类似的方式将这些数据放入 F# 列表中。也更喜欢本质上不起作用的建议，并遵循与 C# 代码类似的模式。

在以前的线程中，有人建议使用记录，但这仍然与 SqlDataReader 无关。最好有一个类列表，这样我就可以在每个项目上使用 getter 和 setter。

我应该在“为什么不只使用 C#”的不可避免的评论之前添加。很明显我可以使用 C#，但我正在探索用 F# 编写算法的可能性，为此我需要从 SQL Server 获取我的原始数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T17:38:59.803

如果您想`results`在 F# 列表中返回，列表推导式适合在这里使用。并且使用`use`关键字，您不需要显式处理对象。

```
use conn = (* Initialize sql connection here *)
conn.Open()
use cmd = new SqlCommand("dbo.query_here", conn)
cmd.CommandText <- "dbo.query_here"
cmd.CommandType <- System.Data.CommandType.StoredProcedure
cmd.CommandTimeout <- 600
cmd.Parameters.Add(new SqlParameter("@x1", Convert.ToString(x)))
cmd.Parameters.Add(new SqlParameter("@y1", y))
cmd.Parameters.Add(new SqlParameter("@z1", z))
use reader = cmd.ExecuteReader()
let results =
 [ while reader.Read() do
    yield new MyDataClass(reader.GetInt32(reader.GetOrdinal("x")),           
                          reader.GetDouble(reader.GetOrdinal("y")),
                          reader.GetDouble(reader.GetOrdinal("a")),
                          reader.GetDouble(reader.GetOrdinal("b"))) ] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T11:59:48.247

使用普通的旧 ADO.NET 处理数据库实际上可以使用 F# 动态运算符非常好`?`。我写了一篇[MSDN 文章，它实现了一个帮助](http://msdn.microsoft.com/en-us/library/hh304373%28v=vs.100%29.aspx)程序，让您可以编写如下内容：

```
let myListOfClasses = 
  [ let db = new DynamicDatabase(connectionString)
    let rows = db.Query?query_here(string x, y, z)
    for r in rows do 
      yield MyDataClass(row?x, row?y, row?a, row?b) ] 
```

这使用动态调用运算符`?`来调用存储过程 ( `db.Query?query_here`)。当你调用它时，你可以给它参数，就像它是一个普通的函数调用一样（它会将它们添加为 SQL 参数）。然后您还可以使用`row?x`读取属性 - 这从`MyDataClass`参数的类型推断类型，因此假设这些匹配，您不需要自己编写类型转换。

以下是讨论此问题的 MSDN 教程的链接：

*   [如何：动态调用存储过程](http://msdn.microsoft.com/en-us/library/hh304373%28v=vs.100%29.aspx)
*   [第 1 步：创建数据库并显示轮询选项](http://msdn.microsoft.com/en-us/library/hh304370%28v=vs.100%29.aspx)
*   [第 2 步：对选项实施投票](http://msdn.microsoft.com/en-us/library/hh304362(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-22T11:42:07.953

你可以阅读这个

链接： http: [//www.codeproject.com/Articles/95656/Using-a-DataRader-like-a-List-in-F](http://www.codeproject.com/Articles/95656/Using-a-DataRader-like-a-List-in-F)

```
let rdr = cmd.ExecuteReader()

rdr
|> SomeRecord.asSeq                     // project datareader into seq<SomeRecord>
|> Seq.sumBy (fun r-> r.val1 * r.val2)  // now you can use all the Seq operators 
                                        // that everybody knows. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-22T11:49:34.423

未经测试的 F# 翻译

```
use conn = ???
conn.Open()
using new SqlCommand("dbo.query_here", conn)(fun cmd ->

    cmd.CommandText <- "dbo.query_here"
    cmd.CommandType <- System.Data.CommandType.StoredProcedure
    cmd.CommandTimeout <- 600
    cmd.Parameters.Add(new SqlParameter("@x1", Convert.ToString(x)))
    cmd.Parameters.Add(new SqlParameter("@y1", y))
    cmd.Parameters.Add(new SqlParameter("@z1", z))
    let reader = cmd.ExecuteReader()
    while (reader.Read()) do
        MyListOfClasses.Add(new MyDataClass(reader.GetInt32(reader.GetOrdinal("x"))           
                                            reader.GetDouble(reader.GetOrdinal("y")),
                                            reader.GetDouble(reader.GetOrdinal("a")),
                                            reader.GetDouble(reader.GetOrdinal("b"))))

    reader.Close()
)
conn.Close()
MyListOfClasses.ToArray() |> List.ofArray 
```

# ruby-on-rails - Ruby on Rails 入门 - 脚手架

> ID：12543365
> 
> 赞同：0
> 
> 时间：2012-09-22T11:35:45.843
> 
> 标签：ruby-on-rails, scaffolding

我是新来的轨道。

当我为用户生成脚手架时，在 products/index.html 我有这个代码

```
<h1>Listing users</h1>

<table>
  <tr>
    <th>Name</th>
  </tr>

<% @users.each do |user| %>
  <tr>
    <td><%=h user.name %></td>
    <td><%= link_to 'Show', user %></td>
    <td><%= link_to 'Edit', edit_user_path(user) %></td>
    <td><%= link_to 'Destroy', user, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New user', new_user_path %>

-------------------------------------------------------------------------------------------------------------------------------

My doubt is in link_to tags,

<%= link_to 'Show', user %>
<%= link_to 'Edit', edit_user_path(user) %>
<%= link_to 'New user', new_user_path %> 
```

为什么不 show_user_path(user) ？对于第一个链接“显示”，任何帮助都会受到欢迎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:40:11.440

show_user_path 会起作用，只是更冗长。

欢迎来到 Ruby on Rails 的魔力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:14:06.513

在生成脚手架时，您创建了**资源**“用户”，这就是为什么您可以“按原样”使用它的原因`link_to`：rails 知道您想查看资源用户。 **指向控制器**`show_user_path(user)`的链接直接显示操作。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:02:00.707

这是 Ruby on Rails 中的约定，您也可以使用`show_user_path(user)`.**

# php - 为什么这个查询不起作用？

> ID：12543371
> 
> 赞同：0
> 
> 时间：2012-09-22T11:36:20.467
> 
> 标签：php, sql

这是查询：

```
$fullDate = 2012-01-01;
$event = 'String';
$sql = $db->query("INSERT INTO agenda (date, event) VALUES ($fullDate, $event)"); 
```

它不执行，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T11:38:25.370

您必须引用插入的值：

```
$sql = $db->query("INSERT INTO agenda (date, event) VALUES ('$fullDate', '$event')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:41:48.340

如果您使用的是 PDO，则使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)更安全：

```
$stmt = $db->prepare("INSERT INTO agenda (date, event) VALUES (?, ?)");
$stmt->execute(array($fullDate, $event)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:41:55.113

```
$sql = $db->query("INSERT INTO agenda (date, event) VALUES ('$fullDate', '$event)'");

if (PEAR::isError($sql)) 
{ 
die($sql->getMessage()); 
} 
```

# mozilla - 如何使用 emacs 和 cedet 处理 Mozilla 项目？

> ID：12543373
> 
> 赞同：1
> 
> 时间：2012-09-22T11:36:37.403
> 
> 标签：mozilla, cedet, emacs24

我正在做 Mozilla 项目，我使用 emacs。这是一个相当大的项目，所以我尝试使用 cedet 来帮助我。我对elisp的东西不是很熟悉。那么有人能告诉我如何使用 ede 管理代码空间吗？

顺便说一句，我正在使用 emacs24 和 cedet 1.1

# visual-studio-2010 - Windows 8 上的 Visual Studio 2008/2010 - 有问题吗？

> ID：12543374
> 
> 赞同：12
> 
> 时间：2012-09-22T11:36:42.877
> 
> 标签：visual-studio-2010, visual-studio-2008, windows-8, visual-studio-2012, compatibility

我正在寻找可以提供的有关在 Windows 8 (x64) 上使用 Visual Studio 2008 和 2010 的问题的任何信息。我已经能够找到以下[文章](http://support.microsoft.com/kb/2735834)，该文章确定了 W8 上 VS2010 的公认问题，但我找不到任何与 VS2008 类似的文章。

具体来说，我使用 VS2008 进行移动开发，所以我不能简单地将项目升级到 2010/2012（还），但我也有一些 Web 应用程序项目，甚至可能还有一些控制台和/或 Windows 窗体项目也在进行中。

我希望将 Visual Studio 2008、2010 和 2012 并排安装。

我知道显而易见的答案是尝试它，但在升级我的生产 PC 之前我需要有信心，因此想听听其他用户可能遇到的任何问题（任何已确定与他们一起使用的解决方法）合适的）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T13:24:18.500

我和一位同事现在已经在 Windows 8 上同时运行 VS2008、VS2010 和 VS2012 一段时间了，并且还没有发现这样做的任何问题。

因此，我必须承认没有问题。

请注意，这包括 VS2008 上的移动、Web 和报告项目、VS2010 上的 Web 和 WPF 项目以及 VS2012 上的 Web、WPF 和 WinForms 项目，所以我认为那里有足够的传播来证明我的回答是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T11:41:59.100

> 我希望将 Visual Studio 2008、2010 和 2012 并排安装。

不，你真的不再需要那个了。实际上，使用 VS2012，您在打开项目时不需要升级项目（最后！！！）。您可以在不修改其格式的情况下打开 VS2010 项目。它们仍将与旧版本兼容。所以你真的不再需要 VS2008 和 VS2010。

就我个人而言，我只在 Windows 8 x64 上使用 VS2012 并在 VS2012 项目上工作，没有任何问题。

# javascript - Wrapper 忽略 jQuery 中的隐藏 div

> ID：12543376
> 
> 赞同：1
> 
> 时间：2012-09-22T11:36:45.210
> 
> 标签：javascript, jquery, filter, hidden

我正在使用这个小包装插件：

[https://github.com/tsevdos/nwrapper](https://github.com/tsevdos/nwrapper)

```
(function($) {

$.fn.nwrapper = function(options){

    var defaults = {
        wrapEvery : 1,
        defaultClasses : true,
        extraClasses : false,
        htmlStructure : 'div'
    };

    settings = $.extend({}, defaults, options);

    var elements = $(this).children();
    var elementsLen = elements.length;

    for ( var i = 0, numb = 1; i < elementsLen; i += settings.wrapEvery, numb++ ){

        // Default Classes Array
        var classes = [];
        if ( settings.defaultClasses ) {

            classes[0] = 'wrapper';
            classes[1] = 'wrapper-' + numb;

            if (numb==1) {
                classes[2] = 'first';
            }

            if (numb==Math.ceil(elementsLen/settings.wrapEvery)) {
                classes[2] = 'last';
            }

        }

        // Merge Default class with Extra Class
        if ( settings.extraClasses ) {
            $.merge( classes, settings.extraClasses );
        }

        // If you find any classes crete the class string
        if ( classes.length > 0 ) {
            htmlClassesString = 'class="' + classes.join(" ") + '"';
        } else {
            htmlClassesString = '';
        }

        elements.filter(':eq(' + i + '), :lt(' + (i + settings.wrapEvery) + '):gt(' + i + ')').wrapAll('<' + settings.htmlStructure + ' ' + htmlClassesString + ' />');

    }

    return $(this);
};

})(jQuery); 
```

基本布局将是：

```
<div id="container">
   <div class="filter1">Value</div>
   <div class="filter2">Value</div> 
   <div class="filter3">Value</div> 
   <div class="filter1">Value</div> 
   <div class="filter2">Value</div> 
   <div class="filter3">Value</div>
   <div class="filter1">Value</div> 
   <div class="filter2">Value</div> 
   <div class="filter3">Value</div>  
   ... 
</div> 
```

初始化插件：

```
$('#container').nwrapper({ wrapEvery : 3 }); 
```

我使用隐藏/显示子 div 的选择过滤器，然后重新初始化插件。我想知道是否可以从包装计数中排除隐藏的 div？

最后我使用 jQuery 循环来显示包装的 div，所以隐藏的 div 应该在包装内（但不计算在内）。否则循环会将每个隐藏的 div 视为一个项目。

也许这个插件不是我想要实现的最佳工具。它将产生以下内容：

我想包装每三个可见的 div，但也包括隐藏的。

```
<div id="container">
  <div class="wrapper wrapper-1 first">
    <div class="filter1">Value</div>
    <div class="filter2">Value</div>
    <div class="filter3" style="display:none;">Value</div>
    <div class="filter1">Value</div>
  </div>
  <div class="wrapper wrapper-2 last">
    <div class="filter2">Value</div>
    <div class="filter3" style="display:none;">Value</div>
    <div class="filter1">Value</div>
    <div class="filter2">Value</div>
    <div class="filter3" style="display:none;">Value</div>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:49:34.517

您可以尝试使用`:visible`选择器，尽管我不确定它在 IE 上的效果如何。

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:50:41.317

您可以相应地修改插件。喜欢

替换这个：

```
var elements = $(this).children(); 
```

和

```
var elements = $(this).children(":visible"); 
```

==================================================== ====================

@teeraina，就您的问题而言，“我需要将隐藏的 div 包含在包装 div 中（但不计算在内）”您可以试试这个：

```
var elements = $(this).children();
var elementsLen = $(this).children(":visible").length; 
```

希望这会有所帮助！

# c# - 错误重定向到另一个页面错误

> ID：12543380
> 
> 赞同：0
> 
> 时间：2012-09-22T11:37:20.573
> 
> 标签：c#, asp.net

我想将页面重定向到“Customer/MyReservation.aspx”。下面的代码重定向到“Customer/Reservation/MyReservation.aspx”。如何正确重定向。

`Response.Redirect("MyReservation.aspx")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:44:45.500

在将页面重定向到*MyReservation.aspx*之前，您位于*Customer/Reservation文件夹中*

 *所以首先你必须去你的父目录，即*客户*

使用以下代码

```
 Response.Redirect("../MyReservation.aspx"); 
```

代替`Response.Redirect("MyReservation.aspx");`*

# jquery - 如何使用 Jquery 将具有相同值的数据导入 SQLite

> ID：12543381
> 
> 赞同：1
> 
> 时间：2012-09-22T11:37:26.300
> 
> 标签：jquery, sqlite, insert

您好我有以下数据

```
1    aaaa       
2    bbbb     
1    aaaa
3    cccc
2    bbbb
3    cccc 
```

我想将上述数据导入到这样的 SQLite

```
1    aaaa
2    bbbb
3    cccc 
```

相同的号码必须导入一次。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:57:55.137

使用以下命令创建表：

```
CREATE TABLE T1 
ID     INTEGER PRIMARY KEY AUTOINCREMENT,
C1     VARCHAR(60) UNIQUE 
```

然后使用

```
insert or replace into T1 (C1) values ( ... ) 
```

# mono - Mono 中的单元测试 NETPortable 库

> ID：12543392
> 
> 赞同：0
> 
> 时间：2012-09-22T11:38:52.030
> 
> 标签：mono, nunit, monodevelop

我刚刚开始了一个具有服务器和客户端的单声道项目。计划是将服务器和客户端之间的所有通用代码包含在 .NET 便携式库中，因此我不必重新实现东西......但是，我找不到一个体面的方法来对我的库进行单元测试.

Monodevelop 不允许我将 nunit 测试装置直接添加到项目中，因此我创建了一个新的空项目，我将所有的 nunit 测试装置添加到该项目中。该项目引用了该库。在我的可移植库和测试项目中引用 System.Net.Sockets 时出现问题。我收到一个错误，可能是由于可移植库使用的配置文件/框架与我的测试项目不同......

将单元测试添加到我的可移植库的最佳方法是什么？：/

# javascript - Javascript 中存在哪些类型的范围？

> ID：12543395
> 
> 赞同：0
> 
> 时间：2012-09-22T11:39:02.743
> 
> 标签：javascript, scope, closures, lexical-scope

我知道有*全局范围，*还有*可嵌套的功能范围*。但是 Javascript 中还有其他类型的作用域或闭包吗？

当我们讨论这个话题时，范围和闭包之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:06:31.627

闭包是一堆可见范围。假设您有以下代码：

```
var v1;
function a() {
    var v2;
    function b() {
        var v3;
        function c() {
            var v4;
        }
        return c;
    }
    return b();
}
var f = a(); 
```

`c`是一个有 4 个可见作用域的函数：它自己的作用域（`v4`定义在哪里）、`b`函数的作用域（`v3`定义在哪里）、`a`函数的作用域（定义在哪里`v2`）和全局作用域（`v1`定义在哪里）。那堆可见范围是闭包，函数绑定到该闭包。当对`c`函数的引用在调用链中返回时，从`b`to`a`并最终分配到`f`，它带有这个闭包绑定，所以当你调用`f()`，它将可以访问所有这些范围，即使您似乎是在全局范围内调用函数。如您所见，只涉及两种作用域——全局作用域和函数作用域。主要区别在于全局范围内的变量被定义为全局对象的属性，而函数范围 vars*不是*任何对象的属性，不能以任何其他方式引用，只能通过名称引用。闭包本身不是作用域，而是作用域的集合。

# javascript - 在电话间隙。在所有 html 页面中包含 cardova-2.0.0.js 是否有必要？

> ID：12543396
> 
> 赞同：1
> 
> 时间：2012-09-22T11:39:03.550
> 
> 标签：javascript, cordova

在电话间隙。是否需要在所有 html 页面中包含 cardova-2.0.0.js ？

```
in other html page it not display device property in ondeviceready() function and if i include second time in another page cardova is not loading...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:44:21.020

不，没有必要对所有页面都这样做。

不建议在应用程序中使用不同的页面。仍然如果你需要这样做使用 HTML5 元素 **在应用程序中进行分页。它不是一个正确的代码只是谷歌它。你找到了解决方案。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:21:21.563

这取决于。

如果您的导航是由 Jquery Mobile 之类的工具完成的，其中二级页面通过 Ajax 加载，您的 Javascript 代码将保留在 index.html 页面中。

但是，如果您的代码将用户直接导航到您的新页面，则需要加载新的 Javascript，因为它不存在。**

# mysql - 执行包含删除查询的存储过程的用户是否需要删除权限？

> ID：12543397
> 
> 赞同：8
> 
> 时间：2012-09-22T11:39:09.550
> 
> 标签：mysql, sql, sql-server, tsql, stored-procedures

还是仅在执行不是存储过程的查询时才需要授予他们从表中删除记录的权限？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T11:44:08.557

> 执行包含删除查询的存储过程的用户是否需要删除权限？

不，这就是您可以将此类操作抽象为存储过程的原因之一。用户需要的只是`EXEC`授予存储过程的权限。这是因为假定存储过程的作者只允许从表中删除记录的有效情况。

> 仅当他们执行不是存储过程的查询时，是否需要授予他们从表中删除记录的权限

对，他们需要`DELETE`表的权限才能使用`DELETE`DML 操作删除记录。

# php - 自行刷新页面 - 无需查看

> ID：12543401
> 
> 赞同：-2
> 
> 时间：2012-09-22T11:39:50.297
> 
> 标签：php, jquery, ajax, mysqli

这就是我构建查找系统的方式，但是当它发送到数据库时就是这样。然后您再次访问该站点以显示您已写入该页面的信息。

所以必须有一个或其他系统可以获取最新信息到一边，但如果你点击 F5 发送它只是信息到页面。所以一定做了一些将被发送到文件的事情。

仅当某些内容不为空，并且您点击了部分。所以只要听听你的帮助就可以去做或模仿。

我希望只是作为下载信息的ajax到一边。或 jquery 或类似的东西，它可以自己提供信息。

```
<?php
                if($_SESSION["logged_in"])
                {
                echo "<div class=\"opslag-indhold\">";

                ?>
                <form name="opslag" method="post" action="#">
                    <input type="text" name="opslag_indhold" id="del_indhold">
                    <input type="submit" name="opslag" value="Del" id="del">
                </form>
                <?php
                if(isset($_POST["opslag"]))
                {
                    if(!empty($_POST["opslag_indhold"]))
                    {
                        if($stmt = $mysqli->prepare('INSERT INTO `opslag` (`tekst`, `id_bruger`) VALUES (?, ?)'))
                        {
                            $stmt->bind_param('si', $tekst, $id_bruger);

                            $tekst = $_POST["opslag_indhold"];
                            $id_bruger = $_SESSION["id"];

                            $stmt->execute();
                            $stmt->close();

                            echo "Du har skrevet indhold";

                        }
                    }
                    else
                    {
                        echo "Du skal skrive noget";
                    }
                }
                ?>
                </div>
                <?php
                }
                ?> 
```

**如果您有想法，请随时问我**

欢迎你问我有什么想知道的吗？

更多！

```
<?php
                if($_SESSION["logged_in"])
                {
                echo "<div class=\"opslag-indhold\">";

                ?>
                <form name="opslag" method="post" action="#">
                    <input type="text" name="opslag_indhold" id="del_indhold">
                    <input type="submit" name="opslag" value="Del" id="del">
                </form>
                <?php
                if(isset($_POST["opslag"]))
                {
                    if(!empty($_POST["opslag_indhold"]))
                    {
                        if($stmt = $mysqli->prepare('INSERT INTO `opslag` (`tekst`, `id_bruger`) VALUES (?, ?)'))
                        {
                            $stmt->bind_param('si', $tekst, $id_bruger);

                            $tekst = $_POST["opslag_indhold"];
                            $id_bruger = $_SESSION["id"];

                            $stmt->execute();
                            $stmt->close();

                            echo "Du har skrevet indhold";

                        }
                    }
                    else
                    {
                        echo "Du skal skrive noget";
                    }
                }
                ?>
                </div>
                <?php
                }
                ?> 
```

**这里将发布到页面**

```
<div class="opslag_midt-indhold">
            <?php
                if ($stmt = $mysqli->prepare('SELECT `tekst`, `id_bruger` FROM `opslag`ORDER BY `opslag`.`id_opslag` DESC LIMIT 15')) { 
                $stmt->execute();
                $stmt->store_result();
                $stmt->bind_result($tekst, $id_bruger);

                while ($stmt->fetch())
                {
                ?>
                <div class="opslag_bruger_info_profil">
                        <div class="pas-indhold">
                        <?php
                        if($id_bruger == $_SESSION["id"])
                        {
                            if ($stmt_1 = $mysqli->prepare('SELECT `brugernavn`, `profilbillede`, `profilbillede_godkendt` FROM `bruger` WHERE `id_bruger` = ?'))
                            { 
                                $stmt_1->bind_param('i', $id);
                                $id = $id_bruger;

                                /* Eksekver forespørgslen */
                                $stmt_1->execute();

                                /* Bind resultatet */
                                $stmt_1->bind_result($brugernavn, $profilbillede, $profilbillede_godkendt);

                                /* Hent rækker og udskriv data */
                                while ($stmt_1->fetch())
                                {
                                    if($profilbillede_godkendt == 0)
                                    {
                                        echo "<a href=\"/profil/$id_bruger/\"><img src=\"/profil/users.png\" alt=\"\" height=\"115\" width=\"100\" border=\"0\"></a>";
                                    }
                                    else
                                    {
                                        echo "<a href=\"/profil/$id_bruger/\"><img src=\"/profil/$profilbillede\" alt=\"\" height=\"115\" width=\"100\" border=\"0\"></a>";
                                    }
                                }
                                $stmt_1->close();
                            }
                        }
                        else
                        {
                            if ($stmt_2 = $mysqli->prepare('SELECT `brugernavn`, `profilbillede`, `profilbillede_godkendt` FROM `bruger` WHERE `id_bruger` = ?'))
                            { 
                                $stmt_2->bind_param('i', $id);
                                $id = $id_bruger;

                                /* Eksekver forespørgslen */
                                $stmt_2->execute();

                                /* Bind resultatet */
                                $stmt_2->bind_result($brugernavn, $profilbillede, $profilbillede_godkendt);

                                /* Hent rækker og udskriv data */
                                while ($stmt_2->fetch())
                                {
                                    if($profilbillede_godkendt == 0)
                                    {
                                        echo "<a href=\"/profil/$id_bruger/\"><img src=\"/profil/users.png\" alt=\"\" height=\"115\" width=\"100\" border=\"0\"></a>";
                                    }
                                    else
                                    {
                                        echo "<a href=\"/profil/$id_bruger/\"><img src=\"/profil/$profilbillede\" alt=\"\" height=\"115\" width=\"100\" border=\"0\"></a>";

                                    }
                                }
                                $stmt_2->close();
                            }
                        }
                        ?>
                        <?php echo $tekst;?>
                        </div>
                    </div>
                <?php
                }
                $stmt->close();
            } else {
                echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error;
            }
            ?>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:08:32.213

您需要的是[ajax](http://api.jquery.com/jQuery.ajax/)，最好使用 jQuery。

你可以像这样使用它：

```
$('#mybutton').on('click',function(){
    $.ajax({
        type: 'POST', //define post or get
        data: 'id=1&kind=bla', //replace with your needed parameters that you can retrieve as post paramaters in the called php script like $_POST['id'] and $_POST['kind']
        url: yourphpscript.php //call the php script that does something for you
        success: function(feedback){ //feedback will store everything that the php script echoes
            alert(feedback); //do something here with normal javascript/jQuery code
        }
    }).error(function(){ //Handle errors, e.g. unavailability of your php script
        alert('Something went wrong!');
    });
}); 
```

检查内容是否不为空等应该在 php 中完成，就像任何其他验证一样。永远不要只验证客户端！

在成功函数的主体中，您可以执行[附加](http://api.jquery.com/append/)div、[更改](http://api.jquery.com/html/)元素内的 html 等操作。

您的 php 脚本应该类似于以下内容：

```
<?php
    $id=$_POST['id'];
    $kind=$_POST['kind'];

    //Save some stuff in the db

    //Echo out whatever shall be displayed in the browser, e.g.
    echo "Du har skrevet indhold";
?> 
```

然后 js var`feedback`将保存值“Du har skrevet indhold”。

# jsf-2 - preRenderView 不使用 ui:include 触发

> ID：12543405
> 
> 赞同：1
> 
> 时间：2012-09-22T11:40:33.243
> 
> 标签：jsf-2, primefaces

我有一个典型的 JSF 模板菜单结构和页面。下面是我主页的代码

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="/templates/internal3section.xhtml">
<ui:define name="events">
    <f:event listener="#{mainBean.entryGate}" type="preRenderView" />
</ui:define>

<ui:define name="headerarea">
<p:panel style="margin:10px;">
    <h:outputText value="WelCome "></h:outputText><br/>
    <h:outputText value="You are using the application to view data for"></h:outputText><br/>
    <p:selectOneMenu value="#{mainBean.selectedId}">
        <p:ajax update=":extPane:content" />
        <f:selectItems value="#{mainBean.ids}" var="id" 
                       itemLabel="#{id.name} 
                       itemValue="#{id.entityId}"/>
    </p:selectOneMenu>
</p:panel>
</ui:define>
<ui:define name="contents">
<h:form id="extPane">
<div>
        <p:menubar style="margin-bottom:5px;">
            <p:menuitem value="Schedule" icon="ui-icon-star" ajax="true"
                actionListener="#{mainBean.setSelectedPage('schedule')}"
                update="content">
            </p:menuitem>
            <p:menuitem value="Assignments" icon="ui-icon-star" ajax="true"
                actionListener="#{mainBean.setSelectedPage('Assignments')}"
                update="content">
            </p:menuitem>
            <p:menuitem value="Write to Us" icon="ui-icon-star" ajax="true"
                actionListener="#{mainBean.setSelectedPage('writetous')}"
                update="content">
            </p:menuitem>
        </p:menubar>
</div>
<div>
<p:panel>
    <p:outputPanel id="content" layout="block" autoupdate="true" style="border-style: none; padding: 0;">
        <c:if test="#{mainBean.selectedPage!=null}">
            <ui:include src="external/#{mainBean.selectedPage}.xhtml" />
        </c:if>
    </p:outputPanel>
</p:panel>  
</div>
</h:form>
</ui:define> 
```

我有两种菜单类型，一种更改报告类型，另一种更改报告数据（基于实体 ID）。

我的包含页面有 preRenderEvent 来处理基于使用顶部 selectOneMenu 更改 entityId 的更新。

这是我的一个包含 xhtml 的代码

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:em="http://java.sun.com/jsf/composite/emcomp"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core">

    <f:event listener="#{noteBean.loadRequests}" type="preRenderView" />

<h:head>
</h:head>
<h:body>
 <div>
 <p:panel header="Send a New Note  for #{mainBean.selectedEntity.name}" id="notePanel" toggleable="TRUE" collapsed="FALSE" >    
...
</p:panel>
</div>
 </h:body> 
```

我的问题是包含文件中的 preRenderView 事件没有被触发。即使是第一次显示页面时，它们也不会被触发。

我不确定这是否是因为 ui:include 是通过 ajax 请求发生的。我假设发生 ajax 更新时不会触发页面加载类型的事件。

我无法对菜单项使用 actionEvent，因为页面需要根据实体选择进行自我更新。因此，唯一的方法是触发事件 preRenderView 事件。

请告诉我

*   如果我试图从 ui:include 文件中触发 preRenderView 事件的方式有问题。
*   有没有其他方法可以使报告更新工作？

# javascript - 如何将子对象范围限定为父对象？

> ID：12543407
> 
> 赞同：1
> 
> 时间：2012-09-22T11:40:48.290
> 
> 标签：javascript, object, scope, prototype

我得到以下代码：

```
define(function() {

    var core = function() {};
    var module;

    core.prototype.module = {
      setModule: function(name) {
        this.module = name;
        module = name;
      }
    };

    core.prototype.sandbox = {
      getModules: function() {
          // will throw undefined
          console.log(this._module);
          // will maybe not throw an error?
          console.log(modules);
      }
    };

});

define(['kernel'], function(Kernel) {
    var sampleCore = new Core();
    sampleCore.setModule('test');
    sampleCore.getModules();
}); 
```

**如您所见，我无法使用这种方法访问其他名称空间。是否有另一种方法可以以某种方式访问​​ this.module ？**

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:04:51.487

为对象设置参数怎么样？：

```
core.sandbox = {
    register: function(obj, name) {
        console.log( obj.module );
    }
};

var a = new core.module.load(/* ..., .... */);

core.sandbox.register( a ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:00:56.933

采用`core.module._modules`

```
core.sandbox = {
  register: function(name) {
      var modules = core.module._modules;
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:42:46.923

正如我在评论中所说，也许您可​​以将*那个*变量添加到核心对象，以便其他函数有一些共同的东西可以保留？

```
define(function() {
    var core = function() {
    var that = this;
    };
    var module;
    core.prototype.module = {
      setModule: function(name) {
        that.module = name;
        module = name;
      }
    };

    core.prototype.sandbox = {
      getModules: function() {
          console.log(that.module);
      }
    };

}); 
```

# c - XML 模式验证 - 将模式文件内容作为字符串而不是文件传递

> ID：12543421
> 
> 赞同：0
> 
> 时间：2012-09-22T11:42:15.077
> 
> 标签：c, libxml2

我正在尝试使用 C 编程语言使用模式文件来验证 XML 文件。有没有办法在`char*`变量中传递/存储模式文件内容。如下所示：

```
char *schemaContent = "complete schema file content....."; 
```

有没有办法获得这种东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:51:25.987

使用[xmlReadMemory](http://www.xmlsoft.org/html/libxml-parser.html#xmlReadMemory)获取`xmlDoc`from `char *`。[在您的](https://stackoverflow.com/questions/12453914/how-to-validate-an-xml-file-using-a-schema-file-in-c-programming-language-using)代码中替换`xmlReadFile`为`xmlReadMemory`. libxml 页面中的[io1.c](http://www.xmlsoft.org/examples/index.html#InputOutput)示例使用`xmlReadMemory`.

# jquery - 如何使用 jQuery Mobile 将外部页面加载到“容器”div 中？

> ID：12543422
> 
> 赞同：1
> 
> 时间：2012-09-22T11:42:31.177
> 
> 标签：jquery, cordova, jquery-mobile

我正在使用 jQuery Mobile 构建一个 PhoneGap 应用程序。我希望应用程序从外部源加载一个 html 页面并将其放入用户单击链接的同一 html 页面的“内容”div（但到 JQM 的另一个“页面”div）。

*   “#booking-content”是我希望外部页面加载到的内容 div。
*   “#bookings”是我想要加载并在
    加载外部页面后显示的页面 div。
*   “#bookings_link”是用户单击的链接的 ID，以及函数调用的来源。

这是链接的点击事件功能：

```
$('#bookings_link').click(function(){'
    $("#booking_content").load("http://www.pagetoload.com",function(){
        $('#booking_content').trigger("pagecreate").trigger("refresh");
        $.mobile.changePage( $("#bookings"), { transition: "slideup"} );
}) 
```

我也尝试过使用 jQueryMobile 的 $.mobile.loadPage -function：

```
$.mobile.loadPage("http://www.pagetoload.com",{pageContainer: $('#booking_content')});
$.mobile.changePage( $("#bookings"), { transition: "slideup"} ); 
```

使用 jQuery 的加载方法，我收到以下错误消息：***Uncaught TypeError: Object [object DOMWindow] has no method 'addEvent' at file:*** and ***"Unknown chromium eroor: -6"***

我还尝试将逻辑包含在 pagebeforechange-loop (http://jquerymobile.com/demos/1.0/docs/pages/page-dynamic.html) 中，但没有结果。从此，该应用程序说：***Uncaught TypeError: Cannot read property 'options' of undefined at file:///android_asset/www/jquery.mobile-1.1.1.min.js:81***

我已经为跨域链接设置了 $.support.cors 和 $.mobile.allowCrossDomainPages 设置。

我正在使用 jquerymobile 1.1.1 和 jquery 的核心 1.7.1。我正在使用 Android SKD api level 16 AVD 对其进行测试。

一件奇怪的事情是，我让页面加载功能更早地使用相同的逻辑工作，但由于我没有使用 SVN，我无法检查其中的错误在哪里。

我完全坚持这一点，如果有人能告诉我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:59:05.853

我认为您正在描述 Phonegap [childbrowser 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)的功能，请查看:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T20:50:10.910

这是我的解决方案。我调用函数**app_getPage(filePath)**来加载包含页面内容的文本字符串。然后我使用 JQUERY 来更新 HTML，`<div>`如下所示：

```
// Fetch a page into a var
var pageText = app_getPage('pages/test.html');
// Did it work?
if(pageText) 
{
    // Yes it did, stick it out there
    $('#appTestDiv').html(pageText);
    $('#appMainDiv').trigger('create');  // Probably not necessary
}
else
{
    // No good so handle the failure here
    app_doEndOfWorldPanicRebootAndMeltDown();
} 
```

请注意，在我的示例中，下面的函数引用**了 appData.PageTopTag**和**appData.PageBottomTag**，我只在`<body>`标签内使用它们，这样我就可以去掉封闭的文档元素。在这种情况下，它们分别包含`<!--FooTop-->`和`<!--FooBottom-->`。这样我就可以使用我最喜欢的 HTML 编辑器来创建我想要加载的内容，而不必担心它添加到我的页面中的所有垃圾。我还使用**appData.Debug**来决定我是否处于调试模式以将垃圾发送到控制台。

```
function app_getPage(filePath)
{
    // Get the file name to load
    if(appData.Debug) console.log(arguments.callee.name + ":LoadFile:" + filePath);        
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET",filePath,false);
    xmlhttp.send(null);
    // Did we get the file?
    if(xmlhttp.status != 0)
    {
        // Yes, remember it
        var fileContent = xmlhttp.responseText;
        if(appData.Debug) console.log("LoadFile-Success");
    }
    else
    {
        // No, return false
        if(appData.Debug) console.log("LoadFile-Failure");
        return false;
    }
    if(appData.Debug) console.log("FileContent-Original:" + fileContent);
    // Get the indexes of the head and tails
    var indexHead = fileContent.indexOf(appData.PageTopTag);
    indexHead = indexHead >= 0 ? indexHead : 0;
    var indexTail = fileContent.indexOf(appData.PageBottomTag);
    indexTail = indexTail >= 0 ? indexTail : fileContent.length();
    // Now strip it
    fileContent = fileContent.substr(indexHead,indexTail);
    if(appData.Debug) console.log("FileContent-Stripped:" + fileContent);
    // Return the data
    return fileContent;
} 
```

因此，如果**“page/test.html”**包含以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Title Foo</title>
  </head>
  <body>
    <!--FooTop-->
      <div data-role="controlgroup" data-type="horizontal" style="text-align: center" data-mini="true">
        <a data-role="button" href="geo:42.374260,-71.120824?z=2">Zoom=2</a>
        <a data-role="button" href="geo:42.374260,-71.120824?z=12">Zoom=12</a>
        <a data-role="button" href="geo:42.374260,-71.120824?z=23">Zoom=23</a>
      </div>
    <!--FooBottom-->
  </body>
</html> 
```

你会得到**`<div id="appTestDiv" data-role="content"></div>`**：

```
<div data-role="controlgroup" data-type="horizontal" style="text-align: center" data-mini="true">
  <a data-role="button" href="geo:42.374260,-71.120824?z=2">Zoom=2</a>
  <a data-role="button" href="geo:42.374260,-71.120824?z=12">Zoom=12</a>
  <a data-role="button" href="geo:42.374260,-71.120824?z=23">Zoom=23</a>
</div> 
```

我知道有更紧凑的方法可以做到这一点，你们中的大多数人会讨厌我的格式，但这对我有用，干净且易于阅读。

# c# - 事件如何区分具有相同名称的两个事件处理程序？

> ID：12543425
> 
> 赞同：0
> 
> 时间：2012-09-22T11:43:30.583
> 
> 标签：c#, events, event-handling

当事件分配给同名的事件处理程序时，它如何知道调用哪个方法？

考虑以下：

```
 public static void ImplementExitOnEscape(Window window)
    {
        window.KeyDown += Window_KeyDown;
    }

    private static void Window_KeyDown(object sender, KeyEventArgs e)
    {
        var window = sender as Window;
        // Close window when pressing the escape key.
        if (e.Key == Key.Escape) if (window != null) window.Close();
    } 
```

如果我`ImplementExitOnEscape(this)`在一个窗口上调用，而且：

```
KeyDown += Window_KeyDown;

        void Window_KeyDown(object sender, KeyEventArgs e)
        {
            MessageBox.Show("Key Down");
        } 
```

那么这两个方法都将被执行，即使它们具有相同的名称。我已经知道您可以将同一个事件处理程序多次分配给一个事件，并且该方法将被调用的次数与分配的次数一样多，**但是它如何在具有相同名称的两个不同事件处理程序之间产生区别？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T11:47:19.930

方法名称是人类可读且友好的名称，但它们具有.Net 运行时使用的不同底层标识符，即使它们在不同的类中具有相同的名称或在同一类中具有相同的名称但参数不同（即重载）。

# boost - 通过 boost::phoenix 在 boost::qi 语法中访问元组作为向量的后元素

> ID：12543427
> 
> 赞同：1
> 
> 时间：2012-09-22T11:43:59.227
> 
> 标签：boost, boost-spirit-qi, boost-phoenix

如何通过语法中使用的 boost::phoenix 访问元组作为向量的后退元素。我想设置向量后面元素的元组的第二个元素（之前添加的）

例如

```
typedef boost::tuple<std::string, std::string, std::string> var_type;
typedef std::vector<var_type> vars_type;

template <typename Iterator>
struct some_grammar : qi::grammar<Iterator, vars_type()>
{
    some_grammar() : 
        some_grammar::base_type(some_rule)
    {
        .....
        .....
        .....
        //somewhere inside grammar
        .....

        some_rule = ... >> -some_rule2
        [
            phoenix::at_c<2, var_type>
            (
                phoenix::back(qi::labels::_val)
            ) = qi::labels::_1
        ] >>
        qi::lit(',');
     }
} 
```

在我的 msvc 2008 中，错误是

**boost::phoenix::at_c' : 无法将参数 1 从 'boost::phoenix::actor' 转换为 'const var_type &**

显然`phoenix::at_c`不能从中推断出`tuple`类型`phoenix::back`。

我的问题：**在这种情况下如何结合凤凰语句？**

# asp.net - Crystal Report Viewer 按钮在 Google chrome 和 Firefox 中不起作用，但在 IE 中正常

> ID：12543428
> 
> 赞同：5
> 
> 时间：2012-09-22T11:44:04.500
> 
> 标签：asp.net, firefox, c#-4.0, google-chrome, crystal-reports-2010

我的是带有 c# web 应用程序的 asp.net。Crystal Report 打印按钮在 Google chrome 和 Firefox 中不起作用，但在 IE 中正常。**当我单击 Crystal Report Viewer 的打印按钮时，它只会刷新网页并且不会在 Google chrome 中显示任何对话框**。在 Firefox 中，它打开打印对话框，现在我单击取消按钮。然后我单击注销，它只是停留在同一页面中，而在单击注销后单击任何其他链接，它会导航到会话过期页面。**我在 IE 中没有这个问题**。CrystalReportViewer 没有放在更新面板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:16:08.097

确保在 web.config 的程序集中有这个

```
<add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=13.0.2000.0,    Culture=neutral, PublicKeyToken=692fbea5521e1304"/> 
```

我添加了这个程序集，打印按钮开始在所有浏览器中为我工作。但是它在 Chrome 中不是真正的打印，它将报告导出为 PDF，然后您可以从文件中打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:33:01.903

附加 CrystalDecisions.ReportAppServer.ClientDoc 程序集尝试设置选项：

```
 CrystalReportViewer1.PDFOneClickPrinting = false; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-22T16:40:50.397

请尝试使用报表对象而不是查看器，您可以在其他中使用其 PrintToPrinter 属性进行打印，并使用查看器控件进行查看（可能为此添加另一个打印按钮）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-30T04:07:50.980

确保你在你的 aspnet_client 文件中添加了它，并且 PrintContol.cab 也包含在你的应用程序中。我希望它可以在 Firefox 上工作，但 chrome 不能工作， [请在此处输入图像描述](https://i.stack.imgur.com/IJ4Oi.png)

# debugging - 我在 openSUSE 上使用 debuginfo 包吗？

> ID：12543431
> 
> 赞同：0
> 
> 时间：2012-09-22T11:44:15.170
> 
> 标签：debugging, stack-trace, opensuse

我的 X 服务器今天开始崩溃。当我查看日志文件时，我看到：

```
Backtrace:
0: /usr/bin/Xorg (xorg_backtrace+0x36) [0x564616]
1: /usr/bin/Xorg (0x400000+0x168349) [0x568349]
2: /lib64/libpthread.so.0 (0x7f1d1618b000+0xf140) [0x7f1d1619a140] 
```

为了将地址映射到函数/行号，我安装了 package `xorg-x11-server-debuginfo`。它包含一个文件`/usr/lib/debug/usr/bin/Xorg.debug`。`file(1)`命令说：

```
/usr/lib/debug/usr/bin/Xorg.debug: 
ELF 64-bit LSB executable, x86-64, version 1 (SYSV), 
dynamically linked (uses shared libs), for GNU/Linux 2.6.32, 
BuildID[sha1]=0x08d976cf2aeb60105f32349bfce3297a72c8f96f,
not stripped 
```

这听起来很有希望。如何使用此文件中的调试符号找出 X 崩溃的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:35:29.593

您现在确实有可用的正确调试符号，但需要在 gdb 下运行 X 时重现崩溃，或者让 X 吐出核心转储并在 gdb 下加载它，以使用它们。默认的回溯打印方法（我认为是 glibc `backtrace_symbols()`）不知道如何使用外部调试符号。

该网页可能会有所帮助：[http ://wiki.debian.org/XStrikeForce/XserverDebugging](http://wiki.debian.org/XStrikeForce/XserverDebugging)

# android - Android Loader - 处理任意数量的它们

> ID：12543437
> 
> 赞同：0
> 
> 时间：2012-09-22T11:45:02.580
> 
> 标签：android, sqlite, android-loadermanager

假设我想运行类似于以下内容的查询：

```
SELECT _id FROM my_table WHERE name = user_supplied_name 
```

如果用户提供了一个任意长度的名称数组，我需要从 my_table 中获取相应的 _id 数字数组怎么办？

是正确的解决方案：

a.) 提供类似于以下内容的 WHERE 子句：

```
WHERE name = name_1 OR name = name_2 OR name = name_3 ... etc 
```

b.) 为每个名称查询触发多个加载器（与我的第一个片段格式相同）。但是，当每个 Loader 都具有不同的 ID 时（如在 Loader.getId() 中），如何跟踪它们。据推测，您必须保留一定范围的 ID 号（例如 10 到 20）以避免冲突，但是您可以提供的名称数量受到限制，跟踪分配了哪些名称等。

c.) 其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:19:03.810

使用多个加载器不仅难以管理，而且效率低下。

使用一个查询搜索多个名称就可以了，并且与您想要对结果执行的操作最匹配，所以去吧。

* * *

顺便说一句：您还可以使用[`IN`](http://www.sqlite.org/lang_expr.html#in_op)：

```
SELECT _id FROM my_table WHERE name IN ('name1', 'name2', ...) 
```

# iphone - 将 NSMutableDictionary 保存到 plist 问题中

> ID：12543444
> 
> 赞同：1
> 
> 时间：2012-09-22T11:46:31.907
> 
> 标签：iphone, ios, plist, nsmutabledictionary, ios5.1

在设备上测试我的应用程序时出现奇怪的行为。这是我用来更新键值的函数，它在我的 iphone 模拟器上运行顺畅。确实很好。但是 plist 第 6 行的 nslog 在设备上返回 null。您对我做错的原因和原因有任何想法吗？先感谢您

```
-(void) updateData:(int)contacto campo:(int)campo {

    NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *plistPath = [rootPath stringByAppendingPathComponent:@"Data.plist"];

    NSMutableDictionary *plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:plistPath];
    NSLog(@"%@",plistDict);

    switch (campo) {
        case 0:         
            veterinarioID = contacto;
            [plistDict setValue:[NSNumber numberWithInt:veterinarioID] forKey:@"veterinario"];
            NSLog(@"%d",veterinarioID);
            break;
        case 1:
            peluqueriaID = contacto;
            [plistDict setValue:[NSNumber numberWithInt:peluqueriaID] forKey:@"peluqueria"];
            NSLog(@"%d",peluqueriaID);

            break;
        case 2:
            residenciaID = contacto;
            [plistDict setValue:[NSNumber numberWithInt:residenciaID] forKey:@"residencia"];
            NSLog(@"%d",residenciaID);
            break;
        default:
            break;
    }
    [plistDict writeToFile:plistPath atomically: YES];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:07:19.607

我的猜测是您的代码随着时间的推移而发展，并且您在模拟器中已经有一个现有的字典很长时间了。因此，该文件已经存在了很长时间。

现在在设备上，如果文件不存在，则字典为 nil，并且注释将永远保存。

将您的代码更改为以下内容，我相信问题将得到解决：

```
NSMutableDictionary *plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:plistPath];
if(!plistDict) plistDict = [NSMutableDictionary new]; // I like using 'new'
NSLog(@"%@",plistDict); 
```

# android - android中的HttpUrlconnection适用于平板电脑但不适用于2.3.5设备

> ID：12543445
> 
> 赞同：2
> 
> 时间：2012-09-22T11:46:51.693
> 
> 标签：android, httpurlconnection

我正在使用“https”从服务器调用 web 服务，我使用了简单的 HttpURLConnection 代码而不是 HttpsURLConnection，代码在平板电脑（OS 4.0.4）上运行 f9，但在我的设备（2.3.5）上却不行。

代码很简单：

```
 URLConnection urlConn = null;
  URL url = new URL("https://myurl");
   urlConn = null;
   urlConn = url.openConnection();

  if (!(urlConn instanceof HttpURLConnection)) {
        try {
            throw new IOException("URL is not an Http URL");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    HttpURLConnection httpConn = (HttpURLConnection) urlConn;
    httpConn.setAllowUserInteraction(false);
    httpConn.setInstanceFollowRedirects(true);
    try {
        httpConn.setRequestMethod("GET");
        httpConn.connect();
    } catch (ProtocolException e1) {
        e1.printStackTrace();
    } catch (IOException e1) {
        e1.printStackTrace();
    }
        httpResponsecode = httpConn.getResponseCode(); 
```

如果我在设备上调用，httpresponsecode 为 400，但从平板电脑调用时为 200。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:46:34.870

我不认为 HttpURLConnection 支持在旧操作系统版本上进行以下重定向。我建议改用 apache HTTP 客户端，它的错误要少得多。

# python - 在 CentOS 上安装 Node Js - ImportError: No Module named bz2

> ID：12543455
> 
> 赞同：3
> 
> 时间：2012-09-22T11:48:15.980
> 
> 标签：python, node.js, centos

我正在尝试在我的 CentOS 服务器上安装 Node，但是当我运行 make 时它给了我以下错误

```
import bz2
ImportError: No Module named bz2 
```

我使用 yum 安装了 bz2，它似乎已安装，python 版本也是 2.7.3

为什么这仍然会出现这个错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T11:23:49.567

Python 可能是在没有 bzip2-devel 包的情况下配置的。如果是这种情况，请使用 yum 在您的系统上安装 bzip2-devel 软件包。然后重新配置并安装 python。

此后尝试安装节点。感谢来自此 [链接](http://comments.gmane.org/gmane.comp.lang.javascript.nodejs/38717)的史蒂夫约翰斯顿。当我读到那句话时，我感到非常沮丧和宽慰。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T11:51:23.090

不确定您是否正在尝试安装 Python 或 Node 模块。

对于 Python 模块，请尝试使用`easy_install`

```
sudo easy_install bz2 
```

对于 Node，请尝试查看`npm`包。

# php - 将新值添加到数据库后立即生成电子邮件？

> ID：12543456
> 
> 赞同：-1
> 
> 时间：2012-09-22T11:48:21.927
> 
> 标签：php, sql

如果这里有人可以帮助我，我一直在努力解决这个问题！

我创建了一个 Web 表单，它从用户那里获取数据并将其更新到具有（唯一 ID、电子邮件、注册时间、访问者计数）等字段的数据库中

我想要的是在新用户注册到数据库后立即自动生成邮件。邮件应该发到新注册用户的email id，带有uniqie id和一个小内容..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:59:22.290

在数据库上创建一个触发器，该触发器在插入时生成电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:50:45.213

这很容易和简单

```
mail('name1@example.com', 'My Subject', $message); 
```

有关更多详细信息，您可以点击以下链接

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:51:12.647

只需浏览您用于注册用户的脚本，一旦您将条目存储在数据库中，就向他发送一封带有 php 邮件功能的电子邮件

```
bool mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T11:51:30.547

```
if ($newuser)
{
mail("admin@myaddress.com", "New User Notification", "User $newuser joined on $datejoined."); } 
```

非常简单，但有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T12:21:39.870

根据您在 dbase 中插入数据的方式，获取查询返回的插入 Id 或受影响的行。然后你可以使用 if (isset($insertid)){ do something, like email }

查找 insert_id() 或affected_rows()。

# security - ksoap2：如何加密数据或请求

> ID：12543457
> 
> 赞同：0
> 
> 时间：2012-09-22T11:48:29.930
> 
> 标签：security, soap, encryption, ksoap2, android-ksoap2

也许问题很愚蠢，但是....我想知道是否存在隐藏或加密肥皂消息中数据的方法。我想尽可能地避免关于“中间人”的经典问题。所以，我不希望“中间人”能够理解我的数据。我考虑过使用加密函数将每个元素节点的所有数据与对称密钥合并。也许它可以成为一个解决方案，但我的问题是.... ksoap 中存在一种管理某种加密/安全性的方法？如果没有，你能告诉我一个可能的解决方案吗？

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:08:46.037

我同意 Thomas 的观点，如果您只是担心经典的中间人攻击，那么您只需要 HTTPS。

以及对术语的一些评论：

哈希函数不能用于加密数据。它们是单向函数，这意味着您可以获取数据的哈希值，但不能获取哈希值的数据。

如果您有共享密钥并使用它来加密数据，这称为对称加密。

kSOAP2 是一个 SOAP 库。它不知道加密。

但是，如果您想加密某些特定的数据，您可以使用其他库/API 进行加密，并将其作为 SOAP 消息的一部分发送。

# xcode - xcode和新的ios6安装？

> ID：12543459
> 
> 赞同：0
> 
> 时间：2012-09-22T11:48:56.150
> 
> 标签：xcode

我正在尝试`ios6`在我的`xcode 4.4.1`版本上安装，但我找不到如何做到这一点。（更新 xcode？）`iOS`我可以为我的项目选择的最后一个版本是`5.1`.

我该如何安装它？我必须这样做才能支持`ios6`？

```
to meet "quality standards, i must add a code here.. //code 
[self myClass] // i cant publish without this,its annoying!
if(a==5)
  a=40;
else
  a=70; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:56:20.677

将您的 xcode 更新到 4.5 版更新完成后，在**方案**中选择**更多模拟器**-> 选择并安装您需要的所有模拟器。您将能够使用iOS6。

# jquery-ui - JQuery UI：拖放：处理多个容器和溢出属性

> ID：12543461
> 
> 赞同：0
> 
> 时间：2012-09-22T11:49:17.773
> 
> 标签：jquery-ui, drag-and-drop, draggable

首先，我做了一个 JS 小提琴来解释我的问题：http: [//jsfiddle.net/QvRjL/59/](http://jsfiddle.net/QvRjL/59/)

我完全陷入了拖放问题：

*   我希望始终在容器上方显示拖动元素
*   例如，我需要能够将位于“ **containerB** ”单元格中的黄色框从第 1 行拖到第 3 行的单元格之一中。
*   我需要能够将位于“ containerA ”单元格中的黄色框拖到“ **containerB** **”**的第 3 行

 **当我应用该属性时：黄色框在我的所有容器上始终可见，但由于自动滚动不适用于此容器`AppendTo : 'body'`，因此无法到达“ **containerB ”的“row3”**

当我应用该属性时：“ **containerB**`AppendTo : '#container'` ”的自动滚动已启用，但黄色框在“ **containerA** ”上方不可见

 ****我的限制是所有单元格都必须具有“溢出”属性，因为单元格可以有很多黄色方块。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:42:27.797

我想我可以使用 using`appendTo : 'body'`查看`clone`所有容器并检查我的可滚动的拖动位置`container B`以创建一个`setInterval`模拟滚动的函数。

这是我的小提琴更新：http: [//jsfiddle.net/QvRjL/66/](http://jsfiddle.net/QvRjL/66/)

欢迎任何意见或建议！******

# java - 使用 Google oAuth 获取用户电子邮件

> ID：12543462
> 
> 赞同：0
> 
> 时间：2012-09-22T11:49:17.490
> 
> 标签：java, web-applications, google-api, google-api-java-client

> **可能重复：**
> [使用 Google Account OAuth Api 时如何获取 Google 用户 ID（电子邮件）](https://stackoverflow.com/questions/6787494/how-to-get-the-google-user-id-email-when-using-google-account-oauth-api)

我已经使用 Java 客户端库执行了三足 oAuth，并且我有`acccessToken`and `accessTokenSecret`. 现在我想使用 oAuth 凭据获取用户的电子邮件地址。我怎样才能做到这一点，仍然使用 Java 客户端库？

# uitextview - UITextView 属性文本和语法高亮

> ID：12543468
> 
> 赞同：6
> 
> 时间：2012-09-22T11:49:43.440
> 
> 标签：uitextview, syntax-highlighting, ios6, nsattributedstring, uitextviewdelegate

# 背景

因此，在 iOS 6 中，UITextView 可以采用属性字符串，这对于语法突出显示很有用。

我正在做一些正则表达式模式，`-textView:shouldChangeTextInRange:replacementText:`并且经常需要更改已经输入的单词的颜色。除了重置属性文本之外，我没有看到其他选择，这需要时间。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    //A context will allow us to not call -attributedText on the textView, which is slow.
    //Keep context up to date
    [self.context replaceCharactersInRange:range withAttributedString:[[NSAttributedString alloc] initWithString:text attributes:self.textView.typingAttributes]];

    // […]

    self.textView.scrollEnabled = FALSE;

    [self.context setAttributes:self.defaultStyle range:NSMakeRange(0, self.context.length)];
    [self refresh]; //Runs regex-patterns in the context
    textView.attributedText = self.context;

    self.textView.selectedRange = NSMakeRange(range.location + text.length, 0);
    self.textView.scrollEnabled = TRUE;

    return FALSE;
} 
```

这在模拟器上运行正常，但在 iPad 3 上每个都`-setAttributedText`需要几百毫秒。

我向 Apple 提交了一个错误，要求能够改变属性文本。它被标记为重复，所以我看不到他们在说什么。

# 问题

**更具体的问题：** 如何更改 UITextView 中某些范围的颜色，使用大的彩色文本，并具有足够好的性能来做到这一点`shouldReplaceText...`？

**更广泛的问题：** 如何在 iOS 6 中使用 UITextView 进行语法高亮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T12:03:27.977

我的应用程序 Zap-Guitar (No-Strings-Attached) 遇到了同样的问题，我允许用户键入/粘贴/编辑自己的歌曲，并且应用程序突出显示识别的和弦。

是的，苹果确实使用 html 编写器和解析器来显示属性文本。可以在这里找到幕后的精彩解释：http: [//www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/](http://www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/)

我为这个问题找到的唯一解决方案是不使用属性文本，这对于语法突出显示来说是一种过度杀伤力。

相反，我使用纯文本恢复到良好的旧 UITextView，并在需要突出显示的文本视图中添加了按钮。为了计算按钮框架，我使用了这个答案：[How to find position or get rect of any word in textview and place buttons over that?](https://stackoverflow.com/questions/10313689/how-to-find-position-or-get-rect-of-any-word-in-textview-and-place-buttons-over)

这将 CPU 使用率降低了 30%（给予或接受）。

这是一个方便的类别：

```
@implementation UITextView (WithButtons)
- (CGRect)frameForTextRange:(NSRange)range {
    UITextPosition *beginning = self.beginningOfDocument;
    UITextPosition *start = [self positionFromPosition:beginning offset:range.location];
    UITextPosition *end = [self positionFromPosition:start offset:range.length];
    UITextRange *textRange = [self textRangeFromPosition:start toPosition:end];
    CGRect rect = [self firstRectForRange:textRange];
    return [self convertRect:rect fromView:self.textInputView];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:32:38.217

attributesText 访问器必须往返于 HTML，因此对于语法突出显示的文本视图实现而言，它确实不是最佳选择。在 iOS 6 上，您可能希望直接使用 CoreText。

# ios - 在 Objective-C 中使用委托

> ID：12543471
> 
> 赞同：-2
> 
> 时间：2012-09-22T11:50:21.037
> 
> 标签：ios, objective-c

> **可能的重复：**
> [委托如何在 Objective-C 中工作？](https://stackoverflow.com/questions/1045803/how-does-a-delegate-work-in-objective-c)
> [有人可以帮我理解这个“代表”是什么吗？](https://stackoverflow.com/questions/12207148/can-someone-help-me-to-understand-what-is-this-delegate)

如果我使用子类方法执行相同的功能为什么我们在 Objective-C 中使用委托方法，那么在 Objective-C 中使用委托方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:52:51.170

你可能想要实现更多的委托，而 obj-c 只支持单继承。

无论如何，总是选择组合和接口/委托而不是继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:55:56.833

将委托方法视为类外部的方法。通过遵守委托协议并实现所需的委托方法，任何类都可以变得有用（成为该类的委托）。委托增加了灵活性，而没有子类继承父类所固有的限制。

# android - 如何在第 3 方线性布局前创建动画

> ID：12543472
> 
> 赞同：0
> 
> 时间：2012-09-22T11:50:28.667
> 
> 标签：android, animation, tween

我有 5 个线性布局包裹在一个线性布局中，在一个相对布局内。我正在使用翻译动画在一个线性布局中移动图像按钮。如果我尝试将它从线性布局外部（在这种情况下是另一个线性布局中的一个点）移动到它所在的线性布局中，它似乎在另一个线性布局之后，即不可见，并且仅在它交叉时出现进入它所在的线性布局。我可以在其他线性布局上以某种方式拥有它吗？这是我的代码。

```
<translate
    android:duration="2000"
    android:fromXDelta="-40%p"
    android:fromYDelta="100%p"
    android:toXDelta="0%p"
    android:toYDelta="10%p"
    android:zAdjustment="top" />
</set> 
```

框架布局会解决这个问题吗？如果是这样，我如何确保框架布局中的图像出现在线性布局的前面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:38:57.467

在 DecorView 上为该视图设置动画。首先将其添加到 decorView 中，然后调用 translate 动画。动画结束时从装饰视图中删除该视图。

```
findViewById(R.id.main).addView(viewToAnimate);

viewToAnimate.setAnimationListener(new AnimationListener() {

    onAnimationEnd(..) {
        findViewById(R.id.main).removeView(viewToAnimate);
    }
}
viewToAnimate.startAnimation(); 
```

代码不完全是它的样子（从内存中输入），但应该是这样的......

# asp.net - 如何使用asp.net Web应用程序中的登录表单保护匿名用户的网络表单

> ID：12543475
> 
> 赞同：0
> 
> 时间：2012-09-22T11:50:54.233
> 
> 标签：asp.net

我有一个 asp.net Web 应用程序，其中包含三个 Web 表单，即 SecuredWebForm.aspx、UnSecuredWebForm.aspx 和 LoginForm.aspx。我希望仅当用户使用 LoginForm.aspx 登录时才能访问 SecuredWebForm.aspx。对于UnSecuredWebForm.aspx，无需登录。如何实现？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:53:36.433

这是它的指南：http: [//www.codeproject.com/Articles/13872/Form-authentication-and-authorization-in-ASP-NET](http://www.codeproject.com/Articles/13872/Form-authentication-and-authorization-in-ASP-NET)

另一个指南如何做到这一点：

[http://support.microsoft.com/kb/301240/EN-US](http://support.microsoft.com/kb/301240/EN-US)

[http://support.microsoft.com/kb/316871](http://support.microsoft.com/kb/316871)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:53:51.043

您可以使用它 - 基于`location attribute`

```
<configuration>
   <location path="SecuredWebForm.aspx">
      <system.web>
         <authorization>
            <allow users="..."/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

注意：您调整用户的价值

链接：http: [//msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx)

如果你有安全架构，你可以使用`IsAuthenticated`属性

链接：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.isauthenticated.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.isauthenticated.aspx)

```
 if (HttpContext.Current.User.Identity.IsAuthenticated)
    {
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:23:32.857

为此目的使用 Membership 类会很好。如果您没有具体要求。

如果您已经使用 WebApplication 创建了 NewProject，那么 VisualStudio 可能已经为您设置了所有关注的配置，`web.config`如下所示：

`web.config`通过添加`<authorization...>...</authorization>`元素进行编辑。它将通过访问授权内容来阻止匿名用户。

```
<configuration>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="ConnectionStringData" providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <authorization>
        <deny users="?"/>
     </authorization>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>
    ...
    ...
  </system.web>
  ...
  ...
</configuration> 
```

* * *

您可能还需要保护匿名用户的网络表单，然后您可以编写以下内容：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!User.Identity.IsAuthenticated)
      Response.Redirect("Login.aspx");

    // Todo add code here.        
} 
```

# php - UTF 8 String 删除除换行符以外的所有不可见字符

> ID：12543476
> 
> 赞同：10
> 
> 时间：2012-09-22T11:51:05.633
> 
> 标签：php, regex, utf-8, newline

我正在使用以下正则表达式从 UTF-8 字符串中删除所有不可见字符：

```
$string = preg_replace('/\p{C}+/u', '', $string); 
```

这工作正常，但我如何更改它以删除除换行符之外的所有不可见字符？我使用 [^\n] 等尝试了一些东西，但它不起作用。

感谢您的帮助！

编辑：换行符是 '\n'

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T16:12:51.407

使用“双重否定”：

```
$string = preg_replace('/[^\P{C}\n]+/u', '', $string); 
```

**解释：**

*   `\P{C}`是一样的`[^\p{C}]`。
*   因此`[^\P{C}]`与 相同`\p{C}`。
*   由于我们现在有一个否定字符类，我们可以从中减去其他字符`\n`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:12:02.657

我使用否定断言，您可以使用除了断言匹配的字符类，因此：

```
$res = preg_replace('/(?!\n)\p{C}/', '', $input); 
```

（PHP 的正则表达式方言不支持字符类减法，否则将是另一种方法：`[\p{C}-[\n]]`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:55:23.787

`\n`在你这样做之前，用随机字符串替换换行符（我想你正在使用类似的东西） `++++++++`（任何不会被你的正则表达式删除并且首先不会自然出现在你的字符串中的字符串），然后运行你的preg_replace，然后再次替换`++++++++`为`\n`。

```
$string=str_replace('\n','++++++++',$string); //Replace \n
$string=preg_replace('/\p{C}+/u', '', $string); //Use your regexp
$string=str_replace('++++++++','\n',$string); //Insert \n again 
```

应该这样做。如果您使用`<br/>`而不是`\n`简单地使用[nl2br](http://php.net/manual/en/function.nl2br.php)来保留换行符并替换`<br/>`而不是`\n`

# jquery - 在现有图像上方显示 ajax 加载图像的最佳方式是什么？

> ID：12543481
> 
> 赞同：0
> 
> 时间：2012-09-22T11:51:26.273
> 
> 标签：jquery, ajax, image, loading

我有一个小图像列表。当我单击一个时，我会进行 ajax 调用以从服务器加载一些内容。因为这需要几秒钟，所以我想在现有图像上覆盖一个 ajax 加载图标，同时将拇指邮件变灰以显示正在加载某些内容。

在图像中间覆盖 ajax 图标的最佳方法是什么。我知道我可以用这样的方式将它放在图像旁边（当我单击图像时）：

```
var spinner = $("<img src='/Content/images/ajax-loader.gif' />").insertAfter(this); 
```

但我想把它放在图像的顶部（并且它们变灰）而不是放在一边，因为上面的代码会导致所有其他图像移动并且看起来有点偏离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:59:36.357

我使用[spin.js](http://fgnass.github.com/spin.js/)，包裹在这个[小 jquery 插件](https://gist.github.com/1290439)中。

所以我只是这样做：

```
$el = $("#el");  // cache element fo further reference

$el.spin();      // put spinner in the middle of selected element.

// do your stuff...

$el.spin(false); // dismiss spinner. 
```

看到它住[在这里](http://limoinrome.com/services)。

# controller - JavaFx 嵌套控制器 (FXML )

> ID：12543487
> 
> 赞同：28
> 
> 时间：2012-09-22T11:52:19.410
> 
> 标签：controller, include, nested, javafx, fxml

在[本](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers)教程中，是一个示例，说明如何包含自定义组件并从容器的控制器中使用它们的控制器。

main_window_content.fxml

```
<VBox fx:controller="com.foo.MainController">
   <fx:include fx:id="dialog" source="dialog.fxml"/>
   ...
</VBox> 
```

主控制器.java

```
public class MainController extends Controller {
    @FXML private Window dialog;
    @FXML private DialogController dialogController;

    .. 
```

如果该组件仅包含一次，则可以正常工作。如果相同的组件被包含两次，控制器不会被初始化。两个控制器都是空的。

main_window_content.fxml

```
 <VBox fx:controller="com.foo.MainController">
       <fx:include fx:id="dialog1" source="dialog.fxml"/>
       <fx:include fx:id="dialog2" source="dialog.fxml"/>
       ...
    </VBox> 
```

主控制器.java

```
 public class MainController extends Controller {
        @FXML private Window dialog1;
        @FXML private DialogController dialogController1;
        @FXML private Window dialog2;
        @FXML private DialogController dialogController2; 
```

有人可以帮我解决问题吗？谢谢

这是我的 FXML 加载代码。它在主应用程序方法中执行：

```
public void start(Stage stage) throws Exception { 
    Parent root = FXMLLoader.load(getClass().getResource("main_window_content.fxml"));
    stage.setTitle("FXML Welcome"); 
    stage.setScene(new Scene(root, 300, 275));
    stage.show(); 
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-24T20:31:21.007

感谢 Daniel（来自 OTN），我在代码中发现了错误，我的控制器变量的名称是错误的。他们应该是`<fx:id>Controller`。换句话说，它应该是：

**主控制器.java**

```
public class MainController extends Controller {
@FXML private Window dialog1;
@FXML private DialogController dialog1Controller;
@FXML private Window dialog2;
@FXML private DialogController dialog2Controller; 
```

但是研究了2.2 版本中引入的[更改](http://docs.oracle.com/javafx/2/fxml_get_started/whats_new2.htm)`<fx:root>`，我发现使用标签可以轻松解决所有问题（[就像本教程一样](http://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm#BABDAAHE)）。我在 FXML 中输入了我的组件，只是像这样声明它：

```
<HBox>
    <Dialog id="dialog1" text="Hello World!"/>
    <Dialog id="dialog2" text="Hello World!"/>
</HBox> 
```

我希望能有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T13:22:19.147

netbeans 8.0 中似乎也存在嵌套 fxml 的错误。不能指望 netbeans 为您创建嵌套的 fxml 的控制器对象，它必须手动插入到您的 MainController 中。每次在 netbeans 中更新控制器时，它都会被清除，因此可能有点乏味。对于此示例，将插入

```
@FXML private DialogController dialog1Controller; 
```

在这种情况下手动连接到主控制器，然后它可以正常工作。对于组织大型 fxmls/控制器非常有用。

# ruby-on-rails-3 - 在 Heroku 上运行 Clockwork 和延迟作业

> ID：12543488
> 
> 赞同：0
> 
> 时间：2012-09-22T11:52:24.960
> 
> 标签：ruby-on-rails-3, heroku, delayed-job, bluepill

我正在将现有的 rails 应用程序迁移到 heroku。我有每天运行近 20 小时的内存和时间密集型延迟作业，并且我有一个时钟来处理特定时间的作业。发条工作没有那么重，一天运行几次。

是否可以使用 bluepill 使用单个 heroku 进程同时运行延迟的作业进程和发条进程？

我不想仅仅为了发条流程而多付一名工人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:06:36.940

尝试使用[heroku scheduler](https://addons.heroku.com/scheduler)，它将允许您以每天、每小时或 10 分钟的间隔安排作业。

# javascript - Dojo Toolkit 中定义的参数

> ID：12543489
> 
> 赞同：0
> 
> 时间：2012-09-22T11:52:26.930
> 
> 标签：javascript, dojo, require

我是道场新手。我已经定义了一个小部件，如果看起来像这样：

```
define(["dojo/_base/declare", "dijit/_Widget", "dijit/_TemplatedMixin", "dojo/text!Widgets/Templates/Screen.html", "./Node", "dojo/_base/array", "dojo/dom-geometry", "dojo/dom-style"],
    function (declare, widget, templated, template, node, array, domGeometry, domStyle) { 
... 
```

我不知道这是否应该是这样的。我有这么长的要求列表是否可以，或者我需要在回调中要求它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:02:10.410

这不是一个特别长的模块列表。Dojo 将其功能分解为非常小的模块，因此获取其中的一些是很常见的。

您绝对不想在回调中要求它们。`define`与 基本相同`require`，但在模块顶部用于声明具有依赖关系的异步模块的结果。

值得注意的一件事是，将类依赖项注入具有相同或相似名称的参数可能是值得的：它使结果`declare`调用更简单，例如

```
define(["dojo/_base/declare", "dijit/_WidgetBase", "dijit/_TemplatedMixin", "dojo/text!mytemplate.html"], function(declare, _WidgetBase, _TemplatedMixin, template) {

    return declare("my.Widget", [_WidgetBase, _TemplatedMixin], {
        templateString: template
    };
}); 
```

您可能还希望将您的依赖关系组合成逻辑组，例如将您的基类放在一起，将帮助模块放在一起。您还希望在模块列表的*末尾*声明模板中提到的任何其他模块，如果您没有在代码中使用它们，则不一定需要将它们声明为回调参数，例如`used/by/template1`和`used/by/template2`这里：

```
define(["dojo/_base/declare", "dijit/_WidgetBase", "dijit/_TemplatedMixin", "dojo/text!mytemplate.html", "used/by/template1", "used/by/template2"], function(declare, _WidgetBase, _TemplatedMixin, template) {

    return declare("my.Widget", [_WidgetBase, _TemplatedMixin], {
        templateString: template
    };
}); 
```

# javascript - 将图像的 src 设置为 Chrome 的扩展存储文件？

> ID：12543491
> 
> 赞同：0
> 
> 时间：2012-09-22T11:53:28.433
> 
> 标签：javascript, google-chrome-extension

这是一个显示我的问题的示例。

我正在编写一个 chrome 扩展程序，它应该替换谷歌主页 (google.com) 中的谷歌徽标。所以我创建了一个使用这个 javascript+jQuery 代码的内容脚本（请放弃谷歌涂鸦！）：

```
$("#hplogo").attr("src","the_address"); 
```

此内容脚本与`https://*.google.com/`包含 google 主页的内容匹配。

好的。如果我在 the_address 中输入一个上传到互联网上的图像地址，则扩展程序可以正常工作并给我理想的结果。

但是由于我不希望我的扩展程序使慢速连接的加载时间变长，我打算将图像的 src 设置为来自硬盘的文件。

所以我把图像文件放到扩展的文件夹中，然后我尝试使用文件名（例如：image1.gif）作为 the_address，但是这一次，chrome 没有加载图像。

我该怎么办？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:26:10.237

由于明显的原因图像无法加载，我认为它仍在使用网页的域。您可能需要使用[`chrome.extension.getURL`](http://developer.chrome.com/extensions/extension.html#method-getURL)，它允许您从扩展目录链接资源。

# c++ - 访问类成员的 C++ 操作顺序

> ID：12543494
> 
> 赞同：0
> 
> 时间：2012-09-22T11:53:40.553
> 
> 标签：c++, class, pointers, operator-keyword

主线可以工作吗？也许其他运营商？一些建议？我认为操作顺序是这里的问题。是否必须使用 b.addA("P"); bR("P").ref(bR("P")); ?

我想将对象的引用添加到其他对象并在对象之间建立关系，例如数据库模型。

```
#include <iostream>
#include <vector>
#include <string>

class A;
class B;

class A{
    std::string _name;
    std::vector<A*> _refs;
public:
    A(std::string="");
    A& ref(A&);
    std::string name() const;
};

class B{
    std::string _name;
    std::vector<A> _as;
public:
    B(std::string="");
    A& addA(std::string);
    A& R(std::string);
};

A::A(std::string nm){
    _name=nm;
}

A& A::ref(A &a){
    for(int i=0; i<_refs.size(); i++)
        if(_refs[i]==&a)
            return a;
    _refs.push_back(&a);
    return a;
}

std::string A::name() const{
    return _name;
}

B::B(std::string nm){
    _name=nm;
}

A& B::addA(std::string nm){
    for(int i=0; i<_as.size(); i++)
        if(_as[i].name()==nm)
            return _as[i];
    _as.push_back(A(nm));
    return _as[_as.size()-1];
}

A& B::R(std::string nm){
    for(int i=0; i<_as.size(); i++)
        if(_as[i].name()==nm)
            return _as[i];
    throw std::string("invaild A");
}

int main(){
    B b;
    b.addA("P").ref(b.R("P"));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:29:42.173

> 主线可以工作吗？

当然。这里只有两个运算符，函数调用和引用（点运算符）。如果关联是从右到左的，或者函数调用优先于引用，则会出现问题。事实并非如此。函数调用和引用具有相同的优先级，并且关联是从左到右的。这正是你想要的。

但是，您的代码有问题。这是成员函数`B::A`。在类的上下文中`B`，这改变了`A`from`class A`到成员函数的含义`B::A(std::string)`。您的代码无法在多个编译器上为我编译，但它确实使用 clang 3.1 编译。~~对我来说，这看起来像是一个铿锵虫。~~（**附录：**这确实用clang编译是可以的，因为被违反的规则是那些讨厌的“不需要诊断”规则之一。）你的代码是非法的；它（理想情况下）应该无法编译。

该函数的更好名称是`findA`. 此名称不会与类名冲突，它会使代码自我记录。

**旁白：**您可能想考虑让该函数返回指针而不是引用。异常应该用于异常事件（即错误）。（例如）“Foo”在您的向量中没有表示的事实是否真的值得抛出异常？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:02:04.757

从 main 中的行开始肯定会起作用。现在这是如何发生的，是您感兴趣的问题吗？当您调用 addA("P") 时，它会创建类 A 的对象并通过引用返回它，现在 A 的此对象调用其成员 fn ref(A&)，如您所见，您需要通过通过调用 bR("P") 来引用这个函数，它本身返回对刚刚添加的带有字符串“P”的对象的引用。现在你有

A'.ref(A")

其中 A' A" 是由 B 类的两个不同 fn 返回的引用对象（顺便说一句，在这种情况下 A'A" 将是相同的）。

上面的调用将通过引用返回 A 类的另一个对象，您可以将其分配给 A 的任何其他实例，例如

在; t = b.addA("P").ref(bR("P"));

您只是在进行链式函数调用，并通过引用返回对象来确保您可能会丢失的临时变量中没有任何事情发生。希望我已经回答了你的问题。

# android - 如何检测视图有多少滚动 ScrollView

> ID：12543495
> 
> 赞同：4
> 
> 时间：2012-09-22T11:53:48.243
> 
> 标签：android, scrollview, android-scrollview

我如何检测滚动视图滚动了多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:57:03.303

您需要重写`onScrollChanged()`ScrollView 的方法：

```
@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {

    Log.i(TAG, "View onScrollChanged");
    View view = (View) getChildAt(getChildCount() - 1);
    int diff = (view.getBottom() - (getHeight() + getScrollY()));// Calculate

    super.onScrollChanged(l, t, oldl, oldt);
} 
```

这里，是在 的底部边缘和底部当前可见的内容`diff`之间留出的滚动空间。`ScrollView`时`diff = 0`，`ScrollView`已完全向下滚动。

# javascript - 在 chrome 扩展中添加到 innerHTML 的内容被修改

> ID：12543501
> 
> 赞同：0
> 
> 时间：2012-09-22T11:54:37.730
> 
> 标签：javascript, html, google-chrome-extension

我有这个 JS 代码，它在 a 中添加了一些 HTML `tbody`：

```
 thestring='<tr><td><input type="text" name="entry-'+s+'-api" value="'+getItem('entry-'+s+'-api')+' /></td><td><input type="text" name="entry-'+s+'-talk" value="'+getItem('entry-'+s+'-talk')+' /></td><td><input type="text" name="entry-'+s+'-url" value="'+getItem('entry-'+s+'-url')+' /></td></tr>';

    document.getElementById('table').innerHTML+=thestring; 
```

有点长的线，我知道...

因此，当我运行它时，`thestring`会对此进行正确评估：

```
<input type="text" name="entry-0-api" value="http%3A%2F%2Flego.wikia.com%2Fapi.php /><<input type="text" name="entry-0-talk" value="User_talk%3AUltrasonicNXT /><input type="text" name="entry-0-url" value="http%3A%2F%2Flego.wikia.com%2Fwiki%2FUser_talk%3AUltrasonicNXT /> 
```

但是，这是添加的内容：

```
<tr><td></td></tr> 
```

**那么剩下的去哪儿了？**

这是相关的 HTML：

```
<form action="change.js" method="GET">
   <table>
      <tbody id="table">
      </tbody>
   </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:06:39.030

```
value="'+getItem('entry-'+s+'-api')+' /> 
```

不正确的标记。属性值没有结束引号。Chrome 正在尽最大努力清理错误。

但是，无论如何，您不应该以这种方式构建标记字符串。如果值中有任何 HTML 特殊字符`getItem`，那么它们将能够泄漏到标记中。如果其中任何内容来自不受信任的第三方，则这种 HTML 注入不仅是一个错误，而且是一个安全漏洞。

```
document.getElementById('table').innerHTML+=thestring; 
```

永远不要这样做。这会将表的整个当前 DOM 转换为 HTML 标记，添加到该字符串，并将其全部解析为新对象，替换旧对象。这很慢并且会丢失任何不序列化为 HTML 的信息（例如事件处理程序或表单字段值）。

直接更改文档的活动 DOM 节点比乱用 HTML 标记要可靠得多。这解决了这两个问题。例如。：

```
var row= document.getElementById('table').insertRow(-1);
['api', 'talk', 'url'].forEach(function(prop) {
    var name= 'entry-'+s+'-'+prop;
    var input= document.createElement('input');
    input.type= 'text';
    input.name= name;
    input.value= getItem(name);
    row.insertCell(-1).appendChild(input);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:02:50.560

`<input type="text" name="entry-0-api" value="http%3A%2F%2Flego.wikia.com%2Fapi.php /><`是不正确的。你错过了`<tr><td>`（这是一个症状或疏忽），但你也有一个未封闭的`value`属性（似乎是**原因**）和一个额外的`<`（它再次看起来像一个症状，因为它是不一致的）。格式错误的数据会导致一些问题。

# android - 无法从相册中获得对 Facebook 照片的预期响应

> ID：12543503
> 
> 赞同：0
> 
> 时间：2012-09-22T11:55:03.070
> 
> 标签：android, facebook, facebook-graph-api

我是 Facebook API 的新手。首次使用此[链接](http://developers.facebook.com/tools/explorer/?method=GET&path=10150146071791729/photos)从 Graph API 尝试 FQL 查询。

我正在尝试从具有相册 ID 的相册中获取照片。当我请求使用带有 URL 的 Facebook 对象时`https://graph.facebook.com/10150146071791729/photos&access_token=ACCESS_TOKEN`，我收到以下响应（在解析为 JSON 对象之前）。`{"id":"https://graph.facebook.com/10150146071791729/photos","shares":2}`. 我通过在解析后打印 JSON 对象的长度来确认它，即 2。当我在 Web 浏览器中复制并粘贴相同的 URL 时，我得到了预期的响应（我得到的 FQL 查询中的响应）。这是我的代码。

```
public void onComplete(Bundle values) {
                    String token = facebook.getAccessToken();
                    System.out.println("Token: " + token);
                    try {
                        String response = facebook.request("https://graph.facebook.com/10150146071791729/photos&access_token=ACCESS_TOKEN");
                        System.out.println("response :"+response);
                        JSONObject obj = Util.parseJson(response);
                        System.out.println("obj length : " + obj.length());
                        Iterator iterator = obj.keys();
                        while(iterator.hasNext()){
                            String s = (String)iterator.next();
                            System.out.println(""+s+" : "+obj.getString(s));
                        }

                    } catch (Throwable e) {
                        e.printStackTrace();
                    }
                } 
```

注意：我从 URL 中使用的 FQL 查询中获得了访问令牌。而且我没有编写任何会话（登录/注销）逻辑，因为它是一个测试项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:15:07.057

你的要求是错误的。它应该是

`"https://graph.facebook.com/10150146071791729/photos?access_token=ACCESS_TOKEN"`

将照片后面的“&”替换为“？”。

还有两件事，您正在进行 Graph API 查询，而不是 FQL 查询。

其次，切勿公开发布您的访问令牌。如果我愿意，我现在可以使用您的访问令牌来编辑您的 Facebook 信息。

编辑：当您使用 Android Facebook SDK 时，您不需要使用完整的图形路径。相反，使用

`facebook.request("10150146071791729/photos")`

您不需要添加访问令牌，因为 Facebook 对象已经拥有它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:23:55.460

因为除了最相关的代码之外没有提供太多代码，让我给你几种方法可以访问*相册*中的*照片*

*第一种方法（如果您希望使用完整的 URL 来提出请求）*

```
String URL = "https://graph.facebook.com/" + YOUR_ALBUM_ID
        + "/photos&access_token="
        + Utility.mFacebook.getAccessToken() + "?limit=10";

try {

    HttpClient hc = new DefaultHttpClient();
    HttpGet get = new HttpGet(URL);
    HttpResponse rp = hc.execute(get);

    if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
        String queryPhotos = EntityUtils.toString(rp.getEntity());
        Log.e("PHOTOS RESULT", queryPhotos);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

*第二种方法*（不使用前面提到的@Vinay Shenoy 的完整 URL）

```
try {
    Bundle paramUserInfo = new Bundle();
    paramUserInfo.putString(Facebook.TOKEN, Utility.mFacebook.getAccessToken());

    String resultPhotos = Utility.mFacebook.request("YOUR_ALBUM_ID/photos", paramUserInfo, "GET");
    Log.e("PHOTOS", resultPhotos);
} catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
} 
```

就个人而言，我几乎完全通过我的应用程序遵循*第一种方法。*它让我可以无休止地使用*分页*`ListViews`

话虽这么说，当我在某处需要一些快速数据时，我确实依赖*第二种*方法。它们都有效，我希望它们中的任何一个（或两者）都对您有所帮助。

# asp.net - 从 ASP.NET 中的视频文件中获取缩略图

> ID：12543509
> 
> 赞同：1
> 
> 时间：2012-09-22T11:55:56.553
> 
> 标签：asp.net

我正在尝试从视频文件中获取缩略图并且我的代码成功运行但缩略图没有保存这里是我的代码..

```
 protected void Convert(string fileIn, string fileOut, string thumbOut)
    {
        try
        {
            System.Diagnostics.Process ffmpeg;

            string video;
            string thumb;

            video = Server.MapPath("~/Content/UploadVedio/YouTube.FLV");
            thumb = Server.MapPath("~/Content/UploadImage/frame.jpg");

            ffmpeg = new System.Diagnostics.Process();

            ffmpeg.StartInfo.Arguments = " -i " + video + " -ss 00:00:07 -vframes 1 -f image2 -vcodec mjpeg " + thumb;
            ffmpeg.StartInfo.FileName = Server.MapPath("~/Content/EXE/ffmpeg.exe");
            ffmpeg.Start();
            ffmpeg.WaitForExit();
            ffmpeg.Close();
        }
        catch (Exception ex)
        {
            Response.Write("Error: " + ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:21:58.053

您的代码在 IIS 中运行，请确保您有权写入正确的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T02:33:17.443

要检查的事情：

1.  目录是否包含空格？如果是这样，请添加：

    视频 = "\"" + 视频 + "\""；拇指 = "\"" + 拇指 + "\"";

2.  ffmpeg.exe 路径是否正确？如果要为 ffmpeg 设置环境变量，请转到[此处](http://www.computerhope.com/issues/ch000549.htm)，这样您就不需要找到运行 ffmpeg 的 ffmpeg.exe 路径。

3.  即你的论点：-ss 00:00:07。视频长度是否超过 7 秒？

4.  将 ffmpeg.exe 复制到驱动器 C（如果您没有为 ffmpeg 设置路径）并尝试直接在 cmd 下运行，并在此处发布如果发生任何错误，输出是什么？IE：

    c:\ffmpeg.exe -i "c:\video.mp4" -ss 00:00:07 -vframes 1 -f image2 -vcodec mjpeg "c:\result.jpg"

# android - 从 URL 下载图像时，Android 应用程序中 R.Drawable.Loader 的用途是什么

> ID：12543510
> 
> 赞同：0
> 
> 时间：2012-09-22T11:56:02.543
> 
> 标签：android, eclipse, android-layout, android-emulator

这可能是一个愚蠢的问题，但我很长一段时间以来一直被困在一个地方，无法弄清楚原因。

我正在尝试将图像从 URL 下载到 Android 应用程序。为此，我正在关注本教程 - [http://www.androidhive.info/2012/07/android-loading-image-from-url-http/](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)

问题是 Eclipse（我在 Eclipse 中进行编码）给出了错误：*Loader cannot be resolved or is not a field* on where I have *write int load = R.drawable.loader*

任何帮助，将不胜感激。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:57:29.000

根据您链接到的教程中提供的信息，R.drawable.loader 是教程应用程序使用的占位符图像，用于在真实图像完成下载之前向用户显示。

如果教程站点允许您下载完整的项目，您可能可以在`/res/drawable(-something)/`目录中找到此图像。如果没有，您可以选择任何您喜欢的随机占位符图像，将其重命名为 loader。并将其放入其中一个`res/drawable`文件夹中。

# .net - 异步 I/O 通常比同步 I/O 慢一点吗？

> ID：12543511
> 
> 赞同：1
> 
> 时间：2012-09-22T11:56:11.910
> 
> 标签：.net, asynchronous, io

虽然有利于线程卫生，但我希望异步 I/O 总是比同步 I/O 慢一点。我的测试似乎证明异步 I/O 有时比同步更快。我在这里想念什么？

[编辑] 我最初的测量是错误的（我没有删除它们以不使所做的评论无效）。

```
以下是一些固定定时循环的测量结果：
ADO_DataReaderSync 每次迭代=4,17ms
ADO_DataReaderASyncReader 每次迭代=3,55ms（仅 ExecuteReaderAsync）
ADO_DataReaderASyncRead 每次迭代=11,28ms（ExecuteReaderAsync 和 ReadAsync）
FileIO_ReadToEndSync SmallFile 每次迭代=3,67ms
FileIO_ReadToEndAsync SmallFile 每次迭代=8,97ms
FileIO_ReadToEndSync LargeFile 每次迭代=266,34ms
FileIO_ReadToEndAsync LargeFile 每次迭代=322,05ms

```

错误测量：

```
ADO_ReadSync elapsed:00:00:00.0012249 每次迭代=0,12249ms
ADO_ReadAsync elapsed:00:00:00.0050702 每次迭代=0,50702ms
ADO_DataReaderSync elapsed:00:00:00.0090513 每次迭代=0,90513ms
ADO_DataReaderASync elapsed:00:00:00.0044125 每次迭代=0,44125ms
FileIO_ReadSync LargeFile elapsed:00:00:00.0655596 每次迭代=6,55596ms
FileIO_ReadAsync LargeFile elapsed:00:00:00.0003056 每次迭代=0,03056ms
FileIO_ReadSync SmallFile elapsed:00:00:00.0005619 每次迭代=0,05619ms
FileIO_ReadAsync SmallFile elapsed:00:00:00.0002955 每次迭代=0,02955ms

```

使用的测试代码：

```
Module Module1
Private Const _connectionString = "Data Source=zulu;Initial Catalog=AdventureWorks;Integrated Security=True"

Sub Main()
    DoTimed("ADO_ReadSync", Sub() ADO_ScalarSync(), 10)
    DoTimed("ADO_ReadAsync", Async Sub() Await ADO_ScalarAsync(), 10)
    DoTimed("ADO_DataReaderSync", Sub() ADO_DataReaderSync(), 10)
    DoTimed("ADO_DataReaderASync", Async Sub() Await ADO_DataReaderASync(), 10)

    Const filePathLargeFile = "O:\Temp\TestFiles\In\todo.txt"
    Const filePathSmallFile = "O:\Temp\TestFiles\In\eula.txt"
    DoTimed("FileIO_ReadSync LargeFile", Sub() FileIO_ReadSync(filePathLargeFile), 10)
    DoTimed("FileIO_ReadAsync LargeFile", Async Sub() Await FileIO_ReadAsync(filePathLargeFile), 10)
    DoTimed("FileIO_ReadSync SmallFile", Sub() FileIO_ReadSync(filePathSmallFile), 10)
    DoTimed("FileIO_ReadAsync SmallFile", Async Sub() Await FileIO_ReadAsync(filePathSmallFile), 10)

    Console.WriteLine("...")
    Console.ReadLine()
End Sub

Function ADO_ScalarSync() As Integer
    Using cnx As New SqlClient.SqlConnection(_connectionString)
        Dim cmd As New SqlCommand("SELECT COUNT(*) FROM Production.Product", cnx)
        cnx.Open()
        Return cmd.ExecuteScalar
    End Using
End Function

Async Function ADO_ScalarAsync() As Task(Of Integer)
    'Beginning in the .NET Framework 4.5 RC, these methods no longer require Asynchronous Processing=true in the connection string
    Using cnx As New SqlClient.SqlConnection(_connectionString)
        Dim cmd As New SqlCommand("SELECT COUNT(*) FROM Production.Product", cnx)
        cnx.Open()
        Return Await cmd.ExecuteScalarAsync
    End Using
End Function

Function ADO_DataReaderSync() As List(Of String)
    Using cnx As New SqlClient.SqlConnection(_connectionString)
        Dim cmd As New SqlCommand("SELECT * FROM Production.Product", cnx)
        cnx.Open()
        Using rdr As SqlDataReader = cmd.ExecuteReader
            Dim productNames As New List(Of String)
            While rdr.Read
                productNames.Add(rdr("Name"))
            End While
            Return productNames
        End Using
    End Using
End Function

Async Function ADO_DataReaderASync() As Task(Of List(Of String))
    Using cnx As New SqlClient.SqlConnection(_connectionString)
        'Await cnx.OpenAsync() 'I would only use .OpenAsync if the DB is commonly down and we would hang on the timeout
        Dim cmd As New SqlCommand("SELECT * FROM Production.Product", cnx)
        cnx.Open()
        Using rdr As SqlDataReader = Await cmd.ExecuteReaderAsync
            Dim productNames As New List(Of String)
            While rdr.Read
                productNames.Add(rdr("Name"))
            End While
            Return productNames
        End Using
    End Using
End Function

Function FileIO_ReadSync(filePath As String) As Long
    Using reader As New StreamReader(filePath)
        Dim fileString = reader.ReadToEnd
        Return fileString.Length
    End Using
End Function

Async Function FileIO_ReadAsync(filePath As String) As Task(Of Long)
    Using reader As New StreamReader(filePath)
        Dim fileString = Await reader.ReadToEndAsync().ConfigureAwait(False)
        Return fileString.Length
    End Using
End Function 
```

端模块

```
Public Module Timing
Function DoTimed(name As String, operation As Action, Optional iterations As Integer = 1) As TimeSpan
    operation() 'Warmup

    Dim stw = Stopwatch.StartNew
    DoIterate(operation, iterations)
    stw.Stop()
    Console.WriteLine("{0} elapsed:{1} per iteration={2}ms", name, stw.Elapsed, stw.Elapsed.TotalMilliseconds / iterations)
    Return stw.Elapsed
End Function

Sub DoIterate(action As Action, Optional iterations As Integer = 1)
    For i = 0 To iterations - 1
        action()
    Next
End Sub 
```

端模块

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:01:22.453

取决于您对较慢的定义:-)

异步 I/O 可能会更慢，因为它必须在单独的执行线程中运行，这需要时间来设置——这当然取决于实现。即使线程*已经*在为异步 I/O 运行，例如当您使用 I/O 完成端口设置它们时，线程之间传递信息所花费的时间也可能是一个因素。

但是，您可以在等待 I/O 完成的同时继续做*其他事情，这意味着所有操作所花费的**总*时间可能会更少。

因此，虽然 I/O 可能较慢，但所有操作所花费的总时间通常会更好。

在异步似乎*更快的情况下，*这可能是一种非常有效的实现、信息缓存或其他十几种可能性，其中一种可能是您的基准错误。

大概您正在使用异步，因为您想做其他事情（包括可能保持 GUI 线程响应）。*如果是这样，它有多*慢并不重要（在合理范围内）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T12:29:55.823

您的计时循环不会等待异步操作完成，所以它只是计时启动它们需要多长时间。

使用微基准测试“证明”*任何东西都*[非常](http://blogs.msdn.com/b/shawnhar/archive/2009/07/14/the-perils-of-microbenchmarking.aspx) [困难](http://www.yoda.arachsys.com/csharp/benchmark.html)。

# java - 使用 Group By 和 aliasToBean 的休眠条件查询

> ID：12543512
> 
> 赞同：6
> 
> 时间：2012-09-22T11:56:24.747
> 
> 标签：java, hibernate

我有名为 SaleRecord 的表/实体，其中包含以下字段

```
@Entity
public class SaleRecord {
   private Long id;
   private String type;
   private Double amount;
   //Getter and Setter and more fields
} 
```

我想用 Criteria 写下面的查询

```
SELECT s.type AS accountName, SUM(s.amount) AS amount 
FROM salerecord s
GROUP BY s.type 
```

我在 Hibernate 中使用普通 SQL 编写为（它的工作）

```
String sql = " SELECT s.type AS accountName, SUM(s.amount) AS amount ";
            sql += " FROM salerecord s ";
            sql += " GROUP BY s.type ";

List<CollectionDO> incomeList = (List<CollectionDO>) getSession().createSQLQuery(sql).setResultTransformer(Transformers.aliasToBean(CollectionDO.class)).list(); 
```

CollectionDO 是另一个 POJO 类，我想在其中填充结果。

但是想使用条件来编写，那么如何编写这个查询并将结果转换为 CollectionDO 类。我试过关注但没有工作

```
Criteria criteria = getSession().createCriteria(SaleRecord.class).setResultTransformer(Transformers.aliasToBean(CollectionDO.class));
        criteria.setProjection(Projections.property("type"));
        criteria.setProjection(Projections.sum("amount"));        
        criteria.setProjection(Projections.groupProperty("type"));
        return (List<CollectionDO>) criteria.list(); 
```

**CollectionDO.java**

```
public class CollectionDO {    
    private Double amount;    
    private String accountName;

    public String getAccountName() {
        return accountName;
    }
    public void setAccountName(String accountName) {
        this.accountName = accountName;
    }
    public Double getAmount() {
        return amount;
    }
    public void setAmount(Double amount) {
        this.amount = amount;
    }     
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T12:13:44.920

> 我认为它无法转换。如 Criteria 列名称为“type”，但 CollectionDO.java 的字段为“accountName”

尝试如下（使用这个版本的[add](http://www.163jsp.com/help/hibernate32api/org/hibernate/criterion/ProjectionList.html#add%28org.hibernate.criterion.Projection,%20java.lang.String%29)来指定别名）：

```
Criteria criteria = 
    getSession()
        .createCriteria(SaleRecord.class)
        .add(Restrictions.between("date", 
                                  reportForm.getFromDate(), 
                                  reportForm.getToDate()));

        .setProjection(Projections.projectionList()
            .add(Projections.property("type"), "accountName")
            .add(Projections.sum("amount"))
            .add(Projections.groupProperty("type")));
        .setResultTransformer(Transformers.aliasToBean(CollectionDO.class))
return (List<CollectionDO>) criteria.list(); 
```

# knockout.js - 模板中的 Knockout.js $parents 键名并删除 observables

> ID：12543515
> 
> 赞同：0
> 
> 时间：2012-09-22T11:57:09.590
> 
> 标签：knockout.js, unbind, observable, parents

我有两个关于淘汰赛的简单问题：

1.  我如何获得 $parents 密钥，例如。如果我的视图模型是：

    ```
    viewModel = { ModelA: { ModelB : { ModelC : { someprop } } } } 
    ```

    我有 3 个模板，第一个模板渲染 ModelA，第二个 ModelB 和第三个 ModelC，如何在 ModelC 模板中获得以下内容：

    ```
    <a data-bind="visible: viewModel.{$parents[1].key}.{$parents[0].key}.{$data.key}.someprop" /> 
    ```

2.  如何在运行时从 ModelC 中删除 observable someprop。我试图将它嵌入到 ModelC 模板中：

    ```
    <input type="checkbox" data-bind="click: function() { viewModel.removeIt(someprop) }" /> 
    ```

    这在根页面中

    ```
    viewModel.removeIt = function(node) {
        ko.cleanNode(node);
    }; 
    ```

    但它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:33:53.473

我不太确定您在第一个问题中尝试做什么，但我创建了一个可以帮助回答它的小提琴：http: [//jsfiddle.net/FwJWG/](http://jsfiddle.net/FwJWG/)

至于删除 observable，您可以使用以下命令将其从类中完全删除：http `delete`: [//jsfiddle.net/7sS8k/](http://jsfiddle.net/7sS8k/)

# javascript - 音频元素中的 load() 方法是否会重新下载音频？

> ID：12543517
> 
> 赞同：1
> 
> 时间：2012-09-22T11:57:25.610
> 
> 标签：javascript, audio, methods, load, element

我正在制作一个音频重的网页。我已经读到某些系统上的音频播放存在一些问题，这些问题可以通过在 play() 方法之前调用 load() 方法来解决，所以我正在围绕这个前提设计一切。

我对音频元素一无所知，我担心 load() 方法正在增加带宽消耗。这就是我正在做的事情：

```
var x = new Audio("x.mp3");

function playMe(){
    x.load();
    x.play();   
} 
```

据我了解，音频文件是在创建 x Audio 对象时下载的。我担心的是每次单击播放按钮时 load() 方法是否会再次下载它。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:33:24.257

`x.load()`如果该方法重新下载文件，您可以检查自己的：

1.  打开您的浏览器开发工具 [例如[在 Chrome 中](https://developers.google.com/chrome-developer-tools/docs/overview)]；

2.  检查网络选项卡以了解`x.load()`呼叫活动。

# sql - 在多列中选择单列值？

> ID：12543526
> 
> 赞同：1
> 
> 时间：2012-09-22T11:58:54.980
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我的表中有一些数据如下：

```
 ID     Name
  2    219SUN_BV_Secure_Gateway.pdf
  3    197FDD_BV_Secure_Gateway.pdf
  5    225RQB_BV_Secure_Gateway.pdf
  6    A_00025_Q1_2012.pdf         
  7    A_00025_Q2_2012.pdf         
  8    A_00025_Q3_2011.pdf         
  9    C_00025_Q3_2011_PostLLC.pdf
 10    B_00025_Q3_2011.pdf 
```

我想按照以下要求获取数据：

*   在第一列中，我想要名称以 A 开头的数据
*   在第二列中，我想要名称以 B 开头的数据
*   在第三列中，我想要名称以 C 开头的数据

我使用了这个查询：

```
SELECT 
    CASE 
        WHEN DocumentFile LIKE 'A%' THEN DocumentFile 
    END as DocFile_A,
    CASE
        WHEN DocumentFile LIKE 'B%' THEN DocumentFile 
    END as DocFile_B,
    CASE 
        WHEN DocumentFile LIKE 'C%' THEN DocumentFile 
    END as DocFile_C 
FROM 
    RFP_DocumentVault 
```

这将返回以下结果：

```
DocFile_A              DocFile_B          DocFile_C
 NULL          NULL             NULL
 NULL          NULL             NULL
 NULL          NULL             NULL
 A_00025_Q1_2012.pdf   NULL             NULL
 A_00025_Q2_2012.pdf   NULL             NULL
 A_00025_Q3_2011.pdf   NULL             NULL
 NULL          NULL           C_00025_Q3_2011_Post Partners II, LLC.pdf
 NULL          B_00025_Q3_2011.pdf        NULL 
```

但我想要的结果如下：

```
 DocFile_A            DocFile_B                 DocFile_C
 A_00025_Q1_2012.pdf  B_00025_Q3_2011.pdf     C_00025_Q3_2011_Post Partners II, LLC.pdf
 A_00025_Q2_2012.pdf  NULL                      NULL
 A_00025_Q3_2011.pdf  NULL                      NULL 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T12:33:18.583

同意@GolezTrol，这也许应该在演示级别解决。但是，如果您绝对确定需要在 SQL 中执行此操作，这里有一个替代他们的解决方案：

```
WITH ranked AS (
  SELECT
    DocumentFile,
    grp = 'DocFile_' + LEFT(DocumentFile, 1),
    rnk = ROW_NUMBER() OVER (
      PARTITION BY LEFT(DocumentFile, 1)
      ORDER BY DocumentFile
    )
  FROM RFP_DocumentVault
)
SELECT *
FROM ranked
PIVOT (
  MAX(DocumentFile) FOR grp IN (DocFile_A, DocFile_B, DocFile_C)
) p
; 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/03a80/1)也有一个现场演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T12:11:46.597

奇怪的要求。在我看来，这是一个显示问题，而不是查询应该解决的问题，但没关系。我这里没有 SQL Server，但请尝试以下操作：

```
select
  DocFile_A, DocFile_B, DocFile_C
from
    (select
      row_number() over (order by DocumentFile) as RowNum_A,
      DocumentFile as DocFile_A
    from
      RFP_DocumentVault
    where
      DocumentFile like 'A%') A
    full outer join
    (select
      row_number() over (order by DocumentFile) as RowNum_B,
      DocumentFile as DocFile_B
    from
      RFP_DocumentVault
    where
      DocumentFile like 'B%') B on RowNum_B = RowNum_A
    full outer join
    (select
      row_number() over (order by DocumentFile) as RowNum_C,
      DocumentFile as DocFile_C
    from
      RFP_DocumentVault
    where
      DocumentFile like 'C%') C on RowNum_C = RowNum_A or RowNum_C = RowNum_B
order by
  RowNum_A, RowNum_B, RowNum_C 
```

# riak - 使用自动 ID 在 Riak 中存储数据？

> ID：12543527
> 
> 赞同：1
> 
> 时间：2012-09-22T11:58:57.727
> 
> 标签：riak

如果我`HTTP POST`对 riak 进行操作，即`http://localhost:8098/riak/mybucket`与 JSON 编码的数据一起`{name: "John Doe"}`，该对象将按预期保存。

`id`但是，这些数据将由Riak 自动分配给一个集合，例如`WAqRNgxZl10FK0F3FLuorByNHgN`.

是否有可能让 Riak`id`在响应中返回这个`HTTP POST`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:59:01.647

根据[Riak 文档](http://wiki.basho.com/Basic-Riak-API-Operations.html)，它在标头中返回新的密钥/ID `Location`。

> 在输出中， Location 标头将为您提供该对象的密钥。要查看新创建的对象，请在浏览器中转到“http://127.0.0.1:8091/Location”。

[您可以在此处](http://wiki.basho.com/Basic-Riak-API-Operations.html)查看文档- 向下滚动到“存储新对象并分配随机键”

# c# - 如何在保存之前提前知道当前新对象的 ID？

> ID：12543534
> 
> 赞同：0
> 
> 时间：2012-09-22T12:00:42.157
> 
> 标签：c#, sql-server-2008, asp.net-mvc-3-areas

在我的 ASP.NET MVC3 应用程序（C#、SQL Server）`Product`中具有`ImagePath`字符串类型。当我保存图像时，我想将产品的 ID 值赋予`ImagePath`. 当我创建新产品时，我不知道现在的产品会是`ID`什么`db.SaveChanges();`

```
 public ActionResult Create( Product product )
   { 
       .....
       .....//How to know ID of this product in advance?
       .....
       db.Products.AddObject( product );
       db.SaveChanges();
   } 
```

我可以找到最后一项产品并增加它：

```
currentID = lastID + 1; 
```

但是，也许最后一个 ID 被删除了。结果不会正确。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:05:34.113

我建议采用以下方法：

```
//don't save the image yet, or save it in a temporary location
db.Products.AddObject( product );
db.SaveChanges();
product.ImagePath = //path including product.Id
//save or move image to product.ImagePath
db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:11:30.003

我做不到，如果两个用户同时尝试创建产品，你会怎么做？添加图像，然后设置与产品的关系。

# c++ - 命名空间和 c++/c 混合标头

> ID：12543536
> 
> 赞同：1
> 
> 时间：2012-09-22T12:00:54.910
> 
> 标签：c++, c, header

下面的代码解释了我遇到的情况：

```
#ifdef __cplusplus
namespace ns
{
class pod
{
    const short foo;
    const char bar;
public:
    pod(short f,char b):foo(f),bar(b){}
    char foobar();
};
}
#else
typedef struct pod pod;
#endif

#ifdef __cplusplus
extern "C"{
#endif

extern pod* pod_new(short f, char b);//BANG!!!
extern char pod_foobar(pod* p); //BANG!!!

#ifdef __cplusplus
}
#endif 
```

我不能将 C 链接函数放在 namespace`ns`中，否则 C 客户端将找不到它们的定义。当我将它们拉出命名空间时，C++ 定义也不会编译，这都是因为`pod`我从[C++ FAQ Lite](http://www.parashift.com/c++-faq-lite/cpp-objs-passed-to-c.html)中学到的解决方案，它只是一个预处理器技巧。可悲的是，这个技巧无法处理命名空间。

我应该做些什么？我应该抛弃所有类型安全，并用 替换`pod*`，`void*`还是有更好的解决方案来解决这种情况？有什么建议吗？请！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:08:18.077

我只想为函数给出两个不同的声明

对于 C++：

```
extern "C" ns::pod* pod_new(short f, char b);
extern "C" char pod_foobar(ns::pod* p); 
```

对于 C：

```
typedef struct pod pod;
extern pod* pod_new(short f, char b);
extern char pod_foobar(pod* p); 
```

但如果这不能满足你，对于 C++，你也可以有一个`typedef`

```
typedef ns::pod ns_pod; 
```

对于 C

```
typedef struct ns_pod ns_pod; 
```

然后拥有相同的通用函数原型。

```
extern ns_pod* pod_new(short f, char b);
extern char pod_foobar(ns_pod* p); 
```

*编辑：*在 C 中`struct pod`or`struct ns_pod`是一个不完整的类型，所以在 C 中你永远不能直接做任何使用字段或询问其大小的事情。指向不完整类型的指针和 a 之间的区别在于`void*`，您只能将这样的`struct`指针分配给相同不完整类型的另一个`struct`指针。

```
typedef struct ns_pod2 pod2;
ns_pod* q = pod_new(...);   // valid
ns_pod2* r = pod_new(...);  // a constraint violation! (= compiler error) 
```

如果您想坚持，第二个需要明确的演员表。这是许多 C 程序员不赞成强制转换的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:59:41.980

我自己弄清楚了:) 通过检查 obj 文件的符号`nm`。

事实证明，C++ 命名空间对具有 C 链接的函数没有影响，因此我可以像这样重写上面的代码：

```
#ifdef __cplusplus
namespace ns
{
class pod
{
    const short foo;
    const char bar;
public:
    pod(short f,char b):foo(f),bar(b){}
    char foobar();
};
}

#else
typedef struct pod pod;
#endif 

#ifdef __cplusplus
namespace ns{
extern "C"{
#endif

pod* pod_new(short f, char b);
char pod_foobar(pod* p);
void pod_free(pod* p);

#ifdef __cplusplus
}
}
#endif 
```

# php - fpdf中的输出（）不起作用

> ID：12543538
> 
> 赞同：1
> 
> 时间：2012-09-22T12:00:57.500
> 
> 标签：php, pdf, fpdf

我正在尝试生成一个包含饼图的 pdf 文件。由于我有以下错误：

**FPDF 错误：一些数据已经输出，无法发送 PDF 文件**

经过大约一个小时的战斗后，我发现它可以很好地用于：*Output("Report.pdf",'F');* 但显示错误消息：*Output();* .

所以我被困在这里......任何人都可以帮助我解决这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:06:21.067

你已经回显了一些东西，所以你的 httpresponse 已经有一个标题，上面写着“我是一个 html 文本响应”，你不能修改它来说你*也是*一个 pdf 响应。您必须选择仅输出 html（因此您提供文件名作为输出函数的参数，以便生成访问 pdf 的链接）或通过删除任何 echo、printf 或外部仅输出 pdf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:10:36.000

尝试将以下内容放在 php 文件的开头：

```
error_reporting(E_ERROR | E_PARSE); 
```

这将避免`E_WARNING`输出错误，而无需查看代码以进行正确修复，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:09:23.813

[输出](http://www.fpdf.org/en/doc/output.htm)

输出接受第二个参数

```
I: send the file inline to the browser. The plug-in is used if available. The name given by name is used when one selects the "Save as" option on the link generating the PDF.
D: send to the browser and force a file download with the name given by name.
F: save to a local file with the name given by name (may include a path).
S: return the document as a string. name is ignored. 
```

# javascript - 实例化的 javascript 对象如何相互通信？

> ID：12543541
> 
> 赞同：4
> 
> 时间：2012-09-22T12:01:22.460
> 
> 标签：javascript, oop, javascript-objects

我认为问我问题的最好方法是举个例子。在 Javascript 中，想象以下场景：

```
function Tab(options) {
     this.options = options;
}

Tab.prototype.doSomething = function () { 
         if(...){
             //change tab1's options
             //tab1.disabled = true 
         }else{
             //change tab2's options
             //tab2.disabled = true
         } 
         //call a method on of mySlider instance (NOT myOtherSlider instance)
         //mySlider.helloWorld();
}

//slider class
function Slider(options) {
   ....
}
Slider.prototype.helloWorld = function () {
       ...
       //Access tab1's properties
       //tab1.disabled should be "TRUE" since it was changed previously

       //Access tab2's properties 
       ...
}
function Accordion() {
     this.name = 'accordion';
      var tab1          = new Tab({disabled: true}),
          tab2          = new Tab({disabled: false),
          mySlider      = new Slider({color: red}),
          myOtherSlider = new Slider({color: blue});
} 
```

几乎我希望所有类都知道在他们自己的类以及其他类中实例化的对象。

重要的部分是使实例同步。例如，对 tab1 属性的更改应该应用于/可见到访问 tab1 的任何其他对象。

* * *

## 我设法通过使用对象管理器类来回答我自己的问题

```
function ObjectManager (){
}

ObjectManager.objects = {};

ObjectManager.register = function (name, object) {
    var t = this;
    t.objects[name] = object;
}

ObjectManager.getObject = function (name) {
    var t = this;
    return t.objects[name];
}

function Tab () {
    this.name = 'tab object';
}

Tab.prototype.init = function (name) {
    var t = this;
    t.name = name;
}

Tab.prototype.changeProperty = function () {
    var tab1 = ObjectManager.getObject('tab1');
        tab1.name = 'changed tab1 name';
}    

function Accordion() {
    var tab1 = new Tab();
        tab1.init('tab number 1');

    var tab2 = new Tab();
        tab2.init('tab number 2');

        ObjectManager.register('tab1', tab1);
        ObjectManager.register('tab2', tab2);
        console.log(ObjectManager.objects);
        tab2.changeProperty();
        console.log(ObjectManager.objects);
        console.log(tab1.name);
}

var accordion = new Accordion();​ 
```

虽然我不确定这个解决方案的效率如何，但它可以完成工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:14:31.330

这个问题有很多不同的方法。让我解释两种常见的模式：

1.  [观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。每个需要被告知其他对象的变化的对象（“观察者”），被传递给它需要被告知的对象的“注册”方法（“观察者”）。被观察对象保持一个内部数组，其中包含为其注册的所有观察者。观察者还为它所代表的 DOM 元素（onclick、onchange 等）上的所有相关输入事件注册处理程序。当被观察对象发生变化时，它会通过调用其中的一个通用方法来通知所有观察者。

2.  [控制器模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。所有对象都由中央控制器对象管理。控制器保存需要管理的所有对象的数组。所有输入事件都由控制器处理。当输入事件发生时，它会确定哪些对象因为该事件而需要更改并更改它们。

# php - WordPress Widget API 中的表单是否需要 get_field_id()？

> ID：12543544
> 
> 赞同：5
> 
> 时间：2012-09-22T12:01:37.563
> 
> 标签：php, wordpress, wordpress-theming

我正在尝试为我的插件创建一个自定义小部件并遵循[codex](http://codex.wordpress.org/Widgets_API)。

这就是我到目前为止所拥有的。它正在工作并保存并显示保存的选项值。

```
<?php
/**
 * Plugin Name: Sample Widget
 */

$colors = array('red', 'blue', 'yellow');
update_option('sample_widget', $colors);

add_action( 'widgets_init', create_function( '', 'register_widget( "Sample_Widget" );' ) );
class Sample_Widget extends WP_Widget {

    public function __construct() {
        parent::__construct(
            'foo_widget', 
            'Sample Widget', 
            array( 'description' => __( 'This is a description of the sample widget', 'text_domain' ), ) // Args
        );
    }

    public function widget( $args, $instance ) {
        extract( $args );
        $title = apply_filters( 'widget_title', $instance['title'] );
        $color = apply_filters( 'widget_title', $instance['color'] );

        echo $before_widget;
        if ( ! empty( $title ) )
            echo $before_title . $title . $after_title;
        echo 'the selected color is ' . $color . '<br />';
        echo $after_widget;
    }

    public function update( $new_instance, $old_instance ) {
        $instance = array();
        $instance['title'] = strip_tags( $new_instance['title'] );
        $instance['color'] = $new_instance['color'];
        return $instance;
    }

    public function form( $instance ) {
        if ( isset( $instance[ 'title' ] ) ) {
            $title = $instance[ 'title' ];
        }
        else {
            $title = __( 'New title', 'text_domain' );
        }
        if ( isset( $instance[ 'color' ] ) ) {
            $selected_color = $instance[ 'color' ];
        }
        $colors = get_option('sample_widget');
        ?>
        <p>
            <label for="<?php echo $this->get_field_id( 'title' ); ?>"><?php _e( 'Title:' ); ?></label> 
            <input class="widefat" id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" type="text" value="<?php echo esc_attr( $title ); ?>" />
        </p>
        <p>
            <select name="<?php echo $this->get_field_name( 'color' ); ?>" id="<?php echo $this->get_field_id( 'color' ); ?>">
                <option value="">Select...</option>
                <?php foreach($colors as $color) echo '<option value="' . esc_attr( $color ) . '" ' . ($color == $selected_color ? 'selected="Selected"' : '') .  '>'. $color .'</option>'; ?>
            </select>
        </p>
        <?php 
    }
} 
```

我有两个问题：

1.  是`id="<?php echo $this->get_field_id( 'color' ); ?>"`为了什么？我删除了该行的这一部分，它似乎工作正常。我放置它只是为了复制 codex 工作代码。
2.  在构造函数中，第一个参数`parent::__construct()`是一个基本 ID。这可以是任何字符串值吗？我将其更改为其他内容，`foo_widget`并且似乎可以正常工作。

感谢您的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:17:45.063

1.  这`id="<?php echo $this->get_field_id( 'color' ); ?>"`是为此选项生成唯一的“id”值。通常这是为了让对象可以通过 JS 进行操作。

2.  `id_base`of是此类型的所有小部件的`foo_widget`Root id。它是小部件的可选基本 ID，小写，如果留空，将使用小部件类名的一部分。它必须是独一无二的。这将附加到单个小部件的 ID 号，即`foo_widget-001`

希望这对你有帮助！

# html - 哪一个是一种资源有效的方法：CSS3 Stylesheet or Canvas API for a HTML5 app to beported as Blackberry Webworks

> ID：12543545
> 
> 赞同：0
> 
> 时间：2012-09-22T12:01:47.957
> 
> 标签：html, css, canvas, blackberry-webworks, blackberry-10

我正在为即将推出的 Blackberry 10 设备使用 HTML5 技术（HTML5 + CSS3 + javascript）开发基于数学的游戏/应用程序，并使用 Blackberry WebWorks 进行移植。

游戏需要生成大量随机数。我目前正在“p”标签中生成它们并设置它们的样式。但是有人建议我不要过多使用样式表，而是使用 Canvas API。

是否有任何有效/提高绩效的理由来听取建议，或者只是任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:00:16.993

我是这样看的：

HTML 标签具有预定义的属性和行为，例如填充、浮动、相对位置等。使用这些标签可确保开发人员不必编写大量代码来模仿这种琐碎的行为。考虑建立一个列表：使用`<ul>`并将`<li>`为您处理定位。在画布中，您需要从头开始创建它或查找库。HTML/CSS IMO 非常适合 Web 应用程序。在性能方面，请确保您的动画是在 GPU 中完成的（使用 3d 变换）并且性能非常好。使用 HTML/CSS 也很容易响应不同的屏幕尺寸。

游戏倾向于使用直接操作的绝对定位元素（例如，将玩家从 100 像素移动到 150 像素），因此在 Canvas 中更易于使用。在性能方面，canvas2d 操作是硬件加速的，所以它应该像使用 HTML/CSS 一样流畅。

# fetchxml - MSCRM Online 中的 FetchXML 报告不能用于超过 250 个。它会引发一般错误消息

> ID：12543546
> 
> 赞同：0
> 
> 时间：2012-09-22T12:01:50.237
> 
> 标签：fetchxml

从 BIDS（商业智能开发工作室）运行 FetchXML 报告时，所有这些报告都可以在应用了所有过滤器的情况下正常工作。

但是，当将相同的报表部署到 MSCRM Online 时，它​​们会抛出一般错误消息（消息：发生错误，请联系管理员）。当只为特定过滤器选择几个值时（在线部署中），这些部署的报告工作正常。但是当在过滤器中选择所有值时它们会失败。例如，帐户绩效仪表板报告存在此问题。当我们选择最多 250 个帐户过滤器并选择所有 Finplan 组时，它工作正常，而超过 300 个帐户则失败。

从概念上讲，在 BIDS 中成功执行的任何内容在部署时也应该成功执行。但这并没有发生。我可以简单地转到 Microsoft Connect 并提出错误吗？还是我缺少任何步骤？

同样的查询在高级查找中也可以正常工作，但它会在报告中引发错误（选择超过 250 个），这在 BIDS 中可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:02:12.247

我自己找到了！

CRM在线有限制和限制。请参阅以下链接。我们无法为 MSCRM Online 2011 设计庞大的查询报告

[http://social.technet.microsoft.com/wiki/contents/articles/12601.crm-2011-timeouts-and-limits.aspx](http://social.technet.microsoft.com/wiki/contents/articles/12601.crm-2011-timeouts-and-limits.aspx)

[http://blogs.microsoft.co.il/blogs/rdt/archive/2012/08/31/microsoft-crm-2011-timeouts-and-limits.aspx](http://blogs.microsoft.co.il/blogs/rdt/archive/2012/08/31/microsoft-crm-2011-timeouts-and-limits.aspx)

[http://msdn.microsoft.com/en-us/library/gg334634.aspx](http://msdn.microsoft.com/en-us/library/gg334634.aspx)

在本文档中，您将找到有关可以在 CRM 环境中设置的限制的一般信息，我希望您会发现这很有用：

[http://www.microsoft.com/en-us/download/details.aspx?id=27139](http://www.microsoft.com/en-us/download/details.aspx?id=27139)

# c# - 拆分两位整数

> ID：12543548
> 
> 赞同：0
> 
> 时间：2012-09-22T12:02:46.853
> 
> 标签：c#, math, int

我想将一个两位数的整数分成两个一位数的整数！例如：

```
20 = 2 and 0

15 = 1 and 5

8  = 0 and 8 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T12:04:01.360

这很简单：用于`%`获取数字的模数，以及`/`用于整数除法（即舍弃小数部分的除法）。

您的数字采用十进制系统（即底数为`10`），因此您除以 10 并取模，如下所示：

```
int a = 20 / 10; // 2
int b = 20 % 10; // 0 
```

要逐位打印一个数字，首先是最低有效位，您可以使用以下循环：

```
int a = 12345;
while (a != 0) {
    lastDigit = a % 10;
    Console.WriteLine(lastDigit);
    a /= 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:06:05.230

```
int i = 45; // or anything you want

int firstDigit = i / 10;
int secondDigit = i % 10; 
```

这真的很简单。您也可以使用模数和除法运算对 3 位数字执行此操作，但我会让您自己弄清楚。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:07:02.510

是的，很容易。

```
int m =2123;
int n=m;
while (n != 0) { 
    y=n%10; //variable holds each digit out of the number m.
    Console.WriteLine(y);
    n /= 10;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T12:13:37.733

如果您有一个整数数组，那么您可以很好地使用 LINQ，否则只需使用以下任何答案。

```
int num = 86;
int digit1 = num / 10;
int digit2 = num % 10; 
```

你的号码只有两位数吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T12:30:35.697

```
 int input = 15;
        int first = 0;
        int second = Math.DivRem(input, 10, out first); 
```

# asp.net - 从 GridView 选择按钮调用网页

> ID：12543549
> 
> 赞同：0
> 
> 时间：2012-09-22T12:02:48.267
> 
> 标签：asp.net, vb.net, gridview, asp.net-webpages

在 ASP.Net / VB.Net 网页中，我希望允许用户在我的应用程序中调用另一个网页，将一些参数传递给另一个页面，该页面使用这些参数作为“选择按钮”中数据源“选择”语句的一部分"的 GridView。

如果可以做到这一点，你能展示所需的编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:11:02.963

为什么你需要调用你想要它弹出的网页？或者你想加载页面？

好的，就是这样，代码告诉我它是否工作： `<script type="text/javascript"> function basicPopup() { popupWindow = window.open("yourpage.aspx", 'popUpWindow', 'height=300,width=600,left=100,top=30,resizable=No,scrollbars=No,toolbar=no,menubar=no,location=no,directories=no, status=No'); } </script>`

在客户端单击按钮时调用此函数 `OnClientClick="basicPopup();return false;"`

如果您希望将其作为页面打开，这是我在 stackoverflow 中找到的答案： [gridview select button to be a link to a page](https://stackoverflow.com/questions/5014920/gridview-select-button-to-be-a-link-to-a-page?rq=1)

# listview - 在 VB6.0 的一个列表视图中显示 2 个表格

> ID：12543553
> 
> 赞同：3
> 
> 时间：2012-09-22T12:02:57.377
> 
> 标签：listview, vb6

我目前正在开发我的 vb6 程序，但在从两个表中显示一个列表视图时遇到问题.. 第一次尝试它运行正确，它将我的信息（如姓名、地址、年龄等）存储在分配的列上，但在第二次运行时。信息成倍增加，并放在列表视图的第一列:(这是我在列表视图表单上的代码：

```
Private Sub Form_Activate()
Set rs = New ADODB.Recordset
With rs
.open "Select * from tblapps , tblappsinfo", cn, 3, 3
ListView1.ListItems.Clear
Do Until rs.EOF
    ListView1.ListItems.Add = !Name
    ListView1.ListItems.Item(1).ListSubItems.Add = !address
    ListView1.ListItems.Item(1).ListSubItems.Add = !tin
    ListView1.ListItems.Item(1).ListSubItems.Add = !cel
    ListView1.ListItems.Item(1).ListSubItems.Add = !College
    ListView1.ListItems.Item(1).ListSubItems.Add = !age
    ListView1.ListItems.Item(1).ListSubItems.Add = !Status
    ListView1.ListItems.Item(1).ListSubItems.Add = !Salary_Desired
    ListView1.ListItems.Item(1).ListSubItems.Add = !Hours_can_work
    ListView1.ListItems.Item(1).ListSubItems.Add = !Available_for_work

  .MoveNext
  Loop
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:50:55.063

当您为后续记录添加子项时，您不会更新该项的索引，它总是将其添加到`Item(1)`.

在您的示例中，您想要的是

```
ListView1.ListItems.Item(ListView1.ListItems.Count) 
```

这样子项目总是被添加到最新的项目中。

不过要小心！如果添加时 Sorted 属性为 true，则最近的可能不是最后一个。在这种情况下，您可以将每个项目的名称添加为自己的键：

```
ListView1.ListItems.Add , !Name, !Name 
```

然后通过键而不是索引来引用

```
ListView1.ListItems.Item(!Name) 
```

但是，在循环之前关闭排序并在循环`ListView1.Sorted = False`之后重新打开它可能会更好、更容易（避免键冲突问题） `ListView1.Sorted = True`。

# css - 在 twitter-bootstrap 中居中表格？

> ID：12543554
> 
> 赞同：0
> 
> 时间：2012-09-22T12:03:44.380
> 
> 标签：css, layout, twitter-bootstrap, html, forms

我正在为一个学生团体等开发一个开源社交网络。

我希望此表单以页面为中心。

我的尝试：http: [//jsfiddle.net/WgSgW/](http://jsfiddle.net/WgSgW/)

**我如何让它居中？**- 我最接近工作解决方案的是使用这些`offset#`类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:25:37.410

替换您的表单容器，`.span9`以`.span12`在屏幕上完全展开该行，然后只需将您的登录表定义为表单`display:inline-block`的`text-align:center`所有内容，如下所示：

创建了我自己的类，以免弄乱引导程序的默认值。

**CSS**

```
.login {
    text-align:center;
}

.center {
    *display:inline; /* ie 7 */
    display:inline-block;
    text-align:left; /* to reset the alignment to the left, container will remain centered */
    zoom:1; /* ie7 junk */
} 
```

**HTML**

```
<div class="container">
    <div class="row">
        <div class="span12 login">
            <form action="" enctype="multipart/form-data" method="post">
                <table class="center">
                    <tr id="auth_user_email__row">
                        <td class="w2p_fl"><label for="auth_user_email" id="auth_user_email__label" style="display:none;">Email: </label></td><td class="w2p_fw">
                        <input class="string" id="auth_user_email" name="email" placeholder="email address" type="text" value="" />
                        </td><td class="w2p_fc"></td>
                    </tr>
                    <tr id="auth_user_password__row">
                        <td class="w2p_fl"><label for="auth_user_password" id="auth_user_password__label" style="display:none;">Password: </label></td><td class="w2p_fw">
                        <input class="password" id="auth_user_password" name="password" placeholder="password" type="password" value="" />
                        </td><td class="w2p_fc"></td>
                    </tr>
                    <tr id="submit_record__row">
                        <td class="w2p_fl"></td><td class="w2p_fw">
                        <input class="btn btn-large btn-primary" type="submit" value="Signup" />
                        </td><td class="w2p_fc"></td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
    <div class="pagination-centered">
        By signing up you are agreeing to our <a href="/legal/agreement/">terms &amp; conditions</a>
    </div>
</div> 
```

演示：http: [//jsfiddle.net/WgSgW/1/](http://jsfiddle.net/WgSgW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:16:17.217

在 Twitter Bootstrap 中定位元素的原生方式是使用`offset#`类。对于您的特定情况，您可以使用

```
<div class="span4 offset4"> ... </div> 
```

Taje 看[这里](http://jsfiddle.net/simbirsk/Yc52b/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:33:06.953

表格已经居中。您需要做的是通过应用样式使表格居中`margin:0 auto;`

这应该有效。

# javascript - 如何在 MVC 中隐藏新添加的视图 div？

> ID：12543557
> 
> 赞同：0
> 
> 时间：2012-09-22T12:04:02.733
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 3 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我在每个 Div 中添加了评论链接。. 当用户单击该评论链接时，它会加载包含用于添加评论的控件组的部分视图。

**现在我的问题是关于删除新评论。**

我有删除已保存评论的代码..它工作得很好......

现在的问题是**当用户输入新评论并尝试删除时，它不会被删除......**

见蓝色方块。

看这张图就明白了……

![在此处输入图像描述](../Images/05bc72670f72f6f57508d02bef1cf024.png)

我的代码是...

```
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>

@model  IEnumerable<CRMEntities.Comment>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

//Button which Saves currently added comment in DB as well display on screen...
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () 

        {     

       // alert("clicked");
            $.ajax({

                type: 'post',
                url: '/Comment/SaveComments',
                dataType: 'json',
                data:
                { 

                 'comments' : $('#Comment').val(), 
                 'EType' : @Html.Raw(Json.Encode(ViewBag.EType)), 
                  'EId' : @Html.Raw(Json.Encode(ViewBag.EId))

                },
                success: function (data) {

                    $("p.p12").append('<div style="background-color:#FAFAFA;">Recently Added... <br /><a href="@Url.Action("Details", "Employee", new { id = "__id__" })'.replace('__id__', data.OwnerID) + '">' + data.OwnerName + '</a>'+ data.cmtDateTime +'<button type="button" id=' + data.Id  + ' class="deleteComment">Delete</button></span><br />' + data.msg + '</div>')

                }

            });
        });
    });
</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".ShowComments").click(function () {
            $(".ParentBlock").slideToggle("slow");
     });
    });
</script>

</head>
<body>

@{

     <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div class="OwnerClass" id="OwnerName">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

          <span class="EmpName"><button type="button" id = "@item.Id" class="deleteComment">Delete</button></span>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        </div>

    }

     <p class="p12">

      </p>

</div>

      <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

}

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

</body>
</html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
//   Working code - Deletes the comment from DB and removes hide the current Div
////////////////////////////////////////////////////////

    $(document).ready(function () {
        $(".deleteComment").click(function ()
         {
            alert("asd");

            var Id = $(this).attr("id");
           var self = this;

            var url1="@Html.Raw(Url.Action("DeleteComment", "Comment", new { id = "idValue" }))";
            url1=url1.replace("idValue",Id );
            alert(url1);

            $.ajax(
            {

                type: 'post',
                url: '/Comment/DeleteComment',
                dataType: 'json',
                data:
                { 

                 'EId' : Id

                },
                success: function (data) 
                {
                alert ("Hello");

                    $(self).closest("div").hide("slow");
                }

            });

        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:21:41.167

在追加新 div 时的成功方法中，只需向删除按钮添加一个类，其 CSS 为`display:none`

例如：

```
$("p.p12").append('<div style="background-color:#FAFAFA;">Recently Added... <br /><a href="@Url.Action("Details", "Employee", new { id = "__id__" })'.replace('__id__', data.OwnerID) + '">' + data.OwnerName + '</a>'+ data.cmtDateTime +'<button type="button" id=' + data.Id  + ' class="deleteComment hidden">Delete</button></span><br />' + data.msg + '</div>') 
```

CSS：

```
.hidden { display: none;} 
```

当你准备好展示它时，你可以简单地从按钮中删除类。

# php - PHP将变量传递给包含的文件

> ID：12543559
> 
> 赞同：0
> 
> 时间：2012-09-22T12:04:14.620
> 
> 标签：php, code-separation

我有一个非常简单的模板类，它允许我设置一些值，然后包含一个模板文件。该类存储变量，模板文件可以使用 $this->variable 访问。

所以我的问题是我应该怎么做呢？或者也许最好只分配一些变量然后包含模板文件 - 这样它们就不需要传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:10:00.773

如果您像这样调用[“提取”](http://php.net/manual/en/function.extract.php)：

```
extract( $this -> variables ); 
```

在您的模板代码的顶部，您将能够引用`$this -> variables[foo]`as `$foo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:09:11.010

OO 编程的优点之一是变量可以绑定到类并在类的上下文中使用。

所以`$this->title`意味着：使用绑定到**此类**的标题变量。

您基本上要问的是：我如何从 OO 编程回到过程编程。我的回答是：不要那样做，试着坚持 OO 编程。

# backbone.js - Backbone.js，当我创建模型并且我现在想删除时

> ID：12543560
> 
> 赞同：0
> 
> 时间：2012-09-22T12:04:15.207
> 
> 标签：backbone.js, chaplinjs

我在服务器端有 mongodb 的 express.js，前面有 chaplin.js 的早午餐，我的问题是当我创建模型时，它出现在模型列表中，但我无法删除它，因为方法 isNew()返回真。

我认为是服务器端的问题，不是吗？

这是代码

**comment_view.coffee**

```
View = require 'views/base/view'
template = require 'views/templates/comment'
mediator = require 'mediator'

module.exports = class CommentView extends View
  template: template
  autoRender: true
  container: '.list-comment'
  tagName: 'li'

  initialize: ->
    @delegate 'click', '.icon-remove', @remove_one

  remove_one: ->
    @model.destroy()
    @remove() 
```

**服务器.js**

```
app.delete('/api/comments/:id',function(req, res) {
  CommentsEventModel.findByIdAndRemove(req.params.id, function (err, comments) {
    if (err) { throw err; }
    res.send(200);
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:47:38.960

如果`model.isNew()`返回`true`是因为`model.id`是`null`。

尝试检查您的服务器如何响应`CREATE`动词，以及它是否以正确的 JSON 格式响应，其中包含一个`id`字段。

# javascript - 使用变量的 Javascript 日期对象

> ID：12543561
> 
> 赞同：0
> 
> 时间：2012-09-22T12:04:16.697
> 
> 标签：javascript, html, css

我的js代码如下：-

```
 var earlierdate=new Date(2012,09,22);
   alert(earlierdate.getDay());

   var date2 = new Date('2012,09,22');
   alert(date2.getDay()); 
```

问题是第一个警报给了我 1 0r Monday（这是不正确的），第二个警报给了我 6 或 sat，这是正确的。所以引号中给出的日期给出了正确的结果。现在，如果想使用变量而不是硬编码值，例如

```
var date1 = new Date(a,b,c);
alert(date1.getDay()); 
```

应该是什么语法。我尝试了很多变化，但都失败了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:07:26.167

的`month`参数`Date`是**0-indexed**。

> ***月***
> 
> 表示月份的整数值，从 0 开始表示一月到 11 表示十二月。

所以如果你指的是*九月*，那应该是`var earlierdate=new Date(2012, 8, 22);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:11:22.837

```
 //Option 1
 var myDate=new Date();
 myDate.setFullYear(2010,0,14);

//Option 2 (Neater)
var myDate=new Date(2010,0,14); 
```

这会将时间设置为 2010 年 1 月 14 日。

# windows - StreamWriter ：有没有办法在不直接写入磁盘的情况下写入内存？

> ID：12543562
> 
> 赞同：0
> 
> 时间：2012-09-22T12:04:23.080
> 
> 标签：windows, temporary-files

我有一个应用程序，在某个时刻必须创建一个临时文件，然后将其删除。所以我正在考虑是否可以将临时文件创建到内存中而不是直接创建到磁盘中。然后我想从内存中读取它以执行一些操作，最后在做了一些事情之后，从内存中删除它。如果可能，如何在 .NET Framework 和 C# 中执行此操作。另外，直接使用内存而不是磁盘会影响性能吗？

我想直接使用内存而不是磁盘，因为我害怕某种不允许将文件写入磁盘某些位置的 Windows 权限......所以另一个疑问是：如果使用磁盘而不是内存是否有安全windows XP,Vista,7,8写临时文件的地方，避免写权限冲突？我的意思是，一个总是可以安全地写入临时文件然后删除它的地方。也许，在 user\Local Settings\Temp 文件夹中？这是最好的地方吗？我想知道一个安全的地方来保存临时文件，然后删除它们适用于 Windows 版本：XP、Vista、7 和 8。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:09:27.140

您可以使用[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)写入内存而不是磁盘。使用内存流可能会提高性能，因为磁盘的写入速度通常较慢。一如既往：优化前的配置文件。

有关临时文件夹的信息，请参阅此线程：[如何获取当前用户的临时文件夹](https://stackoverflow.com/questions/944483/how-to-get-temporary-folder-for-current-user)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-22T12:11:27.700

您应该能够编写从 Stream 类继承的自己的类，覆盖其方法（读/写等），并在其中维护您自己的字符串构建器或任何适合您的东西。一切都将在内存中，当然它会非常快。

我认为 XP 有“文档和设置”，vista/7 有用户文件夹，每个用户都有自己的位置来写临时文件，在那里写应该没有问题。你在想什么是正确的imo。

# wordpress - Wordpress - 将特色图片添加到自定义帖子类型

> ID：12543563
> 
> 赞同：12
> 
> 时间：2012-09-22T12:04:28.330
> 
> 标签：wordpress, wordpress-theming

我正在尝试将特色图片添加到我的主题中，但不适用于帖子或页面 - 我创建了一个名为 Properties 的自定义类型（它用于房地产经纪人），那么如何启用特色图片，因为它没有出现在场景选项中？

希望有人能帮忙，

```
$property  = new Cuztom_Post_Type( 'Property', array(
    'supports' => array('title', 'editor')
)); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-22T15:36:37.383

```
$property  = new Cuztom_Post_Type( 'Property', array(
    'supports' => array('title', 'editor', 'thumbnail')
)); 
```

我似乎已经解决了我自己的问题 - 见上文

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-08T09:57:05.103

这可能会帮助某人，

```
add_theme_support('post-thumbnails');
add_post_type_support( 'my_product', 'thumbnail' );    
function create_post_type() {
        register_post_type( 'my_product',
            array(
                'labels' => array(
                    'name' => __( 'Products' ),
                    'singular_name' => __( 'Product' )
                ),
                'public' => true,
                'has_archive' => true
            )
        );
    }
    add_action( 'init', 'create_post_type' ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-25T20:32:54.100

您可以使用主题的 function.php 文件中的以下代码行简单地为任何自定义帖子类型启用支持帖子缩略图。

```
add_post_type_support( 'forum', 'thumbnail' ); 
```

注意：这里，`forum`是帖子类型名称。

您可以将此代码保留在`after_setup_theme`挂钩中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-15T11:01:52.700

可能这会有所帮助

```
 function create_post_type() {
  register_post_type( 'sadaf_films',
    array(
      'labels' => array(
        'name' => __( 'Films' ),
        'singular_name' => __( 'Film' )
      ),
      'public' => true,
      'has_archive' => true,
      'supports' => array( 'title', 'editor', 'custom-fields','thumbnail' ),
    )
  );
}
add_action( 'init', 'create_post_type' ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-28T11:55:12.193

100% 使用此代码

```
 add_theme_support('post-thumbnails');
add_post_type_support( 'news', 'thumbnail' ); 

function create_posttype() {
    register_post_type( 'news',
        array(
            'labels' => array(
                'name' => __( 'News' ),
                'singular_name' => __( 'news' )
            ),
            'public' => true,
            'has_archive' => true,
            'rewrite' => array('slug' => 'news'),
            'menu_icon' => 'dashicons-format-aside',

        )
    );
}
add_action( 'init', 'create_posttype' ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-25T12:07:27.583

```
 add_theme_support('post-thumbnails');
    add_post_type_support( 'testimonial', 'thumbnail' );

    function create_posttype() {
     register_post_type( 'testimonial',
        array(
                'labels' => array(
                    'name' => __( 'Testimonial' ),
                    'singular_name' => __( 'testimonial' )
                ),
                'public' => true,
                'has_archive' => true,
                'rewrite' => array('slug' => 'testimonial'),
                // add category in custom post type
                'taxonomies' => array( 'category'),
            )
        );
    }

    add_action( 'init', 'create_posttype' ); 
```

# ipad - UIActivity activityViewController 没有在 iPad 上关闭

> ID：12543565
> 
> 赞同：9
> 
> 时间：2012-09-22T12:04:34.307
> 
> 标签：ipad, ios6, uiactivity

我有一个`UIActivity`创建自己的子类`activityViewController`：

```
- (UIViewController *)activityViewController {
    WSLInProgressViewController* progressView = [[[WSLInProgressViewController alloc] init] autorelease];
    progressView.message = [NSString stringWithFormat:NSLocalizedString(@"Posting to %@...",@"Posting to..."),
                        self.activityType];

    return progressView;
} 
```

我[在 GitHub 上](https://github.com/sdarlington/ActivityViewContollerBug)添加了一个完整的复制品。

* * *

根据文档，您不应该手动关闭它。相反，操作系统会在您调用`activityDidFinish:`. 这在 iPhone 上运行时效果很好。

当我说“有效”时，这就是我所期待的事件序列（并在 iPhone 上看到）：

1.  显示`UIActivityViewController`
2.  用户按下我的自定义活动
3.  我的视图控制器出现
4.  我打电话`activityDidFinish:`
5.  我的自定义视图控制器被解雇
6.  `UIActivityViewController`也被解雇了

`UIActivityViewController`然而，当我在 iPad 模拟器上运行相同的代码时——唯一的区别是我`activityViewController`将

正如我所说，这是*代码 wo/popUP*在 iPhone 上工作，我已经逐步完成了代码，所以我知道它`activityDidFinish:`被调用了。

[我发现这个雷达在beta 3](http://openradar.appspot.com/12034500)中讨论了[同样的问题`iOS6`](http://openradar.appspot.com/12034500)，但它似乎是这样的基本功能，以至于我怀疑我的代码而不是操作系统中存在错误（另请注意，它与 Twitter 和 Facebook 功能一起正常工作！）。

* * *

我错过了什么吗？当 activityViewController 在 a 中运行时，我是否需要在它中做一些特别的事情`UIPopoverViewController`？iPad上的“流程”*应该不同吗？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T01:15:20.373

仅当您的“活动”控制器直接呈现，而不是包裹在任何东西中时，才会出现自动解雇。因此，在显示它所包含的弹出窗口之前，添加一个完成处理程序

```
activity.completionHandler = ^(NSString *activityType, BOOL completed){
   [self.popup dismissPopoverAnimated:YES];
}; 
```

你会好起来的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T12:19:37.703

我看到这个问题已经很老了，但我们一直在这里调试相同的视图控制器不关闭问题，我希望我的回答能提供一些额外的细节和比`-dismissPopoverAnimated:`手动调用更好的解决方案。

UIActivity 的文档非常稀少，虽然它暗示了实现的结构方式，但问题表明它并不那么明显。

您应该注意的第一件事是文档指出您无论如何*都不*应该手动关闭视图控制器。这实际上是正确的。

文档没有说什么，以及当您遇到调试 non-dismissing-view-controller 问题时可以观察到的事情是，iOS在需要对主题视图控制器的引用时*会*调用您的方法。`-activityViewController`事实证明，可能仅在 iPad 上，iOS 实际上并没有将返回的视图控制器实例存储在其结构中的任何位置，然后，当它想要关闭视图控制器时，它只是询问您`-activityViewController`的对象然后关闭它。因此，在第一次调用该方法时（当它被显示时）实例化的视图控制器永远不会被解除。哎哟。这就是问题的原因。

我们如何正确解决这个问题？

进一步浏览`UIActivity`文档可能会偶然发现该`-prepareWithActivityItems:`方法。特定提示位于以下文本中：

> 如果您的服务的实现需要向用户显示额外的 UI，您可以使用此方法来准备您的视图控制器对象并使其可从 activityViewController 方法获得。

因此，想法是在`-prepareWithActivityItems:`方法中实例化您的视图控制器并将其处理为实例变量。然后只需从您的`-activityViewController`方法返回相同的实例。

鉴于此，在您调用该`-activityDidFinish:`方法而无需任何进一步的手动干预后，视图控制器将被正确隐藏。

答对了。

注意！进一步挖掘这一点，每次调用它时*都不*`-prepareWithActivityItems:`应该实例化一个新的视图控制器。如果您以前创建了一个，则只需重新使用它即可。在我们的例子中，如果我们不这样做，它就会很高兴地崩溃。

 *我希望这可以帮助别人。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T14:55:27.803

我有同样的问题。它为我解决了将 activityViewController 保存为成员并返回存储的控制器的问题。活动返回新对象并在新对象上调用解除。

```
 - (UIViewController *)activityViewController {
        if (!self.detaisController) {
            // create detailsController
        }
        return self.detailsController;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:39:43.900

我通过 UIActivity 到另一个视图然后调用以下...

```
[myActivity activityDidFinish:YES]; 
```

这适用于我的设备以及模拟器。确保您没有像我之前所做的那样覆盖 UIActivity .m 文件中的 activityDidFinish 方法。你可以看到我在[这里](https://github.com/bufferapp/buffer-uiactivity)使用的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T08:54:40.373

一种解决方法是要求调用 ViewController 通过执行对目标 ViewController 的 segue，`- (void)performActivity`尽管 Apple 不建议这样做。

例如：

```
- (void)performActivity
{

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        [self.delegate performSomething]; // (delegate is the calling VC)
        [self activityDidFinish: YES];
    }
}

- (UIViewController *)activityViewController
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        UIViewController* vc=XXX;

        return vc;
    }
    else
    {
        return nil;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T12:42:10.097

你使用故事板吗？也许在您的 iPad 故事板中，`UIActivityIndicatorView`没有检查“停止时隐藏”？

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-29T19:14:56.533

所以我遇到了同样的问题，我有一个带有自定义 activityViewController 的自定义 UIActivity，当它以模态方式呈现时，无论我尝试什么都不会关闭。为了使用户的体验保持不变，我选择使用的解决方法是仍然使用自定义 UIActivity，但给该活动一个委托。所以在我的 UIActiviy 子类中，我有以下内容：

```
- (void)performActivity
{
    if ([self.delegate respondsToSelector:@selector(showViewController)]) {
        [self.delegate showViewController];    
    }

    [self activityDidFinish:YES];
}

- (UIViewController *)activityViewController
{
    return nil;
} 
```

然后，我将显示 UIActivityViewController 的视图控制器设为委托，并显示视图控制器，否则您将在委托方法中的 activityViewController 中显示该视图控制器。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-02T22:33:14.393

最后释放呢？使用**非圆弧**项目！

**`[progressView release];`**

许多用户和你有同样的问题！另一种解决方案是：

```
UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
[alert addSubview:progress];
[progress startAnimating]; 
```

如果您使用情节提要，请确保当您单击活动时。单击“停止时隐藏”！

希望有帮助...*

# ios - UITabBarController 在 iPhone 5 模拟器上没有响应：4 英寸视网膜显示屏

> ID：12543567
> 
> 赞同：20
> 
> 时间：2012-09-22T12:04:44.167
> 
> 标签：ios

我有一个显示四个选项的 UITabBarController。到目前为止，这些都运行良好。

我的问题是标签栏只有在 IOS 模拟器中的 4 英寸视网膜显示设备上测试时才响应。选项卡栏响应的所有其他设备，我可以选择其他视图。

我没有 iPhone 5 来测试它，所以我不知道这是否是模拟器的故障，或者 Apple 已经改变了新硬件的标签栏等的工作方式，或者让它变得更严格，我写了错误的代码首先。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-22T14:59:00.363

我也有这个问题，这对我有用：

转到 MainWindow.xib，选择 Window 对象并检查“启动时全屏”。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-02T22:32:14.100

在主窗口中，选择“启动时全屏”选项。这是一张图片：

![在此处输入图像描述](../Images/0da82403a149dd1793708c20fa70eb71.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:07:45.973

在它的顶部可能有一个透明的视图吗？视图大小的变化可能会将某些东西放置在错误的位置。

# jquery - 如果没有 img 则删除 div

> ID：12543571
> 
> 赞同：0
> 
> 时间：2012-09-22T12:05:39.047
> 
> 标签：jquery, events

我有一个可以检索 url 和 favicon 的脚本：[MyWebsite](http://moskah.nl/)

如果您单击带有 textarea 空白的“共享”按钮，您将看到它放置了一个空白项目。我如何在 Jquery 中编写：如果项目没有文本/html，隐藏/删除项目？我试过这个：

```
$('document').ready(function(){

     if ($('.item').text('')) {
        $(this).hide();

    }
}); 
```

它不起作用。我也尝试过其他的东西，也尝试过加载窗口，似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:13:36.760

```
$(document).ready(function() {
    $('#shareButton').click( function() {
         if ($('#myInput').val()) {
            // Add new row here
         }
    });
}); 
```

如果输入为空，则不应添加行。因此，您不应添加新行，而不是隐藏新行。如果有一些文字，您应该添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:13:46.277

您可以检查 id_status 长度是否 == 0，什么也不做。不然正常发帖

```
$(document).ready(function() {
    $("#id_submit").click(function() {
        if( $("#id_status").val().length == 0)
            return false;
        else {
            // do your magic 
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T12:16:09.710

你需要检查所有项目所以试试这个结构

```
$('.item').each(function(indx){
   if($(this).html()=="")
    {
       $(this).hide();
    }
}); 
```

可能您需要使用 $.trim() 来确保 html 内部没有空格

# delphi - 如果您使用 Styles，Delphi TListView DoubleBuffered 将不起作用

> ID：12543573
> 
> 赞同：4
> 
> 时间：2012-09-22T12:05:56.640
> 
> 标签：delphi, delphi-xe2, vcl-styles

当您启用应用程序样式并将 TListView 的 DoubleBuffered 属性设置为 True 时，它​​不起作用。当您更新列表项及其子项时，它会闪烁。有人对此有解决方案吗？

我实际上很喜欢 Styles，但仍然存在技术问题。现在我不能相信风格。

谢谢，K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-25T07:02:22.473

该线程末尾的建议似乎有效：
[https ://forums.embarcadero.com/thread.jspa?messageID=849037](https://forums.embarcadero.com/thread.jspa?messageID=849037)

只需从 StyleElements 中删除 seClient 并手动将背景调整为样式颜色。

# android - ViewFlipper 显示的视图顺序错误

> ID：12543582
> 
> 赞同：1
> 
> 时间：2012-09-22T12:07:01.213
> 
> 标签：android, android-layout

在我的项目中，我有一个三天的数组：

```
 String[] days = {"Friday", "Saturday", "Sunday"}; 
```

这些以编程方式添加到 ViewFlipper 中，如下所示：

```
 ViewFlipper vf = (ViewFlipper) findViewById(R.id.view_flipper);
 TextView textview = new TextView[numDays];
 LinearLayout layout = new LinearLayout[numDays];

 for(int i = 0; i<numDays; i++){
      layout[i] = new LinearLayout(this);           
      vf.addView(layout[i]);

      textview[i] = new TextView(this);
      textview[i].setText(data.days[i].name);           
      layout[i].addView(textview[i]); 
 } 
```

但是当我在加载我的应用程序时转到 ViewFlipper 时，它会按以下顺序显示：

```
 Friday --- Sunday --- Saturday 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:17:23.017

```
String[] days = {"Friday", "Saturday", "Sunday"}; 
```

和

```
 strong text  Intent intent=getIntent();
    String selected=intent.getStringExtra("SELECTED",0);    
    int[] Ids=days [selected];        
    System.out.println(selected);

    Flipp = (ViewFlipper)findViewById(R.id.viewFlipper);          
       for(int i=0; i<Ids.length;i++)
    {
        TextView View=new TextView (this);
        View.setImageResource(Ids[i]);            
        Flipp.addView(View);
    } 
```

# iphone - 在选定项目上替换 UIScrollView 中的图像

> ID：12543584
> 
> 赞同：0
> 
> 时间：2012-09-22T12:07:05.340
> 
> 标签：iphone, objective-c, uiscrollview, uiscrollviewdelegate

我创建了简单`UIScrollView`的图像。每次按下图像时，我都想更改该图像，我该怎么做？

我创建它并用图像`UIScrollView`初始化它。`NSMutableArray`

```
 UIScrollView *myScroll = [[UIScrollView alloc] initWithFrame: CGRectMake (0,100,200,30)];
        NSMutableArray = *images = [NSMutableArray alloc] initWithObjects: img1,img2,img3,nil];

for (int i=0; i<3; i++)
{
        UIImageView *imageV = [UIImageView alloc];
        [imageV setImage:[images objectAtIndex:i]];
        [myScroll addSubview:imageV];
        [imageV release];
}

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget: self action:@selector (changeImg:)];
    [myScroll addGestureRecognizer: singleTap]; 
```

以及我在卷轴上被触摸的地方的感触：

```
- (void) singleTapGestureCaptured:(UITapGesturerecongnizer *) gesture
{
    CGPoint touch = [gesture locationInView:myScroll];

} 
```

通过触摸项目的 X,Y 我知道选择了什么图像

在这里，我需要更改例如 myScroll 的第一张图片...我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:25:44.137

添加`UITapGestureRecognizer`并`UIImageView`设置其`userInractionEnabled:` `YES`默认`NO`为`UIImageView`.

```
UIScrollView *myScroll = [[UIScrollView alloc] initWithFrame: CGRectMake (0,100,200,30)];
NSMutableArray = *images = [NSMutableArray alloc] initWithObjects: img1,img2,img3,nil];

for (int i=0; i<3; i++)
{
    //In your question you didn't set `imageView` frame so correct it
    UIImageView *imageV = [[UIImageView alloc]initWithFrame:yourFrame];
    [imageV setImage:[images objectAtIndex:i]];
    [imageV setUserInteractionEnabled:YES];
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget: self action:@selector (changeImg:)];
    [imageV addGestureRecognizer: singleTap];
    [myScroll addSubview:imageV];
    [imageV release];
} 
```

成功添加所有内容后`imageView`，您可以像这样单击它们：-

```
-(void)changeImg:(id)sender
 {
     UIGestureRecognizer *recognizer = (UIGestureRecognizer*)sender;
     UIImageView *imageView = (UIImageView *)recognizer.view;
     [imageView setImage:[UIImage imageNamed:@"anyImage.png"]];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:18:00.843

您的应用程序将崩溃，因为您正在访问索引 3，但索引 3 处没有任何对象。

```
UIScrollView *myScroll = [[UIScrollView alloc] initWithFrame: CGRectMake (0,100,200,30)];
NSMutableArray = *images = [NSMutableArray alloc] initWithObjects: img1,img2,img3,nil];
[myScroll addSubview:[images objectAtIndex:0];
[myScroll addSubview:[images objectAtIndex:1];
[myScroll addSubview:[images objectAtIndex:2]; 
```

现在您可以使用 tagValue 访问图像视图

```
-(void)changeImg :(UIGestureRecognizer*)recog
{
    UIScrollView *scroll = (UIScrollView*)recog.view;
    CGPoint point = scroll.contentOffset;
    int imagetag = (point.y/scroll.frame.size.height);

    UIImageView *image=(UIImageView*)[[scroll subviews] objectAtIndex:imagetag];
    NSLog(@"Image tag = %d",image.tag);

    image.image=[UIImage imageNamed:@"Icon-72.png"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:18:22.080

一个简单的实现将是，如果您使用自定义按钮并在其 IBAction 上更改其图像。您仍然可以将 Gesture 添加到您的 UIImageView 和

```
if(recognizer.state == UIGestureRecognizerStateBegan) 
```

您可以在运行时更改图像。我希望这有帮助。干杯！！

# django - Django是父类中“识别”的方法覆盖吗？

> ID：12543585
> 
> 赞同：1
> 
> 时间：2012-09-22T12:07:16.893
> 
> 标签：django, methods, save, overriding, slug

我对 python 和 django 比较陌生，我只是想了解方法覆盖以及它如何影响方法在父类中的工作方式。

所以我有这个父类：

```
class Parent():

    def save(self):
        if not self.slug:
            self.slug = self.get_slug()

    def get_slug(self):
        return slugify(self) 
```

以及我将在其中覆盖 get_slug 方法的子类，因为我想将 slugify 与它自己的 unicode 方法一起使用（我是否正确，通过调用 slugify(self) 他会自动使用 unicode 方法？）。

```
class Child(Parent):

    def __unicode__(self):
        return u'%s %s' %(self.title, self.season)

    def get_slug(self):
        return slugify(self) 
```

我不确定的是 save 方法如何用于子实例。在我创建了一个新的子实例（例如在管理区域中）之后，继承的 save 方法是否只是调用父类中的 get_slug 方法？

我认为 save 会调用我覆盖的 get_slug 方法而不是原来的方法。也许这很明显，但我似乎不明白。

因此，当我在模板中使用 child.slug 时，我得到了父 get_slug 方法的结果。只有当我使用 child.get_slug 时，我才能得到正确的结果。

有人可以解释一下继承方法如何与子类中的覆盖方法交互。提前致谢

# iphone - iAd 没有出现在我的应用程序中

> ID：12543588
> 
> 赞同：0
> 
> 时间：2012-09-22T12:07:33.707
> 
> 标签：iphone, xcode, ipad, iad, banner

我有一个适用于 iPhone 的应用程序和一个适用于 iPad 的应用程序。他们俩都使用 iAd，并且以前也可以使用。但是现在 iAd 永远不会加载到它们中！我刚刚发布了 iPhone 版，所以我很着急！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:52:29.903

一点点资料。当代码未更改时，可能是 iTunes 中的错误与合同连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:00:55.263

苹果只有这么多广告要发布。当 iAd 横幅视图出现在屏幕上时，它会请求一个广告，但并不总是可以填充它。
如果您查看 iAd 网络数据，请检查 iTunes Connect，您将获得平均填充率以及其他信息。

# ant - 将 JDK 6 样式的类路径与 javac ANT 编译任务一起使用

> ID：12543591
> 
> 赞同：0
> 
> 时间：2012-09-22T12:07:51.143
> 
> 标签：ant, classpath, javac, jdk1.6

有没有人有使用 JDK 6 样式的示例 - 只定义目录而不是目录中每个 jar 的列表 - 带有 ANT javac 编译任务的类路径？

我们是这样尝试的

compile.classpath=c:....\WEB-INF\lib*;...websphere...\a.jar;...websphere...\b.jar; 等等，并在 javac 任务中使用了这个类路径，但是来自 WEB-INF\lib 的库没有被识别。

所以，我想知道是否可以将这种类型的构造与 ANT 一起使用。ANT 版本是 1.8.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:47:43.743

通常我们使用[类似结构的路径](http://ant.apache.org/manual/using.html#path)。

```
<path id="project.classpath">
   <fileset dir="${libdirectory}">
       <include name="*.jar"/>
   </fileset>
</path> 
```

project.classpath 用于 javac 任务。[在ant 示例](http://ant.apache.org/manual/using.html)中查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:19:45.103

我还不知道，为什么这有效，为什么没有这些属性它就不能工作，但我能够通过使用 fork="yes" 和 executable="path-to-my- 使通配符部分工作javac 任务中的可执行”属性。

# mysql - 如何从 MySQL 中删除名为“index”的索引？

> ID：12543592
> 
> 赞同：1
> 
> 时间：2012-09-22T12:08:02.447
> 
> 标签：mysql, key, innodb, myisam

这个问题之前有人问过，但我认为这是一个特例？

我正在尝试将表从 myisam 转换为 innodb，我看到的大多数解决方案都建议首先删除全文键（否则它不起作用）

所以我愿意`show create table blah;`

我看到全文密钥

```
yadda yadda yadda
FULLTEXT KEY `index` (`index`)
) ENGINE=MyISAM yadda yadda yadda 
```

但是当我尝试做

```
alter table blah drop index index; 
```

我明白了

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“索引”附近使用正确的语法

语法对我来说看起来不错。怎么办？该表是由 WordPress 插件创建的，不幸的是，Google 中没有解释如何将此特定表转换为 innodb。我想我可以将其保留为 myisam，但我很固执。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:12:15.733

与创建时间一样，使用反引号引用它。

```
alter table blah drop index `index`; 
```

# javascript - 流程图多轴配置不正确

> ID：12543594
> 
> 赞同：1
> 
> 时间：2012-09-22T12:08:23.957
> 
> 标签：javascript, flot

我期待 flot v.0.7 出现非常奇怪的问题。我有多个轴，配置如下：

```
var plotData = [
    { data: data1 },
    { data: data2, yaxis: 2 }];

var options = {
    selection: { mode: "x" },
    xaxis: { mode: "time" },
    yaxis: [
      { min: 0 },
      {
        min: 0, 
position: "right",
zoomRange: false,
alignTicksWithAxis: 1,
tickFormatter: formatter,
      }
    ],
    grid: { markings: weekendAreas },
    zoom: { interactive: true },
    grid: {
        clickable: true,
        hoverable: true,
        borderWidth: 1,
    },
    legend: { show: false },
};

var plot = $jq.plot(container, plotData, options); 
```

但我得到的是两个 Y 系列都位于右侧（不仅是第二个 Y 系列）。我的第二个系列刻度没有格式化程序。如果缩放，Y 值可以小于零。如果我不对 yaxis 使用数组类型并将其定义为只有一个系列，那么一切正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T13:56:30.020

而不是`yaxis: [ ... ]`，使用`yaxes: [ ... ]`.

有关更多信息，请参阅文档中标题为[Multiple Axes](https://github.com/flot/flot/blob/master/API.md#multiple-axes)的部分。

# vb.net - SQLITE Pragma 在 vb.net 中返回一个值

> ID：12543595
> 
> 赞同：1
> 
> 时间：2012-09-22T12:08:23.987
> 
> 标签：vb.net, sqlite

阅读 SQLite 文档，我注意到有可以返回或设置值的 Pragma。我想使用 Pragma table_info(tablename) 和 Pragma page_size。如何在 Vb.net 程序中执行此操作以分别从两个 pragma 获取列列表和页面大小？

编辑：

这是获取信息的代码，只是认为它可能对某人有用

```
 Dim temp = New DataTable
    temp.Clear()

    Using oMainQueryR As New SQLite.SQLiteCommand
        oMainQueryR.CommandText = ("PRAGMA table_info(yourtablename)")
        Using connection As New SQLite.SQLiteConnection(conectionString)
            Using oDataSQL As New SQLite.SQLiteDataAdapter
                oMainQueryR.Connection = connection
                oDataSQL.SelectCommand = oMainQueryR
                connection.Open()
                oDataSQL.Fill(temp)
                connection.Close()
            End Using
        End Using
    End Using 
```

生成的数据表具有行中的列和信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:13:29.720

只需像使用`SELECT x FROM y`语句一样使用该编译指示。

# android - Android MapView + 底部按钮

> ID：12543597
> 
> 赞同：0
> 
> 时间：2012-09-22T12:08:34.237
> 
> 标签：android, layout

![地图界面](../Images/c0e7b3bb6557eeb8e9d18f202583713b.png)

我试图获得与上述类似的结果，但我很难让布局反映它。到目前为止，我已经设法让按钮位于顶部，但只要我想将它们移动到底部，我要么只能让它们被覆盖，要么完全消失。

我敢肯定这是一个非常简单的布局，但我一生都无法得到它。

主视图是一个 MapView，我希望 mapview 给按钮一些空间，基本上只是在它的后面有应用程序背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:23:23.280

尝试将相对布局放置为 map view 的父级。请在下面找到 XML 片段：

```
<!--  Use mapView is relative Layout if you want to do that.. i.e the view should overlay map. --!>

    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
 <LinearLayout
        android:id="@+id/TopLinearLayout"
        android:layout_width="fill_parent"
        android:layout_height="200dip"
        android:layout_alignParenttop="true"
        gravity="center" />

    <com.google.android.maps.MapView
        android:id="@+id/mapviewHome"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:apiKey="@string/ApiKey_apk"
        android:clickable="true" />
</LinearLayout>
    <LinearLayout
        android:id="@+id/BottomLinearLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        gravity="center" 
layout_above="@+id/TopLinearLayout" />

    <Button android:text="button" />
<!-- your buttton and other components are here --!>

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:53:12.000

尝试使用包含 MapView 和带有按钮的 LinearLayout 的 LinearLayout。然后将按钮-LinearLayout 的权重设置为“1”，将 MapView 的权重设置为“0”。不确定这是否可行，但值得一试......

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
>
        <com.google.android.maps.MapView 
            android:id="@+id/mapviewHome" 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:apiKey="@string/ApiKey_apk"
            android:clickable="true" 
            android:layout_weight="0"
        /> 
        <LinearLayout 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            gravity="center" 
            android:id="@+id/BottomLinearLayout" 
            android:layout_alignParentBottom="true"
            android:layout_weight="1">
            <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
            <!-- your buttton and other components are here -->

        </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:40:34.143

我认为你必须使用RelativeLayout 而不是Linearlayout .. 不确定但会帮助你。

```
 >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:id="@+id/header"
    android:background="@drawable/header"
     >

    <ImageView
        android:id="@+id/back"
        android:layout_width="77dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginBottom="8dp"
        android:layout_marginTop="8dp"
        android:src="@drawable/back_txt" />

    <ImageView
        android:id="@+id/gps"
        android:layout_width="80dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginBottom="10dp"
        android:layout_marginTop="10dp"
        android:src="@drawable/gps_btn_03" />
</RelativeLayout>

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/header"
    android:apiKey="0SQlVa3Jk1kXyql-9Bsl0kIIgN7FKV3JnG27YTA"
    android:clickable="true" />

<TextView
    android:id="@+id/sandho"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="60dp"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceSmall" />

<ImageView
    android:id="@+id/selectedlocation"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/sandho"
    android:layout_centerHorizontal="true"
    android:src="@drawable/selectedlocation" />

<ImageView
    android:id="@+id/alllocation"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/img"
    android:layout_centerHorizontal="true"
    android:src="@drawable/alllocation"
    android:visibility="gone"
     />

<LinearLayout
    android:id="@+id/layout_all"
    android:layout_width="125dp"
    android:layout_height="50dp"
    android:layout_alignBottom="@+id/img"
    android:layout_toRightOf="@+id/img" >
</LinearLayout>

<LinearLayout
    android:id="@+id/layout_selected"
  android:layout_width="125dp"
    android:layout_height="50dp"
    android:layout_alignBottom="@+id/img"
    android:layout_toLeftOf="@+id/img" >
</LinearLayout>

<RelativeLayout
    android:id="@+id/mapnlist"
    android:layout_width="fill_parent"
    android:layout_height="47dp"
    android:layout_below="@+id/header"
    android:layout_centerHorizontal="true"
    android:background="#CCCCCCCC"
     >

    <ImageView
        android:id="@+id/mapandlist"
        android:layout_width="wrap_content"
        android:layout_height="35dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/mapnlist" />

    <TextView
        android:id="@+id/smtext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <LinearLayout
        android:id="@+id/layout_left"
        android:layout_width="60dp"
        android:layout_height="35dp"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/smtext" >
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout_right"
        android:layout_width="60dp"
        android:layout_height="35dp"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/smtext" >
    </LinearLayout>

</RelativeLayout> 
```

# wpf - 如何访问 WPF App 和 ClassLibrary 的成员，反之亦然

> ID：12543600
> 
> 赞同：0
> 
> 时间：2012-09-22T12:08:52.393
> 
> 标签：wpf, class, mvvm

我从过去两周开始进入这个 wpf。我目前正在开发一个基于 MVVM 模式的 wpf 应用程序。我在 Visual C# 2010 中的解决方案中有 2 个项目。一个是 WPF 应用程序（可以说是 MSPBoardControl），另一个是类库（可以说是 ConnectViewComponent）。因此，MSPBardControl 和 ConnectViewComponent 都分别具有视图、视图模型和模型类。

我已经在我的 MSPBoardControl 中添加了 ConnectViewComponent 的引用，并且我能够在我的 MSBoardControl 的 View、Viewmodel 和模型类中访问 ConnectViewComponent 的成员变量。我关心的是如何从我的 ConnectViewComponent 访问 MSPBardControl 的成员变量。

**MSBoardControl 的 ViewModel：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using ConnectViewComponent.Model;
using System.Windows.Input;
using ConnectViewComponent.Commands;
[[[using MSPBoardControl.ViewModel;]]]

namespace ConnectViewComponent.ViewModel
{
public class ConnectViewModel : INotifyPropertyChanged
{
    public List<ConnectModel> m_BoardNames;
    [[[BoardControlViewModel mBoardVM;]]]

    public ConnectViewModel()
    {
        m_BoardNames = new List<ConnectModel>()
        {                
            new ConnectModel() {Name = "Bavaria", Connection_Status = "Disconnected"},
            new ConnectModel() {Name = "Redhook", Connection_Status = "Disconnected"},                
        };
    }

    public List<ConnectModel> BoardNames
    {
        //get set
    }

    private ConnectModel m_SelectedBoardItem;
    public ConnectModel SelectedBoard
    {
        //get set
    }

    private ICommand mUpdater;
    public ICommand ConnectCommand
    {
        get
        {
            if (mUpdater == null)
                mUpdater = new DelegateCommand(new Action(SaveExecuted), new Func<bool>(SaveCanExecute));

            return mUpdater;
        }
        set
        {
            mUpdater = value;
        }
    }

    public bool SaveCanExecute()
    {
        return true;
    }

    public void SaveExecuted()
    {
        if (SelectedBoard.Connection_Status == "Disconnected" && SelectedBoard.Name == "Bavaria")
        {
            SelectedBoard.Connection_Status = "Connected";                
        }

        else if (SelectedBoard.Connection_Status == "Disconnected" && SelectedBoard.Name == "Redhook")
        {
            SelectedBoard.Connection_Status = "Connected";               
        }
    }
}
} 
```

我的代码中的 [[[ -- ]]] 表示我也无法访问 BoardControlViewModel 的成员以及 USING Namespace.ViewModel 。

我无法在我的 ConnectComponent 项目中添加 BoardControl 的引用，因为它会导致循环依赖。我怎样才能访问它？请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:40:09.993

在你的项目中存在循环依赖可能是一种“代码味道”。有多种方法可以去除这种“气味”。为简单起见，假设您有具有循环依赖关系的项目 A 和项目 B。

1.  分解出两个项目使用的公共类型并将它们移动到新项目 C 中。让 A 和 B 引用 C。这应该删除从 A 到 B 的依赖关系或相反的依赖关系，甚至两个依赖关系。

2.  如果 A 和 B 具有需要交互的类型，则需要将这种交互解耦为一组通用的抽象（例如接口或抽象基类）。然后，您应该将这些类型在没有任何实现的情况下移动到 A 和 B 都引用的项目 C 中。这将允许 A 和 B 中的类型进行交互，但仅使用 C 中的定义。一个示例可能是 A 是主应用程序。它调用在`IService`C 中定义但在 B 中实现的接口，并`IServiceCallback`通过 注册在 C 中定义的回调`IService`。`IServiceCallback`然后 B 可以在不知道实现在 A 中的情况下使用回调到A。

3.  如果 A 和 B 中的类型强耦合，则应将 A 和 B 合并到一个项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:23:40.600

您可以添加包含这些通用类的某种类型的“通用”库（项目）。所以 BoardControl 和 ConnectComponent 都可以引用它。

您也可以检查[类似的问题](https://stackoverflow.com/questions/3304278/describe-the-net-assembly-circular-dependency-problem-in-laymans-terms)。

# python - 创建链接或更改 python-mysql 套接字位置

> ID：12543606
> 
> 赞同：2
> 
> 时间：2012-09-22T12:09:29.337
> 
> 标签：python, sqlalchemy, mysql-python, unix-socket

在 Python 中测试 SQLalchemy 时，我遇到了与我之前遇到的类似的问题。然而，这一次，我无法轻松地将 mysql-socket 路径添加到 MySQLdb 连接方法中。

在我的 Mac 上，mySQL 套接字位置位于：/opt/local/var/run/mysql5/mysqld.sock

除非明确提到上面的路径，否则 mysql-python 库会查找 /tmp/mysqld.sock

这导致 sqlachemy 抛出：

```
sqlalchemy.exc.OperationalError: (OperationalError) (2002, "Can't connect to local MySQL    server through socket '/tmp/mysql.sock' (2)") None None 
```

在我通过将 unix_socket 参数添加到连接方法来解决这个问题之前

```
conn = MySQLdb.connect (unix_socket = '/opt/local/var/run/mysql5/mysqld.sock',host = "localhost", user = "username", passwd= "password", db="database") 
```

我想知道的是如何对 MySQLdb 库设置或存储这些设置的文件（如果在任何地方）进行永久更改，而不总是必须添加额外的参数。

# php - 在没有 SSL 的情况下防止会话 cookie 劫持

> ID：12543607
> 
> 赞同：1
> 
> 时间：2012-09-22T12:09:51.933
> 
> 标签：php, session, session-cookies, remember-me, session-hijacking

为了防止会话劫持，我尝试根据以下变量为每个用户分配一个特定的 cookie 名称：**用户代理**和**IP 地址**。

我使用以下函数来生成包含**会话 ID的会话****cookie 名称**。

 **```
static function getSessionName(){
    $id= @md5(base64_encode(self::$secretToken.$_SERVER["HTTP_USER_AGENT"].$_SERVER["REMOTE_ADDR"]));
    while(is_numeric($id{0})){
        $id = substr($id, 1).$id{0};
    }
    return $id;
} 
```

这意味着**每个访问我的网站的用户都会有一个不同的会话 cookie 名称**。它将阻止劫持者使用其他人的 cookie，**除非**他/她将他/她的用户代理更改为受害者的用户代理；并尝试以某种方式使用受害者的 IP 地址出现在线，例如使用用户的互联网调制解调器、路由器、NAT 等。

让我用一个例子来解释它。因此，如果两个用户使用相同的浏览器并从相同的 IP 地址连接，他们将获得相同的 cookie 名称（假设**为 f5e30acc605e938b097dee73c0272470**）。

现在，该脚本将在这两个客户端上的名为**f5e30acc605e938b097dee73c0272470的 cookie 中查找****会话 ID 。**在这种情况下，其中一个客户端可以劫持其他客户端的 cookie。相同的 IP、相同的用户代理和相同的 cookie 名称！

 **这种方法很好，但不是很安全。更改用户代理并不难，如果受害者和劫持者从 Coffenets、公共热点等公共网络连接，他们可能拥有相同的 IP 地址。

~~拒绝攻击者这样做很重要，特别是如果我们使用**“还记得我吗？”** 生成持久会话 cookie 的选项。~~

有人对这个问题有什么建议吗？

正如我所研究的，其中一种解决方案是使用 SSL 和安全 cookie。但是，我正在寻找不使用 SSL 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:46:37.090

如果您将您的 senario 基于以下假设

1) 攻击者可以拥有相同的 IP 地址 2) 攻击者可以假装拥有相同的用户代理，因为他们可以访问通过网络传输的任何信息

那么您就无法验证此 cookie 的身份。这是因为您在假设中假设所有这些信息都是可用的。

您有两种解决方案：a) 使用 SSL b) 相信您的用户不会与攻击者在同一个咖啡店，IP 地址是有效的，并且您的网站还不够重要，不值得遭受大规模攻击. 他们还能做什么 - 发布攻击性帖子和垃圾邮件？他们无论如何都可以使用自己的帐户来做到这一点。

根据我的经验和阅读的内容，我同意“过早的优化是 [编程的最大弊端之一]”的说法。将您的时间集中在构建一个对人们有用且有效的网站上，然后，如果出现问题，请考虑获取 SSL 证书。您只是没有钱购买证书，而且您没有钱，因为您的网站还没有成功（所以先这样做）。

“过早的优化”和偏执的安全措施对程序员来说是一种诱惑，因为我们喜欢认为自己在 [尚未] 从事大型、非常重要的项目时工作。****

# javascript - 溢出隐藏在 IE 中不起作用

> ID：12543622
> 
> 赞同：2
> 
> 时间：2012-09-22T12:12:00.153
> 
> 标签：javascript, html, css, internet-explorer

我在 TD 中显示一些文本。我已经为 td 提供了隐藏的溢出属性，并且此代码在 Chrome、Safari、Mozilla 中运行良好，但在 IE 中却不行。我用过 -ms- 但它也不起作用。

这是我用来创建表格行的代码

```
strRowTd += "<tr><td height=\"20\" style=\"-ms-display: block;" +
            "display: block;overflow:hidden;-ms-overflow:hidden;\" " +
            "class=\"body_text_white_mid\">" +
            "<strong>" + data[i + 1][4] + "</strong>";
strRowTd += "</td></tr>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:44:02.577

您有问题，因为“溢出”仅适用于块级元素。由于表格元素不是块元素，因此您应该使用`<div>`包装器来生效。结果 Html 标记应如下所示：

```
<tr>
  <td class="body_text_white_mid">
    <div style="height:20px; overflow:hidden;">
      your data[i][j]
    </div>
  </td>
</tr> 
```

如果您使用`class`而不是`style`. 也使用`String.Format(markupRow, data[i][j])`而不是字符串连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:45:48.010

HTML 表格支持“table-layout:fixed”css 样式，可防止用户代理根据其内容调整列宽。您可能想使用它。

为了避免 IE9 出现问题，您需要使用

有关此样式的更多信息，请查看此处 [http://msdn.microsoft.com/en-us/library/ie/ms531161(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms531161(v=vs.85).aspx)

# entity-framework - EF 4.1 Mapper 类的使用

> ID：12543626
> 
> 赞同：0
> 
> 时间：2012-09-22T12:12:39.080
> 
> 标签：entity-framework, orm, ef-code-first

我正在使用[EF Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)从已经存在的数据库中生成 POCO 类。它生成一个类和一个映射器类，例如： class Person class PersonMapper 由于我是先使用反向代码，我真的需要映射器类吗？我需要数据库表名和列名，它们是在 Mapper 类中生成的。我应该将它们作为属性移动到 POCO 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:47:13.340

我正在寻找属性而不是流畅的 API 的原因是我已经有很多代码和项目使用一个类作为模型来映射对象并进行验证。

如果我想使用流畅的 API，我必须更改大量代码以使用一个类并使用另一个类进行验证。

希望我找到了[Rowan Miller](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)的解决方案。

我可以先使用指南将 [Table] 和 [Column] 标签移动到模型，然后进行更多修改以移动 [Required]、[RowVersion]、[MinLength] 和 [MaxLength] 属性并摆脱 Map 类。

如果有人只想使用属性而不是流畅的 API，以下是我所做的修改： [下载](http://abugslife.ir/Media/Default/files/ReverseEngineerCodeFirst.zip)

我省略了一些属性和映射，因为我不需要它们。也许需要一些格式。它没有完全测试！我会做更多的工作并稍后替换文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:02:24.027

[EF Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)使用 fluent api 将您的类/属性映射到表/列。[如果您的所有类/属性都遵守 EF 约定（您可以通过遵循 Ladislav 的答案在这里](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/21c58114-db23-4be5-b810-b078e39d3a2e)找到更多关于约定的信息，那么您既不需要属性也不需要映射器类。但通常，您有一些不遵循约定的映射。

就个人而言，我认为使用 fluent api 是一种更清洁的方式，因为它不会影响你的 poco 类（不需要属性），一旦你掌握了它，用 fluent api 编写比属性更容易（至少对我来说。特别是在许多对多或一对多的关系）。

最棒的是 EF Power Tools 为您完成这一切。那么为什么要麻烦将其更改为属性或删除它们呢？

# php - php中的正则表达式匹配单词

> ID：12543627
> 
> 赞同：2
> 
> 时间：2012-09-22T12:13:01.753
> 
> 标签：php, regex, preg-match

我正在尝试从此数据文件（[链接](http://www.lfv.se/AISInf2.asp?TextFile=idunesaavfr.txt&SubTitle=&T=Sverige%20VFR&Frequency=250)）中获取来自 ESNU/UMEA 的机场数据

我正在尝试匹配单词 ESNU/UMEA 之后和列出的下一个机场之前的所有内容（尝试匹配“四个字母”“斜线”“超过三个字母”以匹配下一个机场标识符。

我做了很多尝试，但仍然没有成功，非常感谢任何帮助。

到目前为止我的代码：

```
$url = "http://www.lfv.se/AISInf2.asp?TextFile=idunesaavfr.txt&SubTitle=&T=Sverige%20VFR&Frequency=250";
$raw = file_get_contents($url);

preg_match('/ESNU\/UMEA([\s\S]*?)([A-Z]{4}/[A-Z]{3,})/',$raw,$data,PREG_OFFSET_CAPTURE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:25:31.457

您需要转义斜杠，因为您的模式用斜杠括起来：

```
preg_match('/ESNU\\/UMEA(.*?)([A-Z]{4}\\/[A-Z]{3,})/',$raw,$data,PREG_OFFSET_CAPTURE); 
```

我还将单反斜杠更改为双反斜杠，尽管不是严格必要的，因为 PHP 将未知字符之前的反斜杠解释为文字反斜杠。
此外，我将其更改`[\s\S]`为`.`等效的。

您还可以将封闭字符更改为例如`#`：

```
preg_match('#ESNU/UMEA(.*?)([A-Z]{4}/[A-Z]{3,})#',$raw,$data,PREG_OFFSET_CAPTURE); 
```

# bash - Bash 脚本在 while 循环中停止执行 ffmpeg - 为什么？

> ID：12543628
> 
> 赞同：4
> 
> 时间：2012-09-22T12:13:09.790
> 
> 标签：bash, loops, while-loop, ffmpeg

我有这个用于将`.mp4`视频转换为`.mp3`音频的 bash 脚本。它运行，但只循环一次，尽管`/home/myname/mp4dir`.

该脚本将`.mp4`它找到的第一个文件转换为`.mp3`，除非已经有一个`.mp3`文件。这应该在循环中完成，但在第一次调用 ffmpeg 后脚本停止。

为什么？

```
#!/bin/bash
find /home/myname/mp4dir -name "*.mp4" | while read f
do
        fOut=`echo $f | sed s/mp4/mp3/`
        echo "convert $f => $fOut"
        if ! test -f $fOut
        then
                ffmpeg -i $f -vn -f mp3 $fOut
        fi
done 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-06T21:15:24.957

答案是添加`-nostdin`到 ffmpeg（不会回答这样的老问题，但仍然在相关的 Google 搜索中名列前茅）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T10:47:22.710

在终端试试这个

创建 bash nohup.sh 并粘贴到这个

```
#!/bin/sh
while true
do
 /var/www/bash/Someother-bash-script-goes-here.sh
 sleep 60
done 
```

在 nohup.sh 所在的终端类型中

```
nohup sh nohup.sh >/dev/null 2>&1 & 
```

nohup，每 60 秒执行一次，你可以像这样 grep 服务检查

```
 #!/bin/sh
SERVICE='ffmpeg'

if ps ax | grep -v grep | grep $SERVICE > /dev/null
then
    echo "$SERVICE service running, will not bother ffmpeg yet"
else
    echo "$SERVICE is not running"
    echo "$SERVICE is not running!" | /var/www/bash/start_service.sh
fi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T14:55:30.610

从我们得到的评论中，实际上有你正在循环的输入文件（不管是什么类型的）并且`ffmpeg`至少开始一次。然后，你被卡住了。

添加

```
&> ffmpeg.outerr < /dev/null 
```

到您的命令并在您的“循环”（即 ffmpeg）执行时`ffmpeg`监视文件。`ffmpeg.outerr`它会告诉你问题是什么。您可以自己解决这个问题，或者使用 tag回到 stackoverflow 处理这个*ffmpeg 特有的问题*`ffmpeg`。

# c#-4.0 - 查找此组件的术语以及如何在 C# .net 4.0 中实现它

> ID：12543630
> 
> 赞同：-2
> 
> 时间：2012-09-22T12:13:14.020
> 
> 标签：c#-4.0, web-applications

我不确定这个组件叫什么。虽然我已经以各种形式和巫师见过它数千次（见附图）

我需要将它实现到我在 C# Web 应用程序中构建的 Web 表单向导中。这个组件在 ASP.NET 中有控件吗？如果没有，是否有人知道可以嵌入到我的向导中的第三方工具![在此处输入图像描述](../Images/7966f723ac14e3dd56fc16715ae47950.png)？谢谢

只是为了更清楚。我指的是具有多选列表的部分，可以选择并移动到右列并使用按钮取消选择回到列表中。（不是向导）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:31:21.380

取两个列表框，四个按钮，当你点击按钮>时，将listbox1的选中项添加到listbox2。

单击按钮>>时，将listbox1的所有项目添加到listbox2

当您单击按钮 < 时，将 listbox2 的选定项添加到 listbox1。
当点击按钮<<，然后将listbox2的所有项目添加到listbox1

# java - 编辑布局会导致元素混合

> ID：12543640
> 
> 赞同：1
> 
> 时间：2012-09-22T12:14:28.227
> 
> 标签：java, android, eclipse

当使用 Eclipse 的布局编辑器设计 Android 布局时，编辑一个元素的 ID 或移动它会导致所有其他元素移动。此外，将整个元素包装到另一个容器中也会导致此问题。

![在此处输入图像描述](../Images/57e90bda5170cfa40bd508b9f6f991ba.png)

这就是发生的事情。在此之后，将元素移动到正确的位置是绝对不可能的。

如何解决问题？

编辑前的 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/securityQuestion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="31dp"
        android:ems="10"
        android:hint="@string/turvak" >

        <requestFocus />

    </EditText>

    <EditText
        android:id="@+id/securityQuestionAnswer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/securityQuestion"
        android:layout_below="@+id/securityQuestion"
        android:layout_marginTop="24dp"
        android:ems="10"
        android:hint="@string/vastaus"
        android:inputType="textPassword" />

    <EditText
        android:id="@+id/password1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/securityQuestion"
        android:layout_below="@+id/securityQuestionAnswer"
        android:layout_marginTop="57dp"
        android:ems="10"
        android:hint="@string/salis"
        android:inputType="textPassword" />

    <EditText
        android:id="@+id/password2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/password1"
        android:layout_alignRight="@+id/password1"
        android:layout_centerVertical="true"
        android:ems="10"
        android:hint="@string/salasanauudelleen"
        android:inputType="textPassword" >
    </EditText>

    <Button
        android:id="@+id/saveButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/password2"
        android:layout_below="@+id/password2"
        android:layout_marginTop="30dp"
        android:text="@string/tallenna" />

</RelativeLayout> 
```

添加容器后，一个ScrollView：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/ScrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <EditText
            android:id="@+id/securityQuestion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="31dp"
            android:ems="10"
            android:hint="@string/turvak" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/securityQuestionAnswer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/securityQuestion"
            android:layout_below="@+id/securityQuestion"
            android:layout_marginTop="24dp"
            android:ems="10"
            android:hint="@string/vastaus"
            android:inputType="textPassword" />

        <EditText
            android:id="@+id/password1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/securityQuestion"
            android:layout_below="@+id/securityQuestionAnswer"
            android:layout_marginTop="57dp"
            android:ems="10"
            android:hint="@string/salis"
            android:inputType="textPassword" />

        <EditText
            android:id="@+id/password2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/password1"
            android:layout_alignRight="@+id/password1"
            android:layout_centerVertical="true"
            android:ems="10"
            android:hint="@string/salasanauudelleen"
            android:inputType="textPassword" >
        </EditText>

        <Button
            android:id="@+id/saveButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/password2"
            android:layout_below="@+id/password2"
            android:layout_marginTop="30dp"
            android:text="@string/tallenna" />
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:21:51.703

我猜你正在使用[RelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)。在此布局中，视图定义了它们相对于其他视图的位置。因此，更改一个视图的位置/ID，将重新定位依赖于该视图的所有视图，以及依赖于依赖于已编辑视图的视图的所有视图等。此外，当您将现有视图包装在另一个布局容器中时，其他视图不能再直接引用它们，从而导致相同的行为。

您可以通过以下方式解决（好吧，真的避免）：

1.  转到 XML 并查找/替换要更改的 ID。这将更改对它的所有引用，并确保视图不会尝试将自己定位到现在不存在的 ID
2.  使用类似 LinearLayout 的布局，其中视图位置不依赖于其他视图（但是，视图大小可能）。

除此之外，没有解决方法，因为这是预期的行为。

# c# - 在 XNA 4.0 3D 中绘制字符串和纹理？

> ID：12543641
> 
> 赞同：1
> 
> 时间：2012-09-22T12:14:29.117
> 
> 标签：c#, 3d, xna

我在 XNA 4.0 3D 中绘制字符串时遇到问题。我知道的问题是`spriteBatch.Begin()`. 但我不知道如何解决它。

```
protected override void Draw(GameTime gameTime)
{
  GraphicsDevice.Clear(Color.DeepSkyBlue);
  //Draw string 
  spriteBatch.Begin();
  spriteBatch.DrawString(fontArial, "Demotesting", new Vector2(100, 100), Color.Red);
  spriteBatch.End();
  //Draw Models Ship
  ship.Draw();

  base.Draw(gameTime);
} 
```

绘制字符串之前：http: [//nq1.upanh.com/b4.s32.d1/6c6ce19bded8d054341ce45e17426c51_49358001.before.png](http://nq1.upanh.com/b4.s32.d1/6c6ce19bded8d054341ce45e17426c51_49358001.before.png)

绘制字符串后：http: [//nq2.upanh.com/b6.s30.d2/9ff7c3c009215348b06a53c5a067d282_49358002.after.png](http://nq2.upanh.com/b6.s30.d2/9ff7c3c009215348b06a53c5a067d282_49358002.after.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:06:28.597

把它放在你绘制方法的顶部：

```
GraphicsDevice.BlendState = BlendState.AlphaBlend;
GraphicsDevice.DepthStencilState = DepthStencilState.Default; 
```

那应该可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:49:37.713

sprite 批处理带有一些渲染设置，您需要四处搜索以找出要设置的内容，我将从启用深度缓冲区开始。

# javascript - 验证 html DIV 中的 javascript 事件处理程序

> ID：12543646
> 
> 赞同：-1
> 
> 时间：2012-09-22T12:14:51.487
> 
> 标签：javascript, html, xhtml, w3c-validation, xhtml-transitional

我正在使用以下 javascript 事件处理程序来处理数据库中动态填充的不可用图像。

```
<head>
<script type="text/javascript">
  function blank_image_handler() {
    document.getElementById("imageplaceholder").style.display = "none";
  }
</script> 
```

```
<body>
<div id="imageplaceholder"> <img src="image/thumbnail/<?php echo $row_images['image_link']; ?>" alt="<?php echo $row_images['image_caption']; ?>" onerror='blank_image_handler();' /> </div>
</body> 
```

此事件处理程序正确地服务于目的，但在 w3c html 验证期间未对其进行验证。

我在验证期间收到的错误是`there is no attribute "onerror"`

顺便说一句，我的文档类型是 xhtml 过渡

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:30:49.783

您的 DTD 是[http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd) “如果您查看 DTD 中支持的事件列表：http: [//www.w3.org/TR/ xhtml1/dtds.html#dtdentry_xhtml1-transitional.dtd_events](http://www.w3.org/TR/xhtml1/dtds.html#dtdentry_xhtml1-transitional.dtd_events) 没有“onerror”事件，这就是 w3c 验证器报告错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:30:54.587

规范中没有`onerror`属性，即使浏览器可能实现它。

更好的版本是做这样的事情：

```
<script type="text/javascript">
   function blank_image_handler() 
   {
      document.getElementById("imageplaceholder").style.display = "none";
   }

   var image = document.getElementById("myImage");
   image.addEventListener('error', blank_image_handler, true);
</script> 
```

当然，您必须为图像提供 id `myImage`。你应该将他的脚本移动到 html 的末尾（无论如何推荐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:32:27.693

使用 'onerror' 您可以在脚本标签中执行以下操作：

```
 document.getElementById("imageplaceholder").addEventListener("error",blank_image_handler,false); 
```

# java - 在 Java 中删除元素时迭代 LinkedList

> ID：12543648
> 
> 赞同：0
> 
> 时间：2012-09-22T12:15:00.157
> 
> 标签：java, iterator, linked-list

我想做这样的事情：

```
int[][] A = ... // initialize matrix
List<Integer> rows = new LinkedList<Integer>();
for (int r = 0; r < 1000000; r++) rows.add(r);
Iterator<Integer> iter = rows.iterator();
for ( ; iter.hasNext(); ) {
    // some condition based on which I remove an element
    if (200 != A[iter.next().intValue()][0]) iter.remove();
}
if (rows.isEmpty()) {
    System.out.println("empty");
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:29:04.917

你很有可能得到一个`ArrayIndexOutOfBoundsException`. 这是因为该值已超出您在部分`A[iter.next().intValue()]`中设置的行范围。`initialize matrix`

假设您确实有行，您可以使用：

```
for (int r = 0; r < A[0].length; r++) {
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:22:21.423

好吧，它确实对我有用：

```
public class Test { 

    public static void main(String args[]) {
        int[][] A = new int[1000000][1];
        List<Integer> rows = new LinkedList<Integer>();
        for (int r = 0; r < 1000000; r++) rows.add(r);
        Iterator<Integer> iter = rows.iterator();
        for ( ; iter.hasNext(); ) {
            // some condition based on which I remove an element
            if (200 != A[iter.next().intValue()][0]) iter.remove();
        }
        if (rows.isEmpty()) {
            System.out.println("empty");
        }
    }
} 
```

和打印`empty`。

# php - 如何在 Doctrine ORM 中使用 createQueryBuilder 选择特定列？

> ID：12543650
> 
> 赞同：35
> 
> 时间：2012-09-22T12:15:11.223
> 
> 标签：php, symfony, orm, query-builder

我正在使用 Doctrine`createQueryBuilder()`在 Symfony2 中构建查询。但是，我不想占用该实体中的所有列。如何只选择 ID 和名称？

```
$query = $this->getEntityManager()->createQueryBuilder();
        $query
            ->select('d')
            ->from('AcmeBundle:Demo', 'd')
            ->leftjoin('d.otherEntity', 'o');

        $query->setMaxResults(10);
        $results = $query->getQuery()->getResult(); 
```

太感谢了，

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-22T15:56:24.597

尝试跟随，

```
$fields = array('d.id', 'd.name', 'o.id');
//$fields = 'partial d.{id, name}, partial o.{id}';  //if you want to get entity object

$query = $this->getEntityManager()->createQueryBuilder();
$query
    ->select($fields)
    ->from('AcmeBundle:Demo', 'd')
    ->leftjoin('d.otherEntity', 'o');

$query->setMaxResults(10);
$results = $query->getQuery()->getResult(); 
```

# javascript - 如何从复选框中获取值并使用 javascript 计算单击的项目

> ID：12543655
> 
> 赞同：3
> 
> 时间：2012-09-22T12:15:56.620
> 
> 标签：javascript, jquery

如果用户不选中任何框，我需要获取每个复选框的值并中断移动到另一个页面。

有错误但我无法识别

```
$('#Submit').click( function() {

        if($('#Search').val() == "")
        {alert('please enter your domain without Extuntison');return false;}

        results.style.display = 'none';
        $('#results').html('');
        loading.style.display = 'inline';

        $.post('../domain_checker/process.php?domain=' + escape($('#Search').val()),{
        }, function(response){

            results.style.display = 'block';
            $('#results').html(unescape(response)); 
            loading.style.display = 'none';

            //$('#results').animate({height : '450px' }, 2000);

            results.style.height = '400px';
        });

        return false;
    });

       $(function(){
          $('#order_Now').click(function(){
             var count = $("[type='checkbox']:checked").length;
             var val = [];
             for(i=0;i<count;i++){
                $(':checkbox:checked').each(function(i){
                   val[i] = $(this).val();
                });
             }      
          });
       }); 
```

以及加载ajax时的这个html页面

```
 <form action="ordedomain.php" name="formdomain" method="post" id="formdomain"  onclick="check_domain_checkBox()">

     <div id="results" style="width:450px;" align="left">

     </div> 
     </form> 
```

并且此代码由页面 php 中的 ajax 重新加载

```
 <form action="ordedomain.php" name="formdomain" method="post" id="formdomain"  onclick="check_domain_checkBox()">

<input type="checkbox" value="a" id="arrDomain" name="arrDomain">a
<input type="checkbox" value="b" id="arrDomain" name="arrDomain">b
<input type="checkbox" value="c" id="arrDomain" name="arrDomain">c

        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:20:12.153

试试这些（正确的代码）

```
 var count = $("input[type='checkbox']:checked").length; 
```

和

```
 $("input[type='checkbox']:checked").each(function(i){ 
```

阅读[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:26:09.750

这很简单：

```
var vals = [];
$(":checkbox").each(function() {
    if (this.checked)
       vals.push(this.value);
});
var count = vals.length; 
```

我不确定`for`-loop 在你的代码中做了什么，因为你已经有了`each()`.

现在，您可以轻松地在`submit`处理程序中获取计数，如果它等于`0`阻止提交。

此外，如果您需要复选框，则不应使用提交按钮；并且您不能`id`多次使用（它必须是唯一的），请改用该`name`属性：

```
<form action="ordedomain.php" name="formdomain" method="post" id="formdomain">
  <label><input type="checkbox" name="domain" value="1"> Order now 1</label>
  <label><input type="checkbox" name="domain" value="2"> Order now 2</label>
  <label><input type="checkbox" name="domain" value="3"> Order now 3</label>
  <label><input type="checkbox" name="domain" value="4"> Order now 5</label>
  <input type="text" id="search" name="search">
  <div id="results" style="display:none;"></div>
  <img id="loading" src="…" style="display:none;"></div>
</form> 
```

```
// onDOMready
var form = $("#formdomain"),
    search = form.find("#search"),
    checkboxes = form.find(":checkbox"),
    results = form.find("#results"),
    loading = form.find("#loading");
form.submit(function(evt) {
    var sval = search.val(),
        checked = checkboxes.filter(":checked"),
        dvals = [];
    if (!sval) {
        alert("Please enter domain (without extension)");
    } else if (!checked.length) {
        alert("Please tick at least one domain extension");
    } else {
        checked.each(function() {
            dvals.push(this.value);
        });
        $.post('../domain_checker/process.php', {
            domain: sval,
            extensions: dvals
        }, function(resonse) {
            loading.hide();
            results.html(response).show();
        });
        loading.show();
        results.hide();
    }
    evt.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:17:33.983

你可以过`.is(':checked')`

并得到检查

jQuery

```
$("#test").click(function() {
var total_c = 0;
    $.each($("input[type=checkbox]:checked"), function (k, v){
    var val =parseFloat($(this).val());
    tot = parseFloat(total_c+ val);   
    })
        alert(total_c);
}); 
```

html

```
<input type="buttoN" id="test" value="click me"/> 
```

**好学**

1.  [jquery复选框值](https://stackoverflow.com/questions/4813219/jquery-checkbox-value)
2.  [计算选中复选框的值](https://stackoverflow.com/questions/8502089/count-values-of-checked-checkbox)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T12:33:39.670

我在您提供的 html 中没有看到任何复选框，而且所有 4 个**提交按钮都具有相同的 ID 值**，这是错误的。这可能是它不起作用的原因。您还可以修改您的 js 代码以获得正确的复选框计数

```
var vals = [];
$(":checkbox:checked").each(function() {
       vals.push($(this).val());
}); 
```

# windows-phone-7 - 自定义 Cordova 插件

> ID：12543658
> 
> 赞同：0
> 
> 时间：2012-09-22T12:16:16.417
> 
> 标签：windows-phone-7, cordova, phonegap-plugins, cordova-2.0.0

我正在尝试为 Cordova 2.0.0 编写一个自定义插件。我要制作的自定义插件必须获得 WP 强调色，所以我可以在应用样式中使用它。

但我无法让它正常工作，也无法弄清楚我做错了什么。

**索引.js**

```
function onDeviceReady() {
    click();
}
function click() {
    navigator.notification.alert(callback, callback, "text", "button");
    window.getAccentColor();
} 
```

**获取主题.cs**

```
namespace Cordova.Extension.Commands
 {
   // Use the phonegap base class
   public class GetTheme : BaseCommand 
   {
     public void Get()
     {
         Color currentColorHex = (Color)Application.Current.Resources["PhoneAccentColor"];
         var result = new PluginResult(PluginResult.Status.OK, currentColorHex.ToString());
         DispatchCommandResult(result);
     }
   }
 } 
```

**获取主题.js**

```
window.getAccentColor = function () {
    cordova.exec(win, error, "GetTheme", "Get");
}

function win(result) {
    console.log(result);
    console.log("2");
};

function error() {
} 
```

我注意到有些事情有点奇怪。随着点击动作上的通知弹出，“2”被写入输出。但没有它不会输出任何东西。

在这两种情况下`result`，`win`函数仍然是空的并且不输出任何东西。

所有 *.js 文件都包含在`index.html`head 部分的文件中。通知中的回调方法已定义，但它什么也不做。

我也尝试过使用`WP7CordovaClassLib.Cordova.Commands`命名空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:24:32.797

这部分的 C# 部分看起来与我的插件相同，所以我认为这很好。

然而，javascript 部分是不同的。这是我完整的 plugin.js（非常简单的插件，它会在 Windows Phone 上启动 create-new-sms 任务，因为它不响应导航到 sms：scheme 就像 iOS 和 Android）

```
function SMSComposer() {
    this.resultCallback = null;
}

SMSComposer.prototype.showSMSComposer = function (toRecipients, body) {

    var args = {};
    var smsComposerOk = function () { console.log("SMSComposer Called OK"); };
    var smsComposerError = function (error) { console.log("SMSComposer error:" + error); };
    if (toRecipients) {
        args.toRecipients = toRecipients;
    }

    if (body) {
        args.body = body;
    }

    Cordova.exec(smsComposerOk, smsComposerError, "SendSMS", "send", args);
};

SMSComposer.install = function () {
    console.log("SMSComposer being installed");
    if (!window.plugins) {
        window.plugins = {};
    }
    window.plugins.SMSComposer = new SMSComposer();

    return window.plugins.SMSComposer;
}; 
```

在我的 onDeviceReady() 我有.....

```
 if (window.device && window.device.platform == "WinCE") {
        SMSComposer.install();
    } 
```

我正在使用 Cordova 2.0。确保您正在检查控制台的日志消息。如果 Cordova 在某处发生故障，则会记录一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:32:36.377

从[Cordova 文档页面](http://docs.phonegap.com/en/edge/guide_plugin-development_windows-phone_index.md.html)，

```
// all JS callable plugin methods MUST have this signature!
// public, returning void, 1 argument that is a string 
```

所以，在你的 GetTheme.cs 中，改变

```
 public void Get() 
```

进入

```
 public void Get(string options) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:41:20.410

找到这些问题的答案将帮助您（和我们）理解为什么您的插件没有被调用....

*   是否调用了 onDeviceReady？
*   点击是否被调用？
*   这对我来说看起来很陌生“navigator.notification.alert(callback,
    callback, "text", "button");" 那应该怎么做
*   VS.NET 的输出窗口是否显示
    阻止其余 js 执行的任何 JS 错误？

# tournament - 巡回赛任务

> ID：12543659
> 
> 赞同：1
> 
> 时间：2012-09-22T12:16:16.813
> 
> 标签：tournament

我正在制定具有整数规划的足球锦标赛的时间表。使用 LINGO 软件作为工具来处理它。最小化旅行距离是我的目标。有 12 支球队，我已经有了每支球队之间的距离矩阵。在我看来，会有二次分配。

这是目标函数：

![目标函数] >>> ( [http://i.imgur.com/ZucsJ.png](http://i.imgur.com/ZucsJ.png) )

Dij 是本垒球队 i 和 j 之间的物理距离。索引 k（客队本垒）作为代表 i 队在 j 队本垒进行客场比赛的位置。最后，t 作为比赛日的代表 (1..(n-1))，n = 参与的球队。

这是集合和数据（LINGO）：

![集合和数据] >>> ( [http://i.imgur.com/HONK0.png](http://i.imgur.com/HONK0.png) )

数据集有什么问题吗？因为我觉得二次方应该分配给（也许）团队，团队，比赛日和团队，团队，索引k？你能帮我写剧本吗？

我是 LINGO 软件的初学者，非常感谢任何帮助。谢谢。

# haskell - 不能在我的数据构造函数中包含字符串？

> ID：12543662
> 
> 赞同：1
> 
> 时间：2012-09-22T12:16:25.150
> 
> 标签：haskell

我想将 String 作为构造函数的一部分：

```
> data Car = Wheel | Trunk | String deriving (Show)

> test::Car->Car->Car
> test Wheel Wheel = "Wheel"
> test _ _ = "" 
```

它说：无法将 Car 与 [Char] 匹配

如果我将构造函数更改为

```
> data Car = Wheel | Trunk | [Char] deriving (Show) 
```

它说：数据/新类型声明中的构造函数错误：[Char]

那么如何创建一个构造函数也是字符串的数据类型呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T12:42:03.870

Haskell 不提供您在`Car`数据类型中使用的未命名联合。数据类型定义中的每个元素都必须有一个构造函数。例如，您可以定义以下数据类型。

```
data Car = Wheel | Trunk | Constr String 
```

在此定义中`Constr`表示构造函数，并且`String`是其参数的类型。例如，您可以`Car`使用 构造类型的值`Constr "Wheel"`。如果你`String`在上面的例子中省略了，它是一个`Constr`不带参数调用的构造函数。同样，在您的示例中，`String`是一个构造函数，即使存在同名的类型。

有了`Car`上面的定义，你可以定义`test`如下。

```
test :: Car -> Car -> Car
test Wheel Wheel = Constr "Wheel"
test _     _     = Constr "" 
```

`String`通过在定义的右侧添加构造函数，字符串被提升为`Car`数据类型。然而，正如评论中提到的，像这样的定义似乎有点奇怪，因为`test`总是产生一个 type 的值`String`。因此，另一个可能的定义如下。

```
test :: Car -> Car -> String
test Wheel Wheel = "Wheel"
test _     _     = "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:50:48.957

> 数据汽车 = 车轮 | 后备箱 | 字符串推导（显示）

在这里，您`Car`使用构造函数声明`Wheel`，`Trunk`并且**`String`**. 您`String`与标准 String 类型不同，因此它们不一样。因此，您不能简单地将其与诸如`""`. 如果你想给它一个字符串值，让构造函数接受一个字符串，例如：

```
data Car = Wheel | Trunk | CarName String deriving (Show) 
```

然后你可以像这样使用它：

```
test::Car->Car->Car
test Wheel Wheel = CarName "Wheel"
test _ _ = CarName "" 
```

此函数的结果必须与构造函数匹配，例如：

```
let x = test Wheel Wheel 
in case x of
     Wheel -> ... -- do something if it's wheel
     Trunk -> ... -- do something if it's trunk
     CarName x -> ... -- do something if it's carname, you can use the returned x 
```

# python - 将数据从模块发送到脚本

> ID：12543664
> 
> 赞同：0
> 
> 时间：2012-09-22T12:16:35.823
> 
> 标签：python, irc, python-module

我为那些不熟悉python的人创建了一个IRCbot模块。

但现在我遇到了一个问题。该模块有这个：

```
while 1:
    text=irc.recv(4096) 
```

但是有没有办法将“文本”发送回脚本，这样我就可以使用 module.find 或其他东西

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:45:16.497

如果我正确理解您的问题。. .

您的用户可能需要定义一个回调。您的模块将如下所示：

```
user_callback = None

def register_callback(callback):
    global user_callback
    user_callback = callback

def main():
    while 1:
        text=irc.recv(4096)
        user_callback(text) 
```

# c++ - 删除 HWND 对象

> ID：12543668
> 
> 赞同：5
> 
> 时间：2012-09-22T12:17:17.943
> 
> 标签：c++, c, winapi, hwnd

我有一种情况，当我收到一条消息时，我必须从 hWnd 中删除一个窗口。我虽然这必须是可能的，因为`CreateWindowEx`通过返回一个 HWND 创建一个对象，我必须能够删除一个。

注意： hWnd 位于其他进程上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T12:24:08.603

正确的方法是将[WM_CLOSE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617%28v=vs.85%29.aspx)消息发送到关联的窗口，或者简单地调用[DestroyWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632682%28v=vs.85%29.aspx)，它将[WM_DESTROY](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632620%28v=vs.85%29.aspx)消息发送到窗口。

线程**不能**使用 DestroyWindow 来销毁由不同线程创建的窗口。

**WM_CLOSE 和 WM_DESTROY 的区别：**

在发送 WM_CLOSE 之后，目标应用程序可以在销毁窗口之前提示用户确认，方法是处理 WM_CLOSE 消息并仅在用户确认选择时调用 DestroyWindow 函数。

换句话说，可以拒绝使用 WM_CLOSE 关闭窗口，但它被认为比 WM_DESTROY 更“安全”，因为应用程序可以保存请求确认并保存更改。但是，如果您需要强制关闭，请使用 WM_DESTROY。

HWND 结构指针由系统管理，甚至不要尝试删除它们！

如果使用 WM_CLOSE 消息，哪个进程拥有窗口并不重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T12:19:24.383

使用 向窗口发送`WM_CLOSE`消息`SendMessage`。

# ios - iOS ScrollView 中的多个视图

> ID：12543673
> 
> 赞同：0
> 
> 时间：2012-09-22T12:17:53.443
> 
> 标签：ios

我正在创建一个 iOS 应用程序，在它的一个屏幕中，我正在使用滚动视图，我在该屏幕中有两个视图可以滚动“黑色和红色”视图，

但是，不幸的是，当我将它们添加到滚动视图时，只显示其中的一个。

“红黑”视图的Frame均为320 W * 460 H；

这是我的代码“我只显示了黑色视图”：

```
-(void)viewDidLoad {
[super viewDidLoad];

scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
[scrollView setContentSize:CGSizeMake(300, 1200)];

[scrollView addSubview:redView];
[scrollView addSubview:blackView];
[self.view addSubview:scrollView];

[scrollView setBackgroundColor:[UIColor lightGrayColor]];
[scrollView setCanCancelContentTouches:NO];
scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
scrollView.clipsToBounds = YES; // default is NO, we want to restrict drawing within   
//our scrollview
scrollView.scrollEnabled = YES;
scrollView.pagingEnabled=YES;
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:56:00.750

您似乎没有在任何地方设置子视图的框架，这意味着它们的起源都是`(0, 0)`. 视图都在那里，但一个在另一个之上。设置框架以定位它们。

# xcode - 从 ViewController 切换到 TabBarController

> ID：12543682
> 
> 赞同：1
> 
> 时间：2012-09-22T12:18:57.207
> 
> 标签：xcode, uiviewcontroller, uitabbarcontroller

我是 xcode 的新手。我开始制作一个新的应用程序，用户可以从中购买东西。有一个 ViewController 是登录页面 - 当用户输入正确的用户名和密码并单击按钮时，应用程序会将用户链接到 TabBarController。

这是我用来链接 tabBarController 的代码：

```
- (void) LoginActionClicked {

//MainViewViewController is the TabBarController.
       MainViewViewController *main = [[MainViewViewController alloc] initWithNibName:nil     bundle:nil];
      [self.navigationController pushViewController:main animated:YES];

} 
```

当我运行该程序时，链接似乎工作正常，但 tabBarController 变成黑色并且标签栏不起作用。

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:24:41.050

来自文档：“*与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级*。”

如果您将标签栏控制器设置为根控制器，然后以模态方式在其上显示登录控制器，直到用户完成它，您可能会有更好的运气。

# c# - 休眠更新

> ID：12543686
> 
> 赞同：-1
> 
> 时间：2012-09-22T12:19:22.263
> 
> 标签：c#, nhibernate

我有这个功能

*   它总是返回 true 但问题是它修改了表 User 但它没有修改表 Useracl
*   如何更正此代码？

    ```
    try
    {
        NHibernate.ISession nhSession= User.OpenSession();
        using (var tx = nhSession.BeginTransaction())
        { 
            User u = new User() { 
                Account = acc, 
                Identification = identification, 
                ContactEmail = mail, 
                ContactName = nom, 
                ContactPhone = phone, 
                NotifyEmail = notify, 
                Password = mot 
            };

            nhSession.SaveOrUpdate(u);
            Useracl ua = new Useracl { Account = acc, UserID = identification, AccessLevel = 1, AclID = acc };
            nhSession.SaveOrUpdate(ua);
            tx.Commit();
            return true;
        }
    }
    catch
    {   
        return false;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:00:23.780

NHibernate 不知道是保存（即插入）还是更新您的 Useracl 实例，因为它是使用复合 id 映射的。您需要明确告诉它您是保存新实例还是更新现有实例。在您的情况下，您需要致电：

```
nhsession.Save(ua); 
```

代替

```
nhsession.SaveOrUpdate(ua); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T17:42:34.710

尝试这个

```
   nhSession.SaveOrUpdate(u);

       用户acl ua = 新用户acl() {
        帐户 = 帐户，
        用户 ID = 标识，
        访问级别 = 1，
        AclID = 加号
       };
   nhSession.SaveOrUpdate(ua);
   tx.Commit();

```

# java - 在 Millis 中格式化 Java 日期和时间

> ID：12543693
> 
> 赞同：-3
> 
> 时间：2012-09-22T12:19:58.173
> 
> 标签：java, datetime, jodatime, date-format

什么是格式化 Java 的一种干净、现代的方式，`Date`格式`Time`如下`System.currentTimeInMillis()`：

*   对于`Date`：`YYYY-MM-DD`
*   对于`Time`: `HH-MM-SS-mmmm`，其中`HH`是 2 位数的小时，`MM`是 2 位数的分钟，`SS`是 2 位数的秒，`mmm`是 3 位数的毫秒

希望获取当前时刻（现在）的格式化日期/时间。就像是：

```
long current = System.currentTimeInMillis();
String formattedDate = getFormattedDateFromCurrent(current);
String formattedTime = getFormattedTimeFromCurrent(current); 
```

不知道原始 Java 是否可以做到这一点，或者我是否必须切换到类似`joda-time`. 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:26:30.900

查看[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:23:05.167

您可以将 long 值传递给`Date`构造函数，它会为您提供日期。

然后，您可以格式化此日期以获得所需的格式。

转换为日期的代码 -

```
long tmp = 1018021774496l;  
Date d = new Date(tmp);  
System.out.println(d); 
```

看看[这里](http://www.coderanch.com/t/391375/java/java/Convert-long-date)。它是谷歌的第一个结果；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:04:41.467

`SimpleDateFormat`是用于在 Java 中格式化日期/时间的常用工具。您只需要指定要表示日期/时间的模式。

```
Date now = new Date();
// or you can use
// long millis = System.currentTimeInMillis();
// Date now = new Date(millis);

String datePattern = "yyyy-mm-dd HH-MM-SS";
SimpleDateFormat formatter = new SimpleDateFormat(datePattern);
String formattedDate = formatter.format(now); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T01:54:56.497

# css - 在 CSS 中设置图像按钮 - image:active

> ID：12543697
> 
> 赞同：12
> 
> 时间：2012-09-22T12:20:52.747
> 
> 标签：css

`class="myButton"`我正在尝试通过在 a 中定义它并更改 CSS 中的样式来用图像替换提交按钮。单击时`myButton:active`似乎不起作用。

这是我的CSS：

```
.myButton{
    background:url(./images/but.png) no-repeat;
    cursor:pointer;
    border:none;
    width:100px;
    height:100px;
}

myButton:active {
     background:url(./images/but2.png) no-repeat;
} 
```

HTML 代码：

```
<input class="myButton" type="submit" value=""> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-22T12:27:05.400

检查此[链接](http://jsfiddle.net/venkateshwar/kDnsn/2/)。你以前失踪`.`了`myButton`。这是一个小错误。:)

```
.myButton{
    background:url(./images/but.png) no-repeat;
    cursor:pointer;
    border:none;
    width:100px;
    height:100px;
}

.myButton:active  /* use Dot here */
{   
    background:url(./images/but2.png) no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-29T05:39:37.560

这对我有用。

```
<!DOCTYPE html> 
<form action="desired Link">
  <button>  <img src="desired image URL"/>
  </button>
</form>
<style> 

</style> 
```

# mysql - 在MySQL中，如果一个字段没有数据，它应该是空的还是空的，还是其他？

> ID：12543699
> 
> 赞同：2
> 
> 时间：2012-09-22T12:20:55.493
> 
> 标签：mysql, database-design, field

我正在整理一个 MySQL 数据库，数据是一个客户列表。并非每个客户的所有字段都有数据。所以有些字段是空的。我们希望补全缺失的数据，但希望能够使用 SELECT 生成报告以列出那些缺失数据字段的客户记录。

在数据可以更新到这些字段之前，应该在这些字段中存储什么？它应该是NULL吗？空的？或者是其他东西？此外，在设置 MySQL TABLE 时，应将 NULL 列设置为什么以及将 DEFAULT 列设置为什么以最好地处理可能没有数据的情况？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:25:28.737

`NULL`明确表示*没有数据*。

因此，如果您想确保您的意思是*它没有价值*，请使用`NULL`. 否则，所有其他默认值都被视为值。

空白字符串`''`是一个值。零`0`也是一个值。

但是`NULL`很特别，因为它意味着*没有价值*。

这将使查询*没有输入任何内容的*行更容易。

您仍然应该对您的数据进行类型检查 - 这样人们就不会输入`-1`或进入`0`身高或体重列。对我们来说，这很明显 - 没有任何东西可以有`0`高度，但对于数据库来说，该列有一个值 - 即使它*不合逻辑*，您也必须调整查询以过滤这些行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:24:49.400

您应该将其设置`NULL`为标准值，以表示[三值逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)`UNKNOWN`中的值或缺失值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:28:21.063

根据我的经验，你会希望为这样的事情允许 null 。专门谈论字符串；有一天，空字符串可能是一个有效值。同样对于数字字段，如果您不允许空值，则必须求助于使用特殊值来表示“空”，例如 -9876.6789，这在编写代码时并不有趣。

请记住，在编写查询并查找空值时，如果您执行类似`field != null`. 你会想要使用`field is not null`.

希望有帮助！

# html - 如何隐藏我的源代码以免被复制

> ID：12543704
> 
> 赞同：18
> 
> 时间：2012-09-22T12:21:17.577
> 
> 标签：html, copy

最近有人告诉我，我的网站被复制了。当我查看他给我的链接时，除了徽标和文字外，该网站与我的网站相同。有没有办法隐藏我的代码？或者使无法右键单击我的页面？我在一些网站上看到，如果您访问[http://example.com/images/](http://example.com/images/)，它将显示访问被拒绝，而不是包含所有图像的列表......他们是如何做到的？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T12:25:43.950

[您可以通过 obscurity](http://en.wikipedia.org/wiki/Security_through_obscurity)来做相当于安全的事情，但防止您的客户端 Web 源可复制的唯一方法是不要将其推送到网络上，首先不要交付它，关闭您的网站。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-22T12:26:43.853

**不要这样做！**这样做是没有意义的，因为用户可以禁用脚本，并且有许多工具，如 Firebug，用户可以通过它们查看代码。

保持商店安全的最佳方法是在开门的同时安装安全摄像头。

您可以通过以下操作简单地禁用右键单击：

```
<body oncontextmenu="return false">
  ...
</body> 
```

或者

```
<script language="javascript">
  document.onmousedown = disableclick;
  status = "Right Click Disabled";
  Function disableclick(e)
  {
    if(event.button == 2)
    {
      alert(status);
      return false; 
    }
  }
</script> 
```

上面的代码来自这篇[文章](http://www.codeproject.com/Articles/11222/Disabling-the-right-click-on-web-page)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-22T12:31:41.873

No, there is no way to hide one's code on the web. If you're sending information to the client-side, that information can be copied. That's not merely a fact of the web, that's a fact of information theory. The only option for cases like this is not prevention, but detection. [Many services exist to help in these situations](https://www.google.com/search?q=website%20copy%20detection%20services).

Depending on your web host, preventing the listing of files in an `images/` directory, for example, may be done by adding an `.htaccess` file with appropriate restrictions, or disabling directory listings from within your host's panel. The key words you need are "disabling directory listings". Talk to your webhost's support for more details, this is a very common request, so they likely already know exactly how to help you.

Note that this will only prevent the *listing* of images in a convenient form. If they are referenced on other pages on your site, they can still be easily downloaded.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T12:26:17.460

隐藏右键单击处理程序只会阻止诚实的人获取页面源，而不是那些使用[wget](http://www.gnu.org/software/wget/)或[curl](http://curl.haxx.se/)等工具的人。您可以混淆或缩小您的 JavaScript（例如使用[Google Closure](https://developers.google.com/closure/compiler/)），但是，如果浏览器需要访问代码或内容，那么恶意的人也可以。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-22T12:29:16.650

In that case, probably they have an access to your ftp account. If I were you I will change my ftp credentials.

And also, there are tools that would really copy all of the websites content, including its source codes. One notable is IDM or Internet Download Manager [http://www.internetdownloadmanager.com/](http://www.internetdownloadmanager.com/) which has a Site Grabber feature.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-15T23:24:35.800

just create an empty index.html page and upload to your images folder, that solves it, so whenever they use `/images`..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-01T15:42:40.313

There is no full proof way.

But here is some strategy that can be employed to hide source code like using "**window.history.pushState()**"

Detail here - [http://freelancer.usercv.com/blog/28/hide-website-source-code-in-view-source-using-stupid-one-line-chinese-hack-code](http://freelancer.usercv.com/blog/28/hide-website-source-code-in-view-source-using-stupid-one-line-chinese-hack-code)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-15T14:44:51.727

imho, it is impossible. Even if you block right click, F12, Ctrl+C/V, or others shortcut to copy, you can still counter with disable JavaScript and copy the the page source.

# iphone - 错误接收器类型“NSInteger”（又名“int”）

> ID：12543713
> 
> 赞同：2
> 
> 时间：2012-09-22T12:22:25.120
> 
> 标签：iphone, nsinteger

```
int thumbCount = [_totalThumbs thumbsViewNumberOfThumbs:self]; 
```

1.  _totalThumbs 是一个 NSInteger 类型的属性。
2.  thumbsViewNumberOfThumbs 是一个 NSInteger 类型的方法。

我需要获取“int”本身的计数，以便我可以将其用于进一步计算。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:27:07.213

这个问题完全没有意义。

首先，`NSInteger`不是一个类。它是`long long`. 这意味着，**您不能将它用作 Objective-C 消息接收器。**

您可能想要的是`thumbsViewNumberOfThumbs:`在其类实现它的对象上调用此方法并将其分配给`NSInteger`. 或者直接将它分配给一个`int`- 对于这样一个简单的情况，`int`并且`NSInteger`是兼容的类型（假设您不想使用不适合`int`...的大数字）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T12:27:25.200

编译器是对的：`NSInteger`不是可能有方法的类型，因为它不是 -*`id`*派生类型。

如果你有一个作为参数的方法，你*在* `NSInteger`冒号之后传递它`:`，而不是作为方法的接收者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:27:14.217

```
int thumbCount = [self thumbsViewNumberOfThumbs:_totalThumbs]; 
```

# mysql - 选择多个最大行

> ID：12543723
> 
> 赞同：4
> 
> 时间：2012-09-22T12:23:38.257
> 
> 标签：mysql, sql

假设我有一个名为`Domain`. 如何从该表中找到最受欢迎的电子邮件域。直接我想找到具有最大计数的所有行。

```
Domain    
gmail.com    
gmail.com    
gmail.com    
yahoo.com    
yahoo.com    
yahoo.com    
rediffmail.com    
rediffmail.com
mail.com 
```

我想要的输出：

```
Domain      No_of_users
gmail.com   3
yahoo.com   3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:29:44.450

```
select
  x.Domain,
  x.No_of_users
from
  (select
    d.Domain, 
    count(d.Domain) as No_of_users
  from
    Domain d
  group by 
    d.Domain) x
where
  x.No_of_users = 
    (select
      max(x2.No_of_users)
    from
      (select
         d2.Domain,
         count(d2.Domain) as No_of_users
      from
         Domain d2
      group by 
        d2.Domain) x2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T13:45:28.280

```
SELECT Domain, count(id)
FROM Domain
GROUP BY Domain.Domain
HAVING count(id) = (SELECT count(id) FROM Domain D GROUP BY D.Domain ORDER BY count(id) DESC LIMIT 1) 
```

# asp.net-mvc - 传递 IEnumerable 变量以在 ASP .NET MVC 中查看

> ID：12543737
> 
> 赞同：4
> 
> 时间：2012-09-22T12:25:40.020
> 
> 标签：asp.net-mvc, drop-down-menu, checkbox, ienumerable

我会说一点点英语。我试着问我的问题。

我有一个模型。它的名字是 Product.cs

```
 Product
  {
    public int TypeId { get; set; }/*these are at the same time field of Type Table*/
    public string TypeName { get; set; }

    public int TradeMarkId { get; set; }/*at the same time field of TradeMark Table*/
    public string TradeMarkName { get; set; }

    public int ProductId { get; set; }/*at the same time field of TProduct Table*/
    public string ProductName { get; set; }
    public int TId { get; set; }
    public int TMId { get; set; }

    public List<TypeProduct> typeList { get; set; }
  } 
```

我的控制器页面

```
 My controller 
  [HttpGet]
  public ActionResult TradeMarkProduckAdd()
  {
    Product product = new Product();
    TypeList typeList = new TypeList();
    product = typeList.TypeListOf(product);
    return View(product);//"This doesn't work"            
  } 
```

它说类型错误传递到字典的模型项的类型为“TypeMark.Models.Product”，但该字典需要类型为“System.Collections.Generic.IEnumerable`1[TypeMark.Models.Product]”的模型项.

当我收到此错误时，我更改了**返回视图（产品）；**返回 **视图（（IEnumerable）产品）；**但它没有再次工作。

查看页面

```
 @using TypeTradeMark.Models
    @model IEnumerable<Product>
    @using (Html.BeginForm("AddProduct", "Home", FormMethod.Post))
    {
      @foreach(var item in Model as List<Product>)
      {                              
        @item.ProductName
        @item.??//checkbox for every record      
        @item.??//dropdownlist for trademarks      
      }    
    } 
```

类型列表类

```
 TypeList class

    public class TypeList
    {
      VtDataContext Vt = new VtDataContext();
      public Product TypeListOf(Product typeListOf)
      {          
        var query = (from c in Vt.Types select c);
        typeListOf.typeList=new List<Type>(query.ToList());
        return typeListof;
      }
    } 
```

我的桌子

```
 Type : TypeId, TypeName
    TradeMark : TradeMarkId,TradeMarkName
    TProduct : ProductId,ProductName,TId,TMId//TId relation with TypeId, TMId relation with TradeMarkId 
```

我无法解决问题你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:40:04.667

您查看期望`Product`类型对象的列表，请参阅 ( `@model IEnumerable<Product>`)。

尝试使用这样的东西：

```
return View(new List<Product> { product, product2 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:43:32.990

我相信你需要像这样创建一个界面：

```
public interface IProduct
{
    IEnumerable<Product> Products { get; }
} 
```

更改您的控制器以使用此 IEnumerable 接口而不是类 Product。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T00:30:35.587

在您的视图中，您已声明 @model IEnumerable，这意味着此视图被强类型化为 Product 类型的枚举，并且您的视图将始终期望一个类型为 Product 的枚举。您在这里遇到的错误是因为您传递了一个与视图类型不匹配的产品对象。

如果您想坚持使用`IEnumeratble<product>`，您可能需要在 Controller 或 TypeListOf() 方法中创建产品列表并将其传递给 View。

# php - 如何从嵌套文件夹中获取文件并装饰以正确显示

> ID：12543744
> 
> 赞同：1
> 
> 时间：2012-09-22T12:26:21.860
> 
> 标签：php, file, directory

如标题所示。
如何从嵌套文件夹中获取文件并装饰以正确显示。
我成功地从嵌套文件夹中引入文件，但显示不正确且无序。

这是我的尝试：

```
function getfiles($Folder) {
    $dir = opendir($Folder);
    while ($files = readdir($dir)) {
        if ($files == '.' || $files == '..')
            continue;

        if (is_dir($Folder.'/'.$files)) {
            getfiles($Folder.'/'.$files);
        }

        echo $files."<br/>";
    }
} 
```

此函数工作正常，但结果显示不佳且无序。

我想变成这样：

```
.folder
   .file
   .file
   .folder2
      .file
      .folder3
         .file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:30:11.033

您没有说明您想要的输出是什么。

例如，您可以以缩进的形式显示深度：

```
function getfiles($Folder) {
    static $depth;

    $depth++;

    $dir = opendir($Folder);
    while ($files = readdir($dir)) {
        if ($files == '.' || $files == '..')
            continue;

        if (is_dir($Folder.'/'.$files)) {
            getfiles($Folder.'/'.$files);
        }

        echo str_repeat('- ', $depth).$files."<br/>";
    }

    $depth--;
} 
```

或者您可以使用 HTML 来制作嵌套结构：

```
function getfiles($Folder) {
    echo '<ul>';
    $dir = opendir($Folder);
    while ($files = readdir($dir)) {
        if ($files == '.' || $files == '..')
            continue;

        if (is_dir($Folder.'/'.$files)) {
            getfiles($Folder.'/'.$files);
        }

        echo '<li>'.$files."</li>";
    }
    echo '</ul>';
} 
```

如果要排序输出，请使用`scandir()`：

```
function getfiles($Folder) {
    $dir = scandir($Folder, 0); // 0 for ascending order, in PHP from 5.4 use SCANDIR_SORT_ASCENDING
    foreach ($dir as $files) {
        if ($files == '.' || $files == '..')
            continue;

        if (is_dir($Folder.'/'.$files)) {
            getfiles($Folder.'/'.$files);
        }

        echo $files."<br/>";
    }
} 
```

# javascript - Javascript location.host 没有 www

> ID：12543746
> 
> 赞同：9
> 
> 时间：2012-09-22T12:26:31.157
> 
> 标签：javascript

我有一个 php 文件，用于在 Facebook 和 Twitter 上分享我的用户的帖子。例如，如果我单击 Twitter 图标，我会看到一个屏幕，其中会自动写入指向我网站的超链接。这很好，但我喜欢删除`www.`自动显示在 Twitter 屏幕上的部分 url。我想这与location.host有关，所以我用谷歌搜索，但我找不到这个问题的正确答案。

这是我的代码示例：

```
function e(f,i,an)
{
        with(document)
        {
                write('<div style="width:100%"><table id=m'+i+' style="visibility:hidden"><tr>');
                write('<td id="vst' + i + '" style="white-space:nowrap">&nbsp;</td>');
                write('<td hr(this.childNodes[0])" title="share on facebook"><a href="javascript:od(\'http://www.facebook.com/sharer.php?u=' + location.host + '/e/'+ i +'\',900,400)" class=icon><img src="images/facebook.png" target="_blank"></a></td>');
        write('<td hr(this.childNodes[0])" title="share on twitter"><a href="javascript:od(\'http://twitter.com/home?status=' + location.host + '/e/'+ i +' - %20read!\',800,600)" class=icon><img src="images/twitter.png" target="_blank"></a></td>');
                write('<td class=ei><a name="cid'+i+'"></a><a href="e/'+i+'">( #'+i+' )</a></td>'); 

                  document.write('<td>&nbsp;</td>'); 
```

我的第二个问题是：如何在 Twitter 屏幕上添加自定义标题：例如，我的网站名称无需使用 location.host 以及正在共享的 TOPICNAME 的标题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T12:31:36.540

对于您的第一个...您可以修改主机：

```
location.host.replace('www.','') 
```

* * *

**编辑：解决问题**

再次被否决，并在第一条评论上看到很多赞成票，我将尝试解决对子域的担忧，除了`www`包含`www`...

仍然为这个解决方案避开正则表达式，主要是因为通常很难维护正则表达式，而且有很多开发人员根本不接触正则表达式......

```
var cleaned_host;
if(location.host.indexOf('www.') === 0){
    cleaned_host = location.host.replace('www.','');
}
// do something with `cleaned_host` 
```

......或者更简洁......

```
location.host.indexOf('www.') && location.host || location.host.replace('www.', '');
// evaluates to hostname with starting `www.` removed 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-22T12:48:34.000

如果您只想获得二级和顶级域，而不是任何子域，这应该可以帮助您：

```
var url = location.host; // e.g. "www.example.com"
return url.split(".").slice(-2).join("."); // "example.com" 
```

这也适用于其他子域，甚至超过三级域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T12:34:54.120

location.host.replace('http://www.','')

或（如果您想保留 http://）

location.host.replace('http://www.','http://')

它确保您只替换 www 如果它在开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T12:57:27.103

# 删除所有各种 www。火柴

* * *

如果您需要删除**www.** 或**w。**或**ww。**或**二战。**依此类推，下面的代码可能会变得很方便。

### Javascript

```
var searchPattern = "^w+\\d*\\." ;
var rx = new RegExp( searchPattern, "gim" ) ;
var replacePattern = "" ;
var replacedText = sourceText.replace( rx, replacePattern ) ; 
```

### PHP

```
preg_replace( '|(?mi-Us)^w+\\d*\\.|D', '', $sourceText, $limit, $count) ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-17T10:56:33.680

当前[接受的答案](https://stackoverflow.com/a/12543794/4829915)坚持不使用正则表达式，这意味着它不涵盖评论中描述的某些情况。

但这是一个无正则表达式的解决方案，应该涵盖所有内容。我也`hostname`用过`host`：

```
function thedomain(domain) {
  var subdomain = 'www.', subdomain_len = subdomain.length;
  if (domain.substr(subdomain, subdomain_len) == subdomain)
    domain = domain.substring(subdomain_len)
  return domain;
}
console.log(thedomain(location.hostname)); // Strips www if needed
console.log(thedomain('www.foobar.com')); // Strips www      
console.log(thedomain('wwww.foobar.com')); // Does NOT strip www
console.log(thedomain('prefix.www.foobar.com')); // Does NOT strip www
```

# javascript - 如何使用此 JS 代码更改图像大小

> ID：12543749
> 
> 赞同：0
> 
> 时间：2012-09-22T12:26:40.660
> 
> 标签：javascript

基本上，我有一个页面，其中使用此脚本生成 2 个随机图像：

```
<script type="text/javascript">
<!--
 var imlocation = "images/";
 var currentdate = 0;
 var image_number = 0;
 function ImageArray (n) {
   this.length = n;
   for (var i =1; i <= n; i++) {
     this[i] = ' '
   }
 }
 image = new ImageArray(3)
 image[0] = 'image1.gif'
 image[1] = 'image2.gif'
 image[2] = 'image3.gif'
 var rand = 60/image.length
 function randomimage() {
currentdate = new Date()
image_number = currentdate.getSeconds()
image_number = Math.floor(image_number/rand)
return(image[image_number])
 }
 document.write("<img src='" + imlocation + randomimage()+ "'>");
//-->
</script> 
```

然后使用不同的变量再次重复，因此两个图像都是随机的。我需要两个图像的大小相同。CSS 似乎没有使用 .img 并指定高度和宽度。我还有其他方法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:33:30.207

> CSS 似乎没有使用**.img**并指定高度和宽度

使用 CSS，您可以使用起始句点 (ie ) 指示命名类`.mycssclass { }`，而使用命名元素您只需指定元素名称 (ie `img { }`)。所以这可能是你的样式没有被应用的原因。

# android - 如何通过 MigLayout 手动计算宽度

> ID：12543760
> 
> 赞同：4
> 
> 时间：2012-09-22T12:27:52.970
> 
> 标签：android, miglayout

我在我的 android 项目中使用[MigLayout 4 Android 。](https://github.com/saynomoo/mig4android)该代码中有一个错误：如果子布局嵌套在父布局中，`fill, grow`则会忽略类似的约束，因为 mig4android 只是忽略了它们。

我正在尝试修复它，但我不知道该怎么做。

现在，我可以得到父宽度，和子组件的约束（可能有也可能没有，，，`grow`或者`fill`其他），如何计算孩子的宽度？miglayout 是否提供了任何方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T14:01:06.477

请尝试此代码 int Width = getWindowManager().getDefaultDisplay().getWidth();

# picasa - jsrender picasa

> ID：12543761
> 
> 赞同：0
> 
> 时间：2012-09-22T12:28:03.980
> 
> 标签：picasa, jsrender

我想不通，我正在尝试从 googles picasa 获取 json 格式的图片。并使用 jsrender 渲染 html。

我有这个[jsfiddle](http://jsfiddle.net/zargo/6425U/1/)给你看。

它给了我未定义的信息，我使用 Chrome 开发人员工具来分析数据。我感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:11:32.240

您的模板正在尝试访问`model.author.name`json 数据中不存在的模板。要显示作者姓名列表，请将模板的该部分更改为：

```
{{for author}}                        
    <h2>{{:name.$t}} </h2>
{{/for}} 
```

要访问 JSON 数据中的其他信息，请使用类似的方法来遍历集合。

# javascript - json，如何检查密钥？

> ID：12543766
> 
> 赞同：0
> 
> 时间：2012-09-22T12:28:53.980
> 
> 标签：javascript, json

我在我的 javascript 中为两个地方重用了一个函数。

在此方法中，我拨打电话并检索 json 对象（数据）

```
data[0].fields['status'] 
```

在其中一种情况下，我知道关键的“状态”不存在，我需要使用硬编码值，但由于两种情况的代码是共享的，我需要捕获这种情况。

是否有一种 get 方法可以安全地检查密钥，如果它不存在，我将使用硬编码值？

```
data[0].fields.get('status') ? 
```

还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:33:21.637

使用[`in`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)检查对象上是否存在属性：

```
if ('status' in data[0].fields) … 
```

如果您的潜在价值是真实的，您也可以使用简单的布尔评估，因为`undefined`评估为假。您甚至可以在[短路评估](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Short-Circuit_Evaluation)中使用它：

```
return data[0].fields.status || defaultstate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:33:05.183

通常：

```
var status = data[0].fields['status'] || "default"; 
```

正如所指出的，这可能会产生*虚假*值的不良行为。

此外，除了`in`运算符之外，您还可以使用[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T12:33:51.690

```
if ( typeof data[0].fields['status'] === 'undefined' ) data[0].fields['status'] = 'hardcoded value';
// your code goes on here 
```

# java - 连接在 127.0.1.1 java RMI 被拒绝

> ID：12543767
> 
> 赞同：4
> 
> 时间：2012-09-22T12:28:55.943
> 
> 标签：java, rmi

我是 Java RMI 技术的新手。我有一个其他程序员已经遇到的问题，但我无法理解他们在教程中做了什么来解决它。我已经用 Java RMI 实现了游戏“tic tac toe”。这里是ControllerServer代码

```
public ControllerServer() {

    try {
        game = new GameImpl();
        BoardView view = new BoardView(this);
        viewUpdater = new ServerViewUpdaterImpl(view);

        Game gameStub = (Game) UnicastRemoteObject.exportObject(game, 1099);
        ServerViewUpdater serverViewStub = (ServerViewUpdater) UnicastRemoteObject.exportObject(viewUpdater, 1099);

        Registry registry = LocateRegistry.createRegistry(1099);

        registry.rebind("TTTGame", gameStub);
        registry.rebind("TTTServerView", serverViewStub);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这里是 ControllerClient

```
public ControllerClient() {
    try {

        BoardView view = new BoardView(this);
        localView = new ClientViewUpdaterImpl(view);

        String address = JOptionPane.showInputDialog("Insert server's address: ");

        Registry registry = LocateRegistry.getRegistry(address, 1099);

        game = (Game) registry.lookup("TTTGame");
        remoteView = (ServerViewUpdater) registry.lookup("TTTServerView");
        remoteView.registerClientView(localView);

    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

它在本地工作，通过插入“localhost”“127.0.0.1”或我的外部网络IP。如果客户端和服务器在不同的机器上运行，它就不起作用。

我得到了异常“**连接被 127.0.1.1 拒绝**”。我不明白他们为什么在执行的某个时候尝试使用本地主机地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-24T13:14:16.943

正如另一个人所说，这是海滩，您的 IP 设置为**127.0.1.1**

运行 a`ipconfig -a`以查看您的主机的 IP 地址是什么。

然后编辑该`/etc/hosts`文件，而不是这一行 ，用你机器的 IP**`127.0.1.1 "name of the host"`** 替换**127.0.1.1**。

这应该有效。

您始终可以通过执行以下命令来验证*rmi 服务器*正在侦听的 IP：

```
String hostname = InetAddress.getLocalHost().getHostAddress();
Log.info("this host IP is " + hostname); 
```

如果您`/etc/hosts`使用正确的 IP 覆盖文件，那么一切都应该正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T12:16:07.330

调用 getRegistry() 时地址错误。您需要提供服务器主机的地址。客户端主机中通常没有运行 RMI 注册表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T12:37:47.620

这是因为您的 IP 很可能是错误的。它是`127.0.0.1`和不是`127.0.1.1`。你也可以试试`localhost`。

# .net - 实体框架中的通用持久化方法 - 插入或更新（如果存在）实体

> ID：12543770
> 
> 赞同：2
> 
> 时间：2012-09-22T12:29:11.767
> 
> 标签：.net, entity-framework, repository

实体框架中实现通用持久方法的最佳解决方案是什么？

例如有一个公司实体：

```
public class Company
{
    public Company()
    {
        Id = Guid.NewGuid();
    }

    public Guid Id { get; set; }

    public string Name { get; set; }
} 
```

Id 属性可以在实体存储到数据库之前生成。

所以任务是实现 Persist 方法：

```
public class Repository
{
    private DbSet<Company> _dbSet;

    public void Persist(Company company)
    {
        // How to implement body here to Add entity if it doesn't exists yet
        // or Modify it in opposit case?
        // In terms of database entity record is required to be inserted or updated.
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T13:12:28.637

在您无法识别`Company`实例是新实例还是以前从数据库加载的示例中，您必须查询数据库：

```
public void Persist(Company company)
{
    var companyInDb = _dbSet.SingleOrDefault(c => c.Id == company.Id);
    if (companyInDb != null)
    {
        _context.Entry(companyInDb).CurrentValues.SetValues(company);
    }
    else
    {
        _dbSet.Add(company);
    }
    _context.SaveChanges();
} 
```

如您所见，您需要对`_context`存储库中的上下文的引用。

如果您将公司标记为新公司或从数据库加载，则可以使用另一种方法，例如使用特殊构造函数：

```
public class Company
{
    public Company()
    {
    }

    public Company(bool isNew)
    {
        Id = Guid.NewGuid();
        _isNew = isNew;
    }

    public Guid Id { get; set; }
    public string Name { get; set; }

    private bool _isNew;
    public IsNew { get { return _isNew; } }
} 
```

然后该`Persist`方法不需要加载原始文件：

```
public void Persist(Company company)
{
    if (!company.IsNew)
    {
        _context.Entry(company).State = EntityState.Modified;
    }
    else
    {
        _dbSet.Add(company);
    }
    _context.SaveChanges();
} 
```

请注意，所有这些仅更新公司的标量属性，而不是关系。

# java - 使用 isLetter() 将字符串拆分为单词，然后在新行打印出每个单词

> ID：12543782
> 
> 赞同：0
> 
> 时间：2012-09-22T12:30:13.993
> 
> 标签：java, string

```
input:
this is a line

output:
this
is
a
line 
```

这个想法是，用户将输入一行，然后将在一行中打印出一个单词，然后继续。buffer 和 inputString 是 String 的变量。

```
 for (int i=0;i<inputString.length();i++){
        if(Character.isLetter(inputString.charAt(i))){
            buffer += i;
        }// end if
    }// end for i 
```

用我很酷的错误信息结束这一切。

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The local variable buffer may not have been initialized 
```

我对 java 编码很陌生，我知道还有很多其他方法可以解决这个任务，比如使用 split() 和其他一些方法。但是我的虐待狂老师希望我使用 isLetter() 来处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:33:44.507

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The local variable buffer may not have been initialized 
```

意味着您已经声明了一个变量（可能是一个字符串？）但没有初始化它。

代替

```
String buffer; 
```

和

```
String buffer = ""; 
```

我不确定你的循环到底做了什么，将计数器添加到任何东西对我来说都没有意义，但那是另一回事了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:40:22.810

刚刚用这样的空字符串初始化变量 Buffer String Buffer = ""; 或者您可以在指定条件为真时使用 char 类型存储字符，然后将这些字符连接成字符串。

# ios - 带有 TableView 的 IOS 6 CalloutView 不再起作用

> ID：12543783
> 
> 赞同：2
> 
> 时间：2012-09-22T12:30:23.633
> 
> 标签：ios, uitableview, ios6-maps

我的地图有一个自定义标注视图。里面有一个tableview。直到 IOS 6 一切正常，如果我选择了一行，标注内会显示一个新视图，但现在使用 IOS 6 它不再工作了。显示了表格视图，但我无法选择一行，只需滚动表格即可。知道如何解决这个问题吗？

谢谢 4 帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:17:21.097

我解决了这个问题。单击 CalloutView 中的任何内容，地图将无法触摸。我的 calloutview 是自定义的，有 tabbleview

1 - 在 MapviewController.h 文件中，您将添加委托：UIGestureRecognizerDelegate

2 - 在文件 MapViewController.m 中实现方法 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch

- 在我的 mapView 中，当您在 Map 上单击 1 次时，它将采用此方法 3 次。所以我限制触摸将采取行动。第一次触摸将采取行动。- 在 myCalloutView 中有 tabbleView，如果 tabbleView 接收到触摸它会返回错误的地图触摸，它会让你的 tabbleview 可以触摸。它同样适用于你的按钮

注意：在 NSlog 命中测试视图中：将具有您希望它触摸的视图项目的名称。例如我的观点：isEqualToString:@"UITableViewCellContentView"]

```
static int count=0;
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
        NSLog(@"hit test view %@",[touch view]);    
        if(count >0 && count<=2)
        {
            count++;
            count=count%2;
            return FALSE;
        }
        count++;      
        if ([[[[touch view] class] description] isEqualToString:@"UITableViewCellContentView"]) {
            return FALSE;
        }
        return TRUE;
    } 
```

# javascript - 轮盘赌 - javascript - 链接

> ID：12543786
> 
> 赞同：0
> 
> 时间：2012-09-22T12:30:44.807
> 
> 标签：javascript, hyperlink, html5-canvas, href

我正在一个需要轮盘赌的网站上工作。我选择了这个。

[使用 HTML5 Canvas 创建轮盘赌](http://www.switchonthecode.com/tutorials/creating-a-roulette-wheel-using-html5-canvas)

我的问题是我无法让文本成为链接。

我试过例子。

```
var str = "link";
document.write(str.link("page2")); 
```

我认为问题在于文本已经在变量中？

但我无法让它工作：/

有什么好的建议吗？我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:39:19.363

要创建链接，您必须写出元素的 HTML 形式：

```
document.write( '<a href="page2">link</a>' ); 
```

虽然在实际代码中使用并不好，但这里有一个使用和设置属性`document.write`的替代方法：`document.createElement`

```
var link = document.createElement('a'); // create an anchor element

link.href = "page2"; // set the href

link.innerHTML = "link"; // set the text

document.body.appendChild( link ); // append the element to the body element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:47:39.840

将文本设为链接是什么意思？我假设您的意思是每个轮盘赌选项都可以点击？
此外，您将无法使用常规方法执行此操作（例如，通过将线路更改`var text = restaraunts[i];`为`var text = "<a href="link">"+restaraunts[i]+"</a>";`（这可能是您所采取的任何您所指的道路`var str = "link"; document.write(str.link("page2"));`。您确实需要提供更多信息

# svn - ccnet sourcecontrol：一次从 svn 1 版本获取更新

> ID：12543791
> 
> 赞同：1
> 
> 时间：2012-09-22T12:31:02.500
> 
> 标签：svn, version-control, continuous-integration, cruisecontrol.net, ccnet-config

我正在设计一个持续集成项目。在这个过程中，我需要 ccnet 在每次修订后构建，然后执行一些自定义任务，即它应该一次只从 svn 更新 1 个修订，然后触发构建过程。

我还制作了一个自定义 dos 脚本来仅更新一个修订版。但是我只能返回一些数字或真/假来表明没有更新，svn 不可访问或有一些错误。

如果我在 sourcecontrol 块中将自动更新 sourcecontrol 设置为 false 并首先将我的脚本放在任务部分。然后，如果没有更新并且指示不构建，它将返回 false。但是 ccnet 会将其解释为错误，并且每个人的电子邮件构建都失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:56:34.887

查看在 ccnet 配置文件中使用外部源代码控制任务。

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/External](http://www.cruisecontrolnet.org/projects/ccnet/wiki/External)

# python - 使用 Python 脚本的 DSPL 缺失值

> ID：12543795
> 
> 赞同：1
> 
> 时间：2012-09-22T12:31:39.160
> 
> 标签：python, csv

我有一个 csv 文件并想向其中添加一个 xml 文件，所以我使用 DSPL 生成器： [https ://developers.google.com/public-data/docs/dsplgen?hl=de-DE](https://developers.google.com/public-data/docs/dsplgen?hl=de-DE)

但我的问题是，我的 csv 文件中有一个缺失值，并且脚本无法正确读取它。如果我将“MISSING VALUE”更改为例如零，那么一切正常，但为了进一步分析，这并不好，因为该值不是零而是缺失！

我的 CSV 文件中的示例：

```
Platz[type=integer],Land[type=string],Gold[type=integer],Silber[type=integer],Bronze[type=integer],Gesamt[type=integer],GNI[type=float],Lifeexpectancy[type=float],Meanyearsofschooling[type=float],Mortalityunderfive[type=float],PopulationTotal[type=float],Totalexpenditureonhealth[type=float],CommunistSocialist[type=float],Populationbelow[type=float],CountrySize[type=float],Militaryexpenditure[type=float],Totalexpenditureoneducation[type=float],year[type=date]
1,United States,46,29,29,104,43017.00044,78.531,12.4452,8,313.08538,16.20982063,0,0,9629091,4.713270174,5.45094,2011
2,China,38,27,23,88,7476.355864,73.456,7.549,19,1347.565324,4.566156614,1,15.92,9596960,1.951861141,MISSING VALUE,2011 
```

第二行（中国）中的值 MISSING VALUE 是我的问题

# php - dompdf 图像不是真实图像不可读或为空

> ID：12543796
> 
> 赞同：0
> 
> 时间：2012-09-22T12:31:41.293
> 
> 标签：php, pdf, dompdf

我在使用 dompdf 时遇到问题，我插入的图像在转换为 pdf 文件时无法读取

当我使用它加载到 dompdf

php方法

```
<img src="<?php echo $_POST["sig"]; ?>" /> 
```

我得到一个带有 X 的方框缩略图

它说“图像不是真实图像不可读或为空”，我的图像的网址以文本形式打印

但是当我使用整个网址时

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAADICAYAAADGFbfiAAAgAElEQVR4Xu3dCdh9Wz0H8EKi2RBF5Y2QoZGkNNwmXGQIEak/paSUW92bpLwliWR2Uxn+SS4SyZAm/le3OSFUhngz3BAJGTP9Pk9n9Zx7Ouc95+yzzzl7v//v73l+z3mHs9de67vX/s1rrctfLhQEgkAQCAJBoAMCl+9wTS4JAkEgCASBIHC5KJBMgiAQBIJAEOiEQBRIJ9hyURAIAkEgCESBZA4EgSAQBIJAJwSiQDrBlouCQBAIAkEgCiRzIAgEgSAQBDohEAXSCbZcFASCQBAIAlEgmQNBIAgEgSDQCYEokE6w5aIgEASCQBCIAskcCAJBIAgEgU4IRIF0gi0XBYEgEASCQBRI5kAQCAJBIAh0QiAKpBNsuSgIBIEgEASiQDIHgkAQCAJBoBMCUSCdYMtFQSAIBIEgEAWSORAEgkAQCAKdEIgC6QRbLgoCQSAIBIEokMyBIBAEgkAQ6IRAFEgn2HJREAgCQSAIRIFkDgSBIBAEgkAnBKJAOsGWi4JAEAgCQSAKJHMgCASBIBAEOiEQBdIJtlwUBIJAEAgCUSCZA0EgCASBINAJgSiQTrDloiAQBIJAEIgCyRwIAkEgCASBTghEgXSCLRcFgSAQBIJAFEjmQBAIAkEgCHRCIAqkE2y5KAgEgSAQBKJAMgeCQBAIAkGgEwJRIJ1gy0VBIAgEgSAQBZI5EASCQBAIAp0QiALpBFsuCgJBIAgEgSiQzIEgEASCQBDohEAUSCfYclEQCAJBIAhEgWQOBIEgEASCQCcEokA6wZaLgkAQCAJBIAokcyAIBIEgEAQ6IRAF0gm2XBQEgkAQCAJRIJkDQSAIBIEg0AmBKJBOsOWiIBAEgkAQiALJHAgCQSAIBIFOCESBdIItFwWBIBAEgkAUSOZAEAgCQSAIdEIgCqQTbLkoCASBIBAEokAyB4JAEAgCQaATAlEgnWDLRUEgCASBIBAFkjkQBIJAEAgCnRCIAukEWy4KAkEgCASBKJDMgSAQBIJAEOiEQBRIJ9hyURAIAkEgCESBZA4EgSAQBIJAJwSiQDrBlouCQBAIAkEgCiRzIAgEgSAQBDohEAXSCbZcFASCQBAIAlEgmQNBIAgEgSDQCYEokE6w5aIgEASCQBCIAskcCAJBIAgEgU4IRIF0gi0XBYEgEASCQBRI5kAQCAJBIAh0QiAKpBNsuSgIBIEgEASiQDIHgkAQCAJBoBMCUSCdYMtFQSAIBIEgEAWSORAEgkAQCAKdEIgC6QRbLgoCQSAIBIEokMyBIBAEgkAQ6IRAFEgn2HJREAgCQSAIRIFkDgSBIBAEgkAnBKJAOsGWi4JAEAgCQSAKJHMgCASBIBAEOiEQBdIJtlwUBIJAEAgCUSCZA0EgCASBINAJgSiQTrDloiAQBIJAEIgCOTlz4CNqKJeenOFkJEEgCAwdgSiQoT+h1fr3E/W1exe/z2pfz7eCQBAIApsjEAWyOYb7buEa1YG/L3518a333ZncPwgEgbMHgSiQ8T/rP6wh/E/xjcc/lIwgCASBMSEQBTKmp/XefX1I/el7iq9V/LZxDyW9DwJBYGwIRIGM7Yldtr9vr19/tfirxj2M9D4IBIExIhAFMsan9u4+f3/xfYuvPN4hpOdBIAiMGYEokPE+vf+orn938beMdwjpeRAIAmNGIApknE/vydXt+xVfdZzdT6+DQBA4CQhEgYzzKb6jun1R8QPG2f30OggEgZOAwFgUiDj/BxV/7IT9/oYJ/+VJeBBrjOGB9V35D+s/3rnGdflqEAgCQaBXBIasQD69RvrU4k8uts7hvyb8fvX5zxMUrjIRpGfTNh5/PlGcn9vrTEhjQSAIBIE1ERiqAvnyGsdPFVsk9/KJwvjr+vyTCV+vPj+x+E7FNyr+v+JTxS9bc/xj+zpl+rri2xRbeX6S6WY1uP8t5m1eqfjFxZ77X5zkQWdsQWBMCAxRgdjPicfxzOJ7rQDmt9d3vrD4I4v/pvjC4h9Y4boxfuXp1ekvKv7QMXZ+jT4f1ncfWfwvxYwDrOrsasW/X3zbNdrKV4NAENgSAkNUIC+qsV63+IZrjJkCeXTxhxcbkyTzQ4tfsEYbY/jqP1Qnn1OsAuskEwViX69nF/9r8b8VX7v43OLPmvzN8z19kkHI2ILA0BEYogJhaT5+wuvid+e64B7FFMoVim31Yafak0DfWIOw7uODi1sO6CSMa90xCFsyDCgVVWjPWreBfD8IBIF+EBiaAvmGGtb3Fl+9mOXZle5aFz632C61vJKTQMbCO6Mgz3ZSQPDLEyViNf7PnO2AZPxBYB8IDE2BKMn9neLP7wGMR1Ub9ykWM/+CHtrbZxM/Vzf/zGKlu6F3I2COCOf9e/FHFf9jgAkCQWC3CAxJgXxdDf2Hi8W6/64HGD6w2qCQrlhss0EeyRhJ0vwXilWm/ewYB7DFPj+42hba82zlREJBIAjsEIEhKRAVVC8t/tIexy/U8fPFykEfXvyUHtveVVN/WzdSsissF3pvBF5ff7LA9ObFbwxAQSAI7A6BoSiQm9aQX1F8TvGreh4+C/6ni+UQ5FecnzEW+vrq6A8WS5z/01g6veN+fnHdz8r8lxQ71jcUBILAjhAYigIhKH+oeFtneluUJgEtrKVSi7LaBqkKEobraxxH1dYfFH/eNjp7gtr8jRqLZ2y7m1AQCAI7QmAoCuQZNd7PKb7mFsct6fqjxbYCueUW7vNh1aZw058Vf0wP7Vttfqb4k4r/qIf2TnITCgx+stgC0iec5IFmbEFgSAgMRYH8UoGikkYoa5vEy5EXsejQVil9knUJ71ssad8H/Xo1QhGJ74eWI2BtjK1vbrX8q/lGEAgCfSAwFAXymhqMtR8f18egjmnDmhCVWS8s7jMsZE2C9mwA2VcOh0KycPAxW8ZkuvmD+oWHZhHmf+/wvn3cylqQuxWr4rNiPxQEgsCWERiKAvmVifDdxR5PhL3tMGyXIuS0KTnUifVre3nhpj7oLtXIrxXzQHa5eeCldT+hOLkE+1CNiSTQ7YvmhMbTY+p4+hoExorAUBTI0wpAGyd+wA6AvGfd4zuKWfZ9bHNiARslYpv5vuj51ZDQ1Q36anCFdiT+eR02LrRNvgV6Y6IPqc4qBWcg8ERCQSAIbBmBoSgQAv0RxX1VLx0HG+uaoDldfP8N8bXX1vcVK7W1qK0vsh/YtxWzqHdFzevxDFSrOX9lbESZK3c+GFvH098gMEYEhqJAHlvg8Qh21R/nikh4f/SGD81+XYQti13Oog96UDVCKWmTItkVnVc3ctY6kgOxpf7YyJYvn11s2/dQEAgCW0ZgVwJ72TAO6wvfWryr/vx23cuBVIR/VxJrf1zxxcV36NrInOuU7Er0W6+yS/quuhmP6v03fA5/VddLZFPQu6Yn1Q0fVjxWBbhrvHK/ILARArsS2Ms6eVhf2KUCcT/UPpf1b97/rWy3QtzW8c/r0sCca65ff/vjYusafrOnNldtRsWX/aTMiS7z4pvqOiE31zo5UVHBrun8yTxSzacgIBQEgsAWEegiKLbRncPJiz+U/iwbo23nbZ+BhEveueyCFf/PC7CaXVJ+10R5WIRnHcu6z8Fxw86lf3sxJbiv80psmum5ODPErs7bortXwxYtXmtbN0i7QWAMCKwrKLY1psNqeJceyKbjIDAlm+VA+qyUOqr2fq94H9vP28TS4sp1QliENWWKVNLZUXmfxHOz75lKOwsxt0H23rJBJyVlC5VQEDhrEYgCWf/RS9L+arEENyvU2d190E2qkdcV7yN3oP8XFD+xeJUQlvPnnbOios1aGutVNjkArA/8tAFDoT8FAbbH6ZvkVlR6Wbdke/1QEDirEYgCWf/x29xQiIkQFb7qq/rqTdWWEtRt7NO1yiiFfIRk8HHzQrXc4aRBpcY8x6GQ3ItdDZwZ/8wtdMq2+p79J2yh7TQZBEaHwFAUiDJe+1PtYh3IJg+pJYol0C8pFs7og3gxhDGl1Mfq+HX75ORGG03aSfiBxYvmxcvrf/aaMn6hu6FtMX/j6tPLii0ktPtyn8TbskWKI4VzsFefyKat0SIwFAUidCKJK/4+VLIug+C0YR9L15YffQhQFq12HXbldL190DvqpirJ/rT4sNiqeodwTZPyXAruTHGfZct9jtdiSKc3fkaxg6b6JGevP7VYkcHY9gnrE4e0FQTeg8BQFAjL115GhPRQiUCybsTiQ2GcvlaJ27zwF4v3dSSrcA/ldeViuQNjs46DUmlk3YwT/1SJ2TFgqKQKSzLfzs59HIs8PU47RsuxHAx18OlXENg1AkNRIM+qgdvgcBebKXbB+Nl1kd12VV8pVf20Lo3MuYbyELYj8PZFwjHCUZ9S7GAv28r4mTeC5BQ+tfiwWKhxyES5KUXeRiGCkKViAcr1bCVzddYzPVuxyLgLgaEoENadrdBttz40YtF+TfGPF8sVSDK/rYdOvmXyMlo3sU/iaVAi9gVTyvsjxZSlUxuFgxwJLJ+gRHbopAxZP4UX+yb7nVmjs+stZvoeR5f2eF48U3MB2eZG1MDiU6HN0FmKwFAUiNPkJKSFUYZEwlTfXCz+7Sx1oaZTPXSQ8hBH7+Pkwk26w6IkDISu7L91++LnFlso52/nFqs6u9EmN9nhtbwlc5rH1DfZo4wHdsdia3XOBnI8AY/UaaFvLla+rHz9y4rt2sxzFQJ9+tkARsb43ggMRYF8Z3Xt4cW2c3/XQB6URXFyA/a8uvVEKPXhIVl8Zh+uIaxivl71w9YpXzIRDrwQlqVnoKDhrcXXGcjzWKUbKtheXPyVq3x5ze+0BL0FhMp5t0lW9e9rKxYFFF8xeR8/vj4VingHeOLTJNzJqGIIOeXz4m0CkraHicBQFIgEsvUENyt2pvi+yWJB1paXhhfCY/jq4k3XFlCSlKW1Hq/d9yDr/qq+hCEoSB6I3I78gb5JmttTiuU5FhKftyDSmNalN9YFBKYcCoE5S0qtbZ5pMeE26bAaVy5OkOuTAga7DDtgbJvEyzRuYSrehXurjnTS4yK6a/3jdLFc3ja8vm2ON233gMBQFAgL2Mpeoay+NibsCg/ryyrmdjARF11eYNMdXl1vj6gfKxYOGQJJlDuISejQDsDCWYSwvAxPZF+VYV2wEX7jfdyweF2lx0CwKFR4xsLQeaFFZ8ioxNt2LuhM3eN2k2fxn5NPz0UeTnixb+JZPb74psX2dDtdbL478mAV8s5aG6MApo+y9lXume8MBIGhKBCWLqv3BcUSufsiViYLVDJWSSiy75EE/6ahHPtGsdg2PYOkL2xeWg3dplhBgMOwhH+E1yg5ysRalzGRRL9qNnNpHRLCs7bDtd9bbB8tMX/5FESx2CWAMF9W8MCDpoAp5CsVU2jChKscSwxvxgUvUDjIiZTXLFY6zXO1xxcl0he5j8Wj8KJAJcm7LJCUH+SZCWltQ8H1Nd60swUEhqJADI3yOKeY9bePyg6LxL622JkS02sdCBIxaYvouhIFZIU0ga26aZ/E4lQ2zWIUpmjnuCtRFjbxqZ99bdGyi7EqBiDghX7aoVir3NczIahb1RbLX7iIIH/UpAHCn2W9rJDgsL7DAHGWvBAQ5tFQQL9bLBw0vcHjQf1uXmDFCn6Xc7KRpiQ9pS4c54wWRo13dV3lOBnCZT4YQioKLQalPAn+TfIXDCLb4KjYE+Y9qSSCQKFb+OuZelcc++w9MffkDeVIeaqz5LmeSBqSAuEGyw8Q5H0t0lvlodnXiJch/i20xH2fpufULw53uvoqjc35jpXrkuYs/U3LS01ayXcTuct25SxM1W5CVwTnNYoJPNuXKFNFfZ5v0hGytS8jZCkOlr+XeRWSz+LtUqBCXi1x7TlRGtbCsPhVGBEYyzaLPKzvyCVZM+S7BIs1I7wZlVsKROQTCBllsfpK6CgLlpTnoU7nGw7qdxtWysVpS182fV+9Xw7csvOBKruLivsga2TkQHhRbf1QH+3uow0KlhHrneWlYd6pRcSeg6IBIUWf8oWMl/a5qL8n9oTMTSdk3w/YxCYADop3UY2lHNFLyxInWH3OkrAGa7DL4jSeFMVDSAgNud+624wT6Dwilh7FQeB7bkIlzi1/ZfHpYhbgIiK8WMHXLWZxKkdVnmu9B9KmPvK+WOCEqXuoBMK8kiGTPaqMa9UQjJCLhHHb14pi5i2wxAkGAl9u6PnFBL38QFeS2yO4hbIQb8aOwZLiryo+bssV97Zw9cJiSrLrXnGUoed6UKxyysFbfRJFrF1zUD+HTCIJnoV3wSdlwYj0flH45I/3qm2rxEsTwvQu24nZu+JdFvakVHA7Q2eRPD0cMiCb9G1oCsRLzQ3mEWx7y4x2rsOy7TkI2y7ntasmI4wIAJ4HgcSVleRdlezpJFfBLRbWoAS4zZ6bF8DGhmrxWbyLkqxCVpSkBYOtssqmiJSHExVZ7l4cCknbXiChHd8lWL0g4vmEHQHL2iRYh0IsXn1fNbxjjQs8DospEsQal0gWdiKkYaWMm0J6SXFTtOuMmTcil0ZgEUByNEKkPBzKm2GwjCgfHpBnL7+y7jopis/zVWBg7thkcpV8zLJ+zfu/owhY79ZNya3sg2DNW8D6gikG74o5Lmzb5rj+MayEprxf3lenaDpSmkfqGR3tYxBjuufQFAjseAEHxbeYPMRt4GmieZFYgsJTxxEhIx6+jgdCCXqJ5BIIXJU7FmRx89exIlk8lA53ehEd1j/E/meTrAQq78kWMcZJCFrxT7C11dQUhBeIAvqJ4qPJ/Xg69pLiiQjxeBb6QCF6AYW+hkCEvGoxXt6qp0KyIJ3nMnuehzCSMbI8YSIPwkMR1oTNOmTBKbyFGc0FYUzE4hUqJMgI3HYY13Fttxj7snnQ2iA0KQxK0e7EniPD7PQ6A+jwXXOdshXeERJdF7NVb9mUAsOJ58C7ci6P0CHjB5NrniPDhwGnQERhCG/iqNi7j/3txOYnVgV0k+8NUYGwkkwIlrcXeBv0wmpUzmOVPagIYYKKJb4q6bu4J9eWuyuOaqIK0S1LxrZ7EGKENe9HEvU4YjW1JKt7WdNBWQmXEFKEq7JkoR7bkvs+q51y4K5LqPJK4OF61i7vR1+NQTiRkGapDWkvKBYj4aD/q5DnYowtnDR9DUNCvgvunrWwHayEe6wHojwpXl6Ae8pl8FSmcy6EGu+Z1WvbE8UK84hioaxYxss2faTs5FHkLoSJEG/GgsZmjHiObecAXiUhTkBaW0Ww7pLgZN7Jr8hnyuOsQxQELx23EJNPxgxPvikJxo+EtufECzUXfKoow0Kv5i8F491ozIs2D0I9IDBEBWJYQiReMC+M5GKfZJGZ9Q1eylXyEercrbQVglqVLKwieAkZE/+w2D5ahLlzP1ig3GRhjGadzrbNgmJ9sh5V8BxHrGUhLGWj5xQTHu5zenKR+7u3fAmPxD0PiikNiyYJRMLRfCAAKD8voQo0bVrMJoyyi7zUqquwKQIY6r8+LiNziZBtYap53+c18ORg4XvwoMSFOhBscKuy8ncCjWL2TAl0XiPB5W+LSIm4Yg1z4riFeq6XVzBPlPIag8WfwlIUP+9LmOq2k9+FHpXS/lYxgboPotgoXFjwVM05fZGDkUeYzadRGDwJc5BgpxhgSpFT1gwwSta1ohO8COEmn9izmEfmEYUCJ+RZ+tl7eWKT2guw2Nqfh6pAWHJCCoQoj4TH0AdJZiqNZFWuulpZHFyZ5TqTrlmIXiQvgyQ8YSyvQLmw0FhTXGyJda7/LBFOQktiyvp9HLle4peXw1Kdra7xMlIWhA2XnrAT5vDC8kTkN7yUftdPiV2CstGqQn1JN5f++7C+weOCk5j9cSRpzlMVbiO0jyP4N0OEd+AZzCO4EFZKrYXtYCPs1xYYUibagk0Tar5DKImZnyl+xpK++Dfv1/y+f/EyBeJZELCUN0VJQFMqDKBWGUSpyLcMicxrRg0cGUItn8ZroBRgyFvyP0qAcPfeUIJyRrxkXsT0PFx3fNq+VzGs3YMnL9TG6NB+aEMEhqpADIs16KXw8n7+ZBJsMlzCXBJTcl7ifFVSmUQoewEIi1WItSTP0hbrCY1I2qtQaeWy+sGqJNxZlDyGaVJmKoS3TEBSsNpv+1ct6p+wlvsbAyXSFIkXi+CcR4SVkIx5so28h20zCNymnAlT3p4KJQLoOOJFUqwEkjkyTQwQClW5rLnDyhXWEQohlBYRpeT5sPQ9c+1qY3pVNoOAcpNfoLAJQX87KmbxUlQE1jQxFoQQ9Ysnu6oCoezcm7KgNFj1jKrmRbWwWrOyFw5sT/+AO2FNaAuLGg/vjmC3aBVecBPS4zX1SQwkc1cO0jxD3gE5qa4l+X3270S0NWQFAmBC1gQUzvLgCZZ1yeRlkVs/Qeg0Ab5qO/pwWOxlOC4s0dpzj7aYjbBy3VExC5VwnCbCTSiDoKIECFAKg3ckBizx/uhjOkowEWIEiBDBvRd8V0JdLFpo0EI1As89XUcAz8vvGAOF4yUn9CgonkhfRFgLwSgwYHk2su5BHoYCkfxfRAobVE61OWyO2ERRclw/W9EDxcGbs0hwWezbveUTGBuq77QxXTwhr8QbPlMsUUywCx9RMvIZBCPhdFgsd8Zz4O0KWcmXUCC8TwrktcWwP45s68NrpPgYPQwOiwAVAmjDmHwuK7M2fopOSKgxQ8IcwK10tRlILUTnmZsjvjMdvmRMtXbkibQtNCrX5tkJ4ekzBadt80vb+uE9INzhsW1SzOD95zWSAd4VYTDGxRiJLFF2DEchP0agd9PP03SckdTruIeuQAz2kcXCTqwv3gChsQqxmCUxTWwhGvttdam4EGbw8rp+WtDN6wPhL9Gsr9Oxdi8ha3meMiAECFIWmJeKkDDJWcDzQlvT9xVftiCQ0GLdzSvRpHifUqzqx4sjLKZvXuj2/F1P+DWSByDAeQfCEBZ2+iSgWY6bEiVLSVrfoMppmrzwwkYsR8puEUkQHxYLd2mLICfshUAIWXjqM0VDABLEy8IWcFdmS5EzNDxLnuQ06ZtnJjfluU0TD5fiIDB5DgfFFJjn3hLgvq9qjsdJCC/yHggJAtl8ULjgHXDPtshWe4o7GBqeO+FiDjAWCHDKjsLyHpiPMCDQ9cezbzke/2sL4ablgZ/b/ygMP1MiPrF+a8/ftKkN49FnY5czk2uDuTkq3CjU5nNd4qHKwxGeQrHmxSrGnLl0ZtInwvag+NbF3puxkCiAOXDLYt4n3IVSRS6ETufJ8HXC7RvhMAYFYoDCWT9azPIySR9XzBIUt58miVVbQ/BahH9MZsnj2ZzAuqAp91MN44U9jkxq1hghJsThQcpz6DcraFbgtLZ4RxZjsUhZycssZVafF/GexYQdq3ves5RcP1VMIbCCCSLxfxVHBKG+EiQSr8ouxdvPFEv+8xBOTzpISMPb+Fi8XYngcR99aQJlXluwtn6FJ6FybR4R1AQSASYfQUgbZ6uKUgF0v2JGhJdQm/dd0vFW4svgIKCFjYQep4lBYj4ZC0FpDvJArj/pi+965vpEUerTNDEyhDiFVyjkRdTCaT9ZXzhVzJAS0uXVYGFHCoX3Yf40L6LlGigV/WM06QvPh/GAKRMKqjHB5LrpaiUKoQmp6e+6Hk4+5TLknzCrV7J8Xj5KiMrc0891CbaMFvOUpa2v7ktZM4oWEaXFQ1SoYIU84vWZ6+Y5Bee9RsbKkm8YGK93UbiNUUf57Myqr3tR/OQBL1e/YMqgIlcYewpczCPzzDycpcM5f9vKn8aiQAze5BPuIfxYiYQoy0dohlJhiZkIrCITn4W3rPx1VVDFtIU2hLN+aMFFrRKKYDN5KRAKrQlM4SYTcROSkBTWIhBZIYSMUAHhaaJ5sZAQgRwKRWASUr5IFRIvjoXsmuYRsbx9l0LRR3kV5Y7TxPITx/ZCq35Zl/SDF+YZ8TrgtYiE4ljaBOTpOV+SaOeBmL8+Z/NH/n9YzHskqCk+eBEgvBNW8VGxl4/QUOpJ2LNOWfAtV8brFFqcJQYNz051FGEKD8UHLaYv1k7A36F4Oh/CI2JEmCOKI44j85r3Y54TnDwJ852iYHkScua65+L5GZOqtFadtKT5nf6bEaAAYHbtzWwnzGXGCk+DEPWu+5u5Yq4j2LLGKVGKhaFAWcKDda783LP07plrBD+DzP+FjPUFjgQxHOFJWfDAWwjPp+9oz/ygtMgYnovKTaHVo2JyqIWBCfPpcGf9ehnSDzLM9ynfZujol3eXAWK85r7v6RvMyLAzs40N5fcxKZCGmZdK3PxWxQSqicSqJhxoaQ+ZddEn3bUaE9LwoOUGTGhWJMEjVKDmn8JgaXkB9AW2XmgWLJdbfB2ZKIuqgI7rM2Glpp9FSZE25UjYEaCseiE2FrfwExxYuKyVRkf1gxg0AdhCQBQGISQ/w2Pzu5eL9c3CJyARYUrw8Vxmw05Tt5j7Iwz0nTVOEDRFt+g6iozQhFlLgPourJ9eLBxFsAtbyeucmmpILgK+s/kjLzBh4MX1ybr00lPwrD0vsucJH2OXUxECWeQBLeq7v3ve8igEF9yQcB0P1vPxrOaRZ4yb9+U7FB9lwmrGlAWLlJd0UGweDp30VxGBiqhpIuQJfPOD0cOw8XwIbM/DGBUlyO9NE0zNI88IeZ7eSe8CZcAzoajlTKefn/8xgLyrrmVAmU/eEXOf4uDRUiZ+9w6biwQ6A5KA57UwUNv8aaE9iqGF8Cbdeq8P7TXPzs8MAL8375GRYM4wcsz9VcJ0i+61k7+PUYHsBJg5N2GVUyImCdyEpwhCk9eEEsrgBSGKjJUkVEDYyiUgFpCyYCEFk5SQIZBnQ3HTt2cVSwa6hzCYMMY0eRlYRIQ74eklFWOfXT9DYXhhKDAvge+w8k18k9gLyVMhTHlaXjbjZMW3ZLbqIy+gcIT8wCrkfhQpa4riX5UoNfdxvbCkPIcE7VGxZ0HQe9kIfYJZqAdR3oRPC1tM39cle1oAAA4ESURBVI8QEILjZfgOoqhcI8beLFB/ZzQQel2JAKCAeBoU3d2LhVMpkmkiyHiGQq7CNEgoiHEkPOWZzhJl6BmaY2MgRohQKwHP8BNKZMSYYy2ZL2clTEpZMgBWCRnB1XNm8MCOonpB8bTR1Cc+5gwlIsJgbvIyvcfG1zyK4+7nPaMkKR99Jh/IAkbhUbF3hOIaDUWBrPeoWAjyDoSaCUPwmMCEswllMkwTC7clp7nvYuePLRbb9zJRHLwalohrCQzWh+9RDISmMMgriiVuF5EXh2ITr+UBzVqlvLajSXti6YgykUvSP4LV/6fpifWLMA1XmjIyxlOTT3FkQm8VoghYcZQrRUqJCsssIx4LISM0w8uEDcXm741Y+sJiQh7+xxpU8AA7CmafJA8nfEaxicNTEDybRpSh4gbzh9XLsOBZCoWxpikcVvlsnJ9xYrzm21jI/OJNEI6UBmEv/ETJGg+FGRohAidVgRDQrAPCj5cg5ijpNFvu5pGx7P2PkGUNCX/Nq2Za9HjFQYWOvmLJ82eFUxjCE4hQFa5gRRGu+tAUk++ykrmwBDXhchwRtKxdSmG63LJd86b6AQasdUQxcN1ZREJXi8qjCXsWMyUDFx4LJaBvLORlQprSwUJpBLtnwtMRNlpEhI2KI3jy7txDJdXzFlwgHCRcQaGz6oS2COshkFCL8Md03ozHQTmfW+w5MyhWLfKgJIUueYHLsB/C+Kf74PkJJ1GqXcrxhzae9KcQOAkKRBxViIMQZbFRHm2NA2FKCLXqitmHLuxDQPseq4igFJpiFRGe0yGNeRNG7uH8Yi4pL2IRSXpTMizH4/IfEqDcY96IcMds7PeYWyz8lzyGvA1BRtmxiAl0IQKln6z2FjqZ1wihf7q4hQooV2Ggi4uFt44W3JlSVMZpLAoIeGuE5rxCAv3w/OSSXEcZEJDKUQnL40J8bi/Rql/yJcJ9QyKehuS5EtsW+hDyeFhxC7ut0l+hLEl6XotnGgoCe0dgbAqEhU6gSKKeUyxUwcsg6DF3n+ARH2btCCER7ovqpV3DrRaDbCWtyjQJMYL+IcVCKAhWvATKqBFLkgdDGIhtHhS3MktWNqGJJHRZ1ecUi9vPkvEIbzSvSUz/OCt9ThML/ySsJeTEytWm8JGKKH33s/6vQnIjPBd5DAqH98KrES7TthBFy+3csX5uVre/sbKFZ2aJAlIxc1AMX6EM/RIvl1glLCmfsRLPSCkxJQ0HnqC816oex/S45ZzMSTmEUBAYBAJDVyCsNta7UIBkcqtcEEelJJRIvqRYjkCFSl8kUe0ePJpWZUHBEJiUEqVDkVAa/mbNAKuQF6KCRGJaX4VSlP3du5gQFSY7LJboo7QoRKEd1UWEi+opY2rVOpuORyxdwtl4WPc8K4qAJ0J5SorLmaxDlLGwlFCU8cOhlTsakzHCjAL3nemcxfR9eByS1IQiDPwsz9GIoLR2A3abJLPXGVuf37XOhaJmXCg93YQoZx6gPFcoCAwGgaEqEHFSuYFWCUQYqQSykEYsHitv3CZJlusDj0fuRBhFPqWFe4QlCFNWsppx+QohBmWWhLXQGKu7JZtP1c/WYAhfCF2wvCkbFrxKHeEquQWlwH0JChhRrMIorGEVYYhnRahJ9FJmXUj+hnCngNpqZ+1QIkpVKcxlxKpW2aKWn2UuJ9CIdylMBkseydhIGJXHp/+bUAtBChuaX6EgMBgEhqRAWJwStOLZLHzVO0IvqjWOBoPYuztCYKp8OjXp87zu8UyEKpQsNhIy4pUIhVFEKm6sY2jEWlVVRKgel1NZBQ5eDKXhPnIgErCN4KqCad/PX56J96aEVuiQgqaIfcqLyG/Jg1DKYyIKGubCpxTJJmSeyeswWEJBYFAI7FuANDCeWT8oc2UtW308LVQHBdikM8prCWgCYhF54dWML6vOatcLBbHehbBURm1KvDQejU9FBtMkT6QaaN42CJved93rjZu3J2+iT5RrW2tj5fs6FXHr3ntb339LNWw9gzDdJmRND6NK+JQiCQWBQSEwBAXCupQLUHWktHQMpJJIuai1HItIOEZ4Sh5lGfFM5EDsV0Tob0oS3CrLPF/YHs006Hee3hAUyKZjHdr1wp68Zrk7i+M2Ie+GuWa1digIDA6BfSsQSVyVR9YUsL7HQBSd8l9Cv23zMa/fwg7KVlV0HS0ZmOSxxLZqrD6I0pIz4s3Meh/aV1mmpDQKpA+0L9uGnIf8Ek9q2ZYtx93d2hcLPYXxxrBdSf9IpsXBI7BPBaLEVcmrTfzGtHxf9ZdyYTmE40hFlaS5hHJb/T3v+6fqj1afC9v0VRggeWsrDiEg/Z2ltiXJPp//4F+Ojh20RYyy7U2wtZjSM6KIrDMKBYFBIrDJJN9kQFY0E6rKc6e3d9ikzV1cSyhLQFsQeLTCDVVusSBVQUkUzyOrcoWtbrBCe+t8RR5FGew8UqDAOlaFFeoXgcNqzo4ADIIuCXRbmDA6GFhZ89Hvs0lrPSOwDwUiSW4Ft0+KZEwkMSpsZU3KKqTiSjWORPC8UJI2eDOquqx5CY0fAWs/DosZG69ccziKSRRdMFIspAwFgUEjsGsFYjW2MtXHF7PSxkTWJRD2rELlt6uSFdlKVO1nRWnOkjUhKtCsCQmNHwEJb/kvRRbz1oBYWW9dU9smh+Fgdb9wp4o0CkhIMxQEBo/ArhWIvaacCTG9NmLwIE06SHmobrKwcB1yjQorK7RV6MyGsiwiFDe30niMJavrYHE2fFdpNwUhfGVPL+uBPHvretrOBcJbPNm2R5tiBqXVyn5X3Sb/bMAyYxw4ArtUIFYtS+56wdoW5wOH5z3dE45wbodFbTYIXJes2rZiXUhj+oAk7fA+lC/bKbfLSX/r9iXf3z4C8k92GpD/souBOUMxWNRp/tvYUnm1ajilvs7BmN7GZfs9zB2CQA8I7FKBEMCs94Me+r3rJo7qhraRsDCwKwlrCH8JYzm4qZEqGxsI8lRCQSAIBIHRILBLBWJ1rn2eWONjIttS2G5D7No2G5tQ22beJoPtZEGYiIe3szo2aT/XBoEgEAR2hsAuFYgNB4VqbAEyJqI0bK1iu41NSWjDzrK29lZxIw5+WDyEE/Q2HVuuDwJB4CxDYJcKRIz3qHhM2zLYZtzKc8nPvsjJgRSpFfhO0LPhovxQKAgEgSAwKgR2qUBsrWGF7ZgOCJLsl/y2S26fRCFZde44Vp5IKAgEgSAwOgR2qUBsy/DgYqWLy46KHQKQPAPrN+yEGgoCQSAIBIEZBHapQGxd8pjiaxc7ZnXIZIsPeY/7FGdR15CfVPoWBILA3hDYpQJReWQVukOEhLOGTBLn9ouy/iMUBIJAEAgCcxDYpQJxezvD2jzw/gN+Gmeqb7Y6t3o4FASCQBAIAgsQ2LUCeVX1w5YdQkQv3cdTueiiiw4X3ffCCy+8zSWXXHLH884772m3uMUtsqXEPh5Q7hkERozAPe5xj4XyZcTDWtj1XSsQISHbmQgR2XV00RbnW8N6kQK59NJLr3z++eefd5Ob3OTVF1xwga0lQkEgCASBtRCIAlkLrs5fdsKag6SUsf5M51b6vdBWJc7IuHm/zaa1IBAEgsDJRGDXHkhD0Vnitjm3EttOtNN7Q+0DaVuq3634asVjKDHeB0a5ZxAIAkHgMgjsS4HoxJ2KJdTfVez410Wn5237kakKs9HjqeJnbPtmaT8IBIEgcFIQ2KcCgaG9oYSw3l58UGy7613TP9YNzxTPbrO+637kfkEgCASBUSGwbwUCrMPitqWHn3dJl9TNnNlw3V3eNPcKAkEgCJwEBIagQODoJL7rFDsH2rkZuyCr4r+12CFRb9jFDXOPIBAEgsBJQmAoCgSmjv6UD3lq8c8Vb7PE11oU53A8uVgSPxQEgkAQCAJrIjAkBSIf8gPFNlu8YvEHFL+o2Jbqr1lzXMd9/Qr1T+dxvL749j22m6aCQBAIAmcVAkNSIICnPFRF3a74LsVXLVZa+7TiC3p6MtagSNo7xCkUBIJAEAgCHREYmgKZHYa1GTwQazPkKTY9DveN1caViiXOQ0EgCASBILABAkNXIIbGK1HqK2/x5mIeiuNx16VX1AU2SXQSYCgIBIEgEAQ2RGAMCqQN0QFPthmxj9YjitfZjNE55HcsvmGxHYFDQSAIBIEgsCECY1Ighupwp3OLHQlr+xGluMsOp3KNdSZ3Lr54Q7xyeRAIAkEgCEwQGJsC0e0vKH5CsWoqa0cclfuDxW+d81TlTx5efGqicPLgg0AQCAJBoCcExqhA2tCFsR5abAfdGxQrAbZ+5Kj4esVPKVZp5XtP6gmvNBMEgkAQCAITBMasQNpDfFD9cN7kF6GtqxRbQ2J79gcUJ2yV6R4EgkAQ2AICJ0GBNFhshnhQ/CHFFh7aYTcUBIJAEAgCW0LgJCmQLUGUZoNAEAgCQWAeAlEgmRdBIAgEgSDQCYEokE6w5aIgEASCQBCIAskcCAJBIAgEgU4IRIF0gi0XBYEgEASCQBRI5kAQCAJBIAh0QiAKpBNsuSgIBIEgEASiQDIHgkAQCAJBoBMCUSCdYMtFQSAIBIEgEAWSORAEgkAQCAKdEIgC6QRbLgoCQSAIBIEokMyBIBAEgkAQ6IRAFEgn2HJREAgCQSAIRIFkDgSBIBAEgkAnBKJAOsGWi4JAEAgCQSAKJHMgCASBIBAEOiEQBdIJtlwUBIJAEAgCUSCZA0EgCASBINAJgSiQTrDloiAQBIJAEIgCyRwIAkEgCASBTghEgXSCLRcFgSAQBIJAFEjmQBAIAkEgCHRC4P8BUfEKQQ2Gnb4AAAAASUVORK5CYII=" /> 
```

它显示得很好。

这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T14:22:43.260

我遇到了完全相同的问题，没有为我显示任何图像 - 背景图像和内联图像。我必须`DOMPDF_ENABLE_REMOTE`在你的配置中设置为 true`dompdf_config.inc.php`

如果您启用了此功能，请注意安全风险`DOMPDF_ENABLE_PHP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:59:03.247

您是否将此代码直接加载到 dompdf 中：

```
$html = '<img src="<?php echo $_POST["sig"]; ?>" />';
$dompdf->load_html($html); 
```

或者

```
$dompdf->load_html_file(foo.php); 
```

或者您正在加载处理后的 PHP 文档：

```
$html = '<img src="' . $_POST["sig"]; . '" />';
$dompdf->load_html($html); 
```

或者

```
$dompdf->load_html_file('http://example.com/foo.php'); 
```

如果 PHP 内容在加载到 dompdf 之前没有被处理，那么它根本不会被处理。默认情况下（从 0.6.0 开始）不处理 HTML 文档中的任何 PHP 代码。您必须将 DOMPDF_ENABLE_PHP 设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T16:06:57.793

我有同样的问题。

通过设置文件更正它`dompdf_config.inc.php`：

`def ('DEBUGKEEPTEMP', true);`

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T11:59:35.800

设置`DEBUGKEEPTEMP`为 true 有效，但如果你偏执，并且担心打开它的效果，你也可以添加`self::$_cache=array();`到类的末尾`Image_Cache's clear();`

# windows - 在同一位置启动多个 Windows 资源管理器实例的批处理脚本

> ID：12543798
> 
> 赞同：5
> 
> 时间：2012-09-22T12:31:53.720
> 
> 标签：windows, batch-file

我的 Windows XP 桌面 (LaunchWindowsExplorers.bat) 上有一个批处理脚本，它应该启动几个 Windows 资源管理器实例。

它看起来像这样：

**LaunchWindowsExplorers.bat**：

```
start explorer "C:\SomeDirectory" 
start explorer "C:\SomeDirectory" 
```

当我双击文件时`LaunchWindowsExplorers.bat`

我希望看到

*   在 "C:\SomeDirectory" 中打开了两个 Windows 资源管理器实例。

相反，我看到

*   仅在“C:\SomeDirectory”中打开了一个 Windows 资源管理器实例。

* * *

我需要做什么才能让这个脚本打开两个 Windows 资源管理器实例，每个实例都在“C:\SomeDirectory”打开？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:21:31.477

您可以使用`explorer /n,"C:\SomeDirectory"`,`explorer /e,"C:\SomeDirectory"`或`explorer /root,"C:\SomeDirectory"`（取决于您想要的视图）。从此处获取的选项说明： http: [//support.microsoft.com/kb/314853](http://support.microsoft.com/kb/314853)：

> 选项功能
> 
> * * *
> 
> /n 为默认选择打开一个新的单窗格窗口。这通常是安装 Windows 的驱动器的根目录。如果窗口已经打开，则会打开一个副本。
> 
> /e 在其默认视图中打开 Windows 资源管理器。
> 
> /root,<object> 打开指定对象的窗口视图。
> 
> /select,<object> 打开带有选定文件夹、文件或程序的窗口视图。
> 
> * * *

有趣的是，这种行为（不显示同一目录的第二个窗口）似乎特定于 XP。Win7 只需启动资源管理器的第二个副本。我没有检查Vista。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T12:37:57.317

虽然我不确定解决方案，但您是否尝试将其更改为：
`start explorer "C:\SomeDirectory"`
`start explorer "C:\AnotherDirectory"`
并检查会发生什么？
我会假设正在发生的事情是启动资源管理器检查是否已经打开了一个资源管理器，如果这是错误的，它只会打开一个新的资源管理器（否则它只会重定向当前打开的资源管理器）。
抱歉，我无法提供更多帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T17:36:13.617

**我建议您在我之前尝试 wmz 的答案。我的回答是一个可怕的、肮脏的黑客攻击，只能作为最后的手段。**

我的示例脚本所做的是创建您要打开的文件夹的随机子文件夹，打开它，然后删除随机子文件夹并期望资源管理器优雅地移动到父文件夹，这是您真正想要打开的文件夹。

这太可怕了，太可怕了，太可怕了，但它适用于我的 Win7 机器。:) 不幸的是，我没有 WinXP 机器/VM 来正确测试它，如果资源管理器将文件夹锁定为正在使用，它可能会完全失败，因为它正在显示；我不记得那是什么时候改变的。此外，这种方法需要对文件夹进行写访问，并且很容易被不幸的时机、激进的防病毒软件或任何其他随机性破坏。我已经说得够多了，但是，这有多可怕？:)

```
call :ForceStartExplorerWindow .
call :ForceStartExplorerWindow .
call :ForceStartExplorerWindow .

GOTO :EOF

:: Pass The location to open as %1
:ForceStartExplorerWindow

SETLOCAL

set __ForceStartTempDir=%1\ThisShouldNeverExist-%RANDOM%
md %__ForceStartTempDir%
start explorer %__ForceStartTempDir%

:: Hope this wait is long enough for Explorer to finish loading it...
ping -n 2 localhost >NUL

:: Hope this rd works...
rd %__ForceStartTempDir%
:: FUTURE: Consider retrying upon failure.

:: End of ForceStartExplorerWindow
GOTO :EOF 
```

# apache - apache Friends xampp tomcat - 如何将新目录添加到 webapps 文件夹

> ID：12543799
> 
> 赞同：2
> 
> 时间：2012-09-22T12:32:15.257
> 
> 标签：apache, jsp, tomcat, web-applications

我是 tomcat 的新手，想创建一个 java webapp。我已经下载并安装了 XAMPP Windows 1.8.0。有一个文件夹`C:\xampp\tomcat\webapps\examples`，其中有一个文件`test.jsp`，当我通过以下 URL 访问它时，它可以工作。

`http://localhost/examples/test.jsp`

我在 webapps 目录“C:\xampp\tomcat\webapps\myapplication”中创建了另一个文件夹，其中包含相同的文件 test.jsp，但是当我通过以下 URL 访问它时

`http://localhost/myapplication/test.jsp`

出现以下错误：

```
Object not found!

The requested URL was not found on this server. If you entered the URL manually please check your spelling and try again.

If you think this is a server error, please contact the webmaster.

Error 404

localhost
Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 
```

是否需要进行一些配置才能将新文件夹添加到 tomcat？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-01T20:38:25.393

我也有同样的问题，终于找到了它发生的原因

我之前在运行 Xampp Apache 和 tomcat。之后我停止了该服务（这样认为，但有些不好）

但它产生了影响。这就是它无法加载这些的原因。

我刚刚重新启动了系统。我可以看到 tomcat 管理器页面，一切正常。它很简单。

重新启动！并且只启动tomcat服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-24T03:22:30.753

localhost 是 apache web 服务器的主机，您需要输入这种类型的地址：-

```
localhost:8080/examples/test.jsp 
```

Apache 在[http://localhost/](http://localhost/)上 运行，Tomcat 在[http://localhost:8080/上运行](http://localhost:8080/)

# mysql - QtSql创建mysql数据库

> ID：12543805
> 
> 赞同：2
> 
> 时间：2012-09-22T12:33:12.873
> 
> 标签：mysql, database, qt, qtsql

有没有办法在不指定数据库的情况下连接到数据库服务器？

如果数据库丢失，我希望能够创建一个数据库——但是 QtSql 驱动程序需要一些数据库来连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:40:09.753

那是因为您的数据库服务器也需要它。

默认情况下，MySQL 有一个名为“mysql”的数据库，但您可以将其用作默认值。

# php - 获取字符串中所有出现的子字符串

> ID：12543806
> 
> 赞同：0
> 
> 时间：2012-09-22T12:33:12.950
> 
> 标签：php, substring

我想做一件简单的事情：从字符串（即 HTML 文件）中提取代码的某些特定部分。

例如：

```
//Get a string from a website:
$homepage = file_get_contents('http://mywebsite.org');

//Then, search a particulare substring between two strings:
echo magic_substr($homepage, "<script language", "</script>");

//where magic_substr is this function (find in this awesome website):
function magic_substr($haystack, $start, $end) {

    $index_start = strpos($haystack, $start);
    $index_start = ($index_start === false) ? 0 : $index_start + strlen($start);

    $index_end = strpos($haystack, $end, $index_start); 
    $length = ($index_end === false) ? strlen($end) : $index_end - $index_start;

    return substr($haystack, $index_start, $length);
} 
```

在这种情况下，我想要获得的输出是页面上的所有脚本。但是就我而言，我只能获得第一个脚本。我认为这是正确的，因为没有任何递归。但我不知道最好的方法是什么！有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:49:55.233

试试这个从任何给定的标签或数据中提取数据在你的情况下
extractor($homepage,"script language,"script");
opps它没有正确显示脚本标签，但你定义你在你的例子中定义

```
/*****************************************************************/
/* string refine_str($str,$from,$to="")                         */
/* show data between $from and $to and also remove $from and $to */
/* if $to is not provided $from will be considered             */
/* a string to remove.                                           */
/*****************************************************************/

function extractor($str,$from,$to)
{
    $from_pos = strpos($str,$from);
    $from_pos = $from_pos + strlen($from);
    $to_pos   = strpos($str,$to,$from_pos);// to must be after from
    $return   = substr($str,$from_pos,$to_pos-$from_pos);
    unset($str,$from,$to,$from_pos,$to_pos );           
    return $return;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T13:02:50.577

```
/****************************************************************/
/*  array getSelectiveContent($content,$from,$to,$exclude="")   */
/*  return array of content between provided                    */
/*  from and to positions.                                      */
/****************************************************************/

function getSelectiveContent($content,$from,$to,$exclude="")
{
    $return = array(); // array for return elements
    $size_FROM = strlen($from); 
    $size_TO = strlen($to);
while(true)
{
    $pos = strpos($content,$from); // find first occurance of $from
    if( $pos === false )
    {
        break;  // if not exist break loop
    }
    else
    {
        $element  = extractor($content,$from,$to); // fetch first element
        if($exclude == "")
        {
            if( trim($element) != "" )
            {
                $return[] = trim($element);
            }
        }
        else
        {
            if(trim($element) != "" && !strstr($element,$exclude)) // if nothing in range, and exclude is not in it
            {
                $return[] = trim($element); // put fetched content in array.
            }
        }
        $content = substr($content,$pos+strlen($element)+$size_FROM+$size_TO); // remove $from to $to from content 
    }
}
unset($content,$from,$to,$element,$exclude,$pos,$size_FROM,$size_TO);
return $return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:12:16.693

```
$text="this is an example of text extract in from very long long text this is my test of the php";
$start="this";
$end="of";
$i=substr_count($text,$start);
$k=substr_count($text,$end);
$len1=strlen($start);
$len2=strlen($end);
$temp=$text;
for ($j=1;$j<=$i;$j++){
        $pos1=strpos($temp,$start);
    $pos2=strpos($temp,$end);
    $subs=substr($temp,$pos1+$len1,$pos2-($pos1+$len1));
    echo $subs.'<br/>';
    $temp=substr($temp,$pos2+$len2,strlen($temp)-strlen($subs));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T12:42:19.160

我喜欢从 dom-tree 获取元素的类似 Prototype/jQuery 的方式。

尝试一些[类似 jQuery 的 PHP 界面](https://stackoverflow.com/questions/1364136/jquery-like-interface-for-php)。我没有在 PHP 中尝试过。

编辑：

对于有效的 HTML/XML，请尝试[Tidy](http://php.net/manual/en/intro.tidy.php)或[HTML Purifier](http://htmlpurifier.org/) 或[htmlLawled](http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/)。

# php - Facebook 在图片上标记朋友

> ID：12543810
> 
> 赞同：-1
> 
> 时间：2012-09-22T12:33:23.663
> 
> 标签：php, facebook, api, tags

下面的代码标记只有第一个 uid 然后它显示**致命错误**：未捕获的 OAuthException：（＃100）无效参数，我可以使用确切的位置进行标记.. 如下代码 x 和 y 值以像素为单位

```
$facebook = new Facebook ( array (
        'appId' => FBAPPID,
        'secret' => FBSECRETID 
) );
$facebook->setFileUploadSupport ( true );
if (isset ( $_POST ['image'] ) && isset ( $_POST ['tname'] )) {

    $path_to_image = encrypt::instance ()->decode ( $_POST ['image'] );
    $tags = (array)encrypt::instance ()->decode ( $_POST ['tname'] );
    /*
     * Output
     $tags = array (
            0 => '[{"tag_uid":"100001083191675","x":100,"y":100},{"tag_uid":"100001713817872","x":100,"y":230},{"tag_uid":"100000949945144","x":100,"y":360},{"tag_uid":"100001427144227","x":230,"y":100},{"tag_uid":"100000643504257","x":230,"y":230},{"tag_uid":"100001155130231","x":230,"y":360}]' 
        );
     */

    $args = array (
            'message' => 'Von ',
            'source' => '@' . $path_to_image,
            'access_token' => $this->user->fbtoken 
    )
    ;
    $photo = $facebook->api ( $this->user->data->fbid . '/photos', 'post', $args ); // upload works but not tags

    if (is_array ( $photo ) && ! empty ( $photo ['id'] )) {
        echo 'Photo uploaded. Check it on Graph API Explorer. ID: ' . $photo ['id'];
        foreach ( $tags as $key => $t ) {
            $tagRe = json_encode ( $t );
            $args = array (
                    'tags' => $tagRe,
                    'access_token' => $this->user->fbtoken 
            );
            $facebook->api ( '/' . $photo ['id'] . '/tags', 'post', $args );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:02:03.460

有一件事我不明白。

你`foreach`的标签正确吗？并在`foreach`你通过它再次在一个`array`？比你`encode`吗？为什么？

第二个请提供更多细节和代码。

我只能通过这些细节来帮助你。

如果您放置以下代码。

```
foreach ( $tags as $t ) {
       echo "<pre>";
       print_r(json_encode($t));
    } 
```

你会得到以下结果

```
// encoded to json
{"tag_uid":"100001701664011","x":100,"y":100}
{"tag_uid":"100001726935992","x":100,"y":230}
{"tag_uid":"100001628449733","x":100,"y":360}
{"tag_uid":"100001286641924","x":230,"y":100}
{"tag_uid":"100001785887853","x":230,"y":230} 
```

所以你只需要这样做

```
foreach ( $tags as $t ) {
       $tagRes = json_encode($t);
    } 
```

只需将 t 传递给变量并在那里对其进行编码。

请提供更多代码

# php - iDeal 支付网关 PHP 脚本

> ID：12543813
> 
> 赞同：-1
> 
> 时间：2012-09-22T12:33:36.113
> 
> 标签：php, payment, gateway

我访问了链接[http://www.ideal.nl](http://www.ideal.nl)，寻找集成 PHP - iDeal 支付网关的电子商务网站。但是，我没有从那里找到 PHP 代码/API。此外，也没有规定创建测试/沙盒帐户来访问所需的密钥和凭据。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:57:09.503

[http://www.ideal.nl/acceptant/?s=hoe#q1](http://www.ideal.nl/acceptant/?s=hoe#q1)

您需要联系银行或 Collecterende 支付服务提供商 (CPSP) 以进行实施。有关认可银行或 CPSP 的列表，请参见此处： [http ://www.currence.nl/nl-NL/OverOnzeProducten/LicentieEnCertificaathouders/Pages/iDEAL.aspx](http://www.currence.nl/nl-NL/OverOnzeProducten/LicentieEnCertificaathouders/Pages/iDEAL.aspx)

编辑：快速谷歌搜索： [http](http://www.ideal-simulator.nl/ideal-professional-implementatie-handleiding.html) ://www.ideal-simulator.nl/ideal-professional-implementatie-handleiding.html （荷兰语）

# asp.net - 首次加载 web 表单时填充 GridView 和 DetailsView

> ID：12543817
> 
> 赞同：0
> 
> 时间：2012-09-22T12:34:09.180
> 
> 标签：asp.net, vb.net, gridview, webforms, detailsview

在同时具有摘要 GridView 和 DetailsView 的表单上，我们希望在页面最初显示时让 DetailsView 填充数据，而无需用户单击 GridView 中的“选择按钮”。

如果可以做到这一点，你能展示所需的编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:54:05.087

你可以做以下...

在 page_load() 中加载页面时，检查页面是否回发 == false；

在那得到第一行的主键字段值。

```
E.g FirstRowValue = YourGried.DataSource.Table[0].Row[0][PrimaryKey]; 
```

然后使用该值绑定详细视图。

```
E.g YourDetailView.DataSource =  GetDetailById(FirstRowValue);
YourDetailView.Databind(); 
```

这是一个简单的逻辑，它会起作用。

对其进行编码，如果不起作用，请粘贴它...我不是故意放代码；）

# java - JBoss 7.1.1：log4j 配置

> ID：12543820
> 
> 赞同：2
> 
> 时间：2012-09-22T12:34:48.527
> 
> 标签：java, logging, log4j, jboss7.x

我正在尝试为 JBoss 7.1.1 配置日志记录。我有一个定义明确的 log4j.xml，它适用于 JBoss 4。这个 xml 文件为我的应用程序的各种类别配置日志记录。我的目标是使用该文件而不是[在 Standalone.xml 中进行配置](https://community.jboss.org/message/622614)。

这是我试图让它在 JBoss 7.1.1 中工作的内容

*   通过添加更改了standalone.conf.bat `-Dlog4j.configuration=file:<path to log4j.properties>`。这没有用。这是因为standalone.bat最后重新定义了它如下：

`:RESTART "%JAVA%" %JAVA_OPTS% ^ "-Dorg.jboss.boot.log.file=%JBOSS_LOG_DIR%\boot.log" ^ "-Dlogging.configuration=file:%JBOSS_CONFIG_DIR%/logging.properties" ^ -jar "%JBOSS_HOME%\jboss-modules.jar" ^ -mp "%JBOSS_MODULEPATH%" ^ -jaxpmodule "javax.xml.jaxp-provider" ^ org.jboss.as.standalone ^ -Djboss.home.dir="%JBOSS_HOME%" ^ %*`

*   然后，我在上面的脚本中将值从 logging.properties 更改为 log4.xml，这似乎不起作用。
*   然后我向 jboss-deployment-structure.xml 添加了[排除项](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration?)，但它不起作用

问题：

*   有没有办法在不更改默认standalone.xml 的情况下配置日志记录？
*   有没有办法将我的配置放入`configuration`文件夹的 logging.properties 中？

欢迎提供更多见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:08:28.297

您可以使用 log4.xml 在应用程序中配置日志记录，但不能使用 log4j 配置在服务器级别配置日志记录。

在大多数情况下，您将能够将 log4j 配置转换为standalone.xml 配置。当前的一个警告是使用 log4j 附加程序。虽然有一些等效的处理程序，但并未涵盖所有附加程序。

这就是说，如果你觉得麻烦，并且想从源代码构建，在[JBoss AS 上游](https://github.com/jbossas/jboss-as)甚至[7.1.3.Final 标记](https://github.com/jbossas/jboss-as/zipball/7.1.3.Final)中，你可以将 log4j 附加程序定义为自定义处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T12:20:54.537

```
i am also facing same problem. My application has log4j.properties files, and not able to create the log files configured in properties. please let me know how you have been resolved the issue.

    My application deployed on Jboss AS 7.1.1\. 

My application log4j.properties file: 
    ############################
    # Log configuration file .
    ############################

    log4j.rootLogger=debug

    log4j.logger.com.fourthdti=debug, filePerfLog

    log4j.appender.filePerfLog=org.apache.log4j.FileAppender
    log4j.appender.filePerfLog.File=filePerfLog.log
    log4j.appender.filePerfLog.layout=org.apache.log4j.PatternLayout
    log4j.appender.filePerfLog.layout.ConversionPattern=%d %-5p - %X{requestId} - {%c{1}} - %m%n
    log4j.appender.filePerfLog.MaxFileSize=10MB
    log4j.appender.filePerfLog.MaxBackupIndex=5
    log4j.appender.filePerfLog.DatePattern=DAY.TOP.1 
```

# xcode - iOS6移植后UIViewController的图像坐标旋转问题

> ID：12543827
> 
> 赞同：1
> 
> 时间：2012-09-22T12:36:06.237
> 
> 标签：xcode, ipad, frame, ios6, screen-rotation

我正在为 iPad 开发一个标签栏应用程序。我在窗口顶部有一个带有图像的 UiViewController 选项卡，并且在旋转事件中我正确设置了图像框架。

```
img.frame = CGRectMake(0, 0, 768, 169); //Portrait
...
img.frame = CGRectMake(0, 0, 1024, 169); //Landscape 
```

升级到 iOS6 后，当用户进行旋转时，图像进入导航栏下方。

我试图将框架的 y 位置强制为 44（0 + 导航栏高度），这对于旋转很有效，但在第一次加载时不行，因为图像框架像我移动了一样向下移动它的88像素。

```
int y = 44;
if ([Functions getDeviceOrientationIsPortrait]) { //a function to retrieve the device orientation...
    img.frame = CGRectMake(0, 0+y, 768, 169);
} else {
    img.frame = CGRectMake(0, 0+y, 1024, 169);
} 
```

# java - cloudbess部署应用后内部错误如何解决

> ID：12543828
> 
> 赞同：1
> 
> 时间：2012-09-22T12:36:08.637
> 
> 标签：java, spring, tomcat, spring-mvc, cloudbees

我一直在开发一个本地运行良好的应用程序。但不知何故，在云上部署后，出了点问题。这是我的日志，

```
 a:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:653)
at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:647)
at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
at org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
at org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
at org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
at org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
at org.apache.jsp.WEB_002dINF.layouts.default_jspx._jspx_meth_tiles_005finsertAttribute_005f2(default_jspx.java:224)
at org.apache.jsp.WEB_002dINF.layouts.default_jspx._jspService(default_jspx.java:87)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
at org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at net.stax.appserver.webapp.RequestMonitorValve.invoke(RequestMonitorValve.java:35)
at net.stax.appserver.admin.StaxApplicationQueryValve.invoke(StaxApplicationQueryValve.java:49)
at net.stax.appserver.webapp.RequestSetupValve.invoke(RequestSetupValve.java:31)
at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:647)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

你能帮我指出这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:58:03.087

问题的可能原因是您的开发环境和云服务器上的 Tomcat 安装之间的库文件（/lib 文件夹中的 jar 文件）存在差异。查看完整的堆栈跟踪后，我认为这可能是 Spring 安全配置问题，因为您从`org.springframework.security.web.FilterChainProxy`

我最近开始使用 appfog 对我的应用程序进行云部署，并且无法直接访问 Tomcat 安装目录，这让我感到沮丧。在传统服务器或 VPS 上工作时，很容易使用 SFTP 或 SSH 下载和查看日志文件并验证 Tomcat /lib 目录的内容。云服务可能不允许这种访问。

您可能希望将我的 Servlet 日志查看器添加到您的应用程序中，然后您将能够在浏览器中轻松查看或下载整个日志文件。如果您也没有直接访问权限，您可以轻松修改我的 LogViewer 代码以列出 /lib 文件夹的内容。

还要检查您的 Spring 配置文件，因为这似乎是您的错误的可能原因。

[下载 FogLog 源代码：Servlet 日志查看器](https://github.com/thornworks/Servlet-LogViewer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:25:07.320

您可以使用 cloudbees SDK：bees app:run yourapp.war，使用非常相似的容器设置来测试基于 tomcat 的应用程序。

如果您的应用程序最初不是为 tomcat 6 设计的，这将有助于调试配置问题或设置与容器相关的调整。

# jquery - 需要关于移动触摸事件的简单答案吗？

> ID：12543829
> 
> 赞同：1
> 
> 时间：2012-09-22T12:36:11.207
> 
> 标签：jquery, html, events, mobile, touch

在大学里，我的任务是为移动设备制作杂志应用程序。我隐约熟悉 HTML5、CSS 和 JQuery[basic]。

我需要知道的是如何在 HTML5 中发起一个简单的滑动事件？例如，如果我有两张图片，我想从第一张滑动到第二张，或者简单的如何在 HTML5 页面之间滑动？我曾尝试查看此处和其他网络资源，但我认为我需要一个基本示例，这些在线示例对我来说毫无意义。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:41:57.847

您可以尝试一些 JavaScript 触控库，

jQTouch：http: [//jqtouch.com/](http://jqtouch.com/)

jQuery UI 触摸打孔：[http ://touchpunch.furf.com/](http://touchpunch.furf.com/)

jQuery 移动：http: [//jquerymobile.com/](http://jquerymobile.com/)

还有一个 Apple 文档解释了支持的触摸事件列表， [http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/ TP40006511-SW5](http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW5)

# c# - 在 WinRT 中挂起应用程序后恢复 CaptureElement

> ID：12543831
> 
> 赞同：3
> 
> 时间：2012-09-22T12:36:34.153
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, webcam

我正在开发一个可以让您与网络摄像头交互的 Metro 应用程序。只有一个问题，当应用程序在后台传递时，网络摄像头会关闭。为了解决这个问题，我使用了这段代码：

```
Window.Current.VisibilityChanged += Current_VisibilityChanged;

async void Current_VisibilityChanged(object sender, Windows.UI.Core.VisibilityChangedEventArgs e)
{
    try
    {
        if (e.Visible)
            await mediaCaptureMgr.StartPreviewAsync();
        else
            await mediaCaptureMgr.StopPreviewAsync();
    }
    catch { }
} 
```

它在调试时工作得很好，但是如果应用程序正常启动，代码会被执行，但是一旦我把应用程序带到前台，网络摄像头就不会再次激活。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:50:08.610

代码在调试模式下运行，因为您的应用程序从未真正挂起。正常执行时，应用程序会暂停，然后在正常进程生命周期中恢复。从暂停更改为恢复不会触发`VisibilityChanged`事件。如果您在调试时使用 Visual Studio 中的暂停/恢复按钮，您应该会看到代码失败，就像在正常执行期间一样。

您需要将代码移动到*App.xaml.cs*`OnLaunched`中的方法中。请注意，您需要考虑应用程序可能被终止并需要重新初始化整个媒体捕获器对象。

# python - Python：迭代列表与字典项目效率

> ID：12543837
> 
> 赞同：13
> 
> 时间：2012-09-22T12:38:16.943
> 
> 标签：python, performance, list, dictionary

迭代是否`some_dict.items()`与迭代 CPython 中相同项目的列表一样有效？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-22T12:44:32.527

这取决于您使用的 Python 版本。在 Python 2 中，`some_dict.items()`创建一个新列表，这会占用一些额外的时间并占用额外的内存。另一方面，一旦创建列表，它就是一个列表，因此在列表创建开销完成后应该具有相同的性能特征。

在 Python 3 中，`some_dict.items()`创建一个视图对象而不是列表，我预计创建和迭代`items()`会比在 Python 2 中更快，因为不需要复制任何内容。但我*也*预计迭代一个已经创建的视图会比迭代一个已经创建的列表要慢一些，因为字典数据存储得有些稀疏，我相信 python 没有好的方法来避免迭代每个 bin字典——即使是空的。

在 Python 2 中，一些时间证实了我的直觉：

```
>>> some_dict = dict(zip(xrange(1000), reversed(xrange(1000))))
>>> some_list = zip(xrange(1000), xrange(1000))
>>> %timeit for t in some_list: t
10000 loops, best of 3: 25.6 us per loop
>>> %timeit for t in some_dict.items(): t
10000 loops, best of 3: 57.3 us per loop 
```

迭代的`items`速度大约是原来的两倍。使用`iteritems`速度有点快...

```
>>> %timeit for t in some_dict.iteritems(): t
10000 loops, best of 3: 41.3 us per loop 
```

但是迭代列表本身与迭代任何其他列表基本相同：

```
>>> some_dict_list = some_dict.items()
>>> %timeit for t in some_dict_list: t
10000 loops, best of 3: 26.1 us per loop 
```

`items`Python 3 可以比 Python 2 更快地创建和迭代（与上面的 57.3 us 相比）：

```
>>> some_dict = dict(zip(range(1000), reversed(range(1000))))
>>> %timeit for t in some_dict.items(): t      
10000 loops, best of 3: 33.4 us per loop 
```

但是创建视图的时间可以忽略不计；迭代实际上比列表慢。

```
>>> some_list = list(zip(range(1000), reversed(range(1000))))
>>> some_dict_view = some_dict.items()
>>> %timeit for t in some_list: t
10000 loops, best of 3: 18.6 us per loop
>>> %timeit for t in some_dict_view: t
10000 loops, best of 3: 33.3 us per loop 
```

这意味着在 Python 3 中，如果您想对字典中的项目进行多次迭代，并且性能至关重要，您可以通过将视图缓存为列表来获得 30% 的加速。

```
>>> some_list = list(some_dict_view)
>>> %timeit for t in some_list: t
100000 loops, best of 3: 18.6 us per loop 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T12:46:40.360

一个小基准向我展示了迭代列表肯定更快。

```
def iterlist(list_):
    i = 0
    for _ in list_:
        i += 1
    return i

def iterdict(dict_):
    i = 0
    for _ in dict_.iteritems():
        i += 1
    return i

def noiterdict(dict_):
    i = 0
    for _ in dict_.items():
        i += 1
    return i

list_ = range(1000000)
dict_ = dict(zip(range(1000000), range(1000000))) 
```

在 Python 2.7 (Kubuntu) 上使用 IPython 进行测试：

```
%timeit iterlist(list_)
10 loops, best of 3: 28.5 ms per loop

%timeit iterdict(dict_)
10 loops, best of 3: 39.7 ms per loop

%timeit noiterdict(dict_)
10 loops, best of 3: 86.1 ms per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T03:01:45.317

Although iterating through `some_list` is 2x speedup than `some_dict.items()`, but iterating through `some_list` by index is almost as same as iterating through `some_dict` by key.

```
K = 1000000
some_dict = dict(zip(xrange(K), reversed(xrange(K))))
some_list = zip(xrange(K), xrange(K))
%timeit for t in some_list: t
10 loops, best of 3: 55.7 ms per loop
%timeit for i in xrange(len(some_list)):some_list[i]
10 loops, best of 3: 94 ms per loop
%timeit for key in some_dict: some_dict[key]
10 loops, best of 3: 115 ms per loop
%timeit for i,t in enumerate(some_list): t
10 loops, best of 3: 103 ms per loop 
```

# video - 从视频中获取字幕（avi、mp4、mkv 等）

> ID：12543839
> 
> 赞同：0
> 
> 时间：2012-09-22T12:38:24.153
> 
> 标签：video, mp4, avi, subtitle, mkv

是否可以使用第三方软件的某些库或 API 从流行的视频文件格式（*.mp4、*.mkv、*.avi 等）中获取字幕？首选语言是 Java，但这不是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:27:11.583

最近我在研究 ffmpeg，你可以从[这里](http://ffmpeg.org/)找到一些信息。据我所知，ffmpeg 可以将字幕提取为视频文件的 txt 流。但我不确定是否难以使用 ffmpeg 来满足您的要求。我只是看看你可以在 ffmpeg 开源代码中找到的文件 ffplay.c。我找到了一些代码如下

```
switch(avctx->codec_type){
    case avmedia_type_audio:
        is->last_audio_stream = stream_index; 
        if(audio_codec_name) 
            codec = avcodec_find_decoder_by_name(audio_codec_name); 
        break;
    case avmedia_type_subtitle:
        is->last_subtitle_stream = stream_index; 
        if(subtitle_codec_name) 
           codec = avcodec_find_decoder_by_name(subtitle_codec_name); 
        break;
    case avmedia_type_video: 
        is->last_video_stream = stream_index; 
        if(video_codec_name) 
            codec = avcodec_find_decoder_by_name(video_codec_name); 
        break;
} 
```

和 ffplay.c 文件中的 grep 'subtitle'，您将找到更多信息。

希望它有所帮助，希望ffmpeg有所帮助。

# java - java和同步

> ID：12543843
> 
> 赞同：4
> 
> 时间：2012-09-22T12:39:18.083
> 
> 标签：java, synchronization

我正在准备 SCJP 考试，但无法完全理解同步。在第 6 行，我读到 main 中运行的线程需要锁定“b”。为什么它需要锁定这个对象？我的理解是，同步的代码块是一个保护区，任何时候只有一个线程可以进入？继续前进，main 中的线程释放此锁并等待 'b 中的线程完成其 run 方法。然后，'b' 中的线程用于通知 main 中的线程它已完成。但是，它看起来并没有在这里通知任何特定的线程。这个例子来自 Sierra 和 Bates SCJP 的书。任何可以阐明这一点的光都将不胜感激。谢谢

```
class ThreadA {  
    public static void main(String [] args) {  
        ThreadB b = new ThreadB();  
        b.start();  

        **synchronized(b) {  //line 6**
            try {  
                System.out.println("Waiting for b to complete...");  
                b.wait();  
            } catch (InterruptedException e) {}  
                System.out.println("Total is: " + b.total);  
            }  
        }  
    }  
}

class ThreadB extends Thread {     
    int total;  

    public void run() {  
        System.out.println("K");  
        synchronized(this) {  
            for(int i=0;i<100;i++) {  
                total += i;  
            }  
            notify();  
        }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:43:41.787

两个线程在这里同步`Object`，即`b`. `main()`首先获取锁，然后调用， `b.wait()`释放锁并等待有人调用`notify()`。`b`

这意味着当`run()`方法（在这种情况下被调用 on `b`）调用`notify()`时， this 将再次唤醒该`main()`方法。

所以，获得锁在`b`这里并不重要，重要的是两个线程都获得相同的锁，否则`wait()/notify()`合作将无法进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T12:43:50.730

> 在第 6 行，我读到 main 中运行的线程需要锁定“b”。为什么它需要锁定这个对象？

因为这就是那条线的作用。它获取该资源。其他线程可以获得其他同步块，但没有其他线程可以获取该对象的锁。

> 它看起来不像在这里通知任何特定线程。

这是真实的。该程序不知道将通知哪个线程，甚至不知道是否会通知任何线程。作为开发人员，您可能会得出结论，有一个特定的线程将被通知，可能是因为它是唯一的线程等待（）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T12:45:17.543

这是一个非常极端的案例，你不会**那样**做。
发生的事情是`main`线程在`ThreadB`对象和`wait`.
当`ThreadB`完成时 a`notify`被提升并因此`main`被唤醒并继续。
但这不是您通常会编写的代码，即使用`Thread`对象用于`synchronization`.
要查看这是多么极端的情况，只需`notify`从`ThreadB`.
由于您在`Thread`对象上同步并且实现在 a 完成后引发通知，因此代码仍然可以工作`Thread`。
这种行为违反直觉且容易出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:20:52.813

该代码利用`wait()`机制来确保`result`由 other 计算`ThreadB`。

要等待对象，您需要获得对该对象的锁定，即`line 6`出现`synchronized (b)`在图片中的位置。

执行相同程序的更好方法是使用[Thread#join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)方法。

```
public final void join()
            throws InterruptedException

Waits for this thread to die. 
```

# jquery - jquery 访问函数/插件在不同的文件中而不使用选择器

> ID：12543847
> 
> 赞同：1
> 
> 时间：2012-09-22T12:39:45.123
> 
> 标签：jquery

我无法弄清楚为什么我会收到错误：

> 错误：TypeError：$.showMessage 不是函数

文件 1：

```
(function($) {
    $.fn.showMessage = function(message, type, delay) {
        var $messages = $("#messages");
        type = (typeof type == 'undefined') ? 'info' : type;
        delay = (typeof delay == 'undefined') ? 0 : delay;

        var message_html = '<div class="messages"><ul>' +
                                '<li class="'+ type +'">' +
                                '<p>' + message + '</p><a href="#" class="close"></a>' +
                            '</li></ul></div>';         

        if($messages.length){
            $messages.html(message_html).hide().delay(delay).fadeIn("fast");
        } else {
            $("#main h1").before(message_html).hide().delay(delay).fadeIn("fast");
        }
        return this;
    };
})(jQuery); 
```

文件 2：

```
(function($) {
    $.showMessage('test','success');
})(jQuery); 
```

注意：如果我有一个 each() 并使用一个选择器，它工作正常`$("#messages").showMessage('test','success');`。我在某处读到您总是需要返回，`this`尽管没有 each() 无法弄清楚如何做到这一点

下面的版本工作正常，虽然我真的需要 each 并传递一个选择器吗？

```
$.fn.showMessage = function(message, type, delay) {
   return this.each(function() {
      var $this = $(this);
        type = (typeof type == 'undefined') ? 'info' : type;
        delay = (typeof delay == 'undefined') ? 0 : delay;

        var message_html = '<div class="messages"><ul>' +
                                '<li class="'+ type +'">' +
                                '<p>' + message + '</p><a href="#" class="close"></a>' +
                            '</li></ul></div>';         

        if($this.length){
            $this.html(message_html).hide().delay(delay).fadeIn("fast");
        } else {
            $("#main h1").before(message_html).hide().delay(delay).fadeIn("fast");
        }
   });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:56:16.960

当您使用该构造`$.fn.showMessage`时，您正在声明一个名为的 jQuery 插件`showMessage`，该插件将作用于给定的[上下文](http://docs.jquery.com/Plugins/Authoring)，例如`$("#main").showMessage`. 要声明一个可以以*静态方式调用的**插件*，即辅助方法，您需要在命名空间*之外*声明它：**`$.fn`**

 **```
(function($) {
    $.showMessage = function(message, type, delay) {
      // ...
    }
})(jQuery); 
```**

# html - 如果输入标签没有名称，表单数据是否仍会传输？

> ID：12543848
> 
> 赞同：60
> 
> 时间：2012-09-22T12:39:47.037
> 
> 标签：html, webforms, forms

出于效率目的，我想知道如果您省略 name 属性或将其设置为 null，textarea 中的文件或文本是否仍会传输到服务器。例如

```
<input type="file" id="file" name="">
<textarea id="text" name=""> 
```

我注意到如果您这样做，服务器上的数据将不可用。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-22T12:47:37.093

如果我理解正确的话，W3C 规范要求每个表单输入元素都有一个`name`指定的属性。否则，该元素将不会被处理。[来源](http://www.w3.org/TR/html401/interact/forms.html#successful-controls)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-10-10T20:37:57.503

不。

我在所有浏览器中检查了这一点 - 来自浏览器的 POST/GET 请求中缺少名称为空/缺少名称的字段。他们是否有 id 并不重要（我的想法是浏览器可能使用 id 作为名称，但没有）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-10T16:42:30.903

它不会直接工作，但您可以通过 JavaScript 中的 AJAX 调用来分配它们，idk 真的知道这在现实世界中是否真的有任何应用程序（一个可能是服务器期望的参数的混淆）

有

```
<form id="login" method="post" action="someurl">
 <input id="username" type="text" /> 
 <input id="password" type="password" />
 <input type="submit" value="login" />
</form> 
```

要处理的 JS 将是（使用 jQuery 处理 ajax）

```
$("#login").on("submit",function(ev){
  $.post("someurl",{
    usrn: $("#username").val,
    pwd: $("#password").val       
  },function(ev){
          //this is the callback function that runs when the call is completed successfully
  });
}
/*second argument on $.post is and object with data to send in a post request 
usrn would be the name of the parameter recived in the server 
same for pwd "#username" and  "#password" are the id's html attribute for the field
'.val' is the jquery object's attribute in which jquery access the value in the text box
"$()" or it's equivalent "jQuery()" works like an object constructor that fills 
the attributes with the
DOM data that cover the css selector that this function expects as a parameter*/ 
```

请注意代码可能不完全正确，因为我没有测试它，但它背后的逻辑应该是不言自明的

# jquery - 单击jQuery更改图像

> ID：12543854
> 
> 赞同：1
> 
> 时间：2012-09-22T12:40:29.353
> 
> 标签：jquery, ajax, click

我有这个 jQuery 幻灯片代码 - 编辑 - 抱歉，伙计们抓错了代码：/ 继承人的实际代码

```
<script type="text/javascript"> 

     $(document).ready(function() {
        $(".slidingDiv").hide();  
        $('.secondarytitle').click(function() {  
           $(this).closest('tr').siblings('.slidingDiv').slideToggle(); 
        });  
     });

</script> 
```

我必须为点击功能提供图像，这将是一个

```
<table>
  <tr>
    <th class="image1">Welcome</th>
  </tr>
  <tr>
    <td></td>
  </tr>
</table> 
```

我想做的是当点击对象时它会改变图像，一旦再次点击它就会变回原始图像。任何建议都会对我有用。即使您建议使用不同的代码来滑动内容。多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:54:43.590

试试这个方法

```
var imgSRC={'src1':'URL_1','src2': 'URL_2' }

$('.image1').click(function(){
   if($(this).attr('src')==imgSRC.src1){
       $(this).attr('src',imgSRC.src2)
   }else{
       $(this).attr('src',imgSRC.src1)
   }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T13:09:17.183

只是安东的答案略有变化。您可以使用`toggle()`不需要检查 img src 的方法

```
var imgSRC={'src1':'URL_1','src2': 'URL_2' }

$('.image1').toggle(function(){
      $(this).attr('src',imgSRC.src2)
   }, function() {
       $(this).attr('src',imgSRC.src1)
   }
}); 
```

# java - 将 Eclipse e4 应用程序的窗口设置为具有整个屏幕大小

> ID：12543858
> 
> 赞同：8
> 
> 时间：2012-09-22T12:40:41.553
> 
> 标签：java, eclipse, swt, eclipse-rcp

我如何定义`Application.e4xmi`我希望我的窗口具有整个可用屏幕的大小？我们应该在的 中
添加什么值？ 我试过了，但它不起作用。 有任何想法吗？ `Bounds(x,y,w,h)``Trimmed Window`
`-1,-1,-1,-1`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T13:53:25.303

将标签添加`shellMaximized`到您的补充选项卡中，`TrimmedWindow`如下所示：

![截屏](../Images/0ad17e1db4da00a64b773a802af05d53.png)

有关更多信息，请参阅 Lars Vogel 的[Eclipse 4 RCP - 教程](http://www.vogella.com/articles/EclipseRCP/article.html#model_supplementary)。

# python - Python：selenium.webdriver 问题（服务器上没有 X）

> ID：12543861
> 
> 赞同：3
> 
> 时间：2012-09-22T12:40:47.437
> 
> 标签：python, webdriver, voip

我拼凑了以下脚本，以在远程 Asterisk / Vicidial 服务器上生成每日报告。该脚本从报告中获取源，执行一些格式化，将结果保存为文本文件，然后通过 smtp 将其发送给我的老板进行审查。我目前在本地的 cron 作业上运行脚本，它运行良好，但是我希望能够在我的 VPS 上运行它；问题是，脚本会弹出一个 Firefox 窗口，并且 VPS 没有 X 或任何类型的 GUI，因此，Firefox 将无法打开，并且无法检索数据。

澄清一下，我安装了 Firefox 和所有必需的模块，并且 VPS 与我的本地机器 bar X 和 GUI (Debian Lenny) 基本相同。

如果有人可以提供有关如何修改此脚本以便在没有 X / GUI 的情况下工作的任何帮助，将不胜感激！

谢谢，托比。

```
import contextlib
import selenium.webdriver as webdriver
import lxml.html as LH
import lxml.html.clean as clean
import csv 
import sys
import smtplib
from email.mime.text import MIMEText
import email.mime.application
import email
import mimetypes
import datetime

date=datetime.date.today()

url="http://myuser:mypass@ipaddress"+ str(date) + "some_other_string"

ignore_tags=('script','noscript','style')
with contextlib.closing(webdriver.Firefox()) as browser:
    browser.get(url)
    content=browser.page_source
    cleaner=clean.Cleaner()
    content=cleaner.clean_html(content)    
    with open('vicidial_data.html','w') as f:
       f.write(content.encode('utf-8'))
    doc=LH.fromstring(content)
    with open('grab_raw.txt','w') as f:
        for elt in doc.iterdescendants():
            if elt.tag in ignore_tags: continue
            text=elt.text or ''
            tail=elt.tail or ''
            words=' '.join((text,tail)).strip()
            if words:
                words=words.encode('utf-8')
                f.write(words+'\n') 

grab=open( 'grab_raw.txt', 'r' )
grab_list=grab.readlines()
grab.close()
del grab_list[0:21]
grab_out=open("Vicidial_Report-"+str(date)+".txt", 'w')
grab_out.writelines(grab_list)
grab_out.close()

msg=email.mime.Multipart.MIMEMultipart()
msg['Subject']='Vicidial call-report' 
msg['From']='me@mycomapny.com'
msg['To']='myboss@mycompany.com'

body = email.mime.Text.MIMEText("Please find attached call-report for " + str(date))
msg.attach(body)

filename= "Vicidial_Report-"+str(date)+".txt"
fp=open(filename,'rb')
att = email.mime.application.MIMEApplication(fp.read(),_subtype="text")
fp.close()
att.add_header('Content-Disposition','attachment',filename=filename)
msg.attach(att)

s = smtplib.SMTP('smtp.gmail.com')
s.starttls()
s.login('mygmaillogin@mycompanydomain.com','mypassword')
s.sendmail('me@mycompanydomain.com',['myboss@mycompanydomain.com', 'someoneelse@mycompanydomain.com', ],     msg.as_string())
s.quit() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:52:10.610

[Corey Goldberg 解释了](http://coreygoldberg.blogspot.com/2011/06/python-headless-selenium-webdriver.html)如何使用 pyvirtualdisplay 来做到这一点。

但是，您需要能够安装 pyvirtualdisplay、xvfb 和 xserver-xephyr。

```
import contextlib
import selenium.webdriver as webdriver
display = pyvirtualdisplay.Display(visible = False, size = (800, 600))
display.start()
with contextlib.closing(webdriver.Firefox()) as driver:    
    driver.get('http://www.google.com')
    print driver.title
    # Google
display.stop() 
```

在 Ubuntu/Debian 上，可以安装必要的软件包

```
sudo apt-get install python-setuptools
sudo apt-get install xvfb
sudo apt-get install xserver-xephyr
sudo easy_install pyvirtualdisplay 
```

# android - 片段的 JUnit

> ID：12543866
> 
> 赞同：3
> 
> 时间：2012-09-22T12:42:00.673
> 
> 标签：android, junit, android-fragments

当我尝试包含 Fragment 类时出现此错误。

**有界不匹配：FirstFragment 类型不是 ActivityInstrumentationTestCase2 类型的有界参数的有效替代品**

我的代码如下：

```
package com.example.firstactivity.test;

import com.example.firstactivity.FirstFragment;

import android.test.ActivityInstrumentationTestCase2;

public class TestFirstFragment extends ActivityInstrumentationTestCase2<FirstFragment> {

    private FirstFragment mFragment;

    public TestFirstFragment(Class activityClass) {
        super(activityClass);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        mFragment = getActivity();
    }

    @Override
    protected void tearDown() throws Exception {
        super.tearDown();
    }

    public final void testPreconditions() {
        assertNotNull(mFragment);
    }

} 
```

请提出解决此问题的方法。与活动一起工作时效果很好......我已经阅读了一些SO问题。[FragmentActivity Junit 测试](https://stackoverflow.com/questions/6491270/fragmentactivity-junit-testing)，但要么他们没有回答我的问题，要么我无法关注他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T06:44:18.060

我也有同样的问题。事实证明，唯一可以替代参数“T”的类应该扩展“FragmentActivity”。或者在我的情况下，在清单中声明为“main”和“launcher”的主类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T01:34:07.787

为了像您一样使用 ActivityInstrumentationTestCase2，FirstFragment 需要以某种方式扩展 Activity。执行此操作的片段类之一是 FragmentActivity。我假设您正在使用其他一些片段类，这就是您收到错误的原因。

# c++ - 虚函数调用的优化

> ID：12543870
> 
> 赞同：3
> 
> 时间：2012-09-22T12:42:14.990
> 
> 标签：c++, optimization, virtual-functions, vtable

我有一个关于优化虚函数调用的问题。我在某处读过（问题是我现在找不到这篇文章），可以通过使用类似于以下的构造来优化 v-table 查找：

```
// Base.h
class Base
{
public:
    virtual void Foo() = 0;
};

// Concrete.h
class Concrete : public Base
{
public:
    virtual void Foo()
    {
        // do something;
    }
};

//Some.h
extern Base* const g_object;

// Some.cpp
Concrete on_stack_concrete;

Base* const g_object = &on_stack_concrete; 
```

诀窍应该是使用指向分配在堆栈上的变量的 const 指针（不是动态的），并且编译器肯定会优化它。因此，每当用户调用 g_object->Foo() 时， //do something 部分将被执行，而无需查找 v-table。

这是真的还是假的？

提前感谢任何重播。

编辑：

这种构造的可能用途是限制具体实现的接口。当然，人们可以争辩说“受限”方法应该是私有的，但有时库的其他模块需要访问对象的那些公共附加方法，而不允许用户操作这些方法。因此，例如使用#defines，可以创建类似于以下内容的代码：

```
// Some.cpp
#ifdef _WIN32
Win32Concrete concrete;
#elif defined _UNIX
UnixConcrete concrete;
#endif

Base* const g_global = &concrete; 
```

事实上，这些类的声明只能在 CPP 文件中定义，因此用户不知道它们的存在。

问题不是首先*为什么*要使用这样的常量指针，而是在这种情况下是否可以优化 v-table 查找。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:54:12.847

你似乎在滥用`virtual`.

`virtual`实现运行时多态性。而且您描述的场景不需要或不需要。`Win32Concrete`两者都不太可能`UnixConcrete`存在于任何编译环境中。

代替：

```
// Some.cpp
#ifdef _WIN32
Win32Concrete concrete;
#elif defined _UNIX
UnixConcrete concrete;
#endif

Base* const g_global = &concrete; 
```

利用：

```
// CommonHeader.h
#ifdef _WIN32
typedef Win32Concrete Concrete;
#elif defined _UNIX
typedef UnixConcrete Concrete;
#endif 
```

现在你的函数不需要是虚拟的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-21T08:28:12.203

这是 Doom 3 源代码 ( [https://github.com/id-Software/DOOM-3-BFG/](https://github.com/id-Software/DOOM-3-BFG/) ) 中使用的方法，例如 neo/framework/FileSystem.h 定义了这个：

```
extern idFileSystem *       fileSystem; 
```

neo/framework/FileSystem.cpp 定义了这个：

```
idFileSystemLocal   fileSystemLocal;
idFileSystem *      fileSystem = &fileSystemLocal; 
```

我能找到的唯一讨论是： http: [//fabiensanglard.net/doom3/](http://fabiensanglard.net/doom3/)

> idTech4 高级对象都是具有虚拟方法的抽象类。这通常会影响性能，因为在运行时调用它之前，必须在 vtable 中查找每个虚拟方法地址。但是有一个“技巧”可以避免这种情况。
> 
> 由于在数据段中静态分配的对象具有已知类型，因此编译器可以在调用 commonLocal 方法时优化 vtable 查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T13:32:13.847

解决这个问题的最简单方法是让需要访问受限方法的类成为 Concrete 类的朋友。然后他们可以完全访问课程，而其他人只能获得公共访问权限。

如果这不切实际，您可以将实现放在所有受保护方法的基类中，然后派生一个公开受保护方法的特殊类。

```
class Concrete
{
public:
    void foo() { ... }
protected:
    void bar() { ... }
};

class ConcretePrivate : public Concrete
{
public:
    void bar() { Concrete:: bar(); }
};

ConcretePrivate g_globalPrivate;
Concrete& g_global = g_globalPrivate; 
```

使用的代码`g_global`只能访问具体方法。使用的代码`g_globalPrivate`可以访问 ConcretePrivate 方法。

# c# - ASP.NET 中的记忆

> ID：12543872
> 
> 赞同：1
> 
> 时间：2012-09-22T12:42:25.500
> 
> 标签：c#, asp.net, caching, concurrency, memoization

我有一个程序集，它计算一个复杂的数学值。此程序集由 ASP.NET 应用程序使用（但没有对 的引用`System.Web`，因此无法访问 Web 缓存等）。

我希望为进入 Web 应用程序的所有请求缓存复杂计算的结果。

我是否正确地认为我的数学课中的静态字段将被初始化一次`AppDomain`并且`AppDomain`将服务于多个请求，每个请求都将从静态字段中读取？

例如：

```
public static class MyMath
{
    private static ConcurrentDictionary<int, decimal> results = new ConcurrentDictionary<int, decimal>();

    public static decimal ComputeValue(int input)
    {
        decimal result;

        if (!results.TryGetValue(int, out result))
        {
            result = ComputeComplicatedValue(int);
            results.TryAdd(input, result);
        }

        return result;
    }
} 
```

该示例是否为我提供了多个不相关请求的线程安全缓存结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:05:35.307

是的，那会很好。

静态变量在 Web 应用程序中的用途有限，因为它们由所有线程共享，并且需要锁定才能访问它们。

在这种情况下，您*希望*在所有线程之间共享字典，并且它`ConcurrentDictionary`是线程安全的，因此它负责锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T13:10:40.667

您可以使用可以在[System.Runtime.Caching](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)中找到的 ObjectCache 。它基本上用作 ASP.NET 缓存，不需要任何 System.Web 程序集的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T12:45:32.163

您可以将其直接缓存在 Web 服务器上。计算请求可以检查它是否存在于缓存中，然后调用您的程序集。

否则，是的，静态数学类应该在所有实例之间共享，但我从来都不喜欢它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T12:47:28.743

使用应用程序对象，然后您可以在应用程序级别访问它

```
object someValue;
Application.Add("name", someValue); 
```

并且可以通过这个来检索它

```
Application["name"] 
```

# javascript - 如何在 ASP.NET 中向串行端口或 USB 端口发送和接收数据？

> ID：12543874
> 
> 赞同：1
> 
> 时间：2012-09-22T12:42:37.970
> 
> 标签：javascript, asp.net, usb, serial-port, libusb

我正在为停车场开发一个 Web 应用程序。我想通过连接到 USB 端口的设备来控制网关入口，但我们知道浏览器处于[沙箱](https://en.wikipedia.org/wiki/Sandbox_(computer_security))中，因此无法访问计算机端口。

[我在网上搜索并发现通过ActiveX](https://en.wikipedia.org/wiki/ActiveX)和/或[Java 小程序](https://en.wikipedia.org/wiki/Java_applet)可以做到这一点，但我是这些东西的新手，想要一个完整的教程或描述它的 wiki 书，甚至是相关的类库。

我想通过 ASP.NET 应用程序（客户端）将数据发送到 USB 或 COM 端口。我知道由于安全问题，浏览器无法这样做。什么是使用 ActiveX 的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:47:12.240

您需要在服务器上托管 ASP.NET*应用程序/网站*。您的浏览器位于客户端计算机上。您的客户端将向服务器请求一个页面，并且*该网站无法托管在客户端计算机上*。

因此，您可以将您的设备连接到服务器机器，然后客户端向您发送通过设备（例如 GSM 调制解调器）发布数据的请求。现在您需要将您的设备连接到服务器，您可以创建一个[Windows](https://en.wikipedia.org/wiki/Microsoft_Windows)服务来从数据库中提取发布的消息以通过设备发布它们。

您需要与 COM 端口通信。甚至您的 USB 设备也会监听 COM 端口。您可以使用串行端口类与设备进行通信。您可以使用桌面应用程序执行此操作，但*我看不出有任何使用网站的理由*。以下链接将对您有所帮助。

*   **[COM 端口监听](http://www.codeproject.com/Articles/75770/Basic-serial-port-listening-application)**
*   **[串行端口](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)**

# objective-c - 以编程方式在主视图控制器上加载模态视图控制器

> ID：12543877
> 
> 赞同：0
> 
> 时间：2012-09-22T12:42:59.377
> 
> 标签：objective-c, ipad, uisplitviewcontroller, modalviewcontroller

我正在创建一个 Ipad 应用程序，所以我有一个 Splitview 作为根视图，现在我想添加一个用户登录屏幕（使用模态 VC），但问题是我想在视图中加载模态 VC 加载，只是就像在 Ipad 设置应用程序中一样，所以任何人都做了类似的事情，或者如果有人可以建议我一些事情，我也在使用 ARC 和 Stroyborads。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:47:00.703

尝试将视图加载到`viewDidAppear`. 由于该视图尚未在屏幕上显示`viewDidLoad`，因此它与您尝试调出的其他视图相冲突。

```
(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self presentModalViewController:];
} 
```

希望能帮助到你！

# wordpress - 带有 phpass 加密密码的 Apache mod-auth-mysql (Wordpress)

> ID：12543883
> 
> 赞同：4
> 
> 时间：2012-09-22T12:43:52.993
> 
> 标签：wordpress, .htaccess, basic-authentication, apache-modules, phpass

我需要在 Wordpress 主站点之外的某些网页上设置密码保护。用户更愿意使用他们在 Wordpress 中已有的用户名和密码。

显而易见的解决方案似乎是使用 Apace 模块进行基于 Mysql 的身份验证：mod-auth-mysql。

然而，这似乎是不可能的，因为 Wordpress 使用 Phpass 密码加密，mod-auth-mysql 不支持。

*   [http://modauthmysql.sourceforge.net/CONFIGURE](http://modauthmysql.sourceforge.net/CONFIGURE)
*   [http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)
*   [https://wordpress.stackexchange.com/questions/32004/how-to-validate-wordpress-generated-password-in-db-using-php](https://wordpress.stackexchange.com/questions/32004/how-to-validate-wordpress-generated-password-in-db-using-php)

有没有办法绕过这个限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T12:43:52.993

您可以使用 mod-auth-mysql 的补丁版本来接受 Phpass 加密密码。我将包含有关如何在 ubuntu 和 debian 中执行此操作的说明。

[原始补丁文件可在此处获得](https://pelam.fi/published_sources/mod-auth-mysql-phpass/patch.diff "这里")

## 在 Ubuntu/Debian 中修补 Mod-auth-mysql 以支持 Phpass

这些说明已在 Ubuntu 10.4、12.04 和 14.04.5 中进行了测试，但只需稍作改动即可在许多其他基于 Debian 的平台上运行。

创建一个工作目录来构建打补丁的 .deb 包

```
mkdir mod-auth-mysql-phpass
cd mod-auth-mysql-phpass 
```

获取构建包和包源所需的依赖项。

```
sudo apt-get build-dep mod-auth-mysql fakeroot
apt-get source mod-auth-mysql 
```

转到新创建的源文件夹。

```
cd mod-auth-mysql-4.3.9 
```

使用 Debian 工具创建正确的 debian 格式补丁 (.dpatch)。首先检查当前的补丁列表。

```
cat debian/patches/00list 
```

最后一个官方补丁将在列表的末尾。使用最后一个补丁的名称作为下面 dpatch-edit-patch 命令的最后一个参数。还要为新的 phpass 补丁的名称选择一个更大的数字。在我的例子中，列表中的最后一个补丁是 017-doc_persistent_conn.dpatch，而 phpass 补丁的名称是 018-phpass。

```
dpatch-edit-patch patch 018-phpass 017-doc_persistent_conn.dpatch 
```

dpatch-edit-patch 将在一个特殊文件夹中启动一个新的 shell，它将用于构建自定义的 debian 格式补丁。

下载原始补丁

```
wget https://pelam.fi/published_sources/mod-auth-mysql-phpass/patch.diff 
```

应用原始补丁并将其删除。

```
patch < patch.diff
rm patch.diff 
```

告诉 dpatch-edit-patch 可以生成我们的自定义补丁。

```
exit 
```

想知道您新的正确 Debian 格式的补丁。如果您关心安全性，您还应该查看此非官方补丁所做的更改 :)

```
cat debian/patches/018-phpass.dpatch 
```

将新补丁添加到构建 .deb 包时要应用的补丁列表中。

```
echo 018-phpass.dpatch >> debian/patches/00list 
```

构建补丁包

```
dpkg-buildpackage -b -uc 
```

现在您可以安装自定义构建的 .deb 包（构建的包名称可能因您的系统而异）。

```
sudo dpkg --install ../libapache2-mod-auth-mysql_4.3.9-13.1ubuntu3_amd64.deb 
```

## 配置 Mod-auth-mysql 以使用 Phpass 对 Wordpress 进行身份验证

启用 mod-auth-mysql：

```
sudo a2enmod auth_mysql 
```

重启apache让新模块生效：

```
sudo service apache2 restart 
```

可以使用例如查看文档（现在包括 Phpass）。少命令

```
zless /usr/share/doc/libapache2-mod-auth-mysql/DIRECTIVES.gz 
```

这是一个示例 .htaccess 文件，它只允许 Wordpress 管理员访问：

```
AuthType Basic
AuthName "Give Wordpress Administrator username and password"

Auth_MySQL_User YOUR_MYSQL_USER_HERE
Auth_MySQL_Password YOUR_MYSQL_PASSWORD_HERE
Auth_MySQL_Host YOUR_MYSQL_SERVER_HERE

AuthBasicAuthoritative Off
# I don't know a better way to disable the default password file authentication
AuthUserFile /dev/null
Auth_MySQL on
Auth_MySQL_DB YOUR_WORDPRESS_MYSQL_SCHEMA_NAME_HERE
Auth_MySQL_Password_Table wp_users
Auth_MySQL_Username_Field wp_users.user_login
Auth_MySQL_Password_Field wp_users.user_pass
Auth_MySQL_Encryption_Types PHPass PHP_MD5

Auth_MySQL_Group_Table "wp_users, wp_usermeta"
Auth_MySQL_Group_Clause "AND wp_users.ID = wp_usermeta.user_id AND wp_usermeta.meta_key='wp-capabilities' and m.meta_value like '%s:13:\"administrator\"%'"
Auth_MySQL_Persistent On
Auth_MySQL_Authoritative Off
Auth_MySQL_CharacterSet utf8

Require valid-user
Order allow,deny
Allow from all 
```

# jquery - Jquery 获取并显示实时广播值

> ID：12543886
> 
> 赞同：0
> 
> 时间：2012-09-22T12:44:25.127
> 
> 标签：jquery, html, forms, radio-button

我有一个包含单选按钮的表单。它们被命名为 option1、option2 和 option3。这些单选按钮中的每一个都有 3 个不同的潜在值。

我需要在表单下方显示当前“已检查”的值。我一直在关注 jquery 指南并且非常困惑。

```
<script>
function displayVals() {
  var opt1 = $('input:radio[name=option1]:checked').val() || [];
  var opt2 = $('input:radio[name=option2]:checked').val() || [];
  var opt3 = $('input:radio[name=option3]:checked').val() || [];
  $("p").html("First item is " + opt1.join(", ") + " the second is " + opt2.join(", ") + " and third is " + opt3.join(", ") + ".");
}

$("input").change(displayVals);
displayVals(); 
```

但是，表单下方不会显示任何内容。例如，option1 可以是白色、红色或黑色。如果他们检查黑色，我需要它说“第一个项目是黑色的，第二个是什么，第三个是什么。” 每当其中一个值更改时，表格下方就会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:03:44.793

这应该有效。这是小提琴[jsfiddle](http://jsfiddle.net/sahil_kapoor/3LUBG/)

```
function displayVals() {
  var opt1 = $('input:radio[name=option1]:checked').val() || '';
  var opt2 = $('input:radio[name=option2]:checked').val() || '';
  var opt3 = $('input:radio[name=option3]:checked').val() || '';
  $("p").html("First item is " + opt1 + ", the second is " + opt2 + ", and third is " + opt3 + ",.");
}

$("input:radio").click(displayVals);
displayVals();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:54:32.040

`val()`返回一个字符串或`undefined`从不返回一个数组。所以这应该是

```
function displayVals() {
    var opt1 = $('input:radio[name=option1]:checked').val() || 'not selected';
    var opt2 = $('input:radio[name=option2]:checked').val() || 'not selected';
    var opt3 = $('input:radio[name=option3]:checked').val() || 'not selected';

    $("p").html("First item is " + opt1 + " the second is " + opt2 + " and third is " + opt3 + ".");
} 
```

# jquery - 如何使用 jQuery 重置选择的多选字段？

> ID：12543888
> 
> 赞同：6
> 
> 时间：2012-09-22T12:44:33.227
> 
> 标签：jquery, jquery-chosen

我有一个带有多选字段的表单，使用 Formtastic 和 Chosen 创建。

这个表单有一个多选字段，这里是它的 rails 代码：

```
 = semantic_form_for 'post', :url => action_name_post_path(@post), :html => {:method => :put}, :remote => true do |f|
    = f.input :blogs, :label => _("Blog"), :as => :select, :multiple => :true, :input_html => {:class => "chzn-select"}, :collection => Blog.all 
```

我想使用jQuery重置输入字段（表单提交并远程重置），我似乎无法弄清楚如何删除选定的元素//清除输入字段。问题是 selected 更改了输入字段，因此它不是一个简单的文本区域。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-20T00:58:01.437

似乎这两个答案的组合对我有用：

```
$('.chosen-select option').prop('selected', false).trigger('chosen:updated'); 
```

这将取消选择所有选项并重置所选下拉菜单。

[http://jsfiddle.net/donkeysauras/j9yuL/](http://jsfiddle.net/donkeysauras/j9yuL/) <-- 工作示例

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T13:02:47.493

试试这个

```
$('.chzn-select').val('').trigger('liszt:updated'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-29T15:17:45.660

这对我有用：

```
$('form#form_id').find('select').each(function(i, element) {
    $(element).chosen('destroy');
    $(element).prop("selectedIndex", -1);
    $(element).chosen();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T13:02:03.400

您可以按如下方式重置`multiple select`使用`jQuery`

```
$('.chzn-select option').prop('selected', false); 
```

您`class name`选择的 是`chzn-select`。

[**这里是一个工作示例**](http://jsfiddle.net/RmEab/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-01T06:37:23.130

从[文档](https://harvesthq.github.io/chosen/)

动态更新选择

如果您需要更新您的选择字段中的选项并希望 Chosen 获取更改，您需要在该字段上触发“chosen:updated”事件。选择将根据更新的内容重新构建自己。

```
$("#form_field").trigger("chosen:updated"); 
```

就我而言，它是

```
jQuery("#my-select-box").trigger("chosen:updated"); 
```

`my-select-box`是选择框的 id。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T00:08:23.787

对于可能最终解决了这个问题的人（有多个并且需要组合），Chosen 已经更新了他们的语法——改用这个：

```
$('.chzn-select').val('').trigger('chosen'); 
```

在哪里`'.chzn-select'`可以切换为`'select'`，`'#yourSelect'`或您希望使用的任何其他选择方法。

查看：

*   [如何使用 jQuery 重置 jquery 选择的选择选项？](https://stackoverflow.com/questions/11365212/how-do-i-reset-a-jquery-chosen-select-option-with-jquery)
*   [http://harvesthq.github.io/chosen/#change-update-events](http://harvesthq.github.io/chosen/#change-update-events)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-15T17:55:57.013

这对我来说很好

```
$('.reset-btn').click(function(){
    var form = $(this).closest('form').get(0);
    form.reset();
    $('.chosen-select').trigger('chosen:updated');
}); 
```

基本上我强制重置后选择的表单重置和更新。:D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-08T08:52:56.617

这完全取决于您选择的设置。它对我有用：

```
$('.chzn-select-no-search').val('').trigger('liszt:updated'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-20T12:44:50.033

这个解决方案对我有用

```
$('#.chosen-select').val('').prop('selected', false).trigger('chosen:updated') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-03T12:06:51.910

只有这样才能工作：

```
$('#client_filter').html(' '); //this worked 
```

不工作：

```
$('#client_filter').val('').trigger('change') ; //not working
$('#client_filter').val('').trigger('chosen:updated') ; //not working
$('#client_filter').val('').trigger('liszt:updated') ; //not working 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-11T20:22:01.430

这是唯一对我有用的东西。多选值是一个数组，所以你应该这样做：

$('#elementID').val([]).trigger('chosen:updated');

# android - Android：线程中断回调

> ID：12543891
> 
> 赞同：0
> 
> 时间：2012-09-22T12:45:23.020
> 
> 标签：android, multithreading, android-asynctask

情况：活动在后台执行一些操作[Thread](http://developer.android.com/reference/java/lang/Thread.html)。当活动关闭时，android 也会杀死线程。我想将线程停止写入日志。有回调吗？（覆盖 interrupt() 和 destroy() 不起作用）或者我应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)代替？

**UPD：** 线程代码

```
private class InternalReader extends Thread {

    @Override
    public void run() {
        final int size = mReader.getDataSize();
        final int blockSize = 10240;
        int offset = 0;
        TextFileCacher.DataBlock db = new TextFileCacher.DataBlock();
        db.data = new char[blockSize];
        int read = mReader.readString(offset, db.data, -1);
        mListener.onRenderStarted();
        mListener.onRenderReady();
        while (read > 0){
            db.size = read;
            mCacher.processData(db);
            offset+=read;
            mListener.onProgress(offset/size);
            read = mReader.readString(offset, db.data, -1);
        }
        mListener.onRenderReady();
    }
} 
```

异步任务代码

```
private class InternalReader extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {
        final int size = mReader.getDataSize();
        final int blockSize = 10240;
        int offset = 0;
        TextFileCacher.DataBlock db = new TextFileCacher.DataBlock();
        db.data = new char[blockSize];
        int read = mReader.readString(offset, db.data, -1);
        mListener.onRenderStarted();
        mListener.onRenderReady();
        while (read > 0){
            db.size = read;
            mCacher.processData(db);
            offset+=read;
            mListener.onProgress(offset/size);
            read = mReader.readString(offset, db.data, -1);
        }
        mListener.onRenderReady();
        return null;
    }

} 
```

初始化

```
(new InternalReader()).start(); 
```

和

```
(new InternalReader()).execute(); 
```

# symfony - 使用 Symfony 2 Forms 验证 API 输入

> ID：12543894
> 
> 赞同：3
> 
> 时间：2012-09-22T12:45:44.053
> 
> 标签：symfony, symfony-2.1, fosrestbundle

我正在使用 Symfony2、Doctrine 和 FOSRestBundle 构建一个 API。我想使用表单组件来验证创建或修改记录并遇到一些问题的 API 请求。我一直在使用它自己的验证组件，但想转而使用表单组件，因为它将所有验证逻辑移出控制器，更好地处理将请求数据绑定到我的实体并更好地聚合错误消息。

我遇到的问题与不需要的字段有关，无论是通过 POST 创建记录还是通过 PUT 更新记录。理想情况下，我希望它根本不需要通过 HTTP 提交非必填字段，但这会导致表单验证失败。例如，我正在使用的实体上的字段之一是名为 endTime 的 DateTime 字段，这不是必需的。如果 POST 或 PUT 请求中不存在名为 endTime 的参数，Symfony2 会将值 null 从请求绑定到字段。当它被转换为 DateTime 实例时，它被转换为当前日期时间，这根本不是我想要的。

如果 HTTP 请求中不存在值，有没有办法告诉 Symfony 不要将值绑定到实体？这应该仍然是安全的，因为基于实体类中的注释验证仍然会失败。我可以覆盖绑定方法，但这似乎需要做很多工作......

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:17:02.963

如何使用不需要的字段作为键创建一个数组，然后在该数组顶部合并您请求 POST 或 PUT 并将其绑定到表单。这样，表单的提示必填字段就在那里，并且如果提供了请求数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:37:48.100

您可以创建一个表单 EventSubscriber，在`preBind`事件中，将未提交的字段替换为其默认值（即，被绑定对象的值），而不是 null。

这是我创建的 EvenSubscriber：[https](https://gist.github.com/3766678) ://gist.github.com/3766678 。默认情况下，在我的实现中，只有非必填字段将具有默认值而不是 null ...

你和任何人都可以免费使用这个课程，只要你保留作者标签，​​确实;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T12:29:52.623

[您可以使用自定义表单类](http://symfony.com/doc/current/book/forms.html#creating-form-classes)和[验证组](http://symfony.com/doc/current/book/forms.html#validation-groups)的组合来实现此目的。

首先，创建表单 ( `Your\Bundle\Form\CreateFormType`)，它扩展`Symfony\Component\Form\AbstractType`了使用适当元素构建表单`buildForm`：

```
    $建造者
        ->添加（'标题'）
        ->add('firstNames');

```

然后，您可以为每个实体属性添加验证。应该一起验证的每个属性都需要共享相同的组。

例如

```
    你的\捆绑\实体\用户：
        特性：
            标题：
                - 非空白：
                    组：[注册]
                    留言：请提供您的职位
            名字：
                - 非空白：
                    组：[注册]
                    留言：请提供您的名字

```

您还将拥有另一个组（和自定义表单）`update`，其中将包含该请求中存在的属性。

在您的表单类中，您可以配置使用哪些验证组`setDefaultOptions()`：

```
    $resolver->setDefaults(数组(
        // ...
        'validation_groups' => 数组（'register'），
        // ...
    ));

```

# java - 如何配置 Quartz 来处理周期、周期和间隔

> ID：12543896
> 
> 赞同：2
> 
> 时间：2012-09-22T12:46:01.400
> 
> 标签：java, quartz-scheduler, jobs

我正在为我的 Java 后端编写一个监视器，并且需要能够在不同时间监视不同的事物（内存、CPU、用户活动、负载等）。最重要的是，我需要能够将每个监视器（`MemoryMonitorJob`、`CpuMonitorJob`、`ActivityMonitorJob`等）配置为具有以下特性：

*   定期打开/关闭（例如每 15 分钟一次）
*   配置开机后的持续时间（例如 2 分钟）
*   因此，我想配置，比如说，`MemoryMonitorJob`每 15 分钟启动一次，保持 2 分钟，然后关闭......**但没有 2 分钟的间隔会抵消下一次运行的时间！**

因此，在此特定示例下，监视器将表现出以下行为：

1.  t = 0，开启
2.  0 < t < 2，运行
3.  t = 2，关闭
4.  t = 15，开启
5.  15 < t < 17，运行
6.  t = 17，关闭
7.  t = 30，开启
8.  ...

显然，在配置代码的某处，我需要检查“间隔”是否满足或超过“周期/周期”时间，否则我们将有一项工作在它仍在运行时尝试启动！

我相信[Quartz Scheduler](http://quartz-scheduler.org/)是适合这里工作的工具，但我过去只使用它来设置简单的 cron 作业（“*每 15 分钟运行一次 X* ”）。这个间隔属性让我失望，在仔细查看 Quartz`CronTriggerImpl`文档后，我似乎无法弄清楚如何配置 Quartz 作业以使其表现得像这样。

理想情况下，如果 Quartz 可以处理这种行为，那么我只需`Job`使用正确的周期/间隔设置配置 1 个监视器实现，然后将它们添加到调度程序。

Quartz 能解决这个问题吗？如果是这样，如何（我可以看到一个例子吗？！？）？如果没有，我在这里有什么选择？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:22:16.223

实际上，Quartz 触发器完全按照您想要的方式工作：

```
Trigger trigger = newTrigger()
    .withSchedule(simpleSchedule()
        .withIntervalInMinutes(15)
        .repeatForever())
    .forJob(memoryMonitorJob)
    .build(); 
```

`MemoryMonitorJob`无论您的工作运行多长时间，它都会每 15 分钟触发一次。当然，让你的作业类运行两分钟（睡眠、循环等）取决于你

如果您的作业运行时间超过 15 分钟，您有两种选择：

*   默认情况下，Quartz 将再次触发相同的作业，与之前的执行重叠。
*   如果你的作业是有状态的，Quartz 不会再次触发作业，等待前一个作业完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:21:57.697

我认为这里有几个选项，但最简单的方法是使用 CronTrigger 每 15 分钟运行一次作业，而不是跟踪作业内的 2 分钟。

工作代码

```
public void execute(JobExecutionContext context) throws JobExecutionException {
    Date now = new Date();
    Date inTwoMinutes = new Date(now.getTime() + 2*60*1000);
    while(inTwoMinutes.before(now)) {
        // do something
        now = new Date();
    }
} 
```

调度代码

```
job = newJob(MyJob.class)
    .withIdentity("job", "group")
    .build();

trigger = newTrigger()
    .withIdentity("trigger", "group")
    .withSchedule(cronSchedule("0 15 * * * ?"))
    .build();

sched.scheduleJob(job, trigger); 
```

这将每 15 分钟触发一次作业。

另一种选择是在第 15 分钟和第 16 分钟每秒触发相同的作业。在这种情况下，您不需要 while 循环。然而，不利的一面是，在工作之间保持状态更难。触发器看起来像这样。

```
trigger = newTrigger()
    .withIdentity("trigger", "group")
    .withSchedule(cronSchedule("* 15,16 * * * ?"))
    .build(); 
```

有关触发器的更多信息： [http ://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger](http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)

# android - 在 Web 服务调用后关闭 http 连接，在 Android 中

> ID：12543903
> 
> 赞同：1
> 
> 时间：2012-09-22T12:47:06.897
> 
> 标签：android, web-services, http, ksoap2

如何关闭由以下代码打开的连接：

```
 HttpTransportSE androidHttpTransport = new HttpTransportSE(URL)
 androidHttpTransport.call(soap_action, envelope); 
```

HttpTransportSE 是在 Ksoap2 库中定义的一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:03:06.447

```
androidHttpTransport.reset(); 
```

?

看[这里](http://ksoap2.sourceforge.net/doc/api/org/ksoap2/transport/Transport.html#reset%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T13:02:50.773

```
 if(httpTransport!=null){
            httpTransport.reset();
            try {
                httpTransport.getConnection().disconnect();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:04:00.317

取消您正在其中创建连接的 AsyncTask，因为取消的 AsyncTask 将停止在其中运行的所有进程，因此您的连接也将关闭。

**`mAsyncTask.cancel(true);`**

# stored-procedures - 如何将转发器与 2 个存储过程绑定，这两个存储过程都相差 1 列。第一个输出是 ABCD ，第二个输出是 EBCD

> ID：12543909
> 
> 赞同：0
> 
> 时间：2012-09-22T12:47:49.663
> 
> 标签：stored-procedures

如何将转发器与 2 个存储过程绑定，两个存储过程相差 1 列，1 的输出是 ABCD，第二个是 EBCD。

**更新**

```
<asp:Repeater ....>
    <HeaderTemplate>
        [table rows and columns structure]
    </HeaderTemplate>
    <ItemTemplate>
        [table rows and columns structure]
    </ItemTemplate>
</asp:Repeater> 
```

1.  a 和 E 的数据类型都是字符串。
2.  我通过databind（）将它绑定到db。
3.  我的标记看起来像：

感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:56:08.203

1.  A 列和 E 列的数据类型是什么？
2.  你怎么绑定？数据源ID？数据源/数据绑定（）？
3.  你的转发器中有什么标记？

在表示层（aspx 页面），它只是字符串，因此您可以将转发器绑定到任一结果，因为它们都有 4 列。

很难提供更多帮助，因为您还没有展示您已经拥有的东西，而最佳解决方案很大程度上取决于您项目的具体情况。

**编辑**

好吧，那就绑定吧，你还没试过吗？当您问技术问题时，如果您没有先尝试过，您会发现，我们不太可能放弃我们的空闲时间来提供帮助。

一个更好的问题应该是：“我已经尝试将我的转发器绑定到 2 个不同的存储过程，它们仅相差一列，但我收到一个错误（描述确切的错误消息）。这是我的代码......谁能帮忙？”

**可能的解决方案**

aspx

```
<asp:Repeater ID="repeaterId" runat="server" 
    OnItemDataBound="RepeaterId_ItemDataBound">
    <HeaderTemplate>
        [table rows and columns structure]
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><asp:Literal ID="literalId" runat="server"></td>
            <td><% # eval("column2")%></td>
            <td><% # eval("column3")%></td>
            <td><% # eval("column4")%></td>
        </tr>
    </ItemTemplate> 
```

aspx.cs

```
protected void RepeaterId_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Literal lit = e.FindControl("literalId") as Literal;
        if(null != lit)
        {
            if(usingStoredProcedure1)
            {
                lit.Text = Databinder.Eval(e.Item.DataItem, "A");
            }
            else
            {
                lit.Text = Databinder.Eval(e.Item.DataItem, "E");
            }
        }
    }
}

private void BindRepeater()
{
    if(someCondition == true)
    {
        repeaterId.DataSource = getStoredProcedure1();
    }
    else 
    {
        repeaterId.DataSource = getStoredProcedure2();
    }

    repeaterId.DataBind();
} 
```

# actionscript-3 - AS3 比较两个函数

> ID：12543910
> 
> 赞同：1
> 
> 时间：2012-09-22T12:47:51.010
> 
> 标签：actionscript-3, function, compare

我的类中有一个静态数组和一个静态方法，通过这个方法我在数组中推送了一些函数。该方法是在时间轴上调用的，因此当我播放帧两次时，它将推动该函数两次，依此类推。

**问题：** 如何检查函数是否存在并防止重复？（就像 addeventlistener ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:22:15.340

简短版：不要在时间轴上编码。

长版：如果幸运的话，功能会相同，因此可以使用`==`运算符进行比较。但是当您在时间轴上编码时，可能有多个相同功能的实例，所以这不起作用。您可以保存一个静态布尔值，指示您是否已添加它。

但！开始在课堂上编码，从长远来看，它会为你省去很多麻烦，并在 Stack Overflow 上给你更好的答案——这有点像问五星级厨师为什么你只加水和摇晃—— togehter-cake 结果不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T13:26:37.137

函数是一种动态类型，但编译器通常不允许在函数上创建随机属性，但是，如果你“欺骗”类型检查，你可以在函数上拥有一个属性，以后可以使用它来识别它 - 这种方式函数不必是完全相同的函数。

**请注意，这是一件灾难性的事情 :) 但就像琐事知识一样，这可能会在以后有所帮助。**

```
function foo():void { /* some code */ }
function bar():void { /* some code */ }
foo["baz"] = bar["baz"] = 42;

if (foo["baz"] && foo["baz"] == bar["baz"]) trace("equal");
else trace("distinct"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:35:31.733

精简版：

```
var i = arr.indexOf(myFunc);
if(i != -1) arr.push(myFunc); 
```

长版：

我不是时间线专家。我确实知道纯 AS3 中只有一个静态函数的实例，我想当您使用时间轴时它是一样的。

所以你能做的最快的事情就是使用

> arrayName.indexOf(funcName);

如果该函数在数组中不存在，它将返回-1，否则它是正确的索引。

如果这不起作用，请告诉我们，我很好奇。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T14:13:21.747

您可以使用 ByteArray 比较对象。对于您的情况，我可能会将函数调用推送到带有函数、参数和“thisObject”的数组中。这是一个粗略的想法。但我可能会创建一个新类，为该等待操作容器扩展 Array。

```
package  {

    import flash.display.MovieClip;
    import flash.utils.ByteArray;
    import flash.events.MouseEvent;

    public class Main extends MovieClip {

        private static var awaiting:Array = [];

        private function pushAction(func:Function,args:Array=null,thisArg:*=null):uint {
            var newObj:Object = {
                func    :func,
                args    :args,
                thisArg :thisArg
            }
            for (var i:int = 0; i < Main.awaiting.length; i++) {
                if (duplicates(Main.awaiting[i],newObj)) return i;
            }
            return Main.awaiting.push(newObj);
        }

        private function nextAction(extraArgs:Array=null):* {
            if (Main.awaiting.length == 0) return null;
            var o:Object = Main.awaiting.shift();
            var args:Array = o.args;
            if (extraArgs) args = args == null ? extraArgs : args.concat(extraArgs);
            var thisArg:* = o.thisArg;
            var func:Function = o.func;
            return func.apply(thisArg,args);
        }

        private static function duplicates(item1:Object,item2:Object):Boolean {
            var bArr1:ByteArray = new ByteArray();
            var bArr2:ByteArray = new ByteArray();
            bArr1.writeObject(item1);
            bArr2.writeObject(item2);
            bArr1.position = 0;
            bArr2.position = 0;
            var str1:String = bArr1.readUTFBytes(bArr1.length);
            var str2:String = bArr2.readUTFBytes(bArr2.length);
            return str1 == str2;
        }

        public function Main() {
            pushAction(function(){trace('the first item')});
            pushAction(traceMe,['the second item']);
            pushAction(traceMe,['the third item']);
            pushAction(sayHi,null,Main);
            pushAction(function(){trace('the first item')});
            pushAction(traceMe,['the second item']);
            pushAction(traceMe,['the third item']);
            pushAction(sayHi,null,Main);
            stage.addEventListener(MouseEvent.CLICK,clicked);
        }

        private function clicked(e:MouseEvent):void {
            this.nextAction();
        }

        public function traceMe(str:String):void {
            trace(str);
        }

        private static function sayHi():void {
            trace('hi');
        }

    }

} 
```

# html - 网页上的依赖解析树可视化

> ID：12543911
> 
> 赞同：5
> 
> 时间：2012-09-22T12:47:51.397
> 
> 标签：html, parsing, dependencies, visualization

下面是一个依赖解析树的例子。

![依赖解析树](../Images/1e044094a51237a5395158534e3ed16b.png)

我想在 html 网页上可视化它，任何人都可以给我一些例子或指导吗？我熟悉 C/C++、Python，但不熟悉 html/javascript。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-12T18:28:24.627

将输出转换为 json 并将其传递给一些 js 图形库，如 d3、raphael 等。

[演示和参考](http://demo.ark.cs.cmu.edu/parse)

例如解析树

> “我将在奥斯汀的 SXSW 举办 NLP 研讨会。”

将会

```
(ROOT
  (S
    (NP (PRP I))
    (VP (VBP am)
      (VP (VBG going)
        (S
          (VP (TO to)
            (VP (VB do)
              (NP
                (NP (DT a) (NN seminar))
                (PP (IN on)
                  (NP (NNP NLP))))
              (PP (IN at)
                (NP (NNP SXSW)))
              (PP (IN in)
                (NP (NNP Austin))))))))
    (. .))) 
```

可以转化为

```
[{
    "data": {
        "type": "ROOT"
    },
    "children": [{
        "data": {
            "type": "S"
        },
        "children": [{
            "data": {
                "type": "NP"
            },
            "children": [{
                "data": {
                    "type": "PRP"
                },
                "children": [{
                    "data": {
                        "ne": "O",
                        "word": "I",
                        "type": "TK",
                        "pos": "PRP"
                    },
                    "children": []
                }]
            }]
        }, {
            "data": {
                "type": "VP"
            },
            "children": [{
                "data": {
                    "type": "VBP"
                },
                "children": [{
                    "data": {
                        "ne": "O",
                        "word": "am",
                        "type": "TK",
                        "pos": "VBP"
                    },
                    "children": []
                }]
            }, {
                "data": {
                    "type": "VP"
                },
                "children": [{
                    "data": {
                        "type": "VBG"
                    },
                    "children": [{
                        "data": {
                            "ne": "O",
                            "word": "going",
                            "type": "TK",
                            "pos": "VBG"
                        },
                        "children": []
                    }]
                }, {
                    "data": {
                        "type": "S"
                    },
                    "children": [{
                        "data": {
                            "type": "VP"
                        },
                        "children": [{
                            "data": {
                                "type": "TO"
                            },
                            "children": [{
                                "data": {
                                    "ne": "O",
                                    "word": "to",
                                    "type": "TK",
                                    "pos": "TO"
                                },
                                "children": []
                            }]
                        }, {
                            "data": {
                                "type": "VP"
                            },
                            "children": [{
                                "data": {
                                    "type": "VB"
                                },
                                "children": [{
                                    "data": {
                                        "ne": "O",
                                        "word": "do",
                                        "type": "TK",
                                        "pos": "VB"
                                    },
                                    "children": []
                                }]
                            }, {
                                "data": {
                                    "type": "NP"
                                },
                                "children": [{
                                    "data": {
                                        "type": "NP"
                                    },
                                    "children": [{
                                        "data": {
                                            "type": "DT"
                                        },
                                        "children": [{
                                            "data": {
                                                "ne": "O",
                                                "word": "a",
                                                "type": "TK",
                                                "pos": "DT"
                                            },
                                            "children": []
                                        }]
                                    }, {
                                        "data": {
                                            "type": "NN"
                                        },
                                        "children": [{
                                            "data": {
                                                "ne": "O",
                                                "word": "seminar",
                                                "type": "TK",
                                                "pos": "NN"
                                            },
                                            "children": []
                                        }]
                                    }]
                                }, {
                                    "data": {
                                        "type": "PP"
                                    },
                                    "children": [{
                                        "data": {
                                            "type": "IN"
                                        },
                                        "children": [{
                                            "data": {
                                                "ne": "O",
                                                "word": "on",
                                                "type": "TK",
                                                "pos": "IN"
                                            },
                                            "children": []
                                        }]
                                    }, {
                                        "data": {
                                            "type": "NP"
                                        },
                                        "children": [{
                                            "data": {
                                                "type": "NN"
                                            },
                                            "children": [{
                                                "data": {
                                                    "ne": "ORGANIZATION",
                                                    "word": "NLP",
                                                    "type": "TK",
                                                    "pos": "NN"
                                                },
                                                "children": []
                                            }]
                                        }]
                                    }]
                                }]
                            }, {
                                "data": {
                                    "type": "PP"
                                },
                                "children": [{
                                    "data": {
                                        "type": "IN"
                                    },
                                    "children": [{
                                        "data": {
                                            "ne": "O",
                                            "word": "at",
                                            "type": "TK",
                                            "pos": "IN"
                                        },
                                        "children": []
                                    }]
                                }, {
                                    "data": {
                                        "type": "NP"
                                    },
                                    "children": [{
                                        "data": {
                                            "type": "NNP"
                                        },
                                        "children": [{
                                            "data": {
                                                "ne": "ORGANIZATION",
                                                "word": "SXSW",
                                                "type": "TK",
                                                "pos": "NNP"
                                            },
                                            "children": []
                                        }]
                                    }]
                                }]
                            }, {
                                "data": {
                                    "type": "PP"
                                },
                                "children": [{
                                    "data": {
                                        "type": "IN"
                                    },
                                    "children": [{
                                        "data": {
                                            "ne": "O",
                                            "word": "in",
                                            "type": "TK",
                                            "pos": "IN"
                                        },
                                        "children": []
                                    }]
                                }, {
                                    "data": {
                                        "type": "NP"
                                    },
                                    "children": [{
                                        "data": {
                                            "type": "NNP"
                                        },
                                        "children": [{
                                            "data": {
                                                "ne": "LOCATION",
                                                "word": "Austin",
                                                "type": "TK",
                                                "pos": "NNP"
                                            },
                                            "children": []
                                        }]
                                    }]
                                }]
                            }]
                        }]
                    }]
                }]
            }]
        }, {
            "data": {
                "type": "."
            },
            "children": [{
                "data": {
                    "ne": "O",
                    "word": ".",
                    "type": "TK",
                    "pos": "."
                },
                "children": []
            }]
        }]
    }]
}] 
```

并且[可以使用 d3 绘制](http://nlpviz.bpodgursky.com/home)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T12:53:15.003

您应该能够使用[Raphaël JS做到这一点](http://dmitrybaranovskiy.github.io/raphael/)

看看他们提供的演示，例如：带有曲线的演示等。这应该为您指明正确的方向。

注意：以上内容仍然需要您在 JS 中编写代码，但是非常直接地使用 JS。您可能可以直接从 Raphael 开始，然后随手拿起零件。

祝你好运。

# algorithm - 压缩扩展算法以减少电话号码中的位数

> ID：12543914
> 
> 赞同：2
> 
> 时间：2012-09-22T12:48:23.557
> 
> 标签：algorithm, math, compression

这更多的是一个理论问题。先说明一下情况：

我们有系统可以拨打另一个系统并发送 dtmf 音（如果您不熟悉 dtmf 音，假设它发送像 0、1、2 之类的数字...）。根据收到的 dtmf 音，接收端组成整个数字，然后执行一些动作。

但是，对于较长的数字，例如 423121212121 ，它有 13 个 dtmf 音调，这需要很长时间才能传输。

我想知道是否有人熟悉任何可以将这 13 位数字压缩成更小尺寸的数学公式或算法，将其发送过来然后在另一端提取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T13:33:02.573

在成熟的 DTMF 方案中，有四个“位”数据，即 16 个组合。如果所有 16 个组合都可用，那么解决您的问题的最明显方法是将您的号码编码为十六进制数字并传输十六进制。这将使您的 13 位数字减少到 10 或 11 位——不是大幅减少，但可能是您能做的最好的。

我能想到的唯一另一件事是利用数字中的模式并用单个数字替换例如“流行”前缀代码（要求不太常见的前缀前面有一个额外的标记数字来识别它们）。这是霍夫曼编码的穷人版本。或者可以采用成熟的霍夫曼编码，或类似的方案。

# coordinates - 将 x,y,z 坐标映射到 Kinect 中的屏幕坐标或投影坐标到 XNA

> ID：12543916
> 
> 赞同：1
> 
> 时间：2012-09-22T12:48:45.953
> 
> 标签：coordinates, kinect, xna-4.0

我编写了一个程序来记录 Skeleton 的关节值。. 基本上 RightHand.joint 从传感器获取 X、Y、Z 坐标，现在我想使用这些值来为我的 3D 模型设置动画.. 不知何故，我得到了将 x、y 值转换为真实世界投影的公式，但是不明白如何用 Z 坐标做到这一点。我也不明白为什么我们需要执行以下操作

```
 int x = (int) Math.Floor(((float.Parse(temp[0]) * 0.5f) + 0.5f) * maxWidth);
 int y = (int) Math.Floor(((float.Parse(temp[1]) * -0.5f) + 0.5f) * maxHeight); 
```

仅将 x 和 y 值乘以屏幕宽度和高度而不是执行 *0.5f (+0.5f) 还不够。. 如果有人可以解释这将非常有帮助，以及如何获得 Z 坐标？

这是代码：

```
 protected override void Update(GameTime gameTime)
        {
             //// TODO: Add your update logic here
            using (StreamReader r = new StreamReader(f))
            {
                string line;
                Viewport view = graphics.GraphicsDevice.Viewport;
                int maxWidth = view.Width;
                int maxHeight = view.Height;

                while ((line = r.ReadLine()) != null)
                {
                    string[] temp = line.Split(',');

      int x = (int)Math.Floor(((float.Parse(temp[0]) * 0.5f) + 0.5f) * maxWidth);
      int y = (int)Math.Floor(((float.Parse(temp[1]) * -0.5f) + 0.5f) * maxHeight);

       //Wrong Z - value Cal (Testing)
       int z = (int)Math.Floor(((float.Parse(temp[2])* 0.5) + 0.5f) * maxHeight);

                 motion_z.Add(new Point3D(x, y, z));

             }
         }

             ModelPosition.X = (float)(motion_z[i].X);
             ModelPosition.Y = (float)(motion_z[i].Y);
             ModelPosition.Z = (float)(motion_z[i].Z);

             i++;
          base.Update(gameTime);
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:25:11.807

```
int x = (int)Math.Floor(((float.Parse(temp[0]) * 0.5f) + 0.5f) * maxWidth);
int y = (int)Math.Floor(((float.Parse(temp[1]) * -0.5f) + 0.5f) * maxHeight);
int z = (int)Math.Floor(((float.Parse(temp[2])/4)* 20000));

 motion_z.Add(new Point3D(x, y, z)); 
```

20000 是您在 vector3 相机位置中定义的深度距离值，它应该正确设置动画

# php - 如何将 $_SERVER 变量保存到字符串

> ID：12543917
> 
> 赞同：-2
> 
> 时间：2012-09-22T12:48:56.530
> 
> 标签：php

# 解决了

这是我想做的一个基本示例：

```
$installURL = "http://" . $_SERVER['HTTP_HOST'] . dirname($_SERVER['SCRIPT_NAME']);
$save= $installURL;
$str = str_replace( '/setup', '', $save ); //remove /setup/
$installURL= $save; 
```

我正在尝试将`$_SERVER`变量保存到字符串中，然后删除新字符串的某个部分。

目前，上述代码不起作用。

当前输出为：`http://localhost/amdin/setup`

我以为`str_replace`会删除最后一部分。我真的想`str_replace`删除它而不是使用其他`$_SERVER`变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T12:55:51.323

更正最后一行：

```
$installURL= $save; 
```

至

```
$installURL= $str; 
```

# java - 如何在 Java EE 应用程序中创建基于生物特征的身份验证。？

> ID：12543918
> 
> 赞同：-2
> 
> 时间：2012-09-22T12:49:00.977
> 
> 标签：java, jsp, jakarta-ee, biometrics

我在 Java EE 平台上创建了一个 Web 应用程序。我想在 JSP 中创建一个登录页面，使用 Biometric Face recognition 对用户进行身份验证。然后人脸图像由服务器进行身份验证。（基于人脸识别的身份验证）。

请告诉我如何在我的 Jsp 登录页面中实现人脸识别认证。

还要告诉所有生物识别设备。

注意：我正在使用 WebSphere Application Server 和 RAD 进行开发。所以实现必须完全支持两者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:55:58.863

IMO 这是一个非常奇怪的安全要求，我认为您不会通过谷歌搜索找到某种动手教程。
我所知道的最严格的基于身份验证的机制是使用`CAC`具有员工个人证书的卡，并且根据客户端证书身份验证限制登录。
这对于会话到期等也很简单。
即使您能够实现人脸识别方案，当会话到期浏览器关闭等时您将如何处理安全性？
继续扫描图像并将它们发送到服务器？性能会很糟糕，我不知道它是否提供了比使用智能卡（基于证书的身份验证）的标准的任何真实/额外的安全性。
如果您有如此严格的安全要求，我建议您的公司聘请安全顾问来指导您的项目。

# c# - 如何在asp.net中获取网页上所有链接的坐标位置？

> ID：12543921
> 
> 赞同：0
> 
> 时间：2012-09-22T12:49:40.663
> 
> 标签：c#, html

我的确切要求是制作缩略图并标记网页的链接位置。网页 url 将动态传递。为此，我需要获取链接坐标。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:51:48.810

假设您可以在页面上运行脚本，那么 jQuery 偏移量应该可以满足您的需要：

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

此方法将找到元素相对于文档的偏移量。然后，您可以通过在页面上添加具有固定位置的元素来添加标记。

但是，如果您不能在页面上运行脚本并且只能获取 HTML，事情可能会变得非常复杂。

我想您可以获取 HTML，动态编辑它以使用 jquery 添加适当的脚本，将其发布到网络上，并使用众多网站缩略图生成器之一，例如

[http://www.shrinktheweb.com/](http://www.shrinktheweb.com/)

抓取页面的缩略图。

# grails - Grails：如何根据格式（JSON、HTML）提供对错误 500 的不同响应？

> ID：12543930
> 
> 赞同：3
> 
> 时间：2012-09-22T12:51:02.850
> 
> 标签：grails, url-mapping

当根据请求的格式发生错误 500 时，我试图在 Grails 中提供不同的响应。

我创建了一个 ErrorController 并在 URLMappings 中使用它，但我没有得到正确的请求格式：

```
def handle() {
    withFormat {
        html {
            response.status = 500
            render(view:'/errors/serverError')
        }
        json {
            response.setContentType "application/json; charset=utf-8"
            response.status = 500
            ApiResponse apiResponse = new ApiResponse(
                meta: new ApiMeta(
                    code: 500,
                    errorType: "Whatever",
                    msgs: ["${request.exception}"]
                )
            )
            render apiResponse as JSON
    }
    }
} 
```

响应总是在 html 中。还尝试了“request.withFormat”，结果相同。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:16:14.967

我没有足够的信息来验证这是否真的是原因，但它可能看起来像 MIME 类型问题。json 是否在 Config.groovy 中正确配置为 MIME 类型？您的客户是否接受您的 MIME 类型。请参阅此链接以获取参考[http://grails.org/doc/2.1.0/guide/single.html#contentNegotiation](http://grails.org/doc/2.1.0/guide/single.html#contentNegotiation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:00:34.340

我不确定这是否可以解决您的问题...但请尝试在 URLMapping 中进行错误处理，如您在[http://grails.org/doc/latest/guide/theWebLayer.html#mappingToResponseCodes中所见](http://grails.org/doc/latest/guide/theWebLayer.html#mappingToResponseCodes)

您可以从您的操作中捕获任何异常，并在格式请求为 JSON 时抛出 JSONException 异常。

```
"500"(controller: "error", action: "handleJsonException", exception: JSONException)
"500"(controller: "error", action: "handleHtmlException") 
```

# iphone - 取所选电话号码 [iPhone]

> ID：12543932
> 
> 赞同：0
> 
> 时间：2012-09-22T12:51:26.477
> 
> 标签：iphone, objective-c, xcode, abpersonviewcontroller

我正在尝试从 iPhone 上的联系人中获取电话号码。我实施了

```
-(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier 
```

来自**ABPeoplePickerNavigationControllerDelegate**

在这种方法中有这段代码，它可以工作：

```
NSString *firstName = (NSString *)CFBridgingRelease(ABRecordCopyValue(person, kABPersonFirstNameProperty));
    NSLog(@"First Name ---> %@" ,firstName);

    NSString *secondName = (NSString *)CFBridgingRelease(ABRecordCopyValue(person, kABPersonLastNameProperty));
    NSLog(@"Last name ---> %@" ,secondName); 
```

但现在我还需要从用户那里选择电话号码。我已经尝试过，但它对我不起作用：

```
NSString *numberSelected = (NSString *)CFBridgingRelease(ABRecordCopyValue(person, property)); 
```

这给了我一个像这样的奇怪值：

```
ABMultiValueRef 0xa36e990 with 1 value(s)
    0: _$!<Mobile>!$_ (0xa36ee50) - (123) 456-7890 (0xa36ee70) 
```

然后我尝试了这个，但这也不起作用：

```
ABMutableMultiValueRef multi = ABRecordCopyValue(person, property);
    CFStringRef phone = ABMultiValueCopyLabelAtIndex(multi, identifier);
    NSLog(@"Number Selected ---> %@" ,(NSString *)CFBridgingRelease(phone));
    CFRelease(phone);

    NSLog(@"Number Selected --> %@" ,numberSelected); 
```

显示的字符串只有：

```
_$!<Mobile>!$_ 
```

现在我不知道该怎么办......你能帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:56:13.700

尝试是：

```
 CFStringRef cfnumber;
    ABMultiValueRef numbers = ABRecordCopyValue(person, kABPersonPhoneProperty); 
    for(CFIndex i = 0; i < ABMultiValueGetCount(numbers); i++) 
    {
        if(identifier == ABMultiValueGetIdentifierAtIndex (numbers, i)) 
        { 
            //if tapped number identifier is the same as identifier number tapped
            cfnumber = ABMultiValueCopyValueAtIndex(numbers, i); // copy the number to CFSTRING number
        }
    }        
    NSString *number = [NSString stringWithFormat:@"%@",cfnumber];
    CFRelease(cfnumber); 
```

# c# - java中的错误填充异常（RSA解密）

> ID：12543933
> 
> 赞同：1
> 
> 时间：2012-09-22T12:51:27.893
> 
> 标签：c#, java, rsa, encryption

解密 java.RSA 加密字符串中的 RSA Base64 编码字符串由 c#.Net 生成时，我遇到了一些问题。

实际上，我使用 java 创建了一个公钥和私钥。然后我将公钥交换给 .Net Team。他们通过使用公钥和`RSACryptoServiceProvider`类来加密字符串。

.Net 代码：

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(keySize);
rsa.FromXmlString(publicKey);
.......
.......
byte[] encryptedBytes = rsa.Encrypt(tempBytes, false);
Array.Reverse(encryptedBytes);
stringBuilder.Append(Convert.ToBase64String(encryptedBytes)); 
```

Java解密代码：

```
 public static void doDecrypt( BigInteger  modules, BigInteger  d , String encrypted )
    {
            try {
                    byte[] decodedBytes = Base64.decodeBase64( encrypted );
                    KeyFactory factory = KeyFactory.getInstance("RSA");
                    Cipher cipher = Cipher.getInstance("RSA");

                    RSAPrivateKeySpec privSpec = new RSAPrivateKeySpec(modules, d);
                    PrivateKey privKey = factory.generatePrivate(privSpec);

                    cipher.init(Cipher.DECRYPT_MODE, privKey);
                    byte[] decrypted = cipher.doFinal(decodedBytes) ;
                    System.out.println("decrypted: " + new String(decrypted));
            }
            catch (Exception e) {
                    e.printStackTrace();
            }

    } 
```

在解密字符串时，它说以下错误。

```
javax.crypto.BadPaddingException: Data must start with zero
   at sun.security.rsa.RSAPadding.unpadV15(RSAPadding.java:308)
   at sun.security.rsa.RSAPadding.unpad(RSAPadding.java:255)
   at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
   at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
   at javax.crypto.Cipher.doFinal(DashoA13*..) 
```

然后，我尝试了

```
 Cipher cipher = Cipher.getInstance("RSA/ECB/NoPadding"); 
```

但是，它给出了垃圾字符，我无法将其与我想要的纯文本联系起来。我想，我想在某个地方做某事。请指导我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T17:22:25.147

```
rsa.Encrypt(tempBytes, false) 
```

导致 PKCS#1 v1.5 填充。所以你必须在java端使用相同的。尝试使用

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding"); 
```

我认为 Windows API 默认使用 ECB，但您可能也想尝试其他模式，如 CBC 或 CFB。

# php - 使用 Ghostscript 删除图像中的白色边框

> ID：12543937
> 
> 赞同：4
> 
> 时间：2012-09-22T12:51:51.607
> 
> 标签：php, pdf, border, ghostscript

我需要使用 PHP 将 PDF 文件解析为图像。我在 Ghostscript 的帮助下完成了它。这是脚本：

```
$result = exec("gs -sDEVICE=png16m -sOutputFile=page-%03d.png $pdfname.pdf"); 
```

但几乎所有最终图像周围都有**白色边框**（PDF 页面没有这些边框）。怎样才能摆脱它们？也许 Ghostcript 代码中有一些我找不到但会有所帮助的方法。
这是一张图片 -> [http://www.pictureshack.ru/images/88046_page-009.png](http://www.pictureshack.ru/images/88046_page-009.png)
这是 PDF 文件的打印屏幕 -> [http://www.pictureshack.ru/images/62869_pdf.PNG](http://www.pictureshack.ru/images/62869_pdf.PNG)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T08:50:13.383

我建议您的页面定义一个小于 MediaBox 的 CropBox。您可以通过在命令行上提供 -dUseCropBox 开关来告诉 Ghostscript 使用 CropBox。

当然，正如 Kurt 所说，如果没有看到原始文件，就真的无法分辨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T18:42:00.720

Pigalev Pavel 应该给出他如何解决问题的真正答案。一种可能性是他必须使用类似的东西：

```
gs                           \
  -sDEVICE=png16m            \
  -sOutputFile=page-%03d.png \
  -dUseTrimBox               \
   file.pdf 
```

或者

```
gs                           \
  -sDEVICE=png16m            \
  -sOutputFile=page-%03d.png \
  -dUseCropBox               \
   file.pdf 
```

# c++ - C++ 98 标准在哪里指定本地声明的模板名称不依赖？

> ID：12543939
> 
> 赞同：3
> 
> 时间：2012-09-22T12:52:10.897
> 
> 标签：c++, templates, name-lookup, dependent-name, c++98

根据此页面： [http](http://womble.decadent.org.uk/c++/template-faq.html#non-dependent) ://womble.decadent.org.uk/c++/template-faq.html#non-dependent “非依赖名称是那些被认为不依赖于模板参数的名称，加上名称模板本身和在其中声明的名称（成员、朋友和局部变量）”

这似乎得到了以下代码被认为是有效的事实的支持（LLVM/Comeau）

```
template<typename T>
struct Template
{
    typedef int I;
    typedef Template::I Type; // 'Template' is NOT dependent
    typedef Template<T>::I Type2; // 'Template<T>' is NOT dependent
    Template<T>* m;
    void f()
    {
        m->f(); // 'm' is NOT dependent
    }
}; 
```

花一些时间阅读 C++ 98 标准后，我找不到指定此行为的位置。我希望在“temp.nondep”下找到提及这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:57:21.870

C++98 标准没有定义“非依赖”、“非依赖”或“不依赖”名称的确切含义（您可以在标准文本中找到所有三种形式）。

相反，它选择定义哪些名称和类型取决于 14.6 [temp.res] 及其子章节中的模板参数。应用简单的逻辑......所有不依赖的东西都是不依赖的。仅阅读 14.6.3 [temp.nondep] 无济于事。

# html - 将图像从一个 jsp 发送到另一个 jsp 页面

> ID：12543941
> 
> 赞同：1
> 
> 时间：2012-09-22T12:53:08.850
> 
> 标签：html, image, jsp

我在我的 jsp 页面中有一张图片说`<img id="DrawnImage">`，我想在另一个 jsp 页面上显示相同的图片。这是如何运作的？谢谢。

# javascript - onchange 适用于 ASP.net DropDownList 但不适用于 RadCombobox

> ID：12543944
> 
> 赞同：0
> 
> 时间：2012-09-22T12:53:23.070
> 
> 标签：javascript, asp.net, telerik, onchange, radcombobox

在 ASP.net 中使用 DropDownList Onchange 控件如下： 在 ASCX 中：

```
onchange="dorefreshf();dorefreshs();" 
```

当我用 RadComboBox 替换 DropDownList 时，JS 不起作用？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:15:43.480

尝试将（不是双关语）onchange 更改为 onclick。

# facebook - Facebook-API：获取“喜欢链接/照片”的喜欢链接或照片-响应

> ID：12543945
> 
> 赞同：0
> 
> 时间：2012-09-22T12:53:28.007
> 
> 标签：facebook, facebook-graph-api

使用有效的访问令牌在 Facebook-API [https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)中读取我自己的 Feed会得到如下所示的结果。如何找回我喜欢的链接？

当有一张喜欢的照片时，我得到了类似的回复。如何确定照片 URL？

```
{
  "id": "xxxxxxx_yyyyyy", 
  "from": {
    "name": "XXX", 
    "id": "xxxxxx"
  }, 
  "story": "Peter likes a link.", 
  "story_tags": {
    "0": [
      {
    "id": "xxxxxxx", 
    "name": "Peter", 
    "offset": 0, 
    "length": 11, 
    "type": "user"
      }
    ]
  }, 
  "type": "status", 
  "application": {
    "name": "Likes", 
    "id": "2409997254"
  }, 
  "created_time": "2012-09-21T21:31:06+0000", 
  "updated_time": "2012-09-21T21:31:06+0000", 
  "comments": {
    "count": 0
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:11:29.613

`me/feed`是一个[Post](https://developers.facebook.com/docs/reference/api/post/)数组。这不是实际的喜欢，而是关于那种喜欢的帖子。

现在有办法找出你喜欢什么，除了`like`从 facebook 本身询问应用程序，这是不可能的。

如果你想知道你最近喜欢什么样的照片，你必须浏览所有照片，看看你是否喜欢并按日期排序。这不是不可能用 FQL 编写的，但 facebook 永远不会及时执行这样的查询。相信我，我试过了；）

# gcc - 如何禁用警告：以文字形式保留的空字符？

> ID：12543947
> 
> 赞同：2
> 
> 时间：2012-09-22T12:53:45.793
> 
> 标签：gcc, suppress-warnings

基本上我想忽略有关文字中空字符的警告。

GCC 表示默认情况下会启用此警告。

我找不到`-Wno-`此警告的合适选项。

你会在这样的代码中收到这样的警告

```
const char input[] = "abc^@123"; 
```

where`^@`表示 ASCII 0 字符（您可以使用`vim`via - 输入它，并在光标放在字符上时在命令模式下`Ctrl``v``0`验证它）。`g``a`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:28:19.660

它发生在词法分析器中，看起来您无法禁用检查。:-(这是来自的代码片段`libcpp/lex.c`：

```
if (saw_NUL && !pfile->state.skipping)
  cpp_error (pfile, CPP_DL_WARNING,
         "null character(s) preserved in literal"); 
```

如您所见，在发出警告之前没有检查任何选项。

# jquery - jquery validate 显示 1 条带有错误总数的消息

> ID：12543964
> 
> 赞同：1
> 
> 时间：2012-09-22T12:56:21.493
> 
> 标签：jquery, jquery-validate

而不是在每个表单元素下显示一条消息，如果有超过 5 个错误，我想在表单上方显示 1 条错误消息以及错误总数。

原因：我的表格很大，如果有很多错误，它的高度几乎可以翻倍。

我将如何获得错误总数？

例如，像这样的东西，但这总是返回 1。

```
errorPlacement: function(error, element) {
    var errorCount = 0;
    var i;
    for (i = 0; i < error.length; ++i) {
        errorCount++;
    }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:11:35.303

使用[numberOfInvalids](http://docs.jquery.com/Plugins/Validation/Validator/numberOfInvalids)验证方法。

演示：http: [//jsfiddle.net/szaboat/Q3Mjg/1/](http://jsfiddle.net/szaboat/Q3Mjg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T22:21:05.107

万一其他人遇到这个问题，szaboat 的 jsfiddle 中有一个错误，给我带来了问题。

您需要将函数传递给方法的`invalidHandler`选项，`validate()`并且该函数应接受两个参数。第二个参数是验证器本身，它有一个`numberOfInvalids()`返回总错误计数的方法。

这是[jQuery Validation Plugin Documentation](https://jqueryvalidation.org/validate/#invalidhandler)中的示例。

```
$("#myform").validate({
  invalidHandler: function(event, validator) {
    // 'this' refers to the form
    var errors = validator.numberOfInvalids();
    if (errors) {
      var message = errors == 1
        ? 'You missed 1 field. It has been highlighted'
        : 'You missed ' + errors + ' fields. They have been highlighted';
      $("div.error span").html(message);
      $("div.error").show();
    } else {
      $("div.error").hide();
    }
  }
}); 
```

# dhtmlx - 如何在 DHTMLX Grid 中调用多个过滤器

> ID：12543965
> 
> 赞同：0
> 
> 时间：2012-09-22T12:56:24.027
> 
> 标签：dhtmlx

我想在 DHTMLX Grid 中调用多个函数。

我有一个包含以下 7 列的表

前任：

```
---------------------------------------------------------------
No. | Name | Age | Gender | Marital Status | Education | City |
--------------------------------------------------------------- 
```

我希望这个网格被多个过滤条件过滤。例如：过滤网格以仅包含年龄低于 35 岁的性别“男性”。

目前我的 doFilter() 函数看起来像这样。

```
function doFilter() {
   mygrid.filterBy(3,'M',true);
   mygrid.filterBy(2,function(a){ return (a > 55);} );
} 
```

但网格仅按年龄而不是按性别列过滤。

请让我知道如何在 DHTMLX Grid 中应用多个过滤条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:54:11.193

您需要将其用作

```
mygrid.filterBy(3,'M');
mygrid.filterBy(2,function(a){ return (a > 55);}, true); 
```

第二个 filterBy 调用必须将 true 作为最后一个参数，以保留先前 filterBy 调用的结果。

# jquery - jPicker jQuery 颜色选择器插件

> ID：12543967
> 
> 赞同：2
> 
> 时间：2012-09-22T12:56:31.077
> 
> 标签：jquery, jpicker

我正在使用 jPicker 在需要时动态创建选择器。有没有办法在创建时打开它？就像是`$.jPicker.List[index].show();`

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:31:34.320

我相信您可以像这样在 jPicker 上调用 show 方法：

```
$("#someid").jPicker("show"); 
```

# android - 即使源代码或xml中没有错误，也会在eclipse中的Android项目中出错

> ID：12543976
> 
> 赞同：0
> 
> 时间：2012-09-22T12:57:36.583
> 
> 标签：android, eclipse

突然，当我创建一个新项目时，它向我显示了错误。当我们在 Eclipse 中创建一个新项目时，它会设置一个 Hello World 项目。但这也显示错误，我检查了完美的源代码。而且xml也很完美。我无法确定实际错误在哪里。我尝试清理我的项目，但这也很有效。我尝试了自动构建，但这也很有效。我什至检查了我的 sdk 路径，然后右键单击 Project-> Properties-> Java Build Path 以检查 src 文件是否列为 Source 文件夹。控制台中显示以下错误。

```
[2012-09-22 17:41:03 - Dex Loader] Unable to execute dex: wrapper was not properly     loaded first
[2012-09-22 17:41:03 - HelloHi] Conversion to Dalvik format failed: Unable to execute     dex: wrapper was not properly loaded first 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:03:18.007

只需重新启动 Eclipse 并运行该项目。安装新目标版本时出现错误。安装完成后会自动修复。

# ide - 如何在 IntelliJ IDEA 中生成 void 方法？

> ID：12543977
> 
> 赞同：59
> 
> 时间：2012-09-22T12:58:10.407
> 
> 标签：ide, intellij-idea

在 Eclipse 中，当我键入`main` `ctr`+时`space`，它会为我生成一个`static void main`方法。当我键入`methodName` `ctr`+时`space`，智能代码完成将建议生成名为`methodName`.

如何在 IntelliJ 中自动生成**void 方法？**

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-09-22T13:21:41.083

从代码中的用法创建新方法，例如：

```
...
someMethodName()
... 
```

`Alt``Enter`在红色代码上：

![创建方法](../Images/8afa7d612306d75e9edcdd84069477fc.png)

也可以键入`void methodName()`和使用**Complete Statement** ( `Ctrl``Shift``Enter`)，它将变为：

```
void methodName() {
    |
} 
```

您*可以*按照@Makoto 的回答创建自己的[实时模板](http://www.jetbrains.com/idea/webhelp/live-templates.html)，但有意编程似乎更自然。当您没有方法时，您编写将使用它的代码，然后从意图操作创建方法 - 这样 IDEA 将根据尚不存在的方法用法中的参数和返回类型自动生成方法签名，喜欢`String result = someMethod(stringParam);`。

最后，在 IntelliJ IDEA`main()`中可以使用`psvm``Tab`.

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-04-16T20:06:20.690

## IntelliJ IDEA 15

### 生成`main`方法

*   默认：

    键入`psvm`（**公共**静态无效**主要**）**>**按**_******`Tab`****

*****   使用 Eclipse 中的模板（`main`而不是`psvm`）

    *   **文件**>**设置**或按`Ctrl`+ `Alt`+`S`

        [![文件 > 设置](../Images/d74f321c67904fb21819eec16e7e67b4.png)](https://i.stack.imgur.com/JhECq.png)

    *   **编辑器**>**实时模板**

        [![编辑器实时模板](../Images/64584826a599eb8e8c74926e9db4c8ea.png)](https://i.stack.imgur.com/YnWvD.png)

    *   从右侧，单击“ **+** ”号 >**实时模板**

        [![添加 > 实时模板](../Images/34f6079affa2d8f2ae0490962389aa03.png)](https://i.stack.imgur.com/4hHI2.png)

    *   添加以下详细信息：

        *   缩写：`main`
        *   描述：`main() method declaration`
        *   模板文字：

            ```
            public static void main(String[] args){
              $END$
            } 
            ```

            [![主要的](../Images/15a066453288e407f0a772b056f4539e.png)](https://i.stack.imgur.com/ZOQwN.png)

            您将在其他中看到添加的新模板。

    *   点击**定义**

        [![定义](../Images/b25de31815877b4c86883be16359ec2c.png)](https://i.stack.imgur.com/pehdG.png)

    *   选择**Java** > 按**OK**

        [![选择 Java](../Images/479d794234b4804182a52f3113abc5fd.png)](https://i.stack.imgur.com/UqJs1.png)

    *   输入`main`您的 Java 代码 > 按`Tab`**** 

 ****### 生成`void`方法

*   键入您的**方法名称**，后跟括号（+ 参数，如果您使用它们） - 例如：`m()`或`m(1,2)`> 按`Alt`+ `Enter`> 单击“创建方法 ...”（`Enter`如果已选择，则按）

    [![新方法](../Images/0d0382bf8194e59e64d47efed874cecf.png)](https://i.stack.imgur.com/w771L.png)

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2018-01-29T09:37:11.510

1.  输入 main() 方法模板的缩写： [![在此处输入图像描述](../Images/38cb7735b0597d2e62b9a9daf6d2ad6b.png)](https://i.stack.imgur.com/Zd4SL.png)

2.  按模板调用键。默认情况下，它是选项卡。缩写扩展为 main() 方法。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-22T13:58:26.317

IntelliJ 利用[实时模板](http://www.jetbrains.com/idea/webhelp/live-templates.html)来完成代码。然后是决定您希望使用什么简写名称来命名您的 void 方法。

这是一个例子。在“设置”>“实时模板”中创建一个实时模板，然后选择“其他”框。点击右侧的 +，然后为您的模板提供一个简写的击键名称。

这是我打的那个。使用两个不同的变量`$NAME$`和`$ARGS$`，当我需要填写它们时，我可以在它们之间进行制表符。 `$END$`当我完成其他两个变量的制表符时，光标结束的地方。

```
void $NAME$ ($ARGS$) {
    $END$
} 
```

我使用的简写名称是`pmeth`. 所以，每次我`pmeth`在 Java 文件中输入 IntelliJ，然后点击`Tab`，这个方法就会被填满，我的光标会自动从`$NAME$`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-01-31T16:49:28.140

在 Java 类上键入`psvm`，然后按 Cntrl+Period 键

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-01-18T14:00:49.137

只需键入 main，就会弹出一个建议。按回车。 [![在此处输入图像描述](../Images/51c13b05dde02cd94b15892c1c1a3b42.png)](https://i.stack.imgur.com/SseOh.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-03T22:01:26.090

只需键入 main() 方法模板的缩写：

`psvm then Enter`****

# javascript - 同源策略和从 CDN 提供 JS

> ID：12543978
> 
> 赞同：23
> 
> 时间：2012-09-22T12:58:18.190
> 
> 标签：javascript, same-origin-policy

我想从像 cloudflare 这样的 CDN 提供我的 JavaScript 脚本。

现在我的脚本通过 ajax 与我的应用服务器通信。当我从 CDN 加载这些脚本时，同源策略限制不会发挥作用吗？

假设我的应用在域中：

```
http://app.com 
```

我从

```
http://cdn.com/xyz/all.js 
```

现在，由于我的脚本是从与我的应用程序运行的域不同的域加载的，我想相同的源策略会阻止我与我的应用程序进行 ajax 通信。

我有什么问题吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-22T12:59:58.140

不，它会起作用的。这就是 JSONP 起作用的原因。**脚本的“来源”是它执行的页面，而不是它的来源。**

正如你所要求的，这是一个参考（我找不到更好的，但 Crockford 是众所周知的）

> 令人惊讶的是，src 属性不受同源策略的约束。这意味着可以创建一个脚本元素，该元素可以转到任何服务器，获取脚本并执行它。如果脚本导致传递 JSON 编码的数据，那么这是一件非常有用的事情。不幸的是，没有办法限制脚本或在执行之前对其进行检查。它以与页面中的脚本相同的权限运行。所以脚本可以访问和使用它的cookies。它可以使用用户的授权访问原始服务器。它可以检查 DOM 和 JavaScript 全局对象，并发送它在世界任何地方找到的任何信息。Script Tag Hack 并不安全，应该避免。

[http://javascript.crockford.com/script.html](http://javascript.crockford.com/script.html)

不是真正的参考：如果这不起作用，没有人可以从 Google 的 CDN 中包含 jQuery，然后使用它的`$.ajax`方法。

# iphone - PhoneGap 2.1：升级后（2.0 到 2.1）onDeviceReady 没有被远程调用

> ID：12543979
> 
> 赞同：2
> 
> 时间：2012-09-22T12:58:27.547
> 
> 标签：iphone, cordova, updates

我有一个 iPhone PhoneGap 应用程序。远程服务器中有一个 HTML 文件，项目包（本地）中有另一个 html 文件。

升级到 PhoneGap 2.1 后，在服务器端不再调用我的 onDeviceReady()（监听“deviceready”）方法。我在本地有一个 HTML 文件，并且在本地调用 onDeviceReady 方法没有任何问题。但是在被重定向到网页应用程序后，onDeviceReady() 方法不再被调用。我在使用 PhoneGap 2.0 时没有遇到这种问题。有人知道为什么会这样吗？

我使用控制台创建了一个全新的（模板）PG 项目，并将 www 文件夹添加到我的服务器。在模板项目中，我重定向到模板 phonegap 项目的 www 远程文件夹中的 index.html。我已经意识到，总是会发生同样的问题：没有调用 onDeviceLoad 方法。这就是 phonegap 的模板项目。在本地它工作正常，但不是在服务器上。我允许的 ExternalHosts 已设置为“*”（允许所有主机）。

我发现其他开发人员也有同样的问题：[https ://issues.apache.org/jira/browse/CB-1529](https://issues.apache.org/jira/browse/CB-1529)

有人知道如何解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T19:24:40.410

PhoneGap 开发团队已经回复了我的 Jira Ticket，他们的解决方案解决了我的问题。这是他们写的（https://issues.apache.org/jira/browse/CB-1525）：

要在本地解决此问题，请更改您的 cordova.js 文件中的以下行： execXhr.open('HEAD', "file:///!gap_exec", true);

To: execXhr.open('HEAD', "/!gap_exec", true);

# css - youtube 视频后面的 Dropdwon 菜单，为什么？

> ID：12543983
> 
> 赞同：0
> 
> 时间：2012-09-22T12:59:52.090
> 
> 标签：css, internet-explorer, drop-down-menu, cross-browser, z-index

我的 youtube 视频在 Internet Explorer 7,8 和 9 中与我的导航菜单重叠。我试图将 z-index 设置为高，将所有父元素定位到相对的下拉列表中，放置或放置到 youtube 对象。有修复的人吗？我将在几个小时后启动这个网站...

链接： http: [//nordicinvasion.minex.se/](http://nordicinvasion.minex.se/)

谢谢！

编辑：我自己解决了。我不得不像这样将 wmode 透明标签嵌入：

而不是在参数中以使其正常工作。

它现在已修复。

无论如何，感谢您的快速回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:08:41.700

我认为问题出在您的嵌入标签中。

尝试这个：

```
<embed height="292" width="572" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" src="https://www.youtube.com/v/a9PMfUGEj24?controls=1&amp;hd=1&amp;showinfo=0&amp;version=3&amp;rel=0&amp;autohide=0" /> 
```

不要忘记关闭嵌入标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:10:24.090

这应该可以工作（他们的演示无论如何都在 IE8 中工作）：

```
<param name="wmode" value="opaque" /> 
```

[http://slightlymore.co.uk/flash-and-the-z-index-problem-solved/](http://slightlymore.co.uk/flash-and-the-z-index-problem-solved/)

# asp.net - 奇怪的解析错误——服务器标签格式不正确

> ID：12543986
> 
> 赞同：0
> 
> 时间：2012-09-22T13:00:33.417
> 
> 标签：asp.net, parsing

我有点困惑，多年来我一直试图弄清楚这有什么问题，在此之前它一直在工作，然后突然停止了。我得到的错误是：

> “/”应用程序中的服务器错误。解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：服务器标记格式不正确。
> 
> 源错误：

```
Line 20:            <tr>
Line 21:               <td width="200" valign="top" align="center">
Line 22:                  <img id="imageShow"  runat="server" src="<%#  DataBinder.Eval(  Container.DataItem, "Link" ) %><%# DataBinder.Eval( Container.DataItem, "ImageName")%>" width="200px" height="150px" onclick ="ShowImage" alt="already done" />
Line 23:               </td>
Line 24:              <td width="200"> 
```

源文件：/WebForm1.aspx 行：22

我的代码如下所示：

```
<asp:Panel id="pnlShowItems" runat="server">
<asp:DataList id="d1Items" runat="server" DataKeyField="ImageID" >
 <ItemTemplate>
 <table width="400" border="0" cellspacing="0" cellpadding="0">
       <tr>
          <td width="200" valign="top" align="center">
           <img id="imageShow"  runat="server" 
src="<%# DataBinder.Eval(  Container.DataItem, "Link" ) %><
%# DataBinder.Eval( Container.DataItem, "ImageName")%>" width="200px" height="150px"
 onclick ="ShowImage" alt="already done" />
          </td>
         <td width="200">
            <strong><%#  DataBinder.Eval(  Container.DataItem, "Link" ) %></strong>
          <br />
         Cost: $<%# DataBinder.Eval(Container.DataItem, "PageDetailID")%><br /><br />
<asp:Button id="btnAddToCart" runat="server"
                   Text="Add To Cart" CommandName="Edit"/>
         </td>
      </tr>
      <tr>
          <td colspan="2" width="400"><hr height="1" />
           </td>
      </tr>
   </table>
</ItemTemplate>
 </asp:DataList>
</asp:Panel> 
```

后面的代码是这样的：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        SqlConnection conn;
        SqlCommand comm;
        SqlDataReader reader;

        string connectionString = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString;
        conn = new SqlConnection(connectionString);
        comm = new SqlCommand(@"SELECT ImageID, RTRIM(LTRIM(ImageName ))  ImageName,    Description, 'Images/' Link,    PageDetailID FROM dbo.Images", conn);

        conn.Open();
        reader = comm.ExecuteReader();

        reader.Read();

        d1Items.DataSource = reader;
        d1Items.DataBind();

        conn.Close();

    }

    public void ShowImage() 
    {

        DataListItem dli = this.d1Items.Controls[this.d1Items.Controls.Count - 1] as DataListItem;
        Image img = dli.FindControl("imageShow") as Image;

        Image1.ImageUrl = img.ImageUrl;

    } 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-08T12:59:44.287

问题在这里：

```
src=
   "<%# DataBinder.Eval(Container.DataItem, "Link") %>" +
   "<%# DataBinder.Eval(Container.DataItem, "ImageName")%>" 
```

问题在于嵌套在引号内的引号。

请注意，即使是 StackOverflow 的代码格式，“Link”和“ImageName”是如何成为该行中的一段代码的。

尝试用单引号替换双引号：

```
src=
   '<%# DataBinder.Eval(Container.DataItem, "Link") %>' +
   '<%# DataBinder.Eval(Container.DataItem, "ImageName")%>' 
```

如果这对您没有帮助（老问题），也许它会帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:37:31.387

您可以调整您的代表 - 我建议您使用`imageButton`

```
<asp:ImageButton
 id="imageShow"  
 runat="server" 
 ImageUrl="<%#  DataBinder.Eval(  Container.DataItem, "Link" ) + DataBinder.Eval( Container.DataItem,      "ImageName")%>" width="200px" height="150px" onclick ="ShowImage" alt="already done" />

void ShowImage(Object sender, EventArgs e) 
{

} 
```

注意：问题出在您的代表签名上

# android - 如何处理 Android 中的 OutOfMemoryError？

> ID：12543987
> 
> 赞同：1
> 
> 时间：2012-09-22T13:00:36.770
> 
> 标签：android, json, out-of-memory

我以这种方式将视频转换为base64格式：

```
if (requestCode == VIDEO_REQ) {
    Uri vid = data.getData();
    String  videoPath = getRealPathFromURI(vid);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    FileInputStream fis = null;

    try {
        fis = new FileInputStream(new File(videoPath));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    byte[] buf = new byte[1024];
    int n;
    try {
        while (-1 != (n = fis.read(buf)))
            baos.write(buf, 0, n);
    } catch (IOException e) {
        e.printStackTrace();
    }

    byte[] videoBytes = baos.toByteArray();
    String test = Base64.encodeBytes(videoBytes);
    JSONParsingXML jsonp=new JSONParsingXML();
    try {
        jsonp.imageUpload(test);
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

我这样编写服务代码：

```
 public JSONObject imageUpload(String userid,String deviceid,String sessionid,String image){
    JSONObject jsonResponse =null;
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("some url/");
    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
        nameValuePairs.add(new BasicNameValuePair("userid",userid ));
        nameValuePairs.add(new BasicNameValuePair("deviceid", deviceid));
        nameValuePairs.add(new BasicNameValuePair("sessionkey",sessionid ));
        nameValuePairs.add(new BasicNameValuePair("imagebase64", image));
        nameValuePairs.add(new BasicNameValuePair("type", "video"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        // Execute HTTP Post Request
        System.out.println(httppost);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity responseEntity = response.getEntity();//An entity that can be sent or received with an HTTP message. Entities can be found in some requests and in responses, where they are optional.
        String changeTIDRec = EntityUtils.toString(responseEntity);
        System.out.println(changeTIDRec);
        Log.v("responseEntity",""+responseEntity);
        jsonResponse = new JSONObject(changeTIDRec);//insert the response value into JSONObject.      
        Log.v("jsonResponse",""+jsonResponse);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    } catch(Exception e){

    }

        return jsonResponse;
 } 
```

我收到错误消息

```
09-22 18:16:05.093: ERROR/AndroidRuntime(5455): FATAL EXCEPTION: main
09-22 18:16:05.093: ERROR/AndroidRuntime(5455): java.lang.OutOfMemoryError
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:97)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:144)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at java.lang.StringBuffer.append(StringBuffer.java:126)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at java.net.URLEncoder.encode(URLEncoder.java:111)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at org.apache.http.client.utils.URLEncodedUtils.encode(URLEncodedUtils.java:184)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at org.apache.http.client.utils.URLEncodedUtils.format(URLEncodedUtils.java:163)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:71)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at com.player.webservices.WebServices.imageUpload(WebServices.java:323)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at com.player.jsonparsing.JSONParsingXML.imageUpload(JSONParsingXML.java:191)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at com.player.presentationlayer.CreateMessageActivity.onActivityResult(CreateMessageActivity.java:254)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.app.Activity.dispatchActivityResult(Activity.java:3890)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3511)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3557)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.app.ActivityThread.access$2800(ActivityThread.java:125)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2063)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.os.Looper.loop(Looper.java:123)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at java.lang.reflect.Method.invokeNative(Native Method)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at java.lang.reflect.Method.invoke(Method.java:521)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-22 18:16:05.093: ERROR/AndroidRuntime(5455):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:13:10.207

您可以尝试在 Application.onlowMemory 中捕获它——但这会给您带来什么？如果您的视频很大，那么您不应该使用 ByteArrayOutputStream 而是某种流媒体方法，即。读取视频数据块，对其进行转换，然后进一步发送。或将其转换但将结果放入 sd 卡内存。将整个视频放入 ByteArrayOutputStream 将始终以 OutOfMemory 结束。

# android - 支持 ListFragment 问题

> ID：12543992
> 
> 赞同：1
> 
> 时间：2012-09-22T13:01:27.673
> 
> 标签：android, expandablelistview, android-listfragment, android-support-library

我目前正在使用 ListFragment 和 ExpandableListView 来显示一些由 SimpleCursorTreeAdapter 支持的数据。一切正常，但我最近切换到 support.v4 包，以利用 ViewPager 类在选项卡之间滑动。滑动和现在使用 support.v4.Fragment 的所有其他类工作正常，但我的 ListFragment 已停止工作。

没有抛出异常，但 ListFragment 根本不显示任何项目。

这是 ListFragment 的代码：

```
public class VisuTextFragment extends ListFragment {

    private Storage mStorage;
    private int mFilterSensortype;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mStorage = Storage.newSQLiteDatabase(getActivity());
        mFilterSensortype = -1;
        setHasOptionsMenu(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        return inflater.inflate(R.layout.l_visu_text, container, false);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        fillData();
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.textvis, menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_filter:
            final Dialog dialog = new Dialog(getActivity());
            dialog.setTitle("Filter by sensor type");
            dialog.setContentView(R.layout.l_dialog_filter);

            Button ok = (Button) dialog.findViewById(R.id.filter_ok);
            ok.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                int filter = Integer.parseInt(((EditText) dialog.findViewById(R.id.et_filter)).getText().toString());
                    mFilterSensortype = filter;
                    fillData();
                    dialog.dismiss();
                }
            });

            Button cancel = (Button) dialog.findViewById(R.id.filter_cancel);
            cancel.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    dialog.cancel();
                }
            });

            dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
            dialog.show();
            break;
        }
        return true;
    }

    @Override
    public void onResume() {
        super.onResume();
        fillData();
    }

    public void fillData() {
        Log.d("VisuTextFragment", "fillData()");
        Cursor cursor;
        if (mFilterSensortype == -1)
            cursor = mStorage.queryAllAsCursor();
        else
            cursor = mStorage.query(mFilterSensortype);

        TextVisCursorAdapter adapter = new TextVisCursorAdapter(
                getActivity(),
                cursor,
                R.layout.l_visu_text_group,
                new String[] { Storage.ELEMENT_ID, Storage.ELEMENT_ENTRIES_DATE, Storage.ELEMENT_ENTRIES_LATITUDE, Storage.ELEMENT_ENTRIES_LONGITUDE, Storage.ELEMENT_ENTRIES_SENSORTYPE },
                new int[] { R.id.id, R.id.date, R.id.latitude, R.id.longitude, R.id.sensortype },
                R.layout.l_visu_text_child,
                new String[] { Storage.ELEMENT_MEASUREMENTS_VALUE },
                new int[] { R.id.value });

        ListView lv = (ListView) getListView();
        ExpandableListView elv = (ExpandableListView) lv;
        elv.setGroupIndicator(null);
        elv.setAdapter(adapter);
    }
} 
```

这是我正在使用的布局（不知道是否有帮助）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical">
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/id"/>
    <TextView
        android:gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:text="@string/date"/>
    <TextView
        android:gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:text="@string/latitude"/>
    <TextView
        android:gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:text="@string/longitude"/>
    <TextView
        android:gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/sensortype"/>
</LinearLayout>
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ExpandableListView android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:transcriptMode="normal"/>
    <TextView android:id="@+id/android:empty"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/no_entries"/>

</LinearLayout>
</LinearLayout> 
```

仅供参考：显示了布局文件中的 TextView，但列表本身却丢失了。甚至没有显示空列表的 TextView。

希望你能帮忙。

编辑：我已经通过它们相应的方法检查了`ExpandableListView`的宽度和高度，并且都返回值 0。它的`getCount()`方法返回 347。所以 View 肯定存在并且被正确填充，但由于某些奇怪的原因，它没有被绘制到屏幕。

EDIT2：好的，我解决了这个问题。问题是`LinearLayout`托管在`TextViews`实际列表顶部的`layout_height`属性设置为`fill_parent`，这对于不支持的版本以及 eclipse 中的作曲家来说奇怪的是没有问题，因为它们都以这种方式工作而我没有甚至注意到它被设置为`fill_parent`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:21:47.287

好的，我解决了问题。问题是在实际列表顶部托管 TextViews 的 LinearLayout 将其 layout_height 属性设置为 fill_parent，奇怪的是，这对于不支持的版本以及 eclipse 中的作曲家来说都没有问题，因为它们都以这种方式工作并且我什至没有注意到它被设置为fill_parent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:07:27.197

`getListView()`在 a`ListFragment`中是专门寻找一个 listview id 的`@id/android:list`。我不确定像您那样在其中添加“+”是否会产生影响，但这是我会尝试的第一件事。

您还注意到您切换到支持库...您是否切换了所有适当的方法调用？例如，`getFragmentManager`您不需要使用`getSupportFragmentManager`and 而不是使用 an`Activity`来控制片段，而是需要使用`FragmentActivity`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:38:25.003

我认为使用 android:id="@android:id/list" 而不是 android:id="@+id/android:list" 是黄油，而且，在你的情况下，扩展 ListFragment 真的没用，只需使用为您的可扩展列表分段并使用 findViewById。

你能改变：

```
@Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

    } 
```

至：

```
public void onActivityCreated(Bundle aSavedInstanceState) {

        super.onActivityCreated(aSavedInstanceState);
fillData();
    } 
```

确保调用了您的 fillData 方法。

# java - 在 do while 循环中检查条件的有效方法？

> ID：12543997
> 
> 赞同：3
> 
> 时间：2012-09-22T13:02:04.283
> 
> 标签：java, loops, if-statement, while-loop, do-while

我正在使用 Do While 循环，但我必须测试在循环中途是否满足该条件，以便如果满足，它将跳过该部分。有没有一种有效的方法来做到这一点？

例如，我目前有这样的事情：

```
do {
    method1;
    if (!condition) 
        method2;
} while (!condition); 
```

编辑：我道歉，我认为我一开始没有说清楚。条件开始为假，并且在循环期间的某个时刻，其中一种方法会将（全局）“条件”设置为真，此时我希望循环立即结束。我只是认为必须在其中测试循环的结束条件很麻烦，并且想知道我是否遗漏了任何明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:19:27.677

请提供有关方法的更多信息。如果您可以从 method1/2 返回条件，请尝试：

```
do {
    method1;
} while (!condition && !method2) 
```

或者如果您通过引用传递并且方法返回始终为真：

```
while (method1 && !condition && method2 && !condition); 
```

或者：

```
while (!method1 && !method2); 
```

**编辑：**如果：

```
public boolean method1/2 { ... logic ... ; condition = true; return condition;} 
```

这几乎不取决于你会做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T13:25:57.367

我假设您正在寻找的是避免这种额外的效率测试，因为大多数时间都没有满足“条件”（许多中的一个）......这种优化可以通过更深入地研究方法1和方法 2 （或他们正在处理的数据）并在循环之外添加第一个“假步骤”，这将仅在第一次禁用方法 2 的处理。看起来像这样：

```
prepare_for_loop_entering
do {
   method2
   method1;
} while (!condition); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:04:34.040

如果`condition`在您引用的所有地方都相同，则

```
do {
    method1;
    method2;
} while (!condition); 
```

因为在您的 while 循环中，除非您将其设置为 true，否则您的 while 循环`condition`将始终为 false（`!condition`将是 true），而`method1;`不是`break;`将其设置为 true`method1;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:05:26.660

下面的代码怎么样：

```
if(condition)
break; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T13:07:16.943

那这个呢：

```
 while (!condition) {
   method1;
if(!condition)
   method2;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T13:16:14.417

这个怎么样：

```
method1;
while (!condition) {
   method2;
   method1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-23T18:38:00.823

使用最通用的循环形式：

```
while (true)
{
    method1;
    if (!condition) break; 
    method2;
} 
```

**进一步说明**

带有条件“条件”的 while 循环完全像：

```
while (true)
{
    if (condition) break;
    method1;
    method2;
} 
```

do-while 就像：

```
while (true)
{
    method1;
    method2;
    if (condition) break;
} 
```

我们都不想要这些，因此上面的代码。