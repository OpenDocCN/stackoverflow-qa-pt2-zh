# StackOverflow 问答 14394000-14394999

# php - 错误消息和安全性

> ID：14394000
> 
> 赞同：0
> 
> 时间：2013-01-18T07:06:26.067
> 
> 标签：php

我已经读过在生产服务器上显示 php 中的错误消息是一种安全风险。您能否展示此类错误消息的**示例以及****它如何容易受到攻击**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:17:31.963

这是因为 error_message 可能包含潜在的敏感信息，例如

1.  服务器上的路径信息
2.  有关您的数据库结构的信息（表名等）
3.  有关您正在使用的软件及其内部工作的信息（您正在使用什么 CMS 软件、哪个版本等...）
4.  变量名
5.  有关您正在使用的潜在风险 PHP 扩展的信息

（待延长）

简而言之，远程用户可能会获得他不需要的信息。此信息可能对攻击感兴趣。但它更多地是关于**潜在**的。

或者换句话说，当您禁用错误消息的显示时，您修复了**潜在**的安全风险

# sql - 如何在视图中添加 ROW_NUMBER()？

> ID：14394002
> 
> 赞同：7
> 
> 时间：2013-01-18T07:06:28.643
> 
> 标签：sql, postgresql, sql-view, row-number

在 PostgreSQL 8.4 中，我想从 3 个具有 id 的表中创建一个视图。所以我想在我看来有这个结构：

```
num serial,
name_dispatcher character varying(250)
the_geom geometry 
```

我可以从表`name_dispatcher`中进行选择：`the_geom`

```
 CREATE VIEW lineView
      AS SELECT 'name' AS name_dispatcher, the_geom
      FROM line1
      UNION
      SELECT 'name' AS name_dispatcher, the_geom
      FROM line2
      UNION
      SELECT 'name' AS name_dispatcher, the_geom
      FROM line3 
```

如何`num`在视图中创建列？

**更新**

我找到了一个解决方案：

```
ROW_NUMBER() OVER(ORDER BY lineView.voltage) 
```

但我不知道如何在`ALTER VIEW`. 我怎么把它放在那里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T08:30:37.803

您不能用于`ALTER VIEW`删除或添加列。[我在 ALTER VIEW 上](http://www.postgresql.org/docs/current/interactive/sql-alterview.html)引用手册：

> `ALTER VIEW`更改视图的各种辅助属性。（如果要修改视图的定义查询，请使用`CREATE OR REPLACE VIEW`。）

但一个简单的`CREATE OR REPLACE VIEW`不会削减它。[手册中的另一句话](http://www.postgresql.org/docs/current/interactive/sql-createview.html)：

> 新查询必须生成与现有视图查询相同的列

所以`DROP`和`CREATE`观点：

```
DROP VIEW lineview;

CREATE VIEW lineview AS
SELECT *, row_number() OVER(ORDER BY ???) AS num
FROM (
   SELECT 'name' AS name_dispatcher, the_geom
   FROM line1

   UNION
   SELECT 'name' AS name_dispatcher, the_geom
   FROM line2

   UNION
   SELECT 'name' AS name_dispatcher, the_geom
   FROM line3
   ) x 
```

我使用子查询是因为我假设您要添加`row_number()`到所有行。你的问题在这方面很模糊。
如果您只想要一个没有特定顺序的唯一 ID，请使用`row_number() OVER()`.

# bash - bash：定义环境变量的变量

> ID：14394003
> 
> 赞同：1
> 
> 时间：2013-01-18T07:06:35.133
> 
> 标签：bash, environment-variables

在 Bash 中，这项工作：

```
FOO=foo BAR=bar a_command 
```

但是如何使它起作用呢？

```
ENV="FOO=foo BAR=bar"
$ENV a_command 
```

我有：

```
FOO=foo: command not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:19:17.323

看看这是否有帮助：

```
 sh -c "$ENV a_command" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:12:55.830

这就是[`env`](http://man.cx/env)命令的用途

```
env $ENV a_command 
```

请注意，您看到的行为[记录在手册](http://www.gnu.org/software/bash/manual/bashref.html#Simple-Command-Expansion)中——shell 在扩展变量*之前*查找变量分配。

# mongodb - mongodb分片自增分片键

> ID：14394004
> 
> 赞同：1
> 
> 时间：2013-01-18T07:06:39.777
> 
> 标签：mongodb, sharding

在阅读了有关分片、分片键和块迁移的文档后，我仍然无法掌握一个概念。

任何试图描述为什么不选择自动增量分片键的概念的人都告诉我，这是由于 mongo 将始终保持写入同一个分片的结果，因此这将增加负载，因为该分片将处理连续写入并迁移块。

我的问题是，为什么会这样？为什么自增值会导致写入请求总是被路由到一个特定的分片？分片的全部意义不是 mongos 应该知道什么是“最不”平衡的分片，而是写入这个分片，还是我理解错了？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:24:32.853

问题是如果您使用单调递增的键，Mongo 无法确定分片的键范围。这是一个示例：

假设您有一个包含键 10,20,30,40,50,60 的集合如果 mongo 必须创建两个分片，它可能会假设键范围为：[10,30] 和 [31,60]（或类似）。但是如果你继续写更大的键，它们总是会进入第二个范围。Mongo 会调整范围，但它永远无法知道下一个键是什么，它总是会进入最后一个范围。另一方面，如果您使用一些分布良好的键，您的写入序列将看起来更像：10、60、30、40、50... 并且在写入前两个键之后，mongo 将创建上述范围，并且您的下一个键将适合第一个或第二个。这将导致 mongo 之间共享性能，并且不会强制 mongo 进行重新平衡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:12:49.310

当前的分片机制存在这个问题。基本上，每个分片将提供其键位于连续范围内的数据。如果我们选择一个自增键，所有的写操作将只路由到一个分片，该分片提供比所有其他分片更大的键的数据。

这是使用自动增量键收集的问题。幸运的是，我们可以选择任何属性作为分片键。在大多数情况下，我们不会被迫使用“_id”作为分片键。如果对象具有合适的属性，例如博客应用程序的“用户名”，我们可以将其用作分片键。如果没有合适的属性，我们可以为每个对象添加一个属性列作为分片键，这个属性可以使用一些简单的哈希算法来计算。例如，如果我们有一个自动递增的 _id，我们可以简单地计算分片键：

```
sharding_key = _id % 257 
```

在您拥有超过 257 个分片之前，上面的哈希应该足够好。

顺便说一句，自动生成的 ObjectId 不是 sharding-key 的好选择，因为它是基于时间的。

此外，MongoDB 2.3 中有一个新功能支持哈希键（请参阅[https://jira.mongodb.org/browse/SERVER-2001](https://jira.mongodb.org/browse/SERVER-2001)和[MongoDB 2.4 发行说明](http://docs.mongodb.org/manual/release-notes/2.4/#hashed-sharding)）。

# mysql - 创建用户时更正mysql语法错误

> ID：14394005
> 
> 赞同：3
> 
> 时间：2013-01-18T07:06:40.973
> 
> 标签：mysql, permissions

所以我得到了非常常见的`ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)`mysql错误。我已经尝试了论坛上的所有典型修复，通过 mysql_safe 方法登录，然后尝试重置我的 root 密码。但是，这样做时它会返回；

```
UPDATE user SET password=PASSWORD("PASSWORD")WHERE user="root";
Query OK, 0 rows affected (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 0 
```

因此，由于没有行受到影响，我假设没有用户实际更改。我试图创建一个用户：

```
CREATE USER 'root'@'localhost' IDENTIFIED BY 'root'
    -> GRANT ALL ON *.* TO 'root'@'localhost'
    -> flush privileges;

However this returns with ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GRANT ALL ON *.* TO 'root'@'localhost' 
```

查看当前用户是什么：

```
mysql> SELECT user();
+--------+
| user() |
+--------+
| root@  | 
+--------+ 
```

我认为语法错误是“root”之后的@之后没有任何内容。如何将此信息编辑为 root@localhost 并更正问题？

更新

在仔细阅读了 mysqld 文档后，我进入了这个完美运行的部分。

停止 mysqld 并使用 --skip-grant-tables 选项重新启动它。这使任何人都可以在没有密码和所有权限的情况下进行连接。因为这是不安全的，您可能希望将 --skip-grant-tables 与 --skip-networking 结合使用以防止远程客户端连接。

使用以下命令连接到 mysqld 服务器：

```
shell> mysql 
```

在 mysql 客户端中发出以下语句。将密码替换为您要使用的密码。

```
mysql> UPDATE mysql.user SET Password=PASSWORD('MyNewPass')
    ->                   WHERE User='root';
mysql> FLUSH PRIVILEGES; 
```

FLUSH 语句告诉服务器将授权表重新加载到内存中，以便它注意到密码更改。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T07:09:45.247

应该是三个sql语句，

```
CREATE USER 'root'@'localhost' IDENTIFIED BY PASSWORD 'root';
GRANT ALL ON *.* TO 'root'@'localhost';
FLUSH PRIVILEGES; 
```

*   [创建用户](http://www.ntchosting.com/mysql/create-user.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-14T12:10:48.237

当我尝试登录新安装的 mysql 服务器时，我收到了相同的错误消息（用户'root'@'localhost' 的访问被拒绝（使用密码：YES））。

我不知道在 redhat6.5 上安装 mysql-community-server (rpm) 时，会创建一个超级用户帐户 'root'@'localhost' 并设置超级用户的密码并将其存储在错误日志文件中，然后为了揭示它，我应该使用：

*   shell > grep '临时密码' /var/log/mysqld.log

我只是检查“mysqld.log”文件中的密码并使用它来登录。进入后，我已经更改了默认密码。

[这是mysql页面的链接以供参考](https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/#repo-qg-yum-fresh-install)

# objective-c - 我可以使用 GCD 限制并发请求吗？

> ID：14394014
> 
> 赞同：7
> 
> 时间：2013-01-18T07:07:39.823
> 
> 标签：objective-c, grand-central-dispatch

我正在从数据库异步获取数据。有什么办法可以将并发请求限制为一个数字，但仍然执行其余的请求？

我看到[一篇](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)使用 NSOperation 和 NSOperationQueue 的帖子，但这对我来说太复杂了。还有其他方法吗？GCD能做到吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T04:46:31.430

像这样的东西：

```
...
//only make one of these obviously :) remaking it each time you dispatch_async wouldn't limit anything
dispatch_semaphore_t concurrencyLimitingSemaphore = dispatch_semaphore_create(limit);
...
//do this part once per task, for example in a loop
dispatch_semaphore_wait(concurrencyLimitingSemaphore, DISPATCH_TIME_FOREVER);
dispatch_async(someConcurrentQueue, ^{
    /* work goes here */
    dispatch_semaphore_signal(concurrencyLimitingSemaphore);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T13:36:14.583

**对于同步**任务的有限并发执行，我建议使用此解决方案：

```
func dispatch_async_batch(tasks: [() -> ()], limit: Int, completion: (() -> ())?) {
    if tasks.count > 0 || completion != nil {
        let q = dispatch_queue_create("dispatch_async_batch", DISPATCH_QUEUE_CONCURRENT);
        let sema = dispatch_semaphore_create(limit);

        dispatch_async(q, {
            for task in tasks {
                dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER)
                dispatch_async(q, {
                    task()
                    dispatch_semaphore_signal(sema)
                })
            }

            if let completion = completion {
                dispatch_barrier_async(q, completion)
            }
        })
    }
} 
```

这种方法的开销很小：除了当前正在执行的任务之外，只有一个额外的任务被放在队列中（即一个额外的线程）。当你有大量的任务时，它特别好。

这个[gist](https://gist.github.com/werediver/a7cc14177f67e52ff67fbeaf37acb55c)是一个随时可用的演示，只需将代码放入 Playground 即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-16T19:22:57.993

简单的方法是设置 n 个串行队列

```
struct dataCalls {
    let n:Int
    func fetchIt(){
        print ("Done",n)
    }

    init(n:Int){
        self.n=n
    }
}

var dataCallsArray: [dataCalls]=[]
var qArray:[dispatch_queue_t] = []
let n = 5
for i in 1...50 {
    dataCallsArray.append(dataCalls(n:i))
}

for _ in 1...n {
    qArray.append(dispatch_queue_create(nil, nil))
}

var i = 0
for data in dataCallsArray {
    dispatch_async(qArray[i%n], {() -> Void in data.fetchIt()})
    i++
} 
```

# c# - 隐式转换列表 列出

> ID：14394016
> 
> 赞同：28
> 
> 时间：2013-01-18T07:07:59.750
> 
> 标签：c#, linq, list, linq-to-entities

我正在使用 Linq 到实体。

有一个实体“订单”，它有一个可以为空的列“SplOrderID”。

我将我的订单列表查询为

```
List<int> lst = Orders.where(u=> u.SplOrderID != null).Select(u => u.SplOrderID); 
```

我理解这是因为 SplOrderID 是一个可为空的列，因此 select 方法返回可为空的 int。

我只是希望 LINQ 有点聪明。

我该如何处理？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-18T07:10:59.190

在选择属性时，只需获取可为空的值：

```
List<int> lst =
  Orders.Where(u => u.SplOrderID != null)
  .Select(u => u.SplOrderID.Value)
  .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:39:33.747

林克

```
var lst = (from t in Orders
           where t.SplOrderID.HasValue
           select new Order
           {
             SplOrderID = t.SplOrderID
           }).Select(c => c.SplOrderID.Value).ToList(); 
```

或者

```
 var lst = (from t in Orders
               where t.SplOrderID.HasValue
               select t.SplOrderID.Value).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-07T14:41:07.657

我发现你的问题试图解决同样的问题，经过几次尝试，我得到了这个解决方案，`int`为列表中的每个属性强制转换`select`

```
List<int> lst = Orders.where(u=> u.SplOrderID != null).Select(u => (int)u.SplOrderID); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-22T15:57:08.380

## 有用的帮助/扩展方法：

我通常对其他答案中提到的工作使用一些辅助扩展方法：

```
public static class IEnumerableExtensions
{
    public static IEnumerable<TKey> GetNonNull<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey?> keySelector) 
        where TKey : struct
    {
        return source.Select(keySelector)
            .Where(x => x.HasValue)
            .Select(x => x.Value);
    }

    // the two following are not needed for your example, but are handy shortcuts to be able to write : 
    // myListOfThings.GetNonNull()
    // whether myListOfThings is List<SomeClass> or List<int?> etc...
    public static IEnumerable<T> GetNonNull<T>(this IEnumerable<T?> source) where T : struct
    {
        return GetNonNull(source, x => x);
    }

    public static IEnumerable<T> GetNonNull<T>(this IEnumerable<T> source) where T : class
    {
        return GetNonNull(source, x => x);
    }

} 
```

在您的情况下使用：

```
// will get all non-null SplOrderId in your Orders list, 
// and you can use similar syntax for any property of any object !

List<int> lst = Orders.GetNonNull(u => u.SplOrderID); 
```

* * *

## 对于不想在转换时简单地忽略空值的读者

值得一提的是，`GetValueOrDefault(defaultValue)`yet 的潜在用途，也许你想保留原来的空值，但将它们转换为一些默认/哨兵值。（作为`defaultValue`参数给出）：

对于您的示例：

```
// this will convert all null values to 0 (the default(int) value)
List<int> lst =
     Orders.Select(u => u.GetValueOrDefault())
     .ToList();

// but you can use your own custom default value
const int DefaultValue = -1;
List<int> lst =
     Orders.Select(u => u.GetValueOrDefault(DefaultValue))
     .ToList(); 
```

# java - 如何通过接受类名动态创建列表

> ID：14394020
> 
> 赞同：0
> 
> 时间：2013-01-18T07:08:11.953
> 
> 标签：java, arraylist, hql

我是 Java 语言的新手。我有一个案例，我想动态创建一个列表。例如

```
 public List getData(String classname)
{
   List<classname> ob = querywithParams.list();
    return ob;
 } 
```

我会像这样调用这个函数

```
List<Student> ob=getData("Student"); 
```

用Java怎么能实现这个东西？我需要这个来创建一个用于 HQL 执行的通用数据库适配器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T07:11:02.960

尝试这个

```
 @SuppressWarnings("unchecked")
    public <T>  List<T> getData(String classname, Class<T> pClass)
    {
       List<T> ob = querywithParams.list();
        return ob;
     } 
```

我没有看到你`string classname`在你的方法中使用它，所以你不妨删除它（如果你想要它只是为了指定类类型）。因此，如果您删除字符串参数，示例调用将采用以下形式：

```
@SuppressWarnings("unchecked")
public <T>  List<T> getData(Class<T> pClass)
{
   List<T> ob = querywithParams.list();
    return ob;
 }

// example invocation from some other method
    List<Student> ob = getData(Student.class); 
```

# sql-server-2008 - SQL Server 2008 唯一键约束

> ID：14394022
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:08:33.523
> 
> 标签：sql-server-2008, key, unique, unique-constraint

我有一个表调用测试，有四个字段。我已经在我希望我的记录唯一的表上创建了复合唯一键。我们正在跟踪以前版本的记录并标记所有旧记录 isdeleted=1，但问题是，我的唯一密钥不允许我使用两个或多个 isdeleted=1 的相同记录

```
Create table test (ApplicationID int,IsDeleted bit
                  CONSTRAINT test_uck UNIQUE (ApplicationID,IsDeleted)                
                  )
go
insert into test values(1,0)
insert into test values(1,1)
insert into test values(1,1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:14:27.003

这是你想要的吗：

```
Create table test (
    ApplicationID int not null,
    IsDeleted bit not null
)
create unique index IX_UniqueApplications on test (ApplicationID)
     where IsDeleted=0
go
insert into test values(1,0)
insert into test values(1,1)
insert into test values(1,1) 
```

它被称为[过滤索引](http://msdn.microsoft.com/en-us/library/cc280372%28v=sql.105%29.aspx)。您不希望 和 的组合`ApplicationID`是唯一的 -如果它没有被删除，`IsDeleted`您只是希望它是唯一的。`ApplicationID`这是两个完全不同的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:15:08.220

尝试添加版本号字段

```
vNum int 
```

到您的表，然后扩展您的主键以包含该字段。

由于无论如何您都在跟踪记录的先前版本，因此您可以简单地获取该记录的最后一个版本号并将其增加一个以用于下一个。

# php - 如何修复致命错误：php中的内存不足（已分配）（试图分配字节）

> ID：14394024
> 
> 赞同：2
> 
> 时间：2013-01-18T07:08:43.203
> 
> 标签：php

我将文件 csv 的值读取为：

```
 //$mypath . '/' . $filename <=> ../abc.csv
 $val = file_get_contents($mypath . '/' . $filename);                                       

 $escaped = pg_escape_bytea($val);

 $model->addFileImport($tmp, $data['email'], $escaped); 
```

我的文件大约 100MB。在 php.ini 设置中：memory_limit = 128M

但它仍然`:Fatal error: Allowed memory size of 8388608 bytes exhausted (tried to allocate 133120 bytes) in...`在行显示错误： `$val = file_get_contents($mypath . '/' . $filename);`

我已通过 add 修复 `ini_set('memory_limit', '-1');`：

```
 //$mypath . '/' . $filename <=> ../abc.csv
 ini_set('memory_limit', '-1');
 $val = file_get_contents($mypath . '/' . $filename);                                       

 $escaped = pg_escape_bytea($val);

 $model->addFileImport($tmp, $data['email'], $escaped); 
```

但它显示错误：

> 致命错误：第 112 行 C:\wamp\www\joomlandk\components\com_servicemanager\views\i0701\view.html.php 中的内存不足（已分配 230686720）（试图分配 657099991 字节）

在行`$escaped = pg_escape_bytea($val);`

为什么？如何修复该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:19:38.967

根据[文档](http://php.net/manual/en/function.pg-escape-bytea.php)

> pg_escape_bytea() 为 bytea 数据类型转义字符串。它返回转义字符串。
> 
> 当您选择一个 bytea 类型时，PostgreSQL 返回以 '\' 为前缀的八进制字节值（例如**\032**）。用户应该手动转换回二进制格式。

意味着单个输入字节给出 4 个字节，即初始大小的 4 倍

您需要大量 RAM 来处理您的文件（也许您的系统无法分配那么多内存——即使没有 PHP 限制）。一个解决方案是从 40MB 块中处理它，例如使用[fread()](http://jp1.php.net/manual/en/function.fread.php)和[fwrite()](http://jp1.php.net/manual/en/function.fwrite.php)函数。

```
 $val = file_get_contents($mypath . '/' . $filename); 
```

将占用 100MB - 因此下一行占用 400 MB，总共 500 MB。您需要从 *file_get_contents* 中读取更少的内容，例如一次只读取 20（或 40）MB

*   *使用fread*读取 20MB 的文件（而不是 file_get_contents）
*   使用 *pg_escape_bytea* 处理 20MB（总共 100MB）
*   重复该过程，直到文件被完全处理

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T07:12:46.363

尝试添加：

```
ini_set('memory_limit', '700M'); 
```

# django - Heroku，Django 应用程序在启动时崩溃，“不是有效的端口号”

> ID：14394027
> 
> 赞同：1
> 
> 时间：2013-01-18T07:08:58.057
> 
> 标签：django, heroku

我正在尝试在 Heroku 上运行我的第一个 Django 驱动的应用程序。我一直在关注[本指南](https://devcenter.heroku.com/articles/django)。该应用程序运行良好，使用：

```
python manage.py runserver 
```

当我提交我所做的任何更改，然后尝试将其推送到 Heroku 时，一切似乎都很好，直到我访问 heroku URL。我收到“应用程序错误”页面。更多地关注：

```
heroku logs 
```

我收到一堆似乎是相同的错误消息：

```
.......
2013-01-18T05:28:29+00:00 heroku[slugc]: Slug compilation finished
2013-01-18T05:28:29+00:00 app[web.1]: Error: "0.0.0.0:" is not a valid port number        or address:port pair.
2013-01-18T05:28:31+00:00 heroku[web.1]: Process exited with status 1
2013-01-18T05:28:32+00:00 heroku[web.1]: Starting process with command `python      manage.py runserver 0.0.0.0: --noreload`
2013-01-18T05:28:33+00:00 app[web.1]: Error: "0.0.0.0:" is not a valid port number or     address:port pair. 
```

另外，如果我做工头开始：

```
22:39:26 web.1  | started with pid 2499
22:39:26 web.1  | Error: "0.0.0.0:" is not a valid port number or address:port pair.
22:39:26 web.1  | exited with code 1
22:39:26 system | sending SIGTERM to all processes
SIGTERM received 
```

我看了一个[类似的问题](https://stackoverflow.com/questions/11765945/django-app-crashing-in-heroku)，但我的 requirements.txt 文件中似乎有所有需要的东西。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:33:00.307

看起来你的`Procfile`. 检查您的`Procfile`并按照 Heroku 说明设置 gunicorn（推荐用于生产），或者添加一个端口号 - 大概`80`- 到您的`Procfile`原样：

`python manage.py runserver 0.0.0.0:80 --noreload`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T21:36:14.183

使用**Heroku**和 Docker 我得到了同样的错误，但我使用的是`$PORT`环境变量。

由于某种原因，端口号有一个反斜杠 ( `\`)，如`\80`. 所以我不得不删除它：

```
python manage.py runserver 0.0.0.0:${PORT##\\} 
```

以供将来参考，以防有人像我一样偶然发现这个问题，希望这会有所帮助。

# css - 为什么在有图像背景时需要 display:block ？

> ID：14394028
> 
> 赞同：2
> 
> 时间：2013-01-18T07:09:07.260
> 
> 标签：css, background, block, overlap

徽标与以下代码显示良好，

但我不知道代码`display:block`在这里是如何工作的？

我知道如果我不使用代码，文本会与图像（徽标）重叠，但我不明白，为什么 display:block 可以解决这个问题？

的HTML：

```
<h1><a href="#">WebsiteName</a></h1> 
```

CSS：

```
#header h1 a {
background: url(images/logo.jpg) no-repeat;
height: 21px;
width: 197px;
display: block;/* How this works? */
text-indent: -9999px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:14:01.247

默认情况下，该`<a>`元素是内联元素。内联元素不能有固定的宽度或高度。

通过添加`display: block;`，您可以使元素成为块级，从而可以设置其大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:15:58.000

因为 a 不是块级元素，您不能在其上设置宽度。块 vs 内联对于理解 CSS 非常重要，所以你真的应该花一些时间来熟悉这个概念。

这是一个非常重要的组成*部分*（对双关语感到抱歉）

[http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm](http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm)

# c++ - 将列表框中的项目移动到其原始位置

> ID：14394030
> 
> 赞同：0
> 
> 时间：2013-01-18T07:09:16.370
> 
> 标签：c++, list, c#-4.0

我已经成功地将项目从一个列表移动到另一个列表，但是有一个显示问题，当我将项目从 移回 时`LIST2`，`LIST1`该项目位于末尾，所以我向下滚动以查看它是否存在。

如何再次使`listitems`In`LIST1`排序或如何将其添加回其原始位置？

我已经在`.cs`文件中编写了代码，因此不需要`jquery`或`javascript`作为选项。这是我在列表之间移动项目的代码：

```
 if (SelectedInvestorsLst.SelectedIndex > -1)
        {
            string _value = SelectedInvestorsLst.SelectedItem.Value;
            string _text = SelectedInvestorsLst.SelectedItem.Text;
            ListItem item = new ListItem();
            item.Text = _text;
            item.Value = _value;
            InstitutionLst.Items.Add(item);
            SelectedInvestorsLst.Items.Remove(item);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:04:14.617

使用插入方法

```
 InstitutionLst.Insert(0, Item); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:24:15.873

您已经存储了一些价值。要恢复该位置，您应该将删除它的位置添加到该值中。由于您已经在使用该值，因此请使用逗号分隔的列表，例如 ExistingValue,removed_index。

当您将项目从右向左移动时，您可以使用 removed_index 在所需位置插入（查看 Rachel Gallen 回复）该项目。

# javascript - 如何在JS中创建一个初始化为0的数组？

> ID：14394033
> 
> 赞同：1
> 
> 时间：2013-01-18T07:09:22.883
> 
> 标签：javascript, arrays

> **可能重复：**
> [创建零填充 JavaScript 数组的最有效方法？](https://stackoverflow.com/questions/1295584/most-efficient-way-to-create-a-zero-filled-javascript-array)

我希望在 JS 中创建一个数组，该数组将存储整数值。

我想将一些值增加 1，o 首先我希望数组中的每个单元格都包含 0

可以在JS中做到吗？

注意：数组在创建时大小未知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:23:13.623

```
var arr = [0,0,0,0];

incrementIndex(1,0);
incrementIndex(2,1);

function incrementIndex(index, value)
{
  arr[ index ] = arr[ index ] + value;

} 
```

编辑：

```
var arr = returnArray(10);

function returnArray(numberofIndexes)
{
  var arr = new Array();
  for ( var counter = 0; counter < numberOfIndexes; counter++)
  {
     arr.push(0);
  }
  return arr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:21:06.050

```
Array.prototype.increaseAt = function(index){
    this[index] = this[index]+1 || 1
};
Array.prototype.getValueAt = function(index){
    return this[index] || 0;
}; 
```

像这样使用它：

```
var testArray = [];
testArray.increaseAt(3);
console.log(testArray.getValueAt(3)); // 1
console.log(testArray.getValueAt(1)); // 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T07:33:07.073

您可以通过此项的索引访问数组项，如下所示`item[index] += 1`

# hadoop - hadoop书籍示例中的conf文件

> ID：14394043
> 
> 赞同：2
> 
> 时间：2013-01-18T07:09:53.507
> 
> 标签：hadoop

我开始使用 hadoop，安装了 1.1.1 版本并在“hadoop 权威指南”中运行了示例 5-3。
它确实打印了一些配置属性，但我无法在 hadoop 安装或示例代码中找到这些 xml 文件。

以下代码假定添加到配置的 xml 文件存在于某处，但我找不到它们。

编辑：mapred-site.xml 和 hdfs-site.xml 在 hadoop 安装的 conf 文件夹中，但它们是空的。所以我不认为它使用它们。

在构建本书示例后，我转到包含 ch-05.jar 的第 5 章目录并运行以下命令：$asd> hadoop jar ch05-3.0.jar ConfigurationPrinter

```
public class ConfigurationPrinter extends Configured implements Tool {
static {
Configuration.addDefaultResource("hdfs-default.xml");
Configuration.addDefaultResource("hdfs-site.xml");
Configuration.addDefaultResource("mapred-default.xml");
Configuration.addDefaultResource("mapred-site.xml");
}
@Override
public int run(String[] args) throws Exception {
Configuration conf = getConf();
for (Entry<String, String> entry: conf) {
System.out.printf("%s=%s\n", entry.getKey(), entry.getValue());
}
return 0;
}
}
public static void main(String[] args) throws Exception {
int exitCode = ToolRunner.run(new ConfigurationPrinter(), args);
System.exit(exitCode);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:13:11.910

您会在 hadoop-core-XXjar 中找到 {core|mapred|hdfs}-default 文件。

# multithreading - 如何将值从另一个线程传递到 GUI 以说明 C# 中的进度？

> ID：14394046
> 
> 赞同：2
> 
> 时间：2013-01-18T07:10:05.107
> 
> 标签：multithreading

我有一个程序，它以一个循环的方法处理图像文件，该循环在一个线程中运行，而 GUI 运行另一个线程。在处理过程中，我想从处理完成的方法向 GUI 报告进度。

这就是我所拥有的。带有 GUI 事件的基础 Windows 窗体类，由其他 Windows 窗体类继承。加上具有由其他类继承的方法和属性的基类。其他类代表来自我迁移到我的应用程序中的不同图像管理应用程序的图像格式。所以我只需从下拉菜单中选择另一个应用程序名称，它会打开适当的 GUI，允许我选择图像源。

*   部分 ClassA 包含所有 GUI 事件，例如按钮单击和标签文本。
*   从 ClassA 继承的部分 ClassA2。
*   包含虚方法的抽象 ClassB。另外，我想用来向标签报告进度的属性。
*   ClassB2 继承 ClassB 并使用继承类的方法和属性。该方法在 ClassB 中被覆盖
*   对象 ClassB 在 ClassA 中声明并在 ClassA2 中初始化为 ClassB2。
*   在按钮单击事件的 ClassA 中，我使用 BackGroundWorker 对象，该对象使用 EventHandler 引发 DoWork 事件，该 EventHandler 包含包含处理文件的覆盖方法的委托参数。我在这里找到了解决方案 [如何在新线程中运行一些简单的代码？](https://stackoverflow.com/questions/363377/c-sharp-how-do-i-run-a-simple-bit-of-code-in-a-new-thread)

该方法包含一个属性，每次循环通过时都会分配一个新值，我想获取该值并在每次循环通过并更改它时将其显示在 GUI 上。

我尝试使用一些解决方案，但未创建异常窗口句柄。 [如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)

```
string newText = "abc";
this.Invoke((MethodInvoker)delegate {
someLabel.Text = newText;
}); 
```

另外，我试过了，但 InvokeRequired 属性返回 FALSE 值

[http://www.codeproject.com/Articles/52752/Updating-Your-Form-from-Another-Thread-without-Cre](http://www.codeproject.com/Articles/52752/Updating-Your-Form-from-Another-Thread-without-Cre)

# servicestack - ServiceStack 中 DTO 中的值结构

> ID：14394047
> 
> 赞同：2
> 
> 时间：2013-01-18T07:10:06.937
> 
> 标签：servicestack, ormlite-servicestack

我有一种方法可以正确序列化 DTO 中的结构，或者更好地让框架以某种方式将结构视为 dto。

我已被告知 JsConfig.TreatValueAsRefTypes 值，但这仅适用于 json，对吗？xml、soap、mq 等呢？

另一方面，我也无法弄清楚我在使用 JsConfig.TreatValueAsRefTypes 时做错了什么，编译器似乎认为它是在静态上下文中调用的：非静态字段需要对象引用，方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:23:32.700

我刚刚[提交了一个更改](https://github.com/ServiceStack/ServiceStack.Text/commit/c48f2ebec60f55818e43615e449c0d9be67ab805)（在下一个版本中可用），它`JsConfig<T>.TreatValueAsRefType`作为静态，因此您现在可以将结构类型序列化为引用类型，例如：

```
public struct UserStruct
{
    public int Id { get; set; }
    public string Name { get; set; }
}

JsConfig<UserStruct>.TreatValueAsRefType = true;

var dto = new UserStruct { Id = 1, Name = "foo" };

dto.ToJson().Print(); //= {"Id":1,"Name":"foo"}

dto.ToJsv().Print();  //= {Id:1,Name:foo}

dto.ToXml().Print(); 
```

ServiceStack 使用 .NET 的 XML DataContractSerializer（也用于 SOAP），它已经按预期序列化了结构：

```
<?xml version="1.0" encoding="utf-8"?>
<UserStruct xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns="http://schemas.datacontract.org/2004/07/ServiceStack.Text.Tests">
    <Id>1</Id>
    <Name>foo</Name>
</UserStruct> 
```

您还可以使用静态 API 使用非泛型 API 注册结构类型：

```
JsConfig.TreatValueAsRefTypes.Add(typeof(UserStruct)); 
```

# android - 在Android的LinearLayout中居中对齐TextView

> ID：14394053
> 
> 赞同：4
> 
> 时间：2013-01-18T07:11:06.500
> 
> 标签：android, android-layout

我想将 textview 与 EditView 垂直居中对齐

![在此处输入图像描述](../Images/9ba911c45bc35e29d0b898fdfa823891.png)

我的布局如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:text="text1"/>

        <EditText
            android:id="@+id/setup_homeid"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:maxLength="5"
            android:inputType="number"
            android:hint=""/>           
    </LinearLayout>

    </ScrollView> 
```

我怎样才能实现它？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T07:12:50.543

改变这个`android:layout_gravity="left"`

入此，

```
 android:layout_gravity="left|center_vertical" 
```

或者

```
android:layout_gravity="center_vertical" 
```

为您的 TextView。

```
<TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical" 
            android:layout_weight="1"
            android:text="text1"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T07:12:55.007

添加`android:layout_gravity="center_vertical"`到您的 TextView 标记。如下更改您的 TextView 标签

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_weight="1"
        android:text="text1"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T07:13:42.103

使用`center_vertical`：

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_weight="1"
        android:text="text1"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-05T11:27:03.383

试试这个..

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/sampleId"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="Center String"
                android:textColor="#FFFFFF"
                android:textSize="14sp"
                android:typeface="sans" />
        </LinearLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-30T18:14:14.667

就我而言，我必须将 weight 属性设置为 1，否则 layout_gravity 不会生效。

```
android:layout_weight="1" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-18T07:13:45.580

只需将`TextView`'更改`android:layout_height`为`match_parent`，这应该可以完成工作。希望这可以帮助。

# android - 许多活动的手势检测器

> ID：14394056
> 
> 赞同：0
> 
> 时间：2013-01-18T07:11:22.680
> 
> 标签：android, gesture

我有一个跨越十几个活动的应用程序，我希望所有活动都对一些预设手势做出相同的响应。我想知道是否需要将 GestureDetector/GestureOverlay 编码到每个活动中？这种方法似乎很愚蠢。我在想是否有可能拥有一个可以负责所有不同活动的手势类。我在想一条正确的道路吗？

顺便说一句，我对 Android 很陌生。

提前致谢。迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:20:53.903

试试它可能对你有帮助的链接

[网格布局上的 Fling 手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

[手势检测](http://www.eridem.net/android-tip-010-left-and-right-swipe-gesture-events)

和以下[链接](https://stackoverflow.com/questions/12645898/swipe-activity-to-change-another-activity-in-andoid-and-show-multiple-activity-i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-19T11:11:37.050

您可以执行以下操作

1.  注册到活动生命周期回调
2.  获得回调`onActivityCreated`后，将 替换为`Window.Callback`您自己的`WindowCallback`实现版本`Window.Callback`。
3.  保存实际活动`Window.Callback`，您可以`WindowCallback`用它替换您的自定义`onActivityPaused`

您不必在每个活动中编写逻辑

# php - 管理员可以在点击用户的用户名后显示用户资料

> ID：14394064
> 
> 赞同：-2
> 
> 时间：2013-01-18T07:12:14.880
> 
> 标签：php, codeigniter

> 在我的管理员页面中，我有用户列表..我希望如果我单击用户名，它会将我重定向到其个人资料..这是我的管理员页面视图：

```
<table class="table table-striped table-bordered table-condensed">
<tr>
 <th>username</th>
 <th>firstname</th>
     <th>lastname</th>
 <th>email</th>
 <th>usertype</th>
 <th>Action</th>
</tr>
 <?php foreach ($info as $infos): ?>
<tr>
 <td>
  <?php 
   $user=$infos['username']; 
   print_r ($user);
   $this->session->set_userdata($user);
  ?>
  </td>
  <td><?php echo $infos['firstname']?></td>
  <td><?php echo $infos['lastname']?></td>
  <td><?php echo $infos['email']?></td>
 <td><a href="<?php echo base_url()?>users/showuser">Show</a> | <a href="<?php echo      base_url()?>users/deleteuser">Delete</a></td>
</tr>
<?php endforeach ?> 
```

> 我的控制器的一部分是这样的：

```
 public function showuser()
{
    $this->load->helper(array('form','url'));
    $this->load->library('form_validation');
    $this->check_isValidated();

    $data['info'] = $this->users_model->user_info();
    $this->load->view('users/showuser',$data);          
} 
```

> 在我的模型中：

```
public function user_info()
{
    $this->load->database();
    $this->db->select('username,firstname,lastname,email');
    $user = $this->session->userdata('user');
    $this->db->where('username',$user);
    $query = $this->db->get('users');
    if($query->num_rows > 0)
    {
        $row = $query->row();
        $data = array(
            'firstname' =>$row->firstname,
            'lastname' =>$row->lastname,
            'username' =>$row->username,
            'email' =>$row->email,
        );
        return $data;
    }else{
        return false;
    } 
```

> **我的问题是，当我单击某个用户时，它不会显示其各自的个人资料，而是会显示您数据库中列出的第一个用户的个人资料。**
> ***如何比较我的模型中的 id***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:41:41.047

你真的需要花一些时间从代码的外观上阅读一些教程，因为如果你继续这样下去，你会遇到很多问题。首先也是最重要的是您通过用户名而不是唯一 ID 加载用户，这意味着我猜测您的用户表甚至没有唯一 ID，这反过来意味着它没有被索引，因此最终会遇到性能问题。

无论如何，除了这个问题。第一个问题是观点。您没有为您想要的用户传递任何参数，因此您每次都只是加载一个没有任何参数的函数。您的 URL 应该如下所示，允许您每次都传递正确的参数。

```
//Again, you really should have a userId that you are passing here.
<a href="<?php echo base_url()?>users/showuser/$infos['username']">Show</a> 
```

然后在你有问题二的模型中，你将登录用户的用户名传递给数据库，这样你就永远不会得到其他人的个人资料。见下文：

控制器：

```
//this sets the user to the parameter we added to the url above and passes it to the model function.
$data['info'] = $this->users_model->user_info($this->uri->segment(3)); 
```

模型：

```
public function user_info($user)
{
// you're now getting the user from the controller like you should be.
$this->load->database();
$this->db->select('username,firstname,lastname,email');
$this->db->where('username',$user); 
```

我没有包括你所有的代码，只是相关的部分。请记住，虽然这将解决您的直接问题，但它不会解决您所做的其他问题。没有安全检查意味着任何拥有该 URL 的人都可以看到其他人的个人资料，似乎没有 ID 等。祝你好运，但确实需要一些时间并尽可能多地阅读有关数据库结构和了解 CI 工作原理的信息。

# solr - 通过 nutch 更新 solr 索引

> ID：14394065
> 
> 赞同：1
> 
> 时间：2013-01-18T07:12:28.013
> 
> 标签：solr, nutch

我正在使用 nutch 1.5 和 solr 3.5。我想知道通过 nutch 更新 solr 索引的最佳方法。nutch 中的 seedlist.txt 包含大约一百万个 url。每天都会添加新的网址。此外，一些网址将被删除或更新。

nutch 命令“./nutch crawl urls -solr /solr/ -dir crawl -depth 1 -topN 10”将获取新添加的 url 以进行索引。但是，更新和删除的 url 根本不会被触及。

通过删除爬网文件夹并再次重新索引将修复“添加”和“更新”问题。但是，爬取一百万个 url 需要很长时间，而且 Solr 中仍然存在“删除” urls 索引。

我唯一想删除 Solr 索引是使用更新命令，如“update?commit=true&stream.body=id:xxxx”。

我在正确的方向吗？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T15:25:44.467

您几乎可以肯定需要将新的 url 注入现有的 crawldb（查找 bin/nutch 注入），您也可以发出 bin/nutch readdb ... -dump dumpfolder - 这将向您显示这些旧 url 需要多长时间再次被抓取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T08:41:03.250

您可以更改已变为非活动或已删除的 url 的设置，因此当您尝试重新抓取它们时，它会将它们标记为 DB_GONE。更改此设置将根据您自己的选择删除这些 url。

```
<property>
  <name>db.update.purge.404</name>
  <value>true</value>
  <description>If true, updatedb will add purge records with status DB_GONE
  from the CrawlDB.
  </description>
</property> 
```

查看[http://amac4.blogspot.com/2013/08/nutch-re-crawling.html](http://amac4.blogspot.com/2013/08/nutch-re-crawling.html)了解更多详情

# asp.net - 输入文本时删除文本框的背景图像。如何？

> ID：14394067
> 
> 赞同：0
> 
> 时间：2013-01-18T07:12:40.837
> 
> 标签：asp.net, vb.net

我有带有背景图像的文本框。每当我单击文本框时，背景图像应该会消失，并且只有文本应该可见。当文本被清除后，bg 图像应该会再次出现。这怎么可能 ？

```
<asp:TextBox runat="server"  Width="160px" ID="txt_google_search" style="padding: 6px; background: url('http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif') no-repeat scroll left center rgb(255, 255, 255);" ></asp:TextBox> 
```

我在我的代码隐藏中尝试了以下内容，但它不起作用。

```
txt_google_search.Attributes.Add("onclick", "me.style.backgroundImage = none;") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:21:03.430

归根结底，这只是客户端 OnClick 事件的错误代码。我会为此使用 jQuery，并生成如下内容：

```
<style>
.bgImage {
    background: url(img/sprite.gif) no-repeat left top;
}
</style>

<script>
$(function(){
   $("#<% Response.Write(txt_google_search.ClientId) %>").live("focus", function() { 
      $("#<% Response.Write(txt_google_search.ClientId) %>").addClass("bgImage");
  });
   $("#<% Response.Write(txt_google_search.ClientId) %>").live("blur", function() { 
      $("#<% Response.Write(txt_google_search.ClientId) %>").removeClass("bgImage");
  });
});
</script> 
```

# opengl - 如何实现 2D 等距抛射物 (3D) 旋转效果

> ID：14394069
> 
> 赞同：0
> 
> 时间：2013-01-18T07:12:46.097
> 
> 标签：opengl, 3d, 2d, isometric, projectile

我正在开发一款等距 2d 游戏，其中一个方面将是发射射弹的单位。如果弹丸是圆形的，那还不错。只需将弹丸定位在等距空间中。但是，如果弹丸长得像导弹或箭呢？

我想让它看起来好像是在旋转或飞过 3d 空间，不一定是面向屏幕的。它不需要完美，因为我不是在 3d 中这样做。我有几个我知道的选择。

A）我可以根据弧线或更确切地说是射弹行进的矢量以某种方式缩放图像。我实际上不太确定这个数学是如何工作的，以及它看起来有多糟糕。

B) 我可以在 3D 空间中旋转实际的精灵。这种方法很棘手，因为会有一些角度使精灵对相机不可见。这将是不希望的效果。

C）我可以为键旋转渲染精灵并显示它们。使用这种方法，我不确定旋转精灵（通常）会如何影响外观。

有谁知道解决这个问题的好例子或想法？渲染这些精灵的最佳解决方案是什么，以便射弹可以从任何点发射或降落在等轴测平面上的任何点。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-10-11T18:25:40.300

做一个

```
While (projctl.traveling==1) {
    SetCurrentAVec(0,projctl);
    While (sprite.animVec.hasNext)
        SpinProjctl(1);
    (projctl.hit | projctl.miss ? projctl.traveling=0 : continue;
} 
```

# ios - 对象的排序和过滤数组的优化

> ID：14394071
> 
> 赞同：1
> 
> 时间：2013-01-18T07:12:46.410
> 
> 标签：ios, objective-c

我有工作代码，并希望从中获得更好的性能，因为如果传递更多数据，它会得到很好的加载。但我不知道我还能做些什么。

输入：带有 logUnits 的数组，每个都包含一个日志事件视图，例如“2013-01-16 15:13:00 Hello”和时间数组 - 此数组仅包含我们有日志事件的时间 (2013-01-02,2013 -01-09 等）

输出：视图数组，其中每个视图包含同一天的日志单元。

我还可能需要按事件类型过滤日志单元。

这是我如何做到的。

```
 NSMutableArray *views = [[NSMutableArray alloc] initWithCapacity:times.count];
    @autoreleasepool {

        for(int x = 0; x != times.count; x++)
        {
            UIView *foo = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
            foo.backgroundColor = [UIColor clearColor];
            int f = 0;
            int h = 0;

            for(int i = 0; i != objectArray.count; i++)
            {
                @autoreleasepool
                {

                    LogUnit *unit = [objectArray objectAtIndex:i];
                    if([[times objectAtIndex:x] isEqual:[unit realTime]]) 
                    {

                        if(![[foo subviews] containsObject:unit.view]) // Look if unit was already added
                        {
                            NSString *number = [NSString stringWithFormat:@"SortLog%i ",[[NSUserDefaults standardUserDefaults] stringForKey:@"ObjectNumber"].intValue];
                            NSString *comp = [[NSUserDefaults standardUserDefaults] stringForKey:number];

                            if([[unit status] isEqualToString:comp] || [comp isEqualToString:NULL] || comp == NULL)
                            {
                                if([unit getEvent] != NULL)
                                {
                                    unit.view.frame = CGRectMake(unit.view.frame.origin.x, f * unit.view.frame.size.height + 30, unit.view.frame.size.width, unit.view.frame.size.height);
                                    [foo addSubview:unit.view];
                                    f++;
                                    h = unit.view.frame.size.height * f;
                                }
                            }
                        }
                    }
                }
            }

            foo.frame = CGRectMake(0,0, 320, h + 30 );
            h = 0;
            [views addObject:foo];
        } 
```

我猜这最糟糕的事情是循环中的循环，对于每个外部循环，我必须重新运行所有 logUnit。但不知道我还能如何做到这一点。也许有一种方法可以称为“选择时间等于[单位实时]的单位”有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:46:36.503

这里有一些危险信号。最容易实现的结果是您正在扫描 foo 的所有子视图以获取 unit.view，这是一个 O(n) 操作，这在最里面的循环中确实很痛苦。

接下来，如果您按时间对两个数组进行排序，您实际上不必执行双循环来查找大小相同的事件。看看它是如何在归并排序中完成的。

如果这还不够好，请考虑在侧线程上进行所有比较工作，并且仅将添加子视图和视图创建过程分派回主线程。它至少会让它看起来快很多。

# sql - 此查询中的 IN 语句是否多余？

> ID：14394072
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:12:49.683
> 
> 标签：sql, tsql, sql-server-2005

我收到了这样的查询

```
SELECT * FROM dayTable
LEFT JOIN ProcessTable firstprocess
ON dayTable.id = a.daytablefkid 
AND firstprocess.processid in (1234)
AND firstprocess.daytablefkid 
     IN (SELECT id 
         FROM daytable  
         WHERE dayTable.DateFrom > @dateFrom 
         AND dayTable.DateTo < @dateTo)

LEFT JOIN ProcessTable secondprocess
ON daytable.id = secondprocess.daytablefkid
and secondprocess.processid in (4567)
    IN (SELECT id 
        FROM daytable 
        WHERE dayTable.DateFrom > @dateFrom 
        AND dayTable.DateTo < @dateTo)

WHERE dayTable.DateFrom > @dateFrom AND dayTable.DateTo < @dateTo 
```

我注意到的第一件事是连接中的第一个 IN 语句“IN(XXXX)”可以转换为 WHERE 语句，但是两个连接中的第二个 IN 语句有点令人困惑，因为相同的过滤也在查询结束。

我想知道它们是否确实是多余的，或者如果它们被删除，结果集是否会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:25:35.413

是的，`IN (SELECT id FROM daytable WHERE dayTable.DateFrom > @dateFrom AND dayTable.DateTo < @dateTo)`-parts 是多余的，因为你已经加入了 daytable，你有相同的`WHERE`-clause。

此查询应给出相同的结果：

```
SELECT * 
FROM dayTable
LEFT JOIN ProcessTable firstprocess
  ON dayTable.id = firstprocess.daytablefkid 
    AND firstprocess.processid = 1234
LEFT JOIN ProcessTable secondprocess
  ON daytable.id = secondprocess.daytablefkid
    AND secondprocess.processid = 4567
WHERE 
  dayTable.DateFrom > @dateFrom 
  AND dayTable.DateTo < @dateTo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:24:05.937

请求的又一个选项优化

```
SELECT * 
FROM dayTable 
  LEFT JOIN ProcessTable process ON dayTable.id = process.daytablefkid 
    AND process.processid IN (1234, 4567)
WHERE dayTable.DateFrom > @dateFrom AND dayTable.DateTo < @dateTo 
```

# html - 如何在 C# 中创建 html 快照？

> ID：14394077
> 
> 赞同：1
> 
> 时间：2013-01-18T07:13:06.873
> 
> 标签：html, seo

我有一个使用 Ajax 的页面，我想让它可以被 SEO 抓取。检查谷歌的规范（https://developers.google.com/webmasters/ajax-crawling），它说需要使用“#！” 构建一个“漂亮的 url”，并为爬虫引擎构建一个 html 快照。那么如何在c#中创建html快照呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:30:33.480

虽然我还没有在生产中使用它，但我发现 PhantomJs（一个基于 webkit 的无头浏览器）完全可以胜任这项任务。我写了[一篇关于这个主题](http://blog.istepaniuk.com/phantomjs-to-make-your-ajax-web-crawlable-by-google/)的帖子。

在 DOM 完成加载和 Ajax 请求完成后，我只是复制整个 dom，Phantom 也是使用 JavaScript 编写的脚本，很容易将 DOM 内容获取为 HTML。

这不是 C# 特定的解决方案，但界面很简单，而且 PhantomJS 也可以在 Windows 上运行。每当我在 URL 中收到带有 escaped_fragment 的请求时，匹配的 MVC 路由会将 Crawler 重定向到缓存的快照。

# html - 将网页内容转换为网络服务

> ID：14394078
> 
> 赞同：0
> 
> 时间：2013-01-18T07:13:08.190
> 
> 标签：html, reporting-services, interpreter, dashboard

我们的合作伙伴为我们准备了一个带有报告的网页。我们必须每天登录才能查看报告。

但是，我们公司希望自动从他们的网站获取信息，并在内部仪表板上查看以供管理人员分析。

我们要求我们的合作伙伴为我们提供网络服务，但他们拒绝了。

因此，我们决定开发一个应用程序（Web 服务）来连接到他们的网站，并在输入登录信息并进行身份验证后扫描 HTML 页面，并通过我们分支机构的 Web 服务使其内部可用。

**没有编程我怎么能做到这一点。例如为其他网站做这件事的网站。并通过我的身份验证打开它，然后要求我选择我想要的数据并将其作为网络服务发送给我们......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:44:13.660

看看 cURL (http://curl.haxx.se/)

您可以使用 html 解析器 (google for it) 解析 html。

但是创建一个 Web 服务是一个更好的主意......

# c# - Windows Phone 应用程序中的位置跟踪问题

> ID：14394081
> 
> 赞同：0
> 
> 时间：2013-01-18T07:13:17.630
> 
> 标签：c#, windows-phone-7

我的应用程序的一些用户抱怨跟踪端不起作用。我在屏幕顶部有一个 GPS 图标，当应用程序启动 GeoCoordinateWatcher 并尝试获取当前位置时闪烁。完成并正常后，图标停止闪烁，并出现一条消息，说明就绪。用户报告说会发生这种情况，但屏幕上的项目（例如速度）永远不会更新。当应用程序保存它跟踪的位置时，什么都没有。

这是跟踪部分的代码。在页面加载事件中，它调用以下

```
 /// <summary>
    /// Starts tracking the user
    /// </summary>
    private void StartTracking()
    {
        var app = (Application.Current as App);

        // check to see if tracking is enabled by the user                    
        if (app.LocationTrackingIsEnabled)
        {               
                (new Thread(() =>
                {
                    // Create the GeoWatcher
                    var watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High) { MovementThreshold = 1 };

                    // Check to see if we have permission to use the location services of the phone
                    if (watcher.Permission == GeoPositionPermission.Granted)
                    {
                        watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);

                        var status = Observable.FromEvent<GeoPositionStatusChangedEventArgs>(watcher, "StatusChanged");
                        var readys = status.Where(o => o.EventArgs.Status == GeoPositionStatus.Ready);
                        var notReadys = status.Where(o => o.EventArgs.Status != GeoPositionStatus.Ready);
                        var readyPos = from r in readys
                                       from i in Observable.Interval(TimeSpan.FromSeconds(LocationTrackInterval))
                                       .TakeUntil(notReadys)
                                       where (DateTime.Now - watcher.Position.Timestamp.DateTime) < TimeSpan.FromSeconds(12)
                                       select watcher.Position;

                        LocationSubscribe = readyPos.Subscribe(loc =>
                        {
                            if (!HasPaused)
                            {
                                this.Dispatcher.BeginInvoke(new Action(() =>
                                {
                                    // Get current speed (meters per second);
                                    if (!double.IsNaN(loc.Location.Speed))
                                        app.CurrentPos.CurrentSpeed = Math.Round(loc.Location.Speed, 2);
                                    else
                                        app.CurrentPos.CurrentSpeed = 0;

                                    // Calculate distance
                                    if (RunLocations.Count > 0)
                                        app.CurrentPos.DistanceMeters += Math.Round(new GeoCoordinate(RunLocations[RunLocations.Count - 1].Latitude,
                                            GPSLocations[GPSLocations.Count - 1].Longitude).GetDistanceTo(loc.Location), 2);

                                    // Add Location
                                    GPSLocations.Add(new GPSLocation()
                                    {
                                        Latitude = loc.Location.Latitude,
                                        Longitude = loc.Location.Longitude,
                                        Altitude = loc.Location.Altitude,
                                        Speed = app.CurrentRun.CurrentSpeed
                                    });

                                    // Get the average speed
                                    app.CurrentPos.AverageSpeed = Math.Round((from r in GPSLocations
                                                                              select r.Speed).Average(), 2);

                                    // Set last position for use later
                                    Lastlocation = loc.Location;
                                }));
                            }
                        });

                        // Try and start the watcher
                        if (!watcher.TryStart(false, TimeSpan.FromSeconds(5)))
                        {
                            this.Dispatcher.BeginInvoke(new Action(() =>
                            {
                                MessageBox.Show("There was an error trying to get your location. Tracking is not possible.");
                            }));
                        }
                    }
                    else
                    {
                        sbGpsFlash.Stop(); // stop the flashing gps symbol
                        gpsStatus.Text = "Denied";
                    }

                })).Start();                
        }
        else
        {
            sbGpsFlash.Stop(); // stop the flashing gps symbol
            gpsStatus.Text = "Disabled";
        }
    }

void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
         this.Dispatcher.BeginInvoke(new Action(() =>
         {
             gpsStatus.Text = e.Status.ToString();

             switch (e.Status)
             {
                 case GeoPositionStatus.Initializing:
                     gpsStatus.Text = "Locating...";
                     break;
                 case GeoPositionStatus.Disabled:
                     gpsStatus.Text = "Disabled";
                     break;
                 case GeoPositionStatus.NoData:
                     gpsStatus.Text = "No Data";
                     break;
                 case GeoPositionStatus.Ready:
                     gpsStatus.Text = "Ready";
                     break;                                     
             }

             sbGpsFlash.Stop();
         }));
    } 
```

任何人都可以看到可能导致问题的代码问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:08:53.127

在主线程上创建你的 geocoordinatewatcher

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:35:46.560

只是一个侧面评论。

你的代码很紧凑，但不是很可读。

您不必在主线程上创建坐标观察器。

我想知道您只订阅状态事件而不是位置更改事件，但这是您的逻辑，如果它适合您，那就没问题了。

点是你想在ui上显示的数据只能分配给创建UI控件的线程中的ui控件，通常这是一个人们称之为“主”线程的线程。我不知道为什么这是主线程。事实上，我会称它为 UI 线程。

因此，您必须在创建 UI 控件的那个 UI 线程中传递数据。因此，要么在 UI 线程上启动 watcher，要么使用 UI 线程的 Dispatcher 将数据传递给它并将那里的数据分配给 UI 控件。

# javascript - 如何获取 extjs 网格单元组件

> ID：14394084
> 
> 赞同：2
> 
> 时间：2013-01-18T07:13:27.880
> 
> 标签：javascript, extjs4.1, extjs-mvc

我想以编程方式获取网格的单元格并在其上触发 cellclick 事件。我该如何实现它？到目前为止，我成功地获得了这样的单元格的 dom 元素

```
var cell = pos.view.getCellByPosition(newPos); 
```

但是当我执行以下代码时

```
cell.fireEvent('click'); 
```

它给了我错误，因为它不是 Ext 组件。有什么方法可以从 Dom Element 获取 Ext Component。Dom 元素有一个 ID，但是当我使用 `Ext.getCmp(cell.id);` 它时，它什么也不返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:10:19.327

网格单元没有由 ExtJS 组件表示，因此您不能在其上触发事件。可以为单元格 DOM 元素 ( [http://jehiah.cz/a/firing-javascript-events-properly](http://jehiah.cz/a/firing-javascript-events-properly) ) 手动触发 DOM 事件，或者为 Ext.grid.View 组件触发事件 itemclick。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:10:12.743

cellclick 事件实际上是从底层视图触发的，而不是单元格本身。

所以尝试触发以下事件：

```
pos.view.fireEvent("cellclick") 
```

您应该填写缺少的参数，因为 cellclick 应该提供以下内容：

```
cellclick( Ext.view.Table this, HTMLElement td, Number cellIndex,
           Ext.data.Model record, HTMLElement tr, Number rowIndex,
           Ext.EventObject e, Object eOpts ) 
```

# objective-c - 将此代码从 C# 转换为 Objective-C，这是正确的吗？

> ID：14394085
> 
> 赞同：0
> 
> 时间：2013-01-18T07:13:32.837
> 
> 标签：objective-c

我正在做一些身份验证，并提供了示例 C# 代码，我需要将其转换为 Objective-C，作为健全性检查，有人可以验证以下代码是否等效？

谢谢你。

C＃

```
 // Create Byte array of password string
        ASCIIEncoding encoder = new ASCIIEncoding();
        Byte[] _secretBytes = encoder.GetBytes(password);

        // Create a new salt
        Byte[] _saltBytes = new Byte[4];
        _saltBytes[0] = (byte)(salt >> 24);
        _saltBytes[1] = (byte)(salt >> 16);
        _saltBytes[2] = (byte)(salt >> 8);
        _saltBytes[3] = (byte)(salt);

        // append the two arrays
        Byte[] toHash = new Byte[_secretBytes.Length + _saltBytes.Length];
        Array.Copy(_secretBytes, 0, toHash, 0, _secretBytes.Length);
        Array.Copy(_saltBytes, 0, toHash, _secretBytes.Length, _saltBytes.Length); 
```

// 目标-c

```
 NSUInteger len = [passwordData length];
    Byte *secretBytes = (Byte*)malloc(len);
    memcpy(secretBytes, [passwordData bytes], len);

    // create new byte array for new salt
    NSInteger saltInt = [salt integerValue];
    Byte *saltBytes = (Byte*)malloc(4);
    saltBytes[0] = (Byte)(saltInt >> 24);
    saltBytes[1] = (Byte)(saltInt >> 16);
    saltBytes[2] = (Byte)(saltInt >> 8);
    saltBytes[3] = (Byte)saltInt;

    // now create a hash byte array
    NSUInteger hashLength = sizeof(secretBytes) + sizeof(saltBytes);
    Byte *hashedBytes = (Byte*)malloc(hashLength);

    // now copy the bytes over
    memcpy(hashedBytes, &secretBytes, sizeof(secretBytes));
    memcpy(hashedBytes, &saltBytes, sizeof(saltBytes)); 
```

# php - 使用 GET 方法在 header() 函数中发送多个值

> ID：14394087
> 
> 赞同：4
> 
> 时间：2013-01-18T07:13:35.390
> 
> 标签：php, header, get

我的问题是关于`header()`功能的。我试图通过这个函数发送 2 个变量，如下所示：

`header("Location:index.php?variable_1='true'&amp;variable_2='false'");`

我认为这是转义的问题，`&amp;`但我只是用`&. Also, first variable gets initialized and I can acquire it by calling`$_GET['variable_1']` 尝试了它，但第二个不存在并且未初始化。

所以我的问题是，我可以通过 GET 方法通过 header() 函数发送多个值吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T07:22:23.080

是的，你可以以防万一

```
header("Location: index.php?variable_1=true&variable_2=false"); 
```

你不需要使用''这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:22:37.803

尝试这个：

```
header("Location:index.php?variable_1=true&variable_2=false"); 
```

# java - 玩！框架 2 加载多个数据库非常缓慢

> ID：14394092
> 
> 赞同：2
> 
> 时间：2013-01-18T07:13:48.940
> 
> 标签：java, database, web-applications, playframework, playframework-2.0

我在 Play 的 conf/application.conf 文件中列出了一系列 MySQL 数据库！应用。没有默认数据库，但其他八个数据库（用于我的 Web 程序的区域设置）都以以下方式概述：

```
db.<db-name>.driver=com.mysql.jdbc.Driver
db.<db-name>.url="jdbc:mysql://<database-name>:<port>/<table>"
db.<db-name>.user=<user>
db.<db-name>.password=<password> 
```

上述块重复八次，每个数据库一次。

但是，在启动时，加载速度非常慢（有时需要 5 分钟或更长时间才能加载所有八个数据源）。我在这里做错了什么，还是 Play 中有一些限制！框架 2.0.X？我应该如何解决这个问题？

谢谢，大卫

# git - 从 Github 克隆后，repo 的 .git 文件夹在哪里？

> ID：14394093
> 
> 赞同：0
> 
> 时间：2013-01-18T07:13:50.917
> 
> 标签：git

我试试这个：

```
git clone https://github.com/red23jordan/try_git.git 
```

之后，try_git 文件夹被下载到我的电脑上。
但是为什么没有 .git 文件夹？
我想回到以前的版本，怎么回去？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:17:11.743

.git 文件夹位于 try_git 文件夹中；根据您的文件管理器和操作系统的设置，它可能会被隐藏（在这种情况下，您必须找到启用“显示隐藏文件”或类似选项的选项）

# php - Zend：通过 JQuery 执行错误创建 PHP 命名空间

> ID：14394101
> 
> 赞同：0
> 
> 时间：2013-01-18T07:14:43.190
> 
> 标签：php, jquery, ajax, zend-framework

示例代码：

```
jQuery(function() {
    jQuery('#changePwYes').click(function(){
        <?php 
            $this->session = new Zend_Session_Namespace(Zend_Registry::get('config')->session->nameSpace);
            $this->session->showBox = "0";
        ?>
    });

}); 
```

此 php 脚本应仅在单击按钮时执行，但在加载自身时执行。

该怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:37:14.127

在这种情况下，当您想从客户端在服务器端进行一些更改而不进行页面重定向时，我们有**AJAX**。

**通过AJAX**从您的点击事件中调用**Zend 控制器**操作：

 **```
jQuery(function() {
    jQuery('#changePwYes').click(function(){
        $.ajax({
         url: "myApp/public/index.php/controller-name/create-name-space/format/html",
         type: "POST",
         data:{mydata : 'test'}
         success: function(html){   
            alert('Done');    
         },
         error: function(jqXHR, textStatus, errorThrown){       
            alert('An error occurred);
         }
        });
    });
}); 
```

在您的**控制器**中，创建一个新**操作**：

```
public function createNameSpaceAction()
{       
    //Disable the layout rendering for the ajax request
    $this->_helper->layout->disableLayout();
    //Set no renderer in this case
    $this->_helper->viewRenderer->setNoRender(true);    

    //Retrieve dada if needed
    $myData = $_POST['mydata'];

    $session = new Zend_Session_Namespace(Zend_Registry::get('config')->session->nameSpace);
    $session->showBox = "0";    
} 
```**

# windows - 如何从父目录一次将视图私有文件从子目录添加到源代码管理

> ID：14394105
> 
> 赞同：1
> 
> 时间：2013-01-18T07:15:01.073
> 
> 标签：windows, clearcase

在我的快照视图中。在通过我的 IDE 处理源代码时，我在不同的子目录中添加了很多文件。所有这些文件都成为查看私有文件。我想知道是否有任何机制可以从父目录中获取所有视图私有文件的列表？

我是清除案例的新手。我主要使用 SVN，所以我的问题与一次获取所有文件并检查、在一个对话框中取消选中相应文件并添加到源代码控制有关，这对我来说变得更容易。

任何命令选项也可以。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:30:55.730

是的，您可以查看所有私有文件：

看：

*   "查找所有未添加到 ClearCase 的文件] [1](https://stackoverflow.com/a/2099195/6309) "
*   “[如何递归地查找明文中不存在的元素？](https://stackoverflow.com/a/2099195/6309) ”
*   "[递归查找当前目录下所有查看私有文件的命令](https://stackoverflow.com/a/7657120/6309)"

主要命令是

```
# Windows
    for /F "usebackq delims=" %i in (`cleartool ls  -rec ^| find /V "Rule:" ^| find /V "hijacked" ^| find /V "eclipsed" ^| find /V "-->"`) do @echo "%i"

# Unix
cleartool ls -rec | grep -v "Rule:" | grep -v "hijacked" | grep -v "eclipsed" | grep -v "-->" | xargs echo 
```

但是，您需要知道**[ClearCase 是以文件为中心](https://stackoverflow.com/questions/645008/what-are-the-basic-clearcase-concepts-every-developer-should-know/645771#645771)**的：它逐个文件操作。
与 SVN 不同，没有简洁的对话框用于以一种原子方式提交“所有修改的文件”。

* * *

当您有*很多*私人文件要添加时，您的快照视图中到处都是，一个技巧是：

*   创建一个动态视图（并安装您正在工作的 Vob）
*   设置与快照视图相同的配置规范
*   使用快照视图作为**[`clearfsimport`命令](https://stackoverflow.com/a/418196/6309)**的来源，将快照视图的内容导入动态视图。
    所有相同的元素都不会受到影响。
    只有新元素会自动添加到源代码管理中，这意味着在导入期间`mkelem`为您自动完成父目录、新元素的签出和父目录的签*入*。
*   [`cleartol update -overwrite`](https://stackoverflow.com/a/12741082/6309)您的快照视图：-overwrite 选项对于将您的私有文件（此时将被视为“劫持”文件）转换为官方版本化元素非常重要。

（注意：对于 UCM 视图，该过程略有不同，但想法仍然存在：如果您有很多新文件要广告，`clearfsimport`则该工具适合您）。

# android - onActivityResult 从带有图像的图库返回后返回 null getExtra 值

> ID：14394113
> 
> 赞同：0
> 
> 时间：2013-01-18T07:15:19.540
> 
> 标签：android, android-intent, android-gallery

**我在按钮 onClick 上使用此代码从画廊中挑选图像**

我想使用 putExtra 从意图传递字符串，并且从同一活动中，我尝试使用 getExtra 从 onActiviryResult 获取此值，但我得到空值。这是获取我使用意图传递的字符串值的任何方式，并且此意图打开画廊以选择图像然后返回到相同的活动，我想获取我在意图中传递的字符串。

```
 Intent intent = new Intent(); 
  intent.setType("image/");
  intent.setAction(Intent.ACTION_PICK);
  intent.putExtra("image_field_tag", field_tag);
  startActivityForResult(Intent.createChooser(intent, "Select Picture"), Integer.parseInt(fieldDetlKey)); 
```

从上面的代码`intent.putExtra("image_field_tag", field_tag);`值，我在**onActivityResult**中得到空值，请参见下面的代码

```
@Override

protected void onActivityResult(int requestCode, int resultCode, Intent data){
     super.onActivityResult(requestCode, resultCode, data);
     Bundle bundle = data.getExtras();
     String imgTag = bundle.getString("image_field_tag");
     Log.d("image Tag", imgTag);
     Log.d("requestCode",""+requestCode);
     Log.d("resultCode", ""+resultCode);
} 
```

我得到了变量 imgTag 的空值，请告诉我如何从 onActivityResult 中获取额外的值

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:46:25.603

```
/**Hi Use Requestcode for identify every request*/ 
```

公共静态最终 int SELECT_PICTURE_REQUESTCODE=200;

```
/**
 * start phone Gallery for image selection.
 */
  private final void GalleryActivity() {
   final Intent mIntent = new Intent();
       mIntent.setType("image/*");
       mIntent.setAction(Intent.ACTION_GET_CONTENT);
       this.startActivityForResult(mIntent, Constant.SELECT_PICTURE_REQUESTCODE);
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {

        if (requestCode == Constant.SELECT_PICTURE_REQUESTCODE  && data != null) {
            final Uri Selected_Image_Uri = data.getData();
            final String Selected_Image_Path = GetImagePath_FromUri(Selected_Image_Uri);
            Toast.makeText(this, "Image Path = " + Selected_Image_Path, Toast.LENGTH_LONG).show();
        }
    }

}

/**This function use for get image file path from uri
  * @param uri for selected image
  * @param context activity reference
  * @return String
  */
private final String GetImagePath_FromUri(Uri uri) {
        final String[] Projection = { MediaStore.Images.Media.DATA };
        final Cursor mCursor = managedQuery(uri, Projection, null, null, null);
        final int column_index = mCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        mCursor.moveToFirst();
        return mCursor.getString(column_index);
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-18T07:25:26.363

当我们希望子活动返回结果时，我们需要通过 startActivityForResult() 方法调用它。当子活动完成作业时，它应该在意图中设置数据并调用方法 setResult(resultcode, intent) 通过意图返回数据。
有关详细信息。请参阅本教程

[http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html](http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html)

# c++ - 最大双宽度的 printf 格式说明符

> ID：14394117
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:15:24.817
> 
> 标签：c++, c

我有以下数组：

```
float a[]={ 1.123 12.123, 123.123, 12345.123}; 
```

如何创建以下输出（裁剪小数部分）：

```
1.123
12.12
123.1
12345 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:22:28.963

```
float a[]={ 1.123, 12.123, 123.123, 12345.123};
for(int i = 0 ; i < 4 ; i++) {
    int digits = 4 - log10(a[i]);
    digits = digits < 0 ? 0 : digits;
    digits = digits > 3 ? 3 : digits;
    printf("%.*f\n",digits,a[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:03:26.033

```
int main()
{  
  float a[]={ 1.123, 12.123, 123.123, 12345.123}; 

  for(int i=0; i<4; i++)
  {
    std::stringstream ss;
    ss << a[i];
    std::string s;
    ss >> s;
    s.resize(5);        // it only works with 99999
    cout << s << "\n";
  }
  cout << endl; 

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T07:31:46.867

```
#include <stdio.h>
#include <string.h>

int main(int argc,char* argv[]){

    float a[]= { 1.123, 12.123, 123.123, 12345.123};

    int i;
    char floatString[100] = {0};

    for (i=0; i < sizeof(a)/sizeof(a[0]); i++) {
        memset(floatString, 0, sizeof(floatString));
        sprintf(floatString, "%f", a[i]);
        floatString[5] = '\0';
        printf("%s\n", floatString);
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T08:49:51.653

你可以用这个，

```
printf("%1.3f\n%2.2f\n%3.1f\n%5.0f\n", a[0], a[1], a[2], a[3]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T09:05:27.583

你可以`snprintf`这样使用：

```
int main()
{
    float a[]= { 1.123, 12.123, 123.123, 12345.123 };
    char buf[8];
    int i;
    for (i=0;i<sizeof(a)/sizeof(a[0]);i++) {
        snprintf(buf, 6, "%f", a[i]);
        printf("%s\n",buf);
    }
} 
```

# r - 如何在R中绘制三角形作为图例？

> ID：14394121
> 
> 赞同：1
> 
> 时间：2013-01-18T07:15:33.837
> 
> 标签：r, legend

我正在绘制一个需要绘制图例的情节，并且我需要其中一个是三角形。

```
 plot.new()
  legend(x=.5,y=.9, c("A","B","C","D"), cex=.8, bty="n", 
         fill = c("green","yellow","red","blue")) 
```

我想`legend D`变成*三角形*。我该如何实施？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T07:23:33.247

使用`pch`和`col`（而不是`fill`）：

```
plot.new()
legend(x=.5,y=.9, c("A","B","C","D"), cex=.8, bty="n",
       col=c("green", "yellow", "red", "blue"), pch=c(15, 15, 15, 17)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:22:56.930

pch 参数选择图例符号的形状：

```
 plot.new();

     legend(x=.5,y=.9, c("A","B","C","D"), 
            pch=c(1,4,3,2), cex=.8, bty="n",
            col=c("green","yellow","red","blue")) 
```

# android - 将base64图像数据转换为图像文件（.png）并保存到本地文件系统

> ID：14394122
> 
> 赞同：5
> 
> 时间：2013-01-18T07:15:35.113
> 
> 标签：android, image, base64

我有base64格式的图像数据，我想将此base64字符串转换为图像（.PNG）文件并将该文件保存到我的android应用程序中的本地文件系统中。请为我建议一个解决方案

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-18T07:25:48.347

试试这个。

```
FileOutputStream fos = null;
try {
    if (base64ImageData != null) {
       fos = context.openFileOutput("imageName.png", Context.MODE_PRIVATE);
       byte[] decodedString = android.util.Base64.decode(base64ImageData, android.util.Base64.DEFAULT);
       fos.write(decodedString);                        
       fos.flush();
       fos.close();             
    }

} catch (Exception e) {

} finally {
    if (fos != null) {
        fos = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:19:08.730

要将其转换为图像文件，您可以使用此...

```
byte[] decodedString = Base64.decode(encodedImage, Base64.DEFAULT);
    Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); 
```

并将其保存到文件系统，您可以使用它：

```
_bitmapScaled.compress(Bitmap.CompressFormat.PNG, 100, decodedString);
File f = new File(Environment.getExternalStorageDirectory()
                        + File.separator + "test.png")
f.createNewFile();
//write the bytes in file
FileOutputStream fo = new FileOutputStream(f);
fo.write(bytes.toByteArray());

// remember close de FileOutput
fo.close(); 
```

# c# - 调用 wsacancelblockingcall 中断了阻塞操作

> ID：14394126
> 
> 赞同：2
> 
> 时间：2013-01-18T07:15:41.760
> 
> 标签：c#, sockets

我正在使用 Windows 服务与使用 Udp 套接字的设备进行通信。在服务的构造函数中，我有以下代码

```
public Service1()
    {

        try
        {
            EventLog eventLog1 = new System.Diagnostics.EventLog();

            eventLog1.Source = "Alert Control Service";
            eventLog1.Log = "Application";

            //InitializeComponent();
            //TextBox settings
            //Wire-up the EventHandler

            //Create the UdpClient
            server = new UdpClient(port);

            serverForAdam = new UdpClient(6768);
            //Define a Receive point
            receivePoint = new IPEndPoint(new IPAddress(ip), port);
            IPAddress adam1 = IPAddress.Parse("172.16.2.252");
            adamReceivePoint = new IPEndPoint(adam1, 1025);
            string channel = "";

            //read alarm configuration from database

            RegistryKey baseKey = null;

            if (Environment.Is64BitOperatingSystem)
            {

                 baseKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64);
            }
            else
            {
                 baseKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32);
            }

            RegistryKey myKey = baseKey.OpenSubKey("SOFTWARE\\AlarmConfig", true);

            if (myKey == null) 
            {
                eventLog1.WriteEntry("No AlarmConfig Registry key");
            }

            string regString = (string)myKey.GetValue("database");
            string decryptString = Crypto.DecryptStringAES(regString, "1234");
            SQLConn.ConnectionString = decryptString;
            SQLConn.Open();
        }
        catch (Exception ex) 
        {
            TextWriter tw = new StreamWriter("c:\\error.txt");

            // write a line of text to the file
            tw.WriteLine(ex.Message);

            // close the stream
            tw.Close();
        }

    } 
```

这将写一行：阻塞操作被error.txt中的wsacancelblockingcall调用中断

那是什么原因呢。我尝试将服务作为普通的 Windows 应用程序运行。没关系，消息不存在。请帮忙。

# asp.net - 在asp.net C#中一键插入多行表单checkboxlist选定值

> ID：14394133
> 
> 赞同：0
> 
> 时间：2013-01-18T07:16:16.160
> 
> 标签：asp.net, selecteditem, checkboxlist

我是 C# ASP.NET 的新手。我在 CheckBoxList 中遇到问题，无法在数据库中添加多行的选定项目。

我有一页我在提交按钮上的数据库中插入产品信息。在页面中，我从数据库中绑定 CheckBoxList。

当我签入复选框时，我的产品代码将自动生成。如果我从复选框列表中选择了 2 个复选框，则只有一个复选框列表值将插入数据库。其他选中的复选框值或信息未插入数据库中。

在我的 Sql 表中，我插入产品名称、产品代码（将自动生成）产品标题等。

因此，当我在 CheckBoxList 中选择一次提交时，我希望在数据库中添加多行。

我的代码是

```
foreach (ListItem listitem in cblsubcat.Items)
{
  if (listitem.Selected == true)
  {
    product myproduct;
    myproduct = new product();
    myproduct.ProdName = txtproductname.Text.ToString().Trim();
    GetCategoryId();
    int Subcat_id = int.Parse(cblsubcat.SelectedValue.ToString());
    int Cat_id = int.Parse(cateid.ToString());
    gen_prod_code(Cat_id, Subcat_id);
    myproduct.ProdCode = prodcode;
    myproduct.ProdTitle = txtproductname.Text.ToString().Trim();
    myproduct.CatId = cateid;
    myproduct.SubCatID = int.Parse(cblsubcat.SelectedValue.ToString());
    ProductManager.InsertProductdata(myproduct);
  } 
```

这是我在 Dataaccesslayer 中的 InsertProductdata 代码。

```
public static int InsertProductdata(product myproduct)
    {
        int result = 0;
        using (SqlConnection myConnection = new SqlConnection(AppConfiguration.ConnectionString))
        {
            SqlCommand myCommand = new SqlCommand("spInsertProductItem", myConnection);
            myCommand.CommandType = CommandType.StoredProcedure;
            myCommand.Parameters.AddWithValue("@Prod_code", myproduct.ProdCode);
            myCommand.Parameters.AddWithValue("@Prod_name", myproduct.ProdName);                
            myCommand.Parameters.AddWithValue("@Prod_title", myproduct.ProdTitle);
            myCommand.Parameters.AddWithValue("@Prod_sdesc", myproduct.ProdSdesc);
            myCommand.Parameters.AddWithValue("@Prod_ldesc", myproduct.ProdLdesc);
            myCommand.Parameters.AddWithValue("@Prod_features", myproduct.ProdFeatures);
            myCommand.Parameters.AddWithValue("@Prod_colour", myproduct.ProdColour);
            myCommand.Parameters.AddWithValue("@Prod_size", myproduct.ProdSize);
            myCommand.Parameters.AddWithValue("@Prod_height_FI", myproduct.ProdHeightFi);
            myCommand.Parameters.AddWithValue("@Prod_height_CM", myproduct.ProdHeightCm);
            myCommand.Parameters.AddWithValue("@Prod_totqty", myproduct.ProdTotqty);
            myCommand.Parameters.AddWithValue("@Prod_available_size", myproduct.ProdAvailablesize);
            myCommand.Parameters.AddWithValue("@Prod_available_qty", myproduct.ProdAvailableqty);                
            myCommand.Parameters.AddWithValue("@Prod_price", myproduct.ProdPrice);
            myCommand.Parameters.AddWithValue("@Prod_offerprice", myproduct.ProdOfferprice);
            myCommand.Parameters.AddWithValue("@Prod_img_M", myproduct.ProdImgM);
            myCommand.Parameters.AddWithValue("@Prod_img_D", myproduct.ProdImgD);
            myCommand.Parameters.AddWithValue("@Prod_img_S", myproduct.ProdImgS);
            myCommand.Parameters.AddWithValue("@Prod_img_L", myproduct.ProdImgL);
            myCommand.Parameters.AddWithValue("@Prod_img_XL", myproduct.ProdImgXL);
            myCommand.Parameters.AddWithValue("@Prod_img_F", myproduct.ProdImgF);
            myCommand.Parameters.AddWithValue("@Prod_img_B", myproduct.ProdImgB);
            myCommand.Parameters.AddWithValue("@Prod_visibility", myproduct.ProdVisibility);
            myCommand.Parameters.AddWithValue("@Prod_is_del", myproduct.Prodisdel);
            myCommand.Parameters.AddWithValue("@Prod_createddate", myproduct.ProdCreateddate);
            myCommand.Parameters.AddWithValue("@Prod_modifieddate", myproduct.ProdModifieddate);
            myCommand.Parameters.AddWithValue("@Prod_keyword", myproduct.ProdKeyword);
            myCommand.Parameters.AddWithValue("@Prod_alttag", myproduct.ProdAlttag);
            myCommand.Parameters.AddWithValue("@Cat_id", myproduct.CatId);
            myCommand.Parameters.AddWithValue("@Subcat_id", myproduct.SubCatID);
            myCommand.Parameters.AddWithValue("@is_Featured", myproduct.IsFeatured);
            myCommand.Parameters.AddWithValue("@is_Recent", myproduct.IsRecent);
            myCommand.Parameters.AddWithValue("@is_Popular", myproduct.IsPopular);
            myCommand.Parameters.AddWithValue("@title_tag", myproduct.TitleTag);
            myCommand.Parameters.AddWithValue("@meta_description", myproduct.MetaDescription);

            DbParameter returnValue;
            returnValue = myCommand.CreateParameter();
            returnValue.Direction = ParameterDirection.ReturnValue;
            myCommand.Parameters.Add(returnValue);

            myConnection.Open();
            myCommand.ExecuteNonQuery();
            result = Convert.ToInt32(returnValue.Value);
            myConnection.Close();
        }
        return result;
    } 
```

# matlab - 如何将matlab中的数据导出到文本文件中

> ID：14394135
> 
> 赞同：1
> 
> 时间：2013-01-18T07:16:25.223
> 
> 标签：matlab, text, export

我有多个数据数组，其中只有 x、y 和 z 数组需要导出为文本。我知道如何导出单个数组，但无法将 3 列数据导出为文本文件。请帮忙，我尝试了以下..

```
 fid = fopen('g.txt','w');
        fprintf(fid,'%f \n',x,y,z);
        fclose(fid); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T07:23:44.043

试试[`dlmwrite`](http://www.mathworks.com/help/matlab/ref/dlmwrite.html)，例如：

```
x=[1:10]';
y=2*x;
z=3*x;
dlmwrite('g.txt',[x,y,z],'delimiter', '\t');

>type 'g.txt'

1   2   3
2   4   6
3   6   9
4   8   12
5   10  15
6   12  18
7   14  21
8   16  24
9   18  27
10  20  30 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T08:18:55.977

你不想分隔符写，你想要`csvwrite`. 它将在 Excel 和类似程序中很好地打开。

以下示例从矩阵 m 创建一个逗号分隔值文件。

```
m = [3 6 9 12 15; 5 10 15 20 25; ...
     7 14 21 28 35; 11 22 33 44 55];

csvwrite('csvlist.csv',m)
type csvlist.csv

3,6,9,12,15
5,10,15,20,25
7,14,21,28,35
11,22,33,44,55 
```

见[http://www.mathworks.com/help/matlab/ref/csvwrite.html](http://www.mathworks.com/help/matlab/ref/csvwrite.html)

# javascript - HTML/Javascript：具有不同字体颜色、大小、字体的文本字段，集成

> ID：14394137
> 
> 赞同：0
> 
> 时间：2013-01-18T07:16:45.257
> 
> 标签：javascript, html, css

我一直在尝试使用 CSS 和 Javascript 编写 HTML 页面。主要功能之一是在单个位置（主页）生成一个大型文本文件，该文件能够对某些单词和术语进行颜色编码，以帮助眼睛跳转到重要的短语。这需要在运行时完成，用户能够不断地添加到日志中。

任何人都可以推荐一个实现这种东西的库吗？我研究过 CKEditor，但据我所知，它仅在编写静态网页时才有用。

如果我使用 iFrame，我可以完成同样的事情，但使用 Javascript 更改其 html，然后再次将其嵌入到我的主页上并能够实时编辑它吗？（每当用户点击“提交”表单时都是实时的。）例如，告诉 Javascript 在字符串上添加适当的 html 标签，以便句子中间的单词可以使用 CSS 标签来改变它的颜色或字体，然后关闭标签使其恢复默认值？

谢谢！我的新 Jr. Programmer 工作很快就要开始了，我基本上是投入到我不太了解的网络语言中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:04:12.093

使用`<span></span>`将您的单词换行`javascript`，然后检查该单词是否为（您的应用程序）关键字，然后使用 . 更改该跨度的颜色`css`。它会给你的日志颜色代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:56:26.657

[jQuery](http://jquery.com/)很有用。[另请查看此](https://stackoverflow.com/questions/5115152/jquery-find-and-replace-string)问题的第二个答案，了解如何搜索和替换字符串。您当然希望将其替换为包含在指定另一个类的跨度中的字符串。

如果您正在学习 JavaScript，Douglas Crockford 的“JavaScript: The Good Parts”值得一读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T22:26:22.097

好的，我发现我应该使用 ScrollBox 来做我想做的事情。我以前认为我不能这样做，因为在使用表单时，它会直接将 CSS 标签打印为文本。

谢谢你们的建议！

# php - 从多个文本框获取数据 Code Igniter

> ID：14394139
> 
> 赞同：0
> 
> 时间：2013-01-18T07:17:01.477
> 
> 标签：php, javascript, jquery, codeigniter, for-loop

我是代码点火器的新手.. 所以首先我会让你知道我想要做什么。我连续有两个选择框和三个简单的文本框..所以现在这意味着我在一行中有五个输入框..第二个下拉列表的值基于第一个下拉框e.意味着如果我从中选择一些东西第一个选择框，然后针对第一个选择的值将出​​现在第二个下拉列表或选择框中。顺便说一下，值是从数据库中动态传入的。好的，然后我用for循环制作了五行..现在只有第一行的选择框正在工作..不是其他四行..我想获取用户填写的所有值这是我的观点

```
 <tr>
<th>Category:</th>
<th>Items:</th>
<th>Selling Price:</th>
<th>quantity:</th>
<th> total:</th>
</tr>

    <?php for ($i = 0; $i < 5; $i++) {
        ?>
        <tr>
               <td>     

<?php echo form_dropdown('cat_id', $records2, '#', 'id="category"');?>
        </td>
       <td>                 

<?php echo form_dropdown('item_id', $records3, '#', 'id="items"'); ?>

    </td>           

  <td><?php echo form_input($price); ?> </td>

           <td><?php echo form_input($quantity); ?></td>

           <td> <?php echo form_input($total); ?>
            </td></tr>

   <?php }?></table> 
```

我的 javascript

```
 $(document).ready(function(){  
     $('#check').click(function(){
         alert("hello");
         return false;
     });
    $('#category').change(function(){ 
        $("#items > option").remove();
        var category_id = $('#category').val();  
        $.ajax({
            type: "POST",
            url: "stockInController/get_Items/"+category_id, 

            success: function(items) //we're calling the response json array 'cities'
            {
                $.each(items,function(item_id,item_name) 
                {
                    var opt = $('<option />'); 
                    opt.val(item_id);
                    opt.text(item_name);
                    $('#items').append(opt);
                });
            }

        });

    });
}); 
```

我必须给每个选择框一个带有 $i 的 id，但我不知道我怎么能在 jquery 中做到这一点......记住只有我的第一行成功地工作而不是其他四个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:25:26.940

看看这个 jquery 插件 - 它会让你的生活更轻松

[http://www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

# php - 简单的 HTML Dom：检查标签是否存在

> ID：14394140
> 
> 赞同：3
> 
> 时间：2013-01-18T07:17:05.923
> 
> 标签：php, simple-html-dom

我正在尝试检查标签后是否有图像，以及是否有抓取宽度值。我在下面使用的方法不起作用

```
$element = $html->find("td", 23);
if ($element->innertext != null) {
    $element = $html->find("td img[src=http://pictures.domain.com/images/7.gif]");
    echo $element->width . '<br />';        
} else {
   echo "empty";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:01:23.727

我通过使用`is_object()`and解决了这个问题`is_array()`。

当您搜索单个元素时，将返回一个对象。当您搜索一组元素时，将返回一个对象数组。

`$td = $html->find("td", 23)`正在搜索单个元素，因此使用以下命令将检查搜索到的元素是否存在：

```
$td = $html->find("td", 23);
if (is_object($td)) {
    //continue
} 
```

# .net - 将razor @的语法转换为ASPX <%: %>

> ID：14394151
> 
> 赞同：1
> 
> 时间：2013-01-18T07:17:56.673
> 
> 标签：.net, razor, asp.net-mvc-4

我需要知道 Razor 和 ASPX 语法是否都正确

剃刀：

```
columns.Template(@<text>@Html.ActionLink("Create Facility", "Facility")</text>) 
```

网络表格：

```
columns.Template(<%: <text><%:Html.ActionLink("Create Facility", "Facility") %> </text> %>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:21:44.530

您的 Razor 代码看起来不错：

```
columns.Template(@<text>@Html.ActionLink("Create Facility", "Facility")</text>) 
```

WebForms 需要更多的意大利面条代码：

```
columns.Template(c => { %> <%= Html.ActionLink("Create Facility", "Facility") %> <% }) 
```

# tcl - 如何使用 tcl udp 包发送有效负载

> ID：14394152
> 
> 赞同：2
> 
> 时间：2013-01-18T07:17:57.420
> 
> 标签：tcl

我想使用 tcl 提供的 udp 包发送 6 字节十六进制的有效负载：“8000000004d2”。我能够发送它，并且在接收器 pc 上我能够读取相同的数据。但在 Wireshark 捕获中，它显示了 12 个字节的有效负载，因为它以 ascii 格式发送此数据，例如“38 30 30 30 30 30 30 30 31 32 33 34”。谁能告诉我数据是真的以 12 个字节传输还是只有 Wireshark 将其解释为错误的。如果数据以 12 个字节传输，任何人都可以帮助我仅使用 tcl udp 包以 6 个字节发送它。作为参考，我提供了 udp 发件人代码

UDP 发件人代码：

```
namespace eval soc {

variable s
}

set soc::s [udp_open]
udp_conf $soc::s $IP_ADDR_RX  $UDP_PORT
fconfigure $soc::s -buffering none -translation binary

set data 1234
append hex [ format %04X [ expr $i | 0x8000 ] ]
append hex [ format %08X [ expr $data ] ]
puts -nonewline $soc::s $hex 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:28:16.657

如果您有十六进制的有效负载，请在发送前将其解码为字节数组：

```
# For tcl 8.5 and below
puts -nonewline $soc::s [binary format H* $hex]
# For tcl 8.6 and above
puts -nonewline $soc::s [binary decode hex $hex] 
```

但是没有理由使用中间十六进制表示：您可以从一开始就创建字节数组。

```
set bytes [binary format SI [expr {$i|0x8000}] $data]
puts -nonewline $soc::s $bytes 
```

（注意：`expr`没有`{`,`}`在解析之前会产生一轮额外的替换，这在语义上通常是错误的，并且总是不利于性能）。

# jquery - jquery 多个类部分检测类并分别获取每个类

> ID：14394156
> 
> 赞同：0
> 
> 时间：2013-01-18T07:18:17.613
> 
> 标签：jquery, html, regex, class, each

我正在努力实现以下目标：

```
<input type="text" name="some_name" id="some_id" class="prefix_type_tags prefix_separator_comma etc etc" /> 
```

我的页面上有多个此类元素（动态生成），所以我想检测

```
jQuery('[class^=prefix_]').each(function(){
    //solution????
}); 
```

在这里我想单独检测每个类，比如我想检测它们中是否有**类型**部分类或**分隔**部分类，如果是，那么我想获取类的最后一部分，`prefix_type_tags`以防万一我想获取**标签**，`prefix_separator_comma`如果我想得到**“逗号”**，那么任何机构都有任何解决方案吗？

我不希望它被拆分或类似的解决方案，我更愿意与`regex`!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:36:29.277

```
jQuery('[class^=prefix_]').each(function(){
    var classList = $(this).attr('class').split(/\s+/);
    for ( var counter = 0; counter < classList.length; counter ++ )
    {
         var classname = classList[ counter ];
         var lastPart = classname.split("_")[2];

         //you can now do whatever you want to do with lastPart
    }
}); 
```

# php - 在关联数组中添加元素的数据结构

> ID：14394176
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:20:05.227
> 
> 标签：php

> **可能重复：**
> [关联数组是如何在 PHP 中实现的？](https://stackoverflow.com/questions/247467/how-are-associative-arrays-implemented-in-php)

任何人都可以帮助我了解关联数组背后的数据结构。我试图从过去几天中找出它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:24:47.253

它是一个有序的哈希映射。这是 php 的创建者这样说的：http: [//www.mail-archive.com/internals@lists.php.net/msg59849.html](http://www.mail-archive.com/internals@lists.php.net/msg59849.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:29:33.643

在计算中，哈希表（也称为哈希映射）是一种用于实现关联数组的数据结构，关联数组是一种可以将键映射到值的结构。

有关详细信息，请参阅以下 wiki 链接

[http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

# c# - UI 使用 httprequest 后台工作程序冻结 1 或 2 秒

> ID：14394177
> 
> 赞同：2
> 
> 时间：2013-01-18T07:20:08.670
> 
> 标签：c#, multithreading, httpwebrequest, backgroundworker, windows-phone-8

我的代码有什么问题？后台工作人员是否未正确设置导致 UI 冻结？似乎延迟在调用 BeginGetResponse 时开始，然后在从 Web 服务器返回结果后正常恢复。

```
 private void updateProgressbar()
    {
        bgWorker = new BackgroundWorker();
        bgWorker.DoWork += new DoWorkEventHandler(bgWorker_DoWork);
        bgWorker.RunWorkerAsync();
    }

    private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        string path = "http://www.somestring.com/script.php?a=b");
        Uri uriString = new Uri(path);

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uriString);
        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)";
        request.BeginGetResponse(new AsyncCallback(ReadCallback), request);
    }

    private void ReadCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);

            using (StreamReader streamReader1 = new StreamReader(response.GetResponseStream()))
            {
                string resultString = streamReader1.ReadToEnd();
                Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {
                        JsonMainProgressbar progressBarValue;
                        progressBarValue = JsonConvert.DeserializeObject<JsonMainProgressbar>(resultString);
                        this.ProgressBar.Value = Convert.ToInt32(progressBarValue.userclicks / progressBarValue.countryclicks * 100);
                        this.txtContribution.Text = "your contribution: " + this.ProgressBar.Value + "%";
                        Debug.WriteLine("Progressbar updated");
                    });
            }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:43:53.660

我认为您对 UI 线程做的工作太多，而在后台线程上做的工作还不够`ReadCallback`。尝试在传递给的 lambda 函数之外尽可能多地移动 (*) `BeginInvoke()`。

(*) 即在没有`InvalidCrossThreadExceptions`或竞争条件的情况下安全地...

在这种情况下，请尝试以下操作：

```
string resultString = streamReader1.ReadToEnd();
JsonMainProgressbar progressBarValue;
progressBarValue = JsonConvert.DeserializeObject<JsonMainProgressbar>(resultString);
int progressBarValueInt = Convert.ToInt32(progressBarValue.userclicks /
        progressBarValue.countryclicks * 100);

Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    this.ProgressBar.Value = progressBarValueInt;
    this.txtContribution.Text = "your contribution: " + progressBarValueInt + "%";
    Debug.WriteLine("Progressbar updated");
 }); 
```

（假设您可以`JsonMainProgressBar`在后台线程中安全使用）

# c# - Linq空值不比较

> ID：14394178
> 
> 赞同：0
> 
> 时间：2013-01-18T07:20:14.470
> 
> 标签：c#, sql-server, asp.net-mvc, linq, entity-framework

场景是我需要检查一行的每一列以查看它是否包含用户ID。如果它不存在于任何其他列中，我只希望能够将用户 ID 插入到列中。

表是这样的：

```
Col1 = ID (PK)
Col2 = No1 varchar(50) ..... also tried GUID
Col3 = No2 varchar(50) ..... also tried GUID
Col4 = No3 varchar(50) ..... also tried GUID 
```

每列的默认值为空栏，ID 为自动。

所以表的当前状态是：

```
1  NULL  NULL  NULL
2  NULL  NULL  NULL
3  NULL  2     NULL 
```

我想要做的是将 userID 值插入到所选列中，条件是 userID 不存在于任何其他列中。

我尝试了以下方法：

```
mymodel m = new mymodel()
m = db.mytable.Where(t => 
t.id == id && 
t.No1 != userID &&
t.No2 != userID &&
t.No3 != userID).First(); 
```

这个想法是首先检查条目，然后运行更新。

现在，当我运行它并且所有列都为空时，我什么也得不到。当我在第 3 行（第 2 列有用户 ID）上运行它时，我什么也得不到。

如果这是直接的 SQL，我可能会在 userID 上放置一个 isnull(userID, '') 包装器，但据我所知，这在 Linq 中是不可能的。

我无法检查 NULL (ietNo2 != userID && t.No2 == NULL)，因为这意味着我将能够将 userID 插入到已经在另一列中已经有该 userID 的行中。

我唯一的选择是将数据库设计为在每个列中都有一个默认值''以使 Linq 能够比较 NULL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:56:46.887

我可能会误解，但通常人们可以按照以下方式做一些事情：

```
mymodel m = new mymodel()
m = db.mytable.Where(t => 
t.id == id && 
(t.No1 == null || t.No1 != userID) &&
(t.No2 == null || t.No2 != userID) &&
(t.No3 == null || t.No3 != userID)).First(); 
```

我相信对每一列进行明确的空检查可能会有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:37:43.357

首先检查 UserID 是否有值：

```
mymodel m = new mymodel()
m = db.mytable.Where(t => 
t.id == id && (!userId.HasValue ||
(t.No1 != userID.Value &&
t.No2 != userID.Value &&
t.No3 != userID.Value))).First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:49:31.593

您可以编写比较函数，例如

```
public bool Compare(ColmunNo1DataType colValue, UserIdDataType userId){...} 
```

并使用下一个 LINQ 代码

```
mymodel m = new mymodel()
m = db.mytable.Where(t => 
t.id == id && 
Compare(t.No1,userID) &&
Compare(t.No2,userID) &&
Compare(t.No3,userID)).First(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:46:54.633

好的，如果我为''的每一列分配一个默认值，我的原始逻辑就可以工作。

Linq 中不比较 NULL ... 但空字符串是。

# internet-explorer - Intranet 站点忽略 X-UA 兼容的 HTTP 标头

> ID：14394179
> 
> 赞同：0
> 
> 时间：2013-01-18T07:20:19.567
> 
> 标签：internet-explorer, ie8-compatibility-mode, google-chrome-frame

如果我明确告诉 IE（仍在内部使用 IE8）使用带有 gcf 前缀的 GCF，Chrome 就会被激活。缺点是目标站点内部的任何链接此后都会丢失 gcf 前缀。预期的。

在“IE=edge,chrome=1”的 Apache 中的 HTTP 中添加了 X-UA-Compatible。GCF 永远不会被激活。认为这是我们的 IE8 打包版本的普遍问题。它似乎忽略了所有 X-UA-Compatible 指令。

想知道是否有人遇到过同样的问题？或者如果有我可以查看的日志文件？还是增加调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:31:54.693

原来“启用第三方浏览器扩展”选项阻止了 GCF 激活。得到 Greg Thompson 的超级帮助是这个 Google 论坛帖子：

```
 https://groups.google.com/forum/#!topic/google-chrome-frame/tgZj_DL9wHQ 
```

使用 gpedit 穿过后门来更改管理模板并且它起作用了。仍然不确定为什么 IE 的兼容模式没有按预期工作。但至少让 GCF 运行起来。再次感谢格雷格！

# jquery - Multidatespiscker：突出显示日期范围

> ID：14394191
> 
> 赞同：0
> 
> 时间：2013-01-18T07:21:20.903
> 
> 标签：jquery, calendar, highlight

我必须在日历中突出显示用户定义的日期范围。我决定使用[multidatepicker](http://multidatespickr.sourceforge.net/)

用户选择 2 个日期，这些天之间的所有天都可能会被突出显示。我不擅长`JavaScript`/ `jQuery`，谁能帮帮我。我已经为此浪费了很多时间，但仍然没有任何想法。

我读到了[时间表](http://stephencelis.github.com/timeframe/#example_information)；但我使用的是素面，它与 timeframe 中*使用*`prototy.js`的不兼容。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:05:04.860

您选择使用的插件没有任何开箱即用支持该用法的方法，您必须自己编写此功能。

看看这里，这个人似乎在寻找类似于您需要的东西： [jQuery UI Datepicker - Date range - Highlight days in between](https://stackoverflow.com/questions/7831512/jquery-ui-datepicker-date-range-highlight-days-in-between)*

# ruby - 在 Datamapper.setup 中指定复杂密码

> ID：14394193
> 
> 赞同：1
> 
> 时间：2013-01-18T07:21:32.847
> 
> 标签：ruby, database, datamapper, padrino

我正在尝试将 Datamapper 用作我的 Ruby/Padrino 应用程序的 ORM。要设置数据库连接，在 databse.rb 中，我有：

```
when :development then DataMapper.setup(:default, "mysql://db_user:dsfsdfs@localhost/my_app_development") 
```

这工作很好。但我的要求是有复杂的密码，比如：

```
when :development then DataMapper.setup(:default, "mysql://db_user:Passw0rd#13@localhost/my_app_development") 
```

这不起作用，我得到错误：

```
ruby/1.9.1/gems/addressable-2.2.8/lib/addressable/uri.rb:1179:in `port=': Invalid port number: "Passw0rd" (Addressable::URI::InvalidURIError) 
```

我发现“#”字符有问题。然后我尝试这样做：

```
DataMapper.setup(:default, 
{
    :adapter => "mysql",
    :database => "my_app_development",
    :username => "db_user",
    :password => "Passw0rd#13",
    :host => "localhost"
}) 
```

当我这样做时，似乎 DM 完全忽略了哈希；当我跑步时

```
padrino rake db:create 
```

它尝试以当前登录用户身份连接，而不是此处指定的用户名。解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:52:03.963

我想你仍然需要像下面这样声明它，以防你不是

```
when :development then
  DataMapper.setup(:default, 
  {
      :adapter => "mysql",
      :database => "my_app_development",
      :username => "db_user",
      :password => "Passw0rd#13",
      :host => "localhost"
  })
when :production then
  # rest of your code
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T12:08:15.690

明白了 - 关键`:username`应该是`:user`. 基本上，散列应该包含键`Addressable::URI`

# php - php.net 的 PHP 开始标签

> ID：14394195
> 
> 赞同：5
> 
> 时间：2013-01-18T07:21:44.500
> 
> 标签：php, c++

例如，在[http://php.net/source.php?url=/include/prepend.inc](http://php.net/source.php?url=/include/prepend.inc)中，使用的开始 PHP 标记如下所示：（`<?php // -*- C++ -*-`不仅仅是`<?php`）。

这是什么意思，C++ 与它有什么关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T07:23:27.963

一些编辑器会看到该`-*- C++ -*-`部分，并为该文件启用 C++ 语法。它与 PHP 无关，并且确实被注释掉了，所以 PHP 会跳过它。

# java - 小程序牌没有显示？

> ID：14394198
> 
> 赞同：0
> 
> 时间：2013-01-18T07:21:54.140
> 
> 标签：java, image, applet, awt, imageicon

我有一个程序，它有一副牌，洗牌，然后随机获得 10 张牌，并将它们显示在两行中，每行五张。程序编译好了，html页面也编译好了，但是当我运行html页面的时候，appletviewer是空白的……这是为什么呢？

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;

public class Cards1 extends Applet{
Image[] image = new Image[52];

public void init() {
    image[0] = getImage(getDocumentBase( ),"images/c1.gif");
    image[1] = getImage(getDocumentBase( ),"images/c2.gif");
    // ...
    image[48] = getImage(getDocumentBase( ), "images/h10.gif");
    image[49] = getImage(getDocumentBase( ), "images/hj.gif");
    image[50] = getImage(getDocumentBase( ), "images/hq.gif");
    image[51] = getImage(getDocumentBase( ), "images/hk.gif");
}

public void paint(Graphics g) {
     //Shuffle
    for (int i = 0; i < image.length; i++) {
        int index = (int)(Math.random() * image.length);
        Image temp = image[i];
        image[i] = image[index];
        image[index] = temp;
    }

    //Display first row
    int index = 0;
    for(int j = 0; j < 294; j += 71) {
        g.drawImage(image[index++], 10 + j, 10, this);
    }

    //Display second row
    index = 5;
    for(int j = 0; j < 294; j += 71) {
        g.drawImage(image[index++], 10 + j, 106, this);
    }
}
} 
```

//html代码

```
 <html>
<head>
<title>DisplayCards</title>
</head>
<body>
<applet code = "DeckofCards1.class" width = 8000 height = 8000> </applet>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:47:33.207

首先，您的 applet 类具有我认为应该具有`Cards1`的 HTML 代码的名称。`DeckofCards1.class``Cards1.class`

此外，似乎存在`DeckofCards1.class`的目录中还有其他一些小程序类文件，`Cards1.class`它必须是一个空白小程序。

# iphone - 在切换到另一个 UIview 时设置 UIActivityIndi cator

> ID：14394199
> 
> 赞同：-2
> 
> 时间：2013-01-18T07:22:06.743
> 
> 标签：iphone, xcode, uiactivityindicatorview

当我从一个 UIView 移动到另一个 UiView 时，我需要在 didSelectRowatIndexPath 事件中显示 activityindicator。只要加载另一个 uiview 的过程需要，它就应该显示。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:39:55.303

试试下面的代码，但我给出的例子你应该修改它并根据你的需要使用：

```
 alert= [[UIAlertView alloc] initWithTitle:@"Loading\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
                [alert show];

                UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

                indicator.center = CGPointMake(150, 100);
                [indicator startAnimating];
                [alert addSubview:indicator]; 
```

好的，在推动你的班级后使用这条线来关闭指示器：

```
 [alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

尝试。祝你好运。

# c# - 远程服务器返回错误：(400) Bad Request.System.Net.HttpWebResponse Hammock Twitter API

> ID：14394202
> 
> 赞同：0
> 
> 时间：2013-01-18T07:22:25.103
> 
> 标签：c#, rest, httpwebrequest, twitter, hammock

我正在开发一个使用 Hammock 与 Twitter API 通信的应用程序。我可以使用 Aouth 进行身份验证，并且可以返回令牌和令牌密码。但是，当我尝试获取 twitter 提及或发布更新时，我收到 400 错误。根据这篇文章[http://codeknowledge.net/2011/11/03/httpwebrequest-authentication-error-400/ ，通过谷歌搜索，我了解到问题与 System.net.HttpWebrequest 有关](http://codeknowledge.net/2011/11/03/httpwebrequest-authentication-error-400/)

但是我不知道如何覆盖默认值并使用上面链接中描述的自定义。

这是我的错误详细信息：任何帮助将不胜感激

> 远程服务器返回错误：(400) Bad Request.System.Net.HttpWebResponse protocolerror
> 
> 堆栈跟踪：
> 
> 在 System.Net.HttpWebRequest.GetResponse()
> 在 Hammock.Web.WebQuery.ExecuteGetDeleteHeadOptions(WebRequest request, WebException& exception) 在 D:.......\hammock-master\src\net35\Hammock\Web \WebQuery.cs：第 1022 行
> 
> query.Result.Exception.TargetSite: {System.Net.WebResponse GetResponse()}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:51:35.150

根据 Twitter Developer's documentation about [error response codes](https://dev.twitter.com/docs/error-codes-responses)，可能是由于以下原因：

*   如果您使用 1.0 API，您已经达到了速率限制，您必须等待启动新请求。
*   如果您使用 1.1 API，`Authorize`则缺少用于身份验证的标头。您的请求是否经过正确身份验证？
*   您的请求可能无效。您的 URL、标头、GET 和 POST 参数是否正常？

您的错误消息*`protocolerror`*也指示“”。您的网址是否以“”开头*`https://api.twitter.com/`*？

如果我有更多信息，答案将被编辑。

# bash - 使用 bash 重命名用零填充的目录

> ID：14394203
> 
> 赞同：1
> 
> 时间：2013-01-18T07:22:30.967
> 
> 标签：bash

我正在尝试重命名大量目录，以便用零填充它们。我正在尝试在`workingDir`包含该`viz`目录的目录中运行 bash 脚本。在`viz`目录中，我有目录

`visit_dump.0001
visit_dump.0005 visit_dump.11000 visit_dump.12000 visit_dump.504000`

如何将它们重命名为以下内​​容？

`visit_dump.000001
visit_dump.000005 visit_dump.011000 visit_dump.012000 visit_dump.504000`

另外，我不知道扩展名最大的目录`504000`是否会有`6`数字或更多或更少。

下面是一个非常奇怪的结果尝试（我收到消息`printf: 04800: invalid octal number` ，它为目录分配了完全错误的扩展名。任何帮助将不胜感激。谢谢。

```
eulerDir=visit_dump

dataDir=viz

cd ./$dataDir

for eulerDirIter in $(ls -d $eulerDir.*); do
    number=$(echo $eulerDirIter |awk -F . '{print $NF}')
    $(mv $eulerDirIter $(printf $eulerDir.%06d $number));
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:54:01.797

在第一行中查找最大的数字扩展名，并将每个数字作为十进制而不是八进制处理：

```
max=$(for f in *; do echo "${f##*.}"; done | sort -n | tail -1)
for f in *; do
    base=${f%.*}
    ext=${f##*.}
    newext=$(printf "%0*d" ${#max} "$((10#$ext))")
    echo mv "$f" "$base.$newext"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:31:43.543

试试这个技巧：

```
awk -F . '{print $NF+0}' 
```

问题是任何以 a 开头的数字`0`都被视为八进制。因此，虽然`0005`在八进制中与`5`十进制相同，但类似的字符串`04800`被视为八进制，但不幸的是包含一个`8`使其成为非法八进制数的字符串。

您用于`awk -F . '{print $NF}'`获取目录的数字后缀，但您希望将它们视为数字，因此将字符串转换为数字的简单方法`04800`是简单地添加`0`到它。（`awk`不`04800`视为八进制）。

# scala - Scala 编译器插件的动态加载

> ID：14394207
> 
> 赞同：2
> 
> 时间：2013-01-18T07:22:54.383
> 
> 标签：scala, scala-2.10, scala-compiler

根据[这篇文章](http://www.scala-lang.org/node/140)为了创建一个Scala编译器插件，需要将插件编译成一个jar，然后要么指定对jar的引用作为命令行参数，要么将jar放在`$SCALA_HOME/misc/scala-devel/plugins.`

我需要在运行时调用编译器，使用 scala 编译器 API (scala.tools.nsc)。在调用编译器之前，是否可以在运行时动态地编译器插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:28:58.477

我不完全确定在运行时加载它是什么意思，但我假设您打算在运行时也调用编译器并为它提供该插件。

在这种情况下，是的，这是可能的。您可以查看[alacs](https://github.com/ymasory/alacs/blob/master/src/test/scala/RunPlugin.scala)测试套件中的 RunPlugin.scala 作为示例。该项目不再真正处于活动状态，但它提供了用于额外检查的编译器插件，这些检查也通过涉及上述类的测试套件进行测试，用于使用选定的插件进行运行时编译。

# jquery - 使用 jquery 从 ul li 创建一个对象数组

> ID：14394215
> 
> 赞同：1
> 
> 时间：2013-01-18T07:23:32.497
> 
> 标签：jquery, html, arrays, html-lists

我正在尝试`object`使用. 不幸的是，我无法做到这一点。我在下面粘贴我的代码。`ul li``jQuery`

```
var photos = [];
$( "#sliderContent li" ).each(function() {

  var title = $(this).find(".title").html();
  var image = $(this).find(".image".html());
  var url = $(this).find(".url").html();
  var firstline = $(this).find(".firstline").html();
  var secondline = $(this).find(".secondline").html();

  var slide = new Object();
  slide.title = title;
  slide.image = image;
  slide.url = url;
  slide.firstline = firstline;
  slide.secondline = secondline;
  photos.push(slide);
}); 
```

我的 HTML 列表`ul li`

```
<ul id="sliderContent" >
    <li>
        <div class="title">Stairs 1</div>
        <div class="image">vacation.jpg 1</div>
        <div class="url"># 1</div>
        <div class="firstline">Amazing Apartment for Rent in JBR 1</div>
        <div class="secondline">
            <div class='row'>
                    <div class='col1'>ABD 1</div>
                    <div class='col2'>EFG 1</div>
            </div>
            <div class='row'>
                <div class='col1'>ABD 1</div>
                <div class='col2'>EFG 1</div>
           </div><div class='row'>
            <a class='view' href='#'></a>
            <a class='arrange' href='#'></a>
           </div>
       </div>
    </li>
</ul> 
```

这就是我想要创建的。

```
var photos = [ {
    "title" : "Stairs",
    "image" : "vacation.jpg",
    "url" : "",
    "firstline" : "Amazing Apartment for Rent in JBR",
    "secondline" : "lorem ipsum"
}, {
    "title" : "Office Appartments",
    "image" : "work.jpg",
    "url" : "",
    "firstline" : "Amazing Apartment for Rent in JBR",
    "secondline" : "work?"
}]; 
```

请告诉我哪里出错了，以及如何查看数组的内容`photos`来检查结果。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:28:42.007

您可以`alert( JSON.stringify( photos ) );`查看结果对象

你需要改变

```
var slide = new Object(); 
```

到

```
var slide = {}; 
```

另外，我无法弄清楚你是如何从那个 html 中推断出“第二线”的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:32:07.440

当我们这样做时，为了响应 gurvinder372 的回答，您还可以像这样创建对象：

```
var slide = {
    title: title,
    image: image,
    url: url,
    firstline: firstline,
    secondline: secondline
}; 
```

而不是你原来的版本：

```
 var slide = new Object();
  slide.title = title;
  slide.image = image;
  slide.url = url;
  slide.firstline = firstline;
  slide.secondline = secondline; 
```

**编辑**：现在，我花了一些时间......在这种情况下，您可以像这样使用 jQuery.map 函数：

```
var photos = $('#sliderContent li').map(function(index, liItem) {
    var $liItem = $(liItem);

    return {
        title: $liItem.find('.title').html(),
        image: $liItem.find('.image').html(),
        url: $liItem.find('.url').html(),
        firstline: $liItem.find('.firstline').html(),
        secondline: $liItem.find('.secondline').html()
    };
}); 
```

请记住，仅当 dom 准备好（因此`sliderContent`存在列表）时才调用此代码。如果您不知道 jQuery.map 函数，请查看其文档：[http ://api.jquery.com/map/](http://api.jquery.com/map/)

# ember.js - Uviews 没有连接到控制器

> ID：14394217
> 
> 赞同：2
> 
> 时间：2013-01-18T07:23:39.660
> 
> 标签：ember.js, handlebars.js

Ember 有一个应用程序，它有 ApplicationView、ApplicationController 和名为模板的“应用程序”和名为插座的“主”，所有这些都自动连接。例如。

```
App.ApplicationView = Ember.View.extend(); 
```

和

```
App.ApplicationController = Ember.Controller.extend(); 
```

所以每当我的应用程序模板呈现它的默认控制器时，它就是一个自动实例

```
App.ApplicationController 
```

我可以在模板中访问其属性。但是为什么它不适用于其他视图和控制器，即如果我有

```
App.SongView = Em.View.extend() 
```

和 App.SongController = Em.Controller.extend() 这两个不连接。我可以使用任何属性

```
App.SongController 
```

在我的歌曲模板中。
我可以像这样使用：

```
{{view App.SongView}} 
```

并在模板中：

```
<script type='text/x-handlebars' data-template-name='song'>
    {{name}}
</script> 
```

如果我在 App.SongController 中有一个 name 属性，那么它不会被拾取，因为它没有连接到视图。虽然我可以这样做

```
{{view App.SongView controllerBinding='App.songController'}} 
```

但这需要我的 js 文件中的 App.songController 实例，并且使用这种方法，我们将控制器硬编码到模板中。
最好的方法是什么？

**更新** 我还在这里为我的问题附加了一个 js 小提琴：http: [//jsfiddle.net/anshulguleria/K6KPJ/](http://jsfiddle.net/anshulguleria/K6KPJ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T07:46:49.083

如果要渲染模板及其关联的控制器和视图，可以使用`{{render}}`模板。它的工作方式类似于`this.render`在路由器中。

```
{{render "song" song}} 
```

此示例将使用和`song`的实例呈现模板。它将控制器设置为当前上下文中的值。`App.SongController``App.SongView``song``model``song`

这是一个[有效的 JSBin](http://jsbin.com/eqihif/1/edit)，它说明了它是如何工作的。

# php - 会话值未被识别

> ID：14394220
> 
> 赞同：0
> 
> 时间：2013-01-18T07:23:52.623
> 
> 标签：php, session

我正在测试我的脚本并且会话值没有注册。这是我的错误信息：

> 注意：未定义索引：第 11 行 /home/content/78/10212078/html/ads/new_topic.php 中的 email1
> 
> 注意：未定义索引：第 12 行 /home/content/78/10212078/html/ads/new_topic.php 中的 pass1 错误：系统中不存在您。

这是第 11 行和第 12 行：

```
$u_email = mysql_real_escape_string($_SESSION['email1']);
$u_pass = mysql_real_escape_string($_SESSION['pass1']); 
```

这是完整的代码`new_topic.php`：

```
<?php
error_reporting(E_ALL); ini_set('display_errors', '1');

session_start();
include_once "../ads/connect_to_mysql.php"; // Connect to the database

// Assume they are a member because they have a password session variable set
// Check the database to be sure that their ID, password, and email session variables all match in the database
$u_id = mysql_real_escape_string($_SESSION['id']);
$u_name = mysql_real_escape_string($_SESSION['username']);
$u_email = mysql_real_escape_string($_SESSION['email1']);
$u_pass = mysql_real_escape_string($_SESSION['pass1']);
$sql = mysql_query("SELECT * FROM members1 WHERE id='$u_id' AND username='$u_name' AND email1='$u_email' AND pass1='$u_pass'");
$numRows = mysql_num_rows($sql);
if ($numRows < 1) {
echo "ERROR: You do not exist in the system.";
exit();
}

// Check to make sure the URL variables of "sid" and "title" are set
if (!isset($_POST['ad_id']) || $_POST['ad_id'] == "" || !isset($_POST['ad_title']) ||  $_POST['ad_title'] == "") {
echo "Important variables are missing";
exit();
} else {
// Acquire the variables and proceed to show them a form for creating a new topic
$forum_section_id = preg_replace('#[^0-9]#i', '', $_POST['ad_id']); 
$forum_section_title = preg_replace('#[^A-Za-z 0-9]#i', '', $_POST['ad_title']); 
}
$sql = mysql_query("SELECT * FROM ad_sections WHERE id='$forum_section_id' AND  title='$forum_section_title'");
$numRows = mysql_num_rows($sql);
if ($numRows < 1) {
echo "ERROR: That section deos not exist.";
exit();
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="style/style.css" rel="stylesheet" type="text/css" />
<title>Create New Topic</title>
<script type="text/javascript" language="javascript"> 
<!--
function validateMyForm ( ) { 
var isValid = true;
if ( document.form1.post_title.value == "" ) { 
alert ( "Please type in a title for this classified" ); 
isValid = false;
} else if ( document.form1.post_title.value.length < 10 ) { 
alert ( "Your title must be at least 10 characters long" ); 
isValid = false;
} else if ( document.form1.post_body.value == "" ) { 
alert ( "Please type in your classified body." ); 
isValid = false;
}
return isValid;
}
//-->
</script>
</head>
<body>
<table style="background-color: #F0F0F0; border:#069 1px solid; border-top:none;" width="900" border="0" align="center" cellpadding="12" cellspacing="0">
  <tr>
    <td width="731" valign="top">
    <div id="breadcrumbs"><a href="http://www.locallysold.com">Locally Sold Home</a>  &larr; <a href="http://www.locallysold.com/">Section Home</a> &larr; <a  href="section.php?id=<?php echo $forum_section_id; ?>"><?php echo $forum_section_title; ?></a></div>
    <h2>Creating New Classified In the  <em><?php echo $forum_section_title; ?></em> Forum</h2>

    <form action="parse_post.php" method="post" name="form1">
    <input name="post_type" type="hidden" value="a" />
    Topic Author:<br /><input name="topic_author" type="text" disabled="disabled" maxlength="64" style="width:96%;" value="<?php echo $u_name; ?>" />
    <br /><br />
    Please type in a title for your classified here:<br /><input name="post_title" type="text" maxlength="64" style="width:96%;" /><br /><br />
    Please type in your classified body:<br /><textarea name="post_body" rows="15" style="width:96%;"></textarea>
<br /><br /><input name="" type="submit" value="Create my classified now!" onclick="javascript:return validateMyForm();"/><input name="fsID" type="hidden" value="<?php echo $forum_section_id; ?>" />
    <input name="fsTitle" type="hidden" value="<?php echo $forum_section_title; ?>" />
    <input name="uid" type="hidden" value="<?php echo $_SESSION['id']; ?>" />
    <input name="upass" type="hidden" value="<?php echo $_SESSION['pass1']; ?>" />
    </form>

    </td>
    <td width="189" valign="top"><div style=" width:160px; height:600px; background-color: #999; color: #CCC; padding:12px;"> <br/>
      <br/>
      <br />
      <h3>Ad Space or Whatever</h3>
    </div></td>
  </tr>
</table>
</body>
</html> 
```

这是在 login.php 上设置会话变量的位置：

```
<?php
// Start Session to enable creating the session variables below when they log in
session_start();
// Force script errors and warnings to show on page in case php.ini file is set to not display them
error_reporting(E_ALL);
ini_set('display_errors', '1');
// Initialize some vars
$errorMsg = '';
$email = '';
$pass = '';
$remember = '';
if (isset($_POST['email1'])) {

    $email = $_POST['email1'];
    $pass = $_POST['pass1'];
    if (isset($_POST['remember'])) {
        $remember = $_POST['remember'];
    }
    $email = stripslashes($email);
    $pass = stripslashes($pass);
    $email = strip_tags($email);
    $pass = strip_tags($pass);

    // error handling conditional checks go here
    if ((!$email) || (!$pass)) { 

        $errorMsg = 'Please fill in both fields';

    } else { // Error handling is complete so process the info if no errors
        include 'connect_to_mysql.php'; // Connect to the database
        $email = mysql_real_escape_string($email); // After we connect, we secure the string before adding to query
        //$pass = mysql_real_escape_string($pass); // After we connect, we secure the string before adding to query
        $pass = md5($pass); // Add MD5 Hash to the password variable they supplied after filtering it
        // Make the SQL query
        $sql = mysql_query("SELECT * FROM members1 WHERE email1='$email' AND pass1='$pass' AND email_activated='1'"); 
        $login_check = mysql_num_rows($sql);
        // If login check number is greater than 0 (meaning they do exist and are activated)
        if($login_check > 0){ 
                while($row = mysql_fetch_array($sql)){

                    // Pleae note: Adam removed all of the session_register() functions cuz they were deprecated and
                    // he made the scripts to where they operate universally the same on all modern PHP versions(PHP 4.0  thru 5.3+)
                    // Create session var for their raw id
                    $id = $row["id"];   
                    $_SESSION['id'] = $id;
                    // Create the idx session var
                    $_SESSION['idx'] = base64_encode("g4p3h9xfn8sq03hs2234$id");
                    // Create session var for their username
                    $username = $row["username"];
                    $_SESSION['username'] = $username;
                    // Create session var for their email
                    $useremail = $row["email1"];
                    $_SESSION['useremail'] = $useremail;
                    // Create session var for their password
                    $userpass = $row["pass1"];
                    $_SESSION['userpass'] = $userpass;

                    mysql_query("UPDATE members1 SET last _log_date=now() WHERE id='$id' LIMIT 1");

                } // close while

                // Remember Me Section
                if($remember == "yes"){
                    $encryptedID = base64_encode("g4enm2c0c4y3dn3727553$id");
                    setcookie("idCookie", $encryptedID, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days
                    setcookie("passCookie", $pass, time()+60*60*24*100, "/");  // Cookie set to expire in about 30 days
                } 
                // All good they are logged in, send them to homepage then exit script
                header("location: index.php?test=$id"); 
                exit();

        } else { // Run this code if login_check is equal to 0 meaning they do not exist
            $errorMsg = "Incorrect login data, please try again";
        }

    } // Close else after error checks

} //Close if (isset ($_POST['uname'])){

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="style/main.css" rel="stylesheet" type="text/css" />
<script src="/jquery-1.9.0.js" type="text/javascript"></script>
<title>Log In</title>
<style type="text/css">
<!--
body {
    margin-top: 0px;
}
-->
</style></head>
<body>
<div align="center"><a href="index.php"><img src="images/logo1.png" alt="Locally Sold  Home Page" width="197" height="104" border="0" /></a></div>
<table width="400" align="center" cellpadding="6" style="background-color:#FFF; border:#666 1px solid;">
  <form action="login.php" method="post" enctype="multipart/form-data" name="signinform" id="signinform">
    <tr>
      <td width="23%"><font size="+2">Log In</font></td>
      <td width="77%"><font color="#FF0000"><?php print "$errorMsg"; ?></font></td>
    </tr>
    <tr>
      <td><strong>Email:</strong></td>
      <td><input name="email1" type="text" id="email1" style="width:60%;" /></td>
    </tr>
    <tr>
      <td><strong>Password:</strong></td>
      <td><input name="pass1" type="password" id="pass1" maxlength="24" style="width:60%;"/></td>
    </tr>
  <tr>
      <td align="right">&nbsp;</td>
      <td><input name="remember" type="checkbox" id="remember" value="yes" checked="checked" />
        Remember Me</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><input name="myButton" type="submit" id="myButton" value="Sign In" /></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td colspan="2">Forgot your password? <a href="forgot_pass.php">Click Here</a>
  <br /></td>
    </tr>
    <tr>
      <td colspan="2">Need an Account? <a href="register.php">Click Here</a><br />            <br /></td>
    </tr>
  </form>
</table>
<br />
<br />
<br />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:31:15.007

`session_start`在要使用会话功能的所有页面上使用。

之后像这样设置你的会话......

```
$_SESSION['id'] = $row['id']; 
$_SESSION['username'] = $row['username']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:28:44.467

您没有在任何地方设置会话变量。

要设置会话值，请执行以下操作：

```
if ( /* username and password are correct */ ) {
    $_SESSION['id'] = $row['id']; //taken from db
    $_SESSION['username'] = $row['username'];
    // etc
} 
```

# objective-c - 在 Xcode 中发送不兼容的指针类型

> ID：14394221
> 
> 赞同：0
> 
> 时间：2013-01-18T07:23:58.240
> 
> 标签：objective-c, arrays, object, nsmutablearray

我创建了两个类，一个用于 StockHoldings，另一个用于 Portfolio（一个数组）。我在 main 中创建了值，并试图将创建的股票值添加到投资组合中，但是当我这样做时，我得到“发送不兼容的指针类型......”

这就是我的主要内容：

```
Portfolio *thisPortfolio = [[Portfolio alloc] init];

[thisPortfolio addPortfolioObject:[stockOne valueInDollars]]; 
```

即使我只是尝试用一个整数代替 [stockOne valueInDollars]，这是一种基于库存中的实例变量计算股票价值的方法，然后我会得到“'int'到'Portfolio'的隐式转换...... "

这是我在 Portfolio.h 文件中的内容：

```
@interface Portfolio : NSObject
{
    NSMutableArray *myPortfolio;
}

- (void)addPortfolioObject:(Portfolio *)a; 
```

这就是我在 Portolfio.m 文件中的内容：

```
- (void)addPortfolioObject:(Portfolio *)a
{
    // Is assets nil?
    if (!myPortfolio) {

        // Create the array
        myPortfolio = [[NSMutableArray alloc] init];

    }
    [myPortfolio addObject:a];
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:00:06.790

在 的接口中`Portfolio`，确实您声明了`addPortfolioObject`这样的签名，即`Portfolio`预期的对象，而不是整数。`(void)addPortfolioObject:(int)a`签名必须在接口和实现中都更改。后者必须包含`a`在`NSNumber`using中`numberWithInt`，因为`NSArray`只能存储`NSObjects`while 而`int`不是基本类型。

# java - 复制和扩充对象的最佳实践（设计模式）

> ID：14394226
> 
> 赞同：0
> 
> 时间：2013-01-18T07:25:12.857
> 
> 标签：java, design-patterns

我正在使用提供对特殊服务器环境的访问权限的 API。此 API 具有广泛的数据对象，您可以从中检索。例如 APICar

现在我想拥有“我自己的”数据对象（MyCar），其中包含该数据对象的所有信息，但我想省略一些属性，增加它，或者只是重命名其中的一些。

这是因为我需要 JSON 驱动的客户端应用程序中的这些数据对象。因此，当有人更改上述 API 并更改属性名称时，我的客户端应用程序将立即中断。

我的问题是：

**是否有最佳实践或设计模式来复制这样的对象？**就像当你有一个对象并想将它转移到另一个类的另一个对象时一样？我在 Eclipse 中看到过类似的东西，叫做“AdapterFactory”，想知道它是否被广泛使用。

更清楚地说：我**有** `ObjectA`并且我需要`ObjectB`。`ObjectA`来自 API，其类可以经常更改。我需要一个方法或一个对象或一个能够将一个`ObjectA`转换为`ObjectB`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:54:24.040

我认为您正在寻找[设计模式适配器](http://en.wikipedia.org/wiki/Adapter_pattern)

它实际上只是将 A 类的一个实例包装在 B 类的一个实例中，以提供一种使用它/不同类型的不同方式。

“我认为”是因为您提到了复制问题，所以它可能不像持久性/传输那样是类/类型的事情。

根据您的情况，您可能还对动态代理感兴趣，但这是 Java 功能。

# android - 单击列表项时强制关闭。（安卓）

> ID：14394227
> 
> 赞同：0
> 
> 时间：2013-01-18T07:25:15.007
> 
> 标签：android

> **可能重复：**
> [带有 TabWidgets 的 Android 2.1 NullPointerException](https://stackoverflow.com/questions/5023289/android-2-1-nullpointerexception-with-tabwidgets)

我开发了一个 Android 应用程序，它在列表视图中显示目标列表，然后单击其中一个列表项后，它会打开一个选项卡小部件，其中包含 3 个选项卡（详细信息、地图、照片）应用程序是为 api 7 开发的。并且正在工作在所有具有 api 8 及更高版本的设备上都可以。但是当我在具有 android 2.1.1 的 Micromax a60 上打开相同的应用程序时，它正在强制关闭。

下面是我在强制关闭后得到的日志猫。我试图理解它但失败了。现在，如果这个问题没有解决，我将不得不将 micromax a60 升级到 2.2。

谁能帮我解决这个问题？

```
 01-18 12:42:36.377: E/AndroidRuntime(2505): Uncaught handler: thread main exiting due to uncaught exception
    01-18 12:42:36.387: E/AndroidRuntime(2505): java.lang.NullPointerException
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.widget.TabWidget.dispatchDraw(TabWidget.java:206)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.View.draw(View.java:6538)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.View.draw(View.java:6538)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1837)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewRoot.draw(ViewRoot.java:1349)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1114)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.os.Handler.dispatchMessage(Handler.java:99)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.os.Looper.loop(Looper.java:123)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at android.app.ActivityThread.main(ActivityThread.java:4363)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at java.lang.reflect.Method.invokeNative(Native Method)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at java.lang.reflect.Method.invoke(Method.java:521)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    01-18 12:42:36.387: E/AndroidRuntime(2505):     at dalvik.system.NativeStart.main(Native Method)
    01-18 12:42:36.407: E/dalvikvm(2505): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

另一件事是此列表视图位于选项卡小部件的一个选项卡中。它还打开了一个标签小部件。这会是个问题吗？也许..

单击列表项时调用此方法：

```
 private void showTargetReport(String result) {
    Intent intent = new Intent(ActivityUnreadReportListForEmployee.this,
            ActivityTargetDetails.class);
    intent.putExtra("TARGET_DETAILS", result);
    if (other_target)
        intent.putExtra("OTHER_TARGET", true);
    else
        intent.putExtra("OTHER_TARGET", false);
    startActivity(intent);
} 
```

而这个方法是在ActivityTargetDetails.class打开的时候调用的

```
 private void showTabs() {
        try {
    setContentView(R.layout.activity_main);

    myContext = this;
    Resources res = getResources(); // Resource object to get Drawables

    tabHost = getTabHost(); // The activity TabHost
    TabHost.TabSpec spec; // Resusable TabSpec for each tab
    Intent intent; // Reusable Intent for each tab

    /**********************************************************************/

    if (other_target) {
        // Create an Intent to launch an Activity for the tab (to be
        // reused)
        // Initialize a TabSpec for each tab and add it to the TabHost
        intent = new Intent().setClass(this,
                ActivityTargetInfoOtherTarget.class);
        intent.putExtra("EMPLOYEE_DETAILS", employeeDetails);
        intent.putExtra("TARGET_DETAILS", targetDetails);
        spec = tabHost
                .newTabSpec("Target Details")
                .setIndicator("Details",
                        res.getDrawable(R.drawable.details))
                .setContent(intent);
        tabHost.addTab(spec);
    } else {
        // Create an Intent to launch an Activity for the tab (to be
        // reused)
        // Initialize a TabSpec for each tab and add it to the TabHost
        intent = new Intent().setClass(this, ActivityTargetInfo.class);
        intent.putExtra("EMPLOYEE_DETAILS", employeeDetails);
        intent.putExtra("TARGET_DETAILS", targetDetails);
        intent.putExtra("LOCATION_DETAILS", locationDetails);
        spec = tabHost
                .newTabSpec("Target Details")
                .setIndicator("Details",
                        res.getDrawable(R.drawable.details))
                .setContent(intent);
        tabHost.addTab(spec);
    }

    /*********************************************************************/

    // Do the same for the Map Tab
    Intent mapIntent = new Intent(this, ActivityMapView.class);

    double targetLatitude = 0.0;
    double targetLongitude = 0.0;
    double distanceDifference = 0.0;
    double timeSpent = 0.0;
    double feedbackLatitude = 0.0;
    double feedbackLongitude = 0.0;

    try {
        if (other_target) {
            targetLatitude = Double
                    .parseDouble(targetObject
                            .getString(API_Handler.OTHER_TARGET_TABLE_LATITUDE));
        } else {
            targetLatitude = Double
                    .parseDouble(locationObject
                            .getString(API_Handler.LOCATION_TABLE_LOCATION_LAT));
        }
    } catch (Exception ex) {
        targetLatitude = 0.0;
    }

    try {
        if (other_target) {
            targetLongitude = Double
                    .parseDouble(targetObject
                            .getString(API_Handler.OTHER_TARGET_TABLE_LONGITUDE));
        } else {
            targetLongitude = Double
                    .parseDouble(locationObject
                            .getString(API_Handler.LOCATION_TABLE_LOCATION_LONG));
        }

    } catch (Exception ex) {
        targetLongitude = 0.0;
    }

    try {
        distanceDifference = Double
                .parseDouble(targetObject
                        .getString(API_Handler.TARGET_TABLE_TARGET_DISTANCE_DIFFERENCE));
    } catch (Exception ex) {
        distanceDifference = 0.0;
    }

    try {
        timeSpent = Double.parseDouble(targetObject
                .getString(API_Handler.TARGET_TABLE_TARGET_TIME_SPENT));
    } catch (Exception ex) {
        timeSpent = 0.0;
    }

    try {
        if (other_target) {
            feedbackLatitude = targetLatitude;
        } else {
            feedbackLatitude = Double.parseDouble(targetObject
                    .getString(API_Handler.TARGET_TABLE_TARGET_LAT));
        }
    } catch (Exception ex) {
        feedbackLatitude = 0.0;
    }

    try {
        if (other_target) {
            feedbackLongitude = targetLongitude;
        } else {
            feedbackLongitude = Double.parseDouble(targetObject
                    .getString(API_Handler.TARGET_TABLE_TARGET_LONG));
        }

    } catch (Exception ex) {
        feedbackLongitude = 0.0;
    }

    mapIntent.putExtra(API_Handler.PARAMETER_TARGET_LATITUDE,
            targetLatitude);
    mapIntent.putExtra(API_Handler.PARAMETER_TARGET_LONGITUDE,
            targetLongitude);
    mapIntent.putExtra(API_Handler.PARAMETER_DISTANCE_DIFFERENCE,
            distanceDifference);
    mapIntent.putExtra(API_Handler.PARAMETER_TIME_SPENT, timeSpent);
    mapIntent.putExtra(API_Handler.PARAMETER_FEEDBACK_LATITUDE,
            feedbackLatitude);
    mapIntent.putExtra(API_Handler.PARAMETER_FEEDBACK_LONGITUDE,
            feedbackLongitude);

    spec = tabHost.newTabSpec("Map")
            .setIndicator("Map", res.getDrawable(R.drawable.map))
            .setContent(mapIntent);
    tabHost.addTab(spec);

    /**************************************************************************/

    // Do the same for the photo tab
    intent = new Intent().setClass(this, ActivityPhoto.class);
    intent.putExtra(API_Handler.PARAMETER_TARGET_IMAGE_PATH, imagePath);
    spec = tabHost.newTabSpec("Photo")
            .setIndicator("Photo", res.getDrawable(R.drawable.photo))
            .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);

} catch (Exception ex) {
    Toast.makeText(this, ex.getMessage(), Toast.LENGTH_LONG).show();
} 
```

}

# .net - 存储已删除数据的已删除表的范围是什么？

> ID：14394228
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:25:17.567
> 
> 标签：.net, sql, sql-server, triggers

我正在使用触发器来记录已删除数据。因此，每当删除数据时，它将被插入到另一个表中。

删除数据后，只有触发器被执行对吗？那么，如何检索已删除的数据以插入其他表。我的意思是数据是否存在于某个地方，即使它被删除了？我假设它将通过分析代码存储在一个名为“已删除”的表中。

我需要知道这个已删除的表存储在哪里？它的范围是什么？它将保存数据多长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:52:18.403

您可以找到这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms191300%28v=sql.100%29.aspx)来检查**插入**和**删除**的表。

# html - 如何使文本在较小的 div 以下开始？

> ID：14394233
> 
> 赞同：4
> 
> 时间：2013-01-18T07:25:29.670
> 
> 标签：html, css

![在此处输入图像描述](../Images/a491470b4be58e3389f20234567b3015.png)

嗨，我想制作一个如图所示的 html 页面。两个相邻的 div。右侧的 Div 具有更高的高度。文本从 div1 下方开始，但也必须在 div2 下方。我应该为此写什么html？

我使用 float:left; 将图像并排显示 但是包含文本的 div 开始于 div2 下方，在 div1 下方留下一个空白区域到文本的开头。Div2 高度不固定。Div1 具有固定的高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T07:32:28.357

这是[小提琴](http://jsfiddle.net/eJcQe/)

```
<div id='d1'>
  This is left one...
</div>

<div id='d2'>
  This is right one...
</div>

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque ultricies pulvinar venenatis.
Maecenas a erat sed augue viverra volutpat sit amet sed nulla. Nunc velit metus, vulputate sit amet interdum ut, egestas quis velit. Nunc porta nisl nisi. Duis vitae elit diam. Proin lacinia sodales nulla non aliquet. Duis egestas nunc in nisl pulvinar scelerisque.
Phasellus dignissim dolor sed massa fermentum sagittis. Phasellus nec neque sed nibh ultricies elementum facilisis in turpis. Pellentesque id arcu orci, non feugiat massa. Nunc dapibus volutpat arcu vitae luctus.
Phasellus sollicitudin enim tellus. Sed et lectus vitae urna sollicitudin sagittis. Pellentesque volutpat massa id erat vestibulum sed sodales nulla ullamcorper. Nullam convallis commodo massa id consectetur. 
```

和 CSS

```
#d2 {
  width: 40%;
  height: 125px;
  border: solid #000000 2px;
  float: right;
} 
```

* * *

# 编辑

纠正Sowmya指出的问题；您需要在 CSS 中添加以下内容：

```
div {
  margin: 5px;
}

#d1 {
  border:1px solid black;
  width:100px;
  height:100px;
  float: left;
} 
```

[更新](http://jsfiddle.net/eJcQe/4/)小提琴

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:30:16.417

HTML

```
<div id="id_2"></div>
<div id="id_1"></div>
Text text text 
```

CSS

```
#id_2 {
    float: right;
    height: xxx;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T07:32:06.757

用于`float:left`第一个 div 和`float:right`第二个 div

**HTML**

```
<div class="wrap">
<div class="d1"></div>
  <div class="d2"></div>
Lorem ipsum elit Lorem ipsum elit Lorem ipsum elit Lorem it Lorem ipsum elit Lorem it Lorem ipsum elit Lorem ipsum elit Lorem ipsum elit Lorem ipsum elit  
</div> 
```

**CSS**

```
.wrap{ background:green;float:left; width:210px}
.d1{display:inline-block; width:100px; height:100px; border:solid red 1px; vertical-align:top; float:left}
.d2{display:inline-block; width:100px; height:180px; border:solid red 1px; vertical-align:top; float:right} 
```

**[现场演示](http://jsfiddle.net/XspgE/2/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T07:48:14.287

[工作演示](http://jsfiddle.net/zaheerahmed/H28NG/1/)

你需要使用：

HTML：

```
<div class="content left">div1</div>
<div class="content right">div2</div> 
```

CSS：

```
.content{
border-style:solid;
border-width:5px;
  height:50px;  
  width:45%;
}
.right{
  float:right;
  height:200px;
}
.left{
float:left;  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T07:52:52.060

试试这个：
HTML 代码：

```
<div id="box1"></div>
<div id="p"> some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text some text </div>
<div id="box2"></div> 
```

CSS 代码：

```
#box1
{
  margin:10px 10px 10px 10px;
  float:left;
  width:100px;
  height:100px;
  background-color:#333;
}
#box2
{
  margin:10px 10px 10px 10px;
   float:left;
  width:150px;
  height:200px;
  background-color:#888;
}
#p
{
  margin-left:0;
  width:100px;
  height:auto;
  float:left;
  word-wrap:break-word;
} 
```

看看 我做过的这个[DEMO](http://jsfiddle.net/talebihamid/YBapx/12/)

```
word-wrap 
```

属性并编辑您自己的代码！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-18T07:28:54.910

在没有看到代码的情况下，我会说您需要在 div2 上使用 float 属性：http: [//www.w3schools.com/cssref/pr_class_float.asp](http://www.w3schools.com/cssref/pr_class_float.asp)

# javascript - 如何在发送表单之前从 SELECT 中省略/抑制一个元素

> ID：14394235
> 
> 赞同：0
> 
> 时间：2013-01-18T07:25:36.147
> 
> 标签：javascript, select, element

在将 SELECT 对象/数组传输到 PHP 处理之前，我想抑制/省略一个可能为空的元素。由于我的 SELECT 框提供了类似 NULL 选项的内容：

```
 <select name="a">
   <option value=""></option>
   <option value="1">1</option>
   <option value="2">2</option> 
```

如果它已被选中，我想抑制 NULL 值，如下所示：

```
 <a href="#" onclick="document.formIndex.a.OMIT-ELEMENT(''); document.formIndex.submit(); return false">search</a> 
```

没有发现任何真正有用的东西。感谢任何提示如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:04:16.723

```
function resetNullValue (element)
{
   if (element.value == null )
   {
      element.value = "";
   }
} 
```

但是为什么要在 HTML 端压制它呢？您应该始终在服务器端处理它

# php - 通过 AJAX 将值存储在数据库中不起作用

> ID：14394240
> 
> 赞同：0
> 
> 时间：2013-01-18T07:26:05.553
> 
> 标签：php, javascript, ajax

我有这个使用 ajax 的函数，但是这个函数不起作用。我尝试了很多，但我无法弄清楚问题出在哪里。当用户使用复选框选择将重复条目插入数据库时​​，我正在尝试创建警报。

```
<script>    
    function func(e,eid,emprid) {
       if(document.getElementById(e).checked){
          var dataString = 'eid=' + eid + '&emprid='+emprid;
          $.ajax({
             type:"POST",
             url: "mylistcheck.php",
             data: dataString,
             success: function(result){
                if(result!='0') {
                   modal.open({content: "<span style=\"color:red\" ><h2>You have already selected  candidate </h2></span>"});
                   document.getElementById(e).checked=false;
                }
             }
          });
       } 
    }
</script> 
```

`mylistcheck.php`看起来像这样：

```
<?php require_once("includes/session.php"); ?>
<?php require_once("includes/connection.php"); ?>
<?php require_once("includes/functions.php"); ?>
<?php
    $eid=$_POST['eid'];
    $emprid=$_POST['emprid'];

    $sqlchecklist="SELECT * FROM selected_candidate WHERE eid='{$eid}' AND rid='{$emprid}' ";
    $checklistres=mysql_query($sqlchecklist);
    $list_check=mysql_num_rows($checklistres);
    echo "numrows listcheck".$list_check;
    if($list_check>0) {
        echo "1";
    } else {
        echo "0";
    }
?> 
```

复选框代码如下：

```
echo "<td><input id=\"select_candi{$i}\" onclick=\"javascript:func(this.id,{$data_set['eid']},{$emprid})\" type=\"checkbox\" name=\"check_candi[]\" value=\"{$data_set['eid']},{$emprid}\"/></td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:37:16.443

在您的代码中，您有

```
echo "eid".$eid;
$emprid=$_POST['emprid'];
echo "rid".$emprid; 
```

由于您已经在回显结果，因此您的 ajax 函数永远不会只是“0”。它总是像`eid{value}rid{value}0`或`eid{value}rid{value}1`

出于安全原因，也切换到[mysqli](http://php.net/manual/en/book.mysqli.php)或[pdo 。](http://php.net/manual/en/book.pdo.php)还要检查 和 的值`$eid`以`$rid`符合您的期望。您的代码易受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

在您的脚本代码中，您有`onclick="javascript:func(...)"`. `onclick`已经是一个javascript函数，所以你不需要`javascript:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:41:21.357

您正在发送**POST**请求，但数据以**GET**形式发送 - 即字符串。您需要将其作为对象发送：

```
$.ajax({
    type:"POST",
    url: "mylistcheck.php",
    data: {"eid":eid,
           "emprid":emprid}, // send an object
    success: function(result){
if(result!='0')
{
modal.open({content: "<span style=\"color:red\" ><h2>You have already selected  candidate </h2></span>"});
document.getElementById(e).checked=false;
}
}
}); 
```

# eclipse - 如何为在同一台机器上运行的两个不同服务器创建两个不同的虚拟主机

> ID：14394243
> 
> 赞同：1
> 
> 时间：2013-01-18T07:26:18.380
> 
> 标签：eclipse, jetty, apache, vhosts

我在我的机器上运行两台服务器

> 1.  Apache 2.2
>     在端口 80 上运行
>     可在 127.0.0.1 访问
>     
>     
> 2.  Eclipse IDE 在端口 88 上运行的Jetty
>     可在 127.0.0.1:8888 访问

我可以访问我在 Apache 上运行的应用程序，例如

`http://127.0.0.1/myapp`

我可以通过以下方式为上述应用创建一个虚拟主机

**1.**添加以下行`C:\Windows\System32\drivers\etc\hosts`

`127.0.0.1 www.myapp.com`

**2.**通过在 httpd-vhosts.conf 中添加以下代码

```
<VirtualHost *:80>
    ServerAdmin test@test.com
    DocumentRoot /wwwroot/myapp/
    ServerName myapp.com
    ServerAlias www.myapp.com
    ErrorLog "logs/myapp.com-error.log"
    CustomLog logs/myapp.com-access.log common
</VirtualHost> 
```

我可以为 Apache 服务器创建任意数量的主机，但我不能像这样为在端口 88 上运行的其他服务器创建虚拟主机

`127.0.0.1:8888 www.myjavaapp.com`

请问有什么建议吗？

# c# - 像adobe photoshop cs6这样的皮肤究竟是如何制作的？

> ID：14394244
> 
> 赞同：1
> 
> 时间：2013-01-18T07:26:22.603
> 
> 标签：c#, vb.net, themes, gdi+, photoshop

我真的很想弄清楚这一点。像adobe photoshop cs6这样的皮肤究竟是如何制作的？

它只是一个图像吗？或者它是以图形方式编码的。

标题栏的工作方式与普通标题栏完全相同。它调整大小，捕捉最小化和最大化。那么它可能是像航空这样的实际主题吗？

我一直想知道这是如何工作的。当你看到那些很酷的 STEAM 和 Pandora 皮肤时，我想知道它是否像在 Photoshop 中创建图像然后将其用作表格一样简单。

在 vb.net 或 c# 中如何做到这一点？

**编辑：**让我感到困惑的另一部分是，当它处于正常状态时，角落是圆形的。然后，当最大化时，它们不是。

如果您不熟悉，下面是 Photoshop cs6 的图像。

![在此处输入图像描述](../Images/e0d2f55f03074574f29d7d7a21ec89fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:55:22.467

像这样的皮肤是由几百人在一年或更长时间内制作的（包括程序员、图形艺术家、经理、UI 设计师等），自定义编码 Win32 API、ClientArea 和 NonClientArea 的每一个细微差别，Owner-Drawn 绘图， GDI+ 和 DirectX（在 WPF 上）、自定义显示引擎等等等。

现在，如果你有一个自定义显示引擎，你可以使用 SVG 来清晰地放大或缩小，或者如果你没有自定义显示引擎，使用重复 1px 宽度的图像来处理窗口调整大小时的图像大小调整。

请参阅[Qt](http://qt.digia.com)，它被 Adob​​e 工程师、maya 工程师、Google 地球工程师等使用，它可以帮助您为窗口上的每个小部件设置皮肤。

请参阅[Delphi](http://www.embarcadero.com/products/delphi)及其表亲 C++Builder，它们在常规 Win32 之上具有不同的显示引擎，允许使用拖放和配置为您的应用程序设置皮肤

请参阅[TCL-Tk](http://tcl.tk)，它允许您使用简单的配置和主题来为您的窗口设置皮肤。

此外，如果您使用的是 C#，请参阅 WPF 和 Expression Blend，它不仅可以创建和设置应用程序外观，还可以向其中添加动画和其他精美的图形。

如果您喜欢老派的方法，请参阅[http://www.codeproject.com/Articles/254/The-RGN-Generator](http://www.codeproject.com/Articles/254/The-RGN-Generator)并使用区域对自定义对话框、窗口和按钮等进行编码。

祝你好运，愿图形+编程力量与你同在。

# iphone - 如何与obd ii elm327接口？

> ID：14394248
> 
> 赞同：2
> 
> 时间：2013-01-18T07:26:39.967
> 
> 标签：iphone, ipad, obd-ii

我是否必须购买[它](http://standards.sae.org/j1939_201206/)才能获得所有 PID 和完整的指令集，以便通过 ELM327 与汽车的 obd ii 接口进行通信？我尝试为 ELM327 连接器寻找某种 api，但除了实际芯片的原理图之外找不到任何文档。

上面链接的标准似乎为所有当前的 obd2 协议提供了指令集，有人可以确认吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:49:55.943

我一直在尝试弄乱它，但我需要一个设备来测试，而我现在没有。
这是一个 github 存储库，上面有一个 ELM327 库 [https://github.com/FuzzyLuke/OBD2Kit](https://github.com/FuzzyLuke/OBD2Kit)

这是 OBD2 代码：[http ://en.wikipedia.org/wiki/Table_of_OBD-II_Codes](http://en.wikipedia.org/wiki/Table_of_OBD-II_Codes)

让我知道你是否有运气让它工作。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:42:23.257

如果您在文件名上谷歌搜索，您很有可能会找到该文件。

OBD-II 标准的维基百科版本非常完整。

以下是 AT（ELM 特定命令，用于 ELM327 芯片）： [http ://elmelectronics.com/ELM327/AT_Commands.pdf](http://elmelectronics.com/ELM327/AT_Commands.pdf)

# database - 数据库建模

> ID：14394249
> 
> 赞同：0
> 
> 时间：2013-01-18T07:26:40.177
> 
> 标签：database, database-design

我的数据模型中有四个表，即

*   学生，
*   选修课，
*   选修价值，和
*   学生选修课。

Student 表包含以学生 ID 作为主键的学生列表。

Elective 表包含大学提供的选修课列表，其中选修课 ID 作为主键。

选修课值表包含每个选修课的可能值列表。该表的主键是可选 id 和值 id 的组合（复合主键），因此对于下一个可选的值从 1 开始。

学生选修表包含学生id、选修id和值id作为主键。但我被要求进行以下更改，

具有选修值表的 id 而不是复合主键，并使用学生选修表中的主键（id）。因此，选修课表和学生选修课之间的联系中断了。我可以知道前者或后者的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:56:39.623

第二种方式通常被认为是“更好”的方式，因为它是规范化的，并且允许可选值在未来以更少的中断发生变化，并允许数据库引擎动态优化查询。如果该值是一个字符串，您实际上可能会在数据库中节省一些空间。这是我认为您描述的模型：

```
Student
    StudentID

Elective
    ElectiveID

ElectiveValue
    ElectiveValueID
    FK_ElectiveID
    Value

StudentElective
    StudentElectiveValueID
    FK_StudentID
    FK_ElectiveValueID 
```

# ios - iOS 应用程序在仅调试时在没有设备的情况下崩溃 - 不在模拟器中或在正常设备应用程序启动期间

> ID：14394250
> 
> 赞同：0
> 
> 时间：2013-01-18T07:26:59.637
> 
> 标签：ios, xcode, debugging, exc-bad-access

我正在尝试确定导致我在测试我的应用程序时看到的崩溃的原因。现在，每次我尝试在连接了 iphone 的情况下从 xcode 运行应用程序时，它都会抛出 EXEC_BAD_ACCESS (code=1, address=0x1)。

该应用程序崩溃，但我在崩溃日志中没有看到新条目。我尝试在启用 Zombies 的情况下运行，但我遇到了同样的崩溃。

奇怪的是，如果我使用模拟器进行调试，通过点击其图标在设备上运行应用程序，甚至在 Instruments 中，我都不会收到此错误。任何建议和/或解释将不胜感激。

这是我在 Xcode 中看到的：

```
libobjc.A.dylib`objc_msgSend:
0x36acb5c0:  teq.w  r0, #0
0x36acb5c4:  beq    0x36acb606                ; objc_msgSend + 70
0x36acb5c6:  push.w {r3, r4}

**0x36acb5ca:  ldr    r4, [r0]**  < ------ This is where the app gets caught up EXEC_BAD_ACCESS (code=1, address=0x1)

0x36acb5cc:  lsr.w  r9, r1, #2
0x36acb5d0:  ldr    r3, [r4, #8]
0x36acb5d2:  add.w  r3, r3, #8
0x36acb5d6:  ldr    r12, [r3, #-8]
0x36acb5da:  and.w  r9, r9, r12
0x36acb5de:  ldr.w  r4, [r3, r9, lsl #2]
0x36acb5e2:  teq.w  r4, #0
0x36acb5e6:  add.w  r9, r9, #1
0x36acb5ea:  beq    0x36acb600                ; objc_msgSend + 64
0x36acb5ec:  ldr.w  r12, [r4]
0x36acb5f0:  teq.w  r1, r12
0x36acb5f4:  bne    0x36acb5d6                ; objc_msgSend + 22
0x36acb5f6:  ldr.w  r12, [r4, #8]
0x36acb5fa:  pop.w  {r3, r4}
0x36acb5fe:  bx     r12
0x36acb600:  pop.w  {r3, r4}
0x36acb604:  b      0x36acb620                ; objc_msgSend_uncached
0x36acb606:  mov.w  r1, #0
0x36acb60a:  bx     lr
0x36acb60c:  nop    
0x36acb60e:  nop    
0x36acb610:  nop    
0x36acb612:  nop    
0x36acb614:  nop    
0x36acb616:  nop    
0x36acb618:  nop    
0x36acb61a:  nop    
0x36acb61c:  nop    
0x36acb61e:  nop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:31:35.770

尝试在 cmd-alt-b 菜单中启用所有内存调试选项：zombies、scribble 等。并设置异常断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:08:53.887

如有疑问，请重新启动您的设备。现在工作正常。无法隔离导致错误的原因。

# wordpress - wp_nav_menu 查找下一个、上一个链接

> ID：14394251
> 
> 赞同：3
> 
> 时间：2013-01-18T07:27:05.097
> 
> 标签：wordpress, pagination

我需要使用 wp_nav_menu 设置一些分页，所以我需要访问菜单中的上一个、当前和下一个项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T00:03:03.173

好的，这就是我想出的 - 它有效。

```
<?php
$menu_name = 'main-menu';
$locations = get_nav_menu_locations();
$menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
$menuitems = wp_get_nav_menu_items( $menu->term_id, array( 'order' => 'DESC' ) );

$i=-1;
foreach ( $menuitems as $item ):

    $i++;

  $id = get_post_meta( $item->ID, '_menu_item_object_id', true );
  $page = get_page( $id );
  $link = get_page_link( $id );

    $linkarray.=$id.",";
    $urlarray.=$link.",";

  if ($id==$post->ID){
    $previd=$i-1;
    $nextid=$i+1;
  }
endforeach;

$linkarray=explode(',',$linkarray);
$urlarray=explode(',',$urlarray);

$nextid=$urlarray[$nextid];
if (empty($nextid)){
    $nextid=$urlarray[0];
}
$previd=$urlarray[$previd];
if (empty($previd)){
    $previd=$urlarray[$i];
}
?>

<a href="<?php echo $nextid; ?>">Next Item</a>
<a href="<?php echo $previd; ?>">Previous Item</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-01T15:32:11.683

我调整了之前的答案，将任何帖子项目包含在菜单中（不仅仅是页面）。此代码返回上一个和下一个帖子 ID。

```
<?php
$current_post_id = $post->ID;
$menu_name = 'guide-menu-frontpage';
$locations = get_nav_menu_locations();
$menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
$menuitems = wp_get_nav_menu_items( $menu->term_id, array( 'order' => 'DESC' ) );
$i = 0;

foreach ( $menuitems as $item ){
    $menuitems_id_array[] = $item->object_id;
    if ($item->object_id == $current_post_id){
        $prevMenuPosition = $i - 1;
        $nextMenuPosition = $i + 1;
    }
    $i++;
}

if($prevMenuPosition < 0){
    $prev_id = false;
} else {
    $prev_id = $menuitems_id_array[$prevMenuPosition];
}

if($nextMenuPosition > sizeof($menuitems_id_array) - 1){
    $next_id = false;
} else {
    $next_id = $menuitems_id_array[$nextMenuPosition];
}
?> 
```

# itextsharp - iTextSharp：有没有一种方法可以让您更改页面 PDF 文档的内容？

> ID：14394252
> 
> 赞同：0
> 
> 时间：2013-01-18T07:27:10.543
> 
> 标签：itextsharp

我需要清除（删除文本）文档的一个矩形区域。坐标是已知的。可能吗？

# c - C - 使用 fgetc 读取文件末尾

> ID：14394254
> 
> 赞同：4
> 
> 时间：2013-01-18T07:27:20.643
> 
> 标签：c, file, fgetc

我有最奇怪的事情发生，我不太确定为什么会发生。基本上我需要做的是使用 fgetc 逐字节获取简单 ASCII 文件的内容。奇怪的是它起作用了，但后来我又添加了几个字符，突然间它添加了一个不存在的换行符，并读取到文件末尾或其他内容。从字面上看，我所做的只是

```
do {
    temp = (char*) checked_realloc (temp, n+1);
    e = fgetc(get_next_byte_argument);
    temp[n] = e;
    if (e != EOF)
      n++;
 }
while (e != EOF); 
```

然后检查我刚刚打印了每个字符

```
temp_size = strlen(temp)-1;
for(debug_k = 0; debug_k < temp_size; debug_k++){
  printf("%c", temp[debug_k]);
} 
```

它会正确输出所有内容，只是它添加了一个不在文件中的额外换行符。在此之前，我有

```
temp_size = strlen(temp); 
```

但随后它以一些未知字节（打印的乱码）结束。我尝试了 strlen(temp)-2 以防万一，它适用于那个特定的文件，但后来我在末尾添加了一个额外的“a”，它又坏了。

老实说，我很难过。我不知道它为什么这样做。

编辑：checked_realloc 只是 realloc 但快速检查以确保我没有内存不足。我意识到这不是最有效的方法，但我更担心为什么我似乎在神奇地读取额外的字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:42:49.663

编写此类操作的一种更安全的方法是：

1.  如果您在重新分配之前分配内存，则在使用零之前 memset 内存块。并且每次重新分配时，将其初始化为零。
2.  如果您使用内存来访问字符串或在该内存上使用字符串函数，请始终确保您使用`NULL`字节终止该内存。

```
do{
    temp = (char*) checked_realloc (temp, n+1);//I guess you are starting n with 0? 
    temp[n]=0;
    e = fgetc(get_next_byte_argument);
    temp[n] = e;
    if (e != EOF)
        n++;
} while (e != EOF);
temp[n]=0;
n=0; 
```

我想上面的代码更改应该可以解决您的问题。你不再需要 strlen -1 了。:)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:31:27.767

听起来你忘了空终止你的字符串。`temp[n] = 0;`在 . 之后添加`while`。

# javascript - javascript自定义范围绑定函数

> ID：14394255
> 
> 赞同：0
> 
> 时间：2013-01-18T07:27:32.977
> 
> 标签：javascript, scope, bind

我正在阅读这篇文章 - ~~[http://www.robertsosinski.com/2009/04/28/binding-scope-in​​-javascript/](http://www.robertsosinski.com/2009/04/28/binding-scope-in-javascript/)~~ - 其中制作了自定义绑定函数。

```
Function.prototype.bind = function(scope) {
  var _function = this;

  return function() {
    return _function.apply(scope, arguments);
  }
}

alice = {
  name: "alice"
}

eve = {
  talk: function(greeting) {
    console.log(greeting + ", my name is " + this.name);
  }.bind(alice) // <- bound to "alice"
}

eve.talk("hello");
// hello, my name is alice 
```

我的问题尤其是这条线

```
 return function() {
    return _function.apply(scope, arguments);
  } 
```

为什么在 _function.apply(scope, arguments);中**返回** 那里？它在做什么，正在返回什么？我删除了那个返回，它仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:40:57.940

```
Why is the return in _function.apply(scope, arguments); there? And what is it doing and what is being returned? I removed that return and it still works. 
```

如果你想返回一个值，这是存在的。目前你的谈话功能没有返回任何值，所以你不需要它。如果您将通话功能更改为

```
eve = {
  talk: function(greeting) {
    return ( greeting + ", my name is " + this.name) ;
  }.bind(alice) // <- bound to "alice"
}

console.log(eve.talk("hello")); 
```

现在你会明白为什么需要退货

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:42:41.217

它返回应用原始函数（被绑定的函数）的结果。当您 make`_function.apply`时，`_function`将`scope`作为上下文调用 ，因此函数内部`this`将始终引用`scope`.

第二个参数`arguments`用于将所有参数传递给原始函数。并且该`return`语句用于确保从原始函数调用返回的值也将从绑定函数调用返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:52:09.197

在返回中，您只需返回新函数。在返回的匿名函数的范围内关闭`scope`and `_function`。它被称为闭包——所有在父函数中可见的变量（返回匿名函数的变量）在返回的函数中都是可见的。

这是您的示例：

```
Function.prototype.bind = function(scope) {
  var _function = this;

  return function() {
    return _function.apply(scope, arguments);
  }
};

function foo() {
    console.log(this.foobar);
}

var bar = {
   foobar: 'baz'
};

foo = foo.bind(bar); 
```

所以现在一步一步：`foo.bind(bar);`返回函数：

```
 function() {
    return _function.apply(scope, arguments);
  } 
```

`_function`是`foo`，`scope`是`bind`论据 - `bar`。`arguments`类似于包含函数的所有参数的数组（不完全是），因此通过: `foo()`，您`this`将成为作为第一个参数提供的范围`apply`。如果使用`foo(1,2,3)`参数将包含`1,2,3`.

记录的结果将是`baz`。

# php - YII : 构建一个 Web 服务以获取另一个应用程序的会话

> ID：14394256
> 
> 赞同：0
> 
> 时间：2013-01-18T07:27:40.797
> 
> 标签：php, web-services, yii

我想从非 yii 应用程序中获取一个会话到 yii 应用程序中。从一些我很红的文献中，我发现最好的解决方案是在它们之间嵌入一个 Web 服务。事实上，我从来没有尝试过这个。有人可以给我一些建议吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:07:19.160

如果应用程序在同一台服务器上，您可以使用类似 mySql 或 memcache 的数据库来保存会话，这样您就可以使用 yii 应用程序读取它们。

如果它们不在同一台服务器上，我建议您编写一个 API（如 REST 或 Node.js）来共享会话数据。

尽管更好的选择是将您的数据不在会话中存储，而是在两个应用程序都可以访问的其他地方存储，并在两个单独的会话中存储对该数据的引用。

# mysql - 我的触发器无法创建，我不明白为什么

> ID：14394260
> 
> 赞同：0
> 
> 时间：2013-01-18T07:28:01.953
> 
> 标签：mysql, sql

我正在尝试创建此触发器，但出现此错误：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'case where artcStackId = new.artcStackId' at line 7`

**这是失败的触发器**

```
SET new.artcPublicId = 
 case 
 when new.artcCountry = 'US' then concat(91,new.artcStackId)
 when new.artcCountry = 'UK' then concat(92,new.artcStackId)
 when new.artcCountry = 'CA' then concat(93,new.artcStackId)
 else concat(11,new.artcStackId)
 end case
 where artcStackId = new.artcStackId 
```

**这是有效的触发器**

```
SET new.artcPublicId = 
case 
when new.artcCountry = 'US' then concat(91,new.artcStackId)
when new.artcCountry = 'UK' then concat(92,new.artcStackId)
when new.artcCountry = 'CA' then concat(93,new.artcStackId)
else concat(11,new.artcStackId)
end 
```

当我添加这些额外的位时，它会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:33:34.930

您的第一个触发器有语法错误：

```
end case 
```

应该只是

```
end 
```

即删除尾随的“案例”

### 编辑：

我刚刚注意到你有一个 where 条件：`where artcStackId = new.artcStackId`.
你不能那样做。您只能修改`new.`语法引用的当前行。

您必须完全删除 where 子句，因为您只能更新正在插入/更新的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:47:31.033

没有提到你的 where 条件。我认为它应该是这样的 `where new.artcStackId = new.artcStackId`

# php - 如何理解 PHP Parser Generator 语法规则

> ID：14394261
> 
> 赞同：6
> 
> 时间：2013-01-18T07:28:08.937
> 
> 标签：php, parsing, lexer, parser-generator

我想制作一个解析器/词法分析器来编译我的模板引擎。我正在使用[PHP_ParserGenerator](http://pear.php.net/package/PHP_ParserGenerator)和[PHP_LexerGenerator](http://pear.php.net/package/PHP_LexerGenerator)。正如他们的文档中所解释的，我已经创建了一个词法分析器并且它正在工作。但是当尝试编写解析器时，我还没有理解他们的文档。我阅读了 Lemon 解析器文档，但我的代码仍然无法正常工作。:(

我发现[这个示例](http://blog.oncode.info/2007/10/25/eine-eigene-programmiersprache-erschaffen-lexer-und-parser-in-php/)包含词法分析器/解析器的“Hello world”，我阅读了 XenForo、vBulletin、Smarty 的解析器/词法分析器。在“Hello world”示例中，它很简单，但是当我尝试像在 Xenforo 中那样对语法规则进行分组时，`TAG_OPEN tag_attributes TAG_SELF_CLOSE`我的解析器无法正常工作。

```
 /*   0 */ "start ::= in",
 /*   1 */ "in ::= in PLAIN_TEXT",
 /*   2 */ "in ::= in curly",
 /*   3 */ "in ::= in tag",
 /*   4 */ "in ::= in TAG_COMMENT",
 /*   5 */ "in ::= in TAG_CLOSE",
 /*   6 */ "in ::=",
 /*   7 */ "tag ::= TAG_OPEN tag_attributes TAG_SELF_CLOSE",
 /*   8 */ "tag ::= TAG_OPEN tag_attributes TAG_END",
 /*   9 */ "tag_attributes ::= tag_attributes TAG_ATTRIBUTE DOUBLE_QUOTE quoted_inner DOUBLE_QUOTE",
 /*  10 */ "tag_attributes ::= tag_attributes TAG_ATTRIBUTE SINGLE_QUOTE quoted_inner SINGLE_QUOTE", 
```

这是Smarty的y文件：[smarty_internal_templateparser.y](http://smarty-php.googlecode.com/svn-history/r3758/branches/Smarty3Dev/development/lexer/smarty_internal_templateparser.y)

您能否帮助我了解如何像 Xenforo 一样对语法规则进行分组？

这是[柠檬解析器文档](http://www.hwaci.com/sw/lemon/lemon.html)

# android - 如何在android的自定义视图的画布上绘制段落

> ID：14394263
> 
> 赞同：2
> 
> 时间：2013-01-18T07:28:24.513
> 
> 标签：android, android-canvas

我要在画布上绘制大量文本..我可以设置文本，但所有文本都显示在一行中。所以我无法阅读所有文本..我想将文本设置为画布上的一段。任何人都可以告诉我执行此功能的方法。

我尝试使用 getLineCount(),getLineBound() 但它在这些行上提示错误，因为我的视图不包含这些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:56:35.370

您可能必须找到可以容纳在画布宽度内的最长子字符串并重复此操作，直到您的整个“长”字符串被分解成更小的字符串。递归在这里有帮助

你可以尝试这样的事情：

```
class Font
{
    private TextPaint tp = new TextPaint();
    private Paint p = new Paint();

    int getCharWidth(char ch, int fontSize)
    {
        tp.setTextSize(fontSize);
        Rect r = new Rect();
        tp.getTextBounds(String.valueOf(ch), 0, 1, r);
        return r.width();
    }

    int getHeight(int fontSize)
    {
        tp.setTextSize(fontSize);
        Rect r = new Rect();
        tp.getTextBounds(String.valueOf('A'), 0, 1, r);
        return r.height();
    }

    int getStringWidth(String str, int fontSize)
    {
        p.setTextSize(fontSize);
        tp.setTextSize(fontSize);
        Rect r = new Rect();
        tp.getTextBounds(str, 0, str.length(), r);          
        return r.width();//you may also try p.measureText(str);
    }
}

public String getLongestSubString(int width, int fontSize, String text)
{   
    int maxCharPerLine = width / (new Font()).getCharWidth('A', fontSize);
    int stringWidth = (new Font()).getStringWidth(text, fontSize);
    int posOfSpace = text.lastIndexOf(' ');
    if( stringWidth <= width || maxCharPerLine >= text.length())
        return text;
    String temp = text.substring(0, (posOfSpace == -1) ? (maxCharPerLine > text.length() ? text.length() : maxCharPerLine) : posOfSpace);
    return getLongestSubString(width, fontSize, temp);
}

public ArrayList<String> breakTextToLines(int width, int fontSize, String text)
{
    if(text == null)
        return null;
    ArrayList<String> lines = new ArrayList<String>();

    text = text.replace("\n", " ");

    int length = -1;
    String tempText = "";

    do
    {
        if( !tempText.endsWith(" ") && tempText.length() > 0)
            length += tempText.length();
        else
            length += tempText.length() + 1;

        if( length >= text.length())
            break;

        tempText = getLongestSubString(width, fontSize, text.substring(length));
        lines.add(tempText);
    }
    while(length < text.length());

    return lines;
} 
```

现在，一旦您将字符串列表（使用方法`breakTextToLines(int,int,String)`）分解为现在可以放入画布的较小字符串，您就可以开始您的绘图过程，如下所示

```
int fontSize = 20;
float lineSpaceFactor = 0.5f;
int lineHeight = (new Font()).getHeight(fontSize);
int lineSpace = (int)(lineSpaceFactor * lineHeight);

int width = 256;//your canvas width can go here
int height = 256;//your canvas height can go here
String string = "Need a lengthy string? why not Dr Zoidberg maybe? woop woop woop!!!";//your lengthy string can go here
Canvas canvas = new Canvas(bitmap);//your canvas or bitmap source goes here
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setTextAlign(Align.CENTER);
paint.setTextSize(fontSize);

ArrayList<String> lines = breakTextToLines(width, fontSize, string);
int numOfLines = lines.size();
int overallHeight = numOfLines * (lineHeight + lineSpace);

int yLoc = (height - overallHeight) / 2;
yLoc += lineSpace;

for(String line : lines)
{
    int xLoc = textureWidth /2 ;       
    canvas.drawText(text, xLoc, yLoc, paint);

    yLoc += (lineHeight + lineSpace);       
}
//your canvas would now be drawn with the paragraph broken into lines and centre aligned 
```

希望这可以帮助。

# sql - 从一个表格连接两个表格

> ID：14394264
> 
> 赞同：0
> 
> 时间：2013-01-18T07:28:26.850
> 
> 标签：sql, vb.net, forms, join

我完全迷路了。我正在做一个新项目，一个任务管理器。目标是添加用户（工作正常），然后向用户添加任务。请记住，我只使用我能找到并自学的信息来做这件事。

我有 2 个 SQL 表。用户和任务（区分大小写）。

用户有 UserID、Name、PayPalEmail 和 GeneralEmail。

Task 有 Name、OrderNumber、WordCount、Amount、DateDue、TimeDue、AM、PM、myDateDue、myTimeDue、MY_AM、MY_PM 和 Task。

我已经搜索了几天关于如何将表格连接在一起的信息，以便我可以选择一个名称并在文本框中向它们添加任务并查询名称并将分配给它们的所有任务显示在相同的文本框中。

冒着听起来很懒惰的风险，有人可以向我展示代码，给我一个易于理解的教程或易于遵循的东西，以便我自己学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:32:51.903

用户有 UserID、Name、PayPalEmail 和 GeneralEmail。

Task 有**UserID**、Name、OrderNumber、WordCount、Amount、DateDue、TimeDue、AM、PM、myDateDue、myTimeDue、MY_AM、MY_PM 和 Task。（您需要添加 UserID 作为外键）

假设表 Task 有 UserID 作为外键，指向用户表：

`select user.UserID, user.Name, user.PaypalEmail, Task.Name, Task.OrderNo from user inner join Task on user.UserID=Task.UserID group by user.Name`

# android - Android中的窗口焦点禁用

> ID：14394266
> 
> 赞同：0
> 
> 时间：2013-01-18T07:28:35.907
> 
> 标签：android

我被困在一个场景中。我有一个登录表格。我想将它显示为对某些用户禁用。我可以获得该用户，但我不知道如何从窗口中移除焦点。

```
//to check whether the current user is administrator or not
    public void checkAdministrator(){

        String owner = ParseValues.parsedGroupList.get(indexofGroup).getGroup_owner();
        String currentUser = CCMStaticVariable.loginUserId+"@abc.com";

        if(owner.equalsIgnoreCase(currentUser)){
            administrator=true;
        }
        else{
            administrator=false;
        }
    } 
```

现在 -

```
if(!administrator){

//here I want to disable the whole Activity, I just want to show the activity in disabled state

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:36:18.070

首先从您的登录 xml 获取您的父布局并尝试这个

```
parentLayout.setEnabled(false); 
```

# android - 如何仅使用内置画廊 android 打开图像文件？

> ID：14394267
> 
> 赞同：2
> 
> 时间：2013-01-18T07:28:38.737
> 
> 标签：android

嗨，我想仅使用 android 中的内置图库打开图像。现在我正在使用以下代码，如果我单击按钮，它会显示包含安装的第三方工具以打开图像的菜单。我只想要内置画廊，有没有隐藏其他第三方工具的选项，我可以直接用画廊打开而不显示菜单。

```
package com.example.gallery;

import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class BrowsePicture extends Activity {

private static final int SELECT_PICTURE = 1;
Button bt;
private String selectedImagePath;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_browse_picture);

    bt = (Button) findViewById(R.id.button1);
            bt.setOnClickListener(new OnClickListener() {

                public void onClick(View arg0) {

                    // in onCreate or any event where your want the user to
                    // select a file
                    Intent intent = new Intent();
                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);
                    startActivityForResult(
                            Intent.createChooser(intent, "Select Picture"),
                            SELECT_PICTURE);
                }
            });
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
        }
    }
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T08:33:52.787

尝试使用

```
Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType("image/*");
startActivityForResult(intent, SELECT_PICTURE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:37:26.997

那是因为单击按钮时，您正在传递设置其类型的意图， `intent.setType("image/*");`因此`intent.setAction(Intent.ACTION_GET_CONTENT);`它将显示设备上安装的应用程序列表。

如果您只想直接打开画廊，那么您应该只传递画廊的意图。

# android - Android：按钮没有突然响应

> ID：14394270
> 
> 赞同：0
> 
> 时间：2013-01-18T07:28:44.340
> 
> 标签：android, database, button, onclicklistener

我的 Button 突然没反应了……昨天还好好的，回到电脑前就不行了……

当我点击按钮 cmd_forward 什么都没有发生...没有 logcat 在设备上没有反应...

Oncreate 的一部分：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.question);
    _id = getIntent().getIntExtra("ID", 1);
    Log.v("ID:", ""+_id);
    filldata();

    Button cmd_forward = (Button) findViewById(R.id.cmd_forward);
    cmd_forward.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {    
            if(_id == 9){
                Log.v("TRUE", "TRUE");
                int min = 1;
                int max = 107;

                Random r = new Random();
                int random = r.nextInt(max - min + 1) + min;

                c = db.rawQuery("SELECT question, answer FROM tbl_questions"+
                        " where _id =='"+random+"'", null);

                if (c != null ) {
                    if  (c.moveToFirst()) {
                              question = c.getString(c.getColumnIndex("question"));
                              answer = c.getString(c.getColumnIndex("answer"));                   
                              TextView tv_question = (TextView) findViewById(R.id.txt_question);                      

                              tv_question.setText(question);
                    }
               }
            } else {

            if(c.moveToNext()){
              question = c.getString(c.getColumnIndex("question"));
              answer = c.getString(c.getColumnIndex("answer"));                   

              TextView tv_question = (TextView) findViewById(R.id.txt_question);                      

              tv_question.setText(question);
            }
            }
        }
    }); 
```

填充数据（）：

```
 public void filldata(){

    db = SQLiteDatabase.openDatabase("/data/data/spicysoftware.abugrundwissen/databases/questions", null,
            SQLiteDatabase.OPEN_READWRITE);

    if(_id == 9){

        int min = 1;
        int max = 107;

        Random r = new Random();
        _id= r.nextInt(max - min + 1) + min;

        c = db.rawQuery("SELECT question, answer, favourite FROM tbl_questions"+
                " where _id =='"+_id+"'", null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                      question = c.getString(c.getColumnIndex("question"));
                      answer = c.getString(c.getColumnIndex("answer"));        
                      favourite = c.getInt(c.getColumnIndex("favourite"));
                      TextView tv_question = (TextView) findViewById(R.id.txt_question);                      

                          tv_question.setText(question);

            }
       }

    } else {
    c = db.rawQuery("SELECT question, answer, favourite FROM tbl_questions"+
            " where rubrik =='"+_id+"'", null);

    if (c != null ) {
        if  (c.moveToFirst()) {
                  question = c.getString(c.getColumnIndex("question"));
                  answer = c.getString(c.getColumnIndex("answer"));    
                  favourite = c.getInt(c.getColumnIndex("favourite"));
                  TextView tv_question = (TextView) findViewById(R.id.txt_question);                      

                      tv_question.setText(question);

        }
   }

}

} 
```

日志猫：

```
01-18 07:19:07.015: D/dalvikvm(617): GC_FOR_ALLOC freed 68K, 5% free 6554K/6855K, paused 29ms, total 30ms
01-18 07:19:07.095: D/dalvikvm(617): GC_FOR_ALLOC freed 2K, 6% free 6810K/7175K, paused 30ms, total 31ms
01-18 07:19:07.095: I/dalvikvm-heap(617): Grow heap (frag case) to 6.946MB for 262160-byte allocation
01-18 07:19:07.175: D/dalvikvm(617): GC_FOR_ALLOC freed <1K, 6% free 7066K/7495K, paused 30ms, total 30ms
01-18 07:19:07.185: V/ID:(617): 9
01-18 07:19:10.855: I/Choreographer(617): Skipped 34 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:49:47.870

问题是，我在 filldata(); 中给出了“_id”；另一个值。所以不是9！

# ios - 如何仅检测/特别检测人声？

> ID：14394274
> 
> 赞同：1
> 
> 时间：2013-01-18T07:28:55.597
> 
> 标签：ios, cordova, microphone, voice, voice-recognition

我正在开发一个应用程序，我将根据扬声器产生的声音绘制实时音高频率图。

示例：用户说“hmmmmmmmmmmmmmmmm...”，同时绘制一个图表，显示用户每 1/10 秒达到的频率。

现在，我已经从上到下开发了所有东西，但唯一剩下的问题是，当用户说话或说话时，背景噪音也会被捕获。即使用户说着什么让手机靠近他的嘴唇，噪音仍然会被捕获和绘制。

我想消除这种噪音。

我尝试过使用 Shout ToolKit 和 Shpinx，但没有什么比这更有效，因为它会减慢图形的绘制速度。

我正在使用 phonegap 制作这个应用程序。

有没有更好的降噪 api 可用 [pref: 开源]

# asp.net - Message":"无效的 Web 服务调用，缺少参数值：\u0027fff\u0027。","StackTrace

> ID：14394278
> 
> 赞同：2
> 
> 时间：2013-01-18T07:29:26.823
> 
> 标签：asp.net

我有一个 js 文件。a 想使用 ajax 将值作为 json 传递给我的代码隐藏，但我收到此错误：消息“：”无效的 Web 服务调用，参数缺少值：\u0027fff\u0027。”，“StackTrace

我的 JavaScript 代码是：

```
var values = { fff: "tttttttt" };
var uname = "fariddddddd";
  $.ajax({
 type: "GET",
 url: "http://localhost:39787/Default.aspx/dataSave",
 data: JSON.stringify(values),
 contentType: "application/json; charset=utf-8",
 dataType: "json",
 processData: false,
 success: function (msg) {
     AjaxSucceeded(msg);
 },
 error: function (msg) {
     alert(msg);
 }
     }); 
```

我背后的代码是：

```
[WebMethod(true)]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public static string dataSave(string fff)  
 {
   string a = fff + "kazemi";
   return a; 
```

}

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:37:37.440

您没有用引号将密钥括起来。将声明更改为这样。[在 javascript 中](http://mathiasbynens.be/notes/javascript-properties)阅读这个未引用的对象

```
var values = { "fff": "tttttttt" }; 
```

# c# - SQLite 错误（10）：锁/共享冲突延迟 25ms

> ID：14394280
> 
> 赞同：1
> 
> 时间：2013-01-18T07:29:33.893
> 
> 标签：c#, sqlite, locking, conflict

我的[C#/SQLite 应用程序](https://github.com/nicolas-raoul/CmisSync)运行良好，但偶尔会输出此错误：

```
SQLite error (10): delayed 25ms for lock/sharing conflict 
```

正如[这个线程](http://comments.gmane.org/gmane.comp.db.sqlite.general/69721)所建议的，我更新到了最新的 SQLite，但它仍然会发生。
如何解决这个问题？

* * *

SQLite 版本：在[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)`sqlite-netFx40-static-binary-Win32-2010-1.0.84.0.zip`的`Precompiled Statically-Linked Binaries for 32-bit Windows (.NET Framework 4.0)`段落

Visual C# 2010 速成版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:01:46.970

从这个原始代码：

```
 using (var command = new SQLiteCommand(GetSQLiteConnection()))
    {
        try
        {
            command.CommandText =
                "DELETE FROM folders WHERE path='" + path + "'";
            command.ExecuteNonQuery();
        }
        catch (SQLiteException e)
        {
            SparkleLogger.LogInfo("CmisDatabase", e.Message);
        }
    } 
```

更改为此解决了问题（只有前两行不同）：

```
 var connection = GetSQLiteConnection();
    using (var command = new SQLiteCommand(connection))
    {
    try
        {
            command.CommandText =
                "DELETE FROM folders WHERE path='" + path + "'";
            command.ExecuteNonQuery();
        }
        catch (SQLiteException e)
        {
            SparkleLogger.LogInfo("CmisDatabase", e.Message);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:11:54.403

从您的评论中查看源代码：

```
 using (var command = new SQLiteCommand(GetSQLiteConnection()))
        {
            try
            {
                command.CommandText =
                    "DELETE FROM folders WHERE path='" + path + "'";
                command.ExecuteNonQuery();
            }
            catch (SQLiteException e)
            {
                SparkleLogger.LogInfo("CmisDatabase", e.Message);
            }
        } 
```

using 语句正在处理命令而不是连接。尝试对每个命令使用两个嵌套的 using 语句。

```
 using (var connection= GetSQLiteConnection())
   {
      using (var command = new SQLiteCommand(connection))
      {
        try
        {
            command.CommandText =
                "DELETE FROM folders WHERE path='" + path + "'";
            command.ExecuteNonQuery();
        }
        catch (SQLiteException e)
        {
            SparkleLogger.LogInfo("CmisDatabase", e.Message);
        }
     }
  } 
```

这可能会缓解问题，但其他因素可能会导致此错误出现。

# android - ksoap2 库的限制是什么？

> ID：14394282
> 
> 赞同：0
> 
> 时间：2013-01-18T07:29:39.220
> 
> 标签：android, android-ksoap2

我想使用我的 Android 应用程序中的 asp Web 服务将数据发送到服务器。为此，我正在使用 ksoap2 库。我发送的数据是`Content`对象的形式。Content类的结构是：

```
class Content{
   int contentId;
   string xmlContent;
} 
```

xmlContent 很大，1k 到 100k 行。我的问题是，这种类型的操作推荐使用 ksoap2 库吗？ksoap2 库有什么限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:43:54.423

我也在我的程序中使用过 Ksop。但我从未遇到过无法克服的困难。我有一个建议给你使用 JSON 而不是 xmlContent。在 asp 中有一个内置的 java 序列化。只需使用它，您就会在 android 内部得到一个 json 响应。只需使用 ksop 解析 json。[在这里](http://code.google.com/p/ksoap2-android/)，您将对 ksop 有一个很好的了解。

# jsf - jsf 2.0- 始终包含 xhtml，即使呈现为 false

> ID：14394290
> 
> 赞同：2
> 
> 时间：2013-01-18T07:30:31.857
> 
> 标签：jsf, jsf-2, xhtml, jstl, uiinclude

我有一个主页 xhtml，其中根据条件包含 3 个子 xhtml。我面临的问题是，无论情况如何，Book.xhtml 总是被调用。我将呈现的条件更改为 false 或移出到另一个条件，但文件总是被调用由于它的支持 bean 也被调用，从而导致不必要的开销。请给我一个解决方案

```
<ui:composition template="/xhtml/baseLayout.xhtml">
    <ui:define name="browserTitle">
        <h:outputText value="HOME PAGE" />
    </ui:define>
    <ui:define name="header">
        <ui:include src="/xhtml/header.xhtml" />
    </ui:define>
    <ui:define name="bodyContent">

        <h:panelGrid width="100%"
            rendered="#{pogcore:isRoleAuthorized(BUNDLE.SUPER)}"  >
            <ui:include src="/xhtml/SuperUser.xhtml"  />
        </h:panelGrid>
        <h:panelGrid width="100%"
            rendered="#{pogcore:isRoleAuthorized(BUNDLE.MAINTENANCE)}" >
            <ui:include src="/xhtml/Maintenance.xhtml" />
        </h:panelGrid>

        <h:panelGrid width="100%"
            rendered="#{pogcore:isRoleAuthorized(BUNDLE.PRINT)}">
            <ui:include src="/xhtml/Book.xhtml" />
        </h:panelGrid>

    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T08:25:46.357

这是由于 jsf 的生命周期而发生的。JSF UIComponents 在视图渲染时被评估，而 jstl 标签在构建时被评估。

因此，当您使用 h:panelGrid 的渲染属性时，不调用包含页面下的托管 bean 为时已晚。要解决此问题，请尝试使用 jstl 标签设置条件，以下内容应该适合您。

```
<c:if test="#{bean.yourCondition}">
    <h:panelGrid width="100%"> 
        <h:outputText value="#{bean.yourCondition}"/> <!--if this is not getting printed there is smtg wrong with your condition, ensure the syntax, the method signature is correct-->
        <ui:include src="/xhtml/Book.xhtml" /> 
    </h:panelGrid>
</c:if> 
<c:if test="#{!bean.yourCondition}"> 
    <h:outputText value="#{bean.yourCondition}"/> <!--This should print false-->
</c:if> 
```

下面的文档描述了 jstl 和 jsf 生命周期的细节。

> [http://www.znetdevelopment.com/blogs/2008/10/18/jstl-with-jsffacelets/](http://www.znetdevelopment.com/blogs/2008/10/18/jstl-with-jsffacelets/)

查看以下文档以查看另一种不使用 jstl 标签来解决此问题的方法。

> [http://pilhuhn.blogspot.com/2009/12/facelets-uiinclude-considered-powerful.html](http://pilhuhn.blogspot.com/2009/12/facelets-uiinclude-considered-powerful.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:45:32.073

做这个：

*   始终包含子页面
*   将 panelGrid（带有渲染的）放在您始终包含的页面内

为什么 ？因为包含是在评估渲染之前执行的。

# xcode - 在 tableview 上更新和删除 sqlite 需要帮助

> ID：14394292
> 
> 赞同：1
> 
> 时间：2013-01-18T07:30:34.270
> 
> 标签：xcode, sqlite, ios6

我是 xcode 的初学者，对此我知之甚少。这是我的代码。我正在为 iOS 6.0 做一个简单的帐户管理程序。我需要从表格视图中选择要编辑/删除数据的行，然后才能更新/删除它。我不知道如何编写这些代码，我需要有经验的程序员的帮助。我的项目：[http ://www.mediafire.com/?95l8pwzu3c62ts0](http://www.mediafire.com/?95l8pwzu3c62ts0)

```
#import "FlipsideViewController.h"

@interface FlipsideViewController ()

@end
@implementation FlipsideViewController

@synthesize entries;
- (void)viewDidLoad
{
    self.label.text=self.strUsername;
    entries = [[NSMutableArray alloc]init];
    [self openDB];
    NSString *sql = [NSString stringWithFormat:@"SELECT * FROM SUMMARY8 WHERE theuser = '%s'",[self.label.text UTF8String]];
    sqlite3_stmt *statement;
    if (sqlite3_prepare(account, [sql UTF8String], -1, &statement, nil)==SQLITE_OK)
    {
        while (sqlite3_step(statement)==SQLITE_ROW){
            char *field1=(char *) sqlite3_column_text(statement, 0 );
            NSString *field1Str = [[NSString alloc]initWithUTF8String:field1];

        char *field2=(char *) sqlite3_column_text(statement, 1 );
          NSString *field2Str = [[NSString alloc]initWithUTF8String:field2];

            char *field3=(char *) sqlite3_column_text(statement, 2 );
            NSString *field3Str = [[NSString alloc]initWithUTF8String:field3];

            char *field4=(char *) sqlite3_column_text(statement, 3 );
            NSString *field4Str = [[NSString alloc]initWithUTF8String:field4];

            NSString *str = [[NSString alloc]initWithFormat:@"%@ - %@ - %@", field1Str,field3Str,field4Str];
            [entries addObject:str];
        }
    }

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(NSString *) filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"account.sql"];
}
-(void) openDB
{
    if (sqlite3_open([[self filePath] UTF8String], &account) !=SQLITE_OK){
        sqlite3_close(account);
        NSAssert(0,@"Database failed to open");

    }
    else
    {
        NSLog(@"database opened");
    }
}

- (IBAction)addaccount:(id)sender {
    MainViewController *FVC = [self.storyboard instantiateViewControllerWithIdentifier:@"MainViewController"];
    FVC.strUsername=self.strUsername;

    [self presentViewController:FVC animated:YES completion:nil];
   // FVC.label.text=self.label.text;
}

- (IBAction)btnEdit:(id)sender {
}

- (IBAction)btnDelete:(id)sender {
    [self tableView:<#(UITableView *)#> cellForRowAtIndexPath:<#(NSIndexPath *)#>];
}

#pragma mark - Actions

- (IBAction)done:(id)sender
{
    [self.delegate flipsideViewControllerDidFinish:self];
}

-(NSInteger) numberOfSectionsInTableView: (UITableView *)tableView
{
    return 1;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section

{
    NSString *myTitle = [[NSString alloc]initWithFormat:@"Name - Username - Password"];
    return myTitle;
}

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
      NSLog(@"%d", [entries count]);
    return [entries count];

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{//NSLog(@"test");
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.text = [self.entries objectAtIndex:indexPath.row];
    return cell;

}
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *selectedRow = [entries objectAtIndex:indexPath.row];
    NSString *sql = [NSString stringWithFormat:@"DELETE FROM SUMMARY8 WHERE name = '%@'",selectedRow];

    char *err;
    if (sqlite3_exec(account, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK){
        sqlite3_close(account);
        NSAssert(0, @"Could not delete row");

    }
    else {
        NSLog(@"row deleted");
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Done" message:@"Account was deleted successfully!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
}

@end 
```

它是否正确？抱歉，我绝对没有 Xcode 的背景。很抱歉打扰了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:36:56.183

删除使用这个：

例子：`strUpdate = [NSString stringWithFormat:@"DELETE FROM SUMMARY8 WHERE theuser = '%s'",[self.label.text UTF8String]];`

更新使用这个：

示例（更新状态）：`strQuery = [NSString stringWithFormat:@"UPDATE SUMMARY8 SET STATUS='1' WHERE theuser = '%s'",[self.label.text UTF8String]];`

希望这可以帮助。

编辑：使用这种方法：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

Example: NSString *selectedRow = [entries objectAtIndex:indexPath.row];
} 
```

这种方法基本上显示了该行表的数据。使用该数据进行操作。举个例子..根据你的情况调整它......

编辑2：

例如：

```
UITableView *table = [[UITableView alloc] init];
[self tableView:table didSelectRowAtIndexPath:index]; 
```

其中 index 是您的商品编号。

# android - 文本视图下方的可绘制线条未显示

> ID：14394294
> 
> 赞同：7
> 
> 时间：2013-01-18T07:30:42.017
> 
> 标签：android, xml-drawable

我有一个文本视图，我想在它下面显示一行。我正在使用 drawableBottom 属性来执行此操作。这是我的代码

```
<TextView
 android:id="@+id/total"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:gravity="right"
 android:text="TextView" 
 android:drawableBottom="@drawable/dividerline"/> 
```

这是我的dividerline.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="line">

    <stroke
        android:width="70dp"
        android:color="@android:color/black"
        />
    <size
        android:height="1dp"
     />
    <solid
        android:color="@android:color/black"
    />

</shape> 
```

我没有收到错误。只是当我运行我的应用程序时，文本视图下方不会出现任何行。

对 drawableBottom 属性有误解？期待一些帮助:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-18T07:46:58.723

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <size
        android:height="1dp"
        android:width="70dp" />

    <solid android:color="@android:color/black" />

</shape> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-18T07:35:55.430

使用链接

```
phone_no.setText("1222446");
Linkify.addLinks(phone_no, Linkify.ALL); 
```

它将在 textview 下面自动显示行

# iphone - 我在所有类中创建条形按钮。有没有办法只创建一次条形按钮并在所有类中使用它？

> ID：14394306
> 
> 赞同：2
> 
> 时间：2013-01-18T07:31:29.563
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

我正在`bar button`所有课程中创建一个。反正有没有*只写一次这个代码*并在所有类中使用？

```
 toolbar = [[UIToolbar alloc]
               initWithFrame:CGRectMake(90, 0, 100, 45)];
    toolbar.tintColor=self.navigationController.navigationBar.tintColor;

    // create an array for the buttons
    NSMutableArray* buttonsArray = [[NSMutableArray alloc] initWithCapacity:2];

    // create a standard save button

    UIImage *buttonImage = [UIImage imageNamed:@"home.png"];

    UIButton *homeButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [homeButton setImage:buttonImage forState:UIControlStateNormal];

    homeButton.frame = CGRectMake(100,2, 35, 35);

    [homeButton addTarget:self action:@selector(homeButtonpress) forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *customHomeBarItem = [[UIBarButtonItem alloc] initWithCustomView:homeButton];

    [buttonsArray addObject:customHomeBarItem];
    [customHomeBarItem release];

    UIImage *logoutImg=[UIImage imageNamed:@"power.png"];

    UIButton *logOutBtn=[UIButton buttonWithType:UIButtonTypeCustom];

    [logOutBtn setImage:logoutImg forState:UIControlStateNormal];

    [logOutBtn addTarget:self action:@selector(logOutButtonPress) forControlEvents:UIControlEventTouchUpInside];

    logOutBtn.frame=CGRectMake(0, 2, 35, 40);

    UIBarButtonItem *customLogOutButton=[[UIBarButtonItem alloc]initWithCustomView:logOutBtn];

    [buttonsArray addObject:customLogOutButton];
    [customLogOutButton release];

    [toolbar setItems:buttonsArray animated:NO];
    [buttonsArray release];

    // place the toolbar into the navigation bar
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:toolbar];
    [toolbar release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:43:03.633

> 1.  创建一个实用程序类
> 2.  添加用于创建和返回 UIBarButtonItem 的类方法。
> 3.  在 .pch 或要使用它的类中导入 Utility.h。

**实用程序.m**

```
+ (UIBarButtonItem *) barButtonItemWithTitle:(NSString *)title backgroundImage:(NSString *)image target:(id)target action:(SEL)action
{
    //create button & return it
    return barButtonItem;
} 
```

使用

**视图控制器.m**

```
 UIBarButtonItem* backButtonItem = [Utility barButtonItemWithTitle:@" Back" backgroundImage:@"back_button" target:self action:@selector(backButtonAction)];
    self.navigationItem.leftBarButtonItem = backButtonItem; 
```

# c# - 以编程方式从 XML Schema 生成测试 XML

> ID：14394310
> 
> 赞同：5
> 
> 时间：2013-01-18T07:31:36.780
> 
> 标签：c#, xml, visual-studio, xsd, sample

我现在已经搜索了一点，但我无法找到以编程方式从 XML 模式自动生成数据的方法。假设我有这个 XML 模式：

```
<xs:element xmlns:xs="http://www.w3.org/2001/XMLSchema" name ="Persons">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Person">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="FirstName" type="xs:string" />
            <xs:element name="LastName" type="xs:string" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

我可以使用 VS 函数“生成示例 XML”从中创建 XML ![在此处输入图像描述](../Images/35d2045135a4843ff9a1fbdc51842aaa.png)
有没有办法以编程方式执行此操作？

编辑：指定。我不想自己创建所有对象并以编程方式插入数据。我希望它能够像 VS 中的“生成示例 XML”一样自动创建对象和属性。这样做的原因是我想更改 XSD 而不必对 xml 样本生成做任何事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T10:08:18.747

在做了一些搜索之后。我找到了一个实现了 xml 示例生成器的[项目。](http://msdn.microsoft.com/en-us/library/aa302296.aspx)我创建了一个测试解决方案并导入了这些类。然后我删除了 XmlGen.cs 文件并创建了我自己的 main 方法。输出将基于根元素。

```
public static void Main(string[] args)
        {
            using (var stream = new MemoryStream(File.ReadAllBytes("schema.xsd")))
            {
                var schema = XmlSchema.Read(XmlReader.Create(stream ), null);
                var gen = new XmlSampleGenerator(schema, new XmlQualifiedName("rootElement"));
                gen.WriteXml(XmlWriter.Create(@"c:\temp\autogen.xml"));
                Console.WriteLine("Autogenerated file is here : c:\temp\autogen.xml");
            }            
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T08:09:35.047

您可以编写简单的函数将 1 行放入数据表中，然后执行`DataTable.WriteXml(string filePath)`

像这样的东西：

```
xmlschema1 schema=new xmlschema1();
//put some test data in table
schema.Persons.AddPersonsRow(...some params);
//generate xml
schema.Persons.WriteXml(filePath); 
```

# ios - iPhone/iPad 模拟器未在 Titanium studio 2.1.2 中启动

> ID：14394314
> 
> 赞同：1
> 
> 时间：2013-01-18T07:31:45.650
> 
> 标签：ios, titanium

我有以下软件配置-

Mac- 10.6.8 在 VMWare 上安装了 2 GB 内存。xcode- 4.2 Titanium studio- 2.1.2 Titanium sdk 版本 - 3.0.0 GA 和 2.1.2GA。

我的问题是，当使用 3.0.0 GA 或 2.1.2GA 创建项目时，对于 android 来说一切都很好。但是 iPhone 或 iPad 模拟器没有启动，如果相同的代码在 xcode 中打开并运行，那么它就可以工作。为 iPhone 运行项目时，我们会得到以下日志信息 -

```
[INFO] One moment, building ...
[INFO] Titanium SDK version: 2.1.2 (08/24/12 14:46 ed7f777)
[INFO] iPhone Device family: universal
[INFO] iPhone SDK version: 5.0
[INFO] iPhone simulated device: iphone
[INFO] Minimum iOS version: 4.0
[INFO] Compiling localization files 
```

之后什么也没发生。

请给我解决方案。谢谢....

# neo4j - Gephi没有显示neo4j图

> ID：14394319
> 
> 赞同：0
> 
> 时间：2013-01-18T07:32:08.433
> 
> 标签：neo4j, gephi

我在 neo4j 中创建了 node(0) 和 node(1) 之间的关系。当我在 gephi 中查看它时，它没有在图形屏幕上显示任何内容。在最右侧的窗格中，它显示节点：2 和边：0。有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:50:35.163

也许我得到了答案。实际上 gephi 仅适用于 neo4j 1.5 版本，但我使用的是 1.9 版本。安装 neo4j1.5 后，它可以工作了。但现在我转向了neoclipse。它符合我的目的。

# iphone - Apple 应用内购买：通过附加标识符生成新产品

> ID：14394320
> 
> 赞同：1
> 
> 时间：2013-01-18T07:32:13.773
> 
> 标签：iphone, ios, objective-c, xcode, in-app-purchase

我正在制作一个 iPhone 应用程序，它从外部数据库加载许多对象并将它们显示给用户。用户可以选择以 0.99 美元的价格购买这些物品中的任何一种；购买对象时，会向用户显示有关它的更多信息。数据库很大，每天都会添加几个对象。这就是为什么在 iTunes Connect 上将每个对象注册为自己的产品是不切实际的。我认为最好的方法是在 iTunes Connect 上只注册一种产品，每次用户购买任何对象时，他只会购买该产品的另一个副本。由于对象都是不同的，我需要一种识别哪个是哪个的方法。这些对象在数据库中都有唯一的代码，但我在文档中没有看到任何关于如何将它们附加到产品/购买的内容。

编辑：我提到的对象只是变量的集合。它们究竟是什么并不重要。我只想知道如何仅使用与某种标识符相关联的一种产品来销售不同的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:56:13.347

您必须在 iTunes Connect 中独立添加每个对象。Apple 不接受仅将一个 IAP 插入 iTunes Connect 并出售不同的对象

# php - 删除自定义模块中的 addtocart 按钮

> ID：14394328
> 
> 赞同：0
> 
> 时间：2013-01-18T07:32:52.203
> 
> 标签：php, events, magento

我正在构建一个自定义模块，在特定情况下需要从产品视图中删除“添加到购物车”按钮，以防止将其添加到购物车中。

我不想为此覆盖整个视图块，因此我尝试在`catalog_product_is_salable_after`完成特定条件时从我的观察者那里捕捉事件，使产品不是`salable with ->setIsSalable(false);`.

问题是，虽然这可行并且添加到购物车按钮被删除，但在列表部分，该产品显示为“ `out of stock`”。

有人会有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:57:56.673

如果您要覆盖`catalog_product_is_salable_after`，那么您也应该编辑模板文件（我认为）。

如果满足您的条件，请尝试将“缺货”更改为其他内容。

[顺便说一句，我在这里](http://www.magentocommerce.com/boards/viewthread/73426/)遇到了类似的问题。

# javascript - 骨干模板错误（未读取模板）

> ID：14394332
> 
> 赞同：0
> 
> 时间：2013-01-18T07:33:06.413
> 
> 标签：javascript, backbone.js

我正在通过 Addy Osmani 学习[开发 Backbone.js 应用程序](http://addyosmani.github.com/backbone-fundamentals/)，并且我陷入了模板部分。

这是我的模板：

```
 <script type="text/template" id="item-template">
    <div class="view">
    <input class="toggle" type="checkbox" <%= completed ? 'checked' : '' %>>
    <label><%= title %></label>
    <button class="destroy"></button>
    </div>
    <input class="edit" value="<%= title %>">
    </script> 
```

这是我的主干观点：

```
var TodoView = Backbone.View.extend({
        tagName: 'li',
        className: 'todo_list',
        todoTpl: _.template($('#item-template').html()),
        events:{
            'dblclick label': 'edit',
            'keypress .edit':'updateOnEnter',
            'blur .edit':'closed'
            },
        render: function(){
            _.bindAll(this, 'edit','upadateOnEnter','close');
            this.$el.html(this.todoTpl(this.model.toJSON()));
            this.input = this.$('.edit');
            return this;
            },
        edit: function(){},
        updateOnEnter: function(){},
        closed: function(e){}
        });

        var todoView = new TodoView();
        console.log(todoView.el); 
```

我不知道会发生什么结果，但我期待 id item-template 的模板中的 HTML 但我只得到

```
<li class="todo_list"></li> 
```

我认为我在某个地方错了，我只是想不通。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:43:19.063

实例化视图时， Backbone 会`this.el`自动创建，但您需要调用`.render()`以运行模板并将其结果放置在元素内。

```
var todoView = new TodoView();
todoView.render();
console.log(todoView.el); 
```

更新：

此外，您的渲染函数中有错字。你`upadateOnEnter`应该有`updateOnEnter`，而且`close`应该有`closed`。

```
_.bindAll(this, 'edit','updateOnEnter','closed'); 
```

# r - R绘制频率分布

> ID：14394334
> 
> 赞同：1
> 
> 时间：2013-01-18T07:33:27.550
> 
> 标签：r, plot

我知道我们通常这样做：

```
x=c(rep(0.3,100),rep(0.5,700))
plot(table(x)) 
```

但是，我们只能在图中得到几个点或垂直线。

**0.3以上100个点，0.5以上700个点怎么办？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:11:01.977

像这样的东西？

```
x <- c(rep(.3,100), rep(.5, 700))
y <- c(seq(0,1, length.out=100), seq(0,1,length.out=700))
plot(x,y) 
```

**编辑：（**根据OP的评论）

在这种情况下，这样的事情应该可以工作。

```
x <- rep(seq(1, 10)/10, seq(100, 1000, by=100))
x.t <- as.matrix(table(x))
y <- unlist(apply(x.t, 1, function(x) seq(1,x)))
plot(x,y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:33:55.830

您可以使用`linetype`和`linewidth`设置...

```
plot(table(x),lty=3,lwd=0.5) 
```

![在此处输入图像描述](../Images/86f1591401b4e78a9a766e3c3ee92d6e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:49:30.333

对于较小的数字（计数），您可以像这样`stripchart`使用`method="stack"`：

```
stripchart(c(rep(0.3,10),rep(0.5,70)), pch=19, method="stack", ylim=c(0,100)) 
```

但带状图不适用于 700 点。

* * *

*编辑：*

`dots()`包[TeachingDemos](http://cran.r-project.org/web/packages/TeachingDemos/index.html)中的功能可能是您想要的：

```
 require(TeachingDemos)
 dots(x) 
```

# javascript - 播放随机音乐

> ID：14394336
> 
> 赞同：1
> 
> 时间：2013-01-18T07:33:31.067
> 
> 标签：javascript, html

我想在我的网站上播放随机音轨..没有任何前进/后退控制..我使用的代码是..

```
<script type="text/javascript">
var a = Math.random()*2;
a=Math.floor(a);

if(a==1)
{alert(a); document.getElementById('soundtrack').innerHTML="<audio id='background_audio1' loop autoplay><source src='6.ogg' type='audio/ogg'>Your browser does not support the audio element.</audio>";}
if(a==0)
{alert("hello");document.getElementById('soundtrack').innerHTML="<audio id='background_audio1' loop autoplay><source src='5.ogg' type='audio/ogg'>Your browser does not support the audio element.</audio>";}

</script>

<div id="soundtrack">

</div> 
```

但是这段代码没有播放任何东西..（警报进展顺利）我该怎么办？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:05:46.207

这就是（一个原因）为什么将 JavaScript 放在 BODY 标记的末尾是个好主意。正如 Mikhail 所说，脚本运行时尚未加载 DIV 标签。HTML 页面按照您输入的顺序进行处理（除非您使用函数和事件处理程序）。一个简单的解决方法是将 DIV 移动到页面顶部，如下所示：

```
<html>
<body>
<div id="soundtrack"></div>

<script type="text/javascript">
var a = Math.random()*2;
a=Math.floor(a);

if(a==1)
{alert(a); document.getElementById('soundtrack').innerHTML="<audio id='background_audio1' loop autoplay><source src='6.ogg' type='audio/ogg'>Your browser does not support the audio element.</audio>";}
if(a==0)
{alert("hello");document.getElementById('soundtrack').innerHTML="<audio id='background_audio1' loop autoplay><source src='5.ogg' type='audio/ogg'>Your browser does not support the audio element.</audio>";}

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:51:19.733

实际上，当您运行脚本时，div 并未初始化。你需要把它放在 onload hadler 中。这个例子对我有用：

```
<script type="text/javascript">
function play()
{
    var a = Math.random()*2;
    a=Math.floor(a);

    if(a==1)
    {
        alert(a); 
        document.getElementById('soundtrack').innerHTML="<audio id='background_audio1' loop autoplay><source src='1.mp3' type='audio/ogg'>Your browser does not support the audio element.</audio>";
    }
    if(a==0)
    {
        alert(document.getElementById('soundtrack'))
        document.getElementById('soundtrack').innerHTML="<audio id='background_audio1' loop autoplay><source src='0.mp3' type='audio/ogg'>Your browser does not support the audio element.</audio>";
    }
}
</script>
<body onload="play()">;
<div id="soundtrack">

</div>
</body> 
```

# java - 在java中明智地读取文件部分的内容

> ID：14394338
> 
> 赞同：0
> 
> 时间：2013-01-18T07:33:36.443
> 
> 标签：java, windows

我想在java中读取任何文件的内容，如doc、pdf、ppt等部分或段落，因为我想检索文件的特定部分（如果有）而不是检索整个文件的内容。请可以有人告诉我，我怎样才能阅读任何文件的内容，无论是部分还是段落…………..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:38:44.243

这完全取决于相关文件的格式。例如，当您有一个`.docx`文件时，您可以使用一些 XML 解析器，然后遍历结果或使用 XPath 查找所有段落、部分或您希望提取的任何内容。

对于其他文件格式，您将不得不找到不同的方法。没有单一的方法可以提取任何文件的特定部分，因为不同的文件类型具有不同的数据存储方式。最有可能的是，您将不得不收集一堆库，每个文件类型一个。

# jmeter - JMeter If-Loop 控制器

> ID：14394341
> 
> 赞同：0
> 
> 时间：2013-01-18T07:33:48.293
> 
> 标签：jmeter

我的测试计划如下所示：

```
Test Plan
  -> Thread Group
      -> Sampler 1
      -> If condn()
      -> Sampler 2
      -> Loop controller
      -> Sampler 3 
```

我希望在执行 Sampler 2 后触发 Loop 控制器。

现在，当我在 Dummy 应用程序上尝试时，这对我来说非常有效。但在实际应用中，Sampler 2 后控件退出。

我已经研究了任何可能的重定向，但仍然没有找到解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:47:50.297

这就是它的工作原理。

检查 jmeter.log 是否有任何错误（或激活日志查看器）并显示循环控制器 GUI 内容。

# image - 如何在 Prolog 动态提供的 HTML 页面中包含图像？

> ID：14394347
> 
> 赞同：6
> 
> 时间：2013-01-18T07:34:21.300
> 
> 标签：image, prolog, swi-prolog, httpserver

如果我已将 Prolog HTTP 服务器绑定到`localhost`端口 9000，如何让 Prolog 为我的图像生成正确的路径？例如，如果我的`.pl`文件和`.jpg`/或`.png`文件位于桌面上，如何让服务器生成如下 HTML 代码：

`<img src="C:\Users\Luka\\Desktop\ImageName.ext"/>`

该`ext`部分代表扩展。我查看了 SWI-Prolog 的文档和[本教程](http://www.pathwayslms.com/swipltuts/html/)，但我发现所有这些抽象路径都非常令人困惑。我在 Web 服务器方面有很多经验，但这有很大不同，我在理解它时遇到了可怕的问题。

这是我的尝试，由我在整个 SWI-Prolog 文档和上述教程中学到的（或者至少我认为我已经掌握的）组成：

```
:- use_module(library(http/thread_httpd)).
:- use_module(library(http/http_dispatch)).
:- use_module(library(http/http_parameters)).
:- use_module(library(http/html_write)).
file_search_path('*', 'C:\\Users\\Luka\\Desktop\\').

server(Port) :-
    http_server(http_dispatch, [port(Port)]).

:- http_handler(root(.), render_base, []).
:- http_handler('/form', process_form, []).

process_form(Request) :-
    http_parameters(Request,
            [name(Name,[atom])]),
            reply_html_page('Posted data: ',['',Name]).

render_base(_Request) :-
    reply_html_page(
        title('Naslov'),
        img([src='/image.png', alt='Incident'])
    ). 
```

再次提前感谢您的巨大耐心。:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T08:30:42.037

确实，解决您的问题并不简单。请仔细阅读[此](http://www.swi-prolog.org/howto/http/HTTPFile.html)“操作方法”页面的第 部分`Serving many 'server support' files`。

这是我测试的代码：

```
http:location(images, root(images), []).
user:file_search_path(icons, '/home/carlo/prolog').
:- http_handler(images(.), serve_files_in_directory(icons), [prefix]). 
```

以及使用该资源的 HTML

```
intro -->
    html([p(ol([li('select a path'),
            li('scan resources from it'),
            li('RDF-ize them'),
            li('browse with foldable SVG')
           ])),
          \sep,
          'png before', img(src='images/swipl.png'), 'png after',
          \sep,
          'jpeg before', img(src='/images/swipl.jpeg'), 'jpeg after'
         ]). 
```

我注意到规范`img(src='images/swipl.png')` *和* `img(src='/images/swipl.jpeg')`工作，这个“功能”有助于模糊界面行为。

这里的输出

![在此处输入图像描述](../Images/ca82ccd80cfc6822bed1fb5f8af05965.png)

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:13:07.337

请记住，prolog 服务器确实是 SERVER，而不是 apache 的插件。这意味着您需要让 prolog 为图像提供服务。当然，让您的 Web 服务器发送静态文件非常方便，因此 Carlo 的示例确实同时提供图像目录和包含它的 html。

# css - 将元素置于彼此下方

> ID：14394348
> 
> 赞同：5
> 
> 时间：2013-01-18T07:34:21.537
> 
> 标签：css, position

我有两个元素要放在彼此旁边，三个元素要放在前两个元素的下方，如下所示：

元素 1 元素 2

元素 3 元素 4 元素 5

这些实际上是文本元素，无论文本有多长，我都希望它们仍然保持在那个位置。如何在不使用的情况下执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T07:39:13.807

使用`<div>`标签创建两个不同的容器。

```
<div>
  Element 1 Element 2
</div>

<div>
  Element 3 Element 4 Element 5
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T07:37:11.893

如果它是`<br>`用于此的文本。像这样写：

```
Element 1 Element 2 <br>Element 3 Element 4 Element 5 
```

& 如果是 HTML 元素。像这样写：

**HTML**

```
<div>element1</div>
<div>element2</div>
<div class="ele3">element3</div>
<div>element4</div>
<div>element4</div> 
```

**CSS**

```
div{
  float:left;
  margin-right:5px;
}
.ele3{
  clear:both;
} 
```

检查这个[http://jsfiddle.net/K9Smv/](http://jsfiddle.net/K9Smv/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T07:53:45.553

```
<div>
    element1
    element2
</div>

<div class="new_line">
    element3
    element4
    element5
</div>

<div class="new_line">
    element6
    element7
    element8
    element9
</div>

div{
  float:left;
  margin-right:5px;
}
.new_line{
  clear:both;
} 
```

# android - JPA、EclipseLink 和 Android

> ID：14394359
> 
> 赞同：2
> 
> 时间：2013-01-18T07:35:09.043
> 
> 标签：android, jpa, persistence, eclipselink

我构建了一个`JAVA`供个人使用的应用程序，它使持久性`JPA`与`EclipseLink`. 我正在为`android`. 我想通过`Dropbox`. 是否有适用于 Android 的 JPA 和 EclipseLink？我还没有找到任何关于此的信息。那里有什么替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:58:45.277

你几乎可以在 android 上运行 pura java 的任何东西（有一些小的例外），但这并不意味着你应该这样做。Hibernate（正在实现 JPA）可以在 android 上运行，但是你的应用程序会太重。您的手机不是重型服务器系统。

我建议将本地序列化为 JSON 的数据存储并通过保管箱交换 JSON 数据文件（但当然我对您的用例一无所知，无法提出更好的建议）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-03T03:56:18.370

EclispeLink 和 Hibernate 等 JPA 实现对于 android 来说太重了。有一些轻量级的 ORM 工具，但它们没有实现 JPA 规范。[Cmobilecom JPA](http://cmobilecom.com)是一种新的轻量级 JPA 实现，适用于 Java 和 Android。它的大小约为 380K。

如果您想将您的 java 应用程序迁移到 android，只需将以下 gradle 依赖项添加到您的项目中：

安卓：

```
dependencies {
    implementation("com.cmobilecom:cmobilecom-jpa-android:${version}@aar") {
        transitive = true
    }

    annotationProcessor "com.cmobilecom:cmobilecom-jpa-processor:$version"
} 
```

您也可以将[Cmobilecom JPA](http://cmobilecom.com)用于 Java 应用程序或服务器端 (JDBC)：

```
dependencies {
    implementation "com.cmobilecom:cmobilecom-jpa-jdbc:$version"

    // annotation processor: generate static metamodel
    compileOnly "com.cmobilecom:cmobilecom-jpa-processor:$version"
} 
```

免责声明：我是[Cmobilecom JPA](http://cmobilecom.com)的开发人员。

# javascript - 为什么我需要使用 2 个功能，而不是只有一个

> ID：14394361
> 
> 赞同：2
> 
> 时间：2013-01-18T07:35:47.207
> 
> 标签：javascript, jquery, ajax, json

我粘贴了所有代码，因为它可能与我要求的功能有关。我有帮助使我的一个功能运行。看`parseJSON()`功能。为什么我必须使用 2 个函数（`parseJSON()`和嵌套`makeNav(navigation)`的），但不仅仅是一个`parseJSON(navigation)`（和 ofc 将内部元素从 makeNav 更改为 parseJSON）。有人可以解释为什么它只对我有用。因为我想了解它，而不仅仅是做我的练习并继续下去。

```
 var new_json;
    $.get('navigation.json', function (json){
        new_json = json;
        parseJSON();

        var reload_page;
        var this_hash = window.location.hash;

        if( this_hash.length == 0 ){
            reload_page = "home";
        }else{
            reload_page = this_hash.replace('#', '');
        };

        loading(reload_page + '.html');
    });

    var cache = {};

    function loading(url){

        if( typeof(cache[url]) == 'undefined' ) {
            console.log( 'cache A does not exists' );

            container.load(url + ' .container>*', function(){

                cache[url] = container.html();          
            });
        }else {
            console.log( 'cache A exists' );

            container.html(cache[url]);
        };
    };

    $('#navigation li a, #logo a').live('click',function(){

        var url = $(this).attr('href');

        window.location.hash = url.replace('.html', '');

        loading(url);

        return false;
    });

    function parseJSON() {

        function makeNav(navigation) {
            var nav_html = '';
            console.log( navigation.length );
            for (var i = 0; i < navigation.length; i++) {
                var name = navigation[i]['name'];
                var href = navigation[i]['href'];
                var submenu = navigation[i]['navigation'];

                nav_html += '<li><a href="' + href + '">' + name + '<span class="ddArrow"></span></a>';     

                if( typeof(submenu) != 'undefined' ){
                    nav_html += '<ul>';
                    nav_html += makeNav(submenu);
                    nav_html += '</ul>';
                }
                nav_html += '</li>';
            }
            return nav_html;
        }
        $('#navigation ul').html(makeNav( new_json['navigation'] ));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:06:06.830

可能的原因是您`parseJSON`做了额外的事情：`$('#navigation ul').html(makeNav( new_json['navigation']));`当您进行递归调用时，`makeNav`您不需要设置此 html 内容。嵌套定义`makeNav`inside的原因`parseJSON`可能是您不希望`makeNav`在范围之外可见，`parseJSON`因为您根本不会在此范围之外使用它，并且您不想污染“环境”。

无论如何，我真的不认为这是实现它的最佳方式......但这应该在[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上讨论。

要使用单个函数，没有嵌套`makeNav`，您可以执行以下操作：

```
var new_json;
$.get('navigation.json', function (json){
    new_json = json;
    parseJSON();

    var reload_page;
    var this_hash = window.location.hash;

    if( this_hash.length == 0 ){
        reload_page = "home";
    }else{
        reload_page = this_hash.replace('#', '');
    };
    loading(reload_page + '.html');
});

var cache = {};

function loading(url){
    if( typeof(cache[url]) == 'undefined' ) {
        console.log( 'cache A does not exists' );
        container.load(url + ' .container>*', function(){
                cache[url] = container.html();          
        });
    }else {
        console.log( 'cache A exists' );
        container.html(cache[url]);
    };
};

$('#navigation li a, #logo a').live('click',function(){
    var url = $(this).attr('href');
    window.location.hash = url.replace('.html', '');
    loading(url);
    return false;
});

function makeNav(navigation) {
    var nav_html = '';
    console.log( navigation.length );
    for (var i = 0; i < navigation.length; i++) {
        var name = navigation[i]['name'];
        var href = navigation[i]['href'];
        var submenu = navigation[i]['navigation'];

        nav_html += '<li><a href="' + href + '">' + name + '<span class="ddArrow"></span></a>';     

        if( typeof(submenu) != 'undefined' ){
            nav_html += '<ul>';
            nav_html += makeNav(submenu);
            nav_html += '</ul>';
        }
        nav_html += '</li>';
    }
    return nav_html;
} 
```

# php - 如何在没有像zend这样的框架的情况下测试php

> ID：14394362
> 
> 赞同：-2
> 
> 时间：2013-01-18T07:35:50.977
> 
> 标签：php, unit-testing, testing, phpunit

我习惯于使用 zend 或 rails 等框架并使用各种测试方法。但是，我无法理解如何在 php 中测试具有以下方法的常规、非基于框架的类：

```
class Example{
    public function add(){}
    public function edit(){}
    public function delete(){}
    public function list(){}
} 
```

我知道你需要一个 testing 或 tests 或 test 文件夹，那部分下来。里面的类会是这样的：

```
class ExampleTest extends PHPUnit_Framework_TestCase{} 
```

如果是这样，功能是什么？和上面一样吗？它会知道使用示例类还是我必须要求它？

当涉及到没有像zend这样的框架或其他东西的测试时，我迷失了......您的帮助表示赞赏。

**注意：**我没有使用任何类型的框架（除了 phpunit），所以将我指向 zend 或 cakephp 不会有帮助。这只是从头开始编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:43:34.973

我不确定这是否是一个答案，但您需要做的就是阅读 PHPUnit 手册：[http ://www.phpunit.de/manual/current/en/](http://www.phpunit.de/manual/current/en/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:47:07.053

我不确定我是否理解您的问题，但我认为您是在询问如何在不使用 zf 等框架时进行测试。恕我直言，这是在学习基础知识之前学习框架的坏处。我认为这是一个错误（遗憾的是，我也犯了这个错误），很多人尝试使用框架但他们对 php 的知识还不够，所以他们做了很多不好的做法（例如：我，现在我试图忘记我刚接触 php 时从框架中学到的东西）所以我的建议是在你完成 php 基础知识时使用框架（这部分不是针对你的问题，只是当我看到时的一个建议“我擅长框架，但没有框架我就失败了”）。

如果我回到您的问题，在这里是的，您需要（需要）示例类，否则您如何创建新的示例对象？不，您的示例类及其方法不应该写在 ExampleTest 文件中，您需要编写函数来测试 Example 对象的方法（它们是否按照我们的预期进行？）。它将失败，然后编写示例类和方法以通过此测试（请参阅：[http](http://www.phpunit.de/manual/current/en/test-driven-development.html) ://www.phpunit.de/manual/current/en/test-driven-development.html ）。您的案例的示例：

```
class ExampleTest extends PHPUnit_Framework_TestCase{
   require_once('../classes/exampe.php');

   protected $object;

   protected function setUp() {
    $this->object = new Example;
    //we will use object to test it.
   }

   function testAddingMustReturnIntegerValue(){ //codes to check is it really integer? }
   function testAddingNegativeValuesForbidden(){ //codes to check when we try to add negatives it shouldn't perform this action }

   //some other thing that we are expecting from add and other methods

} 
```

这是一个非常愚蠢的例子，但我希望你明白我的意思。

ps：我不是母语人士，所以对我的英语感到抱歉。如果我不理解您的问题并且这没有帮助，请告诉我，以便我删除。

# android - 使用 Google Map API V2 查找地图上两点之间的距离

> ID：14394366
> 
> 赞同：70
> 
> 时间：2013-01-18T07:35:56.070
> 
> 标签：android, google-maps-api-2

我在我的android应用程序中使用google map api v2，我能够显示地图并在上面放置标记，但现在我遇到了一个问题，我需要找出两个标记或放置在地图上的点之间的距离，我已经浏览了文档，但在这种情况下没有发现任何帮助。

如果有人知道如何解决这个问题，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-26T07:44:10.280

在`Google Map API V2`你有`LatLng`对象，所以你不能使用`distanceTo`（还）。

然后，您可以使用以下代码，考虑**oldPosition**和**newPosition**是`LatLng`对象：

```
// The computed distance is stored in results[0].
//If results has length 2 or greater, the initial bearing is stored in results[1].
//If results has length 3 or greater, the final bearing is stored in results[2].
float[] results = new float[1];
Location.distanceBetween(oldPosition.latitude, oldPosition.longitude,
                newPosition.latitude, newPosition.longitude, results); 
```

有关该课程的更多*信息，请参阅*[此链接](http://developer.android.com/reference/android/location/Location.html)`Location`

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-01-18T07:39:55.773

您可以使用以下方法，这将为您提供准确的结果

```
public double CalculationByDistance(LatLng StartP, LatLng EndP) {
        int Radius = 6371;// radius of earth in Km
        double lat1 = StartP.latitude;
        double lat2 = EndP.latitude;
        double lon1 = StartP.longitude;
        double lon2 = EndP.longitude;
        double dLat = Math.toRadians(lat2 - lat1);
        double dLon = Math.toRadians(lon2 - lon1);
        double a = Math.sin(dLat / 2) * Math.sin(dLat / 2)
                + Math.cos(Math.toRadians(lat1))
                * Math.cos(Math.toRadians(lat2)) * Math.sin(dLon / 2)
                * Math.sin(dLon / 2);
        double c = 2 * Math.asin(Math.sqrt(a));
        double valueResult = Radius * c;
        double km = valueResult / 1;
        DecimalFormat newFormat = new DecimalFormat("####");
        int kmInDec = Integer.valueOf(newFormat.format(km));
        double meter = valueResult % 1000;
        int meterInDec = Integer.valueOf(newFormat.format(meter));
        Log.i("Radius Value", "" + valueResult + "   KM  " + kmInDec
                + " Meter   " + meterInDec);

        return Radius * c;
    } 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2013-03-12T00:46:28.423

**你应该使用 android 位置**

你可以做：

```
location1.distanceTo(location2); 
```

并且：

```
float[] results = new float[1];
Location.distanceBetween(latLongA.latitude, latLongA.longitude,
                         latLongB.latitude, latLongB.longitude,
                         results); 
```

您将获得 location1 和 location2 之间的距离（以米为单位）。在 latLongA 蚂蚁 latLongB 之间。

使用[位置](http://developer.android.com/reference/android/location/Location.html)。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2016-07-27T11:37:06.317

来晚了，但看到这是谷歌搜索该主题的热门结果之一，我将以另一种方式分享：

使用带有 Google**实用程序类 SphericalUtil的单线器**

```
SphericalUtil.computeDistanceBetween(latLngFrom, latLngTo) 
```

您将需要[实用程序类](https://developers.google.com/maps/documentation/android-api/utility/)。

您可以使用 gradle 简单地将它们包含在您的项目中：

```
implementation 'com.google.maps.android:android-maps-utils:0.5+' 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-10-27T10:11:48.723

所有这些答案都会给你一条直线的距离。如果您需要通过公路获取距离，则必须解析 Google 在调用他的服务后发回给您的 JSON。您可以使用此方法：

```
public String getDistance(final double lat1, final double lon1, final double lat2, final double lon2){
    String parsedDistance;
    String response;
        Thread thread=new Thread(new Runnable() {
            @Override
            public void run() {
                try {

                    URL url = new URL("http://maps.googleapis.com/maps/api/directions/json?origin=" + lat1 + "," + lon1 + "&destination=" + lat2 + "," + lon2 + "&sensor=false&units=metric&mode=driving");
                    final HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                    conn.setRequestMethod("POST");
                    InputStream in = new BufferedInputStream(conn.getInputStream());
                    response = org.apache.commons.io.IOUtils.toString(in, "UTF-8");

                    JSONObject jsonObject = new JSONObject(response);
                    JSONArray array = jsonObject.getJSONArray("routes");
                    JSONObject routes = array.getJSONObject(0);
                    JSONArray legs = routes.getJSONArray("legs");
                    JSONObject steps = legs.getJSONObject(0);
                    JSONObject distance = steps.getJSONObject("distance");
                    parsedDistance=distance.getString("text");

                } catch (ProtocolException e) {
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
    thread.start();
    try {
        thread.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    return parsedDistance;
} 
```

lat1 和 lon1 是原点坐标，lat2 和 lon2 是目的地坐标。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-09-26T07:31:11.253

@salman khan Usman Kurd 的建议是完美的。我发现唯一可以纠正的是“对于谷歌地图 v2，我们使用**LatLng**类。所以下面是可用于谷歌地图 v2 的 Usman Kurd 的代码。我检查了它是否完美。

```
public double CalculationByDistance(LatLng StartP, LatLng EndP) {
        int Radius=6371;//radius of earth in Km         
        double lat1 = StartP.latitude;
        double lat2 = EndP.latitude;
        double lon1 = StartP.longitude;
        double lon2 = EndP.longitude;
        double dLat = Math.toRadians(lat2-lat1);
        double dLon = Math.toRadians(lon2-lon1);
        double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
        Math.sin(dLon/2) * Math.sin(dLon/2);
        double c = 2 * Math.asin(Math.sqrt(a));
        double valueResult= Radius*c;
        double km=valueResult/1;
        DecimalFormat newFormat = new DecimalFormat("####");
        int kmInDec =  Integer.valueOf(newFormat.format(km));
        double meter=valueResult%1000;
        int  meterInDec= Integer.valueOf(newFormat.format(meter));
        Log.i("Radius Value",""+valueResult+"   KM  "+kmInDec+" Meter   "+meterInDec);

        return Radius * c;
     } 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-06-23T08:34:35.303

计算两个地理点之间距离的简单 util 函数：

```
public static long getDistanceMeters(double lat1, double lng1, double lat2, double lng2) {

    double l1 = toRadians(lat1);
    double l2 = toRadians(lat2);
    double g1 = toRadians(lng1);
    double g2 = toRadians(lng2);

    double dist = acos(sin(l1) * sin(l2) + cos(l1) * cos(l2) * cos(g1 - g2));
    if(dist < 0) {
        dist = dist + Math.PI;
    }

    return Math.round(dist * 6378100);
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-11-02T08:30:18.007

```
public class GoogleDirection {

    public final static String MODE_DRIVING = "driving";
    public final static String MODE_WALKING = "walking";
    public final static String MODE_BICYCLING = "bicycling";

    public final static String STATUS_OK = "OK";
    public final static String STATUS_NOT_FOUND = "NOT_FOUND";
    public final static String STATUS_ZERO_RESULTS = "ZERO_RESULTS";
    public final static String STATUS_MAX_WAYPOINTS_EXCEEDED = "MAX_WAYPOINTS_EXCEEDED";
    public final static String STATUS_INVALID_REQUEST = "INVALID_REQUEST";
    public final static String STATUS_OVER_QUERY_LIMIT = "OVER_QUERY_LIMIT";
    public final static String STATUS_REQUEST_DENIED = "REQUEST_DENIED";
    public final static String STATUS_UNKNOWN_ERROR = "UNKNOWN_ERROR";

    public final static int SPEED_VERY_FAST = 1;
    public final static int SPEED_FAST = 2;
    public final static int SPEED_NORMAL = 3;
    public final static int SPEED_SLOW = 4;
    public final static int SPEED_VERY_SLOW = 5;

    private OnDirectionResponseListener mDirectionListener = null;
    private OnAnimateListener mAnimateListener = null;

    private boolean isLogging = false;

    private LatLng animateMarkerPosition = null;
    private LatLng beginPosition = null;
    private LatLng endPosition = null;
    private ArrayList<LatLng> animatePositionList = null;
    private Marker animateMarker = null;
    private Polyline animateLine = null;
    private GoogleMap gm = null;
    private int step = -1;
    private int animateSpeed = -1;
    private int zoom = -1;
    private double animateDistance = -1;
    private double animateCamera = -1;
    private double totalAnimateDistance = 0;
    private boolean cameraLock = false;
    private boolean drawMarker = false;
    private boolean drawLine = false;
    private boolean flatMarker = false;
    private boolean isCameraTilt = false;
    private boolean isCameraZoom = false;
    private boolean isAnimated = false;

    private Context mContext = null;

    public GoogleDirection(Context context) { 
        mContext = context;
    }

    public String request(LatLng start, LatLng end, String mode) {
        final String url = "http://maps.googleapis.com/maps/api/directions/xml?"
                + "origin=" + start.latitude + "," + start.longitude  
                + "&destination=" + end.latitude + "," + end.longitude 
                + "&sensor=false&units=metric&mode=" + mode;

        if(isLogging)
            Log.i("GoogleDirection", "URL : " + url);
        new RequestTask().execute(new String[]{ url });
        return url;
    }

    private class RequestTask extends AsyncTask<String, Void, Document> {
        protected Document doInBackground(String... url) {
            try {
                HttpClient httpClient = new DefaultHttpClient();
                HttpContext localContext = new BasicHttpContext();
                HttpPost httpPost = new HttpPost(url[0]);
                HttpResponse response = httpClient.execute(httpPost, localContext);
                InputStream in = response.getEntity().getContent();
                DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
                return builder.parse(in);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (ParserConfigurationException e) {
                e.printStackTrace();
            } catch (SAXException e) {
                e.printStackTrace();
            } 
            return null;
        }

        protected void onPostExecute(Document doc) {
            super.onPostExecute(doc);
            if(mDirectionListener != null)
                mDirectionListener.onResponse(getStatus(doc), doc, GoogleDirection.this);
        }

        private String getStatus(Document doc) {
            NodeList nl1 = doc.getElementsByTagName("status");
            Node node1 = nl1.item(0);
            if(isLogging)
                Log.i("GoogleDirection", "Status : " + node1.getTextContent());
            return node1.getTextContent();
        }
    }

    public void setLogging(boolean state) {
        isLogging = state;
    }

    public String getStatus(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("status");
        Node node1 = nl1.item(0);
        if(isLogging)
            Log.i("GoogleDirection", "Status : " + node1.getTextContent());
        return node1.getTextContent();
    }

    public String[] getDurationText(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("duration");
        String[] arr_str = new String[nl1.getLength() - 1];
        for(int i = 0 ; i < nl1.getLength() - 1 ; i++) {
            Node node1 = nl1.item(i);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "text"));
            arr_str[i] = node2.getTextContent();
            if(isLogging)
                Log.i("GoogleDirection", "DurationText : " + node2.getTextContent());
        }
        return arr_str;
    }

    public int[] getDurationValue(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("duration");
        int[] arr_int = new int[nl1.getLength() - 1];
        for(int i = 0 ; i < nl1.getLength() - 1 ; i++) {
            Node node1 = nl1.item(i);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "value"));
            arr_int[i] = Integer.parseInt(node2.getTextContent());
            if(isLogging)
                Log.i("GoogleDirection", "Duration : " + node2.getTextContent());
        }
        return arr_int;
    }

    public String getTotalDurationText(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("duration");
        Node node1 = nl1.item(nl1.getLength() - 1);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "text"));
        if(isLogging)
            Log.i("GoogleDirection", "TotalDuration : " + node2.getTextContent());
        return node2.getTextContent();
    }

    public int getTotalDurationValue(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("duration");
        Node node1 = nl1.item(nl1.getLength() - 1);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        if(isLogging)
            Log.i("GoogleDirection", "TotalDuration : " + node2.getTextContent());
        return Integer.parseInt(node2.getTextContent());
    }

    public String[] getDistanceText(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("distance");
        String[] arr_str = new String[nl1.getLength() - 1];
        for(int i = 0 ; i < nl1.getLength() - 1 ; i++) {
            Node node1 = nl1.item(i);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "text"));
            arr_str[i] = node2.getTextContent();
            if(isLogging)
                Log.i("GoogleDirection", "DurationText : " + node2.getTextContent());
        }
        return arr_str;
    }

    public int[] getDistanceValue(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("distance");
        int[] arr_int = new int[nl1.getLength() - 1];
        for(int i = 0 ; i < nl1.getLength() - 1 ; i++) {
            Node node1 = nl1.item(i);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "value"));
            arr_int[i] = Integer.parseInt(node2.getTextContent());
            if(isLogging)
                Log.i("GoogleDirection", "Duration : " + node2.getTextContent());
        }
        return arr_int;
    }

    public String getTotalDistanceText(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("distance");
        Node node1 = nl1.item(nl1.getLength() - 1);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "text"));
        if(isLogging)
            Log.i("GoogleDirection", "TotalDuration : " + node2.getTextContent());
        return node2.getTextContent();
    }

    public int getTotalDistanceValue(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("distance");
        Node node1 = nl1.item(nl1.getLength() - 1);
        NodeList nl2 = node1.getChildNodes();
        Node node2 = nl2.item(getNodeIndex(nl2, "value"));
        if(isLogging)
            Log.i("GoogleDirection", "TotalDuration : " + node2.getTextContent());
        return Integer.parseInt(node2.getTextContent());
    }

    public String getStartAddress(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("start_address");
        Node node1 = nl1.item(0);
        if(isLogging)
            Log.i("GoogleDirection", "StartAddress : " + node1.getTextContent());
        return node1.getTextContent();
    }

    public String getEndAddress(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("end_address");
        Node node1 = nl1.item(0);
        if(isLogging)
            Log.i("GoogleDirection", "StartAddress : " + node1.getTextContent());
        return node1.getTextContent();
    }

    public String getCopyRights(Document doc) {
        NodeList nl1 = doc.getElementsByTagName("copyrights");
        Node node1 = nl1.item(0);
        if(isLogging)
            Log.i("GoogleDirection", "CopyRights : " + node1.getTextContent());
        return node1.getTextContent();
    }

    public ArrayList<LatLng> getDirection(Document doc) {
        NodeList nl1, nl2, nl3;
        ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
        nl1 = doc.getElementsByTagName("step");
        if (nl1.getLength() > 0) {
            for (int i = 0; i < nl1.getLength(); i++) {
                Node node1 = nl1.item(i);
                nl2 = node1.getChildNodes();

                Node locationNode = nl2.item(getNodeIndex(nl2, "start_location"));
                nl3 = locationNode.getChildNodes();
                Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
                double lat = Double.parseDouble(latNode.getTextContent());
                Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                double lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));

                locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
                nl3 = locationNode.getChildNodes();
                latNode = nl3.item(getNodeIndex(nl3, "points"));
                ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
                for(int j = 0 ; j < arr.size() ; j++) {
                    listGeopoints.add(new LatLng(arr.get(j).latitude
                            , arr.get(j).longitude));
                }

                locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
                nl3 = locationNode.getChildNodes();
                latNode = nl3.item(getNodeIndex(nl3, "lat"));
                lat = Double.parseDouble(latNode.getTextContent());
                lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));
            }
        }

        return listGeopoints;
    }

    public ArrayList<LatLng> getSection(Document doc) {
        NodeList nl1, nl2, nl3;
        ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
        nl1 = doc.getElementsByTagName("step");
        if (nl1.getLength() > 0) {
            for (int i = 0; i < nl1.getLength(); i++) {
                Node node1 = nl1.item(i);
                nl2 = node1.getChildNodes();

                Node locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
                nl3 = locationNode.getChildNodes();
                Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
                double lat = Double.parseDouble(latNode.getTextContent());
                Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                double lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));
            }
        }

        return listGeopoints;
    }

    public PolylineOptions getPolyline(Document doc, int width, int color) {
        ArrayList<LatLng> arr_pos = getDirection(doc);
        PolylineOptions rectLine = new PolylineOptions().width(dpToPx(width)).color(color);
        for(int i = 0 ; i < arr_pos.size() ; i++)        
            rectLine.add(arr_pos.get(i));
        return rectLine;
    }

    private int getNodeIndex(NodeList nl, String nodename) {
        for(int i = 0 ; i < nl.getLength() ; i++) {
            if(nl.item(i).getNodeName().equals(nodename))
                return i;
        }
        return -1;
    }

    private ArrayList<LatLng> decodePoly(String encoded) {
        ArrayList<LatLng> poly = new ArrayList<LatLng>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;
        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;
            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            LatLng position = new LatLng((double)lat / 1E5, (double)lng / 1E5);
            poly.add(position);
        }
        return poly;
    }

    private int dpToPx(int dp) {
        DisplayMetrics displayMetrics = mContext.getResources().getDisplayMetrics();
        int px = Math.round(dp * (displayMetrics.xdpi / DisplayMetrics.DENSITY_DEFAULT));       
        return px;
    }

    public void setOnDirectionResponseListener(OnDirectionResponseListener listener) {
        mDirectionListener = listener;
    }

    public void setOnAnimateListener(OnAnimateListener listener) {
        mAnimateListener = listener;
    }

    public interface OnDirectionResponseListener {
        public void onResponse(String status, Document doc, GoogleDirection gd);
    }

    public interface OnAnimateListener {
        public void onFinish();
        public void onStart();
        public void onProgress(int progress, int total);
    }

    public void animateDirection(GoogleMap gm, ArrayList<LatLng> direction, int speed
            , boolean cameraLock, boolean isCameraTilt, boolean isCameraZoom
            , boolean drawMarker, MarkerOptions mo, boolean flatMarker
            , boolean drawLine, PolylineOptions po) {
        if(direction.size() > 1) {
            isAnimated = true;
            animatePositionList = direction;
            animateSpeed = speed;
            this.drawMarker = drawMarker;
            this.drawLine = drawLine;
            this.flatMarker = flatMarker;
            this.isCameraTilt = isCameraTilt;
            this.isCameraZoom = isCameraZoom;
            step = 0;
            this.cameraLock = cameraLock;
            this.gm = gm;

            setCameraUpdateSpeed(speed);

            beginPosition = animatePositionList.get(step);
            endPosition = animatePositionList.get(step + 1);
            animateMarkerPosition = beginPosition;

            if(mAnimateListener != null)
                mAnimateListener.onProgress(step, animatePositionList.size());

            if(cameraLock) {
                float bearing = getBearing(beginPosition, endPosition);
                CameraPosition.Builder cameraBuilder = new CameraPosition.Builder()
                    .target(animateMarkerPosition).bearing(bearing);

                if(isCameraTilt) 
                    cameraBuilder.tilt(90);
                else 
                    cameraBuilder.tilt(gm.getCameraPosition().tilt);

                if(isCameraZoom) 
                    cameraBuilder.zoom(zoom);
                else 
                    cameraBuilder.zoom(gm.getCameraPosition().zoom);

                CameraPosition cameraPosition = cameraBuilder.build();
                gm.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
            }

            if(drawMarker) {
                if(mo != null)
                    animateMarker = gm.addMarker(mo.position(beginPosition));
                else 
                    animateMarker = gm.addMarker(new MarkerOptions().position(beginPosition));

                if(flatMarker) {
                    animateMarker.setFlat(true);

                    float rotation = getBearing(animateMarkerPosition, endPosition) + 180;
                    animateMarker.setRotation(rotation);
                }
            }

            if(drawLine) {
                if(po != null) 
                    animateLine = gm.addPolyline(po.add(beginPosition)
                            .add(beginPosition).add(endPosition)
                            .width(dpToPx((int)po.getWidth())));
                else 
                    animateLine = gm.addPolyline(new PolylineOptions()
                            .width(dpToPx(5)));
            }

            new Handler().postDelayed(r, speed);
            if(mAnimateListener != null)
                mAnimateListener.onStart();
        }
    }

    public void cancelAnimated() {
        isAnimated = false;
    }

    public boolean isAnimated() {
        return isAnimated;
    }

    private Runnable r = new Runnable() {
        public void run() {

            animateMarkerPosition = getNewPosition(animateMarkerPosition, endPosition);

            if(drawMarker)
                animateMarker.setPosition(animateMarkerPosition);

            if(drawLine) {
                List<LatLng> points = animateLine.getPoints();
                points.add(animateMarkerPosition);
                animateLine.setPoints(points);
            }

            if((animateMarkerPosition.latitude == endPosition.latitude 
                    && animateMarkerPosition.longitude == endPosition.longitude)) {
                if(step == animatePositionList.size() - 2) {
                    isAnimated = false;
                    totalAnimateDistance = 0;
                    if(mAnimateListener != null)
                        mAnimateListener.onFinish();
                } else {
                    step++;
                    beginPosition = animatePositionList.get(step);
                    endPosition = animatePositionList.get(step + 1);
                    animateMarkerPosition = beginPosition;

                    if(flatMarker && step + 3 < animatePositionList.size() - 1) {
                        float rotation = getBearing(animateMarkerPosition, animatePositionList.get(step + 3)) + 180;
                        animateMarker.setRotation(rotation);
                    }

                    if(mAnimateListener != null)
                        mAnimateListener.onProgress(step, animatePositionList.size());
                }
            }

            if(cameraLock && (totalAnimateDistance > animateCamera || !isAnimated)) {
                totalAnimateDistance = 0;
                float bearing = getBearing(beginPosition, endPosition);
                CameraPosition.Builder cameraBuilder = new CameraPosition.Builder()
                    .target(animateMarkerPosition).bearing(bearing);

                if(isCameraTilt) 
                    cameraBuilder.tilt(90);
                else 
                    cameraBuilder.tilt(gm.getCameraPosition().tilt);

                if(isCameraZoom) 
                    cameraBuilder.zoom(zoom);
                else 
                    cameraBuilder.zoom(gm.getCameraPosition().zoom);

                CameraPosition cameraPosition = cameraBuilder.build();
                gm.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));

            }

            if(isAnimated) {
                new Handler().postDelayed(r, animateSpeed);
            }
        }
    };

    public Marker getAnimateMarker() {
        return animateMarker;
    }

    public Polyline getAnimatePolyline() {
        return animateLine;
    }

    private LatLng getNewPosition(LatLng begin, LatLng end) {
        double lat = Math.abs(begin.latitude - end.latitude); 
        double lng = Math.abs(begin.longitude - end.longitude);

        double dis = Math.sqrt(Math.pow(lat, 2) + Math.pow(lng, 2));
        if(dis >= animateDistance) {
            double angle = -1;

            if(begin.latitude <= end.latitude && begin.longitude <= end.longitude)
                angle = Math.toDegrees(Math.atan(lng / lat));
            else if(begin.latitude > end.latitude && begin.longitude <= end.longitude)
                angle = (90 - Math.toDegrees(Math.atan(lng / lat))) + 90;
            else if(begin.latitude > end.latitude && begin.longitude > end.longitude)
                angle = Math.toDegrees(Math.atan(lng / lat)) + 180;
            else if(begin.latitude <= end.latitude && begin.longitude > end.longitude)
                angle = (90 - Math.toDegrees(Math.atan(lng / lat))) + 270;

            double x = Math.cos(Math.toRadians(angle)) * animateDistance;
            double y = Math.sin(Math.toRadians(angle)) * animateDistance;
            totalAnimateDistance += animateDistance;
            double finalLat = begin.latitude + x;
            double finalLng = begin.longitude + y;

            return new LatLng(finalLat, finalLng);
        } else {
            return end;
        }
    }

    private float getBearing(LatLng begin, LatLng end) {
        double lat = Math.abs(begin.latitude - end.latitude); 
        double lng = Math.abs(begin.longitude - end.longitude);
         if(begin.latitude < end.latitude && begin.longitude < end.longitude)
            return (float)(Math.toDegrees(Math.atan(lng / lat)));
        else if(begin.latitude >= end.latitude && begin.longitude < end.longitude)
            return (float)((90 - Math.toDegrees(Math.atan(lng / lat))) + 90);
        else if(begin.latitude >= end.latitude && begin.longitude >= end.longitude)
            return  (float)(Math.toDegrees(Math.atan(lng / lat)) + 180);
        else if(begin.latitude < end.latitude && begin.longitude >= end.longitude)
            return (float)((90 - Math.toDegrees(Math.atan(lng / lat))) + 270);
         return -1;
    }

    public void setCameraUpdateSpeed(int speed) {       
        if(speed == SPEED_VERY_SLOW) {
            animateDistance = 0.000005;
            animateSpeed = 20;
            animateCamera = 0.0004;
            zoom = 19;
        } else if(speed == SPEED_SLOW) {
            animateDistance = 0.00001;
            animateSpeed = 20;
            animateCamera = 0.0008;
            zoom = 18;
        } else if(speed == SPEED_NORMAL) {
            animateDistance = 0.00005;
            animateSpeed = 20;
            animateCamera = 0.002;
            zoom = 16;
        } else if(speed == SPEED_FAST) {
            animateDistance = 0.0001;
            animateSpeed = 20;
            animateCamera = 0.004;
            zoom = 15;
        } else if(speed == SPEED_VERY_FAST) {
            animateDistance = 0.0005;
            animateSpeed = 20;
            animateCamera = 0.004;
            zoom = 13;
        } else {
            animateDistance = 0.00005;
            animateSpeed = 20;
            animateCamera = 0.002;
            zoom = 16;
        }
    }
} 
```

//主要活动

```
public class MapActivity extends ActionBarActivity {

    GoogleMap map = null;
    GoogleDirection gd;

    LatLng start,end;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        start = new LatLng(13.744246499553903, 100.53428772836924);
        end = new LatLng(13.751279688694071, 100.54316081106663);

        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
        map.animateCamera(CameraUpdateFactory.newLatLngZoom(start, 15));

        gd = new GoogleDirection(this);
        gd.setOnDirectionResponseListener(new GoogleDirection.OnDirectionResponseListener() {
            public void onResponse(String status, Document doc, GoogleDirection gd) {
                Toast.makeText(getApplicationContext(), status, Toast.LENGTH_SHORT).show();

                gd.animateDirection(map, gd.getDirection(doc), GoogleDirection.SPEED_FAST
                        , true, true, true, false, null, false, true, new PolylineOptions().width(8).color(Color.RED));

                map.addMarker(new MarkerOptions().position(start)
                        .icon(BitmapDescriptorFactory.fromResource(R.drawable.markera)));

                map.addMarker(new MarkerOptions().position(end)
                        .icon(BitmapDescriptorFactory.fromResource(R.drawable.markerb)));

                String TotalDistance = gd.getTotalDistanceText(doc);
                String TotalDuration = gd.getTotalDurationText(doc);
            }
        });

        gd.request(start, end, GoogleDirection.MODE_DRIVING);
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-10-04T06:53:00.503

尝试这个

```
double distance;
Location locationA = new Location("");
locationA.setLatitude(main_Latitude);
locationA.setLongitude(main_Longitude);
Location locationB = new Location("");
locationB.setLatitude(sub_Latitude);
locationB.setLongitude(sub_Longitude);
distance = locationA.distanceTo(locationB)/1000;
kmeter.setText(String.valueOf(distance));
Toast.makeText(getApplicationContext(), ""+distance, Toast.LENGTH_LONG).show();double distance; 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-01-18T10:22:55.927

**[使用Haversine公式](http://en.wikipedia.org/wiki/Haversine_formula)**可以找到两个地理坐标之间的距离。在我们的例子中，这个公式对于计算球体（即地球）中的距离是有效的。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-05-25T07:32:16.490

**这是用于持续时间和测距的简单而完美的代码**

*   第 1 步；（添加此内容并在您的 gradle 中同步）

    ```
     implementation 'com.android.volley:volley:1.0.0' 
    ```

*   第2步：（在您的触发方法中写下）

    ```
     public void clicked(View view) throws JSONException {  

          JSONObject locationJsonObject = new JSONObject();
                 locationJsonObject.put("origin", "54.406505,18.67708");
                 locationJsonObject.put("destination", "54.446251,18.570993");
                 LatlngCalc(locationJsonObject);
     } 
    ```

*   第 3 步：（复制并粘贴到您的班级）

    ```
     private void LatlngCalc(JSONObject locationJsonObject) throws JSONException {

         RequestQueue queue = Volley.newRequestQueue(MainActivity.this);
         String url = "https://maps.googleapis.com/maps/api/distancematrix/" +
                     "json?origins=" + locationJsonObject.getString("origin") + "&destinations=" + locationJsonObject.getString("destination") + "&mode=driving&" +
                     "language=en-EN&sensor=false" + "&key=" + /*Insert Your API Key Here */;

         StringRequest stringRequest = new StringRequest(Request.Method.GET, url,
                 new Response.Listener<String>() {
                     @Override
                     public void onResponse(String response) {

                         mTextView.setText("Response is: " + response.substring(0, 500));
                     }
                 }, new Response.ErrorListener() {
             @Override
             public void onErrorResponse(VolleyError error) {
                 mTextView.setText("That didn't work!");
             }
         });
         queue.add(stringRequest);  
     } 
    ```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-12-13T12:32:49.843

你可以使用这个功能。我在我的项目中使用过它。

```
public String getDistance(LatLng my_latlong, LatLng frnd_latlong) {
    Location l1 = new Location("One");
    l1.setLatitude(my_latlong.latitude);
    l1.setLongitude(my_latlong.longitude);

    Location l2 = new Location("Two");
    l2.setLatitude(frnd_latlong.latitude);
    l2.setLongitude(frnd_latlong.longitude);

    float distance = l1.distanceTo(l2);
    String dist = distance + " M";

    if (distance > 1000.0f) {
        distance = distance / 1000.0f;
        dist = distance + " KM";
    }
    return dist;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-05-19T17:20:40.627

这是一个老问题，有老答案。我想强调一种计算两点之间距离的更新方法。现在我们应该熟悉实用程序类“SphericalUtil”。您可以使用它来检索距离。

```
double distance = SphericalUtil.computeDistanceBetween(origin, dest); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-12-01T06:29:38.820

要获得两点之间的距离，请尝试此代码..

```
public static float GetDistanceFromCurrentPosition(double lat1,double lng1, double lat2, double lng2)
 {
        double earthRadius = 3958.75;

        double dLat = Math.toRadians(lat2 - lat1);

        double dLng = Math.toRadians(lng2 - lng1);

        double a = Math.sin(dLat / 2) * Math.sin(dLat / 2)
                + Math.cos(Math.toRadians(lat1))
                * Math.cos(Math.toRadians(lat2)) * Math.sin(dLng / 2)
                * Math.sin(dLng / 2);

        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

        double dist = earthRadius * c;

        int meterConversion = 1609;

        return new Float(dist * meterConversion).floatValue();

    } 
```

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2016-05-05T04:27:15.237

在 android 谷歌地图应用程序中，有一种非常简单的方法可以找到 2 个位置之间的距离，请按照以下简单步骤进行操作：

1.  当您第一次打开应用程序时，从左上角的下拉菜单转到“您的时间线”。

2.  一旦新的windwo打开，从右上角菜单的设置中选择，然后选择“添加位置”。

3.  添加您的地点并将它们命名为 lilke point 1 、 point 2 或任何容易记住的名称。
4.  添加并标记您的地点后，返回到您的谷歌应用程序的主窗口。
5.  单击右下角带有箭头的蓝色圆圈。
6.  将打开一个新的windwo，您可以在顶部看到两个文本字段，您可以在其中添加“从位置”和“距离位置”。
7.  单击任何文本字段并在第 3 点中输入您保存的位置。
8.  单击另一个文本字段并添加您的下一个保存位置。
9.  通过这样做，谷歌地图将计算两个位置之间的距离，并在地图上显示蓝色路径..

祝你好运

# wcf - 更新 Biztalk 2010 中的 WCF 服务参考

> ID：14394368
> 
> 赞同：0
> 
> 时间：2013-01-18T07:36:00.570
> 
> 标签：wcf, reference, biztalk

我通过“添加生成的项目”在 biztalk 解决方案中使用了 WCF 服务。然后我建立了一个安静而冗长的管弦乐。现在我必须更新服务（添加另一种方法）。如何更新项目中该服务的引用。有没有直接的方法或者我必须删除所有文件并从零开始做所有事情？（我正在使用 biztalk 服务器 2010。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:00:53.103

没有这样的方法来更新通过“添加生成的项目”向导使用的服务引用。一种可能性是在项目中创建一个单独的文件夹并在该文件夹中再次添加引用。

# android - 尝试从服务器获取响应时在android中获取连接超时异常

> ID：14394373
> 
> 赞同：1
> 
> 时间：2013-01-18T07:36:34.220
> 
> 标签：android, connection, connection-timeout

我开发了一个 android 应用程序，它连接到服务器并使用 url 从服务器访问 xml。我正在使用 HttpUrlConncetion 进行连接。我已经在一个 jar 文件中编写了这个连接代码，我的应用程序正在使用这个 jar 连接到服务器。当我使用模拟器时，这个应用程序工作正常，但是当我在我的手机上安装这个应用程序时，它会抛出异常。

我在清单文件中添加了互联网权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

例外是

```
Connection timed out 
org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:388)
org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:236)
org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:470)
java.net.Socket.connect(Socket.java:1055)
org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>           (HttpConnection.java:106)
org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>   (HttpConnection.java:79)org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:353)org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:120)org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection
(HttpURLConnectionImpl.java:316)org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection

(HttpURLConnectionImpl.java:298)
org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect

(HttpURLConnectionImpl.java:236)
com.tracking.jar.XmlDownLoader.openConnection(XmlDownLoader.java:46)
com.tracking.jar.XmlDownLoader.downLoadXml(XmlDownLoader.java:18)
com.tracking.jar.BusDetails.getProviderRouteBeanList

(BusDetails.java:179)
com.vehicletracking.GetProviderRouteBeanListAsyncTask.doInBackground

(GetProviderRouteBeanListAsyncTask.java:17)
com.vehicletracking.GetProviderRouteBeanListAsyncTask.doInBackground

(GetProviderRouteBeanListAsyncTask.java:1)
android.os.AsyncTask$2.call(AsyncTask.java:216)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:337)
java.util.concurrent.FutureTask.run(FutureTask.java:169)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1119)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:612)
java.lang.Thread.run(Thread.java:1052) 
```

我的手机已植根，我安装了应用程序呼叫拦截器应用程序，可阻止来电和去电。

我的连接代码是：

```
public String downLoadXml(String urlString) throws Exception{
    urlString = urlString.replace(" ", "%20");
    String xfStr = "";
    HttpURLConnection httpConn = null;
    try{
        httpConn = openConnection(urlString);
        InputStream in = httpConn.getInputStream();
        InputStreamReader isr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(isr);
        String str =null;

        while((str = br.readLine())!= null){
            xfStr = xfStr + str;
        }
    }catch(Exception e){
        throw e;
    }
    finally{
        if(httpConn!=null){
            httpConn.disconnect();
        }
    }
    return xfStr;
}

private HttpURLConnection openConnection(String urlString) throws IOException{
    URL url  = new URL(urlString);
    HttpURLConnection httpConn = null;
    httpConn = (HttpURLConnection) url.openConnection();
    httpConn.setAllowUserInteraction(false);
    httpConn.setInstanceFollowRedirects(false);
    httpConn.setRequestMethod("GET");
    httpConn.setConnectTimeout(60000);
    httpConn.connect();
    return httpConn;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T05:32:20.263

天才试试这个

```
try {
                HttpParams httpParams = new BasicHttpParams();
                int timeoutConnection = 3000;
                int socketTimeoutConnection = 5000;
                HttpConnectionParams.setConnectionTimeout(httpParams,
                        timeoutConnection);
                HttpConnectionParams.setSoTimeout(httpParams,
                        socketTimeoutConnection);
                DefaultHttpClient client = new DefaultHttpClient();
                client.setParams(httpParams);
                HttpGet httpGet = new HttpGet(postedScholarshipUrl);
                HttpResponse httpResponse = client.execute(httpGet);
                StatusLine statusLine = httpResponse.getStatusLine();
                 int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {
                    ResponseHandler<String> response = new BasicResponseHandler();
                    serverStr = client.execute(httpGet, response);
                    int myArray = new JSONArray(serverStr);
                    arrayLength = myArray.length();
                } else {
                    showDialog(connectionDown);
                }

            } catch (SocketTimeoutException bug) {
                Toast.makeText(getApplicationContext(), "Socket Timeout", Toast.LENGTH_LONG).show();
            } catch (ConnectTimeoutException bug) {
                Toast.makeText(getApplicationContext(), "Connection Timeout", Toast.LENGTH_LONG).show();
            } catch (Exception bug) {
                bug.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T07:41:17.540

确保手机已连接互联网。

您应该在执行 HTTP 请求之前检查网络连接。在 try catch 块中编写此代码。

# installation - 如何在 WelcomeDlg 之前插入自定义对话框？

> ID：14394374
> 
> 赞同：1
> 
> 时间：2013-01-18T07:36:37.323
> 
> 标签：installation, wix, windows-installer, package

我想让用户在启动 WiX 中的欢迎对话框之前选择语言，以便安装程序可以为每种语言安装不同的功能。

到目前为止，我已经创建了自己的包含 ComboBox 的自定义对话框，我知道如何在任何其他对话框之间插入自定义对话框，但我不知道如何在 WelcomeDlg 之前插入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:19:58.023

我还没有这样做，但我相信它很容易做到：

在 WelcomeDlg 的底部，您应该会看到：

```
 <InstallUISequence>
    <Show Dialog="WelcomeDlg" After="CostFinalize" Overridable="yes">NOT Installed OR PATCH</Show>
  </InstallUISequence> 
```

这允许您覆盖对话序列。安排您的自定义对话框`CostFinalize`在 WelcomeDlg 之后和之前运行。我没有对此进行测试，但应该很容易完成。

```
 <InstallUISequence>
    <Show Dialog="CustomDlg" After="CostFinalize">NOT Installed OR PATCH</Show>
    <Show Dialog="CustomDlg" Before="WelcomeDlg">NOT Installed OR PATCH</Show>
  </InstallUISequence> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T13:22:57.137

尝试使用 Sequence 属性：

```
<InstallUISequence>
    <Show Dialog="SplashDlg" Sequence="1" >NOT Installed OR PATCH</Show>
</InstallUISequence> 
```

# python - 如何获得重写的 render_to_response 以在 django 中获得对整个项目的更改最少的 json

> ID：14394376
> 
> 赞同：0
> 
> 时间：2013-01-18T07:36:42.787
> 
> 标签：python, django

我现在接到一个任务，那就是基于一个 web 项目在手机上开发一个原生应用程序。所以我认为服务器和客户端之间通信的最佳方式是使用 json。

然后我需要所有的响应给我一个 json 格式的结果。但是现在在 web 项目中，几乎每个视图都使用`render_to_response`如下：

```
ctxt = RequestContext(request,*args)
return render_to_response('XXX.html',ctxt) 
```

然后我想重写render_to_response，如下所示，所以我不需要将每个都更改为一个新函数：

```
def render_to_response:
  return new HttpResponse(simplejson.dumps(*args), mimetype='text/json')) 
```

显然，我可以在 django 中更改源代码，但这不是一个切实可行的方法。因为其他项目也需要使用它。

或者我可以用这个`render_to_response`函数写一个新模块，然后导入这个

```
from django.shortcuts import render_to_response 
```

但我不确定这是否可能。

如果这可行，我还需要将此导入添加到每个`.py`文件中，这仍然是一项巨大的工作。

所以我想要一个对整个项目改动最少的最好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:50:17.060

尝试用`return`这个替换你的

```
return HttpResponse(json.dumps(ctxt), content_type="application/json") 
```

另一方面，如果请求它的客户端不需要它，您实际上不需要返回上下文。您最好返回一条简单的消息，例如“成功”

另一个解决方案是包含`django-annoying`在您的项目中，并在`@ajax_request` 您想要以 json 响应的所有视图上使用装饰器。

```
@ajax_request
def my_view(request):
    news = News.objects.all()
    news_titles = [entry.title for entry in news]
    return {'news_titles': news_titles} 
```

在此处参考示例 - [https://bitbucket.org/offline/django-annoying/wiki/Home](https://bitbucket.org/offline/django-annoying/wiki/Home)

# php - PHP - PayPal 集成，在接受付款后无法运行我的自定义交易功能

> ID：14394380
> 
> 赞同：0
> 
> 时间：2013-01-18T07:37:04.367
> 
> 标签：php, paypal

我过去曾尝试使用教程脚本进行 PayPal 付款，并且效果很好。现在没有了。脚本很简单，我只需要这一页来处理付款：

```
<?php
  session_start();
  include ('mydbconfig.php');

  // payPal settings
  $paypal_email = 'seller@yahoo.com';
  $return_url = 'https://www.mytestsite.com/paypal-thanks.php';
  $cancel_url = 'https://www.mytestsite.com/paypal-cancel.php';
  $notify_url = 'https://www.mytestsite.com/paypal-notify.php';

  $item_name = $_POST['item_name'];
  $item_amount = $_POST['item_amount']; //price

  // check if paypal request or response
  if (!isset($_POST["txn_id"]) && !isset($_POST["txn_type"])){
    // firstly append paypal account to querystring
    $querystring .= "?business=".urlencode($paypal_email)."&";

    // append amount& currency (£) to quersytring so it cannot be edited in html

    //the item name and amount can be brought in dynamically by querying the $_POST['item_number'] variable.
    $querystring .= "item_name=".urlencode($item_name)."&";
    $querystring .= "amount=".urlencode($item_amount)."&";

    //loop for posted values and append to querystring
    foreach($_POST as $key => $value) {
      $value = urlencode(stripslashes($value));
      $querystring .= "$key=$value&";
    }

    // Append paypal return addresses
    $querystring .= "return=".urlencode(stripslashes($return_url))."&";
    $querystring .= "cancel_return=".urlencode(stripslashes($cancel_url))."&";
    $querystring .= "notify_url=".urlencode($notify_url);

    // Append querystring with custom field
    //$querystring .= "&custom=".USERID;

    // Redirect to paypal IPN
    header('location:https://www.paypal.com/cgi-bin/webscr'.$querystring);
    exit();

  } else { // response from Paypal

    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    foreach ($_POST as $key => $value) {
      $value = urlencode(stripslashes($value));
      $value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}',$value);// IPN fix
      $req .= "&$key=$value";
    }

    // assign posted variables to local variables
    $data['item_name'] = $_POST['item_name'];
    $data['item_number'] = $_POST['item_number'];
    $data['payment_status'] = $_POST['payment_status'];
    $data['payment_amount'] = $_POST['mc_gross'];
    $data['payment_currency'] = $_POST['mc_currency'];
    $data['txn_id'] = $_POST['txn_id'];
    $data['receiver_email'] = $_POST['receiver_email'];
    $data['payer_email'] = $_POST['payer_email'];
    $data['custom'] = $_POST['custom'];

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

    if (!$fp) {
      // HTTP ERROR
      header('location: https://www.mytestsite.com/paypal-error.php?tr='.$data['txn_id'].'&in='.$data['item_name'].'&pe='.$data['payer_email'].'&pa='.$data['payment_amount'].'&ps='.$data['payment_status']);

    } else {
      fputs ($fp, $header . $req);
      while (!feof($fp)) {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0) {
          //payment accepted, insert transaction to my database
          //function to insert transaction here

        } else if (strcmp ($res, "INVALID") == 0) {
          //something to do if failed

        }
      }
      fclose ($fp);
    }
  }
?> 
```

该过程完成后，我检查并支付成功，但我的函数或我在*//function to insert transaction here*中编写的任何内容都不会执行。最后，我被迫在 paypal-thanks.php 页面上执行该功能。剧本有问题吗？

此脚本是否可用于发送多个采购项目？我的购物车是我自己定制的，我只想将商品名称、编号和价格详细信息以及总价发送到 PayPal 订单摘要。

我在这里查看了其他 PayPal 集成问题，其中大多数将我引导至令人困惑的 PayPal 教程、文档或集成向导。我之前使用过这个简单的脚本，因为我不懂 PayPal 文档（以及示例代码，它甚至没有让我知道从哪里开始）:(

最后我的最终问题是，这个脚本是进行支付交易的正确和安全的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:25:17.700

用这个

```
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30); 
```

代替

```
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 
```

我认为最好使用 CURL 而不是套接字

# java - 无法在 JWindow 内的 JPanel 内编辑 JTextField 的文本

> ID：14394384
> 
> 赞同：4
> 
> 时间：2013-01-18T07:37:22.910
> 
> 标签：java, swing, jtextfield, jwindow

![在此处输入图像描述](../Images/4b040e58209588732397f575c72518ce.png)

这是我之前的问题的延续，我问如何在系统托盘中放置一些东西。
在社区的一些帮助下，我可以做到这一点。但是我无法做的是`JTextField`更改`JWindow`.

有`JWindow`一个`JPanel`，一切都放在里面，`JPanel`包括**Remind Mt At**。但是，我无法在其中输入任何内容。 正确接收事件，因为它应该在鼠标进入时为白色，并在鼠标退出时返回默认颜色。 `JTextField`**`setEditable(true)`
`JTextField`**

 **有什么解决方法吗？

* * *

## SSCCE

```
package demo;

import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.InputStream;

import javax.imageio.ImageIO;
import javax.sound.sampled.*;
import javax.swing.*;
import javax.swing.border.BevelBorder;

import example.Kernel32;

public class SSCCE {
    JPopupMenu popup = new JPopupMenu();
    JMenuItem exit = new JMenuItem("Exit");

    JWindow window = new JWindow();
    JPanel panel = new JPanel();
    int remindMeAt = 55;
    Kernel32.SYSTEM_POWER_STATUS batteryStatus = new Kernel32.SYSTEM_POWER_STATUS();

    Clip buzzer;
    AudioInputStream in;

    JLabel ACLineStatus = new JLabel();
    JLabel batteryCharge = new JLabel();
    JTextField enterReminder = new JTextField(3);
    Color defaultColor;

    String onACPower;
    String charge;
    String status;

    boolean keepLooping = true;

    boolean doRemind = true;
    boolean isCharging;
    boolean aboveThreshold;
    boolean remindedOnce = false;
//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new SSCCE();
    }
//------------------------------------------------------------------------------
    public SSCCE(){
        if(SystemTray.isSupported()){
            setupGUI();
        }
    }
//------------------------------------------------------------------------------
    public void setupGUI(){
        try{
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            InputStream in = BatteryBeeperSystemTray.class.
                    getResourceAsStream("/images/battery_smaller.png");
            TrayIcon t = new TrayIcon(ImageIO.read(in));
            t.setToolTip("BatteryBeeper");
            SystemTray.getSystemTray().add(t);

        }catch(Exception e){

        }

        panel.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        defaultColor = window.getBackground();

        Kernel32.INSTANCE.GetSystemPowerStatus(batteryStatus);
        onACPower = batteryStatus.getACLineStatusString();
        charge = batteryStatus.getBatteryLifePercent();

        if(onACPower.equalsIgnoreCase("offline")){
            onACPower = "Battery";
        }else{
            onACPower = "AC Power";
            charge = "---";
        }

        ACLineStatus.setText(onACPower);
        ACLineStatus.setPreferredSize(new Dimension(150,40));
        ACLineStatus.setBorder(BorderFactory.createTitledBorder("Operating On"));

        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 7;
        gbc.gridheight = 1;
        gbc.fill = GridBagConstraints.BOTH;
        panel.add(ACLineStatus,gbc);

        batteryCharge.setText(charge);
        batteryCharge.setBorder(BorderFactory.createTitledBorder("Current " +
                "Charge"));
        gbc.gridy++;
        panel.add(batteryCharge,gbc);
        panel.setBorder(BorderFactory.createBevelBorder(BevelBorder.RAISED));

        gbc.gridy++;
        enterReminder.setEditable(true);
        enterReminder.requestFocusInWindow();
        enterReminder.setText(Integer.toString(remindMeAt));
        enterReminder.addMouseListener(new TextHandler());
        enterReminder.setBackground(window.getBackground());
        enterReminder.setBorder(BorderFactory.createTitledBorder("Remind Me" +
                " At"));
        panel.add(enterReminder,gbc);

        window.add(panel);
        window.pack();
        window.setLocationRelativeTo(null);
        window.setVisible(true);

    }
//------------------------------------------------------------------------------
    public void checkIfReminderChanged(){
        //TODO DEFINE
    }   

//------------------------------------------------------------------------------
    public class TextHandler extends MouseAdapter{
        @Override
        public void mouseEntered(MouseEvent e){
            enterReminder.setBackground(Color.WHITE);
        }
//------------------------------------------------------------------------------
        @Override
        public void mouseExited(MouseEvent e){
            enterReminder.setBackground(defaultColor);
            checkIfReminderChanged();
        }
    }
//------------------------------------------------------------------------------
} 
```

* * *

## 你还需要什么

```
package example;

import com.sun.jna.Native;
import com.sun.jna.Structure;
import com.sun.jna.win32.StdCallLibrary;
import java.util.*;

public interface Kernel32 extends StdCallLibrary {

    public Kernel32 INSTANCE = (Kernel32) Native.loadLibrary("Kernel32", Kernel32.class);

    /**
     * @see http://msdn2.microsoft.com/en-us/library/aa373232.aspx
     */
    public class SYSTEM_POWER_STATUS extends Structure {
        public byte ACLineStatus;
        public byte BatteryFlag;
        public byte BatteryLifePercent;
        public byte Reserved1;
        public int BatteryLifeTime;
        public int BatteryFullLifeTime;

        @Override
        protected List<String> getFieldOrder() {
            ArrayList<String> fields = new ArrayList<String>();
            fields.add("ACLineStatus");
            fields.add("BatteryFlag");
            fields.add("BatteryFullLifeTime");
            fields.add("BatteryLifePercent");
            fields.add("BatteryLifeTime");
            fields.add("Reserved1");
            return fields;
        }

        /**
         * The AC power status
         */
        public String getACLineStatusString() {
            switch (ACLineStatus) {
                case (0): return "Offline";
                case (1): return "Online";
                default: return "Unknown";
            }
        }

        /**
         * The battery charge status
         */
        public String getBatteryFlagString() {
            switch (BatteryFlag) {
                case (1): return "High, more than 66 percent";
                case (2): return "Low, less than 33 percent";
                case (4): return "Critical, less than five percent";
                case (8): return "Charging";
                case ((byte) 128): return "No system battery";
                default: return "Unknown";
            }
        }

        /**
         * The percentage of full battery charge remaining
         */
        public String getBatteryLifePercent() {
            return (BatteryLifePercent == (byte) 255) ? "Unknown" : BatteryLifePercent + "%";
        }

        /**
         * The number of seconds of battery life remaining
         */
        public String getBatteryLifeTime() {
            return (BatteryLifeTime == -1) ? "Unknown" : BatteryLifeTime + " seconds";
        }

        /**
         * The number of seconds of battery life when at full charge
         */
        public String getBatteryFullLifeTime() {
            return (BatteryFullLifeTime == -1) ? "Unknown" : BatteryFullLifeTime + " seconds";
        }

        @Override
        public String toString() {
            StringBuilder sb = new StringBuilder();
            sb.append("ACLineStatus: " + getACLineStatusString() + "\n");
            sb.append("Battery Flag: " + getBatteryFlagString() + "\n");
            sb.append("Battery Life: " + getBatteryLifePercent() + "\n");
            sb.append("Battery Left: " + getBatteryLifeTime() + "\n");
            sb.append("Battery Full: " + getBatteryFullLifeTime() + "\n");
            return sb.toString();
        }
    }

    public int GetSystemPowerStatus(SYSTEM_POWER_STATUS result);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:39:19.747

[规范](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#isFocusableWindow%28%29)说明`isFocusableWindow()`如下（我添加了编号以概述要点）：

> 公共最终布尔值***isFocusableWindow()***
> 
> 返回此 Window 是否可以成为焦点窗口，即此 Window 或其任何子组件是否可以成为焦点所有者。要使 Frame 或 Dialog 可聚焦，其可聚焦窗口状态必须设置为 true。**对于不是 Frame 或 Dialog 的 Window 可聚焦，**
> 
> i)**它的可聚焦窗口状态必须设置为真，**
> 
> ii)**必须在屏幕上显示其最近的所属框架或对话框，**
> 
> iii)**并且它必须在其焦点遍历循环中包含至少一个组件。**
> 
> ***如果不满足这些条件中的任何一个，则此 Window 及其任何子组件都不能成为焦点所有者。***

如您所见，您的代码不符合第二条规则，因此您的代码`JWindow`不可聚焦。你需要在屏幕上有一个`JDialog`或`JFrame`可见的，然后你可以用一个包裹它`JWindow`：

```
new JWindow(frame); 
```

或者您可以使用`JDialog`or`JFrame`直接代替`JWindow`. 如果您不想装饰窗户，只需调用[`Frame.setUndecorated(true)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setUndecorated%28boolean%29)或[`Dialog.setUndecorated(true)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.html#setUndecorated%28boolean%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:28:33.063

像这样创建 JWindow

```
JWindow window = new JWindow(new JFrame(){public boolean isShowing(){return true;}}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T07:51:46.703

我不是专家，但代码看起来不错。我唯一的建议是使用另一个类似于`JTextField`.

尝试使用 a`JTextArea`代替。其他组件，例如`JTextField`和`JTextPane`也可以是选项。它们都存在于`javax.swing`库中，使用它`import javax.swing.*`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T07:57:25.053

设置“setEditable(true)”是没有用的，因为在 JTextField 中默认 setEditable 为 true。“requestFocusInWindow()”在您的代码中做了什么。我怀疑那里的问题..不太确定...**

# excel - datagrid作为c#中的excel编辑器

> ID：14394387
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:37:31.193
> 
> 标签：excel, c#-4.0, datagridview, openxml

我需要在 C# win 表单数据网格中显示来自 excel 文档的数据。添加excel的公式功能并应用于datagrid值。将数据网格值保存到 excel 值时，保存与包含公式的 excel 文件相同。

任何人都可以帮助我如何做到这一点。

是否可以通过 OpenXml 或 OleDB 实现，因为我不想依赖在客户端安装 MS Office。

提前致谢。

夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:49:50.950

你的这个要求听起来像是一个项目本身！但我相信这可以让你开始[http://www.codeproject.com/Articles/17853/Implementing-an-Excel-like-formula-engine](http://www.codeproject.com/Articles/17853/Implementing-an-Excel-like-formula-engine)

# ant - 蚂蚁退出目标后避免打印构建成功

> ID：14394390
> 
> 赞同：1
> 
> 时间：2013-01-18T07:37:47.837
> 
> 标签：ant

我有一个 ant 脚本，它从另一个脚本调用目标。当这个目标完全执行时，第二个脚本退出并显示“构建成功”消息，这对用户来说有点混乱。我不希望第二个 ant 脚本在其退出时回显“构建成功”。我的代码是

```
<target name="startRemoteJboss" description="Starts Remote Instance of Jboss">
        <echo message="starting Remote Jboss" />
        <sshexec output="remoteJboss.txt" trust="true" host="${jboss.remote.host}" username="${jboss.remote.username}" password="${jboss.remote.password}" command="ant -f build.xml startJboss" port="${jboss.remote.port}" failonerror="no"/>
    </target> 
```

第二个构建文件目标看起来像

```
<target name="startJboss" description="Starts Jboss">
        <echo message="starting Jboss" />
        <exec executable="${jboss.home}/bin/run.sh" spawn="true">
            <arg line="-b 0.0.0.0 -c default" />
        </exec>
        <sleep seconds="150" />
        <echo message="Jboss is UP" />
    </target> 
```

当 startJboss 完成执行时，我希望它不打印“构建成功”

```
[sshexec] BUILD SUCCESSFUL
  [sshexec] Total time: 10 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:49:54.657

由于您将输出捕获到文件（<sshexec output="remoteJboss.txt" ...），那么您应该能够从中删除这些行，例如：

```
<concat>
    <fileset dir="." includes="remoteJboss.txt" />
    <filterchain>
        <linecontains negate="true">
           <contains value="[sshexec] BUILD SUCCESSFUL"/>
        </linecontains>
        <linecontains negate="true">
           <contains value="[sshexec] Total time:"/>
        </linecontains>
    </filterchain>
</concat> 
```

要打印输出给用户（假设您已经在使用 concat），或者使用 destFile 属性指定输出文件的副本，其中这些行被剥离：

```
<concat destfile="remoteJboss_short.txt" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:31:52.647

最佳实践是使用[宏定义](http://ant.apache.org/manual/Tasks/macrodef.html)来共享功能，这意味着为您的 startJboss 目标创建宏定义，而不是使用新的项目范围启动另一个 ant 实例。
这也将避免 BUILD SUCCESSFUL 输出。

**编辑**

“BUILD SUCCESSFUL”字符串来自 ant's `DefaultLogger#getBuildSuccessfulMessage()`。
您可以编写自己的记录器，它返回一个空字符串或任何其他字符串，有关详细信息，请参阅[ant 手动侦听器和记录器](http://ant.apache.org/manual/listeners.html)。

# netbeans - 无法在 netbeans 中创建 javafx flatform

> ID：14394393
> 
> 赞同：1
> 
> 时间：2013-01-18T07:38:34.033
> 
> 标签：netbeans, javafx

![Netbeans Java 平台错误](../Images/f5602784c49660e06ee51256db6baf0d.png)

当我尝试使用 Netbeans 创建 Java Swing 应用程序时出现此错误。我真的不知道如何解决这个错误。互联网并没有给我一个很好的答案。我卸载了 Netbeans，然后重新安装。但它不起作用。我该如何解决这个错误。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:47:33.960

我手头没有 NetBeans 安装，但请查看您在 NetBeans 中配置的 Java 安装（工具菜单中的“Java 平台管理器”？）。选择您正在使用的 Java 版本。应该有一个 JavaFX 选项卡。我想你可以在那里禁用它，如果你不需要它。

注意：如果您使用的是 Oracle 的最新 Java 版本，那么 JavaFX 应该会自动正确配置，因为 JavaFX 现在随 JDK 一起提供。

# web-services - WebSocket 在连接建立之前关闭

> ID：14394397
> 
> 赞同：11
> 
> 时间：2013-01-18T07:39:08.737
> 
> 标签：web-services, websocket, yii-extensions, pusher, phpwebsocket

我正在使用`Yii`框架并`OpenTok` `API`与`PUSHER API`. 当我厌倦了创建`PUSHER`事件实例时，连接建立了。但几秒钟后，连接自动关闭并给出错误，如：**Pusher : Error : {"type":"WebSocketError","error":{}}。**我也在尝试推送器库版本**1.11.2**和**1.12**（但同时）进行测试。

**控制台日志：**

```
Pusher : State changed : initialized -> connecting
    Firefox can't establish a connection to the server at ws://ws.pusherapp.com/app/?protocol=5&amp;client=js&amp;version=1.1....
    Pusher : State changed : connecting -> connected
    Pusher : State changed : connecting -> disconnected 
```

我检查了 telnet ws.pusherapp.com 443,80 和 843，但我得到的是连接被外国主机关闭。

有什么方法或我缺少调试或测试的东西吗？需要一些帮助来避免该警告。

我有使用

> 铬版本 23.0.1271.97
> 
> Ubuntu 12.04
> 
> 火狐18.0

# r - 如何打破与R中的订单功能的联系

> ID：14394402
> 
> 赞同：13
> 
> 时间：2013-01-18T07:39:46.180
> 
> 标签：r, sorting

我有一个包含 2 列的数据框。我已经使用`order()`功能订购了它们

```
data<-data[order(data$Mortality),]
head(data)

                       Hospital.Name     Mortality
 FORT DUNCAN MEDICAL CENTER                      8.1
 TOMBALL REGIONAL MEDICAL CENTER                 8.5
 DETAR HOSPITAL NAVARRO                          8.7
 CYPRESS FAIRBANKS MEDICAL CENTER                8.7
 MISSION REGIONAL MEDICAL CENTER                 8.8
 METHODIST HOSPITAL,THE                          8.8 
```

第 3 和第 4 位是平局（`Mortality`两者 = 8.7）。我想按字母顺序打破平局，`data$Hospital.Name`以便“CYPRESS FAIRBANKS”排在第 3 位，“DETAR HOSPITAL”排在第 4 位。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T07:47:43.450

用作`data$Hospital.Name`第二个参数`order`：

```
R> data <- data[order(data$Mortality, data$Hospital.Name), ]
R> data
                     Hospital.Name Mortality
1       FORT DUNCAN MEDICAL CENTER       8.1
2  TOMBALL REGIONAL MEDICAL CENTER       8.5
4 CYPRESS FAIRBANKS MEDICAL CENTER       8.7
3           DETAR HOSPITAL NAVARRO       8.7
6           METHODIST HOSPITAL,THE       8.8
5  MISSION REGIONAL MEDICAL CENTER       8.8 
```

# ibm-mq - MQ：2个队列管理器下的相同队列名称

> ID：14394405
> 
> 赞同：0
> 
> 时间：2013-01-18T07:39:57.793
> 
> 标签：ibm-mq, mq

我有两个配置了相同队列名称的 MQ 队列管理器。两者都配置为将数据发送到不同的服务器。当前队列管理器（QM1）已停止（状态立即结束）并且 QM2 正在运行

现在我的程序打开队列并发送数据。它不指定队列管理器名称。当我执行程序时，MQ 连接请求返回`error 2059`。

我的问题是：

1.  当多个队列管理器具有相同的队列名称时会发生什么？
2.  如何在不更改代码的情况下解决问题？

如果描述含糊，请见谅。如果有人提供链接以便像我这样的新手可以学到一些东西，那将会很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:35:04.070

如果可以提供有关您的应用程序的详细信息，将会很有帮助。无论是使用服务器绑定还是客户端模式连接到队列管理器。您使用的是哪个版本的 MQ？

以下信息适用于 MQ v7.x：

如果您使用客户端模式，则可以使用多个 CONNNAME 进行连接。如果一个队列管理器关闭，您的应用程序将连接到 CONNAME 列表中的下一个队列管理器。使用客户端模式连接时最简单的方法之一是定义 MQSERVER 环境变量并指定多个 CONNNAME。

```
SET MQSERVER=<channel name>/TCP/host1(port1), host2(port2) 
```

例如，当两个队列管理器都在本地主机上时：

```
SET MQSERVER=MYSVRCONCHN/TCP/localhost(1414),localhost(1415) 
```

在服务器绑定模式下，如果未指定队列管理器名称，则应用程序将尝试连接到默认队列管理器。如果默认队列管理器关闭，则抛出 2059。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:28:53.313

您的解释没有明确说明您的要求。

你写了：

**我的问题是 1\. 当多个队列管理器具有相同的队列名称时会发生什么。**

没有。这是一个正常的情况。不同的队列管理器可能有同名的队列，这不会产生任何歧义。虽然，当队列管理器在同一个集群中并且队列也是一个集群队列时，场景会有所不同。那么一切都将取决于需求和设计。

你写了：

**2.如何在不更改代码的情况下处理情况**

1.  运行已停止的队列管理器。

你写了：

> 现在我的程序打开队列并发送数据。它不指定队列管理器名称。

您正在使用什么应用程序？对于客户端应用程序，您使用队列管理器的对象访问队列。我假设您使用的应用程序（客户端）不从您那里获取队列管理器详细信息，只获取队列详细信息。并且可能是队列管理器在代码中被硬编码。它首先将消息发送到队列管理器 1 的队列，然后再发送到队列管理器 2。但是，在您的情况下，队列管理器 1 已关闭。

如果是上述情况，则需要更改应用程序的代码。您应该以这样的方式进行异常处理，即使第一行代码抛出错误，它也会执行将消息发送到第二个队列管理器的代码。

# android - 进度对话框 Android

> ID：14394407
> 
> 赞同：-2
> 
> 时间：2013-01-18T07:40:08.863
> 
> 标签：android, progressdialog

我正在尝试使用 ProgressDialog。当我运行我的应用程序时，进度对话框显示并在 1 秒后消失。我想在我的过程完成时展示它。这是我的代码：

```
public class MainActivity extends Activity {
android.view.View.OnClickListener mSearchListenerListener;
 private ProgressDialog dialog;

  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      new YourCustomAsyncTask().execute(new String[] {null, null});

      }

  private class YourCustomAsyncTask extends AsyncTask <String, Void, Void> { 

        protected void onPreExecute() { 
           dialog = new ProgressDialog(MainActivity.this); 
           dialog.setMessage("Loading...."); 
           dialog.setIndeterminate(true); 
           dialog.setCancelable(true); 
           dialog.show(); //Maybe you should call it in ruinOnUIThread in doInBackGround as suggested from a previous answer
        } 

        protected void doInBackground(String strings) { 
           try { 

            //  search(strings[0], string[1]);

              runOnUiThread(new Runnable() { 
                 public void run() { 
                  //  updateMapWithResult(); //Or call it onPostExecute before progressDialog's dismiss. I believe this method updates the UI so it should run on UI thread
                 } 
               }); 

           } catch(Exception e) {
           }

        }

    @Override 
    protected void onPostExecute(Void params) { 
        dialog.dismiss(); 
        //result 

    }

    @Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub
        return null;
    } 

}
} 
```

更新的问题：

```
 @Override
    public void onCreate(SQLiteDatabase db) {
        mDatabase = db;

          Log.i("PATH",""+mDatabase.getPath());

        mDatabase.execSQL(FTS_TABLE_CREATE);

        loadDictionary();
    }

    /**
     * Starts a thread to load the database table with words
     */
    private void loadDictionary() {
        new Thread(new Runnable() {
            public void run() {
                try {
                    loadWords();
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        }).start();
    }

    private void loadWords() throws IOException {
        Log.d(TAG, "Loading words...");

        for(int i=0;i<=25;i++)

            {  //***// 

        final Resources resources = mHelperContext.getResources();
        InputStream inputStream = resources.openRawResource(raw_textFiles[i]);
        //InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {

            StringBuilder sb = new StringBuilder();
            while ((word = reader.readLine()) != null)
            {
                sb.append(word);
            //  Log.i("WORD in Parser", ""+word);
            }

            String contents = sb.toString();
            StringTokenizer st = new StringTokenizer(contents, "||");
            while (st.hasMoreElements()) {
                String row = st.nextElement().toString();

                String title = row.substring(0, row.indexOf("$$$"));
                String desc = row.substring(row.indexOf("$$$") + 3);
                // Log.i("Strings in Database",""+title+""+desc);
                long id = addWord(title,desc);

                if (id < 0) {
                  Log.e(TAG, "unable to add word: " + title);
              }
            }

        } finally {
            reader.close();
        }

        }

        Log.d(TAG, "DONE loading words.");
    } 
```

我想显示 ProgressDialogue 框，直到没有在数据库中输入所有单词。此代码在扩展 SQLITEHELPER 的内部类中。那么如何在该内部类中使用 ProgressDialogue 并在后台运行我的 addWords() 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:42:39.653

你不能拥有这个

```
 runOnUiThread(new Runnable() { 
                 public void run() { 
                  //  updateMapWithResult(); //Or call it onPostExecute before progressDialog's dismiss. I believe this method updates the UI so it should run on UI thread
                 } 
               }); 
```

在你的 doInBackground() 中。

当在主 UI 线程上执行一些其他操作时，进度对话框不会优先。它们仅适用于在后台执行操作时。doInBackground 中的 runonUIthread 对您没有帮助。这是进度对话框仅在几秒钟内可见的正常行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:44:36.883

你的类中有两种`doInBackground()`方法`AsyncTask`。`runOnUiThread()`从 First中删除`doInBackground()`并将其移动到`doInBackground()`具有`@Override`注释的第二个。

我不知道你是想写两个`doInBackground()`方法还是写错了，但是在方法之间有这样的混淆是不好的。你`AsyncTask`没有调用第一个`doInBackground()`，它会调用`doInBackground()`有`@Override`注释的。因此，您`ProgressDialog`会在 1 秒内被解雇，因为它会立即返回 null。

# java - 使用 JAXB 进行排序解组

> ID：14394410
> 
> 赞同：3
> 
> 时间：2013-01-18T07:40:20.447
> 
> 标签：java, jaxb

假设我有一个 XML：

```
<root>
   <node>
      <order-id>4</order-id>
      .....
   </node>

   <node>
      <order-id>1</order-id>
      ....
   </node>
</root> 
```

当我解组这个 xml 时，我希望`List<Node>`得到的值是按`order-id`值排序的。

有没有办法使用 JAXB 直接获取排序列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T08:01:33.290

如果您不介意 Set 而不是 List，请尝试

```
@XmlRootElement(name="node")
    class Node implements Comparable<Node> {
        @XmlElement(name="order-id")
        int orderId;

        @Override
        public int compareTo(Node n) {
            return orderId - n.orderId;
        }
    }

    @XmlRootElement(name="root")
    class Root {
        @XmlElement(name="node")
        Set<Node> nodes = new TreeSet<>(); 
    } 
```

工作正常。如果 Set 不是一个选项，则将 Root 更改为

```
@XmlRootElement(name="root")
class Root {
    List<Node> nodes;

    @XmlElement(name="node")
    public void setNodes(Node[] nodes) {
        Arrays.sort(nodes);
        this.nodes = Arrays.asList(nodes);
    }
} 
```

# android - 在 AsyncTask 期间更改上下文

> ID：14394413
> 
> 赞同：1
> 
> 时间：2013-01-18T07:40:41.677
> 
> 标签：android, android-asynctask, android-service, android-context

我有一项服务可以运行很长时间并收集数据。最后，它开始`AsyncTask`并结束。问题是在`AsyncTask`'s`onPostExecute()`我想显示 a `Toast`，但我没有正确的上下文，因为到时间`AsyncTask`结束时，该服务不再存在。那么如何将其他上下文传递给服务以显示此 toast 呢？更好的是独立于用户在应用程序中的哪个位置显示 toast，因为在最坏的情况下，`AsyncTask`可能会在很长一段时间后完成，并且用户可能同时导航到其他地方。如果这是不可能的，我有什么选项可以通知用户`AsyncTask`'s 成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:21:05.317

根据主要问题下的讨论，在您的情况下，最好的解决方案是在`Service`所有`AsyncTasks`（从该服务开始）完成工作之前不要停止您的工作。

# vb.net - 应用范围设置或其他

> ID：14394418
> 
> 赞同：0
> 
> 时间：2013-01-18T07:40:58.017
> 
> 标签：vb.net, visual-studio

我正在构建一个已经存在多年的应用程序的全新版本。我现在可以惊恐地回顾我所做的一些事情，但生活的全部意义在于我们边走边学。现在的好处是，我有一张白纸可以工作，正因为如此，我想我会向你们寻求一些建议。

用户设置非常适合每个用户自然想要并且应该能够更改的那些东西，例如主题或视觉样式。应用程序设置显然应该适用于整个应用程序，而不管谁使用它。

中间的某个地方是一组设置，我想让系统管理员有机会更改（默认工作时间段、约会时间段、公司希望用作其主要交易的货币等）。这些不能是用户设置，因为单个用户不应该能够更改它们，它们也不应该是应用程序设置，因为我作为开发人员不知道最终用户（或者更准确地说是高级最终用户）想要什么将它们设置为。

许多年前，我可能考虑将此类设置写入注册表或 ini 文件。我也许可以（因为这是一个与其自己的自定义数据库紧密集成的应用程序）创建一个一次性设置表，并在程序启动时读取相关设置。我也许可以选择存储在所有用户目录中的单独的“通用设置”xml 配置文件。显然有很多选择。

我想尝试并建立的是解决此问题的最有效方法。与在应用程序启动时将所有内容读入一组公共常量相比，文件读取和写入操作之间的最佳权衡是什么？这些不会是只会偶尔提及的设置，因此效率将是关键。

只是为了让应用程序的内容没有歧义。传统winforms，使用vs 2012作为开发ide，vb.net作为代码库，基于.net4.5和ef 5.0。要存储在 sql express 或完整 sql server 中的后端数据。最终用户的目标操作系统将是 Windows 7 或更高版本（因此需要对 uac 给予应有的尊重）。

我欢迎您提出任何建议。

# php - 有任何 api 可用于获取位于英国的城市-conty 对吗？

> ID：14394422
> 
> 赞同：1
> 
> 时间：2013-01-18T07:41:18.003
> 
> 标签：php, web-services, api

我想知道如果提供城市名称，是否有任何 API 或 Web 服务可以在其中获取县名称。例如：我想知道城市'Evesham'的县。

如果有任何开源可用，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:57:21.537

试试这个。正如另一条评论中所说，皇家邮政服务非常昂贵： [http ://www.dangibbs.co.uk/journal/free-uk-postcode-towns-counties-database](http://www.dangibbs.co.uk/journal/free-uk-postcode-towns-counties-database)

# java - Json 作为 Grails 控制器的参数

> ID：14394423
> 
> 赞同：2
> 
> 时间：2013-01-18T07:41:20.303
> 
> 标签：java, jquery, ajax, json, grails

我正在尝试将 Json 数组传递给 Grails 控制器，然后再传递给 Java 类。我不知道如何正确地将我的参数传递给 Java 类。这是相关的代码。

AJAX 发布：

```
 $('#matrixForm').submit(function(e) {
        e.preventDefault();

    var matrixArray = $(this).serializeArray();

    $.ajax({  
        type: "POST",  
        data: matrixArray,  
        url: "/turingpages/factorize/create",
        success: function(data) {
            //USE DATA
        }  
    });  
    }); 
```

Grails 控制器：

```
...
    def create() {

        MatrixFactorization m = new MatrixFactorization(params)
        Gson gson = new Gson()
        def jsonMatrix = gson.toJson(m.answer)
        render jsonMatrix
    }
... 
```

矩阵分解构造函数：

```
public MatrixFactorization(JsonElement jsonarray) {
    BlockRealMatrix R = GsonMatrix.toMatrix(jsonarray);
    this.run(R);
} 
```

我的控制台将我的 Json 数组显示为：

```
[{name:"00", value:"1"}, {name:"01", value:"2"}, {name:"02", value:"3"}, {name:"10", value:"4"}, {name:"11", value:"0"}, {name:"12", value:"4"}, {name:"20", value:"0"}, {name:"21", value:"4"}, {name:"22", value:"2"}] 
```

我的堆栈跟踪是：

```
| Error 2013-01-18 00:30:23,792 [http-bio-8080-exec-4] ERROR errors.GrailsExceptionResolver  - GroovyRuntimeException occurred when processing request: [POST] /turingpages/factorize/create - parameters:
21: 4
20: 0
10: 4
22: 2
00: 1
01: 2
11: 0
02: 3
12: 4
failed to invoke constructor: public matrices.MatrixFactorization(com.google.gson.JsonElement) with arguments: [] reason: java.lang.IllegalArgumentException: wrong number of arguments. Stacktrace follows:
Message: failed to invoke constructor: public matrices.MatrixFactorization(com.google.gson.JsonElement) with arguments: [] reason: java.lang.IllegalArgumentException: wrong number of arguments
    Line | Method
->>   15 | create    in turingpages.rest.MFController$$ENuqtska
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread 
```

我对使用 JSON 很陌生。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:21:55.627

1.

默认情况下，jQuery 会将这些数据作为请求参数而不是 JSON 传递。所以你应该构建一个 JSON 字符串来传递给 jQuery。我可以向您推荐[JSON 3 库](http://bestiejs.github.com/json3/)。在这种情况下，它将是：

```
$.ajax({  
    type: "POST",  
    data: JSON.stringify(matrixArray),  
    url: "/turingpages/factorize/create",
    success: function(data) {
        //USE DATA
    }  
}); 
```

2.

在服务器端，您还可以使用标准 Grails JSON 转换器（但如果您愿意，也可以使用 Gson），请参阅[http://grails.org/Converters+Reference](http://grails.org/Converters+Reference)。

在这种情况下，您可以使用

```
def create() {
    MatrixFactorization m = new MatrixFactorization(request.JSON)
    render m.answer as JSON
} 
```

# scripting - 用于简单功能的 AutoHotKey 脚本

> ID：14394427
> 
> 赞同：1
> 
> 时间：2013-01-18T07:41:33.353
> 
> 标签：scripting, autohotkey

如何编写 .ahk 脚本来自动执行“按住 'key1' 2 秒”、“按住 'key2' 2 秒”、“按住 'key3' 2 秒”、“右键单击”的过程等待 2 秒”，然后重复。

我以前从未为键盘上的自动操作编写过脚本，所以这对我来说是全新的领域。我假设任何有经验的人都可以在一两分钟内实现上述内容。

编辑：我还希望能够调用此脚本以某种组合键开始，例如“等待 alt+a ，然后执行”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:39:34.447

希望这能让你走下去..

```
!a:: ; Alt+a to start script
Loop 
{ ; Start of loop
    GetKeyState, keystate, Pause, P ; Get the state of the Pause key
    if keystate = D  ; The Pause key was held down, break out of the loop.
        break ; Stop loop when the Pause key was held down
    Send, {Space Down} ; This will NOT autorepeat
    Sleep 2000 ; Wait 200 ms
    Send, {Space Up} ; Release the key
    GetKeyState, keystate, Pause, P ; Get the state of the Pause key
    if keystate = D  ; The Pause key was held down, break out of the loop.
        break ; Stop loop when the Pause key was held down
    Send, {b Down} ; This will NOT autorepeat
    Sleep 2000 ; Wait 200 ms
    Send, {b Up} ; Release the key
    GetKeyState, keystate, Pause, P ; Get the state of the Pause key
    if keystate = D  ; The Pause key was held down, break out of the loop.
        break ; Stop loop when the Pause key was held down
    MouseClick, left, 150,150 ; Click the mouse at 150X,150Y pixels, check exact mouse coordinates with AHK Window Spy
} ; End of loop
return ; End of script 
```

Ps 除了在每个键之后添加 Break 陷阱，您还可以添加一个热键来运行 exitapp。

# .net - 如何在任务中获取有效的 HttpContextBase

> ID：14394430
> 
> 赞同：0
> 
> 时间：2013-01-18T07:41:50.833
> 
> 标签：.net, asp.net-mvc, .net-4.0, task-parallel-library

以下代码在访问对应的url时会抛出异常。对象`state`in`StartNew()`与`ctx`in不同`ProcessRequest`。为什么会这样？我怎样才能得到一个有效的`HttpContextBase`对象`StartNew()`？

```
using System.Web;
using System.Web.Routing;

namespace AsyncUseHttpContextBaseWillFail
{
    public class FooHandler : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            var ctx = new HttpContextWrapper(context);
            System.Threading.Tasks.Task.Factory.StartNew(state =>
            {
                //ArgumentException: Value does not fall within the expected range.
                var ip = ((HttpContextBase)state).Request.UserHostAddress;
            }, ctx);
        }

        public bool IsReusable
        {
            get { return false; }
        }
    }

    public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.Add(new Route(string.Empty, new FooRoute()));
        }
    }

    public class FooRoute : IRouteHandler
    {
        public virtual IHttpHandler GetHttpHandler(RequestContext context)
        {
            return new FooHandler();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:43:41.877

史蒂夫上面的评论是使这项工作正常工作的最佳选择。使用 IHttpAsyncHandler 或 HttpTaskAsyncHandler。即使您确实设法将有效的 HttpContext[Base] 传递到您的回调中，如果 ProcessRequest 已经返回，那么 ASP.NET 运行时可能已经清理了 HttpContext 实例，并且您将尝试使用已释放的对象。异步工作应始终由异步处理程序执行，以避免此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:25:13.230

将所需数据从`HttpContext`局部变量中复制出来，并在您的 lambda 中使用这些变量。从第二个线程访问`HttpContext`是不安全的。

# xpath - Scrapy restrict_xpath 语法错误

> ID：14394432
> 
> 赞同：1
> 
> 时间：2013-01-18T07:42:01.370
> 
> 标签：xpath, scrapy

我试图将 Scrapy 限制在特定的 XPath 位置以获取以下链接。XPath 是正确的（根据 Chrome 的 XPath Helper 插件），但是当我运行 Crawl Spider 时，我的 Rule 出现语法错误。

我的蜘蛛代码是：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from tutorial.items import BassItem

import logging
from scrapy.log import ScrapyFileLogObserver

logfile = open('testlog.log', 'w')
log_observer = ScrapyFileLogObserver(logfile, level=logging.DEBUG)
log_observer.start()

class BassSpider(CrawlSpider):
    name = "bass"
    allowed_domains = ["talkbass.com"]
    start_urls = ["http://www.talkbass.com/forum/f126"]

    rules = [Rule(SgmlLinkExtractor(allow=['/f126/index*']), callback='parse_item', follow=True, restrict_xpaths=('//a[starts-with(@title,"Next ")]')]

    def parse_item(self, response):

        hxs = HtmlXPathSelector(response)

        ads = hxs.select('//table[@id="threadslist"]/tbody/tr/td[@class="alt1"][2]/div')
        items = []
        for ad in ads:
            item = BassItem()
            item['title'] = ad.select('a/text()').extract()
            item['link'] = ad.select('a/@href').extract()
            items.append(item)
        return items 
```

所以在规则内部，XPath '//a[starts-with(@title,"Next ")]' 返回一个错误，我不知道为什么，因为实际的 XPath 是有效的。我只是想让蜘蛛抓取每个“下一页”链接。谁能帮我吗。如果您需要我的代码的任何其他部分以寻求帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:45:59.240

问题不是 xpath，而是完整规则的语法不正确。以下规则修复了语法错误，但应检查以确保它正在执行所需的操作：

```
rules = (Rule(SgmlLinkExtractor(allow=['/f126/index*'], restrict_xpaths=('//a[starts-with(@title,"Next ")]')), 
        callback='parse_item', follow=True, ),
) 
```

一般来说，强烈建议在问题中发布实际错误，因为对错误的看法和实际错误可能会大不相同。

# excel - 保留数据透视表中的列，即使它没有值

> ID：14394434
> 
> 赞同：0
> 
> 时间：2013-01-18T07:42:14.647
> 
> 标签：excel, excel-2007, pivot-table

我有一列显示借方或贷方，旁边有一列显示金额。数据透视表将借方和贷方分开，并在两个不同的列中列出金额，并且运行良好。但是当没有信用条目时，信用列不会显示在数据透视表中。即使没有学分价值，我也需要该列留在那里。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:29:59.573

我认为您需要在字段设置中的布局和打印中检查没有数据的显示项目。

# ruby - facebook 验证时显示用户唯一信息，使用 Sinatra/Ruby

> ID：14394437
> 
> 赞同：2
> 
> 时间：2013-01-18T07:42:28.593
> 
> 标签：ruby, sinatra, omniauth, datamapper

超级初学者在这里。

这就是我想做的事情：
构建一个基本的待办事项列表应用程序，用户 X 在其中使用 facebook 登录，添加一些项目，查看它们，然后注销。用户 Y/Z/M/etc，应该能够登录查看他们的 OWN 列表、添加他们的 OWN 项目等 **。AKA：一个标准的 Web 应用程序，您可以在其中登录到您的帐户并查看您自己的信息。**

到目前为止我所拥有的：
能够建立一个列表，使用 Facebook 登录并让它知道你的名字。 **但是，无论我登录还是我的朋友使用她的帐户登录，该列表都保持不变。**

我需要做什么，但不知道如何：
**我需要每个用户都能够创建和查看他们自己的列表，并且能够回到它并仍然看到它/添加到它等等。**

我什至不知道这怎么叫，这会是一个用户数据库，每个用户都有自己的数据集吗？是否需要设置列表以便将它们存储为一大块数据？是否与此有关：[Sinatra 中的会话使用 Facebook 身份验证](https://stackoverflow.com/questions/6453797/sessions-in-sinatra-using-facebook-authentication)如果是，那是什么？

如果有人能给我一些非常基本的方向，告诉我从哪里开始，任何教程或我应该在谷歌上搜索什么，那就太棒了。

这是我的主要代码（警告：它真的很乱）：

```
require 'sinatra'
require 'data_mapper'
require 'time'
require 'rubygems'
require 'json'
require 'omniauth'
require 'omniauth-facebook'
#TODO require 'omniauth-att'

SCOPE = 'email,read_stream'

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/queue.db")

class SinatraApp < Sinatra::Base
  configure do
    set :sessions, true
    set :inline_templates, true
    set :protection, :except => :frame_options
end

class Note  
  include DataMapper::Resource  
  property :id, Serial  
  property :content, Text, :required => true  
  property :complete, Boolean, :required => true, :default => false  
  property :created_at, DateTime  
  property :updated_at, DateTime  
end 

class User
  include DataMapper::Resource
  property :id,         Serial
  property :uid,        String
  property :name,       String
  property :created_at, DateTime
end

###### no clue what this does ##############
DataMapper.finalize
DataMapper.auto_upgrade!

enable :session

use OmniAuth::Builder do
    provider :facebook, '464630283595639','5e4c7ad43bf111c10287c981d51127a3',:scope => SCOPE, :display => "popup"
    #provider :att, 'client_id', 'client_secret', :callback_url => (ENV['BASE_DOMAIN']
  end

###### root ##############

get '/' do
  if current_user
    @notes = Note.all :order => :id.desc  
    @title = 'Movie Queue'
    erb :home
  else
    ' <a href="/sign_in">sign in with Facebook</a>'
  end
end

###### authentication ##############

["/sign_in/?", "/signup/?"].each do |path|
  get path do
    redirect '/auth/facebook'
  end
end

get '/auth/:name/callback' do
  auth = request.env["omniauth.auth"]
  user = User.first_or_create({ :uid => auth["uid"]}, {
    :uid => auth["uid"],
    :name => auth["first_name"],
    :created_at => Time.now })
  session[:user_id] = user.id
  redirect '/'
end

helpers do
  def current_user
    @current_user ||= User.get(session[:user_id]) if session[:user_id]
  end
end

##list making part###
post '/' do  
  n = Note.new  
  n.content = params[:content]  
  n.save  
  redirect '/'  
end

get '/:id/delete' do
  n = Note.get params[:id]
  if n.destroy
    redirect '/', :notice => 'Note deleted successfully.'
  else
    redirect '/', :error => 'Error deleting note.'
  end
end

get '/:id/complete' do  
  n = Note.get params[:id]  
  n.complete = n.complete ? 0 : 1 # flip it  
  n.save  
  redirect '/'  
end

########## logout and error handlers #############

  get '/logout' do
    session[:user_id] = nil
    redirect '/'
  end

  get '/auth/failure' do
    erb "<h1>Authentication Failed:</h1><h3>message:<h3> <pre>#{params}</pre>"
  end

  get '/auth/:provider/deauthorized' do
    erb "#{params[:provider]} has deauthorized this app."
  end

  get '/protected' do
    throw(:halt, [401, "Not authorized\n"]) unless session[:authenticated]
    erb "<pre>#{request.env['omniauth.auth'].to_json}</pre><hr>
         <a href='/logout'>Logout</a>"
  end

end

########## don't know what this is #############

SinatraApp.run! if __FILE__ == $0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:02:58.003

免责声明：我不知道 Datamapper，但这应该可以帮助您。

* * *

需要有一种方法将便笺与用户关联起来。~~这需要数据库中的一个表，有些人会称之为`users_notes`，我个人更喜欢`users_rel_notes`，（也许 Datamapper 对此有一个约定...... YMMV）。无论如何，该表将至少有 2 列 - 用户 ID 和注释 ID。~~你不需要像我之前写的那样单独的表（我有点睡不着，抱歉！），这将是一个多对多的关系，用户可以有几个笔记，一个笔记可以与几个相关联用户。对于您所拥有的，只有笔记的所有者才能访问它，它需要一对多的关系。您可以在表中添加一列`notes`来存储用户 ID。

然后，在 User 类中，向 Note 类添加一个[关联](http://datamapper.org/docs/associations.html)，它是一对多关联，在 Datamapper 中是一个`has n`，例如

```
has n, :notes 
```

现在，当您拥有一个用户实例时，您可以（可能）通过以下方式调用该用户的注释：

```
user.notes 
```

我看到你已经`current_user`定义了助手，所以如果有人登录，你可以打电话`current_user.notes`来取回登录用户的所有笔记。

请记住，当您添加注释以确保将记录添加到关联表时，（可能，阅读链接）通过`user.notes << my_new_note`.

会话是您为识别用户而保留的信息以及您可能经常需要的任何其他小信息。可能的情况是，您只是为用户存储一个 id 或标识他们的 facebook 令牌，然后在请求期间，如果需要，您将查看 cookie 内部，获取 id，通过以下方式查找该用户id 并获取一个用户实例。会话信息可以通过多种方式存储，最常见的是 cookie，但您可以使用任何用于存储任何其他数据的方式。

# iphone - Phonegap 在没有 iphone 和 ios 开发者账号的情况下部署 iphone 应用

> ID：14394443
> 
> 赞同：1
> 
> 时间：2013-01-18T07:42:55.480
> 
> 标签：iphone, cordova, deployment

我使用 mac 和 phonegap 创建了我的第一个 iPhone 应用程序。该应用程序在 mac iPhone 模拟器上运行良好。我没有iPhone。现在我想把这个应用程序给我的朋友在 iPhone 上测试。我不想在应用商店出售这个应用，所以不想每年花 99 美元购买开发者证书。谁能告诉我如何将应用程序提供给朋友进行测试和运行。我知道当我使用 phonegap 创建 android 应用程序时，它会生成包含调试证书的 .apk 文件以在手机上进行测试，我可以将该 .apk 文件复制到 android 手机中并运行该应用程序。iphone的phonegap是否也会在android中生成像.apk文件这样的可执行文件，我可以把它交给我的朋友。请帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:10:52.877

为了`ipa`为您的应用程序生成一个应用程序，将应用程序安装在设备上进行测试、分发甚至上传到 App Store，您必须具有 required `provisioning profiles`，并且必须使用匹配的开发证书进行签名。

不幸的是，您必须拥有一个开发人员帐户才能生成所述配置文件。从苹果的网站：

> 当您准备好共享您的应用程序以供用户测试或通过 App Store 进行一般分发时，您需要使用**分发配置文件**创建应用程序存档并将其发送给应用程序测试人员或提交给 iTunes Connect。

这取自此链接：

[http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW2](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW2)

# asp.net-mvc-3 - ASPX ASP MVC4 的 kendoUI 中显示了无效的表达式术语 ')'

> ID：14394455
> 
> 赞同：1
> 
> 时间：2013-01-18T07:43:57.763
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, kendo-ui, kendo-grid

ASPX ASP MVC4 的 kendoUI 中显示了无效的表达式术语 ')'

代码：

```
 <%: Html.Kendo().Grid(gridobj)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.TMovie_id).Groupable(false).Title("ID");
        columns.Bound(p => p.Name).Title("Name");
        columns.Bound(p => p.Genre).Title("Genre");
        columns.Command(command => command.Custom("Edit").Click("Editfunction"));
        columns.Command(command => command.Custom("Delete").Click("Deletefunction"));
        columns.Template(c => { %> <%= Html.ActionLink("Edit", "EditMovie","Movies") %> <% });        

    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("", ""))

    )

%> 
```

编译错误：
描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

```
Compiler Error Message: CS1525: Invalid expression term ')'

       Source Error:

    Line 118:        columns.Command(command =>     command.Custom("Edit").Click("Editfunction"));
    Line 119:        columns.Command(command =>    command.Custom("Delete").Click("Deletefunction"));
    Line 120:        columns.Template(c => { %> <%= Html.ActionLink("Edit", "EditMovie","Movies") %> <% });        
    Line 121:        
    Line 122:    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T06:50:35.160

我有同样的错误。如果您从 <%: Html.Kendo().Grid 中删除 ":" ，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T09:06:27.440

`)`我猜你的代码中有一个额外的

```
.DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("", ""))
-----------------------------------------^
    ) 
```

~~`%>`在旁注中，我认为在使用助手之前 无需关闭它应该可以工作~~

 ~~```
<%: Html.Kendo().Grid(gridobj)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.TMovie_id).Groupable(false).Title("ID");
        columns.Bound(p => p.Name).Title("Name");
        columns.Bound(p => p.Genre).Title("Genre");
        columns.Command(command => command.Custom("Edit").Click("Editfunction"));
        columns.Command(command => command.Custom("Delete").Click("Deletefunction"));
        columns.Template(c => { Html.ActionLink("Edit", "EditMovie","Movies")  });        
    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("", "")

    )

%> 
```~~

# android - opensl 中的音频播放器可以输出到两个数据接收器吗？

> ID：14394457
> 
> 赞同：2
> 
> 时间：2013-01-18T07:44:16.167
> 
> 标签：android, audio, android-ndk, opensl

音频播放器有什么方法可以输出到两个数据接收器？

更具体地说，我正在尝试使用将数据源设置为 uri 的音频播放器从网络将 mp3 流式传输到缓冲区和输出混合。现在我将音频播放器的接收器设置为只是一个输出混合，所以我可以流式传输这个文件并在预取说有足够的数据时播放它，但我也想把这个流式传输的数据同时放入缓冲区时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:54:18.637

答案是否定的，但有办法解决这个问题。

我没有意识到，当您创建一个音频播放器并输出到缓冲区队列以及作为 uri 的接收器时，它会以获取数据的速度播放到缓冲区。

因此，当我意识到这是正在发生的事情时，我创建了另一个音频播放器，它有一个缓冲区队列作为源，输出混合作为接收器。

一切都设置好后，我暂停第一个音频播放器（uriPlayer），它开始“下载”并将数据流式传输到缓冲区。当 uriPlayer 的预取说有足够的数据时，我检查 uriPlayer 的“持续时间”以找出歌曲的长度，然后我创建一个足够大的缓冲区以根据持续时间和样本保存来自 uriPlayer 的 pcm 数据速率（和输出通道，立体声为 2，单声道为 1）。

我将此缓冲区排入 uriPlayers 接收缓冲区队列，然后将 uriPlayers 状态设置为 Play，因此它开始将所有数据加载到其缓冲区队列中的缓冲区中。

然后我将这个相同的缓冲区排入第二个播放器 (musicPlayer) 源缓冲区，并将其状态也设置为 Play，它开始在其缓冲区队列中播放缓冲区。

只要 uriPlayer 可以比音乐播放器从缓冲区中播放的速度更快地下载音乐文件的内容，只需从 uriPlayer 调用 getPosition 即可找出歌曲中当前流的位置以及它是否“领先于”位置 musicPlayer目前正在播放，一切正常！如果下载速度变慢或太慢，只要在 uriPlayer 之前暂停 musicPlayer。

# android - 如何更改 android 铃声偏好图标？

> ID：14394464
> 
> 赞同：1
> 
> 时间：2013-01-18T07:44:45.580
> 
> 标签：android, themes, preference, ringtone

我正在尝试在首选项屏幕中应用我的自定义主题。

我从[这里](http://y-anz-m.blogspot.kr/2011/10/preferenceactivity-checkbox.html)得到了一些提示（有一些日语，但你可以阅读代码），但我不知道如何在铃声偏好中做到这一点。

我被困在改变铃声偏好的图标上。我发现它们是@drawable/btn_circle
和@drawable/ic_btn_round_more，但找不到在哪里可以覆盖主题中的图像。有什么办法吗？我认为应该有一些自定义主题的方法......将不胜感激任何建议！

# python - 命令适用于 SSH 但不适用于 Paramiko

> ID：14394465
> 
> 赞同：0
> 
> 时间：2013-01-18T07:44:52.033
> 
> 标签：python, ssh, paramiko

我对 paramiko 有一个小问题。似乎所有命令都不像手动 ssh 会话那样执行。

让我们关注“历史”shell 命令，即使我主要关心的是这个命令：

```
$ python /home/metrosim/src/urbansim/tools/make_indicators.py \
-x /home/metrosim/project_configs/paris_zone_ovh_km130110.xml \
-c /home/metrosim/data/paris_zone/base_year_data_a \
-i trip_generation -y [1999] 
```

两者都使用手动 ssh 会话，但不是使用 paramiko，而是使用类似`ls -lA`work 的简单命令。

这是我的代码：

```
stdin, stdout, stderr = ssh_client.exec_command('history')

print 'LINES : '
data = stdout.read().splitlines()
for line in data:
     print line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:50:54.493

如果要模拟 shell 会话，请尝试使用[`invoke_shell()`](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#invoke_shell)而不是[`exec_command()`](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#exec_command).

从`invoke_shell`文档：

> 在此频道上请求交互式 shell 会话。如果服务器允许，则通道将直接连接到 shell 的 stdin、stdout 和 stderr。
> 
> 通常你会在此之前调用 get_pty，在这种情况下，shell 将通过 pty 操作，并且通道将连接到 pty 的 stdin 和 stdout。
> 
> 当 shell 退出时，通道将被关闭并且不能被重用。如果您想打开另一个 shell，您必须打开一个新通道。

# iphone - 使用两个参数从@selector 调用方法的问题

> ID：14394469
> 
> 赞同：0
> 
> 时间：2013-01-18T07:45:19.640
> 
> 标签：iphone, objective-c

如何从@selector 获取id 和另一个参数？，我正在尝试这个但没有工作！

```
-(void)displayContent:(UIViewController *)currentView sender:(id)sender{} 
```

和

```
[button addTarget:self action:@selector(displayContent:self:)     forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:14:27.463

来自[Cocoa Fundamentals Guide: Communicating with Objects: Target-Action in UIKit](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW44)

> UIKit 框架允许三种不同形式的动作选择器：
> 
> `- (void)action`
> 
> `- (void)action:(id)sender`
> 
> `- (void)action:(id)sender forEvent:(UIEvent *)event`

您的方法`-displayContent:sender:`与这些签名中的任何一个都不匹配，因此它对于传递给`-[UIControl addTarget:action:forControlEvents:]`. 您必须找到另一种方式来执行`currentView`您的操作，可能是通过使用实例变量来跟踪当前视图。

# silverlight - 如何在 silverlight 中访问我的用户控件的内部子控件

> ID：14394472
> 
> 赞同：1
> 
> 时间：2013-01-18T07:45:31.717
> 
> 标签：silverlight, user-controls

我有一个非常简单的控制。它只显示一个文本框。

```
<my:usercontrol x:Name="myControl" /> 
```

我想使用我的控件如下：

```
<my:usercontrol x:Name="myControl">
    <sdk:Label x:Name="InnerControl" Content="Hello World" />
</my:usercontrol> 
```

如何从“myControl”中访问“InnerControl”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:58:01.380

由于您为标签定义了名称，因此您可以在 UserControl 的代码隐藏文件中使用其名称访问它

例子：

```
// ctor
public partial class usercontrol : UserControl {
  InitializeComponent();
  var Label = this.Content; // This is the label (InnerControl)
} 
```

# ruby-on-rails - Rails respond_to 重定向除 X mime-type 之外的所有请求

> ID：14394473
> 
> 赞同：9
> 
> 时间：2013-01-18T07:45:32.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3

下面是我在控制器中使用的典型 respond_to 块

```
 respond_to do |format|
    format.html # show.html.erb
  end 
```

我想限制除 html 之外的所有 mime 类型（比如说）。想不出解决办法，这怎么可能？如果请求是 json，则此块不执行任何操作，这没关系，但我想要的是重定向任何不是 html 的请求。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-18T07:58:37.383

产生的`format`对象`respond_to`具有所有常见的 mime 类型（html、js、xml 等），并且它还有一个包罗万象的 mime 类型`any`，可以处理其他所有事情。所以，在这种情况下：

```
respond_to do |format|
  format.html
  format.any { redirect_to :foo }
end 
```

将对 html 使用默认渲染，并将重定向其他所有内容。请参阅文档以获取（一点点）更多信息：[http ://apidock.com/rails/ActionController/MimeResponds/respond_to](http://apidock.com/rails/ActionController/MimeResponds/respond_to)

# android - 异步任务和 Sqlite

> ID：14394476
> 
> 赞同：1
> 
> 时间：2013-01-18T07:45:48.500
> 
> 标签：android, android-service, android-sqlite

我有一项在设备连接到互联网时运行的服务。它从 sqlite 获取数据，然后将其上传到服务器上。已使用数据库中的数据填充列表片段。

由于我有服务，我收到诸如“数据库已关闭”“数据库未打开”之类的错误。我的 dbHelper 对象是静态的。我`SQLiteDatabase db = this.getWritableDatabase();`在每个将访问数据库的方法开始时调用。db.close() 在每个方法的末尾。

我应该关闭`db.close()`唯一的`onDestroy()`吗？...这会解决问题还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:43:45.397

首先，如果你想关闭一个数据库，你必须检查它是否是`isOpen()`.

现在，一般来说，您的`SQLiteOpenHelper`实现应该是一个单例并将`close()`方法重写为：

```
@Override
public synchronized void close() {
    mOpenConnections--;
    if (mOpenConnections == 0) {
        super.close();
    }

} 
```

where`mOpenConnections`是一个成员，它保存通过`SQLiteOpenHelper`. 每次有人打开数据库时，该成员都应该增加。

```
@Override
public synchronized void onOpen(SQLiteDatabase db) {
    super.onOpen(db);
    // increment the number of users of the database connection.
    mOpenConnections++;
} 
```

然后当你需要关闭一个数据库时使用`SQLiteOpenHelper.close()`方法。

这应该可以解决您的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:04:12.217

我发现在多个活动中可靠工作的唯一解决方案是在每个活动的 onCreate 方法中调用 getWritableDatabase。

正如已经指出的，任何服务都应该有自己的 SQLiteOpenHelper 实例。我认为无论如何都会发生这种情况，因为服务在单独的地址空间中运行，但最好确保。

# java - 回溯和递归

> ID：14394478
> 
> 赞同：0
> 
> 时间：2013-01-18T07:46:09.203
> 
> 标签：java, backtracking

我有一个布尔数组，它代表一排灯泡。真=亮。假=轻。规则是，如果您在 [i] 位置打开或打开灯泡，则 [i]+1 和 [i]-1 中的灯泡会变为，除非它在边缘，否则只会更改下一个给它。我需要编写一个接收 2 个布尔数组的方法，如果在对第一个数组执行多个操作后可以切换到第二个数组，则返回 true。例如：'来自'数组：{true, false, false, true, true, false}

'to' 数组：{false, false, false, true, false, true}

- 这是真的，因为您可以先将灯泡从第 1 个位置更改，然后在第 2 个位置，然后在第 4 个位置。

- 我不允许只使用循环递归，但我什至不知道答案的逻辑是什么，我想如何预测一系列动作，或者这里递归的基本情况是什么。

-我可以使用尽可能多的私有方法...

- 感谢所有回复！！！

# c++ - 挤压表：同一行重叠在一起，并计算数量

> ID：14394480
> 
> 赞同：1
> 
> 时间：2013-01-18T07:46:28.683
> 
> 标签：c++, arrays, algorithm, counting, accumulate

假设我有一个这样的表：（表是 C++ 中的二维数组）数字是每一行的计数。

```
1 a b c
1 a b c
1 c d e
1 b c d
1 b c d 
```

被挤压到：

```
2 a b c
1 c d e
2 b c d 
```

我的算法是 O(n*n)，有人可以改进它吗？

```
suppose t1 is original one;
initial another t2;
row_num = 1;
copy first row of t1 to t2;

foreach row in t1 (1 to n)
    search each row in t2 (0 to row_num);
        if equal, then add the number;
            break;
    if not found, then copy current t1's row to t2;
        row_num++ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:54:04.327

如果您的数据像示例中那样排序，那么它只是 O(n)。

使用 std::sort（或任何其他 O(nlogn) 排序）对数组进行排序。然后它只是另一个通过，它完成了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:38:33.013

`O(N log N)`这是复杂性的一个工作示例。它首先对数据进行排序，然后遍历每个元素并通过查找第一个不匹配来计算出现次数，然后将当前元素的计数总和存储在结果向量中。请注意，您的初始数组中的计数也可以不同于 1。该代码无需指定特定的比较函数即可工作，因为`std::array`已经有一个 lexicographic `operator<`。

下面的代码使用了可能无法在您的编译器上运行的 C++11 功能（自动、lambda）。您也可以使用 initalizer 列表在一个语句中初始化向量，但是使用一对 int 和数组的嵌套向量，我对需要编写多少个大括号有点困惑 :-)

```
#include <algorithm>
#include <array>
#include <iostream>
#include <utility>
#include <vector>

typedef std::pair<int, std::array<char, 3> > Element;
std::vector< Element > v;
std::vector< Element > result;

int main()
{
        v.push_back( Element(1, std::array<char, 3>{{'a', 'b', 'c'}}) );
        v.push_back( Element(2, std::array<char, 3>{{'a', 'b', 'c'}}) );
        v.push_back( Element(1, std::array<char, 3>{{'c', 'd', 'e'}}) );
        v.push_back( Element(1, std::array<char, 3>{{'b', 'c', 'd'}}) );
        v.push_back( Element(3, std::array<char, 3>{{'b', 'c', 'd'}}) );

        // O(N log(N) ) complexity
        std::sort(v.begin(), v.end(), [](Element const& e1, Element const& e2){
                // compare the array part of the pair<int, array>
                return e1.second < e2.second; 
        });

        // O(N) complexity
        for (auto it = v.begin(); it != v.end();) {
                // find next element
                auto last = std::find_if(it, v.end(), [=](Element const& elem){
                        return it->second != elem.second;     
                });

                // accumulate the counts
                auto count = std::accumulate(it, last, 0, [](int sub, Element const& elem) {
                    return sub + elem.first;
                });

                // store count in result
                result.push_back( Element(count, it->second) );                  
                it = last;
        }

        for (auto it = result.begin(); it != result.end(); ++it) {
                std::cout << it->first << " ";
                for (std::size_t i = 0; i < 3; ++i)
                        std::cout << it->second[i] << " ";
                std::cout << "\n";
        }
} 
```

在[Ideone上输出](http://ideone.com/aDIS3A)

**注意：**排序元素上的循环可能看起来`O(N^2)`（线性`std::find_if`嵌套在线性中`for`），但这是`O(N)`因为最后一个循环语句`it = last`跳过了已搜索的元素。

# android - 如何在android中实现表格边框用于表格布局

> ID：14394483
> 
> 赞同：1
> 
> 时间：2013-01-18T07:46:45.150
> 
> 标签：android, android-tablelayout

我想为表格布局添加边框，但我只能在表格布局中为行添加边框，我想为表格布局添加列边框，但是当我尝试在表格中为 textview 添加布局边距时，这是不可能的，找到可能解决方案。

```
public class servicehistryload extends
            AsyncTask<Void, Void, ArrayList<ServicehistryDetails>> {

        @Override
        protected ArrayList<ServicehistryDetails> doInBackground(Void... args0) {
            HashMap<String, String> user = session.getUserDetails();

            path.setNamespace();
            path.setUrl();
            path.setMethod_name("servicehistory");
            path.setSoap_action();
            // TODO Auto-generated method stub
            Webservice service = new Webservice(path.getNamespace(),
                    path.getMethod_name(), path.getUrl(), path.getSoap_action());
            try {
                SoapObject request = service.getRequest();
                SoapSerializationEnvelope envelope = service
                        .getEnvelope(request);
                PropertyInfo senduserid = new PropertyInfo();
                senduserid.setName("userid");
                // senduserid.setValue(user.get(Session.User_Id));
                senduserid.setValue("adkl1");
                request.addProperty(senduserid);
                SoapObject response = service.getResponse(envelope);
                Log.i("Service History ", response.toString());
                if (servicehistdetaillst.size() > 0) {
                    servicehistdetaillst.clear();
                }
                int count = response.getPropertyCount();
                for (int i = 0; i < count; i++) {
                    SoapObject result = (SoapObject) response.getProperty(i);

                    ServicehistryDetails serhistdet = new ServicehistryDetails();

                    if(result.getProperty(2)!=null){
                        serhistdet.setSrno(result.getPropertyAsString(2));
                    }
                    else{
                        serhistdet.setSrno("");

                    }
                    if (result.getProperty(4) != null) {
                        serhistdet.setSessid(result.getPropertyAsString(4));
                    } else {

                    }
                    if (result.getProperty(7) != null) {
                        serhistdet.setVinno(result.getPropertyAsString(7));
                    } else {

                    }
                    if (result.getProperty(1) != null) {
                        serhistdet.setDealer(result.getPropertyAsString(1));
                    } else {

                    }
                    if (result.getProperty(3) != null) {
                        serhistdet.setServdate(result.getPropertyAsString(3));
                    } else {
                    }
                    if (result.getProperty(5) != null) {
                        serhistdet.setStatus(result
                                .getPrimitivePropertySafelyAsString("Status"));
                    } else {

                    }
                    if (result.getProperty(0) != null) {
                        serhistdet.setAction(result.getPropertyAsString(0));
                    } else {
                        serhistdet.setAction("N/A");
                    }
                    if(result.getProperty(6)!=null){
                        serhistdet.setTeklin(result.getPropertyAsString(6));
                    }
                    else{
                        serhistdet.setTeklin("");
                    }
                    serhistdet.setDetails("Details");
                    servicehistdetaillst.add(serhistdet);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            return servicehistdetaillst;
        }

        protected void onPostExecute(
                ArrayList<ServicehistryDetails> servicehistlist) {
            boolean alternateclr=true;
            servicehistorylist = new TextView[servicehistlist.size()];
            TableRow servicehistinnerrow = new TableRow(ServiceHistory.this);
            servicehistinnerrow.setId(10);
            servicehistinnerrow.setLayoutParams(new LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            servicehistinnerrow.setBackgroundResource(R.color.red);

            srno = new TextView(ServiceHistory.this);
            srno.setId(1);
            srno.setText(R.string.servicehistrytabrowsrno);
            srno.setTextColor(Color.parseColor("#FAFAFA"));

            servicehistinnerrow.addView(srno);
            sessid = new TextView(ServiceHistory.this);
            sessid.setId(2);
            sessid.setText(R.string.servicehistrytabrows_sessId);
            sessid.setPadding(20, 0, 0, 0);
            sessid.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(sessid);
            vinno = new TextView(ServiceHistory.this);
            vinno.setId(3);
            vinno.setText(R.string.servicehistrytabrows_vinno);
            vinno.setPadding(20, 0, 0, 0);
            vinno.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(vinno);
            deal = new TextView(ServiceHistory.this);
            deal.setId(4);
            deal.setText(R.string.servicehistrytabrows_deal);
            deal.setPadding(20, 0, 0, 0);
            deal.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(deal);
            teklin = new TextView(ServiceHistory.this);
            teklin.setId(5);
            teklin.setText(R.string.servicehistrytabrows_teklin);
            teklin.setPadding(20, 0, 0, 0);
            teklin.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(teklin);
            servdate = new TextView(ServiceHistory.this);
            servdate.setId(6);
            servdate.setText(R.string.servicehistrytabrows_servDate);
            servdate.setPadding(20, 0, 0, 0);
            servdate.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(servdate);
            status = new TextView(ServiceHistory.this);
            status.setId(7);
            status.setText(R.string.servicehistrytabrows_status);
            status.setPadding(20, 0, 0, 0);
            status.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(status);
            action = new TextView(ServiceHistory.this);
            action.setId(8);
            action.setText(R.string.servicehistrytabrows_action);
            action.setPadding(20, 0, 0, 0);
            action.setTextColor(Color.parseColor("#FAFAFA"));
            servicehistinnerrow.addView(action);
            dertails = new TextView(ServiceHistory.this);
            dertails.setId(9);
            dertails.setText(R.string.servicehistrytabrows_details);
            dertails.setTextColor(Color.parseColor("#FAFAFA"));
            dertails.setPadding(20, 0, 0, 0);
            String ss = dertails.getText().toString();
            servicehistinnerrow.addView(dertails);
            servicehistorttablay.addView(servicehistinnerrow,
                    new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT));
            for (int i = 0; i < servicehistlist.size(); i++) {

                int leftMargin=10;
                int topMargin=2;
                int rightMargin=10;
                int bottomMargin=2;
                TableRow servicehistinnerrowvalues = new TableRow(ServiceHistory.this);
                servicehistinnerrowvalues.setId(i);
                TableLayout.LayoutParams tableRowParams=
                          new TableLayout.LayoutParams
                          (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);
                tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);
                servicehistinnerrowvalues.setLayoutParams(tableRowParams);
                servicehistinnerrowvalues.setBackgroundResource(R.drawable.row_border);
                /*if(alternateclr==true){
                    servicehistinnerrowvalues.setBackgroundResource(R.color.antiquewhite);
                    alternateclr= false;
                }
                else{
                    servicehistinnerrowvalues.setBackgroundResource(R.color.lemon);
                    alternateclr=true;
                }*/

                TextView seriano=new TextView(ServiceHistory.this);
                seriano.setId(i);
                seriano.setText(String.valueOf(i));
                seriano.setPadding(20, 0, 0, 0);
                seriano.setBackgroundColor(Color.WHITE);
                seriano.setGravity(Gravity.CENTER_HORIZONTAL);
                seriano.setGravity(Gravity.CENTER_VERTICAL);
                servicehistinnerrowvalues.addView(seriano);

                servicehistorylist[i]= new TextView(ServiceHistory.this);
                servicehistorylist[i].setTag(i);
                servicehistorylist[i].setText(servicehistdetaillst.get(i).getSessid());
                servicehistorylist[i].setPadding(20, 0, 0, 0);
                servicehistorylist[i].setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(servicehistorylist[i]);
                TextView vinnumber=new TextView(ServiceHistory.this);
                vinnumber.setId(i);
                vinnumber.setText(servicehistlist.get(i).getVinno());
                vinnumber.setPadding(20, 0, 0, 0);
                vinnumber.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(vinnumber);
                TextView dealers=new TextView(ServiceHistory.this);
                dealers.setId(i);
                dealers.setText(servicehistlist.get(i).getDealer());
                dealers.setPadding(20, 0, 0, 0);
                dealers.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(dealers);
                TextView teklinears=new TextView(ServiceHistory.this);
                teklinears.setId(i);
                teklinears.setText(servicehistlist.get(i).getTeklin());
                teklinears.setPadding(20, 0, 0, 0);
                teklinears.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(teklinears);
                TextView servicedetail=new TextView(ServiceHistory.this);
                servicedetail.setId(i);
                servicedetail.setText(servicehistlist.get(i).getServdate());
                servicedetail.setPadding(20, 0, 0, 0);
                servicedetail.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(servicedetail);
                TextView stat=new TextView(ServiceHistory.this);
                stat.setId(i);
                stat.setText(servicehistlist.get(i).getStatus());
                stat.setPadding(20, 0, 0, 0);
                stat.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(stat);
                TextView actions=new TextView(ServiceHistory.this);
                actions.setId(i);
                actions.setText(servicehistlist.get(i).getAction());
                actions.setPadding(20,0,0,0);
                actions.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(actions);
                TextView details=new TextView(ServiceHistory.this);
                details.setId(i);
                details.setText(servicehistlist.get(i).getDetails());
                details.setPadding(20, 0, 0, 0);
                details.setBackgroundColor(Color.WHITE);
                servicehistinnerrowvalues.addView(details);

                servicehistorttablay.addView(servicehistinnerrowvalues,
                        new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:51:50.233

看看下面的[Stack Post](https://stackoverflow.com/a/7379990/1292203) 使用单独的布局并将其添加到表格布局中

# java - 在 Struts2 迭代器中的某个时间点中断

> ID：14394486
> 
> 赞同：3
> 
> 时间：2013-01-18T07:46:50.827
> 
> 标签：java, loops, struts2

我在 Struts2 中有嵌套迭代：

```
<s:iterator var="gift" value="user.gift">
    <s:iterator value="giftItems">
        <s:property value="type"/>
    </s:iterator>
</s:iterator> 
```

我只想拥有最多 10 个`type`。如何在 Struts2 Iteration 中的某个时间点中断？我可以有一个计数器变量，但不知道在迭代中中断。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T07:57:05.827

如果您在开始迭代之前知道何时中断，则可以使用 begin 和 end 属性。如果必须在迭代中计算中断，请在每次迭代之前设置一个变量并检查其值。在后一种情况下，循环在技术上不会“中断”，但效果是一样的。

```
<s:set var = "breakLoop" value = "%{false}" />
<s:iterator....>
<s:if test = "!#breakLoop">
     //process here and change the var to true based on some codition
    <s:set var = "breakLoop" value = "%{true}"/>
</s:if>
</s:iterator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:28:07.730

AFAIK，你不能打破。您的迭代将持续到列表的末尾。

但是（如果您不选择从 Java 端限制列表，在到达 JSP 之前），

您可以使用提供的对象的`index`(0-based) 或`count`(1-based) 属性将渲染限制为十个元素：`StatusIterator``<s:iterator />`

*每个 giftItem*限制为 10 种类型：

```
<s:iterator var="gift" value="user.gift">
    <s:iterator value="giftItems" status="ctr">
        <s:if test="#ctr.index < 10">
            <s:property value="type"/>
        </s:if>
    </s:iterator>
</s:iterator> 
```

*完全*限制为 10 种类型（根据评论中的要求）：

```
<s:set var="rowPrinted" value="0"/>
<s:iterator var="gift" value="user.gift" >
    <s:iterator value="giftItems" >
        <s:if test="#rowPrinted < 10">
            <s:property value="type"/>
            <s:set var="rowPrinted" value="%{#rowPrinted + 1}"/>
        </s:if>
    </s:iterator>
</s:iterator> 
```

如您所见，您可以简单地声明一个基于 0 的变量，检查它是否低于限制，然后递增它（就像在 Java 中所做的那样）。

# jsf - FacesContext#getCurrentInstance() 在 Filter#doFilter() 中返回 null

> ID：14394489
> 
> 赞同：10
> 
> 时间：2013-01-18T07:47:01.603
> 
> 标签：jsf, servlet-filters

里面一个

```
public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) 
```

我想使用

```
FacesContext.getCurrentInstance().getExternalContext().getSession(false); 
```

但我意识到，`FacesContext.getCurrentInstance()`回报`null`。我知道我可以`((HttpServletRequest) req).getSession(false)`改为使用会话，但我的具体问题是：*为什么*`null`方法中的面孔上下文`doFilter()`？

我正在使用 MyFaces 1.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T08:28:26.103

`FacesContext` as an object is tied directly to the JSF request processing lifecycle and as a result is only available *during* a standard JSF (user-driven) request-response process. The actual object itself is stored in a thread that runs during the processing of a JSF request, vis-a-vis a ManagedBean.

But. BalusC has outlined some steps to get your hands on the object outside of the processing lifecycle [here](http://balusc.blogspot.com/2006/06/communication-in-jsf.html#AccessingTheFacesContextInsideHttpServletOrFilter). :)

# google-tv - GoogleTV 模拟器是否支持 Http 直播？

> ID：14394490
> 
> 赞同：0
> 
> 时间：2013-01-18T07:47:09.713
> 
> 标签：google-tv

我正在尝试在 GoogleTV Emulator 上播放 HLS 视频。但是，无法这样做。任何人都可以建议我，可能是什么问题。我在这个论坛上看到了一个类似的帖子（http://stackoverflow.com/questions/11974141/google-tv-emulator-not-able-to-play-hls），该帖子在 2012 年 8 月被回答为“模拟器没有” t 支持 HLS”。我想知道 GoogleTV 模拟器上是否启用了此功能？如果是，在 GoogleTV 模拟器上播放 HLS 视频是否有任何 DRM 要求。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:35:39.200

不起作用 - 模拟器不播放媒体。

# java - 在 Activity 中以特定布局打开 PDF

> ID：14394492
> 
> 赞同：2
> 
> 时间：2013-01-18T07:47:10.337
> 
> 标签：java, android, pdf

我们有一个可以从 sd 卡打开 PDF 文件的 android 应用程序

ListView 中显示的文件列表。用户选择的文件将在 Adob​​e 阅读器活动中打开我正在使用此代码打开 pdf 文件

```
 intent.setPackage("com.adobe.reader");
     intent.setDataAndType(Uri.fromFile( file ), "application/pdf");
     startActivity(intent); 
```

现在的问题是，当我打开 pdf 文件时，它将在一个新的活动中打开。我想在我自己的活动特定布局中打开这个 pdf 文件，例如我想在我的滚动视图中打开这个 pdf 文件类似的东西

```
 scrollview.addview(PDFView); 
```

我对我的活动有很多看法，我想在特定视图中打开 pdf 文件。是否可以在不使用 MUPDF 或 APV 等任何库的情况下使用 Adob​​e Reader。或者是否有任何支持 android Delvik 的开源 PDF Reader jar。因为我知道 JReble 和其他一些 java PDF 库是可用的，但它不支持 Delvik 他们只支持 JVM 任何建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:58:53.323

如果您希望它在您自己的应用程序的视图中打开，则必须使用 pdf 库。Android 中没有与 OLE 或 COM 等效的功能，您可以在其中嵌入来自其他 apk 的视图。我知道一些不错的——Qoppa、Raede 和 PDFTron。它们都很贵。

# ruby-on-rails-3 - Rails 3 - Ransack - check_box_tag

> ID：14394499
> 
> 赞同：3
> 
> 时间：2013-01-18T07:47:57.047
> 
> 标签：ruby-on-rails-3, checkbox, ransack

```
Listing Model - belongs_to :area

Area Model - has_many :listings 
```

我正在尝试使用带有复选框的 Ransack 实现搜索；在用户检查选定区域的地方，搜索返回选定区域的所有列表。

```
<%= search_form_for @search do |f| %>
<% areas = Area.all %>
    <% areas.each do |area| %>
        <%= check_box_tag('q[area_id_eq][]', area.id) %>
        <%= area.location%>
    <% end%>
<%= f.submit "SEARCH" %>
<% end %> 
```

控制台输出：

```
Parameters: {"utf8"=>"✓", "q"=>{"area_id_eq"=>["1", "2"]}, "commit"=>"SEARCH"}
Completed 500 Internal Server Error in 4ms

NoMethodError - undefined method `to_i' for ["1", "2"]:Array: 
```

只是不确定如何实现它以接受多个复选框值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:32:11.110

不要使用“area_id_eq”，而是使用“area_id_any”。您还需要检查以确保选择了您的参数：

```
<%= search_form_for @search do |f| %>
<% areas = Area.all %>
    <% areas.each do |area| %>
        <%= check_box_tag('q[area_id_eq_any][]', area.id,  (params[:q][area_id_eq_any].include? area.id.to_s) ? true : false ) %>
        <%= area.location%>
    <% end%>
<%= f.submit "SEARCH" %>
<% end %> 
```

# android - Android：在单个视图上同时运行大量动画

> ID：14394500
> 
> 赞同：1
> 
> 时间：2013-01-18T07:48:00.403
> 
> 标签：android, animation, android-animation, translate-animation

我必须使用 300 多对绳索 (x, y) 并喂它们来翻译动画，以定义一个可以移动的视图的唯一路径，有没有办法让 300 多个翻译动画运行一个一个视图？

# .htaccess - 如何使用 .htaccess 重定向到特定路径

> ID：14394501
> 
> 赞同：1
> 
> 时间：2013-01-18T07:48:02.367
> 
> 标签：.htaccess

我正在尝试重定向以下网址...

```
www.example.com/test/test2/test3/file.html 
```

.htaccess 文件是`www.example.com/change/file` 什么，因为我对此不太了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:58:56.563

也许这会起作用：

```
# Start the rewrite engine
RewriteEngine On
# Assume the base is root and there are no alias
RewriteBase /
# Prevent loops if the directory exists
RewriteCond %{REQUEST_FILENAME} !-d
# Make sure there is an html file in the URL and capture it's filename if so.    
RewriteCond %{REQUEST_URI} ([^/]+)\.html/?  [NC]
# Use only the filename as target directory.
RewriteRule .*  %1  [L,R=301] 
```

标志 [L,R=301] 的意思是最后一条规则，它是永久重定向。`R=301`如果您希望它是临时的，请更改为 302，如果您想要静默映射，请删除整个标志。

**更新**

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ([^/]+)\.html/?  [NC]
RewriteRule .*  change/%1  [R=301,L]

# Second rule set
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ([^/]+)/?  [NC]
RewriteRule .*  %1/%1.html  [L] 
```

永久重定向此

`http://www.example.com/test/test2/test3/file.html`到

`http://www.example.com/change/file`, 有一张无声的地图

`http://www.example.com/change/file/file.html`

# java - 是否可以弱引用在 XML 布局中声明的 ImageView？

> ID：14394502
> 
> 赞同：1
> 
> 时间：2013-01-18T07:48:06.890
> 
> 标签：java, android

我在自定义视图切换器中有一个带有 3 页 ImageViews 的 xml 布局。并非所有这些都始终可见。

我在我测试过的 2 台设备上遇到了 OOM 异常。

是否可以弱引用从 findViewById 访问的 ImageView？

我的猜测是它不是，因为已经有对 ImageViews 的硬引用，而我的第一次尝试并没有解决 OOM 问题。如果不是，是否有另一种方法可以在将 ImageViews 保留在 XML 中的同时做到这一点，我想将 UI 和功能分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:56:27.647

弱引用在 2.3+ 版本上不起作用——它们会编译，但只要没有强引用，它们就会被收集。如果任何观点有很强的参考价值，他们无论如何也无济于事。

如果位图可以分页进出，最好的办法是在它们不显示时立即回收它们，并根据需要重新加载它们。

# python - 如何通过一些修改重建元组？

> ID：14394504
> 
> 赞同：1
> 
> 时间：2013-01-18T07:48:11.233
> 
> 标签：python, python-3.x

例如，我有一个元组

```
a = ('chicken', 1, 'lemon', 'watermelon', 'camel') 
```

我想建立一个新的元组`b`，`a`但稍微改变一下

```
d = {0: 'apple', 1: 'banana', 2: 'lemon', 3: 'watermelon'}

b = (a[0], d[a[1]], a[2], a[3], a[4]) 
```

另一种方法

```
b = list(a)
b[1] = d[b[1]]
b = tuple(b) 
```

他们都工作，但看起来很傻。

还有另一种优雅的方式来完成这项工作吗？还是有一些技巧可以修改原始元组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:06:05.580

与您的相比，这有点低效，因为它会检查每个项目，但一般的想法是它查看您的每个项目`a`，检查匹配的键，`d`如果找到一个，则返回该键的值. 如果没有找到键，则返回原始项：

```
In [1]: a = ('chicken',1,'lemon','watermelon','camel')

In [2]: d = {0:'apple',1:'banana',2:'lemon',3:'watermelon'}

In [3]: b = tuple(d.get(x, x) for x in a)

In [4]: b
Out[4]: ('chicken', 'banana', 'lemon', 'watermelon', 'camel')

In [5]: type(b)
Out[5]: <type 'tuple'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:21:02.430

我不知道你所说的“优雅”是什么意思，但如果你想要更通用的东西，只是替换 'a' 元组中在 'd' 中有键的元素，你可以使用[生成器表达式](http://docs.python.org/3/reference/expressions.html#generator-expressions)并执行以下操作：

```
>>> a
('chicken', 1, 'lemon', 'watermelon', 'camel')
>>> d
{0: 'apple', 1: 'banana', 2: 'lemon', 3: 'watermelon'}
>>> tuple(d[x] if x in d else x for x in a)
('chicken', 'banana', 'lemon', 'watermelon', 'camel') 
```

它构造了一个新的元组，因为元组是不可变的。

# android - 如何将图像从 JPEG/BMP 转换为 XBM 格式

> ID：14394505
> 
> 赞同：5
> 
> 时间：2013-01-18T07:48:12.757
> 
> 标签：android, image

我正在尝试在 android 中以编程方式将图像从 JPEG/BMP 转换为 XBM 格式。那么是否有一个库或方法可以做到这一点。在网上四处寻找找不到任何方法来做到这一点。请帮我！

# testing - 当前 Java 应用程序数据驱动测试框架（基于 Spring）

> ID：14394507
> 
> 赞同：0
> 
> 时间：2013-01-18T07:48:17.263
> 
> 标签：testing, junit, fit-framework

我想到的数据驱动测试的唯一框架是**FIT**。我错过了什么吗？

有没有**好的**商业选择？

请。请注意，我专注于测试设计人员对表格测试数据的低维护成本，最好是通过 Excel 完成。

谢谢，巴斯特尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:32:55.133

在[使用 jUnit 的数据驱动测试中讨论](https://stackoverflow.com/questions/1822315/data-driven-tests-with-junit)

特别是文章[http://mrlalonde.blogspot.ca/2012/08/data-driven-tests-with-junit.html](http://mrlalonde.blogspot.ca/2012/08/data-driven-tests-with-junit.html)的链接回答了我的问题。

从我的 POV 中需要注意的几件事：

*   无需使用任何其他框架——只需普通的 junit。坚如磐石的概念！
*   在 suite() 中，我倾向于解析一些 CSV 来创建测试用例，输入由我们的测试人员在 excel 中编辑。

我非常喜欢它，因此我可以自由地在此处粘贴相关代码片段以实现自包含：

```
public class DataDrivenTestExample extends TestCase {

private final String expected;
private final String actual;

// must be named suite() for the JUnit Runner to pick it up
public static Test suite() {
    TestSuite suite = new TestSuite();
    suite.addTest(new DataDrivenTestExample("One", "answer", "answer"));
    suite.addTest(new DataDrivenTestExample("Two", "result", "fail?"));
    suite.addTest(new DataDrivenTestExample("Three", "run-all-tests!", "run-all-tests!"));
    return suite;
}

protected DataDrivenTestExample(String name, String expected, String actual) {
    super(name);
    this.expected = expected;
    this.actual = actual;
}

/**
 * override this; default impl tries to reflectively find methods matching {@link TestCase#getName()}
 */
@Override
protected void runTest() throws Throwable {
    assertEquals(expected, actual);
}
} 
```

# lotus-notes - Domino/Notes 带有理性 Jazz 的源代码控制

> ID：14394512
> 
> 赞同：2
> 
> 时间：2013-01-18T07:48:41.523
> 
> 标签：lotus-notes, lotus-domino, rational-team-concert, ibm-jazz

如果我们可以使用 Rational Jazz 作为源代码控制环境，我想知道它是否可以使用自 8.5.3 以来的新源代码控制可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:16:17.337

是的，但不像您希望的那样集成。首先使用 Project Explorer 将 Domino 项目导入 RTC，右键单击/Import。选择“文件系统”并指定磁盘项目的位置。然后，您可以将代码上传到现有的存储库工作区。

因此，您仍然必须使用 Rational 用户界面来控制源代码。

我注意到“查看待定更改”在 RTC3.0.1 中无法按预期工作。刷新需要几秒钟才能生效。因此，如果您在 RTC 中看不到您的更改，请等待几秒钟，然后点击刷新。

提醒自己：应该创建一篇关于在 Domino Designer 中使用 RTC 的博客文章

# python - win32gui 获取当前活动的应用程序名称

> ID：14394513
> 
> 赞同：9
> 
> 时间：2013-01-18T07:48:42.140
> 
> 标签：python, windows, win32gui

我只是在学习 python，我是相对论的新手。我创建了以下脚本，它将获取当前活动的窗口标题并将其打印到窗口。

```
import win32gui
windowTile = ""; 
while ( True ) :
    newWindowTile = win32gui.GetWindowText (win32gui.GetForegroundWindow());        
    if( newWindowTile != windowTile ) :
        windowTile = newWindowTile ; 
        print( windowTile ); 
```

上面的代码片段有效。我现在正在尝试获取活动窗口的应用程序名称（`Foreground Window`）

我的问题是：

*   如何在 python 中获取前台活动 Windows 应用程序名称？

**编辑**

例如：如果用户从计算器 (calc.exe) 切换到谷歌浏览器 (chrome.exe)，我想查看他们切换到的应用程序被调用。标题的问题在于，并非所有应用程序都以应用程序名称作为标题的前缀。例如谷歌浏览器将页面标题作为窗口标题。我想知道用户切换到的应用程序叫什么。

```
calc.exe
chrome.exe 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T06:15:07.547

首先安装`WMI`包（也是`pywin32`有原因的）：

```
pip install wmi 
```

然后：

```
import win32process
import wmi

c = wmi.WMI()

def get_app_path(hwnd):
    """Get applicatin path given hwnd."""
    try:
        _, pid = win32process.GetWindowThreadProcessId(hwnd)
        for p in c.query('SELECT ExecutablePath FROM Win32_Process WHERE ProcessId = %s' % str(pid)):
            exe = p.ExecutablePath
            break
    except:
        return None
    else:
        return exe

def get_app_name(hwnd):
    """Get applicatin filename given hwnd."""
    try:
        _, pid = win32process.GetWindowThreadProcessId(hwnd)
        for p in c.query('SELECT Name FROM Win32_Process WHERE ProcessId = %s' % str(pid)):
            exe = p.Name
            break
    except:
        return None
    else:
        return exe 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-22T06:20:34.740

认为这会成功

```
import psutil, win32process, win32gui, time
def active_window_process_name():
    pid = win32process.GetWindowThreadProcessId(win32gui.GetForegroundWindow()) #This produces a list of PIDs active window relates to
    print(psutil.Process(pid[-1]).name()) #pid[-1] is the most likely to survive last longer

time.sleep(3) #click on a window you like and wait 3 seconds 
active_window_process_name() 
```

假设您已经安装`psutil`和`win32`模块

运行这个程序以获得更好的理解

```
import threading, win32gui, win32process, psutil
from tkinter import *
root = Tk()
s = StringVar()
def active_window_process_name():
    try:
        pid = win32process.GetWindowThreadProcessId(win32gui.GetForegroundWindow())
        return(psutil.Process(pid[-1]).name())
    except:
        pass
def to_label():
    global s
    while True:
        s.set(active_window_process_name())
    return

Label(root,textvariable=s).pack()
if __name__ == "__main__":
    t = threading.Thread(target = to_label)
    t.start()
    root.mainloop() 
```

# c# - 正则表达式直到特定单词

> ID：14394515
> 
> 赞同：0
> 
> 时间：2013-01-18T07:48:48.783
> 
> 标签：c#, regex

我在一个非常大的字符串中有以下数据`str`：

```
"RewrittenQuery: Word:(\"state\" \"states\" \"state s\") Word:(\"library\" \"libraries\" \"libr\" \"lib\" \"lbry\") adjust:1feature:#:\" _MetaTag_Category 11265\"\r\n" 
```

我想要从 RewrittenQuery 到之前的所有内容`adjust`。我写了以下代码：

```
Match extraction = Regex.Match(str, @"RewrittenQuery:[^\n\r]+"); 
```

上面的代码能够从中提取起点`RewrittenQuery`，但我不需要来自（包括）的数据`adjust` 我应该添加什么上面的正则表达式来获取我想要的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:01:23.303

如果您的最终锚点是`adjust:`您可以使用以下代码：

```
string pattern = @"(?<Value>RewrittenQuery:[^\n\r]+\s)(?:adjust:)";
RegexOptions regexOptions = RegexOptions.IgnoreCase | RegexOptions.Multiline;
Regex regex = new Regex(pattern, regexOptions);
string targetString = @"RewrittenQuery: Word:(\""state\"" \""states\"" \""state s\"") Word:(\""library\"" \""libraries\"" \""libr\"" \""lib\"" \""lbry\"") adjust:1feature:#:\"" _MetaTag_Category 11265\""\r\n";

foreach (Match match in regex.Matches(targetString))
{
    if (match.Success)
    {
        var value = match.Groups["Value"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:57:33.090

请试试这个

```
static void TestRegEx()
{
    string input = "sdsafff RewrittenQuery 1sdfs se1adjust  wer aasdfsd";

    Match m = Regex.Match(input, @"RewrittenQuery(?<A1>.*)adjust");
    if (m.Success)
        Console.WriteLine(m.Groups["A1"]);
    else
        Console.WriteLine("Didn't match");
} 
```

印刷`1sdfs se1`

正则表达式是`RewrittenQuery(?<A1>.*)adjust`。该部分`(?<A1>.*)`采用任何符号并将它们与 name 放入 group 中`A1`，因此如果输入字符串匹配，您可以在按 name 匹配的 groups 集合中找到此值。

# ruby - 为什么 `match` 给出了内存引用而不是实际的匹配数据 `"foo"`？

> ID：14394520
> 
> 赞同：-3
> 
> 时间：2013-01-18T07:49:21.320
> 
> 标签：ruby, regex

我得到了预期的结果，`=~`但没有`match`。为什么`match`给出内存引用而不是实际匹配数据`"foo"`？为什么在同一语句的每次运行中引用都会发生变化？

```
s= "foo"
/(?=foo)foo/ =~ s    # => 0
/(?=foo)foo/.match s # => #<MatchData:0x2e6a490>
/(?=foo)foo/.match s # => #<MatchData:0x2e66390>
/(?=foo)foo/.match s # => #<MatchData:0x2e64310> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:51:19.480

这本身不是内存引用，它是对象 ID，它是 IRB 显示未定义`inspect`或`to_s`方法的对象的方式。基本[`Object.to_s`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-to_s)方法的输出就是您所看到的。

显示的对象是`match`每次使用该方法时的结果并重新创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:05:38.527

@theTinMan 大部分是正确的，引用是对象`to_s`或`inspect`方法的输出（IRB 只是调用它，`Object`如果没有被覆盖，则通过继承使用 ' 的实现）

该`=~`方法返回匹配位置，因为它是这样定义的。对象实际上是一个`MatchData`更丰富的对象，它包含有关匹配的信息，例如偏移量（位置）、任何捕获等。本质上，您可以使用返回`MatchData`来访问`$~`、`$1`、`$2`等变量通常持有的值，界面更清晰。

文档`MatchData`：[http ://apidock.com/ruby/MatchData](http://apidock.com/ruby/MatchData)

# proxy - 代理自动配置 windows phone 8

> ID：14394523
> 
> 赞同：0
> 
> 时间：2013-01-18T07:49:27.813
> 
> 标签：proxy, windows-phone-8

当用户安装我的应用程序时，有什么方法可以在 windows phone 8 中自动配置代理？也许设置文件是可能的，但不确定。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:17:17.840

WP8 应用程序无法更改设备网络连接的代理设置。应用程序只需使用已经可用且已连接的网络连接（并在这些更改时收到通知）。

# android - 从 uri 流式传输音频时，opensl 中的音频播放器缓冲区在哪里？

> ID：14394527
> 
> 赞同：2
> 
> 时间：2013-01-18T07:49:37.257
> 
> 标签：android, audio, android-ndk, streaming, opensl

我正在尝试使用 opensl 从 uri 流式传输音频文件。我想立即播放它，但也可以在播放器播放完文件后访问流数据。

我知道数据在内存中的某个地方，因为我可以在流式音频播放期间使用搜索。此外，当播放器完成播放流式音频文件时，我会停止播放器，这会将播放器位置设置回“0”，在那里我可以再次开始播放音频。

我需要访问这些数据，但它在哪里？我能以某种方式获得指向它的指针吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T20:23:07.320

如果您通过网络流式传输内容，我不确定您尝试做的事情是否可行。

但是，从 Android API 14 开始，可以使用音频播放器设备将内容解码为 PCM 格式的缓冲区队列数据源。

有关这方面的更多信息，请查看 NDK 文档 /docs/opensles/index.html

* * *

> 将音频解码为 PCM 注意：此功能在 API 级别 14 及更高级别可用。标准音频播放器播放到音频设备，数据接收器被指定为输出混合。但是，作为 Android 扩展，如果数据源指定为具有 MIME 数据格式的 URI 或 Android 文件描述符数据定位器，并且数据接收器是具有 PCM 数据的 Android 简单缓冲区队列数据定位器，则音频播放器将充当解码器格式。

# ruby-on-rails - Rails 3 中的 ExecJS::RuntimeError

> ID：14394528
> 
> 赞同：1
> 
> 时间：2013-01-18T07:49:45.873
> 
> 标签：ruby-on-rails, ruby

根据我在网上找到的所有帖子，尤其是在 stackoverflow 上，这个错误似乎经常发生。我了解您需要安装 gems **execjs**和**ruby​​racer**，重新启动服务器并重试，错误应该会得到解决。

现在值得一提的是，我才刚刚开始学习 Rails，所以我还没有真正理解所有的概念。事实上，这是我第一次尝试运行自己的“Hello World”rails 应用程序。

我的系统详细信息是：

*   Windows 8 64 位
*   红宝石 1.9.3
*   导轨 3.2.11

这也是我的宝石清单：

![在此处输入图像描述](../Images/7b707ccec87e2465a2808a75e98ab91f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:04:39.407

因为你告诉它你的第一次尝试，我猜你的系统中缺少 node.js。

我建议你先安装它[http://nodejs.org/download/][1]

[1]：[http](http://nodejs.org/download/) ://nodejs.org/download/并尝试。

您可以在 application.js 中看到

> > //= 要求树。

这一行需要 node.js。

您的应用程序将通过删除此行来运行，但不推荐

# jquery - 向下滚动一定量时jQuery隐藏元素？

> ID：14394537
> 
> 赞同：0
> 
> 时间：2013-01-18T07:50:08.093
> 
> 标签：jquery, scroll

向下滚动一定数量的像素时是否可以隐藏元素？

例如，一个固定的汽车图像向下滚动说 800 像素视点它会淡出，如果再次淡出则向上滚动。基本上所以它只在整个页面的一部分可见，不管页面有多大？

我将以下内容拼凑在一起，站点容器是所有内容的整个站点包装器，而#plane 是您从顶部滚动 800px 后我想要隐藏的 html 元素

```
 $('#site-container').scroll(function(){
      if($(this).scrollTop() > 800) $('#plane').fadeOut('slow');
      if($(this).scrollTop() < 800) $('#plane').fadeIn('slow');
    }); 
```

它似乎不起作用，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:57:00.270

更改`$('#site-container')`为`$(window)`。

即使`#site-container`是全尺寸的容器，实际的滚动条也会应用在窗口上。

`overflow-y: auto;`如果您设置或，滚动条仅适用于元素`overflow-y: scroll;`。

# ruby-on-rails - 清除rails服务器中的终端

> ID：14394540
> 
> 赞同：2
> 
> 时间：2013-01-18T07:50:28.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, macos, unix

在终端中，您可以通过键入 $ `clear`（给出一大块清晰的行）或 control+l（尽管这只会将最后一行移到顶部）来清除终端。一旦您使用 $ 启动服务器，您将如何完成此操作`rails s`，或者我是否坚持只按住 return/enter 一段时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T08:44:28.983

在 gnome 终端中：`Terminal -> Reset and Clear`.

![在此处输入图像描述](../Images/1aa4c587deabb5ac68819bcfac3522e2.png)

我将它映射到`CTRL`+ `k`。

`⌘</kbd>+`K` for OSX`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:01:33.747

在 Ubuntu 中，

```
system 'clear' 
```

在 Windows 中

```
system 'cls' 
```

**注意：**如果您在某些 IDE 中使用终端`MyEclipse`，即使服务器正在运行，您也可以通过按控制台右侧的“清除控制台”来删除终端数据。就像不同的 IDE 有不同的方式来清除控制台数据。`ubuntu terminal`对于像or while server on run这样的独立控制台`Windows terminal`，您不能删除数据。

# php - 分页在本地主机上的 Codeigniter 中不起作用

> ID：14394554
> 
> 赞同：0
> 
> 时间：2013-01-18T07:51:34.463
> 
> 标签：php, codeigniter, pagination

我是 Codeigniter 的新手。这是我在 Codeigniter 的第一次体验。我的分页有问题。我已经尝试了很多在论坛和博客上给出的代码。最后我跟着一个教程，链接：[CodeIgniter from Scratch- Day 16 - Displaying & Sorting Tabular Data - Nettuts+](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-displaying-sorting-tabular-data/)

这是我的代码：

**用户.php**

```
public function index($offset=0)
{
    $limit  =   10;
    $this->load->model('user_model');
    $results                =   $this->user_model->get_all_users($limit,$offset);
    $data['users']          =   $results['rows'];
    $data['num_results']    =   $results['num_rows'];

    $this->load->library('pagination');

    $config =   array();
    $config['base_url']     =   site_url('admin/user');
    $config['total_rows']   =   $data['num_results'];
    $config['per_page']     =   $limit;
    $config['uri_segment']  =   3;
    $this->pagination->initialize($config);
    $date['pagination'] =   $this->pagination->create_links();
    $data['page_title'] =   "List Of Users";
    $this->load->view('admin/users', $data);
} 
```

**用户模型.php**

```
function get_all_users($limit, $offset)
{
    $q  =   $this->db
                    ->select('user_id,user_email,login_name,phone_num,user_status')
                    ->from('tbl_user')
                    ->limit($limit,$offset);
    $ret['rows']    =   $q->get()->result();

    $q      =   $this->db
                        ->select('COUNT(*) as count', FALSE)
                        ->from('tbl_user');
    $tmp    =   $q->get()->result();
    $ret['num_rows']    =   $tmp[0]->count;
    return $ret;
} 
```

**用户.php**

```
<?php 
$this->load->view('includes/header');
$this->load->view('includes/menu-admin');
?>
<div id="container">

    <?php if(isset($users)) { ?>
            <p><?php $this->load->view('includes/footer'); ?></p>
        <table id="users_table" class="board">
            <tr>
                <th class="blue-gradient">#</th>
                <th class="blue-gradient">Email Address</th>
                <th class="blue-gradient">Login Name</th>
                <th class="blue-gradient">User Status</th>
                <th class="blue-gradient">Current Status</th>
            </tr>
            <?php $count=1; ?>
        <?php foreach ($users as $user) { ?>
            <tr id="user_<?php echo $user->user_id; ?>" class="darker-on-hover">
                <td><?php echo $count; ?></td>
                <td><?php echo anchor('admin/profile/view/'.$user->user_id,$user->user_email , 'class="view-profile-details"'); ?></td>
                <td><?php echo $user->login_name; ?></td>
                <td><?php echo $user->user_status; ?></td>
                <td>
                    <?php echo anchor('admin/user/edit/'.$user->user_id , '<img src="'.base_url().'images/edit.png" title="Edit User"/>'); ?>
                    <?php echo anchor('admin/user/remove/'.$user->user_id , '<img src="'.base_url().'images/remove.png" title="Remove User"/>', 'class="remove-user-event"'); ?>
                </td>
            </tr>
        <?php $count++; } ?>
        </table>

    <?php } ?>

    <div id="pageNum">
        <?php if(strlen($pagination)): ?>       
            Pages: <?php echo $pagination; ?>
        <?php endif; ?>
    </div>
</div> 
```

如果我错了，请告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:56:26.653

像这样设置你的配置

```
$config['base_url']     =   site_url('admin/user/');
$config['total_rows']   =   $data['num_results'];
$config['per_page']     =   $limit;
$config['uri_segment']  =   3;
$this->pagination->initialize($config); 
```

请注意 / 在 site_url。经常发生分页生成的url是这样的

```
 http://localhost/myapp/index.php/admin/user10 
```

这是错误的。如果你放一个斜线，你将有正确的分页链接

```
http://localhost/myapp/index.php/admin/user/10 
```

编辑：

你的控制器应该是这样的

```
Class User Extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
    }
    public function index($offset=0)
    {
        $limit  =   10;
        $this->load->model('user_model');
        $results                =   $this->user_model->get_all_users($limit,$offset);
        $data['users']          =   $results['rows'];
        $data['num_results']    =   $results['num_rows'];

        $this->load->library('pagination');

        $config =   array();
        $config['base_url']     =   site_url('user/index');
        $config['total_rows']   =   $data['num_results'];
        $config['per_page']     =   $limit;
        $config['uri_segment']  =   3;
        $this->pagination->initialize($config);
        $date['pagination'] =   $this->pagination->create_links();
        $data['page_title'] =   "List Of Users";
        $this->load->view('admin/users', $data);
    }
} 
```

查看班级名称，`site_url('class/method')`并在您的情况下`site_url('user/index')`

# c# - 如何在 c# MVC4 应用程序中按父 ID 对列表元素进行分组，如树？

> ID：14394565
> 
> 赞同：1
> 
> 时间：2013-01-18T07:52:37.897
> 
> 标签：c#, asp.net-mvc, linq, tree, comments

我有这样的评论模型：

```
public class Comment
    {
        public int? ParentId { get; set; }
        public string Text { get; set; }
        public int ProjectId { get; set; }
        public int UserWhoTypeId { get; set; }
    } 
```

我想**通过 parentID 在另一个下**显示评论。父评论将出现在`div`，子评论将出现在

```
<ul>
   <li>
      child comments go here
   </li>
</ul> 
```

例如，

```
 <ul>
       <li>
          <div>
               parent comments go here
          </div>
          <ul>
             <li>
                 child comments go here
             </li>
           </ul>
       </li>
  </ul> 
```

我首先需要使用**像树一样**的 LINQ 收集评论，然后像上面显示的那样应用它。请提供任何链接或建议。

**编辑：**

我创建模型为

```
public class CommentListModel
{
    public Comment Comment{ get; set; }
    public List<Comment> Childs { get; set; }
} 
```

我收集了 1 个列表中的所有评论：

```
List<CommentListModel>  CommentHierarchy = MyService.GetCommentHierarchy(); 
```

**现在，我需要像树层次结构一样在视图中显示 CommentHierarchy。请帮忙。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:03:58.293

您可以将 CommentListModel 的“Childs”属性更改为 CommentListModel 的集合，如下所示：

```
public class CommentListModel
{
    public Comment Comment { get; set; }
    public List<CommentListModel> Childs { get; set; }
} 
```

为 CommentListModel 创建一个局部视图作为显示模板（将文件放在 DisplayTemplates 文件夹下）：

```
@model CommentListModel
<ul>
    <li>
        <div>@Html.DisplayFor(m => m.Comment.Text)</div>
        @Html.DisplayFor(m => m.Childs)
    </li>
</ul> 
```

然后在您的父视图中，只需调用：

```
 @Html.DisplayFor(m => m) 
```

假设父视图的模型是 CommentListModel 对象的集合。

这将允许您的列表尽可能深入地递归您的收藏。

# c# - Moq 一个返回自身的 IQueryable

> ID：14394570
> 
> 赞同：0
> 
> 时间：2013-01-18T07:52:57.573
> 
> 标签：c#, testing, mocking, moq, iqueryable

我正在使用一个模拟（使用 Moq）设置一个测试`IQueryable`，我想在`.Where()`调用它时返回它自己：

```
[SetUp]
public void Setup() {
    mockPocos = new Mock<IQueryable<Poco>>();
    mockPocos.Setup(foo => foo.Where(It.IsAny<Expression<Func<Poco, bool>>>()))
        .Returns(mockPocos.Object);
} 
```

（这样，我可以模拟方法/属性，`.Count`并且知道无论被测试的方法运行多少次查询`IQueryable`，它都会返回我可以控制的值。）

这可以编译，但是当我运行它时，我得到了这个异常：

```
Tests.PocoTest.TestPocoQueryable:
SetUp : System.NotSupportedException : Expression references a method that does not belong to the mocked object: foo => foo.Where<Poco>(It.IsAny<Expression`1>()) 
```

我怎样才能让它工作？

* * *

编辑：作为对评论的回应，这就是我想像这样使用 Moq 的原因。

在我正在测试的方法中，我有这样的代码：

```
public int[] MethodToTest(IQueryable<Poco> pocos, MockableDependency dependency)
{
    var mostRecentUpdate = (from poco in pocos
                                select poco.Date_Last_Updated).Max();
    var recentPocos = pocos.Where(x => x.Date_Last_Updated.CompareTo(mostRecentUpdate) >= 0);

    ///...snip...

    result[0] = SomePrivateCalculation(recentPocos.Count);
    result[1] = dependency.DoADifferentCalculation(recentPocos);
} 
```

我已经在嘲笑 s 了`MockableDependency`，所以我实际上不需要担心`Poco`s 中的内容`pocos`。但是，我希望能够控制的值`recentPocos.Count`是什么，并且我希望能够知道无论在访问`pocos`之前运行了多少个查询，它都会返回相同的值`.Count`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:47:23.260

MattiasG 暗示了解决方案。您应该提供一个 IQuerable pocos，它将始终生成具有已知结果的查询，从而为您提供您期望的 .Count。

因此，此处代码中未显示的是正确完成的；传递 pocos 的方法也应该被模拟，以提供您可以做出正确断言的数据。

很难找到测试的良好平衡。这真的是一种艺术形式。但是，如果您使用的是最小起订量，则应该关注高阶“工作单元”，而不是单个方法内部发生的事情。

换句话说。假设您设法让 Count 始终返回 5。然后您在依赖方法中检查 Count 是否为 5。这是。你完成了什么？好吧，您可以断言 Count 将返回一个 int （我们有点知道这已经在工作了），但是您根本没有真正测试过您的应用程序代码。

但是要回答您的实际问题：-您必须创建一个新接口 IMyOwnCustomMockableQuery<>，其中包含一些转换器或包装类到 IQuearble<>，然后为您的 IMyOwnCustomMockableQuery<> 转发所有呼叫的新 linq 实现不想要模拟 IQuearble<> 上的扩展。

当然这会很复杂，需要自己的测试。=) 对于不测试应用程序的测试来说，测试你的模型似乎需要做很多工作。我不会推荐这种方法。

# qt - 如何访问 QT plaintextedit 中的数据？

> ID：14394572
> 
> 赞同：0
> 
> 时间：2013-01-18T07:53:03.663
> 
> 标签：qt

我正在为我的机器人团队开发这个小程序，我遇到了一个问题，我不知道如何从用户用来插入附加评论的纯文本编辑框中访问数据。我在想它是：

```
ui->addcomments->_________; 
```

但是我浏览了整个班级，并没有发现任何与返回包含注释的字符串的东西相近的东西。我想接受评论并将其存储在数组或向量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:00:50.747

我认为该`toPlainText()`方法将帮助您检索数据，然后用于`clear()`从 GUI 中删除文本。

# magento - 覆盖 price.phtml 模板文件

> ID：14394576
> 
> 赞同：1
> 
> 时间：2013-01-18T07:53:31.350
> 
> 标签：magento, templates, overriding

我正在构建一个自定义模块，在某些情况下，我想用未显示价格的自定义块替换价格块，但我似乎无法覆盖该块。我在我的模块 config.xml 中使用了以下代码

```
 <catalog>
      <rewrite>
        <product_price>Namespace_Module_Block_Catalog_Product_Price</product_price>
      </rewrite>
   </catalog> 
```

我在我的模块模板目录中创建了一个 /product/price.phtml，但是 price.phtml 没有覆盖初始目录 /product/price.phtml 我应该如何覆盖该模板文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:25:36.967

似乎原始区块配置仍然有效并设置了标准价格模板。

您的块类是否明确设置了模板？

```
protected function _construct()
{
    $this->setTemplate('yourmoduledirectory/product/price.phtml ');
} 
```

或者您是否提供了设置新模板的布局更新？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:00:39.397

创建您自己的模板文件和您自己的块类。此外，您必须覆盖特定的 IndexController。然后你应该在那里更新布局并用你自己的替换原始块。

以编程方式删除块： [以编程方式从布局中删除块](https://stackoverflow.com/questions/14275333/programatically-remove-block-from-layout/14305059#14305059)

# asp.net-mvc - 使用用户输入填充模型列表属性

> ID：14394579
> 
> 赞同：0
> 
> 时间：2013-01-18T07:53:36.400
> 
> 标签：asp.net-mvc

考虑以下模式类 -

```
public class UserLakshya
{
    [Key, Column(Order=0)]
    public int Id { get; set; }
    public string Title { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }

    public List<Barrier> Barriers { get; set; }
}

public class Barrier
{
    [Key]
    public int Id { get; set; }
    public string Comments { get; set; }
} 
```

在为模型生成视图时`UserLakshya`，我没有得到模板来插入屏障属性（比如评论）。我试过以下 -

1.  为屏障类型创建局部视图。
2.  在主视图中渲染此部分视图，如下所示 -

    @Html.Partial("障碍", Model.Barriers)

我需要帮助来为障碍列表创建视图布局，以便障碍列表直接绑定到`UserLakshya`. 是否可以 ？

我提到[了这篇文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，但这似乎只是有帮助`for displaying populated list items to the view`。我正在寻找反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:59:35.270

我不确定我是否理解。

如果您的视图是强类型的，请说

```
@model UserLakshya 
```

那么你可以做

```
@Html.DisplayFor(m => m.Title)
@foreach (var barrier in Model.Barriers) {
     @Html.DisplayFor(m => barrier.Comments)
} 
```

或 for 循环（版本需要）

```
@for (var i = 0; i < Model.Barriers.Count; i++) {
    @Html.TextBoxFor(m => Model.Barriers[i].Comments)
} 
```

# backbone.js - todo.js 中的参数 todo 是什么

> ID：14394580
> 
> 赞同：0
> 
> 时间：2013-01-18T07:53:41.123
> 
> 标签：backbone.js, underscore.js

在主干待办事项应用程序中，有一个这样的功能：

```
addOne: function(todo){
var view=new app.TodoView({model:todo});
$("#todo-list").append(view.render().el);  
} 
```

我不明白 'todo' 参数在上述函数中接收到什么？

这个函数被另一个函数调用：

```
addAll: function(){
this.$("#todo-list").html('');
app.Todos.each(this.addOne,this); 
 } 
```

第一个功能是将其作为模型传递给其他视图。我想我在这里缺少一些基本的东西。请阐明一些观点。让我知道是否需要更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:14:11.700

我正在使用此待办事项列表作为参考：[http ://backbonejs.org/examples/todos/todos.js](http://backbonejs.org/examples/todos/todos.js)

**简短**的回答：`todo`in`addOne: function(todo){`指的是 Todos 集合中的单个 Todo 模型。

**更长的答案**：

让我们分解一下。

```
 Todos.each(this.addOne, this); 
```

这`Todos`是一个`Collection`。`Todo` `Models`此代码正在遍历集合，集合`Todo`中的每个模型都 `addOne`作为`todo`. 它还将函数`this`内的上下文（或值）设置`addOne`为当前`this`（指的是`App`）。如果他们不这样做，那么函数`this`内`addOne`将引用集合中的当前模型 ( `todo`)

```
// Add a single todo item to the list by creating a view for it, and
// appending its element to the `<ul>`.
addOne: function(todo) {                           // todo refers to a single model in the collection
  var view = new TodoView({model: todo});          // create a new TodoView with the todo model
  this.$("#todo-list").append(view.render().el);   //<- 'this' refers to 'App'. append the newly created view into the DOM, hence displaying it.
}, 
```

在`addOne`函数中，我们创建一个新的`TodoView`并将其附加到要显示的 DOM 中。

# python - 运行简单 shell 脚本的 Python 文本菜单

> ID：14394582
> 
> 赞同：1
> 
> 时间：2013-01-18T07:53:49.703
> 
> 标签：python, shell, menu, raspberry-pi

我不知道该怎么做，所以我不知道从哪里开始。

基本上，我想编写一个 python 脚本，它将向用户显示一个项目列表，这些项目可以使用箭头键和 Enter 键进行切换和选择。如果 python 不能做到这一点，还有另一种语言可以吗？

然后所做的选择将运行一行简单的 shell 脚本（在 raspbian 中）

我的想法是，我将使用我的树莓派将使用 MAME 运行的游戏列表。即一种很好的简单选择游戏的方法，而不是每次都在代码行中编写。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T07:57:12.417

你会想看看`curses`。在Google 上搜索教程，例如，[这里](http://www.tuxradar.com/content/code-project-build-ncurses-ui-python)。这是一个很好的库，可以创建您在此处描述的界面。

当您运行简约的 GUI 时，使用`subprocess`-module 启动脚本，例如

```
import subprocess
subprocess.call(["my_script.sh","parameter1","parameter2"]) 
```

**编辑**

似乎 curses 不支持可选列表，但 ncurses 支持。在 Debian 存储库中，有`python-urwid`一些 Python 绑定到 ncurses。

一个例子是：

```
import urwid
import subprocess

games = {"Game1":"script_name1.sh",
         "Game2":"script_name2.sh",
         "Game3":"script_name3.sh",
         "Game4":"script_name4.sh",
         "Game5":"script_name5.sh",}

class ItemWidget (urwid.WidgetWrap):

    def __init__ (self, id, description):
        self.id = id
        self.content = description
        self.item = [
            ('fixed', 15, urwid.Padding(urwid.AttrWrap(
                urwid.Text('%s:' % str(id)), 'body', 'focus'), left=2)),
            urwid.AttrWrap(urwid.Text('%s' % description), 'body', 'focus'),
        ]
        w = urwid.Columns(self.item)
        self.__super.__init__(w)

    def selectable (self):
        return True

    def keypress(self, size, key):
        return key

def main ():
    palette = [
        ('body','dark cyan', '', 'standout'),
        ('focus','dark red', '', 'standout'),
        ('head','light red', 'black'),
        ]

    def keystroke (input):
        if input in ('q', 'Q'):
            raise urwid.ExitMainLoop()

        if input is 'enter':
            view.set_header(urwid.AttrWrap(urwid.Text("selected"), 'head'))
            focus = listbox.get_focus()[0].content
            try:
                subprocess.call(games[focus])
            except OSError, ose:
                view.set_header(urwid.AttrWrap(urwid.Text(
                    'error starting %s: %s' % (str(focus), str(ose))), 'head'))

    items = []
    game_keys = sorted(games.keys())
    for i, k in enumerate(game_keys):
        items.append(ItemWidget(i, k))

    header = urwid.AttrMap(urwid.Text('selected:'), 'head')
    listbox = urwid.ListBox(urwid.SimpleListWalker(items))
    view = urwid.Frame(urwid.AttrWrap(listbox, 'body'), header=header)
    loop = urwid.MainLoop(view, palette, unhandled_input=keystroke)
    loop.run()

if __name__ == '__main__':
    main() 
```

这是改编自[nicosphere](http://www.nicosphere.net/selectable-list-with-urwid-for-python-2542/)。

# scala - Scala Futures 如何与 flatMap 链接在一起？

> ID：14394584
> 
> 赞同：9
> 
> 时间：2013-01-18T07:53:55.513
> 
> 标签：scala, monads, future

我正在第一次在 Scala 中使用 Futures，并且正在研究一个使用 flatMap 组合器的示例；我一直在关注这个讨论：

[http://docs.scala-lang.org/overviews/core/futures.html](http://docs.scala-lang.org/overviews/core/futures.html)

具体来说，这个例子：

```
val usdQuote = future { connection.getCurrentValue(USD) }
val chfQuote = future { connection.getCurrentValue(CHF) }
val purchase = for {
    usd <- usdQuote
    chf <- chfQuote
      if isProfitable(usd, chf)
} yield connection.buy(amount, chf)

purchase onSuccess {
    case _ => println("Purchased " + amount + " CHF")
} 
```

翻译成这样：

```
val purchase = usdQuote flatMap {
    usd =>
         chfQuote
        .withFilter(chf => isProfitable(usd, chf))
        .map(chf => connection.buy(amount, chf))
} 
```

我有点难以理解的是这是如何以及何时执行 flatMap 的？

我知道 usdQuote 和 chfQuote 是由“某个线程”在“某个时间”执行的，并且它们注册的回调函数被调用，问题是：

a) usdQuote 和 chfQuote 是否同时执行？（我很确定他们是）。

b) flatMap 如何将 Future useQuote 的值赋值给 usd？例如，当操作 usdQuote 完成时它会被调用吗？

c) 哪个线程正在执行“flatMap”和“map”操作（可能更多是上一个问题的后续）。

干杯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T08:16:17.537

*   a）当您创建它们时，您已经开始它们对范围内的隐式 ExecutionContext 执行，因此它们可能会同时运行，因为这取决于执行它们的方式。

*   b）它并没有真正分配值，但是实现使用 onComplete 方法使您传递的函数在达到结果后被触发。目前，这应该链接到我所指的 flatMap 方法：[https ://github.com/scala/scala/blob/v2.11.2/src/library/scala/concurrent/Future.scala#L246](https://github.com/scala/scala/blob/v2.11.2/src/library/scala/concurrent/Future.scala#L246)

*   c) 那些是通过前面提到的 ExecutionContext 运行的，还要考虑如果这些 Future 实例可以在不同的 ExecutionContext 上运行，那么部分 for-comprehension 可以在不同的线程池上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T23:17:39.400

我面临同样的问题......我发现[这个](https://class.coursera.org/reactive-002/wiki/CheatSheet)关于理解的一般解释很有用。可能这有帮助：

## 为了理解

for -comprehension 是,和集合上的操作的*语法糖。*`map``flatMap``filter`

一般形式是`for (s) yield e`

*   `s`是一系列生成器和过滤器
*   `p <- e`是一个发电机
*   `if f`是一个过滤器
*   如果有多个生成器（相当于一个嵌套循环），最后一个生成器的变化比第一个更快
*   如果您想使用多行而不需要分号，您可以使用`{ s }`代替`( s )`
*   `e`是结果集合的一个元素

**示例 1：**

```
 // list all combinations of numbers x and y where x is drawn from
  // 1 to M and y is drawn from 1 to N
  for (x <- 1 to M; y <- 1 to N)
    yield (x,y) 
```

相当于

```
(1 to M) flatMap (x => (1 to N) map (y => (x, y))) 
```

# 翻译规则

for 表达式看起来像传统的 for 循环，但内部工作方式不同

*   `for (x <- e1) yield e2`被翻译成`e1.map(x => e2)`
*   `for (x <- e1 if f) yield e2`被翻译成`for (x <- e1.filter(x => f)) yield e2`
*   `for (x <- e1; y <- e2) yield e3`被翻译`to e1.flatMap(x => for (y <- e2) yield e3)`

这意味着您可以对自己的类型使用 for-comprehension，只要您定义了 map、flatMap 和 filter

**示例 2：**

```
for {  
  i <- 1 until n  
  j <- 1 until i  
  if isPrime(i + j)  
} yield (i, j) 
```

相当于

```
for (i <- 1 until n; j <- 1 until i if isPrime(i + j))
    yield (i, j) 
```

相当于

```
(1 until n).flatMap(i => (1 until i).filter(j => isPrime(i + j)).map(j => (i, j))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T19:00:36.073

**[您在Arun Manivannan](http://rerun.me/about/)**[的“ Scala notes – Futures – 3 (Combinators and Async)](https://www.javacodegeeks.com/2016/06/scala-notes-futures-3-combinators-async.html) ” 中也有一个很好的并发`Future`执行示例。

> 我们`Futures`需要并行运行。
> 为了实现这一点，我们需要做的就是将`Future`块提取出来并分别声明它们。

代码：

```
val oneFuture: Future[Int] = Future {
  Thread.sleep(1000)
  1
}

val twoFuture: Future[Int] = Future {
  Thread.sleep(2000)
  2
}

val threeFuture: Future[Int] = Future {
  Thread.sleep(3000)
  3
} 
```

**理解**：

```
def sumOfThreeNumbersParallelMapForComprehension(): Future[Int] = for {  
    oneValue <- oneFuture
    twoValue <- twoFuture
    threeValue <- threeFuture
} yield oneValue + twoValue + threeValue 
```

**平面图**：

```
def sumOfThreeNumbersParallelMap(): Future[Int] = oneFuture.flatMap { oneValue =>  
    twoFuture.flatMap { twoValue =>
      threeFuture.map { threeValue =>
        oneValue + twoValue + threeValue
      }
    }
} 
```

测试：

```
describe("Futures that are executed in parallel") {
  it("could be composed using for comprehensions") {
    val futureCombinators = new FutureCombinators
    val result = timed(Await.result(futureCombinators.sumOfThreeNumbersParallel(), 4 seconds))
      result shouldBe 6
  }
} 
```

它确实说明了：

> 1.  `Future`是某种类型的值的容器（即它接受一个类型作为参数，没有它就不能存在）。
>     你可以有一个`Future[Int]`or `Future[String]`or `Future[AwesomeClass]`- 你不能只有一个普通的`Future`.
>     一个花哨的术语是**type-constructor**。
>     相比之下， a`List`是一个类型构造函数（也是一个 Monad）。
>     A`List`是类型`Int,` `String`或任何其他类型的值的容器。没有包含类型的`List`/`Future`不存在。
> 2.  `Future`has`flatMap`和`unit`functions（因此也是一个`map`函数）。

# extjs - Ext.Net Rtl="true"

> ID：14394588
> 
> 赞同：0
> 
> 时间：2013-01-18T07:54:07.253
> 
> 标签：extjs, ext.net

根据 ExtJS，您可以使用 rtl:true 从右到左进行镜像

Ext.Net 2.1 支持这个吗？

如何将此属性与 Ext.Net 一起使用？

**更新** 如已回答，尚不支持，但我发现此 css 和 js 非常有用

[镜像.css，镜像.js](http://behrang.github.com/extjs-mirror/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:02:06.443

这首先在 ExtJS 4.2 中得到支持，之前没有任何版本。我对 Ext.Net 不太熟悉，但我怀疑这可能是因为他们也在使用核心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T04:24:16.230

正如@sra 所提到的，在 ExtJS 4.2 中引入了 RTL 支持，目前处于 Beta 版本中。当前在 SVN 中构建的 Ext.NET (2.2) 包括最新的 Ext JS 4.2 Beta 版本。Ext.NET 2.2 示例资源管理器中有几个示例演示了新的 RTL 支持。

Ext.NET 2.2 的最终版本将包括 Ext JS 4.2 的最终版本。

希望这可以帮助。

# java - 如果构造函数的参数是非法的，防止类的实例化？

> ID：14394590
> 
> 赞同：10
> 
> 时间：2013-01-18T07:54:12.237
> 
> 标签：java

我有一个公共构造函数，它需要一个参数（int age）来创建一个对象。我想检查传递的参数是否合法，例如年龄不能为负。如果它非法，则不要创建对象/实例。如果合法，没问题。

我只能想到一种方法来做到这一点 -

将构造函数设为私有。创建一个带有参数 (int age) 的静态方法来执行所有检查，如果您传递一个非法值，则返回 null。如果你传递一个合法的值，那么创建一个对象并返回它的引用。还有其他方法吗？也许来自构造函数本身？

**编辑：** 我想到了上述方法的一个问题。由于显而易见的原因，工厂方法/对象创建者方法只能是静态方法。如果工厂方法必须访问成员变量*（进行一些检查）*来创建对象会发生什么？然后，我们将被迫将该成员变量设为静态。这可能并非在所有情况下都可以。

是否有意义 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T07:56:22.840

> 还有其他方法吗？也许来自构造函数本身？

是的。我建议`Exception`从构造函数中抛出一个

```
public class Person
{

    int age;
    public Person(int age) throws Exception
    {
       if(age <= 0)
       {

          throw new Exception("Age is not allowed");
       }
       // Do some stuffs
       this.age = age;
    }

} 
```

**编辑：**

您也可以`IllegalArgumentException`按照 Till Helge Helwig 的建议使用

```
public class Person
{

    int age;
    public Person(int age) throws IllegalArgumentException
    {
       if(age <= 0)
       {

          throw new IllegalArgumentException("Age is not allowed");
       }
       // Do some stuffs
       this.age = age;
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T08:19:50.960

考虑这个例子，这是 java.util.HashMap 实现

```
public HashMap(int initialCapacity, float loadFactor) {
    if (initialCapacity < 0)
        throw new IllegalArgumentException("Illegal initial capacity: " +
                                           initialCapacity);
    if (initialCapacity > MAXIMUM_CAPACITY)
        initialCapacity = MAXIMUM_CAPACITY;
    if (loadFactor <= 0 || Float.isNaN(loadFactor))
        throw new IllegalArgumentException("Illegal load factor: " +
                                           loadFactor);

    // Find a power of 2 >= initialCapacity
    int capacity = 1;
    while (capacity < initialCapacity)
        capacity <<= 1;

    this.loadFactor = loadFactor;
    threshold = (int)(capacity * loadFactor);
    table = new Entry[capacity];
    init();
} 
```

更多内容`Effective Java 2nd Edition, Item 38: Check parameters for validity`由 Joshua Bloch 撰写，他也是上述代码的作者

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T08:05:17.437

为此目的使用静态工厂会更好。因为从构造函数中抛出异常并不是一个好主意。

```
public class Person
{     
    public static Person newPerson(int age) /* throws SomeException -- if you want */ {
        if (age <= 0 || age >= 150) {
           return null; // or throw an Exception - it is how you want   
        }
        return new Person(age);
    }

    private Person(int age) {
        // assign age to field value
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T07:59:37.260

`Exception`如果参数非法，则抛出。

```
public Test(int age) throws IllegalArgumentException {
    if(age<0)
        throw new IllegalArgumentException(...);
    this.age = age;
} 
```

# php - Html2Canvas Appsot 服务器宕机

> ID：14394594
> 
> 赞同：2
> 
> 时间：2013-01-18T07:54:25.397
> 
> 标签：php, canvas, base64, html2canvas

我为客户创建了一个自定义产品配置器，该客户使用 html2canvas 在自定义产品后生成产品图像。它以前工作得很好，但现在我意识到它正在尝试调用：html2canvas.appspot.com 并返回 404 错误。这是我的代码：

```
// JavaScript Document
$('#addToCart').live('click', function(event) {
    event.preventDefault();
    var target = $('.customstole');
    html2canvas(target, {
        onrendered: function(canvas) {
            var data = canvas.toDataURL();

            alert(data);
            $("#dataUrl").val(data);
            // data is the Base64-encoded image passed to a hidden input
            $('form#stoleAddForm').submit();
        }
    }); 
}); 
```

我的问题是……我如何修改此代码，使其根本不调用 html2canvas.appspot.com。我在堆栈上阅读了很多内容并进行了很多谷歌搜索，我听说因为我的图像和所有内容都在我的页面上，所以我不需要“代理”网址。但是我尝试添加代理：false，代理：''，和代理：未定义，它仍然不断向那里发出调用。

如果您想看到它的实际效果并触发它或其他任何东西：[http ://stoles.com/stoles/page/customStole](http://stoles.com/stoles/page/customStole)

用户名是：alex 密码是：superman

如果单击“添加到购物车”，您会看到它在 firebug 的 JS 窗格中引发 404 错误。

我对此感到茫然，因此不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:54:02.773

我阅读了 html2canvas 的来源，确实如您所说。如果您不需要代理，则必须禁用此选项，因为它默认为`http://html2canvas.appspot.com/`

尝试这个：

```
// JavaScript Document
$('#addToCart').live('click', function(event) {
    event.preventDefault();
    var target = $('.customstole');
    html2canvas(target, {
        onrendered: function(canvas) {
            var data = canvas.toDataURL();
            alert(data);
            $("#dataUrl").val(data);
            // data is the Base64-encoded image passed to a hidden input
            $('form#stoleAddForm').submit();
        },

        // disable the proxy feature
        proxy : false
    });
}); 
```

我已经使用萤火虫控制台对其进行了测试，它可以工作！（和萤火虫岩石！）

# android - Photoshop如何将两张图片融合在一起？第 2 部分：颜色/色调/饱和度滤镜和从 RGB 到 LCH 变换的快速变换

> ID：14394595
> 
> 赞同：-1
> 
> 时间：2013-01-18T07:54:26.263
> 
> 标签：android, photoshop, blending

如何将颜色/色调/饱和度混合应用为 Photoshop？我知道，GIMP 适用于 HSV/HSL 颜色模型，但 Photoshop - 适用于 CIE LCH。色调/颜色/饱和度混合对于 HSV/HSL 和 LCH 颜色空间存在差异。原始问题（[Photoshop 如何将两张图像混合在一起？](https://stackoverflow.com/questions/5919663/how-does-photoshop-blend-two-images-together)）适用于 HSV/HSL 颜色模型。

![LCH颜色模型](../Images/121e2674924f4dafe9f31a394ea727db.png)

![HSV 颜色模型](../Images/a100e0e498e5e0db112e7af77c41ad49.png)

我想要 LCH 颜色模型。你可以看到算法 RGB 到 LCH (RGB-XYZ-LAB-LCH)：[http ://dev.vkdev.pro/2013/01/lch-color-model-photoshop-blend-modes.html](http://dev.vkdev.pro/2013/01/lch-color-model-photoshop-blend-modes.html)

可以看到，该算法包含很多乘法、除法、sqrt、atan2、sin、cos、pow……而且这个算法在Android设备上运行起来非常非常慢。

如何快速完成从 RGB 到 LCH 的转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:35:12.693

您可以采取一些措施来提高转换速度。`sqrt()`只需执行 a和平方即可非常接近地近似伽玛校正。由于正确公式中的线性段偏移，非常接近，而且我碰巧知道有几个专业应用程序使用此快捷方式。在不支持颜色校准的设备上，比如手机，它会非常接近。

在`Rgb2Xyz()`中，乘法和加法只是矩阵乘法。如果您在 GPU 上进行转换（您应该这样做），这将是一行 glsl 代码。

事实上，在 GPU 上工作将使这些功能中的大部分代码行数少得多，因为它是一个高度并行的矢量处理器。所以这3个分割`Xyz2Lab()`线变成了glsl的一行。您也可以将 3 减去和乘以 1 或 2 行代码。它具有`sqrt()`, `atan2()`, `sin()`, `cos()`,`pow()`等功能。

[有关glsl 的文档，](http://www.opengl.org/documentation/glsl/)请参见此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T17:10:26.310

我知道这是一个旧帖子，但我喜欢在有机会时尽我所能回答这些问题，这样下一个人会比我有更好的帮助......

在我自己在不同环境中实现相同混合的运动中，我遇到了很多建议中提供的幼稚数学问题。除非您将 LCH 空间用于其他图像操作，否则可能不值得为此付出转换成本。你是对的; 转换涉及大量数学运算，如果要立即转换回 RGB，则需要优雅地处理色域外点。据我所知，这意味着在转换回 RGB 之前进行数据截断。*在之后*截断负和超大像素值*转换将洗掉图像的黑白区域。问题是在转换之前截断意味着尝试计算给定 H 和 L 的最大色度。您可以预先计算并使用 LUT，但速度并没有那么快。*

 *如果您想要一个提供良好（优于 HSL）颜色/亮度分离并且行为合理相似（用于非关键目的）的颜色模型，我建议改用 YPbPr。这是一个单一的仿射变换，所以它会更快，并且边界计算很简单，因为 RGB 色域的面保持平面。边界计算只是线平面相交数学（如果您想要更快的速度，甚至可以将这些计算纳入 LUT。同样，它不如 LAB 或 LUV 混合好；如果前景高度饱和，您可能会注意到很多，但如果速度和简单性很重要，它可能值得考虑。

值得研究的一个例子是 HuSL (www.husl-colors.org)。HuSL 是 CIELUV 的一个版本，其中色度空间被归一化为上述 RGB 色域的边界。那里可用的 WMaxima 工作表应该为您提供一些关于如何计算截断的最大色度的想法。虽然使用 HuSL 进行颜色混合比 HSL 效果更好，但归一化会扭曲色度 (S) 的表示，因此 LUV 的均匀性（我们经历所有这些分数幂运算的原因）丢失了。这里的实现也基于 CIELUV，而不是 CIELAB，尽管除非您正在进行图像编辑，否则其后果可能并不重要。

同样，如果示例有帮助，我在 Mathworks FEX 上有一个图像混合[功能](http://kr.mathworks.com/matlabcentral/fileexchange/52513-image-blending-functions)，它提供这些混合，以及 HuSL 和绑定的 LCHab/uv 转换工具（以及 LCHab 和 LCHuv 的最大色度 LUT）一个matlab脚本，但数学概念是一样的。

如果您根本不想处理边界色度计算，您可以考虑这样做：

1.  从图像中提取亮度。只需使用您想要的任何亮度定义进行加权平均。[0.299 0.587 0.114]*[RGB]' 是 Rec.601 iirc。
2.  在 HSL 中进行 HS 通道交换（GIMP 使用 HSL*而不是 HSV，而不是 HSI*）。转换回 RGB
3.  转换为您最喜欢的亮度-色度模型（例如 YPbPr）并将 Y' 替换为原始亮度。转换回 RGB。

这基本上是在图像编辑器中使用图层的通用亮度保存技术的编程方法。这会产生令人惊讶的好结果并使用常见的转换工具。

最后，我通过使用各种颜色模型的示例混合来提供我自己的[讨论](http://epicbeardquest.blogspot.com/2015/11/exploring-color-blend-mode.html)：HSV、HSI、HSL、CIELAB（在转换前后有截断）和 HSL+Y 方法。另外：如果你和我一样厚，对投影 RGB 空间的几何图形进行可视化可能有助于更好地理解在 LCH 中的点之间交换色度/亮度信息时发生的情况（以及管理的必要性） OOG 色点）

我会发布更多信息的链接，但我想他们不允许像我这样的人这样做。

编辑：实际上，我刚刚意识到一些事情。如果速度和均匀性很重要，并且可以接受稍微有限的色度范围（可能用于 UI 图形或其他内容），我的 YPbPr 建议的附录可能是合适的。考虑 YPbPr 中 RGB 色域的范围：一个倾斜的立方体，围绕中性轴站在其角落。该体积的最大旋转对称子集是双锥体。截断到这个双锥体而不是立方体面比计算与立方体面的交点要快得多。混合物更均匀，但最终具有有限的最大色度。有一些 HuSL 方法以相同的原理 (HuSLp) 运行，但在 YPbPr 中执行此操作允许访问比 HuSLp 更大一部分的 RGB 空间。那里' s 实际上是在我的博客上发表的一篇关于这样做的文章（有将其与 LAB 混合进行比较的示例），尽管当时我更关心的是均匀性。直到现在我才想到圆锥相交计算的速度。*

# php - 在命令行上运行 Laravel 任务时如何传递多个参数？

> ID：14394597
> 
> 赞同：11
> 
> 时间：2013-01-18T07:54:37.867
> 
> 标签：php, laravel

我用需要多个参数的方法创建了一个 Task 类：

```
class Sample_Task
{
    public function create($arg1, $arg2) {
        // something here
    }
} 
```

但似乎工匠只得到第一个论点：

```
php artisan sample:create arg1 arg2 
```

错误信息：

```
Warning: Missing argument 2 for Sample_Task::create() 
```

如何在此方法中传递多个参数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-08-20T09:59:17.957

*拉拉维尔 5.2*

您需要做的是将`$signature`属性中的参数（或选项，例如 --option）指定为**数组**。Laravel 用星号表示这一点。

**论据**

例如，假设您有一个 Artisan 命令来“处理”图像：

```
protected $signature = 'image:process {id*}'; 
```

如果你这样做：

```
php artisan help image:process 
```

…Laravel 将负责添加正确的 Unix 风格的语法：

```
Usage:
  image:process <id> (<id>)... 
```

要访问列表，在`handle()`方法中，只需使用：

```
$arguments = $this->argument('id');

foreach($arguments as $arg) {
   ...
} 
```

**选项**

我说它也适用于选项，你用`{--id=*}`in`$signature`代替。

帮助文本将显示：

```
Usage:
  image:process [options]

Options:
      --id[=ID]         (multiple values allowed)
  -h, --help            Display this help message

  ... 
```

所以用户会输入：

```
php artisan image:process --id=1 --id=2 --id=3 
```

要访问 中的数据`handle()`，您可以使用：

```
$ids = $this->option('id'); 
```

如果省略“id”，您将获得*所有*选项，包括“安静”、“详细”等的布尔值。

```
$options = $this->option(); 
```

您可以访问 ID 列表`$options['id']`

[Laravel Artisan 指南](https://laravel.com/docs/5.2/artisan)中的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T10:36:08.073

```
class Sample_Task
{
    public function create($args) {
       $arg1 = $args[0];
       $arg2 = $args[1];
        // something here
    }
} 
```

# sublimetext2 - 在崇高的Text2中没有[END]键移动到行尾？

> ID：14394598
> 
> 赞同：25
> 
> 时间：2013-01-18T07:54:55.493
> 
> 标签：sublimetext2

我已经阅读了 Sublime Text 2 的键绑定文件

```
{ "keys": ["end"], "command": "move_to", "args": {"to": "eol", "extend": false} }, 
```

我想知道我们是否可以在不`END`输入键盘的情况下移动到行尾。

在 vim 中，我只是`ESC`and `A`，那么光标将在行尾。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-18T19:24:31.303

要更改键绑定，请打开`Key Bindings - User`首选项并在方括号之间添加新行。例如，要将键绑定设置为`Control-Alt-Command-A`您将使用：

```
{ "keys": ["ctrl+alt+super+a"], "command": "move_to", "args": {"to": "eol", "extend": false} } 
```

如果您要添加的这一行不是右方括号之前的最后一行，那么您需要在行尾包含一个逗号。例如：

```
[
{ "keys": ["ctrl+alt+super+a"], "command": "move_to", "args": {"to": "eol", "extend": false} },
{ "keys": ["ctrl+shift+t"], "command": "open_recent_file", "args": {"index" : 0} },
{ "keys": ["super+v"], "command": "paste_and_indent" },
{ "keys": ["super+shift+v"], "command": "paste" }
] 
```

您应该检查`Key Bindings - Default`首选项以确保您在此处设置的键绑定不会与您可能使用的任何其他内容冲突。

您不应该`Key Bindings - Default`直接编辑首选项，因为它们将在 Sublime Text 2 升级中被覆盖。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-16T18:26:09.237

Mac 上的 Command+右箭头键。Windows 上的 Control+右箭头键

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-09T21:11:02.100

1)**点击`Super+Shift+P`**打开*命令面板*（`Ctrl+Shift+P`在 Windows 上）

2）**键入“kbu”**打开*首选项：键绑定 - 用户*

3）**将以下代码复制/粘贴**到其中：

```
[
    { "keys": ["super+;"], "command": "move_to", "args": {"to": "eol", "extend": false} }
] 
```

（注意：如果文件不是空的，那么显然你知道该怎么做。）

4)**点击`Super+S`**( `Ctrl+S`) 保存，一切就绪！

我选择了`Super+;`快捷方式，因为我经常用 PHP 编写，并且用分号结束行很方便。其他选项可能是`Ctrl+;`或`Super+.`其他您觉得方便的选项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-29T03:52:38.223

像终端一样，只需按`CTRL + e`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-18T22:43:58.523

如果你是 vim 的粉丝，你可以在 Sublime Text 2 中启用 Vintage 模式

> 首选项：设置 - 用户

然后从ignore_packages 中删除Vintage。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-19T03:05:59.240

绑定一些能让你更快的东西怎么样？这就是我使用的（来自键绑定 - 用户）：

```
[
{ "keys": ["alt+;"], "command": "move_to", "args": {"to": "eol", "extend": false} },
{ "keys": ["alt+shift+;"], "command": "move_to", "args": {"to": "eof", "extend": false} }
] 
```

这样，去我使用的行尾，`alt+;`去我使用的 eof`alt+shift+;`

或者使用 Vim...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T15:11:21.553

您可以将密钥替换为“结束”以外的其他内容。但是不要编辑主键绑定文件。将更改添加到用户版本，它将覆盖默认值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-10T15:23:37.287

我也在 Sublime 中使用 [ESC] 和 [A] :-) - 我知道你问这个问题已经很长时间了，但我最近开始使用 VIM，并将 Sublime 配置为使用[vintage mode](http://www.sublimetext.com/docs/2/vintage.html)。由于我对 Sublime 也很陌生，我不确定 100%，但我认为您应该编辑用户首选项文件，而不是上面链接中建议的默认首选项文件，因为我收集默认文件可能会被覆盖，并且用户偏好将覆盖默认值。希望这可以帮助。

# android - 当我编写 Android 服务时，Logcat 中什么都没有

> ID：14394599
> 
> 赞同：1
> 
> 时间：2013-01-18T07:55:07.273
> 
> 标签：android

当我在没有 Andorid Activity 的情况下编写 Android 服务时，即使应用程序强制关闭，Logcat 也没有任何内容。
有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:17:35.843

通常，至少 ActivityManager 应该在您关闭它时告诉它正在杀死应用程序。因此，是的，有一个问题。

如果您从 IDE 查看 logcat，请检查您的过滤器（通常在左侧面板内）和日志级别。例如，如果级别设置为 ，则可能是相对静音`error`。

另一种可能的情况是您有多个活动设备和/或模拟器。在这种情况下，IDE logcat 查看器有时会感到困惑，只显示来自不同设备的消息。

要直接查看 logcat 消息（而不是通过 IDE），请使用登录设备`adb shell`并键入`logcat`.

# directoryservices - 复制的 LDAP 服务器

> ID：14394601
> 
> 赞同：1
> 
> 时间：2013-01-18T07:55:16.227
> 
> 标签：directoryservices, openldap, ldap-query

当我们重新启动复制的（消费者或镜像）LDAP 服务器时，即使它不同步，它也会接受来自客户端的连接。是预期的吗？即客户端可以与未完全恢复的 LDAP 服务器绑定吗？如果是，那么有没有办法禁止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:56:26.037

这就是 OpenLDAP 的工作原理。我不知道有什么方法可以防止它。如果您使用 refreshAndPersist ，我会认为它不会太不同步，除非它已经关闭了一天左右。

# c++ - 有没有办法在编译时间和运行时间之间专门化一个函数？

> ID：14394605
> 
> 赞同：7
> 
> 时间：2013-01-18T07:55:41.937
> 
> 标签：c++, c++11, constexpr

使用`constexpr`，可以根据参数在编译时或运行时评估函数。但通常，编译时和运行时的算法必须不同。例如。考虑阶乘的 constexpr 版本。

```
constexpr int fact(int n)
{
return (n)?n*fact(n-1):1;
} 
```

如果`n`发生在运行时，该函数会不会比一个 forloop 效率低？是否有一些模板魔术来确定函数是在编译时执行还是在运行时执行并使用不同的算法？

**更新**：
阶乘只是一个例子。如果不受限制地编码，所有`constexpr`功能是否都像它们一样有效？`constexpr`例如：

```
constexpr int combinations(int n, int k)
{
//Assume all error conditions and edge conditions are taken care with ternary operator ?:
return fact(n)/(fact(k)*fact(n-k);
} 
```

如果函数是在运行时编写的，它可以从[Memoization](http://en.wikipedia.org/wiki/Memoization)中受益。即使这是可能的，我想也很难表达这个函数，使其`constexpr`在运行时既高效又尽可能高效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:07:26.697

不，据我所知，您无法检测到编译器如何在给定调用中使用该函数，或者指导编译器根据常量使用不同的实现。

但首先，`constexpr`函数仅限于单个`return`语句，这意味着编译器可以（通常）轻松应用尾递归优化，将递归调用变成循环。因此，这个问题是关于如何进行**过早优化**，这不是一个好主意。低级优化是编译器的工作：顺其自然。

其次，如果你真的想做编译器的工作，那么你可以只*命名函数*，而不是试图毫无意义地将两个不同的函数实现塞进一个。那是为了什么目的？只有默默无闻。

* * *

对于给出的特定示例，

```
constexpr int fact(int n)
{
    return (n)?n*fact(n-1):1;
} 
```

编译器必须认识到它可以被重写为尾递归。正如我从我对早先关于它的 SO 问题的测试中回忆的那样，即使是 Visual C++ 编译器也能做到这一点。尽管出于某种莫名其妙的原因（可能与原始 x86 处理器设计有关），但它被浮点类型的使用所困扰：相同的高级逻辑，不同的低级结果。

作为一项稍微不那么激烈的帮助编译器工作，在测量并发现该函数是使您的应用程序慢得无法接受的函数之后，并且在检查了机器代码并发现编译器无法识别该函数的尾部之后-递归，可以改写如下：

```
constexpr int fact( int multiplier, int n )
{
    return (n != 0? fact( multiplier*n, n-1 ) : multiplier);
}

constexpr int fact( int n )
{
    return fact( 1, n );
} 
```

免责声明：编译器的脏手没有触及代码。

# unity3d - 如何在 unity3d 运行时创建 DropDownList

> ID：14394606
> 
> 赞同：0
> 
> 时间：2013-01-18T07:55:44.240
> 
> 标签：unity3d

我是 Unity 新手，所以我不知道如何在运行时在 Unity3d 中创建 DropDownList

[根据以下链接http://wiki.unity3d.com/index.php?title=PopupList](http://wiki.unity3d.com/index.php?title=PopupList)中给出的示例，一旦场景加载，我就可以创建列表

但我不知道如何在运行时创建它们，我尝试过创建这个类。

```
#pragma strict
class CustomList extends MonoBehaviour 
{
    var title:String;
    var top:int;
    var left:int;
    var width:int;
    var height:int;
    private var listEntry = 0;
    private var list : GUIContent[];
    private var listStyle : GUIStyle;
    private var showList = false;
    public function CustomList(title:String,top:int,left:int,width:int,height:int){
       this.title = title;
       this.top=top;
       this.left = left;
       this.width = width;
       this.height = height; 

       list = new GUIContent[1]; 
       list[0] = new GUIContent("Granite");
       // Make a GUIStyle that has a solid white hover/onHover background to indicate highlighted items
       listStyle = new GUIStyle();
       listStyle.normal.textColor = Color.white;
       var tex = new Texture2D(2, 2);
       var colors = new Color[4];
       for (color in colors) color = Color.white;
       tex.SetPixels(colors);
       tex.Apply();
       listStyle.hover.background = tex;
       listStyle.onHover.background = tex;
       listStyle.padding.left = listStyle.padding.right = listStyle.padding.top = listStyle.padding.bottom = 4;  

    }

    function Start () {

    }
    function OnGUI () {
       Debug.Log("title for list is  : "+title);
       GUI.Label (Rect(10, 10, 100, 10), "You picked !");
       if (Popup.List (Rect(top, left, width, height), showList, listEntry, GUIContent(this.title), list, listStyle)) {
         GUI.Label (Rect(200, 70, 400, 20), "You picked !");
       }
    }
} 
```

但我无法将它添加到我的 for 循环中，如下所示

```
for(var objCategory:Category in objCategoryList.listCategory){

       new CustomList(objCategory.categoryName,100,ctr*100,100,20);
       ctr++;
    } 
```

任何人都可以建议这个代码片段中有什么问题，以及在 unity3d 中的 javascript 中执行此操作的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:25:57.403

我已将代码更改为以下以使其正常工作

```
#pragma strict
class CustomLayout extends  MonoBehaviour 
{
    private var listEntry = 0;
    private var list : GUIContent[];
    private var listStyle : GUIStyle;
    private var showList = false;
    public function testLayout(){       
        list = new GUIContent[1];   
        list[0] = new GUIContent("Granite");
        // Make a GUIStyle that has a solid white hover/onHover background to indicate highlighted items
        listStyle = new GUIStyle();
        listStyle.normal.textColor = Color.white;
        var tex = new Texture2D(2, 2);
        var colors = new Color[4];
        for (color in colors) color = Color.white;
        tex.SetPixels(colors);
        tex.Apply();
        listStyle.hover.background = tex;
        listStyle.onHover.background = tex;
        listStyle.padding.left = listStyle.padding.right = listStyle.padding.top = listStyle.padding.bottom = 4;            
    }

    function OnGUI () {
        var ctr:int =0;     
        for(var objCategory:Category in DropdownList.objCategoryList.listCategory){
            if (Popup.List (Rect(50, 50+(ctr*25), 100, 20), showList, listEntry, GUIContent(objCategory.categoryName), list, listStyle)) {
                GUI.Label (Rect(200, 70, 400, 20), "You picked !");
            }
            ctr++;
        }       
    }
} 
```

并像这样在主类中实例化

```
gameObject.AddComponent(CustomLayout); 
```

# javascript - 拖放 - Freecell

> ID：14394607
> 
> 赞同：0
> 
> 时间：2013-01-18T07:55:58.457
> 
> 标签：javascript, project

我目前正在为一个学校项目用 javascript 制作一个 freecell 游戏。我想实现拖放。我尝试了几件事，但没有任何成功。

所有卡片都必须是可拖动的，并且必须可以在这张卡片上放置其他卡片。

```
document.write("<table>");
document.write("<tr>");
for(i=0; i<8; i++) {
    document.write("<td><img class='card' src='./resources/images/cards/" + tmp_kaarten[i] + ".png' alt='" + tmp_kaarten[i] + "'</td>");
    removeItem(tmp_kaarten, tmp_kaarten[i]);
}
document.write("</tr>");
document.write("</table>"); 
```

我就是这样展示我的牌的。所以我还必须检测我拖放了哪张卡片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:08:54.973

您必须将拖动事件和放置目标绑定到您的卡片。如果您被允许使用外部库，我建议您查看[jQuery UI](http://jqueryui.com/draggable/)。

您是否尝试过查看一些开发人员资源？

*   [Mozilla 开发者网络：拖放](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_and_Drop)
*   [Mac 开发者库：使用 JavaScript 拖放](https://developer.apple.com/library/mac/#documentation/AppleApplications/Conceptual/SafariJSProgTopics/Tasks/DragAndDrop.html)
*   [MSDN：DragEvent 对象 (Internet Explorer)](https://msdn.microsoft.com/en-us/library/ie/ff974339%28v=vs.85%29.aspx)
*   [Dev.Opera：HTML5 拖放](http://dev.opera.com/articles/view/drag-and-drop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:07:15.780

不要指望这会很容易，这里有一些基本示例，您可以从这些示例开始并在滴下的结果上绘制图像。尝试一下。

[尝试检查 JQueryUI](http://jqueryui.com/draggable/)

[这是一个相当不错的javascript注册光标位置并捕捉鼠标上下移动的例子](http://www.webreference.com/programming/javascript/mk/column2/index.html)

[HTML5 是另一种可能性](http://www.w3schools.com/html/html5_draganddrop.asp)

# c++ - 我是否必须在每个头文件上键入定义？

> ID：14394610
> 
> 赞同：9
> 
> 时间：2013-01-18T07:56:15.707
> 
> 标签：c++, oop, typedef

假设我有一个`std::vector`of `std::string`s。

```
// Foo.h
class Foo {
    std::vector< std::string > mVectorOfFiles;
} 
```

然后我`typedef`把它变成了一个`StringVector`类型。

```
// Foo.h
typedef std::vector< std::string > StringVector;

class Foo {
    StringVector mVectorOfFiles;
} 
```

如果我有另一个需要一个`StringVector`对象的类......

```
// Bar.h
class Bar {
    Bar( const StringVector & pVectorOfFiles ); // I assume this produces a compile error (?) since Bar has no idea what a StringVector is
} 
```

...我必须`typedef`在头文件中再次使用`Bar`吗？

```
// Bar.h
typedef std::string< std::vector > StringVector;
class Bar {
    Bar( StringVector pListOfFiles );
} 
```

是否可以将其`typedef std::vector< std::string > StringVector`放在一个文件中并让其他所有类都知道该类型`StringVector`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T07:57:56.260

`#include "Foo.h"`您获得的所有文件`typedef`. 所以不，您不必在每个文件*中*复制它（只要它包含`Foo.h`. 如果适合您的需要，您可以将其放置`typedef`在专用文件中。在您的情况下，这将是有意义的并且将是一个改进，因为`Bar.h`不应依赖于`Foo.h`具有`typedef`和必要的包含的事实。

我会保持简单并将其限制为一种类型，以包含在使用该类型的所有文件中：

```
// StringVector.h
#ifndef STRINGVECTOR_H_
#define STRINGVECTOR_H_

#include <vector>
#include <string>

typedef std::vector< std::string > StringVector;

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:58:04.420

当然不是，您不必在所有头文件中都键入定义，只需在其余源文件包含的任何头文件中进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:06:52.747

而是创建一个类。

```
class Files {
}; 
```

然后你可以在需要的地方使用前向声明；

```
class Files; 
```

您将封装适合文件的行为。

# git - SVN 到 GIT，在根目录中带有标签

> ID：14394618
> 
> 赞同：0
> 
> 时间：2013-01-18T07:56:40.903
> 
> 标签：git, svn, version-control, git-svn

我正在尝试从结构如下的旧 SVN 存储库创建一个新的 git 存储库：

```
/root
    trunk
    build_scripts
    packager
    0.1.0
    0.1.1
    0.1.2
    ...etc... 
```

0.x 显然传统上位于`tags`目录中，并且是软件的版本`trunk`，代表需要保留的软件的打包版本。另外两个是打包测试的支持脚本。

主要是我对存储库进行了提交——每个版本都是用一个`svn copy`命令创建的。

这可能不是最佳实践，但它很容易开发——我检查了构建环境，随后检查了主干供我使用。当我准备好时，打包脚本会复制新标签并为我创建一个可下载的包。

我该如何清理它并将其带入 git 存储库？理想情况下，我想使用最佳实践，并希望保留所有历史记录。

我试过使用`svn2git`：

```
svn2git path-to-repo --trunk trunk --nobranches --authors=/path/to/authors.txt 
```

它为我填充了一个带有主干的 repo，但我没有看到任何标签（`git tag`什么都不显示）。理想情况下，我也希望将其他脚本也带过来。

我使用 GIT 的主要目的是我的开发方法 —— 有时我被困在远离测试机器的开发中，并希望提交到一个测试存储库，在那里我可以在将其推向上游之前修复错误。现在我只需将损坏的东西提交到中央 SVN 存储库并在测试机器上检查。这显然很糟糕。

如有必要，我很乐意花一些时间清理 SVN 存储库——我还没有准备好放弃它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:12:22.650

清理 SVN 存储库对您没有帮助，因为您无法移动现有修订版中的目录，而这正是您要导入的内容。

我没有经验`svn2git`，但`git svn`我只是：

*   仅初始化中继：

    ```
    git svn init -A /path/to/authors.txt --prefix=svn/ -t trunk url://to/svn/root 
    ```

*   通过手动编辑 svn 部分手动列出我要导入的标签和分支，使其看起来像：

    ```
    [svn-remote "svn"]
    url = url://to/svn/root
    fetch = trunk:refs/remotes/svn/trunk
    fetch = build_scripts:refs/remotes/svn/build_scripts
    fetch = packager:refs/remotes/svn/packager
    tags = 0.*:refs/remotes/svn/tags/0.* 
    ```

    我不完全确定标签行会起作用；如果没有，您始终可以明确列出所有现有标签。

*   `git svn fetch`一切设置好后运行

不幸的是，当在 svn 存储库中创建新分支时，您必须在获取到 git 之前添加匹配模式；如果 git-svn 已经获取了一个修订版并且没有创建一个分支，因为它没有一个模式，它将无法返回它并且只会在其上导入任何新的修订版。而且我没有找到任何方法告诉它重新获取那些分支。

# c# - 使用 ASIFormDataRequest 将图像上传到服务器

> ID：14394647
> 
> 赞同：0
> 
> 时间：2013-01-18T07:58:52.323
> 
> 标签：c#, iphone, .net, objective-c

嗨，为我的 iPhone 应用程序构建一个服务，并且需要具有从用户那里获取图像的功能： 到目前为止，我曾经使用这种方法只获取文本：

```
string input = null;

using (StreamReader sr = new StreamReader(Request.InputStream))
{
      input = sr.ReadToEnd();
} 
```

我应该如何从帖子中获取图像？

这就是我从 iphone 应用程序发送图像的方式：

```
imageRequest = [ASIFormDataRequest requestWithURL:url];
[imageRequest addData:imageData withFileName:@"someFileName.jpeg" andContentType:@"image/jpeg" forKey:@"uploadedImage"];
[imageRequest setDelegate:self];
[imageRequest setRequestMethod:@"POST"];
[imageRequest startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:31:48.013

您无法通过添加带有名称的图像来上传图像。首先将 UIImage 对象转换为 Base64Encoding 字符串，然后将该字符串发送到服务器。

从链接下载支持文件 在 [此处输入链接描述](http://iphonesdksnippets.com/?tag=/uiimage)

以及使用这些方法

```
- (NSString*) stringFromImage:(UIImage*)image
{
    if(image){
        NSData *dataObj = UIImagePNGRepresentation(image);
        return [dataObj base64Encoding];
    } else {
        return @"";
    }
}

- (UIImage*) imageFromString:(NSString*)imageString
{
    NSData* imageData =[NSData dataWithBase64EncodedString:imageString];
    return [UIImage imageWithData: imageData];

} 
```

[还要在 Base64图像转换](http://iphonesdksnippets.com/post/2010/03/14/Convert-image-tofrom-text-%28Base64%29.aspx)中检查 Image to string 和 string to image 的此链接

它可以帮助你

# core-audio - 音频队列不播放声音

> ID：14394650
> 
> 赞同：0
> 
> 时间：2013-01-18T07:58:55.953
> 
> 标签：core-audio, audioqueue, audioqueueservices

我正在制作使用音频队列的应用程序。我通过阅读和学习书籍来编写这些代码。

我只想简单地播放音频文件。它没有显示任何编译错误，但它不会发出声音。

请帮我。

AudioQueuePayer.h

```
@interface AudioQueuePlayer : NSObject{
    AudioQueueRef audioQueueObject;
    AudioFileID audioFileID;
    UInt32 numPacketsToRead;
    SInt64 startingPacketCount;
    BOOL donePlayingFile;
}

@property UInt32 numPacketsToRead;
@property AudioFileID audioFileID;
@property SInt64 startingPacketCount;
@property BOOL donePlayingFile;

-(void) prepareAudioQueue;
-(void)play; 
```

音频队列播放器.m

```
-(void)prepareAudioQueue{
    //open Audio File
    NSString *path = [[NSBundle mainBundle] pathForResource: @"Arles_001_44"
                                                 ofType: @"wav"];
    NSURL *fileURL = [NSURL fileURLWithPath:path];

    AudioFileOpenURL((__bridge CFURLRef)fileURL,kAudioFileReadPermission,kAudioFileWAVEType,&audioFileID);

    //get audiostreamBasicDescription
    AudioStreamBasicDescription audioFormat;
    UInt32 size = sizeof(AudioStreamBasicDescription);
    AudioFileGetProperty(audioFileID,kAudioFilePropertyDataFormat,&size,&audioFormat);

    //making audioQueue Object
    AudioQueueNewOutput(&audioFormat,outputCallback,(__bridge void *)(self),NULL,NULL,0,&audioQueueObject);

    UInt32 maxPacketSize;
    UInt32 propertySize = sizeof(maxPacketSize);
    AudioFileGetProperty(audioFileID,kAudioFilePropertyPacketSizeUpperBound,
                     &propertySize,
                     &maxPacketSize);
    printf("maxPacketSize = %d\n",maxPacketSize);
    startingPacketCount = 0;
    AudioQueueBufferRef buffers[3];
    numPacketsToRead = 1024;
    UInt32 bufferByteSize = numPacketsToRead * maxPacketSize;
    NSLog(@"bufferByteSize = %d",bufferByteSize);
    int bufferIndex;
    for (bufferIndex = 0;bufferIndex < 3 ;bufferIndex++){

    //make buffers
        AudioQueueAllocateBuffer(audioQueueObject,bufferByteSize,&buffers[bufferIndex] );
        outputCallback((__bridge void *)(self),audioQueueObject,buffers[bufferIndex]);
        if (donePlayingFile)break;
    }

}

- (id)init{
    self = [super init];
    if (self != nil){
        [self prepareAudioQueue];
    }
    return self;
}

- (void)play{
    AudioQueueStart(audioQueueObject,NULL);
    NSLog(@"play Audio Queue");
}

void outputCallback(void *inUserData,
                AudioQueueRef inAQ,
                AudioQueueBufferRef inBuffer){
    //write herelater.
} 
```

在其他班级

```
AudioQueuePlayer *AQP = [AudioQueuePlayer alloc];
[AQP play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:40:46.017

如果你是`init`你的`AudioQueuePlayer`而不是只是会发生什么`alloc`？

```
AudioQueuePlayer *AQP [[AudioQueuePlayer alloc] init]; 
```

此外，大多数 CoreAudio 函数都会返回一个`OSStatus`您可能会检查的错误代码，例如：

```
OSStatus err;
err = AudioFileOpenURL((__bridge CFURLRef)fileURL,kAudioFileReadPermission,kAudioFileWAVEType,&audioFileID);
if (err != noErr) {
    //do something
} 
```

错误检查可能有助于找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T11:54:18.727

可能您应该首先初始化共享音频会话，如此处所述 - [https://stackoverflow.com/a/44805489/57449](https://stackoverflow.com/a/44805489/57449)

是的，为了从 AudioQueue 获取声音，您也应该初始化 AudioSession。遇到类似的问题，在我的情况下，AudioSession 仅在 AVCaptureSession 成功使用（在内部初始化会话）后才产生声音。

# jquery - 如何使用jquery使用参数值触发和事件

> ID：14394653
> 
> 赞同：0
> 
> 时间：2013-01-18T07:59:10.137
> 
> 标签：jquery

我想在用户将鼠标悬停时显示一个参数值。我想用jquery来做。我的函数返回一个未定义的值。

```
<script type="text/javascript">
$(function showinfo(id, a,b){
    $('div').mouseover(function(){
        var html= '<div>'+ a +'</div> <div>'+b+'</div>';
        $('body').append(html)
    })
})
</script> 
```

HTML：

```
<div onmouseover="showinfo(this, '50','60')">show info</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:15:17.590

我建议稍微不同地做：

```
<div id="container">
    <div id="showInfo" >show info</div>
</div> 
```

和 jQuery：

```
$(document).ready(function() {
  $("#showInfo").mouseover(function() {
    showInfo($(this).attr("id"), '50', '60');
  });
});

function showInfo(id, a, b) {
  var html = '<div>'+a+'</div><div>'+b+'</div>';
  $("#container").append(html);
} 
```

你也可以看看jQuery的悬停功能。jsFiddle在这里：http: [//jsfiddle.net/KvMuD/](http://jsfiddle.net/KvMuD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:01:57.567

```
function showInfo(id, a, b) {
  var html = '<div>'+a+'</div><div>'+b+'</div>';
  $(body).append(html);
} 
```

然后：

```
<div onmouseover="showinfo(this, '50','60')">show info</div> 
```

将是一个更清洁的版本。但尚不清楚为什么要将悬停的实际 div 传递到函数中。你想用它做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:01:15.483

你有一些语法错误：

```
<script type="text/javascript">
$(document).ready(function(){
    function showinfo(id, a,b){
        var html= '<div>'+ a +'</div> <div>'+b+'</div>';
        $('body').append(html);
    }
});
</script> 
```

# firefox - Favicon 不仅仅显示在 Firefox 的一页上

> ID：14394661
> 
> 赞同：0
> 
> 时间：2013-01-18T07:59:39.353
> 
> 标签：firefox, grails, favicon

我的所有页面都有模板。在此模板中，我使用以下代码显示了一个 favicon：

```
<r:external uri="/images/favicon.ico"/> 
```

在静态 html 中，它生成以下代码：

```
<link href="<somelink>.ico" rel="shortcut icon" /> 
```

在 Chrome favicon.ico 中，所有页面都正确显示，但在 Firefox 中，只有一个页面未显示。此页面与其他页面没有什么不同。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:03:35.440

定义`<base>`标签：

像这样：

```
<html>
   <title>THE TITLE</title>
   <base href="http://YOUR_URL.COM"/>
   ........
</html> 
```

# ruby - 使用 in_groups_of rails 辅助方法

> ID：14394671
> 
> 赞同：0
> 
> 时间：2013-01-18T08:00:39.280
> 
> 标签：ruby, ruby-on-rails-3

我正在使用 in_groups_of rails 方法在两列中显示记录集。是否可以为每列应用 css 样式？

例如：

```
(1..10).in_groups_of(2).each do |arr|
  puts arr
end 
```

这将给出 [[1, 2], [3, 4], [5, 6], [7, 8], [9, 10]]。

可以这样应用css吗？

```
<article class="column">for one column say [1,3,5,7,9]</article>

<article class="column">for one column say [2,4,6,8,10]</article> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:07:25.963

您可以使用`cycle`一组类名来来回交换类名。我认为文档可能更清楚，我可能是：[http ://apidock.com/rails/ActionView/Helpers/TextHelper/cycle](http://apidock.com/rails/ActionView/Helpers/TextHelper/cycle)

# c# - WinForms TreeView 的自定义展开/折叠图像

> ID：14394674
> 
> 赞同：0
> 
> 时间：2013-01-18T08:00:52.753
> 
> 标签：c#, .net, winforms, treeview

是否有可能更改 .NET WinForms TreeView 控件的默认展开\折叠图像 (+\-)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:10:56.557

不太可能。众所周知，WinForms 是不可定制的。您最好的选择是尝试切换到 WPF。

# vba - 使用删除查询删除 access 2007 中除一列之外的所有内容

> ID：14394675
> 
> 赞同：0
> 
> 时间：2013-01-18T08:01:02.493
> 
> 标签：vba, ms-access

我对 VBA Access 脚本中的 SQL 脚本不熟悉。你能告诉我如何删除除一列之外的所有列中的数据吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:09:16.877

当您说删除时，如果您的意思是用 Null 替换列值，您可以通过`UPDATE`查询来做到这一点。

```
UPDATE YourTable
SET
    ColumnA = Null,
    ColumnB = Null 
```

对要删除其数据的所有列执行此操作。

如果这不是您的想法，请向我们提供更详细的信息，以帮助我们了解您想要什么。

# javascript - 为什么 mediaelements.js 不能在 Internet Explorer 8 中缩放 youtube 视频？

> ID：14394681
> 
> 赞同：1
> 
> 时间：2013-01-18T08:01:33.250
> 
> 标签：javascript, html, internet-explorer, video, mediaelement.js

我在网站上使用 jQuery、boostrap 和 mediaelements。没什么太花哨的..这段代码在我检查过的每个浏览器上都可以正常工作，但不能在 IE8 上缩放视频。

```
<div class="row-fluid">
<div class="span12">
<video preload="none" width="100%" height="100%">
<source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI" />
</video> 
</div>
</div> 
```

这可能是什么原因造成的？这是强制性的截图： http: [//postimage.org/image/6q75jwc8b/](http://postimage.org/image/6q75jwc8b/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:46:48.283

我自己已经弄清楚了。我**需要**设置视频大小。然后我可以在 CSS 中使用 width:100% 和 height:100% 。所以对于上面的例子，这将是：

```
<head>
<style>
video {
    width:100%;
    height: 100%;
}
</style>
...
</head>
...

<div class="row-fluid">
<div class="span12">
<video preload="none" width="960" height="540">
<source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI" />
</video> 
</div>
</div> 
```

也许这也会对其他人有所帮助！

# android - Android：如何阻止在 android 中启动短信应用程序

> ID：14394683
> 
> 赞同：0
> 
> 时间：2013-01-18T08:01:35.533
> 
> 标签：android, sms

我需要阻止 SMS/Messaging 应用程序启动.. 当 Android 的默认消息传递应用程序启动时，我需要知道适当的接收者，或者有任何其他方法可以做到这一点

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:03:03.820

不。而且不应该——恶意软件太容易滥用，因为不让人们运行竞争对手的软件，或者阻止用户使用他们的手机（在病毒的情况下）。

# excel - 批量创建文本文件，每个新文件都有从excel中提取的不同文本

> ID：14394685
> 
> 赞同：0
> 
> 时间：2013-01-18T08:01:46.963
> 
> 标签：excel, vba, batch-file, cmd

我正在尝试从模板文本文件创建多个文本文件；但是，在每个新生成的文件中，都应该添加一个从 excel 行中提取的新文本行。

例如：

模板文本文件内容

```
Line1
Line2 
```

Excel文件有几行，每行都有不同的文本，例如

```
Row1text
Row2text
Row3text 
```

所以我需要做的是从 Excel 行中提取文本并将其添加到基于文本模板文件的新生成的文本文件中，

所以结果会是这样的

GeneratedText1.txt

```
Line1
Line2
Row1text 
```

生成的Text2.txt

```
Line1
Line2
Row2text 
```

生成的Text3.txt

```
Line1
Line2
Row3text 
```

excel中有多少行，就应该生成多少个文本文件。新文件的名称也应该在某处预定义。最好的方法是什么？一些命令行会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:39:59.980

尝试这个：

```
@echo off

setlocal EnableDelayedExpansion

set i=1
for /f %%l in (input.csv) do (
  >GeneratedText!i!.txt type template.txt
  >>GeneratedText!i!.txt echo %%l
  set /a i+=1
)

endlocal 
```

**编辑：**像这样修改批处理文件，让它从第一个字段读取输出^(文件)名`input.csv`：

```
@echo off

setlocal EnableDelayedExpansion

for /f "delims=, tokens=1*" %%f in (input.csv) do (
  >"%%~f" type template.txt
  >>"%%~f" echo %%g
)

endlocal 
```

# c# - 正则表达式找到某种递归模式

> ID：14394688
> 
> 赞同：0
> 
> 时间：2013-01-18T08:02:04.823
> 
> 标签：c#, .net, regex

这是我的字符串：

```
SELECT x FROM Table1 WHERE (SELECT y FROM Table2 LIMIT 1) > 15 LIMIT 4 
```

这是我的正则表达式：

```
SELECT .+ FROM .+ LIMIT (?<LIMITCOUNT>\d{1,4}) 
```

我希望它进行 2 次捕获；一个是整个字符串，另一个是括号中的部分，但它只捕获整个字符串。我的出路是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:15:47.510

您可以在前瞻中捕获它

```
(?=((?<=^|\s)SELECT .+? LIMIT \d{1,4}(?=\s|$)|(?<=\()SELECT .+? LIMIT \d{1,4}(?=\)))) 
```

这将在您的示例中捕获 2 个查询！使用组 1 访问它

[在这里](http://regexhero.net/tester/)试试

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T08:36:59.113

我明白你在这里的意思。当您调用`Matches`以获取多个匹配项时，它不会搜索“在”其他匹配项中的匹配项；它找到第一个匹配项，然后在该匹配项*结束后*再次开始查找，依此类推。

我不*相信*有一种开箱即用的方式来做你想做的事，所以你需要手动完成。您需要进行一些更改：

1.  使您的第一个`.+`非贪婪 ( `.+?`)`FROM`匹配第一个`FROM`，而不是第二个。目前它与第二个匹配`FROM`，这弄乱了第 2 步：
2.  在您的第二个周围添加另一个捕获组`.+`，例如`(?<PotentialNested>.+)`。保持贪婪，以便`LIMIT`匹配第二个`LIMIT`，而不是第一个。
3.  编写一个方法，在检查初始字符串是否匹配后，继续`PotentialNested`递归地检查这些捕获是否有进一步的匹配：

```
public static IEnumerable<Match> NestedMatches(this Regex regex, string input)
{
    var potentialNested = new Queue<string>();
    foreach (Match m in regex.Matches(input))
    {
        yield return m;
        potentialNested.Enqueue(m.Groups["PotentialNested"].Value);
    }
    while (potentialNested.Count > 0)
    {
        foreach (Match m in regex.Matches(potentialNested.Dequeue()))
        {
            yield return m;
            potentialNested.Enqueue(m.Groups["PotentialNested"].Value);
        }
    }
} 
```

**编辑**：实际上，毕竟，如果您有两个相邻的嵌套术语，它仍然不起作用，例如

```
SELECT x FROM Table1 WHERE
((SELECT y FROM Table2 LIMIT 1) + (SELECT y FROM Table2 LIMIT 1)) > 15
LIMIT 4 
```

如果这是一个潜在的输入，您可以尝试确保您的`PotentialNested`捕获组平衡括号：

```
(?<PotentialNested>((?<BR>\()|(?<-BR>\))|[^()]*)+) 
```

# javascript - 在chrome中更改网址的脚本？

> ID：14394690
> 
> 赞同：0
> 
> 时间：2013-01-18T08:02:08.663
> 
> 标签：javascript, google-chrome, bookmarklet

我想在 ieee 或 acm 的 url 之后添加我的大学的 url，以便我可以访问研究论文的 pdf

这个怎么做？

例如

更改链接，例如-

`ieee.org/paper21`

至

```
ieee.org.university.edu/paper21 
```

我应该在 chrome 中创建什么样的书签来自动执行此操作，而不是`.university.edu`每次在`.org`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:05:24.607

```
document.location = document.location.href.replace(
  document.location.host, 
  document.location.host + '.university.edu'
) 
```

作为一个新兴市场

```
(function(){document.location=document.location.href.replace(document.location.host,document.location.host+'.university.edu');})() 
```

或编码为

```
(function(){document.location=document.location.href.replace(document.location.host,document.location.host%2B'.university.edu');})() 
```

# .htaccess - 如何在 Drupal php 中为 URL 别名创建子域

> ID：14394693
> 
> 赞同：0
> 
> 时间：2013-01-18T08:02:17.890
> 
> 标签：.htaccess, drupal, mod-rewrite, subdomain

我在 Drupal 中创建了一个多语言站点。所以我有`www.mydomain.com/jp`日语，我想创建一个类似`www.jp.mydomain.com`for的子域`www.mydomain.com/jp`。

问题是 Drupal 没有为每种语言创建一个文件夹。`.htaceess`对于子域，我使用重写规则更新了我的文件。

请建议我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:48:57.543

如果您使用的是 drupal，那么您可以使用[子域](http://drupal.org/project/subdomain)模块。如果想对 .htaccess(php) 做同样的事情，请查看[此](https://stackoverflow.com/questions/586129/create-subdomains-on-the-fly-with-htaccess-php)链接。

我想它会对你有所帮助。

# sql - 如何进行这种选择？

> ID：14394695
> 
> 赞同：1
> 
> 时间：2013-01-18T08:02:30.923
> 
> 标签：sql, sql-server

我有一个列名的表，`LIST_CODE`其中的数据如下 A101、A102、B101。

如何找到`LIST_CODE`等于**A102**或**B101的所有数据**

我尝试使用下面的 sql 但它返回**0**

```
SELECT count(*) FROM details_user WHERE list_code IN ('A102','C101') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:05:45.300

如果您的意思是 list_code 可以在一行中包含“A101，A102，B101”，那么

```
select * from details_user
where list_code like'%A102%' 
or list_code like '%B101%' 
```

但这将是一个糟糕的数据库设计。

如果 list_code 可以包含

```
A101
A102
B101 
```

（每行一个值）

那么你的代码是正确的，这只是意味着你没有 A102 或 C101 的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:12:54.943

由于查询长度有限制，您可能还需要考虑构造一个正则表达式，例如 `SELECT count(*) FROM details_user RLIKE list_code RLIKE "A102|B100"。

无论如何，这都不是一个好的模式设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:41:18.887

正如其他人所说，当您有应该成行的数据时，请将其成行放置。没有多少代码可以替代一个好的初始设计。

也就是说，您可以使用 sql server 2005 及更高版本中的 xml 函数将打包成单行的数据转换为更易于管理的情况。您可以执行以下操作：

```
select du.ID, Code.value('.','nvarchar(100)') as Code
from (select ID, 
        cast(('<c>'+replace(list_Code,',' ,'</c><c>')+'</c>') as xml) as xml
      from details_user) du
cross apply du.xml.nodes('c') as T(Code) 
```

这首先将字符串从`'A101, A102'`格式转换为类似 XML 的格式，
`'<c>A101</c><c>A102</c>'`.

然后将转换后的值输入到将代码分离到表中的[nodes()函数中，然后使用](http://msdn.microsoft.com/en-us/library/ms188282.aspx)[value()](http://msdn.microsoft.com/en-us/library/ms178030.aspx)方法从该表中提取代码的值。

您可以在此[SQL Fiddle上使用此方法](http://www.sqlfiddle.com/#!6/59f29/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:22:48.257

我害怕'IN'运算符只适用于离散集，而不像你建议的那样适用于varchars。

因此，您必须使用常规 OR 语句或使用不同的值集定义。

```
 SELECT count(*) FROM details_user WHERE list_code = 'A102' OR list_code ='C101' 
```

# css - windows Mozilla 不支持绝对位置

> ID：14394697
> 
> 赞同：1
> 
> 时间：2013-01-18T08:02:46.660
> 
> 标签：css, windows, firefox

当我尝试在 Firefox 中的 div 上使用 position: absolute 时，它​​似乎不起作用。对于我用于 div 的 jquery 日历`position:absolute`，它似乎适用于 linux 和 windows 中的所有浏览器，除了 windows 中的 mozilla。当我删除 position:absolute 时，它​​将在 windows firefox 中工作，但在所有其他浏览器中仅显示备用月份（一月、三月、五月、..）

```
 <div class="body">
    <div class="inner">
        <div class="container a pickable month" style="z-index: 999; left: 0px; visibility: visible;
            opacity: 1; display: block;">
            <div class="row a odd">
                <div class="first">
                    Su</div>
                <div>
                    Mo</div>
                <div>
                    Tu</div>
                <div>
                    We</div>
                <div>
                    Th</div>
                <div>
                    Fr</div>
                <div class="last">
                    Sa</div>
            </div>
            <div class="row b even">
                <div class="outside first">
                    28</div>
                <div class="outside">
                    29</div>
                <div class="outside">
                    30</div>
                <div>
                    1</div>
                <div>
                    2</div>
                <div>
                    3</div>
                <div class="last">
                    4</div>
            </div>
            <div class="row c odd">
                <div class="first">
                    5</div>
                <div>
                    6</div>
                <div>
                    7</div>
                <div>
                    8</div>
                <div>
                    9</div>
                <div>
                    10</div>
                <div class="last">
                    11</div>
            </div>
            <div class="row d even">
                <div class="first">
                    12</div>
                <div>
                    13</div>
                <div>
                    14</div>
                <div>
                    15</div>
                <div>
                    16</div>
                <div>
                    17</div>
                <div class="last">
                    18</div>
            </div>
            <div class="row e odd">
                <div class="first">
                    19</div>
                <div>
                    20</div>
                <div>
                    21</div>
                <div>
                    22</div>
                <div>
                    23</div>
                <div>
                    24</div>
                <div class="last">
                    25</div>
            </div>
            <div class="row f even">
                <div class="first">
                    26</div>
                <div>
                    27</div>
                <div>
                    28</div>
                <div>
                    29</div>
                <div>
                    30</div>
                <div>
                    31</div>
                <div class="outside last">
                    1</div>
            </div>
            <div class="row g odd">
                <div class="outside first">
                    2</div>
                <div class="outside">
                    3</div>
                <div class="outside">
                    4</div>
                <div class="outside">
                    5</div>
                <div class="outside">
                    6</div>
                <div class="outside">
                    7</div>
                <div class="outside last">
                    8</div>
            </div>
        </div>
        <div class="container b pickable month" style="z-index: 998; visibility: visible;
            opacity: 1; display: block; left: -200px;">
            <div class="row a odd">
                <div class="first">
                    Su</div>
                <div>
                    Mo</div>
                <div>
                    Tu</div>
                <div>
                    We</div>
                <div>
                    Th</div>
                <div>
                    Fr</div>
                <div class="last">
                    Sa</div>
            </div>
            <div class="row b even">
                <div class="outside first">
                    31</div>
                <div>
                    1</div>
                <div>
                    2</div>
                <div>
                    3</div>
                <div>
                    4</div>
                <div>
                    5</div>
                <div class="last">
                    6</div>
            </div>
            <div class="row c odd">
                <div class="first">
                    7</div>
                <div>
                    8</div>
                <div>
                    9</div>
                <div>
                    10</div>
                <div>
                    11</div>
                <div>
                    12</div>
                <div class="last">
                    13</div>
            </div>
            <div class="row d even">
                <div class="first">
                    14</div>
                <div>
                    15</div>
                <div>
                    16</div>
                <div>
                    17</div>
                <div>
                    18</div>
                <div>
                    19</div>
                <div class="last">
                    20</div>
            </div>
            <div class="row e odd">
                <div class="first">
                    21</div>
                <div>
                    22</div>
                <div>
                    23</div>
                <div>
                    24</div>
                <div>
                    25</div>
                <div>
                    26</div>
                <div class="last">
                    27</div>
            </div>
            <div class="row f even">
                <div class="first">
                    28</div>
                <div>
                    29</div>
                <div>
                    30</div>
                <div class="outside">
                    1</div>
                <div class="outside">
                    2</div>
                <div class="outside">
                    3</div>
                <div class="outside last">
                    4</div>
            </div>
            <div class="row g odd">
                <div class="outside first">
                    5</div>
                <div class="outside">
                    6</div>
                <div class="outside">
                    7</div>
                <div class="outside">
                    8</div>
                <div class="outside">
                    9</div>
                <div class="outside">
                    10</div>
                <div class="outside last">
                    11</div>
            </div>
        </div>
    </div>
</div> 
```

样式表是[http://snagglefoot.net/ainc/calendar-eightysix-default.css](http://snagglefoot.net/ainc/calendar-eightysix-default.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:06:16.127

如果您没有在原始代码中指定，请尝试为有问题的 div 指定 width 或 top 或 left 属性。

职位在这里被注释掉。也许你不是故意的。

```
.calendar-eightysix .body {
        position: relative;
    }
        .calendar-eightysix .body .inner .container {
            /*position: absolute;*/
            left: 0;
        } 
```

# android - 如何将sdcard中的短信恢复到收件箱？

> ID：14394699
> 
> 赞同：1
> 
> 时间：2013-01-18T08:02:51.417
> 
> 标签：android, sms, restore, android-sdcard

我想将收件箱中的所有邮件存储到 sdcard，然后将它们检索并恢复到收件箱。我已成功备份邮件并将它们存储到 sdcard，但无法弄清楚如何取回它们并恢复到收件箱。这是我用来备份短信的代码：

```
private void  backupSMS()
    {
        smsBuffer.clear();
        Uri mSmsinboxQueryUri = Uri.parse("content://sms");
        Cursor cursor1 = getContentResolver().query(
                mSmsinboxQueryUri,
                new String[] { "_id", "thread_id", "address", "person", "date",
                        "body", "type" }, null, null, null);
        //startManagingCursor(cursor1);
        String[] columns = new String[] { "_id", "thread_id", "address", "person", "date", "body",
                "type" };
        if (cursor1.getCount() > 0) 
        {
            String count = Integer.toString(cursor1.getCount());
            Log.d("Count",count);
            while (cursor1.moveToNext()) 
            {
                 String messageId = cursor1.getString(cursor1
                        .getColumnIndex(columns[0]));

                 String threadId = cursor1.getString(cursor1
                        .getColumnIndex(columns[1]));

                String address = cursor1.getString(cursor1
                        .getColumnIndex(columns[2]));
                String name = cursor1.getString(cursor1
                        .getColumnIndex(columns[3]));
                String date = cursor1.getString(cursor1
                        .getColumnIndex(columns[4]));
                String msg = cursor1.getString(cursor1
                        .getColumnIndex(columns[5]));
                String type = cursor1.getString(cursor1
                        .getColumnIndex(columns[6]));

                smsBuffer.add(messageId + ","+ threadId+ ","+ address + "," + name + "," + date + " ," + msg + " ,"
                        + type);
            }           
          generateCSVFileForSMS(smsBuffer);
        }               
    }

     private void generateCSVFileForSMS(ArrayList<String> list)
     {

         try 
         {
             String storage_path = Environment.getExternalStorageDirectory().toString() + File.separator + "Velosys"+".csv";
             FileWriter write = new FileWriter(storage_path);

             write.append("messageId, threadId, Address, Name, Date, msg, type");
             write.append('\n');

             for (String s : list)
             {
                 write.append(s);
                 write.append('\n');
             }
             write.flush();
             write.close();
         }

         catch (NullPointerException e) 
         {
             System.out.println("Nullpointer Exception "+e);
              //  e.printStackTrace();
          }
         catch (IOException e) 
         {
             e.printStackTrace();
         }
         catch (Exception e) 
         {
             e.printStackTrace();
        } 
     } 
```

我搜索了很多，但找不到从 SdCard 的 .csv 文件恢复短信的方法。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:07:09.250

您无需查询数据库，而是使用 bulkInsert 的插入将行插入其中。我相信您还需要在清单中请求对该数据库的写入权限。

# javascript - 任何用于显示图像和悬停显示描述的 Jquery 库

> ID：14394708
> 
> 赞同：-1
> 
> 时间：2013-01-18T08:04:12.077
> 
> 标签：javascript, jquery, html

是否有任何可用的 Jquery 插件，我可以在其中将图像放入 HTML 中，悬停时它会显示来自图像底部的一些动画和描述，以覆盖大约一半的图像。

我在一些网站上看到过，但我真的不知道插件名称。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:18:50.953

检查这些画廊：

1.  [http://codecanyon.net/item/hoveralls-v13/full_screen_preview/1367456](http://codecanyon.net/item/hoveralls-v13/full_screen_preview/1367456)
2.  [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)
3.  [http://nivozoom.dev7studios.com/](http://nivozoom.dev7studios.com/)

我想第一个（带有老鼠演示）最适合您的需求。

# c++ - CvIPL 定义

> ID：14394716
> 
> 赞同：1
> 
> 时间：2013-01-18T08:04:57.640
> 
> 标签：c++, c, opencv

我正在做一个无法使用 opencv 库的项目。所以我试图查看源代码并根据需要修改和使用其中的一些。

但是我的 cvCreateData(..) 函数有问题，当我进入函数内部时，他们使用结构 'CvIPL' 来表示 'CvIPL.allocateData' 但是当我右键单击它并尝试去定义时，它说不找到定义。

我用“CvIPL”谷歌搜索，我在“array.cpp”中找到了它，它的状态是这样的——

```
static struct
{
    Cv_iplCreateImageHeader  createHeader;
    Cv_iplAllocateImageData  allocateData;
    Cv_iplDeallocate  deallocate;
    Cv_iplCreateROI  createROI;
    Cv_iplCloneImage  cloneImage;
}
CvIPL; 
```

现在的问题是我不知道什么是 Cv_iplCreateImageHeader,Cv_iplAllocateImageData... 并且当我右键单击它们时找不到它们的任何定义。

谁能告诉我 Cv_iplCreateImageHeader,Cv_iplAllocateImageData 的类型是什么...或者我在哪里可以找到一些关于 tehm 的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:28:07.113

如果您仍然需要这个，这里是答案：

我正在使用 MS Visual Studio 2005。右键单击并查找符号信息对我来说很好。但是当有疑问时（我经常是:)，使用 grep！使用cygwin，我跑了

```
cd ~/opencv
find . | xargs grep -l Cv_iplCreateImageHeader 
```

列出的文件之一是`./modules/core/include/opencv2/core/core_c.h`，其中包含以下行

```
typedef IplImage* (CV_STDCALL* Cv_iplCreateImageHeader)
                            (int,int,int,char*,char*,int,int,int,int,int,
                            IplROI*,IplImage*,void*,IplTileInfo*);
typedef void (CV_STDCALL* Cv_iplAllocateImageData)(IplImage*,int,int);
typedef void (CV_STDCALL* Cv_iplDeallocate)(IplImage*,int);
typedef IplROI* (CV_STDCALL* Cv_iplCreateROI)(int,int,int,int,int);
typedef IplImage* (CV_STDCALL* Cv_iplCloneImage)(const IplImage*); 
```

所以基本上，`CvIPL`是一个抽象虚拟类，`createHeader`其他成员是具有类型`Cv_iplCreateImageHeader`等的虚拟函数。它就像 C++，但用 C 编写。

# javascript - 使用 Google Maps API v3 对多边形区域内是否存在点进行服务器端检查

> ID：14394719
> 
> 赞同：2
> 
> 时间：2013-01-18T08:05:08.593
> 
> 标签：javascript, sql-server, html, google-maps, google-maps-api-3

逻辑是：用户正在编辑一个现有的多边形区域，其极值点存储在数据库中。修改后的坐标在数据库中更新。现在我需要找出修改后的多边形内是否存在某个点。为此，我假设我必须进行服务器端检查。客户端检查很容易通过 javaScript 完成，我已经完成了。我遇到的真正问题是在服务器端检查这个。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:27:09.740

我已经在 PHP 中以多边形实现了服务器端点。

```
<?php
//Point-In-Polygon Algorithm test parameters
$polySides  = 4; //how many corners the polygon has
$polyX    =  array(4,9,11,2);//horizontal coordinates of corners
$polyY    =  array(10,7,2,2);//vertical coordinates of corners
$x = 3.5;//point
//$y = 13.5;//Outside
$y = 3.5;//Inside

function pointInPolygon($polySides,$polyX,$polyY,$x,$y) {
  $j = $polySides-1 ;
  $oddNodes = 0;
  for ($i=0; $i<$polySides; $i++) {
    if ($polyY[$i]<$y && $polyY[$j]>=$y 
 ||  $polyY[$j]<$y && $polyY[$i]>=$y) {
    if ($polyX[$i]+($y-$polyY[$i])/($polyY[$j]-$polyY[$i])*($polyX[$j]-$polyX[$i])<$x)    {
    $oddNodes=!$oddNodes; }}
   $j=$i; }

  return $oddNodes; }

//Test 
 if (pointInPolygon($polySides,$polyX,$polyY,$x,$y)){
  echo "Is in polygon!";
}
else echo "Is not in polygon";
?> 
```

这可以修改以适应选择的语言，即。C＃

# android - 粒子系统和引擎

> ID：14394720
> 
> 赞同：0
> 
> 时间：2013-01-18T08:05:14.957
> 
> 标签：android, andengine

我在我的代码中使用粒子系统并且遇到了一些问题。我只是想将
粒子系统的颜色更改为黑色。我很困惑这里的 RGB 值应该是什么，或者黑色或灰色颜色。

这是我的代码

```
 particlesystem.addParticleInitializer(new ColorInitializer(0.0f, 0.0f, 0.0f));
   particlesystem.addParticleModifier(new ColorModifier(1.0f, 0.0f, 1.0f,
            0.0f, 1.0f, 0.0f, 0.0f, 1.0f)); 
```

我还附上了粒子系统的图片 [http://i.stack.imgur.com/n5cYb.png](https://i.stack.imgur.com/n5cYb.png) ![粒子图像](../Images/421b822df8b533af1e20ba1176b3bbe8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T18:27:19.820

（仅供参考：您的修改器从透明变为不透明。）

您还必须确保混合模式是您想要的模式。

1.  [又一篇图形混合文章](http://www.zeuscmd.com/tutorials/opengles/19-Blending.php)
2.  [更多图形混合文章](http://www.learnopengles.com/android-lesson-five-an-introduction-to-blending/)
3.  [官方混合文档](http://www.opengl.org/wiki/Blending)

# c# - 如何设置 DataGridViewCell 自动换行单个长字？

> ID：14394721
> 
> 赞同：5
> 
> 时间：2013-01-18T08:05:15.473
> 
> 标签：c#, .net, winforms, datagridview, word-wrap

这个问题在这里被问了很多次，但他们的答案对我不起作用。

我正在使用 C# DataGridView 以表格形式显示数据。我有一些 8/9 列和大约 25 到 30 行。对于每一列，我设置自定义宽度（总屏幕宽度的某个百分比，每列不同）。为了实现它，我设置了以下属性

```
 view1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None; 
```

另外，由于我的应用程序无法同时显示所有行，但没有。一次由用户定义的行数，为此我在计时器中使用 scrollindex 属性来滚动视图。我还自定义了行高（占屏幕总高度的某个百分比）。所以不要同时显示所有行我使用以下属性

```
 view1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None; 
```

对于包装我正在使用

```
 view1.DefaultCellStyle.WrapMode = DataGridViewTriState.True; 
```

但是上面的属性只包含了中间有空格的单词，而不是单个长单词。

那么如何用上述行和列大小属性包装单个长字呢？在很多地方，我得到了使用建议

```
 view1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.DisplayedCells;
    view1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.DisplayedCells; 
```

但是，每当我在 AutoSizeColumnsMode 中使用“none”以外的任何内容时，我的列的自定义宽度都会更改，如果我在 AutoSizeRowsMo​​de 中使用“none”以外的任何内容，它会一次显示所有行，并且我的行的自定义高度会更改。

有人知道如何解决这个问题吗？

**注意：它是一个桌面应用程序（Windows 窗体应用程序）。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:25:29.793

使用 DataGridView CellPainting 事件。示例代码：

```
 public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None;
        dataGridView1.DefaultCellStyle.WrapMode = DataGridViewTriState.True;

        //dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.DisplayedCells;
        //dataGridView1.DefaultCellStyle.WrapMode = DataGridViewTriState.True;
        //dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.DisplayedCells;

        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            row.Cells[0].Value = "CELL123456789012345679801234567890";
            row.Cells[1].Value = "CELL 1";
            row.Cells[2].Value = "CELL 2";
            row.Cells[3].Value = "CELL 3";
            row.Cells[4].Value = "CELL 4";
            row.Cells[5].Value = "CELL 5";
        }

    }

    private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
    {
        if (e.Value == null)
            return;
        var s = e.Graphics.MeasureString(e.Value.ToString(), dataGridView1.Font);
        if (s.Width > dataGridView1.Columns[e.ColumnIndex].Width)
        {
            using (
      Brush gridBrush = new SolidBrush(this.dataGridView1.GridColor),
      backColorBrush = new SolidBrush(e.CellStyle.BackColor))
            {
                e.Graphics.FillRectangle(backColorBrush, e.CellBounds);
                e.Graphics.DrawString(e.Value.ToString(), dataGridView1.Font, Brushes.Black, e.CellBounds, StringFormat.GenericDefault);
                dataGridView1.Rows[e.RowIndex].Height = (int)(s.Height * Math.Ceiling(s.Width / dataGridView1.Columns[e.ColumnIndex].Width));
                e.Handled = true;
            }
        }
    } 
```

改进的代码：

```
private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
    {
        if (e.Value == null)
            return;

        var s = e.Graphics.MeasureString(e.Value.ToString(), dataGridView1.Font);

        if (s.Width > dataGridView1.Columns[e.ColumnIndex].Width)
        {
            using (Brush gridBrush = new SolidBrush(this.dataGridView1.GridColor), backColorBrush = new SolidBrush(e.CellStyle.BackColor))
                {
                    using (Pen gridLinePen = new Pen(gridBrush))
                    {
                        e.Graphics.FillRectangle(backColorBrush, e.CellBounds);
                        e.Graphics.DrawLine(gridLinePen, e.CellBounds.Left, e.CellBounds.Bottom - 1, e.CellBounds.Right, e.CellBounds.Bottom - 1);
                        e.Graphics.DrawLine(gridLinePen, e.CellBounds.Right - 1, e.CellBounds.Top, e.CellBounds.Right - 1, e.CellBounds.Bottom - 1);

                        e.Graphics.DrawString(e.Value.ToString(), dataGridView1.Font, Brushes.Black, e.CellBounds, StringFormat.GenericDefault);

                        dataGridView1.Rows[e.RowIndex].Height = (int)(s.Height * Math.Ceiling(s.Width / dataGridView1.Columns[e.ColumnIndex].Width));

                        e.Handled = true;
                    }

                }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:27:18.870

尝试类似的东西

```
view.Columns[int_Desired_Column_Index].AutoSizeMode = DataGridViewAutoSizeColumnMode.DisplayedCells; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:38:12.273

可能这不是一个好的解决方案，但您可以尝试：

```
 private void Form1_Load(object sender, EventArgs e)
        {

            var source = new BindingSource();
            List<MyStruct> list = new List<MyStruct> { new MyStruct("cell 123456789012345678901234567890", "qsdsqdsqdsqdsqdb"), 
                new MyStruct("c", "d") };
            source.DataSource = list;
            dataGridView1.DataSource = source;

        }
        class MyStruct
        {
            public string Name { get; set; }
            public string Adres { get; set; }

            public MyStruct(string name, string adress)
            {
                Name = name;
                Adres = adress;
            }
        } 
```

![在此处输入图像描述](../Images/5209f386ac3aac7f7ab78629e8564540.png) ![在此处输入图像描述](../Images/66dd1fac840bfe1a061ea7ec9ee6adb3.png)

# c++ - 检查是否从 std::istream 成功读取所有值

> ID：14394724
> 
> 赞同：11
> 
> 时间：2013-01-18T08:05:27.060
> 
> 标签：c++, iostream

假设我有一个文件

```
100 text 
```

如果我尝试使用 ifstream 读取 2 个数字，它会失败，因为`text`它不是一个数字。使用 fscanf 我会通过检查它的返回码知道它失败了：

```
if (2 != fscanf(f, "%d %d", &a, &b))
    printf("failed"); 
```

但是当使用 iostream 而不是 stdio 时，我怎么知道它失败了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T08:07:28.997

它实际上（如果不是更多）简单：

```
ifstream ifs(filename);
int a, b;
if (!(ifs >> a >> b))
   cerr << "failed"; 
```

顺便说一下，习惯这种格式。因为它*非常*方便（对于通过循环继续*积极*进展更是如此）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-13T01:17:13.757

如果一个人使用 GCC`-std=c++11`或`-std=c++14`她可能会遇到：

```
error: cannot convert ‘std::istream {aka std::basic_istream<char>}’ to ‘bool’ 
```

**为什么？** C++11 标准使`bool`运算符调用显式（[ref](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)）。因此有必要使用：

```
std::ifstream ifs(filename);
int a, b;
if (!std::static_cast<bool>(ifs >> a >> b))
  cerr << "failed"; 
```

我个人更喜欢以下`fail`功能的使用：

```
std::ifstream ifs(filename);
int a, b;
ifs >> a >> b
if (ifs.fail())
  cerr << "failed"; 
```

# iphone - 我可以在图像视图上制作另一层用于绘图吗

> ID：14394728
> 
> 赞同：1
> 
> 时间：2013-01-18T08:05:40.197
> 
> 标签：iphone, ios

> 我想在背景图像上绘图，什么时候我会擦除该绘图然后只擦除绘图而不是背景图像？我怎样才能实现该任务。通过此代码，我的背景图像也被擦除。

```
 ` UITouch *touch = [touches anyObject];
    previousPoint2 = previousPoint1;
    previousPoint1 = [touch previousLocationInView:self.view];
    currentPoint = [touch locationInView:self.view];

    CGPoint mid1 = midPoint(previousPoint1, previousPoint2);
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    UIGraphicsBeginImageContext(imageDoodle.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    [imageDoodle.image drawInRect:CGRectMake(0, 0, imageDoodle.frame.size.width, imageDoodle.frame.size.height)];

    CGContextMoveToPoint(context, mid1.x, mid1.y);

    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);

    CGContextSetLineCap(context, kCGLineCapRound);

     if(IsErase)
    {
    CGContextSetBlendMode(context,kCGBlendModeClear);
    }

    else
    {
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), redvalue, greenvalue, bluevalue, 1.0);
    }

    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 8.0);

    CGContextStrokePath(UIGraphicsGetCurrentContext());

     imageDoodle.image = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();

} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:34:30.830

添加`another` `UIImageView`到您的 `imageDoodle`：

```
//Add outer ImgView for Drawing purpose
imgView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0,imageDoodle.frame.size.width, imageDoodle.frame.size.height)];
imgView.userInteractionEnabled  = YES;
imgView.multipleTouchEnabled = YES;
[imageDoodle addSubview:imgView]; 
```

**编辑**：现在使用相同的代码，但`imgView`用于`drawing purpose`：

```
[imgView.image drawInRect:CGRectMake(0, 0, imageDoodle.frame.size.width, imageDoodle.frame.size.height)]; 
```

设置当前图像`imgView`

```
imgView.image = UIGraphicsGetImageFromCurrentImageContext(); 
```

现在`original image`用 main设置你的`ImageView`。

现在`render`主要`ImageView`得到`backgroundimage+drawing`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:08:03.910

将透明 UIView 添加到您的 ImageView 并将其高度和宽度按比例分配给 imageView 或 imagesize。无论你想画什么，在 uiview 中画并擦除它。

# android - 更改应用程序区域设置后如何获取设备区域设置

> ID：14394735
> 
> 赞同：9
> 
> 时间：2013-01-18T08:06:35.503
> 
> 标签：android, location, locale, device

我正在根据用户选择更改应用程序区域设置。独立于设备区域设置。

使用

```
public void setDefaultLocale(Context context, String locale) {
        Locale appLoc = new Locale(locale);
        Locale.setDefault(appLoc);
        Configuration appConfig = new Configuration();
        appConfig.locale = appLoc;
        context.getResources().updateConfiguration(appConfig,
                context.getResources().getDisplayMetrics());
    } 
```

但我也想知道设备区域设置是什么。

当我试图得到这个时，我总是得到我设置为应用程序的语言环境。

例如：applictaion 是***ENGLISH***，device 是***CHINESE***。我总是学***英语***。

用于获取语言环境，

**选项1。**

```
String locale = context.getResources().getConfiguration().locale.getCountry(); 
```

**选项 2。**

```
String local_country = ((Activity) context).getBaseContext().getResources().getConfiguration().locale.getCountry(); 
```

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-14T21:00:25.193

我问了类似的问题并找到了这个答案，如果迟到了，抱歉：

要查找系统区域设置，请使用：

```
defaultLocale = Resources.getSystem().getConfiguration().locale; 
```

无论为应用程序/活动设置了哪个默认语言环境，它都会获取系统语言环境。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T11:23:50.637

我绝对不确定这对不同设备的便携性：

```
try {
    Process exec = Runtime.getRuntime().exec(new String[]{"getprop", "persist.sys.language"});
    String locale = new BufferedReader(new InputStreamReader(exec.getInputStream())).readLine();
    exec.destroy();
    Log.e("", "Device locale: "+locale);
} catch (IOException e) {
    e.printStackTrace();
} 
```

如果你想要国家部分：persist.sys.country

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T07:01:33.877

如果你需要支持低于 Android 7.0 - Nougat (API level 24) 你可以使用这样的东西：

```
@SuppressWarnings("deprecation")
@SuppressLint("NewApi")
// ToDo: Adjust this method once the target API is 24 or higher!
private Locale getLocale()
{
  if(Build.VERSION.SDK_INT >= 24)
  {
    return Resources.getSystem().getConfiguration().getLocales().get(0);
  }

  else
  {
    return Resources.getSystem().getConfiguration().locale;
  }
} 
```

注意关于`deprecation`和的注释`NewApi`。一旦您以 API 24 或更高版本为目标，请调整此方法。受到[这个](https://stackoverflow.com/a/23538518)答案的启发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-21T12:09:17.003

对于那些正在使用`Daniel Fekete`的解决方案是：

```
Process exec = Runtime.getRuntime().exec(new String[]{"getprop", "persist.sys.language"});
String locale = new BufferedReader(new InputStreamReader(exec.getInputStream())).readLine();
exec.destroy(); 
```

请注意，在最新的 Android Api(+21) 上，区域设置可能为**EMPTY ！**而不是使用`persist.sys.language`use **persist.sys.locale**

```
exec = Runtime.getRuntime().exec(new String[]{"getprop", "persist.sys.locale"});
locale = new BufferedReader(new InputStreamReader(exec.getInputStream())).readLine();
exec.destroy(); 
```

# delphi - 将 DBgrid 导出为 CSV？

> ID：14394738
> 
> 赞同：2
> 
> 时间：2013-01-18T08:06:57.840
> 
> 标签：delphi, export-to-csv, tdbgrid

我有一个排序的数据库网格（用户单击了几个单选按钮和复选框来影响显示）。

我想将排序相同的所有数据（不仅仅是网格中可见的数据）导出到 CSV - 我该怎么做？数据 - 不是用户设置，只是为了澄清。

提前感谢您的帮助

* * *

[更新] 我`sqlQuery`一点一点地构建，取决于用户对复选框和单选组的设置，然后，当其中一个更改时，我

```
 ActivityADQuery.SQL.Clear();
   ActivityADQuery.SQL.Add(sqlQuery);
   ActivityADQuery.Open(sqlQuery); 
```

也就是说没有硬编码查询，它会变化，我想导出当前设置。

如果我想从网格或数据集中导出，我不太清楚（我只是不是一个 db 人，这是我的第一个 DBgrid），但我怀疑我想要网格，因为它有一个字段的子集他的数据集。

我想这`TJvDBGridCSVExport`是一个绝地组件（？）到目前为止，我一直试图避免它们，听起来很棒，因为我更喜欢谨慎的、独立的组件，而不是安装一个庞大的集合。这可能不是最聪明的做法，但这就是我的感受——ymmv（prolly 确实如此）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:53:07.730

另一种解决方案，也适用于（多）选定的行：

```
procedure TReportsForm.ExportToCSV(const aGrid : TDBGrid; const FileName : String);
Var
  I, J : Integer;
  SavePlace : TBookmark;
  Table : TStrings;
  HeadTable : String;
  LineTable : String;
  First : Boolean;
Begin

  HeadTable := '';
  LineTable := '';
  Table := TStringList.Create;
  First := True;

  Try
    For I := 0 To Pred(aGrid.Columns.Count) Do
      If aGrid.Columns[I].Visible Then
        If First Then
        Begin
// Use the text from the grid, in case it has been set programatically
// E.g., we prefer to show "Date/time" than "from_unixtime(activity.time_stamp, "%D %b %Y  %l:%i:%S")"
//          HeadTable := HeadTable + aGrid.Columns[I].FieldName;
          HeadTable := HeadTable + ActivityReportStringGrid.Columns[i].Title.Caption + ','; // Previous separated wth semi-colon, not comma! (global)
          First := False;
        End
        Else
        begin
//          HeadTable := HeadTable + ';' + aGrid.Columns[I].FieldName;
          HeadTable := HeadTable + ActivityReportStringGrid.Columns[i].Title.Caption + ',';
        end;

    Delete(HeadTable, Length(HeadTable), 1);  // Remove the superfluous trailing comma
    Table.Add(HeadTable);
    First := True;

    // with selection of rows
    If aGrid.SelectedRows.Count > 0 Then
    Begin
      For i := 0 To aGrid.SelectedRows.Count - 1 Do
      Begin
        aGrid.DataSource.Dataset.GotoBookmark(pointer(aGrid.SelectedRows.Items[i]));
        For j := 0 To aGrid.Columns.Count - 1 Do
          If aGrid.Columns[J].Visible Then
            If First Then
            Begin
              lineTable := lineTable + aGrid.Fields[J].AsString;
              First := False;
            End
            Else
              lineTable := lineTable + ',' + aGrid.Fields[J].AsString;

        Delete(LineTable, Length(LineTable), 1);  // Remove the superfluous trailing comma
        Table.Add(LineTable);
        LineTable := '';
        First := True;
      End;
    End
    Else
      //no selection
    Begin
      SavePlace := aGrid.DataSource.Dataset.GetBookmark;
      aGrid.DataSource.Dataset.First;

      Try
        While Not aGrid.DataSource.Dataset.Eof Do
        Begin
          For I := 0 To aGrid.Columns.Count - 1 Do
            If aGrid.Columns[I].Visible Then
              If First Then
              Begin
                lineTable := lineTable + aGrid.Fields[I].AsString;
                First := False;
              End
              Else
                lineTable := lineTable + ',' + aGrid.Fields[I].AsString;

          Delete(LineTable, Length(LineTable), 1);  // Remove the superfluous trailing comma
          Table.Add(LineTable);
          LineTable := '';
          aGrid.DataSource.Dataset.Next;
          First := True;
        End;

        aGrid.DataSource.Dataset.GotoBookmark(SavePlace);
      Finally
        aGrid.DataSource.Dataset.FreeBookmark(SavePlace);
      End;
    End;
    Table.SaveToFile(FileName);
  Finally
    Table.Free;
  End;
End;  // ExportToCSV() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:43:48.900

您可以使用自己的小程序来适应您的需要

```
Procedure Dataset2SeparatedFile(ads: TDataset; const fn: String; const Separator: String = ';');
var
  sl: TStringList;
  s: String;
  i: Integer;
  bm: TBookmark;

  Procedure ClipIt;
  begin
    s := Copy(s, 1, Length(s) - Length(Separator));
    sl.Add(s);
    s := '';
  end;
  Function FixIt(const s: String): String;
  begin
    // maybe changed
    Result := StringReplace(StringReplace(StringReplace(s, Separator, '', [rfReplaceAll]), #13, '', [rfReplaceAll]), #10, '', [rfReplaceAll]);
    // additional changes could be Quoting Strings
  end;

begin
  sl := TStringList.Create;
  try
    s := '';
    For i := 0 to ads.FieldCount - 1 do
    begin
      if ads.Fields[i].Visible then
        s := s + FixIt(ads.Fields[i].DisplayLabel) + Separator;
    end;
    ClipIt;
    bm := ads.GetBookmark;
    ads.DisableControls;
    try
      ads.First;
      while not ads.Eof do
      begin
        For i := 0 to ads.FieldCount - 1 do
        begin
          if ads.Fields[i].Visible then
            s := s + FixIt(ads.Fields[i].DisplayText) + Separator;
        end;
        ClipIt;
        ads.Next;
      end;
      ads.GotoBookmark(bm);
    finally
      ads.EnableControls;
      ads.FreeBookmark(bm);
    end;
    sl.SaveToFile(fn);
  finally
    sl.Free;
  end;
end; 
```

# php - 创建唯一的随机代码 - PHP/MySQL

> ID：14394741
> 
> 赞同：3
> 
> 时间：2013-01-18T08:07:08.027
> 
> 标签：php, unique

我必须为数据库中的每个“公司”创建唯一代码。

我认为这是可能的唯一方法是创建一个随机数，`rand()`然后检查数据库中该“公司”是否存在该数字，如果它确实重新创建。

我的问题是：没有更好的方法来做到这一点 - 一种更有效的方法。好像我正在创建 10 000 个代码并且数据库中已经有 500 000 个代码，它会变得越来越慢。

关于可能是更好的方法的任何想法或提示？

编辑：

对不起，也许我可以解释得更好。这些代码不会同时生成，它们可以每天/每月/每年创建一次。

此外，我需要能够定义代码的字符，例如，仅字母数字或数字

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:11:39.393

我建议您使用“通用唯一标识符”：[http](http://en.wikipedia.org/wiki/Universally_unique_identifier) ://en.wikipedia.org/wiki/Universally_unique_identifier为每个公司生成随机代码。通过这种方式，您可以避免检查数据库中的重复项：

> 任何人都可以创建一个 UUID 并使用它来识别某些东西，并且有理由相信任何人都不会无意中创建相同的标识符来识别其他东西。因此，标有 UUID 的信息可以在以后组合到单个数据库中，而无需解决标识符 (ID) 冲突。

在 PHP 中，您可以为此使用函数 uniqid：http: [//es1.php.net/manual/en/function.uniqid.php](http://es1.php.net/manual/en/function.uniqid.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:14:41.630

MySQL 的 UUID 函数应该会有所帮助。[http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)

`INSERT INTO table (col1,col2)VALUES(UUID(), "someValue")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:12:26.157

如果代码只是整数，则使用自动增量或获取当前最大值并开始增加它

# jquery - 加载html动画

> ID：14394743
> 
> 赞同：0
> 
> 时间：2013-01-18T08:07:12.570
> 
> 标签：jquery, ajax

如何动画（淡入或类似）加载页面的过渡？这是我的代码和链接...

```
<script type='text/javascript'>

function cargarContenido(pagina)
{
    $("#content").load(pagina);
}

function cargarContenidoReloj(pagina)
{
    $("#content").html("<img src='images/ajax-loader.gif' class='clock' border='0' />");
    $("#content").load(pagina);
}
</script> 
```

链接

```
<ul id="nav">
<li id="nav1" onclick="cargarContenido('estudio.html')">ESTUDIO</li>
<li id="nav2" onclick="cargarContenido('portfolio.html')">PORTFOLIO</a></li>
<li id="nav3" onclick="cargarContenido('servicios.html')">SERVICIOS</a></li>
<li id="nav4">PRESUPUESTO</li>
<li id="nav5" onclick="cargarContenido('contacto.html')">CONTACTO</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:12:53.213

使用 ajax，您可以使用`beforeSend`和`success`事件来控制用户体验：

```
$.ajax({
   type: 'POST', url: pagina,
   beforeSend: function() {
      $("#content").html("<img src='images/ajax-loader.gif' class='clock' border='0' />");
   },
   success: function(data) {
      $('#content').hide().html(data).fadeIn('slow'); //fadeIn animation for example
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:28:04.193

You can do this: [http://jsfiddle.net/Am8pf/](http://jsfiddle.net/Am8pf/)

```
var page = $("<div/>").attr('id','page').load(pagina);
$("#content").html(page).fadeIn('slow');
//^^^^^^^^^------------------------------hide it with css "display:none;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:12:28.200

您可以向 load() 添加一个处理函数，该函数在完成后执行：

```
 $("#loader").show();
    $('#content').load(pagina, function() {
        $("#loader").hide();
    }); 
```

# javascript - 如果需要，链接函数并在链中保留一个变量

> ID：14394754
> 
> 赞同：0
> 
> 时间：2013-01-18T08:08:03.197
> 
> 标签：javascript, prototype, chaining

我有一些这样的代码：

```
function Foo( arr, prop ) {
  this.arr = arr;
  this.isOn = prop;
}

function newFoo( arr, prop ) {
  return new Foo( arr, prop );
}

Foo.prototype = {

  a: function() {
    var result = [];
    // do something and push to result
    if ( this.prop ) // do something different with result
    return newFoo( result );
  },

  // This is the method that determines if prop = true in the chain
  b: function() {
    result = [];
    // do something and push to result
    // this time 'prop' must be 'true'
    return newFoo( result, true )
  }

}; 
```

如果链`true`中的前一个元素有`prop`. 显然，上述方法不起作用，如您在此处看到的：

```
var nf = newFoo;
console.log( nf( [1,2,3] ).b().isOn ); //=> true
console.log( nf( [1,2,3] ).b().a().isOn ); //=> undefined 
```

我知道我可以`newFoo( result, this.prop )`在每种方法上一直返回，但我很想知道是否有任何其他解决方案可以解决这个问题。随着方法数量的增加，随着时间的推移，将很难跟踪此属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:24:34.920

> 随着方法数量的增加，随着时间的推移，将很难跟踪此属性。

您可以创建一个额外的方法，该方法具有`newFoo`自动跟踪您不会覆盖的属性的功能：

```
function Foo( arr, prop ) {
  this.arr = arr;
  this.isOn = prop;
}

Foo.prototype = {

  clone: function newFoo( arr, prop ) {
    return new Foo(
      arguments.length >= 1 ? arr : this.arr,
      arguments.length >= 2 ? prop : this.isOn
    );
  },

  a: function() {
    var result = [];
    // do something and push to result
    if ( this.prop ) // do something different with result
    return this.clone( result );
  },

  // This is the method that determines if prop = true in the chain
  b: function() {
    result = [];
    // do something and push to result
    // this time 'prop' must be 'true'
    return this.clone( result, true )
  }

}; 
```

我在`arguments.length`这里用来检查是否传递了参数，您也可以针对始终真实的属性进行测试`undefined`或使用简单。`arr || this.arr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:10:24.793

将“a”函数更改为

```
a: function() {
    var result = [];
    // do something and push to result
    if ( this.prop ){} // so something different with result
    return newFoo( result );
  }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:11:44.133

```
function Foo( arr, prop ) {
    this.arr = arr;
    this.isOn = prop || false; // if prop is undefined, set false
} 
```

这应该可以解决您的问题。

如果你不添加`prop`参数，`isOn`将被设置`undefined`。这就是为什么你得到`undefined`输出。

# wcf - 如何从 WCF 服务返回特定的 SOAP 响应？

> ID：14394759
> 
> 赞同：0
> 
> 时间：2013-01-18T08:08:47.607
> 
> 标签：wcf

我有一个 WCF 方法，它当前返回一个字符串，如下所示：

```
string CreateDesign(string UID, string TemplateName) 
```

重新生成的字符串是通过以下方法创建的：

```
string RequestProcessed(string status, string UID)
    {
        XDocument doc = new XDocument(
            new XElement("RequestProcessed",
                new XElement("Status", status),
                new XElement("UID", UID)));

        return doc.ToString();
    } 
```

我使用 SOAPUI 得到的响应是这样的：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
  <CreateDesignResponse xmlns="http://tempuri.org/">
     <CreateDesignResult><![CDATA[<RequestProcessed>
       <Status>OK</Status>
       <UID>FolderName</UID>
     </RequestProcessed>]]></CreateStandardResult>
  </CreateStandardResponse>
 </s:Body>
 </s:Envelope> 
```

客户期望它是这样的：

```
<soap:Body>
 <m:RequestProcessed xmlns:m=" ">
  <m:Status></m:Status>
  <m:UID></m:UID>
 </m: RequestProcessed >
</soap:Body> 
```

我应该怎么做才能让 WCF 服务返回这样的响应？我已经为此苦苦挣扎了一段时间，感谢您的帮助。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:14:14.210

要完全控制您的 SOAP 消息体，您应该对输入和输出参数使用 MessageContract 属性。这是一篇很好的网络文章。 [使用消息合约](http://msdn.microsoft.com/en-us/library/ms730255.aspx) 希望它有所帮助！

**编辑：**
运营合同

```
[ServiceContract]
public interface ITestService
{
    [OperationContract]
    RequestProcessed TestMethod(RequestInput tt);
} 
```

请求已处理

```
[MessageContract]
public class RequestProcessed
{
    [MessageBodyMember]
    public string Status { get; set; }
    [MessageBodyMember]
    public Guid UID { get; set; }
} 
```

SOAP 消息体

```
<s:Body>
   <RequestProcessed xmlns="http://tempuri.org/">
     <Status>OK</Status>
     <UID>ffd338ed-bca3-46c1-9ee3-3c92ba3b3acc</UID>
   </RequestProcessed>
</s:Body> 
```

# ruby-on-rails - rspec 由于 factorygirl 而没有运行

> ID：14394761
> 
> 赞同：0
> 
> 时间：2013-01-18T08:08:56.907
> 
> 标签：ruby-on-rails, rspec, factory-bot, railstutorial.org

当我运行 rspec spec/requests/users_spec.rb

我明白了：

```
admin@Administrators-MacBook-Pro:~/Desktop/sample_app$ rspec spec/requests/users_spec.rb
No DRb server is running. Running in local process instead ...
Rack::File headers parameter replaces cache_control after Rack 1.5.
/Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:6:in `define': wrong number of arguments (1 for 0) (ArgumentError)
    from /Users/admin/Desktop/sample_app/spec/factories.rb:4:in `<top (required)>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:16:in `block in find_definitions'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `each'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `find_definitions'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/factory_girl_rails-4.1.0/lib/factory_girl_rails/railtie.rb:26:in `block in <class:Railtie>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/application/finisher.rb:59:in `block in <module:Finisher>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/admin/Desktop/sample_app/config/environment.rb:5:in `<top (required)>'
    from /Users/admin/Desktop/sample_app/spec/spec_helper.rb:8:in `require'
    from /Users/admin/Desktop/sample_app/spec/spec_helper.rb:8:in `block in <top (required)>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/spork-0.9.2/lib/spork.rb:24:in `prefork'
    from /Users/admin/Desktop/sample_app/spec/spec_helper.rb:3:in `<top (required)>'
    from /Users/admin/Desktop/sample_app/spec/requests/users_spec.rb:1:in `require'
    from /Users/admin/Desktop/sample_app/spec/requests/users_spec.rb:1:in `<top (required)>'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:77:in `rescue in run'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:73:in `run'
    from /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

这是 factory.rb：

```
# By using the symbol ':user', we get Factory Girl to simulate the User model.
# we can create a User factory in the tests like this:
# @user = Factory(:user)
FactoryGirl.define :user do |user|
    user.name "Pavan Katepalli"
    user.email "email@pavan.com"
    user.password "foobar"
    user.password_confirmation "foobar"
end 
```

这是 users_spec：

```
require 'spec_helper'
require 'factory_girl_rails'

describe "Users" do

  describe "signup" do

        describe "failure" do
            it "should not make a new user" do
                lambda do
                    visit signup_path
                    fill_in "Name",         :with => ""
                    fill_in "Email",        :with => ""
                    fill_in "Password",     :with => ""
                    fill_in "Confirmation", :with => ""
                    click_button
                    response.should render_template('users/new')
                    response.should have_selector('div#error_explanation')
                end.should_not change(User, :count)
            end
        end

        describe "success" do
      it "should make a new user" do
        lambda do
          visit signup_path
          fill_in "Name",         :with => "Example User"
          fill_in "Email",        :with => "user@example.com"
          fill_in "Password",     :with => "foobar"
          fill_in "Confirmation", :with => "foobar"
          click_button
          response.should have_selector('div.flash.success',
                                        :content => "Welcome")
          response.should render_template('users/show')
        end.should change(User, :count).by(1)
      end
    end

    end

end 
```

这是 users_controller_spec.rb：

```
require 'spec_helper'
require 'factory_girl_rails'

describe UsersController do

    render_views

    describe "GET 'show'" do

        before(:each) do
          @user = FactoryGirl(:user)
        end

        it "should be successful" do
          get :show, :id => @user.id
          response.should be_success
        end

        it "should find the right user" do
          get :show, :id => @user.id

          # assigns(:user) returns the 
          # value of the instance variable @user
          assigns(:user).should == @user
        end

        it "should have the right title" do
          get :show, :id => @user.id
          response.should have_selector('title', :content => @user.name)
        end

        it "should have the user's name" do
          get :show, :id => @user.id
          response.should have_selector('h1', :content => @user.name)
        end

        it "should have a profile image" do
          get :show, :id => @user.id
          response.should have_selector('h1>img', :class => "gravatar")
        end
    end

    describe "GET 'new'" do

        it "should be successful" do
          get :new
          response.should be_success
        end

        it "should have the right title" do
          get :new
          response.should have_selector('title', :content => "Sign up")
        end
    end

    describe "POST 'create'" do

        describe "failure" do

            before(:each) do
                @attr = { :name => "", :email => "", :password => "",
                      :password_confirmation => "" }
            end

            it "should not create a user" do
                lambda do
                    post :create, :user => @attr
                end.should_not change(User, :count)
            end

            it "should have the right title" do
                post :create, :user => @attr
                response.should have_selector('title', :content => "Sign up")
            end

            it "should render the 'new' page" do
                post :create, :user => @attr
                response.should render_template('new')
            end
        end

        describe "success" do

            before(:each) do
                @attr = { :name => "New User", :email => "user@example.com",
                      :password => "foobar", :password_confirmation => "foobar" }
            end

            it "should create a user" do
                lambda do
                    post :create, :user => @attr
                end.should change(User, :count).by(1)
            end

            it "should redirect to the user show page" do
                post :create, :user => @attr
                response.should redirect_to(user_path(assigns(:user)))
            end

            it "should have a welcome message" do
                post :create, :user => @attr
                flash[:success].should =~ /welcome to the sample app/i
            end

        end
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:56:28.400

您链接的存储库很旧（对 spec 文件夹的最后一次提交是 2 年前），并且您可能已经安装了使用的较新版本的 gem（包括 FactoryGirl）。

现在你可以做的是在你的`rspec`调用前加上`bundle exec`，这将在你当前包中的 gems 的上下文中运行 rspec：

```
bundle exec rspec spec/requests/users_spec.rb 
```

# javascript - 在jQuery中将单个未关闭的标签插入元素

> ID：14394766
> 
> 赞同：1
> 
> 时间：2013-01-18T08:09:20.130
> 
> 标签：javascript, jquery

我需要在选择器中插入一个未闭合的标签：

```
$("div.crop-to-select").html("")
$("div.crop-to-select").append("<table>") 
```

我想稍后在哪里结束，我自己：

```
$("div.crop-to-select").append("</table>") 
```

不过，我发现附加总是添加

```
<table></table> 
```

每一次。在我可以将任何数据放入其中之前，我的表已经关闭。有不同的jQuery函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:13:33.303

你可以做这样的事情..

```
$("div.crop-to-select").append("<table>"); // This is fine..
$("div.crop-to-select table").html("-----ADD YOUR DATA HERE ------"); // But data which 
you want to put inside table can be added here.. 
```

# java - 无法找到 tools.jar。预计在 C:\Program Files\Java\jre6\lib\tools.jar 中找到它

> ID：14394768
> 
> 赞同：19
> 
> 时间：2013-01-18T08:09:38.977
> 
> 标签：java, google-app-engine, ant, build

当我尝试运行以下命令时出现错误：

```
$ ant -Dsdk.dir=/opt/google/appengine-java-sdk runserver -Dserver.host=192.168.1.10 
```

这是错误：

> “无法找到 tools.jar。预计在 C:\Program Files\Java\jre6\lib\tools.jar 中找到它”。

我在`JAVA_HOME`变量中给出了 jdk 路径，`C:\PROGRA~1\Java\jdk1.6.0_25`因为我的 jdk 位置是`C:\Program Files (x86)\Java\jdk1.6.0_25`.

问题是什么？请帮助我。在此先感谢。

当我尝试运行命令 ant -diagnostics 时，我得到了

```
java.home : C:\Program Files\Java\jre6 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-18T22:34:36.560

您应该尝试在 PATH 环境变量的开头添加 %JAVA_HOME%\bin （当然，给定的语法假定是 Windows）。正如 Peter Knego 评论的那样，tools.jar 存在于 JDK 中，而不是 JRE 中，因此您必须确保 JAVA_HOME 指向您的 JDK 目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:26:23.653

您可能正在构建一些项目，该项目具有`local.properties`在项目根级别调用的旧文件。那里有一个`sdk.dir`属性，它指向错误。用编辑器打开该文件并更正。

此外，您的命令行看起来有问题。在那里，您使用一些 Unix 路径指定 sdk 位置，并且从其余的消息看起来您在 Windows 上。确保该属性与您的 sdk 位置匹配。它实际上可能根本不需要。

# android - Android 片段动画 onResume

> ID：14394772
> 
> 赞同：14
> 
> 时间：2013-01-18T08:10:04.943
> 
> 标签：android, android-fragments, android-animation, android-nested-fragment

情况如下：

我正在使用 API 17 引入的子片段。假设我有

```
ActivityA -> FragmentA
ActivityA -> FragmentB

FragmentA -> ChildFragmentA
FragmentA -> ChildFragmentB 
```

所以我开始使用 FragmentTransaction`ActivityA->FragmentA->ChildFragmentA`过渡到`ActivityA->FragmentA->ChildFragmentB`使用动画添加到后台堆栈和弹出后台堆栈（当我转到 ChildFragmentB 时有一个动画，当我按下并移到 ChildFragmentA 时有一个动画）。

现在我导航到`ActivityA->FragmentB`（不再附加 FragmentA）。当我导航回可见的`ActivityA->FragmentA`位置时，会像来自. `ChildFragmentB``ChildFragmentB``ChildFragmentA`

我想在恢复时禁用此动画`Activity->FragmentA`。但是在子片段之间转换时保留它。这个动画是在 FragmentTransaction 中设置的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-12T08:27:40.397

I solved this by adding some logic to the parent fragment to detect when it is being hidden or shown, and explicitly disable or enable animations in its child.

```
@Override
public void onPause() {
    super.onPause();
    // If this fragment is being closed/replaced then disable animations 
    // in child fragments. Otherwise we get very nasty visual effects 
    // with the parent and child animations running simultaneously
    ChildFragment f = (ChildFragment) getChildFragmentManager()
                                        .findFragmentByTag(FRAGMENT_CHILD);
    if (f != null) {
        f.disableAnimations();
    }
}

@Override
public void onResume() {
    super.onResume();
    // if this fragment is being opened then re-enable animations 
    // in child fragments
    ChildFragment f = (ChildFragment) getChildFragmentManager()
                                        .findFragmentByTag(FRAGMENT_CHILD);
    if (f != null) {
        f.enableAnimations();
    }
} 
```

In the child fragment, we need to implement those methods to enable/disable animations. We do this by overriding `onCreateAnimation()` and using a static animation (`R.anim.hold`) in the case where animations should be disabled.

```
private boolean mDisableAnimations;

void disableAnimations() {
    mDisableAnimations = true;
}

void enableAnimations() {
    mDisableAnimations = false;
}

@Override
public Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {
    if (mDisableAnimations) {
        return AnimationUtils.loadAnimation(getActivity(), R.anim.hold);
    }
    return super.onCreateAnimation(transit, enter, nextAnim);
} 
```

The static animation is defined in `res/anim/hold.xml` as:

```
<?xml version="1.0" encoding="utf-8"?>
<translate
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromXDelta="0"
  android:toXDelta="0"
  android:duration="2000" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T08:02:10.923

尝试在 ActivityA->FragmentA 中禁用转换 onAttach 并在 FragmentA 和 B 的 ChildFragments 中再次启用 onResume

# java - 除了 `javax.net.sampled` 包之外，我应该使用什么来处理音频流？

> ID：14394782
> 
> 赞同：4
> 
> 时间：2013-01-18T08:11:07.893
> 
> 标签：java, android, sockets, audio-streaming

我正在尝试开发一个应用程序，用于使用套接字编程在两个 android 手机之间进行音频会议。我设法在java中使用`javax.net.sampled`包来处理音频流。但是这个包在 android 中不可用，我使用的是 api 10。那么除了`javax.net.sampled`包之外我应该使用什么来处理音频流？

# objective-c - NSViewController 中的 NSScrollView

> ID：14394790
> 
> 赞同：0
> 
> 时间：2013-01-18T08:12:19.480
> 
> 标签：objective-c, macos, subview, nsscrollview, nsviewcontroller

我正在制作我的第一个 OSX 应用程序。我的 appDelegate 有一个包含 NSViewController 的 contentView 的窗口。这个 NSViewController 有一个在启动时显示的自定义视图。我添加了一个 NSScrollView 作为我的 NSViewController 的属性，并在 xib 中将它放在正确的位置并将其引用给文件所有者（NSViewController）。显示视图时，滚动视图永远不会显示。包含scrollView的代码如下：

在 viewController 的 .h 中：

```
#import <Foundation/Foundation.h>
#import <Cocoa/Cocoa.h>
#import "StockData.h"
@interface MasterViewController : NSViewController {

IBOutlet NSScrollView * scrollView1;
}
@property (retain) IBOutlet NSScrollView * scrollView1;
@property (retain) NSView * contents;

@end 
```

在 viewController 的 .m 中：

```
#import "MasterViewController.h"
#import <math.h>
#import <Foundation/Foundation.h>

@implementation MasterViewController
@synthesize scrollView1, contents;

- (void) awakeFromNib
{
self.scrollView1 = [[NSScrollView alloc] init];
self.contents = [[NSView alloc] initWithFrame:NSMakeRect(0,0,430,1000)]; 
[self.view addSubview:scrollView1];
[self.scrollView1 setDocumentView:self.contents];
}

@end 
```

如果有人可以提供帮助，那就太棒了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:27:47.227

如果我理解你的问题，如果它与 xib 文件连接良好，则不需要分配/初始化 scrollView1。xib 为您分配它，因为 scrollView1 是该 xib 的对象。如果您`NSLog(@"%@",[scrollView1 description])`在分配之前和之后，它应该给您两个不同的对象。我会尝试 ：

```
self.contents = [[NSView alloc] initWithFrame:NSMakeRect(0,0,430,1000)]; 
[self.view addSubview:scrollView1];
[self.scrollView1 setDocumentView:self.contents]; 
```

现在您将 xib scrollView1 对象添加到 self.view。希望能帮助到你！

# php - Openfire XMPP - 将用户的消息通过管道传输到 url

> ID：14394792
> 
> 赞同：0
> 
> 时间：2013-01-18T08:12:23.617
> 
> 标签：php, apache, xmpp, openfire

我对 XMPP 和 Openfire 还很陌生，我正在努力了解标准的做事方式。

理想情况下，我希望通过 POST 将特定 XMPP 用户收到的任何消息发送到 PHP 脚本随后可以处理该消息的 URL。这一切都会发生在我的本地服务器/本地 Apache 安装上。

我已经看到使用 BOSH 我可以通过 PHP 建立持久连接来监听 XMPP 消息，但是也许我弄错了，但这听起来不是一种非常稳定的做事方式——我担心我要么结束有多个持久连接，否则我的 BOSH PHP 脚本会超时，我不会意识到。理想情况下，我也不会总是打开浏览器并运行此脚本！

谁能指出一个明智的方向让我开始？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:39:23.837

您是在尝试使用 php 创建一些聊天，还是想截取给特定用户的消息以进行一些自定义工作？

你有没有看过 javascript 聊天[http://candy-chat.github.com/candy/](http://candy-chat.github.com/candy/)

也许你会找到一些可以帮助你朝着正确方向前进的东西。

# css - 为什么 form-inline 的元素之间没有空格？

> ID：14394795
> 
> 赞同：2
> 
> 时间：2013-01-18T08:12:40.170
> 
> 标签：css, twitter-bootstrap, angularjs

演示：http: [//jsfiddle.net/sunnycpp/MPACc/4/](http://jsfiddle.net/sunnycpp/MPACc/4/)

此处复制粘贴相同的代码： **HTML**

```
<div class="container">
  <debug-bar ng-controller="parentController">
    <debug-bar ng-controller="childController">
      <debug-bar ng-controller="oneMoreChildController"></debug-bar>
    </debug-bar>
    <debug-bar ng-controller="oneMoreChildController"></debug-bar>
  </debug-bar>
</div> 
```

**Javascript**

```
var angModule = angular.module('components', []);
angModule.directive('debugBar', function () {
  return {
    restrict: 'E',
    template: 
    '<div>'+
        '<form class="form-inline">' +
            '<input type="text" class="input-small" ng-model="myText"/>' +
            '<button class="btn btn-primary">Broadcast</button>' +
            '<button class="btn btn-primary">Emit</button>' +
        '</form>' +
        '<div ng-transclude></div>'+
    '</div>',
    transclude: true,
    replace: true
  };
});

function createController(myText) {
  return function ($scope) {
    $scope.myText = myText;
    $scope.$on("event", function (senderText) {
      console.log("Event received in:" + $scope.myText + " from Sender:" + senderText);
    });
    $scope.$broadCastEvent = function () {
      $scope.$broadcast("event", $scope.myText);
      console.log("Sent event from:" + $scope.myText);
    };
  };
}

angModule.controller("parentController", createController("In parent"));

angModule.controller("childController", createController("in FirstChild"));

angModule.controller("oneMoreChildController", createController("in oneMoreChildController"));
angModule.controller("oneMoreChildController", createController("in secondLevelChild")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:20:01.107

因为你没有定义任何东西。:p jsfiddle 和 bootstrap 重置边距，你没有定义任何...

定义一些边距可以立即解决问题

```
input,button{
 margin:0 5px;
} 
```

[例子](http://jsfiddle.net/MPACc/5/)

# c# - 从对象列表创建制表符分隔的字符串

> ID：14394798
> 
> 赞同：4
> 
> 时间：2013-01-18T08:12:50.723
> 
> 标签：c#, linq

我有一个名为 Person 的对象列表，我想从列表中创建一个制表符分隔的字符串

例子：

```
public class Person 
{
    public string FirstName { get; set; }
    public int Age { get; set; }
    public string Phone { get; set; }
}

List<Person> persons = new List<Persons>();

persons.add ( new person {"bob",15,"999-999-0000"} )
persons.add ( new person {"sue",25,"999-999-0000"} )
persons.add ( new person {"larry",75,"999-999-0000"} ) 
```

我想将该列表输出到如下所示的字符串：

```
"bob\t15\t999-999-0000\r\nsue\t25\999-999-0000\r\nlarry\t75\999-999-0000\r\n" 
```

现在我只是要遍历列表并以旧时尚的方式逐行执行。我想知道这是否是 LINQ 中的捷径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T08:19:25.487

[使用StringBuilder](http://www.dotnetperls.com/stringbuilder)聚合格式化的人员字符串。因此，您将避免在内存中创建大量字符串：

```
var result = persons.Aggregate(
    new StringBuilder(),
    (sb, p) => sb.AppendFormat("{0}\t{1}\t{2}\r\n", p.FirstName, p.Age, p.Phone),
    sb => sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T08:17:18.407

您可以使用[Strig.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)

```
string str = string.Join(Environment.NewLine, person.Select(r=> r.FirstName +@"\t" +
                                    r.Age + @"\t" +
                                    r.Phone")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:20:26.377

```
persons.ForEach(q => output+=(q.firstname+"\\"+q.Age.ToString()+"\\"+q.Phone+"\\")); 
```

# javascript - 选择 双击后使用jQuery的项目

> ID：14394802
> 
> 赞同：3
> 
> 时间：2013-01-18T08:13:01.433
> 
> 标签：javascript, jquery, jquery-selectors

这就是我想要做的事情：我有一个输入字段，可以用来将条目添加到待办事项列表中。在用户单击“添加”后，我使用 JQuery 显示条目的排序列表。我还使列表可排序（您可以使用 jQuery 通过鼠标拖动来更改顺序。）现在我想在双击单个列表项时将其加粗。不知何故，我没有让 jQuery 选择正确的项目......

这是我的代码。

**HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" />
        <script type="text/javascript" src='script.js'></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
        <title>Tadum</title>
    </head>
    <body>
     <h2>Tadum - The ToDo List</h2>

     <h3>Enter New ToDos</h3>
        <form id="addForm">
            <input type="text" name="ToDoListItem"></input>
        </form>
        <div id="button">Add!</div>
     <h3>Your ToDos</h3>
        <ol class="todolist"></ol>
    </body>
</html> 
```

**CSS：**

```
.todolist li{
font-weight: normal;
}
.todolist {
    font-family:garamond;
    color:#cc0000;
} 
```

**Javascript**

```
$(document).ready(function() {
    $('#button').click(function(){
        var toAdd = $('input[name=ToDoListItem]').val();
        $('.todolist').append('<li class="item">'+toAdd+'</li>');
        $('#addForm')[0].reset();
    });
    $('ol').sortable();
    $('ol').css('cursor', 'pointer');

    $('.todolist li').dblclick(function(){
       $(this).css('font-weight', 'bold'); 
    });
}); 
```

**笔记：**

如果我将`.list li`jQuery 和 CSS 样式表中的`ol`. 然后双击显示列表中的所有项目（当然，这不是我想要的）。但不知何故，我无法弄清楚如何只选择`<li>`用 jQuery 双击的个人......

（我还尝试了很多变体。例如，只使用“li”来选择双击的项目或使用“ol li”或“.item li”。它们都不起作用。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:21:19.207

您需要将`dblclick`事件处理程序绑定到新添加的列表项，如下所示：

```
$(document).on('dblclick', '.todolist li', function(){
    $(this).css('font-weight', 'bold'); 
}); 
```

请注意，这不会切换样式，而只是在双击时使它们变为粗体。如果你再次双击它不会做任何事情。

另外，如果我可以建议对您的 JavaScript 代码进行一些其他更改：您的表单通常可以像任何其他表单一样提交，无论如何都要这样做。`<form>`为了便于访问，我还向 HTML 添加了一个标签。

```
$(document).ready(function() {
    $('#addForm').submit(function(e){
        e.preventDefault();

        $('.todolist').append('<li class="item">' + $('#ToDoListItem').val() + '</li>');
        $(this)[0].reset();
    });

    $('ol').sortable().css('cursor', 'pointer');

    $(document).on('dblclick', '.todolist li', function() {
       $(this).css('font-weight', 'bold'); 
    });
}); 
```

HTML

```
<form id="addForm">
    <label for='ToDoListItem'>Item:</label>
    <input type="text" id="ToDoListItem" />
    <button type='submit'>Add!</button>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:25:46.023

您在创建文档后添加 li 项目。所以你需要使用“on”方法，这样你就可以在之后触发对新创建的项目的点击。

```
$(document).ready(function() {
    $('#addForm').submit(function(e){
        e.preventDefault();

        var toAdd = $('#ToDoListItem').val();
        $('.todolist').append('<li class="item">'+toAdd+'</li>');
        $('#ToDoListItem').reset();
    });

    $('ol').sortable().css('cursor', 'pointer');

    $(document).on('dblclick','li.item',function(){
       $(this).css('font-weight', 'bold'); 
    });
}); 
```

# cryptography - 使用 HMAC SHA-1 的 PBKDF2 如何返回超过 20 个字节？

> ID：14394803
> 
> 赞同：5
> 
> 时间：2013-01-18T08:13:04.867
> 
> 标签：cryptography, sha1, hmac, pbkdf2

如果 Node`crypto.PBKDF2`使用 HMAC SHA-1，密钥长度怎么可能超过 20 个字节？

这是我的理解（显然不正确）：`crypto.PBKDF2(password, salt, iterations, keylen, callback)`使用 HMAC SHA-1 用盐对密码进行哈希处理。然后它采用该散列并*用*相同的盐对其进行散列。无论您告诉它多少次迭代，它都会重复，然后将结果传回给您。结果被截断为您在 中指定的字节数`keylen`。

[SHA-1 输出 160 位](http://en.wikipedia.org/wiki/SHA-1#Comparison_of_SHA-functions)或 20 字节。但是，我可以从 请求`keylen`超过 20 个字节`crypto.PBKDF2`，并且超过第 20 个字节，数据不会重复。这对我来说没有意义。

**我在这里有什么误解？**

试试看：

```
c.pbkdf2('password', 'salt', 1, 21, function(err, key) {
    for (var i = 0; i < key.length; i++) {
        console.log(key[i].toString(36));
    }
}); 
```

我希望在第 20 个字节之后看到某种模式，但我没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T08:22:29.357

为了派生第`i`th 块，PBKDF2 运行完整的密钥派生，并`i`连接到盐。因此，要获得您的第 21 个字节，它只需使用不同的有效盐再次运行推导，从而产生完全不同的输出。这意味着导出 21 个字节的成本是导出 20 个字节的两倍。

* * *

我建议不要使用 PBKDF2 来导出超过底层哈希的自然输出大小/大小。通常这只会减慢防守者的速度，而不是攻击者。

我宁愿运行`PBKDF2`一次以派生单个主密钥，然后使用 HKDF 从中派生多个秘密。请参阅[如何在生成 AES 密钥和 HMAC 密钥以加密然后 MAC 时对 PBKDF2 进行加盐？在crypto.SE上](https://crypto.stackexchange.com/questions/5976/how-to-salt-pbkdf2-when-generating-both-an-aes-key-and-a-hmac-key-for-encrypt-t)

# sql - 如何从父子表中获取结果

> ID：14394805
> 
> 赞同：2
> 
> 时间：2013-01-18T08:13:16.597
> 
> 标签：sql, sql-server

在**SQL-Server**上工作。我的表结构如下

```
CREATE TABLE [dbo].[AgentInfo](
    [AgentID] [int] NOT NULL,
    [ParentID] [int] NULL,
 CONSTRAINT [PK_AgentInfo] PRIMARY KEY CLUSTERED 
(
    [AgentID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
INSERT [dbo].[AgentInfo] ([AgentID], [ParentID]) VALUES (1, -1)
INSERT [dbo].[AgentInfo] ([AgentID], [ParentID]) VALUES (2, -1)
INSERT [dbo].[AgentInfo] ([AgentID], [ParentID]) VALUES (3, 1)
INSERT [dbo].[AgentInfo] ([AgentID], [ParentID]) VALUES (4, 2) 
```

**所需输出**

使用我下面的语法获取所需的输出但不满意。有没有更好的方法来获得所需的输出

![在此处输入图像描述](../Images/46ab717a3fbae13767165ed2303333ed.png)

```
--get parent child list
---step--1 
SELECT * 
INTO #temp1 
FROM  ( SELECT a.AgentID ,
            a.ParentID,
            a.AgentID AS BaseAgent
        FROM dbo.AgentInfo a WHERE ParentID=-1
        UNION ALL         
        SELECT   a.ParentID  ,
            0 as AgentID,
            a.AgentID AS BaseAgent 
        FROM dbo.AgentInfo a WHERE ParentID!=-1
        UNION ALL
        SELECT   a.AgentID  ,
            a.ParentID,
            a.AgentID AS BaseAgent 
        FROM dbo.AgentInfo a 
        WHERE ParentID!=-1 
     ) AS d

SELECT * FROM #temp1
DROP TABLE #temp1 
```

帮助我改进我的语法。如果您有任何疑问，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:24:49.483

您可以使用递归`SELECT`，请参阅[WITH 文档中](http://msdn.microsoft.com/en-us/library/ms175972(v=sql.90).aspx)的示例，从示例 D 开始。

递归中的一般思想`WITH`是：您有一个作为起点的第一个选择，然后是一个 UNION ALL 和一个`SELECT`描述从上一级到下一级的步骤的第二个，其中上一级可以是第一个的结果选择或上一次运行第二个的结果`SELECT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:39:18.880

你可以试试这个，得到一个元素树：

```
WITH CTE_AgentInfo(AgentID, ParentID, BaseAgent)
AS(
  SELECT 
    AgentID,
    ParentID,
    AgentID AS BaseAgent
   FROM AgentInfo
   WHERE ParentID = -1
  UNION ALL
     SELECT 
    a.AgentID,
    a.ParentID,
    a.AgentID AS BaseAgent
   FROM AgentInfo a
   INNER JOIN CTE_AgentInfo c ON
    c.AgentID = a.ParentID
  )
SELECT * FROM CTE_AgentInfo 
```

这是一个[SQLFiddle](http://www.sqlfiddle.com/#!3/08b9c/24)演示来查看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:40:59.240

尝试这样的事情：

```
WITH Merged (AgentId, ParentId) AS (
     SELECT AgentId, ParentId FROM AgentInfo WHERE ParentId = -1
     UNION ALL
     SELECT AgentInfo.AgentId, AgentInfo.ParentId FROM AgentInfo INNER JOIN Merged ON AgentInfo.AgentId = Merged.ParentId
)
SELECT * FROM Merged 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:51:37.267

您可以使用[公用表表达式](http://www.simple-talk.com/sql/t-sql-programming/sql-server-cte-basics/)来执行此操作。

然后 sql 语句将如下所示：

```
WITH [Parents]([AgentID], [ParentID], [BaseAgent])
AS
(
    SELECT 
      [AgentID],
      [ParentID],
      [AgentID] AS [BaseAgent]
    FROM [AgentInfo]
    WHERE [ParentID] = -1
    UNION ALL
    SELECT 
      [ai].[AgentID],
      [ai].[ParentID],
      [p].[BaseAgent]
    FROM [AgentInfo] [ai]
    INNER JOIN [Parents] [p] 
      ON [ai].[ParentID] = [p].[AgentID]
)

SELECT *
FROM [Parents]
ORDER BY 
  [BaseAgent] ASC,
  [AgentID] ASC 
```

但是，结果与您想要的输出不同，因为每个代理只列出一次。输出是：

```
AGENTID     PARENTID    BASEAGENT
1           -1          1
3            1          1
2           -1          2
4            2          2 
```

小提琴在[这里](http://www.sqlfiddle.com/#!3/08b9c/27)。

这是一篇关于使用层次结构的好帖子：[在关系数据库中存储层次结构数据的选项是什么？](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)

# java - 如何获取maven依赖源并将它们解压到指定目录？

> ID：14394807
> 
> 赞同：4
> 
> 时间：2013-01-18T08:13:20.757
> 
> 标签：java, maven, vim, ctags

虽然我结合了 maven 和 vim ，但我找不到将我的项目依赖的所有源下载到指定目录并将它们解包在一起的方法。

这样我就可以`tags`轻松生成。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:25:50.317

您可以使用[maven-eclipse-plugin](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)插件下载源代码，并为您提供可用源 jar 的列表（您的某些依赖项可能没有可用源）。

依赖插件也可以下载源码，但是获取需要的jar列表比较难。

你可以尝试这样的事情：

```
dir=target/sources
mkdir -p $dir
mvn eclipse:eclipse -DdownloadSources
sed -rn '/sourcepath/{s/.*sourcepath="M2_REPO.([^"]*).*/\1/;p}' .classpath | \
  (cd $dir && xargs -i jar xf ~/.m2/repository/{}) 
```

这将运行`mvn eclipse:eclipse -DdownloadSources`，它将下载源代码，并将`.classpath`文件写入本地目录。此文件包含源 jar 的路径。它看起来有点像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
  <classpathentry kind="src" path="src/main/java" including="**/*.java"/>
  <classpathentry kind="output" path="target/classes"/>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
  <classpathentry kind="var" path="M2_REPO/net/sourceforge/findbugs/jsr305/1.3.7/jsr305-1.3.7.jar"/>
  <classpathentry kind="var" path="M2_REPO/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar" sourcepath="M2_REPO/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0-sources.jar"/>
</classpath> 
```

在我的示例中，您可以看到有 JCIP 注释 jar 的源，但没有 FindBugs JSR305 jar。

sed 命令提取源 jar 的路径（相对于您的 maven 本地存储库）。然后 xargs 命令将每个源 jar 解压到`$dir`.

eclipse 插件创建文件`.classpath`和`.project`目录`.settings`- 如果您从不使用 Eclipse，可以删除这些文件。

# ios - 解码 SHA256 目标 C

> ID：14394811
> 
> 赞同：0
> 
> 时间：2013-01-18T08:13:28.603
> 
> 标签：ios, objective-c, encryption

> **可能重复：**
> [iPhone/OS X LION：如何从 CC_SHA256 加密数据中检索解码数据？](https://stackoverflow.com/questions/10174536/iphone-os-x-lion-how-to-retrieve-the-decoded-data-from-the-cc-sha256-encrypted)

我正在使用它来连接我的字符串。我怎样才能解码它？

```
-(NSString*)sha256HashFor:(NSString*)input
{
    const char* str = [input UTF8String];
    unsigned char result[CC_SHA256_DIGEST_LENGTH];
    CC_SHA256(str, strlen(str), result);

    NSMutableString *ret = [NSMutableString stringWithCapacity:CC_SHA256_DIGEST_LENGTH*2];
    for(int i = 0; i<CC_SHA256_DIGEST_LENGTH; i++)
    {
        [ret appendFormat:@"%02x",result[i]];
    }
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:15:59.320

**SHA**（安全散列算法）是众多加密散列函数之一。加密哈希类似于文本或数据文件的签名。SHA-256 算法生成一个几乎唯一的、固定大小的 256 位（32 字节）散列。**哈希是一种单向函数——它不能被解密回来。**这使其适用于密码验证、挑战哈希认证、防篡改、数字签名。

希望这些信息对你有帮助..

# r - 如何从 R 中的每日文件计算月平均值？

> ID：14394812
> 
> 赞同：2
> 
> 时间：2013-01-18T08:13:31.940
> 
> 标签：r

我有 [365 个二进制文件][1]。我想计算每月平均值。所以从*365 文件*中，

此代码将取每 30 个文件的平均值。

```
results <- list()
for (.files in files.group) {
      x <- do.call(rbind,(lapply(.files, readBin  , double() , size = 4, n =360 * 720, 
                 signed =T)))
          results[[length(results) + 1L]] <- colMeans(x)
    } 
```

对于以下方面的任何想法，我将不胜感激：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:38:11.813

```
dir1 <- "C:\\New folder (4)\\New folder"
files <- list.files(dir1, "*.bin",full.names=TRUE) 
```

首先，您必须提取文件的编号（因为它们没有按照您希望的方式排序（即“ET10.bin”在“ET1.bin”之后而不是“ET9.bin”之后）。

```
step1 <- strsplit(gsub("\\.bin","",files),split="ET")
filenumber <- do.call(rbind,step1)[,2] 
```

那么这个数字就是数字形式的一年中的日子（由`strptime`as识别`%j`）。假设有问题的年份是 2012 年：

```
step2 <- strptime(paste(filenumber,"2012",sep="-"),format="%j-%Y")
files.group <- split(files, cut(step2, "month")) 
```

关于 -999 值`x[x == -999] <- NA`，只要您记得在计算平均值时排除 NA 值（即`colMeans(x, na.rm=TRUE)`） ，就可以解决问题

**编辑**：根据@f3lix 的建议，您可以通过`filenumber`更直接的方式获得：

```
dir1 <- "C:\\New folder (4)\\New folder"
files <- list.files(dir1, "*.bin",full.names=TRUE)
filenumber <- gsub(".*ET([0-9]+).bin", "\\1", files)
files.group <- split(files, cut(strptime(paste(filenumber,"2012",sep="-"),format="%j-%Y"), "month")) 
```

然后你的循环：

```
results <- list()
for (i in 1:12) {
    x <- do.call(rbind,(lapply(files.group[[i]], readBin  , 
                               double() , size = 4, n =360 * 720, signed =T)))
    x[x == -999] <- NA
    results[[i]] <- colMeans(x, na.rm=TRUE)
    }

for (i in seq_along(results)) {
    fileName <- sprintf("C:\\Users\\New folder\\glo_%d.flt", i)
    writeBin(as.double(results[[i]]), fileName, size = 4)
    } 
```

# jquery - 通过单击 SVG 对象将文本复制到剪贴板

> ID：14394813
> 
> 赞同：1
> 
> 时间：2013-01-18T08:13:31.057
> 
> 标签：jquery, svg, clipboard

是否可以通过使用 jQuery 单击 SVG 对象的元素将一些文本复制到剪贴板？我使用零剪贴板通过按简单按钮复制到剪贴板，但类似的方法在这种情况下不起作用 - 它无法将 Flash 绑定到 SVG 对象。请告知 - 有没有办法做到这一点？

我的代码报错 SyntaxError: An invalid or invalid string was specified in zclip 模块。

```
<object data="vas.svg" type="image/svg+xml" id="svgmap"></object>
<script type="text/javascript" src="jquery.zclip.min.js"></script>
<script>
jQuery(window).load(function () { 
var svgobject = document.getElementById('svgmap').contentDocument.getElementById('path3627');
jQuery(svgobject).zclip({
path:'ZeroClipboard.swf',
copy:'Some Text'});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:55:36.727

也许`zclip`是因为`svg`因为元素

绑定到`click`元素的事件并`clip.setText()`在事件处理程序中手动调用。

# python - 在python中将一系列列表项更改为整数

> ID：14394814
> 
> 赞同：1
> 
> 时间：2013-01-18T08:13:32.197
> 
> 标签：python, list, python-3.x, range

我有一个清单。假设它有 10 个项目长。它们都是字符串类型的列表项。我试图找到一种简单的方法将第 3 到第 10 项更改为整数类型对象，同时将前 2 项保留为字符串。蟒蛇 3.3

是的，它不太好用，所以我尝试将其拆分为自己的列表，这发生了。

```
Traceback (most recent call last):

  File "project1.py", line 10, in <module>

    hList=list(map(int,row[2:]))                       #row is the name of my string list

ValueError: invalid literal for int() with base 10: '6.67' 
```

我尝试打印`hList`，它在我的循环中显示了 24 个中的前 4 个

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T08:20:11.870

这可以通过切片分配轻松完成

```
>>> l = list(map(str, range(10)))
>>> l[2:] = map(int, l[2:])
>>> l
['0', '1', 2, 3, 4, 5, 6, 7, 8, 9] 
```

解决此问题的另一种方法是将其拆分为两个列表，并将其中一个转换为整数列表。

```
>>> l = list(map(str, range(10)))
>>> l = l[:2] + map(int, l[2:])
>>> l
['0', '1', 2, 3, 4, 5, 6, 7, 8, 9] 
```

不同之处在于，在后一种情况下，您创建一个新的`list`where 就像在前者中一样更新`list`就地

@Ashwini 提到，Python 3， map 返回一个 map 对象而不是一个列表，因此您可能希望通过`list`调用传递它或者更好地使其成为列表理解

```
l[2:] = [int(e) for e in  l[2:]] 
```

或者

```
l[2:] = list(map(int, l[2:])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:23:18.597

您可以使用列表理解：

```
>>> mylist[2:] = [int(l) for l in mylist[2:]]

>>> mylist
['0', '1', 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:17:53.040

当我在循环中使用索引时，这是一种罕见的情况：

```
In [1]: l = list(map(str, range(10)))

In [2]: l
Out[2]: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']

In [3]: for i in range(2, 10):
   ...:     l[i] = int(l[i])
   ...:     

In [4]: l
Out[4]: ['0', '1', 2, 3, 4, 5, 6, 7, 8, 9] 
```

或使用 Abhijit 显示的切片分配。

请注意，如果您使用列表并且...

1.  它不是同质的（有些项目是整数，有些不是），
2.  它的长度是固定的（你事先知道它是 10），

那么也许列表不是数据结构的最佳选择。考虑使用 a`tuple`或 a`dict`代替。模块中也有一些很好的扩展[`collections`](http://docs.python.org/3.3/library/collections.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:42:03.583

一个简单的`for`循环可以做到这一点：

```
my_list = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10']
new_list = []
for index in range(2, 10): # start at 2 because indexing starts at 0
    my_num = float(my_list[index]) # if the number was not an integer, but a float, it is better to use float(),
    new_list.append(my_num)        # which can handle both floats and integers
print new_list # so you can see the result 
```

输出：

```
[3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] 
```

# asp.net - 将重复的数据行添加到我的访问数据库

> ID：14394820
> 
> 赞同：0
> 
> 时间：2013-01-18T08:14:06.550
> 
> 标签：asp.net, ms-access

嘿，当我提交表单时，我在向我的数据库添加单行数据时遇到困难，它将两行数据插入我的 mdb 数据库，任何建议示例或帮助都会起作用，非常感谢

```
Protected Sub Button3_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button3.Click
    Dim conCoaxis As OleDbConnection
    Dim strInsert As String
    Dim cmdInsert As OleDbCommand

    conCoaxis = New OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0;Data Source=C:\site\App_Data\sabersolutions.mdb")
    strInsert = "INSERT INTO register (Name, Email, Newsletter) Values (?, ?, ?)"
    cmdInsert = New OleDbCommand(strInsert, conCoaxis)

    cmdInsert.Parameters.Add("@Name", OleDbType.VarWChar, 255).Value = txtName.Text
    cmdInsert.Parameters.Add("@Email", OleDbType.VarWChar, 255).Value = txtEmail.Text
    cmdInsert.Parameters.Add("@Newsletter", OleDbType.Boolean, 1).Value = ckNews.Checked

    Try
        conCoaxis.Open()
        cmdInsert.ExecuteNonQuery()
        conCoaxis.Close()
        Response.Write("Updated Successfully!<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>")
    Catch
        conCoaxis.Close()
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:55:28.853

你的代码看起来不错。在我看来，您更像是多次将子例程`Button3_Click`分配为处理程序。例如，在 aspx 页面中，您有类似

```
<asp:Button runat="server" ID="Button3" Text="Submit" OnClick="Button3_Click" /> 
```

看到 OnClick 属性了吗？将点击事件连接到调用`Button3_Click` 然后在其他地方，可能在`Page_Load`.vb 代码隐藏中，您还具有：

```
AddHandler Button3.Click, AddressOf Me.Button3_Click 
```

所以 ONE click 事件最终会调用相同的函数两次。摆脱`AddHandler`您不需要手动连接点击处理程序的代码，它已经为您完成了。

如果这不是您的问题，您当然可能会单击您的按钮两次，这是 HTML 表单的一个众所周知的问题。[你可以谷歌很多解决方案](http://www.google.com/webhp?q=VB.NET%20prevent%20double%20submit)。我首选的解决方案是始终先执行“SELECT”以检查记录是否已存在，或者将插入命令包装在“IF NOT EXISTS”中（我认为这适用于 MS Access，我知道它适用于 MS Sql Server）

```
strInsert = "IF NOT EXISTS (SELECT 1 FROM register WHERE Name = @Name AND Email = @Email AND Newsletter = @Newsletter) BEGIN INSERT INTO register (Name, Email, Newsletter) Values ( @Name, @Email, @Newsletter) END" 
```

另一种选择是：

```
strInsert = "INSERT INTO register (Name, Email, Newsletter) SELECT TOP 1 @Name, @Email, @Newsletter FROM register WHERE NOT EXISTS (SELECT 1 FROM register WHERE Name = @Name AND Email = @Email AND Newsletter = @Newsletter)" 
```

后一种语句仅在“注册”中至少有一条记录时才有效，MS Access Jet 数据库在语句中需要表名，[有关更多信息，请参见此处](http://www.utteraccess.com/forum/exists-access-t1914818.html)。说真的，放弃 Access 并使用像 SQL Server 这样的适当数据库，然后您可以直接使用第一条语句或通过存储过程使用更专业的解决方案。

# java - 在java中使用get参数获取所有值

> ID：14394822
> 
> 赞同：3
> 
> 时间：2013-01-18T08:14:21.793
> 
> 标签：java, javascript, apache-flex, flex3

我将一些值 url 从 flex 传递到 java 示例： URL 格式：

```
../mahesh/initUser.do?method=fwdAccDetails&securityId=mUuB3/p/ky5JhZPY5T8Znf01YCcIarIalQiGEXPMMsOkWDX+KtT4fx2gMML+uup8 
```

在我厌倦了`"securityId"`在java中获取值之后

`request.getParameter("securityId")`

但我只得到以下值

**mUuB3/p/ky5JhZPY5T8Znf01YCcIarIalQiGEXPMMsOkWDX KtT4fx2gMML uup8**

*   符号在java端获得空白空间..

这是我的弹性代码：

```
navigateToURL(new URLRequest('../mahesh/initUser.do?method=fwdAccDetails&securityId='+value+'),'_s‌​elf'); 
```

我没有得到完整的值..任何人都可以帮助我如何在 Java 中获得正确的值..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:19:25.703

您应该使用 encodeURIComponent()-Function 正确编码您的 securityId。

```
value = encodeURIComponent(value);
navigateToURL(new URLRequest('../mahesh/initUser.do?method=fwdAccDetails&securityId='+value+'),'_s‌​elf'); 
```

这样，您的 String 在 Java 端将是正确的。

如果您想了解有关正确转义的更多信息，请查看[何时应该使用转义而不是 encodeURI / encodeURIComponent？](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)（同样的论点适用于 Flex 和 JavaScript）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:51:18.140

我只是解决了我在 javURLDecoder.decode(param1AfterEncoding.replace("+", "%2B"), "UTF-8").replace("%2B", "+") 中的以下代码的问题现在它工作正常只有..我认为其他特殊字符会正常工作..我稍后会检查它..

# backbone.js - 重置集合时设置 {silent: true} 仍会触发“重置”事件

> ID：14394824
> 
> 赞同：7
> 
> 时间：2013-01-18T08:14:37.367
> 
> 标签：backbone.js, collections, reset, silent

我正在尝试在不触发“重置”事件的情况下重置我的收藏。我已将我的收藏设置为收听“重置”和“添加”事件

```
@.listenTo(@options.muses, 'add', @addOne)
@.listenTo(@options.muses, 'reset', @addAll) 
```

当我点击一个按钮时，我要做的第一件事就是清除集合

```
optionButtonClicked: (e) ->
  e.preventDefault()
  target = @$(e.currentTarget)

  //step to clear out the collection
  @options.muses.reset({silent:true}) 
```

然而，当我进行一些记录和检查时，我意识到“重置”事件仍在被触发，即@addAll 函数仍在被调用。

我在这里错过了什么吗？不静默：真应该抑制重置事件吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T08:43:51.807

reset 有两个可选参数，models 1st，options 2nd。来自文档：`resetcollection.reset([models], [options])`。

所以你需要传入静默选项作为第二个参数。

```
@options.muses.reset(undefined, {silent:true}); 
```

# symfony - Symfony2 Forms - 使用 Propel ModelType 在下拉列表中选择值

> ID：14394825
> 
> 赞同：4
> 
> 时间：2013-01-18T08:14:40.240
> 
> 标签：symfony, propel

我正在尝试设置“模型”（来自 Symfony Propel Bridge 的 ModelType）表单类型的选定值，但我失败了。

有具有以下结构的产品表：

```
id, name, category_id 
```

示例数据为：

```
id => 1, name => 'Test', category_id => 3 
```

另一个表保存类别数据，因此 category_id 是一个外键。

```
id => 1, name => 'Category 1'
id => 2, name => 'Category 2'
id => 3, name => 'Category 3' 
```

我正在使用的表单类型是：

```
$builder->add('category_id', 'model', array(
    'class' => 'Foo\BarBundle\Model\Category',
    'required' => true,
    'multiple' => false,
    'expanded' => false,
    'label' => 'Pick a product category!',
    'query' => CategoryQuery::create()->orderByName(),
)); 
```

现在，当我加载表单时，我会得到一个不错的选择下拉菜单，其中包含您所期望的有序类别。

我希望下拉菜单为已经存在的产品显示正确的“选定”类别（用例：在产品编辑表单中）。因此，产品 ID 1 将选择“类别 3”选项。

我尝试设置一个“数据”选项（被忽略），所以我很困惑为什么这么基本的东西看起来如此困难。

任何帮助将不胜感激。

更新：问题已解决，见下文：

```
$builder->add('category', 'model', array(
    'class' => 'Foo\BarBundle\Model\Category',
    'required' => true,
    'multiple' => false,
    'expanded' => false,
    'label' => 'Pick a product category!',
    'query' => CategoryQuery::create()->orderByName(),
)); 
```

将“category_id”更改为“category”，世界上的一切都再次正常。

# jquery - jQuery .on('change') 函数在 input[type=file] 上不起作用

> ID：14394829
> 
> 赞同：2
> 
> 时间：2013-01-18T08:15:17.277
> 
> 标签：jquery

我有类似的东西：

```
$('input[type=file]').on('change', function(){ 
console.log('changed!'); }); 
```

它不起作用。它适用于其他表单元素，但不适用于 input[type=file]。但是，当我将 .on() 函数更改为 .live() 时，它工作正常。我使用 jQuery 1.8.3，但我想升级到 1.9.0，这样就不会再有 .live() 函数了。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:17:10.207

“开”适用于 jquery 1.8.3。您可以尝试此代码并检查下面的演示，该演示适用于我的 jquery 1.8.3。

```
$('input[type="file"]').on('change', function(event){ 
     console.log('changed!'); 
}); 
```

试试这个：[演示](http://jsfiddle.net/aZh47/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:05:05.910

我有理论：

您确定您的选择器**$('input[type=file]')**实际上正在检索任何元素吗？如果您将输入动态插入到 DOM 中，则很有可能在运行选择器时它们不存在，这可以解释**.live**的工作原理。

尝试使用这段代码：

```
$('body').on('change', 'input[type=file]', function(event){
    console.log('Changed!');
}); 
```

如果它有效，你就发现了你的问题......你在元素存在之前选择它们并在代码运行后将它们插入到 DOM 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:23:39.500

你也可以试试

```
$('input:file').on('change', function(event){ 
     console.log('changed!'); 
}); 
```

# android - 无法在未调用 Looper.prepare() 的线程内创建处理程序这是什么意思？

> ID：14394831
> 
> 赞同：-2
> 
> 时间：2013-01-18T08:15:20.077
> 
> 标签：android

我有以下代码来解析来自 Facebook 的 JSon 响应：

```
doInBackground(JSONObject... params) {
   try {
     JSONArray posts = params[0].getJSONArray("notifications");
     notifications.clear();
     for (int i = 0; i < posts.length(); i++) {
     Notifications info = new Notifications();
     JSONObject tempobj = (JSONObject) posts.get(i);
     //some code here related to parse...
       }
     }catch(Ex...xxx){}
     sort();
} 
```

我的排序方法如下：

```
private void sort() {
        mActivity.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                Log.e("sort called", "sort called" + actualListView.getSelectedItemPosition());
                try {
                    Collections.sort(notifications, new Comparator<Notifications>() {

                        @Override
                        public int compare(Notifications object1, Notifications object2) {

                            int time1 = Integer.parseInt(object1.updated_time);
                            int time2 = Integer.parseInt(object2.updated_time);
                            if (time1 < time2)
                                return 1;
                            else if (time1 > time2)
                                return -1;
                            return 0;
                        }
                    });
                } catch (Exception e) {
                    Log.e("java.util.Collections", "Error occurred in sorting the notifications");
                    e.printStackTrace();
                }
            }
        });

    } 
```

在 onPostExecute 方法中，我调用另一个方法来更新 UI。：但我面临异常。日志在这里：

```
STACK_TRACE=java.lang.ExceptionInInitializerError
at
com.platinumapps.fragments.NotificationFragment$NotificationRequestListener.onComplete(NotificationFragment.java:241)
at
com.facebook.android.AsyncFacebookRunner$3.run(AsyncFacebookRunner.java:391)
Caused by: java.lang.RuntimeException: Can't create handler inside thread
that has not called Looper.prepare()
at android.os.Handler.<init>(Handler.java:121)
at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
... 2 more
java.lang.RuntimeException: Can't create handler inside thread that has not
called Looper.prepare()
at android.os.Handler.<init>(Handler.java:121)
at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
at
com.platinumapps.fragments.NotificationFragment$NotificationRequestListener.onComplete(NotificationFragment.java:241)
at
com.facebook.android.AsyncFacebookRunner$3.run(AsyncFacebookRunner.java:391) 
```

代码有什么问题？请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:23:55.593

你 打电话`sort()`进来`doInBackground`, 哪个 打电话`runOnUiThread`... 把 那 人 移到,`onPostExecute`因为 你 不能 打电话...`runOnUiThread``doInBackground`

```
 doInBackground(JSONObject... params) {
 try {
 JSONArray posts = params[0].getJSONArray("notifications");
 notifications.clear();
 for (int i = 0; i < posts.length(); i++) {
 Notifications info = new Notifications();
 JSONObject tempobj = (JSONObject) posts.get(i);
 //some code here related to parse...
   }
 }catch(Ex...xxx){}
 //sort();  //need to be moved
}

onPostExecute() {
   sort();
  .....
} 
```

# jquery - 移动网站看起来不像移动网站

> ID：14394833
> 
> 赞同：1
> 
> 时间：2013-01-18T08:15:50.087
> 
> 标签：jquery, css, jquery-mobile

我是 Jquery 移动网站的新手，但我使用 Jquery 制作了这个移动网站。但是当我在我的 Iphone 4s 上查看它时，它不会像移动网站那样正确加载。相反，它看起来像是一个遥远的桌面站点。有人可以告诉我我做错了什么以及如何解决吗？

您可以在此处找到该网站：[http ://www.rodgersgroupllc.com/mobile/](http://www.rodgersgroupllc.com/mobile/)

谢谢，

坦率

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:18:48.367

您唯一缺少视口缩放的元标记。

```
<meta name="viewport" content="initial-scale=1.0"> 
```

除此之外一切都很好。

查看这个 JS 书签，快速了解您的设计在 iphone 或其他移动设备中的外观：

[http://responsive.victorcoulon.fr/](http://responsive.victorcoulon.fr/)

对于 iPhone 分辨率，可以在此处找到分辨率：[iPhone 分辨率](http://javascriptkit.com/dhtmltutors/cssmediaqueries2.shtml)，请注意，尽管 iphone 4 的实际分辨率是，像素密度是两倍，因此分辨率是一半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:18:58.543

尝试将此行添加到您的`head`标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

这会将您的视口设置为正常比例。大多数移动浏览器默认缩放页面。

该`width`属性设置为`device-width`，强制窗口的宽度与设备宽度相同（doh！）。`initial-scale`设置浏览器打开页面时的比例。最后，`maximum-scale=1`不允许用户缩小。

欲了解更多信息：[https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

# c# - 在c#中修剪一个字符串

> ID：14394834
> 
> 赞同：0
> 
> 时间：2013-01-18T08:15:51.027
> 
> 标签：c#, telerik, sitefinity

我在 Telerik sitefinity 中使用 pdf 文件名，如下所示：

```
test..pdf (41 KB )

1..pdf (34 KB ) 
```

如何像这样改变这些？`test.pdf`和`1.pdf`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:17:31.907

如果它们看起来都像这样（两个句点而不是一个句点，您可以简单地执行以下操作：

```
myFileName = myFileName.Replace("..", "."); 
```

此外，似乎我没有考虑附加到路径的文件的大小。可以通过分割空间来删除​​它，并采用这样的第一个元素：

```
myFileName = myFileName.Split(' ')[0]; 
```

要同时用 .. 替换 .. 并删除文件大小，您可以像这样将它们链接在一起：

```
myFileName = myFileName.Replace("..", ".").Split(' ')[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:22:49.173

更简单：`string fileName = tempFileName.Replace("..pdf",".pdf");`

对于性能、使用`StringBuilder.Replace()`方法、

```
StringBuilder strBuilder = new StringBuilder(tempFileName);
strBuilder.Replace("..pdf", ".pdf");
string fileName = strBuilder.ToString(); 
```

如果你像我一样只想替换一个实例（这有点棘手）

```
string ReverseString(string p)
{
    char[] arr = p.ToCharArray();
    Array.Reverse(arr);
    return new string(arr);
}

var regex = new RegEx("fdp..");
var fileName = ReverseString(regex.Replace(ReverseString(tempFileName), "fdp.",1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:18:09.527

如果扩展名未知，那么在您的情况下它是 PDF，这可以通过以下方式完成：

```
string fileName = string.Format("{0}.pdf","test..pdf (41 KB )".Split('.')[0]); 
```

如果您需要更大的灵活性，也可以将`PDF`其设为字符串变量。

不要简单地替换，因为文件*也可以*包含点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:18:22.477

String.Replace 方法允许您将“..”替换为“.” 只要您知道没有其他情况可能需要“..”

例如：

```
 pdfFile = pdfFile.Replace("..", "."); 
```

# javascript - 我的函数参数有问题还是其他问题？

> ID：14394850
> 
> 赞同：0
> 
> 时间：2013-01-18T08:17:42.280
> 
> 标签：javascript, jquery, function

有这个功能，但它似乎没有正确执行。这里是：

```
 function chooseCols(colTag,tagName) {
            // Set name column
            var column = $('.tagChooser:eq('+ colTag +')');         
            column.parents('.col').css('background','#EAF3EA');
            column.val(tagName);            
        } setTimeout(chooseCols(data.col_name,'colName'), 2000); 
```

正确执行是指未选择正确的选择选项，并且其父项的背景颜色保持不变。

**哦顺便说一句，data.col_name 是我从 ajax 调用中获得的一个 json 对象。它给了我一个可以用来选择正确的索引。**

欢迎任何提示！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:20:23.040

试试这个：

```
 function chooseCols(colTag,tagName) {
     // Set name column
     var column = $('.tagChooser:eq('+ colTag +')');         
     column.parents('.col').css('background','#EAF3EA');
     column.val(tagName);            
  } 
  setTimeout(function () {
      chooseCols(data.col_name,'colName');
  }, 2000); 
```

你的问题是因为你调用你的函数 ( `chooseCols(data.col_name,'colName')`) 并传递`undefined`而不是函数到`setTimeout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:20:59.673

传递参数应该是这样的

```
setTimeout(function(){
    chooseCols(data.col_name,'colName')
}, 2000); 
```

# android - 从相同的代码库构建 2 个应用程序

> ID：14394851
> 
> 赞同：0
> 
> 时间：2013-01-18T08:17:43.427
> 
> 标签：android, android-intent

我需要从同一个代码库构建不同的应用程序。第一个应用程序具有提供拼车服务的功能，第二个应用程序具有搜索和注册拼车服务的功能。现在这两个应用程序都需要不同。他们的切入点就是我需要与众不同的地方。有没有办法提供构建时间选项来在启动期间更改 Intent-Filter？

有很多关于为通用功能创建 jar 的建议。但我不想那样做。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:52:00.850

这需要将您的代码分解为可以在构建时进行配置的方式。这通常需要编辑某些文件的程序文件（清单、java 文件、构建文件等）以使用构建时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:00:23.007

是的，创建两个清单文件。使用 Maven 编译（我假设您也可以为此使用 Ant） 创建两个配置文件。根据配置文件设置清单。

IE。

pom.xml

```
 <profile>
     <id>Target1</id>
     <properties>
        <customerManifest>Target1Manifest.xml</customerManifest>
      </properties>
      </profile>
 <profile>
     <id>Target2</id>
     <properties>
        <customerManifest>Target2Manifest.xml</customerManifest>
      </properties>
      </profile>

<plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.2.0</version>
                <configuration>
                    <androidManifestFile>${customerManifest}</androidManifestFile>
                    <sdk>
                        <platform>15</platform>
                    </sdk>

            </plugin> 
```

这会切换清单，以便您可以设置单独的入口点。

# java - 在java中将TreeSet从最后一个节点横穿到第一个节点的最佳方法是什么？

> ID：14394857
> 
> 赞同：1
> 
> 时间：2013-01-18T08:18:12.733
> 
> 标签：java, performance, treeset

我已经有了遍历 TreeSet 的解决方案。我的问题与性能有关，我实现最佳的方式是什么？请参阅下面的代码示例。

```
public static void main(String[] args)
{ 
  TreeSet ts = new TreeSet();
  ts.add("F");
  ts.add("B");
  ts.add("H");
  ts.add("Z");

  while (!ts.isEmpty())
  {
    String last = (String)ts.last();
    System.out.println(last);
    ts.remove(last);
  }
  // OUTPUT: Z H F B
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:22:03.763

看起来很简单

```
 TreeSet ts = new TreeSet();
    Iterator i = ts.descendingIterator();
    while(i.hasNext()) {
        Object next = i.next();
    } 
```

或者

```
 for(Object e : ts.descendingSet()) {
    } 
```

对于低于 1.6 的 Java，您可以尝试

```
 TreeSet tmp = new TreeSet(Collections.reverseOrder());
    tmp.addAll(ts);
    for(Object e : tmp) {
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:44:05.623

一种与 JDK 5 兼容的方式：创建一个新的集合，并将比较器反转。

```
TreeSet<String> trev = new TreeSet<String>(Collections.reverseOrder());
trev.addAll(ts);
//now you can just iterate which the usual forward iterator.
Iterator i = trev.iterator();
while(i.hasNext()) {
    String next = i.next();
} 
```

# sql - 如何得到join操作的结果？

> ID：14394863
> 
> 赞同：0
> 
> 时间：2013-01-18T08:18:41.490
> 
> 标签：sql, drupal, join

每当我尝试在 drupal 的功能模块中执行此 sql 查询时，我都无法获得结果，但是当我尝试在 MySQL 中执行此操作时，我可以查看结果。我的代码如下所示：

```
 function _get_subject_sub_category() {

  $options = array();
  $sql = "SELECT father.Subject_Code, child.Subject_Category 
FROM {subjects} as child 
INNER JOIN {subjects} as father ON (child.Parent_Category = father.Subject_Code
AND child.Level =2 )";

  $result = db_query($sql);
  foreach ($result as $row) {

     $options[$row->father.Subject_Code] = $row->child.Subject_Category;

  }
  return $options;
  } 
```

我遇到的错误在 $options[$row->father.Subject_Code] = $row->child.Subject_Category;` 行中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:22:59.987

尝试更改此行：

```
$options[$row->father.Subject_Code] = $row->child.Subject_Category; 
```

对此：

```
$options[$row->Subject_Code] = $row->Subject_Category; 
```

表的名称不在结果中。如果需要避免混淆，可以在 SQL 查询中使用别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:23:03.690

我不知道drupal，也不使用php，但我会说：

删除 `father.`_`$row->father.Subject_Code`

和

`child.`在`$row->child.Subject_Category`

因为父亲和孩子只是数据库别名。

# android - Youtube 嵌入视频在 android 4+ 中不起作用（冰淇淋三明治、果冻豆）

> ID：14394875
> 
> 赞同：1
> 
> 时间：2013-01-18T08:19:20.407
> 
> 标签：android, html5-video, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

此代码在 android 2.2 中运行良好。但在 android 4+ 中给出不支持协议的错误我参考了这个网站[https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

```
<html>
 <head>
<meta name="viewport" content="width=device-width; height=device-height;">
 <title>Vadivel</title>

<style>
body
{
background-color:#588DEA;
}
</style>
 </head>
<body marginwidth="0" marginheight="0">

<object width="320" height="430">
<param name="movie" value="https://www.youtube.com/v/5whBYQVnjvY?modestbranding=1&rel=0&autoplay=1"></param>
<param name="allowScriptAccess" value="always"></param>
<embed src="https://www.youtube.com/v/5whBYQVnjvY?modestbranding=1&rel=0&autoplay=1" type="application/x-shockwave-flash" allownetworking="internal" allowscriptaccess="always" allowfullscreen="true"  width="320" height="430">
    </embed>
</object>

   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:23:34.813

试试这个：

```
<iframe class="youtube-player" type="text/html" width="640" height="385"
src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0">
</iframe> 
```

来源：[http ://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)

需要这个：[强制 HTML5 youtube 视频](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)

另请参阅：[https ://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

# magento - 如何自定义 magento 视图

> ID：14394880
> 
> 赞同：4
> 
> 时间：2013-01-18T08:19:39.180
> 
> 标签：magento, magento-1.7

我正在学习 magento，并且仍在尝试找出当您转到特定 URL 时呈现哪些视图。

例如，如果我转到具有 URL 的登录屏幕；

```
http://localhost/magento-sample/index.php/customer/account/login/ 
```

我已经在上面安装了一个主题，现在 app\design\frontend 有三个文件夹：

*   根据
*   默认
*   神话主题

请帮我找到渲染视图。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:29:13.240

如果通过视图您的意思是模板文件，那么它将是

```
app/design/PackageName/ThemeName/template/customer/form/login.phtml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:42:34.770

伙计们，我找到了一种很容易找到的方法。

去吧；

```
admin panel> configuration > developer(left menu bottom most option) > debug 
```

并将“模板路径提示”设置为“是”

这将为屏幕上呈现的所有视图提供目录路径。

# vba - VBA 用于在特定范围的细胞和保护细胞不被冲走配方中的明确值

> ID：14394883
> 
> 赞同：6
> 
> 时间：2013-01-18T08:19:55.580
> 
> 标签：vba, excel

我有来自 A1:Z50 之类的数据，但我只想使用 VBA 删除 A5:X50（我认为这比拖动整个单元格或使用 快很多`clickA5+shift+clickX50+delete`）。我怎样才能做到这一点 ？

然后，如何锁定单元格以防止其被修复或清除？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T08:27:35.027

您可以定义一个包含以下代码的宏：

```
Sub DeleteA5X50()   
    Range("A5:X50").Select
    Selection.ClearContents
end sub 
```

运行宏将选择活动工作表上的范围 A5:x50 并清除该范围内单元格的所有内容。

要使您的公式保持不变，请改用以下内容：

```
Sub DeleteA5X50()   
    Range("A5:X50").Select
    Selection.SpecialCells(xlCellTypeConstants, 23).Select
    Selection.ClearContents
end sub 
```

这将首先选择您有兴趣从中清除内容的整个单元格范围，然后进一步将选择范围限制为仅包括包含 excel 认为是“常量”的单元格。

您可以在 Excel 中手动执行此操作，方法是选择单元格范围，点击“f5”以弹出“转到”对话框，然后单击“特殊”按钮并选择“常量”选项并单击“确定”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T08:24:17.803

试试这个

```
Sheets("your sheetname").range("A5:X50").Value = "" 
```

你也可以使用

```
ActiveSheet.range 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T09:36:02.147

不确定使用 VBA 是否更快 - 在普通 Excel 程序中最快的方法是：

1.  `Ctrl-G`
2.  `A1:X50 Enter`
3.  `Delete`

除非您必须经常这样做，否则输入然后触发 VBA 代码会更费力。

如果您只想删除公式或值，您可以插入`Ctrl-G, Alt-S`以选择 Goto Special 并在此处选择公式或值。

# iphone - 访问 iPhone 数据前的用户权限

> ID：14394886
> 
> 赞同：0
> 
> 时间：2013-01-18T08:19:59.717
> 
> 标签：iphone, user-permissions

> **可能重复：**
> [请求访问相机胶卷的权限](https://stackoverflow.com/questions/13572220/ask-permission-to-access-camera-roll)

我正在 xcode 4.3.2 中创建一个与 iOS5 兼容的应用程序。当我访问照片时，当我在 iOS 6.0 设备上运行此应用程序时，它也不显示权限警报。任何人都可以帮助我如何显示 iOS6 设备的权限警报。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:42:09.293

你可以在`ALAssetsLibrary`图书馆的帮助下展示这个 &`ALAuthorizationStatus`

```
ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus];

    if (status != ALAuthorizationStatusAuthorized) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"permission alert message" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
        [alert show];
    } 
```

# vb.net - 从控制台应用程序显示 WinForms

> ID：14394894
> 
> 赞同：0
> 
> 时间：2013-01-18T08:20:30.220
> 
> 标签：vb.net, winforms

我有一个现有的`Console Application`项目。

我`Windows Form`在项目中添加了一个名为`myForm`

当项目运行时，它会进入控制台的`Main`方法——在这种方法中我如何激活/显示`myForm`？

我假设我需要导入库`System.Windows.Forms`，所以我的控制台代码的顶部如下所示：

```
Imports System.Windows.Forms
Module Module1

    Sub Main()

        myForm.    '<<<<not sure how to activate form
        ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:28:27.263

您必须添加参考`System.Windows.Forms`，然后显示表单：

```
myForm.Show() 
```

或者

```
myForm.ShowDialog() 
```

`myForm`必须是一种`Form`类型。也许你需要先实例化你的形式：

```
Dim myForm as new FormName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T10:39:27.510

试试这个：

```
Sub Main()
    'Your code goes here...
    System.Windows.Forms.Application.Run(New myForm)
    'Your code goes here...
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:24:09.080

调用这个函数。

```
Application.Run(myForm) 
```

它甚至可以从控制台应用程序运行。

从文档中，

> 开始在当前线程上运行标准应用程序消息循环，并使指定的表单可见。

编辑：像这样声明它。

```
Public Class MyForm
    Inherits Form

    ' Make the code here

End Class 
```

```
Dim form As MyForm = New MyForm
Application.Run(form) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:01:09.770

无需导入表单库（**我已经测试过**），我现在拥有的工作代码是：

我的主要问题是没有声明和创建 Windows 窗体的实例。

```
Module Module1

    Sub Main()

        Dim xForm As myForm = New myForm 
        xForm.ShowDialog() 
```

# php - Joomla 从 StdClass 获取值

> ID：14394899
> 
> 赞同：-3
> 
> 时间：2013-01-18T08:20:58.910
> 
> 标签：php, joomla, get, stdclass

这里有一点问题，因为我在从 Joomla 组件中检索我的数据时遇到了麻烦。

我的查询结果中有两个对象，现在我像这样回应它：

```
$test[0]->ID_pkey
$test[0]->SnelstartID

$test[1]->ID_pkey
$test[1]->SnelstartID 
```

我想要的是他立即归还所有东西（让我想起了 Windows 歌曲）

你们能帮帮我吗？有点卡在这里我在Joomla内部使用它，所以也许一些专家可以提供Joomla解决方案？

我认为 foreach 或一段时间就可以完成这项工作，但是会到处出现语法错误，也`var_dump`可以帮助你们：

> array(2) { [0]=> object(stdClass)#224 (9) { ["ID_pkey"]=> string(1) "1" ["SnelstartID"]=> string(10) "1578324568" [" Type"]=> string(4) "ADSL" ["Desc"]=> string(26) "Dit is een ADSL abbonoment" ["Up"]=> string(1) "5" ["Down"]= > string(1) "7" ["Img"]=> string(16) "images/phone.png" ["Inkoop"]=> string(4) "5.15" ["Prijs"]=> string(4 ) "9.99" } [1]=> object(stdClass)#231 (9) { ["ID_pkey"]=> string(1) "2" ["SnelstartID"]=> string(10) "1574648494" [" Type"]=> string(4) "FTTC" ["Desc"]=> string(26) "Dit is een FTTC abbonoment" ["Up"]=>string(1) "8" ["Down"]=> string(2) "10" ["Img"]=> string(16) "images/phone.png" ["Inkoop"]=> string(4) "8.15" ["Prijs"]=> 字符串(4) "9.15" } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:34:12.190

尝试这样的事情。

```
foreach($youarray_result as $key=>$value){

    echo $value->ID_pkey;
    echo $value->SnelstartID;
} 
```

这可能会解决您的问题！

# java - kill -QUIT：未附加日志

> ID：14394902
> 
> 赞同：0
> 
> 时间：2013-01-18T08:21:03.907
> 
> 标签：java, log4j, monitoring, kill-process

我有一个Java进程。我`log4j`用于记录目的。我已经指定`log4j.xml`了日志文件的位置和名称。日志记录工作正常。`kill -3`我这里的日志有问题。

我试图使用`kill -QUIT <pid>/ killl -3 <pid>`. 我希望生成的转储`kill -3`在`log4j.xml`.

但事实并非如此。我需要转储到观察者线程状态。我不知道任何其他方式来获取正在运行的进程的进程转储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:34:13.430

> 我需要转储到观察者线程状态。我不知道任何其他方式来获取正在运行的进程的进程转储。

你可以用[`jstack`](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstack.html)这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:38:16.663

`kill -3`应该输出到标准输出，所以它应该是你的标准输出的任何地方。如果没有，您可以尝试使用`-XX:LogFile`JVM 选项。

替代方法是`jstack`NPE 建议的。

另一种选择是使用`jvisualvm`- 它会在其漂亮的 GUI 中生成 stackdump，您可以从那里复制它。

# android - Android AlarmManager 无法在模拟器上运行

> ID：14394905
> 
> 赞同：1
> 
> 时间：2013-01-18T08:21:14.080
> 
> 标签：android, emulation, alarmmanager

另一个抱怨 AlarmManager（希望有一个快速的解决方案）。我正在使用 Android *Emulator*进行开发。我找到了一个据称可行的示例，因此我尝试使用它。我做了以下事情：

1.  向清单文件添加了接收器字符串。

    ```
     <receiver android:name=".SchHandler" android:process=":remote" /> 
    ```

2.  创建了主要活动并使用了它的 onCreate。

    ```
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Bundle bundle = new Bundle();
        SchHandler handler = new SchHandler(this, bundle, 1);
    } 
    ```

3.  创建了一个 BroadcastReceiver 来创建和收听警报。

    ```
    public class SchHandler extends BroadcastReceiver {
        private final String REMINDER_BUNDLE = "ReminderBundle";

        public SchHandler (Context context, Bundle extras, int timeoutInSeconds) {    
            Toast.makeText(context, "Scheduling...", Toast.LENGTH_LONG).show();
            Log.d("Debug", "Sch");

            AlarmManager alarmMgr = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
            Intent intent = new Intent(context, SchHandler.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

            Toast.makeText(context, "Time:" + System.currentTimeMillis(), Toast.LENGTH_LONG).show();
            alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP,
            System.currentTimeMillis() + 2000, 5000, pendingIntent);    
        }

        @Override
        public void onReceive(Context context, Intent arg1) {
           // TODO Auto-generated method stub
           Log.e(REMINDER_BUNDLE, "Receive");
           Toast.makeText(context, "Testing", Toast.LENGTH_LONG).show();
        }
    } 
    ```

我用*set*，*setRepeating*尝试过，没有任何效果。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:22:49.437

我将接收器的名称修改为完全限定的版本，结果发现我使用了它的包名而不是类名。正确设置后，我得到了它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:35:59.240

邪恶的根源可能`android:process=":remote"`在您的`<receiver>`标签中。尝试删除它。

# c - C 代码在运行时崩溃

> ID：14394907
> 
> 赞同：-2
> 
> 时间：2013-01-18T08:21:36.657
> 
> 标签：c

```
#include<stdio.h>

int main()
{
    int line,linex;

    printf("Enter number of lines: ");
    scanf("%d",&line);
    linex=line;

    while(line!=0)
    {
        int input=0,total=0,number=0;

        printf("Enter line %d: ",(linex-line+1));
        scanf("%d",input);

        while (input!=-1)
        {
            total+=input;
            number++;
        }
        printf("Average = %f\n",(total/number));
        line-=1;
    }
    return 0;
} 
```

以上是我的代码，它将询问用户行数、每行中的数字，然后打印出每行的平均值。问题是，当我尝试在 Microsoft Visual C++ 2010 express 中运行它时，程序崩溃了。在我输入 -1 以中断第二个 WHILE 循环后，它崩溃了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:22:16.670

```
 scanf("%d",input); 
```

应该：

```
 scanf("%d",&input); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T08:24:55.023

无关，但

```
 while (input!=-1)
    {
        total+=input;
        number++;
    } 
```

是一个无限循环。如果你第一次输入 -1 然后

```
 printf("Average = %f\n",(total/number)); 
```

是除以零。两者都需要修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:34:25.447

由于无限循环而发生崩溃

```
 while (input!=-1)   
 {    
        total+=input;
        number++;
 } 
```

修复我们所做的这个循环。

还有更多潜在的错误：

```
scanf("%d",input); //& missing

printf("Average = %f\n",(total/number)); // may cause divide by zero 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:24:06.320

它崩溃是因为您忘记将地址传递给 scanf 函数，即您忘记`&`在 scanf 时写入。肯定是

```
scanf("%d",&input); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T08:25:57.617

```
scanf("%d",input); 
```

应该

```
scanf("%d",&input); 
```

并检查是否`number != 0`在除法之前

```
printf("Average = %f\n",(total/number)); 
```

# excel - VBA：Excel中选定单元格的锁定和填充颜色

> ID：14394908
> 
> 赞同：0
> 
> 时间：2013-01-18T08:21:41.727
> 
> 标签：excel, vba

以下是我的 vba 代码，我在其中向单元格填充数据，我所要做的就是锁定相同的单元格并为它们添加一些颜色。

```
//VBA:-
    ActiveWorkbook.Names("book.a.").RefersToRange = doc.getAttribute("a")
    ActiveWorkbook.Names("book.b.").RefersToRange = doc.getAttribute("b")
    ActiveWorkbook.Names("book.c.").RefersToRange = doc.getAttribute("c")
    ActiveWorkbook.Names("book.d.").RefersToRange =doc.getAttribute("d") 
```

怎么做？我必须对更多的细胞这样做。你有什么建议？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:44:39.047

多少个细胞？它们是连续的吗？如果是这样，我们可以遍历范围而不是引用命名范围。如果不是，我们需要以某种方式构建一个名称数组——它们都是“book.a.”的形式吗？

这可以满足您对其中一个单元格的要求（您需要在解锁/修改单元格之前取消保护工作表，然后在完成后再次保护它）：

```
Dim strName As String, objName As Name, strID As String

Sheet1.Unprotect
For Each objName In ActiveWorkbook.Names
    strName = objName.Name
    If InStr(1, strName, "book", vbTextCompare) > 0 Then
        strID = Mid(strName, InStr(1, strName, ".", vbTextCompare) + 1, 1)
        With ActiveWorkbook.Names(strName).RefersToRange
            .Value = doc.getAttribute(strID)
            .Interior.Color = vbRed
            .Locked = True
        End With
    End If
Next
Sheet1.Protect 
```

# excel - 从 excel 创建文本文件

> ID：14394917
> 
> 赞同：1
> 
> 时间：2013-01-18T08:22:14.033
> 
> 标签：excel, excel-2007, excel-formula, excel-2010, vba

需要从 excel 行创建文本文件。第 1 列应包含文件名，第 2 列应包含文本文件的内容。每行都将具有该新文本文件的新文件名或新内容。此外，文本的内容应该分成几行。如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:09:01.070

将文本分隔为行的编辑解决方案。

对于示例，使用了以下字符：

> ;:,/|

根据需要向 RegEx 模式添加新的分隔符。完整代码如下：

```
Sub Text2Files()

Dim FileStream As Object
Dim FileContent As String
Dim i As Long
Dim SavePath As String
Dim RegX_Split As Object

Set RegX_Split = CreateObject("VBScript.RegExp")
RegX_Split.Pattern = "[\;\:\,\\\/\|]" 'List of used line seperators as \X
RegX_Split.IgnoreCase = True
RegX_Split.Global = True

Set FileStream = CreateObject("ADODB.Stream")
SavePath = "D:\DOCUMENTS\" 'Set existing folder with trailing "\"

For i = 1 To ThisWorkbook.ActiveSheet.Cells(1, 1).CurrentRegion.Rows.Count

    FileContent = RegX_Split.Replace(ThisWorkbook.ActiveSheet.Cells(i, 2).Text, vbNewLine)
    FileStream.Open
    FileStream.Type = 2 'Text
    FileStream.Charset = "UTF-8" 'Change encoding as required
    FileStream.WriteText FileContent
    FileStream.SaveToFile SavePath & ThisWorkbook.ActiveSheet.Cells(i, 1).Text, 2 'Will overwrite the existing file
    FileStream.Close

Next i

End Sub 
```

1.  阅读有关 ADO 流对象的更多信息：http: [//www.w3schools.com/ado/ado_ref_stream.asp](http://www.w3schools.com/ado/ado_ref_stream.asp)
2.  初学者正则表达式：http: [//www.jose.it-berater.org/scripting/regexp/regular_expression_syntax.htm](http://www.jose.it-berater.org/scripting/regexp/regular_expression_syntax.htm)

带有上述代码的示例文件在这里：[https ://www.dropbox.com/s/kh9cq1gqmg07j20/Text2Files.xlsm](https://www.dropbox.com/s/kh9cq1gqmg07j20/Text2Files.xlsm)

# openerp - 消息接收者说明

> ID：14394919
> 
> 赞同：1
> 
> 时间：2013-01-18T08:22:22.937
> 
> 标签：openerp

为什么当我的其他电子邮件向我连接到 openerp 并已回复的电子邮件发送消息时，显示的收件人只是用户名而不是发件人的电子邮件地址？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:58:12.267

在用户上下文菜单提要中，所有通过电子邮件提供的提要都已启用电子邮件通知。

*   用户偏好：
    *   电子邮件首选项
        *   通过电子邮件接收提要

和 OpenERP 他们是用户的别名，所以你得到用户名作为回复。

这是 Odony 的更精彩的解释：[链接](https://stackoverflow.com/questions/14315495/incoming-messages-send-again-by-openerp)

# extjs - 从EXTJS4中的网格面板将参数传递给窗口面板

> ID：14394923
> 
> 赞同：2
> 
> 时间：2013-01-18T08:22:29.987
> 
> 标签：extjs, extjs4

```
{
    icon: 'images/delete.png', 
    tooltip: 'Edit',

    handler: function(grid, rowIndex, colIndex) {
            var edit = Ext.create('AM.view.user.Uploadfile').show();
            //here I want to pass parameters to get in window panel     
    }
} 
```

我编写的代码希望像在窗口面板上单击图标的行 ID 一样传递参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:05:23.393

如果您查看 API，您会看到**[处理程序](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action-cfg-handler)**具有参数

*   view : 拥有的 TableView。
*   rowIndex ：点击的行索引。
*   colIndex ：点击的列索引。
*   item ：单击的项目（如果未配置多个项目，则为此列）。
*   e ：点击事件。
*   **record**：被点击行的底层记录

最后一个对你来说很有趣。所以你可以这样做

```
handler: function(grid, rowIndex, colIndex, item, e , record) {
    var win = Ext.create('Ext.window.Window', { 
          autoShow: true, 
          html: record.data.firstname + ' ' + record.data.lastname 
    });
} 
```

这是一个有效的**[JSFiddle](http://jsfiddle.net/vwLCM/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:05:38.240

它是操作列上的一个按钮。要将 Id 传递给窗口，您可以通过从记录参数中获取行数据来检索行数据。

```
columns: [
    { text: 'Id', dataIndex: 'Id', width: 50 },
    {
        xtype: 'actioncolumn',
        width: 100,
        text: 'Delete',
        align: 'center',
        items: [{
            icon: '../images/delete.png',
            tooltip: 'Delete',
            handler: function (grid, rowIndex, colIndex, item, e, record) {
                myWin.id = record.data.Id; //where myWin is a reference to the window object and id is just a config.
            }
        }]
    }
] 
```

# angularjs - AngularJS ng-repeat 内容上的 Gridster jQuery 插件变坏了

> ID：14394924
> 
> 赞同：4
> 
> 时间：2013-01-18T08:22:32.193
> 
> 标签：angularjs, angular-ui

我正在尝试将[Gridster](http://gridster.net/)与 AngularJS 集成，但还没有取得太大的成功。

阅读有关 Angular UI`ui-jq`指令的文档，我觉得[这个（检查小提琴）](http://jsfiddle.net/Errfc/6/)应该可以工作。但是当我用 Chrome 的调试器进一步观察时，结果发现在[这一行](https://github.com/ducksboard/gridster.js/blob/master/src/jquery.gridster.js#L87)上，它根本没有找到任何孩子。

我怀疑在 ng-repeat 指令的某个地方，AngularJS 决定删除将重复的部分，我明白为什么，但这并不能解决我的问题。我欢迎任何可以帮助我走得更远的线索。

### 更新 1

我开始把它变成一个指令，希望它能改善事情。但是，嵌套`ng-repeat`指令也会妨碍本地指令。我尝试尽可能推迟连接 jQuery 插件（`$evalAsync`）等，最终使用`$timeout`. 这是我可以让它工作*的唯一方法。*

### 更新 2

我认为最初的方法永远不会给我我需要的东西。所以实现了一个自定义指令。请看下面我的回答。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T11:54:06.923

我最终最终为它编写了自己的指令。我需要确保 gridster 可以看到对基础数据的每一次更改，但同时，我不想在数据模型上编写自己的监控，并用一个指令替换你通常在 gridster 中所做的一切隐藏所有这些。（这将涉及在指令本身*内*实现大部分 ng-repeat 。）

这就是我所拥有的（并假设“foo”是我的模块的名称）：

```
foo.directive "gridster", () -> {
  restrict: "E"
  template: '<div class="gridster"><div ng-transclude/></div>'
  transclude: true
  replace: true
  controller: () ->
    gr = null
    return {
      init: (elem) ->
        ul = elem.find("ul")
        gr = ul.gridster().data('gridster')
        return
      addItem: (elm) ->
        gr.add_widget elm
        return
      removeItem: (elm) ->
        gr.remove_widget elm
        return
    }
  link: (scope, elem, attrs, controller) ->
    controller.init elem
}

foo.directive "gridsterItem", () -> {
  restrict: "A"
  require: "^gridster"
  link: (scope, elm, attrs, controller) ->
    controller.addItem elm
    elm.bind "$destroy", () ->
      controller.removeItem elm
      return
} 
```

有了这个，我可以有一个 gridster 生成的视图，通过添加这个：

```
<gridster>
  <ul>
    <li ... ng-repeat="item in ..." gridster-item>
      <!-- Have something here for displaying that item. -->
      <!-- In my case, I'm switching here based on some item properties. -->
    </li>
  </ul>
</gridster> 
```

每当在 ng-repeat 指令观察到的集合中添加或删除项目时，它们将自动从 gridster 控制的视图中添加和删除。

**编辑**

这是一个演示该指令的略微修改版本的[plunk ：](http://plnkr.co/edit/7NWnuJftdZuGX5QUoXh7?p=info)

```
angular.module('ngGridster', []);

angular.module('ngGridster').directive('gridster', [
    function () {
        return {
            restrict: 'E',
            template: '<div class="gridster"><div ng-transclude/></div>',
            transclude: true,
            replace: true,
            controller: function () {
                gr = null;
                return {
                    init: function (elem, options) {
                        ul = $(elem);
                        gr = ul.gridster(angular.extend({
                          widget_selector: 'gridster-item'
                        }, options)).data('gridster');
                    },
                    addItem: function (elm)  {
                        gr.add_widget(elm);
                    },
                    removeItem: function (elm) {
                        gr.remove_widget(elm);
                    }
                };
            },
            link: function (scope, elem, attrs, controller) {
              var options = scope.$eval(attrs.options);
              controller.init(elem, options);
            }
        };
    }
]);

angular.module('ngGridster').directive('gridsterItem', [
    function () {
        return {
            restrict: 'EA',
            require: '^gridster',
            link: function (scope, elm, attrs, controller) {
                controller.addItem(elm);
                elm.bind('$destroy', function () {
                    controller.removeItem(elm);
                });
            }
        };
    }
]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-07T17:57:36.857

如果你愿意，你可以尝试为 gridster 滚动你自己的包装器。我昨晚大部分时间都度过了，这有点小故障。gridster 处理序列化的方式并不简单，等等。无论如何，我偶然发现了这个项目，它工作得非常好。

[https://github.com/ManifestWebDesign/angular-gridster](https://github.com/ManifestWebDesign/angular-gridster)

我找不到在线演示，所以我做了一下：

[http://plnkr.co/edit/r5cSY1USjtr2bSs7rvlC?p=preview](http://plnkr.co/edit/r5cSY1USjtr2bSs7rvlC?p=preview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:00:57.027

这将在下一个版本中修复

[https://github.com/angular-ui/angular-ui/pull/347](https://github.com/angular-ui/angular-ui/pull/347)

一旦我弄清楚为什么愚蠢的单元测试不会通过，新的 deferred 属性就会解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T11:00:38.640

还有[**Angular Gridster**](http://manifestwebdesign.github.io/angular-gridster/)。

在研究 Angular 中的 Gridster 实现时遇到了它和这个问题。

# javascript - 为什么jQuery文件上传在第一次上传后停止工作？

> ID：14394925
> 
> 赞同：5
> 
> 时间：2013-01-18T08:22:34.493
> 
> 标签：javascript, jquery, jquery-file-upload

我正在使用[jQuery File Upload 插件](http://blueimp.github.com/jQuery-File-Upload/)。我正在隐藏文件输入并在单击单独的按钮时激活它。（见[这个小提琴](http://jsfiddle.net/lolson/xSAQN/)。）

HTML：

```
<div>
    <button class="browse">Browse</button>
    <input id="upload" type="file" style="display: none;" />
</div> 
```

JavaScript：

```
var element = $("#upload");

$(".browse").click(function () {
    $("#upload").trigger("click");
});

element.fileupload({
    add: function () {
        alert("add");
    }
}); 
```

请注意，如果您按下按钮然后选择一个文件，该`add`方法将被激活并且您将收到警报。再做一次，你会得到另一个警报。

现在，看看[这个小提琴](http://jsfiddle.net/lolson/xSAQN/8/)。唯一的区别是我更改了以下行

```
$("#upload").trigger("click"); 
```

至

```
element.trigger("click"); 
```

请注意，现在，当您第一次单击按钮然后选择文件时，该`add`方法被激活并且您会收到警报（就像以前一样），但如果您再次执行此操作，该`add`方法将永远不会激活。

是什么导致了这种行为差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-30T10:40:52.163

[如文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Options#replacefileinput)所述，这也可以通过设置`replaceFileInput`为来解决。这是因为插件在每次上传后重新创建输入元素，因此绑定到原始输入的事件将丢失。`false`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T08:49:26.157

看起来好像`element`在添加功能之后范围正在丢失/更改。像下面这样重置它似乎有效。

```
var element = $("#upload");

$(".browse").click(function () {
    element.trigger("click");
});

element.fileupload({
    add: function () {
        alert("add");
        element = $(this);
    }
}); 
```

[小提琴](http://jsfiddle.net/xSAQN/12/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T08:36:45.567

试试这个：http: [//jsfiddle.net/xSAQN/6/](http://jsfiddle.net/xSAQN/6/)

```
var input = $("#upload");

$(".browse").click(function () {
    input.trigger("click", uploadit(input));
});

function uploadit(input){
    $(input).fileupload({
        add: function () {
            alert("add");
        }
    });
} 
```

虽然还有另一种方法：

改成这样：

```
 var element = $("#upload");

   $(".browse").click(function () {
       $("#upload").click(); // <----trigger the click this way
   });

   element.fileupload({
      add: function () {
          alert("add");
      }
   }); 
```

# django - 如何在 django 中返回多个对象

> ID：14394927
> 
> 赞同：0
> 
> 时间：2013-01-18T08:22:45.490
> 
> 标签：django, django-templates, django-views

我正在开发一个电子商务应用程序，并希望客户能够订购几件商品。目前他们只能订购一个，我很难弄清楚如何才能做到这一点。在我的菜单模板中，我返回其类别中的所有项目，如下所示：

```
{% for category in categories %}
 <h5> {{ category.title }} </h5>
  {% for item in category.item.all %}
   <li><a href="{% url item_order item.id %}">{{item.name}}<span> {{item.price}}frw</span></li><a/> 
```

OnClick，每个项目都会重定向到您可以订购数量的表单。这是视图：

```
def show_item(request,id):
    # need to evaluate the HTTP method
    if request.method == 'POST':
        a = Item.objects.get(pk=id)
        form = forms.PartialOrderItemForm(request.POST,instance=a)
        # check validation of posted data
        if form.is_valid():
            order.add_to_order(request)
            # if test cookie worked, get rid of it
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            url =urlresolvers.reverse('order_index')
            # redirect to order page
            return HttpResponseRedirect(url)
    else:
        # it's a GET, create the unbound from. Note request as a Kwarg
        form = forms.PartialOrderItemForm(request.GET)
    # set the test cookie on our first GET request
    request.session.set_test_cookie()
    context={
#       'categories':categories,
        'form':form,
#       'menu':menu,

    }
    return render_to_response('item.html',context,context_instance=RequestContext(request)) 
```

在某些时候，上面的视图调用了下面的视图，即在验证表单之后`order.add_to_order(request)`

# 添加项目到订单

```
def add_to_order(request):  
    postdata = request.POST.copy()
    # get item slug from post data, return blank if empty
#   item_slug = postdata.get('item_slug','')
    #get quantity added, return 0 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item,pk=1)
    i.orderitem_set.all()
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        oi = OrderItem()
        oi.order_id = _order_id(request)
        oi.quantity = quantity
        oi.item = i
        oi.save() 
```

表单通过验证后，订单将显示在订单页面中。这是执行此操作的视图

```
def show_order(request):
    if request.method == 'POST':
        postdata = request.POST.copy()
        if postdata['submit'] == 'Remove':
            order.remove_from_order(request)
        if postdata['submit'] == 'Update':
            order.update_order(request)
    order_items = order.get_order_items(request)
#   page_title  = 'F4L order' 
    order_subtotal = order.order_subtotal(request)

    context = {
        'order_items':order_items,
        'order_subtotal':order_subtotal,
    }
    return render_to_response('public/order.html',context,context_instance=RequestContext(request)) 
```

这是订单页面模板的一部分。

```
<tbody>
    {% if order_items %}
     {% for item in order_items %}
    <tr>
     <td>

       {{ item.item.name }}

     </td>
     <td>{{ item.item.price }}<span> frw</span></td>
     <td class="right">
      <form method="post" action="." class="order">
       {% csrf_token %}
       <label for="quantity">Quantity:</label>
       <input type="text" name="quantity" value="{{ item.quantity }}" id="quantity" size="2" class="quantity" max_length="5" />
       <input type="hidden" name="item_id" value="{{ item.id }}" />
     </td>
     <td>
      <input type="submit" name="submit" value="Update" />
      </form> 
```

这就是发生的事情，当我订购第一个项目时`pk=1`它工作正常，但是当我订购第二个项目或任何其他项目并填写表格时，订单页面总是返回第一个项目。你觉得我应该怎么做。

# php - Header() 在我的项目中不起作用

> ID：14394931
> 
> 赞同：-3
> 
> 时间：2013-01-18T08:23:00.507
> 
> 标签：php, redirect

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

我的 Header 功能有问题。我想在插入数据库后将页面重定向到贝宝。插入查询工作正常支付头功能不工作。

这是我的代码

```
{
mysql_query("INSERT INTO bookings (date,time,hired_consultant,status,user_id) VALUES ('$date','$time','$hired_consultant','pending','$user_id')",$link)or die("Invalid: " . mysql_error());
header("Location: https://www.paypal.com/cgi-bin/webscr");
exit();
} 
```

插入后出现以下错误：

> 警告：无法修改标头信息 - 标头已由第 101 行 /home/nausalho/public_html/HumanResource/selection1.php 中的（输出开始于 /home/nausalho/public_html/HumanResource/selection1.php:2）发送

它在我的本地主机上运行良好。但是在实时站点上，它没有将我重定向到贝宝，只是在同一页面上出现错误消息。

请找出我在代码或任何其他重定向方法中的错误。提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:26:28.310

将此添加到页面顶部：

```
ini_set('output_buffering', 'on'); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-18T08:28:26.300

Use the below code echo "window.location.href = 'https://www.paypal.com/cgi-bin/webscr'";die;

# java - 动态更新 spring bean。可能吗？

> ID：14394936
> 
> 赞同：5
> 
> 时间：2013-01-18T08:23:29.417
> 
> 标签：java, spring

如果 Spring bean 配置发生变化，有没有办法动态更新 Spring bean？

例如，假设我有一个带有布尔属性的 spring bean，并且 spring bean在应用程序启动时 `x`具有该值。`true`

所以spring创建了属性`x`设置为true的bean。

有没有办法让如果我将属性更改为`x`（在应用程序运行时）该属性将被更新为`false`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:32:10.053

`setX()`调用 x方法的 setter 即可。

但它不应该是原型 bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:56:33.330

[jrebel](http://zeroturnaround.com/software/jrebel/) -spring 集成是可能的。它监视您的配置并尝试在运行时重新连接您的 bean。

虽然我不会在生产中使用它......仅用于玩耍，测试等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:46:53.027

Spring bean 可以使用 applicationContext.xml 甚至以编程方式进行初始化。在你的情况下；您将需要从 xml 中删除配置并添加到 java 程序中。[您可以从如何以编程方式使用注入的属性创建 bean 定义](https://stackoverflow.com/questions/3370161/how-to-programmatically-create-bean-definition-with-injected-properties)中得到一些想法？. 其他好的链接也可以在 google 上找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:37:11.360

Spring 在启动时读取配置文件。如果您确实需要在应用程序运行时更新配置，您应该手动实现所有链：检测配置更改、验证配置、检测更改的 bean、在上下文中更新 bean。

# c# - 使用 LINQ to XML 功能构造修改 XML

> ID：14394940
> 
> 赞同：1
> 
> 时间：2013-01-18T08:24:05.720
> 
> 标签：c#, xml, linq, linq-to-xml

我试图了解 LINQ to XML 功能构造的工作原理。

我有以下示例 XML：

```
string xml = @"<?xml version=""1.0"" encoding=""utf-8"" ?>
                    <People>
                      <Person firstName=""John"" lastName=""Doe"">
                        <ContactDetails>
                          <EmailAddress>john@unknown.com</EmailAddress>
                        </ContactDetails>
                      </Person>
                      <Person firstName=""Jane"" lastName=""Doe"">
                        <ContactDetails>
                          <EmailAddress>jane@unknown.com</EmailAddress>
                          <PhoneNumber>001122334455</PhoneNumber>
                        </ContactDetails>
                      </Person>
                    </People>"; 
```

我尝试通过向标签添加一个`IsMale`属性并添加一个如果它不存在来修改这个 XML。`Person``PhoneNumber`

我可以通过使用一些程序代码轻松编写此代码：

```
XElement root = XElement.Parse(xml);

foreach (XElement p in root.Descendants("Person"))
{
    string name =  (string)p.Attribute("firstName") + (string)p.Attribute("lastName");
    p.Add(new XAttribute("IsMale", IsMale(name)));

    XElement contactDetails = p.Element("ContactDetails");

    if (!contactDetails.Descendants("PhoneNumber").Any())
    {
        contactDetails.Add(new XElement("PhoneNumber", "001122334455"));
    }
} 
```

但是[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/bb387024.aspx)说功能构造应该更容易更好地维护。因此，我尝试使用功能构造编写相同的示例。

```
XElement root = XElement.Parse(xml);

XElement newTree = new XElement("People",
    from p in root.Descendants("Person")
    let name = (string)p.Attribute("firstName") + (string)p.Attribute("lastName")
    let contactDetails = p.Element("ContactDetails")
    select new XElement("Person",
        new XAttribute("IsMale", IsMale(name)),
        p.Attributes(),
        new XElement("ContactDetails",
            contactDetails.Element("EmailAddress"),
            contactDetails.Element("PhoneNumber") ?? new XElement("PhoneNumber", "1122334455")
        ))); 
```

可能是我，但我觉得这段代码可读性不好。

如何改进我的功能结构？有没有更好的方法来编写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:10:55.977

正如您引用的 msdn 文章中所述，这取决于您在做什么。如果您对 xml 进行了许多更改，那么非功能性方法将变得复杂且不易理解。在这种情况下会产生什么结果？

```
foreach (XElement p in doc.Descendants("Person"))
{
    var name = (string)p.Attribute("firstName") + " " + (string)p.Attribute("lastName");
    int age = (int)p.Attribute("age");
    p.RemoveAttributes();
    p.SetAttributeValue("isMale", IsMale(name));
    p.SetAttributeValue("name", name);
    p.SetAttributeValue("age", age);
    p.RemoveNodes();
    p.Name = "Human";
} 
```

我怀疑你一眼就能看出来。这个例子对我来说不是很有描述性。此外，我看不到更改后哪个结构将具有 xml。

```
XElement people = 
new XElement("People",
    from p in doc.Descendants("Person")
    let name = (string)p.Attribute("firstName") + " " +  (string)p.Attribute("lastName")
    select new XElement("Human",
                    new XAttribute("isMale", IsMale(name)),
                    new XAttribute("name", name),
                    p.Attribute("age")
    )
); 
```

至于我，第二个示例描述了结果并更好地显示了 xml 结构。所以，如果我需要对现有的 xml 做一些小的改动，我会选择非功能性的方法。我会采用功能方法进行大修改。什么是*小*和*大*？我认为这是主观的部分。

顺便说一句，结果我只想要`age`属性左侧和一个`name`属性而不是名字和姓氏。`Person`另外，我想要元素而不是`Human`元素：

```
<People>
  <Human isMale="false" name="John Doe" age="28" />
  <Human isMale="true" name="Jane Doe" age="27" />
</People> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:27:28.013

您可以通过进一步分解功能来增加代码的表现力，特别是通过尝试隐藏在查询中调用的所有构造函数。我建议几个实用功能：

```
XElement PersonWithGender(XElement person)
{
    string name = (string)p.Attribute("firstName") + (string)p.Attribute("lastName");
    XAttribute genderAttribute = new XAttribute("isMale", IsMale(name));
    return new XElement(genderAttribute, person.Attributes);
}

XElement PersonWithPhoneNumber(XElement person)
{
    XElement contactDetails = person.Element("ContactDetails");
    XElement emailAddress = contactDetails.Element("EmailAddress");
    XElement phoneNumber = contactDetails.Element("PhoneNumber") ?? new XElement("PhoneNumber", "1122334455");

    return new XElement("ContactDetails", emailAddress, phoneNumber);
} 
```

这些函数每个都将初始 XElement 映射到新改进的 XElement，因此应该非常适合您的查询。如果您将一个结果输入另一个，那么您的查询将变为：

```
XElement newTree = new XElement("People",
    from p in root.Descendants("Person")
    let pWithGender = PersonWithGender(p)
    select PersonWithPhoneNumber(pWithGender)); 
```

我认为这正在接近函数式编程所期望的简洁性和表现力。每个新函数都足够短，可以毫不费力地检查它们，并且查询本身现在更清楚地声明了它的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T18:47:05.067

Microsoft 使用函数式构造函数的部分建议是首先消除静态 XML 资源。如果您的初始 XML 字符串来自外部源，那么您必须加载、修改并返回它。

但是，如果静态 XML 来自将进行修改的同一代码，并且您的数据可以直接使用，那么您将使用函数式构造函数来创建*具有已修改*的代码。

```
Person[] peopleData = new Person[]
{
   new Person("John", "Doe", "john@unknown.com", ""),
   new Person("Jane", "Doe", "jane@unknown.com", "001122334455")
}

XElement people = 
   new XElement("People",
      from p in peopleData
      select new XElement("Human",
                new XAttribute("isMale", p.IsMale),
                new XAttribute("name", p.FullName),
                new XAttribute("age", p.Age)
      )
   ); 
```

这种方法几乎与原始 XML 一样易于阅读，但也快得多，因为已经消除了对原始 XML 的解析。

# c - C - 将信息传输到结构（特别是字符串数组）

> ID：14394944
> 
> 赞同：1
> 
> 时间：2013-01-18T08:24:14.947
> 
> 标签：c, arrays, struct

这似乎是一个非常简单的问题，但我无法弄清楚是哪个部分导致了它。基本上，我有一个结构，它只包含一个字符串数组

```
struct command_stream{
  char **tokens;
 };

typedef struct command_stream *command_stream_t;
command_stream_t test; 
```

稍后，我将一些字符串解析为较短的字符串，最后得到另一个字符串数组

```
char **words = *array of strings* 
```

words 包含我想要的正确信息，我循环并打印出每个元素以确保我没有得到错误的字符串。所以现在我只是将标记指向单词

```
test->tokens = words; 
```

但它给了我一个分段错误。我不确定为什么。它们都是指针，所以除非我遗漏了一些明显的东西......

编辑：作为一个整体的函数必须返回一个指针，这就是为什么它是这样设置的，我一直忘记。但我想我已经明白了，如果我只是创建一个新的 typedef

```
typedef struct command_stream command_stream_s;
command_stream_s new_command_stream; 
```

并返回 &new_command_stream; 那应该有效吗？即使 new_command_stream 本身不是指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:27:45.440

从您的代码摘录中，您似乎尚未声明该结构。您已成功声明了一个指向该结构的指针，`command_stream_t test;`但该指针尚未指向任何地方。

您需要以某种方式为您的结构分配内存并`test`引用它。例如：

```
 command_stream_t test = 
        (command_stream_t) malloc(sizeof(struct command_stream)); 
```

这样您就可以成功使用：

```
 test->tokens = words; 
```

如您所愿。

请注意，您不需要使用`malloc`来分配内存。指针可以引用局部/全局变量，只要它具有与之关联的内存（注意，如果您使用局部变量，请不要在该变量的声明范围之外使用指针）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:35:36.560

```
typedef struct command_stream *command_stream_t;
command_stream_t test; 
```

这使得“测试”成为一个指针。没有为结构分配内存。您需要为结构分配内存并使测试指针指向内存块，然后才能取消引用：

```
test->tokens = words; 
```

做这个：

```
typedef struct command_stream command_stream_t;
command_stream_t test;

test.tokens = words; 
```

不同之处在于，command_stream_t 不再是指针类型，而是实际结构。

# spring - 春天和欢迎控制器

> ID：14394953
> 
> 赞同：0
> 
> 时间：2013-01-18T08:24:55.367
> 
> 标签：spring

连接后，我想强制转发 WelcomeController 中的操作，因为我需要从连接的用户（主体）获取一些信息并将它们放入会话中我遇到的问题是：如果用户尝试通过任何可访问的 url 连接，之后已连接（用户+通过 OK），弹簧自动重新转发到此 url

这是我的 web.xml

```
 <servlet>
    <servlet-name>xyz</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/xyz-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>xyz</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<session-config>
    <session-timeout>1440</session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

我怎么能这样做？非常感谢问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:15:32.090

你想做什么，它是直接用**spring-security**完成的。

只需集成 Spring Security，阻止对整个内容的访问，但让所有人都可以访问登录页面。当用户访问安全 URL 时，应用程序将显示登录页面。

这是 security.xml 中的映射示例

```
<http>
    <intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <intercept-url pattern="/**" access="ROLE_PERSON"/>  
    <form-login login-page="/login"  default-target-url="/dashboard"/>
    <logout invalidate-session="true"/>
</http> 
```

# android - onListItemClick 不适用于自定义 ListView

> ID：14394956
> 
> 赞同：2
> 
> 时间：2013-01-18T08:25:24.667
> 
> 标签：android, android-listview, onclick

尝试为 ListView 创建单击处理程序，但列表不响应单击。
阅读许多当地的回复，但对我没有任何帮助:(

代码：

```
public class MainActivity extends SherlockListActivity {

private ArrayList<Order> listItems;
private myAdapter myAdapter;
ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

lv = getListView();
lv.setTextFilterEnabled(true);
this.myAdapter = new myAdapter(this, R.layout.list_item, listItems);
setListAdapter(myAdapter);
....
}

protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Toast.makeText(getApplicationContext(), "Clicked " + l.getItemAtPosition(position), Toast.LENGTH_SHORT).show();         
} 
```

布局
主要：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fastScrollEnabled="true"        
    android:listSelector="@drawable/list_selector"
    android:smoothScrollbar="true"
    android:textColorHighlight="@android:color/transparent"
    android:background="#000000" >
</ListView> 
```

行：

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    android:src="@drawable/logo" />

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/image"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:paddingBottom="5dp"
    android:text="Название"
    android:textColor="@android:color/black"
    android:textSize="18dp" />

<TextView
    android:id="@+id/text2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/text"
    android:layout_below="@+id/text"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:paddingBottom="5dp"
    android:text="Эпизод, время"
    android:textSize="14dp" /> 
```

谢谢你的帮助。
问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:31:28.290

如果你想让你的类响应事件，你的类必须实现 OnItemClickListener，然后将它分配给你的列表 list.setOnItemClickListener(this);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:20:46.793

在您的适配器中尝试 setOnClickListener 。OnListItemClick 将不起作用，因为您有 ImageView。[未在 ListActivity 上调用 onListItemClick](https://stackoverflow.com/questions/14373527/onlistitemclick-is-not-getting-called-on-listactivity)

# c# - 将日期时间解析为月份名称

> ID：14394958
> 
> 赞同：0
> 
> 时间：2013-01-18T08:25:27.233
> 
> 标签：c#, asp.net, datetime, tryparse

嗨，我试图将我在 MSSQL 中的 int datetime 转换为 monthname。我来自丹麦（DK），代码是。

```
 DateTime dateTime;
    if (DateTime.TryParse(KeyWord, out dateTime))
    {
        KeyWord = Convert.ToDateTime(KeyWord).ToLongDateString();
    }

    objCMD.Parameters.AddWithValue("@keyword", "%" + KeyWord + "%"); 
```

但我认为我错过了一些东西。

谢谢

编辑：我无法让它工作。我正在从数据库中获取所有日期，并且我想在搜索功能中使用月份名称。我不确定当它具有搜索功能时是否需要做其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:42:44.817

您可以自己的月份枚举

```
enum Month
{
   January = 1,
   February = 2,
   ...
   ...
   Decmeber =12
} 
```

然后

```
 DateTime dateTime;
    if (DateTime.TryParse(KeyWord, out dateTime))
    {
        KeyWord = ((Month)dateTime.Month).ToString();
    } 
```

您无需再次转换为 DateTime，TryParse 将为您提供日期时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:47:57.113

试试这个 ：

```
 DateTime dateTime;
        String KeyWord = "11/12/13"; // MM/dd/yy
        if (DateTime.TryParse(KeyWord, out dateTime))
        {
            KeyWord = Convert.ToDateTime(KeyWord).ToString("MMMM"); // Full month name
            KeyWord = Convert.ToDateTime(KeyWord).ToString("MMM"); // The abbreviated name of the month. 
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:07:51.920

```
//Create localization object from http://stackoverflow.com/questions/3184121/get-month-name-from-month-number
System.Globalization.DateTimeFormatInfo dtfi = new System.Globalization.DateTimeFormatInfo();
//Initialize dateTime
DateTime.TryParse(KeyWord, out dateTime);
//Write Month name in KeyWord
KeyWord = string.Format("%{0}%", dtfi.GetMonthName(dateTime.Month)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T07:10:20.193

```
string yourMonth= Date = DateTime.Now.Month.ToString();   
string selectedYear= DateTime.Now.Year.ToString();
ViewBag.Today = 
System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat.GetMonthName
(Int32.Parse(yourMonth)) + selectedYear; 
```

`works fine for me hopefully it will help others`

# php - Magento 中的 Ajax（加载产品视图块）

> ID：14394960
> 
> 赞同：2
> 
> 时间：2013-01-18T08:25:35.020
> 
> 标签：php, ajax, magento

我想要实现的目标：单击产品链接/图像（至少在某些区域）以打开包含完整产品信息的弹出窗口（基本上是产品视图页面的所有内容）。

到目前为止我所做/尝试过的事情：

*   创建了 ajax php 代码之外的所有东西（模块、链接、模板、重写）
*   创建了 ajax 控制器（可以通过类似于： 的链接访问`http://test.com/index.php/ajaxproductview/ajax/index/id/2`）。
*   遵循各种教程（如[this](http://blog.magikcommerce.com/how-to-use-ajax-in-your-magento-modules-themes/)或[this](http://blog.decryptweb.com/ajax-in-magento/)）-帮助我走到了这一步。但我不想加载我的自定义块，我想要默认的产品视图块。
*   试图在 indexAction() 中添加一些代码。它到达那里，但代码失败。我没有收到任何错误/通知/报告，只是看起来像是杀死我的处理器的无限循环。

    ```
    $body = $this
        ->getLayout()
        ->createBlock('product.info') // taken from catalog.xml
        ->toHtml();
    $this->getResponse()->setBody($body); 
    ```

所有其他页面都工作正常，这是一个新的 magento，只有磁电机和我的模块安装并激活。

我的 AJAX 函数只是获取这个 HTML 响应，将它放入一个 div 中，然后打开一个弹出窗口。

我的问题是（是） - 我如何设置产品 ID，因此该块知道要加载什么产品，以及如何正确加载该块。我也尝试过类似的东西：

谢谢你。

PS：我也试过这个：

```
 $layout = $this->getLayout();
    $update = $layout->getUpdate();
    $update->load('catalog_product_view');
    $layout->generateXml();
    $layout->generateBlocks();
    $output = $layout->getOutput(); // $output is an empty string 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T09:30:11.270

Product 控制器使用帮助器来设置活动产品。你应该可以在你的控制器中做同样的事情！

在进行布局之前尝试此操作：

```
$productId  = (int) $this->getRequest()->getParam('id');
Mage::helper('catalog/product')->initProduct($productId, $this); 
```

另一件需要注意的事情：如果你添加了一个像 product.info 块这样的块。如果它在其模板文件中调用它们，它需要额外的子块。

使用自定义布局 xml 文件将是最简单的。然后，您可以为您的操作句柄添加特定布局（您的操作句柄由模块的 etc/config.xml 文件中的路由器节点组成`<frontend><routers>`，例如`<Yourmodule>`节点，确保将其小写！然后用下划线添加控制器名称和操作名称，在您的情况下为 index_index)，如下所示：

```
<yourmodule_index_index>
    <remove name="right"/>
    <remove name="left"/>
    <block type="catalog/product_view" name="root" output="toHtml" template="catalog/product/view.phtml">
    <!-- Add all the child blocks you need -->
    </block>
</yourmodule_index_index> 
```

这使得 view.phtml 成为使用其 toHtml 方法呈现自身的根块。因此，在您的控制器操作中，您只需要上面的两行，然后：

```
$this->loadLayout();
$this->renderLayout(); 
```

# xaml - WP8 中的滑块组件不会移动

> ID：14394967
> 
> 赞同：3
> 
> 时间：2013-01-18T08:26:08.313
> 
> 标签：xaml, windows-phone-8, windows-phone

我的 WP7 和 WP8 应用程序中有一个`Slider`组件。在 WP7 中，`Slider`根据其移动`Scheduler`，但在 WP8 中，它根本不会移动。

是风格化的`Slider`，我知道 WP8 有一些变化。首先，这些更改到底是什么，我在代码中要更改什么？微软的文档很差。除了微软的变化之外，任何人都知道这可能是什么？

即使我将默认值设置为某个值，拇指也将始终处于其起始位置。我也搬不动。

对我来说，这适用于各种不同的样式，例如来自[Mifrosofts 自己的 Slider Styles and Templates](http://msdn.microsoft.com/en-us/library/cc278073%28v=vs.95%29.aspx)。

这个有一个模板：

```
 <Slider x:Name="Slider" IsHitTestVisible="true" Value="{Binding SliderValue, Mode=TwoWay}" Maximum="100" VerticalAlignment="Center" Margin="0,24,0,0" Template="{StaticResource SliderControlTemplate1}" /> 
```

这是模板：

```
 <ControlTemplate x:Key="SliderControlTemplate1" TargetType="Slider">
        <Grid Background="Transparent">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal"/>
                    <VisualState x:Name="MouseOver"/>
                    <VisualState x:Name="Disabled">
                        <Storyboard>
                            <DoubleAnimation Duration="0" To="0.1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HorizontalTrack"/>
                            <DoubleAnimation Duration="0" To="0.1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalTrack"/>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="HorizontalFill">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalFill">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Grid x:Name="HorizontalTemplate" Margin="{StaticResource PhoneHorizontalMargin}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Rectangle x:Name="HorizontalFill" Fill="{TemplateBinding Foreground}" Height="12" IsHitTestVisible="False" Margin="0"/>
                <Rectangle x:Name="HorizontalTrack" Grid.Column="2" Fill="{TemplateBinding Background}" Height="12" IsHitTestVisible="False" Margin="0" Opacity="0.2"/>
                <RepeatButton x:Name="HorizontalTrackLargeChangeDecreaseRepeatButton" IsTabStop="False" Template="{StaticResource PhoneSimpleRepeatButton}"/>
                <RepeatButton x:Name="HorizontalTrackLargeChangeIncreaseRepeatButton" Grid.Column="2" IsTabStop="False" Template="{StaticResource PhoneSimpleRepeatButton}"/>
                <Thumb x:Name="HorizontalCenterElement" Grid.Column="1" Height="12" Margin="0" Width="12">
                    <Thumb.Template>
                        <ControlTemplate>
                            <Grid ManipulationDelta="ProgressBarManipulationDelta" Width="46" Height="46" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image Source="/slider.png"/>
                            </Grid>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>
            </Grid>

        </Grid>
    </ControlTemplate> 
```

我已经尝试了相应的样式。可能是什么问题呢？我应该使用`Style`or`Template`吗？两者现在对我来说都是一样的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:07:51.590

有同样的问题。在 WP8 之前，我们已经编辑了其原始样式的副本，并根据我们的目的对其进行了修改。后来，当将项目升级到 WP8 时，这种从 WP7 修改的样式导致滑块不再更新，因为此后样式发生了变化。删除样式修复了它。如果仍然需要修改，您应该从 WP8 的滑块组件中获取原始样式。

# html - 如果我在同一页面上同时使用 Section 和 Article 会造成混淆吗？

> ID：14394973
> 
> 赞同：1
> 
> 时间：2013-01-18T08:27:01.477
> 
> 标签：html

据我了解，文章是一个独立的内容，部分可以用来对文章列表进行分组，也可以在文章内部使用来表示部分。在实现这个想法的时候，我有一个案例：一个页面，主要内容是一篇文章。在文章标签之后，我想加载一个论坛主题及其所有回复。每个主题和回复都使用文章标签。我的问题是——如果我将主题及其回复分组在 Section 标签中，是否会混淆辅助技术？标记看起来像这样：

```
<div id="page">
  <article role="main"> main content</article>
  <section id="forum">
           <article>topic content</article>
            <article>reply-1</article>
            <article>reply-2</article>
  </section>
</div> 
```

如果上述标记不能为辅助技术提供一种简单的方法来理解主题部分与主要内容相关联，您会推荐什么标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:38:36.710

在这种情况下，我几乎肯定会这样做

```
<div id="page">
    <article role="main">
        <section id="main">
            main content
        </section>
        <section id="forum">
            topic content
            <ul class="comments">
                <li>reply-1</li>
                <li>reply-2</li>
            </ul>
        </section>
    </article>
</div> 
```

纯粹基于您有一篇文章，并且在那篇文章中您似乎有 2 个部分，1 个用于主要内容，1 个用于论坛内容。在论坛内容中，您还有一个评论列表。

无论如何，对我来说，这似乎是正确的语义方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:29:40.917

您可以随时随地使用它们。它们的使用是语义的。如果你认为这样布局你的代码更有意义，那就去做吧。

但是，大多数人会说，除非没有文章，否则节应该在文章内部。

我会考虑将标题标签用于第一篇文章标签。然后将该部分设为文章和文章部分。然后把标题放在文章里面。

```
<div id="page">
  <article id="forum">
      <header role="main"> main content</header>
            <section>topic content</section>
            <section>reply-1</section>
            <section>reply-2</section>
  </article>
</div> 
```

这实际上只是一个意见问题，但是，我们还不知道谷歌和其他搜索提供商将如何对待这些。这个想法是为您的代码提供与布局相同的模块化外观。

# bash - 为什么 $DISPLAY 有时是 :0 有时是 :1

> ID：14394974
> 
> 赞同：5
> 
> 时间：2013-01-18T08:27:05.343
> 
> 标签：bash, environment-variables

我正在使用 xmacro 记录键盘快捷键，这需要`$DISPLAY`重播。但是，有时 my`$DISPLAY`是**:0**有时是**:1**，所以每次发生这种情况时，我都必须手动更改值。为什么它会不断变化，有没有办法将`$DISPLAY`值永久设置为**:0**或**:1 ？**（我可以`DISPLAY=:0`在一个终端中导出，但这不会改变`$DISPLAY`新终端中的值。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T08:42:49.963

数字标识[显示器（“共享键盘和鼠标的显示器集合”）](http://www.xfree86.org/current/X.7.html#sect4)

`:0`通常是本地显示器（即当您坐在电脑前时的主显示器）。

`:1`当您启用显示转发并登录到远程计算机时，它通常由 SSH 等服务使用。

它也可以通过尝试“修复”它的启动脚本进行修改。要确定是否发生这种情况，请运行

```
grep DISPLAY ~/.??* 
```

`.??*`是获取所有没有`..`和`.`（父文件夹和当前文件夹）的点文件的技巧。

如果没有打印任何内容，请检查`/etc/profile`，`/etc/bash*`并`/etc/bash*/*`以类似方式。

我找不到有用的 xmacro 手册，但大多数 X11 应用程序都支持该选项`-d`或`-display`覆盖`$DISPLAY`.

如果这不起作用，请`xmacro.sh`使用以下内容创建：

```
 #!/bin/bash

 export DISPLAY=:0
 exec xmacro "$@" 
```

现在调用该工具，`xmacro.sh`它应该始终有效。

# php - PHP foreach loop with sequential numbers while displaying MySQL results

> ID：14394976
> 
> 赞同：0
> 
> 时间：2013-01-18T08:27:15.733
> 
> 标签：php, mysql, foreach

I have a feeling I'm going to get scolded for this but here is the question.

```
$seq_numbers = range('1', '24');
foreach($seq_numbers as $seq_number) 
{
    Bullet <?php echo $seq_number;?>  
    // (this successfully creates - Bullet 1, Bullet 2, etc. - 
        below is the problem.

    <?php echo $db_rs['bullet_($seqnumber)'];?>
}   // this one doesn't work. 
```

I've tried with curly brackets {}

I basically have a few columns that are named same except for number at the end (bullet_1, bullet_2, bullet_3, etc.) and want to get the results using a loop.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:29:20.383

Your problem is, that PHP doesn't replace variables inside strings enclosed with single quotes. You need to use `$db_rs["bullet_{$seq_number}"]` or one of those:

```
<?php
foreach ($seq_numbers as $seq_number) {
   $key = 'bullet_' . $seq_number;
   echo $db_rs[$key];
} 
```

Even shorter, but a little less clear:

```
<?php
foreach ($seq_numbers as $seq_number) {
   echo $db_rs['bullet_' . $seq_number];
} 
```

An entirely different approach would be to loop over the result array. Then you don't even need `$seq_numbers`. Just as an afterthought.

```
<?php
foreach ($db_rs as $key => $value) {
   if (substr($key, 0, 7) == 'bullet_') {
      echo $value;
   }
} 
```

Oh...and watch out for how you spell your variables. You are using `$seq_number` and `$seqnumber`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:31:57.853

为什么不：

```
$db_rs['bullet_'.$seqnumber] 
```

如果没有，你的字段是什么，$db_rs 的 var_dump 是什么样的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:29:23.940

```
<?php echo $db_rs['bullet_'.$seqnumber];?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T08:41:17.203

尝试这个...

```
$seq_numbers = range('1', '24');
foreach($seq_numbers as $seq_number) 
{
    Bullet <?php echo $seq_number;?>  
    // (this successfully creates - Bullet 1, Bullet 2, etc. - 
        below is the problem.

    <?php echo $db_rs["bullet_($seqnumber)"];?>
}   // now it works. 
```

# javascript - How do I need to write this RegEx to match the given test case? (don't match the ending period)

> ID：14394977
> 
> 赞同：0
> 
> 时间：2013-01-18T08:27:18.130
> 
> 标签：javascript, regex

regex:

```
/@([\S]*?(?=\s)(?!\. ))/g 
```

given string:

```
'this string has @var.thing.me two strings to be @var. replaced'.replace(/@([\S]*?(?=\s)(?!\. ))/g,function(){return '7';}) 
```

expected result:

```
'this string has 7 two strings to be 7\. replaced' 
```

In case you want to make it "better" I'm trying to match [Razor Html Encoded Expressions](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx) but mind the case about not matching an ending period followed by a space. The test case above shows that with the second (shorter) `@var`, whereas the first captures as `@var.thing.me`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:33:06.583

尝试使用以下正则表达式：

```
var input = 'this string has @var.thing.me two strings to be @var. replaced';
input.replace(/(@[a-z][a-z.]+[a-z])/gi, function(){
  return '7';
}); 
```

此正则表达式`(@[a-z]([a-z.]+[a-z])*)`匹配`@`，然后是字母（如果 之后不能有点`@`），然后是字母或点和字母在最后。

`i`修饰符允许使正则表达式不区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:32:40.923

您的模式限制性不够，即它捕获了太多。示例字符串中的最后一个`@var.`（包括点）被捕获，因为它后面跟着一个空格（正向前瞻所要求的），此外，它后面没有一个点和一个空格（负前瞻所要求的） . 你可以试试这个模式：

```
/@([\S]*?)(?=[.]?\s)/g 
```

它将匹配`@something`子字符串（可以包含点字符），当它后面跟着一个空格（就像它在字符串的第一个匹配中发生的那样）以及它后面跟着一个点和空格时（就像它在第二个匹配中发生的那样）你的字符串匹配）。在铬浏览器控制台中测试它似乎工作正常：

```
> 'this string has @var.thing.me two strings to be @var. replaced'.replace(/@([\S]*?)(?=[.]?\s)/g,function(){return '7';})
"this string has 7 two strings to be 7\. replaced" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:03:33.557

尝试这个

```
@((?!\. )\S)+ 
```

[在 regexr 上](http://regexr.com?33erg)查看

这匹配 a`@`后跟非空白字符`\S`。但它只匹配下一个非空格，如果它不是一个点后跟一个空格。[这](http://www.regular-expressions.info/lookaround.html) `(?!\. )`是由`\S`.

# mysql - Mysql. Select where field=1 or field=2 with IF

> ID：14394980
> 
> 赞同：0
> 
> 时间：2013-01-18T08:27:28.027
> 
> 标签：mysql, sorting, if-statement

i need some query.

```
CREATE TABLE `location_areas_localized` (
  `id` int(11) DEFAULT NULL,
  `lang_index` varchar(5) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  KEY `id` (`id`),
  KEY `lang_index` (`lang_index`),
  KEY `name` (`name`),
  FULLTEXT KEY `name_2` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `location_areas_localized` (`id`, `lang_index`,`name`)
VALUES
    (1,'ru','Нью Йорк'),
    (1,'en','New York'),
    (2,'en','Boston'),
    (2,'ch','波士顿')
; 
```

Logic of search.

If row with `lang_index='ru' AND id IN(1,2)` found. it must return all with `lang_index='ru'` If one or more rows with `lang_index='ru'` not exists But exists with `lang_index='en'` and with some id. Then it must return all exists with `land_index='ru' AND id IN(1,2)` and all that not found with `lang_index='ru'` but found with `lang_index='en'` (in table - all rows with `lang_index='en'` always exists)

See on [sqlfiddle](http://www.sqlfiddle.com/#!2/87caa/1/0)

I need only one result per id. I tried GROUP BY id but its not works correctly.

Output must be

```
 1,'ru','Нью Йорк'

   2,'en','Boston'   (because lang_index='ru' with id 2  not found) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:02:53.810

```
SELECT 
  coalesce(max(CASE WHEN lang_index='ru' THEN name ELSE null END), name) as name
FROM 
  location_areas_localized 
WHERE 
  id IN (1,2) 
  AND (lang_index='en' OR lang_index='ru')
group by 
  id
ORDER BY 
  FIELD(lang_index,'ru','en'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:57:44.973

不使用聚合函数，它只需要第一个匹配的行。子查询`ORDER BY`强制执行相同的事实，即`id`“ru”（或“en”，如果“ru”不存在）行是第一个。

```
SELECT * 
FROM(
    SELECT *
    FROM location_areas_localized
    ORDER BY FIELD(lang_index,'ru','en','ch')
) as inv
WHERE id IN (1,2)
GROUP BY id 
```

请参阅[SQLFiddle](http://www.sqlfiddle.com/#!2/6df2f/5)示例

# actionscript-3 - How do I pass barycentric coordinates to an AGAL shader? (AGAL wireframe shader)

> ID：14394983
> 
> 赞同：2
> 
> 时间：2013-01-18T08:27:32.240
> 
> 标签：actionscript-3, 3d, shader, stage3d, agal

I would like to create a wire frame effect using a shader program written in AGAL for Stage3D.

I have been Googling and I understand that I can determine how close a pixel is to the edge of a triangle using [barycentric coordinates](http://codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/) (BC) passed into the fragment program via the vertex program, then colour it accordingly if it is close enough.

My confusion is in what method I would use to pass this information into the shader program. I have a simple example set up with a cube, 8 vertices and an index buffer to draw triangles between using them.

If I was to place the BC's into the vertex buffer then that wouldn't make sense as they would need to be different depending on which triangle was being rendered; e.g. Vetex1 might need (1,0,0) when rendered with Vetex2 and Vetex3, but another value when rendered with Vetex5 and Vetex6\. Perhaps I am not understanding the method completely.

Do I need to duplicate vertex positions and add the aditional data into the vertex buffer, essentially making 3 vertices per triangle and tripling my vertex count? Do I always give the vertex a (1,0,0), (0,1,0) or (0,0,1) value or is this just an example? Am I over complicating this and is there an easier way to do wire-frame with shaders and Stage3d?

Hope that fully explains my problems. Answers are much appreciated, thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:27:01.983

这完全取决于您的几何图形，而这个问题实际上是图形顶点着色的问题：您需要几何图形是 3 色的。好的起点是[Wikipedia 文章](http://en.wikipedia.org/wiki/Graph_coloring)。

例如，假设`(1, 0, 0)`基向量是红色、`(0, 1, 0)`绿色和`(0, 0, 1)`蓝色。很明显，如果您使用以下基本元素构建几何图形

![基本图形元素](../Images/8689f85e6a57f92f0190b6c3b53ec223.png)

那么您可以避免重复顶点，因为这样的图将是 3-colorable （即每条边，因此每个三角形，将有不同颜色的顶点）。您可以在任何方向平铺此基本元素，并且图形将保持 3 色：

![平铺示例](../Images/41563671a94e312c0298a352c6b36e6c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:56:03.933

您偶然发现了让我对 AGAL/Stage3D 感到疯狂的事情。API 中的限制阻止您在许多情况下使用共享顶点。线框渲染是一个问题的例子……但简单的平面着色也是另一个例子。您需要做的是为网格中的每个三角形创建三个唯一的顶点。对于每个顶点，添加一个额外的参数（或设计您的引擎以接受顶点法线并重用它们，因为您可能不会对线框进行着色）。

分别为每个三角形分配一个单位向量 A[1,0,0]、B[0,1,0] 或 C[0,0,1]。这会让你开始。请注意，显而易见的解决方案（在片段着色器中设置阈值并有条件地绘制像素）会产生非常难看的混叠结果。查看此页面，了解对片段程序渲染的线框进行抗锯齿技术的一些见解：

[http://cgg-journal.com/2008-2/06/index.html](http://cgg-journal.com/2008-2/06/index.html)

正如我所提到的，如果您希望实现平面着色，您需要采用类似的技术（每个三角形的唯一顶点）。由于没有等效于 GL_FLAT 并且无法使变化的寄存器返回平均值，因此实现平面着色的唯一方法是为给定三角形的每个顶点通道计算相同的光照......这意味着每个顶点都需要相同的顶点法线。

# asp.net - "Content Not Supposed to Be Outside 'Script' or 'asp:Content' Regions"

> ID：14394984
> 
> 赞同：0
> 
> 时间：2013-01-18T08:27:32.660
> 
> 标签：asp.net, .net

I'm starting to learn ASP.NET and it's the little things that are really annoying with Visual Studio Web Dev Express. I keep getting the error "Content Not Supposed To Be Outside 'Script' or 'asp:Content' Regions" - so I put content inside an `asp:content` container and it doesn't disappear. I also get the same sort of error with declaring the DocType. Any suggestions to fix this. Also on an off-note: is there any better IDE's to code ASP.NET?

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Hello VS2010</title>
</head>
<body>
    <asp:content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
        <form id="form1" runat="server">
            <div>
                <asp:Literal ID="Literal1" runat="server">
                    Hello World
                </asp:Literal>
            </div>
        </form>
    </asp:content>
</body>
</html> 
```

**Master Page**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form runat="server">
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                    My ASP.NET Application
                </h1>
            </div>
            <div class="loginDisplay">
                <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                    <AnonymousTemplate>
                        [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                        [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                    </LoggedInTemplate>
                </asp:LoginView>
            </div>
            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                    </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:41:58.970

母版页是一种应用于所有页面的模板。在这里，您似乎在不知不觉中使用了它

```
MasterPageFile="~/Site.master" 
```

在 masterPage 中，您拥有您希望所有页面共有的所有内容和一个 asp:content 区域，您可以在其中为每个页面添加内容。

因此，在这里您可以尝试删除 masterPage 引用或只是在 asp:content 区域中添加和删除内容。

[这](http://msdn.microsoft.com/en-us/library/wtxbf3hh%28v=vs.100%29.aspx)是有关 MasterPages 的 msdn 链接。我认为学习asp.net确实有必要了解masterPages。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:32:51.723

**新回复：**

哦，那好吧。

因此，首先每个页面只有一个表单标签，包括母版页中的页面。

您不需要 Web 表单上的 form 标记或 html、body 或 head 标记，只需要您的母版页。

所以 Page.aspx 代码应该是这样的：[http ://codepaste.net/87n474](http://codepaste.net/87n474)

请注意，您需要在您的 aspx 页面中包含母版页中可用的所有内容区域。

**原回复：**

几件事。

*   检查您的母版页布局，看看其中是否有任何内容错位。（也贴在这里）
*   同样与您的母版页有关，如果您将**所有**HTML 标记都放在 asp.aspx 页面中，我认为拥有母版页没有多大意义。

您的文档类型应该是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

注意大小写的细微差别。

最后，唯一比 web dev express 更好的 IDE 是完整版的 Visual Studio，没有比最新版的 Visual Studio 更好的用于创建和调试 asp.net 站点的版本了。

# c - sleep before closing 0MQ sockets

> ID：14394994
> 
> 赞同：2
> 
> 时间：2013-01-18T08:28:26.847
> 
> 标签：c, messaging, zeromq

In Code Connected book volume 1(page 23) there is a example for using `PUSH`, `PULL` messaging. Before closing sockets it uses `sleep()`. Here is the code:

```
printf("Total expected cost: %d msec\n", total_msec);
sleep(1); // Give 0MQ time to deliver

zmq_close(sink);
zmq_close(sender);
zmq_ctx_destroy(context); 
```

What is that `sleep(1)` about? Is this general rule?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:16:21.573

taskvent.c 和 tasksink2.c 中的 sleep (1) 是示例仍然使用 0MQ/2.2 时的遗留问题，如果您在 0MQ/3.2 上运行，则可以删除这两行代码。我刚刚做到了，经过测试，它可以按您的预期工作。

原因：在 2.2 中，当您终止上下文时，套接字被破坏并且消息被丢弃。在 3.2 中，消息将在 LINGER 套接字选项指定的超时内传递，默认情况下是无限的。

还有很多其他使用“睡眠”的例子，原因很充分：

*   模拟工作负载
*   让演示中的一组对等点启动并连接
*   让演示中的一组对等方关闭
*   出错后重试

您可以以不同的方式进行启动和关闭同步，但它比我们在简单示例中想要的要复杂。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T10:36:16.540

使用 sleep(X) 是一个坏习惯，通常表示一个糟糕的设计。ZeroMQ 的实施质量并不出名。

这里的目的是等到 ZeroMQ 发送完 ZeroMQ 套接字的发送队列中存在的所有未决消息。

1秒被认为足够长，但绝对没有保证。因此，该程序将在大部分时间而不是所有时间运行。

更好的方法是定期检索发送队列中未决消息的数量，并等待该数量降至零。可以添加整体超时以避免无限等待。

我不知道 ZeroMQ 是否提供了这样的 API。