# StackOverflow 问答 14970000-14970999

# c++ - （加速 C++）章节管理内存

> ID：14970000
> 
> 赞同：1
> 
> 时间：2013-02-20T00:06:37.813
> 
> 标签：c++

我正在经历加速的 C++，我被困在练习 10.3 中，我什至不知道如何开始。我想在这里提一下，这不是家庭作业，我阅读它只是为了获得对 C++ 的信心。问题如下所示。

> 重写第 8.1.1/140 节中的中值函数，以便我们可以使用向量或内置数组调用它。该函数应该允许任何算术类型的容器。

上述问题的代码如下

```
template <class T>
 T median( vector<T> v)
 {
    typedef typename vector<T>::size_type vec_sz;
     vec_sz size = v.size();
     if( size == 0 )
     {
         throw domain_error(" median of an empty vector");
     }
     sort( v.begin(), v.end() );
     vec_sz mid = size /2;
     return size%2 == 0 ? ( v[mid]+v[mid+1])/2 : v[mid] ;
 } 
```

我不知道下一步该做什么。任何帮助或批评都会对我有益。谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:38:48.390

juanchopanza 和 Mooing Duck 对迭代器的提示可能是本书练习的正确方法。但是，在实际应用中，我可以改为编写一个接受数组的包装函数，并调用接受向量的原始函数：

```
template <class T, size_t N>
T median (const T (&a)[N])
{
    return median(std::vector<T>(a, a+N));
} 
```

# python - 使 Python 错误消息更详细/详细/具体 - 有可能吗？

> ID：14970008
> 
> 赞同：1
> 
> 时间：2013-02-20T00:07:09.370
> 
> 标签：python, error-handling

在另一台服务器上设置测试环境后，我在多个 API 调用中遇到错误。99% 肯定这是 MySQL 的问题，但返回的错误根本没有帮助：

```
global name 'sys' is not defined" 
```

我已经导入`sys`（并且它在我的原始实时版本上运行良好），并且还尝试在新服务器上添加`sys`到我`requirements.txt`的，但显然没有 pip/easy_install 包。

长话短说，有没有办法让那个错误消息返回更多信息，所以我有希望调试它？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:38:10.613

感谢所有回复的人，但我的错误已解决。原来是 MySQL 服务器设置中的一些奇怪的权限问题。

我仍然很好奇 Python 错误是否可以变得更加冗长，但我猜答案不是。

# java - 如何更改 HttpServletRequest.servletpath？

> ID：14970014
> 
> 赞同：0
> 
> 时间：2013-02-20T00:08:09.310
> 
> 标签：java, jsp, servlets, request

我正在使用一些 JSP 页面和一个 servlet。

小服务程序 doPost():

```
String userPath = request.getServletPath();
if (userPath.equals("/PageAdm")) {
     String username = request.getParameter("username");
     String password = request.getParameter("password");
     User userone = new User(username, password);
     request.setAttribute("user", user);
     RequestDispatcher view = request.getRequestDispatcher("view/Page.jsp");
     view.forward(request, response);
} else if (userPath.equals("/Page")) {
     String username = request.getParameter("username");
     UsersService us = new UsersService();
     User user = us.getUserByUsername(username);
     request.setAttribute("user", user);
     RequestDispatcher view = request.getRequestDispatcher("view/UserNameEdit.jsp");
     view.forward(request, response);
} 
```

当我登录时，我可以更改用户名，但是当我提交表单（单击）来更改它时，servletpath 仍然是“/PageAdm”，但它必须是“/Page”，所以我可以更改我的用户名。如何更改 servletpath，使其转到“/UserNameEdit”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:18:16.883

将 action 属性添加到表单元素以指向正确的路径。

```
<form action="<c:url value="/MyServletPath/Page"/>" method="post"> 
```

# silverlight - 返回自定义 Silverlight OOB 应用程序退出代码

> ID：14970023
> 
> 赞同：1
> 
> 时间：2013-02-20T00:08:33.373
> 
> 标签：silverlight, silverlight-4.0, exit-code, silverlight-oob, out-of-browser

我想自定义提升信任的退出代码，即 Out of Browser (OOB) Silverlight 4 应用程序。我目前正在尝试使用[System.Environment.ExitCode](http://msdn.microsoft.com/en-us/library/system.environment.exitcode%28v=vs.95%29.aspx)属性来自定义我的 SL4 应用程序的退出值，但是，它似乎被 sllauncher.exe 覆盖并且始终返回 0。

以下是对 Visual Studio 生成的默认 SilverlightApplication 所做的唯一更改，除了调整项目属性以启用 OOB Elevated Trust：

在 MainPage.xaml.cs：

```
public MainPage()
{
    InitializeComponent();
    Environment.ExitCode = 42;
} 
```

还更新了 App.xaml.cs 作为预防措施：

```
private void Application_Exit(object sender, EventArgs e)
{
    Environment.ExitCode = 42;
} 
```

将 XAP 安装到本地系统后，我将通过命令提示符使用[“start /wait”语法](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line/11476681#11476681)来启动 OOB 应用程序并确保设置了 Windowed 应用程序的退出代码，即：

```
start /wait sllauncher.exe 1899735003.localhost 
```

关闭应用程序后，将焦点返回到命令提示符，然后运行：

```
echo Exit Code is %errorlevel% 
```

退出代码始终设置为 0。

有没有办法让 sllauncher 设置 OOB 应用程序提供的退出代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T13:23:37.887

我设法通过调用`TerminateProcess`Windows API 来做到这一点：（**不要这样做！**）

```
 [DllImport("kernel32.dll")]
    static extern int TerminateProcess(IntPtr processIdOrHandle, uint exitCode);

    [DllImport("kernel32.dll")]
    static extern IntPtr GetCurrentProcess();

    public static void Exit(uint code) {
         TerminateProcess(GetCurrentProcess(), code);
    } 
```

然而，这段代码让我非常紧张：`TerminateProcess`这是一个相当讨厌的“立即终止开关”——一种会立即终止的调用`sllauncher.exe`。如果`sllauncher.exe`通常在 Silverlight 应用程序关闭后进行任何类型的清理（我认为可能），那么现在将省略该清理。我对采用这种方法非常谨慎。

我认为另一种与父进程“通信”的方法是将退出代码写入临时文件，但是 Silverlight 的`Environment.GetSpecialFolder`调用不允许我访问临时目录之类的东西。

我可能不得不 P/Invoke 到 Windows API 以找到临时目录，然后向其中写入一个文件，并从父进程中读出它。

（注意：这是 Silverlight 5。我不确定您在 SL4 上可以 P/Invoke 到什么程度）

# javascript - Javascript Onclick 2 事件

> ID：14970024
> 
> 赞同：0
> 
> 时间：2013-02-20T00:08:36.563
> 
> 标签：javascript, javascript-events, onclick

我正在为我的问题寻找一个独特的解决方案。我希望通过 1 个 onclick 提交 2 个事件。大多数答案涉及创建 function() 但我的部分功能涉及使用 php 循环。

目前此代码仅执行第二个事件。相反，如果我切换事件，则会发生另一个事件。基本上无论哪个事件最后都会执行。

```
if($result){
    if(mysql_affected_rows() != 0){
      while($row = mysql_fetch_array($result)){ 

    echo "<table>";
        echo "<tr style='cursor: pointer' onclick=\"document.location = 'test.php?airport_id=" . $row['id'] . "'; document['myform'].submit(); return false; \";>";
    echo "<td width=100 align=left><font color=#FFFFFF>" . $row['ident'] . "</font></td>"; 
```

您有什么建议作为解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:44:10.537

你有没有想过使用 AJAX？您可以通过 AJAX 提交表单。提交OK后，触发你的重定向功能；此链接可能对您有所帮助：http: [//www.jstiles.com/Blog/How-To-Submit-a-Form-with-jQuery-and-AJAX](http://www.jstiles.com/Blog/How-To-Submit-a-Form-with-jQuery-and-AJAX)

# c# - 在服务堆栈ormlite中实现复合主键？

> ID：14970032
> 
> 赞同：0
> 
> 时间：2013-02-20T00:09:22.183
> 
> 标签：c#, servicestack, ormlite-servicestack

如何实现代表数据库中具有复合主键的表的 poco 类？所以我有 id1 和 id2，它们共同构成了主键。这里没有真正的自动增量 ID。

# javascript - 如何使用浏览器输入文件夹名称的表单将浏览器带到受密码保护的文件夹？

> ID：14970033
> 
> 赞同：0
> 
> 时间：2013-02-20T00:09:34.980
> 
> 标签：javascript

我设置了一些受密码保护的文件夹，客户可以在其中查看受保护的文件。我需要一些登录脚本来要求客户输入他们的 ID。ID 与文件夹名称相同，输入应将客户端带到他们的文件夹。这是他们必须输入凭据才能访问文件夹的地方。找了好久都没找到？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:21:53.667

如果您可以使用 jQuery，例如：

在您的标记中：

```
<form id="access-protected-folder">
    <label>Please enter your ID</label>
    <input type="text" name="id" id="protected-folder-id" />
    <input type="submit" value="Submit" />
</form> 
```

在您的 javascript 中：

```
$(function(){
    $("#access-protected-folder").submit(function(e){
        e.preventDefault(); // Stop the default form action

        var baseFolderUrl = '/protected-folders/' // Base url to your folders

        window.location = baseFolderUrl + $("#protected-folder-id").val();
    });

}); 
```

参见示例 jsFiddle：http: [//jsfiddle.net/exHYE/](http://jsfiddle.net/exHYE/)

# ruby - 解析图片 url nokogiri

> ID：14970034
> 
> 赞同：3
> 
> 时间：2013-02-20T00:09:51.323
> 
> 标签：ruby, parsing, nokogiri

我需要从 HTML 中解析出图像 URL，如下所示：

```
<p><a href="http://blog.website.com/wp-content/uploads/2012/02/image_name.jpg" ><img class="aligncenter size-full wp-image-12313" alt="Example image Name" src="http://blog.website.com/wp-content/uploads/2012/02/image_name.jpg" width="630" height="119" /></a></p> 
```

到目前为止，我正在使用 Nokogiri 来解析`<h2>`标签：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

page = Nokogiri::HTML(open("http://blog.website.com/"))
headers = page.css('h2')

puts headers.text 
```

我有两个问题：

1.  如何解析图片网址？
2.  理想情况下，我会以这种格式打印到控制台：

```
1.
标题 1
图片网址 1
image_url 2（如果有）
 2.
标题 2
2image_url 1
2image_url 2（如果有）

```

到目前为止，我还无法以这种漂亮的格式打印我的标题。我该怎么做？

```
<h2><a href="http://blog.website.com/2013/02/15/images/" rel="bookmark" title="Permanent Link to Blog Post">Blog Post</a></h2>
          <p class="post_author"><em>by</em> author</p>
          <div class="format_text">
    <p style="text-align: left;">Blog Content </p>
<p style="text-align: left;"> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
<p style="text-align: center;"><a href="http://blog.website.com/wp-content/uploads/2012/02/image21.jpg" ><img class="alignnone size-full wp-image-23382" alt="image2" src="http://blog.website.com/wp-content/uploads/2012/02/image21.jpg" width="630" height="210" /></a></p>
<p style="text-align: left;">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
<p style="text-align: center;"><b id="internal-source-marker_0.054238131968304515">Items: <a href="http://www.website.com/threads?src=login#/show/thread/A_abvaf812e3"  target="_blank">Items for Spring</a></b></p>
<p style="text-align: center;">Lorem Ipsum.</p>
<p style="text-align: center;"><b id="internal-source-marker_0.054238131968304515">More Items: <a href="http://www.website.com/threads#/show/thread/A_abv2a6822e2"  target="_blank">Lorem Ipsum</a></b></p>
<p style="text-align: center;">Lorem Ipsum.</p>
<p style="text-align: center;"><b id="internal-source-marker_0.054238131968304515">Still more items: <a href="http://www.website.com/threads#/show/thread/A_abv7af882e3"  target="_blank">Items:</a></b></p>
<p style="text-align: center;">Lorem Ipsum.</p>
<p style="text-align: center;"><b id="internal-source-marker_0.054238131968304515">Lorem ipsum: <a href="http://www.website.com/threads?src=login#/show/thread/A_abvea6832e8"  target="_blank">Items</a></b></p>
<p style="text-align: center;">Lorem Ipusm</p>
<p style="text-align: center;"><b id="internal-source-marker_0.054238131968304515">
        </div>  
          <p class="to_comments"><span class="date">February 15, 2013</span> &nbsp; <span class="num_comments"><a href="http://blog.website.com/2013/02/15/Blog-post/#respond" title="Comment on Blog Post">No Comments</a></span></p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T07:41:14.173

我认为首先按 h2 分组更有意义：

```
doc.search('h2').each_with_index do |h2, i|
  puts "#{i+1}."
  puts h2.text
  h2.search('+ p + div > p[3] img').each do |img|
    puts img['src']
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T01:10:24.260

要获取图像，只需查找`img`具有`src`属性的标签。

如果您想要`h2`与每个图像相关联，您可以这样做：

```
doc.xpath('//img').each do |img|
  puts "Header: #{img.xpath('preceding::h2[1]').text}"
  puts "  Image: #{img['src']}"
end 
```

请注意，切换到 XPath 是为了`preceding::`轴。

**编辑**

要按标题分组，您可以将它们放在哈希中：

```
headers = Hash.new{|h,k| h[k] = []}
doc.xpath('//img').each do |img|
  header = img.xpath('preceding::h2[1]').text
  image = img['src']
  headers[header] << image
end 
```

要获得您规定的输出：

```
headers.each do |h,urls|
  puts "#{h} #{urls.join(' ')}"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:26:13.277

我最终使用的代码。随意批评（我可能会从中学习）：

```
require 'rubygems'
require 'nokogiri'

doc = Nokogiri::HTML(open("http://blog.website.com/"))

doc.xpath('//h2/a[@rel = "bookmark"]').each_with_index do |header, i|
  puts i+1
  puts " Title: #{header.text}"
  puts "  Image 1: #{header.xpath('following::img[1]')[0]["src"]}"
  puts "  Image 2: #{header.xpath('following::img[2]')[0]["src"]}"
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T00:02:20.067

我曾经做过类似的事情（实际上我想要完全相同的输出）。这个解决方案很容易理解：

根据 DOM 的结构，您可以执行以下操作：

```
body = page.css('div.format_text')
headers = page.css('div#content_inner h2 a')
post_counter = 1

body.each_with_index do |body,index| 
   header = headers[index]
   puts "#{post_counter}. " + header
   body.css('p a img, div > img').each{|img| puts img['src'] if img['src'].match(/\Ahttp/) }
   post_counter += 1
end 
```

所以基本上，您正在检查每个带有 1 个或多个图像的标题。我正在解析的页面有图像 div 之外的标题，这就是为什么我使用两个不同的变量来查找它们（正文/标题）。此外，我在查找图像时定位了两个类，因为这是这个特定 DOM 的结构方式。

这应该会给你一个像你想要的那样干净的输出。

希望这可以帮助！

# iphone - 从 AFImageRequestOperation 中的成功块返回图像

> ID：14970035
> 
> 赞同：1
> 
> 时间：2013-02-20T00:09:55.583
> 
> 标签：iphone, ios, objective-c, cocoa, afnetworking

我正在尝试编写一个方便的函数，该函数将接受图像标识符并使​​用 AFNetworking 的 AFImageRequestOperation 下载图像。该函数正确下载图像，但我无法在成功块中返回 UIImage。

```
-(UIImage *)downloadImage:(NSString*)imageIdentifier
{
  NSString* urlString = [NSString stringWithFormat:@"http://myserver.com/images/%@", imageIdentifier];

  AFImageRequestOperation* operation = [AFImageRequestOperation imageRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]] imageProcessingBlock:nil
  success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
  {
    NSLog(@"response: %@", response);
    return image;                                                   
  }
  failure:nil];

[operation start];

} 
```

该`return image;`行给了我错误：

```
Incompatible block pointer types sending 'UIImage *(^)(NSURLRequest *__strong, NSHTTPURLResponse *__strong, UIImage *__strong)' to parameter of type 'void (^)(NSURLRequest *__strong, NSHTTPURLResponse *__strong, UIImage *__strong)' 
```

有什么想法吗？我很想能够打电话

`UIImage* photo = [downloadImage:id_12345];`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:28:24.813

AFNetworking 图像下载操作是异步的，您不能在操作开始时分配它。

您尝试构建的功能应该使用委托或块。

```
- (void)downloadImageWithCompletionBlock:(void (^)(UIImage *downloadedImage))completionBlock identifier:(NSString *)identifier {
  NSString* urlString = [NSString stringWithFormat:@"http://myserver.com/images/%@", identifier];

  AFImageRequestOperation* operation = [AFImageRequestOperation imageRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]] imageProcessingBlock:nil
  success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
  {
    NSLog(@"response: %@", response);
    completionBlock(image);                                                   
  }
  failure:nil];

  [operation start];
} 
```

像这样称呼它

```
// start updating download progress UI
[serverInstance downloadImageWithCompletionBlock:^(UIImage *downloadedImage) {
  myImage = downloadedImage;
  // stop updating download progress UI
} identifier:@""]; 
```

# iphone - 当目标为多个拱门构建时，xcodebuild 在指定拱门或 sdk 时失败

> ID：14970040
> 
> 赞同：2
> 
> 时间：2013-02-20T00:10:27.110
> 
> 标签：iphone, xcode, continuous-integration, xcodebuild

我有一个构建 iPhone 应用程序的目标。在构建应用程序的过程中，它构建了一个 i386 (OS X) 命令行目标，设置为依赖项。这通过 XCode 工作得很好，但是当我尝试从命令行指定 -arch 或 -sdk 时，构建失败并出现错误：

```
xcodebuild -sdk iphoneos
target specifies product type 'com.apple.product-type.tool', but there's no such product type for the 'iphoneos' platform 
```

这并不奇怪。xcodebuild 正在将 -sdk 和 -arch 命令传播到依赖项目，使它们为 iOS 构建命令行工具，但很快就会失败。我想要的是为 OS X 构建依赖项目。

为了清楚起见，这是构建顺序：

*   iPhone 应用程序开始构建
*   Xcode 检测未满足的依赖项，一个 .plist 文件
*   Xcode 运行代码以满足依赖关系，该依赖关系涉及通过子项目构建 OSX 二进制文件
*   Xcode 运行生成 plist 文件的内置 OS X 二进制文件
*   Xcode 继续构建 iPhone 应用程序

如何为主要目标而不是依赖项指定 SDK？

# c# - 成员集合迭代线程安全

> ID：14970044
> 
> 赞同：0
> 
> 时间：2013-02-20T00:10:42.213
> 
> 标签：c#, multithreading, thread-safety

我有一个后台线程正在执行类似于此的操作：

```
class Client
{
    public ReadOnlyCollection<IPAddress> Servers { get; private set; }

    void UpdateServers( List<IPAddress> servers )
    {
        // this will be called on a background thread

        this.Servers = new ReadOnlyCollection( servers );
    }
} 
```

在主线程上，消费者可能想要迭代`Servers`属性。

我知道使用 a ，迭代将是线程安全的，因为如果在迭代期间调用`foreach`迭代器，它将属于旧实例。`UpdateServers`

使用`for`循环，可以通过以下方式使迭代变得安全：

```
var serverList = client.Servers;
for ( int x = 0 ; x < serverList.Count ; ++x )
{
    DoSomething( serverList[ x ] );
    // ...
} 
```

但我想知道是否有任何方法可以保证编译器将生成（或强制它生成，如果还没有的话）上面的代码，如果消费者决定迭代：

```
for ( int x = 0 ; x < client.Servers.Count ; ++x ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:15:04.740

编译器生成你告诉它的代码。可能有一些优化可以避免一遍又一遍地加载字段的值，但你真的不应该依赖这些。

因此，编译器可能会以这种方式生成代码，但并非必须如此，因此您应该像没有那样编写代码。

此外，这样的事情可能非常棘手（例如，我认为你也应该制作 field `volatile`）。最好的选择通常是使用锁，除非这些会给你带来真正的性能问题（这种情况很少发生）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:15:06.697

如果您不介意他们互相锁定，这可能是可行的。不过，它在内存使用和对象创建方面会有点重。可能有更清洁的方法。

```
private ReadOnlyCollection<IPAddress> _servers;
public ReadOnlyCollection<IPAddress> Servers { 
    get {
        lock(_servers) {
            return new ReadOnlyCollection<IPAddress>(_servers);
        }
    }

    private set {
        lock(_servers) {
            _servers = value;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:16:26.363

您应该按照上面的建议使用锁，但您也可以通过不迭代对列表的引用并使用 .ToArray 然后对其进行迭代来最小化持有锁的时间。

# php - PHP Regex - 忽略字符串开头的 4 个或更多空格？

> ID：14970045
> 
> 赞同：1
> 
> 时间：2013-02-20T00:10:45.023
> 
> 标签：php, regex

我有以下正则表达式规则：

```
'/((f|ht)tp)(.*?)(.gif|.png|.jpg|.jpeg)/' 
```

它工作得很好，但我不希望它匹配任何前面有换行符和 4 个或更多空格的东西，这意味着这样的事情：

```
"\n    " 
```

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:17:45.323

我在行首添加了一个负前瞻。它检查是否存在后跟 4 个或更多空白字符的换行符。如果此条件存在，则匹配将失败。

```
'/^(?!\n\s{4,}).*((f|ht)tp)(.*?)(.gif|.png|.jpg|.jpeg)/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:19:20.467

您不需要在前瞻中包含换行符本身，只需`^`在多行模式下使用起始锚 ( )。此外，由于`\s`可以匹配包括换行符和制表符在内的所有类型的空格，所以最好使用文字空格字符：

```
'/^(?! {4}).*(f|ht)tp(.*?)(.gif|.png|.jpg|.jpeg)/m' 
```

说到制表符，它们可以用来代替四个空格在 SO 上创建代码块，因此您可能也希望允许这样做：

```
'/^(?! {4}|\t).*(f|ht)tp(.*?)(.gif|.png|.jpg|.jpeg)/m' 
```

最后，如果您希望正则表达式仅匹配（如在*consume*中）URL，您可以使用 match-start-reset 运算符`\K`. 它就像一个积极的后视，没有固定长度的限制：

```
'/^(?! {4}|\t).*?\K(f|ht)tp(.*?)(.gif|.png|.jpg|.jpeg)/m' 
```

# json.net - 我将如何反序列化下面使用 ServiceStack.Text 创建的字符串？

> ID：14970046
> 
> 赞同：1
> 
> 时间：2013-02-20T00:10:45.763
> 
> 标签：json.net, servicestack

嗨，我正在尝试通过使用 ServiceStack.Text 来反序列化来使用答案[，](https://stackoverflow.com/questions/12539966/posting-json-to-mvc-controller-string-parameter-is-null/12540097#12540097) 但我无法找出正确的方法来执行此操作。目前正在尝试在 DotNet 3.5 中执行此操作。

只要我能在 dotnet 3.5 中做到这一点，我愿意考虑使用 JSON.Net 的答案。

```
var formelements = { serializedformdata: JSON.stringify($('#form').serializeArray()) };
```

# xbmc - 时间睡眠功能不适用于字符串

> ID：14970050
> 
> 赞同：0
> 
> 时间：2013-02-20T00:10:58.223
> 
> 标签：xbmc

想要从 xbmc 设置中导入一个字符串并将其放入 time.sleep 函数中。代码：

```
debouncing_video  =  settings.getSetting( "Debounce_video")
debouncing_audio  =  settings.getSetting( "Debounce_audio")
time.sleep(denouncing_video) 
```

如果我用 3 替换 (debouncing_video)，它会等待树秒。如果我打印字符串 (denouncing_video) 它说 3 但如果我输入 time.sleep(debouncing_video) 它不起作用谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:55:35.720

返回的值是一个字符串。将其转换为 int：

```
debouncing_video  =  int(settings.getSetting( "Debounce_video")) 
```

请参阅[API](http://mirrors.xbmc.org/docs/python-docs/xbmcaddon.html#Addon-getSetting)：

```
getSetting(id) -- Returns the value of a setting as a unicode string. 
```

你会在`xbmc.log`that中看到一个错误`TypeError: a float is required`。

# android - 从日历中删除事件未被删除

> ID：14970052
> 
> 赞同：27
> 
> 时间：2013-02-20T00:11:18.043
> 
> 标签：android, calendar, android-calendar

我正在尝试让我的应用程序向用户的日历添加提醒。代码在添加之前搜索`title`and`start date`以检查事件是否已存在于日历中（以免重复）。我的问题是：如果我手动从日历中删除事件（使用日历），事件会从日历中消失（我正在查看我的所有日​​历，但在日历应用程序中看不到它），但不会从数据库中消失。我不明白的另一件事是我试图以编程方式删除事件，但它们仍然没有被删除。

这是我的代码片段：

```
Cursor cur = null;
ContentResolver cr = getContentResolver();
String calUriString = "content://com.android.calendar/events";
Uri cal=Uri.parse(calUriString);
String[] EVENT_PROJECTION=new String[]{"calendar_id","title","dtstart","_id"};
String selection = "((" + "calendar_id" + " = 1) AND ("
        + "title" + " LIKE '"+name+"') AND ("
        + "dtstart" + " = "+String.valueOf(c.getTimeInMillis())+"))";

cur = cr.query(cal, EVENT_PROJECTION, selection, null, null);

boolean found=false;
if(cur!=null) 
    if(cur.moveToFirst()){
        DatabaseUtils.dumpCursor(cur);/*Just to view my results (which always include the deleted events)*/
        do{
            if(cur.getString(1).equals(name)){
                /*I use this part to try to remove the events manually*/
                Uri eventUri =ContentUris.withAppendedId(cal, Long.valueOf(cur.getString(3)));
                String reminderUriString = "content://com.android.calendar/reminders";
                Uri remUri =Uri.parse(reminderUriString);
                cr.delete(remUri, "event_id="+cur.getString(3), null);
                cr.delete(eventUri, null, null);
                /*It is not working also*/

                Toast.makeText(getApplicationContext(), "Event already exists in Calendar", Toast.LENGTH_LONG).show();
                found=true;
                //break;
            }
        }while(cur.moveToNext());
    }
    cur.close();
    if(found){
        /*Event is found even if I remove it from the Calendar manually and even if I remove it programmatically using cr.delete()*/
    }
    else{
        values.put("calendar_id",1); /*I am using the same Calendar that I query, or is this wrong*/
        values.put("title", name);
        /*More values are added*/
        Uri calendarUri = cr.insert(cal, values);
        long eventID = Long.parseLong(calendarUri.getLastPathSegment());
        String reminderUriString = "content://com.android.calendar/reminders";
        ContentValues reminderValues = new ContentValues();
        reminderValues.put("event_id", eventID);
        reminderValues.put("minutes", 5); 
        reminderValues.put("method", 1); 
        Uri reminderUri = getApplicationContext().getContentResolver().insert(Uri.parse(reminderUriString),  reminderValues);
    } 
```

为什么从日历应用程序中删除事件后仍然存在，为什么我什至无法以编程方式将其删除？

**更新** 问题只有当我`calendar_id=1`用于插入和删除时。其他`calendar_id`的工作正常。

**更新 2** 我在三星 Galaxy S1 上测试了代码，它运行良好。这似乎是三星 Galaxy S3 的问题（我有问题，我认为这是 S-planner 应用程序中的错误）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T06:53:32.177

如果不是 URI 问题，

您可以尝试包含在选择字符串中吗

```
AND (deleted != 1) 
```

所以选择字符串变成了，

```
String selection = "((" + "calendar_id" + " = 1) AND ("
    + "title" + " LIKE '"+name+"') AND ("
    + "dtstart" + " = "+String.valueOf(c.getTimeInMillis())+") AND ( deleted != 1 ) )"; 
```

有时，CalendarDB 需要一些时间才能删除事件。但是“已删除”的 COLUMN 将被标记为“1”，表示它们将很快被删除。延迟的原因可能是日历正在等待同步

ps：尝试使用这个工具——http: [//www.cellobject.net/Tools/CellObjectSQLiteXMLBrowser.aspx](http://www.cellobject.net/Tools/CellObjectSQLiteXMLBrowser.aspx)来可视化日历数据库。请检查数据库中的“已删除”和“脏”列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:53:57.673

不同版本的 android 使用不同的 URI 路径来查找日历数据。例如，您可以为 android 2.1 和 2.2 使用以下常量：

```
private static final String URI_VERSION_2_1 = "content://calendar/events";
private static final String URI_VERSION_2_2 = "content://com.android.calendar/events"; 
```

在 4.0 中，首选不同的方法：

[http://android-developers.blogspot.com/2011/10/ics-and-non-public-apis.html](http://android-developers.blogspot.com/2011/10/ics-and-non-public-apis.html) [http://developer.android.com/reference/android/provider/CalendarContract.Events.html](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)

Galaxy S3 很有可能至少安装了 Android 4.0。此更改可能解释了在 S1 上工作的代码，而不是在 S3 上工作的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T03:27:36.990

你也可以这样做：

```
private boolean isEventInCal(Context context, String id) {
    Uri event = ContentUris.withAppendedId(CalendarContract.Events.CONTENT_URI, Long.parseLong(id));

    Cursor cursor = context.getContentResolver().query(event, null, null, null, null);
    if (cursor != null && cursor.getCount() == 1) {
        //the event exists?
        if (cursor.moveToFirst() && !TextUtils.equals(cursor.getString(cursor.getColumnIndex("deleted")), "1")) {

            cursor.close();
            return true;
        } else {
            return false;
        }
    }
    return false;
} 
```

它适用于所有设备。

# asp.net - System.Web.dll 不同的版本给我在 vb.net 中的问题

> ID：14970053
> 
> 赞同：1
> 
> 时间：2013-02-20T00:11:21.327
> 
> 标签：asp.net, vb.net, visual-studio-2010, dll

我有一个用 VS2010 编写的针对 .Net 2.0 框架的 VB.NET Web 应用程序项目（不要问我知道）。我有一个带有导入语句的类，上面写着

```
Imports System.Web.HttpContext 
```

降低我尝试使用

```
Current.Session("username") = "user"
Current.Session("psswd") = "psswd"
Current.Session("dbName") = "database"

If (IsNothing(Current.Session("username")) Or IsNothing(Current.Session("psswd")) Or IsNothing(Current.Session("dbName"))) Then
    Current.Response.StatusCode = 402
Else
      ' Do some stuff here
End if 
```

它在我的个人机器（windows xp SP3）上运行良好，但在服务器上中断。我无法在服务器上调试它，所以我依靠堆栈跟踪来给我错误。

Stacktrace 给了我

```
[NullReferenceException: Object variable or With block variable not set.]
Microsoft.VisualBasic.CompilerServices.Container..ctor(Object Instance) +497860
Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateGet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack) +373
letter_main.Logon.login_user() in C:\VSProjects\letter_main\letter_main\Old_App_Code\Logon.vb:55
letter_main._Default.Page_Load(Object sender, EventArgs e) in C:\VSProjects\letter_main\letter_main\Default.aspx.vb:32
System.Web.UI.Control.OnLoad(EventArgs e) +99
System.Web.UI.Control.LoadRecursive() +50
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +62 
```

Logon.vb 中的第 55 行是“Current.Response.StatusCode = 402”行，如果它设法将值放入会话中，则它永远不会到达该行。我猜它没有？

所以我调查了两台机器上的 System.Web.dll，发现它们都在 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Web 位置的 c:\%WINDIR%\assemblies 中注册.dll 但我在服务器上的版本与本地机器上的版本不同

服务器上的版本是：2.0.50727.3053 我机器上的版本是：2.0.50727.3614

这可能是我的问题的原因吗？谁能想到一个解决问题的好方法？服务器是windows 2003，不知道我是否可以复制它的System.Web.dll并使用regasm在我的本地机器上测试？我无法替换服务器版本，因为那里正在运行其他需要它的 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:13:56.573

我认为您的问题与 DLL 版本无关。我认为您使用`Imports`语句的方式无法正常工作。通常只导入命名空间而不是类。因为异常消息提到了一个`With`块（当您导入一个类而不是命名空间时，您正在执行类似于`with`块正在执行的操作），我相信这是您问题的根源。

试试这个：将您的 Imports 更改为 simple `Imports System.Web`。然后将会话引用为`HttpContext.Current.Session`.

这会告诉你这是否是问题所在。为什么它在您的本地机器上工作正常而不是在服务器上我没有任何建议。但首先要看看这是否是问题的根源，然后从那里开始研究......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:40:27.393

对于未来的读者来说，我的问题被证明是相当奇怪的。在我的课程中，我根本无法从 Session 对象中获取东西。不过，它在代码隐藏页面中运行良好。我开始了一个新项目并在那里手动复制了我的代码，它开始正常工作。我相信这是因为我在从网站转换为 webapp 时犯了一个错误。不知道根本原因是什么...

# c# - 将“项目”（ASCX）动态添加到页面上的转发器

> ID：14970054
> 
> 赞同：0
> 
> 时间：2013-02-20T00:11:31.593
> 
> 标签：c#, asp.net

我正在寻找建立一个 ASPX 页面，我有一个转发器来提取这 5 个问题项。每个项目都有一个需要显示的用户控件（带有单选按钮）。现在我想要实现的是：

1.  起初只显示第一个用户控件。用户从此用户控件中选择某个单选按钮。
2.  只有且仅当用户选择单选按钮时，我们必须根据用户选择来决定是否显示第二项。
3.  对于 5 个项目的列表，这应该继续。

有没有办法让中继器等待剩余项目加载，直到用户与当前项目的用户控件交互？如果是这样，怎么做？

任何指针将不胜感激。我现在不需要任何代码，只需要一个路径/方向/指针。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:15:58.517

我可能会在服务器端渲染所有控件，然后使用 javascript 显示和隐藏它们。这将提供响应式解决方案，并简化您的代码。

**编辑**
假设您不介意客户可以看到您的内裤。

# google-apps-script - 获取 Google Apps 脚本以授权 Fusion Table API

> ID：14970059
> 
> 赞同：1
> 
> 时间：2013-02-20T00:11:54.723
> 
> 标签：google-apps-script, google-fusion-tables

我正在构建一个希望在 Fusion Table 中托管的数据库，并且正在开发一些用于与 Fusion API 交互的测试函数。我正在使用 Google Apps 脚本，并且严重依赖其他来源的代码。我花了一天的大部分时间研究这个问题，现在我陷入了困境。

在脚本编辑器中运行 addNewColumn() 时，它会进入“获取就绪”日志条目（正如我在日志中看到的那样），然后它会通过身份验证过程（每次），然后停止（并且永远不会到达“获取执行”日志条目）。没有抛出任何错误，但它永远不会完成 fetch 命令。

在调试模式下运行时，它会通过授权，然后挂在 fetch 行。如果我单击“步入”，我会收到一个简单地说“OAuth 错误”的错误。我不确定在这里做什么。任何帮助将非常感激。

```
function googleAuth() {
      var scope = "https://www.googleapis.com/auth/fusiontables";
      var service = 'fusion';
      var oAuthConfig = UrlFetchApp.addOAuthService(service);
      oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/"+
                 "OAuthGetRequestToken?scope="+scope);
      oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
      oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
      oAuthConfig.setConsumerKey('{consumer key}');
      oAuthConfig.setConsumerSecret('{secret}');
      return {oAuthServiceName:'fusion', oAuthUseToken:"always"};
}

function addNewColumn(){   
      var p = {
          'name' : "newColumn",
          'type' : "NUMBER"
      };

      Logger.log(addColumn(p));
}

function addColumn(parameters) {
  var url = "https://www.googleapis.com/fusiontables/v1/";
  var fetchArgs = googleAuth(); 

  fetchArgs.method = "POST";
  fetchArgs.payload = parameters;

  //if the fetch arg payload is set to null it will add an unnamed column
  //fetchArgs.payload = null;  

  url += "tables/"+"{table id}"+"/columns";
  url += '?key='+"{key}";

  Logger.log("fetch ready");

  var result = UrlFetchApp.fetch(url, fetchArgs).getContentText();

  Logger.log("fetch executed");

  return Utilities.jsonParse(result);  
} 
```

* * *

**更新**

我已经简化了要测试的函数，我发现只需在选项正文的有效负载字段中插入“null”代替“payload”变量，代码将成功地在融合表中创建一个无名列。但是，当我重新插入有效负载变量时 - 它停止工作。

不工作时，它要么：每次我从编辑器运行它时要求重新授权，或者从 Web 应用程序运行时显示“遇到错误：执行该操作需要授权”。有效载荷如何更改授权？我已将完全相同的有效负载剪切并粘贴到 OAuth2.0 操场上，它运行良好。请帮忙。

```
function googleAuth() {
      var oAuthConfig = UrlFetchApp.addOAuthService(service);
      oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/"+
                 "OAuthGetRequestToken?scope=" + scope);
      oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
      oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
      oAuthConfig.setConsumerKey(clientId);
      oAuthConfig.setConsumerSecret(clientSecret);
      return {oAuthServiceName:service, oAuthUseToken:"always"};
}

function addColumn() {
  googleAuth();
  var payload = 
    {
      name : "IT WORKED",
      type : "STRING"
    };
  var options =
    {
      "oAuthUseToken":"always",
      "oAuthServiceName":service,
      "method" : "post",
      "payload":payload
    };
  var url = fetchUrl + "tables/" + fusionId + "/columns" + "?key=" + apiKey;
  var fetchResult = UrlFetchApp.fetch(url, options);
  Logger.log(fetchResult.getContentText());
  return Utilities.jsonParse(fetchResult.getContentText());
} 
```

* * *

**更新#2**

我找到了一种方法，可以让它在没有任何错误的情况下运行，但它仍然没有将请求的名称和类型分配给新列。最近添加的是指定内容类型，如下所示。通过强制 contentType 为 'application' 或 'json'，它会运行但仍不会按预期传递有效负载。

```
 var options =
    {
      "oAuthUseToken":"always",
      "oAuthServiceName":service,
      "method" : "POST",
      "payload" : payload,
      'contentType' : 'application'
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:49:14.507

我有同样的问题，试图从融合表中获取和操作数据。

谷歌著名的脚本库中有一个融合表库：[https ://developers.google.com/apps-script/notable-script-libraries?hl=pt-BR](https://developers.google.com/apps-script/notable-script-libraries?hl=pt-BR)

我链接了那个库，但它似乎有问题。所以（出于调试原因）我将源代码复制到我的项目中并让它工作：

[https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/fusion-tables-class/fusion-source](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/fusion-tables-class/fusion-source)

也许你在那里找到你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:45:01.647

解决了！！！解决方案是双重的：

1.  必须通过 JSON.stringify() 将有效负载转换为字符串
2.  contentType 必须手动设置为“application/json”

这与我在网上找到但想分享我的工作解决方案的多个教程非常不同。

```
function addColumn(authToken) {
  googleAuth();
  var payload =
    {
      name : 'YES',
      type : 'STRING'
    };
  var options =
    {
      payload : JSON.stringify(payload),
      oAuthUseToken : "always",
      oAuthServiceName : service,
      method : "POST",
      contentType : "application/json"
    };
  var url = fetchUrl + "tables/" + fusionId + "/columns";// + "?key=" + apiKey;
  var fetchResult = UrlFetchApp.fetch(url, options);
  Logger.log(fetchResult.getHeaders());
  Logger.log(fetchResult.getContentText());
  return Utilities.jsonParse(fetchResult.getContentText());

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:31:59.210

*   这似乎与其他 urlFetch POST 示例不同的原因是因为 Fusion Table Service 需要一个实际的 JSON 有效负载作为请求“BODY”。当您添加一个 JSON 对象（没有 Stringify）作为“有效负载”时，UrlFetchApp 会将每个名称/值对转换为 Url 编码的请求字符串（即 name=YES&type=STRING）。但是，当 Payload 是一个字符串时（在您使用 stringify 的情况下），UrlFetch 只会对您提供的字符串进行 URL 编码（在这种情况下为 JSON 字符串）。如果您“发布”到服务预期的名称/值参数，那么您将不会使用 Stringify。
*   注意：为了让您知道并澄清您在[此处](https://stackoverflow.com/questions/14987295/which-oauth-flow-to-follow-google-apps-script-and-google-fusion-tables-api/15445623#15445623)发布的其他相关问题，您在此示例中使用的是 Oauth 1.0（addOAuthService 仅支持 Oauth1.0 端点和协议）
*   另一个注意事项：您正在混合 Utilities.jsonParse 和 JSON.stringify。我会使用 JSON.parse 来保持一致。

# php - 尝试从按钮获取数据并使用 jquery 定制弹出窗口

> ID：14970061
> 
> 赞同：0
> 
> 时间：2013-02-20T00:12:08.073
> 
> 标签：php, mysql, jquery

我正在使用一个模式对话框打开器，当用户单击几个可用按钮之一时，我想打开它。这些按钮都有一个不同的“artist_id”与之关联。单击按钮时，我还有一个 php 脚本应该运行并将用户 ID 和艺术家 ID 放在一个跟踪“喜欢”关系的表中。下面是相关代码：

索引.php：

```
//script
<script>
$(function() {
  $( "#dialog-modal" ).dialog({autoOpen: false, height: 250, width: 400, modal: true});

  $( "#opener" ).click(function() {
                       $( "#dialog-modal" ).dialog( "open" );

                       $.get('/like_artist.php', {artist_id : $(this).data('artist_id')})
                       .done(function(data) {

                             alert("Data Loaded: " + data.artist_id);

                             });

        });

  });
</script> 
```

//按钮：

```
<button type="button" id="opener" data-artist_id="1">Play My City</button> 
```

//对话框内容（我希望根据单击的按钮进行此更改）：

```
<div id="dialog-modal" title="Basic dialog">
<p>You have just liked ...</p>

<p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

like_artist.php：获取用户 ID 和艺术家 ID，并将它们放入关系表 user_artists

```
<?php 

session_start();
require_once "database.php";
db_connect();
require_once "auth.php";
$current_user = current_user();
include_once("config.php");

    $artist_id = $_GET['artist_id'];

    $user_id = $current_user['id'];

    $query = "INSERT INTO `user_artists`
    (`artist_id`, `user_id`)
    VALUES
    (''$artist_id', '$user_id')";

    $result = mysql_query($query);

?> 
```

我在顶部脚本中放置的警报用于查看我是否从 data-artist_id 属性中获取了正确的艺术家 ID，但它没有返回任何内容。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:20:55.470

您没有返回（回显）任何内容`like_artist.php`，自然您的 AJAX 响应也将是空的。

```
echo json_encode(array('artist_id' => $artist_id)); 
```

然后你必须在前端对其进行解码。

# html - html：从 reverbnation.com 嵌入音乐播放器给出不同的错误

> ID：14970063
> 
> 赞同：1
> 
> 时间：2013-02-20T00:12:14.747
> 
> 标签：html, validation, iframe, markup

在网页项目中，我想嵌入混响提供的音乐播放器。

正如您[在此处](http://www.reverbnation.com/rozbub?page_view_source=facebook_app)看到的（单击“共享”，然后单击“嵌入”，最后单击“获取代码”），提供了一个 iframe。

但是，运行 w3c 验证器时，字符似乎有问题，如您[在此处](http://validator.w3.org/check?uri=http://magnavoce.ch/rozbub/&charset=%28detect%20automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator/1.3)`&`所见。如何消除这种错误？为什么这些字符甚至被视为错误？顺便说一句，播放器工作正常。URL 中有更多关于空格的错误，这些错误很容易修复。

错误的下一阶段是`unsafe JavaScript attempt to access frame with URL (...). Domains, protocols and ports must match`. 我不完全了解如何修复此类错误，因为我不了解错误本身。使用 iframe 通常是一种不好的方式吗（因为我在 facebook 等不同的小部件上遇到了很多这样的错误）？

# arrays - 字符串到数组到注册表

> ID：14970064
> 
> 赞同：2
> 
> 时间：2013-02-20T00:12:14.817
> 
> 标签：arrays, vb.net, string, regedit

我有字符串：

```
46-C9-08-B6-E8-F3-47-CF-53-2A-77-02-C9-19-7F 
```

我想把它变成一个数组，所以它看起来像这样：

```
{&H46, &HC9, &H8, &HB6, &HE8, &HF3, &H47, &HCF, &H53, &H2A, &H77, &H2, &HC9, &H19, &H7F} 
```

完成的行将是这样的：

> My.Computer.Registry.SetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Bohemia Interactive Studio\ArmA 2 OA", "KEY", New Byte() {&H46, &HC9, &H8, &HB6, &HE8, &HF3, &H47, &HCF, &H53 , &H2A, &H77, &H2, &HC9, &H19, &H7F}, RegistryValueKind.Binary)

它将作为`REG_BINARY`类型插入注册表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:37:51.607

```
Dim s As String= "46-C9-08-B6-E8-F3-47-CF-53-2A-77-02-C9-19-7F"
Dim parts As String() = s.Split(New Char() {"-"})        
Dim byteArray(parts.Length - 1) As Byte

For i As Integer = 0 To parts.Length - 1
    byteArray(i) = Convert.ToByte(parts(i), 16)
Next 
```

# javascript - 返回多个数组中常见项的算法

> ID：14970065
> 
> 赞同：0
> 
> 时间：2013-02-20T00:12:15.873
> 
> 标签：javascript, algorithm

返回多个大数组之间的公共元素的有效方法是什么？数组将包含字符串，但知道如何做一般也很好。

例如，输入 ['a', 'b'], ['a', 'b', 'c'], ['b', 'c'] 应该返回 ['b']。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:39:44.890

这取决于您要比较的内容...如果始终是字母，那么您可以创建具有 26 个插槽（每个字母 1 个）的数组并为它们提供值 0（该字母不在列表中）或 1（字母在列表中）...然后将矩阵编译（添加）在一起，假设您有 5 个数组...那么任何值为 5 的插槽都意味着该插槽在所有 5 个数组中都有 1，因此该字母出现在所有 5 个数组中。

# jquery - jquery datepicker拦截格式错误

> ID：14970070
> 
> 赞同：0
> 
> 时间：2013-02-20T00:12:55.620
> 
> 标签：jquery, string, text, datepicker

我试图弄清楚如何允许不正确的值并自动将其格式化为正确的值。

例如，如果您输入 2013 年 6 月 1 日，则不允许使用此值，因为“j”没有大写。有没有办法可以将值截取为文本（onBlur）并将“j”更改为资本值？

问题是，在检索输入的原始值之前，我遇到了错误。我不确定在什么时候我能够在它遇到错误之前检索该值（因为它无法解析日期）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:38:55.567

如果您希望每次都以相同的格式输入日期，您可以编写一个函数，将您的输入按空格分隔，然后在运行时检查每个部分是否为数字`parseInt()`，如果不是，然后大写。

```
function formatDate(date) {
  var dateElements = date.split(" ");
  var formattedDate = "";

  for (var i=0; i < dateElements.length; i++) {
    var dateElement = dateElements[i];

    if (isNaN(parseInt(dateElement))) {
      dateElement = dateElement.charAt(0).toUpperCase() + dateElement.slice(1);
    }
    formattedDate += dateElement + " ";
  }
  return formattedDate.trim();
}

var formattedDate = formatDate("1 jun 2013");
alert(formattedDate); 
```

见[**演示**](http://jsfiddle.net/zaknotzak/wHyQD/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:49:30.500

为了在日期选择器中选择错误输入的日期，您可能会发现以下有用：

```
<body>

<form>
<input type="text" name="date" id="date"/>
</form>
<script>
$("#date").datepicker({constrainInput:false,dateFormat:"d M yy",onClose:function(picker,str) { $("#date").datepicker("setDate","yourdate in correct format"); } });

</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:53:21.910

谢谢大家的回答。我想我对我的问题不太清楚。

一段时间后，我设法弄清楚我在寻找什么。我的解决方案如下：

```
$("input.datepicker").datepicker({
...
})
.blur(function() {
var patt = new RegExp("[A-Z]");
var patt2 = new RegExp("[a-z]")
var text = $("input.datepicker").val();

if(!text.match(patt)) {
    var pos = text.search(patt2);
    var char = text.charAt(pos).toUpperCase();
    var correctedDate = text.replace(patt2, char);
    $("input.datepicker").val(correctedDate);
}
}); 
```

# powershell - 如何通过对象的属性递归枚举？

> ID：14970079
> 
> 赞同：9
> 
> 时间：2013-02-20T00:14:03.923
> 
> 标签：powershell, powercli

出于性能原因，我已经开始重写我的 VMware 每日报告以使用 Get-View，而不是尽可能使用相关的 PowerCLI 命令。这样做的一个小不便是返回的视图对象通常具有许多属性，其中许多是对象本身。一些属性嵌套了四层或更多层。

所以我正在尝试创建一个函数，它将输出对象的所有属性以及该属性的完整路径。然后可以将其通过管道传输到 Where-Object，以便更轻松地查找特定属性。因此，要在存储在 $v 中的 VMware.Vim.VirtualMachine 对象上找到与 Host 相关的属性，我会键入如下内容：

```
Get-Properties -Object $v | ? {$_ -match "Host"} 
```

理想情况下，这将返回包含单词“Host”的 $v 的所有嵌套属性的列表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T00:14:03.923

也许有一种更简单的方法可以做到这一点，但这是我想出的：

```
function Get-Properties($Object, $MaxLevels="5", $PathName = "`$_", $Level=0)
{
    <#
        .SYNOPSIS
        Returns a list of all properties of the input object

        .DESCRIPTION
        Recursively 

        .PARAMETER Object
        Mandatory - The object to list properties of

        .PARAMETER MaxLevels
        Specifies how many levels deep to list

        .PARAMETER PathName
        Specifies the path name to use as the root. If not specified, all properties will start with "."

        .PARAMETER Level
        Specifies which level the function is currently processing. Should not be used manually.

        .EXAMPLE
        $v = Get-View -ViewType VirtualMachine -Filter @{"Name" = "MyVM"}
        Get-Properties $v | ? {$_ -match "Host"}

        .NOTES
            FunctionName : 
            Created by   : KevinD
            Date Coded   : 02/19/2013 12:54:52
        .LINK
            http://stackoverflow.com/users/1298933/kevind
     #>

    if ($Level -eq 0) 
    { 
        $oldErrorPreference = $ErrorActionPreference
        $ErrorActionPreference = "SilentlyContinue"
    }

    #Initialize an array to store properties
    $props = @()

    # Get all properties of this level
    $rootProps = $Object | Get-Member -ErrorAction SilentlyContinue | Where-Object { $_.MemberType -match "Property"} 

    # Add all properties from this level to the array.
    $rootProps | ForEach-Object { $props += "$PathName.$($_.Name)" }

    # Make sure we're not exceeding the MaxLevels
    if ($Level -lt $MaxLevels)
    {

        # We don't care about the sub-properties of the following types:
        $typesToExclude = "System.Boolean", "System.String", "System.Int32", "System.Char"

        #Loop through the root properties
        $props += $rootProps | ForEach-Object {

                    #Base name of property
                    $propName = $_.Name;

                    #Object to process
                    $obj = $($Object.$propName)

                    # Get the type, and only recurse into it if it is not one of our excluded types
                    $type = ($obj.GetType()).ToString()

                    # Only recurse if it's not of a type in our list
                    if (!($typesToExclude.Contains($type) ) )
                    {

                        #Path to property
                        $childPathName = "$PathName.$propName"

                        # Make sure it's not null, then recurse, incrementing $Level                        
                        if ($obj -ne $null) 
                        {
                            Get-Properties -Object $obj -PathName $childPathName -Level ($Level + 1) -MaxLevels $MaxLevels }
                        }
                    }
    }

    if ($Level -eq 0) {$ErrorActionPreference = $oldErrorPreference}
    $props
} 
```

使用命令运行它时

```
Get-Properties -Object $v | ? {$_ -match "Host" } 
```

它返回

```
$_.Capability.HostBasedReplicationSupported
$_.Client.CertificateError.Method.DeclaringType.Assembly.HostContext
$_.Client.CertificateError.Method.Module.Assembly.HostContext
$_.Client.CertificateError.Method.ReflectedType.Assembly.HostContext
$_.Client.CertificateError.Method.ReturnType.Assembly.HostContext
$_.Client.ServiceContent.HostProfileManager
$_.Client.ServiceContent.HostProfileManager
$_.Client.ServiceContent.HostProfileManager.Type
$_.Client.ServiceContent.HostProfileManager.Value
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Hardware.Device.Backing.HostPointingDevice
$_.Config.Tools.SyncTimeWithHost
$_.Guest.HostName
$_.Guest.IpStack.DnsConfig.HostName
$_.Guest.Net.DnsConfig.HostName
$_.Runtime.Host
$_.Runtime.Host
$_.Runtime.Host.Type
$_.Runtime.Host.Value
$_.Summary.Guest.HostName
$_.Summary.QuickStats.HostMemoryUsage
$_.Summary.Runtime.Host
$_.Summary.Runtime.Host
$_.Summary.Runtime.Host.Type
$_.Summary.Runtime.Host.Value 
```

考虑到 VMware.Vim.VirtualMachine 对象有 5087 个嵌套属性，这是一种更容易找到所需内容的方法。希望这可以帮助别人。

# android - 为什么 android:listSelector 错误地从 Activity 更改为 Activity

> ID：14970085
> 
> 赞同：6
> 
> 时间：2013-02-20T00:14:42.510
> 
> 标签：android, listview, selector

重现步骤 - 这发生在 Android 4.2.2 上 - 我没有看到它发生在 Android 4.2.1

1.  回答几个问题，退出应用程序
2.  回到应用程序
3.  选择一个问题集 - 它是 holo_LIGHT_blue
4.  转到另一个活动（例如信息屏幕）并返回
5.  选择一个问题集 - 它是 holo_DARK_blue
6.  注意：我没有修改 android:list_selector，我使用的是默认 Android。

您是否认为系统正在缓存某些内容？

```
 <ListView
    android:id="@+id/landing_lv"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:cacheColorHint="@android:color/transparent"
    android:divider="@color/white_alpha"
    android:dividerHeight="1dip"
    android:scrollingCache="false"
    android:animationCache="false"
    android:drawSelectorOnTop="false"
    android:padding="0dip" /> 
```

如果您想尝试一下，这是该应用程序的 URL，但我认为无需下载即可回答该问题。[https://play.google.com/store/apps/details?id=com.txt2lrn.www](https://play.google.com/store/apps/details?id=com.txt2lrn.www)

![之前 - 浅蓝色](../Images/6a4d3aa1bfd5acfd269f89d910ee3ea5.png) ![后-深蓝色](../Images/5314d1b0ffc4f070646ac8accf98e5f0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:31:29.323

这可能是 Android 的一个错误，因为 Google Currents 也会出现同样的奇怪行为。注意左边是浅蓝色，右边是深蓝色。请注意，这发生在 Android 4.2.x 而不是 Android 4.3

提交的 Android 错误：[http ://code.google.com/p/android/issues/detail?id=50196](http://code.google.com/p/android/issues/detail?id=50196)

![前](../Images/a80ac0fbc3b2785f24dd9a4760f802fc.png) ![后](../Images/b8f574e7d031237a7dfe633c63155a08.png)

# bash - 像`ip`这样的工具的输出是否意味着被解析？

> ID：14970088
> 
> 赞同：3
> 
> 时间：2013-02-20T00:14:48.103
> 
> 标签：bash, unix, command-line, scripting

例如，Ubuntu `lxc-start-ephemeral`bash 脚本执行以下操作来检测正在启动的容器的 IP 地址：

```
# Grab all the public globally routed IPv4 and IPv6 addresses
(sudo ip netns exec $NAME ip -4 addr show scope global && \
 sudo ip netns exec $NAME ip -6 addr show scope global) | grep inet | while read line; do
    ip=$(echo $line | awk '{print $2}' | cut -d '/' -f1)
    echo "$ip"
done 
```

我个人不太喜欢这种方法，因为它需要大量摆弄字符串和输出。是否有一个编程 API 来访问相同的信息（不一定在 bash 中），或者它是否是“正确的方式”来总是使用类似的工具`ip`，并希望您的解析不会与同一工具的其他版本中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-07T13:02:42.897

还要考虑`/sys`（sysfs），例如`/sys/class/net/<device name>/...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:34:58.367

在 shell 脚本中，您倾向于通过解析文本来访问数据。这主要是因为 shell 代码只能真正操作字符串，还因为文本比二进制表示更便携。

但是，通常有 UI 命令和 API 命令，shell 脚本应该使用后者而不是前者。例如，您应该调用`stat`而不是尝试解析`ls -l`输出。或者可能有一个文件`/proc`包含您想要的信息，因此您根本不必运行命令 - 但该文件中的数据仍将是文本形式。

所以，是的 - 当您编写 shell 脚本时，您基本上会被困在为所有内容解析文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:31:58.937

## 使用 Proc 文件系统

如果您只是想要一种不同的方式来解析您的 IP 地址，您可以`/proc/net/arp`直接解析。你仍然需要解析出你想要的数据，但是只有当 Linux 内核改变了 proc 文件系统时，数据的格式才会改变。对于大多数目的来说，这似乎足够稳定，恕我直言。

# qt - 在没有用户交互的情况下启动窗口、处理数据并关闭它？

> ID：14970094
> 
> 赞同：0
> 
> 时间：2013-02-20T00:15:15.283
> 
> 标签：qt, qdialog, qprogressbar

程序首次启动时，有时需要更新组件。更新任务应该自动发生，无需任何用户交互。

我想显示一个简单的窗口来显示进度。完成后，窗口将关闭并启动主窗口。

我尝试使用 a `QDialog`，并将代价高昂的代码放在 init 函数中，但当然它只是挡住了窗口，直到它完成后才显示出来。

运行时没有发送信号`exec()`，所以我不能在执行 GUI 窗口后就开始处理事情。

`QProgressDialog`可能在这里工作，但我实际上想放不止一个进度条。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:02:00.490

有几个方法。其中之一是在 QDialog 事件循环开始后立即使用 QTimer 对您的进程进行排队：

```
QTimer::singleShot(0, this, SLOT(performUpdate());
dlg.exec(); 
```

Qt 文档中的重要内容：

> 一个超时间隔为 0 的 QTimer 将在窗口系统的事件队列中的所有事件都被处理后立即超时。

那么这里会发生什么？`performUpdate()`一旦控制回到事件循环，我们就会安排槽位执行。调用时`dlg.exec()`，您正在启动新的事件循环。因此，您的对话框将首先显示（因为它是窗口系统事件），然后在处理完所有内容后，您的插槽将被执行。

值得一提的是，当你执行阻塞槽时，你应该不时调用 QApplication::processEvents() 来更新 ui。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:08:16.007

在这种情况下，您可以使用任何窗口。让我们使用 QWidget：

1.  子类 QWidget（让我们将其命名为 MyWidget）并添加您需要的任何小部件作为子小部件。
2.  向 MyWidget 添加必要的插槽，从外部获取信息（更新进度条、文本标签等）
3.  创建另一个将进行计算（或您需要做的任何事情）的类（计算器），并向其添加必要的信号（您之前声明的插槽对）和退出信号

然后只需在您的主要内容中执行以下操作：

```
QApplication app(...);
QThread thread;
MyWidget widget;
Calculator calculator;
//connect here your slots and signals, do not forget about quit signal to QWidget close() slot
calculator.moveToThread(&thread);
thread.start();
return app.exec(); 
```

# php - 在 PHP 中的 file_get_contents 中 IPv4 回退之前失败的 AAAA 查找超时 10 秒

> ID：14970095
> 
> 赞同：1
> 
> 时间：2013-02-20T00:15:31.183
> 
> 标签：php, performance, dns, ipv6

PHP（或其子系统）将请求延迟 10 秒以尝试获取 AAAA 查找，然后再回退到 IPv4 并成功。我有 15 个以上的请求，所以这个问题导致 150 秒以上的时间只是等待 IPv6 查找失败。除了本地链接，客户端和远程主机都没有 IPv6 设置。

```
file_get_contents( $ipv4_address); # works in less than a second
file_get_contents( $fqdn_address); # takes ten–eleven seconds 
```

我看到的唯一可行的解​​决方法是在`gethostbyname( $fqdn_address );`将主机名发送到`file_get_contents()`. 我希望有一个更优雅的解决方案。

PS：这是在共享主机上，所以我对服务器配置和设置的控制很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:22:07.010

您可以尝试改用 curl，它可以强制使用 ipv4

```
curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 ); 
```

否则，它看起来像是要修复的服务器端设置或 php 重新编译，您显然无法在共享平台上执行此操作。

# asp.net - 在 asp.net 站点中添加博客

> ID：14970096
> 
> 赞同：0
> 
> 时间：2013-02-20T00:15:46.797
> 
> 标签：asp.net, blogs

我想在我的网站[asp.net] 中添加一个博客。我面临的问题是如何在数据库中构建博客导航和存储。

在这里更清楚一点。

**例子**

在导航到较旧的帖子时，地址栏会显示这个 [http://www.mono-1.com/us/page/2/](http://www.mono-1.com/us/page/2/)

在点击帖子时，链接会打开这个地址 [http://www.mono-1.com/us/kristoffer-returns-to-uptown/](http://www.mono-1.com/us/kristoffer-returns-to-uptown/)

为了在页面中打开帖子，我知道可以从数据库中获取特定数据并调整地址链接

我不遵循的是如何将固定数量的帖子添加到不同的页面[../page/2/] [../page/3/] 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:22:46.753

ASP.Net MVC 有路由引擎。

但是，在传统的 ASP.Net 中，您需要重写 url，例如[http://urlrewriter.net/](http://urlrewriter.net/)。

# asp.net-mvc-4 - 防伪令牌适用于用户“”，但当前用户是“用户名”

> ID：14970102
> 
> 赞同：137
> 
> 时间：2013-02-20T00:16:10.040
> 
> 标签：asp.net-mvc-4, membership-provider

我正在构建一个单页应用程序并遇到防伪令牌问题。

我知道为什么会出现问题，只是不知道如何解决。

发生以下情况时出现错误：

1.  未登录用户加载对话框（使用生成的防伪令牌）
2.  用户关闭对话框
3.  用户登录
4.  用户打开相同的对话框
5.  用户在对话框中提交表单

> 防伪令牌适用于用户“”，但当前用户是“用户名”

发生这种情况的原因是因为我的应用程序是 100% 单页的，当用户通过 ajax 帖子成功`/Account/JsonLogin`登录**到页。**

我知道这是原因，因为如果我在第 3 步和第 4 步之间简单地重新加载页面，就没有错误。

所以看起来`@Html.AntiForgeryToken()`在加载的表单中仍然会为旧用户返回一个令牌，直到页面重新加载。

**如何更改`@Html.AntiForgeryToken()`为新的经过身份验证的用户返回令牌？**

我在每次调用时都注入了一个新`GenericalPrincipal`的自定义项，事实上，我的自定义标识的属性设置为 true，但除非我重新加载页面，否则似乎仍会为旧用户呈现一个令牌。`IIdentity``Application_AuthenticateRequest``@Html.AntiForgeryToken()``HttpContext.Current.User.Identity``IsAuthenticated``@Html.AntiForgeryToken`

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-03-25T13:09:44.017

发生这种情况是因为防伪令牌将用户的用户名作为加密令牌的一部分嵌入，以便更好地验证。当您第一次调用时`@Html.AntiForgeryToken()`用户未登录，因此令牌将有一个空字符串作为用户名，在用户登录后，如果您不替换防伪令牌，它将不会通过验证，因为初始令牌用于匿名用户，现在我们有一个具有已知用户名的经过身份验证的用户。

你有几个选项来解决这个问题：

1.  就在这一次让你的 SPA 做一个完整的 POST，当页面重新加载时，它会有一个嵌入了更新用户名的防伪令牌。

2.  登录后立即查看部分视图`@Html.AntiForgeryToken()`，执行另一个 AJAX 请求并将现有的防伪令牌替换为请求的响应。

请注意，设置`AntiForgeryConfig.SuppressIdentityHeuristicChecks = true`不会禁用用户名验证，它只会更改验证的工作方式。请参阅[ASP.NET MVC 文档](https://docs.microsoft.com/en-us/aspnet/mvc/overview/security/xsrfcsrf-prevention-in-aspnet-mvc-and-web-pages#antiforgeryconfig)、读取该属性的源代码以及[验证](https://github.com/mono/aspnetwebstack/blob/6248bfd24c/src/System.Web.WebPages/Helpers/AntiXsrf/TokenValidator.cs#L65)[令牌](https://github.com/mono/aspnetwebstack/blob/6248bfd24c/src/System.Web.WebPages/Helpers/AntiXsrf/TokenValidator.cs#L125)中的用户名的源代码，而不管该配置的值如何。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-11-10T06:35:41.210

要修复该错误，您需要将`OutputCache`Data Annotation 放在 Get `ActionResult`of Login 页面上，如下所示：

```
[OutputCache(NoStore=true, Duration = 0, VaryByParam= "None")] 
public ActionResult Login(string returnUrl) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-06-23T15:04:09.320

我的应用程序经常发生这种情况，所以我决定用谷歌搜索它！

我找到了关于这个错误的简单解释！用户正在双击登录按钮！您可以在下面的链接中看到另一个用户在谈论这个问题：

[MVC 4 提供的防伪令牌用于用户“”，但当前用户是“用户”](https://stackoverflow.com/questions/20326990/mvc-4-provided-anti-forgery-token-was-meant-for-user-but-the-current-user-is)

我希望它有帮助！=)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-12-18T12:23:40.447

当您已经通过身份验证后登录时会出现该消息。

`[ValidateAntiForgeryToken]`这个 Helper 的作用与属性完全相同。

```
System.Web.Helpers.AntiForgery.Validate() 
```

从控制器中删除`[ValidateAntiForgeryToken]`属性并将此帮助器放在操作方法中。

因此，当用户已经通过身份验证时，重定向到主页，或者如果没有在此验证后继续验证有效的防伪令牌。

```
if (User.Identity.IsAuthenticated)
{
    return RedirectToAction("Index", "Home");
}

System.Web.Helpers.AntiForgery.Validate(); 
```

> 要尝试重现错误，请执行以下操作： 如果您在登录页面上并且您未通过身份验证。如果您复制选项卡并使用第二个选项卡登录。如果您返回登录页面上的第一个选项卡并尝试在不重新加载页面的情况下登录......您会遇到此错误。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-12-19T19:57:03.287

我遇到了同样的问题，这个肮脏的黑客得到了修复，至少在我能以更清洁的方式修复它之前。

```
 public ActionResult Login(string returnUrl)
    {
        if (AuthenticationManager.User.Identity.IsAuthenticated)
        {
            AuthenticationManager.SignOut();
            return RedirectToAction("Login");
        } 
```

...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-06T12:36:23.177

我在生产服务器上大部分时间都发生了同样的异常。

**为什么会这样？**

当用户使用有效凭据登录并且一旦登录并重定向到另一个页面，并且在他们按下后退按钮将显示登录页面并且他再次输入有效凭据时，就会发生这种异常。

**怎么解决？**

只需添加此行即可完美运行，不会出错。

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-12T11:48:10.877

我在注册过程中有一个相当具体但类似的问题。一旦用户单击发送给他们的电子邮件链接，他们就会登录并直接发送到帐户详细信息屏幕以填写更多信息。我的代码是：

```
 Dim result = Await UserManager.ConfirmEmailAsync(userId, code)
    If result.Succeeded Then
        Dim appUser = Await UserManager.FindByIdAsync(userId)
        If appUser IsNot Nothing Then
            Dim signInStatus = Await SignInManager.PasswordSignInAsync(appUser.Email, password, True, shouldLockout:=False)
            If signInStatus = SignInStatus.Success Then
                Dim identity = Await UserManager.CreateIdentityAsync(appUser, DefaultAuthenticationTypes.ApplicationCookie)
                AuthenticationManager.SignIn(New AuthenticationProperties With {.IsPersistent = True}, identity)
                Return View("AccountDetails")
            End If
        End If
    End If 
```

我发现 Return View("AccountDetails") 给了我令牌异常，我猜是因为 ConfirmEmail 函数用 AllowAnonymous 装饰，但 AccountDetails 函数有 ValidateAntiForgeryToken。

将 Return 更改为 Return RedirectToAction("AccountDetails") 为我解决了这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-03T08:38:38.837

```
[OutputCache(NoStore=true, Duration=0, VaryByParam="None")]

public ActionResult Login(string returnUrl) 
```

您可以通过在登录（获取）操作的第一行放置一个断点来测试这一点。在添加 OutputCache 指令之前，断点将在第一次加载时被命中，但在单击浏览器后退按钮后不会。添加指令后，您应该每次都会遇到断点，因此 AntiForgeryToken 将是正确的，而不是空的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-25T09:10:18.380

我在单页 ASP.NET MVC Core 应用程序中遇到了同样的问题。我通过设置`HttpContext.User`更改当前身份声明的所有控制器操作来解决它（因为 MVC 仅针对后续请求执行此操作，如此处所述[）](https://github.com/aspnet/Identity/issues/659)。我使用结果过滤器而不是中间件将防伪 cookie 附加到我的响应中，以确保它们仅在 MVC 操作返回后生成。

控制器（注意。我正在使用 ASP.NET Core Identity 管理用户）：

```
[Authorize]
[ValidateAntiForgeryToken]
public class AccountController : Controller
{
    private SignInManager<IdentityUser> signInManager;
    private UserManager<IdentityUser> userManager;
    private IUserClaimsPrincipalFactory<IdentityUser> userClaimsPrincipalFactory;

    public AccountController(SignInManager<IdentityUser> signInManager, UserManager<IdentityUser> userManager, IUserClaimsPrincipalFactory<ApplicationUser> userClaimsPrincipalFactory)
    {
        this.signInManager = signInManager;
        this.userManager = userManager;
        this.userClaimsPrincipalFactory = userClaimsPrincipalFactory;
    }

    [HttpPost]
    [AllowAnonymous]
    public async Task<IActionResult> Login(string username, string password)
    {
        if (username == null || password == null)
        {
            return BadRequest(); // Alias of 400 response
        }

        var result = await signInManager.PasswordSignInAsync(username, password, false, lockoutOnFailure: false);
        if (result.Succeeded)
        {
            var user = await userManager.FindByNameAsync(username);

            // Must manually set the HttpContext user claims to those of the logged
            // in user. Otherwise MVC will still include a XSRF token for the "null"
            // user and token validation will fail. (MVC appends the correct token for
            // all subsequent reponses but this isn't good enough for a single page
            // app.)
            var principal = await userClaimsPrincipalFactory.CreateAsync(user);
            HttpContext.User = principal;

            return Json(new { username = user.UserName });
        }
        else
        {
            return Unauthorized();
        }
    }

    [HttpPost]
    public async Task<IActionResult> Logout()
    {
        await signInManager.SignOutAsync();

        // Removing identity claims manually from the HttpContext (same reason
        // as why we add them manually in the "login" action).
        HttpContext.User = null;

        return Json(new { result = "success" });
    }
} 
```

附加防伪 cookie 的结果过滤器：

```
public class XSRFCookieFilter : IResultFilter
{
    IAntiforgery antiforgery;

    public XSRFCookieFilter(IAntiforgery antiforgery)
    {
        this.antiforgery = antiforgery;
    }

    public void OnResultExecuting(ResultExecutingContext context)
    {
        var HttpContext = context.HttpContext;
        AntiforgeryTokenSet tokenSet = antiforgery.GetAndStoreTokens(context.HttpContext);
        HttpContext.Response.Cookies.Append(
            "MyXSRFFieldTokenCookieName",
            tokenSet.RequestToken,
            new CookieOptions() {
                // Cookie needs to be accessible to Javascript so we
                // can append it to request headers in the browser
                HttpOnly = false
            } 
        );
    }

    public void OnResultExecuted(ResultExecutedContext context)
    {

    }
} 
```

Startup.cs 提取：

```
public partial class Startup
{
    public Startup(IHostingEnvironment env)
    {
        //...
    }

    public IConfigurationRoot Configuration { get; }

    public void ConfigureServices(IServiceCollection services)
    {

        //...

        services.AddAntiforgery(options =>
        {
            options.HeaderName = "MyXSRFFieldTokenHeaderName";
        });

        services.AddMvc(options =>
        {
            options.Filters.Add(typeof(XSRFCookieFilter));
        });

        services.AddScoped<XSRFCookieFilter>();

        //...
    }

    public void Configure(
        IApplicationBuilder app,
        IHostingEnvironment env,
        ILoggerFactory loggerFactory)
    {
        //...
    }
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-02-28T09:59:47.670

网上商店中的防伪令牌验证存在问题：用户打开许多选项卡（带有商品）并在登录后尝试登录另一个并得到这样的 AntiForgeryException。所以， AntiForgeryConfig.SuppressIdentityHeuristicChecks = true 对我没有帮助，所以我使用了如此丑陋的hackfix，也许它会对某人有所帮助：

```
 public class ExceptionPublisherExceptionFilter : IExceptionFilter
{
    public void OnException(ExceptionContext exceptionContext)
    {
        var exception = exceptionContext.Exception;

        var request = HttpContext.Current.Request;
        if (request != null)
        {
            if (exception is HttpAntiForgeryException &&
                exception.Message.ToLower().StartsWith("the provided anti-forgery token was meant for user \"\", but the current user is"))
            {
                var isAjaxCall = string.Equals("XMLHttpRequest", request.Headers["x-requested-with"], StringComparison.OrdinalIgnoreCase);
                var returnUrl = !string.IsNullOrWhiteSpace(request["returnUrl"]) ? request["returnUrl"] : "/";
                var response = HttpContext.Current.Response;

                if (isAjaxCall)
                {
                    response.Clear();
                    response.StatusCode = 200;
                    response.ContentType = "application/json; charset=utf-8";
                    response.Write(JsonConvert.SerializeObject(new { success = 1, returnUrl = returnUrl }));
                    response.End();
                }
                else
                {
                    response.StatusCode = 200;
                    response.Redirect(returnUrl);
                }
            }
        }

        ExceptionHandler.HandleException(exception);
    }
}

public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new ExceptionPublisherExceptionFilter());
        filters.Add(new HandleErrorAttribute());
    }
} 
```

认为如果可以设置防伪令牌生成选项，排除用户名或类似的东西，那就太好了。

# autohotkey - AutoHotkey 脚本正在禁用 numpad 0 键？

> ID：14970107
> 
> 赞同：0
> 
> 时间：2013-02-20T00:17:04.647
> 
> 标签：autohotkey

我目前正在尝试为 ahk 编写脚本，我以为我终于让它工作了，但现在我的 numpad 0 似乎被禁用了。这是我正在使用的脚本：

```
Numpad0 & Left::Run C:\Program Files\Virtual Audio Cable\VAC bat\Line 1 to Hdpn.bat

Numpad0 & Right::Run C:\Program Files\Virtual Audio Cable\VAC bat\Line 1 to Multi.bat

Numpad0 & Up::Run C:\Program Files\Virtual Audio Cable\VAC bat\Stop Repeaters.bat

Numpad0 & Down::Run C:\Program Files\Virtual Audio Cable\VAC bat\Line 1 to Spkr.bat 
```

我只是想在同时按下的小键盘上运行一些与箭头键和 0 相对应的 .bat 文件。然而，尽管这些命令执行了我想要的功能，但它们实际上禁止从小键盘输入零！如何在我的脚本中解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:22:40.617

只需添加：

```
~Numpad0::return 
```

给你代码。

# python - Python：如果导入成功，__file__ 可以为 None 吗？

> ID：14970109
> 
> 赞同：7
> 
> 时间：2013-02-20T00:17:09.137
> 
> 标签：python, import

我正在编写包含以下内容的 Python 2.6/2.7 代码：

```
try:
    import gmpy
    gmpy_imported=True
except ImportError:
    gmpy_imported=False

if gmpy_imported and gmpy.__file__ is None:
    gmpy_imported=False 
```

我可以理解这`try-except`部分，它用于查看系统上是否安装了 gmpy——如果没有，则执行任何操作。但是，我不明白为什么`if gmpy.__file__ is None`需要进行检查；这似乎是多余的。

是否存在导入包看似成功，但包的路径实际上为空的情况？这是对损坏的安装进行仔细检查的故障保护吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:25:03.337

这个检查没有意义。如果模块/包已成功导入，`__file__`则永远不会没有，它将是模块的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T00:26:34.193

文档说“`__file__`静态链接到解释器的 C 模块不存在该属性”，所以我认为它是多余的。此外，它有什么不同，模块对象就在那里。

# java - 如何重命名现有文件？

> ID：14970110
> 
> 赞同：4
> 
> 时间：2013-02-20T00:17:08.897
> 
> 标签：java, android, file

我有 2 个文件，`File src = new File("loc/xyz.mp3")`现在`File dst=new File("loc/xyz1.mp3")` ，我想在删除文件时重命名`dst`为 xyz.mp3 。`src`我怎样才能做到这一点？我在尝试，

```
src.delete();
dst.renameTo(src); 
```

我在我的应用程序的后台在 AsyncTask 中运行它，当我第一次执行它时，它运行良好，但是第二次，它崩溃了。请帮助我该怎么做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T00:34:08.283

尝试做：

```
new File("loc/xyz1.mp3").renameTo(new File("loc/xyz.mp3")); 
```

这应该会自动覆盖原始文件。这个答案取自这里：[如何重命名现有文件](https://stackoverflow.com/questions/2804105/how-to-rename-an-existing-file?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:43:30.510

您应该使用 重命名文件`Files`，它比`renameTo()`.

```
Path source = currentFile.toPath();
try {
     Files.move(source, source.resolveSibling(formattedName));
} catch (IOException e) {
     e.printStackTrace();
} 
```

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move(java.nio.file.Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move(java.nio.file.Path) , java.nio.file.Path, java.nio. file.CopyOption...)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T00:44:12.533

文档说：

> 重命名此抽象路径名表示的文件。
> 
> 此方法的行为的许多方面本质上是平台相关的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，并且如果具有目标抽象路径名的文件可能不会成功已经存在。应始终检查返回值以确保重命名操作成功。

在`AsyncTask`中，你不能保证`src`和`dst`，正如@Machinarius 所说，检查`src.exists() && dst.exists()`可能会避免你的错误。使用`deleteOnExit`也是一个很好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:27:08.613

在第二次运行`dst`时文件系统中不存在，你应该`if (src.exists() && dst.exists())`对你的代码进行检查以避免错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T00:29:32.517

这两个 delete() 和 renameTo() 将根据其执行结果返回 true 或 false。如果上一步成功并且文件实际上存在于给定路径中，您可能需要添加条件检查。

# ruby - 如何检测文件类型？

> ID：14970116
> 
> 赞同：-1
> 
> 时间：2013-02-20T00:18:05.240
> 
> 标签：ruby, file-type

`file`命令说文件类型，但如果文件是文本，它会说“ASCII文本”。但是我想知道它是什么*类型*的文本，例如 Ruby 脚本、Python 脚本、C++ 文件等。我想用 Ruby 来做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:24:01.483

### 你不能可靠地做到这一点。

但是，您可以通过查看第一[行 (hashbang)](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)中的解释器名称来相当确定。（例如`#!/usr/bin/python`,`#!/usr/bin/env ruby`等）

然而，一般来说，不可能做到可靠。例如，考虑以下程序：

```
print "Hello, World!" 
```

是 Python 吗？还是红宝石？还是 Perl？-- 它是所有这些语言的有效程序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:32:17.460

你不能可靠地做到这一点，但你能得到的最接近的可能是查看程序在给定语言的语法上是否正确。请注意，这会产生误报！[@maerics 的示例](https://stackoverflow.com/a/14970189/211563)就是`print "Hello, World!"`其中之一，简单的空文件情况也是如此（可能所有语法检查器都可以通过）。您可以通过仅猜测是否只有一个语法检查器说没问题来减少这种情况。

以下是仅检查您提供的语言的语法的方法（更多信息，[Syntastic Vim 插件](https://github.com/scrooloose/syntastic/tree/master/syntax_checkers)是一个很好的参考）：

*   C++：（`$CC -x c++ -fsyntax-only myfile`替换`$CC`为您喜欢的编译器，此命令兼容 Clang 和 GCC。）

*   红宝石：`ruby -c myfile`

*   Python：`python -m py_compile myfile`

通常，您可以只检查此命令的退出代码，在 Ruby 中，您可以通过传递要运行的命令[`system`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)并检查返回值是否为真来做到这一点。

# vim - 进入参数列表时如何避免vim全功能菜单关闭？

> ID：14970119
> 
> 赞同：1
> 
> 时间：2013-02-20T00:18:18.137
> 
> 标签：vim, parameters, omnicomplete

我正在积极地将它用于`Python`和`C++`开发，当我输入函数括号时，菜单总是在我身上关闭，这有点令人沮丧，因为这通常是我需要大部分帮助（参数的类型和顺序）的时候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:35:18.023

Vim 的*全能补全*与 IDE 中的*Intellisense*不完全一样；它有助于完成标识符或函数名称，但没有函数参数及其类型的概念。这意味着：它可以帮助你打字`frobnize`，甚至可以显示函数原型`frobnize(Foo, Bar)`，但不能帮助你完成函数参数。为此，完成函数需要考虑完整的底层语法和先前的上下文，而大多数人都没有。

一些补全提供的唯一帮助是函数原型显示在预览窗口中（带有`:set completeopt+=preview`，这是默认值）。完成后预览窗口保持打开状态，因此您仍然可以看到最后一个函数原型。但是，并非所有完成都提供此信息。

# c# - 解析日期时间 HHmmss

> ID：14970120
> 
> 赞同：1
> 
> 时间：2013-02-20T00:18:22.007
> 
> 标签：c#, winforms, parsing, datetime

好吧，最近我试图解析这个时间 24:14:38 必须是 12:14:38 AM

到目前为止，这是我的功能

```
private static DateTime ParseDate(string time)
{
    DateTime result;
    if (!DateTime.TryParse(time, out result))
    {
        result = DateTime.ParseExact(time, "HHmmss", System.Globalization.CultureInfo.InvariantCulture);
    }
    return result;
} 
```

这是它的使用方法

```
 var time = "24:14:38";
    var result = ParseDate(time.Replace(":", ""));
    Console.WriteLine(result); 
```

但是我不断收到此错误

> 日历 System.Globalization.GregorianCalendar 不支持字符串表示的 DateTime。

已解决 24 在 24 小时制中无效，我应该使用 00:14:38

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:20:01.383

简单的。以“24”作为小时值的时间字符串不是有效的时间字符串。

有效时间的小时值是 1-12 表示 12 小时制，或 0-23 表示 24 小时制。

# node.js - 在 Jade 视图中提取段落标签之间的文本

> ID：14970121
> 
> 赞同：0
> 
> 时间：2013-02-20T00:18:23.073
> 
> 标签：node.js, pug, express

我尝试在 Jade 视图中提取段落标记之间的文本，但它不起作用。

我的主题：

```
<p> My content. </p> <img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTJ9ylGJ4SDyl49VGh9Q9an2vruuMip-VIIEG38DgGM3GvxEi_H"> <p> Second sentence. </p> 
```

翡翠观：

```
- var content = post.content.slice('/<p>(.*?)<\/p>/g');
p #{content} 
```

结果：

```
< 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:23:12.743

为什么你需要在服务器端的段落标签之间提取文本？

这将是我们在客户端 js 上做的事情

* * *

在您的情况下，`context`应该是您通过`res.render('view', {context : "My content."})`或传递给玉视图的参数`res.locals`

所以你可以处理你`#{context}`的玉观

如果你想`context`在 Jade 视图中声明变量

它应该像

> -var context="我的内容。"
> 
> p #{内容}

* * *

### 回复`jsdom`代码

在你的代码中

`posts[i]`未定义。

我想你想迭代帖子，所以你应该在`iterator`这里使用

你可以`async`在这里使用模块

在这种情况下，`map`非常适合

有关文档，请参见此处 ->[异步映射](https://github.com/caolan/async#maparr-iterator-callback)

```
Creation.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success(function(creations) {
    Post.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success(function(posts){

async.map(posts, function(postEntity, callback){
jsdom.env(
            postEntity.content,
            ["http://code.jquery.com/jquery.js"],
            function(errors, window) {
                //deal with errors
                if(errors) return callback(errors);

                postEntity.content = window.$("p").text();
                callback(null, postEntity);
            }
        );
}, function(err, transformedPosts){
    if(err) return callback(err);
    res.render('index', {
        creations: creations,
        posts: transformedPosts,
        title: "Anthony Cluse | Portfolio"
    });
});

});
}); 
```

仅供参考，您应该使用控制流库来管理您的回调代码

否则真的很难维护

我建议`async`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:59:00.340

```
var i = 0;
Creation.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success( function(creations) {
    Post.findAll({where: "state = 1",order: 'id DESC', limit: 2}).success(function(posts){
        console.log(posts[i].content);
        jsdom.env(
            posts[i].content,
            ["http://code.jquery.com/jquery.js"],
            function(errors, window) {
                posts[i].content = window.$("p").text();
            }
        );
        i++;
        res.render('index', {
            creations: creations,
            posts: posts,
            title: "Anthony Cluse | Portfolio"
        });
    });
}); 
```

# javascript - 从对象内部访问父对象

> ID：14970133
> 
> 赞同：0
> 
> 时间：2013-02-20T00:19:36.757
> 
> 标签：javascript, object, prototypejs

我想知道是否有一种优雅的方式来执行以下代码，而不必先调用父对象“that”。如果我尝试在 ajax 请求中使用“this”，它显然会引用 Ajax 对象。

至少这就是我认为的意思。

```
var ObjectA = Class.create();

ObjectA.prototype = {
  initialize: function() {
  //Workaround I use
  that = this;
  },

getData: function(bounds) {
  //ajax to get some data       
  url = "http://www.data.com/";     

  new Ajax.Request(url, {
    method: 'get',
    onSuccess: function(response) {
    // Handle the response content...
    that.workData(response.responseText);
    //THIS IS MY DOUBT.
    //How do I access the parent object without having to previously calling it "that" first?
    }
  });

},
workData: function(data){
//do something with the data
}

} 

var test = new ObjectA();
test.getData(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:25:06.323

好吧 ..从内部开始`that`是不可访问的，因为它的范围与. 重命名非常常见，因此它可以在内部范围上下文中使用，并且您最终可能想要使用上下文中应该存在的任何内容，但是既然您问过：`getData``initialize``this``this``onSuccess`

```
onSuccess: function (response) {
    //this is now ObjectA
}.bind(this); 
```

在行动：http: [//jsfiddle.net/ExplosionPIlls/hY3Ca/](http://jsfiddle.net/ExplosionPIlls/hY3Ca/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:26:53.740

使用[`bind()`](http://prototypejs.org/doc/latest/language/Function/prototype/bind/)：

```
...
onSuccess: function(response) {
   this.workData(response.responseText);
}.bind(this)
... 
```

# javascript - 如何将 AJAX 返回的字符串转换为 javascript 对象数组

> ID：14970134
> 
> 赞同：1
> 
> 时间：2013-02-20T00:19:39.133
> 
> 标签：javascript, jquery, ajax, coldfusion

我正在使用 jqGrid 并想使用 Coldfusion 的 ajax 返回来构建 colModel 数组。

当我像下面这样在客户端上创建数组 cm 时，它可以工作。

```
function subTab(obj,id,tab){
var param={id:id,tab:tab}
http('POST','cfc/view/'+obj+'.cfc?method=view',subTab_RTN,param);
}
function subTab_RTN(obj){
$("#detail").html(obj.html);
if(obj.grid.display){
var cm;
switch(obj.grid.tab){
case "docs":
cm=[{name:'contactID',index:'contactID',hidden:true},
{name:'docName',index:'docName',width:200,label:'Document Name'},
{name:'docType',index:'docType',width:200,label:'Document Type'},
{name:'campaign',index:'campaign',width:200,label:'Campaign'},
{name:'campaignCode',index:'campaignCode',width:125,label:'Campaign Code'},
{name:'campaignType',index:'campaignType',width:125,label:'Campaign Type'},
{name:'downloadDate',index:'downloadDate',width:125,label:'Download     Date',formatter:'date'}];
break;
}
$("#subTabGridTbl").jqGrid({
url:obj.grid.url, 
datatype: "json", 
colModel:cm,
... 
```

但是，我更愿意在服务器上创建数组，例如：

```
 <cfset rtn.grid.cols="[{name:'contactID',index:'contactID',hidden:true},
 {name:'docName',index:'docName',width:200,label:'Document Name'},
 {name:'docType',index:'docType',width:200,label:'Document Type'},
 {name:'campaign',index:'campaign',width:200,label:'Campaign'},
 {name:'campaignCode',index:'campaignCode',width:125,label:'Campaign Code'},
 {name:'campaignType',index:'campaignType',width:125,label:'Campaign Type'},
 {name:'downloadDate',index:'downloadDate',width:125,label:'Download Date',formatter:'date'}]" /> 
```

然后使用返回的 obj (obj.grid.cols) 构建数组。

谢谢你的帮助。加里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:23:58.360

[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)大多数主流浏览器都[支持](http://caniuse.com/json)。如果你需要支持 IE7 及以下，相信你可以使用[`jQuery.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)得到同样的结果。这两种方法都需要格式良好的 JSON 字符串。

顺便说一句，我建议将您的数组创建为结构的本机 CF 数组，然后使用[`serializeJSON()`](http://cfdocs.org/serializejson)将其转换为 JSON 字符串。这将有助于最大限度地减少您尝试手动编写 JSON 字符串时遇到的任何问题。

# verilog - Verilog中多个模块的总线输入和输出

> ID：14970138
> 
> 赞同：0
> 
> 时间：2013-02-20T00:19:47.443
> 
> 标签：verilog

我正在创建一个模块 xxx 16 次，每个模块都有一个 16 位总线输入和 1 位输出。

```
wire [15:0]    a[0:15];
wire [0:15]    o;
genvar i;
generate
for(i=0; i<16; i=i+1) begin: n_loop
  xxx yy(
    .in    (a[i]);
    .out   (o[i]);
  );
  end
endgenerate 
```

这会将所有`a0`...`a14`线总线连接到 16 个模块的每个 16 位，并且模块输出也将连接到 o 总线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:18:27.820

我不知道你的模块 xxx 是什么样子，所以很难评论它的实例化。我希望您已经实现了某种类型的多路复用器来选择您在线路 o 上拥有的单个位。

你的问题有点令人困惑，但如果我认为你想要一个 16 位输入和一个 1 位输出，你想要这样的东西：

```
wire [15:0]    a[0:15];
wire o;
genvar i;
generate
for(i=0; i<16; i=i+1) begin: n_loop
// o would only be one bit selected by mux in your xxx module
  xxx yy(.in(a[i]), .out(o));
  end
endgenerate 
```

这就是你的问题的意思吗？

如果不只是留下更具描述性的评论，我会尽力提供帮助！

# java - 如何使用 VRaptor 在 Heroku 中进行部署

> ID：14970139
> 
> 赞同：2
> 
> 时间：2013-02-20T00:19:47.970
> 
> 标签：java, vraptor

在开发环境（使用Eclipse）中使用VRaptor开发项目没有问题。

但是，当尝试在 Heroku 上进行部署时，会发生错误，我无法在开发环境中进行游戏。

```
2013-02-13T13:36:01+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-13T13:36:05+00:00 heroku[web.1]: Starting process with command `${PRE_JAVA}java ${JAVA_OPTS} -jar webapp-runner-7.0.34.0.jar --port ${PORT} ${WEBAPP_RUNNER_OPTS} teste.war`
2013-02-13T13:36:06+00:00 app[web.1]: Adding Context / for teste.war
2013-02-13T13:36:08+00:00 app[web.1]: Feb 13, 2013 1:36:08 PM org.apache.coyote.AbstractProtocol init
2013-02-13T13:36:08+00:00 app[web.1]: INFO: Initializing ProtocolHandler ["http-nio-57620"]
2013-02-13T13:36:08+00:00 app[web.1]: Feb 13, 2013 1:36:08 PM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector
2013-02-13T13:36:08+00:00 app[web.1]: INFO: Using a shared selector for servlet write/read
2013-02-13T13:36:08+00:00 app[web.1]: Feb 13, 2013 1:36:08 PM org.apache.catalina.core.StandardService startInternal
2013-02-13T13:36:08+00:00 app[web.1]: INFO: Starting service Tomcat
2013-02-13T13:36:08+00:00 app[web.1]: Feb 13, 2013 1:36:08 PM org.apache.catalina.core.StandardEngine startInternal
2013-02-13T13:36:08+00:00 app[web.1]: INFO: Starting Servlet Engine: Apache Tomcat/7.0.34
2013-02-13T13:36:09+00:00 app[web.1]: Feb 13, 2013 1:36:09 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
2013-02-13T13:36:09+00:00 app[web.1]: INFO: validateJarFile(/app/target/tomcat.57620/work/Tomcat/localhost/_/WEB-INF/lib/servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
2013-02-13T13:36:09+00:00 app[web.1]: Feb 13, 2013 1:36:09 PM org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment
2013-02-13T13:36:09+00:00 app[web.1]: INFO: No global web.xml found
2013-02-13T13:36:09+00:00 heroku[web.1]: State changed from starting to up
2013-02-13T13:36:17+00:00 app[web.1]: log4j:ERROR No appender named [rolling-file] could be found.
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,288  INFO [BasicConfiguration  ] Using class br.com.caelum.vraptor.ioc.spring.SpringProvider as Container Provider
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,288 [localhost-startStop-1] INFO  BasicConfiguration - Using class br.com.caelum.vraptor.ioc.spring.SpringProvider as Container Provider
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,303  INFO [DefaultSpringLocator] No application context found
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,303 [localhost-startStop-1] INFO  DefaultSpringLocator - No application context found
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,367  INFO [BasicConfiguration  ] br.com.caelum.vraptor.scanning = null
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,367 [localhost-startStop-1] INFO  BasicConfiguration - br.com.caelum.vraptor.scanning = null
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,367  INFO [WebAppBootstrapFactory] Dynamic WebAppBootstrap found.
2013-02-13T13:36:17+00:00 app[web.1]: 13:36:17,367 [localhost-startStop-1] INFO  WebAppBootstrapFactory - Dynamic WebAppBootstrap found.
2013-02-13T13:36:17+00:00 app[web.1]: Feb 13, 2013 1:36:17 PM org.apache.catalina.core.StandardContext filterStart
2013-02-13T13:36:17+00:00 app[web.1]: SEVERE: Exception starting filter vraptor
2013-02-13T13:36:17+00:00 app[web.1]: br.com.caelum.vraptor.scan.ScannerException: Could not determine WEB-INF/classes location
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.WebBasedClasspathResolver.findWebInfClassesLocation(WebBasedClasspathResolver.java:58)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.ScannotationComponentScanner.scan(ScannotationComponentScanner.java:50)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.WebAppBootstrapFactory.scannerFor(WebAppBootstrapFactory.java:81)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.WebAppBootstrapFactory.create(WebAppBootstrapFactory.java:51)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.ioc.spring.SpringProvider.start(SpringProvider.java:83)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.VRaptor.init(VRaptor.java:108)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.VRaptor.init(VRaptor.java:102)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:278)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:259)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:383)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:104)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
2013-02-13T13:36:17+00:00 app[web.1]:  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
2013-02-13T13:36:17+00:00 app[web.1]:  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
2013-02-13T13:36:17+00:00 app[web.1]:  at java.util.concurrent.FutureTask.run(FutureTask.java:166)
2013-02-13T13:36:17+00:00 app[web.1]:  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
2013-02-13T13:36:17+00:00 app[web.1]:  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
2013-02-13T13:36:17+00:00 app[web.1]:  at java.lang.Thread.run(Thread.java:636)
2013-02-13T13:36:17+00:00 app[web.1]: Caused by: br.com.caelum.vraptor.scan.ScannerException: Could not locate web.xml. Please use the proper argument in command-line.
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.StandaloneClasspathResolver.getWebxml(StandaloneClasspathResolver.java:139)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.StandaloneClasspathResolver.findWebInfClassesLocation(StandaloneClasspathResolver.java:72)
2013-02-13T13:36:17+00:00 app[web.1]:  at br.com.caelum.vraptor.scan.WebBasedClasspathResolver.findWebInfClassesLocation(WebBasedClasspathResolver.java:55)
2013-02-13T13:36:17+00:00 app[web.1]:  ... 20 more
2013-02-13T13:36:17+00:00 app[web.1]: Feb 13, 2013 1:36:17 PM org.apache.catalina.core.StandardContext startInternal
2013-02-13T13:36:17+00:00 app[web.1]: SEVERE: Error filterStart
2013-02-13T13:36:17+00:00 app[web.1]: Feb 13, 2013 1:36:17 PM org.apache.catalina.core.StandardContext startInternal
2013-02-13T13:36:17+00:00 app[web.1]: SEVERE: Context [/] startup failed due to previous errors
2013-02-13T13:36:17+00:00 app[web.1]: SEVERE: Context [/] failed in [org.apache.catalina.core.StandardContext] lifecycle. Allowing Tomcat to shutdown.
2013-02-13T13:36:17+00:00 app[web.1]: Feb 13, 2013 1:36:17 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
2013-02-13T13:36:17+00:00 app[web.1]: SEVERE: The web application [/] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
2013-02-13T13:36:17+00:00 app[web.1]: Feb 13, 2013 1:36:17 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
2013-02-13T13:36:17+00:00 app[web.1]: SEVERE: The web application [/] appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak.
2013-02-13T13:36:17+00:00 app[web.1]: Feb 13, 2013 1:36:17 PM org.apache.coyote.AbstractProtocol start
2013-02-13T13:36:17+00:00 app[web.1]: INFO: Starting ProtocolHandler ["http-nio-57620"]
2013-02-13T13:36:19+00:00 heroku[web.1]: Process exited with status 0
2013-02-13T13:36:19+00:00 heroku[web.1]: State changed from up to crashed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:21:48.263

您需要在生成战争之前生成静态扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:32:30.330

我还没有尝试将 Heroku 与 Vraptor 一起使用。但是你可以通过查看这个[vraptor-blank-project](https://github.com/dennysfredericci/vraptor-blank-project-heroku)创建来部署在 heroku 中获得一些帮助。我希望它对你有帮助。

# f# - 类型初始化程序上的 NullReferenceException

> ID：14970144
> 
> 赞同：2
> 
> 时间：2013-02-20T00:20:02.933
> 
> 标签：f#, mono, monodevelop

我在以下代码中使用 F# 类型和数据结构（我在 Mac 上使用 Monodevelop，这仅在 Interactive 中发生）：

```
type UnbalancedSet<'a> =
    | E
    | T of UnbalancedSet<'a> * 'a * UnbalancedSet<'a>

let rec insert x = function
    | E -> T(E, x, E)
    | T(a, y, b) as s -> 
        if x < y then T(insert x a, y, b)
        elif x > y then T(a, y, insert x b)
        else s 
```

它适用于简单类型，如 ints 浮点数和字符，但是当涉及字符串或元组时，它会给出以下错误：

```
let a = insert (3, 9) E;;

System.TypeInitializationException: An exception was thrown by the type initializer for UnbalancedSet`1 ---> System.NullReferenceException: Object reference not set to an instance of an object
  at FSI_0004+UnbalancedSet`1[System.Tuple`2[System.Int32,System.Int32]]..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at <StartupCode$FSI_0004>.$FSI_0004.main@ () [0x00000] in <filename unknown>:0 
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
Stopped due to error 
```

我不明白发生了什么事。我希望这段代码能够工作，因为类型是可比较的。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:22:36.127

这看起来像一个 MonoDevelop 问题——我可以在 VS2010 的 F# Interactive 中很好地运行您的示例代码：

```
> let a = insert (3, 9) E;;

val a : UnbalancedSet<int * int> = T (E,(3, 9),E) 
```

除非其他人遇到同样的问题并在此处发布解决方案，否则您应该尝试将其发布到 MonoDevelop 邮件列表和/或询问 GIMPnet IRC 上的#monodevelop 频道。

[http://monodevelop.com/index.php?title=Help_%26_Contact](http://monodevelop.com/index.php?title=Help_%26_Contact)

# ruby - 编译 Ruby-1.9.3 时出错

> ID：14970146
> 
> 赞同：3
> 
> 时间：2013-02-20T00:20:05.897
> 
> 标签：ruby, compiler-errors

我在我的 linux 机器（Redhat）上编译 Ruby-1.9.3 时遇到问题。

我尝试使用 RVM 并得到以下错误：

```
compiling regparse.c
compiling regsyntax.c
compiling ruby.c
compiling safe.c
compiling signal.c
compiling sprintf.c
compiling st.c
compiling strftime.c
compiling string.c
compiling struct.c
compiling time.c
compiling transcode.c
compiling util.c
compiling variable.c
compiling compile.c
compiling debug.c
compiling iseq.c
compiling vm.c
In file included from vm.c:27:
vm_method.c: In function ‘rb_gc_mark_unlinked_live_method_entries’:
vm_method.c:102: warning: unused variable ‘curr_ume’
vm_method.c:102: warning: unused variable ‘prev_ume’
compiling vm_dump.c
compiling thread.c
/tmp/ccsuOCyc.s: Assembler messages:
/tmp/ccsuOCyc.s:243: Error: Incorrect register `%rax' used with `l' suffix
/tmp/ccsuOCyc.s:268: Error: Incorrect register `%rdx' used with `l' suffix
/tmp/ccsuOCyc.s:9562: Error: Incorrect register `%rax' used with `l' suffix
/tmp/ccsuOCyc.s:14547: Error: Incorrect register `%rax' used with `l' suffix
make: *** [thread.o] Error 1 
```

我也尝试手动部署 ruby​​，但下载源 tarball 并运行 configure/make 等并在编译 thread.c 时得到相同的错误

任何想法可能是什么问题？我尝试删除 rvm/ruby 并多次重做，但无济于事。任何帮助，将不胜感激！

添加更多信息：

$gcc -v

```
Using built-in specs.
Target: x86_64-redhat-linux
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --enable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=x86_64-redhat-linux
Thread model: posix
gcc version 4.1.2 20080704 (Red Hat 4.1.2-46) 
```

$uname -a

```
Linux <machine name> 2.6.18-164.el5 #1 SMP Thu Sep 3 03:28:30 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux 
```

$cat 生成文件

```
SHELL = /bin/sh
NULLCMD = :
RUNCMD = $(SHELL)
CHDIR = cd -P
exec = exec
NULL = /dev/null

#### Start of system configuration section. ####

srcdir = .
top_srcdir = $(srcdir)
hdrdir = $(srcdir)/include

CC = gcc
CPP = $(CC) -E
YACC = bison
PURIFY =
AUTOCONF = autoconf

MKFILES = Makefile
BASERUBY = echo executable host ruby is required.  use --with-baseruby option.; false
TEST_RUNNABLE = yes
DOXYGEN = 

prefix = /usr/local
exec_prefix = ${prefix}
bindir = ${exec_prefix}/bin
sbindir = ${exec_prefix}/sbin
libdir = ${exec_prefix}/lib
libexecdir = ${exec_prefix}/libexec
datarootdir = ${prefix}/share
datadir = ${datarootdir}
arch = x86_64-linux
sitearch = ${arch}
sitedir = ${rubylibprefix}/site_ruby
ruby_version = 1.9.1

TESTUI = console
TESTS =
INSTALLDOC = nodoc
DOCTARGETS = nodoc nodoc

EXTOUT = .ext
arch_hdrdir = $(EXTOUT)/include/$(arch)
VPATH = $(arch_hdrdir)/ruby:$(hdrdir)/ruby:$(srcdir)/enc:$(srcdir)/missing

empty =
OUTFLAG = -o $(empty)
COUTFLAG = -o $(empty)
ARCH_FLAG = 
CFLAGS = ${cflags}  -fPIC
cflags =  ${optflags} ${debugflags} ${warnflags}
optflags = -O3
debugflags = -ggdb
warnflags = -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Werror-implicit-function-declaration
INCFLAGS = -I. -I$(arch_hdrdir) -I$(hdrdir) -I$(srcdir)
XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
CPPFLAGS =  $(DEFS) ${cppflags} $(INCFLAGS)
LDFLAGS =  $(CFLAGS) -L.  -rdynamic -Wl,-export-dynamic
EXTLDFLAGS = 
XLDFLAGS =  $(EXTLDFLAGS)
EXTLIBS = 
LIBS = -lpthread -lrt -ldl -lcrypt -lm  $(EXTLIBS)
MISSING =  ${LIBOBJDIR}strlcpy.o ${LIBOBJDIR}strlcat.o ${LIBOBJDIR}setproctitle.o ${LIBOBJDIR}addr2line.o 
LDSHARED = $(CC) -shared
DLDFLAGS = -Wl,-soname,lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR) $(EXTLDFLAGS) $(ARCH_FLAG)
SOLIBS = $(LIBS)
MAINLIBS = 
ARCHMINIOBJS = dmydln.o
BUILTIN_ENCOBJS =  ascii.$(OBJEXT) us_ascii.$(OBJEXT) unicode.$(OBJEXT) utf_8.$(OBJEXT)
BUILTIN_TRANSSRCS =  newline.c
BUILTIN_TRANSOBJS =  newline.$(OBJEXT)

RUBY_BASE_NAME=ruby
RUBY_PROGRAM_VERSION=1.9.3
RUBY_INSTALL_NAME=$(RUBY_BASE_NAME)
RUBY_SO_NAME=$(RUBY_BASE_NAME)
EXEEXT = 
PROGRAM=$(RUBY_INSTALL_NAME)$(EXEEXT)
RUBY = $(RUBY_INSTALL_NAME)
MINIRUBY = ./miniruby$(EXEEXT) -I$(srcdir)/lib -I. -I$(EXTOUT)/common\
    $(MINIRUBYOPT)
RUNRUBY = $(MINIRUBY) $(srcdir)/tool/runruby.rb --extout=$(EXTOUT) $(RUNRUBYOPT) -- $(RUN_OPTS)
XRUBY = $(RUNRUBY)
INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_SCRIPT = ${INSTALL}
INSTALL_PROGRAM = ${INSTALL}
XRUBY_LIBDIR = 
XRUBY_RUBYLIBDIR = 
XRUBY_RUBYHDRDIR = 

DEFAULT_PRELUDES = $(YES_GEM_PRELUDE)

#### End of system configuration section. ####

MAJOR=  1
MINOR=  9
TEENY=  1

LIBRUBY_A     = lib$(RUBY_SO_NAME)-static.a
LIBRUBY_SO    = lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR).$(TEENY)
LIBRUBY_ALIASES= lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR) lib$(RUBY_SO_NAME).so
LIBRUBY       = $(LIBRUBY_SO)
LIBRUBYARG    = $(LIBRUBYARG_SHARED)
LIBRUBYARG_STATIC = -Wl,-R -Wl,$(libdir) -L$(libdir) -l$(RUBY_SO_NAME)-static
LIBRUBYARG_SHARED = -Wl,-R -Wl,$(libdir) -L$(libdir) -l$(RUBY_SO_NAME)

THREAD_MODEL  = pthread

PREP          = miniruby$(EXEEXT)
ARCHFILE      = 
SETUP         =
EXTSTATIC     = 
SET_LC_MESSAGES = env LC_MESSAGES=C

MAKEDIRS      = /bin/mkdir -p
CP            = cp
MV            = mv
RM            = rm -f
RMDIR         = rmdir --ignore-fail-on-non-empty
RMDIRS        = rmdir --ignore-fail-on-non-empty -p
RMALL         = rm -fr
NM            = nm
AR            = ar
ARFLAGS       = rcu
RANLIB        = ranlib
AS            = as
ASFLAGS       =  $(INCFLAGS)
IFCHANGE      = $(srcdir)/tool/ifchange
SET_LC_MESSAGES = env LC_MESSAGES=C
OBJDUMP       = objdump
OBJCOPY       = objcopy
VCS           = echo cannot
VCSUP         = $(VCS)

OBJEXT        = o
ASMEXT        = S
DLEXT         = so
MANTYPE       = doc
SYMBOL_PREFIX = 

INSTALLED_LIST= .installed.list

MKMAIN_CMD    = mkmain.sh

SRC_FILE      = $<

MESSAGE_BEGIN = @for line in
MESSAGE_END = ; do echo "$$line"; done

configure_args =  '--prefix=/usr/local' '--enable-shared' '--disable-install-doc' '--with-opt-dir=/usr/local/lib'
#### End of variables

all:

.DEFAULT: all

# Prevent GNU make v3 from overflowing arg limit on SysV.
.NOEXPORT:

miniruby$(EXEEXT):
        @-if test -f $@; then $(MV) -f $@ $@.old; $(RM) $@.old; fi
        $(ECHO) linking $@
        $(Q) $(PURIFY) $(CC) $(LDFLAGS) $(XLDFLAGS) $(MAINLIBS) $(NORMALMAINOBJ) $(MINIOBJS) $(COMMONOBJS) $(DMYEXT) $(LIBS) $(OUTFLAG)$@

$(PROGRAM):
        @$(RM) $@
        $(ECHO) linking $@
        $(Q) $(PURIFY) $(CC) $(LDFLAGS) $(XLDFLAGS) $(MAINLIBS) $(MAINOBJ) $(EXTOBJS) $(LIBRUBYARG) $(LIBS) $(OUTFLAG)$@

# We must `rm' the library each time this rule is invoked because "updating" a
# MAB library on Apple/NeXT (see --enable-fat-binary in configure) is not
# supported.
$(LIBRUBY_A):
        @$(RM) $@
        $(ECHO) linking static-library $@
        $(Q) $(AR) $(ARFLAGS) $@ $(OBJS) $(DMYEXT)
        @-$(RANLIB) $@ 2> /dev/null || true

$(LIBRUBY_SO):
        @-$(PRE_LIBRUBY_UPDATE)
        $(ECHO) linking shared-library $@
        $(Q) $(LDSHARED) $(DLDFLAGS) $(OBJS) $(DLDOBJS) $(SOLIBS) $(OUTFLAG)$@
        -$(Q) $(OBJCOPY) -w -L '$(SYMBOL_PREFIX)Init_*' -L '$(SYMBOL_PREFIX)*_threadptr_*' $@
        @-$(MINIRUBY) -e 'ARGV.each{|link| File.delete link if File.exist? link; \
                          File.symlink "$(LIBRUBY_SO)", link}' \
                $(LIBRUBY_ALIASES) || true

fake: $(arch)-fake.rb
$(arch)-fake.rb: config.status $(srcdir)/template/fake.rb.in
        @./config.status --file=$@:$(srcdir)/template/fake.rb.in
        @chmod +x $@

ruby_pc = ruby-1.9.pc
$(ruby_pc):
        @./config.status --file=$@:$(srcdir)/template/ruby.pc.in

install-cross: $(arch)-fake.rb $(RBCONFIG) rbconfig.rb $(arch_hdrdir)/ruby/config.h \
    $(LIBRUBY_A) $(LIBRUBY_SO) $(ARCHFILE)
    $(ECHO) installing cross-compiling stuff
    $(Q) $(MAKEDIRS) $(XRUBY_RUBYLIBDIR)/$(arch) $(XRUBY_RUBYHDRDIR)/$(arch)/ruby
    $(Q) sed '/^\$$:\.unshift/q' $(arch)-fake.rb > fake.rb
    $(Q) $(BASERUBY) -p \
    -e '~/^\s*CONFIG\["LDFLAGS"\]/ and' \
    -e '$$_[/(?=\s*"$$)/] = %q[ #{(CONFIG["LIBPATHFLAG"]%File.dirname(__FILE__)).strip}]' \
    rbconfig.rb > fake-rbconfig.rb
    $(INSTALL_SCRIPT) fake.rb $(XRUBY_RUBYLIBDIR)/$(arch)/fake.rb
    $(INSTALL_SCRIPT) fake-rbconfig.rb $(XRUBY_RUBYLIBDIR)/$(arch)/rbconfig.rb
    @$(RM) fake.rb fake-rbconfig.rb
    $(INSTALL_DATA) $(arch_hdrdir)/ruby/config.h $(XRUBY_RUBYHDRDIR)/$(arch)/ruby
    $(INSTALL_DATA) $(top_srcdir)/include/ruby/win32.h $(XRUBY_RUBYHDRDIR)/ruby
    $(INSTALL_DATA) $(LIBRUBY) $(LIBRUBY_A) $(XRUBY_RUBYLIBDIR)/$(arch)
    $(INSTALL_PROGRAM) $(LIBRUBY_SO) $(XRUBY_RUBYLIBDIR)/$(arch)

Makefile:   $(srcdir)/Makefile.in $(srcdir)/enc/Makefile.in

$(MKFILES): config.status
        MAKE=$(MAKE) $(SHELL) ./config.status
        @{ \
            echo "all:; -@rm -f conftest.mk"; \
            echo "conftest.mk: .force; @echo AUTO_REMAKE"; \
            echo ".force:"; \
        } > conftest.mk || exit 1; \
        $(MAKE) -f conftest.mk | grep '^AUTO_REMAKE$$' >/dev/null 2>&1 || \
        { echo "Makefile updated, restart."; exit 1; }

uncommon.mk: $(srcdir)/common.mk
        sed 's/{\$$([^(){}]*)[^{}]*}//g' $< > $@

.PHONY: reconfig
reconfig-args = $(srcdir)/configure $(configure_args)
config.status-args = ./config.status --recheck
reconfig-exec-0 = exec 3>&1; exit `exec 4>&1; { "$$@" 3>&- 4>&-; echo $$? 1>&4; } | fgrep -v '(cached)' 1>&3`
reconfig-exec-1 = set -x; "$$@"

reconfig config.status: $(srcdir)/configure $(srcdir)/enc/Makefile.in
    @PWD= MINIRUBY="$(MINIRUBY)"; export MINIRUBY; \
    set $(SHELL) $($@-args); $(reconfig-exec-$(V))

$(srcdir)/configure: $(srcdir)/configure.in
    $(CHDIR) $(srcdir) && exec $(AUTOCONF)

incs: id.h

# Things which should be considered:
# * with gperf v.s. without gperf
# * committers may have various versions of gperf
# * ./configure v.s. ../ruby/configure
# * GNU make v.s. HP-UX make    # HP-UX make invokes the action if lex.c and keywords has same mtime.
# * svn checkout generate a file with mtime as current time
# * ext4 and XFS has a mtime with fractional part
lex.c: defs/keywords
    @\
    if cmp -s $(srcdir)/defs/lex.c.src $?; then \
      [ $(Q) ] && echo copying $@ || set -x; \
      $(CP) $(srcdir)/lex.c.blt $@; \
    else \
      [ $(Q) ] && echo generating $@ || set -x; \
      gperf -C -p -j1 -i 1 -g -o -t -N rb_reserved_word -k1,3,$$ $? > $@.tmp && \
      $(MV) $@.tmp $@ && \
      $(CP) $? $(srcdir)/defs/lex.c.src && \
      $(CP) $@ $(srcdir)/lex.c.blt; \
    fi

NAME2CTYPE_OPTIONS = -7 -c -j1 -i1 -t -C -P -T -H uniname2ctype_hash -Q uniname2ctype_pool -N uniname2ctype_p

enc/unicode/name2ctype.h: enc/unicode/name2ctype.kwd
    $(MAKEDIRS) $(@D)
    @set +e; \
    if cmp -s $(?:.kwd=.src) $?; then \
      set -x; \
      $(CP) $(?:.kwd=.h.blt) $@; \
    else \
      trap '$(RM) $@-1.h $@-2.h' 0 && \
      set -x; \
      sed '/^#ifdef USE_UNICODE_PROPERTIES/,/^#endif/d' $? | gperf $(NAME2CTYPE_OPTIONS) > $@-1.h && \
      gperf $(NAME2CTYPE_OPTIONS) < $? > $@-2.h && \
      diff -DUSE_UNICODE_PROPERTIES $@-1.h $@-2.h > $@.tmp || :; \
      $(MV) $@.tmp $@ && \
      $(CP) $? $(?:.kwd=.src) && \
      $(CP) $@ $(?:.kwd=.h.blt); \
    fi

.c.o:
    @$(ECHO) compiling $<
    $(Q) $(CC) $(CFLAGS) $(XCFLAGS) $(CPPFLAGS) $(COUTFLAG)$@ -c $<

.s.o:
    @$(ECHO) assembling $<
    $(Q) $(AS) $(ASFLAGS) -o $@ $<

.c.S:
    @$(ECHO) translating $<
    $(Q) $(CC) $(CFLAGS) $(XCFLAGS) $(CPPFLAGS) $(COUTFLAG)$@ -S $<

.c.i:
    @$(ECHO) preprocessing $<
    $(Q) $(CPP) $(XCFLAGS) $(CPPFLAGS) $(COUTFLAG)$@ -E $< > $@

clean-local::
    $(Q)$(RM) ext/extinit.c ext/extinit.$(OBJEXT) ext/ripper/y.output
    -$(Q)$(RM) $(pkgconfig_DATA)

distclean-local::
    $(Q)$(RM) ext/config.cache $(RBCONFIG) Doxyfile
    -$(Q)$(RM) run.gdb
    -$(Q)$(RM) $(INSTALLED_LIST) $(arch_hdrdir)/ruby/config.h
    -$(Q)$(RMDIRS) $(arch_hdrdir)/ruby 2> /dev/null || true

clean-ext distclean-ext realclean-ext::
    @cd ext 2>/dev/null || exit 0; set dummy `echo "${EXTS}" | tr , ' '`; shift; \
    test "$$#" = 0 && set .; \
    set dummy `\
        find "$$@" -name Makefile -print | sed 's:^\./::;s:/Makefile$$:~:' | sort | sed 's:~$$::'; \
    `; shift; \
    cd ..; \
    for dir do \
        echo $(@:-ext=)ing "$$dir"; \
        (cd "ext/$$dir" && exec $(MAKE) $(MFLAGS) $(@:-ext=)) && \
        case "$@" in \
        *distclean-ext*|*realclean-ext*) \
        $(RMDIRS) "ext/$$dir" 2> /dev/null || true;; \
        esac; \
    done

distclean-ext realclean-ext::
    -$(Q)$(RMDIR) ext 2> /dev/null || true

clean-extout:
    -$(Q)$(RMDIRS) $(EXTOUT) 2> /dev/null || true

clean-enc distclean-enc realclean-enc:
    @test -f "$(ENC_MK)" || exit 0; \
    echo $(@:-enc=ing) encodings; \
    exec $(MAKE) -f $(ENC_MK) $(MFLAGS) $(@:-enc=)

clean-rdoc distclean-rdoc realclean-rdoc:
    @echo $(@:-rdoc=ing) rdoc
    $(Q)$(RMALL) $(RDOCOUT)
clean-capi distclean-capi realclean-capi:
    @echo $(@:-capi=ing) capi
    $(Q)$(RMALL) $(CAPIOUT)

ext/extinit.$(OBJEXT): ext/extinit.c $(SETUP)
    $(ECHO) compiling $@
    $(Q) $(CC) $(CFLAGS) $(XCFLAGS) $(CPPFLAGS) $(COUTFLAG)$@ -c ext/extinit.c

up::
    @$(CHDIR) "$(srcdir)" && LC_TIME=C exec $(VCSUP)

update-mspec:
    @$(CHDIR) $(srcdir); \
    if [ -d spec/mspec ]; then \
      cd spec/mspec; \
      echo updating mspec ...; \
      exec git pull; \
    else \
      echo retrieving mspec ...; \
      exec git clone $(MSPEC_GIT_URL) spec/mspec; \
    fi

update-rubyspec: update-mspec
    @$(CHDIR) $(srcdir); \
    if [ -d spec/rubyspec ]; then \
      cd spec/rubyspec; \
      echo updating rubyspec ...; \
      exec git pull; \
    else \
      echo retrieving rubyspec ...; \
      exec git clone $(RUBYSPEC_GIT_URL) spec/rubyspec; \
    fi

test-rubyspec-precheck:
    @if [ ! -d $(srcdir)/spec/rubyspec ]; then echo No rubyspec here.  make update-rubyspec first.; exit 1; fi

INSNS   = opt_sc.inc optinsn.inc optunifs.inc insns.inc insns_info.inc \
      vmtc.inc vm.inc

$(INSNS): $(srcdir)/insns.def vm_opts.h \
      $(srcdir)/defs/opt_operand.def $(srcdir)/defs/opt_insn_unif.def \
      $(srcdir)/tool/instruction.rb $(srcdir)/tool/insns2vm.rb
    $(ECHO) generating $@
    $(Q) $(BASERUBY) -Ks $(srcdir)/tool/insns2vm.rb $(INSNS2VMOPT) $@

distclean-local::; @$(RM) GNUmakefile uncommon.mk 
```

rpm -qa | grep 兼容-libstdc

```
compat-libstdc++-33-3.2.3-61
compat-libstdc++-33-3.2.3-61
compat-libstdc++-296-2.96-138 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:51:53.703

给你一些选择...

如果您有名为“yum”的 RedHat 包管理器，请尝试以下操作：

```
$ sudo yum install ruby
$ sudo yum install ruby19
$ sudo yum install ruby19-devel 
```

尝试 ruby​​ 构建：

```
https://github.com/sstephenson/ruby-build 
```

这里有一些地方可以寻找潜在客户……如果您可以将结果发布到这些地方，那么这里的更多人可能会为您提供帮助。

```
$ gcc -v
$ uname -a
$ cat /etc/redhat-release
$ cat ~/.rvmrc
$ cat Makefile
$ rpm -qa | grep compat-libstdc 
```

您正在寻找的是 32 位与 64 位之间的一些区别。如果您看到“686”之类的项目，通常是 32 位；如果您看到通常是 64 位的“x64”之类的项目。

您是否使用任何编译器标志来选择 32 位？例如在您的 Makefile 中：

```
CFLAGS="-m32" LDFLAGS="-m32" CXXFLAGS="-m32" 
```

如果是这样，请将它们全部更改为“-m64”，然后`make clean`重试。

如果您的 GCC 不是最新的 (4.7.2)，我建议您更新它，`make clean`然后再试一次。

# apache-felix - 在 Pax 考试测试中加载 ipojo Maven Bundle

> ID：14970147
> 
> 赞同：1
> 
> 时间：2013-02-20T00:20:08.497
> 
> 标签：apache-felix, pax-exam, pax-runner, ipojo

我正在尝试使用 Pax Exam 创建一个测试，其中我为测试加载的一些包依赖于包“ *org.apache.felix.ipojo* ”。

如果我要在 Pax Exam 配置中省略加载此捆绑包的行，例如：

```
@Configuration
public Option[] config() throws MalformedURLException{
    return options(
            junitBundles(),
            BUNDLES OTHER THAN(org.apache.felix.ipojo),
            ... 
```

然后我得到一个错误，表明这个包是一个缺少的依赖项：

```
ERROR: Bundle com.N.A [35] Error starting mvn:com.N/com.N.A (org.osgi.framework.BundleException: Unresolved constraint in bundle com.N.A [35]: Unable to resolve 35.0: missing requirement [35.0] osgi.wiring.package; (&(osgi.wiring.package=org.apache.felix.ipojo)(version>=1.8.0)))
org.osgi.framework.BundleException: Unresolved constraint in bundle com.N.A [35]: Unable to resolve 35.0: missing requirement [35.0] osgi.wiring.package; (&(osgi.wiring.package=org.apache.felix.ipojo)(version>=1.8.0))
        at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3826)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1868)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
        at java.lang.Thread.run(Thread.java:662) 
```

但是，如果我添加包含它的行：

```
@Configuration
public Option[] config() throws MalformedURLException{
    return options(
            junitBundles(),
mavenBundle().groupId("org.apache.felix").artifactId("org.apache.felix.ipojo")
            ... 
```

我收到一条指示 ClassCastException 的消息，我认为这是由于 ipojo 捆绑包内置到 Felix 中造成的。

```
ERROR: Bundle org.apache.felix.ipojo [34] Error starting mvn:org.apache.felix/org.apache.felix.ipojo (org.osgi.framework.BundleException: Activator start error in bundle org.apache.felix.ipojo [34].)
java.lang.ClassCastException: org.apache.felix.ipojo.Extender cannot be cast to org.osgi.framework.BundleActivator
        at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4177)
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:1972)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1895)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
        at java.lang.Thread.run(Thread.java:662) 
```

我正在使用 Felix 和 JUint4TestRunner 作为跑步者。

如何在没有冲突的情况下访问此依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:44:42.490

最`ClassCastException`有可能表明您的类路径上有另一个 OSGi API 副本。如果您对 Maven 有依赖关系`org.osgi:org.osgi.core`，请确保范围是`provided`而不是`compile`or `test`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:57:52.553

这是我使用的：

```
public CompositeOption ipojoBundles() {
    return new DefaultCompositeOption(
            mavenBundle("org.apache.felix", "org.apache.felix.ipojo").versionAsInProject(),
            mavenBundle("org.ow2.chameleon.testing", "osgi-helpers").versionAsInProject());
} 
```

具有以下版本：iPOJO 1.8.6 和 osgi-helpers 0.6.0

帮助程序是在编写 OSGi 测试时减轻负担的方法。

# apache-flex - Adobe AIR 移动应用程序在 Nexus 平板电脑上使用 HTTPS 时失败，但在 Kindle 上运行

> ID：14970148
> 
> 赞同：5
> 
> 时间：2013-02-20T00:20:09.580
> 
> 标签：apache-flex, mobile, air, flex4.5

好的，烧了 4 个小时，所以我求助于 SO 以寻求帮助。

以下是事实，以便您快速了解：

*   我们有一个现有的 AIR Mobile 应用程序，可以在我的笔记本电脑上正常运行，并且我们在 HTTP 模式下测试过的每台 Android 设备（Kindle、Nexus、Asus A100）

*   一旦我们切换到 HTTPS，**只有**笔记本电脑和 Kindle 设备会连接到服务器

*   在其他设备上，我收到了 FaultEvent 返回，错误提示：“发送失败。Channel.Connect.Failed 错误 NetConnection.Call.Failed [https://www.example.com/flex2gateway/cfamfsecure/](https://www.example.com/flex2gateway/cfamfsecure/) ”

*   我可以在浏览器中点击 Nexus/A100 上面的 URL，它会返回一个空白页面，正如预期的那样

*   使用相同连接的基于 Flex 的应用程序多年来一直没有问题 - 这是第一个使用该 HTTPS 连接的 AIR 应用程序

*   我正在使用 Captive Runtime 功能

*   ColdFusion 9 后端

*   我无法调试网络流量，因为它只发生在平板电脑上，而且我目前不知道如何在平板电脑上捕获流量，就像我可以在笔记本电脑上使用 Fidder 一样（正在研究）

我会尽快提供您需要的任何其他信息 - 请告诉我。

除了上述之外，我还查看了其他一些内容，例如：确保 crossdomain.xml 文件存在并且设置正确，更改 CF 的 services-config.xml 文件中的设置等。

我目前的想法是，它可能与 SSL 证书中的链接有关——比如根 CA 在 Nexus 上不受信任之类的？（哪个是 GlobalSign Root CA）或者它与 Flex 时代的默认浏览器和 IE/代理有关？

以前从未见过这种情况，所以我会尽我所能获得帮助。

[更新]：我创建了一个小样本，您可以使用它来复制此问题： [https ://www.dropbox.com/s/5nmilo3tbwr2k8d/HTTPTestSource.zip](https://www.dropbox.com/s/5nmilo3tbwr2k8d/HTTPTestSource.zip)

它将包含您需要的一切：源代码、编译的 .AIR（用于桌面）、编译的 .APK（用于 Android 设备）。桌面在 HTTP 和 HTTPS 中运行良好，而移动 APK 仅适用于 HTTP。如果您愿意，我还提供了一个示例 CFC，可以放在您自己的服务器上。

感谢您阅读到这里！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T22:03:01.010

**[解决]**

好吧，我让它适合我的情况 - 希望这对其他人有帮助。

问题在于 AIR Captive Runtime。使用 HTTPS 时似乎不起作用。我不得不切换到它，因为我的第一个开发硬件是 Kindle Fire，并且 AIR 运行时预装在 Kindle Fire 上，但我需要最新版本的 AIR。所以，我只是打开了 Captive Runtime 并继续我的快乐方式。

当我们上线时，我们将端点更改为我们的 HTTPS 服务器，Kindle 继续工作，所有其他平板电脑都失败了。

为了解决这个问题，我关闭了 Captive Runtime 并重新编译，现在卸载/重新安装后，它可以在我的所有平板电脑上运行，***除了***Kindle Fire，我只需要为其提供不同的安装。

希望这可以帮助其他有同样问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T03:31:29.080

感谢您更新您的问题。它确实帮助我找到了解决问题的方法。我安装了 AIR 3.7 以及来自 Apache Flex 的 Flex 4.10 构建，并且能够成功连接到 https 连接（在 Flash 构建器中导出发布构建后使用 Captive 运行时）。因此，遇到此问题的任何人都应该只使用较新的 AIR SDK 之一，它应该可以解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:47:29.277

PRB,

我会先说我绝不会塑造或形成 flex 开发人员。我最近在研究工作中遇到的 crossdomain.xml 问题时发现了这些信息。我在 adobe 网站上发现了一个页面，指出当调用 flex 应用程序也不在 HTTPS 连接之后时，在 HTTPS 连接之后调用 Web 服务时存在问题。

您必须将 secure="false" 属性添加到 allow-access-from 标记。

```
<cross-domain-policy>
    <allow-access-from domain="*.mydomain.com" secure="false"/>
</cross-domain-policy> 
```

我从[http://livedocs.adobe.com/flex/3/html/help.html?content=security2_15.html](http://livedocs.adobe.com/flex/3/html/help.html?content=security2_15.html)得到这个。

评论部分中还有一些额外的细节可能也会有所帮助。您可以通过 HTTPS 调用 WSDL，但如果 WSDL 中的位置字段具有 HTTP:// 而不是 HTTPS://，那么您所有剩余的调用都将通过 HTTP 而不是 HTTPS。

--

附带说明一下，flash 播放器和 flex 似乎使用浏览器的 http 机制进行传输，而 AIR 直接实现它，这可以解释为什么您的 flex 应用程序失败而 Air 应用程序正在运行。这也可能是为什么它在调试（使用开发环境 http 传输）和发布（切换到主机浏览器 http 传输）中工作的问题。

蒂姆·萨普

# php - 使用jQuery显示来自另一个文件的数据不起作用并在codeigniter中显示视图

> ID：14970149
> 
> 赞同：1
> 
> 时间：2013-02-20T00:20:13.657
> 
> 标签：php, jquery, codeigniter

```
<html>
<head>
<title></title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
$('#items').load('<?php echo base_url('home/test'); ?>'); 
//alert();
});

</script>
</head>

<body>

<div id="header" style="height:11%;width:100%;background-color:#1F242A;">

<div id="img" style="float:left;">
<img src="/e-com/images/logo.jpg" style="margin-left:130%;" />
</div>
</div>

<div id="left" style="background-color:grey;height:100%;width:13%;float:left;">
</div>

<div id="right" style="background-color:grey;height:100%;width:13%;float:right;">
</div>

<div id="content" style="height:100%;width:70%;float:left;">
<div id="table" style="float:center;">
<table border="0" width="44" style="margin-left:45%;"> 
<tr>
<td><h1><a href="home">Home</a></h1></td>
<td><h1><a href="home">Home</a></h1></td>
<td><h1><a href="home">Home</a></h1></td>
</tr>
</table>
</div>
<div id="items">here</div>
</div>

</body>
</html>

</script> 
```

**首先**，在 home_view 中的上面的脚本应该显示 test.php 中的几个单词，但它不起作用。Test.php 有段落标签和几个词。我能够显示一个警告框，以便 jQuery 工作。

**其次**，我如何使用 codeigniter 做到这一点？如何将数据发送到 test.php，但加载 home_view.php？

```
public function test()  
{
    //$data['items'] = $this->product_model->all_items();
    $this->load->view('test');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:35:55.290

使用`base_url()`来加载文件和 MVC 当然

例如

```
$(document).ready(function() {
$('#items').load('<?php echo base_url("controller/method"); ?>');
}); 
```

在您的方法中，只需调用视图

```
$this->load->view('test',$data); 
```

对于您的第二个问题，如果您没有调用它，那么它将毫无用处，并且不会发出或解释 PHP 代码

所以如果你**真的**需要查看`home_page`和发送数据给`test`你可以

1.  对将发送数据的方法的 AJAX 请求，我认为在这里你不会得到任何好处，我不知道你想要实现什么
2.  在 home_page.php 视图中加载 test.php 视图并隐藏容器 div 例如

**在您的控制器中**

```
public function index() 
{
    $test['title'] = "Stackoverflow" ;
    $data['test'] = $test['title']; 
    $data['items'] = $this->product_model->all_items();
    $this->load->view('home_page', $data);

} 
```

**在您看来 home_page.php**

```
<html>
........

<div style='display:none; '>
    <?php $this->load->view('test',$test); ?> 
</div> 
```

我希望这可以帮助:)如果您需要更多帮助，请发表评论:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:33:13.340

对于你的第一个问题：

尝试

```
<script>
  $(document).ready(function() {
    $('#items').load('/views/test.php');  # mark the preceding slash
  });
</script> 
```

如果这不起作用，请检查 yourdomain.com/views/test.php 上是否有内容

# bash - Bash：限制具有指定名称的所有进程的 CPU 使用率

> ID：14970150
> 
> 赞同：1
> 
> 时间：2013-02-20T00:20:16.717
> 
> 标签：bash, centos, cpu-usage

我在 CentOS 6.3 x64 机器上运行 JVM 实例。有时，一个人的 CPU 使用率会变得猖獗，I/O 会阻塞整个机器。

如何将所有 Java 进程的使用限制为单个内核？还是两个核心？还是按照规定？

我试过`cpulimit`了，它无法用于多个内核以及多个同名进程。

有没有一种简单的方法来限制指定名称的所有进程的 CPU 使用率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:30:24.530

好吧，我认为您所需要的只是[`pgrep`](http://linux.die.net/man/1/pgrep)（查找 PID）和[`taskset`](http://linux.die.net/man/1/taskset). 然后根据您的需要，您将运行（作为超级用户）类似：

```
for pid in $(pgrep <pattern>);
do
  taskset -p 0x00000001 $pid
done 
```

`taskset`有关如何使用它的更多信息，请参阅手册页。您可能需要安装该`schedutils`软件包。

当然，您可以通过修改处理器掩码（即您分配的 CPU）将该方案更改为您想要的任何复杂性。

我应该补充一点，我*认为* `cpuset`（假设你的意思是，我不知道一个名为`cpulimit`但并不意味着什么的工具）使用相同的底层机制。因此，正如您过去的尝试一样，这可能是徒劳的。

# extjs - ExtJS 边框布局不呈现其子项

> ID：14970173
> 
> 赞同：2
> 
> 时间：2013-02-20T00:22:08.943
> 
> 标签：extjs

我将以下组件添加到面板中。当我将布局设置为边框时，不会渲染孩子。但是，如果我将布局更改为其他（例如 hbox、vbox、auto），它会起作用。

你能建议我做错什么吗？我正在使用 ExtJS 4.1.3

```
Ext.define('WebAdmin.view.reference.CountryMain', {
    extend        : 'Ext.container.Container',
    alias         : 'widget.country.main',
    requires      : ['Ext.layout.container.Border',
                 'Ext.resizer.BorderSplitter'],
    layout        : {
        type        :'border'   // does not work
    },
    initComponent : function() {
        var me = this;
        me.items = [{
            region      : 'center',
            layout      : 'fit',
            html        : 'Center'
        },{
            region      : 'east',
            html        : 'East',
            width       : 300,
            split       : true,
            collapsible : true
        }];
        me.callParent();
    }
}); 
```

我已经关注[了为什么我的 ExtJS 选项卡不会显示带有边框布局的项目](https://stackoverflow.com/questions/4480405)但无法解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:40:47.137

问题可能是您没有为容器指定宽度/高度。这可以在配置中显式完成，也可以通过确保父容器使用布局（不仅仅是默认布局，它不会调整大小）来完成。

在这个例子中，我将你的组件添加到正文中，给它一个硬编码的宽度/高度[http://jsfiddle.net/StK2Y/](http://jsfiddle.net/StK2Y/)这有效

```
Ext.create('WebAdmin.view.reference.CountryMain', {
    title: 'Border Layout',
    renderTo: Ext.getBody(),
    width: 500,
    height: 500    
}); 
```

但是，如果父容器没有设置宽度/高度，边框布局将不起作用[http://jsfiddle.net/StK2Y/1/](http://jsfiddle.net/StK2Y/1/)

```
Ext.create('WebAdmin.view.reference.CountryMain', {
    title: 'Border Layout',
    renderTo: Ext.getBody()
}); 
```

# google-fusion-tables - Fusion Tables ROWID 值是否可以重置？

> ID：14970178
> 
> 赞同：0
> 
> 时间：2013-02-20T00:22:36.823
> 
> 标签：google-fusion-tables

我使用 Google Fusion Tables 作为应用程序的后端，并且我想使用 ROWID 来指定表之间的关系（基本上是外键）。

我真正在寻找的是“知情人”的保证，即 ROWID 永远不会被重置，就像如果您要使用不同的后端进行数据库迁移一样。如果是这种情况，那么我可以永远依赖它们（这是使用托管后端的一个重要原因）。我假设是这种情况，但只是想仔细检查一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:41:13.350

ROWID 很可能是稳定的。但我强烈建议您改用您自己的密钥，无论是数据的自然密钥还是您自己的合成 ID。这样你就可以完全控制。

# javascript - 在 uiwebview 中禁用“复制”，但不禁用“选择”。

> ID：14970181
> 
> 赞同：0
> 
> 时间：2013-02-20T00:22:54.857
> 
> 标签：javascript, ios, uiwebview

我喜欢在 uiwebview 中禁用“复制”，而不是“选择”选项。我该怎么做呢？这是因为我在我的 JavaScript 中使用 window.getSelection() 来选择用户选择并对其进行一些处理。不需要打开的“复制”uimenucontrolleritem 和“复制”功能，这会使我的应用程序的用户感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:38:49.783

取自[https://stackoverflow.com/a/6614465/how-do-you-really-remove-copy-from-uimenucontroller上的答案](https://stackoverflow.com/a/6614465/how-do-you-really-remove-copy-from-uimenucontroller)

首先你的 UIWebView 需要来自 UIWebView 的子类。在 XCode 中，转到 File -> new -> File... 并添加一个名为“MyUIWebView”的新 Objective-c 类，并使其成为 UIWebView 的子类。

在您的 MyUIWebView.m 文件中添加以下内容

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
if (action == @selector(copy:))
    return NO;
else if (action == @selector(select:))
    return YES;

    return [super canPerformAction:action withSender:sender];
} 
```

从这里将您的类与包含您的 UIWebView 的视图控制器链接起来，并通过您的代码并将 UIWebView 的所有实例替换为 MyUIWebView。

刚刚在 ios 6.1 模拟器上测试过，它似乎可以工作。

# google-apps-script - DocsList.createFile 有时会创建空白或损坏的 PDF

> ID：14970184
> 
> 赞同：0
> 
> 时间：2013-02-20T00:23:30.603
> 
> 标签：google-apps-script

我正在尝试创建一个 google 文档（如果可以这样工作，我很乐意将其创建为 HTML）然后将该文档导出为 pdf 以作为电子邮件附件发送。这是我的基本结构

```
var docName = "test";

var doc = DocumentApp.create(docName);
doc.appendParagraph("Hello World");

DocsList.createFile(docName, doc.getAs('application/pdf').getBytes(), 'application/pdf'); 
```

但这表现得很奇怪。有时它会创建一个空白 pdf，有时会创建一个损坏的 PDF，无法打开并显示“抱歉，我们目前无法生成文档视图。请稍后再试”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:11:13.153

在将文件转换为 pdf 之前保存并关闭文件很重要。如果您不致电`saveAndClose()`，您的更改仍将处于待处理状态。做就是了

```
doc.saveAndClose();
DocsList.createFile(doc.getAs('application/pdf')).rename(docName); 
```

以我的经验，以 blob 形式而不是字节数组来处理文档要干净得多。所以这应该像预期的那样干净利落。

# html - 在 Chrome 和 Firefox 中加载图像，但在 IE 中不加载

> ID：14970190
> 
> 赞同：0
> 
> 时间：2013-02-20T00:24:08.440
> 
> 标签：html

一个奇怪的问题。

我有以下...

```
<img src="images/source.png" border="0"/> 
```

图像在 Chrome 和 Firefox 中加载，但在 IE 中不加载！

我尝试过重命名图像，更改图像格式等。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T08:50:21.557

回答这个问题已经很晚了，但有人可能需要一个解决方案

> 如果您的图像使用 CMYK 颜色配置文件而不是 RGB 颜色配置文件保存，则可能会导致问题。Microsoft Internet Explorer 8.0 不再支持保存为 CMYK 的 jpeg 图像，现在仅支持以 RGB 模式保存的图像。

或者

> 问题可能非常奇怪，例如有人将 .jpg 图像重命名为 .gif 或反之亦然并试图在 IE 中查看它

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:55:17.610

我的建议是删除您的 IE cookie 并尝试再次加载您的页面，因为此代码无法影响 IE 加载！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T00:27:26.083

您应该首先使用 IE 开发人员工具检查它为什么没有加载。走错路了？

我还建议`./`在路径的开头添加 a 以强制浏览器理解它是 cwd 相对路径

```
<img src="./images/source.png" border="0"/> 
```

# php - 我可以在普通的 XSD 文档上使用 wsdl2php 吗？

> ID：14970194
> 
> 赞同：1
> 
> 时间：2013-02-20T00:24:49.543
> 
> 标签：php, xml, xsd, xsd2code, wsdl2php

我正在尝试为[OVF xsd](http://www.dmtf.org/standards/ovf)生成类。我发现了一堆不完整/损坏的项目。我在想[wsdl2php](http://www.urdalen.no/wsdl2php/)可能会工作，但看起来它需要一个 WSDLdocument 而不是 XSD。

有没有办法让它为 XSD 生成类？

# python - 使用 dict 键作为列名写入 CSV 文件

> ID：14970200
> 
> 赞同：4
> 
> 时间：2013-02-20T00:25:30.667
> 
> 标签：python, file, csv

我有以下dicts格式的数据：

```
{Color: Red, Age: 29, Date: October 2nd, Time: 4pm} 
```

我想将这些 dicts 写入 csv，使“颜色、年龄、日期、时间”是列标题，并且字段作为行归档。这样，当我再次读取 csv 文件时，我得到的数据格式与上述相同。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T00:49:01.910

使用标准[csv 模块](http://docs.python.org/2/library/csv.html#module-csv)，您可以使用[DictWriter](http://docs.python.org/2/library/csv.html#csv.DictWriter)和[DictReader](http://docs.python.org/2/library/csv.html#csv.DictReader)类来实现您想要的。

写作：

```
import csv

dics = [{'Color':'Red', 'Age':29, 'Date':'October 2nd', 'Time':'4pm'},
        {'Color':'Blue', 'Age':32, 'Date':'December 5th', 'Time':'6pm'},
        {'Color':'Green', 'Age':12, 'Date':'January 10th', 'Time':'2pm'}]

with open("file.csv",'wb') as f:
   # Using dictionary keys as fieldnames for the CSV file header
   writer = csv.DictWriter(f, dics[0].keys())
   writer.writeheader()
   for d in dics:
      writer.writerow(d) 
```

阅读：

```
import csv

with open("file.csv", 'rb') as f:
   reader = csv.DictReader(f)
   dics = [ d for d in reader ]

>>> dics
[{'Color': 'Red', 'Date': 'October 2nd', 'Age': '29', 'Time': '4pm'},
 {'Color': 'Blue', 'Date': 'December 5th', 'Age': '32', 'Time': '6pm'},
 {'Color': 'Green', 'Date': 'January 10th', 'Age': '12', 'Time': '2pm'}] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T00:39:37.747

使用 Pandas 很容易做到这一点：

```
import pandas as pd

data = [
    {"A":1.0, "B":2.0, "C":"foo"},
    {"A":100, "B":20, "C":"bar"},
    {"A":0.1, "B":0.2, "C":"xyz"},
]

df = pd.DataFrame(data)

from StringIO import StringIO
buf = StringIO()
df.to_csv(buf, index=False) # convert DataFrame to csv
print buf.getvalue() 
```

输出是：

```
A,B,C
1.0,2.0,foo
100.0,20.0,bar
0.1,0.2,xyz 
```

要加载 csv：

```
buf.pos = 0
print pd.read_csv(buf) 
```

输出是：

```
 A     B    C
0    1.0   2.0  foo
1  100.0  20.0  bar
2    0.1   0.2  xyz 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T00:48:52.113

如果你想使用标准库，你可以这样做：

```
>>> import csv
>>> dicts = [{'Color': 'Red', 'Age': '29', 'Date': 'October 2nd', 'Time': '4pm'}, {'Color': 'Yellow', 'Age': '30', 'Date': 'September 3rd', 'Time': '5pm'}]
>>> with open('test.csv', 'wb') as csvfile:
    writer = csv.writer(csvfile, delimiter=',',
                     quotechar='|', quoting=csv.QUOTE_MINIMAL)
    for d in dicts:
        writer.writerow([d['Color'], d['Age'], d['Date'], d['Time']]) 
```

您将在两个不同行的 csv 文件中获得以下输出::

```
Red,29,October 2nd,4pm
Yellow,30,September 3rd,5pm 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T00:48:55.597

您可以使用[csv](http://docs.python.org/2/library/csv.html)库并从任意数据行中提取键名。

```
import csv

file = open('filename', 'w')
writer = csv.writer(file)

writer.write(rows[0].keys())
for row in rows:
    writer.write(row) 
```

# magento-1.6 - 如何删除 view.phtml 中的添加到购物车按钮文本

> ID：14970202
> 
> 赞同：0
> 
> 时间：2013-02-20T00:25:36.963
> 
> 标签：magento-1.6

我只想删除添加到购物车按钮文本，而不是按钮本身，因为我使用的是背景图像而不是文本。

我的意思是 view.phtml Page 中的（添加到购物车）按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:50:24.440

“添加到购物车”文本不在 view.phtml 中。你需要去：

> /app/design/frontend/base/default/template/catalog/product/view/addtocart.phtml

并找到下面的代码：

```
$buttonTitle = $this->__('Add To Cart'); 
```

将其更改为：

```
$buttonTitle = $this->__(''); 
```

# javascript - Android不从间隔播放html5音频

> ID：14970204
> 
> 赞同：4
> 
> 时间：2013-02-20T00:25:40.887
> 
> 标签：javascript, android, html, audio, setinterval

我正在尝试使用手机上的 HTML5 音频标签播放音频。我已经加载了声音，但是当我运行 .play() 命令时，什么也没有发生。我使默认控件可见，以便我通过按下该播放按钮进行测试，并且该按钮有效并且声音播放。我还尝试通过从地址栏中执行 javascript 来播放声音，并且效果也很好。

我用来播放的代码如下所示：

```
setInterval(function(){
    if(blahblah){
        document.getElementById("player").play();
    }
},500); 
```

为了确保它甚至尝试播放声音，我在它后面放了一个警报，如下所示：

```
setInterval(function(){
    if(blahblah){
        document.getElementById("player").play();
        alert("Played!");
    }
},500); 
```

我看到了警报，但没有播放任何声音。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-07T22:54:08.653

大多数移动设备只允许您播放**作为用户交互结果的**音频。如果您将播放代码放入按钮单击事件中，它应该可以工作（假设您的代码中没有其他错误），但是设备会阻止您的音频从内部播放，`setInterval`因为它认为它没有用户的权限玩。

我现在所做的，我承认这是一种解决方法，是我播放并立即停止按钮单击事件中的音频，然后调用`setInterval`. 它现在有效——因为设备认为它已被用户授予播放该音频的权限，即使我稍后触发它也是如此。*我的按钮单击事件中*的代码如下所示：

```
document.getElementById("player").play();
document.getElementById("player").pause();

setInterval(function(){
    document.getElementById("player").play();
}, 500); 
```

Keep in mind that on mobile, it may not play nearly as smoothly as it does on your computer. Seek alternative approaches where possible.

# .net-4.0 - 将视觉工作室附加到一个短暂的过程中

> ID：14970205
> 
> 赞同：4
> 
> 时间：2013-02-20T00:25:50.563
> 
> 标签：.net-4.0, visual-studio-2012, windows-server-2012, attach-to-process

我有一个控制台应用程序很快就死机了，在检查代码后，我无法确切知道它会死在哪里（我基本上将其缩小到 10 行半径），以便我进一步调试它。

由于我不会进入的原因，我无法从 VS 执行该过程（尽管我有二进制文件、源代码和 pdb，但我无法在构建服务器的环境之外构建），并且想附加到这个过程......但是当我开始这个过程时，它比我希望刷新*附加到进程*对话框的速度要快得多。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T18:11:47.963

这样做的一种可能性是使用任何现有的 Visual Studio 项目并将应用程序指定为要调试的应用程序。步骤（在 Visual Studio 2010 中）是：

*   转到项目属性。
*   选择调试（在配置属性下）
*   编辑命令并填写二进制文件的路径

然后应该可以开始调试（例如，F5 或 Debug\Start Debugging）。

如果您安装了调试工具，另一个可能会更快的选项是使用 WinDbg.exe。它将避免需要使用 Visual Studio 项目。您可以打开可执行文件，指定命令行参数等，然后输入`g<ret>`命令行来启动它。

# memory-management - 删除 WebGL 上下文

> ID：14970206
> 
> 赞同：8
> 
> 时间：2013-02-20T00:26:04.457
> 
> 标签：memory-management, canvas, webgl

我有一个使用许多 webgl 上下文的页面，每个画布一个。每次创建新上下文时，画布都可以重新加载、调整大小等。它适用于多次重新加载，但最终当我尝试创建新上下文时，它返回一个空值。我假设我的内存不足。

我希望能够删除不再使用的上下文，以便我可以恢复内存并将其用于我的新上下文。有没有办法做到这一点？还是有更好的方法来处理许多画布？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T01:16:07.033

这是 Chrome 和 WebKit 中长期存在的错误

[http://code.google.com/p/chromium/issues/detail?id=124238](http://code.google.com/p/chromium/issues/detail?id=124238)

在 WebGL 中无法“删除”上下文。每当系统处理上下文时，垃圾收集就会删除上下文。届时所有资源都将被释放，但最好是删除自己的资源，而不是等待浏览器删除它们。

正如我所说，这是一个错误。它最终会被修复，但我没有预计到达时间。

我建议不要删除画布。保留它们并重复使用它们。

另一个建议是告诉我们为什么需要 200 幅画布。也许您尝试解决的问题会以不同的方式更好地解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T02:42:32.550

我会*假设*，在您释放附加到您的上下文的所有资源之前，某些东西仍然会保留对它的引用，因此它仍然存在。

有几件事要尝试：

*   [这是一些调试 gl 代码。](https://github.com/KhronosGroup/WebGLDeveloperTools/blob/master/src/debug/webgl-debug.js)那里有一个函数可以将上下文重置为其初始状态。在删除它所属的画布之前尝试一下。

*   *某些事件系统可能*会引用您的上下文，从而使它们处于僵尸状态。

*   您是否要从 DOM 中删除画布？我确信页面在一个实例中可以维护的资源是有限的。

SO 抱怨我们的评论线程有点长。先试试这些东西，如果有帮助，请告诉我。

# php - 防止查询中的空白被转换为 %20

> ID：14970212
> 
> 赞同：1
> 
> 时间：2013-02-20T00:26:35.137
> 
> 标签：php, codeigniter, codeigniter-2

我的模型中有以下功能，我想用它来搜索短语等。但是，如果我传入多个单词，空格总是会转换为 %20 符号，这会破坏我的查询。我该如何避免这种情况？

默认情况下，这种类型的查询在 codeigniter 中是否安全？还是我需要先逃避 $term ？

```
function get_search_entries($limit, $start, $term)
 {

    $this->db->select('statuses.id, title, status, posted_by, created, rating, name');
    $this->db->from('statuses');
    $this->db->join('categories', 'categories.id = statuses.category_id');

    $this->db->where('MATCH (title, status) AGAINST ("'.$term.'")', NULL, FALSE);
    $this->db->limit($limit, $start);
    $query = $this->db->get(); 

    if ($query->num_rows() > 0) {

        return $query->result();   
    }

    return false;      
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:33:20.500

`rawurldecode()`在您的输入字符串上使用。

# php - Heroku 上的 Facebook PHP 应用程序未收到签名请求

> ID：14970218
> 
> 赞同：2
> 
> 时间：2013-02-20T00:27:15.063
> 
> 标签：php, facebook, heroku

我添加了一个 PHP/JavaScript 应用程序作为 Facebook 页面选项卡，并将其托管在 Heroku 上。但是它没有收到signed_request。当我在自己的服务器上托管选项卡时，它就可以正常运行，而不是在 Heroku 上。

这是代码：

```
require_once('sdk/src/facebook.php');

$facebook = new Facebook(array(
  'appId'  => AppInfo::appID(),
  'secret' => AppInfo::appSecret(),
  'sharedSession' => true,
  'trustForwarded' => true,
  'cookie' => true
));

$signed_request = $facebook->getSignedRequest();
$liked = $signed_request['page']['liked'];

if( $liked ) {
    echo('fan');
}
else {
    echo('not a fan ') ;
} 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:31:47.433

我有同样的问题。如果您使用的是 heroku 的基本 php 模板，请摆脱此代码，这会在生产环境中强制使用 https：

```
// Enforce https on production
if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] != '127.0.0.1') {
    header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
    exit();
} 
```

当用户不使用安全连接时，此行将重定向到另一个页面丢失 POST 请求。

如果您想保留它，您可以尝试使用 GET 方法发送 signed_request。它可能看起来像这样：

```
// Enforce https on production
    if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] != '127.0.0.1') {
        $signed_request = "";
        if (isset($_REQUEST['signed_request'])){
            $signed_request = "&signed_request=" . $_REQUEST['signed_request'];
        }
        header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] . "?" . $signed_request );
        exit();
    } 
```

这就是我的解决方案。

# mongodb - 如何查看我的 mongodb 正在执行的查询？

> ID：14970227
> 
> 赞同：6
> 
> 时间：2013-02-20T00:28:06.757
> 
> 标签：mongodb

我一直在我的 log/development.log 中看到这个，我想知道这个查询是否真的在我的数据库中执行：

```
MONGODB (0ms) socialcrunch_development['tags'].find({:_id=>"secrets"}).limit(-1).sort([[:_id, :asc]]) 
```

我可以看到在我的 mongo db 上执行的查询，所以我可以计算它们，它们通常应该都是 .find 命令，还是我应该寻找其他东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T00:44:25.627

打印所有活动读取：

```
db.currentOp().inprog.forEach(
   function(d){
     if(d.waitingForLock && d.lockType != "read")
        printjson(d)
     }) 
```

打印所有活动写入：

```
db.currentOp().inprog.forEach(
   function(d){
     if(d.waitingForLock && d.lockType != "write")
        printjson(d)
     }) 
```

`currentOp.op`如果您愿意，可以通过按特定操作类型（插入、更新、删除等）进行过滤来获得更精细的信息。

查看 MongoDB.org 文档中的以下页面以获取更多信息： [http ://docs.mongodb.org/manual/reference/current-op/](http://docs.mongodb.org/manual/reference/current-op/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:21:41.897

[http://www.mongovue.com/](http://www.mongovue.com/)提供良好的 ui 界面来检查服务器的运行时状态

# excel - Excel VBA：数组不为空但没有值？

> ID：14970228
> 
> 赞同：1
> 
> 时间：2013-02-20T00:28:08.227
> 
> 标签：excel, vba

我有一个名为 myArray 的全局数组。在这个数组中存储了从另一个文件中获取的信息。该过程处理存储在 myArray 中的数据，并且工作正常。

但是，当我第二次启动 procudre 时，我有一个测试 myArray 的条件： IsEmpty(myArray) 返回 false 所以显然它不是空的。因此，当我在即时窗口中键入：UBound(myArray) 时，我收到一条错误消息。所以它不是空的，但它没有任何值。此外，IsNull(myArray) 返回 false。

这使我的代码无法正常工作，因为它应该查看 myArray 是否为空，如果不是，则它会一一访问 myArray 的值。显然，这会导致第二次出现错误。

我在程序结束时厌倦了“Erase myArray”，这没有帮助。

有什么线索吗？

谢谢，

编辑：示例代码：

```
 Global myArray As Variant

    Sub tryMe()
    For i = 0 To 10
        If IsEmpty(myArray) Then
            ReDim myArray(0)
            myArray(0) = i
        Else
        tempVal = UBound(myArray)
        ReDim Preserve myArray(tempVal + 1)
        myArray(tempVal + 1) = i
        End If

    Next i
    MsgBox UBound(myArray)

    End Sub 
```

# dynamic - 如何传递在用户窗体上创建的运行时复选框的值（真/假）

> ID：14970229
> 
> 赞同：0
> 
> 时间：2013-02-20T00:28:09.163
> 
> 标签：dynamic, excel, checkbox, vba

在读取 excel 工作表中的所有非空行后，我试图在 UserForm 上创建多个复选框。这意味着这些复选框必须在运行时创建。我还想在用户窗体上放置一个命令按钮。我想要的是，一旦用户按下此命令按钮，代码应该能够向子例程发送有关选中哪些复选框及其名称的信息。

谁能帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:08:29.827

与其尝试在用户窗体上动态创建复选框（我什至不确定是否可能），不如考虑使用 ListStyle 为 fmListStyleOption 并使用 fmMultiSelectMulti 打开 MultiSelect 的列表框

使用 AddItem 方法填充列表框

```
For i = 0 to 9
  Me.lbxDivisions.AddItem
  Me.lbxDivisions.List(i) = "Checkbox " & format(i)
Next i 
```

并确定通过 Selected 属性检查哪些项目：

```
For i = 0 To lbxDivisions.ListCount - 1
  If lbxDivisions.Selected(i) Then
    MsgBox "Item " & Format(i) & " is selected and has value " & lbxDivisions.List(i)
  End If
Next i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:36:50.037

您可以以编程方式将表单控件（复选框、列表框等）添加到用户表单。从表单的代码模块中，

`Me.Controls.Add "Forms.CheckBox.1", "CheckBox1", True)`

从任何其他代码模块，只需按名称引用表单，而不是`Me`，例如，

`MyUserForm.Controls.Add "Forms.CheckBox.1", "CheckBox1", True)`

我个人倾向于使用更动态的控件（如列表框或组合框），除非您的任务绝对需要您使用复选框。使用动态控件，您需要管理它们的大小、相对于其他控件的位置、调整用户窗体的大小（如有必要）等，尽管可以为这些控件添加事件处理（[参见此处](https://stackoverflow.com/questions/563972/adding-controls-to-a-frame-in-an-excel-userform-with-vba)），但这确实是有限的（例如，如果您希望添加 10 个复选框，每个复选框执行不同的操作，则需要预先编写 10 个复选框子例程。如果您创建 11 个复选框但只预先编写了 10 个例程，则最后一个复选框不会t 做任何事情。在设计表单时创建所有复选框会更容易，然后以编程方式将它们设置为`Visible=True`或`Visible=False`根据情况需要。

因此，我倾向于使用动态控件，如列表框或组合框，但**如果**必须，可以在运行时添加复选框等表单控件。

# r - 在 R lattice levelplot 中排序数据

> ID：14970233
> 
> 赞同：1
> 
> 时间：2013-02-20T00:28:18.183
> 
> 标签：r, lattice, levelplot

我正在尝试制作一个格子级别图，并希望我的级别以特定顺序绘制。

```
name1 name2 value
A a 1
A b 3
A c 2
B a 4
B b 1
B c 3
C a 1
C b 3
C c 4 
```

所以假设我想要 name1 垂直并按 name1 的值的升序排序。我该怎么做呢？

* * *

我想我到了某个地方——我需要重新排序看起来的关卡。仍然没有想出确切的方法来做到这一点。

* * *

所以我设法改变了水平 - 但价值没有改变！我正在使用级别（重新排序（））。我必须使用因子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:07:05.820

你想要什么有点令人困惑，但我想你想要你的`levelplot`看起来像一个渐变......

`cumsum`我使用和创建 z 级别`ave`

```
dat$o <- ave(dat$value,dat$name1,FUN=cumsum) 
```

然后

```
library(latticeExtra)
levelplot(o~name2+name1,data=dat,
          panel = panel.levelplot.points,type = c("p", "g"), 
          aspect = "iso", 
          prepanel = prepanel.default.xyplot,
          cex=10) 
```

![在此处输入图像描述](../Images/c8ca7651c1437651b99b2383106d398a.png)

# php - Cookie 不适用于登录系统 CodeIgniter

> ID：14970234
> 
> 赞同：1
> 
> 时间：2013-02-20T00:28:18.867
> 
> 标签：php, codeigniter, session, login, session-cookies

我已经使用 CodeIgniter 实现了一个基本的登录系统。我正在使用该`sessions`库来控制对仅限成员部分的访问。我可以登录并查看该区域没有问题。但是，当我删除我的 cookie 并刷新仅限成员的部分页面时，我仍然可以看到内容。我没有向用户显示登录消息。

我不知道为什么会这样。有任何想法吗？

这是我的 Site.php 控制器

```
class Site extends CI_Controller{

function _construct(){
    parent::_construct();
    $this->is_logged_in();
}

function members_area(){
    $this->load->view('members_area');
}

function is_logged_in(){
    $is_logged_in = $this->session->userdata('is_logged_in');
    if(!isset($is_logged_in) || $is_logged_in != true){
        echo 'You need to login to access this page. <a href="../login">Login</a>';
        die();
} 
```

} }

这是我的 login.php 控制器

```
class Login extends CI_Controller{
function index(){
    $data['main_content'] = 'login_form';
    $this->load->view('includes/template', $data);
}

function validate_credentials(){
    $this->load->model('membership_model');
    $query = $this->membership_model->validate();
    if($query){//if credentials validated
        $data = array(
            'username' => $this->input->post('username'),
            'is_logged_in' => true
            );

        $this->session->set_userdata($data);
        redirect('site/members_area');
    }

    else{//If not validated re load login form
        $this->index();
    }
}

function signup(){
    $data['main_content'] = 'signup_form';
    $this->load->view('includes/template', $data);

}

function create_member(){
    $this->load->library('form_validation');
    //field name, error message, validation rules
    $this->form_validation->set_rules('first_name', 'Name', 'trim|required');
    $this->form_validation->set_rules('last_name', 'Last Name', 'trim|required');
    $this->form_validation->set_rules('email_address', 'Email Address', 'trim|required|valid_email');
    $this->form_validation->set_rules('username', 'Username', 'trim|required|min_length[4]');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|min_length[4]|max_length[32]');
    $this->form_validation->set_rules('password2', 'Password Confirmation', 'trim|required|matches[password]');

    if($this->form_validation->run() == FALSE){
        $this->signup();
    }
    else{
        //create a new row in db 
        $this->load->model('membership_model');
        if($query = $this->membership_model->create_member()){
            //Info entered
            $data['main_content'] = 'signup_successful';
            $this->load->view('includes/template', $data);
        }
        else{
            $this->load->view('signup_form');
        }
    }

} 
```

}

如果会话不存在，这是应该执行的代码。它在`site.php`文件中找到。

```
if(!isset($is_logged_in) || $is_logged_in != true){
        echo 'You need to login to access this page. <a href="../login">Login</a>';
        die(); 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:45:00.250

看起来你的构造函数没有被调用。

也许是因为它需要两个下划线，而不是 1 :)

```
function __construct(){
    parent::__construct();
    $this->is_logged_in();
} 
```

# c++ - 消除 在 O(n) 时间内来自容器的元素

> ID：14970237
> 
> 赞同：2
> 
> 时间：2013-02-20T00:28:43.637
> 
> 标签：c++, algorithm, complexity-theory, time-complexity

假设您想要实现一个模板化函数，该函数接受两个迭代器到一个容器和一个整数，该整数描述“如果容器中的元素在容器中的次数少于 <整数> 次，则将其从容器中弹出”。这样的声明可以是：

```
template <class theIter>
theIter pop_um(theIter start, theIter end, int fewerThan); 
```

是否可以在 O(n) 时间内编写这样的函数？执行此类任务通常使用哪些程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:04:36.703

桶/基数对您的数据进行排序（从开始到结束迭代器）以线性时间开始。然后以线性时间扫描您的新排序列表，跟踪元素何时更改并使其易于弹出。线性时间。O(2n) = O(n)。尽管取决于您的排序方式，但会为存储桶占用大量 RAM。

# solr - 是否可以使用 solrconfig.xml 过滤 Solr 结果？

> ID：14970246
> 
> 赞同：2
> 
> 时间：2013-02-20T00:30:21.497
> 
> 标签：solr

我在 Solr 中有一组文档，我通过两个不同的 requestHandler 进行搜索。一个 requestHandler 在内部使用，应该能够查看所有文档。另一个由面向公众的搜索引擎使用。

有没有办法可以在我的 requestHandler 定义中应用 fq 参数，以便不返回文档的子集？

在这种情况下，我只想返回“fivi”字段不为零的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T00:37:11.010

[请求处理程序 wiki 页面](http://wiki.apache.org/solr/SolrRequestHandler)显示了如何指定默认值：

```
<requestHandler name="/foo" class="my.package.CustomRequestHandler" />
    <!-- initialization args may optionally be defined here -->
     <lst name="defaults">
       <int name="rows">10</int>
       <str name="fl">*</str>
       <str name="version">2.1</str>
     </lst>
  </requestHandler> 
```

但是，如果您不希望它们能够覆盖这些值，请使用`invariants`而不是元素`defaults`的名称。`lst`

# javascript - Bootstrap 的 Carousel (v2.3.2) 上的动画高度变化

> ID：14970250
> 
> 赞同：6
> 
> 时间：2013-02-20T00:30:50.627
> 
> 标签：javascript, animation, twitter-bootstrap, carousel

我正在尝试使用 Bootstrap 的 Carousel 来处理高度不同的内容。高度将根据浏览器宽度而有所不同，并且轮播下方有内容。我想使用 CSS 动画幻灯片之间的高度变化。在朋友的帮助下，我几乎可以在 FireFox 中进行此操作（第一张幻灯片跳转，其余为动画），但 Chrome 中的滑动动画出现了一个明显的错误。

任何输入都会很棒，即使您认为我应该以完全不同的方式处理高度动画，请告诉我！

这是我认为重要的 JS 和 CSS，但整个事情都在 JS Fiddle 上：http: [//jsfiddle.net/tkDCr/](http://jsfiddle.net/tkDCr/)

**JS**

```
$('#myCarousel').carousel({
    interval: false
});

$('#myCarousel').bind('slid', function(e) {
    console.log('slid',e);
});

$('#myCarousel').bind('slide', function(e) {
    console.log('slide',e);
    var next_h = $(e.relatedTarget).outerHeight();
    console.log(next_h);
    $('.carousel').css('height', next_h);
}); 
```

通过注释掉 JavaScript 的第 12 行和第 13 行，您可以看到错误显然是由使用来自 '$(e.relatedTarget).outerHeight();' 的数据分配变量 next_h 引起的。即使不使用该变量，它仍然会破坏动画。注释掉 11,12 和 13，将向您展示轮播如何正常运行。

**CSS**

```
.carousel {
    width: 80%;
    margin-left: auto;
    margin-right: auto;
    background: lightgoldenrodyellow;
    -webkit-transition: height .5s ease;
    -moz-transition: height .5s ease;
    -ms-transition: height .5s ease;
    -o-transition: height .5s ease;
    transition: height .5s ease;
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T15:09:33.020

```
// animate do the same - timeout is not needed

 $('#myCarousel').carousel();
 $('#myCarousel').bind('slide', function(e) {
       $('#myCarousel').animate({height: $(e.relatedTarget).outerHeight()});
 });         

// After using animate, there is no need for transition in css (or height) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-02T19:30:28.487

您可以通过短暂超时延迟调用 outerHeight() 来解决此问题：

```
$('#myCarousel').bind('slide', function(e) {
    setTimeout(function () {
        var next_h = $(e.relatedTarget).outerHeight();
        $('.carousel').css('height', next_h);
    }, 10);
}); 
```

此外，您可能希望将 .carousel 的高度设置为 css 中的某个值，否则第一个过渡将从高度 0 开始，使其从顶部下降。

我在这里更新了你的小提琴：http: [//jsfiddle.net/tkDCr/3/](http://jsfiddle.net/tkDCr/3/)

# ruby - 无法将 Element 周围的方法滚动到视图中 - Watir-webdriver with Ruby

> ID：14970251
> 
> 赞同：7
> 
> 时间：2013-02-20T00:30:52.250
> 
> 标签：ruby, webdriver, selenium-webdriver, watir-webdriver

因此，我们的页面中有以下代码：

```
<div class="toggle-wrapper">
  <input id="HasRegistration_true" class="registration_required toggle" type="radio" value="True" name="HasRegistration" data-val-required="The HasRegistration field is required." data-val="true">
  <label for="HasRegistration_true" class="">On</label>
  <input id="HasRegistration_false" class="registration_required toggle" type="radio" value="False" name="HasRegistration" checked="checked">
  <label class="checked" for="HasRegistration_false">Off</label>
</div> 
```

这些是 2 个单选按钮。'开启和关闭'。“关闭”是默认值。

使用 Watir-webdriver 和 Ruby，我们要选择“打开”单选按钮。我们这样做：

```
browser.radio(:id => "HasRegistration_true").set 
```

但是在这样做时，我们会收到以下错误：

```
`WebElement.clickElement': Element cannot be scrolled into view:[object HTMLInputElement] (Selenium::WebDriver::Error::MoveTargetOutOfBoundsError) 
```

我们知道 Selenium 2 将页面滚动到元素，因此尝试向下滚动是没有用的。我们一直在使用最新版本的 watir-webdriver 和 ruby​​。

由于我们是 QA 工程师，因此我们无法更改页面的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T13:13:35.157

以下是两个对我有用的解决方案：

有一个名为[watir-scroll](https://github.com/p0deje/watir-scroll)的 Ruby gem可以工作。

然后

```
require 'watir-scroll'
browser.scroll.to browser.radio(:id, "HasRegistration_true") 
```

如果您不想添加 gem，我的同事建议了一些（对我来说）有点令人惊讶的东西，它与上面的代码具有相同的效果：

```
browser.radio(:id, "HasRegistration_true").focus
browser.radio(:id, "HasRegistration_true").set 
```

在我的代码中，“.focus”直接滚动到以前不可见的元素。它也可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:02:16.097

您可以通过执行一些 javascript 来动态操作 html 以使单选元素可设置。要在页面上执行 javascript，请执行以下操作： `@browser.execute_script("your javascript here")`

我使用类似下面的 javascript 将类从标签标签中剥离出来，从而将其移出我试图针对我遇到的 Chrome 特定问题采取行动的输入标签。 `execute_script("$(\"label.classname\").removeClass(\"classname inline\")")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:33:13.530

如果元素包含在表单和 div (Wrap) 类中，我发现我必须执行以下操作才能单击“ **[https://quote.comparethemarket.com/Motor/Motor/AboutYourVehicle](https://quote.comparethemarket.com/Motor/Motor/AboutYourVehicle.aspx)****上的“否**”单选按钮**[.aspx](https://quote.comparethemarket.com/Motor/Motor/AboutYourVehicle.aspx) ?** ”页面：

**div_list = @browser.form(:action => "AboutYourVehicle.aspx?ton_t=CTMMO&prdcls=PC&rqstyp=newmotorquote&AFFCLIE=CM01").div(:class => "inputWrap").divs(:class => "custom-radio" )**

然后： **div_list[1].click**

希望这也能解决您的问题**:-)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:06:28.600

首先尝试使用 XPATH 定位元素：

```
browser.element(:xpath, "//input[@id='HasRegistration_true']").click 
```

或者

或者，如果它是您试图定位的隐藏元素，那么您最好使用 CSS。为 firefox 下载 firebug 插件并复制元素的 CSS 路径。

它应该是这样的：

```
browser.element(:css => "the CSS path you have copied from Firebug").click 
```

2个中的一个应该为你做！

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-04T18:42:13.587

我没有使用 watir，但我遇到了与您相同的错误“......无法滚动到视图中......”。我试图使用 watir 来解决它，但对我没有用。然后，我使用 ActionBuilder（*move_to*和*click*）并且错误消失了。

我避免错误的方法是：

```
@driver.action.move_to(*webelement*).click.perform 
```

我希望它对你有用

# java - 使用 FileInputStream 从 Web 应用程序中读取 .jks 文件

> ID：14970252
> 
> 赞同：1
> 
> 时间：2013-02-20T00:30:53.547
> 
> 标签：java, jakarta-ee, tomcat, web-applications

您如何`.jks`从使用 Tomcat 服务器部署的 REST Web 应用程序中读取文件？我`FileInputStream`用来读取文件。我目前在处理用于在 Web 应用程序中读取文件的相对路径时遇到了困难。我知道该文件将在`WEB-INF/classes`. `FileInputStream`使用.读取文件的最佳方法是什么？我知道使用`classLoader`. 但随后它返回`InputStream`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:25:36.023

使用直接文件访问 ( `FileInputStream`) 来读取与应用程序捆绑的资源是一种不好的做法；原因是它会导致您遇到的那种问题。在托管运行时环境中，开发人员几乎无法控制资源实际所在的路径。

对于基于 servlet 的应用程序（您正在使用，正如您提到您正在使用 Tomcat），最好的方法是使用上下文类加载器：

`Thread.currentThread().getContextClassLoader()`

并从那里加载资源，得到一个`InputStream`. 换句话说-您目前正在正确地做事。不要使用`FileInputStream`. 除非您有绝对充分的理由这样做，否则我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:43:59.903

访问未与 EAR / WAR 捆绑的文件的最佳方法是使用 java.util.Properties。我确信像 jks 文件这样的文件永远不会与 EAR 捆绑在一起，它们位于服务器或服务器目录（ weblogic 、 websphere.）的域文件夹中。属性文件应放置在独立于服务器安装目录的文件位置。

这是我能想到的解决方案：

```
1\. Initialize a Servlet with init-param in web.xml
2\. The init-param can be the absolute file location  
   <param-name>porperies-file</param-name>
   <param-value>/usr/properties/abc.jks</param-value>
3\. In the static block of the Servlet , load the properties file / jks 
   file and store it    in parameter 
```

这看起来很复杂，但许多框架提供了通过绝对路径定位文件（如 ResourceBundle 文件）的选项。检查 Spring 的 FileSystemResourceLoader 的文档。

这样一个过程的好处是，如果“jks”文件发生变化，你只需要启动服务器。如果您在 EAR 中有属性文件，则需要部署应用程序，然后重新启动服务器。考虑这一点，您可以有逻辑来检查文件的新鲜度。在这种情况下，系统根本不需要重新启动，但您必须添加额外的同步逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:44:35.697

如果您创建一个 KeyStore（无密码和默认类型）

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream("jskFileName"); 
KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
keyStore.load(is, null); 
```

但是 FileInputStream 真的很好，如果你......

请注意，当您使用集群服务器时。

例如

```
/contextPath
    /WEB-INF
    /pathA/
       /sample.jks

ServletContext sc
String path="/pathA/sample.jks";
String realPath = sc.getRealPath(path);
FileInputStream fis = new FileInputStream(new File(realPath)); 
```

# android - 如何最大限度地减少 Android 活动中的泄漏

> ID：14970255
> 
> 赞同：3
> 
> 时间：2013-02-20T00:31:09.910
> 
> 标签：android, android-layout

我在每个活动中加载了很多位图。在活动之间切换后，我得到了很多“java.lang.OutOfMemoryError”。我的应用程序主要是面向肖像的。

我尝试了许多解决方案，并在本网站上的一个解决方案中找到了相对更好的方法。

首先，在 XML 布局的父视图上设置“id”属性：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/RootView"
 > 
```

然后，在 Activity 的 onDestroy() 方法中，调用 unbindDrawables() 方法，将引用传递给父视图，然后执行 System.gc()

```
@Override
    protected void onDestroy() {
    super.onDestroy();

    unbindDrawables(findViewById(R.id.RootView));
    System.gc();
    }

    private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
        ((ViewGroup) view).removeAllViews();
        }
    } 
```

但它并没有完全删除`java.lang.OutOfMemoryError`。现在我随机得到这个内存异常。我已经阅读了一些帖子，指出要完全摆脱这个问题，您必须从代码中加载位图并在活动 onDestroy 中释放它们，在我的情况下这不是一个实际的解决方案，因为我正在加载很多位图。

有人对这个问题有更好的解决方案吗？

谢谢

# c# - 如何在第二次单击 ASP.net 上重置按钮颜色？

> ID：14970256
> 
> 赞同：1
> 
> 时间：2013-02-20T00:31:11.733
> 
> 标签：c#, asp.net, events

我有一个在**第一次**点击`button`时突出显示的内容。在**第二次**单击时，它应该重置回相同的颜色。我正在使用 a来确定它是否突出显示。该按钮被突出显示，但不知何故它没有重置回原来的颜色。任何帮助，将不胜感激。****`boolean` `isSelected`****

 ****我将 isSelected 贴为`private bool isSelected = false;`

**按钮事件处理程序**

```
protected void Button2_Click(object sender, EventArgs e)
    {
        if (!isSelected)
        {
            isSelected = true;
            Styles.buttonHighlight(Button2);
        }
        else
        {
            isSelected = false;
            Styles.buttonReset(Button2);
        }
    } 
```

**造型方法**

```
public static void buttonHighlight(Button button)
    {
        button.BackColor = Color.Blue;
        button.ForeColor = Color.White;
    }
    public static void buttonReset(Button button)
    {
        button.BackColor = ColorTranslator.FromHtml("#ffffff");
        button.ForeColor = ColorTranslator.FromHtml("#848484");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:41:24.880

您正在尝试在回发之间保存变量的状态...这并不像您想象的那么简单...
在您的情况下，您正在设置`IsSelected = true`下一个回发（下一次单击按钮）它是回到 false ，因为在每次回发时都会重新声明变量（`false`在这种情况下为原始值）。Asp.Net 基本上是无状态的。

*您可以通过将IsSelected*保存在**[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)**或**[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)**中，甚至作为隐藏字段来解决这个问题......

 *我认为 ViewState 应该足以满足您的需求......

```
protected void Button2_Click(object sender, EventArgs e)
{
    bool selected = false;

    if (ViewState["IsSelected"] != null)
    {
       selected = (bool) ViewState["IsSelected"];
    }

    if (!selected)
    {
        ViewState["IsSelected"] = true;
        Styles.buttonHighlight(Button2);
    }
    else
    {
        ViewState["IsSelected"] = false;
        Styles.buttonReset(Button2);
    }
} 
```

使用Session也是大同小异，只是在上面的代码中`ViewState`改成。`Session`您应该阅读一下它们之间的区别（我添加了链接），看看哪个最符合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:44:10.077

问题来了：`isSelected`永远都是假的。

关于 ASP.NET（以及一般的 Web 应用程序），您必须记住的一点是，一切都是无状态的。这基本上意味着为每个回发创建一个*新*的页面类实例。并且由于`isSelected`是这个类中的一个变量，它也将被再次实例化并且其先前的值将不会被存储。

那么你如何解决这个问题呢？您存储`isSelected`某处的值。您可以使用 Session 变量（存储在服务器内存中），或者最好使用 ViewState 变量（存储在页面文本本身中）。您可以`isSelected`像这样使用 getter 和 setter 制作属性：

```
private bool isSelected
{
    get 
    {
        if(ViewState["isSelected"] != null && ViewState["isSelected"] is bool)
            return (bool)ViewState["isSelected"];
        else
            return false;
    }
    set
    {
        ViewState["isSelected"] = value;
    }

} 
```

使用 ViewState 需要打开 ViewState，这是默认的。另一种可能性是将内容存储在`isSelected`Hidden Field 控件中（它也在后台使用 ViewState）。*****

# sqlite - group_concat sqlite 和 order by

> ID：14970257
> 
> 赞同：1
> 
> 时间：2013-02-20T00:31:14.603
> 
> 标签：sqlite, group-concat, sql-order-by

我正在尝试在 sqlite3 的 group_concat 中订购。mysql 不支持这种方式，所以我不能这样做：

```
group_concat(logID order by logDateTime DESC) 
```

我的完整查询在这里，我需要按 logDateTime 排序 logID。我在这里读到了一个子查询方法：[Sqlite group_concat ordering](https://stackoverflow.com/questions/1897352/sqlite-group-concat-ordering)，但我无法让它在我的查询中工作。

```
SELECT logID,
       NULL AS sessionID,
       logDateTime,
       NULL AS sessionName,
       NULL AS NamesInRandomOrder
FROM logs
WHERE sessionID IS NULL

UNION ALL

SELECT NULL,
       sessions.sessionID,
       MAX(logDateTime),
       sessions.sessionName,
       group_concat(logID)
FROM logs
JOIN sessions ON logs.sessionID = sessions.sessionID
GROUP BY sessions.sessionID

ORDER BY 3 DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:21:49.037

这对子查询进行了排序，但 SQLite 不保证在所有情况下都保持该顺序：

```
SELECT logID,
       NULL AS sessionID,
       logDateTime,
       logName,
       NULL AS NamesInRandomOrder
FROM logs
WHERE sessionID IS NULL

UNION ALL

SELECT NULL,
       sessionID,
       MAX(logDateTime),
       sessionName,
       group_concat(logName)
FROM (SELECT sessions.sessionID AS sessionID,
             logDateTime,
             sessionName,
             logName
      FROM logs JOIN sessions ON logs.sessionID = sessions.sessionID
      ORDER BY sessions.sessionID,
               logName)
GROUP BY sessionID

ORDER BY 3 DESC 
```

# jquery-ui - 使用 jQuery 如何根据预设顺序（在变量中列出）重新排序子列表元素？

> ID：14970258
> 
> 赞同：0
> 
> 时间：2013-02-20T00:31:23.980
> 
> 标签：jquery-ui, jquery-ui-sortable

我有一个`ul`完整的`li`元素。每个`li`元素都有一个`data-choice`属性。我还有一个数组，它保存了这些元素的正确顺序（这些属性`li`的索引数组。`data-choice`

例子：

```
["5123ee904210a6ad0d00001c", "5123ee904210a6ad0d00001b", "5123ee904210a6ad0d00001a", "5123ee904210a6ad0d000019"] 
```

如何根据该数组重新排序列表？

我想出了这个，但只是想我会分享解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:31:23.980

```
 var order = ["5123ee904210a6ad0d00001c", "5123ee904210a6ad0d00001b", "5123ee904210a6ad0d00001a", "5123ee904210a6ad0d000019"]
        $elems = this.$('.sorting-question li').remove();

        $elems.sort(function(a, b){
            var a_i = order.indexOf($(a).data('choice'));
            var b_i = order.indexOf($(b).data('choice'));
            return a_i > b_i;
        });

        this.$('.sorting-question').append($elems); 
```

# python - numpy.convolve 中的形状不匹配

> ID：14970260
> 
> 赞同：2
> 
> 时间：2013-02-20T00:31:31.200
> 
> 标签：python, numpy, convolution

错误信息：

```
operands could not be broadcast together with shapes (603) (613) 
```

我该怎么办？
两个列表是否需要相同的长度？
或者我应该零填充它？

这是我的代码：

```
def gaussian_smooth1(img, sigma): 
    '''
    Do gaussian smoothing with sigma.
    Returns the smoothed image.
    '''
    result = np.zeros_like(img)

    #get the filter
    filter = gaussian_filter(sigma)

    #get the height and width of img
    width = len(img[0])
    height = len(img)

    #smooth every color-channel
    for c in range(3):
        #smooth the 2D image img[:,:,c]
        #tip: make use of numpy.convolve
        for x in range(height):
            result[x,:,c] = np.convolve(filter,img[x,:,c])
        for y in range(width):
            result[:,y,c] = np.convolve(filter,img[:,y,c])
    return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:12:11.437

出现问题是因为您没有指定正确的`mode`.
在文档中阅读它：
[numpy.convolve](http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html)

*numpy.convolve*的默认值为`mode='full'`.

> 这将返回每个重叠点的卷积，输出形状为 (N+M-1,)。

`N`是输入数组`M`的大小，是过滤器的大小。所以输出大于输入。

相反，您想使用`np.convolve(filter,img[...],mode='same')`.

还可以查看 [scipy.convolve](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.convolve.html)，它允许使用 FFT 进行 2D 卷积。

# python - 在 PyPlot 中更新图像

> ID：14970265
> 
> 赞同：1
> 
> 时间：2013-02-20T00:31:49.490
> 
> 标签：python, graph, matplotlib

下面是我的代码，我要做的就是更新图表上的点。我不想绘制两条线，我只想要一条线。请帮忙

```
import matplotlib.pyplot as plt
x = [1,2,3,4]
y = [1,4,9,16]

plt.ion()
plt.plot(x,y)
var = raw_input("type enter to change")
#update data some where here?
plt.plot(y,x)
plt.draw()
var = raw_input("type enter to end") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:37:01.693

你需要抓住情节的返回值的句柄，然后再使用`set_data`。

```
import matplotlib.pyplot as plt
x = [1,2,3,4]
y = [1,4,9,16]

plt.ion()
h = plt.plot(x,y)
plt.show()
var = raw_input("type enter to change")
#update data some where here?
h[0].set_data(y,x)
plt.show()
var = raw_input("type enter to end") 
```

# linux - FIFO 到 grep 到文件

> ID：14970273
> 
> 赞同：2
> 
> 时间：2013-02-20T00:33:03.510
> 
> 标签：linux, shell, redhat, fifo, rhel5

我正在使用命名管道来捕获系统日志消息。然后我可以通过执行类似的操作轻松查看系统日志

```
cat /var/log/local3.pipe | grep somefilter
or
grep somefilter /var/log/local3.pipe 
```

这些都很好地将系统日志输出到控制台。但是，如果我想将其捕获到文件中，我什么也得不到，例如

```
cat /var/log/local3.pipe | grep somefilter >> somefile.log
or
grep somefilter /var/log/local3.pipe >> somefile.log 
```

该文件始终保持为零字节。有谁知道为什么？我正在使用 Red Hat Enterprise Linux 5。谢谢。

附加信息：对于想要重现此内容的任何人，这里是命令的完整列表

```
su
<enter root password>
mkfifo /var/log/local3.pipe
chmod 644 /var/log/local3.pipe
echo "local3.* |/var/log/local3.pipe" >> /etc/syslog.conf
/etc/init.d/syslog restart
exit 
```

然后使用一个 ssh 会话：

```
cat /var/log/local3.pipe 
```

并在第二个 ssh 会话中（“测试它”应该显示在第一个 ssh 会话中

```
logger -p local3.info "Test it" 
```

然后在第一个会话中将其更改为

```
cat /var/log/local3.pipe >> somefile.log 
```

向本地 3 发送更多日志（消息需要不同）。确认消息进入 somefile.log

```
logger -p local3.info "Test it 2" 
```

然后在第一个会话中将其更改为

```
cat /var/log/local3.pipe | grep -i test >> somefile.log 
```

现在确认日志不会进入 somefile.log

请注意，该消息需要与上一条消息不同，否则记录器不会立即发送它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:41:12.743

我可以重现您的问题，这为我解决了问题：

```
cat /var/log/local3.pipe | grep -i --line-buffered test >> somefile.log 
```

`isatty(3)`我认为原因是当标准输出引用终端时（根据 因此，您必须`somefile.log`在`grep`进程的标准输出缓冲区被填充之前检查过，因此在它有任何理由写入文件之前。

另一种强制行缓冲的方法如下：

```
cat /var/log/local3.pipe | stdbuf -oL grep -i test >> somefile.log 
```

您可以在这两篇很棒的文章中阅读有关所有这些的更多信息：

*   [http://www.perkin.org.uk/posts/how-to-fix-stdio-buffering.html](http://www.perkin.org.uk/posts/how-to-fix-stdio-buffering.html)
*   [http://www.pixelbeat.org/programming/stdio_buffering/](http://www.pixelbeat.org/programming/stdio_buffering/)

（我很高兴地注意到这`stdbuf`是一个今天给我发电子邮件的人写的关于完全不同的东西 - 小世界！）

# javascript - Javascript 下一个按钮数组

> ID：14970274
> 
> 赞同：0
> 
> 时间：2013-02-20T00:33:04.987
> 
> 标签：javascript, arrays, event-handling

我在 javascript 中没有排练，并希望对链接到基于数组的 id 的下一个按钮有所帮助。这是数组

```
var baseline_next=new Array();
baseline_next[0]="#one";      
baseline_next[1]="#two";
baseline_next[2]="#three";
baseline_next[3]="#four";
baseline_next[4]="#five";
baseline_next[5]="#six";
baseline_next[6]="#six2";
baseline_next[7]="#seven";
baseline_next[8]="#eight";
baseline_next[9]="#nine";
baseline_next[10]="#ten";
baseline_next[11]="#eleven";
baseline_next[13]="#thirteen";
baseline_next[14]="#fourteen";
baseline_next[15]="#fifteen";
baseline_next[16]="#sixteen";
baseline_next[17]="#seventeen";
baseline_next[18]="#eighteen";
baseline_next[19]="#nineteen";
baseline_next[20]="#twenty";
baseline_next[21]="#twentyone";
baseline_next[22]="#twentytwo";
baseline_next[22]="#twentythree"; 
```

基本上我需要的是，当第一次单击下一个按钮（“0”~#one）时，我需要下一个按钮 id 变为两个，再次单击时它需要变为 #three。我不知道如何将数组链接到按钮。我需要这样做的原因是因为我使用 ajax 来加载 div 内容，所以下一个按钮实际上并没有提交，它只是成为一个新的下一个按钮。我不知道这是否重要，但这是按钮在单击时会导致发生的部分内容。

```
$('#one').click(function(){
        $("#area").hide("slide", { direction: "left" }, 500);
        $("#area").load("test_it.jsp #area");
        $("#area").show("slide", { direction: "right" }, 500);
        $("#two").show();

        });
$('#two').click(function(){
    if((document.form1.baseline_01[0].checked || document.form1.baseline_01[1].checked| document.form1.baseline_01[2].checked)
    && (document.form1.baseline_02[0].checked || document.form1.baseline_02[1].checked) 
    && (document.form1.baseline_03_native.checked || document.form1.baseline_03_asian.checked|| document.form1.baseline_03_black.checked|| document.form1.baseline_03_pacific.checked|| document.form1.baseline_03_white.checked|| document.form1.baseline_03_other.checked)){
        if(document.form1.baseline_03_other.checked && document.form1.baseline_03_other_text.value==""){
            alert("Please fill in what other race you concider yourself to be.");
            return false;
        }else{
        $("#area").hide("slide", { direction: "left" }, 500);
        $("#area").load("test_it.jsp #area2");
        $("#area").show("slide", { direction: "right" }, 500);
            $("#three").show();
            return true;
        }
    }else{
        alert("Please select an answer for each question.");
        return false;
    }
        }); 
```

如果我的问题难以理解，我必须提前道歉，我今年才开始编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:41:50.600

我认为您应该考虑稍微修改您的代码以不具有此 ID 列表并在所有元素上使用单个类。这将有助于了解您的 HTML 是如何设置为基于类获取下一个元素的。

不过，既然你已经拥有了这一系列厄运，我想我们将不得不使用它。理想情况下，每个元素都有相同的类。比方说，`.number`。

```
$(".number").on('click', function () {
    var nextID = baseline_next.indexOf(this.id) + 1;
}); 
```

如果你不能使用`.number`，那么你可以做同样的事情，除了需要绑定的每个 ID 的列表..哎呀。在上面的函数中，`nextID`应该是被点击元素之后的 ID 的索引。

顺便说一句，ID 可以是数字，您甚至可以使用`data-id`包含数字的 ID。那也会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:43:36.757

好的，我真的需要问你为什么要这样做，你确定像这样创建超过 20 个 ID 是实现你想要的更好的方法吗？

无论如何，首先，您可以以简写方式创建数组：

```
var baseline_next= ["#one", "#two", "#four", "#five", "#six", "#six2" ..., "#twentythree"; 
```

（顺便说一句“#six2”？真的吗？）

然后做这样的事情：

```
var counter = 0; // start for the first one
$("#button").on('click', function () {
    var id = counter++;
    baseline[id]; // and I don't know what you want to do with this, but here it is!
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-25T17:48:18.950

可以简化如下：

```
let baseline_next = ["#one", "#two", "#three"]; 
```

不要使用 a `var`，因为它的行为不可预测。

添加一个变量`count`来更改数组的索引。

```
let count = 0;
let baseline_next = ["#one", "#two", "#three"];
$(baseline_next[count]).click(function() {
    count++;
}); 
```

或者

```
let count = 0;
let baseline_next = ["#one", "#two", "#three"];
$("#one").click(function() {
    $(baseline_next[count]).click();
    count++;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-25T17:25:51.710

古问。（7 年 wowzers）。这是我用来确定数组中下一项的一些逻辑，使用`indexOf`. 一旦到达阵列的末尾，这也将从头开始。

```
 let options = [true,false,null];
        let current = options.indexOf(this.get('order'));
        let next = (current+1 > options.length-1 ? 0 : current+1);
        this.set('order', options[next]); 
```

# c - 数组中的文件指针

> ID：14970276
> 
> 赞同：1
> 
> 时间：2013-02-20T00:33:12.137
> 
> 标签：c, arrays, file-io, gdb

使用 C 语言非常原始。我正在编写一个将文件作为参数的程序，但这对于调试（GDB）来说相当烦人。不必每次在 GDB 中开始时重新键入文件列表，我宁愿将文件名存储在一个数组中并修改程序以读取该数组而不是 argv[] 值。

我从

```
FILE*[5] inpFiles;
inpFiles[0] = &file1.txt; 
```

但这都是错误的。我需要获得对每个输入文件的某种引用，以便获得它的内存地址。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:42:35.793

您可以在其中定义 GDB 命令，`.gdbinit`因此您无需修改​​生产代码。例如，在您的`~/.gdbinit`或`.gdbinit`您的工作目录中添加以下行。

```
define do
    run file1.txt file2.txt file3.txt file4.txt file5.txt
end 
```

然后，在 GDB 中，只需键入 command `do`，GDB`run file1.txt file2.txt file3.txt file4.txt file5.txt`就会为您运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T00:46:49.457

您可以通过读取标准文件流 0 来解析包含每个文件的输入文件。

这样你就可以这样做：

```
 ./your_program < your_input_file 
```

在 gdb 中，

```
 run/r < your_input_file 
```

但如果你想保留你的 args 方法，你也可以这样做：

```
 ./your_program `cat your_input_file` 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T00:43:03.990

`FILE *`将写入一个数组：

```
FILE *inpFiles[5]; 
```

这可以存储从`fopen()`或类似函数返回的值；它不存储文件名。

您可以将文件指针存储到`&file1`表示的结构中，或者您可以创建一个新结构来存储名称和打开的文件指针（尽管您可能需要指定模式；默认情况下可能是“r”或“rb”）。

所以，向自己澄清你到底想做什么。您可以创建一个文件指针数组，或一个包含文件指针等内容的结构数组。但是你必须决定你将如何使用它以及语义将是什么。

* * *

这假定修改程序比使用 GDB 更好。如果您可以学习更强大地使用 GDB 的功能，那将是一个更好的主意。

例如，您能否使用元字符轻松指定文件：

```
run debug?.txt 
```

您的文件在哪里，，，`debug0.txt`... `debug1.txt`？

其他答案也提出了替代方案。

# python - Django：内置视图和表单抛出“对象没有属性'users_cache'”

> ID：14970279
> 
> 赞同：0
> 
> 时间：2013-02-20T00:33:38.663
> 
> 标签：python, django, forms

尝试使用内置的 auth.views 和 auth.form 进行密码重置。

有以下内容`forms.py`：

```
class CustomPasswordResetForm(PasswordResetForm):
    def clean_email(self):
        email = self.cleaned_data.get('email')
    if email and 'gmail.com' in email:
        raise forms.ValidationError(u'Unfortunately, we can not reset Gmail usernames')
    return email 
```

以及以下内容`urls.py`：

```
url(r'^passreset/$', auth_views.password_reset, {'template_name': 'registration/password_reset.html', 'password_reset_form': CustomPasswordResetForm}), 
```

如果我输入类似 的电子邮件`sample@gmail.com`，它会正确抛出验证错误。但是，如果我输入非 gmail 电子邮件，它会验证其在超类中是否是正确的电子邮件地址，但它不会验证是否存在与该电子邮件关联的用户，而是返回：

```
AttributeError at /passreset/
'CustomPasswordResetForm' object has no attribute 'users_cache' 
```

有任何想法吗？我不知道从哪里开始，而且谷歌搜索并没有真正出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:55:45.993

解决了这个问题。一旦我覆盖了 clean_email，我就忘记了调用超类中的原始方法。将第 3 行更改为以下内容可以解决问题。

```
email = super(CustomPasswordResetForm, self).clean_email() 
```

# video - HTML5 MP4 视频在 iPad 上不起作用

> ID：14970281
> 
> 赞同：0
> 
> 时间：2013-02-20T00:33:55.123
> 
> 标签：video, html5-video

我无法在 iPad 上播放一些 MP4 视频。以下适用于 Chrome 和 IE9（添加了元标记），但不适用于我的 iPad。

我读过一些帖子，建议并非所有 MP4 视频都可以在 iPad 上播放，但实际上我从内部创建的 iOS 应用程序中提取了这些 MP4 视频，它们可以正常播放。我正在处理很多视频，所以我不想转换它们，除非我真的必须这样做。

如果他们可以在本机应用程序中播放，他们可以在浏览器中使用 HTML5 播放，是否有意义？

在此先感谢您的任何建议。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- the following line is required for the video to play in IE9 -->
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<title>Video Test</title>
</head>

<body>
<video id="videoContent" controls="true"  autobuffer height="200" width="400">
   <source src="video.mp4" type="video/mp4"/>
</video>
</body>
</html> 
```

顺便说一句，我使用的是 iPad 2 和 iOS6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:36:03.700

您是否尝试过将视频重命名为具有 ogg 扩展名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:15:29.403

我分解并将文件转换为 M4V，它工作正常。

# git - 将 Git 版本控制下的 web 项目部署到共享主机

> ID：14970289
> 
> 赞同：7
> 
> 时间：2013-02-20T00:34:45.993
> 
> 标签：git, deployment, bitbucket, smartgit

我正在开发一个 WordPress 主题，该主题使用 Git 和在本地开发区域 ( WAMP ) 进行版本控制。我使用 smartgit 作为 GUI 将提交推送到 Bitbucket。我有 2 个分支，master 和 development。我想将开发分支部署到临时区域（在我的实时服务器上安装 WordPress）。

我尝试过使用[ftploy](http://ftploy.com/)来实现这一点；但是，它似乎不允许我选择要部署的分支，并且我想保留主分支的部署以用于实际的最终部署。我正在使用共享主机，但我有 SSH 访问权限。

如何最好地实现将开发分支部署到共享主机？Git 没有安装在服务器上（也不能安装）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T00:38:56.863

看看[git-ftp](https://github.com/git-ftp/git-ftp)：

> 我将 git-ftp 用于基于脚本的项目，主要是 PHP。大多数低成本的网络托管公司不提供 SSH 或 git 支持，而只提供 FTP。
> 
> 这就是为什么我需要一种简单的方法来部署我的 git 跟踪项目。我想，与其传输整个项目，为什么不只传输自上次以来更改的文件，git 可以告诉我那些文件。
> 
> 即使你在玩不同的分支，git-ftp 也知道哪些文件是不同的。没有普通的 FTP 客户端可以做到这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-20T20:30:59.190

有[一篇文章](https://medium.com/@adammccombs/stop-deploying-websites-the-hard-way-2c499eab85ed)建议 7 个应用程序用于 Git 自动部署：

*   Beanstalk — <a href="http://beanstalkapp.com" rel="nofollow noreferrer">http://beanstalkapp.com
*   部署 — <a href="https://www.deployhq.com" rel="nofollow noreferrer">https://www.deployhq.com
*   Springloops — <a href="http://www.springloops.io" rel="nofollow noreferrer">http://www.springloops.io
*   Wercker — <a href="http://wercker.com" rel="nofollow noreferrer">http://wercker.com
*   八达通部署 [.NET] — <a href="https://octopusdeploy.com" rel="nofollow noreferrer">https://octopusdeploy.com
*   Capistrano [Ruby] — <a href="http://capistranorb.com" rel="nofollow noreferrer">http://capistranorb.com
*   Bamboo + Phing [PHP] — [https://www.atlassian.com/software/bamboo](https://www.atlassian.com/software/bamboo)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-13T20:57:07.883

我是 FTPloy 的创始人，我只是想让你知道我们现在已经发布了分支选择功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T03:05:32.743

最终使用了这个完全符合我要求的[脚本。](http://www.stephenradford.me/blog/tutorials/deploy-via-bitbucket-or-github-service-hooks)[实际上它是由构建ftploy](http://ftploy.com/)的同一个人编写的，但是因为我可以访问脚本，所以我能够确定部署了哪个分支。顺便说一句，我发现[ftploy 路线图](http://ftploy.com/roadmap)包括能够为 Bitbucket 项目选择分支。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T23:19:30.457

由于您具有 SSH 访问权限，因此在我看来，您可以在 git post-receive 挂钩脚本中设置 rsync 命令。请参阅[https://github.com/EugeneKay/scripts/blob/master/bash/git-deploy-hook.sh](https://github.com/EugeneKay/scripts/blob/master/bash/git-deploy-hook.sh) 我将它与 gitolite 一起使用，但我确信也可以使用 github 钩子做类似的事情（任何人?)

# php - 我可以用 php 更改图像文件的大小吗？

> ID：14970290
> 
> 赞同：0
> 
> 时间：2013-02-20T00:34:54.427
> 
> 标签：php, image-processing

我做了一个小功能来上传图片，然后在我的网站上显示它们。

我现在的问题是，我可以在上传图片的同时更改图片的文件大小吗？

以脸书为例。即使是大图像的大小也只有 65kb。

如果是这样，我应该使用女巫功能吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:39:34.883

使用[imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php)函数：

```
$source_image = imagecreatefromjpeg("youtimagejpg");
$src_w= imagesx($source_image);
$src_h= imagesy($source_image);
$dest_image = imagecreatetruecolor(100, 100); //targeted width and height

imagecopyresampled($dest_image, $source_image, 0, 0, 0, 0, 100, 100, $source_w, $source_h);
imagejpeg($dest_image,NULL,80); 
//Replace null by the path if you want to save on the server, otherwise the image will be sent to the client intead. 
```

如果您想在不调整大小的情况下缩小图像的大小；使用[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)函数（质量因数低）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:45:51.500

有以下方法可以更改图像大小：

1.  转换为另一种图像格式。
2.  使用有损压缩保存图像 ( [http://en.wikipedia.org/wiki/Lossy_compression](http://en.wikipedia.org/wiki/Lossy_compression) )
3.  用另一个宽度和高度重新采样图像（[http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)）

# php - PHP 数组到 JSON 格式的对象

> ID：14970291
> 
> 赞同：0
> 
> 时间：2013-02-20T00:35:26.493
> 
> 标签：php, json

我想我需要另一双眼睛来审查这段代码。我无法获得正确的数组语句组合来获得我想要的 JSON 对象。

```
 $sql = "SELECT categories.category_name AS category_id, sub_categories.sub_category_name AS subcategory_id, items.id AS item_id, items.item_name
            FROM categories
            LEFT JOIN sub_categories ON (categories.id = sub_categories.category_id)
            LEFT JOIN items ON (sub_categories.id = items.sub_category_id)
            WHERE categories.site_id = 1
            ORDER BY category_id,subcategory_id";

    $result1 = mysqli_query ($dbc, $sql) or trigger_error("Query: $sql\n<br />MySQL Error: " . mysqli_error($dbc));

    if($result1 === FALSE)
    {
        echo(mysqli_error()); // TODO: better error handling
    } else
    {

    $tempCategoryArray = array();
    $tempSubCategoryArray = array();

    $categoriesArray = array("categories" => array());
    $category = "";
    $sub_category = "";
    $newCat= FALSE;
    $newSubCat = FALSE;

    while($row = mysqli_fetch_array($result1)) 

        {

        // If we have a new category, let's start anew

        if($row['category_id'] != $category) 
                {

                $tempCategoryArray['category_id'][]= $row['category_id'];

                // Add the temporary array to the main one
                    if(!empty($tempCategoryArray)) 
                        {
                       array_push ($categoriesArray['categories'], $tempCategoryArray);

                        }

                    $tempCategoryArray = array();

                    $tempCategoryArray['subcategories'] = array();

                }

                $category = $row['category_id'];
        // Same here, if a new sub, let's start fresh

        if($row['subcategory_id'] != $sub_category) 
                {

                $tempSubCategoryArray['subcategory_id'][] = $row['subcategory_id'];
                $tempSubCategoryArray['items'] = array(); 
                        // Add it to the tempCategory
                    if(!empty($tempSubCategoryArray)) 
                        {
                        array_push   ($tempCategoryArray['subcategories'], $tempSubCategoryArray);

                        }

                }

                 { 
                   $tempSubCategoryArray['items'] = array(); 

                      array_push($tempSubCategoryArray['items'],array('item_name'=>     $row['item_name'], 'item_id'=> $row['item_id'], 'item_qty'=> 0));
                       array_push($tempCategoryArray,$tempSubCategoryArray['items']);

                      unset($tempSubCategoryArray);

                 }

        // Finally, no need for temporary arrays with items, since they have no sub-    array

                $sub_category= $row['subcategory_id'];

        }
    array_push ($categoriesArray['categories'], $tempCategoryArray);
    }

    //var_dump($categoriesArray);
    $categoryJson = json_encode($categoriesArray);

    echo $categoryJson;

    //echo '<script  src="js/menupages.js"></script>';

    // Clean up:
    mysqli_free_result($result1);

    ?> 
```

这是我在进行更改时得到的对象及其变体，但我无法将其传递给我的目标 JSON 对象

当前 JSON

```
{
"categories":[
  {
     "category_id":[
        "Drinks"
     ]
  },
  {
     "subcategories":[
        {
           "subcategory_id":[
              "Beer"
           ],
           "items":[

           ]
        },
        {
           "subcategory_id":[
              "Wine"
           ],
           "items":[

           ]
        }
     ],
     "0":[
        {
           "item_name":"Miller   Lite",
           "item_id":"5",
           "item_qty":0
        }
     ],
     "1":[
        {
           "item_name":"Yuengling",
           "item_id":"6",
           "item_qty":0
        }
     ],
     "2":[
        {
           "item_name":"Bud Select",
           "item_id":"7",
           "item_qty":0
        }
     ],
     "3":[
        {
           "item_name":"White Zin",
           "item_id":"8",
           "item_qty":0
        }
     ],
     "4":[
        {
           "item_name":"Reistling",
           "item_id":"10",
           "item_qty":0
        }
     ],
     "category_id":[
        "Food"
     ]
  },
  {
     "subcategories":[
        {
           "subcategory_id":[
              "Sandwiches"
           ],
           "items":[

           ]
        }
     ],
     "0":[
        {
           "item_name":"Hamburger",
           "item_id":"9",
           "item_qty":0
        }
     ],
     "1":[
        {
           "item_name":"Hot Dog",
           "item_id":"11",
           "item_qty":0
        }
     ]
  }
]
} 
```

我真正想要的 JSON

```
{
"categories":[
  {
     "category_id":[
        "Drinks"
     ]
  },
  {
     "subcategories":[
        {
           "subcategory_id":[
              "Beer"
           ],
           "items":[
              [
                 {
                    "item_name":"Miller Lite",
                    "item_id":"5",
                    "item_qty":0
                 }
              ],
              [
                 {
                    "item_name":"Yuengling",
                    "item_id":"6",
                    "item_qty":0
                 }
              ],
              [
                 {
                    "item_name":"Bud Select",
                    "item_id":"7",
                    "item_qty":0
                 }
              ]
           ]
        },
        {
           "subcategory_id":[
              "Wine"
           ],
           "items":[
              [
                 {
                    "item_name":"White Zin",
                    "item_id":"8",
                    "item_qty":0
                 }
              ],
              [
                 {
                    "item_name":"Reistling",
                    "item_id":"10",
                    "item_qty":0
                 }
              ]
           ]
        }
     ],
     "category_id":[
        "Food"
     ]
  },
  {
     "subcategories":[
        {
           "subcategory_id":[
              "Sandwiches"
           ],
           "items":[
              [
                 {
                    "item_name":"Hamburger",
                    "item_id":"9",
                    "item_qty":0
                 }
              ],
              [
                 {
                    "item_name":"Hot Dog",
                    "item_id":"11",
                    "item_qty":0
                 }
              ]
           ]
        }
     ]
  }
 ]
 } 
```

# java - Java 最大堆内存 - 代码正在停止？

> ID：14970293
> 
> 赞同：2
> 
> 时间：2013-02-20T00:35:38.953
> 
> 标签：java, memory, heap-memory, paging

我正在将一个大文本文件加载到内存中（用一个表填充一个类以保存所有数据）。文本文件的大小从几 MB 到 1 GB。但是，当加载大约 100 MB 的文本文件时，我在 windows 7 x64 上运行的 java 应用程序基本上只是在读取文本文件的过程中以大约 40% 的速度停止。我在加载每一行时检查可用内存。

在代码停止读取文本文件之前 println 的最后一个输出是

总内存：688128 可用内存：86032 已用内存：602095

在任务管理器中，java.exe 消耗了大约 838 MB 的 Ram。

无论如何，我可以将内存分页到磁盘或从磁盘分页或增加最大内存？我将在多个系统上运行该应用程序。

# c# - 使用 WPF 对复杂对象模型进行数据绑定

> ID：14970296
> 
> 赞同：0
> 
> 时间：2013-02-20T00:36:10.957
> 
> 标签：c#, wpf, data-binding

我目前正在重构一些使用 C# 在 WPF 之上编写的旧代码。

我目前有一个复合用户模型，如下所示：

```
public class UserModel{
   public User User {get; set;}
   public List<Guid> Permissions {get; set;}
} 
```

在此模型中，权限列表是授予模型引用的用户的权限 ID 的列表。

In my xaml for my user management screen I have a list of these models bound to a combo box and when the selection changes the selected item is bound to a Grid containing text boxes for the User property and an Items Control.

当页面加载时，此项目控件由绑定到系统中所有权限的复选框填充。我的问题是将权限列表绑定到项目控件中的复选框的最佳方法是什么？

items 控件的代码如下所示：

```
<ScrollViewer Grid.Row="7" Grid.Column="1">
  <ItemsControl ItemsSource={Binding}>
    <ItemsControl.ItemsTemplate>
        <DataTemplate>
            <Checkbox Content="{Binding Description}" IsChecked="{Binding IsSelected}"/>
        </DataTemplate>
    </ItemsControl.ItemsTemplate>
</ScrollViewer> 
```

并且权限的集合是这个对象的一个​​列表：

```
class SelectedPermission{
   public Guid PermissionId {get; set;}
   public string Description {get; set;}
   public bool IsSelected {get; set;}
 } 
```

我最初的想法是在 SelectedPermission 集合上实现 INotifyPropertyChanged，当我绑定我的用户时，只需将 IsSelected 设置为 true 以获得授予所选用户的任何权限。但似乎应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:41:40.067

我认为您的方法没有任何问题，您基本上是在创建一个 ViewModel 来将权限包装到其中。

但是，我会更进一步，定义一个 Selectable ViewModel，这将是您可能拥有的任何其他基于 CheckBox 的选择屏幕的通用解决方案：

```
public class Selectable<T>: ViewModelBase //ViewModelBase should Implement NotifyPropertyChanged.
{
    private T _model;
    public T Model 
    {   get { return _model; }
        set 
        {
            _model = value;
            NotifyPropertyChange("Model");
        }
    }

    private bool _isSelected;
    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            _isSelected = value;
            NotifyPropertyChange("IsSelected");
        }
    }

 } 
```

然后你可以这样做：

```
public ObservableCollection<Selectable<Permission>> Permissions {get;set; } //etc. 
```

# java - 从 Java 应用程序的相对路径读取配置资源

> ID：14970299
> 
> 赞同：1
> 
> 时间：2013-02-20T00:36:27.343
> 
> 标签：java, spring, maven

```
--myjar.jar
--config
----appconfig.xml 
```

我正在尝试创建基于 maven 的 java 应用程序，它可以从相对路径 config\appconfig.xml 读取配置文件

这里的想法是，可以在不重新编译应用程序的情况下修改配置。

我的实现是这样的：

```
@Service
public class JooxXmlConfigurationServiceImpl implements XmlConfigurationService {
    @Value("${configuration.xml}")
    private String path; 
} 
```

从 uder 的属性文件中获取值的位置`src/main/java/app-defaults.properties` 它在`String path`定义为完整地址时起作用，例如：`C:/myprojects/myapp/config/appconfig.xml` 但我需要将 设置为`path`类似`config/appconfig.xml`

# android - 如何从 NFC 启动 Android 语音搜索

> ID：14970300
> 
> 赞同：0
> 
> 时间：2013-02-20T00:36:31.670
> 
> 标签：android, nfc

我安装了 NFC 写入器应用程序来写入标签，但语音搜索应用程序未列在可供选择的应用程序列表中。我可以选择从应用程序 uri 启动应用程序，但不确定这是否是我需要的。如果是，我必须使用的 uri 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T19:43:13.423

我正在使用 nfc 任务启动器，创建一个新任务并从应用程序和快捷方式操作菜单中添加一个“打开活动”操作。

然后选择 Google 作为应用程序并设置 `"Com.google.android.googlequicksearchboxVoiceSearchActivity"` 为活动。

然后将任务保存到 nfc 标签，一切就绪。如果您想更进一步，您可以下载 home 2 切换器并将其设置为在双主键按下时运行该任务，这就是我所做的。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:28:35.680

使用 nxp 标签编写器应用程序，在您的标签上写入所需的应用程序。

如果该应用程序未在列表中列出，您可以查看。您可以交替编写应用程序名称和包名称。

您可以使用此代码获取在前台运行的任何应用程序的包名称。

```
ActivityManager mActivityManager = (ActivityManager)    
getSystemService(Context.ACTIVITY_SERVICE);
        List<ActivityManager.RunningTaskInfo> RunningTask = mActivityManager
                .getRunningTasks(1);
        ActivityManager.RunningTaskInfo ar = RunningTask.get(0);

        String foregroundApp = ar.topActivity.getClassName().toString(); 
```

希望，它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:00:30.597

语音搜索不是一个单独的应用程序，它只是`Activity`Google 应用程序中的一个。要启动它，您需要从 带有 action`SearchActivity`的包中启动。这不能直接从 NFC 标签完成，因为 NFC 标签生成的意图始终具有不同的操作（例如）。因此，您必须为此编写自己的应用程序。`com.google.android.googlequicksearchbox``android.intent.action.SEARCH_LONG_PRESS``android.nfc.action.NDEF_DISCOVERED`

# scala - 将 Specs2 与 FluentLenium Api 一起使用时出错

> ID：14970301
> 
> 赞同：1
> 
> 时间：2013-02-20T00:36:33.573
> 
> 标签：scala, webdriver, playframework-2.0, specs2

我使用 Scala 2.10、Specs2 13.1-SNAPSHOT 和 Play2 Framework 2.1 提供的 FluentLenium Api。

我的`IntegrationSpec`文件中有这行代码，找到一个子元素（根据 FluentLenium 规范）：

```
browser.find(".myClass").find("#mySubElement") must haveSize(1) 
```

该行导致以下编译错误：

```
error: type mismatch;
found   : org.fluentlenium.core.domain.FluentList[_ <: org.fluentlenium.core.domain.FluentWebElement]
required: org.fluentlenium.core.domain.FluentList[?0(in value $anonfun)] where type ?0(in value $anonfun) <: org.fluentlenium.core.domain.FluentWebElement
Note: org.fluentlenium.core.domain.FluentWebElement >: ?0, but Java-defined class FluentList is invariant in type E.
You may wish to investigate a wildcard type such as `_ >: ?0`. (SLS 3.2.10) 
```

由于泛型，它是一种......不兼容的Scala / Java吗？还是我没有弄清楚的正常行为？

然而，这一行（省略任何匹配器）可以很好地编译：

```
browser.find(".myClass").find("#mySubElement") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:04:18.013

`haveSize`匹配器要求被匹配的元素在`org.specs2.data.Sized`范围内具有类型类。java集合对应的类型类是：

```
implicit def javaCollectionIsSized[T <: java.util.Collection[_]]: Sized[T] = 
  new Sized[T] {
    def size(t: T) = t.size()
  } 
```

我怀疑这里的类型推断是问题所在，您可以尝试使用以下丑陋的代码来驯服它：

```
browser.find(".myClass").
        find("#mySubElement").
        asInstanceOf[FluentList[FluentWebElement]] must haveSize(1) 
```

或许

```
browser.find(".myClass").
        find("#mySubElement").
        asInstanceOf[Collection[_]] must haveSize(1) 
```

或者

```
import scala.collection.convert.JavaConverters._

browser.find(".myClass").
        find("#mySubElement").
        asScala must haveSize(1) 
```

# algorithm - 非凸多边形 - 使用凸包算法的预处理

> ID：14970303
> 
> 赞同：4
> 
> 时间：2013-02-20T00:36:57.173
> 
> 标签：algorithm, geometry, convex-hull, graph-drawing, non-convex

我使用了convexHull 算法来找到一些……不规则形状的轮廓。虽然还不够好...

很可能是因为我不能保证我的形状是凸的......

我有一组矩形，我希望能够获得轮廓外部的所有点 - 但不要抛出任何轮廓点。

![在此处输入图像描述](../Images/3970b0e296f34ed0b1605e5dfed34c53.png)

凸包算法效果很好 - 但它就像右边的例子一样，所以我丢失了一些关于轮廓的信息。

我想要更接近左边版本的东西，保留外角，只消除里面的点......

有这样的算法吗？

或者，有没有办法将这样的形状（多边形）分解成凸形，以便凸包算法可以正确处理它？

从一个链接到另一个链接，我一直在试图弄清楚如何设置某种算法，比如 Hertel-Mehlhorn 算法——但我不知道在这种情况下使用相交线会做什么......

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:28:19.340

如果您的非凸多边形如您所展示的那样（即一组四边形元素的并集），您所要做的就是找到位于边界上的四边形的边缘。

这可以通过注意这些“外部”边缘仅出现在一个元素中来实现，而“内部”边缘对于两个相邻元素是共有的。这意味着以下简单算法：

```
edge_list = {}
for (i = all elements in mesh)
for (j = all edges in element(i))
    edge_list <- push jth edge of ith element
endfor
endfor
edge_list <- sort
edge_list <- remove_duplicates 
```

剩余的独特边形成多边形的外部轮廓。这个简单的算法`O(N*log(N))`及时运行。

您可以通过使用合适的哈希表进行边缘比较来提高复杂性，从而将复杂性降低到`O(N)`.

# asp-classic - COM+ 方法（如何查看内部？）

> ID：14970308
> 
> 赞同：1
> 
> 时间：2013-02-20T00:37:30.540
> 
> 标签：asp-classic, migration, reverse-engineering, com+, component-services

我不得不更新我们用经典 ASP 编写并利用内部 COM+ 服务的古老 Intranet 应用程序之一。我在任何地方都找不到该对象的源代码，开发人员也没有记录它。

我可以通过查看服务中可用的方法，`Start -> Administrative Tools -> Component Services`但我一生都无法弄清楚如何查看方法内部以查看它们在做什么。

是否有反编译这些 COM+ 服务，或者以其他方式查看它们的方法，或者我注定要纯粹观察旧应用程序并尽力模仿行为和数据？

*注意：我从旧服务器导出服务，安装在我的开发箱中，添加对 VS2010 项目的引用，并尝试使用对象资源管理器识别这些方法。没有什么...*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:11:39.310

COM 服务包括对 COM 类上存在哪些方法及其参数的类型描述，以便自动化控制器能够弄清楚如何将参数传递给 COM 方法。

但是，除此之外，除了本机 x86 机器代码本身之外，没有任何东西可以表明 COM 类在内部做什么。您可以尝试在 DLL 上使用 x86 反汇编程序，但除非您已经熟悉 x86 机器代码指令，否则这不会有很大帮助。

将源代码编译为本机机器码会丢弃大量信息。变量名、内部函数名，这些都不是 CPU 执行指令和执行原始源代码指示的操作所必需的。反汇编程序几乎不可能重构这些名称，因为这些名称将有助于了解代码的用途。反汇编程序有时可以帮助找出核心逻辑，但它需要一个人进行大量的仔细分析和努力才能触及表面。这就像试图通过观察单个草叶来了解森林。

# lucene - 对标记化字符串的 Lucene 范围查询

> ID：14970310
> 
> 赞同：1
> 
> 时间：2013-02-20T00:37:51.093
> 
> 标签：lucene, lucene.net

如果我有一个标记化的字符串，例如“12345 12346 12347”，那么范围查询是否适用于该字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:56:31.857

不确定.net，但在 Java 中这会产生奇怪的结果。对于字符串范围查询，Lucene 使用`String.compareTo(String)`. 所以，例如，

```
"2".compareTo("10") 
```

将导致`1`这意味着`2`在字典上大于`10`. 同时，按`1`字典顺序小于`10`。那是你要的吗？

# eclipse - 使用 Eclipse 导出一个独特的战争持有 RESTlet 和 Servlet 一起为 Tomcat 工作

> ID：14970311
> 
> 赞同：1
> 
> 时间：2013-02-20T00:37:55.133
> 
> 标签：eclipse, rest, tomcat, axis2, restlet

我仍在阅读有关 REST 解决方案的信息，并决定使用 RESTlet 来实现 WebServices，使用 Jackson 将响应作为 JSON 提供。

在此之前我使用过 Axis2，但它的性能让我感到害怕：一个简单的请求需要数百毫秒才能返回客户端，而且客户端和服务器都在同一台机器上！（我将重做基准测试，比以前做得更好，现在比较直接调用、Axis2 和 RESTlet+Jackson。）

我知道 RESTlet 可以在许多容器上使用，并且我找到了一些集成 Tomcat 和 RESTlet 的教程。但据我了解，这意味着将 RESTlet 应用程序直接绑定到 Tomcat 中。

我的问题是，使用 Axis2，我能够拥有一个独特的 eclipse 项目，我在其中开发 servlet 来处理浏览器请求和服务 HTML 页面，以及为非浏览器客户端提供服务的 Axis2 WebService。这个 Eclipse 项目作为一个独特的战争导出，包含我所有的代码和所有必需的 jar，然后我将它部署在 Tomcat 上，并从一个独特的服务器上运行它。

例如：

*   [http://host.com/projectname/operation](http://host.com/projectname/operation)绑定到一个 Servlet 并提供 HTML 页面，而
*   [http://host.com/projectname/services/](http://host.com/projectname/services/)是 Axis2 主页，其中包含 WebService 信息、WSDL 链接等，以及
*   [http://host.com/projectname/services/operation与](http://host.com/projectname/services/operation)[http://host.com/projectname/operation](http://host.com/projectname/operation)做同样的事情，但接收 SOAP 请求并提供 SOAP 响应。

我想用 RESTlet 做同样的事情：

*   [http://host.com/content](http://host.com/content)提供一个 HTML 页面，列出内容的链接，
*   [http://host.com/content/123](http://host.com/content/123)为 HTML 页面提供内容 123 的数据，
*   GET [http://host.com/webservice/content](http://host.com/webservice/content)返回一个 JSON 数组列出内容的链接，
*   GET [http://host.com/webserivce/content/123](http://host.com/webserivce/content/123)返回一个带有内容 123 数据的 JSON 对象。
*   [http://host.com/content/123/update](http://host.com/content/123/update)接收传统的 POST 参数以更新 DB 上的内容 123 并返回带有更新数据的 HTML，
*   PUT [http://host.com/webservice/content/123](http://host.com/webservice/content/123)接收一个 JSON 对象，在 DB 上更新它并返回另一个 JSON 对象，其中包含从 DB 查询的数据。

如您所见，Eclipse 必须通过正确的 web.xml 配置创建这场战争，才能完成“魔法”。它适用于 Axis2，但我不知道如何使用 RESTlet。

另一个问题。如果我不需要 Servlet 并且只需要一个 RESTlet WebService，那么对于像十几个并发数百个请求的客户端来说，哪个容器最有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:21:00.980

绝对可以：我个人倾向于使用 NetBeans/Maven，因此只能提供指向最终 xml 设置的指针，但是......

我的 web.xml 包含：

```
<servlet>
    <servlet-name>ServerServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
        <param-name>org.restlet.application</param-name>
        <param-value>my.Application</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>ServerServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

对于 Tomcat，context.xml：

```
<Context path="/rootPath"></Context> 
```

您当然可以根据需要向这些添加数据源和参数。

我的剩余路由由在 my.Application 类中设置的 Restlet 本身处理，方法是覆盖 org.restlet.Application 中的 createInboundRoute() 和扩展 ServerResource 的映射（路由）类上的注释。

# java - 使用 Java 的鼠标点击的可视化标记

> ID：14970313
> 
> 赞同：0
> 
> 时间：2013-02-20T00:38:11.227
> 
> 标签：java, swing, awt, mouse, screenshot

我正在使用 Java 创建屏幕录像机软件。近80%的工作已经完成。现在我需要使用 Java 创建鼠标点击的视觉标记。这样我就可以在播放视频中看到鼠标被点击的地方。我怎样才能做到这一点？

有没有人有任何代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:55:23.877

非常简单。使用 MouseListener 的 getX() 和 getY() 方法读取用户单击鼠标的点。此时，使用 java.awt.Graphics 类的 drawOval() 方法绘制一个椭圆。试试下面的代码，我相信它可以解决你的问题。

```
import java.awt.*;   
import java.awt.event.*;

// no window closing code
public class MouseXY extends Frame implements MouseListener, MouseMotionListener  
{
          int x , y;
          String str =" ";
          public MouseXY()  
          {
                 setSize(500, 500);
                 setVisible(true); 
                 addMouseListener(this);                // register both the listeners with frame
                 addMouseMotionListener(this);                              
           }                                            // override the 5 abstract methods of ML
           public void mouseEntered(MouseEvent e)   
           { 
                  setBackground(Color.green);
                  x = e.getX();
                  y = e.getY();
                  str ="Mouse Entered";
                  repaint();
           }                                                                   
           public void mouseExited(MouseEvent e)    
           {
                  setBackground(Color.red);
                  x = e.getX();
                  y = e.getY();
                  str ="Mouse Exited";
                  repaint();
           }
           public void mouseClicked(MouseEvent e)
           {
                  setBackground(Color.gray);
                  x = e.getX();
                  y = e.getY();
                  str ="Mouse Clicked";
                  repaint();
           }
           public void mouseReleased(MouseEvent e)   
           {
                  setBackground(Color.blue);
                  x = e.getX();
                  y = e.getY();
                  str ="Mouse Released";
                  repaint();
           }
           public void mousePressed(MouseEvent e)   
           {
               setBackground(Color.lightGray);
               x = e.getX();
               y = e.getY();
               str ="Mouse pressed";
               repaint();
          }                                                       // override the 2 abstract methods of MML
          public void mouseDragged(MouseEvent e)
          {
               setBackground(Color.magenta);
               x = e.getX(); 
               y = e.getY();
               str ="Mouse Dragged";
               repaint();
          }
          public void mouseMoved(MouseEvent e)  
          {
               setBackground(Color.yellow);
               x = e.getX();
               y = e.getY();
               str = "Mouse Moved";
               repaint();
          }
          public void paint(Graphics g)  
          {
               g.setColor(Color.blue);
               g.fillOval(x , y , 10 , 10);
               g.drawString(x +", "+ y , x , y);
               g.drawString(str , x , y -10);             // to draw the string above y coordinate
    }                              
    public static void main(String args[ ])   
    {
               new MouseXY();
    } 
```

}

# ios - 带有对象和键的 UIPicker 使用 JSON

> ID：14970316
> 
> 赞同：0
> 
> 时间：2013-02-20T00:38:37.857
> 
> 标签：ios, objective-c, json, uipickerview

我有点坚持使用 UIpicker。这是我的 JSON 数据：

```
{
    "contact_id": [
        "455",
        "464"
    ],
    "contact_name": [
        "Administrator",
        "Main contact"
    ]
} 
```

我将数据存储到一个 NSdictionary 中，然后在转换为对象后，我创建了一个 NSarray 来存储联系人。在我的 Viewcontroller.m 我有： UIPicker with object and keys using JSON

```
// Creating an URL object
NSURL *url = [NSURL URLWithString:@"http://web.com/json.php"];    
//Creating the data object that will hold the content of the URL
NSData *jsonData = [NSData dataWithContentsOfURL:url];
NSError *error = nil;
NSDictionary *result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
contactlist = [result objectForKey:@"contact_name"]; 
```

我可以使用联系人列表将联系人值显示到下拉列表中。这是我的其他代表

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
         return 1;
}

// returns the # of rows in each component..
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
        return [contactlist count];
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
         return [contactlist objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView
      didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component{
contactTextField.text = (NSString *)[contactlist objectAtIndex:row];
} 
```

我想向所选联系人的相应 ID 发送 JSON 发布请求。

例如，如果您选择 contact_name `Administrator`，我想获取它的contact_id`455` 我创建了一个方法

```
- (IBAction)SendMessage:(id)sender ; 
```

在将 JSON 数据发送到我的服务器端脚本之前创建它，这是我需要传递 id 而不是联系人姓名的地方

```
// NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"603",  @"contact",nil]; 
```

我创建了这个数组试图解决这个问题，但无法让它工作。

```
contactid = [result objectForKey:@"contact_id"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:12:48.703

好的，我想我知道明白你的问题。可能有几种解决方案。但我会通过一个刚刚进入我的人。

如果 id 的数组与名称的顺序相同，只需创建一个新数组

```
NSDictionary *result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

NSArray* ids = (NSArray*)[result objectForKey:@"contact_id"]; 
```

然后在方法中：

```
- (void)pickerView:(UIPickerView *)pickerView
      didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component{} 
```

执行以下操作获取对应的id：

```
NSString *idSentToServer = (NSString *)[ids objectAtIndex:row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:33:35.687

我确实理解在您的案例中定义 JSON 的方式可能是可能的。您的 JSON 数据是否应该返回 JSON 对象数组？

如下：

```
[{"contact_id":"455","contact_name":"Administrator"},{"contact_id":"464","contact_name":"Main contact"}] 
```

# mysql - Scala异常检索插入的ID

> ID：14970321
> 
> 赞同：4
> 
> 时间：2013-02-20T00:38:56.557
> 
> 标签：mysql, scala, playframework-2.0, anorm, typesafe-stack

我有一个 id 字段的 autoid 表。插入带有异常的行后，我想检索生成的 id。任何想法？

```
 SQL(
    """
      insert into accom (id,places,lat,lon,permaname,country,defaultLanguage) values (
         {places}, {lat}, {lon}, {permaname}, {country}, {defaultLanguage}
      )
    """).on(
      'id -> id,
      'places -> places,
      'lat -> lat,
      'lon -> lon,
      'permaname -> permaname,
      'country -> country,
      'defaultLanguage -> defaultLanguage).executeUpdate()
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T11:33:47.330

在最新版本中，您需要一个标量：

```
 val newId = SQL(
      """
      insert into accom (places,lat,lon,permaname,country,defaultLanguage) 
      values ({places}, {lat}, {lon}, {permaname}, {country}, {defaultLanguage})
      """).on(
        'places -> places,
        'lat -> lat,
        'lon -> lon,
        'permaname -> permaname,
        'country -> country,
        'defaultLanguage -> defaultLanguage).executeInsert(scalar[Long].single) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:15:56.530

使用`executeInsert`代替`executeUpdate`，返回值为id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T01:42:58.050

使用`executeInsert`方法代替`executeUpdate`; 它返回一个`Option[T]`where`T`是主键的类型。

您可能想看看[How to Retrieve the Primary Key When Saving a New Object in Anorm](https://stackoverflow.com/questions/9859700/how-to-retrieve-the-primary-key-when-saving-a-new-object-in-anorm)，它还向您展示了如何在不指定 id 的情况下制定`INSERT`语句——您想要生成的 id。

# php - 检查图像是否存在php

> ID：14970322
> 
> 赞同：13
> 
> 时间：2013-02-20T00:38:56.923
> 
> 标签：php

我正在编写一个属性门户。我一直在检查图像。我知道如何检查是否设置了图片网址。但问题是检测 url 上是否确实存在有效图像。

示例： http: [//property.images.themovechannel.com/cache/7217/6094437/img_main.jpg](http://property.images.themovechannel.com/cache/7217/6094437/img_main.jpg)

此图片网址存在，但该图片现已被删除，因此它在我的财产搜索页面中仅显示为空白。有没有办法检查 url 上是否有图像，如果不存在则显示占位符。

就像是

```
$imageURL = "http://property.images.themovechannel.com/cache/7217/6094437/img_main.jpg";

if (exists($imageURL)) { display image } 
else { display placeholder } 
```

但这所做的只是检查 url 是否存在，它确实没有图像

提前致谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T00:44:14.580

用于[`getimagesize()`](http://php.net/manual/en/function.getimagesize.php)确保 URL 指向有效图像。

```
if (getimagesize($imageURL) !== false) {
    // display image
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-12T10:45:48.030

```
function exists($uri)
{
    $ch = curl_init($uri);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_exec($ch);
    $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);

    return $code == 200;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-02T11:23:00.677

```
function is_webUrl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    // don't download content
    curl_setopt($ch, CURLOPT_NOBODY, 1);
    curl_setopt($ch, CURLOPT_FAILONERROR, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    if (curl_exec($ch) !== FALSE) {
        return true;
    } else {
        return false;
    }
}

if(is_webUrl('http://www.themes.tatwerat.com/wp/ah-personal/wp-content/uploads/2016/08/features-ah-wp-view.jpg')) {
   echo 'yes i found it';
}else{
   echo 'file not found';
} 
```

# oracle - DST 开始和结束日期

> ID：14970324
> 
> 赞同：3
> 
> 时间：2013-02-20T00:39:04.577
> 
> 标签：oracle

只是想知道在 Oracle 11g 中是否有一种简单的方法可以通过传递任何时区和年份来找出 dst 的开始和结束日期？

我已经阅读了这篇文章[在 Oracle 中，如何检测夏令时开始/结束的日期？](https://stackoverflow.com/questions/287563/in-oracle-how-can-i-detect-the-date-on-which-daylight-savings-time-begins-end)但它并没有给我我需要的东西。我想获取任何给定时区的 dst 开始/结束日期。

非常感谢

# mysql - 在 MySQL 5.1 上，如何查询特定分区？

> ID：14970326
> 
> 赞同：0
> 
> 时间：2013-02-20T00:39:14.470
> 
> 标签：mysql, database-partitioning

我需要在分区表上运行查询，并且我想要按分区的结果，如下所示：

```
partition     result     count
----------- ----------   ------
    p1        apples      2
    p1        oranges     3
    p2        apples      10
    p2        oranges     15 
```

从官方的 MySQL 在线文档来看，如果我们有 5.6 或更高版本，我们可以使用*PARTITION*子句来指定从哪里获取数据，但我们目前停留在 5.1.63。无论表的分区方案如何，是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:46:06.367

我不相信你可以在 MySQL 5.1 中。

不过，您可以解决它 - 无论分区定义如何，您都可以将其作为条件添加到您的计数中。

例如，如果它是 ID 列上的范围分区，并且 p1 的 ID < 10000，p2 ID < 20000 那么

```
SELECT result, partition, count(ID)
FROM
(
    SELECT result, ID,
      case when ID < 10000 then p1
           when ID < 20000 then p2
      .....
      end as partition

    FROM
      table
) s1
GROUP BY partition, result 
```

# performance - 你能通过绕过 Cedar 路由层从 Heroku 获得更好的性能吗？

> ID：14970336
> 
> 赞同：-4
> 
> 时间：2013-02-20T00:40:14.897
> 
> 标签：performance, web-applications, heroku, cloud

最近发现 Heroku 的“智能路由网格”只是一个[随机负载均衡器](http://rapgenius.com/James-somers-herokus-ugly-secret-lyrics)，我想知道是否可以通过使用 Bamboo 堆栈的路由来提高性能？我这样说是因为我从[Heroku 支持文章中](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords#heroku-behavior)发现了以下内容：

*特别是在 Heroku 上，不支持将应用程序流量发送到静态 IP 地址。它会导致流量通过 Bamboo 堆栈的路由基础设施而不是更高性能的 Cedar 堆栈的路由层（即使对于运行时存在于 Cedar 堆栈上的应用程序也是如此）。此类应用程序失去了流线型 Cedar 路由堆栈的功能优势，并且会遭受额外的停机时间*

现在，我很想知道是否有人尝试对 Bamboo 路由器和 Cedar 路由器进行基准测试？顺便说一句，引用的文档是否准确（鉴于 Heroku 的大部分[文档具有误导性/不正确性](https://blog.heroku.com/archives/2013/2/16/routing_performance_update/)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:40:07.370

不建议使用 Bamboo，因为您找到的文档也指出。您引用的博文中提到的延迟来源不是实际的 Heroku 路由器；这是由于请求在各个测功机的队列中等待。将您的域映射到静态 IP 地址不会改善您的应用的平均响应时间。

# google-maps - 谷歌地图样式缩放控制

> ID：14970337
> 
> 赞同：6
> 
> 时间：2013-02-20T00:40:20.243
> 
> 标签：google-maps, google-maps-api-3, zooming

我正在使用 Google Maps V3 Javascript API 并希望设置缩放控件的样式。尽管 Google 文档有关于移动自定义控件的信息，但它似乎没有任何用于设置自定义控件样式的信息。[https://developers.google.com/maps/documentation/javascript/controls#ControlModification](https://developers.google.com/maps/documentation/javascript/controls#ControlModification)

我想做的是能够为现有的缩放控件设置样式。

有没有办法设置现有控件的样式？我宁愿这样做而不是创建一个新的自定义控件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-29T11:22:19.190

有一个使用谷歌地图 API 和自定义控件设置的选项，这是我找到的代码片段：

```
 var map;
var chicago = new google.maps.LatLng(41.850033, -87.6500523);

/**
 * The ZoomControl adds +/- button for the map
 *
 */

function ZoomControl(controlDiv, map) {

  // Creating divs & styles for custom zoom control
  controlDiv.style.padding = '5px';

  // Set CSS for the control wrapper
  var controlWrapper = document.createElement('div');
  controlWrapper.style.backgroundColor = 'white';
  controlWrapper.style.borderStyle = 'solid';
  controlWrapper.style.borderColor = 'gray';
  controlWrapper.style.borderWidth = '1px';
  controlWrapper.style.cursor = 'pointer';
  controlWrapper.style.textAlign = 'center';
  controlWrapper.style.width = '32px'; 
  controlWrapper.style.height = '64px';
  controlDiv.appendChild(controlWrapper);

  // Set CSS for the zoomIn
  var zoomInButton = document.createElement('div');
  zoomInButton.style.width = '32px'; 
  zoomInButton.style.height = '32px';
  /* Change this to be the .png image you want to use */
  zoomInButton.style.backgroundImage = 'url("http://placehold.it/32/00ff00")';
  controlWrapper.appendChild(zoomInButton);

  // Set CSS for the zoomOut
  var zoomOutButton = document.createElement('div');
  zoomOutButton.style.width = '32px'; 
  zoomOutButton.style.height = '32px';
  /* Change this to be the .png image you want to use */
  zoomOutButton.style.backgroundImage = 'url("http://placehold.it/32/0000ff")';
  controlWrapper.appendChild(zoomOutButton);

  // Setup the click event listener - zoomIn
  google.maps.event.addDomListener(zoomInButton, 'click', function() {
    map.setZoom(map.getZoom() + 1);
  });

  // Setup the click event listener - zoomOut
  google.maps.event.addDomListener(zoomOutButton, 'click', function() {
    map.setZoom(map.getZoom() - 1);
  });  

}

function initialize() {
  var mapDiv = document.getElementById('map-canvas');

  var mapOptions = {
    zoom: 12,
    center: chicago,
    /* Disabling default UI widgets */
    disableDefaultUI: true
  }

  map = new google.maps.Map(mapDiv, mapOptions);

  // Create the DIV to hold the control and call the ZoomControl() constructor
  // passing in this DIV.
  var zoomControlDiv = document.createElement('div');
  var zoomControl = new ZoomControl(zoomControlDiv, map);

  zoomControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.TOP_LEFT].push(zoomControlDiv);
}

initialize(); 
```

你可以在这里看到一个工作示例：http: [//jsfiddle.net/maunovaha/jptLfhc8/](http://jsfiddle.net/maunovaha/jptLfhc8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-09T13:04:22.540

要在不使用 API 的情况下设置按钮的样式，从而允许您做更多的事情，请`button`通过 API 创建控件 - 如上面@Picard 回答中所述 - 并附加到`div`a`cssClass`属性，然后根据需要设置按钮的样式：

```
 var zoomOutButton = document.createElement('div');
         zoomOutButton.className = 'zoom-out-btn'; 
```

然后样式你只需添加你的规则：

```
 .zoom-out-btn{ /** your rules **/ } 
```

与`zoomInButton`：

```
 var zoomInButton = document.createElement('div');
         zoomInButton.className = 'zoom-in-btn';

     .zoom-in-btn{ /** your rules **/ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T17:17:30.927

您可能需要为此使用 JQuery，因为控件实际上没有任何唯一的类或 ID。我使用了类似于这里的技术：[Styling standard Zoom control in Google Maps v3](https://stackoverflow.com/questions/5043419/styling-standard-zoom-control-in-google-maps-v3)

这是我的版本：

```
google.maps.event.addListener(map, 'tilesloaded', function() {
    $('#map_canvas').find('img[src="https://maps.gstatic.com/mapfiles/szc4.png"]').parent('.gmnoprint').css('YOUR_STYLE_HERE', 'YOUR_VALUE_HERE');
}); 
```

所以基本上，上面选择缩放控制图像，然后再上一层得到整个容器。您可能需要指定与我不同的图像，这是针对“小”版本的。

# java - 我需要帮助：将带有 UDP 的字节列表发送到服务器，它适用于有符号/无符号字节

> ID：14970338
> 
> 赞同：0
> 
> 时间：2013-02-20T00:40:27.453
> 
> 标签：java, android, udp, unsigned, signed

我有以下问题：我必须使用 udp 将我的 android 手机中的字节列表发送到旧服务器。因为在java中字节是有符号的，服务器总是接收到很多字节。他有 72 个字节，而不是 36 个字节。因此，字节列表的解释不适用于服务器端。

服务器上的正确解释是：23 80 82 88 F2 F2 8C F7 B8 FC 9B 88 98 91 82 84 89 80 90 E5 AA 82 C0 83 AB BE 87 BC D3 C0 95 80 80 16 0D 0A 3542420551398236 2013-19-0 17:16:18 47,41413 9,3971 879m 273,2° 0km/h

我的错误结果是：32 33 38 30 38 32 38 38 46 32 46 32 38 43 46 37 42 38 46 43 39 42 38 38 39 38 39 31 38 32 38 31 38 30 38 30 39 30 45 325 3 4 30 38 33 41 42 42 42 38 37 41 43 44 33 43 30 39 35 38 30 38 30 37 44 30 44 30 41

有人知道我必须如何发送这个字节列表吗？它应该是 36 个无符号字节？

我的安卓应用程序代码是：

```
public class UdpClient extends IntentService {

public static final String REQUEST_STRING = "sharedText";

public UdpClient() {
    super("UdpClient");
}

@Override
public void onHandleIntent(Intent intent) {
    String requestString = intent.getStringExtra(REQUEST_STRING);
    String action = intent.getAction();
    String type = intent.getType();

    if (Intent.ACTION_SEND.equals(action) && type != null) {
        if ("text/*".equals(type)) {
            runUdpClient(requestString); // Handle text being sent
        }
    }
}

@SuppressLint("DefaultLocale")
public static String getSum(String in) {
    int checksum = 0;
    if (in.startsWith("$")) {
        in = in.substring(1, in.length());
    }

    int end = in.indexOf('*');
    if (end == -1)
        end = in.length();
    for (int i = 0; i < end; i++) {
        checksum = checksum ^ in.charAt(i);
    }
    String hex = Integer.toHexString(checksum);
    if (hex.length() == 1)
        hex = "0" + hex;
    return hex.toUpperCase();
}

private static final int UDP_SERVER_PORT = 11111;

@SuppressLint("DefaultLocale")
private void runUdpClient(String string) {

    String sharedText = string.toUpperCase();

    String checksum = null;

    if (sharedText != null) {
        // Update UI to reflect text being shared
        checksum = getSum(sharedText);
    }

    String udpMsg = "23" + sharedText + checksum + "0D0A";

    DatagramSocket ds = null;

    try {
        ds = new DatagramSocket();
        InetAddress serverAddr = InetAddress.getByName("127.0.0.1");
        DatagramPacket dp;

        byte[] sendData = new byte[36];

        sendData = udpMsg.getBytes("ISO-8859-1");

        dp = new DatagramPacket(sendData, sendData.length, serverAddr,
                UDP_SERVER_PORT);
        ds.send(dp);
    } catch (SocketException e) {
        e.printStackTrace();
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (ds != null) {
            ds.close();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:05:08.913

您需要使用以下方式将 udpMsg 十六进制字符串转换为字节数组：

```
import javax.xml.bind.DatatypeConverter;
sendData = DatatypeConverter.parseHexBinary(udpMsg); 
```

编辑：试试这个[方法](https://stackoverflow.com/a/140861/102483)，我猜Android没有XML类。

```
public static byte[] hexStringToByteArray(String s) {
int len = s.length();
byte[] data = new byte[len / 2];
for (int i = 0; i < len; i += 2) {
    data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
                         + Character.digit(s.charAt(i+1), 16));
}
return data;
} 
```

# maven - 在 Maven 中，如何指定我的父项目具有非标准 pom 文件名

> ID：14970343
> 
> 赞同：1
> 
> 时间：2013-02-20T00:40:56.987
> 
> 标签：maven

我有两个产品需要从一组项目中构建，所以我需要两个父 pom 文件。我知道如何为要使用的 mvn 命令指定一个备用 pom。我在子 pom.xml 中放置什么来告诉它父级有一个非标准名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:19:31.663

我通过 Eclipse POM 编辑器找到了它：relativePath

```
<parent>
    <relativePath>../oda_pom.xml</relativePath>
    <groupId>xxx</groupId>
    <artifactId>yyy</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent> 
```

# excel - 将选定的行和列导出到 CSV 文件

> ID：14970344
> 
> 赞同：3
> 
> 时间：2013-02-20T00:40:59.883
> 
> 标签：excel, vba

我希望能够使用 VBA 将选定的单元格范围导出到 .csv 文件。到目前为止，我想出的方法非常适合连贯选择，但在选择多个列时会失败。

这是我设法从互联网上找到的代码片段中整理出来的代码：它还摆弄了一些 UI，因为我的 Excel 会说德语，所以我需要“。” 作为小数分隔符而不是“，”它会调整它。

```
Sub Range_Nach_CSV_()
Dim vntFileName As Variant
Dim lngFN As Long
Dim rngRow As Excel.Range
Dim rngCell As Excel.Range
Dim strDelimiter As String
Dim strText As String
Dim strTextCell As String
Dim strTextCelll As String
Dim bolErsteSpalte As Boolean
Dim rngColumn As Excel.Range
Dim wksQuelle As Excel.Worksheet
Dim continue As Boolean

strDelimiter = vbtab

continue = True

Do While continue = True

vntFileName = Application.GetSaveAsFilename("Test.txt", _
    FileFilter:="TXT-File (*.TXT),*.txt")
If vntFileName = False Then
    Exit Sub
End If

If Len(Dir(vntFileName)) > 0 Then
    Dim ans As Integer
    ans = MsgBox("Datei existiert bereits. Überschreiben?", vbYesNo)
    If ans = vbYes Then
        continue = False
    ElseIf ans = vbNo Then
        continue = True
    Else
        continue = False
    End If
Else
    continue = False
End If

Loop

Set wksQuelle = ActiveSheet

lngFN = FreeFile
Open vntFileName For Output As lngFN

    For Each rngRow In Selection.Rows
        strText = ""
        bolErsteSpalte = True

        For Each rngCell In rngRow.Columns
            strTextCelll = rngCell.Text
            strTextCell = Replace(strTextCelll, ",", ".")
            If bolErsteSpalte Then
                strText = strTextCell
                bolErsteSpalte = False
            Else
                strText = strText & strDelimiter & strTextCell
            End If
        Next

    Print #lngFN, strText

    Next
Close lngFN

End Sub 
```

正如我已经提到的那样，该子适用于连贯的选择以及多个选定的行，但在涉及多个列时会失败。

子的当前输出可以在这张图片上看到： [多列失败](http://i.stack.imgur.com/05CMG.jpg)

正如人们所期望的那样，我希望 .csv 文件（或相应的 .txt 文件）看起来像这样： [多个列需要输出](http://i.stack.imgur.com/VcxWC.jpg)

对于最后一种情况，如何实现所需的行为？有人会这么好心地将链接包含为图像吗？当然，如果认为合适的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:21:58.283

这可能看起来有点复杂，但你的用例不是很简单......

它确实假定每个选定区域的大小相同，并且它们都排成一行（作为行或列）

```
Sub Tester()

Dim s As String, srow As String, sep As String
Dim a1 As Range, rw As Range, c As Range, rCount As Long
Dim areaCount As Long, x As Long
Dim bColumnsSelected As Boolean
Dim sel As Range

    bColumnsSelected = False
    Set sel = Selection

    areaCount = Selection.Areas.Count
    Set a1 = Selection.Areas(1)

    If areaCount > 1 Then
        If a1.Cells(1).Column <> Selection.Areas(2).Cells(1).Column Then
            'areas represent different columns (not different rows)
            bColumnsSelected = True
            Set sel = a1
        End If
    End If

    rCount = 0

    For Each rw In sel.Rows

        rCount = rCount + 1
        srow = ""
        sep = ""

        For Each c In rw.Cells
            srow = srow & sep & Replace(c.Text, ",", ".")
            sep = ","
        Next c

        'if there are multiple areas selected (as columns), then include those
        If bColumnsSelected Then
            For x = 2 To areaCount
                For Each c In Selection.Areas(x).Rows(rCount).Cells
                    srow = srow & sep & Replace(c.Text, ",", ".")
                Next c
            Next x
        End If

        s = s & IIf(Len(s) > 0, vbCrLf, "") & srow
    Next rw

    Debug.Print s

End Sub 
```

# java - 为什么在创建对象时出现“找不到符号”错误？

> ID：14970346
> 
> 赞同：2
> 
> 时间：2013-02-20T00:41:20.280
> 
> 标签：java

当我尝试从之前定义的类创建新对象时，我不断收到“找不到符号”错误，并且在构造函数的第一个“SnowFallReport”中有一个指向“S”的箭头。我在尝试在其他程序中创建其他对象时遇到了这个问题，我只想扔掉我的笔记本电脑！我觉得这是一个简单的解决方案，我只是不知道它是什么。

代码如下：

```
import java.util.Random;

public class SnowfallReport
{   

    // Random amount of snow
    private double snowAmount;

    // Default constructor creates random amount and assigns to snowAmount
    public void SnowFallReport()
    {
        Random snowFall = new Random();
        snowAmount = (snowFall.nextDouble()) * 20;
    }

    public double getSnow()
    {
        return snowAmount;
    }

    public void getStars()
    {
        for (int starAmount = 0; starAmount == snowAmount; starAmount++)
        {
            System.out.print("*");
        }
    }

    public static void main(String[] args)
    {
        **SnowFallReport day1 = new SnowFallReport();**
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T00:42:45.867

`java is case sensitive language` **降雪报告！=降雪报告**

因此，您的班级名称就是`SnowfallReport`您创建的对象，例如：

```
SnowfallReport  ref = new SnowfallReport (); 
```

此外，构造函数名称应该与类名称相同，并且它们没有返回类型，甚至没有 void。

```
// Default constructor creates random amount and assigns to snowAmount
    public void SnowFallReport()
    { 
```

应该

```
 public SnowfallReport()
        { 
```

# actionscript-3 - 查看 DisplayObjects 时不合逻辑的删除子错误，flash AS3

> ID：14970348
> 
> 赞同：0
> 
> 时间：2013-02-20T00:41:25.193
> 
> 标签：actionscript-3, flash, removechild, displayobject

# 参数错误 #2025：

## *提供的 DisplayObject 不是调用者的子对象*

在我的程序中，我有一个显示对象的结构，代表屏幕上的敌方单位，排列如下：

```
0: "enemy handler" ➔ [object EnemyHandler]
  0: "enemy" ➔ [object Enemy1]
    0: "enemy's skin"(MovieClip) ➔ [object EnemySkin1]
      0: "skin image" ➔ [object Shape] 
```

文档类包含一个*EnemyHandler*实例，它包含多个*Enemy1*、*Enemy2*等实例。每个实例都附加了一个皮肤 MovieClip。

当 Enemy 到达某个点时，Enemy 类（Enemy1/2/3 等继承自它）包含一个属性*expired ，该属性在 Enemy 类 (enemy.update) 中设置为 true。*

在敌人处理程序类中有一个函数，也是问题所在，它循环遍历所有敌人显示对象的数组，更新那里的位置，然后，

```
if(tempEnemy.expired)
{
    tempEnemy.destroy();            // removeChild(skin)
    enemyList.splice(tempEnemy);
    removeChild(tempEnemy)
} 
```

运行时，如果所有敌人都按照它们创建的顺序到达终点，则没有问题，但是如果一个例如移动得更快，并且之前到达终点，则会出现错误 #2025（提供的 DisplayObject 是不是调用者的孩子）被抛出。

我已将其范围缩小到程序试图***两次***移除敌人的事实，原因我无法辨别。它循环并删除所需的敌人，然后尝试再次删除它，即使它是从数组中拼接的（这发生正确，并且第一次尝试 removeChild 总是成功的）

就我而言，这可能是相当简单的事情，所以请原谅我，但感谢您提供任何帮助。这是文件；

[框架上的代码] pastebin.com/vcXzQpr9

[Enemy.as] pastebin.com/RNXgK8Ex

[EnemyHandler.as] pastebin.com/6fytxbMW

[Enemy0.as] & [Enemy1.as] pastebin.com/5bW3Aa0H

[Utils.as] pastebin.com/PQ2LPV0v

[traceDl.as] {debuggnig 显示列表} pastebin.com/9vQGKcYP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:08:23.433

[`Array.splice()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)为要开始拼接的位置取一个整数，然后是要删除的项目数。所以你需要使用

```
enemyList.splice(enemyList.indexOf(tempEnemy), 1); 
```

而不是传递`Enemy`实例。当订单没有改变时，它可能看起来工作正常，因为强制`tempEnemy`到`int`（这`splice()`将自动完成）会产生一个零，所以在你的`destroyEnemy`函数中它实际上只是每次都删除列表中的第一项。

# c++ - 是`std::vector ::clear()` 一个恒定时间操作？

> ID：14970349
> 
> 赞同：11
> 
> 时间：2013-02-20T00:41:28.447
> 
> 标签：c++, vector, stl

调用`clear()`向量将调用存储在向量中的任何内容的析构函数，这是一个线性时间操作。但是当向量包含像`int`or这样的原始类型时，情况是否如此`double`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T00:58:03.633

我相信答案取决于实现。它*最多*需要线性时间，但一些实现可能会选择优化这一点。

Per '[清除向量会影响其容量吗？](https://stackoverflow.com/questions/6882799/does-clearing-a-vector-affect-its-capacity)'，MSVC 和 G++ 都不会降低其向量的容量，即使在`.clear`被调用时也是如此。查看 G++ 标头，很明显，`.clear`默认分配器是恒定时间的，只要元素是标量（原始算术类型或指针）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T00:45:37.297

从可能如何实施的 POV 考虑这一点`vector`。当您调用时：

```
 delete [] internalPtr; 
```

怎么了？

*   堆必须回收一个连续的空间块
*   析构函数必须触发或在 internalPtr 中的每个对象

对于原始类型，前者仍然必须发生，但它们不存在析构函数。所以`delete[]`将完全根据堆删除一块内存的速度来执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:52:05.810

在这个链接中：

[http://www.cplusplus.com/reference/vector/vector/clear/](http://www.cplusplus.com/reference/vector/vector/clear/)

它说复杂性的`clear()`大小是线性的（破坏）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:59:18.360

好吧..它说 clear() 是线性的，但我们也知道它调用每个项目的析构函数...

[http://www.cplusplus.com/reference/vector/vector/clear/](http://www.cplusplus.com/reference/vector/vector/clear/)

如果析构函数调用不是线性的怎么办？

然而，在原语上，析构函数调用是线性的（或常数，这并不重要，除非它不超过线性）

所以是的，在原语上是 clear() 总是一个线性运算

# php - php在特定位置推送

> ID：14970350
> 
> 赞同：0
> 
> 时间：2013-02-20T00:41:27.977
> 
> 标签：php

这是我的基本数组：

```
$array = array(0 => 'value 1', 1 => 'value 2', 2 => 'value 3', 3 => 'value 4'); 
```

当我输入：

```
array_push($array, 'New Value'); 
```

我的结果是：

```
Array
(
    [0] => value 1
    [1] => value 2
    [2] => value 3
    [3] => value 4
    [4] => New Value
) 
```

但我想要这样的结果：

```
Array
(
    [0] => value 1
    [1] => New Value
    [2] => value 2
    [3] => value 3
    [4] => value 4
) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:43:12.347

利用：

`array_splice($array, 1, 0, 'New Value');`

第二个参数是数组中的位置。

`array_splice()`当您想在数组中间的某个位置（不是在开头或结尾）注入项目或者如果您想删除数组中间的元素时，它非常有用。

# python - Writelines (python) 清除它应该写入的文本文件，并且什么也不写

> ID：14970351
> 
> 赞同：1
> 
> 时间：2013-02-20T00:41:34.590
> 
> 标签：python, file, list

我所做的是非常基本的，但由于某种原因实际上并没有将任何内容写入我需要的文本文件中。

我做的第一件事是从用户那里获得输入并将其分配给`assoc`. 这工作得很好，因为我可以随时打印出来`assoc`，而且看起来工作得很好。

接下来，我根据是否`assoc`等于 0、1 或 2 打开一个不同的文件。我读取所有行并将读取行的列表分配给变量`beta`，然后获取 beta 的长度并将其分配给`prodlen`，添加一二`prodlen`并将该新值分配给`localid`并关闭对象。我包括这个的唯一原因是因为我担心我错过了一些重要而简单的东西。

```
if assoc==0:
    fob=open('pathto/textfile1.txt','r')
if assoc==1:
    fob=open('pathto/textfile2.txt','r')
if assoc==2:
    fob=open('pathto/textfile3.txt','r')

beta=fob.readlines();
prodlen=len(beta);
localid=prodlen+1;
fob.close; 
```

在获得用户输入后，打开文件，列出其内容并读取其长度，然后我再次使用用户输入以写入权限打开文件。（我只包含了一个可能的 if 语句，因为除了写入哪个文件以及字符串 VALUE 是什么之外，其他语句是相同的）。我在 list beta`\n`后面加上一个换行符，后面跟着一个字符串，这里用`VALUE`. 然后我以字符串形式添加`localid`到末尾。

```
if assoc==0:
    fob=open('pathto/textfile1.txt','w')
    beta.append("\nVALUE"+str(localid))
    print (beta)
    fob.writelines(beta) 
```

**不过，我真正的问题在于最后两行。当我打印出列表 beta 时，它包含我附加的新值。但是当我尝试将列表写入文件时，它会清除文件中当前的所有数据，并且不会在其中写入任何内容！** 我是 python 菜鸟，所以请保持解决方案简单（如果可能）。我认为解决方案相对简单。我可能只是忽略了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:44:00.537

使用该`'a'`选项而不是`'w'`在您的`open`通话中。w 覆盖， a 追加。

[http://docs.python.org/2/library/functions.html#open](http://docs.python.org/2/library/functions.html#open)

[python打开内置函数：模式a、a+、w、w+、r+的区别？](https://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r)

是对不同模式的有用解释。

# iphone - 如何在 actionscript 3.0 中从适用于 iOS 的 cameraUI 旋转图像

> ID：14970353
> 
> 赞同：0
> 
> 时间：2013-02-20T00:41:43.330
> 
> 标签：iphone, ios, actionscript-3, flash-builder

我正在我的 Flash 构建器中构建一个带有 actionscript 3.0 的应用程序。这是[此问题](https://stackoverflow.com/questions/14740323/how-to-upload-a-picture-image-from-iphone-to-app-in-actionscript-3)的后续问题，它有效，但是当我拍照时，图像向左旋转。如何检查用户拿着手机的方式？然后我用什么代码将图像旋转到相应的位置？

提前致谢！

**编辑：** 我正在使用此代码旋转图像，但它似乎只旋转正在显示的图像而不是图像文件，有什么想法吗？

```
var mat:Matrix = new Matrix();
mat.translate(-W/2, -H/2);
mat.rotate(Math.PI/2);
mat.translate(+W/2, +H/2);
mat.concat(myObj.transform.matrix);
myObj.transform.matrix = mat; 
```

～喵喵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T20:24:14.640

当您激活 cameraUI 视图时，您无法获取`stage.orientation`数据，所以这是我解决相同问题的方法，请注意这个控制器有许多可重用的功能，我首先从 media promise 获取原始图像数据（这个原始数据有 EXIF 数据我将读取以从相机获取图像方向）然后将此 byteArray 转换为 BitmapData，然后根据需要调整大小和缩放。需要注意的一件事是，如果您将原始图像数据转换为位图数据，您将丢失 EXIF 数据，因此请在修改图像之前阅读它，希望这会有所帮助，我很晚才在这里发布我知道但网络上没有其他解决方案和也许有人会在某个时候需要这个。干杯

快照控制器.as

```
package controllers
{

    import flash.display.BitmapData;
    import flash.display.JPEGEncoderOptions;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.IEventDispatcher;
    import flash.events.MediaEvent;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import flash.geom.Matrix;
    import flash.geom.Rectangle;
    import flash.media.CameraUI;
    import flash.media.MediaPromise;
    import flash.media.MediaType;
    import flash.utils.ByteArray;
    import flash.utils.IDataInput;

    import mx.utils.Base64Encoder;

    import classes.APIupload;

    public class SnapshotController
    {
        private var cameraUI:CameraUI = new CameraUI();
        private var dataSource:IDataInput; 
        private var tempDir:File = new File();
        private var imageOrientation:int = 0 ;

        public function SnapshotController()
        {

        }

        public function LaunchCameraUI():void
        {

            if( CameraUI.isSupported ) {
                trace( "Initializing camera..." ); 
                cameraUI.addEventListener( MediaEvent.COMPLETE, imageSelected ); 
                cameraUI.launch( MediaType.IMAGE ); 
            } else {
                trace( "CameraUI is not supported."); 
            }
        }

        private function imageSelected( event:MediaEvent ):void {
            trace( "Media selected..." ); 
            var imagePromise:MediaPromise = event.data; 

            dataSource = imagePromise.open(); 
            if( imagePromise.isAsync ) {
                trace( "Asynchronous media promise." ); 
                var eventSource:IEventDispatcher = dataSource as IEventDispatcher; 
                eventSource.addEventListener( Event.COMPLETE, onMediaLoaded );
            } else {
                trace( "Synchronous media promise." ); 
                readMediaData(); 
            }
        } 
        private function onMediaLoaded( event:Event ):void {
            trace("Media load complete"); 
            readMediaData();
        } 

        private function readMediaData():void { 
            var imageBytes:ByteArray = new ByteArray(); 
            dataSource.readBytes( imageBytes );

            imageOrientation = getOrientation(imageBytes);

            //saveImageFile(imageBytes);
            //Saving this byteArray will save a big file with the EXIF in it.

            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.INIT, onMediaPromiseLoaded);
            loader.loadBytes(imageBytes);

        } 

        private function onMediaPromiseLoaded(e:Event):void
        {
            trace("Media file loaded");
            var base64Enc:Base64Encoder = new Base64Encoder();
            var mpLoaderInfo:LoaderInfo = e.target as LoaderInfo;
            mpLoaderInfo.removeEventListener(Event.COMPLETE, onMediaPromiseLoaded);

            var scale:Number = 0.25;
            var matrix:Matrix = new Matrix();
            matrix.scale(scale, scale);

            var jpgQuality:int = 80;

            var bmd:BitmapData = new BitmapData(mpLoaderInfo.width*scale, mpLoaderInfo.height*scale);
            bmd.draw(mpLoaderInfo.content,matrix,null,null,null,true);  

            var rotatedBMD:BitmapData = rotateBitmapData(bmd, imageOrientation);
            var bytes:ByteArray = rotatedBMD.encode(new Rectangle(0,0, rotatedBMD.width , rotatedBMD.height), new JPEGEncoderOptions(jpgQuality), bytes);

            saveImageFile(bytes); //this is the smaller file saved. it does not have EXIF data but you can write your own using AS3 eXIF class.

        } 

        private function rotateBitmapData( bitmapData:BitmapData, degree:int = 0 ) :BitmapData
        {
            var newBitmap:BitmapData;
            var matrix:Matrix = new Matrix();
            matrix.rotate( degree * (Math.PI / 180)  );

            if ( degree == 90 ) {
                newBitmap = new BitmapData( bitmapData.height, bitmapData.width, true );
                matrix.translate( bitmapData.height, 0 );
            } else if ( degree == -90 || degree == 270) {
                newBitmap = new BitmapData( bitmapData.height, bitmapData.width, true );
                matrix.translate( 0, bitmapData.width );
            } else if ( degree == 180 ) {
                newBitmap = new BitmapData( bitmapData.width, bitmapData.height, true );
                matrix.translate( bitmapData.width, bitmapData.height );
            }else if(degree == 0){
                newBitmap = new BitmapData( bitmapData.width, bitmapData.height, true );
                //matrix.translate( bitmapData.width, bitmapData.height );
            }

            newBitmap.draw( bitmapData, matrix, null, null, null, true )
            return newBitmap;
        }

        private function saveImageFile(ba:ByteArray):void{
            var now:Date = new Date(); 
            var filename:String = "IMG" + now.fullYear + now.month + now.day + now.hours + now.minutes + now.seconds + ".jpg";
            var temp:File = File.documentsDirectory.resolvePath( filename );
            var stream:FileStream = new FileStream(); 
            stream.open( temp, FileMode.WRITE ); 
            stream.writeBytes( ba ); 
            stream.close();
        }

        private function getOrientation(jpeg:ByteArray):int{
            if (jpeg == null) {
                return 0;
            }
            var offset:int = 0;
            var length:int = 0;

            while (offset + 3 < jpeg.length && (jpeg[offset++] & 0xFF) == 0xFF) {
                var marker:int = jpeg[offset] & 0xFF;

                // Check if the marker is a padding.
                if (marker == 0xFF) {
                    continue;
                }
                offset++;

                // Check if the marker is SOI or TEM.
                if (marker == 0xD8 || marker == 0x01) {
                    continue;
                }
                // Check if the marker is EOI or SOS.
                if (marker == 0xD9 || marker == 0xDA) {
                    break;
                }

                // Get the length and check if it is reasonable.
                length = pack(jpeg, offset, 2, false);
                if (length < 2 || offset + length > jpeg.length) {
                    trace("Invalid length");
                    return 0;
                }

                // Break if the marker is EXIF in APP1.
                if (marker == 0xE1 && length >= 8 &&
                    pack(jpeg, offset + 2, 4, false) == 0x45786966 &&
                    pack(jpeg, offset + 6, 2, false) == 0) {
                    offset += 8;
                    length -= 8;
                    break;
                }

                // Skip other markers.
                offset += length;
                length = 0;
            }

            if (length > 8) {
                // Identify the byte order.
                var tag:int = pack(jpeg, offset, 4, false);
                if (tag != 0x49492A00 && tag != 0x4D4D002A) {
                    trace("Invalid byte order");
                    return 0;
                }
                var littleEndian:Boolean = (tag == 0x49492A00);

                // Get the offset and check if it is reasonable.
                var count:int = pack(jpeg, offset + 4, 4, littleEndian) + 2;
                if (count < 10 || count > length) {
                    trace( "Invalid offset");
                    return 0;
                }
                offset += count;
                length -= count;

                // Get the count and go through all the elements.
                count = pack(jpeg, offset - 2, 2, littleEndian);
                while (count-- > 0 && length >= 12) {
                    // Get the tag and check if it is orientation.
                    tag = pack(jpeg, offset, 2, littleEndian);
                    if (tag == 0x0112) {
                        // We do not really care about type and count, do we?
                        var orientation:int = pack(jpeg, offset + 8, 2, littleEndian);
                        switch (orientation) {
                            case 1:
                                return 0;
                            case 3:
                                return 180;
                            case 6:
                                return 90;
                            case 8:
                                return 270;
                        }
                        trace( "Unsupported orientation");
                        return 0;
                    }
                    offset += 12;
                    length -= 12;
                }
            }

            trace( "Orientation not found");
            return 0;

        }

        private function pack(bytes:ByteArray,offset:int,length:int,
                              littleEndian:Boolean):int {
            var step:int = 1;
            if (littleEndian) {
                offset += length - 1;
                step = -1;
            }

            var value:int = 0;
            while (length-- > 0) {
                value = (value << 8) | (bytes[offset] & 0xFF);
                offset += step;
            }
            return value;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:09:20.390

您可以使用[Stage.deviceOrientation](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#deviceOrientation)或[Stage.orientation](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#orientation) * 来确定手机的方向。

*不确定这个是否适用于iOS

您想要旋转的是 BitmapData 结果本身（即创建一个带有旋转图像的新 BitmapData）还是只是旋转显示列表上的 Bitmap？

编辑：

好的，这是一些旋转 BitmapData 对象的代码：

```
function rotateBitmapData(angle:int, source:BitmapData):BitmapData
{
    var newWidth:int = source.rect.width;
    var newHeight:int = source.rect.height;
    if (angle==90 || angle==270)
    {
        newWidth = source.rect.height;
        newHeight = source.rect.width;
    }
    var newBmd:BitmapData = new BitmapData(newWidth, newHeight, source.transparent);
    var tx:Number = 0;
    var ty:Number = 0;
    if (angle==90 || angle==180)
    {
        tx = newWidth;
}
    if (angle==180 || angle==270)
    {
        ty = newHeight;
    }
    var matrix:Matrix = new Matrix();
    matrix.createBox(1, 1, Math.PI*angle/180, tx, ty);
    newBmd.draw(source, matrix);
    return newBmd;
} 
```

角度应为 0,90,180 或 270。它将返回按指定角度旋转的新 BitmapData 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:00:31.060

您可以使用`StageOrientationEvent.ORIENTATION_CHANGING`事件：

```
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING, OrientationChangeHandler);

private function OrientationChangeHandler(e:StageOrientationEvent):void
        {
            switch (e.afterOrientation)
            {

                case StageOrientation.DEFAULT :

                break;
            case StageOrientation.ROTATED_RIGHT :

                break;
            case StageOrientation.ROTATED_LEFT :

                break;
            case StageOrientation.UPSIDE_DOWN :

                break;
            }
        } 
```

这可以帮助你。

# jquery - jQuery引用旋转器使用slideUp和slideDown

> ID：14970357
> 
> 赞同：0
> 
> 时间：2013-02-20T00:42:01.040
> 
> 标签：jquery

我设置了一个报价旋转器，它一次显示两个报价，并且当它应该在每个报价之间平稳旋转时，它会在整个地方跳跃。我不知道出了什么问题。在这里查看它的实际效果 - [http://jsfiddle.net/RF3xK/1/](http://jsfiddle.net/RF3xK/1/)

代码如下，

```
<div id="quotes">
<div class="textItem">
    testing the quotes testing the quotes
</div>
<div class="textItem">
    asdfdsaf sdf sdf sdf sf sd fsdaf sdf sdaf sdfsd f ds f dsf asdfsdafdsaf asdfdsaf sdf sdf sdf sf sd fsdaf sdf sdaf sdfsd f ds f dsf asdfsdafdsaf
</div>  
<div class="textItem">
    and another one
</div> 
```

和 jQuery

```
$(document).ready(function() {
$('#quotes .textItem').hide();
InOut($('#quotes .textItem:first'));

function InOut(elem) {
elem.delay().slideUp(800).delay(0).slideDown(0, function() {
    if (elem.next().length > 0) {
        InOut($(this).next());
    }
    else {
        InOut($(this).siblings(':first'));
    }
});
}

$('#quotes .textItem').mouseover(function() {
$(this).stop(true, true);
});
$('#quotes .textItem').mouseout(function() {
if ($(this).is(":visible") == true) {
    InOut($(this));
}
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:40:18.830

我看不出用你写的方式来修复它，所以这里有一种不同的方法：

[http://jsfiddle.net/tFHWf/2/](http://jsfiddle.net/tFHWf/2/)

```
var InOutInterval;
$(document).ready(function() {
    var textItems = $('.textItem'), 
        i = 0,
        setInOut = function(){        
            clearInterval(InOutInterval);
            InOutInterval = setInterval(function(){        
                textItems.eq(i%textItems.length).slideUp();
                textItems.eq((i+1)%textItems.length).slideDown();
                i++
            }, 800);        
        },
        pauseInOut = function(){
            clearInterval(InOutInterval);
        };
    textItems.eq(0).show();
    setInOut();    
    $('#quotes').hover(pauseInOut,setInOut);
}); 
```

# php - 找不到时重定向

> ID：14970359
> 
> 赞同：0
> 
> 时间：2013-02-20T00:42:17.313
> 
> 标签：php, .htaccess

我有一个名为“wlatw.co”（和 .com）的域（'**哇！看看这个网站！** '）让我和我的一些朋友制作缩短的 URL。我刚刚将它从处理一些粗俗的 javascript 的慢版本升级到超快速的 PHP header() 重定向。它曾经是这样的：“r.wlatw.co/alca”，但我更喜欢“wlatw.co/alca”。我希望 .htaccess 将丢失的页面（例如“/alca”（因为它在服务器上不存在））重定向到它将重定向的“wlatw.co/redir.php?r=alca”。（在引号之外加上逗号和句点，以免混淆某人:)）

wlatw.co/ *RedirectName* = 404 **redirect** redir.php?r= *RedirectName* **redirect** *Page To Redirect To*

*a* **重定向** *b* **重定向**c

a 到 b 通过 .htaccess。redir.php 从 b 到 c。

因此，除非有人知道使用 htaccess 读取 XML 的某种方法，否则我更喜欢这种方法！

* * *

## XML 设置示例：

..如果需要（或供路过的人参考）

```
<redirect>
    <short>
        <name>alca</name>                     <!-- like wlatw.co/alca -->
        <creator>255.255.255.255</creator>    <!-- ip address or username -->
        <date>1/6/13</date>                   <!-- the date! -->
        <time>10:52PM</time>                  <!-- the time! -->
        <url>http://www.alcadesign.com/</url> <!-- where to go to -->
    </short>
</redirect> 
```

和

## PHP：

这是**redir.php**

```
<?php
    if(file_exists('redirects.xml')) {
        $xml = simplexml_load_file('redirects.xml');
        if(isset($_GET['r']) && $_GET['r'] != '' && !is_array($_GET['r'])) {
            foreach($xml->short as $shorts) {
                if($shorts->name == $_GET['r']) {
                    header('Location: '.$shorts->url);
                    break;
                }
            }
        }
        else {
            header("refresh:2;url=http://www.wlatw.co/");
            echo '<div align="center" style="font-weight: bolder; font-size: 24px;">Malformed URL</div><div align="center" style="font-weight: bolder; font-size: 16px;">Redirecting...</div>';
        }
    }
?> 
```

关于 PHP，如果有人知道如何从 foreach 循环中判断它是否成功并回显

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:24:36.407

似乎没有人回答正确的答案，所以我环顾四周，发现了这个备忘单： http: [//www.addedbytes.com/download/mod_rewrite-cheat-sheet-v2/pdf/](http://www.addedbytes.com/download/mod_rewrite-cheat-sheet-v2/pdf/)

我修改了“漂亮的 URL”示例以供我使用：

```
RewriteRule ^([A-Za-z0-9-]+)/?$ redir.php?r=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:39:28.343

您正在尝试做的事情并不完全按照您期望的方式工作。

`.htaccess`是 Apache 的一部分，它在你的 PHP 执行时就已经完成了。没有办法回去`.htaccess`重新加载页面。

如果您已经在一个 PHP 文件中，并且已经有了您想要的内容`$_GET['r']`，那么只需`include('redir.php');`在您确定 XML 中不存在该条目之后。

# c - GNU MP 库的 GCD 计算问题

> ID：14970364
> 
> 赞同：3
> 
> 时间：2013-02-20T00:43:03.577
> 
> 标签：c, algorithm, gmp, greatest-common-divisor

我有一个关于 GNU MP 的问题，请你帮我解决这个问题。我在 Windows 上使用“GNU 多精度算术库”5.1.1 版。(MinGW\gcc + MSYS)

存在一个 mpz_gcd 函数来计算两个整数的“gcd”。

```
void mpz_gcd (mpz_t rop, mpz_t op1, mpz_t op2); 
```

据我从文档中得到的，在 GNU MP 中实现了几种算法，用于计算最大公约数。其中：

*   二进制 GCD
*   Lehmer 算法
*   次二次 GCD

使用的算法似乎是根据整数的输入大小自动选择的。

> 目前，二进制算法仅在 N < 3 时用于 GCD。
> 
> 对于大于 GCD_DC_THRESHOLD 的输入，通过 HGCD（Half GCD）函数计算 GCD，作为对 Lehmer 算法的推广。

所以，我想至少有三种不同的方法可以得到 gcd(a, b)。我的主要问题：我想自己指定使用哪种算法。我将比较这些算法在随机大输入（即 10^5 位）上的执行时间，以找出一些常见趋势：使用“二进制 GCD”变得比“Lehmer 方法”更差的点是“HGCD-Lehmer”泛化”确实比直接的 Lehmer 等要好。

有没有简单的方法来指定您要使用的算法？从库中提取此算法的任何方式，修改某些“#define”变量的任何方式。是否可以在不重新编译库的情况下做我想做的事情？我只是那里的初学者，我觉得无法弄清楚图书馆里的所有东西。

PS 可能有人会对此感兴趣。我在 github 上有一些代码：[https ://github.com/int000h/gcd_gcc](https://github.com/int000h/gcd_gcc)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T01:05:04.430

这是阅读源代码的好时机。GMP 是开源的——利用它！

在`mpn/generic/gcd.c`您将找到选择 GCD 算法的函数（这实际上是一个公共函数，它出现在文档中）：

```
mp_size_t
mpn_gcd (mp_ptr gp, mp_ptr up, mp_size_t usize, mp_ptr vp, mp_size_t n)
{
    ...
    if (ABOVE_THRESHOLD (n, GCD_DC_THRESHOLD)) {
        ... 
```

您可以看到该函数有三个主要分支，每个分支都以`return`语句结尾。每个分支对应一个不同的 GCD 算法。您可以将代码复制并粘贴到您自己的应用程序中并对其进行修改，以便您可以准确指定所需的算法。尖端：

*   你可以摆脱`#ifdefs`. 假设`TUNE_GCD_P`未定义。

*   这是一个`mpn_*`函数而不是一个`mpz_*`函数。它是较低级别的：例如，您必须为输出显式分配空间。您可能还希望从更高级别的函数中复制代码，`mpz_gcd()`.

*   您需要提取内部函数的原型，例如`mpn_hgcd_matrix_adjust()`. 只需从 GMP 源代码中复制原型即可。别担心，内部函数似乎是从共享库中导出的（它们通常不应该是，但它们是，所以你很好）。

无需重新编译库，但您需要在这里做一些工作。

# android - 为什么 ActionBarSherlock 没有响应？

> ID：14970367
> 
> 赞同：2
> 
> 时间：2013-02-20T00:43:13.420
> 
> 标签：android, menu, actionbarsherlock, listener

我是 android 的菜鸟，我正在使用 ActionBarSherlock 的菜单栏来访问菜单。在低于 API 11 的 Android API 上一切正常，但对于任何 API 11 及以上的菜单栏/菜单项都没有响应。当我单击菜单项时它们会突出显示，但它们不会执行。几乎就像菜单项失去了他们的听众一样，是否有我忘记实施的设置？任何帮助是极大的赞赏。

我的代码：

```
//My Sherlock wrapper 
ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);

//OnCreate
setTheme(R.style.Theme_Sherlock);
mSherlock.setContentView(R.layout.main);

 //Menu Methods
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId())
    {
        case 1:   // id from the xml file
            Intent i = new Intent("com.bmoney.GSCC.OPTIONS");
            startActivity(i);
            return true;   // we handled the click, dont pass it up the chain

        case 2:   // id from the xml file
            Intent i2 = new Intent("com.bmoney.GSCC.PREFS");
            startActivity(i2);
            return true;
    }
    return false;
}

   @Override
    public boolean onCreateOptionsMenu(android.view.Menu menu) {
        // TODO Auto-generated method stub
        return mSherlock.dispatchCreateOptionsMenu(menu);

    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) { //<-- has Sherlock Menu Import

        menu.add(0,1,0,"Preferences").setIcon(R.drawable.ic_action_example).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        menu.add(0,2,0,"Help").setIcon(R.drawable.info).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:55:05.647

如果我不得不猜测，您的导入 for`MenuItem`是 for `android.view.MenuItem`，而不是 Sherlock 等价物。

如果是这样，我建议：

*   你添加`@Override`到`onOptionsItemSelected()`

*   您删除所有`android.view.*`导入，然后将它们重新添加为 Sherlock 导入（例如，通过 Eclipse 中的 Ctrl-Shift-O）

*   您合并了两种`onCreateOptionsMenu()`方法，使用带有 Sherlock 导入的一种方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:59:56.457

我认为答案是您在处理菜单事件时需要“返回真”。

此外，您可能会发现，如果您将方法重组为以下内容，您将更容易阅读和维护它。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

switch (item.getItemId())
{
    case R.id.options:   // id from the xml file
        Intent i = new Intent("com.bmoney.GSCC.OPTIONS");
        startActivity(i);
        return true;   // we handled the click, dont pass it up the chain

    case R.id.prefs:   // id from the xml file
        Intent i = new Intent("com.bmoney.GSCC.PREFS");
        startActivity(i);
        return true;
}

return false; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T03:39:43.553

我认为当您在 onCreateOptionsMenu 中添加菜单项时，您应该在菜单项中添加一个 OnMenuItemClickListener。然后添加 OnMenuItemSelected 方法并在 OnMenuItemSelected 方法中实现您在 onOptionItemSelected 中的代码。所以你应该...

```
@Override
public boolean onMenuItemClick(MenuItem item) {  

     // Code from inside onoptionItemSelected
} 
```

# c++ - c ++就地初始化匿名数组

> ID：14970378
> 
> 赞同：1
> 
> 时间：2013-02-20T00:44:11.847
> 
> 标签：c++, arrays, initialization

我一直在寻找并且无法找到有关在适当位置初始化数组的任何信息。我想说

```
Card * c = new Card( new Event * []{ new Event(a), new Event(b) } ); 
```

但我认为这是不可能的。那正确吗？我知道你可以说

```
int ns [] = { 1,2 }; 
```

但似乎我无法就地初始化？做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:55:11.953

你可以这样初始化它：

```
Card cards[] = {
    Card(),
    Card()
}; 
```

或者：

```
Card* cards[] = {
    new Card(),
    new Card()
}; 
```

最后一种方式，您必须稍后释放对象：

```
delete cards[0];
delete cards[1]; 
```

**但是**，通常我们希望通过 malloc/new 或 using 动态地完成这一切`std::vector`。

# python - 以模板中的标题为条件？

> ID：14970389
> 
> 赞同：0
> 
> 时间：2013-02-20T00:45:17.837
> 
> 标签：python, django, django-templates

我可以通过执行以下操作获得当前页面标题的输出：

```
{% block title %}{% endblock %} 
```

但是，我如何在有条件的情况下使用它？这似乎不起作用：

```
{% if title == "Bla" %}
   doing some stuff!
{% endif %} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:51:57.007

[根据 Django 文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#operator)，您当前的语法是正确的，请仔细检查是否`title`具有您认为的值。

> **`==`运算符**
> 平等。例子：
> 
> `{% if somevar == "x" %}`
>     `This appears if variable somevar equals the string "x"`
> `{% endif %}`

# php - 存储在文档根目录之外的 sqlite db 的权限

> ID：14970392
> 
> 赞同：1
> 
> 时间：2013-02-20T00:45:45.650
> 
> 标签：php, sqlite

我应该为存储在文档根目录之外并且需要 php 脚本访问的 sqlite db 文件提供什么权限？

*   该文件是否应该归 webserver(lighttpd) 用户所有？或者
*   我应该 chmod 它给 o+rw 烫发吗？（这似乎不是一个好主意）

背景：

*   我正在创建一个*必须*使用 sqlite db 的 php web 应用程序。
*   我决定将 db 文件存储在文档根目录之外，这样它就不能公开访问。
*   该文件需要可由 php 脚本读写。

我对 sqlite 很陌生，所以任何关于存储/权限的最佳实践技巧都将受到高度赞赏。

# c++ - 在 Windows 中安装 C++ DLL、头文件和 Lib 文件

> ID：14970394
> 
> 赞同：0
> 
> 时间：2013-02-20T00:45:58.350
> 
> 标签：c++, windows, dll, mingw, libraries

我正在尝试做的与本网站上的说明完全相同：

[http://www.cprogramming.com/tutorial/sdl/setup.html](http://www.cprogramming.com/tutorial/sdl/setup.html)

唯一的问题是我没有下载mingw32编译器自带的Code Blocks版本。我从[http://www.equation.com/servlet/equation.cmd?fa=fortran](http://www.equation.com/servlet/equation.cmd?fa=fortran)获得了最新版本并将其安装在“C:\gcc”中。因此，它要求我将文件移动到的文件夹不存在。

文章要求我下载这个文件：

SDL-devel-1.2.15-mingw32.tar

然后在该文件中将“include\SDL”文件夹移动到“C:\Program Files\CodeBlocks\include”。（我没有 CodeBlocks\include 文件夹）

然后它要求我将“SDL.dll”移动到“C:\Windows”，这是我能够做到的。

最后它要我将“lib”文件夹的内容复制到“CodeBlocks\lib”文件夹中。（另一个我没有的文件夹，因为我将编译器与代码块安装分开安装）

由于我将编译器安装在 'C:\gcc' 我试图将文件添加到 'C:\gcc\include' 和 'C:\gcc\lib' 文件中，但这不起作用。

我对使用 3rd 方库的过程不是很熟悉。我通常使用 Java，您可以将 .jar 文件与您的代码一起粘贴。我需要 .dll、include 和 lib 文件吗？我实际上需要把它们放在哪里？我也很感激知道为什么？

# objective-c - 向符合 NSComparisonMethods 协议的类添加方法时出错

> ID：14970395
> 
> 赞同：0
> 
> 时间：2013-02-20T00:45:59.900
> 
> 标签：objective-c, cocoa

我需要通过添加几个符合 NSComparisonMethods 协议的方法来扩展 Fraction 类。

这是我的代码：Fraction.h

```
#import <Foundation/Foundation.h>

@protocol NSComparisonMethods

-(BOOL) isEqualTo:(id)object;
-(BOOL) isLessThanOrEqualTo:(id)object;
-(BOOL) isLessThan:(id)object;
-(BOOL) isGreaterThan:(id)object;
-(BOOL) isGreaterThanOrEqualTo:(id)object;
-(BOOL) isNotEqualTo:(id)object;

@end

@interface Fraction : NSObject <NSComparisonMethods>

@property int numerator, denumerator;

-(void) print: (BOOL) test;
-(void) setTo: (int) n over: (int) d;
-(double) convertToNum;
-(void) reduce;
-(id) addFrac:(id)f;
-(void) justPrint;
-(id) initWith:(int)n over:(int)f;
+(Fraction *) allocF;
+(int) count;
+(int) gCounter;

@end 
```

分数.m

```
#import "Fraction.h"

@implementation Fraction

@synthesize numerator, denumerator;

-(BOOL) isEqualTo:(id)object
{
    Fraction *selfCopy = [[Fraction alloc] init];

    if (selfCopy == object) 
        return YES;
    else 
        return NO;
}
//more methods.. 
```

主文件

```
#import <Foundation/Foundation.h>
#import "Fraction.h"
#import "Fraction+MathOperations.h"

int main (int argc, const char * argv[]) {

    @autoreleasepool {

        Fraction *fracA = [[Fraction alloc] init];
        Fraction *fracB = [[Fraction alloc] init];

        id Object;

        [fracA setTo:1 over:4];
        [fracB setTo:1 over:4];

        Object = fracB;

        NSLog(@"%s",[fracA isEqualTo: Object]? "Yes":"No");
    }

    return 0;
} 
```

不应该正常工作吗？我`No`不知道什么..是方法实现中的问题吗？我不能像这样测试对象`(selfCopy == object)`吗？我应该做`selfCopy.numerator`（exedra..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:50:46.993

```
if (selfCopy == object) 
```

这仅检查指针是否相同

尝试

```
-(BOOL) isEqualTo:(id)object
{
    return self.numerator == object.numerator && self.denumerator == object.denumerator :
} 
```

好的，这太简单了，`[fracA setTo:1 over:4]`应该`[fracA setTo:2 over:8]`是相等的，但你应该明白这一点。

* * *

> NSObject 为其中许多方法提供的默认实现适用于实现单个比较方法的对象，其选择器、签名和描述与以下内容匹配：
> 
> > ```
> > - (NSComparisonResult)compare:(id)object; 
> > ```
> 
> 如果接收者小于对象，则此方法应返回 NSOrderedAscending，如果接收者大于对象，则返回 NSOrderedDescending，如果接收者和对象相等，则返回 NSOrderedSame。例如，NSString 并没有实现这个非正式协议中声明的大部分方法，但是 NSString 对象仍然可以正确处理符合这个协议的消息，因为 NSString 实现了一个满足必要要求的 compare: 方法。Cocoa 还包括适当的 compare: NSDate、NSDecimalNumber 和 NSValue 类的方法实现。

所以你最好点个`-compare:`赞

```
-(NSOrderResult) compare:(Fraction *)otherFraction
{
    Fraction *selfReduced = [self fractionReduced]; // should return a unretaind reduced copy
    Fraction *otherReduced= [otherFraction fractionReduced];
    float selfAbs = (float)selfReduced.nominator / (float)selfReduced.denominator;
    float otherAbs = (float)selfReduced.nominator / (float)selfReduced.denominator;
    if (selfAbs > otherAbs) return NSOrderedAscending;
    if (selfAbs > otherAbs) return NSOrderedDescending;
    return NSOrderedSame;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T00:50:28.170

`if (selfCopy == object)`将始终为假，因为您正在比较指针。

您必须对您的实例进行适当的比较。

> 我不能像这样测试对象（selfCopy == object）吗？我应该做 selfCopy.numerator

不，您不需要`self`. 此外，您甚至没有创建 的副本`self`，您只是分配了一个新对象。这就是它应该的样子。

```
-(BOOL)isEqualTo:(id)object
{
    if (self.someValue == object.someValue &&
        self.otherValue == object.otherValue) 
        return YES;
    else 
        return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T23:43:22.707

我的版本：

```
-(BOOL) isEqualTo: (Fraction *) f
{
Fraction *temp1 = [[Fraction alloc] init];
Fraction *temp2 = [[Fraction alloc] init];
[temp1 setTo:[self numerator] over:[self denominator]];
[temp2 setTo:[f numerator] over:[f denominator]];
[temp1 reduce];
[temp2 reduce];

return ([temp1 numerator] == [temp2 numerator])
        && ([temp1 denominator] == [temp2 denominator]);
} 
```

# perl - while 循环和输入 (<>) Perl

> ID：14970397
> 
> 赞同：-4
> 
> 时间：2013-02-20T00:46:09.067
> 
> 标签：perl

如何在用户输入 somting 之前使 while 循环 w8？

```
$var = <>;
while(1){
somting $var;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T00:49:24.420

尝试这样做：

```
use strict; use warnings;

print "type something >>> ";
chomp(my $var = <STDIN>);

while(1){
    print "type something from within the LoOp >>> ";
    chomp($var = <STDIN>);
    print "$var\n";
} 
```

![在此处输入图像描述](../Images/ea680b476128c7f11936842d4b8e4388.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T00:56:35.803

我不完全确定你在问什么，所以这是我的两次尝试..

如果您的意思是一直等到用户输入初始值，那么：

```
my $var = <>; 
```

应该可以正常工作。

如果您想连续接收循环输入，我会这样做：

```
while(my $var = <>){
    something($var);
} 
```

为了更深入地了解这个，我推荐[这个链接。](http://perldoc.perl.org/perlop.html#I/O-Operators)

# javascript - 为什么 css 样式表引用链接？

> ID：14970406
> 
> 赞同：4
> 
> 时间：2013-02-20T00:47:29.050
> 
> 标签：javascript, html, css

如果 CSS 样式表是用 内联定义的`<style>`，那么为什么用 来引用它们`<link>`？

JavaScript 使用`<script>`标签来定义内联脚本并使用 引用它们`<script src="">`，那么为什么不使用`<style src="">`CSS 呢？是否有`<link>`标签可以执行的特殊功能不能使用`<style>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:56:32.550

这种不对称的根源在于HTML 处理脚本`style`和`source`资源的方式不同。Javascript 是（惊喜！）一个脚本，而样式表被认为是一种资源。

众所周知，脚本既可以内联编写，也可以从其他页面中获取，两者都具有相同的元素：`script`. 这就是[规范告诉我们它应该如何工作的方式](http://www.w3.org/TR/2010/WD-html5-20101019/scripting-1.html#script)。

但也根据规范，样式元素定义了页面的样式，这就是它所能做的一切。它不能像`script`标签一样引用任何其他文档的样式。为什么？我不能说更多。

另一方面，链接元素*将*资源链接到您的页面，也可以是样式表和其他东西。因此，当您外包样式时，您不使用`<style>`而是使用`<link>`它。

确实可以想象能够编写类似`<style src=''>`设置样式源的东西，但是，唉，该属性不存在。所以我们不能！

现在我明白说“因为规格是这样说的”可能是最令人满意的答案。但这是我现在能为你做的最好的事情。

[来源：样式](http://www.w3.org/TR/2010/WD-html5-20101019/semantics.html#the-style-element)和[链接](http://www.w3.org/TR/2010/WD-html5-20101019/semantics.html#the-link-element)的规范。

# php - 自定义 mysqli 准备函数

> ID：14970407
> 
> 赞同：2
> 
> 时间：2013-02-20T00:47:34.283
> 
> 标签：php, class, mysqli, prepared-statement, bindparam

我现在正在做我的第一个自己的数据库类，目前我正在做准备功能。

这个函数的作用是接受一个 SQL 查询，然后是一个包含语句变量的数组。我在将参数绑定到语句时遇到问题。

这就是函数现在的样子

```
public function prepare($query, $var) {
    $types = '';
    foreach($var as $a) {
        $type = gettype($a);
        switch($type) {
            case 'integer':
                $types .= 'i';
                break;

            case 'string':
                $types .= 's';
                break;

            default:
                exit('Invalid type: ' . $a .' ' . $type . '(' . count($a) . ')');
                break;
        }
    }

    $stmt = self::$connection->prepare($query);
    $stmt->bind_param($types, $var); // How do I do here??
    $stmt->execute();
    $result = $stmt->get_result();
    while($row = $result->fetch_assoc()) {
        print_r($row);
    }
} 
```

一切都按我的意愿工作（我知道这个功能可以做一些改进，但它做了它需要做的事情）。我已经评论了我无法弄清楚该怎么做的那一行。$var 是一个数组，如果我没记错的话，变量需要用逗号分开传递。这是我无能为力的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:01:12.627

您自己的数据库类的想法很棒。
这里很少有人分享它，出于某种原因，他们更喜欢在他们的代码中使用原始 api 调用。
所以，你正在向前迈出一大步。
但是，这里有一些反对意见：

1.  **如果您要使用本机准备好的语句，请**不要将 mysqli用于您自己的第一个数据库类。**
    请改用 PDO。它将为您节省大量的头痛。**
***   尽管这个函数对你来说很好用，但它没有多大意义：
    *   `switch($type)`代码块没用。Mysql 可以将每个标量值理解为字符串 - 因此您可以**`s`**毫无问题地绑定每个值。
    *   无论如何，来自客户端的大多数整数都有字符串类型。
    *   有一些合法的类型，比如`float`or`NULL`或 object 可以返回一个字符串。所以，自动化在这里行不通。如果要区分不同的类型，则必须改为实现*类型提示占位符*。
    *   **永远不要**`exit`在你的脚本中使用。`throw new Exception('put here your error message')`反而。*   这实际上不是一个准备函数，因为它也执行。所以，给它更通用的名字**

 **但现在你的问题
是使用 mysqli 的直接后果。处理准备好的语句时，这是一场噩梦。不仅可以绑定，还可以检索数据（因为`get_result()`并非在任何地方都可以使用，并且在本地创建应用程序后，您会发现它在共享主机上不起作用）。您可以通过查看[这组为此目的提供的代码](https://stackoverflow.com/a/14961333/285587)来产生想法- 绑定动态数量的变量。

因此，请尽可能远离 mysqli。
使用 PDO，您的功能将像这样简单

```
public function query($query, $var=array())
{
    $stmt = self::$connection->prepare($query);
    $stmt->execute($var);
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
}
// and then used
$data = $db->("SELECT 1");
print_r($data); 
```

你可以[看看我的课](https://github.com/colshrapnel/safemysql)来获得一些想法。
随意询问有关数据库类的任何问题 - 这是一件很棒的事情，我很高兴你能走这条路。

回答评论中的问题。

让您知道，您不是该网站的唯一用户。也有一些无辜的游客。与您不同的是，它们不需要任何错误消息，并且会因一些奇怪的行为和缺乏熟悉的控件而感到害怕。

带有错误消息的 exit() 会做很多坏事

*   抛出一条错误消息，向潜在的攻击者透露一些系统内部信息
*   用奇怪的信息吓唬无辜的用户。“那是什么？谁是无效的？是我的错还是什么？或者可能是病毒？最好离开网站” - 他们认为。
*   杀死中间的脚本，因此可能会导致显示设计撕裂（或根本没有设计）
*   不可恢复地杀死脚本。而抛出的异常可以被捕获并优雅地处理

当连接到 PDO 时，不需要在这里抛出任何东西，因为PDO*已经抛出*了异常。所以，摆脱`try ... catch`它，只留下一行：

```
self::$connection = new PDO($dsn, $user, $pass); 
```

然后创建一个自定义[异常处理程序](http://www.php.net/manual/en/function.set-exception-handler.php)以在 2 种模式下工作：

*   在开发服务器上让它在屏幕上抛出消息。
*   在实时服务器上让它**记录**错误，同时向用户显示通用错误页面

仅当您不想整个脚本死机时才使用 try ... catch - 即仅处理*可恢复*的问题。

顺便说一句，PDO 默认情况下不会在连接时抛出异常。您必须手动设置它：

```
$opt = array( PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION );
self::$connection = new PDO($dsn, $user, $pass, $opt); 
```**

# unix - 单进程崩溃后如何清理套接字？

> ID：14970408
> 
> 赞同：1
> 
> 时间：2013-02-20T00:47:38.183
> 
> 标签：unix, mono, asyncsocket

我正在创建一个单声道聊天服务器，它应该能够打开许多套接字。在决定架构之前，我正在使用单声道进行负载测试。只是为了测试，我创建了一个小型单服务器和单服务器，可以打开 100,000 个套接字/连接，并且运行良好。

我试图达到极限，有时进程崩溃（当然）。但让我担心的是，如果我尝试重新启动进程，它会直接给出“未处理的异常：System.Net.Sockets.SocketException：打开的文件太多”。

所以我猜想文件描述（套接字）以某种方式保持打开，即使我的进程结束。即使几个小时后它仍然会出现此错误，我可以处理它的唯一方法是重新启动我的计算机。如果我们在生产中不知道如何处理它，我们就不会遇到这种问题。

**我的问题：** 无论启动哪个单声道应用程序，Mono 中是否有任何东西可以在全球范围内持续运行，一种我可以在不重新启动计算机的情况下重新启动的服务？或者这不是单声道问题而是 unix 问题，即使我们用 java/C++ 编程也会遇到这种问题？

我检查了以下内容，但没有单进程活着，没有打开套接字，也没有文件：

```
localhost:~ root# ps -ax | grep mono  
1536 ttys002    0:00.00 grep mono 
```

-

```
localhost:~ root# lsof | grep mono  
(nothing) 
```

-

```
localhost:~ root# netstat -a  
Active Internet connections (including servers)  
(no unusual ports are open) 
```

对于开发，我在 OSX 10.7.5 下运行。对于生产，我们可以决定使用哪个平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:57:12.960

这听起来像您需要在套接字上设置（或取消设置）Linger 选项（使用[Socket.SetSocketOption）](http://msdn.microsoft.com/en-us/library/e160993d.aspx)。根据您使用的实际 API，可能会有更好的选择（例如，TcpClient 具有[LingerState](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.lingerstate.aspx)属性）。

# floating-point - 前导零计数器

> ID：14970411
> 
> 赞同：3
> 
> 时间：2013-02-20T00:48:21.323
> 
> 标签：floating-point, hardware, verilog, system-verilog, hdl

我正在为浮点实现标准化单元，我想知道如何有效地实现前导零计数器？

我知道我可以写以下内容，但我想知道如果我的目标是低面积和高能效，是否有更好的方法？：

```
always @(mantissa) begin
  case(mantissa)
    25'b1????????????????????????: newmant = mantissa[24:1];
    25'b01???????????????????????: newmant = mantissa[23:0];
    25'b001??????????????????????: newmant = {mantissa[22:0],1'b0};
    25'b0001?????????????????????: newmant = {mantissa[21:0],2'b0};
    // ... (details ommited for brevity)
  endcase
end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T13:41:31.970

在 VHDL 中（应该很容易移植到 Verilog）：

```
process
   variable leading_zeros : natural;
begin
   leading_zeros := 0;
   for i in input_vector'range loop
      if input_vector(i) = '1' then
         break;
      end if;
      leading_zeros := leading_zeros + 1;
   end for;
end process; 
```

对于非 VHDL 扬声器，所有这些都是`input_vector`从左到右循环所有位，每次看到一个`0`. 一旦找到第一个`1`，它就会退出循环，留下包含前导零数量的计数器。

要确定这是否足够高效，您必须尝试合成 - 让我们知道！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T09:12:37.850

为什么需要前导零计数器？即使您已经计算了前缀中有多少个零，最后您仍然需要比较器和 MUX 来确定您有多少个零并计算输出。由于许多 1'b1 加法器、MUX 和比较器，它可能会浪费更多的性能/面积。

for/while 循环将在合成器中展开为 25 步（根据宽度）。如果您使用前导零计数器，您的体系结构就像

```
// you will have 25 mux and adders
always @(mantissa) begin
  leading_zeros = 0;
  // for-loop expanded
  if (mantissa[24] == 1)
    disable count_n_2;
  else begin : count_n_2
    leading_zeros ++;
    if (mantissa[23] == 1)
       disable count_n_3;
    else begin : count_n_3
      leading_zeros ++;
      ...
    end
  end
end // always

// you will have 25 comparator and mux
always @(leading_zeros) begin
  case(leading_zeros)
    5'd0: newmant = mantissa[24:1];
    5'd1: newmant = mantissa[23:0];
    5'd2: newmant = {mantissa[22:0],1'b0};
    5'd25: ...
  endcase
end 
```

所以...您只需使用自己的设计并使用工具的综合/映射命令来查看它可以做什么来满足您对面积和功率的要求。

# ios - 使用 NSArray 初始化对象数组

> ID：14970412
> 
> 赞同：41
> 
> 时间：2013-02-20T00:48:26.917
> 
> 标签：ios, objective-c, arrays, nsarray

我对 Objective-C 和 iOS 还很陌生，所以我一直在玩 Picker View。我已经定义了一个 Person 类，这样当你创建一个新的 Person 时，它会自动给这个人一个名字和年龄。

```
#import "Person.h"

@implementation Person

@synthesize personName, age;

-(id)init
{
    self = [super init];
    if(self)
    {
        personName = [self randomName];
        age = [self randomAge];
    }

    return self;
}

-(NSString *) randomName
{
    NSString* name;
    NSArray* nameArr = [NSArray arrayWithObjects: @"Jill Valentine", @"Peter Griffin", @"Meg Griffin", @"Jack Lolwut",
                            @"Mike Roflcoptor", @"Cindy Woods", @"Jessica Windmill", @"Alexander The Great",
                            @"Sarah Peterson", @"Scott Scottland", @"Geoff Fanta", @"Amanda Pope", @"Michael Meyers",
                            @"Richard Biggus", @"Montey Python", @"Mike Wut", @"Fake Person", @"Chair",
                            nil];
    NSUInteger randomIndex = arc4random() % [nameArr count];
    name = [nameArr objectAtIndex: randomIndex];
    return name;
}

-(NSInteger *) randomAge
{
    //lowerBound + arc4random() % (upperBound - lowerBound);
    NSInteger* num = (NSInteger*)(1 + arc4random() % (99 - 1));

    return num;
}

@end 
```

现在我想创建一个 Persons 数组，这样我就可以将一堆放入选择器中，选择一个 Person 并显示他们的年龄。首先，虽然我需要创建一个 Persons 数组。如何创建对象数组、初始化和分配它们？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-20T02:30:47.493

这样做还有一个简写：

```
NSArray *persons = @[person1, person2, person3]; 
```

相当于

```
NSArray *persons = [NSArray arrayWithObjects:person1, person2, person3, nil]; 
```

正如 iiFreeman 所说，如果您不使用 ARC，您仍然需要进行适当的内存管理。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-02-20T00:53:33.110

```
NSMutableArray *persons = [NSMutableArray array];
for (int i = 0; i < myPersonsCount; i++) {
   [persons addObject:[[Person alloc] init]];
}
NSArray *arrayOfPersons = [NSArray arrayWithArray:persons]; // if you want immutable array 
```

您也可以在不使用 NSMutableArray 的情况下达到此目的：

```
NSArray *persons = [NSArray array];
for (int i = 0; i < myPersonsCount; i++) {
   persons = [persons arrayByAddingObject:[[Person alloc] init]];
} 
```

还有一件事——它对启用 ARC 的环境有效，如果你要在没有 ARC 的情况下使用它，不要忘记将自动释放的对象添加到数组中！

```
[persons addObject:[[[Person alloc] init] autorelease]; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-13T17:26:46.807

没人评论这个`randomAge`方法吗？

这是大错特错了，不能再错了。

`NSInteger`是一个原始类型 - 它很可能是 typedef 为`int`or `long`。在该`randomAge`方法中，您计算​​大约 1 到 98 之间的数字。

然后你可以将该数字转换为*NSNumber*。您必须添加强制转换，因为编译器给了您一个您不理解的警告。这使警告消失了，但给您留下了一个可怕的错误：该数字被强制为指针，因此现在您在内存的前 100 个字节中的某个位置有一个指向整数的指针。

如果你`NSInteger`通过指针访问一个，你的程序就会崩溃。如果您通过指针写入，您的程序将崩溃。如果将其放入数组或字典中，您的程序将崩溃。

将它更改为`NSInteger`or `int`，这可能是最好的，或者`NSNumber`如果您出于某种原因需要一个对象。然后通过调用**[NSNumber numberWithInteger:99]**或您想要的任何数字来创建对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-28T07:36:36.583

这可能并不能真正回答问题，但以防万一有人只需要**快速将字符串值发送**到需要 NSArray 参数的函数。

```
NSArray *data = @[@"The String Value"]; 
```

如果您需要发送的不仅仅是 1 个字符串值，您还可以使用

```
NSArray *data = @[@"The String Value", @"Second String", @"Third etc"]; 
```

然后您可以将其发送到如下函数

```
theFunction(data); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-09-02T09:38:59.583

**这样就可以创建NSArray、NSMutableArray。**

```
NSArray keys =[NSArray arrayWithObjects:@"key1",@"key2",@"key3",nil];

NSArray objects =[NSArray arrayWithObjects:@"value1",@"value2",@"value3",nil]; 
```

# c - 我可以在 C 中正确地将 0.16、0.32 等转换为整数（16、32 等）吗？

> ID：14970414
> 
> 赞同：1
> 
> 时间：2013-02-20T00:48:39.737
> 
> 标签：c, casting, int, double

我正在尝试将 double 的小数部分转换`247.32` 为 int `32`。我只需要两位小数。

我可以将双精度转换为 int 并从双精度中减去以获得`.32000`

然后我可以乘以 100 得到`32.000`

但是当我尝试将其转换`32.000`为时`int`，它变成了`31`。

我可以解决这个问题吗？我应该使用不同于双精度的数据类型来存储该数字吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:28:51.197

问题（skjaidev 的答案没有解决）是`247.32`不能用二进制浮点精确表示。实际存储的值很可能是：

```
247.31999999999999317878973670303821563720703125 
```

所以你不能只丢弃整数部分，乘以 100，然后转换为`int`，因为转换会*截断*。

中声明的`round()`函数将值`<math.h>`四舍五入`double`到最接近的整数——尽管结果仍然是类型`double`。

```
double a = 247.32;
a -= trunc(a);      /* a == 0.32 -- approximately */
a *= 100.0;         /* a == 32.0 -- approximately */
a = round(a);       /* a == 32.0 -- exactly */
printf ("%d\n", (int)a); 
```

或者，将计算放在一行中：

```
double a = 247.32;
printf("%d\n", (int)round(100.0 * (a - trunc(a)))); 
```

实际上，这可能是一种更清洁的方法：

```
double a = 247.32;
printf("%d\n", (int)round(100.0 * fmod(a, 1.0))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:46:20.263

给定输入值`x`和输出`y`：

```
char buf[5];
snprintf(buf, sizeof buf, "%.2f", fmod(x, 1.0));
y = strtol(buf+2, 0, 10); 
```

或者只是`y = 10*(buf[2]-'0')+buf[3]-'0';`为了避免`strtol`成本。

这是在不自己编写**大量**代码的情况下做你想做的事情的*唯一*方法，因为函数族是唯一能够执行十进制舍入的标准函数。**`printf`**

 **如果您有一些额外的约束，例如`x`非常接近 1/100 的倍数，您可能会作弊并执行以下操作：

```
int y = ((x+0.001)*100; 
```

顺便说一句，如果您的问题涉及金钱，**请不要使用浮点数来赚钱**！使用以美分为单位的整数或任何您的货币的自然最小单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:55:09.930

由于您只寻找 2 位小数，这对我有用：

```
double a = 247.32;
int b = (int) (a * 100)%100;
printf ("%d\n", b); 
```

**更新**：见下面我的评论。**

# asp.net-mvc - 将自定义属性添加到剔除模型对象

> ID：14970416
> 
> 赞同：0
> 
> 时间：2013-02-20T00:48:44.407
> 
> 标签：asp.net-mvc, knockout.js

我正在使用淘汰赛和 mvc。我调用 mvc 控制器来检索我从中创建模型对象的 json 并将其应用于 div：

```
 myModel = ko.mapping.fromJS(items);
    ko.applyBindings(myModel , document.getElementById("my-container")); 
```

我想知道如何扩展我的 myModel 对象（从控制器的 json 填充）以具有基于从控制器返回的对象的值的自定义属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:20:38.910

通常，您会希望使用`create`文档本节中所述的回调：http: [//knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create](http://knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create)

`myModel`在您的示例中通过映射插件创建属性后，也可以简单地添加属性。

# web-services - 使用 apache2 php 页面和 tomcat REST 调用进行身份验证

> ID：14970421
> 
> 赞同：0
> 
> 时间：2013-02-20T00:48:58.243
> 
> 标签：web-services, rest, authentication, tomcat, apache2

你好，stackoverflow 上的聪明人，
如果有人能指点我正确的库/框架来做我想做的事，我会非常高兴。

我们设置了以下 Web 架构。

```
 1\. We have a tomcat server that offers REST services.
 2\. We have an apache2 server that serves up php pages to users.
    a. Some of these php pages make REST calls to tomcat for data.
    b. Other php pages contain javascript that makes REST calls that are routed through apache2 via mod_proxy to tomcat. e.g. All request to http://myapache.com/PASSTOTOMCAT/rest/getSecureData would go to tomcat. 
```

现在，我被要求为所有内容添加身份验证，包括用户页面和 REST 调用。用户登录一次以访问两者显然是理想的。

我可以为此使用什么库？我认为我不能使用任何基于 php 的解决方案（即涉及添加 a 的解决方案），因为传递 url 将没有机会添加此代码并检查身份验证。我想我需要使用 apache2 本身内置的东西。

一个次要要求是我希望将用户凭据存储在 mysql 数据库中，而不是文件中。

这是我想太多了吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:55:02.823

好吧，已经5天了，所以我想我会回答我自己的问题...

我最终使用了新的 mod_auth_form 进行身份验证，因为它允许您使用漂亮的风格化网页来登录用户。我还使用 mod_dbd 访问 mysql 中的用户凭据。

我找不到一个很好的教程，所以我在安装和设置过程中有点挣扎，但如果有人关心，我在我的博客上创建了一组说明，以防其他人尝试做同样的事情。
[安装](http://kodingnotes.wordpress.com/2013/02/26/authentication-in-apache2-4-part-1-installation/)
[设置](http://kodingnotes.wordpress.com/2013/02/26/authentication-in-apache2-4-part-2-setup/)

# opencv - OpenCV FaceRecognizer 给定矩阵的错误形状

> ID：14970423
> 
> 赞同：0
> 
> 时间：2013-02-20T00:49:19.203
> 
> 标签：opencv

我正在尝试使 FisherFaceRecognizer 的 predict() 方法工作，但我不断收到错误

> 错误的参数（给定矩阵的形状错误。大小（src）=（1,108000），大小（W）=（36000,1）。）在 subspaceProject，文件 /tmp/opencv-DCb7/OpenCV-2.4.3/模块/contrib/src/lda.cpp，第 187 行

这类似于[在 OPENCV 中给定矩阵的错误形状中](https://stackoverflow.com/questions/12032658/wrong-shapes-for-given-matrices-in-opencv)提出的问题， 但在我的情况下，源图像和训练图像都是相同的数据类型，全彩色。

我的代码改编自[http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html#fisherfaces上的教程](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html#fisherfaces)

但是，我的测试图像比训练图像大，所以我需要在正确大小的感兴趣区域 (ROI) 上工作。

这是我阅读图像和转换尺寸的方式。我克隆了 ROI 矩阵，因为较早的错误消息告诉我目标矩阵必须是连续的：

```
vector<Mat> images;
images.push_back( cvLoadImage( trainingList[i].c_str())); 
```

* * *

```
IplImage* img;
img = cvLoadImage( imgName.c_str() ); 
```

* * *

```
// take ROI and clone into a new Mat
Mat testSample1(img, Rect( xLoc, yLoc, images[0].cols, images[0].rows));
Mat testSample = testSample1.clone(); 
```

* * *

```
// Create a FisherFaceRecognizer in OpenCV
Ptr<FaceRecognizer> FFR = createFisherFaceRecognizer(0,DBL_MAX);
model->train(images, labels);

cout << " check of data type testSample is " << testSample.type() << " images is " << images[0].type() << endl;

int predictedLabel = model->predict(testSample);
// 
```

我在预测语句中收到异常消息。

cout 语句告诉我两个矩阵都有类型 16，但不知何故它仍然不相信矩阵的大小和数据类型相同......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:37:21.273

我发现 FisherFaceRecognizer 需要灰度图像，所以我应该像这样加载训练和测试图像：

```
 trainingImages.push_back( imread( trainingList[i].c_str(), CV_LOAD_IMAGE_GRAYSCALE)); 
```

和

```
 Mat img;    
  img = imread( imgName.c_str(), CV_LOAD_IMAGE_GRAYSCALE ); 
```

（还协调了 img 的类型以保持一致性）。OpenCV 参考手册（在线提供pdf）中记录了仅灰度要求，但显然没有在FisherFaceRecognizer 的任何在线教程或其他文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:51:47.843

您应该确保形状，而不是类型

```
cout << testSample.rows << testSample.cols << images[0].rows << images[0].cols ; 
```

还要确保训练 img 和测试 img 都在相同的颜色空间中如果不是，请尝试

```
cvtColor(testSample, testSample_inSameSpaceOfTraining, CV_BGR2***); // default opencv colors "BGR" 
```

# php - 构建动态查询时绑定变量数与标记数不匹配错误

> ID：14970427
> 
> 赞同：1
> 
> 时间：2013-02-20T00:49:29.307
> 
> 标签：php, mysql, pdo

我不断收到以下错误：

> 警告：PDOStatement::execute(): SQLSTATE[HY093]: 无效的参数号：boundvariables 的数量与标记的数量不匹配

尝试构建动态 SQL 查询时。知道损坏在哪里吗？我已经搜索了几个小时，仍然没有运气

```
$park = $_POST["park"];
$lecturestyle_id = $_POST["lecturestyle"];
$group_size = $_POST["groupsize"];
$roomstructure_id = $_POST["roomstructure"];
$array = explode(",", $_POST["facilities"]);

// change Mon here

echo '<td class="gridSide">
Mon
';

// build facilities search

for($i = 0; $i < count($array); $i++){  
    if ($array[$i]!=0) {
    $fac .= ' AND facilities_id='.$array[$i].'';
    }
    else
    $fac .= '';
}

echo '</td>';

for ($i = 1; $i <= 9; $i++) 
{

        // change mon here

        echo '<td class="box" id="mon'.$i.'">';

        // dynamically build sql query

        $sql = 
        "
        SELECT DISTINCT COUNT(*) FROM ts_room rm
        LEFT JOIN ts_roomfacilities rf
        ON rm.id = rf.room_id
        LEFT join ts_facilities f
        ON f.id = rf.facilities_id
        LEFT JOIN ts_building b
        ON rm.building_id=b.id
        WHERE capacity>=:group_size";

        $sql .= $fac;

        if($park!="Any") {
        $sql .= " AND b.park_id=:park";
        }

        if($lecturestyle_id!="Any") {
        $sql .= " AND lecturestyle_id=:lecturestyle_id";
        }

        if($roomstructure_id!="Any") {
        $sql .= " AND roomstructure_id=:roomstructure_id";
        }

        $sql .= " AND rm.id NOT IN
        (SELECT COUNT(*)
         FROM ts_request rq
         LEFT JOIN ts_allocation a ON a.request_id = rq.id
         WHERE 
         day_id=1 AND period_id=:period
         OR a.status IS NOT NULL
         AND a.status IN ('Pending','Declined','Failed'))";

         $stm = $pdo->prepare( $sql );
         $stm->execute( array( ':roomstructure_id' => $roomstructure_id, ':lecturestyle_id' => $lecturestyle_id, 
         ':group_size' => $group_size, ':park' => $park, ':period' => $i));
         $rows = $stm->fetchColumn();

         echo $rows.'<br>free</td>';            
         echo '</td>';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:54:33.680

当您执行 时`$stm->exectue`，您正在为`':roomstructure_id'`、`':lecturestyle_id'`、和提供标记`':group_size'`，无论它们是否*实际*存在于查询中，即它们中的任何一个是否等于。`':park'``':period'`*`'Any'`*

 *您应该做的是在构建查询时构建值数组......只要字段的搜索值*不是* `'Any'`，就向它添加值。

例如

```
if($park!="Any") {
    $sql .= " AND b.park_id=:park";
    $searchArray[':park'] = $park;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:10:28.913

您未分配`:group_size`参数，并`$stm->execute()`接受一维数组。

试试这个：

```
<?php
require_once("../resources/php/connection.php");

$park = $_POST["park"];
$lecturestyle_id = $_POST["lecturestyle"];
$group_size = $_POST["groupsize"];
$roomstructure_id = $_POST["roomstructure"];
$array = explode(",", $_POST["facilities"]);

// change Mon here
echo '<td class="gridSide">Mon';

// build facilities search
echo '</td>';

$fac = null;
for($i = 0; $i < count($array); $i++){
    if ($array[$i]!=0) {
        $fac .= ' AND facilities_id='.$array[$i].'';
    }
}

for ($i = 1; $i <= 9; $i++){

    // change mon here
    echo '<td class="box" id="mon'.$i.'">';

    // dynamically build sql query
    $sql ="SELECT DISTINCT COUNT(*) FROM ts_room rm
                    LEFT JOIN ts_roomfacilities rf
                    ON rm.id = rf.room_id
                    LEFT join ts_facilities f
                    ON f.id = rf.facilities_id
                    LEFT JOIN ts_building b
                    ON rm.building_id=b.id
                    WHERE capacity >= :group_size";

    $sql .= $fac;

    if($park!="Any") {
        $sql .= " AND b.park_id=:park";
        $searchArray[':park'] = $park;
    }

    if($lecturestyle_id!="Any") {
        $sql .= " AND lecturestyle_id=:lecturestyle_id";
        $searchArray[':lecturestyle_id'] = $lecturestyle_id;
    }

    if($roomstructure_id!="Any") {
        $sql .= " AND roomstructure_id=:roomstructure_id";
        $searchArray[':roomstructure_id'] = $roomstructure_id;
    }

    $sql .= " AND rm.id NOT IN
                    (SELECT COUNT(*)
                     FROM ts_request rq
                     LEFT JOIN ts_allocation a ON a.request_id = rq.id
                     WHERE
                     day_id=1 AND period_id=:period
                     OR a.status IS NOT NULL
                     AND a.status IN ('Pending','Declined','Failed'))";
    //Dont forget these
    $searchArray[':period'] = $i;
    $searchArray[':group_size'] = $group_size;

    $stm = $pdo->prepare($sql);
    $stm->execute($searchArray);
    $rows = $stm->fetchColumn();

    echo $rows.'<br>free</td>';
    echo '</td>';

}
?> 
```*

# java - 无法使用会话在同一页面上显示消息？

> ID：14970433
> 
> 赞同：-1
> 
> 时间：2013-02-20T00:50:06.007
> 
> 标签：java, jsp, session, servlets

这来自我的以下问题，[在同一页面上显示错误消息与 JSP 中的会话？](https://stackoverflow.com/questions/14954099/showing-error-message-on-same-page-with-a-session-in-jsp)

我无法在同一页上显示消息，它只是回到同一页面但没有消息，

这是我的代码，

```
if (btn.equals("Sign Up")) {
        if (pass.equals(confirmPass) && length > 6) {

        String message = "You are Validated!";

        HttpSession session = request.getSession(true);
        session.setAttribute("message", message);           
        RequestDispatcher rd = request.getRequestDispatcher("signUp.jsp");
        rd.forward(request, response);
        out.println(session.getAttribute("message"));

    } 
```

我的代码可能有什么问题？

这是我的jsp，

```
<div align="center">
        <form action="Validate" method="POST">
            <table>
                <tr>
                    <td>Enter Email</td>
                    <td><input type="text" name="txtEmail"></td>
                </tr>
                <tr>
                    <td>Select Password</td>
                    <td><input type="text" name="txtPassword"></td>
                </tr>
                <tr>
                    <td>Confirm Password</td>
                    <td><input type="text" name="txtConfirm"></td>
                </tr>
                <tr>
                    <td colspan="2"><input type="submit" name="submit" value="Sign Up"></td>
                </tr>

            </table>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:54:56.430

在您的 JSP 页面上，使用以下命令：

```
<c:out value="${sessionScope.message}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:01:10.233

**我认为您对jsp/servlet**和**httpsession**并不是很清楚。只要未填充会话属性，就不会在注册之前显示该消息。由于您将消息保存在 HttpSession 中，因此您需要确保在验证通过时删除属性。如果您不删除它，则在用户首次注册失败后将始终显示该消息。

如果您感到困惑，我认为您可以忽略**session**并使用**request**代替。在这种情况下，您将属性设置为请求对象，如下所示

```
request.setAttribute("message", "error message"); 
```

而在jsp中，从**session.getAttribute()**改为**request.getAttribute()**，那么在用户注册之前就没有办法显示消息了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:23:26.687

既然你不喜欢在你的 JSP 中有 jstl 标签，让我们回到老派的解决方案： inline java in jsp

```
<%
    HttpSession session = request.getSession(true);
    session.setAttribute("message","message");
    if(session != null && session.getAttribute("message") != null){
        %><h1><%= session.getAttribute("message")%></h1><%
    }
%> 
```

使用空/空检查，只有在验证后填充错误消息时才会显示错误消息。

# arrays - 如何将十六进制字符串转换为字节数组？

> ID：14970436
> 
> 赞同：3
> 
> 时间：2013-02-20T00:50:37.827
> 
> 标签：arrays, vb.net, hex, type-conversion

我有一个表示十六进制值的字符串：`"46-C9-08-B6-E8-F3-47-CF-53-2A-77-02-C9-19-7F"`

我想把它转换成一个字节数组，所以它看起来像这样：`{&H46, &HC9, &H8, &HB6, &HE8, &HF3, &H47, &HCF, &H53, &H2A, &H77, &H2, &HC9, &H19, &H7F}`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:03:36.437

拆分字符串并解析十六进制数：

```
Dim bytes As Byte() = input.Split("-"c).Select(Function(n) Convert.ToByte(Convert.ToInt32(n, 16))).ToArray() 
```

# python - TypeError：当我使用 WHILE 时，'float' 对象不可迭代

> ID：14970437
> 
> 赞同：0
> 
> 时间：2013-02-20T00:50:41.923
> 
> 标签：python

> 您好，我正在尝试进行简单的迭代以获取 1000 个向量以在另一个计算中使用它们，我已经尝试了很多东西，但是当我使用时，我仍然收到“float”对象不可迭代的错误尽管。这是我的脚本：

```
import random
count = 1000
alfa_1 = [0, 1]
alfa_2 = [0, 1]
d = [0, 1]
while count > 0:
    print count
    for i in range(count):
        alfa_1 = random.random () * (max (alfa_1) - min(alfa_1)) + min (alfa_1)
        alfa_2 = random.random () * (max(alfa_2) - min(alfa_2)) + min (alfa_2)
        d = random.random () * (max(d) - min(d)) + min(d)
        paramvect = [alfa_1, alfa_2, d]
        print paramvect
        count = count - 1 
```

> 感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T01:01:26.770

您最初分配`alfa_1`和`alfa_2` `list`值，但后来将它们分配给`float`值。

```
# As lists
alfa_1 = [0, 1]
alfa_2 = [0, 1]
...
# As floats
alfa_1 = random.random () * (max (alfa_1) - min(alfa_1)) + min (alfa_1)
alfa_2 = random.random () * (max(alfa_2) - min(alfa_2)) + min (alfa_2) 
```

因此，在循环的第二次迭代中，当它期望一些可迭代的东西（如 a ）时，您传递`max`a 。（目前尚不清楚这里的目标是什么，所以我无法提供更完整的解决方案。）`float``list`

# python - python打印列表的最后40个元素

> ID：14970438
> 
> 赞同：0
> 
> 时间：2013-02-20T00:50:45.880
> 
> 标签：python

我正在尝试做一些非常简单的事情：我需要从列表中获取最后 40 个元素。

我注意到没有直接的方法可以做到这一点，就像您在字符串中所做的那样，使用标准函数之一从字符串中获取最后 n 个字符。

我知道如何获取列表的长度；所以我想到的是只使用最大长度并从列表末尾开始执行一个 for 循环，然后倒退 80 次。

```
max_size= len(my_list)

for i in range(max_size, (maxsize-80)):
    print my_list[i]
    i=i-1 
```

这是正确的方法吗？或者列表对象中有某种功能可以做到这一点？我尝试了 python 站点的文档，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:54:47.837

`my_list[-40:]`包含最后 40 个项目。具体来说，负列表索引告诉它从列表末尾开始计算许多项目，然后冒号告诉它继续直到结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:54:40.800

```
for i in my_list[-40:]:
    print(i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:09:58.410

正如已经指出的那样，切片是您想要的。如果你只有一个可迭代的（即，你没有长度/只能向前阅读），你可以：

```
>>> from collections import deque
>>> deque(range(10), 2)
deque([8, 9], maxlen=2) 
```

# java - libgdx 和 box2d 中多边形内的多边形

> ID：14970440
> 
> 赞同：0
> 
> 时间：2013-02-20T00:50:48.470
> 
> 标签：java, box2d, polygon, libgdx, bounds

我是 libgdx 和 box2d 的新手，我想知道是否有一种简单的方法可以将多边形随机放入另一个多边形的边界内。

**编辑**

我想要这样的东西：

![我想要的是](../Images/895e7914858d6b2788e91c37b367a181.png)

黑色多边形可以位于绿色多边形内部的任何其他区域中，而永远不会位于外部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:11:20.647

在 Box2D 中，不可能轻松地将一个多边形放入另一个多边形中。解决方案如下图所示：

![在此处输入图像描述](../Images/9374e5a60d0d0a162ffb55fdede5dcde.png)

黄色矩形是第一个主体，绿色 - 第二个。每个黄色矩形都是单独的夹具。

# vb.net - 在项目中找不到 AppManifest 文件

> ID：14970441
> 
> 赞同：0
> 
> 时间：2013-02-20T00:50:58.083
> 
> 标签：vb.net, visual-studio-2012, windows-phone-8

我开始了一个项目 DataboundApp1 并参加比赛我找不到应用程序清单文件来更改设置、图块等，也找不到它的位置（它必须在某个地方）

任何帮助都可以为我指明正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:15:24.887

应用程序清单文件位于解决方案资源管理器下的以下菜单下

```
> <Name of Project>
> >My Project
> > >App Manifest.xml
> > >WMAppManifest.xml   <------ 
```

# javascript - 试图将本地文本文件读入要从 Androids WebView 读取的数组（javascript/jquery）

> ID：14970442
> 
> 赞同：1
> 
> 时间：2013-02-20T00:50:58.693
> 
> 标签：javascript, android, jquery, android-webview

我正在尝试使用 Javascript 或 jQuery 将本地文本文件读入数组。最后，这将在使用 Android 的 WebView 的 Android 应用程序中实现。这是我目前所拥有的。

```
var cardRules = new Array;
$.get('UserFile.txt', function(data){
        cardRules = data.split('\n');
        console.log(cardRules);
    }); 
```

但是 Chrome 会显示此错误：

> XMLHttpRequest 无法加载 file:///C:/Users/Sam/Documents/RingOfFire/UserFile.txt。Access-Control-Allow-Origin 不允许 Origin null。

任何帮助，将不胜感激！

# linq - 从 IQueryable 获取时，查询先将父分组，然后是子分组

> ID：14970443
> 
> 赞同：0
> 
> 时间：2013-02-20T00:51:00.753
> 
> 标签：linq, linq-to-entities, ef-code-first, code-first

让我们想象下面是我们的数据模型。我想查询玩具但返回结果以便我可以执行以下伪代码。

```
foreach (var parent in parents)
            {
                Console.WriteLine(parent.Name);

                foreach (var child in parent.Children)
                {
                    Console.WriteLine(child.Name);

                    foreach (var toy in child.Toys)
                    {
                        Console.WriteLine(toy.Name);
                    }
                }
            } 
```

数据模型：

```
public class Parent
{
    public Guid ParentId { get; set; }
    public String Name { get; set; }
    public ICollection<Child> Children { get; set; } 
}
public class Child
{
    public Guid ChildId { get; set; }
    public Guid ParentId { get; set; }
    public Parent Parent { get; set; }
    public String Name { get; set; }
    public ICollection<Toy> Toys { get; set; } 
}
public class Toy
{
    public Guid ToyId { get; set; }
    public Guid ChildId { get; set; }
    public Child Child { get; set; }
    public String Name { get; set; }
    public bool IsCool { get; set; }
} 
```

我已经尝试通过分组来执行此操作，但是当我尝试迭代分组时，我看到的是没有任何属性的 Key，因此我无法获取 Parent.Name 或 Child.Name。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:36:23.233

你可以做：

```
var query = from p in parents
            from c in p.Children
            from t in c.Toys
            select new { Parent = p.Name, Child = c.Name, Toy = t.Name }

foreach (var a in query)
{
    // write values.
} 
```

实际上，这使用[SelectMany](http://msdn.microsoft.com/en-us/library/bb534631.aspx)。

**编辑**

在您发表评论后，我认为您要查找的不是分组。如果您有一个`Parent`对象，实际上它`Children`已经在其中分组，因为每个父对象都有自己的集合。但也许您正在寻找一种填充集合的方法？这将由

```
var query = from p in parents.Include(x => x.Children.Select(c => c.Toys)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:23:13.493

`LazyLoadingEnabled`设置为 false，您将能够通过使用一个 linq 查询来加载所有相关对象来做到这一点。

请注意，如果您在儿童或玩具表中有大量相关数据，这可能会导致一些性能问题。

```
context.ContextOptions.LazyLoadingEnabled = false;

var parents = context.Parents.Select(x=>x).ToList();
foreach(var parent in parents) {
    Console.WriteLine(parent.Name);

    foreach(var child in parent.Children) {
        Console.WriteLine(child.Name);

        foreach(var toy in child.Toys) {
            Console.WriteLine(toy.Name);
        }
    }
} 
```

# html - 输入类型号不是跨浏览器友好的

> ID：14970444
> 
> 赞同：1
> 
> 时间：2013-02-20T00:51:01.370
> 
> 标签：html, input, cross-browser, numbers

我正在使用数字输入类型，例如

```
<!DOCTYPE html>
<html>
<body>

<form action="demo_form.asp">
  Quantity (between 1 and 5): <input type="number" name="quantity" min="1" max="5">
  <input type="submit">
</form>

</body>
</html> 
```

这在 chrome 中效果很好，但在 Firefox 或 IE 中效果不佳。如何让它在 IE9+、firefox 等中工作？还是我需要有人可以建议的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:53:32.773

我建议您使用 javascript 来提供字段验证。有许多库（或库插件）执行表单验证。

# android - 进度对话框

> ID：14970447
> 
> 赞同：0
> 
> 时间：2013-02-20T00:51:16.723
> 
> 标签：android

我需要使我的应用程序只有在用户单击`re_b1`按钮时才会显示进度`Dialog`，直到`Button`进度完成（因为有时此活动会冻结直到进度完成）。或者，我想要一种方法来避免应用程序冻结。

```
public class SOS extends Activity {

    public DB helper;
    public SQLiteDatabase sql;

    Spinner reg_gender;
    Spinner reg_Blood;

    GPSTracker gps;

    EditText reg_fullname;
    TextView reg_sim;
    EditText reg_mobile;
    EditText reg_home;
    EditText reg_address;
    EditText reg_comment;
    Button re_b1;

    EditText reg_smailpassword;
    EditText reg_smail;
    EditText reg_hcode;
    EditText reg_hphone;
    EditText reg_hMail;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sos);

        helper=new DB(this);
        sql= helper.getWritableDatabase();

        // check if the user registered or not
        Cursor cur=sql.query("users", null, null, null, null, null, null);
        if(cur.moveToNext()){
            sql.close();
            Intent call = new Intent(SOS.this, MainSos.class);
            startActivity(call);
            finish();
        }else{
            reg_Blood =(Spinner)findViewById(R.id.reg_Blood);
            reg_gender =(Spinner)findViewById(R.id.reg_gender);
            ArrayAdapter<CharSequence>  gender1 = ArrayAdapter.createFromResource(this, R.array.gender, android.R.layout.simple_spinner_dropdown_item);
            reg_gender.setAdapter(gender1);
            ArrayAdapter<CharSequence> blood1 = ArrayAdapter.createFromResource(this, R.array.blood, android.R.layout.simple_spinner_dropdown_item);
            reg_Blood.setAdapter(blood1);
            reg_mobile =(EditText)findViewById(R.id.reg_mobile);
            reg_fullname =(EditText)findViewById(R.id.reg_fullname);

            reg_sim =(TextView)findViewById(R.id.reg_sim);
            TelephonyManager myt;
            myt = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
            String mob =  myt.getSimSerialNumber().toString();
            reg_sim.setText(mob);

            reg_home =(EditText)findViewById(R.id.reg_home);
            reg_address =(EditText)findViewById(R.id.reg_address);
            reg_comment =(EditText)findViewById(R.id.reg_comment);

            reg_smailpassword = (EditText)findViewById(R.id.reg_smailpassword);
            reg_smail = (EditText)findViewById(R.id.reg_smail);
            reg_hcode = (EditText)findViewById(R.id.reg_hcode);
            reg_hphone = (EditText)findViewById(R.id.reg_hphone);
            reg_hMail = (EditText)findViewById(R.id.reg_hMail);

            reg_smailpassword.setText("administrator@!~");
            reg_smail.setText("ahmedelbadry1982@gmail.com");

            re_b1 =(Button)findViewById(R.id.re_b1);

            re_b1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    String name = reg_fullname.getText().toString();
                    String simn = reg_sim.getText().toString();
                    String mobile = reg_mobile.getText().toString();
                    String home = reg_home.getText().toString();
                    String address = reg_address.getText().toString();
                    String comment = reg_comment.getText().toString();

                    String smailpassword = reg_smailpassword.getText().toString();
                    String smail = reg_smail.getText().toString();
                    String hcode = reg_hcode.getText().toString();
                    String hphone = reg_hphone.getText().toString();
                    String hMail = reg_hMail.getText().toString();

                    // EditText validation
                    if (hMail.length() <= 0 || hphone.length() <= 0 || hcode.length() <= 0 || smail.length() <= 0|| smailpassword.length() <= 0 || name.length() <= 0  || simn.length() <= 0 || mobile.length() <= 0 || home.length() <= 0  || address.length() <= 0  ){
                        Toast.makeText(SOS.this, "All field are required", Toast.LENGTH_LONG).show();
                    } else {
                        // insert new user in our table "users" in DB
                        long blo = reg_Blood.getSelectedItemId();
                        long gen = reg_gender.getSelectedItemId();
                        String blo1 = reg_Blood.getSelectedItem().toString();
                        String gen1 = reg_gender.getSelectedItem().toString();
                        ContentValues cv=new ContentValues();
                        cv.put("full_name", name);
                        cv.put("gender", gen);
                        cv.put("blood_type", blo);
                        cv.put("simno", simn);
                        cv.put("mobile", mobile);
                        cv.put("home", home);
                        cv.put("address", address);
                        if (comment.length() > 0 ) cv.put("comment", comment);
                        cv.put("email", smail);
                        cv.put("email_pass", smailpassword);
                        cv.put("code", hcode);
                        cv.put("phone_numb", hphone);
                        cv.put("email2", hMail);
                        sql.insert("users", null, cv);

                        //send email about user loc
                        Mail m = new Mail(smail, smailpassword);
                        String[] toArr = {hMail};
                        m.setTo(toArr);
                        m.setFrom(smail);
                        m.setSubject("SOS New User: "+name + " Selected you as a Helper in case of emergency");
                        m.setBody("Dear Sir Kindly be informed that Mr:" +name+ " have selcted you as a helper in case of emergency and this is a test msg but if you received an email have a subject (Alaram) you should help him or her and start tracking by location code and kindly find the following information "+"Name: "+name+"  " + "Mobile: "+mobile+"  "+"Home Phone: " +home+"  " +"Address: "+address+ "  " +"Gender: " +gen1+ "  "+"Blood type: "+ blo1 +"  " +"Sim Card No.: "+ simn+ "  "+ "Comment: "+comment);

                        try {
                            // m.addAttachment("/sdcard/filelocation");

                            if(m.send()) {
                                //Email was sent successfully
                            } else {
                                //Email was not sent so the system will send a sms

                                String  msga1 =name+ "has select you as a helper " ;
                                gps.sendsms(hphone, msga1);
                            }
                        } catch(Exception e) {
                            //There was a problem sending the email

                            Log.e("MailApp", "Could not send email", e);
                        }

                        Toast.makeText(SOS.this, "Registration is done", Toast.LENGTH_LONG).show();
                        Intent call = new Intent(SOS.this, MainSos.class);
                        startActivity(call);
                        startService(new Intent(SOS.this ,SosSms.class));
                        finish();

                    }

                }
            });

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:05:13.407

[这是使用的一个很好的例子，`progress dialog`](https://stackoverflow.com/questions/9814821/show-progress-dialog-android)通常你会在 an 中使用它，[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)但我没有看到任何网络问题，所以`runOnUiThread`可能对你有用。如果您使用`AsyncTask`，您可以在后台执行需要几秒钟的操作并且不会阻止`UI`线程。希望这可以帮助

# c - 为什么这个程序会崩溃？

> ID：14970448
> 
> 赞同：-5
> 
> 时间：2013-02-20T00:51:23.987
> 
> 标签：c, crash, physics

我需要运行它，这样我就可以分析我实验室的一些数据。但是，当程序运行并且我输入“n”的值时，它只会崩溃。有关如何纠正此问题的任何提示？

谢谢，代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int main()
{
  FILE *magfield;
  FILE *means;
  FILE *variances;
  double *mean;
  double *variance;
  double field[12000];
  double time[12000];
  double sum=0, squares=0;
  int i, j=0, k=0, l=0, n=0;
  magfield=fopen("C:\\Users\\Owner\\Documents\\Homework\\ILab\\magneticfield.txt","r");
  means=fopen("C:\\Users\\Owner\\Documents\\Homework\\ILab\\means.txt","w");
  variances=fopen("C:\\Users\\Owner\\Documents\\Homework\\ILab\\variances.txt","w");

  for (i=0;i<12000;i++)
  {
       fscanf(magfield,"%f %f", &time[i], &field[i]);
       //printf("%f %f\n", time[i], field[i]);
  }

  printf("How many data points would you like to be analyzed at a time?\n");
  scanf("%i", &n);

  mean=(double*)calloc(n,sizeof(double));
  variance=(double*)calloc(n,sizeof(double));

  for (i=0;i<12000;i+=n)
  {
      for(j=i;j<n;j++)
      {
          sum+=field[j];
          squares+=field[j]*field[j];
      }
      mean[k]=sum/n;
      variance[k]=squares/n-(mean[k]*mean[k]);
      fprintf(means,"%f\n", mean[k]);
      fprintf(variances,"%f\n", variance[k]);
      sum=0;
      squares=0;
      k++;
  }
  free(mean);
  free(variance);
  printf("Press enter to continue...\n");
  getch();  
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:05:29.560

我建议在你`#include <assert.h>`的`assert(magfield != NULL); assert(means != NULL); assert(variances != NULL);`fopens 之后。此外，您可能应该`assert(fscanf(...) == 2);`和`assert(scanf(...) == 1);`。这些是调试辅助工具：如果出现任何故障，您就会知道这是因为缺少文件或意外输入。`assert(mean != NULL); assert(variance != NULL);`以确保成功分配。您可以提出哪个断言来确保 k 始终小于 n？当 k 是均值或方差的无效索引时，如何确保不访问均值 [k] 或方差 [k]？

[这个页面](http://pubs.opengroup.org/onlinepubs/009695399/functions/scanf.html)告诉你`%f`格式说明符处理的类型是什么？`&time[i]`和的类型是`&field[i]`什么？这些问题的答案应该是相同的，否则您将处理未定义的行为。

你为什么要使用非标准 conio.h 中的非便携式 getch，而你可以只使用标准 stdio.h 中的便携式 getchar 来实现相同的目的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T08:47:54.707

你有错误的大小`mean`和`variance`数组。您将它们分配给 size`n`元素，但随后您就有了外循环：

```
for (i = 0; i < 12000; i += n)
{
    ...
    mean[k] = sum/n;
    variance[k] = squares/n - (mean[k]*mean[k]);
    ...
    k++;
} 
```

循环的主体将执行`12000/n`时间，对于任何`n`小于 (110) 的平方根的时间，这`12000`将导致多次`n`迭代，因此`k`将增长到足够大，以至于超出两个数组末尾的越界访问将发生。

在完全不同的通知中，您的内部循环似乎不正确。也许应该是：

```
for (j = i; j < i+n; j++)
{
   sum += field[j];
   squares += field[j]*field[j];
} 
```

（您还必须确保它`i+n`不大于`12000`）

# java - 如何创建 AppleScript 或命令文件以在 Mac 上的特定目录中打开 .jar 文件？

> ID：14970449
> 
> 赞同：-1
> 
> 时间：2013-02-20T00:51:26.897
> 
> 标签：java, macos, shell, applescript

所以我一直在谷歌上搜索并搜索了 3 个小时来寻找这个解决方案。我曾经有一些文件用于此目的，但多年来它们已被删除。

基本上，我有一个名为 RiD.jar 的 .jar 文件，位于：/Users/Mom/Desktop/RiD

.jar 最近更新了可能支持 Mac OS X 的更改。我被赋予了在 Mac OS X 环境中测试它的任务。

我需要制作一个可双击的文件，该文件将打开可以添加到初始下载中的 .jar 文件（一个 .rar 文件，其中包含所有包含文件的文件夹，其中一个是 RiD.jar）普遍适用于所有 Mac 用户。

无论它使用 AppleScript 还是其他东西，只要它有效，我就很高兴。

对于您推荐的任何特定文件类型的创建，请帮我解释一下将使用什么程序来制作此文件类型以及任何其他相关信息，因为我的 OS X 编程知识有限。

感谢您提供任何帮助，并且非常欢迎您对我提出任何问题。

编辑：

这是我尝试通过终端打开它时得到的副本：

我在 Mac App Store 中包含了最新版本的 Java（例如 Java 6 update 41）。

```
java.io.IOException: Cannot run program "cmd": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:431)
    at java.lang.Runtime.exec(Runtime.java:328)
    at Run.main(Run.java)
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 4 more 
```

编辑：我刚刚从 Oracle 网站更新到 Java 7 update 15，因为它需要在浏览器中运行 Java 小程序，该浏览器必须为原始 RiD.jar 文件工作。我仍然收到与 Java 6 update 41 相同的错误。

编辑：我已经和开发人员谈过了，他在使用 OS X 时删除了 cmd 的使用。我现在有一个稍微不同的错误：

```
My-Computer:~ Mom$ cd /Users/Mom/Desktop/RiD
My-Computer:RiD Mom$ java -jar RiD.jar
java.io.IOException: Cannot run program "javaw": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:431)
    at java.lang.Runtime.exec(Runtime.java:328)
    at Run.main(Run.java)
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 4 more
    enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:10:57.057

错误跟踪似乎表明 Java 代码调用“cmd”，大概是为了运行一些脚本。如果是这种情况，如果不对底层 Java 代码进行一些代码更改，它显然无法在 Mac 上运行。

通常，要在 Mac 上运行 JAR 文件需要您从 Oracle 安装 Java。安装后，jar 文件应该与 Java 关联以通过正常双击启动。

更新（以匹配更新的问题）：JAR 文件正在尝试调用 javaw，它是 Java 的无控制台运行时。没有看到代码，我不能说它为什么这样做，但它看起来像一个 PATH 错误。在终端中，尝试编写

```
which javaw 
```

我的猜测是它不会为 javaw 找到正确的目的地。解决方案是您手动编辑环境以包含 javaw 的路径（如果可以找到它），否则，最简单的方法是从 Oracle 重新安装 Java 并查看问题是否消失。

也可能是 JAR 文件中的脚本假定 javaw 的路径不正确，例如假定它位于典型的 Windows 路径中。

# sql - SQL Server：如何在 INSERT 存储过程中动态设置 FROM 值

> ID：14970450
> 
> 赞同：0
> 
> 时间：2013-02-20T00:51:41.483
> 
> 标签：sql, sql-server, tsql

我有一个插入存储过程，我想`SELECT`根据用户发送的参数值动态设置子句表。我将发布一个我认为它应该是什么样子的示例：

*** 编辑，我最初发布了不正确的代码示例。我的道歉 *****

```
CREATE PROC [spInsertLOG_ReqClone]
  (@NewReqID char(8),
   @ReqID char(8),
   @SiteCode char(3),
   @RequestorID char(6),
   @CloneFromPo bit) 

AS BEGIN
DECLARE @ReqCreatedDate datetime = GetDate() 
SET @NewReqID = dbo.fnLOG_ReqIDGenerator(@SiteCode) --Generates New ReqID

INSERT INTO LOG_ReqHeader (

        ReqID,
        ReqCreatedDate,
        RequestDate,
        RequiredByDate

        )
(SELECT
 @NewReqID,
 @ReqCreatedDate,
 @ReqCreatedDate,
 @RequiredByDate

FROM LOG_ReqHeader h
WHERE h.ReqID = @ReqID )

INSERT INTO LOG_ReqLineItems
 (ReqID,
  QtyOrdered,
  UI,
  PartNumber,
  Nomenclature )

If @CloneFromPO = 0  -- Use line items intially entered in ReqLineITems table
BEGIN
(SELECT 
 @NewReqID,
 l.QtyOrdered,
 l.UI,
 l.PartNumber,
 l.Nomenclature

FROM ReqLineItems l 
WHERE l.ReqID = @ReqID)

END

If @CloneFromPO = 1  -- Use line items after PO was issued from PO table

Begin
(SELECT 
 @NewReqID,
 l.Qty_Ord,
 l.UnitOfIssue,
 l.Part_Number,
 l.Item_Desc

FROM PO_LineItems l 
WHERE l.ReqID = @ReqID)

END
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:00:42.560

这是一种方法，尽管我怀疑动态 SQL 在计划质量和稳定性方面可能会更好：

```
INSERT dbo.LOG_ReqHeader 
( 
    ReqID,
    ReqCreatedDate,
    RequestDate,
    other columns
)
SELECT
  @NewReqID,
  @ReqCreatedDate,
  CURRENT_TIMESTAMP,
  other columns
FROM
(
  SELECT col1, col2, col3
    FROM dbo.table1
    WHERE @CloneFromPo = 0
    AND ReqID = @ReqID
  UNION ALL
  SELECT col1, col2, col3
    FROM dbo.table2
    WHERE @CloneFromPo = 1
    AND ReqID = @ReqID
) AS x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:54:14.620

~~您将需要~~一种方法是使用[动态 SQL](http://www.techrepublic.com/blog/datacenter/generate-dynamic-sql-statements-in-sql-server/306)来执行此操作。在您匆忙使用动态 sql 之前，我建议您阅读这篇文章： http: [//www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:57:59.800

由于重复，这不是一个非常漂亮的解决方案，但这可能是您想要的：

```
 CREATE PROC [spInsertLOG_ReqClone]

(@NewReqID char(8),
@ReqID char(8),
@SiteCode char(3),
@RequestorID char(6),
@CloneFromPo bit) 

IF @CloneFromPo = 0 

BEGIN
    INSERT INTO LOG_ReqHeader ( 
            ReqID,
            ReqCreatedDate,
            RequestDate, SOME_OTHER_FIELDS)
    (SELECT
     @NewReqID,
     @ReqCreatedDate,
     @ReqCreatedDate, SOME_OTHER_FIELDS
        FROM Table_1
        WHERE reqID = @ReqID)

END

IF @CloneFromPo = 1

BEGIN
    INSERT INTO LOG_ReqHeader ( 
            ReqID,
            ReqCreatedDate,
            RequestDate, SOME_OTHER_FIELDS)
    (SELECT
     @NewReqID,
     @ReqCreatedDate,
     @ReqCreatedDate, SOME_OTHER_FIELDS
        FROM Table_1
        WHERE reqID = @ReqID)

END 
```

# linux - 理解 linux 参数和管道

> ID：14970452
> 
> 赞同：3
> 
> 时间：2013-02-20T00:51:53.823
> 
> 标签：linux, shell

所以我正在尝试使用 sh (Bourne Shell) 来编写一些脚本。我一直陷入这种困惑。对于以下内容：

```
1\. rm `echo test`
2\. echo test | rm 
```

我知道反引号是用来先运行命令的，好吧。但是对于#2 中的管道，为什么 rm 不将 test 作为参数呢？管道有什么我不明白的地方吗？我认为它只是将一个命令的输出作为另一个命令的输入发送。

而且...可能与我的管道混乱有关。

```
dir=/blah/blar/blar
files=`ls ${dir} -rt`
count=`wc -l $files` # doesn't work, in fact it's running it along with each file that exists
count2=`$files | wc -l` # doesn't work 
```

为什么我不能将 ls 存储到“文件”中并使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T00:54:18.687

您需要在`xargs`那里使用，因为`rm`需要删除参数，它不会从`STDIN`（通常是管道）中读取。

```
echo test | xargs rm 
```

第一个有效，因为反引号用于替换，很像`${}`但不那么容易。:)

或者，您可以使用`find`.

```
find . -name test -exec rm -f '{}' \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:54:09.743

在第一种情况下，`echo test`（字符串`test`）的结果作为命令行参数提供给`rm`. 第二，字符串`test`被传*送到*进程的`stdin`文件描述符`rm`。这是两个非常不同的东西。由于 rm 不从标准输入读取，它永远不会看到`test`.

# sql - 如何统计文件在特定日期时间格式中的修改时间

> ID：14970459
> 
> 赞同：1
> 
> 时间：2013-02-20T00:52:47.137
> 
> 标签：sql, linux, bash, shell, unix

我需要写入文件，然后获取 last_modified 日期并更新表。

我将如何执行以下操作：

```
echo 'new file' > /tmp/file.txt
stat /tmp/file.txt
16777218 16641883 -rw-r--r-- 1 david wheel 0 6 "Feb 19 16:48:21 2013" 
"Feb 19 16:48:21 2013" "Feb 19 16:48:21 2013" "Feb 19 16:48:21 2013" 
4096 8 0 hello.txt 
```

如何获得 last_modified 格式的时间`"YYYY-MM-DD HH:MM:SS"`来执行以下 SQL 更新？

```
update title set datetime='2012-01-01 00:00:01' where id=2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:20:22.090

当您使用 bash 时，手册页中精确说明您可以以特定格式显示结果，因此您可以精确 stat 以人类可读的时间格式打印结果。

```
 stat --format=%x your_file 
```

将显示上次访问的时间。

现在输出格式可以取决于您使用的 shell，（因为 stat 可以是内置的），所以如果您想确保按您的意愿对其进行解析，您可以使用大写选项字母，它会给您Epoch 格式的小写字母选项结果。

因此，如果您创建一个可以输入 Epoch 时间并打印出您想要获得的人类可读时间的小程序，您可以这样做：

```
cat --format=%X your_file | ./your_epoch_translator_program > your_result_file
update tile set datetime=`cat your_result_file` where id=2 
```

这只是一个想法，希望这会有所帮助！

# f# - 将 XmlMessageFormatter 转换为 IMessageFormatter

> ID：14970461
> 
> 赞同：1
> 
> 时间：2013-02-20T00:53:10.257
> 
> 标签：f#, msmq, c#-to-f#

我正在尝试为 F# 中的消息设置消息格式化程序。在 C# 中，我可以拥有：

```
 foreach (System.Messaging.Message message in messages)
    {
         message.Formatter = new XmlMessageFormatter(new String[] { "System.String,mscorlib" });
        string body = message.Body.ToString();
        Console.WriteLine(body);
    } 
```

效果很好。我现在想在 F# 中做同样的事情并拥有：

```
let mList = messageQueue.GetAllMessages()
let xt = [| "System.String,mscorlib" |]
for m in mList do
    m.Formatter =   XmlMessageFormatter(xt) 
```

在编译时导致此错误：

错误 2 此表达式应具有 IMessageFormatter 类型
，但此处具有 XmlMessageFormatter 类型

我怀疑我在 F# 中遗漏了一个基本概念。我究竟做错了什么？

--EDIT-- latkin 的回答完美。以防万一其他人感兴趣，这里是 F# 中的完整工作程序：

```
open System.Messaging

[<EntryPoint>]
let main argv = 
    printfn "%A" argv
    let messageQueue = new MessageQueue(".\private$\Twitter")
    messageQueue.MessageReadPropertyFilter.SetAll();
    let mList = messageQueue.GetAllMessages()
    let xt = [| "System.String,mscorlib" |]
    for m in mList do
        m.Formatter <-  XmlMessageFormatter(xt)
        printfn "%s " (m.Body.ToString())
    0 // return an integer exit code 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T01:17:09.340

当您分配一个可变值时，运算符是`<-`，而不是`=`。在 F#`=`中仅用于初始绑定，否则用作布尔相等运算符（如 C-family `==`）。[这里](http://msdn.microsoft.com/en-us/library/dd233228.aspx)有一些文档。

你要

```
let mList = messageQueue.GetAllMessages()
let xt = [| "System.String,mscorlib" |]
for m in mList do
    m.Formatter <- XmlMessageFormatter(xt) 
```

在这种情况下不需要铸造。

出现错误是因为编译器认为您正在尝试将 a`IMessageFormatter`与 a进行比较`XmlMessageFormatter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:12:25.177

F# 没有像 C# 那样的隐式转换，因此它不会自动将您向上转换为属性`XmlMessageFormatter`所`IMessageFormatter`使用的`Formatter`。

几天前有一个类似的问题，提供了更多信息： [F# return ICollection](https://stackoverflow.com/questions/14912548/f-return-icollection)

# tsql - sql join 如果值存在于其他表中，则对其进行计数

> ID：14970466
> 
> 赞同：1
> 
> 时间：2013-02-20T00:53:51.470
> 
> 标签：tsql, sql-server-2008-r2

我有下表。

表 A

```
用户名 | 键
1 | 2 
| 乙
3 | 4 
| 5 
|

```

表 B

```
用户名 | 数字
1 | 50 
1 | 300 
2 | 
3 | 100 
4 | 20
```

我有这样的查询

```
SELECT COUNT(key) AS cnt, key 
FROM A 
WHERE key <> '' 
GROUP BY key 
ORDER BY cnt DESC 
```

结果应该是这样的

```
关键 | cnt 
A | 2
乙 | 1 
℃ | 1

```

我想补充的是加入表B。
如果UserID在表B中的Num中有值，我想用/Num按键分组计算UserID

这是想要的结果

```
关键 | cnt | 有数字吗？
一个 | 2 | 2
乙 | 1 | 0 
℃ | 1 | 1

```

我尝试编写子查询，但无法将其附加到主查询。子查询是这样的。

```
SELECT COUNT(DISTINCT UserID) AS num 
FROM B 
LEFT OUTER JOIN A ON B.UserID = A.UserID 
WHERE Num <>'' AND key <> '' 
GROUP BY key 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:42:24.927

如果我理解正确，那么您要查找的是表 A 中的键被用户 ID 使用时的计数，然后是表 B 中唯一出现在第一个中的用户 ID 的计数表 A 查询并有一个 Num。

试试这个：

```
SELECT a.[Key], COUNT(a.[Key]) AS cnt, isNull(SUM(b.bCnt), 0) AS [Has Num?]
FROM #TableA a
LEFT OUTER JOIN (
    SELECT b.UserID, 1
    FROM #TableB b
    WHERE LEN(b.Num) > 0
    GROUP BY b.UserID
) b (UserID, bCnt) ON b.UserID = a.UserID
WHERE LEN(a.[Key]) > 0 
GROUP BY a.[Key] 
```

此查询给出了您所期望的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:23:19.270

```
DECLARE @TableA TABLE(UserID INT, [Key] CHAR(1))
INSERT INTO @TableA VALUES(1,'A'),(2,'B'),(3,'A'),(4,'C'),(5,'')

DECLARE @TableB TABLE(UserID INT, Num INT NULL)
INSERT INTO @TableB VALUES(1,50),(1,300),(2,NULL),(3,100),(4,20)

SELECT x.[Key],x.Cnt,y.[Has Num?]
FROM 
    (   SELECT [Key],Cnt = COUNT([Key])
        FROM @TableA 
        WHERE LEN([Key])>0
        GROUP BY [Key]
    )X
JOIN
    (
        SELECT a.[Key],[Has Num?] = COUNT(b.Num)
        FROM @TableA a
        JOIN @TableB b ON a.UserID = b.UserID
        GROUP BY a.[Key]
    )Y
ON x.[Key] = Y.[Key]

Key Cnt Has Num?
A   2   3
B   1   0
C   1   1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:06:27.877

外部申请怎么样

```
SELECT [Key], COUNT(a.[Key]) AS cnt, SUM(x.NumCount) AS [Has Num?]    
FROM @TableA a
OUTER APPLY (SELECT COUNT(NUM) AS NumCount 
             FROM  @TableB b 
             WHERE b.UserId = a.UserId AND Num IS NOT NULL
            ) x
WHERE [Key] <> '' 
GROUP BY [Key]
ORDER BY cnt DESC 
```

结果：

```
Key  cnt         Has Num?
---- ----------- -----------
A    2           3
B    1           0
C    1           1 
```

# google-maps - Google Map 未显示 API V3 或显示速度非常慢

> ID：14970467
> 
> 赞同：0
> 
> 时间：2013-02-20T00:53:59.890
> 
> 标签：google-maps, backbone.js, google-maps-api-3, backbone-views

我有一段时间试图让一个基本的谷歌地图出现。我已经在 Stack Overflow 上待了几个小时，但到目前为止还没有取得任何成功。我得到的最接近的是地图加载了 1/4 的正方形，左上角的四分之一。但是，如果您尝试拖动、缩放等，它就会像地图的其余部分一样变成灰色。在某些情况下，使用相同的代码，地图将完全加载，但仅在很长一段时间后（不确定具体多长时间，但 > 5 分钟）。

在我的模板中，我有

```
 <div id="map" style="width: 500px; height: 400px;"></div> 
```

然后在我的主干视图中

```
 $.getScript('http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback')                
  window.gMapsCallback = function(){                                         
           var myLatlng = new google.maps.LatLng(-34.397, 150.644);
           var mapOptions = {
                zoom: 8,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
           };
           var map = new google.maps.Map(document.getElementById("map"),
                mapOptions);                       
  } 
```

任何想法可能会发生什么？我也愿意接受任何关于将谷歌地图加载到主干视图中的更好方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:46:23.060

好的，原来有很多问题，包括在 Bootstrap 选项卡中嵌入地图，不包括回调，定义 div 高度和宽度，设置加载地图的小延迟，以及为地图设置 css 属性。哎。我的最终解决方案是：

在模板中

```
<script src='http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback'></script>
<div id="map" style="width: 500px; height: 400px;"></div> 
```

在样式表中

```
#map img {
  max-width: none;
}
#map label { 
  width: auto; display:inline; 
} 
```

在主干视图中

```
setTimeout(function(){
                var myLatlng = new google.maps.LatLng(53.1, -2.44); 
                var mapOptions = {
                    zoom: 8,
                    center: myLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map"),
                    mapOptions);   
                // Create marker 
                var marker = new google.maps.Marker({
                    map: map,
                    position: new google.maps.LatLng(53.1, -2.44),
                    title: 'The armpit of Cheshire'
                });

                // Add circle overlay and bind to marker
                var circle = new google.maps.Circle({
                    map: map,
                    radius: 10000,    // metres
                    fillColor: '#AA0000'
                });
                circle.bindTo('center', marker, 'position');
                google.maps.event.trigger(map, "resize");
                map.setZoom( map.getZoom() );
            }, 100); 
```

痛苦。请注意，当我调用 gmaps 脚本时，我必须包含回调，即使我从未使用过它。没有它，它就不能完全发挥作用。不知道为什么。

# wordpress - 如何在我的自定义 wordpress 模板中显示 WPAlchemy 帖子元？

> ID：14970489
> 
> 赞同：0
> 
> 时间：2013-02-20T00:55:55.853
> 
> 标签：wordpress, metadata, custom-post-type, image-upload

我正在使用 WPAlchemy 类为我的自定义帖子类型创建一个元框，其中包括图像上传字段。设置有效，我可以为每个帖子添加图像并保存图像 url。我设置了所有内容，如下所示：http: [//www.farinspace.com/wpalchemy-metabox/#installsetup](http://www.farinspace.com/wpalchemy-metabox/#installsetup)

我现在如何在我的页面上显示保存的图像元 URL？理想情况下，我希望能够通过将图像的 url 添加到图像 src 来在页面上显示为图像，以便它显示图像而不是链接。但是，我很乐意在页面上显示 url 以开始确保它存在。但我真的不知道如何将信息回显或打印到页面上。我已经尝试按照他们的一些示例进行操作，但似乎没有任何效果，有时我会收到 php 错误消息：

```
Fatal error: Call to a member function the_name() on a non-object in C:\ 
```

任何帮助表示赞赏。我认为它会比它更容易，比如 the_meta() 或类似的东西，但不清楚要添加什么才能让信息显示在页面上。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:01:26.707

最好的办法是使用：

```
global $custom_mb; 
$meta = $custom_mb->the_meta([ID_IS_OPTIONAL]); 
```

`$meta`将是给定帖子的所有存储值的数组，像通常循环数组一样循环遍历它

# javascript - Tumblr 照片集，图像上的图像

> ID：14970491
> 
> 赞同：0
> 
> 时间：2013-02-20T00:56:23.340
> 
> 标签：javascript, tumblr

我正在为我正在制作的杂志制作 tumblr 主题，但我被照片集块所困扰。

我想要两个带有悬停功能的图像分层，以便在您放置鼠标时使第一个图像消失。

我认为我的 css 对此非常好，但问题是对于照片集 tumblr 创建一个带有自己 css 的外部页面，我不知道如何修改它。我只能使用 iframe.photoset 获得不透明效果，但修改图像的位置是不够的。

这是我应用于照片集的 css：

```
.photoset {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}

.photoset_row {
    position: relative;
    display: block;
    width: 500px;
}

    .photoset_row:first-child {
        display: block;
    }

.photoset:hover .photoset_row {
    display: block;
}

.html_photoset:hover .photoset_row:fisrt-child {
    display: none;
} 
```

我正在考虑使用这样的 JS（使用抖动效果进行测试），但我不是网页设计师，这对我来说看起来太难了。

```
{block:Photoset}
<div class="photoset">
    <div class="shakeImage" onMouseover="init(this);rattleimage()"  onClick="top.focus()"/>
{Photoset-500}
</div> 
```

因此，如果您对这个问题有一个想法，那就太好了！

# iphone - 如何从另一个类调用通知

> ID：14970493
> 
> 赞同：-1
> 
> 时间：2013-02-20T00:56:29.687
> 
> 标签：iphone, ios

我尝试为另一个班级打电话通知

// 属于A类

```
- (void)onDidFinishLaunchingNotification:(NSNotification*)notification
{
    NSLOG(@"onDidFinishLaunchingNotification");
} 
```

从另一个类调用通知 // 它在 B 类中

```
 [[NSNotificationCenter defaultCenter]addObserver:nil selector:@selector(onDidFinishLaunchingNotification:) name:nil object:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:05:43.330

在 A 类中，将 self 添加为具有名称的通知的观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(onDidFinishLaunchingNotification:)
                                             name:YourOnDidFinishLaunchingNotificationName
                                           object:nil]; 
```

在 B 类中，用于`-postNotificationName:object:`发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:YourOnDidFinishLaunchingNotificationName
                                                    object:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:28:42.883

在 B 类中，您应该像这样将 addObserver 添加到 B：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(onDidFinishLaunchingNotification:)
                                             name:YourOnDidFinishLaunchingNotificationName
                                           object:nil]; 
```

我认为您应该查看[addObserver:selector:name:object 的文档：](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/addObserver:selector:name:object:)

这是一个非常[有用](https://stackoverflow.com/questions/2191594/send-and-receive-messages-through-nsnotificationcenter-in-objective-c/2191802#2191802)的例子`NSNotification`

# tomcat - 如何使用 IP 地址而不是 localhost 访问我在 tomcat 服务器上运行的应用程序

> ID：14970495
> 
> 赞同：0
> 
> 时间：2013-02-20T00:56:33.993
> 
> 标签：tomcat, ip

我正在尝试使用 IP 地址而不是 localhost 访问部署在 tomcat 服务器中的 Web 应用程序。我正在尝试从部署应用程序的同一台 PC 访问该地址。有趣的是，它在我的工作 wi-fi 网络中对我有用，但在我的家庭网络中却没有。我已经看过了

[如何在我的 PC 上运行 Apache Tomcat Webserver 并从真正的 Android 设备访问？](https://stackoverflow.com/questions/10636430/how-to-run-a-apache-tomcat-webserver-on-my-pc-and-access-if-from-a-real-android)

[为什么tomcat运行的tomcat实例只对localhost地址可见，而不是我的真实网络ip？](https://stackoverflow.com/questions/13307429/why-tomcat-instance-running-by-tomcat-is-only-visible-with-localhost-address-not)

这是否与我的防火墙设置或路由器设置有关。如果是这样，有人可以提供有关必须做什么的详细指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T21:39:08.353

请试试这个：

在 Apache 的文件配置**Httpd.conf**中为 Tomcat 服务（连接器文件）的行（假设在 Windows 中）：

```
Include ".../Tomcat/conf/auto/mod_jk.conf" 
```

在文件**mod_jk.conf**中，您可能有：

```
...
JkWorkersFile "...LocationOfYourWorkerFile..."
...
<VirtualHost localhost>
  ...
  ServerName localhost
  ...
  JkMount /*.jsp ajp13
</VirtualHost> 
```

其中**ajp13**是 JkWorkersFile 中定义的 Tomcat 工作者。

在**JkWorkersFile**中，您可能有：

```
worker.list=ajp13
worker.ajp13.port=8009
worker.ajp13.host=localhost
worker.ajp13.type=ajp13
# END workers.properties 
```

**在mod_jk.conf**文件中更改为：

```
<VirtualHost  *:80>
  ...
  ServerName localhost
  ...
  JkMount /*.jsp ajp13
</VirtualHost> 
```

在这种情况下，您是说不仅适用于 localhost，而且适用于所有通过 80 端口的 ip。

# c# - 绑定到以 [] 为后缀的表单字段

> ID：14970502
> 
> 赞同：0
> 
> 时间：2013-02-20T00:57:40.560
> 
> 标签：c#, asp.net-mvc

我有一些表单字段以名称“value []”发布：

```
value%5B%5D=8&value%5B%5D=4&value%5B%5D=2 
```

它们是从 jquery 库中发布的，所以如果不分叉他们的库，我就无法控制它。

我尝试了两种操作方法的参数，但都没有奏效`[Bind(Include = "value%5B%5D")]ICollection<int> values`。`[Bind(Include = "value[]")]ICollection<int> values`

我可以使用 验证这些字段是否在请求中`Request.Form.GetValues("value[]")`。

我可以使用如下形式重新创建相同的问题：

```
<form action="/Home/Empty" method="post">
    <input name="value[]" value="5">
    <input name="value[]" value="6">

    <input name="value[]" value="7">}
    <input type="submit" value="Submit">
</form>

    [HttpPost]
    public ActionResult Empty(List<int> value)
    {  //value is null :(
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:06:06.227

重要的是您的 Action Method 的参数列表

*   与您的输入变量命名相同

    ```
    public ActionResult Empty(List<int> value) 
    ```

另一种方法是遍历 Request.Form 数组。

```
for (i=0; i< Request.Form.count-1; i++)
{
  // somthing to do with Request.Form[i]

} 
```

# ria - 实现 MembershipProvider

> ID：14970503
> 
> 赞同：0
> 
> 时间：2013-02-20T00:57:41.943
> 
> 标签：ria, membership-provider

我想在 Silverlight/RIA 中使用 Microsoft Live/Connect/Passport（我想念任何人吗？）身份。

这有很多优点：

*   避免将另一个用户名/密码对强加给人们
*   用户帐户管理完全委托给 Passport，并且不构成我的应用程序或其 UI 的一部分
*   安全和可用性的责任被转移到了人人都爱恨的公司

现在，RIA 使用来自 ASP.NET 的成员资格堆栈，默认情况下返回到 SQL Server 中的 aspnetdb。

我正在研究实施 MembershipProvider。到目前为止，我已经设置了适当的引用并重写了 MembershipProvider，让 IDE 存根所有需要实现的方法。

我已将 EnablePasswordReset 和 EnablePasswordRetrieval 设置为返回 false，因为我的应用程序不提供这些服务。ValidateUser(username, password) 已实现并正常工作，使用 WebClient 将检查委托给 Microsoft 的服务器。然而仍然存在大量方法，所有方法都威胁到 NotImplementedException，我不知道 RIA 可能会调用哪些方法。这导致我...

## 问题

鉴于用户帐户管理完全委托给 Passport，有谁知道我实际需要实施多少 MembershipProvider？

我想到即使授权了身份验证和帐户管理，缓存凭据也可能是谨慎的。一旦建立了身份，最好在没有互联网连接的情况下使用它。例如，当 Surface RT 没有 Internet 连接时，您仍然可以使用您的 Passport 凭据登录它。

也许我应该从 SqlMembershipProvider 继承，以便 ValidateUser 检查用户名是否在本地已知，如果没有尝试使用 Passport 的凭据，并且 - 如果它们通过 - 隐式创建本地用户，如果它确实存在但凭据失败，请检查护照，以防本地密码过时，如果 Passport 接受密码，则更新它。

如果您喜欢这个想法，我们会征求您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:32:01.740

使用自定义 MembershipProvider，您只需要实现，

*   获取用户
*   验证用户

另一个想法是，使用 LiveID，它支持安全令牌服务，因此您可以使用 Windows 身份框架，请参阅此处 [让 Live ID 通过 WIF 工作](https://stackoverflow.com/questions/4674762/getting-live-id-to-work-via-wif)

# css - 为什么 svg:text 不显示？

> ID：14970504
> 
> 赞同：5
> 
> 时间：2013-02-20T00:57:45.723
> 
> 标签：css, svg, d3.js

我一定遗漏了一些明显的东西，但我无法`<text>`显示出来。有关HTML + CSS，请参阅[http://jsfiddle.net/ydaLh/](http://jsfiddle.net/ydaLh/)

```
<svg style="width: 320px; height: 200px; top: 0px; left: 0px; position: relative;">
    <g class="depth">
        <g class="children">
            <rect class="child" x="99" y="0" width="47" height="30">
                <text dy=".75em" x="105" y="6">PRIMARY</text>
            </rect>
            <rect class="child" x="90" y="0" width="8" height="30">
                <text dy=".75em" x="96" y="6">MASTER</text>
            </rect>
            <rect class="parent" x="90" y="0" width="56" height="30"></rect>
        </g>
    </g>
</svg> 
```

基于[http://bost.ocks.org/mike/treemap/](http://bost.ocks.org/mike/treemap/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T19:45:19.590

在 SVG 中，您不会在图形元素中嵌套文本元素，您必须具有类似于以下内容的内容：

```
svg
  .append("rect")
  .append("text"); 
```

但你实际上需要：

```
svg.append("rect"); 
svg.append("text"); 
```

# javascript - 省略 iframe 源代码顶部和底部的 jQuery 代码

> ID：14970505
> 
> 赞同：0
> 
> 时间：2013-02-20T00:57:49.923
> 
> 标签：javascript, jquery, html, iframe, frame

基本上我们有这个网站，它是大品牌的零售商。

他们希望在品牌网站上包含品牌自己的目录。

问题是，品牌本身也在他们的网站上销售他们的产品。

有没有办法在 iframe 内主动隐藏网页的顶部（高度的前 500 像素和高度的后 300 像素）？

我尝试了很多方法，但它们要么失败，要么出现“不安全”的方法错误，例如：

```
Unsafe JavaScript attempt to access frame with URL http://www.siteaddress.com/ from frame with URL http://www.othersiteaddress.com/. Domains, protocols and ports must match. 
```

我不想更改他们网站上的任何内容，我只想隐藏顶部和底部部分。更难的是 iframe 内的某些页面会有不同的高度，所以唯一的方法是省略前 500 像素和后 300 像素的高度。但是，过去的几个小时并没有帮助我找到答案。

这可能吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:11:39.150

简短的回答：不，您很可能无法实现您所追求的目标。

更长的答案：

要在您嵌入的页面上运行 javascript，要么需要来自同一个域（以免违反浏览器对 javascript 的跨域阻止），要么修改为包含特定脚本以允许通信。

即使您有权对 iframe 中包含的网站进行更改，但您似乎没有，这仍然会导致许多问题。如前所述，页面会随内容和结构而变化，您可能需要做一些事情，例如隐藏特定的 DOM 元素，例如页眉/页脚/容器等 - 这会影响布局等等。

会有很多边缘情况需要考虑，实现你想要的结果是不切实际的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:13:35.677

不，您可以尝试一些花哨的东西，但实际上在服务器端抓取品牌网站并与之交互会更容易。

所以不。只是不。

# php - 绝对位置从图像中删除超链接。

> ID：14970509
> 
> 赞同：0
> 
> 时间：2013-02-20T00:58:06.427
> 
> 标签：php, html, css, absolute

我有以下代码：

```
<div style="position: absolute; margin-top: 48px; margin-left: 261px;">
    <a href="http://www.somepage.com" target="_blank">
        <?php $image_url='http://www.somepage.com/image.jpg'; ?>
        <img src="<?php echo $image_url;?>">
    </a>
</div> 
```

图像显示和位置正确，并且超链接在没有“位置：绝对”的情况下工作正常，但是当它包含在上面时，链接不起作用。

我绝不是 PHP 程序员，甚至不是程序员。所以我可能在这里遗漏了一些明显的东西？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:10:16.973

[Worken](http://jsfiddle.net/cEVpN/) ---> 在 localhost 上也试过了，它工作得很好，还有其他导致你的问题的东西

代码：

```
<div style="position: absolute; margin-top: 48px; margin-left: 261px;">
    <a href="http://www.somepage.com" target="_blank">
        <img style = "border:1px solid black;" src="http://www.somepage.com/image.jpg">
    </a>
</div> 
```

作为旁注：我觉得它链接到实际页面很幽默

**编辑：**

很高兴看到你已经想通了，这是我刚刚想到的另一个解决方案：

```
#logo{
    background-image:url(http://www.somepage.com/image.jpg);
    height:400px;
    width:40px;
}

<div style="position: absolute; margin-top: 48px; margin-left: 261px;">
    <a href="http://www.somepage.com" target="_blank" id = "logo">
    </a>
</div> 
```

# asp.net-mvc-3 - AWS：EC2 微型，对于 .NET MVC 3 应用程序来说还不够？

> ID：14970510
> 
> 赞同：2
> 
> 时间：2013-02-20T00:58:16.057
> 
> 标签：asp.net-mvc-3, amazon-web-services, amazon-ec2, cpu-usage

我使用弹性 beanstalk 在 EC2 微型实例（具有 613 MB 内存）上管理/部署我的 .NET MVC 3 应用程序。它目前主要是一个静态站点，因为它处于 Beta 阶段，具有注册（包括电子邮件确认）和一些错误记录 (ELMAH)。

直到最近它都做得很好，我不断收到 CPU 利用率超过 95.00% 的通知。

具有 613MB 内存的微型实例是否不足以运行 MVC 应用程序以供生产使用？

添加信息：Windows Server 2008 R2，运行 IIS7.5

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:10:21.027

我已经尝试运行 Jetbrains teamcity（我认为它使用 Tomcat）并且在使用 ec2 微型实例的 linux 机器上，并且没有足够的内存来支持它需要的东西。

我确实尝试过在微型实例上运行服务器 2008/2012 机器，但打开任何东西都没有意义。

我想你会发现在其中一个盒子上运行 Windows 并不是一个真正可行的选择，除非你开始疯狂地禁用服务并在调整时变得非常有创意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:30:20.140

一个微型实例显然不足以用于生产。

微型实例的 I/O 限制较低，一旦达到此限制（我认为是一个月），所有后续操作都会受到限制。

因此，我建议您至少使用一个小型实例进行生产。并为您的开发/测试/预生产环境保留您的微型计算机！

编辑：我从一个亚马逊人那里得到了这些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T22:39:03.813

确保您的负载均衡器正在 ping 一个空白的 html 文件。我收到这条消息是因为它正在 ping 我的主页，该主页有 db 负载。当我将它设置为 ping 一个空白的 html 文件时，它运行顺利

# c++ - ifstream对象来自c ++中其他目录中的文件

> ID：14970511
> 
> 赞同：0
> 
> 时间：2013-02-20T00:58:19.033
> 
> 标签：c++, input, ifstream, subdirectory

我已将所有打算在我的应用程序中用作输入流的文件保存在一个名为“res”的文件夹中。我正在尝试通过在应用程序中构建字符串然后使用以下方式打开它们来将这些文件用作输入流：

```
....
ifstream inputFile;
....
char fileName[30];
strcpy(fileName,"res/")
switch(num){
case 1:
    strcat(fileName,"file1");
case 2:
    strcat(fileName,"file2");
....
}

inputFile.open(fileName);
.... 
```

但是文件没有打开，我不知道为什么；该`inputFile.is_open()`方法返回false。所以我有两个问题：

1.  如何引用子目录中的文件以及父目录中其他文件夹中的文件？

2.  有没有比我用来做我上面想做的事情更好的做法？我很确定有！

我在 Ubuntu 12.04 和 g++-4.6 编译器上使用 eclipse CDT，如果这有区别的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:55:27.947

实际上，大卫在评论中给出了正确的答案。您忘记了案例后的休息并连接多个名称。还有你的疯狂技能，你最好避免使用 strcat 和其他低级函数并使用 std::string，否则你的下一个问题将是关于你的程序转储核心

# java - 在 Neo4J 中插入大量节点

> ID：14970513
> 
> 赞同：2
> 
> 时间：2013-02-20T00:58:33.327
> 
> 标签：java, neo4j, bigdata

我有一个存储在典型 MySQL 数据库中的表，并且我使用 java 构建了一个小型解析器工具来解析并构建一个 neo4j 数据库。该数据库将有大约 4000 万个节点，每个节点都有一条或多条边（最多可能有 10 条边）。问题来自我必须创建某些节点的方式。有一个用户节点、评论节点和主题标签节点。用户节点和主题标签节点都必须是唯一的。我正在使用以下示例中的代码来确保唯一性：

```
public Node getOrCreateUserWithUniqueFactory( String username, GraphDatabaseService graphDb )
{
    UniqueFactory<Node> factory = new UniqueFactory.UniqueNodeFactory( graphDb, "users" )
    {
    @Override
    protected void initialize( Node created, Map<String, Object> properties )
    {
        created.setProperty( "name", properties.get( "name" ) );
    }
};

return factory.getOrCreate( "name", username ); 
```

}

我曾考虑过使用批量插入器，但我还没有看到在执行批量插入时检查节点是否唯一的方法。所以我的问题是插入所有这些节点的最快方法是什么，同时仍确保它们保持其唯一性。任何帮助将一如既往地不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:35:58.537

万一这里的其他人遇到这个问题，我想记录我自己和同事为了提高速度而能够弄清楚的内容。首先是关于数据的一两个注释：

*   用户数量多，约占节点的30%
*   还有大量的主题标签，因为人们倾向于散列几乎任何东西
*   这两者都必须保证是独一无二的

现在，这已经不适合优化了。首先，您需要确保每次插入节点时插入循环都完成。没有真正的例子可供我们查看，所以最初的代码看起来像这样（伪代码）

```
Transaction begin
While(record.next()){
   parse record
   create unique user
   create unique hashtag
   create comment
   insert into graph
}
Transaction success
Transaction finish 
```

虽然这对小型数据集运行良好并且相对较快完成，但它的扩展性并不好。因此，我们查看了每个函数的用途，并将代码重构为如下所示：

```
While(record.next()){
   Transaction begin

   parse record
   create unique user
   create unique hashtag
   create comment
   insert into graph

   Transaction success
   Transaction finish
} 
```

这大大加快了速度，但对我的同事来说还不够。所以他发现可以在节点属性上创建 Lucene 索引，我们可以在 Unique Node 工厂中引用这些索引。这给了我们另一个显着的速度提升。如此之多，以至于我们可以在大约 10 秒内插入 1,000,000 个节点，而无需使用批处理加载器。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:25:07.173

为什么不在批量插入期间创建本地缓存？您可以使用`Map`带有键`name`和值的 java `NodeId`（来自批处理插入器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T07:00:15.237

通常最简单的方法是将它们保存在`HashMap`. 毕竟你不会有那么多用户和标签

您还可以使用`LuceneBatchInserterIndex`和使用`setCapacity`

见：[http ://docs.neo4j.org/chunked/milestone/batchinsert.html#indexing-batchinsert](http://docs.neo4j.org/chunked/milestone/batchinsert.html#indexing-batchinsert)

# java - 使用 Mockito 来模拟某些方法，但不能模拟其他方法

> ID：14970516
> 
> 赞同：522
> 
> 时间：2013-02-20T00:59:08.107
> 
> 标签：java, mocking, mockito

有没有办法使用 Mockito 来模拟类中的某些方法，而不是其他方法？

例如，在这个（诚然做作的）`Stock`类中，我想模拟`getPrice()`和`getQuantity()`返回值（如下面的测试片段所示），但我希望`getValue()`执行`Stock`类中编码的乘法

```
public class Stock {
  private final double price;
  private final int quantity;

  Stock(double price, int quantity) {
    this.price = price;
    this.quantity = quantity;
  }

  public double getPrice() {
    return price;
  }

  public int getQuantity() {
    return quantity;
  }
  public double getValue() {
    return getPrice() * getQuantity();
  }

  @Test
  public void getValueTest() {
    Stock stock = mock(Stock.class);
    when(stock.getPrice()).thenReturn(100.00);
    when(stock.getQuantity()).thenReturn(200);
    double value = stock.getValue();
    // Unfortunately the following assert fails, because the mock Stock getValue() method does not perform the Stock.getValue() calculation code.
    assertEquals("Stock value not correct", 100.00*200, value, .00001);
} 
```

* * *

## 回答 #1

> 赞同：829
> 
> 时间：2013-02-20T01:02:37.010

要直接回答您的问题，是的，您可以模拟某些方法而不模拟其他方法。这称为**部分模拟**。有关更多信息，请参阅[有关部分模拟的 Mockito 文档](http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#16)。

对于您的示例，您可以在测试中执行以下操作：

```
Stock stock = mock(Stock.class);
when(stock.getPrice()).thenReturn(100.00);    // Mock implementation
when(stock.getQuantity()).thenReturn(200);    // Mock implementation
when(stock.getValue()).thenCallRealMethod();  // Real implementation 
```

在这种情况下，每个方法实现都会被模拟，除非`thenCallRealMethod()`在`when(..)`子句中指定。

也有可能使用**spy**而不是**mock**：

```
Stock stock = spy(Stock.class);
when(stock.getPrice()).thenReturn(100.00);    // Mock implementation
when(stock.getQuantity()).thenReturn(200);    // Mock implementation
// All other method call will use the real implementations 
```

在这种情况下，所有方法实现都是真实的，除非您使用`when(..)`.

`when(Object)`当您像上一个示例一样使用 spy时，有一个重要的陷阱。将调用真正的方法（因为`stock.getPrice()`之前`when(..)`在运行时进行了评估）。如果您的方法包含不应调用的逻辑，这可能是一个问题。您可以像这样编写前面的示例：

```
Stock stock = spy(Stock.class);
doReturn(100.00).when(stock).getPrice();    // Mock implementation
doReturn(200).when(stock).getQuantity();    // Mock implementation
// All other method call will use the real implementations 
```

* * *

另一种可能是使用`org.mockito.Mockito.CALLS_REAL_METHODS`，例如：

```
Stock MOCK_STOCK = Mockito.mock( Stock.class, CALLS_REAL_METHODS ); 
```

这将未存根的调用委托给实际实现。

* * *

但是，对于您的示例，我相信它仍然会失败，因为实现`getValue()`依赖于`quantity`and `price`，而不是`getQuantity()`and `getPrice()`，这是您所嘲笑的。

另一种可能性是完全避免模拟：

```
@Test
public void getValueTest() {
    Stock stock = new Stock(100.00, 200);
    double value = stock.getValue();
    assertEquals("Stock value not correct", 100.00*200, value, .00001);
} 
```

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2013-05-24T06:52:46.820

**通过Spy** in mockito也支持类的部分模拟

```
List list = new LinkedList();
List spy = spy(list);

//optionally, you can stub out some methods:
when(spy.size()).thenReturn(100);

//using the spy calls real methods
spy.add("one");
spy.add("two");

//size() method was stubbed - 100 is printed
System.out.println(spy.size()); 
```

检查[`1.10.19`](http://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/Mockito.html#16)和[`2.7.22`](http://static.javadoc.io/org.mockito/mockito-core/2.7.22/org/mockito/Mockito.html#16)文档以获取详细说明。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-09-01T13:30:48.583

根据[文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#16)：

```
Foo mock = mock(Foo.class, CALLS_REAL_METHODS);

// this calls the real implementation of Foo.getSomething()
value = mock.getSomething();

when(mock.getSomething()).thenReturn(fakeValue);

// now fakeValue is returned
value = mock.getSomething(); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-02-19T11:47:16.753

你想要的是`org.mockito.Mockito.CALLS_REAL_METHODS`根据文档：

```
/**
 * Optional <code>Answer</code> to be used with {@link Mockito#mock(Class, Answer)}
 * <p>
 * {@link Answer} can be used to define the return values of unstubbed invocations.
 * <p>
 * This implementation can be helpful when working with legacy code.
 * When this implementation is used, unstubbed methods will delegate to the real implementation.
 * This is a way to create a partial mock object that calls real methods by default.
 * <p>
 * As usual you are going to read <b>the partial mock warning</b>:
 * Object oriented programming is more less tackling complexity by dividing the complexity into separate, specific, SRPy objects.
 * How does partial mock fit into this paradigm? Well, it just doesn't... 
 * Partial mock usually means that the complexity has been moved to a different method on the same object.
 * In most cases, this is not the way you want to design your application.
 * <p>
 * However, there are rare cases when partial mocks come handy: 
 * dealing with code you cannot change easily (3rd party interfaces, interim refactoring of legacy code etc.)
 * However, I wouldn't use partial mocks for new, test-driven & well-designed code.
 * <p>
 * Example:
 * <pre class="code"><code class="java">
 * Foo mock = mock(Foo.class, CALLS_REAL_METHODS);
 *
 * // this calls the real implementation of Foo.getSomething()
 * value = mock.getSomething();
 *
 * when(mock.getSomething()).thenReturn(fakeValue);
 *
 * // now fakeValue is returned
 * value = mock.getSomething();
 * </code></pre>
 */ 
```

因此，您的代码应如下所示：

```
import org.junit.Test;
import static org.mockito.Mockito.*;
import static org.junit.Assert.*;

public class StockTest {

    public class Stock {
        private final double price;
        private final int quantity;

        Stock(double price, int quantity) {
            this.price = price;
            this.quantity = quantity;
        }

        public double getPrice() {
            return price;
        }

        public int getQuantity() {
            return quantity;
        }

        public double getValue() {
            return getPrice() * getQuantity();
        }
    }

    @Test
    public void getValueTest() {
        Stock stock = mock(Stock.class, withSettings().defaultAnswer(CALLS_REAL_METHODS));
        when(stock.getPrice()).thenReturn(100.00);
        when(stock.getQuantity()).thenReturn(200);
        double value = stock.getValue();

        assertEquals("Stock value not correct", 100.00 * 200, value, .00001);
    }
} 
```

* * *

调用`Stock stock = mock(Stock.class);`如下`org.mockito.Mockito.mock(Class<T>)`所示：

```
 public static <T> T mock(Class<T> classToMock) {
    return mock(classToMock, withSettings().defaultAnswer(RETURNS_DEFAULTS));
} 
```

该值的文档`RETURNS_DEFAULTS`告诉：

```
/**
 * The default <code>Answer</code> of every mock <b>if</b> the mock was not stubbed.
 * Typically it just returns some empty value. 
 * <p>
 * {@link Answer} can be used to define the return values of unstubbed invocations. 
 * <p>
 * This implementation first tries the global configuration. 
 * If there is no global configuration then it uses {@link ReturnsEmptyValues} (returns zeros, empty collections, nulls, etc.)
 */ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-24T20:49:43.513

如上面的答案所述，使用 Mockito 的 spy 方法进行部分模拟可能是您问题的解决方案。在某种程度上，我同意，对于您的具体用例，模拟数据库查找可能更合适。根据我的经验，这并不总是可能的——至少在没有其他解决方法的情况下并非如此——我认为这非常麻烦或至少很脆弱。请注意，部分模拟不适用于 Mockito 的盟友版本。您至少使用了 1.8.0。

我会为原始问题写一个简单的评论，而不是发布这个答案，但 StackOverflow 不允许这样做。

还有一件事：我真的无法理解，这里有很多次被问到的问题都会得到“你为什么要这样做”的评论，而至少没有试图理解这个问题。尤其是当需要部分模拟时，我可以想象有很多用例在哪里有用。这就是为什么来自 Mockito 的人提供了该功能。这个特性当然不应该被过度使用。但是当我们谈论无法以非常复杂的方式建立的测试用例设置时，应该使用间谍。

# javascript - 富文本编辑器中的自动完成建议

> ID：14970517
> 
> 赞同：1
> 
> 时间：2013-02-20T00:59:07.383
> 
> 标签：javascript, html, autocomplete, rich-text-editor

我目前正在开展一个项目，以启动并运行富文本编辑器，该编辑器允许在按下标记键后在光标位置出现自动完成建议，例如“@”。我已经通过 jQuery 在 textarea 中毫无问题地完成了这项工作，但它在 RTE iFrame 中表现不佳。

我通过 AJAX 扫描服务器文件以检查为自动完成“标签”键入的文本的自动完成示例。

Mozilla 编辑器：www-archive.mozilla.org/editor/midasdemo/

自动完成来自：www.amirharel.com/2011/03/07/implementing-autocomplete-jquery-plugin-for-textarea/

```
<html>
<head>

<style type="text/css">
.imagebutton {height: 22; width: 23; border: solid 2px #C0C0C0; background-color: #C0C0C0}
.image {position: relative; left: 1; top: 1; height:20; width:21; border:none;}
.toolbar {height: 30; background-color: #C0C0C0;}
</style>

<script>

var command = "";

function InitToolbarButtons() {
  var kids = document.getElementsByTagName('DIV');
  for (var i=0; i < kids.length; i++) {
    if (kids[i].className == "imagebutton") {
      kids[i].onmouseover = tbmouseover;
      kids[i].onmouseout = tbmouseout;
      kids[i].onmousedown = tbmousedown;
      kids[i].onmouseup = tbmouseup;
      kids[i].onclick = tbclick;
    }
  }
}
function tbmousedown(e)
{
  var evt = e ? e : window.event; 
  this.firstChild.style.left = 2;
  this.firstChild.style.top = 2;
  this.style.border="inset 2px";
  if (evt.returnValue) {
    evt.returnValue = false;
  } else if (evt.preventDefault) {
    evt.preventDefault( );
  } else {
    return false;
  }
}
function tbmouseup()
{
  this.firstChild.style.left = 1;
  this.firstChild.style.top = 1;
  this.style.border="outset 2px";
}
function tbmouseout()
{
  this.style.border="solid 2px #C0C0C0";
}
function tbmouseover()
{
  this.style.border="outset 2px";
}
  function insertNodeAtSelection(win, insertNode)
  {
      // get current selection
      var sel = win.getSelection();
      // get the first range of the selection
      // (there's almost always only one range)
      var range = sel.getRangeAt(0);
      // deselect everything
      sel.removeAllRanges();
      // remove content of current selection from document
      range.deleteContents();
      // get location of current selection
      var container = range.startContainer;
      var pos = range.startOffset;
      // make a new range for the new selection
      range=document.createRange();
      if (container.nodeType==3 && insertNode.nodeType==3) {
        // if we insert text in a textnode, do optimized insertion
        container.insertData(pos, insertNode.nodeValue);
        // put cursor after inserted text
        range.setEnd(container, pos+insertNode.length);
        range.setStart(container, pos+insertNode.length);
      } else {
        var afterNode;
        if (container.nodeType==3) {
          // when inserting into a textnode
          // we create 2 new textnodes
          // and put the insertNode in between
          var textNode = container;
          container = textNode.parentNode;
          var text = textNode.nodeValue;
          // text before the split
          var textBefore = text.substr(0,pos);
          // text after the split
          var textAfter = text.substr(pos);
          var beforeNode = document.createTextNode(textBefore);
          afterNode = document.createTextNode(textAfter);
          // insert the 3 new nodes before the old one
          container.insertBefore(afterNode, textNode);
          container.insertBefore(insertNode, afterNode);
          container.insertBefore(beforeNode, insertNode);
          // remove the old node
          container.removeChild(textNode);
        } else {
          // else simply insert the node
          afterNode = container.childNodes[pos];
          container.insertBefore(insertNode, afterNode);
        }
        range.setEnd(afterNode, 0);
        range.setStart(afterNode, 0);
      }
      sel.addRange(range);
  };
function getOffsetTop(elm) {
  var mOffsetTop = elm.offsetTop;
  var mOffsetParent = elm.offsetParent;
  while(mOffsetParent){
    mOffsetTop += mOffsetParent.offsetTop;
    mOffsetParent = mOffsetParent.offsetParent;
  }

  return mOffsetTop;
}
function getOffsetLeft(elm) {
  var mOffsetLeft = elm.offsetLeft;
  var mOffsetParent = elm.offsetParent;
  while(mOffsetParent){
    mOffsetLeft += mOffsetParent.offsetLeft;
    mOffsetParent = mOffsetParent.offsetParent;
  }

  return mOffsetLeft;
}
function tbclick()
{
  if ((this.id == "forecolor") || (this.id == "hilitecolor")) {
    parent.command = this.id;
    buttonElement = document.getElementById(this.id);
    document.getElementById("colorpalette").style.left = getOffsetLeft(buttonElement);
    document.getElementById("colorpalette").style.top = getOffsetTop(buttonElement) + buttonElement.offsetHeight;
    document.getElementById("colorpalette").style.visibility="visible";
  } else if (this.id == "createlink") {
    var szURL = prompt("Enter a URL:", "http://");
    if ((szURL != null) && (szURL != "")) {
      document.getElementById('edit').contentWindow.document.execCommand("CreateLink",false,szURL);
    }
  } else if (this.id == "createimage") {
    imagePath = prompt('Enter Image URL:', 'http://');
    if ((imagePath != null) && (imagePath != "")) {
      document.getElementById('edit').contentWindow.document.execCommand('InsertImage', false, imagePath);
    }
  } else if (this.id == "createtable") {
    e = document.getElementById("edit");
    rowstext = prompt("enter rows");
    colstext = prompt("enter cols");
    rows = parseInt(rowstext);
    cols = parseInt(colstext);
    if ((rows > 0) && (cols > 0)) {
      table = e.contentWindow.document.createElement("table");
      table.setAttribute("border", "1");
      table.setAttribute("cellpadding", "2");
      table.setAttribute("cellspacing", "2");
      tbody = e.contentWindow.document.createElement("tbody");
      for (var i=0; i < rows; i++) {
        tr =e.contentWindow.document.createElement("tr");
        for (var j=0; j < cols; j++) {
          td =e.contentWindow.document.createElement("td");
          br =e.contentWindow.document.createElement("br");
          td.appendChild(br);
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      }
      table.appendChild(tbody);      
      insertNodeAtSelection(e.contentWindow, table);
    }
  } else {
    document.getElementById('edit').contentWindow.document.execCommand(this.id, false, null);
  }
}
function Select(selectname)
{
  var cursel = document.getElementById(selectname).selectedIndex;
  /* First one is always a label */
  if (cursel != 0) {
    var selected = document.getElementById(selectname).options[cursel].value;
    document.getElementById('edit').contentWindow.document.execCommand(selectname, false, selected);
    document.getElementById(selectname).selectedIndex = 0;
  }
  document.getElementById("edit").contentWindow.focus();
}
function dismisscolorpalette()
{
  document.getElementById("colorpalette").style.visibility="hidden";
}
function Start() {
  document.getElementById('edit').contentWindow.document.designMode = "on";
  try {
    document.getElementById('edit').contentWindow.document.execCommand("undo", false, null);
  }  catch (e) {
    alert("This demo is not supported on your browser.");
  }
  InitToolbarButtons();
  if (document.addEventListener) {
    document.addEventListener("mousedown", dismisscolorpalette, true);
    document.getElementById("edit").contentWindow.document.addEventListener("mousedown", dismisscolorpalette, true);
    document.addEventListener("keypress", dismisscolorpalette, true);
    document.getElementById("edit").contentWindow.document.addEventListener("keypress", dismisscolorpalette, true);
  } else if (document.attachEvent) {
    document.attachEvent("mousedown", dismisscolorpalette, true);
    document.getElementById("edit").contentWindow.document.attachEvent("mousedown", dismisscolorpalette, true);
    document.attachEvent("keypress", dismisscolorpalette, true);
    document.getElementById("edit").contentWindow.document.attachEvent("keypress", dismisscolorpalette, true);
  }
}
</script>

<style type="text/css" style="display:none">ul.auto-list{display:none;position:absolute;top:0px;left:0px;border:1px solid green;background-color:#A3DF99;padding:0;margin:0;list-style:none;}ul.auto-list>li:hover,ul.auto-list>li[data-selected=true]{background-color:#236574;}ul.auto-list>li{border:1px solid gray;cursor:default;padding:2px;}mark{font-weight:bold;}</style>
<style type="text/css">#ta{width:300px;height :100px;font-size:11px;font-family:"Helvetica Neue",Arial,sans-serif;white-space:pre;}</style>
<script src="js/jquery-1.5.js" type="text/javascript"></script>
<script src="js/autocomplete.js" type="text/javascript"></script>
<script type="text/javascript">
        var tags = [];
        function initEditorTextarea(){
            $.ajax("autotags.txt",{
                success: function(data, textStatus, jqXHR){
                    tags = data.replace(/\r/g, "" ).split("\n"); 
                    $("#editor textarea").autocomplete({
                        wordCount:1,
                        on: {
                            query: function(text,cb){
                                var words = [];
                                for( var i=0; i<tags.length; i++ ){
                                    if( tags[i].toLowerCase().indexOf(text.toLowerCase()) == 0 ) words.push(tags[i]);
                                    if( words.length > 5 ) break;
                                }
                                cb(words);                              
                            }
                        }
                    });
                }
            });
        }
        $(document).ready(function(){
            Start();
            initEditorTextarea();
        });
    </script>
</head>
<body>
    <div id="editor">
        <textarea style="width: 750px; height: 150px; margin-bottom: 10px;"></textarea>
    </div>
<table bgcolor="#C0C0C0" id="toolbar">
<tr>
<td>
<select id="formatblock" onchange="Select(this.id);">
  <option value="<p>">Normal</option>
  <option value="<p>">Paragraph</option>
  <option value="<h1>">Heading 1 <H1></option>
  <option value="<h2>">Heading 2 <H2></option>
  <option value="<h3>">Heading 3 <H3></option>
  <option value="<h4>">Heading 4 <H4></option>
  <option value="<h5>">Heading 5 <H5></option>
  <option value="<h6>">Heading 6 <H6></option>
  <option value="<address>">Address <ADDR></option>
  <option value="<pre>">Formatted <PRE></option>
</select>
</td>
<td>
<select id="fontname" onchange="Select(this.id);">
  <option value="Font">Font</option>
  <option value="Arial">Arial</option>
  <option value="Courier">Courier</option>
  <option value="Times New Roman">Times New Roman</option>
</select>
</td>
<td>
<select unselectable="on" id="fontsize" onchange="Select(this.id);">
  <option value="Size">Size</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>  
</select>
</td>
<td>
<div class="imagebutton" id="bold"><img class="image" src="images/bold.gif" alt="Bold" title="Bold"></div>
</td>
<td>
<div class="imagebutton" id="italic"><img class="image" src="images/italic.gif" alt="Italic" title="Italic"></div>
</td>
<td>
<div class="imagebutton" id="underline"><img class="image" src="images/underline.gif" alt="Underline" title="Underline"></div>
</td>
<td>
</td>
<td>
<div style="left: 10;" class="imagebutton" id="forecolor"><img class="image" src="images/forecolor.gif" alt="Text Color" title="Text Color"></div>
</td>
<td>
<div style="left: 40;" class="imagebutton" id="hilitecolor"><img class="image" src="images/backcolor.gif" alt="Background Color" title="Background Color"></div>
</td>
<td>
<div style="left: 10;" class="imagebutton" id="justifyleft"><img class="image" src="images/justifyleft.gif" alt="Align Left" title="Align Left"></div>
</td>
<td>
<div style="left: 40;" class="imagebutton" id="justifycenter"><img class="image" src="images/justifycenter.gif" alt="Center" title="Center"></div>
</td>
<td>
<div style="left: 70;" class="imagebutton" id="justifyright"><img class="image" src="images/justifyright.gif" alt="Align Right" title="Align Right"></div>
</td>
<td>
<div style="left: 10;" class="imagebutton" id="insertorderedlist"><img class="image" src="images/orderedlist.gif" alt="Ordered List" title="Ordered List"></div>
</td>
<td>
<div style="left: 40;" class="imagebutton" id="insertunorderedlist"><img class="image" src="images/unorderedlist.gif" alt="Unordered List" title="Unordered List"></div>
</td>
<td>
<div style="left: 10;" class="imagebutton" id="outdent"><img class="image" src="images/outdent.gif" alt="Outdent" title="Outdent"></div>
</td>
<td>
<div style="left: 40;" class="imagebutton" id="indent"><img class="image" src="images/indent.gif" alt="Indent" title="Indent"></div>
<td>
<div style="left: 10;" class="imagebutton" id="createlink"><img class="image" src="images/link.gif" alt="Insert Link" title="Insert Link"></div>
</td>
<td>
<div style="left: 10;" class="imagebutton" id="createimage"><img class="image" src="images/image.gif" alt="Insert Image" title="Insert Image"></div>
</td>
<td>
<div style="left: 10;" class="imagebutton" id="createtable"><img class="image" src="images/table.gif" alt="Insert Table" title="Insert Table"></div>
</td>
</tr>
</table>
<br>
<iframe id="edit" width="100%" height="400px"></iframe>
<iframe width="250" height="170" id="colorpalette" src="images/colors.html" style="visibility:hidden; position: absolute;"></iframe>

<script>
function viewsource(source)
{
  var html;
  if (source) {
    html = document.createTextNode(document.getElementById('edit').contentWindow.document.body.innerHTML);
    document.getElementById('edit').contentWindow.document.body.innerHTML = "";
    html = document.getElementById('edit').contentWindow.document.importNode(html,false);
    document.getElementById('edit').contentWindow.document.body.appendChild(html);
    document.getElementById("toolbar").style.visibility="hidden"; 
  } else {
    html = document.getElementById('edit').contentWindow.document.body.ownerDocument.createRange();
    html.selectNodeContents(document.getElementById('edit').contentWindow.document.body);
    document.getElementById('edit').contentWindow.document.body.innerHTML = html.toString();
    document.getElementById("toolbar").style.visibility="visible"; 
  }
}

function usecss(source)
{
  document.getElementById('edit').contentWindow.document.execCommand("useCSS", false, !(source));  
}

function readonly(source)
{
    document.getElementById('edit').contentWindow.document.execCommand("readonly", false, !(source));  
}
</script>
<input type="checkbox" onclick="viewsource(this.checked)">
View HTML Source</input>

</body>
</html> 
```

我花了很多时间研究基于浏览器的解决方案和基于 JS 的选项，但它们都没有奏效。我能找到的最好的例子是 Confluence RTE 环境：[https ://confluence.atlassian.com/display/CONF33/Using+Autocomplete+in+the+Rich+Text+Editor](https://confluence.atlassian.com/display/CONF33/Using+Autocomplete+in+the+Rich+Text+Editor)

我不需要任何超级花哨的东西，只需要能够运行所见即所得的基本富文本编辑器，并能够在特定的键输入上自动完成。我应该如何让这个工作？

编辑：必须更改代码上方的链接，因为我是新来的，所以它们不会自动链接。

# rest - jasper Rest客户端-在会话中找不到uuid

> ID：14970519
> 
> 赞同：1
> 
> 时间：2013-02-20T00:59:24.850
> 
> 标签：rest, jasper-reports, jasperserver, httpful

我必须为 Jasper 报告编写 PHP 前端。我可以使用 jasper REST 调用成功连接到服务器、验证和查看存储库。但是，当我尝试访问报告时，响应正文中出现以下错误：

> 未找到报告（在会话中未找到 uuid）

php代码如下：

```
 $uri = "http://localhost:8080/jasperserver/rest/report/samples/Client_Information_Report?RUN_OUTPUT_FORMAT=html";

    //PUT request to run the report
    $response = Httpful\Request::put($uri, $payload)
    ->authenticateWith("jasperadmin", "jasperadmin")
    ->send();

    $xml = new SimpleXMLElement($response->body);
    $uuid = (String)$xml->uuid; //The uuid is successfully returned

    $uri = "http://localhost:8080/jasperserver/rest/report/$uuid?file=report";
    $report = Httpful\Request::get($uri)
              ->authenticateWith("jasperadmin", "jasperadmin")
              ->send(); 
```

我能够确认第一个 PUT 返回了一个 uuid。我在这里有什么遗漏吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:05:37.527

珍妮兹，

首先检查来自 PUT 响应的信息，看看是否确实生成了一个报告并且该报告不为空，您应该收到如下信息：

```
<report>
    <uuid>d7bf6c9-9077-41f7-a2d4-8682e74b637e</uuid>
    <originalUri>/reports/samples/AllAccounts</originalUri>
    <totalPages>43</totalPages>
    <startPage>1</startPage>
    <endPage>43</endPage>
    <file type="image/png">img_0_0_0</file>
    <file type="image/gif">px</file>
    <file type="text/html">report</file>
    <file type="image/jpeg">img_0_42_27</file>
    <file type="image/png">img_0_42_26</file>
</report> 
```

注意页数和可用文件。

我没有使用过 Httpful 库，但要检查的另一件事是该库使用基本身份验证的方式。可能会发生第二次呼叫让您再次登录并创建新会话；这就是您找不到当前会话的 UUID 的原因。

我在 GitHub 中有一个完整的[JasperServer 和 PHP](https://github.com/marianol/JasperServer-for-PHP/)示例，您可以查看它，它实现了存储库浏览和输入控件呈现。我不确定您使用的是什么版本的 JasperReports Server，但在新版本中，有一个新的 REST API 可以更轻松地请求报告；查看[JasperReports 服务器 Web 服务指南](http://community.jaspersoft.com/documentation/)（第 3.2 节）。我在我的项目的**JRS-Wrapper**分支中实现了它。

希望这可以帮助！！

马里亚诺

# xml - XSLT Sheet 抓取错误信息

> ID：14970520
> 
> 赞同：0
> 
> 时间：2013-02-20T00:59:24.770
> 
> 标签：xml, xslt

我正在使用 XSLT 将 XML 文件转换为 CSV 文件。我的 XSLT 工作表拉到了`-->`某些数字的前面。这导致`--&gt;`显示在我的 CSV 上。我该如何阻止这种情况发生？我正在尝试获取以下 XML 中的货币金额。

XSLT 表

```
<xsl:text>"</xsl:text>
<xsl:value-of select="$tran/BPR/BPR02"/>
<xsl:text>",</xsl:text> 
```

XML

```
-<BPR> 
<!--Transaction Handling Code-->
-<BPR01>I
<!--Remittance Information Only-->
</BPR01> 
<!--Monetary Amount-->
<BPR02>22615.08</BPR02> 
<!--Credit/Debit Flag Code-->
-<BPR03>C
<!--Credit--> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:01:41.760

**使用**：`<xsl:output method="text"/>`

以下是您的片段代码在转换中的样子：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
    <xsl:text>"</xsl:text>
    <xsl:value-of select="/BPR/BPR02"/>
    <xsl:text>",</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时——更正为格式正确：**

```
<BPR>
    <!--Transaction Handling Code-->
    <BPR01>I
        <!--Remittance Information Only-->
    </BPR01>
    <!--Monetary Amount-->
    <BPR02>22615.08</BPR02>
    <!--Credit/Debit Flag Code-->
    <BPR03>C</BPR03>
    <!--Credit-->
</BPR> 
```

**结果不包含不需要的字符：**

```
"22615.08", 
```

# python - 我的自定义模块没有出现在我的 openerp 7 安装中

> ID：14970521
> 
> 赞同：4
> 
> 时间：2013-02-20T00:59:43.833
> 
> 标签：python, module, ubuntu-12.04, openerp

我最初为 openerp 6.1 制作了一个自定义模块，我想使用最新的 openerp 7 版本将它安装在我得到的另一台 openerp 服务器上。

我已经做了“更新模块列表”并搜索了“额外”和“未安装”过滤器，但没有成功。

我在某处读到 openerp 6.1 模块在 openerp 7 上并不完全相同

有人可以对此有所了解吗？目前关于 openerp 7 上的自定义模块的文档也很差。

这是我的`__init__.py`

```
import schoolsout 
```

`__openerp__.py`

```
{
"name" : "Student Information",
"version" : "6.0.1",
"author" : "Koci",
"website" : "http://www.tuespacioweb.com.ve",
"category" : "General",
"depends" : ["base"],
"description" : "Certificados de NO Produccion Grafibond",
"init_xml" : [],
"demo xml" : [],
"update_xml" : [ "schoolsout_view.xml"],
"installable": True,
"active": False,
"certificate" : "" 
```

}

`schoolsout.py`

```
from openerp.osv import fields, orm

class student(orm.Model):

    _name = 'student.student'

    _columns = {
            'name' : fields.char('Student Name', size=16, required = True, translate=True),
            'age' : fields.integer('Age',readonly = True),
            'percent' : fields.float('Percentage',help = 'This field will add average marks of student out of 100.'),
            'gender' : fields.selection([('male','Male'),('female','Female')],'Gender'),
            'active' : fields.boolean('Active'),
            'notes' : fields.text('Details'),
            }

    _defaults = { 'name' : 'Atul',
        'active' : True,                    
    } 
```

学生_学生（）

最后是schoolout_view.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<!-- Student search view -->

<record model="ir.ui.view" id="student_search">
    <field name="name">student.search</field>
    <field name="model">student.student</field>
    <field name="type">search</field>
    <field name="arch" type="xml">
    <search string="Student Information Search" version="7.0">
        <field name="name" string="Student Name" />
        <field name="gender" string="Gender" />
        <field name="age" string="Age" />
    </search>
    </field>
</record>

<!-- Student tree view -->

<record id="student_student_tree" model="ir.ui.view">
    <field name="name">student.result.tree.new</field>
    <field name="model">student.student</field>
    <field name="type">tree</field>
    <field name="arch" type="xml">
        <tree string="Student_result" version="7.0">
            <field name="name" />
            <field name="age" />
            <field name="percent" />
            <field name="gender" />
            <field name="active" />
        </tree>
    </field>
</record>

<!--Student Form View-->

<record id="student_student_form" model="ir.ui.view">
    <field name="name">student.result.form</field>
    <field name="model">student.student</field>
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="Student_result" version="7.0">
            <field name="name" />
            <field name="age" />
            <field name="percent" />
            <field name="gender" />
            <field name="active" />
            <field name="notes" />
        </form>
    </field>
</record>

<!-- Student Action-->

<record id="action_student_student" model="ir.actions.act_window">
    <field name="name">Student Information</field>
    <field name="res_model">student.student</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
</record>

<!--Student Menu-->

<menuitem id="student_parent" name="Student" icon="terp-partner"/>
<menuitem id="menu_student_parent" name="Student Management" parent="student_parent"></menuitem>
<menuitem action="action_student_student" id="menu_student_student" parent="menu_student_parent" string="Result"/>

</data> 
```

任何建议将不胜感激，非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T05:04:19.357

![在此处输入图像描述](../Images/e2ca2b64166f714b2cfc0357901ce41b.png)你的模块工作得很好。“更新模块列表”并通过“未安装”过滤器搜索不包括“额外”，您会找到您的模块。

从 6.1 到 7 版本有很多变化。首先，当您在 7 中安装模块时，您必须对模块进行一些更改。像：

现在更改您的**openerp** .py 文件

```
"update_xml" replace with "data"
"init_xml" removed,used in directly in data just put <data noupdate="1"> in xml
"demo xml"  replace with "demo"
"active" removed, installable is ok 
```

并从您的 view.xml 文件中删除`" <field name="type">tree</field>"`

您的代码完美运行。

谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-30T07:49:40.730

我多次遇到这个问题，现在找到了找到肯定位于插件文件夹中但未显示在应用程序列表中的模块的解决方案。似乎应用程序列表仅显示在线可用的插件。所以如果你想看到你在本地开发的模块，你应该首先更新模块列表。为了能够做到这一点，您必须首先将您的用户设置为技术用户，如此[处](http://acespritechblog.wordpress.com/2012/12/05/how-to-install-new-module-in-openerp-7-0/)所述。

模块列表更新后，您可以通过删除搜索字段中的*已安装*标签在菜单条目*已安装模块下找到您的模块。*现在您可以在列表中查找您的模块，甚至可以搜索它。但是你只会在这个视图中找到它。希望有帮助...

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T04:58:03.983

试试这个：

```
from openerp.osv import osv, fields

class student(osv.Model):
    _name = 'student.student'
    _columns = {
        'name' : fields.char('Student Name', size=16, required = True, translate=True),
        'age' : fields.integer('Age',readonly = True),
        'percent' : fields.float('Percentage',help = 'This field will add average marks of student out of 100.'),
        'gender' : fields.selection([('male','Male'),('female','Female')],'Gender'),
        'active' : fields.boolean('Active'),
        'notes' : fields.text('Details'),
}
    _defaults = { 'name' : 'Atul',
    'active' : True,
}

student() 
```

我试过你的代码，它工作没有任何错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T22:51:32.233

我能够看到您的模块没有问题，但它不会安装。

我收到一个 xml 解析器错误，“...文件末尾有额外内容”。

我如下正确地附上了您的记录定义以解决该问题。

```
<?xml version="1.0" encoding="utf-8"?>

<openerp>
 <data>

 <!-- Student tree view -->

     :
     :
     :
     :

 <menuitem action="action_student_student" id="menu_student_student" parent="menu_student_parent" string="Result"/>

 </data>
</openerp> 
```

然后一切顺利。

当您第一次发布此模型时，我尝试使用您的模型，但在我的模块列表中也找不到它。当时我正在运行 OpenERP V7 build`20130213-002107`

最近，我更新到`20130305-002149`. 这可能会让你过去。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-02T12:41:04.353

我有同样的问题我唯一的问题

[http://acespritechblog.wordpress.com/2012/12/05/how-to-install-new-module-in-openerp-7-0/](http://acespritechblog.wordpress.com/2012/12/05/how-to-install-new-module-in-openerp-7-0/)*

# php - 设置javascript参数？

> ID：14970523
> 
> 赞同：0
> 
> 时间：2013-02-20T01:00:06.910
> 
> 标签：php, javascript, html, parameters

所以我用 PHP 脚本设置 javascript 参数（效果很好），但问题是如何在我的 javascript 中使用这些参数？这是函数的样子：

```
 function clicked(string cob)
    {
    document.getElementById("watching").innerHTML=cob;
    } 
```

和我的 php（完成这项工作）

```
 while($row=mysql_fetch_array($result))
    {
    $id=$row['id'];
    $name=$row['name'];
    $url=$row['url'];
    echo "<a href='javascript: clicked($url)'>$name</a> <input type='button' id='delete' value='X' onclick='return Deleteqry($id)' /><br> ";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:03:50.833

为 $url 使用引号。

```
 while($row=mysql_fetch_array($result))
    {
            $id=$row['id'];
            $name=$row['name'];
            $url=$row['url'];
            echo "<a href='javascript: clicked(\"$url\")'>$name</a> <input type='button' id='delete' value='X' onclick='return Deleteqry($id)' /><br> ";
    } 
```

删除点击函数的类型提示

```
 function clicked(cob)
    {
            document.getElementById("watching").innerHTML=cob;
    } 
```

# java - 从与 Hibernate Criteria 的关系中投影一个实体

> ID：14970524
> 
> 赞同：0
> 
> 时间：2013-02-20T01:00:09.627
> 
> 标签：java, hibernate, criteria-api

作为条件表达式的结果，我无法获取相关实体对象的列表。我有两个具有多对多关系的对象，例如 ObjectA <-> ObjectB，其中 ObjectA 的单个实例可以绑定到 ObjectB 的多个实例，而 ObjectB 的实例可能绑定到 ObjectA 的多个实例。此关系存储在您的典型连接表中，但由于遗留原因，对象模型使得 ObjectB 无法直接知道它与 ObjectA 的关系。我正在尝试创建一个条件表达式，以通过以下连接表对象获取与任何 ObjectA 相关的所有实例 ObjectB：

```
getDetachedCriteria(ObjectAObjectB.class)
.setFetchMode("objectB", FetchMode.JOIN)
.setProjection(Projections.property("objectB")); 
```

然而，这并没有按预期工作，因为 Projection API 似乎只支持投影标量属性而不支持实体对象。是否可以通过 Projections 或其他一些 Criteria API 指定这种类型的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:22:40.387

你不能用 Hibernate Criteria API 做到这一点。在 HQL 或 JPA2 Criteria API 中是可能的，但不能使用 Hibernate Criteria API。

# vb.net - 重置文本框的背景颜色

> ID：14970525
> 
> 赞同：4
> 
> 时间：2013-02-20T01:00:20.933
> 
> 标签：vb.net, winforms

我在 winforms 应用程序上使用 VS2012 和 VB.NET。我在代码期间根据表单验证以编程方式设置了某些文本框的 BackColor 属性。这很好用，问题是我想“重置”文本框的 BackColor 属性，以便文本框在设置 BackColor 之前就像处于相同状态一样执行。所以它会做以下事情：

“重置”后立即恢复默认颜色为白色

当 textbox.enabled = false 时更改为“浅灰色”颜色

我不能简单地将 BackColor 设置为 Color.White 的原因是当 textbox.enabled = false 时这会影响文本框。设置背景色并禁用文本框后，文本框不会返回“浅灰色”颜色。我需要它返回到那种颜色，而且我宁愿不必在每次启用或禁用文本框时都设置文本框的颜色。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T08:19:57.877

简单地：

```
TextBox1.BackColor = SystemColors.Window 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T01:08:46.630

您可以通过重新分配 BackColor 的原始值来重置颜色。或者通过分配默认值，它不是白色的：

```
 textBox1.BackColor = Color.FromKnownColor(KnownColor.Window); 
```

# python - 在 Python 3、Tkinter 中本地设置和获取 Cookie

> ID：14970529
> 
> 赞同：0
> 
> 时间：2013-02-20T01:00:46.317
> 
> 标签：python, cookies, python-3.x, tkinter, setcookie

我一直在寻找一种在 Python 3 中通过 Tkinter GUI 在本地设置 cookie 的方法，并且只获得 httplib2 结果，但这是行不通的。

本质上，我有一个简单的登录 UI，它将制作一个 SimpleCookie：

```
def signIn(self):
    user = self.login_var.get()
    passwd = self.password_var.get()
    C = cookies.SimpleCookie()
    C['user'] = user
    C['passwd'] = passwd
    print(C.output(attrs=[], header='Cookie:'))
    self.confirm() 
```

...但是我无法检索/将 cookie 传递给下一个命令：

```
def confirm(self):
    self.top = Toplevel()
    self.top.title('Congrats!')
    self.top_frame = Frame(self.top)
    self.top_frame.grid()
    self.lbl = Label(self.top_frame, text='Hello ' + C['user'].value + '!')
    self.lbl.grid() 
```

我确定我错过了一些东西（很多东西？），因为我是 Python 的超级新手>.<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:08:20.880

您可以添加一个参数来确认这样

```
def confirm(self, C) 
```

然后调用它

```
self.confirm(C) 
```

在 python 中，变量可以是任何对象、文字（int、byte 等）甚至函数。

此外，您可以将变量 C 更改为正在使用的类范围变量

```
self.C = cookies.SimpleCookie() # Prefixing self. attributes with an underscore _ is  commonly
                                # used to declare a soft private variable. 
                                # Other classes and modules can still access it but it generally 
                                # means it is not supposed to be accessed from outside the class. 
```

现在，您可以通过以下方式在班级内解决 C：

```
self.C 
```

并从课外通过：

```
ClassName.C 
```

# function - 如何返回一个函数，然后再调用它？

> ID：14970530
> 
> 赞同：3
> 
> 时间：2013-02-20T01:00:47.910
> 
> 标签：function, return, d, return-type

因此，假设我有这个结构 a 和一个 void 方法，该方法将该结构作为参数。我如何能够通过另一种方法返回 void 方法，然后再调用它？

我的代码如下所示：

```
struct Script{
    //variables
}

void foo(Script e)
{

}

function getfoo()
{
    return foo;
}

void main(string[] args)
{

    writeln("Hello World!");
    stdin.readln();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T03:11:03.347

```
import std.stdio;

struct Script
{
    int x, y;
}

void foo(Script e)
{
    writeln("Got: ", e);
}

void function(Script e) getfoo()
{
    return &foo;
}

void main(string[] args)
{
    auto func = getfoo();
    func(Script(1, 2));
} 
```

# ruby-on-rails - Rails：从控制器执行 HTTP POST 后超时

> ID：14970531
> 
> 赞同：0
> 
> 时间：2013-02-20T01:00:48.797
> 
> 标签：ruby-on-rails, ruby, post, httparty, net-http

导轨 3.1.3，红宝石 1.9.3p374

我正在尝试从一个控制器（通过 POST 从客户端接收数据，然后首先进行一些处理）向应用程序中的另一个控制器进行 POST，并得到 Timeout::Error。

我试过使用 Net::HTTP （下面的长表格，也做了快捷表格）：

```
uri = URI.parse(credit_payments_url)
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
auth_token = params[:authenticity_token]
request.set_form_data({:cc => "test", :authenticity_token => auth_token })
response = http.request(request) 
```

和 HTTP 派对：

```
auth_token = params[:authenticity_token]
HTTParty.post(credit_payments_url, :body => {:cc => "test", :authenticity_token => auth_token}) 
```

在这两种情况下，我都会得到 Timeout::Error，并且在服务器输出中也看到了这一点：

```
Started POST "/payments/credit" for 127.0.0.1 at 2013-02-19 17:39:35 -0600
  Processing by PaymentsController#credit as HTML
  Parameters: {"cc"=>"test", "authenticity_token"=>"px+YzdbEfC5p2i3e5yjNT4EQy4WMA9aEWY/v2tfdFhA="}
WARNING: Can't verify CSRF token authenticity 
```

credit_payments_url 是正确的url，有对应的路由。我一直收到 CSRF 警告，所以我从原始请求中添加了 :authenticity_token ，但 CSRF 警告仍然出现。我不确定这是否与 POST 超时有关。

我觉得可能有一些基本的网络或配置问题导致 POST 无法工作，但不能完全分辨它是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:04:49.303

第一个 - 可能你只有一个工作人员，忙于这个请求，因此无法响应第二个请求。尝试在线程内发布帖子，或使用多个工人。

第二 - 你为什么要发布到应用程序本身？为什么不干掉代码，从另一个动作中提取所需的代码到一个方法中，然后在两个地方都调用它呢？

# makefile - 从 makefile 中调用 make

> ID：14970533
> 
> 赞同：12
> 
> 时间：2013-02-20T01:00:50.380
> 
> 标签：makefile, gnu-make, multiple-makefiles

我有一个可以从新外壳完美调用的 Makefile，即：

```
make -C /dir/ 
```

*但是，如果我从另一个*Makefile调用这个 Makefile ，它会由于一些复杂的依赖问题而失败。Make 清楚地知道嵌套调用，从`make[1]:`etc 的打印中可以看出，我怀疑 make 以某种方式与其子进程共享变量。

无论如何从Makefile中调用一个*干净的make？*如果我的构建是从一个干净的 shell 工作的，那么应该可以从另一个 Makefile 调用它，而无需解决脚本中的恐怖问题！:)

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T07:56:38.623

`make`当它被递归调用时，确实共享它的一些环境。正如[https://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html#Options_002fRecursion](https://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html#Options_002fRecursion)中所建议的，您可能希望这样编写递归调用：

```
sub-make:
        $(MAKE) -C /dir/ MAKEFLAGS= 
```

看看它是否有帮助。`export`您还可以使用和`unexport`指令控制导出到子make的变量（ [https://www.gnu.org/software/make/manual/html_node/Variables_002fRecursion.html#Variables_002fRecursion](https://www.gnu.org/software/make/manual/html_node/Variables_002fRecursion.html#Variables_002fRecursion)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:50:07.337

调用者make中的一些环境变量破坏了被调用者make（CFLAGS等......）

我的解决方案是在一个干净的外壳和呼叫点区分环境。然后我手动将问题变量添加到列表中并创建了一些 save_env/restore_env 脚本。

谢谢！

# php - PHP - 停止并捕获耗时过长的代码

> ID：14970535
> 
> 赞同：6
> 
> 时间：2013-02-20T01:01:25.207
> 
> 标签：php

我想将 PHP 的特定部分限制为 X 秒 - 如果需要更长的时间，请*终止*当前执行的代码（只是部分，而不是整个脚本）并运行备用代码。

伪代码示例（此处的示例用例是一个不稳定的 API，有时速度很快，有时它是一个黑洞）：

```
$completed = 1;
$seconds = 60;
while ($completed != -1 && $completed < 5) {
    limit ($seconds) {
        $api = new SomeAPI('user','secret','key');
        $data = $api->getStuff('user="bob"');
        $completed = -1;
    } catch () {
        $completed++;
        sleep(10);
    }
}
if ($completed === 5) echo "Error: API black-hole'd 5 times.\n";
else {
    //Notice: data processing is OUTSIDE of the time limit
    foreach ($data as $row) {
          echo $row['name'].': '.$row['message']."\n";
    }
} 
```

但是，这应该适用于*任何事情*。不仅仅是 API/HTTP 请求。例如，密集的数据库过程。

**万一你读得太快：** 这*不是*`set_time_limit`答案，因为它们会影响*整个脚本*的时间限制，而不仅仅是一个部分（当然，除非我对它们的工作方式有误）。`max_execution_time`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:12:28.100

对于 API 调用，我建议使用 cURL，您可以为此设置 API 调用的特定超时。

对于一般用途，您可以查看分叉进程，这将使您能够为每个进程计时并在它超过预期时间时终止它。

当然，如果代码段可能由于高度重复的循环结构而导致执行时间较长，您可以提供自己的计时器以在指定的时间间隔后跳出循环。

我可能没有直接回答您的问题，但我真正想要达到的一点是，您可能必须根据代码块的实际作用使用不同的方法。**

# jquery - 测试 jQuery UI Tooltip 是否打开

> ID：14970537
> 
> 赞同：5
> 
> 时间：2013-02-20T01:01:39.707
> 
> 标签：jquery, jquery-ui

我正在尝试控制[jQuery Tooltip](http://api.jqueryui.com/tooltip/)的自动打开和关闭。

如何测试工具提示的当前状态是否打开？

我正在使用所有内容的最新版本。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T01:05:51.250

您可以通过检查是否有任何带有`ui-tooltip`.

```
$(".ui-tooltip").length 
```

或者，您也可以使用 API 检查它是否打开。您可以设置一个标志并使用以下命令进行检查：

```
$(".selector").on("tooltipopen", function(event, ui) {
    $(this).data("tooltip", true);
});
$(".selector").on("tooltipclose", function(event, ui) {
    $(this).data("tooltip", false);
}); 
```

要了解工具提示的当前状态，您可以使用以下命令：

```
$(".selector").data("tooltip"); 
```

如果打开则返回`true`，`false`如果关闭则返回。希望这可以帮助...

# c - 对四字执行位级置换

> ID：14970542
> 
> 赞同：3
> 
> 时间：2013-02-20T01:02:08.660
> 
> 标签：c, algorithm, bit-manipulation

我正在寻找在 64 位整数中置换位的最快方法。

给定一个名为“array”的表，对应于一个排列数组，这意味着它的大小为 64，并填充了从 0 到 63 的唯一数字（即不重复），对应于 64 位整数中的位位置，我可以置换位这边走

```
bit = GetBitAtPos(integer_, array[i]);
SetBitAtPos(integer_, array[i], GetBitAtPos(integer_, i));
SetBitAtPos(integer_, i, bit);

(by looping i from 0 to 63)

GetBitAtPos being
GetBitAtPos(integer_, pos) { return (integer >>) pos & 1 } 
```

Setbitatpos 也基于相同的原理（即使用 C 运算符），形式为 SetBitAtPos(integer, position, bool_bit_value)

如果可能的话，我正在寻找一种更快的方法来执行此任务。我愿意接受任何解决方案，包括必要时的内联汇编。我很难找到比这更好的方法，所以我想我会问。

我想执行这样的任务以隐藏 64 位生成的整数中的数据（其中第 4 位可以显示信息）。这比说一个 XOR 掩码 imo 好一点（除非我错过了什么），主要是如果有人试图找到相关性。它还允许进行逆运算以不丢失宝贵的位...

但是我觉得这个手术有点贵...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:34:50.207

由于排列是恒定的，因此您应该能够想出一种比逐个移动位更好的方法（如果您可以发布您的秘密排列，我可以尝试一下）。最简单的改进是在输入和输出中同时移动它们之间具有相同距离（可以是模块化距离，因为您可以使用旋转）的位。如果这样的组很少，这是一个非常好的方法。

如果效果不如您希望的那样好，请查看是否可以使用[bit_permute_step](http://programming.sirrida.de/perm_fn.html#bit_permute_step)来移动所有或大部分位。有关更多想法，请参阅该站点的其余部分。

如果您可以使用 PDEP 和 PEXT，您可以在位之间的距离可以任意改变（但它们的顺序不能）的组中移动位。这是，afaik，虽然不知道它们会多快（而且它们还不可用）。

最好的方法可能是结合其他答案中提到的这些技巧和其他技巧。

有太多的可能性去探索它们，真的，所以你可能不会找到进行排列的*最佳*方法，但是使用这些想法（以及发布的其他想法）你无疑可以找到比你更好的东西'目前正在使用。

* * *

PDEP 和 PEXT 已经有一段时间了，所以它们的性能是已知的，在 3 个周期的延迟和 1 个周期的吞吐量下，它们比大多数其他有用的置换原语（除了琐碎的置换原语）要快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:39:46.223

将您的位拆分为此方法适用的子集：

[用单次乘法提取位](https://stackoverflow.com/questions/14547087/extracting-bits-with-a-single-multiplication)

然后使用按位或组合结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T07:11:35.910

对于 64 位数字，我相信（寻找*最佳*算法）的问题可能由于大量的可能性而无法解决。最具可扩展性和最容易自动化的方法之一是查找表：

```
result = LUT0[ value & 0xff] +  
         LUT1[(value >> 8) & 0xff] +  
         LUT2[(value >> 16) & 0xff] + ...  
     +   LUT7[(value >> 56) & 0xff]; 
```

*   每个 LUT 条目必须是 64 位宽，并且它只是将子组中的每个 8 位扩展到 64 个可能的 bin 的全部范围。此配置使用 16k 内存。

可伸缩性来自这样一个事实，即可以使用任意数量的查找表（实际范围从 3 到 32？）。此方法容易受到缓存未命中的影响，并且无法并行化（至少对于大表大小）。

如果存在某些对称性，则可以使用一些巧妙的技巧——例如在 Intel 中交换两个位：

```
 test eax, (1<<BIT0 | 1<<BIT1)
 jpe skip:
 xor  eax, (1<<BIT0 | 1<<BIT1)
 skip: 
```

此 OTOH 极易受到分支错误预测的影响。

# objective-c - 同时向 NSMutableDictionary 插入多个不同的键值对是否安全？

> ID：14970544
> 
> 赞同：2
> 
> 时间：2013-02-20T01:02:28.860
> 
> 标签：objective-c, thread-safety

如果我有多个线程可能想要同时写入`NSMutableDictionary`(ie `setObject:forKey:`)，即使我可以保证线程将写入不同的键值对，我是否需要在字典上同步？如果是，你能解释一下字典是怎么破的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:06:40.533

[`NSMutableDictionary`不是线程安全的，*因此*](https://stackoverflow.com/a/1986879/335858)您需要围绕并发写入以及可能与写入同时进行的读取添加同步。您正在写入不同键的事实并没有多大帮助：实现可能会在添加新键时调整大小，从而使之前分配的所有内部存储无效。

如果您计划写入的所有键都已经存在于字典中，并且没有同时进行删除，那么您可能会很幸运。但是，我*强烈*建议不要使用这种方法。

# android - 如何在没有启动器的情况下从我的 android 应用程序打开应用程序

> ID：14970546
> 
> 赞同：2
> 
> 时间：2013-02-20T01:02:44.150
> 
> 标签：android, android-manifest, launcher

我有 3 个安卓应用程序。一个主应用程序调用其他 2 个应用程序（主应用程序将是其他 2 个应用程序的接口）。我只想拥有这个主应用程序的一个图标。我有 3 个应用程序，它们可以单独下载。现在我需要其他应用程序来检查是否安装了主应用程序。如果没有，请下载并安装主应用程序。但是，如果辅助应用程序没有 LAUNCHER ，我该怎么做？有没有办法在没有启动器的情况下从应用程序安装主应用程序？

主应用程序具有 android 清单：

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

辅助应用程序有清单（因为不想要图标）

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter> 
```

是的，我知道如何在启动器所在的应用程序中使用代码来检查应用程序是否已安装，但不希望在启动器未安装时如何操作。

```
 if (installed==false) { 
        Intent promptInstall = new Intent(Intent.ACTION_VIEW)
        .setData(Uri.parse("https://play.google.com......))
        .setType("application/vnd.android.package-archive");
        startActivity(promptInstall); 
```

或第二个问题：是否可以使用启动器安装应用程序，然后卸载/隐藏此应用程序的图标？比方说简单，我将使用启动器安装所有应用程序，然后在安装和设置后隐藏应用程序的图标，以便仅保留主应用程序的图标。

对我来说这看起来很奇怪，没有任何简单的方法可以做到这一点，简单的设置图标是否可见。与在 Windows 上安装软件相同，您可以在安装过程中设置是否在桌面上显示图标。

# glsl - GLSL中每个元素而不是每个顶点的纹理坐标？

> ID：14970549
> 
> 赞同：1
> 
> 时间：2013-02-20T01:03:24.660
> 
> 标签：glsl, pygame, texture-mapping

我正在尝试使用 GLSL 进行编程，但我对我应该做什么有点困惑。我已经弄清楚如何将一个顶点数组、一个纹理坐标数组（每个顶点）、一个元素数组和两个纹理传递给一个简单的 GLSL 程序。我在学习时使用 pygame 是为了简单。

我像这样创建顶点、纹理坐标和元素数组：

```
w = 16
h = 12

vertex_array = []
tex_coord_array = []
element_array = []

for i in range(h):
    for j in range(w):
        vertex_array += [-1.0+j*2.0/(w-1), 1.0-i*2.0/(h-1), 0.0, 1.0]

        if j%2:
            tex_coord_array += [1.0]
        else:
            tex_coord_array += [0.0]

        if i%2:
            tex_coord_array += [0.0]
        else:
            tex_coord_array += [1.0]

for i in range(1,h):
    for j in range(1,w):
        element_array += [(i-1)*w+(j-1), i*w+(j-1), (i-1)*w+j]
        element_array += [i*w+(j-1), i*w+j, (i-1)*w+j] 
```

...使用以下着色器给我一个简单的纹理三角形“墙”：

```
vertex_shader = '''\
#version 110

attribute vec2 tex_coord;
attribute vec4 position;

varying vec2 texcoord;

void main()
{
    gl_Position = position;
    texcoord = tex_coord;
}
''' 
```

和

```
fragment_shader = '''\
#version 110

uniform sampler2D textures[2];

varying vec2 texcoord;

void main()
{
    gl_FragColor = texture2D(textures[0], texcoord);
}
''' 
```

现在我得到了每个方向的纹理镜像（每 4 个四边形），因为我只为每个顶点提供一个纹理坐标，而不是为元素数组的每个元素传递一个。我想用正确对齐的纹理对所有四边形进行纹理处理（因为我告诉自己这是 GLSL 的一个良好开端 ^^），这样做的方法是什么？

谢谢！

更新：

正如 Nicol Bolas 指出的那样——这并不是真正的 GLSL 问题。现在我刚刚重做了顶点/坐标/元素的生成：

```
for i in range(h):
    for j in range(w):
        # first triangle
        vertex_array += [-1.0+j*2.0/(w-1), 1.0-i*2.0/(h-1), 0.0, 1.0]
        tex_coord_array += [0.0, 1.0]
        vertex_array += [-1.0+j*2.0/(w-1), 1.0-(i+1)*2.0/(h-1), 0.0, 1.0]
        tex_coord_array += [0.0, 0.0]
        vertex_array += [-1.0+(j+1)*2.0/(w-1), 1.0-i*2.0/(h-1), 0.0, 1.0]
        tex_coord_array += [1.0, 1.0]
        # second triangle
        vertex_array += [-1.0+j*2.0/(w-1), 1.0-(i+1)*2.0/(h-1), 0.0, 1.0]
        tex_coord_array += [0.0, 0.0]
        vertex_array += [-1.0+(j+1)*2.0/(w-1), 1.0-(i+1)*2.0/(h-1), 0.0, 1.0]
        tex_coord_array += [1.0, 0.0]
        vertex_array += [-1.0+(j+1)*2.0/(w-1), 1.0-i*2.0/(h-1), 0.0, 1.0]
        tex_coord_array += [1.0, 1.0]

element_array = range(h*w*6) 
```

它可以工作 - 但是使用六倍的顶点来获得正确的纹理坐标感觉有点浪费......

# java - java.util.Queue 静默丢弃空元素

> ID：14970552
> 
> 赞同：1
> 
> 时间：2013-02-20T01:03:53.533
> 
> 标签：java

我正在寻找一种[`java.util.Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)实现或工厂方法，它为我提供了一种`Queue`默默丢弃`null`元素的方法。

[`java.util.LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)不是一个解决方案，因为它允许对元素进行*排队* 和取消排队（...应该*向前取消排队*，直到它为空或在头部位置有一个 -null 元素）*。*不是解决方案，因为它在尝试添加元素时抛出。`null` *`null``Queue`*`non`
[`java.util.ArrayDeque`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)`NullPointerException``null`**

 **应该可以`Queue`用现有的`Queue`（现有的`Queue`可能包含`null`被新构建`Queue`的操作删除的元素）构建这样的 a。

是否已经有一个强大的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:14:22.757

虽然我意识到这并不能直接回答您的问题，但如果您找不到实现并决定创建自己的课程，则此答案应该适用。

由于子类不符合超类的预期实现和使用（例如 super 可能依赖于能够添加 null 元素，因此这会破坏它），我会不鼓励按照“Hot Licks”的建议进行子类化。此外，您通过更改主要实现细节来打破 Is-A 原则。

我建议您使用组合，通过自己的方法提供适当的方法，这可能会在必要时改变行为。

在Effective Java的[第 16 章](http://books.google.co.uk/books?id=ka2VUBqHiWkC&pg=PA81&dq=composition%20effective%20java&hl=en&sa=X&ei=rCIkUbqGKoiM4ATjqoGoBg&ved=0CDEQ6AEwAA#v=onepage&q=composition%20effective%20java&f=false)中阅读更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:25:10.817

没有理由必须创建一个全新的子类，您可以在创建实例时覆盖所需的方法。

这是一个例子：

```
final ArrayDeque<String> nonNullDeque = new ArrayDeque<String>() {
    @Override
    public void addFirst(final String s) {
        if (s != null) { super.addFirst(s); }
    }

    @Override
    public boolean add(final String s) {
        return s != null && super.add(s);
    }

    @Override
    public void addLast(final String s) {
        if (s != null) { super.addLast(s); }
    }
}; 
```

这就是你有能力用你自己的行为覆盖方法的全部原因，超类的内部工作应该是一个黑匣子，你与它的约定是接受参数并返回其接口支持的结果，不支持其内部运作。

就我个人而言，我会更进一步，而不是使用[Google findbugs library](http://code.google.com/p/findbugs-tutorials/)`@Nonnull`检查空值并使用 JSR=305注释。注释不仅会在你的代码有机会之前捕捉到，它还隐含地记录了你的意图是什么。`null`

```
public void addFirst(@Nonnull final String s) {
    if (s != null) { super.addFirst(s); }
} 
```

Maven 依赖项位于 Central Repo 中，因此可以轻松添加到您的项目中。

```
<dependency>
    <groupId>com.google.code.findbugs</groupId>
    <artifactId>jsr305</artifactId>
    <version>2.0.1</version>
</dependency> 
```**

# javascript - 如何随机化图像的顺序？

> ID：14970556
> 
> 赞同：1
> 
> 时间：2013-02-20T01:04:28.997
> 
> 标签：javascript, html

我[参考](http://throwingupthew.com/index.html)的页面。

加载图像的部分：

```
<div id="lighttable">

<img src="http://throwingupthew.com/girls/01.jpg" alt="01" />
<img src="http://throwingupthew.com/girls/02.jpg" alt="02" />
<img src="http://throwingupthew.com/girls/03.jpg" alt="03" />

etc....

</div> 
```

我如何随机化图像的顺序？请记住，我不知道在 index.html 中放置任何代码/答案的位置

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T02:08:33.607

将您的 HTML 更改为：

```
<div id="lighttable">

<img id="girl1" src="" alt="01" />
<img id="girl2" src="" alt="02" />
<img id="girl3" src="" alt="03" />

etc....

</div> 
```

把它放在你的页面`</head>`标签之前

```
<script type="text/javascript">
var array = ['http://throwingupthew.com/girls/01.jpg','http://throwingupthew.com/girls/02.jpg','http://throwingupthew.com/girls/03.jpg'];
function shuffle(array) {
var currentIndex = array.length;
var temporaryValue;
var randomIndex;
  while (0 !== currentIndex) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
}
var shuffled_images = shuffle(array);
for(var i=0;i<3;i++) {
document.getElementById('girl' + (i+1)).src = shuffled_images[i] ;
}
</script> 
```

感谢这个页面[Randomizing(Shuffling) an Array](https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array)，我能够为你制作这个脚本:)

这是工作的[JSFiddle](http://jsfiddle.net/kakashihatake2/x89p7/1/) :)

# java - 配置 Tomcat/Catalina 以在端口 80 上为根应用程序提供服务

> ID：14970563
> 
> 赞同：0
> 
> 时间：2013-02-20T01:04:51.887
> 
> 标签：java, tomcat

我通常不使用 Java 应用程序，但我正在尝试设置和配置基于[Java 的开源 wiki](http://www.xwiki.org)。我通过在 Ubuntu 上使用 APT 安装来启动并运行它。它的默认网址是`localhost:8080/xwiki`. 我想配置 tomcat 或 catalina 或其他任何东西，以便它在端口 80 和域根目录上可用。我将其设置为子域：`wiki.example.com`

如何在 Tomcat 中进行配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:11:22.610

1）进入tomcat安装目录下的conf文件夹

例如 C:\Tomcat 6.0\conf\

2) 在 server.xml 文件中编辑以下标签

```
<Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443"/> 
```

3）将port=8080的值改为port=80

4) 保存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:15:18.840

请注意，在[特权端口（小于 1024）](http://www.cyberciti.biz/faq/linux-unix-open-ports/)上运行进程的唯一方法需要以 root 身份运行进程。

从安全的角度来看，这很糟糕，一个可接受的替代方法是使用 iptables 将发往端口 80 的请求转发到您的应用程序服务器端口。

```
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080 
```

这将通过以 root 身份运行您的服务器来减轻任何主要的安全威胁，并且仍然允许您的进程在标准端口 80 上工作。

还要回答关于让您的应用程序运行而不在 url 中指定应用程序名称的问题，请查看： [http ://benhutchison.wordpress.com/2008/07/30/how-to-configure-tomcat-root-context /](http://benhutchison.wordpress.com/2008/07/30/how-to-configure-tomcat-root-context/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:07:11.727

基于许多建议，我决定不尝试使用 tomcat 为端口 80 上的应用程序提供服务。相反，我将 Apache 设置为反向代理，并将 tomcat 保留为默认设置。这是我在 Ubuntu 上配置 Apache 所做的：

1.  安装阿帕奇：`sudo apt-get install apache2-mpm-prefork`
2.  启用代理 apache 模块：`sudo a2enmod proxy_http`
3.  在 /etc/apache2/sites-available 中创建一个虚拟主机文件，内容如下：

    ```
    <VirtualHost *:80>
      ServerName wiki.yourdomain.com

      RedirectMatch permanent ^/$ http://wiki.yourdomain.com/xwiki/

      ProxyPass /xwiki http://localhost:8080/xwiki
      ProxyPassReverse /xwiki http://localhost:8080/xwiki

      DocumentRoot /var/www
      <Directory "/var/www/">
        Options -Indexes Includes FollowSymLinks
        AllowOverride All
        Allow from all
      </Directory>
    </VirtualHost> 
    ```

4.  重启阿帕奇：`sudo service apache2 restart`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T01:26:43.037

我会使用[mod_vhost](http://httpd.apache.org/docs/2.2/mod/mod_vhost.html)，描述[在这里](http://tomcat.apache.org/tomcat-6.0-doc/proxy-howto.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T01:08:29.383

查看 server.xml 并编辑您的配置设置，如端口号、根目录等。

# c# - Windows 8 DirectX SwapChainBackgroundPanel 问题

> ID：14970571
> 
> 赞同：0
> 
> 时间：2013-02-20T01:05:30.390
> 
> 标签：c#, wpf, xaml, windows-8, directx

我来自两个不同的背景：我在 WPF/XAML/C# 应用程序开发方面拥有丰富的经验，并且在 C++/DirectX 开发方面拥有相同的经验。我听说可以同时使用 DirectX 和 XAML，我感到非常兴奋，但现在我已经碰壁了。

我正在尝试在 WPF 应用程序中使用 SwapChainBackgroundPanel。但我正在尝试使用 C# 作为底层语言。我一直遇到问题，无论我创建的 C# 项目的类型（PCL、WPF、Windows Store）如何，这些类型都没有定义[即我一直在寻找 SwapChainBackgroundPanel 和其他一些 DX 东西，如设备等。 )

所以我的问题是：这在 C# 中是如何工作的？我看过 MSDN 中用 C++ 完成的简单射击游戏示例，这很有意义；我得到它。但是当我尝试在 C# 中做这件事时，我觉得我错过了其中一个“陷阱”。

任何建议，或者可能是示例链接，或者充其量是有关设置 C#/XAML/DX 应用程序的小教程，都会令人惊叹。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:31:29.387

WPF 应用程序（即在 PresentationCore 中）没​​有可用的 SwapChainBackgroundPanel。您将获得的最接近的是[D3DImage 类](http://msdn.microsoft.com/en-us/library/system.windows.interop.d3dimage.aspx)，但它并不完全相同。 [请参阅此讨论](http://blogs.msdn.com/b/windowsappdev/archive/2012/03/15/combining-xaml-and-directx.aspx)。

我不认为您可以从 C# 充分利用 Windows 8 应用商店应用程序 (SwapChainBackgroundPanel) 的 DirectX 功能。您将不得不按照您描述的示例在 C++ 中完成 DirectX 工作。您当然可以像[本示例](http://code.msdn.microsoft.com/windowsapps/XAML-SurfaceImageSource-58f7e4d5)中那样组合这三个（Xaml、C#、C++） ，但我认为 100% 的 C# 应用程序是不可能的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-05T14:25:17.463

答案是错误的。可以通过包装器充分利用 C#。我自己使用 SharpDx 完成了这项工作，这实际上是微软在 C# 中使用 DirectX 的建议之一。

至于 XAML 库的选择，Universal Windows App 10 或 Windows Store App 8 是要走的路。使用 SwapChainPanel 而不是 SwapChainBackgroundPanel。

# javascript - 如何在 d3.json 上发布参数？

> ID：14970578
> 
> 赞同：20
> 
> 时间：2013-02-20T01:06:07.583
> 
> 标签：javascript, d3.js

我正在使用 d3.json 来获取动态数据。

```
d3.json("/myweb/totalQtyService.do", function(json) {

    drawChart(json);
}); 
```

如何在 d3.json 上发布参数？IE

数据：{年份：“2012”，客户：“type1”}

任何想法在帖子上传递这些参数？不是 url 参数 /myweb/totalQtyService.do?year=2012&customer=type1

我在下面尝试过，但无法使其工作。因为数据结构如此不同

d3.json => [对象，对象，对象，对象]

$.ajax => {entity_name: "ACTIVA"entity_tar_val: 350entity_val: 400level: 1_ *proto* _: Object},...

```
$.ajax({ 
  type: "POST", 
  url: url,

  // parameter here
  data : {year: "2012", customer: "type1“},
  success: function(json){
       // console.log(json);
       **drawChart(json);**
  } ,
  error:function (request, err, ex) {
  }
 }); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-26T12:39:01.507

注意：此答案适用于 d3.json 的旧版本，请参阅下面 JoshuaTaylor 的评论。

d3v5 的注意事项：原始答案越来越过时。[d3 v5](https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50)使用[fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)和 promise 而不是 XMLHttpRequest。

您可以在任何 d3-fetch 数据获取函数的第二个参数中设置 http 请求的方法，例如

```
d3.csv("/path/to/file.csv", { method: 'POST' })
    .then((data)=>{ /* do something with 'data' */ }); 
```

* * *

[d3.json](https://github.com/mbostock/d3/blob/master/src/xhr/json.js "d3.json")是包装 d3.xhr 的便捷方法；发出 GET 请求是硬连线的。

如果要 POST，可以直接使用[d3.xhr](https://github.com/mbostock/d3/wiki/Requests "d3.xhr")。

像这样的东西：

```
d3.xhr(url)
    .header("Content-Type", "application/json")
    .post(
        JSON.stringify({year: "2012", customer: "type1"}),
        function(err, rawData){
            var data = JSON.parse(rawData);
            console.log("got response", data);
        }
    ); 
```

因为在创建请求对象时没有指定回调，所以它不会立即发送。一旦收到 JSON 响应，就可以用标准的 JavaScript 方式解析，即`JSON.parse(data)` d3.xhr 的文档在[这里](https://github.com/mbostock/d3/wiki/Requests "d3.xhr")。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-20T08:58:10.073

你也可以试试这个：

```
 d3.json(url,function(error, data) {
       ...
    })
   .header("Content-Type","application/json")
   .send("POST", JSON.stringify({year: "2012", customer: "type1"})); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-27T14:06:49.177

在 D3v5 中使用 d3-fetch，看起来像

```
 d3.json(url, {
            method: 'POST',
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            },
            body: JSON.stringify(query)
        }); 
```

`url`URL在哪里，`query`是要发布的内容。

[我在这个问题](https://stackoverflow.com/questions/52260947/d3v5-and-django-rest-framework)中找到了答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-24T16:43:10.527

如果您想发出类似 HTML 表单的请求（使用查询参数），那么您可以：

```
d3.request("/path/to/resource")
.header("X-Requested-With", "XMLHttpRequest")
.header("Content-Type", "application/x-www-form-urlencoded")
.post("a=2&b=3", callback); 
```

在此处查看文档：[d3-request 文档](https://github.com/d3/d3-request/blob/master/README.md)

如果要将简单对象转换为查询参数字符串，则可以使用以下函数：

```
function obj2Params(params){
  var str = "";
  var amp = "";
  for(var p in params){
    if(params.hasOwnProperty(p)) {
        str += amp + encodeURIComponent(p) + "=" + encodeURIComponent(params[p]);
        amp = "&";
    }
  }
  return str;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-28T21:10:36.993

如果你使用 struts，你可以定义 url 和参数：

```
<s:url action="jsondatatreeaction" var="jsonsearchTag"
    namespace="/data">
    <s:param name="searchType" value="%{searchType}"></s:param>
</s:url> 
```

. . . d3.json('${jsonsearchTag}', function(error,flare) { ... } ...

# xslt - 使用带有 html 到 xsl-fo 的样式

> ID：14970579
> 
> 赞同：0
> 
> 时间：2013-02-20T01:06:10.040
> 
> 标签：xslt, xsl-fo, jtidy

我正在将 HTML 字符串转换为 xsl-fo，然后将其输出为 PDF。我有几个在 PDF 中显示的表格，由于缺少 CSS 规则，它们被挤得太紧。我试图在 HTML 样式属性中指定我的（非常简单的）CSS 边距底部和边框，但它不起作用。我认为它不起作用，因为我用来解释样式的 xsl-fo XSL 样式表中没有规则。我正在使用[此处](http://xhtml2fo-xsl.googlecode.com/svn/trunk/xhtml2fo.xsl)找到的样式表。有谁知道如何以 xsl-fo 方式使用 HTML 样式属性（或 CSS 规则）？链接将不胜感激。我过去曾使用过 XSL，但我生疏了，而且我有些困惑，因为我现在要从 XHTML->PDF 开始，而过去我使用 XSL 从 XML->HTML 开始。

# javascript - 使用 javascript 定位 SVG 元素

> ID：14970584
> 
> 赞同：1
> 
> 时间：2013-02-20T01:06:49.673
> 
> 标签：javascript, svg, jquery-svg

我正在对 svg-edit 进行修改。我正在使用一个函数来根据用户输入的宽度和高度来使路径元素变大或变小。用户选择一个元素并单击一个按钮以启动该功能，该功能采用最后已知的宽度和高度测量值，然后向用户询问新的宽度和高度值。然后它创建一个除数，它用于在元素上创建一个 TRANSFORM MATRIX 操作，以使其与用户想要的一样大。

问题是在变换矩阵时，元素也会改变位置。

我希望当用户被要求提供宽度和高度时，也被要求提供画布上的 x,y 位置，然后将所选元素移动到该位置。

他们是重新定位 svg 元素的一种方式吗？

```
 function changeDimensions() 

    {
  svgNode = svgCanvas.getSelectedElems()[0];

var dims = Raphael.pathBBox(svgNode.getAttribute('d')); 
lasth = parseInt(dims.height); 
lastw= parseInt(dims.width);

var transformw=prompt("Enter your new width");
var transformh=prompt("Enter your new height");
newW=transformw/lastw;
 newH=transformh/lasth; 
```

svgCanvas.changeSelectedAttribute("transform", "matrix(" + newW + ", 0, 0, " + newH + ", 0, 0)"); svgCanvas.recalculateAllSelectedDimensions(); }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:21:38.720

不同的 svg 元素具有不同的属性，用于定位自己。例如，矩形有 x 和 y 属性，但圆有 cx 和 cy。路径没有单独的属性。

但是，您可能可以从转换中获得所需的东西！大多数 svg 元素将接受一个[转换](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)属性，您可以在其中分配翻译。例如

```
<path d="M10,10L20,100" transform="translate(30,40)"/> 
```

事实上，您可能可以使用相同的变换属性来缩放您的路径。

# java - 创建守护线程的 ThreadPoolExecutors 是否需要关闭？

> ID：14970589
> 
> 赞同：1
> 
> 时间：2013-02-20T01:07:34.043
> 
> 标签：java, threadpool, daemon, shutdown

这似乎发生在我的应用程序中，但几乎可以肯定是我的 Maven / JUnit 测试用例环境中发生的其他事情的结果（在我什至还没有完全阅读的代码上——维护一个外国项目）。以下代码按需要运行，并且 TPE 不需要关闭：

```
final ScheduledThreadPoolExecutor pool = new ScheduledThreadPoolExecutor(1, new ThreadFactory() {

        @Override
        public Thread newThread(Runnable task) {

            Thread thread = new Thread(task, replenisherThreadName);
            thread.setDaemon(true);
            return thread;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:10:00.223

如果它确实是一个守护线程，那么它不会让您的应用程序保持活动状态。您的问题出在其他地方（或者它不是*真正*的守护线程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:59:30.060

不确定这些守护线程是通过您的程序创建的，但理想情况下，我们应该在完成工作后尝试关闭执行程序服务。原因是，我在许多应用程序中观察到，当这些服务未正确关闭时；线程数不断堆积，这使应用程序不稳定。

# html - 调整图像大小以适应 div 作品但在 Firefox 中不适用

> ID：14970591
> 
> 赞同：2
> 
> 时间：2013-02-20T01:07:47.547
> 
> 标签：html, css

在我创建的[这个页面上，由于某种原因，图像在 Firefox 中是全尺寸的，但它可以正确调整大小以适应 Chrome 和其他浏览器。](http://jcl.juplo.com/map/)
我不知道为什么这在 Firefox 中不起作用。
有谁知道如何使它正常工作？

这是我的CSS：

```
#map-wrap {
    display: table;
    margin: 0 auto;
}

#map {
    width: 75%;
    display: inline-block;
}

#space-holder {
    width: 3%;
    display: inline-block;
}

#map-options {
    width: 22%;
    display: inline-block;
    vertical-align: top;
}

#map img {
    max-width: 100%;
    max-height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T01:09:54.680

更改`max-width: 100%`为`width: 100%`或仅使用两者。

# c++ - gtest 和 cstdarg 之间是否存在不良交互，或者我真的错过了这里的堆栈粉碎？

> ID：14970601
> 
> 赞同：0
> 
> 时间：2013-02-20T01:08:55.777
> 
> 标签：c++, stack-smash

我下面的代码是一个简单的错误记录系统，其行为方式类似于 printf。

我的所有代码都在 gtest 环境中运行良好，但现在当我退出程序中的一个确定性点（我的一个测试）时，它堆栈崩溃了。在我写这篇文章之前，我的代码一直运行良好，这是我第一次尝试 cstdarg，所以它是最可疑的。

```
MyMutex error_lock;

#define MAX_ERR_MSG_SIZE 128
#define MAX_ERRORS 3
class ErrorQueue
{
   std::queue<char*> errors;
   std::list<char*> old_errors;
public:
   void push(char * msg)
   {
      if (errors.size() >= MAX_ERRORS)
      {
         pop();
      }
      errors.push(msg);
   }

   void pop()
   {
      if (old_errors.size() >= MAX_ERRORS)
      {
         delete [] old_errors.front();
         old_errors.pop_front();
      }
      old_errors.push_back(errors.front());
      errors.pop();
   }

   char * front()
   {
      return errors.front();
   }

   size_t size()
   {
      return errors.size();
   }

   ~ErrorQueue()
   {
      while(!errors.empty())
      {
         delete [] errors.front();
         errors.pop();
      }

      while (!old_errors.empty())
      {
         delete [] old_errors.front();
         old_errors.pop_front();
      }

   }

};

static ErrorQueue errors;

void WriteCallError(const char * error_message, ...)
{
   char err_buffer[MAX_ERR_MSG_SIZE];

   va_list args;
   va_start(args,error_message);
   std::vsnprintf(err_buffer,MAX_ERR_MSG_SIZE,error_message,args);
   va_end(args);

   char * err_string = new char[MAX_ERR_MSG_SIZE];
   memcpy(err_string,err_buffer,MAX_ERR_MSG_SIZE);
   {
      error_lock.Lock();
      errors.push(err_string);
      error_lock.Unlock();
   }
} 
```

我在代码的其他地方多次调用 WriteCallError ，经过一定次数后它会呕吐并告诉我我的堆栈已粉碎。

我的错在哪里？cstdarg 和 gtest 之间有什么奇怪的交互吗？这里有足够的信息吗？

编辑：使用一个简单的 main 我尝试将其隔离：

```
int main (int argc, char ** argv)
{
   int i = 0;
   while (1)
   {
      WriteCallError("Breaks on %d",i++);
   }

} 
```

这不会导致堆栈粉碎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:03:26.137

我认为您的问题是，如果您正在写入的数据超出您指定的限制，则 vsnprintf 不会将终止 nul 字符写入数组。当您稍后访问此 C 字符串时，由于没有终止符，它将读取超出有效数据的末尾并进入未知内存。

您没有在测试中发现这一点，因为您没有超过 128 个字符的限制。

快速修复是确保在使用 vsnprintf 后正确终止数组：

```
void WriteCallError(const char * error_message, ...)
{
   char err_buffer[MAX_ERR_MSG_SIZE];

   va_list args;
   va_start(args,error_message);
   std::vsnprintf(err_buffer,MAX_ERR_MSG_SIZE,error_message,args);
   va_end(args);

   // Fix here
   err_buffer[MAX_ERR_MSG_SIZE - 1] = 0;

   char * err_string = new char[MAX_ERR_MSG_SIZE];
   memcpy(err_string,err_buffer,MAX_ERR_MSG_SIZE);
   {
      error_lock.Lock();
      errors.push(err_string);
      error_lock.Unlock();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:29:35.310

回答这样我就可以关闭问题，因为我解决了这个错误：

它发生在与此类似的代码中：

```
TEST(MyTest,Case1)
{
   MyStruct1 object1;
   memset(&object1,0,sizeof(object1));

   MyStruct2 object2[1];
   memset(&object2[0],0,sizeof(object1));

   object1.object2_ptr = object2;

   // DO SOME TESTING

} 
```

由于 object1 和 object2 是堆栈变量并且 object1 大于 object2 我在 memset 时将内存设置得太远。当我离开该函数的堆栈部分时，堆栈指针大喊发生了一些疯狂的事情，并告诉我我正在破坏堆栈。

简单修复：

```
TEST(MyTest,Case1)
{
   MyStruct1 object1;
   memset(&object1,0,sizeof(MyStruct1));

   MyStruct2 object2[1];
   memset(&object2[0],0,sizeof(MyStruct2));

   object1.object2_ptr = object2;

   // DO SOME TESTING

} 
```

# ios - 使用 AppDelegate？

> ID：14970603
> 
> 赞同：4
> 
> 时间：2013-02-20T01:09:17.397
> 
> 标签：ios, objective-c, xcode

我经常收听和观看 Paul Hegarty 讲授的斯坦福大学 iOS 编程课程 (CS193p)。

尽管这些课程进展很快，但在学习涵盖的各种主题时，它们已被证明是有价值的。

在最新系列（2013 年冬季），特别是第 2 讲中，Paul 在第一次创建项目并基本上设计自己的模型时，将评论忽略了 XCode 4 创建的 AppDelegate 接口和实现文件。

如果您必须重新设计以包含“窗口”对象和各种应用程序协议，而您可以使用 AppDelegate 中已经提供给您的协议，为什么要这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T01:17:06.047

我认为您误解了“忽略应用程序委托”的建议。考虑到应用程序委托的中心位置，它有时会成为共享所有内容的“垃圾场”。需要一两个标志吗？把它扔到应用程序委托中！需要柜台吗？没问题，放到app delegate中！这正是你*不*应该做的事情：存储应用程序状态是模型所做的事情；将应用程序委托排除在外。

不过，我不认为建议丢弃为应用程序委托生成的代码：您需要它来管理应用程序的生命周期。但是管理生命周期是您应该使用应用程序委托的唯一事情：您的模型类需要与它完全分离。

# mysql - 什么工作得更快“列少的长表”或“列多的短表”？

> ID：14970607
> 
> 赞同：0
> 
> 时间：2013-02-20T01:09:52.060
> 
> 标签：mysql, optimization, database-performance

我必须决定如何计划用于存储日期的表。

我为每个用户设置了大约 20 个不同的日期，并且猜测现在有 100 000 个用户并且还在增长。

所以问题是对于 SELECT 查询，如果我制作有 20 个字段的表，什么会更快？例如

**“用户日期”**

`userId, date_registered, date_paid, date_started_working, ... date_reported, date_fired` 20 个字段，表中有 100 000 条记录

或制作 2 个表，就像第一个表**“date_types”**一样，其中包含 3 个字段和 20 条记录用于上述列名。

```
 id, date_type_id, date_type_name

    1       5        date_reported
    2       3        date_registerd
    ... 
```

第二个表有 3 个字段的实际记录

**“用户日期”**

```
userId, date_type, date
   201       2      2012-01-28
   202       5      2012-06-14
 ... 
```

但随后有 2 000 000 条记录？

如果我需要添加更多日期，我认为第二个选项更**通用**.

那么你认为哪个选项会更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:14:50.917

较长的表将具有较大的索引。更宽的表会有更小的索引，但会占用更多的心理空间，并且可能会有更多的开销。您应该仔细检查您的模式以查看规范化是否完成。

但是，我会选择您的第二个选项。这是因为如果字段为空，您不一定需要存在这些字段。因此，如果用户没有被解雇，则无需为他们创建记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:15:27.520

确定这一点的最佳方法是通过测试。一般来说，您所说的数据大小（20 个日期列乘 10 万条记录）对于 MySQL 表来说非常小，所以我可能只会使用一个包含多个列的表，除非您认为您将添加新类型的日期字段一直都希望有一个更灵活的模式。您只需要确保索引所有将在查询中用于过滤、排序、连接等的字段。

设计还可以通过您想要对数据执行的查询类型来通知。例如，如果您希望您可能希望根据字段组合查询数据（即用户有某个特定日期，但没有另一个日期），那么在单个表上查询可能会更加优化，因为您可以使用一个简单的`SELECT ... WHERE`查询。使用单独的表，您可能会发现自己需要执行子选择、奇数连接条件或`HAVING`子句来执行相同类型的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T01:16:46.330

如果日期非常具体并且用户将填写所有（或大部分）日期，那么我会使用宽表，因为实际编写查询以获取数据更容易。对于垂直表来说，编写一个查询要求所有用户在一个范围内具有 date1 和在一个范围内具有 date2 的查询要困难得多。

如果您知道需要动态创建日期类型的选项，我只会选择更长的表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T01:14:20.873

只要用户 ID 和日期类型 ID 在主表和 user_dates 表上建立索引，我怀疑您在查询时会注意到一个问题。如果您要在任何一种情况下查询整个表，我敢肯定这将需要很长时间（不过主要是发送数据）。在任何一种情况下，单个用户查找都是即时的。

不要为了一些可能的效率提高而牺牲关系；这不值得。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T01:35:04.697

通常我会采用两种方式：将基本和最常用的属性放在一张表中。制作一个附加属性表，将 rarley used 属性放入其中，然后可以从应用层延迟获取。这样，您就不会在每次获取用户时都进行 JOIN。

# java - 在没有调试信息的情况下编译外部 jar 时，Android 应用程序会冻结

> ID：14970616
> 
> 赞同：0
> 
> 时间：2013-02-20T01:10:25.333
> 
> 标签：java, android

我遇到了一个奇怪的问题，Android 应用程序将冻结在无害的代码中。**只有在没有**调试信息的情况下编译外部 jar 时才会崩溃，但是当使用调试信息编译时，应用程序运行得很好。它冻结在位于外部库内的同一行代码上，但仅在多次传递之后。使用了其他几个没有调试信息的外部 jar，没有任何问题。

在这部分代码中没有进行任何 IO 活动。项目中没有本机代码可能会踩到内存导致随机错误。冻结发生在多个设备上。这个过程在它自己的线程中并且是计算密集型的。

*   当在桌面应用程序中使用相同的库/jar 时，没有问题。
*   Java 6 和 7 都已用于编译 app + 库
*   有问题的库是 DDogleg。
*   其他三个外部罐子似乎没有任何问题。
*   外部 jar 包含在“libs”目录中

构建环境：

*   IDE：IntelliJ 12
*   安卓 SDK：android-17
*   操作系统：Linux Mint 13 和 Windows 7
*   JDK：1.7.0_13 和 1.6.0_41

*（原始问题表明它在包含为 jar 时会崩溃，但在应用程序中编译时不会崩溃）*

# jquery - 需要帮助更改 ul 列表中父图像的 src

> ID：14970623
> 
> 赞同：0
> 
> 时间：2013-02-20T01:11:43.010
> 
> 标签：jquery, parent-child

我有一个自定义手风琴菜单，每个可扩展 UL (toggle_action) 旁边带有 [+] 链接以扩展其子级 (div_toggle)。对于主动

*   （正在查看的页面）我正在尝试遍历 DOM 并将任何 plus.gif 图像更改为其父级旁边的 minus.gif*   s 因为它们已经扩展了。我已经搜索了一天的大部分时间并且发疯了。以下是我认为肯定会奏效的最新尝试。我没有收到任何错误 - 它只是不起作用。

    这是我的 HTML：

    ```
     <ul class="topnav">
          <li><h3 class="toggle_action"><img class="img-swap" src="/images/plus.gif"/>Governance</h3>
            <ul class="div_toggle">
              <li><h3><img src="/images/spacer.gif"/><a href="/governance">Governance</a></h3></li>
              <li><h3 class="toggle_action"><img class="img-swap" src="/images/plus.gif"/>Board of Directors</h3>
                <ul class="div_toggle">
                  <li><h3><img src="/images/spacer.gif"/><a href="/governance/bod" class="active">Board of Directors</a></h3></li>    
                  <li><h3><img src="/images/spacer.gif"/><a href="/governance/bod/min">Minutes</a></h3></li>
                </ul>
              </li>
              <li><img src="/images/spacer.gif"/><a href="/governance/com">Committees</a></h3></li>
            </ul>
          </li>
          <li><h3 class="toggle_action"><img class="img-swap" src="/images/plus.gif"/>About</h3>      
            <ul class="div_toggle">
              <li><h3><img src="/images/spacer.gif"/><a href="/about">About Us</a></h3></li>
              <li><h3><img src="/images/spacer.gif"/><a href="/about/contact">Contact</a></h3></li>
            </ul>
          </li>
       </ul> 
    ```

    和 jQuery：

    ```
    $('.topnav a.active').parents().attr('src').replace('plus.gif','minus.gif'); 
    ```

    我究竟做错了什么？？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:24:16.883

`img`标签不是标签的父母，`a`他们是兄弟姐妹。您想使用`.prev()`而不是`.parents()`.

并且`attr`已弃用，您应该使用`prop`. 而且你不需要使用`replace`，你可以做`prop('src', 'minus.gif')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:48:49.323

嵌套 html 的方式，它永远不会抓取`<img>`标签，因为它不被视为`active`类`<img>`标签的父级。

您应该考虑最明确地更改 HTML 的输出方式。

但是，这是您当前嵌套 html 的方式的问题的解决方案。

```
$(".active").parents(".div_toggle").prev("h3:first").children(":first").addClass("plus");

$('h3.toggle_action img').each(function(){
    if ($(this).attr('src') && $(this).hasClass('plus') && $(this).attr('src').indexOf('plus.gif') > 0)
    {
        var imgSrc = $(this).attr('src').replace('plus.gif','minus.gif');
        $(this).attr('src', imgSrc);
    }
}); 
```

好的，它的作用是它抓取`"active"`父母的`<h3>`孩子`<img>`并向它添加一个名为的类，`"plus"`并在循环标签时使用这个类`<h3 class="toggle_action"><img>`，确保使用 plus 作为一个类来抓取 img 标签，并将其他的更改为减去.gif 图像。

希望这对您有所帮助。如果是这样，请将其标记为您的答案。

# java - 如何使字符串“闪烁”？

> ID：14970627
> 
> 赞同：-4
> 
> 时间：2013-02-20T01:12:24.490
> 
> 标签：java, string, swing

我不是说只是出现和消失。我的意思是非常快的闪光，毫秒级的速度。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:34:21.447

毫秒级的闪烁是不切实际的。典型显示器的标称屏幕刷新率通常在 50hz 或更低的范围内。即每 20 毫秒 1 次的闪光率……比“毫秒速度”慢一个数量级。

并且忽略那个“狡辩”，您将能够在库存 PC / OS 上获得 Java 应用程序，以便在接近屏幕刷新率的任何地方可靠地闪烁一些文本，而无需进行一些严重的低级图形工作......

* * *

使用 Swing 高级 API*可靠地*执行此操作可能很困难。您很可能需要深入到“画布”和翻转图像上的绘画位级别。

而且我认为您的用户不会欣赏/享受这种体验......

明亮的闪光灯和屏幕会给[一些人带来](http://en.wikipedia.org/wiki/Photosensitive_epilepsy)**严重**的健康问题。所以要非常非常小心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T01:36:39.163

这是一个简单的例子。

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Flashy {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BlinkPane());
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });

    }

    protected static class BlinkPane extends JLabel {

        private JLabel label;
        private boolean on = true;

        public BlinkPane() {
            label = new JLabel("Hello");
            setLayout(new GridBagLayout());

            add(label);
            Timer timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    on = !on;
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public void paint(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            if (!on) {
                g2d.setComposite(AlphaComposite.SrcOver.derive(0f));
            } else {
                g2d.setComposite(AlphaComposite.SrcOver.derive(1f));
            }
            super.paint(g2d); 
            g2d.dispose();
        }

    }
} 
```

如果你有癫痫病，请不要运行这个！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T04:16:20.633

```
<blink><marquee>punch the monkey and win $20</marquee></blink> 
```

我认为您还需要滚动功能来增加用户体验。

编辑：这可能只适用于 netscape navigator 和/或 IE 5。我忘记了哪些支持哪些标签。

# sql - sql [db2] 带条件的选择语句

> ID：14970631
> 
> 赞同：2
> 
> 时间：2013-02-20T01:12:28.470
> 
> 标签：sql, select, db2

我有两张桌子。
player1 有行 username, score, game_id, ...
player2 有行 username, score, game_id...
你如何为同一个 game_id 选择得分最高的用户名？

我所拥有的是

```
SELECT player1.username winning,
  player1.points,
  player1.game_id 
FROM player1 
INNER JOIN player2 ON player1.game_id = player2.game_id
WHERE player1.points > player2.points 
```

和

```
SELECT player2.username winning,
  player2.points,
  player2.game_id 
FROM player1 
INNER JOIN player2 ON player1.game_id = player2.game_id
WHERE player2.points > player1.points 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T01:26:27.583

这应该这样做：

```
SELECT
    game_id, 
    CASE WHEN p1.score > p2.score THEN p1.username ELSE p2.username END AS winner
FROM
    player1 p1
INNER JOIN
    player2 p2 ON p1.game_id = p2.game_id
ORDER BY 
    p1.game_id ASC 
```

正如 Darius 所说，您可能希望根据平局的情况调整 CASE 语句，您可以将其更改为如下内容：

```
CASE WHEN p1.score > p2.score THEN p1.username WHEN p1.score < p2.score THEN p2.username ELSE 'Draw' END AS winner 
```

这实际上取决于您要在该场景中显示的内容。

# c++ - 获取类名+继承

> ID：14970633
> 
> 赞同：0
> 
> 时间：2013-02-20T01:12:41.730
> 
> 标签：c++

我将如何获得图表的类名父亲？

```
Father *a = new Father();
a = &(FatherFactory::getCode("Goppa")); //getcode return a type Nieto 
Grandfather *c3 = a; 
```

我尝试使用 typeid 方法，但我得到了祖父类名，即 typeid(c3).name(); 如果我写 typeid(*c3).name() 我得到 Nieto 类名。但我想得到父亲类的名字......

```
Father & FatherFactory::getCode(char* codeName)
{

   return *(new Nieto());

} 
```

![在此处输入图像描述](../Images/824b3cdefa9b4341b8ba1dc03942159a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:46:48.507

如果您需要直接基础的名称，则必须添加返回它的虚函数并在每个类中仔细实现它。但目前尚不清楚您想要什么以及为什么，并且您仍然在第二行从第一行泄漏对象。你的问题很奇怪，可能你必须更好地学习c++

# plugins - CRM 2011 自定义工作流程

> ID：14970636
> 
> 赞同：1
> 
> 时间：2013-02-20T01:13:01.047
> 
> 标签：plugins, workflow, dynamics-crm-2011, crm, workflow-activity

> **我让插件工作了，我已经在这里更新了工作代码。希望能帮助到你！！**

我正在创建一个工作流，它有一个插件来从电子邮件记录的“FROM”字段中检索联系人实体。我正在尝试查看该电子邮件是否存在于联系人实体中。输入是“FROM”电子邮件，输出将返回联系人实体。我无法让这段代码工作，我收到不同的错误或没有错误，但我知道它不起作用。请帮忙！提前致谢！

```
using System.Activities;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Workflow;
using Microsoft.Xrm.Sdk.Query;
using Microsoft.Xrm.Sdk.Messages;
using System;

namespace GetSenderPlugin
{
  public class GetSenderPlugin : CodeActivity
  {
    protected override void Execute(CodeActivityContext executionContext)
    {
        //Create the tracing service
        ITracingService trace = executionContext.GetExtension<ITracingService>();
        trace.Trace("*****Tracing Initiated*****");

        //Create the IWorkflowContext and the IOrganizationService for communication with CRM
        IWorkflowContext context = executionContext.GetExtension<IWorkflowContext>();
        IOrganizationServiceFactory serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();
        IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);
        trace.Trace("*****IOrganizationService created*****");

        trace.Trace("*****Entity logical Name: " + Email.Get<EntityReference>(executionContext).LogicalName + "*****");
        trace.Trace("*****Entity ID: " + Email.Get<EntityReference>(executionContext).Id + "*****");

        if (Email != null && string.Compare(Email.Get<EntityReference>(executionContext).LogicalName, "email", false) == 0)
        {
            EntityReference retrieveEmail = new EntityReference();
            retrieveEmail.Id = Email.Get<EntityReference>(executionContext).Id;
            retrieveEmail.LogicalName = Email.Get<EntityReference>(executionContext).LogicalName;
            retrieveEmail.Name = Email.Get<EntityReference>(executionContext).Name;

            string[] strArrays = new string[1];
            strArrays[0] = "from";

            ColumnSet columnSet = new ColumnSet();
            columnSet.AddColumn(strArrays[0]);

            RetrieveRequest retrieveRequest = new RetrieveRequest();
            retrieveRequest.Target = retrieveEmail;
            retrieveRequest.ColumnSet = columnSet;
            trace.Trace("*****Retrieve Request declared*****");

            RetrieveResponse retrieveResponse = (RetrieveResponse)service.Execute(retrieveRequest);
            trace.Trace("*****Retrieve Response executed*****");

            Email businessEntity = (Email)retrieveResponse.Entity;
            trace.Trace("*****businessEnitity retrieved*****");

            //ActivityParty activitypartyArray = (ActivityParty)businessEntity.From.FirstOrDefault;
            foreach (ActivityParty activityParty in businessEntity.From)
            {
                trace.Trace("*****Activity Party Name: " + activityParty.PartyId.LogicalName + "*****");
                trace.Trace("*****Activity Party Id: " + activityParty.PartyId.Id + "*****");
                if (activityParty != null && activityParty != null && activityParty.PartyId != null)
                {
                    string str = activityParty.PartyId.LogicalName;
                    if (str.CompareTo("contact") != 0)
                    {
                        trace.Trace("*****Not Contact*****");
                        if (str.CompareTo("account") != 0)
                        {
                            trace.Trace("*****Not Account*****");
                            if (str.CompareTo("lead") != 0)
                            {
                                trace.Trace("*****Not Lead*****");
                                if (str.CompareTo("systemuser") != 0)
                                {
                                    trace.Trace("*****Not System User*****");
                                    if (str.CompareTo("queue") == 0)
                                    {
                                        Queue.Set(executionContext, activityParty.PartyId);
                                        Contact.Set(executionContext, new EntityReference("contact", Guid.NewGuid()));
                                        User.Set(executionContext, new EntityReference("systemuser", Guid.NewGuid()));
                                        Lead.Set(executionContext, new EntityReference("lead", Guid.NewGuid()));
                                        Account.Set(executionContext, new EntityReference("account", Guid.NewGuid()));
                                    }
                                    else
                                    {
                                        trace.Trace("*****User not found*****");
                                        Queue.Set(executionContext, new EntityReference("queue", Guid.NewGuid()));
                                        Contact.Set(executionContext, new EntityReference("contact", Guid.NewGuid()));
                                        User.Set(executionContext, new EntityReference("systemuser", Guid.NewGuid()));
                                        Lead.Set(executionContext, new EntityReference("lead", Guid.NewGuid()));
                                        Account.Set(executionContext, new EntityReference("account", Guid.NewGuid()));
                                    }
                                }
                                else
                                {
                                    User.Set(executionContext, activityParty.PartyId);
                                    Contact.Set(executionContext, new EntityReference("contact", Guid.NewGuid()));
                                    Queue.Set(executionContext, new EntityReference("queue", Guid.NewGuid()));
                                    Lead.Set(executionContext, new EntityReference("lead", Guid.NewGuid()));
                                    Account.Set(executionContext, new EntityReference("account", Guid.NewGuid()));
                                }
                            }
                            else
                            {
                                Lead.Set(executionContext, activityParty.PartyId);
                                Contact.Set(executionContext, new EntityReference("contact", Guid.NewGuid()));
                                Queue.Set(executionContext, new EntityReference("queue", Guid.NewGuid()));
                                User.Set(executionContext, new EntityReference("systemuser", Guid.NewGuid()));
                                Account.Set(executionContext, new EntityReference("account", Guid.NewGuid()));
                            }
                        }
                        else
                        {
                            Account.Set(executionContext, activityParty.PartyId);
                            Contact.Set(executionContext, new EntityReference("contact", Guid.NewGuid()));
                            Queue.Set(executionContext, new EntityReference("queue", Guid.NewGuid()));
                            User.Set(executionContext, new EntityReference("systemuser", Guid.NewGuid()));
                            Lead.Set(executionContext, new EntityReference("lead", Guid.NewGuid()));
                        }
                    }
                    else
                    {
                        trace.Trace("*****Contact assigned*****");
                        Contact.Set(executionContext, activityParty.PartyId);
                        Queue.Set(executionContext, new EntityReference("queue", Guid.NewGuid()));
                        User.Set(executionContext, new EntityReference("systemuser", Guid.NewGuid()));
                        Lead.Set(executionContext, new EntityReference("lead", Guid.NewGuid()));
                        Account.Set(executionContext, new EntityReference("account", Guid.NewGuid()));
                    }
                }
                break;
            }
        }
        else
        {
            trace.Trace("*****Email is null*****");
            Queue.Set(executionContext, new EntityReference("queue", Guid.NewGuid()));
            Contact.Set(executionContext, new EntityReference("contact", Guid.NewGuid()));
            User.Set(executionContext, new EntityReference("systemuser", Guid.NewGuid()));
            Lead.Set(executionContext, new EntityReference("lead", Guid.NewGuid()));
            Account.Set(executionContext, new EntityReference("account", Guid.NewGuid()));
        }
    }

    #region Properties
    [Input("E-mail")]
    [ReferenceTarget("email")]
    public InArgument<EntityReference> Email { get; set; }

    [Output("Account")]
    [ReferenceTarget("account")]
    public OutArgument<EntityReference> Account { get; set; }

    [Output("Contact")]
    [ReferenceTarget("contact")]
    public OutArgument<EntityReference> Contact { get; set; }

    [Output("Lead")]
    [ReferenceTarget("lead")]
    public OutArgument<EntityReference> Lead { get; set; }

    [Output("Queue")]
    [ReferenceTarget("queue")]
    public OutArgument<EntityReference> Queue { get; set; }

    [Output("User")]
    [ReferenceTarget("systemuser")]
    public OutArgument<EntityReference> User { get; set; }
    #endregion        
  }
} 
```

所以我们正在将我们的内部 CRM 系统从 4.0 升级到 2011，这是一个工作流程中的插件。我没有原始源代码，所以我真的不知道代码在做什么。但是我在导出解决方案后反编译了原始的 .dll 文件。我试图重写 CRM 2011 的代码，这就是我所拥有的。测试工作流程后，我收到错误消息：“预期非空 Guid。” 代码转到循环后的最后一行，然后给我错误。这是跟踪：

```
Workflow paused due to error: Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Expected non-empty Guid.Detail: 
<OrganizationServiceFault xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/xrm/2011/Contracts">
  <ErrorCode>-2147220989</ErrorCode>
  <ErrorDetails xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
  <Message>Expected non-empty Guid.</Message>
  <Timestamp>2013-02-21T23:46:37.0376093Z</Timestamp>
  <InnerFault>
   <ErrorCode>-2147220970</ErrorCode>
    <ErrorDetails xmlns:d3p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
    <Message>System.ArgumentException: Expected non-empty Guid.
Parameter name: id</Message>
    <Timestamp>2013-02-21T23:46:37.0376093Z</Timestamp>
    <InnerFault i:nil="true" />
    <TraceText i:nil="true" />
 </InnerFault>
 <TraceText>[Microsoft.Xrm.Sdk.Workflow: Microsoft.Xrm.Sdk.Workflow.Activities.RetrieveEntity]
[RetrieveEntity]
    *****Tracing Initiated*****
    *****IOrganizationService created*****
    *****Entity logical Name: email*****
    *****Entity ID: c49e4c7c-8724-de11-86ce-000c290f83d7*****
    *****Retrieve Request declared*****
    *****Retrieve Response executed*****
    *****businessEnitity retrieved*****
    *****Activity Party Name: contact*****
    *****Activity Party Id: 79ed3a33-8eb9-dc11-8edd-00c09f226ebb*****
    *****Activity Party not null*****
    *****Contact assigned*****
    *****foreach ended*****</TraceText>
</OrganizationServiceFault>
   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.Retrieve(String entityName, Guid id, ColumnSet columnSet, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType)
   at Microsoft.Crm.Extensibility.InprocessServiceProxy.RetrieveCore(String entityName, Guid id, ColumnSet columnSet)
   at Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.Retrieve(String entityName, Guid id, ColumnSet columnSet)
   at Microsoft.Crm.Workflow.Services.RetrieveActivityService.<>c__DisplayClass1.<RetrieveInternal>b__0(IOrganizationService sdkService)
   at Microsoft.Crm.Workflow.Services.ActivityServiceBase.ExecuteInTransactedContext(ActivityDelegate activityDelegate)
   at Microsoft.Crm.Workflow.Services.RetrieveActivityService.ExecuteInternal(ActivityContext executionContext, RetrieveEntity retrieveEntity)
   at Microsoft.Crm.Workflow.Services.RetrieveActivityService.Execute(ActivityContext executionContext, RetrieveEntity retrieveEntity)
   at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
   at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:11:46.847

> 我收到不同的错误或没有错误，但我知道它不起作用

首先，我建议您列出问题中的错误。回答您并避免-1会容易得多。:) 其次，在工作流中使用跟踪服务。

```
ITracingService tracingService = context.GetExtension<ITracingService>();
tracingService.Trace("I'm tracing something...."); 
```

如果没有找到指定电子邮件的*联系人，应该怎么办？*你必须处理这种情况。可能在这里失败了。发布有问题的错误日志，以检查这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:17:19.940

如果我要给出一个即时的答案，我想这就是问题所在，在某些情况下你没有得到匹配并过滤掉所有内容。然后，您在某处得到*null*（或尝试引用一个*空*的guid，或尝试选择一个尚未输入的属性，这样，虽然它已定义，但未提供服务）。

你得到什么确切的错误？你什么时候得到它们，什么时候没有？

此外，我注意到的代码存在一些问题（不是解决方案，但仍有可能改进）。

名称中的错字。我想你想要*ContactReference*。

```
[Output("output")]
[ReferenceTarget("contact")]
public OutArgument<EntityReference> ContactRefernce { get; set; } 
```

我会以不同的方式设计查询。由于您知道要匹配的地址，因此您可能需要精确过滤。此外，您似乎只需要根据电子邮件进行匹配的 guid，因此您只需要获取它。

```
private Guid MatchSenderWithExistingContact(
  IOrganizationService service, String fromAddress)
{
  QueryExpression query = new QueryExpression
  {
    EntityName = "contact",
    ColumnSet = new ColumnSet("emailaddress1"),
    Criteria = new FilterExpression
    {
      Filters =
      {
        new FilterExpression
        {
          Conditions =
          {
            new ConditionExpression(
              "emailaddress1", ConditionOperator.Equal, fromAddress)
          }
        }
      }
    }
  };

  EntityCollection retrieveMultipleRequest = service.RetrieveMultiple(query);
  IEnumerable<Entity> entities = retrieveMultipleRequest.Entities;
  return entities.FirstOrDefault().Id;
} 
```

您可能希望将查询声明放在逐步语法上。我更喜欢这种方式，因为它在创建高级查询时更方便。但是，如上所示，您迭代和使用*break的部分肯定会更好。*

快乐编码！

您可能应该使用跟踪。通常，我将跟踪对象声明为插件类中的成员变量，然后在每次操作时写入它。这样，至少我知道粪便在**哪里**撞击空调，并且可以在此之前记录变量的值。

```
private ITracingService trace;

public void Execute(IServiceProvider serviceProvider)
{
  trace = (ITracingService)serviceProvider.GetService(typeof(ITracingService));
  _trace.Trace("Tracing successful!");
  throw new Exception("Intentional! Nice.");
} 
```

请记住，除非发生未捕获的异常，否则不会显示跟踪。事实上，我有时故意让执行崩溃，只是为了看看变量中有什么。所以请记住，如果你有一个全局*try-catch*，你需要手动重新抛出异常。

这种方法的好处是您可以在本地和在线进行跟踪。它适用于除异步之外的所有插件注册。也有解决方法，但这不是你问题的主题，我已经离题了。

# ios - 太空团队如何运作？

> ID：14970637
> 
> 赞同：6
> 
> 时间：2013-02-20T01:13:27.960
> 
> 标签：ios, networking, wifi, adhoc, game-development

对于那些不知道的人来说，[Spaceteam](http://www.sleepingbeastgames.com/spaceteam/)是一款非常流行且非常有趣的 iOS 多人游戏。

它允许在 ad-hoc Wifi 网络上的多个设备之间进行实时游戏——它是如何做到的？

是否有已发布的库描述了如何在 ad-hoc 网络库之上构建协议？它是 iOS 特有的，还是可以跨不同平台构建各种应用程序？

快，在我们撞上小行星之前回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:15:16.900

具体你对哪个方面感兴趣？*移动设备或ad hoc* Wi-Fi 网络没有什么特别的（除了在*ad hoc*网络中，并非所有设备都可以相互通信，因此一些网状网络可以提供帮助，但在正常情况下不必要地使事情复杂化）。

我将首先回答更广泛的问题，因为它更有趣。根据我的经验，有几个主要考虑因素：

*   **服务器/客户端还是点对点？**我的意思是是否有一个“大师”决定世界的真实状态并将其传达给所有客户。[Avara](http://www.ambrosiasw.com/games/avara/)是我所知道的唯一一款在这个意义上是“点对点”的游戏（点对点向所有其他点发送命令；这对于 6 人游戏的调制解调器用户来说证明带宽很重）。我不知道游戏使用更复杂的网络拓扑来传达游戏状态（例如，仅向每个 LAN 上的一个客户端发送数据）。
*   **你如何处理延迟？**Avara 是我所知道的唯一一款通过“延迟容忍度”在本地落后于*所有人*的游戏，以便获得一致的世界状态，如果有人在调制解调器上，这会很糟糕（关闭压缩有很大帮助）。有多种方法可以进行“延迟补偿”（例如在[半条命](http://web.cs.wpi.edu/~claypool/courses/4513-B03/papers/games/bernier.pdf)/CS 中），其中一些方法也适用于点对点游戏。
*   **时间同步？**对于客户端-服务器游戏，您至少需要担心 RTT 的变化。对于点对点游戏，我认为您还希望就最大程度地减少有效延迟的时间达成一致。
*   **如果客户不同意世界现状怎么办？**Avara 只是让对等方决定他们自己的世界状态（并在检测到不匹配时显示“检测到现实碎片”，这可能是由于丢包或“延迟容限”太低而发生的）。
*   **如果球员离开怎么办？**对于 P2P 游戏，您可能必须就一致的游戏状态达成一致（例如，如果玩家在向其他同伴的子集发送命令后断开连接）。对于客户端-服务器游戏，您可能必须选择一个新的主人。

现在，在观看 Spaceteam 预告片之后：

我不知道它是如何工作的，因为我没有对协议进行逆向工程。*但是，制作足够好的*东西非常简单：

*   使用某种 P2P 发现来寻找玩家（例如 Bonjour；那里应该有大量的文档和示例）。
*   与同行交流。我已经使用大约 iOS 3/4 的 GameKit 完成了此操作（我不确定它是否仍然可以通过 Wi-Fi 工作）。
*   选一个师傅。这可以像*按下“准备”最后一次尝试成为主人的人*一样简单。在某些边缘情况下，您可能必须处理失败。
*   让主人决定一切。Spaceteam**对**延迟不敏感；Wi-Fi 延迟往往最多只有几毫秒，没有人会真正注意到一台设备是否慢了 100 毫秒（只要 UI 响应足够快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-17T01:57:58.240

Spaceteam 为 Unity 游戏制作了一个库。 [https://github.com/hengineer/CaptainsMess](https://github.com/hengineer/CaptainsMess)

Spaceteam 的创建者还写了一篇关于 Spaceteam 网络的旧博客文章 [http://spaceteamadmirals.club/blog/the-spaceteam-networking-post/](http://spaceteamadmirals.club/blog/the-spaceteam-networking-post/)

* * *

有一个 iOS 专用库，可以轻松连接附近的设备，称为 MultipeerConnectivity [https://developer.apple.com/documentation/multipeerconnectivity](https://developer.apple.com/documentation/multipeerconnectivity)

* * *

如果您想要跨平台工作的东西，我在这里有一个示例应用程序：[https](https://github.com/brendaninnis/LocalNetworkingApp) ://github.com/brendaninnis/LocalNetworkingApp ，我在这里详细解释：http: [//brendaninnis.ca/connect-nearby-devices -part-1.html](http://brendaninnis.ca/connect-nearby-devices-part-1.html)

# knockout.js - 在 knockoutjs 中找不到绑定处理程序时强制出错

> ID：14970638
> 
> 赞同：0
> 
> 时间：2013-02-20T01:13:31.873
> 
> 标签：knockout.js

我有一组绑定处理程序，我使用 requireJS 加载，问题是 ko 在添加处理程序之前绑定 - 这很公平！

我遇到的问题是发生这种情况时没有错误 - 淘汰赛会忽略任何尚未注册的绑定处理程序。

有什么方法可以强制出错，或者至少`console.log`在找不到绑定处理程序时强制出错？

例子：

```
<div data-bind="madeUpBinding: {}">No error here...</div> 
```

这个 html 片段将由 knockoutjs 解析，即使`madeUpBinding`没有注册为绑定处理程序，也不会显示任何错误或任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:20:17.613

如果您阅读有关自定义绑定的[文档](http://knockoutjs.com/documentation/custom-bindings.html)，您会明白为什么它没有给出错误。您可以使用其他绑定作为将参数传递给自定义绑定的一种方式。在文档中，他们有一个`slideVisible`活页夹，并且他们使用一个不存在`slideDuration`的来传递动画的持续时间。

那么如何判断`madeUpBinding`是不存在的绑定，还是用于将参数传递给其他绑定的占位符？

# actionscript-3 - Actionscript 3将变量从父级传递给子级

> ID：14970641
> 
> 赞同：0
> 
> 时间：2013-02-20T01:13:54.507
> 
> 标签：actionscript-3, variables, parent-child, parent

我仍然遇到问题，所以我制作了一个非常基本的 main.swf 来加载 sub.swf。

Sub.swf 有 2 个矩形动画剪辑（红色和蓝色），它们的 alpha = 0。

两个 swf 编译正常且没有错误，但红色 alpha 未打开，因此来自 m​​ain.swf 变量的“西班牙文”的值不能在 sub.swf 中被识别。有任何想法吗？

Main.swf 动作脚本：

```
import flash.display.Loader;
import flash.display.MovieClip;
import flash.events.Event;

var child_loader:Loader = new Loader();

var req:URLRequest = new URLRequest("sub.swf");

child_loader.load(req);

child_loader.contentLoaderInfo.addEventListener(Ev ent.COMPLETE, done);

function done(e:Event):void{
    addChild(child_loader);
    MovieClip(child_loader.content).language = "spanish";
} 
```

sub.swf 动作脚本：

```
import flash.display.Loader;
import flash.display.MovieClip;
import flash.events.Event;

function callFunction(_txt:String):void{
    var sublanguage = (MovieClip(parent.parent).language)

    if (sublanguage == "spanish"){
    red.alpha = 1;
    }else if (sublanguage == "english"){
        blue.alpha = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:42:41.453

问题是 AS3 不像 AS2 那样是动态的，因此子文档需要具有父知道存在的属性或方法。

一种方法相对简单：

```
包裹 {
   公共类 ChildClass 扩展 MovieClip {
       受保护的var _property：字符串；

       公共函数获取属性（）：字符串{
          返回_property；
       }
       公共函数集属性（值：字符串）：无效{
          如果（值！= _property）{
              _属性=值；
              //做点什么，因为现在属性已经设置好了
          }
       }
   }
}

```

您只需将其作为 Document Class 应用于您正在加载的 swf，然后在您的 onLoaded 函数中，您将执行以下操作：

```
// 转换为 ChildClass，这样你就会知道你有可用的属性
var childClass:ChildClass = Loader(event.currentTarget).contentLoaderInfo.content as ChildClass;

//如果变量内容为null，则swf有不同的Document Class
如果（子类）{
    //现在你可以设置你的变量了，你很好
    childClass.property = 'foo';
}

```

像 Actionscript 中的大多数事情一样，您可以用简单的方法（如上所示）来做，也可以用正确的方法来做。正确的方法是[使用 Interface](http://www.adobe.com/devnet/actionscript/learning/oop-concepts/polymorphism-and-interfaces.html)。接口是类的“蓝图”。在这种情况下，需要说任何实现该接口的类总是有一个`property`getter 和一个`property`setter。你不能只使用一个变量，因为接口只允许函数。

但无论如何，使用接口的优势，尤其是在您的情况下，是您不必在与您正在加载的 swf 关联的特定类中进行编译。相反，您只需要在类的“合同”中编译，它的重量要轻得多。但是因为玩家不会施放`contentLoaderInfo.content`to`ISomeInterface`除非它*履行*了那个契约，所以一旦你完成施放，你就可以自信地设置那个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:19:11.970

您应该能够在您的子电影中设置一个可以从您的父级调用的函数。你可以传递任何你想要的作为参数。

# string - ada split() 方法

> ID：14970642
> 
> 赞同：3
> 
> 时间：2013-02-20T01:13:58.427
> 
> 标签：string, parameters, split, ada

我正在尝试编写一个等效于 Java 或 C++ 中的 split() 方法的 Ada。我要输入一个字符串和一个整数并输出两个单独的字符串值。例如：拆分“hello”和 2 将返回：“第一部分是 he，第二部分是 llo”

我的代码如下：

```
-- split.adb splits an input string about a specified position.
--
-- Input: Astring, a string,
--        Pos, an integer.
-- Precondition: pos is in Astring'Range.
-- Output: The substrings Astring(Astring'First..Pos) and
--                        Astring(Pos+1..Astring'Last).
--------------------------------------------------------------

with Ada.Text_IO, Ada.Integer_Text_IO, Ada.Strings.Fixed;
use  Ada.Text_IO, Ada.Integer_Text_IO, Ada.Strings.Fixed;

procedure Split is

   EMPTY_STRING : String := "                                        ";

   Astring, Part1, Part2 : String := EMPTY_STRING;
   Pos, Chars_Read       : Natural;

   ------------------------------------------------
   -- Split() splits a string in two.           
   -- Receive: The_String, the string to be split,
   --          Position, the split index.        
   -- PRE: 0 < Position <= The_String.length(). 
   --     (Ada arrays are 1-relative by default)
   -- Passback: First_Part - the first substring,
   --           Last_Part - the second substring.
   ------------------------------------------------
   function Split(TheString : in String ; Pos : in Integer; Part1 : out String ; Part2     : out String)  return String is 
   begin
    Move(TheString(TheString'First .. Pos), Part1);
    Move(TheString(Pos .. TheString'Last), Part2);
    return Part1, Part2;
     end Split;

begin                                           -- Prompt for input
   Put("To split a string, enter the string: ");
   Get_Line(Astring, Chars_Read);
   Put("Enter the split position: ");
   Get(Pos);

   Split(Astring, Pos, Part1, Part2);

   Put("The first part is ");
   Put_Line(Part1);
   Put(" and the second part is ");
   Put_Line(Part2);

end Split; 
```

我遇到问题的主要部分是返回两个单独的字符串值，通常是整个 split() 函数。任何指针或帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T02:57:27.940

如您所展示的`function`，考虑使`Split`a`procedure`具有两个参数，而不是 a 。`out`然后判断`Pos`是 的*最后一个*索引`Part1`还是 的*第一个*索引`Part2`；我选择了后者。

```
procedure Split(
   TheString : in String; Pos : in Integer;
   Part1 : out String; Part2 : out String) is 
begin
   Move(TheString(TheString'First .. Pos - 1), Part1);
   Move(TheString(Pos .. TheString'Last), Part2);
end Split; 
```

请注意，`String`索引是`Positive`：

```
type String is array(Positive range <>) of Character;
subtype Positive is Integer range 1 .. Integer'Last; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T15:24:05.897

这样做是如此微不足道，我不确定你为什么要为它制定一个例程。无论如何，几乎任何你能想出的例程都将变得更难使用。

```
Front_Half : constant String := Original(Original'first..Index);
Back_Half  : constant String := Original(Index+1..Original'last); 
```

完毕。

请注意，静态 Ada 字符串与其他语言（如 C 或 Java）中的字符串*非常*不同。由于它们的静态特性，它们最好像我上面所做的那样内联构建，或者作为函数的返回值构建。由于函数不能返回多个值，因此单个统一的“拆分”例程显然不适合静态 Ada 字符串处理。相反，您应该按照我上面所做的那样，从 Ada.Strings.Fixed ( `Head`and `Tail`) 调用相应的例程，或者切换到 using`Ada.Strings.Unbounded.Unbounded_String`而不是`String`.

如果您想保持 Java 对字符串处理的心态，后者可能是最简单的选择。不过，如果您想真正学习 Ada，我强烈建议您学习以`String`Ada 方式处理 static fixed 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T01:37:47.397

通过查看您的代码，您*确实*需要大致了解[String 类型](http://en.wikibooks.org/wiki/Ada_Programming/Strings)，因为您从其他语言中拖入了很多关于如何使用它们的期望——这些期望不会与它们一起使用。Ada 的 String 类型并不是其更灵活的特性之一，因为它们*始终*是固定长度的。[虽然有一些方法可以解决您所描述的情况下的限制，但简单地使用Unbounded_Strings](http://www.ada-auth.org/standards/12rm/html/RM-A-4-5.html)会容易得多。

您的函数的输入字符串可以保持为字符串类型，它将根据您提供给它的字符串的长度进行调整。两个输出 Unbounded_Strings 然后在对它们中的每一个调用 To_Unbounded_String() 之后简单地设置为切片的字符串组件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:17:27.770

给定主程序的约束，所有字符串都以 EMPTY_STRING 的大小为界。没有参数的过程是正确的方法，调用者分配的参数存储（在堆栈上）

情况并非总是如此，因此值得了解另一种方式。问题是如何处理直到运行时才知道大小的数据。

一些语言只能在堆上提供运行时分配（通过“new”或“malloc”）并且只能通过指针访问数据，从而留下各种混乱的问题，包括访问数据末尾（缓冲区溢出）或释放正确存储（内存泄漏，访问释放的指针等）

Ada 也会允许这种方法，但它通常是不必要的并且强烈反对。Unbounded_String 是此方法的包装器，而 Bounded_String 避免了堆分配，您可以在其中接受字符串长度的上限。

而且，Ada 允许在堆栈上创建可变大小的数据结构。该技术只涉及创建一个新的堆栈框架并在您需要的地方声明新变量，使用“声明”。新变量可以通过函数调用进行初始化。

每个函数只能返回一个对象，但该对象的大小可以在运行时确定。因此，“Split”可以实现为 2 个函数，返回 Part1 或 Part2，或者它可以返回包含两个字符串的记录。这将是一个有两个大小判别式的记录，所以我在这里选择了更简单的选项。函数结果通常就地构建（避免复制）。

您示例中的流程需要两个嵌套的 Declare 块；如果可以首先识别“Pos”，它们可以折叠成一个......

```
procedure Split is

   function StringBefore( Input : String; Pos : Natural) return String is
   begin
      return Input(1 .. Pos-1);
   end StringBefore;

   function StringFrom ...

begin                                           
   Put("To split a string, enter the string: ");
   declare
      AString : String := Get_Line;
      Pos     : Natural;
   begin
      Put("Enter the split position: ");
      Get(Pos);
      declare 
         Part1 : String := StringBefore(AString, Pos);
         Part2 : String := StringFrom(AString, Pos);
      begin
         Put("The first part is ");
         Put_Line(Part1);
         Put(" and the second part is ");
         Put_Line(Part2);
      end;   -- Part1 and Part2 are now out of scope
   end;      -- AString is now out of scope
end Split; 
```

这显然可以包装在一个循环中，每次使用不同大小的字符串，没有内存管理问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-28T04:58:07.883

查看 Ada.Strings.Fixed 中的 Head 和 Tail 函数。

`function Head (Source : in String; Count : in Natural; Pad : in Character := Space) return String;`

`function Tail (Source : in String; Count : in Natural; Pad : in Character := Space) return String;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-23T16:45:13.200

这是一种仅使用字符串切片的方法。

```
with Ada.Text_IO; use Ada.Text_IO;
with Ada.Strings.Fixed; use Ada.Strings.Fixed;
procedure Main is
   str : String := "one,two,three,four,five,six,seven,eight";
   pattern : String := ",";
   idx, b_idx : Integer;
begin
   b_idx := 1;
   for i in 1..Ada.Strings.Fixed.Count ( Source => str, Pattern => pattern ) loop
      idx := Ada.Strings.Fixed.Index( Source => str(b_idx..str'Last), Pattern => pattern);
      Put_Line(str(b_idx..idx-1)); -- process string slice in any way
      b_idx := idx + pattern'Length;
   end loop;
   -- process last string
   Put_Line(str(b_idx..str'Last)); 
end Main; 
```

# php - 使用 curl php 登录和发布数据

> ID：14970643
> 
> 赞同：0
> 
> 时间：2013-02-20T01:14:13.680
> 
> 标签：php, post, curl

我需要登录一个网站，然后它会将我重定向到另一个我必须发布数据的页面；我已经编写的代码将使我成功登录，并将我重定向到我必须发布（发送 $_POST）数据的页面，但我不知道如何发布它（使用某些会话/cookies 开始另一个请求已经开始）这是代码。

```
$url = "http://site.com/account.php?s_id=&d=y";
    $email = "EMAIL@EMAIL.COM";
    $password = "PASS";
    $postfields = "email=$email&password=$password&submit=1&do=login&forward=&communicate=&communicate_id=1";
    $postfield = "message=doit";
    $cookiefile  = tempnam("/tmp", "cookies");  
    $agent     = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";  
    $ch = curl_init();
    $ch2 = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile);  
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);  
    curl_setopt($ch, CURLOPT_HEADER, 0); // Get the header
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // Allow redirection
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
    curl_exec($ch);
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:44:09.333

要使用相同的会话和 cookie 数据执行后续请求，请不要`curl_exec($ch);`过早调用。只需使用相同的卷曲手柄，继续更改选项即可。您的代码应如下所示：

```
// do login request
curl_exec($ch);
echo '<hr>';

// change url
curl_setopt($ch, CURLOPT_URL,$url_to_post_to);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_to_post);

// do post request with your data
curl_exec($ch);

curl_close($ch); 
```

# jquery - jQuery Validate - 如何忽略内联模式验证

> ID：14970650
> 
> 赞同：0
> 
> 时间：2013-02-20T01:14:52.213
> 
> 标签：jquery, iphone, ipad, jquery-validate

我已经设置，需要实现三个单独的目标：

1.  客户端验证（这是使用 jQuery Validate 插件完成的）
2.  整洁的数字格式（这是使用 jQuery autoNumeric 插件完成的）
3.  iPad/iPhone 键盘在纯数字字段上弹出（这是使用输入元素上的 pattern="[0-9]*" 属性完成的 - 我不能使用 HTML5 type="number"，因为 autoNumeric 插件不支持它） .

问题是，虽然它有效，但 validate 插件会引发浮点值错误（*无效格式*），因为小数点分隔符与 pattern="[0-9]*" 正则表达式不匹配。请在下面找到一个示例输入字段：

```
<input type="text" id="acme" name="acme" size="4" 
 data-autonumeric="{vMin: '0.00'}" class="required number autoNumeric" 
 min="0.0" step="0.01" pattern="[0-9*]"> 
```

有没有办法以某种方式禁用模式验证，最好在全局范围内，对所有已验证的字段，或者每个字段？或者也许还有另一种方法可以在 iPad/iPhone 上强制使用数字键盘，这并不意味着 type="number" 或 pattern="[0-9*]"？

**编辑：**

我找到了解决此问题的方法，请参阅下面的答案。如果有人有更好的想法，请分享。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:34:49.037

我通过覆盖 jQuery Validate 中的模式验证方法找到了一种方法。如果有人知道更好的解决方案，请发表评论。

这是代码。它与添加的 jQuery.validator.addMethod("pattern" *... \d* ”，我使用（来源[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)）。注释掉该行以查看实际问题。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.min.js"></script>
<script type="text/javascript" src="jquery.metadata.js"></script>
<script type="text/javascript" src="autoNumeric-1.7.4.js"></script>
<form id="test">
<input type="text" id="acme" name="acme" size="4" data-autonumeric="{vMin: '0.00'}"
    class="required number autoNumeric" min="0.0" step="0.01" pattern="\d*" value="1.00">
</form>
<script type="text/javascript">
    $(document).ready(function () {
        $("#test").validate();
    });

    // This overrides the additional-methods.min.js implementation to ignore pattern="\d*" validation
    jQuery.validator.addMethod("pattern", function (e, t, n) {
        return this.optional(t) || n == "\\d*" ? !0 : (typeof n == "string" && (n = new RegExp("^(?:" + n + ")$")), n.test(e))
    }, "Invalid format.");
</script> 
```

# java - 将 hsqlDB 集成到 netbeans 7 IDE

> ID：14970652
> 
> 赞同：0
> 
> 时间：2013-02-20T01:15:00.783
> 
> 标签：java, database, swing, netbeans-7, hsqldb

我正在使用 Java Swing 作为前端构建一个简单的桌面应用程序，并使用 HyperSQL DB 作为数据库系统。我正在使用 Netbeans 7 IDE 开发系统。

是否可以将 HSQLDB 集成到 Netbeans IDE 中，然后能够将应用程序接口连接到数据库？

很高兴有关于此的教程或文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:15:34.967

为您的数据库创建一个库条目，如此处所示[的](https://stackoverflow.com/a/1976322/230513)[H2](https://stackoverflow.com/tags/h2/info)。打开`Window > Services > Database`面板以建立连接的属性并检查可用的模式。

# ios - 外部继承重复符号错误，这是怎么回事？

> ID：14970657
> 
> 赞同：0
> 
> 时间：2013-02-20T01:15:19.473
> 
> 标签：ios, objective-c, inheritance, extern

我对外部和继承的使用有疑问。我正在使用 X-Code 在 Objective C 中编写一个 iOS 应用程序。

我有两个假设的类 B 和 C，它们都继承自类 A。

现在类 A 在它的头文件中导入一个名为 Constraints 的类，如下所示：**#import "Constraints.h"**。在约束的**.H标头中，在****@interface Constraints : NSObject**上方但在导入下方声明了各种**extern NSInteger const VAR_NAME**值 。在 .M 实现中，外部变量被初始化，例如如下**NSInteger const VAR_NAME = 1**。再次将其放置在导入下方但在**@implementation Constraints**行上方。该文件旨在保存应用程序范围的全局约束。

 ******但是，在执行此操作时，XCode 在构建时为在约束文件中声明为 extern 的每个变量在 B 类和 C 类中的重复符号报告一个 mach-o-linker 错误。

所以我当时所做的就是从父类 A 中删除类 Constraints 的导入，而是直接将其导入到类 B 和 C 中。但是，我遇到了同样的问题。

我已经在这个桌子上撞了几个小时了，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:15:14.827

您可以发布产生错误的代码吗？这对我来说似乎是正确的，通常只是由错字引起的。我读过其他帖子，人们只是偶然导入了 .m 文件而不是 .h 文件，这通常会导致此错误。******

# c# - ASP.net 中的会话变量是否有限制？

> ID：14970659
> 
> 赞同：3
> 
> 时间：2013-02-20T01:15:25.760
> 
> 标签：c#, asp.net, session-variables

我将填充`DataTable`和其他`controls`来自复杂的`object`.

1.  我应该在哪里存储这样的`object`?
2.  会话变量在多大时开始影响页面的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:28:24.417

对象中的数据`Session`存储在服务器的内存中。因此，存储限制是服务器可用的内存。此数据不会在任何阶段发送到客户端，除非您明确这样做。相反，一旦您为 Session 对象分配了任何值，MVC 代码就会向客户端浏览器发送一个 cookie。然后使用此 cookie 的值来唯一标识会话。

所以...

1.  该`Session`对象是专门设计的，以便您可以在服务器上存储特定于会话的数据，因此是您放置所描述的特定于会话的数据结构的合适位置。
2.  因为该`Session`对象仅是服务器端的，`Session`所以用于存储计算成本高且在多个页面刷新之间保持不变的操作的结果将加快页面加载速度，因为您可以使用先前的结果而不必再次创建它。除非您突破服务器上的内存限制，否则您不会看到任何性能下降。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:20:38.213

1.  如果它是每会话对象，会话字典是存储它的合理位置
2.  如果您使用 InProcess 会话存储，则对象的大小永远不会影响页面性能（至少在所有数据导致进程交换之前）。其他会话存储可能会产生轻微影响，具体取决于将数据从例如 SQL 移动到本地进程所需的时间。这将很快，直到您的对象变得非常大。

# php - PHP文件不会重写

> ID：14970661
> 
> 赞同：0
> 
> 时间：2013-02-20T01:15:35.697
> 
> 标签：php, file, permissions, fopen

我制作了一个站点地图，并使用从 mysql 生成的 php 文件进行制作。我更改了主机，现在写入文件时遇到问题。我无法理解一些事情。这是我的例子：

```
<?php 
$xml = 'bla bla xml'; //... some xml generating code
$fp = fopen($_SERVER['DOCUMENT_ROOT'].'/my_site_map.xml', 'w');

   if($fp)
      echo 'we opened it';
   else
      echo 'we failed';

   $fwrite=fwrite($fp, $xml, strlen($xml));

   if($fwrite==false)
      echo "another fail";

   fclose($fp);

   echo "we done";

?> 
```

问题是：我的文件 my_site_map.xml 的权限为 664（rw-rw-r--），如果我从浏览器打开此 php 页面，我将无法使用此脚本，所以，如果我尝试这样做，我会看到：“我们失败了又失败了”；但是如果我通过 crontab 打开它并看到一个日志文件，我可以看到：“我们打开它我们完成了”。我正是想要这个，但主要问题是文件没有被重写。为什么？我该如何解决这个问题？谢谢。

我的服务器是 nginx 而不是 Apache，没想到这个信息会有价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:22:48.033

好吧，我没有足够的代表发表评论，所以这必须是一个答案。

我将在黑暗中刺伤并说该文件归您的用户或根用户所有，而不是运行网络服务器的进程。该文件也不属于运行 webserver 进程的组。

因此，要么 chown/chgrp 由正在运行的 apache(?!) 进程拥有的文件，例如 chown apache 文件，要么将文件设置为对每个人都有写权限，例如 chmod 666 文件

不要 chmod 777 如上所述，除非它是一个可执行文件并且您希望任何人都能够运行它。第一个解决方案是比仅仅授予任何人对文件的读取权限更好的做法。

编辑：在对上面原始答案的评论的评论中，如果文件不是可执行文件，那么不要给它 7 以获得任何权限。6 是读/写的，适用于您要打开写入的文本文件（即使是 2 也是如此）。

编辑 2：尝试捕获 fopen 函数在 try catch 块中运行的任何异常：

```
try { 
    $fp = fopen($_SERVER['DOCUMENT_ROOT'].'/my_site_map.xml', 'w'); 
} catch (Exception $e) { 
    echo "The error is" . $e->getMessage(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:28:07.930

对于 PHP 代码，这里是动态更改它的链接。您可以将其更改为进行编辑的内容，然后根据需要将其更改回来。

[http://php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)

[http://php.net/manual/en/function.chown.php](http://php.net/manual/en/function.chown.php)

[http://php.net/manual/en/function.chgrp.php](http://php.net/manual/en/function.chgrp.php)

示例包含在文档的每个链接中。找到最适合您的工作的权限。没有一种适合所有人的权限，因为它实际上取决于您的最终产品（Web 应用程序、页面等）。

# bash - 为什么子shell失败时bash标志-e不退出？

> ID：14970663
> 
> 赞同：23
> 
> 时间：2013-02-20T01:15:50.483
> 
> 标签：bash

我在这里有点困惑。我的目标是当脚本中的任何命令失败时，让 bash 脚本以非零退出代码退出。使用 -e 标志，我认为情况会如此，即使在使用子外壳时也是如此。下面是一个简化的例子：

```
#!/bin/bash -e

(false)

echo $?
echo "Line reached!" 
```

这是运行时的输出：

```
[$]>Tests/Exec/continuous-integration.sh 
1
Line reached! 
```

Bash 版本：CentOS 上的 3.2.25

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T01:31:51.050

似乎这与您的`bash`. 在我可以访问的机器上，bash 版本 3.1.17 和 3.2.39 会表现出这种行为，而 bash 4.1.5 则不会。

虽然有点难看，但适用于两个版本的解决方案可能是这样的：

```
#!/bin/bash -e

(false) || exit $?

echo $?
echo "Line reached!" 
```

bash 源代码更改日志中有一些与`set -e`选项错误相关的注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-18T22:57:40.793

我在 El Capitan 之前的 SuSE 11.3 和 Mac OS 上的 bash 版本 3.2.51 中看到了这种行为。El Capitan 上的 Bash 3.2.57 具有“正确”的行为，即像 bash 4。

但是，上面提出的解决方法是添加“|| exit $?” 在 subshel​​l 的结束括号之后，无论什么版本的 bash，都会破坏 -e 标志的意图。来自 man bash：

> -e 如果简单命令（参见上面的 SHELL GRAMMAR）以非零状态退出，则立即退出。如果失败的命令是紧跟在 while 或 until 关键字之后的命令列表的一部分、if 语句中测试的一部分、&& 或 || 的一部分，则 shell 不会退出 列表， ...

一个子shell，后跟“|| exit $?” 显然算作命令列表；并且 bash -e 标志将不适用于子外壳内的任何命令。尝试一下：

```
$ set -e
$ ( echo before the error; false; echo after the error, status $?; ) || echo after the subshell, status $?
before the error
after the error, status 1
$ 
```

因为子shell 后跟||，所以即使使用set -e，也会运行“错误后回显”。不仅如此，子shell退出0，因为那个“回声”跑了。所以“||退出$？” 甚至不会运行“退出”。可能不是我们想要的！

据我所知，以下公式与 bash 版本兼容，无论它们是否在 subshel​​l 之后尊重 bash -e 。如果碰巧重置了 -e 标志，它甚至会正常运行：

> 在 bash 脚本中每个子 shell 的右括号之后立即添加以下行：

```
case $?/$- in ( 0/* ) ;; ( */*e* ) exit $? ;; esac # honor bash -e flag when subshell returns 
```

# android - Android - Level、DBM 和 ASU 中的信号强度

> ID：14970667
> 
> 赞同：5
> 
> 时间：2013-02-20T01:16:15.493
> 
> 标签：android, signal-strength

我目前正在为希望以设定的时间间隔收集有关信号强度的数据的客户编写应用程序。

目前我正在使用这段代码：

```
private static class MyPhoneStateListener extends PhoneStateListener
{
  @Override
  public void onSignalStrengthsChanged(SignalStrength signalStrength)
  {
     super.onSignalStrengthsChanged(signalStrength);
     telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_NONE);
     InfoStore.setSignal(String.valueOf(signalStrength.getGsmSignalStrength()));
  }
}; 
```

这很好用，但是客户想要两个级别的信号强度（我猜有多少条？）、DBM 和 ASU。

任何人都知道如何使用这些不同的形式读取信号强度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-17T21:07:58.023

正如 Charles Ma 和 Kevin Krumwiede 所提到的，相关的 Android 方法是隐藏的（可能是有充分理由的），但是仍然可以通过反射获取值。因此，原始问题的一种解决方案：

```
private class MyPhoneStateListener extends PhoneStateListener
{
    public static final int INVALID = Integer.MAX_VALUE;

    public int signalStrengthDbm = INVALID;
    public int signalStrengthAsuLevel = INVALID;

    @Override
    public void onSignalStrengthsChanged(SignalStrength signalStrength)
    {
        signalStrengthDbm = getSignalStrengthByName(signalStrength, "getDbm");
        signalStrengthAsuLevel = getSignalStrengthByName(signalStrength, "getAsuLevel");
    }

    private int getSignalStrengthByName(SignalStrength signalStrength, String methodName)
    {
        try
        {
            Class classFromName = Class.forName(SignalStrength.class.getName());
            java.lang.reflect.Method method = classFromName.getDeclaredMethod(methodName);
            Object object = method.invoke(signalStrength);
            return (int)object;
        }
        catch (Exception ex)
        {
            return INVALID;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:01:49.020

在 android 4.x 中，SignalStrength 类具有 getAsuLevel、getDbm 以及 getLevel (bars) 方法。

如果您需要它适用于较旧的 android 版本，请查看源代码，您可以复制这些方法的实现。 [http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/telephony/SignalStrength.java/](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/telephony/SignalStrength.java/)

您唯一无法获得的是旧 android 版本中的 Lte 测量值，但您可能可以使用 java 反射来查看 getLte* 方法是否存在并调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T10:37:11.030

计算 dBm

```
int SignalStrength_ASU = signalStrength.getGsmSignalStrength();
int SignalStrength_dBm = (2 * SignalStrength_ASU) - 113; // -> dBm 
```

# ruby - 使用 Puppet manifest 自动创建 Nagios 主机组

> ID：14970671
> 
> 赞同：2
> 
> 时间：2013-02-20T01:16:28.480
> 
> 标签：ruby, linux, monitoring, puppet, nagios

`hostgroup`只有当该主机组的第一个（或至少一个）成员上线时，有没有办法创建 Nagios ？

我尝试使用 Puppet `Storeconfigs`：客户端节点导出`nagios_hostgroup`资源：

```
@@nagios_hostgroup { 'cloud-app':
    alias => "Application Servers",
} 
```

并且服务器节点收集它：

```
Nagios_hostgroup <<| |>> { notify => Service['nagios'] } 
```

它适用于第一个节点，但一旦该主机组的第二个节点上线并尝试导出相同的资源，就会出现“重复定义”错误。

`hostgroup`在 Nagios 服务器清单中指定（并`nagios_host`改为导出）最初解决了这个问题，但这种方法的最大问题是：在多主机组配置中，Nagios 直到每个主机组中的至少一个成员上线后才会启动。这给我们带来了极大的不便。由于所有主机组都是在 Nagios 服务器配置期间创建的，因此 Nagios 在配置最后一个主机组的第一个成员之前拒绝启动。对我们来说，最多需要 30 分钟。此问题是否有任何解决方法/修复？任何指针将不胜感激。干杯！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-25T21:07:56.730

比这更简单：您可以简单地要求 Nagios 不要抱怨没有成员的主机组。正如[本线程](http://comments.gmane.org/gmane.network.nagios.user/73484)中所讨论的，从 Nagios 3.3.1 开始，您可以在主配置中使用 allow_empty_hostgroups_assignment=1 指令来启动 Nagios。在 3.4.0 和更新版本中，这些绑定中也允许服务依赖。

# c# - 卸载我要卸载的 texture2D

> ID：14970672
> 
> 赞同：0
> 
> 时间：2013-02-20T01:16:36.790
> 
> 标签：c#, xna, texture2d

我想在不卸载所有内容的情况下卸载一些 Texture2D。

我应该为以后应该卸载的每个 Texture2D 创建一个 ContentManager 吗？
这些Texture2D不必同时卸载）

有些东西我没看懂，但我不知道是什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:18:10.537

简短的回答是肯定的......尽管我怀疑您可能希望为每个内容管理器选择纹理组。例如，给定关卡/场景的所有纹理等。

# http - 这些天所有主要浏览器/代理都支持带有哈希的 301 重定向吗？

> ID：14970674
> 
> 赞同：1
> 
> 时间：2013-02-20T01:17:04.327
> 
> 标签：http, http-status-code-301, http-redirect

我在这里找到了一些信息：[Redirect 301 with hash part (anchor) #](https://stackoverflow.com/questions/1229203/redirect-301-with-hash-part-anchor)，但并没有真正回答我的问题。

我创建了一个 SPA，它使用 Sammy.js 基于 URL 哈希进行路由。现在我的网站上有另一个页面（可能还有其他网站），它从用户那里收集一些信息，然后需要使用特定路线将它们重定向到我的 SPA。这个另一个页面是 ASP.NET 3.5，所以我使用这个代码，它只是做一个 301 重定向：

```
Respone.Redirect("/#" + folderID); 
```

**当我在 Firefox 中测试时它可以正常工作，但我目前无法访问所有主要浏览器，并且还想知道这是否也适用于大多数代理 - 或者代理是否会从 URL 中删除#hash 部分？**

我知道哈希部分很特殊，在某些情况下只是客户端。例如，我知道我无法读取由 JavaScript 设置的哈希值，例如 ASP.NET 回发、表单提交或 AJAX 请求。

但是，对于这种非常具体的用法，我不想阅读它，我只是想设置它..这是否被广泛接受和强大？我知道带有哈希标签的基本超链接可以工作，即使跨域也是如此，但当然这些超链接并没有进行 301 重定向（主要是客户端），所以并不完全相同。

# playframework-2.0 - 在 Play Framework 2 应用程序中检索端口号

> ID：14970677
> 
> 赞同：7
> 
> 时间：2013-02-20T01:17:11.157
> 
> 标签：playframework-2.0

问题是：我如何检索播放正在侦听的端口号，无论它是如何定义的（配置、命令行参数或根本没有）。

这个答案[Retrieving port number in-application using Play Framework](https://stackoverflow.com/questions/11179383/retrieving-port-number-in-application-using-play-framework)必须适用于 Play v1，因为该代码无法编译。

在 Play 2 Java 中有：

```
Integer port = Play.application().configuration().getInt("http.port"); 
```

这不会返回实际的端口号，至少不是在所有情况下。如果 Play 运行为：

```
run 80 -Dhttp.address=example.com 
```

然后它返回`null`。

如果 Play 运行为

```
run -Dhttp.port 80 -Dhttp.address=example.com 
```

然后在默认端口 (9000) 上开始播放。

正如 biesior 指出的那样，它通过两次提及端口来起作用：

```
play -Dhttp.port=80 "run 80" 
```

这当然不是最佳的，因为一个是 Play 实际使用的，另一个是它报告的。

但它会回答我关于开发模式的问题。然而，正如文档所说，Play 永远不应该`run`在 prod 中运行。那么`start`命令的等价物是什么，没有更好，更安全的方法吗？（我对 Java 版本感兴趣，但其他人可能也想了解 Scala。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:52:17.147

在开发模式下运行，您需要使用双符号

```
play -Dhttp.port=80 "run 80" 
```

不幸的是，您必须对默认端口执行相同的操作

```
play -Dhttp.port=9000 "run 9000" 
```

所以我只是建议编写 shell 脚本（或 Windows 中的 .bat），以便从所有必需的参数开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T17:21:16.107

我正在使用这个 Scala 片段来确定 Play 的监听端口。不幸的是，我不得不硬编码一些默认值，以防`-Dhttp.port=...`未指定。

```
val listenPort =
  if (!Play.isTest) {
    System.getProperty("http.port", "9000")
  }
  else {
    // Not on classpath: play.api.test.Helpers.testServerPort
    // Instead, duplicate its implementation here:
    System.getProperty("testserver.port", "19001")
  } 
```

我也想知道是否没有更好的方法，例如`Play.port`但我没有找到任何东西——除了你的问题:-)

`-Dhttp.port=80`（在你的例子中，它不应该是`-Dhttp.port 80`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T06:03:18.160

无论端口如何指定，我都找到了一种获取端口的方法。使用反向路由获取 Call 对象，并使用 absoluteUrl() 方法获取您的操作的绝对 url，其中包含端口。代码片段：

```
public class RouteController extends Controller {
public  Promise<Result> getPortAction() {
    Call call = com.mycom.routes.RouteController.getPortAction();
    String absoluteUrl = call.absoluteURL(request());
    //Here absoluteUrl would be like http://localhost:9002/...., 9002 would be the port.
    ...
} } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T09:54:57.147

从 play2.8.x 开始，看起来我们可以使用 RequestHeader.host [https://www.playframework.com/documentation/2.8.x/api/java/play/mvc/Http.RequestHeader.html#host--](https://www.playframework.com/documentation/2.8.x/api/java/play/mvc/Http.RequestHeader.html#host--) 并且与另一个问题[play framework2 中的 RequestHeader.secure 一起：找出应用程序是在 http 还是 https 上运行，](https://stackoverflow.com/questions/14007946/play-framework2-find-out-if-an-app-is-running-on-http-or-https/70197235#70197235)我们甚至还可以确定它是 https 还是 http

# html - 修改图片的大小

> ID：14970680
> 
> 赞同：1
> 
> 时间：2013-02-20T01:17:44.260
> 
> 标签：html

I have a image with a resolution:

```
<iframe src="....?resolution=640x480" width="800" height="452" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
```

I change the width of the image, and the image doesn't change. If I specify a width of less than 640 in `width="800"`, the image's size reduces, but more than 640 the image remains unchanged. Why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:19:46.070

You have an `<iframe>`, not an image, and its contents won’t scale beyond the actual resolution of the image (as you can see in the URL, that’s 640 pixels wide).

If you want an actual image, use `<img>`.

# c# - 如何在 List 中有效地复制 ArrayList.BinarySearch .BinarySearch？

> ID：14970681
> 
> 赞同：3
> 
> 时间：2013-02-20T01:18:02.760
> 
> 标签：c#, generics, arraylist, binary-search

我正在尝试将旧项目从使用 ArrayList 集合升级到 List。一切都很顺利，除了转换 ArrayList.BinarySearch。虽然 List 具有相应的方法，但 ArrayList.BinarySearch 具有接受[任意对象](http://msdn.microsoft.com/en-us/library/b4y1ah87%28v=vs.90%29.aspx)的重载，而 List.BinarySearch 需要[T 类型的对象](http://msdn.microsoft.com/en-us/library/ftfdbfx6%28v=vs.90%29.aspx)。下面的例子。

如何有效地用 List 替换这个 ArrayList 功能？还是我必须自己动手？

```
class Pod {
   public DateTime Start { get; set; }
}

class TimeRange: IComparer {
    TimeSpan StartsAt { get; set; }
    ITimeRangeComparer TimeComparer { get; set; }
    public int Compare(object x, object y) {
       // there is more to it, but basically compares time ranges
       return comparer.Compare((TimeRange) x, (TimeRange) y);
    }        
}

class Manager {
   void DoStuff() {
        ArrayList alPods = GetPodsAL();
        List<Pod> lstPods = GetPodsLST();
        int stopIndex;

        TimeRange startPoint = GetStartPoint();
        TimeRange stopPoint = GetStopPoint();

        // ArrayList works fine
        stopIndex = alPods.BinarySearch(stopPoint, startPoint.TimeComparer);

        // Fails because the method demands that `stopPoint` be of type Pod
        stopIndex = lstPods.BinarySearch(stopPoint, startPoint.TimeComparer);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:18:49.253

要使用相同的方法`ArrayList.BinarySearch`，请将您的转换`List<T>`为数组并调用`Array.BinarySearch(Array, object)`. 不幸的是，您需要转换/复制到新数组。

```
List<SomeType> list;
SomeType value;
// ...
Array.BinarySearch(list.ToArray(), value) 
```

不过，我确实质疑您的方法，因为 a`List<T>`是强类型的，它只会包含 type `T`。如果由于某种原因您不确定该类型是否属于列表中的类型，请事先检查或制作一个扩展方法来为您执行此操作。

```
public static class ListExtensionMethods
{
    public static int BinarySearch<T>(this List<T> list, object value)
    {
        if (value is T)
            return list.BinarySearch((T)value);
        return -1;
    }
} 
```

# android - 如何在允许用户与地图交互的同时向 Google 地图视图添加点？

> ID：14970685
> 
> 赞同：0
> 
> 时间：2013-02-20T01:18:53.190
> 
> 标签：android, android-mapview, concurrentmodification

我有一个线程接收从服务器发送的地图点，这些点被添加到`MapView`. 这很好用，但是如果我与`MapView`（例如放大、平移等）进行交互，我会得到一个`ConcurrentModificationException`，那么如何在向 中添加点时允许访问用户`MapView`？

```
02-20 01:44:26.566: E/AndroidRuntime(9448):     FATAL EXCEPTION: main
02-20 01:44:26.566: E/AndroidRuntime(9448):     java.util.ConcurrentModificationException
02-20 01:44:26.566: E/AndroidRuntime(9448):     at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:569)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:41)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at com.google.android.maps.MapView.onDraw(MapView.java:532)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.View.draw(View.java:13707)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.View.draw(View.java:13591)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.View.draw(View.java:13589)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.View.draw(View.java:13589)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.View.draw(View.java:13589)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.View.draw(View.java:13710)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.widget.FrameLayout.draw(FrameLayout.java:467)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2211)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2281)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2177)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.Choreographer.doFrame(Choreographer.java:532)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.os.Handler.handleCallback(Handler.java:725)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.os.Looper.loop(Looper.java:137)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-20 01:44:26.566: E/AndroidRuntime(9448):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:55:25.497

您是否尝试过使用新的地图 API？就我个人而言，我发现它更容易使用，也很容易从旧 API 更改为新 API。

链接：[https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

我发现特别改进的一件事是地图上的绘图。不再有很多溢出等等。使用新 API 添加引脚的示例如下：

```
 final GoogleMap map = this.getMap();
    final MarkerOptions marker = new MarkerOptions();
    marker.position(latlng);
    marker.draggable(false);
    marker.icon(BitmapDescriptorFactory.fromResource(drawable));
    map.addMarker(marker); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:39:54.567

虽然在后台线程中从服务器接收积分是合适的，但您实际上应该在 UI 线程中添加/更新积分。这应该可以防止任何并发修改问题。并且只要添加/更新过程不太繁重，就不会显着干扰用户体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:32:28.907

我试图提取和清理一些使用旧 api 的旧代码。亮点是：

1.  创建尚未出现在地图上的叠加层
2.  绘制和以其他方式准备覆盖
3.  将叠加层添加到地图
4.  强制地图重绘

将此方法添加到您的活动中

```
// check if overlay we are adding was already added
final List<Overlay> listOfOverlays = this.mMapView.getOverlays();
if ((this.mPinsOverlay != null) && listOfOverlays.contains(this.mPinsOverlay))
{
    listOfOverlays.remove(this.mPickupOverlay);
}

// create overlay
this.mPinsOverlay = new PinsOverlay();

// add overlay to map
listOfOverlays.add(this.mPinsOverlay);

// force map to redraw
this.mMapView.postInvalidate(); 
```

自定义覆盖类，不需要但保持整洁。

```
public class PinsOverlay extends Overlay
{
    public PinsOverlay()
    {
        super();
    }

    @Override
    public boolean draw(final Canvas canvas, final MapView mapView, final boolean shadow, final long when)
    {
        super.draw(canvas, mapView, shadow);

        // draw your pins here

        return true;
    }
} 
```

# wordpress - WordPress 自动限制帖子 - 阅读更多链接文本 - 在新窗口中打开

> ID：14970689
> 
> 赞同：0
> 
> 时间：2013-02-20T01:19:26.743
> 
> 标签：wordpress, limit, posts

我是新手。我在我的网站上使用“WP Limit Posts Automatically”插件，并将“继续阅读”作为阅读更多链接文本。这个“继续阅读”，我已经放在帖子里了。我想要那个 - 当我应该点击“继续阅读”时，它应该在一个新窗口中打开。但现在，它正在同一个窗口中打开。请帮我。我要尽快。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:14:45.090

如果您编辑插件文件“wp-limit-posts-automatically.php”，在第 70、123 和 145 行替换

```
echo " <a href='" .get_permalink(). "' rel=\"nofollow\">".utf8_encode($lpa_post_linktext)."</a>"; 
```

和

```
echo " <a href='" .get_permalink(). "' rel=\"nofollow\" target=\"_blank\">".utf8_encode($lpa_post_linktext)."</a>"; 
```

“_blank”的目标将在新选项卡/窗口中打开链接。

希望有帮助！

# .net - Powershell - IO.Directory - 在所有子目录中查找文件类型

> ID：14970692
> 
> 赞同：4
> 
> 时间：2013-02-20T01:19:38.450
> 
> 标签：.net, powershell

我在另一篇文章中遇到了这段代码，它几乎可以满足我的需要，但不知道如何修改它以查找特定的文件类型，即 *.bak、*.txt 等。我正在使用 Powershell 和 [System .IO.DirectoryInfo] 因为就像其他人所说的那样，使用 Get-ChildItem 在网络上太慢了。我认为它就像 $fileEntries = [IO.Directory]::GetFiles("C:\", "* .bak")，但它仍然返回每个目录中的每个文件。--PS/.NET 新手

```
try
{
       $fileEntries = [IO.Directory]::GetFiles("C:\")
       [System.IO.DirectoryInfo]$directInf = New-Object IO.DirectoryInfo("C:\")
       $folders = $directInf.GetDirectories()
}
catch [Exception]
{
       $_.Exception.Message
       $folders = @()
 }

foreach($fileName in $fileEntries) 
{

      #[Console]::WriteLine($fileName); 

}

Remove-Variable -ErrorAction SilentlyContinue -Name fileEntries 

foreach($folder in $folders)
{
    recurse("C:\" + $folder + "\")
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:42:47.707

这将遍历每个扩展，搜索根目录和子目录中的所有文件。确保您对所有目录都拥有正确的权限，尤其是当您从 C:\ 作为 root 运行时。

```
$Extensions = @(".bak",".csv",".txt")

Foreach ( $Extension in $Extensions )
{
   [System.IO.Directory]::EnumerateFiles("C:\","*$Extension","AllDirectories")
} 
```

此方法仅适用于运行 .Net 4.0 或更高版本的 Powershell。要检查和更新 .Net 的版本：

```
$PSVersionTable

Name                           Value
----                           -----
CLRVersion                     2.0.50727.4971
BuildVersion                   6.1.7600.16385
PSVersion                      2.0
WSManStackVersion              2.0
PSCompatibleVersions           {1.0, 2.0}
SerializationVersion           1.1.0.1
PSRemotingProtocolVersion      2.1 
```

CLRVersion 值是 .net 版本。

更新配置文件如下：

```
$Config = @"
<?xml version="1.0"?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0.30319"/>
        <supportedRuntime version="v2.0.50727"/>
    </startup>
</configuration>
"@

$Config > $PSHOME\Powershell.exe.config 
```

重新启动 Powershell 会话并验证 $PSVersionTable 变量中的 CLRVersion 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T22:12:17.100

这是一个简单的 PowerShell 脚本，用于按年、月和日将目录中的许多文件移动到结构化目录中。这非常快，我有超过 500K 的文件。

```
$listofFiles =   [System.IO.Directory]::EnumerateFiles("D:\LotsOfFiles","*.*","TopDirectoryOnly")

$listofFiles |% {
   $file = New-Object System.IO.FileInfo($_)    
   $date = Get-Date ($file.CreationTime)
   $filepath = ("{0}\{1:00}\{2:00}-{3}\{4:00}\" -f "D:\LotsOfFiles", $date.year, 
   $date.month, $date.toString("MMM"), $date.day)
   Write-Output ("Move: {0} to {1}" -f $file.Fullname, $filepath)

   if (! (Test-Path $filepath)) {       
      new-item -type Directory -path $filepath      
   }

   move-item $file $filepath
} 
```

这可能可以改进，但它有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T22:31:10.637

这在创建配置文件以使用 .NET 4.0 框架后起作用：

```
try{
    $path = "\\$Server\$($drive.replace(':','$'))"
    foreach ($filepath in [System.IO.Directory]::EnumerateFiles($path,"*.bak","AllDirectories"))
       {
          $file = New-Object System.IO.FileInfo($filepath)
          write-host $file
          # insert file into database table
       }
  }
catch [UnauthorizedAccessException]
  {
     $exception = $_.Exception.Message #I don't need to write/insert exception
  } 
```

# c - copy_to_user 与 memcpy

> ID：14970698
> 
> 赞同：14
> 
> 时间：2013-02-20T01:20:46.103
> 
> 标签：c, linux-kernel, linux-device-driver, memcpy

我一直被告知（在书籍和教程中）在将数据从内核空间复制到用户空间时，我们应该使用 copy_to_user() 并且使用 memcpy() 会导致系统出现问题。最近我错误地使用了 memcpy() 并且它工作得非常好，没有任何问题。**为什么我们应该使用 copy_to_user 而不是 memcpy()**

我的测试代码（内核模块）是这样的：

```
static ssize_t test_read(struct file *file, char __user * buf,
             size_t len, loff_t * offset)
{
    char ani[100];

    if (!*offset) {
        memset(ani, 'A', 100);
        if (memcpy(buf, ani, 100))
            return -EFAULT;
        *offset = 100;
        return *offset;
    }

    return 0;
}

struct file_operations test_fops = {
    .owner = THIS_MODULE,
    .read = test_read,
};

static int __init my_module_init(void)
{
    struct proc_dir_entry *entry;

    printk("We are testing now!!\n");
    entry = create_proc_entry("test", S_IFREG | S_IRUGO, NULL);
    if (!entry)
        printk("Failed to creats proc entry test\n");

    entry->proc_fops = &test_fops;
    return 0;
}
module_init(my_module_init); 
```

从用户空间应用程序，我正在阅读我的`/proc`条目，一切正常。

查看 copy_to_user() 的源代码表明它也是简单的 memcpy()，我们只是尝试使用 access_ok 并执行 memcpy 检查指针是否有效。

所以**我**目前的理解是，**如果我们确定我们传递的指针，memcpy() 总是可以用来代替 copy_to_user**。

如果我的理解不正确，请纠正我，并且**任何 copy_to_user 有效且 memcpy() 失败的示例都将非常有用**。谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-20T01:31:23.273

这有几个原因。

第一，安全。因为内核可以写入它想要的任何地址，如果你只是使用你获得并使用的用户空间地址`memcpy`，攻击者可以写入另一个进程的页面，这是一个巨大的安全问题。`copy_to_user`检查目标页面是否可被当前进程写入。

还有一些架构方面的考虑。例如，在 x86 上，目标页面必须固定在内存中。在某些架构上，您可能需要特殊说明。等等。Linux 内核的可移植性目标需要这种抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-30T13:05:28.537

这个答案可能会迟到，但无论如何`copy_to_user()`，它的姐妹`copy_from_user()`都会对用户传递的参数和缓冲区大小进行一些大小限制检查，`size`因此读取方法为：

```
char name[] = "This message is from kernel space";
ssize_t read(struct file *f, char __user *to, size_t size, loff_t *loff){

    int ret = copy_to_user(to, name, size);
    if(ret){
        pr_info("[+] Error while copying data to user space");
        return ret;
    }
    pr_info("[+] Finished copying data to user space");
    return 0;
} 
```

并且用户空间应用程序读取`read(ret, buffer, 10);`正常，但将 10 替换为 35 或更多，内核将发出此错误**：**

```
Buffer overflow detected (34 < 35)! 
```

并导致复制失败以防止内存泄漏。同样的，`copy_from_user()`它也会进行一些内核缓冲区大小检查。

* * *

这就是为什么你必须使用`char name[]`而不是`char *name`因为使用指针（不是数组）使得无法确定大小，这将使内核发出此错误：

```
BUG: unable to handle page fault for address: ffffffffc106f280
#PF: supervisor write access in kernel mode
#PF: error_code(0x0003) - permissions violation 
```

希望这个答案在某种程度上有所帮助。

# mysql - RegEx 应用是否正确？

> ID：14970704
> 
> 赞同：-1
> 
> 时间：2013-02-20T01:21:41.967
> 
> 标签：mysql, regex, mongodb, mapreduce

尝试将以下 sql 查询转换为 map reduce mongodb：

```
select
    100.00 * sum(case 
            when p_type like 'PROMO%'
            then l_extendedprice*(1-l_discount) 
            else 0
            end) / sum(l_extendedprice * (1 - l_discount)) as promo_revenue
from 
    lineitem, 
    part
where 
    l_partkey = p_partkey
    and l_shipdate >= date '1995-09-01'
    and l_shipdate < date '1995-09-01' + interval '1' month; 
```

我在上面的集合中使用过：

```
{
    "_id" : ObjectId("511b7d1b3daee1b1446ecdfe"),
    "l_linenumber" : 1,
    "l_quantity" : 17,
    "l_extendedprice" : 21168.23,
    "l_discount" : 0.04,
    "l_tax" : 0.02,
    "l_shipdate" : ISODate("1996-03-13T03:00:00Z"),
    "l_commitdate" : ISODate("1996-02-12T03:00:00Z"),
    "l_receiptdate" : ISODate("1996-03-22T03:00:00Z"),
    "l_comment" : "blithely regular ideas caj",
    "partsupp" : {
        "ps_availqty" : 6157,
        "ps_supplycost" : 719.17,
        "ps_comment" : "blithely ironic packages haggle quickly silent platelets",
        "ps_partkey" : {
            "p_partkey" : NumberLong(155190),
            "p_name" : "slate lavender tan lime lawn",
            "p_mfgr" : "Manufacturer#4",
            "p_brand" : "Brand#44",
            "p_type" : "PROMO BRUSHED NICKEL"
        }
    }
} 
```

这个mapreduce：

```
 db.runCommand({
    mapreduce: "lineitem",
    query: {
        l_shipdate: {'$gte': new Date("Sept 01, 1995"), '$lt': new Date("Oct 01, 1995")}
    },
    map: function() {
        var data = {promo_revenue:0, divisor:0, dividendo: 0 };
        var pattern = /PROMO$/;
        var discount = 1 - this.l_discount;
        var revenue = this.l_extendedprice * discount;

            if(this.partsupp.ps_partkey.p_type.match(pattern)!= null){
                data.divisor = revenue;
            }else{
                data.divisor = 0;
            }

            data.dividendo = revenue;
            emit("PROMO_REVENUE", data);
    },
    reduce: function(key, values) {
        var data = {promo_revenue:0, divisor:0, dividendo: 0 };
        for (var i = 0; i < values.length; i++) {
            data.divisor += values[i].divisor;
            data.dividendo += values[i].dividendo;
        }

        var resultado = data.divisor / data.dividendo;
        data.promo_revenue = 100.00 * resultado;

        return data;
    },
    out: 'query014'
 }); 
```

我检索到这个答案：

```
{ "_id" : "PROMO_REVENUE", "value" : { "promo_revenue" : 0, "divisor" : 0, "dividendo" : 2761949328.227077 } } 
```

问题：

我应用的正则表达式是否正确？奇怪的是除数永远为零。只有当除数为零时，答案是否正确？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:24:01.340

`LIKE 'PROMO%'`不是正则表达式，而是`%`“任何事物的零个或多个字符”的通配符。正则表达式等价物可能是`/PROMO.*/`. `/PROMO$/`意思是“以 PROMO 结尾”。

# c# - 添加 50 张图片的更简单方法？

> ID：14970705
> 
> 赞同：-2
> 
> 时间：2013-02-20T01:21:42.130
> 
> 标签：c#

所以我得到了这段代码

```
namespace kortspel
{
    public partial class Form1 : Form

    {

        ArrayList kortlek = new ArrayList();
        Image c1 = new Bitmap("C:/Users/Mert95/Documents/Visual Studio 2012/Projects/kortspel/Spelkort/c1.png"); 
```

而且我不想添加 50 张具有唯一名称的图片，例如 Image c2 = blablabla。

有人说我需要创建一个循环来添加这 50 张图片，那么有没有更简单的方法而不是在数组中添加 50 张图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:29:39.897

您可以使用[`Directory.GetFiles(string path, string searchPattern)`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)来获取与给定模式匹配的目录中的所有文件的数组。然后，只需像这样循环遍历文件：

```
string path = "C:/Users/Mert95/Documents/Visual Studio 2012/Projects/kortspel/Spelkort/";
string[] files = Directory.GetFiles(path, "*.png");
List<Bitmap> images = new List<Bitmap>();
foreach (var file in files)
{
    images.Add(new Bitmap(file);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:13:55.557

是的，Linq 是一个好方法。

```
string path = @"C:\Users\Public\Pictures\Sample Pictures";
string[] files = Directory.GetFiles(path, "*.jpg");
var result = from jpeg in files.AsEnumerable()
             select Image.FromFile(jpeg); 
```

# javascript - 使用 JavaScript 检测 URL 哈希值的变化

> ID：14970708
> 
> 赞同：32
> 
> 时间：2013-02-20T01:22:13.400
> 
> 标签：javascript, jquery

我正在开发一个基于单页（由于项目限制）并具有动态内容的简单应用程序。我理解动态内容，但我不明白的是如何设置一个脚本，`div`当 URL 中的哈希值发生变化时，该脚本会更改 a 的 html。

我需要一个 JavaScript 脚本才能这样工作：

网址：`http://foo.com/foo.html`div 内容：`<h1>Hello World</h1>`

网址：`http://foo.com/foo.html#foo`div 内容：`<h1>Foo</h1>`

这将如何工作？

请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-20T01:26:19.007

您可以收听该`hashchange`事件：

```
$(window).on('hashchange',function(){ 
    $('h1').text(location.hash.slice(1));
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T01:38:27.993

就个人而言，我会使用[`sammy`](https://github.com/quirkey/sammy)它为您提供模板主题标签的灵活性（添加占位符并能够读回它们）。例如

```
<script src="/path/to/jquery.js"></script>
<script src="/path/to/sammy.js"></script>
<script>
  $(function(){
      // Use sammy to detect hash changes
      $.sammy(function(){
          // bind to #:page where :page can be some value
          // we're expecting and can be retrieved with this.params
          this.get('#:page',function(){
              // load some page using ajax in to an simple container
              $('#container').load('/partial/'+this.params['page']+'.html');
          });
      }).run();
  });
</script>

<a href="#foo">Load foo.html</a>
<a href="#bar">Load bar.html</a> 
```

一个例子可以在这里找到：http: [//jsfiddle.net/KZknm/1/](http://jsfiddle.net/KZknm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-09T04:47:35.163

假设我们有项目列表，每个项目都有一个哈希标签作为#id

```
const markup = `
        <li>
            <a class="results__link" href="#${recipe.recipe_id}">
                <figure class="results__fig">
                    <img src="${recipe.image_url}" alt="${limitRecipeTitle(recipe.title)}">
                </figure>
                <div class="results__data">
                    <h4 class="results__name">${recipe.title}</h4>
                    <p class="results__author">${recipe.publisher}</p>
                </div>
            </a>
        </li>
    `; 
```

现在，当用户单击任何列表项或重新加载（[http://localhost:8080/#47746](http://localhost:8080/#47746)）带有哈希标签的项目时，将触发哈希事件。要接收触发的哈希事件，我们必须在 app.js 中注册哈希事件监听器

```
//jquery: 
['hashchange', 'load'].forEach(event => $(window).on(event, controlRecipe));
//js:
['hashchange', 'load'].forEach(event => window.addEventListener(event, controlRecipe)); 
```

在你的 controlRecipe 函数中捕获 id

```
const controlRecipe = async ()=>{
//jq
  const id =  $(window)..location.hash.replace('#','');
//js
  const id = window.location.hash.replace('#','');
  if(id){
    //console.log(id);
    state.recipe = new Recipe(id);
    try {
      await state.recipe.getRecipe();
      state.recipe.calcTime();
      state.recipe.calcServings();
      console.log(state.recipe);
    } catch (error) {
      alert(error);
    }
  }
} 
```

# php - 已附加另一个变量的 GET 方法

> ID：14970709
> 
> 赞同：0
> 
> 时间：2013-02-20T01:22:18.780
> 
> 标签：php

我需要传递一些 GET 变量。我需要的链接是

index.php?type=door&qty=4

我可以很容易地写这个

```
<a href="index.php?type='.$type.'&qty='.$qty.'"></a> 
```

但我需要从下拉列表中选择 $qty 金额。所以我有

```
<form name="qty" method="GET" action="../../../index.php?door-type="<?php echo $door_model; ?>">';
        <select>
<?php

    for ($front_int=1; $front_int<=99; $front_int++) 
    {
        echo'<option value="'.$front_int.'">'. $front_int . '</option>';
    }
?>
    </select>
<input type="submit" value="front-qty">
</form> 
```

那么如何将这两个值附加到一个值中，以便像使用我创建的第一个链接一样在下一页上获得 $_GET 它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:31:01.910

如果 qty 需要是一个选择，则将该名称赋予选择。此外，通过隐藏字段传递另一个变量，这是非常标准的。祝你好运 ：）

```
<form name="NOT_QTY" method="GET" action="../../../index.php">
    <input type="hidden" name="door-type" value="<?php echo $door_model;?">
    <select name="qty">
<?php

    for ($front_int=1; $front_int<=99; $front_int++) 
    {
        echo'<option value="'.$front_int.'">'. $front_int . '</option>';
    }
?>
    </select>
<input type="submit" value="front-qty">
</form> 
```

# android - 从移动浏览器分析页面加载时间的好方法

> ID：14970712
> 
> 赞同：1
> 
> 时间：2013-02-20T01:22:43.187
> 
> 标签：android, ios, browser, profiler

我想比较移动浏览器（如 iOS Safari、Android 浏览器）之间的页面加载时间。我找不到这些移动浏览器的分析工具。

你有什么好主意吗？

我认为现在一种可能的选择是使用 iOS 的 UIWebView 和 Android 的 WebView 来实现可以检测页面加载事件的简单应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:57:12.257

由于 UIWebView 的限制（[UIWebView 和 Safari 比较](https://stackoverflow.com/questions/11648184/uiwebview-and-safari-comparison)），对于 iOS 使用 UIWebView 创建简单的应用程序来配置页面加载时间并不是一个好主意。

取而代之的是，我可以将网络检查器用于移动 Safari 浏览器。请参阅[此 Apple 文档](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html#//apple_ref/doc/uid/TP40006515-SW11)。

对于 Android，WebView 可以选择通过覆盖[WebViewCient](http://developer.android.com/reference/android/webkit/WebViewClient.html)的事件方法来分析页面加载时间。我找不到适用于 Android 浏览器的类似 iOS 的分析工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-28T23:40:24.840

您可以通过 Chrome 在 Android 上使用远程调试。非常简单。

# objective-c - 可可限制窗口移动区域？

> ID：14970713
> 
> 赞同：-1
> 
> 时间：2013-02-20T01:22:44.757
> 
> 标签：objective-c, macos, cocoa, firemonkey, firemonkey-fm2

我是可可的新手。我在 Windows 中有一个具有 MDI Child 的应用程序。现在我需要将它移植到 MACOS。我知道 Mac 没有那种 MDI Child，所以我尝试设置子窗口只能在主窗口内移动。那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:50:15.913

可能吗？当然。你应该这样做吗？不，Mac 没有 Windows 意义上的 MDI 界面，您不应该尝试伪造它。

完全放弃父窗口。如果主窗口中有工具栏或调色板，请在 Mac 上将它们设为浮动面板。Windows 上的子窗口应该只是 Mac 上的顶级窗口。

# c# - 如何编写一个接收 EXE 安装程序和参数并输出 MSI 的程序？

> ID：14970720
> 
> 赞同：0
> 
> 时间：2013-02-20T01:23:26.650
> 
> 标签：c#, .net, windows-installer, silent-installer

我需要编写一个小程序，最好是在 C# 和 .NET 中，它将安装程序文件 (.exe) 以及使用它运行的参数作为输入并输出 .MSI。

这是推理和我的限制：我在一个不允许系统中的开源（和大多数闭源）应用程序的程序中工作。长话短说为什么会这样，但这就是界限。

但是，我可以根据需要使用 .NET 框架或 Windows API 调用来创建应用程序。

.MSI 选项的原因是在 Windows Server 2008 GPO 中运行 MSI 以通过网络安装更新。这是进行更新的*唯一*选择 --- 我意识到 .MSI 还有其他替代方案，但（与上述原因相关）我们是一个封闭系统，仅使用 GPO。

因此，根据我的原因，有没有人知道哪个 .NET 函数、API 调用或任何东西可以完成这项工作？我想通过正确的函数调用，这将是一个非常简单的应用程序，但我所有的谷歌和 MSDN 搜索都完全枯竭，或者想出随机的免费软件 exe2msi 程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:53:41.867

如果你有一个简单的可执行文件，你可以试试这个工具：[http ://www.itninja.com/community/vincent-van-egmond-windows-installer-wrapper-wizard](http://www.itninja.com/community/vincent-van-egmond-windows-installer-wrapper-wizard)

我没有测试过自己，但似乎其他人已经成功使用它。

# c# - 如何将击键发送到没有窗口的应用程序

> ID：14970722
> 
> 赞同：0
> 
> 时间：2013-02-20T01:23:34.213
> 
> 标签：c#

我正在尝试向没有窗口的应用程序发送一次击键（因为我已使用 StartInfo.CreateNoWindow = True 启动它），因此我无法使用 SendKeys。我查看了 SendMessage 但这似乎不太正确，因为我发送它的程序不处理消息队列。

我通常会使用 StartInfo.RedirectStandardInput 属性并通过 StreamWriter 发送它，但这不起作用，因为它被发送到的应用程序正在寻找实际的键盘击键，而不是从 StandardInput（一个使用 getch 的旧 C++ 程序）。任何人都知道如何将按键发送到没有窗口的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:40:16.713

我过去使用过一个非常有用的库。它可能对您有用，或者至少可以为您指明正确的方向。

[输入管理器](http://www.codeproject.com/Articles/117657/InputManager-library-Track-user-input-and-simulate)

# c# - 将服务器上的最新文件复制到本地目录

> ID：14970725
> 
> 赞同：0
> 
> 时间：2013-02-20T01:23:49.150
> 
> 标签：c#, windows

我试图弄清楚如何将服务器目录中的最新文件复制到 c# 中的本地目录。

我需要对 100 多个目录执行此操作。它们都将复制并重命名到同一个本地目录。

目录都命名为：例如\ServerPath\01、\ServerPath\02、\ServerPath\03 等。

现在我有一个批处理脚本可以做到这一点，但它需要很长时间，因为它会遍历每个目录中的每个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:01:46.100

我的直接想法是“这可能与 Robocopy 吗？？” 我在 Google 上快速搜索了“Robocopy 最近的文件”，并提出了[一篇](http://sirsql.net/blog/2011/7/6/grabbing-the-newest-file-from-subdirectories-using-powershel.html)关于使用 powershell 脚本处理此问题的博客文章。

这至少应该为您提供最新的文件，而不必通过“...每个目录中的每个文件”。

# wordpress - 表单验证错误时打开一个新的重力表单

> ID：14970726
> 
> 赞同：1
> 
> 时间：2013-02-20T01:23:57.623
> 
> 标签：wordpress, forms, validation, gravity

当当前表单验证失败时，我正在寻找打开/启动新重力表单的最佳/最简单方法。示例：用户输入的邮政编码在提交时无效。当表单验证失败时，会打开第二个表单，用于收集用户联系信息，以便在他们的邮政编码可用时通知他们。

有没有人已经有了我无法在搜索中找到的答案或对解决方案有任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:25:14.107

您必须点击“gform_after_submission”操作并使用该表单重定向到另一个页面。 [http://www.gravityhelp.com/documentation/page/Gform_after_submission](http://www.gravityhelp.com/documentation/page/Gform_after_submission)

另一种选择是提供所有可用邮政编码的下拉列表以及附加选项，例如“我的不在列表中”。然后让其他一些具有条件逻辑的字段仅显示“我的不在列表中”值是否被选中。 [http://www.gravityhelp.com/documentation/page/Form_Settings](http://www.gravityhelp.com/documentation/page/Form_Settings)（查找条件逻辑部分）

希望有帮助。

# macos - Homebrew 的 `git` 不使用完成

> ID：14970728
> 
> 赞同：163
> 
> 时间：2013-02-20T01:24:05.600
> 
> 标签：macos, git, autocomplete, zsh

使用 OSX 的 git 时，在我修改一个文件后，我可以简单地执行此操作`git commit <tab>`，这会自动将文件名补全为被修改的文件名。但是，如果我从 homebrew 安装了更新版本的 git 并使用它，该功能将不再起作用（这意味着我按下`<tab>`它只是“询问”我想要在哪个文件上执行它，甚至包括那些没有更改的文件）。

任何人都可以解释为什么以及如何解决这个问题？我更喜欢使用自制的 git，因为它是最新的。

我的 shell 是 zsh，既不安装`bash-completion`也不`zsh-completions`工作（即使遵循自制软件的安装后说明）。

此外，在使用自制软件安装 git 后，它说

```
Bash completion has been installed to: /usr/local/etc/bash_completion.d
zsh completion has been installed to: /usr/local/share/zsh/site-functions 
```

那么我不应该能够使用其中之一吗？

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2013-02-20T01:47:11.187

您正在寻找：

```
brew install git bash-completion 
```

正如warpc的评论所述，您需要将以下内容添加到您`~/.bash_profile`的自制软件的 bash-completion 工作中：

```
if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
fi 
```

安装 bash-completion 公式时的注意事项中提到了上述内容。

* * *

**注意：**如果您使用的是 Bash v4 或更高版本（通过`brew install bash`），那么您将要使用`brew install bash-completion@2`, 来启用选项卡完成添加以下内容，`~/.bash_profile`如警告中所述：

```
export BASH_COMPLETION_COMPAT_DIR="/usr/local/etc/bash_completion.d"
[[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && . "/usr/local/etc/profile.d/bash_completion.sh" 
```

git、docker、youtube-dl 和其他可能包含在`$(brew --prefix)/etc/bash_completion.d/`目录中的完成需要额外的导出。

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2015-01-24T19:25:35.087

这得到了在 OSX 上工作的 git tab 完成，而无需重新启动终端：

```
curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash
echo "source ~/.git-completion.bash" >> ~/.bash_profile
source ~/.bash_profile 
```

编辑：这在 Catalina 的默认 zsh shell 中不起作用。我将默认 shell 改回 bash，它又可以工作了。[https://www.howtogeek.com/444596/how-to-change-the-default-shell-to-bash-in-macos-catalina/](https://www.howtogeek.com/444596/how-to-change-the-default-shell-to-bash-in-macos-catalina/)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-12-20T21:00:55.033

万一其他人犯了我的愚蠢错误，请尝试`brew install git`. 我使用的`git`是 Xcode 附带的，但没有意识到我从未安装 Homebrew 的 git 来获取自动完成功能。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-07-02T11:50:40.697

出于某种原因，我丢失了文件，`$(brew --prefix)/etc/bash_completion`所以@Graham Perks 的正确答案对我不起作用

在我的情况下，它最终的修复是：

```
brew unlink bash-completion
brew link bash-completion 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-08-18T22:33:12.237

我通过找出执行时`$(brew --prefix)/etc/bash_completion`返回的内容解决了这个问题`Permission denied`。所以经过一个简单的：

```
chmod +x $(brew --prefix)/etc/bash_completion 
```

现在一切正常。不过，我想知道为什么 Homebrew`bash_completion`在安装时不会使文件可执行。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-02T16:34:49.190

我有同样的问题，甚至今天早上发现了这篇文章。我通过更新 brew`brew update`然后重新安装 git解决了这个问题`brew reinstall git`。

然后我被通知另一个文件阻止自制链接过程，在我的情况下是`/usr/local/share/zsh/site-functions/git-completion.bash`. 删除文件并运行`brew link git`解决了这个问题。猜猜这只是我们偶然发现的一个糟糕的食谱版本。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-02T21:09:49.623

找到了一个可行的解决方案。它是最近的（16 小时前创作，2 小时前提交），它[直接来自 homebrew](https://github.com/mxcl/homebrew/commit/7564e7d5838220ab4205e9827b41d871d8ef523f)。

`brew install git --without-completions`

刚刚试了一下，终于按预期工作了。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-09-28T06:41:48.650

第 1 步：下载自动完成脚本：

```
cd ~
curl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash 
```

第 2 步：更新 .bash_profile 和 .bashrc

```
echo "source ~/git-completion.bash" >> .bash_profile 
```

通过[https://www.anintegratedworld.com/git-tab-autocomplete-on-osx-10-11-el-capitan/](https://www.anintegratedworld.com/git-tab-autocomplete-on-osx-10-11-el-capitan/)

如果上述方法不起作用，请尝试[https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion](https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-09T08:19:05.893

如果你有`$BASH_VERSION`< 4.1，例如`3.2.57(1)-release`然后继续：

```
brew install bash-completion
# In ~/.bash_profile :
if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
fi 
```

但是，如果您必须`brew install bash`获得版本`4.4.12(1)-release` ，您可以在以下方面使用更好、更完整的补全：

```
brew install bash-completion@2
# In ~/.bash_profile:
[ -f "$(brew --prefix)/share/bash-completion/bash_completion" ] \
&& . "$(brew --prefix)/share/bash-completion/bash_completion" 
```

请注意，某些包（brew、docker、tmux）仍会添加一些完成，`$(brew --prefix)/etc/bash_completion.d/`因此您可以添加：

```
for completion in "$(brew --prefix)/etc/bash_completion.d/"*
do
    . $completion
done 
```

最后，如果由于某种原因您安装 git 的方式没有将其添加到其中任何一个中，您应该能够添加 git 完成脚本：

```
[[ -f $(brew --prefix)/etc/bash_completion.d/git \
|| -f $(brew --prefix)/share/bash-completion/completions/git ]] \
|| curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash \
    -o $(brew --prefix)/etc/bash_completion.d/git 
```

您可以使用上述方法获取并添加它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-09T16:58:43.233

在 2019 年，使用 Bash v5，您无需在您的`.bash_profile`或`.bashrc`

1.  确保您的文件中有以下两行`.bashrc`

```
export BASH_COMPLETION_COMPAT_DIR="/usr/local/etc/bash_completion.d"
[[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && . "/usr/local/etc/profile.d/bash_completion.sh" 
```

2.  下载 git bash 完成脚本 ( `https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash`) 并将其保存`/usr/local/etc/bash_completion.d/`为`git`

就是这样！Bash 将自动获取 git 完成文件并启用完成。

* * *

*旁注：我建议将所有这些更改都放入，`.bashrc`因为这样可以确保当您放入交互式 shell（即 from `pipenv shell`）时，完成将正确加载，因为 bash 将 source`.bashrc`而 NOT `.bash_profile`。*

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-10-29T17:10:10.287

对于 macOS Catalina 上的 bash（*3/30 更新：* Big Sur 也是），如果您还想使用自制软件中的 Bash 5，您需要确保您的**登录 shell**设置为自制软件的 bash，而不是默认值。

要检查您是否需要这样做，请运行`echo ${BASH_VERSION}`. 如果您看到以 3 开头的版本，则说明您没有使用 Brew 的 bash 作为您的登录 shell。

要改变这一点，

1.  打开`System Preferences`-> `Users and Groups`。
2.  右键单击您的用户并选择“高级选项”。您可能需要通过单击左下角的锁来使用密码解锁。
3.  将该`login shell`字段设置为 brew 的 bash 的位置，通常可以在*安装 brew 的 bash 后*`which bash`在终端中运行来找到该位置。我的是。*`/usr/local/bin/bash`*

 *重新启动您的终端，并按照[此出色答案中的说明进行操作](https://stackoverflow.com/a/14970926/1004300)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-30T14:13:19.283

对我来说，我不得不把

```
source $(brew --prefix)/etc/bash_completion 
```

进入`.bashrc`（不是 .bash_profile）以使其正常工作。

“.bash_profile 是为登录 shell 执行的，而 .bashrc 是为交互式非登录 shell 执行的”——来自[.bash_profile 和 .bashrc 之间的区别是什么？](https://apple.stackexchange.com/questions/51036/what-is-the-difference-between-bash-profile-and-bashrc ".bash_profile 和 .bashrc 有什么区别？")在我看来，MacOS Sierra 在打开新终端窗口时不会执行`.bash_profile`，只有`.bashrc`.

我不会把它放在 _bash_profile 中，因为那样我必须重新启动/注销才能使更新生效。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-11-07T19:12:15.607

这在 Mojave (OSX 10.14.1) 中对我有用：

```
brew install bash-completion 
```

然后将以下行添加到您的 ~/.bash_profile：

```
[ -f /usr/local/etc/bash_completion ] && . /usr/local/etc/bash_completion 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-02-20T01:41:14.303

它可能与使用 libedit 而不是 Lion 中的 readline 有关。

尝试在 git 之前安装 readline。

```
brew install readline 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-05-14T12:21:53.373

对于那些已经安装了 brew bash-completion 的人。我没有安装 git 完成脚本，也找不到任何水龙头。

所以我手动添加了它：

`curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o $(brew --prefix)/etc/bash_completion.d/git`

请注意，您必须重命名文件并删除扩展名才能使其正常工作。

如果您没有安装完成或 git，请将其安装在接受的答案中。

`brew install git bash-completion`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-12-24T17:00:42.507

如果你使用 homebrew 安装 git，那么可能不需要安装任何东西来支持 git 补全。“git-completion.bash”文件在某个地方（我的在这里：/usr/local/git/contrib/completion/git-completion.bash）

您需要做的就是找到该文件： sudo find / -type f -name "git-completion.bash"

然后在你的 .bash_profile 中获取它的路径。例如，我需要将此行添加到我的 ~/.bash_profile 中：

```
source /usr/local/git/contrib/completion/git-completion.bash 
```

不要忘记获取您的 ~/.bash_profile 或重新打开终端；）

来自： [how-enable-git-tab-completion-bash-mac-os-x](https://www.linkedin.com/pulse/how-enable-git-tab-completion-bash-mac-os-x-conor-livingston)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-05-13T17:02:08.840

我知道这是一篇旧文章，但您实际上并不需要安装任何其他软件包。

Homebrew 通知您有一个目录，其中包含您需要的所有内容。

`.bash_profile`如果您使用 Bash ，您可以简单地将以下行添加到您的：

```
source /usr/local/etc/bash_completion.d/git-completion.bash 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-06-13T06:04:19.897

如果没有任何效果，可能是因为您有旧版本的`bash`bash 完成脚本，并且该脚本没有获取该`/usr/local/etc/profile.d/bash_completion.sh`脚本的来源。您可以通过在 file 的条件中添加一个简单的 echo 来测试它`/usr/local/etc/profile.d/bash_completion.sh`：

```
 10         if shopt -q progcomp && [ -r /usr/local/Cellar/bash-completion@2/2.11/share/bash-completion/bash_completion ]; then
 11             # Source completion code.
                echo "doing bash completion or not"
 12             . /usr/local/Cellar/bash-completion@2/2.11/share/bash-completion/bash_completion 
```

并打开一个新终端。如果您没有看到回显消息，则条件不会评估为真。就我而言，这是因为`bash`版本太旧，默认来自 mac 3.2.blah。

我确实从 brew 安装了一个更新的 bash，但我忘记了`chsh`，这让我很头疼。`bash --version`将返回 5.1.8 但启用的 shell 仍然是旧的 :) 要测试启用的 bash 你可以做

```
for n in {0..5}
do
  echo "BASH_VERSINFO[$n] = ${BASH_VERSINFO[$n]}"
done 
```

修复是`sudo chsh -s /usr/local/bin/bash`在完成工作之后。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-01-05T20:50:27.880

在 MAC-OS Mojave 10.14 上启用 GIT 命令的自动完成 我是一名开发人员，一直在命令行中使用 GIT。当我考虑开发角度时，我曾经使用命令行执行很多命令来进行 GIT 操作。大多数情况下，MAC OS 没有自动支持我部分支持的命令完成，这很烦人。以及命令建议，这意味着可用于键入字符的命令是什么。因此，键入很长的命令并且大部分是重复性的任务，因为打字错误是非常麻烦的。:(

Tab 补全肯定会更快更容易。不幸的是，在某些 Mac 计算机上默认安装的 git 没有启用制表符补全。

因此，我正在寻找解决问题的方法，并且从网络搜索（例如 StackOverflow、GitHub 以及媒体）中找到了几种解决方案。不幸的是，这些解决方案对我不起作用，并且对多次尝试不同的解决方案感到沮丧。

我正在深入搜索并尝试不同的解决方案，幸运的是，这是一个简单的解决方案。以下是我从几个帖子中收集的步骤，最后它按预期工作。所以我希望与像我一样有这个问题的人分享。

如果你去网络搜索，你可以找到许多提到 git 完成 bash 文件的解决方案。甚至 GitHub 指南也是如此。但我建议您首先检查 git-completion.bash 文件是否已经在您的 MAC 计算机中，其中包含 git-core 或其他来自安装的东西。您可以使用以下命令。

```
sudo find / -type f -name "git-completion.bash" 
```

你会得到以下结果。（根据内容可能会有一些差异）

```
/Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash
/Users/Dilanka/git-completion.bash
/Users/Dilanka/.oh-my-zsh/plugins/gitfast/git-completion.bash
/Users/Dilanka/Downloads/git-completion.bash 
```

我建议你选择从 git-core 安装的

如果您的机器上不存在 git-completion.bash 脚本，请从上面提供的下方检索它，并将其保存到本地机器的 /usr/local/etc/ 中名为 git-completion.bash 的新文件中bash_completion.d/ 目录。

[https://git-scm.com/book/en/v1/Git-Basics-Tips-and-Tricks](https://git-scm.com/book/en/v1/Git-Basics-Tips-and-Tricks)

如果您使用 Bash shell，Git 附带了一个不错的自动完成脚本，您可以启用它。直接从 Git 源代码下载它

[https://github.com/git/git/blob/master/contrib/completion/git-completion.bash](https://github.com/git/git/blob/master/contrib/completion/git-completion.bash)

如果 git-completion.bash 脚本存在于您的机器上，但不在 /usr/local/etc/bash_completion.d/ 目录中，您应该创建该目录并将文件复制到其中。下面的命令将完成这项工作：

```
sudo mkdir /opt/local/etc/bash_completion.d
sudo cp /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash /usr/local/etc/bash_completion.d/git-completion.bash 
```

以上完成后。git-completion.bash 脚本应该存在于本地机器的 /usr/local/etc/bash_completion.d/ 目录中。

现在您需要使用以下命令刷新您的个人资料。它会将您添加的 bash 文件加载到终端上下文中。

```
source ~/.bash_profile 
```

伟大的！！！你已经做到了。只需启动终端窗口并尝试一下。只需输入“git sta”，它将显示如下建议：

```
git sta
stage    stash    status
git chec<TAB> will show git checkout 
```

在这里查看我的 GitHub 帖子：

[https://github.com/DIL8654/Enable-Auto-Completion-of-GIT-commads-on-MAC-OS-Mojave](https://github.com/DIL8654/Enable-Auto-Completion-of-GIT-commads-on-MAC-OS-Mojave)

在这里查看我的中等帖子：

[https://medium.com/@dilanka85/enable-auto-completion-of-git-commands-on-mac-os-mojave-10-14](https://medium.com/@dilanka85/enable-auto-completion-of-git-commands-on-mac-os-mojave-10-14-2d692c100bc)*

# javascript - 未捕获的错误：选择菜单小部件实例没有此类方法“值”

> ID：14970729
> 
> 赞同：3
> 
> 时间：2013-02-20T01:24:13.680
> 
> 标签：javascript, jquery, jquery-ui-selectmenu

我已经安装了 jQuery 的 1.10 版本，并且在尝试将值设置为我一直使用 selectmenu 小部件的方式时出现此错误。

> 错误：未捕获的错误：选择菜单小部件实例没有此类方法“值”

```
$('select.widthOpts').selectmenu('value', wDims.feet); 
```

尝试设置选择菜单的索引时，我也收到相同的错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-22T06:01:18.973

下面的代码也可以正常工作。我正在使用 jQuery 1.10.2 和 jquery-ui 1.11.1

```
$('select.widthOpts').val(wDims.feet).selectmenu('refresh') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T14:22:01.543

你知道有两个版本吗？

[https://github.com/fnagel/jquery-ui/](https://github.com/fnagel/jquery-ui/)（旧，灯丝组的分支工作） [https://github.com/jquery/jquery-ui/tree/selectmenu](https://github.com/jquery/jquery-ui/tree/selectmenu)（新，官方）

新的没有价值或索引方法。

由于您遇到错误，我认为您正在使用新版本。

所以你应该使用`$('select.widthOpts').selectedIndex=index;` where index 是一个整数值，你已经知道 selectmenu 中所需选项的位置

# python - Python无限递归打印所有孩子

> ID：14970730
> 
> 赞同：1
> 
> 时间：2013-02-20T01:24:16.047
> 
> 标签：python, class, recursion

我正在尝试制作具有递归“printAll”方法的树。

我的代码是：

```
class Node(object):
    def __init__(self, children=[], tag=None):
        self.children = children
        self.tag = tag

    def appendChild(self, child):
        self.children.append(child)

    def getChildren(self):
        return self.children

    def printAll(self):
        print self.getChildren()
        for child in self.children:
            child.printAll() 
```

当我运行它时，我得到这个：“调用 Python 对象时超出了最大递归深度”。

我猜这与在调用孩子的 printAll() 方法时将顶级范围传递给孩子有关，从而导致无限循环。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:32:06.877

尝试更改您的默认值`children`：

```
class Node(object):
    def __init__(self, children=None tag=None):
        self.children = children if children is not None else []
        self.tag = tag

    def appendChild(self, child):
        self.children.append(child)

    def getChildren(self):
        return self.children

    def printAll(self):
        print self.getChildren()
        for child in self.children:
            child.printAll() 
```

您可能遇到[“可变默认参数”的情况](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

# javascript - 如果窗口大小太小，如何执行脚本？

> ID：14970737
> 
> 赞同：1
> 
> 时间：2013-02-20T01:24:50.747
> 
> 标签：javascript, jquery, css

这有什么问题？

```
if ((window.innerWidth < 1170)) ? {
    alert("so eng hier!");
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:27:16.613

除了明显的语法错误，问号，什么都没有。也许您的意思是在窗口的调整大小事件中执行该代码块？

```
window.onresize = function(event) {

    if ((window.innerWidth < 1170))  {
        alert("so eng hier!");
    };

} 
```

小心警报，因为它会在每次触发窗口调整大小事件时触发，因此当您尝试调整窗口大小以使其更大时，它会不断弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:27:54.817

它没有错，但它只会在页面加载时触发。如果您希望在用户在查看您的站点时调整窗口大小时发生这种情况，请添加一个侦听器。

```
window.onresize = resize();

var resize = function (){
    if (window.innerWidth < 1170){
        alert("so eng hier!");
    };
}; 
```

啊对。那`?`在里面做什么？检查你的`if`语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:27:13.790

它只被调用一次（大概在页面加载时）。我认为您希望绑定到：

```
$(window).on('resize', function(){
  // check window size here and react when it's too small.
}); 
```

# xslt - XLST 创建一个超链接 http url 搜索查询。连接不起作用

> ID：14970738
> 
> 赞同：0
> 
> 时间：2013-02-20T01:25:07.813
> 
> 标签：xslt, xml-parsing, concatenation

我是编码新手，这是我在这里的第一个问题。我已经搜索并尝试了所有可以连接的示例。

我正在研究使用 XSLT 在生成表的最后一列中创建超链接，其结果/行为方式与...相同

```
<a href="http://www.mysite.com/search/?q[all][]=123456" target="_blank">link</a> 
```

其中 123456 源自`<title_id>`. 我可以在上一栏中返回标题 ID，但将其作为搜索查询附加到超链接是很困难的。

我有 XML（简体）：

```
<response>

    <results>

        <result>

            <tracks>

                <track>

                    <title_id>123456</title_id>

                    <product_id>2</product_id>

                    <track_id>3</track_id> 
```

我有 XSL 从 XML 中提取我需要的内容并创建一个可用于 Web 的表......

```
 <html xsl:version="2.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns="http://www.w3.org/1999/xhtml">

 <body>
 <table border="1" cellpadding="4" cellspacing="0">
 <tr bgcolor="#fb0006" align="center">
  <td><b>#</b></td>
  <td><b>Artist</b></td>
  <td><b>Track</b></td>
  <td><b>Remix</b></td>
  <td><b>ID</b></td>
  <td><b>Link</b></td>
</tr>

 <xsl:for-each select="//response/results/result/tracks/track">

 <tr>
  <td><xsl:number value="position()" format="01" /></td>
  <td><xsl:value-of select="bundle_mirror_artists"/></td>
  <td><xsl:value-of select="track_title"/></td>
  <td><xsl:value-of select="track_mix_title"/></td>
  <td><xsl:value-of select="title_id"/></td>
  <td><a href="{concat('http://www.mysite.com/search/?q[all][]=', '<xsl:value-of select="title_id"/>')}" target="_blank">link </a></td>
 </tr>

 </xsl:for-each>

 </table>
 </body>
 </html> 
```

一切正常，除了 last `<td>`，它要么无法返回任何东西，要么不会解析。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:35:26.410

也许尝试使第二个参数成为变量。

```
<xsl:variable name="title" select="title_id" /> 
```

然后`$title`作为第二个参数传递给 concat。

另外我认为您的 HTML 可能需要正确关闭 <a href="..."> 标记。

# android - 在 Eclipse 和 Maven 中使用 ActionbarSherlock 时出现 POM 错误

> ID：14970741
> 
> 赞同：3
> 
> 时间：2013-02-20T01:25:17.733
> 
> 标签：android, eclipse, android-maven-plugin

我正在开始一个我想用 Eclipse 和 Maven 编译的项目。在命令行上一切正常，如果我删除 Maven 性质，项目在 Eclipse 中运行正常。但是启用 Maven 后，我在 POM 的第一行收到此错误

```
dependency=[com.actionbarsherlock:actionbarsherlock:apklib:4.2.0:compile] 
    not found in workspace 
```

这是我完整的 POM

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.foo.bar</groupId>
    <artifactId>test</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>test</name>
    <properties>
        <java.version>1.6</java.version>
        <platform.version> 4.1.1.4</platform.version>
        <android.platform>16</android.platform>
        <android-support.version>r7</android-support.version>
        <abs-version>4.2.0</abs-version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>support-v4</artifactId>
            <version>${android-support.version}</version>
        </dependency>
        <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>actionbarsherlock</artifactId>
            <version>${abs-version}</version>
            <type>apklib</type>
        </dependency>
    </dependencies>
    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>${android.platform}</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我还注意到 Eclipse->Properties->Android->Library 没有指向 ABS 的链接

我在这个设置中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:51:06.457

和你一样，我用 Maven 和 Eclipse 编译，但是我不使用 maven 特性，因为当我尝试使用它时它太痛苦了。

鉴于您的错误提到 ABS 并且这是一个 APKLIB，它有点被 Maven“伪造”，您可能需要确保将此 APKLIB 安装到您的本地 maven 存储库中。我不相信 Maven 自然支持工作区分辨率，但我可能错了。

如果这不起作用，您可以随时按照我的示例进行设置，并设置 Eclipse 默认方式，这意味着关闭 Maven 特性并使用 Eclipse->Properties->Android->Library 进行链接，正如您所提到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T11:05:51.007

我被困住了，并尝试了以下方法，它奏效了：

右键项目→maven→更新项目配置→全选→享受！

# php - 重写/屏蔽文章内的外部链接

> ID：14970744
> 
> 赞同：1
> 
> 时间：2013-02-20T01:25:46.707
> 
> 标签：php, url-rewriting, rewrite

我想重写/屏蔽我文章中的所有外部 url 并添加`nofollow`和`target="_blank"`. 因此，指向外部站点的原始链接被加密/屏蔽/重写。

**例如：**

```
original link: www.google.com
rewrite it to: www.mydomain.com?goto=google.com 
```

joomla 有一个重写外部链接的插件：[rewrite plugin](http://www.jonijnm.es/web/descargas/category/8-external-links.html?download=8%3aexternal-links)。

但我没有使用 joomla。请看一下上面的插件，它正是我想要的。

**我想要的是？**

```
$article = "hello this is example article I want to replace all external link http://google.com";
$host = substr($_SERVER['HTTP_HOST'], 0, 4) == 'www.' ? substr($_SERVER['HTTP_HOST'], 0) : $_SERVER['HTTP_HOST'];

if (thisIsNotMyWebsite){
    replace external url

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:53:27.960

就像是：

```
<?php
 $html ='1224 <a href="http://www.google.com">google</a> 567';
$tracking_string = 'http://example.com/track.php?url=';
$html = preg_replace('#(<a[^>]+href=")(http|https)([^>" ]+)("?[^>]*>)#is','\\1'.$tracking_string.'\\2\\3\\4',$html);
echo $html; 
```

在这里行动：http: [//codepad.viper-7.com/7BYkoc](http://codepad.viper-7.com/7BYkoc)

--我的最后一次更新

```
<?php
$html =' 1224 <a href="http://www.google.com">google</a> 567';

$tracking_string = 'http://example.com/track.php?url=';
$html = preg_replace('#(<a[^>]+)(href=")(http|https)([^>" ]+)("?[^>]*>)#is','\\1 nofollow  target="_blank" \\2'.$tracking_string.'\\3\\4\\5',$html);

echo $html; 
```

[http://codepad.viper-7.com/JP8sUk](http://codepad.viper-7.com/JP8sUk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:16:46.647

您可以使用[DOMDocument](http://www.php.net/manual/en/book.dom.php)来解析和遍历文档。

```
function rewriteExternal($html) {

        // The url for your redirection script
        $prefix = 'http://www.example.com?goto=';

        // a regular expression to determine if
        // this link is within your site, edit for your
        // domain or other needs
        $is_internal = '/(?:^\/|^\.\.\/)|example\.com/';

    $dom = new DOMDocument();

    // Parse the HTML into a DOM
    $dom->loadHTML($html);

    $links = $dom->getElementsByTagName('a');

    foreach ($links as $link) {
            $href = $link->getAttribute('href');
            if (!preg_match($is_internal, $href)) {
                $link->getAttributeNode('href')->value = $prefix . $href;
                $link->setAttributeNode(new DOMAttr('rel', 'nofollow'));
                $link->setAttributeNode(new DOMAttr('target', '_blank'));
            }
    }

    // returns the updated HTML or false if there was an error
    return $dom->saveHTML();
} 
```

这种方法将比使用基于正则表达式的解决方案更可靠，因为它实际上为您解析 DOM，而不是依赖于通常很脆弱的正则表达式。

# android - 无法在真实设备上运行 android junit 测试

> ID：14970745
> 
> 赞同：1
> 
> 时间：2013-02-20T01:25:54.833
> 
> 标签：android, android-testing

我正在从 Eclipse 运行一个 Android 测试项目。该项目在模拟器上运行。如果我附加我的设备，eclipse 不会让我选择在其上运行测试项目，但我可以从 eclipse 上运行我的应用程序。是否需要更改某些设置才能在物理设备上运行测试项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:46:35.513

eclipse中没有特殊设置。

但是，手机中有“开发者设置”。

您需要确保它已打开，并且您可能还希望确保“USB 调试”和任何“来自未知来源的所有代码”设置也已打开。

如果这仍然不起作用，那么您可能遇到了基于 ADB 的问题，因此此处提到的一些步骤可能会有所帮助。

[Eclipse 在调试时无法识别 Galaxy S 2，即使它会识别我的触摸并运行应用程序](https://stackoverflow.com/questions/14948445/eclipse-will-not-recognize-galaxy-s-2-when-debugging-even-though-it-will-recogni/14948868#14948868)

# java - Play Framework 2.1 IDE 设置

> ID：14970746
> 
> 赞同：0
> 
> 时间：2013-02-20T01:26:06.653
> 
> 标签：java, netbeans, ide, playframework, playframework-2.1

我在为 Play 2.1.0 中的新项目设置 IDE 时遇到问题。我更喜欢 netbeans，当我跑步时

```
play netbeans 
```

我收到以下错误：

```
[error] Not a valid command: netbeans
[error] Expected '/'
[error] Expected ':'
[error] Not a valid key: netbeans (similar: test, tags, streams)
[error] netbeans 
[error]         ^ 
```

有趣的是，它似乎也不适用于 Eclipse，但它适用于 Idea。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:25:59.107

您需要添加一个依赖项才能使用 Netbeans 项目生成器。

> Play 目前不支持原生 Netbeans 项目生成。[现在，您可以使用Netbeans SBT 插件](https://github.com/remeniuk/sbt-netbeans-plugin)生成 Netbeans Scala 项目 。

首先编辑*plugins.sbt*文件

```
resolvers += {
  "remeniuk repo" at "http://remeniuk.github.com/maven" 
}

libraryDependencies += {
  "org.netbeans" %% "sbt-netbeans-plugin" % "0.1.4"
} 
```

现在运行

```
$ play netbeans 
```

来源：[设置您的首选 IDE](http://www.playframework.com/documentation/2.1.0/IDE)

# c++ - vector::clear 的复杂性是否未指定？

> ID：14970747
> 
> 赞同：12
> 
> 时间：2013-02-20T01:26:11.123
> 
> 标签：c++, vector, language-lawyer

[根据来自 `std::vector<primitive>::clear()`](https://stackoverflow.com/questions/14970349/is-stdvectorprimitiveclear-a-constant-time-operation/14970508#14970508)的讨论是否是一个恒定时间操作？，注意到 C++ 标准似乎没有指定`vector::clear`.

它为有序（表 102）和无序关联容器（表 103）（均为线性）指定`list::clear`（线性；§23.3.5.4.5）的运行时间。`.clear`但是，`vector::clear`似乎缺少（尽管其他`vector`成员，喜欢`.data`并且`.swap`似乎具有指定的复杂性）。

真的是未指定，还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T02:12:03.827

> 真的是未指定，还是我错过了什么？

**是**的。目前，它确实未指定。

[对此有一个**开放的库问题**](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#2231)，其文本包含指向 StackOverflow 上相关问答的链接。[Jonathan Wakely](https://stackoverflow.com/users/981959/jonathan-wakely)对这个问题的回答澄清了正在发生的事情。

根据链接的提议，所有序列容器的复杂度要求`clear()`应该是**线性的。**但是，必须记住，复杂性要求只是**上限**。根据 C++11 标准的第 17.5.1.4/7 段：

> 库子句中指定的复杂性要求是上限，提供更好的复杂性保证的实现满足要求。

这*允许*可能的优化，但不强制它们。

即使链接提案将被接受，我们也不允许假设`clear()`非类元素的序列容器具有 O(1) 复杂性，即使这似乎是一种自然且常见的优化策略（以及[dasblinkenlight](https://stackoverflow.com/users/335858/dasblinkenlight)的答案对**[SO的这个问题](https://stackoverflow.com/questions/11235975/what-is-the-complexity-of-stdvectortclear-when-t-is-a-primitive-type)**证实了这一点）。

实现将被允许采用此策略（根据 17.5.1.4/7），但他们不会被*要求*这样做，因为在标准中没有任何地方（也不建议）指定这样的约束。

# java - Java Math 类的本机代码

> ID：14970750
> 
> 赞同：11
> 
> 时间：2013-02-20T01:26:33.790
> 
> 标签：java

我想知道是否有任何方法可以访问 Math 类的本机代码。更具体地说，我需要查看 sin() 方法的代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T01:30:40.083

这取决于实现。如文档中所述[`java.lang.Math`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)：

> 与 class 的一些数值方法不同，class`StrictMath`的等效函数的所有实现`Math`都没有定义为返回逐位相同的结果。这种放松允许在不需要严格的再现性的情况下实现更好的性能。
> 
> ...鼓励代码生成器使用特定于平台的本机库或微处理器指令（如果可用），以提供更高性能的`Math`方法实现。这种更高性能的实现仍然必须符合`Math`.

对于 Dalvik（Java 的 Android 实现）：

**dalvik/vm/InlineNative.c**

```
/*
 * public static double sin(double)
 */
static bool javaLangMath_sin(u4 arg0, u4 arg1, u4 arg2, u4 arg3,
    JValue* pResult)
{
    Convert64 convert;
    convert.arg[0] = arg0;
    convert.arg[1] = arg1;
    pResult->d = sin(convert.dd);
    return true;
} 
```

因此它调用了该`libm` `sin`函数，该函数在 Android 上由仿生 libc 提供。看起来像

**仿生/libm/src/s_sin.c**

```
double
sin(double x)
{
    double y[2],z=0.0;
    int32_t n, ix;

    /* High word of x. */
    GET_HIGH_WORD(ix,x);

    /* |x| ~< pi/4 */
    ix &= 0x7fffffff;
    if(ix <= 0x3fe921fb) {
        if(ix<0x3e400000)           /* |x| < 2**-27 */
           {if((int)x==0) return x;}    /* generate inexact */
        return __kernel_sin(x,z,0);
    }

    /* sin(Inf or NaN) is NaN */
    else if (ix>=0x7ff00000) return x-x;

    /* argument reduction needed */
    else {
        n = __ieee754_rem_pio2(x,y);
        switch(n&3) {
        case 0: return  __kernel_sin(y[0],y[1],1);
        case 1: return  __kernel_cos(y[0],y[1]);
        case 2: return -__kernel_sin(y[0],y[1],1);
        default:
            return -__kernel_cos(y[0],y[1]);
        }
    }
} 
```

和实现`__kernel_sin`看起来像

**仿生/libm/src/k_sin.c**

```
static const double
half =  5.00000000000000000000e-01, /* 0x3FE00000, 0x00000000 */
S1  = -1.66666666666666324348e-01, /* 0xBFC55555, 0x55555549 */
S2  =  8.33333333332248946124e-03, /* 0x3F811111, 0x1110F8A6 */
S3  = -1.98412698298579493134e-04, /* 0xBF2A01A0, 0x19C161D5 */
S4  =  2.75573137070700676789e-06, /* 0x3EC71DE3, 0x57B1FE7D */
S5  = -2.50507602534068634195e-08, /* 0xBE5AE5E6, 0x8A2B9CEB */
S6  =  1.58969099521155010221e-10; /* 0x3DE5D93A, 0x5ACFD57C */

double
__kernel_sin(double x, double y, int iy)
{
    double z,r,v;

    z   =  x*x;
    v   =  z*x;
    r   =  S2+z*(S3+z*(S4+z*(S5+z*S6)));
    if(iy==0) return x+v*(S1+z*r);
    else      return x-((z*(half*y-v*r)-y)-v*S1);
} 
```

`__kernel_cos`很相似。

# node.js - 使用 Serialport NodeJS 使用多个端口

> ID：14970762
> 
> 赞同：0
> 
> 时间：2013-02-20T01:28:09.253
> 
> 标签：node.js, serial-port, node-serialport

尝试使用 SerialPort 库将 5 个串行设备连接到 nodeJS 服务器。其他人报告了超过 4 个设备的问题，我不能在不关闭整个服务器的情况下声明超过 3 个端口。似乎没有硬编码限制，很可能是库中的错误。

欢迎任何替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T00:35:32.617

这是[库的一个已知问题](https://github.com/voodootikigod/node-serialport/issues/37)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T20:14:58.250

尝试增加 process.env.UV_THREADPOOL_SIZE。

线程池的默认大小为 4，因此如果串行端口库为每个端口保留一个线程，您将无法打开超过 3 个端口。（打开第 4 个端口将阻塞所有线程）。

更多信息在这里：[https ://www.future-processing.pl/blog/on-problems-with-threads-in-node-js/](https://www.future-processing.pl/blog/on-problems-with-threads-in-node-js/)

# java - 如何根据文件名在特定位置上传和保存文件？

> ID：14970763
> 
> 赞同：0
> 
> 时间：2013-02-20T01:28:12.203
> 
> 标签：java, jsp, file-io, struts2

我需要上传文件并根据它们的名称将它们保存在特定位置。我正在使用以下代码，但不确定如何根据它们的名称保存它们。目前它给了我以下错误。

```
SEVERE: Exception occurred during processing request: null
java.lang.NullPointerException 
```

jsp

```
 <s:form method="POST" enctype="multipart/form-data" autocomplete="on" 
             action="myforms">
                       .......
                   <s:textfield name="Name" label="Name"/>
                    <s:file name="logo" label="Upload Logo" size="40"/>
        <s:submit validate="true"></s:submit> 
```

行动

```
 @Action
 public class MyFormHandler implements ModelDriven{
  private FormData formData;
  private File logo;

  public String myforms(){
     System.out.println(formData.getName());   // << it works
     System.out.println("file name:" + logo.getName());   << Error
  }

   public File getLogo() {
    return logo;
}

public void setLogo(File logo) {
    this.logo = logo;
}

   ......
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:47:19.217

您显示的代码本身没有意义；上传的文件将在`File logo`（假设正确的 getter/setter 等），我不知道是什么`FormData`。

您最好的选择是根据文件名称将上传的文件复制到您想要的任何目录，但如果没有进一步的信息，就很难确定您的情况出了什么问题。

# visual-studio-2012 - 通过 VS 2012 连接到 SQL Server 2012 的登录前握手错误

> ID：14970770
> 
> 赞同：0
> 
> 时间：2013-02-20T01:28:35.663
> 
> 标签：visual-studio-2012, sql-server-2012, handshake

因此，我只是尝试通过 Visual Studio 2012 的 SQL Server 对象资源管理器连接到运行在运行 Windows Server 2012 的本地服务器上的 SQL Server 2012 实例。我可以通过本地和远程的其他计算机连接到它，非常好，但由于某种原因，我的桌面给了我这个可爱的错误：

“与服务器成功建立连接，但在登录前握手期间发生错误。（提供者：SSL 提供者，错误：0 - 等待操作超时。）（Microsoft SQL Server，错误：258） -等待操作超时。”

我在 SS2012 中使用 SQL Server 身份验证，未加密等。我真的不确定要包含哪些信息，我确定这是一些愚蠢的问题，但对于我的生活，我找不到解决方案。所有搜索都给了我一堆旧的结果。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-30T15:07:49.860

您是否尝试过完全限定域名？

看起来像 DNS 问题

# ios - 应用程序崩溃时 PLCrashReporter 未打开

> ID：14970771
> 
> 赞同：0
> 
> 时间：2013-02-20T01:28:35.887
> 
> 标签：ios, ipad, crash, crash-reports, plcrashreporter

PLCrashReporter 的第一次用户。我已经在我的 appDelegate.m 文件中编写了代码

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{       
NSLog(@"inside applicationdidfinishlaunching to do crash reporting");
PLCrashReporter *crashReporter = [PLCrashReporter sharedReporter];
NSError *error;

if ([crashReporter hasPendingCrashReport])
    [self handleCrashReport];

if (![crashReporter enableCrashReporterAndReturnError:&error])
    NSLog(@"Warning: Could not enable crash reporter %@",error); 
```

}

我在示例中编写了handleCrashReport。我还故意在单击按钮时使我的应用程序崩溃。（NSRangeException index 0 beyond bounds for empty array）像这样：

```
 NSMutableArray *mtestArray = [NSMutableArray new];
    NSLog(@"%@",[mtestArray objectAtIndex:0]); 
```

它抛出异常（即转到 main.m 文件。不转到主屏幕。它停留在 main.m 文件上）。我停止执行并重新启动应用程序，然后它进入一个屏幕（如果它实际上是正确的，就会出现这个屏幕）。我没有看到弹出窗口说发送崩溃报告或不发送。我将 CrashReporter.framework 和 libcrashreporter-iphonesimulator.a 添加到我的项目中。我改变了 mach-o 和 perfom single ...如文章中所述。我已经在这里待了2个多小时。为什么我看不到错误对话框？

我在我的 applicationdidfinishlaunching 中设置了断点，它们永远不会被击中。我删除了我的应用程序并重新安装（重新运行），但仍然不行。我的项目也是 iOS 6.1 的 iPad 项目。我读到崩溃报告对话框出现在应用程序第二次启动时。但它不会在任何时候，第二或第三。如果您需要更多信息，请询问。谢谢 编辑：plcrash 记者也适用于 iPad 吗？我从这篇博文中获得了帮助 [http://mandeepdhiman.blogspot.com/2011/10/crash-reporter-for-ios.html](http://mandeepdhiman.blogspot.com/2011/10/crash-reporter-for-ios.html)

# lambda - Salesforce Apex 中的 Lambda

> ID：14970774
> 
> 赞同：8
> 
> 时间：2013-02-20T01:28:54.630
> 
> 标签：lambda, functional-programming, salesforce

Apex 是否支持 lambda 的概念？

最终，我试图在我的测试中干掉一些真正重复的代码，所以我希望能够传递函数，就像这样 (C#-esq)

```
public static TestMethod void some_test_method(){
  Arrange( ()=>
    // some setup stuff
  );
  Act( ()=>
    // test action
  );
  System.assertEquals(...);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T01:58:06.377

Apex 没有 lambda。事实上，它[甚至没有匿名类](https://salesforce.stackexchange.com/questions/31305/does-apex-have-anything-like-anonymous-inner-classes)。（那将是您的下一个问题。）您将不得不坚持使用已声明的类。Apex 确实支持 Java-ish 接口和抽象类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-05T05:00:35.867

您可以尝试 R.apex ( [https://github.com/Click-to-Cloud/R.apex](https://github.com/Click-to-Cloud/R.apex) ) 进行功能性时尚编程，尽管您仍然必须使用已声明的类。

# python - 使用 struct 写入和读取标题

> ID：14970775
> 
> 赞同：0
> 
> 时间：2013-02-20T01:28:59.897
> 
> 标签：python, struct

我有一个正在阅读和计划编写的文件头，其中包含有关内容的信息；版本信息和其他字符串值。

写入文件并不太难，看起来很简单：

```
outfile.write(struct.pack('<s', "myapp-0.0.1")) 
```

但是，当我尝试用另一种方法从文件中读回标题时：

```
header_version = struct.unpack('<s', infile.read(struct.calcsize('s'))) 
```

我抛出以下错误：

```
struct.error: unpack requires a string argument of length 2 
```

我该如何解决这个错误，究竟是什么失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:34:54.573

> 写入文件并不太难，看起来很简单：

并不像你想象的那么简单。尝试查看文件中的内容，或者只是打印出您正在编写的内容：

```
>>> struct.pack('<s', 'myapp-0.0.1')
'm' 
```

正如[文档](http://docs.python.org/2/library/struct.html#format-characters)解释的那样：

> 对于`'s'`格式字符，计数被解释为字符串的大小，而不是像其他格式字符那样的重复计数；例如，`'10s'`表示单个 10 字节字符串，而`'10c'`表示 10 个字符。**如果未给出计数，则默认为 1。**

那么，您如何处理呢？

1.  `struct`如果不是您想要的，请不要使用。使用的主要原因是与将 C对象直接转储到缓冲区/文件/套接字/任何东西或以类似样式（例如 IP 标头）编写的二进制格式规范的`struct`C 代码进行交互。`struct`它不适用于 Python 数据的一般序列化。正如 Jon Clements 在评论中指出的那样，如果您只想存储一个字符串，那么只需`write`按原样存储字符串即可。如果要存储更复杂的东西，请考虑`json`模块；如果您想要更灵活、更强大的功能，请使用`pickle`.

2.  使用固定长度的字符串。如果您的文件格式规范的一部分是名称必须始终为 255 个字符或更少，只需编写`'<255s'`. 较短的字符串将被填充，较长的字符串将被截断（您可能需要检查以引发异常而不是静默截断）。

3.  使用一些带内或带外方式沿长度传递。最常见的是长度前缀。（您可能可以使用`'p'`or`'P'`格式来提供帮助，但这实际上取决于您尝试匹配的 C 布局/二进制格式；通常您必须做一些丑陋的事情，例如`struct.pack('<h{}s'.format(len(name)), len(name), name)`.）

* * *

至于为什么您的代码失败，有多种原因。首先，`read(11)`不能保证读取 11 个字符。如果文件中只有 1 个字符，这就是你得到的全部。其次，您实际上并不是在调用`read(11)`，而是在调用`read(1)`，因为`struct.calcsize('s')`返回`1`（原因从上面应该很明显）。第三，要么您的代码与上面显示的不完全一致，要么`infile`' 文件指针不在正确的位置，因为编写的代码将成功读取字符串`'m'`并将其解压缩为`'m'`. （我在这里假设 Python 2.x；3.x 会有更多问题，但你甚至不会走那么远。）

* * *

对于您的特定用例（“文件头......包含有关内容的信息；版本信息和其他字符串值”），我只使用`write`带有换行符终止符的字符串。（如果字符串可以嵌入换行符，您可以将它们反斜杠转义为`\n`，使用 C 风格或 RFC822 风格的延续，引用它们等）

这有许多优点。一方面，它使格式易于人类阅读（并且人类可编辑/可调试）。而且，虽然有时会带来空间折衷，但单字符终止符至少与长度前缀格式一样有效，甚至可能更高。而且，最后但同样重要的是，这意味着代码对于生成和解析标头都非常简单。

在稍后的评论中，您澄清说您也想编写整数，但这并没有改变任何东西。一个`'i'`int 值将占用 4 个字节，但大多数应用程序会写入很多小数字，如果将它们写为字符串，则仅占用 1-2 个字节（终止符/分隔符 +1）。如果你不是在写小数字，Python`int`很容易太大而无法容纳在 C`int`中——在这种情况下，`struct`会默默地溢出，只写低 32 位。

# delegates - 自定义 UITableViewCell 与 UITextField editingDidEnd 竞争条件

> ID：14970776
> 
> 赞同：0
> 
> 时间：2013-02-20T01:29:12.097
> 
> 标签：delegates, uitableview

我有 UITableViewController 和编辑/保存按钮作为 BarItem。我有一个自定义单元格，它在编辑模式下显示 UITextField。当我将焦点移到另一个单元格等时，我可以保存修改后的文本。没问题。但是，当我尝试修改字段并按下触发 setEditing:NO save 等的保存按钮时，我的问题就开始了。我认为正在发生的是一种竞争条件，在处理 editDidEnd 之前触发了保存操作，因此我没有保存所有的数据。
有关如何处理此问题的任何建议？我是否要遍历所有可见单元格以保存所有数据？我绝对可以这样做，但是我会在单击滚动和编辑按钮时遇到同样的问题吗？有没有更好的方法来刷新消息队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:22:27.357

鉴于我没有接受者，我认为我坚持我所知道的：

1.  在完成/保存（即 setEditing:NO）处理中遍历所有单元格并保存它们的数据
2.  每次发生变化时保持更新数据，即可能在 Value Changed 中
3.  尝试使用 UITextFieldDelegate 和 textFieldShouldEndEditing 但我不确定这是否可行，因为我可能会遇到与我相同的问题。

我相信 setEditing 中的 endEditing 将解决问题，因为它应该让文本字段的第一响应者辞职。

# xml - 如何使用 XSLT 将 XML 元素名称转换为属性值？

> ID：14970778
> 
> 赞同：3
> 
> 时间：2013-02-20T01:29:31.940
> 
> 标签：xml, xslt, xpath

给定 XML 片段：

```
<transactions>
  <tran id="1">
    <E8>
      <datestamp>2012-05-17T15:16:57Z</datestamp>
    </E8>
  </tran>
</transactions> 
```

如何将元素`<E8>`转换为`<event type="E8">`使用 XSLT？

编辑：预期输出：

```
<transactions>
  <tran id="1">
    <event type="E8">
      <datestamp>2012-05-17T15:16:57Z</datestamp>
    </event>
  </tran>
</transactions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:49:00.970

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="tran/E8">
  <event type="E8">
   <xsl:apply-templates/>
  </event>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<transactions>
  <tran id="1">
    <E8>
      <datestamp>2012-05-17T15:16:57Z</datestamp>
    </E8>
  </tran>
</transactions> 
```

**产生想要的正确结果：**

```
<transactions>
   <tran id="1">
      <event type="E8">
         <datestamp>2012-05-17T15:16:57Z</datestamp>
      </event>
   </tran>
</transactions> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:37:31.297

采用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="tran/*">
    <event type="{name()}">
      <xsl:value-of select="."/>

    </event>
  </xsl:template>

</xsl:stylesheet> 
```

输出：

```
<transactions>
  <tran id="1">
    <event type="E8">2012-05-17T15:16:57Z</event>
  </tran>
</transactions> 
```

# javascript - 如何在 Twitter Bootstrap 的弹出窗口中插入输入文本？

> ID：14970784
> 
> 赞同：0
> 
> 时间：2013-02-20T01:30:09.410
> 
> 标签：javascript, html, css, twitter-bootstrap, popover

我正在尝试修改来自 Twitter Bootstrap 的弹出框的外观。我不想让一个只有标题和文本的弹出框，而是用一个按钮输入文本。

有可能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:32:02.290

是的，你可以做到。您需要在`data-original-title`.

```
<a href="#" data-toggle="tooltip"
   title="Name: <input type='text' />">Enter your name!</a> 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/cXxRY/)

在您的情况下，它将是：

```
<a href="#" data-toggle="tooltip"
   data-original-title="Name: <input type='text' class='span1' /> <input type='button' class='btn'
   value='Save' />">Enter your name!</a> 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/cXxRY/2/)

# c - 实现 FCFS 调度程序

> ID：14970785
> 
> 赞同：0
> 
> 时间：2013-02-20T01:30:25.570
> 
> 标签：c, multithreading, pthreads, semaphore

我正在尝试模拟 FCFS 调度程序，我这样做的方式是当一个线程进入它时，如果它不在队列中，我将它推送到队列中，但如果它是然后检查线程是否是在队列的头部（先入）并且作业的剩余时间> 0。我的问题是如何将线程置于等待状态，直到它成为队列的头部？我听说条件变量可能会有所帮助，但不确定它们是如何工作的。

```
if (!(is_in_queue(ready_queue, tid))) { //thread is not in the queue
            pthread_mutex_lock(&schedule_lock);
            ready_queue = enqueue(ready_queue, currentTime, tid, remainingTime, tprio);
            pthread_mutex_unlock(&schedule_lock);
        }
        else{ //thread is in queue
            if (tid == head_of_queue(ready_queue) && remainingTime >0) { //need to schedule this thread for full time 
                return currentTime +1; //schedule on the next unit of "time"
            }
            else if (tid == head_of_queue(ready_queue) && remainingTime == 0){ //need to go to next task
                pthread_mutex_lock(&schedule_lock);
                ready_queue = dequeue(ready_queue);
                pthread_mutex_unlock(&schedule_lock);
            }
            else{ //not at the head of the queue
               //How do i wait until it is at the head??
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:31:55.163

条件变量允许操作系统暂停线程的执行，直到另一个线程发送信号唤醒它。对于你的 else 声明，你需要类似的东西

```
pthread_cond_wait(&cond_var, &mutex_var); 
```

这将使线程进入睡眠状态。但是，您还需要考虑何时唤醒线程。可能如果一个线程不在队列的头部，那么您应该使用`pthread_cond_broadcast`唤醒所有等待的线程。您还需要一个循环，以便每个线程在每次唤醒时检查条件。因此，您的初始`if`语句可能应该类似于`while`循环。

# jquery - 在 slideUp() 期间 stop(true).slideDown() 出现问题，是 jquery 错误吗？

> ID：14970786
> 
> 赞同：1
> 
> 时间：2013-02-20T01:30:36.663
> 
> 标签：jquery, html

我在下面粘贴了折叠菜单的代码，或者在[jsfiddle](http://jsfiddle.net/HuCmy/35/)上查看。

问题是当子菜单处于向上滑动状态并再次单击它时，它会停止但没有向后动画（相反，子菜单正在跳出但它们的容器保持其当前高度 - jQuery 2.0.0 没有跳跃.b1)。在 Firefox 和 Chrome 中测试，结果相同。

这是一个 jQuery 错误，还是只有我？

**更新**：我已经为 jQuery[提交了一个错误报告](http://bugs.jquery.com/ticket/13483)，因为我认为这是一个 jQuery 错误。

**更新 2**：请参阅 Brad M 接受的答案以及对此行为的解释（但我仍然认为这是 jQuery 的一个问题，需要在内部解决）。

**HTML**

```
<ul>
    <li><a href="#">Menu1</a></li>
    <li class="opened"><a href="#">Submenus 1</a>
        <ul class="submenu">
            <li><a href="#">submenu1-1</a></li>
            <li><a href="#">submenu1-2</a></li>
        </ul></li>
    <li class="closed"><a href="#">Submenus 2</a>
        <ul class="submenu">
            <li><a href="#">submenu2-1</a></li>
            <li><a href="#">submenu2-2</a></li>
        </ul></li>
    <li><a href="#">Menu4</a>
    </li>
</ul> 
```

**Javascript**

```
var initMenu = function() {
    $("li.closed > ul.submenu").css("display", "none");

    var toggleMenu = function(li) {
        if (li.hasClass("opened") || li.hasClass("inslidedown")) {
            li.removeClass("opened inslidedown").addClass("inslideup").find("ul").first().stop(true).slideUp({
                duration: 1000,
                complete: function() {
                    li.addClass("closed").removeClass("inslideup");
                }
            });
        }
        else if (li.hasClass("closed") || li.hasClass("inslideup")) {
            li.removeClass("closed inslideup").addClass("inslidedown").find("ul").first().stop(true).slideDown({
                duration: 1000,
                complete: function() {
                    li.addClass("opened").removeClass("inslidedown");
                }
            });
        }
    };

    $("ul").on("click", "li.opened a, li.closed a, li.inslideup a, li.inslidedown a", function(e) {
        e.preventDefault();
        toggleMenu($(this).closest("li"));
    });
};

$(document).ready(function() {
    initMenu();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:53:32.227

原因`.slideDown()`不起作用是因为元素的显示设置为“块”，并且`.slideDown()`通常打算在显示为“无”的元素上调用。在 else if 语句中包含`.hide()`ul 元素以获得您想要的行为。

```
li
    .removeClass("closed inslideup")
    .addClass("inslidedown")
    .find("ul")
    .first()
    .hide()   //   <----
    .stop(true)
    .slideDown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:50:45.490

这是我的版本：http: [//jsfiddle.net/RF3xK/4/](http://jsfiddle.net/RF3xK/4/)

Javascript：

```
$(document).ready(function() {
rotator($('#quotes .textItem:first'));

function rotator(elem) {
    elem.slideDown(800, function(){
      var me = $(this),
          next = me.next(),
          prev = me.prev();
      if (!next.length) {
          next = $('.textItem').first();
          next.insertAfter(me);
      }
      rotator(next);
    }).delay(800).slideUp(800);
}
}); 
```

CSS：

```
#quotes { background: #eee;}

#quotes .textItem { display: none; } 
```

请注意，我将 .hide() 替换为 document.ready 事件中的那些元素，这是不必要的 javascript，您可以像我一样使用 css 来完成它，js 方式的另一个问题是在一小会儿出现和消失因为您必须等到所有文档加载后才能隐藏这些元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:54:08.950

基本上你应该检查所有`<li>`节点下`<ul>`的css类是否都说*关闭*或*打开*，你可以使用jQuery选择器来实现。

这是一种快速而肮脏的修复方法，您绝对可以将其重构为更好的逻辑。

```
if ($('li[class~="opened"]').length > 0 || $('li[class~="inslidedown"]').length > 0) {
    ...
}
else if ($('li[class~="closed"]').length > 0 || $('li[class~="inslideup"]').length > 0) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T01:57:35.153

第一个问题是由于您使用 .stop()

根据 jquery 文档，

> .stop( [clearQueue ] [, jumpToEnd ] )
> 
> > clearQueue 类型：Boolean 一个布尔值，指示是否也删除排队的动画。默认为假。
> > 
> > > jumpToEnd 类型：Boolean 一个布尔值，指示是否立即完成当前动画。默认为假。

通常，您希望在处理动画时使用 .stop(false, true) 。

至于你的第二个问题，原因是由于下面的jquery/css。

> li.removeClass("关闭的内联")
> 
> > li.close > ul { 显示：无；}

当您删除“关闭”类时，ul 元素的显示设置回默认的“块”，因此它会立即显示。不会出现下滑动画，因为元素已经显示（尽管回调仍在执行）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:37:11.873

现在我正在使用一种解决方法，它在滑动动画正在进行时简单地忽略点击事件。刚刚从第 23 行的选择器过滤参数中删除了`li.inslideup a, li.inslidedown a`选择`.on()`器（在 jQuery 得到修复的情况下保持其他代码完整，但可以简化）。

解决方法是在[jsfiddle](http://jsfiddle.net/HuCmy/36/)上。

# android - 片段 getArguments() 返回 null

> ID：14970790
> 
> 赞同：21
> 
> 时间：2013-02-20T01:30:55.187
> 
> 标签：android, android-fragments

我有`Fragment`一个`TabHost`作为根布局的，如下...

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <FrameLayout
                android:id="@+id/tab_1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />

            <!-- More FrameLayouts here - each are placeholders for Fragments -->    

        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

为选项卡内容创建/更新每个的代码`Fragment`如下...

```
private void updateTab(String tabId, int placeholder) {
    FragmentManager fm = getFragmentManager();
    if (fm.findFragmentByTag(tabId) == null) {
        Bundle arguments = new Bundle();
        arguments.putInt("current_day", mCurrentTab);
        EpgEventListFragment fragment = new EpgEventListFragment();
        fragment.setArguments(arguments);

        fm.beginTransaction()
                .replace(placeholder, new EpgEventListFragment(), tabId)
                .commit();
    }
} 
```

然后在我尝试获取论点的`onCreate(...)`方法中，但我总是做以下事情......`EpgEventListFragment``Bundle``null`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle arguments = getArguments();
    if (arguments == null)
        Toast.makeText(getActivity(), "Arguments is NULL", Toast.LENGTH_LONG).show();
    else
        mCurrentDay = getArguments().getInt("current_day", 0);

    ...
} 
```

我在这里想念什么？我也尝试过`getArguments()`，`onAttach(...)`但仍然为空。我是新手，`Fragments`所以我希望有一个简单的原因，但我在搜索时没有想出任何东西。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-20T01:34:42.317

我认为这与您的问题有关：

```
fm.beginTransaction()
    .replace(placeholder, new EpgEventListFragment(), tabId)
    .commit(); 
```

你正在制作一个新的`Fragment`（它没有参数，因为它是新实例化的）。

而是尝试

```
Fragment fragment = new EpgEventListFragment();
fragment.setArguments(arguments);
fm.beginTransaction()
    .replace(placeholder, fragment, tabId)
    .commit(); 
```

# css - Css 表格样式、nth-child、border-radius 和跨浏览器支持

> ID：14970792
> 
> 赞同：-1
> 
> 时间：2013-02-20T01:31:01.597
> 
> 标签：css, css-selectors, cross-browser, alignment, css-tables

我正在尝试制作 2 个单独的表格来呼应饮酒者的结果和他们在酒吧里的饮料。

这些表格使用 nth-child(odd)、nth-child(even) 交替背景，效果很好。它只是让它们通过不同的浏览器对齐并获得圆角。

我试过使用 nth-last-child(1)..etc 但仍然没有整洁的解决方案。

这就是我目前所处的位置.. [http://giblets-grave.co.uk/index3.php](http://giblets-grave.co.uk/index3.php)

这就是它的外观： http: [//giblets-grave.co.uk/img/1400x900_GG-desktop_design_final.jpg](http://giblets-grave.co.uk/img/1400x900_GG-desktop_design_final.jpg)

在 /css/main2.css 中查看我当前的 css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:10:03.933

我没有看到你的代码，但我模拟了一个类似的场景。

**HTML**

```
<div id="main">
    <div id="first">
        <table>
            <tr>
                <td>A</td>
                <td>B</td>
            </tr>
        </table>
    </div>
    <div id="second">
        <table>
            <tr>
                <td>A</td>
                <td>B</td>
            </tr>
            <tr>
                <td>A</td>
                <td>B</td>
            </tr>
            <tr>
                <td>A</td>
                <td>B</td>
            </tr>
            <tr>
                <td>A</td>
                <td>B</td>
            </tr>
        </table>
    </div>
</div> 
```

如您所见，第二张桌子的高度是“动态的”，它可能比第一张桌子长，没关系。

**CSS**

```
#main {
    width:500px;
    overflow:hidden;
}
#first, #second {
    padding-bottom: 1000px;
    margin-bottom: -1000px;
    float: left;
}
#first {
    float:left;
    width:100px;
    overflow:auto;
}
#second {
    width:400px;
    float:left;
} 
```

到目前为止，您所拥有的是 #first 父级跟随 #second 的高度。[参考](https://stackoverflow.com/questions/9309487/auto-div-height-depend-on-another-one)

[小提琴](http://jsfiddle.net/Kn3zw/)

所以现在怎么办？#first 遵循#second 的高度，但#first_child 不遵循#first 的高度。但是，HTML 表格不遵循父 div 的高度。[参考](https://stackoverflow.com/questions/13260327/how-can-i-make-my-table-auto-adjust-the-heigth-besed-on-the-screen-resolution)

答案：Javascript。

您首先要检测#second 的高度，然后自动调整#first_child 的高度以跟随#second 的高度。

```
var second_height = $("#second").height();
var table_height = second_height;

$("#first_child").height(table_height); 
```

**[解决方案](http://jsfiddle.net/Kn3zw/2/)**

希望这就是你要找的。

# linux - Linux 中的进程如何使用 task_struct 链接？

> ID：14970793
> 
> 赞同：1
> 
> 时间：2013-02-20T01:31:20.817
> 
> 标签：linux, kernel

我试图弄清楚流程是如何相互联系的。我知道linux内核使用循环链表list_head将不同的进程连接在一起，信息保存在一个名为task_struct的结构中。在task_struct 中有两个字段，children 和sibling，都是list_head 类型。children->next 将指向下一个孩子，而兄弟->next 将指向来自共同父母的下一个兄弟。也就是说，我对这些指针如何指向父/兄弟进程感到困惑。

现在，例如，我有以下进程：R1、P1、P2。R1 是根进程，P1 P2 是它的子进程。R1->children->next 指向 P1 的兄弟字段，因为他们是兄弟姐妹。但是 P2 的兄弟->next 指向哪里呢？它应该指向 P1 的兄弟字段，还是指向 R1 的子字段以形成循环链表？我的直觉告诉我它应该指向 P1 的兄弟字段，但我的 TA 告诉我不然。

为了更清楚，我做了一张照片。任何帮助都会有所帮助。谢谢！

![在此处输入图像描述](../Images/06a043d5ba764e8a5ce7fc7b287d1722.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-06T16:42:28.120

它将指向 R1 的子字段，因为 Linux fs 中的第一个任务存储在循环 dll 中，而且 P2 是 R1 的子项，因此它是合乎逻辑的。猜你的TA是对的。

# c# - 如何在 C# 中设置 TreeView 节点前景色？

> ID：14970795
> 
> 赞同：1
> 
> 时间：2013-02-20T01:31:34.437
> 
> 标签：c#, treeview

在我的项目中，我必须将 Treeview 节点的前景色设置为蓝色**，哪个节点有子节点**，这些节点只有蓝色，其余节点具有默认颜色，我怀疑在哪种情况下我编写了设置前景色的代码树视图节点。

问候克里希纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:36:46.920

TreeView.Node 有一个 ForeColor 和一个 BackColor 属性，这就是你要找的吗？像这样的东西：

```
 TreeView tv = new TreeView();

        tv.Nodes.Add("node1", "Node 1");
        tv.Nodes.Add("node2", "Node 2");

        tv.Nodes["node1"].ForeColor = System.Drawing.Color.Blue;
        tv.Nodes["node2"].ForeColor = System.Drawing.Color.Black; 
```

要检查特定节点的子节点：

```
 node.ForeColor = node.Nodes.Count > 0
           ? System.Drawing.Color.Blue
           : System.Drawing.Color.Black; 
```

# sql-server - 在 SQL Server 中为不超过 14 的日期创建用户定义的函数

> ID：14970798
> 
> 赞同：0
> 
> 时间：2013-02-20T01:31:51.943
> 
> 标签：sql-server, datetime

不确定如何创建此 UDF。我已经阅读了现有的问题，但不确定语法。

我想将此查询另存为视图，但不能因为我已经有声明

```
DECLARE @STARTDATE DATETIME
DECLARE @ENDDATE DATETIME

SELECT @ENDDATE = CAST(CONVERT(CHAR(10), GETDATE(), 101)+' 00:00:00' AS DATETIME)
SELECT @STARTDATE = DATEADD(D, -1, @ENDDATE)--'-7'
SELECT @ENDDATE = CAST(CONVERT(CHAR(10), GETDATE(), 101)+' 23:59:59' AS DATETIME)

SELECT
    LTRIM(CIJ.ORDERACCOUNT) 'ACCOUNT'
    ,LTRIM(CIJ.SALESID) 'TOMKIN ORDER #'
    ,LTRIM(CIJ.INVOICEID) 'TOMKIN INVOICE #'
    ,CIJ.PURCHASEORDER 'YOUR ORDER #'
FROM 
    CUSTINVOICEJOUR CIJ
WHERE 
    CIJ.INVOICEDATE >= @STARTDATE AND CIJ.INVOICEDATE <= @ENDDATE
ORDER BY 
    CIJ.INVOICEDATE,CIJ.INVOICEID 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:01:43.557

这是您的查询转换为视图。请注意，您不能将参数传递到视图中，也不能指定顺序。

```
CREATE VIEW Makdaddy ([ACCOUNT], [TOMKIN ORDER #], [TOMKIN INVOICE #], [YOUR ORDER #])
AS
SELECT
     LTRIM(CIJ.ORDERACCOUNT) 'ACCOUNT'
   , LTRIM(CIJ.SALESID) 'TOMKIN ORDER #'
   , LTRIM(CIJ.INVOICEID) 'TOMKIN INVOICE #'
   , CIJ.PURCHASEORDER 'YOUR ORDER #'
FROM CUSTINVOICEJOUR CIJ
WHERE CIJ.INVOICEDATE >= DATEADD(day,-14,GETDATE())
  AND CIJ.INVOICEDATE <= GETDATE() 
```

当您调用视图时，您可以对列进行排序并执行额外的过滤。

```
SELECT *
FROM Makdaddt
ORDER BY [ACCOUNT] 
```

这是您的查询转换为 udf。这可能是更好的方法，因为您的开始日期可能会改变。

```
CREATE FUNCTION dbo.Makdaddy (@StartDate DATETIME)
RETURNS TABLE
AS
RETURN 
(
  SELECT
       LTRIM(CIJ.ORDERACCOUNT) 'ACCOUNT'
     , LTRIM(CIJ.SALESID) 'TOMKIN ORDER #'
     ,  LTRIM(CIJ.INVOICEID) 'TOMKIN INVOICE #'
     , CIJ.PURCHASEORDER 'YOUR ORDER #'
  FROM CUSTINVOICEJOUR CIJ
  WHERE CIJ.INVOICEDATE >= @StartDate
    AND CIJ.INVOICEDATE <= GETDATE()
); 
```

# java - 工作线程在 Netty 中被阻塞

> ID：14970807
> 
> 赞同：1
> 
> 时间：2013-02-20T01:32:29.687
> 
> 标签：java, netty

我知道 netty 使用 Reactor 模式**来避免为每个连接创建一个线程，**这种模式的核心概念是`epoll`Linux 中的“选择器”或系统调用。

但我也听说如果处理程序从不关闭它的通道，它将占用一个工作线程并阻塞它：这是否意味着每个连接都将使用（阻塞）一个线程，所以**对于每个接受的套接字，我们仍然需要创建一个线 ？**

例如，如果我编写一个有 10,000 个持久连接的服务器，这个服务器是否需要 10,000 个工作线程？

上面这两件事之间的矛盾让我很困惑，如果我理解错了，谁能解释我？谢谢~

=========================================

一个示例（只有 1 个工作线程），它总是可以同时处理一个客户端的事件。

```
import java.net.InetSocketAddress;
import java.util.concurrent.Executors;
import org.jboss.netty.bootstrap.ServerBootstrap;
import org.jboss.netty.buffer.ChannelBuffer;
import org.jboss.netty.channel.*;
import org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory;
public class Netty_test {
    public static void main(String[] args) {
        ChannelFactory factory =new     NioServerSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newFixedThreadPool(1));
    ServerBootstrap bootstrap = new ServerBootstrap(factory);
        ChannelPipelineFactory cpf=new ChannelPipelineFactory(){
            public ChannelPipeline getPipeline() {
                return Channels.pipeline(new testHandler());
            }
        };
        bootstrap.setPipelineFactory(cpf);
        bootstrap.setOption("child.tcpNoDelay", true);      
        bootstrap.bind(new InetSocketAddress(100));
    }
}
class testHandler extends SimpleChannelHandler {
@Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {    
        System.out.println("messageReceived, handler work.");
        e.getChannel().write(e.getMessage());
        ctx.sendUpstream(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:39:49.917

不，您的 10,000 个连接将共享工作线程。一个工作线程将处理多个连接/通道。这就是为什么不阻塞工作线程非常重要的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:52:01.693

1) 在反应器模式中，调度程序通过侦听事件队列列表并将事件传递给具体的事件处理程序来获取一个事件。事件处理程序可以仅由一个线程、线程池或每个线程的每个事件执行。取决于您的实施。

2）您可以为每个通道添加超时计时器，并在传入数据时重置此计时器。如果定时器超时，则关闭该通道，防止空闲通道过多。

我的 0.2 美分？

# java - XML Parsing 给了我一个错误然后应用程序崩溃

> ID：14970812
> 
> 赞同：0
> 
> 时间：2013-02-20T01:33:30.777
> 
> 标签：java, android, xml, xml-parsing

我正在创建一个简单的登录页面，它将响应 REST 服务给出的响应。如果以 XML 形式返回响应并通过浏览器检查该服务是否正常工作。

每次单击“登录”按钮时，应用程序强制关闭，我已经对其进行了调试，但仍然无法弄清楚。

startLogin 已更改为 AsyncTask

在主要活动中，我在按钮单击侦听器上调用 startLogin。

公共类 MainActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewById(R.id.loginButton).setOnClickListener(
            new OnClickListener(){
        public void onClick(View view){
            new startLogin().execute("");
        }
    });
} 
```

下面是我创建的异步任务

```
private class startLogin extends AsyncTask<String, Void, String> {
        final EditText User= (EditText) findViewById(R.id.usernameEditText);
        final EditText Pass= (EditText) findViewById(R.id.passwordEditText);
        final TextView testLabel = (TextView) findViewById(R.id.testLabel);
          @Override
          protected String doInBackground(String... params) {

            String finished= "have finished the login task.";
            int z = 0;
            String username = User.getText().toString();
            String password = Pass.getText().toString();
            String getOne = "http://demo.relocationmw.com/ws_docmgmt/mobile.asmx/GetLogin?userName=";
            String getTwo = "&passWord=";
            String URL = getOne + username + getTwo + password;  
            String KEY_ITEM = "Response";
            String KEY_SUCCESS = "Success";
            String KEY_FAIL = "Fail";
            String KEY_UID = "UID";
            testLabel.setText("Success to Async");
            String xml = getXMLFromUrl(URL);
            Document doc = getDomElement(xml);

            if(xml != null)
            {
                NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                Element e = (Element) nl.item(z);
                String successString = getValue(e,KEY_SUCCESS);
                String UIDString = getValue(e,KEY_UID);
                String failString = getValue(e,KEY_FAIL);
                String loginError = "Please check username and password.";
                if(failString.equals("Fail")){
                    int duration = Toast.LENGTH_LONG;
                    Toast toast = Toast.makeText(MainActivity.this, loginError, duration);
                    toast.setGravity(Gravity.TOP|Gravity.RIGHT, 0, 0);
                    toast.show();
                }
                else{
                    if(successString.equals("Success")){
                        Intent intent = new Intent (MainActivity.this, HomeActivity.class);
                        startActivity(intent);
                    }
                }
            }else
            {
                Toast toast = Toast.makeText(MainActivity.this, "No Connection to Retrieve Data.", Toast.LENGTH_LONG);
                toast.show();
            }
            return finished;
          }      

          @Override
          protected void onPostExecute(String result) {
          }

          @Override
          protected void onPreExecute() {
          }

          @Override
          protected void onProgressUpdate(Void... values) {
          }

    //XML Parsing Start
        public String getXMLFromUrl(String url){
            String xml = null;
            try{
                DefaultHttpClient client = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);

                HttpResponse httpResponse = client.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);
            }catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // Auto-generated catch block
                e.printStackTrace();
            }
            return xml;
        }

        public Document getDomElement(String xml){
            Document doc = null;
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            try {

                DocumentBuilder db = dbf.newDocumentBuilder();

                InputSource is = new InputSource();
                    is.setCharacterStream(new StringReader(xml));
                    doc = db.parse(is); 

                } catch (ParserConfigurationException e) {
                    Log.e("Error: ", e.getMessage());
                    return null;
                } catch (SAXException e) {
                    Log.e("Error: ", e.getMessage());
                    return null;
                } catch (IOException e) {
                    Log.e("Error: ", e.getMessage());
                    return null;
                }
                    // return DOM
                return doc;
        }

        public String getValue(Element item, String str) {
            NodeList n = ((Document) item).getElementsByTagName(str);
            return getElementValue(n.item(0));
        }

        public final String getElementValue( Node elem ) {
                 Node child;
                 if( elem != null){
                     if (elem.hasChildNodes()){
                         for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                             if( child.getNodeType() == Node.TEXT_NODE  ){
                                 return child.getNodeValue();
                             }
                         }
                     }
                 }
                 return "";
          }
    //XML Parsing Stop

    }
 } 
```

XML“主要活动”：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/BackgroundGrey"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/loginButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="90dp"
        android:text="@string/loginbuttonlabel" />

    <EditText
        android:id="@+id/passwordEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/loginButton"
        android:layout_centerHorizontal="true"
        android:layout_margin="5dp"
        android:background="@color/White"
        android:ems="10"
        android:inputType="text|textPassword" />

    <EditText
        android:id="@+id/usernameEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/passwordEditText"
        android:layout_centerHorizontal="true"
        android:layout_margin="5dp"
        android:background="@color/White"
        android:ems="10"
        android:inputType="text|textPassword" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/testLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/loginButton"
        android:layout_alignParentTop="true"
        android:layout_marginTop="93dp"
        android:text="TextView" />

</RelativeLayout> 
```

LogCat 错误：

```
02-20 02:56:39.927: E/AndroidRuntime(1018): FATAL EXCEPTION: AsyncTask #1
02-20 02:56:39.927: E/AndroidRuntime(1018): java.lang.RuntimeException: An error occured while executing doInBackground()
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.lang.Thread.run(Thread.java:856)
02-20 02:56:39.927: E/AndroidRuntime(1018): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.View.requestLayout(View.java:15468)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.View.requestLayout(View.java:15468)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.View.requestLayout(View.java:15468)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.View.requestLayout(View.java:15468)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:318)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.view.View.requestLayout(View.java:15468)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.widget.TextView.checkForRelayout(TextView.java:6313)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.widget.TextView.setText(TextView.java:3567)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.widget.TextView.setText(TextView.java:3425)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.widget.TextView.setText(TextView.java:3400)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at com.testingapp.MainActivity$startLogin.doInBackground(MainActivity.java:83)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at com.testingapp.MainActivity$startLogin.doInBackground(MainActivity.java:1)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-20 02:56:39.927: E/AndroidRuntime(1018):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-20 02:56:39.927: E/AndroidRuntime(1018):     ... 3 more 
```

我现在能够将问题缩小到异步活动。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:55:57.103

让您将 getXMLFromUrl() 方法放在一个新线程中（例如：AsyncTask）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:16:34.377

我还没有阅读您的代码，但堆栈跟踪包括`No address associated with hostname`- 我会从那里开始。

尝试将您构建的 URL 放入浏览器、wget 或您喜欢的任何东西中，然后查看请求实际上返回了一些内容。当您可以看到您期望的结果时，然后将其编织到您的代码中。此外，请确保您的代码发出相同的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:36:52.410

类 TestAsyncTask 扩展 AsyncTask {

```
 @Override
    protected String doInBackground(String... params) {
        return getXMLFromUrl(params[0]);
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        ....
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:23:53.610

私有类 startLogin 扩展 AsyncTask {

```
 @Override
protected String doInBackground(String... params) {
    return getXMLFromUrl(params[0]);
}

@Override protected void onPostExecute(String result) {
     if(result != null) {
     String xml = result;
     Document doc = getDomElement(xml);
            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            Element e = (Element) nl.item(z);
            String successString = getValue(e,KEY_SUCCESS);
            String UIDString = getValue(e,KEY_UID);
            String failString = getValue(e,KEY_FAIL);
            String loginError = "Please check username and password.";
            if(failString.equals("Fail")){
                int duration = Toast.LENGTH_LONG;
                Toast toast = Toast.makeText(MainActivity.this, loginError, duration);
                toast.setGravity(Gravity.TOP|Gravity.RIGHT, 0, 0);
                toast.show();
            }
            else{
                if(successString.equals("Success")){
                    Intent intent = new Intent (MainActivity.this, HomeActivity.class);
                    startActivity(intent);
                }
            }
        }else
        {
            Toast toast = Toast.makeText(MainActivity.this, "No Connection to Retrieve Data.", Toast.LENGTH_LONG);
            toast.show();
        }

} 
```

}

// 调用 asynctask new startlogin().execute(URL);

# mysql - DISTINCT COUNT 返回 SQL 错误

> ID：14970813
> 
> 赞同：0
> 
> 时间：2013-02-20T01:33:31.027
> 
> 标签：mysql

为什么以下 SQL 查询返回错误？

```
SELECT COUNT (DISTINCT rm.id) 
FROM ts_room rm
   LEFT JOIN ts_roomfacilities rf
      ON rm.id = rf.room_id
   LEFT JOIN ts_facilities f
      ON f.id = rf.facilities_id
   LEFT JOIN ts_building b
      ON rm.building_id=b.id; 
```

乍一看似乎合乎逻辑！

这是我的 SQLFiddle - [http://sqlfiddle.com/#!2/a59fc/20](http://sqlfiddle.com/#!2/a59fc/20)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:35:44.340

不要在`COUNT`和第一个括号之间放置空格。现在看看它的工作原理：

[http://sqlfiddle.com/#!2/a59fc/24](http://sqlfiddle.com/#!2/a59fc/24)

顺便说一句，您最初收到的错误消息会准确地告诉您语法错误在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:34:41.490

括号和括号之间不能有空格，`COUNT`因为它是一个函数。写成`COUNT(`.

# asp.net - ASP.NET 将多个网站托管在具有相同域的同一文件夹下

> ID：14970814
> 
> 赞同：0
> 
> 时间：2013-02-20T01:33:33.250
> 
> 标签：asp.net, web-config, bin

我想知道如何在同一个文件夹下托管多个网站。例子：

```
www.mydomain.com/apps/app1
www.mydomain.com/apps/app2
www.mydomain.com/apps/app3 
```

他们每个人都是不同的应用程序，带有单独的 web.config

我现在担心的是我的应用程序现在无法读取它们自己的 bin 文件夹中的 dll 文件。

有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:38:33.187

您可以在 IIS 中执行此操作。只需启动 IIS 管理器并导航到文件夹（例如左侧连接窗格中的“app3”）。右键单击该文件夹并选择转换为应用程序。这会将文件夹设置为单独的 ASP.NET Web 应用程序的根目录。

# plot - 没有用 Julia 定义的情节

> ID：14970817
> 
> 赞同：13
> 
> 时间：2013-02-20T01:33:39.923
> 
> 标签：plot, julia

我从我的 Ubuntu 12.04 上的源代码编译了 Julia 0.1。实际上，这是我第一次尝试与 Julia 合作。

编译到最后没有问题，但有一些警告。

当我尝试执行 plot 命令时，问题来了，

```
 julia> plot(x->sin(x^2)/x, -2pi,2pi)
    ERROR: plot not defined 
```

编译是不是在某个地方出错了，还是我必须安装额外的包才能在 Julia 中绘图？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T19:39:54.183

基于 Web 的图形已过时且未维护（尽管正在进行工作以使下一代 Web 图形正常工作）。[绘图替代方案包括https://github.com/nolta/Winston.jl](https://github.com/nolta/Winston.jl)上的 Winston 或 Gadfly 包和[https://github.com/dcjones/Gadfly.jl](https://github.com/dcjones/Gadfly.jl)，您可以使用 Pkg.add("Winston" )（或 Pkg.add("Gadfly") 命令）。有关文档和使用示例，请参阅链接的存储库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-11T17:57:00.070

对于 Julia 下的 MATLAB 样式绘图，键入一次

```
Pkg.add("PyPlot") 
```

安装 PyPlot 包，它使您可以访问 Python 的 matplotlib 库。然后尝试例如

```
using PyPlot
x = -2pi:0.1:2pi;
plot(x, sin(x.^2)./x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T02:54:05.283

好的，我自己找到了解决方案，

Julia 使用 Web REPL 来提供一些基本的图形功能。只需按照此处的步骤操作：

[https://github.com/JuliaLang/julia#web-repl](https://github.com/JuliaLang/julia#web-repl)

Julian Schrittwieser 还有一个基于 MathGL 的库：

[http://www.furidamu.org/blog/2012/02/26/plotting-with-julia/](http://www.furidamu.org/blog/2012/02/26/plotting-with-julia/)

我不确定它是否仍在作者的维护中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-08T02:40:07.193

截至目前（自从提出问题以来已经过去了几年，因此生态系统已经成熟），我建议用于简单快速绘图的软件包是 Gadfly，其中一些使用 PyPlot 用于需要大量控制的出版质量图。

要安装，只需键入

```
Pkg.add("Gadfly") 
```

在 Julia 命令行中，要使用，请键入：

```
using Gadfly
plot([sin, cos], 0, 25) 
```

当您想要对图形进行大量控制时，PyPlot 仍然是首选的绘图选项，但它是 Python 库的包装器，用户友好性稍差。它还需要在您的系统上安装有效的 python。

# regex - 如何在正则表达式中只匹配没有结束标记的元素？

> ID：14970819
> 
> 赞同：0
> 
> 时间：2013-02-20T01:34:17.227
> 
> 标签：regex

我正在尝试匹配父节点中没有结束标记的所有 XML 节点。有人知道这样做的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T21:27:49.670

一个简单的开始：

```
<.*?\/> 
```

请注意，它将失败，例如：

```
<bar attr="oops/>"/> 
```

但是，具有`/>`属性是非常罕见的情况，您总是可以逃避它们。

# css - 用于打印的动态 CSS 类

> ID：14970836
> 
> 赞同：0
> 
> 时间：2013-02-20T01:35:58.393
> 
> 标签：css, printing

**用例：**单击链接会打开一个包含一些内容的叠加层。页面上有很多这样的链接，每个链接都有相应的内容加载到叠加层中。用户应该只能打印特定的内容。

**方法：**单击链接时，我为正文设置了一个名为“打印机”的类。在 print.css 中，我隐藏了所有页面内容，除了我在覆盖层中看到的内容。在关闭覆盖层时，我正在从正文中删除该类。

**问题：**在 FF 和 IE 上似乎一切正常。在 Chrome 上，打印对话框挂起，而在 Safari 上，我看到一个空白页。

任何帮助将不胜感激，以了解我可能做错了什么或是否存在任何其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:47:47.673

使用打印 CSS

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:46:14.230

您可以使用媒体类型来应用仅用于打印的样式表。

```
<link rel="stylesheet" type="text/css" media="print" href="yourPrint.css"/> 
```

或在您当前的样式表中使用 @import

```
@media print {
  /* style sheet for print goes here */
} 
```

有关这方面的更多信息，请查看 w3.org [http://www.w3.org/TR/CSS2/media.html](http://www.w3.org/TR/CSS2/media.html)

对于技术较少但可靠性较低的来源，[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

# html - 在 div 中向右浮动一个无序列表

> ID：14970837
> 
> 赞同：1
> 
> 时间：2013-02-20T01:36:09.033
> 
> 标签：html, css

我正在尝试向右浮动这个将从数据库动态加载的菜单列表，所以我不能对包含列表的 div 使用固定高度，因为列表可能比预期的要长。

我已经为包含的 div 尝试了 height="auto" 但是一旦你浮动列表它就不起作用了。

这是代码 [http://jsbin.com/iyitom/1/edit](http://jsbin.com/iyitom/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:00:02.927

[CSS 属性溢出](http://css-tricks.com/the-css-overflow-property/)是你的朋友。您需要添加`overflow: hidden;`到`.newscontent`

# javascript - 我怎样才能简化这段代码？将文件 json 转换为数组 json

> ID：14970838
> 
> 赞同：2
> 
> 时间：2013-02-20T01:36:38.410
> 
> 标签：javascript, jquery, arrays, json

我有这个 json 文件，我正在变成一个 json 数组，一切正常，但真正的 json 文件包含更多数据。如何简化此代码可以更改 javascript 或 json 文件。

```
{
"Subject1":{
    "Biology":{
        "Category":{
            "Cell":{
                "question1":{
                    "que1":"what's....?"
                },
                "question2":{
                    "que2":"what's....?"
                },
                "question3":{
                    "que3": "what's....?"
                }
            },
            "Bactery":{
                "question1":{
                    "que1":"what's....?"
                },
                "question2":{
                    "que2": "what's....?"
                },
                "question3":{
                    "que3": "what's....?"
                }
            }
        }
    }
} 
```

}

这是我将文件 json 转换为 javascript 数组 json 的代码：

```
var exa = [];
function show() {
    $.getJSON('questions.json', function (json) {
        for (var key in json) {
            if (json.hasOwnProperty(key)) {
                var item = json[key];
                exa.push({
//I want to simplify this part, because the real json file have more questions
                    que1: item.Biology.Category.Cell.question1.que1,
                    que2: item.Biology.Category.Cell.question2.que2,
                    que3: item.Biology.Category.Cell.question3.que3,

                    que11: item.Biology.Category.Bactery.question1.que1,
                    que12: item.Biology.Category.Bactery.question2.que2,
                    que13: item.Biology.Category.Bactery.question3.que3

                });
            }
        }
        //return Books;
        console.log(exa)
    })
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:40:35.853

而不是 que1、que2 等，只需将问题放在一个数组中

```
"Cell": [
    "what's this?",
    "what's that?"
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:18:57.143

您可以使用[json-path](http://code.google.com/p/json-path/)和 write`JsonPath.read(json, "$..question");`来获取所有问题。您也需要将`que[*]`文件中的所有内容更改为`question`。

# mysql - mysqldump 与一些表，不使用 --skip-table

> ID：14970841
> 
> 赞同：0
> 
> 时间：2013-02-20T01:37:21.607
> 
> 标签：mysql, linux, bash, shell, unix

要转储单个数据库，我可以这样做：

```
mysqldump -u root files 
```

要转储一个表，我可以这样做：

```
mysqldump -u root files path 
```

我将如何转储两个表合并？就像是：

```
mysqldump -u root files path&path_updated 
```

请注意，我有大约 50 个表，其中只有两个需要导出，所以我不想对此进行操作`--skip-table`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:39:47.720

继续添加表名

```
mysqldump -u root files path path_updated ... 
```

检查文档

[http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:39:22.627

`mysqldump databasename table1 table2`（[参考](http://fosswire.com/post/2007/08/reference-making-backups-using-mysqldump/)）

# java - 没有错误，但通过 HTTP 的对象不起作用？

> ID：14970842
> 
> 赞同：0
> 
> 时间：2013-02-20T01:37:22.657
> 
> 标签：java, http, serialization

继续此处的较早问题。尝试通过 HTTP 发送此对象 Employee。我没有收到任何错误，但希望在另一端打印出员工详细信息，但没有发生任何事情。我正在打开我的日志文件以查看我的 tomcat 服务器上的打印输出，但除了方法已开始显示 START 打印输出的指示之外，我没有得到 END 打印输出。因此，该部分中的某些内容无法正常工作。

这是测试类Employee：

```
public class Employee implements java.io.Serializable {
        public String name;
        public String address;
        public transient int SSN;
        public int number;

        public void mailCheck() {
            System.out.println("Mailing a check to " + name + " " + address);
        }

} 
```

客户端：

公共类 SerializeAndSend {

```
public static void main(String args[]){

      one.Employee e = new one.Employee();
      e.name = "Reyan Ali";
      e.address = "Phokka Kuan, Ambehta Peer";
      e.SSN = 11122333;
      e.number = 101;

      sendObject(e);

}

public static Object sendObject(Object obj) {
    URLConnection conn = null;
    Object reply = null;
    try {

        // open URL connection
        URL url = new URL("///myURL///");
        conn = url.openConnection();
        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        // send object
        ObjectOutputStream objOut = new ObjectOutputStream(conn.getOutputStream());
        objOut.writeObject(obj);
        objOut.flush();
        objOut.close();
    } catch (IOException ex) {
        ex.printStackTrace();
        return null;
    }
    // recieve reply
    try {
        ObjectInputStream objIn = new ObjectInputStream(conn.getInputStream());
        reply = objIn.readObject();
        objIn.close();
    } catch (Exception ex) {
        // it is ok if we get an exception here
        // that means that there is no object being returned
        System.out.println("No Object Returned");
        if (!(ex instanceof EOFException))
            ex.printStackTrace();
            System.err.println("*");
    }
    return reply;
} 
```

}

我认为那是正确的。但我被困在服务器端，我在服务器端也有员工类：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    System.out.println("START");
    Object obj;
    Employee emp = null;
    ObjectInputStream objIn = new ObjectInputStream(req.getInputStream()); 

    try {
        obj = objIn.readObject();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }

    try {
        emp = (Employee)objIn.readObject();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    System.out.println("END");
    System.out.println(emp.name);

} 
```

任何想法在接收端出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:32:31.710

```
try {
    obj = objIn.readObject();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}

try {
    emp = (Employee)objIn.readObject();
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} 
```

您正在发送一个对象并尝试接收两个。你要么需要这个：

```
obj = objIn.readObject();
if (obj instanceof Employee)
{
  Employee emp = (Employee)obj;
} 
```

或这个：

```
Employee emp = (Employee)objIn.readObject(); 
```

不是两者的混合。两次`readObject()`调用意味着读取两个不同对象的流，并且您没有发送它们。

其次，您不应该捕获`Exception`然后`instanceof`在异常对象上使用。在这种情况下，您应该有一个单独的`catch (EOFException exc)`，如果您希望接收零个对象，这是可以的，但不是否则，然后分别捕获其他可能的异常：它们不正常。

# qt - Qt5 前向信号

> ID：14970848
> 
> 赞同：16
> 
> 时间：2013-02-20T01:37:54.523
> 
> 标签：qt, qt5

使用旧语法，可以转发信号，例如：

```
connect(sender, SIGNAL(valueChanged(QString,QString)), this, SIGNAL(updateValue(QString,QString))); 
```

我喜欢使用[新的 Qt5 语法](http://qt-project.org/wiki/New_Signal_Slot_Syntax)。是否可以使用新语法来转发信号？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T03:53:35.150

信号只不过是一种简单的方法。所以你可以按原样使用它。像这样的东西：

```
connect(sender, &Sender::valueChanged, receiver, &Receiver::updateValue); 
```

# ios - 从网络文件夹编译 Xcode 项目

> ID：14970849
> 
> 赞同：-1
> 
> 时间：2013-02-20T01:38:08.760
> 
> 标签：ios, xcode, osx-mountain-lion

我正在尝试从网络文件夹中编译 xcode 中的 iOS 项目，我遇到了各种各样的问题，其中大部分是关于在第一个构建命令中找不到文件的问题。

大多数时候它只是说它没有在其他标题中找到标题。如果我再次点击 Build，之前的错误就会消失并出现新的错误。其他时候它只是说“xxx.h”资源暂时不可用。再次点击构建，当然这是可用的，但其他一些标题现在不可用，这只会让事情变得非常令人沮丧。

PS：我使用 SMB 从 Windows 系统连接到网络文件夹。有时，如果我断开连接并重新连接到网络文件夹，它会在 3 秒内完美运行，然后开始出现资源不可用错误。不幸的是，我的构建过程持续了 3 秒以上：|。

**更新**：似乎原因是磁盘访问延迟。我正在运行 OS X 虚拟机并连接到我的真机硬盘。我现在已将整个 VM 移至 SSD 驱动器，并且一切工作更加顺畅，而且我似乎不再遇到这些问题，因此磁盘访问时间至关重要:)。

**更新 2**：出于某种原因，我再次收到此错误。不知道是什么改变了局面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:02:15.717

似乎它可能是未复制到项目文件夹的引用文件。我有很多位于服务器资源上的项目，只要项目使用的所有资源都包含在项目中，它就可以正常工作。

也就是说，这些天我个人的选择是将我所有的项目都存放在 Dropbox 中。仍然必须小心忘记将任何添加的文件复制到项目文件夹中，但对我来说，在我工作的各种机器上管理这些应用程序的工作要容易得多。

# javascript - 使用变量时 Google Earth API link.setHref 不起作用

> ID：14970866
> 
> 赞同：2
> 
> 时间：2013-02-20T01:40:23.303
> 
> 标签：javascript, google-earth-plugin

该变量正在获取正确的数据，但在 href 参数中不起作用。我添加了一个带有变量的按钮，以便在浏览器中查看它。如果我输入已注释的硬代码值，它就可以工作。

```
<?php
@session_start();
$idcoord = $_GET['search_fd0'];
$kmlpath = "http://nonprasa.t15.org/kml/PR" . $idcoord . "/doc.kml";
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Earth API Sample</title>
<script src="http://www.google.com/jsapi?key=ABQIAAAAuPsJpk3MBtDpJ4G8cqBnjRRaGTYH6UMl8mADNa0YKuWNNa8VNxQCzVBXTx2DYyXGsTOxpWhvIG7Djw" type="text/javascript"></script>
<script type="text/javascript">
      function addSampleButton(caption, clickHandler) {
    var btn = document.createElement('input');
    btn.type = 'button';
    btn.value = caption;

    if (btn.attachEvent)
      btn.attachEvent('onclick', clickHandler);
    else
      btn.addEventListener('click', clickHandler, false);

    // add the button to the Sample UI
    document.getElementById('sample-ui').appendChild(btn);

  }

  function addSampleUIHtml(html) {
    document.getElementById('sample-ui').innerHTML += html;
  }
</script>
<script type="text/javascript">
var ge;

google.load("earth", "1");

function init() {
//  var kmlfile = '\"<?php echo $kmlpath; ?>\"';
 var kmlfile = '<?php echo $kmlpath;?>'; 
  google.earth.createInstance('map3d', initCallback, failureCallback);

  addSampleButton(kmlfile, buttonClick);
}

function initCallback(instance) {
  ge = instance;
  ge.getWindow().setVisibility(true);

  // add a navigation control
  ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);

  // add some layers
  ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
  ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);

  createNetworkLink();

  document.getElementById('installed-plugin-version').innerHTML =
    ge.getPluginVersion().toString();

}

function failureCallback(errorCode) {
}

function createNetworkLink() {
  var networkLink = ge.createNetworkLink("");
  networkLink.setDescription("NetworkLink open to fetched content");
  networkLink.setName("Open NetworkLink");
  networkLink.setFlyToView(true);

  // create a Link object
  var link = ge.createLink("");
 //link.setHref("http://nonprasa.t15.org/kml/PR0302013/doc.kml);

  link.setHref (kmlfile);

  // attach the Link to the NetworkLink
  networkLink.setLink(link);

  // add the NetworkLink feature to Earth
  ge.getFeatures().appendChild(networkLink);

    // look at the placemark we created
  var la = ge.createLookAt('');
  la.set(18, -67,
    0, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
0, // heading
0, // straight-down tilt
1500 // range (inverse of zoom)
);
  ge.getView().setAbstractView(la);

}

function buttonClick() {
// Get the current view.
var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

// Zoom out to x times the current range.
lookAt.setRange(lookAt.getRange() * 5.0);

// Update the view in Google Earth.
ge.getView().setAbstractView(lookAt);
}

</script>
  </head>
  <body onload="init()" style="font-family: arial, sans-serif; font-size: 8px; border: 0;">
    <div id="sample-ui"></div> 
    <div id="map3d" style="width: 1200px; height: 800px;"></div>
    <br>
    <div>Installed Plugin Version: <span id="installed-plugin-version" style="font-weight: bold;">Loading...</span></div>
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:17:56.887

javascript 变量`kmlfile`是函数的本地变量，因此当您尝试在函数`init`中使用它时，它始终是未定义的。`createNetworkLink`

为了突出我的意思，请看以下内容，为了清楚起见，我删除了其他代码......

```
function init() {
  var kmlfile = '<?php echo $kmlpath;?>'; // kmlfile defined here
}

function createNetworkLink() {
  link.setHref(kmlfile); // kmlfile is undefined here
  alert(kmlfile); // this would have told you as much...
} 
```

要修复它，您可以创建`kmlfile`一个全局变量，以便它在`createNetworkLink`函数范围内可用。为此，只需在`init`方法外部创建变量，就像使用`ge`变量一样。

同样，为了清楚起见，请查看以下删除了其他代码的代码。

```
<script type="text/javascript">
var ge;
var kmlfile; // kmlfile defined here

function init() {
  kmlfile = '<?php echo $kmlpath;?>'; // set the variable 
}

function createNetworkLink() {
  link.setHref(kmlfile); // kmlfile is now available here
}
</script> 
```

# php - 从关联数组中计算唯一值

> ID：14970869
> 
> 赞同：0
> 
> 时间：2013-02-20T01:40:36.083
> 
> 标签：php, mysql, arrays

首先，感谢您的帮助。

我在这里和其他论坛上花了无数个小时试图找到我的确切解决方案，但要么 1）我不理解我读过的那个，要么 2）我没有找到正确的答案。

在 PHP 中，我运行了一个有点复杂的查询，它返回一组记录，类似于：

```
id | name | direction| 
1    aaa    east
2    bbb    west
3    ccc    east 
```

我创建了一个关联数组，例如：

```
$query=("select * from foo");
$result=mysql_query($query);
$array=mysql_fetch_assoc($result); 
```

现在，我需要做的似乎很简单，但由于某种原因我没有掌握这个概念。我需要遍历整个 $array 并返回我想要指定的任何值的计数并将该计数存储在变量中。

*即告诉我东*在“方向”列中出现了多少次，并将其放入一个名为 的变量中`$eastcount`。

我尝试了使用`foreach`具有增量计数的循环的各种组合，并尝试使用`array_count_values`但无法将这些部分组合在一起：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:47:52.700

这应该可以工作（对不起，我的 iPhone 上缺少代码块）。

[http://www.php.net/manual/en/function.array-count-values.php](http://www.php.net/manual/en/function.array-count-values.php)

$array = array(1, "你好", 1, "世界", "你好"); print_r(array_count_values($array));

数组（ [1] => 2 [hello] => 2 [world] => 1 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:49:33.737

这个怎么样：

```
query=("select * from foo");
$result=mysql_query($query);

$directions = array();

while($direction = mysql_fetch_assoc($result) {
   $directions[] = $direction['direction'];
}

$directionCounts = array_count_values($directions);

//now you can access your counts like this:
    echo $directionCounts['east']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T01:51:15.427

```
// build query
$query=("select * from foo");

// execute query
$result=mysql_query($query);

// declare vars
$east_count = 0;

// iterate through results
while ($data = mysql_fetch_array($result)) {

    // grab DIRECTION column value
    $direction = $data['direction'];

    // detect 'east'
    if ($direction == 'east') {

        // increment 'east' count
        $east_count++;
    }
}

// print # of times we had 'east'
echo("direction said 'east' $east_count times"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T01:48:37.627

首先，你应该改用mysqli。但是，无论如何，我希望这是有道理的。

```
if ($result) {
    $count = 0;
    while ( $row = mysql_fetch_assoc($result)) {
        if ($row["route"] === "east") {
            $count += 1;
        }
    }
    return $count;
} 
```

# php - WHERE 子句中的条件检查

> ID：14970870
> 
> 赞同：0
> 
> 时间：2013-02-20T01:40:39.620
> 
> 标签：php, mysql, where-clause

我正在尝试构建一个查询，`WHERE`到目前为止这是它的子句：

```
WHERE ( s.subject_name LIKE '%$keyword%' OR
        c.city_name LIKE '%$keyword%' OR
        o.option_name LIKE '%$option%' OR
        d.district_id = $districtId OR
        c.city_id = $cityId
       ) 
```

我的实际情况是：

*   `$keyword`应该始终保持一个值。其他3个可能没有。
*   如果只有`$keyword`一个值，返回的记录应该 `$keyword`在`subject_name`or中匹配`city_name`。
*   如果`$optional`有一个值，那么返回的记录应该匹配`$keyword`并且 `$option`
*   如果`$districtId`有一个值，那么结果应该匹配 3 个变量值 ( `$keyword`, `$option`, `$districtId`)
*   最后，如果`$cityId`与其他 3 个值一起具有一个值，则返回的结果应匹配所有 4 个变量的值。

这些条件来自我的搜索页面。`$keyword`是文本框中的值，需要关键字才能开始搜索。这就是为什么我说它总是有价值的。其他 3 个值来自允许在需要时选择项目的选择框。

我试着做查询，没问题。但我真的对这个`WHERE`条款感到困惑。`WHERE`到目前为止，上面的代码来自我的条款。但我无法得到我想要的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:32:13.847

如果你想在纯 SQL 中实现这一点，这就是你所需要的（或者至少它应该足够接近）：

```
WHERE (
    ( s.subject_name LIKE '%$keyword%' OR c.city_name LIKE '%$keyword%' )
    AND ('$option' = '' OR (
        o.option_name LIKE '%$option%' AND (
            '$districtId' = '' OR (
                d.district_id = $districtId AND (
                    '$cityId' = '' OR c.city_id = $cityId
                )
            )
        )
    )
) 
```

然而，这远远不是最理想的。相反，您应该检查 PHP 中用户输入的内容，并根据该输入运行不同的查询。您还可以动态构建查询：

```
$query = "SELECT ...";

$query .=
    " WHERE ( ( s.subject_name LIKE '%$keyword%' OR c.city_name LIKE %$keyword%' )";
if ( !empty($option) ) {
    $query .= " AND o.option_name LIKE '%$option%'";
    if ( !empty($districtId) ) {
        $query .= " AND d.district_id = $districtId";
            if ( !empty($cityId) ) {
                $query .= " AND c.city_id = $cityId";
            }
    }
}
$query .= ')'; 
```

# ios - “sudo pod install”错误

> ID：14970877
> 
> 赞同：7
> 
> 时间：2013-02-20T01:41:47.457
> 
> 标签：ios, cocoapods

我已经有一个使用 podfile 的项目。

我想在一个旧项目上添加一个 Podfile，但我得到了这个错误 `sudo pod install`

错误：

```
Resolving dependencies of `./Podfile'
Updating spec repositories
[!] git pull
Updating 35bbbaf..8b42708
error: The following untracked working tree files would be overwritten by merge:

AFXAuthClient/1.0.4/AFXAuthClient.podspec

Please move or remove them before you can merge.

Aborting 
```

这很奇怪，因为我没有在我的项目中使用 AFXAuthClient，而且我从未使用过它。

这是我的 Podfile：

```
platform :ios, '5.0'
pod 'TTTAttributedLabel',  '~> 1.6.0'
pod 'ECSlidingViewController',  '~> 0.9.0' 
```

我试图没有成功：

```
gem install cocoapods
pod setup 
```

**注意：我在pod setup**中遇到同样的错误

 *** * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-20T15:16:19.777

从命令行运行`rm -rf ~/.cocoapods`

然后`pod install`再次运行。你不应该需要 sudo。

这看起来是因为规范发生了变化，并且与运行`git pull`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-09T23:32:56.183

如果您看到这样的错误，可能是因为[CocoaPods 必须强制推送他们的 repo](http://blog.cocoapods.org/Repairing-Our-Broken-Specs-Repository/)。他们建议：

```
pod repo remove master
pod setup 
```**

# java - Struts2教程不起作用

> ID：14970879
> 
> 赞同：2
> 
> 时间：2013-02-20T01:42:41.837
> 
> 标签：java, web, struts2, struts

我正在学习struts2。我根据[教程](http://www.tutorialspoint.com/struts_2/struts_examples.htm)尝试我的hello world项目 然后我在eclipse中运行代码。但它不起作用。控制台显示很多错误。第一个如下：

```
 com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Dispatcher initialization failed
Unable to load configuration. - bean - jar:file:/C:/Users/Administrator/Eclipse/workspace_2/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyStruts2/WEB-INF/lib/struts2-gxp-plugin-2.3.8.jar!/struts-plugin.xml:8:162
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:70)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:193)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5312)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

页面显示：HTTP Status 404 - /MyStruts2/index.jsp type Status report

消息 /MyStruts2/index.jsp

描述 请求的资源不可用。

它出什么问题了。需要我配置更多吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:44:58.080

首先，删除所有未使用的 S2 插件 如果您正在学习基本教程，那么您几乎可以肯定*没有*使用 GXP。

S2 插件：

1.  可以从根本上改变 S2 的功能，并且
2.  拥有自己的依赖关系，如果不满足它们的依赖关系将导致失败。

其次，确保您正在部署所有必需的库。创建 Maven（或等效的）来管理这些依赖项，但对于绝对的准系统应用程序，它并不是绝对必要的。

# mysql - 如何获取替代对象而不是使用此内部连接搜索的对象

> ID：14970883
> 
> 赞同：0
> 
> 时间：2013-02-20T01:43:01.617
> 
> 标签：mysql, sql, join

我有两个表，一个用户表和一个消息表。

```
users:
    id (int)
    username (varchar)

messages:
    id(int)
    send_id(int)
    receive_id(int) 
```

我正在使用这个查询来获取特定用户发送的所有消息：

```
SELECT users.id, users.username  FROM users
INNER JOIN messages
    ON messages.send_id = users.id
    AND users.id = SOMEUSERID 
```

我将如何获取接收用户的 id 和用户名而不是发送用户信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:45:01.073

```
SELECT
    rec.id, rec.username
FROM
    users send
    JOIN messages ON (messages.send_id = send.id)
    JOIN users rec ON (messages.receive_id = rec.id)
WHERE
    send.id = SOMEUSERID 
```

# c# - 错误 1 无效的表达式术语 'double'

> ID：14970884
> 
> 赞同：0
> 
> 时间：2013-02-20T01:43:21.027
> 
> 标签：c#

```
 private void buttonConvert_Click(object sender, EventArgs e)
    {
        //Convert number from C to F
        double convertDecimal;
        convertDecimal = 1.8;
        textBoxF = double.Parse(textBoxC.Text) * double(convertDecimal) + 32;
                                                       ^here is where I get the error 
```

错误 1 ​​无效的表达式术语 'double'

我对编程还是很陌生，但我就是无法全神贯注地尝试加、减、除或乘数字。我正在尝试做一个简单的简单转换。从摄氏度文本框中获取数字并将其转换为华氏度。我只是不明白数字部分？？？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:45:13.437

double(convertDecimal) 应该是 (double)convertDecimal

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:45:51.980

这看起来像一个 C++ 类型转换表达式，在 C# 中不起作用。由于`convertDecimal`已经是类型`double`，因此无需强制转换它。直接使用即可：

```
textBoxF = double.Parse(textBoxC.Text) * convertDecimal + 32; 
```

当变量的类型不是预期的时，您只需要更改变量的类型（即类型转换）。添加两个`double`值是可以的。即使添加 a`double`和 an`int`也是可以的，因为整数被[隐式转换](http://msdn.microsoft.com/en-us/library/y5b434w4.aspx)为 a `double`。

* * *

**编辑：**您尝试将表达式的结果分配给控件，这将不起作用。您应该将结果转换为字符串（例如 with [`double.ToString`](http://msdn.microsoft.com/en-us/library/3hfd35ad.aspx)），然后分配给控件文本字段：

```
double farenheit = double.Parse(textBoxC.Text) * convertDecimal + 32;
textBoxF.Text = farenheit.ToString(); 
```

# java - Java配置文件用参数实例化对象

> ID：14970886
> 
> 赞同：1
> 
> 时间：2013-02-20T01:43:38.443
> 
> 标签：java, xml, configuration

我试图找到一种方法，可以在配置文件中指定一个类，以及应该传递给构造函数的参数。

例如，想象以下 XML 配置文件：

```
<AuthServer>
    <Authenticator type="com.mydomain.server.auth.DefaultAuthenticator">
        <Param type="com.mydomain.database.Database" />
    </Authenticator>
</AuthServer> 
```

现在，在我的 Java 代码中，我想做以下事情：

```
public class AuthServer {
    protected IAuthenticator authenticator;

    public AuthServer(IAuthenticator authenticator) {
        this.authenticator = authenticator;
    }

    public int authenticate(String username, String password) {
        return authenticator.authenticator(username, password);
    }

    public static void main(String[] args) throws Exception {
        //Read XML configuration here.

        AuthServer authServer = new AuthServer(
            new DefaultAuthenticator(new Database()) //Want to replace this line with what comes from the configuration file.
        );
    }
} 
```

我当然可以读取 XML，并从中获取值，但是我不确定如何使用 XML 配置文件中的值的注释来模拟上面指示的行（想要替换...）。有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:09:29.797

解析配置文件以获取您要使用的类的名称，并将其传递给构造函数，使用`Class.forName("com.mydomain.server.auth.DefaultAuthenticator")`. 如果要传递其他信息，请使用更多参数或属性对象，或类似的。

看到这个类似的问题更[有趣的用途](https://stackoverflow.com/questions/1733799/generics-and-class-forname)

**编辑**

这是你想要的？

```
new DefaultAuthenticator(Class.forName("com.mydomain.server.auth.DefaultAuthenticator").newInstance()); 
```

Class.forName 只会调用无参数的默认构造函数。如果您需要提供参数，您可以按照 Java 教程[使用反射来使用反射从构造函数创建对象](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)。但是，完全有可能（并且可能更容易阅读）使用默认构造函数创建实例，然后使用 setter 根据需要对其进行配置。

# javascript - 这是子类数组的棘手解决方案吗？

> ID：14970887
> 
> 赞同：1
> 
> 时间：2013-02-20T01:43:42.587
> 
> 标签：javascript

今天我正在研究一个新的 SVG 框架，我尝试对数组进行子类化以使用节点......几个小时后，我完成了这段代码（我只在 Safari 上测试过）：

```
customArray=function(){
    // Do the thing
    this.__proto__= Array.prototype;

    // Add some prototypes to the main customArray
    this.f1=function(){console.log(1)}; // f1 custom function
    this.f2=function(){console.log(2)}; // f2 custom function
};

newCustomArray=new customArray();
newCustomArray.f3=function(){console.log(3)}  // f3 function only for newCustomArray

console.log(newCustomArray instanceof Array); // true
console.log([] instanceof Array);             // true
console.log("---------------------"); 
console.log(newCustomArray.f1);               // function(){console.log(1)};
console.log(newCustomArray.f2);               // function(){console.log(2)};
console.log(newCustomArray.f3);               // function(){console.log(3)};
console.log([].f1);                           // undefined
console.log([].f2);                           // undefined
console.log([].f3);                           // undefined
console.log("---------------------");
console.log(newCustomArray.forEach);          // Native function
console.log([].forEach);                      // Native function 
```

对我来说正在工作，但正如“系统”所说，**proto**并不无处不在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:49:01.277

不，您不希望`CustomArray`构造函数成为 Array（具有数组方法）。相关的是：

```
newCustomArray instanceof Array; // false, should be true
newCustomArray.forEach; // undefined, should be [].forEach 
```

阅读[ECMAScript 5 如何仍然不允许对数组进行子类化](http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/)。上面的两个属性都很容易实现，但实际的问题是`length`属性（这对你也不起作用`newCustomArray`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:52:06.067

遵循一种获得类似于子类 Array 的方法，我尝试了这个，对我来说这不是最好的，但可以使用。

你认为呢？

[http://jsfiddle.net/microbians/837rv/](http://jsfiddle.net/microbians/837rv/)

```
 listOfCustomArrays   =[];
    listOfCustomArrays.fn={};
    Array_prototype=Array.prototype;

    Array=function(){

        // Add a new custom array to the list
        listOfCustomArrays.push([]); // NEW ARRAY
        listOfCustomArrays[listOfCustomArrays.length-1].index=listOfCustomArrays.length-1;

        // The the current last
        var arr=listOfCustomArrays[listOfCustomArrays.length-1];

        for (j in listOfCustomArrays.fn) {
            Object.defineProperty(arr, j, {
                value: listOfCustomArrays.fn[j]
            });
        }

        return arr
    };

    Array.extend=function(name,fnc) {
        listOfCustomArrays.fn[name]=fnc;
        for (i=0; i<listOfCustomArrays.length; i++) {
            Object.defineProperty(listOfCustomArrays[i], name, {
                value: listOfCustomArrays.fn[name]
            });
        }
    }

    Array.prototype=Array_prototype;

    newCustomArray=new Array();

    //Array.extend('f1', function(){console.log(1)} );
    Array.prototype.f1=function(){console.log('f1:prototyped')};

    Array.extend('f2', function(){console.log('f2:extended')} );
    Array.extend('f3', function(){console.log('f3:extended')} );

    newCustomArray2=new Array();
    Array.extend('f4', function(){console.log('f4:extended')} );

    console.log(typeof Array);
    console.log(typeof []);
    console.log("---------------------");
    console.log(newCustomArray.f1);
    console.log(newCustomArray.f2);
    console.log(newCustomArray.f3);
    console.log(newCustomArray.f4);
    console.log("---------------------");
    console.log(newCustomArray2.f1);
    console.log(newCustomArray2.f2);
    console.log(newCustomArray2.f3);
    console.log(newCustomArray2.f4);
    console.log("---------------------");
    console.log([].f1);
    console.log([].f2);
    console.log([].f3);
    console.log([].f4);
    console.log("---------------------");
    console.log(newCustomArray.forEach);
    console.log(newCustomArray2.forEach);
    console.log([].forEach);
    console.log(Array.prototype.forEach); 
```

# android - Android模拟器中长按的键盘快捷键是什么？

> ID：14970890
> 
> 赞同：4
> 
> 时间：2013-02-20T01:43:59.120
> 
> 标签：android, android-emulator

我想知道Android模拟器中长按的键盘快捷键应该是什么？我有一个项目清单。如果长按项目，我已经创建了一个删除项目的功能。但我无法在我的模拟器中进行测试。如果我长时间按下鼠标，它仍然会触发点击事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T01:56:45.870

请查看您的代码，因为在模拟器中长按鼠标是长按/点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T18:53:00.200

确保您记得将长按侦听器添加到您的按钮。

例子：

```
//without lambda
button.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {   
            Toast.makeText(getApplicationContext(), "Button Long Clicked", Toast.LENGTH_SHORT).show();
            return true;
        }
    });

//using lambda
button.setOnLongClickListener(v -> {
        Toast.makeText(getApplicationContext(), "Button Long Clicked", Toast.LENGTH_SHORT).show();
        return true;
    }); 
```

[如此处所见](https://stackoverflow.com/questions/6156753/android-i-dont-understand-long-press-detection-in-my-subclass-imageview)

# css - CSS选择颜色在Chrome上表现异常

> ID：14970891
> 
> 赞同：8
> 
> 时间：2013-02-20T01:44:05.990
> 
> 标签：css

我正在尝试使用 CSS `::selection`伪元素更改我的网站的选择颜色。

正如在[这个 jsFiddle](http://jsfiddle.net/a3gfR/3/)中看到的，文本在被选中时应该具有完全黑色的背景颜色。在 Firefox 上，就是这种情况。

但是，在 Chrome 上，颜色*并不是绝对的黑色。*Chrome 似乎在摆弄我的颜色。

如果您[在选择 : 时将文本保留为黑色，则](http://jsfiddle.net/a3gfR/4/)可以看到这一点，在 Firefox 上，它变得不可见，而在 Chrome 上您仍然可以看到它。

我注意到我使用的其他背景颜色有这种效果：它们在 Chrome 上总是有点偏离。在我看来，添加了一点红色。

如何在 Chrome 上获得我想要的真实颜色？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T01:49:04.330

可能是为了防止您正在尝试做的事情，如果 Chrome 为 1，Chrome 似乎会更改选择的背景颜色的不透明度。您可以通过将不透明度设置为非常接近 1 来欺骗这一点，例如 ( `background-color: rgba(0,0,0,.99)`.

[http://jsfiddle.net/ExplosionPIlls/a3gfR/5/](http://jsfiddle.net/ExplosionPIlls/a3gfR/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-08T09:59:49.027

**当您**使用上面的建议时， **Firefox**在您选择它时仍会在**图像上显示****浅蓝色。**

 **我可以通过以下代码摆脱它：

```
img {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

图像现在被选择忽略。

**因此，通过应用**此代码，我可以在所有浏览器上获得更**统一的外观。**

```
*::selection {
    /* WebKit/Blink Browsers */
    background-color: rgba(0,0,0,.99); /* black */
    color: #ffffff; /* white */
}

*::-moz-selection {
    /* Gecko Browsers */
    background: #000000; /* black */
    color: #ffffff; /* white */
}

img {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T15:29:47.310

正如我在[单独的答案](https://stackoverflow.com/a/29413950/124119)中提到的，您可以使用的最接近的值是 about `0.996`。

另外，给它一个较低的不透明度，`img::selection`这样图像就不会在 Chrome 中完全被遮挡。

像这样：

```
::-moz-selection { background: rgba(255, 127, 127, 1); }
::selection { background: rgba(255, 127, 127, 0.996); }
img::selection { background: rgba(255, 127, 127, 0.8); } 
```**

# c# - 如何从elementhost viewmodel触发winform按钮

> ID：14970893
> 
> 赞同：1
> 
> 时间：2013-02-20T01:44:12.507
> 
> 标签：c#, wpf, winforms

我有一个使用 elementhost 显示视图的 winform。在我的 winform 上，我有一个 winform 按钮，当单击视图上的按钮时，我想隐藏它。有没有办法做到这一点？我只想知道如何通过我的视图模型与 winform 交互以获取视图。

表单.cs

```
VModel.DisableBtn += new ViewModel.EventHandler(_viewmodel_DisableExitFormButton); 

void _viewmodel_DisableExitFormButton()
{
    btnExitForm.Enabled = false;
} 
```

xml

```
<Button Name="btnSave" Command="{Binding SaveToDatabase}" /> 
```

视图模型

```
private ViewModel _viewModel;

private ViewModel VModel
{
    get
    {
        if (_viewModel == null)
        {
            _viewModel = new ViewModel();
        }

        return _viewModel;
    }
    set
    {
        _viewModel = value;
    }
}

public delegate void EventHandler();
public event EventHandler DisableBtn;

public ICommand SaveToDatabase
{
    get
    {
        if (SaveToDatabase == null)
        {
            SaveToDatabase = new RelayCommand(p => SaveToDB());
        }

        return SaveToDatabase;
    }
}

private void SaveToDB()
{
    DiasbleExitFormBtn();
}

private void DisableExitFormBtn()
{
    // need to disable form button here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:46:40.083

在 Winfrom 中，您可以注册 ViewModel 的一个事件，该事件将在您按下视图中的按钮时播放，然后在此事件发生时隐藏您的按钮。

例如：

视图模型：

```
public delegate void SomeHandler();

public event SomeHandler YourEventName; 
```

在您的 winfrom 注册本次活动：

```
YourViewModel.YourEventName+=new YourViewModel.SomeHandler(Event_YourEventName);

      void Event_YourEventName()
        {
            //HIDE YOUR BUTTON
        } 
```

在视图中按下按钮时通过命令运行事件。

希望这有帮助

编辑：

将此添加到您的视图模型

```
 private void OnButtonClicked()
    {
        if (YourEventName!= null)
        {
            YourEventName();
        }
    } 
```

在你的命令调用这个函数

```
private void DisableExitFormBtn()
{
    OnButtonClicked();
} 
```

**这应该引发事件并运行位于 winfrom 中的函数。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:19:52.007

您应该添加此代码以触发事件 DisableBtn

```
 private void DisableExitFormBtn()
    {
        if(DisableBtn!=null)
          {
            EventArgs e = new EventArgs();
            DisableBtn(this, e);
          }
        // need to disable form button here
    } 
```

更改以下内容：

```
public delegate void EventHandler(); // Comment this line or remove it
public event EventHandler DisableBtn; 
```

将其更改为：

```
void _viewmodel_DisableExitFormButton(object sender, EventArgs e)
{
    btnExitForm.Enabled = false;
} 
```

# scala - 不理解 scalaz endo 函数

> ID：14970899
> 
> 赞同：5
> 
> 时间：2013-02-20T01:45:12.997
> 
> 标签：scala, functional-programming, implicit-conversion, scalaz

在 scalaz 中，`endo`函数 in`Function1Ops`是这样实现的：

```
def endo(implicit ev: R =:= T): Endo[T] =
  Endo.endo(t => ev(self(t))) 
```

我很好奇为什么在`Endo.endo`函数体中，不只是简单地将 self... as `Endo.endo(self)`，其行为与`Endo.endo(t=> ev(self(t)))`.

这是我的模仿实现，我认为两者之间没有区别。我错过了什么？

```
def endo[R, T](f: R => T)(implicit ev: T =:= R) = (x: R)=> ev(f(x))
def endo2[R, T](f: R => T)(implicit ev: T =:= R) = f 
```

此外，第一个实现不会在运行时增加一些开销吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:00:49.263

该`Endo.endo`功能需要一个`A => A`. 该`self`值是一个`T => R`不符合`Endo`要求的函数。

理论上您可以`T => R`转换为，`T => T`但`ev`创建了参数，因此您不需要转换并意外犯错误`T => R`不等于`T => T`.

然而，他们可以这样写：

```
def endo(implicit ev: R =:= T): Endo[T] =
  Endo.endo(self andThen ev) 
```

您的示例编译，因为未设置返回类型。

# c++ - 如何在不关闭文件的情况下覆盖文件

> ID：14970906
> 
> 赞同：1
> 
> 时间：2013-02-20T01:45:57.173
> 
> 标签：c++, file-io

关于如何在不覆盖文件的情况下写入文件存在许多问题。

但是这次我需要知道如何打开一个文件，然后在其中写入一个包含几个字符的值。该值非常短，但是用更新的值替换文件内容的过程可能会发生十亿次。

所以这里又是一个问题：有没有办法通过打开一次而不是在多次覆盖内容之前关闭它来写入这样的文件？

也许如果我告诉你我为什么需要这个，它会帮助你给我一个更好的解决方案。我需要将模拟器的当前时间写入文件以供另一个模拟器读取和使用（出于同步目的）

和一个伪代码：

```
int main() {

    int i = 0;
 std::ofstream myWriteFile;
 ostringstream out;
 myWriteFile.open("text.txt");

 while (i < 4) {    
     out.str("");
     out << currentTime();
    myWriteFile << out.str() << std::endl;
    i++;
 }

myWriteFile.close();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:57:49.137

[在使用std::ostream::seekp](http://www.cplusplus.com/reference/ostream/ostream/seekp/)写入文件之前，将“put”指针定位到文件的开头：

```
myWriteFile.seekp(0); 
```

“put”指针指定要在文件中写入的位置。当你写东西时它会自动递增，这就是为什么连续写入文件会导致数据被附加到先前写入的数据的末尾。

# mysql - 规范化mysql中的表

> ID：14970908
> 
> 赞同：0
> 
> 时间：2013-02-20T01:45:59.130
> 
> 标签：mysql, database-normalization

我有一个表，其结构如下图所示：

![在此处输入图像描述](../Images/0766323aaa1829dc75a6cf498f14b8aa.png)

我需要编写查询，使得只有 n 行，其中 n 是上表中不同名称的总数。并且，每个名称的各个列中的所有条目都应包含在该行本身中。最终输出应如下所示：

![在此处输入图像描述](../Images/4b8214e69fe41d50dc5ae1eb77664d1f.png)

我首先考虑使用 UNION 运算符，但无法使用它，因为我不确定表中存在的各种列。也就是说，我不知道表中的列，因为可能会在运行时插入新列。但是，我有一个额外的优势，列数将是 7，这将始终相同。我唯一不知道的是他们的名字。

而且，在将这张表打印到纸上时，如何删除所有“NULL”并用空白替换它......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:31:04.657

你不需要`UNION`，你需要`GROUP BY`。

看起来您假设没有学生可以为某个标记设置多个非 NULL 值。

动态更改表结构是个坏主意。更好地将标记的名称存储在附加表中。这样您的查询将如下所示：

```
SELECT name
  , IF(MAX(mark1) IS NOT NULL, MAX(mark1), '') AS mark1
  , IF(MAX(mark2) IS NOT NULL, MAX(mark2), '') AS mark2
  , IF(MAX(mark3) IS NOT NULL, MAX(mark3), '') AS mark3
  , IF(MAX(mark4) IS NOT NULL, MAX(mark4), '') AS mark4
  , IF(MAX(mark5) IS NOT NULL, MAX(mark5), '') AS mark5
  , IF(MAX(mark6) IS NOT NULL, MAX(mark6), '') AS mark6
  FROM name_marks
  GROUP BY name
; 
```

[在 SQLFiddle 上查看](http://sqlfiddle.com/#!2/dfe8e/5 "在 SQLFiddle 上查看")

但是，同样，保存学生的分数是学生分数的倍数，这也是一个坏主意。最好`students`用`id`和`name`列创建一个表，并通过`id`. 并且为所有可能的标记保存包含列的记录也是一个坏主意。最好创建一个`courses`包含`id`和`course`列的表，以及一个包含`marks`和列的表。这在数据大小和灵活性方面是最佳的（您可以自由定义任意数量的课程）。`student_id``course_id``mark`

# iphone - @try @catch 块适用于 iOS 6 但不适用于 iOS 5

> ID：14970911
> 
> 赞同：-1
> 
> 时间：2013-02-20T01:46:08.343
> 
> 标签：iphone, ios, ipad, try-catch

我有一个表格视图，在单元格中有 2 个子视图（带有标签的小缩略图），如果没有要加载的内容（当只有第一个子视图具有要加载的图像和标题时），我想隐藏第二个子视图。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *reuse = @"reuse";
    ContentTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuse];
    if (cell == nil) {
        cell = [[[NSBundle mainBundle] loadNibNamed:[Utils buildNibNameFromPrefix:@"ContentTableViewCell"] owner:self options:nil] objectAtIndex:0];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    cell.cellIndex = indexPath.row;

    NSUInteger selectedIndex = [Utils getIndexForContentTitle:[Utils getContentBookmark]];
    NSUInteger titleIndex = indexPath.row * self.noOfContentPerCell;
    NSUInteger cellIndex = NSNotFound;
    for (int i = 0; i < self.noOfContentPerCell; i++) {
        @try {
            if (titleIndex == selectedIndex) {
                cellIndex = i;
            }

            NSArray *content;
            if ([[NSUserDefaults standardUserDefaults] boolForKey:@"unlock"] == NO) {
                content = CONTENT_INDEXS;
            }
            else {
                content = CONTENT_INDEXS_UNLOCKED;
            }

            NSString *title = [content objectAtIndex:titleIndex];
            [cell setTitle:title forContentAtIndex:i];

            NSString *thumbnail;

            if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone )
            {
                thumbnail = [NSString stringWithFormat:@"%@-iphone-thumbnail.jpg", title];
            }
            else
            {
                thumbnail = [NSString stringWithFormat:@"%@-ipad-thumbnail.jpg", title];
            }

            [cell setImageNamed:thumbnail atIndex:i];

            [cell showContainerAtIndex:i];
        }
        @catch (NSException *exception) {
            [cell hideContainerAtIndex:i];
        }
        titleIndex++;
    }

    return cell;
} 
```

它适用于 iOS 6，如果没有要加载的内容，@catch 隐藏此子视图，但在 iOS 5 上崩溃发生在：

```
NSString *title = [content objectAtIndex:titleIndex]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T02:07:29.923

这似乎很愚蠢。
- 我通常讨厌`Try/Catch`，除非没有其他办法。
- 为什么不检查该集合中是否`index`存在。
- 换句话说，不是查看是否会有 ，而是`error`检查会导致的**条件**`error`并处理它。

# c++ - 基类和派生类构造函数多态性问题

> ID：14970915
> 
> 赞同：3
> 
> 时间：2013-02-20T01:46:30.097
> 
> 标签：c++, inheritance, polymorphism

抱歉标题含糊。

我正在编写一组类，并且我无法想出一种直观的方法来分解基本构造函数中所做的事情和派生构造函数中所做的事情。

我的问题如下：

所有课程都要求按顺序完成步骤 A、C 和 E。因此将它们放在基本构造函数中是有意义的。

步骤 B 和 D 对于每个派生类都是唯一的。

不幸的是，B 必须*在*A*之后C**之前*完成，同样 D 必须*在*C之后E 之前完成。这些是 OpenGL 函数调用，我受限于它们的顺序。

 *我最初尝试了一些类似的东西，希望尽可能地封装在基类中：

```
public class MyBase
{
    MyBase()
    {
        A():
        B();
        C();
        D();
        E();  
    }
    void A() {...}
    void C() {...}
    void E() {...}
    virtual void B() = 0;
    virtual void D() = 0;
}

public class MyDerived : public MyBase
{
    MyDerived() : MyBase() {}
    void B() {...}
    void D() {...}
} 
```

但这在 C++ 中是不可能的......

除了：

```
public class MyBase
{
    MyBase() {}
    void A() {...}
    void B() {...}
    void C() {...}
}

public class MyDerived : public MyBase
{
    MyDerived()
    {
        A():
        B();
        C();
        D();
        E();  
    }
    void B() {...}
    void D() {...}
} 
```

我希望尽可能避免代码重复。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:02:27.233

如果您确实想在构造函数中调用它，并且不同意之后调用它，您可以通过执行以下操作来稍微减少混乱。

```
public class MyBase
{
    protected:
    void templateMethod()
    {
        A():
        B();
        C();
        D();
        E();  
    }
    private:
    void A() {...}
    void C() {...}
    void E() {...}
    virtual void B() = 0;
    virtual void D() = 0;
};

public class MyDerived : public MyBase
{
    MyDerived() : MyBase() {templateMethod();}
    void B() {...}
    void D() {...}
}; 
```

不过，这并不是一个真正的模板方法模式，因为现在所有派生类都必须调用它，而不是为基类调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:53:16.527

鉴于在构造函数中调用虚函数可能很危险，使用宏对您来说是一种可接受的解决方案吗？

```
#define MY_BASE_INIT A();B();C();D();E();

public class MyBase
{
    MyBase() {}
    void A() {...}
    void C() {...}
    void E() {...}
}

public class MyDerived : public MyBase
{
    MyDerived()
    {
        MY_BASE_INIT
    }
    void B() {...}
    void D() {...}
} 
```*

# perl - Catalyst Template::Toolkit 渲染输出

> ID：14970919
> 
> 赞同：6
> 
> 时间：2013-02-20T01:46:37.867
> 
> 标签：perl, render, output, catalyst, template-toolkit

我使用带有[Template::Toolkit的](http://template-toolkit.org/)[Catalyst](http://www.catalystframework.org/)作为我的模板系统。我希望能够渲染模板的特定部分，然后将它们返回给我，这样我就可以将它们存储在一个变量中。Template::Toolkit[文档](http://search.cpan.org/~ilmari/Catalyst-View-TT-0.40/lib/Catalyst/View/TT.pm#render)提到您可以这样做：

```
my $content = $c->forward($c->view('HTML'), "render", $template_name); 
```

但是，每当我这样做时，我都会收到此错误：

```
file error - : not found 
```

有谁知道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:23:57.630

`$c->forward( $class, $method, [, \@arguments ] )`[- 是来自Catalyst的](http://search.cpan.org/~bobtfish/Catalyst-Runtime-5.90019/lib/Catalyst.pm)*正向*方法的正确语法

因此你应该这样写：

`my $content = $c->forward($c->view('HTML'), "render", [ $template_name ]);`

# jquery - 单击清除按钮后如何保持jquery change（）不触发

> ID：14970920
> 
> 赞同：0
> 
> 时间：2013-02-20T01:46:46.143
> 
> 标签：jquery

我有一个带有 1-5 个输入框的搜索 UI，它们会在其 change() 事件上产生 ajax 操作。

我还有一个“清除标准”按钮，单击该按钮应清除输入框。这工作正常，但我有一个我想摆脱的副作用。

如果用户在搜索输入中输入了数据，但尚未离开该字段（即 change() 尚未触发），并且他们单击“清除条件”，这会导致更改触发并发生 ajax 操作，然后输入框清除。

如果用户单击“清除”按钮，我想阻止 change() 发生。

我开始编写`serachChangeHandler`函数，但还没有弄清楚如何识别输入框是否失去了对`.ui-clear`按钮的焦点。

**我的问题是：** 我可以在变更处理程序中告诉焦点在哪里，还是应该从不同的方向解决问题？

* * *

我的相关 javascript 如下所示：

```
function displayResults(data) {
    $('.searchResults').html(data);
}

function searchChangeHandler(e) {
    ajaxSearch();
}

function ajaxSearch() {
    $('#selectedRecord').empty();
    if (isSearchable()) {
        var myForm = $('#searchForm');
        $.post(myForm.URL, myForm.serialize(), displayResults);
    } else {
        $('.searchResults').empty();
    }
}

function displayRecord(data) {
    $('#selectedRecord').html(data);
}

function searchResultClick(e) {
    $('.searchResult').removeClass('selected');
    $(this).addClass('selected');
    $.ajax({
        url: this.id,
        success: displayRecord,
        dataType: "html"
    });
}

function clearSearchClick() {
    $('.search input:text').val("");
    toggleClearButton(false);
    $('.searchResults').empty();
    $('.first').focus();
}

function isSearchable() {
    var allCrit = "";
    $('.search input:text').each(function () {
        allCrit += $(this).val();

    });
    return allCrit !== "";
}

function toggleClearButton(callback) {
    $('.ui-clear').toggleClass("clear-enabled", callback);
}

$(function () {
    toggleClearButton(isSearchable());
    $('.ui-clear').click(clearSearchClick);
    $('.search input:text').focusout(searchChangeHandler);
    $('.search input:text').keyup(function () { toggleClearButton(isSearchable()); });

    $(document).keypress(function (event) {
        if (event.which === 13) {
            event.preventDefault();
            ajaxSearch();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:30:04.067

只是一个想法`setTimeout`

```
function clearSearchClick(){
    $('.search input:text').val('');
}

function searchChangeHandler(){
    setTimeout(function(){
        if( isSearchable() )
        {
            // Fire your ajaxSearch() function
        }
    }, 500);
}

$(function(){
    $('.ui-clear').click(clearSearchClick);
    $('.search input:text').focusout(searchChangeHandler);
}); 
```

**更新：**同样在你的`$(document).keypress(...)`你应该调用`searchChangeHandler()`函数而不是直接调用`ajaxSearch()`函数，因为`searchChangeHandler()`正在检查输入的状态并`ajaxSearch()`在超时后触发。

[**演示**](http://jsfiddle.net/uHdTf/4/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T02:18:36.423

看起来这个位是导致问题的原因：

```
$('.search input:text').focusout(searchChangeHandler); 
```

这里的这个函数被调用：

```
function searchChangeHandler(e) {
    ajaxSearch();
} 
```

***** 编辑*** *** 应该能够删除这两个功能，问题应该消失！**

# css - CSS：z-index 错误？

> ID：14970923
> 
> 赞同：0
> 
> 时间：2013-02-20T01:47:00.050
> 
> 标签：css, z-index

我有一个摄影网页，在右上角显示用于切换语言的标志，在中间显示一个下拉菜单（两者`position: fixed`）。请看一下： http: [//luis.impa.br/photo](http://luis.impa.br/photo)

如果将窗口水平缩小到标志越过菜单的程度，则可以看到标志越过菜单。但是，如果您检查元素，您会看到（包含的 div）标志的 z-index 为 90，而菜单的 z-index 为 100。

怎么会这样？不应该是相反的吗？这在 Chrome (PC) 和 Dolphin (Android) 中都会发生。Firefox 工作得很好。这是前两个浏览器的错误吗？同样的错误？

如果您认为这很疯狂，请向下滚动页面，直到看到`new`红色标签（例如，现在在蝴蝶图标上方）越过菜单。如果你缩小页面，你可以看到`new`标志和菜单之间的标记......再一次，Firefox 完美运行，而 Chrome 和 Dolphin 则一团糟。两个浏览器有完全相同的错误？？

要么我不了解 z-index 的工作原理，要么这是一个错误。更有可能的是，两者兼而有之。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:52:56.940

**这没有什么疯狂的！**你已经给`z-index`了`.ddsmoothmenu ul`，它没有`position`with 值，`absolute`或者`relative`。所以，`z-index`这里不起作用！但对于你的情况，这有效：

```
div#centmenu {z-index: 100;} 
```

# r - 使用 Procrustes 分析比较两个 3D 点云的形状

> ID：14970924
> 
> 赞同：2
> 
> 时间：2013-02-20T01:47:03.750
> 
> 标签：r, geometry, shape, shapes

我有两个三维点云。我想比较它们的形状和范围。我认为[Procrustes Analysis](http://en.wikipedia.org/wiki/Procrustes_analysis)是要走的路。我已经安装了包' [shapes](http://cran.r-project.org/web/packages/shapes/) '，它提供了几种类型的Procrustes Analysis，例如General Procrustes Analysis (GPA)。我想，我在这里遗漏了一些东西。我期待一个函数，我将两个 3D 矩阵传递给它，它将返回一个关于它们匹配/相关程度的值，例如一个介于 0 - 1 之间的值。类似于：

```
procrustes.distance(A,B) # A and B each being 3x100 
```

基本上类似于Matlab 中的[procrustes](http://www.mathworks.com/help/stats/procrustes.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:29:36.240

感谢 Julien Claude 的书`Morphometrics with R`，我们有一些方便的代码来执行与 matlab 函数相同的操作。

他提供了一些函数来计算完整的 Procrustes 距离，他将其定义为“叠加配置的同源坐标之间的平方距离之和的平方根”，就像定义 matlab 函数一样。

```
# first, scale the coordinates to unit centroid size, and return both the scaled coords and the centroid size

centsiz<-function(M)
       {p<-dim(M)[1]
         size<-sqrt(sum(apply(M, 2,var))*(p-1))
         list("centroid_size" = size,"scaled" = M/size)}

# second, translate the coords so that its centroid is set at the origin

trans1<-function(M){scale(M,scale=F)}

# third, prepare the fPsup function to perform the full Procrustes superimposition of M1 onto M2\. In the output, DF is the Full Procrustes distance between M1 and M2.

fPsup<-function(M1, M2) { 
       k<-ncol(M1)
          Z1<-trans1(centsiz(M1)[[2]])
          Z2<-trans1(centsiz(M2)[[2]])
          sv<-svd(t(Z2)%*%Z1)
          U<-sv$v; V<-sv$u; Delt<-sv$d
          sig<-sign(det(t(Z2)%*%Z1))
          Delt[k]<-sig*abs(Delt[k]) ; V[,k]<-sig * V[,k]
          Gam<-U%*%t(V)
          beta<-sum(Delt)
          list(Mp1=beta*Z1%*%Gam,Mp2=Z2,rotation=Gam,scale=beta,
                  DF=sqrt(1-beta^2))}

# test it out...
library(shapes) # so we can use the built-in data
data(gorf.dat) # Female gorilla skull data, 8 landmarks in 2 dimensions, 30 individuals

# calculate procrustes distance for individuals 1 and 2
fPsup(gorf.dat[,,1], gorf.dat[,,2])$DF
[1] 0.0643504

# Claude provides a check with a function that calculates the interlandmark distances between two configurations, which we can then sqrt the sum of to get the matlab-defined procrustes distance. 

ild2<-function(M1, M2){sqrt(apply((M1-M2)^2, 1, sum))}

# test it out...
test<-fPsup(gorf.dat[,,1], gorf.dat[,,2])
test$DF
[1] 0.0643504
sqrt(sum(ild2(test$Mp1, test$Mp2)^2))
[1] 0.0643504 # the same 
```

如果你只想坚持使用这个`shapes`包，黎曼形状距离函数计算几乎相同的结果：

```
library(shapes)
riemdist(gorf.dat[,,1], gorf.dat[,,2])
[1] 0.0643949 
```

**更新**我与`shapes`包的作者 Ian Dryden 有过一些通信。他写道，要获得完整的 Procrustes 距离，您只需要使用`sin(riemdist)`. 所以前两个雌性大猩猩之间的完整 Procrustes 距离是：

```
sin(riemdist(gorf.dat[,,1],gorf.dat[,,2])) 
[1] 0.0643504 
```

如果我们想创建自己的函数`fpdist`来做同样的事情：

```
fpdist<-function(x, y, reflect = FALSE){
sin(riemdist(x,y,reflect=reflect))
}

fpdist(gorf.dat[,,1],gorf.dat[,,2]) 
[1] 0.0643504 
```

请注意，上面使用的大猩猩数据是 2D 的，但 3D 数据也可以正常工作：

```
library(shapes) # so we can use the built-in data
data(macm.dat) # Male macaque skull data. 7 landmarks in 3 dimensions, 9 individuals

# calculate procrustes distance for macaque individuals 1 and 2
# Claude's method 1
fPsup(macm.dat[,,1], macm.dat[,,2])$DF
[1] 0.1215633

# Claude's method 2
test<-fPsup(macm.dat[,,1], macm.dat[,,2])
sqrt(sum(ild2(test$Mp1, test$Mp2)^2))
[1] 0.1215633

# using the shapes package
fpdist(macm.dat[,,1], macm.dat[,,2])
[1] 0.1215633 
```

那是你所追求的吗？

# c# - 如何使 MSMQ 队列更快？是否有批量发送，所以至少不是 1 比 1？

> ID：14970925
> 
> 赞同：0
> 
> 时间：2013-02-20T01:47:09.390
> 
> 标签：c#, performance, wcf, msmq, msmq-transaction

我有以下代码，不是那么慢，也不是那么快。有没有办法改善这一点？我目前在 5 到 10 秒内收到 1000 条消息，我认为这还不理想。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <netMsmqBinding>
        <binding name="NetMsmqBinding_IProductService"
                 deadLetterQueue="System"
                 maxReceivedMessageSize="524288">
          <readerQuotas maxDepth="32"
                        maxStringContentLength="524288"
                        maxBytesPerRead="524288"/>
          <security mode="None"/>
        </binding>
      </netMsmqBinding>
    </bindings>
    <client>
      <endpoint address="net.msmq://localhost/private/Products" binding="netMsmqBinding"
        bindingConfiguration="NetMsmqBinding_IProductService" contract="Products.IProductService"
        name="NetMsmqBinding_IProductService" />
    </client>
  </system.serviceModel>
</configuration> 
```

请与处理器无关的答案，我的意思是配置方面如何使其更快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:34:31.317

使用 .net 4.5，您可以使用压缩，但这需要从下到上完全重写您的绑定。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="CompressedNetMsmqBinding_IProductService"
                 >

          <binaryMessageEncoding compressionFormat="GZip" >
            <readerQuotas maxDepth="32"
                          maxStringContentLength="524288"
                          maxBytesPerRead="524288"/>
          </binaryMessageEncoding>
          <msmqTransport
                 deadLetterQueue="System"
                 maxReceivedMessageSize="524288"/>
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint address="net.msmq://localhost/private/Products" binding="netMsmqBinding"
        bindingConfiguration="NetMsmqBinding_IProductService" contract="Products.IProductService"
        name="CompressedNetMsmqBinding_IProductService" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:01:38.050

如果性能是您唯一需要并愿意牺牲持久性的东西，那么我建议您调查非事务性内存队列。它们没有事务开销，并且由于它们没有序列化到磁盘，它们非常快。但是，如果您处于分布式环境中，您仍然必须处理网络延迟。

希望这可以帮助，

# html - 如何确定是否已为上传表单设置文件但尚未提交？

> ID：14970930
> 
> 赞同：1
> 
> 时间：2013-02-20T01:47:25.057
> 
> 标签：html, forms, file-upload

假设我正在使用 HTML 表单来允许用户将文件上传到我的网站。我如何确定他们是否已经从硬盘驱动器中选择了一个文件，但尚未提交表单。我想使用这些信息来确定是否应该发出某种警报来提醒他们提交表单。我正在使用 PHP，所以我可以使用`isset()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:48:31.820

您不能使用 PHP 执行此操作，因为它驻留在服务器端并且在浏览器提交请求之前无法对浏览器执行任何操作。

# windows-8 - 如何在 Windows 8 中以 GUID 格式获取硬件 ID

> ID：14970932
> 
> 赞同：0
> 
> 时间：2013-02-20T01:47:41.900
> 
> 标签：windows-8, guid

我正在开发一个 Windows Store 应用程序（又名 Metro 应用程序）。我需要以 GUID 格式获取机器 ID。

我有这个代码：

```
var token = HardwareIdentification.GetPackageSpecificToken(null);
var hardwareId = token.Id;
byte[] bytes = new byte[hardwareId.Length];
dataReader.ReadBytes(bytes);
String machineId = BitConverter.ToString(bytes); 
```

machineId 是一个字符串，但它与 GUID 不匹配。有人知道如何将此值转换为 GUID 格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:37:48.183

试试下面的代码。它基于另一个[SO 线程](https://stackoverflow.com/questions/350500/how-to-convert-a-string-to-a-guid)的代码。

```
 private async void  Button_Click_1(object sender, RoutedEventArgs e)
    {
        //dataReader.ReadBytes(bytes);
        String machineId = BitConverter.ToString(bytes);

        Guid guid;

        bool isDataAVailale = GuidTryParse(machineId, out guid);

        myText.Text = guid.ToString();

    }

    public static bool GuidTryParse(string s, out Guid result)
    {
        if (!String.IsNullOrEmpty(s) && guidRegEx.IsMatch(s))
        {
            result = new Guid(s);
            return true;
        }

        result = default(Guid);
        return false;
    }

    static Regex guidRegEx = new Regex("^[A-Fa-f0-9]{32}$|" +
                          "^({|\\()?[A-Fa-f0-9]{8}-([A-Fa-f0-9]{4}-){3}[A-Fa-f0-9]{12}(}|\\))?$|" +
                          "^({)?[0xA-Fa-f0-9]{3,10}(, {0,1}[0xA-Fa-f0-9]{3,6}){2}, {0,1}({)([0xA-Fa-f0-9]{3,4}, {0,1}){7}[0xA-Fa-f0-9]{3,4}(}})$", RegexOptions.Singleline); 
```

# c++ - c++ 链接失败，未定义对 libboost_thread 的引用

> ID：14970934
> 
> 赞同：0
> 
> 时间：2013-02-20T01:47:46.923
> 
> 标签：c++, multithreading, gcc, boost, linker

刚开始使用 boost 线程进行多线程；我有一个 Hello World 类型的程序，它在链接到线程库期间失败。以下是终端窗口输出：

```
 g++ -Wall -I/usr/include HelloWorld.cpp -L/usr/local/lib -pthread -lboost_thread -lrt -lboost_system
/tmp/ccTKHnfd.o: In function `main':
HelloWorld.cpp:(.text+0x4a): undefined reference to `boost::thread::join()'
HelloWorld.cpp:(.text+0x5b): undefined reference to `boost::thread::~thread()'
HelloWorld.cpp:(.text+0x70): undefined reference to `boost::thread::~thread()'
/tmp/ccTKHnfd.o: In function `boost::thread::thread<void (*)()>(void (*)(), boost::disable_if<boost::is_convertible<void (*&)(), boost::detail::thread_move_t<void (*)()> >, boost::thread::dummy*>::type)':
HelloWorld.cpp: (.text._ZN5boost6threadC2IPFvvEEET_NS_10disable_ifINS_14is_convertibleIRS4_NS_6detail13thread_move_tIS4_EEEEPNS0_5dummyEE4typeE[_ZN5boost6threadC5IPFvvEEET_NS_10disable_ifINS_14is_convertibleIRS4_NS_6detail13thread_move_tIS4_EEEEPNS0_5dummyEE4typeE]+0x23): undefined reference to `boost::thread::start_thread()'
collect2: ld returned 1 exit status 
```

我使用 aptitude 安装了 boost dev 库 1.48，并相信我为编译器使用了所有正确的标志。我错过了什么？我的 gcc 是 4.6.3。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:55:52.370

看起来你找不到 libboost_thread.so 或 libboost_thread.a。/usr/local/lib 中实际有什么？你可以做

`ls /usr/local/lib | grep thread`. 如果您没有看到 libboost_thread.so 或 libboost_thread.a，那么这就解释了为什么您有未定义的引用 - 实现这些函数的对象实际上并不存在。

此外，如果您没有看到 libboost_thread.so 但看到 libboost_thread.so.3.6 或其他内容（表示特定版本），那么您可以执行以下两项操作之一：直接链接到该链接或创建符号链接（即`sudo ln -s /usr/local/lib/libboost_thread.so.3.6 /usr/local/lib/libboost_thread.so`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:45:06.280

可能您需要将“-mt”后缀附加到 lib 标志：例如 -lboost_thread-mt 您可以仔细检查您的 boost 库路径。

# c - 用C打印出机器的所有用户

> ID：14970938
> 
> 赞同：1
> 
> 时间：2013-02-20T01:47:55.067
> 
> 标签：c, linux, printing

我一直在寻找几个小时，似乎无法弄清楚这一点。我知道如何打印将当前用户放在 C 中的机器上，但是如何使用 C 打印出机器上存在的所有用户。（我正在运行 linux 机器）感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:59:13.240

机器的用户列在 /etc/passwd 中。过滤所有“人类”用户的好方法是

```
cat /etc/passwd | grep "/home" |cut -d: -f1 
```

因为人类用户通常有一个主目录。

现在，要在 C 中调用它，您可以使用 popen。看一眼

```
man popen 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T02:00:51.670

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <pwd.h>

int main(int argc, char ** argv)
{
    // You can restrict the range of UIDs 
    //   depending on whether you care about system users or real users
    int minUID = 0;
    int maxUID = 10000;
    for (int i = minUID; i < maxUID; ++i)
    {
        struct passwd * p = getpwuid(i);
        if (p != NULL)
            printf("%d : %s\n", i, p->pw_name);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T02:03:57.927

在 UNIX 机器上，使用[`pwent`](http://www.kernel.org/doc/man-pages/online/pages/man3/getpwent.3.html)一系列函数：

```
#include <sys/types.h>
#include <pwd.h>

int main() {
    struct passwd *p;
    while((p = getpwent())) {
        printf("name: %s\n", p->pw_name);
    }
} 
```

这将查阅系统的权威用户数据库，不一定是`/etc/passwd`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T02:06:47.327

在 BSD 上测试。

```
#include <sys/types.h>
#include <pwd.h>
#include <stdio.h>

int main(int argc, char** argv) {
struct passwd *pwd;

while((pwd = getpwent())!=NULL) {
printf("%s\n",pwd->pw_name);

}
return 0;
} 
```

# iphone - 更改日期格式

> ID：14970939
> 
> 赞同：-2
> 
> 时间：2013-02-20T01:47:56.430
> 
> 标签：iphone, ios

1.  如何更改日期：2013 年 2 月 19 日星期二 08:01:01 GMT

2.  我想将其更改为：2013-2-19 08:01:01 我搜索更多但没有

3.  找到任何答案，如果你知道，请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:56:07.400

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSString *timeString = [dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:date]]; 
```

你会得到`2013-2-19 08:01:01`

您可以看到更多 NSDateFormatter 信息：t [​​his](http://unicode.org/reports/tr35/#Date_Format_Patterns)

和 dateFormatter 设置如下：`@"EEE, d MMM yyyy HH:mm:ss zzz"`你也许可以得到`Tue, 19 Feb 2013 08:01:01 GMT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:52:49.157

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"dd/MMM/"];
_dateDisplay.text = [df stringFromDate:myDate]; 
```

我知道这不是您想要的日期格式，但它应该让您走上正确的轨道

# java - 在java中递归地找到数组中最长的递增序列

> ID：14970940
> 
> 赞同：2
> 
> 时间：2013-02-20T01:48:03.197
> 
> 标签：java, arrays, recursion

例如，这是数组 [1, 4, 9, 2, 6, 7, 3, 5, 8, 10]。1,2,3,5,8,10 就是答案

那么我如何通过递归解决这个问题。

谢谢你的帮助。

```
public class 4b {

   public static int getLongetsLadder(int[] array){
   int i=0; 
   int[] result = recursive(array,i); 

   return 0; 
   }
   public static int[] recursive(int[] array, int i)
   {
   return null;
   }

   public static int[] recurse(int  i, int arr[])
   {
       int[] answer = new int[1];
       answer[0]= arr[i];

       return answer;

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:05:06.203

在Java中实现离子如下：

```
public static Integer[] recurse(int i, int li, int arr[]) {

    if(i == arr.length)
        return new Integer[0];

    boolean choice = (li == -1) || arr[li] < arr[i];
    /* now you have choice to choose it or skip it */
    if(choice) {
        /* choose it */
        ArrayList<Integer> l = new ArrayList<Integer>();
        l.add(i);
        for(Integer v : recurse(i + 1, i, arr)) {
            l.add(v);
        }

        /* dont choose it */
        ArrayList<Integer> r = new ArrayList<Integer>();
        for(Integer v : recurse(i + 1, li, arr)) {
            r.add(v);
        }

        /* return largest */
        return l.size() > r.size() ? l.toArray(new Integer[0]) : r.toArray(new Integer[0]);
    }

    /* skip and proceed */
    return recurse(i + 1, li, arr);
} 
```

应该这样称呼它：

```
public static void main(String[] args) {
    findLargest(1, 4, 9, 2, 6, 7, 3, 5, 8, 10);
}
public static void findLargest(int ... vals) {
    Integer[] longest = recurse(0, -1, vals);
    for(Integer i : longest) {
        System.out.println(vals[i]);
    }
} 
```

上述调用的结果是`1, 2, 3, 5, 8, 10`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T10:10:31.923

这是一个可以运行的工作示例。它基于这样的想法，即在每一步中，您尝试将当前项目包含在搜索递增序列中（仅当它通过实际大于最后一个项目的条件时），或者排除（忽略）当前项目的序列。这样你就可以递归覆盖所有可用的路径。

*IntList.java*

```
public class IntList {
    private IntNode _head;

    public IntList() {
        _head = null;
    }

    public IntList(IntNode node) {
        _head = node;
    }

    public int longest() {
        return longest2(_head,0);
    }

    public int longest(IntNode current,int max) {
        if (current.getNext() == null)
        {
            if (current.getValue() > max)
                return 1;

            return 0;
        }

        int with, without;

        without = longest2(current.getNext(),max);

        if (current.getValue() > max) {
            with = 1 + longest2(current.getNext(), current.getValue());
            return Math.max(with,without);
        }

        return without;
    }
} 
```

*IntNode.java*

```
public class IntNode {
    private int _value;
    private IntNode _next;

    public IntNode(int val, IntNode n) {
        _value = val;
        _next = n;
    }

    public int getValue()     {
        return _value;
    }

    public IntNode getNext()  {
        return _next;
    }
    public void setValue(int v)  {
        _value = v;
    }
    public void setNext(IntNode node)  {
        _next = node;
    }
} 
```

*主.java*

公共类主要{公共静态无效主要（字符串[]参数）{

```
 IntNode n1 = new IntNode(3, null);
        IntNode n2 = new IntNode(5, n1);
        IntNode n3 = new IntNode(10, n2);
        IntNode n4 = new IntNode(5, n3);
        IntNode n5 = new IntNode(1, n4);
        IntNode n6 = new IntNode(4, n5);
        IntNode n7 = new IntNode(2, n6);
        IntList list = new IntList(n7);
        System.out.println("should be 4, is: " + list.longest());

        IntNode n11 = new IntNode(7, null);
        IntNode n21 = new IntNode(6, n11);
        IntNode n31 = new IntNode(5, n21);
        IntNode n41 = new IntNode(4, n31);
        IntNode n51 = new IntNode(3, n41);
        IntNode n61 = new IntNode(2, n51);
        IntNode n71 = new IntNode(1, n61);
        IntList list2 = new IntList(n71);
        System.out.println("should be 7, is: " + list2.longest());

        IntNode n12 = new IntNode(10, null);
        IntNode n22 = new IntNode(5, n12);
        IntNode n32 = new IntNode(5, n22);
        IntNode n42 = new IntNode(1, n32);
        IntNode n52 = new IntNode(1, n42);
        IntNode n62 = new IntNode(4, n52);
        IntNode n72 = new IntNode(2, n62);
        IntList list3 = new IntList(n72);
        System.out.println("should be 4, is: " +list3.longest());

        IntNode n13 = new IntNode(7, null);
        IntNode n23 = new IntNode(4, n13);
        IntNode n33 = new IntNode(3, n23);
        IntNode n43 = new IntNode(1, n33);
        IntNode n53 = new IntNode(8, n43);
        IntNode n63 = new IntNode(5, n53);
        IntNode n73 = new IntNode(1, n63);
        IntList list4 = new IntList(n73);
        System.out.println("should be 4, is: " + list4.longest());
    }
} 
```

# asp.net - ASP.NET MVC4 中基于配置的身份验证

> ID：14970941
> 
> 赞同：0
> 
> 时间：2013-02-20T01:48:15.223
> 
> 标签：asp.net, authentication, asp.net-mvc-4, forms-authentication

我有一个 ASP.NET MVC4 网页，在大多数情况下，无需身份验证即可访问。我想保护一个页面以供管理员访问（特别是 ELMAH 的错误日志）。由于我只需要一个管理员登录，我想避免维护用户/密码数据库的复杂性。

我做了一些研究，发现以前版本的 ASP.NET 提供了使用在 web.config 中加密的密码的表单身份验证的能力：

```
<forms loginUrl="Admin" name=".ASPXFORMSAUTH">
  <credentials passwordFormat="SHA1">
    <user name="admin" password="encryptedPassword" />
  </credentials>
</forms> 
```

然后，身份验证控制器使用`FormsAuthentication.Authenticate`和`FormsAuthentication.RedirectFromLoginPage`来验证输入的凭据。但是，我对使用此解决方案犹豫不决，因为：

1.  该`FormsAuthentication.Authenticate`API 现在[已过时](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.authenticate.aspx)。
2.  `FormsAuthentication.RedirectFromLoginPage`将直接重定向用户，而不是返回`RedirectResult`. 这不遵循 MVC 控制器管道，因此单元测试之类的事情会更加困难。

查看 MSDN 示例和默认模板，WebMatrix 的 API 似乎[`WebSecurity.Login`](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.login%28v=vs.111%29.aspx)是在 MVC 应用程序中进行表单身份验证的新标准。但是，我还没有找到使用本地（即基于配置）身份验证提供程序的方法。

是否有推荐的方法进行本地身份验证，或者这被认为是一种不好的做法？在不承担外部依赖关系的情况下提供管理员身份验证的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:42:07.487

`WebSecurity.Login`不是身份验证的“新标准”。它更像是新的“新手友好标准”。WebSecurity 仅真正支持 SimpleMembership，而且它实际上是为简单的应用程序设计的。

`FormsAuthentication.Authenticate`很长一段时间以来一直不是一个好的选择，所以现在正式弃用它并不是什么大不了的事。

无论如何，您可能应该使用 Membership，并使用 Membership.ValidateUser 来验证凭据。或者，使用类似 Windows Identity Foundation 的东西。

# matlab - 如何将 Matlab 工作区数据打包/解包到二进制文件中？

> ID：14970943
> 
> 赞同：3
> 
> 时间：2013-02-20T01:48:22.857
> 
> 标签：matlab, binaryfiles

我想将 Matlab 工作区中的一些数据打包到一个二进制文件中，然后能够在以后将这些数据恢复到工作区中。（数据构成遥测数据日志标题的一部分。将生成遥测的数据直接包含在文件中很有用。）

我知道`load`and`save`命令会做到这一点，但我认为我的情况是独一无二的。将工作区数据保存到文件后，我有另一个程序（用 C 编写）打开文件并将遥测数据附加到文件中。我不认为`load`并且`save`会处理这个。

我使用[`cstruct`](http://www.mathworks.com/matlabcentral/fileexchange/4048-cstruct)Mathworks File Exchange 上的工具将数据打包到 blob 中并使用`fwrite`. 这种方法需要`cstruct`注意的是，在解包时必须注意打包格式。数据的格式已经改变并且很可能会再次改变，所以最好去掉这个要求。

理想情况下，我想将字节数 X 写入文件头，然后是包含 MAT 格式数据的二进制 blob（大小为 X），然后是可变大小的遥测数据 blob。当我想解压数据时，我读取 X 字节的数据，将其解释为 MAT 文件，然后它神奇地出现在工作区中。

有没有办法将工作区变量打包成二进制 blob，然后在不知道它们的结构的情况下将它们解包，**但是二进制数据存储为更大文件的一部分**？

*编辑：添加了我不认为`load`并且`save`是我需要的说明。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:56:56.643

Matlab 的[保存](http://www.mathworks.com/help/matlab/ref/save.html)命令正是您想要的。要再次加载变量，请使用[load](http://www.mathworks.com/help/matlab/ref/load.html)。

**更新：**现在我明白你想要做什么了。我最好的想法是使用 .mat 创建一个文件`save`，然后将该文件嵌入到您的自定义二进制文件中（只需复制字节）。要恢复 Matlab 数据，请提取这些字节以创建一个新的 .mat 文件，然后使用`load`. 这个方法很好，因为你做了最少的二进制格式，它可以处理*任何*Matlab 数据。

额外提示：临时 .mat 文件的好地方是[tempdir](http://www.mathworks.com/help/matlab/ref/tempdir.html)。

# ios - 自定义 rightBarButtonItem 消失

> ID：14970948
> 
> 赞同：0
> 
> 时间：2013-02-20T01:48:33.403
> 
> 标签：ios, uitabbarcontroller, custom-controls, uinavigationbar, rightbarbuttonitem

我在 NavBar 中有一个自定义 rightBarButtomItem 的奇怪错误。我有一个 TabBar 应用程序。如果应用程序已加载，则按钮显示正确。如果我单击选项卡，则按钮会一直显示。如果我回到已经显示的选项卡之一，按钮就会消失。最后，该按钮仅随机显示在其中一个选项卡中。

如果我以编程方式设置标准 rightBarButtomItem，我的代码可以完美运行。但不适用于自定义图形。如果 ChildViewController 被按下并弹出，按钮会再次出现。它似乎仍然存在但不可见！

我认为我在 CustomTabBarViewController 中对 sharedRightButton 的引用是错误的！

有人可以帮忙吗？

CustomTabBarController.h

```
 #import <UIKit/UIKit.h>
    #import "EZBadgeView.h"

    @interface CustomTabBarController : UITabBarController
    {
        EZBadgeView *badgeView;
        UIButton *btn;
        UIImage *rightBarButtonItemImage;
        UIImage *rightBarButtonItemImageTapped;
        UIImage *rightBarButtonItemImageSelected;
    }

    @property (nonatomic, strong) UIBarButtonItem *sharedRightButton;
    @property (nonatomic, strong) EZBadgeView *badgeView;
    @property(nonatomic, strong) UIButton *btn;
    @property(nonatomic, strong) UIImage *rightBarButtonItemImage;
    @property(nonatomic, strong) UIImage *rightBarButtonItemImageTapped;
    @property(nonatomic, strong) UIImage *rightBarButtonItemImageSelected;

    @end 
```

CustomTabBarController.m

```
 #import "CustomTabBarController.h"

    @interface CustomTabBarController ()

    @end

    @implementation CustomTabBarController

    @synthesize sharedRightButton, badgeView, btn, rightBarButtonItemImage, rightBarButtonItemImageSelected, rightBarButtonItemImageTapped;

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            // Custom initialization
        }
        return self;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateBadgeNumber:) name:@"updateBadgeNumber" object:nil];

        if (self.badgeView && self.badgeView.superview)
        {
            [self.badgeView removeFromSuperview];
        }
        self.badgeView = [[EZBadgeView alloc] init];
        CGRect badgeFrame = self.badgeView.frame;
        badgeFrame.origin.x = 31.0f;
        badgeFrame.origin.y = -6.0f;
        badgeFrame = CGRectIntegral(badgeFrame);
        self.badgeView.frame = badgeFrame;
        self.badgeView.badgeBackgroundColor = [self colorWithRGBHex:kRed withAlpha:1.0f];
        self.badgeView.userInteractionEnabled = NO;
        self.badgeView.badgeTextFont = [UIFont fontWithName:@"BrownStd-Bold" size:12];
        self.badgeView.shouldShowGradient = NO;
        self.badgeView.shouldShowShine = NO;

        // Allocate UIButton
        self.btn = [UIButton  buttonWithType:UIButtonTypeCustom];
        self.btn.frame = CGRectMake(0, 0, 46, 30);

        self.rightBarButtonItemImage = [UIImage imageNamed:@"button_mixer.png"];
        [self.btn setBackgroundImage:rightBarButtonItemImage forState:UIControlStateNormal];
        self.rightBarButtonItemImageTapped = [UIImage imageNamed:@"button_mixer_pressed.png"];
        [self.btn setBackgroundImage:rightBarButtonItemImageTapped forState:UIControlStateHighlighted];
        self.rightBarButtonItemImageSelected = [UIImage imageNamed:@"button_mixer_active.png"];
        [self.btn setBackgroundImage:rightBarButtonItemImageSelected forState:UIControlStateSelected];

        [self.btn addTarget:self action:@selector(clickedTest:) forControlEvents:UIControlEventTouchUpInside];
        [self.btn setBackgroundColor:[UIColor clearColor]];
        [self.btn addSubview:self.badgeView]; //Add NKNumberBadgeView as a subview on UIButton

        // Initialize UIBarbuttonitem...
         self.sharedRightButton = [[UIBarButtonItem alloc] initWithCustomView:btn];
         self.badgeView.badgeValue = @"0";
         self.badgeView.hidden = YES;
    }

    - (void)updateBadgeNumber:(NSMutableArray *)soundArray
    {
        self.badgeView.badgeValue = [NSString stringWithFormat:@"%i",[soundArray count]];
        self.badgeView.hidden = ([soundArray count] == 0);
    }

    - (void)clickedTest:(id)sender
    {
        NSLog(@"%s", __FUNCTION__);
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    - (UIColor *)colorWithRGBHex:(UInt32)hex withAlpha:(float)alpha
    {
        int r = (hex >> 16) & 0xFF;
        int g = (hex >> 8) & 0xFF;
        int b = (hex) & 0xFF;

        return [UIColor colorWithRed:r / 255.0f
                               green:g / 255.0f
                                blue:b / 255.0f
                               alpha:alpha];
    }

    @end 
```

我在每个视图中都设置了这样的按钮：

```
@implementation MyVC

@synthesize tabBarController;

    - (void)viewDidLoad
    {
        //NSLog(@"begin: %s", __FUNCTION__);
        [super viewDidLoad];

         // right bar button from custom tabbarcontroller
        self.tabBarController = [[CustomTabBarController alloc] init];
        self.navigationItem.rightBarButtonItem = self.tabBarController.sharedRightButton;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:23:45.703

让我印象深刻的是，为每个视图控制器创建一个新`CustomTabBarController`的控制器是根本错误的，特别是如果它是为了解决你的右键没有出现的问题。问题是您正在创建新的虚拟标签栏控制器，更糟糕的是，丢失了对视图控制器的真实标签栏控制器的引用。

您的解决方案触及问题的核心，因为您正在为按钮添加子视图，即创建`UIBarButtonItem`with`initWithCustomView`等，因此您无法与多个导航控制器共享按钮。`UIBarButtonItem`如果您创建一个简单的 with （或其他类似的简单变体），则共享的公共右栏按钮有效`initWithTitle`，但如果您使用按钮的自定义视图执行此操作，则它不起作用。

正确的解决方案是创建一个`UIBarButtonItem`具有您需要的行为和外观的新实例。然后，任何需要该条形按钮项的视图控制器都可以创建该按钮的实例。因此，新的自定义`RightBarButtonItem`可能如下所示：

RightBarButtonItem.h：

```
@interface RightBarButtonItem : UIBarButtonItem

- (id)initWithTarget:(id)target action:(SEL)action;

@end 
```

RightBarButtonItem.m:

```
@interface RightBarButtonItem ()
@property (nonatomic, strong) EZBadgeView *badgeView;
@end

@implementation RightBarButtonItem

- (id)initWithTarget:(id)target action:(SEL)action
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0, 0, 46, 30);

    self = [super initWithCustomView:button];

    if (self)
    {
        _badgeView = [[EZBadgeView alloc] init];
        CGRect badgeFrame = self.badgeView.frame;
        badgeFrame.origin.x = 31.0f;
        badgeFrame.origin.y = -6.0f;
        badgeFrame = CGRectIntegral(badgeFrame);
        _badgeView.frame = badgeFrame;
        _badgeView.badgeBackgroundColor = [self colorWithRGBHex:kRed withAlpha:1.0f];
        _badgeView.userInteractionEnabled = NO;
        _badgeView.badgeTextFont = [UIFont fontWithName:@"BrownStd-Bold" size:12];
        _badgeView.shouldShowGradient = NO;
        _badgeView.shouldShowShine = NO;

        [button setBackgroundImage:[UIImage imageNamed:@"button_mixer.png"]         forState:UIControlStateNormal];
        [button setBackgroundImage:[UIImage imageNamed:@"button_mixer_pressed.png"] forState:UIControlStateHighlighted];
        [button setBackgroundImage:[UIImage imageNamed:@"button_mixer_active.png"]  forState:UIControlStateSelected];

        [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
        [button setBackgroundColor:[UIColor clearColor]];
        [button addSubview:_badgeView]; //Add NKNumberBadgeView as a subview on UIButton

        _badgeView.badgeValue = @"0";
        _badgeView.hidden = YES;

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(updateBadgeNumber:)
                                                     name:@"updateBadgeNumber"
                                                   object:nil];
    }

    return self;
}

- (void)dealloc
{
    // don't forget to have mechanism to remove the observer when this button is deallocated

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:@"updateBadgeNumber"
                                                  object:nil];
}

- (void)updateBadgeNumber:(NSMutableArray *)soundArray
{
    self.badgeView.badgeValue = [NSString stringWithFormat:@"%i",[soundArray count]];
    self.badgeView.hidden = ([soundArray count] == 0);
}

- (UIColor *)colorWithRGBHex:(UInt32)hex withAlpha:(float)alpha
{
    int r = (hex >> 16) & 0xFF;
    int g = (hex >> 8) & 0xFF;
    int b = (hex) & 0xFF;

    return [UIColor colorWithRed:r / 255.0f
                           green:g / 255.0f
                            blue:b / 255.0f
                           alpha:alpha];
}

@end 
```

然后，`CustomTabBarController`大大简化了：

CustomTabBarController.h：

```
@interface CustomTabBarController : UITabBarController

- (UIBarButtonItem *)rightBarButton;

@end 
```

CustomTabBarController.m:

```
#import "RightBarButtonItem.h"

@implementation CustomTabBarController

- (UIBarButtonItem *)rightBarButton
{
    return [[RightBarButtonItem alloc] initWithTarget:self
                                               action:@selector(clickedTest:)];
}

- (void)clickedTest:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
}

@end 
```

最后，添加到标签栏控制器的所有视图控制器都可以简单地执行以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CustomTabBarController *tabBarController = (id)self.tabBarController;

    self.navigationItem.rightBarButtonItem = [tabBarController rightBarButton];
} 
```

所有这些都实现了您提出的解决方案的关键部分，即确保我们有一个唯一的右栏按钮项目实例，但不会出现创建冗余标签栏控制器的问题。

# toastr - toastr 消息未在 IE 中显示

> ID：14970950
> 
> 赞同：0
> 
> 时间：2013-02-20T01:48:44.693
> 
> 标签：toastr

在 Firefox 中，这很好用 - toastr ( [https://github.com/CodeSeven/toastr](https://github.com/CodeSeven/toastr) ) 显示成功和错误消息。在 IE 中，没有错误，也不显示消息。我如何调用 toastr 方法有问题吗？

```
 $.ajax({
                url: '/api/emailtemplate/',
                type: 'POST',
                data: ko.toJSON(self),
                contentType: 'application/json',
                //dataType: 'json',
                success: function (result) {
                    toastr.success('Template was saved successfully!');

                },
                error: function () { toastr.error('Template was not saved.', 'Template         error!'); }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:15:45.973

这个对我有用。你链接到 toastr 和 css 了吗？我刚刚尝试了这个示例，但为数据传入了 {}（因为我没有你的 self 对象）。这个对我有用。在此处查看 jsbin：

[http://jsbin.com/uqudid/1/](http://jsbin.com/uqudid/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T15:34:20.597

我实际上遇到了同样的问题，即在 IE 中没有显示敬酒。就我而言，问题实际上与 CSS 未加载有关。在 IE 中，我检查了 HTML，可以看到警报的标记在那里，但没有样式。我的应用程序是一个 .NET MVC 应用程序，经过一些测试，我将其范围缩小到 IE 似乎不喜欢我的 toastr.css 文件与其他文件捆绑在一起。一旦我将样式表拉到它自己的包中，一切正常。奇怪的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T12:43:42.497

我和@im1dermike 有同样的问题。toast 容器在 DOM 中显示，但 toast 本身没有显示。（您可以检查这是否是您的情况，检查 DOM 并查找容器 div 具有的文本“toast-container”）。

我尝试取消注释 polyfill 行和所有内容，直到我意识到 IE 出于某种原因将 toast 设置为属性“display:none”。

对我有用的只是将其添加到我的 styles.scss 中：

```
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /* IE10+ CSS styles go here */

    .toast {
      display: block !important;
    }
}

@supports (-ms-accelerator:true) {

/* IE Edge 12+ CSS styles go here */ 

  .toast {
    display: block !important;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T19:39:06.273

我在 IE11 上遇到了这个问题，对于它工作的所有其他浏览器，我使用的是“positionClass”：“toast-bottom-full-width”。这导致IE上的主要闪烁。我只是将位置保留为默认值（没有指定 positionClass），现在问题已经消失了。

# json - perl - 从解码的 json 创建一个 json

> ID：14970951
> 
> 赞同：0
> 
> 时间：2013-02-20T01:48:45.007
> 
> 标签：json, perl

这个问题可能看起来很愚蠢，但我一直在这个问题上花费数小时。我不是 perl 专家。所以我有一个 JSON 编码的字符串，我用这个解码：

```
$filters = decode_json $data;
$criteria = @{shift($filters)}{'criteria'}; 
```

然后我处理这些过滤器和标准，我想以 json 格式返回 $data。所以我很想把上面的代码颠倒过来。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:25:59.747

难道不只是

```
$data = encode_json $filters; 
```

?

# python - 如何修复 TypeError：“文件”对象不可订阅

> ID：14970952
> 
> 赞同：4
> 
> 时间：2013-02-20T01:48:48.310
> 
> 标签：python

我对python有点陌生，并不太了解我的问题，非常感谢您的帮助。无论如何，这是编码行。

```
def Banker(warrior):
    gold = open(chairs[warrior-1], "strength")
    return gold 
```

这是我得到的错误。

```
line 22, in Banker
    gold = open(chairs[warrior-1], "strength")
TypeError: 'file' object is unsubscriptable 
```

[http://pastebin.com/1wMbaSYY](http://pastebin.com/1wMbaSYY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:59:39.193

在第 19 行的 pastebin 链接上，`toyota()`您有：

```
return chances, Tire, Km, Insurance, chairs 
```

它返回一个元组中的所有这些值（即使没有括号）。但是，这是在第 58 行调用的：

```
chances, chairs, insurance, km, tire = toyota() 
```

它将返回的元组中的值分配给左侧给出的变量。这些元组的顺序应该正确。在这里，您使用`Tire`as的值`chairs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:03:31.843

发现你的问题。第 58 行是给您带来麻烦的原因。这里是：

```
chances, chairs, insurance, km, tire = toyota() 
```

这没什么错，但是当我们查看`toyota()`s return 语句时，有一个问题。这是`toyota()`返回语句：

```
return chances, Tire, Km, Insurance, chairs 
```

问题在于在 Python 中返回多个值时顺序很重要，并且返回的顺序和分配的顺序不匹配。

在这里，您将返回 的值`Tire`并将其分配给变量`chairs`。稍后，当您尝试`chairs`在`Banker`函数中使用时，您并没有使用您认为的对象。

```
gold = open(chairs[warrior-1], "strength") 
```

在这里， running`type(chairs)`将返回`File`，而不是`list`，因为`toyota()`s 值以错误的顺序返回/分配。`File`s 不能被索引，这就是导致你的程序抛出错误的原因。

# c# - 如何使用 Task.Run(Action )

> ID：14970954
> 
> 赞同：15
> 
> 时间：2013-02-20T01:48:49.697
> 
> 标签：c#, .net, delegates, compiler-errors, task-parallel-library

我正在尝试创建一个接受 TcpClient 连接并在连接客户端后执行任务“ConnectedAction”的方法。尝试创建新任务以运行委托“ConnectedAction”时收到编译错误。

> 参数 1：无法从 'void' 转换为 'System.Func'

我相信这个错误是因为该方法试图运行“ConnectedAction”方法并将 void 返回给 Task.Run 参数。

如何让任务运行“ConnectedAction”委托？

```
class Listener
{
    public IPEndPoint ListenerEndPoint {get; private set;}
    public int TotalAttemptedConnections { get; private set; }
    public Action<TcpClient> ConnectedAction { get; private set; }

    public Listener(IPEndPoint listenerEndPoint, Action<TcpClient> connectedAction)
    {
        ConnectedAction = connectedAction;
        ListenerEndPoint = listenerEndPoint;

        Task.Factory.StartNew(Listen, TaskCreationOptions.LongRunning);
    }

    private void Listen()
    {
        TcpListener tcpListener = new TcpListener(ListenerEndPoint);
        tcpListener.Start();

        while (true)
        {
            TcpClient tcpClient = tcpListener.AcceptTcpClient();
            TotalAttemptedConnections++;

            //Error here 
            Task.Run(ConnectedAction(tcpClient));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T01:56:26.733

你应该写：

```
Task.Run(() => ConnectedAction(tcpClient)); 
```

这将创建一个不带参数的 lambda 函数，并将使用正确的参数调用您指定的函数。lambda 被隐式包装到`Task.Run`参数所需的委托类型中。

您编写的内容调用该函数，然后尝试将函数的返回值转换为委托。

# jquery - jquery 选择器选择与单击的元素不同的元素

> ID：14970963
> 
> 赞同：0
> 
> 时间：2013-02-20T01:49:16.770
> 
> 标签：jquery

这是简化的html：

```
<div id="l01">
<ul style="width:450px;">
<li><img src="images/iconarrow.gif" alt="arrow" width="9" height="11" align="left" />&nbsp;
<a href="#">Preview</a>                            
</li>

<li class="showStats"><a class="showstatlink" href="javascript:{}"><img class="sstatsImage" src="images/iconarrow.gif"  />&nbsp;
                        Show Stats</a>                            
</li>                         
</ul>                       
</div>
<div class="sstatsDetails">
        ...
</div> 
```

我想点击 class='showstatlink'，我希望点击触发 class='sstatsDetails' 的切换，但只有下一个，我不希望页面上的所有元素与该类切换.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:52:33.743

```
$(".showstatlink").click(function() {
    // Your code to handle the event.
    $(".sstatsDetails").show();  // Or hide whatever you want to do.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:53:00.577

尝试这样的事情：

```
$(".showstatlink").on("click", function(){
    $(this).parent().parent().parent().next(".sstatsDetails").toggle();
}); 
```

你可以在这里看到它的实际[效果。](http://jsfiddle.net/qZkzg/1/)

# ios - 如何在没有 Apple 开发者订阅的情况下在我的 iPod 中测试我的应用程序

> ID：14970964
> 
> 赞同：0
> 
> 时间：2013-02-20T01:49:25.037
> 
> 标签：ios, xcode

我已经更改了，`Code Signing Identity`但 `Don't code sign`它仍然无法在我的设备上运行它给了我错误

`No provisioned iOS devices are available with a compatible iOS version. Connect an iOS device with a recent enough version of iOS to run your application or choose an iOS simulator as the destination.`

我还应该怎么做才能让它发挥作用？请帮忙..谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T01:53:36.503

如果不签署应用程序并将其作为配置文件的一部分，您将无法在设备（iPod、iPhone 或 iPad）上运行应用程序。只有当您拥有 Apple 的付费开发帐户时，才会发生这种情况。您可以在模拟器中随心所欲地运行，但要在设备上部署需要开发者帐户。唯一的选择是越狱，但如果您打算在某个时候发布到 Apple App Store，那仍然无济于事。

有关更多信息，请参阅[此](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak)帖子。你真的应该先做一些搜索:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:40:05.320

如果没有付费的 iOS 开发者许可，您将无法在设备上运行和测试应用程序。我试图找出一种无需付费即可在我的设备上进行测试的方法，但事实证明无论如何购买许可证都是值得的。如果您要测试需要在设备上测试的应用程序，那么购买许可证很可能是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:48:30.123

检查您的 iOS 版本部署目标，如果您的 iPod iOS 版本低于您支持的版本，它将无法工作。

示例：如果您的 iPod 是 iOS 4.3 并且您为 5.0 进行部署将无法正常工作。

# angularjs - 在angularjs中绑定路径的首选方法

> ID：14970965
> 
> 赞同：0
> 
> 时间：2013-02-20T01:49:25.193
> 
> 标签：angularjs

我想要一个更新 url 的简单分页控件，在 angularjs 中执行此操作的理想方法是什么？

IE：

[http://www.site.com/widget/#/which/4](http://www.site.com/widget/#/which/4)

```
<a> Next </a> 
```

为此，当单击下一个链接时，我想更新 url（并导航到）： [http ://www.site.com/widget/#/which/5](http://www.site.com/widget/#/which/5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:13:55.017

任何可行、易于理解且可维护的方式都可以。

也就是说，您可以像这样创建链接：

```
<a href="#/which/5">5</a> 
```

假设你有这样的路线：

```
$routeProvider.when('which/:pageNo', {
    controller: 'MyCtrl',
    templateUrl: 'sometemplate.html'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:16:29.803

> 这很简单，只需使用下面的行

```
 var pageIndex = $routeParams.pageNo
    var newpageIndex = parseInt(pageIndex) + 1;
    var url = '/which/' + newpageIndex
    $location.path(url); 
```

# java - JFrame 和图形的深度 (Java)

> ID：14970967
> 
> 赞同：0
> 
> 时间：2013-02-20T01:49:42.680
> 
> 标签：java, swing, graphics, jframe, paint

好吧，他是我的问题：

我正在尝试将使用 java 图形的网格绘制到 JFrame 中。但是当我这样做时，网格会覆盖 JFrame 的组件（JTextFields、按钮等），我尝试在绘制方法的末尾写入“super.paint(g)”但是当我这样做时，网格不会出现。

他是代码：

```
 public void paint(Graphics g){
                    super.paint(g);
                    g.setColor(Color.PINK);
                    g.drawLine(0, 240, 640, 240);
                    g.drawLine(320,0,320,480);
                    g.setColor(Color.GRAY);
                    for (int i=1; i<24; i++){
                        g.drawLine(0, i*20, 640, i*20);
                    }

            } 
```

感谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:53:23.487

1.  为自己创建一个自定义组件（从类似的东西扩展`JPanel`）。覆盖它的`paintComponent`方法并在那里绘制网格（不要忘记调用`super.paintComponent`）。
2.  创建时`JFrame`，将面板设置为框架的内容窗格 - 即`frame.setContentPane(new GridPane())`
3.  像往常一样继续向框架添加组件。

不建议覆盖`paint`顶级容器的方法，例如`JFrame`. 它们包含许多可能会干扰您的绘画的子组件，并且很容易简单地搞砸绘画过程。

# loops - 在 Pascal 中读取和处理文件在第一行之后将不起作用

> ID：14970968
> 
> 赞同：0
> 
> 时间：2013-02-20T01:49:54.837
> 
> 标签：loops, pascal

我无法从 Pascal 中的数据文件中读取多行。当我尝试读取多行时，它给了我一个“无效的数字格式”运行时错误（我只单独测试了第一行，它工作正常）。这让我觉得它与行尾的回车有关。

这是应该从我的 .DAT 文件中读取所有行的代码：

```
program commission;
var
      moreRec:Boolean;
      FileOut:Text;
      FileIn:Text;

      DRONE_ID:String[9];
      DRONE_NAME:String[18];
      SALES:Real;
      COMM:Real;

procedure header;
begin
  writeln(FileOut, Space(16),'SALES COMMISSION REPORT');
  writeln(FileOut);
  writeln(FileOut,'   SSN',Space(10),'SALESPERSON',Space(9),'SALES    COMMISSION');
  writeln(FileOut);
end;

procedure readRec;
begin
  if EOF(FileIn) THEN
    moreRec:=false
  else
    read(FileIn, DRONE_ID);
    read(FileIn, DRONE_NAME);
    read(FileIn, SALES);
    COMM:=SALES*0.03;
end; {readRec}    

procedure initial;
begin
  moreRec:=true;
  Assign(FileIn, 'PRG2-150.DAT ');
  Reset(FileIn);
  Assign(FileOut,'output.txt');
  Rewrite(FileOut);
  readRec

end; {initial}

procedure process;
begin
  write(FileOut, DRONE_ID);
  write(FileOut, Space(2));
  write(FileOut, DRONE_NAME);
  write(FileOut, Space(5));
  write(FileOut, SALES:9:2);
  write(FileOut, Space(3));
  writeln(FileOut, COMM:8:2);
  readRec
end; {process}

procedure wrapup;
begin
  Close(FileOut);
  Close(FileIn);
end; {wrapup}

begin
  initial;
  header;
  while moreRec = true do
    process;
  wrapup;
end. 
```

这是我正在读取的 .DAT 文件：

```
998874673Joe Smith         27.65
849773298Sue Williams      35.90
445861253Al Oop            54.90
584988754Diane Mindykowski 25.96
758423652Alicen Morse      53.35
485236845Burton Schuring   58.52
586974512Linda Gillam      69.35 
```

我是 Pascal 的新手，但我很想知道为什么我的程序不会读超过一行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:07:06.033

我想你需要一个

```
 readln(FileIn); 
```

在 readRec 的末尾跳过 CR/LF 分隔符到下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:05:12.230

Pascal 希望文本文件中的数据字段用空格分隔。问题是 Drone_Id 和 Drone_Name 字段之间没有空格。

```
998874673Joe Smith         27.65
_________^__  Insert space here. 
```

您还应该在行 (Sales) 的最后一个字段中使用 readln。

编辑：对不起，那里不需要空间（我以为第一个字段是数字）。但请确保在该行的最后一个字段上使用 readln。

# algorithm - 内存分配算法

> ID：14970969
> 
> 赞同：0
> 
> 时间：2013-02-20T01:49:57.190
> 
> 标签：algorithm, memory-management, data-structures

我们如何实现具有以下约束的分配和跟踪内存的数据结构

1.  在 O(1) 中分配和释放内存
2.  最小碎片。

假设您有 1 KB 的内存单元。您需要在 2kB - 64 KB 内存之间分配

例如

A- 1

B-1

C-4

D-2

0 1 2 3 4 5 6 7 8 9 10

x A x BCCCCDD x

如果我们在释放内存时（如上面的 x 所示）可用的最小地址分配内存，我们将产生碎片。所以在上面的例子中，即使 3 个单元是空闲的，我们也不能分配 3 个连续单元的内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:46:55.337

搜索“伙伴系统”或“伙伴内存分配”。这可能是您会找到的最佳解决方案。虽然，它不是纯粹的 O(1)，但它存在一些内部碎片，并且也可能发生外部碎片......

您可以通过使用增强树完全避免内部碎片，但是操作需要 O(log N) 时间。而且你仍然有外部碎片。

# sql - SQL 似乎在 select 语句上自动将数字四舍五入？

> ID：14970972
> 
> 赞同：0
> 
> 时间：2013-02-20T01:50:22.730
> 
> 标签：sql

嗨，这是我的 SQL 代码：

```
 SELECT a."Date", a."Missed", b."Total Client Schedules", cast(100-((a."Missed"*100) / b."Total Client Schedules")AS decimal) as "Pct Completed" -
  FROM -
   ( -
     SELECT DATE(scheduled_start) as "Date",count(*) as "Missed" FROM -
     events WHERE node_name IS NOT NULL AND status IN ('Missed') GROUP BY DATE(scheduled_start) -
    ) as a, -
   ( -
    SELECT DATE(scheduled_start) as "Date", count(*) as -
    "Total Client Schedules" FROM events WHERE node_name IS NOT NULL GROUP BY DATE(scheduled_start) -
    ) as b -
  WHERE a."Date" = b."Date" ORDER BY "Date" desc 
```

这是输出

```
 Date           Missed      Total Client Schedules      Pct Completed
-----------     ------------     -----------------------     --------------
 2013-02-20                2                         805                100
 2013-02-19               14                         805                 99
 2013-02-18               29                         805                 97
 2013-02-17               59                         805                 93
 2013-02-16               29                         806                 97
 2013-02-15               49                         805                 94
 2013-02-14               33                         805                 96
 2013-02-13               57                         805                 93
 2013-02-12               21                         805                 98
 2013-02-11               35                         805                 96
 2013-02-10               34                         805                 96 
```

当我希望它像 99.99% 或 97.2% 等时，它似乎总是四舍五入到最高数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:55:39.820

您没有指定您使用的数据库。然而，一些数据库做整数运算，所以 1/2 是 0 而不是 0.5。

要解决此问题，只需使您使用数字而不是整数的常量：

```
cast(100.0-((a."Missed"*100.0) / b."Total Client Schedules")AS decimal) 
```

然后它将转换为算术的非整数类型。

# c# - 有谁知道为什么 GetXpathCount() 在 C# 中不起作用？

> ID：14970977
> 
> 赞同：0
> 
> 时间：2013-02-20T01:50:49.487
> 
> 标签：c#, xpath, selenium, webdriver, selenium-webdriver

我已经扩展了 Selenium 命名空间。但它仍然无法识别 GetXpathCount() 函数。有谁知道解决方案？谢谢！

```
int count = Selenium.GetXpathCount("ctl00_ContentPlaceHolder1_TVNCategoryGridView"); 
```

我收到以下错误消息：

**命名空间“Selenium”中不存在类型或命名空间名称“GetXPathCount”（您是否缺少程序集引用？）**

这是整个代码结构：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Selenium;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;
using System.Threading;
using NUnit.Framework;

  .......(test class extending base test)

    public void TestSetup()
        {

            Driver = CreateDriverInstance(BaseUrl);
            Driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(5));
            Driver.SwitchTo().Window(Driver.CurrentWindowHandle);

        }
        [TestCleanup()]
        public void TestCleanup()
        {
            Driver.Quit();
        }

[Priority(1), TestMethod]
        public void NewShowTest()
        {

            Open("~/NewShow.aspx");
            Random rnd = new Random(DateTime.Now.Second);
            string shownum = DateTime.Now.ToShortDateString() + " " + DateTime.Now.ToShortTimeString() + " " + rnd.Next(0, 10000).ToString();
            testShowName = "Test Show " + shownum;
            int count = Selenium.GetXpathCount("ctl00_ContentPlaceHolder1_TVNCategoryGridView");

            ..........

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:28:54.623

您似乎混合使用了 Selenium WebDriver 和 Selenium RC。

我相信这是由于这里，您正在创建一个新的驱动程序（WebDriver API）：

```
Driver = CreateDriverInstance(BaseUrl); 
```

然后在这里，您使用的是 RC API（`Selenium`该类是 RC API 的一部分）：

```
int count = Selenium.GetXpathCount("ctl00_ContentPlaceHolder1_TVNCategoryGridView"); 
```

您还有一个用于`OpenQA.Selenium`和的 using 指令`Selenium`。这也是另一个迹象，表明你做的**非常非常错误**。

三件事：

1.  决定是要使用 Driver API 还是 RC API。不要将两者混为一谈，它会变得一团糟，并导致你因为突然出现的非常奇怪的问题而脱发。
2.  即使您选择使用 RC API，该`GetXPathCount`方法**也不**是静态方法，这就是您会收到原始错误的原因。
3.  无论如何，您的 XPath 都不正确...我将假设这是某物的 ID，但我建议正确学习 XPath 查询。

建议：

**推荐**：由于您使用的是 C#，因此您可以使用 LINQ to Objects 的强大功能，并准确模仿**GetXPathCount****的**功能。通过这个：

```
Driver.FindElement(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_TVNCategoryGridView']")).Count; 
```

虽然如果这实际上只是一个 ID，您可以简单地制作它：

```
Driver.FindElement(By.Id("ctl00_ContentPlaceHolder1_TVNCategoryGridView")).Count; 
```

**或者**

**完全不推荐**：选择使用 RC API 并使用`DefaultSelenium`该类**正确**实例化`Selenium`该类：

```
ISelenium selenium = new DefaultSelenium("localhost", 4444, "*chrome", "http://www.google.com");
selenium.Start();
int amountOfElementsMatchingXPath = selenium.GetXpathCount("//*[@id='ctl00_ContentPlaceHolder1_TVNCategoryGridView']");
selenium.Stop(); 
```

**或者**

**也不推荐**：选择使用 WebDriverBackedSelenium API，它将为您提供旧的 RC API，同时允许您使用 WebDriver 支持。

```
var webDriverBackedSelenium = new WebDriverBackedSelenium(Driver, "http://www.google.com");
int amountOfElementsMatchingXPath = webDriverBackedSelenium.GetXpathCount("//*[@id='ctl00_ContentPlaceHolder1_TVNCategoryGridView']"); 
```

另一个观察：

您已经包含**了**NUnit 和 MSTest（`NUnit.Framework`和`Microsoft.VisualStudio.TestTools.UnitTesting`）的 using，但您似乎正在使用 MSTest。

如果您坚持使用 MSTest，请删除您的 NUnit 引用，它只会增加混乱，增加编译时间并构建不必要的引用。

# .net - 如何为 SQL Server 使用 BCrypt 的 .Net 实现？

> ID：14970981
> 
> 赞同：3
> 
> 时间：2013-02-20T01:51:21.040
> 
> 标签：.net, sql-server, bcrypt

我在谷歌搜索过，不幸的是我找不到任何我想要的预期答案。

我已经下载[了 BCrypt 的 .NET 实现](http://bcrypt.codeplex.com/releases/view/60609)

老实说，我通常用 PHP 语言编码，我不知道 .Net 之类的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:49:38.853

我假设您已经拥有将用户哈希存储在某种用户配置文件表中的架构？

假设该表的格式如下：

```
PersonID           int PrimaryKey
PersonName         nvarchar(50)
PersonPasswordHash varchar(128)
PersonPasswordSalt nvarchar(10) 
```

然后在您的 .net 代码（C# 中的示例）中，您将在创建新用户时继续执行以下操作

```
string passwordPlain = txtPassword.Text; // This is the password entered by the user

/* a work factor of 10 is default, but you can mention any thing from 4 to 31\. 
   But keep in mind that for every increment in work factor the work increases 
   twice (its 2**log_rounds)
*/
string passwordSalt = BCrypt.GenerateSalt(10);
string passwordHash = BCrypt.HashPassword(passwordPlain, passwordSalt);

// Now store the passwordHash and passwordSalt in the database for that user 
```

获得上述值后，将适当的值存储在数据库中。

当需要验证登录时，从数据库中检索有关`passwordHash`和的详细信息`passwordSalt`，您可以进行如下验证：

```
string originalPasswordSalt; // retrieve its value from the DB
string originalPasswordHash; // retrieve its value from the DB
string givenPasswordPlain = txtPassword.Text; // given by the user during login
string givenPasswordHash = BCrypt.HashPassword(givenPasswordPlain, originalPasswordSalt);

if(givenPasswordHash.Equals(originalPasswordHash)) { // you have an valid user
} else { // given login name or password is not valid
} 
```

# spring - 使用 Spring 3.2.0 进行验证

> ID：14970982
> 
> 赞同：3
> 
> 时间：2013-02-20T01:51:21.197
> 
> 标签：spring, spring-mvc, bean-validation, spring-3, hibernate-validator

我正在使用[HibernateValidator 4.3.1](http://sourceforge.net/projects/hibernate/files/hibernate-validator/4.3.1.Final/)。验证在整个应用程序中按预期执行。

我已经注册了一些自定义编辑器来执行全局验证，例如确保文本字段中的数值（`double`等`int`），确保有关[Joda-Time](http://www.joda.org/joda-time/) API 的有效日期等。

在这种类型的验证中，我允许空值/空值，方法是像往常一样将`allowEmpty`参数设置`false`为单独验证它，特别是当这些字段留空时显示单独的用户友好错误消息。

因此，除了使用 HibernateValidator 和自定义编辑器进行验证之外，我还尝试使用以下验证策略。同样，这种验证仅适用于那些为自定义编辑器注册的字段**在留空时**。

下面是实现[`org.springframework.validation.Validator`](http://static.springsource.org/autorepo/docs/spring/3.2.0.M1/api/org/springframework/validation/Validator.html)接口的类。

```
package test;

import org.springframework.stereotype.Component;
import org.springframework.validation.Errors;
import org.springframework.validation.ValidationUtils;
import org.springframework.validation.Validator;
import validatorbeans.TempBean;

@Component
public final class TempValidator implements Validator {

    @Override
    public boolean supports(Class<?> clazz) {
        System.out.println("supports() invoked.");
        return TempBean.class.isAssignableFrom(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        TempBean tempBean = (TempBean) target;

        System.out.println("startDate = " + tempBean.getStartDate() + " validate() invoked.");
        System.out.println("doubleValue = " + tempBean.getDoubleValue() + " validate() invoked.");
        System.out.println("stringValue = " + tempBean.getStringValue() + " validate() invoked.");

        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "startDate", "java.util.date.nullOrEmpty.error");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "doubleValue", "java.lang.double.nullOrEmpty.error");
    }
} 
```

该类是用`@Component`注解指定的，以便它可以自动连接到特定的 Spring 控制器类。调试语句完全根据用户提供的输入显示。

以下是控制器类。

```
package controller;

import customizeValidation.CustomizeValidation;
import java.util.Map;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.validation.Valid;
import javax.validation.groups.Default;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.validation.DataBinder;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import test.TempValidator;
import validatorbeans.TempBean;

@Controller
public final class TempController {

    @Autowired
    private TempService tempService;

    private TempValidator tempValidator;

    public TempValidator getTempValidator() {
        return tempValidator;
    }

    @Autowired
    public void setTempValidator(TempValidator tempValidator) {
        this.tempValidator = tempValidator;
    }

    @RequestMapping(method = {RequestMethod.GET}, value = {"admin_side/Temp"})
    public String showForm(@ModelAttribute("tempBean") @Valid TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response) {
        return "admin_side/Temp";
    }

    @RequestMapping(method = {RequestMethod.POST}, value = {"admin_side/Temp"})
    public String onSubmit(@ModelAttribute("tempBean") @Valid TempBean tempBean, BindingResult errors, Map model, HttpServletRequest request, HttpServletResponse response) {
        //tempValidator.supports(TempBean.class);
        //tempValidator.validate(tempBean, errors);

        DataBinder dataBinder = new DataBinder(tempBean);
        dataBinder.setValidator(tempValidator);
        dataBinder.validate();

        //errors=dataBinder.getBindingResult();
        if (CustomizeValidation.isValid(errors, tempBean, TempBean.ValidationGroup.class, Default.class) && !errors.hasErrors()) {
            System.out.println("Validated");
        }

        return "admin_side/Temp";
    }
} 
```

我从 Spring 控制器类本身（我确实想要）调用验证器

```
DataBinder dataBinder = new DataBinder(tempBean);
dataBinder.setValidator(tempValidator);
dataBinder.validate(); 
```

调用了验证器，**但未**执行预期的验证。

如果我只使用以下语句（上面已注释掉）手动调用验证器，

```
tempValidator.validate(tempBean, errors); 
```

然后执行验证。所以我不相信我的验证器工作正常。为什么它无法使用`DataBinder`？

在我的`application-context.xml`文件中，这个 bean 简单地配置如下。

```
<bean id="tempValidator" class="test.TempValidator"/> 
```

自动检测到以下许多包，包括包含该类的`test`包。`TempValidator`

```
<context:component-scan base-package="controller spring.databinder validatorbeans validatorcommands test" use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    <context:include-filter expression="org.springframework.web.bind.annotation.ControllerAdvice" type="annotation"/>  
</context:component-scan> 
```

我什至试图把

```
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

在我的`dispatcher-servlet.xml`档案中。

我在这里俯瞰什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:58:32.767

如果我很好地理解您尝试实现的目标 - 区分空白字段和​​输入的错误值 - 您可以使用更简单的方法：

```
public class MyBean {

    @NotNull
    @DateTimeFormat(pattern="dd.MM.yyyy HH:mm") 
    private DateTime date;

    @NotNull
    @Max(value=5)
    private Integer max;

    @NotNull
    @Size(max=20)
    private String name;

    // getters, setters ... 
} 
```

控制器映射：

```
public void submitForm(@ModelAttribute @Valid MyBean myBean, BindingResult result) {

    if (result.hasErrors){
       // do something}
    else{
       // do something else
    }        
} 
```

验证消息：

```
NotNull=Required field.
NotNull.date=Date is required field.
NotNull.max=Max is required field.
Size=Must be between {2} and {1} letters.
Max=Must be lower than {1}.
typeMismatch.java.lang.Integer=Must be number.
typeMismatch.org.joda.time.DateTime=Required format dd.mm.yyyy HH:mm 
```

弹簧配置：

```
@Configuration
public class BaseValidatorConfig {

    @Bean
    public LocalValidatorFactoryBean getValidator() {

        LocalValidatorFactoryBean lvfb = new LocalValidatorFactoryBean();
        lvfb.setValidationMessageSource(getValidationMessageSource());
        return lvfb;
    }

    protected MessageSource getValidationMessageSource() {// return you validation messages ...}
} 
```

如果需要，我可以提供更多细节和解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:29:29.390

我不知道为什么问题中提到的方法不起作用。我没有让它工作，但是浏览了这个[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html)，我发现了另一种根据我的要求对我有用的方法。

`@InitBinder`我在注释指定的方法中设置了验证器。

来自[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#validation-mvc-configuring)

> 遇到 @Valid 方法参数时调用的 Validator 实例可以通过两种方式进行配置。首先，您可以在 @Controller 的 @InitBinder 回调中调用 binder.setValidator(Validator)。这允许您为每个 @Controller 类配置一个 Validator 实例：

具体来说，在我的要求中，仅应在更新或将数据插入数据库时​​执行验证，即当按下这些操作的关联提交按钮时（在我的应用程序中，这两个任务（插入和更新）都有一个通用按钮）谁的名字是`btnSubmit`)。

在任何其他情况下（例如，按下删除按钮时），验证应该被静音。为了满足这个要求，我注册了验证器如下。

```
@InitBinder
protected void initBinder(WebDataBinder binder, WebRequest webRequest) {
    if (webRequest.getParameter("btnSubmit") != null) {
        binder.setValidator(new TempValidator());
    } else {
        binder.setValidator(null);
    }
} 
```

在这种情况下，validator -`TempValidator`只会`btnSubmit`在客户端单击其名称属性的提交按钮时设置。

无需在任何地方进行 xml 配置以及自动装配。

示例控制器类现在如下所示。

```
@Controller
public final class TempController {

    @Autowired
    private TempService tempService;

    @InitBinder
    protected void initBinder(WebDataBinder binder, WebRequest webRequest) {
        if (webRequest.getParameter("btnSubmit") != null) {
            binder.setValidator(new TempValidator());
        } else {
            binder.setValidator(null);
        }
    }

    //Removed the @Valid annotation before TempBean, since validation is unnecessary on page load.
    @RequestMapping(method = {RequestMethod.GET}, value = {"admin_side/Temp"})
    public String showForm(@ModelAttribute("tempBean") TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response) {
        return "admin_side/Temp";
    }

    @RequestMapping(method = {RequestMethod.POST}, value = {"admin_side/Temp"})
    public String onSubmit(@ModelAttribute("tempBean") @Valid TempBean tempBean, BindingResult errors, Map model, HttpServletRequest request, HttpServletResponse response) {
        if (CustomizeValidation.isValid(errors, tempBean, TempBean.ValidationGroup.class, Default.class) && !errors.hasErrors()) {
            System.out.println("Validated");
        }
        return "admin_side/Temp";
    }
} 
```

方法中的`WebRequest`参数`initBinder()`并不意味着处理整个 Http 请求。它仅用于使用通用请求元数据。

Javadocs 关于`WebRequest`.

> Web 请求的通用接口。主要用于通用 Web 请求拦截器，使它们能够访问通用请求元数据，而不是用于实际处理请求。

如果我可能会遵循某些错误，请澄清它或添加另一个答案。

# html - 使用 CSS 使 HTML 文本字段和按钮的高度相同 - 不工作

> ID：14970983
> 
> 赞同：0
> 
> 时间：2013-02-20T01:51:25.053
> 
> 标签：html, css

我正在尝试使用 CSS 使我的文本字段和按钮的高度相同（40px）。

为什么文本字段和按钮的高度不同，即使它们都设置为 40px？

我的代码如下：http: [//jsfiddle.net/xkmmP/](http://jsfiddle.net/xkmmP/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style>
#textQuizFillBlankUserAnswer {
    border: 2px solid #000;
    font-size: 16px;
    font-weight: bold;
    width: 50%;
    height: 40px;
    float: left;
}
#buttonQuizFillBlankSubmit {
    border: 2px solid #000;
    font-size: 20px;
    font-weight: bold;
    width: 20%;
    height: 40px;
    float: left;
    margin-left: 5px;
}
</style>
</head>

<body>
<input type="text" id="textQuizFillBlankUserAnswer">
<input type="button" id="buttonQuizFillBlankSubmit" value="&gt;">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:53:53.047

`text`并且`button`输入使用不同的盒子模型。按钮使用`border-box`，因此边框实际上被认为是盒子模型的一部分（即高度）。您可以通过更改其中一个模型来解决此问题。也许添加`box-sizing: border-box`到文本输入中（您也需要`-moz-box-sizing`）。

[http://jsfiddle.net/xkmmP/](http://jsfiddle.net/xkmmP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:57:35.163

将此添加到：

```
#textQuizFillBlankUserAnswer {
    border: 2px solid #000;
    font-size: 16px;
    font-weight: bold;
    width: 50%;
    height: 40px;
    float: left;
    box-sizing: border-box;  // This line
    vertical-align: middle;  // and this line
} 
```

[资源](https://stackoverflow.com/questions/11396290/submit-button-next-to-textfield-with-same-height)

# powershell - 从 GET-ADUSER 中删除空值

> ID：14970984
> 
> 赞同：0
> 
> 时间：2013-02-20T01:51:34.833
> 
> 标签：powershell

我在powershell中有以下查询。如果 ManageBy 字段为空，我不希望它显示在列表中。我将如何使用我的代码完成此操作？谢谢

```
Import-Module activedirectory

(Get-ADUser -Identity user –Properties MemberOf | Select MemberOf).MemberOf | Get-ADGroup -Properties ManagedBy | Select Name, ManagedBy, Distinguishedname, GroupCategory |
Where-Object {
$_.Distinguishedname -notlike "*Test*" -and $_.Distinguishedname -notlike "*Test1*" -and $_.name -notlike "*Test3*"}|
ForEach-Object {
If ($_.ManagedBy) {
$result = New-Object PSObject
Add-Member -input $result NoteProperty 'Managed By' ((Get-ADUser -Identity $_.ManagedBy).givenName + ' ' + ((Get-ADUser -Identity $_.ManagedBy).surName))
Add-Member -input $result NoteProperty 'Group Name' $_.Name
Add-Member -input $result NoteProperty 'Email' (Get-ADUser -Identity $_.ManagedBy -Properties mail).Mail
Add-Member -input $result NoteProperty 'Group Type' $_.GroupCategory
Write-Output $result
}

} | select 'Email','Group Name','Managed By','Group Type' | sort 'Managed By' 
```

**尝试** `select 'Email','Group Name','Managed By','Group Type' | where {$_.'Managed By'} | Sort 'Managed By'` **并收到以下错误。**

```
Get-ADUser : Cannot find an object with identity: 'CN=Managers,OU=Groups,OU=Users,OU=New York,DC=company,DC=net' under: 'DC=company,DC=net'.
At line:9 char:55
+ Add-Member -input $result NoteProperty 'Managed By' ((Get-ADUser -Identity $_.Ma ...
+                                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (CN=Managers...DC=company,DC=net:ADUser) [Get-ADUser], ADIdentityNotFoundException
    + FullyQualifiedErrorId : ActiveDirectoryCmdlet:Microsoft.ActiveDirectory.Management.ADIdentityNotFoundException,Microsoft.ActiveDirectory.Management.Commands.GetADUser

Get-ADUser : Cannot find an object with identity: 'CN=Managers,OU=Groups,OU=Users,OU=New York,DC=company,DC=net' under: 'DC=company,DC=net'.
At line:11 char:49
+ Add-Member -input $result NoteProperty 'Email' (Get-ADUser -Identity $_.ManagedB ...
+                                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (CN=Managers...DC=company,DC=net:ADUser) [Get-ADUser], ADIdentityNotFoundException
    + FullyQualifiedErrorId : ActiveDirectoryCmdlet:Microsoft.ActiveDirectory.Management.ADIdentityNotFoundException,Microsoft.ActiveDirectory.Management.Commands.GetADUser

   Email                                                         Group Name                                                    Managed By                                                                                                      Group Type
-----                                                         ----------                                                    ----------                                                                                                      ----------
regu.r@company.com                                              FG-SFO-AudioProcessingWorkshop                                CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
DCB@company.com                                                 FG-NTHA1-D-Work-Release Managers                            CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
DCB@company.com                                                 Engineering, Digital Work Applications                      CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
DCB@company.com                                                 FG-NTHA1-D-Work-Release Users                               CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
kent@company.com                                          Jupiter-developers                                            CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
LMAU@company.com                                                IDP Phase 4-5                                                 CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
PXM@company.com                                                 Eng, Product                                                  CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
user1@company.com                                                 FG-Projects-ENG_Common                                        CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
user1@company.com                                                 FG-Projects-companyMediaProducer                                CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
SXM@company.com                                                 FG-NTHA1-companyMediaProducer                                   CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
DCB@company.com                                                 FG-NTHA1-D-Work-Stage                                       CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
AAQUI@company.com                                               FG-Projects-FunctionalActivityReports-READ                    CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
nelle.chapman@company.com                                       AG-EPSRM_Power_Requestor                                      CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
user2@company.com                                              Build Team                                                    CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
user2@company.com                                              Build Notifications                                           CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
                                                               FG-nyo-file-01-projects-buildsarea_ReadWrite                  CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
                                                               MMS-Users                                                     CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
holly.krer@company.com                                       Work BG All                                                 CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
                                                                test                                                                CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution
user2@company.com                                              FG-SFO-File-01-Projects-companyMediaProducerArchive-RW          CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
user2@company.com                                               AG-EC Commander Users                                         CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
EJN@company.com                                                 FG-Projects-CP750                                             CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                     Security
kent@company.com                                          Jupiter-buildmasters                                          CN=Useron\, Michael,OU=Users,OU=New York,DC=company,DC=net                                                 Distribution 
```

结果如上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:55:59.753

像这样？

```
 $filter = [scriptblock]::create("distinguishedname -eq '$($_.ManagedBy)'")
   $Manager = Get-ADUser -Filter $filter -Properties Mail 
   Add-Member -input $result NoteProperty 'Email' $Manager.Mail 
```

# javascript - Scripts.Render() 如果不存在

> ID：14970986
> 
> 赞同：0
> 
> 时间：2013-02-20T01:51:48.420
> 
> 标签：javascript, asp.net, asp.net-mvc-4, html-helper, bundling-and-minification

我希望仅当尚未在父视图中声明此类调用时才呈现以下调用。

```
@Scripts.Render("~/Scripts/jQuery") 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:48:47.280

这是一种方法：

```
<script>
    if (!window.jQuery) {
        document.write('<script src="@BundleTable.Bundles.ResolveBundleUrl("~/Scripts/jQuery")">\x3C/script>');
    }
</script> 
```

这与从 CDN 中包含 jQuery 时使用的逻辑基本相同，然后在 CDN 交付失败时具有本地引用回退。

# python - Python liburl2 超时；可以正常 ping 服务器，并且 wget 工作正常；

> ID：14970989
> 
> 赞同：2
> 
> 时间：2013-02-20T01:52:00.507
> 
> 标签：python, web-services, api, dreamhost

我正在尝试使用 Python 的 liburl2 来访问此处记录的 Dreamhost API：[http ://wiki.dreamhost.com/API](http://wiki.dreamhost.com/API)

这是我的代码：

```
request  = urllib2.Request('https://api.dreamhost.com/?key=<key>')
response = urllib2.urlopen(request)
page = response.read()
print(page) 
```

这总是失败并出现错误：

```
urllib2.URLError: <urlopen error [Errno 104] Connection reset by peer> 
```

我完全被难住了，因为我可以 ping api.dreamhost.com 就好了，而且 wget [https://api.dreamhost.com/?key=](https://api.dreamhost.com/?key=)也可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T16:24:24.710

我知道这是一个老问题，但我遇到了同样的问题，并通过另外两个问题找到了解决方案。

这向我展示了问题在于使用 SSLv3 的握手：

[Debian Wheezy 中的 OpenSSL 问题](https://serverfault.com/a/521926/204752)

这提供了一些可能的解决方案：

[在没有代理的 Ubuntu 12.04 上，对某些站点的 Python HTTPS 请求（urllib2）失败](https://askubuntu.com/a/488277/3987)

# android - 从android调用Web服务时出错

> ID：14970994
> 
> 赞同：1
> 
> 时间：2013-02-20T01:52:24.943
> 
> 标签：android, web-services, ksoap2

我的本地主机中有一个网络服务有这个链接

```
http://localhost:8085/firstWS/services/getSum?wsdl 
```

其中包含此 xml 代码

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns1="http://org.apache.axis2/xsd" xmlns:ns="http://omar" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://omar">
<wsdl:documentation>Please Type your service description here</wsdl:documentation>
<wsdl:types>
<xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://omar">
<xs:element name="sum">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="a" type="xs:int"/>
<xs:element minOccurs="0" name="b" type="xs:int"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="sumResponse">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="return" type="xs:int"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema>
</wsdl:types>
<wsdl:message name="sumRequest">
<wsdl:part name="parameters" element="ns:sum"/>
</wsdl:message>
<wsdl:message name="sumResponse">
<wsdl:part name="parameters" element="ns:sumResponse"/>
</wsdl:message>
<wsdl:portType name="getSumPortType">
<wsdl:operation name="sum">
<wsdl:input message="ns:sumRequest" wsaw:Action="urn:sum"/>
<wsdl:output message="ns:sumResponse" wsaw:Action="urn:sumResponse"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="getSumSoap11Binding" type="ns:getSumPortType">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="sum">
<soap:operation soapAction="urn:sum" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="getSumSoap12Binding" type="ns:getSumPortType">
<soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="sum">
<soap12:operation soapAction="urn:sum" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="getSumHttpBinding" type="ns:getSumPortType">
<http:binding verb="POST"/>
<wsdl:operation name="sum">
<http:operation location="sum"/>
<wsdl:input>
<mime:content type="application/xml" part="parameters"/>
</wsdl:input>
<wsdl:output>
<mime:content type="application/xml" part="parameters"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="getSum">
<wsdl:port name="getSumHttpSoap11Endpoint" binding="ns:getSumSoap11Binding">
<soap:address location="http://localhost:8085/firstWS/services/getSum.getSumHttpSoap11Endpoint/"/>
</wsdl:port>
<wsdl:port name="getSumHttpSoap12Endpoint" binding="ns:getSumSoap12Binding">
<soap12:address location="http://localhost:8085/firstWS/services/getSum.getSumHttpSoap12Endpoint/"/>
</wsdl:port>
<wsdl:port name="getSumHttpEndpoint" binding="ns:getSumHttpBinding">
<http:address location="http://localhost:8085/firstWS/services/getSum.getSumHttpEndpoint/"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

我正在使用这个java代码从服务器获取数据

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {
    TextView tv;
     private static final String NAMESPACE = "http://omar/";
     private static String URL = "http://192.168.1.3:8085/firstWS/services/getSum?wsdl"; 
     private static final String METHOD_NAME = "sum";
     private static final String SOAP_ACTION =  "getSum";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv=(TextView)findViewById(R.id.hellotv);
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

          PropertyInfo propInfo=new PropertyInfo();
          propInfo.name="a";
          propInfo.type=PropertyInfo.INTEGER_CLASS;

          request.addPropertyIfValue(propInfo, 5);  

          PropertyInfo propInfo2=new PropertyInfo();
          propInfo.name="b";
          propInfo.type=PropertyInfo.INTEGER_CLASS;

          request.addPropertyIfValue(propInfo, 6);

          SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

          envelope.setOutputSoapObject(request);
         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

          try {
           androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapPrimitive  resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();

           tv.setText(resultsRequestSOAP.toString());

          } catch (Exception e) {
              e.printStackTrace();

          }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

但是当我运行应用程序时，我从 logcat 收到了这个错误

```
02-20 05:22:00.951: W/System.err(31571): java.lang.NullPointerException
02-20 05:22:00.961: W/System.err(31571):    at java.io.Writer.write(Writer.java:141)
02-20 05:22:00.961: W/System.err(31571):    at org.kxml2.io.KXmlSerializer.startTag(KXmlSerializer.java:412)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:594)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:573)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:651)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:555)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:205)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.transport.Transport.createRequestData(Transport.java:132)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:139)
02-20 05:22:00.961: W/System.err(31571):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
02-20 05:22:00.961: W/System.err(31571):    at com.example.wsclient.MainActivity.onCreate(MainActivity.java:49)
02-20 05:22:00.961: W/System.err(31571):    at android.app.Activity.performCreate(Activity.java:5191)
02-20 05:22:00.961: W/System.err(31571):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
02-20 05:22:00.961: W/System.err(31571):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
02-20 05:22:00.961: W/System.err(31571):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-20 05:22:00.961: W/System.err(31571):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-20 05:22:00.961: W/System.err(31571):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-20 05:22:00.961: W/System.err(31571):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 05:22:00.961: W/System.err(31571):    at android.os.Looper.loop(Looper.java:137)
02-20 05:22:00.961: W/System.err(31571):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-20 05:22:00.961: W/System.err(31571):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 05:22:00.961: W/System.err(31571):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 05:22:00.961: W/System.err(31571):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-20 05:22:00.961: W/System.err(31571):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-20 05:22:00.961: W/System.err(31571):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:24:06.227

代替

```
http://192.168.1.3:8085/firstWS/services/getSum?wsdl 
```

利用

```
http://10.0.2.2:8085/firstWS/services/getSum?wsdl 
```

在您的 PC 本身中运行 Web 服务时使用“10.0.2.2”而不是“localhost”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:35:44.250

问题在于您添加请求参数的方式。好的代码是：

```
PropertyInfo propInfo=new PropertyInfo();
propInfo.name="a";
propInfo.type=PropertyInfo.INTEGER_CLASS;

request.addPropertyIfValue(propInfo, 5);  

PropertyInfo propInfo2=new PropertyInfo();
propInfo2.name="b";
propInfo2.type=PropertyInfo.INTEGER_CLASS;

request.addPropertyIfValue(propInfo2, 6); 
```