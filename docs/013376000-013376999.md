# StackOverflow 问答 13376000-13376999

# java - 如何将带有自定义对象的 HashMap 添加到 ArrayList

> ID：13376004
> 
> 赞同：0
> 
> 时间：2012-11-14T09:22:10.060
> 
> 标签：java, list, map, arraylist, hashmap

将带有自定义对象的 HashMap 添加到 ArrayList 时遇到问题。这是 HashMaps 定义：

```
static Map<Long, Supermarket> supermarkets = new HashMap<Long, Supermarket>();
static Map<Long, Product> products = new HashMap<Long, Product>(); 
```

这是 ArrayList 定义：

```
static ArrayList<HashMap> supemarketsAndProducts = new ArrayList<HashMap>(); 
```

我也尝试了一个具有相同结果的列表。 **Product**是一个创建产品对象的类。 **Supermarket**是创建超市对象的类。

问题在于向 de ArrayList 添加元素时。我正在尝试这种方式：

```
supemarketsAndProducts.add(supermarkets);
supemarketsAndProducts.add(products); 
```

我需要一个由这些哈希图（超市和产品）组成的结构，因为我需要这个类返回两个哈希图结构。我究竟做错了什么？返回我需要的哈希图的任何解决方案/解决方法？

谢谢并恭祝安康。

编辑：这是完整的代码（但它太长了：它是一个定制的 SAX 解析器，从另一个类调用，变量名称是西班牙语）。

```
package parsers;

import java.io.*;
import java.util.*;
import java.math.BigDecimal;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.XMLReader;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.helpers.*;
import org.xml.sax.SAXParseException;
import org.xml.sax.ErrorHandler;
import org.xml.sax.InputSource;

public class LectorXML extends DefaultHandler {

  static Map<Long, Supermercado> supermercados = new HashMap<Long, Supermercado>();
  static Map<Long, Producto> productos = new HashMap<Long, Producto>();
  static List<Map> supermercadosYproductos = new ArrayList<Map>();
  static Long numeroSupermercado = 0L;
  static Long numeroProducto = 0L;

  private final XMLReader xr;
  boolean bfname = false;
  boolean blname = false;
  boolean bnname = false;
  boolean bsalary = false;
  boolean bs_id = false;
  boolean bnombre = false;
  boolean bdireccion = false;
  boolean bpoblacion = false;
  boolean bprovincia = false;
  boolean blongitud = false;
  boolean blatitud = false;
  boolean bfavorito = false;
  boolean btelefono = false;
  boolean bp_id = false;
  boolean bcodigobarras = false;
  boolean bnombrep = false;
  boolean bfabricante = false;
  boolean bcategoria_1 = false;
  boolean bcategoria_2 = false;
  boolean bcategoria_3 = false;
  boolean bprecio_1 = false;
  boolean bfecha_1 = false;
  boolean bprecio_2 = false;
  boolean bfecha_2 = false;
  boolean bsupermercado = false;
  boolean bdireccion_supermercado = false;
  boolean bpoblacion_supermercado = false;
  boolean bcomprar = false;

  public LectorXML() throws SAXException {
    xr = XMLReaderFactory.createXMLReader();
    xr.setContentHandler(this);
    xr.setErrorHandler(this);
  }

  public void leer(final String archivoXML)
          throws FileNotFoundException, IOException, SAXException {
    FileReader fr = new FileReader(archivoXML);
    xr.parse(new InputSource(fr));
  }

//  @Override
//  public void startDocument() {
//    System.out.println("Comienzo del Documento XML");
//  }
//  @Override
//  public void endDocument() {
//    System.out.println("Final del Documento XML");
//  }
  @Override
  public void startElement(String uri, String name,
          String qName, Attributes attributes) throws SAXException {
//    System.out.println("tElemento: " + name);
//          System.out.println("Start Element :" + qName);

    for (int i = 0; i < attributes.getLength(); i++) {
//            System.out.println("qName: ------  " + qName + " ---------");
//            System.out.println("ttAtributo: "
//                    + attributes.getLocalName(i) + " = " + attributes.getValue(i));
      if (attributes.getValue(i).equalsIgnoreCase("s_id")) {
        bs_id = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("nombre")) {
//              System.out.println("Nombre del supermercado: " + attributes.getValue(i));
        bnombre = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("direccion")) {
//              System.out.println("Dirección del supermercado: " + attributes.getValue(i));
        bdireccion = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("poblacion")) {
//              System.out.println("Población del supermercado: " + attributes.getValue(i));
        bpoblacion = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("provincia")) {
//              System.out.println("Provincia del supermercado: " + attributes.getValue(i));
        bprovincia = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("longitud")) {
//              System.out.println("Longitud del supermercado: " + attributes.getValue(i));
        blongitud = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("latitud")) {
//              System.out.println("Latitud del supermercado: " + attributes.getValue(i));
        blatitud = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("favorito")) {
//              System.out.println("¿Supermercado favorito?: " + attributes.getValue(i));
        bfavorito = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("telefono")) {
//              System.out.println("Teléfono del supermercado: " + attributes.getValue(i));
        btelefono = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("p_id")) {
//              System.out.println("Id del producto: " + attributes.getValue(i));
        bp_id = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("codigobarras")) {
//              System.out.println("Código de barras del producto: " + attributes.getValue(i));
        bcodigobarras = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("nombrep")) {
//              System.out.println("Nombre del producto: " + attributes.getValue(i));
        bnombrep = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("fabricante")) {
//              System.out.println("Fabricante del producto: " + attributes.getValue(i));
        bfabricante = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("categoria_1")) {
//              System.out.println("Categoría del producto: " + attributes.getValue(i));
        bcategoria_1 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("categoria_2")) {
//              System.out.println("Categoría 2 del producto: " + attributes.getValue(i));
        bcategoria_2 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("categoria_3")) {
//              System.out.println("Categoría 3 del producto: " + attributes.getValue(i));
        bcategoria_3 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("precio_1")) {
//              System.out.println("Precio del producto: " + attributes.getValue(i));
        bprecio_1 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("fecha_1")) {
//              System.out.println("Fecha del producto: " + attributes.getValue(i));
        bfecha_1 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("precio_2")) {
//              System.out.println("Precio 2 del producto: " + attributes.getValue(i));
        bprecio_2 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("fecha_2")) {
//              System.out.println("Fecha 2 del producto: " + attributes.getValue(i));
        bfecha_2 = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("supermercado")) {
//              System.out.println("Nombre del supermercado del producto: " + attributes.getValue(i));
        bsupermercado = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("direccion_supermercado")) {
//              System.out.println("Dirección del supermercado del producto: " + attributes.getValue(i));
        bdireccion_supermercado = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("poblacion_supermercado")) {
//              System.out.println(" Población del supermercado del producto: " + attributes.getValue(i));
        bpoblacion_supermercado = true;
      }
      if (attributes.getValue(i).equalsIgnoreCase("comprar")) {
//              System.out.println(" Comprar el producto? " + attributes.getValue(i));
        bfavorito = true;
      }
    }
  }

//  @Override
//  public void endElement(String uri, String name,
//          String qName) throws SAXException {
//    System.out.println("tFin Elemento: " + name);
//  }
  @Override
  public void characters(char[] ch, int start, int length)
          throws SAXException {
//    System.out.println(new String(ch, start, length));

    Supermercado supermercado = new Supermercado();
    Producto producto = new Producto();

    if (bs_id) {
      String idSupermercado = new String(ch, start, length);
      System.out.println("Id del supermercado: " + idSupermercado);
      bs_id = false;
      supermercado.supermercadoId = Long.parseLong(idSupermercado);
    }
    if (bnombre) {
      String nombreSupermercado = new String(ch, start, length);
      System.out.println("Nombre del supermercado: " + nombreSupermercado);
      bnombre = false;
      supermercado.nombre = nombreSupermercado;
    }
    if (bdireccion) {
      String direccionSupermercado = new String(ch, start, length);
      System.out.println("Dirección del supermercado: " + direccionSupermercado);
      bdireccion = false;
      supermercado.direccion = direccionSupermercado;
    }
    if (bpoblacion) {
      String poblacionSupermercado = new String(ch, start, length);
      System.out.println("Población del supermercado: " + poblacionSupermercado);
      bpoblacion = false;
      if (poblacionSupermercado.equalsIgnoreCase(""))
        supermercado.poblacion = null;
      else supermercado.poblacion = poblacionSupermercado;
    }
    if (bprovincia) {
      String provinciaSupermercado = new String(ch, start, length);
      System.out.println("Provincia del supermercado: " + provinciaSupermercado);
      bprovincia = false;
      supermercado.provincia = provinciaSupermercado;
    }
    if (blongitud) {
      String longitudSupermercado = new String(ch, start, length);
      System.out.println("Longitud del supermercado: " + longitudSupermercado);
      blongitud = false;
      if (longitudSupermercado.equalsIgnoreCase("0"))
        supermercado.longitud = null;
      else supermercado.longitud = Double.parseDouble(longitudSupermercado);
    }
    if (blatitud) {
      String latitudSupermercado = new String(ch, start, length);
      System.out.println("Latitud del supermercado: " + latitudSupermercado);
      blatitud = false;
      if (latitudSupermercado.equalsIgnoreCase("0"))
        supermercado.latitud = null;
      else supermercado.latitud = Double.parseDouble(latitudSupermercado);
    }
    if (bfavorito) {
      String supermercadoFavorito = new String(ch, start, length);
      System.out.println("Supermercado favorito? " + supermercadoFavorito);
      bfavorito = false;
      if (supermercadoFavorito.equals("0")) {
        supermercado.favorito = false;
      } else if (supermercadoFavorito.equals("1")) {
        supermercado.favorito = true;
      }
    }
    if (btelefono) {
      String telefonoSupermercado = new String(ch, start, length);
      System.out.println("Teléfono del supermercado: " + telefonoSupermercado);
      btelefono = false;
      if (telefonoSupermercado.equalsIgnoreCase("0"))
        supermercado.telefono = null;
      else supermercado.telefono = telefonoSupermercado;
    }
    if (bp_id) {
      String idProducto = new String(ch, start, length);
      System.out.println("Id del producto: " + idProducto);
      bp_id = false;
      producto.productoId = Long.parseLong(idProducto);
    }
    if (bcodigobarras) {
      String codigoBarras = new String(ch, start, length);
      System.out.println("Código de barras del producto: " + codigoBarras);
      bcodigobarras = false;
      if (codigoBarras.equalsIgnoreCase("0"))
        producto.codigobarras = null;
      else producto.codigobarras = codigoBarras;
    }
    if (bnombrep) {
      String nombreProducto = new String(ch, start, length);
      System.out.println("Nombre del producto: " + nombreProducto);
      bnombrep = false;
      producto.nombre = nombreProducto;
    }
    if (bfabricante) {
      String fabricanteProducto = new String(ch, start, length);
      System.out.println("Fabricante del producto: " + fabricanteProducto);
      bfabricante = false;
      if (fabricanteProducto.equalsIgnoreCase(""))
        producto.fabricante = null;
      else producto.fabricante = fabricanteProducto;
    }
    if (bcategoria_1) {
      String categoria1 = new String(ch, start, length);
      System.out.println("Categoría del producto: " + categoria1);
      bcategoria_1 = false;
      producto.categoria_1 = categoria1;
    }
    if (bcategoria_2) {
      String categoria2 = new String(ch, start, length);
      System.out.println("Categoría 2 del producto: " + categoria2);
      bcategoria_2 = false;
      if (categoria2.equalsIgnoreCase(""))
        producto.categoria_2 = null;
      else producto.categoria_2 = categoria2;
    }
    if (bcategoria_3) {
      String categoria3 = new String(ch, start, length);
      System.out.println("Categoría 3 del producto: " + categoria3);
      bcategoria_3 = false;
      if (categoria3.equalsIgnoreCase(""))
        producto.categoria_3 = null;
      else producto.categoria_3 = categoria3;
    }
    if (bprecio_1) {
      String precio1 = new String(ch, start, length);
      System.out.println("Precio del producto: " + precio1);
      bprecio_1 = false;
      if (precio1.equalsIgnoreCase("0"))
        producto.precio_1 = null;
      else producto.precio_1 = Double.parseDouble(precio1);
    }
    if (bfecha_1) {
      String fecha1 = new String(ch, start, length);
      System.out.println("Fecha del producto: " + fecha1);
      bfecha_1 = false;
      if (fecha1.equalsIgnoreCase("0"))
        producto.fecha_1 = null;
      else producto.fecha_1 = ConvertirFecha.conversion(fecha1);
    }
    if (bprecio_2) {
      String precio2 = new String(ch, start, length);
      System.out.println("Precio 2 del producto: " + precio2);
      bprecio_2 = false;
      if (precio2.equalsIgnoreCase("0"))
        producto.precio_2 = null;
      else producto.precio_2 = Double.parseDouble(precio2);
    }
    if (bfecha_2) {
      String fecha2 = new String(ch, start, length);
      System.out.println("Fecha 2 del producto: " + fecha2);
      bfecha_2 = false;
      if (fecha2.equalsIgnoreCase("0"))
        producto.fecha_2 = null;
      else producto.fecha_2 = ConvertirFecha.conversion(fecha2);
    }
    if (bsupermercado) {
      String nombreSupermercadoProducto = new String(ch, start, length);
      System.out.println("Nombre del supermercado del producto: " + nombreSupermercadoProducto);
      bsupermercado = false;
      producto.supermercado = nombreSupermercadoProducto;
    }
    if (bdireccion_supermercado) {
      String direccionSupermercadoProducto = new String(ch, start, length);
      System.out.println("Dirección del supermercado del producto: " + direccionSupermercadoProducto);
      bdireccion_supermercado = false;
      producto.direccion_supermercado = direccionSupermercadoProducto;
    }
    if (bpoblacion_supermercado) {
      String poblacionSupermercadoProducto = new String(ch, start, length);
      System.out.println("Población del supermercado del producto: " + poblacionSupermercadoProducto);
      bpoblacion_supermercado = false;
      if (poblacionSupermercadoProducto.equalsIgnoreCase(""))
        producto.poblacion_supermercado = null;
      else producto.poblacion_supermercado = poblacionSupermercadoProducto;
    }
    if (bcomprar) {
      String comprarProducto = new String(ch, start, length);
      System.out.println(" Comprar el producto? " + comprarProducto);
      bcomprar = false;
      if (comprarProducto.equals("0")) {
        producto.comprar = false;
      } else if (comprarProducto.equals("1")) {
        producto.comprar = true;
      }
    }
    if (supermercado.supermercadoId != null)
      supermercados.put(numeroSupermercado, supermercado);
    if (producto.productoId != null)
      productos.put(numeroProducto, producto);
  }
  supermercadosYproductos.add(supermercados);
  supermercadosYproductos.add(productos);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:31:12.150

您必须使用通配符来覆盖将不同地图添加到列表中的事实：

```
static List<Map<Long, ?>> supemarketsAndProducts = new ArrayList<>(); 
```

当然，当你从这个列表中检索一个对象时，你不会有它的静态类型。那是不可能实现的。您需要执行未经检查的强制转换，并且您的类型安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:29:20.560

好吧，最后我自己解决了这个问题。定义没问题（原始代码，没有对变量进行翻译，以免浪费更多时间哈哈）：

```
static List<Map> supermercadosYproductos = new ArrayList<Map>(); 
```

问题是我试图将产品和超市保存在错误的位置：它应该以`public List<Map> leer(final String archivoXML)`这种方式在我的方法中：

```
if (!supermercadosYproductos.isEmpty()) {
  supermercadosYproductos.add(supermercados);
  supermercadosYproductos.add(productos);
  return supermercadosYproductos;
}
else return null; 
```

# ios - iOS - 在自定义 UITableViewCell 中为 UITextField 添加目标/操作

> ID：13376009
> 
> 赞同：3
> 
> 时间：2012-11-14T09:22:23.480
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

我有`UITableView`一个使用`UITableViewCell`包含`UITextField`.

我想在`myMethod`单击（）时调用一个方法（），`UIControlEventTouchDown`并尝试通过执行以下操作将其连接到`UITableView`委托方法中：`cellForRowAtIndexPath`

```
[tf addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchDown]; 
```

单击时`UITextField`，没有任何反应。

`UITextField`我试图为以下之外的另一个人做同样的事情`UITableView`：

```
[othertf addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchDown]; 
```

当我点击`othertf`该方法时，正如我所期望的那样。

我有点困惑，因为除了我换成`tf`了`othertf`.

下面是完整的代码`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *DetailCellIdentifier = @"DetailFieldView";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:DetailCellIdentifier];
    if (cell == nil) {
        NSArray *cellObjects = [[NSBundle mainBundle] loadNibNamed:DetailCellIdentifier owner:self options:nil];
        cell = (UITableViewCell*) [cellObjects objectAtIndex:0];
    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    UITextField *tf = (UITextField *)[cell viewWithTag:2];
    tf.text = @"some value";

    [othertf addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchDown];
    [tf addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchDown];

    return cell;
} 
```

谁能发现我做错了什么？这可能很简单，因为我是 iOS 开发的新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T09:27:58.490

使用`UITextField` `delegate`方法：

[UITextField 委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

```
//Use this method insted of addTarget:
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    if (textField == tf) {
        [self myMethod];
        return NO;
    }

  return YES;
} 
```

并且不要忘记将委托设置为文本字段：

```
 tf.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:08:46.203

当您触摸 UITextField 时，它会吞下触摸本身并告诉键盘出现等。而是使用以下事件：

```
UIControlEventEditingDidBegin

UIControlEventEditingDidEnd

UIControlEventEditingChanged 
```

**进一步改进**

标签是一种耦合 NIB 和代码的相当松散的方式。考虑制作一个`DetailCell.h`和`DetailCell.m`文件，并将 NIB 文件中的根视图设置为 DetailCell 类，并为您需要在代码中访问的所有视图创建引用出口，并为您需要做出反应的所有操作创建操作出口。

![在此处输入图像描述](../Images/bab3a4a05afcb8e0e6e7cca0ad26ab59.png)

这是通过 CTRL 单击界面构建器中的视图并将其拖到`DetailCell.h`文件中来完成的。Interface Builder 现在会询问您是要创建操作还是引用出口（引用基本上是指针，操作基本上是事件）

`dequeueReusableCellWithReuseIdentifier`现在`initWithFrame`每次调用 DetailCell 类都会创建它的新实例。现在您的工作是在此函数中加载 NIB 文件。

或者，您可以注册一个 NIB 文件以在 tableview 上重用单元格

> `[tableview registerNib:[UINib nibWithNibName:DetailCellIdentifier bundle:nil] forCellWithReuseIdentifier: DetailCellIdentifier];`

每次创建新单元格时都会自动加载 nib 文件。在 >= iOS 5 (AFAIK)中`dequeueReusableCellWithReuseIdentifier`永远不会返回`nil`，但每次都会创建已注册的类/nib 文件的实例。

# maven - JBoss 4.2 服务器中的 War 文件部署，带有 Maven 存储库

> ID：13376011
> 
> 赞同：1
> 
> 时间：2012-11-14T09:22:29.770
> 
> 标签：maven, deployment, jboss, maven-3, war

我是第一次使用 Maven 用户。我的项目需要作为war文件部署到JBoss 4.2服务器中。

我意识到如果我们使用**Maven** ，我们可以消除**Ant**。

 **以前我曾经在 build.properties 文件中配置我的构建路径和我的 jar 位置。现在使用 Maven，我很困惑如何使用 Maven 构建带有引用库的战争文件。

我的目录结构如下：

![项目目录结构](../Images/dd52581ffe9fcaaf53ca98b5e9b18391.png)

我以前的 build.properties 文件是：

```
deploydir=C:/jboss-4.2.3.GA/server/default/deploy
userlib=C:/Jar/empty
warname=bala 
```

我的 Maven pom.xml 是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.source.sample</groupId>
    <artifactId>JavaServerFaces</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>JavaServerFaces Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <description>This is a sample project</description>

    <dependencies>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <dependency>
            <groupId>com.sun.el</groupId>
            <artifactId>el-ri</artifactId>
            <version>1.0</version>
        </dependency>

    </dependencies>

</project> 
```

我正在尝试通过右键单击项目和“运行方式 - Maven 安装”来构建战争文件。

我收到如下错误。

```
 [INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building JavaServerFaces Maven Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.pom (7 KB at 5.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/19/maven-plugins-19.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-plugins/19/maven-plugins-19.pom (11 KB at 22.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/19/maven-parent-19.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/19/maven-parent-19.pom (25 KB at 35.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/9/apache-9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/9/apache-9.pom (15 KB at 30.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.jar (26 KB at 35.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.pom (11 KB at 22.5 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.10/surefire-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire/2.10/surefire-2.10.pom (12 KB at 24.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/20/maven-parent-20.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/20/maven-parent-20.pom (25 KB at 49.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-surefire-plugin/2.10/maven-surefire-plugin-2.10.jar (30 KB at 39.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.pom (5 KB at 10.2 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/2.3.1/maven-install-plugin-2.3.1.jar (23 KB at 41.9 KB/sec)
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ JavaServerFaces ---
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0/maven-filtering-1.0.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0/maven-filtering-1.0.pom (6 KB at 12.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/16/maven-shared-components-16.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/16/maven-shared-components-16.pom (9 KB at 17.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0/maven-filtering-1.0.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0/maven-filtering-1.0.jar (42 KB at 39.5 KB/sec)
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ JavaServerFaces ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ JavaServerFaces ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ JavaServerFaces ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ JavaServerFaces ---
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/2.0.9/maven-plugin-api-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/2.0.9/maven-plugin-api-2.0.9.pom (2 KB at 3.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven/2.0.9/maven-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven/2.0.9/maven-2.0.9.pom (19 KB at 21.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/8/maven-parent-8.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/8/maven-parent-8.pom (24 KB at 29.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/4/apache-4.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/4/apache-4.pom (5 KB at 8.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.pom (3 KB at 4.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.pom (3 KB at 4.8 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.pom (4 KB at 8.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.pom (4 KB at 8.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/sonatype/spice/spice-parent/16/spice-parent-16.pom
Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/spice/spice-parent/16/spice-parent-16.pom (9 KB at 16.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/sonatype/forge/forge-parent/5/forge-parent-5.pom
Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/forge/forge-parent/5/forge-parent-5.pom (9 KB at 16.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-artifact/2.0.9/maven-artifact-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-artifact/2.0.9/maven-artifact-2.0.9.pom (2 KB at 3.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-project/2.0.9/maven-project-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-project/2.0.9/maven-project-2.0.9.pom (3 KB at 5.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-settings/2.0.9/maven-settings-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-settings/2.0.9/maven-settings-2.0.9.pom (3 KB at 4.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-model/2.0.9/maven-model-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-model/2.0.9/maven-model-2.0.9.pom (4 KB at 6.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-profile/2.0.9/maven-profile-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-profile/2.0.9/maven-profile-2.0.9.pom (3 KB at 4.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-artifact-manager/2.0.9/maven-artifact-manager-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-artifact-manager/2.0.9/maven-artifact-manager-2.0.9.pom (3 KB at 5.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-repository-metadata/2.0.9/maven-repository-metadata-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-repository-metadata/2.0.9/maven-repository-metadata-2.0.9.pom (2 KB at 4.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-registry/2.0.9/maven-plugin-registry-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-registry/2.0.9/maven-plugin-registry-2.0.9.pom (2 KB at 4.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-core/2.0.9/maven-core-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-core/2.0.9/maven-core-2.0.9.pom (8 KB at 15.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-parameter-documenter/2.0.9/maven-plugin-parameter-documenter-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-parameter-documenter/2.0.9/maven-plugin-parameter-documenter-2.0.9.pom (2 KB at 4.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.pom (2 KB at 3.8 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting/2.0.9/maven-reporting-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting/2.0.9/maven-reporting-2.0.9.pom (2 KB at 3.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-error-diagnostics/2.0.9/maven-error-diagnostics-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-error-diagnostics/2.0.9/maven-error-diagnostics-2.0.9.pom (2 KB at 3.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-descriptor/2.0.9/maven-plugin-descriptor-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-descriptor/2.0.9/maven-plugin-descriptor-2.0.9.pom (3 KB at 4.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-monitor/2.0.9/maven-monitor-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-monitor/2.0.9/maven-monitor-2.0.9.pom (2 KB at 2.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.pom (4 KB at 7.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom (4 KB at 7.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/12/maven-shared-components-12.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/12/maven-shared-components-12.pom (10 KB at 18.8 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/13/maven-parent-13.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/13/maven-parent-13.pom (23 KB at 44.2 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/6/apache-6.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/6/apache-6.pom (13 KB at 25.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-9/plexus-container-default-1.0-alpha-9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-9/plexus-container-default-1.0-alpha-9.pom (2 KB at 2.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.jar
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.jar
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.jar
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.jar
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.jar (34 KB at 40.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.jar (31 KB at 23.1 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.jar (10 KB at 19.2 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.jar (60 KB at 33.6 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.jar (220 KB at 91.8 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.jar (158 KB at 65.1 KB/sec)
[INFO] Surefire report directory: C:\Users\User-1\workspace\01mkyoungJSF\target\surefire-reports
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit3/2.10/surefire-junit3-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit3/2.10/surefire-junit3-2.10.pom (2 KB at 3.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.10/surefire-providers-2.10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.10/surefire-providers-2.10.pom (3 KB at 4.7 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit3/2.10/surefire-junit3-2.10.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit3/2.10/surefire-junit3-2.10.jar (26 KB at 46.8 KB/sec)

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-war-plugin:2.1.1:war (default-war) @ JavaServerFaces ---
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.pom (4 KB at 8.2 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/1.0/plexus-archiver-1.0.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/1.0/plexus-archiver-1.0.pom (2 KB at 3.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-components/1.1.17/plexus-components-1.1.17.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-components/1.1.17/plexus-components-1.1.17.pom (6 KB at 10.5 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/2.0.5/plexus-2.0.5.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/2.0.5/plexus-2.0.5.pom (17 KB at 32.8 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/1.0/plexus-io-1.0.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/1.0/plexus-io-1.0.pom (2 KB at 2.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/1.2/plexus-archiver-1.2.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/1.2/plexus-archiver-1.2.pom (2 KB at 4.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/1.0.1/plexus-io-1.0.1.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/1.0.1/plexus-io-1.0.1.pom (2 KB at 2.6 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.pom
Downloaded: http://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.pom (12 KB at 22.9 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream-parent/1.3.1/xstream-parent-1.3.1.pom
Downloaded: http://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream-parent/1.3.1/xstream-parent-1.3.1.pom (14 KB at 28.5 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.pom
Downloaded: http://repo.maven.apache.org/maven2/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.pom (2 KB at 3.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0-beta-2/maven-filtering-1.0-beta-2.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0-beta-2/maven-filtering-1.0-beta-2.pom (4 KB at 8.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/10/maven-shared-components-10.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/10/maven-shared-components-10.pom (9 KB at 17.4 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/9/maven-parent-9.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/9/maven-parent-9.pom (33 KB at 45.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/1.5.6/plexus-utils-1.5.6.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/1.5.6/plexus-utils-1.5.6.pom (6 KB at 10.3 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/1.0.12/plexus-1.0.12.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/1.0.12/plexus-1.0.12.pom (10 KB at 20.0 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.6/plexus-interpolation-1.6.pom
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.6/plexus-interpolation-1.6.pom (3 KB at 6.1 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.jar
Downloading: http://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/1.2/plexus-archiver-1.2.jar
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/1.0.1/plexus-io-1.0.1.jar
Downloading: http://repo.maven.apache.org/maven2/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.jar (20 KB at 37.8 KB/sec)
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0-beta-2/maven-filtering-1.0-beta-2.jar
Downloaded: http://repo.maven.apache.org/maven2/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar (25 KB at 20.3 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/1.0.1/plexus-io-1.0.1.jar (50 KB at 30.0 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-filtering/1.0-beta-2/maven-filtering-1.0-beta-2.jar (33 KB at 28.4 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/1.2/plexus-archiver-1.2.jar (178 KB at 67.7 KB/sec)
Downloaded: http://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar (422 KB at 141.0 KB/sec)
[INFO] Packaging webapp
[INFO] Assembling webapp [JavaServerFaces] in [C:\Users\User-1\workspace\01mkyoungJSF\target\JavaServerFaces-0.0.1-SNAPSHOT]
[INFO] Processing war project
[INFO] Webapp assembled in [55 msecs]
[INFO] Building war: C:\Users\User-1\workspace\01mkyoungJSF\target\JavaServerFaces-0.0.1-SNAPSHOT.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 42.821s
[INFO] Finished at: Wed Nov 14 15:06:16 IST 2012
[INFO] Final Memory: 6M/59M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.1.1:war (default-war) on project JavaServerFaces: Error assembling WAR: webxml attribute is required (or pre-existing WEB-INF/web.xml if executing in update mode) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我不明白如何将战争文件部署到 JBoss 4.2 服务器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:37:30.627

问题是`maven-war-plugin`找不到`web.xml`文件。

如果您想使用 maven，我的建议是坚持 maven 约定，尤其是[Maven Directory Layout](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。

一个简单的战争项目将具有以下目录布局：

```
.
├── pom.xml
└── 源
    ├── 主要
    | ├── java
    | | └── 我的
    | | └── 包装
    | | └── SomeJavaClass.java
    | ├── 资源
    | | └── 我的
    | | └── 包装
    | | └── UIMessages_en.properties
    | └── 网页应用
    | ├──你好.xhtml
    | ├── 欢迎.xhtml
    | └── WEB-INF
    | └── web.xml
    └── 测试
        └── java
            └── 我的
                └── 包装
                    └── SomeJavaClassTest.java

```**

# ruby-on-rails - 渲染另一个命名空间的一部分

> ID：13376012
> 
> 赞同：1
> 
> 时间：2012-11-14T09:22:31.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有个问题。我需要使用另一个命名空间的部分来渲染对象。

```
 render complain.target 
```

它尝试从当前命名空间（当前是`admin`）呈现部分

> 缺少部分管理员/公告/公告...

我不需要从 admin/.. 渲染它

我不能指定部分路径

```
render partial: '/bulletins/bulletin', locals: { bulletin: complain.target } 
```

但它是多态关联，使用了不同的部分路径。有什么办法吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-07T15:15:56.100

似乎没有办法通过`render complain.target`调用来实现这一点（Checked on Rails 5 source）。

不过，action_view 有一个配置选项可以禁用部分命名空间的前缀：

```
 Rails.application.config.action_view.prefix_partial_path_with_controller_namespace = false 
```

**编辑**

今天，我使用了另一种解决方案：在将 Single-Table-Inheritance 模型渲染为局部模型时，可以在调用局部渲染时根据 Rails 模型名称查找传递局部变量名称：

```
<%= render partial: "admin/#{object.to_partial_path}", 
           locals: { object.model_name.element => object } 
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:51:28.443

您可以使用`render "/#{complain.target.to_partial_path}"`

# c++ - devIL ilLoad error 1285

> ID：13376021
> 
> 赞同：2
> 
> 时间：2012-11-14T09:22:51.670
> 
> 标签：c++, opengl, loading, textures, devil

I'm Having an issue with loading an image with devIL for openGL

in an earlier part of my project i call

```
ilInit(); 
```

in a function right after i call my load just like this

```
//generate a texture
ilGenImages( 1, &uiTextureHandle );

//bind our image
ilBindImage( uiTextureHandle );

//load
//ilLoad( IL_PNG, (const ILstring)"fake.png" );
ilLoad( IL_PNG, "fake.png" ); 
```

for the sake of error tracking i did place "ilGetError()" after every call which returned 0 for all of these except for ilLoad which returns 1285

after some searching i figured out that this is a lack of memory error.

so ilLoad always returns 0 and not loaded.

anyone know what im doing incorrect as for my loading or if i forgot to do something because i feel i might have forgotten something and thats the reason why 1285 appears.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T14:45:57.643

`ilLoad()`失败的一个常见原因`IL_OUT_OF_MEMORY`是您使用的 PNG 文件已损坏。

但是， 1285 意味着`IL_INVALID_VALUE`- 这意味着您提供的路径可能是错误的。尝试使用绝对路径（请记住，反斜杠在 C++ 中是不行的，除非您使用双斜杠）。

我个人使用 DevIL 已经有一段时间了，并且确实喜欢它。但是，我敦促您考虑 FreeImage。它正在进行更多开发并且非常稳定 - 我在商业引擎中使用它来满足我所有的图像需求，并且它与 DirectX/OpenGL 很好地集成，就像 DevIL 一样。

# php - 我可以阻止 imap_search 将电子邮件设置为 READ

> ID：13376023
> 
> 赞同：1
> 
> 时间：2012-11-14T09:22:56.273
> 
> 标签：php, email, imap

我有一个功能可以连接到 imap 电子邮件帐户（目前正在使用 gmail 测试）以获取 UNSEEN 的电子邮件。收到电子邮件后，我会遍历它们并`imap_fetch_overview()`在`imap_fetchbody()`每封电子邮件上执行。

运行此功能后，所有已搜索的电子邮件都会在收件箱中设置为已读。

有没有办法阻止这种情况发生？理想情况下，我希望电子邮件保持看不见。

这是我的功能

```
function build_email_data(){

    $this->connect();

    /* grab emails */
    $emails = imap_search($this->inbox,'UNSEEN');

    /* if emails are returned, cycle through each... */
    if($emails) {

        /* put the newest emails on top */
        rsort($emails);

        $data = array();

        /* for every email... */
        foreach($emails as $email_number) {

            /* get information specific to this email */
            $overview = imap_fetch_overview($this->inbox,$email_number,0);
            $message = imap_fetchbody($this->inbox,$email_number,1);

            $_data['subject'] = $overview[0]->subject;
            $_data['from'] = $overview[0]->from;
            $_data['body'] = $message;
            $_data['owner_id'] = 1;
            $_data['email_number'] = $email_number;
            $_data['folder_id'] = 1;
            $_data['created'] = timestamp_to_mysqldatetime();
            $_data['updated'] = timestamp_to_mysqldatetime();
            $_data['email_date'] = timestamp_to_mysqldatetime(strtotime($overview[0]->date));

            $data[] = $_data;
        }

        $this->disconnect();

        return $data;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:45:37.717

我弄清楚了为什么他们被设置为 READ 以及如何阻止它。

```
$message = imap_fetchbody($this->inbox,$email_number,1); 
```

该代码将消息设置为 READ。通过添加 FT_PEEK 作为选项，它仍然是 UNSEEN

```
$message = imap_fetchbody($this->inbox,$email_number,1, FT_PEEK); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:02:29.090

你混淆了 UNSEEN 和 RECENT 吗？获取消息将清除 RECENT 标志，但只有更改标志（添加 \Seen）才能更改 SEEN 标志。

# linux - xvfb 和 wkhtmltoimage 总是抓取 1024 宽度的图像

> ID：13376025
> 
> 赞同：0
> 
> 时间：2012-11-14T09:23:02.863
> 
> 标签：linux, screen, screenshot, xvfb, wkhtmltoimage

我使用 wkhtmltoimage 从网络服务器抓取屏幕截图，它总是得到 1024px png 图像。我可能做错了什么？

```
/usr/bin/xvfb-run.sh --server-args="-screen 0, 1280x1024x32 -ac +extension GLX +render" wkhtmltoimage --use-xserver -f png --quality 83 --javascript-delay 1000 --transparent ' http://www.whatever.com screenshot.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:56:27.023

xvfb-run 命令中指定的屏幕分辨率为 1280x1024，因此抓取的屏幕截图也是 1280x1024。您可以更改模拟屏幕的分辨率或使用 wkhtmltoimage 命令上的参数裁剪图像。引用 wkhtmltoimage 手册：

```
--crop-h    <int>   Set height for croping
--crop-w    <int>   Set width for croping
--crop-x    <int>   Set x coordinate for croping
--crop-y    <int>   Set y coordinate for croping 
```

# javascript - javascript中的“new Class”和“new Class()”有什么区别

> ID：13376028
> 
> 赞同：1
> 
> 时间：2012-11-14T09:23:08.183
> 
> 标签：javascript

```
 function ClassA(){
  this.value = 5;
}

var obj1 = new ClassA;
var obj2 = new ClassA();

console.log(obj1.value);
console.log(obj2.value); 
```

两者都在控制台中打印“5”。两种方式之间有什么区别（除了包含构造函数的参数）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:24:18.180

括号是可选的 - 如果您没有要传递的任何构造函数参数，则可以省略它们。

奇怪的是，分号也（有时）是可选的，这要归功于自动分号插入（[来源](http://mislav.uniqpath.com/2010/05/semicolons/)，[更多](http://lucumr.pocoo.org/2011/2/6/automatic-semicolon-insertion/)）。这在今年早些时候引发了一场漫长的辩论，并引起了[Douglas Crockford](http://news.ycombinator.com/item?id=3842713)（JSON/JSLint 发明者，JS 大师）的回应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:24:28.790

根本没有任何区别。

如果没有参数，并且有一个`new`，那么括号是可选的。

# powershell - How to pass Multiple Variables as Arguments to a Script using Start-job

> ID：13376030
> 
> 赞同：9
> 
> 时间：2012-11-14T09:23:13.743
> 
> 标签：powershell, powershell-2.0

How to pass Multiple Variables as Arguments to a Script using Start-job.

```
 Start-Job -Name "$jobName" -filepath $TestTool -ArgumentList $compare1 
```

how to retrieve this argument values (of $arg1 and $arg2) in a script TestTool.ps1?

Rgds Naveen

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T10:15:24.150

```
 PS>Start-Job -Name test -ArgumentList @("hello","word") -FilePath \\server\share\test.ps1 
```

在 test.ps1 中只是回显 $args var

```
 $args 
```

结果 ：

```
PS>Receive-Job test -keep
hello
word 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:27:49.167

[http://technet.microsoft.com/en-us/library/hh849698.aspx](http://technet.microsoft.com/en-us/library/hh849698.aspx)

“因为 ArgumentList 参数名称后面的所有值都被解释为 ArgumentList 的值，所以 ArgumentList 参数应该是命令中的最后一个参数。”

所以我猜想是这样的：

```
... -ArgumentList $arg1 $arg2 
```

应该管用？

# java - maven surefirereport -doutputdirectory not working

> ID：13376034
> 
> 赞同：4
> 
> 时间：2012-11-14T09:23:38.877
> 
> 标签：java, maven, surefire

I tried adding this code to my pom.xml

```
<reporting>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-report-plugin</artifactId>
    <version>2.12.4</version>
    <configuration>
      <outputDirectory>D:/eclipse_ws/reports</outputDirectory>
    </configuration>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-site-plugin</artifactId>
    <version>2.1</version>
    <configuration>
      <outputDirectory>D:/eclipse_ws/reports</outputDirectory>
    </configuration>
  </plugin>
</plugins> 
```

and executing this in windows command prompt

`mvn surefire-report:report -DoutputDirectory=D:/eclipse_ws/reports`

I am still getting the surefire-report.html report in the target/site/ folder itself. Is it possible to change the directory in the way I did? Did I make any mistake?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-19T09:03:51.760

[从报告插件文档](http://maven.apache.org/surefire/maven-surefire-report-plugin/examples/report-custom-location.html)配置肯定报告的输出位置似乎确实是错误的。

我在[这个文档页面](https://maven.apache.org/surefire/maven-surefire-report-plugin/report-mojo.html)`<xrefLocation>`上找到了目标参数的 描述`surefire-report:report`，它指的是`${project.reporting.outputDirectory}`值。我在我的 pom.xml 中尝试过，它有效：

```
<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-report-plugin</artifactId>
            <version>3.0.0-M1</version>
        </plugin>
    </plugins>
    <outputDirectory>${basedir}/new-reports-dir</outputDirectory>
</reporting> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T20:59:50.660

官方文档建议类似于 OP 的配置[应该可以工作](http://maven.apache.org/surefire/maven-surefire-report-plugin/examples/report-custom-location.html)，但事实并非如此。

对我有用的是：

```
<project>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.18.1</version>
                <configuration>
                    <reportsDirectory>C:/eclipse_ws/reports</reportsDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

相对路径也可以。此外，您不需要将目录指定为命令行参数，因为您已经在配置中这样做了。

# jquery - Fieldset prevents reading values input elements

> ID：13376038
> 
> 赞同：0
> 
> 时间：2012-11-14T09:23:58.207
> 
> 标签：jquery, html

The following situation works fine (JSP file):

```
<p class="FormInputElement">
        <label for="description">Description</label>
        <input type="text" class="description" id="description"/><br />
</p>
<button class="Button75" type="submit" id= "editWidget" alt="Edit widget">
        <img src="/tis/img/icons/tick.png">
                Save
</button> 
```

In my Servlet, a .JS file, the description value can be read like this:

```
$(function() {
    $("#editWidget").click(function(e){
        var description = $(this).parent().find('.description').val(); 
```

However, if I put `<fieldset>` tags around the button, the description is always "". The servlet can't read the value anymore. How is this possible? What changes when using a fieldset?

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:33:47.153

你原来的标记结构是这样的

*   DIV *（或任何其他容器）*
    *   磷
        *   标签
        *   输入#描述
    *   按钮#editWidget

这里`$(this).parent()`将转到 DIV，并`.find()`从那里开始工作，找到预期的元素。

随着`<fieldset>`，标记结构变为

*   分区
    *   磷
        *   标签
        *   输入#描述
    *   场集
        *   按钮#editWidget

这里`$(this).parent()`将转到 FIELDSET，`.find()`但什么也找不到。

解决方法：不要使用`.parent()`，使用`.closest("div")`。

# asp.net - DataTable loses data when called in another form

> ID：13376045
> 
> 赞同：0
> 
> 时间：2012-11-14T09:24:11.683
> 
> 标签：asp.net, gridview, datatable

I have two webform say **wf1** and **wf2**,

I've data in ***wf1 gridview gv1***, Now i'm trying to copy this data to another form like

```
wf2.gv2.DataSource=gv1.DataSource; 
wf2.gv2.DataBind(); 
```

if I see using breakpoint, I have data in ***gv2*** of ***wf2***, but when i try to view that ***gv2*** in ***wf2***, there is no record in it. In *wf2* i have added

```
 myDiv.Controls.Add(gv2); 
```

Hope you understand my question. Can you tell me why, I'm struck in this issue for 3 days

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:33:49.583

gv1 不是持久性和失去它的状态。

您需要检查的是：当页面完全呈现时，gv1 已经丢失了它的值，就像您在其他 Web 表单上一样。您需要找到不同的方法或尝试使用页面加载方法

# javascript - 如何以编程方式刷新浏览器

> ID：13376048
> 
> 赞同：38
> 
> 时间：2012-11-14T09:24:17.843
> 
> 标签：javascript, html, ajax, browser, page-refresh

我有三台电脑；`Server`,`Client`和`Viewer`. 我控制着服务器和查看器。 ![工作流程](../Images/213ae72d2abeb8482afe236fca57c204.png)

1.  `Client`连接到 的用户会看到`Server`一个网页。
2.  用户通过 php 脚本上传图像。
3.  该图像嵌入在一些 html 中。
4.  这`Viewer`是一台完全没有用户交互的计算机——没有键盘。`Viewer`始终运行网络浏览器，显示图片页面。

我现在的问题是，即使服务器磁盘上的图片发生了变化，网页也没有更新。如何在查看器或网页的一部分上刷新 Web 浏览器？

我知道 html、css、javascript、php 和 ajax，但显然还不够好。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-12T05:59:23.790

至少有三种方法可以做到这一点。

**纯 HTML**

[正如Amitd](https://stackoverflow.com/users/158297/amitd)的评论所指出的，在“show.html”中将以下`<meta>`标签添加到您的文档`<head>`元素中：

```
<meta http-equiv="refresh" content="5" /> 
```

这将每 5 秒自动刷新一次页面。将属性的值调整为`content`所需的秒数。

**纯 JavaScript：**

[正如MeNoMore](https://stackoverflow.com/users/395659/menomore)所指出的，`document.location.reload()`当你调用它时会刷新页面。

```
<script type="text/javascript">
    //put this somewhere in "show.html"
    //using window onload event to run function
    //so function runs after all content has been loaded.
    //After refresh this entire script will run again.
    window.onload = function () {
        'use strict';
        var millisecondsBeforeRefresh = 5000; //Adjust time here
        window.setTimeout(function () {
            //refresh the entire document
            document.location.reload();
        }, millisecondsBeforeRefresh);
    };
</script> 
```

[正如tpower](https://stackoverflow.com/users/18107/tpower)所指出的，可以使用 AJAX 请求，但是您需要编写一个 Web 服务来返回一个指向所需图像的 url。执行 AJAX 请求的 JavaScript 看起来像这样：

```
<script type="text/javascript">
    //put this somewhere in "show.html"
    //using window onload event to run function
    //so function runs after all content has been loaded.
    window.onload = function () {
        'use strict';
        var xhr,
            millisecondsBeforeNewImg = 5000;    // Adjust time here
        if (window.XMLHttpRequest) {
            // Mozilla, Safari, ...
            xhr = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            // IE
            try {
                // try the newer ActiveXObject
                xhr = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    // newer failed, try the older one
                    xhr = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {
                    // log error to browser console
                    console.log(e);
                }
            }
        }
        if (!xhr) {
            // log error to browser console
            console.log('Giving up :( Cannot create an XMLHTTP instance');
        }
        xhr.onreadystatechange = function () {
            var img;
            // process the server response
            if (xhr.readyState === 4) {
                // everything is good, the response is received
                if (xhr.status === 200) {
                    // perfect!
                    // assuming the responseText contains the new url to the image...
                    // get the img
                    img = document.getElementById('theImgId');
                    //set the new src
                    img.src = xhr.responseText;
                } else {
                    // there was a problem with the request,
                    // for example the response may contain a 404 (Not Found)
                    // or 500 (Internal Server Error) response code
                    console.log(xhr.status);
                }
            } else {
                // still not ready
                // could do something here, but it's not necessary
                // included strictly for example purposes
            }
        };
        // Using setInterval to run every X milliseconds
        window.setInterval(function () {
            xhr.open('GET', 'http://www.myDomain.com/someServiceToReturnURLtoDesiredImage', true);
            xhr.send(null);
        }, millisecondsBeforeNewImg)
    };
</script> 
```

**其他方法：**

最后，要回答您对[tpower](https://stackoverflow.com/users/18107/tpower)的回答的问题...`$.ajax()`正在使用[jQuery](http://jquery.com/)进行 AJAX 调用。jQuery 是一个 JavaScript 库，它使 AJAX 调用和 DOM 操作变得更加简单。要使用 jQuery 库，您需要在`<head>`元素中包含对它的引用（以版本 1.4.2 为例）：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
```

您也可以下载“jquery.min.js”并将其托管在本地，但这当然只会更改您从中加载脚本的 url。

上面的 AJAX 函数在使用 jQuery 编写时看起来更像这样：

```
<script type="text/javascript">
    //put this somewhere in "show.html"
    //document.ready takes the place of window.onload
    $(document).ready(function () {
        'use strict';
        var millisecondsBeforeNewImg = 5000;    // Adjust time here
        window.setInterval(function () {
            $.ajax({
                "url": "http://www.myDomain.com/someServiceToReturnURLtoDesiredImage",
                "error": function (jqXHR, textStatus, errorThrown) {
                    // log error to browser console
                    console.log(textStatus + ': ' + errorThrown);
                },
                "success": function (data, textStatus, jqXHR) {
                    //get the img and assign the new src
                    $('#theImgId').attr('src', data);
                }
            });
        }, millisecondsBeforeNewImg);
    });
</script> 
```

我希望很明显，jQuery 版本更简单、更干净。但是，鉴于您的项目范围很小，我不知道您是否愿意为 jQuery 的额外开销而烦恼（并不是说那么多）。我也不知道您的项目要求是否允许使用 jQuery。我包括这个例子只是为了回答你的问题`$.ajax()`。

我同样确信还有其他方法可以完成刷新图像。就个人而言，如果图像 url 总是在变化，我会使用 AJAX 路由。如果图像 url 是静态的，我可能会使用`<meta>`刷新标签。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-16T07:51:36.910

我有完全相同的应用程序。只需使用`WebSockets`.

您可以启动 a ，服务器将在收到更新时`websocket connection`通知它。`Viewer`您可以通过 websocket 发送更新的图像，完全异步，不会干扰显示或用户交互。

如果您使用计时器，您将无法获得快速更新，或者您将不断刷新页面而不使用。

* * *

**细节：**

将需要一个 Websocket 服务器，如`pywebsocket`or `phpwebsocket`。

**客户：**

需要 HTML5 websocket 支持，当前所有浏览器都支持。

发生图像更新时需要注册消息。这就像注册一个回调。

例子：

```
wSocket = new WebSocket('ws://' + serverIP + ':' + serverPort + '/images');

wSocket.onopen = function() {
    console.log("Primary Socket Connected.");

    connectedPrimary = true;

    wSocket.send("sendImageUpdates");
};

wSocket.onmessage = function(evt) {
    // evt is the message from server

    // image will be representated as a 64 encoded string

    // change image with new one
    $("#image").attr('src', 'data:image/png;base64,' + evt.data);
}

wSocket.onclose = function() {
    console.log("Primary Socket Closed.");

    wSocket = null;
};

wSocket.onerror = function(evt) {
    alert(evt);
} 
```

每当服务器发送更新时，将调用映射到的函数`wSocket.onmessage`，您可以对它做任何您需要做的事情。

**服务器：**

将侦听来自客户端的连接（可以支持多个客户端）。一旦建立连接并`"sendImageUpdates"`收到消息，服务器将等待图像中的任何更新。当上传新图像时，服务器将创建一条新消息并发送给客户端。

**优点**

1.  将在图像上传后立即获得更新，并且仅在图像上传时。
2.  客户将知道图像已更改并可以执行其他功能。
3.  完全异步和服务器驱动。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-14T09:29:51.747

您可以使用 AJAX 请求来提供帮助。例如，您正在做的是每五秒钟轮询一次服务器以获取图像。相反，您可以轮询服务器以获取新的图像 ID，并使用该 ID 而不是图像源的随机数。在这种情况下， src 属性只会在有新图像时更改/重新加载。

```
<script language="JavaScript"><!--
function refreshIt() {
   if (!document.images) return;
   $.ajax({
      url: 'latest-image-id.json',
      success: function(newId){
          document.images['doc'].src = 'doc.png?' + newId;        
      }
   });
   setTimeout(refreshIt, 5000); // refresh every 5 secs
}
//--></script>
</head>
<body onLoad=" setTimeout(refreshIt, 5000)">
<img src="doc.png" name="doc"> 
```

另一种方法是在图像通过 Web 套接字更改时从服务器获取通知。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-16T07:43:50.073

在特定的时间间隔内重新加载页面可能会奏效。

```
setTimeout(function(){
window.location.reload(1);
}, 5000); 
```

上面的代码在 5 秒内重新加载当前页面。

或者

您也可以进行异步的 ajax 调用，而且您不必刷新整个页面。签出以下代码：

```
$.ajax({
  url: "test.aspx",
  context: document.body
}).done(function() {
  $(this).addClass("done");
}); 
```

这可以用来代替 `window.location.reload(1);`

[**test.html:**此页面必须在加载时将所有图像 src 引入其中，即，将图像引入页面的服务。]

执行此操作后，您将获得可以分配给当前页面中的 html 元素的`data`结果。`done(function()`例子：

```
done(function() {
$('#ImageId').attr('src', data);
 }); 
```

这会将 img 标签的 src 设置为`data`来自 test.aspx

**优点：**不刷新整个页面，只添加新图像。

浏览此[链接](http://api.jquery.com/jQuery.ajax/)以了解有关 jQuery Ajax 的更多信息...

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-14T09:28:24.670

采用。

```
document.location.reload(); 
```

例如对按钮单击做出反应：

```
<input type="button" value="Reload Page" onClick="window.location.reload()"> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T13:41:56.700

如果您的浏览器支持 websocket，您需要实现与服务器的客户端长轮询连接，即所谓的 COMET 或使用套接字。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T23:54:47.637

在 javascript 中，有几种以编程方式刷新的方法。

首选方法是`location.reload()`

另一种方法是通过设置`location.href`属性，浏览器自动转到新的 url，所以`location=location`或者`location.href=location.href`也会这样做。

虽然第二种方法可能看起来很奇怪。

回顾一下，那就是：

```
location.reload();
//or
location.href=location.href;
//or
location=location; 
```

* * *

我希望这会有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-16T16:33:35.910

最简单的是使用 AJAX 池。
为此，在处理上传的 php 文件中，当上传新照片时，在文件中保存一个 unix 时间戳：

```
file_put_contents('lastupload.txt', strval(time())); // Save timestamp of upload 
```

创建另一个 php 文件（例如：polling.php）来处理 AJAX 调用并返回上次上传的 unix 时间戳：

```
echo file_get_contents('lastupload.txt'); // Send last upload timestamp 
```

在 Viewer javascript 代码中进行 AJAX 轮询，它将检测时间戳的变化并在需要时刷新图像：

```
$(function() {
   setInterval(polling, 1000); // Call polling every second.
});
var lastupload = 0;
function polling() {
   $.ajax({
      url: 'polling.php',
      success: function(timestamp){
          if (timestamp > lastupload) { // Is timestamp newer?
              document.images['image'].src = 'image.png?' + timestamp; // Refresh image
              lastupload = timestamp;
          }
      }
   });
} 
```

我还没有测试过代码，所以可能会有错误，但这是我的想法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-16T17:39:11.607

我认为您不需要为此编写大量脚本。我解决了这个问题，只是在图片网址之后添加了一个问号和随机数。如果您不更改图像 url，浏览器会从缓存中调用它。

要在页面上显示最新图片：

```
<img src="<?php echo $image_url; ?>?<?php echo rand(10,99); ?>"/> 
```

它打印如下内容：

```
http://static.example.com/myimage.jpg?56 
```

您的问题和我的解决方案是通过在我的问题中使用 Jquery 和 javascript 随机数函数将其更改为随机数来刷新图像 url。我认为您明白了这一点，并会根据您的需要对其进行调整。

```
$('#crop_image').live('click',function(){
    $(this).html(ajax_load_fb);
    var x = $('#x').val();
    var y = $('#y').val();
    var w = $('#w').val();
    var h = $('#h').val();
    var dataString = 'process=image_crop&x='+x+'&y='+y+'&w='+w+'&h='+h;
    $.ajax({
        type: 'POST',
        url: '<?php echo $siteMain;?>ajax/ajaxupload.php',
        data: dataString,
        cache: false,
        success: function(msg) {
            $('#crop_image').html('Crop Selection');
            $('.crop_success_msg').slideDown('slow');
            var numRand = Math.floor(Math.random()*101);
            $('#current_img').html('<img src="/images/large_<?php echo $user['username'];?>.jpg?'+numRand+'"/>');
        },
        error: function(response, status, error)
        { 
            $(this).html('Try Again');
        }
    });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-19T04:08:23.127

最好的解决方案是在查看器 Web 浏览器上编写一个小的 php 脚本来定期检查图像，如果图像发生更改，它将重新加载它。由于 php 代码在服务器端运行，因此您可以轻松完成。如果您需要代码片段让我知道，我希望这会有所帮助。

# c# - 使用 CurrentAppSimulator 进行应用内购买开发测试

> ID：13376049
> 
> 赞同：4
> 
> 时间：2012-11-14T09:24:19.593
> 
> 标签：c#, microsoft-metro, windows-runtime

我已经使用 CurrentAppSimulator 设置了应用内购买，并设置了获得应用内购买的功能。我还（可能）配置了我的 WindowsStoreProxy.xml 文件来处理这个问题。

但是，当我购买插件并为其指定`S_OK`返回值时，它仍然显示 IAP 处于非活动状态。我可以激活它的唯一方法是手动编辑 WindowsStoreProxy.xml 文件并将 Active 属性设置为 Active。这似乎很奇怪，因为 Microsoft 的 Store 示例运行良好。不过，我看不出他们有什么不同——他们仍然使用这种`CurrentAppSimulator.RequestProductPurchaseAsync()`方法。我在哪里错了……？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T13:01:09.407

首先，我使用我自己的类 CurrentAppProxy，它在调试模式下使用 CurrentAppSimulator，在发布模式下使用 CurrentApp。然后我使用此代码购买 InApp 购买，它工作得很好：

```
try
{
    await CurrentAppProxy.RequestProductPurchaseAsync(PremiumName, false);

    // after closing the inApp purchase dialog, test, if it was bought
    if (licenseInformation.ProductLicenses[PremiumName].IsActive)
    {
        // set the local flag
        IsPremium = true;

        dialog = new MessageDialog(resourceLoader.GetString("ThanksForPremium"));
        await dialog.ShowAsync();
    }
    // else do not show anything
}
catch (Exception)
{
    // failed buying the premium
    dialog = new MessageDialog(resourceLoader.GetString("ErrorBuyingPremium"));
    dialog.ShowAsync();
} 
```

编辑：在访问这些属性之前，我使用以下命令在调试模式下初始化 CurrentAppSimulator：

```
StorageFolder proxyDataFolder = await Package.Current.InstalledLocation.GetFolderAsync("Assets");
StorageFile proxyFile = await proxyDataFolder.GetFileAsync("test-purchase.xml");
await CurrentAppSimulator.ReloadSimulatorAsync(proxyFile); 
```

在 test-purchase.xml 的底部，我得到了：

```
<LicenseInformation>
    <App>
        <IsActive>true</IsActive>
        <IsTrial>false</IsTrial>
    </App>
    <Product ProductId="premium">
        <IsActive>false</IsActive>
    </Product>
</LicenseInformation> 
```

# sql - RadTreeView cannot refresh to show changes in hierarchical data source

> ID：13376055
> 
> 赞同：1
> 
> 时间：2012-11-14T09:24:27.723
> 
> 标签：sql, data-binding, telerik, treeview, radtreeview

I have a rather serious problem trying to get a Telerik radTreeView to show changes in the underlying database and therefore datasource. My scenario is as follows.

1.  In the Load event hander, the radTreeView is initialized as in the following example code:

    ```
     radCommentTreeView1.DataSource = Nothing

            // Initialize custom data object from custom hierarchical data source class
            cdsPubCommentDataSource = New CommentDataSource(1)
            radCommentTreeView1.DataSource = cdsPubCommentDataSource

            // Configure radTreeView from datasource fields
            radCommentTreeView1.DataFieldID = "ID"
            radCommentTreeView1.DataFieldParentID = "ParentID"
            radCommentTreeView1.DataTextField = "Content"

            // Bind radTreeView to datasource
            radCommentTreeView1.DataBind() 
    ```

2.  The page loads with radTreeView rendered correctly

3.  User attempts to add or delete a node by clicking a button with a server-side handler ....

4.  ... so that the postback cycle begins in the server-side code, with the Load handler from (2) above running again, to rebind the radTreeView

5.  ... only after which the server-side button handler is run, successfully running an SQL command through another BLL business object (i.e., the SQL database is successfully modified ) ....

6.  However, when the page renders after the postback, the radTreeView still reflects the original node hierarchy from (4) above, before the node was deleted in (5).

Could someone indicate how this process ought to be achieved within the cycle of a single postback - if I call DataBind on the radTreeView at the end of the server-side button handler, this does seem to pick up the database changes, but unfortunately it destroys the radTreeView's formatting with the node template, and as a result, no node databound content is rendered in any of the nodes. Obviously, the node template needs to be instantiated at the start of the page life-cycle, and if, as in this case, databinding late in the cycle disrupts the template, I cannot tell the page to 'go back' and instantiate the template again. But calling DataBind at the end of the handler would seem to me to be the intuitively correct way to approach the issue, it's just that the resulting loss of the node template prevents it from working.

I am aware of the idea of using the INotifyPropertyChanged interface for the datasource object, and already have the event in question being successfully fired up from the DataSource object, namely a PropertyChanged event that is fired at (4) when the radTreeView first rebinds on the postback, but I am not sure how a PropertyChanged event handler can help in the scenario I describe - the PropertyChanged event handler in the page is still invoked before the button handler, and so the database has not been changed at that stage. Is the PropertyChanged event the correct way forward, or is there another approach better suited for refreshing the radTreeView within a single postback cycle?

Thanks if someone can point me in the right direction with this problem.

Regards

# elasticsearch - Elasticsearch query against multiple types

> ID：13376059
> 
> 赞同：1
> 
> 时间：2012-11-14T09:24:39.223
> 
> 标签：elasticsearch

I have two types stored in ES:

*   Photos (fields: photo-id, description, createDateAsLong)
*   VisitHistory (username, photo-id - with 30days TTL)

Is it possible to query ES for records of type Photos which photo-id doesn't exists in VisitHistory (for some username value). I mean a query which is equivalent of sql query like this:

SELECT * FROM Photos WHERE photo-id NOT IN (SELECT photo-id FROM VisitHistory WHERE username = 'somefoousername');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:40:02.967

如果您将 Photos 设为父文档并将 VisitHistory 设为 Photos 的[子](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html)文档，您应该能够使用组合[`not`](http://www.elasticsearch.org/guide/reference/query-dsl/not-filter.html)和[`has_child`](http://www.elasticsearch.org/guide/reference/query-dsl/has-child-filter.html)过滤器来构建此类请求。

# python - python，mysql，将字符串插入表中，错误1054

> ID：13376065
> 
> 赞同：1
> 
> 时间：2012-11-14T09:25:01.403
> 
> 标签：python, mysql, string, insert, mysql-error-1054

我有问题 OperationalError: (1054, "Unknown column 'Ellie' in 'field list'") 使用下面的代码，我正在尝试将数据从 json 插入到我的 sql 数据库中。每当我尝试在这种情况下插入字符串“Ellie”时都会出现问题，我认为这与字符串插值有关，但尽管尝试了我在这里看到的其他一些解决方案，但我无法让它工作。

创建表

```
con = MySQLdb.connect('localhost','root','','tweetsdb01')
cursor = con.cursor()
cursor.execute("CREATE TABLE IF NOT EXISTS User(user_id BIGINT NOT NULL PRIMARY KEY, username varchar(25) NOT NULL,user varchar(25) NOT NULL) CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB")
con.commit() 
```

插入

```
def populate_user(a,b,c):
    con = MySQLdb.connect('localhost','root','','tweetsdb01')
    cursor = con.cursor()
    cursor.execute("INSERT INTO User(user_id,username,user) VALUES(%s,%s,%s)"%(a,b,c))
    con.commit() 
    cursor.close() 
```

READ FILE - 这会调用上面的填充方法

```
def read(file):
    json_data=open(file)
    tweets = []
    for i in range(10):
        tweet = json.loads(json_data.readline())

    populate_user(tweet['from_user_id'],tweet['from_user_name'],tweet['from_user']) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:30:42.743

[使用参数化 SQL](http://www.python.org/dev/peps/pep-0249/#id15)：

```
cursor.execute("INSERT INTO User(user_id,username,user) VALUES (%s,%s,%s)", (a,b,c)) 
```

（请注意，这些值作为第二个参数`(a,b,c)`传递给函数`execute`，而不是通过字符串插值作为第一个参数的一部分）。MySQLdb 将为您正确引用参数。

* * *

PS。正如 Vajk Hermecz 指出的那样，出现问题是因为`'Ellie'`没有正确引用字符串。

`"(%s,)" % (a,)`当你用你 做字符串插值时，`(Ellie,)`你真正想要的是`('Ellie',)`. 但是不要费心自己引用。使用参数化 SQL 更安全、更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T09:29:23.743

您的问题是您正在将值添加到查询中而没有任何转义......现在它被打破了。您可以执行以下操作：

```
cursor.execute("INSERT INTO User(user_id,username,user) VALUES(\"%s\",\"%s\",\"%s\")"%(a,b,c)) 
```

但这只会将 SQL INJECTION 引入您的代码中。

切勿使用连接查询和数据构造 SQL 语句。您的参数化查询...

这里的正确解决方案是：

```
cursor.execute("INSERT INTO User(user_id,username,user) VALUES(%s,%s,%s)", (a,b,c)) 
```

因此，您的代码的问题在于您使用了`%`执行字符串格式化的运算符，最后您只给了一个参数`cursor.execute`。现在正确的解决方案是，不是自己进行字符串格式化，而是在第一个参数中提供查询部分`cursor.execute`，并在第二个参数中为元组提供参数。

# wcf - WCF 服务与 MVC WebAPI 的性能问题

> ID：13376081
> 
> 赞同：9
> 
> 时间：2012-11-14T09:25:54.207
> 
> 标签：wcf, web-services, rest, asp.net-mvc-4, asp.net-web-api

我计划构建一个 Web 服务，用于通过 HTTP 向客户端提供 JSON/XML 数据。我打算让它成为 RESTful，但这只是一个最好的选择，而不是必须的。通常，我会将它托管在 IIS 中。

为此，根据我的分析，我有 3 个选项（我需要使用 MS 技术）：WCF 服务、WCF 数据服务和 MVC4 WebAPI。在做出最终决定之前，我还有一个问题。是的，有很多关于网络谈话何时选择其中之一的讨论，但他们专注于其他主题，如协议、易于实现、利用 HTTP 等。

但是，我的重点是另一方面：从性能方面来看，3 个选项（通过 HTTP 提供 JSON/XML）中最好的一个（假设我正确使用它们）是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T09:38:05.033

坦率地说，您的问题没有明确的答案，这完全取决于您期望（或想要服务）什么样的流量，您的 REST api 将具有什么样的功能（这也会影响性能）等等。

Rick Stahl 已经为此创建了一篇不错的博文。[http://www.west-wind.com/weblog/posts/2012/Sep/04/ASPNET-Frameworks-and-Raw-Throughput-Performance](http://www.west-wind.com/weblog/posts/2012/Sep/04/ASPNET-Frameworks-and-Raw-Throughput-Performance)

它不是您问题的最终答案（即什么是最好的）。但它应该给你一些更好的视角，并希望有一个更好的位置来回答你的问题。

# visual-studio-2012 - 在 CodedUI 测试中更改 URL

> ID：13376084
> 
> 赞同：4
> 
> 时间：2012-11-14T09:26:37.313
> 
> 标签：visual-studio-2012, coded-ui-tests

我在 Visual Studio 2012 中创建了一个 codedui 测试。问题是我需要能够更改偶尔在浏览器中打开的 URL，因为项目的每个步骤都更新到新版本。除了似乎有许多 URL 出现的实例之外，当我更改它时，它似乎在重建后会自行重置。

有没有更简单的方法来确保我设置的 URL 不会改变？我对测试套件相当陌生，所以我可能错过了一些明显的东西。

我已经寻找了一些关于 VS2012 测试的不错的教程，但是如果有人可以推荐一个我可能错过的教程，那也会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:57:04.737

您可以使用 Visual Studio Feature Pack 2 中的编码 UI 测试编辑器来直观地更新参数，而无需任何编码。

有关获取扩展的教程和信息，请参阅以下博客文章：[http ://windotnet.blogspot.com/#!/2011/07/coded-ui-test-editor-is-visual-studio.html](http://windotnet.blogspot.com/#!/2011/07/coded-ui-test-editor-is-visual-studio.html)

-保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:15:44.353

您可以尝试数据驱动编码的 UI。 [http://msdn.microsoft.com/en-us/library/ee624082.aspx](http://msdn.microsoft.com/en-us/library/ee624082.aspx) 您可以将各种 url 作为参数传递给编码的 UI。

# mongodb - 删除 MongoDB 中的子数据

> ID：13376086
> 
> 赞同：0
> 
> 时间：2012-11-14T09:26:48.230
> 
> 标签：mongodb, database

我有这样的文档结构：

```
{
    "_id" : ObjectId("5087b582da50fc570073e094"),
    "grade" : "A",
    "distance" : "470",
    "items" : [
        {
            "history" : [                   
                ...
            ],
            "same" : [
                {
                    "split" : " 1.48",
                    "time" : " 28.56",
                },
                {
                    "split" : " 4.48",
                    "time" : " 28.56",
                },
                ...
            ],
            "name" : "Bill"
        },
        {
            "history" : [                   
                ...
            ],
            "same" : [
                {
                    "split" : " 2.48",
                    "time" : " 28.26",
                },
                {
                    "split" : " 4.49",
                    "time" : " 28.57",
                },
                ...
            ],
            "name" : "Joe"
        },
        {
            ...

        }

    ]
} 
```

我想从`same`数组中删除拆分值 < 4 的所有项目。这应该`same`从 Bill 和 Joe 中删除数组中的第一个条目。这只是一个示例文档，有很多相同的。

在我的脑海中，这就是我需要做的：

1.  遍历所有文件，
2.  检查数组的任何`split`值是否<4`same`
3.  删除这些（也许使用`update`和`$pull`？）

谁能帮我实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:20:26.707

首先，我建议您将拆分和时间存储为数字，而不是字符串，因为与它进行比较不好。

使用当前的数据结构，您必须使用您喜欢的任何语言在程序中编写脚本。假设这是你需要做的一次性的事情，你写的很好。我认为不可能通过对文档的原子更新来做到这一点，因此，您必须在脚本/程序中进行所有数据整理。

如果这是一项非常常见的任务，而不是一次性的事情，那么我建议您将数据重组为以下内容：

```
{
    "_id" : ObjectId("5087b582da50fc570073e094"),
    "grade" : "A",
    "distance" : "470",
    "history" : [
        ...
    ],
    "same" : [
        {
            "split" : " 1.48",
            "time" : " 28.56",
        },
        {
            "split" : " 4.48",
            "time" : " 28.56",
        },
        ...
    ],
    "name" : "Bill"
},
{
    "_id" : ObjectId("5087b582da50fc570073e095"),
    "grade" : "A",
    "distance" : "470",
    "history" : [
        ...
    ],
    "same" : [
        {
            "split" : " 2.48",
            "time" : " 28.26",
        },
        {
            "split" : " 4.49",
            "time" : " 28.57",
        },
        ...
    ],
    "name" : "Joe"
}, 
```

这样，您可以在找到每个元素（PHP 中的代码）后通过拉动轻松删除所有这些时间：

```
$m = new Mongo();
$c = $m->dbname->collectionname;

foreach ( $c->find() as $r )
{
    foreach ( $r['same'] as $times )
    {
        if ($times['split'] < 4 )
        {
            $c->update(
                array( '_id' => $r['_id'] ),
                array( '$pull' => array( 'same' => $times ) ),
            )
        }
    }
} 
```

# java - 如何使用 javax.script 创建和使用字节数组

> ID：13376092
> 
> 赞同：3
> 
> 时间：2012-11-14T09:27:18.447
> 
> 标签：java, javax.script

我们可以使用 javax.script 创建原始数组，如字节数组或 int 数组吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-10T17:17:40.050

在 Mozilla 的 Rhino 中创建一个 10 字节的 Java 数组：

```
var buff = java.lang.reflect.Array.newInstance(java.lang.Byte.TYPE, 10) 
```

请注意，java 数组与原生 JavScript 数组的类型不同——它们都可以在 Rhino JavaScript 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T02:51:37.530

如果您使用的`JavaScript`是包的引擎，请使用

```
var array = new Array();
array[0] = 1; 
```

我建议通读

[`Java Docs`](http://docs.oracle.com/javase/7/docs/api/javax/script/package-summary.html) [`Java6Master`](https://docs.google.com/viewer?a=v&q=cache%3aQz6rmi2HM04J%3abooks.brainysoftware.com/java6_sample/chapter3.pdf%20javax.script%20package&hl=en&gl=in&pid=bl&srcid=ADGEESh0Mk7iv9TITh3u3BTEfFLZrjC25CSJkZysit_juU_2eevLbEWpOfLiqZ1l9TucKAKV-n9pmRpp4npqYMT71dNi6nlIFG5JLQweXJbfjyG9xy95lllh8kBSbQwomE_PU5IFo98I&sig=AHIEtbSGeOyqkejp1OzMK5sD4jzMGFyAYQ) [`Java Scripting Programmer's Guide`](http://docs.oracle.com/javase/7/docs/technotes/guides/scripting/programmer_guide/index.html)

# jquery - 使用 jQuery 禁用/启用复选框

> ID：13376093
> 
> 赞同：0
> 
> 时间：2012-11-14T09:27:21.240
> 
> 标签：jquery, button, checkbox, struts, radio

我无法使我的代码正常工作。我有两个单选按钮：“任何地方”“某处”和两个复选框“作者”“参考”如果选择任何地方，则禁用两个复选框 如果选择某处，则启用两个复选框。

```
<s:radio id="search_Anywhere" name="emplacement" list="getAnywhere()"/>
<s:radio id="search_Somewhere" name="emplacement" list="getEmplacementNonPartout()"/>
<s:checkbox cssClass="list_check" name="emplacementAuthor" disabled="true" value="true"/>Author
<s:checkbox cssClass="list_check" name="emplacementreference" disabled="true" value="true"/>reference 
```

我已将 Jquery 修改为：

```
$("input[name='emplacement']").click(function() {
        if ($('#search_Anywhere').is (":checked" )) {
            $(".list_check").attr( "disabled" , true );
            $(".list_check").removeAttr('checked');
            } else if ($('#search_Somewhere').is (":checked" )){
                $(".list_check").removeAttr ("disabled");
                $(".list_check").attr('checked','true');
             }
            }); 
```

但是，只有“某处”按钮有效，当我单击它时，它会启用复选框。按钮“任何地方都不起作用，这使得无法禁用启用的复选框。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:31:08.047

尝试使用 disabled 而不是 true`$(".list_check").attr("disabled", "disabled");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:31:18.960

尝试这个

```
$("input[name='emplacement']").click(function() {
        if ($('#search_Anywhere').is (":checked" )) {
            $(".list_check").attr( "disabled" , "disabled");
            $(".list_check").removeAttr('checked');
            } else if ($('#search_Somewhere').is (":checked" )){
                $(".list_check").removeAttr ("disabled");
                $(".list_check").attr('checked','checked');
             }
            }); 
```

# javascript - 乘法收音机和选择功能在 Safari 中不起作用

> ID：13376094
> 
> 赞同：0
> 
> 时间：2012-11-14T09:27:23.423
> 
> 标签：javascript, jquery, safari

由于某种原因，这段代码在 Safari 中不起作用，有人知道为什么吗？第一个单选框很好，但是一旦我检查了第二个单选框，它就不会计算。[http://jsfiddle.net/njyEP/](http://jsfiddle.net/njyEP/)

谢谢

Javascript：

```
$("input[type=radio][name=radio],select").change(function() {

var radio = parseFloat($('#radio:checked').attr("tvalue")); 
var select = parseFloat($('#select').val());

$('#Total').text((select * radio)); 

}); 
```

html

```
<form method="post" action="">
<select name="select" id="select" name="select"><option value="1">1</option><option     value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option>
</select>

<div id="radioButtons"><input type="radio" class="multi" name="radio" id="radio" ivalue="1" tvalue="275" value="1185">Earlybird 1 Day Registration  $275<br>
<input type="radio" class="multi" name="radio" id="radio" ivalue="2" tvalue="475" value="1186">Earlybird 2 Day Registration  $475<br>
<input type="radio" class="multi" name="radio" id="radio" ivalue="3" tvalue="625" value="1187">Earlybird 3 Day Registration (all three days)  $625<br>
</div><div id="checkBoxes">

<br><label id="Total"></label><br></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:30:33.137

您的主要问题是页面上的每个 id 属性只能出现一次。为多个元素提供相同的 id 属性在语义上是非法的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:37:37.237

您不应该定义具有相同 id 的多个元素。要使您的示例在 Safari 中运行，请将您的第二个 javascript 行更改为

```
var radio = parseFloat($('input[type=radio]:checked').attr("tvalue")); 
```

[http://jsfiddle.net/2TCGp/](http://jsfiddle.net/2TCGp/)

（或者，如果您遵循 devnull69 的建议并使用 data-tvalue，您可以使用 jQuery 的 .data() 方法）。

# sql - 为 Symfony2 正确加入 Doctrine2

> ID：13376100
> 
> 赞同：6
> 
> 时间：2012-11-14T09:27:57.137
> 
> 标签：sql, symfony, doctrine-orm

我有以下工作 MySQL 查询：

```
SELECT *
FROM bogenantworten a
    RIGHT JOIN
        bogenfragen f ON f.id = a.bogenfragen_id
        AND a.personen_id = 3,
    BogenTyp t, 
    BogenFragenGruppe g
WHERE
    t.id = f.fragentyp_id AND
    g.id = f.fragengruppen_id AND
    t.id = 1
ORDER BY f.sortierung ASC 
```

现在我在 Doctrine2 DQL 或 QueryBuilder 中需要它。我已经了解到 D2 迫使我思考对象，但我找不到任何建议如何标记我的实体以使其工作。

所以我想让上面的 MySQL 查询在我的 Symfony2 应用程序中工作，或者帮助如何正确注释我的实体，所以我在 BogenAnworten 和 BogenFragen 之间有一个工作正确的连接连接（3 和 1 是参数，所以你知道）。我已经为我的所有实体设置了 OneToMany 和 ManyToOne 注释，但是我需要一些东西来使右/左连接工作。

如果您想帮助我进行实体设计：

我有回答（表 BogenAnworten）问题（表 BogenFragen）的人（表 Person），当我显示问题列表时，我要么得到该问题的最后一个答案（保存时需要 UPDATE），要么没有，我必须创建它（保存时插入）。问题也属于许多类型之一（表 BogenTyp），并且属于许多组之一（表 BogenFragenGruppe）

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:22:17.903

好的，我自己又发现了。Doctrine2 的 QueryBuilder 支持 leftJoin（如果切换两个表，它与 RIGHT JOIN 相同）。对于那些需要一些代码的人，这里是上面使用 QueryBuilder 构建的 SQL 语句：

```
$query = $em->createQueryBuilder()
    ->select(array('f.id', 'f.frage', 'f.sortierung', 'a.antwort', 'g.name'))
    ->from('MySuperBundle:BogenFragen', 'f')
    ->leftJoin('f.bogenantworten', 'a', 'WITH', 'a.personen = :pid')
    ->from('MySuperBundle:BogenTyp', 't')
    ->from('MySuperBundle:BogenFragenGruppe', 'g')
    ->where('t.id = :tid')
    ->andWhere('t.id = f.bogentypen')
    ->andWhere('g.id = f.bogenfragengruppe')
    ->orderBy('f.sortierung', 'ASC')
    ->setParameter('tid', 1)
    ->setParameter('pid', 3)
    ->getQuery(); 
```

（参数实际上是动态的，但为了便于阅读，我使用了原始 SQL 语句的数字）

# javascript - IE8，在排序元素后运行 jQuery.sub 时发生堆栈溢出

> ID：13376107
> 
> 赞同：0
> 
> 时间：2012-11-14T09:28:14.527
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer-8

IE8，在排序元素后运行 jQuery.sub 时会发生堆栈溢出。

这是IE8的bug吗？

Javascript：

```
jQuery('.wrapper').sortable({
    placeholder: "ui-state-highlight",
    axis: "y",
    opacity: 0.5
});

jQuery('.wrapper').bind('sortupdate', function() {
    $('#result').text('finish');
    var foo = jQuery.sub();
}); 
```

HTML：

```
<div class="wrapper">
<div id="box1" class="box"></div>
<div id="box2" class="box"></div>
<div id="box3" class="box"></div>
<div id="box4" class="box"></div>
</div>
<div id="result"></div> 
```

[http://jsfiddle.net/a6KCr/](http://jsfiddle.net/a6KCr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:40:46.717

问题在于`jQuery.sub`您重复调用的方法（在每次触发`sortupdate`事件时）。这似乎毫无意义，尤其是因为您没有对生成的 jQuery 实例做任何事情。

删除它可以解决问题：http: [//jsfiddle.net/a6KCr/4/](http://jsfiddle.net/a6KCr/4/)

# gwt - CellTable 页脚中的 ButtonCell 仅适用于第一列

> ID：13376110
> 
> 赞同：0
> 
> 时间：2012-11-14T09:28:30.643
> 
> 标签：gwt, button, celltable

我有一个带有自定义按钮的单元格表作为其中一列的页脚，效果很好。但是当我尝试将按钮移动到另一列时，按钮的 clickevent (valueupdater) 不再起作用。我只是将按钮作为页脚添加到另一列中，功能没有任何更改！这是它的完成方式：

```
public class TestCellTable extends CellTable<Object> {
    ...
    public TestCellTable() {
        ...
        addFirstColumn();
        addSecondColumn();
        addThirdColumn();
        ...
   }

  public static abstract class FooterButton extends Header<String> {    
    public ButtonFooter(ValueUpdater<String> value) {
        super(new ButtonCell());
        this.setUpdater(value);
    }
}

   private Header<String> initButton() {
     ValueUpdater<String> updater = new ValueUpdater<String>() {
        @Override
        public void update(String value) {
            Window.alert("TEST");           
        }
    };

    Header<String> footer = new FooterButton(updater) { 
          @Override
          public String getValue() {
             return "TEST";
          }
    };
    return footer;
}

   public void addFirstColumn() {
        ...
        addColumn(COLUMN, HEADER, initButton());
   }

   public void addSecondColumn() {
       ...
       addColumn(COLUMN, HEADER);
   }

   public void addThirdColumn() {
       ...
       addColumn(COLUMN, HEADER);
   }
} 
```

我只想将按钮从第一列移动到发送列，但是当我单击按钮时没有任何反应？

# iphone - 在 iPhone 的 UIPickerView 中将 UITextField 的文本设置为默认值。？

> ID：13376116
> 
> 赞同：1
> 
> 时间：2012-11-14T09:29:01.587
> 
> 标签：iphone, ios, xcode, uipickerview

我在视图加载时在 textField 中有一些文本。我希望将特定文本设置为 UIPickerView 的默认值。textField 中的值是 UIPickerView 的值之一。我怎样才能使它成为可能。对于我的代码现在写总是第一个值被选为 UIPickerView 中的默认值。但我希望将 textField 的文本设置为 PickerView 中的默认值。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
{ 

    txtstate.text= [[arr objectAtIndex:row] valueForKey:@"Code"]; 
} 
```

我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:39:28.683

```
uint selectedRow = [pickerView selectedRowInComponent:0];
NSString *title = [[pickerView delegate] pickerView:myPickerView titleForRow:selectedRow inComponent:0]; 
```

如果您有多个组件，请进行相应调整。

# c++ - 导航到 OnNavigatedTo 的另一个页面？

> ID：13376122
> 
> 赞同：2
> 
> 时间：2012-11-14T09:29:38.800
> 
> 标签：c++, events, microsoft-metro, winrt-xaml, c++-cx

为什么在本页的[OnNavigatedTo](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.onnavigatedto)事件中调用[Navigate方法不起作用？](http://msdn.microsoft.com/en-us/library/windows/apps/hh702396)

这种行为对你来说可以重现吗？

任何想法如何避免这个问题？

```
void LockScreenPage::OnNavigatedTo(Windows::UI::Xaml::Navigation::NavigationEventArgs^ e)
{
    //if user has no PIN protection
    this->Frame->Navigate(Windows::UI::Xaml::Interop::TypeName(AnotherPage::typeid));

    //else verify PIN
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T12:01:03.180

为了获得正确的行为，我现在使用调度程序：

```
 this->Dispatcher->RunAsync(Windows::UI::Core::CoreDispatcherPriority::Normal, ref new Windows::UI::Core::DispatchedHandler([this] () {
        this->Frame->Navigate(Windows::UI::Xaml::Interop::TypeName(AnotherPage::typeid));
    })); 
```

# sql - 格式化 SQL 查询返回 col

> ID：13376124
> 
> 赞同：1
> 
> 时间：2012-11-14T09:29:42.667
> 
> 标签：sql, sql-server

我的 Select 语句中有一个 col ProductName，它有一个带有附加字符串“-Sales”的字符串，例如 peter -Sales。现在我希望我的结果删除 -Sales 并显示彼得。我该怎么做。我只是粘贴我的查询的选择部分，因为我的查询有很多内部连接

```
SELECT
dbo.Customer.firstName+' '+dbo.Customer.lastName        AS FirstName,
 CONVERT(VARCHAR(10), dbo.Receipt.receiptDate,105)       AS SaleDate,
dbo.Receipt.transactionNumber AS TransactionNumber,
dbo.Receipt.description        AS ProductName, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:31:23.990

您可以使用`REPLACE`

```
SELECT REPLACE(dbo.Customer.firstName+' '+dbo.Customer.lastName, '-Sales',''),...
FROM... 
```

*   [T-SQL 替换](http://msdn.microsoft.com/en-us/library/ms186862.aspx)
*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/5544a/2)

# osgi - 需要为 Apache karaf 2.2.8 工作的 Apache POI 3.8 osgi 包

> ID：13376129
> 
> 赞同：2
> 
> 时间：2012-11-14T09:30:21.950
> 
> 标签：osgi, apache-poi, apache-karaf, osgi-bundle

我正在使用 Karaf 2.2.8 ，在我的代码中我正在使用 apache poi 阅读和 excel 文件

```
try{

Workbook wb=WorkbookFactory.create(inp);

} 
```

该应用程序使用 poi-ooxml-3.8.jar 在 tomcat 6 和 tomcat 7 中运行良好

在卡拉夫 2.2.8 中：-

***当使用 servicemix 捆绑包时给了我

```
ClassNotFoundException: org.apache.poi.ss.usermodel.WorkbookFactory not found by org.apache.servicemix.bundles.poi 
```

***使用 apache poi 时

```
Unable to resolve 266.0: missing requirement [266.0] package; (package=org.apache.poi)) 
```

用于安装 servicemix poi 的命令：-

```
install -s mvn:avalon-framework/avalon-framework/4.1.3;
install -s mvn:junit/junit/3.8.2;
install -s mvn:commons-codec/commons-codec/1.5;
install -s mvn:commons-logging/commons-logging/1.1;
install -s mvn:javax.servlet/servlet-api/2.3;
install -s mvn:log4j/log4j/1.2.13;
install -s mvn:logkit/LogKit/1.2;
install -s mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.poi/3.8_1; 
```

用于安装 apache poi 的命令：-

```
install -s mvn:org.apache.poi/poi-ooxml/3.8;
install -s mvn:org.apache.poi/poi-ooxml-schemas/3.8;
install -s mvn:org.apache.poi/poi/3.8;
install -s mvn:commons-codec/commons-codec/1.5;
install -s mvn:dom4j/dom4j/1.6.1;
install -s mvn:stax/stax-api/1.0.1;
install -s mvn:org.apache.xmlbeans/xmlbeans/2.3.0; 
```

请有任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:17:24.117

我想到了。我不必将 apache poi 作为 osgi 包。我将它添加到 karaf 内的“Lib”目录并导出

所需的软件包如下：-

```
karaf.home/etc/custom.properties 
karaf.systemBundlesStartLevel=50 
... 
com.sun.jndi.ldap; \ 
oracle.jdbc; \ 
org.apache.poi.ss.usermodel; \ 
org.apache.poi; 
```

现在它工作得很好

# java - 正确解释技术术语

> ID：13376130
> 
> 赞同：0
> 
> 时间：2012-11-14T09:30:31.403
> 
> 标签：java

如果您愿意，这基本上不是编码问题，而是技术更正。我不能在英语论坛上问这个问题，因为他们不会理解所有的技术术语。

所以这是我的代码。

```
1\. public class ExamQ1a
2\. {
3\. public static void main(String[] args)
4\. {
5\. int x = 27;
6\. int y = 5;
7\. double z = x / y
8\. System.out.println(x = x, y = y, z = z);
9\. }
10\. } 
```

这是我被问到的问题

> (i) 当程序在 BlueJ 中编译时，显示以下错误信息：';' 预期的，第 7 行的语句被突出显示。解释问题是什么以及如何解决它。

这是我给的答案

> i）问题是没有指示语句的结尾，因此编译器不会将语句 double z = x /y 视为语句的结尾，然后假设以下句子是语句的继续。事实上并非如此。对这个错误的修复将是 double z = x/y;

所以想知道我是否正确使用了技术术语，tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:22:30.417

答案是合理的，当然不是事实错误。有一个小的技术错误，因为 Java 没有“句子”。

但是，在理想的答案中，您可能会更准确地解释为什么编译器将其诊断为语法错误，特别是缺少分号。

解析器看到以下符号序列：

```
double z = x / y System . out . println 
```

它将前两个符号解析为声明符，并将“=”解析为初始化程序的开始。然后它尝试解析一个表达式。一切都很好，直到它看到'y'，然后是'System'。基本上，您不能在表达式中间连续有两个标识符。此时合法的符号是中缀运算符符号、'('、'[' 或'.'。任何其他都是语法错误。

编译器编写者已经调用，如果编译器在解析的这一点看到一个意外的标识符符号，*最可能*的解释是程序员在语句的末尾省略了分号。在这种情况下，诊断是正确的 - 问题是缺少分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:33:14.727

对我来说看起来不错，只是我会使用这些词`following line`而不是`following sentence`

# java - 备份mysql数据库java代码

> ID：13376132
> 
> 赞同：4
> 
> 时间：2012-11-14T09:30:32.243
> 
> 标签：java, mysql, database, database-backups

我尝试运行以下代码来创建**数据库的备份，**但它显示了一些运行时错误。

但是，我尝试**在 mysql shell中运行****System.out.println() 输出**部分（我在给定的代码中对此进行了注释）并且它有效。

 **它显示io文件问题。请有人帮助我。

```
package files;

 public class tableBackup_1 {

public boolean tbBackup(String dbName,String dbUserName, String dbPassword, String path) {

    String executeCmd = "mysqldump -u " + dbUserName + " -p" + dbPassword + " --add-drop-database -B " + dbName + " -r " + path;
    Process runtimeProcess;
        try
        {
            System.out.println(executeCmd);//this out put works in mysql shell
            runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

                if (processComplete == 0)
                {
                    System.out.println("Backup created successfully");
                    return true;
                }
                else
                {
                    System.out.println("Could not create the backup");
                }
        } catch (Exception ex)
        {
            ex.printStackTrace();
        }
return false;
}

public static void main(String[] args){

        tableBackup_1 bb = new tableBackup_1();
        bb.tbBackup("test","harin","1234","C:/Users/Master/Downloads/123.sql");

}
} 
```

```
 mysqldump -u harin -p1234 --add-drop-database -B test -r C:/Users/Master/Downloads/123.sql
java.io.IOException: Cannot run program "mysqldump": CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
        at java.lang.Runtime.exec(Runtime.java:593)
        at java.lang.Runtime.exec(Runtime.java:431)
        at java.lang.Runtime.exec(Runtime.java:328)
        at files.tableBackup_1.tbBackup(tableBackup_1.java:12)
        at files.tableBackup_1.main(tableBackup_1.java:34)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
        at java.lang.ProcessImpl.start(ProcessImpl.java:30)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
        ... 5 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:47:58.887

请检查您的全局 PATH 环境变量中是否包含 <Path to MySQL>\bin （执行`echo %PATH%`并查看）。实际上，您应该能够在普通 DOS 提示符下键入 System.out.println() 内容并且应该能够运行它。

即使这样，如果它不起作用，请尝试更改代码以执行如下所示

```
runtimeProcess = Runtime.getRuntime().exec(new String[] { "cmd.exe", "/c", executeCmd }); 
```

理想情况下，这应该可以解决问题。

**更新：**

如果 PATH 环境变量中没有它，请将代码更改为以下

```
String executeCmd = "<Path to MySQL>/bin/mysqldump -u " + dbUserName + " -p" + dbPassword + " --add-drop-database -B " + dbName + " -r " + path; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T18:55:33.720

`runtimeProcess = Runtime.getRuntime().exec(new String[] { "cmd.exe", "/c", executeCmd });`

我试过这个，但没有用，所以我把它换成了

`this runtimeProcess = Runtime.getRuntime().exec(executeCmd);`

它奏效了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T05:28:32.677

我通过给出 mysqldump.exe 的完整路径解决了这个问题

您可以通过以下方式获取 SO 环境变量

```
Map<String, String> env = System.getenv();
final String LOCATION = env.get("MYSQLDUMP"); 
```

我像这样设置系统变量：

*   变量的名称 ：`MYSQLDUMP`
*   价值 ：`D:\xampp\mysql\bin\mysqldump.exe`

现在只需执行下面的代码，

```
String executeCmd = LOCATION+" -u " + DBUSER + " --add-drop-database -B " + DBNAME + " -r " + PATH + ""+FILENAME
Process runtimeProcess = = Runtime.getRuntime().exec(executeCmd); 
```

注意：如果您没有为 mysql 服务器配置密码，只需`-p PASSWORD`从代码中删除该属性。并且不要忘记在创建新的系统变量后重新启动计算机。**

# python - 在给定字符串的情况下传递 Python 类属性

> ID：13376135
> 
> 赞同：0
> 
> 时间：2012-11-14T09:30:46.403
> 
> 标签：python, class, attributes

这是一堂课

```
Class A:
    def __init__(self, a, b):
        self.a = a
        self.b = b

    def set_value(self,"attribut_String",value):   # passing a attribute in String
        if "attribut_String" = "AAAA":
            self.cal_function("a",value) 
        else "attribut_String" = "BBBB":
            self.cal_function("b",value) 

    def cal_function(self,att,value):
        self.att = value       # process the passing string as attribute object 
```

现在，我尝试得到这样的结果：

```
input:rlt = A(a = 1, b = 2)
input:rlt.a
output: 1
input:rlt.set_value("a",3)
input:rlt.a
output:4 
```

可能这似乎没有必要，因为我简化了场景。我必须以这种方式编码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:35:37.997

您可以在`set_value`函数中使用控制流：

```
def set_value(self, member, value):
    if member == "a":
        self.a = value
    elif member == "b":
        self.b = value 
```

如果您不介意删除该`set_value`功能，则可以使用该[`setattr`](http://docs.python.org/2/library/functions.html#setattr)功能：

```
setattr(myobject, "a", value) 
```

甚至

```
def set_value(self, member, value):
    setattr(self, member, value) 
```

您还可以使用字典：

```
def set_value(self, member, value):
    members = {
        "a" : self.a,
        "b" : self.b
    }
    members[member] = value 
```

# android - 基于点击侦听器从非活动类中调用具有结果的意图

> ID：13376144
> 
> 赞同：0
> 
> 时间：2012-11-14T09:31:10.357
> 
> 标签：android, android-intent, android-activity, android-view

所以，我知道你不应该从非 Activity 类中调用意图，更不用说带有结果的意图了。一个非 Activity 类根本不应该那样做，并且要对它应该做的任何事情负责。

### 是）我有的

现在，我有一个`NappingActivity`显示十几个按钮的`VideoButtonView`. 这些按钮扩展`android.widget.Button`。

我希望能够拖动和单击按钮，所以我在 中实现了拖动/单击逻辑`VideoButtonView`，通过设置：

```
this.setOnTouchListener(new View.OnTouchListener() { … } 
```

当用户点击里面的按钮时`onTouch(View v, MotionEvent event)`，会调用以下代码：

```
Context context = v.getContext();
Intent showVideo = new Intent(context, ViewActivity.class);
context.startActivity(showVideo); 
```

到现在为止还挺好。

### 我想要的是

现在，这个意图返回到`NappingActivity`，但我想通过返回一个结果来分离这个视频播放意图。所以，理想情况下，我会`startActivityForResult`从 中调用它`NappingActivity`，而不是从`VideoButtonView`，因为后者无论如何都是不可能的。

### 问题

*   我该如何去重构它，以便我可以从活动而不是按钮中处理点击，或者至少从那里发送意图？

*   我应该将整个点击和拖动逻辑移动到活动中吗？听起来不是很干净。

*   我可以实现某种自定义侦听器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:18:26.510

> 我该如何去重构它，以便我可以从活动而不是按钮中处理点击，或者至少从那里发送意图？

你可以实现一个回调系统。见第三个答案。

> 我应该将整个点击和拖动逻辑移动到活动中吗？听起来不是很干净。

不，你在混合逻辑（但我不明白你是如何实现拖动系统的，所以我可能错了）。

> 我可以实现某种自定义侦听器吗？

创建接口：

```
public interface StartVideoListener {
    public void onStartVideoRequest(int buttonId); 
} 
```

让你`NappingActivity`实现这个接口：

```
public class NappingActivity extends Activity implements StartVideoListener {

    // ...
    public void onStartVideoRequest(int buttonId) {
        // you know the button that was clicked, start the desired activity.
    } 
```

在`VideoButtonView`类中`Context`，将构造函数转换为`StartVideoListener`字段并在以下位置调用其方法`onTouch`：

```
// ...
mListener.onStartVideoRequest(v.getId()); 
```

# image - 在黑莓电子邮件中嵌入图像

> ID：13376151
> 
> 赞同：1
> 
> 时间：2012-11-14T09:31:40.200
> 
> 标签：image, blackberry, html-email

是否可以在电子邮件中自动嵌入图像，当在黑莓上打开时，默认情况下会显示，而无需用户单独打开它？

我正在构建一个 HTML 电子邮件 eshot，它将在 Blackberry 设备上使用以下 HTML 打开：

```
<html>
   <style>
      body {background-color: Black; color: #fff;}
   </style>
   <body>
     <table align="center" cellpadding="4" cellspacing="4">
       <tr>
         <td><img src="cid:Eshot.jpg" /></td>
       </tr>    
     </table>
   </body>
</html> 
```

这在查看 Outlook 时有效，但我不确定我是否可以让它在黑莓设备上呈现，而不会将它有效地作为附件。我知道黑莓设备以自己独特的方式处理 HTML 电子邮件，但是为其生成它的客户端显然在过去已经嵌入了电子邮件，但我不确定如果有什么强制措施我能做些什么这。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:04:49.140

我有一个类似的问题。您可以在[这里](https://stackoverflow.com/questions/9032509/blackberry-embedded-browser-image-display-using-html/9092899#9092899)找到我是如何解决它的，并尝试它是否符合您的需求。很快，您需要将图像转换为字节流并将其包含在您的 html 正文中：

```
... <img src="data:image/bmp;base64,gzfddr56utggtlytlgg....jigkgfjytdjyr"></img> ... 
```

在哪里：

```
gzfddr56utggtlytlgg....jigkgfjytdjyr 
```

是编码的图像字节流。

# android - SlidingMenu 和 ViewPager 导致递归进入

> ID：13376155
> 
> 赞同：2
> 
> 时间：2012-11-14T09:32:03.070
> 
> 标签：android, android-viewpager

我正在使用`SlidingMenu`创建类似 Google+ 的界面。因为`SlidingMenu`我有一个活动和多个片段，菜单的每个项目一个。

主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/above_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

above_layout 在 onCreate 上添加了一个片段：

```
getSupportFragmentManager().beginTransaction()
                .add(R.id.above_layout, new MyFrag1()).commit(); 
```

MyFrag1 有一个`ViewPager`用于`FragmentPagerAdapter`显示多个列表的。

在这一点上，一切都完美无缺，而且速度非常快。在我添加了用另一个片段替换片段的代码之后：

```
 Fragment frag = MyFrag2.newInstance();
        FragmentTransaction transaction = getSupportFragmentManager()
                .beginTransaction();

        transaction.replace(R.id.above_layout, frag);
        transaction.addToBackStack(null);
        transaction.commit(); 
```

新片段完美加载，但在我单击“后退”按钮后，它会崩溃：

```
Recursive entry to executePendingTransactions 
```

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:10:44.917

看看这个示例，也许它可以帮助你:-) [https://github.com/Alexrs95/SlidingMenuAndViewPager](https://github.com/Alexrs95/SlidingMenuAndViewPager)

# ajax - mvc - 绑定 JSON 对象

> ID：13376156
> 
> 赞同：0
> 
> 时间：2012-11-14T09:32:04.020
> 
> 标签：ajax, asp.net-mvc, json, binding

我正在关注 Steve Sanderson 为 Knockout.js 编写的简单视频教程：http: [//channel9.msdn.com/Events/MIX/MIX11/FRM08](http://channel9.msdn.com/Events/MIX/MIX11/FRM08)

在它的最后，他执行了一个 AJAX 调用来展示如何使用敲除来处理服务器上的数据。我重复他正在做的所有事情，但由于某种原因，我的 JSON 对象没有正确绑定到 POCO 类。这是我从视图发送的对象：

```
{"firstName":"Bartosz","lastName":"Malinowski","friends":[{"name":"Zofia"},{"name":"Zenon"}],"fullName":"Bartosz Malinowski"} 
```

然后使用此代码在控制器中读取它：

```
public JsonResult Save(Person person)
    {
        var message = string.Format("Saved {0} {1}", person.firstName, person.lastName);

        return Json(new { message });
    }

    public class Person 
    {
        public string firstName { get; set; }
        public string lastName { get; set; }
        public string fullName { get; set; }
        public ICollection<Friend> friends { get; set; }
    }

    public class Friend
    {
        public string Name { get; set; }
    }
} 
```

我在客户端的代码如下所示：

```
'@{
    ViewBag.Title = "Home Page";
}

<script src="../../Scripts/jquery.tmpl.js" type="text/javascript"></script>

<p>First name: <input data-bind="value: firstName"/></p>
<p>Last name: <input data-bind="value: lastName"/></p>

<p>Full name: <span data-bind="text: fullName"></span></p>

<h2>Friends (<span data-bind="text: friends().length"></span>)</h2>
<ul data-bind="template: { name: 'friendsTemplate', foreach: friends }"></ul>

<script id="friendsTemplate" type="text/html">
    <li>
    <input data-bind="value: name"/>
    <button data-bind="click: remove">Remove</button></li>

</script>

<button data-bind="click: addFriend, enable: friends().length < 5">Add Friend</button>
<button data-bind="click: save">Save</button>

<script type="text/javascript">
    function friend(name) {
        return {
            name: ko.observable(name),
            remove: function () {
                viewModel.friends.remove(this);
            }
        };
    }

    var viewModel = {
        firstName: ko.observable("Bartosz"),
        lastName: ko.observable("Malinowski"),
        friends: ko.observableArray([new friend("Zofia"), new friend("Zenon")]),
        addFriend: function () {
            this.friends.push(new friend("Jan"));
        },
        save: function () {
            $.ajax({
                url: "@Url.Action("Save")",
                type: "post",
                data: ko.toJSON(this),
                contenttype: "application/json",
                success: function (result) { alert(result.message) }
            });
        }
    };
    viewModel.fullName = ko.dependentObservable(function () {
        return this.firstName() + " " + this.lastName();
    }, viewModel);

    ko.applyBindings(viewModel);
</script> 
```

当我在调试模式下运行它并在 Save 方法参数中检查 person 时，每个 Person 属性都有空值。所以它只是不绑定到我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:44:01.660

我做的完全一样，这是我的代码

```
 $.ajax({
                url: url,
                type: "POST",
                dataType: "json",
                data: ko.toJSON(viewModel),
                contentType: 'application/json; charset=utf-8',
                success: function (returnedData)
                {
                    window.location.replace(urlRedirect);
                }
            }); 
```

有一些区别：数据类型和字符集，我会说它是数据类型。

我的动作也有 [HttpPost]。

# android - 即使使用异步任务也不会显示android中的ProgressDialog

> ID：13376157
> 
> 赞同：0
> 
> 时间：2012-11-14T09:32:05.453
> 
> 标签：android, android-asynctask, show, progressdialog

你好@All out there :) 我有一个小问题。当我单击登录时，我想显示一个 ProgressDialog，但没有显示任何内容，它只是在没有 ProgressDialog 的情况下执行任务。我正在使用 AsyncTask 并在该线程中打开 ProgressDialog 但没有出现。这是我的源代码：

它是这样调用的：

```
ProgressDialog progress = new ProgressDialog(mainActivity);
progress.setMessage("Sie werden registriert...");

jsonParser = new JSONParser(progress, url_create_user, "POST", params); 
```

这是 JSONParser 类：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.params.ClientPNames;
import org.apache.http.client.params.CookiePolicy;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;

public class JSONParser extends AsyncTask<Context, Void, JSONObject>{

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    String url = "";
    String method = "";
    List<NameValuePair> parameters;
    ProgressDialog prog;

    // constructor
    public JSONParser(ProgressDialog prog, String url, String method, List<NameValuePair> param) {
        this.url = url;
        this.method = method;
        this.parameters = param;
        this.prog = prog;
    }

    private Handler handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            if (msg.what == 0)
            {
                prog.show();
            }
            else
            {
                prog.dismiss();
            }

        }
    };

    @Override
    protected JSONObject doInBackground(Context... params) {
        try {
            handler.sendEmptyMessage(0);
            // Überprüfen welche Request Methode benutzt werden soll
            if(method == "POST"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY,
                        CookiePolicy.BROWSER_COMPATIBILITY);
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(this.parameters));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(this.parameters, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        //Stream in ein String umwandeln
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Fehler!", "Fehler mein umwandeln von Stream in String: " + e.toString());
        }

        // JSON Object parsen
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error beim parsen " + e.toString());
        }
        handler.sendEmptyMessage(1);
        // Das JSONObject zurückgeben
        return jObj;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:35:18.037

你不能在 2 个字符串之间比较 ==

采用：

```
method.equals("POST"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:37:19.437

```
see the following example code of JSON parser with async task

package com.androidhive.jsonparsing;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.HashMap;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidJSONParsingActivity extends ListActivity {

    // url to make request
    private static String url = "http://api.androidhive.info/contacts/";

    // JSON Node names
    private static final String TAG_CONTACTS = "contacts";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_EMAIL = "email";
    private static final String TAG_ADDRESS = "address";
    private static final String TAG_GENDER = "gender";
    private static final String TAG_PHONE = "phone";
    private static final String TAG_PHONE_MOBILE = "mobile";
    private static final String TAG_PHONE_HOME = "home";
    private static final String TAG_PHONE_OFFICE = "office";
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new GetEventsTask().execute("");
    }

    protected class GetEventsTask extends
            AsyncTask<String, Integer, ArrayList<HashMap<String, String>>> {
        protected ArrayList<HashMap<String, String>> contactList;

        private final ProgressDialog dialog = new ProgressDialog(
                AndroidJSONParsingActivity.this);

        //PreExecute Method

        protected void onPreExecute() {
            this.dialog.setMessage("Loading, Please Wait..");
            this.dialog.setCancelable(false);
            this.dialog.show();
        }

        //doInBackground Method

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(
                String... params) {
            contactList = new ArrayList<HashMap<String, String>>();
            // Making HTTP request
            try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                json = sb.toString();

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            // try parse the string to a JSON object
            try {
                jObj = new JSONObject(json);
                Log.i("json objects",""+json);
            } catch (JSONException e) {
                Log.e("JSON Parser", "Error parsing data " + e.toString());
            }
            try {
                // Getting Array of Contacts
                contacts = jObj.getJSONArray(TAG_CONTACTS);

                // looping through All Contacts
                for (int i = 0; i < contacts.length(); i++) {
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
                    String email = c.getString(TAG_EMAIL);
                    String address = c.getString(TAG_ADDRESS);
                    String gender = c.getString(TAG_GENDER);

                    // Phone number is agin JSON Object
                    JSONObject phone = c.getJSONObject(TAG_PHONE);
                    String mobile = phone.getString(TAG_PHONE_MOBILE);
                    String home = phone.getString(TAG_PHONE_HOME);
                    String office = phone.getString(TAG_PHONE_OFFICE);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_EMAIL, email);
                    map.put(TAG_PHONE_MOBILE, mobile);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return contactList;
        }

        //onPostExecute Method 

        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

            ListAdapter adapter = new SimpleAdapter(getApplicationContext(),
                    contactList, R.layout.list_item, new String[] { TAG_NAME,
                            TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                            R.id.name, R.id.email, R.id.mobile });
            // selecting single ListView item
            ListView lv = getListView();
            lv.setAdapter(adapter);

            // Launching new screen on Selecting Single ListItem
            lv.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting values from selected ListItem
                    String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                    String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                    String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(),SingleMenuItemActivity.class);
                    in.putExtra(TAG_NAME, name);
                    in.putExtra(TAG_EMAIL, cost);
                    in.putExtra(TAG_PHONE_MOBILE, description);
                    startActivity(in);
                }
            });
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }
        }

    }

} 
```

让我知道您的问题是否已解决？

# c# - 实现像 http://www.fileformat.info/tool/hash.htm 这样的二进制哈希

> ID：13376162
> 
> 赞同：2
> 
> 时间：2012-11-14T09:32:58.690
> 
> 标签：c#, .net

我已经苦苦挣扎了 4 天，试图在 c# 中实现一个哈希算法，它的工作原理类似于 FIPS 198 标准文档。我已经达到了一个我有价值的地步

**06070405020300010e0f0c0d0a0b0809767774753636363636363636363636363636363636363636363636363636363636363636363636363636026363d23366**

我把这个值插入到[http://www.fileformat.info/tool/hash.htm](http://www.fileformat.info/tool/hash.htm)上的二进制哈希工具中，SHA-1 值是我所期望的，但我无法在 c# 中复制它。

***期望值：***

SHA-1：74766e5f6913e8cb6f7f108a11298b15010c353a

当我在 c# 中使用 SHA1 类时，我得到的值是**a969fdc725114c8418ca5c23946bd09977054ff6**，这与我在上面的字符串哈希工具中输入我的值相同。

有人可以指出我正确的方向来生成我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:41:03.297

您需要将十六进制字符串数据转换为字节数组。网上有很多关于如何做到这一点的例子。已发布到 SO 的一个示例在[这里](https://stackoverflow.com/a/311179/381588)（使用该`StringToByteArray`功能）。一旦你有一个字节数组，通过 SHA-1 散列传递它，你应该得到你需要的输出。

# java - 检查 SOAP Web 服务连接性

> ID：13376166
> 
> 赞同：0
> 
> 时间：2012-11-14T09:33:10.663
> 
> 标签：java, web-services, jax-ws

我正在开发一个监视工具（Web 应用程序）来检查我公开的 Web 服务是否正常运行。所以当我单击该链接时，它会调用 Web 服务 URL 并检查其可用性。

我可以在 webservice 类中合并一个虚拟方法并编写代码来检查它。但是如果没有这个，还有什么更简单的方法来测试连接性？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:48:02.700

连接性和可用性之间存在差异。也就是说，您仍然可以连接到服务，即使它抛出某种异常（因此它不可用）。

“可用”的含义因服务而异，只能通过在服务中结合某种测试方法来真正检查，如果一切正常，则返回 OK 状态。

连接性相对容易检查，如果您可以打开到服务的连接：它在那里，实际上不需要在服务上实际调用方法。

# mysql - mysql使用join语句查询错误

> ID：13376167
> 
> 赞同：0
> 
> 时间：2012-11-14T09:33:10.577
> 
> 标签：mysql, join

当我运行以下查询时，我收到一个错误，如“where 子句中的列'manager_id' 不明确”如何解决它。

```
select * from employee 
join leave_details on leave_details.employee_id=employee.id 
inner join manager on (manager.id=leave_details.manager_id) 
where manager_id=4; 
```

我正在使用此查询来显示其 manager_id 为 xxx 的特定员工的休假详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:34:57.167

此消息意味着 manager_id 列存在于您放入 FROM 部分的多个表中。用表名作为字段名的前缀（例如，如果您指的是员工，则为“employee.manager_id”）——即使没有必要，这也是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:35:12.873

您必须限定 manager_id：

```
select *
from employee
join leave_details on leave_details.employee_id=employee.id
inner join manager on (manager.id=leave_details.manager_id)
where employee.manager_id=4; 
```

# android - 即使在测试期间处于测试模式，应用程序内是否仍能正常工作？

> ID：13376170
> 
> 赞同：0
> 
> 时间：2012-11-14T09:33:36.833
> 
> 标签：android, eclipse, sdk

我制作了一个带有应用内应用的安卓应用。并在我的测试模式下工作（使用虚假的 VISA 详细信息）。但是，当我将其上传到 Google Play 商店并再次下载该应用程序时……它仍然给了我假签证的详细信息。我已经在开发者控制台中添加了产品 ID，但它仍然显示为测试帐户。

一些注意事项：我使用与测试相同的帐户作为真实应用程序（即：从谷歌商店下载）。

如果我需要修改（假设在应用程序中定义产品 ID，我在哪里做呢？）因为目前我正在使用 android.test.purchased 或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:55:56.543

我自己修复了它，我所做的是将 android.test.purchase 更改为我的 productID

# javascript - javascript继承和实例变量

> ID：13376177
> 
> 赞同：4
> 
> 时间：2012-11-14T09:33:54.173
> 
> 标签：javascript

我试图了解继承在 JS 中是如何工作的。假设我们有一个类：

```
Class = function () {
    this.A = 'A';
    this.B = 'B';
}; 
```

我们正在尝试扩展它

```
SubClass = function () {};
SubClass.prototype = new Class(); 
```

我是否正确理解在继承属性之后`A`并且`B`对于 的所有实例都是通用的`SubClass`，因为它们属于它的原型？如果是，如何`Class`扩展以便不成为原型的一部分？`A``B`

**UPD：**注意`Class`使用`A`and `B`，所以我不能在子类中声明它们。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:54:20.353

> 我想要的只是让每个“实例”都可以访问 A 和 B

这样做的典型方法是传递参数并将它们分配给属性。然后你可以使用`call`来引用超类。换句话说：

```
function Person( name, age ) {
  this.name = name;
  this.age = age;
}

function Student( name, age, grade ) {
  Person.call( this, name, age ); // call super-class with sub-class properties
  this.grade = grade;
}

Student.prototype = new Person();
Student.prototype.constructor = Student;

var roger = new Student( 'Roger', 18, 'A+' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:55:47.130

您可以在父类中使用属​​性而不定义：

```
Class = function () {
   this.sum = function() {
       return this.a+this.b;    
   }
};

SubClass = function () {
    this.a = 5;
    this.b = 6;
}; 

SubClass.prototype = new Class();

var z = new SubClass();
z.sum(); //11 
```

另一种方式：在原型中创建函数来创建您的属性：

```
Class = function () {   
    this.makeAB = function() { //called with context of SubClass
        this.A = 'A';
        this.B = 'B';        
    }
};

SubClass = function () { this.makeAB() }; 
SubClass.prototype = new Class();

var z = new SubClass();
z.A = 'AAA';
z.B = 'BBB';

var z2 = new SubClass();

console.log(z)
console.log(z2) 
```

# java - 文件名的正则表达式

> ID：13376180
> 
> 赞同：0
> 
> 时间：2012-11-14T09:34:10.303
> 
> 标签：java, regex

我的文件格式为 *C:\Temp\myfile_124.txt*

我需要一个正则表达式，它只会给我数字“ **124** ”，即下划线之后和扩展名之前的任何内容。

我尝试了很多方法，最新的是

```
(.+[0-9]{18,})(_[0-9]+)?\\.txt$ 
```

我没有得到想要的输出。有人可以告诉我有什么问题吗？

```
 Matcher matcher = FILE_NAME_PATTERN.matcher(filename);
        if (matcher.matches() && matcher.groupCount() == 2) {
            try {
                String index = matcher.group(2);
                if (index != null) {
                    return Integer.parseInt(index.substring(1));
                }
            }
            catch (NumberFormatException e) {

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:37:33.470

第一部分`[0-9]{18,}`声明您至少有 18 位数字，而您没有。

通常使用正则表达式，使表达式尽可能简单是个好主意。我建议尝试

```
_([0-9]+)?\\.txt$ 
```

注意：您必须调用 find() 以使其执行查找，否则会显示“未找到匹配项”

* * *

这个例子

```
String s = "C:\\Temp\\myfile_124.txt";
Pattern p = Pattern.compile("_(\\d+)\\.txt$");
Matcher matcher = p.matcher(s);
if (matcher.find())
    for (int i = 0; i <= matcher.groupCount(); i++)
        System.out.println(i + ": " + matcher.group(i)); 
```

印刷

```
0: _124.txt
1: 124 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:38:19.043

```
.*_([1-9]+)\.[a-zA-Z0-9]+ 
```

组 1 将包含所需的输出。

[演示](http://regexr.com?32q30)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:41:25.420

你可以这样做

```
^.*_\([^\.]*\)\..*$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:41:43.573

```
.*_([0-9]+)\.txt 
```

这也应该有效。当然，您应该为 Java 进行双重转义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T09:38:05.520

这可能对您有用：`(?:.*_)(\d+)\.txt` 结果在匹配组中。这个使用正向前瞻，并且只会匹配数字：`\d+(?=\.txt)`

# gem - 为什么“宝石列表”显示两个版本号？

> ID：13376181
> 
> 赞同：1
> 
> 时间：2012-11-14T09:34:12.970
> 
> 标签：gem, version, rvm

我在用着

Ruby 版本 1.9.3-p327 RVM 1.16.17 gem 1.8.24

如果我执行：

```
gem list 
```

我得到了以下结果。

为什么我有两个**bundler 版本号 (1.2.1, 1.1.3)**？：

```
*** LOCAL GEMS ***

actionmailer (3.2.9)
actionpack (3.2.9)
activemodel (3.2.9)
activerecord (3.2.9)
activeresource (3.2.9)
activesupport (3.2.9)
arel (3.0.2)
builder (3.0.4)
bundler (1.2.1, 1.1.3)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.7)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.9)
railties (3.2.9)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.0.2)
rvm (1.11.3.3)
sprockets (2.2.1)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.12)
tzinfo (0.3.35) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:52:00.523

您可以拥有多个版本的 gem - ruby​​gems 允许这样做！

# vim - GVIM：如何在不需要用户输入的情况下在大量缓冲区上运行命令？

> ID：13376182
> 
> 赞同：2
> 
> 时间：2012-11-14T09:34:14.313
> 
> 标签：vim, buffer

我需要对大量文件进行一系列更改。我发现这`:bufdo`允许我进行这些更改，但是在对多个缓冲区进行操作后，它会暂停，直到用户按下按钮。我怎样才能让它在不暂停的情况下运行所有​​文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:54:51.873

在*更多提示*下，您可以按`G`让所有进一步的输出继续进行，而不会再次中断。

如果您没有*任何*提示，您可以暂时`:set nomore`（用 撤消`:set more`）。

或者，您可以尝试我的[ArgsAndMore 插件](http://www.vim.org/scripts/script.php?script_id=4152)`:Bufdo`，它定义`:Windo`了执行此操作并自动返回到原始缓冲区的命令等。

# c# - webkit检索属性的webbrowser方法

> ID：13376183
> 
> 赞同：2
> 
> 时间：2012-11-14T09:34:15.640
> 
> 标签：c#, browser, webkit, getelementbyid

我试图找出解决以下情况的方法：

我正在使用 c# 为特定用途创建一个网络浏览器。当我在 Visual Studio 中使用 webbrowser 组件时，我可以使用以下代码：

```
public void clickSubmit()
        {
            try
            {
                foreach (HtmlElement hem in WebBrowser1.document.all)
                {
                    if (hem.GetAttribute("id").Contains("login"))
                    {
                        hem.InvokeMember("Click");
                    }
                }
            }
            catch (NullReferenceException)
            {

            }
        } 
```

我想编写一个提供相同功能但适用于 WEBKIT 的方法。

例如 webbrowser1.document.all 不是 webkit 的属性。

有人可以在这里帮助我并编写一个可以工作的函数。

# android - Android 居中框

> ID：13376186
> 
> 赞同：0
> 
> 时间：2012-11-14T09:34:22.377
> 
> 标签：android, view, center

我有这个自定义视图，它应该在页面中显示一个居中的框，具有不同的分辨率和显示。

（我删除了所有与文本相关的代码等）：

```
public class CustomView extends View {

    public CustomView(Context context, AttributeSet attrs) {

        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        Paint x = new Paint();
        x.setColor(Color.BLUE);

        Resources r = getResources();               

        //dimension of display
         int displayW = r.getDisplayMetrics().widthPixels;
         int displayH = r.getDisplayMetrics().heightPixels;

         //
         int boxW = 200;
         int boxH = 300;

         //actual box dimensions
         float boxEffettivaW = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, boxW, r.getDisplayMetrics());
         float boxEffettivaH = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, boxH, r.getDisplayMetrics());

         float left = (displayW-boxEffettivaW) / 2;
         float top = (displayH-boxEffettivaH) / 2;
         float right = left + boxEffettivaW;
         float bottom = top + boxEffettivaH;

        RectF boxf = new RectF();
        boxf.set(left,top,right,bottom);    
        canvas.drawRect(boxf, x);       

    }

} 
```

我的问题是该框未居中，因为 android 应用程序标题栏和通知栏。[截屏](http://s9.postimage.org/ref85f6zx/screenshots.png)

那么，我怎样才能使我的盒子居中呢？我需要知道实际应用程序专用显示区域的大小，而不是全局显示大小......

# php - 如何从电子邮件中传递变量？

> ID：13376187
> 
> 赞同：0
> 
> 时间：2012-11-14T09:34:22.203
> 
> 标签：php, codeigniter, email, html-email

我开发了一个包含 CI 表单验证、电子邮件助手和课程的联系表单。当用户发送信息时，客户端将收到一封包含此信息的 HTML 电子邮件。我已经使用 HTML 表结构创建了一个单独的视图，它是通过控制器中的字符串 [下面的代码] 构建的。有没有办法将用户发送的内容传递到这个 HTML 表单中？例如在我的电子邮件中，我有：

```
-You have received an email from $name<br>
-Message $message<br>
-You can reply to them at $email 
```

如果有人可以指导我，那就太好了。我已经包含了重要的代码片段作为指南。

**看法：**

```
<h1>Contact</h1>
<div id="contact">
<?php

    echo $message;
    echo validation_errors();

    echo form_open('contact/send_email');

    //Name field
    echo form_label('Name: ', 'name');
        $data = array (
            'name' => 'name',
            'id' => 'name',
            'value' => set_value('name')
        );
    echo form_input($data);

    echo form_submit('submit', 'Send');

    echo form_close(); 
```

**控制器：**

这段代码的顶部是表单验证和 if else 语句，当它通过验证检查时会发生这种情况：

```
}else{
    $data['message'] = 'The email has successfully been sent';

    $html_email = $this->load->view('html_email', $data, true);

    //load the email class
    $this->load->library('email');

    $this->email->from(set_value('email'), set_value('name'));
    $this->email->to('email@hotmail.com');
    $this->email->subject('Message from Website');
    $this->email->message($html_email);

    $this->email->send();

    //if error from library will send us metadata
    echo $this->email->print_debugger();

    $data['page_title'] = 'Contact';
    $data['content'] = 'contact';   
    $this->load->view('template', $data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:51:08.933

从上面的例子中，很简单的添加： echo $_POST['name'] 到 html 表单中。希望这可以帮助其他人并感谢您的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:51:55.520

以您应该使用的 CodeIgniter 方式做事，`$this->input->post('name')`而不是`$_POST['name']`

要将数据添加到您的视图中，只需添加

`$data['name'] = $this->input->post('name');`

在加载视图之前。这将允许您`$name`像在初始语句中一样在视图中打印变量。即在视图中：

`You have a message from <?=$name?>`

在控制器中，我也会更改`set_value('name')`为`$this->input->post('name')`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:52:42.023

您只需要在 html 表单文件中使用 $_POST['name'} 即可。

# javascript - 为什么 jQuery(this).css('background-image') 返回浏览器 URL？

> ID：13376188
> 
> 赞同：-2
> 
> 时间：2012-11-14T09:34:29.273
> 
> 标签：javascript, jquery, html, css, foreach

我有三个 div，如下所示。

```
<div id="div#product_img_wrapper">
    <div id="product_design1" class="timage"  style="z-index: 20; background-image: url('');"></div>
    <div id="product_design2" class="timage"  style="z-index: 20; background-image: url('');"></div>
    <div id="product_design3" class="timage"  style="z-index: 20; background-image: url('');"></div>
</div> 
```

我使用下面的 jquery 函数在 div 上方循环槽，如下所示。

```
jQuery('div#product_img_wrapper div').each(function(){

            var background = jQuery(this).css('background-image').replace('url(','').replace(')','');

            if(background != 'none')
            {
                console.log(jQuery(this));
                console.log(background);
            } 

        }); 
```

输出

```
"http://localhost/project/index.php?option=com_project&controller=project&task=project&method=1"
"http://localhost/project/index.php?option=com_project&controller=project&task=project&method=1"
"http://localhost/project/index.php?option=com_project&controller=project&task=project&method=1" 
```

我要做的是获取每个 div 的 background-image 属性。但它返回我这个浏览器显示的 URL？上面的代码有什么问题？为什么 jQuery(this).css('background-image') 返回浏览器 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:36:24.157

`url('')`是解析为“此处”的相对 URL。

您正在获取您指定的 URL，只是解析为绝对形式，而不是您输入的原始相对形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:37:21.400

URL 是相对的，并且设置为绝对的。

你应该写这个来获得背景：

```
var background = jQuery(this).css('background-image').replace('url(' + location.href,'').replace(')',''); 
```

# javascript - 如何使用 CasperJS 登录网站？

> ID：13376189
> 
> 赞同：34
> 
> 时间：2012-11-14T09:34:48.053
> 
> 标签：javascript, phantomjs, casperjs

如何通过提交表单使用 CasperJS 登录。我搜索了谷歌并没有找到任何关于它的好例子。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-14T10:05:55.773

您将需要使用 Casper [fill()](http://docs.casperjs.org/en/latest/modules/casper.html#fill)函数。

以下是登录 Facebook 并在登录后打印出您的姓名的示例。请注意，您需要输入您的用户名和密码：

```
var casper = require('casper').create({   
    verbose: true, 
    logLevel: 'debug',
    pageSettings: {
         loadImages:  false,         // The WebPage instance used by Casper will
         loadPlugins: false,         // use these settings
         userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'
    }
});

// print out all the messages in the headless browser context
casper.on('remote.message', function(msg) {
    this.echo('remote message caught: ' + msg);
});

// print out all the messages in the headless browser context
casper.on("page.error", function(msg, trace) {
    this.echo("Page Error: " + msg, "ERROR");
});

var url = 'http://www.facebook.com/';

casper.start(url, function() {
   console.log("page loaded");
   this.test.assertExists('form#login_form', 'form is found');
   this.fill('form#login_form', { 
        email: '**<put your email here>**', 
        pass:  '**<put your password here>**'
    }, true);
});

casper.thenEvaluate(function(){
   console.log("Page Title " + document.title);
   console.log("Your name is " + document.querySelector('.headerTinymanName').textContent ); 
});

casper.run(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-03T21:46:14.297

这是来自 Ngo Hung 的代码稍作改动的版本。用户名的选择器和 userAgent 的分配一样关闭：

```
var casper = require('casper').create({   
    verbose: true, 
    logLevel: 'debug',
    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22',
    pageSettings: {
      loadImages:  false,         // The WebPage instance used by Casper will
      loadPlugins: false         // use these settings
    }
});

// print out all the messages in the headless browser context
casper.on('remote.message', function(msg) {
    this.echo('remote message caught: ' + msg);
});

// print out all the messages in the headless browser context
casper.on("page.error", function(msg, trace) {
    this.echo("Page Error: " + msg, "ERROR");
});

var url = 'http://www.facebook.com/';

casper.start(url, function() {
    console.log("page loaded");
    this.test.assertExists('form#login_form', 'form is found');
    this.fill('form#login_form', { 
        email: '**<put your email here>**', 
        pass:  '**<put your password here>**'
    }, true);
});

casper.thenEvaluate(function(){
    console.log("Page Title " + document.title);
    console.log("Your name is " + document.querySelector(".fbxWelcomeBoxName").innerHTML);
});

casper.run(); 
```

**更新**：*我建议其他人使用他们自己的网站，或者如果他们计划进行大量测试，至少不要使用 facebook.com。Facebook 可以告诉我，我一遍又一遍地尝试登录，开始给我发电子邮件，让我用 SMS 确认我的帐户。*

# assembly - 我如何知道汇编指令的长度？

> ID：13376192
> 
> 赞同：0
> 
> 时间：2012-11-14T09:34:51.383
> 
> 标签：assembly, architecture, x86

我遇到了这样的一段代码：

```
jmp 0x26 #2 bytes
popl %esi #1 bytes
movl %esi,0x8(%esi) # 3 bytes
movb $0x0,0x7(%esi) # 4 bytes

.....

.string \"/bin/sh\" #8 bytes 
```

我想知道作者如何知道每条指令有多少字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:55:35.547

我喜欢你得到的第一条评论本质上是答案......但它不在答案框中！因此，我将对此进行扩展。

因此，正如您所收集的，您必须“知道”——您可以通过查看英特尔手册中的说明来了解这一点。

我会给你一个简单的例子如果你想计算出说的大小，`mov rax, [rsp+8]`你可以在 nasm 中组装它：

```
 BITS 64
 mov rax, [rsp+8] 
```

使用以下命令：

```
 nasm -fbin test.asm -o test.bin 
```

检查 test.bin，你会在 Hex 中看到它是：

```
 48 8B 44 24 08 
```

这里`8B`代表`mov`指令。前面`48`是带有`w`属性集的 REX 前缀（表示 64 位目标）。最后一个字节，`08`表示与前一个寄存器的位移`24`，即表示`esp`（除了目标是宽的，因为`REX`前缀告诉我们）。最后，`44`表示`eax*2`，这将是一个 64 位宽的字段。

这里使用的确切寻址模式非常复杂，但可以肯定地说，可以快速解决常见的寻址模式。例如，等效的 32 位 ( `mov eax, [esp+4]`) 是 4 字节`8B 44 24 04`。

# php - 如何将文本转换为关联数组？

> ID：13376193
> 
> 赞同：1
> 
> 时间：2012-11-14T09:34:53.813
> 
> 标签：php, codeigniter

嗨，这是我在我的项目中遵循的代码。

```
$reports = $this->curl->simple_get('url');
echo is_array($reports)?"Is Array":"Not Array";exit; 
```

它`Not Array`作为输出给出。

我想将其转换为关联数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:12:31.143

你得到的数据可能不是一个数组，而是一个包含数组结构的字符串，例如 print_r() 的输出。这种数据不会自动转换回 PHP 数组。

要使用它，您可以使用此处提出的类似解决方案： [从 print_r 输出创建变量](https://stackoverflow.com/questions/7231763/create-variable-from-print-r-output)

它描述了`print_r_reverse`php.net 页面中的功能。

无论如何-这是一种丑陋的黑客行为。我建议更改页面内容并`json_encode()`在“url”页面中使用，并使用解析内容`json_decode()`

# jquery - 点击时Jquery更改类

> ID：13376199
> 
> 赞同：0
> 
> 时间：2012-11-14T09:35:12.700
> 
> 标签：jquery, class, show-hide

我已经整理了一个带有侧边栏的页面，当您单击侧边栏中的菜单时，它会显示/隐藏 div。

[http://www.prostatecymru.com/prostate/](http://www.prostatecymru.com/prostate/)

侧面的菜单正在使用这段代码：

```
<div class="buttons">
    <ul id="menu-profile" class="menu">
        <li><a class="button" id="showdiv1">Show Div 1</a></li>
        <li><a class="button" id="showdiv2">Show Div 2</a></li>
        <li><a class="button" id="showdiv2">Show Div 2</a></li>
    </ul>
</div> 
```

主要内容是使用这段代码：

```
<div id="div1">
    Content Div 1
</div>
<div id="div2" style="display: none;">
    Content Div 2
</div>
<div id="div3" style="display: none;">
    Content Div 3
</div> 
```

使用的 jQuery 是：

```
<script type="text/javascript">
    $(function() {
        $('#showdiv1').click(function() {
            $('div[id^=div]').hide();
            $('#div1').show();
        });
        $('#showdiv2').click(function() {
            $('div[id^=div]').hide();
            $('#div2').show();
        });
        $('#showdiv3').click(function() {
            $('div[id^=div]').hide();
            $('#div3').show();
        });
    });
</script> 
```

它完全按照我的意愿做，但只有一件事。我只想`a`在用户选择要显示的部分时突出显示菜单中的 。我的想法是在所选项目上使用`.selected`而不是。`.button`我可以设置`.selected`第一个看起来很酷的项目，但是当您更改链接`.selected`以移动到实际选择的项目时我想要。我怎样才能做到这一点。我已经阅读了一些指南，但这并不是我想要的，或者它不起作用。

我真的很感激这方面的一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:42:24.313

只需使用与显示/隐藏 div 相同的方法：

```
$('#showdiv1').click(function() {
    $('div[id^=div]').hide();
    $('#div1').show();

    $('a[id^=showdiv]').removeClass('selected');
    $(this).addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:52:58.730

基本思想就在那里，几乎没有重构：

[http://jsfiddle.net/s7E3z/](http://jsfiddle.net/s7E3z/)

```
$('.menu a').on('click', function(e) {
    e.preventDefault();
    showdiv(this);
    $('.menu a').removeClass('selected');
    $(this).addClass('selected');
});

$('.menu a:eq(0)').click();

function showdiv(sender) {
    var idTarget = sender.id.replace('show','');
     $('.container div').removeClass('selected');
    $('#'+idTarget ).addClass('selected');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:53:16.170

您应该按照烤的建议尝试重构代码，然后添加新功能。这是一个快速片段（html 略有改动）：

```
$(".button").click(function() {
    var idNumber = $(this).attr("id").replace("show", "");
    $(".display").hide();
    $("#div" + idNumber).show();
    $(".button").removeClass("selected");
    $(this).addClass("selected");
}); 
```

和一个工作小提琴演示[在这里](http://jsfiddle.net/uRpM3/2/)

# asp.net - RavenDB - 构建动态查询

> ID：13376201
> 
> 赞同：0
> 
> 时间：2012-11-14T09:35:19.567
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, nosql, ravendb

我正在使用 .NET MVC 和 RavenDB 构建一个简单的 CMS，我需要使用 x 数量的传入参数过滤页面。

示例页面：

```
public class Page{
string Name
string Content
List<string> Tags
//etc...
} 
```

在我的页面控制器中，我有这种方法，我想获取所有具有匹配标签的页面。他们必须排除过滤器，所以它是一个应该添加的 AND 条件

```
public ActionResult Index(List<string> tagFilters)
{
    var pages = MyRavenSession.Query<Page>().Where( how to compare tagFilters List to pages Tags List? ) 

    return View(pages);
} 
```

我一直在互联网上寻找关于这种情况的答案，应该还有其他人有同样的问题。

我应该如何解决这个问题？

我读到谓词生成器无法转换为 RavenDB LINQ 查询。

我还读到您可以构建某种 RavenDB lucene 查询，但我找不到任何示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:08:33.227

您可以通过使用`Session.Advanced.LuceneQuery()`它允许细粒度的动态查询构建来做到这一点

# java - 多个方法的 MethodSecurityInterceptor

> ID：13376202
> 
> 赞同：7
> 
> 时间：2012-11-14T09:35:29.793
> 
> 标签：java, spring-security

我想使用 Spring Security 保护我的服务层。正如文档中所解释的，我需要使用一个`MethodSecurityInterceptor`来检查方法调用是否被允许。

要决定是否允许给定用户调用服务方法，将所需角色影响到调用方法（使用`MethodSecurityMetadataSource`）对我来说是不够的，因为它还取决于传递给方法的参数。正如文档中所建议的，我可以编写一个自定义`AccessDecisionVoter`并通过安全对象（`MethodInvocation`在本例中）访问参数。

但是，我的授权逻辑在不同的方法中是不同的。例如，多个方法的参数可能不同，授权逻辑也会不同。

我看到两个选项：

*   我可以在中使用条件逻辑`AccessDecisionVoter`来确定调用的方法和要使用的授权逻辑，但这似乎是一个丑陋的解决方案。
*   我可以为`MethodSecurityInterceptor`每种方法定义一个来保护。根据 Spring 文档， a`MethodSecurityInterceptor`用于保护许多方法，所以它让我想到还有另一种方法。

方法调用后的访问决策也存在同样的问题（使用`AfterInvocationProvider`）。

有哪些替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:40:17.510

我通过实现我自己`AccessDecisionManager`的将访问决定委托给我的特殊接口来实现这一点`AccessDecisionStrategy`：

```
public interface AccessDecisionStrategy {

    void decide(Authentication authentication, MethodInvocation methodInvocation, ConfigAttribute configAttribute);

} 
```

每个访问决策策略代表了不同的访问决策方式。

您可以轻松实现自己的策略（即使使用其他语言 - 例如 Scala）：

```
public class SomeStrategy implements AccessDecisionStrategy { ... 
```

如您所见，我`AccessDecisionManager`有一张战略地图。经理使用的策略基于注释参数。

```
public class MethodSecurityAccessDecisionManager implements AccessDecisionManager {

    private Map<String, AccessDecisionStrategy> strategyMap;

    public MethodSecurityAccessDecisionManager(Map<String, AccessDecisionStrategy> strategyMap) {
        this.strategyMap = strategyMap;
    }

    @Override
    public void decide(Authentication authentication, Object object, Collection<ConfigAttribute> configAttributes) throws AccessDeniedException, InsufficientAuthenticationException {
        ConfigAttribute configAttribute = getSingleConfigAttribute(configAttributes);
        AccessDecisionStrategy accessDecisionStrategy = strategyMap.get(configAttribute.getAttribute());
        if (accessDecisionStrategy == null) {
            throw new IllegalStateException("AccessDecisionStrategy with name "
                    + configAttribute.getAttribute() + " was not found!");
        }
        try {
            accessDecisionStrategy.decide(authentication, (MethodInvocation) object, configAttribute);
        } catch (ClassCastException e) {
            throw new IllegalStateException();
        }
    }

    private ConfigAttribute getSingleConfigAttribute(Collection<ConfigAttribute> configAttributes) {
        if (configAttributes == null || configAttributes.size() != 1) {
            throw new IllegalStateException("Invalid config attribute configuration");
        }
        return configAttributes.iterator().next();
    }

    @Override
    public boolean supports(ConfigAttribute attribute) {
        return true;
    }

    @Override
    public boolean supports(Class<?> clazz) {
        return clazz.equals(MethodInvocation.class);
    }
} 
```

现在，当我想保护我的方法时，我将`@Secured`注释与作为策略名称的参数放在一起：

```
@Secured("GetByOwner")
FlightSpotting getFlightSpotting(Long id); 
```

您可以根据需要实施和配置任意数量的策略：

```
<bean id="methodSecurityAccessDecisionManager"
      class="some.package.MethodSecurityAccessDecisionManager">

    <constructor-arg>
        <map>
            <entry key="GetByOwner">
                <bean class="some.package.GetByOwnerStrategy"/>
            </entry>

            <entry key="SomeOther">
                <bean class="some.package.SomeOtherStrategy"/>
            </entry>
        </map>
    </constructor-arg>

</bean> 
```

要注入该访问决策管理器，请键入：

```
<sec:global-method-security secured-annotations="enabled"
                            access-decision-manager-ref="methodSecurityAccessDecisionManager">
</sec:global-method-security> 
```

我还实现了辅助类来处理`MethodInvocation`参数：

```
import org.aopalliance.intercept.MethodInvocation;

public class MethodInvocationExtractor<ArgumentType> {

    private MethodInvocation methodInvocation;

    public MethodInvocationExtractor(MethodInvocation methodInvocation) {
        this.methodInvocation = methodInvocation;
    }

    public ArgumentType getArg(int num) {
        try {
            Object[] arguments = methodInvocation.getArguments();
            return (ArgumentType) arguments[num];
        } catch (ClassCastException | ArrayIndexOutOfBoundsException e) {
            throw new IllegalStateException();
        }
    }

} 
```

现在，您可以轻松地在策略代码中提取有趣的参数来做出决策：

假设我想获取`0`类型为的参数编号`Long`：

```
MethodInvocationExtractor<Long> extractor = new MethodInvocationExtractor<>(methodInvocation);
Long id = extractor.getArg(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T16:25:41.050

您可以基于 Spring`@PreAuthorize("")`构造实现自己的方法安全注释。

要获取有关方法的额外信息（除了方法参数值）到 SpEL 评估上下文，您可以实现自己的 MethodSecurityExpressionHandler

```
@Service
public class MySecurityExpressionHandler extends
    DefaultMethodSecurityExpressionHandler {

    @Override
    public StandardEvaluationContext createEvaluationContextInternal(
        Authentication auth, MethodInvocation mi) {

    StandardEvaluationContext evaluationContext = super
            .createEvaluationContextInternal(auth, mi);

    SomeMethodInfoData methodInfoData = mi.getMethod(). ...;

    evaluationContext.setVariable("someData", <value computed based on method info data>);
    }

    return evaluationContext;
} 
```

并在您的`global-method-security`声明中注册

```
<security:global-method-security
        pre-post-annotations="enabled">
        <security:expression-handler
            ref="mySecurityExpressionHandler" />
    </security:global-method-security> 
```

现在您可以创建自定义安全注释（如果需要，还可以在 MySecurityExpressionHandler 中创建额外的进程注释数据）

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@PreAuthorize("#<someData>")
public @interface CustomSecurityAnnotation { ... } 
```

例如，您可以创建自定义注释来检查用户角色而不会弄乱字符串：

```
@MyUserRoleCheck(MyAppRole.Admin)
public void someMethod() 
```

# r - 使用环境来处理包函数中的包数据

> ID：13376203
> 
> 赞同：1
> 
> 时间：2012-11-14T09:35:33.467
> 
> 标签：r

我最近写了一个 R 扩展。这些函数使用包中包含的数据，因此必须加载它们。子程序也需要访问数据。

这是采取的方法：

```
main<- function(...){
    data(data)
    sub <- function(...,data=data){...}
...
} 
```

我对数据驻留在其中的事实感到不满意，`.GlobalEnv`因此当函数终止时它仍然存在（也破坏了通过参数概念的向下传递）。

请让我走上正轨！当您必须在包函数中处理包数据时，您如何使用环境？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:18:22.363

如果您的功能需要数据，而不是包的用户，则应将其保存在`sysdata.rda`位于 R 目录中的一个名为的文件中。

从 R 扩展：

> 允许两个例外：如果 R 子目录包含文件 sysdata.rda（R 对象的保存图像：请使用 tools::resaveRdaFiles 建议的适当压缩）这将被延迟加载到命名空间/包环境中 - 这是用于不打算让用户通过数据访问的系统数据集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T11:51:23.730

It looks that you are looking for the `LazyData` directive in your namepace:

```
LazyData: yes 
```

Othewise, `data` has the `envir` argument you can use to control in which environment you want to load your data, so for example if you wanted the data to be loaded inside `main`, you could use :

```
main<- function(...){
    data(data, envir = environment() )
    sub <- function(...,data=data){...}
    ...
} 
```

# php - Wordpress 元框只保存一些值？

> ID：13376204
> 
> 赞同：1
> 
> 时间：2012-11-14T09:35:36.680
> 
> 标签：php, wordpress, meta-boxes

我正在为 wordpress 制作服装元盒。麻烦的是wordpress似乎只保留/保存我在字段中输入的一些值..我也找不到模式..所以这里是代码：

```
<?php
function add_products_metaboxes() {
    add_meta_box('sra_product_info', 'Product Information', 'sra_products_info', 'product', 'side', 'default');
  }
  // The Productinfo Metabox
function sra_products_info() {
    //get access to the post object
    global $post;
    // Noncename needed to verify where the data originated
    echo '<input type="hidden" name="productmeta_noncename" id="productmeta_noncename" value="' .
    wp_create_nonce( plugin_basename(__FILE__) ) . '" />';
    // Get the data from the field if its already been entered
    $name = get_post_meta($post->ID, '_name', true);
    $price = get_post_meta($post->ID, '_price', true);
    $includes = get_post_meta($post->ID, '_includes', true);
    $supports = get_post_meta($post->ID, '_supports', true);
    $version = get_post_meta($post->ID, '_version' , true);
    $extrainfo = get_post_meta($post->ID, '_extrainfo', true);
    // Echo out the form
   echo '<form>';
    echo '<label for="_name">Name</label>' . '<input type="text" name="_name" value="' . $name . '"/>';
    echo '<label for="_price">Price</label>' . '<input type="text" name="_price" value="' . $price . '"/>';
    echo '<label for="_includes">Includes</label> <textarea name="_includes" rows="4" cols="10">' . $includes . '</textarea>'; 
    echo '<label for="_supports">Supports</label> <input type="text" name="_supports" value="' . $supports . '"/>';
    echo '<label for="_version">Version</label>' . '<input type="text" name="_version" value="' . $version . '"/>';
    echo '<label for="_extrainfo">Extras</label> <textarea name="_extrainfo" rows="4" cols="10">' . $extrainfo . '</textarea>'; 
   echo '</form>';

}

// Save the Metabox Data
function sra_save_product_meta($post_id, $post) {
    // verify this came from the our screen and with proper authorization,
    // because save_post can be triggered at other times
    if ( !wp_verify_nonce( $_POST['productmeta_noncename'], plugin_basename(__FILE__) )) {
    return $post->ID;
    }
    // Is the user allowed to edit the post or page?
    if ( !current_user_can( 'edit_post', $post->ID ))
        return $post->ID;
    // OK, we're authenticated: we need to find and save the data
    // check if the field exists in the posts array - if it does, then put cintent in $product_meta.
    // this code needs to be refactored!

if (isset($_POST['_name'])) {
    $product_meta['_name'] = $_POST['_name'];    
    }

 if (isset($_POST['_price'])) {
    $product_meta['_price'] = $_POST['_price'];    
    }

if (isset($_POST['_includes'])) {
    $product_meta['_includes'] = $_POST['_includes'];    
    }

if (isset($_POST['_supports'])) {
    $product_meta['_supports'] = $_POST['_supports'];    
    }

if (isset($_POST['_version'])) {
    $product_meta['_version'] = $_POST['_version'];    
    }

if (isset($_POST['_extrainfo'])) {
    $product_meta['_extrainfo'] = $_POST['_extrainfo'];    
    }

    // Add values of $prpduct_meta as custom fields
    foreach ($product_meta as $key => $value) { // Cycle through the $product_meta array!
        if( $post->post_type == 'revision' ) return; // Don't store custom data twice
        $value = implode(',', (array)$value); // If $value is an array, make it a CSL (unlikely)
        if(get_post_meta($post->ID, $key, FALSE)) { // If the custom field already has a value
            update_post_meta($post->ID, $key, $value);
        } else { // If the custom field doesn't have a value
            add_post_meta($post->ID, $key, $value);
        }
        if(!$value) delete_post_meta($post->ID, $key); // Delete if blank
    }
}
add_action('save_post', 'sra_save_product_meta', 1, 2); // save the custom fields 
```

你看到任何明显的错误吗？我想我对这段代码中自己的错误有点盲目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:17:21.680

一般来说，我建议为您的字段名称使用前缀。像这样的值`_name`有太多机会与其他地方具有相同名称的其他值发生冲突。使用诸如之类的东西`_product_name`。你可以试试吗？如果您的代码适用于页面，它应该会产生影响。为什么不将带有“true”的第四个参数添加到 add_post_meta() 和 update_post_meta() 的先前值？请参阅有关这些功能的 WordPress 法典：http: [//codex.wordpress.org/Function_Reference/add_post_meta](http://codex.wordpress.org/Function_Reference/add_post_meta)。所以它会去：

```
 if(get_post_meta($post->ID, $key, FALSE)) { // If the custom field already has a value
        update_post_meta($post->ID, $key, $value, /***OLDVALUE***/ ); // See http://codex.wordpress.org/Function_Reference/update_post_meta for old value
    } else { // If the custom field doesn't have a value
        add_post_meta($post->ID, $key, $value, true);
    } 
```

我认为很明显你与同名的元键有冲突。不是在页面中，而是在帖子中。因此，请尝试使用第 4 个参数来确保您引用的是唯一键（我的建议仍然是，使用明确的前缀与其他任何东西区分开来，无论是插件、核心等）

# apache - Liferay + Solr + Nutch

> ID：13376209
> 
> 赞同：0
> 
> 时间：2012-11-14T09:35:46.373
> 
> 标签：apache, solr, liferay, web-crawler, nutch

自述文件：[https ://stackoverflow.com/questions/11324162/nutch-and-solr-with-liferay](https://stackoverflow.com/questions/11324162/nutch-and-solr-with-liferay)

我现在处于完全相同的位置。我试图合并架构文件或只是更改了唯一键但没有任何效果。Nutch 1.4 和 Solr 3.6.1 在使用来自 nutch 的相同模式时运行良好。Liferay 6.1.0 solr-web 插件和 Solr 3.6.1 在都使用来自 solr-web 的模式时也可以正常运行。

你解决了这个问题吗？

有替代方案吗？我们还有一个 Google Search Appliance。爬取是没有问题的，但是如何集成到 Liferay 的 search-portlet 中呢？也许可以使用 Liferay Luscene Search + Google Search Appliance？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:11:21.513

Liferay 搜索 portlet 需要 uid 作为主键。因此，将唯一键保留为 uid，然后使用 copyField 将 nutch 的唯一键复制到 uid

# visual-studio - Revolution R IDE 中的硬换行符

> ID：13376211
> 
> 赞同：0
> 
> 时间：2012-11-14T09:36:01.577
> 
> 标签：visual-studio, r

有没有办法在[Revolution R IDE](http://www.revolutionanalytics.com/products/revolution-r.php)中引入带有选项卡的下一行的硬中断（比如 80 个字符） ，这是 Rstudio 具有的功能？

PS。我已经添加了 Visual Studio 标签，因为 Revolution R 是建立在 VS 之上的。

* * *

我有另一个问题现在已经解决：

是否有将选择发送到控制台的键盘快捷键；

**编辑**：好的，所以我想出了如何做到这一点。函数是`Edit.RunLineorSelection`, 并且映射到`Ctrl`+ `R`, `Ctrl`+`S`键。

# multithreading - Erlang 节点到节点消息传递吞吐量、超时和保证

> ID：13376213
> 
> 赞同：4
> 
> 时间：2012-11-14T09:36:09.033
> 
> 标签：multithreading, erlang

现在，假设我们正在设计一个应用程序，由 2 个 Erlang 节点组成。在节点 A 上，会有非常多的进程，数量级为数千。这些进程通过向节点 B 上的已注册进程发送消息来访问节点 B 上的资源。

在节点 B，假设您通过执行以下函数启动了一个进程：

```
start_server()-&gt;
    register(zeemq_server,spawn(?MODULE,server,[])),ok.<br>
server()-&gt;
    receive
            {{CallerPid, Ref}, {Module, Func, Args}} -&gt;
                    Result = (catch erlang:apply(Module, Func, Args)),
                    CallerPid ! {Ref, Result},
                    server();
            _ -&gt; server()
    end. 
```

在节点 A 上，任何想要在节点 B 上执行给定模块中的任何功能的进程都使用以下代码：

```
call(Node, Module, Func, Args)-&gt;
        Ref = make_ref(),
        Me = self(),
        {zeemq_server,Node} ! {{Me, Ref}, {Module, Func, Args}},
        receive
                {Ref, Result} -&gt; Result
        after timer:minutes(3) -&gt; 
            error_logger:error_report(["Call to server took so long"]),
            {error,remote_call_failed}
        end. 
```

所以假设`zeemq_server`Node B上的进程永远不会down，并且Node A和B之间的网络连接一直是up的，请回答以下问题：

**Qn 1**：由于Node B上只有一个接收进程，它的邮箱最有可能是满的，一直。这是因为，节点 A 上的进程很多，并且在给定的时间间隔内，例如 2 秒，每个进程至少对节点 B 服务器进行一次调用。可以通过哪些方式使节点 B 上的接收变得冗余？，例如进程组等并解释（概念）这将如何替换上面的服务器端代码。显示客户端会发生什么变化。

**Qn 2**: 在节点 B 上只有一个接收者的情况下，进程邮箱中允许的最大消息数是多少？如果单个进程邮件牛被太多消息淹没，erlang 将如何响应？

**Qn 3**：使用上面显示的概念，我可以通过什么方式保证每个发送请求的进程在超时发生之前尽快得到答案？将节点 B 上的接收部分转换为并行操作有帮助吗？像这样：

```
start_server()-&gt;
    register(zeemq_server,spawn(?MODULE,server,[])),ok.<br>
server()-&gt;
    receive
            {{CallerPid, Ref}, {Module, Func, Args}} -&gt;
                    <b>spawn(?MODULE,child,[Ref,CallerPid,{Module, Func, Args}]),</b>
                    server();
            _ -&gt; server()
    end.    
child(Ref,CallerPid,{Module, Func, Args})-&gt;
    Result = (catch erlang:apply(Module, Func, Args)),
    CallerPid ! {Ref, Result},
    ok. 
```

如上所示的方法，可能会增加Node B上运行的瞬时进程数，这可能会因内存而对服务造成很大影响。但是，它看起来不错，并使`server()`循环立即返回以处理下一个请求。您对此修改有何看法？

**最后**：说明您将如何`Pool of receiver Threads`在节点 B 上实现 a，但在节点 A 上似乎低于一个`Name`。这样，传入消息在接收线程之间多路复用，并且在这组进程中共享负载。保持问题的含义相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:10:49.360

进程邮箱中的最大消息数不受限制，内存量除外。

此外，如果您需要检查邮箱大小，请使用

```
erlang:process_info(self(),[message_queue_len,messages]). 
```

这将返回如下内容：

```
[{message_queue_len,0},{messages,[]}] 
```

我建议您首先将上面的服务器转换为 gen_server。这是你的工人。

接下来，我建议使用 poolboy ( [https://github.com/devinus/poolboy](https://github.com/devinus/poolboy) ) 创建一个服务器实例池作为 poolboy 工作者（在他们的 github Readme.md 中有示例）。最后，我建议使用辅助方法为调用者创建一个模块，该方法创建一个 poolboy 事务并将池中的 Worker arg 应用于函数。以下示例来自他们的 github：

```
squery(PoolName, Sql) ->
    poolboy:transaction(PoolName, fun(Worker) ->
                                     gen_server:call(Worker, {squery, Sql})
                                  end). 
```

也就是说，Erlang RPC 会更好地满足您的需求吗？有关 Erlang RPC 的详细信息，[请访问 http://www.erlang.org/doc/man/rpc.html](http://www.erlang.org/doc/man/rpc.html)。在[http://learnyousomeerlang.com/distribunomicon#rpc](http://learnyousomeerlang.com/distribunomicon#rpc)可以找到对 Erlang RPC 的良好处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-10T21:27:05.477

IMO 产生一个新的进程来处理每个请求可能是矫枉过正，但如果不知道每个请求必须做什么就很难说。

您可以有一个进程池来处理每个 msg，使用循环方法分发请求或根据请求的类型来处理它，将其发送到子进程或产生一个进程。您还可以通过查看它们的 msg 队列并在它们过载时启动新的子进程来监视池进程的负载。使用主管.. 只需在 init 中使用 send_after 每隔几秒钟监控一次负载并采取相应措施。如果可以，请使用 OTP，虽然有开销，但值得。

我不会使用 http 进行专线通信，我相信它的开销太大。您可以使用进程池来控制负载来处理它。

# apache - .htaccess 将 http 重定向到 https

> ID：13376219
> 
> 赞同：116
> 
> 时间：2012-11-14T09:36:37.840
> 
> 标签：apache, .htaccess

我有一个旧`www1.test.net`网址`https://www1.test.net`
（
这是我的旧文件`.htaccess`：

```
RewriteEngine On
RewriteRule !\.(js|gif|jpg|png|css|txt)$ public/index.php [L]
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ public/$1 [L] 
```

如何配置我的`.htaccess`文件以便 url 自动重定向到`https`？
谢谢！

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2014-11-19T23:37:23.617

我使用以下内容成功地将我的域的所有页面从 http 重定向到 https：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

请注意，这将使用重定向进行`301 'permanently moved'`重定向，这将有助于转移您的 SEO 排名。

`302 'temporarily moved'`使用更改重定向`[R=302,L]`

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2012-11-14T09:56:30.747

**2016 年更新**

由于这个答案受到了一些关注，我想暗示一种更推荐的使用虚拟主机的方法：[Apache: Redirect SSL](http://wiki.apache.org/httpd/RedirectSSL)

```
<VirtualHost *:80>
   ServerName mysite.example.com
   Redirect permanent / https://mysite.example.com/
</VirtualHost>

<VirtualHost _default_:443>
   ServerName mysite.example.com
   DocumentRoot /usr/local/apache2/htdocs
   SSLEngine On
# etc...
</VirtualHost> 
```

**旧答案，** 鉴于您的 ssl-port 未设置为 80，这很奇怪，这将起作用：

```
RewriteEngine on

# force ssl
RewriteCond     %{SERVER_PORT} ^80$
RewriteRule     ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [L,R] 
```

请注意，这应该是您的第一个重写规则。

**编辑：**此代码执行以下操作。RewriteCond(ition) 检查请求的 ServerPort 是否为 80（这是默认的 http-port，如果您指定了另一个端口，则必须调整条件）。如果是这样，我们匹配整个 url`(.*)`并将其重定向到 https-url。`%{SERVER_NAME}`可以用特定的 url 替换，但这样您就不必更改其他项目的代码。`%{REQUEST_URI}`是 TLD（顶级域）之后的 url 部分，因此您将被重定向到您来自的地方，但作为 https。

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2016-09-09T16:11:17.130

这`www`对于 HTTPS、代理和无代理用户来说都是最好的。

```
RewriteEngine On

### WWW & HTTPS

# ensure www.
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ensure https
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

### WWW & HTTPS 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-14T09:59:36.157

我使用以下代码强制 https：

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-09-02T23:14:00.060

如果 HTTPS/SSL 连接在负载均衡器处结束并且所有流量都发送到端口 80 上的实例，则以下规则可用于重定向非安全流量。

```
RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

确保`mod_rewrite`模块已加载。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-14T09:40:27.383

在 .htaccess 文件的末尾添加此代码

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-01-12T14:38:30.770

寻找重定向的最佳方式，我发现了这个（来自 html5boilerplate）：

```
# ----------------------------------------------------------------------
# | HTTP Strict Transport Security (HSTS)                              |
# ----------------------------------------------------------------------

# Force client-side SSL redirection.
#
# If a user types `example.com` in their browser, even if the server
# redirects them to the secure version of the website, that still leaves
# a window of opportunity (the initial HTTP connection) for an attacker
# to downgrade or redirect the request.
#
# The following header ensures that browser will ONLY connect to your
# server via HTTPS, regardless of what the users type in the browser's
# address bar.
#
# (!) Remove the `includeSubDomains` optional directive if the website's
# subdomains are not using HTTPS.
#
# http://www.html5rocks.com/en/tutorials/security/transport-layer-security/
# https://tools.ietf.org/html/draft-ietf-websec-strict-transport-sec-14#section-6.1
# http://blogs.msdn.com/b/ieinternals/archive/2014/08/18/hsts-strict-transport-security-attacks-mitigations-deployment-https.aspx

Header set Strict-Transport-Security "max-age=16070400; includeSubDomains" 
```

也许它会在 2017 年帮助某人！:)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-11-13T09:14:28.473

将此代码插入到您的 .htaccess 文件中。它应该工作

```
RewriteCond %{HTTP_HOST} yourDomainName\.com [NC]
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://yourDomainName.com/$1 [R,L] 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-08-30T15:33:42.797

这确保重定向适用于不透明代理的所有组合。

这包括案例*客户端 <http> 代理 <https> webserver*。

```
# behind proxy
RewriteCond %{HTTP:X-FORWARDED-PROTO} ^http$
RewriteRule (.*) https://%{HTTP_HOST}/$1 [R=301,L]

# plain
RewriteCond %{HTTP:X-FORWARDED-PROTO} ^$
RewriteCond %{REQUEST_SCHEME} ^http$ [NC,OR]
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-04-28T08:31:16.177

使用以下代码，或者您可以阅读有关此主题的更多详细信息。 [如何使用 .htaccess 将 HTTP 重定向到 HTTPS？](https://www.infopediya.com/htaccess-redirect-http-to-https/)

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-05-14T09:22:20.970

我也遇到了重定向问题。我尝试了 Stackoverflow 上提出的所有建议。我自己发现的一个案例是：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP:SSL} !=1 [NC]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-08-03T13:40:50.337

将以下内容添加到 .htaccess 的顶部

```
RewriteEngine On
RewriteCond %{ENV:HTTPS} !=on
RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [R,L] 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-09-19T16:50:49.587

RewriteEngine on RewriteCond %{HTTPS} off RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

[如何使用重定向 htaccess 文件](https://expertsnote.com/web-development/htaccess-file-using-redirect/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-06T01:46:30.597

这就是最终为我工作的原因

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
</IfModule> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-06-07T20:31:48.203

**`.htaccess`使用文件强制 HTTPS**

**==> 重定向所有网络流量：-**

`.htaccess`要强制所有网络流量使用 HTTPS，请在您网站根文件夹的文件中插入以下代码行。

```
RewriteEngine On 
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

**==> 仅重定向指定域：-**

要强制特定域使用 HTTPS，请`.htaccess`在您网站的根文件夹中的文件中使用以下代码行：

```
RewriteCond %{REQUEST_URI} !^/[0-9]+\..+\.cpaneldcv$
RewriteCond %{REQUEST_URI} !^/\.well-known/pki-validation/[A-F0-9]{32}\.txt(?:\ Comodo\ DCV)?$
RewriteEngine On 
RewriteCond %{HTTP_HOST} ^example\.com [NC]
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.example.com/$1 [R=301,L] 
```

如果这不起作用，请尝试删除前两行。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example\.com [NC]
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.example.com/$1 [R=301,L] 
```

> 确保将 example.com 替换为您尝试强制 https 的域名。此外，您需要将 www.example.com 替换为您的实际域名。

**==> 重定向指定文件夹：-**

如果要对特定文件夹强制使用 SSL，请将以下代码插入到`.htaccess`该特定文件夹中的文件中：

```
RewriteCond %{REQUEST_URI} !^/[0-9]+\..+\.cpaneldcv$
RewriteCond %{REQUEST_URI} !^/\.well-known/pki-validation/[A-F0-9]{32}\.txt(?:\ Comodo\ DCV)?$
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} folder
RewriteRule ^(.*)$ https://www.example.com/folder/$1 [R=301,L] 
```

> 确保将文件夹引用更改为实际文件夹名称。然后确保将 www.example.com/folder 替换为您要强制启用 SSL 的实际域名和文件夹。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-08-21T21:57:44.670

将您的域替换为`domainname.com`，它对我有用。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domainname\.com [NC]
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.domainname.com/$1 [R,L] 
```

# c# - 在 dotnetnuke 中使用 pagingcontrol 时向查询字符串添加参数

> ID：13376222
> 
> 赞同：0
> 
> 时间：2012-11-14T09:36:48.197
> 
> 标签：c#, pagination, dotnetnuke, dotnetnuke-module

我使用 dnn 的分页控制进行分页：

```
<dnn:PagingControl id="ctlPagingControl" runat="server" Mode="PostBack"></dnn:PagingControl> 
```

它有效。我想在页面更改时在 url 中显示当前页面。

网址现在是：localhost/dnn/en-us/page/module.aspx

我想在转到第 2 页时显示：localhost/dnn/en-us/ **currentpage/2 /page/module.aspx/。**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:51:42.703

更改`Mode`为`URL`在 URL 中包含页码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:49:39.253

我删除 Mode="PostBack" 然后使用 pagingControl 的 QuerystringParams 属性。

并从查询字符串中获取当前页面。

有用

# sql - 如何将字符串转换为整数 - 奇怪的格式

> ID：13376223
> 
> 赞同：0
> 
> 时间：2012-11-14T09:37:04.943
> 
> 标签：sql, sql-server-2005

我有一个名为：`pa_value`保存`varchar`记录的字段现在该字段包含以下记录：

```
 - 0.5582%
 - 0.6985%
 - -0.1589%
 - 0.9856%
 - -0.6589% 
```

我使用以下代码得到这些结果：

```
CAST (replace (p7.pa_value ,'%','') AS float (3,0)) as TotalMargin 
```

我要做的是删除所有内容并仅保留 2 个字符（如果字符串前面有 -（减号），则保留 3 个字符）。它应该看起来像这样：

```
 - 55
 - 69
 - -15
 - 98
 - -65 
```

我尝试将其转换为 a`float`然后将其转换为`integer`. 我也尝试了该`floor`命令，但不适合我的情况，但没有任何成功。我相信没有办法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:40:23.280

```
SELECT CAST((columnName * 100) as INTEGER) NewValue
FROM TableName; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/1c6ac/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:45:49.960

这应该有效：

```
SELECT 
  CAST( CASE WHEN LEFT(VALUE, 1) = '-' THEN '-' ELSE '' END 
  + SUBSTRING(
        Value, 
        CASE WHEN LEFT(VALUE, 1) = '-' THEN 4 ELSE 3 END,
        2)
  AS INT) AS TotalMargin
FROM TableName 
```

[**小提琴演示**](http://www.sqlfiddle.com/#!3/23d50/6/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:44:12.417

尝试这个：

```
select cast(substring(col,0,charindex('.',col)+3) as float)*100 
from table1 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/f3581/6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:56:40.340

尝试这个

```
UPDATE [SomeTable] 
SET p7.pa_value = 
    (CASE 
         WHEN LEN(LTRIM(p7.pa_value)) > 8 
            THEN  CAST(RIGHT(p7.pa_value, LEN(p7.pa_value) - 2) AS NUMERIC(10, 2))
         ELSE CAST(LTRIM(p7.pa_value) AS NUMERIC(10, 2))
     END);
GO 
```

这将检查字符串是否具有前导不需要的 '-' 并相应地处理每种情况。

我希望这有帮助。

# javascript - Highcharts - 没有意义的工具提示\十字线

> ID：13376226
> 
> 赞同：1
> 
> 时间：2012-11-14T09:37:14.537
> 
> 标签：javascript, highcharts

根据这个小提琴，我有两个 adjescent Highcharts 图表：

[http://jsfiddle.net/mimafogeus/TTms6/1/](http://jsfiddle.net/mimafogeus/TTms6/1/)

当其中一个被触发时，我试图点亮两个图中的相关十字准线（因此，当您将鼠标悬停在一条线上时，将有一条长垂直线穿过两个图）。

我知道您通过调用`setState('hover');`一个点来触发一个工具提示（因此，它的十字准线）。

不过，底部图表是条形图，工具提示仅适用于存在条形值的线条，因此当悬停在顶部图表上的某个位置时，我并不总是可以选择平行点。

有没有办法在没有意义的地方触发工具提示\十字准线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:44:33.077

两个不同的图表不能共享十字线属性，建议您将两个图表绘制在一个图表中并共享十字线。

```
tooltip: {
     crosshairs: true,
     shared: true
   } 
```

[条形图和折线图的工作示例](http://jsfiddle.net/b3AF9/7/)

# git - 使用 Git 克隆时只选择文件夹的子集

> ID：13376231
> 
> 赞同：17
> 
> 时间：2012-11-14T09:37:27.157
> 
> 标签：git, version-control, github

有没有办法只克隆 git 中原始分支的子集？

例如

我有以下文件夹结构：

A
|_ B
|_ C
|_ D

克隆后我想要：

A
|_ C
|_ D

我想使用这个流程来部署我的应用程序：

*   通过仅获取部分 repo 并忽略不必要的开发文件来加快克隆速度。
*   由于安全原因，我不想在生产中使用一些文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-11-22T11:44:12.477

从 Git 1.7 开始，你想要的就是可能的，所谓的 sparse-checkout。

[在这里](https://stackoverflow.com/a/28039894/1506545)可以找到一个很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:52:47.063

正如评论所暗示的，您不能克隆路径的一部分。如果您习惯于不同的源代码控制范式，例如 subversion 使用的范式，一开始这可能看起来不直观。你不能这样做的原因是因为 git 存储了整个树的快照。因此，您可以获得浅层克隆，这意味着您只能获得最近的历史记录。这更像是一个水平切片或截断，而不是您所追求的垂直切片。

获得所需内容的最佳方法是使用子模块。如果您已经在一个存储库中拥有所有内容，那么您将不得不从这个范例重新开始，或者使用 filter-branch 将存储库分成多个存储库。这也很棘手，因为您最终会在所有存储库中得到空提交，如果摆脱这些，您将有一些棘手的后续过滤器分支来将子模块中的正确提交绑定到父存储库。

看看[http://git-scm.com/book](http://git-scm.com/book)关于子模块的[章节](http://git-scm.com/book/en/Git-Tools-Submodules)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T10:43:03.600

这是 git sparse checkout 的现代方法

```
git clone --no-checkout <REPOSITORY> <DIR>
cd <DIR>
git sparse-checkout init --cone  # checkout root dir files (build, etc.)
git sparse-checkout set <SUBDIR1> [<SUBDIR2> ...] # subdir list to include
git checkout 
```

请参阅[git 文档](https://git-scm.com/docs/git-sparse-checkout)和 GitHub[博客文章](https://github.blog/2020-01-17-bring-your-monorepo-down-to-size-with-sparse-checkout/)。

# java - Java中的继承。面试时的问题

> ID：13376232
> 
> 赞同：0
> 
> 时间：2012-11-14T09:37:27.797
> 
> 标签：java, inheritance

这个问题是我在面试 Java 程序员时被问到的。看看下面的代码。我需要做最小的改变来做这个**a.f2();** 作品。

```
public class A {
  void f1(){}   
}

public class B extends A {
  void f2(){}
}

void main(String[] args) {
  A a =  ...     <- free space here
  a.f1();
} 
```

**附加 1** 我已将 void f2(){} 添加到 A 类中，但被要求以另一种方式实现。

**附加 2** 此代码中没有更多可用空间

> `enter code here`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:50:33.507

```
public class B {
  void f1(){}   
}

public class A extends B {
  void f2(){}
}

void main(String[] args) {
  A a =  new A();
  a.f2();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:42:44.440

你有几个选择

*   使您的对象 a 具有 B 的引用变量`B a = new B()`（忽略命名冲突；））
*   更新 f2() 的调用并将其转换为 B
*   在 A 中添加 f2() 然后在 B 中覆盖它

然后如果你打电话

```
A o = new B();
o.f2(); 
```

它将调用对象 B 中的 f2()

恐怕没有什么可以`<- free space here`让它在 BI 中调用 f2() 。也许是一个技巧面试问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:42:45.120

我会做以下事情：

```
A a =  new B(); 
```

然后将其转换为 B 并调用 f2：

```
((B) a).f2(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:41:23.683

只有这样:)

```
void main(String[] args) {
  B a =  new B();
  a.f2();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-18T20:03:05.217

可能你可以使用它来实现它

```
public static void main(String[] args) {
    Parent p=new Child();
    ((Child)p).f2();
} 
```

所有更改仅在提供的可用空间中进行 :)

# c# - windows下可以监控远程访问吗

> ID：13376233
> 
> 赞同：0
> 
> 时间：2012-11-14T09:37:29.767
> 
> 标签：c#, remote-desktop

有两台机器A和B。在机器B上安装软件或服务。现在，机器A通过远程访问机器B。如何监控这个动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:48:08.577

您可以尝试 Windows 远程桌面连接（一些视频教程在[这里](http://windows.microsoft.com/is-IS/windows7/Connect-to-another-computer-using-Remote-Desktop-Connection)）

**或者**

试试[LogMeIn](https://secure.logmein.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:11:16.907

如果您的应用程序是 winforms 应用程序，您可以使用 System.Windows.Forms.SystemInformation.TerminalServerSession。如果这返回 true 您的用户通过远程桌面连接进行连接。

# ios - 高度可配置的 iOS UI 颜色

> ID：13376236
> 
> 赞同：-1
> 
> 时间：2012-11-14T09:37:43.320
> 
> 标签：ios, xcode, user-interface, xib

我正在一个应用程序中工作，我必须提供一种机制来轻松自定义和配置 UI 颜色，因此客户端可以在基于 Web 的界面中选择颜色，然后将其导出为我将用于生成应用程序的 xml 文件尊重客户的选择，目前我正在使用一个头文件，我在其中定义了应用程序中使用的不同颜色：

```
 #define AccountDefaultColor [UIColor colorWithRed:34./255\. green:155./255\. blue:194./255\. alpha:1.] 
```

所以我需要你的帮助：

*   如何自动导入配置 XML 文件并构建客户端定制应用程序。
*   如何使我的代码（和 XIB 文件）易于定制，问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:22:59.743

1.  我认为您可以手动添加 XML 文件。
2.  编写一个类来读取该 XML 文件以获取您需要使用的颜色。
3.  使用步骤 2 中的类更改所有需要设置颜色的代码。

通过这种方式，您可以轻松构建应用程序。只是为了更改那个 XML 文件。

# file - 我必须在 unix 中用其内容的第一个单词重命名所有文件名

> ID：13376239
> 
> 赞同：2
> 
> 时间：2012-11-14T09:37:50.883
> 
> 标签：file, unix, command, rename

我用这个

```
head -1 -q *.txt|awk '{print $1}' 
```

它打印文件中内容的第一行。现在如何继续重命名文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:46:33.697

您可以使用 for 循环：

```
for fname in *.txt
do
mv $fname $(head -1 -q $fname|awk '{print $1}')
done 
```

# bash - 意外的 bash 函数输出

> ID：13376240
> 
> 赞同：1
> 
> 时间：2012-11-14T09:37:55.590
> 
> 标签：bash

我使用 bash 脚本编写了一个“to_upper”函数：

```
to_upper() {

    local string=$1
    echo $string | tr "[:lower:]" "[:upper:]"
    return 0
} 
```

但是，输出：

```
VAL=bla
echo $(to_upper bla)
echo $(to_upper $VAL) 
```

是

```
BLA
1 
```

有谁知道这里发生了什么？

**注意**：我的示例似乎没有重现我的错误。但是，我所拥有的是这种情况：

```
DEVICE_STATUS=$(get_device_status)
echo $DEVICE_STATUS $(to_upper $DEVICE_STATUS) 
```

那么输出是：

```
active 1 
```

我的示例似乎没有重现该问题，但它在我的脚本中。

**注意2**：我解决了这个问题；这是函数上的一些 grep 输出`get_device_status`，最终结果是`$DEVICE_STATUS`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:21:28.557

我解决了自己的问题：在`get_device_status`函数中有一个`grep`命令将垃圾输出到`$DEVICE_STATUS`. 重定向`grep`输出以`/dev/null`解决问题。

在这种情况下，我不太确定为什么在调用时`$DEVICE_STATUS`选择了正确的值`echo`而不是调用`to_upper`.

# linux - Cron 作业无法启动进程

> ID：13376248
> 
> 赞同：0
> 
> 时间：2012-11-14T09:38:21.570
> 
> 标签：linux, bash

我有以下脚本，它重新启动 memcache 以防它 down 。

问题是，当我手动运行脚本时，它运行良好，但是当我让它通过 cron 作业运行时，内存缓存没有启动。

```
#!/bin/bash
ps -eaf | grep 11211 | grep memcached
if [ $? -eq 1 ]
then
echo 'mmecache is down'
memcached -d -u nobody -l 10.1.1.1 -p 11211 -m 2076 -x 10.1.1.2 -v
else
echo "eq 0 - memcache running - do nothing"
fi 
```

*   *   *   *   *   /home/memcached_autorestartravi.sh >> /home/logs/memcache.log

我每隔一分钟就会在日志下得到这一行，但我不知道为什么没有启动 memcache。

```
echo 'mmecache is down'

echo 'mmecache is down'

echo 'mmecache is down' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:45:09.300

这可能是 PATH 问题，从 cron 运行时找不到 memcached。尝试使用 memcached 的完整路径。

# sql - 嵌套的 JOIN 不起作用

> ID：13376249
> 
> 赞同：3
> 
> 时间：2012-11-14T09:38:26.390
> 
> 标签：sql, ms-access, join, ms-access-2007

我正在尝试将 SQL 查询设置为 ComboBox 的行源。

这里是。

```
SELECT Абонементы.НомерАбонемента
  FROM Абонементы
 INNER JOIN (Группы ON Группы.Код = Абонементы.Группа
             RIGHT JOIN Направления ON Направления.Код = Группы.Направление)
 WHERE Абонементы.НомерКарты = [НомерКарты].[Value],
       Направления.Код = [NaprCombo].[Value],
       Абонементы.ДатаОкончания > Date 
```

`JOIN`但 Access 会显示一条消息，提示我在声明中有错误。

我想要什么：从组合框中选择等于的`Абонементы.НомерАбонемента`表`Абонементы`中选择。`Абонементы.Группа``Группа.Направление``Направление.Код`

我想我应该`Группы`首先从组合中选择匹配条件，然后将它们加入源表。也许我的括号有问题。也许我不明白nested`JOIN`在MS Access 中是如何工作的。

数据结构如图所示。

![1](../Images/57e068499b5d2158667833b7545c0936.png)

# 更新

Access 给出的确切消息：“JOIN 操作中的语法错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:52:31.260

我绝不肯定这会返回你想要的数据，但重要的是你有一个 JOIN 的子查询：

```
SELECT  t1.НомерАбонемента 
FROM Направления 
LEFT JOIN
    (SELECT  Группы.Направление, 
             Абонементы.НомерАбонемента, 
             Абонементы.ДатаОкончания
    FROM Абонементы
    INNER JOIN Группы ON Группы.Код = Абонементы.Группа ) As t1
ON Направления.Код = t1.Направление

WHERE t1.НомерКарты = [НомерКарты] 
AND Направления.Код = [NaprCombo] 
AND t1.ДатаОкончания > Date 
```

我建议您在添加 WHERE 语句之前让查询正常工作。WHERE 语句用 AND / OR 连接，而不是逗号。控件的 value 属性是默认值，因此当您希望返回值时不必使用属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:41:47.197

尝试这个

```
SELECT Абонементы.НомерАбонемента    
FROM Абонементы    
INNER JOIN 
(Группы RIGHT JOIN Направления ON Направления.Код = Группы.Направление)
ON Группы.Код = Абонементы.Группа 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:58:40.807

您似乎不需要正确的加入。一直使用内连接，只需给它一个正确的括号：

```
SELECT Абонементы.НомерАбонемента
  FROM (Абонементы
 INNER JOIN Группы ON Группы.Код = Абонементы.Группа)
 INNER JOIN Направления ON Направления.Код = Группы.Направление
 WHERE Абонементы.НомерКарты = [НомерКарты].[Value],
       Направления.Код = [NaprCombo].[Value],
       Абонементы.ДатаОкончания > Date 
```

基本上，如果连接的左侧也不是表引用而是连接，则必须将其括在括号中。例如，如果只有两个表，则不需要括号：

```
... FROM A JOIN B ON ... 
```

但是如果你引入另一个连接，你会这样：

```
... FROM (A JOIN B ON ...) JOIN C ON ... 
```

如果还有另一个，您需要像这样将前两个连接括起​​来：

```
... FROM ((A JOIN B ON ...) JOIN C ON ...) JOIN D ON ... 
```

等等。

的另一种语法

```
... FROM A JOIN (B JOIN C ON ...) ON ... 
```

（您的版本）MS Access 似乎不支持，从您[所说](https://stackoverflow.com/questions/13376249/nested-joins-doesnt-work#comment18265622_13376331)的错误消息来看（`JOIN expression not supported`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:44:02.230

如果没有确切的错误信息，我们有点盲目。但是由于您对括号的评论，我可以从一个问题开始...

希望布局更改可以清楚地说明我在此示例中移动括号的原因。 *（这可能不是唯一的问题，但我希望这对你来说是一个开始）*。

```
SELECT
  Абонементы.НомерАбонемента
FROM
  Абонементы
INNER JOIN
  (
    Группы
  RIGHT JOIN
    Направления
      ON Направления.Код = Группы.Направление
  )
    ON Группы.Код = Абонементы.Группа
WHERE
  Абонементы.НомерКарты = [НомерКарты].[Value]  AND
  Направления.Код = [NaprCombo].[Value]         AND
  Абонементы.ДатаОкончания > Date 
```

**注意**我也`WHERE x, y, z`改为`WHERE x AND y AND z`.

它实际上也应该在没有括号的情况下工作。 *（虽然我不使用 Access 并且知道它有一些“有趣”的规则。）* 希望这是一个很好的例子，说明 if/when 你需要它们时需要包含什么。

# python - Python包导入问题

> ID：13376251
> 
> 赞同：2
> 
> 时间：2012-11-14T09:38:33.770
> 
> 标签：python, python-import, python-packaging

我一直在为 Python 包导入而苦苦挣扎。我在网上搜索，但找不到合适的答案。

我有以下目录结构：

```
.
./__init__.py
./packages/
./packages/__init__.py
./packages/package
./packages/package/__init__.py
./packages/package/module.py 
```

module.py 源代码只包含一行：

```
import package 
```

如果我去“包”目录，我可以导入包：

```
>>> import python
>>> 
```

如果我去“。” 目录，我想导入模块（或包）如下：

```
>>> import packages.package.module as module 
```

但我得到了错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "vendor/package/module.py", line 1, in <module>
    import package
ImportError: No module named package 
```

**我需要在 __init__.py 文件中放入什么，才能进行上述导入？更多，我需要在 ./__init__.py 文件中放入什么，这样我才能从 ../ 目录导入我的项目？**

如果可能的话，我想在不更改 sys.path 变量的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:02:07.633

为了使`import package`in module.py 成功，python 包`package`必须是可发现的。这意味着它必须在`PYTHONPATH`. 默认情况下，此路径包括（使用或`site-packages`放置 python 包的目录）。此外，PYTHONPATH 还包括当前工作目录。`easy_install``pip`

如果您在 中`.`，则`.`放置在您的 PYTHONPATH 的开头。此目录不*包含*名为 的 python 包`package`，因此`import package`失败。

你可以`./packages`在启动 python 解释器之前移动到，也可以安装你的包。要执行后者，您需要一个 setup.py

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:47:18.823

当从 . 所有导入都必须相对于该目录。对于您的 module.py 文件，这意味着您必须这样做

```
import packages.package 
```

代替

```
import package 
```

这是因为 python 将使用 . 作为您在程序中执行的所有导入的基础。如果没有很多魔法，就不可能从父目录导入一些东西，所以你必须做一个绝对导入，如上所示。

# android - SurfaceTexture（外部图像）和普通纹理的Android OpenGL组合

> ID：13376254
> 
> 赞同：10
> 
> 时间：2012-11-14T09:38:42.427
> 
> 标签：android, image, opengl-es, android-camera, textures

我想将相机预览`SurfaceTexture`与一些叠加纹理混合。我正在使用这些着色器进行处理：

```
private final String vss = "attribute vec2 vPosition;\n"
        + "attribute vec2 vTexCoord;\n"
        + "varying vec2 texCoord;\n"
        + "void main() {\n" 
        + "  texCoord = vTexCoord;\n"
        + "  gl_Position = vec4 ( vPosition.x, vPosition.y, 0.0, 1.0 );\n"
        + "}";

private final String fss = "#extension GL_OES_EGL_image_external : require\n"
        + "precision mediump float;\n"
        + "uniform samplerExternalOES sTexture;\n"
        + "uniform sampler2D filterTexture;\n"
        + "varying vec2 texCoord;\n"
        + "void main() {\n"
        +"  vec4 t_camera = texture2D(sTexture,texCoord);\n"
        //+"  vec4 t_overlayer = texture2D(filterTexture, texCoord);\n" 
        //+ "  gl_FragColor = t_overlayer;\n" + "}";
        + "  gl_FragColor = t_camera;\n" + "}"; 
```

我的目标是混合`t_camera`和`t_overlayer`. 当我显示`t_camera`或`t_overlayer`单独显示时，它可以工作（显示相机预览或纹理）。但是当我取消注释时`t_overlayer`，就会`t_camera`变成黑色（不知何故采样不好）。我的覆盖层纹理是 512x512 和`CLAMPT_TO_EDGE`. 此问题仅在以下情况下发生：Android Emulator、HTC Evo 3D。但在 SGS3、HTC One X 上，它工作得很好。

怎么了？是 Evo 3D 缺少一些扩展还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:36:45.860

我想你有这个问题，因为你没有在你的代码上设置正确的纹理 ID。这是一个看似合乎逻辑的假设的典型错误，但实际上并未在文档中如此定义。如果您查看此扩展程序的文档，您会看到以下（已编辑）文本：

> 每个 TEXTURE_EXTERNAL_OES 纹理对象**可能需要最多 3 个纹理** 图像单元，用于绑定到它的每个纹理单元。当设置为 TEXTURE_EXTERNAL_OES 时，**此值将介于 1 和 3** （含）之间。对于其他有效的纹理目标，此值将始终为 1。请注意，当绑定 TEXTURE_EXTERNAL_OES 纹理对象时，**单个纹理单元所需的纹理图像单元数可能是 1、2 或 3**，而对于其他纹理对象，每个纹理单元恰好需要 1 个纹理图像单元。

这意味着至少有一个额外的工作，只要您使用 id 0 。在你的情况下：

```
GLES20.glUniform1i(sTextureHandle, 1);
GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
        sTextureId); 
```

对于您的 2D 纹理：

```
GLES20.glUniform1i(filterTextureHandle, 0);
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, filterTextureID); 
```

我相信这会为你锻炼。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T06:48:22.987

我在 Nexus 7 上遇到了同样的问题，这让我发疯了。访问 samplerExternalOES 或 sampler2D 工作得很好，但是在同一个着色器中访问它们会产生意想不到的结果。有时输出会是黑色的。有时，其中一个查找的输出会出现不良的量化伪影。行为也会因采样器绑定到的纹理单元而异。我确实检查了每个 opengl 错误并验证程序结果。

最终，起作用的是使用单独的着色器来简单地访问相机输出并将其渲染到纹理中。然后可以通过常规的 sampler2D 访问生成的纹理，并且一切都按预期工作。我怀疑某处存在与 samplerExternalOES 相关的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-03T05:07:29.563

它似乎是 OpenGL 实现中的一个错误。相同的代码在三星 Note 上运行良好，而不是在 nexus 4 上运行良好。对于位于 samplerExternalOES 之后的所有变量，getUniformLocation 似乎在某些设备上中断。

似乎编译器按字母顺序对统一变量进行排序，因此使其在两种设备上都可以工作的解决方案是将您的 samplerExternalEoz 重命名为 zzzTexture 或其他东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-31T20:19:37.680

这不是一个答案，而是对问题的详细说明——也许它会帮助 OpenGl ES 专家了解问题。

* * *

我有 3 个用于叠加的纹理和一个外部纹理，用于捕获媒体播放器的输出。如果我只使用外部纹理，输出是预期的，来自 MPlayer 的帧。相同的完整代码在 Nexus4、Samsung Galaxy S3、S4 等设备上运行良好（所有设备都使用 adreno gpus 或 Arm 的 Mali400） 硬件差异在于 Nexus 7 使用 Nvidia Tegra 3 板。

* * *

**编辑** *（我这边是如何解决的）*：

Nvidia Tegra 3 要求外部纹理采样器以采样器中字母顺序最低的名称调用，而 Adreno 220 似乎需要相反的名称。此外，T3 要求最后采样外部纹理。对于使用 Android 4.3 及更高版本的设备，这些错误可能会得到解决。在 Nvidia 方面，这是一个错误，很久以前就解决了，但后来才更新 Nexus 驱动程序。所以我必须检查存在哪个 gpu，并相应地调整代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-26T02:34:06.210

上面的方法节省了我很多时间。谢谢大师：

```
GLES20.glUniform1i(sTextureHandle, 1);
GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
    sTextureId); 
```

对于您的 2D 纹理：

```
GLES20.glUniform1i(filterTextureHandle, 0);
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, filterTextureID); 
```

改变纹理索引是解决这个问题的好方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-04T18:24:32.433

参考 user1924406 关于拆分访问 sampler2D 纹理和 samplerExternalOES 纹理的帖子 ( [https://stackoverflow.com/a/14050597/3250829](https://stackoverflow.com/a/14050597/3250829) )，这是我必须做的，因为我正在开发的应用程序正在从文件中读取或从服务器流式传输，而不是使用设备上的相机。在同一个着色器中使用两种纹理会导致非常奇怪的着色伪影（Galaxy S3 上的情况）或饱和度和对比度问题（Nexus 4 上的情况）。

因此，解决 samplerExternalOES 纹理错误的唯一方法（从我目前看到的情况来看）是执行两个着色器程序：一个将 samplerExternalOES 纹理中包含的内容写入 FBO，另一个采用来自 FBO 的内容并将其直接写入表面。

您需要检查的一件事是，有时当您写入 FBO 时，纹理坐标会翻转。在我的例子中，V（或 T 或 Y）坐标被翻转，从而在水平轴上形成镜像。在第二阶段编写片段着色器时，我必须考虑到这一点。

这是一个我想分享的战争故事，以防有些人可能需要从服务器读取文件或流，而不是直接从相机中读取。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-03T11:54:41.877

为了将外部纹理（非 GPU）转换为常规内部纹理，您必须

*   首先创建一个外部纹理（与创建常规纹理相同，但将全部替换`GLES20.GL_TEXTURE_2D`为`GLES11Ext.GL_TEXTURE_EXTERNAL_OES`）。
*   创建要写入的内部/常规纹理
*   `SurfaceTexture`用外部纹理包裹 a 。
*   将内容读入外部纹理（如果来自相机、文件等）
*   覆盖`onFrameAvailable`该 SurfaceTexture 并在此处进行转换，提供要读取的外部纹理和要写入的内部纹理。
*   您可能需要要求`getTransformMatrix`校正坐标（通常是翻转 y 轴）并提供它。有时不...

这是一些示例着色器：

顶点shdaer -

```
uniform mat4 transform; // might be needed, and might not
uniform mat4 modelview;
uniform mat4 projection;
attribute vec2 position;

varying vec2 vTexcoord;

void main() {
    gl_Position = projection * modelview * vec4(position.xy, 0.0, 1.0);
    // texture takes points in [0,1], while position is [-1,1];
    vec4 newpos = (gl_Position + 1.0) * 0.5;
    vTexcoord = (transform * newpos).xy ;
} 
```

片段着色器 -

```
#extension GL_OES_EGL_image_external : require

precision mediump float;

uniform samplerExternalOES sTexture;
varying vec2 vTexcoord;

void main() {
    gl_FragColor = texture2D(sTexture, vTexcoord);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-30T10:28:21.357

我可能也有同样的问题。经过几天的尝试，我在这里提出了我的解决方案。希望这对其他人有帮助。

首先，问题陈述。就像 Lukáš Jezný 一样，我有一个预览纹理和一个叠加纹理。它适用于 nexus 4/5 和大多数其他类型，但在 OPPO find 5、联想 A820、联想 A720 上没有显示任何内容。

解决方案：

(1) 就像 Lukáš Jezný 一样，使用 YUV 数据并在着色器中将它们转换为 RGB。

(2)多遍绘制，将预览纹理绘制到帧缓冲区一次，并读取它，然后将其再次绘制到屏幕上。

(3)在使用自己的程序之前使用另一个程序，

```
 GLES20.glUseProgram(another one);
    GLES20.glUseProgram(your "real" program); 
```

它只适用于OPPO find 5、联想A820、联想A720等。没有人知道为什么......

# c# - 复制文件时出现 WebClient 异常

> ID：13376257
> 
> 赞同：0
> 
> 时间：2012-11-14T09:39:08.887
> 
> 标签：c#, .net, visual-studio-2010, webclient

我想“下载”一个文件（更像是将其从一个目的地复制到另一个目的地），以尝试找到执行此操作的最佳方法。我已经尝试过 xcopy 等。现在我正在尝试 WebClient。我有下面列出的代码：

```
 WebClient client = new WebClient();
        client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);
        client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted);

        foreach (string drivePath in _destRepository.Destinations)
        {
            do
            {
                AsyncItem job = _repository.GetNextAsyncItem();
                string source = job.DownloadLocation;
                string destination = drivePath + job.Destination;
                client.DownloadFileAsync(new Uri(source), destination);
            } while (_repository.QueueCount < 1);
        } 
```

AsyncItem 只是一个自定义类，其中包含源和相对目标（没有驱动器位置的目标）。然后将给出其驱动器路径，然后客户端显示 DownloadFileAsync。但是在 Event Completed 函数中我得到一个错误。InnerException 告诉我目的地不存在？

当然它还不存在，WebClient 必须做到。这让我相信也许 WebClient 不会创建文件夹结构？其中一些文件位于两层深处。

StackOverflow 的观点是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:45:57.670

上面的简单答案是肯定的，WebClient 不会为您创建文件夹结构。必须通过执行以下操作来添加它们：

```
FileInfo dest = new FileInfo(destination);
if (!dest.Directory.Exists)
    dest.Directory.Create(); 
```

但其次也是最重要的 WebClient 不支持 CONCURRENT I/O 操作。

# c++ - 密码策略 Windows API

> ID：13376262
> 
> 赞同：1
> 
> 时间：2012-11-14T09:39:28.237
> 
> 标签：c++, .net, winapi, policy

是否有任何 API 可用于本地和/或全局密码策略（读/写策略设置）？

我发现有一个windows命令：

> 净帐户

它使用什么 API 来读取设置？是否可以在管理员权限下以编程方式更改设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-28T23:09:28.253

使用可以使用 netapi32.lib 中的 NetUserModalsGet() 函数。

[请参阅https://msdn.microsoft.com/en-us/library/aa370656(VS.85).aspx](https://msdn.microsoft.com/en-us/library/aa370656(VS.85).aspx)中的示例

[**`NetUserModalsGet`**](https://msdn.microsoft.com/en-us/library/windows/desktop/aa370656%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396)

```
struct USER_MODALS_INFO_0
{
    DWORD usrmod0_min_passwd_len;
    DWORD usrmod0_max_passwd_age;
    DWORD usrmod0_min_passwd_age
    DWORD usrmod0_force_logoff; 
    DWORD usrmod0_password_hist_len;
}
PUSER_MODALS_INFO_0 = ^USER_MODALS_INFO_0;    

PUSER_MODALS_INFO_0 info0;

NET_API_STATUS res = NetUserModalsGet(nil, 0,  out info0);

if (res <> NERR_Success)
   RaiseWin32Error(res);
try
   //Specifies the minimum allowable password length. 
   //Valid values for this element are zero through PWLEN.
   Log(info0.usrmod0_min_passwd_len);

   //Specifies, in seconds, the maximum allowable password age. 
   //A value of TIMEQ_FOREVER indicates that the password never expires. 
   //The minimum valid value for this element is ONE_DAY. 
   //The value specified must be greater than or equal to the value for the usrmod0_min_passwd_age member.
   Log(info0.usrmod0_max_passwd_age);

   //Specifies the minimum number of seconds that can elapse between the time
   //a password changes and when it can be changed again. 
   //A value of zero indicates that no delay is required between password updates. 
   //The value specified must be less than or equal to the value for the usrmod0_max_passwd_age member.
   Log(info0.usrmod0_min_passwd_age);

   //Specifies, in seconds, the amount of time between the end of the valid
   // logon time and the time when the user is forced to log off the network. 
   //A value of TIMEQ_FOREVER indicates that the user is never forced to log off. 
   //A value of zero indicates that the user will be forced to log off immediately when the valid logon time expires.
   Log(info0.usrmod0_force_logoff);

   //Specifies the length of password hi'+'story maintained. 
   //A new password cannot match any of the previous usrmod0_password_hist_len passwords. 
   //Valid values for this element are zero through DEF_MAX_PWHIST
   Log(info0.usrmod0_password_hist_len);
finally
   NetApiBufferFree(info0);
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T09:44:41.977

你应该看看：

[Windows-OS-用户管理](http://www.codeproject.com/Articles/18219/Windows-OS-User-Management)

[Query-the-New-Windows-Audit-Policies-Programmatica](http://www.codeproject.com/Articles/61658/Query-the-New-Windows-Audit-Policies-Programmatica)

# ios - IOS：视图中的不同之处

> ID：13376265
> 
> 赞同：0
> 
> 时间：2012-11-14T09:39:36.713
> 
> 标签：ios, location, cgpoint

我有这段代码，其中 location 和 previousLocation 是两个 CGPoint：

```
 CGRect  bounds = [self bounds];
UITouch *touch = [[event touchesForView:self] anyObject];
    CGPoint point = [touch locationInView:self];
    location = CGPointMake(point.x,point.y);
    location.y = bounds.size.height - location.y;
    CGPoint prev = [touch previousLocationInView:self];
    previousLocation = CGPointMake(prev.x, prev.y);
previousLocation.y = bounds.size.height - previousLocation.y;
    [self renderLineFromPoint:previousLocation toPoint:location]; 
```

好的，这是我的 GLPaint 应用程序“touchmoved”中的一部分代码；但我的问题是我想在一个固定点移动位置和previousLocation，这个点在一个imageview的顶点（我这样做是因为我在触摸视图时拖动一个图像），这个点的值可能是：

```
CGPoint *vertex = (imageView.center.x-100, imageView.center.y+100); 
```

所以我的代码更改为：

```
 CGRect  bounds = [self bounds];
UITouch *touch = [[event touchesForView:self] anyObject];
    //CGPoint point = [touch locationInView:self];
    location = CGPointMake(vertex.x,vertex.y);
    location.y = bounds.size.height - location.y;
    //CGPoint prev = [touch previousLocationInView:self];
    previousLocation = CGPointMake(prev.x, prev.y);        <---- ?????
previousLocation.y = bounds.size.height - previousLocation.y;
    [self renderLineFromPoint:previousLocation toPoint:location]; 
```

位置可以轻松更改，但我现在的问题是previousLocation，我该如何更改？那么我的问题是......知道从位置到previousLocation的差异的方法是什么？我如何计算它的差异？因此，如果我知道动态差异，我可以设置正确的 shift previousLocation ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:47:58.533

这是解决方案：

```
CGPoint gap = CGPointMake(cur.x - prev.x, cur.y - prev.y); 
```

# java - 如何让 JUnit RunListener 在每次失败时保存获得的数据？

> ID：13376274
> 
> 赞同：0
> 
> 时间：2012-11-14T09:39:59.193
> 
> 标签：java, junit4

我在测试中通过 httpconnetion 获取 xml 文件，并且必须进行大量检查。发生故障时如何获取内部测试数据并对其进行序列化？尝试使用 RunListener，但Failure 类不提供对获取数据的访问。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:13:48.847

如果您有兴趣：我创建了一个规则，由接收到的 xml 数据初始化并覆盖 failed() 方法

# jquery - 使用 jQuery 检索字符串中的元素

> ID：13376275
> 
> 赞同：0
> 
> 时间：2012-11-14T09:40:04.803
> 
> 标签：jquery, dom, element

我在 jQuery 中有一个字符串`$(elm).parent().parent().html()`。

这个字符串返回：

```
 <input name="formpage" value="formulaire_test" type="hidden">
<input name="postOK" value="accuse.html" type="hidden">
<input name="postNOK" value="erreur.html" type="hidden">
<input name="mailFrom" value="-1,-1,-1" type="hidden">
<input name="mailToName" value="Nom" type="hidden">
<input name="mailTo" value="a@a.fr" type="hidden">
<input name="mailSubject" value="Sujet" type="hidden">
<input value="name=mailText" type="hidden">
<div class="headerForm"><p>En tete</p></div>
<fieldset><legend>Nouveau</legend>
<div id="para0101" class="entry"><label for="id0101">sdf</label>
<input id="id0101" name="input0101" type="text"></div>
<div id="para0102" class="entry"><label for="id0102">sf</label>
<input id="id0102" name="input0102" type="text"></div>
<div id="para0103" class="entry"><label for="id0103">sfd</label>
<input id="id0103" name="input0103" type="text"></div></fieldset>
<div class="footer">pied form</div>
<div class="submit"><input value="annuler" type="reset">
<input value="envoyer" type="submit"></div> 
```

例如，我如何检索中的`En tete`值`<div class="headerForm">`？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:41:45.010

您需要 jquery 类选择器来访问所需的元素并使用 jquery 的 text 方法来获取其文本。

```
requiredvalue = $('.headerForm').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:45:07.257

```
$(".headerForm p",$(elm).parent().parent()).text(); 
```

这应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:47:21.083

试试这个： $(elm).parent().parent().find('.headerForm').text();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:54:54.483

```
var xml = $('elm').parent().parent().html();
var xmlDoc = $.parseXML( xml );
var $xml = $( xmlDoc );
var $hdrFrm = $xml.find( "div.headerForm"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T09:57:02.430

试试这个方法

```
$(function () {
 var allHtml = $(elm).parent().parent().html();
 alert($(this).find('.headerForm p').html());
}); 
```

# c# - 确保 AddMonths 不受任何文化影响

> ID：13376277
> 
> 赞同：0
> 
> 时间：2012-11-14T09:40:09.063
> 
> 标签：c#, windows, datetime

我的 C# 程序中有一个字符串格式的日期：“28/09/2012”。它也可以是“09/28/2012”格式。我需要将此字符串转换为 DateTime，然后在其上调用 AddMonths(2) 方法。如何确保此代码在具有任何cultureie.UK/US/Asia 等的机器上正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:46:39.023

DateTime.Parse 应该有一个采用 CultureInfo 的重载。

您应该传递您选择的文化信息。安装在机器上的那个，或者可能是用户在您的应用程序选项或配置等中选择的那个。

一旦有了 DateTime，无论文化如何，AddMonths 都应该可以工作。

抱歉，对于确切的过载没有更精确，我现在不在 Visual Studio 面前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:03:48.827

`AddMonths`如果您为`DateTime.Parse`. 所以你必须知道 DtaeTime-String 是哪种文化或格式。否则不可能知道“10/09/2012”是在 9 月还是 10 月（正如 František Žiačik 指出的那样）。

> 假设格式是“28/09/2012”，我该如何实现这个功能

如果您知道输入字符串始终采用“dd/MM/yyyy”格式，那么您可以`DateTime.ParseExact`在之后使用并应用正确的区域性`ToString`：

```
String input = "28/09/2012";
DateTime dt = DateTime.ParseExact(input, "dd/MM/yyyy", CultureInfo.InvariantCulture);
CultureInfo targetCulture = CultureInfo.CreateSpecificCulture("en-US");
String output = dt.AddMonths(2).ToString( targetCulture ); 
```

[**演示在这里**](http://ideone.com/P4Na5K)

# android - 使用 sherlockpreferenceactivity 的 Android 偏好 onclick 事件

> ID：13376278
> 
> 赞同：0
> 
> 时间：2012-11-14T09:40:16.013
> 
> 标签：android, android-preferences

您好我正在尝试为 CheckBoxPreference 实现 onclick 事件。在文件夹 res/xml/preferences.xml 我有这个偏好：

```
<CheckBoxPreference
android:key="IsEnable"
android:title="IsEnable"
android:persistent="true"
/> 
```

我在 SO 上遵循了这个答案： [Android 偏好 onclick 事件](https://stackoverflow.com/questions/5330677/android-preferences-onclick-event)

在activity.java中：

```
public class settingsActivity extends SherlockPreferenceActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
addPreferencesFromResource(R.xml.preferences);
Preference myPref = (Preference) findPreference("IsEnable");
myPref.setOnPreferenceClickListener(new OnPreferenceClickListener() {//<--compilation error
public boolean onPreferenceClick(Preference preference) {
//code goes here
return true;
}
});
} 
```

但是在第 7 行出现以下编译错误： 此行的多个标记 - OnPreferenceClickListener 无法解析为类型 - Preference 类型中的方法 setOnPreferenceClickListener(Preference.OnPreferenceClickListener) 不适用于参数（新 OnPreferenceClickListener(){ })

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:58:46.673

你也需要导入吗？检查你是否有这条线

```
import android.preference.Preference.OnPreferenceClickListener; 
```

# dbghelp - 如何并排存储调试符号和二进制文件

> ID：13376284
> 
> 赞同：0
> 
> 时间：2012-11-14T09:40:28.803
> 
> 标签：dbghelp, symbol-server, symstore

最近我注意到，当使用 SymChk 从 Microsoft 符号存储下载符号时，它会带来 DLL 和 PDB。我想知道是否可以使用标准的微软工具（如 SymChk/SymStore）来存储二进制文件和符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:09:26.867

答案很明显。只是不要提及您要添加的扩展名。例如，而不是使用：

添加 /r /f "\buildserver\buildresults*.pdb" /s "\fileserver\R&D\Artifacts\Symbols\" /c "添加生产符号" /t "服务器符号" /v "1.0.0.1"

采用：

添加 /r /f "\buildserver\buildresults*.*" /s "\fileserver\R&D\Artifacts\Symbols\" /c "添加生产符号" /t "服务器符号" /v "1.0.0.1"

# objective-c - 我可以访问类别中的私有变量，但不能访问框架变量。为什么？

> ID：13376288
> 
> 赞同：0
> 
> 时间：2012-11-14T09:40:48.807
> 
> 标签：objective-c, ios, macos, cocoa

> 类范围内的所有实例变量也在类范围内。这包括类声明的所有实例变量，甚至是声明为@private 的实例变量。

因此，我可以这样做（并且有效）：

```
@interface MyControl : UISearchDisplayController
{
    @private
    int privateInteger;
}
@end

@implementation MyControl
@end

@interface MyControl (Private)
@end

@implementation MyControl (Private)

- (void)myMethod
{
    privateInteger = 0;
}

@end 
```

但是为什么我不能这样做（我得到一个未定义的符号链接错误）：

```
@interface UISearchDisplayController (MyCategory)
@end

@implementation UISearchDisplayController (MyCategory)

- (void)myMethod
{
    _dimmingView = nil;
}

@end 
```

_dimmingView 是 UISearchDisplayController 中的私有变量。
是否有允许我这样做的构建选项，我不知道？

# java - 永远不应该在非静态导入之后的静态导入语句

> ID：13376299
> 
> 赞同：7
> 
> 时间：2012-11-14T09:41:35.913
> 
> 标签：java, groovy, static, import, codenarc

Codenarc 是一个框架，用于分析 Groovy 代码的缺陷、不良做法、不一致、样式问题等。

这条规则是否有原因：**[MisorderedStaticImports Rule](http://codenarc.sourceforge.net/codenarc-rules-imports.html#MisorderedStaticImports)**：

> 检查不应该在非静态导入之后的静态导入语句。
> 
> 违规示例：
> 
> ```
> import my.something.*
> import static foo.bar.*
> 
> public class MyClass{} 
> ```

我不明白这条规则的动机或含义。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T09:46:24.790

正如 Marko Topolnik 所说，导入的顺序与程序的含义无关。

^(我尝试查看 JLS 以获得关于该效果的明确声明，但我找不到。Java教程也没有提到导入顺序。但是， 的语义`import`是这样的，它没有任何区别。如果导入由于导入顺序而导致任何潜在的歧义，JLS 会说这是一个编译错误。)

因此，这只是一种风格惯例。（事实上​​，如果您查看规则，它甚至可以让您选择将静态导入放在首位！）

* * *

**更新**

@Eugene Stepanenkov 指出了这个问答

*   [为什么我会根据 java 导入和静态导入顺序得到不同的编译结果？](http://stackoverflow.com/questions/40440653/why-do-i-get-different-compilation-result-depending-on-import-sequence-order)

这是由 Java 8 之前的 Oracle Java 编译器版本中的一个模糊错误引起的。它（最终）被确认为一个错误并已修复。

我想，这意味着该错误*可能*是 Codenarc 警告的动机的一部分。但是，如果您使用的是受该错误影响的 Java 编译器，那么导入顺序为“错误”的任何代码都将根本无法编译……使 Codenarc 警告毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:56:02.153

风格问题。将只有一两个静态导入，但对引入函数名称等可理解性有很大影响。因此将它们放在顶部（用于阅读）可能被认为是好的风格。IDE 折叠“[+]”支持也可能被考虑在内。

我认为他们希望将静态导入与其他导入分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-05T16:44:12.797

选择导入顺序（静态和非静态）可能会在[示例](https://stackoverflow.com/questions/40440653/why-do-i-get-different-compilation-result-depending-on-import-sequence-order)中的这种边缘情况下产生问题。

# c++ - 可变长度初始化器的模板

> ID：13376306
> 
> 赞同：1
> 
> 时间：2012-11-14T09:42:06.273
> 
> 标签：c++, templates, eigen

我需要一系列使用可变数量值的初始化函数。我正在使用它们来实现与 Eigen 库的收集操作。这是我现在使用每个向量长度的一个模板的方式：

```
template<typename T1, typename T2>
inline void gather (Array<T1,4,1> &to, const Array<T2,Dynamic,1> &from, const Array<int,4,1> &index) 
{
    to << from[index[0]], from[index[1]], from[index[2]], from[index[3]];
}

template<typename T1, typename T2>
inline void gather (Array<T1,6,1> &to, const Array<T2,Dynamic,1> &from, const Array<int,6,1> &index) 
{
    to << from[index[0]], from[index[1]], from[index[2]], from[index[3]], from[index[4]], from[index[5]];
} 
```

有没有办法用长度参数参数化的单个模板（上面的代码片段中的 4 和 6）替换上面的**更长的模板列表？**如果是这样，是否可以使用 C++11 之前的语言规范来完成（我使用的是 Visual Studio 2010）？

我想保留逗号分隔值的语法，因为我希望它在某些情况下会产生编译时初始化（const`from`和`index`）。不过，我的这个假设可能是错误的。初始化列表可以有 1 到 16 个值 - 无需担心空列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:56:20.677

不要在此设置中使用逗号初始值设定项语法，这会很麻烦。在使用文字时，此语法用于提高可读性，这不是您的情况。

相反，我会推荐类似的东西：

```
template<typename T1, typename T2, unsigned int SIZE, unsigned int INDEX>
struct gather {
   gather(Array<T1,SIZE,1> &to, 
          const Array<T2,Dynamic,1> &from, 
          const Array<int,SIZE,1> &index) 
   {
      to.col(INDEX) = from[index[INDEX]];
      gather<T1,T2,SIZE,INDEX+1>(to,from, index);
   }
};

template<typename T1, typename T2, unsigned int SIZE>
struct gather<T1,T2,SIZE,SIZE>{
    gather(Array<T1,SIZE,1> &to, 
           const Array<T2,Dynamic,1> &from, 
           const Array<int,SIZE,1> &index)
    {
    }
}; 
```

这很好地产生了相同的效果，但静态（无循环）。

由于函数的部分模板专业化限制，我在这里使用结构，但由于内联，它应该归结为相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:11:19.320

基于重载`operator,`运算符来概括这种语法是非常棘手的，而且结果充其量看起来很尴尬（如果它有效的话）。我建议尝试其他选项（例如，选择[`MatrixBase::operator<<(DenseBase&)`](http://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#a3dacded5374fe30f8d4eb4ae18bc87c9)运营商）。

如果您仍然想要它，则必须一一解压缩标量：

```
template<typename T1, typename T2, class CI, int Current, int Height>
inline void gather (Array<T1,Height,1> &to, const Array<T2,Dynamic,1> &from, const Array<int,Height,1> &index, CI&& ci, std::integral_constant<int, Current>*)
{
  gather(to, from, index, (ci,from[index[Current]]), (std::integral_constant<int, Current+1>*)0);
}

template<typename T1, typename T2, class CI, int Height>
inline void gather (Array<T1,Height,1> &to, const Array<T2,Dynamic,1> &from, const Array<int,Height,1> &index, CI&& ci, std::integral_constant<int, Height>*) {}

template<typename T1, typename T2, int Height>
inline void gather (Array<T1,Height,1> &to, const Array<T2,Dynamic,1> &from, const Array<int,Height,1> &index) {
  gather(to, from, index, (to << index[from[0]]), (std::integral_constant<int, 1>*)0);
} 
```

丑陋，并且可能存在问题（如果可能，您需要处理`Dynamic`值，零高度，可能存在传递`CommaInitializers`给递归的问题等）

另外，它具有线性模板实例化深度（恕我直言，在这种情况下这是不可避免的）。

# reporting-services - 如何在使用报表执行服务呈现之前访问报表 xml 内容

> ID：13376317
> 
> 赞同：0
> 
> 时间：2012-11-14T09:42:50.400
> 
> 标签：reporting-services

我使用以下代码有问题地呈现报告：

```
rsExecService.ReportExecutionService rsExec = this.CreateReportExecutionService();
rsExecService.ExecutionInfo ei = rsExec.LoadReport(path, historyID);

Byte[] results;
string mimeType = String.Empty;
rsExecService.Warning[] warnings = null;
string[] streamIDs = null;

results = rsExec.Render(format, deviceInfo, out extension, out encoding, out mimeType, out warnings, out streamIDs); 
```

（缺少一些变量定义，因为它们作为参数传递给方法）。

问题是我需要在渲染报告之前对报告进行一些关于本地化的预处理。
我查看了 ExecutionInfo 'ei'，似乎没有成员可以让我访问原始 xml 报告内容。

是否有另一种方法来呈现允许我首先更改 xml 的报告？

**ETA：**请参阅下面的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:22:00.433

我已经解决了：

*   首先使用 ReportingService2010 使用 GetItemDefinition(path) 下载报告。
*   对原始数据执行所需的任何预处理。
*   不要使用 ReportExecutionService.LoadReport()，而是使用 LoadReportDefinition()

# php - PHP symlink() 在 Windows 7 上失败

> ID：13376319
> 
> 赞同：2
> 
> 时间：2012-11-14T09:42:55.003
> 
> 标签：php, windows-7, symlink

PHP symlink() 函数在 Windows 7 上失败并出现以下错误：

```
Warning: symlink(): Cannot create symlink, error code(3) in C:\xampp\htdocs\…\lib\model\doctrine\Website.class.php 
```

这是一个使用 PHP 5.3.8 的 XAMPP 服务器。

从 symlink() 文档中：

> 5.3.0 此功能现在可在 Windows 平台（Vista、Server 2008 或更高版本）上使用。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:15:49.797

根据这个可能是 PHP 5.3 中的一个错误：

[https://bugs.php.net/bug.php?id=48975](https://bugs.php.net/bug.php?id=48975)

和这个：

[http://forum.wampserver.com/read.php?2,64011](http://forum.wampserver.com/read.php?2,64011)（回复#2）

也许你可以升级到 PHP 5.4 看看它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T12:43:47.507

我用这个

```
//symlink($target, $link);
exec('mklink /j "' . str_replace('/', '\\', $link) . '" "' . str_replace('/', '\\', $target) . '"'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-23T23:11:50.433

关于 Windows 操作系统上的 PHP CLI：
不要忘记使用`Run as Administrator`else启动控制台`symlink`会返回`false`并引发以下错误：

```
Warning: symlink(): Cannot create symlink, error code(1314) 
```

# java - 在 JTextField 中保存换行符

> ID：13376320
> 
> 赞同：1
> 
> 时间：2012-11-14T09:42:54.683
> 
> 标签：java, swing, newline, jtextfield

将剪贴板中的文本插入 JTextField 时如何保存换行符？

我找到了解决这个问题的方法。它的`setDocument()`方法来自`JTextField`：

```
public void setDocument(Document doc) {
    if (doc != null) {
        doc.putProperty("filterNewlines", Boolean.TRUE);
    }
    super.setDocument(doc);
} 
```

再加上这个创建你自己的实现`AbstractDocument`，它将具有单行结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:48:22.507

JTextField 仅用于单行文本。您可以改用 JTextArea。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:48:35.250

`JTextField`不支持多行文本。使用`JTextArea`或`JEditorPane`代替。

# c# - ParameterInfo.ParameterType是“SqlBytes&”，如何与typeof()比较

> ID：13376323
> 
> 赞同：2
> 
> 时间：2012-11-14T09:43:22.777
> 
> 标签：c#, .net, reflection, sqlclr

我正在编写一个自动化的 SQLCLR 部署工具，并且我正在使用反射来发现必须声明的过程和函数。所以我使用这样的代码来构建部署组装方法所需的 T-SQL：

```
...
if (p.ParameterType == typeof(string))
{
   sql = "nvarchar(4000)";
}
... 
```

但是这个方法包含一个在 C# 中声明的参数 as`out SqlBytes bytes`并且 ParameterType 是`SqlBytes&`. 我不能`typeof(SqlBytes&)`用于比较，因为语法无效。所以我有点困惑到底是什么`SqlBytes&`类型，以及是否有办法为它生成 typeof。我知道我可以求助于类型名称（即字符串）比较，这不是我的问题，我更好奇这样的类型是什么`&`，似乎是 C++ 引用类型，但我认为 +10 年使用.Net 我从来没有注意到它们。

![在此处输入图像描述](../Images/808952454264710d12bed8d433250e0f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:45:59.293

`SqlBytes&``out SqlBytes`与（并且`ref SqlBytes`，正如它发生的那样）完全相同。基本上，`out`并`ref`以相同的方式实现，作为参考，按参考。如果您正在使用反射并且您当前有一个`Type`实例，则可以使用以下方法获取按引用版本：

```
Type type = ...
Type byRefType = type.MakeByRefType(); 
```

并且相当令人困惑的是，回到非参考版本：

```
Type origType = byRefType.GetElementType(); 
```

（坦率地说，我怀疑他们可能只是将其入侵到现有方法中）

# c# - 实体框架 - 类似属性的表达式

> ID：13376326
> 
> 赞同：3
> 
> 时间：2012-11-14T09:43:37.547
> 
> 标签：c#, .net, entity-framework, entity-framework-4.1

我对 Entity Framework（目前使用 v4.1 开发）还很陌生，所以我可能会以完全错误的方式来解决这个问题，所以我欢迎任何指导。

我目前有两个类：**Item**只有几个简单的字段，**FavouriteItem**包含对项目和用户的引用（但用户关系与讨论无关）。该项目有一个可为空的**DateVisible**字段，我将其用作标志来指示是否应显示项目。

为了获得可见项目的列表，我使用了一个简单的查询：

```
var items = itemRepository
               .QueryAll()
               .Where(i => i.DateVisible <= DateTime.Now) 
```

显然 QueryAll 返回一个 IQueryable。这是一个简单的示例，因为条件稍微复杂一些，但它说明了我的问题。

接下来，如果我想返回可见项目的收藏列表，那么我可以执行类似的查询：

```
var favourites= favouriteRepository
                   .QueryAll()
                   .Where(f => f.Item.DateVisible <= DateTime.Now) 
```

这工作正常。但是，代码是重复的。所以我想做的是以某种方式使这段代码更加中心化——因为我即将添加一个再次具有 Item 属性的**FollowItem**类，所以我不得不再次重复代码——不好。

我开始为项目列表创建一个表达式，效果很好：

```
public static Expression<Func<Item, bool>> IsVisibleExpression<Item>()
{
     return item => item.DateVisible != null && 
                    item.DateVisible <= DateTime.Now;
}

public static IQueryable<Item> WhereVisible<Item>(this IQueryable<Item> queryable)
{
     return queryable.Where(Item.IsVisibleExpression());
}

var items = itemRepository
               .QueryAll()
               .WhereVisible() 
```

同样，我可以为每个类创建这些表达式：

```
public static Expression<Func<FavouriteItem, bool>> IsVisibleExpression<FavouriteItem>()
{
     return favourite => favourite.Item.DateVisible != null && 
                         favourite.Item.DateVisible <= DateTime.Now;
} 
```

但这又只是重复了代码。有没有办法在它们之间使用相同的代码。我知道我可以在 上加入`itemRepository.QueryAll().WhereVisible()`，但是没有办法做到这一点，而不涉及在任何地方这样做吗？

**更新**：我尝试为类创建一个接口：

```
public interface IEntityWithItem
{
    Item Item { get; set; }
} 
```

并为它创建一个表达式：

```
 public static IQueryable<TEntity> WhereItemVisible<TEntity>(this IQueryable<TEntity> queryable) where TEntity : IEntityWithItem
    {
        return queryable.Where(ui => ui.Item.DateVisibleFrom != null &&
                                     ui.Item.DateVisibleFrom.Value <= DateTime.Now);
    } 
```

我打来的电话：

```
// Get the favourites
var favourites = favouriteItemRepository.QueryAll()
                      .WhereItemVisible()
                      .Where(favourite => favourite.UserId == user.Id); 
```

但它给出了错误：“*无法将类型'FavouriteItem'转换为类型'IEntityWithItem'。LINQ to Entities 仅支持转换实体数据模型原始类型。* ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:01:01.820

据我所知，没有简单的方法可以实现这一点，但是看看 PredicateBuilder，它确实解决了其中一些问题：[http](http://www.albahari.com/nutshell/predicatebuilder.aspx) ://www.albahari.com/nutshell/predicatebuilder.aspx 。

基本思想是您定义具有公共属性的接口，这允许您定义约束到该接口的通用表达式。

首先定义这些接口：

```
public interface IHaveItem
{
   Item Item {get;}
}

public interface IDateVisible
{
   DateTime? DateVisible {get;}
} 
```

这将允许您以通用方式编写查询表达式，至少获得一些重用：

```
public static Expression<Func<T,bool>> IsVisible<T>(DateTime now) 
    where T:IHaveItem
{
   return x => x.Item.DateVisible != null &&
          x.Item.DateVisible < now;
} 
```

但是，您仍然无法轻松实现表达式之间的重用，例如`x.DateVisible`and `x.Item.DateVisible`。

更新：事实证明，在生成的表达式树中添加了“不必要的”强制转换操作，然后实体框架提供程序在转换为 SQL 时不支持这些操作。

[您可以应用与此问题](https://stackoverflow.com/questions/9120593/iqueryablet-with-entityobject-using-generics-interfaces-possible)中类似的技巧来“手动”删除这些不必要的强制转换操作。虽然恕我直言，但变得有点毛茸茸......

# wpf - INotifyPropertyChanged：通知另一个类

> ID：13376328
> 
> 赞同：6
> 
> 时间：2012-11-14T09:43:45.817
> 
> 标签：wpf, data-binding, datagrid, inotifypropertychanged

我有一个类（我们称它为`MyContainerClass`），它是其他几个类的容器（我们称它们`ClassA`为`ClassF`）。`ClassA`继承`ClassF`相同的基类（我们称之为`MyBaseClass`）。在`MyBaseClass`我有一个名称为 int 的属性`Count`，它 `ClassA`可以`ClassF`继承。我还有一个同名的 int 属性，`MyContainerClass`其中是`ClassA`to的总和`ClassF`。

然后我有一个数据网格，每一行都有一个`MyContainerClass`. 网格的列显示`ClassA`为`ClassF`。网格中的最后一列显示总计（即它与 的`Count`属性绑定`MyContainerClass`）。现在，我希望在更改`Count`AF 范围内的任何类中的属性后，最后一列中的总数会立即更新。我实现了 INotifyPropertyChanged ，`MyBaseClass`当我将`Count`属性 更改`ClassA`为`ClassF`. 但是我的数据网格中的最后一列保持不变。有什么线索吗？

**编辑：** 我创建了一个类图。![在此处输入图像描述](../Images/6563a829196078fc247c0136e7a103dd.png)

`Count`getCount() 方法返回 objA.Count+objB.Count+...+ objF.Count并由`MyContainerClass`. 问题是：如果我更新 objA.Count，我希望 GUI（即我的数据网格中的列）显示更新后的总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:06:00.140

仅仅实施`INotifyPropertyChanged`是不够的自动更新。该`MyContainerClass`对象需要“订阅”`MyBaseClass`其他列中对象的更改通知。处理此问题的一种方法是向 : 添加如下方法`MyContainerClass`：

```
void SubscribeToCount(MyBaseClass item)
{
    item.PropertyChanged += (s,e) => 
        this.Sum += (e.NewValue - e.OldValue); 
} 
```

您为其他列中的所有对象调用此方法。（从问题中不清楚，但我假设有一个包含 and 实例的包装类，`MyClassA-F`您`MyContainerClass`将数据网格绑定到此包装类的集合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:00:01.543

好的，这就是我在盯着Eren的解决方案一段时间后所做的：我还为容器类实现了INotifyPropertyChanged，并`PropertyChanged`为每个对象注册了事件。

```
objA.PropertyChanged += updateCount;
objB.PropertyChanged += updateCount;
objC.PropertyChanged += updateCount; 
```

...等等。然后我添加了以下方法

```
private void updateCount(object sender, PropertyChangedEventArgs e)
{
    OnPropertyChanged("Count");
} 
```

现在我有了我想要的行为。

# math - 旋转父节点时相机lookAt目标发生变化

> ID：13376329
> 
> 赞同：0
> 
> 时间：2012-11-14T09:43:56.283
> 
> 标签：math, opengl, camera, rotation

我有以下问题。我有一个带有lookAt方法的相机，它工作正常。我有一个父节点，我将相机作为父节点。如果我在保持相机lookAt目标的同时旋转父节点，相机lookAt也会改变。那也不是我想要实现的。我需要它像在 Adob​​e AE 中一样工作，当您将相机设置为空对象时：当空对象旋转时，相机开始围绕目标旋转，同时仍然看着目标。我目前所做的是将父模型矩阵与从lookAt（）方法计算的相机模型矩阵相乘。我确定在将它们相乘之前我需要分解（或重构）其中一个矩阵。父模型或相机模型？这里的任何人都可以展示正确的方法吗？

更新：父级只是一个节点。子级是相机。AfterEffects 中的父级相机的工作方式如下：如果在相机看着目标时旋转父节点，相机实际上会根据父级旋转开始围绕目标旋转.在我的情况下，父旋转也改变了相机的lookAt方向，这不是我想要的。希望现在很清楚。UPDATE1：我使用 GL 4.0 ，没有固定的管道，我所有的数学都是手动完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:18:37.997

OpenGL 不是场景图；没有物体，*没有相机！*gluLookAt 甚至不是 OpenGL，它只是一个辅助函数，它不知道应用了任何转换层次结构。由于 OpenGL 不处理场景和 glPushMatrix，glPopMatrix 给人一种更大的错误感觉，您可能被引诱以错误的方式思考它。

做所有你期望的数学是*你的责任。*这是你要做的：

1.  您不应再使用 OpenGL 固定函数矩阵操作方法。它们已被弃用，并已从更高版本的 OpenGL 中删除！

2.  实现功能齐全的场景图。为此使用功能完整的矩阵数学库。最重要的是，您需要一种方法来确定转换层次结构树中任意两个节点之间的转换（矩阵）。最直接的方法是从起始节点和目标节点开始进行右关联乘法，同时遍历到顶部，直到到达共享祖先节点。然后，将反转的目标节点变换组合与起始节点的变换组合相乘。结果就是他们之间的转变。

既然您可以确定节点之间的转换，您就拥有了在该转换定义的空间内正确查看操作的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:44:35.817

实际的问题是视图和模型矩阵的状态。在其位置向量已经被否定后，我错误地反转了视图矩阵。所以正确的做法是将父节点模型矩阵与相机视图矩阵相乘，这样就解决了问题。

# objective-c - 带有 http 代码 405 的 Restkit 基本身份验证

> ID：13376330
> 
> 赞同：1
> 
> 时间：2012-11-14T09:43:56.817
> 
> 标签：objective-c, ios, request, restkit

我使用以下代码到一个界面以使用基本的 http 身份验证登录。

```
 RKRequest *loginRequest = [[RKRequest alloc] initWithURL:URL];
  loginRequest.timeoutInterval = REST_LOGIN_TIMEOUT;
    loginRequest.username = username;
    loginRequest.password = password;
    loginRequest.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
    loginRequest.method = RKRequestMethodPOST;
    loginRequest.onDidLoadResponse = ^(RKResponse *response) {
        // blabla
    }

    ....sending request... 
```

我第一次登录时，它就可以工作。但是，如果我再次执行相同的请求，我会收到 HTTP 状态代码 405。当我重新启动我的应用程序时，下一个请求会再次运行。所以我认为它会自动保存一些数据，比如会话令牌或内部的东西。我怎样才能重置这个？有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:20:38.290

它确实会从响应中自动存储任何 cookie（包括会话 cookie）。要清除它，请使用以下命令：

```
NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (NSHTTPCookie *cookie in cookieStorage.cookies)
{
    [cookieStorage deleteCookie:cookie];
} 
```

您当然可以先检查 cookie 以查看是否要删除它们。

# jquery - jQuery点击但不是第一个孩子

> ID：13376334
> 
> 赞同：0
> 
> 时间：2012-11-14T09:44:19.153
> 
> 标签：jquery, css-selectors

我有一个清单

**HTML**

```
<ul class="choices">
    <li><a href="#" data-flag="en"><img class="flag" src="/img/flag/United Kingdom.png" alt="" /></a></li>
    <li><a href="#" data-flag="de"><img class="flag" src="/img/flag/Germany.png" alt="" /></a></li>
    <li><a href="#" data-flag="es"><img class="flag" src="/img/flag/Spain.png" alt="" /></a></li>
    <li><a href="#" data-flag="fr"><img class="flag" src="/img/flag/France.png" alt="" /></a></li>
    <li><a href="#" data-flag="it"><img class="flag" src="/img/flag/Italy.png" alt="" /></a></li>
</ul> 
```

我正在尝试在 jQuery 中编写仅允许对除第一个孩子之外的所有内容执行操作的功能

我尝试了以下但无济于事

**jQuery**

```
$('.choices li:not(:first-child) a').click(function(e){
    e.preventDefault();
    console.log("clicked");
}); 
```

有人可以帮我解决我的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:46:10.973

您可以在给定的演示链接中检查代码没有任何问题。确保你有代码`$(document).ready(function(){ //your code...})`；

**[现场演示](http://jsfiddle.net/juPvn/1/)**

```
$('.choices li:not(:first-child) a').click(function(e){
    e.preventDefault();
    //console.log("clicked");
    alert("clicked");
});​ 
```

# cordova - Phonegap / Cordova JS 框架和设计

> ID：13376335
> 
> 赞同：0
> 
> 时间：2012-11-14T09:44:22.690
> 
> 标签：cordova, jquery-mobile, jqtouch, zepto

我想制作我的第一个 Phonegap 应用程序。它将是一个容器，最后将调用 API 并显示结果。没什么复杂的。

但是因为我已经阅读了这些问题，尤其是在 iOS 世界中，phonegap 有什么不那么流畅的滚动等问题。我希望你能与我分享一些经验，这样我就可以从一开始就避免圆顶大错误。

Firstable：你使用 jQuery mobile 还是 Zepto？我读过 Zepto 非常快，并且没有像 jQuery 那样的开销。你用什么样的库来设计？

我有自己的设计，但实际上是在 PSD 文件中。我应该尝试自己制作所有东西，还是应该使用 jQTouch 之类的框架？如果我使用 jQTouch，我可以按照我的 PSD 设计的外观设计元素吗？那里还有什么库，我可以用它在哪里进行自己的设计？

设计很薄，我有一些麻烦。我应该调整它并使用 CSS3 制作 HTML5，但它可以在 Phonegap 上运行吗？我也想使用一些模板引擎，比如[http://mustache.github.com/](http://mustache.github.com/)，这样模板可以更快地加载。这里有一些经验吗？

我看到 Wikipedia 使用了我在此处发布的许多功能，我认为它们可能足以创建具有良好性能的应用程序。

你的经验是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:39:28.087

我在顶部使用带有我自己的自定义框架 ( [http://github.com/tqc/ChondricJS](http://github.com/tqc/ChondricJS) ) 的 jQuery mobile 来提供大部分应用程序结构。

您可以通过此设置获得不错的性能，尤其是在 iOS 5+ 中，但是您可能会做错很多小事情，这会导致问题。背景图像和触摸滚动尤其对使用中的微小差异非常敏感。

PhoneGap 将为您提供一个共享的跨平台代码库，并让您利用您的 HTML 和 JavaScript 技能，但不要指望一切都感觉开箱即用 - 平台之间仍然存在差异，因此您肯定需要本地调试和了解移动 safari 的各种怪癖以制作精美的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:00:36.257

在 iOS 设备上滚动不良。是的，但我们在 Android 上遇到了更多问题。这取决于你的 DOM 树有多满。沉重的页面总是会带来麻烦，尤其是在旧手机上。

jQuery 或 Zepto：几乎没有区别。

放弃 jQuery Mobile！jQTouch：也许吧。请注意，在低端设备上，phonegap 应用程序运行速度很慢，无论它们如何优化。一些旧手机的 JavaScript 性能很差，如果可能的话，将业务逻辑外包给服务器并让设备只显示数据。我建议您自己完成大部分设计。保持 DOM 树很小。

总结：不要对phonegap期望太高，它永远不如原生应用。

# joomla2.5 - Joomla 2.5 获得了 JAuthentication: :__construct: 无法加载身份验证库

> ID：13376345
> 
> 赞同：0
> 
> 时间：2012-11-14T09:45:10.503
> 
> 标签：joomla2.5

我刚完成安装 Joomla 2.5，然后我以管理员身份登录，但收到错误消息

```
 "JAuthentication: :__construct: Could not load authentication libraries." 
```

和主页我收到以下消息

```
JERROR_LOADING_MENUS
Error loading component: , 1
Component not found 
```

我从 joomla.org 下载“Joomla_2.5.8-Stable-Full_Package.zip”。所以我试着做

> 找到“扩展”表。
> 
> 在 extantions 表中，转到第 3 页或第 4 页，找到“plg_authentication_joomla” - 从 0 到 1 启用它。

但不工作。

请给我提意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T05:31:19.673

你应该去joomla数据库并找到“扩展”表，你必须启用“plg_authentication_joomla”和“plg_user_joomla”从0到1。之后，它会工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-22T12:57:09.723

如果这发生在我个人身上，结果证明是一个糟糕的数据库转储。通过删除并重新导入数据库来修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T10:56:06.273

-------------------- 找到解决方案 -----------------------

1.  我备份在线网站的管理员文件夹
2.  在本地主机上安装新的 Joomla
3.  将在线网站的管理员文件夹替换为本地文件夹
4.  然后我可以登录到网站管理面板，但是首页上出现了一些错误并且网站没有出现。又搞砸了。
5.  然后我重新使用在线网站的管理员文件夹，令人惊讶的是，我的问题解决了（我可以登录到我的管理面板和网站看起来很好）

> [(Joomla 2.5) JAuthentication: :__construct: 无法加载身份验证库](https://stackoverflow.com/questions/23103217/joomla-2-5-jauthentication-construct-could-not-load-authentication-librar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T16:13:20.370

在 Extension 表中找到“plg_twofactorauth_totp”，将 Enabled 从 1 设置为 0，您可以无需身份验证即可访问您的管理员。如果您想重新设置身份验证，请尝试！（：

# php - Magento 中的可配置产品在我重新保存之前不显示属性

> ID：13376346
> 
> 赞同：0
> 
> 时间：2012-11-14T09:45:12.367
> 
> 标签：php, magento, e-commerce

我导入了很多可配置且简单的产品。现在我发现可配置产品不显示属性下拉菜单的问题。所有可配置产品都正确连接到属性。不知何故，我发现解决方案是转到可配置产品，然后按“保存”。然后一切正常。我应该如何解决这个问题？我知道我可以手动转到所有产品并保存它，但是我有这么多产品，所以我试图避免这种解决方案。感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:17:24.693

我弄清楚了问题所在。所以，也许有人会用这个。这是产品的错误进口，所以有些东西丢失了。我导出了所有产品，并将工作的可配置产品与不工作的产品进行了比较，并在那里发现了差异。之后，我将改进我的导入脚本以使其正常工作。

# php - 使用 PHP cURL 发布 JSON 并显示 JSON 响应

> ID：13376347
> 
> 赞同：2
> 
> 时间：2012-11-14T09:45:23.273
> 
> 标签：php, json, curl

我在 Stack Overflow 上看了很多遍，想找到我的问题的答案，但根本找不到。我正在尝试发布以下 JSON

```
<?php

$data_string = '{
        "jsonrpc": "2.0",
        "method": "login",
        "id": 1,
        "params": {
          "params": {
            "username": "4321",
            "password":  "1234"
          }
        }
      }';

$ch = curl_init('https://domain.com');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
'Content-Type: application/json',                                                                                
'Content-Length: ' . strlen($data_string))                                                                       
);                                                                                                                   

$result = curl_exec($ch);

echo $result;
?> 
```

我没有得到任何回应，即使它适用于 jQuery 和 AJAX。当我查看 Chrome 的开发者工具时，方法是 GET，这很奇怪，因为我在代码中将其设置为 POST。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T23:33:13.500

您是否能够在接收端看到您的 args 的样子？

就 Rookies 的回答而言——这可能与您通过邮递区的方式有关吗？通常 postfield 参数将期望键值数组或 urlencoded 字符串 (key1=val1&)。如果没有 JSON ($data_string) “值”的“键”，服务器是否知道如何接受后字段？您可以尝试以下方法吗？

```
// Personal preference here - arrays are easier for me to read
// Create a multi dem array dictionary with your values
$_dictionary = array("jsonrpc"=>"2.0",
                     "method" =>"login",
                     "id"     =>1,
                     "params" =>array("params"=>array("username"=>"4321","password"=>"1234"))
                    );

// json_encode 
$_dictionary = json_encode($_dictionary);

// your $data_string variable will now be in key=value  
$data_string = "mydata={$_dictionary}";

// set $data_string to your CURLOPT_POSTFIELDS... 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:08:56.007

尝试使用您的 JSON 字符串作为请求正文发出 GET 请求：

```
$data_string = '{
        "jsonrpc": "2.0",
        "method": "login",
        "id": 1,
        "params": {
          "params": {
            "username": "4321",
            "password":  "1234"
          }
        }
      }';

$ch = curl_init('https://domain.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
'Content-Type: application/json',                                                                                
'Content-Length: ' . strlen($data_string))                                                                       
);  
curl_setopt($ch, CURLOPT_POSTFIELDS,   $data_string );
curl_setopt($ch, CURLOPT_CUSTOMREQUEST,  'GET');

$result = curl_exec($ch);
echo $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T08:28:55.697

我知道这个问题已经有 2 年历史了，但它仍然有很多观点。

这看起来像一个 SSL 问题。你可以试试：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

欲了解更多信息，请阅读：[http ://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T12:19:29.907

试试这个功能

```
function request($url, $data, $method = "POST", $json = true) {
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 5);
    if ($json) {
        $data_value = json_encode($data, JSON_UNESCAPED_UNICODE);
        curl_setopt($curl, CURLOPT_HTTPHEADER, array(
            'Content-Type: application/json',
            'Content-Length: '.strlen($data_value)));
    } else $data_value = http_build_query($data);

    switch ($method) {
        case "POST":
            if ($json) curl_setopt($curl, CURLOPT_CUSTOMREQUEST, "POST");
            else curl_setopt($curl, CURLOPT_POST, 1);
            curl_setopt($curl, CURLOPT_POSTFIELDS, $data_value);
            break;
        case "PUT":
            curl_setopt($curl, CURLOPT_PUT, 1);
            break;
        default:
            $url = sprintf("%s?%s", $url, $data_value);
    }

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    $result = curl_exec($curl);
    if ($result == false) throw new Exception(curl_error($curl));
    curl_close($curl);

    return $result;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-14T09:58:33.023

CURLOPT_POSTFIELDS：必须喜欢这个“a=1111&b=2222”

```
example 1:
<?php
$useragent = 'PHP Client 1.0 (curl) ' . phpversion();
$post_string="a=1&b=1";
$url_with_get="http://xxx.xxx.com";
$result = @exec("curl -s --connect-timeout 10 --user-agent \"$useragent\" -d\"$post_string\" \"$url_with_get\"");
var_dump($result);
?>

example 2:
<?php
$useragent = 'PHP Client 1.0 (curl) ' . phpversion();
$post_string="a=1&b=1";
$url_with_get="http://xxx.xxx.com";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url_with_get);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
$result = curl_exec($ch);
curl_close($ch);

var_dump($result);
?>

example 3:
<?php
$content_type = 'application/x-www-form-urlencoded';
$content = "a=1&b=1";
$server_addr = "http://xxx.xxx.com";
var_dump(http_post($content_type, $content, $server_addr));

function http_post($content_type, $content, $server_addr) {

                $user_agent = 'PHP Client 1.0 (non-curl) ' . phpversion();
                $content_length = strlen($content);
                $context = array(
                        'http' => array(
                                        'method' => 'POST',
                                        'user_agent' => $user_agent,
                                        'header' => 'Content-Type: ' . $content_type . "\r\n" .
                                        'Content-Length: ' . $content_length,
                                        'content' => $content,
                                        'timeout' => 10,
                                )
                );
                $context_id = stream_context_create($context);
                $sock = fopen($server_addr, 'r', false, $context_id);

                $result = '';
                if ($sock) {
                        while (!feof($sock)) {
                                $result .= fgets($sock, 4096);
                        }
                        fclose($sock);
                }
                return $result;
        }
?> 
```

# asp.net - gridview 未在更新面板中更新

> ID：13376348
> 
> 赞同：1
> 
> 时间：2012-11-14T09:45:30.300
> 
> 标签：asp.net, gridview, updatepanel

我在更新面板中有一个网格视图，就像这样。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" BackColor="White"
                                            BorderColor="#D9EFFD" BorderStyle="Solid" BorderWidth="1px" CellPadding="3" DataSourceID="SqlDataSource1"
                                            Font-Names="Tahoma" Font-Size="8pt" GridLines="Horizontal" Width="100%" ForeColor="#010101"
                                            ShowHeaderWhenEmpty="True">
                                            <Columns>
                                                <asp:BoundField DataField="MODE_TPT_ENTRY" HeaderText="Balance" SortExpression="MODE_TPT_ENTRY">
                                                    <HeaderStyle HorizontalAlign="Left" />
                                                    <ItemStyle Font-Bold="True" HorizontalAlign="Left" Width="120px" ForeColor="#035BAC" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="OB" HeaderText="Opening" SortExpression="OB">
                                                    <ItemStyle HorizontalAlign="Right" Width="70px" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="ISSUED" HeaderText="Arrival" SortExpression="ISSUED">
                                                    <ItemStyle HorizontalAlign="Right" Width="70px" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="UNTARE" HeaderText="UNTARE" SortExpression="UNTARE" Visible="False" />
                                                <asp:BoundField DataField="TARE" HeaderText="Tare" SortExpression="TARE">
                                                    <ItemStyle HorizontalAlign="Right" Width="70px" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="BALANCE" HeaderText="Balance" SortExpression="BALANCE">
                                                    <ItemStyle HorizontalAlign="Right" Width="70px" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="RRY" HeaderText="Recovery" SortExpression="RRY">
                                                    <ItemStyle HorizontalAlign="Right" Width="70px" />
                                                </asp:BoundField>
                                                <asp:BoundField DataField="TRANSPORT_NO" HeaderText="TRANSPORT_NO" SortExpression="TRANSPORT_NO"
                                                    Visible="False" />
                                            </Columns>
                                            <FooterStyle BackColor="White" ForeColor="#000066" />
                                            <HeaderStyle BackColor="#D9EFFD" Font-Bold="True" ForeColor="#010101" HorizontalAlign="Right" />
                                            <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
                                            <RowStyle ForeColor="#101010" HorizontalAlign="Right" />
                                            <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
                                            <SortedAscendingCellStyle BackColor="#F1F1F1" />
                                            <SortedAscendingHeaderStyle BackColor="#007DBB" />
                                            <SortedDescendingCellStyle BackColor="#CAC9C9" />
                                            <SortedDescendingHeaderStyle BackColor="#00547E" />
                                        </asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString3 %>"
                                                ProviderName="<%$ ConnectionStrings:ConnectionString3.ProviderName %>" SelectCommand="SELECT * from cms_production">
                                            </asp:SqlDataSource>
</ContentTemplate>
</asp:UpdatePanel> 
```

和一个像这样在 5 秒后刷新面板的 JavaScript 函数

```
<script type="text/javascript">
window.setInterval(function () {
__doPostBack('<%= UpdatePanel1.ClientID %>', '');
        }, 5000);
</script> 
```

问题是，当我更改与 gridview 绑定的数据时，五秒钟后不会显示任何更改。任何人都可以告诉我我的代码中有什么问题或任何其他要添加到我的代码中以使 gridview 在更新面板中更新没有页面重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:20:25.130

每次回发时都需要手动更新 SqlDataSource。如果它背后没有真正的逻辑，您可以将以下内容添加到您的 Page_Load：

```
protected void Page_Load(object sender, EventArgs e)
{
       .....

    if (IsPostBack)
    {
        SqlDataSource1.DataBind();
        GridView1.DataBind();
    }
} 
```

如果您希望仅在 UpdatePanel 执行回发时完成此操作，请[使用此方法](https://stackoverflow.com/a/8184608/1379664)。

# javascript - 如何使用在打字稿中实现不同接口的两个对象来处理函数的调用？

> ID：13376352
> 
> 赞同：2
> 
> 时间：2012-11-14T09:45:51.303
> 
> 标签：javascript, typescript

我有以下接口：

```
interface Ixy 
{
    X: string;
    Y: string;
}
interface Ixz 
{
    X: string;
    Z: string;
} 
```

这个功能：

```
export function update(json: Ixy) {
    var a = json.X;
} 
```

从以下两个地方调用该函数：

```
export function update1(json: Ixy) {
   update(json);
}
export function update2(json: Ixz) {
   update(json);
} 
```

有人可以向我解释我可以使用打字稿进行这项工作的最佳方式吗？现在 update1 没问题，但 update2 显示签名不匹配。是我可以解决此问题以将 json 的类型更改为任何类型的唯一方法，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:55:02.077

有几种方法可以做到这一点。可能最好的方法是创建一个`Ixx`具有 common 属性的基本接口`X`，然后将其扩展为 create `Ixy`and `Ixz`，然后实现`update`with`Ixx`作为参数类型：

```
interface Ixx 
{
    X: string;
}

interface Ixy extends Ixx
{
    Y: string;
}
interface Ixz extends Ixx
{
    Z: string;
}

export function update(json: Ixx) {
    var a = json.X;
}

export function update1(json: Ixy) {
   update(json);
}
export function update2(json: Ixz) {
   update(json);
} 
```

这是有效的，因为`Ixy`and `Ixz`both extend`Ixx`等都满足条件`json is Ixx`。这也适用于扩展基类的类（或扩展基接口的类）。

目前关于 TypeScript 的文献还不多，所以也许对其他语言的接口进行一些一般性的介绍会很有用，因为这实际上是一个关于接口使用的跨语言问题，而不是任何特定于 TS 的问题。

Java 接口：[http ://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

C# 接口： http: [//www.codeproject.com/Articles/18743/Interfaces-in-C-For-Beginners](http://www.codeproject.com/Articles/18743/Interfaces-in-C-For-Beginners)

# php - 如何创建/改进具有所有/完整功能的数据库 PHP OOP 类

> ID：13376356
> 
> 赞同：1
> 
> 时间：2012-11-14T09:46:00.680
> 
> 标签：php, class

我是 PHP OOP 的新手。下面是我的第一个类文件。我想为这段代码增加更多的**灵活性**，添加函数以便我可以**运行查询**，甚至将结果（fetch_assoc/fetch_array）分配给一个数组（或 var 等）以供以后使用。

我在运行查询时遇到的问题是我无法将两个类放在一起（嵌套？）：`$db->Query->Select('myTable');`OR `$db->Query->Select('myTable')->Where($pageID);`OR`$db->Query->Select('myTable')->Where($pageID)->OrderBy('name');`

另外，如果您让我知道我在此代码中是否做错了什么以及改进建议，我将不胜感激，这样我将来可以编写更好的 php 类 =)。

```
<?php
require( $_SERVER['DOCUMENT_ROOT'] . '/database/database-connection-info.php');
 //This file (database-connection-info.php) contains $config[];

class db {
    private $db;
    private $type = 'read-only';
    //$config['db']['dbh']          = Database Host
    //$config['db']['dbn']          = Database Name
    //$config['db'][$type]['dbu']   = [User type][user name]
    //$config['db'][$type]['dbp']   = [User type][password]

    public function __construct($type = null) {
        global $config;
        $this->config = $config;
        $this->Connect($type);
    }

    public function Connect($type) {
    global $config;
        switch( $type ) {
        case 'admin':
        $this->type = 'admin';
        $this->db = mysql_connect( $this->config['db']['dbh'] , $this->config['db'][$type]['dbu'] , $this->config['db'][$type]['dbp'] );
        return $this->db;

        default:
        $this->type = 'read-only';
        $type = 'read';
        $this->db = mysql_connect( $this->config['db']['dbh'] , $this->config['db'][$type]['dbu'] , $this->config['db'][$type]['dbp'] );
        return $this->db;
        }
    }

    public function Close() {
        mysql_close();
        mysql_close($this->db);
        $this->type = 'Closed';
    }

    public function Type() {
        return "<b>Database connection type</b>: " . $this->type . "<br/>";
    }

    public function Status() {
        if( !@mysql_stat($this->db) )
             { return "<b>Database connection status</b>: There is no database connection open at this time.<br/>"; }
        else { return "<b>Database connection status</b>: " . mysql_stat($this->db) . "<br/>"; }
    }
}

//For testing purposes
$db = new db(admin);
echo $db->Type();
echo $db->Status();
echo $db->Close();
echo $db->Status();
echo $db->Type();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:03:25.783

两项重大改进：

*   不要对配置使用全局，而是在构造函数中传递配置。这允许您将 db 对象实例化到其他数据库，而无需破解全局。

*   停止使用本机 [depreacted]`mysql_*`库并切换到现代 API，例如[PDO](http://uk1.php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。[这是一个很好的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，尤其是在您的情况下，因为您是从本机的`mysql_*`角度来的。

我也注意到了这一点：

```
$db = new db(admin); 
```

PHP 将在这里寻找一个常量`admin`，它会找不到它并假设该字符串`admin`是预期的。如果你曾经定义过一个常量，`admin`那么你会在那里观察到奇怪的行为（或者你可能认为是字符串）。更改为字符串：

```
$db = new db('admin'); 
```

# javascript - IE中的文件上传问题

> ID：13376361
> 
> 赞同：1
> 
> 时间：2012-11-14T09:46:20.557
> 
> 标签：javascript, jquery, asp.net, .net, file-upload

我正在尝试在 asp.net 中上传文件，但我正在使用 jquery 检查文件大小。它适用于所有浏览器，除了 IE。下面是我用来验证文件大小的代码。

.aspx

```
<asp:FileUpload ID="fuAttachment" runat="server" ClientIDMode="Static" onchange='test('fuAttachment')' /> 
```

.js

```
function test(controlID) {
    debugger;
    var isSuccess = false;
    var hasFile = $('#' + controlID).val();

    if (hasFile != undefined) {

        var fileSize = ($('#' + controlID)[0].files[0].size / 1024);
        fileSize = (fileSize / 1024);
        var allowSize = 10;
        if (fileSize <= allowSize) {
            isSuccess = true;
        }
    }

    return isSuccess;
} 
```

它在ie中不起作用。任何人请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:56:08.750

IE 9 及以下版本不支持“文件”属性。它不支持选择多个文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:17:16.417

正如 Janith 上面提到的 IE9 不支持某些在其他浏览器中正常工作的 fileReader 相关属性。

如果你想做一些文件大小验证，那么你必须做一些服务器端脚本、图像大小验证、上传，这一切都必须由服务器端完成，否则 IE 可能不支持。

# c# - 为什么无法在我的本地主机上发送电子邮件？

> ID：13376362
> 
> 赞同：1
> 
> 时间：2012-11-14T09:46:21.477
> 
> 标签：c#

为什么我不能在本地主机上发送电子邮件我收到此错误：未指定 SMTP 主机

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage("fromEmail@email.com","toEmail@email.com", "Test", "Test Body");
            System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient();

            client.Send(mail);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:48:22.310

假设您想使用“本地主机”发送邮件

尝试：

```
System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient("localhost", 25); 
```

如果不：

如果邮件服务器不在您的本地主机上，请指定 smtp 客户端**ipAddress** 或主机名以及 smtp 服务**端口**。

**编辑：这里有一些使用 gmail 发送邮件的示例代码：**

```
SmtpClient clientesmtp = GetSmtpClient();
MailMessage msg = new MailMessage("from@gmail.com", "to@gmail.com", "Subject","body");
msg.IsBodyHtml = true;
clientesmtp.Send(msg);           

private static SmtpClient GetSmtpClient()
{
SmtpClient clientesmtp = new SmtpClient("smtp.gmail.com", 587);
clientesmtp.Credentials = new System.Net.NetworkCredential("user", "password");
clientesmtp.EnableSsl = true;
return clientesmtp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:53:10.113

默认情况下，SMTPClient[将使用](http://msdn.microsoft.com/en-us/library/k1c4h6e2.aspx)`<mailSettings>`应用程序或 ma​​chine.config 文件中定义的主机和端口。

> 此构造函数使用应用程序或机器配置文件中的设置初始化新 SmtpClient 的 Host、Credentials 和 Port 属性。

这些的[默认](http://msdn.microsoft.com/en-us/library/w355a94k.aspx)值*是*`localhost:25`. 但是，您可能已经编辑了您的 machine.config 以删除该主机。

您可以编辑 application.config 或 machine.config 以包含适当的 mailSettings 属性或在代码中指定适当的值。

自然，您需要在 localhost 上实际运行一个 SMTP 服务器，但是从您的问题来看，我假设您这样做了？

# php - AJAX 和 PHP：tic tac toe 将解决方案返回到下一个查询

> ID：13376364
> 
> 赞同：0
> 
> 时间：2012-11-14T09:46:29.460
> 
> 标签：php, javascript, ajax

我正在编写一个井字游戏并实现 Ajax 和 Php，这对我来说都是新的。我查看了其他一些讨论，但似乎找不到我的答案。我的 js 文件正在调用 php，而 php 又在调用数据库并提取问题和答案——用户必须回答问题才能轮到他/她。但是，我的程序会返回下一个问题的答案，而不是当前问题。

这是我的php：

```
$con = mysql_connect('localhost', '412ygutstei', '412ygutstei');
if ($con)
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
$questionNum = $_POST['q_id'];  
mysql_select_db("ygutstei_db", $con);

$result = mysql_query("SELECT q_id, question_type, text,description, answer FROM questions,questiontype WHERE q_id=".$questionNum."");
$row = mysql_fetch_array($result);
$question = $row['description']." ".$row['text']."?|".$row['answer'];
echo($question);

mysql_close($con); 
```

我的js函数，它将调用php：

```
function countDown() {
var element = document.getElementById(elem);

element.innerHTML = secs;
if(secs == 15){
    document.getElementById('playerDisplay').innerHTML= printEquation();
}
if(secs == 0){
    clearInterval(clock);
    turn++; 
    startTimer();       
    document.getElementById(answer).value = "";     
}
else{
    secs--;                     
} 
```

}

```
var expect = ""; var randomQNumber; var correctAnswer; var askQuestion = "";

function printEquation(){
    randomQNumber = randNumber(1,8);

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari 
        xmlhttp=new XMLHttpRequest(); 
    } 
    else {// code for IE6, IE5 
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); 
    } 
    xmlhttp.onreadystatechange=function() { 
        if (xmlhttp.readyState==4 && xmlhttp.status==200) { 
            var elements = xmlhttp.responseText.split("|");
            //elements[0] = document.getElementById("question")
            correctAnswer = elements[1];
            expect = correctAnswer;
            askQuestion = elements[0];
            //alert(correctAnswer); 
        }
    } 
    xmlhttp.open("POST","G_TicTacToe.php",true); 
    xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    xmlhttp.send("q_id="+randomQNumber);            

    if(turn % 2 == 0){
        return "X Plays: " + askQuestion + " = "; 
    }
    else{
        return "O Plays: " + askQuestion + " = ";
    }
}

function matchAnswer(a) {
var b = document.getElementById(a).value;
document.getElementById(a).innerHTML = b;
if(expect.toUpperCase() == b.toUpperCase()){
    clearInterval(clock);
    answeredQuestion = true;
    window.alert("Correct! ");
    document.getElementById(a).value = "";
    click();    
}
else{
    clearInterval(clock);
    window.alert("Incorrect! The correct answer was: " + expect);
    document.getElementById(a).value = "";
    playerTurn();
    startTimer();
} 
```

调用 matchAnswer() 的 html 代码：

```
<input type="text" id="answer">
            <button id="equals" onclick="matchAnswer('answer');";>Answer</button>
        </div>
        <div class="playerAnswer">      

        </div> 
```

例如：如果输出是：X 播放：State1 的名称是什么？- 回答伊利诺伊州，它将返回下一个问题的答案，“我最喜欢的动物是什么？ - 即企鹅。

任何建议将不胜感激。如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:35:40.400

我将通过您的代码并留下一些评论（有些很明显，但请耐心等待）。也许你会发现它们很有帮助。

这些变量是全局的。它们可以随时从任何功能中更改。

```
var expect = ""; var randomQNumber; var correctAnswer; var askQuestion = ""; 
```

下一部分是简单的 xhr 初始化。

```
function printEquation(){
    randomQNumber = randNumber(1,8);

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari 
        xmlhttp=new XMLHttpRequest(); 
    } 
    else {// code for IE6, IE5 
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); 
    } 
```

在做 ajax 时，您应该了解（异步）事件和回调。在这一部分中，您将一个回调函数附加到一个事件。回调是异步运行的，这意味着您不知道它何时运行。它可能在其余代码（或任何其他代码）之后或之前运行。

```
 xmlhttp.onreadystatechange=function() { 
        if (xmlhttp.readyState==4 && xmlhttp.status==200) { 
            var elements = xmlhttp.responseText.split("|");
            //elements[0] = document.getElementById("question")
            correctAnswer = elements[1];
            expect = correctAnswer;
            askQuestion = elements[0];
            //alert(correctAnswer); 
        }
    } 
```

下面的代码肯定是在上面的回调之前执行的，因为你还没有向服务器发送请求。

```
 xmlhttp.open("POST","G_TicTacToe.php",true); 
    xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    xmlhttp.send("q_id="+randomQNumber); 
```

这部分打印出**askQuestion**的当前值。我不确定您在代码中的哪个位置检查答案，但是当来自服务器的 ajax 响应到来并执行上述回调时，正确答案**变量**将保存下一个问题的值，而不是这个问题。

```
 if(turn % 2 == 0){
        return "X Plays: " + askQuestion + " = "; 
    }
    else{
        return "O Plays: " + askQuestion + " = ";
    }
} 
```

我不确定这是否对您有帮助。您可以将其余代码添加到问题中，我会给您一个正确的答案。

## 更新

在我看来，你做的一切都错了。您应该首先加载问题，然后设置计时器。

这一行在这里，它返回现有的*askQuestion*，但加载下一个问题和答案。

```
document.getElementById('playerDisplay').innerHTML= printEquation(); 
```

Ajax 调用不像您期望的那样工作，它不是一个返回结果的函数。相反，当您发送请求时，它会在准备好时回叫您。这都是错误的。

这是你应该做的：

1.  发送 ajax 调用以获取问题 (xmlhttp.send)
2.  当服务器响应问题（onreadystatechange 事件）时，启动计时器并显示问题
3.  用户现在看到问题并可以点击按钮
4.  用户回答或时钟超时
5.  返回 1

# c# - xunit.net 参数化单元测试：为每个组合显示红色/绿色？

> ID：13376365
> 
> 赞同：1
> 
> 时间：2012-11-14T09:46:32.790
> 
> 标签：c#, unit-testing, parameterized, xunit.net, parameterized-unit-test

[当您有 X 单元测试 * Y 配置时，参数化单元测试](http://en.wikipedia.org/wiki/Unit_testing#Parameterized_Unit_Testing_.28PUT.29)非常有用。

我有**3 个**单元测试，每个测试都必须在**5 个**特定情况下运行。
我使用 xUnit.net 的`Theory`/ `PropertyData` [feature](http://www.tomdupont.net/2012/04/xunit-theory-data-driven-unit-test.html)，效果很好。

**问题：**在 Test Runner UI 中，每个单元测试都有一个绿色/红色符号，表示**3**。
这使得评估进度变得困难：符号为红色，直到所有配置都完美运行。
我想要**15 个**符号，每个单元测试 * 配置一个，以了解哪个特定组合出错了。

如何获得**15 个**符号？
我可以使用另一个 xunit.net UI。

![在此处输入图像描述](../Images/0b27f61a92ab6e997899ac2f27dbae67.png)

**2013 更新**：我最终切换到具有此功能的 NUnit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:43:52.210

去投票[这个描述你的问题的问题](http://xunit.codeplex.com/workitem/9789)。

# c# - 使用 ASP.NET 4.5 捆绑和 CDN（例如 CloudFront）

> ID：13376368
> 
> 赞同：33
> 
> 时间：2012-11-14T09:46:34.140
> 
> 标签：c#, amazon-cloudfront, asp.net-4.5, bundling-and-minification

ASP.NET 4.5 有一个很棒的新捆绑功能，并且似乎支持使用 CDN。Microsoft 给出的将捆绑功能与 CDN 结合使用的示例是这样的

```
public static void RegisterBundles(BundleCollection bundles)
{
  //bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
  //            "~/Scripts/jquery-{version}.js"));

  bundles.UseCdn = true;   //enable CDN support

  //add link to jquery on the CDN
  var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";

  bundles.Add(new ScriptBundle("~/bundles/jquery",
            jqueryCdnPath).Include(
            "~/Scripts/jquery-{version}.js"));

  // Code removed for clarity.
} 
```

这似乎表明您需要明确告诉它 CDN 上文件的路径。

CloudFront CDN（我想还有很多其他的）为您提供了一个镜像您自己的子域。当你击中`http://uniquesubdomain.cloudfront.net/js/myfile.js?v=1`它时`http://mydomain.com/js/myfile.js?v=1`

这样，您可以简单地为所有链接添加前缀，`http://uniquesubdomain.cloudfront.net/`并且您的文件是来自 CloudFront 的服务器。

ASP.NET 4.5 捆绑功能是否与这种类型的 CDN 兼容？是否有一种内置方法可以将捆绑功能作为其与 CDN 域的所有链接的前缀？

例如。

```
bundles.UseCdn = true;
var myBundle= new ScriptBundle("~/bundles/js", "https://uniquedomain.cloudfront.net/");
myBundle.Include("~/js/file1.js");
myBundle.Include("~/js/file2.js"); 
```

会导致

```
 <script src="https://uniquedomain.cloudfront.net/bundles/js?v=6y-qVPSK3RYOYHfPhOBDd92H4LjEjs-D3Hh2Yml6CXA1"></script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-31T16:48:23.277

此功能不是内置的，但可以通过几个小帮助方法实现。这是我现在正在使用的：

```
public static class Cdn
{
    private const string CdnRoot = "//cloudfrontdomainhere.com";

    private static bool EnableCdn
    {
        get
        {
            bool enableCdn = false;
            bool.TryParse(WebConfigurationManager.AppSettings["EnableCdn"], out enableCdn);
            return enableCdn;
        }
    }

    public static IHtmlString RenderScripts(string bundlePath)
    {
        if (EnableCdn)
        {
            string sourceUrl = CdnRoot + Scripts.Url(bundlePath);
            return new HtmlString(string.Format("<script src=\"{0}\"></script>", sourceUrl));
        }

        return Scripts.Render(bundlePath);
    }

    public static IHtmlString RenderStyles(string bundlePath)
    {
        if (EnableCdn)
        {
            string sourceUrl = CdnRoot + Styles.Url(bundlePath);
            return new HtmlString(string.Format("<link href=\"{0}\" rel=\"stylesheet\" />", sourceUrl));
        }

        return Styles.Render(bundlePath);
    }
} 
```

请注意，我在配置文件的 appSettings 部分中有自己的配置设置，称为 EnableCdn。从 Razor 视图调用时，这会产生正确的输出，将 CDN 域附加到路径上。

在您的 Razor 文件中，只需执行 Cdn.RenderScripts("~/pathtoscriptbundle")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T00:16:39.763

另一种选择是像这样使用 Scripts 或 Styles RenderFormat 方法。这对我来说特别有用，因为我偶尔自定义 tagFormat 以将引用包装在条件 html 注释中，或者附加其他属性，如 media="screen,print"。代码更简单，因为您可以在字符串变成 HTML 编码字符串之前对字符串执行尴尬的替换。

或者，您可以将 tagFormat 作为默认值是下面提到的字符串常量的那些方法的可选参数。

```
public class BundleHelper
{
    public static readonly string StyleTagFormat = "<link href=\"{0}\" rel=\"stylesheet\"/>";
    public static readonly string ScriptTagFormat = "<script src=\"{0}\"></script>"

    /// <summary>
    /// Customised script bundle rendering method with CDN support if optimizations and CDN enabled.
    /// </summary>
    public static IHtmlString RenderScriptFormat(string tagFormat, string path)
    {
        // Check for absolute url to ensure the standard framework support for CDN bundles, with a CdnPath still works.
        if (AppSettings.Bundling.EnableCdn && !UriHelper.IsAbsoluteUrl(Scripts.Url(path).ToString()))
        {
            tagFormat = tagFormat.Replace(" src=\"{0}\"", String.Format(" src=\"{0}{{0}}\"", AppSettings.Bundling.BundlesCDNPrefixUrl));
        }
        return Scripts.RenderFormat(tagFormat, path);
    }

    /// <summary>
    /// Customised styles bundle rendering method with CDN support if optimizations and CDN enabled.
    /// </summary>
    public static IHtmlString RenderStyleFormat(string tagFormat, string path)
    {
        // Check for absolute url to ensure the standard framework support for CDN bundles, with a CdnPath still works.
        if (AppSettings.Bundling.EnableCdn && !UriHelper.IsAbsoluteUrl(Styles.Url(path).ToString()))
        {
            tagFormat = tagFormat.Replace(" href=\"{0}\"", String.Format(" href=\"{0}{{0}}\"", AppSettings.Bundling.BundlesCDNPrefixUrl));
        }
        return Styles.RenderFormat(tagFormat, path);
    }
}

public class UriHelper
{
    /// <summary>
    /// Determines whether a url is absolute or not.
    /// </summary>
    /// <param name="url">Url string  to test.</param>
    /// <returns>true/false.</returns>
    /// <remarks>
    /// Examples:
    ///     ?IsAbsoluteUrl("hello")
    ///     false
    ///     ?IsAbsoluteUrl("/hello")
    ///     false
    ///     ?IsAbsoluteUrl("ftp//hello")
    ///     false
    ///     ?IsAbsoluteUrl("//hello")
    ///     true
    ///     ?IsAbsoluteUrl("ftp://hello")
    ///     true
    ///     ?IsAbsoluteUrl("http://hello")
    ///     true
    ///     ?IsAbsoluteUrl("https://hello")
    ///     true
    /// </remarks>
    public static bool IsAbsoluteUrl(string url)
    {
        Uri result;
        return Uri.TryCreate(url, UriKind.Absolute, out result);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:51:31.767

可能不是您正在寻找的内容，但许多 CDN 现在使用 DNS 充当反向代理，因此您不必明确链接您的资产。我知道 Cloudflare 会这样做，我相信其他人也会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T04:57:51.783

这是不可能的，但是您可以使用文本模板将 JS 文件组合为一个 js 并将其放在 CDN 上，而不是使用 bundle。

```
<#@ ... hostspecific="true"  extension=".js">

<#

    Write (System.IO.File.ReadAllText("a.js"));
    Write (System.IO.File.ReadAllText("b.js"));
 #> 
```

# cocoa - 正确使用 NSError 和非 BOOL 返回函数

> ID：13376369
> 
> 赞同：0
> 
> 时间：2012-11-14T09:46:35.130
> 
> 标签：cocoa, foundation, nserror

查看[错误处理编程指南](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html)，我了解到在以下情况下，我绝不能评估 NSError 参数**theError**，除非返回值为 NO

```
BOOL success = [myDoc writeToURL:[self docURL] ofType:@"html" error:&theError]; 
```

当返回值不是成功的 BOOL 而是一个集合对象时，会发生什么情况？

以 [NSIncrementalStore 获得PermanentIDsForObjects:error] 为例。我不能使用**error**参数评估错误。我应该寻找什么？我想我可以收到一个 nil 指针或一个空数组。在这种情况下，空数组似乎不是一个好的响应，尽管在其他函数中空数组可能是一个好的响应。我可以[读到](http://developer.apple.com/library/mac/#documentation/CoreData/Reference/NSIncrementalStore_Class/Reference/NSIncrementalStore.html#//apple_ref/occ/instm/NSIncrementalStore/obtainPermanentIDsForObjects%3aerror%3a)，如果发生错误，**错误**对象将包含对所发生情况的描述，但我不太清楚如何才能发现错误确实发生了。

在此类情况下指示错误的正常 Cocoa 或 Foundation 方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:54:21.463

对于该方法，您应该返回一个包含与传入的对象一样多的项目的数组。我会说，如果您不这样做（数组为 nil 或为空），那么您将处于错误情况，因为您违反了文档所说的将发生的情况：

> 包含数组中对象的对象 ID 的数组。
> 
> 返回的数组必须以与对象在数组中出现的顺序相同的顺序返回对象 ID

# android - 如何处理“扩展 Activity”的 Android Java 对象？

> ID：13376377
> 
> 赞同：0
> 
> 时间：2012-11-14T09:46:58.417
> 
> 标签：android, object, android-activity, lifecycle

假设我有两个课程：

Class **Show**是我正常的 Android 活动。

Class **Work**是一个 Java 类，它做了很多工作：

```
public class Work extends Activity {...} 
```

如您所见，**Work**扩展了 Activity。那是因为它需要一些只存在于 Activity 中的方法（我不是指关于 UI 的方法）。

在我的活动**秀**中，我制作了一个班级**工作的对象**

```
protected void onCreate(){
      Work mWork = new Work();
      mWork.doSomething();
} 
```

我的问题：我应该如何处理我的对象**Work**的生命周期？它是像一个普通的 Java 对象，我不必关心它的生命周期，还是像一个普通的活动，我必须调用 finish()？我很困惑，因为两者兼而有之。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:09:56.693

您应该阅读[本文](http://developer.android.com/reference/android/app/Activity.html)以了解活动生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:58:11.713

根据我们在评论中的讨论，这里的答案是将您当前活动的上下文传递给目标类，并通过该上下文实例使用可访问的方法来执行您想要的任何任务，因为 Activity 类基本上扩展了应用程序上下文。

例如（在不扩展 Activity 的类中）我可以添加：

```
myLocationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE); 
```

并随意使用`myLocationManager`。此外，通过这种方式，本地创建的对象将在销毁主 Activity 时设置为垃圾收集。

认为值得拥有其他人可以参考的答案，而不是浏览评论。

# php - 在 php 5.4 中从空值创建默认对象

> ID：13376379
> 
> 赞同：1
> 
> 时间：2012-11-14T09:47:06.440
> 
> 标签：php

我有一些这样的代码：

```
function getAuthorizedPFComponents($pfState)
    {
        $authorizedPFComponents = new \stdClass();
                                                                                                           $compTypeMap=array('platform'=>'pfAuthorizations','mainSite'=>'mainSiteAuthorizations','microSites'=>'microSiteAuthorizations','apps'=>'appAuthorizations');
        foreach($compTypeMap as $compType=>$tagName)
        {
            $authorizationsNode=$this->pfAuthXMLDOM->getElementsByTagName($tagName)->item(0);
            foreach($authorizationsNode->getElementsByTagName('authorizations') as $pfComponentAuthElem)
            {
                foreach($pfComponentAuthElem->getElementsByTagName('allow') as $allow)
                {

                    switch($allow->getAttribute('orgCode'))
                    {
                        case 'K_ALL':
                        {
                            $authorizedPFComponents->$compType->{$pfComponentAuthElem->getAttribute('pfComponentCode')}->storeCode=$allow->getAttribute('storeCode');
                           }

                        } 
```

它显示一个警告：

```
Warning: Creating default object from empty value 
```

警告追溯到下面的代码`case K_ALL:`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:15:40.423

这对于仅仅发表评论来说太长了，所以当它不再有用时我会删除它。

您应该做的第一件事是使代码更简单；有很多事情发生在一个声明中：

```
$compCode = $pfComponentAuthElem->getAttribute('pfComponentCode');
$storeCode = $allow->getAttribute('storeCode'); 
```

并添加调试代码：

```
var_dump($authorizedPFComponents->$compType);
var_dump($authorizedPFComponents->$compType->$compCode);

$authorizedPFComponents->$compType->$compCode->storeCode = $storeCode; 
```

* * *

考虑这段代码：

```
$x->y = 'test'; 
```

如果`$x`未定义，则会发出警告：

```
Warning: Creating default object from empty value in xxx 
```

您的参考链也是如此：

```
$authorizedPFComponents->$compType->$compCode->storeCode 
```

如果这些路径中的任何一个为空，则下一个`->yyy`将导致该警告。

# javascript-events - 弹出菜单干扰正确的 onMouseOut

> ID：13376380
> 
> 赞同：1
> 
> 时间：2012-11-14T09:47:14.560
> 
> 标签：javascript-events

我的 html 中有一个 INPUT 元素，我为这个 INPUT 使用 onMouseOut 事件。一切都很好，除了弹出菜单（上下文菜单），当它在 INPUT 中的弹出窗口 - INPUT的**onMouseOut**被提升时（可能是正确的 - 上下文菜单中的位置比 INPUT 超出边界）。如果 INPUT 上弹出上下文菜单，如何**不提高 INPUT-element.onMouseOut？**

```
 <script type="text/javascript">
 function onMouseOut(event) {
       var e = event.toElement || event.relatedTarget;
      if (e.parentNode == this || e == this) {
         return;
      }
    alert('MouseOut');
  }

  document.getElementById("first").addEventListener('mouseout', onMouseOut, true);
  \\ this string does not have any effect on my drupal6
  \\ how I can directly use this function to my INPUT below?
  }

  </script>

 <input type="text" id="first" size="12" readonly="readonly" value="01234567890" title="Click here" onMouseOver="this.select();"> 
```

# bash - bash 中前导零的范围

> ID：13376396
> 
> 赞同：20
> 
> 时间：2012-11-14T09:48:24.690
> 
> 标签：bash

如何将前导零添加到bash范围？
例如，我需要循环 01,02,03,..,29,30
如何使用 bash 来实现？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-14T09:58:12.977

在最新版本的 bash 中，您可以执行以下操作：

```
echo {01..30} 
```

输出：

```
01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 
```

或者如果它应该用逗号分隔：

```
echo {01..30} | tr ' ' ',' 
```

这也可以通过[参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)来完成：

```
a=$(echo {01..30})
echo ${a// /,} 
```

输出：

```
01,02,03,04,05,06,07,08,09,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-14T10:04:29.253

另一个**seq**技巧将起作用：

```
 seq -w 30 
```

如果您查看手册页，您将看到 -w 选项完全符合您的要求：

```
-w, --equal-width
              equalize width by padding with leading zeroes 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-14T09:53:00.623

您可以使用 seq 的格式选项：

```
seq -f "%02g" 30 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T09:56:13.293

“纯 bash” 方式将是这样的：

```
echo {0..2}{0..9} 
```

这将为您提供以下信息：

```
00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 
```

删除前 00 并添加后 30 并不难！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T09:51:17.300

这有效：

```
printf " %02d" $(seq 1 30) 
```

# java - 禁用时如何阻止 JButton 变灰？

> ID：13376397
> 
> 赞同：3
> 
> 时间：2012-11-14T09:48:26.810
> 
> 标签：java, swing, user-interface, jbutton, disabled-control

我必须写一个纸牌游戏。单击卡片时会生成随机卡片图像，但由于您只能单击一次卡片，因此该按钮设置为单击后禁用。单击后如何阻止卡片图像变灰，以使新生成的卡片图像清晰可见？

```
//Actions performed when an event occurs
public void actionPerformed(ActionEvent e)
{

    if (e.getSource() == card1)
    {
    randomInteger();
    card1.setIcon(cardImages[randomInt]);
    card1.setEnabled(false);

    }
    else if (e.getSource() == card2)
    {
    randomInteger();
    card2.setIcon(cardImages[randomInt]);
    card2.setEnabled(false);
    }
    else if (e.getSource() == card3)
    {
    randomInteger();
    card3.setIcon(cardImages[randomInt]);
    card3.setEnabled(false);
    }
    else if (e.getSource() == card4)
    {
    randomInteger();
    card4.setIcon(cardImages[randomInt]);
    card4.setEnabled(false);
    }
    else
    {
    randomInteger();
    card5.setIcon(cardImages[randomInt]);
    card5.setEnabled(false);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T10:23:24.380

您只需将按钮的禁用图标设置为与按钮图标相同的值。看这个例子：

在左侧一个按钮，我在其中设置了图标和 disabledIcon。在右边我只设置了图标：

![例子](../Images/76e4b279e17cf855b4f481c581cb1bb6.png)

```
import java.awt.BorderLayout;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class TestDisabledButtons {

    public static final String CARD_URL = "http://assets0.wordansassets.com/wvc-1345850020/wordansfiles/images/2012/8/24/156256/156256_340.jpg";

    protected void createAndShowGUI() throws MalformedURLException {
        JFrame frame = new JFrame("Test button");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ImageIcon imageIcon = new ImageIcon(new URL(CARD_URL));
        JButton button = new JButton(imageIcon);
        JButton button2 = new JButton(imageIcon);
        button.setDisabledIcon(imageIcon);
        button.setEnabled(false);
        button2.setEnabled(false);
        frame.add(button, BorderLayout.WEST);
        frame.add(button2, BorderLayout.EAST);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new TestDisabledButtons().createAndShowGUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

# php - 使用 FuelPHP 上传多个文件

> ID：13376403
> 
> 赞同：1
> 
> 时间：2012-11-14T09:48:58.277
> 
> 标签：php, file-upload, upload, foreach, fuelphp

我目前有一个脚本，允许我将 1 个文件上传到我的服务器。它工作得很好。

这是我用来执行此操作的代码的一部分：

```
 // Custom configuration for this upload
        $config = array(
            'path' => DOCROOT.DS.'foldername/tomove/your/images',
            'randomize' => true,
            'ext_whitelist' => array('img', 'jpg', 'jpeg', 'gif', 'png'),
        );

        Upload::process($config);

        // if a valid file is passed than the function will save, or if its not empty
        if (Upload::is_valid())
        {
            // save them according to the config
            Upload::save();

           //if you want to save to tha database lets grab the file name
            $value = Upload::get_files();  
            $article->filename = $value[0]['saved_as'];
         } 
```

我现在想知道，**如何遍历多个文件并将它们上传到我的服务器？**

我猜想使用*foreach*循环，但恐怕我对此有点不知所措。

最终，我计划将这些文件名存储在我数据库的单独表中。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:05:20.513

您的代码中已经有了结果。

你已经存储了

```
$value = Upload::get_files(); 
```

所以

```
$value = Upload::get_files();  

foreach($value as $files) {
   print_r($files); 
} 
```

你会得到你需要的一切

# sql - 在 SQL Server 数据库的非 IDENTITY 类型字段中重新分配 ID

> ID：13376409
> 
> 赞同：7
> 
> 时间：2012-11-14T09:49:19.360
> 
> 标签：sql, sql-server, sql-server-2008r2-express

***警告：这个悲惨故事包含代码异味和糟糕的设计决策以及技术债务的示例。***

如果您熟悉 SOLID 原则，请练习 TDD 并对您的工作进行单元测试，***请勿继续阅读***。除非你想对某人的不幸大笑，并为自己的伟大而幸灾乐祸，因为你知道你永远不会为你的继任者留下如此巨大的一堆废话。

所以，如果你坐得舒服，那我就开始。

在过去 7 个月里我继承并支持和修复错误的这个应用程序中，一个 6 个半月前离开的开发人员给我留下了一个令人毛骨悚然的问题。是的，在我开始后 2 周。

反正。在这个应用程序中，我们有`clients`,`employees`和`visits`表。

还有一个称为`AppNewRef`（或类似名称）的表...等待它...包含用于其他每个表的下一个记录 ID。因此，可能包含以下数据：-

```
TypeID    Description     NextRef
   1      Employees       804
   2      Clients         1708
   3      Visits          56783 
```

当应用程序为 创建新行时`Employees`，它会在`AppNewRef`表中查找，获取值，使用该值作为 ID，然后更新`NextRef`列。`Clients`和`Visits`所有其他要使用的表都`NextID`存储在这里。

是的，我知道，这个数据库上没有自动编号`IDENTITY`列。一切都是以“当它是一个 Access 应用程序时”为借口。这些 ID 保存在 (VB6) 代码中。因此，最多可能有 20 亿条 1.47 亿条记录。好的，这似乎工作得很好。（除了应用程序正在更新和处理锁定/更新等，而不是数据库的事实）

因此，我们的用户非常高兴地创建`Employees`,`Clients`等`Visits`。`Visits ID`每次稳定增加几十个。然后问题就发生了。我们的客户端在创建批量访问时导致数据库损坏，因为服务器正在很好地运行，并且应用程序变得无响应。所以他们使用任务管理器杀死应用程序，而不是耐心等待。当然，该应用程序似乎确实被锁定了。

继续到今年早些时候，开发人员 Tim（真实姓名。此处不保护有罪者）开始修改代码以分阶段进行批量更新，以便 UI 保持“响应式”。然后四月来了，他正在处理他的通知（你现在可以想象这个场景，不是吗？）他正在忙着完成更新。

4 月底和 5 月初，我们更新了一些客户。在接下来的几个月中，我们会更新越来越多的内容。

在蒂姆（真名，记住）和我（蒂姆离开前两周开始）以及一周后开始的另一位新开发人员看不见的情况下，访问表中的 ID 开始大幅上升。巨大的，我的意思是一次10000、20000、30000。有时几十万。

下面的图表说明了使用的 ID 的快速增长。

![看看他的图表](../Images/1a8efc3a7e195a3f60a93f1b7abeb334.png)

十一月滚动。客户致电技术支持并报告他遇到了错误。我查看错误消息并询问数据库，以便调试代码。我发现这个值太长了。我做了一些查询，提取信息，将其放入 Excel 并绘制图表。

我不认为让代码处理任何长于 ID 的东西是正确的方法，因为这个应用程序将该 ID 传递到其他 DLL 和 OCX 并破坏那些接口似乎是一个我没有伤害的整个世界不想现在遇到。

我正在调查的一个潜在想法是尝试修改 ID，以便我可以将它们降低到较低级别。基本上填补了空白。使用`ROW_NUMBER`功能

我正在考虑为每个表添加一个新列，这些表具有对这些访问 ID 的外键引用*（不是正确的外键，这些约束在此数据库中不存在）。*这个新列可以存储访问 ID 的旧（当前）值（哦，只是为了混淆事物；在某些表上它被称为`EventID`，而在某些表上它被称为`VisitID`）。

然后，对于引用 that 的每个其他表`VisitID`，更新为新值。

想法？建议？T-SQL 的片段帮助大家感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:20:59.973

**选项一：**

显式约束所有外键关系，并将它们设置为`ON UPDATE CASCADE`.

这意味着每当您更改 ID 时，外键都会自动更新。

然后你只需运行这样的东西......

```
WITH
  resequenced AS
(
  SELECT
    ROW_NUMBER() OVER (ORDER BY id) AS newID,
    *
  FROM
    yourTable
)
UPDATE
  resequenced
SET
  id = newID 
```

***我已经很久***没有这样做了，所以我忘记了它是否会在更新过程中导致两个具有相同 id 值的记录出现问题。如果是这样，你可以先做这样的事情......

```
UPDATE yourTable SET id = -id 
```

**选项二：**

确保***没有***明确定义任何外键关系。如果是，请记下它们并删除它们。

然后做类似...

```
CREATE TABLE temp AS
  newID INT IDENTITY (1,1),
  oldID INT
)

INSERT INTO temp (oldID) SELECT id FROM yourTable

/* Do this once for the table you are re-identifiering              */
/* Repeat this for all fact tables holding that ID as a foreign key */
UPDATE
  factTable
SET
  foreignID = temp.newID
FROM
  temp
WHERE
  foreignID = temp.oldID 
```

然后重新应用任何现有的外键关系。

这是一个非常可怕的选择。如果您忘记更新表，您只是破坏了数据。但是，您***可以***给该`temp`表起一个更好听的名称并保留它。

祝你好运。愿主怜悯你的灵魂。如果你在黑暗的小巷里遇见他，蒂姆也是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:15:03.903

我会创建一个数字表，它只有一个从 1 到任何最大值的序列，增量为 1 很长，然后更改获取 visitid 的最大值的逻辑，也许其他人在数字和访问表之间进行正确连接. 然后你可以只寻找那个数字的 te min

```
select min(number) from visits right join numbers on visits.id = numbers.number 
```

这样，您无需更改任何其他表格即可填补所有空白。

但我只想重做整个数据库。

# c++ - 将头文件（.h）放在另一个文件（.h 或 .cpp）的开头和结尾之间的区别

> ID：13376414
> 
> 赞同：1
> 
> 时间：2012-11-14T09:49:55.670
> 
> 标签：c++

最近，我在 mac os 上编译 libfacebookcpp。我发现了一个我无法理解的奇怪用法。有两个文件，AuthorizedObject.hpp 和 List.hpp。在 AuthorizedObject.hpp 文件的末尾，有一行：#include "List.hpp"。现在我编译成功了。但是当我将该行移到开头时，就会发生错误。代码的骨架是：

```
//AuthorizedObject.hpp
class AuthorizedObject
{
public:
... 
template<class TType>
void _GetConnection(const ::std::string& uri, List<TType> *list) const
{
    LIBFACEBOOKCPP_CHKARG(list);

    Json::Value value;
    request_->GetResponse(uri, &value);

    list->Deserialize(*this, value);
}
...
}
#include "List.hpp" //end

----------------------------------------------------------
//List.hpp 
#include "AuthorizedObject.hpp"
class LIBFACEBOOKCPP_API List : public AuthorizedObject
{
private: // private classes
...
} 
```

我猜如果把那行（#include "List.h"）放在 AuthorizedObject.hpp 的开头，这两个文件按圆圈相互包含。所以编译器不知道怎么编译。但是把那行放在最后会解决这个问题吗？为什么？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:56:13.843

不同之处在于定义类/函数/...的顺序，例如：

```
#include "one.h"
void foo(bar &);

// Will result into:
class bar {};
void foo(bar&); 
```

这是有效的代码。另一方面：

```
void foo(bar &);
#include "one.h"

// Will result into statements in different order:
void foo(bar&);
class bar {}; 
```

这意味着`class bar`在声明之前使用，因此会出错。您可能还需要确保不会对任何声明进行两次处理（[UmNyobe 已经部分涵盖了该部分](https://stackoverflow.com/a/13376496/1149736)）：

```
#if !defined( MY_HEADER_INCLUDED_)
# define MY_HEADER_INCLUDED_
// Complete content goes here
#endif /* !defined( MY_HEADER_INCLUDED_) */ 
```

这样，当您第一次包含文件时，`MY_HEADER_INCLUDED_`将不会被定义（内容将被“放置”在代码中）。第二次（您将把它包括在圆圈中）`MY_HEADER_INCLUDED_`将被定义，因此将跳过完整的正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:56:37.783

你是对的，这就是问题所在。你错了，编译器不知道如何编译——它知道，你只是用错了:)。

开头的包含防护`AuthorizedObject.hpp`（我假设它具有包含防护或`#pragma once`指令）将定义`AUTHORIZED_OBJECT_H`（或类似的）。之后，您包含`List.h`，而后者又包含 header `AuthorizedObject.hpp`。因为已经定义了包含保护宏`AuthorizedObject`，所以跳过了的定义，所以`List`不知道类型，但是使用它，所以你得到错误。

如果你把 include 放在最后，说明 的定义`AuthorizedObject`已经被编译器处理过了，所以在里面使用它`List.h`是有效的。

# python - BeautifulSoup 和转换 HTML 实体的奇怪行为

> ID：13376417
> 
> 赞同：1
> 
> 时间：2012-11-14T09:50:02.597
> 
> 标签：python, django, character-encoding, beautifulsoup, cherokee

我在从 HTML 转换特殊字符时遇到了一个奇怪的问题。我有一个 Django 项目，其中文本以 HTML 编码存储在 MySQL 数据库中。这是必要的，因为我不想丢失任何文本格式。

在初步步骤中，我必须对文本进行操作，例如计算位置，因此我需要先将其转换并从所有 HTML-Tags 中清除它。这是由 BeautifulSoup 完成的：

```
convertedText = str(BeautifulSoup(text.text, convertEntities=BeautifulSoup.HTML_ENTITIES))
convertedText = ''.join(BeautifulSoup(convertedText).findAll(text=True)) 
```

通过在我的 Django-default 测试服务器上工作一切正常，但是当我在生产服务器上运行它时，在转换特殊字符时会出现奇怪的行为。

一个例子：

**测试服务器**

MySQL-Query 给了我：`<p>bassverst&auml;rker</p>`

正确转换为：`bassverstärker`

**生产服务器**

MySQL-Query 给了我：`<p>bassverst&auml;rker</p>`

这被错误地转换为：`bassverst\ucc44rker`

不知何故，`&auml;`转换为`\ucc44`，这导致错误的字符。

**我的配置：**

测试服务器：

*   Django 内置解决方案 ( `python manage.py runserver`)
*   美丽汤 3.2.1
*   Python 2.6.5
*   Ubuntu 2.6.32-43-通用

生产服务器：

*   切诺基 1.2.101
*   美丽汤 3.2.1
*   蟒蛇2.7.3
*   Ubuntu 3.2.0-32-通用

因为我不知道错误发生在哪个级别，所以我想问一下是否有人可以帮助我解决这个问题。提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:19:29.967

我找到了解决这个问题的方法。我不知道 BeautifulSoup 有内置方法`getText()`。通过以下方式转换 HTML 时：

```
convertedText = BeautifulSoup(text.text, convertEntities=BeautifulSoup.HTML_ENTITIES).getText() 
```

一切在两台服务器上都可以正常工作。尽管这可行，但在处理问题中的示例时，了解为什么两台服务器的行为不同会很有趣。

不过，谢谢大家。

# matlab - 如何找到直方图的值？

> ID：13376419
> 
> 赞同：0
> 
> 时间：2012-11-14T09:50:11.650
> 
> 标签：matlab, user-interface, histogram

我使用 matlab 图形用户界面。这是我的代码：

```
data = guidata(gcbo);

for i = 1:5
  citra3{i} = imread(['D:\,,TA,,\Skripsi Saya\Minggu, 6 Mei 2012\Tugas_Akhir1\Pelatihan\temulawak\' num2str(i) '.jpg']);

    graylawak{i}=rgb2gray(citra3{i});
    citra3{i} = imresize(graylawak{i}, [20 15]); 
```

如何在不使用 imhist 的情况下找到图像直方图的值？因为我将使用直方图的值来计算相似度。我非常感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:35:05.320

我假设您想获得 citra3 数组的每个元素中的灰度值的直方图。为此，您可以执行以下操作：

```
% This turns the 2D image into a vector:
foo = reshape(citra3{i},1,numel(citra3{i}));
% As the pixel values are in uint8, they can have 8 bit (2^8=256) different values.
% Make one bin for each possible pixel value:
numberOfBins = 256;
% Convert the image data (uint8) to double precision values:
foobar = double(foo);
% Calculate the distribution of values within the bins:
[n,xout] = hist(foobar,numberOfBins); 
% Plot the resulting histogram:
bar(xout,n) 
```

这能回答问题吗？

# android - 将opencv视频设置为全屏android

> ID：13376420
> 
> 赞同：4
> 
> 时间：2012-11-14T09:50:16.113
> 
> 标签：android, video, opencv, fullscreen

我正在尝试使用 opencv 将视频设置为全屏。输入来自相机。它显示在中心的屏幕上，但不是全屏显示。相关代码：

```
public class Sample3Native extends Activity implements CvCameraViewListener {
private static final String TAG = "OCVSample::Activity";

private Mat                    mRgba;
private Mat                    mGrayMat;
private Mat                    mFinalMat;

private CameraBridgeViewBase   mOpenCvCameraView;

private BaseLoaderCallback     mLoaderCallback = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");

                // Load native library after(!) OpenCV initialization
                System.loadLibrary("native_sample");

                mOpenCvCameraView.enableView();

            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};

public Sample3Native() {
    Log.i(TAG, "Instantiated new " + this.getClass());
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "called onCreate");
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    setContentView(R.layout.tutorial3_surface_view);

    mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.tutorial4_activity_surface_view);
    mOpenCvCameraView.setCvCameraViewListener(this);

} 
```

我试过使用：

```
//mOpenCvCameraView.setScaleX(0.8f);
                   // mOpenCvCameraView.setScaleY(0.4f);

                //mOpenCvCameraView.setMinimumHeight(800);
               // mOpenCvCameraView.setMinimumWidth(1000); 
```

但它不起作用。

我怎样才能拉伸框架以填满整个屏幕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T11:32:21.710

您可以获取可用分辨率列表或手动设置。

如果您想获取可用尺寸列表并获得最佳相机尺寸。

```
 if (mOpenCvCameraView != null) {
        List<Size> sizes = mOpenCvCameraView.getSupportedPreviewSizes();
        int mFrameWidth = width;
        int mFrameHeight = height;

        // selecting optimal camera size
        {

            double minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - height) < minDiff) {
                    mFrameWidth = (int) size.width;
                    mFrameHeight = (int) size.height;
                    minDiff = Math.abs(size.height - height);
                }
            }
        }

        mOpenCvCameraView.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, mFrameWidth);
        mOpenCvCameraView.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, mFrameHeight);
    } 
```

如果最佳相机尺寸不是全屏，则很容易从列表中获得相机支持的大尺寸。

其他选项是手动设置大小：

```
 mOpenCvCameraView.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, 1000);
        mOpenCvCameraView.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, 800); 
```

代码来源来自人脸检测 OpenCV 2.4.2 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T08:48:12.063

对于那些在这里谷歌并只想更改分辨率的人，

`mOpenCvCameraView.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, 1000)`方法不起作用。

尝试使用`mOpenCvCameraView.setMaxFrameSize(640, 480);`

它适用于**OCV4Android2.4.5，教程 2，混合处理。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:46:38.107

对于仍在寻找这个的人，我已经解决了这个问题（有点）。我似乎无法让它适用于 OpenCV v 2.4.3。我已经尝试了互联网上的所有内容。但是，在 OpenCV 2.4.3.2 中，他们添加了一种设置相机尺寸的方法

```
disconnectCamera();
mMaxHeight = //your desired height
mMaxWidth = //your desired width
connectCamera(mMaxWidth, mMaxHeight); 
```

查看 OpenCV 教程 5，特别是 SampleJavaCameraView -> setResolution 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-01T09:23:07.727

不是最好的解决方案，但你可以去`AndroidManifest.xml`和设置`android:screenOrientation="landscape"`

有了这个，您不需要将相机旋转 90º，但您的应用程序将始终处于横向模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T15:41:14.963

OpenCV 相机的自然相机方向是横向的，所以让你的活动就像

> `android:screenOrientation="landscape"`

并在活动中应用这个主题

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <!-- Customize your theme here. -->
        ...
        <item name="android:windowFullscreen">true</item>
        <item name="android:windowContentOverlay">@null</item>
</style> 
```

这个技巧给你一个全屏相机。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-14T11:54:10.357

试试这个替换

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

onCreate 中的代码

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# html - css链接格式，样式

> ID：13376422
> 
> 赞同：1
> 
> 时间：2012-11-14T09:50:27.797
> 
> 标签：html, css, code-formatting

为什么大多数开发人员使用

```
<link  href="/js/jquery-ui/css/flick/jquery-ui-1.8.23.custom.css" type="text/css" />
<link  href="/css/main.css" type="text/css" />
<link  href="/css/table.css" type="text/css" /> 
```

代替

```
<style type="text/css">
    @import "/js/jquery-ui/css/flick/jquery-ui-1.8.23.custom.css";
    @import "/css/main.css";
    @import "/css/tables.css";
</style> 
```

即使在 html 标记中的自动生成代码中？最后一种方法的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:59:22.767

以下是我知道的几个缺点

*   旧浏览器不支持@import
*   我们不能利用 @import 来利用 rel 和 title 属性，而我们可以利用这些属性
*   链接方法以其简单而著称

为了了解@import 的更多缺点，请访问[http://www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T15:41:07.047

最大的缺点是 CSS @import 单独加载每个 CSS 文件，而不是一次加载文件。这意味着浏览器必须等待每个导入的 CSS 文件完成加载，直到它可以开始加载下一个。这会显着降低您的网站速度，尤其是在您有大量导入的 CSS 文件的情况下。

# java - 替换 JTable 的组合框编辑器

> ID：13376428
> 
> 赞同：2
> 
> 时间：2012-11-14T09:51:08.663
> 
> 标签：java, swing, jtable

我通过在 java 中扩展默认编辑器为我的表创建了一个自定义编辑器。代码看起来像

```
import java.awt.Component;
import java.text.ChoiceFormat;

import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JTable;

import com.ushustech.nmsazzist.model.mib.MibVariableModel;

public class MibFormattedValueEditor extends DefaultCellEditor
{

private JComboBox m_comboBox;
public MibFormattedValueEditor()
{
    this(new JComboBox());
}

public MibFormattedValueEditor(JComboBox comboBox)
{
    super(comboBox);
    this.m_comboBox = comboBox;
}

@Override
public Object getCellEditorValue()
{
    return this.m_comboBox.getSelectedItem();
}

@Override
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)
{
    this.m_comboBox.removeAllItems();
    MibVariableModel model = (MibVariableModel) table.getModel();
    ChoiceFormat format = model.getMibVariable(row).getFormat();

    if(null != format){
        Object[] obj = format.getFormats();
        for(int i=0;i<obj.length;i++){
            this.m_comboBox.addItem(obj[i].toString());
        }

    }

    return super.getTableCellEditorComponent(table, value, isSelected, row, column);

}

} 
```

如果格式为 null ，我想显示一个文本字段编辑器吗？请帮我这样做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:00:05.797

我不会更换，`ComboBox`因为这会变脏。我宁愿将其设置为可编辑，以防万一`format == null`让用户在此处输入信息。像这样：

```
if(null != format) {
   // ...
} else {
   this.m_comboBox.setEditable(true);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T09:55:38.003

默认情况下使 textField 不可见，并且当格式为 null 时将可见设置为 true：

```
textField.setVisible(true); 
```

# mysql - 使用 MYSQL 计算每天的约会

> ID：13376434
> 
> 赞同：2
> 
> 时间：2012-11-14T09:51:24.683
> 
> 标签：mysql, select, count, group-by

我在使用 mysql 语句计算给定时间段内一天的约会时遇到了麻烦。我有一个日历表，包括开始和结束列（类型 = DateTime）。以下语句应计算 11 月的所有约会，包括总体约会：

```
SELECT 
    COUNT('APPOINTMENTS') AS Count, 
    DATE(c.StartingDate) AS Datum 
FROM t_calendar c
    WHERE 
        c.GUID = 'blalblabla' AND
        ((DATE(c.StartingDate) <= DATE('2012-11-01 00:00:00')) AND (DATE(c.EndingDate) >= DATE('2012-11-30 23:59:59'))) OR
        ((DATE(c.StartingDate) >= DATE('2012-11-01 00:00:00')) AND (DATE(c.EndingDate) <= DATE('2012-11-30 23:59:59')))
    GROUP BY DATE(c.StartingDate)
    HAVING Count > 1 
```

**但是如何包含在 StartingDate 之前开始并在 StartingDate 结束的约会？**

例如

*   起始日期 = 2012-11-14 17:00:00，结束日期 = 2012-11-15 08:00:00
*   起始日期 = 2012-11-15 09:00:00，结束日期 = 2012-11-15 10:00:00
*   起始日期 = 2012-11-15 11:00:00，结束日期 = 2012-11-15 12:00:00

我的报表在 11 月 15 日返回计数 2。但这是错误的，因为第一次约会不见了。如何包括这些约会？我缺少什么，UNION SELECT，JOIN，子选择？

* * *

## 一个可能的解决方案？

```
SELECT 
    c1.GUID, COUNT('APPOINTMENTS') + COUNT(DISTINCT c2.ANYFIELD) AS Count, 
    DATE(c1.StartingDate) AS Datum,
    COUNT(DISTINCT c2.ANYFIELD)
FROM 
    t_calendar c1
LEFT JOIN
    t_calendar c2
        ON
            c2.ResourceGUID = c1.ResourceGUID AND
            (DATE(c2.EndingDate) = DATE(c1.StartingDate)) AND 
            (DATE(c2.StartingDate) < DATE(c1.StartingDate))
WHERE 
    ((DATE(c1.StartingDate) <= DATE('2012-11-01 00:00:00')) AND (DATE(c1.EndingDate) >= DATE('2012-11-30 23:59:59'))) OR
    ((DATE(c1.StartingDate) >= DATE('2012-11-01 00:00:00')) AND (DATE(c1.EndingDate) <= DATE('2012-11-30 23:59:59')))    
GROUP BY 
    c1.ResourceGUID,
    DATE(c1.StartingDate) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:00:22.760

## 第一：合并范围检查

首先，您的两个范围`where`条件可以用一个替换。而且似乎您只计算完全重叠目标日期范围或完全包含在其中的约会。不包括部分重叠的。因此，您关于在范围开始日期结束的约会的问题。

为了使`where`子句易于理解，我将使用以下方法对其进行简化：

*   定义目标范围的两个变量：
    *   `rangeStart`（在你的情况下，2012 年 11 月 1 日）
    *   `rangeEnd`（我宁愿假设到 2012 年 12 月 1 日 00:00:00.00000）
*   不会像您那样`datetime`仅转换为日期（使用`date`函数），但您可以轻松地做到这一点。

考虑到这些，您的`where`条款可以大大简化并涵盖给定范围的所有约会：

```
...
where (c.StartingDate < rangeEnd) and (c.EndingDate >= rangeStart)
... 
```

这将搜索所有在目标范围内的约会，并将涵盖所有这些约会案例：

```
 start          end
target range               |==============|

partial front       |---------|
partial back                            |---------|
total overlap          |---------------------|
total containment               |-----| 
```

部分正面/背面也可能几乎不会*触及*您的目标范围（您一直在追求的范围）。

## 二：解决问题

为什么你错过了第一张唱片？仅仅因为您的`having`条款仅收集**从某一天开始有超过 1 个约会**的团体：11 月 15 日有两个，但 14 日只有一个，因此被排除在外，因为`Count = 1`不是`> 1`。

要回答您的第二个问题*，我缺少*的是：您没有遗漏任何东西，实际上您的陈述中有太多内容需要简化。

试试这个语句，而不是应该返回你所追求的：

```
select count(c.GUID) as Count,
       date(c.StartingDate) as Datum
from t_calendar c
where (c.GUID = 'blabla') and
      (c.StartingDate < str_to_date('2012-12-01', '%Y-%m-%d') and
      (c.EndingDate >= str_to_date('2012-11-01', '%Y-%m-%d'))
group by date(c.StartingDate) 
```

我使用`str_to_date`函数使字符串到日期的转换更加安全。

我不太确定您为什么要`having`在声明中包含它，因为它并不是真正需要的。除非您的实际陈述更复杂，并且您只包含最相关的部分。在这种情况下，您可能必须将其更改为：

```
having Count > 0 
```

## 在任何给定日期范围内获取每天的约会计数

可能还有其他方法，但最常见的方法是使用*数字*或 ?calendar* 表，使您能够将范围分解为单个*点*- 天。他们必须将您的约会加入此数字表并提供结果。

我[创建了一个可以解决](http://sqlfiddle.com/#!2/70146/30)问题的 SQLFiddle。这就是它的作用......

假设您有数字表`Num`，其中数字从 0 到*x*。和约会表`Cal`与您的记录。以下脚本创建了这两个表并填充了一些数据。数字最多只有 100 个，足以存储 3 个月的数据。

```
-- appointments
create table Cal (
  Id int not null auto_increment primary key,
  StartDate datetime not null,
  EndDate datetime not null
);

-- create appointments
insert Cal (StartDate, EndDate)
values
  ('2012-10-15 08:00:00', '2012-10-20 16:00:00'),
  ('2012-10-25 08:00:00', '2012-11-01 03:00:00'),
  ('2012-11-01 12:00:00', '2012-11-01 15:00:00'),
  ('2012-11-15 10:00:00', '2012-11-16 10:00:00'),
  ('2012-11-20 08:00:00', '2012-11-30 08:00:00'),
  ('2012-11-30 22:00:00', '2012-12-05 00:00:00'),
  ('2012-12-01 05:00:00', '2012-12-10 12:00:00');

-- numbers table
create table Nums (
  Id int not null primary key
);

-- add 100 numbers
insert into Nums
select a.a + (10 * b.a)
from (select 0 as a union all
      select 1 union all
      select 2 union all
      select 3 union all
      select 4 union all
      select 5 union all
      select 6 union all
      select 7 union all
      select 8 union all
      select 9) as a,
     (select 0 as a union all
      select 1 union all
      select 2 union all
      select 3 union all
      select 4 union all
      select 5 union all
      select 6 union all
      select 7 union all
      select 8 union all
      select 9) as b 
```

现在你要做的是

1.  **`Num`通过从表格中选择数字并将它们转换为日期来选择您所做的**日期范围。****
***   然后**将您的约会**加入这些日期，以便将那些在特定日期的约会加入到该特定日期*   然后**每天将所有这些约会分组**并获得结果**

 **这是执行此操作的代码：

```
-- just in case so comparisons don't trip over
set names 'latin1' collate latin1_general_ci;

-- start and end target date range
set @s := str_to_date('2012-11-01', '%Y-%m-%d');
set @e := str_to_date('2012-12-01', '%Y-%m-%d');

-- get appointment count per day within target range of days
select adddate(@s, n.Id) as Day, count(c.Id) as Appointments
from Nums n
  left join Cal c
  on ((date(c.StartDate) <= adddate(@s, n.Id)) and (date(c.EndDate) >= adddate(@s, n.Id)))
where adddate(@s, n.Id) < @e
group by Day; 
```

这是这个相当简单的选择语句的结果：

```
|        DAY | APPOINTMENTS |
-----------------------------
| 2012-11-01 |            2 |
| 2012-11-02 |            0 |
| 2012-11-03 |            0 |
| 2012-11-04 |            0 |
| 2012-11-05 |            0 |
| 2012-11-06 |            0 |
| 2012-11-07 |            0 |
| 2012-11-08 |            0 |
| 2012-11-09 |            0 |
| 2012-11-10 |            0 |
| 2012-11-11 |            0 |
| 2012-11-12 |            0 |
| 2012-11-13 |            0 |
| 2012-11-14 |            0 |
| 2012-11-15 |            1 |
| 2012-11-16 |            1 |
| 2012-11-17 |            0 |
| 2012-11-18 |            0 |
| 2012-11-19 |            0 |
| 2012-11-20 |            1 |
| 2012-11-21 |            1 |
| 2012-11-22 |            1 |
| 2012-11-23 |            1 |
| 2012-11-24 |            1 |
| 2012-11-25 |            1 |
| 2012-11-26 |            1 |
| 2012-11-27 |            1 |
| 2012-11-28 |            1 |
| 2012-11-29 |            1 |
| 2012-11-30 |            2 | 
```**

# c# - DataGridView 数据绑定列

> ID：13376437
> 
> 赞同：0
> 
> 时间：2012-11-14T09:51:35.807
> 
> 标签：c#, datagridview

我有一个包含两列的数据表：-

```
 UserID | UserName
 ----------------- 
 UserA  | Fredd Bloggs 
 UserB  | John West 
```

这将是我的数据源`DatagridView`。

然后我想要做的是创建一个新`DataGridComboBoxColumn`的，允许用户从下拉列表中选择`UserName's`表中的所有不同内容。我

我可以通过将数据源设置为`ComboBox`并将`DataTable`设置为`DataPropertyName`来做到这一点`UserName`。

但是我一直在思考的地方是用户选择一个新的`UserName`. 列`UserID`值更改以反映新选择的`UserName`.

有谁知道这样做的方法。

目前这只是一个测试，但我需要在项目中大量使用它。

# iphone - 在目标 c 中使用 titleForState 和 initWithFormat

> ID：13376440
> 
> 赞同：0
> 
> 时间：2012-11-14T09:51:43.133
> 
> 标签：iphone, objective-c, methods, label

我只是 iPhone 编程的初学者。我在教程中看到了这段代码，但我不明白它是什么意思。`titleForState`我对和等关键字感到困惑`initWithFormat`。

谁能帮助我理解这种语法的含义和重要性。

```
-(IBAction)buttonPressed: (id)sender {
    NSString *title = [sender **titleForState**:UIControlStateNormal];
    NSString *newText = [[NSString alloc] **initWithFormat**:
             @"%@ button pressed.", title];
    statusText.text = newText;//statustext is a label 
    [newText release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:13:25.640

`initwithFormat`允许您通过添加变量的值来修改字符串，您可以添加任意数量的变量，但您必须为正确的原始类型添​​加正确的符号。这里有些例子

```
 NSString *thisIsAString = @"String";
  float thisIsAFloat = 13.9f;
  NSString *strFormat = [[NSString alloc] initWithFormat:@"This is a %@, this is a %f float", thisIsAString, thisIsAFloat];
  NSLog(@"%@", strFormat); 
```

这将产生输出`This is a String, this is a 13.9f float`通知`float`和`NSString`值已替换符号。

`titleForState`正在获取具有该方法的对象的标题。这将返回标题，让我们说一个 UIButton 的标题为“Press”，`UIControlStateNormal`因此值“Press”将被输入到`NSString`标题中。尽管并非 sender 中的所有内容都具有该方法`titleForState`，但它会显示的原因是因为 sender 是一种原始类型，`id`如果发送的东西没有得到`titleForState`并且您的应用程序将崩溃，则会导致错误。

# opencv - 使用 OpenCV 的相对相机姿态估计

> ID：13376441
> 
> 赞同：6
> 
> 时间：2012-11-14T09:51:42.787
> 
> 标签：opencv, view, geometry

我正在尝试使用 OpenCV 估计相对相机姿势。就我而言，相机已经过校准（我知道相机的内在参数）。

鉴于在两个位置捕获的图像，我需要找出两个相机之间的相对旋转和平移。典型的平移约为 5 到 15 米，摄像机之间的偏航角旋转范围在 0 到 20 度之间。

为此，采用以下步骤。

*   一个。使用 SIFT/SURF 找到对应的点
*   湾。基本矩阵识别
*   C。`E = K'FK`通过奇异性约束和修改 E估计基本矩阵
*   d。分解基本矩阵得到旋转，`R = UWVt`或者`R = UW'Vt`（U和Vt得到E的SVD）
*   e. 从旋转矩阵中获取真实的旋转角度

### 实验一：真实数据

对于真实数据实验，我通过将相机安装在三脚架上来拍摄图像。在位置 1 捕获的图像，然后移动到另一个对齐的位置并以 5 度的步长改变偏航角，并为位置 2 捕获图像。

问题/问题：

1.  估计偏航角的符号与地面实况偏航角不匹配。有时 5 度估计为 5 度，但 10 度为 -10 度，15 度为 15 度。
2.  在实验中，仅改变了偏航角，但估计的 Roll 和 Pitch 角具有接近 180/-180 度的非零值。
3.  在某些情况下，精度非常差，估计和地面真实角度的误差约为 2-5 度。
4.  如何找出比例因子以获取实际测量单位的转换？

模拟数据的行为也相同。

有没有人和我遇到过类似的问题？对如何解决它们有任何线索。任何人的任何帮助将不胜感激。

（我知道已经有很多类似问题的帖子了，所有这些都没有救我。因此再发一次。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T19:38:22.137

在 Hartley 和 Zisserman 的第 9.6 章中，他们指出，对于一个特定的基本矩阵，如果一个摄像机保持在规范位置/方向，则第二个摄像机矩阵有四种可能的解决方案：[UWV' | u3]，[UWV' | -u3], [UW'V' | u3] 和 [UW'V' | -u3]。

第一个和第三个（以及第二个和第四个）解决方案之间的区别在于，方向围绕连接两个相机的线旋转了 180 度，称为“双绞线”，这听起来就像你所描述的那样。

书中说，为了从四个选项中选择正确的平移和方向组合，您需要在场景中测试一个点，并确保该点位于两个摄像机的前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:12:08.740

对于问题 1 和 2，请在 wikipedia 或任何好的数学网站（如 Wolfram Mathworld）中查找“欧拉角”。你会发现欧拉角的不同可能性。我相信您可以根据文献阅读弄清楚为什么您的结果会出现符号变化。

对于问题 3，它应该主要与我们个人相机校准的准确性有关。

对于问题 4，不确定。怎么样，使用胶带测量相机的一个点并将其与平移规范进行比较以获得比例因子。

精度差的可能原因：

1）在相机校准中获得合理和精确的准确性之间存在差异。看到这个[线程](https://stackoverflow.com/questions/12794876/how-to-verify-the-correctness-of-calibration-of-a-webcam?rq=1)。2) 移动三脚架的精度。您如何确保在位置变化期间三脚架不会围绕垂直于表面的轴旋转。

我没有得到你的模拟概念。但是，我建议进行以下测试。

在不移动相机或物体的情况下拍摄图像。现在如果你计算相对相机位姿，旋转应该是单位矩阵，平移应该是空向量。由于数值不准确和噪音，您可能会看到以弧分为单位的旋转偏差。

# jquery - ajax请求后从多个div创建fancybox画廊

> ID：13376442
> 
> 赞同：2
> 
> 时间：2012-11-14T09:51:50.820
> 
> 标签：jquery, ajax, fancybox

我正在使用fancybox2，并希望创建一个带有参考项目案例研究的漂亮可点击的fancybox。

这个想法是`<a class="fbajax fancybox.ajax" href="filename">`在页面上有一个链接来触发一个文件（目前是.txt，将来应该被一个.php文件替换）在一个fancybox中打开。

```
<script>
  $(document).ready(function() {
    $(".fbajax").fancybox({
    });
  });
</script> 
```

在该文件中有几个 div 容器`<div class="fb2wrap">`，每个容器都包含来自单个案例研究的内容。

目前，所有`<div class="fb2wrap">`产品都列在一个精美的盒子上。我怎样才能让 fancybox 从我的 div 容器创建一个画廊，使案例研究可点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:25:59.257

这是基本思想：您需要在加载此内容之前调整fancybox的内容，因此您可以定义一个`beforeLoad`回调，如下所述：http: [//fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

但是实现它的最简单方法是为每个案例研究创建一个网页，并通过将`href=#caseStudyX`每个链接替换为`href=caseStudyX.php`

这是jsfiddle：http: [//jsfiddle.net/xavier_seignard/RDv2a/1/](http://jsfiddle.net/xavier_seignard/RDv2a/1/)

# scala - Scala：.take(1) 理解？

> ID：13376444
> 
> 赞同：0
> 
> 时间：2012-11-14T09:52:01.777
> 
> 标签：scala, for-comprehension

```
val SumABC = 1000
val Max = 468
val Min = 32

val p9 = for {
  a <- Max to 250 by -1
  b <- Min+(Max-a) to 249
  if a*a+b*b == (SumABC-a-b)*(SumABC-a-b)
} yield a*b*(SumABC-a-b) 
```

我可以在这里 .take(1) 吗？（我试图将它翻译成平面图、过滤器等，但由于我失败了，我想它无论如何都不会那么可读......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:53:53.607

如果我理解你的神秘问题，你想做的是以下

```
val p9 = (for {
  a <- Max to 250 by -1
  b <- Min+(Max-a) to 249
  if a*a+b*b == (SumABC-a-b)*(SumABC-a-b)
} yield a*b*(SumABC-a-b)).take(1) 
```

只需在 for 之前和之后添加括号，以确保在 for 块的结果上调用 take 方法

# java - Apache MyFaces 特立尼达： 生成html

> ID：13376446
> 
> 赞同：0
> 
> 时间：2012-11-14T09:52:14.120
> 
> 标签：java, html, jsf-1.2, trinidad

从 tr:table 生成的 html 包含 th 的标题和 td 的行数据，这很好。

我的问题是我想为“th”元素设置样式

当我向 tr:outputText 添加样式时，这不起作用。

我尝试添加的样式是 - text-align:right

我该怎么做才能控制从 jsf 生成的 html（特立尼达就是这种情况）

我的代码

```
 <tr:table value="#{myManagedBean.allEmployees}"
      bandingInterval="2" banding="row" var="emp">
  <tr:column>
      <f:facet name="header">
      <tr:outputText value="Name"/>
     </f:facet>
     <tr:outputText value="#{emp.ename}"/>
  </tr:column>
  <tr:column>
    <f:facet name="header">
     <tr:outputText value="Department Number"/>
    </f:facet>
    <tr:outputText value="#{emp.deptno}"/>
  </tr:column>
</tr:table> 
```

任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:55:06.847

你可以摆弄特立尼达皮肤选择器。所以把它放在你的 trinidad-skin.css 中：

```
af|column::sortable-header-text
{
    text-align: right;
} 
```

特立尼达换肤的更多信息：http: [//myfaces.apache.org/trinidad/skin-selectors.html](http://myfaces.apache.org/trinidad/skin-selectors.html)

# python - 当 QThread() 停止运行（Python）时，我是否需要手动调用 .quit() 方法？

> ID：13376448
> 
> 赞同：1
> 
> 时间：2012-11-14T09:52:27.137
> 
> 标签：python, multithreading, qt, thread-safety, qthread

我正在编写一个使用 QThreads 的多线程应用程序。我知道，为了启动一个线程，我需要重写该`run()`方法并使用`thread.start()`某处调用该方法（在我的 GUI 线程中）。

但是，我想知道是否需要在`.wait()`任何地方调用该方法，并且我应该`.quit()`在线程完成后调用该方法，还是自动完成？

我正在使用 PySide。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:18:10.743

这两个答案都取决于您的代码在做什么以及您对线程的期望。

如果您使用线程的逻辑需要在 QThread 完成时同步等待，那么是的，您需要调用`wait()`. 然而，这样的要求是马虎线程模型的标志，除了应用程序启动和关闭等非常特殊的情况。的用法`QThread::wait()`建议爬行顺序操作，这意味着您实际上没有同时使用线程。

`quit()`退出 QThread 内部的事件循环，这不是强制使用的。一个长时间运行的线程（与单任务工作者相反）必须有某种事件循环——这是一个通用语句，不特定于 QThread。你要么自己做（以某种循环的形式），要么使用 Qt 提供的事件循环，你可以通过调用你的方法`while(keepRunning) { }`来触发它。前一个实现可以由您完成，因为您确实提供了条件。Qt 提供的实现对你是隐藏的，这里调用——它在内部只是在 Qt 中设置某种类似的标志。`exec()``run()``keepRunning``quit()`

# xml - 将 Excel xls 文件转换为 unix 上的任何 XML 格式？

> ID：13376449
> 
> 赞同：0
> 
> 时间：2012-11-14T09:52:27.500
> 
> 标签：xml, linux, excel

我定期收到一个`xls`文件（是的，有多张纸），并且有一大堆业务逻辑可以应用在上面。我*不*想要的是必须使用 3rd-party 库，然后使用特定于库的命令，例如`sheet.cell(42,73)`与整个地方的业务逻辑混合。当第 3 方库到期或更新 Excel 时，一切都必须重新设计。

因此，我希望有一个纤细的**xls 到 XML**转换阶段。XML 方言并不重要，“xmlx”可以，Open-Office、Open-Doc 等等。它只需要定义明确。如果以后这个转换有变化，我希望我可以用一个小的 xslt 来处理它。

在那个 XML 中，我将使用我最喜欢的语言（python 或 perl）的随附 xml 工具，甚至只是 xslt 来编写业务逻辑。

**在 Linux 机器上将-file转换为-file的*最可靠*、*最精简的方法是什么？*`xls``xml`**

笔记：

*   该文件包含多张工作表，如果不是这种情况，我会要求最简单的 csv 转换器。
*   该机器将是 64 位或 32 位的，但无法连接到 Windows 机器。
*   我宁愿不必在该服务器上安装 Office，即用于编写 Open-Office 或 Libre-Office 脚本...
*   唉，我不能要求文件以任何其他格式保存，例如`xlsx`. *叹*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:05:32.953

这是我在网上找到的使用 JETDB 从 Excel 中检索数据的示例：

```
 string connstr ="Provider=Microsoft.Jet.Oledb.4.0;Data Source=C:\aaa.xls;Extended Properties=Excel 8.0"/>
        OleDbConnection conn = new OleDbConnection(connstr);
        string strSQL = "SELECT * FROM [Sheet$]";

        OleDbCommand cmd = new OleDbCommand(strSQL, conn);
        DataSet ds = new DataSet();
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        da.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind(); 
```

# sql - T-SQL 查询用作 LIFO 的矩阵表

> ID：13376456
> 
> 赞同：2
> 
> 时间：2012-11-14T09:52:55.333
> 
> 标签：sql, sql-server, sql-server-2008, tsql

按照我的[问题]：[T-SQL 查询一个矩阵表的自由位置](https://stackoverflow.com/questions/13358454) 我现在正试图将我的矩阵表作为 LIFO 来处理。每对 (X,Z) 代表一个通道，我可以在其中存储一个元素。当我生成一个位置时，我现在使用上面问题和下面提供的查询。

```
SELECT x, z, MAX(CASE WHEN disabled = 0 AND occupiedId IS NULL THEN Y ELSE 0 END) firstFreeY
FROM matrix
GROUP BY x, z
ORDER BY x, z; 
```

这是有效的，但它不能处理“漏洞”。事实上，可能从表中删除了禁用标志或手动删除了元素。

如果我的矩阵表看起来像这样：

```
X   Z   Y   Disabled    OccupiedId
--------------------------------------------------
1   1   1   0   591
1   1   2   0   NULL
1   1   3   1   NULL
1   1   4   0   524
1   1   5   0   523
1   1   6   0   522
1   1   7   0   484
1   2   1   0   NULL
1   2   2   0   NULL
1   2   3   0   NULL
1   2   4   0   NULL
1   2   5   0   NULL
1   2   6   0   589
1   2   7   0   592 
```

上述查询的结果是：

```
X   Z   firstFreeY
------------------------
1   1   2
1   2   5 
```

代替：

```
X   Y   firstFreeY
------------------------
1   1   0
1   2   5 
```

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:11:45.940

此查询查找小于所有其他占用的 Y 的最大 Y：

```
select  m1.X
,       m1.Z
,       max(
        case
        when m2.MinOccupiedY is null or m1.Y < m2.MinOccupiedY then m1.Y
        else 0
        end
        ) as FirstFreeY
from    matrix m1
join    (
        select  X
        ,       Z
        ,       min(
                case 
                when disabled <> 0 or occupiedId is not null then Y
                end
                ) as MinOccupiedY
        from    matrix 
        group by
                X
        ,       Z
        ) m2
on      m1.X = m2.X
        and m1.Z = m2.Z
group by
        m1.X
,       m1.Z 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/43984/4/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:53:56.797

只是想知道我是否理解您的要求，这是否也有效？

```
select distinct
m1.x,m1.z, o.y
from
  matrix m1
cross apply
(
  select top 1 (case when m2.Disabled = 0 then m2.y else 0 end)
  from matrix m2
  where
        m1.x = m2.x
    and m1.z = m2.z
    and m2.OccupiedId is null
  order by m2.y desc
) o (y); 
```

# c++ - 链接错误与编译错误

> ID：13376459
> 
> 赞同：5
> 
> 时间：2012-11-14T09:52:58.777
> 
> 标签：c++, c, compiler-construction, linker

为什么**结构的双重声明会导致编译错误**，而**函数的双重定义会导致链接错误**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:56:01.777

因为函数定义在链接时包含在可执行文件中，但声明或语法检查都在编译时完成

当您调用任何函数并且编译器无法找到函数的声明时，还要考虑一件事，然后它将生成警告为`implicit declaration of func()`.

为了删除这个警告信息，我们提供了 func 的前向声明，`int func();`它编译时没有任何警告信息。

你认为为什么会发生这种情况？发生这种情况是因为编译器没有找到该`func()`符号。根据语言语法使代码无错误完全取决于编译器。

但是最终可执行文件的构建是在链接时完成的，然后链接器开始寻找函数定义`func()`，如果找到则很好，如果没有.. 然后`Linker error`

`could not have resolved external symbol _func()`

注意：任何外部符号都在链接时解析

在 gcc 上仅用于编译使用：（这可能因编译器而异）

`gcc -Werror -c test.c` --> 生成`test.o`文件

然后尝试链接它并使其可执行

`gcc -Werror -o test test.o`-->`test`是可执行的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:01:18.550

该标准没有说明何时应该报告错误 - 这取决于编译器，但基本上是因为**那是错误被捕获的时间**。

首先，编译器解析文件。很容易看出 a `struct`or`class`是否在同一个翻译单元中被多次定义（**只是这是一个错误，在翻译单元之间你可以有多个类类型定义**），因为它处理那个翻译单元。

其次，它将目标文件链接在一起（链接）。直到现在它才能知道同一个符号被导出了多次，因为那是错误发生的时候。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T10:01:33.343

编译程序时，编译器需要知道要使用的结构的确切定义。但是我们只需要在尝试链接程序时才知道要使用哪个确切的功能。

因此，如果一个结构被定义了两次，编译器在编译过程中会感到困惑，因此会在编译时抱怨。

对于编译期间的函数，您可以有多个定义，但只有在链接期间才会出现混淆，因此在链接期间会出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T10:07:00.380

你说的不一定是真的。

如果你在头文件中“内联”函数定义，然后在编译单元中写入它的定义，你会得到一个错误

> `...already has a definition.`

您所指的情况是当两个不同的编译单元定义（或查看定义）相同的函数时，因此在任何单个编译单元中都没有编译错误，而是它们的组合导致了链接错误。

顺便注意一下，这就是关键字`inline`真正发挥作用的地方。对于头文件中定义的非模板函数，如果使用`inline`关键字，则意味着定义该函数时可以存在多个编译单元。它实际上并不能保证编译器会内联它。

# x86 - 32位是否会将64位寄存器中的高位移出零？

> ID：13376462
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:01.783
> 
> 标签：x86, zero-extension

> **可能重复：**
> [为什么大多数 x64 指令将 32 寄存器的上部归零](https://stackoverflow.com/questions/11177137/why-do-most-x64-instructions-zero-the-upper-part-of-a-32-register)

如果我执行`movl something, %eax`并`rax`包含类似 0x1234567812345678 的内容，它会自动将上半部分归零`rax`吗？

# javascript - Facebook API - 访问令牌适用于某些请求

> ID：13376466
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:11.550
> 
> 标签：javascript, facebook-graph-api

这让我完全发疯了。我已经设置了一个 FB 应用程序并通过访问：[https](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=CLIENT_ID&client_secret=CLIENT_SECRET) ://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=CLIENT_ID&client_secret=CLIENT_SECRET 来检索访问令牌。

现在我想从这个 URL 获取一个（公开可用的）提要：[https ://graph.facebook.com/PAGE_OR_USER_ID/feed?access_token=ACCESS_TOKEN](https://graph.facebook.com/PAGE_OR_USER_ID/feed?access_token=ACCESS_TOKEN)

当我使用我自己的用户 ID 尝试它时它工作正常，甚至当我尝试另一个随机页面时它工作正常，但是当我输入我需要它使用的 PAGE_ID 时它不起作用。

这里有些例子：

这很好用（我的一个朋友的 Facebook 页面）： [https ://graph.facebook.com/tatchit/feed?access_token=213451182120494|JgAwuCE74lh51t1pKMuRM2mz3GU&limit=10&offset=0](https://graph.facebook.com/tatchit/feed?access_token=213451182120494|JgAwuCE74lh51t1pKMuRM2mz3GU&limit=10&offset=0)

这也很好用（我自己的 Facebook ID）： [https ://graph.facebook.com/al.dev.7/feed?access_token=213451182120494|JgAwuCE74lh51t1pKMuRM2mz3GU&limit=10&offset=0](https://graph.facebook.com/al.dev.7/feed?access_token=213451182120494|JgAwuCE74lh51t1pKMuRM2mz3GU&limit=10&offset=0)

这不起作用（客户的 Facebook 页面）： [https ://graph.facebook.com/142616539131188/feed?access_token=213451182120494|JgAwuCE74lh51t1pKMuRM2mz3GU&limit=10&offset=0](https://graph.facebook.com/142616539131188/feed?access_token=213451182120494|JgAwuCE74lh51t1pKMuRM2mz3GU&limit=10&offset=0)

我没有收到任何错误，但结果为空。

如果我尝试使用 Graph API Explorer，它也可以正常工作： [https ://developers.facebook.com/tools/explorer/?method=GET&path=142616539131188%2Ffeed](https://developers.facebook.com/tools/explorer/?method=GET&path=142616539131188%2Ffeed)

但如果我输入自己的访问令牌，则不会。据我了解，您在 API Explorer 中获得的访问令牌是临时的，所以我不想使用它。

怎么会这样？

还。多年来，我一直在努力理解整个访问令牌、客户端 ID、应用 ID 业务 - 是否有一个很好的教程来解释所有这些内容？我从来没有做过没有问题的工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:36:18.450

您正在使用应用程序访问令牌而不是用户访问令牌。您正在查看的某些页面可能设置了国家或年龄限制，因此无法使用应用令牌。

请参阅：http: [//developers.facebook.com/docs/concepts/login/access-tokens-and-types/](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:43:05.097

您应该对上述所有查询使用用户访问令牌。当您想要执行诸如检查应用程序洞察力之类的操作时，将使用应用程序访问令牌。

当页面有年龄限制什么的时候，app token 将无法通过，但是由于用户已经是页面的成员，您可以使用 user access token 来获取数据。

添加：引用文档，

```
Note that the **app access token** is for publishing purposes permitted by the publish_actions and publish_stream permissions. You will be **unable to retrieve information** about the status update post with the given ID using the app access token. Instead, you should use a **user access token** for such purposes. 
```

**应用程序访问令牌的其他功能** 可以使用应用程序访问令牌从 Facebook 检索一组有限的信息。

```
 Basic Profile Info of a User (ID, Name, Username, Gender)
    A User’s Friends and their IDs
    Permissions granted by the User to your App 
```

阅读：[https ://developers.facebook.com/docs/opengraph/using-app-tokens/](https://developers.facebook.com/docs/opengraph/using-app-tokens/)

因此，您应该使用 user_access 令牌进行查询以访问您正在查找的所有信息，而不是使用应用程序 access_token。

# python - 蟒蛇元素树

> ID：13376467
> 
> 赞同：1
> 
> 时间：2012-11-14T09:53:11.870
> 
> 标签：python, xml

几天来，我一直在尝试解析 xml 文件中的数据，但无法正常工作。从下面的示例中，我需要每个图层的状态、索引以及前景/生产者类型和文件名。问题是结构因内容而异。查看索引 2，其中文件名位于foreground/producer/fill/producer 下（我不需要foreground/producer/key/producer 下的文件名）。我正在寻找一个简单的解决方案（一直在尝试使用 etree.ElementTree 但解析似乎很困难）。

```
<?xml version="1.0" encoding="utf-8"?>
<channel>
   <video-mode>1080i5000</video-mode>
   <stage>
      <layers>
         <layer>
            <status>stopped</status>
            <auto_delta>-1</auto_delta>
            <frame-number>1829997</frame-number>
            <nb_frames>0</nb_frames>
            <frames-left>-1829996</frames-left>
            <foreground>
               <producer>
                  <type>empty-producer</type>
               </producer>
            </foreground>
            <background>
               <producer>
                  <type>transition-producer</type>
                  <source>
                     <producer>
                        <type>empty-producer</type>
                     </producer>
                  </source>
                  <destination>
                     <producer>
                        <type>ffmpeg-producer</type>
                        <filename>media\\MULTI\testfile2.mpg</filename>
                        <width>1920</width>
                        <height>1080</height>
                        <progressive>true</progressive>
                        <fps>25</fps>
                        <loop>false</loop>
                        <frame-number>0</frame-number>
                        <nb-frames>4396</nb-frames>
                        <file-frame-number>0</file-frame-number>
                        <file-nb-frames>4396</file-nb-frames>
                     </producer>
                  </destination>
               </producer>
            </background>
            <index>0</index>
         </layer>
         <layer>
            <status>playing</status>
            <auto_delta>-1</auto_delta>
            <frame-number>1830920</frame-number>
            <nb_frames>4294967295</nb_frames>
            <frames-left>4293136376</frames-left>
            <foreground>
               <producer>
                  <type>ffmpeg-producer</type>
                  <filename>media\AMB.mp4</filename>
                  <width>720</width>
                  <height>576</height>
                  <progressive>true</progressive>
                  <fps>25</fps>
                  <loop>true</loop>
                  <frame-number>1830920</frame-number>
                  <nb-frames>4294967295</nb-frames>
                  <file-frame-number>520</file-frame-number>
                  <file-nb-frames>1600</file-nb-frames>
               </producer>
            </foreground>
            <background>
               <producer>
                  <type>empty-producer</type>
               </producer>
            </background>
            <index>1</index>
         </layer>
         <layer>
            <status>playing</status>
            <auto_delta>-1</auto_delta>
            <frame-number>1830758</frame-number>
            <nb_frames>4294967295</nb_frames>
            <frames-left>4293136538</frames-left>
            <foreground>
               <producer>
                  <type>separated-producer</type>
                  <fill>
                     <producer>
                        <type>ffmpeg-producer</type>
                        <filename>media\action.mpg</filename>
                        <width>1920</width>
                        <height>1080</height>
                        <progressive>false</progressive>
                        <fps>25</fps>
                        <loop>true</loop>
                        <frame-number>1830758</frame-number>
                        <nb-frames>4294967295</nb-frames>
                        <file-frame-number>22</file-frame-number>
                        <file-nb-frames>247</file-nb-frames>
                     </producer>
                  </fill>
                  <key>
                     <producer>
                        <type>ffmpeg-producer</type>
                        <filename>media\action_a.mpg</filename>
                        <width>1920</width>
                        <height>1080</height>
                        <progressive>false</progressive>
                        <fps>25</fps>
                        <loop>true</loop>
                        <frame-number>1830758</frame-number>
                        <nb-frames>4294967295</nb-frames>
                        <file-frame-number>22</file-frame-number>
                        <file-nb-frames>247</file-nb-frames>
                     </producer>
                  </key>
               </producer>
            </foreground>
            <background>
               <producer>
                  <type>empty-producer</type>
               </producer>
            </background>
            <index>2</index>
         </layer>
      </layers>
   </stage>
   <mixer/>
   <output>
      <consumers>
         <consumer>
            <type>oal-consumer</type>
            <index>500</index>
         </consumer>
         <consumer>
            <type>ogl-consumer</type>
            <key-only>false</key-only>
            <windowed>true</windowed>
            <auto-deinterlace>true</auto-deinterlace>
            <index>600</index>
         </consumer>
      </consumers>
   </output>
   <index>0</index>
</channel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:07:41.540

```
import xml.etree.ElementTree as ET                                              
tree = ET.parse('x.xml')                                                        
root = tree.getroot()                                                           

for child in root:                                                              
    print child.tag                                                             
    for child2 in child:                                                        
        print '> ',child2.tag                                                   

'''                                                                             
====                                                                            
output                                                                          
====                                                                            
video-mode                                                                      
stage                                                                           
>  layers                                                                       
mixer                                                                           
output                                                                          
>  consumers                                                                    
index                                                                           

''' 
```

关于问题：“结构因内容而异。” 每个 XML 都是根据一个定义，即 DTD 来定义的。文件的结构不能在内部更改，否则将是不明确的。如果你的意思是，你想根据节点上方的叶子解析树的部分，你将不得不想出一些 if then else 语句和函数，例如：

```
import xml.etree.ElementTree as ET                                              
tree = ET.parse('x.xml')                                                        
root = tree.getroot()                                                           

def parseStageTag(element):                                                     
    print 'parsing Stage'                                                       
    for child in element:                                                       
        if child.tag=='layers':                                                 
            parseLayersTag(child)                                               

def parseOutputTag(element):                                                    
    pass                                                                        

def parseLayersTag(element):                                                    
    print 'parsing Layers'                                                      
    for child in element:                                                       
        print child                                                             

for child in root:                                                              
    if child.tag=='stage':                                                      
        parseStageTag(child)                                                    

    for child2 in child:                                                        
        print '> ',child2.tag  
'''
output
parsing Stage
parsing Layers
<Element 'layer' at 0x1079e4250>
<Element 'layer' at 0x1079e4f10>
<Element 'layer' at 0x1079e6510>
>  layers
>  consumers
''' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T05:53:29.317

我在解析 XML 文件时发现了类似的问题，直到我发现[ElementTree 对 XPath 的支持](https://docs.python.org/2/library/xml.etree.elementtree.html#xpath-support)

例如，下面的代码：

```
import os
import xml.etree.ElementTree

os.chdir('C:/temp/blah')

et = xml.etree.ElementTree.parse('file.xml')
layerTagList = et.findall("./stage/layers/layer")

for curLayerTag in layerTagList:
    indexTag = curLayerTag.find("./index")
    print "Layer[%s]" %(indexTag.text)
    fgFiles = curLayerTag.findall(".//foreground//filename")
    for fileTag in fgFiles:
            print "  FG - %s" %(fileTag.text)
    bgFiles = curLayerTag.findall(".//background//filename")
    for fileTag in bgFiles:
            print "  BG - %s" %(fileTag.text) 
```

给出输出：

```
Layer[0]
  BG - media\\MULTI\testfile2.mpg
Layer[1]
  FG - media\AMB.mp4
Layer[2]
  FG - media\action.mpg
  FG - media\action_a.mpg 
```

# javascript - 如何告诉程序一个元素的值被刷新了

> ID：13376470
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:22.417
> 
> 标签：javascript, jquery

html元素的值发生变化时如何刷新它。我的意思是假设我有这个标签：

```
<div id="response" style="display:none;"><div> 
```

我有这个脚本：

```
<script type="text/javascript">
    $('#delete_link').click(function(e) {
        e.preventDefault();
        $('#result').html('').load('{% url messages_delete message.id %})
        alert($('#result').html());
        $('#'+$('#result').html()+'_list').trigger('click');
    });
</script> 
```

当用户单击 delete_link 时，服务器会向响应 div 发送一个值，因此之前为空的响应 div 现在有了一个值，我将使用它的值来知道我应该触发哪个选项卡。当我使用警报时，它知道此标签的值已更改，并且触发器起作用。但是没有警报，它似乎不了解值已更改并且触发器不起作用。有没有办法告诉程序该值已更改？我不想使用警报。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:56:56.833

`.Load()`是异步的，你需要在加载回调函数中设置你的内容html。

```
 $('#delete_link').click(function(e) {
        e.preventDefault();
        $('#result').html('').load('{% url messages_delete message.id %}',function(){
           $('#'+$('#result').html()+'_list').trigger('click');
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:57:45.120

AJAX 是异步的，你可以使用请求完成后执行的加载回调函数。

```
$('#delete_link').click(function(e) {
    e.preventDefault();
    $('#result').load('url', function(){
       $('#'+ $(this).html() +'_list').click()
    })
}); 
```

请注意，在添加新标记之前加载会删除元素的当前标记，因此使用`html('')`是多余的。

# javascript - 如果未选中任何复选框，请注意！.. 否则 .. 提交。(Javascript)

> ID：13376471
> 
> 赞同：1
> 
> 时间：2012-11-14T09:53:22.783
> 
> 标签：javascript, forms, checkbox, validation

语言：**Javascript**

我真的很讨厌问这样一个看似简单的问题，但看起来很简单，我无法让它发挥作用。

我正在尝试完全**仅使用纯 Javascript（无库支持）**来完成此操作。

我有一个带有复选框的表单...
所有复选框都被命名`files[]`，因为我在数组中使用了结果：

```
<input type='checkbox' name='files[]' id='1' value='1' /> file 1<br>
<input type='checkbox' name='files[]' id='2' value='2' /> file 2<br>
<input type='checkbox' name='files[]' id='3' value='3' /> file 3<br> 
```

我想要做的是，当用户**提交**表单时：

*   **如果**没有选中复选框 >> 返回**ALERT！**
*   **否则**提交表格

这是我的**表格**：

```
<form name="deleteFiles" action="" method="post" onsubmit="return confirm_update();">

    <input type='checkbox' name='files[]' id='1' value='1' /> file 1<br>
    <input type='checkbox' name='files[]' id='2' value='2' /> file 2<br>
    <input type='checkbox' name='files[]' id='3' value='3' /> file 3<br>
    <input type="submit" value="Submit" name="submit">

</form>​ 
```

这是我的**Javascript 代码**：

```
function confirm_update() {
    var aCheckbox = document.deleteFiles.getElementsByTagName('input');

    if (aCheckbox.checked){
    return confirm("Are you sure you want to proceed deleting the selected files?");

    } else {
        alert("You do not have any selected files to delete.");
        return false;
    }
}​ 
```

**在行动：http:** [//jsfiddle.net/DVqwB/3/](http://jsfiddle.net/DVqwB/3/)

显然，它不起作用，我知道我应该使用`getElementsById`，但由于它们每个都有唯一的 ID，所以我不能使用它。而且我也知道这个网站上有很多解决方案，但如果你看一下 - 他们实际上使用 jQuery ......

任何帮助和指导将不胜感激！太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:57:44.550

迭代集合的正确方法是：（完整示例）

```
function confirm_update() {
    var arrCheckboxes = document.deleteFiles.elements["files[]"];
    var checkCount = 0;
    for (var i = 0; i < arrCheckboxes.length; i++) {
        checkCount += (arrCheckboxes[i].checked) ? 1 : 0;
    }

    if (checkCount > 0){
        return confirm("Are you sure you want to proceed deleting the selected   files?");
    } else {
        alert("You do not have any selected files to delete.");
        return false;
    }
}
```

```
body {
    margin: 30px;
}
```

```
<form name="deleteFiles" action="" method="post" onsubmit="return confirm_update();">

    <input type='checkbox' name='files[]' id='1' value='1' /> file 1<br />
    <input type='checkbox' name='files[]' id='2' value='2' /> file 2<br />
    <input type='checkbox' name='files[]' id='3' value='3' /> file 3<br />
    <input type="submit" value="Submit" name="submit" />

</form>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:12:29.523

您可以使用此脚本。只需以形式更改您的文件名

```
 <form id="deleteFiles" name="deleteFiles" action="yourFileName.html" method="post" onsubmit="return confirm_update();">

    <input type='checkbox' name='files[]' id='1' value='1' /> file 1<br>
    <input type='checkbox' name='files[]' id='2' value='2' /> file 2<br>
    <input type='checkbox' name='files[]' id='3' value='3' /> file 3<br>
    <input type="submit" value="Submit" name="submit">

</form>
    <script type="text/javascript">
    function confirm_update() {
        check=false;
        var aCheckbox = document.getElementById('deleteFiles').elements;
        for(i=0;i<aCheckbox.length;++i)
        {
            if(aCheckbox[i].type=='checkbox' && aCheckbox[i].checked)
           {
               check=true;
           }
         }
         if(check==true)
         {
             return confirm("Do u really want to delete?");
        }
        else
            {alert("you haven't selected any of the checkboxex");
            return false;
            }

    }
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:58:01.360

`getElementsByTagName`返回一个 NodeList（类似于数组），而不是单个元素。

您必须循环遍历它并依次测试每个元素，并且只有在循环结束而没有找到匹配条件的情况下才处理“else”场景。

# java - 在 Spring MVC 应用的 JSP 页面中访问资源

> ID：13376473
> 
> 赞同：6
> 
> 时间：2012-11-14T09:53:26.480
> 
> 标签：java, spring, jsp, spring-mvc

我对 Spring 还很陌生，在我的 Spring mvc 应用程序中访问我的资源时遇到了问题。我试过谷歌并使用堆栈溢出来找到答案（这些都没有帮助我[可能的解决方案 1](https://stackoverflow.com/questions/11146212/jsp-access-spring-mvc-resources)，或[可能的解决方案](https://stackoverflow.com/questions/12847247/not-displaying-images-in-spring-mvc)，[可能的解决方案 3](https://stackoverflow.com/questions/4169266/where-to-place-images-css-in-spring-mvc-app)，[弹簧框架](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)）但我发现没有一个解决了我的问题或提高了我对问题（可能只是因为我不太了解提到的解决方案）。

我已设法将我的 css 文件嵌入到网页中，但使用以下代码：

```
<%@include file="css/style.css" %> 
```

但由于显而易见的原因，我无法以这种方式使用 URL 访问它。我也尝试在我的 web.xml 文件中使用以下内容，但它没有效果，我承认我并不真正理解这种情况下的映射，所以这可能是一个问题

```
<mvc:annotation-driven />
<mvc:resources mapping="/images/**" location="/images/" />
<mvc:resources mapping="/css/**" location="/css/" /> 
```

我也尝试过分别使用以下各项：

```
<img src="<%=request.getContextPath()%>/images/logo.jpg"/>

<img src="<%=request.getContextPath()%>/src/main/resources/images/logo.jpg"/> 
```

这是我的项目布局：

![我的项目结构](../Images/47f73f39b0f9f75d66df2a814d6791b8.png)

这是我的 web.xml：

```
<web-app id="WebApp_ID" version="2.4" 
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
  <display-name>MyProject Application</display-name>
  <servlet>
    <servlet-name>myServlet</servlet-name>
        <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>myServlet</servlet-name>
        <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

这是我的 myServlet-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">
    <!-- -->
     <mvc:annotation-driven />
    <mvc:resources mapping="/images/**" location="/images/" />
    <mvc:resources mapping="/css/**" location="/css/" />
    <bean name="/index.html" 
    class="com.myproject.controller.AdminController" />
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
        <property name="prefix">
            <value>/WEB-INF/pages/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
</beans> 
```

以防万一这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myproject</groupId>
    <artifactId>myProject</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>myProject Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <properties>
        <springVersion>3.0.4.RELEASE</springVersion>
    </properties>
    <dependencies>

        <!-- JUnit -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <!-- ORACLE JDBC driver, need install yourself -->
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>11.2.0</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.3.Final</version>
        </dependency>

        <!-- Spring framework -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springVersion}</version>
        </dependency>

        <!-- for compile only, your container should have this -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Commons-logging & log4j -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.12</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>admin_UI</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <webappDirectory>/sample/servlet/container/deploy/directory</webappDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

如果我可以像访问我的 jsp 页面（即通过 URL）一样从 webapp/WEB-INF/pages 中访问图像和 css 文件夹以及这些文件夹的内容，我会很高兴，但理想情况下我想了解我应该如何正确执行此操作，即我应该映射哪个文件夹（src\main\resources 或 src\main\webapp\WEB-INF\some_resource_folder）以及我应该如何映射它。

如果需要更多信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T10:12:37.110

您应该将所有静态 Web 内容（例如图像、css 和 javascript）放在 webcontent（根目录）目录下的资源目录中。

![在此处输入图像描述](../Images/89cc507dc6e53df61e82582a2510a929.png)

然后在`myServlet-servlet.xml`指定目录为资源目录。这将告诉调度程序不要处理对静态资源的请求。

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

在您的 jsp 文件中，您应该使用依赖于 JSP EL 解析的上下文路径的根相对 url 访问这些资源。

```
<link href="${pageContext.servletContext.contextPath}/resources/My_CSS.css" rel="stylesheet"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:37:56.960

使用时：

```
<mvc:resources mapping="/resources/**" location="/META-INF/RESOURCES/" /> 
```

在 jsp 中使用此代码：

```
<link href="<c:url value="/"/>resources/My_CSS.css" rel="stylesheet"/> 
```

看看区别。CAPS RESOURCES 定位文件路径。和资源位于网络路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T00:23:53.383

设置资源顺序如下

```
 <mvc:resources mapping="/resources/**" location="/resources/" order="-1"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T23:19:42.947

在你的jsp文件中你应该设置，

```
<c:set var="context" value="${pageContext.request.contextPath}" /> 
```

并且您的资源文件 js、css、img 等包含它们，

```
<script src="${context}/resources/your.file.js" type="text/javascript"></script>
<link href="${context}/resources/your.min.css" rel="stylesheet" type="text/css"/> 
```

你也应该在href之前使用它来连接控制器链接，比如

```
<a href="${context}/yourPage"> 
```

通过这种方式，您可以使用在 servlet 容器或应用服务器 Tomcat、jetty 等中定义的上下文路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-05T13:53:22.917

您可以像这样配置 spring，而不是混合 JSTL 和 JSP EL：

```
<mvc:resources mapping="/resources/**" location="/WEB-INF/pages/" /> 
```

在您的情况下，在 JSP 中使用以下内容：

```
<link href="<c:url value="/resources/My_CSS.css"/>" rel="stylesheet"/> 
```

# java - AsyncTask 错误 ANDROID

> ID：13376474
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:27.387
> 
> 标签：java, android, eclipse, android-asynctask

我正在尝试为一个方法实现一个异步任务，但我遇到了一个错误。我不知道是什么问题或我做错了什么。

**下面是我的代码**

```
class abc extends AsyncTask<String, String, String> {
    protected String doInBackground(String... message) {
        Bundle parameters = new Bundle();
        parameters.putString("message", message);
        parameters.putString("description", "topic share");
        try {
            facebook.request("me");
            String response = facebook.request("me/feed", parameters, "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("")
                    || response.equals("false")) {
                showToast("Blank response.");
            } else {
                showToast("Message posted to your facebook wall!");
            }
            finish();
        } catch (Exception e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }
        return null;
    }
} 
```

**这是我出错的部分**

```
parameters.putString("message", message); 
```

**错误提示：** Bundle 类型中的 putString(String, String) 方法不适用于参数 (String, String[])

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:02:26.720

问题在于这个

String... 是一种数据类型，它接受一组字符串。所以你不能将它类型转换为字符串。

我了解您的问题，最简单的解决方法是

改变

```
parameters.putString("message", message); 
```

至

```
parameters.putString("message", message[0]); 
```

所以这将把第一个字符串传递给异步任务。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T09:57:49.933

该错误表明您正在尝试使用错误的参数类型调用方法。该方法需要 a`String`作为第二个参数，但您使用的是`String[]`（字符串数组）。

在这种情况下，此错误的解决方案相当简单，因为 Android API 提供了一种用于`String[]`. 只需更换

```
parameters.putString("message", message); 
```

和

```
parameters.putStringArray("message", message); 
```

* * *

因为您只希望第一个元素使用此代码。它检查数组的长度以避免`ArrayOutOfBoundsException`.

```
if (message.length > 0) {
    parameters.putString("message", message[0]);
} 
```

# jsf - 如何显示现有的 Facelets 页面 ?

> ID：13376475
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:30.583
> 
> 标签：jsf, primefaces, facelets

是否可以完全显示以前创建的 Facelets 页面`<p:dialog>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T10:21:59.273

放在`<ui:include src="myPage.xhtml" />`你的`<p:dialog`

像这样

```
<p:dialog id="dialog" widgetVar="dlg" >  
    <ui:include src="myPage.xhtml" />
</p:dialog> 
```

# c++ - 工作队列的这种变体是某种模式还是通用结构？

> ID：13376476
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:38.470
> 
> 标签：c++, boost

我想知道以下概念是否称为编程模式。

想象一个工作队列，但不是在处理时删除每个队列条目，而是应该在另一个线程捕获删除事件或触发删除事件时将其删除。

所以它会是这样的：

*   命令进入队列
*   第二个命令进入队列
*   第三...
*   第一个命令得到处理
*   第一个命令等待被删除
*   第二个命令得到处理
*   第一个命令的删除事件被触发
*   第一个命令被删除
*   第二个命令等待被删除
*   ...

我希望，我说得足够清楚，可以理解。

现在有没有实现这种行为的 boost 库？是否有代表这种行为的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:57:46.893

据我所见，您只是在谈论两个队列-“新颖”的一个是待删除的队列。标准队列（deque）应该没问题。您需要一个互斥锁和一个条件变量来表示删除事件。想要一个这样的模式的名字有点夸张（现在人们期望太多了）......如果我在描述它，我可能会说我们有一个解耦的删除线程（假设你是这样实现的），一个异步删除过程（类似地），甚至延迟元素删除（即使没有在单独的线程中完成也是如此）。

# svn - 如何解决svn错误E155010？

> ID：13376483
> 
> 赞同：27
> 
> 时间：2012-11-14T09:53:52.477
> 
> 标签：svn

我的工作副本处于不一致的状态：

```
$ svn status
svn: E155037: Previous operation has not finished; run 'cleanup' if it was interrupted
$ svn cleanup
svn: E155010: The node '<myprojectpath>/libs/armeabi/gdbserver' was not found. 
```

我被困住了。有办法解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-21T11:16:49.320

我有同样的问题，我发现这很容易解决（就我而言）。打开控制台并转到出现问题的文件夹（在您的情况下`<myprojectpath>/libs/armeabi/gdbserver`）。

运行`svn up`。它将向您显示一条显示相同错误的行`svn: E155010:...`。

```
lore@loreLaptop ~/workspace/Ng
$ svn up
Updating '.':
svn: E155010: The node '/home/lore/workspace/Ng/.classpath' was not found. 
```

运行`svn cleanup`。

```
lore@loreLaptop ~/workspace/Ng
$ svn cleanup 
```

再次运行`svn up`：将显示一个菜单，允许您编辑/解决/接受/...特定配置：

```
lore@loreLaptop ~/workspace/Ng
$ svn up
Updating '.':
Conflict for property 'svn:ignore' discovered on '/home/lore/workspace/Ng'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (s) show all options: s

  (e)  edit             - change merged file in an editor
  (df) diff-full        - show all changes made to merged file
  (r)  resolved         - accept merged version of file

  (dc) display-conflict - show all conflicts (ignoring merged version)
  (mc) mine-conflict    - accept my version for all conflicts (same)
  (tc) theirs-conflict  - accept their version for all conflicts (same)

  (mf) mine-full        - accept my version of entire file (even non-conflicts)
  (tf) theirs-full      - accept their version of entire file (same)

  (p)  postpone         - mark the conflict to be resolved later
  (l)  launch           - launch external tool to resolve conflict
  (s)  show all         - show this list

Select: (p) postpone, (df) diff-full, (e) edit,
        (s) show all options: e
Select: (p) postpone, (df) diff-full, (e) edit, (r) resolved,
        (s) show all options: r
 U   .
Updated to revision 193.
Summary of conflicts:
  Skipped paths: 2 
```

运行`svn up`以确保冲突已解决：

```
lore@loreLaptop ~/workspace/Ng
$ svn up
Updating '.':
At revision 193.
Summary of conflicts:
  Skipped paths: 2 
```

就这样。希望对某人有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-29T14:46:50.853

svn 1.7：在尝试向 SVN 添加不属于我的目录树后，我遇到了这种情况。它失败并陷入了相同的 OP 错误。

结果是*sqlite*`work_queue` SVN文件的表中有一些SVN无法处理的条目，要么是因为权限，要么是因为我后来删除了该文件。

 *我解决了它：

```
> sqlite3 .svn/wc.db
SQLite version 3.6.20
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> delete from work_queue;
sqlite> .quit

> svn cleanup 
```

然后递归恢复，一切都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T09:27:30.723

开始使用 xCode5 后，我遇到了同样的问题。每当我重新签出时，我都会正确获取文件，但每当我尝试进行差异或尝试签入某些文件时，它都会给我 E155010 错误，说找不到节点。

我尝试了 svn cleanup 和所有但它没有工作（svn up 没有给出任何错误）。事实上，这个问题也发生在我所有的同事身上。对此进行了一轮研究，但找不到解决方法。所以最后作为一种解决方法，我们开始使用 SvnX 客户端，并且一切正常。

[SVNX 主页](http://code.google.com/p/svnx/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-07T08:54:18.197

检查与 Svn 路径不对应的大写或小写问题。当我消除大写或小写不对应的问题时，我修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-05T11:45:11.303

在 Eclipse + Cygwin 下，这为我做了：

1.  转到容器文件夹，`svn cleanup`.
2.  转到 Eclipse，选择容器文件夹，`Team > Update`. 如果你没问题，你也可以*从存储库替换*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-23T17:20:13.990

它也发生在我身上，原因与 Sigismondo 报告的内容有些相关：

我在本地目录中复制了一堆文本文件。我想调用`svn setprops`*.txt 来制作它们`text/plain`并且忘记了额外的文件（我不想提交）。

解决方案是将这些“额外”文件临时移动到别处。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-06T11:38:29.003

我不得不稍微调整@baronKarza 给出的答案。

由于我的特定 SVN 项目充满了“外部”，我必须将“--include-externals”附加到 svn cleanup 命令。

```
 svn cleanup --include-externals 
```*

# deployment - 如何将 EJB 应用程序部署为 Exe 文件

> ID：13376484
> 
> 赞同：0
> 
> 时间：2012-11-14T09:53:56.107
> 
> 标签：deployment, ejb-3.0

如果这个问题让你烦恼，我很抱歉。我编写了一个基于 EJB 的应用程序，现在我想将它部署为单个 Exe 文件（而不是 War 文件）。这意味着如果执行该 Exe 文件，所有相关的东西，如 Web 服务器、数据库服务器……将自动安装，以使我的应用程序能够顺利运行。JIRA 安装程序是一个典型示例 (http://www.atlassian.com/try)。我用谷歌搜索了很多，但我找不到正确的答案。你能告诉我我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:54:19.677

Glassfish 有一个嵌入式 Java EE 容器：[http](http://embedded-glassfish.java.net) ://embedded-glassfish.java.net这将允许您将 Web 服务器和数据库嵌入到您的应用程序中（实际上是一个完整的 Java EE 容器）。

下一步是嵌入一个 java-runtime 并将其与上面捆绑为一个 exe。我没试过。但是从上述步骤开始，看看是否足够，然后开始阅读以下内容：[Embed a JRE in a Windows executable?](https://stackoverflow.com/questions/2258932/embed-a-jre-in-a-windows-executable)

# html - 如果多个样式规则适用于一个元素，则优先顺序

> ID：13376486
> 
> 赞同：1
> 
> 时间：2012-11-14T09:54:10.090
> 
> 标签：html, css

在 HTML 中，当多个样式规则适用于一个元素时，优先顺序是什么？

```
Rules that apply to an element identified by an id
Rules that apply to all elements of a particular class
Rules that apply to one or more specified tags 
```

我认为是 id>class>tags，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:53:41.353

# 解释

有很多事情在起作用（像往常一样……），但对你来说重要的顺序是：

*   使用具有最高特异性的样式
*   如果多个具有相同的特性，则使用最新的

选择器的顺序[和/或 css 的使用，为了完整性]（以及它们添加到特异性值的内容是）：

*   标签
*   班级
*   ID
*   内联样式（通过`style=""`）
*   `!important`
*   标签 +`!important`
*   班级 +`!important`
*   身份证+`!important`
*   内联样式 +`!important`

有测试表明，`256`一个元素/选择器上的类比 id 具有更高的特异性。但是在现实生活中，您将主要（如果您曾经“正确”使用 CSS）处理类的数量 + 在 css 文件中的位置（您不应该使用#id 来设置样式，因为它没有给您带来优于类和标签的优势大多仅用于通用样式）

在此处阅读有关特异性的更多信息：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# 例子

HTML：

```
<div id="johnny" class="walker whisky"> -- </div> 
```

CSS：

```
/* example one */
div { border-color: red; } // border is red
.whisky { border-color: brown; } // now it's brown
#johnny { border-color: black; } // now it's black
div#johnny { border-color: red; } // it's red again
.walker { border-color: green !important; } // it's green

/* example two */ 
.whisky {border-color: brown; }
.whisky.walker {border-color: green; }
/* green */

/* example two */ 
.whisky.walker {border-color: brown; }
.whisky {border-color: green !important; }
/* green */ 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:55:23.137

> 我认为是 id>class>tags，对吗？

是的，你是。

这称为特异性；有关详细信息，请参阅[此](http://www.w3.org/TR/CSS21/cascade.html#specificity)和[此](http://www.w3.org/TR/selectors/#specificity)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:57:03.180

对于使用样式格式规则，我建议使用例如：Chrome，因为它的 Web Developer Plugin 让您深入了解规则如何实际应用于特定节点......

# c# - 将新图像添加到列表视图时，以前的图像已更改

> ID：13376491
> 
> 赞同：3
> 
> 时间：2012-11-14T09:54:26.713
> 
> 标签：c#, winforms

我对列表视图很陌生。我正在尝试在列表视图中显示图像。当我添加新项目时，所有以前的项目都会更改为新项目。所以列表视图具有相同的图像。我已经完成了谷歌搜索，但仍然找不到解决方案。请帮帮我。以下是我的代码。

```
ImageList imageList = new ImageList();

        OpenFileDialog opend1 = new OpenFileDialog();

        opend1.Filter = "Image Files(*.BMP;*.JPG;*.GIF)|*.BMP;*.JPG;*.GIF|All files (*.*)|*.*";

        opend1.Multiselect = true;

        if (opend1.ShowDialog() == DialogResult.OK)
        {

            listView1.View = View.LargeIcon;

            imageList.ImageSize = new Size(100, 100);

            for (int c = 0; c < opend1.FileNames.Length; c++)
            {

                Image i = Image.FromFile(opend1.FileNames[c].ToString());

                Image img = i.GetThumbnailImage(100, 100, null, new IntPtr());

                imageList.Images.Add(img);

            }

            listView1.LargeImageList = imageList;

            for (int j = 0; j < imageList.Images.Count; j++)
            {

                ListViewItem lstItem = new ListViewItem();

                lstItem.ImageIndex = j;

                listView1.Items.Add(lstItem);
            }

            listView1.Refresh();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:59:14.047

在 WinForms 中使用`ListView`时，应将所有图像放入[ImageList](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.aspx)中，并仅提供该列表中图像的索引给您的`ListViewItems`.

```
listView1.LargeImageList = imageList1;
listView1.SmallImageList = imageList2;
listView1.Items.Add("Foo", 0);
listView1.Items.Add("Bar", 1); 
```

创建和填充图像列表 id 设计器非常简单。您也可以手动进行：

```
imageList1.Images.Add(fooImage); // will have index 0
imageList1.Images.Add(barImage); // will have index 1 
```

**更新**您的代码看起来不错。它是您应用程序中的确切代码吗？您只需要稍微简化一下：

```
listView1.View = View.LargeIcon;
imageList.ImageSize = new Size(100, 100);

foreach(var fileName in opend1.FileNames)
{
    Image img = Image.FromFile(fileName);
    imageList.Images.Add(img.GetThumbnailImage(100, 100, null, new IntPtr()));
}

listView1.LargeImageList = imageList;
for (int index = 0; index < imageList.Images.Count; index++)
     listView1.Items.Add(new ListViewItem() { ImageIndex = index });

listView1.Refresh(); 
```

# android - 从数据库中检索数据时显示 NULL POINTER EXCEPTION

> ID：13376493
> 
> 赞同：1
> 
> 时间：2012-11-14T09:54:28.607
> 
> 标签：android, database

因为，我是android世界的新手，所以请帮助我。当我使用 Android SQLite 通过这些代码从数据库中检索数据时-

```
Cursor cursor;
DatabaseConnector dbConnector = new DatabaseConnector(this);
private ListAdapter conAdapter;
String[] from_for_text_in_list = {"name"};
int[] to_for_text_in_list = {R.id.title_info_txt_v}
cursor = dbConnector.getAllContacts();
conAdapter = new SimpleCursorAdapter(Infoclass.this, R.layout.listview_layout, null, from_for_text_in_list, to_for_text_in_list);
setListAdapter(conAdapter); 
```

现在我将 getAllmethod() 声明为-

```
public Cursor getAllContacts()
{
    return database.rawQuery("SELECT _id, name FROM tcc_info_table ", new String[]{"_id", "name"});
} 
```

“名称”只是我的应用程序中数据库的列名。

当我运行我的应用程序时，它在 getAllContact() 方法中显示 NULL POINTER Exception 。即使我通过 SQLite 浏览器检查我的数据库，我发现数据插入成功。但数据不会从数据库检索到列表视图。我的 logCat 错误如下 -

```
 11-14 12:01:21.694: E/Trace(30607): error opening trace file: No such file or directory (2)

11-14 12:01:22.475: D/AndroidRuntime(30607): Shutting down VM
11-14 12:01:22.475: W/dalvikvm(30607): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-14 12:01:22.495: E/AndroidRuntime(30607): FATAL EXCEPTION: main
11-14 12:01:22.495: E/AndroidRuntime(30607): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kt.narendramodi/com.kt.narendramodi.ModiForIndia}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kt.narendramodi/com.kt.narendramodi.InfoNarendraModi}: java.lang.IllegalArgumentException: Cannot bind argument at index 2 because the index is out of range.  The statement has 0 parameters.
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.os.Looper.loop(Looper.java:137)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at java.lang.reflect.Method.invokeNative(Native Method)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at java.lang.reflect.Method.invoke(Method.java:511)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at dalvik.system.NativeStart.main(Native Method)
11-14 12:01:22.495: E/AndroidRuntime(30607): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kt.narendramodi/com.kt.narendramodi.InfoNarendraModi}: java.lang.IllegalArgumentException: Cannot bind argument at index 2 because the index is out of range.  The statement has 0 parameters.
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1900)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:694)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.widget.TabHost.setCurrentTab(TabHost.java:358)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.widget.TabHost.addTab(TabHost.java:236)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at com.kt.narendramodi.ModiForIndia.onCreate(ModiForIndia.java:41)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.Activity.performCreate(Activity.java:5008)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-14 12:01:22.495: E/AndroidRuntime(30607):    ... 11 more
11-14 12:01:22.495: E/AndroidRuntime(30607): Caused by: java.lang.IllegalArgumentException: Cannot bind argument at index 2 because the index is out of range.  The statement has 0 parameters.
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.database.sqlite.SQLiteProgram.bind(SQLiteProgram.java:212)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:166)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.database.sqlite.SQLiteProgram.bindAllArgsAsStrings(SQLiteProgram.java:200)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at com.kt.nanrendramodi.databasehelper.DatabaseConnector.getAllContacts(DatabaseConnector.java:60)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at com.kt.narendramodi.InfoNarendraModi.onCreate(InfoNarendraModi.java:94)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.Activity.performCreate(Activity.java:5008)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-14 12:01:22.495: E/AndroidRuntime(30607):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-14 12:01:22.495: E/AndroidRuntime(30607):    ... 21 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:10:06.987

你必须检查两件事：

1.  您的数据库应初始化为可读写的数据库。

    `database = yourDbHelper.getReadableDatabase();`

2.  如果您已完全填写 SQL 查询，则不需要这些选择参数。

    `database.rawQuery("SELECT _id, name FROM tcc_info_table ", null);`

# c - C 中未命名的结构/联合有什么好处？

> ID：13376494
> 
> 赞同：11
> 
> 时间：2012-11-14T09:54:29.770
> 
> 标签：c, struct, unions

我发现一个代码实现为如下所示的类似演示..

```
struct st
{
 int a;
 struct
 {
 int b;
 };
}; 
```

6.58`struct/union`内的未命名字段`structs/unions`

允许`ISO C11`。

但是它有什么好处呢？

因为无论如何我都可以以相同的方式访问数据成员

```
int main()
{
 struct st s;
 s.a=11;
 s.b=22;
 return 0;
} 
```

在 gcc 4.5.2 上编译，使用 ,

```
gcc -Wall demo.c -o demo 
```

并且没有错误，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T10:29:20.387

它不必是结构内的匿名结构，我觉得这不是很有用：这通常只会通过引入更多填充来稍微改变布局，没有其他可见效果（与将子结构的成员内联到父结构）。

我认为匿名结构/联合的优势在别处：它们可用于将匿名结构放置在联合中或将匿名联合放置在结构中。

例子：

```
union u
{
  int i;
  struct { char b1; char b2; char b3; char b4; };
}; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-14T09:55:42.067

好处是很明显的，不是吗？它使程序员免于想出一个名字！由于[命名事物很困难](http://laughingmeme.org/2005/12/23/there-are-only-two-hard-things-in-computer-science-cache-invalidation-and-naming-things/)，因此如果没有真正需要，可以避免这样做是很好的。

这也是一个非常明确的信号，表明这`struct`是本地的，并且从未在其他任何地方使用，但在作为父结构中的字段的上下文中，这是非常非常好的信息，因为它减少了不必要的耦合的*可能性*。

把它想象成`static`; 它限制了内部`struct`对外部的可见性，其方式类似于（但当然不等同于）如何`static`将全局符号的可见性限制在它们出现的编译单元中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-18T23:49:24.170

我刚刚遇到了匿名的巨大好处`union`。但是请注意，这不是胆小的人的故事，也不是推荐的做法。

**注意：**另请参见[struct not in c99 中的匿名联合？](https://stackoverflow.com/questions/3228104/anonymous-union-within-struct-not-in-c99)

在包含数百个源代码文件的旧 C 程序中，有一个全局变量 a `struct`，其中包含 a`struct`作为成员。所以全局变量的类型定义看起来像这样：

```
typedef struct {
    LONG       lAmount;
    STRUCTONE  largeStruct;  // memory area actually used for several different struct objects
    ULONG      ulFlags;
} STRUCTCOMMON; 
```

STRUCTONE`struct`是几个大型结构之一，但在编写此代码时其他结构都小于 STRUCTONE。所以这个内存区域`largeStruct`被用作一个`union`但没有正确的源语句表明这一点。相反，各种`struct`变量被复制到这个区域使用`memcpy()`. 更糟糕的是，有时这是通过全局变量的实际名称，有时是通过指向全局变量的指针。

随着时间的推移，最近的变化通常会导致其他结构之一成为最大的。而且我不得不浏览一百个文件，以寻找这些文件以及所有各种别名和其他所有内容的使用位置。

然后我想起了匿名工会。因此，我将其修改`typedef`为以下内容：

```
typedef struct {
    LONG       lAmount;
    union {
        // anonymous union to allow for allocation of largest space needed
        STRUCTONE  largeStruct;  // memory area actually used for several different struct objects
        STRUCTTHREE  largerStruct;  // memory area for even larger struct
     };
    ULONG      ulFlags;
} STRUCTCOMMON; 
```

然后重新编译所有东西。

所以现在那些我不高兴地期待的源代码审查和回归测试不再需要了。

我现在可以开始使用这个全局来慢慢修改源代码，以便在我自己的时间表上将此源代码提升到更现代的标准。

**附录 - 匿名`struct`中的匿名`union`**

在同一个源代码体中工作时，我遇到了这种技术的应用程序，它带有一个二进制记录，其中可能包含来自几个不同结构之一的日期，这些结构应该是相同的长度。我发现的问题是由于程序员错误，一个结构的大小与其他结构不同。

作为纠正这个问题的一部分，我想要一个允许编译器计算出数据结构的正确大小的解决方案。

由于这些结构在结构的几个成员中包含一些差异，并添加了填充变量以使它们都具有相同的大小，因此我选择了匿名联合，除了其中一个结构外，它工作得很好。

我发现我可以添加一个匿名结构作为联合的一部分，这样只要联合的各个成员和添加的匿名结构具有不同的名称，它就可以在 Visual Studio 2015 中正常编译。

**重要提示：**此解决方案需要`#pragma pack(1)`使用 Visual Studio 2015 在字节边界上打包结构和联合。如果不使用`pragma`编译器，可能会在各种结构和联合中引入未知填充。

我创建了以下内容`define`以标准化匿名`union`和匿名`struct`。

```
#define PROGRPT_UNION_STRUCT  \
    union {  \
        SHORT   sOperand1;                              /* operand 1 (SHORT) */  \
        LONG    lOperand1;                              /* operand 1 (LONG) */  \
        PROGRPT_ITEM Operand1;                          /* operand 1 */  \
        struct {  \
            UCHAR   uchReserved3;                           /* */  \
            USHORT  usLoopEnd;                              /* offset for loop end */  \
            UCHAR   uchReserved4;                           /* */  \
        };  \
    }; 
```

然后将其用作此示例中的三个结构，这些结构用于访问从文件读取的数据记录中的二进制数据。

```
 /* loop record */
typedef struct {
    UCHAR   uchOperation;                           /* operation code (LOOP) */
    UCHAR   uchRow;                                 /* position (row) */
    UCHAR   uchLoopBrace;                           /* loop brace (begin/end) */
    UCHAR   uchReserved1;                           /* */
    TCHAR   auchReserved2[ 2 ];                     /* */
    UCHAR   uchCondition;                           /* condition code */
    PROGRPT_ITEM LoopItem;                          /* loop record */
    PROGRPT_UNION_STRUCT
    PROGRPT_ITEM Reserved5;                         /* */
} PROGRPT_LOOPREC;

    /* print record */
typedef struct {
    UCHAR   uchOperation;                           /* operation code (PRINT) */
    UCHAR   uchRow;                                 /* position (row) */
    UCHAR   uchColumn;                              /* position (column) */
    UCHAR   uchMaxColumn;                           /* max no of column */
    TCHAR   auchFormat[ 2 ];                        /* print format/style */
    UCHAR   uchCondition;                           /* condition code */
    PROGRPT_ITEM PrintItem;                         /* print item */
    PROGRPT_UNION_STRUCT
    PROGRPT_ITEM Operand2;                          /* ope2 for condition */
} PROGRPT_PRINTREC;

    /* mathematics record ( accumulator.total = LONG (+,-,*,/) opr2) */
typedef struct {
    UCHAR   uchOperation;                           /* operation code (MATH) */
    UCHAR   uchRow;                                 /* position (row) */
    UCHAR   uchColumn;                              /* position (column) */
    UCHAR   uchMaxColumn;                           /* max no of column */
    TCHAR   auchFormat[ 2 ];                        /* format style */
    UCHAR   uchCondition;                           /* condition code */
    PROGRPT_ITEM Accumulator;                       /* accumulator */
    PROGRPT_UNION_STRUCT
    PROGRPT_ITEM Operand2;                          /* operand 2 */
} PROGRPT_MATHTTL; 
```

原本是

```
typedef struct {
    UCHAR   uchOperation;                           /* operation code (LOOP) */
    UCHAR   uchRow;                                 /* position (row) */
    UCHAR   uchLoopBrace;                           /* loop brace (begin/end) */
    UCHAR   uchReserved1;                           /* */
    TCHAR   auchReserved2[ 2 ];                     /* */
    UCHAR   uchCondition;                           /* condition code */
    PROGRPT_ITEM LoopItem;                          /* loop record */
    UCHAR   uchReserved3;                           /* */
    USHORT  usLoopEnd;                              /* offset for loop end */
    UCHAR   uchReserved4;                           /* */
    PROGRPT_ITEM Reserved5;                         /* */
} PROGRPT_LOOPREC;

    /* print record */
typedef struct {
    UCHAR   uchOperation;                           /* operation code (PRINT) */
    UCHAR   uchRow;                                 /* position (row) */
    UCHAR   uchColumn;                              /* position (column) */
    UCHAR   uchMaxColumn;                           /* max no of column */
    TCHAR   auchFormat[ 2 ];                        /* print format/style */
    UCHAR   uchCondition;                           /* condition code */
    PROGRPT_ITEM PrintItem;                         /* print item */
    PROGRPT_ITEM Operand1;                          /* ope1 for condition */
    PROGRPT_ITEM Operand2;                          /* ope2 for condition */
} PROGRPT_PRINTREC;

    /* mathematics record ( accumulator.total = LONG (+,-,*,/) opr2) */
typedef struct {
    UCHAR   uchOperation;                           /* operation code (MATH) */
    UCHAR   uchRow;                                 /* position (row) */
    UCHAR   uchColumn;                              /* position (column) */
    UCHAR   uchMaxColumn;                           /* max no of column */
    TCHAR   auchFormat[ 2 ];                        /* format style */
    UCHAR   uchCondition;                           /* condition code */
    PROGRPT_ITEM Accumulator;                       /* accumulator */
    LONG    lOperand1;                              /* operand 1 (LONG) */
    PROGRPT_ITEM Operand2;                          /* operand 2 */
} PROGRPT_MATHTTL; 
```

使用`union`所有各种记录类型，如下所示：

```
typedef union {
    PROGRPT_LOOPREC  Loop;                          /* loop record */
    PROGRPT_PRINTREC Print;                         /* print record */
    PROGRPT_MATHOPE  MathOpe;                       /* math (with operand) */
    PROGRPT_MATHTTL  MathTtl;                       /* math (with total) */
    PROGRPT_MATHCO   MathCo;                        /* math (with count) */
} PROGRPT_RECORD; 
```

这些记录格式用在类似于下面的代码中：

```
for ( usLoopIndex = 0; usLoopIndex < usMaxNoOfRec; ) {
    ULONG            ulActualRead = 0;       /* actual length of read record function */
    PROGRPT_RECORD   auchRecord;

    /* --- retrieve a formatted record --- */
    ProgRpt_ReadFile( ulReadOffset, &auchRecord, PROGRPT_MAX_REC_LEN, &ulActualRead );
    if ( ulActualRead != PROGRPT_MAX_REC_LEN ) {
        return ( LDT_ERR_ADR );
    }

    /* --- analyze operation code of format record, and
        store it to current row item buffer --- */
    switch ( auchRecord.Loop.uchOperation ) {
    case PROGRPT_OP_PRINT:  /* print operation */
        sRetCode = ProgRpt_FinPRINT( &ReportInfo, &auchRecord.Print, uchMinorClass, NULL );
        break;

    case PROGRPT_OP_MATH:   /* mathematics operation */
        sRetCode = ProgRpt_FinMATH(&auchRecord.MathOpe, NULL );
        break;

    case PROGRPT_OP_LOOP:   /* loop (begin) operation */
        ProgRpt_PrintLoopBegin( &ReportInfo, &auchRecord.Loop );

        switch ( auchRecord.Loop.LoopItem.uchMajor ) {
        case PROGRPT_INDKEY_TERMNO:
            sRetCode = ProgRpt_IndLOOP( &ReportInfo, &auchRecord.Loop, uchMinorClass, usTerminalNo, ulReadOffset );
            usLoopIndex  += auchRecord.Loop.usLoopEnd;
            ulReadOffset += ( PROGRPT_MAX_REC_LEN * auchRecord.Loop.usLoopEnd );
            break;

        default:
            return ( LDT_ERR_ADR );
        }
        break;

    default:
        return ( LDT_ERR_ADR );
    }

    //    ....... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-04T13:07:02.593

我在开发将通过指针访问的连续地址结构时使用了匿名结构。更具体地说，我将在父结构中使用匿名结构来启用对内存的某些部分进行位字段处理，这些部分被划分为标记数据的较小部分。

注意编译器如何打包位域信息，位域结构的第一个成员可以是 LSB 或 MSB。

```
typedef struct
{
uint32_t a;

    struct 
    {
        uint32_t b : 16;
        uint32_t c : 8;
        uint32_t d : 7;
        uint32_t e : 1;
    };
}Parent;

#define ADDRESS ((Parent*)(uint16_t)0xF0F0) 

ADDRESS->a = data_32_bits;
ADDRESS->b = data_16_bits;
ADDRESS->c = data_8_bits;
ADDRESS->d = data_7_bits;
ADDRESS->e = data_1_bit; 
```

# python - Dendropy interpop 模块 python

> ID：13376499
> 
> 赞同：0
> 
> 时间：2012-11-14T09:54:45.713
> 
> 标签：python

我目前正在尝试使用 python Dendropy 库并在我的代码中包含一些 PAUP 命令。

我正在使用[python 库](http://packages.python.org/DendroPy/tutorial/paup.html)中提到的教程，但它给了我一个错误。

所以我正在做的是我试图从距离矩阵中估计一棵树：

***距离矩阵 A（Numpy 数组）***

```
[[ 0  2  7  8 16 17]
 [ 2  0  5  6 17 16]
 [ 7  5  0  9 15 13]
 [ 8  6  9  0 18 16]
 [16 17 15 18  0  5]
 [17 16 13 16  5  0]]

import dendropy
from dendropy.interpop import paup     

#A is a distance matrix like this    

tree = paup.estimate_tree(A, 'nj') 
```

我得到的错误是：`ImportError: No module named interpop`

我在我的机器上安装了 PAUP，本教程没有讨论安装任何额外的模块。

任何帮助，将不胜感激。

***编辑*** 这是否适用于 NUMPY 数组？因为它似乎给 numpy 数组一个错误.. 以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:08:05.820

尝试使用`from dendropy.interop import paup`（减去`p`in `interpop`）。我写错了两次写这个答案，所以如果这是错误的原因，那么这是可以理解的:)

# java - struts2：IF中的枚举

> ID：13376507
> 
> 赞同：8
> 
> 时间：2012-11-14T09:55:02.217
> 
> 标签：java, struts2, el, ognl

下面的 Java 条件如何转换`s:if test="..."`为*struts2*？

```
if(company.getAffiliateId().asInt() != com.foo.bar.Affiliates.XYZ.asInt()){
 // do something
} 
```

*company.getAffiliateId()*返回`BigDecimal`

*com.foo.bar.Affiliates*是`enum`

这不起作用：

```
<s:if test="%{company.affiliateId.asInt() != com.foo.bar.Affiliates.XYZ.asInt() }">
   alert("do something");
</s:if> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T10:19:27.550

使用`toString`方法进行比较`enums`。

```
<s:if test="ENUM.toString() == 'some_enum_as_string'"> 
```

如果你想`enums`在 JSP中使用

```
<s:if test="@package.ENUM@enumvalue.toString() == 'some_enum_as_string'"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T10:25:55.653

明白了，这对我有用：

```
<s:if test="%{company.affiliateId != @com.foo.bar.Affiliates@XZY.asBigDecimal() }"> 
```

# .htaccess - codeigniter 阻止我访问子目录上的 phpmyadmin 安装

> ID：13376509
> 
> 赞同：0
> 
> 时间：2012-11-14T09:55:05.947
> 
> 标签：.htaccess, codeigniter, mod-rewrite, phpmyadmin

我有自己的使用 CodeIgniter 构建的 CMS（实际上，它不是我开发的。我的客户从他们以前的开发人员那里给了我）。不，我正在将 CMS 迁移到新服务器。我进行了设置，一切正常。除了，我无法访问我的 phpmyadmin 安装，它位于我的 public_html 的子目录（其中包含 CodeIgniter CMS）。

*   www.mysite.com *<-- 这是访问我基于 CodeIgniterCMS 的网站*
*   www.mysite.com/phpmyadmin *<-- 这是访问我的 phpmyadmin 安装，目前无法访问，只显示 CI 的默认 404 错误页面*

这可能与 CodeIgniter 路由配置或 htaccess 文件之类的东西有关。但我是 CodeIgniter 和 htaccess 的新手。

我应该怎么做才能访问我的 phpmyadmin？

这是我的 codeigniter htaccess 文件

```
Options +FollowSymLinks

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

让我知道我应该在此处显示哪些其他信息（代码块、配置文件等）以更好地了解我的环境

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:48:55.757

您的 htaccess 并没有打开一个洞来让访问 phpmyadmin。

尝试

```
Options +FollowSymLinks

RewriteEngine On
RewriteBase /

RewriteCond $1 !^(phpmyadmin|index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# python - 阻止 Python 在 shebang 中生成 pyc 文件

> ID：13376512
> 
> 赞同：8
> 
> 时间：2012-11-14T09:55:20.893
> 
> 标签：python, shell, scripting, pyc

有没有办法阻止 python 创建 .pyc 文件，已经在 Python 脚本的 shebang（或幻数，如果你愿意的话）中？

不工作：

```
#!/usr/bin/env python -B 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T10:10:28.693

可以通过将您的 python interperter 路径直接放在 she bang 而不是使用 env 中。

```
#!/usr/bin/python -B 
```

当然，这意味着您失去了使用 env 的一些可移植性优势。[在wikipedia Shebang page](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)上有一个关于 env 的讨论。他们使用 python 作为他们的环境示例之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T10:15:07.290

是的，当且仅当，我们假设 Python 程序在某种 POSIX 兼容的系统中运行（对于 /bin/sh），这将起作用：

[（基于来自 glglgl 的输入**改进）**]

```
#!/bin/sh
"exec" "python" "-B" "$0" "$@"

# The rest of the Python program follows below: 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T10:15:45.167

根据 env 的手册页，您可以通过`name=value`设置环境变量。[`PYTHONDONTWRITEBYTECODE`](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONDONTWRITEBYTECODE)环境变量导致 Python 不写入 .py[co] 文件（与 to 的标志`-B`相同`python`）。所以使用

```
#!/usr/bin/env PYTHONDONTWRITEBYTECODE=1 python 
```

应该做的伎俩。

编辑：

我用一个简单的 Python 脚本对此进行了测试：

```
#!/usr/bin/env PYTHONDONTWRITEBYTECODE=1 python
print 1 
```

然后

```
$chmod +x test.py
$./test.py
1
$ls
test.py 
```

（但不是`test.pyc`）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T10:00:37.087

唉，没有。shebang 的东西仅限于提供一个可执行文件和一个参数。

因此`env`尝试`python -B`将给定文件作为一个参数执行，而不是`python`将`-B`当前文件作为两个参数执行。

我看不到实现预期目标的方法。

# objective-c - Stephen Kochan 的内存分配示例

> ID：13376518
> 
> 赞同：0
> 
> 时间：2012-11-14T09:55:40.033
> 
> 标签：objective-c

在他的书中，考虑第 7 章中的这段代码，在非 ARC 环境中：

```
Fraction *aFraction = [[Fraction alloc] init];
Fraction *sum=[[Fraction alloc] init],*sum2;
int i, n=5, pow2=2;

[sum setTo: 0 over: 1]; 

for (i = 1; i <= n; ++i){
[aFraction setTo: 1 over: pow2];
sum2 = [sum add:aFraction]; // Comment 1
[sum release];
sum = sum2; // Comment 2
pow2 *=2;
}

[sum doSomething];
[sum release]; 
```

有人可以确认我的理解是正确的：

注意，评论 1 - 我知道这个`add`函数正在返回一个分配的对象，fyi，所以`sum2`现在拥有一个对象（一个非自动释放的对象）（根据书中的其他代码）

问题，评论 2 - 我们发布了`sum`- 所以`sum`只是作为一个空指针持续存在，直到它被“分配”到`sum2`？由于`sum2`拥有一个对象，当在注释 1 处`sum2`分配了一个*新*`sum`的分配对象时，它仍然是先前迭代中对象的唯一所有者，并且 a`[sum2 release]`不是必需的。当`[sum release]`发生在评论 2 上方时，该对象最终消失，最终被同一循环中的新对象替换。这是正确的解释吗？

最后，虽然我们从来没有 release `sum2`，因为`sum=sum2`通过在最后做一个 `[sum release]'，这使得程序没有内存泄漏，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:15:30.047

WRT评论1：

```
sum2 = [sum add:aFraction]; 
```

这个调用意味着返回一个自动释放的对象。这是约定俗成的；只有以`init`或被调用的方法`new`应该返回一个非自动释放的对象，所有其他的都应该是自动释放的。

WRT评论2：

没有 after`sum`被释放，指向它的指针仍然是 non- `nil`，但是它指向的是一个可能被释放的对象。通过此引用访问对象有时会导致问题；可能马上。指针不*拥有*任何东西；所有权的概念是在方法或类级别。例如

```
Foo *foo = [[Foo alloc] init];
Foo *foo2 = foo;
Foo *foo3 = foo2; 
```

该方法*拥有* `foo`，并且恰好具有对同一对象的三个引用。这没关系，只要您记住这一点并且只记住该`release`对象一次（您可以使用对该对象的任何引用`release`）。

# entity-framework - Entity Framework 6 Code First 迁移的 ContextKey

> ID：13376521
> 
> 赞同：1
> 
> 时间：2012-11-14T09:55:45.297
> 
> 标签：entity-framework, entity-framework-6

现在我使用的是 EF6 Alpha，当使用迁移时，它会在 __MigrationHistory 表中添加一个新的迁移日志。

在 EF6 中，__MigrationHistory 表有一个名为“ContextKey”的新列。经过测试，我发现有两个默认的“ContextKey”值：

1.  DbContext 的派生类的全名。当我运行代码时会发生这种情况：

    ```
    Database.CreateIfNotExists(); 
    ```

2.  DbMigrationsConfiguration 的派生类的全名。当我运行代码时会发生这种情况：

    ```
    public ArticleDbContext()
    {   
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<ArticleDbContext, ArticleConfiguration>());
    } 
    ```

我第一次运行应用程序时，“Database.CreateIfNotExists();” 为我创建一个新数据库，以及映射到 ArticleDbContext 中定义的模型的所有表，然后添加一个 __MigrationHistory 行，其中 ContextKey 的值为“Module.Article.Model.ArticleDbContext”。

然后是“Database.SetInitializer(new MigrateDatabaseToLatestVersion());” 将运行，此代码将生成一个新的 ContextKey“PowerEasy.Module.Article.Migrations.ArticleConfiguration”。迁移用这个 ContextKey 查询 __MigrationHistory 表，发现没有数据。所以它会再次创建映射到ArticleDbContext中定义的模型的所有表，但是这些表已经存在于数据库中，所以会抛出异常，并告诉我“表XXX已经存在”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:21:04.433

您不应将 Migrations 和 Database.CreateIfNotExists 方法（或任何基于它的初始化程序）混合使用。如果数据库尚不存在，迁移将负责创建数据库。

As an alternative to the Migrations initializer, you can also apply migrations using the [DbMigrator.Update](http://msdn.microsoft.com/en-us/library/hh829710.aspx) method. This is useful if you want to create/update the database before it would otherwise be triggered by the initializer.

# java - 支持源代码行排除的 Java 代码覆盖工具

> ID：13376524
> 
> 赞同：11
> 
> 时间：2012-11-14T09:55:51.763
> 
> 标签：java, code-coverage

我目前使用[Clover](http://www.atlassian.com/software/clover/overview)来测量我的 Java 代码的代码覆盖率。我依赖的一项功能是能够从覆盖率报告中排除任意代码部分：

```
///CLOVER:OFF because this case is simpler to verify by code read
if (lFile.isFile() &&
    lFile.getName().endsWith(FILE_EXTN) &&
    !lFile.delete())
{
  throw new IOException("delete() failed for: " + lFile);
}
///CLOVER:ON 
```

我发现这种排除使得更容易专注于测试有趣的逻辑，同时仍然实现 100% 的代码覆盖率。

是否有其他支持这种细粒度排除的 Java 代码覆盖工具（免费或付费）？整个类或整个方法的排除还不够好。

注意：我目前正在研究添加适合 JaCoCo 的东西（[问题 #14](https://github.com/jacoco/jacoco/issues/14)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T14:20:54.830

根据我的经验，以下所有工作都很好：

*   闭源方面：Clover
*   在开源方面：Cobetura（但不适用于 Java 7）、EMMA

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T08:48:02.450

以下是开源 Java 代码覆盖工具。这些可能会对您有所帮助 [NoUnit](http://nounit.sourceforge.net/) [InsECT](http://java-source.net/open-source/code-coverage/insect) [Jester](http://java-source.net/open-source/code-coverage/insect) [JVMDI 代码覆盖率分析器](http://java-source.net/open-source/code-coverage/jvmdi-code-coverage-analyser) [GroboCodeCoverage](http://java-source.net/open-source/code-coverage/grobocodecoverage) [jcoverage/gpl](http://java-source.net/open-source/code-coverage/jcoverage-gpl) [JBlanket](http://java-source.net/open-source/code-coverage/jblanket) [Cobertura](http://java-source.net/open-source/code-coverage/cobertura) [Coverlipse](http://java-source.net/open-source/code-coverage/coverlipse) [Hansel](http://java-source.net/open-source/code-coverage/hansel) [CodeCover](http://java-source.net/open-source/code-coverage/codecover) [EMMA](http://java-source.net/open-source/code-coverage/emma) [PIT](http://java-source.net/open-source/code-coverage/pit)

# javascript - Javascript与IE和FF不兼容（调用函数）

> ID：13376528
> 
> 赞同：1
> 
> 时间：2012-11-14T09:56:08.160
> 
> 标签：javascript, internet-explorer, firefox, incompatibility

我正在用 javascript 编写一些代码，我需要它在大多数浏览器上工作，但它只适用于 googleChrome、IE 和 FF 不要调用此函数：

```
<script type="text/javascript">
  showLocation(<?php print "\"$citta2\""?>,<?php print "\"$row[nome] $row[cognome]\""?>,<?php print "\"$row[id]\""?>); return false;
  </script> 
```

（我知道它不会调用它，因为它应该做的第一件事是发出警报）你知道为什么它只能在 chrome 中工作吗？如果您需要所有文件，我可以将其发布在下面，但它有点长，我也很肯定问题出在那个电话上。

编辑1：这里是显示位置代码：

```
function showLocation(address2,nomi0,id0) {
            alert("1");
    var nomi1 = nomi0;
    var id1 = id0;
    geocoder.getLocations(address1, function (response) {

        if (!response || response.Status.code != 200)
        {
            alert("Errore con il primo indirizzo");
        }
        else
        {
            location1 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
            geocoder.getLocations(address2, function (response) 
            {
                if (!response || response.Status.code != 200)
                {
                    alert("Errore con il secondo indirizzo");
                }
                else
                {
                    location2 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                    calculateDistance(nomi1,id1);
                }
            });
        }
    });
} 
```

（它使用google maps api来获取城市的纬度和经度）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T10:26:41.963

没有答案（到目前为止）只需要超过评论中允许的 600 个字符。

首先，让您的脚本标签更易于阅读，并添加一些调试：

```
<script type="text/javascript">
    try {
        if (window.showLocation)
        {
            showLocation(<?php print "'{$citta2}','{$row[nome]} {$row[cognome]}','{$row[id]}'"; ?>);
        }
        else
        {
            // if you see this message:
            // then you have a syntax error before or within the creation of showLocation
            alert("showLocation has not been created!");
        }
    }
    catch (e) {
        alert("Error from caller: " + e);
    }
</script> 
```

现在在您的其他代码中，添加一些调试：

```
function showLocation(address2,nomi0,id0) {
    try {
        alert("1");
        var nomi1 = nomi0;
        var id1 = id0;
        geocoder.getLocations(address1, function (response)
        {
            try
            {
                if (!response || response.Status.code != 200)
                {
                    alert("Errore con il primo indirizzo");
                }
                else
                {
                    location1 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                    geocoder.getLocations(address2, function (response) 
                    {
                        try
                        {
                            if (!response || response.Status.code != 200)
                            {
                                alert("Errore con il secondo indirizzo");
                            }
                            else
                            {
                                location2 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                                calculateDistance(nomi1,id1);
                            }
                        }
                        catch (e)
                        {
                            alert("Error in callback#2: "+ e);
                        }
                    });
                }
            }
            catch (e)
            {
                alert("Error in callback#1: " + e);
            }
        });
    }
    catch (e)
    {
        alert("Error in functon: " + e);
    }
} 
```

_添加*了更多*调试警报_

# iphone - 添加一个新标签，我不知道如何

> ID：13376533
> 
> 赞同：1
> 
> 时间：2012-11-14T09:56:26.367
> 
> 标签：iphone, objective-c, cocoa-touch, ios4, tabs

我正在使用 XCode 4.3，并且我正在按照我书中的一个示例创建一个标签栏应用程序（可能用于 XCode 版本 < 4.3）。

默认情况下，新创建的选项卡栏应用程序包括 2 个选项卡。你可以看到我的截图

![在此处输入图像描述](../Images/a11ee83b944d72aa6f16735cca736ee7.png) 现在我想添加另一个选项卡（如图所示的 TabExampleThirdViewControler）。但我不知道如何使它成为第三个标签。我的旧书说我需要将它链接到 MainWindow 但正如您在图像中看到的那样，根本没有 MainWindow 文件。

新版 XCode 的这种更新让像我这样的初学者很困惑。感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:03:15.770

我不确定您使用哪种方法来创建选项卡。但是看看我的。我总是创建这样的标签。这很容易实现：

```
Appdelegate.h

UITabBarController *tabBarController;
// set properties

Appdelegate.m

// Synthesize

tabBarController = [[UITabBarController alloc] init];
tabBarController.delegate=self;

// Adding Search,Nearby,Map,AboutUs,Favorites Tabs to tabBarController  
Search * search = [[Search alloc] init];  
UINavigationController *searchNav = [[UINavigationController alloc]        initWithRootViewController:search];  

Nearby* nearby = [[Nearby alloc] init];  
UINavigationController *nearbyNav = [[UINavigationController alloc] initWithRootViewController:nearby];  

Map* map = [[Map alloc] init];  
UINavigationController *mapNav = [[UINavigationController alloc] initWithRootViewController:map];  

AboutUs* aboutUs = [[AboutUs alloc] init];  
UINavigationController *aboutUsNav = [[UINavigationController alloc] initWithRootViewController:aboutUs];  

Favorites* favorites = [[Favorites alloc] init];  
UINavigationController *favoritesNav = [[UINavigationController alloc] initWithRootViewController:favorites];  

NSArray* controllers = [NSArray arrayWithObjects:searchNav,nearbyNav,mapNav,aboutUsNav,favoritesNav, nil];  
tabBarController.viewControllers = controllers; 

[window addSubview:tabBarController.view]; 
```

然后在上面提到的每个视图控制器中你需要实现

```
- (id)init {} 
```

您可以在其中设置选项卡名称和图像。

我总是遵循这种方法，它永远不会失败。选项卡始终可见。

# regex - 在特定数量的逗号后替换字符的正则表达式

> ID：13376536
> 
> 赞同：2
> 
> 时间：2012-11-14T09:56:39.717
> 
> 标签：regex, expression

我有一个这样的字符串：

```
word1, word2, word3, word4, word5 
```

结果应如下所示：

```
word1, word2, word3 . . . 
```

也就是说，我想将第三个逗号（包括第三个逗号）之后的所有内容替换为

```
. . . 
```

使用 Oracle REGEXP_REPLACE 函数。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:31:59.860

`^(([^,]*,){2,2}[^,]*),.*`

并将其替换为找到的内容

`\1 . . .`

我没有使用该功能的经验，但它可能会像这样：

`REGEXP_REPLACE(str, '^(([^,]*,){2,2}[^,]*),.*', '\1 . . .')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:07:44.683

不需要正则表达式或“设计”。

1.  拆分'，'

2.  迭代和替换。

3.  重新加入并欢欣鼓舞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:16:13.850

您可以使用[implode](http://php.net/manual/en/function.implode.php)和[array_slice](http://php.net/manual/en/function.array-slice.php)代替正则表达式：

```
<?php
$words_to_display = 3;
$str = "word1, word2, word3, word4, word5";

$array = explode(', ', $str);
print_r($array);

$array = array_slice($array, 0, $words_to_display);

$str = implode(', ', $array).' . . .';
echo $str;
?> 
```

演示：http: [//ideone.com/TTmPhr](http://ideone.com/TTmPhr)

# android - 具有相同 ID 的微调器/如何以编程方式添加行

> ID：13376539
> 
> 赞同：2
> 
> 时间：2012-11-14T09:56:45.990
> 
> 标签：android, dynamic, android-spinner, android-tablelayout

我正在开发的应用程序有问题。我有一个带有起始微调器（选择客户端）和 1 行的屏幕，里面有元素。当我单击加号按钮时，它会添加更多这些行。问题是因为我使用 XML 布局文件添加它们我无法更改 ID（或者我可以吗？）。所以我不能从他们每个人那里获取值，即使 onItemSelected 也适用于客户端微调器，但不适用于其他人。我在这里得到了屏幕截图和用于创建第一行/其他行的代码片段。

截图：[http ://dl.dropbox.com/u/9667835/Screenshot_2012-11-14-10-44-38.png](http://dl.dropbox.com/u/9667835/Screenshot_2012-11-14-10-44-38.png)

```
private void startRow()
{
    ArrayAdapter<String> adapterUnits = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_dropdown_item);
    for(int i=0; i<units_arr.size(); i++)
        adapterUnits.add(units_arr.get(i).get("name").toString());
    ArrayAdapter<String> adapterVats = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_dropdown_item);
    for(int i=0; i<vats_arr.size(); i++)
        adapterVats.add(vats_arr.get(i).get("value").toString());

    tl = (TableLayout) findViewById(R.id.add_invoice_layout);
    LayoutInflater inflater = LayoutInflater.from(this);
    View item = inflater.inflate(R.layout.add_invoice_row, tl, false);

    Spinner units = (Spinner) item.findViewById(R.id.spinnerUnit);
    Spinner vats = (Spinner) item.findViewById(R.id.spinnerVAT);
    units.setAdapter(adapterUnits);
    vats.setAdapter(adapterVats);
    tl.addView(item);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:05:58.633

保留对每个膨胀视图的引用，然后在处理完成的输入数据时对其进行迭代；

```
// View references, as a class property
private ArrayList<View> viewRef = new ArrayList<View>();

View item = inflater.inflate ...
this.viewRef.add(item); 
```

现在，当要处理数据时，您可以这样做；

```
for (View item : this.viewRef) 
```

ID 应该是唯一的，因此您应该使用标签。请参阅[findViewWithTag](http://developer.android.com/reference/android/view/View.html#findViewWithTag%28java.lang.Object%29)

编辑; 如果您不想手动存储对视图的引用，您可以使用父视图的 getChildCount() 方法对其进行迭代；

```
for (int i = 0; i < parent.getChildCount(); i++)
{
     View item = (View) parent.getChildAt(i);
} 
```

# java - java传输图像的最佳方法

> ID：13376550
> 
> 赞同：-1
> 
> 时间：2012-11-14T09:57:29.903
> 
> 标签：java, file, out-of-memory

我有一个读取 PDF 的应用程序，将内容转换为 TIF 文件的集合，然后将它们发送到 Glass Fish Server 进行保存。

通常有 1-5 页，效果很好，但是当我得到一个超过 100 页的输入文件时......它会在传输时引发错误。

```
 Java heap space
at java.util.Arrays.copyOf(Arrays.java:2786)
at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94) 
```

在我的情况下，投入更多资源不是一个好的选择，所以我正在寻找一种以某种方式优化它的方法。我将数据存储在：

```
HashMap<TifProfile, List<byte[]> 
```

有没有更好的方法来存储或发送它们？

**编辑** 我做了一些测试，最终的 80 页 PDF 集合的
大小超过 280mb（240 个 tiff，内部设置不同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:17:58.287

好吧，您并没有给我们太多帮助，但我似乎很清楚，在内存中存储 100 多个高分辨率 TIFF 编码图像将很快耗尽您可用的任何资源。

最好将它分批加载到数据库中，例如一次只处理 5 个页面。

或者，根据您的 JDBC 驱动程序，您可能能够将图像数据流式传输到 JDBC BLOB 中，因此您不必将其缓存在内存中。这里有一些思考的食物......

[http://artofsystems.blogspot.co.uk/2008/07/mysql-postgresql-and-blob-streaming.html](http://artofsystems.blogspot.co.uk/2008/07/mysql-postgresql-and-blob-streaming.html)

# python - 当我尝试使用 pymysql 插入大 blob 时管道损坏

> ID：13376559
> 
> 赞同：1
> 
> 时间：2012-11-14T09:58:00.430
> 
> 标签：python, mysql, pymysql

我有一个基于烧瓶的网络应用程序，允许用户上传文件。文件存储在 mysql 数据库中。

这工作正常，直到文件大于大约 16Mb，插入失败并显示以下内容：

```
File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1518, in __call__
    return self.wsgi_app(environ, start_response)
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1506, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1504, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1264, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1262, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1248, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/<redacted>/access_control.py", line 15, in decorated_function
    return f(*args, **kwargs)
  File "/<redacted>/views/files.py", line 48, in upload
    VALUES (%s, %s, %s, %s, %s)""", file_details)
  File "/<redacted>/database.py", line 66, in query
    cursor.execute(sql, values)
  File "/usr/local/lib/python2.7/dist-packages/pymysql/cursors.py", line 262, in execute
    result = super(DictCursor, self).execute(query, args)
  File "/usr/local/lib/python2.7/dist-packages/pymysql/cursors.py", line 117, in execute
    self.errorhandler(self, exc, value)
  File "/usr/local/lib/python2.7/dist-packages/pymysql/connections.py", line 187, in defaulterrorhandler
    raise Error(errorclass, errorvalue)
Error: (<class 'socket.error'>, error(32, 'Broken pipe')) 
```

当文件大小似乎与 mySQL 设置匹配时，我很兴奋`max_allowed_packet`，所以我将其更改`my.cnf`并重新启动，但它没有帮助。（`show variables like 'max_allowed_packet'`显示新值150M）

该文件肯定会上传到服务器，我在我的插入方法中放入了一些代码，以便在运行查询之前将文件写入磁盘并且文件没问题。

插入 blob 的字段是一个 longblob，负责插入的代码是：

```
@mod.route('/file/upload', methods=['POST'])
@login_required
def upload():
    filename = request.files['file'].filename
    mime_type = request.files['file'].mimetype
    #filesize = request.files['file'].content_length
    file = request.files['file'].stream.read()

    if mime_type[:5] == 'image':
        file = resize_image_to_width(file, 1024)

    filesize = len(file)
    if filesize == 0:
        return ""

    if not request.form['file_id']:
        file_details = (filename, file, mime_type, filesize, session['user']['user_id'])
        file_id = database.query("""INSERT INTO files (filename, file, mime_type, filesize, owner)
                                      VALUES (%s, %s, %s, %s, %s)""", file_details)
    else:
        file_details = (filename, file, mime_type, filesize, request.form['file_id'])

        file_id = database.query("""UPDATE files 
                                    SET 
                                        filename=%s, 
                                        file=%s, 
                                        mime_type=%s, 
                                        filesize=%s 
                                    WHERE file_id=%s""", file_details)
    return "upload complete" 
```

我现在有点不知所措，大约一周前我确实找到了一些建议文件需要分段插入的东西，但我现在找不到（我被我的实际工作分心了！ ) 而且我不知道如何将它分块插入。

我真的很感激这方面的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:37:51.843

首先，您要将文件分块成可以安全插入的块，在您的情况下，您可以制作 10MB。您可以使用该答案中的[chunks 函数](https://stackoverflow.com/a/312464/1699750)来执行此操作。然后你插入你的第一个数据块并进行一系列更新，将额外的数据块连接到那个 blob 上。要执行该部分，请查看有关[使用更新将 BLOB 数据附加/连接到 BLOB 列的问题？](https://stackoverflow.com/questions/9786797/how-can-i-append-concatenate-blob-data-to-a-blob-column-using-update).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:32:07.073

这是另一种方法。[使用LOAD_FILE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_load-file)函数将文件加载到 blob 列中。

```
UPDATE t SET blob_col=LOAD_FILE('/tmp/image.png') WHERE id=1; 
```

这不应该面临您拥有的 16MB 限制。如果您遇到任何二进制编码问题，您可以使用 python 以十六进制格式保存图像，然后使用[UNHEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_unhex)将其安全地解码回原始二进制形式。

```
UPDATE t SET blob_col=UNHEX(LOAD_FILE('/tmp/image.png.hex')) WHERE id=1; 
```

如果您的网络服务器位于同一台服务器上，这两个选项都需要您将文件保存在 MySQL 服务器文件系统上，否则您可能必须使用 scp 或 ftp 之类的东西将文件传输到 MySQL 服务器，然后再发出 SQL 语句.

# c# - 在 xslt 中使用嵌套字典的 Foreach

> ID：13376560
> 
> 赞同：2
> 
> 时间：2012-11-14T09:58:01.600
> 
> 标签：c#, .net, xslt, dictionary, foreach

我有一本包含以下值的字典：

```
<root
    user_salutation="Geachte heer"
    wg="7"
    wgList-0="68"
    wgListCount-0="3"
    wgList-1="65"
    wgListCount-1="1"
    wgList-2="62" 
    wgListCount-2="1"
    wgList-3="58"
    wgListCount-3="2"
/> 
```

我如何链接列表并在 foreach 中一起计数？

```
 <?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html" indent="yes" omit-xml-declaration ="yes" encoding="ISO-8859 1"/>

 <xsl:variable name="style">
  body {
  font-family: verdana;
  font-size: 11px;
  }
  td {
  height: 15px;
  border: 0px;
  font-family: verdana;
  font-size: 11px;
  }
  th {
  background-color: #999999;
  color: white;
  font-family: verdana;
  font-size: 11px;
  }
  </xsl:variable>

  <xsl:variable name="prijs_zichtbaar"> 1 </xsl:variable>

  <xsl:key name="params" match="tag[@name!='param']" use="generate-id(preceding-    sibling::tag[@name='param'][1])" />

  <xsl:template match="tag[@name='param']">
  <xsl:text>param&#10;</xsl:text>
  <xsl:apply-templates select="key('params', generate-id())" />
</xsl:template>

<xsl:template match="tag">
 <xsl:value-of select="concat(' - ', @name, '&#10;')" />
</xsl:template>

<xsl:template match="/">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>wgp</title>
    <style>
      <xsl:value-of select="$style"/>
    </style>
  </head>
  <body>
        <table cellpadding="3" cellspacing="0" border="0" width="" >
            <colgroup>
                <col width="200"/>
                <col width="100"/>
                <col width="100"/>
                <col width="100"/>
            </colgroup>

            <tr>
                <th align="left">Soort</th>
                <th align="right">Dag</th>
                <th align="right">Aantal</th>
                <th align="right">Ontvangers</th>
            </tr>

            <xsl:for-each select="root/@*[starts-with(name(),'wgList-')]">
               <xsl:element name="TR">
                 <xsl:if test="position() mod 2 = 0">
                    <xsl:attribute name="bgcolor">#CCCCCC</xsl:attribute>
                 </xsl:if>

                 <td align="left">wg</td>
                 <td align="right"><xsl:value-of select="."/></td>
                 <td align="right"><xsl:value-of select="@*[name() = concat('wgListCount-', substring-after(name(current()), '-'))]" /></td>
               </xsl:element>
            </xsl:for-each>

            <xsl:if test="root/@list1 > 0">
                <xsl:element name="TR">
                    <td align="left"><b>subtotaal:</b></td>
                    td align="left"></td>
                    <td align="right">----------------<br/><xsl:value-of select="root/@wg" /></td>
                    <td align="right">----------------<br/><xsl:value-of-select="root/@wg" /></td>
                </xsl:element>
            </xsl:if>

                </td>
            </tr>
        </table>
    </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:30:10.850

我在这里做一个猜测，但是通过查看您的 XSLT 片段，它表明您的键和值是**根**元素上的属性，就像这样

```
<root
   wgList-0="68"
   wgListCount-0="3"
   wgList-1="65"
   wgListCount-1="4"
   wgList-2="62"
   wgListCount-2="8">
</root> 
```

在这种情况下，您需要获取键值的 XSLT 是这个

```
<xsl:value-of 
   select="../@*
     [name() = concat('wgListCount-', substring-after(name(current()), '-'))]"/> 
```

这样做是获取出现在连字符之后的当前属性名称的一部分（即 0、1 或 2），然后使用该值获取预期的**wgListCount**元素的名称。这假设您当前位于**wgList-**元素上。

这是一些示例 XSLT（我删除了一些代码只是为了保持简短并专注于手头的问题）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes" omit-xml-declaration="yes" encoding="ISO-8859 1"/>

   <xsl:template match="/">
      <html xmlns="http://www.w3.org/1999/xhtml">
         <head>
            <title>wgp</title>
         </head>
         <body>
            <table cellpadding="3" cellspacing="0" border="0" width="">
               <tr>
                  <th align="left">Soort</th>
                  <th align="right">Dag</th>
                  <th align="right">Aantal</th>
                  <th align="right">Ontvangers</th>
               </tr>
               <xsl:for-each select="root/@*[starts-with(name(),'wgList-')]">
                  <xsl:element name="TR">
                     <td align="left">wg</td>
                     <td align="right">
                        <xsl:value-of select="."/>
                     </td>
                     <td align="right">
                        <xsl:value-of select="../@*[name() = concat('wgListCount-', substring-after(name(current()), '-'))]"/>
                     </td>
                  </xsl:element>
               </xsl:for-each>
            </table>
         </body>
      </html>
   </xsl:template>
</xsl:stylesheet> 
```

应用于上述 XML 时，输出如下

```
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>wgp</title>
   </head>
   <body>
      <table cellpadding="3" cellspacing="0" border="0" width="">
         <tr>
            <th align="left">Soort</th>
            <th align="right">Dag</th>
            <th align="right">Aantal</th>
            <th align="right">Ontvangers</th>
         </tr>
         <TR>
            <td align="left">wg</td>
            <td align="right">68</td>
            <td align="right">3</td>
         </TR>
         <TR>
            <td align="left">wg</td>
            <td align="right">65</td>
            <td align="right">1</td>
         </TR>
         <TR>
            <td align="left">wg</td>
            <td align="right">62</td>
            <td align="right">1</td>
         </TR>
         <TR>
            <td align="left">wg</td>
            <td align="right">58</td>
            <td align="right">2</td>
         </TR>
      </table>
   </body>
</html> 
```

# javascript - 在元素之前获取文本

> ID：13376565
> 
> 赞同：3
> 
> 时间：2012-11-14T09:58:06.203
> 
> 标签：javascript, jquery

如何使用 Javascript/jQuery 获取特定元素之前的正文文本？我想要实现的是找出元素相对于正文的位置，例如，如果正文文本长度为 100 个字符且节点之前的文本为 50，则该节点将为 50%。获取正文的长度很容易，但是在元素之前获取文本并不像我在第一个实例中想象的那么简单。

编辑：

为了清楚起见，我举一个例子：

```
<body>
   <p>
      ...some text <span>that could have sub-elements</span>
   </p>
   <p>
      ...some text
      <ul>
         <li>now with a list</li>
         <li>why not?</li>
      </ul>
   </p>
   <div>
      <p>...some text...</p>
      <div>
          <p>...some text...</p>
          <p id="this_is_the_element">what's there in the body before this element?</p>
          <p>...some text...</p>
          <p>...some text...</p>
      </div
   </div>
</body> 
```

在这种情况下，特定节点将是`#this_is_the_element`，我希望得到的是：

```
...some text that could have sub-elements 
...some text 
now with a list 
why not? 
...some text 
...some text 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T10:11:18.870

我可以提出这个功能：

```
​function textUntil($element) {
    var T = '#~~~#';
    var $marquer = $('<span>'+T+'</span>');
    $marquer.insertBefore($element);
    var text = $(document.body).text().split(T)[0];
    $marquer.remove();
    return text;
} 
```

诀窍是插入一个唯一标记并获取文本直到该标记。当然，在呈现 HTML 之前，插入的元素会被移除。它适用于任何类型的身体。

[演示（打开控制台）](http://jsfiddle.net/dystroy/sUBFW/)

编辑 ：

[使用编辑的 HTML 进行演示（打开控制台）](http://jsfiddle.net/dystroy/Z2KHs/)

# c# - 错误：命名空间不能直接包含字段或方法等成员

> ID：13376566
> 
> 赞同：5
> 
> 时间：2012-11-14T09:58:10.760
> 
> 标签：c#

我是 C# 新手，我无法解决这个错误，谁能帮帮我？此脚本用于删除不需要的快捷方式，然后安装新程序（如果尚未安装）。

```
using System;
using WindowsInstaller;

string startMenuDir = Environment.GetFolderPath(Environment.SpecialFolder.StartMenu);
string shortcutold = Path.Combine(startMenuDir, @"Ohal\TV AMP (Windows XP Mode).lnk");
if (File.Exists(shortcutold))
File.Delete(shortcutold);

string startMenuDir = Environment.GetFolderPath(Environment.SpecialFolder.StartMenu);
string shortcut = Path.Combine(startMenuDir, @"Ohal\TV AMP.lnk");
if (File.Exists(shortcut))
{
    Console.WriteLine("Already installed...");
}
else
{
Type type = Type.GetTypeFromProgID("WindowsInstaller.Installer");
            Installer installer = (Installer)Activator.CreateInstance(type);
            installer.InstallProduct(@"Y:\LibSetup\TVAMP313\TVAmp v3.13.msi");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:59:13.093

您的代码应该在一个类中，然后是一个方法。您不能在命名空间下拥有代码。类似于以下的东西。

```
using System;
using WindowsInstaller;

class MyClass //Notice the class 
{
 //You can have fields and properties here

    public void MyMethod() // then the code in a method
    {
        string startMenuDir = Environment.GetFolderPath(Environment.SpecialFolder.StartMenu);
        string shortcutold = Path.Combine(startMenuDir, @"Ohal\TV AMP (Windows XP Mode).lnk");
        if (File.Exists(shortcutold))
            File.Delete(shortcutold);
       // your remaining code .........

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T10:01:12.000

正如 Habib 所说，您需要将代码放入方法、构造函数等中。在这种情况下，如果您想要的代码正是您想要的入口点，您只需要：

```
using System;
using WindowsInstaller;

class Program
{
    // Or static void Main(string[] args) to use command line arguments
    static void Main()
    {
        string startMenuDir = ...;
        string shortcutold = ...;
        // Rest of your code
    }
} 
```

基本上，该`Main`方法是独立 C# 程序的入口点。

当然，如果您的代码打算成为其他东西的插件，您可能只需要实现一个接口或类似的东西。无论哪种方式，您都必须将代码放在成员中，而不仅仅是“裸露”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:02:18.813

这很可能是您打算做的事情：

```
using System;
using WindowsInstaller;

namespace DataImporter
{
    class Program
    {
        static void Main(string[] args)
        {

            string startMenuDir = Environment.GetFolderPath(Environment.SpecialFolder.StartMenu);
            string shortcutold = Path.Combine(startMenuDir, @"Ohal\TV AMP (Windows XP Mode).lnk");
            if (File.Exists(shortcutold))
            File.Delete(shortcutold);

            string startMenuDir = Environment.GetFolderPath(Environment.SpecialFolder.StartMenu);
            string shortcut = Path.Combine(startMenuDir, @"Ohal\TV AMP.lnk");
            if (File.Exists(shortcut))
            {
                Console.WriteLine("Already installed...");
            }
            else
            {
            Type type = Type.GetTypeFromProgID("WindowsInstaller.Installer");
                        Installer installer = (Installer)Activator.CreateInstance(type);
                        installer.InstallProduct(@"Y:\LibSetup\TVAMP313\TVAmp v3.13.msi");
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-24T07:58:32.040

你的方法必须在一个类中现在这是一个命名空间，你必须在这个命名空间中声明一个类，然后在这个类中声明方法

# iphone - 将图片存储在应用程序目录中并为其命名。

> ID：13376569
> 
> 赞同：0
> 
> 时间：2012-11-14T09:58:21.773
> 
> 标签：iphone, objective-c, camera, image-capture

我正在为 iphone 创建一个相机应用程序，但我面临一个问题。

我希望能够提供我拍摄的照片，将其存储在应用程序的私有目录中，并为其提供自定义名称（当然是通过代码）。例如，我拍了一张照片，我想将这张照片命名为 mmddyyyyhhmmssXYZ 并将事物图像存储在 myApp/images 目录中。

请让我知道这是否可能。如果可能的话，任何有关的建议或教程都会非常有帮助。

作为 iphone 应用程序开发的新手......我现在实际上对此一无所知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:11:01.327

这是我的代码见下文。

```
-(void)copyImagesToCache:(NSString*)imageURl
{

    NSFileManager *filemanager=[NSFileManager defaultManager];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *folderPath = [documentsDirectory stringByAppendingPathComponent:@"MyIMages"];

            //now no need to use below single line of code.
//NSString *srcPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"image.png"];
//it just a example here , here you should make a source  path as you pic the images form the camera. 
```

**编辑：在 ImagePicker 中选择时，您应该创建一个路径。见下面 ImagePickerViewControllerDelegate.i 的代表已经展示了方式**

```
 if(![filemanager contentsOfDirectoryAtPath:folderPath error:nil]){
        [filemanager createDirectoryAtPath:folderPath withIntermediateDirectories:YES attributes:nil error:nil];

    }
    NSString *destPath = [folderPath stringByAppendingPathComponent:@"image1.png"];//here you should create the dynamic name so that you can distinguish all images.
    NSError *err;
  BOOL isCopeid= [filemanager copyItemAtPath:srcPath toPath:destPath error:&err];
  if(isCopeid)
    NSLog(@"Copied");
}

  - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:     (UIImage *)image editingInfo:(NSDictionary *)editingInfo
 { 
  myIMage.image = image;
 //here call the method whcih copy the image to cache
 [self copyImagesToCache: [editingInfo objectForKey:UIImagePickerControllerReferenceURL]]];  
 [here is the link which shown the  editingInfo's keys ][1] 

//remaining code goes here as it is   
} 
```

我希望它可以帮助你......！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:02:10.800

**将图像写入应用程序私有目录的功能-**

```
-(void)writeImagetoPath
 {

    UIImage *myImage = //This is the UIImage you obtained from the camera or the photo library.

    //This is the path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *documentsPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"xyz.png",i]];//You can give any name to the path.

    //Now convert the uiimage to data before writing to file.
    NSData *imgData = UIImagePNGRepresentation(myImage);
    [imgData writeToFile:documentsPath atomically:YES];

} 
```

# python - 如何在 django 模板中使用变量作为索引？

> ID：13376576
> 
> 赞同：6
> 
> 时间：2012-11-14T09:58:35.607
> 
> 标签：python, django, arrays, templates, indexing

如何在 django 模板中使用变量作为索引？

现在我得到这个错误：

```
Exception Type:
TemplateSyntaxError

Exception Value:    
Could not parse the remainder: '[year]' from 'bikesProfit.[year]' 
```

我也尝试过`{{ bikesProfit.year }}`，但这给出了一个空的结果。

```
 {%  for year in years_list %}

        <tr>
            <th>Total profit {{ year }}:</th>
        </tr>
        <tr>
            <th></th>
            <th> {{ bikesProfit[year] }} </th>

... 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T10:12:45.870

这是一个非常常见的问题，关于 SO 有很多答案。

您可以制作[自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)：

```
@register.filter
def return_item(l, i):
    try:
        return l[i]
    except:
        return None 
```

用法：

```
{{ bikesProfit|return_item:year }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T10:13:25.373

我不认为这是直接可能的（编辑：您可以使用过滤器手动实现它，如[goliney 的答案](https://stackoverflow.com/a/13376792/1193366)所示）。[文档](https://docs.djangoproject.com/en/dev/topics/templates/)说：

> 因为 Django 有意限制模板语言中可用的逻辑处理量，所以无法将参数传递给从模板中访问的方法调用。数据应该在视图中计算，然后传递给模板进行显示。

如果您的案例并不比您展示的更复杂，那么我认为最好的解决方案是循环`bikeProfit`。

```
{% for year, profit in bikeProfit.items %}
    ...
    <th>Total profit {{ year }}:</th>
    ...
    <th> {{ profit }} </th>
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T10:25:54.767

这是可能的，但违背了 Django 模型的本质......

如果您有感兴趣的项目，那么理想情况下，您的视图应该返回一个仅包含这些项目的对象（类似于 OTTOMH）：

```
Something.objects.filter(something__typename='Bike', year__range=(1998, 2001)) 
```

# java - 关于如何编写代码以有效使用 ProGuard/DexGuard 的指南？

> ID：13376580
> 
> 赞同：2
> 
> 时间：2012-11-14T09:58:50.510
> 
> 标签：java, android, proguard

编写代码时是否有关于如何有效利用 ProGuard/DexGuard 的指南？我从某处读到，最好将所有敏感数据放在不同的类中，而不是将其放在`Activity`类本身中，因为`Activity`类不能被混淆。如何对我的应用程序进行编码，以最大限度地利用 ProGuard/DexGuard？如果您打算使用 ProGuard/DexGuard 来避免应用程序损坏，编码时是否有任何规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:20:55.603

是的你是对的。

将所有“秘密”代码放入混淆方法中，并让公共方法 onyl 调用混淆方法：

**例子**

```
public static void main(final String[] args) {
    SecretKnowHowWorker.doWork(args);
 } 
```

`main`不能或不应该混淆，但其余部分将被混淆。在 Eclipse 中，当您单击混淆的 jar 文件时，您可以单击“Referenced Librraies”，您知道什么被混淆了，什么没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:23:30.200

Activity 类可以完全混淆，但是某些方法的名称（`onCreate()`例如不能）。因此，将您的敏感内容**放在**诸如已知方法（所有这些您希望框架调用的方法）之类的入口点之外，它应该会更好。我还建议尝试破解你自己的应用程序，看看它在解码后的样子，并努力让它看起来更糟:)

# c++ - C++_win32: pthread_self() == pthread_t 导致错误

> ID：13376583
> 
> 赞同：0
> 
> 时间：2012-11-14T09:59:00.007
> 
> 标签：c++, windows, pthreads

我正在尝试将 linux 工作应用程序移植到 Windows（使用`windows.h`和 POSIX `pthread_win32`）

所以，我定义了一个客户领域：

```
struct ClientIdentifier {
  pthread_t thread;
  int id_client;
  ...
};

vector<ClientIdentifier> clients; 
```

我正在尝试在客户端字段中找到该客户端的线程（返回字段索引）

```
int Server::getClientIndex() {
  for (unsigned int i = 0; i < clients.size(); ++i) {
    if (pthread_self() == clients.at(i).thread) {
      return i;
    }
  }
  return -1;
} 
```

但是这个：

```
pthread_self() == clients.at(i).thread 
```

结果：

```
34 D:\WORKSPACE\C++\DS\gs\server.cpp no match for 'operator==' in 'pthread_self() == (((std::vector<ClientIdentifier, std::allocator<ClientIdentifier> >*)((Server*)this)) + 8u)->std::vector<_Tp, _Alloc>::at [with _Tp = ClientIdentifier, _Alloc = std::allocator<ClientIdentifier>](i)->ClientIdentifier::thread' 

note C:\programy\DevCpp\include\objbase.h:80 candidates are: BOOL operator==(const GUID&, const GUID&) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:03:32.547

用于[`pthread_equal()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_equal.html)比较`pthread_t`值。

# java - 如何用 Java (Eclipse) 编写程序来查找处理器的速度

> ID：13376584
> 
> 赞同：0
> 
> 时间：2012-11-14T09:58:58.590
> 
> 标签：java, android

> **可能重复：**
> [使用 Java 检测 CPU 速度/内存/互联网速度？](https://stackoverflow.com/questions/1297870/detect-cpu-speed-memory-internet-speed-using-java)

我是初学者，我想学习如何为 Android 应用程序编写 Java 程序。考虑到这不会*太*困难，我想到了编写一个基准实用程序。

我花了两天时间认真地浏览了许多教程，但我并没有接近我的目标，事实上我认为我更困惑。我读得越多，我就越难以理解。也许我应该开始编织？

我如何询问处理器它的运行速度是多少？如果我编写代码（*currentTimeMillis*或*nanoTime*），我怎么知道处理器只是在做我要求它做的事情？

如何使用 bogoMIPS？访问它的信息或将其实现到我的代码中。我已经阅读了*/proc/cpuinfo*但是如何将它的源代码实现到我自己的代码中？或者，我如何将它实现到我的代码中（但我不知道它是如何工作的，所以我真的不知道结果是什么意思。

我想这是底线问题：我如何编写基本代码来获得处理器速度（以 GB 为单位），这样它给我的正是我所要求的。如何控制处理器以使其执行我想要的（在计算速度方面）？

我是否只是说“处理器只做这个计算，所以我知道你的运行速度有多快”？

在过去的几周里，我关注了各种关于 Java 的教程，但我对此仍然一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:09:41.247

一个有趣的问题，但不想令人沮丧，这可能是您开始时最困难的事情之一！越接近硬件，代码就越具有挑战性。尝试一个更简单的应用程序，它完全是关于 UI 设计的，通过它你可以学习 UI“小部件”的基础知识，如按钮、单选按钮、复选框、列表等，以及数据存储/检索。

“待办事项”应用程序的陈词滥调是一个好主意，如果它真的在学习你感兴趣的平台。只是不要指望销售数百万个成品应用程序！

# javascript - 捕获一些点击，而不是全部

> ID：13376587
> 
> 赞同：0
> 
> 时间：2012-11-14T09:59:12.237
> 
> 标签：javascript, jquery, delegates, jquery-events

我已经构建了一个模态框，它使用覆盖所有 div 背景来淡出内容并允许用户单击框以关闭它。我通过捕获所有点击来做到这一点，但过滤掉模型框上的任何点击。

```
 $('body').on('click', '.cover_slide > *',function(e){
    e.stopPropagation();
  });
  $('body').on('click', '.cover_slide',function(){
    helper.cover.close();
    $('body').off('click', '.cover_slide');
  }); 
```

我希望能够通过点击与我的模态框上的某些元素进行交互，但我似乎无法弄清楚如何做到这一点并且仍然具有我的“点击关闭”功能。目前该框上的所有点击都被忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:03:48.267

无需多次绑定点击。尝试使用此代码段。请注意，您可能必须根据元素的实际情况更改最近的选择器

```
$(document).bind("click", function(e) {
    if($(e.target).closest("div").hasClass('coverSlide')) {
        //do stuff if someone clicks the box
    }
}); 
```

# python - Python 2D 数组无法工作。帮助~

> ID：13376592
> 
> 赞同：1
> 
> 时间：2012-11-14T09:59:27.893
> 
> 标签：python, arrays, 2d, grammar

```
_R = [0] * 5
R = [_R] * 4

num_user = 0
num_item = 0

for i in range(8):
    s = input().split()
    for j in range(4):
        s[j] = int(s[j])

    R[s[0]][s[1]] = s[2]
    print(s[0], s[1], R[s[0]][s[1]])
    num_user = max(num_user, s[0])
    num_item = max(num_item, s[1])

print("=====")

for i in range(num_user + 1):
    for j in range(num_item + 1):
        print(i, j, R[i][j])

exit() 
```

可能你已经明白我要问什么了。输出让我很困惑：

```
#output
1 2 3
2 4 2
1 1 5
3 2 2
2 2 1
3 3 4
1 4 3
2 1 4
=====
0 0 0
0 1 4
0 2 1
0 3 4
0 4 3
1 0 0
1 1 4
1 2 1
1 3 4
1 4 3
2 0 0
2 1 4
2 2 1
2 3 4
2 4 3
3 0 0
3 1 4
3 2 1
3 3 4
3 4 3 
```

我是怎么了？上次我用 Python 编码是 2.7，那是很久以前的事了。我忘记了什么重要的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:03:01.603

```
_R = [0] * 5
R = [_R] * 4 
```

那是一个NOGO。R 将包含 _R 4 次，相同的数组 4 次...

改用这个：

```
R = [[0 for col in range(5)] for row in range(4)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:05:08.837

您正在以错误的方式创建列表列表：

```
>>> _R = [0] * 5
>>> R = [_R] * 4
>>> [id(x) for x in R]    #here all objects are acually identical
[36635392, 36635392, 36635392, 36635392]

>>> R[0][1]=1           #changing one element changes all other elements as well
>>> R
[[0, 1, 0, 0, 0], [0, 1, 0, 0, 0], [0, 1, 0, 0, 0], [0, 1, 0, 0, 0]] 
```

以这种方式更好地创建您的列表：

```
>>> R=[[0]*5 for _ in range(4) ]
>>> [id(x) for x in R]
[37254008, 36635712, 38713784, 38714664]
>>> 
```

# php - phil在行动前的休息服务器

> ID：13376594
> 
> 赞同：3
> 
> 时间：2012-11-14T09:59:45.450
> 
> 标签：php, codeigniter, rest

我正在创建一个休息服务。我已经完成了所有必需的方法，我想做的是一些授权。我已经创建了存储 api-keys 的表，我在每个方法中加载它们，它工作得很好。我现在需要做的是在每个方法之前调用一些之前的操作，这样我就不必检查用户是否在每个方法上都成功授权了？在简单的 CI_Controller 或 FuelPHP 中，以前可以使用公共函数来完成，但我不知道如何在 REST_Controller 中实现相同的功能？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:43:36.243

这里有两个控制器。可能会给你一些想法

```
class MY_Controller extends CI_Controller 
{
    protected $before_filter    =   array();
    protected $after_filter     =   array();    

    private function run_filter($who, $params=array()) 
    {
        $filter =   $this->{"{$who}_filter"};

        if (is_string($filter)) {
            $filter =   array($filter);
        }

        if (method_exists($this, "{$who}_filter")) {
            $filter[]   =   "{$who}_filter";
        }

        foreach ($filter as $method) {
            call_user_func_array(array($this, $method), $params);
        }
    }
    public function _remap($method, $parameters)
    {
        if (method_exists($this, $method))
        {
            $this->run_filter('before', $parameters);
            $return =   call_user_func_array(array($this, $method),$parameters);
            $this->run_filter('after', $parameters);    
        }else{
            show_404();
        }
    }   
}

class MY_Controller extends CI_Controller 
{
    public $before_filter   =   array('check_login');
    public $after_filter        =   array();    

    private function dashboard() 
    {
        /*  other code here */
    }

    public function check_login() 
    {
        /*  Login checking Code here    */
    }   
} 
```

# javascript - 如何将箭头键传递给 Javascript 而不是移动 WebView 本身？

> ID：13376595
> 
> 赞同：2
> 
> 时间：2012-11-14T09:59:45.013
> 
> 标签：javascript, android, android-webview

我有一个带有键盘控制 javascript 的 WebView，但是遇到了一个问题：Webview 不会将箭头键传递给 Javascript。代码如下：

```
public void onCreate(Bundle savedInstanceState) {
    mWebView = new MyWebView(this);
    setContentView(mWebView);
} 
```

当我启动它`Activity`并按箭头键时，WebView 移动并且加载页面中的 JavaScript 不会触发。其他键（如 Enter 或字母）效果很好。

有没有办法绕过箭头键进入网页？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T14:59:36.693

您必须重写 onKeyDown 方法才能查看。你可以在这里找到如何做到这[一点。](https://stackoverflow.com/questions/10172852/android-webview-handle-arrow-keys-in-javacript)

# javascript - jquery：如何禁用 dblclick 事件？

> ID：13376601
> 
> 赞同：1
> 
> 时间：2012-11-14T10:00:22.813
> 
> 标签：javascript, jquery, click, double-click

前提：开发图形散点图（使用flotchart.org）我有一个js函数，它动态创建一个显示图像（按钮）以实现用户操作点击按钮（下面的示例代码中的“pan Left”）

问题：当用户快速单击按钮时，会触发（不需要的）双击事件。当鼠标悬停在按钮上时，如何禁用双击（因此只允许单击事件）？换句话说：在下面的代码中使用 unbind 或 dblclick 有什么问题？

```
function addButtonPanLeft(x, top, offset) {
    $('<img id="buttonPanLeft" class="navigationbutton" src="../images/pan-left.png" style="left:' + x + 'px;top:' + top + 'px"' + ' title="Pan Left">').appendTo(placeholder).click(function(e) {
        e.preventDefault();
        panleft();
    });

    // disabilito double click sul bottone
    $('#buttonPanLeft').unbind('dblclick');
}

function addButtonPanRight(x, top, offset) {
    $('<img id="buttonPanRight" class="navigationbutton" src="../images/pan-right.png" style="left:' + x + 'px;top:' + top + 'px"' + ' title="Pan Right">').appendTo(placeholder).click(function(e) {
        e.preventDefault();
        panright();
    });

    // disabilito double click sul bottone  NON FUNZIONA ??????
    $('#buttonPanRight').dblclick(function(e) {
        e.preventDefault();
        panright();
        log({
            text: "double click",
            type: 'debug'
        });
    });
} 
```

非常感谢乔治

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:02:47.460

编辑：正如[@Accountant م](https://stackoverflow.com/users/5407848/accountant-%d9%85)在评论中提到的，[`unbind`](https://api.jquery.com/unbind/)现在已弃用。改用类似的[`off`](https://api.jquery.com/off/)。

`unbind`删除所有事件处理程序，它不会阻止事件被触发。您需要做的是*附加*一个停止事件传播的事件处理程序：

```
$('#buttonPanLeft').unbind('dblclick');
$('#buttonPanLeft').dblclick(function(e){
    e.stopPropagation();
    e.preventDefault();
    return false;
}); 
```

编辑：我可能误解了你的问题。如果您想阻止双击的第二次单击触发`click`处理程序，您可以执行以下操作：

```
function handler(e){
    e.preventDefault();
    panleft();
    $(this).unbind('click');
    setTimeout(function(){$('#buttonPanLeft').click(handler)}, 500)
}
$('#buttonPanLeft').click(handler); 
```

这可以防止另一个点击事件发生，直到 500 毫秒过去。

[演示](http://jsfiddle.net/Nmtcc/1/)

# iphone - MKMap无限循环设置最大缩放高度

> ID：13376606
> 
> 赞同：1
> 
> 时间：2012-11-14T10:00:44.120
> 
> 标签：iphone, objective-c, ios, xcode

我有一个带有叠加层的地图视图。我想限制用户缩小得太远。因此，如果用户滚动并看不到覆盖的一部分，它会将它们放大到覆盖的最大高度。像缩放一样，我也希望用户不能滚动边缘。

我已经设法实现了这一点（或者我认为）。我编写的代码可以在我的 iPhone 5 上运行，但是当我在 Bosses 手机和模拟器上对其进行测试时，地图不断尝试调整大小并陷入无限循环。

这是我在[Loop](http://www.youtube.com/watch?v=mwuikg4Jjrw)中的应用程序的视频。

从视频中我可以看到地图应该循环，因为两条边都显示在地图之外。为了阻止这种情况，我的代码会放大，因此在它打算移回用户已移动的边缘之前，您无法看到两个边缘。

正如我所说，这适用于我的一台设备，但不适用于其他设备！我已经尝试解决这个问题三天了，感觉就像在敲键盘一样！任何帮助都会很棒。

这是我的[代码](http://pastebin.com/q5UcQMcN)的副本。我已经对此发表了评论，并试图使其易于理解。

编辑：刚刚更新到 iOS 6.0.1。它仍然可以在我的 iPhone 5 上使用，但它开始放大很远并且将最小缩放设置得太低

# android - 如何在 AVD 4.2 中启用多用户支持

> ID：13376607
> 
> 赞同：8
> 
> 时间：2012-11-14T10:00:53.560
> 
> 标签：android, android-emulator, avd

有什么方法可以在带有 Android 4.2（ADT 版本 21）的新（模拟器）AVD 中启用多用户支持？在真实设备上，设置中应该有用户菜单项，但在我的 AVD 上丢失了。我知道此功能仅对某些平板设备启用，但在新的设备定义部分创建 AVD 或编辑设备时我没有找到任何类型的设置。即使使用 Android 4.2 从 Nexus 7 配置文件创建设备也无济于事。
任何建议如何启用此功能？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T21:36:14.590

对我来说，这适用于 10.1 Jelly Bean avd：

1.  亚行外壳
2.  苏
3.  setprop fw.max_users 5

从这里： http: [//forum.xda-developers.com/showthread.php?p=34350909](http://forum.xda-developers.com/showthread.php?p=34350909)

# javascript - KendoUI kendoDropDownList and triggering select callback progmatically

> ID：13376614
> 
> 赞同：1
> 
> 时间：2012-11-14T10:01:17.740
> 
> 标签：javascript, kendo-ui

I have a input field that I've transformed into a kendoDropDownList. Passed in it's options is a select callback that does some stuff when the user selects a new value.

e.g

```
$("#MyDropDownList").kendoDropDownList({
    optionLabel: "Choose...",
    dataTextField: "MyTextField",
    dataValueField: "MyValueField",
    dataSource: myDataSource,
    select: function (e) {
        // Do some stuff
  }
}); 
```

This bit works fine as long as the user is doing the selecting the value via the gui. The stuff that needs to occur when a value is selected occurs.

The problem occurs if I need to change the selection from code. I have something like this:

```
// Select dropdown entry by index
$("#MyDropDownList").data("kendoDropDownList").select(0); 
```

When I do this, my select callback isn't called. Is there something I'm doing wrong here? Or should I just take the code that happens on select into it's own function and call that myself when I need it to fire?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:17:33.803

Yes, calling Kendo UI API methods does not fire events. This is a design decision across the framework (with one exception, the Window widget). You should call the event handler manually after calling the API.

The reasoning behind this is that you are able to select a different item in the select event handler, after validating the new selection. If the widget triggered the select event, this would not be possible (it would cause an infinite trigger-handle loop).

# c++ - C++ 头文件重定义 (ws2ipdef.h)

> ID：13376616
> 
> 赞同：1
> 
> 时间：2012-11-14T10:01:19.673
> 
> 标签：c++, winapi, include, include-guards

我在我的项目中使用了很多包含（但每个头文件都使用像

```
#ifndef _HEADER_H 
#define _HEADER_H
...
#endif 
```

现在我从 ws2ipdef.h 得到这个错误（自动包含在 windows.h 中）：

```
c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(336) : error C2146: syntax error : missing ';' before identifier 'IN6_ADDR_EQUAL'
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(336) : error C2433: 'Boolean' : 'inline' not permitted on data declarations
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(336) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(337) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(344) : error C2064: term does not evaluate to a function taking 1 arguments
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(344) : warning C4508: 'IN6_ADDR_EQUAL' : function should return a value; 'void' return type assumed
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(354) : error C2146: syntax error : missing ';' before identifier 'IN6_IS_ADDR_UNSPECIFIED'
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(354) : error C2433: 'Boolean' : 'inline' not permitted on data declarations
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(354) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(354) : error C2086: 'int Boolean' : redefinition
1>        c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(336) : see declaration of 'Boolean'
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(355) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(367) : error C2064: term does not evaluate to a function taking 1 arguments
1>c:\program files\microsoft sdks\windows\v7.0\include\ws2ipdef.h(367) : warning C4508: 'IN6_IS_ADDR_UNSPECIFIED' : function should return a value; 'void' return type assumed 
```

在 Interface.h （包含在其他一些文件中）我使用：

```
#define WIN32_LEAN_AND_MEAN

// sockets
#include <winsock2.h>
#include "windows.h"
#include <ws2tcpip.h> 
```

我该如何解决这个问题或任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:09:26.723

尝试使用`#pragma once`而不是 ifndef 保护，它指定编译器在编译源代码文件时只包含（打开）一次文件。[http://msdn.microsoft.com/en-us/library/4141z1cx.aspx](http://msdn.microsoft.com/en-us/library/4141z1cx.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:17:34.863

在 Interface.h 中使用额外的 ifndef 保护解决了它

```
#ifndef _READERCOMMUNICATION_H
#define WIN32_LEAN_AND_MEAN // to exlude some unnecessary windows headers (see windows.h)

// sockets
//#include <winsock2.h> // winsock 1 is enough for my project
#include <windows.h>
#include <ws2tcpip.h>
#endif 
```

# ios - XCode IOS初学者UIViewController类更改按钮

> ID：13376617
> 
> 赞同：0
> 
> 时间：2012-11-14T10:01:23.137
> 
> 标签：ios, xcode, uiviewcontroller, uibutton

我是编程新手，我整晚都在寻找，很长时间以来都想弄清楚这一点。不能......我不想使用导航控制器，但我想做的是这个。

所以我的项目中有两个课程。1 类和 2 类。现在 Class1 中有一个按钮。如果按下此按钮，我希望屏幕转到 Class2。我得到的最接近的是创建一个父类，但是当我这样做时，按钮仍然在两个类上。

```
- (IBAction)addScheduleB:(id)sender {
    [UIView beginAnimations:@"View Curl" context:nil];
    [UIView setAnimationDuration:1.00];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    if (self.firstScreen.view.superview ==nil){
        if(self.firstScreen==nil) {
            self.firstScreen = [[FirstScreen alloc] initWithNibName:@"FirstScreen" bundle:nil];
        }
        [self.config1.view removeFromSuperview];
        [self.view insertSubview:self.firstScreen.view atIndex:0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:YES];
        [self.config1.view removeFromSuperview];
        [self.view insertSubview:self.firstScreen.view atIndex:0];
        [sender setTitle:@"Switch To DVR"];

    }
    else{
        if(self.config1 == nil){
            self.config1 = [[Config1 alloc] initWithNibName:@"Config1" bundle:nil];
        }
        [self.firstScreen.view removeFromSuperview];
        [self.view insertSubview:self.config1.view atIndex:0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];
        [self.firstScreen.view removeFromSuperview];
        [self.view insertSubview:self.config1.view atIndex:0];
        [sender setTitle:@"Switch To TV"];
    }
    [UIView commitAnimations];
} 
```

我想删除父类并只有两个类。

按下时是否可以在class1内有一个按钮将我带到class2？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:06:48.040

我希望这个解决方案可以帮助您只从 Class2 制作对象，当按下 Button1 时将 Class2 的 object.View 作为子视图添加到 Class1.view

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:18:19.960

您可以使用模态翻转过渡弹出另一个视图：

```
[self presentViewController:Class2 animated:YES completion:^{
        // Some code on completeion
 }]; 
```

关闭 Class2 视图：

```
[self dismissViewControllerAnimated:YES completion:^{
    //code
}]; 
```

如果你不想退出当前的视图控制器，你可以这样翻转它：

```
BOOL toShowSecond = YES; 
```

...

```
[UIView transitionWithView:self.view
                  duration:1.0
                   options:(toShowSecond?UIViewAnimationOptionTransitionFlipFromLeft:UIViewAnimationOptionTransitionFlipFromRight)
                animations:^{
                    if(toShowSecond) {
                        firstView.hidden = YES;
                        secondView.hidden = NO;
                    } else {
                        firstView.hidden = NO;
                        secondView.hidden = YES;
                    }
                }
                completion:^(BOOL finished){
                    toShowSecond = !toShowSecond;
                }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:21:35.880

尝试类似：

```
- (IBAction)flipViews {
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.6f];

if ([saisieCompleteView superview])
{
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:YES];
    [saisieCompleteView removeFromSuperview];
    [self.view addSubview:saisieRapideView];
    [self.view sendSubviewToBack:saisieCompleteView];
}
else {
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];
    [saisieRapideView removeFromSuperview];
    [self.view addSubview:saisieCompleteView];
    [self.view sendSubviewToBack:saisieRapideView];
}

[UIView commitAnimations];
} 
```

saisieCompleteView 和 saisieRapideView 都必须是主视图的子视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T10:43:01.010

YouTube [Here](http://www.youtube.com/watch?v=ANDvhCWWIc0)上有一个 7 分钟的教程。这显示了如何使用没有情节提要的按钮从一个视图移动到另一个视图，因此您将能够学习代码以从一个类移动到另一个类。

我希望这有帮助。作为初学者，如果您浏览 youtube，您会发现很多教程可以帮助您学习。:)

编辑：这不使用导航控制器

# crystal-reports - 我想知道水晶报告如果其他条件编号和字符串fourmula错误

> ID：13376624
> 
> 赞同：-4
> 
> 时间：2012-11-14T10:01:44.717
> 
> 标签：crystal-reports

```
 if {?type} ='Rent' then
    (if {realestate_repository_plantclass.rentprice}<>0 then
    (
        if{realestate_repository_plantclass.rentprice}<>55.50 then
        {realestate_repository_plantclass.rentprice}
        else
    nn;
    )

    )
    else
    (
    if {realestate_repository_plantclass.sellprice}<>0 then
    {realestate_repository_plantclass.sellprice}

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:40:55.200

```
if {?type} ='Rent' then (
  if {realestate_repository_plantclass.rentprice}<>0 then (
    if{realestate_repository_plantclass.rentprice}<>55.50 then
      {realestate_repository_plantclass.rentprice}
    else
      nn;  //you don't need a semi-colon here; also, what is 'nn'?
  )
)
else (
  if {realestate_repository_plantclass.sellprice}<>0 then
    {realestate_repository_plantclass.sellprice}
) 
```

# eclipse - 运行 JUnit 测试时运行 Spring Web 服务

> ID：13376625
> 
> 赞同：0
> 
> 时间：2012-11-14T10:01:44.940
> 
> 标签：eclipse, spring, google-app-engine, junit

我有一个使用 AppEngine 的基于 Spring 的 Web 服务的应用程序。

要对通过其 URL 访问资源的服务进行测试，

*   我首先运行 Web 应用程序
*   然后运行 ​​JUnit 测试

它可以工作，但是当我运行 JUnit 测试并完成时，是否可以触发 Web 应用程序运行和关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:14:29.097

除了您可能不应该对实时 web 服务进行单元测试（这实际上是集成测试）这一事实之外，我看不出为什么您不能启动 web 应用程序，例如在`@Before`方法中以编程方式使用 Jetty。

```
Server jettyServer = new Server();
SocketConnector conn = new SocketConnector();
conn.setPort( 8080 );
jettyServer.setConnectors( new Connector[]{ conn } );
WebAppContext context = new WebAppContext();
context.setContextPath( "/yourcontext" );
context.setWar( "src/main/webapp" );
jettyServer.setHandler( context );
jettyServer.start(); 
```

干杯，

# c# - 从后面的代码创建 DataTemplate

> ID：13376631
> 
> 赞同：0
> 
> 时间：2012-11-14T10:02:16.877
> 
> 标签：c#, wpf

抱歉，这个问题不是很笼统......

我有一个 ListView，我必须从后面的代码中填充，并且这个 ListView 还需要从后面的代码中获取它的 GridViewColumn。

对于字符串，建立连接并不难，但现在我不想在 ListView 中创建一个表示布尔值的 Ellipse。

XAML 中的代码相当简单，但我无法将其转换为 c# 代码。

以下是部分 XMAL 代码：

```
<ResourceDictionary>
    <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
    <DataTemplate x:Key="templateAdmin">
        <DockPanel>
            <Ellipse Width="8" Height="8" Visibility="{Binding Path=isAdmin, Converter={StaticResource BoolToVisibility}}" Fill="Black"/>
        </DockPanel>
    </DataTemplate>
</ResourceDictionary>

<ListView>
    <ListView.View>
        <GridView>
            <GridViewColumn DisplayMemberBinding="{Binding LastName}" Header="Last Name"/>
            <GridViewColumn CellTemplate="{StaticResource templateAdmin}"
                <GridViewColumnHeader">
                    <TextBlock Text="S"/>
                </GridViewColumnHeader>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

到目前为止，我已经做到了这一点：XAML：

```
<local:SortableListView >
    <ListView.View>
        <GridView x:Name="GroupListGridView" />
    </ListView.View>
</local:SortableListView> 
```

在代码中，我有一个`Collection<GridViewColumn> GridViewColumns`循环遍历并将所有项目添加到`GroupListGridView`. 我有一个功能来填充`GridViewColumns`集合：

```
private void CreateGridViews()
{
    //Creating the Text was easy!
    GridViewColumns.add(new GridViewColumn(){ Header = "LastName", DisplayMemberBinding = new Binding("LastName") });

    //Creating the Ellipse was harder!
    GridViewColumn gvc = new GridViewColumn();
    DataTemplate dt = new DataTemplate();

    gvc.DisplayMemberBinding = new Binding("isAdmin");
    FrameworkElementFactory fef = new FrameworkElementFactory(typeof(Ellipse));
    fef.SetValue(Ellipse.WidthProperty, 8.0D);
    fef.SetValue(Ellipse.HeightProperty, 8.0D);
    fef.SetValue(Ellipse.FillProperty, new System.Windows.Media.SolidColorBrush(System.Windows.Media.Colors.Black));

    //I'm guessing that somewhere here there should be some binding to the visibility property and some sort of conversion done... But I can't figure out how!

    dt.VisualTree = fef;
    gvc.CellTemplate = dt;
    GridViewColumns.Add(gvc);
} 
```

我认为我并没有那么远……只是我无法弄清楚最后的步骤！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:29:51.807

缺少的行是：

```
var ellipseVisBinding = new Binding("isAdmin");
ellipseVisBinding.Converter = new BooleanToVisibilityConverter();

fef.SetBinding(Ellipse.VisibilityProperty, ellipseVisBinding); 
```

（我注意到您已从代码版本中排除模板中的 DockPanel，因此我也将其删除）

# utf-8 - 如何在 D3.js 中显示 utf-8 字符串？

> ID：13376634
> 
> 赞同：1
> 
> 时间：2012-11-14T10:02:36.833
> 
> 标签：utf-8, d3.js

在[D3 Bubble Chart](http://bl.ocks.org/4063269)中，当我使用阿拉伯字符作为气泡的标签时，它们显示为 ���。

有解决办法吗？

编辑：HTML 文档有`<meta charset="utf-8">`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:12:39.743

虽然 HTML 文档是 UTF-8，但我好像忘记将包含图表数据的文件flare.json 的编码设置为 UTF-8！

# objective-c - 从状态栏图标重新激活我的应用程序

> ID：13376639
> 
> 赞同：0
> 
> 时间：2012-11-14T10:03:02.753
> 
> 标签：objective-c, macos, nswindow, nsstatusitem

我正在构建一个没有停靠图标但有状态栏图标的 Mac 应用程序，因此唯一的方法是使用状态图标。

当应用程序处于活动状态时，我可以毫无问题地将我的 NSWindow 从状态图标带到屏幕上。当应用程序失去焦点时会出现问题，此时应用程序会自行隐藏。当我单击状态图标时，我不知道如何使应用程序再次处于活动状态。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:32:19.337

您是否尝试过[activateIgnoringOtherApps](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html) : `NSApplication`?

```
[NSApp activateIgnoringOtherApps:YES]; 
```

# java - 在拆分字符串时需要帮助

> ID：13376640
> 
> 赞同：3
> 
> 时间：2012-11-14T10:03:04.817
> 
> 标签：java, string, split

我正在尝试拆分字符串

```
String strLine="sadf={asdf;=};asdfa ={sfasdf} as}; asdfa ={sfasdf};"; 
```

在这样的输出应该是这样的

```
 ={asdf;=};
   ={sfasdf} as};
   ={sfasdf}; 
```

我试过这段代码

```
String str1=strLine.substring((strLine.indexOf("=")),strLine.indexOf(";")+1);
        strLine=strLine.substring((strLine.indexOf(";")+1)); 
```

但我没有得到我想要的结果..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:08:25.750

可能不是最优雅的方法，但它可以满足您的需要：

```
 String[] st = strLine.split("};");
    for (String s : st) {
        System.out.println(s.substring(s.indexOf("=")) + "};");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:08:07.007

尝试这个：

```
int i1 = strLine.indexOf("=");
int i2 = strLine.indexOf("};", i1);
String s = strLine.substring(i1, i2 + 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:08:28.663

您不需要拆分字符串。我建议您为此目的使用正则表达式。在搜索中找到模式。

只是一个想法，尝试搜索模式以`=`和开头`{`，`}`最后是分号。

并找到与模式匹配的所有组。

例子：

```
Regular Expression = ".*(=\{.*\}.*;)*.*" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T10:09:40.777

```
 String strLine="sadf={asdf;=};asdfa ={sfasdf} as}; asdfa ={sfasdf};";

        String[] s=strLine.split("};");
        String str1=s[0]+"};";
        String str2=s[1]+"};";
        String str3=s[2]+"};";
        System.out.println(str1+" "+str2+" "+str3); 
```

# iphone - 具有 150 多个图像的 ScrollView 崩溃

> ID：13376644
> 
> 赞同：-1
> 
> 时间：2012-11-14T10:03:13.213
> 
> 标签：iphone, xcode, memory-management, uiscrollview, crash

我有一个应用程序，它是一个包含 150 多个图像的滚动视图 .. 我已经按照本[教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content%27)创建它 .. 该应用程序超过 550MB，它有大约 500 个（iPhone 5 为 150，Retina 为 150，非 Retina 为 150 -retina 和按钮）照片.. 该应用程序在模拟器上运行得非常好，没有问题，但在真实设备上，当我打开应用程序时它会一直加载然后崩溃

所以有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:23:04.577

尝试仅加载显示所需的图像。即，在滚动那些隐藏的图像时，应该从滚动视图中取出。也许你可以做一个类似于可重用 UITableViewCell 的设计。即用于仅显示所需图像并在滚动时重用它们的自定义实现。

还有另一种方法，不是直截了当的方法，您可以使用 UITableView 并向每个单元格添加图像，然后旋转 tableview 使其看起来像水平滚动。这样做的好处是 UITableView 将处理所有的可重用性问题，我们不需要担心。但我不确定这是否是正确的方法。

顺便说一句..我已经将带有 UITableView 旋转水平滚动视图的应用程序上传到应用程序商店而没有被拒绝；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:09:10.123

这不是一个好方法，你可以在服务器端和打开应用程序时上传你的照片。从服务器加载图像。

```
id path = @"http://upload.wikimedia.org/wikipedia/commons/c/c7/Sholay-Main_Male_Cast.jpg";
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[UIImage alloc] initWithData:data];

imageView.image = img; 
```

看看这个[答案](https://stackoverflow.com/questions/2510223/xcode-iphone-programming-loading-a-jpg-into-a-uiimageview-from-url)

# master-detail - 在快速枚举主记录时，是否有任何主/详细信息最佳实践来限制详细信息查找

> ID：13376646
> 
> 赞同：1
> 
> 时间：2012-11-14T10:03:16.637
> 
> 标签：master-detail

目前，我们有主/明细解决方案，每次您选择主记录时都会创建明细请求。当你快速浏览主记录时，会有一堆关于不相关细节的请求。唯一相关的是队列末尾。在这种快速结果浏览场景中，是否有任何最佳实践可用于推迟服务调用？

# ios - 经纬度点的奇怪位置

> ID：13376647
> 
> 赞同：0
> 
> 时间：2012-11-14T10:03:24.830
> 
> 标签：ios, mapkit, latitude-longitude, point

我正在尝试在地图上添加一个点。

我得到这个：

```
- (void)plotCrimePositions:(NSData *)responseData {
    for (id<MKAnnotation> annotation in _mapView.annotations) {
        [_mapView removeAnnotation:annotation];
    }

    NSDictionary *root = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
    NSArray *data = [root objectForKey:@"features"];
    NSLog(@"features: %@", data );

    for (NSDictionary *dic in data) {
        NSDictionary *geometry = [dic objectForKey:@"geometry"];
        // Do what you want..
        NSNumber *latitude = [geometry objectForKey:@"x"];
        NSNumber *longitude = [geometry objectForKey:@"y"];
        NSString *crimeDescription = @"test";
        NSString *address = @"banaan";

        NSLog(@"latitude: %@", latitude );
        NSLog(@"longitude: %@", longitude );
        NSLog(@"error: %@", crimeDescription );
        NSLog(@"error: %@", address );

        CLLocationCoordinate2D coordinate;
        coordinate.latitude = latitude.doubleValue;
        coordinate.longitude = longitude.doubleValue;
        NSLog(@"latitude2: %f", coordinate.latitude );
        NSLog(@"longitude2: %f", coordinate.longitude );

        MyLocation *annotation = [[MyLocation alloc] initWithName:crimeDescription address:address coordinate:coordinate] ;
        [_mapView addAnnotation:annotation];
    }
} 
```

我得到这个作为NSLog：

```
2012-11-14 10:57:02.404 ArrestPlotter[9254:907] Response: {"displayFieldName":"Gecontroleerd","fieldAliases":{"Gecontroleerd":"Gecontroleerd"},"geometryType":"esriGeometryPoint","spatialReference":{"wkid":4326},"fields":[{"name":"Gecontroleerd","type":"esriFieldTypeString","alias":"Gecontroleerd","length":255}],"features":[{"attributes":{"Gecontroleerd":"Ja"},"geometry":{"x":5.9680979652859065,"y":52.507071127790766}}]}
2012-11-14 10:57:02.421 ArrestPlotter[9254:907] features: (
        {
        attributes =         {
            Gecontroleerd = Ja;
        };
        geometry =         {
            x = "5.968097965285907";
            y = "52.50707112779077";
        };
    }
)
2012-11-14 10:57:02.423 ArrestPlotter[9254:907] latitude: 5.968097965285907
2012-11-14 10:57:02.424 ArrestPlotter[9254:907] longitude: 52.50707112779077
2012-11-14 10:57:02.425 ArrestPlotter[9254:907] error: test
2012-11-14 10:57:02.426 ArrestPlotter[9254:907] error: banaan
2012-11-14 10:57:02.427 ArrestPlotter[9254:907] latitude2: 5.968098
2012-11-14 10:57:02.437 ArrestPlotter[9254:907] longitude2: 52.507071 
```

但它应该在这里： ![荷兰](../Images/7c2e06d7e6a0b83b394df24bc5235a9c.png)

但地图在这里显示： ![非洲某处](../Images/068ba85e16b9bce8615dfc86e90a31f0.png)

它说位置 2012-11-14 10:57:02.427 ArrestPlotter[9254:907] latitude2: 5.968098 2012-11-14 10:57:02.437 ArrestPlotter[9254:907] longitude2: 52.507071

应该在荷兰。

有谁知道我做错了什么或有同样的问题？提前致谢

**编辑**

可能是因为我使用了美国的教程并且我使用了这个值

```
#define METERS_PER_MILE 1609.344 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:15:24.653

尝试搜索谷歌地图。那就是那些坐标所在的地方。

您正在反向输入它们。如果你颠倒这两个数字，那么你就在荷兰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:16:54.273

您正在以错误的方式设置经度和纬度：

```
NSNumber *latitude = [geometry objectForKey:@"x"];
NSNumber *longitude = [geometry objectForKey:@"y"]; 
```

应该：

```
NSNumber *latitude = [geometry objectForKey:@"y"];
NSNumber *longitude = [geometry objectForKey:@"x"]; 
```

# c++ - QGraphicsScene 或 QGraphicsItem 是否存储场景坐标？

> ID：13376650
> 
> 赞同：0
> 
> 时间：2012-11-14T10:03:34.850
> 
> 标签：c++, qt, qgraphicsitem, qgraphicsscene

我以编程方式移动我的项目`QGraphicsScene`，它们最终出现在错误的位置。它们最终位于坐标 (2x, 2y)，而不是 (x, y)。

我在某个地方改变了错误的东西。我同时使用场景和单个项目，通过指针访问两者。

`QGraphicsItem::pos()`可以为您提供场景坐标中的位置（它没有父级）。 `QGraphicsScene`保存场景中所有项目的列表： `QList<QGraphicsItem *> QGraphicsScene::items () const`.

**我的问题**：项目在场景中的位置的信息 - 它是存储在场景中还是存储在项目中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:28:39.187

在项目中，即在 qgraphicsitem pimpl 类中。打开 qgraphicsitem_p.h ，您将在那里找到 QPointF pos 成员。

# eclipse - 在 Eclipse 中在 OC4J 上部署和调试应用程序

> ID：13376652
> 
> 赞同：1
> 
> 时间：2012-11-14T10:03:40.207
> 
> 标签：eclipse, eclipse-plugin, oc4j

我在 Eclipse 中签出了一个 tomcat webapp 项目（称之为“xyz”）。我使用带有 Devloader 的 eclipse tomcat 插件。一切运行良好。等等等等，开心。

现在我想在 OC4J 应用服务器上运行相同的项目并在 Eclipse 中进行调试。为此，我已经下载并安装了独立的 OC4J 服务器。我在 Eclipse 中创建了一个 OC4J 服务器实例。问题是如何部署早期签出的项目“xyz”以在 Eclipse 中的 OC4J 服务器上运行。

另外，有没有类似eclipse中tomcat的OC4J插件，让生活更轻松。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:37:56.867

1.  将您的应用程序打包到 EAR 文件中并将其部署到 OC4J
2.  使用启用远程调试的 VM 参数启动 OC4J（请参阅[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/jdb.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/jdb.html)）
3.  在 Eclipse 中创建远程 Java 应用程序类型的调试配置，并使用它连接到正在运行的 VM

# c# - 将 XML 数据从 C# 传递到 Java？

> ID：13376658
> 
> 赞同：0
> 
> 时间：2012-11-14T10:04:05.830
> 
> 标签：c#, java, xml, sockets

我有两个应用程序：一个在 C# 中，另一个在 Java 中。我需要一种使用某种服务将 XML 格式的 C# 应用程序中的数据传输到 Java 应用程序的方法。

我以前只使用过套接字，但我正在寻找一些不那么专有的东西，以便将来与其他应用程序一起使用。还有哪些其他选择？

*请注意，我在使用套接字方面的知识范围是一个用 java 编写的简单客户端/服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:16:19.077

如果两个程序都在同一台机器上运行，你当然也可以使用文件，但一般来说，它是这样运行的：

1.  在 C# 中创建一个 Web 服务，实现一个公开数据的方法。
2.  使用 jdk 提供的 wsimport 工具，将其指向上面创建的 .wsdl 文件，以生成用作soap客户端的java类。
3.  使用生成的类来使用 web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:20:21.657

（我现在看到你坚持使用 XML。所以算了吧）

这些是完全不同的问题——就像问我现在是否想和你说话，我们应该用法语打电话还是用普通话邮寄信件。所以这是：

1.  传输数据的方式（SA HTTP、TCP 或其他）。

2.  一些常见的数据结构。

令人困惑的是，两者都被视为“协议”。

无论如何，我会说`protobuf`通过 HTTP 是最明显和最直接的使用方法。

# image - 如何在 Coldfusion 中为丢失的图像捕获 404 响应？

> ID：13376659
> 
> 赞同：0
> 
> 时间：2012-11-14T10:04:23.173
> 
> 标签：image, coldfusion, http-status-code-404, httprequest

我正在使用自定义编写的自动上传器将图像从用户导入到`Amazon S3`. 我正在我的数据库中建立一个并行`image library`，所以我知道我可以在 S3 上访问哪些图像，以免浪费任何 http 请求。

但是，我的上传程序有时会抛出错误（例如缺少源图像），尽管我正在验证，但有时我的媒体表中会出现条目，而 S3 上没有匹配的图像。

为了纠正这些，我正在考虑创建一个`cfthread`/`cfschedule`来清除我的图像数据库中的错误条目。我不确定如何捕获`404 responses`. 现在我在页面上有这个：

```
<img src="#variables.imageSrc#" alt="#some alt#" title="#some title#" class="ui-li-thumb ui-corner-all" /> 
```

它尝试加载图像，如果不成功则返回 404。

**问题**
我将如何捕捉这个`404`？我不想在标记中添加任何内容，所以我认为这应该转到`onrequestend`或在我的`application.cfc`. 如果是这样，是否有一种简单的方法来识别图像请求，因为我不想在每个应用程序请求上运行一个大例程。

感谢您的见解！

**编辑**：
我不认为`isDefined`在显示之前在每张图像上运行它是可行的，因为这将是对 S3 的双重请求并且有很多图像。我想取404然后清理我的数据库，这样下次就不会再访问图像了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:11:56.043

如果您不想使用 cfhttp 并像 Matt 建议的那样测试每个图像，为什么不使用 img 标记的 onError 处理程序从浏览器触发 ajax 调用。像这样的东西，但不是显示自定义图形，而是触发您的 ajax 来设置您的标志，或者甚至可能删除图像，因为它对用户不可见。 [jQuery/JavaScript 替换损坏的图像](https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images)

[有关图像 onerror 事件](http://www.w3schools.com/jsref/event_img_onerror.asp)的更多信息

我很想知道您将如何在图像上使用 isdefined 。从您发布的代码中`isdefined("variables.imageSrc")`不会对您有太大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:40:05.720

如果您正在运行计划任务来执行此操作，为什么不使用 cfhttp 对图像资产执行 GET 请求？然后，您可以检查响应中的状态代码以验证服务器上是否存在文件，然后相应地更新数据库。

# python - matplotlib 使用单个命令将多个变量分配给轴实例

> ID：13376662
> 
> 赞同：2
> 
> 时间：2012-11-14T10:04:30.147
> 
> 标签：python, matplotlib

有没有办法将字典传递给轴方法以一次设置实例变量而无需单独调用`.set_xlim()`,`.set_ylim()`等等？我知道 Matlab 有这个功能，我也认为 Matplotlib 但找不到文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:14:17.923

它是[`plt.setp`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.setp) （另见`getp`）。

举个简单的例子：

```
import matplotlib.pyplot as plt

linestyle = dict(color='red', marker='^', linestyle='--', linewidth=2)

fig, ax = plt.subplots()
line, = ax.plot(range(10))

plt.setp(ax, xlim=[-1, 12], ylim=[-5, 12], xlabel='X-axis')
plt.setp(line, **linestyle)

plt.show() 
```

![在此处输入图像描述](../Images/641db3667e34c72c87a48f3965163c60.png)

`setp`并且`getp`是“matlab-isms”，所以很多人认为它们是“unpythonic”，除非绝对必要，否则不应使用它们。

显然，您可以通过其他方式完成所有这些操作（例如，在调用 dict 时使用`ax.axis([xmin, xmax, ymin, ymax])`或仅扩展dict设置轴限制）。 `linestyle``plot`

`setp`不过还是很有用的。它会自动对艺术家序列进行操作，因此您可以执行`plt.setp([ax1, ax2, ax3], **parameters)`. 这对于诸如刻度和刻度标签之类的东西特别方便，您经常同时操作一堆艺术家。

它还允许轻松自省 matplotlib 艺术家。尝试调用诸如`plt.setp(ax)`查看所有参数列表或`plt.setp(line, 'marker')`查看`line.set_marker`.

# jquery - 使用 jQuery 更改 div 内的特定文本

> ID：13376665
> 
> 赞同：1
> 
> 时间：2012-11-14T10:05:06.323
> 
> 标签：jquery

在下面的代码中，我想使用 jQuery 仅将单词“Going for”更改为“Highest bid:”。我知道如何使用的唯一方法是`replaceWith`生成这样的东西：`$('#wp-bidcontainerleft').replaceWith('new word');`但这行不通，因为我没有替换 div 中的所有内容。

```
<div id="wp-bidcontainerleft">
  Going for
  <br>
  $101.00
</div> 
```

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:06:59.057

您必须 get `.contents()`which 还检索纯文本子元素，然后替换第一个子元素

```
$('#wp-bidcontainerleft').contents().eq(0).replaceWith(document.createTextNode('Highest bid:')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:18:25.500

试试这个方法

```
$(function () {
    $('#wp-bidcontainerleft').each(function() {
        var text = $(this).text().replace('Going for', 'Highest bid:');
        $(this).text(text);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:20:02.570

您可以使用`contents`方法：

```
$('#wp-bidcontainerleft').contents().each(function(i, v){
    if (i === 0) {
        this.textContent
        ? this.textContent = 'new word' // non-ie browsers
        : this.innerText = 'new word';  // crazy ie
        return false // stop executing each method
    }
}) 
```

[http://jsfiddle.net/DPVTg/](http://jsfiddle.net/DPVTg/)

# windows-phone-7 - 终止应用程序后如何保持独立存储设置

> ID：13376666
> 
> 赞同：0
> 
> 时间：2012-11-14T10:05:06.373
> 
> 标签：windows-phone-7, isolatedstorage, exit-code

如何在应用程序启动时保留已保存的隔离存储设置

我在 backevents 上使用异常终止：

```
 protected void _BackKeyPress(object sender, CancelEventArgs e)
    {
        if (MessageBox.Show("Do you want to close the application?", "Q", MessageBoxButton.OKCancel) != MessageBoxResult.OK)
        {
            e.Cancel = true;
            System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings.Add("key2", "33r4 ");
        }
        else
        {
           if (IsolatedStorageSettings.ApplicationSettings.Contains("Key"))
        {
            IsolatedStorageSettings.ApplicationSettings["Key"] = App.Current.ViewModel;
        }
        else
        {
            IsolatedStorageSettings.ApplicationSettings.Add("Key", App.Current.ViewModel);
        }
           throw new Exception("ExitApplication");
        }
    } 
```

我尝试保存在 app.xaml.cs 中声明的视图模型，但在启动时无法在其中获取隔离存储设置值。但它编译并成功运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:09:42.603

您需要调用该[`IsolatedStorageSettings.Save`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx)方法：

```
protected void _BackKeyPress(object sender, CancelEventArgs e)
{
    if (MessageBox.Show("Do you want to close the application?", "Q", MessageBoxButton.OKCancel) != MessageBoxResult.OK)
    {
        e.Cancel = true;
        System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings.Add("key2", "33r4 ");
        IsolatedStorageSettings.Save();
    }
    else
    {
        if (IsolatedStorageSettings.ApplicationSettings.Contains("Key"))
        {
            IsolatedStorageSettings.ApplicationSettings["Key"] = App.Current.ViewModel;
        }
        else
        {
            IsolatedStorageSettings.ApplicationSettings.Add("Key", App.Current.ViewModel);
        }
        IsolatedStorageSettings.Save();
        throw new Exception("ExitApplication");
    }
} 
```

# android - （Java）类似议程的程序的数据结构？

> ID：13376669
> 
> 赞同：0
> 
> 时间：2012-11-14T10:05:22.863
> 
> 标签：android, data-structures

简而言之，我从 XML 解析了这样的数据：

```
root ---- date1 ---- time 1 ----item 1 ---- prop 1 --- a
       |          |          |           |         |-- b
       |          |          |           |    
       |          |          |           |- prop 2
       |          |          |    
       |          |          |--item 2
       |          |
       |          |- time 2
       |
       |
       |- date2 ---- time 1 
```

每个`item`都有几个属性（比如 item1 有 prop1 和 prop2）

每个`time`都有几个`item`s

每个`date`都有几个`time`s

root 有几个`date`s 作为它的孩子

我想使用这些数据：

能够向用户显示每个日期内的内容。例如，如果`date1`是当前日期，则显示每个用户`item`按 排序`time`，只显示这些数据类型，如 Android 谷歌日历的议程视图。

那么请问我应该使用什么数据结构来实现这一点？

我认为可能的候选人是：

1.  嵌套的 HashMap，比如`HashMap<Time, HashMap<item1, HashMap<prop1, a>>>;`
2.  SQL数据库，为每个创建表`time`，然后放入`item`行，`prop`列

这个应用程序在存储数据时不严格保持树状结构是完全可以的，所以我更喜欢SQL数据库，请问各位大神有没有更好的解决方案？

此应用程序将在 Android 上运行，感谢您的帮助。

**更新**

我对数据库结构的想法：

为每个日期创建数据库表；

然后在每个数据库表中：

```
 time    prop1    prop2    prop3
item1
item2
... 
```

然后也许以后我可以通过使用来检索`item`s基础。`select``time`

**UPDATE2** 我需要为日期创建表，因为某些项目可能是相同的。请想象一下，您在一周的不同日子召开了两次相同的会议。我不能为每个创建表，`item`因为从原始 XML 中提取这些信息比创建`date`表并将它们放入数据库中很困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:16:17.977

我的方法是创建一个 DAO（数据访问对象），负责获取解析 XML 产生的对象并将所有数据正确存储在 SQLite 上。DAO 还将负责从 SQLite 数据重新制作对象。

请记住，这个翻译不会像你提到的那么容易。您说“每次创建表，然后将项目放在行中，将道具放在列中”。这不是标准的数据库模型，因为通常您不会为给定实体的每个实例创建一个表。

首先分析您拥有哪些实体（例如，日期、时间、项目），然后分析它们之间的关系（例如，一个数据包含一个或多个时间，一个时间包含一个或多个项目等）。通常每个实体都将成为您数据库上的一个表，并且关系将进入现有表（作为对其他表的引用）或者它们将拥有自己的表。您可以在此处阅读有关此方法的更多信息：[http ://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:47:04.613

为所有人创建一个表，并为我们创建一个日期列以根据需要检索数据。您不需要像为所有日期创建表格那样复杂。

# c# - 来自单元测试版本的 nHibernate 'Named Query Not Found' 错误

> ID：13376674
> 
> 赞同：1
> 
> 时间：2012-11-14T10:05:57.777
> 
> 标签：c#, nhibernate

我想知道是否有人可以帮助我解决一个令人愤怒的问题。

我们在从 nHibernate 调用的 SQL Server 2008 数据库中有一个存储过程。我们有各种单元测试来测试我们的数据访问存储库，当这些测试从我们的本地 Visual Studio 机器上运行时，它们就通过了。但是，当作为我们在 TFS 2010 上针对同一数据库的自动构建的一部分执行时，存储库代码会失败，并显示：

命名查询未知：GetMyData

映射 XML 看起来像（我已经简化并删除了公司特定的东西）：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" auto-import="true" assembly="MyCompany.SystemDomain" namespace="MyCompany.SystemDomain">
<class name="MyClass">
    <id name="Guid" type="guid"/>
    <property name="QuoteReference"/>
</class>
<sql-query name="GetMyData">
    <return alias="GetMyData" class="MyClass">
        <return-property column="Guid" name="Guid"/>
        <return-property column="QuoteReference" name="QuoteReference"/>
    </return>       
    exec MyStoredProc :param1, :param2
</sql-query> 
```

调用 C# 代码如下所示：

```
IQuery query = session.GetNamedQuery("GetMyData");
query.SetString("QuoteReference", quoteReference);
query.SetInt32("FSANumber", 12345);

IList<MyClass> result = query.List<MyClass>(); 
```

我已经检查了 .hbm.xml 文件是嵌入式资源，并且我已经使用 Reflector 打开了包含上述代码的存储库程序集（取自我们在 Binaries 文件夹中的构建服务器），并且可以看到包含映射的嵌入式资源，并且我可以看到使用 session.GetNamedQuery() 调用调用的命名查询与该程序集中的 sql-query 映射元素中的 name 属性匹配。

当自动构建单元测试执行时，我还在我们的数据库上运行了 SQL Profiler，并确认在此期间没有调用存储过程。

任何帮助将不胜感激，因为我们已经完全没有想法了。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:08:21.873

我猜出于某种原因，在 tfs 机器上运行时不会调用 AddAssembly 方法来添加带有 hbm 文件的 dll。检查运行单元测试时加载了哪些配置文件，并可能尝试创建一个会话工厂，在其中添加没有配置的 dll 以查看是否是问题所在。

# yii - 使用 GII（通过 YII）生成视图后如何访问它？

> ID：13376677
> 
> 赞同：0
> 
> 时间：2012-11-14T10:05:58.550
> 
> 标签：yii, gii

我已经设法使用 YII 和 GII 创建了几种表单，但老实说，我并不完全理解它。如果有人可以向我解释这一点，我将不胜感激。

基本上，我在这里创建访问了表单创建者：

```
index.php/gii/form 
```

然后我填写：

```
Model Class: Product
View Name: createProduct
View Path: application.views (default)
Scenario: createProduct 
```

当我生成代码时，我最终得到一个名为“createProduct.php”的文件，位于：

```
protected\views\createProduct.php 
```

1.  如何访问此视图？我认为这样的事情应该可以工作： http: [//mysite.com/createProduct](http://mysite.com/createProduct)（但它没有）
2.  如果我想将链接更改为：[http ://mysite.com/admin/products/createProduct 我该怎么办](http://mysite.com/admin/products/createProduct)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:36:11.760

1.  Gii 告诉你修改你的控制器。它显示了您应该在生成过程后插入的代码。当您这样做时，您将能够通过[http://yoursite.com/controller/action访问您的表单](http://yoursite.com/controller/action)

2.  您可以使用 UrlManager 管理您的网址。在文档中查看这篇文章 - [http://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

# http - BizTalk 发送适配器 HTTP 发布响应

> ID：13376682
> 
> 赞同：2
> 
> 时间：2012-11-14T10:06:28.883
> 
> 标签：http, post, adapter, biztalk, send

我有一个 BizTalk 2010 项目，其中包含一个编排，该编排需要进行 HTTP 发布，然后检查响应的状态代码和正文以确定下一步行动。

我可以配置编排和端口以进行 HTTP Post，但我无法收到响应。

我应该使用发送/接收端口还是关联？

我应该为响应使用什么模式（我相信响应是标准的 http 响应：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:26:10.357

如果您正在寻找消息已成功传输的一种通知（不在消息内容中），您可以在编排中设置逻辑发送端口属性，如下所示：

```
"Delivery Notification" = Transmitted 
```

并且可以使用 Microsoft.XLANGs.BaseTypes.DeliveryFailureException 处理交付失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:42:11.190

Http 状态代码应该作为上下文属性在响应消息中可用，您可以在表达式形状中访问它。

```
statusCode = ResponseMessage(HTTP.ResponseStatusCode); 
```

您的 ResponseMessage 应该是 System.Xml.XmlDocument 类型，但由于它不是真正的 Xml 文档，因此请确保将请求/响应端口配置为使用响应端的 PassThruReceive 管道。

# html - 最好的生成方式

> ID：13376692
> 
> 赞同：0
> 
> 时间：2012-11-14T10:07:17.133
> 
> 标签：html, twitter-bootstrap

是否有`<hr>`在 html 文档中显示的最佳实践？
例如`<span class="divider"></div>.`
，这样做的目的是`<hr>`根据上下文隐藏/显示。

PS：
我正在使用引导程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:16:07.100

```
<div class="divider"></div> 
```

使用 CSS，您可以在分区上创建一条线。你可能想尝试这种风格..

```
.divider {
   border-bottom:gray 1px solid;
   /* remember, that's COLOR SIZE STYLE*/
} 
```

现在，显示/隐藏您的线路。

```
.divider:hover {
   border-bottom:green 1px solid;
   /* remember, that's COLOR SIZE STYLE*/
} 
```

为您的班级使用**HOVER**状态。注意在将鼠标光标移动到整个 div 上时，颜色从默认变为绿色的灰色变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:16:19.157

创建水平规则的最佳实践是使用为水平规则设计的元素：`<hr/>`标签。正如@Mr.Alien 所说，您可以轻松地设置它的样式：

```
 hr {
    border: 0px none;
    background: #ccc;
    height: 2px;
    width: 100%;
} 
```

请记住，HTML 或 CSS 并不是真正的上下文语言（除了 CSS 中的一些伪规则）。使用 JQuery 或 PHP 根据动作或某物是否存在来显示或隐藏。

# ruby-on-rails - 使用设计密码限制控制器中的方法

> ID：13376695
> 
> 赞同：3
> 
> 时间：2012-11-14T10:07:31.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在尝试使用他们的用户帐户密码限制我的一些用户的操作。我有一个转账控制器，用户可以使用转账控制器中的create方法进行转账。

每次用户单击转移按钮以验证转移时，我都想要求输入密码，但我在网上找不到与此相关的任何内容。

我想在视图中添加一个密码字段，并且仅当密码是用户帐户密码时才处理传输。

我正在使用设计来管理我的用户帐户。

我怎么能那样做？

谢谢，

形式 ：

```
<%= form_for current_user.transfers.build do |f| %>
<div class="amount">
    <h5>Select an amount</h5>
    <div class="amount-btns">
        <a class="amount-btn" href="#"><span data-amount="10">10&#36;</span></a>
        <a class="amount-btn" href="#"><span data-amount="20">20&#36;</span></a>
        <a class="amount-btn" href="#"><span data-amount="30">30&#36;</span></a>
        <a class="amount-btn" href="#"><span data-amount="50">50&#36;</span></a>
        <%= f.hidden_field :amount, :id => :amount %>
        <%#= f.hidden_field :teen_id , :id => :user_id_auto_donation %>
    </div>
</div>
<div class="choose-amount">
    <div class="choose-amnt" action="#">
        <div class="form-row choose-lnk">
            <%= f.collection_select :teen_id, current_user.followed_users, :id, :first_name , include_blank: false, :prompt => 'Select a Teen' %>
        </div>

            <%= hidden_field_tag :no_card if !current_user.customer_id? %>
            <%= password_field(:password, :password, :size => 20, :class => 'form_input') %>
            <%= f.submit 'Send', :class => "orange-btn", :id => "send_donation"%>
<% end %> 
```

转移控制器：

```
def create
 Rails.logger.debug(params[:password])
 Rails.logger.debug(current_user.valid_password?(params[:password]))
if current_user.valid_password?(params[:password])
....
else
redirect_to :back
end 
```

Rails.logger.debug(params[:password]) 返回我输入的密码和正确的密码。

Rails.logger.debug(current_user.valid_password?(params[:password])) 返回 false 但如果我将 params[:password] 替换为实际密码，则返回 true

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:30:07.937

我发现这个[链接](https://github.com/plataformatec/devise/wiki/How-To%3a-Find-a-user-when-you-have-their-credentials)向您展示了如何检查用户凭据，对于您的情况，您将执行以下操作（假设您将密码作为名为“密码”的参数发送）：

```
# use the return value to determine if the user inserted the correct password
if(current_user.valid_password?(params[:password]))
  # create transfer
else
  # tell user password is invalid
end 
```

# javascript - 如何将作用于 #id 的 jQuery each() 调用转换为纯 JavaScript 代码？

> ID：13376696
> 
> 赞同：1
> 
> 时间：2012-11-14T10:07:35.630
> 
> 标签：javascript, jquery

我有一个使用 jquery 初始化原型类的 jQuery 代码，如下所示：

```
var sliders = [];
$('#slider').each(function() {
sliders.push(new Slider(this))
}) 
```

我需要将其转换为纯 Javascript 代码来初始化`Slider`原型类。有人可以帮忙吗？我不擅长javascript..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:10:34.153

好吧，一个页面上只能有 1 个 id，这使得它更简单......

```
var slider = document.getElementById("slider");
var sliders = [ new Slider(slider) ]; 
```

# c# - 在数组中查找多个错误值的最有效搜索算法

> ID：13376698
> 
> 赞同：1
> 
> 时间：2012-11-14T10:07:41.020
> 
> 标签：c#, arrays, algorithm, evaluation, processing-efficiency

假设下一个数组：

```
int a[] = new int[15]; 
```

每个值都是数据库中某个时期内特定状态下某些天的计数器。示例：**期间 1/1/2000 - 1/3/2000（3 天，而不是 3 个月）**：状态**XXXXX**的天数。

我想要做的是检查对象计数与网站上的对象计数相比是否正确。如果网站未加载，搜索本身最多需要几秒钟。

我做了一个非常简单的测试项目，将 a 的值与另一个数组上的一些固定值进行比较，我随机选择了一些不同的值，实际上 15 个中有 7 个是不同的。

当前实现的算法是**二分搜索**。这段代码的输出是正确的，但是对于提供的数据，在真实应用程序上将发生的搜索次数为 144，这根本没有效率。是否有任何其他算法可以用来最小化搜索次数（或本例中的汇总计算）？

**重要提示：**这些时间段可以大到 2010 年 9 月 1 日 - 今天，因此暂时不能单独搜索每一天。

*如果需要，请向我寻求解释。*

```
 a = new int[15];
    b = new int[15];
    searchCount = 0;

    // Fill a and b with some test values
        a[0] = 12;
        a[1] = 13;
        a[2] = 26;
        a[3] = 30;
        a[4] = 6;
        a[5] = 3;
        a[6] = 1;
        a[7] = 2;
        a[8] = 8;
        a[9] = 12;
        a[10] = 19;
        a[11] = 21;
        a[12] = 56;
        a[13] = 100;
        a[14] = 80;

        b[0] = 11;
        b[1] = 9;
        b[2] = 26;
        b[3] = 30;
        b[4] = 8;
        b[5] = 3;
        b[6] = 1;
        b[7] = 5;
        b[8] = 8;
        b[9] = 13;
        b[10] = 19;
        b[11] = 21;
        b[12] = 55;
        b[13] = 99;
        b[14] = 80;
    // Filled.

    void BinarySearch(int start, int end)
    {
        if (AreSumsEqual(start, end))
        {
            Debug.WriteLine("Values from positions" + start + " to " + end + " are ok");
        }
        else if (start == end)
        {
            Debug.WriteLine("Value at position " + start + " is not ok");
        }
        else
        {
            int mid = Middle(start, end);
            BinarySearch(start, mid - 1);
            BinarySearch(mid, end);
        }
    }

    int Middle(int start, int end)
    {
        return (int)Math.Ceiling((start + end) / 2.0);
    }

    bool AreSumsEqual(int start, int end)
    {
        bool areEqual = false;
        int sumA = 0;
        int sumB = 0;
        for (int i = start; i <= end; i++)
        {
            sumA += a[i];
            sumB += b[i];
            searchCount += 2; // Each sum calculated is the same as one 
            // website search. This takes the most time in real application, so
            // repeat it as few times as possible.
        }

        return areEqual = (sumA == sumB);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:41:28.427

您不能在这里使用二进制搜索，因为您需要检查每个 [start, end] 组合。此外，如果您使用二进制搜索在两个方向上进行搜索，则无论如何它都不是二进制搜索。

我建议以下解决方案：

```
// Remove this, if you want all matches
bool found = false;

for (int start = 0; start < a.count; start++)
{
      // Maybe you need end = start + 1, not sure
    for (int end = start; end < a.count; end++)
    {
        if (AreSumsEqual(start, end)
        {
            // Found! Let's break to avoid useless iterations,
            // if we only want one match.
            found = true;
            break;
        }
    }

    if (found)
    {
        break;
    }   
} 
```

这在 O([n(n-1)] / 2) 中运行（如果我没记错的话），在最坏的情况下是 O(n²)。由于您必须检查所有 [start, end] 组合，因此您无法以较小的数量级解决此问题。

**编辑：**前提是我理解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:08:06.347

```
var SearchResults = a.Select((value, index) => a[index] == b[index]);

for (int i=0;i<a.Length;i++)
{
  Debug.WriteLine("Values in position {0} are {1}", i, SearchResults.ToList()[i]);
} 
```

正如我在评论中所说，您只需要在两个数组的每个位置之间进行简单比较。

# javascript - 带有垂直子菜单的水平菜单

> ID：13376699
> 
> 赞同：1
> 
> 时间：2012-11-14T10:07:42.700
> 
> 标签：javascript, html, drop-down-menu

我想要一个从 SQl Server Database 获取的带有垂直子菜单的水平菜单，我需要带有滚动条的垂直子菜单，有人可以给我这样的菜单的链接吗？ ![在此处输入图像描述](../Images/427560c0b503b8d6dc9d5380a93680d0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:24:45.253

[试试CSSplay](http://www.cssplay.co.uk/)的 Stu Nicholls ，他可能会为你准备一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T09:17:51.420

我也需要同样的东西，所以我可以向您推荐以下链接：

[使用 CSS 创建您自己的带有嵌套子菜单的下拉菜单和一点 JavaScript](http://www.emanuelblagonic.com/2006/10/11/create-your-own-drop-down-menu-with-nested-submenus-using-css-and-a-little-javascript/)
[Mega Dropdown Menu Generator](http://www.menucool.com/drop-down-menu)
[使用纯 CSS 的响应式水平导航菜单](http://jharaphula.com/responsive-horizontal-menu-pure-css/)

我希望你会发现它很有用。

# java - Hibernate自引用关系和延迟加载

> ID：13376706
> 
> 赞同：0
> 
> 时间：2012-11-14T10:07:57.957
> 
> 标签：java, hibernate, unit-testing, jpa, lazy-loading

在问这个问题之前，这是我的问题的背景：

我有一个名为“Category”的特定实体，它有一个属性 Category（父级）和另一个类型为“relatedEntity”的属性。

这是代码示例：

```
@Entity
public class Category {

    ...

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="entityID")
    private RelatedEntity entity;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="parentID")
    private Category parent;

    ...
} 
```

因此，如您所见，我已经为这些属性声明了 ManyToOne 关系，并且还声明了延迟加载获取策略。

现在，我在 DAO 对象中使用此方法来获取类别列表：

```
public List<Category> getAll() {
    Criteria crit = sessionFactory.getCurrentSession().createCriteria(Category.class);
    return (crit.list());
} 
```

我得到了一个调用 DAO 方法的特定服务对象：

```
@Transactional(readOnly = true)
public List<Category> getAllCategories() {
    return (categoryDAO.getAll());
} 
```

目前没有什么特别的……现在，我的单元测试来了：

```
@Test
public void testCategories() {

    List<Category> cat = service.getAllCategories();
    assertNotNull(cat);
    assertFalse(cat.isEmpty());

    for (Category c : cat) {

        try {
            assertNotNull(c.getEntity().getName());
            fail("Expected lazy init. on Category.Entity");
        }
        catch(LazyInitializationException ex) {
             //Exception is caught
        }

        try {
            assertNotNull(c.getParent().getName());
            //No exception
            fail("Expected lazy init. on Category.Parent");
        }
        catch(LazyInitializationException ex) {}
    }
} 
```

运行测试后，在第一个 try/catch 块中捕获了一个异常，并触发了第二个失败，表示该类别的父属性上没有 LazyInitException。

所以我可以打电话

```
c.getParent().getParent().getName(); 
```

或者

```
c.getParent().getParent().getParent().getName() 
```

没有任何异常被提出。

我在我的配置文件中设置了'show_sql=true'，在调用父属性的getter后，我在日志中看不到任何补充请求，所以没有新请求，但加载了父属性。

有人能解释一下为什么父属性不懒惰吗？

编辑：

我已经更新了我的测试用例。

```
@Test(expected=LazyInitializationException.class)   
public void lazyCategoriesParentsList() {
    List<Category> cat = service.getAllCategories();

    assertNotNull(cat);
    assertFalse(cat.isEmpty());

    for (Category c : cat) {            
        assertNotNull(c.getParent().getName());     
    }       
} 
```

现在测试通过了......它是否与我之前的测试用例中实体属性的访问（通过c.getEntity（））有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:30:26.963

您可以尝试只获取一个**类别**而不是全部加载吗？

事实上，当你加载一个**Category**时，如果 hibernate 可以在同一个**Session中找到它的***父*级，它会初始化它，即使*父*级被标记为惰性。当您查询所有类别时，它将找到**Session**中的所有父级并初始化它们。

# facebook - 使用 localhost 时的 Facebook 应用程序域名

> ID：13376710
> 
> 赞同：86
> 
> 时间：2012-11-14T10:08:09.427
> 
> 标签：facebook

从这里的教程：http:
[//ankurm.com/blog/api/using-localhost-for-facebook-app-development/1091/](http://ankurm.com/blog/api/using-localhost-for-facebook-app-development/1091/)

我试图为我的 Facebook 应用程序设置一个本地开发区。但是当我把“ [http://localhost:85/my_app/](http://localhost:85/my_app/) ”作为我的域名时，Facebook 说

> 应用程序域：“ [http://localhost:85/app-name/](http://localhost:85/app-name/) ”不应包含协议信息。

此外，当我将“localhost:85/my_app/”作为我的域名时，我收到错误消息：

> 应用程序域：localhost:85/my_app/ 不是有效域。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-05-12T13:20:09.307

我的解决方案：

1.  将应用程序域留空
2.  (产品) Facebook 登录 > 设置
3.  添加`http://localhost:85/my_app/`到`Valid OAuth redirect URIs`盒子
4.  保存更改

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-04-03T07:30:02.490

似乎协议已更改。

这是我的解决方案（我在 2015 年 4 月 3 日进行了测试，效果很好）：

在**设置**->**基本**选项卡中

1.  **应用域：**本地主机
2.  点击“ **+添加平台**”并选择“**网站**”
3.  **站点 URL：** [http://localhost:<port>/](http://localhost:<port>/)（*<port>*是您的端口号）
4.  **保存更改**

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-03-13T22:23:03.723

1.  将应用程序域留空
2.  使用 Facebook 登录访问网站
3.  添加`http://localhost:port_number/`
4.  保存更改并重试。欲了解更多信息，请访问

[http://developers.facebook.com/docs/samples/canvas/](http://developers.facebook.com/docs/samples/canvas/) 快乐编码 :-)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-07-09T19:23:27.647

多年来，这已经发生了一些变化，但我只是让它与我在 localhost 上运行的 web 应用程序一起工作。这就是我所做的：

1.  转到[https://developers.facebook.com/apps](https://developers.facebook.com/apps)
2.  选择您的应用。
3.  从左侧导航栏中选择设置 > 基本。
4.  单击页面底部的添加平台按钮。
5.  点击网站
6.  输入`http://localhost:8080/`站点 URL。
7.  单击您刚刚输入的站点 URL 最右侧的快速启动按钮。
8.  将打开一个新选项卡。在该选项卡上，向下滚动到“告诉我们您的网站”部分，然后再次输入`http://localhost:8080/`站点 URL。
9.  单击下一步按钮。
10.  再次尝试登录，这次成功了。

祝你好运！

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2017-10-10T03:44:05.713

**2018年工作解决方案**

我花了很长时间才弄清楚这一点，所以我将分享我的解决方案。

我尝试了所有建议的答案，但对我没有任何效果，最后我所要做的就是去[https://developers.facebook.com/apps/YOUR_APP_ID/fb-login/settings/](https://developers.facebook.com/apps/YOUR_APP_ID/fb-login/settings/)并添加我的*有效 OAuth 重定向 URI*框中的完整回调 url 。

在我的例子中，使用 ruby​​ on rails，我的 url 看起来像这样`http://localhost:3000/user/auth/facebook/callback`。

在我添加它之后，一切都开始工作了！希望这可以帮助其他人面临这个问题。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-01-05T15:16:09.193

这是我以前做的。

如果您使用的是 Windows，则需要修改主机文件。主机文件位置将在`%SystemRoot%\System32\drivers\etc\`

像这样在主机文件中添加新行

```
127.0.0.1    localhost.YOUR-SITE-NAME.com 
```

保存主机文件。

转到 FB 应用程序设置控制面板并`localhost.YOUR-SITE-NAME.com`在应用程序域字段中给出。保存更改。

`localhost.YOUR-SITE-NAME.com`现在从浏览器加载本地环境。

注意：用您的域名更改 YOUR-SITE-NAME。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-08-10T12:21:38.387

**Working solution (August 2018)**

First, select your app in the [developers dashboard](https://developers.facebook.com/apps).

Then make sure your app is in [development mode](https://developers.facebook.com/docs/apps/managing-development-cycle/#step1), as it allows localhost over HTTP. To do so, click on the toggle situated at the top right of your app's page.

Finally, please follow the notes below as they could cause trouble if improperly filled:

*   `Settings > Basic > App Domains` should be empty
*   `Products > Facebook Login > Settings > Valid OAuth Redirect URIs` should be empty

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-11-14T10:30:47.950

您可以将其留空或使用`localhost`,`http://localhost:85/my_app/`是 URL

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-11-16T15:44:03.133

当我当时编写该教程时，应用程序域中允许使用端口。而且我实际上能够使用 81 端口（wamp 服务器）运行应用程序。现在看起来 facebook 不允许在 url 中使用端口。您可以`localhost`在应用程序域中使用。

我会尽快更新信息。我正在尝试找出解决方案。

临时解决方案是使用 localtunnel [http://progrium.com/localtunnel/](http://progrium.com/localtunnel/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-02-07T04:23:12.167

我对此进行了测试，它对我有用 [2020 年 2 月]：

1.  安装 ngrok 并获取您的 https 网址（例如：[https](https://a3asdf23.ngrok.io) ://a3asdf23.ngrok.io ）
2.  转到 FB App Dashboard Settings (Basic) -> 在 App Domains 下 -> 添加`https://a3asdf23.ngrok.io`, `https://ngrok.io`。
3.  在同一页面上，一直向下滚动，添加平台（网站），将 url 设置为`https://a3asdf23.ngrok.io`. 还没有完成，点击 QuickStart -> 在“告诉我们您的网站”下，输入相同的 url `https://a3asdf23.ngrok.io`。
4.  然后转到产品 -> Facebook 登录 -> 设置 -> 客户端 OAuth 设置 -> 有效 OAuth 重定向 URI -> 添加这些`https://a3asdf23.ngrok.io`, `https://ngrok.io`, `https://a3asdf23.ngrok.io/{your-redirect-uri}`.

给你。稍后谢谢我:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-10-05T13:02:42.127

您必须创建一个隧道来共享您的本地主机； [Ngrok 可能](https://ngrok.com/ "恩格罗克")是最简单的方法。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-10-31T18:34:57.297

[https://ngrok.com](https://ngrok.com)

通过[https://ngrok.com/](https://ngrok.com/)链接下载 ngrok 并提取该文件。打开 cmd ( search cmd) 进入解压 ngrok 的目录。从命令行打开 ngrok ex: c:/ngrok/ngrok.exe [port] 或 cd c:/ngrok 然后 ngrok 80 ( ngrok [port] ) 你会得到

恩格罗克

```
Tunnel Status                 online
Version                       1.3/1.3
Forwarding                    http://3ahsdfhska.ngrok.com -> 127.0.0.1:80
Forwarding                    https://3ahsdfhska.ngrok.com -> 127.0.0.1:80
Web Interface                 http://127.0.0.1:4040
# Conn                        0
Avg Conn Time                 0.00ms 
```

不要忘记确保您的 wamp 服务器在同一端口上打开……（如何检查 -> goto->wampicon->apache->httpd.conf 搜索端口或 80（默认）将其用于 ngrok.exe 80 ）

> `http://3ahsdfhska.ngrok.com`

将是用于在线访问您的本地主机的 URL

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-07-28T01:27:09.963

我尝试了这里提到的所有解决方案，但都没有奏效。

解决我的问题的方法是将“OAuth 重定向 URI”从 firebase 复制到 facebook 应用程序“有效 OAuth 重定向 URI”

我将所有域都留空

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-12T21:16:07.827

如果您遇到协议错误，您不仅需要删除 Http://，而且如果网址末尾有任何反斜杠，您也必须删除它，否则它将不起作用。我做到了，而且效果很好！哈拉！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-12-04T17:26:32.533

再加入一种溶液：

我按照说明设置了我的网站，然后添加了第二个应用程序（Facebook Canvas）并将该 URL 设置为`http://localhost:XXXXX`. 现在我可以在本地和生产环境中访问 FB。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-31T19:07:27.157

我在本地开发并使用此 URL：`localhost/fb`

然后我必须添加一个具有以下 URL 的网站：`http://localhost`

在我添加的*应用程序域*`localhost`下。

现在它起作用了。我遇到的唯一问题是，您必须在所有脚本中使用此 URL。例如

```
$loginUrl = $helper->getLoginUrl('http://localhost/fb/login-callback.php', $permissions); 
```

你不能`127.0.0.1`在这里使用...

# jquery - jquery - 操作元素内的文本

> ID：13376712
> 
> 赞同：2
> 
> 时间：2012-11-14T10:08:10.947
> 
> 标签：jquery

使用 jQuery，如何将“章节标题”移动到“1.1”旁边，使其显示为 ...“1.1 章节标题”，同时保持其他所有内容不变？

```
<p>
  1.1
  <a name="_Toc159407685"></a>
  <a name="_Toc161121797"></a>
  <a name="_Toc208282996"></a>
  <a name="_Toc315779471"></a>
  <a href="link.jpg">
  <img class="img" alt="" src="link.jpg">
  </a>
  Chapter Title
</p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T10:22:00.653

给你：

```
$("p").append($("p *").detach());​ 
```

**演示：http:** [//jsfiddle.net/MwDc6/](http://jsfiddle.net/MwDc6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:44:29.513

我建议使用纯 JavaScript 方法：

```
function moveTitle(el) {
    if (!el) {
        return false;
    }
    else {
        var titleNode = el.lastChild,
            title = document.createTextNode(titleNode.nodeValue.trim()),
            number = el.firstChild;
        el.removeChild(titleNode);
        el.insertBefore(title, number.nextSibling);
    }
}

moveTitle(document.getElementsByTagName('p')[0]); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/tddvM/1/)。

虽然这确实做了一些假设：

*   您要移动的标题将*始终*是元素的最后一个子元素，
*   最后一个孩子*永远*是一个`textNode`, 和
*   您*总是*希望将标题移动到元素的第一个子元素之后的位置。

当然，这些假设可以改变或适应；但鉴于您提出的要求，它应该足以满足您的用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:33:36.720

你可以这样做：

```
$('p:contains("1.1")').each(function(){
    var text = $(this).text();
    txt = text.replace(new RegExp("chapter title", "g"), '');
    txt = text.replace(new RegExp("1.1", "g"), '1.1 chapter title');
    $(this).html(txt);
}); 
```

# java - 为什么即使不使用 volatile 在一个线程中修改共享变量也会影响另一个线程？

> ID：13376713
> 
> 赞同：4
> 
> 时间：2012-11-14T10:08:11.327
> 
> 标签：java, multithreading, unit-testing

这里我有三个简单的类：

第一类：

```
public class ThreadSyncMain {

public static int count = 0; // volatile is not use

public static void main(String[] args) {

    Thread thread1 = new Thread( new Thread1(),"Thread1" ); 
    Thread thread2 = new Thread( new Thread2(),"Thread2");

    thread1.start();
    thread2.start();

}

} 
```

第 2 类：

```
public class Thread1 implements Runnable{
public void run() {

    System.out.println("Thread1 Count :: "+ThreadSyncMain.count);
    ThreadSyncMain.count++;
}

} 
```

第 3 类：

```
public class Thread2 implements Runnable{
public void run() {

        System.out.println("Thread2 Count :: "+ThreadSyncMain.count);

}
} 
```

输出是：

线程 1 计数 :: 0 线程
2 计数 :: 1

这意味着 thread1 改变了 count 的值。那么为什么 thread1 的变化会影响 thread2，因为我没有使用任何“volatile”关键字。在这种情况下，“volatile”关键字不是问题吗？如何修改代码以测试“易失性”？

提前致谢。

更新部分：我在做一些命中和试用测试后更新代码。1 类保持不变。这是更新的代码：

第 2 类：我添加了 100 毫秒的延迟。

```
public class Thread1 implements Runnable{
public void run() {

    System.out.println("Thread1 Count :: "+ThreadSyncMain.count);

    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    ThreadSyncMain.count++;
}

} 
```

第 3 类：添加了 while 循环。它里面的计数被持续监控。

```
public class Thread2 implements Runnable{
public void run() {

    while(true)
    {
        if(ThreadSyncMain.count == 1)
        { 
            System.out.println("Thread2 Count :: "+ThreadSyncMain.count);
        }
    }

}
} 
```

现在在这种情况下，我得到了以下输出：
1\. 如果 class1 中未使用“volatile”，则输出为：

```
 Thread1 Count :: 0 
```

2\. 如果在 class1 中使用“volatile”，则输出为：

```
Thread1 Count :: 0
Thread2 Count :: 1
Thread2 Count :: 1
Thread2 Count :: 1
.
.
. 
```

为什么 volatile 在这种情况下会出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:11:02.243

每个线程都有一个内存视图。如果不使用锁，这些视图不能保证在线程之间保持一致。因此，像您在上面所做的那样共享变量（没有`volatile`）将起作用，因为它在线程中可见，但会给您带来不可靠的结果。使用`volatile`关键字意味着变量在线程之间被*一致*地读取。

请参见[此处](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#volatile)，特别注意：

> 可变字段是用于在线程之间传递状态的特殊字段。对 volatile 的每次读取都会看到任何线程对该 volatile 的最后一次写入；实际上，它们被程序员指定为由于缓存或重新排序而不能看到“陈旧”值的字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T10:15:34.667

`Volatile`将*保证*线程 1 的副作用对线程 2 可见。没有`volatile`，更改可能可见，也可能不可见。

测试其效果`volatile`很困难，因为它取决于硬件架构、线程实现、编译器优化以及调度程序的确切时间等低级方面。

如果我要这样做，我会编写产生高并发性的多线程测试，并确保我在多处理器实现上运行。然后我可能会观察到带有和不带有`volatile`. 测试的结果仍然是不确定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:14:45.933

编译器可能没有缓存计数器，因为它是一个类范围的变量。所以写在内存中。

如果您想测试易失性和非易失性写入/读取..

```
public class VolatileExperiment
{
  private int counter ;
  private volatile int volatile_counter;
  public void Counter()
  {
     new Thread( new Runnable(){
     public void run()
     {
        ++counter;
        ++volatile_counter;
        //print
      }
    }).start();

   new Thread( new Runnable(){
     public void run()
     {
       ++counter;
       ++volatile_counter;
       //print
      }
    }).start();
    //print counter 
   //print volatile 
  } 
```

}

使用 volatile 可确保编译器不会优化代码，因此写入是在内存中完成的，而不是在线程内存中。所以你应该看到`volatile_counter`更新了..虽然`counter`可能不会受到影响

# c# - 对象属性如何知道它的父项？

> ID：13376720
> 
> 赞同：1
> 
> 时间：2012-11-14T10:08:42.620
> 
> 标签：c#, c#-4.0, object-oriented-analysis

假设方案：

```
class ComplexProperty
{
    string PropertyName {get; set;}
    string Description {get; set;}
    string GetParentName(); // How can this be implemented?
}

class Parent
{
    string ParentName {get; set;}
    ComplexProperty Property {get; set;}
} 
```

问题是从`ComplexProperty`.

我想出的最佳解决方案是使用 Parent 的构造函数来初始化属性，但是当您从不同的位置设置属性时，这很容易出现错误并且失败。

例如：

```
class Parent
{
    public Parent()
    {
       ComplexProperty = new ComplexProperty(this); // Store an instance of the parent inside the property
    }
    string ParentName {get; set;}
    ComplexProperty Property {get; set;}
} 
```

有什么想法吗？这种架构有什么最佳实践吗？请注意，`ComplexProperty`将始终是特定接口实现的子级，因此反射是一种可行但不理想的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:21:56.793

一种方法是保留一个`Parent`属性并将其设置在`ComplexProperty`setter 中。

```
class ComplexProperty
{
    public string PropertyName {get; set;}
    public string Description {get; set;}
    public IParent Parent {get; set;}
    public string GetParentName() 
    {
        return this.Parent == null ? null : this.Parent.Name;
    }
}

interface IParent
{
    string Name {get; set;}
}
class Parent : IParent
{
   public string ParentName {get; set;}

   private ComplexProperty _prop;
   public ComplexProperty Property 
   {
      get { return _prop; }
      set 
      {
          _prop = value;
          _prop.Parent = this; 
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:23:42.397

你可以使用一个函数

```
class ComplexProperty
{   
    private readonly Func<string> GetParentNameFunc;

    string PropertyName {get; set;}
    string Description {get; set;}
    string GetParentName {get {return GetParentNameFunc(); } }

    public ComplexProperty(Func<string> GetParentNameFunc)
    {
      this.GetParentNameFunc = GetParentNameFunc;
    }
}

class Parent
{
    string Name {get; set;}
    ComplexProperty Property {get; set;}

    //...
    //...

    SomeMethodOrCtor()
    {
      Property = new ComplexProperty(()=>{ return this.Name; });
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:29:58.267

您可以使用 EntityFramework，它基本上是用来处理这种关系的。但是，它带来了我不太欣赏的开销。看看有多少关于这个框架的问题在这里结束......

或者您也可以编写自己的代码。在我制作的一个建模编辑器中，我最终得到了一个组件/实体设置，其中组件需要知道它的父级才能知道空间中的位置。并且组件可能还需要知道包含实体的场景。

使用构造函数是一种方法，但可能不适用于所有内容，因为您可能还不知道父级的身份。

您还可以使用访问器，当您更改属性时，您会在收到的对象中调用类似“SetParent”的内容。

此外，在序列化过程中，我最终进行了重建父级设置，因为序列化层次结构太过分了。从顶部调用，我会在包含的每个对象中设置父对象，然后在所有子对象中调用相同的对象，依此类推。

当然，您必须假设一个对象只有 1 个父对象。如果您的整个代码从一开始就以这种方式构建，那么管理起来并不难。

# php - 如何在phpcloud中设置环境变量？

> ID：13376723
> 
> 赞同：0
> 
> 时间：2012-11-14T10:08:44.870
> 
> 标签：php, web-hosting

是否可以（以及如何）在 phpcloud 托管服务中设置环境变量（如 APPLICATION_ENV）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:11:45.553

您可以使用 .htaccess 文件更改 php.ini 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:45:58.950

在 .htaccess 文件中添加以下指令：

```
SetEnv APPLICATION_ENV development 
```

# java - 在下载文件之前通过套接字在客户端和服务器之间交换字符串

> ID：13376727
> 
> 赞同：0
> 
> 时间：2012-11-14T10:09:01.373
> 
> 标签：java, sockets

大家好，我已经用 Java 实现了一个服务器客户端程序，以便客户端可以从服务器下载文件。

但问题是我想在文件下载之前在客户端和服务器之间交换一些消息（字符串）。我在 JAVA 中用来在它们之间交换字符串的任何东西都能够在它们之间交换字符串，但是文件没有正确下载。我不知道为什么。

下载文件的客户端代码：

```
byte[] b = new byte[1024];
int len = 0;
long  bytcount = 1024;

File fp = new File("/home/luv/Desktop/LUVSAXENA_IT.docx");

RandomAccessFile ra=new RandomAccessFile(fp,"rw");
ra.seek(0);
InputStream i = sock.getInputStream();

BufferedReader reader=new BufferedReader(new InputStreamReader(i));

InputStream is = sock.getInputStream();

while ((len = is.read(b, 0, 1024)) != -1) {
    System.out.println("len"+len+"\n");
      bytcount = bytcount + 1024;

      //decrypt

      ra.write(b, 0, len);
}
is.close();
ra.close();
sock.close(); 
```

发送文件的服务器代码：

```
byte[] buf = new byte[1024];

OutputStream os = sock.getOutputStream();

BufferedOutputStream out = new BufferedOutputStream(os, 1024);

File folder = new File("/home/luv/NetBeansProjects/Shared/");
File[] listoffiles=folder.listFiles();
String s;

int i=0;
File fp = new File("/home/luv/NetBeansProjects/Shared/LUVSAXENA_IT.docx");
RandomAccessFile ra = new RandomAccessFile(fp,"r");
long bytecount=1024;

while((i=ra.read(buf, 0, 1024)) != -1)
{

    bytecount += 1024;
    out.write(buf, 0, i);
    out.flush();
}
sock.shutdownOutput();
out.close();
ra.close();
sock.close(); 
```

在下载文件之前，我如何在客户端和服务器之间安全地交换字符串，以便之后可以安全地下载文件。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:40:38.707

您创建连接的方式是写入原始数据但读取字符（流与读取器/写入器）。

我建议使用`ObjectInputStream`/`ObjectOutputStream`或对文件使用 Base64 编码，然后使用`Reader`/ `Writer`。

您还必须自己管理如何将字符串与数据分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:43:44.610

您将需要某种既服务于客户端又能使用的协议。
最简单的方法是使用具有请求-响应模式的固定长度消息，例如，每个消息字符串有 10 个字节（Xes 此处显示空白）：

```
Client sends    "HELLOXXXXX"
Server answers  "WELCOMEXXX"
Client sends    "GIMMEFILEX"
Server ansers   "SIZE=83736"
Client reads the next 83736 bytes
Client sends    "THANKYOUXX"
Server SENDS    "GOODBYEXXX" 
```

这是一种帮助您读取固定长度数据的方法，它将阻塞直到读取所有数据。写入数据时，不需要任何特殊代码，直接写出来即可。

```
private byte[] readBytes(InputStream stream, int amount) throws IOException
{
  byte[] result = new byte[amount];

  int read = stream.read(result, 0, amount);
  if (read < 0)
  {
    throw new IOException("Can't read from socket");
  }
  while (read < amount)
  {
    int remaining = amount - read;
    int newRead = stream.read(result, read, remaining);
    if (newRead < 0)
    {
      throw new IOException("Can't read from socket");
    }
    read = read + newRead;
  }
  return result;
} 
```

# android - GridLayout 内的微调器

> ID：13376728
> 
> 赞同：8
> 
> 时间：2012-11-14T10:09:09.790
> 
> 标签：android, layout, android-gridlayout

将 Spinner 添加到 GridLayout 似乎会“破坏”布局。我准备了一个最小的工作示例来说明这个问题：

我想要一个左边有标签的网格，右边有输入控件。右侧的控件应占用剩余空间。这是一个简单的示例：

![带有 EditTexts 的网格](../Images/0ec939e02ec72f9d714bc70393824494.png)

用微调器替换其中一个输入控件会导致右列*延伸到屏幕边界之外*，从而导致布局难看。

![带微调器的网格](../Images/2513b75a5bda39ff2f601abdca789c9a.png)

为什么会发生这种情况，我该如何避免？

* * *

这是第一个示例的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2" >

    <TextView
        android:layout_gravity="left"
        android:text="TextView" />

    <EditText
        android:layout_gravity="fill_horizontal"
        android:hint="EditText" />

    <TextView
        android:layout_gravity="left"
        android:text="TextView" />

    <EditText
        android:layout_gravity="fill_horizontal"
        android:hint="EditText" />

</GridLayout> 
```

这是第二张图片的代码。唯一的区别是第一个 EditText 已被 Spinner 替换：

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2" >

    <TextView
        android:layout_gravity="left"
        android:text="TextView" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="left"
        android:text="TextView" />

    <EditText
        android:layout_gravity="fill_horizontal"
        android:hint="EditText" />

</GridLayout> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T14:15:29.973

显然，可以通过将`layout_width`Spinner 的 设置为零来避免该问题：

```
<Spinner 
    android:id="@+id/Spinner1"
    android:layout_gravity="fill_horizontal"
    android:layout_width="0dp" /> 
```

我会将其标记为已接受的答案，因为它可以轻松解决问题，但如果有人能对此行为提出*解释，我会很乐意改变这一点。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:23:35.813

```
try this code

<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:hint="EditText" />
    </TableRow>

</TableLayout> 
```

# javascript - 无法从回调函数设置全局变量

> ID：13376730
> 
> 赞同：0
> 
> 时间：2012-11-14T10:09:10.413
> 
> 标签：javascript, jquery, javascript-events

我无法`ApiToken`从 CallBack 函数设置全局变量`processGetToken`。你能解释一下原因，并发布一个代码示例吗？

```
$(document).ready(function () {

    // General Settings
    var ApiToken, ApiUriGetToken, ApiUriGetPlaylist,
    ApiSettings = {
        clientId: encodeURIComponent('aaa'),
        clientSecret: encodeURIComponent('bbb')
    };
    //-------------------------------------------------------------------------------------
    // URIs to xxx API:
    // Token
    ApiUriGetToken = 'https://api.xxx.com/oauth/token?grant_type=client_credentials&client_id=' + ApiSettings.clientId + '&client_secret=' + ApiSettings.clientSecret;

    //--------------------------------------------------------------------------------------
    // Asynchronous requests using Ajax

    // Get Token
    function ApiGetToken() {
        $.getJSON(ApiUriGetToken, processGetToken);
    }

    // Get Token : Callback
    function processGetToken(data) {
        ApiToken = data.access_token;   // Set the Token as Global variable
        // Update the URIs with the a Token generated
        ApiUriGetPlaylist = 'https://api.xxx.com/playlist?oauth_token=' + ApiToken + '&account=' + ApiSettings.clientId;
    }

    //--------------------------------------------------------------------------------------
    // Get Categories
    function ApiGetPlaylist() {
        ApiGetToken();  // Get a fresh Token
        $.getJSON(ApiUriGetPlaylist, processGetCategories);
    }

    // Get Categories : Callback
    function processGetCategories(data) {
        var content = '';
        // Trasvers
        $.each(data.result, function (i, element) {
            content += element.name;
        });
        // Inject in the DOM
        $('#view01-caregories').text('ciao');

    }
    //--------------------------------------------------------------------------------------

    // Testing
    ApiGetToken();
    console.log('ApiUriGetToken: ' + ApiUriGetToken);
    console.log('ApiToken: ' + ApiToken);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:18:09.650

您在函数内声明变量 ApiToken，因此它只存在于该函数中 - 而不是它之外。要使其全局化，只需像这样在函数外部声明它......

```
var ApiToken;

$(document).ready(function () {

    // General Settings
    var ApiUriGetToken, ApiUriGetPlaylist,
    ApiSettings = {
        clientId: encodeURIComponent('aaa'),
        clientSecret: encodeURIComponent('bbb')
    }; 
```

您仍然在函数内部使用完全相同的方法，但它存在于全局范围内，因此其他所有内容都可以引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:07:42.053

问题与 AJAX 异步请求有关。我将代码放在一个独特的回调函数中，解决了这个问题。

# java - 我如何在运行时读取 XX:MaxPermSize？

> ID：13376731
> 
> 赞同：1
> 
> 时间：2012-11-14T10:09:08.713
> 
> 标签：java, memory, jvm, jvm-arguments

> **可能重复：**
> [读取 Java JVM 启动参数（例如 -Xmx）](https://stackoverflow.com/questions/1518213/read-java-jvm-startup-parameters-eg-xmx)

我们有一个桌面应用程序，其中一些旧安装没有适当的内存设置。

他们在“随机”时间体验到 perm gen 空间不足，我需要提醒用户 MaxPermSize 运行得太低，但我不知道如何从 jvm 访问此设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:27:42.610

这应该让您大致了解如何做到这一点

```
public class Main {
    public static void main(final String[] args) {
        final RuntimeMXBean memMXBean = ManagementFactory.getRuntimeMXBean();
        final String prefix = "-XX:MaxPermSize=";
        final List<String> jvmArgs = memMXBean.getInputArguments();
        String maxPermSize = null;
        for (final String jvmArg : jvmArgs) {
            if (jvmArg.startsWith(prefix)) {
                maxPermSize = jvmArg.substring(prefix.length());
                break;
            }
        }

        System.out.println("MaxPermSize is " + maxPermSize);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:19:58.413

首先，我建议您连接 [JConsole](http://www.oracle.com/technetwork/java/index.html)或[VisualVM](http://visualvm.java.net/index.html)。您无法确定应用程序中的 PermGen 大小（以编程方式）。另一种方法是使用 MemoryMXBean，但它只做简单的内存报告，但坚持使用我提到的工具来获得更详细的图片。
因此，如果您要使用 MemoryMXBean，请尝试此代码

```
MemoryMXBean memMXBean = ManagementFactory.getMemoryMXBean();
memMXBean.getHeapMemoryUsage().getUsed();
memMXBean.getNonHeapMemoryUsage().getUsed(); 
```

它向您显示快照数据而不是计算值:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T10:16:32.290

这将给出相应的属性值。

```
System.getProperty("XX:MaxPermSize"); 
```

检查这个 url[如何查看 JVM 中的 MaxPermSize？](https://stackoverflow.com/questions/5176748/how-can-i-view-the-maxpermsize-in-jvm)

# ruby-on-rails - Rails erb 预处理未在开发模式下发生

> ID：13376733
> 
> 赞同：0
> 
> 时间：2012-11-14T10:09:26.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, erb, sass

无论出于何种原因，动态样式的第一次尝试让我在下一行得到一个 Sass::SyntaxError。看起来 erb 没有被预处理。

```
/* app/assets/stylesheets/variables.css.scss.erb */

$headerHeight: <%= '15px' %>; 
```

它处于开发模式。知道是什么原因造成的吗？

以下是我与资产相关的配置选项，以防万一：

```
# Application
config.assets.enabled = true
config.assets.initialize_on_precompile = true
config.assets.version = '1.1'

# Development
config.assets.compress = false
config.assets.debug = false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:19:00.303

scss 需要在 15px 部分周围加上引号。所以你需要做到：

```
$headerHeight: "<%= '15px' %>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:02:56.493

这是一个`sass-rails`错误，如此[处](https://github.com/rails/sass-rails/issues/94)所述。

我有[同样的问题](https://stackoverflow.com/questions/14293878/sass-with-erb-wont-compile/14305274#14305274)，发现解决方案是通过安装[`sass-rais-path`](https://github.com/quinn/sass_rails_patch).

这使 Rails 可以按预期工作 SASS + ERB。无需使用引号。

# javascript - 用于 Rails 和 JS（服务器/客户端）的良好不可知模板系统或用于 JS 的客户端模板

> ID：13376740
> 
> 赞同：1
> 
> 时间：2012-11-14T10:09:56.767
> 
> 标签：javascript, ruby-on-rails, backbone.js, template-engine

我有一个关于选择模板引擎的请求，可在 Rails 和 JS 中重复使用，可能只有服务器（node.js）或客户端之一，但如果它对两者都适用 - 当然更好。

任何人都可以推荐一个不错的、维护良好的系统，它使用正常的 rails 方法（部分、集合渲染），并且也可以与 JS 一起使用。另外，它应该如何配置，假设 Rails 通常使用带有 @ 符号的实例变量，这对 JS 无效。我看到了 Node.js 的 haml 解释器（不确定它与普通 haml 的兼容性如何）。

另一种可能性是仅在 JS 部分中的模板，Rails 仅维护数据，这引发了有关这种方式的工具的问题——除了 bacbone 之外应该检查哪些库？

# android - 在 Android OpenGL ES 中将 2D 纹理保存为 png

> ID：13376744
> 
> 赞同：4
> 
> 时间：2012-11-14T10:10:10.573
> 
> 标签：android, opengl-es, fbo

我是`OpenGL ES`Android 新手。但是现在，我需要用`OpenGL ES 2.0`它来做一些照片编辑。我在 Android 4.1.2 中找到了示例代码`"Hello-effect"`，它完成了编辑照片并将其渲染到窗口的工作。但现在，我还需要将编辑后的照片保存到本地位图。我认为可能有一些方法可以直接从纹理中获取数据，但我发现的唯一方法是`glReadPixels(...)`. 所以我做了一些尝试使用它：

我做的第一个测试：

1.  我使用 GLSurfaceView 显示已由 android.media.effect API 编辑的照片。
2.  我在包含 GLSurfaceView 的相同布局中添加了一个按钮。
3.  单击按钮时，我调用 glReadPixels(...) 来获取照片数据。但作为第 3 步，我只得到了 botton 的数据。

我猜当我单击按钮时，窗口的帧缓冲区已被按钮的内容替换。

我做的第二个测试：

1.  我创建了一个 FBO 来保存编辑后的照片并使用 glReadPixels(...) 来获取照片数据，但它是一张黑色图片。

代码如下所示：

```
public void renderTextureOffscreen (int texId) {
    // Bind default FBO
    GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, offScreenFrameBuffer[0]); 
    GLES20.glFramebufferTexture2D(GLES20.GL_FRAMEBUFFER,GLES20.GL_COLOR_ATTACHMENT0,GLES20.GL_TEXTURE_2D, texId , 0);

    int status = GLES20.glCheckFramebufferStatus(GLES20.GL_FRAMEBUFFER);
    if(status == GLES20.GL_FRAMEBUFFER_COMPLETE)
    {
        // Set viewport
        GLES20.glViewport(0, 0, mViewWidth, mViewHeight);
        GLToolbox.checkGlError("glViewport");

        // Disable blending
        GLES20.glDisable(GLES20.GL_BLEND);

        // Set the vertex attributes
        GLES20.glVertexAttribPointer(mTexCoordHandle, 2, GLES20.GL_FLOAT, false,
            0, mTexVertices);
        GLES20.glEnableVertexAttribArray(mTexCoordHandle);
        GLES20.glVertexAttribPointer(mPosCoordHandle, 2, GLES20.GL_FLOAT, false,
            0, mPosVertices);
        GLES20.glEnableVertexAttribArray(mPosCoordHandle);
        GLToolbox.checkGlError("vertex attribute setup");

        // Set the input texture
        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
        GLToolbox.checkGlError("glActiveTexture");
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texId);
        GLToolbox.checkGlError("glBindTexture");
        GLES20.glUniform1i(mTexSamplerHandle, 0);

        // Draw
        GLES20.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
        GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
    } 
```

我的问题是我的猜测是否正确？而作为 FBO 方法，我是否会失去一些关键步骤来完成我的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:55:35.467

尝试在之后立即读取像素

```
GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4); 
```

还要确保从正确的线程调用 glReadPixels，即在您的渲染器子类中。

还有一件事，我看到您将用于 FBO 的纹理绑定为着色器的输入，您不能这样做。

我想在 RTT 之后，您将结果渲染到四边形或屏幕上的其他东西，对吗？

你能展示你用来读取像素的其余代码吗？

# jquery - 在一些 tr 之后用 jquery 对表进行排序

> ID：13376751
> 
> 赞同：1
> 
> 时间：2012-11-14T10:10:25.637
> 
> 标签：jquery, html, ruby-on-rails, jquery-ui-sortable

我有这样的html表结构：

```
<table cellpadding="0" cellspasing="0" class="tablesorter zebra" id="articles-table">

    <tbody>...etc standart stuff...
    <tr>
    <td>
    </td>
    </tr>
    then i have 
    <tr id="123123">
    <td colspan="7">
     Analogs
    </td>
    </tr>
    <tr id="prcol">
    <td>
    <td>
</td>
</td>
<tr>
...
</table> 
```

我试过这样的脚本：

```
jQuery(function($) {
var table = $('table');
$(document).ready(function () {    
    $('#prcol')
    .each(function(){        
        var th = $(this),
            thIndex = th.index(),
            inverse = false;        
        th.click(function(){            
            table.find('td').filter(function(){                
                return $(this).index() === thIndex;                
            }).sortElements(function(a, b){                
                return $.text([a]) > $.text([b]) ?
                    inverse ? -1 : 1
                    : inverse ? 1 : -1;                
            }, function(){
                return this.parentNode; 
            });
            inverse = !inverse;                
        });            
    });
  });
}); 
```

但主要问题是它正在对所有内容进行排序......但我只需要那个，它会在我的 tr 之后使用`id 123123`并在页面加载时排序......

我需要通过我的浮点​​数进行排序，它只在第二个 div 中！在 id = 123 的 tr 中，这很重要...而且我在 web 中看到的所有解决方案都非常庞大...我只需要在具有特定 id 的某些 tr 中进行简单的排序第二个 td ...我该如何解决？

我试过 tablesorter.com。但它不是我的......不能只为某些 tr 定制它......如果加载了文档，我还需要它作为分类器。

**也在**这里尝试#2： [链接](http://jsfiddle.net/GuRxj/)

第一排还有麻烦...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:42:51.120

很难准确地说出你想要从你的英语中得到什么，但这是我想出的：

1.  查找所有表。
2.  对于每个表：
    1.  找到标有 class 的标题单元格`prcol`。那是我们要排序的列。
    2.  查找`tbody`表中标有`sortable`类的所有标签。
    3.  对于每个可排序的主体：
        1.  根据可排序单元格的浮点值对行进行排序
        2.  用已排序的行替换旧行

为了完成这项工作，我将以下内容放入 jQuery 的文档就绪事件中：

```
$("thead .prcol").each(function(thIdx, sortElem) {
    // find our column index
    var index = $.inArray(sortElem, $(sortElem).closest('tr').children());
    var colSelector = "td:eq(_n_)".replace('_n_', index);

    $(sortElem).closest('table').children('tbody.sortable').each(function(tbIdx) {
        var rows = $(this).children('tr');
        rows.sort(function(left, right) {
            var leftText = $(colSelector, left).text();
            var rightText = $(colSelector, right).text();
            var leftValue = parseFloat(leftText) || 10000;
            var rightValue = parseFloat(rightText) || 10000;
            return  leftValue - rightValue;
        });
        $(this).html(rows);
    });
});​ 
```

我**[做了一个小提琴](http://jsfiddle.net/slashingweapon/6ggR3/)**，显示了工作中的代码。我对表格做了很多简化，以便更容易看到正在发生的事情，并且我对第三个表格主体进行了未排序。

# c# - 分页问题 - ASP.NET

> ID：13376754
> 
> 赞同：-3
> 
> 时间：2012-11-14T10:10:45.703
> 
> 标签：c#, asp.net, html, css, asp.net-mvc

我正在使用 ASP.NET 中的 GridView，特别是 PagerSettings 和 PagerStyle。我有几个问题。

详情：看截图。1）页面索引 - 它看起来像文本字段，我在其中输入页码 - 按下 Enter 后 -> 它转到输入的页码。2）如何使箭头加粗？3）如何将它们（文本字段和箭头）定位在中间（垂直）？

![在此处输入图像描述](../Images/35f4faede6fc940eb804a9d1b6ff0cd3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:18:35.237

看看链接 [自定义分页与 ASP NET GridView](http://www.codeproject.com/Articles/410733/Custom-paging-with-ASP-NET-GridView)

[使用 ASP NET GridView 分页时的一些提示和技巧](http://www.dotnetcurry.com/ShowArticle.aspx?ID=244)

[在 ASP NET 中使用 GridView 控件进行有效分页](http://www.codeproject.com/Articles/125541/Effective-Paging-with-GridView-Control-in-ASP-NET)

# objective-c - Objective-C – 理解协议参考

> ID：13376756
> 
> 赞同：0
> 
> 时间：2012-11-14T10:10:49.753
> 
> 标签：objective-c, cocoa, protocols

```
// 1\.    
TestViewController <TestViewControllerProtocol> *testVC = [TestViewController new];

// 2.
TestViewController *testVC = [TestViewController new]; 
```

1.  上述参考文献有什么区别？
2.  什么时候最好使用第一个而不是第二个？

测试视图控制器.h

```
@interface TestViewController : UIViewController <TestViewControllerProtocol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:25:38.937

1.  区别：两者都是类型`TestViewController`，而只有第一个实现了协议`TestViewControllerProtocol`。
2.  仅当该类未明确符合该协议并且您需要向该协议中定义的该对象发送消息时才需要第一个。未指定协议并随后发送消息将导致警告或错误。

一种可能的情况是，您有一个`TestViewController`包含多个子类的超类，其中只有几个子类实际实现了该协议。如果您有一些代码使用其中两个都实现协议的子类，您可以使用第二个选项轻松存储对它们的引用。

# c++ - C++：具有多个派生的虚函数

> ID：13376757
> 
> 赞同：-4
> 
> 时间：2012-11-14T10:10:48.997
> 
> 标签：c++, function, inheritance, virtual

我有以下结构：

```
class A{
public:
    virtual void fn() = 0;
} ;

class B : public A{
public:
    virtual void fn(){
       //implB
    }
} ;

class Base{
     //whatever
} ;

class C : public Base,public B{
public:
    virtual void fn(){
        //implC
    }
} ;

B* instance = new C();
(*instance).fn() 
```

这似乎调用`implB`而不是`implC`。这是正常的吗？我想调用的实现`implC`，`fn`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:17:24.567

通常，你这样称呼它：

```
instance->fn(); 
```

但是您的版本也可以。

由于您有 , 的实例`C`，`C::fn()`因此将被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:31:20.670

没错，当我的示例单独运行时，会调用 C::fn() 。我的问题实际上是我正在使用 ros:pluginlib (http://ros.org/wiki/pluginlib) 动态加载这个类 (C)，所以多重继承问题可能来自那里。这是我必须研究的完全不同的问题。

# powershell - Foreach 循环在运行时缺少结果

> ID：13376761
> 
> 赞同：0
> 
> 时间：2012-11-14T10:11:06.627
> 
> 标签：powershell

我正在运行一个脚本来查询服务器的驱动器以带回磁盘空间结果。该脚本使用此问题的服务器文本文件列表运行，我在 txt 文件中只有一个服务器名称，并最终构建一个 html 文档。

出现问题是因为当我使用此脚本的第三个示例时 - 它不会为服务器带回正确数量的驱动器。所以为了测试这一点，我做了以下事情：

**测试 1。**

```
Get-WmiObject 
    -ComputerName DB-server01 
    -Class Win32_LogicalDisk 
    -Filter "DriveType = 3" 
```

**结果：**

```
DeviceID     : C:
DriveType    : 3
ProviderName : 
FreeSpace    : 28575797248
Size         : 146056146944
VolumeName   : OS

DeviceID     : V:
DriveType    : 3
ProviderName : 
FreeSpace    : 814725959680
Size         : 898316103680
VolumeName   : SQLData

DeviceID     : W:
DriveType    : 3
ProviderName : 
FreeSpace    : 293852868608
Size         : 299436601344
VolumeName   : SQLLogs 
```

**测试 2。**

```
$computers = Get-Content "C:\Powershell\servers.txt";
write-host $computers
foreach($computer in $computers)
{ 
    $disks = Get-WmiObject 
        -ComputerName $computer 
        -Class Win32_LogicalDisk 
        -Filter "DriveType = 3"
    write-host $disks
} 
```

**结果**

DB-server01

\DB-server01\root\cimv2:Win32_LogicalDisk.DeviceID="C:" \db-server01\root\cimv2:Win32_LogicalDisk.DeviceID="V:" \db-server01\root\cimv2:Win32_LogicalDisk.DeviceID="W: "

**测试 3。**

```
$i = 0;
$percentWarning = 90;
$percentCritcal = 25;
$computers = Get-Content "C:\Powershell\servers.txt";
write-host $computers

foreach($computer in $computers)
{ 
    $disks = Get-WmiObject 
        -ComputerName $computer 
        -Class Win32_LogicalDisk 
        -Filter "DriveType = 3"

    $computer = $computer.toupper()

    foreach($disk in $disks)
    {        
        $deviceID = $disk.DeviceID;
        $volName = $disk.VolumeName;
        [float]$size = $disk.Size;
        [float]$freespace = $disk.FreeSpace; 
        $percentFree = [Math]::Round(($freespace / $size) * 100, 2);
        $sizeGB = [Math]::Round($size / 1073741824, 2);
        $freeSpaceGB = [Math]::Round($freespace / 1073741824, 2);
        $usedSpaceGB = $sizeGB - $freeSpaceGB;

        $color = $whiteColor;

        if($percentFree -lt $percentWarning)      
        {
            $color = $greenColor
            if($percentFree -lt $percentCritcal)
            {
                $color = $redColor
            }        

            if ($percentFree -eq "NaN")
            {
                $PercentFree = "N/A"
                $Color = $whiteColor
            }  

            Add-Content $diskReport $dataRow;

            Write-Host -ForegroundColor Green 
                "$computer $deviceID percentage free space = $percentFree";

            $i++  
        }
    }
} 
```

**结果：**

```
DB-Server01 C: percentage free space = 19.56 
```

当通过外观测试 3 只带回驱动器 c 并错过了 V&W。

？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:28:51.750

我遇到了同样的问题，发现确实没有显示磁盘，因为脚本正在跳过具有足够磁盘空间的磁盘。如果要显示所有磁盘，则必须调整脚本。问题是没有正确放置“}”以使磁盘没有出现问题。该脚本仅在百分比低于警告级别时才打印

您可以将最后一位更改为：

```
 if($percentFree -lt $percentWarning)      
    {
        $color = $greenColor
        if($percentFree -lt $percentCritcal)
        {
            $color = $redColor
        }        

        if ($percentFree -eq "NaN")
        {
            $PercentFree = "N/A"
            $Color = $whiteColor
        }  }

        Add-Content $diskReport $dataRow;

        Write-Host -ForegroundColor Green 
            "$computer $deviceID percentage free space = $percentFree";

        $i++  
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:17:17.957

我实际上已经意识到为什么会发生这种情况 - 这是由于

$percentWarning = 90;

其中只有在驱动器的可用空间低于 90% 时才告诉输出成功——某些服务器的可用空间价值要高得多，当然这台服务器确实如此——所以它没有在该驱动器上报告。我已经将值编辑为 99% 并再次拾取所有驱动器

# android - 创建一个按钮，没有xml的textview

> ID：13376762
> 
> 赞同：1
> 
> 时间：2012-11-14T10:11:10.453
> 
> 标签：android, eclipse, textview

我有以下问题：我想创建按钮和文本视图而不在 xml 文件中声明它们。我需要的按钮数量总是可变的，我想使用按钮来打开和关闭文本视图。按钮和文本视图应按照我创建它们的确切顺序在线性布局中创建。希望你能理解我

```
 final LinearLayout linL = (LinearLayout) findViewById (R.id.linearLayout1);

     TextView a1 = new TextView(this);
     a1.setText("Dynamic layouts ftw!");
     a1.setVisibility(View.VISIBLE);
     linL.addView(a1); 
```

这是我到目前为止所尝试的：线性布局是在 xml 文件中创建的，并且已经包含一些元素。当我尝试运行它时，一切都很好，但是一旦我执行 linL.addView(a1) 我得到一个空指针异常

干杯，克里斯托夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:20:21.743

使用 setlayoutparams。可能会有所帮助

```
TextView txtTag = new TextView(this);
    txtTag.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    txtTag.setText("Button " + (j + 1 + (i * 4));
    txtTag.setId(j + 1 + (i * 4));
    linL.addView(txtTag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:39:09.717

```
 try this structure whenever you want to create any thing dynamically.

    public class PhrasesActivity extends Activity {

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.phrases);
            LinearLayout linearLayout = (LinearLayout) findViewById(R.id.LinearLayout1);

            LinearLayout L2 = new LinearLayout(this);
            L2.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));
            L2.setGravity(Gravity.CENTER);

            TextView a1 = new TextView(this);
            a1.setText("Dynamic layouts ftw!");
            a1.setVisibility(View.VISIBLE);

            Button b1 = new Button(this);
            b1.setText("SUBMIT");

            L2.addView(a1,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,0.8f)));
            L2.addView(b1,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,0.8f)));

            linearLayout.addView(L2);

        }
    }
Let me know you understand or not? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T16:13:59.337

确保您的 XML 文件具有您想要添加按钮的视图设置

```
<LinearLayout
android:id="@+id/myName"> 
```

在您输入的活动中：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.myName);
Button extra = new Button(this);
extra.setText("extra");
ll.addView(extra); 
```

如果需要，您现在可以创建一个循环来添加内容

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T10:42:06.910

您需要将 ID 添加到 XML 文件中的 LinearLayout：

```
<LinearLayout android:id="@+id/linearLayout1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_marginTop="@dimen/x5" android:orientation="vertical" > 
```

# sqlite - 无法将 Community.CsharpSqlite.WP7.dll 添加到我的 WP7 项目中

> ID：13376767
> 
> 赞同：0
> 
> 时间：2012-11-14T10:11:24.457
> 
> 标签：sqlite, windows-phone

我有一个运行良好的 WP7 项目，但是当我尝试添加对 Community.CsharpSqlite.WP7.dll 的引用时，我得到了

> 无法将对更高版本或不兼容程序集的引用添加到项目中

但这是我要添加的 WP7 文件？

我在这里找到了，这是一个跨平台的应用程序

[https://github.com/xamarin/mobile-samples/tree/master/MWC/Dependencies/Community.CsharpSqlite](https://github.com/xamarin/mobile-samples/tree/master/MWC/Dependencies/Community.CsharpSqlite)

也试过

[https://github.com/praeclarum/sqlite-net/tree/master/lib/wp7](https://github.com/praeclarum/sqlite-net/tree/master/lib/wp7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:03:41.490

我不确定为什么你不能添加它，但你可以自己构建它。

该项目位于此处 - [C# SQLite 项目](http://code.google.com/p/csharp-sqlite/)

如果您查看源代码，您会发现可以编译自己的 DLL 的 Windows Phone 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:17:23.073

我在 CodePlex 上看到的最后一个 SQLite 客户端版本是在 2010 年 12 月，因此即使您正在查看 4 到 10 个月前在这些其他网站上发布的 DLL，它们也有可能使用的是 Windows Phone 7.0 代码库和您的目标是 Windows Phone 7.1 (Mango) SDK。各种 DLL 在 7.0 和 7.1 之间发生了变化，如果您正在查看的 DLL 实际上是在针对 7.0 时构建的，那么如果您针对 7.1，它们可能具有较旧且不兼容的引用。我建议尝试使用 7.1 SDK 将 SQLite 源代码构建到您的项目中。

另请注意，SQLite 的 google 或 codeplex 项目都不是官方代码库。如果可能，您应该使用官方网站的 DLL 或源代码：[http ://www.sqlite.org/download.html](http://www.sqlite.org/download.html)

# backbone.js - 骨干路由在刷新时不起作用

> ID：13376773
> 
> 赞同：1
> 
> 时间：2012-11-14T10:11:33.853
> 
> 标签：backbone.js, underscore.js

我已经把这个演示放在一起

[http://demo.stg.brightonconsulting.net.au/templates/tests/backboneJQMProducts/](http://demo.stg.brightonconsulting.net.au/templates/tests/backboneJQMProducts/)

目前只有顶部链接“products json pull”有效。如果您单击您将被带到一个新页面（http://demo.stg.brightonconsulting.net.au/templates/tests/backboneJQMProducts/index.html#products/productList）

到该页面的路由工作正常，但是当您刷新页面时它不显示该页面它只显示一个空白页面？（它可以刷新 - 执行 cntr+f5 你会看到）

有没有人以前有过这个/有没有人知道修复是什么？

我试过编辑这段代码

```
define(['jquery','underscore', 'backbone','router'],
function($, _, Backbone,Router) {

var init=function(){
    //create backbone router
    //location.hash = '';
    var router=new Router();
    Backbone.history.start();
};

return{
    initialize:init
}
}); 
```

基于建议。

我正在使用 require.js 将应用程序放在一起，这是从 main.js 调用的，它由 require 实例化

```
require.config({

paths: {
    jquery:     'vendor/jqm/jquery_1.7_min',
    jqm:     'vendor/jqm/jquery.mobile-1.1.0', 
    underscore: 'vendor/underscore/underscore_amd',
    backbone:   'vendor/backbone/backbone_amd',
    text:       'vendor/require/text',
    plugin:    'plugin',
    templates:  '../templates',
    views:    '../views',
    models:       '../models'
}

});

define(['app','jqm-config'], function(app) {
$(document).ready(function() {
  console.log("DOM IS READY");// Handler for .ready() called.
});    
app.initialize();
}); 
```

谢谢丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-19T14:16:42.607

在使用 RequireJS 设置 BackboneJS 后，我刚刚遇到了类似的情况。

`Backbone.history.start()`我是从我的路由器代码中调用的；为了解决这个问题，我将这个调用移到了在我的主`require()`函数中实例化我的视图之后。

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:19:58.340

根据您想要实现的行为，您可以做两件事：

在初始化路由之前重置哈希。

```
location.hash = ''
var router=new Router();
Backbone.history.start(); 
```

初始化路由后，您可以导航到该哈希标记。

```
var router=new Router();
Backbone.history.start();
router.navigate(location.hash, true) 
```

# mysql - 如何在 Doctrine 中转义单引号

> ID：13376774
> 
> 赞同：4
> 
> 时间：2012-11-14T10:11:35.953
> 
> 标签：mysql, sql, doctrine-orm

这是关于教义的一个非常基本的问题。单引号是如何转义的？

例如，标题需要转义，因为它包含单引号：

```
 $query = $this->entityManager->
            createQuery("SELECT p  from \RTH\Entity\Prod p
                         JOIN p.prodns ps
                         JOIN ps.events e
                         WHERE p.title = '" . $title . "'"); 
```

Doctrine 2 中是否有特定的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T10:53:42.693

尝试使用准备好的语句 [http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html#using-prepared-statements](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html#using-prepared-statements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T07:25:55.090

准备好的语句确实是要走的路，但如果你不能升级你的代码，你可以使用`quote`Doctrine\DBAL\Connection 对象的方法。

根据您的代码，我认为您可以访问连接对象： `$this->getConnection()`

见：[https ://www.doctrine-project.org/projects/doctrine-dbal/en/2.12/reference/data-retrieval-and-manipulation.html#quote](https://www.doctrine-project.org/projects/doctrine-dbal/en/2.12/reference/data-retrieval-and-manipulation.html#quote)

# android - 获取 Facebook 访问令牌

> ID：13376778
> 
> 赞同：-2
> 
> 时间：2012-11-14T10:11:54.500
> 
> 标签：android, facebook-graph-api

我正在开发一个 android 应用程序，您可以在其中查看 facebook 用户的相册。当我将访问令牌添加到通过[facebook 开发人员工具](https://developers.facebook.com/tools/explorer)手动生成的*HttpGet 请求*时，我有一个解决方案。

通过 android/java 创建这样的访问令牌的正确方法是什么？有没有办法在不使用*facebook android sdk*的情况下获得一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:26:48.537

根据您的评论，让我提出一些建议。在我开始之前，让我也澄清一些关于你当前情况的事情。

**只要访问令牌有效，**您当前通过手动放入数据的方式`Access Token`将起作用。访问令牌有期限。之后，分配一个新的访问令牌。只要它有效，一切都很好。您的应用程序可以正常工作，您的用户将能够根据查询查看相册。

 **难度将在访问令牌到期时开始。Facebook 不会在到期时通知您，因此您无法知道何时采取纠正措施。

现在，因为您在您的 中对访问令牌进行硬编码`Activity`，所以每次访问令牌过期时，您都必须使用更新的访问令牌进行推送和更新。

希望你能看到我的目标。

**建议：**

*一：*

保持现状，我怀疑，当访问令牌过期时，你将不得不面对用户的愤怒（阅读、负面评价和评论）。更不用说，为了修复过期的访问令牌，必须在用户看不到任何更改、添加或改进的地方推送更新。我不知道这将如何成为一个富有成效的练习。

*二：*

最简单的做法是将 Facebook SDK 集成到您的应用程序中，即使对于像访问令牌这样简单的东西来说这听起来太重要了。这样做的直接好处（对您的用户而言）是，您的用户将始终对您的应用程序拥有无缝体验。对你来说，它会省去很多我之前已经说过的头痛。

**底线**

如果不使用与平台相关的 SDK，则无法获得动态访问令牌。在这种情况下，[![](../Images/dc8cb918af09925459f09f0474c9be2c.png)android](/questions/tagged/android "显示标记为“android”的问题")。您可以继续使用相同的方法来提取数据，但使用*动态*访问令牌。

要了解有关访问令牌的更多信息并了解它们的工作原理，请访问此链接：[https ://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T10:16:28.113

您是否阅读了新 SDK 的文档？它会自动完成。

```
public class MainActivity extends FacebookActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      this.openSession();
   }

    @Override
    protected void onSessionStateChange(SessionState state, Exception exception) {
      // user has either logged in or not ...
      if (state.isOpened()) {
        // make request to the /me API
        Request request = Request.newMeRequest(
          this.getSession(),
          new Request.GraphUserCallback() {
            // callback after Graph API response with user object
            @Override
            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {
                TextView welcome = (TextView) findViewById(R.id.welcome);
                welcome.setText("Hello " + user.getName() + "!");
              }
            }
          }
        );
        Request.executeBatchAsync(request);
      }
    }
} 
```**

# android - Android 上的频率检测 - AudioRecord

> ID：13376780
> 
> 赞同：1
> 
> 时间：2012-11-14T10:11:59.643
> 
> 标签：android, frequency, audiorecord, dft

这是我的第二个问题，因为我有一个问题。我必须在 Android 上实现一个简单的频率检测。对于 DFT，我找到了 jTransform 库（https://sites.google.com/site/piotrwendykier/software/jtransforms）。

在 jTransform 的 API [http://incanter.org/docs/parallelcolt/api/edu/emory/mathcs/jtransforms/fft/DoubleFFT_1D.html#complexForward%28double%5B%5D%29](http://incanter.org/docs/parallelcolt/api/edu/emory/mathcs/jtransforms/fft/DoubleFFT_1D.html#complexForward%28double%5B%5D%29)我看到我必须在 complexForward() 方法中传递一个双向量，并且不经意地不是一个文件。

所以，首先，我的想法是正确的吗？所以，我不能使用 MediaRecorder，因为它会生成一个文件？我需要一个缓冲区，然后我使用 AudioRecorder。

但问题是：我无法在没有任何配置的情况下初始化 AudioRecorder 对象。

findAudioRecord() 尝试所有可能的配置来初始化 AudioRecord，并且在第一个工作配置中方法结束（返回）。但它结束了，并返回 null。

真的，我无法理解这个问题。有可能是我的手机吗？

谢谢你的帮助！对不起我的英语...

```
import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioRecord;
import android.media.AudioTrack;
import android.media.MediaRecorder;
import android.media.MediaRecorder.AudioSource;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class FFTActivity extends Activity {

private TextView textView1;
  private TextView textView2;

  private static final int RECORDSTATE_RECORDING = 3;
  private static final int RECORDER_BPP = 16;
  private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
  private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
  private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
  private static final int RECORDER_SAMPLERATE = 44100;
  private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
  private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

  private static int[] mSampleRates = new int[] { 8000, 11025, 22050, 44100 };

  private int bufferSize = 0;
  private AudioRecord recorder = null;

  private int cont;

  int cont2 = 0;
  int contENCODING = 0;
  int contCHANNEL = 0;

  String s ="";

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

      textView1 = (TextView) findViewById(R.id.testo1);
      textView2 = (TextView) findViewById(R.id.testo2);

      bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING);

      recorder = findAudioRecord();

}

  public AudioRecord findAudioRecord() {
        for (int rate : mSampleRates) {

            for (short audioFormat : new short[] { AudioFormat.ENCODING_PCM_8BIT,             AudioFormat.ENCODING_PCM_16BIT }) {
            for (short channelConfig : new short[] { AudioFormat.CHANNEL_IN_MONO, AudioFormat.CHANNEL_IN_STEREO }) {
                try {
                    int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                    if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {
                        // check if we can instantiate and have a success
                        AudioRecord recorder = new AudioRecord(AudioSource.DEFAULT, rate, channelConfig, audioFormat, (bufferSize*2));
                        textView2.setText("NOT ERROR_BAD_VALUE    "+mSampleRates[cont2] +"  "+ bufferSize);

                        if (recorder.getState() == AudioRecord.STATE_INITIALIZED){

                            textView2.setText("getState(): "+recorder.getState()+"   getMinBufferSize(): "+AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING));

                            return recorder;
                        }    
                    }
                } catch (Exception e) {
                    textView2.setText("ECCEZZIONE"+e);
                }
                contCHANNEL++;
            }
            contENCODING++;
        }
        cont2++;  
    }
    textView1.setText("NON INIZIALIZZATO " + contCHANNEL + "   " + contENCODING); 
    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:04:45.130

将以下权限`uses-permission android:name="android.permission.RECORD_AUDIO`放在`application`标签之外

# entity-framework - .net Entity Framework T4 模板在升级到 VS 2012 后无法构建/工作

> ID：13376781
> 
> 赞同：4
> 
> 时间：2012-11-14T10:12:01.370
> 
> 标签：entity-framework, build, visual-studio-2012, t4

安装 Vs 2012 后，我尝试先添加一个实体模型数据库。T4 模板如何无法构建。

当我尝试调试它时，我收到了这些错误。

> 错误 1 ​​- 加载程序集时出现问题 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll' 引发以下异常：系统。 BadImageFormatException：无法加载文件或程序集 'file:///C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll' 或其依赖项之一. 试图加载格式不正确的程序。文件名：'file:///C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll' 在 System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound,
> 
> === 预绑定状态信息 === LOG: User = MANNVIT\Ole LOG: Where-ref bind。位置 = C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll 日志：Appbase = file:///C:/Program Files (x86)/ Microsoft Visual Studio 11.0/Common7/IDE/LOG：初始 PrivatePath = NULL 调用程序集：（未知）。=== LOG：此绑定在 LoadFrom 加载上下文中开始。警告：将不会在 LoadFrom 上下文中探测本机图像。本机映像只会在默认加载上下文中进行探测，例如使用 Assembly.Load()。LOG：未找到应用程序配置文件。LOG：使用主机配置文件：LOG：使用来自 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 的机器配置文件。日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0。0.0__b77a5c561934e089/System.Data.dll。ERR：无法完成程序集的设置（hr = 0x8007000b）。探测终止。
> 
> 警告2 编译转换：预定义类型'System.Runtime.CompilerServices.ExtensionAttribute'在全局别名的多个程序集中定义；使用来自 'c:\Windows\Microsoft.NET\Framework64\v4.0.30319\mscorlib.dll' C:\Users\Ole\documents\visual studio 11\Projects\Cantina\Cantina\Models\navision.Context.tt 的定义
> 
> 错误 3 编译转换：命名空间“Microsoft”中不存在类型或命名空间名称“CSharp”（您是否缺少程序集引用？） c:\Users\Ole\AppData\Local\Temp\qiu0vq02.0.cs
> 
> 错误 4 编译转换：找不到类型或命名空间名称“CSharpCodeProvider”（您是否缺少 using 指令或程序集引用？） c:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\ Microsoft\Entity Framework Tools\Templates\Includes\EF.Utility.CS.ttinclude 37 22
> 
> 错误 5 编译转换：命名空间“System.CodeDom.Compiler”中不存在类型或命名空间名称“CompilerErrorCollection”（您是否缺少程序集引用？）c:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7 \IDE\Extensions\Microsoft\Entity Framework Tools\Templates\Includes\EF.Utility.CS.ttinclude

我相信问题在于它尝试使用的 32 位和 64 位 dll 的混合。

加载 64 位 mscorlib.dll 和 32 位 system.data.dll。（但我不确定）

我的构建配置器平台是任何 CPU。

尝试放入`<PlatformTarget>x64</PlatformTarget>`我的 C# 项目文件，但这没有帮助。

我使用的是 64 位 win 7 电脑。我也安装了vs 2010。

我已经完成了以下操作，安装了 vs 2012 prof。rtm，已卸载 vs 2012 Ultimate rc。

在此之后，我注意到了错误。

然后我尝试卸载所有 .net 框架和 vs 2012 rtm。并再次 installin vs 2012 rtm，但它仍然给我错误。

有人可以请。帮助我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:39:36.877

我错误地将构建配置设置为 x64，并得到了同样的错误。当我把它放到任何 CPU 上时，错误就消失了。当我把它放回 x64 时，它仍然可以构建。所以我不知道为什么，但是更改构建配置并将其改回修复了它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T21:42:48.367

确保 T4 文件末尾有换行符。

由于我们的版本控制系统的换行设置发生更改，我最近看到了同样的错误。似乎文本模板末尾缺少换行符会导致编译的模板代码中缺少结束括号 - 这会导致级联编译失败并以该错误结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T10:37:10.473

尝试以管理员身份运行 Visual Studio（上下文菜单中的“以管理员身份运行”）。

# javascript - jQuery animate：如何避免元素被替换？

> ID：13376795
> 
> 赞同：2
> 
> 时间：2012-11-14T10:13:02.617
> 
> 标签：javascript, jquery, jquery-animate

这是我想要实现的一个小例子：

[例子](http://jsfiddle.net/FXFUB/)

```
var elemOrigPos;    

$('div.box').hover(
function() {
    var $this = $(this);
    elemOrigPos =  $this.position();
    var offset = 50;

    $this.stop(true, true).animate({
        'width': '200px',
        'height': '200px',
        'top': (elemOrigPos.top - offset) + 'px',
        'left': (elemOrigPos.left - offset) + 'px'
    }, 150);
},
function() {
    $(this).stop(true, true).animate({
        'width': '100px',
        'height': '100px',
        'top': (elemOrigPos.top) + 'px',
        'left': (elemOrigPos.left) + 'px'
    }, 150);
}
); 
```

如果您将鼠标缓慢悬停在元素上，它会正常工作，但一旦您将鼠标悬停在它们上方，它们就会失去原来的位置。我想这与我在动画完成之前使用 position() 但无法找到解决方案有关。

提前感谢您提供解决此行为的任何提示或提示。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:17:33.707

我查看了您的代码，主要问题是您总是在悬停时将 origPosition 重置为元素的当前位置（它可能不是正确的位置，因为它可能是动画中间）。解决这个问题的方法很简单，只保存与实际位置无关的原始位置。

我所做的只是将原始位置保存在 jQuery.data() 中，以便可以从该位置完成所有计算，而不是现在可能或可能不在的实际位置。

```
$('div.box')
        .each(function() {
            $(this).data('position', $(this).position());
        })
        .hover(
        function() {
            var $this = $(this);
            elemOrigPos =  $(this).data('position');
            var offset = 50;
    .... 
```

更新了小提琴：http: [//jsfiddle.net/FXFUB/1/](http://jsfiddle.net/FXFUB/1/)

# java - 如何抛出 EmptyResultDataAccessException？

> ID：13376807
> 
> 赞同：0
> 
> 时间：2012-11-14T10:13:37.680
> 
> 标签：java, database, spring, exception, jdbc

我的 DAO 实现中有以下方法：

```
@Override
public String getResultEntry(String arg1, String key, String date) throws SQLException, IOException {
    String res = "";
    String sql = buildSQL(arg1, key, date);

    MapSqlParameterSource namedParameters = new MapSqlParameterSource();
    namedParameters.addValue("arg1", arg1);
    namedParameters.addValue("id", key);
    namedParameters.addValue("date", date);

    try {
        logger.info("getResultEntry is about to execute the following query:[" + sql + "]");

        Blob blob = namedParameterJdbcTemplate.queryForObject(sql, namedParameters, Blob.class);
        long blobLength = blob.length();
        byte[] bytes = blob.getBytes(1, (int)blobLength);

        logger.info("getResultEntry END");

        res = convertBytesToString(bytes);

    } catch (EmptyResultDataAccessException erdae) {
        logger.error("getResultEntry failed to execute the query due to exception! Return an empty string ", erdae);
        logger.info("getResultEntry END");

        res = "";
    }
    return res;

} 
```

有时查询返回空结果并`EmptyResultDataAccessException`抛出。我抓住它并返回一个空字符串。但是，我一直看到异常，之后执行终止。

例外：

```
org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0
at org.springframework.dao.support.DataAccessUtils.requiredSingleResult(DataAccessUtils.java:71)
at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:179)
at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:191)
at com.ars.linking.mrretriever.dao.MRRetrieverDAOImpl.getResultEntry(MRRetrieverDAOImpl.java:82)
at com.ars.linking.mrretriever.exec.MRRetriver.processResults(MRRetriver.java:125)
at com.ars.linking.mrretriever.exec.MRRetriver.main(MRRetriver.java:81)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58) 
```

我应该怎么做才能“正确”处理异常？（我没有兴趣重新抛出它，只是吞下它并返回一个空字符串）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:17:09.027

您正在显式记录异常：

```
logger.error("getResultEntry failed to execute the query due to exception! Return an empty string ", erdae); 
```

如果您不想在日志中看到堆栈跟踪，请删除第二个参数。更好的是，删除整行，因为这不是错误，并且您已经有一个`info`日志条目。

此异常不会终止您的代码的执行。找出终止原因，它位于其他地方，可能与您返回的空字符串有关，也可能不相关。

# python - 多重处理、终止和损坏队列

> ID：13376810
> 
> 赞同：6
> 
> 时间：2012-11-14T10:13:53.097
> 
> 标签：python, multiprocessing, terminate

在查看 python 文档时，[`multiprocessing.terminate()`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Process.terminate)我遇到了以下内容：

> Terminate() 如果在相关进程正在使用管道或队列时使用此方法，则管道或队列可能会损坏并且可能无法被其他进程使用。类似地，如果进程获得了锁或信号量等，那么终止它很可能导致其他进程死锁。

这基本上说，如果您终止使用队列、管道或类似的进程，您将面临结构损坏的风险。

我对此有几个问题，

1.  如果发生损坏，尝试从 PIPE、队列或类似物中检索数据的另一个进程会发生什么情况？
2.  进程如何检查是否存在损坏？
3.  如果您知道另一个进程已终止，是否可以以任何方式解决死锁？

我了解您应该始终尝试不使用终止，但这是针对您无法执行任何其他操作的情况

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:29:02.503

您可以向传递的数据块添加校验和，并检查它们以确认没有发生数据损坏。这是存在数据损坏风险的任何数据通信中的常用技术。您可以为此查看[hashlib](http://docs.python.org/2/library/hashlib.html)并使用 md5 或 crc32 校验和之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:11:02.067

好的，所以这不是最好的解决方案，但我首先尽可能地处理了异常。我不想冒损坏的风险，所以我现在在可能发生损坏的情况下重新启动应用程序，以减少可能出现问题的机会。

感谢@MarwanAlsabbagh 的建议。

# php - 将具有丰富 UI 的 PHP/MySQL 网站迁移到 Google 网站或 Google App Engine 的好主意？

> ID：13376813
> 
> 赞同：1
> 
> 时间：2012-11-14T10:14:12.593
> 
> 标签：php, mysql, google-app-engine, web

我有一个成熟的 PHP/MySQL 动态网站，适用于具有丰富 jQuery 和 AJAX UI 的中型企业，并且正在考虑将其迁移到 Google 网站或 Google App Engine。（网站目前使用PHP 5.3+）

我想知道迁移到 (a) Google App Engine 或 (b) Google 网站是否是个好主意。

我听说 Google 网站 (b) 主要用于静态内容并且有很多限制。对于 GAE (a)，代码需要根据 GAE 的数据库结构（非关系型）进行修改。

所以总的来说，我非常确信迁移到 (a) 或 (b) 根本不是一个好主意，但后来我也遇到了[http://www.kirksvillewebdesign.com/google-sites](http://www.kirksvillewebdesign.com/google-sites)。所以我有点困惑。我还没有发现传统企业托管解决方案和谷歌网站之间的足够清晰的比较。

有人对此有任何想法或经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:02:31.693

Google 协作平台是一种类似于其他托管 CMS 解决方案（托管 wordpress 等）的网络托管服务。这不是针对开发人员，而是针对用户或站点管理员。

Google AppEngine OTOH 是一个成熟的托管应用程序托管服务（如果您愿意，可以使用[PaaS ）。](http://en.wikipedia.org/wiki/Platform_as_a_service)它具有全套 API，使开发人员能够编写许多不同类型的应用程序：[https ://developers.google.com/appengine/docs/java/apis](https://developers.google.com/appengine/docs/java/apis)

对于结构化数据存储，您可以选择[Datastore](https://developers.google.com/appengine/docs/java/datastore/)（大容量并行无停机 NoSQL）或[Cloud SQL](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide)（基于 MySQL 的简单小型）。

如果您了解 PHP，那么您可能想查看[Quercus](http://quercus.caucho.com/)，这是一个在 Java 中运行的 PHP 实现。它[在 GAE 上运行](http://wiki3.caucho.com/Quercus_Google_App_Engine)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T04:40:13.287

Google App Engine 现在支持 PHP。更多信息，请访问[https://developers.google.com/appengine/docs/php/](https://developers.google.com/appengine/docs/php/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T10:32:36.727

选择 GAE 还会促使您对应用程序的代码进行适当的更改，以使其与引擎本身兼容。

此外，您将需要一些时间来熟悉平台的需求。

如果您想获得更可调整的解决方案，我建议您完全依赖[Jelastic](http://jelastic.com/) 。您无需重新配置应用程序的代码，并且手头拥有所有标准软件堆栈，并且支持 PHP 和 Java。这是一个鲜明的比较：[http ://blog.jelastic.com/2012/02/27/google-app-engine-vs-jelastic/](http://blog.jelastic.com/2012/02/27/google-app-engine-vs-jelastic/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T00:14:59.650

如果您能够从任何 Web 应用程序自定义和定制您的需求，那么答案将是否定的。

# vim - 显示行上的 Vim 行号

> ID：13376822
> 
> 赞同：1
> 
> 时间：2012-11-14T10:14:51.543
> 
> 标签：vim

众所周知，`:set number`将在 vim 中显示行号。但是，我遇到了这个问题。当我使用`:set linebreak`并到达新行时，该换行符不会显示数字。据我了解，这些被称为显示线。

tl; dr如何添加行号以显示行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T10:33:32.053

这不是 vim 的特性。如果您希望换行/断行实际上是新行，为什么不*实际*使它们成为新行？

*   `gqq``textwidth`使用设置重新格式化当前段落

要进行自动格式化：

*   `set fo=tcrwa textwidth=80`

现在，每当您键入时，您的文本都会环绕。在自动换行时，前一行会留下一个尾随空格，表示它还不是段落的结尾。

请参阅[vimdoc`'fo-table'`](http://vimdoc.sourceforge.net/htmldoc/change.html#fo-table)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:32:12.567

没有命令`:linebreak`。你的意思是`:set linebreak`？

Vim 显示的行号对应于文件中的实际行，而不是“显示行”。如果你点击`<Enter>`了一个真正的新行，Vim 会正确显示它的编号。

或者你有`:set wrap`？在这种情况下，换行只是一个演示技巧：因为它仍然是一个真实的行，所以显示不存在的行的行号没有任何意义。无论如何，即使使用`:set wrap`，点击`<Enter>`仍然会创建一个真正的新行。所以我不确定你的问题到底是什么，在这里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T10:41:03.230

如果你想让 Vim 显示*显示行*，而不是实际的物理行，这是不可能的。这也没有意义，因为除了`gj`/之外没有移动命令`gk`在显示行上起作用，并且您不能在`:[range]`.

# c - Linux内核：允许的分散列表最大“长度”？

> ID：13376825
> 
> 赞同：1
> 
> 时间：2012-11-14T10:15:04.970
> 
> 标签：c, linux, kernel

解决了我的 Linux 加密示例，并且我可以正确调用 aead 密码，我遇到了一个有趣的问题。

我将我的散点列表定义为：

```
struct scatterlist sg[2];
sg_init_table(sg, 2 );
sg_set_buf(&sg[0], address, 512);
sg_set_buf(&sg[1], mac, 16);
aead_request_set_crypt(req, sg, sg, 512, iv);
crypto_aead_encrypt(req); 
```

这很好用。但是，如果将缓冲区大小从 512 增加到 131072，那么它将“经常”恐慌。

```
 BUG: unable to handle kernel paging request at ffffeb04000cea80
 IP: [<ffffffff812f4880>] scatterwalk_done+0x50/0x60 
```

现在，由于所有密码最终都调用了 scatterwalk_ 函数，我*认为*将 sg->length 设置为较大的值是一个问题。大概太大了，有时会翻到下一页。

在这里做什么是正确的？我是否必须将它分成许多分散列表，确保每个列表都不会转到下一页？这听起来很麻烦，或者有没有为我做这件事的功能？还是我只需要确保每个页面都是“可用的”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:47:13.527

好的，实际上有两件事困扰着我。第一个是有时交给我的内存实际上是来自 vmalloc() 分配的内存。这意味着我应该改用 sg_set_page( , vmalloc_to_page() )。

第二个问题是scatterwalk函数不正确，很容易测试，如果您设置任何也生成mac的密码，作为第二个缓冲区；

```
cipherout = kmalloc( size, ...
macout = kmalloc( maclen, ... 
```

这通常会起作用，因为新分配的内存位于页面边界上。但是，将其更改为；

```
 macout = kmalloc( maclen + 16, ...
 macout += 16; 
```

我所做的只是分配一个更大的缓冲区，然后在内存中启动 16 个字节。（+1024 或 +3480，无关紧要）这将使 scatterwalk 恐慌。linux-crypto 邮件列表上有一个建议的补丁，这对未来很有用，但现在对我没有帮助。我需要确保mac地址对齐，如果没有，分配临时缓冲区（至少很小）。

# web-services - IOS 5：如何在包含时返回 YES：具有 2 个“相同”对象，但具有不同的指针

> ID：13376829
> 
> 赞同：6
> 
> 时间：2012-11-14T10:15:08.600
> 
> 标签：web-services, ios5, hash, nsmutablearray, equality

我对 StackOverflow 很陌生，所以如果我忘记了我的问题中的一些关键元素，请提前道歉。很长，请耐心等待！

**遍历 JSON-webservice 结果：**

对于 IOS5 iPad 应用程序，我从 Web 服务收集 JSON 信息，并通过：

```
NSData *data = [NSData dataWithContentsOfURL:url];
NSDictionary *json = 
[NSJSONSerialization JSONObjectWithData:data options:kNilOptions      
error:&error]; 
```

我将遍历返回`NSDictionary`并将返回的对象及其属性存储为自定义类。

自定义类包含几个属性，包括一个`AmountInShoppingCart`-value。

我使用这个自定义类来表示我们在商店中销售的商品，因此`NSMutableArray`由所有返回的对象组成并显示给用户。如果`AmountInShoppingCart value > 0`，那么对象将被放入`ShoppingCart` `NSMutableArray`（这是一个单例）。

**在 ShoppingCart 中检查重复项：**

为了确保`ShoppingCart`不包含任何重复的条目，我在`ShoppingCartController`（也从 SO 借来的）中有这样的函数：

```
- (void)checkForDuplicates
{
    NSMutableSet *seen = [NSMutableSet set];
    NSUInteger i = 0;
    NSLog(@"ShoppingCartArray count: %u",[ShoppingCartArray count]);
    //Iterate over the Array to check for duplicates, and to sync the list with the   
    cart.
    while (i < [ShoppingCartArray count]) {
        id obj = [ShoppingCartArray objectAtIndex:i];
        if ([seen containsObject:obj]) {
            if ([obj isKindOfClass:[MyCust class]]){
                MyCust *cust = [ShoppingCartArray objectAtIndex:i];
                MyCust *seenCust = [seen member:obj];
                seenCust.AmountInShoppingCart = cust.AmountInShoppingCart;
                [ShoppingCartArray removeObjectAtIndex:i];
            }} else {seen addObject:obj];
            i++;}}} 
```

**平等和散列**

为此，我重写了`isEqual:`-class 的`MyCust`-function 以便它查看`externalItemID`-property，这是每个类对象绝对唯一的唯一属性。

我从 StackOverflow 中选择了这个函数：

```
- (BOOL)isEqual:(id)otherObject;
{
    if ([otherObject isKindOfClass:[MyCust class]]) {
        MyCust *otherCust= (MyCust *)otherObject;
        if (externalItemId != [otherCust externalItemId]) return NO;
        return YES;
    }
    return NO;
}

- (NSUInteger) hash;
{
    return [[self externalItemId] hash];
} 
```

**同步两个数组：**

It can happen that people request the same result from the JSON-webservice, since it uses the MyCust's size, height and diameter to return a set of objects that adhere to those sizes.

So I use the following function to check and 'sync' the two NSMutableArrays with the new results:

```
In: RESULTLISTCONTROLLER.M

- (void) syncWithCart
{
    ShoppingCart *sc = [ShoppingCart sharedCart];
    [sc checkForDuplicates];
    NSMutableSet *listSet = [NSMutableSet setWithArray:resultList];
    NSUInteger i = 0;

    while (i < [sc.ShoppingCartArray count]) {
        id ShopObject = [sc.ShoppingCartArray objectAtIndex:i];
        if ([listSet containsObject:ShopObject])
        {
            MyCust *listCust = [listSet member:ShopObject];
            MyCust *shopCust = ShopObject;
            listCust.AmountInShoppingCart = shopCust.AmountInShoppingCart;
            [listSet removeObject:ShopObject];
        } else {i++;}}} 
```

This all works pretty well until...

**The 2nd webservice!**

Now here comes the good part: There's a 2nd JSON-WebService the app uses to retrieve external supplier stock. It sometimes contains the same `MyCust` objects, but contains extra information that has to be parsed into the existing objects.

I basically get the first WebService's result into the `getMyCustArray` and the other in the `getExternalCustArray`. I then check if `getMyCustArray` contains an object in the `getExternalCustArray` and update the additional information on the objects and delete the similar object in `getExternalCustArray`. Any leftover objects only available from the supplier will be added using:

```
mergedCustArray = [NSMutableArray arrayWithArray:[getMyCustArray arrayByAddingObjectsFromArray:getExternalCustArray]]; 
```

Now the problem is, that when the user checks the same sizes twice, the App doesn't seem to consider the new results as the same.

When I do an NSLog of the ShoppingCartArray, the following shows: (original item names obfuscated)

**First Search:**

```
MyCust: SideShowBobsEarWarmers
 Hash: **2082010619**
 AmountInShoppingCart: 4
 **<MyCust: 0x81cee50>**",
    "
 MyCust: SolidSnakesCardBoardBox
 Hash: **4174540990**
 AmountInShoppingCart: 4
 **<MyCust: 0x8190d10>**" 
```

**Second Search:** the ResultList doesn't retain the MyCust's AmountInShoppingCart values, so I add them to the ShoppingCart again from the ResultList.

```
 MyCust: SideShowBobsEarWarmers
 Hash: **2082010619**
 AmountInShoppingCart: 4
 **<MyCust: 0x81cee50>**",

 MyCust: SolidSnakesCardBoardBox
 Hash: **4174540990**
 AmountInShoppingCart: 4
 **<MyCust: 0x8190d10>**" 
    "
// Different Pointers, although they should be considered Equal.

 MyCust: SideShowBobsEarWarmers
 Hash: **2082010619**
 AantalInWinkelWagen: 3
 **<MyCust: 0x74bc570>**",      
    "
 MyCust: SolidSnakesCardBoardBox
 Hash: **4174540990**
 AantalInWinkelWagen: 2
 **<MyCust: 0x74bc7b0>**" 
```

So somehow the compiler allocates those objects in a different memory address/pointer, and then breaks the `isEqual:` function, as far as I can tell.

My guts tell me there's something to do with `NSCopy(able)`, but I'm not quite sure how I'd implement that. If anyone got some good tips for a Shopping Cart system, that's always welcome too. I've got half a mind converting all this to Core Data but would like to have the core functionality in place before doing that.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:30:30.030

In isEqual: method, the line "if (externalItemId != [otherCust externalItemId]) return NO;" is wrong. I think it should be if (![externalItemId:isEqual:[otherCust externalItemId]]) return NO;

# c++ - C++关于strcmp和读取文件

> ID：13376830
> 
> 赞同：0
> 
> 时间：2012-11-14T10:15:12.437
> 
> 标签：c++

我在 main.cpp 有一个代码

```
cout<<endl<<"Please enter filename: ";
cin.ignore();
getline(cin,fileName);
fin.open(fileName.c_str());
if(fin.is_open())
{

    while(fin.good())
    {
        fin.getline(line,20,',');

        if(!strcmp(line,"Map2D")) 
        {
            cout << "Map 2D" << endl;
        }
        else if(!strcmp(line,"Map3D")) 
        {
            cout << "Map 3D" << endl;
        }
        else if(!strcmp(line,"Dot2D")) 
        {
            cout << "Dot 2D" << endl;
        }
        else if(!strcmp(line,"Dot3D")) 
        {
            cout << "Dot 3D" << endl;
        }

    }
} 
```

这是我的文本文件

```
Map2D, [3, 8]
Dot3D, [7, 12, 3], [-9, 13, 68]
Map3D, [1, 3, 8]
Dot2D, [5, 7], [3, 8]
Map2D, [6, 2] 
```

但问题是当我尝试编译和运行时，它会保留打印 map2D 并且 Map3d 甚至不会被 cout

我在 strcmp 上的逻辑有问题吗

**更新：**

我改为 if(strstr(line,"Map2D") 及其工作。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:24:46.900

您`getline`不是在阅读行，而是在遇到下一个“，”。

即，您迭代：

```
Map2D
 [3
 8]\nDot3D
 [7
 12
 3]
 [-9
 13
 68]\nMap3D
... 
```

应该很容易看出为什么您从来没有碰到等于“Map3D”的标记。

顺便说一句，您粘贴的代码不是您编译的代码。C++ 中没有“elseif”这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:40:21.080

您的代码存在许多问题，其中一些显然与您的问题无关，但我会按顺序处理它们：

*   这`cin.ignore()`将要求用户输入一个额外的空行。

*   `while ( fin.good() )`肯定是错的；事实上，从来没有`fin.good()`合适的情况。你可能想要 `while ( fin.getline( line, 20, ',' ) )`这里。

*   在使用结果之前，您不会验证是否`fin.getline`成功。

*   您每次通过循环只能读取到下一个逗号，因此您的输入类似于`"Map2D"`, `" [3"`, `" 8]\nDot3D"`, `" [7"`...

*   `strcmp`返回 a `int`，而不是 a `bool`，以表示相等，因此除非您的意图是明确的混淆，否则您`0`应该写作。 （类似地，当输入变量只包含一个逗号分隔的字段时`if ( strcmp( line, "..." ) == 0 )`命名输入变量也是一种混淆。）`line`

做这样的事情的正确方法可能是使用 `std::string`读取完整的行，然后使用任意数量的标准工具解析行本身。就像是：

```
std::string line;
while ( std::getline( fin, line ) ) {
    std::string label
        = std::string( line.begin(),
                       std::find( line.begin(), line.end(), ',' ) );
    if ( label == "Map2D" ) {
        //  ...
    } else if ( label == "Map3D" ) {
        //  ...
    } // ...
} 
```

# vb.net - 从 Outlook 子文件夹读取电子邮件

> ID：13376831
> 
> 赞同：1
> 
> 时间：2012-11-14T10:15:11.483
> 
> 标签：vb.net, outlook

如何阅读 Outlook 子文件夹中的邮件？我可以从收件箱中读取，但我不知道如何从我在收件箱中创建的文件夹中读取。

这是我的控制台应用程序的简单代码：

```
Sub Main()

    Dim otkApp As Outlook.Application = New Outlook.Application
    Dim otkMailItem = "IPM.Note"
    Dim otkNameSpace As Outlook.NameSpace = otkApp.GetNamespace("MAPI")
    Dim otkInboxFolder As Outlook.MAPIFolder = otkNameSpace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox)
    Dim otkMailItems As Outlook.Items = otkInboxFolder.Items
    Dim otkMessage As Outlook.MailItem
    Dim iCntr As Integer

    MsgBox(otkMailItems.Count)
    For iCntr = 1 To otkMailItems.Count
        If otkMailItems.Item(iCntr).MessageClass = otkMailItem Then
            otkMessage = otkMailItems.Item(iCntr)

            Console.WriteLine(iCntr)
            Console.WriteLine(otkMessage.SenderName)
            Console.WriteLine(otkMessage.Subject)
            Console.WriteLine(otkMessage.ReceivedTime)
            Console.WriteLine(otkMessage.Body)
            Console.WriteLine("______________________________")
        End If
    Next

    otkApp = Nothing
    otkNameSpace = Nothing
    otkMailItems = Nothing
    otkMessage = Nothing
End Sub 
```

我认为这条线应该改变：

```
Dim otkInboxFolder As Outlook.MAPIFolder = otkNameSpace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox) 
```

我想阅读邮件的文件夹是：

```
Inbox -> domain.com -> support@domain.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:10:32.503

您可以使用 Outlook.NameSpace.Folders("folder_name") 属性。每次调用此属性时，它都会返回一个 MAPIFolder，它也具有 Folders 属性，因此如果您想访问嵌套文件夹，可以使用它

例如，假设您要访问名为“Inbox”的文件夹，该文件夹位于文件夹“support@domain.com”中的文件夹“domain.com”中，您将使用以下内容：

```
Dim otkInboxFolder As Outlook.MAPIFolder = otkNameSpace.Folders("support@domain.com").Folders("domain.com").Folders("Inbox") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T17:55:42.813

如果它是收件箱文件夹的子文件夹，您可以使用 MAPIFolder.Folders 集合来获取子子文件夹。

```
Dim otkInboxFolder As Outlook.MAPIFolder = otkNameSpace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox)
Dim SubFolder = otkInboxFolder.Folders.Item*"TheSubfolderName")
Dim otkMailItems As Outlook.Items = SubFolder .Items 
```

# c# - 影响 ServiceStack 的 XSD 生成

> ID：13376834
> 
> 赞同：1
> 
> 时间：2012-11-14T10:15:20.157
> 
> 标签：c#, xsd, servicestack, dto

我们有一个非常重要的现有的基于 REST 的 API，它使用 XML 在过去几年中不断增长，您可能会意识到，在当前的代码库上工作变得有点固执。为了推动一些整合并为未来的发展实施最佳实践，我们目前正在考虑使用 ServiceStack。

虽然我们可以在服务器端进行大量交换，但我们非常希望保持与客户的沟通方式。这意味着，我们希望拥有 XSD，我们可以将其提供给我们的客户，在此基础上，他们可以针对我们的 API 驱动他们的实现。到目前为止，我们一直在首先使用 XSD => 从中生成代码。

正如我在示例 ServiceStack 项目的元数据页面上看到的那样，可以从代码中生成这些 XSD，但是我找不到任何关于如何影响此 XSD 生成的提示。我最感兴趣的是以下 XSD 功能的列表：

```
 <xs:documentation>
 <xs:maxLength>
 min/maxOccurs="" 
```

我实际上不想展示将针对 XSD 中给定 DTO 服务器端运行的整个验证链，但我们了解到，在 XSD 中拥有基本文档和验证规则会使我们和我们的客户的生活变得更加轻松。

谢谢，菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:05:44.310

ServiceStack 使用 .NET 的内置类`XmlSchema`和`XsdDataContractExporter`.NET 类来生成 XSD 架构。除了 ServiceStack 中的默认实现之外，这无法进一步定制。

# java - 基本 Java 图形和坐标无法正常工作

> ID：13376840
> 
> 赞同：0
> 
> 时间：2012-11-14T10:15:40.517
> 
> 标签：java, graphics, applet, breakout, acm-java-libraries

过去我对 acm 图形库做了很多工作，我刚刚开始研究斯坦福分配的突破性问题。我过去多次遇到图形的问题之一是坐标不能准确地反映形状实际出现的位置，尽管我已经对它们进行了两次和三次检查。最后，对于那些作业，我最终对它进行了观察并进行了修改，直到它看起来有点正确。很明显我在这里遗漏了一些东西，因为一个简单的图形程序不应该这么困难。

例如，使用 acm.graphics 我的代码如下所示。

```
public static final int APPLICATION_WIDTH = 400;
public static final int APPLICATION_HEIGHT = 600;

public void setupBorder(){
    // **Sets Black Background
    GRect b = new GRect(0,0,400,600);  //** Sets Black Background
    fillObj(b,Color.black);
    add(b);

    //**Sets White Square so border is 5 pixels wide on each side
    b = new GRect(5,5,APPLICATION_WIDTH-10,APPLICATION_HEIGHT-10);
    fillObj(b,Color.white);
    add(b);
    } 
```

所以我在这里的想法是，它向右移动了 5 个像素，向下移动了 5 个像素，我需要减去这些，然后再减去一个额外的 5 个像素，以便在每边有一个边框 5 个像素（基本 2b+x = 1 边，2a+y= 垂直边）。您会认为这会在每边创建一个 5 像素的黑色边框，中间有一个白色方块，但事实并非如此。它在窗口的左侧、右侧和顶部创建边框，但不在底部创建边框。那么，这么简单的事情，可能会出什么问题呢？我在纸上检查了两倍、三倍甚至四倍的计算，它应该是中间的一个白色方块，有一个 5 像素的黑色边框，但事实并非如此。我试过改变像素的百分比，效果更差。手动编辑该框，直到 Yvalue 看起来接近 -35，尽管这有点太远了。有人知道出了什么问题吗？

[![应用窗口](../Images/62bcb7e0039b790d281ed30801e3b183.png)](https://i.stack.imgur.com/Qo9Vg.jpg)

对运行和类中的其他方法所做的这些更改进行了[突破。](https://see.stanford.edu/materials/icspmcs106a/Assignment3.zip)

```
public void run() {
    /* You fill this in, along with any subsidiary methods */
    init();
}

public void init(){

    setupBorder();

}

public void setupBorder(){
    //**Black Background
    GRect b = new GRect(0,0,400,600);  //**Black Background
    fillObj(b,Color.black);
    add(b);

    b = new GRect(5,5,APPLICATION_WIDTH-10,APPLICATION_HEIGHT-10);
    fillObj(b,Color.white);
    add(b);
}

public void fillObj(GFillable a, Color argC)
{
    a.setFillColor(argC);
    a.setFilled(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:40:46.330

看起来您将应用程序窗口的大小（不包括窗口边框但包括菜单，在您的情况下*为*400*600）与可绘制区域的大小（不包括菜单）混淆了，这意味着您在可绘制区域（位于菜单下方）之外重新绘制。

您的窗口有：

*   操作系统提供的边框。内部为 400x600。
*   一个菜单栏。
*   菜单栏下方的可绘制区域（画布）。它比菜单栏宽度短于 400x600。

你要么

*   需要读取画布大小并使用它而不是窗口大小：`getCanvas().getHeight()`
*   需要设置画布大小而不是窗口大小，并根据需要设置窗口大小。作为`GraphicsProgram`一个`Applet`，这似乎是不可能的。
*   需要找出菜单高度并将窗口高度增加该数量（最后的手段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:23:23.300

可以使用 setSize() 方法更改窗口的大小。这样做，您仍然面临坐标问题。读取工作区大小时，宽度不断减小16，高度减小58（可能是因为菜单和W7边框，如前所述）。

你只需要在调用 setSize() 时注意它。

[OFF]我也在处理这个突破任务并且遇到了同样的问题。几分钟前在此网站上发布。[/OFF]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:33:56.857

我已经养成了在所有小程序的加载时间显式设置应用程序大小的习惯。这是我通常设置窗口大小的方式：

```
@Override

public void init(){
    resize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
} 
```

此外，您不需要从***run()调用******init(*** ) ；它会在初始化时由您的*appletviewer*自动调用。

 **我认为你应该使用：

```
b = new GRect(5,5,getWidth()-10,getHeight()-10); //gets window width & height 
```

或者：：：

```
b = new GRect(5,5,b.getWidth()-10,b.getHeight()-10); //gets former 'b' width & height 
```

代替：

```
b = new GRect(5,5,APPLICATION_WIDTH-10,APPLICATION_HEIGHT-10); 
```**

# model - 从 Yii 中的另一个表加载数据

> ID：13376842
> 
> 赞同：1
> 
> 时间：2012-11-14T10:15:43.667
> 
> 标签：model, controller, yii

我是 Yii 框架的新手，坦率地说，我对它一无所知。我有一个正在进行的项目，我遇到了一个问题。我在项目中有 3 个表。以下是表名和行：

1.  用户（ID、姓名、电子邮件、用户名、密码、当前时间） 用于存储用户信息。

2.  Groups (id, name, currentTIme) 用于存储组信息。

3.  UserGroup (id, userId, groupId, currentTime) 用于保持用户和组之间的关系。

现在，我要做的是在创建 3 个模型之后，用户和组模型将用于所有用户。添加了不同的组，例如：

1.  CSE 02\. EEE 03\. BBA 04\. 建筑学等

现在，当“用户创建”第 2 部分必须发生时。一，组名（CSE、EEE、BBA、体系结构等）将显示在一个列表框中，以便与用户的其他信息（名称、密码等）一起选择。现在的问题是如何在没有关系的模型用户的列表框中显示组的名称。

第二个问题是，当我单击“提交”时，它将更新 2 个表“用户”和“用户组”。名称、密码、当前时间将保存在“用户”中，用户 ID（当前用户）、组 ID（组用户的 ID 将被选择，如 CSE 等的 1）将保存在“用户组”表中。

感谢您容忍我糟糕的英语，任何评论/反馈都会对我有很大帮助.....提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:14:45.230

我找到了第一部分的答案，它显示了另一个模型的列表。对于像我这样的人，我在这里发布它可能很有用。

在 /models/users.php 中：

类用户扩展 CActiveRecord { public $Groups; .................................. .................. }

在 /view/users/_form.php 中：

```
<div class="row">
<?php echo $form->labelEx($model,'Group'); ?>
<?php
echo $form->dropDownList($model, 'Groups',
CHtml::listData(Groups::model()->findAll(),'id','name'));

//echo $form->;dropDownList($model,'Groups', CHtml::listData(Groups::model()->findAll(), 'id', 'value'), array('empty'=>;'--please select--')); 
?>
<?php echo $form->error($model,'password'); ?>
</div> 
```

# c++ - C++ 循环包括内部结构

> ID：13376843
> 
> 赞同：1
> 
> 时间：2012-11-14T10:15:48.550
> 
> 标签：c++, struct, circular-dependency

我有一个关于通告的问题，包括让我抓狂的：

### 主文件

```
#include "A.hpp"
#include "B.hpp"

int main()
{
    A a();
    B b();
    return 0;
} 
```

### A.hpp

```
#ifndef _CLASS_A
#define _CLASS_A

#include "B.hpp"
class A
{
    public: 
        B* b;
        struct A_t
        {
            int id;
        };
};
#endif 
```

### B.hpp

```
#ifndef _CLASS_B
#define _CLASS_B

#include "A.hpp"

class B
{
    class A;  //Ok, with that I can use the class A
    public: 
        int a;
        A* b;  // That work!
        A::A_t *aStruct; // Opss! that throw a compilation error.

};
#endif 
```

问题是：¿如何在 B 类中使用 A_t 结构？

我试图添加一个前向声明，如：

```
struct  A::A_t; 
```

但这显然确实有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:18:16.657

`A.h`用前向声明替换包含。

```
#ifndef _CLASS_A
#define _CLASS_A
class B;
class A
{
    public: 
        B* b;
        struct A_t
        {
            int id;
        };
};
#endif 
```

另外，请注意

```
A a();
B b(); 
```

不会创建类的两个实例，但它们是函数声明。你要

```
A a;
B b; 
```

# php - Magento 中的“news_from_date”

> ID：13376845
> 
> 赞同：4
> 
> 时间：2012-11-14T10:15:49.850
> 
> 标签：php, magento

我正在使用 Magento API 使用以下内容制作“新”产品

```
'news_from_date' => date("d/m/Y h:i:s"); 
```

使用`catalog_product.update`

这工作得很好，并将项目显示为“新”

但是，我现在正试图使以前标记为“新”的项目不再是新的。我想我可以用 catalog_product.update 再做一次，然后做

```
'news_from_date' => null; 
```

但这仅将日期设置为 - 1999 年 11 月 30 日，这显然将项目保持为“新”有人能指出我正确的方向吗？

**编辑**

我也没有高兴地尝试了以下 -

```
'news_from_date' => "00/00/00 00:00:00"; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-13T19:04:51.990

## 正确的 SQL 日期时间格式

Magento SQL 以这种格式存储日期：

`yyyy-mm-dd hh:mm:ss`

`date("Y-m-d H:i:s");`

* * *

**所以而不是：**

`'news_from_date' => "00/00/00 00:00:00";`

`'news_from_date' => date("d/m/Y h:i:s");`

**利用：**

`'news_from_date' => "0000-00-00 00:00:00";`

`'news_from_date' => date("Y-m-d H:i:s");`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T10:20:48.793

尝试将属性设置`news_to_date`为之前的任何日期。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T10:27:27.000

您可以这样设置产品日期：

```
$_product = Mage::getModel('catalog/product')->load($PRD_ID);
$_product->setData('news_from_date', date("d/m/Y h:i:s"));
$_product->setData('news_to_date', date("d/m/Y h:i:s", strtotime('+1 week'))); 
```

# jquery - JQuery：如何从对象中获取属性

> ID：13376848
> 
> 赞同：0
> 
> 时间：2012-11-14T10:16:01.003
> 
> 标签：jquery, html

我在从对象获取 innerHTML 时遇到问题。目前我有这个代码：

```
console.log( $(myString).find("#" + someID).prevObject ); 
```

*   myString 是 HTML 代码的字符串变量
*   someID 是要获取的 HTML 标记的当前 ID。在此示例中，它`<li>`从具有匹配 ID 的字符串中获取一个元素。

这会在控制台中输出以下内容：

![截屏](../Images/13a2075782f1e6bd478d48d986a802f9.png)

我只是在努力弄清楚如何`innerHTML`从此日志中获取属性。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:18:42.520

[`html`](http://api.jquery.com/html)您可以通过 jQuery函数获取元素的 HTML 。所以假设具有 ID 的元素确实存在：

```
console.log( $(myString).find("#" + someID).html() ); 
```

这会给你你所说的你想要的：`li`带有 that的 HTML `id`。请注意，我删除了`prevObject`. 有两个原因：

1.  你说你想要那个的`li`HTML `id`。如果你这样做，你不想要`prevObject`。

2.  `prevObject`是 jQuery 的一个**未记录**的方面。它可以改变含义，改变名称，或者完全从一个点释放到下一个。（但主要是第 1 点。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:18:49.483

您应该像这样从 jquery 对象中获取 html 元素：

```
console.log( $(myString).find("#" + someID).prevObject[0].innerHTML ); 
```

或者您可以访问 jQuery 版本的 innerHTML

```
console.log( $(myString).find("#" + someID).prevObject.html() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T10:19:13.017

一旦你有了元素，你只需要使用 html()。

```
$('div.demo-container').html(); 
```

浏览此处获取更多信息：-

[http://api.jquery.com/html/](http://api.jquery.com/html/)

# javascript - jQuery .next() 和 .previous()

> ID：13376849
> 
> 赞同：0
> 
> 时间：2012-11-14T10:16:03.403
> 
> 标签：javascript, jquery

```
Aug: <input type="text" value="100000" name="targetMonth_8" id="targetMonth_8" class="targetMonth" disabled>
Sep: <input type="text" value="100000" name="targetMonth_9" id="targetMonth_9" class="targetMonth" disabled>
Oct: <input type="text" value="100000" name="targetMonth_10" id="targetMonth_10" class="targetMonth active">
Nov: <input type="text" value="100000" name="targetMonth_11" id="targetMonth_11" class="targetMonth active">
Dec: <input type="text" value="100000" name="targetMonth_12" id="targetMonth_12" class="targetMonth active"> 
```

出于本演示的目的，假设当前月份是 10 月。AUG/SEP 不可编辑，因为它早于当前月份（10 月）。因此，十月、十一月和十二月是可编辑的。如果用户编辑十月，我想动态获取下一个活动输入，我将在其中进行更改以自动平衡系统。

我在页面上还有一个指示器来设置下一个月还是上一个月是自动平衡的目标。

例如： *如果指标向下，则*

*   如果用户编辑 Oct，我想知道 Nov 的 id 及其值。
*   如果用户编辑 Nov，我想知道 Dec 的 id 及其值。
*   如果用户编辑 Dec，我想知道 Oct 的 id 及其值。

*如果指示器向上，则*

*   如果用户编辑 Oct，我想知道 Dec 的 id 及其值。
*   如果用户编辑 Nov，我想知道 Oct 的 id 及其值。
*   如果用户编辑 12 月，我想知道 11 月的 id 及其值。

我将如何使用 jQuery 动态获取 NEXT 或 PREVIOUS 输入 WHERE CLASS 为“活动”的名称和值？

IE：

```
<script>
$('#targetMonth_{$monthNumber}').keyup(function() {
  balanceDirection = $('#balanceDirectionValue').val();
  if (balanceDirection=='down') {
    balanceInputID = <next input's ID>;
    balanceInputValue = <next input's value>;
  }
  if (balanceDirection=='up') {
    balanceInputID = <previous input's ID>;
    balanceInputValue = <previous input's value>;
  }
}
</script> 
```

我试过使用：

> $('#targetMonth_{$monthNumber}').nextAll('.active').val()

类似的东西，我不确定...请协助。如果可以通过其他方式完成，我愿意进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:34:41.030

是的，这应该工作：

```
the_val = $('#targetMonth_{$monthNumber}').nextAll('.active').val();
the_id = $('#targetMonth_{$monthNumber}').nextAll('.active').attr('id'); 
```

这些变量可能是数组

# c++ - std::string 在 msvcp90d.dll 中完全崩溃

> ID：13376852
> 
> 赞同：1
> 
> 时间：2012-11-14T10:16:14.073
> 
> 标签：c++, dll, crash, std, stdstring

该库正在使用 std::string。当某些特定的应用程序与它链接时，在库中执行的字符串操作变得完全崩溃。

例如字符串赋值运算符'='（附加堆栈跟踪）。

![在此处输入图像描述](../Images/989c0b665f30e93f736b5216bc6e1ef4.png)

memcpy_s( ... ) 的目的地和大小看起来很混乱。

我们无法在本地复制它。请指教。

编辑：代码看起来像这样：

```
...
#define DEFAULT_VAL "value"
...
class MyClass {
public:
 MyClass(const std::string& s=DEFAULT_VAL)
 {
  _test() = s;
 }
protected:
 inline const std::string& test() const {return m_test;}
 inline std::string& _test() {return m_test;}
private:
 std::string m_test;
};

....
MyClass c; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:19:51.580

您可能正在用 0 初始化一个`std::string`(or `std::wstring`)，很可能是通过一个空指针，比如……

```
#include <string>
using namespace std;

int main()
{
    string s1( 0 );
    string s2 = s1;
} 
```

不要那样做。

没有很多其他方法可以让`std::string`“崩溃”，所以很可能就是这样。现在去调试吧！祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:25:13.443

如果您遇到 DLL 在接口上暴露的情况`std::string`，请确保 .EXE 和 .DLL 都是使用*相同*的编译器版本和*相同*风格的 CRT 构建的（例如，都调试，都发布，都使用等的相同设置`_HAS_ITERATOR_DEBUGGING`）。

# php - 将目录名称添加到 SEF url 并传递 id 值而不在 url 中使用它

> ID：13376853
> 
> 赞同：5
> 
> 时间：2012-11-14T10:16:13.917
> 
> 标签：php, .htaccess, url-rewriting, sef

我是一个关于 .htaccess 和重写函数的新手。我搜索了很多页面，但找不到解决方案。这是我的问题：

我的 kurum.php 文件中有这些格式的网址：

```
fxrehber.com/kurum.php?id=$krmID&sef=$sef 
```

所以我的正常网址是：

**http://fxrehber.com/kurum.php?id=7&sef=ata-foreks**

我的 .htaccess 的相关部分是：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteRule ^([0-9]+)-([a-zA-Z0-9-_]+)$ /kurum.php?id=$1&sef=$2
</IfModule> 
```

所以我可以得到这种格式的 SEF url：

**http://fxrehber.com/7-ata-foreks**

我有两个问题：

1\. 可以在不将 kurum.php 文件移动到新目录的情况下使用 .htaccess 将此 url 更改为这种格式吗？

**http://fxrehber.com/kurumlar/7-ata-foreks**

（我可以通过 .htaccess 添加“/kurumlar”目录，但我的 css 和图像链接不起作用）

2\. 我可以传递 id 值而不在 SEF url 中提及它，如下所示：

**http://fxrehber.com/kurumlar/ata-foreks**（这对我来说是最好的选择）

如果我不能这样做，我是否必须仅使用 $sef 变量从数据库中选择文章？这有缺点吗？

我希望这足以解释我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:04:33.743

1\. 可以在不将 kurum.php 文件移动到新目录的情况下使用 .htaccess 将此 url 更改为这种格式吗？

`http://fxrehber.com/kurumlar/7-ata-foreks`

（我可以通过 .htaccess 添加“/kurumlar”目录，但我的 css 和图像链接不起作用）

* * *

我在 php 文件中使用了图像的完整路径，它适用于：.htaccess:

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteRule ^kurumlar\/([0-9]+)-([a-zA-Z0-9-_]+)$ /kurum.php?id=$1&sef=$2
</IfModule> 
```

库鲁姆.php：

```
<?php
    var_dump($_REQUEST);
?>
<img src="/sites/default/files/1.png"> 
```

2\. 我可以传递 id 值而不在 SEF url 中提及它，如下所示：

`http://fxrehber.com/kurumlar/ata-foreks`（这对我来说是最好的选择）

* * *

只有 if`ata-foreks`可以作为文章的唯一别名，代替 id 使用。

> “这有什么坏处吗？”

Yes. Searching by string is slower, then by integer.

# java - Eclipse 3.8：调用层次结构错过了来自 jar 的调用者

> ID：13376854
> 
> 赞同：8
> 
> 时间：2012-11-14T10:16:16.207
> 
> 标签：java, eclipse, ide, callstack, eclipse-jdt

Eclipse JDT 3.8 中的*调用层次结构*视图似乎只显示来自当前项目/工作集中 *自己的类的引用/调用者。*
***不再显示来自 jars/库的调用者****。*

相比之下，在 eclipse <= **3.6**中，这**显示了所有调用者，包括**来自**library**的调用者。

***例子：***

1.  `CTRL-SHIFT-T`; 打开`DocumentBuilderFactory`
2.  在方法大纲中，右键单击`setAttribute()`
3.  `Call Hierarchy`从上下文菜单中选择
4.  确保在呼叫层级设置中启用了*显示呼叫者层级。*

*Eclipse 3.8 显示没有匹配项，而 Eclipse 3.6 显示（至少）一个匹配* 项（使用 jdk 6 测试）

（在“搜索范围”设置中，所有选项都被选中）

**问题：
*有没有办法在 eclipse 3.8 中启用以前的行为，或者它是一个错误？***

（同样的问题可以在“显示被调用者层次结构”模式中看到 - 它不再显示来自 jdk 类的任何内部被调用者，例如比较被调用者`ArrayList.get()`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:53:54.030

在调用层次结构视图中，单击下拉箭头，选择“搜索范围”并选中“应用程序库”框。

# objective-c - 在 XCode 可可应用程序中禁用“点击以单击”

> ID：13376858
> 
> 赞同：0
> 
> 时间：2012-11-14T10:16:23.790
> 
> 标签：objective-c, xcode, macos, cocoa, system-preferences

Mac OS X 的系统偏好设置有一个魔术触控板选项，只需触摸触控板即可，无需实际按下进行点击。它被称为“点击点击”。有没有办法在我的应用程序中禁用此功能？

我正在使用 XCode 4.5，该项目是一个可可应用程序。Mac OS X 是 Lion 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:55:26.357

对于 UIWebview ，关闭 UIWebView 的默认上下文菜单。这很简单，因为我们只需要将网页正文元素的 CSS 属性“-webkit-touch-callout”设置为“none”。我们可以在 UIWebView 委托方法“webViewDidFinishLoad:”中使用 JavaScript 来做到这一点……</p>

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
[webView stringByEvaluatingJavaScriptFromString:@"document.body.style.webkitTouchCallout='none';"];
} 
```

对于mac ..应该有这样的东西...不确定

# c++ - 如何为这种情况编写赋值运算符？

> ID：13376860
> 
> 赞同：0
> 
> 时间：2012-11-14T10:16:30.620
> 
> 标签：c++, templates, visual-c++, clang, assignment-operator

我有一些在 MSVC 上编译得很好的代码，但现在我将它移植到 Clang 并且在编写赋值运算符时遇到了麻烦，我猜这在 MSVC 中被认为是隐含的。这是我得到的代码：

```
enum EBufferPacking {
    Invalid = -1, UInt1, Int8, Int16, Float32
};

template<EBufferPacking p>
class PackedBufferRef;

template<>
class PackedBufferRef<UInt1> {
    unsigned char *const m_pBuffer;
    const unsigned char m_nMask; 
public:
    explicit PackedBufferRef<UInt1>(void *buffer, int offset):
        m_pBuffer((unsigned char *)buffer + offset/8),
        m_nMask(1<<(offset%8))
    {}

    operator float() const
    {
        return (*m_pBuffer & m_nMask) ? 1.0f : 0.0f;
    }

    template<class T>
    PackedBufferRef<UInt1> &operator =(const T &t)
    {
        if (!t) // write 0
            *m_pBuffer &= ~m_nMask;
        else
            *m_pBuffer |=  m_nMask;
        return *this;
    }
    PackedBufferRef<UInt1> &operator =(const PackedBufferRef<UInt1> &ref)
    {
        if( !(*ref.m_pBuffer & ref.m_nMask) )
            *m_pBuffer &= ~m_nMask;
        else
            *m_pBuffer |=  m_nMask;
        return *this;
    }
};

template<class T>
class BytePackedBufferRef{
protected:
    T *const m_pBuffer; // dont assign new pointers
    BytePackedBufferRef<T>(void *buffer, int offset): m_pBuffer((T *)buffer + offset) {}

    BytePackedBufferRef &operator=(const BytePackedBufferRef &other) {
        // assignment operator should go here   
    }
public:
    operator T*() const { return m_pBuffer; }
    operator T() const { return *m_pBuffer; }
};

template<>
class PackedBufferRef<Float32>:public BytePackedBufferRef<float> {
public:
    explicit PackedBufferRef<Float32>(void *buffer, int offset):BytePackedBufferRef<float>(buffer, offset) {}
    template<class T> PackedBufferRef<Float32> &operator =(const T &t) { *m_pBuffer = (float)t; return *this; }
};

int main()
{
    float fx = 0.5f;
    float fy = 1.7f;

    PackedBufferRef<Float32> firstRef(&fx, 0);
    PackedBufferRef<Float32> secondRef(&fy, 0);

    firstRef = secondRef;

    printf("First ref: %.2f\n", (float)firstRef);
    printf("Second ref: %.2f\n", (float)secondRef);

    return 0;
} 
```

从 main 函数你可以看到我想要的结果：我想`m_pBuffer`从赋值的 RHS 上的变量中取出，并将其放入`m_pBuffer`LHS 变量上。PackedBufferRef 特化有一个赋值运算符来执行此操作，但它只是将赋值传递给`BytePackedBufferRef`类型，其`m_pBuffer`成员声明为 const。在这种情况下，我该如何编写赋值运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:46:59.373

如果你坚持，你可以这样做......

```
BytePackedBufferRef &operator=(const BytePackedBufferRef &other) {
    // assignment operator should go here 
    T** pp = (T**)&m_pBuffer;
    *pp = other.m_pBuffer;  
} 
```

# sharepoint - Sharepoint 2010 事件接收器仅在管理员帐户中工作

> ID：13376862
> 
> 赞同：1
> 
> 时间：2012-11-14T10:16:32.070
> 
> 标签：sharepoint, eventreceiver

我有一个事件接收器，当用户创建文件夹时，它会自动创建 13 个子文件夹。下面的代码可以做到这一点，当管理员帐户创建文件夹时一切正常。但是当涉及到其他用户时，不会在没有任何错误的情况下创建子文件夹。

```
public override void ItemAdded(SPItemEventProperties properties)
{
    base.ItemAdded(properties);
    SPWeb web = properties.OpenWeb();
    web.AllowUnsafeUpdates = true;
    SPDocumentLibrary docLib = (SPDocumentLibrary)web.List[properties.ListId];
    if (properties.ListItem.ContentType.Name == "Folder"
        && properties.ListItem.Folder.ParentFolder.ToString().ToLower().EndsWith("opportunity"))
    {
        String url = properties.ListItem.ParentList.RootFolder.ServerRelativeUrl.ToString();
        SPFolder libFolder = properties.ListItem.Folder;
        string newFolderUrl = (web.Url + "/" + libFolder.ToString());
        foreach (string subfolder in folders)
        {
            SPListItem newFolder = docLib.Items.Add(newFolderUrl, SPFileSystemObjectType.Folder, subfolder);
            newFolder.Update();
        }
    }
} 
```

我阅读了许多关于提升 SPSite 和 SPWeb 的帖子，并在创建子文件夹之前编写了一个代码来提升对象。但是下面的代码不起作用：

```
public override void ItemAdded(SPItemEventProperties properties)
{
    Guid siteId = properties.SiteId;
    Guid webId = properties.OpenWeb().ID;
    SPSecurity.RunWithElevatedPrivileges(delegate()
    {
        using (SPSite elevatedSite = new SPSite(siteId))
        {
            using (SPWeb web = elevatedSite.OpenWeb(webId))
            {
                base.ItemAdded(properties);
                web.AllowUnsafeUpdates = true;
                SPDocumentLibrary docLib = (SPDocumentLibrary)web.Lists[properties.ListId];
                if (properties.ListItem.ContentType.Name == "Folder"
                     && properties.ListItem.Folder.ParentFolder.ToString().ToLower().EndsWith("opportunity"))
                {
                    String url = properties.ListItem.ParentList.RootFolder.ServerRelativeUrl.ToString();
                    SPFolder libFolder = docLib.RootFolder.SubFolders[properties.ListItem.Name];
                    SPFolder libFolder = properties.ListItem.Folder;

                    string newFolderUrl = (web.Url + "/" + libFolder.ToString());
                    foreach (string subfolder in folders)
                    {
                        SPListItem newFolder = docLib.Items.Add(newFolderUrl, SPFileSystemObjectType.Folder, subfolder);
                        newFolder.Update();
                    }
              }
              web.AllowUnsafeUpdates = false;
            }
         }
    });
} 
```

任何人都可以帮助解决问题吗？请注意，所有用户都是家庭成员，可以手动创建文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:09:22.960

尝试拨打您的电话至`ItemAdding`。

`ItemAdding`在调用方法时调用（与当前登录用户同步）并在方法执行*后*`ItemAdded`调用- 与 SharePoint\System 用户异步调用，这通常是一个工作进程。

 *也许这会有所帮助。*

# wix - LGHT 警告 1076 :ICE 60

> ID：13376868
> 
> 赞同：1
> 
> 时间：2012-11-14T10:16:49.997
> 
> 标签：wix, windows-installer

我如何摆脱轻度警告 1076：使用 ICE 60。如果我不摆脱它们，我的安装程序以后会以任何形式不稳定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:45:30.057

ICE60 表示包含版本资源但未标记为特定语言的二进制文件（即 PE 格式的文件）。使用警告消息确定正在抱怨的二进制文件，并用适当的语言标记该二进制文件（从源代码重新编译，或使用资源编辑器），然后重新打包安装**。**

文件版本表示为*major.minor.build.iteration*，例如 2.0.50727.42（这是第一个 .NET 2.0 Framework 版本的版本）。MSI 文件搜索在比较版本时有一个[不明显的怪癖](http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm)：版本不仅必须匹配所有四个数字*，还必须匹配语言*。要使搜索语言中立，请查找*比*您实际想要的版本稍低的版本（例如 MinVersion="2.0.50727.41" 而不是 .42）。

因此，根本没有指明语言的二进制文件不可能与给定的版本号完全匹配。这就是为什么**光**会给你这个警告。

如果语言不是问题，那么是的，即使出现此警告，您的安装程序也应该可以安装。

# c# - 在 DateTime.Parse() 中更改格式

> ID：13376869
> 
> 赞同：0
> 
> 时间：2012-11-14T10:16:51.853
> 
> 标签：c#

在数据库中，日期以下列格式保存：
`year-month-day hour:minute:second:msecond`

在应用程序中，用户可以过滤网格并在过滤器列中写入以下内容：
`08-11`- 表示 11 月 8 日。我有以下代码：

```
var test = DateTime.Parse(filter.SearchingValue); 
```

在`test`变量中包含`11.08.2012`. 但是，我想得到`08.11.2012`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:20:48.833

您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
string value = string.Format("{0}-{1}"
    , filter.SearchingValue
    , DateTime.Today.Year);
DateTime dt = DateTime.ParseExact(value, "dd-MM-yyyy", CultureInfo.InvariantCulture); 
```

> 是的，但用户也可以按点分割日期：08.11。更多示例：08.11.12、08.11、08-11、08-11-12。

也许有一些更简单的东西，但这有效：

```
// sample input
var inputs = new string[] { "08.11.12", "08.11", "08-11", "08-11-12" };
// possible formats
var formats = new string[] { "dd-MM-yyyy", "dd.MM.yyyy" };
// try to parse all your sample data
for (int i = 0; i < inputs.Length; i++)
{
    string input = inputs[i];
    var tokens = input.Split(new[] { '-', '.' }, StringSplitOptions.RemoveEmptyEntries);
    if (tokens.Length == 2)
    {
        input = string.Format("{0}-{1}"
                , input
                , DateTime.Today.Year);
    }
    else if (tokens.Length == 3)
    {
        string year = tokens[2];
        if (year.Length != 4)
        { 
            year = string.Format("{0:20##}", int.Parse(year));
        }
        input = string.Format("{0}-{1}-{2}"
                , tokens[0]
                , tokens[1]
                , year);
    }
    else
        throw new ArgumentException("Invalid DateTime", "filter.SearchingValue");

    DateTime dt = DateTime.MinValue;
    foreach (string format in formats)
    {
        bool success = DateTime.TryParseExact(
            input
            , format
            , CultureInfo.InvariantCulture
            , DateTimeStyles.None
            , out dt);
        if (success) break;
    }
    Console.WriteLine(dt.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:18:02.723

```
var ftest = test.ToString("dd.MM.yyyy") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:26:29.827

您可以在 system.web 中的 web 配置中设置默认日期格式：

<`globalization uiCulture="en-GB" culture="en-GB" />`

# ravendb - 在 RavenDB 中获取最小/最大日期减少结果

> ID：13376870
> 
> 赞同：3
> 
> 时间：2012-11-14T10:16:53.320
> 
> 标签：ravendb

我有一个多地图索引，需要在 Reduce 结果中获取最大日期。

当我尝试：

```
Reduce = results => from result in results
                    group result by result.Id into g
                    select new
                    {
                        Id = g.Key,
                        AccountId = g.Select(x => x.AccountId).Where(x => x != null).FirstOrDefault(),
                        Hostnames = g.SelectMany(x => x.Hostnames),
                        NextRenewalDate = g.Select(x => x.NextRenewalDate).Max(),
                        SubscriptionCount = g.Sum(x => x.SubscriptionCount)
                    }; 
```

`NextRenewalDate`始终为空。

但是，我可以这样做：

```
NextRenewalDate = g.Select(x => x.NextRenewalDate).FirstOrDefault, 
```

我确实得到了结果。

我想知道这是否是由于 RavenDB 如何解释索引中的日期。我的减少结果类如下：

```
public class ReduceResult
{
    public string Id { get; set; }
    public string AccountId { get; set; }
    public string[] Hostnames { get; set; }
    public DateTime NextRenewalDate { get; set; }
    public int SubscriptionCount { get; set; }
} 
```

更新

从那以后，我就能够使索引正常工作，但前提是我将其`DateTime`转换为 ISO8601 字符串。我的完整索引如下：

```
public class Account_Sites : AbstractMultiMapIndexCreationTask<Account_Sites.ReduceResult>
{
    public Account_Sites()
    {
        AddMap<CMS.Domain.Site>(sites => from site in sites
                                         from url in site.Urls
                                         select new
                                         {
                                             Id = site.Id,
                                             AccountId = (string)null,
                                             Hostnames = new[] { url.Hostname },
                                             SubscriptionDueDate = DateTime.MinValue,
                                             SubscriptionStartDate = DateTime.MinValue
                                         });

        AddMap<Domain.Account>(accounts => from account in accounts
                                           from siteId in account.Sites
                                           from subscription in account.Subscriptions
                                           where subscription != null
                                           select new
                                           {
                                               Id = siteId,
                                               AccountId = account.Id,
                                               Hostnames = new string[0],
                                               SubscriptionDueDate = subscription.NextRenewalDate,
                                               SubscriptionStartDate = subscription.StartDate
                                           });

        Reduce = results => from result in results
                            group result by result.Id into g
                            select new
                            {
                                Id = g.Key,
                                AccountId = g.Select(x => x.AccountId).Where(x => x != null).FirstOrDefault(),
                                Hostnames = g.SelectMany(x => x.Hostnames),
                                SubscriptionDueDate = g.Max(x => x.SubscriptionDueDate.ToString("o")), // ISO 8601 format e.g. 2012-10-22T12:51:03.0263843+00:00
                                SubscriptionStartDate = g.Max(x => x.SubscriptionStartDate.ToString("o"))
                            };
    }

    public class ReduceResult
    {
        public string Id { get; set; }
        public string AccountId { get; set; }
        public string[] Hostnames { get; set; }
        public DateTime SubscriptionDueDate { get; set; }
        public DateTime SubscriptionStartDate { get; set; }
    }
} 
```

### 更新 2

我在下面发布了一个完整的失败测试。丹尼尔的测试确实有效，但以下失败。但是，将 to更改`TestSubscription.EndDate`为`DateTime.Now`（而不是`UtcNow`）确实有效。这是使用 build **1.2.2103-Unstable**。

```
public class TestAccount
{
    public string Id { get; set; }
    public List<string> Sites { get; set; }
    public List<TestSubscription> Subscriptions { get; set; }

    public TestAccount()
    {
        Sites = new List<string>();
        Subscriptions = new List<TestSubscription>();
    }
}

public class TestSubscription
{
    public DateTime EndDate { get; set; }
}

public class TestSite
{
    public string Id { get; set; }
    public string Hostname { get; set; }
}

public class SitesWithSubscriptions : AbstractMultiMapIndexCreationTask<SitesWithSubscriptions.Result>
{
    public SitesWithSubscriptions()
    {
        AddMap<TestSite>(sites => from site in sites
                                  select new
                                  {
                                      SiteId = site.Id,
                                      Hostname = site.Hostname,
                                      SubscriptionEndDate = DateTime.MinValue
                                  });

        AddMap<TestAccount>(accounts => from account in accounts
                                        from siteId in account.Sites
                                        from subscription in account.Subscriptions
                                        select new
                                        {
                                            SiteId = siteId,
                                            Hostname = (string)null,
                                            SubscriptionEndDate = subscription.EndDate
                                        });

        Reduce = results => from result in results
                            group result by result.SiteId into g
                            select new
                            {
                                SiteId = g.Key,
                                Hostname = g.Select(x => x.Hostname).Where(x => x != null).FirstOrDefault(),
                                SubscriptionEndDate = g.Max(x => x.SubscriptionEndDate)
                            };
    }

    public class Result
    {
        public string SiteId { get; set; }
        public string Hostname { get; set; }
        public DateTime SubscriptionEndDate { get; set; }
    }
}

    public class SitesSpecs : RavenSpecs
{
    static IEnumerable<SitesWithSubscriptions.Result> results;

    Establish ctx = () =>
    {
        using (var session = Store.OpenSession())
        {
            var site = new TestSite { Hostname = "www.dev.com" };
            session.Store(site);

            var account = new TestAccount();
            account.Subscriptions.Add(new TestSubscription { EndDate = DateTime.UtcNow });
            account.Sites.Add(site.Id);
            session.Store(account);

            session.SaveChanges();
        }           
    };

    Because of = () =>
    {
        using (var session = Store.OpenSession())
        {
            results = session.Query<SitesWithSubscriptions.Result, SitesWithSubscriptions>()
                .Customize(x => x.WaitForNonStaleResults())
                .ToList();
        }
    };

    It Should_return_sites_with_subscription_end_dates = ()
        =>
    {
        results.Count().ShouldEqual(1);
        results.First().SubscriptionEndDate.Date.ShouldEqual(DateTime.UtcNow.Date);
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:11:39.960

这是一个快速'n'dirty示例，展示了如何做到这一点：

**更新：**我编写了这段代码来验证 RavenDB 是否可以按照您的要求处理 DateTime。您无需将其转换为 ISO 中的字符串，...我在 Build 960 中尝试过。如果它不适合您，请提供失败的测试并让我们知道您使用的是哪个版本。

```
public class Student
{
    public string Id { get; set; }
    public string Classroom { get; set; }
    public DateTime Birthday { get; set; }
}

public class LatestBirthdayInClassroom : AbstractIndexCreationTask<Student, LatestBirthdayInClassroom.Result>
{
    public class Result
    {
        public string Classroom { get; set; }
        public DateTime LatestBirthday { get; set; }
    }

    public LatestBirthdayInClassroom()
    {
        Map = students => from student in students
                       select new
                       {
                           Classroom = student.Classroom,
                           LatestBirthday = student.Birthday
                       };

        Reduce = results => from result in results
                            group result by result.Classroom into g
                            select new
                            {
                                Classroom = g.Key,
                                LatestBirthday = g.Select(x => x.LatestBirthday).Max()
                            };
    }
}

class Program
{
    static void Main(string[] args)
    {
        using (var store = new EmbeddableDocumentStore
        {
            RunInMemory = true
        }.Initialize())
        {
            using (var session = store.OpenSession())
            {
                session.Store(new Student { Classroom = "A", Birthday = new DateTime(2012, 2, 1) });
                session.Store(new Student { Classroom = "A", Birthday = new DateTime(2012, 5, 1) });
                session.Store(new Student { Classroom = "A", Birthday = new DateTime(2012, 3, 1) });
                session.Store(new Student { Classroom = "B", Birthday = new DateTime(2012, 8, 1) });
                session.Store(new Student { Classroom = "B", Birthday = new DateTime(2012, 11, 1) });
                session.Store(new Student { Classroom = "B", Birthday = new DateTime(2012, 9, 1) });
                session.SaveChanges();
            }

            new LatestBirthdayInClassroom().Execute(store);

            // wait for indexing
            while (store.DatabaseCommands.GetStatistics().StaleIndexes.Length > 0)
            {
                Thread.Sleep(100);
            }

            using (var session = store.OpenSession())
            {
                var results = session.Query<LatestBirthdayInClassroom.Result, LatestBirthdayInClassroom>()
                    .ToList();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:36:38.773

这原来是 RavenDB 中的一个错误，并在构建 2145 中修复。完整的详细信息在[http://issues.hibernatingrhinos.com/issue/RavenDB-718](http://issues.hibernatingrhinos.com/issue/RavenDB-718)

# microsoft-metro - 移植 Windows 8 应用商店库

> ID：13376872
> 
> 赞同：0
> 
> 时间：2012-11-14T10:17:02.853
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml

有没有办法移植为 Windows 8 应用商店开发的库（用于 c# 和 Xaml），以便它可以在用 HTML5/Javascript 开发的 Windows 8 应用商店中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:43:35.063

您是否尝试将其添加为参考？如果你这样做，你会得到错误吗？

我看到其他人已经这样做了： [http](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/e890e461-a6fc-4396-8a27-57ed090998a5/) : //social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/e890e461-a6fc-4396-8a27-57ed090998a5/“您需要在属性。”

# c# - 在 DataGridView 中存储临时数据

> ID：13376877
> 
> 赞同：0
> 
> 时间：2012-11-14T10:17:30.457
> 
> 标签：c#, .net, winforms

例如，我有一个类（用户）和 30 个值（属性），其中 10 个我在 DataGridView 中显示为列，但其他（每个用户的设置（例如，任何其他 BL 值发出请求的超时））大约 20值，我只想一起存储在 XML 文件中（我可以进行序列化/反序列化）。

所以，我需要存储任何没有显示 20 个值的地方，最好的做法是什么？它是 DataGridView 中的隐藏列还是其他任何内容？

据我所知，我必须将它存储在一起，但我可以在哪里做呢？我是否应该在两个存储数据块（用户 [10 值] + 用户 [20 值]）之间建立关系，以便在 XML 序列化之后使它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:29:14.973

数据缓存的使用将有助于您的场景。

概括：

数据缓存是将数据存储在内存中以便快速访问。通常，获取成本高的信息（就性能而言）存储在缓存中。在 Web 应用程序环境中存储在缓存中的更常见的项目之一是通常显示的数据库值。通过缓存这些信息，而不是依赖重复的数据库调用，减少了对 Web 服务器和数据库服务器系统资源的需求，提高了 Web 应用程序的可扩展性。正如微软雄辩地指出的那样，

> “缓存是一种广泛用于计算的技术，通过将频繁访问或昂贵的数据保存在内存中来提高性能。在 Web 应用程序的上下文中，缓存用于跨 HTTP 请求保留页面或数据并重用它们，而无需重新创建它们。”

请参考链接如何在asp.net中使用数据缓存

[http://www.asp.net/web-forms/tutorials/data-access/caching-data/caching-data-in-the-architecture-cs](http://www.asp.net/web-forms/tutorials/data-access/caching-data/caching-data-in-the-architecture-cs)

[http://geekswithblogs.net/Rhames/archive/2011/01/10/using-the-asp.net-cache-to-cache-data-in-a-model.aspx](http://geekswithblogs.net/Rhames/archive/2011/01/10/using-the-asp.net-cache-to-cache-data-in-a-model.aspx)

[http://blog.ntotten.com/2011/04/29/caching-data-in-asp-net-applications/](http://blog.ntotten.com/2011/04/29/caching-data-in-asp-net-applications/)

更新：

如果您没有数据库并且使用的是 winforms，则存储到列表中并使用 linq 查询建立关系。

以下是显示如何使用连接和 linq 的链接

[http://weblogs.asp.net/rajbk/archive/2010/03/12/joins-in-linq-to-sql.aspx](http://weblogs.asp.net/rajbk/archive/2010/03/12/joins-in-linq-to-sql.aspx)

[http://geekswithblogs.net/WillSmith/archive/2008/05/28/linq-joins-and-groupings.aspx](http://geekswithblogs.net/WillSmith/archive/2008/05/28/linq-joins-and-groupings.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:17:51.970

我经常使用的最佳实践是检索**集合**中的所有数据，例如`List, DataTable, EntityCollection, ...`或任何`IEnumerable`类型，并将其绑定到您的`DataGridView`which has `AutoGenerateColumns = false`. 在这种情况下，您应该**手动将特定列添加到`DataGridView`**设计器或代码中。代码方法是这样的：

```
// say this is your User class with 9 fields
public class User
{
    public string Name { get; set; }
    public string LastName { get; set; }
    public string FatherName { get; set; }
    public string Telephone { get; set; }
    public string Mobile { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public bool IsActive { get; set; }
    public DateTime LastLoginDate { get; set; }
}
// and your Form1 class would be like this
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        dataGridView1.AutoGenerateColumns = false;
        // say you want to show, only the first 5 fields of your Entity
        dataGridView1.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Name", DataPropertyName = "Name", Width=100 });
        dataGridView1.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Last Name", DataPropertyName = "LastName", Width = 100 });
        dataGridView1.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Father's Name", DataPropertyName = "FatherName" });
        dataGridView1.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Telephone", DataPropertyName = "Tel", Width = 50 });
        dataGridView1.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Mobile", DataPropertyName = "Mobile", Width = 50 });
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        List<User> list = new List<User>();

        list.Add(new User { Name="aaa", LastName="bbbb", FatherName="ccc", Tel="01111", Mobile="099999" });

        dataGridView1.DataSource = list.ToArray();
    }
} 
```

# jquery - Django if 识别表单类 div

> ID：13376882
> 
> 赞同：0
> 
> 时间：2012-11-14T10:18:00.510
> 
> 标签：jquery, ajax, class, django-forms

简单的问题。我称表单ajax。

```
<body>
<div id="head"><a class="button">CLICK</a></head> - maybe head place
<div id="content"><a class="button">CLICK</a></head> - in content, other place

<form style="opacity:0;" metod="POST">
<input type="text" name="phone">
<input type="{% if id="content" %}text{% else %}hidden{% endif %}" name="phone">
</form>
</body> 
```

我的问题：{% if id="content" %} - 如何实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:38:29.840

默认情况下无法识别模板中的表单。

根据`dir(MyForm())`你只有这些选项：

```
'files': '{}',
'is_bound': 'False',
'error_class': '<class 'django.forms.util.ErrorList'>',
'empty_permitted': 'False',
'fields': '{}',
'initial': '{}',
'label_suffix': ':',
'prefix': 'None',
'_changed_data': 'None',
'data': '{}',
'_errors': 'None',
'auto_id': 'id_%s', 
```

您可以通过这一行确定表单的类名，尽管这是“私有”（您可以通过下划线判断）并且（不幸的是）模板中的表单无法访问：

```
MyForm.__class__.__name__ 
```

因此，您有几个选项可以在模板中标识您的表单。剥那只猫皮的方法很多。我只会介绍我最近使用的一个非常便宜的解决方案：

表格.py

```
class MyForm(forms.Form):
    my_form_name = "one" #add attr to form class
    ... 
```

模板

```
{{form.my_form_name}} 
```

不是超级聪明，但非常健壮。

* * *

很明显，对于您的用例，您可以说：

```
<a class="two"><input type="{% if form.my_form_name = "one" %}text{% else %}hidden{% endif %}"></a> 
```

# c++ - Gdiplus DrawString 在远程桌面上绘制透明文本

> ID：13376883
> 
> 赞同：5
> 
> 时间：2012-11-14T10:18:01.040
> 
> 标签：c++, gdi+, remote-desktop, drawstring

我正在将文本绘制到 DIB 部分的屏幕外位图中，该位图是 32 位深并使用 alpha 通道 (ARGB)。我将像素直接绘制到内存中。然后，我创建一个 Gdiplus Graphics 对象，将我的内存 DC 传递给它，并使用 Graphics::DrawString 绘制文本。这在正常情况下工作正常。然而，在远程桌面上，呈现的文本是完全透明的，也就是说，您可以看到文本所在的位置，而不是绘制任何颜色像素。有谁知道为什么会这样，以及如何解决它？

这是我的drawString例程：

```
void SplashScreen::drawString (MyString &ivText, Gdiplus::RectF &r, 
  Gdiplus::ARGB c, Gdiplus::StringAlignment align, Gdiplus::Font &fnt,
  Gdiplus::Graphics &gfx)
  {
  Gdiplus::StringFormat fmt;
  fmt.SetAlignment (align);
  Gdiplus::SolidBrush brush (c);
  wchar_t *wstr = new wchar_t [ivText.length()+1];
  std::mbstowcs (wstr, ivText.cstr(), ivText.length()+1);
  gfx.DrawString (wstr, ivText.length(), &fnt, r, &fmt, &brush);
  delete wstr;
  } 
```

这就是我创建 DIB 的方式：

```
BITMAPV5HEADER bhd;
memset (&bhd, 0, sizeof (bhd));
bhd.bV5Size = sizeof (BITMAPV5HEADER);
bhd.bV5Width = nWidth;
bhd.bV5Height = -nHeight;  // negative height indicates top-down DIB
bhd.bV5Planes = 1;
bhd.bV5BitCount = 32;
bhd.bV5Compression = BI_BITFIELDS;
bhd.bV5RedMask   = 0x00FF0000;
bhd.bV5GreenMask = 0x0000FF00;
bhd.bV5BlueMask  = 0x000000FF;
bhd.bV5AlphaMask = 0xFF000000; 
m_pBuf = NULL;
m_hBmp = ::CreateDIBSection (m_hDC, (BITMAPINFO *) &bhd, DIB_RGB_COLORS,
   (void **) &m_pBuf, NULL, 0);
if (m_hBmp == NULL || m_pBuf == NULL)
   {
   // error...
   }
HGDIOBJ oldObj = ::SelectObject (m_hDC, m_hBmp);
if (oldObj == NULL)
   {
   // error...
   } 
```

在将文本绘制到 DIB 后，我会

```
gfx.Flush (Gdiplus::FlushIntentionSync); 
```

编辑：您可能还感兴趣的是，最终绘制 DIB 的窗口是 WS_EX_LAYERED 窗口。这是一个启动屏幕，显示应用程序何时启动，并使用计时器和以下方法慢慢淡入和淡出：

```
void SplashScreen::setWindowTransparency (int nAlpha)
  // @param nAlpha: 255 is opaque, 0 is fully transparent.
  {
  HWND hwnd = getHwnd();
  BLENDFUNCTION blend;
  blend.BlendOp = AC_SRC_OVER;
  blend.BlendFlags = 0;
  blend.SourceConstantAlpha = nAlpha;
  blend.AlphaFormat = AC_SRC_ALPHA;
  BOOL bResult = ::UpdateLayeredWindow (hwnd, NULL, NULL, NULL, NULL,
     NULL, RGB (0, 0, 0), &blend, ULW_ALPHA);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T20:39:28.420

我很惊讶这曾经有效。使用 gdi32 绘图会丢失 alpha 信息，据我了解，任何使用 gdi32 在 32 位 DIB 上绘图都会使 DIB 中的 alpha 信息未定义。在这种情况下，GDI+ 必须通过 gdi32，因为您给了它一个 HDC。

要使用 GDI+ 绘制到 RGBA DIB，您需要创建一个由 DIB 内存支持的具有正确像素格式的 GDI+ Bitmap 对象（使用采用像素数据指针的构造函数，例如[this one](http://msdn.microsoft.com/en-us/library/ms536315%28v=vs.85%29.aspx)），然后[从你的位图](http://msdn.microsoft.com/en-us/library/ms536159%28v=vs.85%29.aspx)。这允许 GDI+ 直接绘制到 DIB 的内存并正确处理 alpha 通道，而不是通过 gdi32。

当然，如果您不需要每像素 alpha，您可以通过在混合函数中使用 0 的 AlphaFormat 来简化事情，以忽略 DIB 中的 alpha 通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:20:02.440

我有一个可能的解决方案给你。不确定您要连接到哪个版本的 Windows，但在远程计算机上，您可能必须为终端服务启用 32 位颜色模式。否则您的客户端可能会被限制为 16 位模式。

在服务器上，使用 gpedit.msc，将“限制最大颜色深度”选项配置为 32 位。在 Windows 2008/2012 中，这是在管理模板 - Windows 组件 - 远程桌面服务 - 远程会话环境中。

如果您连接到 Windows XP/Vista/7/8 计算机，我不确定此 gpedit 设置是否可用。

# php - 从远程数据库提供页面

> ID：13376885
> 
> 赞同：1
> 
> 时间：2012-11-14T10:18:02.727
> 
> 标签：php, mysql

我在公共托管服务上有一个 php 站点，但数据库托管在私人专用服务器上。

我想知道使用来自远程数据库的数据提供 php 页面有什么危险，这是否是一个好习惯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:36:03.233

1.  取决于您的连接安全性，但对于基本网站来说已经足够安全了。
2.  不，这当然**不是**一个好习惯。例如，如果由于某种原因与远程数据库的网络连接丢失，它会大大降低您的网站速度 + 您的网站将无法运行。

# computer-vision - 正向映射与反向映射

> ID：13376887
> 
> 赞同：0
> 
> 时间：2012-11-14T10:18:13.433
> 
> 标签：computer-vision, opencl, gpu

我必须做一个图像映射的 gpu 实现（opencl）。

我似乎记得在某处读到前向映射更适合并行实现，这是为什么呢？

有没有人有一些关于如何进行这些映射的示例代码（最好是在 gpu 上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:36:39.380

对我来说，并行实现的直观选择是反向映射，而不是正向映射。

考虑几个源像素映射到单个目标像素的情况。在前向映射中，如果每个源像素都被评估为一个不同的工作项，则必须在目标像素上实现某种同步以协调多次写入。在逆映射中没有同步开销，因为保证只有一个工作项写入每个像素。

示例逆映射内核代码，利用 OpenCL 的 image2d_t 和 sampler_t 概念进行图像处理：

```
__kernel void warp(__read_only image2d_t srcImage,
                   __write_only image2d_t dstImage,
                   sample_r sampler)
{
    int2 dstCoords = (int2){ get_global_id(0), get_global_id(1)};
    int2 srcCoords = my_warp_func_inverse(dstCoords);
    float4 srcPixel = read_imagef(srcImage, sampler, srcCoords);
    write_imagef(dstImage, dstCoords, srcPixel);
} 
```

当然，也有一些例外情况，前向映射可能更可取。例如，如果您有一个非常大的源图像和一个小的目标图像，那么前向映射将允许您将源图像分割成段，然后将它们划分到工作项或工作组中，段数据缓存在 __private 或 __local地址空间。在没有映射函数的先验知识的情况下，逆映射可能需要访问源图像的任何部分，这可能会将您限制在 __global 内存中。

# ruby-on-rails - 如何为rails中的用户支持多单位制

> ID：13376891
> 
> 赞同：0
> 
> 时间：2012-11-14T10:18:18.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想支持我们的用户能够根据他们的语言环境以他们**喜欢的单位系统****输入测量值。**例如，如果他们想输入体重，德国用户输入 [kg]，英国用户输入 [pounds]。

 **是否有任何已知的 gem 或助手，以便在活动记录模型的表单中支持此功能。如果输入的值总是转换为目标单位系统（例如，每个值都保存在 [kg] 中），那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:59:17.437

最好的方法是将所有这些信息存储在数据库中而不更改或转换它。

您应该有一个表**映射**单位系统和国家（或单位系统和用户，如果它是不受国家约束的首选项）。

考虑到您有一个字段“*measured_value*”，您还应该在同一个表中有一个“*unit_system*”。这样每次你想以不同的单位系统显示值时，你只需要查找映射表来计算新的值。

这使您可以将事物分开并以一种允许您在将来进行更改而不会丢失原始值的方式存储。（如果任何转换值随时间发生变化，这尤其重要，即*货币*）**

# ios - UINavigationController - 弹出动画错误

> ID：13376892
> 
> 赞同：10
> 
> 时间：2012-11-14T10:18:22.503
> 
> 标签：ios, objective-c, uinavigationcontroller, uikit

UINavigationController 的动画有问题。我有主从视图。在查看一个按钮时，即打开详细信息视图。详细视图正确打开，标题正常动画和内容滑动。但是当我点击后退按钮时，标题正确动画，细节内容瞬间消失而不是动画。这是问题演示的链接：[https ://www.youtube.com/watch?v=C4UApAhEhx8](https://www.youtube.com/watch?v=C4UApAhEhx8)

打开我使用标准

```
AboutViewController *aboutViewController = [[AboutViewController alloc]   initWithNibName:@"AboutViewController_iPhone" bundle:nil];
[self.navigationController pushViewController:aboutViewController animated:YES]; 
```

我试图用代码弹出视图，没有后退按钮，但有同样的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T09:37:09.350

如果您在代码中的某个地方强制调用其中一个`viewWillAppear`对应方，`YES`或者`NO`不让 iOS 决定，或者如果您不匹配对`[super viewWillAppear:animated]`with的调用，就会发生这种情况`viewDidAppear`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T17:09:23.037

我有同样的问题，米哈的回答为我指明了正确的方向。就我而言，我有一个自定义的 UITabBarController，我在 viewDidAppear 中进行了一些处理。问题是由于`[super viewDidAppear:animated];`我的 viewDidAppear 中没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T21:26:43.823

我和你的问题完全相同，我的问题是我在某些视图控制器的 viewwillappear 方法中设置了标签栏的 selectedindex，这会导致导航栏出现一些错误。

所以我只是简单地将代码移动到viewdidappear，这修复了错误。

希望有一天你会看到这个，即使你可能已经解决了这个问题。所以希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-28T05:57:07.083

请使用代码返回上一个窗口：

**[self.navigationController pushViewController 动画：YES];**

我想它会对你有所帮助。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-28T06:00:18.627

请使用代码返回上一个窗口：

```
[self.navigationController popViewController animated:YES]; 
```

# django - Django rest框架嵌套自引用对象

> ID：13376894
> 
> 赞同：104
> 
> 时间：2012-11-14T10:18:26.857
> 
> 标签：django, django-rest-framework

我有看起来像这样的模型：

```
class Category(models.Model):
    parentCategory = models.ForeignKey('self', blank=True, null=True, related_name='subcategories')
    name = models.CharField(max_length=200)
    description = models.CharField(max_length=500) 
```

我设法使用序列化程序获得所有类别的平面 json 表示：

```
class CategorySerializer(serializers.HyperlinkedModelSerializer):
    parentCategory = serializers.PrimaryKeyRelatedField()
    subcategories = serializers.ManyRelatedField()

    class Meta:
        model = Category
        fields = ('parentCategory', 'name', 'description', 'subcategories') 
```

现在我想做的是让子类别列表具有子类别的内联 json 表示，而不是它们的 id。我将如何使用 django-rest-framework 来做到这一点？我试图在文档中找到它，但它似乎不完整。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-14T10:40:19.367

不要使用 ManyRelatedField，而是使用嵌套的序列化器作为您的字段：

```
class SubCategorySerializer(serializers.ModelSerializer):
    class Meta:
        model = Category
        fields = ('name', 'description')

class CategorySerializer(serializers.ModelSerializer):
    parentCategory = serializers.PrimaryKeyRelatedField()
    subcategories = serializers.SubCategorySerializer()

    class Meta:
        model = Category
        fields = ('parentCategory', 'name', 'description', 'subcategories') 
```

如果您想处理任意嵌套的字段，您应该查看文档的[自定义默认字段](http://django-rest-framework.org/api-guide/serializers.html#customising-the-default-fields)部分。您目前不能直接将序列化程序声明为自身的字段，但您可以使用这些方法来覆盖默认使用的字段。

```
class CategorySerializer(serializers.ModelSerializer):
    parentCategory = serializers.PrimaryKeyRelatedField()

    class Meta:
        model = Category
        fields = ('parentCategory', 'name', 'description', 'subcategories')

        def get_related_field(self, model_field):
            # Handles initializing the `subcategories` field
            return CategorySerializer() 
```

* * *

实际上，正如您所指出的，上述内容并不完全正确。这有点小技巧，但您可以尝试在序列化程序已经声明后添加该字段。

```
class CategorySerializer(serializers.ModelSerializer):
    parentCategory = serializers.PrimaryKeyRelatedField()

    class Meta:
        model = Category
        fields = ('parentCategory', 'name', 'description', 'subcategories')

CategorySerializer.base_fields['subcategories'] = CategorySerializer() 
```

声明递归关系的机制是需要添加的。

* * *

**编辑**：请注意，现在有一个第三方包可以专门处理这种用例。请参阅[djangorestframework-recursive](https://github.com/heywbj/django-rest-framework-recursive)。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-12-01T20:33:38.073

@wjin 的解决方案对我来说非常有用，直到我升级到 Django REST framework 3.0.0，它弃用*了 to_native*。这是我的 DRF 3.0 解决方案，稍作修改。

假设您有一个具有自引用字段的模型，例如名为“回复”的属性中的线程注释。您有此评论线程的树表示，并且您想要序列化该树

首先，定义可重用的 RecursiveField 类

```
class RecursiveField(serializers.Serializer):
    def to_representation(self, value):
        serializer = self.parent.parent.__class__(value, context=self.context)
        return serializer.data 
```

然后，对于您的序列化程序，使用 RecursiveField 序列化“回复”的值

```
class CommentSerializer(serializers.Serializer):
    replies = RecursiveField(many=True)

    class Meta:
        model = Comment
        fields = ('replies, ....) 
```

Easy peasy，您只需要 4 行代码即可获得可重用的解决方案。

注意：如果您的数据结构比树更复杂，例如有 *向无环图*（FANCY！），那么您可以尝试@wjin 的包——请参阅他的解决方案。但是对于基于 MPTTModel 的树，我对此解决方案没有任何问题。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2016-03-09T16:53:04.167

另一个适用于 Django REST Framework 3.3.2 的选项：

```
class CategorySerializer(serializers.ModelSerializer):
    class Meta:
        model = Category
        fields = ('id', 'name', 'parentid', 'subcategories')

    def get_fields(self):
        fields = super(CategorySerializer, self).get_fields()
        fields['subcategories'] = CategorySerializer(many=True)
        return fields 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-06-14T04:12:29.637

Late to the game here, but here's my solution. Let's say I'm serializing a Blah, with multiple children also of type Blah.

```
 class RecursiveField(serializers.Serializer):
        def to_native(self, value):
            return self.parent.to_native(value) 
```

Using this field I can serialize my recursively-defined objects that have many child-objects

```
 class BlahSerializer(serializers.Serializer):
        name = serializers.Field()
        child_blahs = RecursiveField(many=True) 
```

* * *

I wrote a recursive field for DRF3.0 and packaged it for pip [https://pypi.python.org/pypi/djangorestframework-recursive/](https://pypi.python.org/pypi/djangorestframework-recursive/)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2016-03-14T18:05:31.240

我能够使用`serializers.SerializerMethodField`. 我不确定这是否是最好的方法，但对我有用：

```
class CategorySerializer(serializers.ModelSerializer):

    subcategories = serializers.SerializerMethodField(
        read_only=True, method_name="get_child_categories")

    class Meta:
        model = Category
        fields = [
            'name',
            'category_id',
            'subcategories',
        ]

    def get_child_categories(self, obj):
        """ self referral field """
        serializer = CategorySerializer(
            instance=obj.subcategories_set.all(),
            many=True
        )
        return serializer.data 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-10-11T15:57:02.760

另一种选择是在序列化模型的视图中递归。这是一个例子：

```
class DepartmentSerializer(ModelSerializer):
    class Meta:
        model = models.Department

class DepartmentViewSet(ModelViewSet):
    model = models.Department
    serializer_class = DepartmentSerializer

    def serialize_tree(self, queryset):
        for obj in queryset:
            data = self.get_serializer(obj).data
            data['children'] = self.serialize_tree(obj.children.all())
            yield data

    def list(self, request):
        queryset = self.get_queryset().filter(level=0)
        data = self.serialize_tree(queryset)
        return Response(data)

    def retrieve(self, request, pk=None):
        self.object = self.get_object()
        data = self.serialize_tree([self.object])
        return Response(data) 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-04-05T19:14:10.897

我最近遇到了同样的问题，并提出了一个迄今为止似乎有效的解决方案，即使对于任意深度也是如此。解决方案是对 Tom Christie 的一个小修改：

```
class CategorySerializer(serializers.ModelSerializer):
    parentCategory = serializers.PrimaryKeyRelatedField()

    def convert_object(self, obj):
        #Add any self-referencing fields here (if not already done)
        if not self.fields.has_key('subcategories'):
            self.fields['subcategories'] = CategorySerializer()      
        return super(CategorySerializer,self).convert_object(obj) 

    class Meta:
        model = Category
        #do NOT include self-referencing fields here
        #fields = ('parentCategory', 'name', 'description', 'subcategories')
        fields = ('parentCategory', 'name', 'description')
#This is not needed
#CategorySerializer.base_fields['subcategories'] = CategorySerializer() 
```

我不确定它是否可以在**任何**情况下可靠地工作，但......

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-04-15T13:26:22.500

我想我会加入的乐趣！

通过[wjin](https://stackoverflow.com/a/24216503/4021086)和[Mark Chackerian](https://stackoverflow.com/a/27236783/4021086)，我创建了一个更通用的解决方案，它适用于直接树状模型和具有直通模型的树结构。我不确定这是否属于它自己的答案，但我想我不妨把它放在某个地方。我包括了一个 max_depth 选项，它可以防止无限递归，在最深的层次上，孩子被表示为 URLS（如果你不希望它不是 url，那就是最后的 else 子句）。

```
from rest_framework.reverse import reverse
from rest_framework import serializers

class RecursiveField(serializers.Serializer):
    """
    Can be used as a field within another serializer,
    to produce nested-recursive relationships. Works with
    through models, and limited and/or arbitrarily deep trees.
    """
    def __init__(self, **kwargs):
        self._recurse_through = kwargs.pop('through_serializer', None)
        self._recurse_max = kwargs.pop('max_depth', None)
        self._recurse_view = kwargs.pop('reverse_name', None)
        self._recurse_attr = kwargs.pop('reverse_attr', None)
        self._recurse_many = kwargs.pop('many', False)

        super(RecursiveField, self).__init__(**kwargs)

    def to_representation(self, value):
        parent = self.parent
        if isinstance(parent, serializers.ListSerializer):
            parent = parent.parent

        lvl = getattr(parent, '_recurse_lvl', 1)
        max_lvl = self._recurse_max or getattr(parent, '_recurse_max', None)

        # Defined within RecursiveField(through_serializer=A)
        serializer_class = self._recurse_through
        is_through = has_through = True

        # Informed by previous serializer (for through m2m)
        if not serializer_class:
            is_through = False
            serializer_class = getattr(parent, '_recurse_next', None)

        # Introspected for cases without through models.
        if not serializer_class:
            has_through = False
            serializer_class = parent.__class__

        if is_through or not max_lvl or lvl <= max_lvl: 
            serializer = serializer_class(
                value, many=self._recurse_many, context=self.context)

            # Propagate hereditary attributes.
            serializer._recurse_lvl = lvl + is_through or not has_through
            serializer._recurse_max = max_lvl

            if is_through:
                # Delay using parent serializer till next lvl.
                serializer._recurse_next = parent.__class__

            return serializer.data
        else:
            view = self._recurse_view or self.context['request'].resolver_match.url_name
            attr = self._recurse_attr or 'id'
            return reverse(view, args=[getattr(value, attr)],
                           request=self.context['request']) 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-03-09T16:28:00.583

这是对适用于 drf 3.0.5 和 django 2.7.4 的 caipirginka 解决方案的改编：

```
class CategorySerializer(serializers.ModelSerializer):

    def to_representation(self, obj):
        #Add any self-referencing fields here (if not already done)
        if 'branches' not in self.fields:
            self.fields['subcategories'] = CategorySerializer(obj, many=True)      
        return super(CategorySerializer, self).to_representation(obj) 

    class Meta:
        model = Category
        fields = ('id', 'description', 'parentCategory') 
```

请注意，第 6 行中的 CategorySerializer 是使用对象和 many=True 属性调用的。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-05-01T01:08:27.007

此解决方案与此处发布的其他解决方案几乎相似，但在根级别的子级重复问题方面略有不同（如果您认为这是一个问题）。举个例子

```
class RecursiveSerializer(serializers.Serializer):
    def to_representation(self, value):
        serializer = self.parent.parent.__class__(value, context=self.context)
        return serializer.data

class CategoryListSerializer(ModelSerializer):
    sub_category = RecursiveSerializer(many=True, read_only=True)

    class Meta:
        model = Category
        fields = (
            'name',
            'slug',
            'parent', 
            'sub_category'
    ) 
```

如果你有这个观点

```
class CategoryListAPIView(ListAPIView):
    queryset = Category.objects.all()
    serializer_class = CategoryListSerializer 
```

这将产生以下结果，

```
[
{
    "name": "parent category",
    "slug": "parent-category",
    "parent": null,
    "sub_category": [
        {
            "name": "child category",
            "slug": "child-category",
            "parent": 20,  
            "sub_category": []
        }
    ]
},
{
    "name": "child category",
    "slug": "child-category",
    "parent": 20,
    "sub_category": []
}
] 
```

这里的`parent category`has a`child category`和 json 表示正是我们想要的。

*`child category`但是您可以看到在根级别有重复。*

正如一些人在上面发布的答案的评论部分中询问*我们如何在根级别停止这种子重复*，只需过滤您`parent=None`的查询集，如下所示

```
class CategoryListAPIView(ListAPIView):
    queryset = Category.objects.filter(parent=None)
    serializer_class = CategoryListSerializer 
```

它将解决问题。

注意：这个答案可能与问题没有直接关系，但问题在某种程度上是相关的。这种使用方法也`RecursiveSerializer`很昂贵。如果您使用其他倾向于性能的选项，那就更好了。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-01-22T14:17:36.430

使用 Django REST framework 3.3.1，我需要以下代码来将子类别添加到类别中：

模型.py

```
class Category(models.Model):

    id = models.AutoField(
        primary_key=True
    )

    name = models.CharField(
        max_length=45, 
        blank=False, 
        null=False
    )

    parentid = models.ForeignKey(
        'self',
        related_name='subcategories',
        blank=True,
        null=True
    )

    class Meta:
        db_table = 'Categories' 
```

序列化程序.py

```
class SubcategorySerializer(serializers.ModelSerializer):

    class Meta:
        model = Category
        fields = ('id', 'name', 'parentid')

class CategorySerializer(serializers.ModelSerializer):
    subcategories = SubcategorySerializer(many=True, read_only=True)

    class Meta:
        model = Category
        fields = ('id', 'name', 'parentid', 'subcategories') 
```

# mysql - 更快的 InnoDB 写入？

> ID：13376906
> 
> 赞同：3
> 
> 时间：2012-11-14T10:19:15.850
> 
> 标签：mysql, performance, mysqldump

我即将用全新的硬件替换旧服务器，但发生了一些奇怪的事情。

*   旧*机器*是**AMD Athlon 64 X2 5600+ @ 1GHz**，**2 GB RAM**运行 Debian 4.0 **32 位**和 RAID1 中的 2x380 GB（左右）HDD
*   新*机器*是**Intel i7-3770 @ 3.4GHz**，**32 GB RAM**，运行 Debian 6.0 **64 位**，RAID1 中的 2x3TB HDD（6Gbps SATA，7200rpm）

加载 SQL 转储（见下文）时，新服务器忙了大约**32 分钟**！新安装的服务器无事可做。另一方面，即使*旧*服务器忙于其他事情，它也减少了*32%**的**时间。***怎么可能？**

两台机器都使用 Debian 最小镜像安装，然后根据需要安装软件包。

[旧服务器](http://pastebin.com/MuqNAjNJ)和[新服务器](http://pastebin.com/6UqFHeu7)的my.cnf 设置都使用`innodb_file_per_table`并且在新服务器`innodb_buffer_pool_size`上要大得多（16 GB 对 0.5 GB）。

有关 SQL 转储的数据：

*   加载一个全新的数据库 ( `CREATE DATABASE`)
*   16张桌子
*   单个大表（大约 1,2M 行 / 240MB SQL 数据），速度很慢
*   带有外键的 InnoDB
*   转储用途`LOCK TABLES "xxx" WRITE; ALTER TABLE "xxx" DISABLE KEYS;`（由 生成`mysqldump`）

任何想法如何加快那件事？

**更新**

我注意到旧机器上使用了一个专用的 50GB ext3 分区，`/var`而新机器上有一个 1TB ext4 根分区（包括`/var`）和一个 2TB ext4 上`/home`。MySQL 数据`/var/lib/mysql/`在这两种情况下都存在。

**更新 2**

显然是硬盘缓慢地处理小块：

```
# dd if=/dev/zero of=test bs=1024 count=100 oflag=direct,sync
102400 bytes (102 kB) copied, 2.49824 s, 41.0 kB/s 
```

旧服务器在相同的测试中达到**1.1 MB/s 。**

新服务器可以处理更大的块：

```
# dd if=/dev/zero of=test bs=1024k count=100 oflag=direct,sync
104857600 bytes (105 MB) copied, 7.11175 s, 14.7 MB/s 
```

`hdparm`说写缓存在两个驱动器上。分区表对齐问题？查看[我的分区表](http://pastebin.com/SP8NMjjk)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:32:57.797

好的，我找到了原因，希望这对其他人有帮助。

**ext4**在该系统上启用了“障碍”，导致小型写入变得非常慢。这种写入对于数据库文件是正常的。

禁用障碍可以提高性能，并且在大约 8 分钟内加载相同的 SQL 转储（快 4 倍）。

```
mount -o remount,barrier=0 / 
```

禁用障碍会带来 fs 完整性的缺点，所以首先考虑一下......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:59:47.817

您在新配置文件的末尾有这一行：

```
!includedir /etc/mysql/conf.d/ 
```

假设其中的文件与以下文件相同：[https://github.com/biapy/howto.biapy.com/tree/master/mysql](https://github.com/biapy/howto.biapy.com/tree/master/mysql)，这意味着它正在添加您可能想要查看的这些设置（以及其他设置） ：

基础优化.cnf：

```
log_bin = /var/log/mysql/mysql-bin.log
sync_binlog = 1 
```

# batch-file - PSExec 运行远程批处理文件

> ID：13376907
> 
> 赞同：1
> 
> 时间：2012-11-14T10:19:17.730
> 
> 标签：batch-file, remote-desktop, psexec

我想用 PSExec 远程运行一个批处理文件，所以我的代码如下所示：

```
cd C:\PsTools
PsExec.exe \\<computer> -u <user> -p <password> -s -i <"pathToBatchFile\batch.bat">  
exit 
```

在我调用远程计算机上的批处理文件后，远程计算机上的应用程序正在 SYSTEM 帐户下启动。我想在另一个帐户下启动它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:23:15.423

你不应该使用`-s`开关。

从[文档](http://technet.microsoft.com/en-gb/sysinternals/bb897553)：

> -s 在系统帐户中运行远程进程。

# jquery - jquery 没有被点击

> ID：13376912
> 
> 赞同：0
> 
> 时间：2012-11-14T10:19:41.173
> 
> 标签：jquery

我有一个清单

**HTML**

```
<a href="#" class="chosenflag" data-flag="de"><img class="flag" src="" alt="" /></a>
<ul class="choices">
        <li><a href="#" data-flag="en"><img class="flag" src="/img/flag/United Kingdom.png" alt="" /></a></li>
        <li><a href="#" data-flag="de"><img class="flag" src="/img/flag/Germany.png" alt="" /></a></li>
        <li><a href="#" data-flag="es"><img class="flag" src="/img/flag/Spain.png" alt="" /></a></li>
        <li><a href="#" data-flag="fr"><img class="flag" src="/img/flag/France.png" alt="" /></a></li>
        <li><a href="#" data-flag="it"><img class="flag" src="/img/flag/Italy.png" alt="" /></a></li>
    </ul> 
```

我正在尝试在 jQuery 中编写仅允许对所有内容执行操作但数据标志与 .chosenflag 类匹配的列表元素的能力

我尝试了以下但无济于事

**jQuery**

```
var compareflag = $('.chosenflag').attr('data-flag');
$('.choices li:not(.chosenflag[data-flag="'+compareflag+'") a').click(function(e){
        e.preventDefault();
        console.log("clicked");
    }); 
```

[jsFiddle](http://jsfiddle.net/mynameisdonald/XCQdR/1/) 有人可以帮我解决我的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:24:15.250

您不能在事件处理程序的声明期间使用变量，因为它将使用赋值的值，然后永远不会改变 - 它以后总是会寻找相同的东西。相反，*在*事件处理程序中进行比较。很难解释我的意思，但这是代码和工作链接......

```
$(".choices li a").click(function(e){
    var compareflag = $(".chosenflag").data("flag");
    if ($(this).data("flag") != compareflag) {
        e.preventDefault();
        alert("clicked");
    }
});​ 
```

**[jsFiddle 链接](http://jsfiddle.net/XCQdR/12/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:25:49.907

```
var compareflag = $('.chosenflag').attr('data-flag');

$('.choices li a:not([data-flag="'+compareflag+'"])').click(function(e){   
    alert("clicked");
    e.preventDefault();
}); 
```

工作示例：http: [//jsfiddle.net/XCQdR/10/](http://jsfiddle.net/XCQdR/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:26:11.693

您可以使用`:has`过滤器：

```
'.choices li:has(a[data-flag="'+compareflag+'"])' 
```

[JS Fiddle 的示例。](http://jsfiddle.net/XCQdR/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T10:27:19.273

正如另一个答案中提到的，您缺少`]`，但您的选择器也是错误的。您在 上使用`not`选择器`li`，并将`.chosenflag`类传递给它，它应该在 上`a`，没有`.chosenflag`类，例如：

```
$('.choices li a:not([data-flag="' + compareflag + '"])') 
```

[工作小提琴](http://jsfiddle.net/XCQdR/9/)

# eclipse - 如何使用 BIRT 更改甘特图中的时间间隔？

> ID：13376913
> 
> 赞同：0
> 
> 时间：2012-11-14T10:19:45.170
> 
> 标签：eclipse, report, birt, gantt-chart

我在 Eclipse 中使用 BIRT 来创建一个报告，其中包含显示员工任务的甘特图。

我的数据源具有以下结构：

1.  任务名称（字符串）
2.  任务开始（日期时间）
3.  任务结束。（约会时间）

我想添加一些参数（例如年/月/周/日），以便时间间隔（水平轴）发生变化并显示更多“放大”或“缩小”的视图。我想我应该制作 4 个 DataSet 参数和 4 个 Report 参数并以某种方式链接它们。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:51:41.700

打开 BIRT 帮助菜单并搜索“参数”

您应该找到“如何创建基本报告参数”，这将帮助您创建报告参数。报告将放大或缩小参数描述的数据集

```
SELECT *

FROM source

WHERE date >= ?
AND date <= ? 
```

# git - 在同一个 svn-remote 中初始获取后添加 git 分支

> ID：13376917
> 
> 赞同：18
> 
> 时间：2012-11-14T10:19:55.967
> 
> 标签：git, svn, git-svn

我正在使用 git-svn 来处理 svn 存储库。我不想要整个回购，因为它包含很多遗产，其中包含二进制文件。我只跟踪一些目录。

这是我的电流`.git/config`，它工作正常。

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[svn-remote "svn"]
    url = https://svn.example.com/repository
    fetch = trunk/Python:refs/remotes/trunk
    branches = branches/{stage,prod,stage_with_proxy}/ucapi/:refs/remotes/*
    branches = branches/{active}/Python/:refs/remotes/* 
```

现在我想添加一个新分支：

```
 branches = branches/{fuze_node}/:refs/remotes/* 
```

但是在执行`git svn fetch`新分支时对 git 不可见。就好像该行不在配置中一样。

* * *

*我知道这可以通过一个新的 svn-remote 来完成，但我不想走那条路。*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T16:15:10.833

对于每个 svn-remote git-svn 将*最新获取的修订*存储在`.git/svn/.metadata`文件中。它永远不会获取小于该值的修订。这就是为什么它不获取您添加到配置中的分支的原因；git-svn 认为`fuze_node`分支已经转换。

但是，您可以在不重新克隆整个存储库的情况下获取此分支：

1.  添加另一个 svn-remote，其中包含您需要获取的所有分支；
2.  删除旧的 svn-remote；
3.  运行`git svn fetch -R newer-svn-remote`以从添加的分支中获取修订。

您的配置应如下所示：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
# [svn-remote "svn"]
#    url = https://svn.example.com/repository
#    fetch = trunk/Python:refs/remotes/trunk
#    branches = branches/{stage,prod,stage_with_proxy}/ucapi/:refs/remotes/*
#    branches = branches/{active}/Python/:refs/remotes/*
[svn-remote "newer-svn-remote"]
    url = https://svn.example.com/repository
    fetch = trunk/Python:refs/remotes/trunk
    branches = branches/{stage,prod,stage_with_proxy}/ucapi/:refs/remotes/*
    branches = branches/{active}/Python/:refs/remotes/*
    branches = branches/{fuze_node}/:refs/remotes/* 
```

请注意，您必须指定与旧 svn-remote 中完全相同的分支映射：

```
 branches = branches/{stage,prod,stage_with_proxy}/ucapi/:refs/remotes/* 
```

也就是说，**refs/remotes/***仍应位于映射的右侧。否则 git-svn 无法检测到已转换的提交并尝试再次获取它们。

* * *

实际上还有另一种方法可以达到同样的效果。不过，它涉及对内部 git-svn 文件的一些操作。

您可以只添加必要的分支`.git/config`并更新`.git/svn/.metadata`文件，因此*最新获取的修订版*变为 0：

```
[svn-remote "svn"]
    reposRoot = https://svn.example.com/repository
    uuid = 8a6ef855-a4ab-4527-adea-27b4edd9acb6
    branches-maxRev = 0
    tags-maxRev = 0 
```

之后`git svn fetch`将只获取必要的修订。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T14:00:03.143

我找到了一个更简单的方法，它不需要编辑任何配置文件。

您只需要要添加到本地 git-svn 存储库的分支中最后一次提交的修订号。

如果您有新分支的 SVN 检出并安装了 TortoiseSVN，您可以右键单击此文件夹并使用“TortoiseSVN / 显示日志”。

记下最顶层的提交（例如 45065）。

现在在 Git Bash 中使用以下命令：

```
git svn fetch -r45065 
```

注意：您需要将编号替换为`45065`您的提交编号。
git 现在会将新的远程分支拉到您的本地存储库中。

You can then check it out with creating a local Branch. I'm using Git Extension for checking out the new branch, using "Remote-Branch" and the option "Create local branch with name: ...".
Hint: You can remove the "origin/" prefix from your local branch name, as this avoids the warning "refname 'origin/V8.0' is ambiguous.".

# jquery - jQuery UI + SlickGrid 错误

> ID：13376920
> 
> 赞同：1
> 
> 时间：2012-11-14T10:20:00.067
> 
> 标签：jquery, jquery-ui, slickgrid

[我从http://mleibman.github.com/SlickGrid/examples/example4-model.html](http://mleibman.github.com/SlickGrid/examples/example4-model.html)添加到我的页面 SlickGrid

我使用： - jquery-1.8.2.min.js - jquery-ui-1.9.1.custom.js - jquery.event.drag-2.0.min.js

我有一个错误：

```
Error: cannot call methods on sortable prior to initialization; attempted to call method 'destroy' 
```

所以我将 jQuery UI 更改为 1.8.16，现在我没有这个错误，但我有错误：

```
Accordion is not a function 
```

当我使用手风琴时。当使用 Autocomplete() 或 Dialog() 我也有这个错误。

所以我必须使用 jQuery UI 1.9.1，但是如何使用 Slick Grid？

> **编辑：（**由 ryan niemeyer 改编的小提琴）
> 
> 使用 1.8.13 的示例（作品） [http://jsfiddle.net/A9NrP/404/](http://jsfiddle.net/A9NrP/404/)
> 
> 使用 1.9.1 的示例（失败） [http://jsfiddle.net/A9NrP/405/](http://jsfiddle.net/A9NrP/405/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:26:33.823

请参阅此处的拉取请求，它应该可以解决您的问题：[https ://github.com/mleibman/SlickGrid/pull/462](https://github.com/mleibman/SlickGrid/pull/462)

# php - facebook APP自动登录

> ID：13376922
> 
> 赞同：0
> 
> 时间：2012-11-14T10:20:07.460
> 
> 标签：php, facebook, oauth-2.0, facebook-login

我制作了一个 facebook 应用程序，但我不确定我是否正确理解了某些内容。

我一直在使用很多代码，试图得到这个窗口：[图像示例](http://i50.tinypic.com/wb6stk.png)

但是现在我一直在我的应用程序设置下对此感到困惑[我的设置](http://i48.tinypic.com/24lrgw2.png)

我已经提交了所有数据，但是当我作为测试人员进入应用程序时，我没有看到这个窗口对话框。

也许这与“应用程序详细信息”下有关。由于它只是在测试阶段，我还没有按下“提交应用程序详细信息页面”。

谁能帮我清理一下这个区域？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:47:20.260

> 我已经提交了所有数据，但是当我作为测试人员进入应用程序时，我没有看到这个窗口对话框。

这些设置仅适用于从应用中心访问您的应用的用户。（它们曾经也用于经过身份验证的推荐，但它们已被弃用，不应再在新应用中使用。）

但是，每当用户通过其他方式（Facebook 页面上的页面选项卡、画布应用程序）访问您的应用程序时，您必须自己触发登录并在使用`scope`参数时指定权限。

请熟悉在平台上构建应用程序的基础知识和身份验证机制：

[https://developers.facebook.com/docs/guides/canvas/](https://developers.facebook.com/docs/guides/canvas/)

[https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

[https://developers.facebook.com/docs/concepts/login/](https://developers.facebook.com/docs/concepts/login/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:27:19.857

只是为了补充 CBroe 所说的，正如 facebook 宣布的那样，在以下列表中，他们将在 2013 年 2 月 6 日弃用“经过身份验证的推荐”（在应用程序权限选项卡中）。所以不要使用经过身份验证的推荐并进行身份验证用户通过代码（js-sdk 或 php-sdk 等）

[https://developers.facebook.com/blog/post/2012/11/07/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/11/07/platform-updates--operation-developer-love/)

# delphi - 组件发布的属性，如 TFont.Name

> ID：13376927
> 
> 赞同：0
> 
> 时间：2012-11-14T10:20:35.027
> 
> 标签：delphi, components

我为示例组件编写了以下单元：

```
unit Test;

interface

uses
  System.SysUtils, System.Classes, System.Variants, VCL.Dialogs;

type
  TTest = class(TComponent)
  private
    fName: TStringList;
    { Private declarations }
  public
    { Public declarations }
    constructor Create(AOwner: TComponent); Override;
    destructor Destroy; override;
  published
    { Published declarations }
    property Names: TStringList read fName;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [TTest]);
end;

{TTest }

constructor TTest.Create(AOwner: TComponent);
begin
  inherited;
  fName := TStringList.Create;
  for i:= 1 to 100 do
      fName.Add(IntToStr(i));
end;

destructor TTest.Destroy;
begin
  fName.Free;
  inherited;
end;

end. 
```

现在，当我在 Delphi 上安装它时，在 Object Inspector 中我有一个名为“Names”的属性，我应该双击它，然后一个对话框显示 TStringList 存储在 Name 上的项目。

我想在其他组件（如 TEdit 等）中将此属性设为 Font.Name，当单击 Name 属性时，会显示一个列表，用户可以从中选择一个项目，然后将该项目分配给该属性并显示为对象检查器中的属性值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T10:23:29.573

您需要为您的属性编写一个属性编辑器。这里有一些链接供您阅读，因为这不是一个简单的答案：-

[http://www.drbob42.com/delphi/property.htm](http://www.drbob42.com/delphi/property.htm)

[http://delphi.about.com/library/bluc/text/uc092501a.htm](http://delphi.about.com/library/bluc/text/uc092501a.htm)

[http://www.delphicorner.f9.co.uk/articles/comps1.htm](http://www.delphicorner.f9.co.uk/articles/comps1.htm)

# python - 为什么 scipy.io.loadmat 无法过滤除此生成器函数的第一次迭代之外的所有变量？

> ID：13376930
> 
> 赞同：3
> 
> 时间：2012-11-14T10:20:45.217
> 
> 标签：python, scipy

如果我们考虑以下生成器函数...

```
def loadrun(runs, varnames=None):
    for fle in runs:
        yield loadmat(fle, variable_names=varnames) 
```

我们称之为...

```
vnames = ['targetpos', 'cuepos', 'soa', 'response']
trials = loadrun(datafiles, vnames)  # datafiles is a list of paths to files 
```

列出结果字典的长度时，我们得到以下输出：

```
[in] for t in trials:
         print len(t)

[out] 7
      128
      128
      128
      128
      128
      128
      128 
```

所有`.mat`文件都包含 124 个变量，因此只有第一个输出是正确的。是什么赋予了？

**编辑**

我进一步缩小了问题的范围。似乎`loadmat`'字段在**任何循环**`variable_names`中的第一次迭代后都失败了。知道这里发生了什么吗？

 **```
for df in datafiles:
    print len(loadmat(df, variable_names=vnames))

[out] 7
      128
      128
      128
      128
      128
      128
      128 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:56:32.130

`scipy.io.loadmat`正在顽皮^([1])并*改变*传递给的列表`variable_names`。在第一次调用之后`loadmat`，`varnames`是空列表。

您可以通过定义一个临时变量来解决此问题`_varnames`：

```
def loadrun(runs, varnames = None):
    for fle in runs:
        _varnames = None if varnames is None else varnames[:]
        yield sio.loadmat(fle, variable_names = _varnames) 
```

* * *

例如：

```
import string
import scipy.io as sio
import numpy as np

letters = string.ascii_lowercase
datafiles = ['/tmp/data{i:d}.mat'.format(i = i) for i in range(3)]

def loadrun(runs, varnames = None):
    for fle in runs:
        _varnames = None if varnames is None else varnames[:]
        yield sio.loadmat(fle, variable_names = _varnames)

def create_datafiles():
    for filename in datafiles:
        arr = np.arange(9).reshape((3, 3))
        mdict = {letter : arr for letter in letters}
        sio.savemat(filename, mdict = mdict)

create_datafiles()
vnames = ['a', 'c', 'd']
trials = loadrun(datafiles, vnames)
for t in trials:
    print(t.keys()) 
```

* * *

实际上，问题似乎起源于 mio4.py 和 mio5.py，其中`MatFile4Reader`并`MatFile5Reader`调用了`remove`on 方法`variable_names`：

```
def get_variables(self, variable_names=None):
    while not self.end_of_stream():
        ...
        if variable_names:
            variable_names.remove(name)
            if len(variable_names) == 0:
                break 
```**

# r - 将句子中的单词分开

> ID：13376932
> 
> 赞同：0
> 
> 时间：2012-11-14T10:20:48.013
> 
> 标签：r

我有一个字符向量：

```
5563,KIAA0006 gene,D13631_s_at                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
5566,Fatty acids omega-hydroxylase (cytochrome P-450HKV),D13705_s_at 
....... 
```

R 将每一行读取为一个单词。（实际上单词是 3 或 4 ，用逗号分隔）我想创建一个仅包含每行中最后一个单词的元素。（例如 D13631_s_at）

我不知道从哪里开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:30:34.853

如果文件中的数据可以这样做：

```
spam = read.table("file.csv", header = FALSE, sep = ",")
spam[,3] 
```

只得到第三列。对于您的示例，这会产生：

```
> spam[,3]
[1] D13631_s_at   D13705_s_at  
Levels: D13631_s_at   D13705_s_at 
```

# jsp - JSP页面编译“标签无法解析为类型”

> ID：13376936
> 
> 赞同：1
> 
> 时间：2012-11-14T10:20:56.917
> 
> 标签：jsp, jar, jsp-tags, weblogic-10.x

我正在使用作为**jar 文件**部署的自定义标签库。在 jsp 中使用此实验室时，我遇到以下问题： *_tag 无法解析为此特定 JSP 中未使用的标签的类型。

我使用 websphere 10.3 作为我的应用程序服务器。任何想法如何解决这个问题？Mayby 我可以预编译标签文件并将它们打包到我的 taglib jar 中吗？如何做到这一点？

例子：

```
<%@ taglib prefix="e" uri="http://our.domain.com/tags-e" %> 
<e:div  styleId="xxx" action="prototype" autoload="false"> 
    json content is loaded here 
</e:div> 
```

在此示例中，e:div 已编译，并且此页面上未使用 e:link 标记存在错误。提前感谢您的任何提示。

# wcf - 处理发送到 WCF 3.5 的 XML 的最佳方法是什么

> ID：13376942
> 
> 赞同：0
> 
> 时间：2012-11-14T10:21:12.573
> 
> 标签：wcf, .net-3.5, xml-parsing

我必须在 3.5 中开发 WCF 应用程序。输入将以 XML 的形式发送，响应也将以 XML 的形式发送。ASP.NET 应用程序将使用 WCF 并以 XML 格式发送/接收数据。

现在，根据我的理解，当从 ASP.NET 应用程序使用 WCF 时，我们只需添加对服务的引用，创建服务的对象，将所有必要的数据（WCF 中的数据成员）打包到输入对象（对象的数据合同）并调用必要的函数。

碰巧 ASP.NET 应用程序是由另一方开发的，他们一心想要接收和发送 XML 格式的数据。我可以从中看出，WCF 会将 XML 字符串（单个数据成员字符串类型）作为输入，并发送一个 XML 字符串（同样是单个数据成员字符串类型）作为输出。我之前创建了 WCF 应用程序，其中请求和响应在被 jQuery ajax 调用使用时以 XML/JSON 格式发送出去。在这些情况下，XML 标记会自动映射到定义的不同数据成员。

在这种情况下我应该采取什么方法？我应该只将字符串作为输入（基本上是 XML 字符串）还是 WCF/.NET 3.5 有什么方法可以自动将 XML 标记与请求和响应的数据成员映射，并且我不需要单独解析 XML 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:50:32.430

简而言之，没有。

但是，您可以“壳”您自己的实例`DataContractSerializer`来反序列化/序列化来自调用者想要的 XML 字符串的实际对象。然后你仍然可以自由地在你的末端编写数据合约类型，这些类型反映了调用者想要使用的那些。

但是，如果他们希望您能够将其加入服务的 WSDL，那么他们就找错了树——您需要分别发布这些类型的模式（您可以使用`XsdDataContractExporter`来做到这一点） .

另一方面，令人**深感**不安的是，这些人希望您开发一个 WCF 服务，该服务只是简单地处理 XML 字符串。鉴于 WCF 无论如何都会使用 XML 作为消息格式，所有这些 XML 都必须作为裸文本（编码或 CDATA）发送，因此不会对 XML 进行消息级别的验证。无论提供的 XML 字符串是否为 gobbledegook，您的代码都会收到请求。这是令人难以置信的hacky。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:58:40.387

在其正常配置中，WCF 将通过 XML 格式发送数据，因此您无需对此进行任何操作。据我了解，该方有一些`string`带有 XML 的文字，并希望将其直接传递给您，并且他们希望直接从您那里接收 XML。发送由 XML 包装的 XML 数据会很尴尬。这样，您的服务代码将不得不解析该 XML，而不是直接使用对象图。我会给他们一根手指，告诉他们是否想直接使用 XML，而不是他们的问题。他们试图把这个问题变成你的问题，这是不公平的。您只需坚持良好的开发实践。

# windows-8 - Windows 8 的 Visual Studio 2012 Express 中未启用 TypeScript

> ID：13376943
> 
> 赞同：3
> 
> 时间：2012-11-14T10:21:17.597
> 
> 标签：windows-8, visual-studio-2012, typescript

我安装了 3 个 Express 版本的 Visual Studio 2012：

*   网络
*   视窗桌面
*   视窗 8

我已经通过 MSI 安装了 TypeScript，但它只在 Web 版中启用。在其他 2 个版本中，它没有显示在工具和扩展下，并且当我选择添加新项目时没有可用的 TypeScript 项目。

当我从 C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0 运行 TypeScriptLanguageService.vsix 时，它告诉我它已经为所有适用产品安装。

从我的网络搜索中，我不清楚它是否可以在 Windows 8 版本中使用。我一直在 Web 版本中使用它并喜欢它，我真的很想在 Javascript Windows 8 商店应用程序中尝试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:05:15.550

查看[插件下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=34790)上的系统要求。它们明确列出了所有受支持的 VS 版本。似乎是故意选择不支持其他 Express 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T13:11:22.533

顺便说一句，Typescript 已经为 Visual Studio Express 2012 for Web 启用。

# c# - 使用 EnvDTE 以编程方式将函数添加到现有 C# 文件

> ID：13376944
> 
> 赞同：8
> 
> 时间：2012-11-14T10:21:20.313
> 
> 标签：c#, visual-studio-2010, envdte

我想以编程方式将一个函数（一个 TestMethod）添加到现有的 C# 文件中。经过一番谷歌搜索后，我找到了库`EnvDTE`和`CodeModel.AddFunction`-Method，但我找不到我想要的一个很好的例子。

我想在新创建的函数中添加一个带有代码的函数以及一个属性。像这样的东西：

```
/// <summary>
/// Documentation
/// </summary>
[TestMethod]
public void TestMethod1()
{
    string test = Helper.CodeExample();
} 
```

谁能告诉我如何做到这一点的例子？

**编辑**：我想编辑一个 C# 文件，就像你编辑一个文本文件一样。我知道您可以使用 StreamWriter 来做到这一点，但是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:27:59.127

EnvDTE 可能是要走的路。您可以开发 VisualStudio 加载项，然后修改 Exec 方法。在此方法中，您必须获取活动文档及其 ProjectItem。在这里您可以找到包含大量 CodeElement 的 CodeModel。在这些元素中，您必须找到 CodeNamespace，并在此元素中找到 CodeClass。这是响应 AddFunction 的对象，它返回新的 CodeFunction，您可以在其中添加属性和代码（这是我不太喜欢的部分，因为您必须使用 EditPoint）。

这是一个非常简单的 Exec 版本，您可以将其用作起点：

```
 public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
    {
        handled = false;
        if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
        {
            handled = true;
            if (commandName == "TestAddMethod.Connect.TestAddMethod")
            {
                Document activeDoc = _applicationObject.ActiveDocument;
                if (activeDoc == null)
                    return;
                ProjectItem prjItem = activeDoc.ProjectItem;
                if (prjItem == null)
                    return;
                FileCodeModel fcm = prjItem.FileCodeModel;
                if (fcm == null)
                    return;

                CodeElements ces = fcm.CodeElements;
                // look for the namespace in the active document
                CodeNamespace cns = null;
                foreach (CodeElement ce in ces)
                {
                    if (ce.Kind == vsCMElement.vsCMElementNamespace)
                    {
                        cns = ce as CodeNamespace;
                        break;
                    }
                }
                if (cns == null)
                    return;
                ces = cns.Members;
                if (ces == null)
                    return;
                // look for the first class
                CodeClass cls = null;
                foreach (CodeElement ce in ces)
                {
                    if (ce.Kind == vsCMElement.vsCMElementClass)
                    {
                        cls = ce as CodeClass;
                        break;
                    }
                }
                if (cls == null)
                    return;
                CodeFunction cf = cls.AddFunction("TestMethod1", vsCMFunction.vsCMFunctionFunction, vsCMTypeRef.vsCMTypeRefVoid, -1, vsCMAccess.vsCMAccessPrivate);
                cf.AddAttribute("TestMethod", "true");
                TextPoint tp = cf.GetStartPoint(vsCMPart.vsCMPartBody);
                EditPoint ep = tp.CreateEditPoint();
                ep.Indent();
                ep.Indent();
                ep.Indent();
                ep.Insert("string test = Helper.CodeExample();");
            }
        }
    } 
```

# android - ActionBarSherlock 错误膨胀类

> ID：13376954
> 
> 赞同：3
> 
> 时间：2012-11-14T10:22:03.273
> 
> 标签：android, android-layout, actionbarsherlock

我正在使用 Sherlock 库在预 HoneyComb 设备上放置操作栏。奇怪的是，错误只发生在某些设备上。或更好。似乎在模拟器 2.3.3 上有效，但在 LG Optimus P500 2.3.3 上显示以下错误（Android_InfocadActivity 类是我的活动）：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{android.infocad.com/android.infocad.com.Android_InfocadActivity}: android.view.InflateException: Binary XML
file line #31: Error inflating class com.actionbarsherlock.internal.widget.ActionBarView
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3729)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #31: Error inflating class com.actionbarsherlock.internal.widget.ActionBarView
at android.view.LayoutInflater.createView(LayoutInflater.java:518)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(SourceFile:1045)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(SourceFile:915)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(SourceFile:849)
at com.actionbarsherlock.app.SherlockActivity.setContentView(SourceFile:229)
at android.infocad.com.Android_InfocadActivity.onCreate(SourceFile:158)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
... 24 more
Caused by: java.lang.NoSuchMethodError: android.content.res.XmlResourceParser.i
at com.actionbarsherlock.internal.widget.ActionBarView.loadLogoFromManifest(SourceFile:286)
at com.actionbarsherlock.internal.widget.ActionBarView.<init>(SourceFile:193)
... 27 more
android.view.InflateException: Binary XML file line #31: Error inflating class com.actionbarsherlock.internal.widget.ActionBarView
at android.view.LayoutInflater.createView(LayoutInflater.java:518)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(SourceFile:1045)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(SourceFile:915)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(SourceFile:849)
at com.actionbarsherlock.app.SherlockActivity.setContentView(SourceFile:229)
at android.infocad.com.Android_InfocadActivity.onCreate(SourceFile:158)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3729)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
... 24 more
Caused by: java.lang.NoSuchMethodError: android.content.res.XmlResourceParser.i
at com.actionbarsherlock.internal.widget.ActionBarView.loadLogoFromManifest(SourceFile:286)
at com.actionbarsherlock.internal.widget.ActionBarView.<init>(SourceFile:193)
... 27 more
java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(SourceFile:1045)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(SourceFile:915)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(SourceFile:849)
at com.actionbarsherlock.app.SherlockActivity.setContentView(SourceFile:229)
at android.infocad.com.Android_InfocadActivity.onCreate(SourceFile:158)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3729)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NoSuchMethodError: android.content.res.XmlResourceParser.i
at com.actionbarsherlock.internal.widget.ActionBarView.loadLogoFromManifest(SourceFile:286)
at com.actionbarsherlock.internal.widget.ActionBarView.<init>(SourceFile:193)
... 27 more
java.lang.NoSuchMethodError: android.content.res.XmlResourceParser.i
at com.actionbarsherlock.internal.widget.ActionBarView.loadLogoFromManifest(SourceFile:286)
at com.actionbarsherlock.internal.widget.ActionBarView.<init>(SourceFile:193)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(SourceFile:1045)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(SourceFile:915)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(SourceFile:849)
at com.actionbarsherlock.app.SherlockActivity.setContentView(SourceFile:229)
at android.infocad.com.Android_InfocadActivity.onCreate(SourceFile:158)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3729)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632) 
```

在我的代码中，调用 setContentView 时会显示错误。这是xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:id="@+id/mainRootLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
        <LinearLayout
            android:id="@+id/myCustomTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/DarkGray" >
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="left" >
                <ImageView
                    android:id="@+id/main_scadenze"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:src="@drawable/ic_notify_title" />
                <ImageView
                    android:id="@+id/main_nfc"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:src="@drawable/ic_nfc_title" />
                <ImageView
                    android:id="@+id/main_offline"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:src="@drawable/ic_offline" />
            </LinearLayout>
        </LinearLayout>
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="70dp"
            android:layout_marginBottom="3dp" />
        <LinearLayout
            android:id="@+id/checkLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/SteelBlue" >
            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="25dp"
                android:layout_height="25dp"
                android:layout_gravity="center"
                android:layout_marginLeft="5dp"
                android:src="@drawable/ic_filter" />
            <CheckBox
                android:id="@+id/ticketBox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="8dp"
                android:text="Ticket" />
            <CheckBox
                android:id="@+id/NCbox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="NC" />
            <CheckBox
                android:id="@+id/PlanBox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:text="Plan" />
        </LinearLayout>
        <LinearLayout
            android:id="@+id/orderLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="25dp"
                android:layout_height="25dp"
                android:layout_gravity="center_vertical"
                android:layout_marginLeft="5dp"
                android:src="@drawable/sort_icon" />
            <CheckBox
                android:id="@+id/tipo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="8dp"
                android:text="Prot." />
            <CheckBox
                android:id="@+id/edificio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:text="Edificio" />
            <CheckBox
                android:id="@+id/urgenza"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="14dp"
                android:text="Urgenza" />
        </LinearLayout>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <LinearLayout
                android:id="@+id/linearLayoutTab1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >
                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1" />
                <LinearLayout
                    android:id="@+id/buttonLayoutTab1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:id="@+id/linearLayoutTab2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >
                <ListView
                    android:id="@+id/myWorkList"
                    android:layout_width="fill_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1" />
              <LinearLayout
                    android:id="@+id/buttonLayoutTab2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:id="@+id/linearLayoutTab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >
             <ViewFlipper
                    android:id="@+id/viewFlipperChiusi"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                    <LinearLayout
                        android:id="@+id/layout_flipper_chiusi"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical" >
                     <Button
                            android:id="@+id/SincronizzaButton"
                            android:layout_width="115dp"
                            android:layout_height="50dp"
                            android:layout_gravity="center"
                            android:background="@drawable/aqua_button"
                            android:text="SINCRONIZZA"
                            android:textColor="@color/White"
                            android:textStyle="bold" />
                        <ListView
                            android:id="@+id/listInterventiChiusi"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent" >
                        </ListView>
                    </LinearLayout>
                    <LinearLayout
                        android:id="@+id/layout_flipper_risolti"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical" >
                        <TextView
                            android:id="@+id/textView1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:layout_marginTop="5dp"
                            android:text="Storico lavori:"
                            android:textAppearance="?android:attr/textAppearanceMedium" />
                        <ListView
                            android:id="@+id/listRisolto"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent" >
                        </ListView>                    
                   </LinearLayout>
                </ViewFlipper>
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

这是一小段代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {

        if (Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){

            Log.i("VERSION.SDK_INT", "NON e' ICS !!!!");
            this.setTheme(com.actionbarsherlock.R.style.Theme_Sherlock);
        }

        super.onCreate(savedInstanceState);

        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

        setContentView(R.layout.main);

        actionBar = getSupportActionBar();
        actionBar.show();
            ....
    } 
```

这是 Proguard 文件：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
-dontwarn android.support.v4.**
-dontwarn android.support.v4.view.**
-dontwarn org.xmlpull.v1.**
-dontwarn **CompatHoneycomb

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-keepattributes *Annotation*

-keep class android.support.v4.** { *; }

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

#ACRA specifics
# we need line numbers in our stack traces otherwise they are pretty useless
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable

# ACRA needs "annotations" so add this... 
-keepattributes *Annotation*

# keep this class so that logging will show 'ACRA' and not a obfuscated name like 'a'.
# Note: if you are removing log messages elsewhere in this file then this isn't necessary
-keep class org.acra.ACRA {
    *;
}

# keep this around for some enums that ACRA needs
-keep class org.acra.ReportingInteractionMode {
    *;
}
-keepnames class org.acra.ReportField {
    *;
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
    public void addCustomData(java.lang.String,java.lang.String);
    public void putCustomData(java.lang.String,java.lang.String);
    public void removeCustomData(java.lang.String);
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
    public void handleSilentException(java.lang.Throwable);
} 
```

顺便说一句，错误似乎来自 Sherlock 库。

[我把这个](https://stackoverflow.com/questions/10608359/animation-file-crashes-application-using-sherlockactionbar)和[这个](https://groups.google.com/forum/#!msg/actionbarsherlock/i6fGbZn-m_M/WkDIheuXhAYJ)都变红了，但与我的相比，错误几乎没有什么不同。在他们的代码中，我看到了*NullPointerException*。在我有一个*NoSuchMethodError: android.content.res.XmlResourceParser.i*代替。希望可以有人帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:31:11.187

您不应该在布局中包含这样的视图。如果您希望拥有一个 SherlockActionBar，只需从 扩展您的`Activity`类`SherlockActivity`，并将主题应用于 AndroidManifest.xml 中的应用程序：

```
<application
        android:icon="@drawable/logo"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" > 
```

然后，您将拥有一个 ActionBar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T15:49:34.323

使用最新的 android 支持库。

复制这个：...\android-sdk\extras\android\support\v13\android-support-v13.jar

进入您的 libs 文件夹（来自 actionbarsherlock）并删除旧文件夹！

# asp.net - Gridview - 基于列数据的颜色单元格行

> ID：13376955
> 
> 赞同：2
> 
> 时间：2012-11-14T10:22:07.947
> 
> 标签：asp.net, vb.net, gridview, boundfield

使用 VWD 2010 Express、ASP.NET、VB.NET。

我有一个绑定到数据库表的 gridview，它包含 10 列，其中一列是隐藏的。

我想为当前日期之前的任何内容设置截止日期（最后一列，gridview 中的索引 8）的行的背景颜色。

到目前为止，我有这个：（在 RowCreated 事件下定义）

```
Dim i As Integer = 8
If e.Row.RowType = DataControlRowType.DataRow Then
    If e.Row.Cells(i).Text <= Date.Now.ToString Then
        e.Row.Cells(i).ForeColor = System.Drawing.Color.Red
    End If
End If 
```

但是，问题，我收到一个错误：

> “指定的参数超出了有效值的范围，参数：索引”

gridview 中的所有对象都是boundfields。唯一不返回此错误的索引是索引 0，有什么建议吗？

使用索引 0 时，它只为每行中的第一个单元格着色，我认为这根本不依赖于日期，因为它似乎将它们全部着色为红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:29:22.517

设法找到修复，而不是使用列的索引，我使用列名，如下所示：

```
 If e.Row.DataItem("DueDate") < Date.Now.ToString Then
        e.Row.BackColor = Drawing.Color.Red
    End If 
```

注意：我在 RowDataBound 中声明了这一点，而不是在 RowCreated 中。

完美运行，将其留给其他有类似问题的人。在这种情况下，索引似乎不是很准确。

# java - 在二维数组中添加元素

> ID：13376956
> 
> 赞同：0
> 
> 时间：2012-11-14T10:22:20.013
> 
> 标签：java, arrays, loops

我的作业需要一些提示。我会很感激任何提示。

目标是创建一个二维数组，其中第 1 列是段 ID，第 2 列是段值。6段。将要求用户为每个 ID 输入每个值。

```
[ 0   3               
  1   2
  2   1
  3   5
  4   2
  5   3 ] 
```

用户将输入任意 3 个 ID：例如 012，每个对应的值将添加到下一个。所以 035 等于 3+5+3 = 11。

什么是解决这个问题的好方法，什么循环最适合这个？我了解数组是如何工作的，但我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:27:54.143

我认为不必涉及任何循环，并且数组不需要是二维的。我假设用户选择对应于数组的索引（例如 0 - 6）。从用户那里获得三个输入后，您可以直接引用数组元素。例如：

```
int segments[6];
segments[0] = 3;
segments[1] = 2;
segments[2] = 1;
segments[3] = 5;
segments[4] = 2;
segments[5] = 3;

int firstUserChoice = // parse from input
int secondUserChoice = // parse from input
int thirdUserChoice = // parse from input

int sum = segments[firstUserChoice] + segments[secondUserChoice] + segments[thirdUserChoice]; 
```

# migration - 将 Nexus 存储库移动到不同的机器

> ID：13376957
> 
> 赞同：5
> 
> 时间：2012-11-14T10:22:25.677
> 
> 标签：migration, repository, nexus

我正在尝试将我的存储库从一台机器移动到另一台机器，并保留所有配置和工件。有没有办法将这些导入新的仓库而不必从头开始执行整个过程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T22:27:36.510

Nexus 将其运行时文件与包含软件的主目录分开。

将以下目录复制到目标计算机并假装您正在[升级](https://books.sonatype.com/nexus-book/reference/upgrading.html)。

```
$NEXUS_HOME/../sonatype_work 
```

# sharepoint-2010 - 使用 AD RMS 配置 SharePoint 2010 时出错

> ID：13376958
> 
> 赞同：1
> 
> 时间：2012-11-14T10:22:28.513
> 
> 标签：sharepoint-2010, rights-management, windows-server-2012

我在使用 AD RMS 配置 SharePoint 2010 时遇到问题。

在 SharePoint 中选择“使用在 Active Directory 中指定的默认 RMS 服务器”时，我收到以下错误：

> 存在所需的 Windows 权限管理客户端，但服务器拒绝访问。如果要从一台 RMS 服务器切换到另一台 RMS 服务器，请确保已在两者之间建立信任关系。在服务器授予权限之前，IRM 将无法工作。

在 SharePoint 服务器上的事件日志中，我收到了两个关键应用程序事件：

> 事件 5062：信息权限管理 (IRM)：尝试激活权限帐户证书时出现问题。
> 
> 事件 5133：信息权限管理 (IRM)：获取权限管理服务 (RMS) 组身份证书 (GIC) 时出现问题

在 RMS 服务器上，IIS 日志捕获以下内容：

> /_wmcs/certification/ServerCertification.asmx - 443 - *（IP 地址）* - Windows+Rights+Management+Client - 401 2 5 15
> 
> /_wmcs/certification/ServerCertification.asmx - 443 *DOMAIN* \SPFarm *（IP 地址）* - Windows+Rights+Management+Client - 500 0 0 1015

这是设置：

*   直流。*域*.local (Windows Server 2012 + AD)
*   D b。*域*.local（Windows Server 2012 + SQL Server 2012）
*   有效值 *域*.local（Windows Server 2012 + AD RMS）
*   sp。*域*.local（Windows Server 2008 R2 + SharePoint 2010）

SharePoint 将被设置为一个简单的场。中央管理和 WFE 位于“sp”服务器上，“db”服务器用作数据库。

域中的帐户是：

*   RMAdmin（AD RMS 管理员）
*   RMService（AD RMS 服务）
*   SPSetup（SharePoint 设置/管理员）
*   SPFarm（SharePoint 农场）

我已经对 'rms' 服务器上的 '_wcms/certification/servercertification.asmx' 执行了步骤：

*   继承父文件夹的权限
*   将 SharePoint 服务器计算机帐户添加到“读取”和“读取并执行”的 ACL
*   将*DOMAIN* \SPFarm 帐户添加到“读取”和“读取和执行”的 ACL

此外，来自 RMS 服务器的服务器证书已导入到 SharePoint 服务器的“受信任的根证书”和 RMS 服务器上。

我可以确认 RMS 和 SharePoint 分别工作，我只是无法在 SharePoint 上设置 IRM！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:18:07.043

尝试这个：

```
IISreset /stop

del /q /f "%USERPROFILE%\AppData\Local\Microsoft\Drm\*.*"
del /q /f /s "%ALLUSERSPROFILE%\Microsoft\DRM\Server\*.*"

IISreset /start 
```

# postgresql - 关于 OpenStreepMap 中路线的问题

> ID：13376961
> 
> 赞同：0
> 
> 时间：2012-11-14T10:22:33.947
> 
> 标签：postgresql, postgis, openstreetmap

我正在使用 osm 数据开发应用程序，我有一些问题：

1.  我有一个使用 osm2po 工具导入 osm 数据的 postgresql 数据库。我的目标是能够在不同的 POI 之间进行路由。“at_2po_4pgr”表中有不是源/目标的 POI。执行函数调用“find_nearest_node_within_distance”（例如`SELECT * FROM find_nearest_node_within_distance(‘POINT(-3.6785434 42.6798754)’, 0.1, ‘at_2po_4pgr’)`）是一个可行的解决方案吗？我如何调整该路线的偏移量？

2.  我不清楚列名“成本”代表什么。是与距离、时间有关还是只是一个象征性的价值？

3.  最后，openstreetmap 中是否有任何工具或节点/方式标签来获得与 Google Places 服务一样的 POI 率？（这里的节点/地点有一个带有评级的标签/标签。例如`<rating>3.2</rating>`）

在此先感谢并原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:10:09.620

1.  检查[这个](https://gis.stackexchange.com/questions/20254/how-to-route-between-lat-lon-pairs-in-pgrouting)线程，在答案中你会找到解决方案（`find_nearest_node_within_distance`pgrouting 脚本中的函数）

2.  成本意味着成本。这取决于你，你如何设置它。默认情况下它是给定方式的长度，但您可以将其值设置为距离/最大速度（结果时间）。另一种可能性是将给定类型的方式的成本设置得非常高（> 1000），导致路线规划者将忽略该类型的方式（例如：轨道、人行道、高速公路）。

# python - Dendropy 互操作和 numpy 数组

> ID：13376962
> 
> 赞同：0
> 
> 时间：2012-11-14T10:22:35.253
> 
> 标签：python, numpy

我目前正在尝试使用 python Dendropy 库并在我的代码中包含一些 PAUP 命令。

我将矩阵作为一个 numpy 数组，但看起来 numpy 数组和这个模块存在问题。

```
***Distance matrix A (Numpy array)***

[[ 0  2  7  8 16 17]
 [ 2  0  5  6 17 16]
 [ 7  5  0  9 15 13]
 [ 8  6  9  0 18 16]
 [16 17 15 18  0  5]
 [17 16 13 16  5  0]] 
```

我尝试使用以下方法将 numpy 数组转换为 numpy 矩阵：`A=numpy.matrix(A)`

```
import dendropy
from dendropy.interop import paup     

#A is a distance matrix like this    

tree = paup.estimate_tree(A, 'nj') 
```

我得到的错误是：`AttributeError: 'matrix' object has no attribute 'write_to_stream'`

或者 ：

```
AttributeError: 'numpy.ndarray' object has no attribute 'write_to_stream' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:04:23.437

我从未使用过[DendroPy](http://packages.python.org/DendroPy/)，但从您报告的错误和快速查看 DendroPy 文档（例如[http://packages.python.org/DendroPy/tutorial/chars.html](http://packages.python.org/DendroPy/tutorial/chars.html)和[http:// packages.python.org/DendroPy/tutorial/paup.html](http://packages.python.org/DendroPy/tutorial/paup.html)）`estimate_tree`需要某种`CharacterMatrix`对象（在 DendroPy 中定义的类），*而不是*NumPy 数组或矩阵。

# php - 使用 REST 实现投票

> ID：13376965
> 
> 赞同：0
> 
> 时间：2012-11-14T10:22:43.640
> 
> 标签：php, web-services, rest, web-applications

我正在开发我的第一个 Web 应用程序并且有这个基本的疑问。

我有一组帖子，我想让用户对其进行投票。我正在使用 PHP，所以我有一个`article.php`脚本，其中包含处理 HTTP 请求的代码。

目前，我实现了使用通过 POST HTTP 请求（使用 html 表单）发送的数据的文章创建。返回的文章 id 是我从存储文章的数据库中获得的。

同样，我处理 GET 请求并根据作为参数发送的 id 返回一篇文章。如果没有定义参数，我会返回所有文章的列表。

目前我还没有进行任何 url 重写，所以请求的形式是`article.php?id=xxx`

现在我想实施投票，这就是我面临的问题。根据 REST，我应该在特定资源上使用 POST（鉴于投票不是幂等的），因此我会向`/article/1234`正文发送一个 POST 请求以`"+1"`获得正面投票。

问题是，如何将上述内容映射到我的用例？假设进行了 url 重写，那将转化为什么？重写`article.php?id=1234`将不起作用，因为 POST 不接受 URI (AFAIK) 中的参数。

而且，我如何将这个动作与其他动作区分开来？我还应该添加一些“动作”参数`article.php?id=1234&action=vote`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:43:13.117

似乎没有真正了解 REST-ful 应用程序。使用 GET 检索文章并使用 POST 对其进行编辑很好，但是您必须将其扩展到投票。REST-ful 应用程序假设一个 url 标识一个资源。因此，您必须将投票视为自己的资源（与文章相关）。所以，你的应用程序应该像这样工作

*GET article.php/id/1* : 检索 id 为 1 的文章

*POST article.php/id/1* : 更改 id 为 1 的文章

*GET article.php/id/1/votes* : 检索 id 为 1 的文章的投票

*POST article.php/id/1/votes* : 更改 id 为 1 的文章的投票

只要将投票实现为简单的计数器，就可以通过添加一个赞成票来实现后一个。您可以通过赋予投票标识来重新定义此逻辑，例如，如果您想为投票添加更多属性，例如进行投票的用户。

正如您要求重写以及应用程序是否能够通过后请求从 url 获取数据：是的，这完全有可能。对 article?id=1 的 POST 请求将有 $_GET['id'] 可用。

如上所示的重写部分是完全可选的。REST 对 url 的“漂亮”不感兴趣，只要一个 url 标识一个资源。

希望这能让您了解如何继续

# javascript - jQuery Isotope - Ajax 页面加载和初始化

> ID：13376966
> 
> 赞同：0
> 
> 时间：2012-11-14T10:22:55.897
> 
> 标签：javascript, jquery, ajax, jquery-isotope, window-load

我有一个可以重新加载的页面（没问题）并且可以通过调用来`Ajax`调用。

当我把`isotope`插件的初始化代码放进去时，`$(document).ready`我的同位素项目都搞砸了。在`$(window).load`一切工作正常。

问题是当通过事件调用页面时`Ajax`显然`load`没有触发。

当我将初始化放在`Ajax`回调中时，我遇到了与`$(document).ready`.

我当前的解决方法是`setTimeout`在我的`$(document).ready`. 这显然不是一个好的解决方案。

有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:01:43.367

尝试检查ajax是否已成功加载，然后调用isotope。

```
$.getScript("ajax.html", function(data,exception) {   
    if(exception === "success")
    {
        masonryBlocks();
    }
});

function masonryBlocks(){
  $(function(){    
      var $container = $('#container');

      $container.isotope({
        itemSelector: '.box',
        masonry: {
          columnWidth: 1
        }
      });
  });
} 
```

# android - XML pullparser 异常意外令牌

> ID：13376968
> 
> 赞同：1
> 
> 时间：2012-11-14T10:23:04.707
> 
> 标签：android, ksoap2

我正在使用 ksoap2 库来调用 Web 服务方法。以下代码用于它

```
 SoapObject request = new SoapObject(SOAP_ACTION, SOAP_METHOD);
        for (Map.Entry<String, String> entry : params.entrySet()) {
            // Use this to add parameters
            request.addProperty(entry.getKey(), entry.getValue());
        }
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        envelope.dotNet = false;

        HttpTransportSE androidHttpTransport = new HttpTransportSE(SOAP_URL);

        // this is the actual part that will call the webservice

        androidHttpTransport.call(SOAP_ACTION, envelope); 
```

它给了我 XML 拉解析器异常“意外令牌（位置：TEXT”。但我已经使用同一个库在同一个服务 url 中调用另一个方法而没有任何错误。我的 android os 版本是 4.0

# python - 对于巨大的数组来说，numpy 比 list 慢吗？

> ID：13376970
> 
> 赞同：1
> 
> 时间：2012-11-14T10:23:03.880
> 
> 标签：python, numpy

检查我的以下代码；它是在 python 中实现的 sigma_2 函数（使用粗筛）的一部分，它是除数函数之一[http://mathworld.wolfram.com/DivisorFunction.html](http://mathworld.wolfram.com/DivisorFunction.html)

```
from time import time
from itertools import count
import numpy

def sig2(N, nump=False):
    init = time()

    #initialize array with value=1 since every positive integer is divisible by 1
    if nump:
        print 'using numpy'
        nums = numpy.ones((N,), dtype=numpy.int64)
    else:        
        nums = [1 for i in xrange(1, N)]

    #for each number n < N, add n*n to n's multiples
    for n in xrange(2, N):
        nn = n*n
        for i in count(1):
            if n*i >= N: break
            nums[n*i-1] += nn

    print 'sig2(n) done - {} ms'.format((time()-init)*1000) 
```

我尝试了不同的值，而 numpy 非常令人失望。

2000年：

```
sig2(n) done - 4.85897064209 ms
took : 33.7610244751 ms
using numpy
sig2(n) done - 31.5930843353 ms
took : 55.6900501251 ms 
```

对于 200000：

```
sig2(n) done - 1113.80600929 ms
took : 1272.8869915 ms
using numpy
sig2(n) done - 4469.48194504 ms
took : 4705.97100258 ms 
```

它继续下去，我的代码并不是真正可扩展的——因为它不是 O(n)，但是对于这两个以及这两个结果，使用 numpy 会导致性能问题。numpy 不应该比 python 列表和字典更快吗？这是我对 numpy 的印象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T10:53:54.040

正如@unutbu 所说，当您使用矢量化操作时，numpy 真的很出色。这是使用 numpy 优化的实现（与 Mathworld 中除数函数的定义一致）：

```
import numpy as np

def sig2_numpy(N):

    x = np.arange(1,N+1)
    x[(N % x) != 0] = 0
    return np.sum(x**2) 
```

当你调用它时，它会快得多：

```
>> import time
>> init = time.time()
>> print sig2_numpy(20000)
>> print "It took", (time.time()-init)*1000., 'ms'
It took 0.916957855225 ms 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T10:36:16.330

NumPy 通过对整个数组执行计算来提高速度，而不是一次对单个值进行计算。

当你写

```
 for i in count(1):
        if n*i >= N: break
        nums[n*i-1] += nn 
```

您正在强制 NumPy 数组`nums`一次将数组中的单个值递增一个索引。对于 NumPy 数组来说，这是一个缓慢的操作。

# entity-framework - 获取数据库集 从一个字符串

> ID：13376975
> 
> 赞同：2
> 
> 时间：2012-11-14T10:23:32.087
> 
> 标签：entity-framework

ADO.NET 用户第一次尝试 EF。我试图从表名的字符串中获取一个表。比我想象的要难。基本上我在这里：

```
var tableName = "Name.Entities.Measure" + measureType;
var table = Activator.CreateInstance("Name.Entities", tableName);
var unwrapped = table.Unwrap();
var type = unwrapped.GetType();
var dbset = context.Set<type>(); 
```

或者

```
switch (tableString)
{
    case "table1":
    return GetDataFromTable1();
    case "table2":
    return GetDataFromTable2();
} 
```

更少的代码会很好;）

考虑使用所有实体的可搜索集合制作扩展方法。更好的解决方案有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:03:50.060

我一直在寻找同样的东西。试试 Set() 的非泛型版本：

```
var tableName = "Name.Entities.Measure" + measureType;
var type = Type.GetType(tableName);
var dbset = Context.Set(type); 
```

# android - 我无法在 Emulator Android 2.3.3 版本中开始新活动，但 Android 4.1.2 工作正常

> ID：13376981
> 
> 赞同：1
> 
> 时间：2012-11-14T10:23:44.523
> 
> 标签：android, android-intent, android-emulator

由于我是 Android 开发的新手，因此遇到了问题。我在 Android 4.1.2 中测试它工作正常，但是当我将它加载到 Android 2.3.3 之后，当我点击一个按钮时，它应该启动一个新活动，但它会停止并崩溃？有什么问题？mind_sdk 等于 9，

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.starter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.starter, menu);
        return true;
    }
    public void openS(View view){

        Intent intent = new Intent(this,LoginSU.class );
        startActivity(intent);
    }
    public void openG(View view){
        Intent intent = new Intent(this, LoginGE.class);
        startActivity(intent);
    }
} 
```

当人点击按钮时，它会触发一个动作 openS 或 openG，然后它会启动一个新的 Activity。它在 Android 4.1.2 中工作但在 2.3.3 中失败？可能是什么原因？原木猫

```
11-14 10:11:26.817: I/dalvikvm(910): Could not find method kz.bimash.food.security.LoginSU.getActionBar, referenced from method kz.bimash.food.security.LoginSU.onCreate 
```

实际上我没有使用，但它要求一个操作栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:35:48.837

ActionBar 仅支持 Android 3 及以上版本。对于具有 ActionBar 的旧版本 Android，您可以使用 ActionBarSherlock

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:58:49.217

你能发布你的`AndroidManifest.xml`XML 和你的`res/values/style.xml`? 我想知道应用程序主题是否适用`HOLO`于 2.3.3 及更低版本不支持的主题，并尝试使用`HOLO`. 这是一个使用操作栏的主题。或者可能是您在清单中的活动是使用`HOLO`主题。

而是在`res/`调用中创建一个文件夹`values-v11/`并创建一个新的`style.xml`. 您可以从`values/`. 打开复制的文件并检查`AppTheme`样式。是父母 `android:Theme.HOLO`还是`android:Theme.HOLO.Light`类似的东西？它看起来像这样吗？

```
<style name="AppTheme" parent="android:Theme.Holo" /> 
```

拥有单独的`values/`和`values-v11/`文件夹会告诉应用程序根据正在运行的版本执行什么主题。Honeycomb 3.0 (v11) 及更高版本将查看`values-v11`文件夹的样式和其他值，而 Gingerbread 2.3.4 (v10) 及更低版本将查看`values/`文件夹。

现在编辑`values/style.xml`并使父级`android:Theme.Light`或`android:Theme`

查看[http://developer.android.com/guide/topics/ui/themes.html#SelectATheme](http://developer.android.com/guide/topics/ui/themes.html#SelectATheme)了解有关如何在同一个应用程序中使用多个主题的更多详细信息。

# c# - 动态序列化

> ID：13376982
> 
> 赞同：1
> 
> 时间：2012-11-14T10:23:52.643
> 
> 标签：c#, .net, json

我写了一个 asp.net MVC 控制器

我将 JSON 作为对操作的响应发送到客户端。

```
{ A : "bla", B: "bla2"} 
```

如何根据其价值的存在使字段 B 暂定

含义：像服务器对象

```
{ A : "bla", B:  null} 
```

将作为

```
{ A : "bla"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:28:06.140

此链接可能有帮助[http://ftp.java2s.com/Code/CSharp/Network/RemovesJsonnullobjectsfromtheserializedstringandreturnanewstringExtentionMethod.htm](http://ftp.java2s.com/Code/CSharp/Network/RemovesJsonnullobjectsfromtheserializedstringandreturnanewstringExtentionMethod.htm)

基本上，您将 c# 对象序列化为 json，然后您可以使用正则表达式查找所有具有 null 值的属性并将其删除

编辑：

您可以像这样在字符串上使用扩展方法

```
public static string RemoveJsonNulls(this string str)
    {
        if (!str.IsEmptyOrNull())
        {
            Regex regex = new Regex(UtilityRegExp.JsonNullRegEx);
            string data = regex.Replace(str, string.Empty);
            regex = new Regex(UtilityRegExp.JsonNullArrayRegEx);
            return regex.Replace(data, "[]");
        }
        return null;
    }

public static string JsonNullRegEx = "[\"][a-zA-Z0-9_]*[\"]:null[ ]*[,]?";

public static string JsonNullArrayRegEx = "\\[( *null *,? *)*]"; 
```

# c# - 如何将数据绑定到web中的listview

> ID：13376988
> 
> 赞同：0
> 
> 时间：2012-11-14T10:24:27.017
> 
> 标签：c#, asp.net

我有表`Tbl_purchase`。我想在我的网站中显示`Tbl_purchase`要控制的项目。`List view`

首先我尝试`datasource`通过编码用属性填充列表视图。我用数据填充数据表`Tbl_purchase`然后我的代码就像

```
Listview1.Datasource=dt
ListView1.Databind() 
```

但它显示了一个错误，例如`itemtemplate is missing`。然后从显示智能标签中我选择了数据源`Tbl_purchase`，当时它适用于我的网站。

但是我如何通过编码填写列表视图？请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:54:04.913

当您直接从工具箱添加 ListView 时，它没有任何模板...如果您是从代码隐藏中执行此操作，则必须添加以显示您的数据... ListView中`templates`存在许多模板，`LayOutTemplate,ItemTemplate`例如`ItemTemplate`主要用于大多数数据控件来显示数据...所以您需要在您的设计代码中添加这些模板...这是关于在 ListView 中使用这些模板的非常有用的文章...请通过此...您将了解如何去做... [ListView 模板](http://www.codedigest.com/Articles/ASPNET/91_ListView_Control_in_ASPNet_35.aspx)

# javascript - JavaScript 无效性能

> ID：13376990
> 
> 赞同：5
> 
> 时间：2012-11-14T10:24:35.190
> 
> 标签：javascript, performance, function, return, void

如果我的脚本执行的函数返回例如我不想使用或存储的巨大对象，那么使用 void 运算符调用该函数是否更好/更快/更少的内存密集型？还是会因为返回值被覆盖而降低性能？

```
void myFunc(); 
```

刚刚创建了一个测试：

[http://jsperf.com/voidperf](http://jsperf.com/voidperf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:41:43.603

`void`运算符仅用于获取原始`undefined`值；当您以内联模式运行代码时，它会很有用`javascript:`，因为如果页面是`undefined`.

因此，这两种构造之间没有明显的区别：

```
getSuperBigResult();
void getSuperBigResult(); 
```

JavaScript 将以 void'ish 方式运行，因为前一条语句也不使用返回值。

也可以看看：[`void`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

# c# - 如何使用 .NET 更改本地安全策略

> ID：13376994
> 
> 赞同：3
> 
> 时间：2012-11-14T10:24:54.543
> 
> 标签：c#, .net, vb.net, local-security-policy

我已经阅读了太多关于阅读本地安全策略的主题，但我需要更改它的值，特别是“审计系统事件”。

如何使用.NET环境做到这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T05:47:36.560

我已经解决了这个问题，通过在命令行中运行这个命令`cmd.exe`：

```
Auditpol /set /category:system /success:enable /failure:disable 
```

为此，我将其保存在一个`.bat`文件中并以管理员身份运行。

# javascript - JavaScript Templating：部分模板代码应该如何组织？

> ID：13376996
> 
> 赞同：1
> 
> 时间：2012-11-14T10:25:09.333
> 
> 标签：javascript, templates, javascript-framework, template-engine

我是 JavaScript 模板世界的新手。

这里我有一个页面，我不知道应该如何组织模板代码。

这是第一次加载页面时的相关 HTML：

```
...
<table id="color-codes">
  <tr>
    <td>red</td>
    <td>#FF0000</td>
  </tr>
  <tr>
    <td>blue</td>
    <td>#0000FF</td>
  </tr>
  <tr>
    <td>black</td>
    <td>#000000</td>
  </tr>
</table>
... 
```

用户可以为表格添加颜色。每次添加颜色时，浏览器都会向服务器发送一个 AJAX 请求。然后，服务器返回一个 JSON 对象，其中包含颜色名称和颜色代码。

在接收到 JSON 对象后，客户端使用 JSON 对象呈现模板（如下），然后将生成的 DOM 对象插入到表的末尾。

表格行模板：

```
<tr id='tp-color-entry'>
  <td class='color-name'></td>
  <td class='color-code'></td>
</tr> 
```

问题：我应该把这个模板代码放在哪里？在 HTML 文件中？还是JS文件？如果在 HTML 文件中，如何防止它干扰页面呈现/布局？如果在 JS 文件中，我是否只需将其保存分配给一个变量？

请注意，我使用**[Pure](http://beebole.com/pure/)** for JS Templating 和 Django 作为我的服务器端。而且我总是尝试将 HTML 和 JS 代码保存在单独的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:11:38.477

您可以将其放在`script`具有无法识别`type`属性的标签中：

```
<script type="text/x-pure-template" id="color-entry-template">
    <tr id='tp-color-entry'>
        <td class='color-name'></td>
        <td class='color-code'></td>
    </tr>
</script> 
```

那么获取模板就很简单了：

```
document.getElementById('color-entry-template').textContent 
```

# mysql - redmine 安装：mysql gem 说未定义符号：mysql_init

> ID：13376999
> 
> 赞同：1
> 
> 时间：2012-11-14T10:25:25.323
> 
> 标签：mysql, ruby, gem, installation, redmine

我正在尝试在[OVH](http://www.ovh.com)互惠服务器上安装 redmine，但我被 MySQL gem 问题阻止了。OVH 服务器不允许外部网络连接。我已经手动下载并安装了所有具有 Redmine 所需依赖项的 gem。

我已经安装没有任何问题 MySQL gem： - mysql 2.8.1 - mysql2 0.3.11

对于安装，我需要指定 mysql lib 并包含文件夹路径，因为它是一个共同安装和非标准布局：

```
gem install mysql-2.8.1.gem
    --no-rdoc
    --no-ri
    --
    --with-mysql-config=/usr/bin/mysql_config
    --without-mysql-dir
    --with-mysql-lib=/usr/lib/mysql
    --with-mysql-include=/usr/include/mysql

gem install mysql2-0.3.11.gem
    --no-rdoc
    --no-ri
    --
    --with-mysql-config=/usr/bin/mysql_config
    --without-mysql-dir
    --with-opt-lib=/usr/lib/mysql
    --with-opt-include=/usr/include/mysql 
```

使用这两个命令，我没有收到错误消息和消息`1 gem insalled`。

在那个有趣的手动包安装过程之后，我按照[Redmine 安装教程](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)来初始化我的环境。

第一个命令，生成秘密令牌：`rake generate_secret_token` 第二个命令，构建数据库模式：`RAILS_ENV=production rake db:migrate`

第一个工作完美，但第二个向我发送此错误：

```
ruby: symbol lookup error: /MYHOMEFOLDER/gems/mysql-2.8.1/lib/mysql_api.so: undefined symbol: mysql_init 
```

有没有人知道我可以如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:48:53.770

如果您正在使用，请`ruby1.9`使用`mysql2`gem。
如果您正在使用，请`ruby1.8`使用`mysql`gem。

所以，如果你使用的是 1.9，在你的`config/database.yml`

```
production:
  adapter: mysql2 
```

和 ：

```
gem install mysql2 
```

如果您正在运行 Redmine >1.4，请使用`Bundler`而不是`gem install ...`!