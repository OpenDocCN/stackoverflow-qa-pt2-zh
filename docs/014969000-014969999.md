# StackOverflow 问答 14969000-14969999

# haskell - 我如何将循环编写为 lambda 函数？

> ID：14969010
> 
> 赞同：9
> 
> 时间：2013-02-19T22:41:30.633
> 
> 标签：haskell

只是为了好玩，这是我自己的版本`cycle`：

```
myCycle :: [a] -> [a]
myCycle xs = xs ++ myCycle xs 
```

右侧指的是函数名`myCycle`和参数`xs`。

是否可以`myCycle` *不*提及`myCycle`或`xs`在右侧实施？

```
myCycle = magicLambdaFunction 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T23:41:49.867

> 是否可以`myCycle`不提及`myCycle`或`xs`在右侧实施？

答案是肯定的和否定的（不一定按这个顺序）。

其他人提到了定点组合器。如果您有一个定点组合器`fix :: (a -> a) -> a`，那么正如您在对 Pubby 答案的评论中提到的那样，您可以编写`myCycle = fix . (++)`.

但标准定义`fix`是这样的：

```
fix :: (a -> a) -> a
fix f = let r = f r in r

-- or alternatively, but less efficient:
fix' f = f (fix' f) 
```

请注意， 的定义`fix`涉及在其定义的右侧提及左侧变量（`r`在第一个定义中，`fix'`在第二个定义中）。所以到目前为止，我们真正做的是把问题推到`fix`.

有趣的是，Haskell 基于类型化的 lambda 演算，出于良好的技术原因，大多数类型化的 lambda 演算都被设计为*不能*“原生”表达定点组合子。如果您在允许计算固定点的基本微积分“顶部”添加一些额外功能，这些语言才会成为图灵完备的。例如，其中任何一个都可以：

1.  添加`fix`为微积分的基元。
2.  添加递归数据类型（Haskell 有；这是`fix`在 Haskell 中定义的另一种方式）。
3.  允许定义引用正在定义的左侧标识符（Haskell 也有）。

这是一种有用的模块化类型，原因有很多——一个是没有固定点的 lambda 演算也是逻辑的一致证明系统，另一个是`fix`许多此类系统中的更少程序可以被证明可以终止。

* * *

**编辑：**这里是`fix`用递归类型编写的。现在`fix`本身的定义不是递归的，但是`Rec`类型的定义是：

```
-- | The 'Rec' type is an isomorphism between @Rec a@ and @Rec a -> a@:
--
-- > In  :: (Rec a -> a) -> Rec a
-- > out :: Rec a        -> (Rec a -> a)
--
-- In simpler words:
--
-- 1\. Haskell's type system doesn't allow a function to be applied to itself.
--
-- 2\. @Rec a@ is the type of things that can be turned into a function that
--    takes @Rec a@ arguments.
--
-- 3\. If you have @foo :: Rec a@, you can apply @foo@ to itself by doing
--    @out foo foo :: a@.  And if you have @bar :: Rec a -> a@, you can do 
--    @bar (In bar)@.
--
newtype Rec a = In { out :: Rec a -> a }

-- | This version of 'fix' is just the Y combinator, but using the 'Rec'
-- type to get around Haskell's prohibition on self-application (see the
-- expression @out x x@, which is @x@ applied to itself):
fix :: (a -> a) -> a
fix f = (\x -> f (out x x)) (In (\x -> f (out x x))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T22:46:54.007

我认为这有效：

```
myCycle = \xs -> fix (xs ++) 
```

[http://en.wikipedia.org/wiki/Fixed-point_combinator](http://en.wikipedia.org/wiki/Fixed-point_combinator)

> 在支持匿名函数的编程语言中，定点组合器允许定义和使用匿名递归函数，即不必将这些函数绑定到标识符。在这种情况下，定点组合器的使用有时称为匿名递归。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T23:24:47.850

为了好玩，这是另一回事：

```
let f = foldr (++) [] . repeat 
```

或者

```
let f = foldr1 (++) . repeat 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:13:03.253

还没有人指出修复解决方案的“明显”版本。这个想法是将命名的递归调用转换为参数。

```
let realMyCycle = fix (\myCycle xs -> xs ++ myCycle xs) 
```

这个“递归名称”引入技巧几乎就是`let in`Haskell 中所做的。唯一的区别是使用内置结构更直接，并且可能更好地实现。

# javascript - 检测是否在一定时间内输入了某些字符

> ID：14969014
> 
> 赞同：0
> 
> 时间：2013-02-19T22:41:40.753
> 
> 标签：javascript

我试图确定用户是否在特定的时间内输入了一组特定的字符。

我想我做了一些有用的东西，但我知道它不是很好，因为它使用了全局变量 toMatch。`var`我用不带关键字的 setInterval 声明了它。尽管范围的概念让我感到困惑，但我正在努力学习，我想知道是否有人可以提供更好的方法来做到这一点？

```
//set the toMatch array equal to the character codes for the word 'test'
//reset it to its original value every 2seconds
var matchTime = setInterval(function(){ console.log('toMatch reset'); toMatch = [84,69, 83, 84];}, 2000);

document.addEventListener("keydown", function(e){

   var key = e.which;
   findMatches(key);

});

function findMatches(key){

    //if the key is in the first position in the array, remove it
    if (key == toMatch[0]){
      toMatch.shift();

    }
      console.log(toMatch);

  //if all shifted out, clear the interval
  if (toMatch.length == 0 ) {
    window.clearInterval(matchTime);
    alert('typed \'test\' within two seconds');
  }

} 
```

[jsbin](http://jsbin.com/ujijat/3/edit)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:17:52.217

尝试这个

```
function listenForWord(word) {
    word = word.toUpperCase(); // event char codes are in upper case
    var counter = 0,
        time = 0;
    // I used jQuery, you could also use addEventListener but don't
    // forget to use attachEvent so it works in all browsers!
    $(document).keydown(function (e) {
        // Because the code is inside a function, the variable
        // word is available at this level but is not global
        var currentTime = new Date().getTime();
        if (currentTime - time > 1000) {
            // If the user waits more than 1 second to type the next letter
            // The counter is reset, I'm not sure if this is what you want!
            counter = 0;
        }
        var character = word.charCodeAt(counter),
            first = word.charCodeAt(0);
        if (character == e.which) {
            counter++;
        } else if (character == first) {
            counter = 1;
        } else {
            counter = 0;
        }
        if (counter == word.length) {
            counter = 0;
            alert("You typed " + word + " fast enough");
        }
        time = currentTime;
    });
}

listenForWord("test");
// You could potentially call this function with other words
// And it will work 
```

请注意，我的代码没有`setInterval`调用 - 因为实际上您只需要检查用户是否在他实际按下键时输入了正确的单词，无需在间隔内进行任何类型的重置。

这与您的不完全相同，因为它允许用户在 4 秒内输入一个 4 个字母的单词（每个键输入之间不超过 1 秒）。

如果您想测试他们是否在设定的 2 秒时间限制内输入了所有 4 个字符，您可以重新制定逻辑，改为在按下第一个键时存储时间 - 然后将当前时间与该时间而不是时间进行比较从最后一次按键开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:25:47.783

如果您的主要问题是如何避免全局变量，那么一个简单的答案是查看立即调用函数表达式（IIFE）。Ben Alman 在这里有一篇好文章：http: [//benalman.com/news/2010/11/immediately-invoked-function-expression/](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

它基本上将所有变量/函数封装到它们自己的范围内并立即调用自己。您可以将其应用到您的代码中，只需进行最少的更改。

```
//开始IIFE
（功能（）{
    //在 IIFE 范围内声明 toMatch 变量 - 防止它污染全局范围
    var toMatch;
    //设置toMatch数组等于单词'test'的字符代码
    //每2秒将其重置为原始值
    var matchTime = setInterval(function(){
        console.log('toMatch reset');
        toMatch = [84,69, 83, 84];
    }, 2000);

    document.addEventListener("keydown", function(e){
         var key = e.which;
         查找匹配（键）；
    });

    功能查找匹配（键）{

        //如果键在数组的第一个位置，则将其删除
        if (key == toMatch[0]){
            toMatch.shift();
        }
        控制台.log(toMatch);

        //如果全部移出，清除间隔
        如果（toMatch.length == 0）{
            window.clearInterval(matchTime);
            alert('在两秒内输入了\'test\'');
        }

    };
})();

console.log(window.toMatch) // 现在 toMatch 不是全局变量

```

# ruby-on-rails - 安装 Ruby/Rubygems 错误@Ubuntu

> ID：14969019
> 
> 赞同：1
> 
> 时间：2013-02-19T22:41:54.810
> 
> 标签：ruby-on-rails, ruby, ubuntu, yaml

我正在尝试按照“[如何使用 RVM 在 Ubuntu 12.04 LTS (Precise Pangolin) 上安装 Ruby on Rails](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm) ”中的步骤在 Ubuntu 上安装 Ruby on Rails 。

一切都很好，直到这里：

```
gabi@ubuntu:~$ rvm ruby​​gems 当前
正在删除旧的 Rubygems 文件...
为 ruby​​-1.9.3-p385 安装 ruby​​gems-1.8.25 ...
运行 'env GEM_PATH=/home/gabi/.rvm/gems/ruby-1.9.3-p385:/home/gabi/.rvm/gems/ruby-1.9.3-p385@global:/home/gabi/ 时出错。 rvm/gems/ruby-1.9.3-p385:/home/gabi/.rvm/gems/ruby-1.9.3-p385@global GEM_HOME=/home/gabi/.rvm/gems/ruby-1.9.3-p385 /home/gabi/.rvm/rubies/ruby-1.9.3-p385/bin/ruby /home/gabi/.rvm/src/rubygems-1.8.25/setup.rb'，请阅读/home/gabi/。 rvm/log/ruby-1.9.3-p385/rubygems.install.log
rubygems 的安装未成功完成。

```

日志文件如下所示：

```
/home/gabi/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/yaml.rb:36:in `remove_method': method `to_yaml' not defined in Object (Nam
eError)
  from /home/gabi/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/yaml.rb:36:in `yamler='
  from /home/gabi/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/yaml.rb:33:in `class_eval'
  from /home/gabi/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/yaml.rb:33:in `yamler='
  from /home/gabi/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/yaml.rb:76:in `<top (required)>'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/custom_require.rb:36:in `require'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/custom_require.rb:36:in `require'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems.rb:680:in `load_yaml'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/config_file.rb:249:in `load_file'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/config_file.rb:190:in `initialize'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/gem_runner.rb:78:in `new'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/gem_runner.rb:78:in `do_configuration'
  from /home/gabi/.rvm/src/rubygems-1.8.25/lib/rubygems/gem_runner.rb:51:in `run'
  from setup.rb:38:in `<main>' 
```

究竟是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:14:58.463

[不知道是什么问题，我认为安装时出了点问题，但是我设法通过使用此处](https://rvm.io/packages/zlib/ "这里")的快速修复使其工作：

1.  使用以下命令更新 RVM：`rvm get head`
2.  使用以下命令删除所有手动安装的软件包：`rvm pkg remove`
3.  使用以下命令安装所需的库：`rvm requirements run`
4.  使用以下命令重新安装 Ruby：`rvm reinstall 1.9.3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:12:19.633

我唯一能想到的是，如果您使用了错误的 Ruby 版本。如果您使用的是`rm`，请输入`rvm current`并查看它是否是 Ruby 1.9。

# jquery - Jvectormap 在 div 变化时非常小

> ID：14969023
> 
> 赞同：8
> 
> 时间：2013-02-19T22:42:16.130
> 
> 标签：jquery, html, jvectormap, world-map

我有两个 div，一个是世界地图，一个是美国地图。当美国在世界地图上单击时，我想隐藏该 div 并将美国地图带入视野。

这可行，但地图很小，即使缩放按钮的位置表明 div 的大小是它应该的大小。

![在此处输入图像描述](../Images/ceed65e86548952d11c9ad6e7ffe348e.png)

有任何想法吗？

如果我从一开始就将两个 div 设置为“块”，它们的大小都是正确的，只有在调用代码来切换 div 时才会失败。

```
onRegionClick: function(event, code){
                        if (code == "US") { openUS('us-map') }
            },

  function openUS(a) {

    document.getElementById("world-map").style.display = 'none';
    document.getElementById(a).style.display = 'block';
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T15:32:55.007

此问题是由于您在隐藏元素上初始化地图，当时无法正确计算其大小。尝试更改您的逻辑，以便在元素变得可见后初始化 jVectorMap。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-05T03:34:54.167

您还可以在代码中添加逻辑，当地图容器出现时，代码会执行名为 updateSize 的方法。特别是这看起来像：

```
$('$world-map').vectorMap('get','mapObject').updateSize(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T18:49:40.967

您还可以在显示地图后在该地图的容器上触发 resize()。

我在这篇文章中做了一个例子：[Switch maps in Jvectormap?](https://stackoverflow.com/questions/14992196/switch-maps-in-jvectormap)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-08T11:59:55.203

问题是带有美国地图的 div 是隐藏的，因此它无法正确计算地图大小（宽度）。相反，您可以将该 div 设置为具有高度：0。

我使用 Highcharts 遇到了这个问题，对于 jvectormap 也是如此。下面的代码解决了这个问题（使用引导程序）：

```
/* bootstrap hack: fix content width inside hidden tabs */
.tab-content > .tab-pane:not(.active),
.pill-content > .pill-pane:not(.active) {
    display: block;
    height: 0;
    overflow-y: hidden;
} 
/* bootstrap hack end */ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-24T20:47:03.963

我在 jVectorMap 显示大小方面遇到了同样的问题，并找到了一种让它们正确显示的方法。

问题是当您创建地图对象时。为使其正确显示，vectorMap 对象在创建时必须可见。话虽如此，当您将它们放入选项卡时，您应该：

1.  单击第一个选项卡。
2.  创建第一张地图。
3.  单击第二个选项卡。
4.  创建第二张地图.. ..
    您最终可以再次单击第一个选项卡，使其成为页面加载时的活动选项卡。

希望这可以帮助任何有同样问题的人。

# c++ - 可以在 g++ 4.7+ 中重新启用“uint”类型吗？

> ID：14969024
> 
> 赞同：4
> 
> 时间：2013-02-19T22:42:26.543
> 
> 标签：c++, gcc

我有大量代码正在尝试从 g++ 版本 4.2.2 转换为 4.7.2。在 4.2.2 及之前的版本中，它似乎`uint`被定义为`unsigned int`. 我知道这不是标准的 c++ 东西，真正的男人编写 ISO 标准 C++，但我想知道是否有一个标志或某种方式让 g++`uint`在不修改所有源文件的情况下接受。我可以更改`CPPFLAGS`或添加开关到 g++ 运行线吗？我的谷歌一无所获。我有一些来自不同工作组的源文件，我想接​​受他们的`uint`违规行为。

例如

```
#include <iostream>
#include <fstream>
#include <assert.h>
using namespace std;
int main(void) {
    uint foo = 0xdeadbeef;
    cout<<hex<<foo<<endl;
} 
```

产量：

```
/tmp/rbroger1/gcc_update rbroger1 @ plxc25804 
% /usr/intel/pkgs/gcc/4.2.2/bin/g++ ~/tmp.cc && ./a.out
deadbeef
/tmp/rbroger1/gcc_update rbroger1 @ plxc25804
% /usr/intel/pkgs/gcc/4.7.2/bin/g++ ~/tmp.cc && ./a.out
/nfs/pdx/home/rbroger1/tmp.cc: In function 'int main()':
/nfs/pdx/home/rbroger1/tmp.cc:8:5: error: 'uint' was not declared in this scope
/nfs/pdx/home/rbroger1/tmp.cc:8:10: error: expected ';' before 'foo'
/nfs/pdx/home/rbroger1/tmp.cc:9:16: error: 'foo' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T22:45:06.480

您可以将`-include a_file_where_there_is_typedef_to_uint.h`标志添加到 g++

[从手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Preprocessor-Options.html#Preprocessor-Options)

> `-include file`
> 
> 处理文件，好像#include "file" 出现在主要源文件的第一行。但是，搜索文件的第一个目录是预处理器的工作目录，而不是包含主源文件的目录。如果在此处未找到，则会在 #include "..." 搜索链的其余部分中正常进行搜索。
> 
> 如果给出了多个 -include 选项，则文件将按照它们在命令行中出现的顺序被包含在内。

# android - android将参数传递给新活动为空

> ID：14969027
> 
> 赞同：1
> 
> 时间：2013-02-19T22:42:32.230
> 
> 标签：android, parameter-passing

我有一个搜索按钮。

当我点击它时，我想将当前活动的值发送到另一个活动（在我的例子中是 ProductActivity）

这是搜索按钮的代码

```
 Button nextActivity = (Button) findViewById(R.id.btnSearch);
                nextActivity.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View view) {
                        TextView tvFileNumber = (TextView)findViewById(R.id.tv1);
                        Spinner spAttachement = (Spinner)findViewById(R.id.spinner1) ;
                        Spinner spExecution = (Spinner)findViewById(R.id.spinner2) ;
                        Spinner spCategory = (Spinner)findViewById(R.id.spinner3) ;
                        Spinner spOperation = (Spinner)findViewById(R.id.spinner4) ;
                        Spinner spCollection = (Spinner)findViewById(R.id.spinner5) ;

                        SpinnerData daAttachement =(SpinnerData)spAttachement.getItemAtPosition(spAttachement.getSelectedItemPosition());
                        SpinnerData daExecution =(SpinnerData)spAttachement.getItemAtPosition(spExecution.getSelectedItemPosition());
                        SpinnerData daCategory =(SpinnerData)spAttachement.getItemAtPosition(spCategory.getSelectedItemPosition());
                        SpinnerData daOperation =(SpinnerData)spAttachement.getItemAtPosition(spOperation.getSelectedItemPosition());
                        SpinnerData daCollection =(SpinnerData)spAttachement.getItemAtPosition(spCollection.getSelectedItemPosition());

                        Intent myIntent = new Intent(view.getContext(), ProductActivity.class);
                        //myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        myIntent.putExtra("col_id",6);
                        myIntent.putExtra("site_id",site_id);
                        myIntent.putExtra("brand_id",brand_id);
                        myIntent.putExtra("attachement_id",daAttachement.getValue());
                        myIntent.putExtra("execution_id",daExecution.getValue());
                        myIntent.putExtra("operation_id",daOperation.getValue());
                        myIntent.putExtra("category_id",daCategory.getValue());
                        startActivity(myIntent);

                    }
                }); 
```

在我的产品活动中

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_product);
        Intent myIntent= getIntent(); 
        int brand_id = myIntent.getIntExtra("brand_id", 0); 
        int col_id = myIntent.getIntExtra("col_id", 0); 
        int site_id = myIntent.getIntExtra("site_id", 0); 
        int attachement_id = myIntent.getIntExtra("attachement_id", -1); 
        int execution_id = myIntent.getIntExtra("execution_id", -1); 
        int category_id = myIntent.getIntExtra("category_id", -1); 
        int operation_id = myIntent.getIntExtra("operation_id", -1); 
        int eol = myIntent.getIntExtra("eol", -1); 

        Log.v("TESTCOLLECTION",Integer.toString(col_id)); 
```

**结果显示TESTCOLLECTION**
的日志结果：0

在我的示例中，它假设为 6`myIntent.putExtra("col_id",6);`

请帮忙。我尝试了很多东西，但没有找到原因。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:54:29.343

您的活动启动模式似乎是`singleTask`或类似的，如果是这种情况，您必须覆盖`onNewIntent(Intent intent)`.

这是因为`onCreate()`只有在创建活动实例时才会调用一次，`onNewIntent()`才会调用后记。

# android - Android 4.2 扩展了 EditTextPreference

> ID：14969029
> 
> 赞同：0
> 
> 时间：2013-02-19T22:42:38.543
> 
> 标签：android, edittextpreference

我正在使用这个类来拥有一个加密的 EditText，它在 Android < 4.2 上运行良好。在 Android 4.2+ 上它不再工作了，就像它不再保存文本一样，但我什么也没得到。有任何想法吗？

```
public class EncryptedEditTextPreference extends EditTextPreference
{
public EncryptedEditTextPreference(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public EncryptedEditTextPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public EncryptedEditTextPreference(Context context) {
    super(context);
}

@Override
public String getText() {
    String value = super.getText();
    return SimpleCrypto.decrypt(value);
}

@Override
protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
    super.setText(restoreValue ? getPersistedString(null) : (String) defaultValue);
}

@Override
public void setText(String text) {
    try {
        super.setText(SimpleCrypto.encrypt(text));
    } catch (Exception e) {
        Log.e(mytag, e.getMessage());
    }
}
} 
```

# objective-c - AVComposition 的 AVPlayer 播放速率

> ID：14969037
> 
> 赞同：0
> 
> 时间：2013-02-19T22:43:26.900
> 
> 标签：objective-c, audio, avfoundation, avplayer, avcomposition

我正在使用一个`AVPlayer`来处理多个资产的播放，方法是将它们全部放在一个`AVMutableComposition`. 一切都适用于正常播放，即`[player play]`，但是当我尝试类似的东西时`[player setRate:0.5]`，合成中只有一个轨道减慢到一半速度。所以我仍然有两首曲目同时播放，但一首是半速，另一首是全速。

有谁知道如何让他们都放慢到所需的播放速度？谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-27T23:11:14.630

你应该使用`AVComposition`而不是`AVMutableComposition`出于`AVPlayer`目的

```
AVComposition *immutableSnapshotOfMyComposition = [myMutableComposition copy]; 
```

# mingw - Boost asio ssl客户端构建错误？

> ID：14969042
> 
> 赞同：0
> 
> 时间：2013-02-19T22:43:45.060
> 
> 标签：mingw, boost-asio, libcurl, codeblocks

我在使用代码块 10.05 mingw 的 Windows XP SP3 上，我正在尝试构建 boost asio[客户端 ssl 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/ssl/client.cpp)。我尝试使用以下库与链接器设置一起编译文件。

```
 libwsock32.a  from the mingw lib
    libws2_32.a    from the mingw lib
    libboost_system-mgw44-d-1_52.a  this is what I built myself using mingw, the same version. I did this by using boost jam [http://theseekersquill.wordpress.com/2010/08/24/howto-boost-mingw/][2].

I got the next four libs from libcurl curl-7.28.1-devel-mingw32 

    libcrypto.a  
    libcrypto.dll.a
    libssl.a
    libssl.dll.a

    and the following are my linker settings:

    -lboost_system
    -lcrypto
    -lssl 
```

以下是链接器错误：

```
\mingw\lib\libboost_system.a(error_code.o):error_code.cpp|| undefined reference to `_Unwind_Resume'|
\mingw\lib\libboost_system.a(error_code.o):error_code.cpp|| undefined reference to `_Unwind_Resume'|
\mingw\lib\libboost_system.a(error_code.o):error_code.cpp|| undefined reference to `_Unwind_Resume'|
\mingw\lib\libboost_system.a(error_code.o):error_code.cpp:(.eh_frame+0xa3)||undefined reference to `__gxx_personality_v0'|
||=== Build finished: 4 errors, 0 warnings ===| 
```

我想知道的是，为什么 boost 不为此包含 ssl 库或为该事实包含 mingw ，有没有办法解决这个问题？我知道有两种类型的 mingw 目标代码 SJLJ 和 DW2 这可能是原因，但我不确定。

这是[libcurl curl-7.28.1-devel-mingw32的链接](http://curl.haxx.se/gknw.net/7.28.1/dist-w32/curl-7.28.1-devel-mingw32.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:53:29.377

我发现出了什么问题。我将我的 -lboost_system-mgw44-d-1_52.a 文件放入 mingw/lib 文件夹并使用`--lboost_system-mgw44-d-1_52`而不是链接`--libboost_system`，将所需的 DLL 放入项目文件夹中。解决了！

# mysql - mysql查询的唯一结果

> ID：14969043
> 
> 赞同：0
> 
> 时间：2013-02-19T22:43:48.493
> 
> 标签：mysql, sql

我希望 parent 在此查询中是唯一的：

```
select 
  *, 
  (select state_name 
   from tbl_states 
   where state_id = tbl_cities.parent_id) as parent 
from 
  tbl_cities 
ORDER BY 
  parent 
```

我试过使用：

```
select 
  *, 
  DISTINCT (select state_name 
            from tbl_states 
            where state_id = tbl_cities.parent_id) as parent 
from 
  tbl_cities 
ORDER BY 
  parent 
```

但它给出了一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:46:07.110

The order of terms is incorrect. You want

```
select DISTINCT * ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:50:32.950

从语法上讲，您应该将 DISTINCT 放在子选择中：

```
select * , 
 (select DISTINCT state_name 
  from tbl_states 
  where state_id = tbl_cities.parent_id) as parent 
from tbl_cities ORDER BY parent 
```

我不明白为什么你会得到多个状态，它们真的是相同的状态重复吗？如果有不同的状态，那么你就有不同的问题。在这种情况下，就语法而言，以下内容将起作用：

```
select * , 
 (select MAX(state_name) 
  from tbl_states 
  where state_id = tbl_cities.parent_id) as parent 
from tbl_cities ORDER BY parent 
```

但是语义可能不符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T22:51:21.077

像这样重写，并获得符合 ANSI 的额外好处。

```
select 
  c.*, parent.state_name
from 
  tbl_cities c
  left join (
    select 
      state_id, state_name 
    from 
      tbl_states 
    group by 
      state_id, state_name
  ) as parent 
  on parent.state_id = c.parent_id
order by 
  parent.state_name; 
```

# rackspace-cloud - Rackspace Cloudfiles 中是否有等效的 Amazon S3 存储桶策略？

> ID：14969049
> 
> 赞同：0
> 
> 时间：2013-02-19T22:44:28.857
> 
> 标签：rackspace-cloud, cloudfiles

Rackspace Cloudfiles 中是否有等效的[Amazon S3 存储桶策略？](http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)我们希望将某些容器的访问限制为特定的 IP 地址。没有其他 IP 地址应该能够访问这些云文件容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T15:28:07.763

不，没有基于 IP 或主机的访问限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T14:24:13.380

截至今天还没有，我刚刚与那里的技术人员讨论过这个问题，特别是我只是在文档中错过了它。并发现他们对保护容器中的内容没有 IP 限制.. 不知道他们怎么忽略了那个！

# android - 如何在 android 上退出 webkitEnterFullscreen 模式？

> ID：14969052
> 
> 赞同：0
> 
> 时间：2013-02-19T22:44:47.727
> 
> 标签：android, jquery, html

在我的网页上，我使用以下 jQuery 代码进入全屏模式并播放视频：

```
$('#video-play').tap(function(){
    $(this).find('video').get(0).webkitEnterFullScreen();
    $(this).find('video').get(0).play();
}); 
```

现在，有趣的是，安卓全屏网络播放器上没有退出按钮，所以我完全不知道如何停止和退出视频。

有人知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:21:11.567

假设`#video-play`是一个围绕您的视频元素的容器。你应该能够做到：

```
$('#video-play').tap(function(){
    $(this).find('video')[0].webkitEnterFullScreen();
    $(this).find('video')[0].play();
}); 
```

如果`#video-play`是一个播放按钮，没有看到你的 html，我会说试试这个：

```
 $('#video-play').tap(function(){
    $(this).closest('video')[0].webkitEnterFullScreen();
    $(this).closest('video')[0].play();
}); 
```

当然，提供 html 可能会有所帮助。

到目前为止，我刚刚找到了退出视频的方法，需要你点击安卓手机上的后退按钮。

# sql - 如何查询同一字段的 2 列？

> ID：14969053
> 
> 赞同：1
> 
> 时间：2013-02-19T22:44:50.513
> 
> 标签：sql

假设我有 2 张桌子：

```
USER(uid, uname);
ITEM(iid, description);
TRANSACTION(buyer, seller, item); 
```

`transaction.buyer`和`transaction.seller`参考资料`user.uid`。 `transaction.item`参考`item.iid`

如何查询交易的买卖双方姓名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T22:46:35.603

你需要两个连接：

```
select t.*, b.uname as buyerName, s.uname as sellerName
from transaction t join
     user b
     on t.buyer = b.uid join
     user s
     on t.seller = s.uid 
```

# c# - 将图像从 URL 加载到图片框

> ID：14969058
> 
> 赞同：0
> 
> 时间：2013-02-19T22:45:10.993
> 
> 标签：c#, url, picturebox

我正在尝试将几个图像从 URL 加载到图片框。我的问题是“pictureBox.Load(URL)”或“pictureBox.ImageLocation = URL”不起作用。我不知道为什么，我认为是因为 URL 没有像 .jpg 这样的扩展名。

```
private void button3_Click(object sender, EventArgs e)
{
    string URL = "https://internetmarke.deutschepost.de/internetmarke/franking/image/view/1403556118.do";
    pictureBox1.ImageLocation = URL;
} 
```

该 URL 在 Firefox 中有效，并显示了图片。但在 IE 中它不起作用，我认为这与它在 .NET 中不起作用的原因相同。

IE 显示“未知文件类型”并希望下载“1403556118.do”文件。

在 C# 中，我只在图片框中得到一个红色的 X。

当我第一次尝试在 IE 中加载它时，它可以在图片框（IE 缓存？）

有人知道将这些图像加载到图片框的另一种可能性吗？

编辑：添加了示例代码。

* * *

今天，我在三台不同的计算机上测试了代码，并使用了不同的 Internet 连接；家庭 DSL、公司 DSL 和 UMTS/3G 冲浪棒。所有这些都没有任何代理，也没有经过病毒扫描测试。

在每种情况下它都不起作用，就像我在第一篇文章中写的一样。

在我访问 Firefox 或 IE 中的一些 URL 后，这些 URL 的图像出现在我的应用程序中。所有其他人仍然是一个红色的 X。

是否有任何不同的（老派^^）方法来加载这些图像，比如将 HTTP-Stream 下载到字节数组中，然后将其复制到 pictureBox.Image 中？

迪诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:56:36.967

```
pictureBox1.ImageLocation = "http://www.micoequipment.com/products/large/MF_260_l.jpg"; //should work 
```

确保可以通过网络浏览器访问该图像（之前对其进行测试）。另外，请确保您调用的是正确的图片框 :) 它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:45:51.517

@安德鲁：

```
pictureBox1.ImageLocation = "http://www.micoequipment.com/products/large/MF_260_l.jpg"; 
```

这有效！

```
pictureBox1.ImageLocation = "https://internetmarke.deutschepost.de/internetmarke/franking/image/view/1403556118.do"; 
```

这不行！

您的链接和我的链接都可以在 Firefox 中使用。但我的链接在 IE 中不起作用，在 .NET 和图片框中也不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-17T15:49:29.297

这应该可以工作，因为您正在从远程 URL 加载图像：

```
pictureBox1.Load(URL); 
```

# vba - Distribute pictures in Word 2010 across multiple pages

> ID：14969064
> 
> 赞同：1
> 
> 时间：2013-02-19T22:45:27.617
> 
> 标签：vba, image, ms-word

I want to take a random number of pictures that are all pasted onto the first "Page" of a Word document and distribute them across multiple pages in the same document, 2 per page. So if there were 10 pictures on the first page, 1 and 2 would stay on the first page. 3 and 4 would be moved to the second (3 at the top, 4 at the bottom). 5 and 6 would move to the third page, etc...

And to make things a little more complicated, a string with the image number has to be placed at the bottom of each image. And each image needs to be positioned and sized based on if they are horizontal/vertical, horizontal/horizontal, vertical/vertical, or vertical/horizontal.

I've got the code written, but the added breaks aren't showing up where I thought they would.

Anyone feel like reviewing some code? P.S. I'm very new to VBA so please don't be too harsh. Constructive is always welcome though.

```
Private Sub FormatPics()
    PictCount = ActiveDocument.Shapes.Count

    For PictCurrn = 1 To PictCount
        ' If this is an odd pictcurrn, then we're at the first
        ' image for the page. So get the H and V (or N) for the
        ' pictures that belong on the page
        If (PictCurrn = 1) Or ((PictCurrn Mod 2) = 1) Then
            With ActiveDocument.Shapes(PictCurrn)
                Pic1L = .Left
                Pic1T = .Top
                Pic1W = .Width
                Pic1H = .Height
                If Pic1W > Pic1H Then
                    Pic1X = "H"
                Else
                    Pic1X = "V"
                End If
            End With

            If PictCurrn < PictCount Then
                With ActiveDocument.Shapes(PictCurrn + 1)
                    Pic2L = .Left
                    Pic2T = .Top
                    Pic2W = .Width
                    Pic2H = .Height
                    If Pic2W > Pic2H Then
                        Pic2X = "H"
                    Else
                        Pic2X = "V"
                    End If
                End With
            Else
                Pic2X = "N"
            End If

            ' Next we set the picture format for the current 2 pictures

            ' Picture Format 1
            If (Pic1X = "H") And (Pic2X = "H") Then
                PictFormat = 1
                Pic1Left = CentimetersToPoints(0)
                Pic1Top = CentimetersToPoints(0)
                Pic1Width = CentimetersToPoints(15.3)
                Pic1Height = CentimetersToPoints(10.21)

                Pic2Left = CentimetersToPoints(0)
                Pic2Top = CentimetersToPoints(15.04)
                Pic2Width = CentimetersToPoints(15.3)
                Pic2Height = CentimetersToPoints(10.21)
            End If

            ' Picture Format 2
            If (Pic1X = "V") And (Pic2X = "H") Then
                PictFormat = 2
                Pic1Left = CentimetersToPoints(2.83)
                Pic1Top = CentimetersToPoints(-0.89)
                Pic1Width = CentimetersToPoints(10.21)
                Pic1Height = CentimetersToPoints(15.3)

                Pic2Left = CentimetersToPoints(1.05)
                Pic2Top = CentimetersToPoints(15.41)
                Pic2Width = CentimetersToPoints(15.3)
                Pic2Height = CentimetersToPoints(10.21)
            End If

            ' Picture Format 3
            If (Pic1X = "H") And (Pic2X = "V") Then
                PictFormat = 3
                Pic1Left = CentimetersToPoints(0.42)
                Pic1Top = CentimetersToPoints(-0.69)
                Pic1Width = CentimetersToPoints(15.3)
                Pic1Height = CentimetersToPoints(10.21)

                Pic2Left = CentimetersToPoints(2.83)
                Pic2Top = CentimetersToPoints(10.43)
                Pic2Width = CentimetersToPoints(10.21)
                Pic2Height = CentimetersToPoints(15.3)
            End If

            ' Picture Format 4
            If (Pic1X = "V") And (Pic2X = "V") Then
                PictFormat = 4
                Pic1Left = CentimetersToPoints(2.83)
                Pic1Top = CentimetersToPoints(-0.89)
                Pic1Width = CentimetersToPoints(10.1)
                Pic1Height = CentimetersToPoints(13.3)

                Pic2Left = CentimetersToPoints(2.83)
                Pic2Top = CentimetersToPoints(13.09)
                Pic2Width = CentimetersToPoints(10.1)
                Pic2Height = CentimetersToPoints(13.3)
            End If

            ' Picture Format 5
            If (Pic1X = "H") And (Pic2X = "N") Then
                PictFormat = 5
                Pic1Left = CentimetersToPoints(0.42)
                Pic1Top = CentimetersToPoints(-0.69)
                Pic1Width = CentimetersToPoints(15.3)
                Pic1Height = CentimetersToPoints(10.21)
            End If

            ' Picture Format 6
            If (Pic1X = "V") And (Pic2X = "N") Then
                PictFormat = 6
                Pic1Left = CentimetersToPoints(2.83)
                Pic1Top = CentimetersToPoints(-0.89)
                Pic1Width = CentimetersToPoints(10.21)
                Pic1Height = CentimetersToPoints(15.3)
            End If
        End If

        ' Create the index sring
        PageString = CStr(PictCurrn)
        While Len(PageString) < 3
            PageString = "0" & PageString
        Wend
        PageString = "[" & PageString & "]"

        With ActiveDocument.Shapes(PictCurrn)
            ' Handle Picture1
            If (PictCurrn = 1) Then
                ' Select the picture
                .Select

                ' Move it to the pre-determined position
                .Left = Pic1Left
                .Top = Pic1Top
                .Width = Pic1Width
                .Height = Pic1Height

                ' Add the PageString tag
                Selection.EndKey Unit:=wdLine
                Selection.TypeParagraph
                Selection.InsertAfter PageString
            End If

            If (PictCurrn = 2) And (PictFormat < 5) Then
                ' Select the picture
                .Select

                ' Move it to the pre-determined position
                .Left = Pic2Left
                .Top = Pic2Top
                .Width = Pic2Width
                .Height = Pic2Height

                ' Add the PageString tag
                Selection.EndKey Unit:=wdLine
                Selection.TypeParagraph
                Selection.InsertAfter PageString

                ' It's the job of the second picture to add the page break after itself
                Selection.InsertBreak Type:=wdPageBreak
            End If

            If (PictCurrn > 2) And ((PictCurrn Mod 2) = 1) Then
                ' First picture for new page
                .Select
                Selection.Cut
                Selection.EndKey Unit:=wdLine
                Selection.Paste

                .Left = Pic1Left
                .Top = Pic1Top
                .Width = Pic1Width
                .Height = Pic1Height

                ' Add the PageString tag
                Selection.EndKey Unit:=wdLine
                Selection.TypeParagraph
                Selection.InsertAfter PageString
            End If

            If (PictCurrn > 2) And ((PictCurrn Mod 2) = 0) And (PictFormat < 5) Then
                ' Second picture for new page
                .Select
                Selection.Cut
                Selection.EndKey Unit:=wdLine
                Selection.Paste

                .Left = Pic2Left
                .Top = Pic2Top
                .Width = Pic2Width
                .Height = Pic2Height

                ' Add the PageString tag
                Selection.EndKey Unit:=wdLine
                Selection.TypeParagraph
                Selection.InsertAfter PageString

                ' It's the job of the second picture to add the page break after itself
                Selection.InsertBreak Type:=wdPageBreak
            End If
        End With
    Next PictCurrn
End Sub 
```

# json - Dojo Datagrid not rendering json data

> ID：14969066
> 
> 赞同：0
> 
> 时间：2013-02-19T22:45:37.930
> 
> 标签：json, spring-mvc, dojo

I have a spring mvc based app that returns me a list of products which I wish to render in a **dojo datagrid**.I have used a **org.springframework.web.servlet.view.ContentNegotiatingViewResolver** that uses **MappingJackson2JsonView** as the default view.

Here is my spring view configuration

```
 <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">  
  <property name="mediaTypes">  
    <map>  
      <entry key="html" value="text/html"/>  
      <entry key="json" value="application/json"/>  
    </map>  
  </property>     
  <property name="defaultViews">  
    <list>  
      <bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView">  
      </bean>  
    </list>  
</property>  
</bean> 
```

this is my basic dojo script

```
<script>
    require([
        "dojo/store/JsonRest",
        "dojo/store/Memory",
        "dojo/store/Cache",
        "dojox/grid/DataGrid",
        "dojo/data/ObjectStore",
        /*"dojo/query",*/
        "dojo/domReady!"
    ], function(JsonRest, Memory, Cache, DataGrid, ObjectStore, query){
        var myStore, dataStore, grid;
        myStore = Cache(JsonRest({target:"products.do"}), Memory());
        alert("MyStore : "+JSON.stringify(myStore));
        grid = new DataGrid({
            store: dataStore = new ObjectStore({objectStore: myStore}),
            structure: [
                {name:"Id", field:"id", width: "200px"},
                {name:"Description", field:"description", width: "200px", editable: true},
                {name:"Price", field:"price", width: "200px"},
                {name:"Category", field:"category", width: "200px", editable: true}                     
            ]
        }, "gridDiv"); // make sure you have a target HTML element with this id
        grid.startup();
        alert("DataStore : "+JSON.stringify(dataStore));
    });
</script> 
```

There is no javascript error however all that i see is a empty grid. On checking with Firebug I see this in the response

![enter image description here](../Images/b7f7f229bebe2af2e6ea89b93c5f1c7a.png)

So my serverside to front end hookup seems to be correct.What is not clear to me is despite this the grid doesn't reflect any rows.Why could this be happening?What am I missing or doing wrong?Do let me know if any other relevant bit of information is required

# sql - 在 SQLite 中获取数字的 ceil 值

> ID：14969067
> 
> 赞同：9
> 
> 时间：2013-02-19T22:45:59.067
> 
> 标签：sql, sqlite, ceil

所以我看到[这个问题](https://stackoverflow.com/questions/7129249/getting-the-floor-value-of-a-number-in-sqlite)有一个很好的答案，但我想无论如何都要四舍五入，而不是无论如何都要四舍五入。例如，在转换 int 之前向其添加 1 是行不通的，因为它会将 5.0“四舍五入”为 6.0。

那么我应该如何`ceil`在 SQLite 中实现呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T23:56:33.043

这个怎么样？

```
select (case when x = cast(x as int) then cast(x as int)
             else 1 + cast(x as int)
        end) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-21T22:27:46.370

这将更优雅地为您提供相同的答案：

```
SELECT CAST(x+1-1e-n AS INT); 
```

（假设您的精度不会大于**n**小数点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T08:00:24.043

使用 php 你可以很容易地：

```
$db->createFunction('ceil', 'ceil', 1);

$db->createFunction('floor', 'floor', 1);

select ceil(\`column`) from table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-03T18:33:52.020

一些有用的答案，我发现这个解决方案也很简单。

```
select round(column+0.5) from table; 
```

这意味着如果您的原始数字 < 0.5，您总是向上舍入，或者如果您的原始数字 > 0.5，则向下舍入

# java - Prevent drawing over the same area of a Graphics2D

> ID：14969071
> 
> 赞同：0
> 
> 时间：2013-02-19T22:46:06.860
> 
> 标签：java, graphics, awt, shape, clip

Language: Java.

Hi, I need to prevent drawing over the same location of a Graphics2D more than once. For example, if the user draws using a BasicStroke with a round cap and a width of 10 over a certain area, that same area cannot be drawn on a second time.

The reason I want to do this is so that the user can draw (free-hand) translucent colours over an image without drawing over the same stroke (thus increasing the density of the colour and reducing its translucency).

I've tried storing the shapes of all the strokes made by the user (as Area objects that subtract the shape) and then clipping the Graphics2D by the intersection of all those Area objects.

This almost works, but the 'shape' obtained by the clip is not quite the same as the 'shape' drawn by the stroke - it is out by a couple of pixels.

Does anyone have any other ideas that might work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:45:31.843

这个概念相对简单，你需要有多个可以渲染的图层......

有多种不同的方法可以解决这个问题。您可以维护一个`Point`s 列表，并在每个绘制周期中，将这些点渲染到后备缓冲区，然后您将使用`AlphaComposite`.

您可以（如本例那样）直接绘制到后备缓冲区和`repaint`内容，再次使用 a`AlphaComposite`来呈现更高层。

你可以有任意数量的层...

![在此处输入图像描述](../Images/34d21d5f86f71bf51e62aae295f1d303.png)

```
import java.awt.AlphaComposite;
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class PaintOver {

    public static void main(String[] args) {
        new PaintOver();
    }

    public PaintOver() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new MapPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public class MapPane extends JPanel {

        private BufferedImage background;
        private BufferedImage foreground;

        public MapPane() {
            try {
                background = ImageIO.read(getClass().getResource("/TreasureMap.png"));
                foreground = new BufferedImage(background.getWidth(), background.getHeight(), BufferedImage.TYPE_INT_ARGB);
            } catch (Exception e) {
                e.printStackTrace();
            }

            MouseAdapter mouseHandler = new MouseAdapter() {
                private Point startPoint;

                @Override
                public void mousePressed(MouseEvent e) {
                    startPoint = e.getPoint();
                }

                @Override
                public void mouseReleased(MouseEvent e) {
                    startPoint = null;
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    Point endPoint = e.getPoint();
                    Graphics2D g2d = foreground.createGraphics();

                    Point offset = getOffset();

                    Point from = new Point(startPoint);
                    from.translate(-offset.x, -offset.y);
                    Point to = new Point(endPoint);
                    to.translate(-offset.x, -offset.y);
                    g2d.setColor(Color.RED);
                    g2d.setStroke(new BasicStroke(4, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
                    g2d.draw(new Line2D.Float(from, to));
                    g2d.dispose();
                    startPoint = endPoint;
                    repaint();
                }
            };

            addMouseListener(mouseHandler);
            addMouseMotionListener(mouseHandler);

        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        protected Point getOffset() {
            Point p = new Point();
            if (background != null) {
                p.x = (getWidth() - background.getWidth()) / 2;
                p.y = (getHeight() - background.getHeight()) / 2;
            }
            return p;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                Point offset = getOffset();

                g2d.drawImage(background, offset.x, offset.y, this);
                g2d.setComposite(AlphaComposite.SrcOver.derive(0.5f));
                g2d.drawImage(foreground, offset.x, offset.y, this);
                g2d.dispose();
            }
        }
    }
} 
```

# c++ - C++ Comparing Vectors

> ID：14969073
> 
> 赞同：1
> 
> 时间：2013-02-19T22:46:16.187
> 
> 标签：c++, vector, comparison

I have a class `Table` which has a member function `std::vector<Attribute> attributeVec();` where `Attribute` is a seperate class.

I am working with code that would like to do something of the form

```
if (tableA.attributeVec() == tableB.attributeVec()){ ... 
```

Where `tableA` and `tableB` are `Table` objects. I'm getting a lot of weird compiler errors in Visual Studio 2012 that say things like

```
binary '==' : no operator found which takes a left-hand operand of type 'const DatabaseAPI::Attribute' (or there is no acceptable conversion) 
```

So I believe the vectors cannot be compared like that. **It would make my life easier if I could get this code to compile**, but how could I do that? Can I define the operator? Do I need to rewrite some of the `Attribute` class so they can be compared?

Specifics: After writing an API, I was given a set of tests which, if reasonable, need to work. While I believe this at least makes unreasonable assumptions about my code (given my API), it wouldn't hurt to implement this in my code.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:47:58.933

You need `operator==` implemented in your `Attribute` class:

```
class Attribute {
  bool operator== (const Attribute& other) const {
   // return true if *this == other, otherwise return false
  }
} 
```

BTW: As juanchopanza noticed, it is possible that you could return just a reference to the vector from your `attributeVec()` function, instead of a copy of it:

```
std::vector<Attribute>& attributeVec(); 
```

That would be more efficient and the comparison (using the `operator==`) in an expression:

```
o1.attributeVec() == o2.attributeVec() 
```

still work OK.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T22:48:04.763

Vectors can be compared using `==`, but their contained type (`Attribute` in this case) must have a comparison `operator==`. If you give that to the `Attribute` class, the comparison should work.

On an unrelated note, that his method

```
std::vector<Attribute> attributeVec(); 
```

is returning a copy of a vector. You have to think whether this is the behaviour you really want.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T22:49:03.913

The error is basically self explanatory, you need `operator==` on `Attribute`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T23:11:11.913

看看[`std::equal`](http://www.cplusplus.com/reference/algorithm/equal/)；第二种形式允许您指定自己的比较函数。

例子：

```
bool compareAttributes (const Attribute &a, const Attribute &b) { /* ... */ }

// assumes attributeVec() returns a reference; if not, then remove '&'
const std::vector<Attribute>& attribsA = tableA.attributeVec();
const std::vector<Attribute>& attribsB = tableB.attributeVec();

if(attribsA.size()==attribsB.size() &&
    std::equal(attribsA.begin(), attribsA.end(),
    attribsB.begin(), compareAttributes))
{ /* ... */ } 
```

理想情况下，`attributeVec()`返回对属性向量的*引用。*如果你不能这样写，那么`attribsA`and`attribsB`不应该被定义为引用。（在这种情况下，您可能会考虑编写一个`Table`不需要生成向量的比较函数`Attribute`。）

# python - How to Increase Matplotlib Basemap Size?

> ID：14969077
> 
> 赞同：7
> 
> 时间：2013-02-19T22:46:40.380
> 
> 标签：python, python-2.7, matplotlib

How can I increase the size of the basemap? It is small compared to the size of the accompanying color bar. My basemap includes the geographic locations that I want, it is just physically too small. Thanks in advance for any guidance you can provide

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-26T11:07:53.417

一种可能是在调用`plt.figure(figsize=(WIDTH, HEIGHT))`地图对象的任何绘图方法之前调用，如下所示：

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

plt.figure(figsize=(12,6))
map = Basemap()
map.drawcoastlines()
map.plot() 
```

# php - Is it possible to upload only the first 10 rows of a CSV file using MySQL - LOAD DATA LOCAL INFILE?

> ID：14969080
> 
> 赞同：6
> 
> 时间：2013-02-19T22:46:46.320
> 
> 标签：php, mysql, load, local

Is it possible to only upload the first 10 rows of a CSV file using MySQL - LOAD DATA LOCAL INFILE? I tried using LIMIT but it’s not working.

Here is my PHP script:

```
 $sql = "LOAD DATA LOCAL INFILE '".@mysql_escape_string($this->file_name).
         "' INTO TABLE branches
              FIELDS TERMINATED BY ',' ENCLOSED BY '\"'
              LINES TERMINATED BY '\r\n'
              IGNORE 1 LINES                  
              (
                Name,
                Address_Line_1, 
                City, 
                State, 
                Country_Code,
                Postal_Code, 
                Main_Phone, 
                Google_Places_Link, 
                Custom_Directory_1, 
                Custom_Directory_2, 
                Custom_Directory_3,  
                business_id,
                username
              ) SET branches.business_id=(".$this->business_id."), branches.username=('".$this->username."') LIMIT 0,10  
              "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-21T23:25:02.133

下面的解决方案为`LOAD DATA INFILE`. 使用`IGNORE n LINES`并设置为*总行数 -*您要测试的任何小数字。

这不会节省文件扫描，不优雅，并且向后工作（字面意思）。但是对于长度小于一百万行的中等长度的表，对我来说它对测试很有用。（它可能适用于更大的桌子，但我没有机会测试它。）

例如，一个有 101,773 行的大表的最后 20 行将是

```
LOAD DATA INFILE 'c:/temp/input/datafile.csv'
    -- IGNORE
    INTO TABLE `mytable`

    CHARACTER SET utf8mb4
    FIELDS  TERMINATED BY '\t' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\b'
    LINES TERMINATED BY '\r\n'
    IGNORE 101753 LINES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-05T13:38:15.220

通过最后的 mysql 文档[https://dev.mysql.com/doc/refman/8.0/en/load-data.html](https://dev.mysql.com/doc/refman/8.0/en/load-data.html)：

```
LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE 'file_name'
    [REPLACE | IGNORE]
    INTO TABLE tbl_name
    [PARTITION (partition_name [, partition_name] ...)]
    [CHARACTER SET charset_name]
    [{FIELDS | COLUMNS}
        [TERMINATED BY 'string']
        [[OPTIONALLY] ENCLOSED BY 'char']
        [ESCAPED BY 'char']
    ]
    [LINES
        [STARTING BY 'string']
        [TERMINATED BY 'string']
    ]
    [IGNORE number {LINES | ROWS}]
    [(col_name_or_user_var
        [, col_name_or_user_var] ...)]
    [SET col_name={expr | DEFAULT},
        [, col_name={expr | DEFAULT}] ...] 
```

没有办法/命令可以做到你想要的。

# sql - SQL Server 2008 R2 中的多个架构权限

> ID：14969085
> 
> 赞同：0
> 
> 时间：2013-02-19T22:47:15.947
> 
> 标签：sql, sql-server-2008-r2

我们正在将数据库从 SQL Server 2000 迁移到 SQL Server 2008 R2，但我们的架构遇到了问题。在 SQL Server 2000 中，如果您没有在对象名称前加上所有者/模式（例如`SELECT * FROM blah`，而不是`dbo.blah`），SQL Server 仍然可以解决。即使您的对象在非 dbo 所有者中，这也有效。

在 SQL Server 2005 中，这已按此处所述进行了更改：http: [//blogs.msdn.com/b/mssqlisv/archive/2007/03/23/upgrading-to-sql-server-2005-and-default-schema-setting .aspx](http://blogs.msdn.com/b/mssqlisv/archive/2007/03/23/upgrading-to-sql-server-2005-and-default-schema-setting.aspx)。

我可以通过使用户的默认模式 xyz 而不是 dbo 来绕过具有 2 个模式的数据库。我遇到的问题是在有第三个模式（abc.blah）的数据库中。当我将用户设置为默认 xyz 时，他们可以顺利进入 dbo，但在尝试从 abc 中选择不带架构前缀的内容时会出现 Invalid Object 错误（abc.blah 工作正常）。

当然，一开始就不应该这样编码，但那是一场不同的战斗。我已经验证权限不是问题。

我敢肯定，其他人也遇到过这种情况。有没有人找到除了修复代码之外的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:57:51.233

这里没有太多的魔法。修复代码。

假设您在两个模式中都没有同名对象，您可以创建大量同义词，例如：

```
CREATE SYNONYM xyz.foo FOR dbo.foo; 
```

...但这将与修复代码一样混乱。

# google-chrome - Google Chrome show ajax response

> ID：14969086
> 
> 赞同：3
> 
> 时间：2013-02-19T22:47:27.043
> 
> 标签：google-chrome

I am using Google Chrome Developer Tools to try to see the response of some AJAX url's.

The problem is that when I click on the NETWORK TAB, then on the link, then on RESPONSE, I see this text : "THIS REQUEST HAS NO RESPONSE DATA AVAILABLE".

I have been using FIREBUG and I am 100% sure there is a response from that page.

Can somebody help with this ?

Thank you !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T16:37:04.063

您可以尝试手动检查是否有响应因此，通常在处理 ajax 时，在大多数情况下我们使用 POST，您可以创建一个“相同结构”页面来处理相同的输入/响应，但使用 Get 方法并打印输出数据正常。

这样您就可以很容易地查看脚本中是否有任何响应/错误

# javascript - jQuery 选择菜单 1.10 版不触发更改

> ID：14969088
> 
> 赞同：0
> 
> 时间：2013-02-19T22:47:42.533
> 
> 标签：javascript, jquery, jquery-ui-selectmenu

我已将 1.10 的 jQuery 版本添加到我的项目和 selectmenu 小部件中，但我无法触发更改事件。

在我升级到 1.10 之前，选择菜单运行良好。

我需要做什么才能使它正常工作？

```
var getProjectInfo=function(){

}

--I've tried this way

   var sel = helper.selectMaker.makeSelect(data);
       sel.change = getProjectInfo;
       $('#projsPH').appendChild(data);
       $(sel).selectmenu();

--And this way

**This way throws an error of selectmenu widget does not have a method change.

   var sel = helper.selectMaker.makeSelect(data);
       $('#projsPH').appendChild(data);
       $(sel).selectmenu('change', getProjectInfo); 
```

------------更新我已经让它像

```
$(sel).selectmenu({change:getProjectInfo}); 
```

但选择不会崩溃

从 Google 获取样式

[http://code.google.com/p/jquery-ui/source/browse/branches/labs/selectmenu/ui.selectmenu.css?r=2776](http://code.google.com/p/jquery-ui/source/browse/branches/labs/selectmenu/ui.selectmenu.css?r=2776)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:25:58.123

您正在使用非常过时的文件。我猜你说的是 jQuery UI 1.10。

尝试较旧但更新的版本：[https](https://github.com/fnagel/jquery-ui/) ://github.com/fnagel/jquery-ui/ 不确定此版本是否可以在 UI 1.10 上正常工作，尚未测试

或者，更好的是，使用官方但尚未发布的版本：[https ://github.com/jquery/jquery-ui/tree/selectmenu](https://github.com/jquery/jquery-ui/tree/selectmenu)

# java - whats wrong with my java code to compute the say of the week for a given date

> ID：14969093
> 
> 赞同：0
> 
> 时间：2013-02-19T22:48:05.480
> 
> 标签：java

The pseudocode for an algorithm to compute the day of the week for a given date from the year 1753 onwards is as follows. Let d be the day of the month (from 1 up to 31), m be an integer denoting the month of the year (where 1 denotes January, 2 denotes February, and so on), and y denote the year. The algorithm then performs the following steps in order:

```
If m is less than 3
Add 12 to m and subtract one from y
End if
Set C to be the year of the century (e.g., 10 for the year 2010)
Set D to be the century (e.g., 20 for the year 2010)
Divide 13 * (m + 1) by 5 and call the quotient W
Divide C by 4 and call the quotient X
Divide D by 4 and call the quotient Y
Set Z to be W + X + Y + d + C - 2 * D
Divide Z by 7 and call the remainder day
If day is less than 0
Add 7 to day
End if 
```

The value of day then gives the day of the week, with 0= Saturday, 1= Sunday, up to 6= Friday

the code i have so far is:

```
public static String dayOfWeek( SimpleDate date ) {
        // TO BE COMPLETED
        int[] d = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31};
        int[] m = {1,2,3,4,5,6,7,8,9,10,11,12};
        int y = SimpleDate(int year);

        if (m < 3) {
            m + 12;
            y - 1;
        }
        C = SimpleDate(int year[2:3];
        D = SimpleDate(int year[0:1];
        W = 13 * (m + 1) / 5;
        X = C / 4;
        Y = D / 4;
        Z = W + X + Y + d + C - 2 * D;
        day = Z % 7;
        if (day < 0) {
            day + 7;
        } 
```

im not sre how to set the year for C and D and at the beginning aswell. also where i ahve used code such as m + 12 i get an error saying that + is not a statment

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:48:54.707

How about using `java.util.Calendar` and do

```
calendar.get(Calendar.DAY_OF_WEEK); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:51:39.483

使用[乔达](http://joda-time.sourceforge.net/userguide.html)：

```
MutableDateTime dateTimeInstance = new MutableDateTime().setYear(year).setMonth(month).setDay(dayOfMonth); // and so on per [the docs](http://joda-time.sourceforge.net/api-release/org/joda/time/MutableDateTime.html)
String dayName = dateTimeInstance.dayOfWeek().getAsText(); 
```

# wordpress - wordpress 显示额外菜单

> ID：14969098
> 
> 赞同：0
> 
> 时间：2013-02-19T22:48:20.703
> 
> 标签：wordpress, menu

我创建了一个带有 6 个菜单的自定义主题

```
 // Load Menu
function register_my_menus() {
    register_nav_menus( array(
    'home_menu' => 'Home Menu',
    'header_menu' => 'header Menu',
    'brand_design' => 'Brand Design Menu', 'container' => false,
    'cycling_design' => 'Cycling Design Menu', 'container' => false,
    'wine_lable_design' => 'Wine Label Design Menu', 'container' => false,
    'fun_projects' => 'Fun PLay Projects Menu', 'container' => false
    ));
 }
 add_action( 'init', 'register_my_menus' ); 
```

但正如您从图片中看到的那样，它添加了一个额外的屏幕帽，有人有什么建议吗？

![在此处输入图像描述](../Images/8fcc3c2ed1135955b72ca29b2c5189da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:51:56.857

数组中的“容器”项被识别为菜单位置。删除这些项目以获得预期的结果。

```
// Load Menu
function register_my_menus() {
    register_nav_menus( array(
    'home_menu' => 'Home Menu',
    'header_menu' => 'header Menu',
    'brand_design' => 'Brand Design Menu'
    'cycling_design' => 'Cycling Design Menu'
    'wine_lable_design' => 'Wine Label Design Menu'
    'fun_projects' => 'Fun PLay Projects Menu'
    ));
 }
 add_action( 'init', 'register_my_menus' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:53:13.627

必须在其他地方注册另一个菜单。做一个`var_dump`看看`get_registered_nav_menus`你所有的菜单。然后找出那个额外的无名的定义在哪里。

```
var_dump(get_registered_nav_menus()); 
```

# extjs4 - 折叠时重置树节点

> ID：14969109
> 
> 赞同：1
> 
> 时间：2013-02-19T22:49:16.230
> 
> 标签：extjs4

我有一个树面板，其节点是从服务器动态加载的。当用户展开一个节点时，它将从服务器加载该节点的子节点并将它们添加到该节点。这部分正在工作。

当用户折叠一个节点时，我想从该节点中删除所有子节点并“重置”该节点，以便它可以再次展开。

到目前为止，我在折叠事件处理程序中有以下内容：

```
function(node){
    node.removeAll(); // remove all child nodes
                      // this causes the expand arrow to disappear

    node.expandable = true;
    // ... now what?
} 
```

我如何“重置”节点（“......现在怎么办？”）以便视图知道再次添加展开箭头？

本质上，我想要折叠然后重新展开一个节点以重新加载该节点下的所有子节点的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:59:39.407

解决方案是将`loaded`字段设置为`false`. “扩展”属性不需要更改。

最终解决方案是：

```
function(node){
    node.removeAll(); // remove all child nodes
    node.set('loaded', false); // tell node it can be expanded again
} 
```

# ajax - 更好的架构：使用 JQuery Ajax 或 JSP 来保护 Servlet 的 Oauth？

> ID：14969110
> 
> 赞同：0
> 
> 时间：2013-02-19T22:49:20.643
> 
> 标签：ajax, jsp, servlets, oauth

在之前的一篇文章中，我曾询问 SO 社区什么是保护我的 Servlet 的最佳方式，这样用户就不能简单地从 src 中提取我的 url 并将其用作各种免费的 api：

[如何仅将 Servlet 保留到我的站点（某种身份验证）？](https://stackoverflow.com/questions/14865009/how-to-keep-servlets-to-my-site-only-some-sort-of-authentication)

我被指示查看 OAuth 1.0，因为它稳定且支持良好。

再想一想，如果我使用 JSP 代替 OAuth 和 jquery ajax 会怎样？

我仍然可以将所有主要的硬编码文件放在我的 Varnish 服务器上，而那些需要动态内容的文件将是 JSP 文件，它们为它们的数据调用 Servlet，因此不会暴露任何 Servlet 地址。

**问题：**这个 JSP 模型在生产环境中是否可以接受？还是最好的情况是使用 jquery ajax 和 oauth？这两种不同场景之间的速度差异是否很大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:01:04.593

在上一个问题中。我不知道 OAuth 是严格的答案（尽管它可能会被使用）。OAuth 实际上更倾向于允许通过第三方身份验证和授权使用您的服务。在你的情况下，我不知道那个第三方会是谁。

听起来您可能想要的是身份验证令牌的概念。因此，在客户端调用您的服务之前，他们需要调用您的一项服务以获取身份验证令牌。然后，针对您的 servlet 的所有请求也需要传递此身份验证令牌，并在您发出响应之前验证该令牌是否处于活动状态。

您提到您的 servlet 是无状态的（这当然适用于许多 API），但我想知道客户端应用程序作为一个整体是否具有状态，以便它可以通过某些事件（例如客户端应用程序登录）获取这样的令牌并且是能够存储用于针对 servlet 的每个请求发送的令牌，以及能够将刷新的令牌作为接近到期的令牌进行处理。

# scala - 常见于scala的Array和List

> ID：14969112
> 
> 赞同：1
> 
> 时间：2013-02-19T22:49:33.937
> 
> 标签：scala

我是 scala 的新手（刚开始学习它），但发现对我来说很奇怪：有类 Array 和 List，它们都有这样的方法/函数`foreach`，`forall`等等`map`。但是这些方法中的任何一个都不是继承的来自一些特殊的类（特征）。从 java 的角度来看，如果`Array`并`List`提供一些契约，则该契约必须在接口中声明并在抽象类中部分实现。为什么在scala中每种类型（数组和列表）都声明自己的一组方法？为什么他们没有一些共同的类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T22:55:48.917

*但是这些方法中的任何一个都不是从某些特殊的类（特征）继承的*

那根本不是真的。

如果您打开 scaladoc 并查找`.map`Array 和 List 的方法，然后单击它，您将看到它的定义位置：

对于列表：

![在此处输入图像描述](../Images/b1577743c57e38ea47f30bf4bce2a898.png)

对于数组：

![在此处输入图像描述](../Images/5cf52d2cdad5e9a54460e03951d47605.png)

另请参阅有关[Traversable](http://docs.scala-lang.org/overviews/collections/trait-traversable.html)和[Iterable](http://docs.scala-lang.org/overviews/collections/trait-iterable.html)的信息，它们都定义了 scala 集合中的大多数合同（但某些集合可能会重新实现 Traversable/Iterable 中定义的方法，例如为了提高效率）。

通常，您可能还想查看[集合之间的关系](http://docs.scala-lang.org/overviews/collections/overview.html)（滚动到两个图表）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T23:16:33.997

我将在这里扩展 om-nom-nom 答案。

Scala 没有`Array`- 那是*Java* `Array`，Java`Array`没有实现任何接口。事实上，如果我没记错的话，它甚至不是一个合适的类，而且它肯定是通过字节码级别的特殊机制实现的。

然而，在 Scala 上，一切都是类—— `Int`（Java 的`int`）是类，而`Array`. 但是在这些实际类来自 Java 的情况下，Scala 受到 Java 提供的类型层次结构的限制。

现在，回到`foreach`,`map`等，它们不是*Java*中存在的方法。但是，Scala 允许添加从一个类到另一个类的*隐式转换*，并通过该机制添加方法。当您调用`arr.foreach(println)`时，真正完成的是`Predef.refArrayOps(arr).foreach(println)`，这意味着`foreach`属于`ArrayOps`该类 - 正如您在 scaladoc 文档中看到的那样。

# jquery - jquery 1.9.1 的 Firefox 插件错误

> ID：14969117
> 
> 赞同：2
> 
> 时间：2013-02-19T22:49:49.423
> 
> 标签：jquery, firefox, firefox-addon

将 Firefox 18 与 Jetpack SDK 一起使用。将 jquery-1.9.1.js 注入我的页面后，我在控制台中收到以下错误：

```
Traceback (most recent call last):
  File "resource://jid1-t5mdaatmx3urka-at-jetpack/yesware/data/jquery.min.js", line 9597, in 
    })( window );
  File "resource://jid1-t5mdaatmx3urka-at-jetpack/yesware/data/jquery.min.js", line 1307, in 
    jQuery.support = (function() {
  File "resource://jid1-t5mdaatmx3urka-at-jetpack/yesware/data/jquery.min.js", line 1446, in jQuery.support<
    support[ i + "Bubbles" ] = eventName in window || div.attributes[ eventName ].expando === false;
TypeError: div.attributes[eventName] is undefined 
```

我在 jQuery 的开发版本中查找了它，第 1446 行引用了这个块：

```
 // Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)
    // Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP), test/csp.php
    for ( i in { submit: true, change: true, focusin: true }) {
        div.setAttribute( eventName = "on" + i, "t" );

        support[ i + "Bubbles" ] = eventName in window || div.attributes[ eventName ].expando === false;
    } 
```

它说要提防 CSP 限制，但 Firefox 开发网站并没有告诉我太多。我应该怎么办？

顺便说一句，如果我把这个块从 jquery 中取出，一切都会很好。当然，我不喜欢搞乱我不完全理解的事情。

# jquery - jQuery Gmap3在点击时设置标记激活，而其他标记设置为默认值

> ID：14969119
> 
> 赞同：0
> 
> 时间：2013-02-19T22:50:00.217
> 
> 标签：jquery, google-maps-api-3

当用户单击标记时，我正在尝试做一个简单的设置标记活动。我正在尝试使用 Gmap3 的标记功能来跟踪单击了哪个标记，因此如果单击另一个标记，则可以将先前的标记返回到其先前的状态。

这是一个解释我要做什么的小提琴：http: [//jsfiddle.net/sidouglas/tKnsG/](http://jsfiddle.net/sidouglas/tKnsG/) 编辑2：jsfiddle（PEBKAC）

症结在于点击事件发生了什么：

```
 events: {
                    click: function (marker, event, context) {

                       // this section does not work, as the tag 'notActive'
                       // has not been set to isActive
                       var activeMarkers = Map.gmap3({
                                       get: {
                                           name:'marker',
                                           all : true,
                                           tag : 'isActive'
                                       }
                                    });

                       for( var i in activeMarkers ){
                        var activeMarker = activeMarkers[i];
                        activeMarker.setOptions({
                                icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|374D7E|FFFFFF'
                        });
                       }

                      // Set the icon as active.
                      // Need to set this tag as 'isActive' 
                      var letter = context.tag[0];
                      marker.setOptions({
                         icon : 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=' + letter + '|FFFFFF|000000'
                      });
                      // marker.somehowSetTag({ tag:[letter,'isActive']});

                    }
                } 
```

解决方案：

```
 (function ($) {
    $(function () {
        var Map = $('#map');
        Map.init = function (data) {
            Map.postData = data;
            Map.gmap3({
                map: {
                    options: {
                        center: [13.752222, 100.493889],
                        zoom: 4
                    }
                },
                marker: {
                    values: [
                        {id: 1, address:"Lopburi",   tag:['A'], options:{
                          icon: '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|374D7E|FFFFFF'

                        }},
                        {id: 2, address:"Koh Samui", tag:['B'], options:{
                          icon: '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=B|374D7E|FFFFFF'
                        }},
                        {id: 3, address:"Chaingmai", tag:['C'], options:{
                          icon: '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=C|374D7E|FFFFFF'
                        }}
                    ],
                    options: {
                        draggable: false
                    },
                    events: {
                        click: function (marker, event, context) {

                            var currentMarker = Map.currentMarker || false;

                            if( currentMarker ){
                                currentMarker.setOptions({
                                    icon: currentMarker.icon.replace('|FFFFFF|000000','|374D7E|FFFFFF')
                                });
                            }                         

                          var letter = context.tag[0];
                          marker.setOptions({
                             icon : '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=' + letter + '|FFFFFF|000000'
                          });

                          Map.currentMarker = marker;

                        }
                    }
                }
            });
        };
        Map.init();
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:16:46.703

您需要读取标签的状态并在状态之间切换。

伪代码

```
if(tag==notActive){
    tag = isActive;
    code for isActive marker
}else{
    tag = notActive;
    code for notActive marker 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:21:22.300

```
 (function ($) {
    $(function () {
        var Map = $('#map');
        Map.init = function (data) {
            Map.postData = data;
            Map.gmap3({
                map: {
                    options: {
                        center: [13.752222, 100.493889],
                        zoom: 4
                    }
                },
                marker: {
                    values: [
                        {id: 1, address:"Lopburi",   tag:['A'], options:{
                          icon: '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|374D7E|FFFFFF'

                        }},
                        {id: 2, address:"Koh Samui", tag:['B'], options:{
                          icon: '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=B|374D7E|FFFFFF'
                        }},
                        {id: 3, address:"Chaingmai", tag:['C'], options:{
                          icon: '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=C|374D7E|FFFFFF'
                        }}
                    ],
                    options: {
                        draggable: false
                    },
                    events: {
                        click: function (marker, event, context) {

                            var currentMarker = Map.currentMarker || false;

                            if( currentMarker ){
                                currentMarker.setOptions({
                                    icon: currentMarker.icon.replace('|FFFFFF|000000','|374D7E|FFFFFF')
                                });
                            }                         

                          var letter = context.tag[0];
                          marker.setOptions({
                             icon : '//chart.apis.google.com/chart?chst=d_map_pin_letter&chld=' + letter + '|FFFFFF|000000'
                          });

                          Map.currentMarker = marker;

                        }
                    }
                }
            });
        };
        Map.init();
    });
})(jQuery); 
```

# android - Android - 我将如何在不同设备上使用具有背景图像比例的 RelativeLayout

> ID：14969120
> 
> 赞同：0
> 
> 时间：2013-02-19T22:50:05.083
> 
> 标签：android, android-layout

正如您在照片中看到的那样，我的设计存在缩放问题。其实有两个问题。一个涉及文本视图，一个涉及缩放。我发现最简单的布局解决方案是为我的 RelativeLayout 实现背景图像。（这可能是一种我不知道的愚蠢方法。）

正如您在图像中看到的那样，文本在 textview.setText("blabla") 上的位置发生了变化。并且正在制造视觉问题。我将如何解决这个问题？

其次，我将如何解决不同设备上的缩放问题？我最初的计划是为每种尺寸制作一个背景。像 mdpi、hdpi 等等。但是我如何告诉应用程序在背景之间进行选择？这甚至可能吗？

我做错了吗？:)

[定位问题 http://chk.no/bue/stackoverflow.png](http://chk.no/bue/stackoverflow.png)

# java - -server 'default' 是配置文件中的未知服务器

> ID：14969122
> 
> 赞同：2
> 
> 时间：2013-02-19T22:50:08.053
> 
> 标签：java, config, resin

我正在 webapp 上升级树脂，但我不断收到以下错误

```
 Starting Resin on Tue, 19 Feb 2013 14:46:29 -0800 (PST)

        [13-02-19 14:46:31.640] {main}   Using Resin(R) Open Source under the GNU Public          License (GPL).

                     See http://www.caucho.com for information on Resin Professional,
                     including caching, clustering, JNI acceleration, and OpenSSL  integration.

com.caucho.config.ConfigException: -server 'default' is an unknown server in the            configuration file.
at com.caucho.server.resin.Resin.initTopology(Resin.java:1069)
at com.caucho.server.resin.Resin.initServletSystem(Resin.java:1275)
at com.caucho.server.resin.Resin.configure(Resin.java:997)
at com.caucho.server.resin.Resin.initMain(Resin.java:979)
at com.caucho.server.resin.Resin.main(Resin.java:1437)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
  -server 'default' is an unknown server in the configuration file. 
```

我在哪里可以找到这个默认设置？我没有更改配置中会影响它的任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:58:09.437

在 Resin 中，您使用的每个 JVM（“服务器”）都有一个名称，因为 Resin 的配置是围绕拥有多个服务器而设计的，即集群。单服务器部署仍然是 Resin 中的集群。它只是一个带有一台服务器的集群。

标准配置旨在正常工作，但如果您有较旧的配置，Resin 可能无法找到您的特定服务器。

如果您的配置有一个命名服务器“a”，但您启动 Resin 时没有指定服务器名称，Resin 将尝试使用默认服务器 (id="")。如果它找不到该服务器，它会抱怨。

如果你用“start-all”而不是“console”来启动Resin，Resin 将启动本地机器上的所有服务器，即任何监听你IP 地址的服务器。这使得配置测试集群或具有多个 Resin 实例的机器变得容易。

```
> resinctl start-all 
```

在您的 resin.xml 中，您将有一个条目或在 Resin 4 中，一个 .

```
<resin ...>
  <cluster id="app">
    <server id="" .../> 
```

上面的配置定义了“默认”服务器。

标准 Resin 4 配置使用 server-multi，这意味着服务器被命名为“app-0”，“app-1”，...。

如果以“console”或“start”开头，则需要在命令行中指定“-server app-0”。

```
> resinctl start -server app-0 
```

在 IDE 中，您可能需要指定服务器。例如添加命令行“-server app-0”。

# php - HTML PHP login authentication

> ID：14969125
> 
> 赞同：0
> 
> 时间：2013-02-19T22:50:27.500
> 
> 标签：php, html, login

I need a simple login authentication for my beta site. This is what I found and I put it in my index.php (Joomla 2.5):

```
<?
//-- login
if ($_SERVER["PHP_AUTH_USER"] != "USERNAME" || $_SERVER["PHP_AUTH_PW"] != "PASSWORD")
{

    header("WWW-Authenticate: Basic realm=\"Enter username and password to proceed\"");  
    header("HTTP/1.0 401 Unauthorized");

    echo "<h1>Authentication failed</h1>";
}    
else
{
    echo "<h1>Authentication succeeded</h1>";
}
?> 
```

The php login "pop-up" is showing perfect but when I click "cancel login" my website will be loaded anyway.

How can I prevent loading my website?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:53:49.740

You should have a `die();` after the `echo "<h1>Authentication failed</h1>";` to stop any more of the code being processed.

# objective-c - 删除 NSString 中某个字符串之前的所有字符串内容

> ID：14969129
> 
> 赞同：0
> 
> 时间：2013-02-19T22:50:33.460
> 
> 标签：objective-c, xcode, nsstring, substring

我正在尝试查看是否有一种简短的方法可以执行以下操作：

假设我有以下 NSString：
`@"123456 copy cat";`

我需要在“复制”之前删除所有内容以及文本可变之前的长度（取决于用户输入）

我知道我可能可以做一个无限循环来检查子字符串，但我希望有更快的方法

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T22:59:12.193

```
NSString *string = @"123456 copy cat";
NSRange range = [string rangeOfString:@"copy"];
NSString *newString = [string substringFromIndex:range.location]; 
```

这就是简单的答案。问题是您的用户可能会输入“复制”这个词，然后呢？即使您以这种方式获得范围：

```
NSRange range = [string rangeOfString:@"copy cat"]; 
```

您的用户仍有可能输入该短语。当您进行额外检查时，它不再是“捷径”。

**编辑**

不要忽视 Chuck 在使用评论中的出色观察：

`-[NSString rangeOfString:options:]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:06:13.210

要删除字符串的一部分，您要么必须创建一个包含要保留的部分的新字符串，要么创建字符串的可变副本并对其进行修改。

要创建一个包含以“copy”开头的部分的新字符串：

```
NSString *input;
NSString *output;
NSRange copyRange;

input = @"123456 copy cat";
copyRange = [input rangeOfString:@"copy"];
output = [input substringFromIndex:copyRange.location]; 
```

要创建一个可变字符串并删除“复制”部分：

```
NSString *input;
NSMutableString *output;
NSRange copyRange;

input = @"123456 copy cat";
output = [input mutableCopy];
copyRange = [output rangeOfString:@"copy"];
[output replaceCharactersInRange:NSMakeRange(0, copyRange.location) withString:@""];
[output autorelease]; // depending on what you want to do 
```

另请参阅其他答案中有关使用 rangeOfString:withOptions: 和 NSBackwardsSearch 的评论，以防用户输入还包含“输入”一词。

# jquery-isotope - 循环聚焦和同位素排序

> ID：14969131
> 
> 赞同：1
> 
> 时间：2013-02-19T22:50:41.237
> 
> 标签：jquery-isotope

我有类似[这个](http://isotope.metafizzy.co/demos/sorting.html)例子的东西，排序效果很好。据我所知，isotope 使用某种缓存，然后使用 CSS 规则，它对最终视图中的所有内容进行排序。但它实际上并没有对 DOM 进行排序，因此焦点循环无法按预期工作。除了自己对 DOM 进行排序之外，我还能做些什么来解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:10:10.127

最后，我的解决方案是使用他的绝对位置计算每个元素的 tabindex。

```
function sortFocus(sortClass) {
    var button = $('div.isotope-button').first() ;       

    setTimeout(function() {
        $('div.isotope-button.' + sortClass).each(function(index) {
            var pos = $(this).position(), posx = (pos.left) / button.outerWidth(), posy = ((pos.top) / button.outerHeight()) + 1;
            $(this).find('a').attr('tabindex', posy + '' + posx);
        });
    }, 1000);
} 
```

一些想法：

*   同位素插件没有动画后的回调函数。
*   计算基于按钮的大小，假设所有按钮的大小相同。我不知道是否适用于不同尺寸
*   在我的例子中，每个同位素按钮都有一个内部链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T15:09:12.820

这也有效，filteredItems 总是以正确的顺序返回。

```
$myIsotope.on('arrangeComplete', function (e, filteredItems) {
  var tabIndex = 1;
  $(filteredItems).each(function (index, item) {
    $(item.element).find('a.title').attr('tabindex', tabIndex);
    tabIndex++;
  });
}); 
```

# c++ - 无法在 C++ 中包含头文件

> ID：14969132
> 
> 赞同：4
> 
> 时间：2013-02-19T22:50:46.400
> 
> 标签：c++, netbeans

在 netbeans 中，我正在创建一个新文件夹并向其中添加头文件。

现在，当我使用以下方法将新创建的文件夹中的头文件包含到另一个文件中时：

```
#include "folder1/myheaderFile.h" 
```

编译器抱怨找不到头文件。

错误是：

```
main.cpp:31:39: fatal error: folder1/myheaderFile.h: No such file or directory 
```

当我想在#include 的文件夹中包含头文件时，有什么办法吗？

编辑：我需要为每个文件夹制作一个makefile吗？另一个编辑：

```
When I right clicked on the error its showing
unresolved directive
#include
Analyzed system include paths:
/usr/include/C++/4.6
/usr/include/C++/4.6/x84_64_linux_gnu
/usr/include/C++/4.6/backward
/usr/lib/gnu/x86_64-linux-gnu/4.6/include
/usr/local/include
/usr/lib/gcc/x86_64-linux-gnu
/usr/include 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T00:00:54.867

这是为了您的方便：

您指定的包含文件路径用于系统范围的标头。您包含的标题是您的标题还是系统范围内下载/安装的标题？您在输出中看到标题的路径吗？如果您包含一个文件夹中的标题，来自另一个文件夹，那么您需要遍历回来，即：`#include "../folder/header.h"`

如果这是一个系统文件夹，例如位于我系统中的 /usr/local/include 中的文件夹，您所要做的就是

```
#include <header.h> 
```

或者如果它位于子文件夹中（经常），

```
#include <Libname/header.h> 
```

只要您设置了指向它的包含路径，它就应该可以工作。

要设置包含路径和目录，请参见页面末尾附近的示例：http: [//zetcode.com/articles/netbeanscdevelopment/ 。](http://zetcode.com/articles/netbeanscdevelopment/)

请记住，当您对路径进行硬编码时，您需要考虑包含标头的文件的当前路径。

或者，您可以使用 cmake & make（不知道 Netbeans 使用什么），您可以在其中定义自己的所有内容。

您可以使用完整路径进行测试，即：

```
#include "/home/user/project/folder/header.h 
```

或者您可以从命令行进行测试并设置包含路径。

希望能帮助到你 ：）

# nginx - 设置 Linode (Ubuntu 10.04 32bit) nginx 未启动。98：地址已经在使用中

> ID：14969134
> 
> 赞同：3
> 
> 时间：2013-02-19T22:50:54.010
> 
> 标签：nginx, ubuntu-10.04, railscasts, linode

您好，通过 Ep 的 Railscast 指令设置 linode 有一点问题。#335

我对该服务器的配置是：Ubuntu 10.04 LTS Disk Image 32bit

我可以做到这一点：

按预期运行这两项工作。

`apt-get -y update`

`apt-get -y install curl git-core python-software-properties`

当我到达 nginx 步骤时：

`add-apt-repository ppa:nginx/stable`

`apt-get -y update`

`apt-get -y install nginx`

到目前为止，一切似乎都在正常工作。

是这里：`service nginx start`

我得到以下回应：

```
 * Starting nginx nginx
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] still could not bind() 
```

我尝试过停止、重新启动和重新加载 nginx，但我无法改变任何东西。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:00:01.610

似乎您有其他东西正在运行或阻止该端口。尝试运行：sudo netstat -pan | grep ":80"

这应该给你一个关于那里正在运行的提示。也许它是一个 uwsgi/apache2/tomcat 等。可能在那里运行很多。

编辑：

我现在知道出了什么问题，因为我自己现在在 debian 服务器上。

```
listen   80; ## listen for ipv4
listen   [::]:80 default ipv6only=on; ## listen for ipv6 
```

您应该评论第一行或第二行（取决于您是想听 ipv6 还是 ipv4。这就是我遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:05:42.327

我不知道这是否是正确的解决方案，但在我评论该行之后它对我有用：

```
listen 80; 
```

在 /etc/nginx/sites-enabled/default

# php - 构建动态 PDO 语句的更好方法

> ID：14969135
> 
> 赞同：0
> 
> 时间：2013-02-19T22:50:54.633
> 
> 标签：php, mysql, pdo

我正在尝试构建动态 PDO SQL 语句。关于如何做得更好的任何想法？

`array(3) { [0]=> string(5) "00000" [1]=> NULL [2]=> NULL } free`当我运行这个时，我不断得到......

所以我的 MySQL PDO 语句似乎不能正常工作！

关于如何解决这个问题的任何想法？

```
$park = $_POST["park"];
$lecturestyle_id = $_POST["lecturestyle"];
$group_size = $_POST["groupsize"];
$roomstructure_id = $_POST["roomstructure"];
$array = explode(",", $_POST["facilities"]);

// change Mon here

echo '<td class="gridSide">
Mon
';

// build facilities search

for($i = 0; $i < count($array); $i++){  
    if ($array[$i]!=0) {
    $fac .= 'AND facilities_id='.$array[$i].' ';
    }
    else
    $fac .= '';
}

echo '</td>';

for ($i = 1; $i <= 9; $i++) 
{

        // change mon here

        echo '<td class="box" id="mon'.$i.'">';

        // dynamically build sql query

        $sql = 
        "
        SELECT * FROM ts_room rm
        LEFT JOIN ts_roomfacilities rf
        ON rm.id = rf.room_id
        LEFT join ts_facilities f
        ON f.id = rf.facilities_id
        LEFT JOIN ts_building b
        ON rm.building_id=b.id
        WHERE capacity>=".$group_size.' ';

        $sql .= $fac;

        if($park!="Any") {
        $sql .= " AND b.park_id=".$park;
        }

        if($lecturestyle_id!="Any") {
        $sql .= " AND lecturestyle_id=".$lecturestyle_id;
        }

        if($roomstructure_id!="Any") {
        $sql .= " AND roomstructure_id=".$roomstructure_id;
        }

        $sql .= " AND rm.id NOT IN
        (SELECT COUNT(*)
         FROM ts_request rq
         LEFT JOIN ts_allocation a ON a.request_id = rq.id
         WHERE 
         day_id=1 AND period_id=".$i."
         OR a.status IS NOT NULL
         AND a.status IN ('Pending','Declined','Failed'))";

         $stm = $pdo->prepare( $sql );
         $rows = $stm->fetchColumn();

         echo $rows.'<br>free</td>';            
         echo '</td>';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:04:20.510

一个有点可笑的事实。大家只*提*SQL注入和prepared statements，而没有人想写代码:)

虽然我可以理解：PDO 在条件查询方面非常弱，所以这项任务会很辛苦。
与任何其他 API 一样，PDO 仅适用于初学者手册中的基本任务，并且对于任何现实生活中的问题都没有为开发人员提供真正的帮助。

所以，我给你一个[safeMysql](https://github.com/colshrapnel/safemysql)例子，它既**安全**又**方便**。
它与 PDO**不**兼容，但您可以改用它并获得所有好处。

所以，这个想法*不是在整个查询中解析占位符，而是在任意查询部分中解析*。说，对于您的设施部分：

```
$fac_sql = '';
foreach($array as $facility){   
    if ($facility) {
       $fac_sql .= $db->parse(' AND facilities_id=?i',$facility);
    }
} 
```

`$fac_sql`现在您在变量中有语法正确的语句。
其他部分也一样

```
$cond = '';
if($park!="Any") {
    $cond .= $db->parse(' AND b.park_id=?s',$park);
}
if($lecturestyle_id!="Any") {
    $cond .= $db->parse(" AND lecturestyle_id=?s",$lecturestyle_id);
}
if($roomstructure_id!="Any") {
    $cond .= $db->parse(" AND roomstructure_id=?s",$roomstructure_id);
} 
```

...以及整个查询：

```
$sql = "
SELECT * FROM ts_room rm
LEFT JOIN ts_roomfacilities rf
ON rm.id = rf.room_id
LEFT join ts_facilities f
ON f.id = rf.facilities_id
LEFT JOIN ts_building b
ON rm.building_id=b.id
WHERE capacity >= ?s;
?p
?p
AND rm.id NOT IN
(SELECT COUNT(*)
 FROM ts_request rq
 LEFT JOIN ts_allocation a ON a.request_id = rq.id
 WHERE 
 day_id=1 AND period_id=?i
 OR a.status IS NOT NULL
 AND a.status IN ('Pending','Declined','Failed'))";

$rows = $db->getCol($sql,$group_size,$fac_sql,$cond,$i); 
```

（代码**未经**测试，仅作为示例！）。

另一个 safeMysql 的好处是它会在出现错误时返回 Mysql 错误消息和整个查询。您将能够修复错误或在控制台中尝试查询以进行测试。

所以 - 这就是条件查询的一般情况。

至于您的特定查询问题 - 它与 PDO 或准备好的语句或条件查询构建无关。查询逻辑的某处存在缺陷。
您必须以纯文本形式编写查询并使用 console/phpadmin/sqlyog/whatever 进行尝试。您也可以在 stackoverflow 上寻求此**SQL的帮助。**
一旦您的查询开始工作，您就可以开始动态构建它。

另外，我觉得它太复杂了，需要简化。可以分成几个更简单的查询。同样循环运行这样的怪物也是一个很大的缺陷。最好在一次调用中重写它。

# c++ - Visual Studio 项目已过期

> ID：14969138
> 
> 赞同：20
> 
> 时间：2013-02-19T22:51:01.640
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

我一直在尝试让 Visual C++ 正常工作，但在构建每个项目时都会出现此错误：“这个项目已过时”“你想构建它吗？” 它每次都无法构建。

当我重建时，构建仍然失败，尽管在记录器中我没有注意到任何错误消息，这让我认为它没有正确记录（我正在使用第三方程序进行记录）。

我已按照此处的一些说明进行操作：http: [//blogs.msdn.com/b/vsproject/archive/2009/07/21/enable-c-project-system-logging.aspx](http://blogs.msdn.com/b/vsproject/archive/2009/07/21/enable-c-project-system-logging.aspx)并启用了日志记录。

我收到此错误：**项目不是最新的，因为 "insert file name here".lastbuildstate is missing**。请注意，在实际的视觉工作室中，没有任何记录。我无法在谷歌中找到任何关于此的内容。可能是我错误地启用了日志记录，但我觉得这是错误。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-13T16:26:24.460

## 什么是“tlog”文件？

“tlog”文件由在您进行构建时运行的“Tracker.exe”进程创建，并记录有关构建的一些信息。

该信息将在您下次开始构建时使用并更新，以帮助检测“过时”文件，从而使构建系统仅构建需要重建的位（而不是重新构建所有内容）。

*   [文件跟踪器日志文件格式](https://stackoverflow.com/questions/5729519/file-tracker-log-file-format)

*   [https://social.msdn.microsoft.com/Forums/vstudio/en-US/67705333-a425-4d6e-9881-9077f044f87a/how-do-i-prevent-msbuild-from-creating-tlog-files-during- my-c-builds?forum=msbuild](https://social.msdn.microsoft.com/Forums/vstudio/en-US/67705333-a425-4d6e-9881-9077f044f87a/how-do-i-prevent-msbuild-from-creating-tlog-files-during-my-c-builds?forum=msbuild)

*   [https://dickyjim.wordpress.com/tag/tlog-files/](https://dickyjim.wordpress.com/tag/tlog-files/)

## 是什么导致“过时”问题？

该问题可能是由`*.tlog`文件中的不正确或陈旧信息引起的。

可能发生的主要方式有 3 种：

1）您在硬盘上建立了一个项目，然后将目录移动到另一个位置......“tlog”文件记录了旧位置的路径，但是由于您移动了文件，它们不再存在，因此您变得“过时”。

2）您的“项目”引用了指定位置不存在的文件（通常是头文件）。如果您从源代码控制系统中删除了文件，但忘记将其从项目中删除，或者因为您引用了可能“安装”/存在于不同位置的库的头文件，则可能会发生这种情况。通常，开发人员假设文件位于每个人机器上的同一个“位置”......并非总是如此！

3）您已经对项目进行了一些“重构”，并将文件移动到不同的子目录，甚至重命名它们 - 因此“tlog”中记录的文件的路径/名称与磁盘上存在的文件不匹配，即陈旧.

## 修复它的方法是什么？

执行“Clean+Build”或“Rebuild”并不总能修复它……因为这些操作不会删除“tlog”文件。所以：

*   删除您可以在解决方案/项目目录中找到的任何“tlog”文件并重新构建。

*   确保您的项目不引用不存在的文件

## 如何确定哪些文件不存在？

如果您想确切了解/找出 Visual Studio 认为哪些文件已过期，那么您可以在 Visual Studio 中打开一些诊断信息……并在 DebugView 中查看消息……显示完整路径它正在探测的文件。

*   [http://blogs.msdn.com/b/vsproject/archive/2009/07/21/enable-c-project-system-logging.aspx](http://blogs.msdn.com/b/vsproject/archive/2009/07/21/enable-c-project-system-logging.aspx)

在`devenv.exe.config`你输入：

```
<system.diagnostics>
      <switches>
        <add name="CPS" value="4" />
      </switches>
    </system.diagnostics> 
```

## 更多细节

假设您在特定目录（例如 S:\MYPROJECTS）中创建了一个解决方案和一组项目，然后编译并运行/调试它等。

然后，您决定将整个目录移动到驱动器上的其他位置，或者您重构您的项目，例如更改它们的目录名称等。

现在，当您执行“开始调试/F5”时，Visual Studio 会进行依赖检查，并认为您有“过期文件”。

即使您执行“清洁解决方案”或“重建解决方案”......您仍然会收到“文件过期”消息。

看这里：

*   [http://connect.microsoft.com/VisualStudio/feedback/details/653355/suggestion-help-me-diagnose-issues-causing-this-project-is-out-of-date-message](http://connect.microsoft.com/VisualStudio/feedback/details/653355/suggestion-help-me-diagnose-issues-causing-this-project-is-out-of-date-message)

问题是由在依赖项检查期间查询的“.tlog”文件引起的......当您移动解决方案/项目（以及构建中间文件）时，它们会导致 Visual Studio 构建器混淆。

解决方案是删除所有 .tlog 文件……它们将在您下次构建时重新生成……从那时起，您将不会得到虚假的“过期文件”消息....除非它们真的过时了。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-02-26T04:00:40.677

你应该让 Visual Studio 告诉你它为什么需要重建。**Visual Studio 2015**内置了对此的支持：

*   工具（菜单）
*   选项
*   项目与解决方案
*   构建并运行

将 MSBuild 项目构建输出详细程度更改为**详细**或诊断。

就我而言，它打印了如下消息：

```
1>------ Up-To-Date check: Project: xyz, Configuration: xyz ------
1>Project not up to date because build input 'C:\ws\Missing.h' is missing. 
```

...并从项目中删除该标题解决了问题。

*要在较旧的 Visual Studio 版本中获取此信息，您需要使用 DebugView 并进行修改`devenv.exe.config`（请参阅 Colin Smith 的回答：[https](https://stackoverflow.com/a/21759835/1941779) ://stackoverflow.com/a/21759835/1941779 ）。请注意，此解决方案不适用于 Visual Studio 2015。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-24T19:30:53.510

即使没有任何更改，我也不断收到“项目已过期”错误。我将其追踪到解决方案资源管理器中列出的头文件，该头文件不再被使用并已从项目目录中删除。从 SE 列表中删除它修复了弹出的无关错误消息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-13T12:25:26.537

我也有这个问题。在我的情况下，原因是对文件（通常是头文件）的引用，这些文件在指定的位置不存在。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-26T15:27:20.277

我遇到了这个问题，并且使用 colinsmith 发布的诊断技巧，能够将问题追溯到我的 .vcxproj 引用的文件实际上并不存在于任何地方（很久以前它已被删除） ，但从未从项目文件中删除）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-07T22:26:36.067

只是为了后代，我遇到了这个问题，然后意识到我的计算机时钟不知何故跳到了过去大约 48 小时。在我将其设置回当前时间后，警告消失了。

# ember.js - 延迟数据加载，直到 emberjs 中的动画完成

> ID：14969139
> 
> 赞同：0
> 
> 时间：2013-02-19T22:51:08.733
> 
> 标签：ember.js, ember-data

我想知道最好的方法是将模型数据的加载延迟到动画完成之后。

在我的应用程序中，我正在监听路由的变化。然后，当匹配某个路线时，我打开一个带有动画的面板。但我希望在动画完成后开始加载数据。

以下是我收听路线的方式：

```
App.ApplicationController.reopen({
  currentPathChanged:function() {
    App.panelView.setNeedsOpen(this.get('currentPath') == 'index' ? false : true);
  }.observes('currentPath')
}); 
```

这是面板必须打开时调用的路由之一：

```
App.NewsitemsRoute = Ember.Route.extend({
  model: function() {
    return App.Newsitem.find();
  }
}); 
```

但正如您所见，当动画仍在运行时，数据会被预加载。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T13:24:33.320

我根本不会延迟加载本身，因为您应该利用这段宝贵的时间在后台加载数据并用动画“分散”用户的注意力。那么为什么不显示动画，而是并行加载数据，并且在动画完成后立即删除显示渲染数据的相应 dom？

# javascript - 如何将 jQuery 事件处理程序应用于多个缓存的选择器？

> ID：14969141
> 
> 赞同：2
> 
> 时间：2013-02-19T22:51:14.933
> 
> 标签：javascript, arrays, jquery-selectors, jquery

假设我有三个按钮

```
<button data-action="grow" class="resizeButton">Grow</button>
<button data-action="shrink" class="resizeButton">Shrink</button>
<button id="normalButton">Normal Button</button> 
```

我有变量中的按钮

```
var $normalButton = $('#normalButton');
var $growButton = $('.resizeButton[data-action="grow"]');
var $shrinkButton = $('.resizeButton[data-action="shrink"]'); 
```

现在假设我想将`mouseenter`, `mouseleave`, 和`click`事件处理程序连接到普通按钮

```
$normalButton.on({
   mouseenter: function(){
       //do some stuff
   },

   mouseleave: function(){
       //reverse some stuff
   },

   click: function(){
       //do some more stuff
   }
}); 
```

神奇的 jQuery 向导为我们提供了这项工作。

现在假设我们要在增长按钮和收缩按钮上附加一个`mouseenter`、`mouseleave`和事件处理程序。`click`这些按钮的处理程序相同，但普通按钮的处理程序不同。

我可以看到有几种方法可以做到这一点，但它们基本上都是相同的想法，只需将它们分配两次，一次分配给第一个按钮，一次分配给下一个按钮。

所以，

```
var handlers = {
    mouseenter: function(){
        //do some different stuff
    },

    mouseleave: function(){
        //reverse some different stuff
    },

    click: function(){
        //do some more different stuff
    }
};

$growButton.on(handlers);
$shrinkButton.on(handlers); 
```

或者

```
$.each([$growButton, $shrinkButton], function(i, el){
    el.on({
        mouseenter: function(){
            //do some different stuff
        },

        mouseleave: function(){
            //reverse some different stuff
        },

        click: function(){
            //do some more different stuff
        }
    });
}); 
```

但我想知道是否有一种语法可以从中创建一个 jQuery 对象，或者只是将处理程序应用于一组缓存的选择器，如`$([$growButton, $shrinkButton]).on(...`或类似？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T22:53:51.543

您可以使用[`add`](http://api.jquery.com/add/)方法：

```
$growButton.add($shrinkButton).on(...) 
```

# html - Kendo UI Mobile - 列表视图中锚标记上的“数据点击”属性被忽略

> ID：14969148
> 
> 赞同：3
> 
> 时间：2013-02-19T22:51:36.600
> 
> 标签：html, listview, kendo-ui

我有这样的情况：

```
<ul data-role="listview">
    <li>
        <a data-click="resolveAddressPrefix" href="<address-suffix>" data-rel="external">
            <span>Here is some stuff inside my anchor tag</span>
        </a>
    </li>
</ul> 
```

Kendo 的 data-* 属性被忽略。如果我更改`data-click`为`onclick`，函数会执行，但这不是解决方案。

我尝试将 a 添加`data-role="button"`到我的锚标记中，但它根本没有做任何事情。

任何帮助将不胜感激。我正在使用 Kendo UI Mobile 和 JQuery 的最新服务包版本。

PS：我真的很想在不通过 javascript 或任何东西初始化的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:04:29.710

进一步的研究最终使我找到了我从未见过的 Kendo Mobile 论坛中的一个论坛帖子。基本上，这是一个错误，已在最新的内部版本中修复。但是，作为我目前情况的一种解决方法，我改为将`data-click="resolveAddressPrefix"`属性应用于`<ul>`标签。然后，在我的`resolveAddressPrefix`函数中我添加了`event.preventDefault()`. 最后，由于这个错误也与 相关`data-rel="external"`，我使用 javascript 手动执行“外部”链接，`window.location.href = ...`希望这可以帮助那些无法访问内部构建的人。

# javascript - 带有文本的 HTML5 画布“流血效果”

> ID：14969153
> 
> 赞同：0
> 
> 时间：2013-02-19T22:51:54.630
> 
> 标签：javascript, asp.net, html5-canvas

我在页面加载时隐藏了画布：-

```
 <canvas id="myCanvas" width="915" height="900" style="visibility :hidden; border : 2px double #000000;"></canvas> 
```

**`Question 1:)`** 我想让它在按钮单击时可见：- //提交按钮//

```
<asp:Button ID="Button6" BackColor="Silver" OnClientClick="store_memID(); document.getElementbyID('myCanvas').visibility = 'visible'; return false;" Style="margin-left: 20px" runat = "server" Text="Submit" Width="102px" Font-Bold="True" Height="28px" /> 
```

类似的东西，虽然这不起作用。不正确的语法是我的假设......有什么想法吗？

**`(Question 2:)`** 同样，当我在画布上重新绘制时，一切都很好，但是当重新打印文本时，它变得有点“泥泞”......扭曲了。我想解决这个问题的最简单方法是完全擦除画布并重新绘制它。关于为什么“浑浊效应”及其解决方案的建议？

**`(Answer 2:)`**`canvas.width = canvas.width`通过在我的画布脚本开头添加来解决出血效果。

然而，这`ctx.clearRect(0, 0, 915, 900);`并没有解决出血效应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:49:56.993

### 问题一：

根据我的评论，`clearRect`假设您的代码正确，应该可以工作。它比该方法更可取，`canvas.width = canvas.width;`因为它更快。我怀疑由于下面的第二点，它不起作用。

* * *

### 问题2：

有几件事：

1.  您在 jsFiddle 中样式属性的开头缺少引号 (")。

    ```
     <canvas id="myCanvas" width="915" height="900" style = border: 2px double #000000;"></canvas> 
    ```

2.  您正在引用画布“myCanvas”，但您也在创建一个名为 canvas 的新画布（引用相同的 var）。

    ```
     var can = document.createElement("canvas") 
    ```

隐藏“myCanvas”不会隐藏“canvas”（假设您的代码是正确的 - 我对 asp 不太熟悉）。

# php - VoicePHP 录制音频文件

> ID：14969156
> 
> 赞同：3
> 
> 时间：2013-02-19T22:52:03.757
> 
> 标签：php

我正在使用[VoicePHP](http://voicephp.com/)。

我是巴西人，当我以我的语言运行*Hello World*`echo 'Ola mundo';`命令时。但是使用这个软件，发音不是很好——我能做些什么吗？另外，我想知道是否可以将消息录制为 MP3 或 WMA，并运行它。

 *我询问了 VoicePHP 开发人员的支持频道，Tringme，他们回答了这个问题：

> 您可以指定音频文件。[在http://voicephp.com/developers.html](http://voicephp.com/developers.html)阅读更多相关信息，并查看[http://code.voicephp.com](http://code.voicephp.com)。

但是我没有找到任何具体的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:54:40.263

您可以使用方法 play($file)，记录在这里：

[http://voicephp.com/api/play.html](http://voicephp.com/api/play.html)*

# python - 使用用户指定的名称为 SQL 语句指定表名所有这些都将在 python 脚本中

> ID：14969165
> 
> 赞同：0
> 
> 时间：2013-02-19T22:53:10.273
> 
> 标签：python, html, sql, python-2.7

如何将 HTML 表单中的表名指定为 postgres 数据库 SQL 查询？

```
abc:[
{
 sql:"select count(*) from some_database",
count:"100"
}] 
```

我一直在研究元数据和 sqlalchemy 之类的东西，因为我使用的是 python。并且 sql 语句在 python 文件中。你能建议我怎么做吗？

不要介意代码只是为了

我真正的问题是我有一个 SELECT 查询，但是要从中选择数据的表需要由用户指定..来自 html 文件..

# django - South migrate error - relation already exists

> ID：14969166
> 
> 赞同：12
> 
> 时间：2013-02-19T22:53:10.330
> 
> 标签：django, migration, django-south

Background: After adding djangoratings to my project, I tried running

```
django-admin.py schemamigration djangoratings --initial 
--settings=myapp.settings.local 
```

which resulted in an unknown command error for schemamigration. I tried to resolve this error by adding my project directory to the PYTHONPATH (I'm using virtualenv and virtualenvwrapper). This resolved the unknown command error for schemamigration, but I think I specified one directory above my project directory for the PYTHONPATH and when the initial migration was run for djangoratings, it complained about something to do with whoosh (which I am using in my project). I changed the PYTHONPATH directory and tried running

```
django-admin.py schemamigration djangoratings --initial 
--settings=myapp.settings.local 
```

again. Then I ran the migrate command. This is when I received the error:

```
django.db.utils.DatabaseError: relation "djangoratings_vote" already exists 
```

I tried migrating all the way back using:

```
django-admin.py migrate djangoratings zero --settings=myapp.settings.local
Running migrations for djangoratings:
- Migrating backwards to zero state.
< djangoratings:0006_add_cookies
< djangoratings:0005_add_exclusions
< djangoratings:0004_rethink_recommendations
< djangoratings:0003_add_correlations
< djangoratings:0002_add_mean_and_stddev
< djangoratings:0001_initial 
```

and then running --initial again, but the same error occurred after performing the migrate command.

I looked at the list of tables in my database and didn't see any for djangoratings_vote.

My current migrations listing for djangoratings is as follows:

```
0001_initial.py                   0006_add_cookies.py
0001_initial.pyc                  0006_add_cookies.pyc
0002_add_mean_and_stddev.py       0007_initial.py
0002_add_mean_and_stddev.pyc      0007_initial.pyc
0003_add_correlations.py          0008_initial.py
0003_add_correlations.pyc         0008_initial.pyc
0004_rethink_recommendations.py   0009_initial.py
0004_rethink_recommendations.pyc  0009_initial.pyc
0005_add_exclusions.py            __init__.py
0005_add_exclusions.pyc           __init__.pyc 
```

How can I resolve the relation "djangoratings_vote" already exists error? Preferably using South?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-02-05T08:00:42.817

there is a better way to solve it:

```
python manage.py migrate djangoratings --fake 
```

and then:

```
python manage.py migrate 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T01:47:49.867

It sounds to me as if South is out of sync with your database (this can happen if south has started creating the tables, but then fails without being able to complete the backwards migration). I would recommend manually restoring the database and south as follows (take a back up of your db first in case of a mistake):

1.  Delete all djangoratings_* tables from your database.
2.  Open up the south_migrationhistory table in the database, and filter by app name. Remove all entries for djangoratings.
3.  Delete all the migrations files in the djangoratings/migrations directory.

Once you have done this, you should have a clean database, and south history. At this point, re run:

```
./manage.py schemamigration djangoratings --initial 
```

Which will generate a single migration file. Then:

```
./manage.py migrate djangoratings. 
```

Assuming that you don't get the errors that you had the first time, this should set up the database so you are ready to use django ratings.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T15:34:41.157

This is in an extension of @stef_huayue's answer if it does not quite work as expected.

Find out which migration failed. The coressponding migration_file.py will usually be where the `migrations.AddField` operation is happening. Then run: `python manage.py migrate app_name --fake [migration_file]`

without the file extension. Followed by:

`python manage.py migrate app_name`

# c# - 检查剃须刀页面中的登录用户角色

> ID：14969167
> 
> 赞同：61
> 
> 时间：2013-02-19T22:53:11.380
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

```
@if (Request.IsAuthenticated && User.Identity.Name=="administrator")
{
     <div id="sidebar">
        <div class="module">
        <ul class="menu">
                            <li>@Html.ActionLink("Home", "Index", "Home")</li>
                            <li>@Html.ActionLink("About", "About", "Home")</li>
                            <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                        </ul>
         </div>
         <div class="mainContent">
             Hello, @User.Identity.Name !
         </div>
     </div> 
```

如果用户通过管理员身份验证，这是我的布局，但这种检查看起来不好，我需要检查用户的角色而不是他的名字。

这是控制器方法

```
 public ActionResult AuthenticatedUserLayout(string username) 
    {
        var lst=userContext.UserProfiles.ToList();
        var user = lst.Select(u => u.UserName == username);

        if(IsAdmin(Session["LoginUser"].ToString())) return View(user); else return Index();
    } 
```

我也觉得这`return View(user)`不好，因为我不知道如何使用它`user`。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-02-19T22:57:21.093

```
@if (Request.IsAuthenticated && User.IsInRole("Administrators"))
{
     <div id="sidebar">
        <div class="module">
           <ul class="menu">
              <li>@Html.ActionLink("Home", "Index", "Home")</li>
              <li>@Html.ActionLink("About", "About", "Home")</li>
              <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
            </ul>
         </div>
         <div class="mainContent">
             Hello, @User.Identity.Name !
         </div>
     </div>
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-09-19T07:29:17.717

对于 ASP.NET Core Razor 页面

```
if (User.Identity.IsAuthenticated && User.IsInRole("Administrator")) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-20T00:55:20.203

戴夫的回答是正确的。我建议您考虑在模型上使用一个名为`IsAdministrator`or的属性，`CanSeeSidebar`并将回答该问题视为**域逻辑**。

该视图应仅适用于模型。查看线程，从数据库中读取，在回答领域问题方面是相同的。在控制器将模型交给视图之前，所有这些类型的问题都应该得到回答。

# android - ksoap2 的安全标头错误

> ID：14969171
> 
> 赞同：0
> 
> 时间：2013-02-19T22:53:32.450
> 
> 标签：android, wsdl, ksoap2, android-ksoap2

尝试连接到 .Net Web 服务时出现以下错误

> SoapFault - faultcode: 'q0:Security' faultstring: '不满足安全要求，因为传入消息中不存在安全标头。'

这是创建安全标头的服务器端代码

```
 public override XmlElement GetXml(XmlDocument document) {
        if (null == document) throw new ArgumentException("document");

        XmlElement root = document.CreateElement("abc", "TokenName", "http://testurl.com");

        if (!string.IsNullOrEmpty(Id)) {
            root.SetAttribute(WSUtility.Prefix, WSUtility.NamespaceURI);
            root.SetAttribute(WSUtility.AttributeNames.Id, WSUtility.NamespaceURI, Id);
        }

        XmlElement machineIdElement = document.CreateElement("abc", "machineId", "http://testurl.com");

        machineIdElement.InnerText = "060a5270-7ae7-11e2-b92a-0800200c9a66";

        root.AppendChild(machineIdElement);

        XmlElement inspectorIdElement = document.CreateElement("dac", "insId", "http://testurl.com");

        inspectorIdElement.InnerText = "dc0a5270-7ae7-11e2-b92a-0800200c9a66";

        root.AppendChild(inspectorIdElement);

        return root;
    } 
```

有人可以告诉我如何根据上面的代码为 ksoap2 创建一个安全标头。感谢任何帮助

在此先感谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:02:10.107

尝试这个.....

```
// create header
        Element[] header = new Element[1];
        header[0] = new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd","Security");
        header[0].setAttribute(null, "mustUnderstand","1");

        Element usernametoken = new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "UsernameToken");
        usernametoken.setAttribute(null, "Id", "UsernameToken-1");
        header[0].addChild(Node.ELEMENT,usernametoken);

        Element username = new Element().createElement(null, "n0:Username");
        username.addChild(Node.IGNORABLE_WHITESPACE,"AJAY");
        usernametoken.addChild(Node.ELEMENT,username);

        Element pass = new Element().createElement(null,"n0:Password");
        pass.setAttribute(null, "Type", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText");
        pass.addChild(Node.TEXT, "hello");
        usernametoken.addChild(Node.ELEMENT, pass); 
```

# java - 计算是否周末时找不到符号

> ID：14969172
> 
> 赞同：1
> 
> 时间：2013-02-19T22:53:41.227
> 
> 标签：java, calendar

我正在尝试检查给定的一天是否是周末，但我收到一条错误消息

```
if (startDate.get(DAY_OF_WEEK) != Calendar.SATURDAY && (startDate.get(DAY_OF_WEEK) != Calendar.SUNDAY)) 
```

随着指针下`SUNDAY`

不太清楚这里的问题是什么，因为我确信我已经导入了所有必要的相关类，以及格式的事实`startDate`。`Calendar`有谁知道这里的问题是什么？

```
import java.util.*;
import java.text.*;
import java.lang.*;

//some code...

if (startDate.get(DAY_OF_WEEK) != Calendar.SATURDAY && (startDate.get(DAY_OF_WEEK) != Calendar.SUNDAY)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:55:07.087

如果您没有以某种`static`方式导入常量，则必须通过它们的类名来访问它们，例如

```
if (startDate.get(Calendar.DAY_OF_WEEK)  ...
                  ^^^^^^^^^ 
```

在您使用这些静态字段的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:55:15.503

`DAY_OF_WEEK`常量是类的一部分`Calendar`。利用：

```
if (startDate.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY && 
    startDate.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) 
```

即`Calendar.DAY_OF_WEEK`，不是`DAY_OF_WEEK`。

或者您可以使用静态导入：

```
import static java.util.Calendar.*; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T22:55:53.483

`DAY_OF_WEEK`是[**java.util.Calendar**](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_WEEK)类中的常量。

```
public static final int DAY_OF_WEEK 
```

> get 和 set 的字段编号，指示星期几。此字段采用 SUNDAY、MONDAY、TUESDAY、WEDNESDAY、THURSDAY、FRIDAY 和 SATURDAY 值。

```
if (startDate.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY && (startDate.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY)) { 
```

# python - 当我从我的 virtualenv 运行鼻子测试时，为什么会收到错误“无效的命令鼻子测试”？

> ID：14969173
> 
> 赞同：5
> 
> 时间：2013-02-19T22:53:45.077
> 
> 标签：python, virtualenv, nose

当我将这个项目加载到 Jenkins 中时，我首先注意到了这个项目的问题。更令人费解的是，我已经能够如下重现它：

在项目的原始版本中，以下命令按预期运行测试：

```
.venv/bin/python setup.py nosetests 
```

然后我执行以下操作：

1.  克隆项目：hg clone my-project my-project-clone
2.  `.venv`在克隆中创建 virtualenv
3.  从克隆的 pip freeze 文件安装要求

如果我`.venv/bin/python setup.py nosetests`在这个版本上运行，我会得到以下结果：

```
setup.py: error: Invalid command nosetests 
```

`setup.py`包括以下设置：

```
setup_requires=[
    'nose>=1.0', 'nosexcover', 'coverage', 'selenium', 'fixture'
],
test_suite='nose.collector', 
```

我特别困惑，因为每个版本中的文件都是相同的，`setup.py`而且`setup.cfg`据我所知，环境是相同的。

### 附录

我在侧边栏中注意到了[这个 Stack Overflow 问题](https://stackoverflow.com/questions/864956/problems-using-nose-in-a-virtualenv)，它看起来密切相关，但是那里提供的解决方案都不适用于我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T01:13:10.727

我遇到了同样的问题并设法通过放置来解决它

```
setup_requires=['nose>=1.0'] 
```

进入我的`setup.py`档案。之后，`setup.py nosetests`我可以使用 Python 选项。

一些有用的链接：

*   [https://nose.readthedocs.org/en/latest/setuptools_integration.html](https://nose.readthedocs.org/en/latest/setuptools_integration.html)
*   [https://nose.readthedocs.org/en/latest/api/commands.html](https://nose.readthedocs.org/en/latest/api/commands.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:51:57.367

我从来没有准确地弄清楚根本问题。但是我确实找到了一种解决方法，可以让我的构建运行。这是我在 Jenkins 上的 Virtualenv Builder 中使用的命令：

```
# require nosetests be installed
# (old method using setup.py nosetests command does not work)
$VIRTUAL_ENV/bin/pip install nose

# install remain pip requirements
$VIRTUAL_ENV/bin/pip install -r requirements.pip

# must run this prior to running tests to install other nosetest dependencies
$VIRTUAL_ENV/bin/python setup.py install

# now we can run nosetests
# this does not work: $VIRTUAL_ENV/bin/python setup.py nosetests
$VIRTUAL_ENV/bin/nosetests -c setup.cfg 
```

我怀疑根本问题与虚拟环境的状态以及我的新 virtualenv 中的 Distutils 和 Nose 之间的某种版本不兼容有关。随着时间的推移，旧的似乎已经达到了某种不稳定的配置，仅靠克隆和 pip 无法重建。

# cordova - Phonegap/Cordova 的超时/内存泄漏

> ID：14969179
> 
> 赞同：1
> 
> 时间：2013-02-19T22:54:27.220
> 
> 标签：cordova, cordova-2.0.0

我正在使用 Cordova/Phonegap 2.2.0 编写应用程序

它在 LG Ally (Android 2.2.2) 上运行

该应用程序从 Web 服务器检索大量数据，并且在此过程中应用程序提前结束。我这样说而不是错误，因为我没有得到典型的 Android“应用程序停止响应”对话框。相反，应用程序退出并返回主屏幕。

日志显示以下消息：

```
D/DroidGap(4018): Paused the application!
D/CordovaWebView(4018): Handle the pause
W/dalvikvm(4018): ReferenceTable overflow (max=512)
W/dalvikvm(4018): Last 10 entries in JNI local reference table:
W/dalvikvm(4018):   502: 0x44ae70c8 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   503: 0x44c93538 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   504: 0x44c76b70 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   505: 0x44a64810 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   506: 0x449ef708 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   507: 0x449d06b8 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   508: 0x449cd330 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   509: 0x449cc198 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   510: 0x449cb4c8 cls=Ljava/lang/String; (28 bytes)
W/dalvikvm(4018):   511: 0x449ea780 cls=Landroid/webkit/WebViewCore; (132 bytes)
W/dalvikvm(4018): JNI local reference table summary (512 entries):
W/dalvikvm(4018):   496 of Ljava/lang/String; 28B (496 unique)
W/dalvikvm(4018):    15 of Ljava/lang/String; 36B (15 unique)
W/dalvikvm(4018):     1 of Landroid/webkit/WebViewCore; 132B
W/dalvikvm(4018): Memory held directly by tracked refs is 14560 bytes
E/dalvikvm(4018): Failed adding to JNI local ref table (has 512 entries)
I/dalvikvm(4018): "WebViewCoreThread" prio=5 tid=8 RUNNABLE
I/dalvikvm(4018):   | group="main" sCount=0 dsCount=0 s=N obj=0x449ea828 self=0x1274c8
I/dalvikvm(4018):   | sysTid=4025 nice=0 sched=0/0 cgrp=unknown handle=1221400
I/dalvikvm(4018):   at android.webkit.WebViewCore.nativeHandleTouchEvent(Native Method)
I/dalvikvm(4018):   at android.webkit.WebViewCore.access$3400(WebViewCore.java:52)
I/dalvikvm(4018):   at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1159)
I/dalvikvm(4018):   at android.os.Handler.dispatchMessage(Handler.java:99)
I/dalvikvm(4018):   at android.os.Looper.loop(Looper.java:123)
I/dalvikvm(4018):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:623)
I/dalvikvm(4018):   at java.lang.Thread.run(Thread.java:1096)
E/dalvikvm(4018): VM aborting 
```

我不确定这是超时问题还是设备内存不足或发生了什么。

任何帮助将不胜感激。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:00:11.637

我找到了这个错误的解决方案。将您的资源（图像、字体、..）从您的资产文件夹移动到 sdcard 文件夹并修复错误！

# mysql - 选择某些类型没有任何相关记录的记录

> ID：14969184
> 
> 赞同：0
> 
> 时间：2013-02-19T22:54:53.530
> 
> 标签：mysql, sql

基本上我有两张桌子

```
articleID 
  1
  2
  3
  4

relatedType | articleID
     3              1
     4              1
     3              2
     4              3
     5              3
     2              4 
```

我需要选择没有任何相关记录的 articleID `type > 3`。有了这个数据集，我基本上需要：

```
articleID
2
4 
```

因为它们的相关类型只包含 3 和 2。

我用这个查询来做：

```
SELECT * FROM article 
   WHERE articleID NOT IN (SELECT articleID FROM relatedTable 
                     ^         WHERE type > 3 GROUP BY portalid ) 
                     |
                     |--- NOT IN does the trick! 
```

但我想避免嵌套查询，因为这个查询很慢。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:57:53.497

使用外连接

```
SELECT a.articleID 
FROM article a LEFT OUTER JOIN relatedTable r
 ON (a.articleID = r.articleID and r.relatedType > 3)
WHERE r.articleID IS NULL 
```

更正：对不起，我刚刚意识到请求不是列出那些具有类型> 3的任何记录的行。您仍然可以通过在 JOIN 中使用子查询或通过创建临时表，对其进行索引和然后加入那个。其中任何一个实际上是否比 NOT IN 子查询更快将取决于 MySQL 版本，更重要的是表大小和统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:58:13.263

你可以做

```
SELECT * FROM article a
 WHERE NOT EXISTS 
 (SELECT NULL FROM relatedTable b WHERE b.type > 3
  AND b.articleID = a.articleID) 
```

从技术上讲，实现所需结果的所有 3 种方法 ( `NOT IN`, `NOT EXISTS`, `LEFT JOIN`) 应该表现相同（对于不可为空的列）并且通常生成相同的执行计划，除了`NOT IN`不推荐的 mysql （或者在 5.5 之前不推荐，也许它改变）。
我也会`GROUP BY`在您的原始查询中归咎于性能不佳......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:11:04.060

如果您只需要文章 ID，请尝试以下操作：

```
SELECT 
   articleID
FROM relatedTable
GROUP BY articleID
HAVING MAX(relatedType) <= 3 
```

或者你可以把它加入你的`article`桌子。

# jsf - 使用 itemLabel 在 p:picklist 中创建“表”

> ID：14969188
> 
> 赞同：0
> 
> 时间：2013-02-19T22:55:06.667
> 
> 标签：jsf, xhtml, primefaces

我想知道是否可以为 primefaces 选项列表创建更复杂的 itemLabel。基本上，我使用选择列表作为用户将联系人（想想 Outlook 联系人）从一个列表移动到另一个列表的一种方式。我为 itemLabel 提供的代码如下所示：

```
itemLabel="#{contact.firstName} #{contact.lastName} &#160; &#160; &#160; #{contact.email}" 
```

这导致每个“项目”看起来很草率，并且很难正确放置空间。我希望在 itemLabel 中有 2 个（或更多）“列”，因此可以适当地间隔。如果这是不可能的，我是否可以使用另一个更适合这种类型的用户交互的组件？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:00:09.750

您可以`p:column`在选择列表中使用标签来定义更多列，并更好地组织列表呈现给用户。结构将是这样的：

```
<p:pickList>
  <p:column></p:column>
  <p:column></p:column>
</p:pickList> 
```

您可以[在 Primefaces 展示中查看第二个示例](http://www.primefaces.org/showcase/ui/picklist.jsf)

# python - 3D 圆锥的表面积和体积

> ID：14969192
> 
> 赞同：-3
> 
> 时间：2013-02-19T22:55:18.097
> 
> 标签：python, volume, area, sqrt

编写一个程序，提示用户输入 3 维圆锥的半径和高度，然后计算并打印圆锥的表面积和体积。表面积和体积的计算将在函数中完成，输入的收集也是如此。

这部分的程序将按如下方式运行：

1.  打印出一条消息，指出程序的作用。
2.  提示用户以英尺为单位的半径（非负浮点数）。
3.  提示用户以英尺为单位的高度（非负浮点数）。
4.  打印半径和高度，但四舍五入为 2 位小数。
5.  打印表面积和体积，四舍五入到小数点后 2 位。

# 这是我到目前为止所做的：

```
import math

print("This Program will calculate the surface area and volume of a cone."
  "\nPlease follow the directions.")
print()
print()
r = input(str("What is the radius in feet? (no negatives): "))
h = input(str("What is the height in feet? (no negatives): "))

math.pi = (22.0/7.0)
math.sqrt()
surfacearea = int(math.pi*r**2)+int(r*math.pi(math.sqrt(r**2+h**2)))
print("The surface area is", surfacearea)
print()
volume = (1/3)*math.pi*r**2*h
print ("The volume is", volume)

print()
print("Your Answer is:")
print()

print("A cone with radius", r, "\nand hieght", h,"\nhas a volume of : ",volume,
  "\nand surface area of", surfacearea,) 
```

# 我不断收到错误

```
TypeError: unsupported operand type(s) for ** or pow(): 'str' and 'int'

TypeError: can't multiply sequence by non-int of type 'float' 
```

谁能帮我通过这个小墙块，我认为“浮动”是问题的一部分。我认为设置很好，但执行是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:59:40.803

我假设您使用的是 Python 3，所以`input`只是返回一个字符串。

所以：

```
r = input(str("What is the radius in feet? (no negatives): "))
# ...
surfacearea = int(math.pi*r**2) #+ ... 
```

这将引发此错误，因为您正在尝试对字符串进行平方。你不能那样做。

如果你在`r = float(r)`之后添加`input`，那么它会给你一个浮点数（你可以平方），或者如果用户输入了错误的内容，则会引发异常。

同时，`str`那一行的 for 是什么？你认为`"What is the radius in feet? (no negatives): "`是什么类型？您是在尝试完成某件事，还是只是在不知道原因的情况下插入它？

同样，在这一行中：

```
surfacearea = int(math.pi*r**2)+int(r*math.pi(math.sqrt(r**2+h**2))) 
```

为什么要将浮点值转换为`int`？作业说这些值应该“四舍五入到 2 位”。

更一般地说，如果您在某行代码中遇到错误并且不知道原因，请尝试将其分解。在那一行中发生了很多事情。为什么不试试这个：

```
r_squared = r**2
pi_r_squared = math.path * r_squared
int_pi_r_squared = int(pi_r_squared)
h_squared = h**2
r_squared_h_squared = r_squared + h_squared
sqrt_r2_h2 = math.sqrt(r_squared_h_squared)
# etc. 
```

然后你可以看到哪个不工作，并找出原因，而无需查看一大堆代码并猜测。您甚至可以通过在特定行添加`pdb`断点或`print`调用来调试它，以确保每个值都是您认为应该的值。

# performance - 更新 Erlang ETS 表中所有值的最快方法是什么？

> ID：14969195
> 
> 赞同：1
> 
> 时间：2013-02-19T22:55:36.220
> 
> 标签：performance, erlang, ets

我想对 ETS 表中的所有元组应用一个函数：

该表是一组，每个键只出现一次。

我的表只包含相同类型的元组：

```
{Key, X, Y, VX, VY} 
```

所有值都是`::integer()`

我想要做的是有一个特定的值 Elapsed 并用一个函数更新我所有的元组`apply_vector/2`

```
apply_vector({K, X, Y, 0, 0}, _Elapsed) ->
    {K, X, Y, 0, 0};

apply_vector({K, X, Y, VX, VY}, Elapsed) ->
    NewX = X + (VX * Elapsed),
    NewY = Y + (VY * Elapsed),
    {K, NewX, NewY, VX, VY}. 
```

### 可能的解决方案

*   如果我使用`ets:foldl`，我的插入可能会在折叠期间被遍历，并导致无限（非常长）循环。

*   我可以用 a 准备新的元组`ets:foldl`，然后插入整个列表。

*   我可以插入一个新表，然后用新表替换旧表，但我不想通过调用 gen_server 来限制对表的访问，该表必须随时可以访问。

*   我不能使用`ets:update_element`，因为我需要读取 VX 和 VY 值来更新 X 和 Y。

*   我知道有一些迭代器实用程序，但似乎没有人允许传递乐趣。

我需要每 1 - 5 秒进行一次更新。那么，对于 10 个元组，哪种解决方案最有效？有 100 个元组？有更多？

谢谢你 ！

I Keep a list of boats，Key是Boat ID，X和Y是地理坐标，VX和VY代表运动向量：一秒的位移。Elapsed 是一个比率，即自上次更新以来的秒数。该表有助于随时了解每艘船的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:03:47.207

我可能为此使用 ets:foldl。

在我看来，您只需要对这些数据进行迭代访问。所以你可以在这里使用记录列表。

另一种方法（我会采用）是放置一个船监督器并为每艘船创建一个 gen_server。这样每艘船都有自己的状态，你实际上不需要遍历任何列表。

还可以查看 qlc [http://www.erlang.org/doc/man/qlc.html](http://www.erlang.org/doc/man/qlc.html) qlc 让您在 ets 或 mnesia 表上使用列表理解。不过，它可能具有与 foldl 相同的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:17:04.133

没有什么好方法可以做你正在做的事情。

最近，我遇到了一个类似的问题（更新约 5000 行，每秒一次）

这导致我采取了完全不同的方法。
那么，您是否需要存储解释值？或者您可以在查找时计算值吗？

如何存储：{K,X,Y,VX,VY,LastUpdateTime}

然后做类似的事情（不可编译的例子）：

```
boats:get_all() -> % Record syntax would be smarter here, but it's an example...
  ets:foldl(?TABLE,[],fun(Row={Id,_,_,_,_,_},Acc) -> [{Id,calc(Row)}|Acc] end).

boats:get(Id) ->
  [Row] = ets:lookup(?TABLE,Id),
  calc(Row).

calc({_K,X,Y,VX,VY,LastUpdate}) ->
  {X + (VX * (now() - LastUpdate)), Y + (VY * (now() - LastUpdate)} 
```

这使您不必在 genserver 上阻塞，也不必每 5 秒更新一次表。您基本上只会在每次船报告时更新表格。

# c - 无法将矩阵打印到文件中

> ID：14969196
> 
> 赞同：0
> 
> 时间：2013-02-19T22:55:45.283
> 
> 标签：c

我的矩阵有问题。

当我尝试将最后一个矩阵（可逆矩阵）打印到文件（matrixrez.txt）时，程序只打印第一列。

为什么？

矩阵.txt：

```
1 0 1  1 2 0
1 0 2  0 3 0
2 1 1  1 2 3 
```

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main() {
FILE *file, *outf;
int matrixA[3][3], matrixB[3][3], a[3][3];
int trash[3];
int i, j, k, sum;
float determinant = 0;

i = j = k = sum = 0;
file = fopen("matrix.txt", "rt");
outf = fopen("matrixrez.txt", "w+");

for (i = 0; i < 3; i++) {
 for (j = 0; j < 3; j++) {
    fscanf(file, "%d", &matrixA[i][j]);
 }

 for (k = 0; k < 3; k++) fscanf(file, "%d", &trash[k]);

}

fseek(file, 0, SEEK_SET);

for (i = 0; i < 3; i++) {

 for (k = 0; k < 3; k++) fscanf(file, "%d", &trash[k]);
 for (j = 0; j < 3; j++) {
    fscanf(file, "%d", &matrixB[i][j]);
 }
 }

 /* Matrix multiplication */

 for ( i = 0 ; i < 3 ; i++ )
 {
  for ( j = 0 ; j < 3 ; j++ )
  {
    for ( k = 0 ; k < 3 ; k++ )
    {
      sum = sum + matrixA[i][k]*matrixB[k][j];
    }

    a[i][j] = sum;
    sum = 0;
  }
  }

 for(i=0;i<3;i++)
  determinant = determinant + (a[0][i]*(a[1][(i+1)%3]*a[2][(i+2)%3] - a[1][(i+2)%3]*a[2][(i+1)%3]));

 for (i = 0; i < 3; i++) {
 printf("\n");
 for (j = 0; j < 3; j++) {
    printf("%d ", matrixA[i][j]);
 }
 }
 printf("\n");

 for (i = 0; i < 3; i++) {
 printf("\n");
 for (j = 0; j < 3; j++) {
    printf("%d ", matrixB[i][j]);
 }
 }

 printf("\n");

 printf("The resultant matrix is:: \n");
 fprintf(outf,"The resultant matrix is:: \n");
 for (i = 0; i < 3; i++) {
 printf("\n");
 fprintf(outf,"\n");
 for (j = 0; j < 3; j++) {
    printf("%d ", a[i][j]);
    fprintf(outf,"%d ", a[i][j]);
 }
 }

 printf("\n\n Inversion of Matrix: \n");
 fprintf(outf,"\n\n Inversion of Matrix: \n");
 for(i=0;i<3;i++){
  for(j=0;j<3;j++)
       printf("%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3]      [(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant);
       fprintf(outf,"%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3][(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant);
   fprintf(outf,"\n");
   printf("\n");

 }

 printf("\n");

 system("pause");
 return 0;
 } 
```

我得到了 matrixrez.txt：

```
The resultant matrix is:: 

2 4 3 
3 6 6 
3 9 3 

Inversion of Matrix: 
 4.00   
-1.67   
-0.67 
```

我认为文件末尾的行有问题（如果我没记错的话）：

```
 fprintf(outf,"%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3][(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:07:31.777

您需要在最后作为 for 循环块的内容周围加上大*括号*：

```
 printf("\n\n Inversion of Matrix: \n");
 fprintf(outf,"\n\n Inversion of Matrix: \n");
 for(i=0;i<3;i++){
  for(j=0;j<3;j++)
  { /* YOU NEED THIS BRACE */
       printf("%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3]      [(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant);
       fprintf(outf,"%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3][(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant);
  } /* AND YOU NEED THIS BRACE */
   fprintf(outf,"\n");
   printf("\n");

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:07:06.457

`for`内循环周围没有括号。所以，它循环通过`i`就好了，但每次它循环通过`j`而不调用`fprintf`just`printf`

代码应该是

```
printf("\n\n Inversion of Matrix: \n");
fprintf(outf,"\n\n Inversion of Matrix: \n");
for(i=0;i<3;i++){
 for(j=0;j<3;j++){
  printf("%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3]      [(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant);
  fprintf(outf,"%.2f\t",((a[(i+1)%3][(j+1)%3] * a[(i+2)%3][(j+2)%3]) - (a[(i+1)%3][(j+2)%3]*a[(i+2)%3][(j+1)%3]))/ determinant);
  fprintf(outf,"\n");
  printf("\n");
 }
} 
```

# android - 使用 getSharedPreferences android？

> ID：14969197
> 
> 赞同：-2
> 
> 时间：2013-02-19T22:55:45.753
> 
> 标签：android, sharedpreferences

这是`save()`我的应用程序中的方法：

```
public void save() {
    Context context;
    SharedPreferences sp = context.getSharedPreferences("gameSave",
            Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();

    editor.putInt("X", player.getX());
    editor.putInt("Y", player.getY());
    editor.putInt("level", player.getLevel());
    editor.putFloat("xp", player.getXp());
    editor.commit();
} 
```

我一直试图让它工作一段时间，但`getSharedPreferences (String name, int mode)`一直没有为我工作。它不会自己出现，`context.getSharedPreferences()`有效，但`NullPointerException`我认为这是因为我的上下文而产生的。我已经尝试过`save(Context context){}`作为构造函数，但是从另一个方法中调用它并且在该方法内部声明了上下文也不起作用。我看过很多例子，但没有一个对我有用。那我怎么`getSharedPreferences()`去上班呢？

**编辑：**我有一个 GameScreen 类和一个 SaveManager 类。当我在 Gamescreen 中保存时，这是我使用的代码：

```
Savemanager savemanager;
savemanager.save();
state = GameState.Running; 
```

我有我的班级 SaveManager：

```
package com.package.game;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;

public class SaveManager extends Activity {

private Player player = GameScreen.getPlayer();

public void save() {
    SharedPreferences sp = getSharedPreferences("gameSave",
            Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();

    editor.putInt("X", player.getX());
    editor.putInt("Y", player.getY());
    editor.putInt("level", player.getLevel());
    editor.putFloat("xp", player.getXp());
}
} 
```

当我在 GameScreen 中保存时，我的应用程序崩溃了，我得到了这个 logcat：

```
02-20 01:39:31.979: E/AndroidRuntime(1368): FATAL EXCEPTION: Thread-119
02-20 01:39:31.979: E/AndroidRuntime(1368): java.lang.NullPointerException
02-20 01:39:31.979: E/AndroidRuntime(1368): at com.package.game.GameScreen.updateLevelUp(GameScreen.java:364) 
```

第 364 行是行`savemanager.save();`。我不知道为什么这会使我的应用程序崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T00:06:55.817

`getSharedPreferences()`是一种`Context`方法。如果`save()`在一个扩展的类中`Context`，例如`Activity`，你不必做`context.getSharedPreferences()`，所以你可以做，正如你所说的“方法本身”。

但是，如果 save*不在*extends 类中`Context`，为了能够调用`getSharedPreferences()`它，它需要`Context`传递一个变量。这意味着您通过简单地创建一个`context`变量所做的事情是不够的（并且该代码不应该编译，将会抛出一个关于`context`变量尚未初始化的错误）。而且由于`Context`s 不是使用构造函数制作的，因此您的方法陷入了死胡同。

但是，你很接近。为了解释起见，您可以创建一个接受 a`Context`并进行保存的静态方法。`static`由于此方法确实不需要对象实例，因此它可以是自包含的：

```
public static void save(Context context) {

    if (context == null)
      throw new RuntimeException ("Context is null, what are you doing?");

    SharedPreferences sp = context.getSharedPreferences("gameSave",
            Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();

    editor.putInt("X", player.getX());
    editor.putInt("Y", player.getY());
    editor.putInt("level", player.getLevel());
    editor.putFloat("xp", player.getXp());
    editor.commit();
} 
```

现在，如果此方法是类的一部分，例如命名`StaticUtils`，您可以调用 save：

*   通过`Activity`:`StaticUtils.save(YourActivityClass.this);`或`StaticUtils.save(this);`取决于范围（例如，如果在匿名内部函数中，您将使用`YourActivityClass.this`）。
*   `Fragment`：`StaticUtils.save(getActivity());`
*   `BroadcastReceiver`：`StaticUtils.save(context);`
*   A `View`（例如，当被调用`View`时传递：`onClick()``StaticUtils.save(v.getContext());`

请记住，您可以在 Activity 中保存的最早可能是`onCreate()`之前的任何操作都将失败，并且 Exception 应该清楚地表明这一点。

一个简单的演示。没有扩展任何东西，没有花哨的制作`Context`：

MainActivity.java：

```
public class MainActivity extends Activity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     StaticUtils.save(this);

     SharedPreferences prefs = getSharedPreferences ("gameSave", Context.MODE_PRIVATE);
     System.out.println ("X is " + prefs.getInt ("X",-1));
  }
} 
```

静态工具.java

```
public class StaticUtils {
    public static void save(Context context) {

        if (context == null)
          throw new RuntimeException ("Context is null, what are you doing?");

        SharedPreferences sp = context.getSharedPreferences("gameSave",
                Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = sp.edit();

        editor.putInt("X", 11);
        editor.putInt("Y", 24);
        editor.putInt("level", 3);
        editor.putFloat("xp", 100);
        editor.commit();
    }
} 
```

# javascript - Paper.js 来自纯 javascript

> ID：14969202
> 
> 赞同：1
> 
> 时间：2013-02-19T22:55:53.653
> 
> 标签：javascript, canvas

我正在尝试使用 paper.js 制作游戏，但有些东西不起作用，所以我已经简化了一些事情并且......不再工作了。

我尝试使用已创建命名空间的 paper.js 进行制作，`paperscript`但调试起来太难了，所以我尝试[直接使用 javascript](http://paperjs.org/tutorials/getting-started/using-javascript-directly/)。

即使使用超级简单的代码在浏览器中移动一个球......它也不起作用。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Bouncing ball</title>
    <link rel="stylesheet" href="../css/style.css">
    <script type="text/javascript" src="../../lib/paper.js"></script>
    <script type="text/javascript">
        var ball;

        function game(_view) {
            console.log("game!");
            ball = new Ball();
            this.view = _view;
            console.log(ball);
        }

        paper.install(window);
        window.onload = function() {
            var canvas = document.getElementById('canvas');
            paper.setup(canvas);
            view.onFrame = onFrame;
            game(view);
        }

        var Ball = Base.extend({
            initialize: function() {
                this.position = new Point(100, 100);
                this.velocity = new Point(3, 0);

                this.path = new Path.Circle(location, 25);
                this.path.strokeColor = 'black';
                this.path.fillColor = 'black';
            },

            iterate: function() {
                this.position += this.velocity;
                this.path.position = this.position;

                return this;
            }
        });

        function onFrame(event) {
            ball.iterate();
            //console.log(ball);
        };

    </script>
</head>
<body>
    <canvas id="canvas" resize></canvas>
</body>
</html> 
```

我不断收到此错误：

> 未捕获的类型错误：无法调用未定义的方法“迭代”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:58:10.617

当您分配`onFrame`处理程序时，会调用一个 setter 函数`setOnFrame`，该函数会立即调用帧处理程序。由于`ball`此时未初始化，因此函数调用失败。

```
setOnFrame: function(onFrame) {
    this._onFrame = onFrame;
    if (!onFrame) {
        delete this._onFrameCallback;
        return;
    }
    var that = this,
        requested = false,
        before,
        time = 0,
        count = 0;
    this._onFrameCallback = function(param, dontRequest) {
        requested = false;
        if (!that._onFrame)
            return;
        paper = that._scope;
        requested = true;
        if (!dontRequest) {
            DomEvent.requestAnimationFrame(that._onFrameCallback,
                    that._canvas);
        }
        var now = Date.now() / 1000,
            delta = before ? now - before : 0;
        that._onFrame(Base.merge({
            delta: delta, 
            time: time += delta, 
            count: count++
        }));
        before = now;
        that.draw(true);
    };
    if (!requested)
        this._onFrameCallback();  //here your onFrame function is called
}, 
```

如果你查看[这个 jsFiddle](http://jsfiddle.net/dUnJF/1/)，并确保你`break on exceptions`在你的开发工具中设置，你可以看到堆栈。然后解决方案是`ball`在分配处理程序之前进行初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:02:20.270

只有一个可能的原因，`ball`尚未定义何时`onFrame`调用。`onFrame`要么在创建后赋值，要么在里面`ball`检查。`ball``onFrame`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T09:29:09.703

我创建了一个库[folio.js](https://github.com/frederickk/folio.js)来解决这个问题。它还处理动画。这是您使用 folio.js 的示例。

```
 <!doctype html>
<!--[if lt IE 7]>           <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>              <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>              <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"> <!--<![endif]-->
    <head>
        <!-- META -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">

        <title>Ball</title>

        <script type="text/javascript" src="paper-core.js"></script>
        <script type="text/javascript" src="paper.folio.js"></script>
        <script type="text/javascript">
            // ------------------------------------------------------------------------
            // Properties
            // ------------------------------------------------------------------------
            // the core folio namespace
            var f = folio;

            // define ball variable
            var ball;

            // ------------------------------------------------------------------------
            // Setup
            // ------------------------------------------------------------------------
            function Setup() {
                ball = new Ball();
            };

            // ------------------------------------------------------------------------
            // Update
            // ------------------------------------------------------------------------
            /*
             *  Update() is called every frame
             */
            function Update(event) {
                ball.iterate();
            };

            // ------------------------------------------------------------------------
            // Draw
            // ------------------------------------------------------------------------
            function Draw() {
            };

            // ------------------------------------------------------------------------
            // Classes
            // ------------------------------------------------------------------------
            var Ball = Base.extend({
                initialize: function() {
                    this.position = new Point(100, 100);
                    this.velocity = new Point(3, 0);

                    this.path = new Path.Circle(this.position, 25);
                    this.path.strokeColor = 'black';
                    this.path.fillColor = 'black';
                },

                iterate: function() {
                    this.path.position.x += this.velocity.x;
                    this.path.position.y += this.velocity.y;
                    return this;
                }
            });

        </script>

        <meta http-equiv="x-dns-prefetch-control" content="off"/>
    </head>
    <body>

        <canvas resize="true" id="canvas"></canvas>

    </body>
</html> 
```

# python - 在 django-crispy-forms PrendText 字段中禁用自动完成

> ID：14969206
> 
> 赞同：4
> 
> 时间：2013-02-19T22:56:16.283
> 
> 标签：python, django, django-crispy-forms

我正在使用 django-crispy-forms 并想知道如何禁用特定字段的自动完成功能。该字段是一个`forms.IntegerField`前置文本。

```
p_number = forms.IntegerField()

helper = FormHelper()
helper.form_class = 'form-horizontal'

helper.layout = Layout(
    Row(
        PrependedText('p_number', 'P',css_class='input-xlarge'),
        Submit('submit','Submit', css_class='btn-primary'),
    )
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T17:19:58.530

这样做的脆形式方法很简单：

```
PrependedText('p_number', 'P', css_class='input-xlarge', autocomplete="off"), 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T18:50:17.140

Bootstrap 具有`autocomplete`输入属性以允许禁用自动完成。您可以通过 django-crispy-forms 以这种方式关闭此属性：

```
p_number = forms.IntegerField(
               widget=forms.TextInput(
                                  attrs={'autocomplete':'off',}
                                     )
                              ) 
```

# java - 在webview android中查找文件

> ID：14969208
> 
> 赞同：0
> 
> 时间：2013-02-19T22:56:27.513
> 
> 标签：java, android

我正在尝试访问 Web 视图中的文件。文件名为“UserRules.txt”，它保存在 android 保存其默认文件的任何位置。

我的网络文件位于“资产”文件夹中。

知道我应该使用的文件路径吗？

# ruby-on-rails - 用于添加现场教程的 Rails gem

> ID：14969209
> 
> 赞同：6
> 
> 时间：2013-02-19T22:56:30.533
> 
> 标签：ruby-on-rails

有谁知道用于向站点添加教程的 Rails 宝石？

类似于登录用户在访问站点时可以遵循的分步教程。它会有类似的东西：

*   要完成的一系列步骤或课程
*   能够将课程标记为由用户或在网站内完成
*   跳过步骤/课程的能力
*   为用户打开或关闭教程

在线游戏通常有这样的介绍性教程，我只是想知道是否有任何捷径可以设置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T03:27:43.527

我不知道一个特定的 gem 来做一个入职教程，但是有这个 javascript 插件可以帮助你：

[http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)

这是一个可以轻松将其包含到您的应用程序中的宝石

[https://github.com/TrueNorth/joyride-rails](https://github.com/TrueNorth/joyride-rails)

# java - JUnit 测试：调用父类受保护的方法

> ID：14969212
> 
> 赞同：1
> 
> 时间：2013-02-19T22:56:39.080
> 
> 标签：java, reflection, methods, junit, protected

这是我的班级层次结构

```
abstract Class A
{
   int i = 0;
   protected init (String param1, String param2)
   {
       //do lots of common things based on param1, param2 and save data in i
   } 
} 
```

然后有3-4个实现A的类，即

```
Class B extends A
{
    public B ()
    {
        super ();
    }

    public void performSomeAction ()
    {
        init (param1_specific_to_class_B, param2_specific_to_class_B); //calling parent class method 
        //do rest of teh random things
    }
} 
```

现在，我正在尝试为 A 类编写 JUnit 测试。基本上我想测试`init`正在执行的任何方法是否准确。我试过这个

```
Class clas = A.class;
B b = new B();

Method A_init;
A_init = clas.getDeclaredMethod("init", String.class, String.class);
A_init.invoke(b, param1_specific_to_class_B, param2_specific_to_class_B); 
```

但它不工作，我得到以下异常

```
java.lang.IllegalAccessException: Class test.package.subpackage.ATest can not access a member of class package.subpackage.A with modifiers "protected"
    at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
    at java.lang.reflect.Method.invoke(Method.java:578)
    at test.package.subpackage.ATest.initTest(ATest.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:22:42.730

您可以将测试类与被测试类放在同一个包中。所以测试类将可以访问受保护的方法。

另一个更优雅的选择是使受保护的方法可访问：

```
A_init = clas.getDeclaredMethod("init", String.class, String.class);
A_init.setAccessible(true);
A_init.invoke(b, param1_specific_to_class_B, param2_specific_to_class_B); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:12:28.680

`protected`一个类的成员对另一个包中的类不[可见](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)，除非它是前者的子类。

但是，在您的应用程序中，该类`test.package.subpackage.ATest`试图从 中的另一个类访问受保护的方法`package.subpackage`，这会导致访问冲突。

尝试将`ATest`类放置到一个位置，使两者都`A`属于`ATest`同一个包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-02T08:08:04.743

或者，在您的 TestClass 中创建 A 的子类并通过公共方法公开受保护的方法：

```
public class TestClass extends TestCase(){

   // ...

   private class AChild extends A{
      public exposeInit (String param1, String param2){
         super.init(param1, param2);
      }
   }
} 
```

现在您可以通过测试 AChild 类的 init 来测试 A 类的 init。

我有类似的问题，但我们通过将设计改为组合而不是继承来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:23:17.490

也许我错过了一些东西，但是，因为 B 没有覆盖 A.init() （至少，从我所见）你可以去

```
B b = new B()
b.init(param1_specific_to_class_B, param2_specific_to_class_B) 
```

如果 B 覆盖 init()，

1.  把所有东西放在同一个包里（正如其他人发布的那样）
2.  如果无法或不希望更改包，您可能必须向 B 添加一个特殊方法来调用`super.init()`. 我将其命名为类似的名称，`callSuperInitForUnitTests()`并在评论中明确说明这是单元测试的一种解决方法。

# reporting-services - SSRS 动态背景颜色基于动态列中的数据

> ID：14969219
> 
> 赞同：0
> 
> 时间：2013-02-19T22:57:26.397
> 
> 标签：reporting-services, colors, expression

我有一个包含两列的报告。这两列被命名为“本月”或“上个月”。我正在尝试为“本月”中的数据单元格添加与“上个月”中的数据相关的背景颜色。

我熟悉使用 IIF 语句的动态颜色编码，但似乎无法弄清楚这一点。

下面，我尝试将 IIF 与 LOOKUP 命令一起使用，但我不确定我是否正确使用了此命令。任何帮助，将不胜感激。

```
=IIF(LOOKUP(Fields!Type.Value = "This Month", Fields!Type.Value, Fields!Count.Value, "ExecutiveFCAPS") < LOOKUP(
Fields!Type.Value = "Last Month", Fields!Type.Value, Fields!Count.Value, "ExecutiveFCAPS"), "LightGreen", 

IIF(LOOKUP(Fields!Type.Value = "This Month", Fields!Type.Value, Fields!Count.Value, "ExecutiveFCAPS") = LOOKUP(
Fields!Type.Value = "Last Month", Fields!Type.Value, Fields!Count.Value, "ExecutiveFCAPS"), "Yellow", 

IIF(LOOKUP(Fields!Type.Value = "This Month", Fields!Type.Value, Fields!Count.Value, "ExecutiveFCAPS") > LOOKUP(
Fields!Type.Value = "Last Month", Fields!Type.Value, Fields!Count.Value, "ExecutiveFCAPS"), "Orange", "Transparent"))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:44:31.633

我最终在 SQL 中进行了所有计算，并在我的数据集中添加了一个变化列。在 SSRS 中，我将颜色代码配置为读取变化列，并相应地颜色代码。我使用 CASE 来设置变量列数据。

=IIF（字段！Variation.Value = 2，“LightGreen”，IIF（字段！Variation.Value = 3，“透明”，IIF（字段！Variation.Value = 1，“橙色”，“透明”）））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:05:36.157

如果我理解您的问题，我相信您需要做一些事情：

1.  将您`lookup`的功能更改为`lookupset`功能；
2.  将 the 替换`field = "Month"`为`"Month"`单独的，因为这将导致仅查找布尔值而不是月份；和
3.  将它们包装在`sum`函数中。

我强烈建议您回到 sql 并重新调整它以生成 2 个单独的字段，一个用于`This Month`，另一个用于`Last Month`然后您可以完全摆脱这些`lookup`功能。

如果这不起作用，建议您调整馈送 sql 以为每个月的值设置一种颜色，因为您可以使用窗口子句。

此外，您可以尝试`scope`ssrs 中的功能。一个很好的帮助理解的资源是[here](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/0bde66d7-b0e4-40da-9a0c-838663e66119)。

# coldfusion - 对嵌套对象使用 structKeyExists

> ID：14969221
> 
> 赞同：4
> 
> 时间：2013-02-19T22:57:34.020
> 
> 标签：coldfusion, struct

我有一个像这样的嵌套结构`struct1.struct2.foo`。我想检查是否`foo`存在。但是，`struct2`也不保证存在。我讨厌使用`isDefined()`，但我也认为调用`structKeyExists()`两次很浪费（例如，`if (structKeyExists(struct, 'struct2') && structKeyExists(struct.struct2, 'foo')) {}`

我考虑过使用`structFindKey()`，但如果存在，我不想遇到问题`struct1.foo`

有没有更好的方法来实现这一点？

这是与[此问题类似的问题](https://stackoverflow.com/questions/5021012/coldfusion-do-i-need-to-use-structkeyexists-for-every-element-of-a-deep-struct)，但我不是在处理 XML 文档，因此该帖子中的大多数答案对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:13:01.597

使用没有错`isDefined("struct1.struct2.foo")`。它并没有你想象的那么慢。从范围开始，如果你想让它更快一点，比如`"variables.struct1.struct2.foo"`

[ColdFusion 9 CFML 参考 (PDF)](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fbd.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T16:59:20.220

这是前面一个问题的核心问题（虽然更简洁）：

[如何动态循环遍历结构数组](https://stackoverflow.com/questions/14574673/how-to-dynamically-loop-thru-an-array-of-structures/14583505)

我会提供同样的答案。

[如何动态循环遍历结构数组](https://stackoverflow.com/questions/14574673/how-to-dynamically-loop-thru-an-array-of-structures/14583505#14583505)

要重复基本部分，以下功能应该可以满足您的需求：

```
 <cffunction name="StructGetByKeyList">
      <cfargument name="struct">
      <cfargument name="key">

      <cfif StructKeyExists(struct,ListFirst(key,"."))>
           <cfif ListLen(key,".") GT 1>
                <cfreturn StructGetByKeyList(struct[ListFirst(key,".")],ListRest(key,"."))>
           <cfelse>
                <cfreturn struct[key]>
           </cfif>
      <cfelse>
           <cfreturn "">
      </cfif>
 </cffunction> 
```

然后你可以只调用 StructGetByKeyList(struct1,"struct2.foo") ，如果它存在，它会返回键的字符串，如果不存在，它会返回一个空字符串。

要改为返回布尔值，请使用以下命令：

```
<cffunction name="StructNestedKeyExists">
    <cfargument name="struct">
    <cfargument name="key">

    <cfif StructKeyExists(struct,ListFirst(key,"."))>
        <cfif ListLen(key,".") GT 1>
            <cfreturn StructNestedKeyExists(struct[ListFirst(key,".")],ListRest(key,"."))>
        <cfelse>
            <cfreturn true>
        </cfif>
    <cfelse>
        <cfreturn false>
    </cfif>
</cffunction> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T00:43:47.093

isDefined() 可能会返回误导性结果。它不如 structKeyExists() 准确。除非您在弹出时对这段代码进行数千次迭代，否则您不会注意到任何性能差异。他们俩的表现都不错。但是，如果密钥不存在，那么您可能会注意到差异（同样，只有数千次迭代）。isDefined() 将遍历各种可用范围，如果它在第一遍找不到它。即使您向它传递了一个看起来像是指定了您要检查的范围的变量。structKeyExists() 在查找该键的位置非常明确。如果没有找到，它将停止并返回 FALSE。看起来您正在做不必要的工作，但它返回的结果要准确得多。

彼得的建议非常好。看看那个链接。

# solr - 将 Solr 从单核更改为多核，希望保留索引数据

> ID：14969227
> 
> 赞同：1
> 
> 时间：2013-02-19T22:58:02.917
> 
> 标签：solr

我目前有一个包含大量数据的 solr 索引。我将其转换为多核实例，其中一个核心将是现有索引。

数据目录甚至已经位于正确的位置，因此理论上不需要移动或更改任何内容。

我知道添加新核心不是问题，但我想知道从不指定核心到明确拥有它们是否会以某种方式使当前索引无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:03:58.593

多核设置不会影响您现有的核心。您只需要在您的 solr 主页中配置 solr.xml 以指向不同的核心，并确保旧核心具有所有定义的数据/配置。

只要 solr 架构保持不变，您的旧数据目录就应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:55:47.643

我认为您现有的索引不会损坏。不过为了安全起见，请先在另一台机器上的较小测试索引上尝试，然后再在具有大索引的机器上进行测试。[Solr CoreAdmin wiki](https://wiki.apache.org/solr/CoreAdmin)也可能对您有所帮助。

# maven - 如果从 Nexus 中清除本地缓存的快照，则强制 Maven 使构建失败

> ID：14969230
> 
> 赞同：0
> 
> 时间：2013-02-19T22:58:30.813
> 
> 标签：maven, build

1.  假设有一个引用库快照版本的项目，例如`library:1.0.0-SNAPSHOT`.
2.  在本地构建项目，导致 Maven 拉`library:1.0.0-SNAPSHOT`入其本地缓存。
3.  `library:1.0.0-SNAPSHOT`从 Nexus（或您选择的工件存储）中清除，可能通过`mvn release`ing 库。
4.  再次在本地构建项目，也许`--update-snapshots`-*它成功了*！

这里的问题是：当清除远程快照时，如何使 Maven在本地**失败**构建？

我想在持续集成系统中实现这一壮举，这意味着要求我在构建之前清除整个本地缓存的解决方案是不可能的。也不可能内省项目的 POM 并在构建之前从本地缓存中手术删除工件。

注意：我已向 Maven 提交了[#MNG-5245](http://jira.codehaus.org/browse/MNG-5425)，希望在缺少此功能时加快创建此功能。因此，如果您发现此错误报告，请抵制将其用作答案的诱惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:34:31.247

不，Maven 不支持这个。我也无法想象它会成为正确解决方案的问题。我建议您问另一个问题并解释您要完成的工作。您可能会发现有更好的方法可以到达那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:45:57.457

我能想到的最接近的是，在本地构建之前，首先对本地存储库中的快照进行本地存储库清除。

[http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)

您“成功”构建的原因是因为 Maven 实际上可以在您的本地存储库中找到相应的快照工件。由于 Maven 没有“陈旧”的工件概念，所有本地存储的工件实际上都是有效的（包括快照）。您能做的最好的事情是确保您的本地存储库中没有快照工件，并强制 Maven 从您的远程存储库下载。但是，只有从远程仓库下载所有依赖项时它才有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:24:18.907

Maven 依赖插件有一个[清除本地存储库](http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)目标，可以配置为从本地存储库中删除特定工件。如果您在托管 CI 服务的同一台服务器上进行发布构建（以及因此需要清除的本地存储库），您可能能够将执行添加`dependency:purge-local-repository`到由 Maven 发布插件在`release:perform`.

请注意，这对清除单个开发机器上的本地存储库没有任何作用。

# javascript - 当另一个文本框的内容发生变化时启用一个文本框

> ID：14969231
> 
> 赞同：0
> 
> 时间：2013-02-19T22:58:30.593
> 
> 标签：javascript

**我在一个表单上有三个文本框，默认行为是第一个文本框已启用，但其他两个未启用。一旦我开始在第一个文本框中输入内容或将某些文本复制到第一个文本框中，我想启用第二个文本框。我的表单上有下面的代码，但它只有助于在我之前开始输入文本框时启用下一个文本框。当我复制并粘贴内容时，它没有帮助/响应。请帮助...**

```
function EnableCopyUsageField(currentField)
{   
   var txtOldItem2 = $get('<%=txtOldItem2.ClientID%>');
   var txtOldItem3 = $get('<%=txtOldItem3.ClientID%>');

   if(currentField == "txtOldItem1")
   {
    txtOldItem2.disabled = false;
    txtOldItem2.style.backgroundColor ='White';
   }

    if(currentField == "txtOldItem2")
    {
    txtOldItem3.disabled = false;
    txtOldItem3.style.backgroundColor ='White';   
    }
} 
```

当另一个文本框的内容发生变化时启用一个文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:23:11.320

你可以在文本框的 onkeydown 和 onchange 事件上调用你的函数。基本上，即使您复制，它也应该只更改 onkeydown/onkeyup。

```
<input type="text" onkeydown="EnableCopyUsageField()" onchange="EnableCopyUsageField()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:20:40.387

对于复制和粘贴，这段代码解决了我的问题

```
function EnableFieldOnPaste()
 function EnableFieldOnPaste()
  {
       var txtOldItem1 = $get('<%=txtOldItem1.ClientID%>');
       var txtOldItem2 = $get('<%=txtOldItem2.ClientID%>');

        txtOldItem1.onpaste = function() 
       {
            EnableCopyUsageField("txtOldItem1");
       };

       txtOldItem2.onpaste = function() 
       {
          EnableCopyUsageField("txtOldItem2");
        }; 
```

}

# javascript - 使用 jQuery.getJSON 加载 JSON 文件

> ID：14969233
> 
> 赞同：2
> 
> 时间：2013-02-19T22:58:41.570
> 
> 标签：javascript, jquery

我是 JS 的新手，我正在尝试做一些非常简单的事情。

我有一个名为“data.json”的 JSON 文件，我想加载它，所以，我这样做：

```
$.getJSON("data.json",function(data){
    console.log(data);
}); 
```

然后我将加载的 JSON 传递给执行此操作的库中的函数：

```
$("#example1").handsontable({
    data:data,     //<--- error here
    minRows: 2,
    minCols: 3,
    minSpareRows: 1,
    currentRowClassName: 'currentRow',
    currentColClassName: 'currentCol',
    autoWrapRow: true,
    colHeaders: true
});

$("#example1").handsontable('selectCell', 3, 3); 
```

萤火虫 说

```
ReferenceError: data is not defined
[Break On This Error]   

data:data, 
```

我以为我已经将 JSON 加载到`data`变量中了？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:01:39.090

`data`仅在您传递给的回调中定义`getJSON`。无论您要做什么，都必须在该功能内完成。

`console.log(data)`因此，您需要在 getJSON 回调中进行`handsontable`调用（或调用执行调用的函数），而不是（或除此之外） 。`handsontable`

此外，`getJSON`它是异步的，这意味着即使您在回调中执行诸如分配给全局变量之类的操作，当您在调用`data`后进入下一行代码时，该变量可能还没有该值。`getJSON`你所做的只是发出一个请求——“嘿，去获取这个 JSON 对象，当你完成之后，调用这个函数。同时，我将继续我的工作。谢谢！”

# forms - 与视图 oracle 表单的关系

> ID：14969234
> 
> 赞同：1
> 
> 时间：2013-02-19T22:58:49.720
> 
> 标签：forms, oracle, database-relations

我的表格上有两个块。第一个块：**"vista_clientes"**和第二个**"pedidos"**。第一个基于**视图**，第二个基于**表**。

我在我的第一个块上转到**关系**，然后按“*创建*”，然后，我选择“ *pedidos* ”如何*详细块*。我选择公共字段（主键）并创建关系。

执行此操作时出现一些错误，**取决于我选择的删除方式**，我有三个选项，隔离、级联和非隔离，当我设置孤立，我可以打开 fmx，但来自“vista_clientes”的执行查询不起作用。

错误是我的 vista 客户 Alias 没有正确的 ID，并且使用关系自动创建的方法 REF 给出了这个错误。

**关系屏幕的选项**：http : [//imageshack.us/photo/my-images/5/capturazvg.jpg/](http://imageshack.us/photo/my-images/5/capturazvg.jpg/)

**级联错误（预删除触发器）** ：http : [//imageshack.us/photo/my-images/689/capturahi.jpg/](http://imageshack.us/photo/my-images/689/capturahi.jpg/)

**隔离错误**：这允许打开画布，但不起作用 - 执行查询错误 40505 或如果我使用 DISPLAY_ERROR 我看到这个：http: [//imageshack.us/photo/my-images/17/capturack.jpg/](http://imageshack.us/photo/my-images/17/capturack.jpg/)

**非隔离错误**：http : [//imageshack.us/photo/my-images/703/capturaoej.jpg/](http://imageshack.us/photo/my-images/703/capturaoej.jpg/)

我真的需要帮助。非常感谢！:)

PD：对不起我的英语！如果有助于解决此问题，我可以添加更多详细信息或屏幕截图。

```
CREATE OR REPLACE VIEW VISTA_CLIENTES ( CLIENTE_NO, 
CLIENTE_NIF, NOMBRE, DIRECCION, LOCALIDAD, 
PROVINCIA, EMP_NO, APELLIDO, DEPT_NO, 
DNOMBRE ) AS SELECT clientes.cliente_no, clientes.cliente_nif, clientes.nombre,
       clientes.direccion, clientes.localidad, clientes.provincia,
       emple.emp_no, emple.apellido, depart.dept_no, depart.dnombre
  FROM clientes, emple, depart
 WHERE (    (emple.emp_no = clientes.vendedor_no)
        AND (depart.dept_no = emple.dept_no)
       ) 
```

* * *

它看起来是关于 oracle 表单的错误。我设置了关系写作并有效，如果我选择选择框上的字段，则关系不起作用。

# c# - 如何使用自定义 MembershipProvider？

> ID：14969235
> 
> 赞同：2
> 
> 时间：2013-02-19T22:58:57.043
> 
> 标签：c#, asp.net

我正在尝试使用带有 ASP MVC 的自定义 MembershipProvider 来保护我的应用程序中的控制器。

只是为了一些背景，我最终将使用 Web 服务来验证每个用户。

据我了解，我将其添加到根级别 web.config 如下：

```
<authentication mode="Forms">
  <forms loginUrl="~/Login/Login" timeout="2880" />
</authentication>
<membership defaultProvider="CustomMembershipProvider">
  <providers>
    <clear/>
    <add name="MyMembershipProvider" type="DANet.security.MyMembershipProvider" />
  </providers>
</membership> 
```

这是我的课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;

namespace DANet.security
{
    public class MyMembershipProvider : MembershipProvider
    {
        private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

        public override bool ValidateUser(string username, string password)
        {
            log.Debug("MyMembershipProvider");

            throw new NotImplementedException();
        }

        public override MembershipUser CreateUser(string username,
           string password, string email, string passwordQuestion,
           string passwordAnswer, bool isApproved,
           object providerUserKey, out MembershipCreateStatus status)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override string ApplicationName
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        public override bool ChangePassword(string username, string oldPassword, string newPassword)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override bool ChangePasswordQuestionAndAnswer(string username, string password, string newPasswordQuestion, string newPasswordAnswer)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override bool DeleteUser(string username, bool deleteAllRelatedData)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override bool EnablePasswordReset
        {
            get { throw new NotImplementedException(); }
        }

        public override bool EnablePasswordRetrieval
        {
            get { throw new NotImplementedException(); }
        }

        public override MembershipUserCollection FindUsersByEmail(string emailToMatch, int pageIndex, int pageSize, out int totalRecords)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override MembershipUserCollection FindUsersByName(string usernameToMatch, int pageIndex, int pageSize, out int totalRecords)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override MembershipUserCollection GetAllUsers(int pageIndex, int pageSize, out int totalRecords)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override int GetNumberOfUsersOnline()
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override string GetPassword(string username, string answer)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override MembershipUser GetUser(string username, bool userIsOnline)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override MembershipUser GetUser(object providerUserKey, bool userIsOnline)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override string GetUserNameByEmail(string email)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override int MaxInvalidPasswordAttempts
        {
            get { throw new NotImplementedException(); }
        }

        public override int MinRequiredNonAlphanumericCharacters
        {
            get { throw new NotImplementedException(); }
        }

        public override int MinRequiredPasswordLength
        {
            get { throw new NotImplementedException(); }
        }

        public override int PasswordAttemptWindow
        {
            get { throw new NotImplementedException(); }
        }

        public override MembershipPasswordFormat PasswordFormat
        {
            get { throw new NotImplementedException(); }
        }

        public override string PasswordStrengthRegularExpression
        {
            get { throw new NotImplementedException(); }
        }

        public override bool RequiresQuestionAndAnswer
        {
            get { throw new NotImplementedException(); }
        }

        public override bool RequiresUniqueEmail
        {
            get { throw new NotImplementedException(); }
        }

        public override string ResetPassword(string username, string answer)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override bool UnlockUser(string userName)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }

        public override void UpdateUser(MembershipUser user)
        {
            log.Debug("MyMembershipProvider");
            throw new NotImplementedException();
        }
    }
} 
```

我只想看看这个类是否被 NET 使用并被调用。如您所见，我在每个方法中都有日志语句，当我登录或尝试点击标记为 [Authorize] 的控制器方法时，没有任何记录。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:07:02.497

`defaultProvider`将属性更改为您的会员提供者：

```
<membership defaultProvider="MyMembershipProvider"> 
```

[将 ASP.NET 应用程序配置为使用成员资格](http://msdn.microsoft.com/en-gb/library/6e9y4s5t%28v=vs.100%29.aspx)

# url - 在 QR 码中嵌入 localhost URL

> ID：14969237
> 
> 赞同：2
> 
> 时间：2013-02-19T22:59:16.023
> 
> 标签：url, localhost

我只是想知道是否可以 `http://localhost/sampleproj/addsection.php?seatID=2` 在 qr 代码中嵌入 localhost URL，所以当扫描代码时，这将呈现在 Android/IPhone 设备上？

我只是想知道它是否可能。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:04:55.800

当然！转到 [http://invx.com/](http://invx.com/) 并键入要编码的 URL。QR 码没有什么特别之处，可以作为链接使用，只是阅读器应用程序会识别您扫描的代码是一个 URL，并假设您打算访问该地址。

（但如果是`localhost`这样，它只能在运行网站的计算机上运行）

# c# - 根据参数更改方法返回类型

> ID：14969245
> 
> 赞同：0
> 
> 时间：2013-02-19T23:00:04.203
> 
> 标签：c#, reflection

我有以下打开和反序列化 XML 文件的方法：

```
private static object DeserializeFile(string fileName, Type type)
{
    Stream openFile = TitleContainer.OpenStream(fileName);
    XmlSerializer reader = new XmlSerializer(type);
    return reader.Deserialize(openFile);
} 
```

我多次使用它来打开包含不同对象的不同文件。目前我必须通过以下方式使用它：

```
City gameCity = (City)DeserializeFile(GameData.CITIES_FILE, typeof(City)); 
```

我有一种感觉，可以通过使方法返回一个转换为作为参数传入的类型的对象来避免类型转换。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T23:00:04.203

解决方案实际上非常简单：

```
private static T DeserializeFile<T>(string fileName)
{
    Stream openFile = TitleContainer.OpenStream(fileName);
    XmlSerializer reader = new XmlSerializer(typeof(T));
    return (T)reader.Deserialize(openFile);
} 
```

**用法：**

```
City gameCity = DeserializeFile<City>(GameData.CITIES_FILE); 
```

# soap - 使用 WSDL 指示 WS-A 标头

> ID：14969253
> 
> 赞同：3
> 
> 时间：2013-02-19T23:00:40.877
> 
> 标签：soap, wsdl, ws-addressing

我正在实现一个基于 SOAP 的 Web 服务，并让 WS-Addressing 正常工作。但是，我看不到如何让 WSDL 发布客户端应该使用的内容作为 wsa:To 元素的值。

我在我的 WSDL 中使用了下面的代码片段，并使用 SOAP-UI 来生成请求。SOAP-UI 似乎认识到 wsa:action 应该设置为“ [http://myco.com/myOperation](http://myco.com/myOperation) ”，尽管它不会自动添加此标头。我必须选择“添加 WS-A 标头”菜单选项。

我的问题是它没有添加 wsa:To 标头。谁能告诉我如何修改我的 WSDL 以告诉客户 wsa:To 是必需的，并且它的值应该是“ [http://myco.com/cap/services/v1](http://myco.com/cap/services/v1) ”？

谢谢

```
<wsdl:portType name="MyPortType">
    <wsdl:operation name="MyOperation">
        <wsdl:input message="tns:MyRequestMessage" name="Request"
                    wsaw:Action="http://myco.com/myOperation"/>
        <wsdl:output message="tns:MyResponseMessage" name="Response"/>
    </wsdl:operation>
</wsdl:portType>

<wsdl:binding name="MyBinding" type="tns:MyPortType">

    <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsaw:UsingAddressing wsdl:required="true"/>
    <wsdl:operation name="MyOperation">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>

<wsdl:service name="MyService">
    <wsdl:port binding="tns:MyBinding" name="MyPort">
        <soap:address location="http://myco.com/services"/>
        <wsa:Address>http://myco.com/cap/services/v1</wsa:Address>
    </wsdl:port>
</wsdl:service> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T23:54:25.080

为了实现这一点，我为 ws 寻址 2005 版本定义了命名空间

```
<xs:schema ... xmlns:wsa5="http://www.w3.org/2005/08/addressing">
 ....
</xs:schema> 
```

消息类型

```
<wsdl:message name="wsaHeader">
        <wsdl:part name="MessageID" element="wsa5:MessageID" />
        <wsdl:part name="RelatesTo" element="wsa5:RelatesTo" />
        <wsdl:part name="From" element="wsa5:From" />
        <wsdl:part name="ReplyTo" element="wsa5:ReplyTo" />
        <wsdl:part name="FaultTo" element="wsa5:FaultTo" />
        <wsdl:part name="To" element="wsa5:To" />
        <wsdl:part name="Action" element="wsa5:Action" />
</wsdl:message> 
```

然后在我的输入和输出中，我放置了以下标签。

```
<wsdl:input>
    <soap:header use="literal" message="tns:wsaHeader" part="Action"/>
    <soap:header use="literal" message="tns:wsaHeader" part="To"/>
    <soap:header use="literal" message="tns:wsaHeader" part="FaultTo"/>
    <soap:header use="literal" message="tns:wsaHeader" part="ReplyTo"/>
    <soap:header use="literal" message="tns:wsaHeader" part="From"/>
    <soap:header use="literal" message="tns:wsaHeader" part="RelatesTo"/>
    <soap:header use="literal" message="tns:wsaHeader" part="MessageID"/>
    <soap:body use="literal" />
  </wsdl:input>
  <wsdl:output>
    <soap:header use="literal" message="tns:wsaHeader" part="Action"/>
    <soap:header use="literal" message="tns:wsaHeader" part="To"/>
    <soap:header use="literal" message="tns:wsaHeader" part="FaultTo"/>
    <soap:header use="literal" message="tns:wsaHeader" part="ReplyTo"/>
    <soap:header use="literal" message="tns:wsaHeader" part="From"/>
    <soap:header use="literal" message="tns:wsaHeader" part="RelatesTo"/>
    <soap:header use="literal" message="tns:wsaHeader" part="MessageID"/>
    <soap:body use="literal" />
  </wsdl:output> 
```

您可能只需要`To`为您的目的添加标签。

# android - android ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent)

> ID：14969261
> 
> 赞同：0
> 
> 时间：2013-02-19T23:01:18.913
> 
> 标签：android, android-activity

我在 android 中设计了一个简单的应用程序，但是当我在模拟器上运行它时，它显示应用程序已停止...我试图找到解决方案并遇到使用断点...但是当我设置断点并调试应用程序时，它显示“找不到源”从 ddms 的角度来看

```
ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent). 
```

有人可以在这里建议我现在做什么...

这就是我的日志的样子

```
02-20 04:28:21.232: D/AndroidRuntime(607): Shutting down VM
02-20 04:28:21.232: W/dalvikvm(607): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-20 04:28:21.262: E/AndroidRuntime(607): FATAL EXCEPTION: main
02-20 04:28:21.262: E/AndroidRuntime(607): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.apps/com.example.apps.Act}: java.lang.NullPointerException
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.os.Looper.loop(Looper.java:123)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-20 04:28:21.262: E/AndroidRuntime(607):  at java.lang.reflect.Method.invokeNative(Native Method)
02-20 04:28:21.262: E/AndroidRuntime(607):  at java.lang.reflect.Method.invoke(Method.java:521)
02-20 04:28:21.262: E/AndroidRuntime(607):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-20 04:28:21.262: E/AndroidRuntime(607):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-20 04:28:21.262: E/AndroidRuntime(607):  at dalvik.system.NativeStart.main(Native Method)
02-20 04:28:21.262: E/AndroidRuntime(607): Caused by: java.lang.NullPointerException
02-20 04:28:21.262: E/AndroidRuntime(607):  at com.example.apps.Act.onCreate(Act.java:16)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-20 04:28:21.262: E/AndroidRuntime(607):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-20 04:28:21.262: E/AndroidRuntime(607):  ... 11 more
02-20 04:28:31.283: I/Process(607): Sending signal. PID: 607 SIG: 9 
```

活动课

```
package com.example.apps; 

import android.app.Activity; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.Button; 
import android.widget.EditText; 

public class Act extends Activity { 

    Rest r=new Rest(); 

@Override 
public void onCreate(Bundle savedInstanceState) {  
   super.onCreate(savedInstanceState); 
   Button save=(Button)findViewById(R.id.save); 
   save.setOnClickListener(onSave); 
} 

private View.OnClickListener onSave=new View.OnClickListener() { 

     public void onClick(View v) { 
         EditText name=(EditText)findViewById(R.id.name); 
         EditText address=(EditText)findViewById(R.id.addr);  
         r.setName(name.getText().toString());
         r.setAddress(address.getText().toString()); 
     }  
}; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:13:41.207

为方便起见，让我们更改您的`onClick()`喜欢

```
save.setOnClickListener(new OnClickListener() {
 @Override
 public void onClick(View v) {
  // do stuff here
}
}); 
```

`save`你的按钮在哪里。从现在开始，使用更新的代码编辑您的问题，使其更易于阅读。我在评论中阅读您的代码时遇到了麻烦，但看起来如果您像这样更改它应该对您有用。**[这是一个关于不同使用方式的很好的讨论`onClick()`](https://stackoverflow.com/questions/7082344/how-to-handle-a-button-being-clicked-in-android)**

我打算删除，但此信息可能对其他人有所帮助。但是，正如@dymmeh 所指出的那样，`setContentView()`没有调用因此没有布局可以从中获取您的按钮。这需要使用适当的布局调用，`R.layout.your_layout`然后才能引用任何视图`Buttons`、、、`EditText`等...

# python - 如何以编程方式为鼻子指定xml输出

> ID：14969265
> 
> 赞同：1
> 
> 时间：2013-02-19T23:01:44.823
> 
> 标签：python, nose

我正在使用带有鼻子的脚本运行测试。我希望能够指定 xunit xml 输出文件。文档说我可以使用 --xunit-file=FILE 选项来做到这一点。

我有

```
noseargs = ['--with-xunit', '--xunit-file=output.xml', '--tests=mytest']
nose.run(argv=noseargs) 
```

运行后，output.xml 文件不存在。我发现如果我交换两个参数，它看起来像：

```
noseargs = ['--xunit-file=output.xml', '--with-xunit', '--tests=mytest']
nose.run(argv=noseargs) 
```

它将在我的工作目录中创建一个nosetests.xml 文件。所以看起来需要先处理 --with-xunit 参数，然后需要指定文件。关于如何指定我丢失的文件有什么特别之处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:48:59.903

Nose 吃掉了 argv 的第一个参数，因为在命令行上它是程序的名称。

这适用于：

```
noseargs = ['foo', '--with-xunit', '--xunit-file=output.xml', '--tests=mytest']
nose.run(argv=noseargs) 
```

# android - 单击“是”按钮时如何关闭警报

> ID：14969266
> 
> 赞同：1
> 
> 时间：2013-02-19T23:01:44.580
> 
> 标签：android, alert, android-alertdialog

当我单击“是”按钮时，我正在尝试关闭警报。按钮界面在大约 10 秒内执行一个过程。我想在单击按钮时关闭警报对话框，因为仅在 SaveRoute 方法完成时才关闭警报。我的代码：

```
imageRouteDetSave.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {

        //** Save the current route             
        new Thread(new Runnable() {
                public void run() {

                         MyActivity.this.runOnUiThread(new Runnable() {
                                public void run() {
                                    alertDialog = new AlertDialog.Builder(MyActivity.this).create();
                                    alertDialog.setTitle("Saving...");
                                    alertDialog.setMessage("......");
                                    alertDialog.setButton("Yes", new DialogInterface.OnClickListener() {
                                       public void onClick(DialogInterface dialog, int which) {

                                          alertDialog.dismiss(); //-- No close the dialog
                                          SaveRoute();//-- Big proccess

                                       }
                                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:42:00.223

而不是`alertDialog.dismiss();`尝试使用`dialog.dismiss();`

此外，“大进程”最好不要在 UI 线程上运行，因为它们会阻塞 UI。

AsyncTask 示例文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T08:44:49.827

您的“大进程”正在 UI 线程上运行，这非常糟糕。使用`AsyncTask`例如。同时显示进度视图。

# java - 在java中扩展包含抽象泛型方法的基类

> ID：14969268
> 
> 赞同：2
> 
> 时间：2013-02-19T23:01:59.723
> 
> 标签：java, generics, java-7, abstract

我有一个这样的基类：

```
 Class MyBase{

   public abstract <T> Student assign (T object);

 } 
```

我正在扩展它，如下所示：

```
 Class MyClass extends MyBase{

   @Override
   public abstract <T> Student assign (T object){

     Student stew = new Student();
     ......

   }
 } 
```

我的预期用途是：传入的对象应该是教师类型。在该方法中，我想创建一个新学生，它将通过调用教师上的函数来获取一些值。（例如，stew.setTeacherName = teacher.getName();）然后将Student返回给调用者。

问题： a) 我如何获得预期的行为？b) 以当前方式声明 MyBase 与执行 MyBase 有什么区别？c）如果我可以更改基类并且我不能更改基类，我有兴趣了解解决方案。

在此先感谢您的帮助。此外，如果有任何有用的资源/教程，你可以指出我会很棒。再次感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T23:13:35.810

如果以这种方式定义，您不能保证`object`传入`MyClass`' 的`assign`方法是 a 。如果允许修改，请执行以下操作：`Teacher``MyBase``MyBase`

```
abstract class MyBase
{
   public abstract <T extends Teacher> Student assign (T object);
} 
```

并用你的类扩展它：

```
class MyClass extends MyBase
{
   @Override
   public <T extends Teacher> Student assign (T object){

     Student stew = new Student();
     ......

   }
} 
```

这将保证`object`传入的是 a `Teacher`，即使它实际上是 的子类的实例`Teacher`。

**编辑**：另一种修改方式`MyBase`。使泛型参数成为类定义的一部分，而不是方法定义。

```
abstract class MyBase<T extends Teacher>
{
   public abstract Student assign (T object);
}

class MyClass<T extends Teacher> extends MyBase<T>
{
   @Override
   public  Student  assign (T object)
   {
      Student stew = new Student();
      ......
   }
}

// Could also do this...
class MyClass2 extends MyBase<Teacher>
{
   @Override
   public  Student  assign (Teacher object)
   {
      Student stew = new Student();
      ......
   }
 } 
```

这是[Oracle 的 Java 泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T00:23:50.160

如果您无法修改基类，则实际上没有涉及泛型的方法。你可以做两件事。一，检查对象的运行时类型，如果是老师，则做一件事，如果不是，则做另一件事。

```
public class MyClass extends MyBase {
    @Override public <T> Student assign(T object) {
        Student student = new Student();
        if (object instanceof Teacher) {
            Teacher teacher = (Teacher) object;
            student.setTeacherName(teacher.getName());
        } else {
            student.setTeacherName("unknown");
        }
        return student;
    }
} 
```

二，在 MyClass 中创建两个单独`assign`的方法，一个覆盖基类中的泛型方法，以及一个仅将 Teacher 作为参数的非泛型方法。

```
public class MyClass extends MyBase {
    @Override public <T> Student assign(T object) {
        return new Student();
    }

    public Student assign(Teacher teacher) {
        Student student = new Student();
        student.setTeacherName(teacher.getName());
        return student;
    }
} 
```

调用方法时，如果编译时类型为 Teacher，编译器会选择方法更具体的重载：

```
public class Main {
    /**
     * Gets a teacher but calls it an Object.
     *
     * @return an Object that happens to be a Teacher
     */
    public static Object getTeacher() {
        return new Teacher();
    }

    public static void main(String[] args) {
        /** A Teacher, and is declared as such */
        Teacher teacher = new Teacher();

        /**
         * Some Object, which just so happens to actually
         * be a Teacher (but the compiler can't see that)
         */
        Object something = getTeacher();

        MyClass mc = new MyClass();

        Student withTeacher = mc.assign(teacher);
        Student withoutTeacher = mc.assign(something);
    }
} 
```

但是，我更喜欢修改 MyBase 的解决方案之一。

**编辑添加：**您实际上可以将第二个更具体`assign`的方法声明为通用方法，如下所示：

```
public <T extends Teacher> Student assign(T object) {
    Student student = new Student();
    student.setTeacherName(object.getName());
    return student;
} 
```

但这实际上与上面的第二个示例相同。该方法不会覆盖基类中的方法，它仍然依赖于编译器在编译时选择更具体的重载，并且方法签名的擦除与第二个示例中的非泛型方法完全相同：

```
public Student assign(Teacher) 
```

它只是看起来更像是基类中方法的覆盖，因为它有一个泛型类型变量，并且参数被命名`object`而不是`teacher`. 但是尝试`@Override`在其上添加注释，编译器会告诉您它不会覆盖或实现超类型的方法。

而且你仍然有`<T>`没有设置教师名称的通用方法，如果你有一个没有这样声明的教师对象，编译器会选择错误的重载，你会摸不着头脑想知道为什么，如果对象是教师，则不会为学生设置教师名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:12:49.213

泛型方法通常适用于提供的任何类型，而不是泛型类，后者可以专门用于处理具体类型。这是一种功能性与 OO 的方法。所以你可能想要的是有一个带有 T 参数的泛型类：

`MyBase<T>`

让方法使用该参数

`public abstract Student assign (T object)`

然后将其专门用于使用教师

`MyClass extends MyBase<Teacher>`

与

`public Student assign (Teacher object)`

大多数情况下，我的泛型方法都是静态的，正是因为这个原因——如果实例方法被参数化，那么类型参数属于类而不是方法是合乎逻辑的。通常，当然。

# c# - ListViewItems 未正确显示

> ID：14969269
> 
> 赞同：0
> 
> 时间：2013-02-19T23:02:01.460
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我的应用程序中有一个`ListView`应该显示从服务器加载的数据。

[![悬停在项目上](../Images/031f583cf25d7cebf606f65f1c300cc6.png)](https://i.stack.imgur.com/kFdyg.png) [![所选项目](../Images/516d91f4177f470f77e46d2c82997687.png)](https://i.stack.imgur.com/PdhuX.png)

ListView 有两个 ItemTemplates（带有和图像控件、TextBlocks、Grid、Stackpanel），它们是通过模板选择器选择的。数据本身已正确加载，但控件不会在应用程序的第一次启动时显示它，但并非总是如此，有时它们显示正确，有时不正确。当我滚动项目不可见的列表视图时，项目将正确显示。我的问题是什么会导致这种行为？

编辑：好的，这是我的代码

`ListView`：_

```
<customControls:MyListView 
        x:Name="EventListView" 
        ItemsSource="{Binding Events}"
        ItemTemplate="{StaticResource EventListSelectingTemplate}"
        Grid.Column="0" 
        Grid.Row="1"
        SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
        ItemContainerStyle="{StaticResource EventListViewItemDisabledStyleModified}"
        SelectionChanged="EventListView_OnSelectionChanged"/> 
```

我已经编辑了 listview 控件，因为我遇到了这样的[问题](https://stackoverflow.com/questions/12682858/xaml-listviewitem-isenabled-binding)。`ListView`如果我使用 normal或使用 default ，它不会改变`ItemContainerStyle`。

现在这里是单独文件中的模板，如果 Item 的属性为 true（这是我对项目进行分组的方式） ，则将`EventListHeaderTemplate`被选中。`isTournament`这是一种原始方式，我将尝试使用 CollectionViewSource 对项目进行分组，看看是否可能是问题所在。

```
<DataTemplate x:Key="EventListItemTemplate">
    <Grid Width="{Binding ElementName=EventListView, Path=ActualWidth}" Margin="3">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <StackPanel 
            x:Name="timeAndStatus" 
            Grid.Column="0"
            Orientation="Vertical">
            <TextBlock 
                x:Name="time" 
                Text="{Binding GameStartTime}" 
                Visibility ="{Binding St, Converter={StaticResource StatusToVisibilityConverter}}"
                HorizontalAlignment="Center" />

            <Image 
                x:Name="liveEventImage" 
                Width="16"
                Height="16"
                Source="{StaticResource LiveIcon}"
                Visibility="{Binding ElementName=time, Path=Visibility, Converter={StaticResource VisibilityNegationConverter}}"
                HorizontalAlignment="Center"
                Margin="0,0,0,5"/>

            <TextBlock 
                x:Name="status" 
                Text="{Binding Status}" 
                HorizontalAlignment="Center"/>
        </StackPanel>
        <StackPanel 
            x:Name="teamNames" 
            Grid.Column="1"
            Orientation="Vertical">
            <StackPanel Orientation="Horizontal">
                <TextBlock 
                    x:Name="homeTeamName" 
                    Text="{Binding Ht}"
                    FontWeight="{Binding Converter={StaticResource EventToFontWeightConverter}, ConverterParameter=HOME}"/>
                <StackPanel Orientation="Horizontal" Margin="20,0,0,0">
                    <Image Source="../Assets/Images/red.png" Visibility="{Binding Ca, Converter={StaticResource NumberOfRedsToImageVisibilityConverter}, ConverterParameter='H1'}"/>
                    <Image Source="../Assets/Images/red.png" Visibility="{Binding Ca, Converter={StaticResource NumberOfRedsToImageVisibilityConverter}, ConverterParameter='H2'}" Margin="10,0,0,0"/>
                    <Image Source="../Assets/Images/red.png" Visibility="{Binding Ca, Converter={StaticResource NumberOfRedsToImageVisibilityConverter}, ConverterParameter='H3'}" Margin="10,0,0,0"/>
                </StackPanel>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock 
                    x:Name="awayTeamName" 
                    Text="{Binding At}" 
                    FontWeight="{Binding Converter={StaticResource EventToFontWeightConverter}, ConverterParameter=AWAY}"/>
                <StackPanel Orientation="Horizontal" Margin="20,0,0,0">
                    <Image Source="../Assets/Images/red.png" Visibility="{Binding Ca, Converter={StaticResource NumberOfRedsToImageVisibilityConverter}, ConverterParameter='A1'}"/>
                    <Image Source="../Assets/Images/red.png" Visibility="{Binding Ca, Converter={StaticResource NumberOfRedsToImageVisibilityConverter}, ConverterParameter='A2'}" Margin="10,0,0,0"/>
                    <Image Source="../Assets/Images/red.png" Visibility="{Binding Ca, Converter={StaticResource NumberOfRedsToImageVisibilityConverter}, ConverterParameter='A3'}" Margin="10,0,0,0"/>
                </StackPanel>
            </StackPanel>
        </StackPanel>
        <StackPanel 
            x:Name="teamScores" 
            Grid.Column="2"
            Orientation="Vertical">
            <TextBlock 
                x:Name="homeScore" 
                Text="{Binding Hs}" />
            <TextBlock 
                x:Name="awayScore" 
                Text="{Binding As}" />
        </StackPanel>
    </Grid>
</DataTemplate>

<DataTemplate x:Key="EventListHeaderTemplate">
    <Grid 
        Background="Gray" 
        Width="{Binding ElementName=EventListView, Path=ActualWidth}"
        Height="50"
        Margin="0,20,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        <Image 
            x:Name="CountryFlag"
            Grid.Column="0"
            Source="{Binding FlagUrl}"
            Width="40"
            Height="30"/>
        <TextBlock
            Grid.Column="1"
            Text="{Binding TournamentSignature}" 
            FontSize="18" 
            MaxHeight="50"
            VerticalAlignment="Center"
            Padding="0,0,20,0"
            TextWrapping="Wrap"/>
    </Grid>
</DataTemplate>

<DataTemplate x:Key="EventListSelectingTemplate">
    <templateHandling:EventListTemplateSelector Content="{Binding}"
                                EventListItemTemplate="{StaticResource EventListItemTemplate}"
                                EventListHeaderTemplate="{StaticResource EventListHeaderTemplate}"
                                />
</DataTemplate> 
```

首先，我教导图像是问题所在，但是当我从模板中删除图像时，问题仍然存在。

和模板选择器：

```
public DataTemplate EventListItemTemplate { get; set; }
    public DataTemplate EventListHeaderTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        var ev = item as Event;
        if (ev != null)
        {
            if (ev.IsTournament)
            {
                return EventListHeaderTemplate;
            }
            else
            {
                return EventListItemTemplate;
            }
        }
        return null;
    } 
```

除了 SelectionChanged 处理程序之外，我在此列表视图后面的代码中没有任何内容，我认为这与问题无关。

# applescript - 通过 AppleScript 更改音量 API 在 Spotify 中四舍五入

> ID：14969272
> 
> 赞同：0
> 
> 时间：2013-02-19T23:02:09.887
> 
> 标签：applescript, spotify

**重现步骤**

调用：

```
tell application "Spotify"
if it is running then
    set sound volume to (sound volume * .10)
end if
end tell 
```

然后：

```
tell application "Spotify"
if it is running then
    set sound volume to (sound volume * 10)
end if
end tell 
```

**观察到的行为**

反复调用会降低应用程序的音量。

**预期行为**

应用程序应该回到原始音量（就像 rdio 和 iTunes 一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:45:59.407

只要音量不减到0，

```
set sound volume to (sound volume * 10) 
```

将再次增加音量。一旦达到 0，0x10 = 0

# python - 使用 boto 的 S3 对象过期

> ID：14969273
> 
> 赞同：17
> 
> 时间：2013-02-19T23:02:19.007
> 
> 标签：python, amazon-s3, boto

我试图找出一种方法来清理我的 s3 存储桶。我想删除所有早于 X 天的密钥（在我的情况下 X 是 30 天）。

我想不出一种方法来删除 s3 中的对象。

我使用了以下方法，但都不起作用（通过工作，我的意思是我在 X 天后尝试获取对象，并且 s3 仍在为对象提供服务。我期待“找不到对象”或“对象已过期”消息

方法一：

```
 k = Key(bucket)
    k.key = my_key_name
    expires = datetime.utcnow() + timedelta(seconds=(10))
    expires = expires.strftime("%a, %d %b %Y %H:%M:%S GMT")
    k.set_contents_from_filename(filename,headers={'Expires':expires}) 
```

方法二：

```
 k = Key(bucket)
    k.key = "Event_" + str(key_name) + "_report"
    expires = datetime.utcnow() + timedelta(seconds=(10))
    expires = expires.strftime("%a, %d %b %Y %H:%M:%S GMT")
    k.set_meta_data('Expires', expires)
    k.set_contents_from_filename(filename) 
```

如果任何人都可以分享为他们工作的代码，删除 s3 对象，那就太好了

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T20:02:11.817

您可以使用[生命周期策略](http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html#intro-lifecycle-rules)从 s3 中删除超过 X 天的对象。例如，假设您有这些对象：

```
logs/first
logs/second
logs/third
otherfile.txt 
```

要在 30 天后使 logs/ 下的所有内容过期，您会说：

```
import boto
from boto.s3.lifecycle import (
    Lifecycle,
    Expiration,
)

lifecycle = Lifecycle()
lifecycle.add_rule(
    'rulename',
     prefix='logs/',
     status='Enabled',
     expiration=Expiration(days=30)
)

s3 = boto.connect_s3()
bucket = s3.get_bucket('boto-lifecycle-test')
bucket.configure_lifecycle(lifecycle) 
```

您还可以检索生命周期配置：

```
>>> config = bucket.get_lifecycle_config()
>>> print(config[0])
<Rule: ruleid>
>>> print(config[0].prefix)
logs/
>>> print(config[0].expiration)
<Expiration: in: 30 days> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-26T18:09:15.890

*jamesis*的答案是使用`boto`哪个旧版本，将被弃用。当前支持的版本是`boto3`.

日志文件夹上的相同过期策略可以按如下方式完成：

```
import boto3
from botocore.exceptions import ClientError

client = boto3.client('s3')
try:
    policy_status = client.put_bucket_lifecycle_configuration(
               Bucket='boto-lifecycle-test',
               LifecycleConfiguration={
                    'Rules': 
                           [
                             {
                             'Expiration':
                                {
                                 'Days': 30,
                                 'ExpiredObjectDeleteMarker': True
                                },
                             'Prefix': 'logs/',
                             'Filter': {
                               'Prefix': 'logs/',
                             },
                             'Status': 'Enabled',
                            }
                        ]})
except ClientError as e:
     print("Unable to apply bucket policy. \nReason:{0}".format(e)) 
```

**这将覆盖任何现有的生命周期配置策略`logs`。**

一件好事是在应用过期配置之前检查存储桶是否存在以及您是否有权访问它，即在`try-except`

```
bucket_exists = client.head_bucket(
   Bucket='boto-lifecycle-test'
) 
```

由于`logs`文件夹本身不是存储桶，而是存储桶`boto-lifecycletest`中的一个对象，因此存储桶本身可以有不同的过期策略。您可以从`policy_exists`下面的结果中检查这一点。

```
policy_exists = client.get_bucket_lifecycle_configuration(
    Bucket='boto-lifecycle-test')
bucket_policy = policy_exists['Rules'][0]['Expiration'] 
```

有关设置过期策略的更多信息，请查看[过期策略](https://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.Client.put_bucket_lifecycle_configuration)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-16T10:27:29.157

```
session = boto3.Session(profile_name='my-aws-login-profile', region_name='ap-south-1')
s3 = session.resource('s3')
bucket_lifecycle_configuration = s3.BucketLifecycleConfiguration('my-s3bucket')
    try:
        bucket_lifecycle_configuration.put(
            LifecycleConfiguration={
                'Rules': [
                    {
                        'Expiration': {
                            'Days': 7
                        },
                        'ID': 'life cycle config for log folder',
                        'Filter': {
                            'Prefix': 'logs/',
                        },
                        'Status': 'Enabled',
                        'NoncurrentVersionExpiration': {
                            'NoncurrentDays': 7
                        },
                        'AbortIncompleteMultipartUpload': {
                            'DaysAfterInitiation': 7
                        }
                    },
                ]
            }
        )
    except Exception as e:
        print e.message
        exit(1) 
```

解析的 XML 响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<LifecycleConfiguration>
   <Rule>
      <ID>life cycle config for log folder</ID>
      <Filter>
         <Prefix>logs/</Prefix>
      </Filter>
      <Status>Enabled</Status>
      <Expiration>
         <Days>7</Days>
      </Expiration>
      <NoncurrentVersionExpiration>
         <NoncurrentDays>7</NoncurrentDays>
      </NoncurrentVersionExpiration>
      <AbortIncompleteMultipartUpload>
         <DaysAfterInitiation>7</DaysAfterInitiation>
      </AbortIncompleteMultipartUpload>
   </Rule>
</LifecycleConfiguration> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-27T18:28:15.703

*Vaulstein*的上述 python 脚本引发了格式错误的 XML 异常。*请删除“ 'Status': 'Enabled',* ”行末尾多余的“ *,* ”。

# preg-match - Preg_match 对找到的任何字符串进行多次匹配

> ID：14969276
> 
> 赞同：0
> 
> 时间：2013-02-19T23:02:25.850
> 
> 标签：preg-match, match

请帮助一个还在学习的菜鸟。我已经寻找了一个解决方案，但我发现的大部分内容都使用正则表达式，我希望在不使用正则表达式的情况下实现这一点。对于页面顶部的多个水果，我将以下内容重复了 10 次，一切正常：

```
?>
<?php
$referrer = $_SERVER['HTTP_REFERER'];
  if (preg_match("/apple/",$referrer)) {
  header("Refresh:0;url=http://mysite.com/fruit/");
    exit;
}
?>
?>
<?php
$referrer = $_SERVER['HTTP_REFERER'];
if (preg_match("/orange/",$referrer)) {
  header("Refresh:0;url=http://mysite.com/fruit/");
exit;
}
?> 
```

但我试图将它浓缩成这样的东西，我可以在需要时/如果需要添加一个新的“水果”。

```
if (preg_match("/apple/", $referrer) || preg_match("/orange/", $referrer) || preg_match("/peach/", $referrer) || preg_match( "and on!! --)) { ... 
```

是的，我知道我拥有的 preg_match 范围很广。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:08:17.987

您可以尝试“或”条件

```
<?php
$referrer = $_SERVER['HTTP_REFERER'];
  if (preg_match("/apple|orange|grape/",$referrer)) {
  header("Refresh:0;url=http://mysite.com/fruit/");
    exit;
}
?> 
```

请注意，它将匹配“crabapple”，并且对单词边界没有限制。

# delphi - 如何在不使用第三方组件的情况下在 Delphi 中创建 Outlook 插件？

> ID：14969278
> 
> 赞同：3
> 
> 时间：2013-02-19T23:02:43.590
> 
> 标签：delphi

如何在 Delphi 中编写 Outlook 加载项而不依赖任何第三方组件。寻找与 2003 和所有更新版本的 MS Office 的兼容性。

我在 SO 中看到了类似的问题，但响应总是建议使用一些第三方组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:56:37.870

这是我发现的一个（示例）项目，它为 Outlook 创建了一个加载项。这将有助于理解这项技术。

[http://www.dimastr.com/babelfish/](http://www.dimastr.com/babelfish/)

通过 Outlook 2003 和 Delphi 2007 测试

您必须使用 regsvr32.exe 注册 DLL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T23:07:41.153

要开发 Outlook 插件或将其他应用程序与 Outlook 连接，您需要使用 Outlook 对象模型。

*   [Outlook 对象模型参考 - Office 2003](http://msdn.microsoft.com/en-us/library/aa221870.aspx)
*   [Outlook 对象模型参考 - Office 2007](http://msdn.microsoft.com/en-us/library/bb176619.aspx)
*   [Outlook 对象模型参考 - Office 2013](http://msdn.microsoft.com/en-us/library/bb176619.aspx)

# ruby-on-rails-3 - 铁路中另一个 content_tag 内的 content_tag

> ID：14969280
> 
> 赞同：0
> 
> 时间：2013-02-19T23:02:46.793
> 
> 标签：ruby-on-rails-3

有没有办法让一个 content_tag 在另一个里面。我现在有这个。

```
content_tag :span, "", :class => "container" 
```

哪个输出

```
<span class="container"></span> 
```

我希望能够拥有

```
<span class="container"><span class="icon"></span></span> 
```

或者

```
<div class="container"><span class="icon"></span></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:08:42.843

这应该有效：

```
content_tag :div, :class => "container" do
  content_tag :span, :class => "icon" do
    "Some More Content"
  end
end 
```

# git - Git如何赋予人们需要由组织者合并的推送访问权限？

> ID：14969281
> 
> 赞同：36
> 
> 时间：2013-02-19T23:02:52.310
> 
> 标签：git, github

我的项目有很多人，我想给他们所有的推送和拉取访问权限，因为现在，他们分叉了项目，当他们进行更改时，他们必须推送到他们的分叉并向我发送拉取请求。相反，我希望他们能够克隆主项目`myusername/project`并能够自动推送到它。那我该怎么做呢？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-20T05:01:26.637

1.  询问您要添加为协作者的人的用户名。如果他们没有，他们可以[注册 GitHub](https://help.github.com/articles/signing-up-for-a-new-github-account)。
2.  在任何页面的右上角，单击您的用户名。
3.  在您的个人资料页面上，单击**存储库**选项卡，然后单击存储库的名称。
4.  在存储库的右侧边栏中，单击**Settings**。
5.  单击“协作者”选项卡。
6.  开始输入协作者的用户名。
7.  从下拉菜单中选择用户。
8.  单击**添加**。

# c# - 带有本地文件的 svcutil 不会生成代码，但在线会生成

> ID：14969283
> 
> 赞同：3
> 
> 时间：2013-02-19T23:02:55.347
> 
> 标签：c#, web-services, xsd, wsdl, svcutil.exe

我在本地有一个 wsdl，它是 xsd 的文件，并尝试`svcutil.exe`使用此命令获取代理文件

```
svcutil *.wsdl *.xsd /l:cs 
```

我收到此错误：

> 错误：无法导入 wsdl:portType
> 
> 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter
> 
> 错误：加载提供的 XSD 文档时出现问题：无法解析对名为“callcreditheaders”和命名空间“urn:xxxx/yyyy:zzzz”的架构元素的引用，因为在架构中找不到元素定义targetNamespace 'urn:xxxx/yyyy:zzzz'。
> 
> 请检查提供的 XSD 文档，然后重试。
> 错误源的 XPath：
> `//wsdl:definitions[@targetNamespace='urn:xxxx/yyyy:zzzz']/wsdl:portType[@name='Soap']`

但是，如果我将这些文件放在 Web 应用程序上的本地 IIS 中并使用此命令

```
svcutil [http://localhost/XX/YY.wsdl] /l:cs 
```

有用。

为什么 svcutil 工作方式不同，即使它们是相同的文件？有没有办法通过本地调用来处理它？

# java - 如何正确使用带有套接字的 HandlerThread？

> ID：14969285
> 
> 赞同：2
> 
> 时间：2013-02-19T23:03:01.540
> 
> 标签：java, android, multithreading, sockets, looper

我一直在查看 HandlerThread 类，因为我最初使用的是一个简单的线程和处理程序，但是在android中出现了一个带有 NetworkOnMainThreadException 的裁剪器。

我似乎无法理解如何将诸如套接字之类的东西引入到 HandlerThread 中，您可以在其中运行阻塞代码。但是你不能用 HandlerThread 做到这一点，因为你不应该覆盖 run 因为那是 looper 所在的地方。

而且我不能通过消息调用 HandlerThread 来开始侦听套接字，因为它会阻止传递给它的任何其他消息。

那么这个 HandlerThread 类是为非阻塞任务设计的吗？因为我似乎无法理解如何使用这样的线程，所以它可以在套接字上侦听但可以处理请求，**就像我从主 UI 线程创建普通线程时一样**

我可以在普通线程中调用 Looper.prepare() 和 Looper.loop() 在运行中，然后将代码放在这两行之间（通过检查来创建处理程序）但是我遇到了与通信的问题这个新线程，消息不会传递到线程中。

那么我该如何去创建可以使用处理程序相互通信并执行诸如使用套接字之类的任务的线程。

*请我不是在寻找使用 ASyncTask 的评论，我想知道我自己如何使用线程，以便线程可以相互通信*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:07:21.377

可以将`HandlerThread`其视为等待消息执行的工作线程`Looper`（可以产生一个新的`Thread`）。因此，要与之通信，只需准备一个`Message`对象并将其分派给处理程序（例如，您可以启动一个新`thread`的套接字读取），例如

```
Handler handler = new Handler(handlerThread.getLooper()){
   @Override
   public void handleMessage(Message msg) {
      // Do action based on this message
   }
} 
```

`HandlerThread`当您收听`events`需要`Looper`例如`requestLocationUpdates`.

您不需要使用 a`HandlerThread`来避免（如果您按照您的问题`NetworkOnMainThreadException`使用，我不知道您是如何获得此异常的）并将它与 一起使用，只需使用普通线程并在方法中执行操作`Thread``sockets``socket``run`

# tornado - Tornado 有类似 Pyloris 的吗？

> ID：14969289
> 
> 赞同：0
> 
> 时间：2013-02-19T23:03:23.407
> 
> 标签：tornado, ddos

我的问题似乎很愚蠢，但是找到[了这个页面](http://hackforlulz.blogspot.com/p/tools.html)，他提到了一些进行 dDos 攻击的工具，我想测试我的应用程序可以处理多少个并发连接，但是这个工具似乎适用于基于线程的网络服务器架构？

如何测试我在 Tornado 上创建的应用程序（事件驱动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:34:58.373

我总是使用围攻，虽然我从来没有在龙卷风中使用它，所以我不能说。以下是如何安装和使用它的链接：[http ://www.techrepublic.com/article/test-your-web-server-lay-siege-to-it/5171727](http://www.techrepublic.com/article/test-your-web-server-lay-siege-to-it/5171727)

# php - 为一个用户创建了多个 sessionID - 这怎么可能？

> ID：14969292
> 
> 赞同：0
> 
> 时间：2013-02-19T23:03:40.107
> 
> 标签：php, session, firefox

我的一个（也是只有一个）最终用户在注销时遇到了一些问题。我发现创建了多个 PHP SessionID，并且旧的 sessionID 超时导致注销。

问题是多个会话 ID。我无法重现这是如何发生的。他们和我一样使用 Firefox。我尝试通过双击桌面图标打开新窗口，转到`File -> Open New Window`，然后右键单击应用程序中的链接并选择`Open Link in New Window`。我所做的一切都会打开一个具有相同 SessionID 的新窗口（在我的系统上）。这是预期的行为。

该用户是否可以通过另一种方式打开可能创建单独 SessionID 的窗口？我无权访问他们的系统，只能从我的应用程序中记录数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:35:01.953

绕回这个问题。问题原来是其中一位用户的工作流程问题。问题通过教育解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:31:22.117

他很可能使用不同的Firefox浏览器。

您可以使用[PHP 移动检测](https://github.com/serbanghita/Mobile-Detect)为您提供浏览器上的所有信息

我想这会证实我的猜测。

firefox 有多种变体，大多数情况下它们发送相同的标头，因此您将不知道它们是否使用 2 个不同的标头：

1.  [火狐](http://www.mozilla.org/en-US/firefox/new/)（原版）
2.  [Tor 项目](https://www.torproject.org/download/download)
3.  [科莫多冰龙](http://www.comodo.com/home/browsers-toolbars/icedragon-browser.php)
4.  [便携式火狐](http://portableapps.com/apps/internet/firefox_portable)
5.  ...

我想不出同一个 Session_ID cookie 对同一个域具有相同值的方法。

也许一些不起眼的插件正在与浏览器调和。

**FIX：** 尝试更改会话 ID 的名称[（php 手册）](http://php.net/manual/en/function.session-id.php)

例子：

```
<?php

 session_name("My_new_session_id" );
 session_start(); 
```

通常要求将会话名称更改为不太明显的名称，例如：“qwerty”

**编辑 ：**

安全会话管理的快速示例：[链接](http://blog.teamtreehouse.com/how-to-create-bulletproof-sessions)

更多信息：[OWasp 会话管理备忘单](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet)

# c++ - 我可以使用此代码创建动态数组吗？

> ID：14969294
> 
> 赞同：0
> 
> 时间：2013-02-19T23:03:50.720
> 
> 标签：c++, arrays

```
int arraySize;
cout << "\n\nEnter Total Number of Elements in Array.\n\n";
cin >> arraySize;
int arrayMain[arraySize]; 
```

我不想使用创建“新”数组命令。上面的代码和使用 new 命令创建一个新数组一样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T23:04:59.997

> 上面的代码和使用 new 命令创建一个新数组一样吗？

不，语法在 C++ 中无效。改用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)：

```
int arraySize;
cout << "\n\nEnter Total Number of Elements in Array.\n\n";
cin >> arraySize;
std::vector<int> arrayMain(arraySize); 
```

其他方面的用法是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:04:44.713

这是不一样的。创建一个动态大小的数组`new`是合法的，你的代码不是。如果你问我，那差别很大。

以下是虽然

```
std::vector<int> arrayMain(arraySize); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:15:25.993

如果您必须在 C++ 中动态分配一个数组，并且课堂作业的规则使用内置数组强制执行，那么您将需要 new 和 delete 关键字：

```
int arraySize;
cout << "\n\nEnter Total Number of Elements in Array.\n\n";
cin >> arraySize;

int* arrayMain = new int[arraySize];
// use arrayMain here
delete [] arrayMain; 
```

如果您不想动态分配内存，但您知道最大值，则可以分配最大值而不使用不需要的内存：

```
const int arraySizeMax = 51;
int arraySize;
do
{
  cout << "\n\nEnter Total Number of Elements in Array, no more than 50.\n\n";
  cin >> arraySize;
}
while(arraySize >= arraySizeMax);

int arrayMain[arraySizeMax];
// use arrayMain here
// No need for delete, since you didn't use new. 
```

如果您不想动态分配内存并且没有最大值，则应使用标准容器，例如`vector`：

```
vector<int>; 
```

注意这是多么容易！这就是为什么您需要使用向量来完成此类任务。（当任务允许时。）

# codeigniter - 使用 URI 路由通配符

> ID：14969296
> 
> 赞同：2
> 
> 时间：2013-02-19T23:03:53.850
> 
> 标签：codeigniter, codeigniter-2

在我的名为**article**的控制器中，我有以下函数，用于显示数据库中的数据：

```
function get_all(){

  $this->load->library('pagination');
  $config['base_url'] = base_url().'article/get-all';
  $config['total_rows'] = 2; // example
  $config['per_page'] = 1;
  $config['num_links'] = 20;
  $config['full_tag_open'] = '<div class="pagination" align="center">';
  $config['full_tag_close'] = '</div>';

  $this->pagination->initialize($config);

  $this->load->model('mod_articles');
  $data['records']= $this->mod_articles->get_articles_this_year($config['per_page'],$this->uri->segment(3));

  $this->load->view('view_article_list',$data);
} 
```

通常到达函数的 url 是：`http://localhost/article/get_all`，但是为了使 url 看起来像这样`http://localhost/article/get-all`，在 config/route.php 我添加了以下行：

```
 $route['article/get-all'] = "article/get_all"; 
```

它工作正常，但是当我单击分页链接转到下一页时，它显示**404 Page Not Found**

您能告诉我如何正确使用 URI 路由通配符吗？

## 编辑

我在 config/route.php 中也有以下内容，以避免索引出现在 url

```
 $route['article/(:any)'] = "article/index/$1"; 
```

如果我删除上面的行，那么分页就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:45:00.933

分页类是否向链接添加任何额外的 URI 段？例如：

`/article/get-all/page/5`

如果是这样，您应该设置两条路线，例如：

```
$route['article/get-all'] = "article/get_all";
$route['article/get-all/(:any)/(:any)'] = "article/get_all/$1/$2"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:28:05.453

我没有看到您包含 的配置`uri_segment`，分页库使用此配置。

`$config["uri_segment"] = 3;`

`$page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;`

用它作为

```
 $data['records']= $this->mod_articles->get_articles_this_year($config['per_page'],$page); 
```

直接附加`$this->uri->segment(3)`在查询中会返回`NULL`，因为如果 url 段无效，它会返回 FALSE，而 sql`limit`需要的是从哪里开始的整数。

# jquery - 将 jquery setInterval 与委托或函数一起使用

> ID：14969299
> 
> 赞同：0
> 
> 时间：2013-02-19T23:04:03.263
> 
> 标签：jquery, asp.net, updatepanel, setinterval

我正在尝试为卡片生成器制作一个动态示例对象。这里的目标是在 asp.net 更新面板中使用 jquery 颜色选择器来选择颜色，所选颜色将出现在卡片框架（一个**`<div>`**对象）上。
正如我在几篇文章中所读到的，保持刷新动态的唯一方法是使用每 100 个 setInterval 计时器更新颜色选择器中选择的颜色，因为选择器将颜色传递给文本框，然后 setInterval 读取信息并更新卡片的颜色。
这是代码，效果很好：

```
$(document).ready(function () {
        setInterval(function () {
            var cant = $('input[id$="txtColorFuente"]').val().length;
            if (cant >= 6) {
                $('div[id$="divMarco"]').css("color", "#" + $('input[id$="txtColorFuente"]').val());
            }
            cant = $('input[id$="txtColorFondo"]').val().length;
            if (cant >= 6) {
                $('div[id$="divMarco"]').css("background-color", "#" + $('input[id$="txtColorFondo"]').val());
            }
        }, 100);
    }); 
```

DOM 是这样的：

```
MasterPage,
Body,
Content(inner page),
<asp:UpdatePanel runat="server" ID="updatePanel1" UpdateMode="Conditional">
<ContentTemplate>
        <section class="AdminFormLeft">
            <asp:Label ID="lblResult" CssClass="message-error" runat="server" Text=""></asp:Label>
            <ul>
                <li class="labelForm">Color de fondo<br />
                    <asp:TextBox ID="txtColorFondo" MaxLength="6" runat="server"></asp:TextBox><br /></li>
                <li class="labelForm">Color de fuente<br />
                    <asp:TextBox ID="txtColorFuente" MaxLength="6" runat="server"></asp:TextBox><br /></li>

            </ul>
        </section>
    </ContentTemplate>
    <Triggers>
        //My triggers here
    </Triggers>
</asp:UpdatePanel> 
```

这工作正常，直到更新面板刷新，然后丢失，因为它是重新生成的，所以我必须使用 delegate() 或 on() 函数，但是我所有的尝试都是徒劳的。¿我如何在上面的设置间隔函数上实现委托或函数？谢谢！

# c# - Microsoft Fakes x64 而不是 x86 和 v4.5

> ID：14969301
> 
> 赞同：6
> 
> 时间：2013-02-19T23:04:06.710
> 
> 标签：c#, unit-testing, visual-studio-2012, microsoft-fakes

我正在使用 Microsoft Fakes 测试框架。由于我无法更改的“遗留”代码，我需要使用 shim/moles 方法，因此没有太多办法。它是来自没有源代码的供应商的代码，它是在没有考虑测试的情况下编写的。所以我坚持使用 3 种可能的框架，TypeMock（昂贵）、Telerik 的 JustMock（昂贵）或 Microsoft 的 Fakes。因为我们已经有了 VS Ultimate，所以我们选择了假货。由于大多数人认为他们需要建议以某种方式重写或修改代码以支持使用接口和/或依赖注入，我会提前告诉你，这不是一个选择。

我遇到的问题之一是我试图伪造的库很大，需要使用 64 位版本的 fakes.exe 而不是 32 位 (fakes.x86.exe)，它会运行到32 位应用程序的内存限制。

第二个问题是我需要使用 v4.5 框架编译 fakes 库。虽然没有记录，但可以通过命令行来实现。原因是在 v4.5 中，他们在 System.Collections.Generic 中添加了 IReadOnly* 接口，并且库使用了它们。使用 v4 编译时，会抛出一个错误，指出未找到类型，如预期的那样。

问题是，Visual Studio 总是使用 x86 版本和 v4.0 框架，我找不到覆盖它的方法。有人知道如何让它使用 64 位和 v4.5 框架吗？我目前的想法是不使用visual studio的内置东西，只使用命令行并手动引用文件。然后在每次更新 dll 时，我们将手动重新创建它并更新引用。该文件不会经常更新，因此这是可能的。

我用来手动生成 fakes 库的命令行（有人可能会觉得这很有用）是：

```
"c:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\fakes\fakes.exe" <assembly> /tfv:v4.5 
```

帮助命令仅显示 v2、v3.5 和 v4 是 tfv 的可能选项，但只是为了踢我尝试了 v4.5。

我尝试将应用程序上的架构强制为 x64 而不是任何 cpu，它运行的 fakes.exe 没有任何变化。在 .csproj 文件中查看测试，没有变化。查看 fakes.exe 的 .csproj 文件，它说使用框架的 v4，在 Visual Studio 中打开，更改为 v4.5，编译正常。使用 fakes 命令行，编译良好。项目中的.fakes文件中有一个属性允许定义编译器版本，但是设置为v4.5还是不行。我假设 Visual Studio 中从 v4 到 v4.5 的版本更改也更改了程序集引用。如果我能找到它，我的下一个尝试是尝试更改模板项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T17:19:36.197

@schellack - 这是我如何能够“引用创建的 fakes dll 并确保所需的引用在您的测试项目中”

1.  在本地编译并运行所有单元测试，并确保它们通过
2.  在项目的主目录中，与 .csproj 文件位置相同，现在应该有一个“ **FakesAssemblies** ”目录。目录中将是生成的 System.Web.Mvc.4.0.0.0.Fakes.dll（或您使用的任何版本号）。对 System.Web.Mvc.4.0.0.0.Fakes 的项目引用已经有指向该目录和 dll 的提示路径。 **此目录和 dll 都需要添加到源代码管理中。** 它们不需要添加到 VS。
3.  为了让我们的 CI 构建机器能够编译，我还必须将 Microsoft.QualityTools.Testing.Fakes.dll 添加到项目中。
    1.  我在 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\PublicAssemblies 中找到了 Microsoft.QualityTools.Testing.Fakes.dll
    2.  在项目的主目录中，与 .csproj 文件的位置相同，有一个“Fakes”目录，它包含在项目中（在 VS 中可见）以及在源代码管理下。它有一个 .fakes 文件。我通过 VS 将 Microsoft.QualityTools.Testing.Fakes.dll 复制到此目录中，以便将其也添加到项目中。
    3.  需要添加/更新项目的 .csproj 文件中的提示路径以查看 Fakes 目录。我在我的 .csproj 文件中找到了引用并将其更改为如下所示：

```
<Reference Include="Microsoft.QualityTools.Testing.Fakes, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
    <HintPath>Fakes\Microsoft.QualityTools.Testing.Fakes.dll</HintPath>
</Reference> 
```

现在一切都编译并运行单元测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:17:22.090

只能想到以下（如果已经设置，请道歉）：

'测试' --> '测试设置' --> '默认处理器架构' --> 'X64'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:45:34.287

不幸的是，我无法弄清楚如何让 Visual Studio 运行 fakes.exe 而不是 fakes.x86.exe。除了通过 fakes.x86.exe 复制 fakes.exe。不过，在四处寻找时，微软提出的一个关于使用假货来提高速度的建议是只引用创建的假货 dll 并确保所需的引用在您的测试项目中。默认情况下似乎是 Microsoft.VisualStudio.QualityTools.UnitTestFramework。这样做不仅可以让我使用假货，还可以减少构建时间，因为不再需要生成假货库。不是我最喜欢的解决方案，但它确实具有速度优势。所以我要走那条路。

感谢那些帮助解决这个问题的人。

回顾一下要编译的 4.5 版本...确保您的单元测试项目的成名版本是 4.5，如果从 4.0 更改它，请关闭并重新打开 Visual Studio。

# jquery - 为什么这个 jquery 没有选择？

> ID：14969303
> 
> 赞同：0
> 
> 时间：2013-02-19T23:04:15.197
> 
> 标签：jquery, html, dom

很抱歉问这个简单的问题，但我被卡住了，为什么这个 jquery 没有取值，它正在警告空消息。

我的jQuery：

```
$(function(){
  $('dt').on('click',function(){
     alert($(this).val());
  });
}); 
```

我的html：

```
<dl>
<dt>test</dt>
<dd>- test</dd>
</dl> 
```

我期待它提醒`test`消息。但它在没有消息的情况下发出警报。`$(this).val()`一定是对的，我想。感谢您的帮助和指导..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:05:19.613

.val() 用于输入元素，您需要使用 .text()

```
alert($(this).text());

or

alert($(this).html()); // Careful, since it will include markup (obviously) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T23:06:26.313

这是因为`val()`与`value`输入字段的属性有关。 `<dt>`不是输入字段。尝试做

```
$(function(){
  $('dt').on('click',function(){
     alert($(this).text());
  });
}); 
```

# google-chrome - Chrome 中的“Normal Reload”、“Hard Reload”和“Empty Cache and Hard Reload”有什么区别？

> ID：14969315
> 
> 赞同：386
> 
> 时间：2013-02-19T23:05:32.243
> 
> 标签：google-chrome, google-chrome-devtools, browser-cache

我最近在 Chrome 中发现了这个新功能：

![重新加载选项](../Images/27aa9a727305e83f4fcf7efea13f5708.png)

我可以弄清楚选项 1 和选项 3 之间的区别，选项 2 可能介于两者之间，但我在任何地方都找不到更精确的信息。

有人知道这三个选项中每一个的确切行为吗？

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2013-02-19T23:23:16.380

### 正常重载

和按一样的东西`F5`。这将使用缓存，但在页面加载期间重新验证所有内容，寻找“304 Not Modified”响应。如果浏览器可以避免重新下载缓存的 JavaScript 文件、图像、文本文件等，那么它会的。

* * *

### 硬重装

发出请求时不要使用缓存中的任何内容。（等于`SHIFT`+`F5`无需打开开发者控制台）强制浏览器重新下载每个 JavaScript 文件、图像、文本文件等。

* * *

### 空缓存和硬重载

显然，如果缓存为空，则必须进行硬重新加载。这将再次强制浏览器重新下载所有内容。但是，如果页面通过 JavaScript 进行任何不属于页面加载的事后下载，那么这些可能仍会使用缓存，这就是清空缓存有帮助的地方，因为它确保即使这些也不会使用缓存的文件。

* * *

**注意**：此功能仅在开发人员工具打开时可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-09T09:15:34.013

This also works in Mac OS X. Open developer tools, and then, on the reload button, either 1\. secondary click (right click for right-handed mouse), or 2\. long click, aka long press to see the menu.

In addition to [this answer](https://stackoverflow.com/a/14969509/1899424), hard reload often causes proxies, content delivery networks and other remote caches to be refreshed.

[![在此处输入图像描述](../Images/b90eeba35d54e337e4ce583058b6b9ac.png)](https://i.stack.imgur.com/5DM8B.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-16T11:11:47.357

The following method let you clear cache only for the troubled URL. It helped me when I was stuck with http to https redirection cache.

1.  Open Chrome developer tools, in Windows I use `F12`
2.  Check `Preserve log` to save the log before redirection
3.  Right click the redirected URL and `Clear browser cache`

This will clear only the troubled cache without affecting normal cache.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-16T22:42:06.593

Here's a reference to the spec - the browser performs one of these actions when a reload is triggered:

“正常重新加载”执行“特定的端到端重新验证”或“未指定的端到端重新验证”，如[HTTP 规范](https://www.rfc-editor.org/rfc/rfc2616#section-14.9)所定义，即使用缓存，但会发生重新验证，或者使用缓存验证有条件的（'特定'）或无（'未指定'）。在这两种情况下，都会发生重新验证，因为`max-age`浏览器将标头设置为 0。

另一方面，“硬重新加载”似乎会触发“端到端重新加载”——不允许使用缓存副本。在这种情况下，浏览器设置会强制重新加载`Pragma: no-cache`。

# asp.net - 选中 =“已选中”时未选中单选按钮组中的单选按钮

> ID：14969318
> 
> 赞同：0
> 
> 时间：2013-02-19T23:05:50.457
> 
> 标签：asp.net, html, radio-button, jquery-validation-engine

从 ASP.Net MVC3 (C#) 应用程序中获取此 HTML：

```
<div class="row-fluid">
   <div class="span4">
      <label for="MailPrefBusi">Business Street</label>
      <input type="radio" checked="checked" class="validate[groupRequired[MailingPreference]] MailingPreference" 
             parent_tab="tab4" id="MailPrefBusi" name="MailingPreference" value="1">
   </div>
   <div class="span4">
      <label for="MailPrefBusiPO">Business PO</label>
      <input type="radio" class="validate[groupRequired[MailingPreference]] MailingPreference" 
             parent_tab="tab4" id="MailPrefBusiPO" name="MailingPreference" value="0" disabled="disabled">
   </div>
   <div class="span4">
      <label for="MailPrefHome">Home</label>
      <input type="radio" class="validate[groupRequired[MailingPreference]] MailingPreference" 
             parent_tab="tab4" id="MailPrefHome" name="MailingPreference" value="2">
   </div>
</div> 
```

但在浏览器、FF、IE9、IE8 和 Chrome 中查看时，MailPrefBusi 收音机未显示选中。

这是生成 HTML 的代码：

```
<div class="row-fluid">
    @{
        String busipref = "";
        String popref = "";
        String homepref = "";
        switch (ViewBag.part.MailingPreference)
        {
            case 1:
                busipref = "checked=\"checked\"";
                break;
            case 0:
                popref = "checked=\"checked\"";
                break;
            case 2:
                homepref = "checked=\"checked\"";
                break;
        }
     }
     <div class="span4">
        <label for="MailPrefBusi">Business Street</label>
        <input type="radio" value="1" name="MailingPreference" id="MailPrefBusi" 
               parent_tab="tab4" class="validate[groupRequired[MailingPreference]] MailingPreference" @Html.Raw(busipref) />
     </div>
     <div class="span4">
        <label for="MailPrefBusiPO">Business PO</label>
        <input type="radio" value="0" name="MailingPreference" id="MailPrefBusiPO" 
               parent_tab="tab4" class="validate[groupRequired[MailingPreference]] MailingPreference" @Html.Raw(popref) />
     </div>
     <div class="span4">
        <label for="MailPrefHome">Home</label>
        <input type="radio" value="2" name="MailingPreference" id="MailPrefHome" 
               parent_tab="tab4" class="validate[groupRequired[MailingPreference]] MailingPreference" @Html.Raw(homepref) />
     </div>
 </div> 
```

还有这个jQuery代码：

```
if ($("#BusinessAddress1").val() == "") {
    $("#MailPrefBusi").attr('checked', false);
    $("#MailPrefBusi").attr('disabled', true);
} else {
    $("#MailPrefBusi").attr('disabled', false);
    if ($("#MailPrefBusi").attr('checked')) {
        $("#MailPrefBusi").attr('checked', 'checked');
    }
}
if ($("#HomeAddress1").val() == "") {
    $("#MailPrefHome").attr('checked', false);
    $("#MailPrefHome").attr('disabled', true);
} else {
    $("#MailPrefHome").attr('disabled', false);
    if ($("#MailPrefHome").attr('checked')) {
        $("#MailPrefHome").attr('checked', 'checked');
    }
}
if ($("#POAddress1").val() == "") {
    $("#MailPrefBusiPO").attr('checked', false);
    $("#MailPrefBusiPO").attr('disabled', true);
} else {
    $("#MailPrefBusiPO").attr('disabled', false);
    if ($("#MailPrefBusiPO").attr('checked')) {
        $("#MailPrefBusiPO").attr('checked', 'checked');
    }
} 
```

但它仍然没有显示检查。这是此表格中非常重要的部分，该广播组必须至少检查一项。如果用户没有看到它被检查，我不确定该值是否被正确发送，或者因为我们有用户的 MailingPreference 被修改为具有空地址的值的实例，不好！

验证是使用 jQuery ValidationEngine 完成的。

我不确定这里到底发生了什么。我已经搜索了高低以找到答案，但空无一物，我尝试的一切都有相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:44:18.447

不久前我有类似的问题。基本上我最终的结果是将单选按钮列表初始化放在客户端，它看起来像这样：

```
$(function() {
    $('input[name=MailingPreference]:eq('+@(ViewBag.part.MailingPreference)+')').attr('checked', 'checked');
}); 
```

# java - 随机类不适用于 Android 4.1+

> ID：14969320
> 
> 赞同：1
> 
> 时间：2013-02-19T23:05:57.287
> 
> 标签：java, android, random

这是我用来生成一组随机数字的代码：

```
...
        public boolean placeTreasure()  {
            randomGen = new Random();
            int[] treasureLoc = {0, 0};

            while (treasureLoc[0] < 2 || treasureLoc[1] < 2)    {
                treasureLoc[0] = randomGen.nextInt(rows - 2);
                treasureLoc[1] = randomGen.nextInt(columns - 2);
                System.out.println("" + treasureLoc[0] + ", " + treasureLoc[1]);
            }
            maze[treasureLoc[0]][treasureLoc[1]] = '*';

            return true;
        }
... 
```

有趣的是，它在早期版本的 Android 上运行良好。据我所知，4.1 以上的任何东西都不能正常运行。它不断地给我一双`0, 0`。这让我相信 4.1+ 不支持随机类，或者我的实现发生了其他奇怪的事情。这种方法在早期版本上工作得很好，所以我不确定发生了什么。

如果有人对此的替代实现有建议（我需要在`2`and `rows`or之间生成随机整数`columns`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:12:05.610

> 如果有人对此的替代实现有建议（我需要在 2 和行或列之间生成随机整数）。

是的，非常简单：

```
int randomRow = randomGen.nextInt(rows - 2) + 2;
int randomCol = randomGen.nextInt(columns - 2) + 2; 
```

# iphone - 为 Facebook URL 传递 HandleOpenURL

> ID：14969321
> 
> 赞同：0
> 
> 时间：2013-02-19T23:05:59.053
> 
> 标签：iphone

[https://m.facebook.com/dialog/oauth?type=user_agent&scope=publish_stream&client_id=%24FBAPPID&local_client_id=%24SUFFIX&redirect_uri=fb%24FBAPPID%24SUFFIX%3A%2F%2Fauthorize&sdk=ios&display=touch](https://m.facebook.com/dialog/oauth?type=user_agent&scope=publish_stream&client_id=%24FBAPPID&local_client_id=%24SUFFIX&redirect_uri=fb%24FBAPPID%24SUFFIX%3A%2F%2Fauthorize&sdk=ios&display=touch)

```
- (BOOL)handleOpenURL:(NSURL*)url {
    return [facebook handleOpenURL:url];
} 
```

我正在从其他类调用此方法

```
-(void)callMethod{

BOOL bool;

    NSURL *testURL = [NSURL URLWithString:@"https://m.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=254225037982009&client_id=254225037982009&redirect_uri=fb254225037982009%3A%2F%2Fauthorize&sdk=ios&display=touch&type=user_agent&perms=user_birthday%2Cemail&fbconnect=1&sso=iphone-safari&from_login=1&refid=9&_rdr"];
 bool =   [testComponent handleOpenURL:testURL];

if(bool == YES){
NSLOG(@"Return YES");
} 
```

}

我猜它需要返回YES。但它返回NO。当它返回“是”时，任何人都可以建议我。@全部

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:16:37.230

您可以使用 UIApplication 的[canOpenURL:](http://developer.apple.com/library/ios/ipad/#//apple_ref/occ/instm/UIApplication/canOpenURL%3a)在尝试打开它之前测试并查看它是否可以打开。

目前尚不清楚您到底想做什么，但如果您想从您的应用程序中打开 Facebook 应用程序，您需要使用以 fb:// 开头的 Facebook 自定义 URL 方案

# java - jms 多线程打开连接问题

> ID：14969322
> 
> 赞同：0
> 
> 时间：2013-02-19T23:06:10.937
> 
> 标签：java, jms

我正在创建一个独立的 java 多线程应用程序（使用 LinkedBlockingQueue），它将 xml 消息发送到 jms 队列。这个 jar 文件作为 jxsp（java 扩展存储过程）从 teradata 框中调用。我们面临的问题是，消息正在发布到队列，但打开的 jms 连接没有关闭。我需要调用 threadpoolexecutors 关闭方法吗？问候 Pradeep S

# jquery - 更改mouseenter / mouseleave jquery上每个div的可见性

> ID：14969327
> 
> 赞同：0
> 
> 时间：2013-02-19T23:06:46.530
> 
> 标签：jquery, visibility, each, mouseenter, mouseleave

我查看了 jquery 网站上的所有文档，还搜索了与我的问题相关的所有问题，但我没有找到解决方案。我想要做的是，当您将鼠标悬停在`post`课堂上时，使链接在`post span a`鼠标明显离开时出现并消失...现在，唯一发生的事情是，当我将鼠标悬停在一个在这些`post`类中，每个 div 都会出现链接，但我不希望这样，我只希望它像 twitter 帖子上发生的那样，例如，当悬停帖子时，回复、转发、收藏和更多链接出现。我想要那样的。

```
$(function(){
  $.each(function(){
    $(".post").mouseenter(function(){
        $(".post span a").css("visibility", "visible");
    });
  });
  $.each(function(){
    $(".post").mouseleave(function(){
        $(".post span a").css("visibility", "hidden");
    });
  });
}); 
```

编辑：很抱歉没有发布 HTML，这里是

```
 <div class="post">

                <span>
                    <a href="<?php echo base_url() . '/discussion/edit/' . $post['pid'];?>" class="post-edit" id="<?php echo $post['pid'];?>">edit</a>
                    &nbsp;
                    <a href="<?php echo base_url('discussion/delete/' . $post['pid']); ?>">delete</a>
                </span>
                </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:09:32.207

我建议：

```
$('.post').hover(function(){
    $(this).find('a').css('visibility','visible');
},
function(){
    $(this).find('a').css('visibility','hidden');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:09:54.320

为什么不直接使用 CSS？

```
.post span a {
    visibility: hidden;
}

.post:hover span a {
    visibility: visible;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:12:20.477

试试这个：

```
$(function(){
  $('.post').each(function(index, element) {
    $(element).mouseenter(function() {
      $(element).find('span a').show();
    }).mouseleave(function() {
      $(element).find('span a').hide();
    });
  });
}); 
```

# android - android sqlite查询返回0个结果的游标

> ID：14969340
> 
> 赞同：3
> 
> 时间：2013-02-19T23:08:09.670
> 
> 标签：android, android-asynctask, android-sqlite

我确实调用了一个 AsyncTask 传递一个要执行的方法，以确定一个返回`NAME`从特定 id 命名的行的方法。在 doInBackground 上调用数据库查询/原始查询时，它返回一个带有空结果的游标，甚至`SELECT * FROM TABLE`在 TABLE 有 8 条记录时尝试使用查询。这里有什么问题？查询是否不同步？如果是，我应该如何编码以防止此类问题？

`EDIT`

```
...
final TextView tv = (TextView)findViewById(R.id.textView);

dao.retrieveMovieByIdAsync(1, new AsyncTaskCaller() {
    @Override
    public void execute(Movie result) {
        tv.setText(result.get_Name());
    }});
...

private class AsyncRetieveQuery extends AsyncTask<Method, Void, Movie>
{
    private Object args;
    private AsyncTaskCaller signal;

    public AsyncRetieveQuery(Object args, AsyncTaskCaller signal) {
        this.args = args;
        this.signal = signal;
    }

    @Override
    protected Movie doInBackground(Method... params) {
        params[0].setAccessible(true);
        try {
            return (Movie) params[0].invoke(DBUtils.this, new Object[] {args});
        } catch (Exception e) {
            return null;
        }
    }

    @Override
    protected void onPostExecute(Movie result) {
        signal.execute(result);
        super.onPostExecute(result);
    }
}
...
public void retrieveMovieByIdAsync(int id, AsyncTaskCaller resultMethod)
{
    try {
        new AsyncRetieveQuery(id,resultMethod).execute(DBUtils.class.getDeclaredMethod("retrieveMovieById", int.class));
    } catch (NoSuchMethodException e) {}
}
...
private Movie retrieveMovieById(int id)
{
    Cursor cursor = database.rawQuery("SELECT * FROM " + SQLiteHelper.TABLE_MOVIES_NAME + " WHERE _Id = ?", new String[] {String.valueOf(id)}); 
```

调试器总是以空结果显示它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:10:13.857

`cursor.moveToFirst()`实际的问题是，即使我只需要从答案中获取行数，我也必须打电话。
我认为当谷歌在查询调用获得最后一个结果之后说光标时，它们可能意味着您`isAfterLast`在迭代行时使用该方法检查的空行。

# xml - XSLT：如何将字符串转换为多个元素？

> ID：14969341
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:09.290
> 
> 标签：xml, xslt, transformation

我正在尝试转换此 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<data>
    <entry>
        <databit>30.11.2012</databit>
        <databit>Foo</databit>
        <databit>Key: Value<br />Key: Value<br /> ... Key: Value</databit>
        <databit>some Foo content</databit>
        <databit>more Foo content</databit>
    </entry>
    <entry>
        ...
    </entry>
    ...
</data> 
```

键值对的数量是可变的。分隔符始终是一个`<br />`标签。

输出应如下所示：

```
<data>
    <entry>
        <date>30.11.2012</date>
        <title>Foo</title>
        <info>
            <part key="Key" value="Value" />
            <part key="Key" value="Value" />
            <part key="Key" value="Value" />
        </info>
        <databit>some Foo content</databit>
        <databit>more Foo content</databit>
    </entry>
    <entry>
        ...
    </entry>
    ...
</data> 
```

这是我编写的 XSLT 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <data>
            <xsl:for-each select="/data/entry">
                <entry>
                    <date>
                        <xsl:value-of select="databit[1]"/>
                    </date>
                    <title>
                        <xsl:value-of select="databit[2]"/>
                    </title>
                    <info>
                        <xsl:value-of select="databit[3]"/>
                    </info>
                    <category>
                        <xsl:value-of select="databit[4]"/>
                    </category>
                    <status>
                        <xsl:value-of select="databit[5]"/>
                    </status>
                </entry>
            </xsl:for-each>
        </data>
    </xsl:template>
</xsl:stylesheet> 
```

但我不知道如何转换`info`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:56:30.380

此样式表应创建所需的转换。样式表假定 key 和 value 总是用 分隔，`:`它去掉了冒号和空格字符，但没有其他字符。`normalize-space()`如果需要删除空格，请使用。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <xsl:template match="@*|node()" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="databit[1]">
        <date>
            <xsl:apply-templates/>
        </date>
    </xsl:template>

    <xsl:template match="databit[2]">
        <title>
            <xsl:apply-templates/>
        </title>
    </xsl:template>

    <xsl:template match="databit[3]">
        <info>
            <xsl:apply-templates/>
        </info>
    </xsl:template>

    <xsl:template match="databit[3]/text()">
        <part key="{substring-before(., ':')}" value="{substring(substring-after(., ':'), 2)}"/>
    </xsl:template>

    <xsl:template match="databit[3]/br"/>

</xsl:stylesheet> 
```

样式表上的一些要点

*   所有元素都使用标识模板递归复制，除非该元素有自己的模板
*   第三个`<databit>`元素中的所有文本节点都应该是键值对。
*   Attributes in `<part>` elements are added using an XPath expression inside braces (an attribute value template). Other method to add them is to use `<xsl:attribute>` element.
*   Element `<br>` is suppressed from copying by using an empty template.

# c++ - 如何制作一个 C++ 程序来查找任何大小矩阵的行列式和逆矩阵？

> ID：14969343
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:14.260
> 
> 标签：c++, linux, matrix, matrix-inverse, determinants

我知道如何在 1x1 2x2 和 3x3 中找到这些，但我想制作一个程序，让我输入矩阵的尺寸，然后输入矩阵中的数字。输入数字后，我希望它给出确定的（如果能够得到一个）和矩阵的逆矩阵，但我不知道如何绕过维度部分。什么是开始这个​​的好方法？我应该使用什么标题？我在Linux上运行，所以我没有像windows那样的一些标题，如果有帮助的话。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:19:05.190

首先选择一本线性代数书。吉尔伯特·斯特朗 (Gilbert Strang) 的作品。它读起来就像一本很好的故事书。进行 LU 分解并进一步分解为特征值和特征向量。一路走来，您会找到两个问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:14:41.650

一个简单的方法是使用像[Eigen](http://eigen.tuxfamily.org/dox/GettingStarted.html)这样的库。

如果你真的想自己做，你必须

1.  决定如何在内存中表示你的矩阵，
2.  根据您的定义编写代码以读取和存储矩阵，以及
3.  编写代码以根据您的定义计算矩阵的逆/行列式。

显然，2\. 和 3\. 取决于您对 1\. 的选择，并且找到一个好的表示并非易事，并且取决于您的应用程序，例如您的矩阵将有多大或者它是稀疏的还是密集的。

如果您不关心效率或只是假设您的矩阵很小，那么您可能希望将您的矩阵表示为一维向量。例如，你有一个 4x4 矩阵，你可以分配一个长度为 16 的向量。

如果我正确理解了您的问题，那么您实际上是在询问如何动态地（在运行时）执行此操作。使用数组，它看起来像这样：

```
double* yourMatrix
yourMatrix = new double[columnCount * rowCount]; 
```

这会为 s 动态分配空间`columnCount * rowCount` `double`，您现在可以像访问静态数组一样访问该内存。完成后，您必须`delete[] yourMatrix`防止内存泄漏。

如果你知道如何在纸上计算行列式/倒数，你应该可以从这里开始。

# function - 如何从董事会获得有效邻居？

> ID：14969345
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:20.590
> 
> 标签：function

我刚开始编程，我正在尝试创建一个名为“verifyNeighbor”的函数，该函数使用来自另一个名为“getNeighborLabels”的函数的列表，该函数返回 boardWidth*boardHeight 板上数字“me”周围的所有邻居列表（不包括底片和重复）。但是，这会返回一个可能包含无效邻居的邻居列表（例如，在 5 x 5 的棋盘上，me=0，neighbor=4 将在列表中，但不是邻居）。这就是“verifyNeighbors”函数的作用——为“我”周围的每个邻居返回真或假。关于如何从逻辑上接近/开始的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:26:03.087

对于在 python 中运行时由 entropy 发布的给定代码给出了错误，指出 coord 需要 3 个参数，mx,my = coords(me,boardWidth) 只给出了两个参数。有什么帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:26:30.547

这是一个相当简洁的版本，假设您使用的是 Python 2 - 所以如果不是这种情况，则需要更改一些小事情。我还命名了该函数，`getNeighborOffsets()`而不是`getNeighborLabels()`因为它正在做的事情。

# 

```
def xy(boardWidth, offset):
    """ x,y position from offset """
    y = offset // boardWidth
    x = offset - y * boardWidth
    return x, y

def getNeighborOffsets(boardWidth, boardHeight, posn):
    posnX, posnY = xy(boardWidth, posn)
    return (y * boardWidth + x
                for x in [posnX-1, posnX, posnX+1]
                    for y in [posnY-1, posnY, posnY+1]
                        if (x != posnX or y != posnY) and
                            0 <= x < boardWidth and 0 <= y < boardHeight)

def verifyNeighbor(boardWidth, boardHeight, cell, posn):
    # if both cell and posn are on board, test whether cell is adjacent to posn
    maxOffset = (boardHeight-1) * boardHeight + (boardWidth-1)
    return (0 <= posn <= maxOffset and 0 <= cell <= maxOffset and
            any(cell == offset for offset in getNeighborOffsets(boardWidth, boardHeight, posn)))

if __name__ == '__main__':
    def offset(boardWidth, x, y):  # for testing
        """ offset from x, y position """
        return y * boardWidth + x

    boardWidth, boardHeight = 8, 8

    me = offset(boardWidth, 0, 4)
    print sorted(getNeighborOffsets(boardWidth, boardHeight, me))

    posn1 = offset(boardWidth, 1, 5)
    print verifyNeighbor(boardWidth, boardHeight, posn1, me)

    posn2 = offset(boardWidth, 1, 6)
    print verifyNeighbor(boardWidth, boardHeight, posn2, me) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:25:39.440

好吧，您的代码格式不正确，我无法理解。但这里有一段代码应该做你想做的事：

```
# Gives the x and y coordinates on the board
def coords(point, boardWidth):
    x = point % boardWidth;
    y = point // boardWidth
    return (x,y)

#inverse transform from above
def point(x, y, boardWidth):
    return x + y * boardWidth

def verifyNeighbor(boardWidth, boardHeight, neighbor, me):
    mx,my = coords(me, boardWidth)
    nx,ny = coords(neighbor, boardWidth)
    # if the generated neightbor has coords that are
    # off the grid, then it is invalid
    # Since x is calculated modulo boardWidth it will never
    # be less than 0 or greater than boardWidth so we only
    # need to check y
    if ny < 0 or ny >= boardHeight:
        return False

    dx = abs(mx-nx)
    dy = abs(my-ny)
    # Neighbors are points whose coordinates relative to me are:
    # (-1,-1) top left
    # (-1, 0) left
    # (-1, 1) bottom left
    # (0, -1) top
    # (0, 1) bottom
    # (1, -1) top right
    # (1, 0) right
    # (1, 1) bottom right
    # Therefore the absolute values are one of the three options
    # below otherwise it's not a neighbor
    return (dx,dy) in [(0,1),(1,0), (1,1)]

def getNeighborLabels(boardWidth, boardHeight, me):
    mx,my = coords(me, boardWidth)
    result = []
    for i in range(-1,2):
        for j in range(-1,2):
            if i == j == 0:
                continue
            p = point(mx+i, mx+j, boardWidth)
            if verifyNeighbor(boardWidth, boardHeight, p, me):
                result.append(point(mx+i,mx+j, boardWidth))
    return result 
```

编辑：最近用 C 编程太多了。使用 // 用于评论 >_<

Edit2：添加了 wgetNeighborLabels `function that passes things through`verifyNeighbor `before adding to the list.`getNeighborLabels` 现在应该可以为您工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:27:08.653

好的，这就是我认为你需要的。测试了它，它对我有用。

```
def getNeighborLabels(boardWidth, boardHeight, me):
    result = [] 

   # since there's no boardHeight, the one below me is always in the resultset

    if(me > boardWidth * boardHeight - 1):
        # throw exception here
        print 'error!'        
        return null

    if(me < boardWidth * (boardHeight - 1)):    
        result += [me + boardWidth]
    if(me > boardWidth - 1):
        result += [me - boardWidth]

   # if you're in the first or last column, something special happens:
    if(not(me % boardWidth == 0)):
        result += [me - 1]
    if(not(me % boardWidth == boardWidth - 1)):
        result += [me + 1]
    return(result)

def verifyNeighbor(boardWidth, boardHeight, me, neighbor):
    return(neighbor in getNeighborLabels(boardWidth, boardHeight, me)) 
```

请注意，这里的索引是从 0 开始的，所以`2 x 5`棋盘看起来像这样：

```
0 1 2 3 4
5 6 7 8 9 
```

编辑：我犯了忘记对角线邻居的错误。从这里添加它们应该不会太难。我也更喜欢另一个答案。我将把它留作另一种方式。

# vbscript - 在 vbScript 中使用大小写

> ID：14969346
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:27.353
> 
> 标签：vbscript

我正在处理一个具有六元素数组的 vbscript 文件。数组声明如下。

```
dim grpaddarray(6), gpaddname

grpaddarray(0)= "someinformation"
grpaddarray(1)= "someinformation"
grpaddarray(2)= "someinformation"
grpaddarray(3)= "someinformation"
grpaddarray(4)= "someinformation"
grpaddarray(5)= "someinformation" 
```

因为我将它们声明为小写“dim”而不是大写“DIM”，所以当我调用它们时会忽略我的数组对象。我以前从未使用过 vbscript，所以我不知道大小写是否是 DIM 的问题。或者我的程序是否应该与小写或大写 DIM、dim 一样工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:15:19.427

VBScript 不区分大小写，因此`dim`、`DIM`和`dIm`都被认为是等效的。你的数组仍然是一个数组。

（在我看来，您可以在比您将代码复制/粘贴到此问题中的时间更短的时间内进行测试。）

```
dim TestArray(3)
TestArray(0) = "Testing"
TestArray(1) = "Two"
TestArray(2) = 123

MsgBox TestArray(0)
MsgBox TestArray(1)
MsgBox TestArray(2)

DIM TestArrayTwo(3)
TestArrayTwo(0) = "Testing two"
TestArrayTwo(1) = "Two two"
TestArrayTwo(2) = 123456

MsgBox TestArrayTwo(0)
MsgBox TestArrayTwo(1)
MsgBox TestArrayTwo(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:15:40.690

MS的[Dim Statement](http://msdn.microsoft.com/en-us/library/zexdsyc0%28v=vs.84%29.aspx)文章使用大写版本`Dim`。VBScript 不区分大小写，因此这三个都有效。我会确保我始终在任何代码库中始终使用相同的案例。为了便于打字`dim`节省了击键。

# .htaccess - 另一个重写问题：向所有 URI 添加参数而不更改它们

> ID：14969347
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:29.490
> 
> 标签：.htaccess, mod-rewrite

我想重写

*   www.mydomain.com/www/whatever.php

到

*   www.mydomain.com/www/whatever.php?hl=EN

whatever.php 不是固定的，它代表 www 目录中的任何 php 页面。

我的 htaccess 目前看起来像这样：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !hl=
RewriteRule ^(.+)$ $1?hl=EN [QSA,R=301,L] 
```

但由于某种原因，它会将每个页面的真实硬盘路径添加到 www.mydomain.com，例如：

*   127.0.0.1:8080/index.php

变成

*   127.0.0.1:8080/D:/mypath/index.php?hl=EN

我一定在这里做错了什么，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:45:27.613

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^/(www/[^.]+\.php)/? [NC]
RewriteRule .*         %1?h1-EN             [R=301,L] 
```

永久重定向

`http://www.mydomain.com/www/whatever.php`带或不带斜杠

到：

`http://www.mydomain.com/www/whatever.php?hl=EN`

假定所有字符串都是固定的，除了`whatever`.

对于静默映射，替换`[R=301,L]`为`[L]`

* * *

从 SO 编辑：

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} !hl=
RewriteCond %{REQUEST_URI}  ^/(www/[^.]+\.php)/? [NC]
RewriteRule .*         %1?hl=EN             [R=301,L] 
```

成功了，谢谢

# ios - 在代码中更改分段控件的样式

> ID：14969350
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:08:43.997
> 
> 标签：ios, xcode, iphone-5

我正在开发一个应用程序，为了利用 iPhone 5 屏幕上的额外空间，我想改变这个`UISegmentedControl`. 因此，这涉及两个部分。首先，在代码中检测它是否是 iPhone 5，然后更改样式。

在 3.5" 中将是这种风格

![酒吧](../Images/f6e130e5b8d8d727b6d130ea73976a87.png)

而在 4" 这个。

![清楚的](../Images/ac350218142f25cc0320bfeef111c889.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:31:27.960

使用 检查屏幕大小`[[UIScreen mainScreen] bounds]`。如果 bounds.size.height 大于某个数字（您决定那将是什么），则设置分段控件的`segmentedControlStyle`属性。对于你想要的更大的高度`UISegmentedControlStylePlain`。对于其他，你想要`UISegmentedControlStyleBar`.

# ruby-on-rails - Account#show 中的 NameError，Ruby on Rails

> ID：14969351
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:43.477
> 
> 标签：ruby-on-rails, ruby, nameerror

我一直无法找到解决此问题的方法。这与之前提出的许多问题相似，但我相信我的情况有所不同。我目前收到此错误：

```
NameError in Account#show
uninitialized constant Account::AccountProces 
```

在我看来，它抛出了错误：

```
<%@account.account_process.each do |process|%>
    Name: <%=process.name%><br/>
<%end%> 
```

现在我已经检查了名称，并且除了 AccountProces 应该是 AccountProcess 之外的所有内容都匹配。我不知道为什么它显示 AccountProces 只有一个 s。我已经在整个目录中搜索了只有 1 s 的东西。我还没有找到任何东西。这是我的模型：

```
class AccountProcess < ActiveRecord::Base
    attr_accessible :account_id, :name
    validates :account_id, presence: true
    validates :name, presence: true

    belongs_to :account
    def as_json options={}
    {
       id: id,
       name: name,
       open_count: open_count,
       created_at: created_at,
       update_at: updated_at

    }
    end
end 
```

这是我的迁移：

```
class CreateAccountProcesses < ActiveRecord::Migration
   def change
      create_table :account_processes do |t|
         t.references :account

         t.string :name, :null => false, :default => ""

         t.timestamps
      end
   end
end 
```

这是我的简化帐户模型：

```
class Account < ActiveRecord::Base
   attr_accessible :computer_id, :allotted_time, :domain, :tracking, :used_time, :username, :account_process_attributes

   validates :username, :presence => true
   validates :computer_id, :presence => true

   has_many :account_process, :dependent => :destroy

   accepts_nested_attributes_for :account_process

   def as_json options={}
   {
     id: id,
     computer_id: computer_id,
     domain: domain,
     username: username,
     tracking: tracking,

     account_process_attributes: account_process,

     created_at: created_at,
     update_at: updated_at
   }
   end
end 
```

这应该是我能想到的所有会导致这个问题的东西。我还有其他与帐户有关的属性，例如历史记录和程序。它们与帐户流程几乎相同，并且不会引发任何错误。它在我的视图中以及当我尝试使用我的 REST API 保存到数据库时都会引发此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:11:57.383

尝试改变

```
class Account < ActiveRecord::Base
...
  has_many :account_process, :dependent => :destroy
...
end 
```

至

```
class Account < ActiveRecord::Base
...
  has_many :account_processes, :dependent => :destroy
...
end 
```

并在您的视图中更改此关联。

中的关联名称`has_many`应始终是复数形式，ActiveRecord 将通过单数关联名称来确定类。

如果它无法正确生成类名，您可以执行以下操作：

```
has_many :account_processes, :class_name => "AccountProcess" 
```

# php - 您如何将三元运算符与 echo/我的问题结合使用？

> ID：14969352
> 
> 赞同：0
> 
> 时间：2013-02-19T23:08:44.880
> 
> 标签：php

我有以下 PHP 语句：

```
echo "<p><strong>Ratio:</strong> " . ($row2["losses"] == 0) ? "&infin;</p>" : number_format(($row1["wins"] / $row2["losses"]), 2) . "</p>"; 
```

我究竟做错了什么？每次都会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:14:38.367

您的陈述被解释为

```
echo ( "<p><strong>Ratio:</strong> " . ($row2["losses"] == 0) ) ? 
       "&infin;</p>" : 
       number_format(($row1["wins"] / $row2["losses"]), 2) . "</p>"; 
```

那是因为`.`优先级高于`?` [http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

您需要告诉解析器三元在哪里开始和停止，或者更好的是，将其拆分为更多语句，这样就不会造成混淆。

```
echo "<p><strong>Ratio:</strong> ";
echo $row2["losses"] == 0 ? "&infin;" : number_format(($row1["wins"] /$row2["losses"]), 2);
echo "</p>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:09:32.913

```
echo "<p><strong>Ratio:</strong> " .( ($row2["losses"] == 0) ? "&infin;</p>" : number_format(($row1["wins"] / $row2["losses"]), 2) ). "</p>"; 
```

你需要把你的三元放在 ( 和 ) 之间。

其他示例（更好的可读性）：

```
echo "hi i am ".( $user == "john"? "John" : "Bla")." Doe"; 
```

# javascript - Emberjs 1.0：如何创建模型并在另一条路线中显示它们？

> ID：14969353
> 
> 赞同：1
> 
> 时间：2013-02-19T23:08:56.020
> 
> 标签：javascript, ember.js

我正在尝试在一条路线中创建一个集合（“内容”）并将它们传递给另一条路线以显示它们。这里有什么问题？

> 错误：“StartView 中的内容未定义”

**这是代码** 

[http://jsfiddle.net/insnet/cmBgz/21/](http://jsfiddle.net/insnet/cmBgz/21/)

```
App = Ember.Application.create({LOG_TRANSITIONS: true});
App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

/* Routing */
App.Router.map(function() {
    this.route("start", {path: '/'});
    this.route("photos");
});

/* Start */
App.StartController = Ember.ArrayController.extend({

    createModels: function() {
        this.set('content', Ember.A());

        this.addObject(Ember.Object.create({id: 1, title: 'Hello'}));
        this.addObject(Ember.Object.create({id: 2, title: 'Digital'}));
        this.addObject(Ember.Object.create({id: 3, title: 'World'}));

        this.transitionToRoute('photos');   
    }
});

/* Photos */
App.PhotosView = Ember.CollectionView.extend({
    contentBinding : 'App.StartController.content',

    didInsertElement : function() {
        console.info("content in StartView", this.get('content'));
    }

});

<script type="text/x-handlebars" data-template-name="application">
  <div class="contrainer">
          <div class="hero-unit">
    <h1>My App</h1>
    {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" data-template-name="start">
    <h2>View:Start</h2>
    <button  {{action "createModels"}} class="btn btn-primary">Create models and goto '/photos'</button>
</script>

<script type="text/x-handlebars" data-template-name="photos">
    <h2>View:Photos</h2>
    {{#each controller}}
    <p>{{title}}</p>
    {{/each}}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:30:47.767

我将您的小提琴更新为工作版本：http: [//jsfiddle.net/mavilein/cmBgz/22/](http://jsfiddle.net/mavilein/cmBgz/22/)

起初，这是小提琴中的**错误/误解：**

1 - 此绑定不起作用，因为您引用的是控制器类，而不是 Ember 框架创建的实例。

```
App.PhotosView = Ember.CollectionView.extend({
    contentBinding : 'App.StartController.content', 
```

2 - 您视图中的日志消息是错误的，无法以这种方式工作。如果您想访问视图的“底层事物”，请始终使用属性“上下文”。术语内容仅与控制器一起使用。

```
/* Photos */
App.PhotosView = Ember.View.extend({
    didInsertElement : function() {
        console.info("content in StartView", this.get('context.content'));
    }

}); 
```

**这是您的问题的可能解决方案：**

a - 这是一种可能的方式来查找您的 startController 实例并将其内容设置为 photos 路由的生成控制器的内容：

```
App.PhotosRoute = Ember.Route.extend({
    model : function(){
        var startController = this.controllerFor("start"); //in routes you have access to controllers with this method
        return startController.get("content");
    }
}); 
```

b - 另一种可能性是手动声明路由的控制器并使用 Ember 依赖注入（**可能是最“emberish”的解决方案**）：

```
App.PhotosController = Ember.ArrayController.extend({
    needs : ["start"], // "I need the startController plz!" -> accessible via "controllers.start"
})

/* The corresponding each in your template would look like this */
{{#each controller.controllers.start}} 
```

# sql-server - cte 具有特定起点和内部连接的递归查询

> ID：14969355
> 
> 赞同：1
> 
> 时间：2013-02-19T23:09:01.917
> 
> 标签：sql-server, sql-server-2008, tsql, jdbctemplate

可以说我有以下架构：

```
person (person_id, person_account, name)
relationships (person_id, father_id)
purchases(person_account, total, type) 
```

免责声明：我没有设计这个模式，我知道这很糟糕，所以我很抱歉。这也是一个例子，这要复杂得多。另请注意，这是我将在 JDBCTemplate 中使用的查询，这就是我包含该标记的原因。

现在我想得到`count`一个人的购买，他或她儿子的购买和他们儿子的购买等等。我想要最初的人的具体起点。

与我迄今为止看到的示例不同的几件事：

1.  一个特定的起点（假设它是`person_account`）。
2.  该表`purchases`没有`person_id`字段，因此使事情复杂化。
3.  我想要一个`count`而不是其他的东西。
4.  我想按`type`of过滤`purchase`。
5.  由于`father_id`关系在另一个表中，这意味着必须进行连接。这又是可怕的，但我无法更改数据库以在表中包含一个`father_id`字段。`person`
6.  如果一个人没有父亲，则`relationships`表中没有条目。这会让事情变得更加复杂。

现在我已经阅读了这些示例，并且我了解了其中的一些：如何在查询[SQL Server 递归查询](https://stackoverflow.com/questions/3916597/sql-server-recursive-query?rq=1)[http://msdn.microsoft.com/en-us/library](http://msdn.microsoft.com/en-us/library/ms186243.aspx)
[中使用递归获取父级的所有子级及其子级](https://stackoverflow.com/questions/13857329/how-to-get-all-children-of-a-parent-and-then-their-children-using-recursion-in-q)[/ms186243.aspx](http://msdn.microsoft.com/en-us/library/ms186243.aspx)

但是，我在理解起点和终点时遇到了问题。我的起点可能有一个父亲，所以不能为空。我的端点应该从基本上`purchases`没有条目的人那里获得。`relationships`

所以我在想的是：

```
declare @id int = 234 

;with CTEexample as (
     select p.person_account, p.person_id, p.type, r.father_id from purchases as s
         join person p on p.person_account = s.person_account
         join relationships r on r.person_id = p.person_id
         where r.person_id = @id
     union all
     select p.person_account, p.person_id, p.type, r_father_id from purchases as s
         join person p on p.person_account = s.person_account
         join relationships r on r.person_id = p.person_id
         join CTEexample c on p.person_id = r.father_id
 )
 select count(*) from CTEexample
      where type = 's' 
```

但是，它根本不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:24:00.317

您有一个非常详细的问题，但我的猜测是您在递归 CTE 中的谓词正在造成严重破坏。很多时候，你需要用递归和寻找树来做两件重要的事情：

1.  您需要知道您在“位置”上的级别（在我的示例中为 pos）
2.  您需要从递归中的位置确定关系以使递归有意义。否则，您将再次显示相同的值，而没有真正使用它可以做的递归功能。

这是一个可能适用于您的示例：

1.  会给你一个层次结构
2.  将找到一棵树的最远梯级（最低位置）
3.  将后代和孩子的订单添加在一起。

递归的最大好处不是一层或两层，而是当你进行 5 层或更多层时，它有能力告诉表达式你想要它的哪一部分。当我做递归时，我通常会做 2 个 cte，一个做递归，另一个做递归，然后给我看。否则，每个人都会带着各个层次的等级返回。除非你真的想要那样，否则你应该用一个窗口表达式来限制它。

我希望这会有所帮助，有时您必须暂时根据自己的情况定制递归 CTE：

```
Declare @table table ( PersonId int identity, PersonName varchar(512), Account int, ParentId int, Orders int);

insert into @Table values ('Brett', 1, NULL, 1000),('John', 1, 1, 100),('James', 1, 1, 200),('Beth', 1, 2, 300),('John2', 2, 4, 400);

select 
    PersonID
,   PersonName
,   Account
,   ParentID
from @Table

; with recursion as 
    (
    select 
        t1.PersonID
    ,   t1.PersonName
    ,   t1.Account
    --, t1.ParentID
    ,   cast(isnull(t2.PersonName, '')
            + Case when t2.PersonName is not null then '\' + t1.PersonName else t1.PersonName end
            as varchar(255)) as fullheirarchy
    ,   1 as pos
    ,   cast(t1.orders + 
            isnull(t2.orders,0) -- if the parent has no orders than zero
            as int) as Orders
    from @Table t1
        left join @Table t2 on t1.ParentId = t2.PersonId
    union all
    select 
        t.PersonID
    ,   t.PersonName
    ,   t.Account
    --, t.ParentID
    ,   cast(r.fullheirarchy + '\' + t.PersonName as varchar(255))
    ,   pos + 1  -- increases
    ,   r.orders + t.orders
    from @Table t
        join recursion r on t.ParentId = r.PersonId
    )
, b as 
    (
    select *, max(pos) over(partition by PersonID) as maxrec  -- I find the maximum occurrence of position by person
    from recursion
    )
select *
from b
where pos = maxrec  -- finds the furthest down tree
-- and Account = 2  -- I could find just someone from a different department 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:02:54.480

保持递归简单（其他人更容易管理）并使用它来获取关系。从那里，您可以加入 Person 以获取帐号，然后是 Purchases。

```
DECLARE @PersonID INT = 1

;WITH Family (PersonID, FatherID) AS (
  SELECT p.PersonID, null
  FROM Person p
  WHERE p.PersonID = @PersonID

  UNION ALL

  SELECT p.PersonID, r.FatherID
  FROM Person p
  INNER JOIN Relationships r
    ON r.PersonID = p.PersonID -- Me
  INNER JOIN Family f
    ON f.PersonID = r.FatherID -- Father
)
SELECT *
FROM Family f
JOIN Person p
  ON p.PersonID = f.PersonID
JOIN Purchases ps
  ON ps.PersonAccount = p.PersonAccount
WHERE ps.Type is null 
```

[SQLFiddle](http://www.sqlfiddle.com/#!3/03a70/8)

# iphone - 导航栏与状态栏重叠

> ID：14969356
> 
> 赞同：3
> 
> 时间：2013-02-19T23:09:04.663
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我在`iOS 6.0`&上面临一个非常奇怪的问题`iOS 6.0.1`。

每当我从任何视图控制器呈现模态视图然后关闭该模态视图时，我的父视图控制器的导航栏（从我呈现模态视图的位置）与状态栏重叠。这在`iOS 6.0`& `iOS 6.1`Simulators 上运行良好，但在设备上它搞砸了。

我的**Xcode**版本是 4.6。

这就是我展示我的模态的方式：

```
UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:iViewController];
[aNavigationController.navigationBar setBarStyle:UIBarStyleBlack];
[self presentModalViewController:aNavigationController animated:YES];
[aNavigationController release]; 
```

这就是我解雇我的模态的方式：

```
[self dismissModalViewControllerAnimated:YES]; 
```

请在关闭模式后查看我的导航栏的附加屏幕截图：

![在此处输入图像描述](../Images/1730d2dfdc6f56a702d952060b243e0b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:37:17.483

我把它修好了。这是因为当我的 RootViewController 启动时，它会延迟旋转直到动画完成。完成后，它会再次允许旋转。问题是它在所有方面（包括肖像）都返回 NO。视图显示得很好，但是当我展示一个模态并返回时，视图几何图形被破坏了。一旦我将其更改为即使在动画期间也为肖像模式返回 YES，问题就消失了。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)iOrientation {
    return (iOrientation == UIInterfaceOrientationPortrait);
} 
```

# ruby-on-rails - 最佳实践：将模型镜像到远程存储

> ID：14969364
> 
> 赞同：0
> 
> 时间：2013-02-19T23:10:18.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要为我在 Rails 应用程序中使用的一些模型实现透明镜像。这意味着在模型上调用远程 API `create/update/delete`。

我的方法是用这种方式重写模型的各个方法，并使用 ApiHelper 调用远程 api（参见`project.rb`模型代码）：

```
include ApiHelper
class Project < ActiveRecord::Base
  belongs_to :user
   has_many :folders
   attr_accessible :name

   def create
     super
     ApiHelper.call 'Model.Create', {:name=>self.name}
   end
end 
```

是否有另一种“Rails 方式”来做到这一点？

# c++ - 创建 Visual Studio 属性表以简化 C++ 库的使用

> ID：14969365
> 
> 赞同：11
> 
> 时间：2013-02-19T23:10:20.630
> 
> 标签：c++, visual-studio, visual-c++, visual-studio-2012, libraries

我正在构建一个 C++ 库（一组头文件、导入库和 DLL）。我想让任何想要使用它的开发人员尽可能轻松地使用这个库。特别是我不希望这个库的使用者不得不为他们项目的所有不同配置（调试|发布和 x86/x64/ARM）手动更改头文件路径、库路径和链接库。我知道我可以使用属性表来做到这一点。为此，我创建了 6 个不同的属性表（每个配置一个）。每张表如下所示（仅列出 x86|Debug 版本，假设宏 INCLUDEPATH 和 LIBPATH 已正确定义）：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <_PropertySheetDisplayName>MyCPPLib, 1.0</_PropertySheetDisplayName>
  </PropertyGroup>
  <ItemDefinitionGroup>
    <ClCompile>
      <AdditionalIncludeDirectories>$INCLUDEPATH;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
    </ClCompile>
    <Link>
      <AdditionalLibraryDirectories>$(AdditionalLibraryDirectories);$LIBPATH\x86\Debug</AdditionalLibraryDirectories>
      <AdditionalDependencies>MyCPPLib.lib;$(AdditionalDependencies)</AdditionalDependencies>
    </Link>
  </ItemDefinitionGroup>
</Project> 
```

我想知道是否可以根据用户的活动配置创建一个可以处理所有 6 个配置的单个 props 文件？该文件的外观如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T18:52:54.197

您可以将库二进制文件安装在以下结构中：

```
<toplevelsdkdir>
  |-> lib
       |-> x86
            |-> Debug
            |-> Release
       |-> x64
            |-> Debug
            |-> Release 
```

然后像这样创建一个项目范围的 props 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <_PropertySheetDisplayName>MyCPPLib, 1.0</_PropertySheetDisplayName>
  </PropertyGroup>
  <ItemDefinitionGroup>
    <ClCompile>
      <AdditionalIncludeDirectories>$INCLUDEPATH;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
    </ClCompile>
    <Link>
      <AdditionalLibraryDirectories>$(AdditionalLibraryDirectories);$LIBPATH\$(PlatformTarget)\$(Configuration)</AdditionalLibraryDirectories>
      <AdditionalDependencies>MyCPPLib.lib;$(AdditionalDependencies)</AdditionalDependencies>
    </Link>
  </ItemDefinitionGroup>
</Project> 
```

如果您愿意，可以将变量 INCLUDEPATH 和 LIBPATH 替换为从注册表中读取的信息（您可以在安装期间将其放置在其中）：

```
<ClCompile>
      <AdditionalIncludeDirectories>$([MSBuild]::GetRegistryValue(`HKEY_LOCAL_MACHINE\Software\MyCompany\MySDK\v1`, `InstallDir`))\INCLUDE;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
</ClCompile> 
```

# php - 如何使用正则表达式解析此 HTML？

> ID：14969368
> 
> 赞同：1
> 
> 时间：2013-02-19T23:10:50.537
> 
> 标签：php, regex

我正在尝试编写一个正则表达式来从 HTML 源中提取 URL 列表的`href`和`anchor`文本。`anchor`文本可以是任何值。

HTML部分如下：

```
<div class="links"><a rel="nofollow" target="_blank" href="http://url1.com" class="get-all">URL1</a><a rel="nofollow" target="_blank" href="http://url2.com" class="get-all">This is Url-2</a><a rel="nofollow" target="_blank" href="http://url3.com" class="get-all">This is Url-3</a><a rel="nofollow" target="_blank" href="http://url4.com" class="get-all">Sweet URL 4</a></div> 
```

我尝试了以下正则表达式，但它不起作用，因为它在`</a>`标记之前抓取所有内容并失败。

```
preg_match_('/<a rel="nofollow" target="_blank" href="(.*)" class="see-all">(.*)<\/a>/', $source , $website_array); 
```

提取所需数据的有效正则表达式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T23:15:57.650

如果你一定要知道，这个表达式是贪心的，所以它很可能匹配第一个锚点的开始和最后一个锚点的结束；修饰符将`/U`修复：

```
preg_match('/<a rel="nofollow" target="_blank" href="(.*)" class="see-all">(.*)<\/a>/U', $source , $website_array); 
```

*请注意，这[`pcre.backtrack_limit`](http://www.php.net/manual/en/pcre.configuration.php#ini.pcre.backtrack-limit)适用于非贪婪模式。*

使用前瞻集可能会提供更好的性能：

```
preg_match('/<a rel="nofollow" target="_blank" href="([^"]*)" class="see-all">([^<]*)<\/a>/', $source , $website_array); 
```

*这会给锚本身内部的标签带来麻烦。*

由于上述限制，我会认真考虑使用 HTML 解析器：

```
$d = new DOMDocument;
$d->loadHTML($source);
$xp = new DOMXPath($d);
foreach ($xp->query('//a[@class="see-all"][@rel="nofollow"][@target="_blank"]') as $anchor) {
    $href = $anchor->getAttribute('href');
    $text = $anchor->nodeValue;
} 
```

[**演示**](http://codepad.viper-7.com/20CbI9)

这将愉快地以不同的顺序处理属性，并使您能够在内部进一步查询等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:16:30.303

尝试

```
preg_match_all('/<a[^>]+href="([^"]+)"[^>]*>([^>]+)<\/a>/is', $source , $website_array); 
```

它将匹配所有链接并返回一个包含信息的数组。笔记：

[^"] - 匹配除 " 之外的任何字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:18:21.223

虽然使用正则表达式解析 HTML 通常是一个坏主意（我建议查看 DOMDocument 类以获得更好的解决方案），但它可以用于某些情况下，您对要提取的内容有一个非常具体的想法，并且可以确保在在所有情况下，该变量文本实际上都不会破坏您的正则表达式。

对于您的情况，您可以尝试：

```
$pattern = '#<a rel="nofollow" target="_blank" href="(.*)" class="get-all">(.*)</a>#U';
preg_match_all($pattern, $source, $website_array); 
```

请注意末尾的不贪婪修饰符 ( `U`)。仅匹配可能的最小匹配非常重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:24:39.813

或者，您可以这样做：

```
<?php
$html = <<<HTML
<div class="links"><a rel="nofollow" target="_blank" href="http://url1.com" class="get-all">URL1</a><a rel="nofollow" target="_blank" href="http://url2.com" class="get-all">This is Url-2</a><a rel="nofollow" target="_blank" href="http://url3.com" class="get-all">This is Url-3</a><a rel="nofollow" target="_blank" href="http://url4.com" class="get-all">Sweet URL 4</a></div>
HTML;

$xml = new DOMDocument();
@$xml->loadHTML($html);

$links=array();
$i=0;
//Get all divs
foreach($xml->getElementsByTagName('div') as $divs) {
    //if this div has a class="links"
    if($divs->getAttribute('class')=='links'){
        //loop through this div
        foreach($xml->getElementsByTagName('a') as $a){
            //if this a tag dose not have a class="get-all" continue to next
            if($a->getAttribute('class')!='get-all')
            continue;

            //Assign values to the links array
            $links[$i]['href']=$a->getAttribute('href');
            $links[$i]['value']=$a->nodeValue;
            $i++;
        }

    }
}

print_r($links);
/*
Array
(
    [0] => Array
        (
            [href] => http://url1.com
            [value] => URL1
        )

    [1] => Array
        (
            [href] => http://url2.com
            [value] => This is Url-2
        )

    [2] => Array
        (
            [href] => http://url3.com
            [value] => This is Url-3
        )

    [3] => Array
        (
            [href] => http://url4.com
            [value] => Sweet URL 4
        )

)
*/
?> 
```

# drupal-7 - Drupal 7“管理”页面继承前端主题 CSS

> ID：14969369
> 
> 赞同：0
> 
> 时间：2013-02-19T23:10:51.523
> 
> 标签：drupal-7, drupal-themes

我试图不使用我的子主题 CSS 文件影响 Drupal 7 管理页面的样式。有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:05:01.760

他们可能在管理界面和您的网站上具有相同的主题。您必须为管理界面设置不同的主题`http://yoursite/admin/appearance`

# ios - 如何使用两个#import？

> ID：14969370
> 
> 赞同：0
> 
> 时间：2013-02-19T23:11:00.513
> 
> 标签：ios, objective-c, xcode, import, uialertview

我正在制作一个应用程序，其中视图控制器需要在用户按下主页按钮时关闭 UIAlertView。因此我需要通过应用程序委托来做到这一点。这个视图控制器的类还需要应用程序委托来处理许多其他事情，所以我在它的头文件中有一个#import。到目前为止，我一直在应用程序委托中使用 @class 来做其他事情，但现在我需要一个 #import 以便我可以在视图控制器上调用适当的方法。如何避免#import 循环？还有另一种解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:13:57.807

除非您确实需要头文件中的完整定义，否则请`@class`在 .h 文件和`#import`实际调用该方法的 .m 文件中使用。

您真正需要`#import`在头文件中使用的唯一一次是导入的头文件定义了您的超类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T23:29:10.157

我假设您关心循环的原因是因为您的应用程序委托对您的控制器了解很多，并且您的控制器现在需要在您的应用程序委托上调用一些方法。我不喜欢繁重的应用程序委托，所以我倾向于尽可能多地卸载服务和实用程序类。如果应用程序委托绝对必须做某事，则创建一个单例服务类，并让您的应用程序委托将自己设置为该服务的委托（当然是通过协议）。现在您的控制器可以调用此服务来执行通常需要您调用应用程序委托的操作。

另外请记住，您可以使用通知中心来侦听应用程序委托中的许多事件：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationDidEnterBackground:)
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:nil]; 
```

因此，您可能根本不必与应用程序代表交谈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T10:30:35.257

为避免#import 循环，您必须遵循以下示例

假设您有 2 个文件，如下所示

ABC.h ABC.m & XYZ.h XYZ.m

现在您可以在“ABC.h”中导入“XYZ.h”，只需将#import XYZ.h 放在 ABC.h 的顶部即可

但是如果你想在“XYZ.h”中导入“ABC.h”，那么你不能使用“#import”来导入它。这将创建循环。

为了避免这种情况，把@class ABC; 在“XYZ.h”中的@interface XYX 正上方，然后将“#import ABC.h”放入“XYZ.m”中

这将像一个魅力:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:15:07.560

`#import`将防止多个包含。所以不用担心。在理想的世界中，只需遵循约定，您将`@class`在头文件中使用在实现文件中导入所需的类。

# c# - EF 选择 <= 5 的最大值

> ID：14969374
> 
> 赞同：1
> 
> 时间：2013-02-19T23:11:39.670
> 
> 标签：c#, linq, asp.net-mvc-4, entity-framework-5

我不知道如何使用 EF 根据最大​​值但小于或等于 5 来选择数据库行。

这是我的代码，但这只会选择一个值，而不是整行：

```
Prices pr = db.Prices.Where(s => s.numdays <= totaldays).Max(s=>s.numdays) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:27:54.107

怎么样：

```
Price p = db.Prices
    .Where(p => p.numdays <= totaldays)
    .OrderByDescending(p => p.numdays)
    .First() 
```

# varnish - 清漆重定向域根

> ID：14969378
> 
> 赞同：0
> 
> 时间：2013-02-19T23:12:01.923
> 
> 标签：varnish

使用清漆，如何重定向域根目录（例如[http://mydomain.com/](http://mydomain.com/)），但为其他所有内容设置后端？（例如[http://mydomain.com/everythingelse](http://mydomain.com/everythingelse)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:31:43.993

您可以在 vcl_recv 中使用下一个 URL 匹配：

```
if (req.url == "/")
{
    #redirect actions
}
else
{
    set req.backend = somebackendname;
} 
```

# machine-learning - 这种“非同质”分类任务叫什么

> ID：14969391
> 
> 赞同：0
> 
> 时间：2013-02-19T23:13:19.087
> 
> 标签：machine-learning, classification

当您不知道正确的术语时，很难搜索：-(

我被要求查看一个潜在的分类应用程序，其中**并非所有可用数据都与每个分类相关，但所有类型的数据都与至少某些项目类别的分类相关**。

例如，您可以想象一个考古挖掘机器人，它需要对它发现的所有东西进行绝对分类。“绝对一切”是指它筛选的土壤、粘土和沙子的类型，它发现的不同类型的岩石、鹅卵石和陶片，它发现的真菌、细菌和土壤生命的类型，以及所有可能更直接地与该地区以前的人类活动有关。

所以你可能有 DNA 或其他分析来告诉你这些骨头是人的还是动物的，这也适用于细菌和真菌，但根本不适用于沙子、粘土和石头。请注意，任何类型的数据始终可用于分析然后分类的每个项目，但当它与项目分类无关时，可能是某种嘈杂的空值。即没有依据预先分类，选择性地生成相关数据。所以**数据是统一生成的，但相关性不统一。这就是我所说的“非同质”。**

如果我能找出这叫什么，那么我可能有更好的机会找到解决问题的方法以及哪些分类技术可能是合适的。“它被称为 X 并且在 [link] 上有关于它的建设性讨论”形式的答案会很棒:-)

# ios - 如何模拟应用程序在后台被杀死？

> ID：14969396
> 
> 赞同：40
> 
> 时间：2013-02-19T23:13:55.950
> 
> 标签：ios, ios-simulator

我正在尝试验证我的应用程序（App1）在启动另一个应用程序（App2）后被系统关闭时是否正常运行。有没有办法模拟或强制这种行为？

在 App2 运行时告诉模拟器模拟内存警告不会做任何事情，直到 App1 回到前台。从调试器中杀死 App1 会模拟相同的应用程序事件序列吗？

编辑：我的应用程序在启动第二个应用程序来处理文件时被置于后台。然后第二个应用程序重新启动我的应用程序，我正在尝试验证我的应用程序在第二个应用程序执行时系统关闭它时是否正常运行。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-19T23:22:34.253

## iOS 14.5 及更高版本

在设备上启用**设置**-**开发人员**-**快速应用终止**：

> [![设置 - 开发者 - 快速应用终止截图](../Images/dac4749f9314faa56948bdbbf1ac6c7c.png)](https://i.stack.imgur.com/rMMoY.png)

当您的应用程序处于后台时，这将终止而不是暂停您的应用程序。这主要用于测试状态恢复逻辑。

* * *

## iOS 14.4 及更早版本

正如其他答案所指出的，您可以通过强制退出或停止调试器来立即结束您的应用程序。在这些情况下，您的应用不会收到任何警告。

如果您想测试您的`applicationWillTerminate`方法，请在 .plist 中设置`UIApplicationExitsOnSuspend`为`YES`，然后切换应用程序或按主页按钮。确保将密钥设置为布尔值，而不是字符串“YES”。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-19T23:16:41.880

是的，如果您的应用程序已经在后台。在后台被系统杀死的应用程序在没有警告的情况下终止——没有调用应用程序委托方法，也没有进行状态更改——这正是在应用程序处于后台时执行调试器停止时发生的情况。（这假设您已经通过单击模拟器上的主页按钮或 Cmd-Shift-H 将应用程序置于后台）

（正如@Inafziger 所说，您也可以通过使用模拟器的界面强制退出正在运行的应用程序来获得相同的效果。）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-04-30T14:35:52.493

我知道这是几年前的事了，但如果现在有人正在研究这个，我想分享一下。尝试以下步骤：

1.  在设备上运行应用程序
2.  按一次主页按钮进入主屏幕
3.  按住电源按钮 5 秒钟，直到看到电源关闭滑块
4.  按住主页按钮 5 秒钟

如果您从 Xcode 运行应用程序，您应该会看到`Message from debugger: Terminated due to signal 9`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-19T23:17:16.687

你应该能够：

*   点击主页按钮，带您进入主屏幕
*   点击主页按钮两次（使用模拟器中的键盘快捷键）
*   触摸并按住底部的图标，直到它开始摆动
*   点击破折号圈`-`将其从内存中删除

这为您提供了进入后台的应用程序委托方法等。这就是它在 iOS 6 及更低版本中的工作方式。

# visual-c++ - 运行 vcvars32.bat 后如何重置环境

> ID：14969399
> 
> 赞同：5
> 
> 时间：2013-02-19T23:14:05.873
> 
> 标签：visual-c++, command-line, batch-file

我正在编写一个批处理文件来使用 Visual C++ 运行一些构建。我想“撤消”脚本末尾的 vsvars32.bat/vcvarsXX.bat 更改，以便我在脚本运行之前保持环境不变。

示例 1 - 使用 vsvars32.bat

```
call %VS100COMNTOOLS%vsvars32.bat
devenv myProject.sln /Build "Debug|Win32"
:: Now undo vsvars32.bat 
```

示例 2 - 使用 vcvars32.bat 和 vcvars64.bat

```
<path to VC bin>vcvars32.bat
:: cmd line build calls for 32 bit application
:: Now undo vcvars32.bat

<path to VC bin>amd64\vcvars64.bat
:: cmd line build calls for 64 bit application
:: Now undo vcvars64.bat 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T00:54:10.730

解决方案很简单 - SETLOCAL 加上 ENDLOCAL。键入`HELP SETLOCAL`或`HELP ENDLOCAL`以获取有关使用情况的更多信息。

示例 1：

```
setlocal
call %VS100COMNTOOLS%vsvars32.bat
devenv myProject.sln /Build "Debug|Win32"
endlocal 
```

示例 2：

```
setlocal
<path to VC bin>vcvars32.bat
:: cmd line build calls for 32 bit application
endlocal

setlocal    
<path to VC bin>amd64\vcvars64.bat
:: cmd line build calls for 64 bit application
endlocal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T13:12:22.280

如果您的 build.bat 将由以下方式调用，则会更简单：

```
cmd.exe /c build.bat 
```

这将：

1.  使用当前环境的副本创建子进程。
2.  修改这个环境。
3.  在修改后的子环境中运行构建。
4.  在进程退出时丢弃子环境。

因此，当前环境不会发生任何变化，也不需要清理。

# perl - git-svn fetch 在大小 > LONG_MAX 的文件上失败

> ID：14969400
> 
> 赞同：2
> 
> 时间：2013-02-19T23:14:07.047
> 
> 标签：perl, git, svn, git-svn

我正在尝试使用 git-svn 从颠覆中迁移。

现在我被失败阻止了

```
$ git svn fetch 
```

在 Git.pm 的第 900 行失败（来自 git-svn 包）

```
...
    my $read = read($in, $blob, $bytesToReadd); 
```

在名为 cat_blob() 的子文件中，问题是该文件是 2567089913 字节，当 git-svn 到达 2147484672 时，它会因消息“Offset outside of string”而窒息。cat_blob 尝试将整个文件保存在一个变量中，然后再将其写入磁盘。

我尝试将文件的写入从 sub 的末尾移动到读取循环内，

（这是我修改后的代码的样子）

```
890         my $size = $1;
891 
892         my $blob;
893         my $bytesRead = 0;
894 
895         while (1) {
896                 my $bytesLeft = $size - $bytesRead;
897                 last unless $bytesLeft;
898 
899                 my $bytesToRead = $bytesLeft < 1024 ? $bytesLeft : 1024;
900                 print $size, " ", $bytesLeft, " ", $bytesRead, "\n";
901                 my $read = read($in, $blob, $bytesToReadd);
902                 unless (defined($read)) {
903                         $self->_close_cat_blob();
904                         throw Error::Simple("in pipe went bad");
905                 unless (print $fh $blob) {
906                         $self->_close_cat_blob();
907                         throw Error::Simple("couldn't write to passed in filehandle");
908         }
909 
910                 }
911 
912                 $bytesRead += $read;
913         } 
```

但现在我得到一个新错误：

```
Checksum mismatch: root/Instruments/MY_DIR/MASSIVE_FILE.exe bca43a9cb6c3b7fdb76c460781eb410a34b6b9ec
expected: 52daf59b450b82a541e782dbfb803a32
     got: d41d8cd98f00b204e9800998ecf8427e 
```

我不是 perl 人。perl 是否在 print 语句中添加了额外的废话？有什么想法可以通过校验和吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:29:37.900

当您修复缩进时，错误变得明显。

```
890         my $size = $1;
891 
892         my $blob;
893         my $bytesRead = 0;
894 
895         while (1) {
896                 my $bytesLeft = $size - $bytesRead;
897                 last unless $bytesLeft;
898 
899                 my $bytesToRead = $bytesLeft < 1024 ? $bytesLeft : 1024;
900                 print $size, " ", $bytesLeft, " ", $bytesRead, "\n";
901                 my $read = read($in, $blob, $bytesToReadd);
902      --->       unless (defined($read)) {
903                     $self->_close_cat_blob();
904                     throw Error::Simple("in pipe went bad");
905      --->           unless (print $fh $blob) {
906                         $self->_close_cat_blob();
907                         throw Error::Simple("couldn't write to passed in filehandle");
908                     }
909 
910                 }
911 
912                 $bytesRead += $read;
913         } 
```

`print`永远达不到。只需将 905-909 移至 912。

哦，你在第 901 行拼错`$bytesToRead`了`$bytesToReadd`。编译器没有选择它吗？

您应该使用大于 1024 的块大小。64*1024 会快得多。

# colors - 如何使用处理语言按下鼠标更改颜色

> ID：14969402
> 
> 赞同：1
> 
> 时间：2013-02-19T23:14:17.057
> 
> 标签：colors, widget, switch-statement, processing

您好，所以对于程序，我必须创建 3 个按钮，并且当鼠标按下每个按钮时，颜色必须改变，我非常纠结于如何在使用处理按下鼠标时将按钮切换为不同的颜色语言，有什么建议吗？？到目前为止，这是我的代码！

小部件的主程序

```
 PFont stdFont;
     final int EVENT_BUTTON1=1;
   final int EVENT_BUTTON2=2;
   final int EVENT_BUTTON3=3;
   final int EVENT_NULL=0;
   Widget widget1, widget2,widget3;
   ArrayList widgetList;

  void setup(){
  stdFont=loadFont("AbadiMT-CondensedLight-48.vlw");
  textFont(stdFont);

 widget1=new Widget(100, 100, 180, 40,
"RED", color(100),
stdFont, EVENT_BUTTON1);
widget2=new Widget(100, 200, 180, 40,
"GREEN", color(100),
stdFont, EVENT_BUTTON2);                          
size(400, 400);
widget3=new Widget(100, 300, 180, 40,
"BLUE", color(100),
stdFont, EVENT_BUTTON2);                          
size(400, 400);

 widgetList = new ArrayList();
widgetList.add(widget1); widgetList.add(widget2); widgetList.add(widget3);

 }

 void draw(){
  for(int i = 0; i<widgetList.size(); i++){
Widget aWidget = (Widget)widgetList.get(i);
aWidget.draw();
  }

  }

void mousePressed(){
 int event;

  for(int i = 0; i<widgetList.size(); i++){
Widget aWidget = (Widget) widgetList.get(i);
   event = aWidget.getEvent(mouseX,mouseY);
   switch(event) {
     case EVENT_BUTTON1:
       println("button 1!");
       break;
     case EVENT_BUTTON2:
       println("button 2!");
       break;

       case EVENT_BUTTON3:
       println("button 3!");
       break;
   }  
 }
}

main widget class

 class Widget {
 int x, y, width, height;
 String label; int event;
   color widgetColor, labelColor;
 PFont widgetFont;

  Widget(int x,int y, int width, int height, String label,
   color widgetColor, PFont widgetFont, int event){
   this.x=x; this.y=y; this.width = width; this.height= height;
   this.label=label; this.event=event; 
  this.widgetColor=widgetColor; this.widgetFont=widgetFont;
   labelColor= color(0);
  }
 void draw(){
  fill(widgetColor);
  rect(x,y,width,height);
  fill(labelColor);
  text(label, x+10, y+height-10);
}
 int getEvent(int mX, int mY){
 if(mX>x && mX < x+width && mY >y && mY <y+height){
    return event;
 }
 return EVENT_NULL;
}
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:57:54.563

听起来像是家庭作业。一个通用的答案：

```
class RectangularThing {
  float x, y, w, h;
  color boxColor = 0;
  [...]
  boolean over(float mx, float my) {
    // return "true" if mx/my is inside this rectangle,
    // otherwise return "false"
  }
  void setColor(color c) {
    boxColor = c;
  }
  void draw() {
    stroke(boxColor);
    fill(boxColor);
    rect(x,y,w,h);
  }
}

[...]

ArrayList<RectangularThing> allmythings;

void setup() {
  ...
  allmythings = new ArrayList<RectangularThing>();
  ...
}

void draw() {
  // this kind of looping is the same as
  // "for(int i=0, last=allmythings;i<last;i++) { 
  //    RectangularThing t = allmythings[i];
  //    ..." except that it's less code and easier
  // to read. If you're just iterating without
  // needing the iteration counter, this is nicer.
  for(RectangularThing t: allmythings) {
    t.draw();
  }
} 

void mouseClicked() {
  for(RectangularThing t: allmythings) {
    if(t.over(mouseX,mouseY)) {
      t.setColor(...);
    }
  }
  redraw();
} 
```

所以：让事物负责绘制自己，并为它们提供正确执行此操作所需的所有属性。然后在需要时根据代码或用户交互更改这些属性。

# jquery - jQuery可拖动，鼠标位置问题具有可放置约束

> ID：14969406
> 
> 赞同：0
> 
> 时间：2013-02-19T23:14:34.327
> 
> 标签：jquery

目前我正在尝试使用 jQuery 并构建一个拖放环境。我设法让大部分工作正常进行。但是，当我尝试将 2 个以上的项目拖入放置区域时，后续项目放置的 Y 位置放置将始终大于前一个项目放置的 Y 位置放置。

有谁知道问题出在哪里？先感谢您...

PS：当我通过在可放置区域大于窗口大小的一侧使用滚动条快速拖动它来测试此 UI 时，拖动项将设法逃脱 jQuery 包含集。最终在后台隐藏或脏元素。是否有更好的方法和更清洁的方法来编写拖放 Web 环境？

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link rel="stylesheet" type="text/css" href="http://stkxp/metasphere/fac/home/home.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <script>
        $(
            function(){
                $("#menu").draggable();

                $(".drag").draggable(
                    {helper:'clone'}
                );

                $("#drop").droppable(                        
                    {
                        accept:'.drag',
                        drop:function(event,ui){

                                newID = $.datepicker.formatDate('@', new Date() );

                                $(this).append(                                        
                                    $(ui.draggable).clone().attr(
                                        {
                                            id:newID
                                        }
                                    )
                                );

                                $("#"+newID).css(
                                    {                                            
                                        top: event.pageY +"px",
                                        left: event.pageX-this.offsetLeft +"px"
                                    }
                                );

                                $("#"+newID).addClass("node");    

                                $("#"+newID).removeClass("drag");

                                $("#"+newID).draggable(
                                    {
                                        containment:$("#drop")
                                    }
                                );

                            }
                    }
                )

            }
        );
    </script>

    <style>        
        #drop{
            width:55%;
            min-width:400px;    

            min-height:1000px;

            float:left;
            border:1px solid blue;    
        }
        #property{
            width:24%;
            min-width:235px;        

            float: left;
            border:1px solid black;                
        }            
    </style>        
</head>
<body>
    <div id="drop"></div>
    <div id="property">            
        <div class="drag">-> Item 1</div>                                 
    </div>        
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:59:32.673

没关系找到解决方案，通过将克隆设置为具有绝对位置来解决它

# jsf-2 - p:commandButton 呈现的属性在 ajax 更新后不起作用（Primefaces 3.5）

> ID：14969409
> 
> 赞同：10
> 
> 时间：2013-02-19T23:14:45.813
> 
> 标签：jsf-2, primefaces

我多次查看我的代码并没有发现有关它的问题。

我对 p:commandButton 呈现的属性有疑问。即使 getter 方法返回 false，p:commandButton 也会始终显示。这发生在 ajax 更新之后。

我有 ap:selectOneMenu 和 ap:ajax event="change"，它设置 MB 并更新 ap:commandButton（具有基于布尔 getter 的渲染属性）和其他两个组件：第二个 p:selectOneMenu 和 ap:outputLabel。

当我更改第一个 p:selectOneMenu 选择时，第二个 p:selectOneMenu 和 p:outputLabel 渲染没有问题，但 p:commandButton 始终显示。渲染的属性未更新。

如果我刷新浏览器或者如果我设置了 update="@form" p:commandButton 会正确显示/隐藏。但请注意，所有组件都在同一个容器中。

我究竟做错了什么？编码：

```
<p:selectOneMenu id="cmbPais" value="#{pessoaController.selected.endereco.pais}">
    <f:selectItems value="#{paisController.itemsSelectOne}"/>
    <p:ajax event="change" update="cmbEstado,btnBuscaPeloEndereco,test"/>
</p:selectOneMenu>

<p:outputLabel id="test" value="#{pessoaController.selected.endereco.ok}"/>

<p:commandButton id="btnBuscaPeloEndereco" icon="ui-icon-correios" type="button" onclick="dlgCEP.show();" rendered="#{pessoaController.selected.endereco.ok}"/>

<p:selectOneMenu id="cmbEstado" value="#{pessoaController.selected.endereco.estado}">
    <f:selectItems value="#estadoController.getItemsSelectOne(pessoaController.selected.endereco.pais)}"/>
    <f:ajax event="change" render="cmbCidade" />
</p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T13:14:24.413

您只能对始终呈现的组件进行 ajax 更新（即，当它没有`rendered`属性时）。JSF ajax 引擎不支持添加/删除 HTML 元素。它只支持 HTML 元素的更改。

因此，将它包装在一个始终呈现的组件中，并改为使用 ajax 更新它。

```
<p:selectOneMenu id="cmbPais" value="#{pessoaController.selected.endereco.pais}">
    <f:selectItems value="#{paisController.itemsSelectOne}"/>
    <p:ajax event="change" update="cmbEstado,btnBuscaPeloEndereco,test"/>
</p:selectOneMenu>

<h:panelGroup id="btnBuscaPeloEndereco">
    <p:commandButton icon="ui-icon-correios" type="button" onclick="dlgCEP.show();" rendered="#{pessoaController.selected.endereco.ok}"/>
</h:panelGroup> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-29T12:02:51.487

如果您不想修改代码，可以使用 css 代替呈现的 ej：

```
<x:element style="#{condition ? 'visibility: hidden':' visibility: visible'}" /> 
```

编辑：某些用户可以撤消此操作，因此如果您的元素需要安全，请不要使用。但是，如果您只想以视觉目的隐藏/显示，您可以使用它。

# c# - VS2012 中的 Razor 和 Intellisense 未解决

> ID：14969413
> 
> 赞同：0
> 
> 时间：2013-02-19T23:14:58.223
> 
> 标签：c#, visual-studio, razor, ide, intellisense

```
@if (Request.IsAuthenticated && User.IsInRole("Administrators")
{
     <div id="sidebar">
        <div class="module">
        <ul class="menu">
                            <li>@Html.ActionLink("Home", "Index", "Home")</li>
                            <li>@Html.ActionLink("About", "About", "Home")</li>
                            <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                        </ul>
         </div>
         <div class="mainContent">
             Hello, @User.Identity.Name !
         </div>
     </div>
} 
```

在这段代码中，当我输入时，`@User.` 我看不到任何`User`类中可用的方法或属性列表，以便我自动完成调用。有人可以指导我解决此问题的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:22:16.027

看起来你错过了一个`)`之后`@if (Request.IsAuthenticated && User.IsInRole("Administrators")`

# user-interface - 摆脱 Web 应用程序中的弹出框

> ID：14969414
> 
> 赞同：1
> 
> 时间：2013-02-19T23:15:01.583
> 
> 标签：user-interface, web, popup

我正在尝试辞职一个 Web 应用程序。现在应用程序正在使用多个对话框，这似乎太刺激用户了。想知道是否有一种方法可以消除弹出框并可能使用右侧面板来实现？任何 UX/UI 示例，我可以从中获得一些见解或想法如何更好地设计界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:47:26.627

解决方案将根据您的应用程序的全部内容而有很大差异。花一些时间[阅读 UI 设计原则](http://sixrevisions.com/category/user-interface/)可以为您提供一套强大的技能和工具来解决这些问题。如果您已经走上这条路，并且准备好着手解决方案，为什么不看看一些内置于框架中的设计模式和约定，例如[Twitter Bootstrap](http://twitter.github.com/bootstrap/)、[Zurb Foundation](https://github.com/zurb/foundation)、[JQuery UI](http://jqueryui.com/)等？

您可能不需要这些框架附带的全部功能，但它们包含一组经过良好测试的 UI 模式，可以从中汲取灵感。

一般来说，弹出窗口和模式对话框会打断用户的流程。（而且它们很难在小屏幕上实现。）如果你真的需要引起用户的注意，打断是一件好事。如果那不是您的目标，请考虑如何解决问题。

*   如果您的弹出窗口是为了提醒您的用户，请尝试在页面/UI 上内嵌显示的内容。

*   如果您的弹出窗口用于收集用户输入，请尝试非模型弹出窗口（例如引导程序的弹出窗口）。更好的是，首先尝试找到消除收集用户输入需要的方法 - 理想，如果并非总是可能的话。

奖金回合：

我在[Little Big Details](http://littlebigdetails.com/)和[pttrns](http://pttrns.com/)上找到了一些很好的 UI 和设计模式灵感。在这些网站上没有关于代码的讨论，但首先关注交互模式，然后再考虑具体的实现方式是很有用的。您还会注意到，许多用于移动/小屏幕应用程序的设计模式有助于在大屏幕上设计 UI；小屏幕迫使您思考 UI 的哪些部分是真正必要的，哪些部分只是支持细节。

另外 - Smashing Magazine 上的这篇文章已经有几年的历史了，但我记得在其中发现了一些宝石：[40+ 有用的用户界面设计模式资源](http://www.smashingmagazine.com/2009/06/15/40-helpful-resources-on-user-interface-design-patterns/)

我希望这会有所帮助！

# java - 精灵，将位图存储在数组中

> ID：14969418
> 
> 赞同：2
> 
> 时间：2013-02-19T23:15:07.790
> 
> 标签：java, android, arrays, bitmap

现在我正在使用一张带有我所有精灵帧的表格，并使用 2 个矩形从表格中取出一个框架并将其绘制到画布上的目标矩形。但我想知道（就速度而言）是否在开始时获取每一帧并将其存储在位图数组中会更好，因为它肯定会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:24:50.157

我绝不是这方面的专家，但我最近一直在开发一种操纵动画精灵的工具。

如果我提前将所有帧加载到列表或数组中，我肯定会看到动画播放性能的提高。这也让我可以更轻松地按索引调用特定帧，或者做各种其他事情。

我正在使用类似于您描述的方法，它有两个缺点：

1.  源位图永远无法处理，将其与其他应用程序锁定；
2.  较大的精灵表无法全速播放。

我假设如果您开始存储所有帧而不是只存储一个帧，您将拥有更大的内存占用（但可能不会，因为您将在另一种情况下加载整个工作表）。

我很想从有更多经验的人那里听到更多关于这个主题的信息，但我发现一次加载所有帧肯定会得到更好的结果。

# asp.net-mvc - 部署后捆绑的 css 不显示... ASP.NET MVC4

> ID：14969420
> 
> 赞同：11
> 
> 时间：2013-02-19T23:15:13.010
> 
> 标签：asp.net-mvc, bundling-and-minification

在部署我的 MVC 应用程序时，.NET 4.5 框架正在捆绑和缩小我的 CSS。但是，生成的文件是空的，因此不应用 CSS 规则。在 Chrome 中，我收到`Resource interpreted as Stylesheet but transferred with MIME type text/plain`警告。在 IE9 中，我收到`CSS was ignored due to mime type mismatch`警告。

这就是我的 BundleConfig 中的内容

```
bundles.Add(
    new StyleBundle("~/Content/bootstrap").Include(
        "~/Content/bootstrap/bootstrap-responsive.css",
        "~/Content/bootstrap/bootstrap-editable.css",
        "~/Content/bootstrap/FileUpload.css")); 
```

这是我的布局头：

```
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=Edge" />
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    <link href="@ViewBag.StyleUrl" rel="stylesheet" type="text/css" />
    @Styles.Render("~/Content/bootstrap")
    <script src="~/scripts/libs/modernizr/modernizr-2.5.3.js" type="text/javascript"></script>
</head> 
```

额外的样式表用于基于我们管理工具中的配置动态加载的样式表。

当我在本地运行它时，或者如果我设置 debug="true"，那么我会得到我的个人文件，并且一切看起来都应该如此。如果我将这些硬编码到我的布局页面中，它们会显示得很好。我检查了 IIS 并查看了 CSS 的正确 MIME 类型（考虑到硬编码值有效，这很有意义）。我还检查以确保安装了“静态内容”角色服务，因为我在谷歌搜索中也遇到过。

有什么想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T01:12:50.657

捆绑包名称与文件系统上的文件夹名称相同，

将您的捆绑包更改为

```
bundles.Add(
new StyleBundle("~/Content/bootstrapBundle").Include(
    "~/Content/bootstrap/bootstrap-responsive.css",
    "~/Content/bootstrap/bootstrap-editable.css",
    "~/Content/bootstrap/FileUpload.css")); 
```

也就是说，捆绑的名称不是文件夹或文件的名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T10:54:04.753

有同样的问题。我的解决方案是捆绑的无效名称（它由'_'或'.'组成）。名称必须是纯文本：

```
bundles.Add(
new StyleBundle("~/Content/bootstrap_Bundle").Include(
    "~/Content/bootstrap/bootstrap-responsive.css",
    "~/Content/bootstrap/bootstrap-editable.css",
    "~/Content/bootstrap/FileUpload.css")); 
```

必须是：

```
bundles.Add(
new StyleBundle("~/Content/bootstrapBundle").Include(
    "~/Content/bootstrap/bootstrap-responsive.css",
    "~/Content/bootstrap/bootstrap-editable.css",
    "~/Content/bootstrap/FileUpload.css")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T16:34:49.880

如果您使用的是 dot defender 之类的产品，它也可能会出现这种错误情况。捆绑时，如果缓存破坏器参数包含双破折号，那么像点防御者这样的产品会将其视为可能的 SQL 注入攻击并最终干扰请求/响应。

解决此问题的一种方法（假设您无法关闭该软件）是在原始 css 文件中添加一些内容，例如`.dotdefenderbuster {}`.

我需要检查捆绑算法是否已更新以允许影响缓存破坏密钥。

例如： [http ://www.foo.com/MyApp/Content/themes/MyApp/css?v=J9DBkvB7JWRo80eUukDOe3--6DAtA1](http://www.foo.com/MyApp/Content/themes/MyApp/css?v=J9DBkvB7JWRo80eUukDOe3--6DAtA1)

# wpf - 设计 XamDataGrid ContextMenus

> ID：14969424
> 
> 赞同：0
> 
> 时间：2013-02-19T23:15:46.980
> 
> 标签：wpf, infragistics

我有一个可以显示的窗口`XamDataGrid`。但是，我计划有几个 XamDataGrids 可供选择：

1.  包网格
2.  组件网格等

每个这样的网格都有自己的`DataSource`和`ContextMenu`。**这个想法是在运行时选择一个网格**。我想知道如何设计这个。

我可以`Styles`对应我的每个网格，`ResourceDictionary`然后在运行时将一个应用于我的窗口中的单个 XamDataGrid 吗？我对 WPF 不是很有经验......有人可以给我一些关于这个或任何其他方法的指示吗？

这是我到目前为止所拥有的：

## 资源字典.xaml

```
<Style x:Key="XamDataGridStyle" TargetType="{x:Type igDP:XamDataGrid}">
</Style> 
```

## 主窗口.xaml

```
<igDP:XamDataGrid Name="xamDataGrid1" Style={StaticResource XamDataGridStyle} /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T17:09:00.367

使用带有 ContentTemplateSelector 的内容控件：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplateselector(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplateselector(v=vs.110).aspx)

ContentControl 将成为您的网格内容的占位符，并且内容将绑定到您将在运行时设置的 DataSource。您将在 ContentTemplateSelector 中实现一些特定的逻辑，以返回一个特定的 DataTemplate（在您的资源中的某处定义），它将包含基于您的内容（数据源）的特定网格控件。

通过这种方式，您可以为每种网格类型创建单独的数据模板，并使用它们自己的上下文菜单等，并通过删除内容控件以统一的方式显示它们。内容控件将使用您的 ContentTemplateSelector 逻辑根据其内容呈现适当的数据模板。

# bash - 如果我在 bash 中读取文件的最后一行，我该如何理解？

> ID：14969428
> 
> 赞同：2
> 
> 时间：2013-02-19T23:16:26.230
> 
> 标签：bash, readfile, line-by-line

我想逐行读取文件，编辑该行并将其放入一个新文件中：

```
while read my_line
do
    # doesn't handle the last OR
    printf "'%s'\$label OR " $my_line >> delivered 
done < "labels.txt" 
```

不幸的是，通过采用这种方法，我还在文件的最后一个元素之后添加了一个 OR。

我认为以某种方式我可以通过识别最后一行来处理这种情况：从手册页中，当 $? 因为 read 不同于 0，那么我们就有了文件结尾；但在这种情况下，我不能在循环中使用它来创建不同的 printf 指令。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:24:14.860

你可以试试这个：

```
while read my_line
do
  printf "'%s'"
  read -t 0 && printf " OR "
done < "labels.txt" > delivered 
```

第二个`read`（用 指定超时 0 秒`-t`）仅在有可用输入时成功，但不消耗任何输入。打印完最后一行后，它*不会*成功，因此您不会打印尾随的“OR”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:26:56.053

对此的经典解决方法是仅添加一行`0=1`. 制作它`'FOO' OR 'BAR' OR 0=1`：

```
{
while read my_line
do
    # doesn't handle the last OR
    printf "'%s'\$label OR " $my_line
done 
echo 0=1
} < "labels.txt" > delivered 
```

这具有将空输入文件转换为有效表达式`0=1`而不是空字符串的额外好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:37:50.443

另一个有趣的解决方案，使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")：

```
$ cat file.txt
aaa
bbb
ccc
$ perl -pe 's/.*/\047$&\047/; !eof && s/\n/\$label OR /g' file.txt
'aaa'$label OR 'bbb'$label OR 'ccc' 
```

这样做的好处是语法非常清晰，不是吗？

*   `-pe`代表`print`默认（如`sed`）&假设`while (<>) {}`等价
*   `\047`代表单引号的八进制表示`'`
*   `!eof`代表`if the EOF is not reached`
*   `s///`是*类似 sed 的*替换的基本骨架

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:38:42.753

一个简单的解决方案`head`和`tail`：

```
$ cat test.txt
aa
bb
cc
dd
$ head -n -1 test.txt|sed "s/$/ OR/"; tail -n 1 test.txt
aa OR
bb OR
cc OR
dd 
```

`head`读取除最后一行之外的文件，如`-1`for 行数所示。然后`sed`在每行末尾添加关键字，该关键字在`$`搜索表达式中匹配。然后 tail 添加未修改的最后一行。

由于有两个命令，要将输出重定向到文件，您可以在 subshel​​l 中运行它：

```
$ (head -n -1 test.txt|sed "s/$/ OR/"; tail -n 1 test.txt) > output 
```

# asp.net - 捕获 HTTP 错误 403.7 - 在 ASP.NET 中被禁止

> ID：14969436
> 
> 赞同：0
> 
> 时间：2013-02-19T23:17:05.293
> 
> 标签：asp.net, error-handling

有什么方法可以`HTTP Error 403.7 - Forbidden`在我的 ASP.NET 网站中出现时将用户重定向到自定义页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:40:03.757

是的，使用您的 web.config 文件设置自定义错误页面：

```
<customErrors mode="RemoteOnly">
    <error statusCode="403.7" redirect="~/ErrorPages/4037.aspx" />
</customErrors> 
```

请看下面的文章

[http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs)

[这篇文章](http://www.codeproject.com/Articles/2345/Custom-Errors-in-ASP-NET)也值得一看。

**编辑**

从您的评论中，我会说状态代码需要是一个整数，因此将其更改为：

```
<customErrors mode="RemoteOnly">
    <error statusCode="403" redirect="~/ErrorPages/403.aspx" />
</customErrors> 
```

**编辑 2**

您还可以[在 IIS 中设置 CustomError 页面](http://www.orcsweb.com/blog/jamie-furr/how-to-create-custom-error-pages-in-iis-7-5-with-asp-net/)。我不确定它是否适用于子状态，但值得一试。

# visual-studio-2010 - LNK 2019 未解析的符号 - FFmpeg

> ID：14969437
> 
> 赞同：2
> 
> 时间：2013-02-19T23:17:07.693
> 
> 标签：visual-studio-2010, ffmpeg, lnk2019

我正在尝试使用 FFmpeg 打开和阅读视频 .avi 我使用 Visual Studio 2010 在 win7 x64 上工作

现在我的代码很简单：

```
#include "libavcodec/avcodec.h"
#include "libavformat/avformat.h"
#include "SDL.h"
#include "SDL_mixer.h"

int main (int argc, char *argv[]) {

AVFormatContext *pFile_video;
int             s, videoStream;
AVCodecContext  *pCodecCtx;
AVCodec         *pCodec;
AVFrame         *pFrame; 
AVFrame         *pFrameRGB;
AVPacket        packet;
int             frameFinished;
int             numBytes;
uint8_t         *buffer;

av_register_all();

    if((avformat_open_input(&pFile_video, "AR.avi", NULL,NULL)!=0)) cout <<"cannot open video file"<<endl;
    //if(av_find_stream_info(pFile_video) <0) cout <<"cannot retrive stream information"<<endl;

    videoStream =-1;
    for(s=0; s<pFile_video->nb_streams;s++){
        if((pFile_video->streams[s]->codec->codec_type) == AVMEDIA_TYPE_VIDEO) videoStream =s;
    }
    if(videoStream ==-1) cout <<"cannot open video stream"<<endl;

f(SDL_Init(SDL_INIT_EVERYTHING)< 0) cout<< "cannot initialize SDL subsystems"<<endl;
    if(Mix_OpenAudio(22050,MIX_DEFAULT_FORMAT,2, 4096) <0) cout <<"error mixer audio"<<endl;
    music = Mix_LoadMUS("AR.wav");
    if(music == NULL) {cout <<"error loading music    "<<endl;
}

return 0;
} 
```

我链接了以下 .lib 文件：

```
avcodec.lib
avdevice.lib
avfilter.lib
avformat.lib
avutil.lib
postproc.lib
swresample.lib
swscale.lib 
```

但我收到这些错误：

```
>MSVCRTD.lib(cinitexe.obj) : warning LNK4098: la libreria predefinita 'msvcrt.lib' è in conflitto con l'utilizzo di altre librerie; utilizzare /NODEFAULTLIB:libreria
1>main_video_ffmpeg.obj : error LNK2019: riferimento al simbolo esterno "int __cdecl avformat_open_input(struct AVFormatContext * *,char const *,struct AVInputFormat *,struct AVDictionary * *)" (?avformat_open_input@@YAHPAPAUAVFormatContext@@PBDPAUAVInputFormat@@PAPAUAVDictionary@@@Z) non risolto nella funzione _SDL_main
1>main_video_ffmpeg.obj : error LNK2019: riferimento al simbolo esterno "void __cdecl av_register_all(void)" (?av_register_all@@YAXXZ) non risolto nella funzione _SDL_main
1>C:\Users\Cristina\Desktop\OpenCV\Progetti\MIEI_PROGETTI_Vs\video_ffmpeg\Debug\video_ffmpeg.exe : fatal error LNK1120: 2 esterni non risolti 
```

我认为这是一个链接器错误。但我没有其他 .lib 文件用于 FFmpeg 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:59:12.157

你应该用 extern "C" 包围你的 ffmpeg 包含

```
 extern "C" {
      #include "libavcodec/avcodec.h"
      #include "libavformat/avformat.h"
      #include "SDL.h"
      #include "SDL_mixer.h"
    } 
```

# javascript - 英国邮政编码 reg ex 带空格

> ID：14969441
> 
> 赞同：1
> 
> 时间：2013-02-19T23:17:34.763
> 
> 标签：javascript, regex, postal-code

我需要一个 javascript reg ex 来强制用户在他们的英国邮政编码中输入一个空格。

有人可以帮忙吗？我发现的那些似乎允许可选空间，这不是我所追求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:23:50.690

像这样的东西？相信它捕获了所有英国邮政编码，至少它捕获了我能想到的所有邮政编码

```
/^(\w{1,2}\d{1,2}\w?\s\d\w{1,2})$/ 
```

# arrays - 对数组（或列表）进行排序

> ID：14969443
> 
> 赞同：0
> 
> 时间：2013-02-19T23:17:47.633
> 
> 标签：arrays, vb.net, sorting

我有一个循环，每次我得到 3 个不同的值 x、r 和 c 时，都在这个循环中。

我想要一个数组（我尝试过使用一个列表，但我不知道如何对其进行排序，搜索了很多！）它将在数组的新自动索引中输入循环每一轮的所有 3 个值，最后，我想根据升序对整个数组进行排序（x，然后是 r，然后是 c）。

例如，这些是我在数组中添加的值（我不需要这个数组的值，这些值 (1,2,3) 是值，类似于表格）

```
storage(1,2,3)
storage(2,3,4)
storage(3,4,5)
storage(4,5,6) 
```

这3个实际上是一个容器在不同堆栈中的位置坐标，我想找出哪个更靠近表面，并且在更近的堆栈中。因此，我将它们添加到一个数组中，然后对它们进行排序，以便找到哪个更接近（前提是所有这些都与位于不同位置的相同类型的容器匹配）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:33:25.213

只需使用该`.Sort()`方法。它将使用`IComparable`由`Array`. 如果您不指定自定义比较器，它将使用默认值，这对于`Integer`值是可以的。

大批：

```
Dim iNums() As Integer = New Integer() {1, 11, 7, 5}
Array.Sort(iNums) 
```

列表：

```
Dim aux As New List(Of Integer)(New Integer() {1, 11, 7, 5})
aux.Sort() 
```

如果您需要，您可以定义自己的比较器：http:
[//msdn.microsoft.com/en-us/library/system.icomparable (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.icomparable(v=vs.71).aspx)

# rspec - 如何在 irb 中试验 rspec

> ID：14969444
> 
> 赞同：5
> 
> 时间：2013-02-19T23:17:50.523
> 
> 标签：rspec, mocking, irb

例如，我想在 irb 中说 b = double("book") 并使用结果。

如果我说在 irb

```
require 'rspec'
b = double("book") 
```

我得到一个错误。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T23:35:01.947

`irb`您可以通过[要求`"rspec/mocks/standalone"`](https://www.relishapp.com/rspec/rspec-mocks/v/2-2/docs/outside-rspec/standalone)来玩弄 RSpec 测试双打：

```
$ irb
> require 'rspec/mocks/standalone'
> b = double("book")
  =>  #<RSpec::Mocks::Mock:0x3fd88d0157e8 @name="book"> 
```

# javascript - 如何使用 Javascript 将鼠标悬停在表格单元格上？

> ID：14969445
> 
> 赞同：0
> 
> 时间：2013-02-19T23:17:51.527
> 
> 标签：javascript, hover

我的表格在行上有悬停功能，我正在尝试将其更改为悬停在单元格上

**这是我当前的脚本：**

```
<script type="text/javascript">
    window.onload=function(){
    var tfrow = document.getElementById('tfhover').rows.length;
    var tbRow=[];
    for (var i=1;i<tfrow;i++) {
        tbRow[i]=document.getElementById('tfhover').rows[i];
        tbRow[i].onmouseover = function(){
          this.style.backgroundColor = '#f3f8aa';
        };
        tbRow[i].onmouseout = function() {
          this.style.backgroundColor = '#ffffff';
        };
    }
};
</script> 
```

**到目前为止，我试图改变但仍然无法正常工作：**

```
<script type="text/javascript">
    window.onload=function(){
    var tfcell = document.getElementById('tfhover').cells.length;
    var tbCell=[];
    for (var i=1;i<tfcell;i++) {
        tbCell[i]=document.getElementById('tfhover').cells[i];
        tbCell[i].onmouseover = function(){
          this.style.backgroundColor = '#f3f8aa';
        };
        tbCell[i].onmouseout = function() {
          this.style.backgroundColor = '#ffffff';
        };
    }
};
</script> 
```

**如何使用我的脚本实现悬停在单元格上而不是悬停在行上？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:23:51.327

为此，您可以使用常规 CSS：

```
#tfhover td {
    background-color: #fff;
}
#tfhover td:hover {
    background-color: #f3f8aa;
} 
```

感谢@Mike Brant 指出缺少的表ID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:24:25.133

要回答你的问题......这是如何用jQuery做到这一点：

```
$('#tfhover td').hover(function() {
    $(this).css('background-color', '#fsf8aa');
}, function () {
    $(this).css('background-color', '#ffffff');
}); 
```

当然，您的示例与 jQuery 无关。它只是提醒这些事情使用 jQuery 变得多么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-03T02:24:43.020

单元格在行列表中，就像行在表列表中一样。

要获取单元格，只需**document.getElementById('tfhover').rows[i].cells[j]** 。两个列表都从 0 开始。

```
<script type="text/javascript">
    window.onload=function(){
    var tfrow = document.getElementById('tfhover').rows.length;
    var tbRow=[];
    for (var i=1;i<tfrow;i++) {
        tbRow[i]=document.getElementById('tfhover').rows[i];
        var tfcell=tbRow[i].cells.length;
        for(var j=0;j<tfcell;j++){
            var _tbCell=tbRow[i].cells[j];
            _tbCell.onmouseover=function(){
                this.style.backgroundColor = '#f3f8aa';
            }
            _tbCell.onmouseout=function(){
                this.style.backgroundColor = '#ffffff';
            }
        }
    }
};
</script> 
```

# python - 并行处理如何在处理器之间分配负载。或指定哪个处理器将执行任务

> ID：14969456
> 
> 赞同：0
> 
> 时间：2013-02-19T23:18:24.880
> 
> 标签：python, python-3.x, python-2.7

我必须确定哪个处理器很忙，然后将任务发送到不是很忙的处理器。我必须使用并行 python 执行程序，但我还必须确定将任务发送到哪个服务器。有没有人不应该在并行处理代码上使用什么样的条件？及其用python调用PP编写的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:30:01.383

如果您对此事有任何选择（如果这是家庭作业，您可能没有选择），您可能需要考虑使用[ØMQ](http://www.zeromq.org/)来处理系统各个位之间的消息传递。在[Learn 页面上](http://www.zeromq.org/intro%3aread-the-manual)有 Ian Barber 的精彩（而且非常迅速）演示。这是45分钟，非常值得一看。它从根本上改变了我对消息传递和多线程/进程/处理器通信的看法。信息量如此之大，我不得不看了两遍，然后开始做玩具节目，以了解整个概念是多么干净。

注意：尽管他用于演示的语言是 PHP，但他展示的代码示例在 ØMQ 支持的 20 多种语言中的任何一种中看起来几乎相同。（多进程COBOL有人吗？:-)

# ruby - 使用 ruby 删除多行终端输出

> ID：14969458
> 
> 赞同：7
> 
> 时间：2013-02-19T23:18:54.270
> 
> 标签：ruby, command-line, io

我希望能够将两行输出到终端，然后将它们都删除。我知道你可以通过做类似的事情来做到这一点

```
print "\b"*whatever 
```

但我想做更多这样的事情：

```
[1, 2, 3, 4, 5].each do |item|
    # code to delete the previous two lines
    print item.to_s + "\nHello!"
end 
```

输出将很快通过以下所有内容

```
1
Hello!
2
Hello!
3
Hello!
4
Hello!
5
Hello! 
```

但到最后，最终的迭代将是你所看到的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T02:52:39.130

好吧，对于简单的事情，如果你可以假设一个 ANSI 兼容的终端（通常是一个不错的选择），你可以直接输出[ANSI 代码](http://en.wikipedia.org/wiki/ANSI_escape_code)。例如，

```
 5.times do |item|
    print "\r" + ("\e[A\e[K"*3) if item > 0
    puts "#{item+1}\nHello!"
 end 
```

where`\r`将光标移动到行首，`\e[A`将光标向上移动一行，然后`\e[K`从光标位置清除到行尾。如果您不需要屏幕下方的任何内容，您也可以在`\e[J`将光标移至所需位置后发送；一直清除到屏幕的末尾。

对于更复杂的东西，您可以从查看[Highline gem](http://highline.rubyforge.org/)开始。

# html - 如何在 HTML5 中渲染一个非常大的 SVG 文件？

> ID：14969460
> 
> 赞同：0
> 
> 时间：2013-02-19T23:19:00.093
> 
> 标签：html, svg

我最近想自己创建类似的东西：[http ://www.unitedstateszipcodes.org/](http://www.unitedstateszipcodes.org/)

它基本上是美国的邮政编码地图。目前，我有数千个构成邮政编码边界的点。使用这些坐标，我创建了一个 KML 文件。但是，文件似乎太大（32MB）当我在浏览器上渲染它时，加载需要很长时间，而且看起来很隐蔽。我应该采取什么方法使它更快？

我想做的是能够看到美国所有邮政编码区域的地图。我应该使用 SVG 或 Canvas。我选择使用 SVG：[http ://danilocarion.com/Map.html](http://danilocarrion.com/Map.html)

请让我知道是否有办法让它更快、更清晰。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:04:33.613

您可能想查看[topojson](https://github.com/mbostock/topojson/wiki)，可以在[此处](http://bost.ocks.org/mike/map/)找到教程和一些说明。

# java - 通过 HTTP 序列化转换对象的正确方法

> ID：14969461
> 
> 赞同：6
> 
> 时间：2013-02-19T23:19:01.950
> 
> 标签：java, serialization

我正在尝试序列化一个对象并通过 HTTP 发送它。我正在使用一些教程，因为大多数教程都处理套接字，但我不能为此使用套接字，或者文件存储在本地。

这是测试类Employee：

```
public class Employee implements java.io.Serializable {
        public String name;
        public String address;
        public transient int SSN;
        public int number;

        public void mailCheck() {
            System.out.println("Mailing a check to " + name + " " + address);
        }

} 
```

客户端：

```
public class SerializeAndSend {

    public static void main(String args[]){

          one.Employee e = new one.Employee();
          e.name = "Reyan Ali";
          e.address = "Phokka Kuan, Ambehta Peer";
          e.SSN = 11122333;
          e.number = 101;

          sendObject(e);

    }

    public static Object sendObject(Object obj) {
        URLConnection conn = null;
        Object reply = null;
        try {

            // open URL connection
            URL url = new URL("///myURL///");
            conn = url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            // send object
            ObjectOutputStream objOut = new ObjectOutputStream(conn.getOutputStream());
            objOut.writeObject(obj);
            objOut.flush();
            objOut.close();
        } catch (IOException ex) {
            ex.printStackTrace();
            return null;
        }
        // recieve reply
        try {
            ObjectInputStream objIn = new ObjectInputStream(conn.getInputStream());
            reply = objIn.readObject();
            objIn.close();
        } catch (Exception ex) {
            // it is ok if we get an exception here
            // that means that there is no object being returned
            System.out.println("No Object Returned");
            if (!(ex instanceof EOFException))
                ex.printStackTrace();
                System.err.println("*");
        }
        return reply;
    }

} 
```

我认为那是正确的。但我被困在服务器端，我在服务器端也有员工类：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {

    Object obj;
    ObjectInputStream objIn = new ObjectInputStream(req.getInputStream()); 

    try {
        obj = objIn.readObject();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }

    Employee e = obj;

} 
```

如何将此对象转回员工类对象？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:44:55.083

只是打字。

```
Employee emp = (Employee)objIn.readObject(); 
```

# linux - 为 git hooks 和 Git Tower 创建 shell 环境

> ID：14969465
> 
> 赞同：1
> 
> 时间：2013-02-19T23:19:14.520
> 
> 标签：linux, git, shell, git-tower

我正在使用 Git 塔。我的项目有一些没有运行的 git 钩子。根据 Go Git Tower 常见问题解答：

> 您需要确保在钩子脚本本身（如修改“PATH”）中创建所需的 shell 环境，而不是在 shell 配置文件中，因为钩子脚本是从不在 shell 中运行的 Tower 进程环境调用的环境（因此未加载您的 shell 配置文件）。

这对我来说很陌生。我的 shell 脚本很简单：

```
#!/bin/sh
git ftp push 
```

我需要做什么才能获得 Tower“许可”来处理我的钩子？

# jquery - 如果提交了任何表单，如何使用 jQuery 检查？

> ID：14969467
> 
> 赞同：25
> 
> 时间：2013-02-19T23:19:39.303
> 
> 标签：jquery, forms, onsubmit

我有一个包含很多表单的页面，用户将在该页面上选择一些东西。当用户这样做时，我需要将该元素放在其他地方，就像购物车一样。但我似乎无法得到比页面上的第一个表单更多的东西来实际按预期工作。我尝试了多种方法：

1.  为所有表单提供相同的 ID，这只会导致第一个表单按照我的意愿行事，并为我提供该表单的数据。
2.  再次给他们所有相同的 ID，这次将唯一标识符附加到 ID，但是当然，我的 jQuery`$('#something')`没有捕获它，因为它不匹配。

所以我在想我会怎么做。我只需要从页面上提交的表单中接收数据。如前所述，我可以给它们都加上某种前缀，就像现在一样，但是我不知道如何匹配它。

帮助将不胜感激！

根据要求的一些代码（当然，只是一个例子来说明我的意思）：

的HTML：

```
<form id="something-0"><input type="hidden" value="0"><input type="submit"></form>
<form id="something-1"><input type="hidden" value="1"><input type="submit"></form> 
```

jQuery：

```
$("#something-%").submit(function(e) {
e.preventDefault();
$("#some-span").html(data);
}); 
```

我希望#something-% 接受“-”之后的任何内容，希望您能理解。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-19T23:35:30.523

作为一般答案，要对一组元素进行分类，请使用`class`属性，为每个元素赋予相同的类名。然后，您可以按该类选择元素。一个元素可以有多个类。

```
$(".something"); 
```

如果必须使用 id，可以使用属性选择器：

```
$("[id^='something']");  // all elements with an id beginning with 'something'
$("[id$='something']");  // all elements with an id ending with 'something' 
```

对于这个特定的问题，由于您想对页面中的任何表单进行操作，最简单的选择是使用元素名称选择器：

```
$("form"); 
```

`this`无论选择器如何，您都可以通过在处理程序中引用来识别提交的表单`submit()`：

```
$("form").submit(function (e) {
    e.preventDefault();
    var formId = this.id;  // "this" is a reference to the submitted form
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-19T23:23:15.190

您可以使用选择器“表单”来捕获所有表单，例如

```
$("form").submit(function() {
  var theForm = $(this);
  var formID = theForm.attr("id");
  // do something
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-06-25T15:16:51.167

像这样的东西...

```
 $('#myForm').submit(function (e) {
     e.preventDefault;
     if (e.result == true) {
       alert("This form was submitted!")
     }
   }); 
```

# java - 如何释放 Java 信号量的所有许可

> ID：14969469
> 
> 赞同：3
> 
> 时间：2013-02-19T23:19:47.830
> 
> 标签：java, multithreading, semaphore

所以这段代码：

```
int usedPermits = totalPermits - semaphore.availablePermits();
semaphore.release(usedPermits); 
```

不是线程安全的，因为如果在两行之间另一个线程释放了一个许可，信号量的容量实际上会增加到其原始最大值之上。

这适用于我的情况，因为这条代码是 1) 单线程和 2) 释放许可证的唯一位置，这可能只是说明“全部释放”和“获取/释放”是两种不兼容的设计模式的事实在同一个物体上。

但是，我想问一下是否存在具有不那么微妙的线程同步策略的首选模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:03:55.093

正如其他答案中所解释的，有一种解决方案可以使您的代码具有原子性。但是，不能保证它会在一般设置中解决问题，因为此代码不可能在所有情况下都是正确的。

许可证要么由使用它们的活动释放，在这种情况下代码是多余的：信号量将自然补充，或者它们不会，在这种情况下你将需要那段代码，它是安全的，只要你不会用它做任何奇怪的事情。

请注意，您声明您希望限制每个时间段（此处为一分钟）的活动速率，但您必须考虑到活动可能持续超过一分钟。您可以在此处限制两种不同的事情：

*   每个量程*开始*的活动数量，
*   在一个量程中*运行*的活动数量

如果您希望限制第一个，那么您将需要您的代码来重新填写许可证，并让活动保留他们的许可证。如果要处理第二种情况，则必须强制活动在启动和终止时分别获取和释放其许可。

如果您担心某些活动滥用信号量，请禁止在活动代码本身中使用它。实际上，速率限制与活动语义完全正交，最好将该功能与活动主代码分开。因此，您应该使用代码包装任何计划的活动来处理信号量：

```
class RateLimitedRunnable implements Runnable {
    Runnable runnable;
    RateLimitedRunnable(Runnable r) { runnable = r; }
    void Run() {
        semaphore.acquire();
        runnable.run();
        semaphore.release(); // remove if only limiting starts
    }
} 
```

上面的示例（未经测试）代码描述了远离实际活动的信号量使用的可能处理，从而消除了任何潜在的误用。如果内部活动需要访问信号量，它应该只检索其当前状态，并且可以设计一个 ad-hoc 接口来提供这种有限的访问。

注意：我在这里使用“活动”一词作为线程或进程的意思，因为关于信号量使用的讨论比*Java*的上下文更普遍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:02:42.937

将某些东西混入 Semaphore 有点奇怪，如果它甚至可行的话。它还会导致突发性 - 如果您限制为 10k QPS，每秒，您将重置并一次获得 10000 个查询。为什么不使用现有的 RateLimiter 实现？：

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)

或者至少看一下代码以获得灵感：

[http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/util/concurrent/RateLimiter.java?name=v13.0-rc2](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/util/concurrent/RateLimiter.java?name=v13.0-rc2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T17:46:31.513

为什么不扩展标准的 Semaphore 类并覆盖它的方法，但让它们同步：

```
public class Semaphore extends java.util.concurrent.Semaphore {
public Semaphore(int permits)
{
    super(permits);
}

public synchronized void releaseAll()
{
    super.release(super.drainPermits());
}   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:36:49.310

> 不是线程安全的，因为如果在两行之间另一个线程释放了一个许可，信号量的容量实际上会增加到其原始最大值之上。

这应该通过 解决`synchronization`，还强制每个都`semaphore.release()`在一个`synchronized`块中，例如

```
synchronize(lock) {
    int usedPermits = totalPermits - semaphore.availablePermits();
    semaphore.release(usedPermits);
} 
```

**但是，如果您想确保**许可的数量*不*超过，这可能还不够，`totalPermits`因为即使使用`synchronized` *release all*块，如果线程调用`release`afterwords`semaphore`将超过`totalPermits`。

您可以实现一个`threads`调用释放许可而不`semaphore.release()`直接调用的函数，例如

```
void limitedRelease(){
  synchronize(lock) {
    if(semaphore.availablePermits() < totalPermits ) {
      semaphore.release();
    }    
  }  
} 
```

# forms - 单选按钮更改可见输入字段

> ID：14969470
> 
> 赞同：1
> 
> 时间：2013-02-19T23:20:10.833
> 
> 标签：forms, hide, show, radio

## 我正在尝试为个人和公司做一个单独的公式

### 如果访问者选中“个人”单选按钮，它将显示一个表格

### 如果访问者选中“公司”单选按钮，它将显示不同的表单

```
 <fieldset>
                    <input type="radio" name="tipo_cadastro" value="individual_form" id="individual_form" style="margin:0px !important">
                    <strong>Individual Form</strong><br/>

                    <input type="radio" name="tipo_cadastro" value="corporation_form" id="corporation_form" style="margin:0px !important">
                    <strong>Corporation Form</strong>

            <!-- If Individual Form is checked -->
            <legend>Personal Data</legend>
            <label for="Name">Full Name</label>
            <input id="Name" type="text" />
            <label for="City">City</label>
            <input id="City" type="text" />
            <label for="Email">Email</label>
            <input id="Email" type="text" />

            <!-- If Corporation Form is checked -->
            <legend>Corporation Data</legend>
            <label for="Name">Name</label>
            <input id="Name" type="text" />
            <label for="City">City</label>
            <input id="City" type="text" />
            <label for="Email">Email</label>
            <input id="Email" type="text" />

        </fieldset> 
```

`<fieldset>`Ps：因为我的其他javascript，除了现有的我不能使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:31:32.930

您需要在字段周围包裹一些东西以显示/隐藏，即使只是`<div>`带有 ID 的标签。

然后对于您的单选按钮，您需要添加`onchange`&`onmouseup`事件处理程序（以考虑人们单击以更改值或使用他们的键盘）。例如。

```
<script type="text/javascript">
function onchange_handler(obj, id) {
    var other_id = (id == 'personal')? 'corporate' : 'personal';
    if(obj.checked) {
        document.getElementById(id + '_form_fields').style.display = 'block';
        document.getElementById(other_id + '_form_fields').style.display = 'none';
    } else {
        document.getElementById(id + '_form_fields').style.display = 'none';
        document.getElementById(other_id + '_form_fields').style.display = 'block';
    }
}
</script>
<fieldset>
    <input type="radio" name="tipo_cadastro" value="individual_form" id="individual_form" style="margin:0px !important" onchange="onchange_handler(this, 'personal');" onmouseup="onchange_handler(this, 'personal');">
    <strong>Individual Form</strong><br/>

    <input type="radio" name="tipo_cadastro" value="corporation_form" id="corporation_form" style="margin:0px !important" onchange="onchange_handler(this, 'corporate');" onmouseup="onchange_handler(this, 'corporate');">
    <strong>Corporation Form</strong>

    <!-- If Individual Form is checked -->
    <div id="personal_form_fields">
        <legend>Personal Data</legend>
        <label for="Name">Full Name</label>
        <input id="Name" type="text" />
        <label for="City">City</label>
        <input id="City" type="text" />
        <label for="Email">Email</label>
        <input id="Email" type="text" />
    </div>

    <!-- If Corporation Form is checked -->
    <div id="corporate_form_fields" style="display: none;">
        <legend>Corporation Data</legend>
        <label for="Name">Name</label>
        <input id="Name" type="text" />
        <label for="City">City</label>
        <input id="City" type="text" />
        <label for="Email">Email</label>
        <input id="Email" type="text" />
    </div>
</fieldset> 
```

# ruby-on-rails - 得到一个 . 而不是 / 在我的链接（路径）

> ID：14969473
> 
> 赞同：0
> 
> 时间：2013-02-19T23:20:18.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
# GET system_accounts/:id
  def show 
    # If a system account already exists in session, it was found from a search with the account id
    # Otherwise, this is a new search for a system account by the given id
    if params[:id]
      Rails.logger.debug { "Querying for the account with id: #{params[:id]}" }
      response = query_account(CGI.escape(params[:id]))
    if response.is_a?(Net::HTTPSuccess)
        @account = JSON.parse(response.body)
    unless @account.empty?
      redirect_to system_accounts_path(params[:id])        
    end 
    end 
```

以上是我的表演动作。所以问题是，如果我用我的 id=2 搜索，我应该得到的结果链接是 system_accounts/2 但我得到的是 system_accounts.2 。为什么 。代替 / 。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:50:14.080

如果您严格遵循 rails 约定，则应使用`system_account_path(params[:id])`（不带`s`）。2 被解释为格式，因此它附加`.2`到 url，因为`system_accounts_path`很可能指向 system_accounts 控制器的索引操作。删除 s 以指向 show 动作。

# sql - sql 查询 vs linq to entity 返回不同的结果

> ID：14969477
> 
> 赞同：0
> 
> 时间：2013-02-19T23:20:32.910
> 
> 标签：sql, linq

这是我的 sql 查询

```
SELECT TOP(10)projects.stat, 
              wo.stat, 
              sevt.restype, 
              sevt.resid, 
              restype.user2, 
              projects.prj_id, 
              projects.user3, 
              projects.user9, 
              wo.wonum, 
              wo.jobdesc, 
              sevt.sesid, 
              sevt.restype, 
              sevt.type, 
              sevt.t_start, 
              sevt.t_end, 
              sevt. mealstart, 
              sevt.mealend, 
              sevt. melstart2, 
              sevt.melend2, 
              sevt.melstart3, 
              sevt.melend3, 
              sevt.user2, 
              sevt.subactid, 
              sevt.ot_exempt, 
              sevt_ex.user5, 
              rescat.user1 
FROM   schedwin.projects 
       INNER JOIN schedwin.wo 
               ON projects.prj_id = wo.prj_id 
       INNER JOIN schedwin.sevt 
               ON wo.seqnum = sevt.seqnum 
       INNER JOIN schedwin.rsrce 
               ON sevt.resid = rsrce.resid 
       LEFT OUTER JOIN schedwin.pers 
                    ON rsrce.recid = pers.recid 
       INNER JOIN schedwin.restype 
               ON sevt.rtype = restype.code 
       INNER JOIN schedwin.rescat 
               ON sevt.rcat = rescat.code 
       LEFT OUTER JOIN schedwin.sevt_ex 
                    ON sevt.sesid = sevt_ex.sesid 
WHERE  ( Ltrim(Rtrim(projects.stat)) IN ( '1', '2' ) ) 
       AND ( Ltrim(Rtrim(wo.stat)) = '6' ) 
       AND ( ( ( sevt.restype = 5 
                  OR sevt.restype = 0 ) 
               AND ( Substring(restype.user2, 2, 1) = 'F' 
                     AND Substring(restype.user2, 6, 1) = 'S' ) ) 
              OR ( sevt.restype = 4 ) ) 
       AND ( sevt.type = 0 ) 
       AND rescat.groupid = 0 
       AND restype.groupid = 0 
       AND Len(Ltrim(wo.invoice)) > 0 
       AND Ltrim(wo.invoice) <> 'PENDING' 
       AND wo.userflag1 <> 1 
       AND Ltrim(sevt.t_start) = '1351728000' 
ORDER  BY projects.prj_id, 
          wo.wonum 
```

我正在将 Linq 转换为如下所示的实体

```
 var query =
            (from PROJECTS in db.PROJECTS
            join WOes in db.WOes on PROJECTS.PRJ_ID equals WOes.PRJ_ID
            join SEVTs in db.SEVTs on WOes.SEQNUM equals SEVTs.SEQNUM
            join RSRCEs in db.RSRCEs on SEVTs.RESID equals RSRCEs.RESID
            join PERS in db.PERS on RSRCEs.RECID equals PERS.RECID into PERS_join
            from PERS in PERS_join.DefaultIfEmpty()
            join RESTYPEs in db.RESTYPEs on new { RTYPE = SEVTs.RTYPE } equals new { RTYPE = RESTYPEs.CODE }
            join RESCATs in db.RESCATs on new { RCAT = SEVTs.RCAT } equals new { RCAT = RESCATs.CODE }
            join SEVT_EX in db.SEVT_EX on SEVTs.SESID equals SEVT_EX.SESID into SEVT_EX_join
            //join SEVT_EX in db.SEVT_EX on new { SESID = (String)SEVTs.SESID } equals new { SESID = SEVT_EX.SESID } into SEVT_EX_join
            from SEVT_EX in SEVT_EX_join.DefaultIfEmpty()
            where
              (new string[] { "1", "2" }).Contains((PROJECTS.STAT.TrimEnd()).TrimStart()) &&
              ((WOes.STAT.TrimEnd()).TrimStart() == "6") &&
              (((SEVTs.RESTYPE == 5 || SEVTs.RESTYPE == 0) &&
              (RESTYPEs.USER2.Substring(2 - 1, 1) == "F" && RESTYPEs.USER2.Substring(6 - 1, 1) == "S")) || (SEVTs.RESTYPE == 0)) &&
              (SEVTs.TYPE == 0) &&
              (RESCATs.GROUPID == 0) &&
              (RESTYPEs.GROUPID == 0 )&&
              (int?)(WOes.INVOICE.TrimStart()).Length > 0 &&
              WOes.INVOICE.TrimStart() != "PENDING" &&
              WOes.USERFLAG1 != 1 &&
             (SEVTs.T_START.TrimStart()) == (Booktime)
             //(SEVTs.T_START.TrimStart()) == (Booktime)
             // String.Compare(SEVTs.T_START.ToString().TrimStart(), "1351728000") >= 0
            //Convert.ToInt32(SEVTs.T_START.TrimStart()) >= Convert.ToInt32(Booktime)
            orderby
             PROJECTS.PRJ_ID,
             WOes.WONUM
            select new
            {
                PROJECTS.PRJ_ID,
                PROJECTS.USER3,
                PROJECTS.USER9,
                WOes.WONUM,
                WOes.JOBDESC,
                SEVTs.SESID,
                SEVTs.RESTYPE,
                SEVTs.TYPE,
                SEVTs.T_START,
                SEVTs.T_END,
                SEVTs.MEALEND,
                SEVTs.MELSTART3,
                SEVTs.MELSTART2,
                SEVTs.MELEND2,
                Column1 = SEVTs.MELSTART2,
                SEVTs.MELEND3,
                SEVTs.USER2,
                SEVTs.SUBACTID,
                SEVTs.OT_EXEMPT,
                USER5 = SEVT_EX.USER5,
                SEVTs.GMT_OFFSET,
                SEVTs.MEALSTART,
                SEVTs.STANDARD,
                RESCATs.USER1,
                SEVTs.RESID
            }).Take(10); 
```

肯定我的 sql 查询返回了正确的记录，但我的 Linq 没有，任何人都知道这里缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:33:45.457

你有这一行：

```
(((SEVT.restype = 5 or SEVT.restype = 0) and (substring(restype.User2,2,1) = 'F' and substring(restype.User2,6,1) = 'S')) or (SEVT.RESTYPE = 4))and 
```

在 linq 你有这个

```
((SEVTs.RESTYPE == 5 || SEVTs.RESTYPE == 0) && (RESTYPEs.USER2.Substring(2 - 1, 1) == "F" && RESTYPEs.USER2.Substring(6 - 1, 1) == "S") && SEVTs.TYPE == 0) 
```

首先，2-1 中的子字符串 = 1 而不是 2。并且逻辑运算不等于

# c++ - 如何定义指向类成员函数的指针

> ID：14969478
> 
> 赞同：0
> 
> 时间：2013-02-19T23:20:43.840
> 
> 标签：c++, visual-studio-2010

与 C++ 基础相关。我正在创建一个单链表。

```
class Linked_List
{
public: Linked_List();
    ~Linked_List();
        //Member Functions
    struct node* getHead(void);
private:
    struct node{
        int d;
        struct node* next;
    }*head;
};
struct node (Linked_List::*getHead)(void)
{
    return head;
} 
```

我收到此错误：

> “错误 C2470：'getHead'：看起来像一个函数定义，但没有参数列表；跳过明显的主体”。

我试图在谷歌搜索，但没有用。任何建议请。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:21:44.347

您不需要指向成员函数的指针，您只想为该函数提供*定义：*

```
Linked_List::node* Linked_List::getHead()
{ 
    return head;
} 
```

还要注意，`struct`在函数定义中关键字是不必要的，而您必须`node`用定义它的范围内的类的名称来限定结构的名称。

此外，`void`指定空参数列表的关键字是不必要的。因此，我建议您将类定义重写如下：

```
class Linked_List
{
private:
    struct node
    {
        int d;
        struct node* next;
    };
    node *head;
public:
    Linked_List();
    ~Linked_List();
    node* getHead();
}; 
```

# urlencode - urlencoded 字符串是否会引发 404 错误？

> ID：14969479
> 
> 赞同：1
> 
> 时间：2013-02-19T23:20:54.207
> 
> 标签：urlencode, laravel, url-encoding, laravel-3

我正在尝试传递两个参数，其中一个是电子邮件地址。

路线（也尝试过**(:any)**）

```
Route::any(
    'user/confirm_request/(:any?)/(:any?)', array(
                                             'uses' => 'user@confirm_request')); 
```

控制器（也尝试过**post_confirm_request()**）

```
public function get_confirm_request($email, $term)
{ 
  //do stuff
} 
```

最终，我要做的就是点击该路线并使用这两个参数向用户发送电子邮件。但我不断收到 404 错误。电子邮件被编码，路由如下所示：

```
/email%40gmail.com/someString 
```

我能够取出 %40 并且它工作得很好（只是给了我发送邮件的错误）。为什么 %40 会抛出 404 错误？会不会是 Laravel 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:47:25.930

一种解决方案是将电子邮件作为 url 参数传递。

首先，从路由中删除第二个参数。（如果需要，您也可以同时删除两者。）

```
 Route::any('user/confirm_request/(:any?)', array('uses' => 'user@confirm_request')); 
```

然后将电子邮件附加到操作 url，如下所示..

```
 $url = URL::base() . '/user/confirm_request?email=' . $email; 
```

然后在您的控制器中，您可以获取该数据。

```
 public function get_confirm_request()
  { 
    $email = Input::get('email');
  } 
```

# http - simplexml_load_file 未加载

> ID：14969481
> 
> 赞同：0
> 
> 时间：2013-02-19T23:21:10.680
> 
> 标签：http, gzip, simplexml, php

这个指向 rss 提要的链接没有加载`simplexml_load_file`.

*   链接： http: [//www.nationnews.com/site/feed](http://www.nationnews.com/site/feed)

该链接是一个有效的 RSS 提要，不，它不是其他所有加载的权限问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:57:12.230

RSS 提要已压缩。这应该可以解决问题：

```
$content =  file_get_contents("http://www.nationnews.com/site/feed/");
$rss = simplexml_load_string(gzinflate(substr($content,10,-8))); 
```

有关 gzinflate 的更多详细信息，请参阅[PHP：调用未定义的函数 gzdecode()](https://stackoverflow.com/questions/9801908/php-call-to-undefined-function-gzdecode)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:59:34.470

首先，您需要启用错误记录和/或报告以了解更多信息。您还可以从返回值和远程请求中检查一些参数：

```
$result = simplexml_load_file($url);

var_dump($result, $http_response_header); 
```

这将告诉您加载失败，错误消息会告诉您失败的*原因*：

> PHP 警告：simplexml_load_file(): `http://www.nationnews.com/site/feed/:1`: 解析器错误：需要开始标记，在第 10 行的 /example.php 中找不到“<”
> PHP 警告：simplexml_load_file()：在第 10 行的 /example.php 中
> PHP 警告：simplexml_load_file()： ^ 在 /example.php 第 10 行

并且`$http_response_header`还向您展示了从该主机返回的图片：

```
array(23) {
  [0]=> string(15) "HTTP/1.0 200 OK"
  [1]=> string(35) "Date: Wed, 20 Feb 2013 10:56:11 GMT"
  [2]=> string(30) "Server: Apache/2.2.15 (CentOS)"
  [3]=> string(23) "X-Powered-By: PHP/5.3.3"
  [4]=> string(56) "Set-Cookie: PHPSESSID=qeaq20mrvrc2u4c403sou6oro2; path=/"
  [5]=> string(38) "Expires: Wed, 20 Feb 2013 08:13:01 GMT"
  [6]=> string(50) "Cache-Control: no-store, no-cache, must-revalidate"
  [7]=> string(16) "Pragma: no-cache"
  [8]=> string(84) "Set-Cookie: exp_last_visit=1046015771; expires=Thu, 20-Feb-2014 10:56:11 GMT; path=/"
  [9]=> string(87) "Set-Cookie: exp_last_activity=1361375771; expires=Thu, 20-Feb-2014 10:56:11 GMT; path=/"
  [10]=> string(89) "Set-Cookie: exp_tracker=a%3A1%3A%7Bi%3A0%3Bs%3A11%3A%22%2Fsite%2Ffeed%2F%22%3B%7D; path=/"
  [11]=> string(44) "Last-Modified: Wed, 20 Feb 2013 07:13:01 GMT"
  [12]=> string(40) "Cache-Control: post-check=0, pre-check=0"
  [13]=> string(21) "Vary: Accept-Encoding"
  [14]=> string(16) "imagetoolbar: no"
  [15]=> string(17) "Connection: close"
  [16]=> string(37) "Content-Type: text/xml; charset=utf-8"
  [17]=> string(76) "Set-Cookie: cookiesession1=HTEVZV0HJNK2HARUL2QBDADH8RXYESJB;Path=/;HttpOnly "
  [18]=> string(109) "Set-Cookie: exp_last_visit_cookiesession2=tSzDt6/k20k=;Expires=Thu, 20-Feb-2014 10:56:11 GMT;Path=/;HttpOnly "
  [19]=> string(112) "Set-Cookie: exp_last_activity_cookiesession2=e+FVcqI8+Ck=;Expires=Thu, 20-Feb-2014 10:56:11 GMT;Path=/;HttpOnly "
  [20]=> string(68) "Set-Cookie: exp_tracker_cookiesession2=w+13lT4TxY0=;Path=/;HttpOnly "
  [21]=> string(22) "Content-Encoding: gzip"
  [22]=> string(20) "content-length: 2463"
} 
```

根据您通过使用 HTTP uri 使用的 HTTP 规范，内容编码为：

```
[21]=> string(22) "Content-Encoding: gzip" 
```

PHP 开箱即用的 HTTP Wrapper 不支持此功能，因此您需要自己解决

例如，通过使用[zlib Stream Wrapper:](http://docs.php.net/wrappers.compression)：

```
$result = simplexml_load_file('compress.zlib://' . $url); 
```

或者在[`gzdecode`](http://php.net/gzdecode)函数的帮助下：

```
$result = simplexml_load_string(gzdecode(file_get_contents($url))); 
```

包含所有变体的完整示例代码：

```
$url = 'http://www.nationnews.com/site/feed/';

// stream wrapper:

$result = simplexml_load_file('compress.zlib://' . $url);

var_dump($result, $http_response_header);

// gzdecode:

$result = simplexml_load_string(gzdecode(file_get_contents($url)));

var_dump($result, $http_response_header);

// none (the error case):

$result = simplexml_load_file($url);

var_dump($result, $http_response_header); 
```

相关问题：

*   [在 php 上从 CURL 解压缩 gzip 文件](https://stackoverflow.com/q/3002612/367456)
*   [解压缩 gzip 压缩的 http 响应](https://stackoverflow.com/q/8895852/367456)
*   [PHP：调用未定义的函数 gzdecode()](https://stackoverflow.com/q/9801908/367456)

和以下 PHP Bugreports 相关（只是挑了一些，这可能不完整）：

*   [错误 #52926 - stream_context_set_default() 不能按预期使用流链接](https://bugs.php.net/bug.php?id=52926)（2010 年 9 月 26 日）
*   [错误 #47925 - PHPClient 无法解压缩响应（转置解压缩方法？）](https://bugs.php.net/bug.php?id=47925)（2009 年 4 月 8 日）
*   [Doc Bug #29045 - 用于 URL 的 gzopen](https://bugs.php.net/bug.php?id=29045)（2005 年 7 月 7 日）
*   [请求 #28051 - 用于 HTTP 请求的 gzip 接受编码](https://bugs.php.net/bug.php?id=28051)（2004 年 4 月 19 日）

# c - 如何确定一个字符是否有空格？

> ID：14969484
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:21:24.350
> 
> 标签：c

假设我们有`char *str = "123 467";`类似 isdigit() 的数字返回布尔值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:24:49.860

isspace() 怎么样？这将告诉您 char 是否是空白字符。

它包含在 ctype.h 中

# maven - 使用命名空间时的 Ivy makePom 依赖项

> ID：14969485
> 
> 赞同：0
> 
> 时间：2013-02-19T23:21:26.727
> 
> 标签：maven, ant, ivy

我正在使用 makePom Ivy 任务生成一个用于发布到 Artifactory 的 Pom 文件。除了一个问题外，这非常有效。因为命名空间与我们的 Ivy 配置一起使用，所以 pom 文件中的依赖项不是原始的 maven groupId/artifactId，而是命名空间派生的名称。这会导致使用此 pom 的 maven 项目在解析依赖项时失败。

举个例子 ：

在 ivy.xml 文件中，我们将有一个这样的依赖项：

```
<dependency 
  org="org.apache.commons" 
  name="commons-configuration" 
  rev="1.6" 
  conf="compile->compile(*),master(*);runtime->runtime(*)" /> 
```

这在 ivysettings.xml 中有以下 ivy 命名空间规则

```
<rule>
  <fromsystem>
    <src org="org.apache.commons" module="(commons-configuration)" />
  </fromsystem>
  <tosystem>
    <src org="commons-.+" module="commons-.+" />
    <dest org="org.apache.commons" module="$m0" />
  </tosystem>
</rule> 
```

这意味着在 Maven 存储库中，org="commons-configuration" 和 module="commons-configuration"。

当我调用*makePom*时，生成的依赖项将是：

```
<dependencies>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-configuration</artifactId>
      <version>1.6</version>
      <scope>runtime</scope>
    </dependency>
</dependencies> 
```

这是存储库中的未知工件，因为它被存储为 commons-configuration:commons-configuration。

我发现解决这个问题的唯一方法是在 ant 中生成 pom，然后在发布之前跨 pom运行一系列 ant *replaceregexp任务步骤。*虽然它有效，但它似乎是一种修复 pom 的相当复杂的方法，我想知道是否有人遇到过这个问题，以及他们是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:54:18.887

您对这个问题的解决方案是合理的，我不确定是否有更好的方法。[它确实对常春藤名称空间](http://ant.apache.org/ivy/history/latest-milestone/settings/namespaces.html)的使用提出了质疑......

显然，[makepom](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html)任务不知道命名空间。除了避免编辑您的 ivy.xml 之外，您是否有充分的理由使用它们？

我个人建议不要使用它们，它会使故障排除更加复杂，并且相同的依赖项很少位于同名的不同存储库中。可以说它们是两个不同的依赖项:-) 我有兴趣了解更多信息，这是我个人从未找到用例的功能。

# 更新

如果问题是重新生成 ivy 文件以匹配 Maven Central 模块，我可以建议以下 groovy 项目：

[https://github.com/myspotontheweb/ant2ivy](https://github.com/myspotontheweb/ant2ivy)

# wpf - 绑定问题 WPF

> ID：14969492
> 
> 赞同：1
> 
> 时间：2013-02-19T23:21:45.557
> 
> 标签：wpf, telerik, telerik-charting

我是 WPF 的新手，当然我遇到了 Bindings 的一些问题。

我已经初始化了 RadCartesianChart，我想显示来自不同类型的类别列表的数据。对于这些列表中的每一个，我都想要不同的颜色，但是我无法在后面的代码中将 Fill 属性绑定到我的 Color 属性。

这就是我的 XAML 的样子：

```
 <telerik:RadCartesianChart Name="RevChart">
        <telerik:RadCartesianChart.Grid>
            <telerik:CartesianChartGrid MajorYLineDashArray="5, 5" MajorLinesVisibility="Y">
                <telerik:CartesianChartGrid.MajorYLineStyle>
                    <Style TargetType="{x:Type Line}">
                        <Setter Property="Stroke" Value="Gray"/>
                    </Style>
                </telerik:CartesianChartGrid.MajorYLineStyle>
            </telerik:CartesianChartGrid>
        </telerik:RadCartesianChart.Grid>
        <telerik:RadCartesianChart.HorizontalAxis>
            <telerik:CategoricalAxis />
        </telerik:RadCartesianChart.HorizontalAxis>
        <telerik:RadCartesianChart.VerticalAxis>
            <telerik:LinearAxis/>
        </telerik:RadCartesianChart.VerticalAxis>

        <telerik:AreaSeries CategoryBinding="Date" ValueBinding="Rev" Fill="{Binding Color}">

        </telerik:AreaSeries>

    </telerik:RadCartesianChart> 
```

这是我的 C# 代码：

```
public class Revenue
{
    public double Rev { get; set; }
    public DateTime Date { get; set; }
    public Color Color { get; set; }
}

List<Revenue> list = new List<Revenue>();
...
...
this.RevChart.Series[0].ItemsSource = list; 
```

结果我得到了正确的图片，但颜色是默认的。所以我的颜色绑定不起作用。这条线有问题`Fill={Binding Color}`吗？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:10:37.480

这是因为`Fill`是 a`Brush`并且您正在尝试分配 a `Color`，这将不起作用。

您必须将您`Color`的财产分配给`Color`财产`SolidColorBrush`中的`Fill`财产。

例子

```
<telerik:AreaSeries CategoryBinding="Date" ValueBinding="Rev">
    <telerik:AreaSeries.Fill>
        <SolidColorBrush Color="{Binding Color}" />
    </telerik:AreaSeries.Fill>
</telerik:AreaSeries> 
```

# html5-canvas - 设置 Alpha 通道时移动设备上的 html5 画布像素操作问题

> ID：14969496
> 
> 赞同：4
> 
> 时间：2013-02-19T23:22:17.650
> 
> 标签：html5-canvas, android-browser

我正在尝试进行一些原始像素操作，但是在设置 alpha 通道时，我在我的 android 设备上看到了一些非常不一致的结果。我所看到的各种事物的一个简单示例：

`<canvas id='canvas' width='128' height='128'></canvas>`

```
var ctx = $("#canvas")[0].getContext('2d');
var image = ctx.getImageData(0, 0, 128, 128);

var idx = 0;
for (var y=0; y < 128; ++y) {
    for (var x=0; x < 128; ++x) {
        image.data[idx+0] = 128;
        image.data[idx+1] = 128;
        image.data[idx+2] = 128;
        image.data[idx+3] = (x+y);
        idx += 4;
    }
}

ctx.putImageData(image, 0, 0); 
```

此处也提供代码：http: [//jsfiddle.net/U3rwY/](http://jsfiddle.net/U3rwY/)

上面代码的目的是得到一个实心灰色正方形，其 alpha 值从 0 增加到 255，因此我们应该在底角看到一个从背景颜色渐变为灰色的正方形。这正是我们在任何现代桌面浏览器上看到的：

![桌面浏览器](../Images/a5d22c55ab574995adff4cffe7fb0f77.png)

虽然我们在 android 上看到了这个：

![安卓浏览器](../Images/c7d0740c6f669a3c909b8bfbe2ad9f71.png)

看起来它期待一个预先计算的颜色，而不是我给它的 128,128,128。这是正确的，如果是的话，是否有一种可靠的方法来检测哪些浏览器期望哪组值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T03:50:12.083

您的问题可能来自android默认浏览器中的错误，当它绘制一个包含不同于0或255的alpha值的像素时，它会改变其颜色。您不是唯一遇到此问题的人：[https ://code.google.com/p/android/issues/detail?id=17565](https://code.google.com/p/android/issues/detail?id=17565)

我想解决它的唯一机会是报告错误。此外，该错误似乎已在 android 4.1 中部分修复（而 4.0 仍然存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:38:50.823

是的，在android浏览器上有这个问题。safari 6.0 和 opera mobile 可以正常工作，但 opera mini 和 firefox mobile 不行。[http://www.html5rocks.com/en/tutorials/canvas/hidpi/](http://www.html5rocks.com/en/tutorials/canvas/hidpi/)

在这里你可以了解为什么。

# python - 在 python 正则表达式中查找特殊字符时匹配任何内容

> ID：14969501
> 
> 赞同：1
> 
> 时间：2013-02-19T23:22:46.923
> 
> 标签：python, regex, pywikibot

我想使用一个匹配任何东西的正则表达式，但是当它发现一个特殊字符时停止匹配。] 我想使用这个模式`\*\s*\[\[.*`，当变成这个时：`]]`它停止匹配。

例如它应该匹配`* [[anything here]]`or`* [[]]`并且它不应该匹配 the `* [[anythng here]] anything ]]`or 不应该匹配 the`* [[]]]]`

我想在 Python 中将这个正则表达式用于 Wikipedia 机器人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:24:16.593

```
\*\s*\[\[.*?\]\] 
```

上述`?`之后`.*`使比赛不情愿/不贪婪。它只会匹配到第*一个*实例`]]`而不是最后一个实例。

# javascript - 为什么 angularJs 更新数组/哈希图的所有元素，如果只有一个改变？

> ID：14969502
> 
> 赞同：4
> 
> 时间：2013-02-19T23:22:46.917
> 
> 标签：javascript, frameworks, angularjs

我有一个简单的哈希图和一个以文本形式显示状态的简单方法，但是当我只更新 1 个用户状态时，它们都在更新（为所有用户调用函数）。有没有办法只更新一个元素而不是全部？

示例代码在这里，只需查看单击“更改状态”按钮时控制台中会发生什么。

HTML：

```
<div ng-app="myApp">
  <div ng-controller="Ctrl">
    <div class="user-panel" ng-repeat = "(id, user) in _users">
        Status: 
        <span class="user-status{{user.status}}">
            {{getStatusInText(user.status)}}
        </span>
        <hr>
        <div class="toLeft">(<b>{{id}}</b>) {{user.name}}</div>
        <div class="toRight">
            <button ng-click="changeUserStatus(id, '1')">Change Status</button>
        </div>
       <div class="clear"></div>
    </div>
  </div>    
</div> 
```

AngularJS：

```
var app = angular.module('myApp', []);

function Ctrl($scope) {
    $scope._users = {"123":{"name":"test","status":"0"}, "124":{"name":"test2", "status":"0"},"125":{"name":"test2", "status":"0"}};

    $scope.getStatusInText = function(status) {
        console.log("CALLED: " + status);
        return (status === "1") ? "online" : "offline";
    }

    $scope.changeUserStatus = function(uId, status) {
        $scope._users[uId].status = status;

    }
} 
```

* * *

上面例子的小提琴：

[http://jsfiddle.net/ztVnj/3](http://jsfiddle.net/ztVnj/3/)

另一个迭代示例，每次都使用 getStatusInText 函数调用。

[http://jsfiddle.net/ztVnj/4/](http://jsfiddle.net/ztVnj/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T02:27:37.200

**更新示例**：http: [//jsfiddle.net/ztVnj/5/](http://jsfiddle.net/ztVnj/5/)

**这里的理论**：

将代价高昂的操作移到 hashmap 之外，手动控制更新。如前所述，如果 hashmap 完全改变，整个 ng-repeat 将被重绘。

**变化**：

绑定到 $scope，添加一个数组以将状态值映射到 id。

```
$scope._users = {"123":{"name":"test","status":"0"}, "124":{"name":"test2", "status":"0"},"125":{"name":"test2", "status":"0"}};
$scope._userStatus = []; 
```

更改模板以查找此数组：

```
Status: <span class="user-status{{user.status}}">{{_userStatus[id]}}</span> 
```

将 changeStatus 函数更新为唯一更新状态文本的位置，然后在开始时执行一次初始迭代。

```
$scope.changeUserStatus = function(uId, status) {
    console.log("Button Clicked.");
    $scope._userStatus[uId] = $scope.getStatusInText(status);
}

angular.forEach($scope._users, function(user, uId) {
    $scope._userStatus[uId] = $scope.getStatusInText(user.status);
}); 
```

# c - 套接字直接协议错误：“协议不支持地址族”

> ID：14969503
> 
> 赞同：1
> 
> 时间：2013-02-19T23:22:48.930
> 
> 标签：c, linux, ubuntu, ubuntu-12.04, infiniband

我想我会在我们的 infiniband 硬件上试用 SDP。

但是，当我尝试添加 AF_INET_SDP 作为第一个参数时，`socket()`我收到以下错误：

```
"Address family not supported by protocol". 
```

最初我有：

```
#define AF_INET_SDP 26 
```

但是在做了一些阅读之后，注意到一段时间后应用了一个补丁来将此值更改为 27。

当设置为 26 我得到错误：

```
"Error binding socket: No such device" 
```

有没有人设法让 SDP 在 Ubuntu 12.04 上运行？你做了什么让它启动和运行？

我已经安装了 libsdp1 和 libsdpa-dev

在 iperf 上使用 LD_PRELOAD 方法我也得到第一个错误：

```
LD_PRELOAD=libsdp.so iperf -s
dir: /tmp/libsdp.log.1000 file: /tmp/libsdp.log.1000/log
socket failed: Address family not supported by protocol
bind failed: Bad file descriptor 
```

因此我假设 27 是正确的域号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:24:51.960

SDP 尚未在主线 linux 内核上被接受。在最近的 Fedora 上，他们没有发布它，用户空间 libsdp 也没有。如果您仍想尝试，Matt 是对的，有问题的模块是“ib_sdp”。尝试 modprobe ib_sdp 并再次运行您的示例。

# android - Facebook 会话单例使用

> ID：14969506
> 
> 赞同：2
> 
> 时间：2013-02-19T23:22:59.420
> 
> 标签：android, singleton, facebook-android-sdk

我正在为我的 Android 应用程序开发 Facebookintegration 并减少麻烦，我正在尝试创建一个单例类来将 facebook 逻辑与我的应用程序的主要逻辑分开。

我希望能够从我的应用程序的不同部分（入口点、异步任务......）调用这个类。此时，我首先以applicationcontext为上下文调用initialize函数。在这个初始化之后，我希望能够调用例如。`FacebookSession.getInstance().login()`和`FacebookSession.getInstance().requestWithQuery(examplestring)`。

问题是我找不到像样的文档。甚至 facebook 官方示例也使用旧的 Facebook 对象，该对象已被弃用。我把这个类和我能找到的不同部分的代码放在一起，我想出了这个：

```
package be.ugent.zeus.hydra.util.facebook;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import com.facebook.HttpMethod;
import com.facebook.Request;
import com.facebook.Session;
import com.facebook.SessionState;

public class FacebookSession {

    private static final String APP_ID = "hidden";
    private static final String ACCESS_TOKEN = "hidden";
    private static FacebookSession fbSession;
    public static final String TAG = "FACEBOOK";
    private Activity activity;
    private static Session.StatusCallback statusCallback = new SessionStatusCallback();

    protected FacebookSession() {
    }

    public static void initialize(Context context) {

        Session session = Session.getActiveSession();
        if (session == null) {
            session = new Session.Builder(context)
                .setApplicationId(APP_ID)
                .build();
        }
        Session.setActiveSession(session);
    }

    public static FacebookSession getInstance() {

        if (fbSession == null) {
            fbSession = new FacebookSession();
        }

        return fbSession;
    }

    public Session getSession() {
        return Session.getActiveSession();
    }

    public void tryOpenSession(Activity activity) {
        Session session = Session.openActiveSession(activity, false, statusCallback);
        Session.setActiveSession(session);
    }

    public void login(Activity activity) {
        Session session = Session.getActiveSession();

        if (!session.isOpened() && !session.isClosed()) {
            Session.openActiveSession(activity, true, statusCallback);
        }
    }

    public void logout() {
        Session session = Session.getActiveSession();

        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
        }
    }

    public boolean isOpen() {

        Session session = Session.getActiveSession();
        return session.isOpened();
    }

    public Request requestWithQuery(String query) {

        Bundle bundle = new Bundle();
        bundle.putString("q", query);

        return requestWithGraphPath("/fql", bundle, "GET");
    }

    private Request requestWithGraphPath(String path, Bundle bundle, String method) {

        // Get the session
        Session session = Session.getActiveSession();

        // No session? Try to open one without user interaction
        if (session == null) {
            session = Session.openActiveSession(activity, false, statusCallback);
            Session.setActiveSession(session);
        }

        // Still no session? Use the default key
        if (session == null) {
            bundle.putString("access_token", ACCESS_TOKEN);
        }

        return new Request(session, path, bundle, HttpMethod.valueOf(method));

    }

    private static class SessionStatusCallback implements Session.StatusCallback {

        @Override
        public void call(Session session, SessionState state, Exception exception) {

            Log.i(TAG, state.toString());

            switch (state) {
                case CLOSED:
                case CLOSED_LOGIN_FAILED:
                    session.closeAndClearTokenInformation();
                    break;
                default:
                    break;
            }
        }
    }
} 
```

查询部分工作得非常整洁，但会话却没有。例如，如果我调用 login 函数，则活动会话为空，但是我确实使用应用程序入口点中的 applicationcontext 初始化了 Session。

具体来说，我有这个问题：

*   这是（尝试）跟踪会话状态的“好”方式吗？可以这样做吗？如果是这样，我做错了什么，它只是不起作用？

作为后续问题：

*   如果不是，那么在应用程序生命周期和应用程序会话之间跟踪会话的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:31:19.340

我不是 100% 确定我理解这个问题，但是 FWIW，以下对我有用：

在某处的活动中：

```
Session.openActiveSession(MyActivity.this, true, new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if(session.isOpened()) {
            Log.d(TAG, "FB session opened successfully");
        } else {
            Log.d(TAG, "FB session not opened ... " + exception.toString());
        }
    }
}); 
```

然后，在其他地方（不同的 Activity、AsyncTask 等）使用 Session.getActiveSession() 访问会话：

```
Session session = Session.getActiveSession();
if(session!=null && session.isOpened()) {
    Request.executeMyFriendsRequestAsync(session, new Request.GraphUserListCallback() {

        @Override
        public void onCompleted(List<GraphUser> users, Response response) {
            for(GraphUser u : users) {
                Log.d(TAG, ""+u.getId()+ ": " + u.getName());
            }
        }

    });
} 
```

所以在我看来，Facebook 的 Session 类给了你想要的东西（访问活动会话“单例样式”）

高温高压

# java - 带有scene2d和演员的libgdx没有显示精灵

> ID：14969507
> 
> 赞同：3
> 
> 时间：2013-02-19T23:23:13.690
> 
> 标签：java, libgdx, scene2d

我正在测试 Libgdx 和 Scene2d。我希望这个小程序能显示一个标志，但它只画了一个黑屏。知道我错过了什么吗？

```
public class MyGame implements ApplicationListener {
    private Stage stage;

    @Override
    public void create() {
        stage = new Stage(800, 800, false);
        Gdx.input.setInputProcessor(stage);
        MyActor actor = new MyActor();
        stage.addActor(actor);
    }

    @Override
    public void render() {
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        stage.act(Gdx.graphics.getDeltaTime());
        stage.draw();
    }

    @Override
    public void dispose() {
        stage.dispose();
    }

    @Override
    public void resize(int width, int height) {
            stage.setViewport(800, 800, false);
    }
}

public class MyActor extends Actor {
    Sprite sprite;

    public MyActor() {
        sprite = new Sprite();
        sprite.setTexture(new Texture("data/libgdx.png"));

        setWidth(sprite.getWidth());
        setHeight(sprite.getHeight());
        setBounds(0, 0, getWidth(), getHeight());
        setTouchable(Touchable.enabled);
        setX(0);
        setY(0);
    }

    @Override
    public void draw(SpriteBatch batch, float parentAlpha) {
        Color color = getColor();
        batch.setColor(color.r, color.g, color.b, color.a * parentAlpha);
        batch.draw(sprite, getX(), getY());
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T08:16:50.717

使用纹理构造精灵并使用 Gdx.file.internal：

```
sprite = new Sprite(new Texture(Gdx.files.internal("data/libgdx.png"))); 
```

无论如何，如果您只想显示和操作图像，您可能更喜欢使用 Image 类：

```
 private Stage stage;
    private Texture texture;

    @Override
    public void create() {
        stage = new Stage();
        Gdx.input.setInputProcessor(stage);

        texture = new Texture(Gdx.files.internal("data/libgdx.png"));
        TextureRegion region = new TextureRegion(texture, 0, 0, 512, 275);          

        com.badlogic.gdx.scenes.scene2d.ui.Image actor = new com.badlogic.gdx.scenes.scene2d.ui.Image(region);
        stage.addActor(actor);
    }

    @Override
    public void render() {
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        stage.act(Gdx.graphics.getDeltaTime());
        stage.draw();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T16:25:34.253

`Actor`在我明确地将' 高度 ( `setHeight(height)`) 和宽度 ( `setWidth(width)`) 设置为`Sprite`' 值之前，我也遇到了黑屏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-15T16:46:58.330

```
tex = new Texture(Gdx.files.internal("happy.png"));
Image happy = new Image(tex);    
/* happy.setBounds(happy.getX(), happy.getY(), happy.getWidth(), happy.getHeight());  not needed if using full image               */    
stage.addActor(happy); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-22T08:39:31.607

你的问题很可能是这条线，在draw方法中

```
batch.draw(sprite, getX(), getY()); 
```

我在绘制精灵时看到的代码是

```
sprite.draw(batch); 
```

# c# - 获取 TypeLoadException 而不是 Firebird DB 特定的异常

> ID：14969513
> 
> 赞同：2
> 
> 时间：2013-02-19T23:23:29.467
> 
> 标签：c#, .net, firebird

我在使用 Firebird 数据库的 C# .NET 4.0 dll（使用存根/测试应用程序运行）时遇到了一个奇怪的问题。设置似乎是正确的，但是当 Firebird（我认为是 2.5.2）cli​​ent/dll/provider 需要抛出异常时，我总是得到以下信息：

> 失败：System.TypeLoadException：无法从程序集“mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.Runtime.CompilerServices.ExtensionAttribute”。

因此，例如，如果我将连接字符串更改为不指向我的数据库文件，它将给出这个异常而不是更相关的东西。无论我是从 Visual Studio 2010 调试它还是手动运行 EXE，都会发生这种情况。

有另一个人在处理相同的代码，他没有这个问题，所以它似乎与代码无关。

有没有人见过或听说过这样的事情？不得不猜测异常试图告诉我什么变得令人沮丧。

**更新：** 所以看起来好像一切都是 x86，所以它看起来不像是位不匹配。而且我已经检查并再次检查了我是否拥有正确版本的提供程序（例如 NETProvider-3.0.2-Net40）。我仍然收到 TypeLoadException。

作为参考，以防它启发任何人，我正在运行 Windows XP 32 位。获得相关/实际异常的另一个人在 Windows 7（可能是 64 位）上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:25:41.193

问题是您在 .NET 4 系统上使用 Firebird .NET 提供程序的 .NET 4.5 版本。Microsoft 将 .NET 4.5 进行了就地更新，将其保留为 4.0.0.0 版本，同时围绕诸如`System.Runtime.CompilerServices.ExtensionAttribute`能够在 .NET`mscorlib`中使用扩展方法之类的东西进行移动`mscorlib`。当 .NET 4.5 编译版本在 .NET 4 上运行时，它无法找到该类，因为它位于与预期不同的库中。

底线：确保`NETProvider-3.0.2.0-NET40.7z`从[http://www.firebirdsql.org/en/net-provider/安装 .NET 4 版本 ( )](http://www.firebirdsql.org/en/net-provider/)

此信息也在[此博客](https://www.tabsoverspaces.com/233101-error-could-not-load-type-system-runtime-compilerservices-extensionattribute-from-assembly-mscorlib-version4-0-0-0-cultureneutral-publickeytokenb77a5c561934e089-on-net-4-0-net-4-5)中进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:43:03.427

尝试了不同的 firebug 提供程序版本，最后在服务器机器上将 .NET 更新到 4.5 对我有用。

.NET 4.5 下载： http: [//go.microsoft.com/ ?linkid=9810134](http://go.microsoft.com/?linkid=9810134)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:28:52.390

当位数不匹配时，通常会出现此错误。确保您的 Firebird 驱动程序（以及下游的所有相关 DLL）和您的可执行文件都设置为相同的位数。

# excel - Excel 表格参考 - 不同方法是否存在速度因素（惩罚或奖励）

> ID：14969515
> 
> 赞同：0
> 
> 时间：2013-02-19T23:23:44.847
> 
> 标签：excel, excel-formula, excel-2010

我工作一个巨大的 excel 工作表（大约 40,000 行，几十列），其中每个单元格镜像引用另一个工作表中的相同单元格（别介意奇怪的架构，来自导出这个 excel 庞然大物的软件的限制，我必须采取这是理所当然的）仅在此工作表中就有大约 150,000 个单元格引用。我想知道引用其他表格单元格的最快速有效的方法是什么：

*   经典的excel方法：使用类似的东西：`=value(datasheetname!c2)`
*   使用相对较新的表格单元格引用，例如：`=table_name[@c_rowname_or_number]`

为了使这个巨大的工作表响应，我已经需要禁用自动计算，所以每一个小的性能改进对我来说都是很好的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:30:18.073

首先，我不确定您是否正在寻找正确的问题 - Excel 简单链接单元格的性能非常高 - 在我的示例工作簿中，我链接了 5M 单元格，运行计算只需要 0.4"。通常, 即使是`VLOOKUP`大型数据集上的一些公式也会比任何数量的链接单元格产生更大的性能影响。查看[此答案](https://superuser.com/questions/547083/how-do-you-speed-up-searching-large-columns-in-excel/547100#547100)以了解如何在此处提高速度。

为了回答您的问题，我刚刚在具有 5M 单元的工作簿上运行了一些计时器。

如果我通过一个简单的引用 ( `=Sheet1!A2`) 链接它们，我得到以下结果：
10x `Application.CalculcateFullRebuild`: 47"
10x `Application.CalculateFull`: 3,7"

使用表格通知 ( `=Table1[@Column1]`) 我得到了以下结果：
10x `Application.CalculcateFullRebuild`: 193" (4.1x)
10x `Application.CalculateFull`: 5,7" (1.54x)

因此，在这两种情况下，表格通知都会明显变慢。在您的情况下，这`.CalculateFull`可能更适用，因为 Excel 仅在加载文件或更新时构建计算树 - 否则只会重新计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:01:30.427

我发现如果动态命名的引用（使用 OFFSET）非常大，它们会产生重大影响。我会说，如果您的工作表中有任何这些并且它们不一定必须存在（设置列数等），那么您应该将它们更改为静态引用。

# html - 如何为 div 提供比原始背景更暗的背景？

> ID：14969519
> 
> 赞同：0
> 
> 时间：2013-02-19T23:24:09.567
> 
> 标签：html, css

我正在为我的 php 网站制作日历视图。我有一张有 n 行的桌子。在那张桌子上，奇数行有浅绿色背景，甚至有浅粉色背景。

之后我有一些 div 放在相应的 tr 上，带有 z-index: 8 css 属性。

但我想给他们比背景表行更暗的背景。

像粉红色行上的 div 应该有深粉红色背景，绿色行 div 应该有深绿色背景。

表和 div 都是由 jquery 代码自动开发的。

任何人都可以帮助我，我怎么能做到这一点？

我在 jquery fullcalendar 资源视图中执行此操作。

我的一些 html 和 css 代码是：

```
css :

.fc-border-separate tr th{
background: #BFDBFF;
}
.fc-border-separate tr:nth-child(odd) td{
background: #D7FFD7; 
}
.fc-border-separate tr:nth-child(even) td{
background: #FFD5FF;
}
.fc-event {
border-style: solid;
border-width: 0;
font-size: .85em;
cursor: default;
}

 a.fc-event,
 .fc-event-draggable {
cursor: pointer;
}

a.fc-event {
text-decoration: none;
}

.fc-rtl .fc-event {
text-align: right;
}

.fc-event-skin {
border-color: #36c;     /* default BORDER color */
background-color: #36c; /* default BACKGROUND color */
color: #fff;            /* default TEXT color */
}

.fc-event-inner {
position: relative;
width: 100%;
height: 100%;
border-style: solid;
border-width: 0;
overflow: hidden;
} 
```

html：

```
 <table class="fc-border-separate tblcalendar">
 </table>

 <div class='fc-event fc-event-skin fc-event-inner' style='position: absolute; z-index:8'>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:35:35.523

[这是你要找的吗？](http://jsfiddle.net/amullins/XQzeL/3/)

基本思想是使用伪类`:nth-child(odd)`and `:nth-child(even)`，如下所示：

```
tr:nth-child(odd) {
    background-color:lightgreen;
    height:60px;
}

tr:nth-child(even) {
    background-color:pink;
}

tr:nth-child(odd) div {
    background-color:green;
}

tr:nth-child(even) div {
    background-color:red;
} 
```

# javascript - 无法在与实际页面不同的服务器上托管文本轨道的原因是什么，有没有办法消除这种限制？

> ID：14969525
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:24:30.217
> 
> 标签：javascript, html, same-origin-policy, video.js

在 video.js 标签构建器页面 ( [http://videojs.com/tag-builder/](http://videojs.com/tag-builder/) ) 上，声明“尚不支持与页面不同的服务器上的文本文件，即您自己的文件将无法工作在下面的测试中，但会在您自己的网站上。”

它背后的原因是什么，有没有办法消除这种限制？

PS：我使用的托管系统将所有资产文件（图像、css、js、文本等）存储在与实际网页不同的服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:47:43.680

参见[“同源策略”](http://en.wikipedia.org/wiki/Same_origin_policy) 和[“规避同源策略的方法”](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)。

# java - Java 堆行为

> ID：14969533
> 
> 赞同：9
> 
> 时间：2013-02-19T23:25:04.620
> 
> 标签：java, oracle, memory, jvm, heap-memory

给定如下的 java 内存配置

```
 -Xmx2048m -Xms512m 
```

当内存使用量增加到超过 512m 时，VM 的行为是什么？它是否遵循特定的算法？IE。它是直接达到最大值，是加倍，还是递增，还是只在需要内存时分配？手术有多贵？

我正在专门研究 Oracle/Sun JVM 1.6 版。我认为这在某处的 Oracle 网站上有记录，但我找不到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T23:33:00.933

决定何时需要调整大小是垃圾收集器的工作，因此它由 GC 参数“MinFreeHeapRatio”决定。如果 GC 需要更多空间，它将增长到该值指定的堆百分比可用的大小。

现代平台上的典型值是 40ish，所以如果您从 512MB 开始并且有不到 40% 的可用空间，这意味着您超过了 ~308MB，它将增加直到 40% 再次可用。所以说收集后仍有 400MB 的活动对象，你的堆将上升到 ~667MB。（是的，它被命名为比率，但需要一个 % 值作为参数......搜索我！）

请注意，这有点不准确，垃圾收集器是“分代的”，实际上可以调整各个代的大小，但它也有代大小之间的强制比率，如果您的对象以大致估计的方式分布在长寿命和短寿命之间，它非常适合信封背面。

这适用于 Java 6 中的默认设置。如果您使用自定义垃圾收集器配置，它可能会有所不同。你可以在这里阅读：[http ://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#generation_sizing.total_heap](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#generation_sizing.total_heap)

（操作的“费用”取决于操作系统和其他情况。如果系统被加载并且操作系统必须进行一些交换来为您创建一个连续的内存块，那么它可能是非常贵！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:40:55.473

使用`-verbose:gc`和/或`-XX:+PrintGCDetails`选项应该会给你更多的细节。

`-verbose:gc`这是一个打开选项的示例输出：

```
[GC 325407K->83000K(776768K), 0.2300771 secs]
[GC 325816K->83372K(776768K), 0.2454258 secs]
[Full GC 267628K->83769K(776768K), 1.8479984 secs] 
```

以上内容来自官方[文档](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)的解释：

> 在这里，我们看到两个次要集合，然后是一个主要集合。箭头前后的数字（例如，`325407K->83000K`从第一行开始）分别表示垃圾回收前后活动对象的组合大小。在次要收集之后，大小包括一些垃圾（不再存在）但无法回收的对象。这些对象要么包含在永久代中，要么从永久代或永久代中引用。
> 
> 括号中的下一个数字（例如，`776768K`第一行中的 ( ) ）是堆的提交大小：Java 对象在不向操作系统请求更多内存的情况下可用的空间量。请注意，此数字不包括幸存者空间之一，因为在任何给定时间只能使用一个，也不包括永久代，其中包含虚拟机使用的元数据。
> 
> 行中的最后一项（例如`0.2300771 secs`）表示执行收集所花费的时间；在这种情况下，大约是四分之一秒。
> 
> 第三行主要集合的格式类似。

以这种方式运行应用程序并更新最小和最大堆大小可以很好地了解 VM 的堆分配和垃圾收集模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:31:45.480

需要注意的是，初始化时的JVM实际上保留了最大的地址空间，但不分配物理内存。通常，JVM 会将空间分配给老年代和年轻代。新生代中有中间空间。调用的新对象包含在年轻代中。

当中间空间被填满时，调用 GC 将引用对象移动到年轻代段中称为幸存者空间的中间空间之一。GC 可能会通过保存线程的状态算法或算法来遵循“stop-the-world”，以便进程继续运行（？）。

当 Survivor 空间填满时，JVM 会调用完整的 GC。

# javascript - 结合 ActiveXObject 和 readAsBinaryString()

> ID：14969535
> 
> 赞同：0
> 
> 时间：2013-02-19T23:25:04.440
> 
> 标签：javascript, filereader, activexobject

我想在我的浏览器中编写一个小型 mp3 播放器。所有 mp3 文件都保存在本地。

所以，我必须使用

```
var filePath = '...';
var fso = new ActiveXObject("Scripting.FileSystemObject");
var file = fso.GetFile(filePath); 
```

然后

```
var oFReader = new FileReader();
oFReader.readAsBinaryString(file); 
```

但我得到错误，该对象不支持“readAsBinaryString()”。所以，我认为对象“文件”与预期的不完全相同。

请你帮助我好吗？如何结合 ActiveXObject() 和 readAsBinaryString()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:21:57.387

`new ActiveXObject(...)`将始终返回一个“自动化对象”。与 DOM 对象相比，这是一种不同类型的宿主对象。

具体来说，期望[Blob](https://developer.mozilla.org/en-US/docs/DOM/Blob)`readAsBinaryString`类型的对象作为参数，该对象可能是 DOM [File](https://developer.mozilla.org/en-US/docs/DOM/File)对象，但*不是*自动化对象。

 *但是，在撰写本文时，`readAsBinaryString`已从[HTML5 文件 API 草案](http://www.w3.org/TR/FileAPI/)中删除。

与其尝试读取音频文件，更好的方法是使用 HTML5`<audio>`标签：

```
<audio autoplay="autoplay">
    <source src="YOUR_FILE_PATH_GOES_HERE" type="audio/wav">
</audio> 
```

HTML5 音频标签参考：[https ://developer.mozilla.org/en-US/docs/HTML/Element/audio](https://developer.mozilla.org/en-US/docs/HTML/Element/audio)

请务必检查您的浏览器是否支持所需的音频格式。例如，并非所有浏览器都支持“mp3”。如果您正在讨论 ActiveX 对象，大概您使用的是 Internet Explorer，它应该支持 9+ 版本的 mp3 文件（[来源](http://msdn.microsoft.com/en-gb/ie/hh410106.aspx)）。*

# linq - LINQ Max Date with group by

> ID：14969539
> 
> 赞同：1
> 
> 时间：2013-02-19T23:25:32.973
> 
> 标签：linq

我需要按 1) 不同项目出现的次数对列表进行排序，然后 2) 如果两个不同行的计数相同，则该组的最近使用日期。

我的按功能分组和按计数排序在没有日期的情况下工作：

```
(from x in data
group x by new { x.Col1, x.Col2, x.Col3} 
into g
let count = g.Count()
select new
{
    g.Key.Col1,
    g.Key.Col2,
    g.Key.Col3,
    count
}).OrderByDescending(x => x.count) 
```

但是，我一直无法成功添加日期排序。我试图将日期列添加为按表达式分组中的聚合，但这不起作用。

```
(from x in data
group x by new { x.Col1, x.Col2, x.Col3, MaxDate = x.CreatedDateTime.Max()}
into g
let count = g.Count()
select new
{
    g.Key.Col1,
    g.Key.Col2,
    g.Key.Col3,
    count,
    g.Key.MaxDate
}).OrderByDescending(x => x.count).ThenByDescending(x => x.MaxDate) 
```

我明白为什么它不起作用，我只是想不出另一种添加二级排序的方法。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:41:55.140

这就是你要找的（我认为）

```
from x in data
group x by new { x.Col1, x.Col2, x.Col3} 
into g
let count = g.Count()
select new
{
    g.Key.Col1,
    g.Key.Col2,
    g.Key.Col3,
    MaxDate = g.Select(x => x.CreatedDateTime)
               .OrderByDescending(d => d).FirstOrDefault(),
    count
}).OrderByDescending(x => x.count).ThenByDescending(x => x.MaxDate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:39:28.930

怎么样：

```
 var ordered = Elev8SnaTowelTables
        .GroupBy(x => new { x.Col1, x.Col2, x.Col3 })
        .OrderByDescending(g => g.Count())
        .ThenByDescending(g => g.Max(x => x.CreatedDateTime)); 
```

# php - PHP MySQL 数据库连接实践

> ID：14969546
> 
> 赞同：0
> 
> 时间：2013-02-19T23:26:19.660
> 
> 标签：php, mysql, web-applications

1.  当我的 web 应用程序启动时，class1 连接到 MySQL DB。
2.  在 ajax 请求中，class2 从 class3 创建一个对象。class2 和 class3 都连接到数据库。

此时我收到“连接过多”错误。

Web 应用程序的数据库连接的最佳实践是什么？

# c++ - 使用 glOrtho 缩放到鼠标位置

> ID：14969547
> 
> 赞同：3
> 
> 时间：2013-02-19T23:26:36.230
> 
> 标签：c++, opengl, zooming, mouse

目前我正在使用 glOrtho 围绕我正在渲染的 2D 图形进行缩放和平移。

我已将视口设置为标准宽度和高度。然后我设置 glOrtho 以便我的截锥体使屏幕坐标与世界坐标匹配。

```
glViewport(0, 0, window_width,window_height);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0, window_width,window_height,0 , 100, -100); 
```

当我在鼠标回调中执行缩放功能时，我将平截头体边缘乘以缩放因子......

```
glOrtho( 0 * zoomOut,
window_width * zoomOut,
window_height * zoomOut,
0 * zoomOut, 
100, -100); 
```

我的问题是....如何以鼠标位置为中心进行缩放？

我试过这个......（其中 mouseStoreX 和 mouseStoreY 是第一次单击时存储的位置）

```
glOrtho( (0 -mouseStoreX )* zoomOut + mouseStoreX,
(window_width - mouseStoreX) * zoomOut + mouseStoreX,
(window_height - mouseStoreY) * zoomOut + mouseStoreY,
(0 - mouseStoreY) * zoomOut + mouseStoreY, 
100, -100); 
```

它似乎有效，但是当我进行新的点击时，截头体会跳来跳去。我认为在存储鼠标位置时我没有考虑到 zoomOut 因素。

编辑：这是我仍在努力解决的最新代码...

```
void ZoomOrtho(){ //ON MOUSE CLICK.....

if (zooming == false){
keyStore.LMx = keyStore.Mx;   //store mouse pos for next comparison
keyStore.LMy = keyStore.My;
//get mouse pos
mouseStoreX = keyStore.Mx;//mouse pos at this moment
mouseStoreY = keyStore.My;

//get current projection matrices
glGetDoublev( GL_MODELVIEW_MATRIX, modelview );
glGetDoublev( GL_PROJECTION_MATRIX, projection );
glGetIntegerv( GL_VIEWPORT, viewport );
//flip Y for opengl reasons
winY = (float)viewport[3] - winY;
//get world mouse coordinate
gluUnProject( mouseStoreX, mouseStoreY , 0.0, modelview, projection, viewport, &posX_,&posY_, &posZ_);

// calc difference between mouse world pos and centre of 'camera'
dx = posX_ - FS.centerX;
dy = posY_ - FS.centerY;

}
//ON DRAG......
zooming = true;

//do mouse movement detection and increment zoomOut
//#################################################
int xDiff = keyStore.Mx - keyStore.LMx;  //mouse drag difference in screen space just  for incrementing zoom
int yDiff = keyStore.My - keyStore.LMy;  //

if (xDiff > 0 && (zoomFactor >= 0.5 ) )   {
zoomFactor -= zoomInc;
if  (zoomFactor < 0.5 ) {zoomFactor = 0.5;}
}
else if (xDiff < 0 && (zoomFactor <= 2.0 ))  {
zoomFactor += zoomInc;
if (zoomFactor > 2.0){zoomFactor = 2.0;}
}
//#################################################

//fill structure with clipping plane values. zooms ortho projection and keeps mouse pos anchored.
FS.left =  ((FS.centerX - dx - (window_width/2.0))*zoomFactor) +dx;
FS.right = ((FS.centerX -dx + (window_width/2.0))*zoomFactor)+dx ;
FS.bottom = ((FS.centerY -dy + (window_width/2.0))*zoomFactor)+dy;
FS.top =    ((FS.centerY -dy  - (window_width/2.0))*zoomFactor) +dy;

// store last mouse pos for next comparison.
keyStore.LMx = keyStore.Mx;
keyStore.LMy = keyStore.My;

}

void zoomRelease(){

cout << " releasing" << std::endl;
//set zoom to false so we know we are not draggin mouse anymore.
zooming = false;
keyStore.LMx = 0;
keyStore.LMy = 0;

// recenter by taking midpoint between new left and right clipping planes so dx has a reference point
FS.centreX = (FS.right-FS.left)/2.0;

}

void DrawGui(){

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(FS.left, FS.right,FS.bottom, FS.top, 1, -1);

glMatrixMode( GL_MODELVIEW );
glLoadIdentity();
//do drawing

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:55:21.690

试一试：

```
// g++ main.cpp -o main -lglut -lGL && ./main
#include <GL/glut.h>

double centerX = 0, centerY = 0;
double width = 0, height = 0;
void mouse( int button, int state, int mx, int my )
{
    // flip mouse y axis so up is +y
    my = glutGet( GLUT_WINDOW_HEIGHT ) - my;

    // convert mouse coords to (-1/2,-1/2)-(1/2, 1/2) box
    double x = ( mx / (double)glutGet( GLUT_WINDOW_WIDTH ) ) - 0.5;
    double y = ( my / (double)glutGet( GLUT_WINDOW_HEIGHT ) ) - 0.5;

    if( GLUT_UP == state )
    {
        double preX = ( x * width );
        double preY = ( y * height );

        double zoomFactor = 1.5;
        if( button == GLUT_LEFT_BUTTON )
        {
            // zoom in
            width /= zoomFactor;
            height /= zoomFactor;
        }
        if( button == GLUT_RIGHT_BUTTON )
        {
            // zoom out
            width *= zoomFactor;
            height *= zoomFactor;
        }

        double postX = ( x * width );
        double postY = ( y * height );

        // recenter
        centerX += ( preX - postX );
        centerY += ( preY - postY );
    }

    glutPostRedisplay();
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho
        (
        centerX - ( width / 2.0 ),
        centerX + ( width / 2.0 ),
        centerY - ( height / 2.0 ),
        centerY + ( height / 2.0 ),
        -1,
        1     
        );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glColor3ub( 255, 0, 0 );
    glBegin( GL_TRIANGLES );
    glVertex2i( 0, 0 );
    glVertex2i( 150, 0 );
    glVertex2i( 0, 150 );
    glVertex2i( 0, 0 );
    glVertex2i( -150, 0 );
    glVertex2i( 0, -150 );
    glEnd();

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 600, 600 );
    glutCreateWindow( "GLUT" );
    glutDisplayFunc( display );
    glutMouseFunc( mouse );

    width = glutGet( GLUT_WINDOW_WIDTH );
    height = glutGet( GLUT_WINDOW_HEIGHT );    

    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T23:03:50.247

如果您想走不同的路线并简单地使用 glTranslate 和 gluPerspective，您可以获得相同的效果。滚轮的鼠标事件（使用 PyOpenGL）可能类似于：

```
def MouseWheelScroll(self, event):
    """Called when the mouse's scroll wheel is scrolled up or down. This modifies the zoomFactor
    which renders the graphics closer or further away on the screen. It also translates the graphics
    slightly based on the position of the mouse. This creates an effect of zooming to the location
    of the mouse on the screen.
    """
    scrolledUp = event.GetWheelRotation() # Returns positive for up, negative for down
    self.x, self.y = event.GetPosition()

    viewport = glGetIntegerv(GL_VIEWPORT)
    width = viewport[2]
    height = viewport[3]
    centerX = width / 2.0
    centerY = height / 2.0

    # Make sure cursor is on the screen
    if ((self.x > 0 and self.x < width) and (self.y > 0 and self.y < height)):
        if (scrolledUp > 0):
            self.zoomFactor -= 2.0
            self.translation[0] -= (self.x - centerX)
            self.translation[1] += (self.y - centerY)
        else:
            self.zoomFactor += 2.0
            self.translation[0] += (self.x - centerX)
            self.translation[1] += (self.y - centerY)

        if (self.zoomFactor > 150.0):
            self.zoomFactor = 150.0
        elif (self.zoomFactor < 0.1):
            self.zoomFactor = 0.1

    self.Refresh(False) 
```

然后，您只需要翻译图形、设置透视图，然后渲染场景。

```
# Translate graphics
glTranslatef(0.0, 0.0, (self.translation[1]/100.0) * (math.tan(self.cameraPosition[0]/self.cameraPosition[1])))
glTranslatef(0.0, (self.translation[0]/100.0) * (math.tan(self.cameraPosition[0]/self.cameraPosition[1])), 0.0)

# Set Perspective
glMatrixMode(GL_PROJECTION)
glLoadIdentity()
gluPerspective(self.zoomFactor, float(width)/float(height), self.nearPlane, self.farPlane)

# Render Scene
glMatrixMode(GL_MODELVIEW)
...Draw stuff here... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:46:46.353

试一试：

```
// g++ main.cpp -o main -lglut -lGL && ./main
#include <GL/glut.h>
#include <cmath>

void getMouseCoords( int mx, int my, double& x, double& y )
{
    // flip mouse y axis so up is +y
    my = glutGet( GLUT_WINDOW_HEIGHT ) - my;

    // convert mouse coords to (-1/2,-1/2)-(1/2, 1/2) box
    x = ( mx / (double)glutGet( GLUT_WINDOW_WIDTH ) ) - 0.5;
    y = ( my / (double)glutGet( GLUT_WINDOW_HEIGHT ) ) - 0.5;
}

int btn;
double baseX, baseY;
double baseWidth, baseHeight;

double centerX = 0, centerY = 0;
double width = 0, height = 0;
void mouse( int button, int state, int mx, int my )
{
    baseWidth = width;
    baseHeight = height;
    btn = button;
    getMouseCoords( mx, my, baseX, baseY );
}

void motion( int mx, int my )
{
    if( btn != GLUT_LEFT_BUTTON )
    {
        return;
    }

    double x, y;
    getMouseCoords( mx, my, x, y );

    double preX = ( baseX * width );
    double preY = ( baseY * height );

    double zoomFactor = exp( baseY - y );
    width = baseWidth * zoomFactor;
    height = baseHeight * zoomFactor;

    double postX = ( baseX * width );
    double postY = ( baseY * height );

    // recenter
    centerX += ( preX - postX );
    centerY += ( preY - postY );

    glutPostRedisplay();
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho
        (
        centerX - ( width / 2.0 ),
        centerX + ( width / 2.0 ),
        centerY - ( height / 2.0 ),
        centerY + ( height / 2.0 ),
        -1,
        1     
        );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glColor3ub( 255, 0, 0 );
    glBegin( GL_TRIANGLES );
    glVertex2i( 0, 0 );
    glVertex2i( 150, 0 );
    glVertex2i( 0, 150 );
    glVertex2i( 0, 0 );
    glVertex2i( -150, 0 );
    glVertex2i( 0, -150 );
    glEnd();

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 600, 600 );
    glutCreateWindow( "GLUT" );
    glutDisplayFunc( display );
    glutMouseFunc( mouse );
    glutMotionFunc( motion );

    width = glutGet( GLUT_WINDOW_WIDTH );
    height = glutGet( GLUT_WINDOW_HEIGHT );    

    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T07:19:14.947

我假设当您进行第二次单击时，您将其值存储到 mouseStoreXY 中。如果是这样，这就是跳跃的原因。您正在使用旧 mouseStoreXY 的偏移量进行绘制，然后突然偏移到新的。

解决方案是永久存储投影矩阵输入，然后在每一帧上逐步修改它们。

# android - Android setonitemclicklistener 实现

> ID：14969550
> 
> 赞同：1
> 
> 时间：2013-02-19T23:27:02.490
> 
> 标签：android, android-asynctask, onclicklistener

我有一个 ArticlesAdapter 用于读取远程 JSON 数据。适配器正在工作，但我正在努力让我的 ListView setonitemclicklister 工作。

**我想要完成的是能够单击 ListItem 并获取所单击选项的文章数据。我的 Article 类中有 getName() 之类的函数，我需要调用它来响应 ListItem 单击，但我似乎找不到完成它的方法。**

我正在尝试在我的 AsyncTask 类中执行此操作。

使用以下代码：

```
protected void onPostExecute(JSONArray result) {
            // TODO Auto-generated method stub

            Log.i("CHECK", "RESULTS: " + result);

            List<Article> articles = new ArrayList<Article>();

            String title = null;
            String nid = null;

            try{
                for(int i=0; i < data.length(); i++){
                    JSONObject dataObj = (JSONObject)data.get(i);
                    JSONObject record = dataObj.getJSONObject("node");
                    title = (record.getString("title"));
                    nid = (record.getString("nid"));

                    Log.i("FOUND", "title: " + title);
                    Log.i("FOUND", "nid: " + nid);

                    articles.add( new Article(title, "", Integer.parseInt(nid)) );
                }
            }catch(JSONException j){
                Log.e("CHECK", "Attempting to read data returned from JSONReader: " + j.toString());
            }

            ListView articlesList = (ListView)findViewById(R.id.articlesList);
            ArticleAdapter adapter = new ArticleAdapter(ArticlesActivity.this, R.layout.article_item, articles);
            articlesList.setAdapter(adapter);

            articlesList.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "testing : ", Toast.LENGTH_LONG);
                    Log.i("CHECK", "AdapterView: " + parent);
                    Log.i("CHECK", "VIEW : " + view);
                    Log.i("CHECK", "POSITION : " + position);
                    Log.i("CHECK", "ID : " + id);
                }
            }); 

            if(dialog.isShowing())
                dialog.dismiss();
        } 
```

我的问题是我不确定如何让 setOnItemClickListener 工作。我可以通过 Log 函数打印参数：

```
Log.i("CHECK", "AdapterView: " + parent);
Log.i("CHECK", "VIEW : " + view);
Log.i("CHECK", "POSITION : " + position);
Log.i("CHECK", "ID : " + id); 
```

...但是当我尝试将任何参数转换为 Article 对象时出现错误，因此我可以将其称为 getName() 函数等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:43:26.003

您的 AsyncTask 似乎嵌套在您的 Activity 中，如果它不是简单地传递`articles`给您的 Activity，则使用：

```
articlesList.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id){
        Article article = articles.get(position);
        // Do something with article
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:36:22.777

您想要做的架构更改是将您的`ListView`、`Adapter`和`OnItemClickListener`初始化从回调中拉出，并且`AsyncTask`仅更新`articles`并通知回调。`Adapter``onPostExecute`

# python - 使用 cx_Freeze 冻结 pandas/NumPy 1.7.0 代码时出错

> ID：14969552
> 
> 赞同：2
> 
> 时间：2013-02-19T23:27:18.683
> 
> 标签：python, numpy, pandas, cx-freeze

我正在尝试使用 cx_Freeze 冻结 Python 脚本。该脚本使用熊猫。当我运行 cx_Freeze 创建的可执行文件时，我得到以下 Traceback：

```
[...]  
File "C:\Python27\lib\site-packages\pandas\__init__.py", line 6, in <module>  
from . import hashtable, tslib, lib  
File "ExtensionLoader_pandas_hashtable.py", line 11, in <module>  
File "numpy.pxd", line 156, in init pandas.hashtable (pandas\hashtable.c:20273)  
File "C:\Python27\lib\site-packages\numpy\__init__.py", line 147, in <module>  
from core import *  
AttributeError: 'module' object has no attribute 'sys' 
```

我使用的唯一熊猫代码（用于测试）是：

```
from pandas import DataFrame
import pandas as pd
d = {'one' : [1., 2., 3., 4.],
     'two' : [4., 3., 2., 1.]}
df = DataFrame(d) 
```

当我尝试在 cx_Freeze 设置文件中的 'packages' 下包含 'pandas' 时，它在冻结过程中失败：

```
ValueError: too many values to unpack 
```

对于 Windows7（64 位）上的 32 位和 64 位版本的 Python 2.7.3，我遇到了同样的问题。pandas 版本是 0.10.1，cx_Freeze 是 4.3.1。

你们中的任何人熊猫或 cx_Freeze 大神有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T07:57:31.120

我只是查看了 /numpy/core/ **init** .py 并注意到倒数第二行：

有“del sys”

如果您注释掉这一行，它将按预期工作。我还注意到 numpy 1.6.2 中没有“del sys”

您可以尝试联系 numpy 以检查他们为什么需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:05:57.547

这两个错误的原因似乎是`NumPy 1.7.0`（pandas 建立在 NumPy 上）。当我使用 运行代码时`NumPy 1.6.2`，一切正常。

# mysql - 使用 varchar(750) 或文本的性能

> ID：14969553
> 
> 赞同：2
> 
> 时间：2013-02-19T23:27:18.903
> 
> 标签：mysql, varchar

所以，我正在建立一个表格来输入`images`。我有一个属性来输入图像的标题/描述。在某些情况下，我只需要比`255`标题/描述、周围`500`和字符多一点的`750`字符……而在大多数情况下，255 个字符就足够了。

我不确定是否应该使用`varchar(750)`或`text`作为我的标题/描述属性的数据类型？

我已经阅读了两者之间的区别，但我永远无法找到关于性能方面最佳解决方案的明确答案。

对这个问题有更多了解的人吗？

谢谢

# mysql - 什么 SQL 语句将返回具有匹配日期和日期时间的行？

> ID：14969554
> 
> 赞同：1
> 
> 时间：2013-02-19T23:27:28.393
> 
> 标签：mysql, sql, innodb

**编辑：我一直盯着屏幕太久，意识到我实际上放下了 6 点钟 (18) 而不是 4 点钟 (16) ，就像我需要的那样。我有一排与 18 匹配，这就是为什么只有一排不断被退回的原因。从技术上讲，如果我将代码更改为 16，我的代码就可以工作，但是@Gordon Linoff 的答案使用 JOIN 会快得多。我的语句需要 0.33 秒才能返回，而 Gordon 需要 0.0003 秒。**

我有三个表，我试图通过两个日期时间列和一个日期列来匹配行。我当前的 SQL 命令如下所示：

```
SELECT puyforecast.timestamp, tacforecast.timestamp, date
FROM puyforecast, tacforecast, stnrain
WHERE puyforecast.timestamp LIKE CONCAT(date, ' 18:%')
AND tacforecast.timestamp LIKE CONCAT(date, ' 18:%'); 
```

这只会拉出第一个匹配的行： `2013-01-28 18:37:33, 2013-01-28 18:37:34, 2013-01-28` 这是我对语句的期望。我想查看**所有**具有匹配`date`和`datetime`标记的行。`puyforecast`两者中的两个时间戳`tacforecast`应该只是时间为 18:00（下午 4 点）的行。比较时我不在乎分钟或秒`datetimes`，所以这些不应该对匹配产生影响。

我应该看到这样的条目：

```
2013-01-28 18:37:33,    2013-01-28 18:37:34,    2013-01-28
2013-01-29 18:00:02,    2013-01-29 18:00:34,    2013-01-29
2013-01-30 18:00:02,    2013-01-30 18:00:34,    2013-01-30
... 
```

和 &c，日期匹配一直持续到当前日期。这两`datetime`列在时间上比列更远`date`。

我一直在尝试一些搜索，但我似乎无法找到我正在搜索的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:54:48.707

你能在约会时匹配这些吗？

```
SELECT pf.timestamp, tf.timestamp, date
FROM stnrain s join
     puyforecast pf
     on date(pf.timestamp) = s.date and
        hour(pf.timestamp) = 18 join
     tacforecast tf
     on date(tf.timestamp) = s.date and
        hour(tf.timestamp) = 18 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:51:44.867

性能的提高不是因为您将查询转换为使用`JOIN`语法，可能是因为您摆脱了`LIKE`条件。日期和日期时间列不应与 比较`LIKE`，即用于字符串比较。

您还可以像这样重写您的查询：

```
SELECT p.timestamp AS p_timestamp,
       t.timestamp AS t_timestamp, 
       s.date
FROM stnrain AS s
  JOIN puyforecast AS p
    ON  p.timestamp >= s.date + INTERVAL 18 HOUR 
    AND p.timestamp <  s.date + INTERVAL 19 HOUR
  JOIN tacforecast AS t
    ON  t.timestamp >= s.date + INTERVAL 18 HOUR 
    AND t.timestamp <  s.date + INTERVAL 19 HOUR ; 
```

这可能会使用不同的索引（在`timestamp`列上），并且可能更有效。当然可能会更糟，测试一下！

# lua - 如何在LUA中获取数组的大小？

> ID：14969555
> 
> 赞同：9
> 
> 时间：2013-02-19T23:27:32.520
> 
> 标签：lua

这是一个代码：

```
users = {}  
users["aaa"] = "bbbb";
users["bbb"] = "bbbb";
users["ccc"] = "bbbb";
print("Users count ", table.getn(users)); 
```

为什么 table.getn(users) 总是返回 0？顺便说一句，#users 也返回 0。那么，我做错了什么吗？还有另一种方法可以获取数组中的元素数量吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T23:53:41.390

table.maxn 和 # 查找数字索引；他们不会看到您的字符串索引。

至于获取具有任意索引的数组中的元素数量，我可能会使用以下方式遍历数组：

```
Count = 0
for Index, Value in pairs( Victim ) do
  Count = Count + 1
end 
```

但我是个白痴。

# jquery - jQuery $(' 当我将表单作为 jQuery 对象的文本传递时，我无法让 jQuery 的 .submit() 在 IE 或 Firefox 中工作。 例如，以下代码在 Chrome 和 Safari 中有效，但在 IE 和 Firefox 中没有任何反应——没有错误，没有任何东西： $('') .submit(); 注意：上面的“ http://www.stackoverflow.com ”和空表格只是一个例子。在我的应用程序中，我的表单有一个“action=”的合法 URL，它接受我指定为动态构造表单中隐藏控件的 POST 数据。 如果我改为将构造的表单加载到 html 中的元素中，然后执行$('#frm').submit()，它可以工作；但是，我宁愿不走那条路。 这是已知/预期的行为还是我做错了什么？ ~ ~ ~ 作为对@DavidThomas 的回应，我正在构建对'); yourform.attr('target', '_blank'); //open in a new tab yourform.appendTo($(document.body)); // put your form into html yourform.submit(); 它适用于 IE 和 Firefox。 于 2015-08-08T09:09:46.043 回答 Related 1 android - 使用 Intent 在 android 中安装较新版本的应用程序 4 javascript - 为什么无法使用 ajax 请求下载文件？ 2 php - 在 foreach 循环中总是得到一个空数组 1 grails - 如何检查g select标签中的条件 2 mysql - 查询为空时如何显示某些内容？ 1 localization - AOP可以用于国际化吗 3 regex - awk 命令根据条件在两个多行模式之间 grep 数据 1 jquery - javascript 滑块，如“highstock 滑块” 0 spring - 什么是 Portlet 应用程序的根 Web 应用程序？ 1 cordova - PhoneGAP，JQuery 移动应用程序无法在 ipad 3 ios 6 上运行 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14969557
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jquery, submit

当我将表单作为 jQuery 对象的文本传递时，我无法让 jQuery 的 .submit() 在 IE 或 Firefox 中工作。

例如，以下代码在 Chrome 和 Safari 中有效，但在 IE 和 Firefox 中没有任何反应——没有错误，没有任何东西：

```
$('<form id="frm" action="http://www.stackoverflow.com" method="POST"></form>')
    .submit(); 
```

注意：上面的“ [http://www.stackoverflow.com](http://www.stackoverflow.com) ”和空表格只是一个例子。在我的应用程序中，我的表单有一个“action=”的合法 URL，它接受我指定为动态构造表单中隐藏控件的 POST 数据。

如果我改为将构造的表单加载到 html 中的元素中，然后执行`$('#frm').submit()`，它可以工作；但是，我宁愿不走那条路。

这是已知/预期的行为还是我做错了什么？

~ ~ ~

作为对@DavidThomas 的回应，我正在构建对`<form>`ASP .NET .ashx 处理程序的 .get() 调用。我正试图尽量减少`<form>`对它及其内容的暴露。

```
$.get('./ConstructForm.ashx', function (data) { $(data).submit(); })
    .fail(function () { alert('fail!'); }); 
```

我当然欢迎有关更安全的方法的建议，但这可能是另一个问题的主题。

~ ~ ~

对于它的价值，我的方法最初是基于此：[https ://stackoverflow.com/a/2054741/1530187](https://stackoverflow.com/a/2054741/1530187)

我正在尝试使用 jQuery 对象的构造字符串而不是现有元素来执行此操作，以尽量减少用户在提交之前或通过浏览器返回提交之后检查表单的能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-08T09:09:46.043

您应该将表单放入 HTML，代码如下

```
var yourform = $('<form id="frm" action="http://www.stackoverflow.com" method="POST"></form>');

yourform.attr('target', '_blank');  //open in a new tab
yourform.appendTo($(document.body)); // put your form into html
yourform.submit(); 
```

它适用于 IE 和 Firefox。

# c# - 从系统托盘图标打开一个窗口

> ID：14969562
> 
> 赞同：5
> 
> 时间：2013-02-19T23:28:16.127
> 
> 标签：c#, wpf, icons, windowstate

所以我创建了一个带有系统托盘图标的窗口。窗口开始时最小化，并在单击系统托盘图标时重新出现。但是，它仅在您单击最小化按钮时才有效。如果单击红色退出按钮，窗口会消失，系统托盘图标仍然存在（应该如此），但是当您单击它时，程序会引发错误。

> 窗口关闭后无法设置可见性或调用 Show、ShowDialog 或 WindowInteropHelper.EnsureHandle。

这是相关代码

```
public partial class MainWindow : Window
{
    public static NotifyIcon icon;

    List<string> food = new List<string>();
    bool on = false;

    public MainWindow()
    {
        InitializeComponent();

        food.Add("Breakfast");
        food.Add("Soups");
        food.Add("Vegetables");
        food.Add("Crab roll");
        food.Add("Sushi");
        food.Add("Egg rolls");
        food.Add("Salad");

        MainWindow.icon = new NotifyIcon();

        window1.WindowState = WindowState.Minimized; 

        icon.Icon = new System.Drawing.Icon("favicon.ico");
        icon.Visible = true;

        icon.Click += new EventHandler(icon_Click);
        icon.BalloonTipClicked += new EventHandler(icon_BalloonTipClicked);
        icon.DoubleClick += new EventHandler(icon_DoubleClick);
        icon.BalloonTipClosed += new EventHandler(icon_BalloonTipClosed);
        icon.MouseMove += new System.Windows.Forms.MouseEventHandler(icon_MouseMove);
        StateChanged += new EventHandler(MainWindow_StateChanged);

    }

    void icon_BalloonTipClicked(object sender, EventArgs e)
    {
        this.Show(); //This is where the error is 
        window1.WindowState = WindowState.Normal;
    }

    void icon_DoubleClick(object sender, EventArgs e)
    {
        this.Show(); //This is where the error is 
        window1.WindowState = WindowState.Normal;
    }

    void icon_BalloonTipClosed(object sender, EventArgs e)
    {
        on = false;
    }

    void icon_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
    {

        if (!on)
        {
            icon.BalloonTipText = "";
            foreach(string item in food){
                if (!item.Contains("Breakfast") && !item.Contains("Soups") && !item.Contains("Vegetables"))
                {
                    icon.BalloonTipText += item+"\n";
                }
            }
            icon.ShowBalloonTip(10);
            on = true;
        }

    }

    void MainWindow_StateChanged(object sender, EventArgs e)
    {
        if (window1.WindowState == WindowState.Minimized)
        {
            this.Hide();
        }
    }

    private void icon_Click(Object sender, EventArgs e)
    {
        icon.BalloonTipText = "";
        foreach (string item in food)
        {
            if (!item.Contains("Breakfast") && !item.Contains("Soups") && !item.Contains("Vegetables"))
            {
                icon.BalloonTipText += item + "\n";
            }
        }
        icon.ShowBalloonTip(10);
        on = true;

    }        
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:33:32.150

拦截`Closing`窗口的事件，并**取消**它（这将阻止窗口关闭） - 然后**隐藏**窗口：

```
 public MainWindow()
    {
        // Subscribe to closing event (when X is pressed)
        this.Closing += MainWindow_Closing;
        InitializeComponent();
    }

    void MainWindow_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        // Prevent window from closing
        e.Cancel = true;

        // Hide window
        this.Hide();
    } 
```

# paypal-ipn - 更新 Paypal IPN 消息详细信息

> ID：14969563
> 
> 赞同：0
> 
> 时间：2013-02-19T23:28:18.657
> 
> 标签：paypal-ipn

有没有办法更新发送到贝宝的可变数据？

在这种情况下，客户使用代码 A 购买商品，然后引入代码 B，该代码现在记录用户 ID 和其他信息。但是所有使用代码 A 购买的客户都不会被代码 B 正确识别。

我可以在 IPN 历史记录中看到 IPN 消息的详细信息，但我只是希望我可以在该框中键入并手动更新/更正一些变量。

有没有办法做到这一点，或者解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:43:07.920

您可以使用其他 API 更新客户的定期付款资料。我不知道在 PayPal 修改一个已经发送给你的 IPN 消息有什么意义，但你不能这样做，你也不想这样做。您会在他们发送给您的内容上对自己撒谎，并且还会对 PayPal 进行欺诈。您所要做的就是调整最后发生的事情。

# javascript - 当用户选中复选框时，我希望一些文本改变颜色

> ID：14969565
> 
> 赞同：0
> 
> 时间：2013-02-19T23:28:40.900
> 
> 标签：javascript

当用户勾选某些文本旁边的复选框时，我希望文本改变颜色。

这是我的代码：

```
<p style="color: #FF0000; font-weight: bold;">
   I have read and agree to the terms and conditions
   <input type="checkbox" id="termsChkbx" />
</p> 
```

这是我到目前为止的功能：

```
function hasTickedBox( checkBoxID) {
   var chkbx = document.getElementById( checkBoxID );
   if ( chkbx.checked ) {
      //change the font color 
   } else {
      //do nothing 
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:32:17.493

您正在寻找的物业是`.style.color`

**更新代码**

```
<p id="termsP" style="color: #FF0000; font-weight: bold;">I have read and agree to the terms and conditions
<input type="checkbox" id="termsChkbx" /></p>

function hasTickedBox( checkBoxID) {
    var chkbx = document.getElementById( checkBoxID );
    if ( chkbx.checked ) {
        document.getElementById('termsP').style.color = "#000000";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:52:00.173

假设你正在使用 jquery，你可以做这样的事情

```
if(chkbx.checked) {
    $(chkbx).parent().css('color', 'new-color');
else {
   $(chkbx).parent().css('color', 'old-color');
} 
```

如果您不使用 jquery，它将类似于

```
chxbx.parentNode.style.color = "new-color"; 
```

强制性小提琴：http: [//jsfiddle.net/Tv5ta/](http://jsfiddle.net/Tv5ta/)

# python - Django 无法读取消息文件

> ID：14969567
> 
> 赞同：1
> 
> 时间：2013-02-19T23:28:48.373
> 
> 标签：python, django, internationalization

我正在尝试使用 django 国际化框架在我的项目中激活法语。

这是我的 urls.py

```
from django.conf.urls import patterns, include, url
from django.conf.urls.i18n import i18n_patterns
urlpatterns = i18n_patterns('',
    url('$^', 'test_inter.views.test')
) 
```

这是我的意见.py

```
from django.utils.translation import ugettext, get_language
from django.http import HttpResponse
def test(request):
     return HttpResponse('%s - %s' % (get_language(), ugettext('test_en'))) 
```

这是我的settings.py

```
# Django settings for test_inter project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG
ADMINS = (
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'sass01aud',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': 'localhost',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3.
    }
}

TIME_ZONE = 'America/Chicago'

LOCALE_PATHS = (
    '/Users/osasseville/Documents/workspace/test_inter/src/locale'                
)

def gettext(s): s
LANGUAGE_CODE = 'en'
LANGUAGES = (
    ('en', gettext('English')),
    ('fr', gettext('French')),
)
USE_I18N = True
USE_L10N = True       # not required for this demo but important

SITE_ID = 1
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '%!q$#o%9wta*m31c_nhp(x777_-^@&amp;ebu%6da&amp;^=a6t)nt(ux)'
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.locale.LocaleMiddleware',
)
ROOT_URLCONF = 'test_inter.urls'
WSGI_APPLICATION = 'test_inter.wsgi.application'
TEMPLATE_DIRS = (
)
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'test_inter',
)
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

我创建了一个*语言环境*文件夹并运行 django-admin

```
osasseville:src osasseville$ pwd
/Users/osasseville/Documents/workspace/test_inter/src
osasseville:src osasseville$ mkdir locale
osasseville:src osasseville$ django-admin.py makemessages -l fr
processing language fr 
```

我已经编辑了我的 locale/fr/LC_MESSAGES/django.po

```
# SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2013-02-19 18:23-0500\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n > 1)\n"

#: test_inter/settings.py:31
msgid "English"
msgstr "Anglais"

#: test_inter/settings.py:32
msgid "French"
msgstr "Francais"

#: test_inter/views.py:5
msgid "test_en"
msgstr "test_fr" 
```

最后，我整理了我的消息。

```
osasseville:src osasseville$ python manage.py compilemessages -l fr
processing file django.po in     /Users/osasseville/Documents/workspace/test_inter/src/locale/fr/LC_MESSAGES 
```

当我运行我的开发服务器时，结果如下：

/fr/ 给我 fr - test_en /en/ 给我 en - test_en

如您所见，我的语言正在切换，但它无法在我的消息文件中显示 test_fr。

# jquery - 显示一个输入并隐藏另一个

> ID：14969571
> 
> 赞同：0
> 
> 时间：2013-02-19T23:29:16.017
> 
> 标签：jquery

我在一个页面中有很多输入，我只想显示一个，直到你按下回车键。当你按下回车键时，当前输入消失，隐藏的输入出现。

```
<input type="text" value="Name" />
<input type="text" value="Password" /> 
```

这是jQuery代码：

```
$('input').each(function(){

    $(this).fadeIn();

        $(this).on('keyup', function(e) {
            if (e.which == 13) 
                return true;
            else return false;

        });
    $(this).fadeOut();
}); 
```

我制作了这段脚本，但它不起作用。它同时向我显示两个输入，然后消失。

我应该改变什么以获得预期的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:34:04.377

[http://jsfiddle.net/z7ZNL/1/](http://jsfiddle.net/z7ZNL/1/)

```
<input type="text" value="Name" />
<input type="text" value="Password" style="display: none;" />

$('input').on('keyup', function(e) {
  if (e.which == 13) 
    $('input').not(this).fadeIn();
    $(this).fadeOut();
}); 
```

这仅够处理两个输入的代码。您的描述提到“很多”。为此，您需要某种计数器或位置标记来循环遍历所有元素。

我同意popnoodles。这是奇怪的行为。谨慎使用。

# android - 如何使用 SMARTBANNER (AdMob) 并确保展示它

> ID：14969574
> 
> 赞同：2
> 
> 时间：2013-02-19T23:29:37.377
> 
> 标签：android, android-layout, admob

我决定在我的应用中添加一个带有 AdMob 的 SMARTBANNER。正如文档中所述： Android 上的[智能横幅尺寸](https://developers.google.com/mobile-ads-sdk/docs/admob/smart-banners) ，纵向，我保留了 50 dp 的高度。所以我只是为它保留了一个空的线性布局，它在过去的应用程序中对我有用：

```
<LinearLayout
    android:id="@+id/layoutAd"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:orientation="vertical" /> 
```

然后使用方法：

```
 private void createAdView() {
        if (C.AD_ON) {
            ad_view = new AdView(this, AdSize.SMART_BANNER, C.AD_APPLICATION_ID);
            LinearLayout l = (LinearLayout) findViewById (R.id.layoutAd);
            l.addView (ad_view);
            AdRequest a = new AdRequest();
            ad_view.loadAd(a);
        }
    } 
```

现在，虽然通常这种简单的方法有效，但在这种情况下我得到一个错误：

```
Not enough space to show ad! Wants: <480, 90>, Has: <480, 50> 
```

？？？480x90？480x50？我在上表中找不到任何这些尺寸......它们来自哪里？无论如何，广告没有显示。

然后我尝试保留 90dp 而不是 50dp，并且广告正确显示，留下一个空的空间……猜猜看……大约 40dp。

在这一点上，我想到了一个问题：以前，在我以前的应用程序中，一切都在手机上运行。我认为一切都在适应不同的屏幕尺寸和密度。现在我很害怕实际上我的许多广告无法展示，因为广告预期的是 90dp 而不是 50dp 或其他任何数字。

实际上，我决定放置 SMARTBANNER 的唯一原因是我认为可以摆脱这类问题！

现在......我应该怎么做才能在每个可能的屏幕上正常工作，并合理地确保它不会在某些密度或某些尺寸上失败？我应该自己检测正在运行的设备，然后以编程方式保留 50、90 或 55 dp？这对我来说听起来很荒谬！

是不是有一些适用于横幅的“WRAP_CONTENT”这样的功能，这样我就不必手动指定 90 或 50 像素，而只期望显示正确的横幅和适应它的布局？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:10:09.823

如果您想使用固定高度（而不是使用推荐的 WRAP_CONTENT），您将不得不为每个屏幕尺寸提供尺寸。我使用以下维度，但请注意，如果智能横幅的实施发生变化，这些维度可能会发生变化。

```
/values/dimens
<dimen name="ad_min_height">50dp</dimen>

/values-land/dimens
<dimen name="ad_min_height">32dp</dimen>

/values-large-land-v11/dimens
<dimen name="ad_min_height">90dp</dimen>

/values-large-v11/dimens
<dimen name="ad_min_height">90dp</dimen> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T00:00:15.153

你真的尝试过`WRAP_CONTENT`智能`layout_height`横幅吗？这就是解决方案和推荐的做法。

# javascript - 使用 Javascript 激活 CSS3 动画

> ID：14969578
> 
> 赞同：0
> 
> 时间：2013-02-19T23:29:48.140
> 
> 标签：javascript, html, css, onclick, onload

我正在玩一些 CSS 动画，我正在尝试使用 Javascript onclick 触发动画。注意似乎对我有用。

[http://codepen.io/Quinn1011/pen/Eltpk](http://codepen.io/Quinn1011/pen/Eltpk)

有人可以看看并帮助我。我什至无法在页面加载时隐藏“下一个”div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:46:10.153

将以下行添加到 #next 的 css 中：

```
display:none 
```

***哇***，这很容易，现在下一个节目是点击而不是加载。

`.show()`只不过是删除了 css 属性 display:none。就像`.hide()`在元素中添加 display:none

如果您理解这一点，您将很容易理解您的动画是在加载时运行的，因为已经设置了 css

所以点击将西装类添加到您的元素

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

啊抱歉，那将是 jquery 解决方案，如果你没有使用 jQuery 并且你没有提到它，那么这是纯粹的方法：

```
function changeClass (elementID, newClass) {
var element = document.getElementById(elementID);

element.setAttribute("class", newClass); 
} 
```

你可以像这样调用这个函数：

```
$('#button').click(function(){
  changeClass('next','anmimate');
 }); 
```

# c# - 为什么我的图像滑块在使用母版页的子文件夹中的其他页面上不起作用

> ID：14969579
> 
> 赞同：0
> 
> 时间：2013-02-19T23:29:49.063
> 
> 标签：c#

您好一直在使用 C# 使用 VS 2010 创建 Web 应用程序。我遇到的问题是我在母版页上添加了图像滑块。但是当我运行应用程序时，它不会在子文件夹中的页面上显示滑块，而是在根目录中的文件中显示图像滑块。

对于图像滑块，我使用了 jquery

这就是我在母版页上对图像进行编码的方式

```
<div id="slide-holder">
<div id="slide-runner">
<a href=""><img id="slide-img-1" src="~/Styles/images/nature-photo1.png" class="slide" alt="" /></a>
    <a href=""><img id="slide-img-2" src="~/Styles/images/nature-photo1.png" class="slide" alt="" /></a>
    <a href=""><img id="slide-img-3" src="~/Styles/images/nature-photo2.png" class="slide" alt="" /></a>
    <a href=""><img id="slide-img-4" src="~/Styles/images/nature-photo3.png" class="slide" alt="" /></a>
    <a href=""><img id="slide-img-5" src="~/Styles/images/nature-photo4.png" class="slide" alt="" /></a>
    <a href=""><img id="slide-img-6" src="~/Styles/images/nature-photo4.png" class="slide" alt="" /></a>
    <a href=""><img id="slide-img-7" src="~/Styles/images/nature-photo6.png" class="slide" alt="" /></a> 
    <div id="slide-controls">
     <p id="slide-client" class="text"><strong>post: </strong><span></span></p>
     <p id="slide-desc" class="text"></p>
     <p id="slide-nav"></p>
    </div>
</div> 
```

它不会显示在位于子文件夹中的页面上，而是显示在位于根目录中的页面上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:33:11.727

您必须确保所有 src 和 url 都已成功解析。为此，`ResolveUrl()`无论位置如何，都可以使用该功能成功解析所有图像。此外，如果您使用的是 Css，则必须确保正确解析 css 中的图像：示例：

```
<a href=""><img id="slide-img-2" src='<%= ResolveUrl("~/Styles/images/nature-photo1.png") %>' class="slide" alt="" /></a> 
```

祝你好运！

# linux - 如何在perl中开发一个脚本，可以递归删除子文件夹和父目录中的数据？

> ID：14969580
> 
> 赞同：1
> 
> 时间：2013-02-19T12:59:48.703
> 
> 标签：linux, perl

您好，文件夹结构如下

```
mishel/      #Parent directory  
      mike1  #sub file of mishel  
      minni1 #sub file of mishel  
      rosy1  #sub file of mishel
        rocky/      #sub directory of mishel
             missi  #subfile of rocky
             marsh  #subfile of rocky
             milly  #subfile of rocky 
               monu/     #sub directory of rocky
                  mike  #sub file of monu
                  minni #sub file of monu
                  rosy  #sub file of monu 
```

所以这是我的问题：我想使用一个脚本，一次自动删除所有文件和子文件夹。

如果我们使用函数“rmdir(dirname)”，则目录必须为空。那么有没有机会从子目录开始删除到父目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:04:14.723

编写一个以目录为参数的函数。让该功能`readdir`在目录中执行。对于 readdir 返回的每个项目，检查它是否是一个文件 - 如果是，则将其删除。如果是目录，则以子目录作为参数再次调用该函数。如果没有项目（除了`.`and `..`），删除目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:50:50.713

```
use Path::Class;
my $dir = dir('foo');
$dir->recurse(callback => sub {
    unlink $_[0] if !$_[0]->is_dir;
});
$dir->rmtree(0, 1); 
```

或者 ：

```
use File::Path ('rmtree');
rmtree('foo', 0, 0); 
```

见[http://www.perlmonks.org/bare/?node_id=605930](http://www.perlmonks.org/bare/?node_id=605930)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:46:05.740

试试模块的`remove_tree`功能[`File::Path`](http://perldoc.perl.org/File/Path.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:34:07.077

```
perl -e 'system "find mishel -delete"' 
```

# wordpress - 将 body 标签外的 div 移动到 body 标签内

> ID：14969584
> 
> 赞同：0
> 
> 时间：2013-02-19T23:30:26.390
> 
> 标签：wordpress, html, plugins, move

我有一个 wordpress 插件，可以将社交图标放在我网站的顶部。问题是尽管 div 在主体 div 之外（或包装 div）。因此，当我更改网站的宽度时，社交图标会相对于浏览器窗口移动，而不是我网站的实际内容。通常它就像将 div 移到 wrap div 之外一样简单，但它是一个插件，并且该插件的结构令人讨厌，因为 div 结构是在一个缩小的 javascript 文件中，而不是在一个好的 HTML/ PHP 格式。

因此，如果您访问我的网站：[http](http://warringah-plastics.com.au/) : //warringah-plastics.com.au/，您可以在右上角的 div“dcsmt”中看到社交图标，我想将其放置在网站的左侧这些现有社交图标所在的搜索框。我该怎么做？所以我真的想把“dcsmt”div 放在现有的“top-cont”div 中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:14:32.603

创建一个空 div 并在您想要社交媒体图标的搜索框附近的标题中为其命名“social_icons_wrapper”。

然后从您的页脚调用以下 javascript：

```
var div_to_move = document.getElementById('dcsmt');
document.getElementById('social_icons_wrapper').appendChild(div_to_move); 
```

# python - uWSGI：Python 的 concurrent.futures 挂在除一个 uWSGI 进程之外的所有进程上

> ID：14969585
> 
> 赞同：0
> 
> 时间：2013-02-19T23:30:39.610
> 
> 标签：python, nginx, wsgi, uwsgi

我正在使用 Python 的 concurrent.futures 模块（模块版本 2.1.3，Python 版本 2.7.3）。我有 nginx 与 4 个工作进程一起运行，并且 4 个 uWSGI 运行（在 Ubuntu 上精确）作为一个新贵的守护进程，具有以下 uwsgi 配置（注意 enable-threads 是真的，所以 GIL 是可访问的，而惰性是真的）：

```
virtualenv=[ path to venv ]
chdir=[ path to python project ]
enable-threads=true
lazy=true
buffer-size=32768
post-buffering=true
processes=4
master=true
module=[ my app ].wsgi
callable=wsgi_app
logto=/var/log/uwsgi.log
pidfile=[ replaced ]
plugins=python27
socket=[ replaced, but works fine ] 
```

整个应用程序运行良好，但似乎某些缺少的上下文不适用于期货池：当我在没有 future() 的情况下调用 somefunc() 时，一切都很好，但是当我用 future() 调用 somefunc() 时，HTTP 请求 (我正在使用 Flask）在失败之前挂起相当长的一段时间。

日志文件的唯一条目与 HTTP 请求和一般 wsgi 启动内容有关，例如：

```
WSGI application 0 (mountpoint='') ready on interpreter 0x11820a0 pid: 26980 (default app) 
```

我如何才能对期货执行有一些了解，或者找出期货池可能无法使用的上下文？

那有意义吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:42:13.210

如果您使用 ProcessPoolExecutor 而不是线程，请确保在您的 uWSGI 选项中添加 close-on-exec，否则将在 fork() 之后继承与客户端/Web 服务器的连接套接字

# git - 如何找出尚未推送或拉取的提交？

> ID：14969589
> 
> 赞同：0
> 
> 时间：2013-02-19T23:31:02.990
> 
> 标签：git

我在一个远程跟踪的分支工作。我做了几个提交。

有什么方法可以获取我尚未推送的提交列表？有什么方法可以获取我尚未提取的提交列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:41:42.913

您可以通过运行查看尚未推送的提交列表

```
git log origin/master..master 
```

可选地交换一些其他分支名称`origin/master`和`master`（例如，`origin/mybranch`和`mybranch`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:39:45.087

类似的东西

```
git diff master origin/master 
```

可能会奏效。但这将为您提供比提交列表更多的信息，因此您可能需要使用不同的选项。

编辑：但你可能需要运行

```
git fetch 
```

第一的

# node.js - 使用 Jenkins 自动编译咖啡脚本

> ID：14969590
> 
> 赞同：2
> 
> 时间：2013-02-19T23:31:06.473
> 
> 标签：node.js, jenkins, coffeescript, continuous-integration

我已经为我的一个项目在 windows 盒子上设置了 jenkins CI 服务器。其中有一部分是用 Coffeescript 编写的。以前这部分没有循环到构建过程中。现在它需要。

我还没有看到任何 jenkins 的 coffeescript 插件，或者谷歌关于在 jenkins 中构建咖啡脚本的主题。

我正在寻找设置詹金斯构建以包含咖啡编译步骤的最简单方法。最好通过 jenkins 上的插件，而不是在盒子上手动安装程序。

目前coffeescript是通过这样的命令编译的

```
coffee --lint --watch --output "C:\repositories\martha\trunk\bb\app\bin\js/" --compile "C:/repositories/martha/trunk/bb/app/src/" 
```

在开发框中的 Node.js 命令提示符中

我还注意到 Jenkins 有一个 node.js 插件，您可以在其中在构建步骤中运行脚本。我不相信我可以使用命令`npm install -g coffee-script`或`coffee --compile`通过 node.js 脚本而不是命令行。虽然我希望我错了。

目前我看到的最好的选择是在盒子上安装 node.js，使用 npm 安装咖啡脚本，然后运行批处理脚本作为构建步骤。虽然我愿意追求这一点，但我希望在盒子上减少手动安装，以方便在更多项目中使用咖啡脚本。

这是我最好的选择吗？

值得一提的是，虽然我使用 node.js 编译咖啡脚本，但 node.js 本身及其功能对我来说是非常新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:34:13.387

一种可能的解决方案是使用`extras/coffee-script.js`. 您必须使用 JDK 7 或最新的 Rhino（JDK 6 将无法使用）。这是Java中一个简单的[CoffeeScript编译器的链接](https://github.com/yeungda/jcoffeescript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T14:24:22.783

我会推荐

a) 在 jenkins 上安装 nodejs 插件 + grunt -> [Jenkins 与 Grunt 的集成](https://stackoverflow.com/questions/21765428/jenkins-integration-with-grunt/22014724#22014724)

b) 投票赞成优秀的指示:)

c) 然后使用 grunt 编译咖啡脚本，这也意味着您也可以轻松地在本地编译咖啡脚本！

咕噜指令-> [http://gruntjs.com/](http://gruntjs.com/)

咕噜咖啡脚本说明-> [https://github.com/gruntjs/grunt-contrib-coffee](https://github.com/gruntjs/grunt-contrib-coffee)

基本上你需要一个像这样的 Gruntfile.js

```
module.exports = function(grunt) {
    // Project configuration.
    grunt.initConfig({
        pkg : grunt.file.readJSON('package.json'),
        coffee: {
            compile: {
                files: {
                    'path/to/result.js': 'path/to/source.coffee', // 1:1 compile
                    'path/to/another.js': ['path/to/sources/*.coffee', 'path/to/more/*.coffee'] // compile and concat into single file
                }
            }
        }
    });
    grunt.loadNpmTasks('grunt-contrib-coffee');
    grunt.registerTask('default', ['grunt-contrib-coffee']);
}; 
```

然后对于 jenkins shell 任务，你只需要这个，运行 grunt 和咖啡脚本

```
npm update
grunt 
```

# asp.net-mvc - MVC 4 - 查看脚手架创建选项

> ID：14969592
> 
> 赞同：3
> 
> 时间：2013-02-19T23:31:08.760
> 
> 标签：asp.net-mvc, asp.net-mvc-4, scaffolding

我对 MVC 4 非常陌生。当我创建一个新控制器并选择使用 EF 创建 CRUD 操作的脚手架选项时，它创建的创建视图将标签和编辑字段放置在单个垂直列中，标签位于顶部编辑控件。有没有办法告诉脚手架功能以不同的方式创建我的视图？例如，我可能想要两列。第一列是标签，第二列是其对应的编辑控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:41:01.780

你看过[Scott Hanselman 的帖子](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)吗？我相信这就是您正在寻找的。

# matlab - 循环中的matlab子矩阵

> ID：14969597
> 
> 赞同：0
> 
> 时间：2013-02-19T23:31:34.080
> 
> 标签：matlab, for-loop, submatrix

我有一个 118800x6 矩阵。第一列包含从 1 到 99 的值（每个值有 1200 行）。现在我需要为每个 99 个值创建一个包含 900 个随机行（所有前一列；这些行是从原始矩阵中提取的）的新矩阵。我尝试使用 for 循环，但这意味着我必须编写 99 行代码……有更快的方法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:20:48.170

假设您的矩阵被称为`M`：

```
for num = 1:99
    %Extract only rows that have the correct number in column one
    subsample = M(M(1, :) == num, :);
    %Randomly change the order of the rows of this subsample
    shuffledsubsample = subsample(randperm(1200), :);
    %Only keep the first 900 rows
    final(:,:,num) = shuffledsubsample(1:900, :);
end 
```

# java - SWT KeyUp 事件侦听器丢失键

> ID：14969600
> 
> 赞同：1
> 
> 时间：2013-02-19T23:31:50.020
> 
> 标签：java, swt, keylistener

我有以下代码：

```
display.addFilter(SWT.KeyUp, new Listener()
{
    public void handleEvent(Event e)
    {
        System.out.println("Released " + e.character);
    }
}; 
```

当我同时按下“a”、“s”、“d”和“f”键时，KeyDown 事件按预期工作。但是，当我同时释放所有键时，我希望输出类似于：

发布 a 发布 s 发布 d 发布 f

但这种情况并非如此。打印出来的通常只有一个字符，例如：

发布d

为什么它会跳过其他两三个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:43:51.017

这是一个[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=50020)。

> **错误 50020 - KeyReleased 无法正常工作**。
> 在以下情况下，KeyReleased 似乎未正确触发或根本没有触发：连续按下并按住多个键。一把一把地，钥匙被释放。keyReleased 事件触发，但 event.character 始终是最后按下的键。如果最后按下的键被释放，则所有其他键在被释放时不会触发释放事件。

该错误可能永远不会得到修复（bugtracker 条目中的注释 #1）：

> **评论 #1** 这是一个非常古老的错误，我们可能不会修复。问题是 Window 中没有足够的信息来计算在 WM_KEYUP 中按下的键。

# jquery - 帮助 jquery 下拉列表

> ID：14969603
> 
> 赞同：0
> 
> 时间：2013-02-19T23:31:56.503
> 
> 标签：jquery, select, dropdownbox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:37:22.580

> 谢谢，我阅读了您链接的帖子，我想问一下，创建其中一个人建议的警报是否值得？如果是，您对如何在我上面的脚本中添加它有什么建议吗？再次感谢！！

最简单的解决方案是在尝试打开新标签后添加带有自定义文本的警报弹出窗口，正如他们中的一个建议的那样：

```
 $('.openSelect').change(function(){ 
      var selectedValue=$(this).val(); 
      if (selectedValue.match(/http/)) { 
           var open = window.open($(this).val(),'_blank'); 
           if (open == null || typeof(open)=='undefined'){ 
           alert("Turn off your pop-up blocker!\n\nWe try to open the following url:\n" + selectedValue); 
           }
     }
  }); 
```

但我不喜欢系统弹出窗口，并认为自定义弹出部分会更加用户友好，例如[jquery UI 对话框](http://jqueryui.com/dialog)

# java - 新程序员试图在代码中查找错误

> ID：14969604
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:31:57.260
> 
> 标签：java, if-statement, random

我试图找出我哪里出错了。该代码假设采用两个随机数，找出一个是否是另一个的因素，并根据您的答案打印出各种结果。

我不知道我哪里出错了，但由于某种原因，代码不会进入我的 if 语句。

```
//import Scanner class
import java.util.Scanner;

//add class structure
public class Factor 
{
     //add main method
     public static void main(String[] args)
     {
          //initialize the first number          
          int number1;
          //initialize the second number
          int number2;
          String yes = "yes";
          String no = "no";

          //generate random number 1
          number1 = (int)(Math.random()*11);
          //generate random number 2
          number2 = (int)(Math.random()*101);
          //if number one is larger, swap
          if (number2 < number1)
          {
               //store the value of number 1
               int store = number1;
               //number 1 becomes the same magnitude as number 2
               number1 = number2;
               //number 2 is now the stored value
               number2 = store;
          }
          //construct instance of scanner
          Scanner myScanner;
          //input for scanner
          myScanner= new Scanner( System.in);
          //system statement
          System.out.println("Is " + number1 + " a factor of " + number2 + " ? (yes or no)");
          //accept user input
          String answer = myScanner.nextLine();
          //divide to see if a factor
          double number3 = (double)number2 / (double)number1;
          //setup inital parameters
          if (answer == yes){
               //setput more parameters
               if ((int)number3 == number3) {
                    //ouput statement
                    System.out.println("Enter the value of x that (x * " + number1 + " = " + number2 + " : ");
                    //accept user input
                    int userinput = myScanner.nextInt();
                    //setup parameters
                    if (userinput == number3){
                         //output statement
                         System.out.println("Your answer is correct!");
                    }
                    //response
                    else {
                         //output statement
                         System.out.println("Actually, " + number3 + " is the correct answer.");
                    }
               }
               //setup parameters
               if ((int)number3 != number3) {
                    System.out.println("Actually, " + number1 + " isn't a factor of " + number2 + " .");
               }
          }
          //setup new parameters
          if (answer == no) {
               //setup parameters
               if ((int)number3 == number3) {
                    //output statement
                    System.out.println("Actually, " + number1 + " is a factor of " + number2 + " .");
               }
               //response statement
               else { 
                    //output statement
                    System.out.println("Your answer is correct!");
               }
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:33:33.157

另一个字符串比较。:)

```
 if (answer == yes){ 
```

应该

```
 if (answer.equals(yes)){ 
```

使用`equals()`方法检查**字符串是否相等**。`==`运算符只检查两个引用变量是否引用同一个字符串对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:53:05.683

除了字符串比较之外，我还建议添加，您可以将变量“number3”声明为 Double 并在 if 子句中而不是将其强制转换为 int，调用 intValue() 方法，这样就可以了喜欢

```
Double number3 = (double)number2 / (double)number1;
....
if (number3.intValue() == number3) {....}   //instead of if ((int)number3 == number3) 
```

# spring - Eclipse 中的部署程序集

> ID：14969605
> 
> 赞同：1
> 
> 时间：2013-02-19T23:32:08.703
> 
> 标签：spring, maven, m2eclipse

*   日蚀靛蓝。
*   M2Eclipse 插件。
*   雄猫 7.
*   弹簧框架。

尝试使用“部署程序集”选项，以便我的 Eclipse 项目的 Maven 依赖项自动添加到 Tomcat。

这是我的 pom.xml 文件的一部分：

```
...
<packaging>war</packaging>
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.2.1.RELEASE</version>
    </dependency>
</dependencies>
... 
```

我做项目属性-> 部署程序集-> 添加-> Java 构建路径条目-> Maven 依赖项。

![在此处输入图像描述](../Images/e34e624f12c864b9356477099b628578.png)

当我尝试将我的项目添加到 Eclipse 中的 Tomcat 服务器时，我得到：

![在此处输入图像描述](../Images/ceed94aba2aa19a83d91bcb556a51f4a.png)

如您所见，只有 spring-web 依赖项被添加到我的项目中，因此我收到以下部署错误。

```
SEVERE: Error configuring application listener of class  org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:09:41.323

尝试为 WTP 安装 Maven 集成，又名 m2e-wtp [https://www.eclipse.org/m2e-wtp/](https://www.eclipse.org/m2e-wtp/)

它将自动将 Maven 类路径库添加到部署程序集中，并且将尊重每个单独的类路径条目的 Maven 范围（即部署`compile`、`runtime`依赖项，而不是`test`）`provided`

# java - ServletRequest NoSuchMethodError

> ID：14969607
> 
> 赞同：0
> 
> 时间：2013-02-19T23:32:21.023
> 
> 标签：java, jetty

我的环境码头 8.1

```
public void service(ServletRequest request, ServletResponse response) throws ServletException, IOException {
  //this line prints org.eclipse.jetty.server.Request
  System.out.println("class is "+request.getClass().getName());

  org.eclipse.jetty.server.Request jettyRequest = (org.eclipse.jetty.server.Request)request;
  //request.getServletContext();//this line fails with noSuchMethodError
  jettyRequest.getServletContext(); // this line works

  ... 
```

谁能解释一下这个……？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:35:44.147

您的 web 应用程序未使用 Servlet API 3.0。

如果您使用的是 Servlet API 2.5（例如），这将失败。

确保您的 webapp`WEB-INF/web.xml`设置为 Servlet API 3.0，并确保`WEB-INF/lib`删除您可能拥有的任何 servlet-api jar。

# c++ - 动态分配数组的有趣行为

> ID：14969609
> 
> 赞同：0
> 
> 时间：2013-02-19T23:32:29.153
> 
> 标签：c++, arrays, dynamic

所以我正在使用一个动态分配的数组，我已经将它设置为容纳 5 个元素，因此应该是 0-4。如有必要，我创建了一个函数来保留它，但我想看看当我在 [5] 处为数组赋值时，我是否遇到了预期的程序崩溃。但是，没有错误，直到 [6]。

这是我的代码：

```
int* dynamic_arr;
dynamic_arr = new int[5];

for(int i = 0; i <= 100; i++){
    dynamic_arr[i] = i;
    used++;
    cout << dynamic_arr[i]<<endl;
} 
```

这是输出：

```
0 //i[0]
1 //i[1]
2 //i[2]
3 //i[3]
4 //i[4]
5 //i[5]  <-- should be out of range 
```

之后它崩溃了。

为什么我能够为数组的一部分分配一个值，因为缺少更好的术语而超出了范围？

谢谢

OpSrcFTW

编辑：感谢各位的回答，谢谢。我会在下次发布快速回复之前阅读更多内容，对不起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:33:54.320

超出数组末尾的访问会产生未定义的行为。它不一定会产生崩溃。任何事情都有可能发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T23:33:47.657

超出其边界访问数组是未定义的行为。任何事情都可能发生，它不需要是可重复的，尝试“理解”你认为可能存在的任何模式毫无意义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T23:35:36.173

超出数组大小的访问将产生未定义的行为。未定义的行为包括您的代码崩溃、工作正常、在一台计算机上工作而不是另一台计算机、重新启动计算机或破坏整个宇宙。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T23:41:59.193

正如其他人已经指出的那样，您有未定义的行为，因此虽然可能发生崩溃，但代码似乎也可以工作。

在像您这样的情况下，当您访问*稍微*超过分配的内存末尾时似乎可以工作是相当普遍的。为自由存储管理内存的代码通常会将您的请求大小四舍五入到它认为方便的下一个大小，例如 2 的幂。因此，在您请求的内容结束后至少有一点内存可以写入而不会出现*明显*问题的情况并不少见。

当然，您不能指望这一点——即使使用相同的编译器使用相同的标志等也不行。例如，标准库可以根据目标机器上的可用内存量来决定如何操作，使用当有大量可用 RAM 时，更多填充以优化速度，而在可用内存较少时减少填充以减少内存使用。

因此，不，您不能依赖于任何特定点的崩溃——但这也不是您可以通过测试或认为这是您只需要担心的地方，如果您要移植代码。

# android - 为什么 ServerSocket 不调用 NetworknOnMainThread 而 Socket 调用？

> ID：14969610
> 
> 赞同：3
> 
> 时间：2013-02-19T23:32:30.603
> 
> 标签：android, exception, network-programming

```
server = new ServerSocket(PORT); 
```

不会在我的应用程序上调用 NetworkOnMainThreadException，我认为它应该这样做并编辑代码以在另一个线程上运行，同时

```
socket= new Socket(ADDRESS,PORT); 
```

确实调用 NetworkOnMainThreadException 正确。我错过了什么还是应该修复的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:41:04.827

为什么要呢？`new ServerSocket(...)`只是本地操作。它不涉及任何实际的网络活动，而`new Socket(...)`确实如此，并且最多可以阻塞一分钟左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:49:24.657

当你调用 new Socket(ADDRESS,PORT);

```
private Socket(SocketAddress address, SocketAddress localAddr,
413                    boolean stream) throws IOException {
414         setImpl();
415 
416         // backward compatibility
417         if (address == null)
418             throw new NullPointerException();
419 
420         try {
421             createImpl(stream);
422             if (localAddr != null)
423                 bind(localAddr);
424             if (address != null)
425                 connect(address);
426         } catch (IOException e) {
427             close();
428             throw e;
429         }
430     } 
```

它创建流。然而`server = new ServerSocket(PORT);`

```
public ServerSocket(int port, int backlog, InetAddress bindAddr) throws IOException {
230        setImpl();
231        if (port < 0 || port > 0xFFFF)
232            throw new IllegalArgumentException(
233                       "Port value out of range: " + port);
234        if (backlog < 1)
235          backlog = 50;
236        try {
237            bind(new InetSocketAddress(bindAddr, port), backlog);
238        } catch(SecurityException e) {
239            close();
240            throw e;
241        } catch(IOException e) {
242            close();
243            throw e;
244        }
245    } 
```

**注意**没有`connect();`任何这些方法涉及网络操作，因此您不会得到`NetworkOnMainThreadException`

# google-app-engine - 什么是 Google Cloud Endpoints 的 Web 应用程序客户端 ID？

> ID：14969611
> 
> 赞同：4
> 
> 时间：2013-02-19T23:32:31.840
> 
> 标签：google-app-engine, google-cloud-endpoints

我正在尝试让示例[android 客户端](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-android#language)工作。

我被困在设置说明的第 4 步：

> 更新 src/com/google/devrel/samples/ttt/ClientCredentials.java 中的 AUDIENCE 值，将字符串“your_web_client_id”替换为您在 API 控制台中注册的 Web 应用程序客户端 ID。

这是我需要更改的代码行：

```
public static final String AUDIENCE = "server:client_id:your_web_client_id"; 
```

我不确定“Web 应用程序客户端 ID”是什么意思。我在 GAE 上启动并运行了 Java 后端，但没有对 API 控制台做任何事情。

有任何想法吗？

* * *

**编辑**

这是 java 后端的客户端 ID 代码：

```
/**
 * Contains the client IDs for allowed clients consuming the tictactoe API.
 */
public class Ids {
  public static final String WEB_CLIENT_ID = "240003018828.apps.googleusercontent.com";
  public static final String ANDROID_CLIENT_ID = "240003018828-rp5ahj5b1eo76g55m1qtq4vvm57dqoj6.apps.googleusercontent.com";
  public static final String IOS_CLIENT_ID = "replace this with your iOS client ID";
  public static final String ANDROID_AUDIENCE = WEB_CLIENT_ID;
} 
```

这是android项目中的客户端ID代码：

```
public class ClientCredentials
{
    public static final String AUDIENCE = "server:client_id:240003018828-rp5ahj5b1eo76g55m1qtq4vvm57dqoj6.apps.googleusercontent.com";
    // public static final String AUDIENCE = "server:client_id:your_web_client_id";
} 
```

也来自android项目：

```
 /**
   * The default encoded root URL of the service. This is determined when the library is generated
   * and normally should not be changed.
   *
   * @since 1.7
   */
  public static final String DEFAULT_ROOT_URL = "https://sample-ttt.appspot.com/_ah/api/"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:53:45.983

请参阅适用于 Android 的 Endpoints 文档的进行[身份验证调用](https://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls)部分。

> [在Google API 控制台](https://code.google.com/apis/console)中为您的项目添加第二个客户端 ID 。去做这个：
> 
> 1.  在控制台内您的项目的 API 访问选项卡中，单击创建另一个客户端 ID。
> 2.  项目清单
> 3.  在 Create Client ID 表单中，选择 Installed application 作为应用程序类型，并选择 Android 作为已安装应用程序类型。
> 4.  在标有包名称的文本框中输入您的 Android 应用程序包名称。
> 5.  在标记为签名证书指纹的文本框中，输入您刚刚生成的调试或发布密钥。
> 6.  单击创建客户端 ID。

它提到了第二个客户端 ID，因为您还需要为 Web 应用程序创建一个。在该过程结束时，您应该有两个客户端 ID：一个用于 Android，一个用于 Web。您在后端代码中使用两个客户端 ID，但在您的 Android 代码中仅包含后一个客户端 ID（通过特殊格式的字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:00:42.167

您是否使用 Web 应用程序 ID 更新了应用引擎后端中的 AUDIENCE 字段？要从 Android 客户端使用 GCE，您还需要在 @Api 注释中更新 Audience 字段，使用您在 API 控制台中注册的 Web 应用程序 ID（不是 android 客户端 ID）。

# php - 计算数据库中的记录

> ID：14969612
> 
> 赞同：0
> 
> 时间：2013-02-19T23:32:35.510
> 
> 标签：php, kohana

我用

```
public function get_all_news()
{
    $result = DB::select()
            ->from("parys_news")
            ->order_by("ID", "DESC")
            ->execute()
            ;

    return $result;
} 
```

创建查询。现在我想做一个类似的函数来计算查询中的记录

```
public function count_records($query)
{

} 
```

如何在 Kohana 中做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T07:33:47.343

在您的特定情况下，要获取所有新闻计数的计数，您可以简单地[`Database_Result::count()`](http://kohanaframework.org/3.3/guide-api/Database_Result#count)在返回的结果对象上调用方法，例如：

```
$news = YourModel->get_all_news();
$news_count = $news->count(); 
```

如果你想有一个通用的`count_records($query)`方法，那么取决于你想传递什么参数：

*   如果是简单的 SQL 查询字符串：

    ```
    public function count_records($query)
    {
        return DB::query(Database::SELECT, $query)->execute()->count();
    } 
    ```

*   如果是 Database_Query

    ```
    public function count_records(Database_Query $query)
    {
        return $query->execute()->count();
    } 
    ```

*   或者它已经是 Database_Result 对象，然后简单地：

    ```
    public function count_records(Database_Result $result)
    {
        return $result->count();
    } 
    ```

# javascript - 浏览器 Javascript 引擎总是单线程的？

> ID：14969613
> 
> 赞同：1
> 
> 时间：2013-02-19T23:32:48.223
> 
> 标签：javascript, html, browser

我有一个包含 2 个 Javascript 文件的网页。第二个文件需要它之前的文件。更具体地说，在我的第二个 Javascript 文件中，我立即使用了 jQuery 的 .ajax() 方法。是否有可能在非常极端的情况下，当我去使用 jQuery 时它可能还没有准备好？

注意：我不想使用 $(document).ready() 也不想使用诸如 require.js 或 head.js 之类的库。我只是想确信当我去使用 jQuery 时它会在那里，并且即使在边缘情况下也会尊重 Javascript 的单线程特性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:35:21.123

如果您在需要使用该`$.ajax()`方法的文件之前引用了 jQuery，那么您可以确信 jQuery 将可供使用。

需要明确的`$(document).ready()`是，不是确保*jQuery*已准备好，而是确保 DOM 已准备好进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:35:31.193

是的，Javascript 是严格的单线程的，每个脚本都会在下一个脚本被解析之前被解析。

第二个脚本会在第一个脚本没有先运行的情况下运行的唯一情况是，如果请求第一个脚本失败，但请求第二个脚本成功，但如果脚本无法加载，无论如何你都会被搞砸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T23:38:03.057

`<script>`属性包含的脚本是按`src`顺序加载的。因此，如果您有设置

```
<script src="one-file"></script>
<script src="other-file"></script> 
```

...`one-file` *必须*在文档继续解析之前完成下载和执行（即在检索其他文件之前）。这与`defer`and`async`属性不同，但您可能会省略这些。

如果我的回答对您来说不够安心，[我从 HTML 规范本身收集了它](http://www.w3.org/TR/html5/scripting-1.html#the-script-element)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:42:09.277

请阅读：[http://api.jquery.com/category/events/document-loading/](http://api.jquery.com/category/events/document-loading/)，您实际上是在设置代码何时在页面开头运行。如果您想使用 $(document).ready() 并不重要，它是必需的，尽管我们大多数人都将其视为：

```
$(function() {}; 
```

我不确定您的担忧是否有效，您还没有真正指定一个您无法通过测试应用程序自行解决的问题，但是如果您之前遇到 jscript 代码执行，您可能想要做什么是时候在多 js 文件环境中了（为什么不只使用 1，尤其是如果您不熟悉技术）是：[如何从另一个 JavaScript 文件加载？](https://stackoverflow.com/questions/5892845/how-to-load-one-javascript-file-from-another)从你的 jscript*耸耸肩加载 jscript*

```
$.getScript("another_script.js"); 
```

# clojure - Clojure 字符串/替换在我的函数中失败

> ID：14969616
> 
> 赞同：2
> 
> 时间：2013-02-19T23:32:57.313
> 
> 标签：clojure

我想在发送给谷歌的搜索查询中用加号替换空格字符。

```
(defn search-google [search-term]
  (clojure.string/replace search-term #" " "+")
    (browse-url 
      (str "http://google.ca/search?q=" search-term))) 
```

但是，由于我的搜索词保留了空格，因此我的功能失败了。

```
(search-google "clojure user input")

URISyntaxException Illegal character in query at index 32:
http://google.ca/search?q=clojure user input  java.net.URI$Parser.fail (:-1) 
```

我是clojure的新手，怀疑我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:41:58.217

正在创建一个新的固定搜索词，然后忽略固定搜索词并将未更改的搜索词传递给浏览 URL：

```
(def browse-url println)                                                                                                                                                  
(defn search-google [search-term]                                                                                                                                         
  (let [fixed-search-term (clojure.string/replace search-term #" " "+")]                                                                                                  
    (browse-url                                                                                                                                                           
     (str "http://google.ca/search?q=" fixed-search-term))))  

user> (search-google "a b c")                                                                                                                                             
http://google.ca/search?q=a+b+c                                                                                                                                           
nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:38:32.980

试试这个：

```
(defn search-google [search-term]
  (browse-url 
   (str "http://google.ca/search?q="
        (clojure.string/replace search-term #"\s+" "+")))) 
```

请注意，该模式是一个正则表达式，您可以使用`\s+`来指示要替换的字符串匹配项应包含一个或多个空格。

另请注意，replace 过程返回一个*新*字符串，而不修改原始字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:41:55.777

Replace 不会`search-term`就地修改，而是返回它的副本，该副本被丢弃。

用于`let`将此值绑定到函数中的名称并使用该名称进行调用`browse-url`。

# sas - 在sas中读取txt文件

> ID：14969619
> 
> 赞同：0
> 
> 时间：2013-02-19T23:33:22.703
> 
> 标签：sas

我有一个非常简单的问题。我正在尝试读取 sas 中的 txt 文件。数据集有 6 个变量（列），其中一个变量是定性的，包含元素 M 和 F。我使用以下代码读取数据：

```
data dta;
    infile 'C:\...\dta.txt';
    input ID $ Q y1 y2 y3 y4; 
    run; 
```

当我打印数据集时，我在定性变量 (Q) 的列中得到点，而不是 F 和 M。

我做错了什么。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:26:22.803

试着在你的输入语句`$`后面加上一个美元符号`Q`，这样它就变成了：

`input ID $ Q $ y1 y2 y3 y4;`

除非另有明确说明，否则 SAS 假定传入变量是数字的，这就是`$`在输入语句中所做的。

# c# - C# 中用于索引属性的正确语法是什么

> ID：14969629
> 
> 赞同：-3
> 
> 时间：2013-02-19T23:33:58.250
> 
> 标签：c#, indexer

如何声明索引属性？

```
public class PublishProperties : ScriptableObject {

List<string> m_shellPathsT = new List<string>();
List<string> m_shellPathsL = new List<string>();
public List<string> ShellPath[int index]
{
    get 
    {
        if (index == 0)
            return m_shellPathsT;
        else
            return m_shellPathsL;
    }
} 
```

这不会编译，我不确定如何编码。由于其他要求，我必须拥有两个这样声明的不同列表。

我通常会有一个列表数组......

或者像这样

```
public List<string>[] m_shellPaths = { new List<string>(), new List<string>() }; 
```

但是，这再次不适用于其他因素......（基本上有一些自动发生的序列化不适用于构造函数中声明的变量或类似上面的变量。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:37:00.183

[请在提问之前阅读文档。](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)

```
public List<string> this[int index]
{
    get 
    {
        if (index == 0)
            return m_shellPathsT;
        else
            return m_shellPathsL;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:44:12.487

Based on your comments, it seems you want to access items of either `m_shellPathsT` or `m_shellPathsS` via `ShellPaths`.

So, assuming foo is an object of type `PublishProperties`, you want to be able to write code like this:

```
foo.ShellPaths[0]; 
```

What happens here is actually two things:

1.  You are accessing property `ShellPaths` on type `PublishProperties`. It returns a `List<string>`
2.  You are accessing the item at index `0` of the returned list. It returns a `string`.

The property `ShellPaths` has the following structure:

```
public List<string> ShellPaths
{
    get { return <something>; }
} 
```

As you can see, there is no index.

But because you want to access different lists based on the index, the implementation of `ShellPaths` can't simply return either one of your internally stored lists.

You will have to create a new list that returns the first item of `m_shellPathsT` if the index is `0`. Otherwise it returns the corresponding item of `m_shellPathsS`.

To achieve this, you could implement `ShellPaths` like this:

```
public List<string> ShellPaths
{
    get { return m_shellPathsT.Take(1).Concat(m_shellPathsS.Skip(1)).ToList(); }
} 
```

Now, that would work, but would be quite unefficient: Every time someone accesses `ShellPaths` a new list is created. It would be better if you would create that special list once, maybe in the constructor or whenever the content of any of the internal lists changes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:30:39.240

C# 不支持索引属性。您可以使用索引类本身

```
public List<string> this[int index]
{
    get 
    {
        if (index == 0)
            return m_shellPathsT;
        else
            return m_shellPathsL;
    }
} 
```

但是在这个非常特殊的情况下，我无法这样做，因为需要几组这种类型的实现，并且序列化使我无法使用更优雅的声明。

可以使用方法，但不具有与属性相同的功能。
我找到了有关此的更多[信息](https://stackoverflow.com/questions/2806894/why-c-sharp-doesnt-implement-indexed-properties)。

但是在这种情况下，我没有理由不能添加一个额外的数组

```
public List<string> m_shellPathsT = new List<string>();
public List<string> m_shellPathsL = new List<string>() ;
public List<string>[] m_shellPaths = new List<string>[2];

public PublishProperties()
{
    m_shellPaths[0] = m_shellPathsT;
    m_shellPaths[1] = m_shellPathsL;
} 
```

# ruby - 检查扑克顺子的数字数组？

> ID：14969632
> 
> 赞同：0
> 
> 时间：2013-02-19T23:34:05.643
> 
> 标签：ruby

[我的问题与“如何返回一组可能存在于数组中的序列号？](https://stackoverflow.com/questions/6258971/how-do-i-return-a-group-of-sequential-numbers-that-might-exist-in-an-array) ”非常相似。

我需要找到一种方法来检查给定的数字数组（基本上是卡片值）是否是扑克顺子，或者只是返回最长的序列。

正如托马斯先生所建议的，`each_cons`效果很好，但在德州扑克中，顺子不仅是 2、3、4、5、6 或 8、9、10、J、Q，而且还包括 K、A、2、3、4。

如果我们将数字签名为数字，我认为这将使一切变得更容易：J 将是 11，Q 将是 12，依此类推。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:47:45.943

您的输入是一个数字数组。所以我假设 J = 11，Q = 12，K= 13 和 A= 1。

1) 对数组进行排序 2) 遍历数组，当你遇到下一个数字比前一个数字大一个数字时返回 false，因为它不是顺手。

如果您不假设 J=11、Q=12、K=13、A=1，那么您需要一个额外的数据结构（也许是一个字典来降低复杂性，因为查找是 O(1)）时间。字典 a = new Dictionary(); a.key = "K"; a.value = "13"。

现在如果你有一个数组 [10,11,J,Q,K] => 遍历它并在你的字典中查找，一旦你的值比前一张卡片大一个，然后返回 false..

显然你会有基本情况，如果输入数组的长度超过 5。或者是空的或者 < 5。如果你正在做重叠的直线，那么在 K 之后唯一可以出现的是值为 1 的 A ，所以如果是这样的话，那么继续你的循环。希望这会有所帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:34:18.937

试试这个（假设你已经用数字替换了卡片，A=1, 2=2）

```
def straight?(my_cards)    
  sorted = my_cards.uniq.sort

  if sorted.length < 5
    # cant form a straight with duplicates
    false

  else
    # also give an Ace a value of 14 so it can be placed after a King
    sorted << 14 if sorted[0] == 1

    # returns true if the last number is equal to 4 plus the first so
    # a hand with 2,3,4,5,6 will return true
    sorted.first + 4 == sorted.last
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:47:35.353

也许它不是最佳的，但我会使用`Array#rotate!`：

```
@values = %w{A 2 3 4 5 6 7 8 9 10 J Q K A}

def longest_sequence cards
  cards, values = cards.sort_by{|c| @values.index c}, @values.dup
  # iterate down from 5 and rotate through cards/values until you find a match
  5.downto(1).each do |n|
    values.length.times do
      cards.length.times do
        return cards[0...n] if cards[0...n] == values[0...n]
        cards.rotate!
      end
      values.rotate!
    end
  end
end

longest_sequence ['A', '3', '4']
#=> ["3", "4"]
longest_sequence ['A', '3', '4', '2', '5']
#=> ["A", "2", "3", "4", "5"]
longest_sequence ['A', '10', 'Q', 'J', 'K']
#=> ["10", "J", "Q", "K", "A"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T10:23:35.913

只需列举所有可能的顺子：

```
All_Poker_Straights = %w(A 2 3 4 5 6 7 8 9 10 J Q K A).each_cons(5) 
```

并检查（排序的）手是否是其中之一：

```
p All_Poker_Straights.include?(%w(4 5 6 7 8))
# => true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T08:21:30.253

```
class Array
  def sequences
    a = sort.uniq.inject([]){|a, e|
      a.last && e == a.last.last + 1 ? a.last.push(e) : a.push([e])
      a
    }
    a.push([*a.pop, *a.shift]) if a.first.first == 1 && a.last.last == 13
    a
  end
end

[1, 3, 4].sequences # => [[1], [3, 4]]
[1, 3, 4, 2, 5].sequences # => [[1, 2, 3, 4, 5]]
[1, 10, 12, 11, 13].sequences # => [[10, 11, 12, 13, 1]]

[1, 3, 4].sequences.max{|a| a.length} # => [3, 4]
[1, 3, 4, 2, 5].sequences.max{|a| a.length} # => [1, 2, 3, 4, 5]
[1, 10, 12, 11, 13].sequences.max{|a| a.length} # => [10, 11, 12, 13, 1] 
```

# php - Codeigniter 活动记录查找租赁项目的可用日期

> ID：14969637
> 
> 赞同：0
> 
> 时间：2013-02-19T23:34:18.560
> 
> 标签：php, mysql, codeigniter, activerecord

我正在创建一个用户可以租用物品的网站。我有 2 张桌子。租金和库存。库存表仅包含有关产品的所有详细信息，而租赁表具有库存 ID 和用于预订目的的开始日期/结束日期。因此，如果客户预订了一个项目，我需要使用 codeigniter 中的活动记录检查他的日期是否可用。关于如何实现这一点的任何想法......

这是我的出租表...

```
id | customerId | productsId | periodStart (dateTime) | periodEnd (dateTime) | status 
```

我的用户从日期时间格式（Ymd）的日期选择器中选择他的开始日期。

该网站在开始日期上增加了一定的天数来制定结束日期。所以我最终得到的是客户所需的日期范围，如下所示：

```
$startTime = $_POST['date'];
$endTime = strtotime('+'.$periodLength.'day', $startTime); 
```

我怎样才能知道我上面描述的租金表中是否有该日期范围。我不熟悉连接，但我觉得它们在这里可能是必要的。

我尝试了几件事，但没有一个奏效。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:23:00.183

你可以使用类似的东西

```
 $this->db->where('start_date >=', $startTime );
    $this->db->where('end_date <=', $endTime);
    $count= $this->db->count_all_results('rentals');
    if($count > something)   //your business logic here
        return true;
    else 
        return false 
```

如果我说得对，则不需要加入，您也可以添加其他 where 子句，例如 id 或其他

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:57:49.150

而不是 $ startTime = $ _POST ['date']; 但是 $ startTime = $ this-> imput-> post ('date');

添加 $this->load->helper('form'); 早期方法

# c++ - 需要帮助弄清楚如何询问用户他们想要删除的内容并在数组中删除它

> ID：14969643
> 
> 赞同：0
> 
> 时间：2013-02-19T23:34:42.007
> 
> 标签：c++, arrays, visual-studio-2010, visual-studio-2012, structure

我有一个用于管理名为“client_DB”的记录数据库的程序。数组“client_DB”由客户手机通话记录组成。每个客户通话记录包含八个字段，如下所示：1）十位手机号码（字符串，无破折号），2）拨打电话时使用的中继站数量（整数），3）电话长度通话分钟数（整数），4）通话净成本（双），5）税率（双），6）通话税（双），7）通话总成本（双）和8 ) 名为“discount_aval”的字符串字段，值为“yes”或“no”。数组 client_DB 的容量 (SIZE) 为 20 条记录。

它从一个名为“client_data.txt”的输入文件中读取，该文件由以下值组成：

```
9546321555  0   0   yes
5612971340  5   50  no
3051234567  8   25  no
7542346622  24  17  no
3054432762  15  30  yes
9544321011  50  100 yes
8776219988  87  82  yes
9042224556  4   5   yes
7877176590  11  1   no
5617278899  20  45  no
9546321555  4   3   yes
5612971340  79  86  no
3051234567  8   25  no
7542346622  24  118 no
3054432762  115 25  yes
9544321011  43  10  yes
8776219988  265 22  yes
9042224556  2   5   yes
7877176590  89  67  no
5617278899  40  56  no 
```

我几乎完成了这个，但我需要关于如何编写几行代码以及它们去哪里的帮助。我需要实现一个我拥有的菜单，但我需要帮助了解如何询问用户他们想要删除哪个电话号码并将其删除以用于 REMOVE 功能，以及询问要搜索的电话号码并返回其在 SEARCH 函数中的位置。我还需要帮助设置打印到输出文件“weekly_client_call_info.txt”的精度我知道我需要实现这个：

```
 cout.setf(ios::fixed);
 cout.setf(ios::showpoint);
 cout.precision(2); 
```

但我应该把它放在哪里？我也很想获得有关如何将列标题添加到输出文件上打印的内容的提示。有一个名为 Process 的函数可以进行计算，我如何设置这些计算的精度？其他的我都明白了，谢谢！到目前为止，这是我的代码：（对不起，如果我在如何正确提问方面犯了任何错误！）

```
#include <iostream>
    #include <string>
    #include <fstream>

    //************************************************************************
    //Name:  Kevin Dunphy           Due Date: 022113
    //Instructor: Dr. Bullard               Total Points:  100 pts
    //Assignment2: client_call.cpp          UsIDFAU: kdunphy
    //:

     using namespace std;

     const int CAPACITY = 20;

     class client_db
      {
       public:
      string cellnum;
      int numofrelay;
      int call_length;
      double net_cost;
      double tax_rate;
      double call_tax;
      double total_cost;
      string discount_aval;
         };

     bool IsFull(int); //returns true if the array is full; otherwise false.
     bool IsEmpty(int count);// returns ture if the array is empty; otherwise false.

     void Add(client_db A[], int & count, client_db & db);
     void Remove(client_db A[], int *count, string name);// removes an item from the   array if it is there
     void Print_DB(client_db A[], int count);//prints to output file
     void Call_stats(client_db A[], int count);// prints all the items in the array
     int Search_DB(client_db A[], int count, string name); //if the name is in the  array, its location is returned
    //                                        //otherwise return -1;
    //
     bool IsFull(int count)
     ////Description: Determines if the array is full
     {
  return (count == CAPACITY);
       }

     bool IsEmpty(int count)
      ////Description: Determines if the array is empty
      {
return (count == 0);
       }

      void Process (client_db A[], int count)
       {

 for(int i=0; i<count; i++)
{
if (A[i].numofrelay >=1 && A[i].numofrelay<=5)
{
    A[i].tax_rate=0.01;
    A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

}
else if (A[i].numofrelay >=6 && A[i].numofrelay<=11)
{
    A[i].tax_rate=0.03;
    A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

}
else if (A[i].numofrelay>=12 && A[i].numofrelay<=20)
{ 
    A[i].tax_rate=0.05;
    A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].numofrelay);

}
else if (A[i].numofrelay >=21 && A[i].numofrelay<=50)
{
   A[i].tax_rate =0.08;
   A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

}
else if (A[i].numofrelay >50)
{
    A[i].tax_rate =0.12;
    A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

}
A[i].call_tax = ((A[i].tax_rate)/(100))*(A[i].net_cost);
A[i].total_cost = A[i].net_cost + A[i].call_tax;
}
     }

     void Print_DB(client_db A[], int count)

     //Description: Prints the items stored in A to the standard i/o device
     {

  string filename;
  cout<<"Enter output filename: "; //geting filename
  cin>>filename;

  ofstream output; //declaring an output file stream

  output.open(filename.c_str()); // c_str() converts a C++ string into a 
                              // c-style string (char array) &
                              //open binds an ofstream to a file
  for(int i=0; i<count; i++)
  {

    output<<A[i].cellnum<<"\t"
          <<A[i].numofrelay<<"\t"
          <<A[i].call_length<<"\t"
          <<A[i].net_cost<<"\t"
          <<A[i].tax_rate<<"\t"
          <<A[i].call_tax<<"\t"
          <<A[i].total_cost<<"\t"
          <<A[i].discount_aval<<endl;

}

output.close();
    }

    int Search(client_db A[], int count, string cellnum)
    ////Description: Locates cellnumbers in A's fields
    {
for(int i=0; i<count; i++)
{
    if (cellnum == A[i].cellnum)
    {
        return i;
    }
}
return -1;
     }

      void Add(client_db A[], int &count)
      ////Description: Adds key to the array
     {
if (!IsFull(count))
{
    cout<<"Enter a cellphone number, number of relay stations and the call            lenght and if a discount is available: ";
    cin>>A[count].cellnum>>A[count].numofrelay>>A[count].call_length>>A[count].discount_aval;
    count++;

}
else
{
    cout<<"The list is full\n";
}

    }

     void Add(client_db A[], int &count, client_db &db)
       ////Description: Adds key to the array
     {
if (!IsFull(count))
{
    A[count] = db; 
    count++;

}
else
{
    cout<<"The list is FULL! \n";
}

     }
      void Remove(client_db A[], int *count, string cellnum )

        ////Description: Removes the number from the array is it is there
      {
cout<<"Remove function is called and removed the cellphone number 9546321555 \t" <<endl;

int loc = Search(A,*count,cellnum);

if (IsEmpty(*count))
{
    cout<<"A is EMPTY!\n";
    return;
}
else if (loc == -1)
{
    cout<<"key not in A\n";
}
else
{
    for(int j=loc; j<(*count)-1; j++)
    {
        A[j] = A[j+1];
    }
    (*count)--;

}
        }

       void Call_stats(client_db A[],int count) // prints to screen
      {
 for(int i=0; i<count; i++)
  {
    cout<<A[i].cellnum<<"\t"
        <<A[i].numofrelay<<"\t"
        <<A[i].call_length<<"\t"
        <<A[i].discount_aval<<endl;

}
            }
          void Menu ()
      {
cout<<"The values of the filename you entered have been recognized"<<endl;
cout<<"Please enter the letter of your application of choice"<<endl;
cout<<"       "<<endl;
    cout<<"************  WELCOME TO THE MAIN MENU  ************"<<endl;
cout<<" Add an item...........................A"<<endl;
    cout<<" Remove an item........................R"<<endl;
cout<<" Search for an item....................S"<<endl;
    cout<<" Print current data....................P"<<endl;
cout<<" Print to output file..................O"<<endl;
cout<<"****************************************************"<<endl;
        }

       int main()
         {

char answer;
char answer2;
client_db CLIENT[CAPACITY]; //declaring database
int count = 0;   //initializing count

string filename;
cout<<"Hello!, this program holds clients call data records."<<endl;
cout<<"Enter input filename: "; //geting filename
cin>>filename;

ifstream input; //declaring an input file stream

input.open(filename.c_str()); // c_str() converts a C++ string into
    while(count<CAPACITY && !input.eof()) //reading until the end of the file (eof=end-of-file)
{

    input>>CLIENT[count].cellnum
    >>CLIENT[count].numofrelay
    >>CLIENT[count].call_length
    >>CLIENT[count].discount_aval;

    count++;

}

do
    {

     Menu();
     cout<<"Please enter a command letter:  "<<endl;
cin>>answer;
client_db db;

switch (answer)
    {

    case 'A' : 
cout<<"Enter a cellphone number, number of relay stations and the call lenght and  if a discount is available: "<<endl;
cin>>db.cellnum>>db.numofrelay>>db.call_length>>db.discount_aval;
Add(CLIENT, count, db);
     break;
    case 'R' : //Remove function goes here
     break;
     case 'S' : // SEARCH function goes here

      break;
     case 'P' : Call_stats(CLIENT,count);
     break;
      case 'O' :
Process(CLIENT,count); //how do i set the precision for this?
Print_DB(CLIENT,count);
     break;
}
 cout<<"Would you like to make another command?(y/n):   "<<endl;
     cin>>answer2;
     } while (answer2 == 'Y' || answer2 == 'y');
     cout<<"Goodbye"<<endl;
 return 0;

       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:56:25.173

在你的输出函数中

```
void Call_stats(client_db A[],int count) // prints to screen
  {
        cout.setf(ios::fixed, ios::floatfield);
        cout << setprecision(3); // precision of 3
   } 
```

至于搜索和删除方法，您需要从用户那里获取数字作为 int 例如 cin>>number 如果用户 int == list int 使用适当的参数调用删除函数，则循环遍历您的数字列表

# django - Django将用户添加为外键时得到django.utils.functional.__proxy__异常

> ID：14969644
> 
> 赞同：0
> 
> 时间：2013-02-19T23:34:44.313
> 
> 标签：django, exception, proxy, foreign-keys

我正在尝试将旧 mysql 数据库中的时事通讯订阅导入新的 django 时事通讯应用程序，代码如下所示：

```
for _ns in CmsModuleNmsList.objects.using('old').all():
            ns = Newsletter(pk=_ns.listid, title=_ns.name, slug=slugify(_ns.name), email='email@email.com', sender='Admin')
            ns.save()
            for _list in CmsModuleNmsListuser.objects.using('old').filter(listid=_ns.listid):
                try:
                    _user = CmsModuleNmsUsers.objects.using('old').get(userid=_list.userid)
                    user = None
                    try:
                        user = User.objects.get(email=_user.email)
                    except:
                        print "Cannot find user"
                    Subscription(newsletter=ns, user=user, subscribed=True, email_field=_user.email, name_field=_user.username, create_date=_user.dateadded).save()
                except Exception as e:
                    transaction.rollback()
                    print _user.username, 'Error', str(e) 
```

当我运行它时，我会得到这样的异常，这是由这一行引起的`Subscription(newsletter=ns, user=user, subscribed=True, email_field=_user.email, name_field=_user.username, create_date=_user.dateadded).save()`，如果我取出，`user=user`我不会得到异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:54:32.373

好的，在浏览了时事通讯的代码后，我发现这些行导致了问题：

```
assert ((self.user and not self.email_field) or
                (self.email_field and not self.user)), \
            _('If user is set, email must be null and vice versa.') 
```

我正在设置用户还设置电子邮件...

参考[https://docs.djangoproject.com/en/dev/ref/unicode/#translated-strings](https://docs.djangoproject.com/en/dev/ref/unicode/#translated-strings)

# c# - ListBox 已设置数据源，但 Refresh 什么也不做

> ID：14969650
> 
> 赞同：6
> 
> 时间：2013-02-19T23:35:03.020
> 
> 标签：c#, database, winforms, datatable, listbox-control

我似乎误解了 ListBox.Refresh() 方法，我希望有人能帮助我。

我正在尝试做的事情：
我想在 Windows 窗体初始化时加载列表框的数据（源 = sql 数据库的表）。此外，当用户将数据添加到数据库时，我希望更新列表框。

逻辑：
我有一个 sql 数据库作为我的源，它设置为：

```
listBoxDays.DataSource = DBQuery.informationRetreval().DefaultView; 
```

DBquery.informationRetreval() 是我的 DBQuery 静态类中的静态方法。它所做的只是从数据库中建立一个表，然后返回该表。

我在与 initializeComponent 相同的方法中设置数据源（因此我的列表框将加载现有数据）：

```
public Settings()
    {
        InitializeComponent();
        listBoxDays.DataSource = DBQuery.informationRetreval().DefaultView;
    } 
```

当用户添加更多数据时：我调用一个将数据添加到数据库的方法，然后调用：

```
 listBoxDays.Refresh(); //update listbox 
```

问题：这不会更新列表框。初始化我的列表框后，数据将填充，但之后不会更改（因此刷新不起作用）。这是为什么？我可以再次设置 DataSource，但这感觉很草率。在查看了一些文档后，我注意到事件处理程序 DataSourceChanged 可能更适合我正在寻找的内容。尽管如此，为什么不刷新工作？

感谢您的耐心等待。如果我需要更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T23:49:02.453

它只会在对象发生变化时刷新（例如，不同的查询），而不是数据。你可以这样做：

```
listBoxDays.DataSource = null;
listBoxDays.DataSource = DBQuery.informationRetreval().DefaultView; 
```

刷新它......每次你需要。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T23:43:29.617

> Refresh()：强制控件使其客户区无效并立即重绘自身和任何子控件。

刷新不会重新绑定您的控件，它只会导致控件被重绘。您将不得不`DataSource`再次设置

```
listBoxDays.DataSource = DBQuery.informationRetreval().DefaultView; 
```

并重新绑定它。

资料来源：[微软 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.refresh%28v=vs.90%29.aspx)

# javascript - Setinterval 以指数时间减少

> ID：14969657
> 
> 赞同：5
> 
> 时间：2013-02-19T23:35:36.273
> 
> 标签：javascript, jquery, settimeout, setinterval, exponential

我有一个带有 setinterval 的 mousedown 事件。我希望间隔的时间是可变的。所以第一个是 500，第二个是 500/2 = 250，等等。有什么提示吗？

```
$plus.mousedown(function(e) {
    increment(20)
    timeout = setInterval(function(){
        increment(20)
    }, 500);
});
$(document).mouseup(function(){
    clearInterval(timeout);
    return false;
}); 
```

干杯!

编辑：很抱歉模棱两可。我希望在鼠标按下期间改变间隔时间。因此，当执行 mousedown 时，intervaltime 应该改变。因此，不是每次单击鼠标，而是每次连续单击，然后再次重置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T23:47:12.480

`setInterval()`除非您继续清除延迟更改，否则您无法真正做到这一点，因此您不妨编写一个包装器`setTimeout()`来完成类似的事情：

```
function easingTimeout(delay, fn)
{
  var id,
  invoker = function() {
    fn();
    delay = Math.floor(delay / 2);
    if (delay) {
      id = setTimeout(invoker, delay);
    } else {
      id = null;
    }
  }

  // start it off
  id = setTimeout(invoker, delay);

  return {
    clear: function() {
      if (id) {
        clearTimeout(id);
        id = null;
      }
    }
} 
```

要使用：

```
var timeout;

$plus.mousedown(function(e) {
    increment(20);
    timeout = easingTimeout(500, function() {
        increment(20);
    });
});

$(document).mouseup(function(){
    timeout.clear();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:00:10.637

此解决方案不依赖于 jQuery：

```
var timeoutInterval = 500;
var mousedown = false;

function incrementAndWait() {
  if (!mousedown) return;
  increment(20);
  timeout = setTimeout(incrementAndWait, timeoutInterval);
  timeoutInterval /= 2;
}

document.onmousedown = function() {
  timeoutInterval = 500; // Reset to 500 to allow multiple mousedown/mouseup
  mousedown = true;
  incrementAndWait();
};

document.onmouseup = function() {
  mousedown = false;
} 
```

您可以添加`console.log((new Date).getTime(), 20);`到 incrementAndWait 方法以查看控制台上的数字。玩起来很有趣:)

# ruby-on-rails - 不使用默认 gemset 的 RVM 问题

> ID：14969660
> 
> 赞同：1
> 
> 时间：2013-02-19T23:35:51.117
> 
> 标签：ruby-on-rails, ruby, gem, rvm, bundler

我是 RVM 的新手。我已经运行此命令将“全局”设置为我的默认 gemset：

```
rvm use ruby-1.9.3-head@global --default 
```

当我启动一个新的终端并运行时，`rvm gemset list`我得到了这个（这似乎显示 global 是正确的默认值）：

```
gemsets for ruby-1.9.3-head (found in /Users/john/.rvm/gems/ruby-1.9.3-head)
   (default)
=> global 
```

但是，当我尝试从命令行运行 Ruby 时，例如`ruby -v`，我收到一个错误，即未安装捆绑程序。

如果我这样做`gem install bundler`并重新运行相同的命令，我会得到完全相同的错误，就好像没有安装 bundler 一样。

然后我运行`rvm gemset use global`，如果我运行相同，`rvm gemset list`我会得到完全相同的输出，其中 global 似乎是`=>`默认值。

但随后运行`ruby -v`工作正常。这里发生了什么？

# android - 列一个清单 在捆绑中

> ID：14969663
> 
> 赞同：3
> 
> 时间：2013-02-19T23:36:23.660
> 
> 标签：android, arraylist, bundle, intentservice

我有一个`IntentService`连接到一个网站并通过 JSoup 创建一个带有解析 HTML 的列表。我现在需要将该列表传回 a 中`Bundle`，但我不知道该怎么做。这是我的代码`IntentService`：

```
public class NewerService extends IntentService {

public NewerService() {
    super("NewerService");
    // TODO Auto-generated constructor stub
}

@Override
protected void onHandleIntent(Intent intent) {
    ResultReceiver rec = intent.getParcelableExtra("receiverTag");
    String playersName = intent.getStringExtra("Player");
    List<String> list = new ArrayList<String>();
    Document doc = null;
    try {
        doc = Jsoup.connect("http://espn.go.com/nhl/team/stats/_/name/phi/philadelphia-flyers").get();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    for (Element table : doc.select("table.tablehead")) {
        for (Element row : table.select("tr")) {
            Elements tds = row.select("td");
            if (tds.size() > 6) {
                String a = tds.get(0).text() + ":" + " Games Played: "+
                    tds.get(1).text()+"," + " GOALS: " + tds.get(2).text()+"," + 
                    " ASSISTS: " + tds.get(3).text() + " POINTS: " + 
                    tds.get(4).text() + " PLUS/MINUS: " + tds.get(5).text() + " 
                    PIM: " + tds.get(6).text();

                    list.add(a); // Add the string to the list
             }

        }
    }   
} 
```

我提前感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T23:40:19.447

您是否尝试过使用[Bundle.putStringArrayList](http://developer.android.com/reference/android/os/Bundle.html#putStringArrayList%28java.lang.String,%20java.util.ArrayList%3Cjava.lang.String%3E%29)或[Intent.putStringArrayListExtra](http://developer.android.com/reference/android/content/Intent.html#putStringArrayListExtra%28java.lang.String,%20java.util.ArrayList%3Cjava.lang.String%3E%29)？

如果您的意思是您不知道如何从服务启动活动，请尝试[这个问题](https://stackoverflow.com/questions/3456034/how-to-start-an-activity-from-a-service)。

# java - 如何根据特定条件替换方括号内的单词

> ID：14969664
> 
> 赞同：1
> 
> 时间：2013-02-19T23:36:24.347
> 
> 标签：java, regex

我有一个棘手的情况，似乎不起作用。对于给定的字符串，`"Hi [HandleKey], you have [Action]"`和包含的映射，`map<"HandleKey","Peter">`如果在映射中找到键，我想替换方括号和其中的单词。在这种情况下，映射不包含键 Action。字符串应该返回`"Hi Peter, you have [Action]"`。

这是我正在处理的代码：

```
private String messageFormatter(String tMessage, Map<String, String> messageMap)
{
  String formattedMsg = null;
  Set<String> keyset = messageMap.keySet();

  Iterator<String> keySetItr = keyset.iterator();
  String msgkey = null;
  boolean isFormatted = false;
  while (keySetItr.hasNext())
  {
    msgkey = keySetItr.next();
    if(t.contains(msgkey))
    {
      if(!isFormatted)
      {
        formattedMsg = tMessage.replaceAll("\\[", "").replaceAll("\\]", "");
        formattedMsg = formattedMsg.replaceAll(msgkey, messageMap.get(msgkey));
        isFormatted= true;
      }else 
      {
        formattedMsg = formattedMsg.replaceAll(msgkey, messageMap.get(msgkey));;
      } 
    }else 
    {
      formattedMsg=tMessage;
    }
  }
  return formattedMsg;
} 
```

最后一个else部分是不对的。谁能帮我解决这个问题。此代码适用于所有情况，除非在地图中找不到匹配的键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:57:36.893

这个想法适合你吗？

`[..]`您可以在地图方面做一些技巧，而不是应用正则表达式或提取 之间的东西。例如

```
String s = "Hi [HandleKey], you have [Action]";
for(String k: yourMap.keySet()){
  s=s.replaceAll("\\["+k+"\\]",yourMap.get(k));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:44:26.880

你可以这样做`regex`，这是一个完整的示例代码

```
public static void main(String[] args) {
    String str = "Hi [HandleKey], you have [Action] ";
    Hashtable<String, String> table = new Hashtable<String, String>();
    table.put("HandleKey", "Peter");

    Pattern pattern = Pattern.compile("\\[(\\w+)\\]");
    Matcher matcher = pattern.matcher(str);
    while (matcher.find()) {
        String key = matcher.group(1);
        if (table.containsKey(key)) {
            str = str.replaceFirst("\\[" + key + "\\]", table.get(key));
        }
    }
    System.out.println(str);
} 
```

输出：

> 嗨，彼得，你有 [行动]

请注意，如果地图大小已经很大或正在增长，这比循环遍历*更有效。*`Map`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:44:18.270

要处理不在地图中的键，对上面的内容进行最小的更改，请尝试

```
formattedMsg.replaceAll(msgkey, 
   (messageMap.containsKey(msgKey) ? messageMap.get(msgkey) : "[" + msgKey + "]")); 
```

但是再看一遍，我可以看到您正在从 messageMap 迭代键集，因此不会出现键未出现在地图中的问题？

还有对 if(t.contains(msgKey))... 的引用，但不确定 t 是什么

如果您希望文本在未找到时包含格式化的 [msgKey]，那么如果您想在某些情况下将它们放回原处，则替换所有“[”和“]”似乎是错误的开始方式。

我会看看@iTech 的建议，让正则表达式为你做更多的事情

# python - 从html文件中导入表的行作为python中的列表

> ID：14969667
> 
> 赞同：2
> 
> 时间：2013-02-19T23:36:50.050
> 
> 标签：python, html, python-2.7, beautifulsoup

我是一个 python 新手，我遇到了一些我无法解决的问题（即使在大约一百万个谷歌搜索之后）。

我有 >100 个 html 文件，每个文件中都有几个表。最终，我希望将文件中第一个 HTML 表的每一行作为 python 中的列表，但没有 HTML 标记。第一步，我试图弄清楚如何摆脱 HTML 标签，然后我需要弄清楚如何将其作为列表导入。

我的 HTML 文件如下所示：

```
 <tr><td>1</td><td>FORWARD</td><td>72</td><td>20</td><td>60.29</td><td>55.00</td><td>5.00</td><td>3.00</td></tr>
 <tr><td>&nbsp;</td><td>REVERSE</td><td>258</td><td>20</td><td>60.11</td><td>45.00</td><td>4.00</td><td>3.00</td></tr>
 <tr><td>2</td><td>FORWARD</td><td>77</td><td>20</td><td>60.08</td><td>50.00</td><td>5.00</td><td>2.00</td></tr>
 <tr><td>&nbsp;</td><td>REVERSE</td><td>258</td><td>20</td><td>60.11</td><td>45.00</td><td>4.00</td><td>3.00</td></tr> 
```

我想要的是要放入列表中的行中的值，类似于手动执行此操作会得到的值：

```
 row1 = [FORWARD, 72, 20, 60.29, 55.0, 5.00, 3.00]. 
```

我读到 BeautifulSoup 可能会有所帮助，所以我尝试了：

```
 from bs4 import BeautifulSoup

 def removeTags(html, *tags):
     soup = BeautifulSoup(html)
     for tag in tags:
         for tag in soup.findAll(tag):
             tag.replaceWith("")
     return soup

 testhtml = open('myfile.html', 'r')

 print removeTags(testhtml, 'tr', 'td') 
```

但这似乎删除了表格中的所有信息，而不仅仅是 HTML 标记。我也尝试了其他几件事，但我似乎被卡住了。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:56:18.953

这有点草率，但可以解决问题。

```
with open('htmlfile.html','r') as file:
  rows = []
  for line in file:
    start = max(line.find('FORWARD'),line.find('REVERSE'))
    rows.append(line[start:].replace('<','').replace('>','').replace('/','').replace('td',' ').replace('tr',' ').strip().split('  '))
print(rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:50:37.153

尝试这样的事情：

```
soup = BeautifulSoup(html)
table = soup.find('table')
rows = table.findAll('tr')
for row in rows:
    print [col.string for col in row.findAll('td')] 
```

编辑：如果你想取回数字，你可以打电话`float`，`col.string`但这会给你一个错误`'FORWARD'`，等等，标签。但是，这应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:58:15.493

给定您的示例数据，您可以使用以下代码将第一行作为列表：

```
>>> list(soup.find('tr').strings)
[u'1', u'FORWARD', u'72', u'20', u'60.29', u'55.00', u'5.00', u'3.00'] 
```

# python - 使用 Python 访问视频数据

> ID：14969670
> 
> 赞同：1
> 
> 时间：2013-02-19T23:37:12.770
> 
> 标签：python, python-imaging-library, ethernet

**问题**

如何获取流式帧的小样本，并使用 Python 操作它们？是否有任何可用的库可供使用，还是我必须单独编写整个项目的代码？

**技术规格**

操作系统：Linux

连接：CAT-5 以太网

相机：[dlink DCS-930L](http://mydlink.dlink.com/products/DCS-930L)

**介绍**

我最近问了一个[问题](https://stackoverflow.com/questions/14966997/ethernet-packet-processing-with-python)，但由于清晰度问题，它被关闭了。

我正在重新发布更多细节，如果仍然不清楚，请随时编辑或添加评论。

**背景**

我有一个 dlink DCS-930L 相机，它通过直接[cat5](http://en.wikipedia.org/wiki/Category_5_cable)连接直接连接到我的 Linux 计算机。我将它分配给一个静态 IP 地址，一切正常。

当我打开一个网络浏览器并连接到这个静态 IP 地址（例如登录到 192.168.0.20）时，相机就可以实时正常工作。

我这样做是为了验证我的相机是否正常工作，并且我能够正确建立以太网连接。

现在，我需要对通过以太网从相机接收到的视频帧进行一些图像处理。

我不想再使用网络浏览器作为显示方式，而是想使用 Python 来读取帧。

换句话说，假设相机每秒产生 30 帧，并且每一帧都有一定的尺寸（例如 1920x1080 像素）。

我想做的就是开始用 Python 读取这些帧。我不介意我是否丢失了帧并且我处理它的速度很慢。即使我能够在几秒钟内处理一帧，我仍然可以接受。

由于视频是图像的集合（在这种情况下每秒 30 张图像），我希望能够使用 Python 读取这些图像，然后能够对这些图像进行我需要做的任何处理。

如果我将这些图像保存在计算机上，我会用 Python 打开这些图像，然后开始操作它们。但是，由于在这种情况下，图像实际上是流式传输的，我只想知道如何对它们进行采样（可能每隔几秒采样一次），并使用 Python 进行一些操作？

如果我的问题仍然不清楚，请告诉我，我会尽可能地澄清它。

谢谢，--鲁迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:10:15.507

根据[手册](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=ftp%3A%2F%2Fftp.dlink.se%2FProducts%2Fdcs-products%2Fdcs-930l%2Fdocumentation%2FDCS-930L_A1_Manual_v1.00(W).pdf&ei=tBwkUengHITl0QHL4oGoBg&usg=AFQjCNHMShOHdxhZ25KC9alo7agsC5C0AA)，摄像头通过java小程序提供视频，因此如果不了解该服务器协议，将很难通过python访问。

但是，它确实可以选择将图像推送到 ftp 服务器（第 34 页），因此如果您在 linux 机器上安装 vsftpd，您可以告诉相机以可能高达 4 fps 的速度将图像推送到那里。[这里](http://www.cyberciti.biz/faq/ubuntu-vsftpd-ftp-service-server/)有关于在 ubuntu 上设置 vsftpd 的说明，其他版本的 linux 将类似（我似乎记得 fedora 需要的设置稍微少一点，但那是几年前的事了）。

您将需要`write_enable=YES`使用`/etc/vsftpd.conf`. 有多种方法可以处理上传，最简单的一种是使用您的用户帐户登录，然后它将图像转储到您的主目录（或您在相机配置中指定的路径）中。

然后您应该能够正常打开图像，即使用 PIL。

如果您不想设置文件服务器，可以尝试直接使用 urllib2 抓取数据，请参阅[此](https://stackoverflow.com/questions/1045886/https-log-in-with-urllib2)页面了解如何处理登录。有一些机会通过获取数据来获取数据，您将能够提取视频流，但我认为 ftp 选项会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T01:49:30.590

我不熟悉 dlink DCS-30 的具体工作原理，但我有一个较早的型号，即 dlink DCS-20，并且有相同的目标，所以也许你可以利用我的 DCS-20 解决方案，或者它的一部分, 为 DCS-30 解决相同的问题。

关键只是解析内置 Web 浏览器访问提供的 HTML。

外部模块请求、PIL 和 BeautifulSoup 简化了解决方案。

假设您的摄像头 IP 是 192.168.0.20，并且您已经通过 webadmin 设置了一个用户登录到 user1/pw1 的摄像头，这里是解决方案的关键：

```
from StringIO import StringIO

import requests
from PIL import Image
from bs4 import BeautifulSoup

DCS_IP = "192.168.0.20"
userauth = ('user1', 'pw1')

snapurl = "http://" + DCS_IP + "/top.htm"

r = requests.get(snapurl, auth=userauth)
soup = BeautifulSoup(r.content)

# There are several <img> tags in page, so use border=0 attribute of 
# objective <img> to distinguish it
imgtag = soup.find_all("img", attrs={'border':0})
imgsrc = BeautifulSoup(str(imgtag[0])).img['src']
imgurl = "http://" + DCS_IP + "/" + imgsrc

img = requests.get(imgurl, auth=userauth)
i = Image.open(StringIO(img.content))
i.save("snapshot.png") 
```

检索到图像 (i) 后，您可以使用 PIL 进行进一步操作，或者之后使用 ffmpeg 将生成的图像集拼接成延时视频。

高温高压

# enterprise-architect - 一个过程的多个来源

> ID：14969673
> 
> 赞同：1
> 
> 时间：2013-02-19T23:37:22.383
> 
> 标签：enterprise-architect, sequence-diagram

我在 Enterprise Architect 中有一个序列图。

它是一个可以由两个来源之一启动的过程：计时器过程或手动过程（用户在 GUI 屏幕上点击按钮）。

请问如何在图表上显示这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:26:13.187

序列图不允许您显示同一操作的两个替代调用。您可以在活动图中使用两个不同的接收事件导致相同的活动来实现这一点，但在序列图中，您不能将两条消息绘制到相同的序列中。

您可以做的是从一个序列中调用其他序列。

为此，您首先绘制流程的顺序，而不是显示它是如何启动或由谁发起的，而只显示流程中发生的事情。

然后，您为两种不同的情况绘制两个单独的序列图，并将第一个序列图拖放到每个序列图中，并将其作为“交互发生”放置。

最后，您将来自参与者的消息绘制到交互发生。可以在图表中双击该事件，这将打开描述该过程的序列图。

![在此处输入图像描述](../Images/d6472c845d7fd01c554b6308b45cb75d.png)

当然，一个相关的问题是，在序列图中没有显示自发事件（超时）的标准方法，因为它们关注调用者和被调用者之间的交互（通常是级联的）。处理这个问题的最简单方法是创建一个演员“时钟”或类似的，并让它启动这个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:33:34.030

您可能想要引入一个对计时器进程和手动调用通用的接口（或超类），并将其设置为用户，因为调用（我假设）无论如何都可能调用相同的基本方法。

如果他们的行为完全不同，我会按照 Uffe 的建议创建 2 个图表。

一些工具还允许在序列图中使用片段（[请参阅企业架构师的相应帮助文本](http://www.sparxsystems.com.au/resources/uml2_tutorial/uml2_sequencediagram.html)）。然后你可以使用例如“alt”片段。但是请注意给定链接中的建议：“序列图不适用于显示复杂的程序逻辑”。

# android - TextView 的 Android 辅助功能

> ID：14969680
> 
> 赞同：1
> 
> 时间：2013-02-19T23:37:43.990
> 
> 标签：android, android-a11y

嗨，我有一个带有 TextView 和线性布局的视图。线性布局是一种带有多个按钮的自定义键盘。因此，每次单击按钮我都必须进行一些验证并将一个字符附加到 TextView。

单击每个按钮，我将字符附加到文本视图。现在，当我打开辅助功能时，预计会读出输入的最后一个字符。但是每次我在文本视图中设置文本时会发生什么..辅助功能会读出文本视图中的第一个字符，而不是最后一个字符..所以我对如何控制文本视图的可访问性感到困惑..谁能告诉我如何控制可访问性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:03:14.603

您可以使用 TextView 上的 setContentDescription() 将其设置为您刚刚输入的字符。然后，当可访问性启动时，它会向您的 TextView 询问其内容描述，它应该可以工作。请参阅此处的文档：

[https://developer.android.com/reference/android/view/View.html#setContentDescription(java.lang.CharSequence)](https://developer.android.com/reference/android/view/View.html#setContentDescription(java.lang.CharSequence))

# jquery - jQuery代码不改变CSS

> ID：14969684
> 
> 赞同：1
> 
> 时间：2013-02-19T23:37:53.877
> 
> 标签：jquery, css, jquery-ui, jquery-animate, slider

我有以下代码片段：

[http://jsfiddle.net/Wcexy/](http://jsfiddle.net/Wcexy/)

内容如下：

HTML：

`<div id="secrets-slider"></div>`

CSS：

```
#secrets-slider {
    position: relative;
    left: 50%;
    top:50px;
    height: 200px;
}

.ui-state-default, .ui-widget-content .ui-state-default {
    background: red;
} 
```

Javascript：

```
var flash = 1;

$(function () {
    $("#secrets-slider").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 70,
        animate: 3000,
        slide: function (event, ui) {
            $("#amount").val(ui.value);
            flash=0;        
        },
    });
    function flashing() {
        if (flash === 0) {
            $("#secrets-slider a").stop(true, true);
        } else {
            $("#secrets-slider a").animate(
                {
                    backgroundColor: '#ff8c00'
                }, 1000,
                function() {
                    $("#secrets-slider a").animate(
                        {
                            backgroundColor: '#f00'
                        }, 1000
                    )
                }                                         
            )
            setTimeout(flashing,2000);
        }
    }
    flashing();
}); 
```

现在我将这段代码实现到我想为朋友制作的网站中。可在此处获得：http: [//blah.eu5.org/](http://blah.eu5.org/)

当我添加此代码时，它似乎不起作用。值得注意的是，jquery 滑块句柄根本没有脉冲。我已经检查过该事件是否正在触发`alert("Moo");`并且确实如此，但它似乎并没有改变 CSS。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:46:54.107

经过很多头痛后，我发现`.animate()`在后台使用实际上是 JQuery UI 插件的一部分，我使用的是 UI 插件的最小化版本，它不包含此代码（几乎有滑块，那是它）。

让这成为我的一个教训。

# java - 如何隐藏检票面板？

> ID：14969688
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:38:06.407
> 
> 标签：java, wicket, panel

所以我必须编辑同事的代码，但我似乎无法弄清楚如何调整它，以便在没有数据存在时隐藏面板。当前，当没有数据存在时，它返回 null。如果有客户可用的信息，它会显示他们的完整信息。如果没有，我想让面板隐藏。这也是整个站点使用的可重复使用的面板。我需要调整什么才能使这项工作？

```
@Override
protected void onInitialize()
{
    // TODO Auto-generated method stub
    super.onInitialize();        

    if(customer != null)
    {
        loadWithCustomer();
    }
    else
    {
        loadWithNoCustomer();
    }

}

@Override
protected void onBeforeRender() 
{
    super.onBeforeRender();

    AjaxLink<Void> createOrderLink = makeCreateOrderLink(customer);

    SkinnyBuSession session = (SkinnyBuSession) Session.get();      
    if(session != null && session.getCustomer() == null)
        createOrderLink.setEnabled(false);

    addOrReplace(createOrderLink);
}

private void loadWithCustomer()
{
    addOrReplace(new Label("heading",  customer.getAccountName()));

    Contact contact = null;
    if( customer.getContacts() != null && customer.getContacts().size() > 0)
    {
        contact = customer.getContacts().get(0);
    }
    else
    {
        contact = new Contact();//makeUpJunkContactForNow();
        customer.getContacts().add(contact);
    }
    Address address = null;
    if( customer.getAddresses() != null && customer.getAddresses().size() > 0)
    {
        address = customer.getAddresses().get(0);
    }
    else
    {
        address = new Address();//makeUpJunkAddressForNow();
        customer.getAddresses().add(address);
    }

    String phone = contact.getPhoneNumber() != null ? contact.getPhoneNumber().getNationalNumber() : "";
    if (phone != null && phone.length() == 10)
    {
        phone = String.format("(%s) %s-%s", phone.substring(0, 3), phone.substring(3, 6),phone.substring(6, 10));
    }       

    addOrReplace(new Label("accountName", customer.getAccountName()));
    addOrReplace(new Label("address1", address.getAddressLine1()));
    addOrReplace(new Label("address2", address.getAddressLine2()));
    addOrReplace(new Label("city", address.getCityName() + ","));
    addOrReplace(new Label("state", address.getStateCode()));
    addOrReplace(new Label("postalCode", address.getPostalCode()));
    addOrReplace(new Label("contactName", contact.getName()));
    addOrReplace(new Label("email", contact.getEmailAddress()));
    addOrReplace(new Label("phone", phone));        

}

private void loadWithNoCustomer()
{
    Label heading = new Label("heading", "");
    addOrReplace(heading.setVisible(false));

    addOrReplace(new Label("accountName", "").setVisible(false));
    addOrReplace(new Label("address1", "").setVisible(false));
    addOrReplace(new Label("address2", "").setVisible(false));
    addOrReplace(new Label("city", "").setVisible(false));
    addOrReplace(new Label("state", "").setVisible(false));
    addOrReplace(new Label("postalCode", "").setVisible(false));
    addOrReplace(new Label("contactName", "").setVisible(false));
    addOrReplace(new Label("email", "").setVisible(false));
    addOrReplace(new Label("phone", "").setVisible(false));

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:19:52.330

覆盖 onConfigure ，您可能可以执行以下操作：

```
@Override
protected void onConfigure() {
     super.onConfigure();
     setVisible(customer != null);
} 
```

# paypal - 在 paypal express checkout NVP 中传递自定义参数

> ID：14969689
> 
> 赞同：1
> 
> 时间：2013-02-19T23:38:08.653
> 
> 标签：paypal, paypal-nvp

我正在尝试找到一种方法来使用 NVP 通过贝宝的快速结帐传递自定义参数。我尝试过使用已弃用的 PAYMENTREQUEST_n_CUSTOM、据称未弃用的 PAYMENTREQUEST_0_CUSTOM 和 CUSTOM 参数，但它们都不起作用。

我现在可以看到的唯一方法（我宁愿不使用）是：1.使用我不使用的其他参数之一（如运输）2.使用返回 url 并将参数添加到它一个 GET 参数 3\. 使用会话。

根据错误页面，我的版本是 92.0。其余参数为：

```
$nvpstr="&SHIPPINGAMT=0&L_SHIPPINGOPTIONNAME0=test&L_SHIPPINGOPTIONAMOUNT0=0&REQCONFIRMSHIPPING=0&NOSHIPPING=1&L_SHIPPINGOPTIONISDEFAULT0=true&ADDRESSOVERRIDE=1$shiptoAddress&".
               "&ALLOWNOTE=0&CUSTOM=".$CUSTOM.
               "&L_NAME0=".$L_NAME0."&L_AMT0=".$L_AMT0."&L_QTY0=".$L_QTY0.
               "&MAXAMT=".(string)$maxamt."&AMT=".(string)$amt."&ITEMAMT=".(string)$itemamt.
               "&CALLBACKTIMEOUT=4&CALLBACK=https://www.ppcallback.com/callback.pl&ReturnUrl=".$returnURL."&CANCELURL=".$cancelURL .
               "&CURRENCYCODE=".$currencyCodeType."&PAYMENTREQUEST_0_PAYMENTACTION=".$paymentType; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T18:17:54.407

1.  不要混合`PAYMENTREQUEST_0_*`变量和它们已弃用的对应物——使用其中一个。（例如，不要在同一个 API 调用中使用 and ——要么使用`PAYMENTREQUEST_0_PAYMENTACTION`and ，要么使用and 。）`AMT``PAYMENTREQUEST_0_PAYMENTACTION``PAYMENTREQUEST_0_AMT``PAYMENTACTION``AMT`
2.  这似乎是 SetExpressCheckout 调用。您可以在此处传递一个`CUSTOM`值，但如果您这样做，它将显示的唯一位置是对您的 GetExpressCheckoutDetails 调用的响应。您需要`CUSTOM`在 DoExpressCheckoutPayment 调用中提供该值，以便将其记录到您的帐户中。

# android - Android复杂项目组织

> ID：14969691
> 
> 赞同：3
> 
> 时间：2013-02-19T23:38:26.797
> 
> 标签：android, architecture, project, game-engine

我正在考虑尝试为游戏构建一个复杂的 android 应用程序结构，或者只是出于练习的原因。我曾经在objective-c中编码，所以我在android方面没有那么多经验......

无论如何，在工作中，我们在 ios 上构建我们的应用程序，如下所示：

-核心框架：处理所有核心项目、导航、数据处理、机制等。在我们所有的项目中都是一样的

-project 框架：它的文件主要依赖（包括）核心框架的文件，扩展/修改它们，并根据项目做一些事情

-skin framework：这包含所有的资源和图像，如果我们想做一个重新皮肤的项目，我们只需要改变这个

-主项目：这包括将所有内容组合成一个应用程序的所有内容。只是启动应用程序，仅此而已，其他任何事情都由不同的框架完成

所以我想在android上做一个类似的结构，但我不确定我是否能做到……我看到有android项目和库项目，我可以将它们包含到彼此中……但是我的问题是：

1：我可以在ios上构建一个类似的结构吗？

2：我可以制作一个包含机制基础的“核心”库，另一个只包含资源的库，以及第三个（或者第三个可能是实际可运行的项目），什么可以从资源中获取资源库，可以将作业分发到核心库等...

3：我可以随意组织资源吗（例如不要将每张图片都扔到drawable文件夹根目录中）。例如，以某种方式有一个字符文件夹（我知道我不能在 res 文件夹中做 forlders），并将文件映射到 map 文件夹等......我唯一的机会将它们命名为“正确”？(map_sheet_type_1, map_sheet_type_2, character_sheet_type_1, etc)

或者我应该在一个项目中完成所有事情，将所有内容分成很多包，并仅将库用于“如何将“A”对象转码为“B”对象”之类的工作？

感谢您提前回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:18:54.673

虽然我以前从未开发过游戏，但一个应用程序就是一个应用程序：

1.  是的
2.  正如您提到的那样，您有可执行项目和库项目，库可以使用其他库，并且唯一进入设备的是可执行项目正在构建的任何内容。重要的是要注意编译的库`*.jar files`资源不能在您的可执行项目中使用（这就是为什么必须将[ActionBar Sherlock](http://actionbarsherlock.com/)用作库项目的原因）。为了使用放置在库项目中的资源，该项目的完整源代码必须在 Eclipse 中打开，以便可以一起编译。这是因为在一个应用程序内部，只有一个 R（资源）对象，并且在构建过程中，来自所有项目的所有资源都放在一起。
3.  抱歉不行。正如您自己提到的，资源不能位于子文件夹中，甚至它们的文件名也受到限制，因为它们只能使用小写字母、数字和`_`（下划线）。只要聪明和有条理，写一个规范或其他东西。
4.  packages 是用 Java 组织单个项目的方式。如果您要使用多个或单个是您的选择。通常，您可以将可以在不同项目中轻松重用的库项目封装在一个项目中，最终项目将包含特定于该应用程序/游戏的所有内容。我会给你一个关于我工作的地方的例子，我们有一个 KicthenLibrary，它是一个库项目，我们在我们所做的每一个 Android 应用程序中都使用它。该库已经包含一个出色的多线程位图下载和缓存类，在 Google 发布他们的 MapFragment 之前，我们曾经有一个 MapFragment（现已弃用）、简单的 Http GET/POST 方法等。如您所见，所有这些都是东西可以很容易地在几个不同的项目中重复使用。

最后一个技巧，[http://www.eclipse.org/egit/](http://www.eclipse.org/egit/)恕我直言，直接从 Eclipse 内部使用 GIT 要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:21:07.287

这里有几个链接可以帮助您开始。

[http://kasperholtze.com/android/how-to-best-organize-your-android-source/](http://kasperholtze.com/android/how-to-best-organize-your-android-source/)

[http://bartinger.at/organization-tips-for-android-projects/](http://bartinger.at/organization-tips-for-android-projects/)

此外，当我在一家初创公司工作时，我们为 iOS 和 Android 制作了一个应用程序。我们开始为每个应用程序创建原生应用程序，最终得到了一些不同的结构。全局信息/变量的处理方式不同，我无法像 iOS 那样构建我的文件。也就是说，Android 结构并不难弄清楚，我在资产文件夹中创建了相当多的子文件夹（用于库和 js 等）。是的，您绝对可以拥有多个库。

至于在一个应用程序中拥有多个项目，请参阅此链接[如何从多个 Android 项目创建单个应用程序](https://stackoverflow.com/questions/6605772/how-to-create-a-single-application-from-multiple-android-projects)

# javascript - 是否可以从 javascript 管理 webviews 转换？

> ID：14969695
> 
> 赞同：0
> 
> 时间：2013-02-19T23:38:57.797
> 
> 标签：javascript, objective-c, cordova, titanium, trigger.io

主要概念是 webview 中的 Javascript*可以*控制另一个 webview 之间的转换/动画。

例如：用户单击链接，Native 容器使用新页面转换到 Webview（如 JQuery Mobile，但转换是 NATIVE）。

快速提醒：

*   Phonegap：一个 web 视图和一个用于存储/地理定位/ecc 的 API。没有动画。
*   Titanium：您使用 javascript 编写应用程序的本机组件。你有所有类型的动画......但是它太复杂了......
*   Trigger.io：与 Titanium 相同（？）

我想知道是否有一些项目公开了一些方法，这些方法允许通过 webview 中的 javascript 一次管理更多 webviews（及其转换）。

# mysql - 在更新多租户数据库中的嵌套集时，是否有锁定表的替代方法？

> ID：14969696
> 
> 赞同：1
> 
> 时间：2013-02-19T23:39:11.877
> 
> 标签：mysql, database-design

我正在使用单个数据库开发多租户应用程序。一些东西（类别）将允许嵌套，在检查嵌套集方法之前，我已经开始考虑父子关系。

我对嵌套集的主要关注是（显然）在从树中添加或删除项目时需要锁定表。在多租户场景中，一个用户的类别修改将对系统上的所有其他用户产生严重的性能影响。

是否有其他方法可以确保不访问受影响的行？所有行都将由一个共同的tenant_id 标识。

提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:28:14.457

如果您正在修改一行，该行将被锁定 - 没有办法绕过它。但我的猜测是，您的意思是在修改某些行时防止锁定整个表。为了防止这种情况，请使用 InnoDB 引擎而不是 MyIsam。当对任何行进行更改时，MyIsam 会锁定整个表，而 InnoDB 不会。

请参阅：“为了实现非常高的锁定速度，MySQL 对除 InnoDB、BDB 和 NDBCLUSTER 之外的所有存储引擎使用表锁定（而不是页、行或列锁定）。” [http://dev.mysql.com/doc/refman/5.0/en/table-locking.html](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)

# asp.net - 使用 flex 将本地和 Internet 的 URL 重定向到 asp.net 中的 Web 服务

> ID：14969698
> 
> 赞同：0
> 
> 时间：2013-02-19T23:39:26.403
> 
> 标签：asp.net, apache-flex, proxy, url-redirection

请问我该怎么做？

flex swf 文件使用以下操作脚本访问 db 服务器，同时嵌入在 asp.net Web 应用程序 (3.5) 中。Db 服务器和 Asp.Net 应用程序都在同一个 Web 服务器上......即..（1）机器，（1）域......

```
<mx:WebService id="WsChartBTS"
        wsdl="https://domain.net/WService.asmx?WSDL"
        showBusyCursor="true"
        fault="WsFaultChart(event)">
        <mx:operation name="GetWService"
            result="Result(event)"
            fault="WSEvent(event)">
            <mx:request>
                <Ticker>{Tick}</Ticker>
                <Range>{Rng}</Range>
            </mx:request>
        </mx:operation>
</mx:WebService> 
```

问题：当我从生产（网络）移动到测试（本地主机）时，我必须更改上面 Flex Actionscript 中的 URL 才能显示测试数据......（这太疯狂了！！）......

然后我必须重新编译...

问题：如何创建一个简单的 URL 重定向来使用：

localhost/WService.asmx?WSDL 或

[http://webdomain.net/WServices.asmx?WSDL](http://webdomain.net/WServices.asmx?WSDL)

取决于 Web 服务器的部署位置...？

这是一个简单的代理服务器或某种 URL 重定向，但我不知道如何创建它。我可以用 C# 编写代码，也可以使用中级级别的 Actionscript 编写代码。

任何详细解释中的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:46:49.720

假设您的本地开发环境在目录结构上与生产环境相同，请使用相对 URL，如下所示：

```
<mx:WebService id="WsChartBTS"
        wsdl="/WService.asmx?WSDL"
        showBusyCursor="true"
        fault="WsFaultChart(event)">
        <mx:operation name="GetWService"
            result="Result(event)"
            fault="WSEvent(event)">
            <mx:request>
                <Ticker>{Tick}</Ticker>
                <Range>{Rng}</Range>
            </mx:request>
        </mx:operation>
</mx:WebService> 
```

您还可以将服务 URL 移动到您在运行时加载的外部配置文件中，然后使用这些值在您的 WebService 组件上设置 wsdl 值。

# php - Yii Bootstrap 不工作，网格很大，下拉菜单不掉，切换失败

> ID：14969704
> 
> 赞同：0
> 
> 时间：2013-02-19T23:39:40.883
> 
> 标签：php, css, twitter-bootstrap, yii

该页面具有引导皮肤，但我不确定为什么某些操作（例如在下拉导航栏上显示列表、按钮上的加载选项也不起作用、网格很大等）。

```
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap');

return array(
    'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
    'name'=>'name project', 

    // preloading 'log' component
    'theme'=>'bootstrap',
    'preload'=>array('log', 'bootstrap'),

    // autoloading model and component classes
    'import'=>array(  
        'application.models.*', 
        'application.components.*',
        'ext.bootstrap-theme.widgets.*',
        'ext.bootstrap-theme.helpers.*',
        'ext.bootstrap-theme.behaviors.*',
    ),

    'language'=>'es',

    'modules'=>array(
        // uncomment the following to enable the Gii tool

        'gii'=>array(
            'class'=>'system.gii.GiiModule',
            'password'=>'swjskowk',
            'ipFilters'=>array('127.0.0.1','::1'),
            'generatorPaths'=>array(
                'ext.bootstrap-theme.gii',
                'bootstrap.gii',
            ),
        ),

    ),

    // application components
    'components'=>array(
        'bootstrap'=>array(
            'class'=>'ext.bootstrap.components.Bootstrap',
        ),
        'user'=>array(
            // enable cookie-based authentication
            'allowAutoLogin'=>true,
        ),
        // uncomment the following to enable URLs in path-format

        'urlManager'=>array(
            'urlFormat'=>'path',
            'rules'=>array(
                '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
                'gii'=>'gii',
                'gii/<controller:\w+>'=>'gii/<controller>',
                'gii/<controller:\w+>/<action:\w+>'=>'gii/<controller>/<action>',
            ),
        ),?> 
```

我有一个文件夹名称 bootstrap 主题，一个 bootstrap 扩展名和 bootstrap-theme 扩展名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:00:55.430

修复组件部分

`'bootstrap'=>array( 'class'=>'ext.bootstrap.components.Bootstrap', ),`

我认为应该是

`bootstrap'=>array( 'class'=>'bootstrap.components.Bootstrap', ),`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T13:03:20.403

可能是您没有加载需要 boostrap 的 javascript，以便能够在导航栏中显示下拉列表等。

# c++ - 为什么我会得到一个奇怪的答案？

> ID：14969709
> 
> 赞同：0
> 
> 时间：2013-02-19T23:40:08.353
> 
> 标签：c++, class, object, constructor, floating-point

所以我正在研究基本的类构造函数。问题是，当我使用点运算符查找我的 Horse 对象的速度时得到的答案毫无意义，我想知道出了什么问题以及如何纠正它？

```
class Horse{
      public:
      string sName;
      double dDist;
      double dTime;

      //constructor
      Horse(string sHorseName, double dDistance, double dSecs){
      sName = sHorseName;
      dDist = dDistance;
      dSecs = dTime;
      }

      double dSpeed(){
             return (dDist/dTime);
      }

      };

     int main(){
        Horse Horse1("frankel", 11.40, 122);
        cout << Horse1.dSpeed() << " m/s. " << endl;
        cout << Horse1.sName << endl;
        return 0;
        } 
```

程序给出的答案是 5.95461e+306，这显然是错误的。为什么我会得到这个答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:41:25.433

您遇到未定义的行为，`dSecs = dTime;`因为`dTime`从未初始化。在那之后，所有的赌注都被取消了。

你可能会精神错乱`dTime = dSecs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:50:05.123

正如其他人所提到的，您的构造函数中有错误。如果您使用构造函数初始化列表（这是推荐的方法）来实现它，那么您将产生编译器错误。

```
Horse(string sHorseName, double dDistance, double dSecs) : sName(sHorseName), sDist(sDistance), dTime(dSecs) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:44:07.193

在您的构造函数中，反转以下行：

```
dSecs = dTime; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:43:38.790

您正在分配`dTime`何时`dSecs`需要相反，并且您的构造函数以与传递给它的顺序不同的顺序获取`dDistance`和参数（假设马在 11.40 秒内行驶了 122 米，而不是在 122 秒内行驶了 11.40 米`dSecs`秒）。

# python - GAE - 使用 urlfetch 从 BlobStore 将图像发布到外部服务器

> ID：14969711
> 
> 赞同：1
> 
> 时间：2013-02-19T23:40:20.950
> 
> 标签：python, google-app-engine, urlfetch

我有一个应用程序（`Google AppEngine`用`Python``images.get_serving_url( blob_key )`

我正在尝试弄清楚如何将`urlfetch`这些`POST`图像之一用于第三方站点（实际上是 Flickr；我知道我必须对请求进行身份验证，我已经弄清楚了）。

我对 GAE 还很陌生，我正在尽我所能学习 blobstore。

有没有人知道如何从 blobstore 中获取图像二进制数据（提供 the`get_serving_url`或 blob 密钥），然后`POST`在`urlfetch`请求中对其进行处理？

我整个下午都在谷歌上搜索，但找不到任何合适的例子。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:13:01.293

您可以使用 blob 阅读器获取整个 blob/图像：

```
blob_reader = blobstore.BlobReader(blob_key) 
```

# c# - 在 catch 中自定义 Sql Exception 消息

> ID：14969713
> 
> 赞同：0
> 
> 时间：2013-02-19T23:40:38.660
> 
> 标签：c#, winforms, entity-framework-4, try-catch, sqlexception

我正在做一个用户可以插入/删除/添加实体的表单。我正在使用 Winforms c# 和实体框架 4。

好的，用户可以删除对象了。现在，这些对象可以被其他实体引用，所以如果用户想删除它，他会得到一个异常。

我捕捉到该异常，以便向他显示一条消息，说明该对象已开始在其他对象中使用。

我得到的例外是（UpdateException）。但是，如果也存在更新问题，也会引发此异常。有没有办法使用这个异常从 Sql 获取错误代码？因为我确实有发生这种情况时抛出的错误代码。

如果我使用 SqlException，我可以检查它的编号，但这不是我收到的异常。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-20T01:08:00.527

您的意思是*要*查看完整的异常还是希望*用户*查看异常？

如果要查看异常，可以将其写入文本文件：

```
try
{
    // do something
}
catch(SQLException sqlex)
{
    using (var file = new StreamWriter(@"C:\Users\Home\Desktop\sqlException.txt"))
    {
        file.WriteLine(sqlex.ToString());
    }
}
catch(Exception e)
{
    using (var file = new StreamWriter(@"C:\Users\Home\Desktop\generalException.txt"))
    {
        file.WriteLine(e.ToString());
    }
} 
```

这会将异常写入桌面上的文本文件（根据需要更改目录）。

# jquery - 同时加载内容和背景图片

> ID：14969714
> 
> 赞同：0
> 
> 时间：2013-02-19T23:40:40.947
> 
> 标签：jquery, ajax, loader

我正在使用 Ajax 加载外部 HTML，但是这个外部 html 有一个大的背景图像，在背景图像也加载之前如何显示加载器？

代码：

```
$( ".content" ).load("game.html", function() {
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:38:35.533

试试这个：[https](https://github.com/desandro/imagesloaded) ://github.com/desandro/imagesloaded ，一个用于检测图像何时加载的javascript代码

您的代码将类似于：

```
$( ".content" ).load("game.html", function() {
   $('.content').imagesLoaded(function () {
     remove loader
   });
}); 
```

# ruby-on-rails - 在 Ubuntu 上安装 Rails 无法加载 mkmf？

> ID：14969715
> 
> 赞同：2
> 
> 时间：2013-02-19T23:40:41.553
> 
> 标签：ruby-on-rails, ruby, ubuntu, installation

我正在尝试在 Ubuntu 上安装 Rails：

```
sudo gem install rails 
```

但我遇到了麻烦：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
  ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
  from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
  from extconf.rb:1:in `<main>'

Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/json-1.7.7 for inspection.
Results logged to /usr/lib/ruby/gems/1.9.1/gems/json-1.7.7/ext/json/ext/generator/gem_make.out 
```

问题是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T23:44:29.117

正如丹尼尔在评论中所说，尝试执行`sudo apt-get install ruby-dev`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:28:40.593

试试看，我已经在Ubuntu 12.4上安装成功了（安装时可以选择版本，根据你的要求....）

1.  sudo apt-get 更新
2.  sudo apt-get install build-essential git-core curl libmysqlclient18 nodejs

3.  sudo bash -s stable < <(curl -s [https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) ) umask g+w

4.  源 /etc/profile.d/rvm.sh

5.  sudo apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison颠覆

6.  sudo chown -R [user]:[user] /usr/local/rvm 示例：sudo chown -R rohitporwal:rohitporwal /usr/local/rvm

7.  源 /usr/local/rvm/scripts/rvm

8.  rvm 安装 1.9.2

9.  须藤宝石安装导轨

# jquery - 用jquery获取td的唯一数据

> ID：14969734
> 
> 赞同：0
> 
> 时间：2013-02-19T23:42:15.483
> 
> 标签：jquery, html

我需要获取所选 td 项目的数据。在这种情况下，假设我想要每行中第二`<td>`项的数据。我尝试了一个简单的 Jquery 来获取 HTML，但它会得到相同的数据（即来自 first `<tr>`-> second`<td>`的数据。我如何从第二行和连续行获取数据。

## 编辑

我想在单击相应链接时获取数据（td 的文本）。

```
<table>
<tr>
  <td>1</td>
  <td class="name">First</td>
  <td>something else</td>
  <td><a class="link">Order</a></td>

</tr>
<tr>
  <td>2</td>
  <td class="name">second</td>
  <td>something else</td>
  <a class="link">Order</a>

</tr>
</table> 
```

我使用的函数只会从第一个 td 中获取该类的数据。我想我需要使用类似的东西`parent()`。但我对Jquery知之甚少。

```
var itemName = $('td.itemname').html(); 
```

或者

```
var itemName = $('.itemname').html(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:49:06.527

```
var tdValues = [];
$(".name").each(function () {
    tdValues.push($(this).text());
}); 
```

`td`现在您在变量中拥有了一个包含每个文本内容的数组`tdValues`。

如果你*只*想要第二行：

```
var tdValue = $("tr:eq(1) .name").text(); 
```

如果你想要第二行，

```
$("tr:gt(0) .name").each(...) 
```

编辑：

```
$(".link").on('click', function () {
    var text = $(this).closest('tr').find('.name').text();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:54:41.373

假设您希望它在单击链接时起作用，则：

```
$(function(){
  $("a.link").click(function() {
    var secondTd = $(this).parents("tr").find("td.name").first();
    alert(secondTd.html());
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:52:21.957

像这样使用`nth`函数：

```
$('table tr td:nth-child(2)').text(); 
```

这将为您提供所有第二列的文本。该`nth`函数不是从零开始的。

# ruby - 在模块中使用 FactoryGirl 时未初始化的常量 (NameError)

> ID：14969735
> 
> 赞同：4
> 
> 时间：2013-02-19T23:42:15.837
> 
> 标签：ruby, activerecord, factory-bot

这是我尝试使用 RSpec 运行测试时遇到的错误：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/infl
ector/methods.rb:230:in `block in constantize': uninitialized constant User (Nam
eError) 
```

我正在尝试使用 RSpec 但没有 Rails 运行 FactoryGirl。以下是参与测试的文件：

**user_spec.rb**

```
require 'spec_helper'

module Bluereader
  describe User do
    describe 'login' do
      user = FactoryGirl.build(:user)
    end

    describe 'logout' do

    end

    describe 'create_account' do

    end

    describe 'delete_account' do

    end
  end
end 
```

**规格/规格助手**

```
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..'))
$LOAD_PATH.unshift(File.dirname(__FILE__))

require 'rspec'
require 'lib/bluereader'

require 'factory_girl'
FactoryGirl.find_definitions 
```

**规格/工厂.rb**

```
require 'digest/sha1'

FactoryGirl.define do
  sequence(:username) { |n| "user-#{n}" }

  factory :user do
    username
    encrypted_password Digest::SHA1.hexdigest('password')
    full_name 'John Doe'
    logged_in_at Time.now
    logged_out_at 0
  end
end 
```

此时我知道`factories.rb`文件正在加载（我尝试过使用白痴打印调试）。当我从**user_spec.rb**`user = FactoryGirl.build(:user)`中删除该行时，我没有收到任何错误（并且正常的 RSpec 反馈告诉我没有测试，但没有错误）。如果你有兴趣，这是我的模型：

 **需要“摘要/sha1”

```
module Bluereader
  class User < ActiveRecord::Base
    has_many :categories, :foreign_key => :user_id
    has_many :news, :foreign_key => :user_id
    has_many :settings, :foreign_key => :user_id

    attr_reader :full_name

    class << self
      def login(username, password)
        encrypted_password = Digest::SHA1.hexdigest(password)

        if not User.exists?(:username => username, :encrypted_password => encrypted_password)
          user_id = User.id_from_username(username)
          update(user_id, :logged_in_at => Time.now, :logged_out_at => 0)
        end
      end

      def logout
        update(current_user.id, :logged_out_at => Time.now)
      end

      def validate_account(username, password, full_name)
        if username.empty? or password.empty or full_name.empty?
          return 'Please fill in all the fields.'
        end

        if User.exists?(:username => username)
          return 'That username is already in use.'
        end

        unless username =~ /^\w+$/
          return 'Username field should contain only letters, numbers and underscores.'
        end

        ''
      end

      def create_account(username, password, full_name)
        encrypted_password = Digest::SHA1.hexdigest(password)
        User.create(:username => username,
                    :encrypted_password => encrypted_password,
                    :full_name => full_name,
                    :logged_in_at => Time.now,
                    :logged_out_at => 0)
      end

      def delete_account
        current_user.destroy
      end

      private
      def id_from_username(username)
        user = where(:username => username).first
        user.nil? ? 0 : user.id
      end

      def current_user
        where(:logged_out_at => 0).first
      end
    end
  end
end 
```

**解决方案**

问题是 User 类在一个模块中，这是解决方案：

`factory :user, class: Bluereader::User do`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:27:37.620

您需要在您的规范帮助文件中要求 rails 环境。将以下内容添加到 spec/spec_helper.rb：

```
require File.expand_path("../../config/environment", __FILE__) 
```

**更新**

即使你不使用 Rails，你仍然需要在你的规范助手中使用模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-07T14:49:24.393

*取自问题的底部*

问题是 User 类在一个模块中，这是解决方案：

```
factory :user, class: Bluereader::User do 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T12:18:54.840

对于像我这样笨拙的人，你可能`FactoryGirl`在你的代码中有你想要的地方`FactoryBot`**

# python - Python del 语句

> ID：14969739
> 
> 赞同：26
> 
> 时间：2013-02-19T23:42:45.437
> 
> 标签：python, garbage-collection, del

`del`在 Python 中调用变量。这会立即释放分配的内存还是仍在等待垃圾收集器收集？就像在 java 中一样，显式调用`del`对何时释放内存没有影响。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-19T23:47:38.423

del 语句不回收内存。它删除了一个引用，这会减少该值的引用计数。如果计数为零，则可以回收内存。CPython 会立即回收内存，无需等待垃圾收集器运行。

事实上，垃圾收集器只需要回收循环结构。

正如 Waleed Khan 在他的评论中所说，Python 内存管理可以正常工作，您不必担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T23:46:59.320

“删除名称会从本地或全局名称空间中删除该名称的绑定”。不多也不少。它对 name 指向的对象没有任何作用，除了减少其 refcount，如果 refcount 不为零，即使 GC 运行时也不会收集该对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-12T06:24:24.630

此外，**del 语句似乎比****分配 None**快一点（类似于 Java**将 null 分配**给变量以释放其内存的风格......）。

比较：

```
import time, math

def measure_del():
        start = time.time()
        for i in range(0,int(math.pow(10,8))):
                    a = "123"
                    del a # <--- !!!
        end = time.time()
        print(end-start)

def measure_none():
        start = time.time()
        for i in range(0,int(math.pow(10,8))):
                    a = "123"
                    a = None # <--- !!!
        end = time.time()
        print(end-start) 
```

结果（在idle3.4中运行）：

```
>>> measure_del()
3.9930295944213867
>>> measure_del()
3.7402305603027344
>>> measure_del()
3.8423104286193848
>>> measure_del()
3.753770351409912
>>> measure_del()
3.7772741317749023
>>> measure_del()
3.815058946609497

>>> measure_none()
4.052351236343384
>>> measure_none()
4.130320072174072
>>> measure_none()
4.082390069961548
>>> measure_none()
4.100180625915527
>>> measure_none()
4.071730375289917
>>> measure_none()
4.136169672012329 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-30T20:24:46.560

关于删除：有时您必须处理大型数据集，其中必须计算内存密集型操作并以递归方式将大量数据存储到变量中。为了节省 RAM，当您完成整个操作时，如果您不再在递归循环之外使用它，则应该删除该变量。你可以使用命令

del varname 后跟 Python 的垃圾收集器 gc.collect()

关于速度：在有监管要求的金融应用等应用中，速度是最重要的。您必须确保在预期的时间范围内完成操作速度。

# html - Html.BeginForm MVC3 内部的 Html.BeginForm

> ID：14969740
> 
> 赞同：2
> 
> 时间：2013-02-19T23:42:48.137
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, razor

我有一个呈现两个部分视图的主视图。主视图包含表单中的两个部分视图。每个部分视图还包含表单。所有 3 个视图共享相同的视图模型。我想要做的是用主视图封装来自所有视图的数据，并用部分视图运行特定的控制器操作结果。

我想知道这是否可能。调试时，我看到我的内容总是发布到主视图表单的 HTTPPost。我有相应的每个表单的提交按钮。对不起，代码发布，它的出现都分裂了。

主视图：

```
@using (Html.BeginForm("Main", "Registration", FormMethod.Post, 
    new { @class="mainform" }))
{
    <form>
        <fieldset>
            <div id ="option1" class="conglomerate">
                @Html.Partial("_GetBusiness")
            </div> 
            <div id ="option2" class="dealership">
                @Html.Partial("_GetLocation")
            </div>
            <button type="submit" value="Create" class="buttonBlue" id="">
                <span>Create a new dealer</span>
            </button>
         </fieldset>
    </form> 
```

部分 1

```
@using (Html.BeginForm("CreateBusiness", "Business", FormMethod.Post, 
        new { @class="buisinessform" }))
{
    <form>
        <div class="editor-field">
            @Html.DropDownListFor(m =>m.BusinessId, new SelectList(Model.Businesses, 
                "BusinessId", "BusinessName"), "")
        </div>
        <label>Your company not listed? Register yours below:</label>
        <div class="editor-label">
            @Html.LabelFor(model => model.BusinessName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.BusinessName)
            @Html.ValidationMessageFor(model => model.BusinessName)
        </div>
        <button type="Button" value="" class="buttonBlue"id="TestSubmit">
           <span>Add Dealer</span>
        </button>
        <div class ="confirm">
            <button type="submit" value="Create" class="buttonBlue" id="">
                <span>Click here to confirm dealer addition</span>
            </button>
        </div>
    </form>
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T00:34:31.947

正如 Dave 提到的，嵌套表单不是有效的 HTML。它不仅仅是 HTML5，而是任何版本的 HTML。

在某些情况下，它*可能*在某些浏览器中有效，但它永远无效。即使看起来确实有效，你也永远不能依赖会发生什么。您最好的做法是在一个页面上使用多个非嵌套表单。

你能解释一下为什么你认为你需要嵌套表格吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T23:48:31.810

不，您不能有嵌套表单。对不起。

请参阅[HTML5 指南](http://www.w3.org/TR/2011/WD-html5-20110525/forms.html#the-form-element)

**“流内容，但没有表单元素后代”**

# javascript - 将 .txt 文件读入数组 Javascript/jQuery

> ID：14969741
> 
> 赞同：3
> 
> 时间：2013-02-19T23:42:49.643
> 
> 标签：javascript, jquery

我正在尝试将文件（存储在 Web 服务器上）读入数组。当我打印数组时，我目前得到“未定义”。这是我使用的代码：

```
var cardRules = new Array;
    $.get('UserFile.txt', function(data){
            var array = data.split('\n');
            console.log(cardRules);
        }); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:49:09.603

'cardRules' 变量永远不会被数组数据填充。而不是 `var array = data.split('\n');` 仅仅使用 `cardRules = data.split('\n');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:46:12.020

```
var cardRules = new Array();
    $.get('UserFile.txt', function(data){
            cardRules = data.split('\n');
            console.log(cardRules);
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T05:36:40.950

尝试完整的 url，而不仅仅是相对链接

`http://yoursite.com/yourfilelocation/yourfile.txt`

`$.get('http://yoursite.com/yourfilelocation/yourfile.txt', function(data){ var cardRules = data.split('\n'); console.log(cardRules); });`

# c# - Asp.net mvc 控制器构造函数返回错误

> ID：14969744
> 
> 赞同：0
> 
> 时间：2013-02-19T23:43:07.590
> 
> 标签：c#, asp.net-mvc

此控制器的构造函数返回错误“} 预期”。Visual Studio 没有将其识别为构造函数。其他错误包括“方法必须有返回类型”。

这段代码有什么问题？

```
namespace blahblah.Controllers
{

    public class HomeController : Controller
    {  
        private IUserRepository userRepository;

        public HomeController()
        {     //} expected here
            public Model1Container db = new Model1Container();
            this.userRepository = new UserRepository(db);
        }

        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View();
        }

        public ActionResult About()
        {
             return View();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:49:59.220

您的构造函数应如下所示：

```
public HomeController()
{   
    Model1Container db = new Model1Container();
    this.userRepository = new UserRepository(db);
} 
```

删除`public`局部变量附近的单词`db`。局部变量不能访问访问修饰符，因为它们的范围仅限于声明它们的方法体。

从 C# 语言规范 4.0 开始：

> 局部变量声明指定类型名称、变量名称和可能的初始值。

# javascript - jquery隐藏和显示错误

> ID：14969746
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:43:14.477
> 
> 标签：javascript, jquery, html

我有一个有 3 个选择的表，其中两个是隐藏的，一个在开始时，根据选择出现一个或另一个，我使用 a。js调用操作来为表创建新行，还使用会计师将其添加到select的id中并避免相同的调用，问题是当我创建新行而不是更改请求时不会仅标记错误什么都不做这是我的代码

```
code html

 <script>    
    $(document).ready(function () {
        $("#estado").change(function () {
            if ($("#estado").val() == 2) {
                $("#sino").show();
                $("#sexo").hide();            
            }
            if ($("#estado").val() == 3) {
                $("#sino").hide();
                $("#sexo").show();
            }
    </script>
    <td>
    <select id="estado">
    <option value="1">Seleccione 1 opcion</option>
    <option value="2">Laboratorio</option>
    <option value="3">Datos Generales</option>
    </select>
    </td>
    //laboratorio
    <select name="sino" id="sino"style="display:none">
    <option value="1">Si </option>
    <option value="2">No</option>
    </select>
    datos generales
    <select name="sexo" id="sexo"  style="display:none">
    <option value="1">Masculino </option>
    <option value="2">Femenino</option>
    </select> 
```

代码.js

```
//manipulacion 
var cont=1
    $(document).ready(function () {
        $("#estado"+cont).change(function () {      
            if ($("#estado"+cont).val() == 2) {
                $("#sino"+cont).show();
                $("#sexo"+cont).hide();       
            }
            if ($("#estado"+cont).val() == 3) {
                $("#sino"+cont).hide();
                $("#sexo"+cont).show();
            } );
            var strNueva_Fila = '<tr>' +
'<td><label>Area Medica</label></td>' +
'<td><select id="estado' + cont +'"><option value="1">Seleccione 1 opcion</option><option value="2">Laboratorio</option><option value="3">Datos Generales</option><select></td>' +
'<td><select name="sino" id="sino'+cont'"style="display:none"><option value="1">Si </option><option value="2">No</option></select></td>' +
'<td id="columna1' + cont + '" ><select name="sexo'+cont'" id="sexo"  style="display:none"><option value="1">Masculino </option><option value="2">Femenino</option></select>'+
'<td><input type="button" value="+" class="clsAgregarFila"><input type="button" value="-" class="clsEliminarFila"></td>' +
'</tr>';
        cont++;
        var objTabla = $(this).parents().get(3);     
        $(objTabla).find('tbody').append(strNueva_Fila);      
        if (!$(objTabla).find('tbody').is(':visible')) {          
          $(objTabla).find('caption').click();
        }
    });
    $(document).on('click', '.clsEliminarFila', function () {     
       var objCuerpo = $(this).parents().get(2);
        if ($(objCuerpo).find('tr').length == 1) {
            if (!confirm('Esta es el única fila de la lista ¿Desea eliminarla?')) {
                return;
            }
        }      
        var objFila = $(this).parents().get(1);      
        $(objFila).remove();
    });
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:05:28.990

看这里是完整的代码，就像 html 一样。Node.js 只是一个复制和粘贴的问题，如果我理解我想要做的是，当一个新行聚合时，我首先进行更改，如果你意识到，当你添加一行并且什么都不做时。

html

```
<html>
<head>
</head>
<body>
<script type="text/javascript" src="jss/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="manipulacion.js"></script>
<script>    
    $(document).ready(function () {
        $("#estado").change(function () {
            if ($("#estado").val() == 2) {
                $("#sino").show();
                $("#sexo").hide();            
            }
            if ($("#estado").val() == 3) {
                $("#sino").hide();
                $("#sexo").show();
            }
            });
            });
    </script>
    <table>
    <tr>
    <td>
    <select id="estado">
    <option value="1">Seleccione 1 opcion</option>
    <option value="2">Laboratorio</option>
    <option value="3">Datos Generales</option>
    </select>
    </td>
    <td>
    <!-- //laboratorio -->
    <select name="sino" id="sino"style="display:none">
    <option value="1">Si </option>
    <option value="2">No</option>
    </select>
    </td>
    <td>
    <!-- //datos generales -->
    <select name="sexo" id="sexo"  style="display:none">
    <option value="1">Masculino </option>
    <option value="2">Femenino</option>
    </select>
    </td>
    <td><input type="button" value="+" class="clsAgregarFila"></td>
    </tr>
    </table>
    </body>
    </html> 
```

manipulacion.js

```
//manipulacion 
var contLin=1
    $(document).ready(function () {
        $("#estado"+contLin).change(function () {      
            if ($("#estado"+contLin).val() == 2) {
                $("#sino"+contLin).show();
                $("#sexo"+contLin).hide();       
            }
            if ($("#estado"+contLin).val() == 3) {
                $("#sino"+contLin).hide();
                $("#sexo"+contLin).show();
            }
}           );

});

$(document).ready(function(){
    //evento que se dispara al hacer clic en el boton para agregar una nueva fila
    $(document).on('click','.clsAgregarFila',function(){
        //almacenamos en una variable todo el contenido de la nueva fila que deseamos
        //agregar. pueden incluirse id's, nombres y cualquier tag... sigue siendo html

        var strNueva_Fila='<tr>'+
'<td><select id="estado'+contLin+'"><option value="1">Seleccione 1 opcion</option><option value="2">Laboratorio</option><option value="3">Datos Generales</option></select></td>' +
'<td><select name="sino'+contLin+'" id="sino"style="display:none"><option value="1">Si </option><option value="2">No</option></select></td>'+
'<td> <select name="sexo'+contLin+'" id="sexo"  style="display:none"><option value="1">Masculino </option><option value="2">Femenino</option></select><td>'+
'<td><input type="button" value="+" class="clsAgregarFila"><input type="button" value="-" class="clsEliminarFila"></td>'+
'</tr>';

contLin++;

        var objTabla=$(this).parents().get(3);

        $(objTabla).find('tbody').append(strNueva_Fila);

        if(!$(objTabla).find('tbody').is(':visible')){

            $(objTabla).find('caption').click();
        }
    });

    $(document).on('click','.clsEliminarFila',function(){

        var objCuerpo=$(this).parents().get(2);
            if($(objCuerpo).find('tr').length==1){
                if(!confirm('Esta es el única fila de la lista ¿Desea eliminarla?')){
                    return;
                }
            }

        var objFila=$(this).parents().get(1);

            $(objFila).remove();
    });

}); 
```

# sql - 将 ColB 更新 1 直到 ColA 改变

> ID：14969747
> 
> 赞同：0
> 
> 时间：2013-02-19T23:43:17.193
> 
> 标签：sql

我有一个如下所示的 SQL 表：

```
ColA   ColB
xyz     0
xyz     0
xyz     0
uvw     0
uvw     0
stu     0 
```

我想更新为：

```
ColA   ColB
xyz     1
xyz     2
xyz     3
uvw     1
uvw     2
stu     1 
```

我想我需要一个带有嵌套 while 子句的游标，但我是所有这些的新手。任何帮助将不胜感激。谢谢迪克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:54:03.730

您可以使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)with`PARTITION BY`子句。

```
SELECT
    ColA,
    ROW_NUMBER() OVER(PARTITION BY ColA ORDER BY ColA DESC) AS ColB
FROM MyTable 
```

请注意，这将以任意顺序标记列。如果您有 ID 列，则可以`ORDER BY`改为使用它。

# c# - 另一个用户控件上的 Web 用户控件调用事件

> ID：14969766
> 
> 赞同：0
> 
> 时间：2013-02-19T23:44:47.317
> 
> 标签：c#

可以这样做吗？

我有 c# .aspx 页面，其中两个 Web 用户控件都显示数据的 Listview。

现在，如果您从第二个用户控件列表视图中删除项目，我希望第一个更新也显示更改。

我在第二个用户控件中添加了以下内容

```
<%@ Reference VirtualPath="controlOne.ascx" %> 
```

我可以调用 public void BindListview(); 重新绑定列表视图。

但是 controlOne 上的 Listview 会返回 Null 错误，因为找不到 listview。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:55:53.493

在使用 controlOne.ascx 的公共成员之前，您需要调用 LoadControl 方法

看一下示例：[@Reference](http://msdn.microsoft.com/en-us/library/w70c655a%28v=vs.100%29.aspx)

# c - 为什么当我在 C 中的矩阵乘法程序中增加矩阵元素的值时会出现分段错误？

> ID：14969767
> 
> 赞同：0
> 
> 时间：2013-02-19T23:44:53.290
> 
> 标签：c, multithreading, pthreads, matrix-multiplication

为什么当我增加矩阵元素的值（例如 11 20 10）时出现分段错误。通常我得到的结果矩阵的第一行全为 0，第二行矩阵正确。有时它也会给出正确的结果。我不知道这段代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:52:11.457

一个潜在的问题是成员变量看起来`K`可以改变：

```
(data->B) = malloc((data->K)*sizeof(float*));
scanf("%d%d", &(data->K), &(data->N));
for ( i=0;i<(data->K);i++)
   ... 
```

它在设置 array 时首先被初始化`A`。然后它用于分配基本数组以保存`B`. 但是下一个`scanf`可能会导致一个不再与以前相同的值（可能导致内存覆盖）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:53:15.733

看来你颠倒了这两行，

```
(data->B) = malloc((data->K)*sizeof(float*));
scanf("%d%d", &(data->K), &(data->N)); 
```

因此，您使用的是**data->K**的前一个值，因此如果您的第二个矩阵大于第一个矩阵，则您将访问未分配的内存 -> **scanf("%f", &(data->B[ i][j]))**

# c++ - 空 C++ 文件有什么用处？

> ID：14969771
> 
> 赞同：6
> 
> 时间：2013-02-19T23:45:17.240
> 
> 标签：c++, language-lawyer

翻译阶段 2 的第二部分（[N3485](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)中的第 2.2.2 节）基本上说如果源文件不以换行符结尾，编译器应该将其视为已完成。

但是，如果我正确阅读它，它会对空源文件产生明确的例外，这些文件仍然是空的。

确切的文本（特别强调）是：

> 每个反斜杠字符 ( `\`) 的实例后面紧跟一个换行符都被删除，拼接物理源代码行以形成逻辑源代码行。只有任何物理源行上的最后一个反斜杠才有资格成为此类接头的一部分。结果，如果生成了与通用字符名称的语法匹配的字符序列，则行为未定义。*如果源文件不为空且不以换行符结尾，或者在任何此类拼接发生之前以换行符结尾且紧接在反斜杠字符之前，则应将其视为附加的 new-行字符被附加到文件*中。

我无法弄清楚源文件是否为空或仅包含换行符会产生影响的任何情况。

我希望有人可以阐明这一要求背后的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T00:14:47.923

这是为了特别支持 1994 年国际混淆 C 代码竞赛中“最严重的规则滥用”类别的获奖作品：[世界上最小的自我复制程序。保证。](http://www.ioccc.org/1994/smr.hint)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T00:15:12.293

我认为这个想法是源文件通常由零行或多行组成，每行由一系列非换行符组成，后跟换行符。任何不满足该要求的源文件都需要特殊处理（因此您不会从两个不同的源文件中获得由文本组成的行）。

一个空的 C++ 源文件不是特别*有用*，但禁止它是没有意义的。引用的子句不是关于区分空文件和仅包含一个换行符的文件（它们之间应该没有真正的区别）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T00:34:14.053

我想这意味着每一行都以 \n 结尾，而空文件没有行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T00:10:16.963

预处理器可用于构建程序源之外的东西，并且空行可能很重要——例如，它通常用于分隔文本中的段落。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T01:27:23.577

> “如果源文件不为空且不以换行符结尾，或者在任何此类拼接发生之前以换行符结尾且紧接反斜杠字符结尾，则应将其视为附加新的-line 字符被附加到文件中。”
> 
> 翻译阶段 2 的第二部分（N3485 中的第 2.2.2 节）基本上说如果源文件不以换行符结尾，编译器应该将其视为已完成。

否 - 它表示如果文件“不为空”并且不以换行符结尾，则添加换行符

> 但是，如果我正确阅读它，它会对空源文件产生明确的例外，这些文件仍然是空的。

同意。

> 我无法弄清楚源文件是否为空或仅包含换行符会产生影响的任何情况。我希望有人可以阐明这一要求背后的原因。

考虑一个名为“header.h”的头文件，最后一行如下所示*，没有尾随换行符*：

```
#endif  // #ifndef INCLUDED_HEADER_H 
```

说 another.cc 包括它如下：

```
#include "header.h"
#include "another.h" 
```

解析 another.cc 时，header.h 中的文本将替换指定包含它的行。天真地做，这将导致：

```
#endif  // #ifndef INCLUDED_HEADER_H#include "another.h" 
```

显然，编译器将无法对 执行操作`#include "another.h"`，因为它是在 header.h 中开始的注释的一部分。

因此，不完整规则的规则避免了这些问题（这可能非常难以发现）。

If the file was empty anyway, this problem doesn't manifest: there's nothing like the `#endif` to be prepended to the next line in the including file....

# git - 删除所有 Git 提交历史

> ID：14969775
> 
> 赞同：25
> 
> 时间：2013-02-19T23:45:39.687
> 
> 标签：git, github, git-stash

我正在尝试从 Github 获取 repo，恢复过去的标签，将其推送到另一个远程并删除所有历史记录。除了删除所有提交日志外，我可以在下面做所有事情。我错过了什么？

```
git clone https://github.com/user/user-repo.git
cd user-repo
git reset --hard tags/v2.0
git remote add stash ssh://git@myserver:7999/myproject/user-repo.git
git push --force stash master 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-20T03:28:46.307

我认为你想要的是一个像新的回购一样的回购，所以删除`.git/`目录并重新启动它会更简单。

```
git clone https://github.com/user/user-repo.git
cd user-repo
git reset --hard tags/v2.0

rm -rf .git/
git init
git add .
git commit -m 'first commit'

git remote add stash ssh://git@myserver:7999/myproject/user-repo.git
git push --force stash master 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T23:51:44.153

您可以使用`git merge --squash`将所有提交压缩为一个，然后将其推送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:51:52.207

您基本上是在谈论将所有提交汇总到一个提交中，还是要保留所有提交但截断实际提交消息？

要将提交压缩为一个（并截断最终提交消息，如果需要），您可以使用交互式变基：

```
git rebase -i <whatever> 
```

要截断实际提交消息但保留所有提交，请使用`--msg-filter`to 选项`git filter-branch`。

# java - 我做错了什么？线程“main”中的异常 java.lang.NoSuchMethodError: main

> ID：14969778
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:45:52.887
> 
> 标签：java

每当我尝试编译和运行此代码时：

```
import java.awt.GridLayout;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public abstract class screen implements ActionListener {
    private JFrame title = new JFrame("Tic-Tac-Toe");
    private JButton play = new JButton("");
    private JButton quit = new JButton("");

    public screen() {

        /* Create Window */
        title.setSize(300,300);
        title.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        title.setLayout(new GridLayout(3,3));

        /* Add Buttons To The Window */
        title.add(play);
        title.add(quit);

        /* Action Listeners */
        play.addActionListener(this);
        quit.addActionListener(this);

        /* Make The Window Visible */
        title.setVisible(true);

        /* Letters */
        play.setText("PLAY");
        quit.setText("QUIT");
    }
} 
```

我明白了：

> 线程“main”中的异常 java.lang.NoSuchMethodError: main

我不知道我做错了什么。

我是新手。

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:49:04.623

您需要声明一个`public static void main(String args[]) {}`方法。

# javascript - html5 和 javascript：setTimeout 是否打破了这一点？

> ID：14969785
> 
> 赞同：0
> 
> 时间：2013-02-19T23:46:17.200
> 
> 标签：javascript, html, settimeout

我对为什么以下 html 不起作用感到困惑。我希望它会继续发送警报，但它会在一个之后停止。此外，永远不会出现“left fn”警报！谁能给我解释一下？我在 ubuntu 上的 firefox 中使用 html5 和 javascript。

```
<!DOCTYPE html>
   <script>
      function alertme() {
      alert ("in fn");
      }

      while (true) {
       window.setTimeout(alertme(), 3000);
   alert("left fn");
      }
   </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:47:19.217

```
while (true) {
    window.setTimeout(alertme, 3000); //setTimeout wants a function, not the return value of the function
    alert("left fn");
} 
```

顺便说一句，玩得开心，把所有的消息框都删掉……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T23:56:25.233

几个可能的问题：

1.  `alertme()`被立即调用，它的`return`值被传递给`setTimeout()`.

    `alertme`要解决此问题，您可以作为参考传递（不带调用括号）：

    ```
    setTimeout(alertme, 3000); 
    ```

2.  但是，这将与 JavaScript 的（主要）单线程特性相冲突。

    s 是异步的，只需启动一个从*现在开始**不少于*3 秒`setTimeout()`到期的计时器。但是，它们要求一个线程最终**不忙**，以便执行延迟的任务。

     ****但是，`while (true) {}`同步且不确定的 将保持线程忙碌，直到所有执行停止，并且永远不会允许超时执行其任务。所以，你永远不会看到`"in fn"`。

    John Resig 写了一篇关于计时器的文章： http: [//ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)**** 

 ****如何准确地*修复*代码取决于意图。****

# c++ - 在 C++ 中不代表任何内容

> ID：14969787
> 
> 赞同：0
> 
> 时间：2013-02-19T23:46:44.490
> 
> 标签：c++

我的情况是，我有一个`std::vector<double>`，但我希望其中一些双打是“无”/“不存在”。这是如何在 C++ 中完成的？我们可以放心地假设所有“正常”双打对我来说都不是负面的。

我应该让-1（或一些负数）表示“无”吗？这听起来不太优雅。

我应该创建一个带有“无”布尔成员的 Double 类吗？这可以工作，但看起来相当冗长和丑陋。

我应该创建一个 Double 类并创建一个“NoDouble：public Double”子类吗？这听起来更糟。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:53:00.157

如果您有 IEEE 浮点运算，则将`std::numeric_limits<double>::quiet_NaN()`其用作“无”的值。要检查是否`d`为“无”，请使用`isnan(d)`. 也`d != d`只有当`d`为 NaN 时才为真。NaN 的问题在于，在进行有缺陷的计算（例如将零除以零或从负数取平方根时）可能会得到它。使用 NaN 的任何计算也使用 NaN。

如果您碰巧使用了 boost，您可以使用`boost::optional<double>`它在 NaN 一侧添加其他级别的不可用性。那么你有两种不好的状态：无效号码和丢失号码。Boost 包含许多有用的库，因此无论如何它都是值得的工具。

如果您需要附加几个可能的原因来说明为什么它“什么都没有”，那么请使用特殊的易错类而不是双精度类。Fallible 是 Barnton 和 Nackman 发明的，他们是备受赞誉的“科学与工程 C++”一书的作者。

你提到可能没有负数。在这种情况下，将双精度封装到类中。你所拥有的不是技术上正常的双倍，所以你的班级可以增加限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:55:48.150

你可以使用`std::vector<double *>`. NULL 指针将指示空槽或值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T00:27:15.997

您要做的是保持向量相同，但也使用布尔向量，然后将其包装在一个类中。

在体面的编译器上使用 bool 的向量应该优化为每个布尔值 1 位，这样应该可以摆脱你的空间问题。

```
class MyNullable {
public:
  double value;
  bool is_null;  
};

class NullableDoubles {
public:
  std::vector<double> values;
  std::vector<bool> nulls;
  void push_back(double d, bool is_null) {
    values.push_back(d);
    nulls.push_back(is_null);
  }
  MyNullable GetValue(int index) {
    MyNullable result;
    result.value = values[index];
    result.is_null = nulls[index];
    return result;
  }
  bool IsNull(int index) { return nulls[index]; }
  bool MakeNull(int index) { nulls[index] = false; }
}; 
```

而且我相信您可以看到将其包装在一个或两个模板中然后制作任何可以为空的列表的价值（不是双关语）。

```
template <class T>
class NullablesClass {
public:
  std::vector<T> values;
  std::vector<bool> nulls;
  void push_back(T d, bool is_null) {
    values.push_back(d);
    nulls.push_back(is_null);
  }
  MyNullable GetValue(int index) {
    MyNullableT<T> result;
    result.value = values[index];
    result.is_null = nulls[index];
    return result;
  }
  bool IsNull(int index) { return nulls[index]; }
  bool MakeNull(int index) { nulls[index] = false; }
  T GetValue(int index) { return values[index]; }
}; 
```

我希望可以做到。似乎是能够使用所有可能的双精度值并且在使用最少内存和使用最佳内存对齐方式时知道它是否为 NULL 的最佳方法。向量是 C++ 库中的一个特化模板，因此您实际上应该只获得每个布尔值 1 位。

# javascript - 如何将短拖动事件解释为点击

> ID：14969789
> 
> 赞同：2
> 
> 时间：2013-02-19T23:46:49.837
> 
> 标签：javascript, d3.js, events, drag-and-drop, dom-events

有没有一种简洁的方法可以将短时间、短时间的拖动事件解释为点击事件？例如，我正在使用 d3 并定义以下事件，这些事件应该捕获 SVG 上的单击、鼠标移动（无拖动）和拖动事件，以及处理此类事件的结束：

```
@svg
  .on("click", @plot_click )
  .on("mousemove", @plot_mousemove )
  .on("mousedown.drag", @plot_drag )
  .on("touchstart.drag", @plot_drag )

# Global event detectors
d3.select("body")      
  .on("mouseup.drag", @mouseup)
  .on("touchend.drag", @mouseup) 
```

但是，鼠标不完美的短点击事件仍然注册为非常小的拖动事件，这对我的界面来说非常烦人。有什么好的方法来解决这个问题？

虽然我使用 d3 定义事件处理程序，但我愿意为此调整任何通用的 Javascript 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:15:21.830

1.  在 mousedown 时，将光标位置保存到全局变量 (mousePosOnLastDown)。
2.  在 mouseup 上，检查光标是否移动得足够远。
    *   如果有，请执行拖动操作。
    *   如果没有，请执行单击操作。
    *   清除 mousedown 光标位置。

*从 OP 编辑​​：根本不使用 click 动作，只使用 mousedown/mouseup 动作是有意义的。我相应地改变了你的答案。*

# ruby-on-rails-3 - 使用命名空间时 ActiveRecord belongs_to through

> ID：14969793
> 
> 赞同：0
> 
> 时间：2013-02-19T23:47:19.283
> 
> 标签：ruby-on-rails-3, rails-activerecord

我的系统会很大，所以我在命名空间中分离了模型。但是，有一个模型我无法设置关系......

（我的模型是葡萄牙语的，复数也可以）

```
class Sistema::Instituicao < ActiveRecord::Base  
  has_many :agencias
  has_many :dependencias, through: :agencias
  #(...)
end

class Sistema::Agencia < ActiveRecord::Base
  belongs_to :instituicao
  has_many :dependencias
  #(...)
end

class Sistema::Dependencia < ActiveRecord::Base
  belongs_to :agencia
  belongs_to :instituicao, through: :agencia
  #(...)
end 
```

但是我在 Dependencia 中遇到错误，如下所示：

```
ArgumentError: Unknown key: through 
```

我没看到什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:10:19.210

如果您查看[belongs_to 的 api，](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)您会发现没有`:through`选项。该`:through`选项仅适用于`has_one`和`has_many`关联

# video.js - 视频默认静音/仅在全屏视图中启用音频

> ID：14969796
> 
> 赞同：4
> 
> 时间：2013-02-19T23:47:26.543
> 
> 标签：video.js

我阅读了整个 API 和几十个相关的帮助主题，但我没有设法获得代码来帮助我做我想做的事。

**这就是我需要的：视频默认静音。当用户单击全屏按钮时，视频将以全音量播放。**

我该如何编码？

我知道我可以像这样添加 myPlayer.volume(0) 使我的视频静音：

```
<script>
  var myPlayer = _V_("video_1");
  myPlayer.volume(0);
</script> 
```

但是如何检测视频是否全屏？我在 API 上找到了 fullscreenchange 事件，但没有成功实现它。任何帮助都会让我开心。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:50:06.820

监听*fullscreenchange*事件并检查`isFullScreen`播放器的属性。

```
var myPlayer = _V_("video_1");
myPlayer.volume(0);
var onFullScreen = function(){
  if (this.isFullScreen) {
    this.volume(1);
  } else {
    this.volume(0);
  }
};
myPlayer.addEvent("fullscreenchange", onFullScreen); 
```

[https://github.com/zencoder/video-js/blob/master/docs/api.md](https://github.com/zencoder/video-js/blob/master/docs/api.md)

# objective-c - 在 Mac App 的 drawInRect 之前清除

> ID：14969804
> 
> 赞同：1
> 
> 时间：2013-02-19T23:47:57.863
> 
> 标签：objective-c, xcode, macos, nsimage

我想在我的 Mac 应用程序中为按钮的宽度设置动画，同时有一个背景图像和一个前景图像。为此，我使用了@kgn 很棒的库 BBlock ( [https://github.com/kgn/BBlock](https://github.com/kgn/BBlock) )。

问题是背景图像似乎被画在一个后面，所以当按钮缩小时，你甚至看不到背景图像动画，它似乎被切断了。 ![按钮图像切断](../Images/00036ce07f7374978f9b71ff209e03a3.png)

如果我只使用 setImage，这种“动画化”宽度变化的方式是有效的，但是我没有得到背景图像的好处。

我制作了一个自定义按钮，可以逐步缩放按钮（基本上是动画）。它每次运行都会将按钮的大小更改一个像素，并将图像、背景图像和备用背景图像也更改一个像素：

```
- (void)scaleTestButtonUntilWidth:(int)width{
    [NSTimer scheduledTimerRepeats:YES withTimeInterval:timeInterval andBlock:^{
        if (self.width == width) {
            return;
        }

        int newSize;
        if (width > self.width) {
            newSize = self.width += 1;
        }else if (width < self.width){
            newSize = self.width -= 1;
        }

        self.width = newSize;
        [self setImage:self.image];
        [self setAlternateBackgroundImage:[self alternateBGImage]];
        [self setBackgroundImage:[self BGImage]];
    }];
} 
```

setBackgroundImage 看起来像这样，setAlternateBackgroundImage 的实现是相同的：

```
- (void)setBackgroundImage:(NSImage *)backgroundImage{
    [self setImage:[self imageWithBackgroundImage:backgroundImage
                                          andIcon:self.image]];
    [self setButtonType:NSMomentaryChangeButton];
    [self setBordered:NO];
} 
```

它调用实​​际绘制图像的方法：

```
- (NSImage *)imageWithBackgroundImage:(NSImage *)background andIcon:(NSImage *)icon{
    return [NSImage imageForSize:background.size withDrawingBlock:^{
        NSRect bounds = NSZeroRect;
        bounds.size = background.size;

        NSRect iconRect = NSZeroRect;
        iconRect.size = icon.size;
        iconRect.origin.x = round(background.size.width*0.5f-iconRect.size.width*0.5f);
        iconRect.origin.y = round(background.size.height*0.5f-iconRect.size.height*0.5f);

        [background drawInRect:bounds fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0f];
        [icon drawInRect:iconRect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0f];
    }];
} 
```

借助此方法：

```
+ (NSImage *)imageForSize:(NSSize)size withDrawingBlock:(void(^)())drawingBlock{
    if(size.width <= 0 || size.width <= 0){
        return nil;
    }

    NSImage *image = [[NSImage alloc] initWithSize:size];

    [image lockFocus];
    drawingBlock();
    [image unlockFocus];
#if !__has_feature(objc_arc)
    return [image autorelease];
#else
    return image;
#endif
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:37:55.323

也许尝试保存和恢复图形上下文。

```
return [NSImage imageForSize:background.size withDrawingBlock:^{
    NSRect bounds = NSZeroRect;
    bounds.size = background.size;

    NSRect iconRect = NSZeroRect;
    iconRect.size = icon.size;
    iconRect.origin.x = round(background.size.width*0.5f-iconRect.size.width*0.5f);
    iconRect.origin.y = round(background.size.height*0.5f-iconRect.size.height*0.5f);

    CGContextRef context = [[NSGraphicsContext currentContext] graphicsPort];
    CGContextSaveGState(context);        
    [background drawInRect:bounds fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0f];
    [icon drawInRect:iconRect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0f];
    CGContextRestoreGState(context);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:59:48.847

我想知道你是否会更好地继承 NSButton 并覆盖`drawRect`

# sql - 水晶报表 SQL 表达式

> ID：14969805
> 
> 赞同：2
> 
> 时间：2013-02-19T23:48:12.290
> 
> 标签：sql, crystal-reports

我无法弄清楚如何从辅助表中提取值，以用作每条记录的选择标准。

我在 Windows 7 上使用 Crystal Reports 2011，通过 ODBC 连接到 Oracle 11g 数据库。

我正在创建一个使用来自两个位置的信息的员工目录：

1.  表：教师
2.  视图：PVSIS_CUSTOM_TEACHERS

教师表设置有您可预测的字段：id、lastname、firstname、telephone、address、city、state、zip 等等等。

该视图具有以下可用字段：

1.  教师ID
2.  FIELD_NAME
3.  TEXT_VALUE

我正在使用的数据库应用程序允许我创建与主教师表相关的“自定义字段”。事实上，我创建的字段实际上存储在一个单独的表中，但随后可以通过 PVSIS_CUSTOM_TEACHERS 视图访问。由于数据库应用程序允许创建任意数量的“自定义字段”，因此视图中可以包含任意数量的记录，这些记录可以绑定到教师表中的记录。

已经创建了许多自定义字段，但就我当前项目的目的而言，其中只有 3 个很重要：

*   empDirSupRecord
*   empDirSupPhone
*   empDirSupAddr

我的个人教师记录的视图如下所示：

```
TeacherID Field_Name Text_Value
1 empDirSupRecord    
1 empDirSupPhone 1
1 empDirSupAddr 1
1 另一个字段 another_value
1 YetAnotherField yetanother_value

```

（这表明我已要求隐藏我的电话和地址，但仍希望我的名字包含在目录中）

如果用户要求不公开他们的电话号码或地址，或者如果我们需要完全隐藏整个记录，这些字段将包含一个“1”。

当我第一次开始我的报告时，我将表和视图都拉到了数据库专家中，并将它们与 teacher.id = pvsis_custom_teachers.teacherid 链接在一起。但是，这会导致每个教师的姓名在报告上打印一次，每个记录在视图中都有教师 ID。由于这不是我想要的行为，我从数据库专家中删除了视图，并尝试使用 SQL 表达式字段来检索自定义字段的内容。这是我目前陷入困境的地方。我需要为每个教师记录选择正确命名的字段，因为报告正在处理记录。

目前，我的 sql 表达式语句写成：

```
(SELECT text_value FROM pvsis_custom_teachers WHERE field_name = 'empDirSupRecord' AND teacherid = '1') 
```

我需要做的是弄清楚如何让报告智能地选择teacherid =的记录（无论当前正在处理什么teacherid）。我不确定 SQL 表达式字段是否是完成此任务的方法，因此如果我当前的方法不起作用，我绝对愿意接受其他建议。

谢谢参观。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T01:23:28.890

您几乎可以使用 SQL 表达式。您可以使用双引号字段名称引用主查询。所以你要找的是：

```
case when "teacher"."id" is null then null
else (SELECT max(text_value)
      FROM pvsis_custom_teachers 
      WHERE field_name = 'empDirSupRecord' AND teacherid = "teacher"."id")
end 
```

请注意，如果没有空值检查和使用 max()，CR 可能会抱怨，因为它希望确保只返回一个标量。

另一种方法（可能是性能密集度较低的方法）是像您第一次描述的那样加入表和视图。然后，您可以`{teacher.id}`通过变量分组并跟踪视图中的每个字段名称。不过，这将需要更多的工作和更多的公式。像这样的东西，例如：

```
//Place this formula in the Group Header
whileprintingrecords;
stringvar empDirSupRecord:="";

//Place this formula in the Details section
whileprintingrecords;
stringvar empDirSupRecord;
if {pvsis_custom_teachers.field_name} = 'empDirSupRecord'
      then empDirSupRecord:={pvsis_custom_teachers.text_value}

//Place this formula in the Group Footer
whileprintingrecords;
stringvar empDirSupRecord; 
```

# signals2 - 信号2：带有模板化参数的信号

> ID：14969806
> 
> 赞同：1
> 
> 时间：2013-02-19T23:48:26.767
> 
> 标签：signals2

我正在为相机类设计一个基类。目的是使用信号通知客户端新的可用图像。相机可能有 8 位或 16 位像素。我正在尝试将它们模板化如下：

```
#include <boost/signals2.hpp>
#include <boost/cstdint.hpp>

template<typename PX>
class ICamera
{
public:
    typedef PX pixel_type;
    typedef PX const *pFrame;

    typedef boost::signals2::signal<void (ICamera &cam, pFrame buffer)> CaptureSig;
    typedef CaptureSig::slot_type CaptureSlot;   /* error on this line */
    virtual boost::signals2::connection AddCaptureListener(CaptureSlot slot) = 0;
}; 
```

在 MSVS 2008 中，当我从 派生一个类时`ICamera<uint8_t>`，在 typedef 上存在编译错误`slot_type`，首先是：“缺少；在标识符 CaptureSlot 之前”。也就是说，此时`CaptureSig::slot_type`没有定义。

除了在每个派生类中定义信号和槽之外，有没有办法超越这一点？

更新：实际上不是导致问题的信号参数，而是模板中存在信号定义。如果将信号的签名更改为固定类型，则会出现相同的错误。

# javascript - 使用 RegEx 提取段落标签之间的文本

> ID：14969810
> 
> 赞同：1
> 
> 时间：2013-02-19T23:48:40.257
> 
> 标签：javascript, regex, node.js, express

我尝试在 javascript 中使用 RegExp 提取段落标记之间的文本。但它不起作用...

我的模式：

```
<p>(.*?)</p> 
```

学科：

```
<p> My content. </p> <img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTJ9ylGJ4SDyl49VGh9Q9an2vruuMip-VIIEG38DgGM3GvxEi_H"> <p> Second sentence. </p> 
```

结果 ：

```
My content 
```

我想要的是：

```
My content. Second sentence. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:52:32.140

JavaScript中没有“捕获所有组匹配”（类似于 PHP 的`preg_match_all`），但您可以使用以下方法作弊`.replace`：

```
var matches = [];
html.replace(/<p>(.*?)<\/p>/g, function () {
    //arguments[0] is the entire match
    matches.push(arguments[1]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:57:28.777

为了获得一个模式的多个匹配，`g`添加了全局标志。
该`match`方法在全局匹配时会忽略捕获组`()`，但该`exec`方法不会。请参阅[MDN 执行](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)。

```
var m,
    rex = /<p>(.*?)<\/p>/g,
    str = '<p> My content. </p> <img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTJ9ylGJ4SDyl49VGh9Q9an2vruuMip-VIIEG38DgGM3GvxEi_H"> <p> Second sentence. </p>';

while ( ( m = rex.exec( str ) ) != null ) {
    console.log( m[1] );
}

//  My content. 
//  Second sentence. 
```

如果段落之间可能有换行符，请使用`[\s\S]`, 表示*匹配任何空格或非空格字符*，而不是`.`.

Note that this kind of regex will fail on nested paragraphs as it will match up to the first closing tag.

# java - 如何用另一个（另一个文档的）替换 XML 元素？

> ID：14969811
> 
> 赞同：0
> 
> 时间：2013-02-19T23:48:44.477
> 
> 标签：java, xml, jaxp

这是我的问题：

我有一个解析为 DOM 的源 XML 文件。我还得到了一个 XML 片段（例如：）`<a>text1<b/></a>`。片段的“根”元素将始终与源 DOM 中的元素（同名）匹配。我可以用这个替换 DOM 的节点吗？

首先，我想到的是将字符串片段解析为 DOM。然后，我尝试使用`replaceChild()`方法，但要么我使用不正确，要么它只能应用于同一个 DOM 中已经存在的节点。那么有人可以展示我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:37:49.230

您可能需要先调用 getParentNode()，然后对已有的父节点调用 replaceChild()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T18:15:54.433

```
//Importing template node to the target document(this solves wrong_DOCUMENT_ERR:)   
Node importedTemplateChildNode = targetDoc.importNode(templateChildNode, true);

// Replace target child node with the template node
targetParentNode.replaceChild(importedTemplateChildNode, targetChildnode);       

Transformer tranFac = TransformerFactory.newInstance().newTransformer();
tranFac.transform(new DOMSource(targetDoc), new StreamResult(new FileWriter(targetXmlFile))); 
```

# android - Android 日志条目在内存中保留多长时间

> ID：14969812
> 
> 赞同：3
> 
> 时间：2013-02-19T16:54:37.067
> 
> 标签：android, logging, buffer

我正在为 Android 开发一个位置监控应用程序。我的要求之一是它能够连续运行 7 个小时。为了测试该要求，我将使用 Android 日志系统记录每 5 分钟（或可能更多）剩余的电池寿命百分比。我可能会这样做一个小时，然后做一些数学运算并计算出应用程序是否可以运行 7 小时。

我读到日志条目存储在缓冲区中。这个缓冲区多久刷新一次？有没有更好的方法来测试我的应用程序？

我仍在对不同的方法进行一些研究，但不幸的是，大多数测试指南都假设您的设备已连接到 PC。

来源：http: [//developer.android.com/tools/help/logcat.html](http://developer.android.com/tools/help/logcat.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:01:48.270

基本上，这取决于您（以及其他应用程序和系统）正在执行多少日志记录。Logcat 使用固定*大小*的缓冲区，而不是具有最大年龄的缓冲区。

您可以`adb logcat -g`查看设备上缓冲区的大小，因为它会有所不同。

# php - Procmail、Plancake 和 MySQL 一起工作

> ID：14969816
> 
> 赞同：0
> 
> 时间：2013-02-19T23:49:01.990
> 
> 标签：php, mysql, email, procmail

当某个电子邮件地址收到电子邮件时，我有一个脚本运行，procmail 管道到 PHP 脚本，然后由 Plancake 解析，那里没有太多问题。我有一个关于 strpos 的 if 语句，具体取决于正文是否包含特定文本。出于某种原因，当我添加 MySQL 代码时，整个事情都停止了工作。不幸的是，它的设置方式我不太确定如何添加错误检查。这是代码：

```
<?php

require_once("PlancakeEmailParser.php");

 $rawEmail = '';
if (($fp = fopen('php://stdin', 'r')) !== false) {
    while (!feof($fp)) {
        $rawEmail .= fread($fp, 1024);
    }
    fclose($fp);

}

$emailParser = new PlancakeEmailParser($rawEmail);
$emailSubject = $emailParser->getSubject();
$emailBody = $emailParser->getPlainBody();
$emailHeader = $emailParser->getHeader('From');

$message = "FROM: ".$emailHeader."\n\nSubject: ".$emailSubject."\n\nBody: ".$emailBody;

$status = 4;

preg_match("/\d+/", "$emailSubject", $matches);
$number = $matches[0];

$short = substr($message, 0, strpos( $message, 'Begin'));
if (stripos($short,'approve') !== false) {
    echo 'true';
$msg = approve;
//file_put_contents('/home/symantec_mail/task' . $number . 'short.php',$msg);
file_put_contents('/home/symantec_mail/task' . $number . 'approve_short_reply.txt',$message);
file_put_contents('/home/symantec_mail/task' . $number . 'approve_reply.txt',$rawEmail);
}

if (stripos($short,'complete') !== false) {
    echo 'true';
$msg = complete; 
```

当我取消注释以下 mysqli 代码时，一切都停止了。

```
//$mysqli = new mysqli("localhost", "user", "pass", "db");
//$update = $mysqli->prepare("UPDATE task_overview SET status = ? WHERE task_id = ?");
//$update->bind_param('ii', $status, $number");
//$update->execute(); 
```

其余的代码。

```
//file_put_contents('/home/symantec_mail/task' . $number . 'short.php',$msg);
file_put_contents('/home/symantec_mail/' . $number . 'complete_short_reply.txt',$message);
file_put_contents('/home/symantec_mail/' . $number . 'complete_reply.txt',$rawEmail);
}
?> 
```

真的不知道为什么我不能执行这些命令。我会指出它与我的普通 Web 服务器位于不同的 shell 帐户上，尽管 PHP 仍在执行，但我真的不确定我是否正在与 MySQL 服务器通信。如果您有任何建议，即使是用于错误检查，我也会非常感激。

# php - 使用正则表达式php从电子邮件中提取纬度和经度

> ID：14969823
> 
> 赞同：0
> 
> 时间：2013-02-19T23:49:28.273
> 
> 标签：php, regex, email

我是正则表达式的新手，我需要制作一个脚本来搜索电子邮件正文并提取这种格式的浮点数（0.000000,0.000000），尽管它们也可能是负数或高于10 个喜欢：（32.000000，-1.000000）

```
$body = utf8_decode(imap_qprint(imap_fetchbody($inbox,$email_number, 2.1))); 
```

$body 变量将包含类似于

```
text text text text text text Coordinates: (0.000000, -0.000000) text text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:00:21.887

用这个：

```
preg_match('#(-?\d+\.\d+), *(-?\d+\.\d+)#', $body, $coordinates); 
```

您可以在 $coordinates[1] 和 $coordinates[2] 中找到它们。

# backbone.js - 将冷导航交给 Backbone 中的内部 URL？

> ID：14969824
> 
> 赞同：0
> 
> 时间：2013-02-19T23:49:42.240
> 
> 标签：backbone.js, backbone-routing

我想知道人们如何在 Backbone 中处理以下情况：通常当用户导航到应用程序的根目录时，会从后端加载一组数据，立即处理然后显示在 DOM 中。

应用程序中有一些链接可以将您导航到它的不同子部分。路由器捕获导航并将当前页面替换为您导航到的任何页面，所有这些都基于已经获取的相同数据。

问题是用户可以为该内部/辅助 URL 添加书签并“冷”导航到它，就像在有机会获取数据之前一样，无需通过根 URL。是否有处理这种情况的惯用/传统方式（我假设在路由器中）？

一种方法是，在各种路由器路径处理函数中，总是调用一个方法来检查是否有足够的数据来完成操作，如果没有，获取它然后继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:03:24.320

在您调用之前，Backbone 不会在您的路由器中访问初始路由`Backbone.history.start`，因此您可以延迟它，直到您完成必要的设置。我通常 `start`在我的应用程序的主路由器上定义一个方法。看起来像：

```
var AppRouter = Backbone.Router.extend({
  start: function() {
    //init code here
    something.fetch({success: function() {
      //only call history start after the necessary initial setup is done
      Backbone.history.start();
    }});
  }
}); 
```

然后使用该方法启动应用程序：

```
window.app = new AppRouter();
window.app.start(); 
```

请记住，没有什么限制您仅使用`Backbone`. 如果你的启动代码很重，它可能不属于路由器。在这种情况下，您应该定义一个辅助函数来封装启动逻辑，并将路由器完全排除在外：

```
//startup.js
function startup(onComplete) {
  //do initialization stuff...
  onComplete();
});

//main.js
startup(function() {
  Backbone.history.start();
}); 
```

# java - findByName NullPointerException

> ID：14969826
> 
> 赞同：0
> 
> 时间：2013-02-19T23:49:44.733
> 
> 标签：nullpointerexception, 组件组, java, nullpointerexception, codenameone

以下 Codesnipplet 引发[nullpointerexception](/questions/tagged/nullpointerexception "显示标记为“空指针异常”的问题")。它由 findByName 方法抛出。看起来找不到 PlayerComponentGroupList 但我不知道为什么。

我怎么能引用生成的[组件组](/questions/tagged/componentgroup "显示标记为“组件组”的问题")？

```
protected void beforeMain(Form f) {
    super.beforeMain(f);
    try {
        findPlayerComponentGroup(f).addComponent(getItems("Player"));
    } catch (IOException ex) {
        throw new RuntimeException(ex.getMessage());
    }

}

private Container getItems(String order) throws IOException {
...
final Container rows = new ComponentGroup();
...
rows.setName("PlayerComponentGroupList");
    return rows;
}

protected void onMain_PlayerContainerButtonSortNameAction(Component c, ActionEvent event) {
    super.onMain_PlayerContainerButtonSortNameAction(c, event);
    try {
        findPlayerComponentGroup().removeComponent(findByName("PlayerComponentGroupList", Display.getInstance().getCurrent())));
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:58:37.620

`findByName()`不能那样工作。它仅适用于由 GUI 构建器创建的组件，因此速度非常快（否则它将不得不递归搜索非常慢的组件树）。

您需要保留指向组件的指针并将其删除。

# list - Haskell 过滤器/拆分列表

> ID：14969827
> 
> 赞同：9
> 
> 时间：2013-02-19T23:49:46.997
> 
> 标签：list, haskell

我想要类似的东西

```
splitBy pred list = ( filter pred list, filter (not . pred) list ) 
```

但一次通过。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T23:52:59.300

您正在寻找以下[`partition`](http://www.haskell.org/ghc/docs/latest/html/libraries/base//Data-List.html#v%3apartition)功能`Data.List`：

```
partition :: (a -> Bool) -> [a] -> ([a], [a]) 
```

它可以使用折叠很好地实现：

```
splitBy pred = foldr f ([], []) 
    where f x ~(yes, no) = if pred x then (x : yes, no) 
                                    else (yes, x : no) 
```

# search-engine - 如何仅针对一个国家/地区过滤谷歌搜索中的搜索结果？

> ID：14969830
> 
> 赞同：9
> 
> 时间：2013-02-19T23:49:58.050
> 
> 标签：search-engine, google-search

我希望谷歌搜索只返回我所在国家的结果。我如何过滤这些结果来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T00:08:11.467

它有一点点，但对我有用。

例如，如果您希望返回的特定搜索结果仅来自爱尔兰，请执行搜索，然后在浏览器中的 url 添加***&cr=countryIE***并点击返回。可以在以下链接中找到国家代码以及 cr 的更多详细信息。

[https://developers.google.com/custom-search/docs/xml_results?hl=en#countryCollections](https://developers.google.com/custom-search/docs/xml_results?hl=en#countryCollections)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-23T03:12:37.257

将搜索结果限制为源自特定国家/地区的文档：

```
games&cr=countryZA 
```

[你可以在这里](https://developers.google.com/custom-search/docs/xml_results_appendices#countryCodes)找到你的国家代码

# twitter-bootstrap - 使用 Bootstrap 在表单中排列输入文本字段

> ID：14969832
> 
> 赞同：1
> 
> 时间：2013-02-19T23:50:02.480
> 
> 标签：twitter-bootstrap

我想将一些“标签+文本框”组混合使用水平和垂直排列。Bootstrap 有 form-horizo​​ntal 类，但这会将标签放在右侧而不是顶部。

我想实现的安排是：

```
First Name        Last Name
[_______________] [______________]

Company Name
[________________________________] 
```

也就是说，前两个字段（名字和姓氏）的文本框位于同一行，但其标签位于顶部，而不是水平向左，而第三个字段（公司名称）出现在第二行，也与顶部的标签。

实现这一目标的标志是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:47:18.860

您可以通过以下方式实现特定形式：
[Jsfiddle with Bootstrap Form](http://jsfiddle.net/shail/JWjZt/3/)
[在浏览器中查看实时结果](http://jsfiddle.net/shail/JWjZt/3/show)

![结果截图](../Images/6e955aabc4487d1c3e0a164587d63e9d.png)

```
<form class="well span8">
  <div class="row">
    <div class="span3">
        <label>First Name</label>
        <input type="text" class="span3" placeholder="Your First Name">
        <label>Company</label>
        <input type="text" class="span3" placeholder="Company">
    </div>
    <div class="span5">
        <label>Last Name</label>
        <input type="text" class="span3" placeholder="Your Last Name">
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T00:08:29.877

据我所知，您必须使用表格使其看起来像这样，并确保“姓氏”文本保留在其框中。您可以使用`<br/>`标签来分隔行。

```
<form class="form-inline">
<table>
    <tr>
        <td>
            <label for="fn">First Name</label>
            <br/>
            <input name="fn" type="text" class="input-small" />
        </td>
        <td>
            <label for="ln">Last Name</label>
            <br/>
            <input name="ln" type="text" class="input-small" />
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <label for="cn">Company Name</label><br/>
            <input type="text" class="input-large" />
        </td>
    </tr>
</table>
</form> 
```

# javascript - 子菜单消失

> ID：14969835
> 
> 赞同：1
> 
> 时间：2013-02-19T23:50:12.330
> 
> 标签：javascript, jquery, css, submenu

我在 JQuery 的帮助下有一个子菜单，但是当我离开我的主 LI 去 SubMenu 时，子菜单消失了。根据我的研究，我经常看到这是一个 CSS 问题，但我看不出我的 CSS 有什么问题。我想知道的唯一另一件事是 HOVER 功能是否不是要走的路？请看一下。

这是我对相关部分的 CSS 和 JavaScript：

```
<script>
$(document).ready(function () {
    $('.nav #about').hover(function (e) {
        $('.nav2').slideDown('normal');
    }, function () {
        $('.nav2').slideUp('normal');
    });
});
</script>

#wrapper
{
margin:9% 10% 1% 10%;
height:40em;
border: solid 3px black;
background-color:#B2B2D9;
overflow:hidden
}           /* Allows inner div to expand to full height of WRAPPER div */

#main
{
height:100%;
background-color:white;
margin-right:2%;
margin-bottom:20%;
margin-left:15%;
padding-top:1em;
padding-left:2em;
}

#col1
{
background-color:#000033;
width:15%;
height:100%;
float:left;
color:#FFF000;
font-family: bold;
font-size: 100%;
padding:0;
}

ul.nav li 
{
position:relative;
width:100%;
}

ul.nav a
{
display: block;
background-color:#B2B2D9;
margin-right:2%;
margin-bottom:1%;
margin-left:1%;
text-decoration:none;
border-top-color:#FFFFFF;
border-right-color:#E6E6E6;
border-bottom-color:#FFFFFF;
border-left-color:#E6E6E6;
border-top-width: 3%;
border-right-width: 3%;
border-bottom-width: 3%;
border-left-width: 3%;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: solid;
padding: 2%;
}

ul.nav
{
position:relative;
width:100%;
list-style-type: none;
line-height:1.5em;
padding:0px;
}

ul.nav2 a
{
display: block;
background-color:#000033;
padding:6%; 
margin:0;
text-decoration:none;
color:white;
border-top-color:#FFFFFF;    
border-right-color:#E6E6E6;
border-bottom-color:#FFFFFF;
border-left-color:#E6E6E6;
}

ul.nav2
{
position:absolute;
top:0;
left:100%;
display:none;
font-size:100%;
list-style-type: none;
width:7em;
line-height:1.5em;
padding:0px;
}

ul.nav2 li
{ 
line-height:1.3em;
} 
```

以下是相关页面的一部分：

```
<div id="col1">

<ul class="nav">
<li><a href="http://www.alan.com">Home</a></li>
<li><a id="about" href="http://www.alan.com">About</a>

  <ul class="nav2">
  <li><a href="bio.html">Bio</a></li>
  <li><a href="edu.html">Education</a></li>
  </ul>

</li>

<li><a href="http://www.alan.com">New Listings</a></li>
<li><a href="http://www.alan.com">Featured Home</a></li>
<li><a href="http://www.alan.com">Town Facts</a></li>
<li><a href="http://www.alan.com">Contact Me</a></li>
</ul>

</div>

<div id="main">
"Lorem ipsum dolor sit amet, consectetur adipisicing elit
</div> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:57:39.280

如果您将您`id="about"`的`<li>`元素移动到它应该更像您期望的那样工作（`<li>`是您的子菜单容器，而不是`<a>`标签）

```
<li id="about"><a href="http://www.alan.com">About</a> 
```

# client-side - 在 XPages 中的服务器端 JavaScript 中获取客户端字段值

> ID：14969837
> 
> 赞同：1
> 
> 时间：2013-02-19T23:50:16.607
> 
> 标签：client-side, xpages, xpages-ssjs

我似乎缺少 XPages 的一些东西。我有一个具有服务器端 JS 的按钮，它试图从文档上的 2 个现有字段中获取值。我在表单中输入值，单击按钮时字段值为空。

```
var doc:NotesDocument = currentDocument.getDocument();
var email = doc.getItemValue("email");
_dump("Email: " + email);
var password = doc.getItemValue("password");
_dump("Password: " + password); 
```

通过使用“_dump”命令，我可以看到我的 log.nsf 中的值是空的。

当我使用客户端 JS 来获取字段时，它们会被填充——我可以在警报语句中看到：

```
var doc = document;
var email = doc.getElementById("#{id:email1}").value;
alert(email);
var password = doc.getElementById("#{id:password1}").value;
alert(password); 
```

我尝试在存在电子邮件和密码字段的面板上进行部分刷新，但这仍然没有帮助。

我是否必须先保存文档并再次抓取文档才能获取字段值？我是否必须在客户端 JS 中传递字段值，然后传入一个范围（我认为这不能从客户端 JS 完成）？这可能是一个简单的解决方案，但我不确定为什么会这样。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T01:53:20.727

直接从数据源中检索值：

```
var email = currentDocument.getValue("email");
var password = currentDocument.getValue("password"); 
```

# c# - 为不受支持的方法实施标准

> ID：14969839
> 
> 赞同：0
> 
> 时间：2013-02-19T23:50:25.733
> 
> 标签：c#, .net, nhibernate, queryover, nhibernate-criteria

我编写了一个使用 LINQ to NHibernate 进行数据库查询的应用程序。我的领域层中的代码创建类型的表达式

```
System.Linq.Expressions.Expression<Func<T, bool>> 
```

这些被传递到我的数据访问层中的存储库，然后像这样使用它们：

```
return session.Query<T>.Where(expression)... 
```

在我发现 NHibernate LINQ 提供程序完全忽略映射文件中的选项 fetch="join" 之前，这一切都很棒，这意味着使用多个选择语句而不是使用连接的单个选择来获取对象。

所以我试图转移到完全支持连接的 QueryOver API。我立即遇到了不支持 string.Equals 之类的方法的问题。我还有几个在我的表达式中使用的自定义扩展方法，为此我通过扩展 BaseHqlGeneratorForMethod 在 LINQ to NHibernate 中添加了支持。

如何在 QueryOver API 中添加对这些方法的支持？我找不到这方面的任何信息。

我知道你可以做这样的事情：

```
Session.QueryOver<T>().WhereRestrictionOn(x=>x.Foo).IsInsensitiveLike("bar") 
```

但我正在寻找一种方法来使用与 LINQ to NHibernate 相同的表达式来完成所有操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:50:30.593

答案似乎是不可能将 lambda 表达式与 QueryOver API 一起使用。正如 Oskar 在对该问题的评论中指出的那样，仅支持非常简单的 lambda 表达式。我正在重写我的代码，以便存储库方法接收查询对象而不是 lambda 表达式。

# c# - 在 C# 控制台应用程序中输入非英文字符的问题

> ID：14969840
> 
> 赞同：6
> 
> 时间：2013-02-19T23:50:26.330
> 
> 标签：c#, visual-studio-2010, unicode, console-application

我正在尝试在英语 Windows 7 Ultimate 64 位上使用 Visual Studio 2010 构建控制台 C# 应用程序。当我尝试使用非 ASCII 字符复制路径然后将其粘贴到我的控制台应用程序中时，非 ASCII 字符会变成???。有没有什么办法解决这一问题？

这是我要复制的内容：`C:\Test Folder\документи`

这是代码（在上面的建议链接之后）：

```
Console.OutputEncoding = System.Text.Encoding.UTF8;
string strLineUserInput = Console.ReadLine(); 
```

但即使我改变了字体，当我用调试器测试它时，它`C:\Test Folder\документи`仍然会变成变量。`C:\Test Folder\?????????``strLineUserInput`

另请注意，与链接“重复帖子”不同，我需要输入这些字符。

所以如果我这样做的话：

```
Console.InputEncoding = System.Text.Encoding.UTF8;
string strLineUserInput = Console.ReadLine(); 
```

如果我阅读上面的文字，我`strLineUserInput`会变成这样。`null`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T00:57:52.660

按着这些次序：

1.  在调试/不调试时将控制台窗口字体更改为*Lucida Console*。
2.  执行以下代码：

    ```
    public static void Main(String[] args)
    {
        Console.OutputEncoding = System.Text.Encoding.GetEncoding("Cyrillic");
        Console.InputEncoding = System.Text.Encoding.GetEncoding("Cyrillic");

        Console.WriteLine(@"C:\Test Folder\документи");
        // input C:\Test Folder\документи
        string strLineUserInput = Console.ReadLine();
        Console.WriteLine(strLineUserInput);
    } 
    ```

输出应该是：

```
C:\Test Folder\документи
C:\Test Folder\документи
C:\Test Folder\документи 
```

**[更新]**

也许您想使用该`ReadKey`方法以使其正常工作（您仍然必须使用*Lucida Console*字体）：

```
static void Main(string[] args)
{
    Console.OutputEncoding = Encoding.UTF8;
    Console.InputEncoding = Encoding.UTF8;

    string s = @"C:\Test Folder\документи";
    Console.WriteLine(s);

    // input C:\Test Folder\документи
    var strInput = ReadLineUTF();

    Console.WriteLine(strInput);
}

static string ReadLineUTF()
{
    ConsoleKeyInfo currentKey;

    var sBuilder = new StringBuilder();
    do
    {
        currentKey = Console.ReadKey();
        // avoid capturing newline
        if (currentKey.Key != ConsoleKey.Enter)
            sBuilder.Append(currentKey.KeyChar);

    }
    // check if Enter was pressed
    while (currentKey.Key != ConsoleKey.Enter);

    // move on the next line
    Console.WriteLine();

    return sBuilder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-29T13:29:45.723

下面的代码对我有帮助。请使用**Encoding.Unicode**而不是 Encoding.UTF8

```
 Console.OutputEncoding = Console.InputEncoding = Encoding.Unicode;
  Console.Write("Введите свое имя: ");
  string name = Console.ReadLine(); 
  Console.WriteLine($"Привет {name}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:15:59.203

这对于 C# 来说似乎完全是矫枉过正，但它对我有用：

```
using System.Runtime.InteropServices;

[DllImport("kernel32.dll", SetLastError = true)]
static extern IntPtr GetStdHandle(int nStdHandle);

[DllImport("kernel32.dll")]
static extern bool ReadConsoleW(IntPtr hConsoleInput, [Out] byte[]
    lpBuffer, uint nNumberOfCharsToRead, out uint lpNumberOfCharsRead,
    IntPtr lpReserved);

public static IntPtr GetWin32InputHandle()
{
    const int STD_INPUT_HANDLE = -10;
    IntPtr inHandle = GetStdHandle(STD_INPUT_HANDLE);
    return inHandle;
}

public static string ReadInputLineAsUTF8()
{
    //I can't seem to find a way not to hardcode the size here???
    const int bufferSize = 1024 * 2;
    byte[] buffer = new byte[bufferSize];

    uint charsRead = 0;
    ReadConsoleW(GetWin32InputHandle(), buffer, bufferSize, out charsRead, (IntPtr)0);

    //Make new array of data read
    byte[] buffer2 = new byte[charsRead * 2];
    for (int i = 0; i < charsRead * 2; i++)
    {
        buffer2[i] = buffer[i];
    }

    //Convert string to UTF-8
    return Encoding.UTF8.GetString(Encoding.Convert(Encoding.Unicode, Encoding.UTF8, buffer2)).Trim();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:23:52.567

您的文字看起来像是俄语。

文件资源管理器采用 Unicode。

控制台应用程序可能不是 Unicode。

当您粘贴到控制台窗口时，您的 Unicode 字符将根据您当前的系统区域设置转换为非 Unicode 系统。如果您的系统语言环境不支持俄语，您的字符将转换为“？”。

尝试查看您的控制面板 > 区域和语言设置：

1.  打开控制面板
2.  选择地区和语言
3.  查看非 Unicode 的当前语言
4.  如果未设置为俄语，请尝试“更改系统区域设置”并设置为俄语。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-15T05:11:24.440

如果您只想将输入副本粘贴到您的文本框中，这非常容易。在您的应用程序中有一个复选框控件，您可以使用代码来更改字体，如下所示。

```
enter code here
 private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (checkBox1.Checked)
        {
            textBox1.Font = new Font("Your font", 10);
        }
        else 
        {
            textBox1.Font = new Font("Times New Roman", 10);
        }
    } 
```

或者，如果您始终粘贴非英语，则可以更改文本框的字体属性。

# sharepoint-2007 - SharePoint 2007 问题，自动添加用户

> ID：14969847
> 
> 赞同：0
> 
> 时间：2013-02-19T23:51:09.337
> 
> 标签：sharepoint-2007

我们有一个 MOSS (SharePoint 2007) 站点。我们已授予对 SharePoint 组的有限访问权限，在该组中我们添加了一个 AD 组。因此，AD 组中的任何人都将拥有对该站点的有限访问权限。但是当他们访问其他资源时，他们会被重定向到请求访问页面。即使我收到他们的访问请求电子邮件。但是系统会自动将用户添加到站点。当我查看人员和组中的用户信息时，用户已经添加到系统中（我没有提供访问权限）。“创建者”属性显示请求者名称本身。有没有办法跟踪这个问题。我试图复制它，但这是不可复制的。但问题仍然会在某个时候发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:39:25.670

用户首次访问网站集时会自动添加到*用户信息列表中。*此时他们的信息与用户内容数据库同步。

> WSS 在一个隐藏列表中维护外部用户、组和角色的配置文件数据，该列表称为用户信息列表。每次 WSS 配置新网站集时，它都会自动将用户信息列表创建为顶级网站中的隐藏列表。 **WSS 然后在每个外部主体第一次被分配权限或第一次通过安全检查以访问安全对象时为每个外部主体添加一个新配置文件**。请注意，存储在用户信息列表中的用户配置文件不会跨网站集扩展 - 当用户在一个网站集中更新其配置文件设置时，不会更改该用户在其他网站集中的配置文件设置。

来源：[SharePoint 2007 中的安全编程](http://msdn.microsoft.com/en-us/magazine/cc163287.aspx)

# facebook - 使用本机 php 应用程序发布到 facebook 页面

> ID：14969848
> 
> 赞同：0
> 
> 时间：2013-02-19T23:51:13.783
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用 PHP SDK 创建一个 Facebook Native 应用程序，这样我就可以不时地从 cron 服务自动将链接和事件发布**到我拥有的页面。**

* * *

我获得了应用访问令牌，并为该应用提供了所有必需的权限：publish_stream、manage_pages 和 create_event。

使用 Graph API，我可以通过简单的调用发布到我的用户个人资料页面：

```
$facebook->api( "/" . USER_ID . "/feed", 'post', $tmp_fields ); 
```

但我不能发布到类似的页面：

```
$facebook->api( "/" . PAGE_ID . "/feed", 'post', $tmp_fields ); 
```

此外，我无法获得页面凭据，`/USER_ID/accounts`因为它返回：

```
{
   "error": {
      "message": "(#15) This method is not supported for native apps",
      "type": "OAuthException",
      "code": 15
   }
} 
```

也不能访问`/PAGE_ID/?fields=access_token`，因为它只返回页面的 id 字段。

* * *

那么，将独立应用程序的用户页面发布到用户页面的正确方法是什么，例如可以每周左右从 cron 运行。如何仅从本机应用程序中的应用程序访问令牌获取页面访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:42:26.007

Graph API 的某些方法不适用于桌面或移动（“本机”）应用程序。我发现的一个[相关错误报告](https://developers.facebook.com/bugs/274826259306869)表明，这是因为桌面应用程序必须将其应用程序机密存储在其应用程序中（这可能导致它被反编译并用于进行恶意 API 调用）。

如果此 Facebook 应用程序供您个人使用，或者您没有在其中嵌入您的 App Secret，您可以通过在应用程序设置的“高级”部分将 Facebook 应用程序的类型更改为 Web 应用程序来绕过此限制：

![](../Images/00b23b4d8bf07c7350a5bec7d683bea3.png)

# php - PHP取消链接错误

> ID：14969849
> 
> 赞同：1
> 
> 时间：2013-02-19T23:51:25.490
> 
> 标签：php, unlink

我在删除上传的图像时遇到问题。

它插入数据库并上传**就好了**，但不会删除。

**示例：**我有两个表，**modelImages**和**Model**。在**模型**中我保存了一个主图像的路径，但在**模型**图像中可能有很多。这些表通过**modelID**链接。

这是路径的示例：**img/1/1/someImageName.png**。

（第一个 1 - makerID，第二个 1 - modelID）。

```
include('connect.php'); //connect to database
$modelID=$_GET['modelID'];
$makerID=$_GET['makerID'];
$path="img/".$makerID."/".$modelID."/";

if ($stmt = $mysqli->prepare("SELECT images FROM modelImages WHERE modelID='$modelID'")) {

    $stmt->execute();    
    $stmt->bind_result($images);

    while ($stmt->fetch()) {
        if($images!=$path){
            unlink($images);
        }
    }

    $stmt->close();

}
else {
    printf("Prepared Statement Error: %s\n", $mysqli->error);
}

if ($stmt = $mysqli->prepare("SELECT mainImage FROM model WHERE makerID='$makerID' AND modelID='$modelID'")) {    

    $stmt->execute();
    $stmt->bind_result($mainImage);

    while ($stmt->fetch()) {
        if($mainImage!=$path){
            unlink($mainImage);
        }
    }

    $stmt->close();

}
else {
    printf("Prepared Statement Error: %s\n", $mysqli->error);
} 
```

当我只使用第一个代码时，它会从**modelImages**表中删除所有图像，如果我只使用第二个代码，它会从**模型**表中删除一个图像。

但是如果我一起使用它们，我会得到`unlink()`错误：

```
Warning: unlink(img/1/1/image1.png) [function.unlink]: No such file or directory in /home/...
Warning: unlink(img/1/1/image2.png) [function.unlink]: No such file or directory in /home/...
Warning: unlink(img/1/1/image3.png) [function.unlink]: No such file or directory in /home/...
Warning: unlink(img/1/1/image4.png) [function.unlink]: No such file or directory in /home/... 
```

**结论**：如果我同时使用这两个查询，则**取消链接**将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:57:55.727

不要使用相对路径，除非 a) 您绝对确定当前工作目录是什么（请参阅`getcwd()`参考资料），或 b) 预期该路径相对于不同的工作目录（如工作目录感知 CLI-tools ）。始终使用或创建绝对路径

```
"/path/to/img/".$makerID."/".$modelID."/";
__DIR__ . "/../path/to/img/".$makerID."/".$modelID."/"; 
```

我更喜欢第二个，因为它更便携。

# c++ - Ubuntu 10.04 上需要哪些软件包来运行使用 gcc/g++ 4.7 编译的程序？

> ID：14969853
> 
> 赞同：0
> 
> 时间：2013-02-19T23:52:05.790
> 
> 标签：c++, gcc, c++11, g++, shared-libraries

我需要在一个全新的、更新的 ubuntu 10.04 机器上运行用 c++11 编写的、用 gcc 4.7 编译的程序吗？stdlibc++ 更新是否足够？glibc？还要别的吗？改写：我需要在 ubuntu 10.04 机器上部署哪些包，以便我的 gcc 4.7 c++11 程序可以运行，而无需安装完整的 gcc 套件？

我想为基于 ubuntu 10.04 的系统开发应用程序，并能够使用 gcc 4.7 中提供的 c++11 语言和库功能。（请注意，在 ubuntu 10.04 上需要一个特殊的 ppa 来安装 gcc 4.7，否则它目前将坚持使用 gcc 4.4）。我不想在将运行我创建的应用程序的机器上部署编译器。我不打算使用像 GOMP 这样的“花哨”库或任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:45:19.767

您需要 GCC 4.7 中的`libgcc_s.so.1`,`libstdc++.so.6.0.17`​​ 和`libsupc++.so.6.0.17`库，但我怀疑 Ubuntu 10.04 是否包含包含这些库的软件包。您用来获取 GCC 4.7 的 PPA 还应该在`gcc`包中或其他一些库中提供这些库，例如`libgcc1`和`libstdc++6`

如果您找不到`.deb`它们的软件包，那么在旧系统上获取这些库的唯一可靠方法是构建 GCC，请参阅[http://gcc.gnu.org/wiki/InstallingGCC](http://gcc.gnu.org/wiki/InstallingGCC)以获取指针。您可以使用它`--enable-languages=c,c++`来避免构建不需要的编译器前端和运行时库。

# c# - 在另一个类中填充一个类中的列表

> ID：14969859
> 
> 赞同：0
> 
> 时间：2013-02-19T23:52:20.547
> 
> 标签：c#, list, class, population

对于这样一个简单的问题，我深表歉意，但我已经努力修复此代码几个小时了，但我无法取得任何进展。

我有一个项目需要使用三个类：客户、员工和客户组。这些类从文件 (.csv) 中填充，然后转储回显示其内容的控制台。客户组类，它包含员工类的单个实例和客户列表以及处理几个类唯一变量的其他几个列表。转储我的代码时，我得到一些未处理的异常错误，调试表明客户组类中的客户类为空。据我所知，可能存在一系列其他问题，但获取这个类的列表是问题所在。

代码本身很长，因此为了简洁起见，我将尝试对其进行精简。

有问题的程序位：

```
while (dataArray[i] == "End")
        {
            int.TryParse(dataArray[i], out temp);
            i++;
            testGrp.Customers.Add(new Customer(temp, dataArray[i++], dataArray[i++], dataArray[i++], dataArray[i++]));
            double.TryParse(dataArray[i], out doubleTemp);
            testGrp.AmountSpent.Add(doubleTemp);
            i++;
            testGrp.SpendingLevel.Add(dataArray[i]);
            i++;
        } 
```

客户群类：

```
public CustomerGrp(int groupId, Employee executive, List<Customer> customers,   List<double> amountSpent, List<string> spendingLevel)
    {
        this.groupId = groupId;
        this.executive = executive;
        this.customers = customers;
        this.amountSpent = amountSpent;
        this.spendingLevel = spendingLevel;
    } 
```

和客户类：

```
public Customer(int newId, string newName, string newPhoneNumber, string newAddress, string newMarried)
    {
        this.Id = newId;
        this.Name = newName;
        this.PhoneNumber = newPhoneNumber;
        this.Address = newAddress;
        this.Married = newMarried;
    } 
```

dataArray 是通过将 csv 文件中的初始字符串分解为更小的位而生成的数组。它并不漂亮，但它现在已经达到了它的目的。在此之前，已经处理了 groupID 和执行位，以 i++ 结尾以准备显示的部分。

我可以在没有错误的情况下填充 Employee 执行部分，但是在一个类中填充一个类列表是我无法完全理解的事情。我认为我做得对，但我能找到的大多数例子并不完全适合这种情况。我知道我的代码一点也不漂亮，但我只是在开始清理之前尝试建立基本功能。任何帮助或建议将不胜感激。

编辑

如所问，控制台中给出的消息如下：

System.NullReferenceException 对象引用未设置为对象的实例。在“线”和“线”。

这些行是：

```
DumpContents(testGrp); 
```

和

```
static void DumpContents(CustomerGrp customerGrp)
    {
        Console.WriteLine("------- Customer Content -------");
        Console.WriteLine("         Id: {0}", customerGrp.GroupId);
        DumpContents(customerGrp.Executive);
        foreach (Customer cust in customerGrp.Customers)
        {
            DumpContents(cust); // <- Exception Error line here
        }
        Console.WriteLine("--------------------------------");
    } 
```

编辑

包含重载的 DumpContents 函数：

```
static void DumpContents(Employee employee)
     {
        Console.WriteLine("------- Employee Content -------");
        Console.WriteLine("         Id: {0}", employee.Id);
        Console.WriteLine("       Name: {0}", employee.Name);
        Console.WriteLine(" Start Date: {0}", employee.StartDate);
        Console.WriteLine("       Rate: {0}", employee.GetRate());
        Console.WriteLine("      Hours: {0}", employee.GetHours());
        Console.WriteLine("        Pay: {0}", employee.CalcPay());
        Console.WriteLine("     Tenure: {0} Years", employee.GetTenure());
        Console.WriteLine("--------------------------------");
    }

    static void DumpContents(Customer customer)
    {
        Console.WriteLine("------- Customer Content -------");
        Console.WriteLine("            Id: {0}", customer.Id);
        Console.WriteLine("          Name: {0}", customer.Name);
        Console.WriteLine("  Phone Number: {0}", customer.PhoneNumber);
        Console.WriteLine("       Address: {0}", customer.Address);
        Console.WriteLine("Marital Status: {0}", customer.Married);
        Console.WriteLine("--------------------------------");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:31:33.123

确保在程序循环之前初始化一个新的瞬间 testGrp.Customers = new list ();

好像你跳过了一个 i in loop

编辑：哇，你很好，你知道我在用我的手机来回答这个问题。

我相信他得到了错误，因为他的客户对象从未被实例化。通常，您不会在 DumpContents 行上收到错误，因为它是一个 foreach 循环，除非该对象在线程之间共享。您可能会在此行的上一行中得到错误：foreach (Customer cust in customerGrp.Customers)

这就是为什么我要求他确保客户对象被实例化

但这只是我的猜测......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:07:04.250

行 DumpContents(customerGrp.Executive) 递归调用 DumpContents 方法 - 但使用 Employee 类型，然后再次使用 Customer 类型循环。DumpContents 必须传递一个 CustomerGrp。

简单的解决方法是重载 DumpContents 方法以转储不同类型的信息，例如：

```
static void DumpContents(CustomerGrp customerGrp)
{
    Console.WriteLine("------- Customer Content -------");
    Console.WriteLine("         Id: {0}", customerGrp.GroupId);
    DumpContents(customerGrp.Executive);
    foreach (Customer cust in customerGrp.Customers)
    {
        DumpContents(cust); // <- Exception Error line here
    }
    Console.WriteLine("--------------------------------");
}

static void DumpContents(Employee employee)
{
    Console.WriteLine("------- Employee Content -------");
    Console.WriteLine("         Id: {0}", employee.Id);
    ...
}

static void DumpContents(Customer customer)
{
    Console.WriteLine("------- CustomerContent -------");
    Console.WriteLine("         Id: {0}", customer.Id);
    ...
} 
```

# apache - Apache mod_rewrite 文件夹到子域

> ID：14969863
> 
> 赞同：1
> 
> 时间：2013-02-19T23:52:52.420
> 
> 标签：apache, .htaccess, mod-rewrite, subdomain

**domain.com/folder/index.php/var1/var2/etc/**应该重定向到**folder.domain.com/var1/var2/etc/**即保持参数不变但重定向和剥离 index.php

文件夹结构如下

Webroot
   .htaccess
   文件夹
      index.php

虽然我可以使用以下内容让 domain.com/folder/... 重定向到 folder.domain.com/...

```
RewriteEngine On  
RewriteCond %{REQUEST_URI} ^/folder/(.*)$  
RewriteRule .* http://folder.domain.com/%1 [R] 
```

当我尝试剥离 index.php 时

```
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteRule ^(.*)$ index.php [QSA,L] 
```

一切都开始出错了。我想要的 URL 架构可以正常工作（folder.domain.com），但它仍然可以在文件夹 URL（domain.com/folder/index.php）中使用我也尝试将部分和所有 .htaccess 放入文件夹 - 我错过了什么？

添加一些我正在尝试实现的行为的示例：

```
domain.com/folder/index.php/var1/var2 = folder.domain.com/var1/var2  
folder.domain.com/index.php/var1/var2 = folder.domain.com/var1/var 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:30:30.397

我可以为你提出很多建议，但我认为这是目前最好的一个（注意：**未经测试**，我现在不在 PC 上）：

```
RewriteCond%{REQUEST_URI} ^/folder/
RewriteRule ^folder/index.php/(.*)$ http://folder.domain.com/$1 [R=301,L] 
```

那应该将您重定向到域，并剥离`index.php`.

# sql - 删除具有外部约束的行而不使用“级联”

> ID：14969883
> 
> 赞同：0
> 
> 时间：2013-02-19T23:54:44.517
> 
> 标签：sql, tsql, with-statement

我是 SQL 的新手，因为我通常可以在不深入研究的情况下完成简单的查询/迁移，但是我有一个不涉及连接的更复杂的查询/迁移，我想知道当没有外部约束时如何删除在级联上使用。这是我的查询。我无法从谷歌搜索中找到一个好的答案。

```
WITH aDeleteVariable AS (SELECT TOP 1 FooID as id FROM [BSystem].[Foo].[bar] order by      
CreateTimeUTC desc)
DELETE FROM [BSystem].[Foo].[fooBar] where FooID = id
DELETE FROM [BSystem].[Foo].[bar] where FooID = id 
```

所以我需要先删除 [BSystem].[Foo].fooBar，然后是 [BSystem].[Foo].[bar] 这将在运行时执行，因此不能硬编码。“1”真的会是n，但是我已经解决了那个代码。

尝试执行此查询时，我得到**无效的列名“id” 。**我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:01:10.750

您的`DELETE`陈述不引用`aDeleteVariable`. 该`id`列仅存在于 的上下文中`aDeleteVariable`。

你需要加入`aDeleteVariable`你的`DELETE`陈述。此外，您不能重用公用表表达式，因此您必须复制它。

请参阅此[SQL Fiddle（带有简化的架构/表名称）](http://sqlfiddle.com/#!6/709f7/2)，但以下是您想要的。

```
WITH aDeleteVariable AS (SELECT TOP 1 FooID as id
        FROM [BSystem].[Foo].[bar] order by CreateTimeUTC desc)
DELETE FB 
        FROM [BSystem].[Foo].[fooBar] AS FB
        INNER JOIN aDeleteVariable AS DV ON (FB.FooID = DV.id);
WITH aDeleteVariable AS (SELECT TOP 1 FooID as id
        FROM [BSystem].[Foo].[bar] order by CreateTimeUTC desc)
DELETE B
        FROM [BSystem].[Foo].[bar] AS B
        INNER JOIN aDeleteVariable AS DV ON (B.FooID = DV.id); 
```

当然，加入 to 后`aDeleteVariable`，您不需要`id`别名。以下将起作用。

```
WITH aDeleteVariable AS (SELECT TOP 1 FooID
        FROM [BSystem].[Foo].[bar] order by CreateTimeUTC desc)
DELETE FB 
        FROM [BSystem].[Foo].[fooBar] AS FB
        INNER JOIN aDeleteVariable AS DV ON (FB.FooID = DV.FooID);
WITH aDeleteVariable AS (SELECT TOP 1 FooID
        FROM [BSystem].[Foo].[bar] order by CreateTimeUTC desc)
DELETE B
        FROM [BSystem].[Foo].[bar] AS B
        INNER JOIN aDeleteVariable AS DV ON (B.FooID = DV.FooID); 
```

鉴于有两个单独的公用表表达式，存在竞争条件，并且第二个表达式可能返回不同的`FooID`（或者当您将其适应`N`记录时返回多个）。您可能希望将 ID 选择到表变量中，而不是使用公用表表达式。以下应该工作。

```
DECLARE @DeleteVariable TABLE (FooID INT);
INSERT INTO @DeleteVariable (FooID)
        SELECT TOP 1 FooID FROM [BSystem].[Foo].[bar]
                ORDER BY CreateTimeUTC DESC;
DELETE FB 
        FROM [BSystem].[Foo].[fooBar] AS FB
        INNER JOIN @DeleteVariable AS DV ON (FB.FooID = DV.FooID);
DELETE B
        FROM [BSystem].[Foo].[bar] AS B
        INNER JOIN @DeleteVariable AS DV ON (B.FooID = DV.FooID); 
```

# java - Java HashSet / HashMap 自定义对象作为关键的权威文档？

> ID：14969884
> 
> 赞同：1
> 
> 时间：2013-02-19T23:54:44.983
> 
> 标签：java, hashmap, hashset

我正在尝试找到有关如何使用自定义对象作为 HashMap 的键或存储在 HashSet 中的对象的权威文档。

通过阅读各种帖子，我以某种方式发现您应该覆盖自定义对象中的两个方法 equals() 和 hashCode() （例如[覆盖 Java 中的 equals 和 hashCode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)）。

[但是，当我阅读HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)和[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)的 Oracle/Sun 官方 Javadocs 时，他们根本没有提到重写这些方法。这些说明是否隐藏在文档的其他地方？如果是这样，我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:10:41.113

你*不需要*重写`equals`and `hashCode`，但你需要有*一致* `equals`的and`hashCode`方法。

也就是说，如果`obj.equals(obj2)`，那么它一定是`obj.hashCode() == obj2.hashCode()`。相反（`equals()`具有不相等值的非对象`hashCode()`）应该尽可能频繁地为真以获得良好的性能，但这不是要求，如果您的对象具有超过 2^32 个状态，则不能总是满足）。

默认值`equals()`和`hashCode()`方法遵循这一点并具有标识语义 - 对象只有在它们实际上是相同的对象（obj == obj2）时才相等。

如果您想要值语义 - 例如，具有相同状态的两个对象相等，您应该覆盖这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:06:41.213

Collections API 用 equals() 和 hashCode() 来描述合约。如果您希望一个键的多个实例彼此相等，那么您需要按照 Object 类指定的协定重写 equals() 和 hashCode()。

[Set 接口](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)描述了它的合约：

> 更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

equals() 和 hashCode() 的合约由 Object 类指定。

*   这是[Object.equals()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)的合同。
*   这是[Object.hashCode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)的合同。

在“Effective Java”中，Joshua Bloch 建议您在覆盖`hashCode`时始终覆盖`equals`，以避免违反这些约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:06:52.877

[在java.lang.Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)的合同中对其进行了详细讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:08:30.007

在 和 的文档中`Set`，`Map`它们是它们实现的接口。

该要求不是任意的，它是保证接口的方法按预期工作的唯一方法 - 通过能够判断何时可能是不同的 Java 对象的键应该真正被视为相同的键 - 例如,`"abc"`和`"ab" + "c"`是不同的对象，但 的实现`equals`确保它们被认为是相同的键。至于`hashCode`，需要在作为这些接口基础的数据结构中找到有意义的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T00:08:50.853

据我所知，密钥必须是不可变对象。

> 如果它是可变的，它的哈希码在添加到映射后可以改变。然后地图可能无法找到它

[在java Hashmap中将自己的类设置为键](https://stackoverflow.com/questions/3665404/setting-own-class-as-key-in-java-hashmap)

这是一个说明这一点的例子：

```
import java.util.HashMap;
class Test{

    public int i=0;
    @Override
    public int hashCode() {
        return i;
    }
}

public class Main {
    public static void main(String[] args) {

        HashMap<Test, String> hm = new HashMap<>();
        Test t1 = new Test();
        hm.put(t1, "found");

        System.out.println(hm.get(t1));

        t1.i=2;

        System.out.println(hm.get(t1));

    }

}

/*
output:
found
null
*/ 
```

# zend-framework - Zend_Http_Client 的最大查询长度？

> ID：14969887
> 
> 赞同：0
> 
> 时间：2013-02-19T23:54:56.083
> 
> 标签：zend-framework, zend-http-client

我使用 Zend_Http_Client 如下：

```
$client = new Zend_Http_Client($apiURL);

if (strpos($restriction, 'c') !== false)
{
    $client->setParameterGet(array(
        'channels' => $channels,
    ));
}

$client->setParameterGet(array(
    'limit' => $limit,
    'offset' => $offset,
));

$feed = $client->request()->getBody(); 
```

很简单，用一系列参数查询一个 API。问题是“通道”的参数。如果预先批准的频道，此参数是逗号分隔的列表。

我的问题是，这些参数的大小是否有限制？如果这个频道列表太长，我会有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:40:57.927

HTTP 规范没有指定限制，`Zend_Http_Client`也没有人为地强制执行，所以不，这不应该是一个问题。

# c++ - 近似字符串匹配的概率预选

> ID：14969894
> 
> 赞同：0
> 
> 时间：2013-02-19T23:56:11.403
> 
> 标签：c++, string, matching, metric, approximate

我最近的任务是开发一种算法来检查数据库中的重复客户记录。DB 布局非常简单：数以万计的行，包含 FullName、Street、City、ZIP、Phone 等字段。

先说一点背景：

我对算法进行了一些广泛的研究，并决定每个领域都应该使用不同的算法进行一定程度的权衡，因为并非所有领域在所有情况下都表现得一样好。例如，姓氏的权重因子为 0.50。当我评估时，我会选择要使用的算法以及它们对最终决定的影响：
因子 0.25：JaroWinkler
因子 0.60：余弦 2-Gram 相似
因子 0.15：DamerauLevenshtein

一切运行良好，稍加调整后，我检测到的积极因素几乎没有错误。到现在为止还挺好。但是，正如您可以想象的那样，在处理数万条记录时，运行时间为 O(n^2) - 或者实际上是 E 从 i=0 到 i=n - 并不是很有效。不用说，积极优化，使用编译器优化速度，多线程等，只是创可贴，因为真正的问题是复杂性。

本质上，我正在寻找一种预先过滤潜在匹配的方法，并且现在已经对此进行了三天的研究。我发现了一些关于 R-Trees、R*-Trees、KD-Trees、欧几里德向量、minhashing 等的有价值的信息。然而，关于所有这些的大多数信息都是相当学术性的。我发现的最有价值的资源是“挖掘海量数据集”，第 3 章。

现在到我真正的问题：

我已经阅读了所有这些信息，但我不确定如何将它们放在一起。

我正在考虑在树或图形数据结构中进行某种索引，我可以在其中输入一个字符串并说“找到所有匹配概率> 0.20的人”。这个算法应该非常快。然后，当我得到一个潜在的（>0.20）匹配列表时，我可以去比较几个项目和我的“昂贵”但有选择性的算法。我认为这应该将运行时间减少到一个非常合理的值。

我一直在尝试找到某种参考代码来做我想做的上面的事情，但除了学术文章之外，我似乎没有想出任何东西。我确实找到了实际编译的“simstring”，但似乎与 7 条测试记录不太匹配。有人能指出我正确的方向吗？肯定有人以前遇到过这个问题并找到了解决方案......

非常感谢您！

PS 我在 C++ 中执行此操作，但 C#/C/Java/PHP 中的任何示例都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:04:03.120

作为第一个切入点，我只需选择那些足够接近相同长度的字符串，它们可以在给定的概率内匹配。这不会是非常有选择性的，但是（除非您指定非常宽松的公差）可能会很快消除相当大比例的不可能*匹配*。（例如，使用像 Levenshtein 这样的编辑度量将插入计为 1 次操作，如果您从长度为 5 的字符串开始并且需要在 5 次操作中匹配，那么您可以消除所有超过 10 的字符串而无需进一步检查）。

这是否具有足够的选择性以直接进行昂贵的比较是值得商榷的——显然这将取决于您匹配的字符串长度的可变性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:45:55.060

我终于通过执行以下操作成功实现了预选： 1\. 使用客户记录的某些字段来构造 2Grams 2\. 将具有 6 个 minhash 函数家族的 2Grams Minhash 到 192 位签名 3\. 使用 boost::geometry库的 rtree 实现，以在签名上创建 6 维空间索引 4\. 为我正在比较的记录选择最近的 k（我的情况是 30）记录，并在这些候选者上运行原始的“昂贵”比较 5。这减少了复杂度从 E(i,i=n,i=1) 到大约 30n + m，其中 m 是构建索引所需的时间（几乎可以忽略不计，令人惊讶）。

我现在可以在 60 秒内以高精度运行 15,000 次比较，这是在单线程测试中。多线程到 4 或 8 个内核，这将运行得更快。

# android - 当我按图像时，图像变为其他图像

> ID：14969896
> 
> 赞同：0
> 
> 时间：2013-02-19T23:56:21.890
> 
> 标签：android, image, button

例如，我在 XML 上制作了 imageview，我喜欢这样制作。

当我单击该图像时，图像将更改为另一个图像。

所以我想制作图像按钮，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:37:13.860

我认为 ImageView 满足您的要求。你可以试试这段代码：

```
 imageView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
                            //You can set new image to the imageView by resource id, bitmap, drawable...
            imageView.setImageResource(resId)
        }
    }); 
```

# node.js - NodeJS 将 MJPEG 流式传输到浏览器，一些图像未显示

> ID：14969898
> 
> 赞同：3
> 
> 时间：2013-02-19T23:56:23.260
> 
> 标签：node.js, http, video, buffer, mjpeg

我只是向浏览器发送 5 个 jpeg。（实际上下面的代码可能更优雅，但这只是为了展示这个想法）

```
 im[0] = fs.readFileSync("banner1.jpg");
    im[1] = fs.readFileSync("banner2.jpg");
    im[2] = fs.readFileSync("banner3.jpg");
    im[3] = fs.readFileSync("banner4.jpg");
    im[4] = fs.readFileSync("banner5.jpg");

    app.get("/image", function(req,res){
        res.setHeader('Content-type', 'multipart/x-mixed-replace; boundary=--myboundary');
        res.write("Content-Type: image/jpeg\r\n\r\n");
        res.write(im[0]);
        res.write("\r\n--myboundary\r\n");
        var time = 1000;
        setTimeout(function(){
            res.write("Content-Type: image/jpeg\r\n\r\n");
            res.write(im[1]);
            res.write("\r\n--myboundary\r\n");
        },time*1);
        setTimeout(function(){
            res.write("Content-Type: image/jpeg\r\n\r\n");
            res.write(im[2]);
            res.write("\r\n--myboundary\r\n");
        },time*2);
        setTimeout(function(){
            res.write("Content-Type: image/jpeg\r\n\r\n");
            res.write(im[3]);
            res.write("\r\n--myboundary\r\n");
        },time*3);
        setTimeout(function(){
            res.write("Content-Type: image/jpeg\r\n\r\n");
            res.write(im[4]);
            res.write("\r\n--myboundary\r\n");
            res.end();
        },time*4);
    }); 
```

但问题是它不显示`im[3]`，即使我改变了时间，那是什么问题？Chrome 是缓冲数据还是 NodeJS？

# data-structures - 保持前 n 个元素按排序顺序排列的最佳数据结构是什么？

> ID：14969909
> 
> 赞同：9
> 
> 时间：2013-02-19T23:57:22.063
> 
> 标签：data-structures, language-agnostic

我正在寻找一种保留前*n 个*元素的数据结构，类似于[这个问题](https://stackoverflow.com/questions/564112/data-structure-that-always-keeps-n-best-elements)，但增加了维护排序顺序的要求。显然我可以在最后进行排序，但可能有一种更有效的方法可以即时进行。只有插入，从不删除，然后在最后遍历前*n 个*元素。

这个问题与语言无关，但它将在 C# 中，因此使用本机 .NET 集合的答案是可取的。

编辑：我应该澄清一下，排序顺序仅在迭代前*n 个元素时才最重要。*在插入的过程中，只要保留前*n 个*元素，排序顺序就无关紧要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:41:29.043

您必须向我们提供有关*n*的顺序和要插入的项目数的线索。

我认为排序顺序是相关的，你怎么知道哪些元素是 top *n*的一部分？仅仅因为您只希望所有插入末尾 的前*n 个可能会产生对结构或算法的偏见。*

为什么保留任何不在 top *n*中的项目？您可以使用大小为 n+1 的排序集（[考虑 Python 的双端队列](http://docs.python.org/2/library/collections.html?highlight=pop#collections.deque)）。添加时，遍历列表并将新项目插入集合中的正确位置。当集合达到大小 (n+1) 时，每次插入后都会删除最后一项。这样，您始终拥有前*n*个项目，而不会使用永远不会检索到的项目来增加数据结构。

此外，如果您保留底部元素的值（*n*的最后一个，称为*b*），那么您可以使用它来完全跳过插入。*当新项目x*大于*b*时，这会将比较次数限制为 O(1) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:23:25.687

如果你真的需要让它们一直保持排序，你必须使用自平衡二叉搜索树。但要考虑到这（保持元素排序）不是一种优化，而是一种有成本的奢侈品。

自平衡二叉搜索树比隐式堆慢一个常数因子。

您想如何访问已排序的元素？如果你只是想遍历排序后的序列，一个普通的自平衡二叉搜索树就足够了。

如果您想随时按排序序列中的位置访问任何元素（另一种奢侈......），那么您需要扩充树。基本上，每个节点都会有一个额外的字段来计算其子树中的节点数，包括它自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:59:00.580

这个答案类似于凯利的答案，但有一个经过测试的代码示例。由于 N 的大小小于 100，因此我使用了简单的插入排序，如果项目数高于某个（未优化的）值（例如 20 个项目），则使用二进制搜索查找进行修改。我已经包含了一个示例控制台应用程序 (C#) 来展示它的使用。我对它进行了简单的测试以确保它有效，但我目前没有对其进行全面分析。此结构针对减少内存使用进行了优化。

```
public class TopNStructure<T> : IEnumerable<T> where T : IComparable<T>
{
    private const int SizeForLinearOrBinaryInsert = 20;

    private int _maxSize;
    private int _currentSize;
    private T[] _items;
    private IComparer<T> _comparer;

    /// <summary>
    /// The number of items
    /// </summary>
    public int Count { get { return _currentSize; } }

    public TopNStructure(int maxSize, IComparer<T> comparer)
    {
        if (maxSize <= 0)
        {
            throw new ArgumentOutOfRangeException("Max size must be a postive, non-zero value");
        }
        _maxSize = maxSize;
        _currentSize = 0;
        _items = new T[maxSize];
        _comparer = comparer;
    }

    public TopNStructure(int maxSize)
        : this(maxSize, Comparer<T>.Default) { }

    /// <summary>
    /// Adds an item to this structure
    /// </summary>
    /// <param name="item">The item to add</param>
    /// <returns>True if the item was added, false otherwise</returns>
    public bool Add(T item)
    {
        if (_currentSize == 0)
        {
            _items[0] = item;              
        }
        else if (_currentSize == _maxSize)
        {
            if (_comparer.Compare(_items[_currentSize - 1], item) <= 0)
            {
                return false;
            }
            else
            {
                Insert(item);
                return true;
            }
        }
        else if (_currentSize == 1)
        {   
            if (_comparer.Compare(_items[0], item) <= 0)
            {
                _items[1] = item;
            }
            else
            {
                _items[1] = _items[0];
                _items[0] = item;
            }               
        } 
        else 
        {
            if (_comparer.Compare(_items[_currentSize - 1], item) <= 0)
            {
                _items[_currentSize] = item;
            }
            else
            {
                Insert(item);
            }
        }
        _currentSize++;
        return true;
    }

    /// <summary>
    /// Insert the item into the data structure
    /// </summary>
    /// <param name="item">The item to insert</param>
    private void Insert(T item)
    {
        int start = 0;
        if (_currentSize >= SizeForLinearOrBinaryInsert)
        {
            start = Array.BinarySearch<T>(_items, 0, _currentSize, item, _comparer);
            if (start < 0)
            {
                start = ~start;
            }
            ShiftAndInsert(item, start, _currentSize);                
            return;
        }
        else
        {
            for (int i = start; i < _currentSize; i++)
            {
                if (_comparer.Compare(_items[i], item) > 0)
                {
                    ShiftAndInsert(item, i, _currentSize);                      
                    return;
                }
            }
            _items[_currentSize] = item;
        }                           
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="index"></param>
    /// <param name="maxIndex"></param>
    private void ShiftAndInsert(T item, int index, int maxIndex)
    {
        if (maxIndex >= _maxSize)
        {
            maxIndex = _maxSize - 1;
        }
        for (int i = maxIndex; i > index; i--)
        {
            _items[i] = _items[i - 1];
        }
        _items[index] = item;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return ((IEnumerable<T>)_items).GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return _items.GetEnumerator();
    }
}

static void Main(string[] args)
{
    TopNStructure<double> data = new TopNStructure<double>(25);

    Random rand = new Random(132151);
    for (int i = 0; i < 50; i++)
    {
        double value = rand.NextDouble();
        data.Add(value);
    }

    int j = 0;
    foreach (double value in data)
    {
        Console.WriteLine("{0} {1}", j, value);
        j++;
    }
    Console.ReadKey();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T21:29:18.107

如果内存不是问题，最后最好对整个数组进行部分排序。即使您使用 O(log n) 插入数据结构，您可以通过这种方式实现的最佳复杂度是 O(n log k)：n 次插入成本为 O(log k)。

使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm "选择算法")查找数组的前 k 个元素会给您带来 O(k log n) 的复杂度。k小于n，所以更好。

维基百科文章中有一个 QuickSelect 的实现。此外，使用纯 PriorityQueue（这里提到的大多数人以不同的方式）更容易。一目了然：

```
create_heap(array) // O(n)
for(int i=0; i<k; i++)
    sorted[i] = heap_pop(array) //O(log n) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T20:50:19.637

这是与我的第一个类似的数据结构，这次使用内部链表来提高插入速度。您会损失一些速度，因为您不能使用二进制搜索来查找插入点，但是（项目 > n 的）插入和删除是 O(1) 并且应该平衡缺乏二进制搜索。此结构使用更多内存，因为链接列表有 2 个额外的指针。

```
public class TopNStructureLinkedList<T> : IEnumerable<T> where T : IComparable<T>
{
    private const int SizeForLinearOrBinaryInsert = 20;

    private int _maxSize;
    private int _currentSize;
    private LinkedList<T> _items;
    private IComparer<T> _comparer;
    private LinkedListNode<T> _largestItemNode;

    /// <summary>
    /// The number of items
    /// </summary>
    public int Count { get { return _currentSize; } }

    public TopNStructureLinkedList(int maxSize, IComparer<T> comparer)
    {
        _maxSize = maxSize;
        _currentSize = 0;
        _items = new LinkedList<T>();
        _comparer = comparer;
        _largestItemNode = null;
    }

    public TopNStructureLinkedList(int maxSize)
        : this(maxSize, Comparer<T>.Default) { }

    /// <summary>
    /// Adds an item to this structure
    /// </summary>
    /// <param name="item">The item to add</param>
    /// <returns>True if the item was added, false otherwise</returns>
    public bool Add(T item)
    {
        if (_currentSize == 0)
        {
            _largestItemNode = _items.AddFirst(item);               
        }
        else if (_currentSize == 1)
        {
            if (_comparer.Compare(_largestItemNode.Value, item) <= 0)
            {
                _largestItemNode = _items.AddAfter(_largestItemNode, item);                   
            }
            else
            {
                _items.AddBefore(_largestItemNode, item);                   
            }
        }
        else if (_currentSize == _maxSize)
        {
            if (_comparer.Compare(_largestItemNode.Value, item) <= 0)
            {
                return false;
            }
            else
            {
                Insert(item);
                _largestItemNode = _items.Last.Previous;
                _items.RemoveLast();
                return true;
            }
        }
        else
        {
            if (_comparer.Compare(_largestItemNode.Value, item) <= 0)
            {
                _largestItemNode = _items.AddAfter(_largestItemNode, item);       
            }
            else
            {
                Insert(item);
            }
        }
        _currentSize++;
        return true;
    }

    /// <summary>
    /// Insert the item into the data structure
    /// </summary>
    /// <param name="item">The item to insert</param>
    private void Insert(T item)
    {
        LinkedListNode<T> node = _largestItemNode.Previous;
        while (node != null)
        {              
            if(_comparer.Compare(node.Value, item) <= 0) {
                _items.AddAfter(node, item);
               return;
            }
            node = node.Previous;               
        }
        _items.AddFirst(item);

    }

    public IEnumerator<T> GetEnumerator()
    {
        return ((IEnumerable<T>)_items).GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return _items.GetEnumerator();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T17:27:54.250

在迭代它们之前简单地对最后的前 k 个元素进行排序可能是值得的。如果 k 足够小（比如少于元素总数的一半），那么这将比维护一个您从不查询的排序列表便宜。

查看预构建的部分排序方法，如 STL 的部分排序。

为所有元素创建排序列表将在 O(n log n) 中完成，以进行基于比较的排序，无论它是否处于运行状态。部分排序会稍微好一些。

# objective-c - xcode - 移动 tableview 原点

> ID：14969916
> 
> 赞同：1
> 
> 时间：2013-02-19T23:57:42.603
> 
> 标签：objective-c, xcode

我目前正在研究 iPad 原型。我有一个视图控制器，其中包含 3 个表视图，在分段控件下平均拆分为列，在选择其中一个段时，我想在中心隐藏表视图并在左右表视图之间平均共享可用空间. 我怎么能做到这一点。我刚开始研究目标 C，所以任何帮助都会很棒！我使用的是 xcode 4.6，因此默认情况下在视图控制器上选择自动布局。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:42:49.150

如果您有两个不同的布局无法使用同一组自动布局约束来处理，那么诀窍是拥有第二组较低优先级的约束，在切换到备用 UI 布局时，您会增加其优先级（在您的情况下，隐藏中心表视图）。您通常还必须降低原始布局所需的一个或多个约束的优先级。

在布局 UI 时，您首先要设置约束，以便它们适用于所有三个表视图的布局。然后为“两个表视图”的情况添加优先级较低的约束。在您的控制器中，为那些优先级较低的约束以及所有阻止它们工作的约束创建 IBOutlet 属性。将 outlet 连接到 UI 中的约束。

然后在切换到两个表视图时执行以下操作：

```
[centerTableView setHidden:YES];

// lower the priority for all constraints that don't apply for two table views
[someConstraint setPriority: NSLayoutPriorityDefaultLow];
// ...

// increase the priority for all previously low-priority constraints
[someOtherConstraint setPriority:NSLayoutPriorityDefaultHigh];
// ... 
```

# screensharing - 从浏览器共享桌面

> ID：14969917
> 
> 赞同：0
> 
> 时间：2013-02-19T23:57:42.970
> 
> 标签：screensharing, desktop-sharing

我想问一个问题，如果有任何库或允许从浏览器共享桌面的东西，我不是在问屏幕共享（即通过 webrtc 的浏览器页面）我问的是桌面共享（如 teamviewer）是指其他用户可以从他的浏览器使用您的计算机，而其他人正在获取您计算机的整个屏幕，而不仅仅是特定的选项卡。

如果您的答案是无法完成，因为 JS 将加载到特定选项卡中，那么可以通过使用一些将屏幕数据/视频字节传输到浏览器然后发送给其他人的小应用程序来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-20T12:48:53.490

我相信您正在寻找的是：WebRTC 以下链接：

*   Firefox 扩展（示例）： http: [//mozilla.github.io/webrtc-landing/](http://mozilla.github.io/webrtc-landing/)

    > > 添加您的 *. 到 about:config -> getUserMedia screensharing 允许的域

*   谷歌浏览器扩展（示例）：[https ://developer.chrome.com/extensions/samples#search](https://developer.chrome.com/extensions/samples#search)

    > > 在运行中打开它：Chrome.exe --enable-usermedia-screen-capturing

*   其他参考：[https ://github.com/muaz-khan/WebRTC-Experiment](https://github.com/muaz-khan/WebRTC-Experiment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:01:26.813

没有办法做到这一点，主要是因为（我相信）Chrome 的沙盒，以及其他浏览器的沙盒和安全功能。如果你的目标是 Windows，你可以做一个 ActiveX 脚本或者用 Flash 或 Air 做一些事情。

# php - 使用适用于 PHP 2 的 AWS 开发工具包上传图像

> ID：14969921
> 
> 赞同：6
> 
> 时间：2013-02-19T23:58:22.683
> 
> 标签：php, image, upload, amazon-web-services

这让我发疯——我已经研究这个问题好几天了，但收效甚微。我终于碰壁了，需要帮助。我搜索的很多文章和论坛都不是 AWSSDK for PHP 2。

在过去的几年里，我们一直在使用 Amazon 的 S3 通过 iOS 加载图像。

现在，我需要在浏览器中实现上传。

我已经在我们的 Ubuntu 服务器上下载并成功安装了 AWSSDK for PHP 2。我可以连接到我们的 AWS S3 帐户并显示存储桶的内容。但是我无法将图像放入存储桶中。

来自 AWS 的异常是：
Aws\S3\Exception\NotImplementedException：AWS 错误代码：NotImplemented，状态代码：501，AWS 请求 ID：CEDC4BBAA83CF70C，AWS 错误类型：服务器，AWS 错误消息：您提供的标头暗示不具备的功能实施的。

这是我从中获取以下示例代码的 URL，在名为 Uploading a File to Amazon S3 的标题下： [https ://github.com/aws/aws-sdk-php#quick-start](https://github.com/aws/aws-sdk-php#quick-start)

我基于此更新了我的代码： [AWS PHP SDK Version 2 S3 putObject Error](https://stackoverflow.com/questions/13504065/aws-php-sdk-version-2-s3-putobject-error)

但它仍然不起作用。

这是我的代码：

```
<?php
require_once("../config.php");     //local config vars   
require_once('AWSSDKforPHP/aws.phar');

use Aws\S3\S3Client;
use Aws\Common\Enum\Region;
use Aws\Common\Aws;
use Aws\S3\Enum\CannedAcl;
use Aws\S3\Exception\S3Exception;
use Guzzle\Http\EntityBody;

//get the $s3 object
$config = array(
    'key' => AMAZON_ACCESS_KEY,
    'secret' => AMAZON_ACCESS_SECRET,
    'region' => Region::US_EAST_1    
);
$s3 = S3Client::factory($config);

try {
    $bucketname = 'my_bucket_name';            //my bucket name on s3
    $filename = 'filename.jpg';                //my image on my server
    $path = 'http://my.website.com/app/cache/remote';        //the path where the image is located
    $fullfilename = $path."/".$filename;

    //this successfully lists the contents of the bucket I am interested in
    foreach ($s3->getIterator('ListBuckets') as $bucket) {
        foreach ($s3->getIterator('ListObjects', array('Bucket' => $bucket['Name'])) as $object) {
            if ( $bucket['Name'] == $bucketname ) {
                echo $bucket['Name'] . '/' . $object['Key'] . PHP_EOL;
            }
        }
    }

    //HERE ME HERE, PLEASE!  this is the code that throws the exception
    $s3->putObject(array(
        'Bucket' => $bucketname,
        'Key'    => $filename, 
        'Body'   => EntityBody::factory(fopen($fullfilename, 'r')),
        'ACL'    => CannedAcl::PUBLIC_READ_WRITE,
        'ContentType' => 'image/jpeg'
    ));

} catch (S3Exception $e) {
    echo $e;
}

?> 
```

有人可以为我提供一个示例，以便我可以使用 AWSSDK for PHP 2 将 JPG 图像上传到 S3 上的存储桶中吗？

解决方案：从 ppostma1 的回复中，我修改了我的代码如下，现在它可以工作了：

```
$bucketname = 'my_bucket_name';  //must be all lowercase
$filename = 'filename.jpg'; //my image on my server
$path = 'var/www/html/root-website-folder/images/'; //the physical path where the image is located
$fullfilename = $path.$filename;

$s3->putObject(array(
        'Bucket' => $bucketname,
        'Key'    => $filename, 
        'Body'   => EntityBody::factory(fopen($fullfilename, 'r')),
        'ACL'    => CannedAcl::PUBLIC_READ_WRITE,
        'ContentType' => 'image/jpeg'
)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:01:06.970

首先，您缺少一个 s3 'filename' aka 键：

```
'Key' => '/files/imgage/fuzzykitten.jpg' 
```

接下来，我的并发症要少得多：

```
//use Aws\S3\S3Client;
use Aws\Common\Enum\Region;
//use Aws\Common\Aws;
use Aws\S3\Enum\CannedAcl;
use Aws\S3\Exception\S3Exception;
use Guzzle\Http\EntityBody;

$amazon = Aws\S3\S3Client::factory($config) 
```

能够找到类文件。每次我尝试包含 ./common/aws 或 ./s3/s3client 时，它都会开始给我“找不到 Aws\S3\Aws\S3Client”，这让我很失望？？？

# java - 从 Java 树创建 html 嵌套列表

> ID：14969922
> 
> 赞同：2
> 
> 时间：2013-02-19T23:58:24.927
> 
> 标签：java, html, jsp, recursion, jstl

我正在开发一个销售点系统的学校项目。它适用于餐厅。“经理”可以创建一个菜单，其中包含尽可能多的嵌套类别，并且最终类别将包含项目。我已经在 java 中创建了这个类别树。它本质上与计算机的目录相同。当他们想要查看他们的菜单时，我计划从数据库中填充树。它是一个 Web 应用程序，因此我需要将此树表示为 html 嵌套列表。我一直在使用 JSP/JSTL 从数据对象构建页面，所以我希望在构建树后将树传递给 JSP，然后以某种方式遍历它并插入正确的 html，甚至在 Java 中编写代码来编写一个巨大的 html 字符串，然后提供它。

我很难解决这个问题，因为我对 jsp/jstl 很陌生，并且正在寻找有关最佳方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:52:33.533

如果您不知道信息嵌套的深度，可以使用递归。

定义一个名为的jsp页面`node.jsp`，它将被递归调用：

```
<li>
   ${node.value}
   <c:if test="${fn:length(node.children) gt 0}">
      <ul>
         <c:forEach var="node" items="${node.children}">
           <c:set var="node" value="${node}" scope="request" />
           <jsp:include page="node.jsp" />
         </c:forEach>
      </ul>
   </c:if>
</li> 
```

在您的主页中，您只需使用树的根初始化节点，并包含`node.jsp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:32:52.050

假设树存储在一个类中，该类将子对象递归地实现为对象列表，那么您可以使用 JSTL foreach 标记以嵌套方式进行迭代，如下所示：

```
<c:forEach items="${root.children}" var="parentItem">    
    <c:forEach items="${parentItem.children}" var="childItem">    
        <c:forEach items="${childItem.children}" var="grandchildItem"> 
        </c:forEach>
    </c:forEach>
</c:forEach> 
```

当然，这假设这些对象中的每一个都有一个名为 getChildren() 的方法来工作。您只需在 servlet 中通过以下方式将根对象传递给 JSP 页面：

```
request.setAttribute("root", root); 
```

# php - Mysql SET 和 PHP 查询子集

> ID：14969928
> 
> 赞同：1
> 
> 时间：2013-02-19T23:58:49.217
> 
> 标签：php, mysql, set

我有一个基本的 mysql 数据库，并使用 php 作为我的 android 应用程序的 Web 服务。我的应用程序中有 21 个类别，我将它们作为 Mysql SET 存储在数据库中的列中。一篇文章可以有多个类别。

我让用户选择一个或多个类别。现在，我将所有选定的类别作为硬编码的“字符串”值发送，并将它们全部连接起来，如下所示。

SELECT * FROM ...... WHERE 猫喜欢 '%$cat1%' 或猫喜欢 '%$cat2%'

你可以猜到这是一个非常低级的过程。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:03:14.157

仅使用外键制作类别表、文章表和联合表，以在多个类别中定位文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:03:41.863

最正确的方法是重新设计架构以创建三个表：`Article`、`Category`和`ArticleCategories`。前两个表正是您所期望的（文章 - 类别数据和您的集合的内容）。第三个表将映射唯一的 articleID-categoryID 关系。然后，加入很简单：

```
SELECT * FROM Articles JOIN ArticleCategories USING (articleID)
    JOIN Categories USING (categoryID)
WHERE
    catName LIKE '%$cat1%' OR catName LIKE '%$cat2%' 
```

我也有点不清楚为什么需要使用`LIKE`，因为你似乎暗示用户必须选择你给他们的类别而不是输入它们。如果你不使用`LIKE`，那么你可以只使用`IN`类别列表.

# python - Python shell 访问单独的运行脚本

> ID：14969929
> 
> 赞同：0
> 
> 时间：2013-02-19T23:59:16.803
> 
> 标签：python, shell, process

我通过 mod_wsgi 在 Web 服务器上运行 Python 应用程序，并且能够通过服务器上的 SSH 访问 python shell。当应用程序运行时，部分应用程序会随着时间的推移在内存中生成字典和少量列表。

是否有一种可能的方法可以在服务器上启动 Python shell 并能够通过 shell 访问字典和列表，或者是将应用程序编程为 pickle 或 json 并将它们定期或通过事件触发器存储在文件中的唯一选项?

即使这不是针对 Web 服务器的情况，Python shell 是否有可能访问已经运行的 Python 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:12:20.577

您通常不能从另一个 Python 解释器访问一个 Python 解释器。

做类似事情的最一般方法是将解释器放在套接字上（或 -pipe 或其他任何东西）到您的服务器程序中，然后将您的外壳连接到该解释器。

在模块之上做这件事`code`并不难，但要让它像普通的交互式解释器 shell 一样好，需要更多的工作。我相信 IDLE 和 IPython 都包含许多有用的源代码，甚至可能是一些你可以开箱即用的东西，或者只需很少的改动。

也可以在两个单独的程序之间直接共享数据。例如，`multiprocessing.Value`在上面使用`mmap`——或者更简单地说，只是将数据保存在数据库文件中而不是内存中。然后你的 shell 可以直接读取数据而不直接与服务器交互。然而，这意味着有适当的锁，或者尝试尽可能原子地写入并接受 shell 偶尔会因为竞争而得到垃圾。

但实际上，大多数情况下，如果您能够负担得起通过酸洗/JSON/其他方式转储数据，那是最简单和最安全的解决方案。

# powershell - 获取最常见的逗号数，它的行数和总行数

> ID：14969931
> 
> 赞同：0
> 
> 时间：2013-02-19T23:59:19.467
> 
> 标签：powershell, powershell-3.0

我有以下脚本来获取文件中逗号的数量。

```
ls | select -First 10 |
% { 
    $_.FullName;
    cat $_ | Select-String `, -AllMatches | 
    Select-Object LineNumber, @{ n = "Count"; e = { $_.Matches.Count }} |
    Group-Object Count
} 
```

该脚本为每个文件返回以下行。如何获得每个文件最常见的逗号计数？对于以下示例，我需要将最多逗号计数*77*、行数*108*和总行数 ( *108 + 8 +5 = 121* ) 传递给另一个程序。

```
文件1.txt

计数名称组                                                                             
----- ---- -----                                                                             
  108 77 {@{LineNumber=1; 计数=77}，@{LineNumber=2; 计数=77}，@{LineNumber=3; 计数=77...
    8 78 {@{LineNumber=7; 计数=78}，@{LineNumber=15; 计数=78}，@{LineNumber=22; 数=...
    5 79 {@{LineNumber=16; 计数=79}，@{LineNumber=32; 计数=79}，@{LineNumber=37; 数数...

文件2.txt
......

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:17:30.247

如果我明白你在问什么，你应该按计数（降序）对 Group 的输出进行排序并选择第一个：

```
ls | select -First 10 |
% { 
    $_.FullName;
    cat $_ | Select-String `, -AllMatches | 
    Select-Object LineNumber, @{ n = "Count"; e = { $_.Matches.Count }} |
    Group-Object Count | Sort Count -Descending | Select-Object -First 1
} 
```

用逗号测量行数：

```
ls | select -First 10 |
% { 
    $_.FullName;
    cat $_ | Select-String `, -AllMatches | 
    Select-Object LineNumber, @{ n = "Count"; e = { $_.Matches.Count }} |
    Measure-Object Count
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:18:54.257

您可以执行以下操作，将相关数据块打包到每个文件的自定义对象中：

```
ls | select -First 10 |
% { 
    $numLines = 0
    $grouped = cat $_ `
               |%{ $numLines++; $_ }  `
               | Select-String ',' -AllMatches `
               | Select-Object LineNumber, @{ n = "Count"; e = { $_.Matches.Count }} `
               | Group-Object Count `
               | sort Count -Desc

    [PsCustomObject] @{
         File = $_.FullName
         TopCommaCount = [int] $grouped[0].Name
         TopCommaCountLines = [int] $grouped[0].Count
         TotalLines = $numLines
     }
} 
```

# html - 使 DIV 可扩展

> ID：14969933
> 
> 赞同：3
> 
> 时间：2013-02-19T23:59:31.053
> 
> 标签：html, css, twitter-bootstrap

我有一个 div，它包含一个动态填充的段落。有时段落是 20 行，有时是 3 行。

我想设置一个高度限制，如果 div 大于此高度限制（由于段落中有更多行），它将缩小到仅显示 3 行文本，然后有一个“查看更多”按钮，它将根据请求展开和/或折叠 div 以显示段落中的剩余行。

```
<div class="hero-unit">
  <h1>Product Description</h1>
  <p>{{paragraph}}</p>
</div> 
```

关于如何尽可能轻松地做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T00:32:03.747

您可以使用一些简单的 Javascript（不需要 jQuery）和一些 CSS 类来做到这一点。为了简化设计，假设设置了最小和最大高度。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/NXB2g/)]]]

脚本：

```
document.getElementById( 'slide' ).addEventListener( 'click', function() {
    var body = document.getElementById( 'slide-body' );
    if( body.className == 'expanded' ) {
        body.className = '';
        document.getElementById( 'more' ).textContent = 'more...';
    } else {
        body.className = 'expanded';
        document.getElementById( 'more' ).textContent = 'less...';
    };
} ); 
```

HTML：

```
<div id="slide">
    <div id="slide-body">
    A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. A really long paragraph. 
    </div>
    <div id="more">more...</div>
</div> 
```

CSS：

```
#slide {
    border: 1px solid black;
}
#slide-body{
    height: 55px;    
    overflow: hidden;
    transition:             height 500ms ease;
        -moz-transition:    height 500ms ease;
        -ms-transition:     height 500ms ease;
        -o-transition:      height 500ms ease;
        -webkit-transition: height 500ms ease;
}
.expanded {
    height: 150px !important;
}
#more {    
    cursor: pointer;
    text-align: right;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T00:36:17.557

如果您只想要 3 行，请注意这意味着高度应该是`3*line-height`. 然后你可以这样做：

**HTML**

```
<div class="hero-unit">
  <h1>Product Description</h1>
  <p>...</p>
  <a>More</a>
</div> 
```

**CSS**

```
p {
    line-height: 18px;
    height: 54px;
    overflow: hidden;
} 
```

`overflow: hidden`将隐藏超出容器边界的内容。

**jQuery**

然后我们切换高度约束。

```
$('a').click(function() {
    var p = $('a').prev('p')
    var lineheight = parseInt(p.css('line-height'))
    if (parseInt(p.css('height')) == lineheight*3) {
       p.css('height','auto');
       $(this).text('Less')
    } else {
       p.css('height',lineheight*3+'px');
       $(this).text('More')
    }
}); 
```

见[演示](http://jsfiddle.net/zqsfx/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:05:22.943

您可能想尝试一些类似 adnbutton.com 查看代码的方法。我认为这就是你想要做的。如果您只想在超过 3 行时执行此操作，则必须使用 jQuery 等执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:19:59.570

就我个人而言，我发现最好的方法是设置一个最大高度和溢出：自动；。通过这种方式，它可以保持足够小以适合三行，或者轻松扩展到设定的高度以便为段落的其余部分提供适当的住宿。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T00:20:22.820

简单的解决方案是固定高度。

```
<div class="hero-unit">
  <h1>Product Description</h1>
  <p>{{paragraph}}</p>
</div> 
```

正如您确定至少会有一个`<h1>`（ ps：拥有多个*标签**不是一个好主意`<h1>`*）并且`<p>`，我们可以确定高度大约是，比如说`100px`。

第一种简单的方法是设置固定高度：

```
.hero-unit {height: 100px; overflow: hidden;} 
```

这会突然削减内容。如果您需要更好的东西，您可以继续放置从透明变为白色的图像。说，像这样：

```
.hero-unit {height: 100px; overflow: hidden; position: relative;}
.hero-unit img.fade {position: absolute; bottom: 0;} 
```

因此，这种技术不会突然剪切内容，而是会产生平滑的淡入淡出效果。

最后一个是使用插件。您可以选择显示完整内容并提供滚动条，或者在一些用户交互后显示。如果您更喜欢第一个，请选择[jScrollPane](http://jscrollpane.kelvinluck.com/)。或者，如果您更喜欢后者，请选择[dotdotdot](http://dotdotdot.frebsite.nl/)，或者以下脚本可能会有所帮助：

```
var p = $('.hero-unit p');
var divh = $('.hero-unit').height();
while ($(p).outerHeight() > divh) {
    $(p).text(function (index, text) {
        return text.replace(/\W*\s(\S)*$/, '...');
    });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T00:22:02.790

[http://jsfiddle.net/zRjdD/2/](http://jsfiddle.net/zRjdD/2/)

```
$('.hero-unit').each(function () {
    var ht = $(this).height();
    if (ht > '200') {
        var button = $('<span class="btn">Show all</button>');
        $(this).children('p').css('height', '50px');
        $(this).append(button);
    }
});

$('.btn').on('click', function () {
    $(this).hide();
    $(this).prev('p').css('height', 'auto');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-10T06:14:26.490

这是使用纯 javascript、html 和 css 的解决方案。

许多答案的问题是，即使文本小于限制，也会给出最大高度。因此，包含文本的元素将始终具有固定的高度，即使在不需要时也是如此。

此代码在不需要时不使用最大高度参数，即如果文本不超过限制，则它呈现具有默认高度而不是固定高度的文本。仅当文本超出限制时，才会应用最大高度。同样，“显示更多”仅在需要时才显示。

这是[演示](http://jsfiddle.net/PratikPatel/zqsfx/68/)

**HTML**

```
<div class="hero-unit">
  <h1>Product Description</h1>
    <div id='tagList'>this is really long text; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; this is really long text ; 
    </div>   

    <div id="toggleExpandBtn" style = "text-align:right">More</a>
</div> 
```

**Javascript**

```
window.onload = function(){
    var tagList = document.getElementById('tagList')
    var style = window.getComputedStyle(tagList)
    var lineheight = parseInt(style.getPropertyValue('line-height'));
    var height = parseInt(style.getPropertyValue('height'));
    tagList.style.height = 'auto';
    if (height < lineheight*3) {
        document.getElementById('toggleExpandBtn').style.display = 'none';
    }
    else{
        tagList.style.height = lineheight*3 + 'px';
        document.getElementById('toggleExpandBtn').style.display = 'inline';
    }
}

document.getElementById('toggleExpandBtn').addEventListener('click',function(){
     var tagList = document.getElementById('tagList')
     var style = window.getComputedStyle(tagList)
     var lineheight = parseInt(style.getPropertyValue('line-height'));
     var height = parseInt(style.getPropertyValue('height'));
     if (height == lineheight*3) {
        tagList.style.height = 'auto';
        document.getElementById('toggleExpandBtn').textContent = 'Less';
     } else {
        tagList.style.height = lineheight*3 + 'px';
        document.getElementById('toggleExpandBtn').textContent = 'More';
     }
}); 
```

**CSS**

```
#tagList {
    line-height: 18px;
    overflow: hidden;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-09T11:32:39.360

如果您可以使用 bootstrap，请查看 bootstrap.javascript.collapse，您会找到类似我写过的简单快速的解决方案：http: [//getbootstrap.com/javascript/#collapse](http://getbootstrap.com/javascript/#collapse)

```
<div class="collapse" id="collapseExample">
<div class="hero-unit collapse" id="collapseHeroeUnit">
  <h1>Product Description</h1>
  <p>{{paragraph}}</p>
</div>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
  Expand the div
</button> 
```

# php - PHP 中的简写 IF 语句

> ID：14969936
> 
> 赞同：-1
> 
> 时间：2013-02-19T23:59:41.807
> 
> 标签：php, arrays, if-statement, ternary

我想知道以下是否可能。我希望我在下面写的 if 语句在一行（三元）中。

我想在 cURL 的数组中使用三元（速记 php 代码）。

表单数据示例：

```
$_POST['data'] = 'sometextrighthereisgood:this is what we want"; //user input example. 
```

如果声明：

```
if(isset($_POST['data']))
{
$string = explode(':', $_POST['data']);
$string = $string[1]; //contains "this is what we want"
}
else
{
$string = NULL;
} 
```

数组示例：

```
$arr = array('text' => $string); //example for use in the array. 
```

如果可能的话，有什么想法吗？

亲切的问候亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:04:30.563

试试这个：

```
list(,$string) = isset($_POST['data']) 
               ? explode(':', $_POST['data']) 
               : array(null,null)
               ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:12:42.817

像这样的 IMO 微优化将使您的代码不可读，如果`:`字符串中不包含 no 会发生什么，那么您将`Undefined index`在尝试从该数组索引中读取时得到一个。

如果您不能 100% 确定某个值是您期望的值，则需要检查它。您可以进行次级检查，但值得吗？

```
<?php
$data = 'sometextrighthereisgood:this is what we want';

if(isset($data)){
    $string = explode(':',$data);
    $string = isset($string[1]) ? $string[1] : NULL;
}else{
    $string = NULL;
}
echo $string; //this is what we want
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:19:29.017

您的代码有一个问题。展开后，如果原始字符串中没有“:”，PHP 可能会在该行显示通知或错误：

```
$string = $string[1] 
```

因为`$string[1]`可能没有定义。因此，您可以在分配之前检查它：

```
$string = (sizeof($string) >= 2 ? $string[1] : null); 
```

其他解决方案是[忽略通知消息](http://us3.php.net/manual/en/language.operators.errorcontrol.php)：

```
$string =@ $string[1] 
```

正如 zerkms 所说，这是一个丑陋的解决方案和不好的做法，因为您没有太多的控制权（因为它忽略了任何级别的错误、通知等）。所以，避免它。

而且，对于这个`if`问题。我个人认为使用您使用的方式非常好，它更干净，更容易理解。无论如何，使用三元，你可以使用类似的东西：

```
$string = (isset($_POST['data']) ? explode(':', $_POST['data'], 2) : null);
$string = ($string != null && sizeof($string) >= 2 ? $string[1] : null); 
```

# sql - 超过 50 个连接的查询是否很慢？

> ID：14969941
> 
> 赞同：0
> 
> 时间：2013-02-20T00:00:26.083
> 
> 标签：sql, sql-server, oracle, postgresql

我正计划使用 EAV 设计开发一个应用程序。我对EAV和第六范式做了很多研究。我什至与工作中的人交谈过，他们说如果你关心自己的理智，请避免这两种方法。我有创建包含一千多列的表的想法，但根据这个[问题](https://stackoverflow.com/questions/14949378/what-is-the-performance-of-cubrid-with-a-1000-columns-with-indexes)，这可能不是一个好主意。所以我想做的不是在一个表中创建一千列，而是创建一千个“一列”表。这将使我能够将所有列分成“一列”表。这会给我最大的灵活性，但我担心性能会受到很大影响。

*   我的问题是：50 个内部连接（一对一）的查询是否非常慢？该数据库将为公共网站提供动力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:44:09.560

这听起来像是在关系模型之外更好地解决的问题 - 使用`xml`, `json`, 数组值或`hstore`字段，或使用针对此类工作优化的键/值或列存储。

看：

*   [这个 DBA.SE 帖子](https://dba.stackexchange.com/q/27057/)
*   [数据库设计 - 我应该使用 30 列还是 1 列来包含 JSON/XML 形式的所有数据？](https://stackoverflow.com/q/13294003/398670)
*   [数据库中的数据库（表设计）](https://stackoverflow.com/q/12131443/398670)
*   [PostgreSQL 选择查询中的最大列数是多少](https://stackoverflow.com/questions/12606842/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:22:30.710

我在 postgresql 中遇到了实际的默认限制，它是 8 个连接。任何超过 8 的东西都加入了 postgres，你就是在玩火。

更具体地说，join_collapse_limit 默认为 8。如果查询超出 join_collapse_limit 连接，则规划器拒绝重新排序连接。我怀疑计划时间相对于连接数大约为 O(n^2)（因此默认值较低）。您可以将 join_collapse_limit 增加到 1000，但是查询计划会变得非常慢。

所以，是的，在 postgres 中，超过 50 个连接可能是个坏主意。而且我敢打赌，您会在其他数据库中发现类似的限制：在任何平台上优化连接顺序可能大致为 O(n^2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T18:06:11.343

EAV 是整个应用程序的反模式。它应该只用于一小部分应用程序。看到这个： http: [//mikesmithers.wordpress.com/2013/12/22/the-anti-pattern-eavil-database-design/](http://mikesmithers.wordpress.com/2013/12/22/the-anti-pattern-eavil-database-design/)

而且，EAV 表将至少有两列，而不是一列。

不过，要回答您的问题-我们不知道。我见过加入 30 个表的查询，而且速度仍然很快。我在一张桌子上看到了非常慢的查询。一些数据库引擎（postgres）甚至不能处理大量的连接，并且一些数据库版本有硬性限制（MSSQL 有 256 个表的限制）。

没有通用的方法来回答这个问题，除了说您几乎总是应该尽可能简单地设计事物，并且使用 EAV 对许多应用程序来说是不必要的复杂性，它们往往会自然地映射到宽表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:13:21.303

我看不出问题本身。这基本上就是 Vertica 等列式数据库存储数据的方式。不过，肯定有一些考虑因素。

首先，假设您没有跨行进行原子插入、更新和删除。为此类操作管理 1000 个表将是一项挑战。

其次，用于连接的键应该是所有表的主键。我建议不要大于整数。您需要意识到这会为每列插入 4'ish 字节的开销，因此列式数据库最终可能会比列式版本大得多。在其他数据库中，这可以通过在列中进行压缩来缓解。

您还需要意识到还有其他限制，例如视图和表中允许的列数。

假设所有的表都适合内存并且它们在主键上连接，那么性能可能相当不错。

话虽如此，我不确定 1000 个单列表是否真的能得到你想要的。有许多处理宽表的网站和应用程序。很少（任何？）完全将它们分成单列。你这样做有商业原因吗？一般来说，数据库设计应该由业务需求和应用程序需求驱动，而不是由第一、第二或第六范式的概念驱动。

# android - 为什么我的 Textview 不在小部件中设置文本

> ID：14969948
> 
> 赞同：0
> 
> 时间：2013-02-20T00:01:23.940
> 
> 标签：android, loops, widget, textview, handler

我是 android 的菜鸟，我试图在一个小部件的两个文本视图中循环文本，其中包含来自 ArrayList 的文本。出于某种原因，小部件仅显示 ArrayList 中的第一个文本值，而不是循环后续值。我确定我的 Arraylist 有多个值，所以这不是问题。任何帮助是极大的赞赏。

我的代码；

```
void updateStory() {

    tickerheadline = RssReader.rssheadline.get(storyCounter);
    tickerstory = RssReader.rssstory.get(storyCounter);
    remoteViews.setTextViewText(R.id.headline, tickerheadline );
    remoteViews.setTextViewText(R.id.story, tickerstory );
    if (storyCounter==RssReader.rssheadline.size()-1){
        storyCounter = 0;
    }else{
        storyCounter++;
    }
    appWidgetManager.updateAppWidget(R.layout.widget1, remoteViews);

    mHandler.postDelayed(new Runnable() { 
         public void run() { 
           updateStory(); 
         } } ,5000);  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:43:11.253

每次更改后，您都需要通过 AppWidgetManager 更新小部件。

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
appWidgetManager.updateAppWidget(appWidgetId, remoteViews); 
```

# uitableview - 为 UITableviewcell 使用 NSMutableArray

> ID：14969950
> 
> 赞同：0
> 
> 时间：2013-02-20T00:01:31.397
> 
> 标签：uitableview, ios6, nsmutablearray, uitextfield

我正在尝试使用 NSMutableArray 来构建我的 tableview 的数据源。NSMutableArray 为空。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [self.ingredientsArray count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.ingredientsArray objectAtIndex:indexPath.row];

    return cell;
} 
```

我有一个“添加”按钮，因此用户可以在文本字段中输入他们的成分，并将其添加到数组中。加载数组没有任何问题。cell.textLabel.text = [self.ingredientsArray objectAtIndex:indexPath.row]; 有问题 但我不能把手指放在它上面。我在网站上查看过类似问题的几个答案，但它们似乎不起作用。我尝试将 numbersinrow: 方法更改为一个值，但应用程序无法编译。

然后我在视图中添加了一个对象到 NSMutablearray 确实加载了。将 numberOfRowsinSection: 方法更改为 1，并且在 cellForRowAtIndexPath: 中保持不变，我能够看到我输入的测试字符串。但这不是我想要的。

我希望用户在文本字段中输入一个字符串（成分），并将其显示在下面的 tableview 中。现在，当我向 NSMutableArray 添加字符串时，它们不会显示在 tableview 中，只有一个测试字符串存在。它们被正确添加，因为我已经对其进行了 nslog 的检查。

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:32:39.343

`NSMutableArray`新手常犯的以下错误`UITableView`

对于以下几点，如果您应该说是，

1）您已连接`UITableView`委托和数据源？即`tableView.delegate = self;`和`tableView.datasource = self;`

2) 你`NSMutableArray`是在添加对象之前分配的。

3）你能打印（NSLog）添加的对象吗`NSMutableArray`？IE`NSLog(@"Count %d",[array count]);`

`UITableView`4）添加对象后是否重新加载`NSMutableArray`？IE`[tableview reloadData];`

5）为数据源设置断点`UITableView`，它们是否调用？

# javascript - AngularJS Assoc 数组 Foreach

> ID：14969951
> 
> 赞同：3
> 
> 时间：2013-02-20T00:01:35.973
> 
> 标签：javascript, arrays, angularjs

在这个 AngularJS 关联数组（键值对数组）中，ng-repeat 无法正常工作。怎么了？

```
function TestCtrl($scope) {
   $scope.list = [];

    $scope.processSomeData = function(){
        $scope.list["testKey"]={};
        $scope.list["testKey"]["test"]="Test value";
    };
    $scope.processSomeData();
}

<div ng-app>
  <h2>Test</h2>
  <div ng-controller="TestCtrl">
        <div ng-repeat="(key,value) in list">
          {{key}}
          {{value.test}}
      </div>
    </div>
</div> 
```

[http://jsfiddle.net/ebZkg/](http://jsfiddle.net/ebZkg/)

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T00:08:18.090

您的“关联数组”应该是 Javascript**对象**而不是 Javascript 数组。您不能在 AngularJS 中将 js 数组用于键、值对/映射。

将您更改`list`为对象，它将起作用：

```
$scope.list = {}; 
```

# visual-studio - Intellisense 中的 HTML/Web 文档和 Visual Studio 中的工具提示？

> ID：14969952
> 
> 赞同：0
> 
> 时间：2013-02-20T00:01:39.460
> 
> 标签：visual-studio, tooltip

是否有任何插件或方法可以将智能提示工具提示添加到 Visual Studios Web 编辑器？

例如，查看 .aspx 网络表单，将鼠标悬停在标签上会弹出一个工具提示，其中包含有关该标签的文档信息，例如将鼠标悬停在

```
int integ = 2; 
```

在代码编辑器中将弹出基本的“表示 32 位有符号整数”。工具提示。

同样适用于 javascript（如果适用）、jQuery 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:59:43.093

请查看这些有用的工具
[http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)
[http://nuget.org/packages/jQuery.vsdoc](http://nuget.org/packages/jQuery.vsdoc)
[http://blog.credera.com/ topic/technology-solutions/microsoft-solutions/new-visual-studio-2012-features-for-javascript-developers/](http://blog.credera.com/topic/technology-solutions/microsoft-solutions/new-visual-studio-2012-features-for-javascript-developers/)
可能对您有用。

# jquery - jQuery 隐藏/显示代码在 Internet Explorer 中不起作用

> ID：14969959
> 
> 赞同：1
> 
> 时间：2013-02-20T00:01:57.640
> 
> 标签：jquery, html, internet-explorer

为什么下面的代码可以在 Chrome 和 Firefox 中运行，但在 IE 中不行？我将如何解决这个问题？

我看不到任何输出错误。

相关的 jQuery

```
<script>
$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").hide();
    $(this).parent().next(".slidingDiv").slideToggle();
    });

});
</script> 
```

相关 HTML

```
 <ul class="relatedInfoLinks">
                        <li><a class="drop show_hide" href="#drop">What are the new parts? </a>

                            <ul class="slidingDiv">
                                <li>CASR Part 61 – Flight Crew Licensing requirements</li>
                                <li>CASR Part 64 – Authorisations for non-licenced personnel to operate an aeronautical radio and taxi aircraft.  </li>
                                <li>CASR Part 141 – Pilot flight training other than certain integrated training</li>
                                <li>CASR Part 142 – Integrated and Multi crew pilot flight training </li>
                            </ul>
                        </li>

                        <li><a class="drop show_hide" href="#drop">Where can I find the new regulations?</a>
                            <ul class="slidingDiv">
                                <li>The Regulations are housed on the Com Law website and can be accessed through links on the CASA home page. </li>
                            </ul>
                        </li>
                        <li><a class="drop show_hide" href="#drop">Why is CASA introducing these new regulations?</a>
                            <ul class="slidingDiv">
                                <li>align with the International Civil Aviation Organization standards and recommended practices (making licences more transportable for our crews and benefitting local training institutions by attracting foreign pilots to train in Australia),</li>
                                <li>strengthen licensing and training requirements through the introduction of multi-crew training and flight testing for air transport licences (those required to undertake passenger services) and increased requirements for co-pilots,</li>
                                <li>improved standards for training organisations with a strong focus on flight activity and aircraft specific competency and the need for greater organisational planning through the requirement for safety and quality assurance systems,</li>
                                <li>better alignment with modern vocational education and training requirements centred on structured and competency-based training, delivered by competent and qualified instructors and assessed against clearly defined standards, and</li>
                                <li>address Australian Transport Safety Bureau recommendations through introducing requirements for ratings for low level flying and additional requirements for night time visual flying.</li>
                            </ul>
                        </li>
                        <li><a class="drop show_hide" href="#drop">Is compliance to the regulations required today?</a>
                            <ul class="slidingDiv">
                            <li>The regulations commence on 4 December 2013, therefore no immediate action is required by the aviation industry. </li>

                            <li>During this period CASA will be developing the communication and education material, building processes, amending CASA procedures manuals and developing guidance material (sample expositions, acceptable means of compliance etc.) for use by industry.
                            <ul>
                                <li>Current flight crew license holders will be transitioned to the new Part 61 licence system over a four year period. </li>

                                <li>Current flight crew training organisations will be allowed three years to comply fully with the additional requirements of Part 141 and 142.</li>
                            </ul></li>

                                <li>For existing licence holders the licence they hold on 3 December will still meet the requirements on 4 December.</li>
                            </ul>
                        </li>

                        <li><a class="drop show_hide" href="#drop">What is happening before 4 December?</a>
                            <ul class="slidingDiv">
                                <li>In the transition period CASA will be further developing the industry advisory material and delivery training and education to key industry members who will be facilitating the implementation and transition.  </li>
                            </ul>
                        </li>
                        <li><a class="drop show_hide" href="#drop">What if I want to know more?  </a>   
                            <ul class="slidingDiv">
                                <li>More detailed information can be found on the CASA website XXXXXXX and you can sign up to received updates on the transition to the new regulations. </li>
                            </ul>
                        </li>
                    </ul> 
```

完整代码（来自浏览器）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Licencing Regulations</title>
<link href="/_lib/styles/text.css" rel="stylesheet" type="text/css" media="screen, print" />
<link href="/_lib/styles/print.css" rel="stylesheet" type="text/css" media="print" />
<style type="text/css" media="screen"> 
@import url("/_lib/styles/layout_menu.css");
</style>

<!--[if gte IE 5.5]>
<style type="text/css" media="screen">@import url("/_lib/styles/ie.css");</style>
<![endif]-->

<script type="text/javascript"> 

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8070993-4']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<script type="text/javascript" src="/_lib/scripts/jquery-1.6.4.js"></script> 
</head>

<body id="secLvl">
<div id="bg">
    <div id="wrapper"> 
    <div id="header" class="overflow"> <a href="/index.htm" class="logo">CASA Connect</a>
            <div class="search">
          <form action="http://act01int013/search/search.cgi"  method="get">
          <div class="inputBox">
                <label for="search">search</label>
                <input type="text" name="query" size="20" value="" />
                  <input type="hidden" name="collection" value="casaconnect" />
                 <input type="hidden" name="form" value="simple" />
                </div>
            <input type="image" name="search2" src="/_lib/images/btn_go.gif" class="btn" />
                </form>
                <div class="user"><strong>Hi, <a href="/mylinks/?pagetitle=Licencing Regulations">test site user</a></strong><br />
                20/02/2013 12:12:06</div>
            </div> <!-- end search div -->
        </div> <!-- end header div -->
                <div class="menu">
            <ul>
                <li class="ourOrganisation"><a class="hide" href="/organisation/index.htm">Our Organisation</a> 
                    <ul>
                        <li><a href="/organisation/about/index.htm">About us</a></li>
                        <li><a href="/organisation/messages/index.htm">Director/Deputy Director messages</a></li>
                        <li><a href="/organisation/reports/index.htm">Reports</a></li>
                        <li><a href="/organisation/committees/index.htm">Committees &amp; meetings</a></li>
                    </ul>

                </li>
                <li class="casaSystems"><a class="hide" href="/systems/index.htm">CASA Systems</a>                  
                    <ul>
                        <li><a href="/systems/ess/index.htm">Aurion ESS</a></li>
                        <li><a href="/systems/trim/index.htm">TRIM</a></li>
                        <li><a href="/systems/airs/index.htm">AIRS</a></li>
                        <li><a href="/systems/fmis/index.htm">FMIS (PeopleSoft)</a></li>
                        <li><a href="/systems/fmis/index_new.htm">FMIS (TechOne)</a></li>
                        <li><a href="/systems/eap/index.htm">EAP</a></li>
                        <li><a href="/systems/fcat/index.htm">FCAT</a></li>
                        <li><a href="/working/travel/index.htm">Travel</a></li>
                        <li><a href="/systems/servicelog/timeLOG_help/index.htm">timeLOG</a></li>
                        <li><a href="/systems/bo/index.htm">SAP BusinessObjects</a></li>
                        <li><a href="/yourarea/odas/pmb/services/bcs.htm">How do I ask for a system enhancement?</a></li>
                    </ul>

                </li>
                <li class="staffHandbook"><a class="hide" href="/working/index.htm">Working @ CASA</a>

                    <ul>
                        <li><a href="/working/iwantto/index.htm">I want to know about ...</a></li>
                        <li><a href="/hr/index.htm">Human Resources</a></li>
                        <li><a href="/working/newtocasa/index.htm">New Starters</a></li>
                        <li><a href="/jobs/index.htm">Careers at CASA</a></li>
                        <li><a href="/yourarea/odas/commservices/index.htm">Communication in CASA
</a></li>
                        <li><a href="/working/travel/index.htm">Travel</a></li>
                        <li><a href="/working/property/index.htm">Property &amp; Security</a></li>
                        <li><a href="/working/awards/index.htm">Employee awards</a></li>
                    </ul>

                </li>
                <li class="itInformation"><a class="hide" href="/it/index.htm">IT Centre</a>

                    <ul>
                        <li><a href="/it/general/index.htm">General help</a></li>
                        <li><a href="/it/computers/index.htm">Computers</a></li>
                        <li><a href="/it/email/index.htm">Email</a></li>
                        <li><a href="/it/printers/ricoh/index.htm">Photocopiers/printers</a></li>                        
                        <li><a href="/it/phones/index.htm">Phones</a></li>
                        <li><a href="/it/applications/index.htm">Application Support</a></li>
                        <li><a href="/it/videoconf/index.htm">Video Conference</a></li>
                        <li><a href="/yourarea/isg/web/web.htm">Web content</a></li>
                        <li><a href="/it/unified-comms/unified-communications.htm">Unified Communications</a></li>
                    </ul>

                </li>               <li class="whatsHappening"><a class="hide" href="/happening/index.htm">What's Happening</a>
                    <ul>
                        <li><a href="/happening/clippings/index.htm">Media &amp; Newspaper Clippings</a></li>                   
                        <li><a href="/happening/noticeboard/index.htm">Noticeboard</a></li>
                        <li><a href="/happening/socialclub/index.htm">Social Club</a></li>
                        <li><a href="/happening/holidays.htm">Public holidays</a></li>
                        <li><a href="/happening/newsletters/index.htm">Publications/newsletters</a></li>
                    </ul>

                </li>
                <li class="training"><a class="hide" href="/training/index.htm">Training</a>
                    <ul>
                        <li><a href="/training/courses/schedule.htm">Course Schedule</a></li>
                        <li><a href="/training/class/class.htm">CLASS</a></li>
                        <li><a href="/training/courses/internal.htm">Internal courses</a></li>
                        <li><a href="/training/courses/external.htm">External courses</a></li>
                        <li><a href="/training/leadership.htm">Leadership &amp; Management Development</a></li>
                        <li><a href="/training/reg_tech.htm">Regulatory &amp; technical training</a></li>
                        <li><a href="/training/on-the-job-training.htm">On-the-job Training Program</a></li>
                        <li><a href="/training/policy.htm">Safety Education policies</a></li>                       
                    </ul>

                </li>
                <li class="casawary"><a class="hide" href="/casawary/index.htm">Casawary</a>
                    <ul>
                        <li><a href="/casawary/current/index.htm">Current issue</a></li>
                        <li><a href="/casawary/archive.htm">Past issues</a></li>
                        <li><a href="/casawary/search.htm">Search articles</a></li>
                    </ul>

                </li>
            </ul>
        </div>
<div class="twoColumn">
<p class="breadCrm"><a href="/index.htm">Home</a></p>
<img src="/_lib/images/menu/processes.gif" alt="" width="891" />
<div class="twoColumnRow">
<div class="twoColumnContent">

<div class="contentPad">
<!-- Start of main content -->

<h1>Licencing Regulations</h1>

                    <h2>Key information</h2>
                        <p>Must-know facts</p>
                        <ul class="relatedInfoLinks">
                            <li><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101335">Part 61  Flight crew licensing</a>
                                <ul><li class="level2"><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101339">Part 61 impact on industry</a></li></ul></li>
                            <li><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101336">Part 64  Authorisations for non-licensed personnel</a>
                                <ul><li class="level2"><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101340">Part 64 impact on industry</a></li></ul></li>
                            <li><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101337">Part 141  Pilot flight training other than certain integrated training</a>
                                <ul><li class="level2"><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101341">Part 141 impact on industry</a></li></ul></li>
                            <li><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101338">Part 142  Integrated and multi crew pilot flight training</a>
                                <ul><li class="level2"><a href="http://www.casa.gov.au/scripts/nc.dll?WCMS:STANDARD::pc=PC_101342">Part 142 impact on industry</a></li></ul></li>
                        </ul>
                    <h2>Key resources</h2>
                        <ul class="relatedInfoLinks">

                            <li><a href="/junk/cao/doc/FM_bulletin_2_print.pdf">Standards information on the CASA website</a></li>
                            <li><a href="/junk/cao/doc/FM_bulletin_2.pdf">External information on the CASA website </a></li>
                        </ul>

                    <h2>Contact Us</h2>
                        <ul class="relatedInfoLinks">
                            <li><a href="#">Project staff</a></li>
                        </ul>

                    <h2>Must-know facts</h2>
                        <ul class="relatedInfoLinks">
                            <li><a class="drop show_hide" href="#drop">What are the new parts? </a>

                                <ul class="slidingDiv">
                                    <li>CASR Part 61  Flight Crew Licensing requirements</li>
                                    <li>CASR Part 64  Authorisations for non-licenced personnel to operate an aeronautical radio and taxi aircraft.  </li>
                                    <li>CASR Part 141  Pilot flight training other than certain integrated training</li>
                                    <li>CASR Part 142  Integrated and Multi crew pilot flight training </li>
                                </ul>
                            </li>

                            <li><a class="drop show_hide" href="#drop">Where can I find the new regulations?</a>
                                <ul class="slidingDiv">
                                    <li>The Regulations are housed on the Com Law website and can be accessed through links on the CASA home page. </li>
                                </ul>
                            </li>
                            <li><a class="drop show_hide" href="#drop">Why is CASA introducing these new regulations?</a>
                                <ul class="slidingDiv">
                                    <li>align with the International Civil Aviation Organization standards and recommended practices (making licences more transportable for our crews and benefitting local training institutions by attracting foreign pilots to train in Australia),</li>
                                    <li>strengthen licensing and training requirements through the introduction of multi-crew training and flight testing for air transport licences (those required to undertake passenger services) and increased requirements for co-pilots,</li>
                                    <li>improved standards for training organisations with a strong focus on flight activity and aircraft specific competency and the need for greater organisational planning through the requirement for safety and quality assurance systems,</li>
                                    <li>better alignment with modern vocational education and training requirements centred on structured and competency-based training, delivered by competent and qualified instructors and assessed against clearly defined standards, and</li>
                                    <li>address Australian Transport Safety Bureau recommendations through introducing requirements for ratings for low level flying and additional requirements for night time visual flying.</li>
                                </ul>
                            </li>
                            <li><a class="drop show_hide" href="#drop">Is compliance to the regulations required today?</a>
                                <ul class="slidingDiv">
                                <li>The regulations commence on 4 December 2013, therefore no immediate action is required by the aviation industry. </li>

                                <li>During this period CASA will be developing the communication and education material, building processes, amending CASA procedures manuals and developing guidance material (sample expositions, acceptable means of compliance etc.) for use by industry.
                                <ul>
                                    <li>Current flight crew license holders will be transitioned to the new Part 61 licence system over a four year period. </li>

                                    <li>Current flight crew training organisations will be allowed three years to comply fully with the additional requirements of Part 141 and 142.</li>
                                </ul></li>

                                    <li>For existing licence holders the licence they hold on 3 December will still meet the requirements on 4 December.</li>
                                </ul>
                            </li>

                            <li><a class="drop show_hide" href="#drop">What is happening before 4 December?</a>
                                <ul class="slidingDiv">
                                    <li>In the transition period CASA will be further developing the industry advisory material and delivery training and education to key industry members who will be facilitating the implementation and transition.  </li>
                                </ul>
                            </li>
                            <li><a class="drop show_hide" href="#drop">What if I want to know more?  </a>   
                                <ul class="slidingDiv">
                                    <li>More detailed information can be found on the CASA website XXXXXXX and you can sign up to received updates on the transition to the new regulations. </li>
                                </ul>
                            </li>
                        </ul>
<!-- End of main content -->
</div> <!-- end contentPad div -->
</div> <!-- end twocolumncontent div -->
<div class="twoColumnLinks">
<div class="quickLinks">
<h3>Quick Links</h3>
<br />
<ul>
<li><a href="http://ess">Staff Directory</a></li>
<li><a href="/tools/index.htm">Tools of the Trade</a></li>
<li><a href="/forms/index.htm">Forms</a></li>
<li><a href="/guidance/index.htm">Workplace Guidance</a></li>
<li><a href="/yourarea/index.htm">Your Area</a></li>
<li><a href="/offices/index.htm">CASA Offices</a></li>
</ul>
</div>
<div class="myLinkssub">
<h3><strong>My</strong> Links</h3>
<ul>
<li><a href='http://casa.gov.au/'>casa.gov.au</a></li>
<li><a href='/forms/'>Forms</a></li>
<li>Custom link 3</li>
<li>Custom link 4</li>
<li>Custom link 5</li>
<li>Custom link 6</li>
<li>Custom link 7</li>
<li>Custom link 8</li>
</ul>

<a href="/mylinks/?pagetitle=Licencing Regulations" class="addMyLinks">Edit <strong>My</strong> Links</a>
</div>

</div> <!-- end twocolumnlinks div -->
</div> <!-- end twocolumnrow div -->
<script type="text/javascript"> 
$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").hide();
    $(this).parent().next(".slidingDiv").slideToggle();
    });

});
</script>
        </div> <!-- end twocolumn div -->
        <div id="footer">
            <ul>
                <li class="first"><strong>&copy; Copyright 2013 CASA</strong></li>
                <!--<li><a href="/footer/update.htm">CASAconnect updates</a></li>-->
                <li><a href="mailto:webmaster@casa.gov.au">webmaster@casa.gov.au</a></li>
                <li><a href="/footer/privacy.htm">Privacy Policy</a></li>
                <li class="last"><a href="/footer/sitemap.htm">Site Map</a></li>
            </ul>
        </div> <!-- end footer div -->
    </div> <!-- end wrapper div -->
</div> <!-- end bg div -->

<!--The following jquery code tracks pdf files -->

<script type="text/javascript"> 
jQuery(function()
{
jQuery('a[href$=".pdf"]').click(function()
            { 
             _gaq.push(['_trackEvent', 'Download', 'PDF', this.href]);

            })

});
</script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T00:06:55.690

**您的 HTML 代码无效：**

```
<a id="drop" class="show_hide" href="#drop">
  ...
<a id="drop" class="show_hide" href="#drop">
  ... 
```

它很可能不起作用，因为您复制了`id`被调用的`drop`. 每个在页面上都`id` **必须**是唯一的，否则浏览器呈现变得非常不可预测。它还解释了为什么没有 jQuery/JavaScript 错误，但没有任何效果。重复`id`的 's 从 DOM 中被丢弃，并且 jQuery 无法找到元素。

仅在页面上使用 unique `id`，或尝试将其更改为 a `class`：

```
<a class="show_hide drop" href="#drop"> ... 
```

**工作演示：http: [//jsfiddle.net/yfa32/](http://jsfiddle.net/yfa32/)**

* * *

**编辑：**

您的 HTML**仍然无效**，这导致资源管理器中的 jQuery DOM 遍历失败...

```
<ul class="relatedInfoLinks">
    <li>...</li>
    <div class="slidingDiv"> ... </div>
    <li>...</li>
    <div class="slidingDiv"> ... </div>
</ul> 
```

[根据规范](http://www.w3.org/TR/REC-html40/struct/lists.html#h-10.2)，您不能将 a`<div>`作为`<ul>`...的直接后代，只能是 a 的直接后代。将这些'更改为'。`<li>``<ul>``div``li`

**新更新的 jsFiddle：http: [//jsfiddle.net/yfa32/1/](http://jsfiddle.net/yfa32/1/)**

**在处理任何跨浏览器问题，**尤其是资源管理器问题之前，验证 HTML 是第一步。

* * *

**编辑2：**

由于修复所有 HTML 验证错误并没有解决 OP 的问题，我认为`.toggle()`由于前面的`.hide()`.

无论如何，重构代码更有意义，并且它运行更顺畅，没有任何先前的闪烁。我使用 a`.not()`来排除点击的当前目标，从而使该部分由`.toggle()`完全评估。

我自己使用非常相似的东西，它在资源管理器中运行良好......

```
$(document).ready(function () {

    $(".slidingDiv").hide();

    $('.show_hide').click(function () {
        var ele = $(this).parent().next('.slidingDiv'); //<-- this is the target
        $('.slidingDiv').not(ele).slideUp(); //<-- closes everything else except the target
        ele.slideToggle(); //<-- toggles the target
    });

}); 
```

**演示：http: [//jsfiddle.net/yfa32/6/](http://jsfiddle.net/yfa32/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:13:30.957

确保你包括你的：[http ://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)

```
 <!DOCTYPE html><html><head>  <style>  div { background:#def3ca; margin:3px; width:80px;  display:none; float:left; text-align:center; }  </style>  <script src="http://code.jquery.com/jquery-latest.js"></script></head><body>   <button id="showr">Show</button>  <button id="hidr">Hide</button>  <div>Hello 3,</div>   <div>how</div>  <div>are</div>  <div>you?</div><script>$("#showr").click(function () {  $("div").first().show("fast", function showNext() {    $(this).next("div").show("fast", showNext);  });}); $("#hidr").click(function () {  $("div").hide(1000);});</script> </body></html> 
```

在这里测试它：

[http://api.jquery.com/show/](http://api.jquery.com/show/)

# javascript - jQuery单击事件多次触发

> ID：14969960
> 
> 赞同：332
> 
> 时间：2013-02-20T00:02:17.397
> 
> 标签：javascript, jquery, click, jquery-events

我正在尝试用 Javascript 编写一个视频扑克游戏，以此来了解它的基础知识，但我遇到了一个问题，即 jQuery click 事件处理程序多次触发。

它们附在用于下注的按钮上，并且在游戏期间第一手下注时效果很好（仅触发一次）；但是在下注秒手时，每次按下下注或下注按钮时，它都会触发两次点击事件（因此每次按下正确的金额都会下注两次）。总的来说，当按下一个下注按钮时，点击事件被触发的次数遵循这种模式——序列的*第 i项是从游戏开始的**第 i*手下注：1、2、4 , 7, 11, 16, 22, 29, 37, 46，这似乎是 n(n+1)/2 + 1 对于任何值 - 我不够聪明，无法弄清楚，我使用了[OEIS](http://oeis.org/) . :)

这是带有正在执行的单击事件处理程序的函数；希望它很容易理解（如果没有，请告诉我，我也想在这方面做得更好）：

```
/** The following function keeps track of bet buttons that are pressed, until place button is pressed to place bet. **/
function pushingBetButtons() {
    $("#money").text("Money left: $" + player.money); // displays money player has left

    $(".bet").click(function() {
        var amount = 0; // holds the amount of money the player bet on this click
        if($(this).attr("id") == "bet1") { // the player just bet $1
            amount = 1;
        } else if($(this).attr("id") == "bet5") { // etc.
            amount = 5;
        } else if($(this).attr("id") == "bet25") {
            amount = 25;
        } else if($(this).attr("id") == "bet100") {
            amount = 100;
        } else if($(this).attr("id") == "bet500") {
            amount = 500;
        } else if($(this).attr("id") == "bet1000") {
            amount = 1000;
        }
        if(player.money >= amount) { // check whether the player has this much to bet
            player.bet += amount; // add what was just bet by clicking that button to the total bet on this hand
            player.money -= amount; // and, of course, subtract it from player's current pot
            $("#money").text("Money left: $" + player.money); // then redisplay what the player has left
        } else {
            alert("You don't have $" + amount + " to bet.");
        }
    });

    $("#place").click(function() {
        if(player.bet == 0) { // player didn't bet anything on this hand
            alert("Please place a bet first.");
        } else {
            $("#card_para").css("display", "block"); // now show the cards
            $(".card").bind("click", cardClicked); // and set up the event handler for the cards
            $("#bet_buttons_para").css("display", "none"); // hide the bet buttons and place bet button
            $("#redraw").css("display", "block"); // and reshow the button for redrawing the hand
            player.bet = 0; // reset the bet for betting on the next hand
            drawNewHand(); // draw the cards
        }
    });
} 
```

如果您有任何想法或建议，或者我的问题的解决方案是否类似于此处的另一个问题的解决方案，请告诉我（我查看了许多类似标题的线程，但没有找到可行的解决方案为了我）。

* * *

## 回答 #1

> 赞同：601
> 
> 时间：2013-02-20T22:31:18.113

要确保一次单击操作，请使用以下命令：

```
$(".bet").unbind().click(function() {
    //Stuff
}); 
```

* * *

## 回答 #2

> 赞同：432
> 
> 时间：2014-01-02T10:56:07.823

`.unbind()`已弃用，您应该改用该[`.off()`](http://api.jquery.com/off/)方法。只需`.off()`在您致电之前立即致电`.on()`。

这将删除所有事件处理程序：

```
$(element).off().on('click', function() {
    // function body
}); 
```

仅删除已注册的“点击”事件处理程序：

```
$(element).off('click').on('click', function() {
    // function body
}); 
```

* * *

## 回答 #3

> 赞同：165
> 
> 时间：2014-06-14T09:21:47.553

## [。一（）](http://api.jquery.com/one/)

更好的选择是**[`.one()`](http://api.jquery.com/one/)**：

> 每个事件类型的每个元素最多执行一次处理程序。

```
$(".bet").one('click',function() {
    //Your function
}); 
```

* * *

如果有多个类，每个类都需要点击一次，

```
$(".bet").on('click',function() {
    //Your function
    $(this).off('click');   //or $(this).unbind()
}); 
```

* * *

## 回答 #4

> 赞同：104
> 
> 时间：2015-03-19T18:38:25.163

如果您发现 .off() .unbind() 或 .stopPropagation() 仍然无法解决您的特定问题，请尝试使用[.stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/)在您只想处理您的事件而没有任何冒泡且没有冒泡的情况下效果很好影响已经处理的任何其他事件。就像是：

```
$(".bet").click(function(event) {
  event.stopImmediatePropagation();
  //Do Stuff
}); 
```

成功了！

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-02-20T00:03:58.923

如果您在每次“点击”时调用该函数，那么它会在每次调用时**添加**另一对处理程序。

使用 jQuery 添加处理程序与设置“onclick”属性的值不同。可以根据需要添加任意数量的处理程序。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-10-28T07:34:43.803

一个事件在被多次注册时会触发多次（即使是同一个处理程序）。

例如`$("ctrl").on('click', somefunction)`，如果每次页面部分刷新时都执行这段代码，那么每次都会注册事件。因此，即使 ctrl 仅被单击一次，它也可能多次执行“somefunction” - 它执行多少次取决于它被注册了多少次。

对于在 javascript 中注册的任何事件都是如此。

**解决方案：**

确保只调用一次“on”。

出于某种原因，如果您无法控制架构，请执行以下操作：

`$("ctrl").off('click'); $("ctrl").on('click', somefunction);`

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-03-19T23:49:08.077

```
$('.bed').one(function(){ }) 
```

文件：

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-20T05:22:16.463

我们必须`stopPropagation()`为了避免 Clicks 触发事件的次数过多。

```
$(this).find('#cameraImageView').on('click', function(evt) {
   evt.stopPropagation();
   console.log("Camera click event.");
}); 
```

它防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。此方法不接受任何参数。

我们可以`event.isPropagationStopped()`用来确定这个方法是否被调用过（在那个事件对象上）。

此方法也适用于使用 trigger() 触发的自定义事件。请注意，这不会阻止同一元素上的其他处理程序运行。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-09-18T09:58:44.763

由于标记，我遇到了问题。

HTML：

```
<div class="myclass">
 <div class="inner">

  <div class="myclass">
   <a href="#">Click Me</a>
  </div>

 </div>
</div> 
```

jQuery

```
$('.myclass').on('click', 'a', function(event) { ... } ); 
```

您注意到我在 html 中有两次相同的类“myclass”，因此它为每个 div 实例调用 click。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-07-27T19:44:10.517

当我处理这个问题时，我总是使用：

```
$(".bet").unbind("click").bind("click", function (e) {
  // code goes here
} 
```

这样我就可以在同一笔划中解绑和重新绑定。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-08-08T06:19:26.880

更好的选择是使用[off](http://api.jquery.com/off/)

```
<script>
function flash() {
  $("div").show().fadeOut("slow");
}
$("#bind").click(function() {
  $( "body" )
    .on("click", "#theone", flash)
    .find("#theone")
      .text("Can Click!");
});
$("#unbind").click(function() {
  $("body")
    .off("click", "#theone", flash)
    .find("#theone")
      .text("Does nothing...");
});
</script> 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-09-08T07:22:51.827

所有关于 .on() 和 .one() 的东西都很棒，jquery 也很棒。

但有时，您希望用户不允许点击更明显一点，在这种情况下，您可以执行以下操作：

```
function funName(){
    $("#orderButton").prop("disabled", true);
    //  do a bunch of stuff
    // and now that you're all done
    setTimeout(function(){
        $("#orderButton").prop("disabled",false);
        $("#orderButton").blur();
    }, 3000);
} 
```

你的按钮看起来像：

```
<button onclick='funName()'>Click here</button> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-10-10T07:40:04.917

发生这种情况是因为特定事件多次绑定到同一个元素。

对我有用的解决方案是：

使用方法杀死所有附加的事件`.die()`。

然后附加您的方法侦听器。

因此，

```
$('.arrow').click(function() {
// FUNCTION BODY HERE
} 
```

应该：

```
$('.arrow').die("click")
$('.arrow').click(function() {
// FUNCTION BODY HERE
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-26T19:26:54.680

就我而言，我使用的是“代表”，所以这些解决方案都没有奏效。我相信是通过ajax调用多次出现的按钮导致了多次点击问题。解决方案使用超时，因此仅识别最后一次点击：

```
var t;
$('body').delegate( '.mybutton', 'click', function(){
    // clear the timeout
    clearTimeout(t);
    // Delay the actionable script by 500ms
    t = setTimeout( function(){
        // do something here
    },500)
}) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-01-31T12:21:54.430

```
$(element).click(function (e)
{
  if(e.timeStamp !== 0) // This will prevent event triggering more then once
   {
      //do your stuff
   }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-04-26T10:36:19.800

.one 在页面的整个生命周期内只触发一次

因此，如果您想进行验证，这不是正确的解决方案，因为当您在验证后不离开页面时，您将永远不会回来。更好用

```
$(".bet").on('click',function() 
{ //validation 
   if (validated) { 
      $(".bet").off('click'); //prevent to fire again when we are not yet off the page
      //go somewhere
    }
}); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-03-21T19:40:22.887

我在使用动态生成的链接时遇到了这个问题：

`$(document).on('click', '#mylink', function({...do stuff...});`

我发现替换`document`为`'body'`我解决了这个问题：

`$('body').on('click', '#mylink', function({...do stuff...});`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-09-04T23:40:32.333

[https://jsfiddle.net/0vgchj9n/1/](https://jsfiddle.net/0vgchj9n/1/)

为了确保事件总是只触发一次，您可以使用 Jquery .one() 。JQuery one 确保您的事件处理程序只调用一次。此外，您可以使用一个订阅事件处理程序，以便在完成当前单击操作的处理后允许进一步单击。

```
<div id="testDiv">
  <button class="testClass">Test Button</button>
</div> 
```

…</p>

```
var subscribeClickEvent = function() {$("#testDiv").one("click", ".testClass", clickHandler);};

function clickHandler() {
  //... perform the tasks  
  alert("you clicked the button");
  //... subscribe the click handler again when the processing of current click operation is complete  
  subscribeClickEvent();
}

subscribeClickEvent(); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-05-30T11:36:15.133

试试这样：

```
<a href="javascript:void(0)" onclick="this.onclick = false; fireThisFunctionOnlyOnce()"> Fire function </a> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-06-27T12:04:46.230

在我的例子中，onclick 事件被触发了多次，因为我做了一个通用的事件处理程序，比较像

```
 `$('div').on("click", 'a[data-toggle="tab"]',function () {
        console.log("dynamic bootstrap tab clicked");
        var href = $(this).attr('href');
        window.location.hash = href;
   });` 
```

变成

```
 `$('div#mainData').on("click", 'a[data-toggle="tab"]',function () {
        console.log("dynamic bootstrap tab clicked");
        var href = $(this).attr('href');
        window.location.hash = href;
    });` 
```

并且还必须为静态和动态点击制作单独的处理程序，用于静态标签点击

```
 `$('a[data-toggle="tab"]').on("click",function () {
        console.log("static bootstrap tab clicked");
        var href = $(this).attr('href');
        window.location.hash = href;
    });` 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-07-12T02:16:32.690

就我而言，我`*.js`在一个标签中两次在页面上加载了相同的文件`<script>`，因此这两个文件都将事件处理程序附加到元素。我删除了重复的声明并解决了问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-12-22T15:03:23.063

我发现的另一个解决方案是，如果您有多个类并且在单击标签时正在处理单选按钮。

```
$('.btn').on('click', function(e) {
    e.preventDefault();

    // Hack - Stop Double click on Radio Buttons
    if (e.target.tagName != 'INPUT') {
        // Not a input, check to see if we have a radio
        $(this).find('input').attr('checked', 'checked').change();
    }
}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-02-14T14:56:35.143

如果这工作正常

```
$( "#ok" ).bind( "click", function() {
    console.log("click"); 
}); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-06-12T08:39:21.117

参考[@Pointy](https://stackoverflow.com/users/182668/pointy)答案。**如果这是在循环中**，则可以通过执行以下操作来避免多次触发点击事件：

```
 $(".bet").each(function(i,item){
       $(this).on({
            click:function(){
                //TRIGGERS ONES
            if(i){
              console.log(i); 
                //DO YOUR THING HERE
            }

            }
        });

}); 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2019-05-30T11:23:56.030

下面的代码在我的聊天应用程序中对我有用，可以多次处理多个鼠标点击触发事件。 `if (!e.originalEvent.detail || e.originalEvent.detail == 1) { // Your code logic }`

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2019-10-15T06:13:58.503

Unbind () 有效，但将来可能会导致其他问题。处理程序在另一个处理程序内时会触发多次，因此请将您的处理程序放在外面，如果您想要嵌套处理程序的值，请将它们分配给一个全局变量，您的处理程序可以访问该变量。

# sql - 内部连接缺少右括号。

> ID：14969961
> 
> 赞同：0
> 
> 时间：2013-02-20T00:02:20.797
> 
> 标签：sql, oracle

```
SELECT COUNT(1)
FROM (CMEOWN.ird_no_preselection_1        AS t1
INNER JOIN CMEOWN.ird_no_preselection_1_a AS t2
ON t1.ird_number       = t2.ird_number
AND t1.location_number = t2.location_number); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:04:09.483

为什么不用括号：

```
SELECT COUNT(1)
FROM CMEOWN.ird_no_preselection_1        AS t1
INNER JOIN CMEOWN.ird_no_preselection_1_a AS t2
ON t1.ird_number       = t2.ird_number
AND t1.location_number = t2.location_number; 
```

然后试试这个（删除`AS`es）：

```
SELECT COUNT(1)
FROM CMEOWN.ird_no_preselection_1 t1
INNER JOIN CMEOWN.ird_no_preselection_1_a t2
ON t1.ird_number       = t2.ird_number
AND t1.location_number = t2.location_number; 
```

# com - 如何通过 COM 访问 TestComplete 中的 aqObject 方法？

> ID：14969962
> 
> 赞同：1
> 
> 时间：2013-02-20T00:02:40.247
> 
> 标签：com, testcomplete

具体来说，我正在尝试做相当于

```
aqObject.IsSupported(objText, "SomeProperty") 
```

通过 TestComplete COM 接口。

你怎么做到这一点？

**笔记：**

我通过 WIN32OLE 连接到 TestComplete，方法是连接到`"TestComplete.TestCompleteApplication.8"`.

可能值得指出的是，我试图要求集成按名称获取 aqObject 并返回 NULL。

sys = tc.integration.GetObjectByName("Sys") sys.Exists => true sys.Name => "Sys"

aqObject = tc.integration.GetObjectByName("aqObject") => nil

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:03:47.533

目前在 TestComplete 中是否有正在运行的测试？[这篇文章](http://support.smartbear.com/viewarticle/33145/#AutomatingTCWithIntegrationObject)说这是一个先决条件`GetObjectByName`：

> 只有在 TestComplete 正在运行测试时，您才能获取该对象。如果在 TestComplete 中没有运行测试，`GetObjectByName`将返回一个空的 Variant 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:56:14.620

如果您使用 TestComplete 的[Connected Applications](http://support.smartbear.com/viewarticle/27178/)功能，您可以通过[Connect](http://support.smartbear.com/viewarticle/38574/)类轻松访问**aqObject**对象及其成员。

# php - 尝试按日期时间排序我的列表但失败

> ID：14969964
> 
> 赞同：0
> 
> 时间：2013-02-20T00:02:40.197
> 
> 标签：php, mysql, sql-order-by

尝试按日期排序，但总是在我创建列“日期”并向其添加日期 NOT NULL 时，它将回显“0000-00-00”而不是日期。

然后我做了一些 SQL 更改

阅读文章后

```
CREATE TABLE `driptone`.`announces` (
`announcements`       text,
`updated_at`          TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`created_at`          DATETIME DEFAULT NULL,
PRIMARY KEY (created_at)
); 
```

但现在当我提交时说

MySQL 问题：列数与第 1 行的值数不匹配

我做错什么了？

```
//error_reporting(0);
$announcements = $_POST['announcement'];    
if (!empty($announcements)) {
    if (strlen($announcements) > 10) {
        $date = date("Y/m/d");
        $sql="INSERT INTO announcements (message, date_time) VALUES ('$announcements,$date')";
        if (!mysql_query($sql))
        die('MySQL problem:'.mysql_error());
    } else {
    echo 'Need to be atleast 10 characters long';
    }
} else {
echo 'Fields are empty';
}
$queryPerson = mysql_query("SELECT * FROM announces ORDER BY created_at DESC") or die(mysql_error());
while($row = mysql_fetch_assoc($queryPerson) ) {
 echo $row['announcements'] . ' ' . $row['created_at'] . '<br /><br /><br />';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:06:16.673

```
$sql="INSERT INTO announcements (message, date_time) VALUES ('$announcements,$date')"; 
```

您必须用引号分隔值，不能将它们放在一个引号中

```
VALUES ('$announcements','$date')"; 
```

此外，您的代码中的表名和列名不正确。

* * *

还要取 created_at 字段的主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:06:22.563

`'$announcements,$date'`应该`'$announcements','$date'`是。

不过，请使用[`mysqli`](http://php.net/manual/en/book.mysqli.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:07:08.277

这是因为`VALUES ('$announcements,$date')`被认为是一个字符串。

改写为：`VALUES ('$announcements', '$date')`.

另外我建议切换到[PDO](http://php.net/manual/en/mysqlinfo.api.choosing.php)，因为 mysql 驱动程序非常过时。您的代码非常不安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:07:45.957

首先，如果要按 created_at 日期排序，则需要在该列上建立索引。

其次，您会收到该错误，因为您试图插入名为的列`message`，并且`date_time`当您的表结构具有这些名为`announcements`and的字段时`created_at`。您需要使用正确的列名。

第三，您需要在要插入的每个值周围加上单引号，而不是整个值组。

# python - Django 将 User.groups ManyToManyField 表示为表单中的选择

> ID：14969969
> 
> 赞同：0
> 
> 时间：2013-02-20T00:03:13.510
> 
> 标签：python, django

对于我的应用程序，我使用用户组来表示一种用户类型。在我的特定情况下，用户只能在**一个组**中。在实施中，我有两个选择：

1.  将 ManyToMany 覆盖为 ForeignKey
2.  在我的表单上将 ManyToMany 表示为 MultipleChoiceField，只接受 1 个提交，然后从那里开始。

我选择了选项 2，因为有时让一个用户成为 2 个组的一部分对测试很有用（只是方便）。我认为两者在实施方面没有区别（但您的建议值得赞赏）。

在我看来，然后我编写代码将两者关联起来（这是 UserProfile 扩展类中的 ManyToMany） - 我不确定这是否有效。

我遇到的主要错误是表单不允许验证，并说 ManyToMany 需要一个“值列表”才能继续。

我有以下一组代码：

*表格.py*

```
from django.forms import ModelForm, Textarea
from django.contrib.auth.models import User, Group
from registration.models import UserProfile
from django import forms
from django.db import models

class RegistrationForm(ModelForm):
    class Meta:
        model = User
        fields = ('username', 'password', 'email', 'first_name', 'last_name', 'groups')
        widgets = {
            'groups': forms.Select,
            'password': forms.PasswordInput,
        #    'text': Textarea(attrs = {'rows': 3, 'class': 'span10', 'placeholder': 'Post Content'}),
        }

    def __init__(self, *args, **kwargs):
        super(RegistrationForm, self).__init__(*args, **kwargs)
        self.fields['groups'].label = 'Which category do you fall under?' 
```

*视图.py*

```
def get_registration(request):
    if request.method == 'POST':
        register_form = RegistrationForm(request.POST)
        company_form = CompanyRegistrationForm(request.POST, request.FILES)

        if register_form.is_valid() and company_form.is_valid(): # check CSRF
            if (request.POST['terms'] == True):
                new_user = register_form.save()
                new_company = company_form.save()

                new_profile = UserProfile(user = user, agreed_terms = True)
                new_profile.companies_assoc.add(new_company)
                new_profile.save()

                return HttpResponseRedirect(reverse('companyengine.views.get_company'))
        return render(request, 'registration/register.html', { 'register_form': register_form, 'company_form': company_form } )

    else:
        first_form = RegistrationForm
        second_form = CompanyRegistrationForm
        return render(request, 'registration/register.html', { 'register_form': register_form, 'company_form': company_form } ) 
```

和*templates.html*

```
<h2>Sign Up</h2>
<form action="/register" method="POST" enctype="multipart/form-data">{% csrf_token %}
    <p>{{ register_form.non_field_error }}</p>
    {% for field in register_form %}
    <div class="control-group">
        {{ field.errors }}
        <label class="control-label">{{ field.label }}</label>
        <div class="controls">
            {{ field }}
        </div>
    </div>
    {% endfor %}

    <div id="company_fields">
        <p>{{ register_form.non_field_error }}</p>
        {% for field in company_form %}
        <div class="control-group">
            {{ field.errors }}
            <label class="control-label">{{ field.label }}</label>
            <div class="controls">
                {{ field }}
            </div>
        </div>
        {% endfor %}
    </div>

    <label><input type="checkbox" name="terms" id="terms"> I agree with the <a href="#">Terms and Conditions</a>.</label>
    <input type="submit" value="Sign up" class="btn btn-primary center">
    <div class="clearfix"></div>
</form> 
```

一切似乎都加载得很好。但是表单不会通过 is_valid() 因为 Groups 字段需要“值列表”。我见过其他人问如何解析来自 TextField/TextArea 的信息，但我不明白为什么我需要拆分我的信息，因为它只有 1。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:07:00.243

# 首选解决方案

首先，我认为您应该重新考虑使用 M:M 关系来表示 1:M 关系。很有可能在某些情况下用户获得多个组，这可能会导致您的代码在稍后阶段出现错误，这些错误很难追踪。

由于您已经在使用 UserProfile 类，我会在用户配置文件模型上放置一个外键，这将提供应该存在的数据结构的准确表示（即使这意味着在测试时登录和注销）。

## 更新

你可以通过改变模型来做到这一点：

```
class UserProfile(models.Model):
    # existing fields here
    single_group = models.ForeignKey(Group) 
```

如果您有大量使用现有用户组关系的现有代码，那么这是一个不太实用的解决方案。但是，如果您确实需要强制执行此限制（每个用户/用户配置文件一组），那么可以这样做。

# 解决您的具体问题

如果出于某种原因，您认为我上面的评论不合适（我不知道您的代码存在的具体情况）...

我认为您遇到的问题是由于选择小部件将单个项目返回到表单，而 SelectMultiple 将返回值列表。由于表单需要一个列表，这就是您的问题所在。

我建议对 SelectMultiple 小部件进行子类化，以便它实际上呈现为表单上的选择单，但仍使用现有逻辑返回列表。

这是 SelectMultiple Widget 中的当前渲染函数：

```
class SelectMultiple(Select):
    def render(self, name, value, attrs=None, choices=()):
        if value is None: value = []
        final_attrs = self.build_attrs(attrs, name=name)
        output = [u'<select multiple="multiple"%s>' % flatatt(final_attrs)]
        options = self.render_options(choices, value)
        if options:
            output.append(options)
        output.append('</select>')
        return mark_safe(u'\n'.join(output)) 
```

如果您按如下方式对渲染方法进行子类化并覆盖：

```
class CustomSelectSingleAsList(SelectMultiple):
    def render(self, name, value, attrs=None, choices=()):
        if value is None: value = []
        final_attrs = self.build_attrs(attrs, name=name)
        output = [u'<select %s>' % flatatt(final_attrs)] # NOTE removed the multiple attribute
        options = self.render_options(choices, value)
        if options:
            output.append(options)
        output.append('</select>')
        return mark_safe(u'\n'.join(output)) 
```

这将呈现一个选择单，但检索项目列表。

然后在您的表单元中，只需使用您的新自定义类：

小部件 = { 'groups': myforms.CustomSelectSingleAsList, 'password': forms.PasswordInput, # 'text': Textarea(attrs = {'rows': 3, 'class': 'span10', 'placeholder': '发布内容'}), }

# 选择

或者，您可以覆盖 Select 小部件以返回列表：

```
class SelectSingleAsList(Select):
    def value_from_datadict(self, data, files, name):
        if isinstance(data, (MultiValueDict, MergeDict)):
            return data.getlist(name)  # NOTE this returns a list rather than a single value.
        return data.get(name, None) 
```

让我知道这些是否能解决您的问题。

# architecture - 使用 Azure 存储表作为具有多个 Worker Roles 处理的队列吗？

> ID：14969972
> 
> 赞同：4
> 
> 时间：2013-02-20T00:03:19.457
> 
> 标签：architecture, azure, azure-storage

我的应用程序每秒将通过多个 Web 角色实例接收 1000 多个请求/事务。这些角色将为跨多个存储表的每个事务写入记录（随机分布 Azure 的 500 个事务/秒限制）。现在，我需要一种可靠的方法来使用多个 Worker 角色处理/聚合这些数据，并将结果写入我的 SQL 数据库。AKA，这需要水平扩展。

我需要保留/存档存储表后处理中的所有事务，因此我可以使用一组表用于队列，并在处理它们时将它们移动到存档表中，或者也许有一种方法可以在一张桌子上做这个，不确定。

对于在我的工作角色中分配这些队列中的当前工作负载的机制，您有什么建议？显然，每个角色都必须知道其他角色在做什么，所以他们只处理无人认领的交易。我认为每个角色将从队列中检索 1000 条记录作为单个工作负载，并且多个工作角色可能在同一个队列上工作。

我是否应该将工作角色“状态”保存在缓存中，也许在 SQL 服务器中。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T00:39:20.380

我建议您使用适当的队列服务来实现此功能，而不是尝试通过表服务来实现排队。这样您就不必实现复杂的逻辑来知道哪些记录已被处理（当您考虑容错和可能的错误时，逻辑变得困难，尤其是在事务能力非常有限的表存储等服务中）。我不会在应用程序级别尝试可靠地协调多个工作人员，考虑所有可能的故障情况并同时具有可扩展性。

例如：

1.  Web 角色接收代表事务的请求；
2.  Web 角色将数据写入多个表；
3.  Web 角色向队列服务发送一条消息，该消息表示具有某个唯一 ID（例如请求 ID，如果没有其他合适的主键）的事务。
4.  worker 角色从队列中拉取消息。
5.  对于每条消息，工作者角色从对应于消息唯一标识符的表存储中检索对象集。
6.  辅助角色根据需要聚合数据并将其写入 SQL 数据库。

笔记：

1.  使用队列服务（来自存储）或服务总线队列。
2.  在多个队列之间分散负载以实现可扩展性。
3.  确保在所有级别应用适当的处理来解决瞬时故障。
4.  处理多次处理同一消息的可能性（处理应该是幂等的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:52:13.993

我同意费尔南多的观点。请看一下我关于这个主题[的博客文章；](http://geekswithblogs.net/hroggero/archive/2012/12/27/scalable-distributed-workload-with-azure-queues.aspx)它与 Azure 队列的大规模处理有关。这是基于我所做的一个项目，其吞吐量要求比您发布的更高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T01:58:02.850

我也同意费尔南多的观点。队列服务 API 中的 GetMessages 方法可以在单个事务中将指定数量的消息出队。如果出队逻辑正确实现，您可能不必担心处理是幂等的，但它会使您的解决方案更加健壮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T07:09:55.713

您可能需要考虑以下基于 CQRS 的松散方法。

Web 角色验证事务并将其写入一个或多个队列。（如果您遇到队列限制，您可能需要以随机或循环方式写入多个队列。）请注意，队列只是一个管道或管道，用于将您的 Web 角色与工作角色和格式分离消息并不重要。我会尝试将事务建模为对象并将其序列化以获取队列消息。如果转换太大而无法写入队列消息，您可以写入表或 Blob 存储并在队列消息中引用该资源。

工作角色，轮询一个或多个队列（随机或以循环方式）并处理事务，必要时写入 SQL 和/或表存储。

这种架构的合理性允许独立扩展 Web 和工作角色并减少它们之间的依赖关系。Web 角色只需要知道如何验证和序列化事务，而不需要知道如何持久化或处理事务。

为了在工作角色端获得更高的吞吐量，可以并行提取和处理消息。Azure 队列保证一次仅由一个客户端检索一条消息（除非可见性超时）。您可以支持幂等性，假设该消息可能已部分或全部更早地处理。

# javascript - 从另一个目录启动时，我的 node.js 服务器无法工作

> ID：14969978
> 
> 赞同：1
> 
> 时间：2013-02-20T00:04:03.303
> 
> 标签：javascript, node.js

我正在尝试让我的 node.js 服务器在启动时启动。如果我在我的服务器文件夹中并输入：

```
node server.js 
```

它运行良好并启动位于同一文件夹中的 python 脚本。

但是，如果我从该目录外部或从初始化脚本运行它，如下所示：

```
node /home/servers/server.js 
```

它启动并接收呼叫，但没有按预期运行 python 脚本。

有谁知道发生了什么以及我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:06:47.890

当您运行时`node`，它会引用来自目录节点的所有文件系统调用*，*而不是其中的目录`app.js`，因此如果您尝试这样做`require('./myfile')`，`myfile.js`则需要在您正在运行的目录`node`中。

从不同的目录运行这个简单的脚本以查看它的运行情况（它运行，从[这里](http://www.dzone.com/snippets/execute-unix-command-nodejs)`ls`精心复制）：

```
var sys = require('sys')
var exec = require('child_process').exec;
function puts(error, stdout, stderr) { sys.puts(stdout) }
exec("ls -la", puts); 
```

至于您的 Python 问题，您应该开发一个经验位置来调用`app.js`，并在定位脚本时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-19T07:59:40.000

您还可以更改目录以确保您在需要的位置。只需在文件顶部添加如下内容：

`__dirname`指向包含当前文件的目录。对于这个例子，我将假设以下 repo 结构：

```
repo/
    src/
        index.js
    package.json 
```

在 index.js 里面我会放：

```
const path = require('path');

process.chdir(path.join(__dirname)); 
```

# ios - IOS拖放与缩放

> ID：14969983
> 
> 赞同：1
> 
> 时间：2013-02-20T00:04:22.150
> 
> 标签：ios, drag-and-drop

我有一个 UIView 子类，其中包含几个子视图，我想将其拖放到 UICollectionView 中包含的其他几个 UIView 之一中。当拖动开始时，我想在拖动期间将拖动的视图从其当前大小缩放到更小的尺寸（原件太大，无法方便地选择放置目标而无需先缩小它）到目前为止，我有这个：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.superview bringSubviewToFront:self];
    self.transform = CGAffineTransformMakeScale(0.3f, 0.3f);
    startLocation = ([[touches anyObject] locationInView:self]);
    startLocation = CGPointApplyAffineTransform(startLocation, self.transform);
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{  
    CGPoint pt = [[touches anyObject] locationInView:self];
    float dx = pt.x - startLocation.x;
    float dy = pt.y - startLocation.y;
    CGPoint newCenter = CGPointApplyAffineTransform (CGPointMake(self.center.x + dx, self.center.y + dy), self.transform);
    self.center = newCenter;
} 
```

这是一个开始，因为它可以按我的意愿缩放拖动的 UIView，并允许我拖动它；但是，拖动的 UIView 不会直接用鼠标指针移动（我在模拟器上运行）。当图像靠近模拟器屏幕的左上角时，鼠标指针和拖动视图是在一起的；但是当我离开屏幕右上角时，视图不再直接用鼠标指针移动；鼠标指针似乎以大约 2:1 的比例移动到拖动的 UIView 的移动。

第二个问题是，当拖动结束时，如果项目没有被丢弃，我需要在将 UIView 重新附加到其超级视图之前将其返回到其原始比例，并且还没有完全弄清楚如何做到这一点。

感谢任何帮助，包括关于更好方法的建议，如果我在这里完全偏离轨道。（我知道在隔离投放目标和投放方面还有其他工作要做，但我想我知道那里需要做什么）。

感谢您的任何指导。

正则表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:59:42.187

好的，我得到了答案并认为我应该在这里发布以防其他人需要它。感谢之前的回复。我偶然发现了以下文章：

[应用 CGAffineTransformRotate 后如何移动 UIImageView？](https://stackoverflow.com/questions/4859731/how-to-move-a-uiimageview-after-applying-cgaffinetransformrotate-to-it)

这让我想到了以下解决方案。在我的原始代码中，我将转换应用于起始位置，但没有将其应用于接触点。所以，这就是我最终解决问题的方法：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.superview bringSubviewToFront:self];
    self.transform = CGAffineTransformMakeScale(0.2f, 0.2f);
    startLocation = ([[touches anyObject] locationInView:self]);
    startLocation = CGPointApplyAffineTransform(startLocation, self.transform);
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint pt = [[touches anyObject] locationInView:self];
    if (!CGAffineTransformIsIdentity(self.transform))
        pt = CGPointApplyAffineTransform(pt, self.transform);
    float dx = pt.x - startLocation.x;
    float dy = pt.y - startLocation.y;
    CGPoint newCenter = CGPointMake(self.center.x + dx, self.center.y + dy);
    self.center = newCenter;
} 
```

因此，当且仅当变换已应用于 UIView 时，才需要将变换应​​用于触摸点。我曾在某一时刻将变换应用到接触点，但没有条件——在那种情况下，整个拖动操作开始不好，因为变换可能在接触点之前应用到接触点被移动。无论如何，上面的代码似乎已经解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:54:50.637

似乎 touchesmoved 仍在使用旧尺寸。作为一个建议，我将首先开始而不调整大小，只实现拖放。

当拖放工作时，实现调整大小。首先是开始拖动，然后是放下。分步进行，这将使您对要实现的目标有更好的感觉。

关于 2:1 的比例，我感觉这是关于你没有完全调整视图大小的变换，但我可能是错的。但请确保您使拖动视图更小，并且中间指向您的拖动点。

一些可能有帮助的参考资料是：

[http://www.edumobile.org/iphone/iphone-programming-tutorials/simple-drag-and-drop-on-iphone/](http://www.edumobile.org/iphone/iphone-programming-tutorials/simple-drag-and-drop-on-iphone/) [http://bynomial.com/blog/?p=77](http://bynomial.com/blog/?p=77)

# c# - 正则表达式匹配不以空格开头和/或以空格结尾但允许中间空格的字符串

> ID：14969984
> 
> 赞同：3
> 
> 时间：2013-02-20T00:04:28.387
> 
> 标签：c#, regex

我需要一个正则表达式来不匹配以空格开头和/或结尾但在空格之间匹配的字符串。我不是正则表达式的专家。

如果需要，我可以使用 2 个正则表达式。

**注意：`.`用于在示例中显示空格。**

匹配为假

```
 .text.
 ..text
 text..
 ..te.xt.. 
```

匹配为真

```
 text
 te..xt 
```

我想出了这个。它只匹配起始空格。

```
^(?!\s+).*$ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T00:11:39.717

您可以将`\S`字符类与`^`和`$`锚点一起使用。

```
^\S(.*\S)?$ 
```

需要可选的`.*\S`分组来匹配单个非空格字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:07:23.610

匹配你不想要的然后否定它可能更容易：

```
!Regex.IsMatch(input, @"(^\s)|(\s$)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T00:18:59.540

这种模式应该可以解决问题：

```
^\s*.*?\s*$ 
```

和用法：

```
Regex.IsMatch(input, @"^\s*.*?\s*$"); 
```

# jquery - fadeOut() 单个 div 超过多个

> ID：14969989
> 
> 赞同：0
> 
> 时间：2013-02-20T00:05:14.373
> 
> 标签：jquery, fadein, fadeout

我有三个带有“页面”类的 div。对于每个 div 都有一个“信息” div，显示有关该 div 的一些信息。

我想要实现的是，当我单击“页面”div 下的某些文本时，它将淡出，而“信息”将淡入。

即使我对 jQuery 几乎一无所知，我还是设法让它发挥作用。我的 HTML 是：

```
 <div id="content">

       <div class="page"><p class="click">Click me to open</p></div>
       <div class="info"><div class="closebut"></div></div>

       <div class="page"><p class="click">Click me to open</p></div>
       <div class="info"><div class="closebut"></div></div>

       <div class="page"><p class="click">Click me to open</p></div>
       <div class="info"><div class="closebut"></div></div>

    </div> 
```

我的jQuery是：

```
 $(document).ready(function(){
    $(".info").hide();

    $("p.click").click(function(){ 
        $(".page").fadeOut("slow", function(){ $(".info").fadeIn(); });
    });

    $(".closebut").click(function(){
        $(".info").fadeOut("slow", function(){ $(".page").fadeIn(); });
    });
}); 
```

因此，当文档加载时，jQuery 会隐藏“.info” div。当我单击“.click”段落时，“.page”将淡出，最后，“.info”将淡入。然后我有一个 X 用作关闭按钮 (.closebut) 的小图像。

一切正常。但是，当我单击第一个“p.click”时，每个“.page”都会淡出，每个“.info”都会淡入。

由于我需要 5 个或更多“.page”+“.info”，所以每次淡出/淡入单个 div 的最简单方法是什么？

我的意思是，无需在 html 中创建更多类并扩展 jQuery 代码。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:13:34.880

将每个“div 组”放在另一个 div 中。

```
<div class="parent">
       <div class="page"></div>
       <div class="info"><div class="closebut"></div></div>
       <div id="text"><p class="click">Click me to open</p></div>
</div> 
```

jQuery：

```
$("p.click").click(function(){ 
    $(this).parent().find(".page").fadeOut("slow", function(){ $(this).parent().find(".info").fadeIn(); });
}); 
```

这就是我的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:13:21.147

您可以使用 jQuery`next()`和`prev()`函数以及`parent()`.

```
$("p.click").click(function(){ 
    var p = $(this);
    p.parent().prev().prev(".page").fadeOut("slow", function(){ p.parent().prev(".info").fadeIn(); });
});

$(".closebut").click(function(){
    var but = $(this);
    but.parent(".info").fadeOut("slow", function(){ but.parent().prev(".page").fadeIn(); });
}); 
```

这是有效的，因为在事件处理程序内部，`this`指的是被点击的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T00:22:29.657

您需要获取`parent`和被`prev`点击项目的元素，所以被点击的项目是`this`

检查这个[小提琴](http://jsfiddle.net/xZZyY/)

```
$(document).ready(function(){

    $(".info").hide();

    $("p.click").click(function(){ 
        var ele = $(this); 
        $(this).fadeOut("slow", function(){
           $(this).parent().prev('.info').fadeIn(); });
    });

    $(".closebut").click(function(){
        $(this).parent().fadeOut("slow", function(){
            $(this).parent().prev('.page').fadeIn(); 

        });
    });
}); 
```

我希望这可以帮助:)

# google-cloud-datastore - 通过继承共享常用抽象模型时如何使用Objectify的注解？

> ID：14969991
> 
> 赞同：5
> 
> 时间：2013-02-20T00:05:49.243
> 
> 标签：google-cloud-datastore, objectify

目前，我有一些抽象模型类，它们对其他具体模型具有共同的行为。例如，抽象的 SearchableModel.class 可能会被其他具体模型继承。

使用 Objectify 时，我想注释 SearchableModel 类，因为它需要它自己的字段的持久性。但是，我对执行任何类型的多态查询不感兴趣，并且我不希望数据存储区中有任何类型的“SearchableModel”实体，只需要从 SearchableModel 继承的具体类的类型。我应该如何处理 @Entity/@EntitySubClass 注释？

如果我用@Entity 注释抽象类和具体类，并持久化/加载具体类的实例，它会按预期工作吗？

我知道我可以自己测试它，但是，我还没有设置 objectify。我仍在试图弄清楚它如何与我当前的模型一起使用。

关于如何组织这种依赖的任何其他建议也值得赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T00:46:25.010

*   不要使用@EntitySubclass。
*   请从您的 SearchableModel 扩展。
*   请务必将 @Entity 放在您的（顶级）具体类上。

这会给你想要的。您可以将公共字段（带有 Objectify 注释，包括 @Id/@Parent）和行为放在基类中。不会有任何数据存储多态性，每个 @Entity 都有自己的数据存储类型。

# ios - Mapview：viewForAnnotation后注释图像错误

> ID：14969992
> 
> 赞同：1
> 
> 时间：2013-02-20T00:05:58.043
> 
> 标签：ios, ios5, ios6

我的注释上的图像是第一次添加后的好。每个注释都有一个带有数字的图像。当我滚动地图并调用“viewForAnnotation”方法（第二次）并显示错误的图像时..似乎返回了错误的注释......

**查看注释方法：**

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
static NSString *identifier = @"pin";
VBAnnotationView *view = (VBAnnotationView *)[self.MapView dequeueReusableAnnotationViewWithIdentifier:identifier];
if (view == nil) {
    view = [[VBAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
}
return view; } 
```

请注意，VBAnnotationView 是我的自定义 MKAnnotationView。

如果“视图”不为零，则“dequeueReusableAnnotationViewWithIdentifier”找到的视图将返回错误的图像。当我注释掉检查是否“view == nill”时，所有注释上的图像都是正确的。

为了优化，如果注释已经存在，我会检查方法“viewForAnnotation”。取消检查注释是否已存在时，图像将正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:52:26.877

dequeueReusableAnnotationViewWithIdentifier 不知道您的注释的“正确”图像是什么。它只是给你一个使用..一旦你得到它，你仍然需要配置它，告诉它它将用于什么注释.

```
if (view == nil) {
    view = [[VBAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
}
else view.annotation=annotation; 
```

# php - 在没有定义排序规则的情况下订购 MySQL 字符串结果？

> ID：14969993
> 
> 赞同：6
> 
> 时间：2013-02-20T00:05:57.830
> 
> 标签：php, mysql, collation

假设我有以下结果：

```
Mackay
Mackay Airport
Melbourne
Melbourne Airport
Sydney
Sydney Ac
Sydney Airport 
```

我怎样才能做到让他们总是在他们的顶部订购机场？按字母顺序，例如：

```
Mackay Airport
Mackay
Melbourne Airport
Melbourne
Sydney Airport
Sydney
Sydney Ac 
```

对如何使机场更加突出有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:23:06.480

不确定以下查询是否涵盖所有情况，但它似乎适用于您的示例数据：

```
select name,
SUBSTRING_INDEX(name,'Airport',1)
as l,
LOCATE('Airport',name) as r from 
(
select 'Sydney Airport' as name
union all
select 'Sydney'
union all
select 'Sydney Ac'
union all
select '
Mackay Airport'
union all
select 'Mackay'
union all
select 'Melbourne'
union all
select 'Melbourne Airport'
)a
order by l asc, r desc 
```

用桌子看起来像

```
select name
from table1 
ORDER BY SUBSTRING_INDEX(name,'Airport',1) ASC,
LOCATE('Airport',name) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:32:05.070

似乎您不能同时按整数和字符串排序，但您可以根据“机场”是否存在来派生要排序的字符串。这很愚蠢，但它有效：

```
ORDER BY IF(name NOT LIKE '% Airport', CONCAT(name, ' Birport'), name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:08:03.017

以下查询将为您提供预期的输出（即使查询很复杂）。

```
SELECT t.name
FROM (
SELECT @num := IF(@num IS NULL, 1, @num+1) AS number, name
FROM places
ORDER BY IF ((name LIKE '% Airport'), SUBSTRING(name, 1, LOCATE(' Airport', name) - 1), name)     DESC) t
ORDER BY t.number DESC; 
```

这是示例。

[http://www.sqlfiddle.com/#!2/117b7/80](http://www.sqlfiddle.com/#!2/117b7/80)

# ruby-on-rails - Rails - 如何从 Facebook API 检索用户的 access_token

> ID：14969995
> 
> 赞同：1
> 
> 时间：2013-02-20T00:06:08.647
> 
> 标签：ruby-on-rails, ruby, facebook, access-token, facebook-access-token

当用户通过 Facebook 注册我的应用程序时，我想显示他管理的所有页面。

这就是我从 FB API 保存数据的方式：

```
 def self.create_user_from_facebook(auth_hash)
    self.create({
      :facebook_uid => auth_hash["uid"],
      :name => auth_hash["info"]["name"],
    })
  end 
```

这里我如何尝试打印出页面列表：

```
 - fbpages(@user).each do |page|
    = f.label :fbpage, value: page.identifier, :class => 'radio' do
      = f.radio_button :fbpage, page.identifier
      = link_to page.name, page.link, target: '_blank' 
```

和`fbpages`方法：

```
def fbpages(user)
    if user.fbtoken.present?
      begin
        fbpages = FbGraph::User.me(user.fbtoken).accounts
      rescue
        user.update_attribute(:fbtoken, nil)
        fbpages = nil
      end
    end
  end 
```

`fbtoken`是`access_token`。但是我怎样才能得到这个令牌？我试图打印出方法中包含的内容`auth_hash`，`create_user_from_facebook`但我没有看到**access_token**。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:20:22.420

您可以在[`FBGraph`页面](https://github.com/criso/fbgraph)上看到：

```
// code is set
// we'll send that and get the access token
graph.authorize({
    "client_id":      conf.client_id
  , "redirect_uri":   conf.redirect_uri
  , "client_secret":  conf.client_secret
  , "code":           req.query.code
}, function (err, facebookRes) {
  res.redirect('/UserHasLoggedIn');
}); 
```

它`code`包含在用户登录您的 Facebook 应用程序后获得的重定向 url 的参数中。一旦你得到这个`code`，你就可以使用这个样本。

# api - 是否可以下载 #of votes 和图像在 reddit 中的投票率？

> ID：14969999
> 
> 赞同：0
> 
> 时间：2013-02-20T00:06:35.523
> 
> 标签：api, reddit

我找到了一个在线图像抓取工具，它基本上可以从 subreddit 类别中下载所有**imgur**图像，谁能告诉我 reddit API 是否允许我还添加投票数和获得投票的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:40:10.253

是的。我相信您正在寻找的精确方法是[GET_info](http://www.reddit.com/dev/api#GET_api_info)在 api 文档中。或者，您可以使用[json 版本的 subreddit 列表](http://www.reddit.com/r/cats/.json)来获取数据。您正在寻找`score`并且如果您希望每小时平均得分增加，那么`created_utc`（避免创建）也是如此。Reddit 的某些语言也有包装器，可以使这更容易。