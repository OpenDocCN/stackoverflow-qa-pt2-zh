# StackOverflow 问答 16153000-16153999

# java - 即使我有级联，子对象也不会被删除

> ID：16153001
> 
> 赞同：1
> 
> 时间：2013-04-22T17:23:07.400
> 
> 标签：java, hibernate, jakarta-ee, jpa

为什么我删除食物时没有删除反馈？我对反馈集有以下映射。发出这样的命名查询`delete from Food where id = :id`。（是的，我在移除时设置了 id）。

```
@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name = "food_id")
private Set<Feedback> feedback; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:31:05.650

JPA CascadeType.ALL的副本[不能通过查询工作？](https://stackoverflow.com/questions/13681567/jpa-cascadetype-all-does-not-work-by-query).

JPQL 删除查询不会触发级联。

改用 EntityManager.remove()

# google-apps-script - 有没有办法与谷歌应用程序集成以读取/写入打开文档中的文本？

> ID：16153003
> 
> 赞同：0
> 
> 时间：2013-04-22T17:23:24.797
> 
> 标签：google-apps-script, google-api, google-apps

我们希望有一个与谷歌文档通信的网络应用程序，当用户点击我们网络应用程序中的按钮时，它可以查询谷歌文档以查找当前在编辑器中选择的内容并替换该文本。

有没有办法做到这一点？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:19:13.210

Now there is! At Google I/O last week they launched Google Scripts for Docs

So head back to [https://developers.google.com/apps-script/reference/document/](https://developers.google.com/apps-script/reference/document/) In order to see the documentation

Also here is the video from the I/O event: [https://developers.google.com/events/io/sessions/327928222](https://developers.google.com/events/io/sessions/327928222)

Enjoy!

# wamp - 如何使用 Wampserver 2.2e（使用 PHP 5.3.x）运行 Zend Guard Loader

> ID：16153009
> 
> 赞同：1
> 
> 时间：2013-04-22T17:23:42.130
> 
> 标签：wamp, php-5.3, zend-guard

这是我礼貌而温和的要求，如果有人知道答案，请与我分享，我关心的是：-

我真的很想用 PHP 5.3.x 运行 Zend Guard Loader，我当前的配置是：-

Wampserver 2.2e
Apache 2.2.22
PHP 5.3.13
Mysql 5.5.24
Windows XP SP3

一切都运行良好，我尽我所能运行 Zend Guard Loader 但不能。最后我检查了 Apache 错误日志，发现了这个错误：-

“无法加载 Zend Guard Loader - 它是使用配置 API220090626,NTS,VC9 构建的，而运行引擎是 API220090626,TS,VC9”

这意味着 Zend Guard Loader 是非线程安全的，而当前的 Apache 是线程安全的，那么我们该如何解决这个问题呢？有没有办法使用 PHP 5.3.x 在 Wamp 下运行 Zend Guard Loader

如果您建议我切换到任何其他 Wamp 版本或 Apache 版本，那么我可以这样做以便进行一些更改以使用 PHP 5.3.x 运行 Zend Guard Loader

非常感谢你对我这么好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-13T10:54:47.277

是的，首先到这个下载页面并为您的系统选择正确的 NTS php 包：http: [//windows.php.net/downloads/releases/archives/](http://windows.php.net/downloads/releases/archives/)

然后转到此页面并按照说明将其设置到位：[http ://www.websanova.com/blog/php/manually-adding-php-versions-to-wamp#.Uvx9lPkhDdI](http://www.websanova.com/blog/php/manually-adding-php-versions-to-wamp#.Uvx9lPkhDdI)

最好的问候，Jc。

# php - 在 Symfony2 中保存注册日期而没有隐藏字段

> ID：16153011
> 
> 赞同：0
> 
> 时间：2013-04-22T17:23:43.800
> 
> 标签：php, symfony

首先感谢您阅读并尝试帮助我。我是symfony的新手。

我有一个具有 FechaAlta (SingUpDate) 属性的实体。我想保存用户的更新日期

```
/**
 * @var date
 *
 * @ORM\Column(name="fechaAlta", type="datetime")
 */
private $fechaAlta;

/**
 * Set fechaAlta
 *
 * @return Promotor
 */
public function setFechaAlta()
{
    $this->fechaAlta = new \DateTime('now');

    return $this;
} 
```

我想知道在表单上没有隐藏字段的情况下保存此日期的最佳方法是什么。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('nombre')
        #->add('slug')
        ->add('fechaAlta')
    ;
} 
```

我尝试删除表单字段“fechaAlta”，但不断收到以下错误

```
An exception occurred while executing 'INSERT INTO Promotor (nombre, slug, fechaAlta) VALUES (?, ?, ?)' with params {"1":"Prueba","2":"prueba","3":null}: 
```

SQLSTATE [23000]：违反完整性约束：1048 列 'fechaAlta' 不能为空

在 newAction() 我调用 $promotor->setFechaAlta(); 那应该保存当前日期。

```
public function newAction()
{
    $promotor = new Promotor();

    $promotor->setFechaAlta();

    $form   = $this->createForm(new PromotorType(), $promotor);

    return $this->render('PromotorBundle:Promotor:new.html.twig', array(
        'entity' => $promotor,
        'form'   => $form->createView(),
    ));
} 
```

太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:56:30.140

您可以使用@Lighthart 解决方案，也可以使用您的实体构造函数。
使用实体构造函数的好处是，如果您在第二个控制器/动作中创建这种类型的对象并希望保持相同的行为，则无需重复自己。

```
//Your entity code
/**
 * @var date
 *
 * @ORM\Column(name="fechaAlta", type="datetime")
 */
private $fechaAlta;

public function __construct()
{
    $this->fechaAlta = new \DateTime('now');
} 
```

不要忘记从表单中删除该字段：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('nombre');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:57:12.080

默认的 symfony 模式是 newAction 创建一个发布到 createAction 的表单。

createAction 是您应该设置日期的地方：

```
public function createAction( Request $request, $id ) {
    $promotor = new Promotor();
    $promotor->setFechaAlta();

    $form   = $this->createForm(new PromotorType(), $promotor);
    $form->bind( $request );

    if ( $form->isValid() ) {
        $this->getDoctrine()->getManager()->persist( $promotor );
        $this->getDoctrine()->getManager()->flush();

    return $this->redirect( 
        $this->generateUrl( 'promotor_show', array( 'id' => $promotor->getId() ) ) 
        );
    }

    return $this->render( 'PromotorBundle:Promotor:new.html.twig'
        , array(
        )
    );
} 
```

# svn - 拒绝在 svn 中创建分支的分支

> ID：16153012
> 
> 赞同：1
> 
> 时间：2013-04-22T17:23:47.797
> 
> 标签：svn, branch

是否可以创建一个钩子，拒绝从一个分支创建一个分支的能力？
只允许从后备箱？
如果有，会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:22:52.693

是的，使用预提交挂钩是可能的，但你会后悔的。有时您可能会从一个分支创建一个分支。假设您对该分支进行了长期修复，并且想要创建一个*功能*分支。在这种情况下，您需要从您的分支中创建一个分支。

让我们来看看你的问题的实质：你是如何进行开发的？太多的站点（即多于零个）使用*原始主干*方法。这个想法是开发不是在主干上完成的。相反，您创建一个分支，在该分支上完成所有工作，然后将该分支合并到主干中，然后为下一个版本创建一个新分支。最大的问题之一是开发人员*忘记*合并到主干，并从主干创建一个新分支。从当前分支创建下一个分支要容易得多。

原始树干不是一个好的方法。这很复杂，当您接近发布时很难进行并行开发（特别是因为您不想从分支创建分支）。而且，它什么也没给你买。Trunk 应该是最后一个版本，但您可以从标签中获得相同的信息。

`HEAD`更糟糕的是，除了最后一个版本（on ）之外，trunk 无法告诉您任何信息。主干上的先前版本？你说不出来。一些文件在上次发布期间发生了变化，而另一些则没有。这就是你使用标签的原因。你也不能从主干中获取任何历史记录。是谁做出了这样的改变？您看不到更改的作者。相反，您会看到将分支合并到主干的人。

如果您使用原始的主干方法，请停止。

如果您没有采用原始的树干方法，我很高兴听到这个消息。无视上面的吐槽。

你真正想做的不是阻止分支的分支，而是限制谁可以创建分支以及他们可以在哪里创建这个分支。例如，发布分支只能由 CM 完成。功能分支可以由团队负责人创建。您可以使用命名约定来区分这些不同的分支类型，甚至可以将它们放在特殊目录下。（`branches/releases`例如与“分支/其他”）。

我有一个[预提交钩子](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)可以帮助完成这项工作。它可以限制谁可以创建一个分支，以及他们可以在哪里以及可以调用什么分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:34:22.650

在我最初的回答中，我特别说*原始的树干*方法是有缺陷的，我没有提到替代方案。我是故意这样做的，因为有很多方法。最流行的两种称为*不稳定的主干*和*基于流的开发*。

### 基于流的开发

在此，您有两个独立的流：一个*集成流*和一个*开发流*。在大多数情况下，*流*通常实现为分支。在 Subversion 中，*集成流*可以是主干。开发人员可以有多个*开发流*，这些开发流几乎可以代表任何东西。开发人员可以有一个或两个流用于基本开发。也许另一个长期功能。有些地方对每个问题都有单独的流。

典型的工作流程是：

*   开发人员从集成流（又名分支）创建开发流。
*   开发人员做他们的工作。
*   开发人员*从*集成流中变基他们的*流*。（又名从主干合并到分支）
*   开发人员完成测试，*并将*他们的开发流交付回*集成*流（也称为合并到主干）。
*   开发人员重复这个过程，直到项目完成，否则他们就死了。

这种方法在 Git 中非常常见，其中每个本地 Git 存储库都可以被认为是一个开发流，而主存储库被认为是集成流。它也常用于敏捷开发。

这种方法论始于 1990 年代的 ClearCase，然后随着 Perforce、CVS 和 Subversion 变得越来越流行而失去了它的流行度。它现在更流行，因为它在 Git 中看起来很自然。

事实上，基于 Steam 的开发早在 Sablime 就出现了。Sablime 基于 SCCS，但附加了修改请求 (MR) 系统。在 Sablime 中，当您签入更改时，必须针对一个或多个 MR。基线称为*Generic*，下一个*Generic*是通过将一组*MR*应用于前一个 Generic 来生成的。

### 不稳定的树干

不稳定的主干方法是在 2000 年左右从基于流的开发问题中产生的。一是基于流的开发涉及大量合并。另一个，实施起来似乎需要很大的动力。CM界有句俗话说，树枝就像孩子一样：有就得好好照顾，看得很仔细。

随着 CruiseControl 等持续集成系统的出现，*不稳定的主干方法开始发挥作用。*在*不稳定的主干*中，几乎所有的工作都必须在主干上完成（或某种类型的集成蒸汽）。分支在某个未定义的时间完成，您开始在当前版本上交付代码，同时希望继续在下一个版本上工作。有些网站，这是您最终提出*候选版本*的时候。在其他站点，可能是在发布*Feature Complete*的时候。基本上是在您不再需要整个开发团队都在一个版本上工作的时候。在只有几个开发人员的非常小的站点中，永远不会创建发布分支。

**顺便说一句**，这两种方法都在分支上创建和发布。这是因为在*基于流的开发*和*不稳定的主干*中，您可能会遇到一些人正在开发 2.1 版本而其他人正在开发 2.2 版本的地步。在*不稳定的主干*中，你称它为*发布分支*。在*基于流的开发*中，您只需将其称为另一个*集成流*。

两者之间的最大区别在于您何时决定添加哪些功能以及何时添加。在*不稳定的主干*中，这必须在开发周期的开始（或者可能在敏捷 Sprint 的开始）完成。您必须这样做，因为您的开发取决于实施一个变更问题，然后是下一个变更问题。

在基于流的开发中，这可以延迟到周期结束。您可以处理问题 1001、1002、1003、1004，然后决定只希望将问题 1002 和 1004 交付到集成流。

基于流的开发的主要问题以及它失去流行的原因是意识到您正在使用不再相关的代码创建流。例如，我正在处理问题 1004。问题 1001、1002 和 1003 已完成，但尚未交付，因此我正在处理不包含其他开发人员所做更改的代码库。

另外，合并很麻烦。您将遇到合并冲突，这意味着开发人员必须从开发中抽出时间来调试和测试合并。

基于流的开发还意味着在实际交付代码之前无法进行测试。您推迟交付更改的时间越晚，进行的任何类型的测试就越少。

有一些方法可以解决这些问题。敏捷开发将开发分成多个冲刺，并在每个冲刺结束时强制交付。一个版本可能包含 3 到 4 个 sprint，最后是第 5 个 sprint 进行清理。

这推动基于流的开发更像是不稳定的主干，但您仍然可以在 sprint 结束时进行选择。例如，当团队意识到编码没有按照应有的方式进行时，开发人员正在处理特定问题。可能会决定不在这个 sprint 中包含这个特定的流，并且可能会想一种新的方法来重新实现这个特性。

基于流的开发对代码审查也更友好，因为代码已提交，但尚未在*交付流中*。

不稳定的主干的主要优点是简单，并迫使开发人员在进行更改时采取*较小的措施。*一项特定的更改可能会分几个阶段实施，而不是一次全部实施。它还使持续集成和 QA 测试变得更容易，因为 QA 测试几乎可以在开发期间的任何地方进行。

*基于流的开发*更受开发人员和项目经理的欢迎。开发人员可以按照他们想要的方式进行更改，项目经理可以推迟交付哪些功能，直到发布结束。\

*不稳定的主干*更受 QA、技术主管和 CM 的欢迎。QA 可以更早地进行测试，并在急于发布之前发现问题。CM 喜欢它是因为要跟踪的分支更少，技术经理喜欢它是因为它对开发的监督更少。

这两种方法都不是*自动*的，不同的工具往往适合不同的实践。CVS 对基于流的开发毫无用处，因为分支和合并非常昂贵。*然而，它在不稳定的主干*上工作得很好。Git 非常适合*基于流的开发，但在与**不稳定的主干*一起使用时只会成为负担。

CVS、Perforce 和 Subversion 往往最适用于*不稳定的 trunk*。尽管 Subversion 分支的成本最低，但合并仍然是一个相当草率的操作。Git 倾向于使用*基于流的开发*。

# c# - 使用以下参数创建 XtraReports：（带参数的存储过程）

> ID：16153013
> 
> 赞同：0
> 
> 时间：2013-04-22T17:23:54.520
> 
> 标签：c#, stored-procedures, parameters, devexpress

我有一个与 Xtra 报告和带参数的存储过程相关的问题。

我使用 XtraReports 的时间不长，但我学到了很多东西。问题是我无法以正确的方式完成一项任务。

让我解释：

在我的数据集中，我有一个`SP_get_singleRecord`有 2 个参数`(@ID, @TYPE) /*string,int*/`，表有 6 列。

因此，我将`dataset(dataset1)`和`dataMember(SP_get_singleRecord)`添加`dataAdapter(SP_get_singleRecord_TableAdapter)`到 xtraReport。我使用向导来设置字段。

现在我转到 xtrareports 的 fieldList 上的参数部分，并添加参数`ID`as`string`和`TYPE`as `int`。

然后我转到过滤器字符串并设置如下参数： `[ID] = ?ID And [TYPE] = ?TYPE`

现在，我转到 windowsForm -> print_simplebuttonEvent_OnClick

我像这样默默地传递参数：

```
private void btn_print_Click(object sender, EventArgs e)
    {
        //convert parameters from controls
        int type = Convert.ToInt32(lookUpEdit_Type.EditValue);
        string id = lookUpEdit_id.EditValue.ToString();

        // Create a report instance
        Xtrareport report = new Xtrareport();

        // Obtain a parameter, and set its value.
        report.ID.Value = id;
        report.TYPE.Value = type;

        // Hide the Parameters UI from end-users.
        report.ID.Visible=false;
        report.TYPE.Visible = false;

        // Show the report's print preview.
        report.ShowPreview();
    } 
```

然后我收到一条错误消息，上面写着：`Error when trying to populate the datasource. The following exception was thrown: Procedure or function 'SP_getSingleRecord' expects parameter '@ID' which was not supplied.`

据此，我传递的参数从未到达存储过程。我试图在打印报告之前获得一条记录，但我不知道我在这里遗漏了什么......

*我尝试了另一种方法来做到这一点，但这涉及将“SP_getSingleRecord”更改为“SP_getALLRecords”（没有参数）。这将返回大约 6500 多条记录，然后从报告的一侧过滤它们，但这需要 9 秒，这是不可接受的......它有效，但它不是正确的方式......*

我希望我已经说清楚了。我希望你能帮助我。

提前致谢。

阿尔弗雷德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:30:53.987

好吧，事实证明我让它工作了。我不知道 devxpress 和 xtrareports 具有的一些特定功能。

这是在报告方面。*两个参数都应该是公开的。* 正如@Milen Pavlov 所说，报告不能有数据成员，但我只有数据源和数据适配器。

```
private void XtraReport1_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e) {
       spGetSingleRecord_tableadapter.Fill(
            (this.DataSource as DataSet1).spGetSingleRecord, Parameters["ID"].Value.ToString(), Convert.ToInt32(Parameters["TYPE"].Value));
// the parameters are the ones on the report, not the stored procedure.

    } 
```

并在表格方面：

```
private void button1_Click(object sender, EventArgs e) {
        XtraReport1 report = new XtraReport1();

        report.RequestParameters = false;
        report.ID.Value = lookupedit1.editvalue;
        report.TYPE.Value = lookupedit2.editvalue;
        report.ID.Visible = false;
        report.TYPE.Visible = false;

        report.ShowPreview();
        report.PrintingSystem.ExecCommand(DevExpress.XtraPrinting.PrintingSystemCommand.Parameters, new object[] { true });

    } 
```

这很有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:06:33.473

尝试这个：

*   设置连接字符串

    ```
    SP_get_singleRecord_TableAdapter.Connection.ConnectionString 
    ```

    如果你有任何

*   然后将其添加到您的按钮单击事件（到它的开头......）

    ```
    SP_get_singleRecord_TableAdapter.Fill(dataset1.Yourdatatable, Convert.ToInt32(lookUpEdit_Type.EditValue), lookUpEdit_id.EditValue.ToString()) 
    ```

*   在您的 XtraReport 上删除您的数据适配器：

    ```
    dataAdapter(SP_get_singleRecord_TableAdapter) 
    ```

*   还要确保在你的最底部`XtraReport`只`DataSet`显示（没有数据成员，没有表适配器..）

# java - 获取用户输入的值并将其显示在其他预选文本中。爪哇

> ID：16153023
> 
> 赞同：0
> 
> 时间：2013-04-22T17:24:19.967
> 
> 标签：java, printing, io, output, bluej

所以我们刚刚在我的大学计算机科学入门课程中开始使用 java。我们必须修改代码以显示“如果里氏刻度上的幅度是（用户输入的值）”“（由用户输入确定的答案”我对编程完全陌生，所以我遇到了麻烦。所以基本上它需要获取用户在对话框中输入的数字并在这两段文本之间打印出来。我们使用 BlueJ 进行编码。我们运行程序并在终端中打开答案。

这是需要编辑的代码：

```
/**
* Write a description of class Earthquake here.
*
* A class that describes the effects of an earthquake.
* @author Michael Gerhart
* @version Version 1.0, 4/22/2013
*/
public class Earthquake
{
// instance variables
private double richter;
/**
* Constructor for objects of class Earthquake
* @param magnitude the magnitude on the Richter scale
*/
public Earthquake(double magnitude)
{
// initialise instance variable richter
richter = magnitude;
}
/**
* Gets a description of the effect of the earthquake.
*
* @return the description of the effect
*/
enter code here`public String getDescription(double magnitude)
{
String r;
if (richter >= 8.0)
r = "Most structures fall";
else if (richter >= 7.0)
r = "Many buildings destroyed";
else if (richter >= 6.0)
r = "Many buildings considerably damaged; "
+ "some collapse";
else if (richter >= 4.5)
r = "Damage to poorly constructed buildings";
else if (richter >= 3.5)
r = "Felt by many people, no destruction";
else if (richter >= 0)
r = "Generally not felt by people";
else
r = "Negative numbers are not valid";
return r;
}
} 
```

这是运行程序的代码：

```
import javax.swing.JOptionPane;
/**
* Write a description of class EarthquakeTest here.
*
* A class to test the Earthquake class.
*
* @author Michael Gerhart
* @version 4/22/2013
*/
public class EarthquakeTest
{
public static void main(String[] args)
{
String input = JOptionPane.showInputDialog("Enter a magnitude on the Richter scale:");
double magnitude = Double.parseDouble(input);
Earthquake quake = new Earthquake(magnitude);
String quakeDamage = quake.getDescription(magnitude);
System.out.println(quakeDamage);
System.exit(0);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:39:03.057

我有点难以理解你在问什么，但如果我理解正确，你需要显示类似“如果震级为 3.8，被很多人感觉到，没有破坏”之类的内容。在那种情况下，你就快到了；你只需要使用字符串连接。这就像将两个字符串混合在一起组成一个字符串。

quakeDamage 已经保存了第二个文本块（在本例中，“许多人感受到，没有破坏”）。您需要另一个 String 变量来保存最终结果。尝试这样的事情：

```
String result = "If the magnitude is " + magnitude + ", " + quakeDamage;
System.out.println(result); 
```

那应该打印出整个文本。

（顺便说一下，在你尝试了一点之后，你可能想要编辑在 Earthquake 类中定义的文本，使它看起来更漂亮一些。注意“Felt”中的大写字母将出现在中间句子。）

# android - 在地理定位应用程序中存储路径的最佳做法是什么？

> ID：16153027
> 
> 赞同：1
> 
> 时间：2013-04-22T17:24:33.047
> 
> 标签：android, database, sqlite, geolocation

我正在制作一个用于公共交通地理定位的应用程序。我想在手机中存储所有的公共汽车和电车路线，以便能够在离线模式下查看。我考虑了两种可能的解决方案：

1）我现在正在使用的那个。对于每条路线，我为地图中要在道路上绘制的每个点都有一对坐标，例如：

19.893169,50.054337

19.893169,50.054340

19.893290,50.053871

19.893259,50.053730 ....

我将其存储为资产目录中的“100.kml”。因此，当我想显示 100 路公交车的路线时，我只需从资产文件 100.kml 中解析这些信息。

所以在这个解决方案中，我将拥有与路由一样多的文件，平均重量为 2-3 kb。

2）第二种解决方案是用所有这些点预填充数据库，还有停靠点等......我不确定是否值得，或者需要更多时间不断咨询数据库画出所有的点。

我不知道像第一个解决方案那样解决它是否是一种不好的做法。我的意思是，我会在资产文件夹中有很多文件，每个文件有 200 个 2-3 kb，所以可以说它需要或多或少 500kb。

有什么想法会更好吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:36:38.400

SQLite 数据库肯定会更好。如果您事先知道您的观点，您可以创建一个 .sql 脚本，该脚本在创建数据库以填充所有条目时在应用程序开始时运行。

数据库将帮助您更好地组织数据，并轻松查询所需的点集。

# mysql - mysql匹配/反对语法

> ID：16153028
> 
> 赞同：1
> 
> 时间：2013-04-22T17:24:36.863
> 
> 标签：mysql, full-text-search

我的数据库中有一个 varchar 列，我想使用 mysql`MATCH / AGAINST`查询来搜索单词。但是，如果有多个单词，它似乎不起作用。

```
INSERT INTO mytable (title) VALUES ('my id 123');

SELECT * FROM mytable WHERE MATCH (title) AGAINST ('+my +id +123' IN BOOLEAN MODE); 
```

不返回任何结果。我在查询语法中遗漏了什么吗？请注意，该`title`字段没有全文索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:45:23.967

您需要设置以下内容：

步骤 01：创建停用词列表

```
echo "a"    > /var/lib/mysql/stopwords.txt
echo "an"  >> /var/lib/mysql/stopwords.txt
echo "the" >> /var/lib/mysql/stopwords.txt
chown mysql:mysql /var/lib/mysql/stopwords.txt 
```

这将阻止索引最多评论词的文章

STEP 02 : 添加到 /etc/my.cnf

```
[mysqld]
ft_min_word_length=1
ft_stopword_file=/var/lib/mysql/stopwords.txt 
```

STEP 03 : 重启mysql

```
service mysql restart 
```

STEP 04 : 创建 FULLTEXT 索引

```
ALTER TABLE mytable ADD FULLTEXT ft_title (title); 
```

之后，您的查询应该可以工作，或者至少会产生切实的结果。

试试看 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:33:31.540

`my`, `id`&`123`可能低于[`ft_min_word_length`](http://dev.mysql.com/doc/refman/5.5/en//server-system-variables.html#sysvar_ft_min_word_len). 我犹豫是否将数字视为单词，快速测试显示它们是，但最小（字符串）长度仍然适用。

# twitter-bootstrap - 引导程序中的 2 级下拉菜单仅适用于单击

> ID：16153029
> 
> 赞同：1
> 
> 时间：2013-04-22T17:24:37.923
> 
> 标签：twitter-bootstrap, drop-down-menu

我试图在没有**hover**的情况下强制嵌套下拉菜单。目前，下面的代码仅在使用**hover**激活时才显示嵌套下拉菜单。我只想通过点击来强制它，这样在网站的移动版本中它会导致任何问题。我试图达到的效果如下所示：[http ://www.meanthemes.com/demo/meanmenu/demo.html](http://www.meanthemes.com/demo/meanmenu/demo.html)

方法：

1.  我试图放入`dropdown-toggle`里面`drop-down-toggle`，但嵌套的下拉菜单不会显示。

    ```
    <div class="nav-collapse collapse">
     <ul class="nav">
    <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Buildings/Land <b class="caret"></b></a>
    <ul class="dropdown-menu">

      <li class="dropdown-submenu"><a tabindex="-2" href="#"><img src="icons/huron-river-prot_icon.png" class="icons-images">Huron River Protection</a>
        <ul class="dropdown-menu">
          <li><a href="#"><img src="icons/green-roof_icon.png" class="icons-images">Green Roof</a></li>
          <li><a href="#"><img src="icons/huron-river-prot_icon.png" class="icons-images">Porous pavement</a></li>
          <li><a href="#"><img src="icons/retention-detention_icon.png" class="icons-images">Retention/detention</a></li>
        </ul>
      </li>

       </ul>
          </li>         
    </ul>
     </div> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T09:36:24.413

我做了类似的事情。我为你创造了一个小提琴:)

HTML 非常像你的。我使用 jquery 来识别二级菜单并在单击时打开它们。

```
 $(document).ready(function(){
     $('.dropdown .dropdown').each(function(){
         var $self = $(this);
         var handle = $self.children('[data-toggle="dropdown"]');
         $(handle).click(function(){
             var submenu = $self.children('.dropdown-menu');
             $(submenu).toggle();
             return false;
         });
     });
 }); 
```

我必须在引导程序之上使用以下 CSS，以便第二级菜单向侧面打开。

```
.dropdown-menu .dropdown-menu {
top: 0;
left: 100%;
margin: 0;
padding: 0;
} 
```

[http://jsfiddle.net/elewinso/Upmx8/](http://jsfiddle.net/elewinso/Upmx8/)

我希望这有帮助。

# html - CSS：我想在容器中分别定位每个孩子

> ID：16153032
> 
> 赞同：6
> 
> 时间：2013-04-22T17:24:50.240
> 
> 标签：html, css, css-selectors

我想为每个`<td>`. 一种解决方案是使用类，但如果存在简单的 CSS 选择器解决方案，我不想拥挤 HTML。

HTML：

```
<tr>
  <td>Item 1</td>
  <td>Item 2</td>
  <td>Item 3</td>
  <td>Item 4</td>
</tr> 
```

CSS：

```
/* item #1 */
{color: red}

/* item #2 */
{color: blue}

/* item #3 */
{color: green} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T17:28:47.193

使用 CSS 的`nth-child`选择器：

```
td:nth-child(1) {
    color:blue;
}
td:nth-child(2) {
    color:red;
}
td:nth-child(3) {
    color:brown;
}
td:nth-child(4) {
    color:green;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/9Rpx6/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T17:28:33.523

您可以使用`nth-child`选择器指定特定元素（从 1 开始计数）：`td:nth-child(1) { color: red; }`

[http://jsfiddle.net/ayTmy/](http://jsfiddle.net/ayTmy/)

# c# - Linq select 为两个嵌套对象之一返回 null

> ID：16153034
> 
> 赞同：1
> 
> 时间：2013-04-22T17:24:52.703
> 
> 标签：c#, linq, entity-framework, asp.net-mvc-4

我有一个 Linq 选择语句，它应该返回具有 2 个嵌套对象的对象。问题是，其中一个嵌套对象返回 null 而另一个按预期工作。

这是被查询的对象：

```
public class CharInvCard
{
    public int ID { get; set; }
    public Character Character { get; set; }
    public Card Card { get; set; }
    public bool inDeck { get; set; }
    public bool inHand { get; set; }
    public bool inDiscard { get; set; }
} 
```

这是我的 Linq 查询：

```
IQueryable<CharInvCard> CardsInHand = from x in db.CharInvCards
                               where x.Character.ID == character.ID && x.inHand == true
                               select x; 
```

在得到这个查询的结果后，我做了一个这样开始的 foreach 循环：

```
foreach (CharInvCard deckCardRec in CardsInHand) 
```

在调试时，如果我检查deckCardRec 的内容，我发现它具有ID、inHand、inDeck、inDiscard 的所有属性，甚至是嵌套的Character 对象（及其属性），但Card 始终为空。

我已经检查并仔细检查了数据库中的 Card_Id 列是否填充了与 Card 表对应的正确 ID。

**是什么导致 Card 嵌套对象返回为 null 而 Character 嵌套对象正确返回？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:28:49.163

您在 linq 查询中引用`Character`，因此包含在内。你不是在引用`Card`。尝试如下预加载`Cards`：

```
IQueryable<CharInvCard> CardsInHand = from x in db.CharInvCards.Include("Cards")
                               where x.Character.ID == character.ID && x.inHand == true
                               select x; 
```

我假设您的导航属性在上面被命名为“卡片”。

# ant - 用于构建依赖于另一个项目的项目的 Ant 文件

> ID：16153038
> 
> 赞同：2
> 
> 时间：2013-04-22T17:24:58.590
> 
> 标签：ant, build

我需要一个构建文件，它构建一个名为 A 的 java 项目。项目 A 对 java 项目 B 有依赖关系。依赖关系是通过 Eclipse IDE 定义的：

项目 A -> 属性 -> Java 构建路径 -> 选项卡项目 -> 添加 -> B

根据如何实现此项目构建，我的问题是：

1.  是否需要将整个 B.jar 文件附加到 A.jar 中？
2.  或者链接编译的类文件是否足够？
3.  我如何链接这些资源？
4.  当我运行项目 A 时，Eclipse 在做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:32:40.487

这不仅仅是一个 Ant 问题。问题是如何获得这种依赖关系（我假设它是一个 Jar）。

您将 Ant`build.xml`脚本设置为在特定位置检查此依赖关系，如果不存在则不要尝试进行构建。

但是，最好的方法是使用 Ivy 来处理这些类型的依赖关系。Ivy 与 Ant 一起处理依赖管理，并且实际上与另一个名为 Maven 的构建/依赖系统一起工作。

整个事件的本质是这样的：

*   您有一个发布存储库。您可以使用 Maven 存储库，例如 Nexus 或 Artifactory。这是您的站点运行的本地存储库。这个本地存储库可以连接到 World Wide Maven 存储库，因此所有依赖项都可以由 Ivy 处理。
*   项目“B”构建并将此依赖*项部署*到发布存储库。
*   项目“A”有一个`ivy.xml`文件告诉项目它依赖于这个工件。
*   当您构建项目“A”时，它会自动从发布存储库中获取所需的工件并使用它。

这一切听起来都很简单，只是 Ivy 的在线文档非常糟糕。我强烈推荐 Steve Loughran 和 Erik Hatcher 的 Manning 的*Ant in Action*。他们有一个关于使用 Ivy 的优秀章节。如果你使用 Ant，我强烈推荐使用 Ivy。而且，Eclipse 也有一个 Ivy 插件。

# python - 为什么这是一个无限循环？

> ID：16153039
> 
> 赞同：1
> 
> 时间：2013-04-22T17:24:58.833
> 
> 标签：python, list, loops, infinite-loop

我刚刚浏览了 Python 文档教程的循环技术章节，在这里我有一个关于这个男孩的问题：`[:]`

我了解到它需要字符串的开始和结束索引，所以：

```
text = "This is text"
text[:] # will return the whole text "This is text" and
tex[:4] # will return "This". 
```

但是当我在这里看到这段代码时......

```
words = ['cat', 'dog', 'cowcowcow']
for w in words[:]:  # Loop over a slice copy of the entire list.
    if len(w) > 6:
        words.insert(0, w)
print words 
```

输出：

```
['cowcowcow', 'cat', 'dog', 'cowcowcow'] 
```

...我不明白`[:]`for 循环中的含义。我只想写

```
for w in words: 
```

但是当我这样做时，这是一个无休止的while循环，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:27:41.353

`[:]`表示从列表开头到开头的范围 - 它本质上是在复制列表（我通常提倡使用`list(...)`而不是为了可读性，它做同样的工作，并且适用于所有可迭代对象，而不仅仅是序列）。

这里的问题是你在循环时修改了列表，这意味着有更多的条目要循环，所以它变成了无限的。

通常，在迭代列表时修改列表是一个*坏*主意。相反，考虑使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来构造一个新列表。

此代码以相反的顺序将所有长度超过 6 的单词放在列表的开头。因此，另一种实现是：

```
words = [w for w in reversed(words) if len(w) > 6] + words 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T17:27:40.657

`[:]`创建列表的*副本*。切片获取所有元素并返回一个*新*列表。

如果您循环遍历列表本身，并不断向其中添加元素，您最终会陷入无限循环。但是如果你循环遍历一个*副本*，那么`for`循环不会看到原始列表被扩展；用于循环的副本没有看到添加的额外元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T17:28:15.380

因为当您使用`[:]`它时，它会创建原始列表的*副本*，而当您省略它时，您循环的是同一个列表，而不是副本。

如果您在循环时修改列表，那么您只需继续添加它并且它会不断增长，因此您的循环继续。

但是，如果您在遍历*副本*时修改原始文件，那么您将到达副本的末尾并停止（因为没有添加新项目）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T17:28:01.980

在 Python 中，您不能同时遍历一个列表并从该列表中删除元素。 返回That way 您可以在迭代时修改`words[:]`的副本.`words``words``words[:]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-21T06:08:08.437

```
a=[1,2,3,4,5]
for i in a:
    if i==1 : 
         a.insert(0,i)
# you can see  endless loop . Because : 
i=1 =a[0]   #after first loop  a=[1,1,2,3,4,5]
# The second loop :
i=1 =a[1] # because   a=[1,1,2,3,4,5]
# after second loop  a=[1,1,1,2,3,4,5]
# So , endless loop , with result a=[1,1,1......,2,3,4,5].
#It very easy .
#If you user :
a=[1,2,3,4,5]
for i in a[:] :
 if i==1 : 
     a.insert(0,i)
#It same  : 
a_copy=a
for i in a:
    if i==1
      a_copy.insert(0,i) 
```

# arrays - 数组返回不同的 LUA

> ID：16153046
> 
> 赞同：0
> 
> 时间：2013-04-22T17:25:24.477
> 
> 标签：arrays, lua

我的阵列有问题。我最初在其中放置了一些值，但是当我尝试通过创建另一个打印值的循环来显示数组的内容时，它只显示数字“1”作为内容。谁能指出错误？这是一个与我的代码有同样困境的代码。

```
local input = {} 

for line in io.lines 'try.txt' do
    for i =0,2 do
        column = 0
        for n in line:gmatch'%S+' do
            input[column] = 1
            column = column + 1
            if column < 11 then
                input[column] = tonumber(n)
                print("input",input[column],column)
            end
        end
    end

    print("\n")    

    for k = 0, 10 do
        print("-->",input[k],k)
    end

end 
```

我的“try.txt”只包括 ff。

```
2 64 124 21.282 128 91 18 97.8 0 0 0 
2 -99 0 0 161 69 -99 97.7 0 0 0 
1 68 195 29.646 162 87 20 98 0 0 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:32:02.540

交换这些行：

```
input[column] = 1
column = column + 1 
```

# c# - .Net 调用异步方法并等待

> ID：16153047
> 
> 赞同：67
> 
> 时间：2013-04-22T17:25:26.463
> 
> 标签：c#, .net, async-await

我有一个 ansyc 方法

```
public Task<Car> GetCar()
{

} 
```

我可以将此方法称为异步并等待：

```
 Car car = await GetCar() 
```

如何使用 MethodInfo.Invoke 调用该方法并异步等待结果。

```
 MethodInfo method = obj.GetMethod("GetCar");
 method.Invoke( obj, null) 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-04-22T17:39:49.587

您可以正常调用它，然后`await`返回任务：

```
Task<Car> result = (Task<Car>)method.Invoke(obj, null);
await result; 
```

# join - TSQL Max 函数无法正常工作

> ID：16153049
> 
> 赞同：1
> 
> 时间：2013-04-22T17:25:28.630
> 
> 标签：join, max

使用 TSQL - 尝试获取最新的 MAX(HAR_ASSESSMENT.SESSION_DATE) 但我的查询返回的是最旧的评估日期而不是最近的。我认为这与 SERVICE_DELIVERIES 连接和参数有关......任何建议将不胜感激。

```
**SELECT
  HAR_ASSESSMENTS.NEXT_SESSION_DATE
  ,HAR_CONSUMERS.CLIENT_ID
  ,HAR_CONSUMERS.FULL_NAME
  ,MAX (HAR_SERVICE_DELIVERIES.SERVICE_PERIOD_START) AS Max_SERVICE_PERIOD_START
  ,HAR_SERVICE_DELIVERIES.SERVICE
  ,HAR_ASSESSMENTS.ASSESSFORM_NAME
  ,MAX(HAR_ASSESSMENTS.SESSION_DATE) AS Max_SESSION_DATE
  ,HAR_SERVICE_DELIVERIES.AGENCY
  ,HAR_SERVICE_DELIVERIES.PROVIDER
  ,HAR_SERVICE_DELIVERIES.FUND_IDENTIFIER
FROM
  HAR_CONSUMERS
  INNER JOIN HAR_ASSESSMENTS
    ON HAR_CONSUMERS.CONSUMER_UUID = HAR_ASSESSMENTS.CONSUMER_UUID
  INNER JOIN HAR_SERVICE_DELIVERIES
    ON HAR_CONSUMERS.CONSUMER_UUID = HAR_SERVICE_DELIVERIES.CONSUMER_UUID
WHERE
  HAR_SERVICE_DELIVERIES.SERVICE_PERIOD_START >= @SERVICE_PERIOD_START
  AND HAR_SERVICE_DELIVERIES.SERVICE_PERIOD_START <= @SERVICE_PERIOD_START2
  AND HAR_SERVICE_DELIVERIES.SERVICE IN (@SERVICE)
  AND HAR_ASSESSMENTS.ASSESSFORM_NAME IN (@ASSESSFORM_NAME)
  AND HAR_ASSESSMENTS.AGENCY IN (@AGENCY)
GROUP BY
HAR_ASSESSMENTS.NEXT_SESSION_DATE
  ,HAR_CONSUMERS.CLIENT_ID
  ,HAR_CONSUMERS.FULL_NAME
  ,HAR_SERVICE_DELIVERIES.SERVICE
  ,HAR_ASSESSMENTS.ASSESSFORM_NAME
  ,HAR_SERVICE_DELIVERIES.AGENCY
  ,HAR_SERVICE_DELIVERIES.PROVIDER
  ,HAR_SERVICE_DELIVERIES.FUND_IDENTIFIER** 
```

# oracle - 分页（oracle 数据库）

> ID：16153050
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:25:31.850
> 
> 标签：oracle, request, paging

我需要从我的 C# 代码创建对 oracle 数据库的请求，这将为网站上的页面选择行。例如，我想为第二页获取 100 到 200 的行。我找到了一些真正有效的代码

```
SELECT * FROM
(
   SELECT a.*, rownum r__
   FROM
   (
      SELECT * FROM ORDERS WHERE CustomerID LIKE 'A%'
      ORDER BY OrderDate DESC, ShippingDate DESC
   ) a
   WHERE rownum < ((pageNumber * pageSize) + 1 )
)
WHERE r__ >= (((pageNumber-1) * pageSize) + 1) 
```

它有效，我可以在更改此块内部时使用它

```
SELECT * FROM ORDERS WHERE CustomerID LIKE 'A%'
ORDER BY OrderDate DESC, ShippingDate DESC 
```

但它是如何工作的？我无法理解。我熟悉 SQL 请求，但什么是

```
SELECT a.*, rownum r__ 
```

是什么

```
 ) a 
```

FROM 换行后？

你能这么好心地解释一下这个包装吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:36:27.023

select a.*, rownum -> Select all records from table/table alias a, with rownumber, 这样你就可以选择一个子集。

(SELECT * FROM ORDERS WHERE CustomerID LIKE 'A%' ORDER BY OrderDate DESC, ShippingDate DESC)

创建“a”作为表别名，允许您将其视为外部选择表中的表。

请注意，选择 * 被认为是不好的做法，因为更改表结构可能会破坏您的代码。

# regex - postgres 在 hstore 上使用正则表达式左连接？

> ID：16153051
> 
> 赞同：0
> 
> 时间：2013-04-22T17:25:38.643
> 
> 标签：regex, postgresql, left-join, hstore

我正在尝试对带有 hstore 列的两个表进行左连接：

```
 SELECT
    d.context->'hostname' AS hostname,
    r.data->'Site' AS site,
    r.data->'Region' AS rack,
    r.data->'Manufacturer' AS vendor,
    r.data->'ModelNumber' AS model_number,
  FROM dns AS d
    LEFT JOIN rack AS r ON
        d.context->'hostname' ~ r.context->'Name'
  ; 
```

其中`dns`和`rack`都有两个 hstore 列`context`和`data`; 左连接的条件`rack.context->'Name'`可能只包含 fqdn'd 的一部分`dns.context->'hostname'`。

但是，当我尝试上述方法时，我得到了

```
 ERROR:  operator does not exist: text ~ hstore 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:45:18.000

你有一个优先级问题。这个：

```
d.context->'hostname' ~ r.context->'Name' 
```

正在被这样解析：

```
d.context -> ('hostname' ~ r.context) -> 'Name' 
```

所以`~`试图将`'hostname'`TEXT 值与`r.context`HSTORE 匹配。添加一些括号来强制问题：

```
(d.context->'hostname') ~ (r.context->'Name') 
```

如果我们看一下[运算符优先级表](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-PRECEDENCE)，你会看到：

> *   不包含`~`或`->`
> *   `(any other)`：所有其他本机和用户定义的运算符
> *   更多不包含`~`或`->`

所以两者都`~`属于`->`“其他”类别。我猜想这`~`是之前添加到运算符列表中的，`->`因为`~`它是本地运算符，而`->`由 hstore 扩展添加。

* * *

有趣的是，*更多不包含`~`或`->`*列出的内容确实包含 LIKE 并且这个：

```
hstore1 -> k1 like hstore2 -> k2 
```

在这里按预期工作：

```
select 'a=>b'::hstore -> 'a' like 'a=>b'::hstore -> 'a';
select 'a=>b'::hstore -> 'a' ~    'a=>b'::hstore -> 'a'; 
```

第一个查询将是`'t'`，而第二个查询将产生您的“操作员不存在”错误。我只提到这一点是因为我希望`LIKE`,`SIMILAR`和`~`运算符具有相同的优先级，因为它们都是同一主题的变体。

# vb.net - 当从 TextBox1_TextChanged 字段将数据附加到 RichTextBox 时，我的部分代码会自动添加一个冗余日期。逻辑有问题

> ID：16153054
> 
> 赞同：1
> 
> 时间：2013-04-22T17:25:43.400
> 
> 标签：vb.net, visual-studio-2010

我想要做的是自动将扫描到 TextBox1 字段的任何内容添加到 RichTextBox1，然后清除 TextBox1 字段，但是当 TextBox1 被清除时，`RichTextBox1.AppendText(scanData + " " + currentTime + vbLf)`采取行动并添加空格 + TimeOfDay。所以 RichTextBox1 的输出是这样的：

```
011546 1:30 PM
 1:30 PM
011879 1:31 PM
 1:31 PM 
```

**如何摆脱插入新行中的冗余辅助时间？**这是我当前的代码：

```
Public Class Form1

Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

    Dim scanData As String = TextBox1.Text

    Dim currentTime As String = TimeOfDay

    TextBox1.Text = scanData

    RichTextBox1.AppendText(scanData + " " + currentTime + vbLf)

    TextBox1.Clear()

End Sub 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:54:23.033

您应该使用这样的 if 语句，以避免在`RichTextBox1.AppendText(scanData + " " + currentTime + vbLf)`清除 TextBox1 时发生这种情况。

```
Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged
    Dim scanData As String = TextBox1.Text

    Dim currentTime As String = TimeOfDay

    TextBox1.Text = scanData

    If (TextBox1.Text <> "") Then RichTextBox1.AppendText(scanData + " " + currentTime + vbLf)

    TextBox1.Clear()
End Sub 
```

原谅任何语法错误。

# c# - 是否可以根据目标平台更改 Nuget 包引用？

> ID：16153056
> 
> 赞同：4
> 
> 时间：2013-04-22T17:25:47.340
> 
> 标签：c#, .net, oracle, nuget, 32bit-64bit

我正在创建一个使用[Oracle Data Provider for .Net](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)的应用程序。我的一些客户将在 32 位环境中运行应用程序，而其他客户将在 64 位架构上运行，因此我需要提供两个版本的应用程序。

Oracle Data Provider 有两个不同的 Nuget 包，一个用于[x86](https://nuget.org/packages/odp.net.x86/)，另一个用于[x64](https://nuget.org/packages/odp.net.x64/)。

有没有办法设置 Nuget 以根据项目构建配置下载或切换到适当的包源？我希望有一种简单的方法可以简单地切换我的项目配置以针对正确的驱动程序进行构建，但我无法发现是否有办法让 Nuget 在这种情况下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T18:42:15.630

Nuget 包毕竟只是一个 DLL。因此，与任何 DLL 一样，您可以使用版本控制来指导您的应用程序使用正确的版本。

# objective-c - 为什么我的代码会破坏？（NSMutableArray 问题）

> ID：16153057
> 
> 赞同：-2
> 
> 时间：2013-04-22T17:26:04.280
> 
> 标签：objective-c

以下代码正在中断，返回 '(lldb)' ：

```
NSMutableArray *numbersArray;

numbersArray = [[NSMutableArray alloc] init];

for (int i = 0; i<34; i++) {
    numbersArray[i] = [NSNumber numberWithInt:-1];
}
int r = rand()%34;

while ([numbersArray containsObject:[NSNumber numberWithInt:r]]) { //it breaks here
     r = rand()%34;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T17:28:11.527

~~您没有初始化数组（在第 1 行）并且指向未使用的内存。它应该是~~

 ~~```
NSMutableArray *numbersArray = [[NSMutableArray alloc] init]; 
```

* * *~~ 

您正在做的事情不同于指向`nil`哪个是安全的。如果你会做

```
NSMutableArray *numbersArray = nil; 
```

~~您会看到该数组始终为空，因为它正在发送一条消息以`nil`导致没有任何事情发生（例如，添加对象`nil`根本不做任何事情）。~~

* * *

## 更新（编辑后）：

您的代码运行良好。你可能只是没有得到它的作用。

您的前几行创建了一个包含 34 个值的数组`-1`

```
NSMutableArray *numbersArray = [[NSMutableArray alloc] init];
for (int i = 0; i<34; i++) {
    numbersArray[i] = [NSNumber numberWithInt:-1];
} 
```

然后随机化一个介于 0 和 33 之间的整数值

```
int r = rand()%34; 
```

然后“当”所有 -1 的数组包含该数字时，您随机化一个新数字。

由于您的第一个数字是正数并且数组中填充了所有 -1，因此您永远不会进入循环体，因此您的代码只会跳过它。

```
while ([numbersArray containsObject:[NSNumber numberWithInt:r]]) { //it breaks here
     r = rand()%34;
} 
```

**我无法真正理解您要做什么，但这就是您的代码当前正在做的事情。（它有效，但毫无意义）**

# iis - 在 IIS 中从 www.somedomain.com 重定向或重写到 www.somedomain.com/en/

> ID：16153058
> 
> 赞同：0
> 
> 时间：2013-04-22T17:26:05.107
> 
> 标签：iis

这就是我想要实现的目标：

1.  用户浏览 www.somedomain.com
2.  IIS 将 url/redirects 重写为 www.somedomain.com/en/

如何在 IIS 中创建这样的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:39:23.120

打开 IIS 管理器并导航到要管理的级别。

在功能视图中，双击 HTTP 重定向。

在 HTTP 重定向页面上，选择将请求重定向到此目标。

在相应的框中，键入要将用户重定向到的文件名、目录路径或 URL。

在“操作”窗格中，单击应用。

[http://technet.microsoft.com/en-us/library/cc732930(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732930(v=ws.10).aspx)

# javascript - 如何在图像上显示文本

> ID：16153059
> 
> 赞同：0
> 
> 时间：2013-04-22T17:26:05.710
> 
> 标签：javascript, jquery, html, css

我想在图像上显示文本。每当有人将鼠标悬停在图像上时。

我的 div 块是：

```
<div class="MainDIV">
<br><br><br>
<div class="popular_stores"  align="center">

    <span style="font-size: 12pt;">Browse our list of stores that we have coupons, coupon codes, and promo codes for.
    </span>
    <br>
    <ul>
    <li>
        <img src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR31R-rZO7MBzgGMrZlpa7C0-tx3CmzVz6pha7kt8Fw6PjpsMGENg" style="width: 100px;height: 50px;" >
    </li>
    <li>
        <img src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR31R-rZO7MBzgGMrZlpa7C0-tx3CmzVz6pha7kt8Fw6PjpsMGENg" style="width: 100px;height: 50px;" >
    </li>
    <li>
        <img src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR31R-rZO7MBzgGMrZlpa7C0-tx3CmzVz6pha7kt8Fw6PjpsMGENg" style="width: 100px;height: 50px;" >
    </li>
</ul>
</div></div> 
```

其余的 CSS 和 JavaScript 函数是：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript"> 

$('.drama').mouseover(function(){
    alert("dss");
    var tt = $(this).parent().find('.toolTip');
    tt.html($(this).attr('title'));
    tt.show();
});
$('.drama').mouseout(function(){
    var tt = $(this).parent().find('.toolTip');
    tt.hide();
});

</script> 

<style type="text/css">

body {
    text-align: center;
    }

.MainDIV{
    padding:0;
    width:700px;    
    display: inline-block;  
    background-color:white;
    }

.MainDIV ul
{ 
list-style-type: none;
}

.MainDIV  ul li { 
    display: inline-block;
    padding : 1em;
    }

.MainDIV ul li img
{

    padding: .2em ;
    border-radius: 10px;
    -moz-border-radius: 10px;
    background-color: #F5F5E3;
}

ul li div{display:none; background:white; opacity:.5; position:absolute;} 
```

我想要做的显示在这里。请看一下：[点击这里](http://laurencekim.com/)

与此页面类似，每当有人将鼠标悬停在图像上时，我想在图像上显示文本。有人可以帮我吗...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:49:14.460

我用我能想到的最简单的方式建立了一个小提琴。

```
$('#hover1').mouseover(function(){
   $('#hoverDiv1').css('opacity', 1)
});

$('#hover1').mouseout(function(){
   $('#hoverDiv1').css('opacity', 0)
}); 
```

请看这个[小提琴](http://jsfiddle.net/pP23k/)

悬停效果没有正确定位，因为需要定义“li”。这只是为了展示一种简单的 jQuery 方式。

最好的

# ios - 在 iOS 中结束 Flurry Analytics 会话

> ID：16153066
> 
> 赞同：4
> 
> 时间：2013-04-22T17:26:26.237
> 
> 标签：ios, objective-c, analytics, flurry

我有一个使用 Flurry Analytics SDK 的 iOS 应用程序。此应用程序在博物馆环境中用作信息亭，并在引导访问模式下运行。我需要能够在不退出应用程序的情况下开始和结束新会话。在文档中，它声明 SDK 将在关闭和应用程序暂停时发送数据并启动新会话。由于此应用程序从未退出或暂停（后台），因此我无需退出引导访问模式并退出应用程序就不会获得任何分析数据。

我已经向 Flurry 团队询问过这个问题，但还没有回复，所以认为值得检查一下是否有人遇到过类似的问题。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-22T17:41:05.090

未经测试，但它可以像使用一样简单吗

```
[FlurryAPI endSession]; 
```

然后回忆

```
[FlurryAPI startSession:"API KEY HERE"]; 
```

更新：从 v6.0.0 开始，endSession 不再可用

# sql - SSDT 参数

> ID：16153073
> 
> 赞同：0
> 
> 时间：2013-04-22T17:26:43.220
> 
> 标签：sql, reporting-services, sql-server-data-tools

我正在尝试使用 SSDT 部署一个报告，该报告将允许输入 2 个参数，这些参数可用于日志文件的开始和结束。我的参数在报告数据下的参数下拉列表中声明为日期时间。数据集的属性中也包含参数。这是我的 SQL 语句和错误。

```
[Declare] @StartTime DateTime 
[Declare] @EndTime Datetime 
SELECT RecordID, AnalysisID, HeatName, NewHeatName, AnalysisTime, SampleType, Grade, NewGrade, ProductID, RecordChangeTime, ChangesMade, LoggedUser
FROM Chemistry_Log
WHERE (RecordChangeTime >= @ StartTime) AND (RecordChangeTime <= @ EndTime) 
```

解析 SQL 窗格的内容时遇到以下错误：

无法解析查询文本。

我不确定从这里去哪里，因为这不是错误消息的非常有用的信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:20:43.010

如果您已经将参数添加到报表中，则在定义查询时无需再次声明它们。

此外，也许这是一个错字，但你应该删除空格`@ StartTime`和`@ EndTime`

所以就像：

```
SELECT RecordID, AnalysisID, HeatName, NewHeatName, AnalysisTime, SampleType, Grade, NewGrade, ProductID, RecordChangeTime, ChangesMade, LoggedUser
FROM Chemistry_Log
WHERE (RecordChangeTime >= @StartTime) AND (RecordChangeTime <= @EndTime) 
```

# php - javascript删除前确认删除

> ID：16153078
> 
> 赞同：0
> 
> 时间：2013-04-22T17:26:59.083
> 
> 标签：php, javascript, mysql

我正在显示一个 JavaScript 确认对话框，询问用户是否确定他们希望删除记录。但是，即使用户单击“是”，查询仍然执行并且记录仍然被删除，这里的问题可能是代码：

```
<script>
    function deleletconfig() {
        var del=confirm("Are you sure you want to delete this record?");
        if (del==true){
            alert ("record deleted")
        } else {
            alert("Record Not Deleted")
        }
    }
</script> 
```

因此，即使我单击取消，查询/记录也会被删除。我怎样才能阻止这种情况发生我做错了什么？还是个新手`JS`！:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T17:30:42.160

您必须使用确认对话框的返回值：

```
echo"<form method = \"post\" action =\"change.php?change=$productid\">";
echo// form fields here!...
echo"<input type=\"submit\" name = \"delete\" value=\"Delete\" onclick=\"return deleletconfig()\" />";

if (isset($_POST['delete'])){  //delete clicked
//get variables here
//run query delete record from xyz where id=$id

}

<script>
    function deleletconfig(){

    var del=confirm("Are you sure you want to delete this record?");
    if (del==true){
       alert ("record deleted")
    }else{
        alert("Record Not Deleted")
    }
    return del;
    }
</script> 
```

查看“onclick”和“deleletconfig”的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-06T17:25:25.340

创建一个函数并调用它：

```
<script type="text/javascript">
    function confirmation() {
      return confirm('Are you sure you want to do this?');
    }
</script>

<a href="#" onclick="return confirmation()">Delete</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:28:02.183

代替

```
if (del==true){ 
```

做

```
if(del) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:30:45.983

添加return = true表示删除，return = false表示不删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T13:17:53.233

只需复制和粘贴

它提供了一个警告框，以确认您希望链接执行的任何操作。

警报根据所选答案返回真或假，然后要么执行您设置链接的操作，要么不执行您的链接应该执行的操作。

```
<td>
   <a class="delete_button" href="#">Delete</a>
</td>

<script type="text/javascript">
    $('.delete_button').click(function(e){
        var result = confirm("Are you sure you want to delete this user?");
        if(!result) {
            e.preventDefault();
        }
    });
</script> 
```

# node.js - 如何检测 socket.io 服务器是否已连接？

> ID：16153082
> 
> 赞同：1
> 
> 时间：2013-04-22T17:27:19.590
> 
> 标签：node.js, socket.io

我正在使用 socket.io 和 appjs 开发一个应用程序。当他通过启动应用程序的两个实例导致 EADDRINUSE 时，我无法向用户发出通知，这是他不应该这样做的。

Socket.io 确实检测到 EADDRINUSE，但我只收到写入控制台的警告（不确定是 stdout 还是 stderr）。我想要一个异常，一个有 err 参数的回调，或者至少一个标志来检测连接是否正常。

只是为了澄清，我试图从服务器端做到这一点。在客户端，我已经有客户端-服务器连接超时。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:44:02.020

EADDRINUSE 是网络模块发出的错误。此处的文档：[http ://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback)

简而言之，您需要提供一个回调来`.on('error'`处理错误。

```
server.on('error', function (e) {
  if (e.code == 'EADDRINUSE') {
    console.log('Address in use');
  }
}); 
```

# java - 出现错误：无法从静态上下文引用非静态方法 getTotalPlayers()

> ID：16153083
> 
> 赞同：0
> 
> 时间：2013-04-22T17:27:21.693
> 
> 标签：java

我看不出我在这里做错了什么，或者如果没有这样声明，这里的任何东西都是静态的。我只需要在这里指出正确的方向。

测试代码：

```
public class PaintballPlayerTest
{
//Test program for PaintballPlayer assignment

public static void main (String [] args)
{
//Part 1 check constructor & toString --(make sure ID is working too)
PaintballPlayer sheldon = new PaintballPlayer ("Sheldon", "Lee", "Cooper");
PaintballPlayer leonard = new PaintballPlayer ("Leonard", "Hofstadter");
PaintballPlayer amy = new PaintballPlayer ("Amy", "Farrah", "Fowler");

System.out.println(sheldon);
System.out.println(leonard);

//Part 2 test getTotalPlayer --should be 3
System.out.println("The team has this many players " + PaintballPlayer.getTotalPlayers()); 
```

我的代码：

```
import java.util.*;

public class PaintballPlayer
{
private String firstName, middleName, lastName;
private String secFirst, secLast;
private int id;
private int count;
private static int totalPlayers;
private int playerID;
private int players;

public PaintballPlayer(String first, String middle, String last)
{
    count = 0;
    id = totalPlayers++;
    players = count++;
    firstName = first;
    middleName = middle;
    lastName = last;
}

public PaintballPlayer(String f, String l)
{
    this (f,"",l);
    id = count++;

}

 public PaintballPlayer() 
{
totalPlayers++;
 }

 public static int getTotalPlayers() 
{
return totalPlayers;
}

public String toString()
{
    String name;
    String n;
    name = firstName + " " + middleName + " " + lastName;

    return name;

}

public int getPlayerID()
{
    playerID = count;
    return playerID;
}
  } 
```

同样，我的问题在于 getTotalPlayers() 方法。

编辑：这是我编辑的代码应用提供的修复。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:31:15.340

`getTotalPlayers()`不是静态方法，所以你需要一个实例`PaintballPlayer`来调用这个方法。

如果你想在里面存储玩家总数`PaintballPlayer`，你需要一个静态属性（所有实例的引用相同）：

```
class PaintballPlayer {

  private static int totalPlayers;

  public PaintballPlayer() {
    totalPlayers++;
  }

  public static int getTotalPlayers() {
    return totalPlayers;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:54:15.830

在您的代码上，在构造函数 #1 上存在一些问题

```
public PaintballPlayer(String first, String middle, String last)
{
    count = 0;
    players = 0;
    id = count++;
    players = count++;
    firstName = first;
    middleName = middle;
    lastName = last;
} 
```

变量 player 和 count 被重置，而变量 count 增加了两倍。

在构造函数 #2 中，问题最严重：

```
public PaintballPlayer(String f, String l)
{
    this (f,"",l);
    id = count++;
    players = count++;
} 
```

因为除了原始构造函数中的 2 次之外，您还将 count 的值增加了两次，因此总共增加了四次。

一旦你完成了 Devon Freese 所说的，你将不得不修改 PaintballPlayer 的构造函数

```
public PaintballPlayer(String first, String middle, String last)
{
    id = totalPlayers++;
    firstName = first;
    middleName = middle;
    lastName = last;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:14:39.403

尝试这个。

```
import java.util.*;

public class PaintballPlayer {

    private String firstName, middleName, lastName;
    private String secFirst, secLast;
    private int id;
    private static int count;
    private static int totalPlayers;
    private int playerID;
    private static int players;

    public PaintballPlayer(String first, String middle, String last) {
        count++;
        id = count;
        players = count;
        firstName = first;
        middleName = middle;
        lastName = last;
    }

    public PaintballPlayer(String f, String l) {
        this(f, "", l);
        id = count;
        players = count;
    }

    public String toString() {
        String name = firstName + " " + middleName + " " + lastName;
        return name;
    }

    public static int getTotalPlayers() {
        totalPlayers = players;
        return totalPlayers;
    }

    public int getPlayerID() {
        playerID = count;
        return playerID;
    }
}

class PaintballPlayerTest {
//Test program for PaintballPlayer assignment

    public static void main(String[] args) {
//Part 1 check constructor & toString --(make sure ID is working too)
        PaintballPlayer sheldon = new PaintballPlayer("Sheldon", "Lee", "Cooper");
        PaintballPlayer leonard = new PaintballPlayer("Leonard", "Hofstadter");
        PaintballPlayer amy = new PaintballPlayer("Amy", "Farrah", "Fowler");

        System.out.println(sheldon);
        System.out.println(leonard);

//Part 2 test getTotalPlayer --should be 3
        System.out.println("The team has this many players " + PaintballPlayer.getTotalPlayers());
    }
} 
```

# python - 在输入中使用计算和字符串。(Python 2.7)

> ID：16153085
> 
> 赞同：0
> 
> 时间：2013-04-22T17:27:27.463
> 
> 标签：python, string, input, python-2.7

我在 Python 2.7 中遇到了这个烦人的问题，它不会让我这样做

```
numbers = raw_input(numbers + 1 + ': ') 
```

我希望它在控制台中打印出“数字 + 1”作为数字，但是..它出现了以下错误消息：

```
Traceback (most recent call last):
  File "F:/Python/Conversation", line 25, in <module>
    numbers = raw_input(numbers + 1 + ': ')
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

有没有解决方案或只是我可以使用的另一件事来代替这个？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:33:13.740

正如错误消息指出的那样，您不能添加数字和字符串。您*可以*添加两个字符串，所以试试这个：

```
raw_input( str(numbers+1) + ':' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:32:11.197

您需要在单引号/双引号内加上`+`and ；`numbers`否则，它将被视为字符串连接。您收到错误是因为您尝试连接/`numbers`添加`1`.

因此，您需要`1`使用[str()](http://docs.python.org/2/library/functions.html#str)转换为字符串。然后，用`'numbers + '`和`':`'连接它。像这样：

```
>>> numbers = raw_input('numbers + ' + str(1) + ': ')
numbers + 1: 
```

**但是**，如果要替换`numbers`为数字：

```
>>> numbers = 3
>>> numbers = raw_input(str(numbers + 1) + ': ')
4: 
```

它之所以有效，是因为您首先添加了`numbers`' 值`1`。然后，稍后将结果转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:29:51.150

您需要将`1`int 值转换为字符串：

```
numbers = raw_input(numbers + str(1) + ': ') 
```

或者，使用字符串格式：

```
numbers = raw_input('{}{}: '.format(numbers, 1)) 
```

或者，也许您想*`numbers`*变成`int`第一个，然后将*结果*变成一个字符串：

```
sum = int(numbers) + 1
numbers = raw_input(str(sum) + ': ') 
```

# ruby-on-rails - 如何在 Rails 的文本字段中添加文本？

> ID：16153095
> 
> 赞同：0
> 
> 时间：2013-04-22T17:28:00.517
> 
> 标签：ruby-on-rails, form-for, textfield

我想在我的应用程序的用户名文本字段中添加*用户*名（而不是在它旁边有一个标签），用户将能够在此文本上键入。我已经看到它是在 html 中完成的，但我对如何在我的 new.html.erb 页面上执行它感到困惑，因为我使用了 form_for 标记和 text_field 标记。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:33:36.403

使用“占位符”。

```
<%= form_for @user do |f| %>
  <%= f.text_field :username, :placeholder => "Username" %>

  ...

  <%= f.submit %>
<% end %> 
```

顺便说一句，这仅适用于支持 html5 的浏览器，因此请确保您有 IE 8、7 等的 jquery 后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:33:27.583

这是通过使用 HTML5 占位符属性来实现的。

在 Rails 中，您可以简单地添加占位符属性：

```
<%= f.text_field :whatever, :placeholder => "text for placeholder..." %> 
```

# php - 减少多维数组的维度

> ID：16153100
> 
> 赞同：1
> 
> 时间：2013-04-22T17:28:03.823
> 
> 标签：php, multidimensional-array, foreach

我在遍历这一系列产品信息时遇到了麻烦，并且需要为每个项目回显谷歌电子商务跟踪代码的预期结果。如何将维度减少一。简而言之 -

这个怎么转：

```
Array (
    [array] => Array (
        [0] => Array (
            [product_id] => 7
            [prod_count] => 1
            [price] => 19.99
        )
        [1] => Array (
            [product_id] => 6
            [prod_count] => 3
            [price] => 19.99
        )
        [2] => Array (
            [product_id] => 5
            [prod_count] => 2
            [price] => 19.99
        )
        [3] => Array (
            [product_id] => 4
            [prod_count] => 4
            [price] => 14.99
        )
        [4] => Array (
            [product_id] => 3
            [prod_count] => 5
            [price] => 19.99
        )
    )
 ) 
```

进入这个：

```
 Array (
            [0] => Array (
                [product_id] => 7
                [prod_count] => 1
                [price] => 19.99
            )
            [1] => Array (
                [product_id] => 6
                [prod_count] => 3
                [price] => 19.99
            )
            [2] => Array (
                [product_id] => 5
                [prod_count] => 2
                [price] => 19.99
            )
            [3] => Array (
                [product_id] => 4
                [prod_count] => 4
                [price] => 14.99
            )
            [4] => Array (
                [product_id] => 3
                [prod_count] => 5
                [price] => 19.99
            )
        ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T17:30:11.887

该示例的明显答案是：

```
$array = $array['array']; 
```

但是，假设有多个数组作为第一级：

```
$array = call_user_func_array('array_merge',$array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:33:30.180

```
$arr = array(
   "withinArray" => array(
       "withinMoreArray" => array(
           "andEvenMoreArray" => array(
           )
       )
   )
);

$arr = current($arr);
// OR
$arr = $arr['withinArray']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:34:49.743

```
<?php
// Let's say this is your big array:
/*Array (
    [array] => Array (
        [0] => Array (
            [product_id] => 7
            [prod_count] => 1
            [price] => 19.99
        )
        [1] => Array (
            [product_id] => 6
            [prod_count] => 3
            [price] => 19.99
        )
        [2] => Array (
            [product_id] => 5
            [prod_count] => 2
            [price] => 19.99
        )
        [3] => Array (
            [product_id] => 4
            [prod_count] => 4
            [price] => 14.99
        )
        [4] => Array (
            [product_id] => 3
            [prod_count] => 5
            [price] => 19.99
        )
    )
 )*/

$littlearray = $bigarray['array'];
?> 
```

# jquery - jquery fancybox：实现“后”照片

> ID：16153108
> 
> 赞同：0
> 
> 时间：2013-04-22T17:28:15.590
> 
> 标签：jquery, fancybox

我正在为一家建筑公司制作画廊，我想使用 fancybox。画廊的一个要求是某些图像具有关联的“之后”图像。图像关系类似于这样：

![在此处输入图像描述](https://i.stack.imgur.com/6Vruh.jpg)

似乎没有任何简单的方法可以使用 api 函数来做到这一点。到目前为止，我的方法是

通过为它们分配“跳过”类来跳过“之后”照片

```
$('a:not(.skip)').fancybox(); 
```

某些图像具有提示“后”图像存在的数据元素，如果是这种情况，我会在图库视图中添加一个链接......

```
afterLoad   : function() {
    if(this.element.context.dataset.before==1){
        this.skin.prepend( '<div onclick="javascript:parent.$.fancybox(afterimg);" style="margin-left:50%">Before Image</div>' );
        }

    } 
```

为了让这种方法发挥作用，我必须关闭fancybox并重新打开，然后才能回到正常的画廊，我必须关闭并重新打开。

有谁知道更好的方法来做到这一点？

# android - 片段活动回栈

> ID：16153109
> 
> 赞同：0
> 
> 时间：2013-04-22T17:28:30.823
> 
> 标签：android

我的 backstack 有问题。我有一个主要活动，它启动一个 FragmentActivity A，然后启动一个活动 B。当我在 B 上调用 finish() 时，它会返回到主要活动而不是 A。我对其进行了调试，并且 A 不会被销毁，直到调用 finish()在 B 上，但 A 被跳过。

# php - 如何让这个 PHP 变量由另一个用户选择的单选按钮的值来确定

> ID：16153114
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:28:38.447
> 
> 标签：php, string, conditional-statements

```
$door = $_POST["doorType"];  

$doorWidth;
if ($door=="Single")
{
        $doorWidth = $width;
}
else if ($door=="Double")
{
$doorWidth = $dOneWidth;
} 
```

当我运行该页面时，它无法识别变量 $doorWidth？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:31:25.680

```
$doorWidth; 
```

不分配任何东西。它只将变量 ... 返回到任何东西。这样做 PHP 正在访问变量，导致通知。例如写：

```
$doorWidth = NULL; // assigns something (some default value if $door isn't "Signle" nor "Double") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:32:09.657

我猜它`$door`的价值远非`Single|Double`. 这可能是由您的应用程序中的另一个错误引起的。您应该了解，如果您要从条件语句（如 ）中分配变量，则*无论如何*`if`都应该为变量设置适当的默认值：

```
$doorWidth = 'not set!';

if ($door=="Single")
{
    $doorWidth = $width;
}
else if ($door=="Double")
{
    $doorWidth = $dOneWidth;
} 
```

[`switch`](http://www.php.net/manual/en/control-structures.switch.php)关于具有`default:`分支的语句的进一步说明：

```
switch($door) {
    case 'Single' : 
        // do something
        break;
    case 'Double' :
        // do something else
        break;
    default:
        die('$door has a value far from 'Single|Double'. Currently: ' . $door);
} 
```

# symfony - Symfony2 img/LdapBundle Bad credentials 错误

> ID：16153125
> 
> 赞同：2
> 
> 时间：2013-04-22T17:29:34.327
> 
> 标签：symfony, ldap

我是 Symfony2 的新手，正在尝试使用上述捆绑包连接到 ldap；但是我不断收到错误的凭据错误。我无法弄清楚为什么..

我的 Security.yml 文件如下所示：

```
security:
firewalls:
    restricted_area:
        pattern:          ^/login
        anonymous:        ~
        imag_ldap:
            check_path: login_check
            login_path: login
            csrf_provider: form.csrf_provider
            intention: authenticate
            provider: ldap
        logout:
            path:           /logout
            target:         /

providers:
    ldap:
        id: imag_ldap.security.user.provider

encoders:
    IMAG\LdapBundle\User\LdapUser: plaintext

access_control:
    - { path: ^/login,          roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/,               roles: IS_AUTHENTICATED_FULLY }

imag_ldap:
client:
    host: someip
    port: 389
#    version: 3 # Optional
#    username:  
#    password: 
#    network_timeout:
#    referrals_enabled:
#    bind_username_before:
#    skip_roles:

user:
    base_dn: dc=some, dc=dom, dc=ain
#    filter: null
    name_attribute: uid
#    attributes:

role:
    base_dn: dc=some, dc=dom, dc=ain
#    filter: null #Optional
    name_attribute: cn
    user_attribute: member
#    user_id: [ dn or username ] #Default dn 
```

我的路线如下：

```
login:
    pattern:              /login
    defaults:             { _controller: IMAGLdapBundle:Default:login }
    requirements:
    _method:            GET

login_check:
    pattern:              /login_check

logout:
    pattern:              /logout 
```

我似乎无法测试它是否真正连接，但是当我尝试去时，`http://domain/app_dev.php/check_login`我收到以下错误：

`Unable to find the controller for path "/login_check". Maybe you forgot to add the matching route in your routing configuration?`

我猜我需要添加一条路线`/login_check`但不确定。如果是这样，我如何调用 ldap 连接？

**编辑**

好的，我想我需要手握。我已将我的 security.yml 更改为以下内容：

```
security:
    firewalls:
        login_firewall:
            pattern:    ^/login$
            anonymous:  ~
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         /
        restricted_area:
            pattern:          ^/
            #anonymous:        ~ 
    providers:
        ldap:
           id: imag_ldap.security.user.provider

    encoders:
        IMAG\LdapBundle\User\LdapUser: plaintext

    access_control:
        - { path: ^/login,          roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/,               roles: IS_AUTHENTICATED_FULLY } 
```

但现在我收到以下错误： `LogicException: No authentication listener registered for firewall "restricted_area".`

所以我尝试了以下方法：

```
security:
    firewalls:
        login_firewall:
            pattern:    ^/login$
            anonymous:  ~
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         /
        restricted_area:
            pattern:          ^/
            #anonymous:        ~ 
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         / 
```

但这会导致重定向循环。

**编辑 2** 正如评论中提到的，第二部分是一个单独的问题，可以在这里找到：[Symfony 2 Security.yml redirect loop and LogicException issues](https://stackoverflow.com/questions/16188444/symfony-2-security-yml-redirect-loop-and-logicexception-issues)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:05:54.010

您还需要放在`login_check`防火墙后面：

```
firewalls:
    restricted_area:
        pattern: ^/
        #anonymous: ~
    login_firewall:
            pattern:    ^/login$
            anonymous:  ~ 
```

顺便说一句，这是“[避免常见陷阱”部分中列出的常见陷阱。](http://symfony.com/doc/2.1/book/security.html)

有类似的东西可以帮助[你](https://stackoverflow.com/questions/13577297/force-user-login-in-symfony-2)。

# sql-server - 当值可能存在于几个不同的列之一中时执行求和

> ID：16153126
> 
> 赞同：0
> 
> 时间：2013-04-22T17:29:35.463
> 
> 标签：sql-server, sql-server-2008

假设有一个简单的表：

```
CREATE TABLE [dbo].[foo](
    [foo_id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
        [val1_id] [int] NULL,
        [val1_amount] [int] NULL,
        [val2_id] [int] NULL,
        [val2_amount] [int] NULL,
        [val3_id] [int] NULL,
        [val3_amount] [int] NULL,
        [val4_id] [int] NULL
        [val4_amount] [int] NULL,
) ON [PRIMARY] 
```

还有一些其他的表是：

```
CREATE TABLE [dbo].[val](
    [val_id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
        [amount] [int] NOT NULL,
) ON [PRIMARY] 
```

应用程序的用户将从表 val 中选择一个条目，应用程序将以非确定性的方式将 val_id 和 amount 放入 val?_id 和 val?_amount 中（是的，我知道这不好，但我有来处理它）。

鉴于 val_id/amount 可以存储在任何 val?_id/val?_amount 列中，有没有一种方法可以生成输出，该输出将按 foo 表中的 val_id 和 SUM foo 表中的金额值进行分组？注意，如果 val_id 存储在 val1_id 中，金额将始终存储在该行内的 val1_amount 中，但相同的 val_id 可能会出现在不同行的不同 val?_id 中（但金额会在相应的列中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T17:43:35.277

好吧，在你打了设计这个的人之后，你可以尝试`UNPIVOT`你的列，然后简单地`SUM`选择`val_amount`结果列。我不会真正使用[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)，但我正在做同样的事情`CROSS APPLY`：

```
SELECT x.Val_id, SUM(x.val_amount) Val_Amount
FROM dbo.foo t
CROSS APPLY 
(
    VALUES
        (t.val1_id, t.val1_amount),
        (t.val2_id, t.val2_amount),
        (t.val3_id, t.val3_amount),
        (t.val4_id, t.val4_amount)
) x (Val_id, val_amount)
GROUP BY x.Val_id; 
```

[**这是一个带有现场演示的 sqlfiddle**](http://sqlfiddle.com/#!3/1bc2d/4)供您尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:54:34.227

我是使用 COALESCE 函数完成的。我不清楚为什么我必须做一个嵌套查询，但我不能让它接受它：

```
select id, sum(amount)
FROM 
   (SELECT COALESCE(val1_id , val2_id , val3_id , val4_id) id, 
       COALESCE(val1_amount , val2_amount , val3_amount , val4_amount) amount  
    from foo) coalesced_data 
GROUP BY ID 
```

[http://sqlfiddle.com/#!3/2ef35/6](http://sqlfiddle.com/#!3/2ef35/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:53:51.520

> Is there a way to produce output that will group by the val_id from the foo table and SUM the amount values from the foo table, given that the val_id/amount may be stored in any of the val?_id/val?_amount columns?

Hell is other people's data. You might do something like this:

```
create view FOO as
select foo.id, val1_id as valueid, val1_amount as amt from T
union all
select foo.id  val2_id as valueid, val2_amount as amt from T
union all
select foo.id  val3_id as valueid, val3_amount as amt from T
union all
select foo.id  val4_id as valueid, val4_amount as amt from T 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:45:06.293

如果您已正确声明该值*只会*出现在一对`(val_id, val_amount)`列中，而其他 3 对为空白，那么这将比当前接受的答案更好（@lamak's）

```
select id = coalesce(val1_id, val2_id, val3_id, val4_id),
       val = sum(coalesce(val1_amount, val2_amount, val3_amount, val4_amount))
from foo
group by coalesce(val1_id, val2_id, val3_id, val4_id); 
```

这很容易理解，即使重复 COALESCE，它实际上只评估一次，因此没有性能损失。查询计划估计为其他查询成本的 50%。

[当前接受的答案](https://stackoverflow.com/a/16153389/573261)也可能会产生一个幻像 NULL 行，例如对于我的 SQL fiddle 演示中不包含第三对 (val3_amount) 中的任何内容的数据。

[SQL Fiddle 演示](http://sqlfiddle.com/#!6/53080/4/0)

# javascript - 无法在文本字段中提供输入作为“点”

> ID：16153128
> 
> 赞同：0
> 
> 时间：2013-04-22T17:29:41.990
> 
> 标签：javascript, jquery, html

我有此代码用于验证文本字段编号。

此代码工作正常，但唯一的问题是它不允许我输入`.`(dot) 。我的文本字段是金额，金额可以是 222.234234 或 222 所以我应该添加什么代码以使用户能够使用以下脚本输入句点

```
function ValidateNum(input,event)
    {
        var keyCode = event.which ? event.which : event.keyCode;
        if((parseInt(keyCode)>=48 && parseInt(keyCode)<=57) || parseInt(keyCode)==08 ||  parseInt(keyCode)==09 || parseInt(keyCode)==127 )  
        {
           return true;
        }
        return false;
    } 
```

文本域

```
<input type="text" name="from_amount" onkeypress="return ValidateNum(this,event)" id="from_amount" placeholder="    Type to convert" />` 
```

所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:31:17.377

键码为`.`190。
您可以在此处查看此列表-> [http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:32:04.267

为什么不验证整个字符串而不是验证每个输入的字符？

做这个：

```
//I am assuming that input is the text element
function validateNumber(input) {
    //newer browsers should have .trim(). Otherwise you can do something like:
    //   input.value.replace(/^\s+|\s+$/g, "");
    return /^\d+(\.\d+)?$/.test(input.value.trim()); 
} 
```

您当前的验证功能是否会考虑使用仅输入`.`字符的情况？多个`.`字符呢？值`123.`, or `1.43.3`, or`1..2`怎么样？看起来当前函数只验证输入的字符而不查看该字符的上下文（即，它周围的内容）。

另一方面，考虑使用 jQuery 之类的东西或绑定到输入元素而不是使用`onkeypress`属性。这种绑定方法或多或少已被弃用且不推荐。这种验证方法还可以防止可能令人困惑的按键事件。最好在他们填写后验证整个表单，或者将文本字段标记为无效，因为他们正在填写。

您还可以使用 HTML5`type`值`number`代替`text`来限制用户可以在该字段中输入的内容。这样，您甚至不必进行任何验证。

# javascript - 尝试编写一个使用提交函数来验证两个字段的 jquerying 脚本

> ID：16153129
> 
> 赞同：1
> 
> 时间：2013-04-22T17:29:43.207
> 
> 标签：javascript, jquery

我正在努力实现以下目标，但我的代码存在问题以使其正常工作。任何帮助将不胜感激。

目标：添加 javascript/jQuery 代码以要求登录。有 2 个字段，名字和姓氏。验证输入。必须分别是“Rick”和“James”。验证字段后，页面上会显示图片。单击图片时，显示页面内容。至少有 2 个带有翻转状态的链接按钮来更改按钮颜色和/或文本大小。

这是我的脚本：

```
$(document).ready(function() {

   $("#signup").validate({
      rules: {
        firstName: { required: true  },
        lastName:  { required: true  }
      }, //end rules
      messages:  {
         firstName: {required: "You must enter a value in this field."  },
         lastName: {required: "You must enter a value in this field."  }
      }, // end messages
          errorPlacement: function(error, element) { 
          error.insertAfter(element);
          } 
     }); // end validate
     $('#signup').submit(function() {
         if (($('#firstname').val() == 'John')  && ($('#lastname').val() == 'Taylor'))
            {alert('This works!');
            $('#pic').show();
            $('#main').css("backgorund-image", "url(starwars.jpg)");
          }
         else { alert('Invalid Name'); }
      });  //end submit
    $('#pic').click(function() {
        $('#button1').show();
        $('#button2').show();
    }); // end click
}); // end ready 
```

HTML：

```
<form id="signup">
        <div>
            <label for="firstName" class="label">First Name</label>
            <input name="firstName" type="text" id="firstname"  class="required" title="Please type your first name.">
        </div>          
        <div>
            <label for="lastName" class="label">Last Name</label>
            <input name="lastName" type="test" class="required" id="lastname">
        </div>          
        <div>
            <input type="submit" name="submit" id="submit" value="Submit">
        </div>
        <div>
        <img src="sith_ewok.png" id="pic">
        <button id="button1">Jedi</button>
        <button id="button2">Sith</button>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:45:09.403

到目前为止，您的代码中唯一突出的`background-image`错误是提交函数中的拼写错误。

可能的一件事是，由于表单会自动发布，因此单击提交按钮的影响很小。这可能意味着您永远看不到脚本执行的效果。要解决此问题，请添加`return false;`到提交处理：

```
 $('#signup').submit(function() {
     if (($('#firstname').val() == 'John')  && ($('#lastname').val() == 'Taylor'))
     {alert('This works!');
        $('#pic').show();
        $('#main').css("backgorund-image", "url(starwars.jpg)");
      }
     else { alert('Invalid Name'); }
     return false;
  });  //end submit 
```

请注意，如果您实际上要使用此表单在另一个页面上进行进一步处理，您稍后可能希望提交功能允许页面在字段签出的情况下发布。为此，将`return false;`代码行移动到`else`和/或添加 a`return true;`作为主`if`块中的最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:55:37.060

下定决心！是“Rick James”还是“John Taylor”？！

无论如何，代码看起来不错，除了

1.  您应该放入`return false;`以`$.submit()`防止页面刷新

2.  拼写错误`background-color`

3.  图像和两个按钮应`display:none`在开始时设置为，因此该`show()`功能将实际起作用

此外，我没有看到您在任何地方更改按钮颜色/状态的代码。所以我只是在按钮上添加了一些`.mouseover`和`.mouseout`事件。这通常可以用 css 来完成，例如`button:hover {color:red}`.

这是一个工作演示：http: [//jsfiddle.net/dUG8Y/](http://jsfiddle.net/dUG8Y/)

希望对您有所帮助，愿原力与您同在。

# c++ - std::list.sort() 的奇怪效率

> ID：16153136
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:29:52.817
> 
> 标签：c++, list, sorting, stl, linked-list

好的，所以以下内容：

我想使用一个双链表并想对其中的对象进行排序。对象属于另一类。奇怪的是：当我使用自己创建的双链表时，我在将元素添加到列表的那一刻对它们进行排序。这就像插入排序，所以效率为 n^2。

但这比使用 std::list 排序要快得多，在 std::list 排序中，我将所有元素添加到列表中，然后调用 sort() 。而且我真的不明白为什么......

欲了解更多信息：在我排序〜500个元素的那一刻。

我对列表做错了吗？

编辑：一些代码

std::list 的代码

```
for every object:
    list.push_back(object);
list.sort(); 
```

我的列表：

```
struct node{
    someObject* data;
    float depth;
    node* prev;
    node* next;
    node(someObject* o){
        data = o;
        prev = NULL;
        next = NULL;
        depth = depthFunc(o);
    }
    float depthFunc(someObject* o);
};
struct myList{
    node* head;
    node* tail;
    void insertAfter(node* toAdd, node* n);
    void insertBefore(node* toAdd, node* n);
    void addNode(someObject* o){
        node* n = new node(o);
        if (head == NULL) {
            head = n;
            tail = n;
        } else {
            node* temp = head;
            while(temp != NULL && temp->depth < n->depth){
                temp = temp->next;
            }
            if (temp != NULL) insertBefore(n, temp);
            else insertAfter(n, tail);
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:21:20.210

您的手写排序函数具有 O( `N^2`) 时间复杂度。每个元素都被插入（你调用`addNode` `n`时间），你需要`n`操作来找到插入点（给`n * n = n^2`）。

`std::list<T>::sort()`需要 O( `n lg n`·) 复杂度，这比 O(·) 快得多`N^2`。（`lg n`比增长慢得多`n`）

您的手写排序是[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)的变体。

请注意，对于大多数输入，使用`std::vector`and`std::sort`代替`std::list`and`std::list::sort`会产生更快的结果。

* * *

如果您的问题是“为什么手写版本更快？”，这取决于您的输入。插入排序可以`O(n)`用于某些输入。（对于您的实现，当元素以相反的顺序插入时会发生这种情况）

# java - DropDownChoices 从下拉列表中返回 null 作为所选项目的值

> ID：16153143
> 
> 赞同：0
> 
> 时间：2013-04-22T17:30:23.373
> 
> 标签：java, wicket

我正在尝试访问用户在 apache wicket 的 DropDownChoices 中选择的值。我将 AjaxFormComponentUpdatingBehavior 添加到 DropDownChoices 元素。我在 onUpdate 行为方法中将 null 作为选定选项。我尝试通过不同的方式访问选定的值，如下面的代码所示，但在调试时仍然为空。

私有字符串 selectedMake；

```
private final Map<String, List<String>> modelsMap = new HashMap<String, List<String>>(); // map:company->model

    modelsMap.put( "AUDI", Arrays.asList( "A4", "A6", "TT" ) );
    modelsMap.put( "CADILLAC", Arrays.asList( "CTS", "DTS", "ESCALADE", "SRX", "DEVILLE" ) );
    modelsMap.put( "FORD", Arrays.asList( "CROWN", "ESCAPE", "EXPEDITION", "EXPLORER", "F-150" ) );

    IModel<List<? extends String>> makeChoices = new AbstractReadOnlyModel<List<? extends String>>() {
        @Override
        public List<String> getObject() {
            return new ArrayList<String>( modelsMap.keySet() );
        }

    };

    lastDropDownChoice = new DropDownChoice<String>( "daynamicTimeConstrains",
                                                     new PropertyModel<String>( this, "selectedMake" ), makeChoices );

    lastDropDownChoice.add( new AjaxFormComponentUpdatingBehavior( "onchange" ) {
        @Override
        protected void onUpdate( AjaxRequestTarget target ) {

            // Getting this as null 
            System.out.println( selectedMake );

            // Getting this as null
            getFormComponent().getModel().getObject();

        }
    } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:17:18.073

使用[OnChangeAjaxBehavior](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/form/OnChangeAjaxBehavior.html)。这段代码对我有用：

```
public class HomePage extends WebPage {

    private String text;

    public String getText() {
        return text;
    }

    private static final List l = Arrays.asList("a", "b", "c");

    public HomePage(final PageParameters parameters) {
        super(parameters);
        add(ddc());
    }

    private DropDownChoice ddc(){
        DropDownChoice ddc = new DropDownChoice("ddc", new PropertyModel(this, "text"), l);
        ddc.add(new OnChangeAjaxBehavior() {

            @Override
            protected void onUpdate(AjaxRequestTarget target) {
                System.out.println(getComponent().getDefaultModelObjectAsString());
                System.out.println("getText: " + getText());
            }
        });
        return ddc;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:52:18.707

过去我遇到过一些问题，主要是文本框，因为在提交表单之前不会处理输入。也就是说，当属性模型似乎没有正确更新时，我将使用 getFormComponent().getConvertedInput() 并将其转换为 AjaxFormComponentUpdatingBehavior() ，如下所示：

```
lastDropDownChoice.add( new AjaxFormComponentUpdatingBehavior( "onchange" ) {
    @Override
    protected void onUpdate( AjaxRequestTarget target ) {
        String input = (String) getFormComponent().getConvertedInput();
        System.out.println( input );
        selectedModel = input;
    }
} ); 
```

我很想听听其他人的意见，这种方法可能有什么缺点，但它似乎确实比人们可以使用的许多其他看似潜在的选择更可靠。

顺便说一句，我通常总是创建一个新的 IChoiceRenderer() 并覆盖抽象值，以便能够传递对象而不是字符串，并能够准确地显示它们，如下所示：

```
lastDropDownChoice = new IndicatingDropDownChoice("daynamicTimeConstrains", new PropertyModel(this, "selectedMake"), makeList, new IChoiceRenderer() {
    @Override
    public Object getDisplayValue(Object o) {
        return makeList.indexOf(selectedMake) + "." + o.toString();
    }

    @Override
    public String getIdValue(Object o, int i) {
        return o.toString();
    }
}); 
```

# regex - 从字符串中间提取变量值

> ID：16153144
> 
> 赞同：1
> 
> 时间：2013-04-22T17:30:24.390
> 
> 标签：regex, powershell

我一直试图弄清楚很长一段时间。如何使用 powershell 从以下字符串中获取 PID 值？我认为 REGEX 是要走的路，但我不太清楚语法。因为除了 PID 之外的一切都将保持不变。

```
 $foo = <VALUE>I am just a string and the string is the thing. PID:25973\. After this do that and blah blah.</VALUE> 
```

我在正则表达式中尝试了以下内容

```
[regex]::Matches($foo, 'PID:.*') | % {$_.Captures[0].Groups[1].value}
[regex]::Matches($foo, 'PID:*?>') | % {$_.Captures[0].Groups[1].value}
[regex]::Matches($foo, 'PID:*?>') | % {$_.Captures[0].Groups[1].value}
[regex]::Matches($foo, 'PID:*?>(.+).') | % {$_.Captures[0].Groups[1].value} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:39:08.457

对于您的正则表达式，您需要指出您要查找的部分之前和之后的内容。 `PID:.*`将找到从 PID 到字符串末尾的所有内容。

并且要使用捕获组，您需要在您的正则表达式中拥有一些`(`和`)`，它定义了一个组。

所以试试这个尺寸：

```
[regex]::Matches($foo,'PID:(\d+)') | % {$_.Captures[0].Groups[1].value} 
```

我正在使用`PID:(\d+)`. 意思是“`\d+`一个或多个数字”。周围的括号将其`(\d+)`标识为我可以使用 访问的组`Captures[0].Groups[1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:51:27.050

这是另一种选择。基本上它用第一个捕获组替换所有内容（这是'pid：'之后的数字：

```
$foo -replace '^.+PID:(\d+).+$','$1' 
```

# ios - 高度从 MKPlacemark 消失

> ID：16153148
> 
> 赞同：2
> 
> 时间：2013-04-22T17:30:38.310
> 
> 标签：ios, objective-c, cllocation, mkreversegeocoder

所以我有一些代码可以从手机中获取用户的位置`CLLocation`，然后我对其进行反向地理编码。问题是结果`MKPlacemark`具有`0`高度，尽管事实上`CLLocation`在高度字段中有一个值。

有意义的是，如果我只是询问一些坐标的地址，我不一定会得到高度（因为这需要地形逻辑）。这里的大多数问题都建议调用 topo 服务。

我想知道为什么反向地理编码器不仅会保留海拔高度，还会询问人们他们对这个问题的首选解决方案是什么。这并不难弄清楚：我可以单独传递高度，然后将其塞入我的最终对象（我自己的地址类）中，但这很难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T22:33:50.573

这确实是这些班级此时的状态。可能是苹果公司的错误报告。

# knockout.js - 在 knockout.js 中绑定 viewmodel 可观察属性的不可观察属性的语法

> ID：16153150
> 
> 赞同：0
> 
> 时间：2013-04-22T17:30:44.820
> 
> 标签：knockout.js, knockout-2.0

我有一个视图模型如下：

```
function foo(param){

    this.prop = param;

};

var viewModel = function(){

    this.foo = ko.observable();

}; 
```

并且在视图中

```
<input type="text" data-bind="value: foo.prop" /> 
```

在视图中，当我使用语法时

```
<span data-bind="text: foo.prop" ></span> 
```

它什么也没显示，对更新没有反应，但有

```
<div data-bind="with: foo" >
    <span data-bind="text: prop" ></span>
</div> 
```

它在值变化时起作用并发生变化。

第一次实施有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:46:01.287

在您的 ViewModel 中，如果您使用的是另一个对象的某个变量，我认为您最好在此对象定义中将其变量标记为可观察的。例如，您可以执行以下操作：

```
function FooClass(param) {
    this.prop = ko.observable(param);
};

function viewModel() {
    this.foo = new FooClass('Hello World');
};
ko.applyBindings(new viewModel()); 
```

[jsfiddle 示例](http://jsfiddle.net/hSm7J/)

# android - 没有子项的可扩展列表视图

> ID：16153154
> 
> 赞同：9
> 
> 时间：2013-04-22T17:30:47.303
> 
> 标签：android, nullpointerexception, expandablelistadapter

我是 android 开发的新手，也是第一次使用可扩展的列表视图。我正在创建一个应用程序，在其中我从 web 服务获取 d 可扩展列表视图的所有内容。我也从 wevservice 获取所有内容，但是当可扩展列表视图中没有父级的子级时，可扩展列表视图 getchildcount () 的自定义适配器方法返回 null 并给出空指针异常如何在列表中仅显示父级没有孩子，两者都可用？

谢谢

```
public View getChildView(int p_id, int c_id, boolean bln1, View view,ViewGroup viewgroup) {
    // TODO Auto-generated method stub

     if (view == null) {
            view = inflater.inflate(com.example.eventlive.R.layout.homescreen_list_item_child, viewgroup,false);
        }

        TextView textView = (TextView) view.findViewById(R.id.list_item_text_child);
        //"i" is the position of the parent/group in the list and 
        //"i1" is the position of the child
        textView.setText(mParent.get(p_id).getArrayChildren().get(c_id));
        view.setBackgroundResource(R.drawable.child_bg);
        //return the entire view
        return view;
}

//counts the number of children items so the list knows how many times calls getChildView() method
@Override
public int getChildrenCount(int p_id) {
    // TODO Auto-generated method stub
    return mParent.get(p_id).getArrayChildren().size();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-11T16:27:43.190

只需像这样初始化一个空的子数组：

```
private HashMap<String, ArrayList<String>> mGroupsItems =
        new HashMap<String, ArrayList<String>>();
. . .
mGroupsItems.put(name_of_empty_group, new ArrayList<String>()); 
```

# asp.net - 如何使用脚本管理器加载脚本，但一些脚本在 UI 加载之前和一些之后

> ID：16153155
> 
> 赞同：0
> 
> 时间：2013-04-22T17:30:49.640
> 
> 标签：asp.net, c#-4.0

我在 asp.net 中遇到问题，我想在加载 UI 之前加载一些脚本，在加载 UI 之后加载一些脚本。但是因为我们可以在页面中使用单个脚本管理器，所以我们可以一次性使用脚本管理器的 LOadbeforeUi 属性...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:53:06.083

[`ScriptManager.RegisterClientScriptBlock`](http://msdn.microsoft.com/en-us/library/bb338357.aspx)将被添加到页面的开头，因此它将在 DOM 完全加载之前执行。

[`ScriptManager.RegisterStartupScript`](http://msdn.microsoft.com/en-us/library/bb310408.aspx)将在页面内容之后添加，因此将在 DOM 解析后执行。

# bash - 从输入中提取所有文件扩展名

> ID：16153157
> 
> 赞同：0
> 
> 时间：2013-04-22T17:31:02.210
> 
> 标签：bash, unix, grep, file-extension

我的输入是一个大的文件列表。它们的名称中可以包含任何字符（包括句点，因为也有一些包名称）。这是一些小样本输入：

```
com.test.impl.servlets.Test.xml
TestClass.class
TestClass1.class
Test2.java
Test3.java 
```

我想知道列表中所有不同的文件扩展名，所以本质上，我想要 egrep -o*上一个*时期之后的所有内容。像这样的东西：

```
input | xargs <unknown command but probably egrep> | sort -u 
```

将返回：

```
.xml
.class
.java 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:35:35.037

你可以试试`grep -o '\.[^.]*$'`：

```
$ echo 'com.test.impl.servlets.Test.xml
TestClass.class
TestClass1.class
Test2.java
Test3.java' | grep -o '\.[^.]*$' | sort -u
.class
.java
.xml 
```

或`sed 's/.*\././'`：

```
$ echo 'com.test.impl.servlets.Test.xml
TestClass.class
TestClass1.class
Test2.java
Test3.java' | sed 's/.*\././' | sort -u
.class
.java
.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:45:37.143

如果您的 make 已编译 pcre

```
$ grep -P -o '.*\.\K.*' 
```

# php - 使用 Preg_Replace 删除 Word

> ID：16153159
> 
> 赞同：0
> 
> 时间：2013-04-22T17:31:08.203
> 
> 标签：php, preg-replace, echo

我有以下 php 拉回文本：

```
if( $this->sitemap->params->get('show_menutitle') )
echo '<h2 class="menutitle">'.$menu->name.'</h2>'; 
```

每次运行它都会拉回来：

```
About Menu
Support Menu
Contact Menu 
```

我需要`Menu`从所有实例中删除文本，但无法确定要添加到上面的 preg_replace。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:33:04.870

您不需要正则表达式来替换常量。

```
echo '<h2 class="menutitle">'.str_replace(" Menu","",$menu->name).'</h2>'; 
```

# javascript - 你如何创建一个 javascript api 来允许查看器绘制？

> ID：16153163
> 
> 赞同：-5
> 
> 时间：2013-04-22T17:31:12.747
> 
> 标签：javascript, jquery, css, html

我已经尝试在 javascript 库和网络上搜索和搜索这个，但我没有找到任何东西。如果你不明白我的意思，我的意思是[这样的](http://slimber.com/painter/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:37:04.500

我不认为它真的是你的链接中的 javascript，而是 flash。

但要回答您的问题：您可以使用 HTML5 Canvas，它提供了绘图功能。您可以覆盖按键并赋予鼠标特殊功能。网上有很多这方面的教程，只需搜索“html canvas”即可。

# php - Jquery Ajax Json解析

> ID：16153167
> 
> 赞同：0
> 
> 时间：2013-04-22T17:31:21.480
> 
> 标签：php, ajax, json

我知道关于

> 当您指定“json”时，回调的数据参数将已经被解析。无需调用 JSON.parse。

但我有一个不同的问题，即下面的代码块在一台服务器上工作正常，解析 json 没有问题，你可以看到我没有在 ajax 请求中添加'dataType：json'。因为我没有将数据类型指定为 json 我应该解析响应，对吗？

问题是相同的代码块在另一台服务器中不起作用，在控制台中显示错误为

```
SyntaxError: JSON.parse: unexpected character   
return window.JSON.parse( data ); 
```

真正的问题可能是什么？

来自 PHP 的 JSON

> {"returning":138,"new_visitor":439,"page_views":6776,"visits":3217,"pages_visits":1.9}

jQuery

```
$.ajax({
     url: 'includes/gapi.apis.php',
     data: {action: 'visits'},
     type: 'post',
     async:false,
     success: function(output1) {
        var obj1 = jQuery.parseJSON(output1);
     } 
```

# javascript - 测量iOS每帧可以绘制多少次

> ID：16153174
> 
> 赞同：0
> 
> 时间：2013-04-22T17:31:44.170
> 
> 标签：javascript, ios, performance, benchmarking, graphic

与 HTML5/JavaScript 相比，我正在尝试对 iOS 本身可以在帧刷新之间绘制多少次进行基准测试。

使用这个 JavaScript，我得到了一个数字，说明浏览器在 33 毫秒（30 赫兹）期间可以绘制多少次：

```
var ctx = document.getElementById('canvas').getContext('2d');
var img = document.getElementById('img');

var draw = function(load) {
    var angle = 0.01;
    ctx.clearRect(0,0,400,400);
    ctx.save();
    ctx.translate(200,200);
    for (var i=0; i<load; i++) {
        ctx.rotate(angle);
        ctx.drawImage(img, 0, 0);
    }
    ctx.restore();
};

var t, previousTime;
var drawLoad = 1;
var slowCount = 0;
var maxSlow = 10;

var requestAnimationFrame = window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame;

t = previousTime = Date.now();

var tick = function() {
    var maximumFrameTime = 1000/30; // 30 FPS
    t = Date.now();
    var elapsed = t - previousTime;
    previousTime = t;
    if (elapsed < maximumFrameTime || slowCount < maxSlow) {
        if (elapsed < maximumFrameTime) {
            drawLoad+=10;
        } else {
            slowCount++;
        }
        draw(drawLoad);
        requestAnimationFrame(tick);
    } else {
      // found maximum sustainable load at 30 FPS
      document.getElementById('res').innerHTML = ("could draw "+(drawLoad)+" in " + maximumFrameTime + " ms");
    }
};
requestAnimationFrame(tick); 
```

有关带有 HTML 标记的完整代码，请参见[http://jsfiddle.net/tbhZs/117/](http://jsfiddle.net/tbhZs/117/)。

我在objective-c中摆弄，没有找到一种公平的方法来获得一个可比较的数字。有没有办法在 iOS 中本地生成可比较的基准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:52:46.960

Try instruments tool. you can measure the frames per socond via the core animation instrument.

# iis-7 - 没有为无扩展 URL 提供自定义 404 页面

> ID：16153175
> 
> 赞同：1
> 
> 时间：2013-04-22T17:31:44.143
> 
> 标签：iis-7, web-config

我遇到了一种情况，

我的自定义 404 页面适用于具有扩展名的 URL。

[http://www.space.ca/ssss.aspx](http://www.space.ca/ssss.aspx) 自定义页面 URL 按预期提供，

但是，如果您尝试不带 .aspx 扩展名的链接 [http://www.space.ca/ssss](http://www.space.ca/ssss)

它转到 IIS 默认页面。知道为什么吗？

这是我的配置，在 system.webserver 里面

```
 <httpErrors>
            <remove statusCode="500" subStatusCode="-1" />
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" prefixLanguageFilePath="" path="/errors/404.aspx" responseMode="ExecuteURL" />
            <error statusCode="500" prefixLanguageFilePath="" path="/errors/500.aspx" responseMode="ExecuteURL" />
        </httpErrors> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T10:44:58.903

我知道这是很久以前发布的，但这可能对其他人有所帮助......

我遇到了同样的问题，主要是因为路径值中有'~'，遗憾的是这不是你的问题，但如果你遵循以下，那么你应该没问题......

```
<customErrors mode="On" redirectMode="ResponseRewrite">
   <error statusCode="401" redirect="~/Errors/Unauthorized.aspx" />
   <error statusCode="403" redirect="~/Errors/Forbidden.aspx" />
   <error statusCode="404" redirect="~/Errors/PageNotFound.aspx" />
   <error statusCode="500" redirect="~/Errors/ServerError.aspx" />
   <error statusCode="501" redirect="~/Errors/ServerError.aspx" />
</customErrors>

<httpErrors errorMode="Custom">
   <remove statusCode="401" subStatusCode="-1" />
   <remove statusCode="403" subStatusCode="-1" />
   <remove statusCode="404" subStatusCode="-1" />
   <remove statusCode="500" subStatusCode="-1" />
   <remove statusCode="501" subStatusCode="-1" />
   <error statusCode="401" path="/Errors/Unauthorized.aspx" responseMode="ExecuteURL" />
   <error statusCode="403" path="/Errors/Forbidden.aspx" responseMode="ExecuteURL" />
   <error statusCode="404" path="/Errors/PageNotFound.aspx" responseMode="ExecuteURL" />
   <error statusCode="500" path="/Errors/ServerError.aspx" responseMode="ExecuteURL" />
   <error statusCode="501" path="/Errors/ServerError.aspx" responseMode="ExecuteURL" />
</httpErrors> 
```

当然，您只需要为您希望为其创建自定义页面的那些状态代码添加条目。还要记住**httpErrors**应该放在**部分，以及其中的**customErrors****部分。****

 ****您可以添加**customErrors**部分，因为它处理托管代码。**httpErrors**部分将处理所有内容的错误。

还请注意最后一件事...当您在本地机器上进行测试时，ASP.NET 和 HTTP 错误的默认设置是在本地浏览器上显示详细信息。您需要设置**customErrors** mode="On" AND **httpErrors** errorMode="Custom" 才能在本地计算机上查看自定义错误。

更多信息可以在这里找到：[http ://www.iis.net/ConfigReference/system.webServer/httpErrors](http://www.iis.net/ConfigReference/system.webServer/httpErrors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T08:34:18.887

这对我有用。

```
<httpErrors errorMode="Custom" existingResponse="Replace" defaultResponseMode="ExecuteURL">
      <clear />
      <error statusCode="404" path="~/error404.aspx" responseMode="Redirect" />
    </httpErrors> 
```****

# javascript - 如何隐藏具有给定类的所有元素的父元素，但父元素也具有特定类？

> ID：16153177
> 
> 赞同：0
> 
> 时间：2013-04-22T17:32:00.557
> 
> 标签：javascript, jquery, jquery-selectors, parent-child

我想隐藏具有 class 的 li 元素的所有实例，这些实例具有 class`parent`的直接子 div 元素`child-1`。这是一个伪代码示例，该方法`hideParent()`将隐藏所选元素的父级：

```
$("li.parent > div.child-1").hideParent(); 
```

以下是我的 HTML 示例，其中`li.parent`应隐藏第二个和第三个元素。

```
<li class="parent">
    <div class="child-0"> ... </div>
</li>
<li class="parent">
    <div class="child-1"> ... </div>
</li>
<li class="parent">
    <div class="child-1"> ... </div>
</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:33:20.120

试试这个：

```
$("li.parent > div.child-1").parent().hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:33:42.663

直接选择相关子元素，定位其父元素（由相关选择器过滤），然后隐藏它们。

```
$("div.child-1").parent('li.parent').hide(); 
```

请参阅：
[`parent`文档](http://api.jquery.com/parent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:41:56.827

另一种选择是使用`filter`：

```
$("li").filter(function () {
    var $this = $(this);
    var isParent = $this.hasClass("parent");
    var childMatchCount = $this.children("div").filter(".child-1").length;
    return isParent && childMatchCount;
}).hide(); 
```

**演示：http:** [//jsfiddle.net/GEhfP/](http://jsfiddle.net/GEhfP/)

尽管这可以通过多种方式进行优化。但对我来说，在非常明确的意义上，它更“可读”。使用 jsperf，我能最快`filter`开始工作的是：

```
$("li.parent").filter(function () {
    return $(this).children("div.child-1").length;
}).hide(); 
```

@Joe 的回答是最快的：`$("li.parent > div.child-1").parent()`

# java - Java - 将字符串转换为 char[]

> ID：16153180
> 
> 赞同：-5
> 
> 时间：2013-04-22T17:32:08.787
> 
> 标签：java, arrays, data-structures, char

我的代码需要一些帮助。我想使用 toCharArray() 方法将 String 对象转换为 char[]，但我无法让它工作。

我在一个名为 Wordlist 的类中有这个函数：

```
static public char[] Contains(String w)
  {
     if (list.contains(w)) return w.toCharArray();
         else return null;
  } 
```

我用字符串变量 res 调用函数：

```
char[] result = new char[4];
result = WordList.Contains(res); 
```

然后它似乎返回null，因为结果的值为null。但如果更改包含以下内容：

```
static public char[] Contains(String w)
      {
         if (list.contains(w)){
            System.out.println(w.toCharArray());
          }
         else return null;
      } 
```

然后它打印字符串。这怎么可能？我的功能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:53:48.413

I don't know what you're trying to achieve but:

a) read about java naming conventions

b) List<> (and few others in java.util) has a method called .contains (so calling yours Contains causes confusion)

c) do you really want to return null in your "Contains" method?

d) the list (I presume you mean java.util.List) is never declared nor initialized

e) I presume res is a String. it is never declared not initialized.

This should give you an idea :

```
public static void main(String args[])
{

  String str = "someString";
  List<String> list = new ArrayList<String>();

  list.add(str);
  char[] charArray = containsString(str,list);
  System.out.println(charArray);
}
public static char[] containsString(String str, List<String> list)
{
   if (list.contains(str)) return str.toCharArray();
       else return null;
} 
```

# php - 在jquery中将数据返回到`.ajax`回调时，我是否必须使用`echo`？

> ID：16153181
> 
> 赞同：0
> 
> 时间：2013-04-22T17:32:09.423
> 
> 标签：php, jquery, ajax, callback, echo

我是通过在线教程学习的n00b。我在名为“response.php”的“服务器端”测试文件中有以下代码：

```
<?php
if (isset($_POST))
{
$answer = $_POST;
echo json_encode($answer);
}  else {
echo json_encode(array('status' => false, 'msg' => 'no good'));
}  
?> 
```

`echo`将数据返回到`.ajax`jquery 回调时，我是否总是必须使用？还有其他方法可以将数据发送回客户端吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:34:17.033

是的，否则你只是调用`json_encode`并丢弃结果。

`json_encode`只*返回*编码的字符串。然后，您必须使用 .将其发送回浏览器`echo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:33:01.250

你也可以使用 print :) 除了 echo 。

# html - 正则表达式限制输入字段最多有两位小数

> ID：16153184
> 
> 赞同：0
> 
> 时间：2013-04-22T17:32:09.723
> 
> 标签：html, regex, input, decimal

要求：

我试图将输入字段限制为仅输入数字或最多两个十进制数字的数字。如果用户输入多于两位小数，则输入字段必须仅显示最多两位小数的数字，并删除所有其他数字。我正在使用正则表达式。

问题：

当输入字段中输入多于两位小数时，所有小数位将被删除并显示。问题在于正则表达式。

请帮助我形成正确的正则表达式。

代码：

[http://jsfiddle.net/h6kYh/](http://jsfiddle.net/h6kYh/)

```
$(document).ready(function() {

  $("#AmountField").bind("keyup change", function() {

    var value = $(this).val();

      var numericReg = /^d+(?:\.\d{0,2})?$/ ;
      if( !numericReg.test(value) )
      {
          value = value.replace(/(?=\d*\.?)(\d{3})/g,"");
          $(this).val(value);
      }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:13:16.773

尝试

```
var numericReg = /^\d+\.?\d?\d?$/ ;
if( !numericReg.test(value) ) {
    value = value.replace(/^(\d+\.?\d?\d?)?.*/,'$1');
    $(this).val(value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:45:49.240

它应该是

```
 var invalidNumericReg = /^\d+(\.\d{3,})$/;
  var validNumericReg = /^d+\(.\d{1,2})?$/;

  if( invalidNumericReg.test(value) )//has more than 3 decimal numbers!
  {
      value = value.replace(/^(\d+\.\d{2})\d+$/g,"$1");
      $(this).val(value);
  }
  else if( ! validNumericReg.test(value) )
  {
        //invalid input
  } 
```

# c# - 寻路代码优化

> ID：16153186
> 
> 赞同：0
> 
> 时间：2013-04-22T17:32:13.140
> 
> 标签：c#, linq, iteration

先说一点背景。我正在开发一个在位置之间生成“路线”的系统。位置具有预定义的邻居列表，不限于与其相邻的邻居。搜索可以安全地假设，通过选择离目标目的地最近的邻居（数字上），它正在朝着它做出最佳移动。

我有如下所示的工作代码：

```
public Route GetRoute(int StartPoint, int Destination)
{
    Route returnRoute = new Route();
    returnRoute.steps = new List<int>();
    bool locationReached = false;
    int selectedNeighbour;
    int distanceFromTarget;
    int currentPoint = StartPoint; // set the current point to the start point

    while (!locationReached)
    {
        selectedNeighbour = 0;
        distanceFromTarget = 5000; // nominal amount guaranteed to be overwritten

        var neighbours = locations.FirstOrDefault(l => l.LocationID == currentPoint).Neighbours;

        for (int i = 0; i < neighbours.Length; i++)
        {
            // get the current neighbours, then check proximity
            int currentNeighbour = neighbours[i];
            int tempDistance = Math.Abs( currentNeighbour - Destination );

            // if nearer than previous neighbour, set it as the chosen location
            if ( tempDistance < distanceFromTarget )
            {
                distanceFromTarget = tempDistance;
                selectedNeighbour = currentNeighbour;

                // if the selected neighbour is the destination, we're done
                if ( selectedNeighbour == Destination )
                    locationReached = true;
            }

        } // for

        // add the selected neighbour if we found one
        if ( selectedNeighbour != 0 )
        {
            currentPoint = selectedNeighbour;
            returnRoute.steps.Add(selectedNeighbour);
        }
        else 
        {
            Debug.Log ("No Route Found");
            return returnRoute; 
        }

    } // while

    return returnRoute;
} 
```

我的问题是关于邻居 (int[]) 变量的循环。如何最好地优化它？我见过一些使用 linq 和 ordering 的方法，但也评论说这种方法可能效率低下。我在这里需要效率而不是整洁。

非常感谢。

# javascript - Jquery mobile float：left issue，header-icon阻塞了页面的左侧

> ID：16153188
> 
> 赞同：0
> 
> 时间：2013-04-22T17:32:15.640
> 
> 标签：javascript, jquery, html, jquery-mobile

我使用 Jquery mobile 创建了标题和内容部分。在标题中，我添加了一个大于标题高度的图标（如图所示）。所以问题是..以下内容应该在图标下方（从左侧开始）。为什么位置不在左侧图标下方？图标从标题到内容部分应该重叠。

[http://s1.directupload.net/file/d/3233/citi5s8r_jpg.htm](http://s1.directupload.net/file/d/3233/citi5s8r_jpg.htm) “图片”

```
.....
<div data-role="page">
    <div data-role="header">
    <img src="test.gif" style="float:left;" height="75px";/>
    <h1>Testpage</h1>
    <a href="Start.html" rel="external" class="ui-btn-right" data-role="button" data-icon="home" data-iconpos="notext">Home</a>
    </div>

    <div data-role="content">
        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
                <li data-role="list-divider" class="middle">Topic 1</li>
                <li>
                    <p class="middle">Mittwoch, 20.04.2013 - 15:00 Uhr</p>

                    <p class="middle" style="margin-top:5px; background-color:transparent;">Stuttgart</p>
                </li>
        </ul>
    </div>
......
</div>
...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:53:40.607

Why don´t you just add a new div or whatever to `<div data-role="header">` with height and width and background-image or `<img>` inside of your overlapping icon and set css like:

```
#funkyIcon {
position:absolute;
top:0;
left:0;
z-index:2; ? or two million
} 
```

this should to it

# android - 如何从 QR 阅读器启动我的 Android 应用程序？

> ID：16153190
> 
> 赞同：0
> 
> 时间：2013-04-22T17:32:21.750
> 
> 标签：android, parameters, launch

我试过搜索类似的问题，但没有一个关于这个话题很清楚。

所以，我有一个应用程序，我想使用二维码阅读器来启动它。例如，如果我拍摄 QR 码的照片，QR 阅读器会将其翻译成网址并以该地址作为参数启动我的应用程序。我该怎么做呢？我无法访问 QR 阅读器，因为它可以是商店中的任何应用程序。如何让我的应用程序出现在可用程序列表中以处理参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:08:37.203

> 如何从 QR 阅读器启动我的 Android 应用程序？

你没有，确切地说。您允许基于特定`Intent`结构启动您的 Android 应用程序，其中一个或多个可能由 QR 码阅读器使用。

> 例如，如果我拍摄 QR 码的照片，QR 阅读器会将其翻译成网址并以该地址作为参数启动我的应用程序。我该怎么做呢？

有一个`<intent-filter>`说明`<activity>`它处理该 URL，例如：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW"/>

            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>

            <data
                android:host="www.this-so-does-not-exist.com"
                android:path="/something"
                android:scheme="http"/>
        </intent-filter> 
```

这`<intent-filter>`将匹配 URL `http://www.this-so-does-not-exist.com/something`。更改`<data>`元素将更改您匹配的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:32:56.050

或者您可以像这样设置自己的方案。

```
 <intent-filter>
        <action android:name="android.intent.action.VIEW"/>

        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>

        <data
            android:host="something"
            android:scheme="myapp"/>
    </intent-filter> 
```

如果您输入“ `myapp://someting/string to send to app`”，您的应用程序将启动，您将使用以下代码获得最后一部分

```
getIntent().getData().getLastPathSegment() 
```

# r - 打印单词的出现/位置

> ID：16153192
> 
> 赞同：1
> 
> 时间：2013-04-22T17:32:31.917
> 
> 标签：r

我尝试了一些不同的包来构建一个 R 程序，该程序将文本文件作为输入并生成该文件中的单词列表。每个单词都应该有一个向量，其中包含该单词在文件中存在的所有位置。例如，如果文本文件具有字符串：

```
"this is a nice text with nice characters" 
```

输出应该是这样的：

```
$this  
[1] 1

$is      
[1] 2

$a        
[1] 3

$nice    
[1] 4 7

$text  
[1] 5

$with  
[1] 6

$characters
[1] 8 
```

我遇到了一个有用的帖子，[http://r.789695.n4.nabble.com/Memory-usage-in-R-grows-considerably-while-calculating-word-frequencies-td4644053.html](http://r.789695.n4.nabble.com/Memory-usage-in-R-grows-considerably-while-calculating-word-frequencies-td4644053.html)，但它不包括每个单词的位置。我发现了一个名为“str_locate”的类似函数，但是我想计算“单词”而不是“字符”。

任何关于使用什么包/技术的指导，将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:41:11.947

您可以使用 base R 来执行此操作（奇怪的是，它会产生您建议的输出）：

```
# data
x <- "this is a nice text with nice characters"
# split on whitespace
words <- strsplit(x, split = ' ')[[1]]
# find positions of every word
sapply(unique(words), function(x) which(x == words))

### result ###
$this
[1] 1

$is
[1] 2

$a
[1] 3

$nice
[1] 4 7

$text
[1] 5

$with
[1] 6

$characters
[1] 8 
```

# parallel-processing - 双核 i7-3540M 3.0 GHz 与四核 i7-3632QM 2.2 GHz

> ID：16153195
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:32:50.540
> 
> 标签：parallel-processing, multicore, gpu

我打算买一台笔记本电脑学习GPU和多核CPU的并行计算。我不知道双核 i7-3540M 3.0 GHz 和四核 i7-3632QM 2.2 GHz 之间哪个更好。两台笔记本电脑都有 Nvidia GT 650 显卡。据我所知，在 GPU 计算中只有一个 CPU 核心可以使用。那么具有更高时钟速度的双核可能对更好的计算性能有意义吗？有人请给我任何建议吗？我真的很感激任何答复。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:45:51.193

四核意味着双核的两倍。这意味着它能够一次运行更多应用程序。i7 3636QM 还具有更大的三级缓存，这意味着可以存储更多数据以便快速访问。因此四核处理器似乎更适合并行计算；即使它的时钟速度较低。

当您有一个需要立即完成的任务时，多核可以帮助您将任务分成更小的块，并行处理每个块，从而更快地完成工作。在低端任务中，您可能会看到双核中更高的时钟速度更好地工作；然而，在更复杂的任务中，时钟速度较低的四核处理器仍然可能表现得更好。对于科学和工程任务（假设这些是您期望完成的任务），Quad 总是会取得胜利。

# c# - 如何将 XML 数据解析为自定义 C# 类的属性？

> ID：16153196
> 
> 赞同：9
> 
> 时间：2013-04-22T17:32:54.430
> 
> 标签：c#, xml, linq

## 设置

我的`Main()`功能中有这个。

```
List<Token> tokens = new List<Token>();
string path = @"\(some directories)\tokens.xml";
XDocument doc = XDocument.Load(path); 
```

我有这个类有一些属性。

```
public partial class Token
{
    public Token()
    {
        SetURLs = new List<string>();
        SetNames = new List<string>();
    }

    public string Name { get; set; }
    public List<string> SetURLs { get; set; }
    public List<string> SetNames { get; set; }
    public string Color { get; set; }
    public string PT { get; set; }
    public string Text { get; set; }
} 
```

我有这个 XML 文件。这是一个片段。

```
<?xml version="1.0" encoding="UTF-8"?> //EDIT3
<card_database version="2">            //EDIT3
    <cards>
        .
        .
        .
        <card>
            <name>Griffin</name>
            <set picURL="http://magiccards.info/extras/token/duel-decks-ajani-vs-nicol-bolas/griffin.jpg" picURLHq="" picURLSt="">DDH</set>
            <color>w</color>
            <manacost></manacost>
            <type>Token</type>
            <pt>2/2</pt>
            <tablerow>0</tablerow>
            <text>Flying</text>
            <token>1</token>
        </card>
        <card>
            <name>Rat</name>
            <set picURL="http://magiccards.info/extras/token/shadowmoor/rat.jpg" picURLHq="" picURLSt="">SHM</set>
            <set picURL="http://magiccards.info/extras/token/gatecrash/rat.jpg" picURLHq="" picURLSt="">GTC</set>
            <color>b</color>
            <manacost></manacost>
            <type>Token</type>
            <pt>1/1</pt>
            <tablerow>0</tablerow>
            <text></text>
            <token>1</token>
        </card>
        .
        .
        .
    </cards>
</card_database> //EDIT3 
```

如您所见，根元素`<card>`中有许多元素。`<cards>`此外，每个都`<card>`可以有许多`<set>`元素。我相应地上课了。

## 问题

如何一次完成一个`<card>`并为每个属性分配适当的值？

## 我试过的

我制作了一个列表，其中包含`<name>`每个`<card>`. 然后，我将浏览此列表并为`Token`类`Name`属性的新实例分配一个名称。`tokens`然后用每个新实例填充我的列表。

```
List<string> names = new List<string>();
names = doc.Descendants("card").Elements("name").Select(r => r.Value).ToList();
int amount = doc.Descendants("card").Count();

for(int i = 0; i < amount; i++)
{
    Token token = new Token();

    token.Name = name[i];

    .
    .
    .

    tokens.Add(token);
} 
```

我想我可以制作更多包含所有其他所需元素的列表并执行相同的过程，但必须有更优雅的方式，对吧？

编辑

我还尝试了另一个问题的序列化。但是由于某种原因，当我尝试从`token`控制台写一些东西（比如 token.Name）时，它什么也没写。

```
XmlSerializer serializer = new XmlSerializer(typeof(Token));
using (StringReader reader = new StringReader(path))
{
    Token token = (Token)(serializer.Deserialize(reader));
} 
```

可能只是一个不正确的实现。如果是这样的话，有人可以使用我发布的内容并向我展示正确的实现吗？另外，我假设这会给我的两个`List`属性提供 1 个或多个值，对吗？

编辑

谢谢您的帮助。

编辑2

## 一个答案

在对序列化和更多搜索进行了一些不成功的摆弄之后，我做了一个有效的实现。

```
foreach (var card in doc.Descendants("card"))
{
    Token token = new Token();

    token.Name = card.Element("name").Value.ToString();
    foreach (var set in card.Elements("set"))
    {
        token.SetURLs.Add(set.Attribute("picURL").Value.ToString());
        token.SetNames.Add(set.Value.ToString());
    }
    token.Color = card.Element("color").Value.ToString();
    token.PT = card.Element("pt").Value.ToString();
    token.Text = card.Element("text").Value.ToString();

    tokens.Add(token);
} 
```

比`Lists`我最初想象的数字要好得多。不像序列化那样简洁。但是，它可以满足我的需要。

谢谢您的帮助。

编辑4

不确定是允许这么多编辑还是违反礼仪。只是想为未来的读者做这个编辑。

“答案”部分下的内容确实解决了我的问题，但 Dave 在下面发布的 XML 序列化要好得多；它更灵活，更容易重用/修改。因此，请选择对您的情况有更多好处的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T20:06:51.280

使用 XML 序列化，我能够将您的代码段反序列化为一些对象。我不太了解您的 2 个不同的列表变量，所以我将其修改为 1 个列表。

我不确定这是否正是您想要实现的，但我相信它应该可以帮助您对多个“set”元素进行 xml 反序列化。

我使用与您相同的代码段创建了一个名为 tokens.xml 的文件，并对其进行了编辑以匹配您的新布局。

```
<?xml version="1.0" encoding="UTF-8"?> 
<card_database version="2">
  <cards>
    <card>
      <name>Griffin</name>
      <set picURL="http://magiccards.info/extras/token/duel-decks-ajani-vs-nicol-bolas/griffin.jpg" picURLHq="" picURLSt="">DDH</set>
      <color>w</color>
      <manacost></manacost>
      <type>Token</type>
      <pt>2/2</pt>
      <tablerow>0</tablerow>
      <text>Flying</text>
      <token>1</token>
    </card>
    <card>
      <name>Rat</name>
      <set picURL="http://magiccards.info/extras/token/shadowmoor/rat.jpg" picURLHq="" picURLSt="">SHM</set>
      <set picURL="http://magiccards.info/extras/token/gatecrash/rat.jpg" picURLHq="" picURLSt="">GTC</set>
      <color>b</color>
      <manacost></manacost>
      <type>Token</type>
      <pt>1/1</pt>
      <tablerow>0</tablerow>
      <text></text>
      <token>1</token>
    </card>
  </cards>
</card_database> 
```

我创建了几个类

```
[XmlRoot(ElementName = "card_database")]
public class CardsDatabase
{
    public CardsDatabase()
    {

    }
    [XmlElement(ElementName = "cards", Form = XmlSchemaForm.Unqualified)]
    public CardsList Cards { get; set; }

    [XmlAttribute(AttributeName = "version", Form = XmlSchemaForm.Unqualified)]
    public string Version { get; set; }
}

[XmlRoot(ElementName = "cards")]
public class CardsList
{
    public CardsList()
    {
        Cards = new List<Card>();
    }
    [XmlElement(ElementName = "card", Form = XmlSchemaForm.Unqualified)]
    public List<Card> Cards { get; set; } 
}

[XmlRoot(ElementName = "card")]
public class Card
{
    public Card()
    {
        SetURLs = new List<SetItem>();

    }

    [XmlElement(ElementName = "name", Form = XmlSchemaForm.Unqualified)]
    public string Name { get; set; }

    [XmlElement(ElementName = "set", Form = XmlSchemaForm.Unqualified)]
    public List<SetItem> SetURLs { get; set; }

    [XmlElement(ElementName = "color", Form = XmlSchemaForm.Unqualified)]
    public string Color { get; set; }

    [XmlElement(ElementName = "pt", Form = XmlSchemaForm.Unqualified)]
    public string PT { get; set; }

    [XmlElement(ElementName = "text", Form = XmlSchemaForm.Unqualified)]
    public string Text { get; set; }

}

[XmlRoot(ElementName = "set")]
public class SetItem
{
    public SetItem()
    {

    }

    [XmlAttribute(AttributeName = "picURL", Form = XmlSchemaForm.Unqualified)]
    public string PicURL { get; set; }

    [XmlAttribute(AttributeName = "picURLHq", Form = XmlSchemaForm.Unqualified)]
    public string PicURLHq { get; set; }

    [XmlAttribute(AttributeName = "picURLSt", Form = XmlSchemaForm.Unqualified)]
    public string PicURLSt { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

主体如下（我知道这很丑，但我走得很快，所以请改进）

```
CardsDatabase cards = new CardsDatabase();
string path = @"tokens.xml";
XmlDocument doc = new XmlDocument();
doc.Load(path);

XmlSerializer serializer = new XmlSerializer(typeof(CardsDatabase));
using (StringReader reader = new StringReader(doc.InnerXml))
{
    cards = (CardsDatabase)(serializer.Deserialize(reader));
} 
```

以下是输出的样子。

![观察输出](https://i.stack.imgur.com/l39X8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T20:46:18.660

使用 Linq to Xml，

```
string path = @"~/tokens.xml";
var doc = XDocument.Load(Server.MapPath(Url.Content(path)));

var cards = doc.Descendants("card")
    .Select(x =>
        new Token
        {
            Name = x.Element("name").Value,
            SetURLs = x.Elements("set").Select(y => y.Attribute("picURL").Value)
                                       .ToList(),
            SetNames = x.Elements("set").Select(y => y.Value).ToList(),
            Color = x.Element("color").Value,
            PT = x.Element("pt").Value,
            Text = x.Element("text").Value
        }).ToList(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:43:46.560

看看这篇文章：

[XPath 和 *.csproj](https://stackoverflow.com/questions/3745029/xpath-and-csproj/12848854#12848854)

但是采取以下并将匿名类型转换为您的具体类。这应该足以让你开始。

```
 XDocument xDoc = /* populate from somewhere */

            XNamespace nsPlaceHolder = XNamespace.Get("http://schemas.microsoft.com/developer/msbuild/2003");

  XNamespace ns = string.Empty;

            var list1 = from list in xDoc.Descendants(ns + "cards")
                        from item in list.Elements(ns + "card")
                        /* where item.Element(ns + "card") != null */
                    select new
                       {

                           PicURL = item.Attribute("picURL").Value,
                           MyName = (item.Element(ns + "name") == null) ? string.Empty : item.Element(ns + "name").Value
                       };

            foreach (var v in list1)
            {
                Console.WriteLine(v.ToString());
            } 
```

# html - HTML/CSS Hexagon IE Hack 或 Fallback

> ID：16153198
> 
> 赞同：1
> 
> 时间：2013-04-22T17:33:03.810
> 
> 标签：html, css

我正在使用[这个](https://stackoverflow.com/questions/7433454/html-css-hexagon-with-image-inside?answertab=oldest#tab-top)（最佳答案）概念来布置我的网站，但它似乎在 IE 中不起作用。是否存在 hack 或者我应该使用某种允许 IE 呈现类似效果的后备？

我真是个新手。我不知道我是否可以评论其他字符串，所以这篇文章就是结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:35:46.617

它适用于 IE10，但对于 IE9 支持，您需要`-ms-transform:...`为每次使用添加`transform`.

IE8 及以下可以使用 a`filter`来模拟变换，但这是一个复杂得多的过程，因为您必须计算要使用的正确矩阵变换 - 没有方便的关键字。

# java - 如果 WebAppContext 无法启动，如何取消启动或关闭码头

> ID：16153212
> 
> 赞同：7
> 
> 时间：2013-04-22T17:33:39.997
> 
> 标签：java, spring, jetty, maven-jetty-plugin

我正在使用 Maven Jetty 插件，如果任何 bean 失败，有没有办法阻止服务器启动或关闭（例如使用 maven-jetty-plugin）？

这是一个例子：

```
2013-04-22 11:43:59.327:WARN:oejw.WebAppContext:main: Failed startup of context o.e.j.m.p.JettyWebAppContext@9a681a{/,file:/opt/bamboo/bamboo-home/xml-data/build-dir/APA-BC-JETTYAPA/src/main/webapp/,STARTING}{file:/opt/bamboo/bamboo-home/xml-data/build-dir/APA-BC-JETTYAPA/src/main/webapp/}
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/classes/applicationContext.xml]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'staticDataService' for bean class [com.etermax.common.service.StaticDataService] conflicts with existing, non-compatible bean definition of same name and class [com.etermax.bingo.api.service.BingoStaticDataService]
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:272)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:196)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:778)
        at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:425)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:770)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:275)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1312)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:722)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:490)
        at org.eclipse.jetty.maven.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:275)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:175)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
        at org.eclipse.jetty.server.Server.start(Server.java:346)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.server.Server.doStart(Server.java:294)
        at org.eclipse.jetty.maven.plugin.JettyServer.doStart(JettyServer.java:78)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:537)
        at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:352)
        at org.eclipse.jetty.maven.plugin.JettyRunMojo.execute(JettyRunMojo.java:167)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'staticDataService' for bean class [com.etermax.common.service.StaticDataService] conflicts with existing, non-compatible bean definition of same name and class [com.etermax.bingo.api.service.BingoStaticDataService]
        at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:312)
        at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:253)
        at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)
        at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1438)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1428)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:272)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:196)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:778)
        at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:425)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:770)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:275)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1312)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:722)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:490)
        at org.eclipse.jetty.maven.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:275)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:175)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:108)
        at org.eclipse.jetty.server.Server.start(Server.java:346)
        at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:90)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.server.Server.doStart(Server.java:294)
        at org.eclipse.jetty.maven.plugin.JettyServer.doStart(JettyServer.java:78)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:537)
        at org.eclipse.jetty.maven.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:352)
        at org.eclipse.jetty.maven.plugin.JettyRunMojo.execute(JettyRunMojo.java:167)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
2013-04-22 11:43:59.349:INFO:oejs.ServerConnector:main: Started ServerConnector@e08f5f{HTTP/1.1}{0.0.0.0:8083} 
```

我想关闭服务器。我知道有一种方法涉及对每个 bean 中的 destroy 方法进行编码，但我希望任何 bean 都具有全局性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T23:24:30.047

这不是一件容易的事情。从 jetty 的源代码中找到所需的信息需要几个小时的艰苦工作。

这是与我的简单测试应用程序一起使用的解决方案，该应用程序在 HttpServlet 初始化方法上抛出了 ServletException。成功的关键是将 ServletHandler 的 startWithUnavailable 属性设置为 false。

pom.xml：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.10.v20130312</version>
    <configuration>
        <contextXml>src/main/resources/context.xml</contextXml>
        <webAppConfig>
            <throwUnavailableOnStartupException>true</throwUnavailableOnStartupException>
        </webAppConfig>
    </configuration>
</plugin> 
```

上下文.xml：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure>
    <Set name="throwUnavailableOnStartupException">true</Set>
    <Set name="servletHandler">
        <New class="org.eclipse.jetty.servlet.ServletHandler">
            <Set name="startWithUnavailable">false</Set>
        </New>
    </Set>
</Configure> 
```

TestServlet.java：

```
public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Override
    public void init() throws ServletException {
        super.init();
        throw new ServletException("FAIL!");
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T08:55:37.103

您可以在返回后检查`org.mortbay.jetty.webapp.WebAppContext.getUnavailableException()`方法。`org.mortbay.component.AbstractLifeCycle.start()`如果不为 null，则在`WebAppContext`初始化时引发异常。

# search - Drupal 自动完成搜索 UI 错误

> ID：16153217
> 
> 赞同：2
> 
> 时间：2013-04-22T17:33:57.960
> 
> 标签：search, drupal, autocomplete, drupal-7

嗨，在 Drupal 7 中，我正在使用自动完成搜索。在搜索输入中，即使输入没有聚焦，它也会一直显示部分 ajax 加载器动画。错误用红色方块标记![虫子的图片](https://i.stack.imgur.com/IP72e.png)。

任何建议请为什么会有这个错误。（我正在使用 boostrap 主题）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:54:55.227

这不是 twitter 引导错误。

查看您的 drupal 安装`misc/throbber.gif`文件。你会看到它实际上是一个精灵，当 ajax 请求正在进行时，它会改变它的位置以显示动画的 throbber。

您将需要创建一个新的并相应地调整 CSS 以解决此问题。您的文本字段的长度比这个精灵的相对长

将以下 CSS 添加到主题的 css 文件中。这些样式已经定义，因此您只需要覆盖它们。请参阅内联注释。

```
html.js input.form-autocomplete {
    background-image: url("/misc/throbber.gif"); // Enter a new thribber image here.
    background-position: 100% 2px;
    background-repeat: no-repeat;
}

html.js input.throbbing {
  background-position: 100% -18px; // Adjust this -18px to the height of your new throbber. 
} 
```

# vb.net - 由 sql 填充的 vb.net 数据视图

> ID：16153219
> 
> 赞同：0
> 
> 时间：2013-04-22T17:33:59.160
> 
> 标签：vb.net, gridview, datatable, dataview

我正在尝试将 sql 查询中的数据加载到将加载 GridView 的数据表中。请参阅下面的代码...

```
 Dim dv As New System.Data.DataView
    Dim dt As New System.Data.DataTable

    dv = SQL_Week.Select(DataSourceSelectArguments.Empty)
    dt = dv.ToTable()

    GV_WeekData.DataSource = dt
    GV_WeekData.DataBind() 
```

如果我运行此代码，则 Gridview 显示为空。如果我调试代码，当我到达 dv = SQL_Week 时，我可以提取 sql 语句，如果我在 sql server 中运行它，我会得到我需要的数据，但是如果我查看“dv”的内容，它会显示参考 11 栏。

如果我添加以下代码，我实际上可以看到数据表中有数据。暗淡测试 As String = dt(1)(1)

有趣的是，在另一个页面中，类似的查询和代码可以完美运行。它快把我逼疯了

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:17:07.513

试试下面的代码

```
GV_WeekData.AutoGenerateColumns = True
GV_WeekData.DataSource = dt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:03:14.997

我重新启动了 Visual Studio，现在它正在填充 Gridview

你将不得不原谅我。我不明白 Visual Studio 这种不稳定行为的原因

# bash - Bash 解析特定行的命令的分段输出

> ID：16153220
> 
> 赞同：0
> 
> 时间：2013-04-22T17:33:59.793
> 
> 标签：bash, awk

我有一个命令输出一堆行如下第一个数字是部分第二个数字代表关键字。我希望能够解析关键字 2 3 和 5。输入

```
11
12
13
14
15
\n
\n
\n
21
22
23
24
25
\n
\n
\n
(2 more sections as such) 
```

输出

```
12
13
15
\n
22
23
25
\n 
(continues for other 2 sections) 
```

grep 给了我 12 22 13 23 15 25 （等等）我不太确定如何用 awk 来做。我的最终目标是将其放入脚本中，解析部分（或行）的输出将转到临时文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:39:42.383

这是一种方法：

```
$ awk '$1~/[235]$/{p=1;print}!$1&&p{p=0;print}' file
12
13
15

22
23
25 
```

为了仅使用单个换行符分隔记录，使用标志`p`，我们`p`在第一个块中打印匹配时设置，并且当我们到达每个记录之后的第一个空行时，即`!$1`我们打印空行并取消设置标志以便忽略接下来的两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:21:00.200

带设置的 awk`RS`

```
awk '{while(++i<=NF)if($i~/[235]$/)print $i;i=0;print ""}' RS="" file 
```

输出：

```
12
13
15

22
23
25 
```

**编辑**

```
 awk '/^\s*$/{a[NR];if(!(NR-1 in a))print} /[235]$/{print}' file 
```

# python - 使用python将一个文件中的一段文本替换为另一个文件中的文本

> ID：16153221
> 
> 赞同：1
> 
> 时间：2013-04-22T17:34:13.400
> 
> 标签：python

首先介绍一下背景：是的，我是 python 新手，但我喜欢涉猎和学习。

目标是这样的：我在这里有一个 Intranet 网站在工作，他们让我们在一个静态服务器上，不允许服务器端脚本，这意味着没有 PHP。因此，当我添加新页面时，我必须使用新链接更新每个怪异页面的菜单。幸运的是，我的计算机上安装了一个名为 ArcGIS 的应用程序，并安装了 python。所以我想把一个脚本放在一起会很好标签，如`<!--begin menu-->`和`<!--end menu-->`，带有“menu.txt”中的文本

所以我开始寻找并找到了这段代码：

```
with open('menu.txt', 'r') as f:
    # read entire file into file1
    # ASSUMING 'file1.txt' is relatively small...
    file1 = f.read()

with open('test.html', 'r') as f:
    # ASSUMING 'file2.txt' is relatively small...
    file2 = f.read()    # read file into file2

# index() will raise an error if not found...
f1_start = file1.index('<!--123-->')
f1_end = file1.index('<!--321-->', f1_start)     # look for '//end' after '//start'

f2_start = file2.index('<!--123-->')
f2_end = file2.index('<!--321-->', f2_start)

# replace file2 lines with proper file1 lines
file2[f2_start:f2_end] = file1[f1_start:f1_end]

with open('test.html', 'w') as f:
    f.write(file2) 
```

我也看到了很多使用`re`,`replace`等的例子，但似乎没有什么与我需要的有关。无论如何，现在我只是在同一目录中的一个文件上尝试它，但是当我在我的 linux 机器或 windows python shell 上运行它时，我得到：

```
Traceback (most recent call last):
  File "P:\webpages\filereplace.py", line 18, in <module>
    file2[f2_start:f2_end] = file1[f1_start:f1_end]
TypeError: 'str' object does not support item assignment 
```

我认为问题可能是`with open`部分，但我不知道。

在这种情况下，menu.txt 的内容本质上是一个开始注释标记`<!--123-->`，然后是所有的`<div id=menu>blah blah blah</div>`，然后是一个结束注释标记`<!--321-->`。在我的 html 文件中，我使用了相同的注释标签，你得到了图片......

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:49:21.757

您正在尝试就地修改字符串。这在 python 中是不可能的，因为字符串是不可变的。

要实现您想要的，您需要从现有两个字符串的部分创建一个新字符串：

```
# replace file2 lines with proper file1 lines
new_f = file2[:f2_start] + file1[f1_start:f1_end] + file2[f2_end:] 
```

之后，将内容写入文件，如下所示：

```
with open('test.html', 'w') as f:
    f.write(new_f) 
```

另外，请注意变量名称`file1`和`file2`此处有点误导，因为它们不是类似文件的对象，而是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:15:12.043

大多数时候，在处理文件的就地编辑时，我会求助于`fileinput`模块：

```
import os
import fileinput

if __name__ == '__main__':
    # Menu should not have any marker, just pure contents
    with open('menu.txt') as f:
        menu_contents = f.read()

    # Initialize a few items
    start_marker = '<!--123-->'
    end_marker   = '<!--321-->'
    file_list = ['index.html', 'foo.html']
    found_old_contents = False

    # Loop to replace text in place
    for line in fileinput.input(file_list, inplace=True):
        line = line.rstrip()

        if line == start_marker:
            found_old_contents = True
            print line
            print menu_contents
        elif line == end_marker:
            found_old_contents = False

        if not found_old_contents:
            print line 
```

### 讨论

这里的关键在于函数`fileinput.input(file_list, inplace=True)`，它获取文件名列表，逐行遍历它们，然后将你`print`输出的任何内容写回文件。

您将需要`file_list`通过`os.walk()`或其他一些方法提供文件列表（例如 ）。

我已经针对两个 .html 文件测试了我的代码，并且确信它可以工作。我不能保证结果，尤其是对于嵌套目录。祝你好运。

# c - C顶点数组错误值

> ID：16153222
> 
> 赞同：0
> 
> 时间：2013-04-22T17:34:13.580
> 
> 标签：c, arrays, vertex

我的 cc.h 中有这个声明

```
Vertex *graphVertices2;

typedef struct
{
    float XYZW[4];
    float RGBA[4];
} Vertex; 
```

在我的 cc.ci 中执行以下操作：

```
float vert [] = {306, 319, 360, 357, 375, 374, 387, 391, 391, 70, 82, 94, 91, 108, 114, 125, 127, 131};
            graphVertices2 = transformIntoVertex(vert, 18);

Vertex *transformIntoVertex(float *v, int size){
    int i;
    float x_axis = x_0 + (x_Max/size);
    Vertex graphVertices[18];

    for(i = 0; i < size; ++i){      
        graphVertices[i].XYZW[0] = x_axis; // x
        graphVertices[i].XYZW[1] = v[i]; // y
        graphVertices[i].XYZW[2] = 0.0f; // z
        graphVertices[i].XYZW[3] = 1.0f; // w
        if(size <= 9){
        graphVertices[i].RGBA[0] = 1.0f;
        graphVertices[i].RGBA[1] = 0.0f; // g
        graphVertices[i].RGBA[2] = 0.0f; // b
        graphVertices[i].RGBA[3] = 0.0f; // a
        }else{
            graphVertices[i].RGBA[0] = 0.0f; // r
            graphVertices[i].RGBA[1] = 1.0f; // g
            graphVertices[i].RGBA[2] = 0.0f; // b
            graphVertices[i].RGBA[3] = 0.0f; // a
        }
        x_axis = x_axis + x_axis;
        return graphVertices;
    } 
```

但是当我打印graphVertices2 时我得到了错误的值。问题不在于我认为的函数，我已经打印了 for 循环，并且所有内容都具有正确的值。这些值在顶点的中间开始变得奇怪。我不知道为什么。

这条线做了正确的归因：

```
graphVertices[i].XYZW[1] = v[i]; 
```

我已经打印并检查了。但是在顶点的中间，值变得非常大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:38:59.713

> 问题不在于我认为的功能，

确实如此。

```
Vertex graphVertices[18];
// ...
// do stuff
// ...
return graphVertices; 
```

您正在返回一个自动数组 - 函数返回时它将超出范围。您的程序调用未定义的行为，因此任何事情都可能发生。解决这个问题的常用建议是：制作它`static`（并阅读该关键字的作用），或者`malloc()`为它吃掉一些动态内存（在这种情况下，你也必须`free()`在使用后使用它）。

# cloudbees - 无法从 CloudBees 访问 scannotation-1.0.3 jar

> ID：16153226
> 
> 赞同：0
> 
> 时间：2013-04-22T17:34:25.620
> 
> 标签：cloudbees

几天以来，ClouBees 似乎无法访问 scannotation-1.0.3 的 jar。

我们有一个使用 Resteasy 的模块，而 Resteasy 需要它。我们的 POM 引用了 JBOss 存储库，看起来一切正常：

```
<repositories>
<!-- For resteasy -->
 <repository>
  <id>jboss</id>
  <name>jboss repo</name>
  <url>http://repository.jboss.org/nexus/content/groups/public/</url>
 </repository>
</repositories> 
```

[https://repository.jboss.org/nexus/content/groups/public/org/scannotation/scannotation/1.0.3/](https://repository.jboss.org/nexus/content/groups/public/org/scannotation/scannotation/1.0.3/)

我们已经在本地尝试了构建，并且可以毫无问题地获取 jar。

那么，是什么阻止了 CloudBees 正确获取 jar 呢？任何提示将不胜感激。

谢谢，-伊夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:23:17.130

“jboss”存储库 ID 自动镜像到本地 nexus 实例以减少下载延迟，但镜像[http://repository.jboss.org/nexus/content/groups/releases](http://repository.jboss.org/nexus/content/groups/releases) 和 scannotations 1.0.3 在 jboss“第三方版本中"

简单的解决方法是更改​​存储库 ID

# jquery - jQuery 语法错误 - 不会关闭脚本

> ID：16153229
> 
> 赞同：0
> 
> 时间：2013-04-22T17:34:36.730
> 
> 标签：jquery

由于某种原因，Dreamweaver 不允许我关闭我的 jQuery，这似乎是一个语法错误。

这个概念是有一系列具有唯一 id 的按钮，即。#apr for april 每次将 html 文件加载到 div 中（称为 gigs）。

我试过移动东西，添加和删除`;`'s 和`});`'s 但似乎找不到解决方案

到目前为止，这是我的代码；

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
$(document).ready(function(){;

        $("#apr").click(function(){
$("#gigs").load('gigs/april13.html');

        $("#may").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#jun").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#jul").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#aug").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#sep").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#oct").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#nov").click(function(){
$("#gigs").load('gigs/may13.html');

        $("#dec").click(function(){
$("#gigs").load('gigs/may13.html');
    });
});
});
</script> 
```

在我关闭脚本标记之前，错误似乎总是落在最后一行。所有输入将不胜感激，因为我是 jQuery 的新手

编辑：所有链接都可以，因为我还没有在今年剩下的时间里创建 html 文件:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:35:48.367

这是你的问题

```
$(document).ready(function(){; <---- WHAT IS THAT SEMI COLON DOING THERE??? 
```

并关闭其余功能：

```
$("#apr").click(function(){
    $("#gigs").load('gigs/april13.html');
}); <--- CLOSE THESE 
```

最后你也有太多`});`了。删除一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:39:15.463

您没有关闭点击事件：

```
$("#apr").click(function(){
$("#gigs").load('gigs/april13.html'); 
```

应该：

```
$("#apr").click(function(){
    $("#gigs").load('gigs/april13.html');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:39:29.897

我解决了您在每个单击函数末尾缺少大括号、括号和分号的问题 - 试试这个：

```
 <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
$(document).ready(function(){

$("#apr").click(function(){
    $("#gigs").load('gigs/april13.html');
});

$("#may").click(function(){
    $("#gigs").load('gigs/may13.html');
});

$("#jun").click(function(){
    $("#gigs").load('gigs/may13.html');

$("#jul").click(function(){
    $("#gigs").load('gigs/may13.html');
});

$("#aug").click(function(){
     $("#gigs").load('gigs/may13.html');
});
$("#sep").click(function(){
    $("#gigs").load('gigs/may13.html');
});
$("#oct").click(function(){
    $("#gigs").load('gigs/may13.html');
});
$("#nov").click(function(){
    $("#gigs").load('gigs/may13.html');
});
$("#dec").click(function(){
    $("#gigs").load('gigs/may13.html');
});
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:43:03.853

这是解决方案的一个小提琴。这个工具很棒，它还可以帮助您查看大括号或括号的闭合位置。 [http://jsfiddle.net/mNZeT/](http://jsfiddle.net/mNZeT/)

问题是您没有关闭每个“加载”调用。这些应该是这样的：

```
 $("#apr").click(function(){
        $("#gigs").load('gigs/april13.html')**})**; 
```

# backbone.js - 骨干模型事件未触发

> ID：16153244
> 
> 赞同：0
> 
> 时间：2013-04-22T17:35:33.990
> 
> 标签：backbone.js, requirejs, backbone-events

我正在使用带有 requirejs 的主干，我在全局应用程序对象上触发了一个事件，并在应用程序启动句柄时进行了设置，但由于某种原因，该事件没有被捕获。这是应用程序的代码：

main.js

```
require([
    "app",
    "router",
    "modules/facebookLogin"
],

function(app, Router,FacebookLogin) {

  // Define your master router on the application namespace and trigger all
    // navigation from this instance.
    app.router = new Router();
    app.currentFacebookSession = new FacebookLogin.Model();
    app.currentFacebookSession.on({
        'facebook:unauthorized': function () {
            //app.router.navigate('', true);
        },
        'facebook:disconnected': function () {
            //app.router.navigate('', true);
        },
        'facebook:connected': function () {
            //app.router.navigate('events', true);
            console.log('EVENTS');
        }
    });

  // Trigger the initial route and enable HTML5 History API support, set the
  // root folder to '/' by default.  Change in app.js.
  Backbone.history.start({ pushState: true, root: app.root });
    //Init facebook 
```

...

模型是 facebookLogin.js

```
// Facebookuser module
define(["app", "facebookSDK"],

// Map dependencies from above array.
function(app,FB) {

  // Create a new module.
  var FacebookLogin = app.module();

  // Default Model.
  FacebookLogin.Model = Backbone.Model.extend({

      initialize: function (attributes, options) {
          options || (options = {});
          this.options = _.defaults(options, this.defaultOptions);
          this.facebookInitialize();
          _.bindAll(this, 'onLoginStatusChange');

          FB.Event.subscribe('auth.authResponseChange', this.onLoginStatusChange);
      },
.....

   onLoginStatusChange: function (response) {
          if (this._loginStatus === response.status) return false;

          var event;

          if (response.status === 'not_authorized') {
              event = 'facebook:unauthorized';
          } else if (response.status === 'connected') {
              event = 'facebook:connected';
              if (this.options.autoFetch === true) this.fetch();
          } else {
              event = 'facebook:disconnected';
          }

          this.trigger(event, this, response);
          this._loginStatus = response.status;
      }, 
```

在调试时，它涉及到触发器并使用以下参数运行触发器。

```
 this.trigger(event, this, response); 
```

这=

```
child
_changes: Object
_escapedAttributes: Object
_pending: Object
_previousAttributes: Object
attributes: Object
changed: Object
cid: "c0"
id: ""
onLoginStatusChange: function bound() {
options: Object
__proto__: Surrogate 
```

事件 =`"facebook:connected"`

并且响应是正确的对象

我现在替换了 app.Router.nagigate 以用日志调试问题，但它从未发生过，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:42:19.180

所以事实证明，我使用的主干版本不是允许通过 on 函数绑定多个事件的版本。

更新到 1.0.0 并且现在可以使用。

# android - 尝试设置/使用活动时计时器或 doWakefulWork 崩溃

> ID：16153245
> 
> 赞同：0
> 
> 时间：2013-04-22T17:35:35.460
> 
> 标签：android, android-intent, android-activity, timer

我认为问题源于同一件事。无论我是从触发的计时器还是从 doWakefulWork 调用这个子，我都会崩溃......

```
TextView Past = (TextView) ((Activity) ctx).findViewById(R.id.past);
Past.setText(Html.fromHtml(dMsg)); 
```

在我的代码中，我什至确保用户激活了该活动，这样我就不会突然显示一个活动。在我的 doWakefulwork 中，我正在获取一些 html 结果，并根据检索到的数据，我想显示一个特定的活动。当我获得 Past 的值时它不会崩溃。当我尝试时它崩溃了`setText`

为什么我会遇到这个麻烦...

这是我使用 WAKEFUL 时的错误

线程 [<15> IntentService[PageP]]（暂停（异常 ViewRootImpl$CalledFromWrongThreadException））
WakeWork(WakefulIntentService).onHandleIntent(Intent) 行：112 IntentService$ServiceHandler.handleMessage(Message) 行：65
IntentService$ServiceHandler(Handler).dispatchMessage （消息）行：99 Looper.loop() 行：137 HandlerThread.run() 行：60

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:05:57.473

首先，这不是一个完整的堆栈跟踪。那是 Eclipse 捕获异常。请在 Eclipse 中运行异常点，然后使用 LogCat 获取完整的堆栈跟踪。

其次，`Service`不应该尝试直接操作某些活动的小部件。曾经。

第三，没有人，甚至是活动，都不能从后台线程修改小部件，例如`IntentService`.

在这一点上，我猜测 a`Service`可能不是适合您的模型，您应该从活动中做一些其他事情（例如，`AsyncTask`）。

如果您确信 a`Service`是正确的解决方案，那么您需要使用以下`Service`方法向活动（或相关片段）发送有关数据更改的消息：

*   `LocalBroadcastManager`， 或者
*   像[Otto](http://square.github.io/otto/)这样的事件总线，或
*   一个`Messenger`绑定到一个`Handler`
*   等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:55:32.943

答案#1 非常正确。如果您正在使用 SERVICE 并且在该服务中使用计时器或 WakefulIntentService，则它们可以在不同的线程上运行。最重要的是，一个不同于您的 UI（用户界面）线程的线程。对任何活动的任何修改都必须在 UI 线程上完成。一旦我将以下代码添加到我的计时器中，我就能够成功处理我的活动更改。

```
public static void TickTockHit() {
    ((Activity)Login.ctx).runOnUiThread(new Runnable()
     {
        public void run()
     {
       Login.ShowForm("");
      }
     });    } 
```

# android - 从网站中提取特定文本块到 Android 应用程序

> ID：16153250
> 
> 赞同：3
> 
> 时间：2013-04-22T17:35:51.537
> 
> 标签：android, web, web-scraping

我正在开发一个必须从网站提取数据的 Android 应用程序，提取的数据将显示在应用程序的文本视图中

在尝试了我在谷歌搜索和 Stackoverflow 中找到的所有可能方法之后，我仍然无法处理数据，现在任何人都可以分享，如果他们已经完成了..

详情网站：[https ://www.amrita.edu/campus/bengaluru](https://www.amrita.edu/campus/bengaluru)

在这个网站上，我希望提取最新新闻块和即将发生的事件的数据

这是代码：我使用 JSOUP 提取

```
package out.in;
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.select.Elements;
import org.w3c.dom.Document;
import android.app.Activity;
import android.os.Bundle;
import android.sax.Element;
import android.widget.TextView;
import android.widget.Toast;

  public class HtmlExtracterActivity extends Activity {
/** Called when the activity is first created. */

//  url
   static final String URL = "https://www.amrita.edu/campus/bengaluru";
@Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

    try {
        ((TextView)findViewById(R.id.tv)).setText(getdata());
    } 
    catch (Exception ex) {

        ((TextView)findViewById(R.id.tv)).setText("Error");

    }  

 }

  protected String getdata() throws Exception {
        String result = "";
        // get html document structure
        Document document = (Document) Jsoup.connect(URL).get();

        // selector query
       *********Need help 
        // check results
        *********Need help
        return result;
    } 
```

}

我已在清单文件中授予 Internet 权限，并且

xml文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<TextView android:text=" "

android:id="@+id/tv" android:layout_width="wrap_content"
 android:layout_height="wrap_content"></TextView>
 </LinearLayout> 
```

我真诚地提前感谢所需的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-22T10:49:50.663

你没有提到你面临的确切问题。您是否尝试查看在此返回的内容：

```
Document document = (Document) Jsoup.connect(URL).get(); 
```

我假设这可能是因为上述代码中缺少 User-Agent。请试试这个，如果您仍然遇到错误，请告诉我们：

> > 响应 response= Jsoup.connect(location) .ignoreContentType(true) .userAgent("Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:25.0) Gecko/20100101 Firefox/25.0")
> > .referrer(" [http:// www.google.com](http://www.google.com) ")
> > .timeout(12000) .followRedirects(true) .execute();
> 
> 文档 doc = response.parse(); 用户代理
> 
> 使用最新的用户代理。这是完整列表 [http://www.useragentstring.com/pages/Firefox/](http://www.useragentstring.com/pages/Firefox/)。
> 
> 暂停
> 
> 也不要忘记添加超时，因为有时下载页面需要超过正常的超时时间。
> 
> 推荐人
> 
> 将referer设置为google。
> 
> 关注重定向
> 
> 按照重定向到达该页面。
> 
> 执行（）而不是获取（）
> 
> 使用 execute() 获取 Response 对象。这可以帮助您检查内容类型和状态代码以防出现错误。
> 
> 来源：[https ://stackoverflow.com/a/20284953/1262177](https://stackoverflow.com/a/20284953/1262177)

# java - 我如何获得詹金斯中某些项目的构建数量和修订版本？

> ID：16153253
> 
> 赞同：0
> 
> 时间：2013-04-22T17:36:05.703
> 
> 标签：java, jenkins

我想从 jenkins 获取这些信息以便在其他应用程序中使用它们，这个其他应用程序将只有一个包含以下信息的表：

Nombre Proyecto -- Liga a la documentacion del proyecto -- # Build -- # revision Maven project 1 http: ..... 20 20

但我怎样才能得到构建和修订的#。

我找到了一些方法来获取它，是通过每个项目中的文件： 1.- nextBuilderNumber ：使用此文件，我可以获得# build 2.- scm-polling.log：使用此文件，我可以获得# of修订

但是对于文件 1，我遇到了问题，因为文件编号 1 没有扩展名，但是在属性中它说这是一个纯文本对象，所以我无法阅读它。但是如果我现在更改文件的扩展名，它就可以了。但是当詹金斯再次编译项目时，会生成没有扩展名的文件。

这是读取文件的源代码的一部分：

```
enter code here for (int i = 0; i < enlaces.length; i++) {
        try {         
            fr = new FileReader (ruta+enlaces[i]+"/nextBuildNumber.txt");         
            br = new BufferedReader(fr);         
            int numeroBuild;
            numeroBuild=new Integer(br.readLine()); 
            orderList[i]=new Datos(enlaces[i],numeroBuild,10);                                                    
            }
        catch(Exception e){
            e.printStackTrace();
        }finally{            
        try{                               
            fr.close();                                  
           }catch (Exception e2){ 
                e2.printStackTrace();
           }
        }               
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:42:28.960

Jenkins已经在环境中设置了一些变量，你可以使用它们。从[维基](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project)：

> 当 Jenkins 作业执行时，它会设置一些环境变量，您可以在 shell 脚本、批处理命令、Ant 脚本或 Maven POM 1 中使用这些环境变量。下表包含所有这些环境变量的列表。

有`BUILD_NUMBER`and `SVN_REVISION`，例如。

# c - C中的默认函数参数

> ID：16153258
> 
> 赞同：1
> 
> 时间：2013-04-22T17:36:49.947
> 
> 标签：c, function, default-parameters

我正在尝试在 C 中创建一个 indexOf 函数。该函数必须找到参数中给出的任何字母或单词的位置。但是当我尝试使用它们时，编译器会警告为“参数太少”。我怎样才能做到这一点？谢谢。

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int indexOf(char*, char*, char);

int main(){
    char stuff[] = "abcdefghijklmopqrstuvwxyz";

    printf("Result: %d", indexOf(stuff, 'b') );
    printf("Result: %d", indexOf(stuff, "defg") );

    getch();
    return 0;
}

int indexOf(char *text, char *word, char letter){
    if(word == DEFAULT VALUE)
        // find the letter in the text
    else if(letter == DEFAULT VALUE)
        // find the word in the text
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:39:04.813

您不能在 C 中这样做：该语言不支持重载或默认参数。唯一可以模拟这一点的是使用可变数量的参数，但这在这里不起作用，因为您需要传递一个额外的参数来指示正在搜索的项目的类型。

更好的方法是定义两个函数

```
int indexOfChar(char *text, char letter)
int indexOfWord(char *text, char *wors) 
```

或者更好的是，使用标准库中的相应函数 -[`strchr`](http://en.cppreference.com/w/c/string/byte/strchr)和[`strstr`](http://en.cppreference.com/w/c/string/byte/strstr).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T17:38:53.127

C中没有默认函数参数之类的东西。C++有这个特性，但C没有。

在您的情况下，我将定义两个函数而不是一个`indexOf`:`indexOfWord`和`indexOfChar`.

# r - R中的R模型树M5P

> ID：16153259
> 
> 赞同：1
> 
> 时间：2013-04-22T17:36:59.110
> 
> 标签：r, model, tree, weka

我想知道 Weka 提供的构建像 M5P 这样的在叶子中有回归模型的模型树的功能是否可以在 R 中实现。我知道有一种方法可以使用 RWeka 包来处理它。对我来说有点奇怪的是，该功能在其他 R 包（如 rpart）中不存在。获得“模型树”的唯一方法是使用 Rweka 包？感谢您的澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-01T11:31:11.343

请检查 cubist 和 CORElearn 包。

# junit4 - Spring Data MongoDB：使用存储库进行单元测试

> ID：16153266
> 
> 赞同：3
> 
> 时间：2013-04-22T17:37:19.720
> 
> 标签：junit4, spring-data, spring-data-mongodb

应该如何使用 Spring Data MongoDB 中的存储库方法构建一些测试？我想为我的测试设置测试数据库，因为我不想为此目的使用生产数据库。这应该是可能的，但我不知道。这是我的应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:context="http://www.springframework.org/schema/context"
         xmlns:mongo="http://www.springframework.org/schema/data/mongo"
         xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
         xsi:schemaLocation=
             "http://www.springframework.org/schema/context
              http://www.springframework.org/schema/context/spring-context-3.0.xsd
              http://www.springframework.org/schema/data/mongo
              http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
              http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
              http://www.springframework.org/schema/data/neo4j
              http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd">

        <!-- Default bean name is 'mongo' -->
        <mongo:mongo host="${mongo.host}" port="${mongo.port}">
        <mongo:options connections-per-host="8"
            threads-allowed-to-block-for-connection-multiplier="4"
            connect-timeout="${mongo.connect-timeout}"
            max-wait-time="${mongo.max-wait-time}"
            auto-connect-retry="true"
            socket-keep-alive="true"
            socket-timeout="${mongo.socket-timeout}"
            slave-ok="true"
            write-number="1"
            write-timeout="0"
            write-fsync="true"/>
         </mongo:mongo>

         <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
            <constructor-arg ref="mongo" />
            <constructor-arg name="databaseName" value="${mongo.db}" />
         </bean>

        <context:component-scan base-package="domain.company.group.project.data.repositories"/>

        <!-- MongoDB repositories -->
        <mongo:repositories base-package="domain.company.group.project.data.repositories.mongodb"/>

        <!-- some other stuff -->

    </beans> 
```

假设我有一个简单的存储库，如下所示：

```
public interface LocationRepository extends MongoRepository<Location, String>, LocationRepositoryCustom {

} 
```

其中 LocationRepositoryImpl 是为某个 Location（域对象）类实现我的所有自定义方法的类。我的测试类看起来像：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"/test-context.xml"})
public class LocationRepositoryTest {

    @Autowired
    private LocationRepository locationRepository;

    /* Some tests... */
} 
```

我试图在我正在运行的测试中嵌入一个 MongoDB 实例（如此[处](http://blog.yohanliyanage.com/2012/11/integration-testing-mongodb-spring-data/)所述），但它不起作用：与测试数据库的连接已建立，但 mongo 模板似乎无法被覆盖，因为所有保存方法都将数据插入到“生产”数据库。

我正在使用 Spring 3.2.0 和 Spring Data Mongo 1.1.0.RELEASE。我正在使用 Junit 进行测试。

有什么建议么？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-04T12:15:53.203

贾兰达，

上周我遇到了同样的问题，巧合的是，我听说了[Fongo](https://github.com/foursquare/fongo "丰戈")，“mongo 的内存中 java 实现”。

所以我决定用它来测试我的自定义存储库并完美地为我工作。下面是一个如何配置 Spring 以在 JUnit 测试中使用 Fongo 的示例。请注意，我没有使用 xml 配置。

希望这会有用！

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class LocationRepositoryTest {

   private static final String PLAYER_ID = ObjectId.get().toString();

   @Autowired private LocationRepositoryCustom playerRepository;
   @Autowired private MongoTemplate mongoTemplate;

   /* Some tests... */

   @Configuration
   static class LocationRepositoryTestConfiguration {

        @Bean
        public Mongo mongo() {
            // Configure a Fongo instance
            return new Fongo("mongo-test").getMongo();
        }

        @Bean
        public MongoTemplate mongoTemplate() {
            return new MongoTemplate(mongo(), "collection-name");
        }

        @Bean
        public LocationRepositoryCustom playerRepository() {
            // This is necessary if MongoTemplate is an argument of custom implementation constructor
            return new LocationRepositoryCustomImpl(mongoTemplate());
        }
    }
} 
```

# css - div中div中的CSS HTML textarea最大高度减去标题

> ID：16153270
> 
> 赞同：0
> 
> 时间：2013-04-22T17:37:23.217
> 
> 标签：css, html

这是我正在使用的 HTML 代码：

```
<div id="header">123</div>
<div id="editorcontent">
    <div id="ta_a"><textarea style="resize: none;"><? echo $t1; ?></textarea></div>
    <div id="ta_c"><textarea style="resize: none;"><? echo $t2; ?></textarea></div>
    <div id="centerinfo">CONTENT 1</div>
    <div id="clear"></div>
    <div id="centerinfo">CONTENT 2</div>
    <div id="ta_b"><textarea style="resize: none;"><? echo $u1; ?></textarea></div>
    <div id="ta_d"><textarea style="resize: none;"><? echo $u2; ?></textarea></div>
</div> 
```

和CSS：

```
#editorcontent {
  min-height: 400px;
  min-width: 800px;
  overflow: hidden;
  position: relative;
  height: auto;
  width: 100%;
}

#ta_a {
  position: relative;
  width: 40%;
  height: 50%;
  float: left;
}

#ta_c {
  position: relative;
  width: 40%;
  height: 50%;
  float: right;
}

#ta_b {
  position: relative;
  width: 40%;
  height: 50%;
  float: left;
}

#ta_d {
  position: relative;
  width: 40%;
  height: 50%;
  float: right;
}
#centerinfo {
  text-align: center;
  position: relative;
  width: 19.6%;
  height: 40%;
  display: inline-block;
}
#clear {
  clear:both;
  min-height: 10px;
}
#header {
  height: 44px;
  background: #D00000;
} 
```

问题是 textareas 的 2 倍 50% 并没有看标题，导致页面的高度总是太大......

**小提琴** [http://jsfiddle.net/5SD2U/](http://jsfiddle.net/5SD2U/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T01:51:18.903

为此，您需要 javascript/jQuery 或 CSS hack。我对 CSS hack 做了一个小技巧。它涉及将您的#editorcontent div 设置为 100%，添加 header_placeholder div，并将标题的位置设置为绝对。另请记住，您将始终必须手动将标题和占位符的高度设置为相同的数字。

此外，您必须将 body 和 html 设置为 padding: 0、margin: 0、width: 100% 和 height: 100%，否则这可能不适用于所有浏览器。

这是工作小提琴：http: [//jsfiddle.net/5SD2U/1/](http://jsfiddle.net/5SD2U/1/)

这是供参考的代码：HTML：

```
<div id="header">123</div>
<div id="editorcontent">
    <div id="header_placeholder"></div>
    <div id="ta_a"><textarea style="resize: none;">1</textarea></div>
    <div id="ta_c"><textarea style="resize: none;">2</textarea></div>
    <div id="centerinfo">CONTENT 1</div>
    <div id="clear"></div>
    <div id="centerinfo">CONTENT 2</div>
    <div id="ta_b"><textarea style="resize: none;">3</textarea></div>
    <div id="ta_d"><textarea style="resize: none;">4</textarea></div>
</div> 
```

和 CSS

```
body, html {
    height: 100%;
    width: 100%;
    padding: 0;
    margin: 0;
}
#editorcontent {
  height: 100%;
  min-width: 800px;
  overflow: hidden;
  position: relative;
  height: auto;
  width: 100%;
}
#header_placeholder {
    height: 44px; /* height of the header */
}
#ta_a {
  position: relative;
  width: 40%;
  height: 50%;
  float: left;
}

#ta_c {
  position: relative;
  width: 40%;
  height: 50%;
  float: right;
}

#ta_b {
  position: relative;
  width: 40%;
  height: 50%;
  float: left;
}

#ta_d {
  position: relative;
  width: 40%;
  height: 50%;
  float: right;
}
#centerinfo {
  text-align: center;
  position: relative;
  width: 19.6%;
  height: 40%;
  display: inline-block;
}
#clear {
  clear:both;
  min-height: 10px;
}
#header {
  height: 44px;
  background: #D00000;
    position: absolute;
    width: 100%; 
```

# c# - 分析用户如何与 C# Windows 应用程序交互

> ID：16153271
> 
> 赞同：0
> 
> 时间：2013-04-22T17:37:26.807
> 
> 标签：c#, .net, wpf, windows, winforms

我刚刚继承了一个 C# windows 应用程序代码库。这是一个相对较大的应用程序，有很多 UI“元素”，我相信之前的开发人员可能已经添加了这些元素，而与实际客户端几乎没有交互。这个应用程序是一个机器人控制系统，它在制造设施中运行，它有一些我见过的最复杂的 UI（表单内的表单内的选项卡式元素内等......）

我想做的第一件事就是了解实际的车间员工如何与此应用程序交互。我已经向不同的主管发送了一份调查，但我也想要一些经验数据。

我想做的事：

我想以某种方式捕获用户每次按下按钮、控件等的时间......并将其记录到文件中。像这样简单的东西：

时间戳，控件名称，我可以捕获的任何其他很酷的数据（例如程序运行状态。）

困难在于，此时我还不是真正的 C# 专家，而且我无法找到合适的方法来向我的应用程序添加某种全局行为，而这样做又不会影响现有功能。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:45:13.203

全局键盘和鼠标钩子将是要走的路。除非有人彻底了解设计并且可以评论如何扩展现有功能。这会有点困难。

# fortran - 为什么第二个 if 子句甚至执行？

> ID：16153272
> 
> 赞同：1
> 
> 时间：2013-04-22T17:37:38.997
> 
> 标签：fortran

我的程序中有一个`do while`循环，谁有条件继续给我一个错误，我不知道为什么。它看起来像这样：

```
do while (ii .le. nri .and. ed(ii) .le. e1)
    ! do some stuff...
    ii = ii + 1
end do 
```

其中`ii`和`nri`是标量整数，`e1`是标量实数，并且`ed`是长度为的实数数组`nri`。我期望在最后一次运行后发生的是，因为`ii.le.nri`返回`.false.`第二个条件从未被测试过，而且我没有遇到任何不合时宜的问题。我已经用确实返回的调试器进行了验证`ii.le.nri`-但*程序*`.false.`崩溃了。

为了验证我只测试一个条件的假设，我什至编写了一个小测试程序，我使用相同的编译器选项编译它：

```
 program iftest
     implicit none

     if (returns_false() .and. returns_true()) then
         print *, "in if block"
     end if
 contains
     function returns_true()
         implicit none
         logical returns_true
         print *, "in returns true"
         returns_true = .true.
     end function

     function returns_false()
         implicit none
         logical returns_false
         print *, "in returns false"
         returns_false = .false
     end function
 end program 
```

正如我所料，运行此程序仅输出

```
 $ ./iftest
 in returns false 
```

并退出。第二个测试永远不会运行。

为什么这不适用于我的`do while`条款？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T18:07:30.517

与某些语言相比，Fortran 不保证复合逻辑表达式的任何特定求值顺序。就您的代码而言，最后一次循环 while 循环的值`ii`设置为`nri+1`。您的编译器生成测试代码`ed(nri+1)<=e1`并因此引用`ed`. 这很可能是您的程序崩溃的原因。

您的期望与该语言的 Fortran 标准规定相反。

如果您还没有这样做，请尝试在打开数组边界检查的情况下重新编译您的代码，看看会发生什么。

至于为什么您的测试没有解决这个问题，我怀疑您的所有测试真正显示的是您的编译器为不同的条件种类生成了不同的执行顺序，并且您并没有真正比较同类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T18:36:06.980

扩展答案高性能标记，这是重写循环的一种方法：

```
ii_loop: do

  if (ii .gt. nri) exit ii_loop
  if (ed(ii) .gt. e1) exit ii_loop

  ! do some stuff

  ii = ii + 1

end do ii_loop 
```

# php - 通过 php 删除 xml 节点和所有子节点

> ID：16153273
> 
> 赞同：0
> 
> 时间：2013-04-22T17:37:42.383
> 
> 标签：php, xml, domdocument, removechild

我一直在这里和谷歌四处寻找并找到各种代码，但它们都不起作用。我假设这是因为它们都不符合我的确切情况。我有一个这样的xml结构：

```
<employees>
        <employee EmpID="">
            <first_name></first_name>
            <last_name></last_name>
            <ssnum></ssnum>
            <status></status>
            <contact_info>
                    <office_phone></office_phone>
                    <email></email>
                    <cell_phone></cell_phone>
            </contact_info>
            <access_info level="user">
                    <username></username>
                    <password></password>
            </access_info>
            <department></department>
            <date_started></date_started>
            <years></years>
            <position></position>
            <salary></salary>
            <e_increase></e_increase>
            <e_raise></e_raise>
            <photo></photo>
    </employee>
</employees> 
```

我将要删除的员工的 EmpID 存储在一个名为 $ID 的变量中。我想彻底解雇那个员工。我试过这样的事情：

```
foreach ($doc->getElementsByTagName('employee') as $employee) {
    if($employee->getAttribute('EmpID') === $ID) {
        foreach ($employee as $node) {
    $node->parentNode->removeChild($node);
    }
    }
} 
```

和其他循环试图获得类似的东西，如在这些帖子中：[PHP XML remove element and all children by name](https://stackoverflow.com/questions/5731879/php-xml-remove-element-and-all-children-by-name)和[Remove all children from a XML Node PHP DOM](https://stackoverflow.com/questions/3603739/remove-all-children-from-a-xml-node-php-dom)但我无法让它成功工作。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:50:35.370

查找我的 xml，我发现它略有不同.. 试试这个。

```
foreach ($doc->getElementsByTagName('employee') as $employee) {
    if($employee->getAttribute('EmpID') === $ID) {
       $employee->parentNode->removeChild($employee);
       // $dom->save($xmlFile);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:48:22.877

你去：

```
$xml = '<employees>
        <employee EmpID="1">
            <first_name></first_name>
            <last_name></last_name>
            <ssnum></ssnum>
            <status></status>
            <contact_info>
                    <office_phone></office_phone>
                    <email></email>
                    <cell_phone></cell_phone>
            </contact_info>
            <access_info level="user">
                    <username></username>
                    <password></password>
            </access_info>
            <department></department>
            <date_started></date_started>
            <years></years>
            <position></position>
            <salary></salary>
            <e_increase></e_increase>
            <e_raise></e_raise>
            <photo></photo>
    </employee>
     <employee EmpID="2">
            <first_name></first_name>
            <last_name></last_name>
            <ssnum></ssnum>
            <status></status>
            <contact_info>
                    <office_phone></office_phone>
                    <email></email>
                    <cell_phone></cell_phone>
            </contact_info>
            <access_info level="user">
                    <username></username>
                    <password></password>
            </access_info>
            <department></department>
            <date_started></date_started>
            <years></years>
            <position></position>
            <salary></salary>
            <e_increase></e_increase>
            <e_raise></e_raise>
            <photo></photo>
    </employee>
</employees>';

$doc = new DOMDocument();

$doc->loadXML($xml);

$selector = new DOMXPath($doc);
$els = $selector->query('/employees//employee');

//or
//$els = $doc->getElementsByTagName('employee');

foreach($els as $el){
    if($el->getAttribute('EmpID') == 1){
        $el->parentNode->removeChild($el);
    }
}

$xml = $doc->saveXML();

echo($xml); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:48:29.343

```
$ID = '';

$dom = new DOMDocument();
$dom->loadXML($xml_string);

$xpath = new DOMXpath($dom);
$nodes = $xpath->evaluate('/employees/employee[@EmpID = "' . $ID . '"]');
foreach ($nodes as $node) {
    $node->parentNode->removeChild($node);
} 
```

# html - 文本不会仅在 IE 上显示

> ID：16153275
> 
> 赞同：0
> 
> 时间：2013-04-22T17:37:45.483
> 
> 标签：html, internet-explorer, css

作为我的标题，我测试了其他浏览器 firefox、chome、safire 和 IE。只有 IE 不会在菜单栏上显示文本。我正在查看的是IE9。请帮忙。

示例如下：http: [//joeewu.com/Tester/Lindsay/](http://joeewu.com/Tester/Lindsay/)

感谢观看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:41:48.887

啊，cufon的乐趣..

您应该做的第一件事是更新到最新版本的 Cufon。

然后在任何`Cufon.replace()`调用之前将此代码添加到您的标题中：

```
<!--[if gte IE 9]>
   <script type="text/javascript">
        Cufon.set('engine', 'canvas');
   </script>
<![endif]-->
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

# java - 外部程序的错误退出值

> ID：16153276
> 
> 赞同：0
> 
> 时间：2013-04-22T17:37:53.003
> 
> 标签：java, process, runtime.exec

我正在尝试从外部程序读取退出值，但它始终为 0。

```
String command = ("cmd  /c start /wait "+ Script[0]);                          
Process exec = runtime.exec(command);                   
int waitFor = exec.waitFor();
System.out.println(exec.exitValue);     //always 0   
System.out.println(waitFor); //always 0 
```

程序用于编程模块，我需要知道是否有任何错误。

如何获取应用退出值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:40:56.187

您实际运行的程序就是`cmd`程序，而不是您在其下运行的任何程序。

请参阅[如何从 Windows 命令行获取应用程序退出代码？](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line)了解如何提取底层退出代码。

# cassandra - 错误请求：未配置的列族 （卡桑德拉）

> ID：16153280
> 
> 赞同：10
> 
> 时间：2013-04-22T17:38:19.793
> 
> 标签：cassandra, cql

我正在使用以下版本的 cql 和 cassandra。见下文：cqlsh 2.3.0 | 卡桑德拉 1.1.10 | CQL 规范 3.0.0 | 节俭协议 19.33.0

我有所有的 CF 和大量的数据。当我运行时：

> cqlsh -2 或 cqlsh -3 cql> 使用“test_keyspace”；cql:test_keyspace> SELECT * FROM "column_family_name" LIMIT 1;

注意：CF 是使用 pycassa 创建的，我正在尝试使用 cql 读取。不确定，如果这会有所作为。

它抛出，Bad Request: unconfigured columnfamily 也许您打算使用 CQL 2？启动 cqlsh 时尝试使用 -2 选项。

我需要查看任何特定设置来解决此问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T18:17:30.067

默认情况下，CQL3 不区分大小写，除非用双引号括起来。尝试将您的 CFNAME 放在双引号中。

```
SELECT * FROM "CFNAME" LIMIT 1; 
```

看起来您在创建表时忘记从 api 启用 CQL3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:27:08.657

我想，一种解决方案是使用 nodetool cfstats 选项并评估结果。这适用于根本从未使用过的 CF，但不适用于已创建和使用了一段时间、从未清理和放弃的 CF，因为它们在 nodetool cfstats 结果中没有访问 CF 的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:09:09.467

您没有在语句中指定键空间。

可以按如下方式指定键空间：

```
 SELECT * FROM "keyspace_name"."column_family_name" LIMIT 1; 
```

或者在查询列族之前，通过 'using' 语句指定 cqlsh 的键空间：

```
using "keyspace_name" 
```

# android - VLC 网络摄像头流到 android 滞后

> ID：16153281
> 
> 赞同：0
> 
> 时间：2013-04-22T17:38:20.407
> 
> 标签：android, stream, video-streaming, webcam, vlc

我正在尝试通过本地网络将我的网络摄像头实时流式传输到 android VideoView。视频出现了，但延迟了 15-20 秒。VLC 流设置：usgin HTTP Enacpsulation：MPEG-TS 视频编解码器：H-264 分辨率：640 x 480 比特率：我一直在更改它，试图找出一个合适的。VLC 输出字符串：

```
:sout=#transcode{vcodec=h264,vb=2000,fps=30,scale=1,width=640,height=480,acodec=none}:http{mux=ts,dst=:8080/stream} :sout-all :sout-keep 
```

Android VideoView 代码：

```
VideoView view1 = (VideoView) findViewById(R.id.videoView1); 
 getWindow().setFormat(PixelFormat.TRANSLUCENT);

 MediaController mc = new MediaController(this); 
 mc.setMediaPlayer(view1); 

 view1.setMediaController(mc); 
 view1.setVideoURI(Uri.parse("http://192.168.1.101:8554/stream")); 
 view1.requestFocus(); 
 view1.start(); 
```

我到处寻找这个问题，但似乎找不到解决方案，所以任何建议都将受到高度赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T17:24:58.527

我不熟悉 VideoView，但是当 VLC 在端口 8080 上流式传输时，为什么您的代码引用端口 8554？

我建议将[GOP 大小](https://en.wikipedia.org/wiki/Group_of_pictures)设置为[120](https://wiki.videolan.org/VLC-0-8-6_command-line_help) ( `--sout-x264-min-keyint <integer>`) 左右，作为测试的起点。

# html - 元素在背景后面？

> ID：16153283
> 
> 赞同：0
> 
> 时间：2013-04-22T17:38:30.343
> 
> 标签：html, css, z-index

我有一个元素将自己（以及它的所有子元素）放置在其相应部分的背景后面。页面上的任何其他元素，甚至在同一部分中，我都没有遇到过这个问题。我在内联设置了背景颜色，以确保这是正在发生的事情。它发生在所有浏览器中。感谢您提供的任何帮助。

```
<div id="homepage_servicesstrip">
    <div id="homepage_web_drops_wrap" style="background-color:red;">
    </div>
</div>

    #homepage_servicesstrip {
        background:url('home/images/gradient-services-background.png');
        background-size: auto 100%;
        position:absolute;
        margin-top:0px;
        width:100%;
        height:1050px;
        z-index:1;
    }
    #homepage_web_drops_wrap {
        position:absolute;
        margin-top:60%;
        margin-left:10%;
        height:500px;
        width:80%;
        z-index:60;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:06:48.077

z-index 首先计算兄弟姐妹，然后计算孩子。例如 HTML

```
<div class="box">
    <div class="one box"></div>
</div>
<div class="box">
    <div class="two box"></div>
</div>
<div class="box">
    <div class="three box"></div>
</div> 
```

CSS

```
 .box {
       z-index:1;
   }
   .two {
       z-index:1000000;
    } 
```

`.two`不会高于，`.three`因为`.three's`父母高于`.two's`父母。

[演示](http://jsfiddle.net/pavloschris/5tLrz/)

# java - 使用播放！2.0.4 带 Play2war 插件

> ID：16153286
> 
> 赞同：0
> 
> 时间：2013-04-22T17:38:43.383
> 
> 标签：java, plugins, playframework-2.0, war

所以我正在使用 Play 2.0.4 开发一个应用程序，我需要创建一个 WAR 文件。我尝试使用 Play2War 插件，但我不知道如何设置它。

我尝试按照配置（*[https://github.com/dlecan/play2-war-plugin/wiki/Configuration](https://github.com/dlecan/play2-war-plugin/wiki/Configuration)*），但这对我来说很神秘，似乎没有任何效果？

有人有白痴证明指南吗？我应该把下载的 Play2war 文件夹放在哪里？

最好的问候，巴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:06:48.777

老实说，play2-war-plugin 文档非常全面。但是为了进一步分解，这里是将示例应用程序构建为可以托管在 Servlet 2.5 容器中的 WAR 文件所需做的*最低限度的工作。*`helloworld`您不需要手动下载任何东西，只需要编辑两个项目文件：

**项目/plugins.sbt**

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

resolvers += "Play2war plugins release" at "http://repository-play-war.forge.cloudbees.com/release/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % Option(System.getProperty("play.version")).getOrElse("2.0"))

addSbtPlugin("com.github.play2war" % "play2-war-plugin" % "0.8.1") 
```

**项目/Build.scala**

```
import sbt._
import Keys._
import PlayProject._
import com.github.play2war.plugin._

object ApplicationBuild extends Build {

    val appName         = "helloworld"
    val appVersion      = "1.0"

    val appDependencies = Seq(
      // Add your project dependencies here,
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here
      Play2WarKeys.servletVersion := "2.5"
    ).settings(Play2WarPlugin.play2WarSettings: _*)

} 
```

完成这些编辑后，您应该能够通过从`helloworld`目录运行以下命令来生成 WAR 文件：

```
play war 
```

可能有一种更简洁的方式来列出这个插件`Build.scala`，但这应该能让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:21:08.787

在控制台上：玩战争 [app] -o app.war。我认为它应该工作

# asp.net - HostingEnvironment.VirtualPathProvider.FileExists 在现有文件上返回 false

> ID：16153289
> 
> 赞同：0
> 
> 时间：2013-04-22T17:38:45.287
> 
> 标签：asp.net, iis-7.5, virtualpathprovider

我正在尝试使用以下代码读取虚拟路径中的文件

```
HostingEnvironment.VirtualPathProvider.FileExists(_SiteMapFileName) 
```

`_SiteMapFileName`有类似“~/Content/en-US/MainMenu.sitemap”的东西，它总是返回`false`。

但是，如果我访问该虚拟路径的 URL（[http://www.local.mysite.com/Content/en-US/MainMenu.sitemap](http://www.local.mysite.com/Content/en-US/MainMenu.sitemap)），该文件会在浏览器中正确显示

`Content`是我网站下的**虚拟目录**，指向不同位置的共享文件夹。如果我在 Windows 资源管理器上访问该位置，我可以正确查看文件

我已将站点和虚拟目录设置为我的网络帐户进行连接。

我使用进程监视器工具查看是否有任何问题，它说 w3wp.exe 正在尝试**创建**文件 \path\to\shared\location\Content\en-US\MainMenu.sitemap 但它正在获得**ACCESS DENIED**哪个很好，因为它是只读位置

现在有人如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:13:19.220

我找到了原因。设置为运行与应用程序绑定的应用程序池的用户需要对试图读取的文件具有权限，而不仅仅是网站和虚拟目录。：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:20:16.413

当我使用 vDir 时，我使用 Server.MapPath 这对你不起作用吗？

```
if(System.IO.File.Exists(Server.MapPath("Relative Path to vDir")))
{
    //do something with the file
} 
```

# windows-mobile-6.5 - 符号设备终止进程

> ID：16153293
> 
> 赞同：0
> 
> 时间：2013-04-22T17:38:56.703
> 
> 标签：windows-mobile-6.5, motorola-emdk

我试图查看有多少应用程序实例在 MC65 设备（Windows Mobile 6.5 设备）上运行。然后，如果有多个应用程序实例正在运行，则杀死所有实例并运行该应用程序。[我在这里](https://stackoverflow.com/questions/1660087/how-to-kill-a-process-in-windows-mobile)试过那个代码。但它不适用于 MC65 设备。我相信这是因为它是一个符号设备，我在某处读到它们的行为与非符号设备不同。

有谁知道如何以编程方式找出符号设备上正在运行的进程？

更新：经过进一步测试，设备在创建正在运行的进程的快照时遇到问题。还没有找到解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:38:55.350

拍摄快照应该可以正常工作，但您必须使用标志以避免内存限制引发异常：

```
 [Flags]
    private enum SnapshotFlags : uint
    {
        HeapList = 0x00000001,
        Process = 0x00000002,
        Thread = 0x00000004,
        Module = 0x00000008,
        Module32 = 0x00000010,
        Inherit = 0x80000000,
        All = 0x0000001F,
        NoHeaps = 0x40000000
    } 
```

然后在对 CreateToolhelp32Snapshot 的正常调用中，您可以获得进程列表：

```
 public static Dictionary<UInt32, process> getProcessNameList()
    {
        int iCnt = 0;
        //List<processnames> name_list = new List<processnames>();
        Dictionary<UInt32, process> _pList = new Dictionary<uint, process>();
        uint procID = 0;
        IntPtr pHandle = CreateToolhelp32Snapshot(SnapshotFlags.Process | SnapshotFlags.NoHeaps, procID);
        if ((Int32)pHandle == INVALID_HANDLE_VALUE)
            throw new Exception("CreateToolhelp32Snapshot error: " + Marshal.GetLastWin32Error().ToString());

        if ((int)pHandle != INVALID_HANDLE_VALUE)
        {
            PROCESSENTRY32 pEntry = new PROCESSENTRY32();
            pEntry.dwSize = (uint)Marshal.SizeOf(pEntry);
            if (Process32First(pHandle, ref pEntry) == 1)
            {
                do
                {
                    //name_list.Add(new processnames(pEntry.th32ProcessID, pEntry.szExeFile));
                    _pList[pEntry.th32ProcessID] = new process(pEntry.th32ProcessID, pEntry.szExeFile, new List<thread>());
                    iCnt++;
                } while (Process32Next(pHandle, ref pEntry) == 1);
            }
            else
                System.Diagnostics.Debug.WriteLine("Process32First error: " + Marshal.GetLastWin32Error().ToString());
            CloseToolhelp32Snapshot(pHandle);
        }

        return _pList;
    } 
```

上面的代码是我的远程[ProcessorUsage 测试应用程序](http://www.hjgode.de/wp/2012/12/14/mobile-development-a-remote-cpu-monitor-and-cpu-usage-analysis/)的一部分。

然而，如果先前的实例已经在运行，普通的 Windows 移动应用程序将自行终止它们。当您在 CSharp 或 CPP 中创建并运行 SmartDevice 项目时，这也是默认设置，目标是“Windows Mobile ...”。如果您以基于标准 Windows CE 的 SDK 为目标，则不会生成自动代码来防止应用程序的启动代码中出现多个实例。

如果您仍需要帮助，请告诉我们。

# jquery - jquery试图在循环中附加第一个对象

> ID：16153294
> 
> 赞同：0
> 
> 时间：2013-04-22T17:38:57.860
> 
> 标签：jquery, append, setinterval

我正在尝试编写一个无限滑块，但由于某种原因，滑块只会从列表中获取第一个项目，然后永远不会用下一个“第一个”项目重新设置 firstli 变量。我不明白为什么，有人可以告诉我我做错了什么吗？

这是我的代码：

```
var o = this;

o.brandSlider = function() {
    o.container = $('.brand-slider');
    o.containerW = null;
    o.ul = o.container.find('ul');
    o.li = o.ul.find('li').each(
        function() {
            var w = $(this).outerWidth(true);
            o.containerW = o.containerW + w;
        })

    o.ul.css({
        width : o.containerW+'px'
    })

    o.li.each(function(){
        o.currentPos = $(this).position();
        $(this).css('left', o.currentPos.left+'px');
    }).css('position', 'absolute');

    o.slideTimer = setInterval(function(){
        o.firstli = o.li.first().addClass('target');
        o.lastli = o.li.last();
        o.newPos = o.lastli.position().left - 80 + o.firstli.outerWidth(true);
        o.li.css('left', '-=1px')
        if (o.li.css('left') == '-250px') {
            o.firstli.appendTo(o.ul).css('left', o.newPos+'px').removeClass('target');
        }
    }, 1)
};

// This should always be the last method. Use this to control the object.
o.init = function() {
    o.brandSlider();
}; 
```

这是加价

```
<section>
            <h1>Brands I've worked with</h1>
            <div class="brand-slider">
                <ul>
                    <li class="logos-1">Item</li>
                    <li class="logos-2">Item</li>
                    <li class="logos-3">Item</li>
                    <li class="logos-4">Item</li>
                    <li class="logos-5">Item</li>
                    <li class="logos-6">Item</li>
                </ul>
            </div>
        </section> 
```

提前致谢。

# c# - 使用 c# 将文本文件导入 SQL Server 数据库

> ID：16153299
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:39:07.200
> 
> 标签：c#, sql, sql-server

我有一些考勤设备的文本文件。该文件如下所示：

```
010:0007739166:20120908:071009:BLANK !!:11
010:0013646521:20120908:073125:BLANK !!:11
010:0010840695:20120908:073129:BLANK !!:11
010:0005546931:20120908:073131:BLANK !!:11
010:0013656129:20120908:073136:BLANK !!:11
010:0010827749:20120908:073222:BLANK !!:11
010:0009668536:20120908:073251:BLANK !!:11
010:0009673161:20120908:073410:BLANK !!:11 
```

我需要使用 c# 应用程序将它们插入到我的 SQL Server 数据库中。我正在使用的代码是：

```
string[] alllines = File.ReadAllLines(txtFilePath.Text);

for (int i = 1; i < alllines.Length; i++)
{
    OdbcConnection conn = new OdbcConnection(connstring);
    conn.Open();
    OdbcCommand cmd = new OdbcCommand();
    cmd.Connection = conn;

    string[] items = alllines[i].Split(new char[] { ":" });
    string cardno = items[1];
    string date = items[2];
    string time = items[3];
    string datetime = date + " " + time;
    cmd.CommandText = "insert into tbl_card values('" + cardno + "','" + date + "','" + DateTime.Parse(datetime) + "','Entry','" + System.DateTime.Now.ToString() + "')";
    cmd.CommandType = CommandType.Text;
    OdbcDataReader dr = cmd.ExecuteReader();
    conn.Dispose();

} 
```

我得到的错误是：

> 无法将类型“字符串”隐式转换为“字符”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:09:40.633

答案很简单。但是，如果您在提问时发布了代码和异常，那就更好了。

`new char[] { ":" }`请参阅导致异常和更改的此代码

```
string[] items = alllines[i].Split(new char[] { ":" }); 
```

至

```
string[] items = alllines[i].Split(new char[] { ':' }); 
```

就这些。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T17:43:10.693

文件的格式是什么？它是制表符/空格分隔的吗？如果是，您可以创建与文件的 OleDb 连接并将其读入您的阅读器/数据集对象。

话虽如此，文件可以有多大？对于较大的文件和 .Net 4.0 或更高版本，我建议使用流并使用 TPL 进行并行插入。

# ruby - 我如何需要子目录中的 ruby 文件

> ID：16153301
> 
> 赞同：0
> 
> 时间：2013-04-22T17:39:08.903
> 
> 标签：ruby, rake, require

我有以下结构

```
tests
  specific tests
    first_test.rb
  more tests
    second_test.rb
 test_helper.rb 
```

现在我试图在 first_test 和 second_test 中都需要 test_helper。以下作品

> 需要'../test_helper.rb'

从命令行我应该接受特定的测试并执行

```
ruby first_test.rb 
```

我怎样才能获得更大的灵活性，即。我想在任何目录中执行这些测试。目前我得到“没有这样的文件”。这不是一个 Rails 应用程序，但在 Rails 中我可以简单地做 require 'test_helper.rb'

使用 rake 进行这项工作的奖励积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:03:16.183

将您的 test_helper 和其他助手放在一个单独的目录中，例如

```
/home/XXX/projects/test_project/lib/ 
```

或您喜欢的任何地方并使用基本目录，例如

```
Dir["base/path/to/your/helper/*.rb"].each {|file| require file } 
```

或者从我上面的例子

```
Dir["/home/XXX/projects/test_project/lib/*.rb"].each {|file| require file } 
```

而已。现在将这一行添加到您想要与任何目录分开运行的每个测试的开头。忘记目录问题。

# vba - VBA 和透支问题

> ID：16153304
> 
> 赞同：0
> 
> 时间：2013-04-22T17:39:16.270
> 
> 标签：vba, ms-access, dao

我创建了一个 VBA 程序，它可以正确连接到 Access 和输入和输出。我在尝试使可用余额正确显示时遇到问题。目前我有：

```
range("a6").select
set my recordset etc.
activecell = 0 - money out  ( this works If I'm within my overdraft. I changed it to)
If 0 - money out = 0 then
  activecell = money in + money out
  else
  activecell = 0-money out
End if 
```

如果我处于透支状态，这仍然与上述相同，但如果我处于贷方余额中，它会使单元格保持空白。代码运行完美，所以我很困惑..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:26:08.400

如果我正确地遵循你需要改变这个：

```
If 0 - money out = 0 then 
```

对此：

```
If 0 - money out >= 0 then 
```

# c# - C# 如何对集合执行字符串替换方法？

> ID：16153305
> 
> 赞同：1
> 
> 时间：2013-04-22T17:39:16.790
> 
> 标签：c#, collections

我有以下方法返回一个集合，因此我可以从 MVC 中构建一个下拉菜单。问题是，我想替换集合中的值中的子字符串，但我不确定如何在 C# 中这样做（我是一个经典的 vb 人）。

```
public class RolesManagement
{
    public static IEnumerable<string> BuildRoles(string DesiredRole)
    {
        var UserRoles = Roles.GetAllRoles();

        IEnumerable<string> roles;
        roles = UserRoles.Where(x => x.Contains("Sub")).Except(rejectAdmin);
        return roles;
    }

} 
```

为简洁起见，以上已被简化。角色集合中的每个角色如下所示：SubUser SubAdmin SubManager。

我只是想返回用户管理员

请问在 C# 中最好的方法是什么？

我的猜测是我必须做一个 foreach 并替换每个循环上的子字符串并在移动到下一个项目之前重新填充该值。

如果您可以提供一个很棒的代码示例，因为我似乎仍然会因语法问题而绊倒。

非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:54:23.380

你可以用 LINQ 做到这一点。

```
roles = UserRoles
    .Where(x => x.Contains("Sub"))
    .Except(rejectAdmin)
    .Select(x => x.Replace("Sub", "")); 
```

编辑：请注意，此方法只是替换所有字符串中所有出现的字符串“Sub” `roles`。这是一个非常广泛的行程，如果您只想进行您提到的替换，您可能需要使用不同的 lambda 函数。请参阅 Romoku 的帖子以获取帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:52:17.210

我会说如果角色不会经常改变，那么做一个映射`Dictionary`。

```
public class RolesManagement
{
    private static readonly Dictionary<string,string> RoleMapping =
        new Dictionary<string,string>
        {
            {"SubUser", "User" },
            {"SubManager", "Manager" },
            {"SubAdmin", "Admin" }
        };

    public static IEnumerable<string> BuildRoles(string DesiredRole)
    {
        var UserRoles = Roles.GetAllRoles();

        IEnumerable<string> roles;
        roles = UserRoles.Where(x => x.Contains("Sub")).Except(rejectAdmin);
        return roles.Select(r => RoleMapping.ContainsKey(r) ? RoleMapping[r] : r);
    }
} 
```

或者只是将它们作为`FriendlyName`列存储在数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T18:01:01.140

这将返回所有以 sub 开头的项目，删除 sub

`IEnumerable<string> = UserRoles .Where(x => x.StartsWith("sub")) .Select(y => y.Remove(0,3));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:52:36.150

```
public static IEnumerable<string> GetCorrectedRoleNames(IEnumerable<string> roles)
{
    List<string> correctedRoles = new List<string>();
    foreach (string role in roles)
        correctedRoles.Add(Regex.Replace(role, "Sub", string.Empty));
    return correctedRoles.AsEnumerable();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T17:53:28.937

```
public static IEnumerable<string> BuildRoles(string DesiredRole)
{
    var UserRoles = Roles.GetAllRoles();

    IEnumerable<string> roles;
    roles = UserRoles.Where(x => x.Contains("Sub")).Except(rejectAdmin).Select(x=>x.Replace("Sub","");
    return roles;
} 
```

我认为 x 是`string`可变的，如果不是你必须在字符串集合上执行此替换

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T17:54:31.907

如果我正确理解您的问题，您需要删除字符串中出现的“Sub”。如果你有其他条件，你可以做额外的检查，比如“Sub”在字符串的开头，不区分大小写等。

其中一种方法是找到要删除的字符串的索引，然后删除。

```
var s = "SubUser";
var t = s.Remove(s.IndexOf("Sub"), "Sub".Length); 
```

或者，您也可以将要删除的字符串替换为空字符串。

```
var t = s.Replace("Sub", ""); 
```

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T18:00:38.110

试试这个

```
List<string> x = new List<string>();
x.Add("SubUser");
x.Add("SubAdmin");
x.Add("SubManager");

var m = x.Select( y => y.Replace("Sub", "")); 
```

# google-chrome - Chrome 未在检查器网络选项卡中显示“内容”

> ID：16153311
> 
> 赞同：1
> 
> 时间：2013-04-22T17:39:32.600
> 
> 标签：google-chrome

有时 Chrome Inspector 在网络选项卡中显示“大小/内容”，有时它只显示“大小”。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:39:32.600

浪费了几个小时后，我意识到 Chrome 有一个**“使用小资源行”**和**“使用大资源行”**选项。此设置可能会根据您访问的站点/您上次设置的内容而改变。这不是很明显，但是当检查一下时，网络选项卡只会显示“大小”。当它被禁用时，您将看到“大小”和“内容”（这在尝试通过 HTTP 查看下载文件的压缩大小时很有用）。

![在此处输入图像描述](https://i.stack.imgur.com/apxd5.png)

# angularjs - 使用 AngularJS 和 $resource 保存新模型

> ID：16153313
> 
> 赞同：39
> 
> 时间：2013-04-22T17:39:40.083
> 
> 标签：angularjs

我正在尝试使用 $resource 来了解 AngularJS，但是我看到的大多数示例都没有解释如何使用 $resource 实际创建某些东西的新实例（或者整个设置的外观）。我已经在底部发布了我的代码。

我有以下设置，其中发布到“/entry/api”应该创建一个新条目。它自身的入口对象具有三个属性：名称、描述和标识。

我认为调用 $scope.save(); 会做两件事：

1.  将输入字段映射为 POST 数据
2.  向 $resource 中定义的 url 发出 POST 请求（在本例中为“/entry/api”）

我见过的一些示例是手动将数据映射到资源，如下所示：

```
var entry = new Entry();
entry.name = $name; // defined in entryController
entry.description = $scope.description; // <-- defined in entryController
entry.$save() 
```

我认为这不应该是必要的，因为这些字段是在 html.xml 中定义的。该解决方案导致：

1.  在后端定义模型
2.  在前端定义模型（entryController `div`）
3.  将 entryController 中的值添加`div`到模型的 JS 版本中，然后最后保存。

这可能是 AngularJS 的工作方式，但是我认为 html 中的输入字段会自动映射。

否则，如果添加或删除（后端）模型的属性，则代码中至少有 3 个位置需要更新。

你应该如何使用 AngularJS`$resource`来保存新对象？

```
angular.module('entryManager', ['ngResource']);

function pollController($scope, $resource) {
    $scope.polls = $resource('/entry/api/:id', {id: '@id'});

    $scope.saveEntry = function() {
        this.save();
    }
}

<html ng-app="entryManager">
... <-- include angularjs, resource etc.

<div ng-controller="entryController">
    <input type='text' ng-model="name"><br/>
    <textarea ng-model="description" required></textarea><br/>
    <button class="btn btn-primary" ng-click="saveEntry()">Save</button>
</div> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-22T18:58:56.170

第一个认为您应该注意的是`scope != model`，但是范围可以包含模型。

您应该在您的范围内有一些对象，然后保存它。

所以，会有类似下面的东西：

### HTML：

```
<div ng-controller="entryController">
    <input type='text' ng-model="poll.name"><br/>
    <textarea ng-model="poll.description" required></textarea><br/>
    <button class="btn btn-primary" ng-click="saveEntry()">Save</button>
</div> 
```

### JavaScript：

```
function pollController($scope, $resource) {
    var polls = $resource('/entry/api/:id', {id: '@id'});

    $scope.saveEntry = function() {
        polls.save($scope.poll);
    }
} 
```

**注意 1：**即使你没有初始化 poll 对象，AngularJS 也会在你开始输入时自动创建新对象。

**注意2：**最好将表单包装成`ngForm`（通过`ng-form="someformname"`使用ng-controller向div添加属性或使用包装。在这种情况下，您可以在保存之前`<form name='...'>..</form>`检查表单的有效性。`$scope.someformname.$valid`

很好的例子是在“连接后端”部分（顺便说一句，我最喜欢的）下的 AngularJS 网站主页上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-30T05:33:22.457

不要对模型对象本身使用保存方法，使用模型类的保存方法，例如 -

```
//inject User resource here
$scope.user = new User();

$scope.user.name = "etc";

User.save($scope.user,function(response){

}); 
```

以前我使用`$scope.user.$save(function(response){})`它正在清除我的 $scope.user 对象

# jquery - 在 AJAX 完成之前未发生成功功能

> ID：16153314
> 
> 赞同：1
> 
> 时间：2013-04-22T17:39:40.177
> 
> 标签：jquery, asynchronous

我正在尝试使用 jQuery`dialog`框`beforeClose`功能。我正在检查用户表单数据的格式是否正确，如果没有，则返回`false`，`beforeClose`以便用户重新输入信息。

对话框代码调用中的`submituserupdateform`函数`beforeClose`：

```
.dialog({beforeClose: function () {
  formresult=submituserupdateform($('#myaccountdialog').find('form'));
  if (formresult !="okay"){
    return false;
 }
}}) 
```

该`submituserupdateform`函数检查代码中是否存在错误：

```
function submituserupdateform($tgt){
  var url='./includes/admin/user/myaccount.php';
  $.ajax({
      type: "POST",
      url: url,
      data: $tgt.serialize(),
      success: function(data){
        $("#myaccountdialog").html(data);
        if ($('.error').length){
          var myresult= "notokay";
        } else {
          var myresult ="okay";
        }
      },
      dataType: "html"
    });
   return myresult;
} 
```

我已经搜索过，发现[https://stackoverflow.com/questions/1632039/return-value-from-ajax-call](https://stackoverflow.com/questions/1632039/return-value-from-ajax-call)，但我已经`myresult`在我的成功回调中进行设置。我也试过`ajaxComplete`，，，`ajaxSuccess`。`.done`根据控制台，我没有尝试过任何设置`myresult`；我总是以：

`Uncaught ReferenceError: myresult is not defined`

这一定是一个简单的错误，如果你看到我的错误，请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:42:13.817

那是因为`myresult`仅适用于成功块。在外面声明

```
function submituserupdateform($tgt){
  var url='./includes/admin/user/myaccount.php';
  var myresult;
  $.ajax({
      type: "POST",
      url: url,
      data: $tgt.serialize(),
      success: function(data){
        $("#myaccountdialog").html(data);
        if ($('.error').length){
          myresult= "notokay";
        } else {
          myresult ="okay";
        }
        return myresult;

      },
      dataType: "html"
    });

} 
```

而且，正如@Mohammad Adil 指出的那样，下面要执行的代码有可能`formResult`被分配了来自 AJAX 的值

```
if (formresult !="okay"){
    return false;
 } 
```

在这种情况下，您可以`async = false`按照他的建议进行。为了您的代码始终有效，您也应该添加它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:43:06.277

ajax 的异步行为将使您的函数在 ajax 成功回调之前返回 - （*这是您不想要的*）

您可以添加`async`：`false`

```
 var myresult ="":
 $.ajax({
      type: "POST",
      url: url,
      data: $tgt.serialize(),
      async:false,
      success: function(data){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:41:30.390

您的

```
var myresult 
```

不是全局可用的函数声明它像这样

```
function submituserupdateform($tgt){

    var myresult; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:47:08.073

$.ajax 是异步的，这意味着它将发布请求并立即返回。当 ajax 请求在后台运行时，正常的脚本执行将继续。

您应该做的是在后台运行 ajax 请求时显示一些等待图标，保持对话框打开。一旦 ajax 请求返回，使用 ajax 事件处理程序处理结果，并根据结果关闭对话框或保持打开状态，显示错误消息。

# jquery-isotope - jquery-isotope：如何改变过滤元素的外观

> ID：16153316
> 
> 赞同：0
> 
> 时间：2013-04-22T17:39:47.947
> 
> 标签：jquery-isotope

我想更改过滤元素的外观而不隐藏它们（与[此问题](https://stackoverflow.com/questions/12013874/reduce-opacity-of-jquery-isotope-hidden-elements)相同，但链接无效..），并且不移动它们（仅“隐藏”它们）。

我试图更改*hiddenClass*和*hiddenStyle*选项，但我不明白它是如何工作的..

```
$container.isotope({
            itemSelector : '.element',
            columnWidth : 90,
            rowHeight : 60,
            hiddenClass :'',                // seems to deactivate the current style
            hiddenStyle : { opacity : 50 }  // attempt to set a nex style
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T22:10:54.717

这应该是你想要做的：http: [//isotope.metafizzy.co/options.html#hiddenstyle](http://isotope.metafizzy.co/options.html#hiddenstyle)

```
$container.isotope({
    hiddenStyle: {
        opacity: 0.5
    },
    visibleStyle: {
        opacity: 1
    }
}); 
```

# bash - 特定路径部分的历史扩展

> ID：16153318
> 
> 赞同：0
> 
> 时间：2013-04-22T17:39:51.210
> 
> 标签：bash

说我有一个命令

```
some-command one/two/three/four 
```

我可以`!$:h`用来参考`one/two/three`。但是，说我想参考`one/two`or `one`。这可以单独使用历史扩展来完成吗？

使用`!$:h:h`不起作用 - 不是我期望的那样。

# node.js - 从命令行跳转到 node.js 库的简单快捷方式？

> ID：16153323
> 
> 赞同：2
> 
> 时间：2013-04-22T17:40:40.873
> 
> 标签：node.js

我正在尝试建立良好的习惯和对 node/javascript 的深入理解。

对问题的出色回答通常来自花时间仔细查看源代码的 Stackoverflow 用户。（这并不奇怪，对吧？）

所以，我让自己养成了总是检查底层源代码的习惯（cavaet - 现在只是 javascript 源代码，将来可能是 C）。

**有没有办法从命令行（或使用 Node）跳转到您正在使用的某个对象的源代码？**那就是快速转到正确的文件并在此处输入： [https ://github.com/joyent/node/tree/master/lib](https://github.com/joyent/node/tree/master/lib)

**我应该查看 Node.js 中的任何提示或内置工具吗？**

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:59:10.260

我经常只是`console.log(object.method.toString());`简单地打印函数的文本，这通常足以了解它。

# android - 特殊应用设计Android

> ID：16153325
> 
> 赞同：1
> 
> 时间：2013-04-22T17:40:53.227
> 
> 标签：android, xml, android-layout

我在这里发帖是为了了解是否可以在 Android 中进行此设计：

![在此处输入图像描述](https://i.stack.imgur.com/caCEhl.jpg)

如果是的话，你能帮我怎么做（只是指南）。

谢谢

**编辑 ：**

如果我只使用一个相对布局，我有这个 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background_cross"
    android:orientation="vertical" >
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="F1\n" />
    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="300dp"
        android:layout_marginLeft="50dp"
        android:text="Left\nbutton" />
    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Right\nbutton"
        android:layout_alignParentRight="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="300dp"
        android:layout_marginRight="50dp"/>
    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="380dp"
        android:text="Bottom\nbutton" />
</RelativeLayout> 
```

但是声明静态 dp 非常糟糕，并且不适用于所有设备。我的 xml 代码很糟糕？

我是否必须以编程方式获取设备的宽度和高度屏幕并以编程方式设置我的按钮位置？

也许我可以在背景中使用这张图片并在上面绑定按钮？（但如何？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:57:57.783

您可以使用 a 执行此操作`RelativeLayout`并在其中添加四个按钮。Android 支持为您的应用添加自定义字体，您也可以设置按钮的字体，您只需要字体文件即可。请参阅[此处](http://myandroidsolutions.blogspot.ro/2013/04/set-custom-font-on-android-from-assets.html)或[此处](http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/)的示例。您将需要按钮背景作为具有透明背景的白色/红色环。您可以将按钮放置在`RelativeLayout`使用边距属性 (/// )`layout_marginLeft`中，请参见[此处的](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)其他属性。按钮文本应该有两行（参见a 的 xml 属性）。`Right``Top``Bottom``android:lines``Button`

祝你好运！我希望它有所帮助；）。

# .net - 获取页面上的所有控件

> ID：16153328
> 
> 赞同：0
> 
> 时间：2013-04-22T17:40:57.153
> 
> 标签：.net, vb.net, web, controls

我需要根据全局变量将表单控件（文本框、单选按钮等）的 readOnly 属性设置为*readOnly = true 或 false 。*

我希望我可以像这样循环遍历每种类型的控件：

```
 For Each Ctrl In Me.Controls
            Ctrl.ReadOnly = myGlobalTrueFalse
        Next 
```

但这不起作用，因为每个 Ctrl 都没有 ReadOnly 属性。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:48:22.953

我想您只需在尝试为其分配值之前测试控件是否具有该属性。

```
For Each Ctrl In Me.Controls
 If Ctrl.ReadOnly Is Not Nothing Then
    Ctrl.ReadOnly = myGlobalTrueFalse
 End If
Next 
```

这比简单地将所有要禁用的控件（如面板）放入容器中消耗更多的资源，禁用容器本身。（这将禁用其中的所有控件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:48:25.917

To visit all controls, including those in containers, use this

```
 Dim ctrl As Control = Me.GetNextControl(Me, True)
    Do Until ctrl Is Nothing
        'perform action here
        ctrl = Me.GetNextControl(ctrl, True)
    Loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:50:04.143

先看 PhaDaPhunks 的回答。

自从我编写任何 VB 代码以来已经有好几年了，但这应该可以。
您可以添加更多循环。

```
For Each Ctrl In Me.Controls
 If Ctrl.ReadOnly Is Not Nothing Then
  Ctrl.ReadOnly = myGlobalTrueFalse
 End If
 For Each Ctrl2 In Ctrl.Controls
  If Ctrl2.ReadOnly Is Not Nothing Then
   Ctrl2.ReadOnly = myGlobalTrueFalse
  End If
 Next
Next 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-22T17:43:40.827

```
Try
    For Each Ctrl In Me.Controls
        Ctrl.ReadOnly = myGlobalTrueFalse
    Next
Catch ex As Exception

End Try 
```

这就是我在发生这种情况时使用的

# javascript - 从但未定义的访问范围

> ID：16153333
> 
> 赞同：0
> 
> 时间：2013-04-22T17:41:07.953
> 
> 标签：javascript, html, dom

我写这样的东西：

```
<form>
    <input>text</input>
    <div><span id="test">text</span></div>
.................
<button onclick="submitStudnetForm(this);"></button>
</form>

function submitStudnetForm(form){
    alert(form['test']);
} 
```

但它返回未定义，我不知道哪里错了？

提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:43:05.333

首先，`this`引用按钮而不是表单。即使它确实引用了表单，表单元素也仅包含按*名称*（而不是按 id）对*输入*元素的引用。你应该改用。这假设页面上只有*一个*这样的跨度，因为 id 必须是唯一的。*`document.getElementById('test')`*

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:47:06.513

其他人已经说了我想说的话。另外，您是否有理由使用带有 onclick 的按钮来提交表单，而不仅仅是输入 type="submit"？这样，关闭 javascript 的用户将无法使用该表单。

（由于某种原因，我无法将其作为评论插入 - 我想我的声誉太低了？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:43:14.583

您正在传递`this`，这是按钮，并且您试图从中提取一个名为 的属性，该属性`test`不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T17:46:20.787

表单不是一个索引名为“test”的数组（在这种情况下它是对按钮元素的引用）。当通过 id 引用元素时，您应该使用`document.getElementById('test').`**

# zip - 如何确定 DEFLATE 的压缩级别？

> ID：16153334
> 
> 赞同：1
> 
> 时间：2013-04-22T17:41:11.457
> 
> 标签：zip, zlib, deflate

DEFLATE 有十种不同的压缩级别（0 无压缩和最快，9 最佳压缩和最慢）。为原始 DEFLATE 数据确定此类级别的最佳方法是什么？

一种明显（但缓慢）的方法是尝试每种方法并按顺序进行比较。作为一个附带问题，是否可以保证文件的压缩数据大小从压缩级别 0 到 9 严格不增加？如果是这样，二分搜索可以将这个过程加快两倍/三倍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-28T08:38:59.363

如果您只有压缩数据，则不包含此类信息。压缩级别只能针对压缩进行配置，因此不会在压缩数据中进行编码。

但是，如果您使用 zlib 之类的东西，它会添加包含压缩级别的标头。来自[https://www.rfc-editor.org/rfc/rfc1950](https://www.rfc-editor.org/rfc/rfc1950)：

```
 FLEVEL (Compression level)
     These flags are available for use by specific compression
     methods.  The "deflate" method (CM = 8) sets these flags as
     follows:

        0 - compressor used fastest algorithm
        1 - compressor used fast algorithm
        2 - compressor used default algorithm
        3 - compressor used maximum compression, slowest algorithm

     The information in FLEVEL is not needed for decompression; it
     is there to indicate if recompression might be worthwhile. 
```

如果您不使用添加信息标头的库，您可以自己实现它（如果您的应用程序确实需要这样做）。只需在开头添加一两个字节（通常）即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T20:56:05.333

除了缓慢的方法，没有。

不，不能保证压缩后的大小是单调的。然而，不单调是非常罕见的。

# c - 将字符串文字分配给 char 数组，如何将字符串文字复制到堆栈中？

> ID：16153339
> 
> 赞同：5
> 
> 时间：2013-04-22T17:41:25.370
> 
> 标签：c, string, stack, literals

我知道当您执行 char array[] = "string" 时，字符串文字 "string" 会从数据段复制到堆栈中。字符串文字是否逐个字符地复制？还是编译器获取字符串文字的开始和结束地址，并一次性将整个字符串复制到堆栈中？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:01:46.567

只要观察到的结果相同，编译器就会做它“想要”做的任何事情。有时根本没有副本。

C 标准没有规定如何进行复制，因此 C 实现可以通过任何方式自由地实现结果。C 标准强加的唯一要求是可观察的结果（例如写入标准输出的文本）必须符合定义。

当工程师设计一个高质量的 C 实现时，他们会花一些时间考虑在这种情况下复制字符串的最佳方法，并且他们会寻求设计一个在每种情况下选择最佳方法的编译器。可以使用“移动立即值”指令来构建一个短字符串。一个长字符串可以通过调用来复制`memcpy`。中间字符串可以通过对 的内联调用来复制`memcpy`，实际上是一些移动几个字节的指令。

当工程师正在设计一个廉价的 C 实现时，只要完成工作以便将代码移植到机器上但不需要很快，他们就会做任何对他们来说最容易的事情。

有时编译器根本不会复制字符串：如果编译器可以告诉您不需要副本，则没有理由进行复制。例如，如果编译器看到您只是将字符串传递给`printf`而根本不修改它，那么编译器会得到相同的结果，而无需通过将原始字符串传递给`printf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:20:34.823

根本没有理由认为有副本。

以下面的代码为例。

```
int main() {
  char c[] = "hi";
} 
```

对我来说，这会产生（未优化的）程序集：

```
main:
    pushq   %rbp
    movq    %rsp, %rbp
    movw    $26984, -16(%rbp)
    movb    $0, -14(%rbp)
    movl    $0, %eax
    popq    %rbp
    ret 
```

数组的内存通过将其设置为值 26984 来初始化。这个值恰好由两个字节 0x68 和 0x69 表示，它们是 'h' 和 'i' 的 ascii 值。根本没有字符串的数据段表示，并且数组不是通过将任何内容逐个字符复制到其中或通过任何其他巧妙的复制方法来初始化的。

当然这只是一个编译器的实现（g++ 4.8），其他编译器可以做任何他们想做的事情，只要符合语言规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:07:23.233

我不确定“逐个字符”和“整个字符串”复制方法之间的区别是什么意思。字符串通常不是机器级实体，这意味着它不可能被复制为“整个字符串”。你预计这会如何发生？

至少在概念上，字符串将始终“逐个字符”地复制。现在，当涉及到复制扩展内存区域时，编译器可以通过执行逐字（而不是逐字节）复制来优化复制过程。类似的优化可以在处理器微架构级别实现。

但无论如何，在一般情况下，复制是作为一个*迭代*过程来实现的，而不是作为对“整个字符串”的一些原子操作。

最重要的是，一个聪明的编译器可能会意识到在某些情况下复制根本没有必要。例如，如果您的代码不修改`array`对象并且不依赖于其地址标识，编译器可能会简单地决定直接使用原始字符串文字，而不进行任何复制（即基本上悄悄地替换您的`char array[] = "string"`with `const char *array = "string"`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:55:43.333

这取决于编译器和目标架构。

可能有非常简单的目标架构，例如微控制器，它们没有支持复制内存块的指令。可能存在为教学设计的非常简单的编译器，即使在支持更有效方法的体系结构上也可以生成逐字节复制。

但是，您可以假设在这种情况下，生产级编译器会为最流行的体系结构做合理的事情并生成可能最快的代码，而您真的不需要担心。

不过，最好的检查方法是阅读编译器生成的程序集。

拿这个测试代码（stack_array_init.c）：

```
#include <stdio.h>

int
main()
{
    char a[]="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed\n"
             "do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n";

    printf("%s", a);

    return 0;
} 
```

并使用 gcc 将其编译为程序集，并优化大小（以减少阅读量），如下所示：

```
gcc -Os -S stack_array_init.c 
```

这是 x86-64 的输出：

```
 .file   "stack_array_init.c"
        .section        .rodata.str1.1,"aMS",@progbits,1
.LC1:
        .string "%s"
.LC0:
        .string "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed\ndo eiusmod tempor incididunt ut labore et dolore magna aliqua.\n"
        .section        .text.startup,"ax",@progbits
        .globl  main
        .type   main, @function
main:
.LFB0:
        .cfi_startproc
        subq    $136, %rsp
        .cfi_def_cfa_offset 144
        movl    $.LC0, %esi
        movl    $126, %ecx
        leaq    2(%rsp), %rdi
        xorl    %eax, %eax
        rep movsb
        leaq    2(%rsp), %rsi
        movl    $.LC1, %edi
        call    printf
        xorl    %eax, %eax
        addq    $136, %rsp
        .cfi_def_cfa_offset 8
        ret
        .cfi_endproc
.LFE0:
        .size   main, .-main
        .ident  "GCC: (Debian 4.7.2-5) 4.7.2"
        .section        .note.GNU-stack,"",@progbits 
```

这里，“rep movsb”是将字符串复制到堆栈的指令。

这是 ARMv4 程序集的摘录（可能更容易阅读）：

```
main:
    @ Function supports interworking.
    @ args = 0, pretend = 0, frame = 128
    @ frame_needed = 0, uses_anonymous_args = 0
    str lr, [sp, #-4]!
    sub sp, sp, #132
    mov r2, #126
    ldr r1, .L2
    mov r0, sp
    bl  memcpy
    mov r1, sp
    ldr r0, .L2+4
    bl  printf
    mov r0, #0
    add sp, sp, #132
    ldr lr, [sp], #4
    bx  lr
.L3:
    .align  2
.L2:
    .word   .LC0
    .word   .LC1
    .size   main, .-main
    .section    .rodata.str1.4,"aMS",%progbits,1
    .align  2
.LC1:
    .ascii  "%s\000"
    .space  1
.LC0:
    .ascii  "Lorem ipsum dolor sit amet, consectetur adipisicing"
    .ascii  " elit, sed\012do eiusmod tempor incididunt ut labor"
    .ascii  "e et dolore magna aliqua.\012\000"
    .ident  "GCC: (Debian 4.6.3-14) 4.6.3"
    .section    .note.GNU-stack,"",%progbits 
```

根据我对 ARM 程序集的理解，这看起来像是代码调用 memcpy 将字符串复制到堆栈数组中。虽然这没有显示 memcpy 的程序集，但我希望它使用最快的可用方法之一。

# centos - 使用 puppet 将排除添加到现有的 yum 存储库配置

> ID：16153341
> 
> 赞同：4
> 
> 时间：2013-04-22T17:41:35.470
> 
> 标签：centos, puppet, yum

我正在使用 puppet 来管理配置一堆 CentOS 5 服务器。我想在 CentOS 基础 yum 存储库配置中添加一些软件包排除项。有没有办法用木偶做到这一点？

我将使用一些软件包的 remi repo 版本，并希望从 yum 中排除基本版本。为了启用 remi，我`yumrepo`定义了一个资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:05:09.880

您可以使用`exclude`参数`yumrepo`

```
yumrepo { 'centos_base' :
    baseurl => "...",
    enabled => 1,
    priority => 1,
    exclude => "package-name",
} 
```

`yumrepo`您还可以在安装软件包时要求特定的。

```
package { "package-name" :
  ensure => installed,
  require => Yumrepo["RemiRepo"],
} 
```

# email - 不使用 SMTP 发送电子邮件

> ID：16153350
> 
> 赞同：0
> 
> 时间：2013-04-22T17:42:00.767
> 
> 标签：email, iis, outlook, smtp

我想在不使用 SMTP 服务器的情况下发送电子邮件。我曾尝试使用 CDO.Message 发送电子邮件。它在 IIS5.0 中运行良好，但在 IIS6.0 中无法运行。有没有办法将电子邮件保存到 Outlook 将用于通过其自己的进程或其他选项而不是使用 SMTP 服务器发送的拾取目录？我们的防火墙相当积极地阻止端口 25，除非它直接来自 Outlook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:45:50.293

如果您希望 Outlook 发送您的消息，您需要为此使用 Outlook 对象模型。

# linq-to-entities - Linq to Entities Expression Tree - 将字符串值作为整数进行比较

> ID：16153351
> 
> 赞同：0
> 
> 时间：2013-04-22T17:42:02.980
> 
> 标签：linq-to-entities, compare, expression-trees, varchar

如何构建一个 SQL Server 兼容的表达式树，它可以比较一个字符串，就好像它是一个整数一样？

我的表包含电话号码（例如“01234000000”），我希望动态创建的查询返回一系列电话号码。

我想要的 SQL 是这样的：

```
SELECT PhoneNumber 
FROM MyTable 
WHERE PhoneNumber BETWEEN '01234000000' AND '01234000099' 
```

即使 PhoneNumber 是一个 VARCHAR ，它也是完全有效的 SQL 并返回您期望的结果。

我已经尝试了几件事（为清楚起见省略了上限）：

```
Expression.GreaterThanOrEqual(prop, "01234000000") // doesn't work on strings

Expression.GreaterThanOrEqual(
    Expression.Convert(prop, typeof(Int64)), 
    Expression.Constant(1234000000, typeof(Int64))) // not supported by the SQL Query Provider 
```

有没有其他方法可以实现这一目标？如果没有，那么是否可以扩展查询提供程序以将其添加到我自己中，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:21:26.183

据我所知，SQL 并不是真正进行数字比较，而是进行 alpha 比较。但是，由于您使用的是长度相同的电话号码，因此这种差异应该无关紧要。

您可以在 EF 中执行以下操作：

```
var lowerBound = "01234000000";
var upperBound = "01234000099";
var results = MyTable
    .Where(t => t.PhoneNumber.CompareTo(lowerBound) >= 0 && t.PhoneNumber.CompareTo(upperBound) <= 0); 
```

根据 LinqPad，生成以下 SQL：

```
DECLARE @p0 VarChar(1000) = '01234000000'
DECLARE @p1 VarChar(1000) = '01234000099'

SELECT [t0].[PhoneNumber]
FROM [MyTable] AS [t0]
WHERE ([t0].[PhoneNumber] >= @p0) AND ([t0].[PhoneNumber] <= @p1) 
```

> ID：16153363
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153364
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# php - 从引导模式获取输入

> ID：16153365
> 
> 赞同：0
> 
> 时间：2013-04-22T17:42:40.127
> 
> 标签：php, javascript, twitter-bootstrap

我正在使用 Twitter Bootstrap 的模态控件来创建一个弹出表单，用户可以在其中输入一些输入。

如何从表格中获取信息？过去，当我只是在页面上使用表单时，我使用了 post 变量来获取用户输入——但这适用于这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:47:43.450

使用 AJAX，这样您就可以提交表单，获得响应，然后决定是否关闭模式窗口。

> ID：16153366
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153367
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153368
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153369
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153370
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153371
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153372
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153373
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153374
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153375
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153376
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153377
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153378
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153379
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153380
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153381
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153382
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153383
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153384
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153385
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153386
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153387
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153388
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153389
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153390
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153391
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153392
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153393
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153394
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153395
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153396
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153397
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153399
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153400
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153401
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153402
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153406
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153407
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153408
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153409
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

> ID：16153410
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# search - 附件类型数组 - 如何获取突出显示片段的文件名？

> ID：16153412
> 
> 赞同：0
> 
> 时间：2013-04-22T17:45:02.123
> 
> 标签：search, elasticsearch, attachment, highlight, highlighting

我使用 ElasticSearch 来索引资源。我为每个索引资源创建文档。每个资源都可以包含元数据和二进制文件数组。我决定处理这些带有[附件](http://www.elasticsearch.org/guide/reference/mapping/attachment-type/)类型的二进制文件。元数据映射到字符串类型的简单字段。二进制文件映射到[附件](http://www.elasticsearch.org/guide/reference/mapping/attachment-type/)类型的数组字段（名为的字段`attachments`）。一切正常 - 我可以根据二进制文件的内容找到我的资源。

我使用的另一个 ElasticSearch 功能是突出显示。我设法成功地为元数据和二进制文件配置了突出显示，但是......

当我询问我的`attachments`字段的突出显示片段时，我只会得到这些文件的片段，而没有关于片段来源的任何信息（附件数组字段中有很多文件）。我需要突出显示的片段和附件数组元素之间的映射 - 例如文件名或至少数组中的索引。

我得到什么：

`"attachments" => ["Fragment <em>number</em> one", "Fragment <em>number</em> two"]`

我需要的：

`"attachments" => [("file_one.pdf", "Fragment <em>number</em> one"), ("file_two.pdf", "Fragment <em>number</em> two")]`

如果没有这样的映射，应用程序的用户知道特定资源包含带有关键字的文件，但没有关于文件名的指示。

是否有可能使用 ElasticSearch 实现我所需要的？如何？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:22:29.643

所以你在这里想要的是存储文件名。您是否在 json 文档中发送了文件名？就像是：

```
{
    "my_attachment" : {
        "_content_type" : "application/pdf",
        "_name" : "resource/name/of/my.pdf",
        "content" : "... base64 encoded attachment ..."
    }
} 
```

如果是这样，您可能可以要求 field `my_attachment._name`。

如果这不是正确的答案，您能否稍微提炼一下您的问题并提供一个 JSON 示例文档（没有 base64 内容）和您的映射（如果有）？

更新：

当它来自一系列附件时，您无法从每个文件中获取它，因为一切都在幕后展开。如果你真的需要，你可能想看看嵌套字段。

# mysql - Rails 范围问题

> ID：16153413
> 
> 赞同：0
> 
> 时间：2013-04-22T17:45:07.017
> 
> 标签：mysql, ruby-on-rails, scopes

我正在尝试为模型添加范围。我正在寻找从分贝计算总播放量。我在 Rails 3.2.13 上

MYSQL 查询提供了预期的结果。

```
SELECT COUNT(DISTINCT(CONCAT(stats.filename,stats.viewer_id)))
FROM `stats` 
WHERE `stats`.`user_id` = 4 
AND (stats.cf_status in ('Hit', 'Miss', 'RefreshHit', 'Error')) 
AND (date_time between '2013-04-14 05:00:00' and '2013-04-21 16:35:16') 
```

= 169 次播放

我试图让这个范围工作，但是当我检查日志时 Rails 忽略了它。

**统计模型**

```
scope :only_valid, -> {
where("stats.cf_status in ('Hit', 'Miss', 'RefreshHit', 'Error')")
}
scope :totviews, -> {
where(" COUNT(DISTINCT(CONCAT(stats.filename,stats.viewer_id)))")
} 
```

**仪表板控制器** total_views：Stat.for_user(current_user).only_valid.between(@start_at,@end_at).totviews.count,

**日志的输出** 仍然显示原始查询而不是修改后的查询。

```
SELECT COUNT(*) 
FROM `stats` 
WHERE `stats`.`user_id` = 4 
AND (stats.cf_status in ('Hit', 'Miss', 'RefreshHit', 'Error')) 
AND (date_time between '2013-04-14 05:00:00' and '2013-04-21 17:17:29') 
```

= 4589 次播放

任何帮助表示赞赏。谢谢

```
expose(:overview_chart_views) {
{
total_views:    to_col(Stat.for_user(current_user).only_valid.between(@start_at, @end_at).by_day),
total_viewers:  to_col(Stat.unique_plays.for_user(current_user).only_valid.between(@start_at, @end_at).by_day),
new_viewers:    to_col(Viewer.for_user(current_user).with_first_views.only_valid.between(@start_at, @end_at).by_day),
return_viewers: to_col(Viewer.for_user(current_user).without_first_views.only_valid.between(@start_at, @end_at).by_day)
}

private

def to_col(results)
lookup = {}
results.each {|row|
if !row['date'].kind_of?(Date)
row['date'] = Date.parse(row['date']);
end
lookup[row['date']] = row['result'].to_i }
(@start_at.to_date..@end_at.to_date).to_a.map {|date| lookup[date] || 0}
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:26:20.937

`totviews`范围无效，因为您正在使用函数过滤元素`count`。

尝试删除它并将查询更改为：

```
class Stat < ActiveRecord::Base
  def self.total_views
    Stat.for_user(current_user).only_valid.between(@start_at,@end_at).count('DISTINCT(CONCAT(stats.filename,stats.viewer_id))')
  end
end 
```

# javascript - 如何获取xml所有子节点值？

> ID：16153414
> 
> 赞同：1
> 
> 时间：2013-04-22T17:45:06.877
> 
> 标签：javascript, jquery, html, xml, xml-parsing

我有一个 xml，其中 xml 包含文件夹和图像详细信息。我使用 jquery 加载 xml，我得到了文件夹详细信息，但是现在我得到的图像路径不正确

**图片/ftest1.png,images/fstest1.png,images/fsstest1.png,images/stest1.png,images/sstest1.png**

如何得到所有？

**我的代码**

```
 <script>
    $(document).ready(function(){
      $("#dvContent").append("<ul></ul>");
      $.ajax({
        type: "GET",
        url: "books.xml",
        dataType: "xml",
        success: function(xml){
        $(xml).find("FolderName").each(function(index, element){ 
        var levels = $(this).parents("OrgFolderDetails").size();
        var text = $(this).attr('name');
        var text1 = $(this).text();
        var html = "";
        //alert($(this).find("child[value='"+text+"']"));
        //alert($(this).children().size())
        var level_child=$(this).children().size();
        for(var j=0; j < level_child; j++){
            alert($(this).children().attr('path'));
        }
        for(var j=0; j < levels; j++){
            html += "-";  

        }

        html += "<li> "+text+"</li>"; //add in that space after the dashes, and the <br>

        $("#browser").append(html);
    });
      },
      error: function() {
        alert("An error occurred while processing XML file.");
      }
      });
    }); 
```

**xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <OrgFolderDetails>
      <FolderName name="Main Folder"></FolderName>
      <TheChildren>
      <OrgFolderDetails>
        <FolderName name="First Sub Folder">
          <source path="images/ftest1.png"></source>
          <source path="images/ftest2.png"></source>
          <source path="images/ftest3.png"></source>
          <source path="images/ftest4.png"></source>
          <source path="images/ftest5.png"></source>
        </FolderName>
        <TheChildren>
        <OrgFolderDetails>
          <FolderName name="First Sub Siub Sub Folder">
            <source path="images/fstest1.png"></source>
            <source path="images/fstest2.png"></source>
            <source path="images/fstest3.png"></source>
            <source path="images/fstest4.png"></source>
            <source path="images/fstest5.png"></source>
          </FolderName>
          <TheChildren>
          <OrgFolderDetails>
            <FolderName name="First Sub Siub Sub Folder">
              <source path="images/fsstest1.png"></source>
              <source path="images/fsstest2.png"></source>
              <source path="images/fsstest3.png"></source>
              <source path="images/fsstest4.png"></source>
              <source path="images/fsstest5.png"></source>
            </FolderName>
            <TheChildren>
            <OrgFolderDetails>
              <FolderName name="First Sub Sub Sub Sub Folder"></FolderName>
              <TheChildren/>
            </OrgFolderDetails>
            </TheChildren>
          </OrgFolderDetails>
          </TheChildren>
        </OrgFolderDetails>
        </TheChildren>
      </OrgFolderDetails>
      <OrgFolderDetails>
        <FolderName name="Second Sub Folder">
          <source path="images/stest1.png"></source>
          <source path="images/stest2.png"></source>
          <source path="images/stest3.png"></source>
          <source path="images/stest4.png"></source>
          <source path="images/stest5.png"></source>
        </FolderName>
        <TheChildren>
        <OrgFolderDetails>
          <FolderName name="Second Sub Sub Folder">
            <source path="images/sstest1.png"></source>
            <source path="images/sstest2.png"></source>
            <source path="images/sstest3.png"></source>
            <source path="images/sstest4.png"></source>
            <source path="images/sstest5.png"></source>
          </FolderName>
          <TheChildren/>
        </OrgFolderDetails>
        </TheChildren>
      </OrgFolderDetails>
      </TheChildren>
    </OrgFolderDetails> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:21:44.873

如果您在该 xml 文件上运行此 XPath 表达式 ~//source[@path]~，那么您将获得包含路径属性的所有源元素的列表。然后您可以从结果中获取所有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:08:59.450

显然，您需要一个 XML 解析器。您可以使用 jquery、js 中的任何内容，或者说一些 perl cgi 脚本来完成这项工作。看看[这个问题](https://stackoverflow.com/questions/11049059/how-to-read-all-the-child-elements-of-an-element-using-jquery)，我认为它最好地回答了你的问题（很好地回答了）也许[这个问题](https://stackoverflow.com/questions/8417980/parse-nested-xml-with-jquery-children-elements)和[这个](https://stackoverflow.com/questions/8417980/parse-nested-xml-with-jquery-children-elements)问题也可能对你有所帮助。

# excel - 使用 excel 使工作表过期

> ID：16153429
> 
> 赞同：0
> 
> 时间：2013-04-22T17:45:51.563
> 
> 标签：excel

我有一个 Excel 工作表，我需要设置一个到期日期，以便在到期日期发生时文件变得无用，他们必须与我联系以获取文件的新版本。

我编写了一个脚本，如果未启用宏并且工作表读取必须启用宏才能继续，则强制显示第一个工作表并隐藏第二个工作表（包含日期）。一旦他们启用了宏，第二张表就会变得可见，他们可以利用这些数据。启用宏后，脚本将运行到期日期命令，如果当前日期超过到期日期，则会显示一个消息窗口，提醒用户他们的文件已过期。问题是，关闭此消息窗口后，excel 会提示用户保存、不保存或取消。如果用户选择取消，则出现的下一个消息框是到期日期窗口，到期日期报告他们还有负天数。然后他们可以关闭该窗口并访问计算器。

我已经涉足了下面的“ActiveWorkbook.Save = True”功能，但没有使用。

`Private Sub Workbook_BeforeClose(Cancel As Boolean) ActiveWorkbook.Saved = True End Sub`

它禁用了需要用户启用宏的我的工作表，这是不行的，基本上使文件无用。

我附上了VBA脚本，希望你们能帮忙。

非常感谢！

这是代码：

```
Private Const dsWarningSheet As String = "sheet1" 'Enter name of the Entry/Warning Page 
```

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

```
For Each ds In ActiveWorkbook.Sheets
If LCase(dsWarningSheet) = LCase(ds.Name) Then
ds.Visible = True
End If
Next 
```

结束子

私有子 Workbook_Open()

```
Dim myCount        'This line of code is optional
Dim i                     'This line of code is optional
Dim Edate As Date
On Error Resume Next

myCount = Application.Sheets.Count
For i = 2 To myCount
Sheets(i).Visible = True
If i = myCount Then
Sheets(1).Visible = xlVeryHidden
End If
Next i

Edate = Format("13/01/2012", "DD/MM/YYYY") ' Replace this with the date you want
If Date > Edate Then
MsgBox ("This worksheet was valid upto " & Format(Edate, "dd-mmm-yyyy") & " and will be closed: Please contact John Smith at Company ABC to purchase a new version of this calculator")
ActiveWorkbook.Close
End If
If Edate - Date < 30 Then
MsgBox ("This worksheet expires on " & Format(Edate, "dd-mmm-yyyy") & " You have " & Edate - Date & " Days left")
End If 
```

结束子

Private Sub Workbook_BeforeClose（取消为布尔值）

```
Dim myCount        'This line of code is optional
Dim i                     'This line of code is optional
On Error Resume Next
myCount = Application.Sheets.Count
Sheets(1).Visible = True
Range("A1").Select
For i = 2 To myCount
Sheets(i).Visible = xlVeryHidden
If i = myCount Then
End If
Next i
ActiveWorkbook.Save 
```

结束子

私有子工作簿_Openxx()

```
Dim myCount        'This line of code is optional
Dim i                     'This line of code is optional
On Error Resume Next

myCount = Application.Sheets.Count
For i = 2 To myCount
Sheets(i).Visible = True
If i = myCount Then
Sheets(1).Visible = xlVeryHidden
End If
Next i 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:22:04.910

关闭工作簿并告诉它不要保存。见下文

```
Dim wb as workbook
set wb = <yourworkbook>

wb.Close SaveChanges:=Excel.XlSaveAction.xlDoNotSaveChanges 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-29T09:51:50.890

这是我在此的头一篇博文。我为这个问题创建了一个解决方案，我想与你分享。

如果您想为 Excel 工作簿、加载项等设置到期日期，您可以使用下面的代码，该代码将给用户一条消息，然后在这种情况下删除、关闭和卸载加载项。

您只需将其添加到文件的 Workbook_Open 事件中，然后在项目的 VBA 代码上输入密码。

当到期日期发生并且用户打开文件时，它将被完全删除。

```
Private Sub Workbook_Open()

Dim exdate As Date
Dim i As Integer

anul = 2015   ' (year) change these according to your expiration date
luna = 11     '(month)
ziua = 1      '(day)     

exdate = DateSerial(anul, luna, ziua)

If Date > exdate Then
    MsgBox ("The application " & ThisWorkbook.Name & " has expired !" & vbNewLine & vbNewLine _
    & "Expiration set up date is: " & exdate & " :)" & vbNewLine & vbNewLine _
    & "Contact xxx person(you) to renew the version !"), vbCritical, ThisWorkbook.Name

    expired_file = ThisWorkbook.Path & "\" & ThisWorkbook.Name

   On Error GoTo ErrorHandler
With Workbooks(ThisWorkbook.Name)
    If .Path <> "" Then

        .Saved = True
        .ChangeFileAccess xlReadOnly

        Kill expired_file

        'get the name of the addin if it is addin and unistall addin
        If Application.Version >= 12 Then
         i = 5
        Else: i = 4
        End If

        If Right(ThisWorkbook.Name, i) = ".xlam" Or Right(ThisWorkbook.Name, i) = ".xla" Then
            wbName = Left(ThisWorkbook.Name, Len(ThisWorkbook.Name) - i)
             'uninstall addin if it is installed
             If AddIns(wbName).Installed = True Then
                AddIns(wbName).Installed = False
              End If
        End If

        .Close

    End If
End With

Exit Sub

End If

Exit Sub

ErrorHandler:
MsgBox "Fail to delete file.. "
Exit Sub

End Sub 
```

现在，我的问题是，如何编写代码来检查用户使用文件的计算机或他离开公司的日期？

我想要某种代码，不允许用户在其他电脑上使用文件，而不是工作中的文件。（为了在他们离开公司时不带走excel工具）。

# c# - 似乎无法修复 C# 中对象的 null 情况（对象引用未设置为对象的实例。）

> ID：16153431
> 
> 赞同：0
> 
> 时间：2013-04-22T17:45:59.163
> 
> 标签：c#, object, datatable, null, instance

我的 DataTable 对象似乎为空，但我不明白为什么。我正在尝试向它添加三个变量，但它仍然说它是空的。这是我的代码：

```
 DataTable dt;

    DataSet ds = new DataSet();

    private void InitDataTable()
    {

        if (!File.Exists("gjesteInfo.xml"))
        {
            dt = new DataTable("Gjester");

            ds.ReadXml("gjesteInfo.xml");
            ds.Tables.Add(dt);

            DataColumn dc1 = new DataColumn("Fullt navn");
            DataColumn dc2 = new DataColumn("Start dato");
            DataColumn dc3 = new DataColumn("Antall dager");

            dt.Columns.Add(dc1);
            dt.Columns.Add(dc2);
            dt.Columns.Add(dc3);

            dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
            ds.Merge(dt);

            ds.WriteXml("gjesteInfo.xml");  
        }

        else
        {

            dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
            ds.Merge(dt); <- This is where I want to add information to the dataTable, and this is where the error shows up.

            ds.WriteXml("gjesteInfo.xml");
        }

    } 
```

关于如何避免著名的“对象引用未设置为对象的实例”错误的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:49:31.633

在 if 语句的 else 部分中，DataTable 未初始化
但主要问题是，如果文件不存在，则无法尝试读取它.....

```
if(!File.Exists("gjesteInfo.xml"))
{
     // The file doesn't exist, create the table to receive initial data here
     dt = new DataTable("Gjester");
     DataColumn dc1 = new DataColumn("Fullt navn");
     DataColumn dc2 = new DataColumn("Start dato");
     DataColumn dc3 = new DataColumn("Antall dager");
     dt.Columns.Add(dc1);
     dt.Columns.Add(dc2);
     dt.Columns.Add(dc3);
     dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
     ds.Tables.Add(dt);
}
else
{
    // The file exist, read the data and use the first table in the dataset to add new info
    ds.ReadXml("gjesteInfo.xml");
    dt = ds.Tables[0];
    dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
}
ds.Merge(dt);
ds.WriteXml("gjesteInfo.xml"); 
```

**编辑**在下面看到您的评论，您的文本框似乎包含以前输入的所有数据。如果是这种情况，则需要从头开始重写 xml 文件

```
if(File.Exists("gjesteInfo.xml"))
   File.Delete("gjesteInfo.xml")

dt = new DataTable("Gjester");
DataColumn dc1 = new DataColumn("Fullt navn");
DataColumn dc2 = new DataColumn("Start dato");
DataColumn dc3 = new DataColumn("Antall dager");
dt.Columns.Add(dc1);
dt.Columns.Add(dc2);
dt.Columns.Add(dc3);
dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
ds.Tables.Add(dt);
ds.Merge(dt);
ds.WriteXml("gjesteInfo.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:50:19.437

如果您遇到该`else`部分 - 您**从未**创建过数据表`dt`对象！你只能在`if`块内实例化它......你需要在语句**之前**`dt = new DataTable()`进行调用，以便它对两种情况都有效......**`if`**

 **```
DataTable dt;
DataSet ds = new DataSet();

private void InitDataTable()
{
    dt = new DataTable("Gjester");  <<=== this **BEFORE** the if!

    if (!File.Exists("gjesteInfo.xml"))
    {
       ....... 
    }
    else
    {
       // now, in this case, "dt" has been created, and **NOW** you can operate on it!
       dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
       ds.Merge(dt); 
       ds.WriteXml("gjesteInfo.xml");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:51:59.787

它应该是：

```
 else
    {
        dt = new DataTable("Gjester");
        dt.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);
        ds.Merge(dt);
        ds.WriteXml("gjesteInfo.xml");
    } 
```**

# forms - 没有表单标签的 Paypal 按钮

> ID：16153433
> 
> 赞同：1
> 
> 时间：2013-04-22T17:46:01.707
> 
> 标签：forms

Paypal 提供的捐赠按钮的 html 会强制页面上出现过多的空白。是否可以在没有表单标签的情况下链接回 Paypal？我有 Paypal 按钮图形，如果它不是表单元素，我可以将其锚定到 html 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:15:40.830

没有表格也可以做到；我前一段时间这样做了。我不记得具体是如何做到的，但我可以给你这个例子，如果你发布你的 HTML，我可以帮你把它变成一个链接： [https ://www.paypal.com/cgi-bin/ webscr?cmd=_xclick&business=ben%40happyspork%2ecom&item_name=Sporktris%20Support&item_number=1&no_shipping=0&no_note=1&tax=0¤cy_code=CAD&lc=CA&bn=PP%2dDonationsBF&charset=UTF%2d8](https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=ben%40happyspork%2ecom&item_name=Sporktris%20Support&item_number=1&no_shipping=0&no_note=1&tax=0&currency_code=CAD&lc=CA&bn=PP%2dDonationsBF&charset=UTF%2d8)

您甚至可以只修改该链接以使用您的数据而不是我的数据。

# php - php邮件功能仅不向gmail帐户发送电子邮件

> ID：16153435
> 
> 赞同：2
> 
> 时间：2013-04-22T17:46:17.320
> 
> 标签：php, email

我在我的 php 脚本中遇到了一个奇怪的问题。我已经制作了一个发送电子邮件并在我的 php 页面中调用该函数的功能。当我向雅虎或任何其他域发送邮件时，该功能工作正常，但在向 gmail 帐户发送邮件时失败。下面是我的代码

```
function send_mail($p_to , $p_sub, $p_body)

{

$from = 'xxx@mydomain.com';
$to = $p_to; 
$email_subject = $p_sub;
$email_body = $p_body;

$xheaders = "";
$xheaders .= "From: <$from>\n";
$xheaders .= "X-Sender: <$from>\n";
$xheaders .= "X-Mailer: PHP\n"; // mailer
$xheaders .= "X-Priority: 1\n"; //1 Urgent Message, 3 Normal
$xheaders .= "Content-Type:text/html; charset=\"iso-8859-1\"\n";

mail($to,$email_subject,$email_body,$xheaders);

} 
```

// 当我直接向 gmail 帐户发送邮件时，例如，如果通过为所有字段 ($p_to,$p_subject,$p_body) 获取硬编码值并使用上述代码创建一个新页面并发送邮件，那么它就可以工作。

它早些时候工作正常并向gmail帐户发送邮件，但不知何故停止为gmail工作。我也检查了垃圾邮件桶，但什么也没找到。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:13:43.380

谷歌将所有未验证的域标记为黑名单，因此您的电子邮件将直接移至 gmail 用户的垃圾邮件箱。我认为您唯一能做的就是向 google 的客户服务发送邮件，询问他们是否可以验证您的域是否安全，但前提是您发现 gmail 用户将其放入收件箱而不是他们的收件箱非常重要垃圾邮件箱。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-10T05:13:07.767

问题已解决。需要服务器端修改。

感谢您的回复伙计们:)

# c# - 我们如何将 DBF 相关代码迁移到 C#.NET？

> ID：16153439
> 
> 赞同：1
> 
> 时间：2013-04-22T17:46:31.387
> 
> 标签：c#, foxpro, visual-foxpro

我在 Visual foxpro 中有一个与 dbf 操作相关的代码，如下所示。

```
SELECT 3
USE student shared

SET FILTER TO

LOCATE FOR id=thisform.txtStudentID.Value 
```

任何人都可以帮助我理解每一行代码并转换为 C#.net。将 foxpro 代码转换为 C# 需要采取哪些步骤？在这里，我在 C# Project 中使用 SQL Server 作为后端。有时我也遇到过以下类型的代码

```
Use Student Shared 
```

// 这里直接访问数据库字段。这里他们的目标是获取所有记录，如“select * from student”或仅最后一条记录。默认情况下，这个学生表有 6 列，但在 dbf 文件中我们有 12 列。如何在 C#.NET 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:59:06.343

要回答您的部分问题-此代码有什么作用...

下面设置一个工作区（我已经几年没做过foxpro了，但是觉得这在VFP的后期版本中是多余的）。工作区只是内存中的一个空间，与其他工作空间分开。

```
Select 3 
```

下面打开一个名为“Student”的表，用于对先前打开的工作区进行非只读访问

```
USE student shared 
```

以下将清除表上的所有过滤器（因此，如果您“浏览”，您将获得所有记录）

```
SET FILTER TO 
```

下面将记录指针设置为特定记录，其中 id 的记录等于当前表单上的 txtStudentID 文本框值（foxpro 不是强类型语言）

```
LOCATE FOR id=thisform.txtStudentID.Value 
```

对于您问题的第二部分，没有直接的方法可以在 foxpro 和 ac# 应用程序之间进行转换。要点是 Foxpro 是围绕数据库构建的，不是强类型的，而 c# 是强类型的，可以访问数据库。如果你做一个快速的谷歌搜索，你可能会找到像 Markus Egger 这样的人编写的工具，用于从 foxpro 转换为 c#。

恕我直言，根据将企业级系统从 VFP 迁移到 C#/SQL 服务器的经验——如果你想用系统做这个——停下来，说服自己这是一个坏主意，然后用 C# 重新编写东西——选择数据库最适合您的需求。

很难进一步评论 - 你还没有说明你使用的是什么版本的 foxpro - 你使用的是 foxpro 还是视觉 foxpro？你的应用程序有多大，背景是什么？

HTH 周杰伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:59:04.203

There is no way to directly convert that to C#.

```
SELECT 3 
```

FoxPro has the concept of 'work areas' - like slots, each of which can have an opened DBF file in it. This command says "OK - we're looking at work area 3."

This has no equivalent in .NET

```
USE student SHARED 
```

This will open student.dbf, in the current directory, for shared access in work area 3.

```
SET FILTER TO 
```

If we have a filter set, which will limit what records are available, clear that filter now. Pointless, as we've just opened the table and we didn't set a filter.

```
LOCATE FOR id=thisform.txtStudentID.Value 
```

Find the first record where id = thisform.txtStudentID.Value. The latter part is a custom property of the form that is running this code.

So all this code is doing is locating a record in student.dbf based on a value. If you wanted to pull that record back in C# using the OLE DB provider you could check [How to load DBF data into a DataTable.](http://www.codeproject.com/Articles/24247/Load-a-DBF-into-a-DataTable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:25:48.343

`SET FILTER TO`不需要，因为正在使用（打开）表，因此没有要清除的过滤器。要将 FoxPro 的这一位转换为 C#：

`SELECT * FROM student WHERE id=thisform.txtStudentID.Value`

然后，您必须循环结果（如果有）。最佳实践是使用`WHERE`子句值的参数来防止 SQL 注入。

# actionscript-3 - 紧凑的 if/else 语句 [AS3]

> ID：16153442
> 
> 赞同：0
> 
> 时间：2013-04-22T17:46:41.090
> 
> 标签：actionscript-3, syntax

非常简单的问题，我只是想知道是否有办法用更少的字符编写 if/else 语句，例如，我可以使用以下任一方法创建一个 if 语句：

```
if (season == "autumn") {
  tree.gotoAndStop ("brown leaves");
} 
```

或者：

```
if (season == "autumn") tree.gotoAndStop ("brown leaves"); 
```

这使用更少的空间，使我的代码看起来更漂亮。使用 if/else 语句，我的选择似乎是：

```
if (season == "autumn" || season == "winter") {
  tree.gotoAndStop ("brown leaves");
} else {
  tree.gotoAndStop ("green leaves");
} 
```

或者：

```
gotoAndStop((season == "autumn" || season == "winter")
            ? "brown leaves" : "green leaves"); 
```

尽管第二种方法并不总是理想的。你知道任何替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:19:12.883

就以简洁的方式编写代码而言，您可以使用以下所有技术来手动缩小代码，[***但这是一个糟糕的设计决策，将来可能会导致头痛和/或身体伤害***](http://www.codinghorror.com/blog/2008/06/coding-for-violent-psychopaths.html)。别说我没警告过你。

[如果别的：]

```
if (foo) {
    bar();
} else {
    baz();
} 
```

[变成：]

```
foo?bar():baz() 
```

[如果：]

```
if (foo) {
    bar();
} 
```

[变成：]

```
foo&&bar(); 
```

[如果不：]

```
if (!foo) {
    bar();
} 
```

[变成：]

```
foo||bar(); 
```

[如果有多个语句：]

```
if (foo) {
    bar();
    baz();
    fizz();
    buzz();
} 
```

[变成：]

```
foo&&(bar(),baz(),fizz(),buzz()); 
```

# ajax - .htacces 重定向用于 AJAX 搜索引擎索引

> ID：16153443
> 
> 赞同：1
> 
> 时间：2013-04-22T17:46:47.897
> 
> 标签：ajax, .htaccess, indexing, search-engine, url-parameters

好的，所以我创建了一个纯 html/javascript AJAX 网站，但我希望我的页面可以被 Google 索引。我的内容文件包含纯 html 中的元信息，但没有菜单栏等，并且我的 index.htm 包含所有菜单栏、javascript AJAX 内容等。为了使 AJAX 可被 google 索引，我的 URL 应该看起来像“<something >#!<somthingelse>”，Google indexbot 将更改为“<something>?_escaped_fragment_=<somethingelse>”，这样我的服务器就知道它应该直接返回内容，而不是通过 AJAX 加载它的页面。但是，由于我的服务器很愚蠢，因为它不使用服务器端处理，所以我需要通过 htaccess 执行一个技巧（这是我失败的地方:(）

想法如下：我有我喜欢的 URL [http://mysite.com/page1#!1](http://mysite.com/page1#!1)、[http://mysite.com/page2#!1](http://mysite.com/page2#!1)等。通常，htaccess 应该将其重写为 /index.htm ?page=page1 以便我的 AJAX 读取 URL 参数并自动加载 page1.htm 内容文件。对于谷歌索引器，它应该忽略任何包含“？_escaped_fragment_=1”的url的重写，这样url直接指向内容页面这样我必须做出一个小的妥协，把#！1放在每个花哨的URL中，但是作为据我所知，这是在没有服务器端处理的情况下执行此操作的唯一方法（当然 htaccess 除外）

我似乎无法获得重写规则来做到这一点。到目前为止，这是我想出的：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} (^|.*&)_escaped_fragment_=1(&.*|$)
RewriteRule ^(.*)$ %1 [L,R=301]
RewriteRule ^(.*)$ /index.htm?page=%1 [L,R=301] 
```

# bash - Bash 的最后一个索引

> ID：16153446
> 
> 赞同：14
> 
> 时间：2013-04-22T17:46:56.770
> 
> 标签：bash, shell, pattern-matching

对不起，蹩脚的 bash 问题，但我似乎无法解决这个问题。

我有以下简单案例：

*   我有变量`artifact-1.2.3.zip`

*   我想在连字符和点的最后一个索引之间获得一个子字符串（都是独占的）。

我的bash技能不是太强。我有以下内容：

```
a="artifact-1.2.3.zip"; b="-"; echo ${a:$(( $(expr index "$a" "$b" + 1) - $(expr length "$b") ))} 
```

生产：

```
1.2.3.zip 
```

我如何也删除该`.zip`部分？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-22T18:21:31.343

**标题为“变量替换**”的`bash`手册页部分描述了如何使用、、和。**`${var#pattern}``${var##pattern}``${var%pattern}``${var%%pattern}`**

 **假设您有一个名为 的变量`filename`，例如，

```
filename="artifact-1.2.3.zip" 
```

然后，以下是基于模式的提取：

```
% echo "${filename%-*}"
artifact

% echo "${filename##*-}"
1.2.3.zip 
```

为什么我使用`##`而不是`#`？

如果文件名可能包含破折号，例如：

```
filename="multiple-part-name-1.2.3.zip" 
```

然后比较以下两个替换：

```
% echo "${filename#*-}"
part-name-1.2.3.zip

% echo "${filename##*-}"
1.2.3.zip 
```

提取版本和扩展后，要隔离版本，请使用：

```
% verext="${filename##*-}"
% ver="${verext%.*}"
% ext="${verext##*.}"
% echo $ver
1.2.3
% echo $ext
zip 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-22T17:51:54.957

```
$ a="artifact-1.2.3.zip"; a="${a#*-}"; echo "${a%.*}" 
```

‘<code>#*pattern*’ removes *pattern* so long as it matches the *beginning* of `$a`. The syntax of *pattern* is similar to that used in filename matching. In our case,

*   `*` is any sequence of characters.
*   `-` means a literal dash.
*   Thus `#*-` matches everything up to, and including, the *first* dash.
*   Thus `${a#*-}` expands to whatever `$a` would expand to, except that `artifact-` is removed from the expansion, leaving us with `1.2.3.zip`.

Similarly, ‘<code>%*pattern*’ removes *pattern* so long as it matches the *end* of the expansion. In our case,

*   `.` a literal dot.
*   `*` any sequence of characters.
*   Thus `%.*` is everything including the *last* dot up to the end of the string.
*   Thus if `$a` expands to `1.2.3.zip`, then `${a%.*}` expands to `1.2.3`.

Job done.

The man page content for this is as follows (at least on my machine, YMMV):

```
       ${parameter#word}
       ${parameter##word}
              The word is expanded to produce a pattern just  as  in  pathname
              expansion.  If the pattern matches the beginning of the value of
              parameter, then the result of  the  expansion  is  the  expanded
              value of parameter with the shortest matching pattern (the ``#''
              case) or the longest matching pattern (the ``##'' case) deleted.
              If parameter is @ or *, the pattern removal operation is applied
              to each positional parameter in turn, and the expansion  is  the
              resultant  list.   If parameter is an array variable subscripted
              with @ or *, the pattern removal operation is  applied  to  each
              member  of the array in turn, and the expansion is the resultant
              list.

       ${parameter%word}
       ${parameter%%word}
              The word is expanded to produce a pattern just  as  in  pathname
              expansion.   If  the  pattern  matches a trailing portion of the
              expanded value of parameter, then the result of the expansion is
              the  expanded value of parameter with the shortest matching pat-
              tern (the ``%'' case)  or  the  longest  matching  pattern  (the
              ``%%''  case)  deleted.   If  parameter  is  @ or *, the pattern
              removal operation is applied to  each  positional  parameter  in
              turn,  and the expansion is the resultant list.  If parameter is
              an array variable subscripted with @ or *, the  pattern  removal
              operation  is  applied  to each member of the array in turn, and
              the expansion is the resultant list.

```

HTH!

**EDIT**

Kudos to @x4d for the detailed answer. Still think people should RTFM though. If they don't understand the manual, then post another question.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T17:58:24.903

使用 Bash RegEx 功能：

```
>str="artifact-1.2.3.zip"
[[ "$str" =~ -(.*)\.[^.]*$ ]] && echo ${BASH_REMATCH[1]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:53:31.593

I think you can do this:

```
string=${a="artifact-1.2.3.zip"; b="-"; echo ${a:$(( $(expr index "$a" "$b" + 1) - $(expr length "$b") ))}}

substring=${string:0:4} 
```

The last step removes the last 4 characters from the string. There's some more info on [here](http://tldp.org/LDP/abs/html/string-manipulation.html).**

# github - 代理背后的 GitHub Windows 客户端

> ID：16153450
> 
> 赞同：94
> 
> 时间：2013-04-22T17:47:11.663
> 
> 标签：github, proxy, github-for-windows

我正在尝试让 Windows 的 GitHub 客户端正常工作。我在公司代理和防火墙后面的公司 Win 7 x64 计算机上。关注其他各种帖子并尝试环境变量和配置变量的多种组合，我发现获得克隆和推送更新工作的唯一方法是使用 HTTPS_PROXY 环境变量，包括我的完整公司域用户 ID 和密码。

从安全的角度来看，这是不可接受的。有没有其他方法可以让它工作？

### 补充说明：

以下工作：

*   添加一个使用值调用的环境`HTTPS_PROXY`变量`http://[domain]\[userid]:[password]@someproxy.mycorp.com:8080`

以下没有**工作**：

*   `HTTPS_PROXY`从变量中省略用户名和密码
*   使用名为`HTTP_PROXY`(no `S`)的环境变量
*   将`http.proxy`变量添加到全局配置文件 ( `.gitconfig`)
*   将`https.proxy`变量添加到全局配置文件

在所有情况下，GitHub*客户端*仍然无法识别代理：文件内容在启动时`TheLog.txt` *始终*显示以下内容：

```
[time]|INFO|thread:4|GitHub.Helpers.StartupLogger|Proxy information: (None)
[time]|INFO|thread:4|GitHub.Helpers.StartupLogger|Couldn't fetch creds for proxy 
```

随后是几次失败的代理身份验证尝试的输出，所有这些都表明“凭据丢失”。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-09-04T16:14:20.783

将这些条目添加到用户目录中的“.gitconfig”文件中（转到 %USERPROFILE%）：

```
[http]
    proxy = http://<proxy address>:<proxy port>

[https]
    proxy = https://<proxy address>:<proxy port> 
```

如果您不想以明文形式存储密码，我会使用像 CNTLM 这样的本地代理转发器，它允许您引导所有流量通过它并可以存储散列的密码。

* * *

*与原始问题不同，**如果您不在乎密码是否为纯文本，请**添加以下内容：*

```
[http]
    proxy = http://<username>:<password>@<proxy address>:<proxy port>

[https]
    proxy = https://<username>:<password>@<proxy address>:<proxy port> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-10T07:36:29.287

尝试了以上所有方法 - 并没有成功，唯一帮助我的是 CNTLM - [http://cntlm.sourceforge.net/](http://cntlm.sourceforge.net/)。

安装它并运行cntlm -H，然后对corp代理进行身份验证，使用cntlm的输出编辑cntlm.ini文件，重新启动Windows服务。使用以下命令更新 .gitconfig：

```
[https] proxy = localhost:3128
[http] proxy = localhost:3128 
```

现在 cntlm 将执行所有身份验证，您将能够在 corp 代理后面使用 GitHub（和 Dropbox，顺便说一句）。至少在下一次更改密码之前:) （比做 cntlm -H 的东西）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-12T11:51:43.273

我能够让 GitHub Shell 与我们的公司代理一起工作。我正在启动 GitHub Shell 并执行以下命令：

```
export http_proxy=http://<username>:<password>@<corporate proxy>:3128 
```

我真的很想让 GUI 也能工作。但我不想设置包含我的公司凭证信息的 Windows 全局环境变量。

奇怪的是 GitHub GUI Client 能够连接到 GitHub 以进行用户身份验证，但唯一的问题是从 GitHub 克隆、拉取和推送项目。似乎问题出在git实现上。我能够将 git 配置为通过我们的代理运行，而无需将我的凭据放入 git 全局设置中，并且它在执行拉取或推送请求时要求我提供凭据。但这仅在 Git Shell 中有效。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-04T11:59:03.377

如果您在企业中使用 GitHub for Windows，那么您很有可能在一个严重的企业防火墙/代理背后。GitHub for Windows 在其 GUI 中还没有用于设置选项的代理参数。

要将 GitHub for Windows 配置为使用您的公司代理，请编辑通常位于 C:\Users\.gitconfig 或 C:\Documents & Settings\.gitconfig 的 .gitconfig 文件

关闭 GitHub for Windows；在 .gitconfig 中，只需添加

[https] 代理 = proxy.yourcompany.com:port

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-13T15:49:59.723

我也遇到了这个问题，并试图深入研究它（反汇编客户端）。

我们看到的生成日志消息的代码如下：

```
private static void LogProxyServerConfiguration()
{
    WebProxy defaultProxy = WebProxy.GetDefaultProxy();
    string str = defaultProxy.Address != (Uri)null ? defaultProxy.Address.ToString() : "(None)";
    StartupLogger.log.Info((IFormatProvider)CultureInfo.InvariantCulture, "Proxy information: {0}", str);
    try
    {
        if (defaultProxy.Credentials == null)
        {
            StartupLogger.log.Info((IFormatProvider)CultureInfo.InvariantCulture, "Couldn't fetch creds for proxy", new object[0]);
        }
        else
        {
            NetworkCredential credential = defaultProxy.Credentials.GetCredential(GitHubClient.GitHubDotComUri, "Basic");
            StartupLogger.log.Info((IFormatProvider)CultureInfo.InvariantCulture, "Proxy is authenticated: {0}", credential != null && !string.IsNullOrWhiteSpace(credential.UserName));
        }
    }
    catch (Exception ex)
    {
        StartupLogger.log.InfoException("Couldn't fetch creds for proxy", ex);
    }
} 
```

所以这个块只记录*在 IE 中设置*的代理信息。日志消息似乎与我们在配置文件或环境变量中设置的内容无关。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-22T17:51:50.407

我不知道你的防火墙，但我的校园使用代理

你使用任何 git gui 吗？**编辑**：刚刚注意到您正在使用 github 客户端 for windows

我正在使用 tortoisegit，它很容易设置代理。只需右键单击任意位置，tortoisegit>network，启用代理服务器并设置服务器地址、用户名和密码。完毕

据我记得，tortoisegit 也可以在 github 上开箱即用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-27T23:02:43.590

这是在github中设置代理的方法

```
git config --global http.proxy http://<username>:<pass>@<ip>:<port>
git config --global https.proxy http://<username>:<pass>@<ip>:<port> 
```

在我的大学里，我们没有用户名和密码，所以如果我们的大学 ip 是 172.16.10.10 并且端口是 8080

```
git config --global http.proxy http://172.16.10.10:8080
git config --global https.proxy http://172.16.10.10:8080 
```

PS -> 我建议使用此方法设置代理，因为您将进一步了解
[源代码](https://stackoverflow.com/questions/783811/getting-git-to-work-with-a-proxy-server)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-04T18:32:42.090

我发现[这个博客](http://hwiechers.blogspot.com/2013/10/how-to-use-git-behind-proxy-requiring.html)很有用。它描述了[ntlmaps](http://sourceforge.net/projects/ntlmaps/)代理。它可能不太安全，但工作顺利。我无法让cntlm工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-23T19:22:54.950

对我们来说，解决方案涉及两件不同的事情。首先，如 Sogger 的回答中所述，您需要将条目添加到您的`.gitconfig`文件中，该文件位于`%USERPROFILE%`.

```
[http]
    proxy = http://<proxy address>:<proxy port>

[https]
    proxy = https://<proxy address>:<proxy port> 
```

其次，（这对我们来说是缺失的部分，）您需要在代理服务器上配置一个例外，以允许***未经身份验证的***代理流量`*.github.com`

在 iPrism 中，它看起来像这样： [![在此处输入图像描述](https://i.stack.imgur.com/5KVzb.jpg)](https://i.stack.imgur.com/5KVzb.jpg)

问题不在于代理，而在于*身份验证*。绕过身份验证要求允许使用 GitHub 桌面客户端克隆和处理项目所需的通信。

另请注意，此方法**不需要**在`.gitconfig`文件中存储代理凭据。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-31T06:43:40.140

如果您需要**强制 Git 或 GitHub 客户端绕过代理（使用直接连接）**，只需将 中的代理 URI 设置`.gitconfig`为空字符串即可。您可能必须手动编辑文件，我没能说服`git config`命令将配置指令的值设置为空字符串（尝试过`git config --global http.proxy ""`）。

所以只需将以下行添加到`~/.gitconfig`：

```
[http]
    proxy = ""
[https]
    proxy = "" 
```

# node.js - node.js jshtml-express 布局

> ID：16153454
> 
> 赞同：0
> 
> 时间：2013-04-22T17:47:29.460
> 
> 标签：node.js, viewengine

**你好！**

**有没有办法在 jshtml 中拥有母版页或布局？**

我尝试以 .net Razor 样式执行此操作，但没有成功。 [链接到 jshtml 视图引擎。](http://github.com/elmerbulthuis/jshtml)

我的意图是让母版页被称为 layout.jshtml 和其他一些子页面，如 index.jshtml 等，就像它在 razor 中一样。

更多解释我所说的“我想要母版页”我有 Layout.jshtml ，这是我的母版页

```
<html>
<head>
    <link rel="stylesheet" href="/stylesheets/style.css" ></link>

</head>
<body>

@writeBody();

</body>
</html> 
```

我还有其他视图叫做 some.jshtml

```
<h1>@locals.title</h1>
<div class="Mydata">
@locals.content
@locals.otherContent
</div> 
```

当我在浏览器中运行此页面时，我希望将 layout.jshtml 和 some.jshtml 连接起来。some.jshtml 的内容在 writeBody() 中渲染；在 layout.jshtml 中

当我谈到串联时，我的意思是这样的。这是我可以在浏览器中看到的结果。

```
<html>
<head>
    <link rel="stylesheet" href="/stylesheets/style.css" ></link>

</head>
<body>

<h1>title</h1>
<div class="Mydata">
content
otherContent
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:21:36.077

更多解释我所说的“我想要母版页”我有 Layout.jshtml ，这是我的母版页

```
<html>
<head>
    <link rel="stylesheet" href="/stylesheets/style.css" ></link>

</head>
<body>

@writeBody();

</body>
</html> 
```

我还有其他视图叫做 some.jshtml

```
<h1>@locals.title</h1>
<div class="Mydata">
@locals.content
@locals.otherContent
</div> 
```

当我在浏览器中运行此页面时，我希望将 layout.jshtml 和 some.jshtml 连接起来。some.jshtml 的内容在 writeBody() 中渲染；在 layout.jshtml 中

当我谈到串联时，我的意思是这样的。这是我可以在浏览器中看到的结果。

```
<html>
<head>
    <link rel="stylesheet" href="/stylesheets/style.css" ></link>

</head>
<body>

<h1>title</h1>
<div class="Mydata">
content
otherContent
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:15:31.690

jshtml 存储库链接到[jshtml-express](https://github.com/elmerbulthuis/jshtml-express)项目。

那里的文档给出了如何在您的项目中使用它的示例：

```
var express = require('express');

var port = parseInt(process.argv.pop());
var app = express();
app.configure(function() {
    app.use(express.bodyParser());
    app.use(app.router);
});

app.engine('jshtml', require('jshtml-express'));  // make sure you have installed via npm install jshtml-express
app.set('view engine', 'jshtml'); 
```

我自己没有使用过这个，但这个过程与其他模板系统（Jade、Handlebars 等）类似。

# events - 用于拖动的 Jquery 事件丢失？

> ID：16153455
> 
> 赞同：1
> 
> 时间：2013-04-22T17:47:29.960
> 
> 标签：events

我看到这样的例子。

```
windowId.bind( 'dragstart'.... 
```

但在这里寻找拖动事件不存在。 [http://api.jquery.com/category/events/](http://api.jquery.com/category/events/)

此外，当我运行示例时，事件不会触发。所以我显然在这里遗漏了一些东西。如果drag、dragstart、dragover 等不是jquery 事件，它们是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:55:09.080

拖放事件不是原生jQuery事件，你必须使用插件。我推荐这个：http: [//jqueryui.com/draggable/](http://jqueryui.com/draggable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:54:29.413

也许你的意思是 jQuery UI 的拖放事件？[这是关于它的一些事情](http://jqueryui.com/draggable/#events)。

# ruby-on-rails - Rails 模型：has_many_and_belongs_to_one

> ID：16153456
> 
> 赞同：0
> 
> 时间：2013-04-22T17:47:29.953
> 
> 标签：ruby-on-rails, activerecord, model-associations

我有两个具有 has_many 关联的模型。然而，从“多”来看，只有一个是初级的。这是设计它的一种方法：

## 方法#1

```
class Person < ActiveRecord:Base
  has_many :address

  def find_primary
    self.address.where('is_primary = ?', "true").first
  end
end

class Address < ActiveRecord:Base
  belongs_to :person
  attr_protected :is_primary

  def make_primary
    self.person.address.each { |a| a.update_attribute(:is_primary, false) }
    self.update_attribute(:is_primary,true)
  end

  def is_primary?
    self.is_primary
  end
end 
```

我不喜欢`make_primary`那个人的地址数量的 O(n) 怎么样。这也可能是多线程环境中的问题（即乘客，对吗？）。也许有一个优化`make_primary`可以更好地用于方法＃2？

此外，可能很容易出现难以发现的错误，这些错误允许多个地址成为主要地址。

## 方法#2

```
class Person < ActiveRecord:Base
  has_many :address
  belongs_to :primary_address, :class_name => 'Address', :foreign_key => :primary_address_id
end

class Address < ActiveRecord:Base
  belongs_to :person
  has_one :person_as_primary, :class_name => 'Person', :foreign_key => :primary_address_id

  def make_primary
    self.person.primary_address = self
    self.save!
  end
end 
```

除了避免多线程和 O(n) 问题之外，这种方法也`find_primary`没有必要，因为它只是`self.primary_address`.

但是，这里的问题是不能保证

```
[person, nil].include?(person.primary_address.person_as_primary) 
```

以下是我的问题：

1）还有我没有提到的其他优点/缺点吗？

2）我应该考虑哪些其他方法？特别是，有没有没有提出任何上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:56:20.277

我会以唯一索引的形式将解决方案下推到数据库中。这保证了一次只能有一个是主要的。如果并发不是问题，那么您可以在 Rails 级别使用唯一性约束，但听起来并发是您的应用程序的一个问题。

# java - Windows 区分大小写导致问题，无法将 Java 项目包含到 Eclipse

> ID：16153458
> 
> 赞同：0
> 
> 时间：2013-04-22T17:47:33.470
> 
> 标签：java, windows, eclipse, case-sensitive

所以我反编译了我的一个 jar，在反编译器的本质上，它将类命名为从 a 到 z。一个循环后，它开始再次将它们命名为相同的名称，但带有标题字母，因此我最终可能会在最终的 zip 文件中拥有 a.java 和 A.java。

这是问题出现的时候，因为我无法在任何地方提取 zip，因为在尝试将 a.java 和 A.java 提取到同一目录后，Windows 变得迟钝

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:13:18.797

这是一个*没有*好的方法的移植问题。如果您实际上并不关心文件的名称，您可以做的是在 zip 中重命名它们。Winzip 让你做到这一点；我相信其他工具也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:14:52.897

重做反编译。由于这不是您独有的常见问题，因此应该有一种方法可以使反编译器使用其他名称。

如果这不起作用，您只需分两步即可轻松提取文件：一次仅提取大写文件，将它们移动到子文件夹中，然后提取剩余的文件。然后将所有内容导入 Eclipse 并使用“组织导入”将所有导入修复为移动的大写文件。或者，您可以使用两个不同的源目录来组织您的两组文件。

绝对没有办法，你可以将原始的 zip 导入到 Eclipse 中。Eclipse 工作区包含映射到底层文件系统上的文件的资源。因此，文件系统的所有限制都适用，并且您不能将 a.java 和 A.java 放在同一个包中。

# r - R图度数分布不起作用

> ID：16153460
> 
> 赞同：7
> 
> 时间：2013-04-22T17:47:36.763
> 
> 标签：r, graph, distribution, igraph

我无法弄清楚为什么`degree.distribution`不适合我。我已经尝试过 R i386 3.0.0 和 R x64 3.0.0。这是生成图表并显示其分布的简单脚本：

```
library(igraph)

testG = graph.empty(n=10, directed=TRUE)
for(row in 1 : 5) {
    src = row
    dest = row + 1
    testG = add.edges(testG, rbind(src, as.numeric(dest)))
    if(row %% 2 == 0) {
        dest = row + 2
        testG = add.edges(testG, rbind(src, as.numeric(dest)))
    }
}
testG

testD = degree.distribution(testG, v=V(testG), cumulative=FALSE)
testD
plot(1 : length(testD), testD, "h", main="Website Graph Degree Distribution", xlab="Degree", ylab="Probability of Degree")
degree(testG) 
```

testG 显示：（`IGRAPH D--- 10 7 --`有道理）。testD 显示：（`NULL`为什么？）。该图在 (1,1) 处只有一个值。但是该图包含具有其他度数的节点，如 degree(testG) 的输出所示，即`[1,3,2,4,2,2,0,0,0,0]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T07:30:10.420

您必须修改 degree.distribution 函数。详细信息可以在以下链接中找到。 [无法使用 igraph 的 degree.distribution 函数复制结果](https://stackoverflow.com/questions/18715697/cant-replicate-result-with-degree-distribution-function-of-igraph)

# c# - 使用 Activator.CreateInstance 创建的对象

> ID：16153469
> 
> 赞同：2
> 
> 时间：2013-04-22T17:48:27.560
> 
> 标签：c#, reflection

考虑下面的代码：

```
void fun1(string typeName)
{
    object adap = Activator.CreateInstance(typeName);
    adap.dowork(); //won't compile because of strongly typed.
} 
```

使用`Activator.CreateInstance()`我们可以轻松地创建任何类型的实例，但是如果我们在设计时不知道类型名，那么也不可能将其向下转换为它的实际类型。

我的问题是，如果我们不能将它向下转换为适当的类型，我们如何调用创建的实例函数，`Activator.CreateInstance`因为我们在设计时不知道类型名，但我们知道该函数存在。

我希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T17:51:47.640

您可以做的一件事是将其分配给一个`dynamic`类型。

```
dynamic adap = Activator.CreateInstance(typeName);
adap.dowork(); //this now compiles 
```

如果您知道方法名称，也可以使用反射动态调用方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T17:51:36.547

最好的选择是了解一些常见的接口或基类，然后转换为那个。但是，如果这不可能，您可以使用

```
dynamic adap = ... 
```

其余代码按原样。

如果那是不可能的（错误的.net 版本等），那么你将不得不使用反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T06:58:26.483

如果您知道它`typeName`有方法`doWork`，那么您的类型最好实现如下接口：

```
interface IDoWorkSupport
{
    void DorWork();
} 
```

然后你可以让你的代码像：

```
var adap = (IDoWorkSupport) Activator.CreateInstance(typeName);
adap.DoWork(); //this now compiles 
```

在这种情况下，它是一个更加面向对象的解决方案。

# jquery-mobile - jquery移动手风琴，包括画布

> ID：16153473
> 
> 赞同：0
> 
> 时间：2013-04-22T17:48:35.460
> 
> 标签：jquery-mobile, canvas, width, accordion

我尝试将几个小画布元素添加到手风琴内容区域。如何动态扩展内容的宽度？

[http://jsfiddle.net/WBHUk/](http://jsfiddle.net/WBHUk/)

```
<div data-role="page" id="page">
    <div data-role="header">
        <h1>Header</h1>
    </div><!-- /header -->
    <div data-role="content" id="content01">
    </div><!-- /content -->
    <div data-role="footer">
            <h4>Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

$('#content01').append('<div data-role="collapsible-set" data-theme="c" data-content-theme="d" id="acc01"></div>').trigger("create");
$('#acc01').append('<div data-role="collapsible" data-collapsed="false" id="acc01a"><h3>First</h3><div id="acc01a1"></div></div>').trigger("create");
$('#acc01').append('<div data-role="collapsible" id="acc01b"><h3>Second</h3><p>TODO</p></div>').trigger("create");
$('#acc01').append('<div data-role="collapsible"><h3>Third</h3><p>TODO</p></div>').trigger("create");

for(var ch=0; ch<20; ch++){
    $('#acc01a1').append('<div id="c_panel'+ ch + '" class="chpanel"></div>');
    $('#c_panel' + ch).width(80);
    $('#c_panel' + ch).height(30);
    $('#c_panel' + ch).append('<canvas id="cccanvas' +ch+ '" class="cccanvas" width="80" height = "30"></canvas>').trigger("create");
    $('#c_panel' + ch).css( "position", "relative" );
    $('#c_panel' + ch).css( "float", "left" );
    $('#c_panel' + ch).css( "background-color", "yellow" );
    $('#c_panel' + ch).css( "margin", "2px" );
    $('#c_panel' + ch).css( "border-radius", "5px" );

    var ctx = $('#cccanvas' + ch)[0].getContext("2d");

} 
```

非常感谢马特乔

# c++ - 提升线程间通信队列

> ID：16153476
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:01.550
> 
> 标签：c++, boost, parallel-processing, ipc

我正在使用 Boost::interprocess::message_queue 在我的应用程序上启用线程之间的通信。我这样做有两个原因。首先，因为我不需要直接实现共享内存。同步机制，其次是因为我想以这种方式对系统进行建模，因为将来它可能会更改为进程间。

我的问题是：鉴于此限制，是否有任何更合适的机制来启用线程间通信，或者我可以继续使用进程间队列而不必担心“进程间开销”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:08:59.547

您可以使用`std::queue`受`boost::mutex`&保护的`boost::condition_variable`

Anthony Williams 在他的“C++ Concurrency in Action”一书中对如何实现线程安全队列提供了很好的解释。

示例代码可在他的网站上找到：

[Just Software Solutions - 实现线程安全队列](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)

# c - 如何在特定目录中创建文件

> ID：16153477
> 
> 赞同：4
> 
> 时间：2013-04-22T17:49:04.580
> 
> 标签：c, file, mkdir

我已经找到了一种方法来做我想做的事，但它看起来很脏。我只想做一件简单的事

```
 sprintf(serv_name, "Fattura-%i.txt", getpid());
    fd = open(serv_name, PERMISSION | O_CREAT);
    if (fd<0) {
        perror("CLIENT:\n");
        exit(1);
    } 
```

我希望新文件不是在我的程序目录中创建，而是直接在子目录中创建。例如我的文件在 ./program/ 我希望这些文件将在 ./program/newdir/ 中创建

我试图将我想要的文件路径直接放入字符串“serv_name”中，就像

```
 sprintf("./newdir/fattura-%i.txt",getpid()); 
```

还尝试了 \\ 而不是 /。如何才能做到这一点？我发现的唯一方法是，在程序的最后，放一个：

```
mkdir("newdir",IPC_CREAT);
system("chmod 777 newdir");
system("cp Fattura-*.txt ./fatture/");
system("rm Fattura-*.txt"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:02:08.113

试试这个，它有效。我改变了什么：我用`fopen`了代替，`open`我用`snprintf`了代替`sprints`，因为它更安全：

```
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>
#include <stdlib.h>

int main() {
    char serv_name[1000];
    mkdir("newdir", S_IRWXU | S_IRWXG | S_IRWXO);
    snprintf(serv_name, sizeof(serv_name), "newdir/Fattura-%i.txt", getpid());
    FILE* f = fopen(serv_name, "w");
    if (f < 0) {
        perror("CLIENT:\n");
        exit(1);
    }   
} 
```

# javascript - 如何仅在某些页面上获取 highcharts 脚本

> ID：16153478
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:05.147
> 
> 标签：javascript, ruby-on-rails, highcharts

我有一个带有几个拒绝一起工作的 .js 文件的 rails 应用程序。我想尝试制作 highcharts.js 并且它的模块是特定于页面的。问题是，由于它们来自 gem，我不知道如何找到它们并将它们放在 app/assets/javascript 的子文件夹中。以前有没有人解决过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:48:18.203

我能够将 require 语句放在专门为使用 highcharts 脚本的控制器制作的文件夹和文件中。我添加了 javascript_include 标记来引用脚本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:58:38.243

你为什么要使用 gem 呢？[您可以直接从http://www.highcharts.com/](http://www.highcharts.com/)获取 highcharts 文件

# jquery - jQuery校验和

> ID：16153479
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:10.170
> 
> 标签：jquery, asp.net, checksum

我正在构建一个将在 iPad 上运行的信息亭竞赛，并且我已经构建了它，以便在表单加载后，它可以通过使用 localStorage 存储每个条目来离线运行。

每隔 15 分钟，网页会尝试将条目发送回服务器，如果成功，本地记录将从 localStorage 中删除。

现在到它的症结所在：

为了安全起见，我不能让 iPad 发出删除命令，除非我们绝对确定服务器收到了所有记录。

如果带宽不是问题，我只需让服务器发回它收到的所有记录，ipad 会检查从服务器接收到的数据与它发送到服务器的数据，如果两者匹配，我们可以确信服务器收到所有记录并清空 localStorage 变量。

由于带宽是一个问题，我想知道是否有一种方法可以对数据生成校验和，发送数据，让 .asp 接收文件也生成校验和，然后将校验和作为响应发送回来。

所以我想我的问题是，有没有办法在 jQuery 中生成可以在 .ASP 中复制的校验和？

谢谢，乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:07:22.427

您可以使用此函数生成哈希值

```
String.prototype.hashCode = function(){
    var hash = 0, i, char;
    if (this.length == 0) return hash;
    for (i = 0; i < this.length; i++) {
        char = this.charCodeAt(i);
        hash = ((hash<<5)-hash)+char;
        hash = hash & hash; // Convert to 32bit integer
    }
    return hash;
}; 
```

函数取自**esmiralha**的答案**[Generate a Hash from string in Javascript/jQuery](https://stackoverflow.com/a/7616484/500725)**

# c# - Windows Phone、Web 服务和捕获异常

> ID：16153480
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:11.147
> 
> 标签：c#, windows-phone

我在 Windows Phone 中有以下代码：

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
    }

    private void Button_LogIn_Click(object sender, RoutedEventArgs e)
    {
        Service1SoapClient web_service = new Service1SoapClient();
        web_service.LogInAsync(TextBox_Username.Text, TextBox_Password.Password);
        web_service.LogInCompleted += new EventHandler<LogInCompletedEventArgs>(login_complete);
    }

    private void login_complete(object obj, ClientWebService.LogInCompletedEventArgs e)
    {
        string answer = e.Result.ToString();

        if (answer.Equals("Success") || answer.Equals("success"))
        {
            NavigationService.Navigate(new Uri("/Authenticated.xaml", UriKind.Relative));
        }

        else
        {
            MessageBox.Show("The log-in details are invalid!");
        }
    }
} 
```

该代码利用 Web 服务将用户登录到系统中。登录系统正常工作。

我的问题是，我应该在哪里插入 try catch 语句以便在 Web 服务未运行时捕获异常？我在 button_click 事件处理程序中尝试无济于事，甚至在我得到结果时也在排队。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:18:37.943

目前尚不清楚您的 Service1SoapClient 基于什么类型，因此以下陈述可能不准确。您似乎没有使用移动服务客户端，因为您传入了用户名和密码并返回了一些其他状态。

但是，方法名称`...Async`上的后缀`LoginAsync`表示此 API 返回 a `Task<T>`，这意味着此 API 是为 C# 5 的 new`async`和`await`关键字而构建的。

因此，我建议将您的代码更改为如下所示： ``` public partial class MainPage : PhoneApplicationPage { public MainPage() { InitializeComponent(); }

```
private async void Button_LogIn_Click(object sender, RoutedEventArgs e)
{
    try
    {
        Service1SoapClient web_service = new Service1SoapClient();
        string answer = await web_service.LogInAsync(TextBox_Username.Text, TextBox_Password.Password);

        if (answer.ToLower().Equals("success"))
        {
            NavigationService.Navigate(new Uri("/Authenticated.xaml", UriKind.Relative));
        }
        else
        {
            MessageBox.Show("The log-in details are invalid!");
        }
    catch (<ExceptionType> e)
    {
        // ... handle exception here
    }
} 
```

}```

`async`请注意， and的附带好处之一`await`是它们允许您以逻辑方式编写代码，包括您的异常处理代码，这些代码在之前`async`并且`await`很难正确处理！

# excel - EXCEL VBA 输入框确定/取消

> ID：16153481
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:49:14.007
> 
> 标签：excel, vba

基本上我需要2个输入框。第一个输入框将要求用户输入一个值，然后在用户单击确定后提示第二个输入框。第二个输入框中的默认值将是第一个输入框中的值右侧一个单元格的值。这是我想要实现的，但输入框的问题是取消按钮会抛出错误消息或不会以任何方式退出 sub。

那么还有其他类似的方法可以实现我的目标吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:13:46.357

`InputBox(...)``""`每当按下取消按钮时返回一个空字符串。

知道了这一点，您可以检查输入是否`""`适用于每个输入。如果在此过程中的任何时候遇到取消，您就不会再往前走了。

下面使用嵌套的 if 语句对此进行了演示。

```
Sub Macro1()
    Dim x As String
    Dim y As String
    Dim yDefault As String

    x = InputBox("Prompt One", "TITLE ONE")

    If (x <> "") Then
            yDefault = GetDefaultValue(x)
            y = InputBox("Prompt Two", "TITLE TWO", yDefault)

        If (y <> "") Then
            MsgBox "X: " & x & vbCrLf & "Y: " & y, vbOKOnly, "RESULTS"
        End If
    End If
End Sub

Function GetDefaultValue(x As String) As String
    ' Your custom logic to grab the default value (whatever cell) goes here
    GetDefaultValue = "DEFAULT(" & x & ")"
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:24:53.353

由于它是您想要的值，因此不要使用`InputBox`. 使用`Application.Inputbox`. 如果您`F1`在 Excel 中按下魔术键并键入，`Application.Inputbox`那么您会看到一些魔术文本突然出现；）

这是一个示例用法。

```
Ret = Application.InputBox(prompt := "Please enter a value", type := 1) 
```

注意类型`1`。

我可以给你一个确切的答案，但我相信这会让你开始；）如果没有，那么回帖:)

# jquery - jQuery 转发页面还是 Servlet？

> ID：16153487
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:28.430
> 
> 标签：jquery, servlets, web-applications

我想知道更改页面的最佳做法是什么。最好是让 servlet 使用 sendRedirect 还是简单地让 jQuery/Javascript 来做？

因此，假设我有一个要提交并转到新页面的表单。我是否只是将数据从 jQuery 发送到 servlet，得到响应，然后通过 jQuery 转发页面？还是我会发送信息并让 servlet 转发页面？

如果您需要任何澄清，请告诉我。我更倾向于让 jQuery 处理页面转发，但我想获得更有经验的开发人员的意见。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:51:52.090

If I understand your question, you're asking about page redirects - and if that's the question, have the server do it, not the client - client redirecting is generally frowned upon, especially for SEO

Client redirecting would involve setting window.location, I believe - server redirects just involve. 302 header, if I remember the number correctly

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:51:26.390

*如果您使用发送数据，* `ajax`您将无法从您的 servlet 中重定向用户，为此您需要从您的脚本中重定向用户（*一旦您从 servlet 获得响应*）。

如果您在没有 ajax 的情况下提交表单 - 您应该能够从您的 servlet 重定向用户。

# c++ - 将向量传递给函数

> ID：16153491
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:50.200
> 
> 标签：c++, vector, openssl

我有以下代码。当我使用数组时它工作得很好，我只想用向量重构它，这样我就可以减少我的哈希的足迹。

```
uint8_t* rip(uint8_t *in, vector<uint8_t*> *out)
{
    RIPEMD160(in, 32, out);
    return out;
}

int main()
{
    char pub_key[] = "0450863AD64A87AE8A2FE83C1AF1A8403CB53F53E486D8511DAD8A04887E5B23522CD470243453A299FA9E77237716103ABC11A1DF38855ED6F2EE187E9C582BA6";
    vector<uint8_t> res_rip(20);
    uint8_t res_sha[32];
    uint8_t res_tmp[65];
    hex_decode(pub_key,131,res_tmp);
    for(int i =0; i < 65; i++)
        cout << setw(2) << setfill('0') << hex << (int)res_tmp[i];
    cout << endl << endl;
    sha(res_tmp,res_sha);
    rip(res_sha,&res_rip);
    for(int i =0; i < 32; i++)
        cout << setw(2) << setfill('0') << hex << (int)res_sha[i];
    cout << endl << endl;
    for(int i =0; i < 20; i++)
        cout << setw(2) << setfill('0') << hex << (int)res_rip[i];
    return 0;
} 
```

我不确定我需要如何将向量传递给函数，或者我需要做什么才能正确返回它。

我收到编译器消息`error: cannot convert 'std::vector<unsigned char*>*' to 'unsigned char*' for argument '3' to 'unsigned char* RIPEMD160(const unsigned char*, size_t, unsigned char*)'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:53:34.277

That function expects a pointer to the data, not a `std::vector`.

In C++11, you can get a pointer to the data in a vector by calling [`std::vector::data()`](http://en.cppreference.com/w/cpp/container/vector/data).

```
RIPEMD160(in, 32, out->data() ); 
```

In C++03 or later, you can get a pointer to the data in a vector by taking the address of the first element.

```
RIPEMD160(in, 32, &out->at(0) ); 
```

# android - 未清除的共享偏好，

> ID：16153492
> 
> 赞同：0
> 
> 时间：2013-04-22T17:49:50.963
> 
> 标签：android, sharedpreferences

我无法`SharedPreferences`在点击事件时从应用程序中删除。

这是我将值存储到 UserInfoActivity 的方式`SharedPreferences`：

```
SharedPreferences notificationCountSP = PreferenceManager
             .getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor notificationEditor = perkBalance.edit();
notificationEditor.putString("notificationCount",notificationCountValue);
notificationEditor.commit(); 
```

这是我试图`SharedPreferences`从 MainActivity 清除所有数据的方式：

```
SharedPreferences clearNotificationSP = getSharedPreferences(
                "notificationCountSP", 0);
SharedPreferences.Editor editor = clearNotificationSP.edit();
editor.remove("notificationCount");
editor.clear();
editor.commit(); 
```

请告诉我我做错了什么。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:09:34.950

```
SharedPreferences notificationCountSP = PreferenceManager
                     .getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor notificationEditor = notificationCountSP.edit();
notificationEditor.putString("notificationCount", notificationCountValue);
notificationEditor.commit();

notificationEditor.remove("notificationCount");
notificationEditor.commit(); 
```

或者

```
SharedPreferences clearNotificationSP = getSharedPreferences("notification_prefs", 0);
SharedPreferences.Editor editor = clearNotificationSP.edit();
editor.putString("notificationCount", notificationCountValue);
editor.commit();

editor.remove("notificationCount");
editor.commit(); 
```

第一个解决方案使用默认的应用程序首选项文件，第二个解决方案使用自定义 notification_prefs 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:55:29.693

您`PreferenceManager.getDefaultSharedPreferences`用于存储但从中检索`getSharedPreferences("notificationCountSP")`. 除非您将默认文件设置为“notificationCountSP”，否则它们是不同的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:56:06.547

你可以像下面那样做

```
SharedPreferences userPref = getSharedPreferences(
                                    MyActivity.SHARED_PREFERENCES_FILENAME,MODE_PRIVATE); 
```

# c# - 模拟实现多个接口的泛型

> ID：16153494
> 
> 赞同：5
> 
> 时间：2013-04-22T17:50:02.620
> 
> 标签：c#, mocking, moq

这是我的类实现，其中泛型实现了两个接口......

```
public class ClassA<TGeneric> : where TGeneric: IInterfaceA, IInterfaceB 
```

我想模拟ClassA。但是，我不能使用

```
var mock = new Mock<Class<A<IInterfaceA>>(); 
```

或者

```
var mock = new Mock<Class<A<IInterfaceB>>(); 
```

因为泛型需要两个接口的实现。我知道您可以通过在 moq 上使用 As() 方法来模拟具有多个接口的对象，但我这里并没有真正的对象，而是泛型类型。

想法？

谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T17:52:21.797

You could define an interface that includes both interface A and B (in your test project, for testing purposes), then use that in your mock.

```
public interface ICanTestAAndB : IInterfaceA, IInterfaceB {}

var mock = new Mock<ClassA<ICanTestAAndB>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-28T10:00:35.930

作为接受的答案的替代方案，您可以通过将模拟对象强制转换为`dynamic`并在运行时它将按预期工作来实现您所需要的。

```
void Main()
{
    var mockA = new Mock<IIntA>();
    mockA.Setup(a => a.DoA()).Returns(3);

    var mockB = mockA.As<IIntB>();
    mockB.Setup(iib => iib.DoB()).Returns(7);

    dynamic d = mockB.Object;

    TakeBoth(d);
}

void TakeBoth<T>(T obj) where T : IIntA, IIntB
{
}

public interface IIntA { int DoA(); }
public interface IIntB { int DoB(); } 
```

# r - 在 R glm 模型中选择具有统计意义的变量

> ID：16153497
> 
> 赞同：15
> 
> 时间：2013-04-22T17:50:10.460
> 
> 标签：r, glm

我有一个结果变量，比如 Y 和一个可能影响 Y 的 100 个维度的列表（比如 X1...X100）。

在运行我`glm`的模型并查看模型摘要后，我看到了那些具有统计意义的变量。我希望能够选择这些变量并运行另一个模型并比较性能。有没有办法可以解析模型摘要并仅选择重要的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-22T18:58:50.373

尽管@kith 铺平了道路，但还有更多工作可以做。实际上，整个过程可以自动化。首先，让我们创建一些数据：

```
x1 <- rnorm(10)
x2 <- rnorm(10)
x3 <- rnorm(10)
y <- rnorm(10)
x4 <- y + 5 # this will make a nice significant variable to test our code
(mydata <- as.data.frame(cbind(x1,x2,x3,x4,y))) 
```

我们的模型是：

```
model <- glm(formula=y~x1+x2+x3+x4,data=mydata) 
```

并且系数的布尔向量确实可以通过以下方式提取：

```
toselect.x <- summary(model)$coeff[-1,4] < 0.05 # credit to kith 
```

但这并不是全部！此外，我们可以这样做：

```
# select sig. variables
relevant.x <- names(toselect.x)[toselect.x == TRUE] 
# formula with only sig variables
sig.formula <- as.formula(paste("y ~",relevant.x)) 
```

编辑：正如随后的海报所指出的，后一行应该`sig.formula <- as.formula(paste("y ~",paste(relevant.x, collapse= "+")))`包括所有变量。

并仅使用 OP 最初想要的重要变量运行回归：

```
sig.model <- glm(formula=sig.formula,data=mydata) 
```

在这种情况下，估计值将等于 1，因为我们将 x4 定义为 y+5，这意味着完美的关系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T18:24:01.747

您可以通过函数“summary”访问 glm 结果的 pvalue。系数矩阵的最后一列称为“Pr(>|t|)”，保存模型中使用的因子的 p 值。

这是一个例子：

```
#x is a 10 x 3 matrix
x = matrix(rnorm(3*10), ncol=3)
y = rnorm(10)
res = glm(y~x)
#ignore the intercept pval
summary(res)$coeff[-1,4] < 0.05 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-23T14:19:05.857

对于对 Maxim.K 命令有问题的人

```
sig.formula <- as.formula(paste("y ~",relevant.x)) 
```

用这个

```
sig.formula <- as.formula(paste("y ~",paste(relevant.x, collapse= "+"))) 
```

最终代码会像

```
toselect.x <- summary(glmText)$coeff[-1,4] < 0.05 # credit to kith
# select sig. variables
relevant.x <- names(toselect.x)[toselect.x == TRUE] 
# formula with only sig variables
sig.formula <- as.formula(paste("y ~",paste(relevant.x, collapse= "+"))) 
```

这修复了您在单独选择第一个变量时面临的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T17:46:50.180

在

sig.formula <- as.formula(paste("y ~",relevant.x))

您仅粘贴相关.x 的第一个变量，其他变量将被忽略（例如，尝试将条件反转为 >0.5）

# python - Python，内置id()的对象方法是什么？

> ID：16153501
> 
> 赞同：6
> 
> 时间：2013-04-22T17:50:21.787
> 
> 标签：python, built-in, python-internals

在 Python 中：

*   `len(a)`可以替换为`a.__len__()`
*   `str(a)`或`repr(a)`可以替换为`a.__str__()`或`a.__repr__()`
*   `==`是`__eq__`,`+`是`__add__`, 等等

有没有类似的方法来获取`id(a)`？如果没有，是否有任何解决方法可以在不使用的情况下获取 python 对象的唯一 ID `id()`？

* * *

**编辑：**附加问题：如果不是？有什么理由不定义 a`__id__()`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T17:54:06.220

No, this behavior cannot be changed. `id()` is used to get *"an integer (or long integer) which is guaranteed to be unique and constant for this object during its lifetime"* ([source](http://docs.python.org/2/library/functions.html#id)). No other special meaning is given to this integer (in CPython it is the address of the memory location where the object is stored, but this cannot be relied upon in portable Python).

Since there is no special meaning for the return value of `id()`, it makes no sense to allow you to return a different value instead.

Further, while you could guarantee that `id()` would return unique integers for your *own* objects, you *could not possibly* satisfy the global uniqueness constraint, since your object cannot possibly have knowledge of all other living objects. It would be possible (and likely) that one of your special values clashes with the identity of another object alive in the runtime. This would not be an acceptable scenario.

If you need a return value that has some special meaning then you should define a method where appropriate and return a useful value from it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:53:39.403

An object isn't aware of its own name (it can have many), let alone of any unique ID it has associated with it. So - in short - no. The reasons that `__len__` and co. work is that they are bound to the object already - an object is not bound to its ID.

# python - 有没有办法用 win32security 验证用户权限

> ID：16153504
> 
> 赞同：0
> 
> 时间：2013-04-22T17:50:34.473
> 
> 标签：python, windows, pywin32

我知道 win32security.LogonUser。我想要做的是检查输入的凭据以了解它们是否与本地 Windows 机器上的用户和密码匹配，以便我可以授予他们通过网络访问 Windows 机器的权限。这个想法是使用具有默认 Windows 身份验证的 paramiko 制作一个 pythonic ssh 服务器。我不想做的是每次建立新连接时注销用户，或者因为用户已经登录而导致身份验证过程失败。有没有办法在 Windows 上验证用户而无需创建登录会议？

# javascript - 如何用 RxJS 判断一个 Observable 是否正在“等待”另一个（例如，对于 Ajax 请求指示器）

> ID：16153511
> 
> 赞同：0
> 
> 时间：2013-04-22T17:50:47.617
> 
> 标签：javascript, system.reactive, rxjs

在学习 RxJS 时，我想知道：

如何创建一个告诉 Observable X 在 Observable Y 之后是否有价值的 Observable？

示例需要判断是否有 Ajax 请求待处理响应？就像等待[Bacon.js](https://github.com/raimohanska/bacon.js)一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:55:07.507

在提出问题时，我找到了一个答案：

*   将另一个 Observable（触发请求的那个）映射（在 RxJS 中选择）到 true
*   将另一个 Observable（响应一个）映射到 false
*   合并

IE

```
var availabilityPending = usernameToValidate.select(function() {return true;})
         .merge(usernameAvailable.select(function() {return false;})); 
```

不知道这种行为是否已经有帮手了？

# python - 使用带有 sqlalchemy 的 postgresql xml 数据类型

> ID：16153512
> 
> 赞同：7
> 
> 时间：2013-04-22T17:50:47.823
> 
> 标签：python, xml, sqlalchemy, postgresql-9.2

SqlAlchemy 通过方言支持大多数数据库特定的数据类型，但我找不到任何可以使用 postgresql xml 列类型的东西。有人知道可行的解决方案吗？理想情况下，它不应该需要我自己的自定义列类型实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-20T05:28:05.313

如果您需要在 postgresql 数据库中具有*本机 'xml' 数据类型*，则需要编写从**UserDefinedType**而不是从 TypeDecorator 继承的自定义类型。[文档](http://docs.sqlalchemy.org/en/latest/core/custom_types.html?highlight=get_col_spec#creating-new-types)

这是我在其中一个项目中使用的：

```
import xml.etree.ElementTree as etree
import sqlalchemy

class XMLType(sqlalchemy.types.UserDefinedType):
    def get_col_spec(self):
        return 'XML'

    def bind_processor(self, dialect):
        def process(value):
            if value is not None:
                if isinstance(value, str):
                    return value
                else:
                    return etree.tostring(value)
            else:
                return None
        return process

    def result_processor(self, dialect, coltype):
        def process(value):
            if value is not None:
                value = etree.fromstring(value)
            return value
        return process 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T15:13:40.320

请参阅：[SQLAlchemy TypeDecorator 不起作用](https://stackoverflow.com/questions/8530858/sqlalchemy-typedecorator-doesnt-work)

这是修改后的相同解决方案，以处理具有任意 xml 长度的 oracle 的 XMLTYPE，并允许在类列之间进行 lxml etree 分配（无需从容器类中解析/重新解析 xml）

```
# coding: utf-8
from sqlalchemy import Column, DateTime, Float, ForeignKey, Index, Numeric, String, Table, Text, CLOB
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.sql.functions import GenericFunction
class XMLTypeFunc(GenericFunction):
    type=CLOB
    name='XMLType'
    identifier='XMLTypeFunc'

from sqlalchemy.types import TypeDecorator
from lxml import etree #you can use built-in etree if you want
class XMLType(TypeDecorator):

    impl = CLOB
    type = 'XMLTYPE' #etree.Element

    def get_col_spec(self):
        return 'XMLTYPE'

    def bind_processor(self, dialect):
        def process(value):
            if value is not None:
                return etree.tostring(value, encoding='UTF-8', pretty_print='True')
                #return etree.dump(value)
            else:
                return None
        return process

    def process_result_value(self, value, dialect):
        if value is not None:
            value = etree.fromstring(value)
        return value

    def bind_expression(self, bindvalue):
        return XMLTypeFunc(bindvalue) 
```

# r - 在R中选择ggplot图例中的条目

> ID：16153513
> 
> 赞同：0
> 
> 时间：2013-04-22T17:50:50.563
> 
> 标签：r, ggplot2, legend

我正在使用 ggplot 创建一个图形。该图有 27 条我想显示但不强调的线，还有两条我想强调的线，均值和加权均值。我希望只有最后两行出现在情节的传说中。这是我的代码：

```
p_plot <- ggplot(data = dta, aes(x = date, y = premium, colour = State)) + 
          geom_line(, show_guide=FALSE)  + 
          scale_color_manual(values=c(rep("gray60", 27))) 

p_plot <- p_plot + geom_line(aes(y = premium.m), colour = "blue", size = 1.25, 
          show_guide=TRUE) + geom_line(aes(y = premium.m.w), colour = "red", 
          size = 1.25, show_guide=c(TRUE)) + ylab("Pe/pg") 

p_plot 
```

第`show_guide = FALSE`一个语句`geom_line`似乎被其他`show_guide=TRUE`语句覆盖。如何将我的人物图例中的条目数限制为“premium.m”和“premium.mw”行？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:44:01.753

我认为这应该回答您的问题：（代码略有修改，但概念是相同的）

```
dta <- data.frame(date    = rep(seq.Date(as.Date("2010-01-01"), as.Date("2010-12-01"), "months"), 26),
                  premium = rnorm(12*26),
                  State   = rep(letters, each = 12))

library(ggplot2)

p_plot <- ggplot(data = dta) + 
  geom_line(aes(x = date, y = premium, group = State), colour = "grey60")

p_plot + geom_line(aes(x = unique(date), y = as.numeric(tapply(premium, date, mean)), colour = "mean"),
                   size = 1.25) +
  geom_line(aes(x = unique(date), y = as.numeric(tapply(premium, date, median)), colour = "median"),
            size = 1.25) + ylab("Pe/pg") +  scale_color_discrete("stats")

p_plot 
```

![在此处输入图像描述](https://i.stack.imgur.com/gVbcP.png)

然而，这只是一个（丑陋的）解决方法，远非数据可视化的最佳实践（尤其是为了实现 ggplot 的目的）。无论如何，如果您编辑问题添加更多详细信息，我可以为您提供更优雅的解决方案。

# java - Android 贪睡完成

> ID：16153515
> 
> 赞同：0
> 
> 时间：2013-04-22T17:50:59.413
> 
> 标签：java, android, android-intent, alarm, activity-finish

嗨，我开始研究 android 开发，但找不到关于贪睡功能的好教程。这是我的问题：

我有一个简单的闹钟，我想实现贪睡。我有一个 AlarmActivity 传递了启动 AlarmAlertActivity 的意图。但是，当按下贪睡按钮时，我想在 AlarmAlertActivity 上调用完成。我有使用计时器在 AlarmAlertActivity 中编写的贪睡方法。但是，当 AlarmAlertActivity 类完成时，计时器不再运行。我真的不想再想回到AlarmActivity，因为可能有多个贪睡。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:57:41.330

您希望将此功能实现为[`Service`](http://developer.android.com/reference/android/app/Service.html)，而不是`Activity`. 从文档：

> 服务是一个应用程序组件，它代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用。

您可以设计您`AlarmAlertActivity`的与服务交互（如有必要，启动它）。然后，该服务可以在打盹响起时广播一条消息。

很难提供任何具体的建议，因为您没有提供有关您正在做什么的任何细节。但是，[此线程](https://stackoverflow.com/questions/7736816/using-service-timertask-and-broadcastreceiver-to-check-for-various-updates)上的代码可能会提供一些指导。

# python - 熊猫中的条件替换

> ID：16153530
> 
> 赞同：9
> 
> 时间：2013-04-22T17:51:55.550
> 
> 标签：python, replace, conditional, pandas

我有一个跨越几年的数据框，并且在某些时候他们更改了种族代码。所以我需要重新编码以年份为条件的值 - 这是同一数据框中的另一列。例如 1 到 3、2 到 3、3 到 4 等等：

```
old = [1, 2, 3, 4, 5, 91]
new = [3, 3, 4, 2, 1, 6] 
```

这仅适用于 1996 年至 2001 年。同一列（种族）中其他年份的值不得更改。为了避免过多的低效循环，我尝试了：

```
 recode_years = range(1996,2002)
    for year in recode_years:
        df['ethnicity'][df.year==year].replace(old, new, inplace=True) 
```

但是数据框中的原始值没有改变。replace 方法本身正确替换并返回了新值，但 inplace 选项在应用条件时似乎不会影响原始数据框。这对于有经验的 Pandas 用户来说可能是显而易见的，但肯定有一些简单的方法可以做到这一点，而不是循环遍历每个单个元素？

编辑（x2）：她是另一种方法的一个例子，它也不起作用（'替换长度必须等于系列长度'和“TypeError：数组不能安全地转换为所需的类型”）：

```
oldNewMap = {1:2, 2:3}
df2 = DataFrame({"year":[2000,2000,2000,2001,2001,2001],"ethnicity":[1,2,1,2,3,1]})
df2['ethnicity'][df2.year==2000] = df2['ethnicity'][df2.year==2000].map(oldNewMap) 
```

编辑：这似乎是特定于安装/版本的问题，因为这在我的另一台计算机上运行良好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T17:59:58.753

以不同的方式来做可能会更简单：

```
oldNewMap = {1: 3, 2: 3, 3: 4, 4: 2, 5: 1, 91: 6}
df['ethnicity'][df.year==year] = df['ethnicity'][df.year==year].map(oldNewMap) 
```

# python - Python 独占循环

> ID：16153536
> 
> 赞同：4
> 
> 时间：2013-04-22T17:52:21.430
> 
> 标签：python

我想遍历 a`list`并将当前元素与其他元素分开。像这样 ：

```
for e in the_list:
    function_call(e, <the_list but e>) 
```

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:54:06.350

You could use `enumerate` and slice the list:

```
for index, elem in enumerate(the_list):
    function_call(elem, the_list[:index] + the_list[index + 1:]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T18:05:57.297

一个很好的解决方案，读起来（合理地）好，不需要搞乱索引。

```
>>> from itertools import combinations
>>> data = [1, 2, 3, 4]
>>> for item, rest in zip(data, 
                          reversed(list(combinations(data, len(data)-1)))):
...     print(item, rest)
... 
1 (2, 3, 4)
2 (1, 3, 4)
3 (1, 2, 4)
4 (1, 2, 3) 
```

# c# - List all Top Level Folders in Google Drive api

> ID：16153539
> 
> 赞同：1
> 
> 时间：2013-04-22T17:52:27.417
> 
> 标签：c#, .net, google-drive-realtime-api

IAM Working on app which use Google Drive API. Could I get top level folders in the Google drive using drive API? What is the Scope For that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T09:21:13.457

我知道这是旧的，但我今天遇到了同样的问题。这就是我解决它的方法：

```
function showTopLevel() { 
  var folders = DriveApp.getRootFolder().getFolders();
  while (folders.hasNext()) {
    var folder = folders.next();
    Logger.log(folder.getName());
  }
} 
```

# powershell - 显示自定义 PSObject 的数组属性

> ID：16153544
> 
> 赞同：0
> 
> 时间：2013-04-22T17:52:48.110
> 
> 标签：powershell

我对 PowerShell 还是很陌生，所以为了更好地学习技巧，我正在开发一个 Powershell 函数来返回我们网络中计算机的一些基本概述信息。我已经得到了我正在寻找的所有东西，但我不知道如何显示[WMI](https://en.wikipedia.org/wiki/Windows_Management_Instrumentation)查询返回的数组的所有结果，例如硬盘或[MAC 地址](http://en.wikipedia.org/wiki/MAC_address)。

例如，现在我正在使用 WMI 查询“DHCPEnabled = TRUE”来检测活动的[NIC](http://en.wikipedia.org/wiki/Network_interface_controller)并检索它们的 MAC 地址 - 但在笔记本电脑上，理论上查询可能会返回有线和无线 NIC。

然后，此命令的输出将显示我创建的自定义[PSObject](https://msdn.microsoft.com/en-us/library/system.management.automation.psobject%28v=vs.85%29.aspx)，但在生成的 PSObject 中，该属性`MACAddress`将显示为空白。结果就在那里，我可以通过管道或[Select-Object](http://technet.microsoft.com/en-us/library/hh849895.aspx)获得它们，但我不知道如何将它们保存为报告或以其他方式“美化”它们。

这是我现在拥有的工作函数，它假设返回的第一个结果是我唯一关心的结果。同样，在此示例中，这主要是对硬盘和 MAC 地址的关注，但我想了解其背后的概念以供将来参考。

```
Function Get-PCInfo
{
    [CmdletBinding()]
    param(
    [Parameter(Mandatory = $true,
               Position = 0,
               ValueFromPipeline = $true,
               ValueFromPipelineByPropertyName = $true)]
    [Alias("CName")]
    [string[]] $ComputerName
    )

    foreach($cName in $ComputerName)
    {
        Write-Verbose "Testing connection to $cName"
        If (Test-Connection -ComputerName $cName -BufferSize 16 -Quiet)
        {
            Write-Verbose "Connection successful."
            Write-Verbose "Obtaining WMI objects from $cName"
            $cs = Get-WMIObject -Class Win32_ComputerSystem -ComputerName $cName
            $csp = Get-WMIObject -Class Win32_ComputerSystemProduct -ComputerName $cName
            $os = Get-WMIObject -Class Win32_OperatingSystem -ComputerName $cName
            $bios = Get-WMIObject -Class Win32_BIOS -ComputerName $cName
            $cpu = Get-WMIObject -Class Win32_Processor -ComputerName $cName
            $hdd = Get-WMIObject -Class Win32_LogicalDisk -Filter 'DeviceID = "C:"' -ComputerName $cName
            $network = Get-WMIObject -Class Win32_NetworkAdapterConfiguration -Filter 'DHCPEnabled = True' -ComputerName $cName

            if ($hdd -is [System.array])
            {
                Write-Verbose "Multiple hard drives detected; using first result"
                $hddResult = $hdd[0]
            } else {
                Write-Verbose "Single hard drive detected"
                $hddResult = $hdd
            }

            if ($network -is [System.array])
            {
                Write-Verbose "Multiple network cards detected; using first result"
                $networkResult = $network[0]
            } else {
                Write-Verbose "Single network card detected"
                $networkResult = $network
            }

            Write-Verbose "Creating output table"
            $props = @{'Name' = $cs.Name;
                       'OSVersion' = $os.Version;
                       'ServicePack' = $os.ServicePackMajorVersion;
                       'HardDiskSize' = $hddResult.Size;
                       'SerialNumber' = $bios.serialNumber;
                       'Model' = $cs.Model;
                       'Manufacturer' = $cs.Manufacturer;
                       'Processor' = $cpu.Name;
                       'RAM' = $cs.TotalPhysicalMemory;
                       'MACAddress' = $networkResult.MACAddress}

            Write-Verbose "Creating output object from table"
            $result = New-Object -TypeName PSObject -Property $props

            Write-Verbose "Outputting result"
            $resultArray += @($result)
        } else {
            Write-Verbose "Connection failure"
            $resultArray += @($null)
        }
    }

    Write-Output $resultArray
} 
```

这是一个运行示例，为了更清楚起见。数据是假的，但这是结果的格式：

PS> 获取-PCInfo localhost

```
SerialNumber : 12345
MACAddress   :
RAM          : 4203204608
Manufacturer : Computers, Inc.
Processor    : Intel(R) Core(TM) i5-2400 CPU @ 3.10GHz
HardDiskSize : 500105736192
OSVersion    : 6.2.9200
Name         : PC1
Model:       : Super Awesome Computer
ServicePack  : 0 
```

我想将此发送到 ConvertTo-HTML 或其他东西以制作漂亮的报告，但由于`MACAddress`是空白的，我无法从中做出任何漂亮的东西。我想看到的是这样的：

```
SerialNumber   : 12345
MACAddress[0]  : 00-11-22-33-44-55
MACAddress[1]  : 88-99-AA-BB-CC-DD
...
HardDiskSize[0]: 500105736192
HardDiskSize[1]: 500105736192 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:16:32.347

我不太确定我明白了吗？这取决于您希望它们如何输出。您可以通过多种方式做到这一点。HDD 和 MAC 地址的示例：

```
....
'HardDiskSize' = ($hdd | % { "HDD $($_.DeviceID) - $($_.Size)" }) -join "`n"
....
'MACAddress' = ($networkResult | Select-Object -ExpandProperty MACAddress) -join "`n"
} 
```

你可以试试这个（未经测试）。将编辑的部分复制并粘贴回来：

```
$hdd = @(Get-WMIObject -Class Win32_LogicalDisk -Filter 'DeviceID = "C:"' -ComputerName $cName)
$network = @(Get-WMIObject -Class Win32_NetworkAdapterConfiguration -Filter 'DHCPEnabled = True' -ComputerName $cName)

$props = @{'Name' = $cs.Name;
            'OSVersion' = $os.Version;
            'ServicePack' = $os.ServicePackMajorVersion;
            'SerialNumber' = $bios.serialNumber;
            'Model' = $cs.Model;
            'Manufacturer' = $cs.Manufacturer;
            'Processor' = $cpu.Name;
            'RAM' = $cs.TotalPhysicalMemory;

Write-Verbose "Creating output object from table"
$result = New-Object -TypeName PSObject -Property $props

# Add MAC addresses
for ($i = 0; $i -lt $network.Count; $i++) {
    Add-Member -InputObject $result -MemberType NoteProperty -Name "MACAddress[$i]" -Value $network[$i].MACAddress
}

# Add HDDs
for ($i = 0; $i -lt $hdd.Count; $i++) {
    Add-Member -InputObject $result -MemberType NoteProperty -Name "HardDiskSize[$i]" -Value $hdd[$i].Size
} 
```

# c# - 如何将 WriteableBitmap 保存为具有透明度的 png 图像

> ID：16153545
> 
> 赞同：1
> 
> 时间：2013-04-22T17:52:56.870
> 
> 标签：c#, save, png, windows-phone

我从头像中裁剪出圆形区域。我需要获取图像的像素字节 [] 并以 base64 格式上传到服务器。不幸的是，方法 SaveJpeg() 不支持所选圆圈之外的透明度像素。我尝试了 ImageTools 库，但除了 WindowsPhone 之外没有其他平台无法从生成的字节 [] 创建 png 图像。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:05:23.380

没有平台 API 可以做到这一点。ToolStack PNG 库提供了一个轻量级的解决方案。

[http://toolstack.com/libraries/pngwriter](http://toolstack.com/libraries/pngwriter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-28T10:01:52.080

这段代码对我有用。在您尝试之前，请确保您的可写位图具有透明背景（您可以通过分配给图像控制器图像源来检查）。如果不是，请使背景从它来自的控制器透明。

```
var localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
var file = await localFolder.CreateFileAsync("temp.png", CreationCollisionOption.ReplaceExisting);
using (var ras = await file.OpenAsync(FileAccessMode.ReadWrite, StorageOpenOptions.None))
{
     WriteableBitmap bitmap = imageSource;
     var stream = bitmap.PixelBuffer.AsStream();
     byte[] buffer = new byte[stream.Length];
     await stream.ReadAsync(buffer, 0, buffer.Length);
     BitmapEncoder encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, ras);
     encoder.SetPixelData(BitmapPixelFormat.Bgra8, BitmapAlphaMode.Straight, (uint)bitmap.PixelWidth, (uint)bitmap.PixelHeight, 96.0, 96.0, buffer);
     await encoder.FlushAsync();
} 
```

看看吧！

# php - How to use data collected from any form in Controller?

> ID：16153547
> 
> 赞同：0
> 
> 时间：2013-04-22T17:53:06.287
> 
> 标签：php, laravel

I am a beginner and I am not getting any tutorial or something which can help me understand how to process data collected from forms in Laravel.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:54:03.190

Use [Laravel's `Input` class](http://laravel.com/docs/input#input):

```
$name = Input::get('name'); 
```

This return data from both `$_GET` & `&_POST` (and some more).

# android - 在警报对话框中更改编辑文本的光标颜色

> ID：16153549
> 
> 赞同：2
> 
> 时间：2013-04-22T17:53:16.447
> 
> 标签：android, android-layout

我的问题是，我在编辑文本字段中有一个带有黑色光标的警报对话框。我想把这个颜色改成白色。您可以通过以下方式轻松地将edittext的颜色设置为白色：

```
 edittext.setTextColor(Color.WHITE); 
```

问题是，光标颜色仍然是黑色。所以我做了一些研究，发现了一些关于通过添加以下代码更改xml文件中光标颜色的文章：

```
 android:textCursorDrawable="@drawable/white_cursor" 
```

white_cursor.xml 看起来像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <size android:width="1dp"/>
    <solid android:color="#FFFFFF"  />
    </shape> 
```

所以我在 xml 文件中生成了 edittext 并执行 findById() 函数：

```
 edittext = (EditText) findViewById(R.id.eText); 
```

但是当调用 show() 方法时，应用程序崩溃了。有谁知道我如何在我的代码中更改光标颜色或如何在没有错误的情况下实现它？谢谢

编辑 1 个警报对话框代码：

```
 input = (EditText) findViewById(R.id.eText);
    InputFilter[] filters = new InputFilter[1];
    filters[0] = new InputFilter.LengthFilter(20);
    input.setFilters(filters);
    input.setTextColor(Color.WHITE);

    alertbuilder = new AlertDialog.Builder(this,AlertDialog.THEME_HOLO_DARK);
    alertbuilder.setTitle("Enter the levelname!");
    alertbuilder.setMessage("To change the levelname after it has been created, tap and hold the icon of the level.");

    alertbuilder.setView(input);

    alertbuilder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(final DialogInterface dialog, final int whichButton) {
    Editable value = (Editable) input.getText();
      // Do stuff
        dialog.dismiss();

      }

    });

    alertbuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
          dialog.dismiss();
      }
    });
    alertadd=alertbuilder.create();
    alertadd.show(); //crash here 
```

编辑2日志猫：

```
04-22 20:00:34.217: D/OpenGLRenderer(2475): Flushing caches (mode 0)
04-22 20:00:37.216: D/Input(2475): VelocityTracker: int datax = 15
04-22 20:00:37.216: D/Input(2475): VelocityTracker: int m_velocity_magnify_x = 1.500000
04-22 20:00:37.216: D/Input(2475): VelocityTracker: int datay = 20
04-22 20:00:37.216: D/Input(2475): VelocityTracker: int m_velocity_magnify_y = 2.000000 
```

我的 logcat 中没有收到错误消息。我实际上得到了一个类文件编辑器 - 找不到源 - 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:59:29.707

我认为问题出在这里：

```
input = (EditText) findViewById(R.id.eText); 
```

`EditText`如果它是 Activity/Fragment 布局的一部分，则不能将其设置为 Dialog 内容。

我建议你创建一个文件`dialog_content.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<EditText 
    style="@style/yourEditTextStyle"
    android:id="@+id/myEditTextId"
    android:layout_height="wrap_content"
    android:layout_width="match_parent" /> 
```

并`EditText`以这种方式创建：

```
input = (EditText) LayoutInflater.from(this).inflate(R.layout.dialog_content, null); 
```

# elf - readelf error: not an elf file, wrong magic bytes at the start

> ID：16153550
> 
> 赞同：2
> 
> 时间：2013-04-22T17:53:24.177
> 
> 标签：elf, readelf

I am trying to learn and use Elfreader by compiling a simple hello world program to a elf file as-

```
gcc -o test test.c 
```

The file compiles correctly and runs perfect. But when I try to run ReadElf on it by

```
readelf -h test 
```

it returns

```
readelf: Error: Not and ELF file - it has the wrong magic bytes at the start 
```

What do you think I am doing wrong, or is there a problem with my linker script? Let me know if you need any additional info from me.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-04-10T08:24:32.817

您可以检查文件格式类型如下：

```
$ objdump -t hello.exe 
```

hello.exe：文件格式pei-i386

也许我猜你的文件不是精灵格式。

# ruby - 如何为rails where方法引用连接表中的值？

> ID：16153551
> 
> 赞同：0
> 
> 时间：2013-04-22T17:53:25.873
> 
> 标签：ruby, ruby-on-rails-3

这是一个菜鸟级别的问题。

我有两个模型：通过表格图表加入的患者和提供者。

我使用了关联“has_many :through”而不是“has_and_belongs_to_many”，因为我需要在图表表中添加另一列 [称为patient_mrn]，我知道我无法使用“has_and_belongs_to_many”场景。

患者模型具有：

```
 has_many :charts
    has_many :providers, :through => :charts 
```

提供者模型具有：

```
 has_many :charts
  has_many :patients, :through => :charts 
```

并且图表模型具有：

```
 belongs_to :patient
    belongs_to :provider 
```

我试图在 Patient 模型上调用 where 方法来检索所有具有以下条件的患者：

- 该患者的图表连接表中的 provider_id 等于给定值 [@exam.provider_id] 和

- 该患者的 Chart 连接表中的 patient_mrn 等于给定值 [@exam.patient_mrn]。

这是我想尝试的，但它显然不起作用。我会误入歧途吗？

```
@patient = Patient.where(:patient.chart[provider_id] => @exam.provider_id,
          :patient.chart[patient_mrn] => @exam.patient_mrn) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:21:40.023

为了在模型的关联表上指定条件，您需要执行连接表[。](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)（查看有关[指定条件](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables)的部分以获取您要执行的操作的示例）。

但是，简而言之，您想加入您的`chart`表并在其上指定条件。您的查询应该类似于：

```
@patients = Patient.joins(:charts).where(:charts => { :provider_id => @exam.provider_id, :patient_mrn => @exam.patient_mrn }) 
```

这应该返回所有具有给定and`Patients`的人。`chart``provider_id``patient_mrn`

# ruby - 按数组键对哈希数组进行排序

> ID：16153553
> 
> 赞同：4
> 
> 时间：2013-04-22T17:53:31.037
> 
> 标签：ruby, arrays

我正在尝试过滤和重新排序哈希数组。过滤器和顺序由另一个字符串数组定义，它们表示`"slug"`哈希键的值。结果数组应仅包含其`"slug"`键值包含在 slugs 数组中并按相同顺序排序的哈希值。如果我有第一个数组：

```
data = [
  {
    "slug" => "lemon",
    "label" => "Lemon Label"
  },
  {
    "slug" => "table",
    "label" => "Table Label"
  },
  {
    "slug" => "peach",
    "label" => "Peach Label"
  },
  {
    "slug" => "strawberry",
    "label" => "Strawberry Label"
  },
  {
    "slug" => "bread",
    "label" => "Bread Label"
  },
  {
    "slug" => "orange",
    "label" => "Orange Label"
  }
] 
```

第二个数组为：

```
ordered_keys = ["orange", "lemon", "strawberry"] 
```

那么，结果应该是这样的数组：

```
result = [
  {
    "slug" => "orange",
    "label" => "Orange Label"
  },
  {
    "slug" => "lemon",
    "label" => "Lemon Label"
  },
  {
    "slug" => "strawberry",
    "label" => "Strawberry Label"
  }
] 
```

我设法通过以下方式获得了过滤功能：

```
result = data.select{|x| ordered_keys.include? x.slug} 
```

但我找不到一个聪明的方法来订购一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T18:22:03.267

用于`map`将您的有序键数组转换为相应的哈希。输入数组`map`的顺序定义输出数组的顺序。

```
ordered_keys.map{|k| data.find{|h| h["slug"] == k}} 
```

# mysql - MySQL: Searching number column with string parameter

> ID：16153560
> 
> 赞同：3
> 
> 时间：2013-04-22T17:53:48.780
> 
> 标签：mysql

Let's say we have a record in table 'orders' with id=1\. This query:

```
SELECT * FROM 'orders' WHERE id = 'abc1' 
```

won't return mentioned record. But this query:

```
SELECT * FROM 'orders' WHERE id = '1abc' 
```

will return the record with id=1\. This is because when MySQL converts string to number 'abc1' becomes 0, but '1abc' becomes 1\. Is there a nice way to make MySQL search strictly for records with id from query, i.e. not return the record with id=1 in both mentioned cases?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:01:35.973

如何使用：

```
SELECT * FROM 'orders' WHERE id LIKE '1abc' COLLATE utf8_bin 
```

甚至

```
SELECT * FROM 'orders' WHERE STRCMP(id, '1abc') = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-08T10:40:46.107

我在提交 SQL 查询之前用 PHP 处理了它

```
$idTest = '1abc';
if (is_numeric($id){
    $query = "SELECT * FROM 'orders' WHERE id = '$idTest'"
} 
```

`$idTest`如果有字符串，这将阻止提交查询

# ios - 布局菜单屏幕IOS的最佳方式

> ID：16153564
> 
> 赞同：0
> 
> 时间：2013-04-22T17:53:56.257
> 
> 标签：ios, uiviewcontroller, modalviewcontroller

我目前有一个菜单屏幕，在加载应用程序时显示为根视图。选择新的字符选项会导致模态视图显示字符特定的特征（例如字符名称、高度等）。一旦用户单击继续，导航控制器就会以模态方式呈现，然后在导航控制器上控制视图的进展。您会说这是模态视图的不良做法吗？

如果我从一开始就使用导航控制器会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:07:42.650

这绝对是基于意见和特定用例的，但我通常更喜欢在模式视图中显示详细视图，而在导航控制器中显示应用程序的其余导航。这允许用户轻松地在整个应用程序中来回导航，而模式视图仅弹出特定项目的详细信息。

# authentication - ServiceStack 用户管理

> ID：16153565
> 
> 赞同：1
> 
> 时间：2013-04-22T17:53:58.717
> 
> 标签：authentication, servicestack, user-management

有没有办法使用 ServiceStack 管理用户？

我只发现`IUserAuthRepository`有一些方法可以通过姓名、电子邮件和 ID 获取用户的界面。但是如何获取用户列表（带有过滤器和合作）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:47:43.717

我认为其中一些取决于您存储数据的位置和方式。

如果您将数据存储在 SQL 数据库中，则应该有 3 个保存用户数据的表`User, UserAuth, UserOAuthProvider`。您想要的大部分用户数据可能都在 UserAuth 表中。至少，这似乎是最常被“OrmLiteAuthRepository”引用的表。`List<UserAuth>`要使用 OrmLite返回用户列表 ( )，您可以这样做

```
using (IDbConnection con = DbConnectionFactory.OpenDbConnection())
{
    var users = con.Select<UserAuth>();
} 
```

或者使用您喜欢的访问方式。

如果您不使用 SQL 数据库，它会有所不同。我认为您可以为 Redis 执行以下操作。我不认为“配置”是直截了当的，但看起来你是从访问哈希开始的。'HashId' 有两个选项。`hash:UserAuth:Email>UserId`当电子邮件地址是键时使用' '，`hash:UserAuth:UserName>UserId`当用户名是键时使用''。仅供参考，这些值可能会改变，但我不知道通过 ServiceStack 代码访问它们的方法。

```
using (IRedisClient client = RedisClientManager.GetClient())
{
    var userskeys = client.GetHashKeys("hash:UserAuth:Email>UserId").ToList();
    var users =  userskeys.Select(k => client.As<UserAuth>().GetById(k)).ToList();
} 
```

# java - 获取 servlet 中的 Html 上传按钮的文件路径

> ID：16153569
> 
> 赞同：0
> 
> 时间：2013-04-22T17:54:09.663
> 
> 标签：java, servlets

基本上，我试图从上传文件的位置（HTML 主页）获取文件的路径（c:/User/user/Desktop/filename.txt）并将其打印在 servlet 上。

# actionscript - Actionscript 2 - 如何检查电影剪辑是否存在于舞台的特定位置？

> ID：16153570
> 
> 赞同：0
> 
> 时间：2013-04-22T17:54:10.283
> 
> 标签：actionscript, position, exists, movie, clip

我正在使用 actionscript 2.0 进行 Flash 项目，我需要检查舞台的特定位置是否有影片剪辑。有那个功能吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:35:36.927

MovieClips 有 hitTest() 方法，它可以测试是否包含在它的矩形命中框中的点。（如果您的影片剪辑是圆形的，则可以通过检查到该点的中心距离是否超过影片剪辑的半径来准确地完成）。现在您只需要所有电影剪辑的列表。如果您将它们全部添加到 _root（不推荐），请执行以下操作：

```
for(var i:int = 0; i < _root.numChildren; i++) {
    if(_root.getChildAt(i).hitTest(x,y)) //x and y of your point
    return true; //or return the MovieClip/whatever you want
} 
```

否则，创建您赢得的 MovieClip 列表以进行检查。

# oracle - PLSQL Developer 10.0.2 在导出然后导入 Oracle 11g 表时丢失了所有表引用键？

> ID：16153574
> 
> 赞同：0
> 
> 时间：2013-04-22T17:54:24.907
> 
> 标签：oracle, plsql, oracle10g, oracle11g, plsqldeveloper

我使用PLSQL Developer 10.0.2（最新注册版本）导出Oracle 11g 表。导入这些表后，我发现所有表都丢失了引用键。我不想使用 SQL Plus。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:37:18.087

实际上这是一个 Pl/Sql Developer 内部错误。Allround Automations 公司已在其最新的 Pl/Sql Developer 10.0.5.1710 中修复了该问题。

# xpath - XPath 多重请求

> ID：16153578
> 
> 赞同：0
> 
> 时间：2013-04-22T17:54:34.037
> 
> 标签：xpath, selenium, selector

我正在尝试使用这样的 XPath 表达式从堆中选择一些数字元素：`//input[contains(@name, '[options]')][2]`

嗯，这行不通。我想要的是在页面上获取一些输入元素，它在'name'属性中包含'[options]'字符串，我想选择第二个。

例如，我在页面上有 3 个 'name' 元素，它们都有这个 '[options]' 值，所以我想用他的编号取其中唯一的一个。就像您可以使用页面上的第二个 //input[2] 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:11:58.357

```
(//input[contains(@name, '[options]')])[2] 
```

是你所追求的。

# jquery - Twitter 引导工具提示不起作用

> ID：16153582
> 
> 赞同：0
> 
> 时间：2013-04-22T17:54:46.713
> 
> 标签：jquery, html, twitter-bootstrap

我有这个 HTML：

```
<li><a href="<?php echo $home; ?>" title="Go Home" data-placement="bottom" rel="tooltip"><?php echo $text_home; ?></a></li> 
```

然后在一个外部文件中有这个代码：

```
function showtooltip() {
    $('a[rel="tooltip"], button[rel="tooltip"], input[rel="tooltip"]').tooltip({
        animation: true
    });
}

$(document).ready(function() {
   showtooltip();
}); 
```

但没有显示工具提示。我包括 jquery（最新的 2.0.0）和完整的 TB（2.3.1）问题在哪里？（请看第二次编辑也许有问题）

**编辑**我还包含了这个 CSS 文件：

```
<link href="/catalog/view/theme/viaenvia/stylesheet/bootstrap.min.css" rel="stylesheet">
<link href="/catalog/view/theme/viaenvia/stylesheet/font-awesome.css" rel="stylesheet">
<link href="/catalog/view/theme/viaenvia/stylesheet/bootstrap-responsive.min.css" rel="stylesheet"> 
```

所以我认为CSS不是问题

**EDIT2**我正在使用最新的 jQuery UI (1.10.2) 并且显然来自 jQuery UI 的 JS 和 CSS 正在覆盖 Twitter Bootstrap。这是我包含 CSS 的行（JS 包含在底部以提高性能）

```
<link rel="stylesheet" href="/catalog/view/theme/viaenvia/stylesheet/bootstrap.min.css" />
<link rel="stylesheet" href="/catalog/view/theme/viaenvia/stylesheet/font-awesome.css">
<link rel="stylesheet" href="/catalog/view/theme/viaenvia/stylesheet/bootstrap-responsive.min.css" />

<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/themes/ui-lightness/jquery-ui.css">
<link rel="stylesheet" href="/catalog/view/theme/viaenvia/stylesheet/style.css">
<link rel="stylesheet" href="/catalog/view/theme/viaenvia/stylesheet/flexslider.css">
<link rel="stylesheet" href="/catalog/view/theme/viaenvia/js/fancybox/jquery.fancybox.css"> 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:18:51.130

您的示例代码正在运行（请参阅this [fiddle](http://jsfiddle.net/MgcDU/3447/)），因此它可能是缺少 javascript 参考。

要使用工具提示，您需要在引用 jquery 之后包含`bootstrap.js`（与所有插件一起）或至少包含`bootstrap-tooltip.js`（参见[自定义下载页面上的选项）。](http://twitter.github.io/bootstrap/customize.html)

*（在下面的用户评论之后）*

我建议现在检查两件事：

*   在`Net`选项卡上，尝试查找`bootstrap.min.js`文件请求并查看它是否成功完成
*   在`Console`选项卡上，运行该选择器`$('a[rel="tooltip"], ...`以查看它是否找到标签；如果是这样，您应该可以调用类似`$('#element').tooltip('show')`的方法来测试工具提示是否已成功加载。

# jquery - jQuery JSON 提要没有被拉入

> ID：16153585
> 
> 赞同：1
> 
> 时间：2013-04-22T17:55:07.900
> 
> 标签：jquery, json

我们有一个来自数据库的 json 提要，该数据库按州列出了大学校园。我似乎无法将内容拉入页面。

我有一个[jsfiddle](http://jsfiddle.net/richcoy/uQftN/)设置。

简单的 HTML 代码：

```
<h2>Campuses</h2>
<div id="state"></div> 
```

jQuery：

```
$(document).ready(function () {
    $.getJSON("http://ml.uscm.org/ministries.json?state=CA&active=true",
        function (data) {
        $.each(data, function () {
            $.each(this, function (key, value) {
                $("#state").append(
                    "Name: " + value.name + "<br />" +
                    "City: " + value.city + "<br />" +
                    "State: " + value.state + "<br />");
            });
        });
    });
}); 
```

示例 json 的直接链接：

[http://ml.uscm.org/ministries.json?state=CA&active=true](http://ml.uscm.org/ministries.json?state=CA&active=true)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:04:55.850

你可以试试这个（使用jsonp，注意url中的回调参数）

```
$.getJSON("http://ml.uscm.org/ministries.json?state=CA&active=true&callback=?", function (data) {
    $.each(data, function (key, value) {
        $("#state").append(
            "Name: " + value.name + "<br />" +
            "City: " + value.city + "<br />" +
            "State: " + value.state + "<br />");
    });
}); 
```

[**在这里工作的小提琴。**](http://jsfiddle.net/uQftN/1/)[**在jQuery 网站**](http://api.jquery.com/jQuery.getJSON/) 上阅读更多关于`jsonP`.

# ruby-on-rails - jQuery UI 日期选择器不适用于 Rails

> ID：16153587
> 
> 赞同：4
> 
> 时间：2013-04-22T17:55:11.277
> 
> 标签：ruby-on-rails, jquery-ui

我正在尝试为我的 Rails 应用程序安装 jQuery UI Datepicker，基于：[https](https://github.com/joliss/jquery-ui-rails) ://github.com/joliss/jquery-ui-rails ，以及关于这个主题的修订版 Railscast 和无数试图让它工作的线程。无论我尝试什么，它似乎都不起作用。

**应用程序.js**

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.datepicker
//= require_tree .
//= require tinymce-jquery 
```

**应用程序.css**

```
 *= require jquery.ui.datepicker
 *= require_self
 *= require_tree . 
```

**新的.html.erb**

```
 <%= f.label :due_date %>
  <%= f.text_field :due_date %> 
```

**模型名.js.coffee**

```
jQuery ->
$('#modelname_due_date').datepicker (dateFormat: 'dd-mm-yy') 
```

这似乎是我完成这项工作所需的全部，但是我尝试了很多变化都无济于事。在 Chrome 中调试时不会向控制台抛出错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:03:36.813

尝试为您的输入字段设置一个类，如下所示：

```
<%= f.text_field :due_date,class: "modelname_due_date %> 
```

如果使用类选择器，则应更改 javascript 代码：

```
$('.modelname_due_date').datepicker (dateFormat: 'dd-mm-yy') 
```

然后您将触发 javascript 代码。

# c++ - 在 C++ 中生成一个统一的随机整数

> ID：16153589
> 
> 赞同：7
> 
> 时间：2013-04-22T17:55:28.697
> 
> 标签：c++, random

问题是我需要生成一个介于 0 到 999 之间的随机整数（用于研究数学猜想）。所有值都需要具有相同的出现概率。

我已经尝试过`rand()`，但是`RAND_MAX`32767 （在我的编译器上）这意味着仅`rand() % 1000`导致第一个 1-767 出现的可能性要大得多（这是假设所有可能性`rand()`首先具有相同的概率）。

我正在使用 Windows，所以`/dev/random`不是一个选项。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-22T17:59:56.903

您可以使用[`uniform_int_distribution`](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution)C++11 执行以下操作：

```
#include <iostream>
#include <random>

int main()
{
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_int_distribution<> dis(0, 999);

    for (int n=0; n<1000; ++n)
        std::cout << dis(gen) << ' ';
    std::cout << '\n';
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T18:00:08.580

您的模数观察是正确的，并且是无法经受数学审查的**几个**原因之一。`rand()`从[这里的注释](http://en.cppreference.com/w/cpp/numeric/random/rand)：

> 不保证产生的随机序列的质量。过去，rand() 的一些实现在产生的序列的随机性、分布和周期方面存在严重缺陷（在一个众所周知的示例中，低位位在调用之间简单地在 1 和 0 之间交替）。rand() 不推荐用于严重的随机数生成需求，例如密码学。

C++11 引入[了几个新的随机数生成器](http://en.cppreference.com/w/cpp/numeric/random)，它们遵循更严格的标准，可能适合您的目的。

如果您可以牺牲超过几个字节的开销（可以肯定地假设可以），我建议[`std::mersenne_twister_engine`](http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T17:59:43.887

我认为最简单的方法是扔掉区间中的数字`[32000, 32767]`，只将 应用于`% 1000`剩余的数字。这应该使您的分布更加均匀。

或者，您可以使用 boost 的随机/均匀分布组件（或 C++11 如果可用），因为它们将提供比`rand`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T18:04:22.477

问题是 rand() 为您提供域`[0,RAND_MAX]`上`RAND_MAX`的均匀分布变量，最有可能是 32767。您不能通过简单的乘法将此域映射到更大的域

```
u=(double)rand();
d=(double)RAND_MAX;
double div= u/d;
double res=div*interval_range; 
```

因为只有当 RAND_MAX 是 的偶数倍时，这才是正确的`interval_range`。但是，您将不会在更大的域中拥有所有值。但是，如果您的新的所需域小于`RAND_MAX`您的情况，您可以将生成的均匀分布截断`rand()`到您想要的域（本质上意味着拒绝`rand()`大于您所需域的值）。截断的均匀分布仍然是均匀的，因此您将在新域上拥有新的均匀分布变量（这将是更准确的条件分布）。统计示例：

![在此处输入图像描述](https://i.stack.imgur.com/lxhAa.png)

所以截断的均匀分布将有另一个“时刻”，描述它的参数（均值、std_dev、方差等）但将再次均匀。

示例代码：

```
int main{ 
    int o=RAND_MAX;
    std::map<int,int> m1;
    int min=0,max=999;

    for (int i=0; i<1000*9994240; ++i){//9994240=305*32768  32768=RAND_MAX+1
        int r=rand();
        if(r<=max){
            m1[r]++;
        }
    }
    for (auto & i : m1)
        std::cout << i.first << " : " << i.second << '\n';
} 
```

result: 0 : 42637 1 : 42716 2 : 42590 3 : 42993 4 : 42936 5 : 42965 6 : 42941 7 : 42705 8 : 42944 9 : 42707 10 : 42860 11 : 43012 12 : 42793 //... 995 : 42861 996 : 42911 997 : 42865 998 : 42877 999 : 43159

* * *

您可以通过这种方式在任何域上获得所需的结果：

```
#include <iostream>
#include <random>

int main()
{
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_int_distribution<> dis(0, 1000);

    for (int n=0; n<1000; ++n)
        std::cout << dis(gen) << ' ';
    std::cout << '\n';
} 
```

但是在这种情况下你真的应该使用 boost：

```
#include <iostream>
#include "boost/random.hpp"
#include "boost/generator_iterator.hpp"
using namespace std;

int main() {
      typedef boost::mt19937 RNGType;
      RNGType rng;
      boost::uniform_int<> zero_to_n( 0, 999 );
      boost::variate_generator< RNGType, boost::uniform_int<> >
                    dice(rng, zero_to_n);
          int n  = dice();

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:00:24.967

1.  使用 获取随机数`rand()`。

2.  将其除以`RAND_MAX`。您将获得一个介于 0 和 1 之间的浮点数。

3.  将此数字乘以 1000。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T18:00:53.003

计算机中没有“真正随机”这样的东西。我也不相信 1-767（或技术上，在这种情况下为 0-767）的机会明显高于任何其他数字。但是，如果您需要“更好”的随机数，那么 C++11 支持使用 Mersenne Twister，这是一种更高等级的随机数生成器。

更多信息在这里： [http ://www.cplusplus.com/reference/random/mt19937/](http://www.cplusplus.com/reference/random/mt19937/)

# php - Preg_replace - 保留换行符并清理一些文本

> ID：16153591
> 
> 赞同：0
> 
> 时间：2013-04-22T17:55:30.443
> 
> 标签：php, regex

```
$txt_unclean = trim(nl2br($_POST['txt_content']));
$txt_content = strip_tags($txt_unclean, '<b><i><u><br>');
$txt_br_replace = preg_replace("/[^a-zA-Z0-9 \!\,\?\.\n s]/", '', preg_replace("!(<br(?:\s?/)?>\s*){2,}!s", "<br />\n<br />\n", $txt_content)); 
```

好的。所以我只允许每个换行符有 2 个换行符。例如，如果有 9 个换行符，那么它将用两个换行符替换它。单独这样做，我得到了成功的结果。但是，问题是当我想使用这个正则表达式清理单词时：`/[^a-zA-Z0-9 \!\,\?\.\n s]/`

它基本上删除了所有换行符，但清理了单词。那么如何保留换行符呢？

例如：我想要这个：

```
StackOverflow is amazing@$#@#$#@#@#@!#@@!

I KNOW!@$!##$$#!!#$@(*$09@* 
```

根据我写的正则表达式，这应该是输出：

```
StackOverflow is amazing!!

I KNOW!!!!09 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:11:02.323

使用 filter_var 函数清理变量，链接到下面的文档。

[http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

> 它基本上删除了所有换行符，但清理了单词。那么如何保留换行符呢？

将 \s+ 替换为一个“空格”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:46:57.063

好的，我设法使它工作。如果它有任何缺陷，请告诉我。

这是我更改的变量：

```
$txt_br_replace = preg_replace("/[^a-zA-Z0-9 \!\,\?\.\r\n s (<br>)]/", '', preg_replace("!(<br(?:\s?/)?>\s*){2,}!s", "<br />\n<br />\n", $txt_content)); 
```

# .net - AutoMapper 配置文件和单元测试

> ID：16153592
> 
> 赞同：8
> 
> 时间：2013-04-22T17:55:36.137
> 
> 标签：.net, asp.net-mvc, nunit, ninject, automapper

我正在将我的 AutoMappers 从使用一个大型 AutoMapperConfiguration 类转换为使用实际配置文件。全局现在看起来像这样（暂时原谅 Open/Close 违规）

```
Mapper.Initialize(x =>
                       {
                          x.AddProfile<ABCMappingProfile>();
                          x.AddProfile<XYZMappingProfile>();
                          // etc., etc.
                  }); 
```

让我脱颖而出的关键部分和以前一直阻止我使用配置文件的障碍是我的 ninject 绑定。我永远无法让绑定工作。之前我有这个绑定：

```
Bind<IMappingEngine>().ToConstant(Mapper.Engine).InSingletonScope(); 
```

我已经迁移到这个绑定：

```
Bind<IMappingEngine>().ToMethod(context => Mapper.Engine); 
```

现在可以了，该应用程序正常运行，我有个人资料，一切都很好。

障碍现在在我的单元测试中。使用 NUnit，我将设置我的构造函数依赖项。

```
private readonly IMappingEngine _mappingEngine = Mapper.Engine; 
```

然后在我的 [Setup] 方法中，我将构建我的 MVC 控制器并调用 AutoMapperConfiguration 类。

```
[SetUp]
public void Setup()
{
    _apiController = new ApiController(_mappingEngine);
    AutoMapperConfiguration.Configure();
} 
```

我现在已经修改为。

```
[SetUp]
public void Setup()
{
    _apiController = new ApiController(_mappingEngine);

    Mapper.Initialize(x =>
                          {
                              x.AddProfile<ABCMappingProfile>();
                              x.AddProfile<XYZMappingProfile>();
                              // etc., etc.
                          });
} 
```

不幸的是，这似乎不起作用。当我点击使用映射的方法时，映射似乎没有被拾取，AutoMapper 抛出异常，说明映射不存在。关于如何/如何更改测试中的映射器定义/注入以解决此问题的任何建议？我猜 IMappingEngine 字段的定义是我的问题，但不确定我有什么选择。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:04:29.200

您遇到的问题是使用静态的结果，静态`Mapper.Engine`是某种包含 AutoMapper 配置的单例。按照惯例，*`Mapper.Engine`配置后不应更改*。所以，如果你想通过提供`AutoMapper.Profiler`每个单元测试来配置 Automapper，你应该避免使用它。

更改非常简单：将`AutoMapperConfiguration`它自己的实例添加到您的类的实例`AutoMapper.MappingEngine`中，而不是使用全局 static `Mapper.Engine`。

```
public class AutoMapperConfiguration 
{
    private volatile bool _isMappinginitialized;
    // now AutoMapperConfiguration  contains its own engine instance
    private MappingEngine _mappingEngine;

    private void Configure()
    {
        var configStore = new ConfigurationStore(new TypeMapFactory(), MapperRegistry.AllMappers());

        configStore.AddProfile(new ABCMappingProfile());
        configStore.AddProfile(new XYZMappingProfile());

        _mappingEngine = new MappingEngine(configStore);

        _isMappinginitialized = true;
    }

    /* other methods */
} 
```

ps：[完整样本在这里](https://gist.github.com/akimboyko/5449531)

# php - 在php中将两次相加

> ID：16153594
> 
> 赞同：0
> 
> 时间：2013-04-22T17:55:40.980
> 
> 标签：php, datetime, time

我希望将来自 sql 查询的两次相加。下面是我的代码。

```
$taskID = $row['taskID'];
$startTimeRaw = $row['startTime'];
$endTimeRaw = $row['endTime'];
$everyMinutesRaw = $row['everyMinutes'];
$startTime = $startTimeRaw->format('H:i:s');
$endTime = $endTimeRaw->format('H:i:s');
$everyMinutes = $everyMinutesRaw->format('H:i:s');

#$latestRunTime = $startTime;
$latestRunTimeRaw = $startTime + $everyMinutes;

echo $startTime."<BR>";
echo $everyMinutes."<BR>";
echo $latestRunTime."<BR>"; 
```

此代码返回以下内容

```
06:05:00
00:15:00
6 
```

返回的第三行应该是`06:20:00`，我该如何进行此更改。我玩过，`strtotime`但`->format()`似乎都没有得到正确的答案。想法？

使用另一个答案中包含的数据，我有这个

```
$latestRunTime = strtotime($startTime) + strtotime($everyMinutes); 
```

它输出

```
2733243600 
```

如果我格式化，我得到以下

```
Fatal error: Call to a member function format() on a non-object in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:21:25.390

这似乎是你所追求的：

```
<?php
$period = new DatePeriod(
        new DateTime('06:05:00'),
        DateInterval::createFromDateString('15 minutes'),
        new DateTime('07:00:00'));
foreach($period as $interval){
        echo $interval->format('c').PHP_EOL;
} 
```

结果：

```
2013-04-22T06:05:00+02:00
2013-04-22T06:20:00+02:00
2013-04-22T06:35:00+02:00
2013-04-22T06:50:00+02:00 
```

您也可以使用`new DateInterval('PT15M')`, 或更正式地从某个时间开始：

```
new DateInterval('PT'.$everyMinutesRaw->format('H\Hi\Ms\S')); 
```

如果您对所有间隔不感兴趣，但只想要按照您的示例的第一个间隔：

```
 $startTimeRaw->add(new DateInterval('PT'.$everyMinutesRaw->format('H\Hi\Ms\S')));
 echo $startTimeRaw->format('H:i:s'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T08:06:13.633

使用这个功能

```
function sum_the_time($time1, $time2) {
  $times = array($time1, $time2);
  $seconds = 0;
  foreach ($times as $time)
  {
    list($hour,$minute,$second) = explode(':', $time);
    $seconds += $hour*3600;
    $seconds += $minute*60;
    $seconds += $second;
  }
  $hours = floor($seconds/3600);
  $seconds -= $hours*3600;
  $minutes  = floor($seconds/60);
  $seconds -= $minutes*60;
  if($seconds < 9)
  {
  $seconds = "0".$seconds;
  }
  if($minutes < 9)
  {
  $minutes = "0".$minutes;
  }
    if($hours < 9)
  {
  $hours = "0".$hours;
  }
  return "{$hours}:{$minutes}:{$seconds}";
} 
```

在每个地方使用此功能，只需在需要时调用该功能..谢谢

# php - 带有可调用提示的 PHP 函数参数...可以为 NULL 吗？

> ID：16153596
> 
> 赞同：3
> 
> 时间：2013-04-22T17:55:47.220
> 
> 标签：php, default-value, type-hinting

我想要一个接受参数的 PHP 函数`A`，我已经给出了类型提示`callable`。麻烦的是在某些情况下我希望能够传递`NULL`或类似的东西，作为参数值，表明尚未提供回调。我收到以下错误：

```
"Argument must be callable, NULL given". 
```

请问有什么想法可以实现吗？

为了回应发布的答案和问题......

PHP版本是5.4.14

代码是...

```
class DB
{
    protected function ExecuteReal($sqlStr, array $replacements, callable $userFunc, $allowSensitiveKeyword)
    {
        ...
        if( $userFunc != NULL && is_callable($userFunc) )
            $returnResult = $call_user_func($userFunc, $currRow);
        ...
    }

    ...
    public function DoSomething(...)
    {
        $result = $this->ExecuteReal($queryStr, Array(), NULL, TRUE);   
        ...
    }
} 
```

在上面的代码片段中，我不需要使用任何数据进行回调，因此我无需传入可调用对象，而是传入 NULL。但这是错误消息的原因。

解决方案是下面的答案......谢谢大家:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T18:04:51.167

当你使用类型提示时（只有`array` `interface`s 和`class`es 可以类型提示/直到 php 5.6/。/since 7.0 也可以类型提示标量类型/），你可以将参数的默认值设置为 null。如果你愿意，让参数是可选的。

```
$something = 'is_numeric';
$nothing = null;

function myFunction(Callable $c = null){
      //do whatever

} 
```

所有作品：

```
 myFunction();
 myFunction($nothing);
 myFunction($something); 
```

在这里阅读更多：http: [//php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T18:03:52.457

您只能键入提示对象和数组。如果函数声明如下，类型提示变量可以为 null：

`function aFn($required, MyCallable $optional=null){ /*do stuff */}`

where`MyCallable`是类名或关键字`Array`。

# python - 我应该如何处理一个“错误”命名的 dll？

> ID：16153597
> 
> 赞同：0
> 
> 时间：2013-04-22T17:55:56.287
> 
> 标签：python, windows, mingw, msys

我正在尝试使用 Mingw 在 Windows 上编译一个 autodiff python 库 pyadolc。它需要 boost python 来调用底层的 c++ 库 adol-c。

我首先用 mingw 编译了 boost_python 库（dll）。生成的 dll 命名为 libboost_python-mgw46-mt-1_53.dll 和 libboost_python-mgw46-mt-1_53.dll.a，分别位于 /mingw/bin 和 /mingw/lib 中。

然后，当我构建 pyadolc 时，构建脚本会尝试使用命令 -lboost_python。它失败了，因为 dll 被命名为 libboost_python-mgw46-mt-1_53.dll，而不是 libboost_python.dll。

所以我在 /mingw/bin 中将 dll 重命名为 libboost_python.dll。它工作正常，一切都很好。

但是，当我使用 python shell 时

进口 adolc

它给了我一个错误： ImportError: No dll found for _adolc (类似的东西)。然后我发现是因为它在寻找libboost_python-mgw46-mt-1_53.dll。

我的问题是：dll 命名是如何工作的？处理这种情况的正确方法是什么？我应该修改构建脚本还是应该重命名 dll？我知道在 linux 中，我可能可以创建一个 libboost_python.so 到 libboost_python-xxxx-mt-1_53.so 的符号链接。但是在 Windows xp 中，文件的符号链接并不是那么容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:08:07.310

最好的可能性是将构建脚本更改为指向`-lboost_python-mgw46-mt-1_53.dll`

如果要重命名 `libboost_python-mgw46-mt-1_53.dll`，则必须重命名`libboost_python-mgw46-mt-1_53.dll.a`为。

经常有`dll's`相互引用，如果你现在，只有重命名，原来的名字是找不到的。

所以不要`rename`，而是使用`copy`

复制

`libboost_python-mgw46-mt-1_53.dll.a`至`libboost_python.a`

并复制

`libboost_python-mgw46-mt-1_53.dll`至`libboost_python.dll`

使用这种方法，您有两个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:09:19.180

有关如何命名和找到 dll 的信息在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)；如果您使用的是 Windows Vista 或更高版本，则可以创建符号链接，对于旧版本，您可以使用 sysinternals.com 的 junction

# jquery - 从 JSON 中的多维数组中检索数组

> ID：16153600
> 
> 赞同：0
> 
> 时间：2013-04-22T17:56:06.840
> 
> 标签：jquery, arrays, json

以下是我的 JSON 输出：

```
{
    "BILLINGINFO": [
        {
            "CUST_REQ_BILL_DATE": "15",
            "BILL_MONTH": "03",
            "CONSOLIDATION_CRITERIA": "016",
            "CONSOLIDATION_OPTION": "A",
            "SPLIT_LINES": "",
            "BILL_IN_ARREARS": "X",
            "BILL_CREATE_DATE": "02"
        }
    ],
    "DROPDOWNS": [
        {
            "FIELD": "CUST_REQ_BILL_DATE",
            "VALUE": "01",
            "TEXT": "1st of month"
        },
        {
            "FIELD": "CUST_REQ_BILL_DATE",
            "VALUE": "02",
            "TEXT": "2nd of month"
        }
   ]
} 
```

我仍在学习 jquery，但不确定如何检索 BILLINGINFO 和 DROPDOWN 数组的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:58:03.003

假设这个 JSON 存储在一个名为`obj`. 然后你会使用：

```
obj.BILLINGINFO
// and
obj.DROPDOWNS 
```

或者：

```
obj["BILLINGINFO"]
obj["DROPDOWNS"] 
```

参考：[JavaScript 属性访问：点符号与括号？](https://stackoverflow.com/questions/4968406/javascript-property-access-dot-notation-vs-brackets)

要遍历它们，您可以使用以下内容（需要适用于每个）：

```
for (var i = 0; i < obj.BILLINGINFO.length; i++) {
    var current = obj.BILLINGINFO[i];
    // Work with `current` and you can use
    // current.CUST_REQ_BILL_DATE, current.BILL_MONTH, etc.
} 
```

所以没有必要为此使用 jQuery。但是循环的一个选项是使用`each`：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:57:49.860

您可以使用

```
$.parseJson 
```

解析它的函数

# matlab - Matlab：矩阵操作：更改二进制矩阵中中心像素周围的像素值

> ID：16153603
> 
> 赞同：1
> 
> 时间：2013-04-22T17:56:16.430
> 
> 标签：matlab

我今天还有一个问题：我有一个二进制矩阵t，其中1代表河道，0代表洪水平面和周围的山脉：

```
t = Alog>10;
figure
imshow(t)
axis xy 
```

为了进一步计算，我想在每个方向上将河道的面积扩大几个像素。一般来说，我希望在图像中显示更宽的通道，以便在以后的水力模型中包含更大的区域。

这是我的尝试，它在某些地区确实有效，但在河流与 xy 轴对角线的地区，它不会拓宽河道。似乎有一种接近这个的流程，我不能完全理解。

```
[q,o] = find(t == 1);   

qq = zeros(length(q),11);
oo = zeros(length(o),11);

% add +-5 pixel to result
for z=1:length(q)
    qq(z,:) = q(z)-5:1:q(z)+5;
    oo(z,:) = o(z)-5:1:o(z)+5;
end
% create column vectors
qq = qq(:);
oo = oo(:);

cords = [oo qq]; % [x y]

% remove duplicates
cords = unique(cords,'rows');

% get limits of image
[limy limx] = size(t);

% restrict to x-limits
cords = cords(cords(:,1)>=1,:);
cords = cords(cords(:,1)<=limx,:);

% restrict to y-limits
cords = cords(cords(:,2)>=1,:);
cords = cords(cords(:,2)<=limy,:);

% test image
l = zeros(size(img));
l(sub2ind(size(l), cords(:,2)',cords(:,1)')) = 1;
figure
imshow(l)
axis xy 
```

这是我得到的图像：

它确实在某些领域拓宽了渠道，但总的来说，我的方法似乎存在缺陷。当我在像素的对角线上使用相同的方法时，它根本不会加宽线，因为它只会创建更多对 [1 1; 2 2; 3 3; ETC]。有没有更好的方法来解决这个问题，甚至是图像处理领域的东西？具有设定直径的模糊滤镜的工作方式应该有点相似，但我找不到任何有用的东西......

PS：我不被允许添加图片，虽然我已经有 10 个代表，所以这里是直接链接：

[http://imageshack.us/a/img14/3122/channelthin.jpg](http://imageshack.us/a/img14/3122/channelthin.jpg) [http://imageshack.us/a/img819/1787/channelthick.jpg](http://imageshack.us/a/img819/1787/channelthick.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:11:41.230

您可以应用图像处理中的[形态学操作](http://en.wikipedia.org/wiki/Mathematical_morphology)。在您的示例中可以使用[形态膨胀。](http://www.mathworks.com/help/images/ref/bwmorph.html)

在图像处理工具箱中，您可以使用[bwmorth](http://www.mathworks.com/help/images/ref/bwmorph.html)命令`BW2 = bwmorph(BW,'dilate')`或 imdilate 命令`IM2 = imdilate(IM,SE)`。

`IM`您的图像在哪里，`SE`是结构元素。您可以设置`SE = ones(3);`将二进制图像扩大“一个像素” - 但可以根据您的应用程序进行更改。或者，如果需要，您可以使用相同的结构元素多次放大图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:17:52.113

如果你有图像处理工具箱，你应该使用[imdilate](http://www.mathworks.com/help/images/ref/imdilate.html)函数。这执行形态[膨胀操作](http://en.wikipedia.org/wiki/Dilation_%28morphology%29)。试试下面的代码：

```
SE = strel('square',3);
channelThick = imdilate(channelThin,SE); 
```

其中 SE 是一个 3x3 方形[结构元素](http://www.mathworks.com/help/images/ref/strel.html)，用于扩展存储在 channelThin 中的图像。这会将 channelThin 中的区域在每个方向上扩展一个像素。要扩展更多，请使用更大的结构元素或多次迭代。

# android - 在eclipse中编译bash shell脚本

> ID：16153605
> 
> 赞同：0
> 
> 时间：2013-04-22T17:56:22.873
> 
> 标签：android, eclipse, cocos2d-android

```
bash ${workspace_loc: /com.todperkings.moleitx.moleitx}/build_native.sh NDK_DEBUG=1 V=1 
```

它是windows 7上android中的cocos-2dx项目。如何在eclipse上运行这个构建命令。Cygwin 已安装。

为Android构建和货币化游戏应用程序我正在尝试遵循本教程，错误是教程操作系统是mac，我正在运行windows 7

# python-2.7 - 整合轨道轨迹 2

> ID：16153607
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:56:25.247
> 
> 标签：python-2.7, scipy, ipython, differential-equations

原始二阶 ODE 是

```
x'' - 2 * omega * y' - omega ** 2 * x = - mue * (x + pi2 * r12) / np.sqrt((x + pi2 * r12) ** 2 + y ** 2) ** 3 - mum * (x - pi1 * r12) / np.sqrt((x - pi1 * r12) ** 2 + y ** 2)
y'' + 2 * omega * x' - omega **2 * y = - mue * y / np.sqrt((x + pi2 * r12) ** 2 + y ** 2) ** 3 - mum * y / np.sqrt((x - pi1 * r12) ** 2 + y ** 2)
z'' = 0 
```

所以这是我用来解决 ODE 的代码，但首先我将它分成 2 个一阶。

我收到第 61 行的模块不可调用的错误。

第 61 行是`u = odeint(deriv, u0, dt)`

```
#!/usr/bin/env python                                                             

import numpy as np
import scipy.integrate as odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
M = me + mm

pi1 = me / M
pi2 = mm / M
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / r12 ** 3)
nu = 0.0  #  flight path angle                                                    

x = 327156.0  #  x location where the moon's SOI effects the spacecraft           
y = 33050.0   #  y location                                                       

vbo = 10.85  #  velocity at burnout                                               

gamma = -141.868 * np.pi / 180  #  angle in radians of true anomaly               

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

xrel = (re + 300.0) * np.cos(gamma)
#  spacecraft x location relative to the earth                                    
yrel = (re + 300.0) * np.sin(gamma)

#  r0 = [xrel, yrel, 0]                                                           
#  v0 = [vx, vy, 0]              
u0 = [xrel, yrel, 0, vx, vy, 0]

def deriv(u, dt):
    n1 = -((mue * (u[0] + pi2 * r12) / np.sqrt((u[0] + pi2 * r12) ** 2
                                               + u[1] ** 2) ** 3)
        - (mum * (u[0] - pi1 * r12) / np.sqrt((u[0] - pi1 * r12) ** 2
                                              + u[1] ** 2) ** 3))
    n2 = -((mue * u[1] / np.sqrt((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3)
        - (mum * u[1] / np.sqrt((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3))
    return [u[3],  #  dotu[0] = u[3]                                              
            u[4],  #  dotu[1] = u[4]                                              
            u[5],  #  dotu[2] = u[5]                                              
            2 * omega * u[5] + omega ** 2 * u[0] + n1,  #  dotu[3] = that         
            omega ** 2 * u[1] - 2 * omega * u[4] + n2,  #  dotu[4] = that         
            0]  #  dotu[5] = 0                                                    

dt = np.arange(0.0, 250000.0, .1)
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:03:43.547

假设你的意思是这个错误：

```
~/coding$ python orbit1.py 
Traceback (most recent call last):
  File "orbit1.py", line 61, in <module>
    u = odeint(deriv, u0, dt)
TypeError: 'module' object is not callable 
```

这是因为您想要在 中命名的*函数*。你的线路`odeint``scipy.integrate`

```
import scipy.integrate as odeint 
```

导入整个模块并为其命名`odeint`。尝试

```
from scipy.integrate import odeint 
```

相反，或

```
import scipy.integrate
[...]

u = scipy.integrate.odeint(deriv, u0, dt) 
```

这应该给你 ![在此处输入图像描述](https://i.stack.imgur.com/hRyT5.png)

# arrays - Powershell 仅在不存在时添加到数组

> ID：16153609
> 
> 赞同：13
> 
> 时间：2013-04-22T17:56:41.030
> 
> 标签：arrays, powershell, foreach, contains

在 PowerShell v2 中，我尝试仅向数组添加唯一值。我试过使用一个 if 语句，粗略地说，如果（-not $Array -contains 'SomeValue'），然后添加值，但这只会在第一次工作。我放了一个简单的代码片段，显示了我在做什么但不起作用，以及我做了什么作为一种有效的解决方法。有人可以让我知道我的问题在哪里吗？

```
Clear-Host
$Words = @('Hello', 'World', 'Hello')

# This will not work
$IncorrectArray = @()
ForEach ($Word in $Words)
{
    If (-not $IncorrectArray -contains $Word)
    {
        $IncorrectArray += $Word
    }
}

Write-Host ('IncorrectArray Count: ' + $IncorrectArray.Length)

# This works as expected
$CorrectArray = @()
ForEach ($Word in $Words)
{
    If ($CorrectArray -contains $Word)
    {
    }
    Else
    {
        $CorrectArray += $Word
    }
}

Write-Host ('CorrectArray Count: ' + $CorrectArray.Length) 
```

第一种方法的结果是一个只包含一个值的数组：“Hello”。第二个方法包含两个值：“Hello”和“World”。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T18:22:42.287

要修复您的代码，请尝试`-notcontains`或至少将您的 contains-test 包装在括号中。自动取款机。您的测试内容如下：

> 如果“非数组”（如果数组不存在）包含单词。

这是没有意义的。你想要的是：

> 如果数组不包含单词..

是这样写的：

```
If (-not ($IncorrectArray -contains $Word)) 
```

`-notcontains`正如@dugas 建议的那样，甚至更好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T18:07:46.310

The first time around, you evaluate -not against an empty array, which returns true, which evaluates to: ($true -contains 'AnyNonEmptyString') which is true, so it adds to the array. The second time around, you evaluate -not against a non-empty array, which returns false, which evaluates to: ($false -contains 'AnyNonEmptyString') which is false, so it doesn't add to the array.

Try breaking your conditions down to see the problem:

```
$IncorrectArray = @()
$x = (-not $IncorrectArray) # Returns true
Write-Host "X is $x"
$x -contains 'hello' # Returns true 
```

then add an element to the array:

```
$IncorrectArray += 'hello'
$x = (-not $IncorrectArray) # Returns false
    Write-Host "X is $x"
$x -contains 'hello' # Returns false 
```

See the problem? Your current syntax does not express the logic you desire.

You can use the notcontains operator:

```
Clear-Host
$Words = @('Hello', 'World', 'Hello')

# This will work
$IncorrectArray = @()
ForEach ($Word in $Words)
{
  If ($IncorrectArray -notcontains $Word)
  {
    $IncorrectArray += $Word
  }
} 
```

# delphi - ListView 没有选择正确的行

> ID：16153617
> 
> 赞同：1
> 
> 时间：2013-04-22T17:57:13.663
> 
> 标签：delphi, listview, pascal

基本上我想要一个由 StringList 填充的 ListView，当我选择一个 ListItem 并按下 Up 或 Down 时，它会向上或向下移动项目（在两个列表中）。

我正在使用 ListView 的 onKeyDown 来调用 MoverFAT

```
procedure TF_Aplicador.ListViewKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if ListView.Selected <> nil then
    if Key = VK_UP then
      MoverFAT(ListView.Selected.Index, -1)
    else if Key = VK_DOWN then
      MoverFAT(ListView.Selected.Index, 1)
    else if Key = VK_DELETE then
      DeletarFAT(ListView.Selected.Index);
end; 
```

问题是，向下移动时它总是选择第一个项目（在交换项目之后），向上移动就可以了。FATs 是我的 StringList，而 Atualizar() 只是让 ListView 显示 StringList 的内容。

```
procedure TF_Aplicador.MoverFAT(I, J: Integer);
begin
  if ((I + J) > -1) and ((I + J) < (FATs.Count)) then
  begin
    FATs.Exchange(I, I+J);
    Atualizar;
    ListView.Selected := ListView.Items[I+J];
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:23:53.340

我通过以下`Atualizer`实现重现了您的问题：

```
 ListView.Clear;
  for I := 0 to FATs.Count - 1 do
    ListView.AddItem(FATs[I], nil); 
```

（如果你也给了我们，那肯定会容易得多。）

问题是 ListView 本身会尝试处理密钥，但是由于您（可能）删除了`Atualizer`例程中的所有项目，它不知道如何处理。

通过告诉 ListView 它不应该再通过分配来处理击键来解决它`0`：

```
procedure TF_Aplicador.ListViewKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if ListView.Selected <> nil then
  begin
    case Key of
      VK_UP: MoverFAT(ListView.ItemIndex, -1);
      VK_DOWN: MoverFAT(ListView.ItemIndex, 1);
      VK_DELETE: DeletarFAT(ListView.ItemIndex);
    end;
    if Key in [VK_UP, VK_DOWN, VK_DELETE] then
      Key := 0;
  end;
end; 
```

* * *

附带说明：同步 StringList 和 ListView 有更好的方法。您可以利用[Bummi 评论](https://stackoverflow.com/questions/16153617/listview-not-selecting-correct-row/16154050#comment23082318_16153617)中的虚拟方法。或者您也可以交换 ListView 的项目，在这种情况下，您不再需要抑制密钥：

```
procedure TForm1.ListViewKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if ListView.Selected <> nil then
    case Key of
      VK_UP: MoverFAT(ListView.ItemIndex, -1);
      VK_DOWN: MoverFAT(ListView.ItemIndex, 1);
      VK_DELETE: DeletarFAT(ListView.ItemIndex);
    end;
end;

procedure ExchangeListItems(Items: TListItems; Index1, Index2: Integer);
var
  Item: TListItem;
begin
  Item := TListItem.Create(Items);
  try
    Item.Assign(Items[Index1]);
    Items[Index1].Assign(Items[Index2]);
    Items[Index2].Assign(Item);
  finally
    Item.Free;
  end;
end;

procedure TForm1.MoverFAT(I, J: Integer);
begin
  if ((I + J) > -1) and ((I + J) < (FATs.Count)) then
  begin
    FATs.Exchange(I, I + J);
    ExchangeListItems(ListView.Items, I, I + J);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:34:52.353

就 NGLN 已经指出的问题而言，我建议另一种方法。
不要将数据存储在 Listview 中，仅用于显示数据。只需要一个未改动的 Liestview 和 Listbox 来演示。

```
unit Unit6;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ComCtrls, StdCtrls;

type
  TForm6 = class(TForm)
    ListView: TListView;
    ListBox1: TListBox;  // just for visualization should be an Stringlist
    procedure ListViewKeyDown(Sender: TObject; var Key: Word;
      Shift: TShiftState);
    procedure FormCreate(Sender: TObject);
    procedure ListViewData(Sender: TObject; Item: TListItem);
  private
    procedure MoverFAT(I, J: Integer);
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form6: TForm6;

implementation

var
  FATs: TStrings;
{$R *.dfm}

procedure TForm6.FormCreate(Sender: TObject);
var
  I: Integer;
begin
  for I := 0 to 9 do
    ListBox1.Items.Add(StringOfChar(IntToStr(I)[1], 10));
  ListView.Columns.Add.Caption := 'Test';
  ListView.ViewStyle := vsList;
  ListView.OwnerData := true;
  ListView.OnData := ListViewData;
  Listview.OnKeyDown := ListViewKeyDown;
  FATs := ListBox1.Items;
  ListView.Items.Count := FATs.Count;
end;

procedure TForm6.ListViewData(Sender: TObject; Item: TListItem);
begin
  Item.Caption := FATs[Item.Index];
end;

procedure TForm6.ListViewKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if ListView.Selected <> nil then
    if Key = VK_UP then
      MoverFAT(ListView.Selected.Index, -1)
    else if Key = VK_DOWN then
      MoverFAT(ListView.Selected.Index, 1)
end;

procedure TForm6.MoverFAT(I, J: Integer);
begin
  if ((I + J) > -1) and ((I + J) < (FATs.Count)) then
  begin
    FATs.Exchange(I, I + J);
    ListView.Invalidate;
    ListView.Selected := ListView.Items[I + J];
  end;
end;

end. 
```

# perl - perl 中括号/括号的使用规则 (?)

> ID：16153618
> 
> 赞同：12
> 
> 时间：2013-04-22T17:57:18.453
> 
> 标签：perl, square-bracket, curly-brackets

做了一些搜索，但找不到任何有用的东西。我想知道是否有一个排序汇总表供初学者了解使用括号/括号的“规则”，特别是 ()、[]、{} 之间的区别。不幸的是，根据我的经验，如果我使用了错误的括号`use strict`，`use warnings`请不要告诉我。

例如，下面是合法代码（b/c 它们来自 ikegami）。

```
@{"genotype".($i)}
@{$genotype[$i]}
$genotype[$i] = [ split (/:/, $original_line[$i])]
my @genotype = map {[split /:/]} @original_line[6..14] 
```

但是下面的这些也是合法的吗？很多时候（对我来说）很难知道是否是代码的其他部分（逻辑）导致了问题。对我（一个初学者）来说，对我（初学者）进行排序似乎对良好的编码来说是微不足道的。任何关于如何正确使用括号的指南都会很棒。

```
@{"genotype".[$i]}
@["genotype".($i)]
@("genotype".($i))
@{$genotype($i)}
@[$genotype($i)]
$genotypes[$i] = ( split (/:/, $original_line[$i]))
my @genotype = map ([split /:/]) @original_line[6..14] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T18:28:41.877

在 Perl 中，方括号、大括号和括号都有多种含义，但花括号可能是最多的。

*   帕伦斯
    *   排序优先级`2 * 3 + 4`与`2 * (3 + 4)`..
        *   为函数分隔参数列表是这种情况的一个子案例：`join "", 1, 2, 3`vs.`join("", 1, 2), 3`
        *   使用箭头运算符包围方法调用的参数列表：（`$foo->bar(1, 2)`空 arglist 不需要）
    *   强制将前一个裸字解释为子例程调用。比较`Foo->new`和`Foo()->new`。
    *   使用箭头运算符调用 coderefs：`$code->()`
    *   子程序原型`sub foo ($$;$%) { ... }`
*   方括号
    *   数组下标运算符`my @array = 1 .. 5; $array[1]`
    *   Arrayref 字面量`my $aref = [1 .. 5]`
*   大括号
    *   块 (for `do`, `sub`, `map`, `grep`, 条件, 循环结构, 裸块, 标记块, ... )
    *   哈希下标运算符`$hash{foo}`
    *   Hashref 字面量`my $hashref = { a => 3, b => 2 }`
    *   与格`print { $filehandles[5] } "Hello world"`
    *   Circumfix 取消引用运算符`@{ $aref }`, `%{ $hashref }`, ...
    *   封装块`package Foo { ... }`

......几乎所有字符都可以用作类似引号的运算符的分隔符`q//`, `qq//`, `qr//`, `qx//`, `m//`, `s///`, `tr///`, `y///`, 导致有趣的东西，比如`s(foo){bar}g`

* * *

`@{"genotype".($i)}`使用 curlies 进行符号取消引用，并使用 parens 来（不必要地）整理优先级。

`@{$genotype[$i]}`使用方括号作为数组下标运算符，并使用 curlies 来取消引用

`$genotype[$i] = [ split (/:/, $original_line[$i])]`有不同的部分：`$genotype[$i]`并`$original_line[$i]`使用括号进行数组下标。使用`= [ ... ]`方括号来创建匿名数组引用。括号中的`split(/:/, ...)`只是分隔参数列表`split`（排序优先级）。

`my @genotype = map {[split /:/]} @original_line[6..14]`使用方括号作为 中的数组下标运算符`@original_line[6..14]`，以及 中的匿名数组`[split /:/]`。卷曲用于形成一个块作为 的第一个参数`map`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:20:22.463

`map`有两种语法

```
map BLOCK LIST
map EXPR, LIST 
```

在这两种情况下，parens 都可以像普通的 sub 一样在 args 周围使用。

```
map(BLOCK LIST)
map(EXPR, LIST) 
```

需要注意的一点是，虽然 LIST 可以返回一个空列表，但不能像对 subs 一样完全省略它。

* * *

```
map { [split /:/] } @original_line[6..14] 
```

是 的一个例子`map BLOCK LIST`，而

```
map([split /:/]) 
```

非法提供EXPR，但没有LIST。以下是可接受的语法：

```
map({ [split /:/] } @original_line[6..14])
map { [split /:/] } @original_line[6..14]
map([split /:/], @original_line[6..14])
map [split /:/], @original_line[6..14] 
```

* * *

如果表达式类似于 (2+$_)*3，则只有以下选项：

```
map({ (2+$_)*3 } ...)
map { (2+$_)*3 } ...
map((2+$_)*3,  ...) 
```

如果你从最后一个删除括号，你最终会得到非法的

```
map(2+$_) 
```

您可以使用消除歧义`+`

```
map +(2+$_)*3, ... 
```

但最好切换到`map BLOCK LIST`符号。

# php - PHP中的目录结构

> ID：16153621
> 
> 赞同：0
> 
> 时间：2013-04-22T17:57:30.487
> 
> 标签：php, project, project-management

以下是我的应用程序的目录结构。

```
 ```
-/home/user 
| -/app
|  | -/class
|  |  |  -/proc
|  |  |   | -public_login.php
|  |  |   | -public_notice.php
|  |  |   | -public_reset.php
|  |  | -constants.php
|  |  | -utils.php
|  |  | -....
|  |  | -....
|  | -public_index.php
|  | -public_admin.php
| -public_html
  | -project_name
  | | -proc
  | | | - login.php
.......... 
``` 现在在 /public_html/proc/login.php 我使用以下内容包括 /app/class/proc/public_login.php ：

```
require_once('../../../app/class/proc/public_login.php'); 
```

现在在 public_login.php 里面有 app/class/utils.php 的要求，所以我在 public_login.php 中添加了以下内容。

```
require_once '../utils.php'; 
```

***但是我得到了 404 错误。***

utils.php 路径

```
/home/user/app/class/utils.php 
```

public_login.php 路径

```
/home/user/app/class/proc/public_login.php 
```

请帮我解决这个问题。

问候

**Genocide_Hoax**

            回答 #1

赞同：2

时间：2013-04-22T18:03:46.790

实际路径是从执行包含/要求的初始文件配置的，因此在这种情况下`../utils.php`将评估为：

`/home/user/public_html/project_name/utils.php`

您可以使用该`__DIR__`常量来获取当前文件目录的路径，因此`public_login.php`您可以这样做：

```
require_once __DIR__ . '/../utils.php'; 
```

```

# c# - LINQ - Speeding up query that has a join to a huge table

> ID：16153628
> 
> 赞同：1
> 
> 时间：2013-04-22T17:58:02.197
> 
> 标签：c#, linq, optimization, query-optimization

I have these two tables

```
ExpiredAccount                    Account
--------------                    ---------------
ExpiredAccountID                  AccountID
AccountID (fk)                    AccountName
...                               ... 
```

Basically, I want to return a list of ExpiredAccounts displaying the AccountName in the result.

I currently do this using

```
var expiredAccounts = (from x in ExpiredAccount
                       join m in Account on x.AccountID equals m.AccountID
                       select m.AccountName).ToList() 
```

This works fine. However, this takes too long. There's not a lot of records in expiredAccounts (<200). The Account table on the otherhand has over 300,000 records.

Is there anyway I could speed up my query, or alternatively, another way to do this more efficiently with or without using LINQ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:20:48.270

You can try using `Contains` method:

```
var expiredAccounts = (from m in Account where ExpiredAccount.Select(x => x.AccountId)
                                                             .Contains(m.AccountId)
                       select m.AccountName).ToList() 
```

It should generate `IN` clause in SQL query that will be performed agains database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:27:31.933

Firstly, assuming you are using Entity Framework, you don't need to be using the join at all. You could simply do:

```
var expiredAccounts = (from x in ExpiredAccount
                       select x.Account.AccountName).ToList() 
```

However, I don't think they will generate a different query plan on the database. But my guess is that you don't have an index on AccountID in the Account table (although that seems unlikely).

One thing you can do is use ToTraceString (for example: [http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/4a17b992-05ca-4e3b-9910-0018e7cc9c8c/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/4a17b992-05ca-4e3b-9910-0018e7cc9c8c/)) to get the SQL which is being run. Then you can open SQL Management Studio and run that with the execution plan option turned on and it will show you what the execution plan was and what indexes need to be added to make it better.

# vim - VIM：在正常模式下将光标更改为下划线

> ID：16153635
> 
> 赞同：5
> 
> 时间：2013-04-22T17:58:28.273
> 
> 标签：vim

Sublime Text 的 Vintage Mode 的一个不错的功能是进入正常模式会在您所在的角色下方添加下划线，而不是使用特定背景颜色突出显示当前角色的标准光标。

*GUI VIM*中有没有办法将正常模式光标更改为当前字符下的下划线，例如 Sublime Text？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:06:38.993

选项`'guicursor'`控制光标的显示方式。

我从未见过 Sublime Text，但下面的行在正常模式下将光标更改为下划线：

```
 set guicursor=n-ci:hor30-iCursor-blinkwait300-blinkon200-blinkoff150 
```

有关`:h guicursor`如何更改光标的详细信息，请参阅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:06:50.127

就在这里。进去看看[`:h guicursor`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27guicursor%27)。这是我的建议，尽量保持它与语法组的默认配置一样接近。

```
:set guicursor+=n:hor20-Cursor/lCursor 
```

# c# - 如何在 Ninject 中使用策略模式

> ID：16153636
> 
> 赞同：1
> 
> 时间：2013-04-22T17:58:33.760
> 
> 标签：c#, ninject, strategy-pattern

我有两个`AlbumRepository`带有接口的存储库`IAlbumRepository`和`CachedAlbumRepository`带有`IAlbumRepository`构造函数接口的接口`IAlbumRepository`。我需要用 Ninject 注入，`ICachedAlbumRepository`用.`CachedAlbumRepository``AlbumRepository`

如何用 Ninject 实现它？

与结构图相同的方法

```
x.For<IAlbumRepository>().Use<CachedAlbumRepository>()

.Ctor<IAlbumRepository>().Is<EfAlbumRepository>();

    public class CachedAlbumRepository : IAlbumRepository
    {
        private readonly IAlbumRepository _albumRepository;

        public CachedAlbumRepository(IAlbumRepository albumRepository)
        {
            _albumRepository = albumRepository;
        }

        private static readonly object CacheLockObject = new object();

        public IEnumerable<Album> GetTopSellingAlbums(int count)
        {
            string cacheKey = "TopSellingAlbums-" + count;

            var result = HttpRuntime.Cache[cacheKey] as List<Album>;

            if (result == null)
            {
                lock (CacheLockObject)
                {
                    result = HttpRuntime.Cache[cacheKey] as List<Album>;

                    if (result == null)
                    {
                        result = _albumRepository.GetTopSellingAlbums(count).ToList();

                        HttpRuntime.Cache.Insert(cacheKey, result, null, 

                            DateTime.Now.AddSeconds(60), TimeSpan.Zero);
                    }
                }
            }

            return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:19:18.357

您需要创建 2 个绑定 - 一个说注入`CachedAlbumRepository`到需要的任何东西中，`IAlbumRepository`另一个说注入法线`AlbumRepository`到`CachedAlbumRepository`. 这些绑定应该这样做：

```
Bind<IAlbumRepository>()
    .To<CachedAlbumRepository>();

Bind<IAlbumRepository>()
    .To<AlbumRepository>()
    .WhenInjectedInto<CachedAlbumRepository>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:09:11.613

我不能为你回答这个问题，但我有一些反馈给你。

您的应用程序设计错过了一个很好的机会。它错过了保持可维护性的机会。由于您定义了一个装饰器（这`CachedAlbumRepository`是一个[装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)），您可能也会开始为其他存储库编写装饰器。我想你有一个装饰器来装饰你的`IArtistRepository`,`IRecordLabelRepository`等等。

必须实现这些重复的存储库是违反[DRY](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则的。但是违反 DRY 其实是因为违反了其他一些原则。您的设计违反了一些[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，即：

1.  您的设计违反了[单一职责原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)，因为您将放置在存储库中的查询方法（例如`GetTopSellingAlbums`方法）不是很有凝聚力。换句话说，您的存储库类会变得很大并且会做太多事情，并且开始变得难以阅读、难以测试、难以更改和难以维护。
2.  您的设计违反了[开放/封闭原则](https://en.wikipedia.org/wiki/Open/closed_principle)，因为每次向系统添加新查询时都必须更改存储库。这意味着改变接口，改变装饰器，改变真正的实现，改变系统中存在的每一个假实现。
3.  您的设计违反了[接口隔离原则](https://en.wikipedia.org/wiki/Interface_segregation_principle)，因为您的存储库接口将变宽（将有许多方法）并且这些接口的使用者被迫依赖于他们不使用的方法。这使得实现装饰器和编写假对象变得越来越难。

这个问题的解决方案是将所有存储库隐藏在一个通用抽象后面：

```
public interface IRepository<TEntity>
{
    void Save(TEntity entity);
    TEntity Get(Guid id);
} 
```

由于这是一个通用接口，它不会给您任何空间来添加任何特定于实体的查询方法，这很好。这很好，因为它`IRepository<T>`会窄而稳定。这使得添加装饰器变得非常容易（如果您仍然需要在此处添加装饰器）。

诀窍是防止向该接口添加查询方法（并且不要从该接口继承新接口），而是为系统中的每个查询赋予其自己的类。或者实际上是两个类。一个具有数据定义的类，一个知道如何执行该查询的类。最后但并非最不重要的一点是，您可以将每个类隐藏在查询的相同通用抽象后面（就像我们对存储库有一个通用抽象一样）。当你这样做时，你只需要定义一个可以应用于系统中任何查询子集的缓存装饰器。

您可以在[此处详细了解此设计](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。起初这可能看起来有点抽象，但我向你保证，当你掌握了这个窍门时，你将永远无法回到你的旧设计。

# java - 第三方连接池软件？

> ID：16153638
> 
> 赞同：0
> 
> 时间：2013-04-22T17:58:56.763
> 
> 标签：java, connection, pool

我完全熟悉连接池库，如 c3p0 等……我很喜欢由 Web 容器管理的连接池，如 Tomcat 和 WebSphere。

但是，如果您有一个独立的批处理模式 Java 应用程序（带有 main 方法的东西）并且您希望它能够利用连接池，那又如何呢？我的意思是，如果独立程序要管理池，它将运行，创建池，使用连接然后退出，破坏池。如果您希望应用程序运行并使用现有的连接池，这并不能真正为您带来任何好处。

我要问的是，是否有一层软件可以在数据库和可以管理连接池的 Java 命令行应用程序之间运行？该软件将为您的 Java 应用程序提供一个端口，以通过 JDBC 访问连接池。因此，任何具有指向该端口的 JDBC URL 的应用程序都可以使用连接池。现在，即使没有中间件服务器（tomcat、glassfish），独立应用程序也可以使用连接池。

听起来很酷。它存在吗？它是否存在于甲骨文:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T09:07:33.900

据我了解您的设置，池必须是一个独立的进程。这意味着，批处理对数据库使用正确的 JDBC 驱动程序，但应该与池通信。这意味着，池必须使用数据库的专有协议。这不能由一种产品通过合理的努力来完成。

因此，您不应要求通用解决方案，而应要求特定数据库的解决方案。

例如，对于 PostgreSQL，有两个这样的池：PgBouncer 和 pgpool。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T08:28:59.263

我没有测试它，但它看起来很有趣：

[DBPool：Java 数据库连接池](http://www.snaq.net/java/DBPool/)

> 什么是 DBPool？
> 
> 基于 Java 的数据库连接池实用程序，支持基于时间的到期、语句缓存、连接验证和使用池管理器的简单配置。

# php - 使 AJAX 回调在迭代器中工作

> ID：16153639
> 
> 赞同：0
> 
> 时间：2013-04-22T17:58:58.397
> 
> 标签：php, javascript, jquery, mysql, ajax

为什么这不起作用？只有`success`呼吁第一反应是有效的。

```
for(i = 1; i <= 6; i++) {

    $.ajax({
        url : 'runTest.php',
        type : 'post',
        data : "testNumber="+i+"&url=" + testUrl,
        dataType : 'json',
        success : function(data) {

        var row = $('<tr />');
            $('<td />').text(data.testName).appendTo(row);
            $('<td />').text(data.testSeverity).appendTo(row);
            $('<td />').text(data.testResult).appendTo(row);
            $('<td />').text(data.testResultDetail).appendTo(row);
            $('<td />').text(data.testDescription).appendTo(row);

            $('table#results tbody').append(row);

        }
    });

} 
```

![在此处输入图像描述](https://i.stack.imgur.com/VQruB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:09:38.530

服务器端可能有问题。您一次触发了六次相同的 PHP 脚本；也许数据库（或其他）锁定了第一个请求，而其他五个返回错误您没有检查。在这种情况下，您需要在 PHP 中包含某种`while...sleep`循环，等待数据库可用。

当我使用 PHP 脚本从谷歌地图检索数据并遇到请求限制时，这是我为类似问题所做的。但是这个想法很简单，你应该可以根据自己的需要修改它：

```
$params = http_build_query($_GET);
$url = "http://maps.googleapis.com/maps/api/directions/json?sensor=false&" . $params;

$json = file_get_contents($url);
$status = json_decode($json)->status;

// check for over_query_limit status
while ($status=="OVER_QUERY_LIMIT") {
    sleep(0.2); // seconds
    $json = file_get_contents($url);
    $status = json_decode($json)->status;
} 
```

# c - 编译器定义，将函数重定向到不同的名称

> ID：16153641
> 
> 赞同：3
> 
> 时间：2013-04-22T17:59:00.153
> 
> 标签：c, compiler-optimization

使用 edk2 (UEFI) 时，memcpy 和 memset 等功能不可用，但它们具有 CopyMem 和 SetMem 功能。通常这不是什么大问题，但有时编译器会进行优化，用 memcpy/memset 替换我的代码，我得到链接器错误，说我对它们有未解决的引用。据我所知，它们的使用基本相同（相同的参数和诸如此类的东西）。

我想知道有什么方法可以解决这个问题，而不是在实例发生时单独处理它们。我尝试使用谷歌搜索编译器宏，但我找不到一个很好的例子来看看它是否是一个很好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:06:16.303

如果编译器插入`memcpy()`并`memset()`作为优化过程的一部分，那么**使用宏无法实现任何目标。**你的机会是：

I. 在每种情况下逐渐降低优化级别，直到链接器错误消失。

二、切换到符合标准的库

三、实施`memcpy()`和`memset()`手动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:09:45.700

如果你使用 GCC，

`memcpy()`您可以使用标志禁用引入`-fno-builtin`。

使用`__REDIRECT`宏也可以工作（在`sys/cdefs.h`）：

```
__REDIRECT (memcpy, (void *dest, const void *src, size_t n), CopyMem); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:31:21.270

作为一种解决方法，创建转发包装器：

```
void* memcpy(void *dest, const void *src, size_t n) {
    return CopyMem(dest, src, n);
} 
```

# jquery - 解决 jquery 自动完成的无限循环问题

> ID：16153645
> 
> 赞同：0
> 
> 时间：2013-04-22T17:59:13.713
> 
> 标签：jquery

当用户按下 ctrl-enter 键时，我有以下代码可以显示文本区域内的选项列表。

```
$("#textarea").autocomplete({
 source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
 minLength: 0
});

$('#textarea').keydown(function (e) {
if (e.ctrlKey && (e.keyCode == 13)) {
   $("#textarea").autocomplete("search","");
}
}); 
```

它工作正常。问题是有时当我按下 ctrl-enter 时，浏览器会挂起一段时间，然后出现一个对话框，询问我是要停止还是继续脚本。对话框中的消息说

“此页面上的某个脚本可能正忙，也可能已停止响应。您可以现在停止该脚本，也可以继续查看该脚本是否会完成。

脚本：“location1/codemirror/js/codemirror.js:958”“

在上面的消息中，codemirror.js 是我正在使用的另一个库。

请让我知道如何解决此问题。

# python - 在 2D 游戏中滚动？

> ID：16153646
> 
> 赞同：1
> 
> 时间：2013-04-22T17:59:17.217
> 
> 标签：python, camera, scroll, 2d, pygame

我正在尝试添加一个滚动的“相机”，它会在玩家移动时跟随它，但不知道如何做到这一点。我知道您可以在按下其中一个移动键时将关卡朝相反的方向移动，但我不想这样做，因为我计划稍后添加敌人并且不希望将它们的坐标更新为玩家移动。

我在下面的示例级别添加了我的代码。

**代码：**

```
import pygame, sys, time, random, math
from pygame.locals import *

BACKGROUNDCOLOR = (255, 255, 255)

WINDOWW = 800 
WINDOWH = 600
PLAYERW = 66
PLAYERH = 22
FPS = 60
MOVESPEED = 3
YACCEL = 0.13
GRAVITY = 2
BLOCKSIZE = 30

pygame.init()
screen = pygame.display.set_mode((WINDOWW, WINDOWH), 0, 32)
mainClock = pygame.time.Clock()

testLevel = [
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,)]

def createblock(length, height, color):
    tmpblock = pygame.Surface((length, height))
    tmpblock.fill(color)
    tmpblock.convert()
    return tmpblock

def terminate(): # Used to shut down the software
    pygame.quit()
    sys.exit()

def add_level(lvl, bSize): # Creates the level based on a map (lvl) and the size of blocks
    bList = [] # List of every block
    bListDisp = [] # List of every block to display    
    bTypeList = [] # List with corresponding type of block(wall, air, etc.)

    for y in range(len(lvl)): 
        for x in range(len(lvl[0])):

            if lvl[y][x] == 0: # If the block type on lvl[y][x] is '0', write "air" down in the type list
                bTypeList.append("air")
            elif lvl[y][x] == 1: # If the block type on lvl[y][x] is '1', write "wall" down in the type list
                bTypeList.append("solid")

            bList.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block that is registered
            bListDisp.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block to display that is registered

    return bList, bListDisp, bTypeList

player = pygame.Rect((WINDOWW/2), (WINDOWH - BLOCKSIZE*3), PLAYERW, PLAYERH)
wallblock = createblock(BLOCKSIZE, BLOCKSIZE,(20,0,50))

lastTime = pygame.time.get_ticks()
isGrounded = False

vx = 0
vy = 0

allLevels = [testLevel] # A list containing all lvls(only one for now)
maxLevel = len(allLevels) # Checks which level is the last
currLevel = allLevels[0] # Current level(start with the first lvl)
blockList, blockListDisp, blockTypeList = add_level(currLevel, BLOCKSIZE) # A list with every block and another list with the blocks types

thrusters = True
jumping = False
falling = True
while True:
    """COLLISION"""
    collision = False
    for i in range(len(blockTypeList)):
        if blockTypeList[i] == "solid":
            if player.colliderect(blockList[i]): 
                collision = True
                if vx > 0 and not falling:
                    player.right = blockListDisp[i].left
                    vx = 0
                    print('Collide Right')
                if vx < 0 and not falling:
                    player.left = blockListDisp[i].right
                    vx = 0
                    print('Collide Left')
                if vy > 0:
                    player.bottom = blockListDisp[i].top
                    isGrounded = True
                    falling = False
                    vy = 0
                    print('Collide Bottom')
                if vy < 0:
                    player.top = blockListDisp[i].bottom
                    vy = 0
                    print('Collide Top')
            else:
                player.bottom += 1
                if player.colliderect(blockList[i]):
                    collision = True
                    #isGrounded = True
                    #falling = False
                player.bottom -= 1
    if not collision:
        falling = True
        isGrounded = False

    # Input
    pressedKeys = pygame.key.get_pressed() # Checks which keys are being pressed
    timeDiff = pygame.time.get_ticks() - lastTime # Calculates time difference 
    lastTime +=  timeDiff # Last time checked reset to current time

    # Shut-down if the ESC-key is pressed or the window is "crossed down"
    for event in pygame.event.get():
        if event.type == QUIT or event.type == KEYDOWN and event.key == K_ESCAPE:
            terminate()    

    """X-axis control"""
    if pressedKeys[ord('a')]:
        vx = -MOVESPEED
    if pressedKeys[ord('d')]:
        vx = MOVESPEED
    if not pressedKeys[ord('d')] and not pressedKeys[ord('a')]:
        vx = 0

    """Y-axis control"""
    # Controls for jumping
    if pressedKeys[ord('w')] and thrusters == True:
            vy -= YACCEL * timeDiff; # Accelerate along the y-xis when "jumping", but not above/below max speed
            if vy <= -4:
                vy = -4
            isGrounded = False # You are airborne
            jumping = True # You are jumping

    if event.type == KEYUP: # If you let go of the "jump"-button, stop jumping
        if event.key == ord('w') and vy < 0 and not isGrounded:
            jumping = False
            falling = True

    player.x += vx
    player.y += vy

    # Gravity
    if not isGrounded or falling:
        vy += 0.3
        if vy > 80:
            vy = 80

    screen.fill(BACKGROUNDCOLOR)

    for i in range(len(blockTypeList)):
        if blockTypeList[i] == "solid":
            screen.blit(wallblock, (blockListDisp[i].x, blockListDisp[i].y)) #blit the wall-block graphics

    pygame.draw.rect(screen, (0, 0, 0), player)

    pygame.display.update()
    mainClock.tick(FPS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:06:23.553

诀窍是跟踪相机坐标并将其用作渲染代码中的偏移量。看起来你正在做你在你发布的代码的末尾进行渲染，在屏幕上用坐标 x,y 到像素 x,y 绘制每个块。

正如你所说，改变水平并不是很好。相反，让您的关键输入（或其他相机移动设备）更改 cameraX 和 cameraY 变量，然后从块 x 和 y 值中添加（或减去，取决于您想要去的方向）这些值以更改哪些像素映射到哪个块。即将您的渲染更改为：

```
screen.blit(wallblock, (blockListDisp[i].x + cameraX, blockListDisp[i].y + cameraY)) 
```

这意味着如果您的相机移动到 (10, 20)，那么您将在屏幕上 (5, 5) 的块映射到 (15, 25)，从而在您的关卡基础模型保持不变的情况下移动整个关卡。说得通？

你也可以更进一步；如果您的相机只是被移动以跟随您的角色，您可以在上面交换 cameraX 和 cameraY 以获得角色位置的某些功能，并直接在那里管理整个事情。

# php - 将 dirname 设置为 public_html/top 目录？

> ID：16153648
> 
> 赞同：0
> 
> 时间：2013-04-22T17:59:26.030
> 
> 标签：php, joomla

我怎样才能设置到顶级目录（即`public_html/folder`）？

我试过`$_SERVER['DOCUMENT_ROOT']`没有运气。

```
define('JPATH_BASE', dirname(realpath(__FILE__)). '/folder' ); 
```

**编辑：** 这是整个代码，以防万一：

```
<?php

// Set flag that this is a parent file

define( '_JEXEC', 1 );

define('JPATH_BASE', dirname(realpath(__FILE__)). '/folder' );

define( 'DS', DIRECTORY_SEPARATOR );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
jimport('joomla.application.module.helper');
jimport('joomla.application.component.helper');

$mainframe =& JFactory::getApplication('site');

if (!$mainframe->getCfg('offline'))
        {
    echo "Folder is <span style=\"color:green;\">online</span>.";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:07:30.323

尝试这个：

```
 <?php
function getPublicHTML(){
    $get = 'public_html';
    $d = '';
    for($i = 0; $i < 20; $i++){
        if(file_exists($d.$get)){
            return $d;
        }else{
            $d.="../";
        }
    }
    return $d;
}

define("JPATH_BASE", getPublicHTML());
?> 
```

在 Wamp 服务器下工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:02:04.770

我相信你正在寻找 DOCUMENT_ROOT。

# macos - Mathematica 找不到 SerialIO 包

> ID：16153649
> 
> 赞同：2
> 
> 时间：2013-04-22T17:59:29.853
> 
> 标签：macos, serial-port, wolfram-mathematica, nxt

我正在遵循 The Mathematica Journal 中的[指南](http://www.mathematica-journal.com/2013/03/controlling-robots-built-with-the-lego-mindstorms-nxt-brick/#Raguet-Schofield)，该指南描述了如何将 Mathematica 与 Lego Mindstorms NXT 一起使用。[我在开始使用SerialIO](http://library.wolfram.com/infocenter/MathSource/5726/)包时遇到了一些麻烦。

我使用 Mac OSX，并且已将软件包安装到：

```
/Applications/Mathematica.app/AddOns/ExtraPackages/SerialIO/ 
```

命令**Needs["SerialIO`"]**给我以下错误消息：

```
LinkOpen::linke: Could not find MathLink executable. 
```

并尝试

```
SetDirectory[FileNameJoin[{$InstallationDirectory, "AddOns", "ExtraPackages", "SerialIO", $SystemID}]]; 
```

也无济于事，它给出了：

```
SetDirectory::cdir: Cannot set current directory to /Applications/Mathematica.app/AddOns/ExtraPackages/SerialIO/MacOSX-x86-64. 
```

SerialIO 文件夹中的别名/符号链接似乎存在一些问题。默认情况下，它们指向构建此库的机器上的绝对目录：

```
MacOSX-x86-64 -> /Files/schofield/Packages/SerialIO/Build/Mac/build/Deployment/Package/SerialIO/MacOSX 
```

我尝试删除别名并在终端中创建符号链接：

```
ln -s MacOSX MacOSX-x86-64 
```

再次运行**SetDirectory**命令会导致...没有结果，所以我想这很好。这些命令似乎已经加载，因为在键入*Serial*时它想要自动完成到**SerialOpen**等。

但是，使用命令**mybrick = SerialOpen["name of serial port"]**不会将 NXT 置于连接模式（NXT 显示屏上的 <>）。有其他人让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T16:50:49.247

SerialIO 与 Mathematica9 结合时出现问题。在 2013 年 5 月的一些通信之后，Wolfram 支持发现问题并为我更新了 SerialIO。他们也在他们的网站上更新 SerialIO 似乎是合乎逻辑的。请尝试再次下载 SerialIO 并更新。我的操作系统是 MaxOSX。

# android - 软键盘转换...... WhatsApp是如何做到的？

> ID：16153652
> 
> 赞同：5
> 
> 时间：2013-04-22T17:59:44.547
> 
> 标签：android, android-layout

我一直在开发一个消息应用程序，只是想知道是否有人对软键盘转换有一些见解。

就目前而言，我有本质上是我自己的输入法（屏幕底部的布局），用于发送笑脸、涂鸦之类的东西。我的问题是，当切换软键盘时，在键盘转换过程中会留下一些严重的橡皮筋和黑框。

我注意到 WhatsApp 在软键盘和他们自己的表情符号键盘之间进行了本质上的完美过渡，实际上完全阻止了任何软键盘动画（键盘后面的黑色区域）的发生！

我想出的最接近的东西是一种布局，它可以裁剪任何会被键盘覆盖以防止重新渲染的东西，但这似乎并没有那么好，而且远没有 WhatsApp 流畅。

任何帮助，将不胜感激！

tl；博士我如何复制 whatsapp 的表情符号键盘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T13:22:27.590

Whatsapp 似乎要过渡到新键盘，但实际上并没有做到这一点。

它实际上使用他们的表情符号在键盘上创建了一个自定义对话框。这就是为什么它从普通键盘平滑过渡到表情符号的原因。您可以通过打开键盘自行检查，然后打开表情符号屏幕，最后从通知栏中选择输入法。您会看到新的输入屏幕显示在表情符号屏幕的后面。

![您可以看到表情符号屏幕浮动在输入对话框上方。](https://i.stack.imgur.com/798l8.png)

# postgresql - 在 Ubuntu 上安装全新的 PG

> ID：16153653
> 
> 赞同：0
> 
> 时间：2013-04-22T17:59:47.563
> 
> 标签：postgresql, ubuntu, installation, vps

我正在设置一个 Digital Ocean Ubuntu 服务器来托管我的新站点，并且在设置 postgres 时遇到了麻烦。

我安装得很好，但是当我尝试使用它访问它时，`psql`我得到：

> psql：致命：角色“演示”不存在

几个简单的问题：

1.  安装 postgres 是否创建了标准的 ubuntu 用户帐户？

2.  如何创建一个新的 postgres 帐户，我已经尝试过`createuser`但得到以下信息：

    demo@dubbo:~$ createuser 输入要添加的角色名称： demopg 新角色应该是超级用户吗？(y/n) y createuser：无法连接到数据库 postgres：致命：角色“demo”不存在

我想一旦我有了一个 postgres 用户，我就应该能够为我的应用程序创建一个数据库来使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:37:53.537

以下是我在 Ubuntu 上安装 PostgreSQL 以进行开发的步骤（我正在使用带有 Rails 的 PostreSQL）：

```
$ sudo apt-get install postgresql postgresql-contrib libpq-dev 
```

我们需要 libpq-dev 才能安装 Ruby pg gem。设置完成后，运行以下命令：

```
$ sudo -u postgres createuser --superuser $USER
$ sudo -u postgres createuser --superuser demo
$ sudo -u postgres psql postgres 
```

第一个命令创建一个与您的用户名匹配的用户。第二个命令为您的应用程序创建一个用户来使用——这就是您通常用来登录 psql 的用户。第三个命令将直接带您进入 psql 控制台，并打开 postgres 数据库。只是postgres用户对应的数据库，不知为何在安装PostgreSQL的时候是必须的。

进入 psql 提示符后，键入以下命令：

```
postgres=# \password demo 
```

为您的用户设置密码。一旦它返回到提示符，输入“\q”退出 psql 提示符。

现在您将回到您的终端，然后您可以为您的应用程序创建一个数据库。

```
$ createdb your_db_name 
```

现在，您需要更改 postgresql.conf 文件以使 PostgreSQL 至少侦听 localhost。如果您有一个想要监听外部 IP 或其他内容的设置，请将此行更改为 IP 或只是“*”。

```
/etc/postgresql/9.1/main/postgresql.conf:
listen_addresses = 'localhost' 
```

然后，在 pg_hba.conf 中，确保你有这个：

```
/etc/postgresql/9.1/main/pg_hba.conf:
# "local" is for Unix domain socket connections only
local   all         all                               md5 
```

否则，您在尝试从 Rails 应用程序登录时可能会遇到错误。在此之后，您所要做的就是使用以下命令启动 PostgreSQL：

```
$ sudo /etc/init.d/postgresql start 
```

你准备好了！使用以下命令启动 psql：

```
$ psql -U demo 
```

系统将提示您输入您设置的密码。您可以连接到您创建的数据库：

```
# \c your_db_name 
```

祝你好运！

# objective-c - 如何将tableView的一个部分的分隔符设置为清除

> ID：16153654
> 
> 赞同：0
> 
> 时间：2013-04-22T17:59:49.950
> 
> 标签：objective-c, uitableview, separator

我的 tableView 中有四个部分，我只希望最后一个部分有一个清晰的分隔符。我知道如何为整个 tableView 执行此操作，但找不到任何解决我的问题的方法。我想到的唯一解决方案是在 Photoshop 中将单元格创建为图像并将该图像设置为单元格背景。有没有人知道如何在不使用 Photoshop 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:51:28.933

试试这个

在视图中

```
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

和

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell==nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 1)];
        view.backgroundColor = [UIColor greenColor];
        view.tag = 101;
        [cell addSubview:view];
    }

    if (indexPath.section == 0)
    {
        [[cell viewWithTag:101] setHidden:YES];
    }
    else if(indexPath.section == 1)
    {
        [[cell viewWithTag:101] setHidden:NO];
    }
    return cell;
} 
```

# kernel - 为什么 NtUserInternalGetWindowText 在内核模式下总是返回 0

> ID：16153659
> 
> 赞同：0
> 
> 时间：2013-04-22T18:00:04.390
> 
> 标签：kernel, driver

我已经用我自己的函数 MyNtUserShowWindow 替换了 ssdt shadow 中的 NtUserShowWindow 函数。但是在 MyNtUserShowWindow 函数中，我调用 NtUserInternalGetWindowText 函数来尝试获取窗口标题，但它总是返回 0（表示失败）。我不知道为什么？

一些代码打击：

```
BOOL MyNtUserShowWindow(
    IN HWND hWnd,
    IN int nCmdShow )
{
    LPWSTR buffer = NULL;
    SIZE_T memSize;
    int strLen;
    NTSTATUS status;

    memSize = MAX_PATH + 1;
    if (NT_SUCCESS(ZwAllocateVirtualMemory( ZwCurrentProcess(),
                                            &buffer,
                                            0,
                                            &memSize,
                                            MEM_COMMIT | MEM_RESERVE | MEM_TOP_DOWN,
                                            PAGE_READWRITE )))
    {
        strLen = NtUserInternalGetWindowText( hWnd, buffer, MAX_PATH );
        KdPrint(( "the get window len is %d, buffer is %S\n", strLen, buffer)); // strLen = 0

    }

    ......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:43:58.023

I doubt this is the answer, but you're allocating the wrong size buffer. You are allocating MAX_PATH+1 bytes, but telling NtUserInternalGetWindowText that the buffer is MAX_PATH WCHARs (MAX_PATH*2 bytes) long. Unless MAX_PATH is 1 (which it isn't), this may cause an access violation.

If the window you're looking at has a caption longer than MAX_PATH / 2 characters, this would cause the function to fail.

It is also possible that the window you're looking at belongs to a different process and is managing it's own window text - e.g. an edit control. You may want to take a look at [http://blogs.msdn.com/b/oldnewthing/archive/2003/08/21/54675.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2003/08/21/54675.aspx) for an explanation of the times when GetWindowText (and one assumes by extension this undocumented method) will return something different.

# spring - 检查 jms 队列是否已启动

> ID：16153668
> 
> 赞同：0
> 
> 时间：2013-04-22T18:00:31.203
> 
> 标签：spring, jms, apache-camel

有没有办法捕捉超时并将其发送回用户？不确定 Apache Camel 是否提供了开箱即用的功能。
我想测试并提醒用户哪些队列已启动并正在运行。这样用户就可以清楚地知道应用程序的哪些功能可以工作。
我在我的项目中`Spring`都使用了。`Apache Camel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:18:30.743

啊! 我发现。Camel 有一个开箱即用的解决方案。

```
Camel 2.1: Specifies whether to test the connection on startup. This ensures that when Camel starts that all the JMS consumers have a valid connection to the JMS broker. If a connection cannot be granted then Camel throws an exception on startup. This ensures that Camel is not started with failed connections. From Camel 2.8 onwards also the JMS producers is tested as well. 
```

# javascript - 使用jQuery隐藏括号中的文本

> ID：16153670
> 
> 赞同：1
> 
> 时间：2013-04-22T18:00:34.470
> 
> 标签：javascript, jquery, sharepoint, search, sharepoint-2010

我在 SharePoint 2010 网站上有一个图像搜索页面。用户可以按关键字搜索，也可以选择按图像类型（例如，缩略图、高分辨率等）进行过滤。因此，假设我搜索“医学”并通过选项之一“缩略图”过滤图像类型 - 我在结果页面的顶部得到以下摘要：

***医学* 图像搜索结果
*(ImageType="thumbnail")***

我想要的只是显示第一行，因此搜索词包含在顶部，但不是图像类型（基本上是括号中的所有文本）。这两行都包裹在同一个 div 标签中，所以我认为 jQuery 将有必要隐藏其中的括号和文本。

这是当前设置的 HTML 和 JS：

```
<div>
Image Search Results for 
<em>
<script type="text/javascript">
var searchword = document.getElementById('ctl00_g_b54753eb_fcc2_4937_9c5a_3541d9af497b_SE26EBB34_InputKeywords').value;
document.write(searchword)
</script>
medicine (ImageType="thumbnail")
</em>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:07:21.777

只要您在 之后不想要任何东西`(`，那么您可以在该字符处拆分字符串并相应地编写它：

```
var searchword = document.getElementById('ctl00_g_b54753eb_fcc2_4937_9c5a_3541d9af497b_SE26EBB34_InputKeywords').value;
searchword = searchword.split("(")[0];
document.write(searchword) 
```

如果后面有`)`你可能想要包含的东西，你将不得不变得更花哨。只要您确定始终只有一组括号，这应该可以工作：

```
var searchword = document.getElementById('ctl00_g_b54753eb_fcc2_4937_9c5a_3541d9af497b_SE26EBB34_InputKeywords').value;
searchword = searchword.split("(")[0] + searchword.split(")")[1];
document.write(searchword) 
```

# android - 使用 Google API 显示地图

> ID：16153672
> 
> 赞同：-3
> 
> 时间：2013-04-22T18:00:39.490
> 
> 标签：android, google-maps, google-maps-api-2

我想使用谷歌 API 显示地图。我可以使用 debug.keystore 生成 API 密钥，但它只显示带有标签 google 的网格而不是地图我在 xml 文件中添加了 MapView 控件。我错过了什么？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.maptest"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="8" />
<permission
    android:name="com.example.maptest.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission android:name="com.example.maptest.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_GPS" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.maptest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.google.android.gms" />
    <uses-library android:name="com.google.android.maps" android:required="true" />

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:31:01.743

您很可能在清单中缺少某些权限，可能是`MAPS_RECEIVE`或`READ_GSERVICES`。检查这个相关的[问题](https://stackoverflow.com/questions/13727992/google-maps-api-v2-failed-to-load-map-could-not-contact-google-servers)。

**编辑**：在结束标记之前插入您的 API 密钥`</application>`：

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="your_api_key"/> 
```

添加`ACCESS_NETWORK_STATE`权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

删除这些行：

```
<activity android:name="com.google.android.gms" />
<uses-library android:name="com.google.android.maps" android:required="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:16:17.513

我认为您没有在您的项目中添加对 Google Play 服务库的引用。有关更多帮助，请参阅本指南[Google Maps Android v2 。](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:48:11.493

请检查您是否在控制台中使用了谷歌安卓地图而不是谷歌地图。这也可能是个问题。除此之外，另一个问题可能是，您可能使用了地图片段。在 xml 中使用支持 Fragment

android:name="com.google.android.gms.maps.SupportMapFragment"

谷歌地图通用；

```
gm = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(R.id.map))).getMap(); 
```

# android - 前台服务保留内存对象

> ID：16153674
> 
> 赞同：4
> 
> 时间：2013-04-22T18:00:40.843
> 
> 标签：android, memory-management

我的 Android 应用程序本质上是一个前台服务。应用程序的用户界面方面用于设置和配置此前台服务。

当通过应用程序 UI 启动服务时，它开始显示 23mb 的内存使用情况。

当 Android 启动服务时（例如在启动时），它开始显示 7mb 的内存使用量。如果打开应用程序 UI，内存使用量会增加到 23mb。

当在 UI 的 MainActivity 中调用 onDestroy() 时，关联的可绘制对象和资源保留在附加到前台服务的内存中，并且不会被垃圾收集。

我可以通过调用`System.exit(0)`MainActivity 的 onDestroy() 来“解决”问题。然后 Android 在 7mb 处重新启动前台服务。

此外，我可以使用`android:process`Manifest 中的标签来分隔 UI 和服务元素。

不过，上述“解决方案”都没有解决实际问题，我希望能在您的帮助下做到这一点！

通过 Eclipse 使用 MAT 工具，我可以看到内存中保留了各种对象，仅有的两个显着大小是：

```
Class Name | Shallow Heap | Retained Heap Percentage

class android.content.res.Resources @ 0x40ef7910 System Class|           40 |     8,475,664 |     68.71%
android.graphics.drawable.BitmapDrawable$BitmapState @ 0x411beb20|       40 |     1,127,720 |     9.14% 
```

检查到 gc 根的路径没有提供关于为什么这些保留在内存中的任何线索，或者是什么持有对它们的引用。

我已经尝试过我正在使用的上下文`MainActivity.this`，`getApplicationContext()`并删除了对静态变量的引用，但我就是无法摆脱这些内存对象。

任何帮助将不胜感激。

**编辑：不包括弱引用的 gc 根路径：**

```
Class Name | Shallow Heap | Retained Heap

class android.content.res.Resources @ 0x40ef7910 System Class|     40 |     8,475,664

Class Name      | Shallow Heap Retained Heap

android.graphics.drawable.BitmapDrawable$BitmapState @ 0x411beb20|  40 | 1,127,720

Class Name                              | Shallow Heap | Retained Heap**

[224] java.lang.Object[510] @ 0x41843738|        2,056 |     8,466,904

mValues android.util.LongSparseArray @ 0x40f46b28|  24 |     8,471,024

sPreloadedDrawables class android.content.res.Resources @ 0x40ef7910 SystemClass|          40 |     8,475,664

Found 1 path. No more paths left - for both entries. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:11:48.590

> 我的 Android 应用程序本质上是一个前台服务。应用程序的用户界面方面用于设置和配置此前台服务。

这适用于极少数的应用程序。

> 检查到 gc 根的路径没有提供关于为什么这些保留在内存中的任何线索，或者是什么持有对它们的引用。

这个`Resources`至少存在于每个 Dalvik 进程中，并且不能被删除。很可能`BitmapDrawable$BitmapState`与`Resources`.

# php - 防止 $_GET 方法的注入和正确的语法

> ID：16153676
> 
> 赞同：1
> 
> 时间：2013-04-22T18:00:49.183
> 
> 标签：php, phpmyadmin

所以，我试图在防止注射的同时使用 get 方法。我正在尝试从数据库中获取数据并将其回显到页面。我认为我正在尝试使用下面的代码做什么很明显，但我需要帮助才能使用正确的语法。

有人可以告诉我准备语句的正确语法，以便使用 mysqli 从数据库中获取数据，该数据库可以防止注入？

我在这个网站上看过似乎找不到我要找的东西，而 PHP 网站我找不到最新的方法。感谢所有的帮助。

```
<?php
$mysqli = new mysqli("", "", "", "");
if ($mysqli->connect_error) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_error . ") " . $mysqli->connect_error;
}

$stmt = $mysqli->stmt_init();

if($stmt->prepare("SELECT 'name,name' FROM 'table' WHERE 'name, name' = ?,?")) {
}

if (!$stmt->bind_param('si', $_GET['name'], $_GET['name'])); {
    echo "Binding parameters failed: (" . $stmt->error . ") " . $stmt->error;
}

if (!$stmt->execute()) {
    echo "Execute failed: (" . $stmt->error . ") " . $stmt->error;
}

if (!$stmt->fetch()); {
    echo "Binding parameters failed: (" . $stmt->error . ") " . $stmt->error;
}

$stmt->close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T13:16:45.087

如果您想保护所有 GET 输入，这是更好的解决方案：

```
function GET($name=NULL, $value=false)
{
    $content=(!empty($_GET[$name]) ? trim($_GET[$name]) : (!empty($value) && !is_array($value) ? trim($value) : false));
    if(is_numeric($content))
        return preg_replace("@([^0-9])@Ui", "", $content);
    else if(is_bool($content))
        return ($content?true:false);
    else if(is_float($content))
        return preg_replace("@([^0-9\,\.\+\-])@Ui", "", $content);
    else if(is_string($content))
    {
        if(filter_var ($content, FILTER_VALIDATE_URL))
            return $content;
        else if(filter_var ($content, FILTER_VALIDATE_EMAIL))
            return $content;
        else if(filter_var ($content, FILTER_VALIDATE_IP))
            return $content;
        else if(filter_var ($content, FILTER_VALIDATE_FLOAT))
            return $content;
        else
            return preg_replace("@([^a-zA-Z0-9\+\-\_\*\@\$\!\;\.\?\#\:\=\%\/\ ]+)@Ui", "", $content);
    }
    else false;
} 
```

只是 $_GET['something'] 您使用 GET('something') 并且如果 GET 值不存在，您可以选择放置默认值。在 MySQL 查询中，您可以使用转义字符串或准备好的状态来完全保护您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:10:08.643

为了防止 sql 注入，你应该首先连接到你的 mysql 数据库，然后你应该用 mysql_real_escape_string() 包围你的 $_GET，如下所示：

```
mysql_real_escape_string($_GET['name']) 
```

或使用较新的功能

```
mysqli_real_escape_string($_GET['name']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:25:48.637

你的sql是错误的：

```
if($stmt->prepare("SELECT 'name,name' FROM 'table' WHERE 'name, name' = ?,?")) { 
```

一定是

```
if($stmt->prepare("SELECT name, name FROM table WHERE name=? AND name=? ")) { 
```

双倍的表现力`name`，我只是因为这个问题才使用的。

以下更清楚：

```
if($stmt->prepare("SELECT astring, ainteger FROM table WHERE astring=? AND ainteger=? ")) 
{
if (!$stmt->bind_param('si', $_GET['astring'], $_GET['ainteger'])) { 
```

花点时间仔细写下问题。如果使用了两个变量，则指定不同，其他一切都只是混淆。

**更新 ：**

*   使用前`bind_param()`
*   您必须测试所有 $_GET["xx"]。

`if (isset($_GET['name']))`

*   当您调用函数时，`;`例如以以下方式终止：

`if (!$stmt->bind_param('si', $_GET['name'], $_GET['name'])); {`

那么花括号是没用的，无论是`if`gets`true`还是`false`！

后面的代码`if (!$stmt->bind_param(...));`总是会被执行，因为命令，已经完成了。

```
if (!$stmt->bind_param('si', $_GET['name'], $_GET['name'])); {
    echo "Binding parameters failed: (" . $stmt->error . ") " . $stmt->error;
} 
```

我花了很长时间才发现这个错误。它很容易被忽视。

**这就是为什么您总是会收到自己的错误消息。**

# c# - DataGridComboBoxColumn 在 CellEnter 上显示第一个值

> ID：16153681
> 
> 赞同：1
> 
> 时间：2013-04-22T18:01:01.023
> 
> 标签：c#, winforms, visual-studio-2010, datagridview, datagridviewcombobox

我的 DataGridViewComboBoxColumn 出现奇怪的结果。

1）当没有设置值时，我单击单元格（不是下拉箭头），选项中的第一个值显示为值，当我单击单元格时，它返回空白值。这是一种误导，因为没有选择任何值，但它会显示第一个值，直到您单击单元格为止。

一个解决方案是将第一个选项设为空白，但是我仍然受到下一个问题的困扰......

2）如果我选择一个已经有值的单元格，然后选择一个没有值的单元格，最初选择的值将显示在没有选择值的单元格中。同样，单击单元格将清除它，但是，它再次具有误导性。

我想让这不会误导......有人知道解决方案吗？

```
DataGridViewComboBoxColumn col = new DataGridViewComboBoxColumn(); 

DataTable dt = new DataTable();
dt.Columns.Add("f_Id");
dt.Columns[0].DataType = typeof(string);
dt.Columns.Add("f_Desc");
dt.Columns[1].DataType = typeof(string);

for (int i = 0; i < values.Count(); i++)
{
    dt.Rows.Add(values[i], values[i]);
}

col.DataSource = dt;
col.DisplayMember = dt.Columns[1].ColumnName;
col.ValueMember = dt.Columns[0].ColumnName;
col.HeaderText = header;
col.Name = header;

DataGridView1.Columns.Add(col); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T10:27:20.263

我也在寻找这个并最终解决了这个问题。创建 DatagridView 的以下事件并将 [comboboxcolumnNo] 设置为您的 datagridcomboboxcolumn 编号。

现在，每当组合框列将获得焦点进行编辑时，它将检查当前单元格值是否为空，如果为空，则它将显示组合框的 -1 索引，该索引不显示任何内容。

```
 private void datagridview1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (datagridview1.CurrentCell.ColumnIndex == comboboxcolumnNo && e.Control is ComboBox)
        {
            ComboBox comboBox = (ComboBox)e.Control;
            if (datagridview1.CurrentCell.Value == null)
            {
                comboBox.SelectedIndex = -1;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T17:31:26.113

这也困扰了我一段时间，Zeeshanef 的代码有所帮助，但还没有完全解决我的问题。经过进一步调查，我发现如果您使用 DefaultValuesNeeded 方法设置一些默认值，则可能会设置单元格值，但在 EditingControlShowing 方法中显示的组合框控件具有空值/文本。我通过像这样调整代码来解决它：

```
private void datagridview1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (e.Control is ComboBox)                
        {
            ComboBox comboBox = (ComboBox)e.Control;
            if (datagridview1.CurrentCell.Value == null
                || string.IsNullOrEmpty(datagridview1.CurrentCell.Value.ToString())
                || string.IsNullOrEmpty(comboBox.SelectedText)
                )
            {
                comboBox.SelectedIndex = -1;
            }               
        }
    } 
```

# c# - 如何从另一个类调用 Combox.Text

> ID：16153682
> 
> 赞同：0
> 
> 时间：2013-04-22T18:01:01.147
> 
> 标签：c#, winforms

在表格 1 中，我放置了 Comboxbox 组件，我已经完成了这个......

```
string value = cBAdmin.Text; 
```

我想将那个 Comboxbox 保留在表格 1 中，但我想从另一个类中调用那个 Comboxbox 并完成其余的编码。我该怎么做呢？如果有人可以在这里帮助我，请提前感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:07:48.793

Very bad idea, but you can expose it a a public textbox, or you can expose the value through a get property, something like

```
public string TextBoxValue { get { return cBAdmin.Text; } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:11:05.893

好吧，如果您**不**打算**从不同的线程**调用 Combobox 属性，您可以执行类似的操作。我不确定这是否是你要找的？？

```
Foo c = new Foo( cBAdmin );
c.DoSomethingWithComboBox();

public class Foo
    {
        private ComboBox m_cb;
        public Foo(ComboBox cb)
        {
            m_cb = cb;
        }
        public void DoSomethingWithComboBox()
        {
            //Do something with m_cb
        }
    }
} 
```

# assembly - 我们如何一次使用两个 32 位 reg(32 + 32 = 64) 使其能够获取 64 位值？汇编语言 8086

> ID：16153692
> 
> 赞同：0
> 
> 时间：2013-04-22T17:46:24.807
> 
> 标签：assembly, x86, masm, irvine32

汇编语言 8086：

我已经制作了一个加法程序，它在控制台中取两个值并给我们结果..如果我们给出更高的值，它只能取**32 位（8 位）**以下的值，那么它将在控制台 winbdow 中给出整数溢出错误..

**如果我想在 input1 和 input2 中提供超过 32 位的值，我该怎么做？**可以通过制作 DWORD（32 位）数组并放入一半（16 位）一半（16 位）值来完成

**例如：**

array1 DWORD 2 DUP(?)

array2 DWORD 2 DUP(?)

我想通过使用 32 位寄存器将 value1 添加到 value2 并在 64 位（等于 16 位）下给出值.. 可以使用 2 reg 的空间（32 + 32 = 64 位）？...

我们如何制作 2 个 32 位寄存器使其成为 64 位我知道这是可能的，但我不知道该怎么做......因为我是汇编语言的新手

我在汇编语言中使用 KIP.R.IRVINE 链接库

**我们将如何使用 2 个 32 位 reg 给出 64 位值？或者我们如何使 2 32bit reg 取 64bit 值？** 我不知道如何编码..需要编码方面的帮助

这是 32 位加法的代码：

```
INCLUDE Irvine32.inc
    ; In above i am calling KIP.R.IRVINE Link Library for assembly language

 .data

 Addition BYTE "A: Add two Integer Numbers", 0

 inputValue1st BYTE "Input the 1st integer = ",0
 inputValue2nd BYTE "Input the 2nd integer = ",0

   outputSumMsg BYTE "The sum of the two integers is = ",0

  num1 DD ?
  num2 DD ?
  sum  DD ?

  .code

 main PROC

 ;----Displays addition Text-----

 mov edx, OFFSET Addition
 call WriteString
 call Crlf
  ;-------------------------------

 ; calling procedures here

  call InputValues
  call addValue
  call outputValue

   call Crlf

  jmp exitLabel

  main ENDP

     ; the PROCEDURES which i have made is here

  InputValues PROC
  ;----------- For 1st Value--------

   call Crlf
   mov edx,OFFSET inputValue1st ; input text1
   call WriteString

   ; here it is taking 1st value
   call ReadInt    ; read integer
   mov num1, eax   ; store the value

    ;-----------For 2nd Value----------

    mov edx,OFFSET inputValue2nd ; input text2
    call WriteString

  ; here it is taking 2nd value
  call ReadInt    ; read integer
  mov num2, eax   ; store the value

  ret
  InputValues ENDP

 ;---------Adding Sum----------------

 addValue PROC
 ; compute the sum

 mov eax, num2  ; moves num2 to eax
 add eax, num1  ; adds num2 to num1
 mov sum, eax   ; the val is stored in eax

 ret
 addValue ENDP

 ;--------For Sum Output Result----------

 outputValue PROC

 ; output result

 mov edx, OFFSET outputSumMsg ; Output text
 call WriteString

 mov eax, sum
 call WriteInt ; prints the value in eax

 ret
 outputValue ENDP

 exitLabel:
 exit

END main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:52:28.887

8086（以及我使用过的所有其他处理器）维护一组“条件代码”，其中包括一个“进位”（引用的术语是为了您的谷歌搜索乐趣）。

当您添加两个无符号 32 位量时，如果总数超过 32 位，则将设置进位位。您可以根据需要添加任意数量的 32 位（或 64 位）数量，只要您合并了之前添加的进位位。

# php - PHP - 如何部分比较 2 个数组中的元素

> ID：16153695
> 
> 赞同：1
> 
> 时间：2013-04-22T18:01:32.647
> 
> 标签：php, arrays, string, similarity

我有 2 个数组：

```
$arr1 = array('Test', 'Hello', 'World', 'Foo', 'Bar1', 'Bar'); and
$arr2 = array('hello', 'Else', 'World', 'Tes', 'foo', 'BaR1', 'Bar'); 
```

我需要比较两个数组并将匹配元素的位置保存到第三个数组`$arr3 = (3, 0, 2, 4, 5, 6); //expected result, displaying position of matching element of $arr1 in $arr2.`

“匹配”是指所有相同的元素（例如 World）或部分相同的元素（例如 Test 和 Tes），以及那些相似但大小写不同的元素（例如 Foo 和 foo、Bar 和 bar ）。

我尝试了一系列组合和各种功能，但没有成功，使用类似的功能`array_intersect(), substr_compare(), array_filter()`。我不是在要求确切的解决方案，只是为了让我走上正确的轨道，因为我整个下午都在绕圈子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:15:12.217

这似乎对我有用，但我敢肯定，我缺少一些需要测试的边缘情况：

```
foreach( $arr1 as $i => $val1) {
    $result = null;
    // Search the second array for an exact match, if found
    if( ($found = array_search( $val1, $arr2, true)) !== false) {
            $result = $found; 
    } else {
        // Otherwise, see if we can find a case-insensitive matching string where  the element from $arr2 is at the 0th location in the one from $arr1
        foreach( $arr2 as $j => $val2) {            
            if( stripos( $val1, $val2) === 0) {
                $result = $j;
                break;
            }
        }
    }
    $arr3[$i] = $result;
} 
```

它[产生您想要的输出数组](http://viper-7.com/S6KPer)：

```
Array ( [0] => 3 [1] => 0 [2] => 2 [3] => 4 [4] => 5 [5] => 6 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:06:37.000

尝试[`array_uintersect()`](http://php.net/manual/en/function.array-uintersect.php)使用实现“匹配”算法的回调函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:11:19.550

看起来您需要 2 个 foreach 循环和 stripos（或 mb_stripos 用于 Unicode）进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:29:32.460

我想出了这个来解决重复问题。它返回两个键和两个值，以便您可以比较它是否正常工作。要对其进行改进，您只需注释掉设置不需要的值的行。它匹配所有情况。

```
<?php

$arr1 = array('Test', 'Hello', 'World', 'Foo', 'Bar1', 'Bar');
$arr2 = array('hello', 'Else', 'World', 'Tes', 'foo', 'BaR1', 'Bar');

$matches = array();
//setup the var for the initial match
$x=0;
foreach($arr1 as $key=>$value){

$searchPhrase = '!'.$value.'!i';

    //Setup the var for submatching (in case there is more than one)
    $y=0;
    foreach($arr2 as $key2=>$value2){
        if(preg_match($searchPhrase,$value2)){
            $matches[$x][$y]['key1']=$key;
            $matches[$x][$y]['key2']=$key2;
            $matches[$x][$y]['arr1']=$value;
            $matches[$x][$y]['arr2']=$value2;   
        }
        $y++;
    }
    unset($y);
    $x++;
}

print_r($matches);

?> 
```

输出如下所示：

```
 Array
(
    [1] => Array
        (
            [0] => Array
                (
                    [key1] => 1
                    [key2] => 0
                    [arr1] => Hello
                    [arr2] => hello
                )

        )

    [2] => Array
        (
            [2] => Array
                (
                    [key1] => 2
                    [key2] => 2
                    [arr1] => World
                    [arr2] => World
                )

        )

    [3] => Array
        (
            [4] => Array
                (
                    [key1] => 3
                    [key2] => 4
                    [arr1] => Foo
                    [arr2] => foo
                )

        )

    [4] => Array
        (
            [5] => Array
                (
                    [key1] => 4
                    [key2] => 5
                    [arr1] => Bar1
                    [arr2] => BaR1
                )

        )

    [5] => Array
        (
            [5] => Array
                (
                    [key1] => 5
                    [key2] => 5
                    [arr1] => Bar
                    [arr2] => BaR1
                )

            [6] => Array
                (
                    [key1] => 5
                    [key2] => 6
                    [arr1] => Bar
                    [arr2] => Bar
                )

        )

) 
```

# jquery-ui - Jquery UI Droppable 在图像地图上

> ID：16153698
> 
> 赞同：1
> 
> 时间：2013-04-22T18:01:46.103
> 
> 标签：jquery-ui, drag-and-drop

我有一个定义如下的图像映射

```
 <img src="../../Content/Images/Mapimage.png"  usemap="#Map" />
        <map name="Map">
            <area id="s1" shape="rect" coords="200,45,270,105"/>
            <area id="s2" shape="rect" coords="215,275,280,335"/>
            <area id="s3" shape="rect" coords="110,270,180,335"/>
        </map> 
```

和一个可拖动的图像

```
 <img src="../../Content/Images/image1.png" id="draggableImage"/> 
```

和jQuery

```
 $("#draggableImage").draggable({
        helper: 'clone',
        appendTo: 'body',

    });

     $("#s1").droppable({
        drop: function (event, ui) {
            alert("Got it");
        }
    }); 
```

当我拖放时没有任何反应。如果我拖放到我已设置为可放置但不在图像映射中的 div 上，则它可以工作。当我放在图像地图区域时，它只是不起作用。任何想法如何在图像地图区域上执行此操作？谢谢！

# html - 避免响应式页面的重复内容

> ID：16153699
> 
> 赞同：9
> 
> 时间：2013-04-22T18:01:46.127
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我目前正在做一个处理响应式设计的项目，整个布局应该使用 HTML 和 CSS 来实现。我知道它可以将内容从一个列布局移动到另一个列布局，而无需复制内容，使用 java 脚本，但使用 HTML 和 CSS 可以实现相同吗？

以下面的例子为例，它会在桌面设计上呈现这样的效果

```
--page-------------------
|  --------  --------   |
|  |div 1 |  | div 2|   |
|  --------  --------   |
------------------------- 
```

但后来设计师已经转移`div1`到`div2`了移动设计的下方。

```
--page--------
|  --------  |
|  |div 2 |  |
|  --------  |
|  --------  |
|  |div 1 |  |
|  --------  | 
-------------- 
```

显然，块级元素堆叠的自然方式是相反的。

```
--page-------------------
|  --------  --------   |
|  |div 1 |  | div 2|   |  <--- shown on desktop
|  --------  --------   |
|  --------             |
|  |div 1 |             |  <--- hidden on desktop
|  --------             |
-------------------------

--page--------
|  --------  |
|  |div 1 |  | <--- hidden on mobile
|  --------  | 
|  --------  |
|  |div 2 |  | <--- shown on mobile
|  --------  |
|  --------  |
|  |div 1 |  | <--- shown on mobile
|  --------  | 
-------------- 
```

使用上述内容，`div1`复制了 的内容。这对SEO有害吗？显然它不是最佳的，因为内容在 DOM 等中出现两次，因此速度受到影响（尽管可能可以忽略不计）。

是否有任何其他我可以实施的不基于 javascript 的解决方案可以缓解这个问题？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-16T14:53:39.270

如果您要隐藏和取消隐藏元素，则 SEO 的重复内容是响应式页面的真正问题。代码仍然在 DOM 中呈现，如果搜索引擎可以看到代码（即使用户看不到输出），它仍然会对您不利。上面的答案都没有为此提供真正的解决方案，老实说，我现在也不能。

我正朝着从 DOM 中使用 javascript 实际删除元素的方向发展，但这会变得非常混乱并且也不理想。

上面的媒体查询答案不会改变您仍然有 HTML 输出到具有重复内容的 DOM 的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-13T14:04:13.227

*   CSS`order`属性可用于对子项重新排序`flex`。
*   Bootstrap4 引入了一些（响应式）flex 实用程序，您可以使用它们来更改 flex 子项的顺序。

```
<div class="row">
    <div class="col-sm-6 order-2 order-sm-1">div 1</div>
    <div class="col-sm-6 order-1 order-sm-2">div 2</div>
</div> 
```

考虑上面基于引导的代码段。`div 1`并`div 2`以源顺序出现在`sm`更高版本的设备（md、lg、xl）上，而在设备上`div 2`出现之前。`div 1``xs`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:13:07.473

如果 div 的大小是可预测的（例如 50em），您可以用`position: relative`负值来抵消它们`top`。这将让您在不更改标记的情况下呈现重新排序的流的外观。

例如：

```
#div1 {
    float: left
    clear: both;
    height: 50em;
    position: relative;
    top: 50em;
}

#div2 {
    float: left
    clear: both;
    height: 50em;
    position: relative;
    top: -50em;
} 
```

将其放在媒体查询中，它将为您提供所需的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-03T08:59:30.493

当然，决斗内容是一个最好避免的问题。我们应该始终创建可以是任何高度的元素，以允许 CMS 内容。

我建议加价顺序应该是：

```
--page--------
|  --------  |
|  |div 2 |  |
|  --------  |
|  --------  |
|  |div 1 |  |
|  --------  | 
-------------- 
```

...正如设计师在移动布局中指定的那样。宽度往往比高度更容易知道，所以在桌面上，你可以做“旧的 switcharoo”来改变他们的位置。Clearfix 是隐含的。例如在桌面上：

```
.div1, .div2 {
  float: left;
  position: relative;
  width: 200px;
}
.div2 {
  right: -200px;
}
.div1 {
  left: -200px;
} 
```

...这应该给你这个布局：

```
--page-------------------
|  --------  --------   |
|  |div 1 |  | div 2|   |
|  --------  --------   |
------------------------- 
```

（我没有检查过这段代码——很可能我的左右混淆了）

这有意义吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-13T19:51:02.613

我知道我迟到了，但我希望这对其他人有帮助。

我会通过认为它是移动优先来解决它。`#div1`应该是移动分辨率中显示的第一个，`#div2`第二个。

然后我会让它们都向右浮动，因此“第一个”将在需要时显示在右侧。

这是一个示例（最好在整页中查看以查看响应性）：

```
* { box-sizing: border-box; }
div { border: 1px solid gray; }
#div1 { background: lightblue; }
#div2 { background: yellow; }
@media (min-width: 768px) {
  div {
    display: inline-block;
    width: 50%;
    float: right;
  }
}
```

```
<div id="div1">
  <p>This div will be shown on top on mobile resolutions, and will be in the right in any other resolution!</p>
  <p>We could say it will be a main content holder in mobile, and secondary in desktop</p>
</div>
<div id="div2">
  <p>This div will be shown on bottom on mobile resolutions, and will be in the left in any other resolution!</p>
  <p>We could say it will be a main content holder in desktop, and secondary in mobile</p>
</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-16T12:40:11.157

您可以使用 CSS Flexbox 的 order 属性来执行此操作：假设您的标记是：

```
.my-flex-container {
  display: flex;
}

/* change order on devices <= 768px */
@media (max-width: 768px) {
  .my-flex-container {
    flex-direction: column;
  }
  #div1 {
    order: 2;
  }
  #div2 {
    order: 1;
  }
}
```

```
<div class="my-flex-container">
  <div id="div1">Content of div1</div>
  <div id="div2">Content of div2</div>
</div>
```

希望它对你有用

# php - “不推荐使用函数 split()”错误在 wordpress 中使用 DIGG DIGG

> ID：16153704
> 
> 赞同：0
> 
> 时间：2013-04-22T18:02:05.710
> 
> 标签：php, wordpress

我一直在使用[Digg Digg](http://wordpress.org/extend/plugins/digg-digg/)，一旦我部署了我的 wordpress 博客，我开始收到以下错误：

```
Function split() is deprecated in /../../dd-manual.php on line 385 
```

我正在使用代码块的手动实现。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:03:40.847

你应该使用[爆炸](http://www.php.net/manual/en/function.explode.php)。更改以下行：

```
from 385: $link = split(DD_DASH,$postlink);
to   385: $link = explode(DD_DASH,$postlink); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:02:05.710

在网上，我找到了类似的答案：[http](http://forums.devshed.com/php-development-5/function-split-is-deprecated-how-to-fix-my-code-930614.html) ://forums.devshed.com/php-development-5/function-split-is-deprecated-how-to-fix-my-code-930614.html他们建议删除提示功能从基地。我不喜欢那个解决方案。

使用 preg_split 解决了这个问题，只需替换以下行：

```
from 385: $link = split(DD_DASH,$postlink);
to   385: $link = preg_split("/{DD_DASH}/",$postlink); 
```

为我工作，如果这是

# css - CSS 跨浏览器居中

> ID：16153710
> 
> 赞同：2
> 
> 时间：2013-04-22T18:02:32.187
> 
> 标签：css

我正在研究弹出框，我有一个页面，我点击一个按钮，它会弹出一个框。这个问题是弹出窗口不在屏幕中央。我必须使页面跨浏览器兼容。

这是我的代码。

CSS：

```
.popup{
    /* css3 drop shadow */
    -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
       -moz-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    /* css3 border radius */
    -webkit-border-radius: 5px;
       -moz-border-radius: 5px;
    background:#eee;
    /* styling of the dialog box, i have a fixed dimension for this demo */
    width:50%;
    /* make sure it has the highest z-index */
    clear:both; 
    height:240px;
    position:relative;
    z-index:5000;
    /* hide it by default */
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:05:37.667

水平和垂直居中：

```
.popup{
    -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
       -moz-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 5px;
       -moz-border-radius: 5px;
            border-radius: 5px;
    background: #eee;
    width: 50%;
    height: 240px;
    z-index: 5000;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -25%;
    margin-top: -120px;
    clear: both;
//    display: none;
} 
```

小提琴：http: [//jsfiddle.net/AwCWs/](http://jsfiddle.net/AwCWs/)

# html - Grep for html 的最佳方式

> ID：16153714
> 
> 赞同：0
> 
> 时间：2013-04-22T18:03:02.590
> 
> 标签：html, linux, count, grep

我在使用 grep 来通过一些 html 代码时遇到问题。

我正在尝试找到与此类似的字符串

```
<td><a href='/go/12229' target="_blank" rel="nofollow">product description here</a></td><td> $<font color='red'>0.25</font> 
```

我正在尝试推广公式来计算低于 0.25 美元的每一行 不同的部分是： href='/go/12229' /go/ 之后的数字会改变，但总是一个 5 位数长的数字

产品描述可以是带有空格和特殊字符的字母数字

价格可以是 0.01 到 0.25 之间的任何值

我试过制作像下面这样的公式，但它要么不起作用，要么什么也不返回。

```
grep -c "href='/go/'[*] target="_blank" rel="nofollow">*</a></td><td> $<font color='red'>[0].[0-2][0-9]</font>" 
```

我认为这与我没有正确转义特殊字符有关，但我不确定。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:41:13.517

好的 - 这要求每行的格式与您的示例一样，但这应该为您提供每行介于 0.01 和 0.25 之间的链接、描述和价格。这段代码的内容将它们放在像“priceawk”这样的文件中并使其可执行：

```
grep 'go\/[0-9]\{5\}' | awk -F"<" '
{
split( $7, price_arr, ">" )

if( price_arr[ 2 ] > 0.00 && price_arr[ 2 ] < 0.26 )
    {
    split( $3, link_arr, "'\''" )
    split( link_arr[ 3 ], desc_arr, ">" )
    printf( "%s %s %s\n", link_arr[ 2 ], desc_arr[ 2 ], price_arr[ 2 ] )
    }
} ' 
```

然后像这样使用它：

```
cat input | priceawk 
```

使用我从您的行制作的测试输入文件，我得到以下类型的输出：

```
/go/12229 product description here 0.25
/go/13455 find this line2 0.01
/go/12334 find this line3 0.23
/go/34455 find this line4 0.16 
```

可以改进 printf() 以提供不同形式的输出，使用比当前空间更有用的分隔符。

# events - 与 tkinter 的 Python 事件绑定

> ID：16153715
> 
> 赞同：3
> 
> 时间：2013-04-22T18:03:05.410
> 
> 标签：events, binding, python-3.x, tkinter, key

所以伙计们，我是 Python 中的 GUI 新手，我一直在尝试理解事件过程，这是我的代码，以及每当我按下“a”键时它应该打印“按下键”的意图。但它不会不适合我。

```
#!/usr/bin/env python3
# -*-coding:UTF-8 -*

from tkinter import *

root = Tk()

def callback(event):
    print("key pressed")

canvas = Canvas(root, width=100, height=100, bg='blue')
canvas.bind("a", callback)
canvas.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:12:38.940

它不执行回调函数，因为程序的焦点在`Tk`元素上。如果将该行替换为`root.bind("a", callback)`，它将按预期工作。

问题是，当您像其他小部件一样单击 canvas 元素作为 Entry 时，它不会获得焦点，因此如果您调用 first ，它只会响应 keydown 事件`canvas.focus_set()`。

# .net - 具有多个角色的用户的 Sitecore 权限

> ID：16153716
> 
> 赞同：1
> 
> 时间：2013-04-22T18:03:09.933
> 
> 标签：.net, security, sitecore, roles, sitecore6

假设我有从活动目录导入的用户，并且我对 AD 角色只有只读权限（我仍然可以在顶部添加我的站点核心角色）：

每个用户都属于通用域用户角色

我还有其他角色，例如budgetviewers

我有一个文件夹，预算应该只能由具有budgetviewers 角色的用户访问。

因此，访问该文件夹的典型用户将是 domainusers 和 budgetviewers 角色

现在，我的问题是拒绝特权/继承似乎优先于“允许特权”。因此，如果域用户在预算文件夹上被拒绝特权和/或继承，无论我对预算查看者角色做什么，用户都无法看到该文件夹​​。由于每个用户都在 domainusers 文件夹中，因此没有用户可以访问预算文件夹。如果我不限制域用户查看预算文件夹，因为每个用户都担任该角色，每个人都会看到该文件夹​​。我没有权限/所有权从用户中删除域用户角色。何我应该接近这个。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:12:53.143

您应该在安全性中打破继承而不是拒绝访问权限。更多信息可以在[博](http://theclientview.net/2011/04/sitecore-recommended-practices-part-3-security-roles-and-users/)文和**Sitecore** [安全管理员手册](http://sdn.sitecore.net/upload/sitecore6/securityadministratorscookbook-usletter.pdf)第 5.2.3 章中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:16:43.543

我发现 sitecore 继承有一个小转折。假设您破坏了节点 X 中角色 A 的继承。然后，如果角色 B 想要访问该节点，则必须在节点 X 中明确允许它。如果您在父节点中这样做（我正在这样做），它就不起作用，具有角色 A 和 B 的用户将被拒绝。总而言之，通过打破继承，我不是告诉 sitecore“从这个项目重新开始”，而是“拒绝任何没有明确允许在这个项目上的人——我不在乎父母是谁”打破继承 + 继承允许其他角色的权限 = 拒绝破坏继承 + 允许同一节点中的权限 = 允许

# apache - bash脚本：特定用户的apache进程列表，其中C = 0

> ID：16153717
> 
> 赞同：0
> 
> 时间：2013-04-22T18:03:12.703
> 
> 标签：apache, bash

我正在编写一个 bash 脚本，需要从 apache 中检索 C 值（处理器利用率）为零的特定用户的进程列表。然后我想杀死那些进程。我的脚本目前看起来像这样：

```
process_user=myuser
max_instances=10
poll_interval=60

while true; do 
  count=$(ps -u $process_user | wc -l)
  echo "count: $count"
  if [[ $count > $max_instances ]]; then
    killall "$process_user"
    echo "Found $count $process_user processes. Killed."
  fi
  sleep "$poll_interval"
done 
```

以上方法可以很好地识别特定用户的进程并杀死它们。但是我不知道如何进一步限制处理器利用率是否为0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:50:38.043

这是一个解决方案：

```
process_user=myuser
max_instances=10
pool_interval=60

while sleep $pool_interval;do 
  ps -o pid,c -u $process_user --no-headers \
  | awk '                                   \
    $2 > 0{top=top " " $1}                  \
    {count++}                               \
    END {                                   \
      if(count > '$max_instances'  && top){ \
        system("kill " top);                \
        print "killed: " top                \
      }                                     \
    }'
done 
```

一些解释：

1.  `ps -o pid,c -u $user --no-headers` 显示**pid**和拥有的进程的处理器利用率 ( **c**`$user` ) 。跳过标题 ( `PID C`)
2.  `$2 > 0`- 该`{}`块将仅对第二个字段（处理器利用率）大于 0 的行执行。
3.  `{ top = top ' ' $1 }`**将pid**（第一个字段 - ）附加到以空格分隔的`$1`变量`top`
4.  `{count++}`计算所有行=用户进程
5.  `END {`这个块将在所有行都被处理之后执行

# c# - 从坐标中获取第一、第二、第三邻居的算法

> ID：16153721
> 
> 赞同：2
> 
> 时间：2013-04-22T18:03:25.620
> 
> 标签：c#, image, algorithm, image-processing

在每个像素的位图中，我试图获得它的第一、第二、第三......级别的邻居，直到位图结束，但我的解决方案有点慢，所以让我知道你们是否有更好的算法或方法：

![例子](https://i.stack.imgur.com/6RFGE.gif)

```
private IEnumerable<Point> getNeightboorsOfLevel(int level, Point startPos, Point[,] bitMap)
{
    var maxX = bitMap.GetLength(0);
    var maxY = bitMap.GetLength(1);
    if (level > Math.Max(maxX, maxY)) yield break;

    int startXpos = startPos.X - level;
    int startYpos = startPos.Y - level;
    int sizeXY = level * 2;

    var plannedTour = new Rectangle(startXpos, startYpos, sizeXY, sizeXY);
    var tourBoundaries = new Rectangle(0, 0, maxX, maxY);

    for(int UpTour  = plannedTour.X; UpTour<plannedTour.Width; UpTour++) 
        if (tourBoundaries.Contains(UpTour,plannedTour.Y)) 
            yield return bitMap[UpTour,plannedTour.Y];

    for(int RightTour  = plannedTour.Y; RightTour<plannedTour.Height;RightTour++)
        if (tourBoundaries.Contains(plannedTour.Right,RightTour)) 
            yield return bitMap[plannedTour.Right,RightTour];

    for(int DownTour  = plannedTour.X; DownTour<plannedTour.Width;DownTour++)
        if (tourBoundaries.Contains(DownTour,plannedTour.Bottom)) 
            yield return bitMap[DownTour,plannedTour.Bottom];

    for (int LeftTour = plannedTour.Y; LeftTour < plannedTour.Height; LeftTour++)
        if (tourBoundaries.Contains(plannedTour.X,LeftTour)) 
            yield return bitMap[plannedTour.X,LeftTour];

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:15:41.847

好吧，如果这太慢了，你可能想改变你的方法。

例如，`Dictionary<Color, List<Point>>`为位图中的每种颜色生成一个包含该颜色的点列表。然后当你得到一个点时，你会得到颜色，然后遍历点列表以找到最接近给定点的点。

这是对您的图像进行 1 次预计算，然后将复杂度更改为相同颜色的点数。我假设目前它很慢，因为您必须查看很多点，因为很难找到具有相同颜色的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:51:02.680

加快速度的一种方法是让你`plannedTour`包含边界。例如：

```
var plannedTour = new Rectangle(
    Math.Max(0, startPos.X - level),
    Math.Max(0, startPos.Y - level),
    Math.Min(maxX, startPos.X + level),
    Math.Min(maxY, startPos.Y + level)); 
```

这会预先计算边界并防止您在每次循环迭代时进行检查。例如，它还可以`Left`为您节省整个旅程。

如果你这样做，你需要一个`if`声明来防止检查边界之外的区域。例如：

```
if (plannedTour.Y >= minY)
{
    // do Up tour.
}
if (plannedTour.X <= maxX)
{
    // do Right tour
}
if (plannedTour.Y <= maxY)
{
    // do Down tour
}
if (plannedTour.X >= minX)
{
    // do Left tour
} 
```

一个小的优化是消除您正在检查的四个额外像素。在我看来，您好像在检查每个角落两次。您可以通过使左右游览从 开始`plannedTour.Y+1`并结束于来防止这种情况发生`plannedTour.Bottom-1`。

通过使用严格的从左到右、从上到下的检查，您也许可以节省一些时间，尽管它可能会很小。即检查Up行，然后在下一行检查左右像素，然后是下一行，以此类推，最后检查底行。这样做可能会给你更好的缓存一致性，因为它很可能会在同一个缓存行上，`bitMap[x-level, y]`而`bitmap[x+level, y]`不太可能`bitmap[x-level, y]`会`bitmap[x-level, y+1]`在同一个缓存行上。以这种方式进行内存访问所获得的节省可能不值得增加编码的复杂性。

# javascript - firebug console.table 返回未定义

> ID：16153735
> 
> 赞同：2
> 
> 时间：2013-04-22T18:04:49.157
> 
> 标签：javascript, firebug

我正在尝试查看二维数组的内容。我发现了在`console.table()` [这里](http://www.jquery4u.com/utilities/firebug-console-tips/ "这里")使用。每次我`console.log`在控制台中调用我都会得到`undefined`. 我已经尝试运行该站点的示例代码

```
var table1 = new Array(5);
for (var i=0; i<table1.length; i++)
    table1[i] = [i+1, i+2, i+3, i+4, i+5, i+6, i+7];
console.table(table1); 
```

以及`console.table`在调试器中暂停时调用我自己的数组。

关于如何让它发挥作用的任何想法？

编辑：当我在控制台中`undefined`输入时也会返回。`console.log("abc");`

Edit2：重新安装萤火虫似乎已经解决了这个问题。

# actionscript-3 - 由于 AS3 中的 URLloader 导致嵌套函数调用的运行顺序延迟/更改？

> ID：16153739
> 
> 赞同：0
> 
> 时间：2013-04-22T18:05:00.500
> 
> 标签：actionscript-3

首先：英语不是我的第一语言。;-)

我正在编译以下代码：

```
var sqldata:String;
function sql(saveorload,sqlstring) {
    var sqlloader = new URLLoader();
    var sqlrequest = new URLRequest("http://***/sql.php");
    sqlrequest.method = URLRequestMethod.POST;
    sqlloader.addEventListener(Event.COMPLETE, sqldonetrace);

    var variables:URLVariables = new URLVariables();
    variables.sqlm = saveorload;
    variables.sqlq = sqlstring;
    sqlrequest.data = variables;

    sqlloader.load(sqlrequest);
}
function sqldonetrace(e:Event) {
    sqldata = e.target.data;
}
sql("1","SELECT * FROM songs WHERE `flag2` LIKE '0'");
trace (sqldata); 
```

所以，问题来了：“sqldata”被跟踪为“null”。AS3 似乎运行“sql”，然后是“trace”，然后是“sqldone”，但我需要 sql -> sqldone -> trace...我不能将 trace-command 放在 sqldone-function 中，因为它已存储作为 *.as 并在我的 .swf 中的不同点加载，并不总是后跟一个跟踪命令。

脚本中有任何想法/提示/缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:42:38.930

Actionscript 在设计上是一种事件驱动的语言。它还保证代码在单个线程中执行，即如果函数调用开始，则在第一次调用完成之前不会执行其他（新调用）动作脚本代码。

话虽如此，您应该将完整的处理程序传递给 sql(...)。

```
function sql(saveorload:String, sqlstring:String, completeHandler:Function):void
{
    var sqlloader = new URLLoader();
    var sqlrequest = new URLRequest("http://***/sql.php");
    sqlrequest.method = URLRequestMethod.POST;
    sqlloader.addEventListener(Event.COMPLETE, completeHandler);//tell urlloader to use the complete handler passed in parameters    
    var variables:URLVariables = new URLVariables();
    variables.sqlm = saveorload;
    variables.sqlq = sqlstring;
    sqlrequest.data = variables;

    sqlloader.load(sqlrequest);
} 
```

然后从其他地方使用它，例如：

```
sql("1","SELECT * FROM songs WHERE `flag2` LIKE '0'", sqldonetrace);
function sqldonetrace(e:Event)
{
    var sqldata:String = e.target.data;
    trace (sqldata);
} 
```

另外，我认为您应该检查来自 urlloader 的错误事件。将另一个参数作为 errorHandler 传递给 sql

# c - 第二次启动 pthread 时出现 Segfault

> ID：16153740
> 
> 赞同：0
> 
> 时间：2013-04-22T18:05:13.177
> 
> 标签：c, segmentation-fault, pthreads

我有一个程序可以进行一些计算等，并使用 pthreads 来启动一些线程。这很好用。

但是，我需要多次启动同一组线程来进行基准测试。当我第二次启动它们时，我得到一个段错误（核心转储）。

选择代码：

pastebin 替代方案（缺少第一个互斥锁行）应该包括与问题相关的任何内容：http: [//pastebin.com/5iUsy8L2](http://pastebin.com/5iUsy8L2)

```
function()
{
pthread_mutex_t pmutex;
for (int k = 0; k < 10; k++)
{
    pthread_mutex_lock (&pmutex);

    pthread_t pthreads[CPUTHRDS];
    launch_threads(pthreads);

    /* Unlock and start timer */
    pthread_mutex_unlock (&pmutex);
    tot_time = -msecond();

    /* Join taskthreads when they are done */
    join_threads(pthreads);
    tot_time += msecond();

    //<do something>
}
}

void launch_threads(pthread_t *pthreads)
{
pthread_attr_t attr;
pthread_attr_init(&attr);
pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);

printf("#HOST# Starting Task Threads\n");    

/* Launch the CPU threads */
for (int i = 0; i < CPUTHRDS; i++)
{
    fprintf(stderr, "launchthread %d\n", i);
    int rc = pthread_create(&pthreads[i], &attr, cpu_thread, NULL);
    if (rc) {
        printf("ERROR; return code from pthread_create() is %d\n", rc);
        exit(-1);
    }
}
printf("#HOST# CPU-Threads started: %d\n", CPUTHRDS);

pthread_attr_destroy(&attr);
}

void join_threads(pthread_t *pthreads)
{
int rc = 0;
for(int i=0; i < CPUTHRDS; i++)
    {
        void *status;
        rc = pthread_join(pthreads[i], &status);
        if (rc) {
            printf("ERROR; return code from pthread_join() is %d\n", rc);
            exit(-1);
        }
        printf("#HOST# Thread %d joined\n", i);
    }
    printf("#HOST# All threads joined\n");
}

void *cpu_thread(void *arg)
{
unsigned long thid = pthread_self();
fprintf(stderr, "started %lu\n", thid);
} 
```

输出

```
#HOST# Starting Task Threads
launchthread 0
launchthread 1
#HOST# CPU-Threads started: 2
started 46969086678784
started 46969084577536
#HOST# Thread 0 joined
#HOST# Thread 1 joined
#HOST# All threads joined
#HOST# Starting Task Threads
launchthread 0
Segmentation fault (core dumped) 
```

一直在尝试删除对现有变量的任何依赖，但第二次仍然失败。

提前感谢您的任何回复。

# android - 以 SQLite 和 Azure SQL 数据库为中心存储的在线/离线多客户端移动应用程序的最佳主键策略是什么？

> ID：16153741
> 
> 赞同：17
> 
> 时间：2013-04-22T18:05:17.047
> 
> 标签：android, ios, sqlite, database-design, azure

考虑到以下情况，什么主键策略最适合用于关系数据库模型？

*   数以万计的用户
*   每个用户有多个客户端（手机、平板电脑、台式机）
*   每张表数百万行（不断增长）

Azure SQL 将是中央数据存储，将通过 Web API 公开。客户端将包括一个 Web 应用程序和许多本机应用程序，包括 iOS、Android、Mac、Windows 8 等。Web 应用程序将需要“始终在线”连接，并且没有本地数据存储，而是检索和更新通过 api - 通过 RESTful API 思考 CRUD。

所有其他客户端（手机、平板电脑、台式机）都将具有本地数据库（SQLite）。首次使用此类客户端时，用户必须进行身份验证和同步。一旦经过身份验证和同步，这些客户端就可以在离线模式下运行（在本地 SQLite 数据库中创建、删除和更新记录）。这些更改最终将与 Azure 后端同步。

数据库的分布式特性给我们留下了一个主键问题以及提出这个问题的原因。

以下是我们迄今为止所考虑的：

**图形用户界面**

每个客户端都创建自己的密钥。在同步时，重复密钥的可能性很小，但我们需要通过将功能写入每个客户端来使用新密钥更新所有关系来解决这个问题。GUID 很大，当考虑到每个表有多个外键时，随着时间的推移，存储可能会成为一个问题。可能最大的问题是 GUID 的随机性，这意味着由于碎片，它们不能（或不应该）用作聚集索引。这意味着我们需要为每个表创建一个聚集索引（可能是任意的）。

**身份**

每个客户端都创建自己的主键。同步时，这些密钥将替换为服务器生成的密钥。这给同步过程增加了额外的复杂性，并迫使每个客户端“修复”他们的键，包括相关表上的所有外键。

**合成的**

在第一次同步时，每个客户端都会分配一个客户端 ID。此客户端 ID 与本地自动递增 ID 结合使用，作为每个表的复合主键。此复合键将是唯一的，因此同步时不应该有冲突，但这确实意味着大多数表都需要复合主键。性能和查询复杂性是这里关注的问题。

**HiLo（合并复合）**

与复合方法一样，每个客户端在第一次同步时都被分配一个客户端 ID (int32)。客户端 ID 与唯一的本地 ID (int32) 合并到一个列中，以形成应用程序范围内的唯一 ID (int64)。这应该不会导致同步期间发生冲突。由于每个客户端生成的 id 是连续的，因此这些键与 GUID 相比有更多的顺序，但会有数千个唯一的客户端 ID，那么我们是否仍然冒着聚集索引碎片的风险？

我们是否忽略了什么？还有其他值得研究的方法吗？讨论每种方法的优缺点会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-11T23:37:16.290

我仔细考虑了这个问题，最终决定 GUID 通常是最好的解决方案。以下是有关原因的一些信息：

# 身份

Identity 选项听起来像是消除了所有负面因素，但是在实现了实现该系统的单页 Web 应用程序之后，我可以告诉您它增加了代码的大量复杂性。临时 id 可以很快地在您的客户端数据中传播，并且在查找每个可能的用法时，很难创建一个没有漏洞的系统。它通常会导致应用程序和数据特定的硬编码信息来跟踪客户端上的外键（随着数据库的更改并且您忘记更新此信息，这很乏味且容易出错）。它还为每次同步增加了很多开销，因为每次同步可能必须运行多个表来检查临时 ID。可能有更好的方法来实现这个系统，但我还没有看到一个没有的好方法

# 合成的

复合方法还在生成会话 id 和从中创建 id 时给您的代码增加了很多复杂性，除了您可以保证它是唯一的之外，它们并没有真正提供优于 GUID 的任何优势 - 但问题是，GUID 是*理论上*是独一无二的，虽然我害怕重复的可能性，但我意识到这是一个非常小的机会，实际上有一个非常简单的方法来处理它不是唯一的小可能性。

# GUID

我对使用 GUID 的最大担忧是

1.  它们的大小很大，不是传统的整数，这会使传输大量数据变慢并降低数据库性能
2.  如果你真的遇到了冲突，它可能会毁掉你的应用程序，所以你必须编写复杂的代码来处理你可能永远不会使用的情况。

然后我意识到，在离线风格的 Web 应用程序中，您通常不会一次传输大量数据，因为它们都存储在客户端上。

您也不必担心服务器数据库性能，因为这是在后台同步完成的 - 您只需担心客户端数据性能。

最后，我意识到处理冲突真的是一件微不足道的事情。只需测试冲突，如果遇到冲突，请在服务器上创建一个新的 GUID 并继续操作。然后向客户端发送一条消息，导致客户端抛出一个小错误消息，然后删除所有客户端数据并从服务器重新下载。这非常快速且易于实施，而且您可能已经希望将其作为离线 Web 应用程序上的一种可能操作。虽然这对用户来说可能听起来不方便，但用户看到此错误的可能性几乎为 0%。

# 结论

最后，我认为对于这种类型的应用程序，GUID 是最容易实现的，并且在出错的可能性最小且不会创建过于复杂的代码的情况下工作得最好。

如果您的应用程序不必离线运行，但出于性能或其他原因您有客户端数据库，您还可以考虑抛出加载 gif 并暂停客户端执行，直到通过 ajax 从服务器返回 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:15:57.773

要记住的关键（双关语）是为您存储在持久存储中的每个对象简单地拥有一个唯一的密钥。您如何处理该对象的存储完全取决于您以及您如何访问该密钥的方法。您列出的每个策略都有自己的原因，说明他们为什么要做他们所做的事情，但最终他们将某个对象的密钥存储在数据库中，因此可以更改其所有属性，同时在数据库中保留相同的对象引用.

# r - 使用数据表对子集执行操作

> ID：16153742
> 
> 赞同：6
> 
> 时间：2013-04-22T18:05:18.040
> 
> 标签：r, data.table, plyr, data-cleaning

我有一个广泛的调查数据集。对于特定问题，在原始数据中创建了一组变量，以代表在特定月份提出调查问题的不同事实。

我希望创建一组具有月份不变名称的新变量；这些变量的值将对应于观察月份的月份变量问题的值。

请查看示例/虚构数据集：

```
require(data.table)

data <- data.table(month = rep(c('may', 'jun', 'jul'),  each = 5),
                   may.q1 = rep(c('yes', 'no', 'yes'),  each = 5),
                   jun.q1 = rep(c('breakfast', 'lunch', 'dinner'),  each = 5),
                   jul.q1 = rep(c('oranges', 'apples', 'oranges'),  each = 5),
                   may.q2 = rep(c('econ', 'math', 'science'), each = 5),
                   jun.q2 = rep(c('sunny', 'foggy', 'cloudy'), each = 5),
                   jul.q2 = rep(c('no rain', 'light mist', 'heavy rain'), each = 5)) 
```

在这个调查中，实际上只有两个问题：“q1”和“q2”。这些问题中的每一个都被反复问了几个月。但是，仅当数据中观察到的月份与特定月份的调查问题匹配时，该观察才包含有效响应。

例如：对于“May”中的任何观察，“may.q1”都被观察为“yes”。我想要一个新的“Q1”变量来表示“may.q1”、“jun.q1”和“jul.q1”。当月份为“may”时，“Q1”的值将采用“may.q1”的值，当月份为“jun”时，“Q1”的值将采用“jun.q1”的值.

如果我要尝试使用数据表手动执行此操作，我会想要类似的东西：

```
mdata <- data[month == 'may', c('month', 'may.q1', 'may.q2'), with = F]
setnames(mdata, names(mdata), gsub('may\\.', '', names(mdata))) 
```

我希望这个重复“按=月”。

如果我将“plyr”包用于数据框，我将使用以下方法解决：

```
require(plyr)
data <- data.frame(data)

mdata <- ddply(data, .(month), function(dfmo) {
    dfmo <- dfmo[, c(1, grep(dfmo$month[1], names(dfmo)))]
    names(dfmo) <- gsub(paste0(dfmo$month[1], '\\.'), '', names(dfmo))
    return(dfmo)
}) 
```

任何使用 data.table 方法的帮助将不胜感激，因为我的数据很大。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:36:04.907

一种不同的方式来说明：

```
data[, .SD[,paste0(month,c(".q1",".q2")), with=FALSE], by=month]

    month  may.q1     may.q2
 1:   may     yes       econ
 2:   may     yes       econ
 3:   may     yes       econ
 4:   may     yes       econ
 5:   may     yes       econ
 6:   jun   lunch      foggy
 7:   jun   lunch      foggy
 8:   jun   lunch      foggy
 9:   jun   lunch      foggy
10:   jun   lunch      foggy
11:   jul oranges heavy rain
12:   jul oranges heavy rain
13:   jul oranges heavy rain
14:   jul oranges heavy rain
15:   jul oranges heavy rain 
```

但请注意，列名来自第一组（之后可以使用 重命名`setnames`）。如果有大量的列而只需要很少的列，它可能不是最有效的。在这种情况下，Arun 的解决方案融合为长格式应该更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:19:20.307

**编辑：**在更大的数据上似乎效率很低。查看@MatthewDowle 的答案以获得*非常快速和简洁*的解决方案。

这是一个使用`data.table`.

```
dd <- melt.dt(data, id.var=c("month"))[month == gsub("\\..*$", "", ind)][, 
        ind := gsub("^.*\\.", "", ind)][, split(values, ind), by=list(month)] 
```

这个函数`melt.dt`是一个小函数（还有更多的改进）我写了`melt`一个`data.table`类似于函数的`melt`函数`plyr`（在尝试上面的代码之前复制/粘贴下面显示的这个函数）。

```
melt.dt <- function(DT, id.var) {
    stopifnot(inherits(DT, "data.table"))
    measure.var <- setdiff(names(DT), id.var)
    ind <- rep.int(measure.var, rep.int(nrow(DT), length(measure.var)))
    m1  <- lapply(c("list", id.var), as.name)
    m2  <- as.call(lapply(c("factor", "ind"), as.name))
    m3  <- as.call(lapply(c("c", measure.var), as.name))    
    quoted <- as.call(c(m1, ind = m2, values = m3))
    DT[, eval(quoted)]
} 
```

* * *

思路：先把`data.table`with`id.var = month`柱融掉。现在，所有融化的列名都是`month.question`. 因此，通过从这个融化的列中删除“.question”并将其等同于`month`列，我们可以删除所有不必要的条目。一旦我们这样做了，我们就不需要“月”了。在熔化的列“ind”中。所以，我们用`gsub`去掉“月”。保留只是`q1, q2`等。在此之后，我们必须`reshape`（或`cast`）它。这是通过分组`month`和拆分`values`列来完成的`ind`（其中有`q1`或`q2`。因此，您每个月将获得 2 列（然后将其拼接在一起）以获得所需的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:09:27.810

这样的事情怎么办

```
data <- data.table(
                   may.q1 = rep(c('yes', 'no', 'yes'),  each = 5),
                   jun.q1 = rep(c('breakfast', 'lunch', 'dinner'),  each = 5),
                   jul.q1 = rep(c('oranges', 'apples', 'oranges'),  each = 5),
                   may.q2 = rep(c('econ', 'math', 'science'), each = 5),
                   jun.q2 = rep(c('sunny', 'foggy', 'cloudy'), each = 5),
                   jul.q2 = rep(c('no rain', 'light mist', 'heavy rain'), each = 5)
                   )

tmp <- reshape(data, direction = "long", varying = 1:6, sep = ".", timevar = "question")

str(tmp)
## Classes ‘data.table’ and 'data.frame':   30 obs. of  5 variables:
##  $ question: chr  "q1" "q1" "q1" "q1" ...
##  $ may     : chr  "yes" "yes" "yes" "yes" ...
##  $ jun     : chr  "breakfast" "breakfast" "breakfast" "breakfast" ...
##  $ jul     : chr  "oranges" "oranges" "oranges" "oranges" ...
##  $ id      : int  1 2 3 4 5 6 7 8 9 10 ... 
```

如果您想更进一步并再次融合这些数据，您可以使用 melt 包

```
require(reshape2)
## remove the id column if you want (id is the last col so ncol(tmp))
res <- melt(tmp[,-ncol(tmp), with = FALSE], measure.vars = c("may", "jun", "jul"), value.name = "response", variable.name = "month")

str(res)
## 'data.frame':    90 obs. of  3 variables:
##  $ question: chr  "q1" "q1" "q1" "q1" ...
##  $ month   : Factor w/ 3 levels "may","jun","jul": 1 1 1 1 1 1 1 1 1 1 ...
##  $ response: chr  "yes" "yes" "yes" "yes" ... 
```

# regex - 使用 bash 基于正则表达式将文件夹中的所有 txt 文件拆分为较小的文件

> ID：16153744
> 
> 赞同：0
> 
> 时间：2013-04-22T18:05:23.447
> 
> 标签：regex, bash, text, split

我有一个包含大文本文件的文件夹。*每个文件是由 [[文件名*]]分隔的 1000 个文件的集合。我想拆分文件并从中制作 1000 个文件并将它们放在一个新文件夹中。bash有没有办法做到这一点？任何其他快速方法也可以。

```
for f in $(find . -name '*.txt')
do mkdir $f
  mv 
  cd $f
  awk '/[[.*]]/{g++} { print $0 > g".txt"}' $f
  cd ..
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:35:55.497

虽然不是 awk 和一个喝醉的人写的，但不能保证工作。

```
import re
import sys

def main():
    pattern = re.compile(r'\[\[(.+)]]')
    with open (sys.argv[1]) as f:
        for line in f:
            m = re.search(pattern, line)
            if m:
                try:
                    with open(fname, 'w+') as g:
                        g.writelines(lines)
                except NameError:
                    pass
                fname = m.group(1)
                lines = []
            else:
                lines.append(line)

    with open(fname, 'w+') as g:
        g.writelines(lines)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:56:59.263

您正在尝试创建一个与现有文件同名的文件夹。

```
for f in $(find . -name '*.txt')
do mkdir $f 
```

在这里，“查找”将列出当前路径中的文件，并且您将尝试为每个文件创建一个名称完全相同的目录。一种方法是首先创建一个临时文件夹：

```
for f in $(find . -name '*.txt')
do mkdir temporary # create a temporary folder
  mv $f temporary # move the file into the folder
  mv temporary $f # rename the temporary folder to the name of the file
  cd $f # enter the folder and go on....
  awk '/[[.*]]/{g++} { print $0 > g".txt"}' $f
  cd ..
done 
```

请注意，您的所有文件夹都将具有“.txt”扩展名。如果你不想这样，你可以在创建文件夹之前把它剪掉；这样，您将不需要临时文件夹，因为您尝试创建的文件夹与 .txt 文件的名称不同。例子：

```
for f in $(find . -name '*.txt' | rev | cut -b 5- | rev) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:03:14.477

编写一个 bash 脚本。在这里，我已经为你完成了。

注意这个脚本的结构和特点：

*   解释它在`usage()`用于`-h`选项的函数中的作用。
*   提供一组标准选项：`-h`, `-n`, `-v`.
*   用来`getopts`做期权处理
*   对参数进行大量错误检查
*   注意文件名解析（注意文件名周围的空格会被忽略。
*   在函数中隐藏细节。注意到“talk”、“qtalk”、“nvtalk”功能了吗？这些来自我为使这种脚本编写变得容易而构建的 bash 库。
*   `$verbose`如果处于模式，请向用户解释正在发生的事情。
*   让用户能够在不实际执行的情况下查看将执行的操作（`-n`用于`$norun`模式的选项）。
*   永远不要直接运行命令。但是使用`run`函数，它注意`$norun`、`$verbose`和`$quiet`变量。

我不只是为你钓鱼，而是教你如何钓鱼。

祝你的下一个 bash 脚本好运。

艾伦·S。

```
#!/bin/bash
# split-collections IN-FOLDER OUT-FOLDER

PROG="${0##*/}"

usage() {
  cat 1>&2 <<EOF
usage: $PROG [OPTIONS] IN-FOLDER OUT-FOLDER

This script splits a collection of files within IN-FOLDER into
separate, named files into the given OUT-FOLDER.  The created file
names are obtained from formatted text headers within the input
files.

The format of each input file is a set of HEADER and BODY pairs,
where each HEADER is a text line formatted as:

    [[input-filename1]]
    text line 1
    text line 2
    ...
    [[input-filename2]]
    text line 1
    text line 2
    ...

Normal processing will show the filenames being read, and file
names being created.  Use the -v (verbose) option to show the
number of text lines being written to each created file.  Use
-v twice to show the actual lines of text being written.

Use the -n option to show what would be done, without actually
doing it.

Options
 -h       Show this help
 -n       Dry run -- do NOT create any files or make any changes
 -o       Overwrite existing output files.
 -v       Be verbose

EOF
   exit
}

talk()   { echo 1>&2 "$@" ; }
chat()   { [[ -n "$norun$verbose" ]] && talk "$@" ; }
nvtalk() { [[ -n "$verbose" ]] || talk "$@" ; }
qtalk()  { [[ -n "$quiet" ]]   || talk "$@" ; }
nrtalk() { talk "${norun:+(norun) }$@" ; }

error() { 
  local code=2
  case "$1" in [0-9]*) code=$1 ; shift ;; esac
  echo 1>&2 "$@"
  exit $code
}

talkf()   { printf 1>&2 "$@" ; }
chatf()   { [[ -n "$norun$verbose" ]] && talkf "$@" ; }
nvtalkf() { [[ -n "$verbose" ]] || talkf "$@" ; }
qtalkf()  { [[ -n "$quiet" ]]   || talkf "$@" ; }
nrtalkf() { talkf "${norun:+(norun) }$@" ; }

errorf()  { 
  local code=2
  case "$1" in [0-9]*) code=$1 ; shift ;; esac
  printf 1>&2 "$@"
  exit $code
}

# run COMMAND ARGS ...

qrun() {
  ( quiet=1 run "$@" )
}

run() {
  if [[ -n "$norun" ]]; then
    if [[ -z "$quiet" ]]; then
      nrtalk "$@"
    fi
  else
    if [[ -n "$verbose" ]]; then
      talk ">> $@"
    fi
    if ! eval "$@" ; then
      local code=$?
      return $code
    fi
  fi
  return 0
}

show_line() {
  talkf "%s:%d: %s\n" "$in_file" "$lines_in" "$line"
}

# given an input filename, read it and create 
# the output files as indicated by the contents
# of the text in the file

split_collection() {
  in_file="$1"
  out_file=
  lines_in=0
  lines_out=0
  skipping=
  while read line ; do
    : $(( lines_in++ ))

    [[ $verbose_count > 1 ]] && show_line

    # if a line with the format of "[[foo]]" occurs,
    # close the current output file, and open a new
    # output file called "foo"

    if [[ "$line" =~ ^\[\[[[:blank:]]*([^ ]+.*[^ ]|[^ ])[[:blank:]]*\]\][[:blank:]]*$ ]] ; then
      new_file="${BASH_REMATCH[1]}"

      # close out the current file, if any
      if [[ "$out_file" ]]; then
        nrtalkf "%d lines written to %s\n" $lines_out "$out_file"
      fi

      # check the filename for bogosities
      case "$new_file" in 
        *..*|*/*) 
          [[ $verbose_count < 2 ]] && show_line
          error "Badly formatted filename"
          ;;
      esac

      out_file="$out_folder/$new_file"
      if [[ -e "$out_file" ]]; then
        if [[ -n "$overwrite" ]]; then
          nrtalk "Overwriting existing '$out_file'"
          qrun "cat /dev/null >'$out_file'"
        else
          error "$out_file already exists."
        fi
      else
        nrtalk "Creating new output file: '$out_file' ..."
        qrun "touch '$out_file'"
      fi

      lines_out=0
    elif [[ -z "$out_file" ]]; then

      # apparently, there are text lines before the filename
      # header; ignore them (out loud)
      if [[ ! "$skipping" ]]; then
        talk "Text preceding first filename ignored.."
        skipping=1
      fi

    else # next line of input for the file
      qrun "echo \"$line\" >>'$out_file'"
      : $(( lines_out++ ))
    fi
  done
}

norun=
verbose=
verbose_count=0
overwrite=
quiet=

while getopts 'hnoqv' opt ; do
  case "$opt" in
  h)  usage ;;
  n)  norun=1 ;;
  o)  overwrite=1 ;;
  q)  quiet=1 ;;
  v)  verbose=1 ; : $(( verbose_count++ )) ;;
  esac
done
shift $(( OPTIND - 1 ))

in_folder="${1:?Missing IN-FOLDER; see $PROG -h for details}"
out_folder="${2:?Missing OUT-FOLDER; see $PROG -h for details}"

# validate the input and output folders
#
# It might be reasonable to create the output folder for the 
# user, but that's left as an exercise for the user.

in_folder="${in_folder%/}"    # remove trailing slash, if any
out_folder="${out_folder%/}"

[[ -e "$in_folder" ]]  || error "$in_folder does not exist" 
[[ -d "$in_folder" ]]  || error "$in_folder is not a directory."
[[ -e "$out_folder" ]] || error "$out_folder does not exist."
[[ -d "$out_folder" ]] || error "$out_folder is not a directory."

for collection in $in_folder/* ; do
  talk "Reading $collection .."
  split_collection "$collection" <$collection 
done

exit 
```

# css - 在页脚中突出显示图像

> ID：16153746
> 
> 赞同：0
> 
> 时间：2013-04-22T18:05:27.967
> 
> 标签：css, html

我正在为一个班级做一个项目并且有一个问题。

该网站可以在这里找到：http: [//ispace.ci.fsu.edu/~seb10/cgs2821/proj10](http://ispace.ci.fsu.edu/~seb10/cgs2821/proj10)

我现在拥有的是一个 div，我使用 HTML 中的内联样式和一个 div 将其定位在底部。

它现在看起来很好，但这当然取决于正在使用的浏览器。

我希望该图像始终出现在底部，而不必使用内联样式。本质上，我希望它伸出页脚，但不会影响或移动其他任何东西。

如果可能的话，执行此操作的过程是什么？

这是 CSS 的链接：http: [//2011.ispace.ci.fsu.edu/~seb10/cgs2821/proj10/style.css](http://2011.ispace.ci.fsu.edu/~seb10/cgs2821/proj10/style.css)

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:15:43.203

我假设油井塔图像是要定位的图像。我会创建一个具有透明背景的 .png 文件，然后将其设置为 .container 元素的背景图像。

.png 透明度将允许其他背景主题在矢量图像的开放空间（透明）部分中显示出来。

只要您的页脚元素在您的容器元素之后流动，这就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:30:54.363

要使图像忽略它的父元素，可以使用定位和 z-index 的组合：

```
position: absolute;
z-index: 2; 
```

您还可以尝试使用`display`和`overflow`属性，具体取决于您希望它的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:38:20.230

当我查看您的代码时，我想出了这些 css 值来完全对齐您`.sidebar`的页面。您必须`position: relative;`定位它，但是，它会*相*对于窗口的大小和周围元素移动。这就是它可能四处移动的原因。但是，`position: absolute;`不考虑周围的元素，因此将保持不变。

```
.sidebar {
    position: absolute;
    top: 233px;
    right: 10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:45:43.283

关键是放置绝对位置的图像。我已将桅杆插图移至页脚： http: [//jsfiddle.net/David_Knowles/98PLA/](http://jsfiddle.net/David_Knowles/98PLA/)
这能解决您的问题吗？

```
#footer .container {overflow: visible;} /* use a different technique to wrap floated elements so you can place image in the footer and have it stick out - see underneath */
.fltright {position: absolute; bottom: 56px; right: 0;}

/* For modern browsers */
.container:before,
.container:after {
    content:"";
    display:table;
}
.container:after {
    clear:both;
}
/* For IE 6-7 (trigger hasLayout) */
.container {
    zoom:1;
}

    <div id="footer">
        <!-- Begin Container -->
            <div class="container">
                <img class="fltright" src='http://2011.ispace.ci.fsu.edu/~seb10/cgs2821/proj10/images/derrick.png' alt="derrick" width="300"/>
                <h1>Copyright &copy; 2013 <br />All Rights Reserved</h1>
                <h3><a href="mailto:seb10@my.fsu.edu">Webmaster</a> |<a href="#">Site Map</a> | <a href="about.html">About</a></h3>
            </div>  
            <!-- End Container -->
    </div>  
    <!-- End Footer --> 
```

# c++ - 优化器错误或编程错误？

> ID：16153748
> 
> 赞同：7
> 
> 时间：2013-04-22T18:05:29.823
> 
> 标签：c++, visual-c++, optimization, visual-studio-2012

首先：我知道大多数优化错误是由于编程错误或依赖于可能会根据优化设置（浮点值、多线程问题......）而改变的事实。

但是，我遇到了一个很难找到的错误，并且有点不确定是否有任何方法可以在不关闭优化的情况下防止此类错误的发生。我错过了什么吗？这真的是一个优化器错误吗？这是一个简化的示例：

```
struct Data {
  int    a;
  int    b;
  double c;
};

struct Test {
  void optimizeMe();

  Data m_data;
};

void Test::optimizeMe() {
  Data * pData; // Note that this pointer is not initialized!

  bool first = true;

  for (int i = 0; i < 3; ++i) {
    if (first) {
      first = false;

      pData = &m_data;

      pData->a = i * 10;
      pData->b = i * pData->a;
      pData->c = pData->b / 2;
    } else {
      pData->a = ++i;
    } // end if
  } // end for
};

int main(int argc, char *argv[]) {
  Test test;
  test.optimizeMe();
  return 0;
} 
```

当然，真正的程序要做的远不止这些。但这一切都归结为这样一个事实，即不是直接访问 m_data ，而是使用了一个（以前未初始化的）指针。一旦我向`if (first)`-part 添加了足够的语句，优化器似乎就会将代码更改为以下几行：

```
if (first) {
  first = false;

  // pData-assignment has been removed!

  m_data.a = i * 10;
  m_data.b = i * m_data.a;
  m_data.c = m_data.b / m_data.a;
} else {
  pData->a = ++i; // This will crash - pData is not set yet. 
} // end if 
```

如您所见，它用直接写入成员结构替换了不必要的指针取消引用。但是，它不会在`else`-branch 中执行此操作。它还删除了`pData`-assignment。由于指针现在仍然未初始化，程序将在 -branch 中崩溃`else`。

当然这里有很多地方可以改进，所以你可能会把它归咎于程序员：

*   忘记指针，做优化器所做的事情——`m_data`直接使用。
*   将 pData 初始化为 nullptr - 这样优化器就知道`else`如果从未分配指针，则 -branch 将失败。至少它似乎解决了我的测试环境中的问题。
*   将指针分配移到循环前面（有效地`pData`用初始化`&m_data`，然后它也可以是引用而不是指针（为了很好的衡量标准）。这是有道理的，因为在所有情况下都需要 pData ，因此没有理由在内部执行此操作循环。

至少可以说，代码显然很臭，我并不是要“责怪”优化器这样做。但我在问：*我做错了什么？该程序可能很丑陋，但它是有效的代码......*

我应该补充一点，我正在使用带有 C++/CLI 和 v110_xp-Toolset 的 VS2012。优化设置为 /O2。另请注意，如果您真的想重现问题（但这并不是这个问题的真正重点），您需要考虑程序的复杂性。这是一个非常简化的示例，优化器有时不会删除指针分配。隐藏`&m_data`在函数后面似乎是“帮助”。

**编辑：**

*问：我如何知道编译器正在将其优化为提供的示例？*

A：我不太擅长阅读汇编程序，但是我看过它并做了 3 个观察，这让我相信它的行为方式是这样的：

1.  一旦优化开始（添加更多的赋值通常就可以了），指针赋值就没有关联的汇编语句。它也没有被提升到声明中，所以它看起来真的没有初始化（至少对我来说）。
2.  在程序崩溃的情况下，调试器会跳过赋值语句。在程序运行没有问题的情况下，调试器会停在那里。
3.  如果我在调试时观察`pData`和 的内容`m_data`，它清楚地表明`if`-branch 中的所有分配都影响`m_data`并`m_data`接收到正确的值。指针本身仍然指向它从一开始就具有的相同的未初始化值。因此我不得不假设它实际上根本没有使用指针来进行分配。

*问：它与 i （循环展开）有什么关系吗？*

答：不，实际程序实际上使用 do { ... } while() 来循环 SQL SELECT-resultset，因此迭代计数完全是运行时特定的，并且无法由编译器预先确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:08:56.160

对我来说，它确实看起来像一个错误。优化器可以消除不必要的重定向，但不应该消除对`pData`.

当然，您可以通过`pData`在循环之前分配 to 来解决这个问题（至少在这个简单的示例中）。我认为您的实际代码中的问题并没有那么容易解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:29:30.893

如果在此示例中确实可重现，我也会投票支持优化器错误。要否决优化器，您可以尝试声明`pData`为`volatile`.

# jquery - jquery mobile 是否适用于骨干木偶模板？

> ID：16153749
> 
> 赞同：1
> 
> 时间：2013-04-22T18:05:30.337
> 
> 标签：jquery, jquery-mobile, backbone.js, marionette

我在让 jquery 移动代码与模板一起使用时遇到问题。结果区域将结果模板用于数据。关于为什么 jquery mobile 的东西不起作用或我如何让它起作用的任何想法？我也有滑出面板的问题。

```
<div id="results-region" data-role="collapsible-set" data-theme="c" data-content-theme="d" ></div>

<script type="text/template" id="results-template">
   <div data-role="collapsible">
      <h3><a href="#" data-rel="dialog"><%=faa%></a></h3>
      <p>testing</p>
   </div>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:39:37.203

在 JQM 中使用主干没有问题。您只需要在动态添加元素后调用刷新。

[http://api.jquerymobile.com/collapsible-set/#method-refresh](http://api.jquerymobile.com/collapsible-set/#method-refresh)

```
$( "#results-region" ).collapsibleset( "refresh" ); 
```

还有一点需要注意。你不会想要额外的 div 包裹你的可折叠内容。在您的结果模板中，您应该删除外部 div 并在 itemView 中以编程方式设置数据角色。

*编辑：添加了一个演示完整解决方案的小提琴*

[http://jsfiddle.net/puleos/naMMS/](http://jsfiddle.net/puleos/naMMS/)

![在此处输入图像描述](https://i.stack.imgur.com/7WPwD.png)

# android - 在 Google Map api v2 上绘制路线方向路径

> ID：16153758
> 
> 赞同：2
> 
> 时间：2013-04-22T18:06:07.503
> 
> 标签：android, asynchronous, routes, google-maps-android-api-2, direction

我试图通过在公共汽车行驶的所有公共汽车站之间绘制方向路线来在我的地图上绘制公共汽车路线。

我有一个列表（markerPoints），其中包含所有公共汽车站的 LatLng 对象，并尝试为所有点运行一个循环，其中我为每个点接收到循环当前位置的公共汽车站之间的方向路线和下一个。

问题是运行此代码时有时会出现 Nullpointerexeption 错误。它通常在我第一次运行时运行，然后在下次运行时崩溃。但是，如果我更改循环使其只运行一次，因此只获得一个方向路线，它正在工作......

谁能帮我找到解决问题的方法，或者指出我做错了什么？

**我的方法与循环调用异步方法来接收方向路由**

```
public void DrawRoutePath(){
    //Start on "Torget" because of issues with route path in city center
    for (int i = 0; i < (markerPoints.size()-1); i++) { 
                LatLng origin = markerPoints.get(i);
                LatLng dest = markerPoints.get(i+1);

                // Getting URL to the Google Directions API
                String url = getDirectionsUrl(origin, dest);                

                DownloadTask task = new DownloadTask();
                // Start downloading json data from Google Directions API
                task.execute(url);
    }
} 
```

**这些是我获取异步方向的方法：**

```
private String getDirectionsUrl(LatLng origin,LatLng dest){

    // Origin of route
    String str_origin = "origin="+origin.latitude+","+origin.longitude;

    // Destination of route
    String str_dest = "destination="+dest.latitude+","+dest.longitude;      

    // Sensor enabled
    String sensor = "sensor=false";         

    // Building the parameters to the web service
    String parameters = str_origin+"&"+str_dest+"&"+sensor;

    // Output format
    String output = "json";

    // Building the url to the web service
    String url = "https://maps.googleapis.com/maps/api/directions/"+output+"?"+parameters;

    return url;
}

/** A method to download json data from url */
private String downloadUrl(String strUrl) throws IOException{
    String data = "";
    InputStream iStream = null;
    HttpURLConnection urlConnection = null;
    try{
            URL url = new URL(strUrl);

            // Creating an http connection to communicate with url 
            urlConnection = (HttpURLConnection) url.openConnection();

            // Connecting to url 
            urlConnection.connect();

            // Reading data from url 
            iStream = urlConnection.getInputStream();

            BufferedReader br = new BufferedReader(new InputStreamReader(iStream));

            StringBuffer sb  = new StringBuffer();

            String line = "";
            while( ( line = br.readLine())  != null){
                    sb.append(line);
            }

            data = sb.toString();

            br.close();

    }catch(Exception e){
            Log.d("Exception while downloading url", e.toString());
    }finally{
            iStream.close();
            urlConnection.disconnect();
    }
    return data;
 }

// Fetches data from url passed
private class DownloadTask extends AsyncTask<String, Void, String>{         

    // Downloading data in non-ui thread
    @Override
    protected String doInBackground(String... url) {

        // For storing data from web service
        String data = "";

        try{
            // Fetching the data from web service
            data = downloadUrl(url[0]);
        }catch(Exception e){
            Log.d("Background Task",e.toString());
        }
        return data;        
    }

    // Executes in UI thread, after the execution of
    // doInBackground()
    @Override
    protected void onPostExecute(String result) {           
        super.onPostExecute(result);            

        ParserTask parserTask = new ParserTask();

        // Invokes the thread for parsing the JSON data
        parserTask.execute(result);

    }       
}

/** A class to parse the Google Places in JSON format */
private class ParserTask extends AsyncTask<String, Integer, List<List<HashMap<String,String>>> >{

    // Parsing the data in non-ui thread        
    @Override
    protected List<List<HashMap<String, String>>> doInBackground(String... jsonData) {

        JSONObject jObject; 
        List<List<HashMap<String, String>>> routes = null;                     

        try{
            jObject = new JSONObject(jsonData[0]);
            DirectionsJSONParser parser = new DirectionsJSONParser();

            // Starts parsing data
            routes = parser.parse(jObject);    
        }catch(Exception e){
            e.printStackTrace();
        }
        return routes;
    }

    // Executes in UI thread, after the parsing process
    @Override
    protected void onPostExecute(List<List<HashMap<String, String>>> result) {
        ArrayList<LatLng> points = null;
        PolylineOptions lineOptions = null;
        MarkerOptions markerOptions = new MarkerOptions();

        // Traversing through all the routes
        for(int i=0;i<result.size();i++){
            points = new ArrayList<LatLng>();
            lineOptions = new PolylineOptions();

            // Fetching i-th route
            List<HashMap<String, String>> path = result.get(i);

            // Fetching all the points in i-th route
            for(int j=0;j<path.size();j++){
                HashMap<String,String> point = path.get(j);                 

                double lat = Double.parseDouble(point.get("lat"));
                double lng = Double.parseDouble(point.get("lng"));
                LatLng position = new LatLng(lat, lng); 

                points.add(position);                       
            }

            // Adding all the points in the route to LineOptions
            lineOptions.addAll(points);
            lineOptions.width(5);
            lineOptions.color(Color.RED);   

        }

        // Drawing polyline in the Google Map for the i-th route
        mMap.addPolyline(lineOptions);                          
    }           
} 
```

**来自 logcat 的错误日志**

```
04-22 20:03:18.911: E/AndroidRuntime(10471): FATAL EXCEPTION: main
04-22 20:03:18.911: E/AndroidRuntime(10471): java.lang.NullPointerException
04-22 20:03:18.911: E/AndroidRuntime(10471):    at maps.z.ac.<init>(Unknown Source)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at maps.z.bi.a(Unknown Source)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at maps.z.bi.b(Unknown Source)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at maps.z.ag.addPolyline(Unknown Source)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub.onTransact(IGoogleMapDelegate.java:137)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.os.Binder.transact(Binder.java:326)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.google.android.gms.maps.internal.IGoogleMapDelegate$a$a.addPolyline(Unknown Source)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.google.android.gms.maps.GoogleMap.addPolyline(Unknown Source)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.mso.master.MyMapFragment$ParserTask.onPostExecute(MyMapFragment.java:469)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.mso.master.MyMapFragment$ParserTask.onPostExecute(MyMapFragment.java:1)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.os.AsyncTask.finish(AsyncTask.java:631)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.os.Looper.loop(Looper.java:137)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at android.app.ActivityThread.main(ActivityThread.java:4931)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-22 20:03:18.911: E/AndroidRuntime(10471):    at dalvik.system.NativeStart.main(Native Method) 
```

# android - android onListLongItemClick for SherlockListFragment 无法被覆盖

> ID：16153761
> 
> 赞同：1
> 
> 时间：2013-04-22T18:06:16.820
> 
> 标签：android, actionbarsherlock, android-listfragment

简短背景：基本上是我小组的第一个 android 应用程序，我们正在为我们大学的高级设计课程构建。它本质上是实现数据库时的导航和用户界面实践。讲师计划将来使用该应用程序，因此我们必须使其向后兼容 android 2.3.x

问题：看起来 SherlockListFragment 没有实现 onListLongItemClick 并且它在代码中有自己的想法。它不允许我覆盖它并且它不包含超级方法。

代码：

```
public class DBList extends SherlockListFragment implements
TextToSpeech.OnInitListener { 
```

班级

```
private int selectedItem; 
```

被操纵的变量

```
public void onListItemClick(ListView l, View v, int itemPosition, long id) 
{
    selectedItem = (int) id;    
    speakOut(this.items.get((int)id).getName());
}//END void onListItemClick 
```

基本点击按预期工作，selectedItem 用于代码测试。它的预期用途是只说出字符串而不是其他任何东西。

```
@Override
public void onListLongItemClick(ListView l, View v, int itemPosition, long id)
{
super.onListItemLongClick(l, v, itemPosition, id);
Log.v(LOGTAG, "List Long Selection: launching context menu");

Log.v(LOGTAG, "Long id: " + id);
    selectedItem = (int) id;
l.showContextMenu();
}//END void onListLongItemClick 
```

这会引发错误：方法 onListLongItemClick 未定义类型 SherlockListFragment

它的预期用途是创建上下文菜单来编辑或删除数据库中的项目。我知道上下文菜单有效，但无论出于何种原因，本节中的任何代码都没有被阅读。即使删除了代码行，日志标签也不会回显，上下文菜单也会打开。

回答：

显然我无法考虑使用 getListView()。感谢 rciovati，我想我在启动上下文菜单时感到困惑，无论它是否在代码中。

```
public void onActivityCreated(Bundle savedState)
{
    super.onActivityCreated(savedState);

    Log.v(LOGTAG, "Context Menu registartion complete");
    registerForContextMenu(getListView());

    getListView().setOnItemLongClickListener(new OnItemLongClickListener() 
    {
        public boolean onItemLongClick(AdapterView<?> l, View v, int itemPosition, long id) 
        {
            Log.v(LOGTAG, "List Long Selection: launching context menu");
            selectedItem = (int) id;
            l.showContextMenu();
            return true;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:17:01.087

`ListFragment`类没有那个方法，所以你不能覆盖它是正常的。

[无论如何，您可以按照此处](https://stackoverflow.com/questions/6732611/long-click-on-listfragment)的说明拦截项目长按

# xml - 我的 Flash 动作脚本 3 中的错误

> ID：16153763
> 
> 赞同：0
> 
> 时间：2013-04-22T18:06:31.357
> 
> 标签：xml, actionscript-3, flash

我正在做一个“简单”的 Flash 项目。. flash 元素有 2 个按钮，每个按钮都有文本和更改图像。要显示的文本和图像是从 XML 文件中读取的。该项目将用作不同位置的信息亭的默认页面。我将通过 flashVars 将信息亭位置传递给 SWF 文件。这将使信息亭能够提取特定位置的文本和图像。我不是 Flash 开发人员，但因为没有其他人想要它或对 AS3 一无所知，所以得到了这个项目。我在我用来编写这个项目的 stackOverflow 和 google 上找到了很多很好的例子。

我的问题是，当您将鼠标悬停在按钮上时，旋转中的图像会变成空白。

最初，两个按钮都来自 XML 文件的动态，并且两个按钮都在消隐图像。在故障排除中，我对左侧按钮进行了硬编码，图像不再空白。我不确定是时间轴中的错误还是 as3 代码中的错误。当它实际上是读取动态 xml 文件以显示要开始的图像时，硬编码 xml 文件位置“修复”问题的事实对我来说没有意义。

我已将此项目放在我的个人网站上，因此任何想要帮助的人都可以查看和访问这些文件。

查看： http: [//minerb.com/kiosk/as3.cfm](http://minerb.com/kiosk/as3.cfm)

双方硬编码到 xml 文件的路径，它可以工作： http: [//minerb.com/kiosk/as4.cfm](http://minerb.com/kiosk/as4.cfm)

访问文件： http: [//minerb.com/kiosk/index.cfm](http://minerb.com/kiosk/index.cfm)

来自工作硬编码的 xml 文件位置的代码片段（Option1SlideShow 第 21-30 行）：

```
var d = new Date();
var n = d.getMinutes();

my_xml_loader.load(new URLRequest("assets/default/content.xml?"+n)); 
```

来自非工作动态 xml 文件位置的代码片段（动态幻灯片第 21-30 行）：：

```
var d = new Date();
var n = d.getMinutes();
// start dynamic content.xml 
var option2Loc:String;
option2Loc = loaderInfo.parameters.option2Loc+"content.xml?"+n;
// end dynamic content.xml

my_xml_loader.load(new URLRequest(option2Loc)); 
```

**从 XML 文件加载图像的整个 AS3 代码**

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

var my_speed:Number;
var my_total:Number;
var my_images:XMLList;

var my_loaders_array:Array = [];
var my_success_counter:Number = 0;
var my_playback_counter:Number = 0;

var my_slideshow:Sprite = new Sprite();
var my_image_slides:Sprite = new Sprite(); 

var my_timer:Timer;
var my_prev_tween:Tween; 

var my_xml_loader:URLLoader = new URLLoader();

//start test bits
var d = new Date();
var n = d.getMinutes();
// start dynamic content.xml 
    var option2Loc:String;
    option2Loc = loaderInfo.parameters.option2Loc+"content.xml?"+n;
// end dynamic content.xml

   my_xml_loader.load(new URLRequest(option2Loc));
//end test bits

my_xml_loader.addEventListener(Event.COMPLETE, processXML);

function processXML (e:Event):void{
    var my_xml:XML = new XML(e.target.data); 
    my_speed=my_xml.button.images.@SPEED;
    my_images=my_xml.button.images.IMAGE;
    my_total=my_images.length();    

    loadImages();
}

function loadImages():void{
    for (var i:Number = 0; i < my_total; i++){
        var my_url:String = my_images[i].@URL;
        var my_loader:Loader = new Loader();
        my_loader.load(new URLRequest(my_url));
        my_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
        my_loaders_array.push(my_loader); 
    }
}

function onComplete(e:Event):void{
    my_success_counter++;
    if (my_success_counter == my_total){
        startShow();
    }

}      

function startShow():void{
    addChild(my_slideshow);
    my_slideshow.addChild(my_image_slides);

    setChildIndex(my_slideshow,0);

nextImage();

    my_timer = new Timer(my_speed*1000);
    my_timer.addEventListener(TimerEvent.TIMER, timerListener);
    my_timer.start();

}

function nextImage():void{
    var my_image:Loader = Loader(my_loaders_array[my_playback_counter]);
    my_image_slides.addChild(my_image);
    //my_image.x = (stage.stageWidth - my_image.width)/2;
    //my_image.y = (stage.stageHeight - my_image.height)/2;

    if (my_image.width == my_image.height) {
        my_image.width = 305;
        my_image.height = 305;
    }   else if( my_image.width > my_image.height ) {
            var newWidth = (my_image.width *(305 / my_image.height));
            my_image.height = 305;  
            my_image.width = newWidth;
    }   else if( my_image.width < my_image.height ) {
            var newHeight = (my_image.height *(305 / my_image.width));
            my_image.width = 305;   
            my_image.height = newHeight;

    }

    my_image.x = 80;
    my_image.y = -140;

    new Tween(my_image,"alpha",Strong.easeOut,0,1,1,true); 

}     

function timerListener (e:TimerEvent):void{
    hidePrev();

    my_playback_counter++;
    if (my_playback_counter == my_total){
        my_playback_counter =0;
    }

nextImage();

} 

function hidePrev():void{
var my_image:Loader=Loader(my_image_slides.getChildAt(0));
my_prev_tween = new Tween(my_image,"alpha",Strong.easeOut,1,0,1,true);
my_prev_tween.addEventListener(TweenEvent.MOTION_FINISH, onFadeOut)

new Tween(my_image,"alpha",Strong.easeOut,1,0,1,true);

} 

function onFadeOut(e:TweenEvent):void{
my_image_slides.removeChildAt(0);

} 
```

**结束加载图像的 AS3 代码**

** 用于从 XMl 文件加载动态文本的整个 AS3 代码 **

```
import flash.net.URLRequest;
// start dynamic content.xml 

var option2Loc:String;
option2Loc = loaderInfo.parameters.option2Loc;

// end dynamic content.xml
var xmlData:XML = new XML();
var d = new Date();
var n = d.getMinutes();

var theURL_ur:URLRequest = new URLRequest(option2Loc+"content.xml?"+n);
var loader_ul:URLLoader = new URLLoader(theURL_ur);
loader_ul.addEventListener("complete", fileLoaded);

function fileLoaded(e:Event):void
{
xmlData = XML(loader_ul.data);
option2Text.text = xmlData.button.text;

} 
```

** 加载文本的结束代码 **

# javascript - jQuery 的 append 和 wrap 的区别

> ID：16153764
> 
> 赞同：1
> 
> 时间：2013-04-22T18:06:32.307
> 
> 标签：javascript, jquery

我没有得到什么`.wrap`没有`.append`。

*如果wrap*的主要目的是在元素周围添加一些东西，我可以很容易地停止使用`.wrap`并`.append`改为使用，对吧？

所以，我使用这个测试代码来*附加*一些东西：

```
<script type="text/javascript">

$(document).ready(function(){

    var $theWrapper = $('<div class="im-the-wrapper" />');
    var $theContent = $('<p>Me</p>');

    console.log($theWrapper.get(0));
    console.log($theContent.get(0));

    $('body').append($theContent);

    $theWrapper.append($theContent);

});

</script> 
```

结果：

![换行结果](https://i.imgur.com/roIzoox.png)

这个测试代码来*包装*东西：

```
<script type="text/javascript">

$(document).ready(function(){

    var $theWrapper = $('<div class="im-the-wrapper" />');
    var $theContent = $('<p>Me</p>');

    console.log($theWrapper.get(0));
    console.log($theContent.get(0));

    $('body').append($theContent);

    $theContent.wrap($theWrapper);

});

</script> 
```

结果：

![换行结果](https://i.imgur.com/f4mAno3.png)

我以为他们都会返回完全相同的对象，但事实并非如此。后台到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:11:38.430

`element.wrap(wrapper)`基本上是这样做的：

```
element.before(wrapper);
wrapper.append(element); 
```

这就是为什么当你使用`wrap`元素时不会丢失，但是当你手动执行它而不首先在元素之前附加包装器时，你最终只会从 DOM 中删除元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:14:42.540

`append`将内容插入到所选节点末尾的 DOM 中。

`wrap`将所选内容包含在另一个节点中，不一定与 DOM 有任何关系。

[这是一个演示](http://jsfiddle.net/Awhkh/1/)（检查结果）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:12:43.280

使用您的第一个代码，您将...

*   将内容放入 DOM，
*   从 DOM 中取出内容并将其放入包装器*（不在 DOM 中）*。

有了第二个，你...

*   将内容放入 DOM，
*   然后将其包装到位，以便包装器最终也出现在 DOM 中

* * *

鉴于您的示例，比其中任何一个更好的解决方案是...

*   将内容附加到包装器
*   然后将包装器附加到 DOM

```
$theWrapper.append($theContent).appendTo("body"); 
```

以这种方式发生的操纵较少。

* * *

该`.wrap()`方法实际上仅在已经存在需要包装在新元素中的东西时使用。

# eclipse - EGit 工作/根目录

> ID：16153768
> 
> 赞同：2
> 
> 时间：2013-04-22T18:06:39.583
> 
> 标签：eclipse, git, salesforce, egit

我在进行 Salesforce 开发时尝试使用 EGit。我的问题是这个。我不喜欢 EGit 如何推动文件夹结构。它的推动是这样的：

```
project_name
    --.settings
    --Referenced Packages
    --src
        --classes
        --triggers
        package.xml
    .project
    salesforce.schema 
```

理想情况下，我希望结构看起来像这样：

```
project_name
    --classes
    --triggers
    package.xml 
```

虽然开始移动和运行 git 命令我很紧张，因为我担心它会破坏我需要为团队开发工作的 EGit 的 GUI 部分。关于如何做到这一点的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:34:40.010

我可能会建议只使用[`.gitignore`](https://www.kernel.org/pub/software/scm/git/docs/gitignore.html)文件来排除其他文件，但如果您真的想`src`用作项目的根目录，您可以尝试在 Eclipse 中创建第二个通用项目，直接指向`src`您的 Force.com。为此，请转到**新建**| **项目...** | **一般**| **Project**，取消选中**Use Default Location**复选框并将**Location**指向 Force.com 项目的`src`目录（例如`/Users/me/Workspaces/Force.com IDE/my-sfdc-project/src`）。现在您可以在通用项目上启用 Git。两个项目都将指向磁盘上的相同文件（除了非`src`目录），但 Force.com 项目将了解您的组织和 SFDC 内容，而另一个将了解源代码控制。

# git - git命令在终端中不起作用

> ID：16153770
> 
> 赞同：0
> 
> 时间：2013-04-22T18:06:42.743
> 
> 标签：git, terminal

终端上的 Git 表现得很奇怪。

这是当我有 git 命令时终端的响应方式

```
git log 
```

![在此处输入图像描述](https://i.stack.imgur.com/9OmDe.png)

不知道如何修复它。

这就是 .bash_profile 的样子

```
"$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function
if [ -f /usr/local/etc/bash_completion.d/git-completion.bash ]; then
. /usr/local/etc/bash_completion.d/git-completion.bash
fi

export PS1='\[\033[01;32m\]\u@\h\[\033[00m\] \[\033[01;34m\]\w\[\033[00m\]$(git branch     &>/dev/null; if [ $? -eq 0 ]; then echo "\[\033[01;33m\]($(git branch | grep ^*|sed s/\*\ //))\[\033[00m\]"; fi)$ ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:02:36.670

使用以下命令更改 git 颜色配置：

`git config --global color.ui [always|auto|never]`

# smtp - 在 redmine 中发送测试电子邮件时出现错误“500 Unrecognized command”

> ID：16153771
> 
> 赞同：1
> 
> 时间：2013-04-22T18:06:44.550
> 
> 标签：smtp, redmine

我可以在 Redmine 中使用 gmail smtp 发送电子邮件。但是当我使用 out smtp 服务时，得到错误：500 Unrecognized command。有一个 crontab 发送电子邮件也使用相同的 smtp 服务邮件，但它工作得很好。configuration.yml 中的电子邮件配置如下：

```
production:
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      address: "mail.topxia.net"
      port: 25
      authentication: :login
      domain: 'mail.topxia.net'
      user_name: 'user'
      password: 'mypassword' 
```

在 commond 中运行“telnet mail.topxia.net 25”，结果为：

```
Trying 127.0.1.1...
Connected to topxia.net.
Escape character is '^]'.
220 howzhi.net ESMTP Haraka 1.2.1 ready 
```

我不知道这有什么问题！任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T08:13:37.040

在我开始使用 Postfix 发送邮件之前，我在以前的版本中遇到了同样的问题。这允许我使用 TLS 通过 Amazon SES（或任何服务器）服务器进行发送。

我在 Redmine 中唯一的配置是“交付方式：sendmail”。

你可能有理由坚持使用 Redmine 机制，但我发现我的问题在我使用 Postfix 后就消失了。

一些可能有帮助的资源： [http ://www.linuxgurru.com/2010/05/how-to-setup-email-notification-on-redmine/](http://www.linuxgurru.com/2010/05/how-to-setup-email-notification-on-redmine/) [http://blog.duoconsulting.com/2012/01/30 /使用-amazons-ses-with-postfix-as-a-smarthost-forwarder/](http://blog.duoconsulting.com/2012/01/30/using-amazons-ses-with-postfix-as-a-smarthost-forwarder/)

我通常不只是提供一个替代方案作为唯一的选择，但在这种情况下，它是我所知道的唯一一个，它可以以最小的努力工作。

# rspec - 这个模型规范在讨论测试套件中是如何工作的

> ID：16153773
> 
> 赞同：0
> 
> 时间：2013-04-22T18:06:48.843
> 
> 标签：rspec, fabrication-gem

我正在查看这里的话语源代码[https://github.com/discourse/discourse/blob/master/spec/models/invite_spec.rb](https://github.com/discourse/discourse/blob/master/spec/models/invite_spec.rb)并查看如下代码：

需要'spec_helper'

```
describe Invite do

  it { should belong_to :user }
  it { should have_many :topic_invites }
  it { should belong_to :invited_by }
  it { should have_many :topics }
  it { should validate_presence_of :email }
  it { should validate_presence_of :invited_by_id } 
```

我不熟悉他们在哪里获得价值`it`。似乎他们在这里有一个隐式对象，但我看不到他们在哪里创建它 - 这应该在 before 钩子中吗？他们使用的是 Fabricator 而不是 FactoryGirl - 有人可以告诉我这些是如何通过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:27:10.127

有一个隐含的主语`Invite`。这是一个 RSpec 功能：

> 最外层示例组块的第一个参数作为该示例的隐式主题可供每个示例使用。

见[https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/subject/implicit-subject](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/subject/implicit-subject)

# ios - 地图视图在某些设备上显示为空白

> ID：16153778
> 
> 赞同：1
> 
> 时间：2013-04-22T18:07:11.323
> 
> 标签：ios, google-maps-sdk-ios

我正在使用适用于 iOS 的 Google Maps SDK 来显示一些标记（在一种情况下）和一些折线（在另一种情况下）。我遇到的问题是有时地图根本不显示，但随后通过捏合动作放大和缩小会显示地图。请注意，我的标记和折线从一开始就显示得很好。

到目前为止，我们已经在 iPad 3、iPad 2、iPhone 5 和 iPod touch 5 上进行了测试。

有任何想法吗？

# r - 使用 facet_grid 时在 ggplot2 中指定自定义误差线

> ID：16153779
> 
> 赞同：3
> 
> 时间：2013-04-22T18:07:12.020
> 
> 标签：r, ggplot2

我从我的数据中创建了多个条形图，使用`stat_summary`. 但是，我想手动指定误差线的限制（而不是使用`mean_cl_boot`）。对于使用图表绘制的数据，如何做到这一点`facet_grid`？

我用来创建图表的代码如下：

```
graph <- ggplot(slantclean, aes(x = View,value, fill = Texture))

graph + stat_summary(fun.y = mean, geom = "bar", position = "dodge") + 
     stat_summary(fun.data = mean_cl_boot, geom = "pointrange", 
                     position = position_dodge(width = 0.90)) + 
     labs(x = "View", y = "Vertical height of ellipse (cm)", fill = "Texture") + 
     facet_grid( Shape ~ TNOGroup) 
```

不幸的是，数据的复杂性意味着不可能有一个最小的例子。可以在[此处](https://www.dropbox.com/s/qs5sq1yjomiaqe3/data.Rda)访问数据框。情节的一个例子是[here](http://i.imgur.com/HRTOqPQ.png)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T18:32:03.463

您可以定义自己的函数以在`stat_summary()`. 如果你使用`geom="pointrange"`in`stat_summary()`那么你的函数应该在一个数据框中给出`y`,`ymin`和`ymax`value 。

这里只是制作`my.fun`计算最小值、最大值和平均值的函数的示例。当用于`stat_summary()`此值时，将为数据中的每个级别计算。

```
my.fun<-function(x){data.frame(ymin=min(x),ymax=max(x),y=mean(x))}

graph <- ggplot(slantclean, aes(x = View,value, fill = Texture))

graph + stat_summary(fun.y = mean, geom = "bar", position = "dodge") + 
  stat_summary(fun.data = my.fun, geom = "pointrange", position = position_dodge(width = 0.90)) + 
  labs(x = "View", y = "Vertical height of ellipse (cm)", fill = "Texture") + 
  facet_grid( Shape ~ TNOGroup) 
```

![在此处输入图像描述](https://i.stack.imgur.com/guWBT.png)

# c# - Microsoft.Office.Interop.Excel.WorksheetFunction 不包含excel中的所有函数

> ID：16153783
> 
> 赞同：3
> 
> 时间：2013-04-22T18:07:27.483
> 
> 标签：c#, excel, office-interop

我正在尝试从 C# 调用 excel 函数。我可以使用以下代码来获取 excel 函数：

```
Application app = new Application();
WorksheetFunction functions = app.WorksheetFunction;
var sum = functions.Sum(1, 2); 
```

我可以从 WorksheetFunction 对象中获取 SUM 之类的函数。但是现在所有的功能都在那里了，比如 LEFT、RIGHT、DATE 等。我可以在其他地方找到它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:15:03.900

试试下面的例子

```
using Microsoft.Office.Interop.Excel;

static void Main(string[] args)
{

     Application a = new Application();
     double x = a.WorksheetFunction.Sum(1, 2);
     Console.WriteLine("Sum = {0}", x);

} 
```

**编辑**

```
using IExcel = Microsoft.Office.Interop.E
xcel;

Then declare and initialise a IWorkSheetFunction object

IExcel.IWorksheetFunction iwf = new IExcel.IWorksheetFunction();

Now you can use the functions as in
   double result = iwf.NormDist(1,2,3,4); 
```

# c++ - 使用递归的二分查找

> ID：16153784
> 
> 赞同：0
> 
> 时间：2013-04-22T18:07:28.077
> 
> 标签：c++, search, binary

我不知道为什么这不会返回密钥，它似乎跳过了这一步，我觉得逻辑是直的，如果 midptr 小于 key 则向右搜索，否则向左侧搜索。但它没有返回键，它返回-1。帮助？这是代码和功能

```
#include<iostream>
using namespace std;

int binsrch(int *raw, unsigned int size, int key);

int main()
{
  int raw[] = {1,3,5,7,11,23, 48};
  cout << binsrch(raw, 7, 11) << endl;

  system("pause");
  return 0;
}

int binsrch(int *raw, unsigned int size, int key)
{
    int *begptr, *endptr ,*midptr;
//see if we already have the key

if(*raw == key)
  return key;

begptr = raw;
endptr = raw + (size - 1);
midptr = raw + (size / 2);

cout << "#" <<*midptr << " size:" << size<<  endl;
if(*midptr == key)
{
  return key;
}
else  if( *midptr < key) //Search Right
{
  cout << "#" <<*(midptr+1) << " size:" << size<<  endl;
  binsrch(midptr + 1, size / 2, key);
}
else if(*midptr > key) //Search Left
{
    cout << " #" <<*midptr << " size:" << size<<  endl;
    binsrch(begptr, size / 2, key);
}

return -1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:11:45.463

你忘记了`return`陈述。您应该返回递归调用的结果：

```
binsrch(midptr + 1, size / 2, key); 
```

应该

```
return binsrch(midptr + 1, size / 2, key); 
```

否则，您的初始调用将执行主体的其余部分并始终返回`-1`，除非您在第一次递归之前找到密钥。

通过添加 return 语句，您打破了递归调用的控制流（即您不返回“未找到”值），并且您将在调用堆栈中一直向上传播最后一个返回值，直到第一个调用，最后返回你想要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:20:53.620

一切正常，但您没有返回正确的值。在 else-if 语句中，您调用函数递归，但返回的值不会传递给初始调用！尝试：

```
return binsrch(midptr + 1, size / 2, key); 
```

和

```
return binsrch(begptr, size / 2, key); 
```

那应该行得通。

-编辑：好吧，我想我一直很慢；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:20:57.093

您还应该添加：

```
if(endptr == midptr) return -1; 
```

在计算 endptr 以避免无限循环后，如果搜索元素不在数组中，例如 21.. 等

# excel - 在文件搜索中出现 .FoundFiles.count 错误

> ID：16153787
> 
> 赞同：0
> 
> 时间：2013-04-22T18:07:33.560
> 
> 标签：excel, vba

我正在尝试使用以下代码（从本网站复制）。但是当我到达 .FoundFiles.count 时，我收到一个错误“对象变量或未设置块变量”。我已经搜索了几个小时来解决这个问题。我想知道是否有人可以解释。谢谢。

```
Sub RunCodeOnAllXLSFiles()
Dim lCount As Long
Dim wbResults As Workbook
Dim wbCodeBook As Workbook

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.EnableEvents = False

On Error Resume Next
    Set wbCodeBook = ThisWorkbook
        With Application.FileSearch
            .NewSearch
            'Change path to suit
            .LookIn = "C:\MyDocuments\TestResults"
            .FileType = msoFileTypeExcelWorkbooks
            'Optional filter with wildcard
            '.Filename = "Book*.xls"
                If .Execute > 0 Then 'Workbooks in folder
                    For lCount = 1 To .FoundFiles.Count 'Loop through all
                        'Open Workbook x and Set a Workbook variable to it
                        Set wbResults = Workbooks.Open(Filename:=.FoundFiles(lCount), UpdateLinks:=0)

                        'DO YOUR CODE HERE
                         wbResults.Worksheets("Sheet1").Range("B7").NumberFormat = "YYYY.MM.DD"
                        wbResults.Close SaveChanges:=True
                    Next lCount
                End If
        End With
On Error GoTo 0
Application.ScreenUpdating = True
Application.DisplayAlerts = True
Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:19:09.167

Application.FileSearch 在 Excel 2007 中显然已被弃用；快速搜索产生了一些替代方案，例如[这个](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.excel/0elUnROexlY)。更多的挖掘也会出现其他解决方案。

# variables - 外部存储器中的 x86-64 汇编指针变量实现

> ID：16153796
> 
> 赞同：1
> 
> 时间：2013-04-22T18:08:04.403
> 
> 标签：variables, pointers, assembly, x86-64

当将地址指针从 cpu 寄存器移动到外部存储器时，地址值会随着明显错误的签名扩展而改变

汇编代码：

```
 .section .data
argc:   .quad  0
        .section .bss
argv:   .space  8   # pointer variable definition
    .section .text
_start:
    .global _start
    movq (%rsp),%rax    #arguments number
    movq %rax,argc
    movq 8(%rsp),%rdi       #string address of first argument of command line
    movq %rdi,argv          #pointer variable initialization 
```

GDB 调试器单步执行：

```
(gdb) p /a $rdi
$1 = 0x7fffffffe335
(gdb) p /a argv
$2 = 0xffffffffffffe335 
```

地址 0x7ffffffffe335 的 MSB 为零 ¿ 为什么 argv 值不相等而 MSB 为 1？¿ 如何在外部存储器中实现变量指针？

提前致谢

加州马约兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:19:14.780

内存内容很好，您使用 gdb 错误。由于您没有为`argv`变量提供调试信息，gdb 假定它是一个整数，并且在将其打印为地址时，它将被符号扩展。如果您使用例如检查内存，`x/a &argv`或者`x/8xb &argv`您将看到所有字节都在那里。

# jquery - 压缩重复的 .mouseover 函数

> ID：16153800
> 
> 赞同：1
> 
> 时间：2013-04-22T18:08:15.450
> 
> 标签：jquery, html, css

我正在尝试为鼠标悬停函数压缩重复 jQuery 的数量。

这似乎是一项非常基本的任务，但我正在努力解决这个问题。

我正在尝试这样做，以便当鼠标悬停在链接图像之一上时，相应的 div id imgdesc、imgdesc2 和 imgdesc3 之一中的副本变得可见。

jQuery

```
$(document).ready(function(){
$("#a").mouseover(function() { $("#imgdesc").css('visibility','visible'); });
$("#a").mouseout(function() { $("#imgdesc").css('visibility','hidden'); });
$("#b").mouseover(function() { $("#imgdesc2").css('visibility','visible'); });
$("#b").mouseout(function() { $("#imgdesc2").css('visibility','hidden'); });
$("#c").mouseover(function() { $("#imgdesc3").css('visibility','visible'); });
$("#c").mouseout(function() { $("#imgdesc3").css('visibility','hidden'); });
}); 
```

HTML

```
<div class="r_column">
    <div id="bgimg1">
        <div class="imgcont">
            <a id="a" href="#">
                <img src="pic/blackbox.jpg" alt="">
            </a>
        </div>
        <div id="imgdesc">
            <h1>Title</h1><br>
            <p class="subs">Name: Example</p><br>
            <p class="subs">Name: Example</p>
        </div>
    </div>
    <div id="bgimg1">
        <div class="imgcont">
            <a id="b" href="#">
                <img src="pic/blackbox.jpg" alt="">
            </a>
        </div>
        <div id="imgdesc2">
            <h1>Title</h1><br>
            <p class="subs">Name: Example</p><br>
            <p class="subs">Name: Example</p>
        </div>
    </div>
    <div id="bgimg1">
        <div class="imgcont">
            <a id="c" href="#">
                <img src="pic/blackbox.jpg" alt="">
            </a>
        </div>
        <div id="imgdesc3">
            <h1>Title</h1><br>
            <p class="subs">Name: Example</p><br>
            <p class="subs">Name: Example</p>
        </div>
    </div>
</div> 
```

CSS

```
div#bgimg1{
    float: right;
    position: relative;
    height: 212px;
    display: inline-block;
}

.r_column{
    display:block;
    position:relative;
    width:904px;
    float: right;
}

.imgcont{
    float: right;
    width: 461px;
    margin: 10px 12px 10px 10px;
    position: relative;
}

div#imgdesc,div#imgdesc2,div#imgdesc3{
visibility:hidden;
text-align:right;
float:right;
width:395px;
margin: 10px 0px 10px 10px;
position: relative;
} 
```

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:12:21.073

修改您的 DOM 以便在按钮及其元素之间存在语义关系，然后您可以使用单个事件处理程序。您可以通过将目标元素的 放入链接的`<a>`标签中轻松地做到这一点：`id``href`

```
 <div class="imgcont">
        <a id="a" href="#imgdesc">
            <img src="pic/blackbox.jpg" alt="">
        </a>
    </div>
    <div id="imgdesc">
        <h1>Title</h1><br>
        <p class="subs">Name: Example</p><br>
        <p class="subs">Name: Example</p>
    </div> 
```

您可以通过使用`hover`而不是`mouseover`和来简单地处理您的事件`mouseout`：

```
$("a").hover(
  function () { $($(this).attr("href")).show(); }),
  function () { $($(this).attr("href")).hide(); })
); 
```

在处理程序中，`$(this).attr("href")`返回`"#imgdesc"`，允许您立即选择基于`<a>`悬停的正确元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:20:23.493

在要悬停的元素上使用 a`data-attribute`并将要显示的元素的选择器设置为值。例如

```
<div class="imgcont">
    <a id="a" href="#" data-target="#imgdesc">
        <img src="pic/blackbox.jpg" alt="">
    </a>
</div>
<div id="imgdesc">
    <h1>Title</h1><br>
    <p class="subs">Name: Example</p><br>
    <p class="subs">Name: Example</p>
</div> 
```

那么JS就很简单了。

```
$('[data-target]').hover(

function () {
   $( $(this).attr('data-target')).show()
},

function () {
    $($(this).attr('data-target')).hide()
}); 
```

但你也可以只用 css 来做：

```
.imgcont:hover + div  { display:none;} 
```

您是否应该更改`div`为更合适的选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:22:32.570

微薄响应的替代方法可能是显示 a 元素的父 div 的兄弟姐妹......

```
<div class="imgcont">
    <a id="a" href="#" class="hoverimage">
        <img src="pic/blackbox.jpg" alt="">
    </a>
</div>
<div class="hidden">
    <h1>Title</h1><br>
    <p class="subs">Name: Example</p><br>
    <p class="subs">Name: Example</p>
</div>

 //in your javascript
    $(".hoverimage").hover(
      function () { $(this).parent().siblings().show(); }),
      function () { $(this).parent().siblings().hide(); })
    ); 
```

您可以将基本 display:none 应用于所有 .hidden 元素。

# python - ARM 上的 Tornado socket.error

> ID：16153804
> 
> 赞同：4
> 
> 时间：2013-04-22T18:08:29.153
> 
> 标签：python, tornado, raspberry-pi

我正在尝试使用 Tornado 服务器在 RasPi 上运行一个小型 python webapp，但是每当我尝试启动它时，我都会收到错误消息

```
Traceback (most recent call last):
  File "main.py", line 78, in <module>
    application.listen(8080)
  File "/usr/local/lib/python2.7/dist-packages/tornado-3.0.1-py2.7.egg/tornado/web.py", line 1343, in listen
    server.listen(port, address)
  File "/usr/local/lib/python2.7/dist-packages/tornado-3.0.1-py2.7.egg/tornado/tcpserver.py", line 113, in listen
    sockets = bind_sockets(port, address=address)
  File "/usr/local/lib/python2.7/dist-packages/tornado-3.0.1-py2.7.egg/tornado/netutil.py", line 69, in bind_sockets
    sock = socket.socket(af, socktype, proto)
  File "/usr/lib/python2.7/socket.py", line 187, in __init__
    _sock = _realsocket(family, type, proto)
socket.error: [Errno 97] Address family not supported by protocol 
```

我有理由确定我做的一切都正确

*   我试图监听的端口没有在使用中
*   我没有指定地址，但似乎我不需要，因为[Tornado“hello world”](http://www.tornadoweb.org/en/stable/#hello-world)也没有（该演示应用程序本身也没有运行；它给出了完全相同的错误，但行号不同)
*   同一个应用似乎在 x86 和 x86_64 机器上运行良好

我需要在 ARM 上进行不同的调用吗，或者这是 tornado/socket.py 中的某个错误？有可用的解决方法吗？

由于它似乎是相关的，因此 Pi 正在运行[此页面](http://www.raspberrypi.org/downloads)上最新的 Raspbian 映像（几天前从第二个镜像下载，所以不再*是*最新的了）。我目前正在尝试旧版本，如果不起作用，我会尝试最新版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T22:46:42.110

事实证明，这与 ARM 无关。根据他的评论中链接[的答案](https://stackoverflow.com/a/8549132/190887) ，如果您启动它的系统支持 IPv6，Tornado*似乎会感到困惑，这显然包括 Raspberry Pi。*`artless noise`

 *启动服务器

```
application.listen(8080, '0.0.0.0') 
```

而不仅仅是

```
application.listen(8080) 
```

为我解决了这个问题。

**EDIT2**：对于跨平台开发人员：我之前概述的策略实际上不起作用。`application.listen`即使调用错误（这似乎可能是 Tornado 中的错误），调用也会绑定指定的端口。换句话说，您需要在调用`listen`.

由于我在 GNU/Debian 上运行我的应用程序，因此以下内容对我来说效果很好：

```
def listen(port):
    (osName, machineName, osRelease, osVersion, machineType) = os.uname()
    if re.search("arm", machineType):
        logging.info("Running on ARM...")
        application.listen(port, '0.0.0.0')
    else:
        logging.info("Running on x86...")
        application.listen(port) 
```

不知道这个解决方案在其他操作系统或架构下有多可靠。*

# ruby-on-rails - Ruby 1.9.2p290 URL 正则表达式有时会挂起/中断

> ID：16153808
> 
> 赞同：0
> 
> 时间：2013-04-22T18:08:51.677
> 
> 标签：ruby-on-rails, ruby, regex

我正在使用 jQuery 验证插件在我的 Rails 应用程序中进行客户端验证。我还想在服务器端使用完全相同的正则表达式进行验证，因此我从库中复制了正则表达式并将其设置为我的客户模型中的常量，该模型具有需要有效 url 的网站属性。

虽然正则表达式通常有效，但如果我匹配的字符串太长，它会无限期挂起。当我通过 Rubular 运行它时，我收到以下错误：

```
Rubular suspects this regex will take forever to parse. Regexes of this sort make Rubular sad. Adjust the regex or else wait a few minutes and try again. 
```

我对正则表达式几乎一无所知，所以我想知道是否有人注意到在 Ruby 上下文中使用这个正则表达式有什么明显的错误。如果 Rubular 解释正则表达式的哪一部分引发了警告，那就太好了。

```
class Customer
    URL_REGEX = /^(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i

    validates :website, format: { with: URL_REGEX }, allow_blank: true, length: { maximum: 255 }
end 
```

以防正则表达式很难看到，这里有一个链接：[https ://gist.github.com/mackshkatz/5437179](https://gist.github.com/mackshkatz/5437179)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:25:27.497

您不需要提供正则表达式。您可以在 URI 中使用 Ruby stdlib 中的一个。

做就是了：

```
require 'uri'
class Customer

   validates :website, format: { with: URI::regexp }, allow_blank: true, length: { maximum: 255 }
end 
```

URL 也必须以`http`or开头`https`。因此，如果字符串不以任何一个开头，您可能需要添加它。

# android - 手动重新定位同级布局后 TextView 未调整

> ID：16153810
> 
> 赞同：0
> 
> 时间：2013-04-22T18:08:56.833
> 
> 标签：android, layout, onmeasure

我有一种情况，我需要手动调整 WebView 的尺寸`onMeasure`，因为我需要 webview 是方形的并占据屏幕的特定百分比（并且在它被塑造成方形后出现在某个特定的相对坐标处）。webview 的形状确实看起来正确，并且驻留在我想要它的屏幕上（我正在使用`setX()`and `setY()`，但是我发现兄弟 TextViews 然后不会重新定位到它们通常应该在的位置，基于它们与 WebView 的相对定位关系。

换句话说，它们是根据原始 WebView 的形状和位置放置的，当 WebView 调整大小时，它们会保持原状。

我还需要做些什么才能让 Android 根据重新定位的 WebView 将它们移动到位吗？还是我也必须手动操纵和塑造它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:52:07.650

您应该使用以下方法更改大小和形状`LayoutParams`：

```
Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();     
int screenWidth = display.getWidth();
int screenHeight = display.getHeight();

WebView mWebView = (WebView) findViewById(R.id.myWebView);
ViewGroup.LayoutParams params = mWebView.getLayoutParams();

params.width = screenWidth*3/4;//or whatever you need, relative to the screen size
params.height = screenHeight*3/4;

//you can also add margins programmatically here, which may be better than using setX/setY

mWebView.setLayoutParams(params); 
```

# sql - TIFF IFilter 结果的页码

> ID：16153815
> 
> 赞同：1
> 
> 时间：2013-04-22T18:09:36.440
> 
> 标签：sql, full-text-search, tiff, ifilter

我们使用 Microsoft TIFF IFilter 来 OCR 文档并将信息存储在 SQL Server 2012 全文搜索中。有没有办法配置过滤器或 SQL FTS 来存储找到搜索结果的页码？例如，如果我搜索“foo”，我想知道在第 2、5 和 8 页上找到了“foo”一词。这是否可能不使用第三方 IFilter 或 FTS 引擎？

# ruby-on-rails - 开发日志：ActionView::Template::Error（nil:NilClass 的未定义方法“名称”）：

> ID：16153818
> 
> 赞同：2
> 
> 时间：2013-04-22T18:09:46.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我是新手，这是 Richard Schneeman 的 Rails 教程。这就是我的视图/产品文件夹中的 index.html.erb 文件中的全部内容。

```
<% first_product = Product.first %>
<% lots_of_products = Product.includes(:user).all %>
<ul>
  <% lots_of_products.each do |product| %>
    <li>
      Product Name: "<%= product.name %>"" costs $<%= product.price %>
      Sold by <%= product.user.name %>
    </li>
  <% end %>
</ul> 
```

问题在于`<%= product.user.name %>`，它给出了错误：

> Products#index 中的 NoMethodError 用于 nil:NilClass 的未定义方法“名称”。

我的控制器文件是香草，我的 routes.rb 有：

```
ControllerExercise::Application.routes.draw do
  get '/products' => 'products#index'
  resources :users
end 
```

这是在模型中：

```
class Product < ActiveRecord::Base
  belongs_to :user
  attr_accessible :name, :price
end

class User < ActiveRecord::Base
  has_many :products
  attr_accessible :job_title, :name
end 
```

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T19:32:03.840

你也可以试试

```
product.user.try(:name) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T18:16:20.123

在您的数据库中，我怀疑您的某些产品数据不包含 sold_by_id 或 user_id。所以它得到 product.user nil 因为没有用户与产品相关联。代替

```
<%= product.user.name %> 
```

采用

```
<%= product.user.name if product.user %> 
```

跳过此异常。

所以你的 index.html.erb 变成

```
<% lots_of_products = Product.includes(:user).all %>
<ul>
  <% lots_of_products.each do |product| %>
<li>
  Product Name: <%= product.name %> costs $<%= product.price %>
  Sold by <%= product.user.name if product.user %>
</li>
<% end %>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T09:19:40.527

我也遇到了这个问题并使用了一个简单的 if else 语句，因为即使用户名不存在，我仍然想显示一些东西

```
<!-- SHOW USERNAME IF IT EXISTS -->

<% if product.user %>
   <p><strong><%= product.user.name %></strong></p>
<% else %>
   <p><strong>Anonymous</strong></p>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-19T21:35:11.513

一个很好的解决方法是 ruby​​ 的安全访问运算符 &。

见[http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/](http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/)

它是由 Matz（ruby 的创始人）针对这种情况发明的。在你的情况下，它看起来像

```
product.user&.name 
```

如果未定义 name 属性，则返回 nil。请记住，它仅在 ruby​​ 2.3.0 及更高版本中可用。

# c - 将结构传递到 ISR

> ID：16153819
> 
> 赞同：0
> 
> 时间：2013-04-22T18:09:55.397
> 
> 标签：c, pic, microchip, isr

我正在使用 Hi-Tech-PICC v9.65PL1 用 C 语言对 PIC16F876 进行编程。

对于中断，我使用以下结构：

```
void interrupt isr() {
    if (T0IF) {
               //Do STUFF
     T0IF = 0;
    }
} 
```

我试图弄清楚如何将对象传递到 ISR。我知道我可以简单地将对象设为全局变量，但这不是重点。我已经看到它在 C 中使用另一种架构完成。由于我使用的是 C，所以当我说一个对象时，我指的是 typedef 结构，例如：

```
typedef struct {
    volatile char state;
    rtc_t rtc;
    shiftReg_t shiftReg;
} clock_t; 
```

我的目标是让 ISR 改变 clock_t 结构中的“状态”。

有人可以解释一下这样做涉及到什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:55:35.640

据我所知，鉴于架构并没有那么不同，您需要执行原子操作来更改 clock_t 结构中的状态。

也就是说，可以`void interrupt isr()`带参数吗？如果是，那么您*可以*使用本地 clock_t 结构，否则最好的选择是使用全局变量。

如果 isr 确实接受该参数，您可以如下所示：

```
int main()
{
    clock_t noteState;
    ....
    isr(&noteState);
    ....
} 
```

和 isr 定义为::

```
void interrupt isr(clock_t *tmp)
{
    interruptDisable(); // I am guessing that T0IF is a global value, yes?
    /* Perform operation */
    tmp->state = newState /*(whatever you choose to set)*/
    interruptEnable();
} 
```

然后您可以在将来重用 noteState :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:15:23.713

在某些情况下，IRQ 中的变量更新是“原子的”，如果变量可以在一条指令中更新，如递增、递减、只读、只写。因此，您不需要在 IRQ 处理程序上禁用和启用裸 c 代码的中断。一些 OS 编码器为这些情况提供了功能，以确保使用单条指令更新变量。操作系统功能示例：[http ://www.qnx.com/developers/docs/6.3.2/neutrino/lib_ref/a/atomic_add.html](http://www.qnx.com/developers/docs/6.3.2/neutrino/lib_ref/a/atomic_add.html)

对于其他一些情况，读/修改/写操作在大多数 cpu 上不是原子的（尽管它们在某些 CISC cpus 上是/是原子的），并且在访问多个变量时不能保证原子性。对于这些情况，在变量更新之前使用 enter_critical_section() 和在变量更新之后使用 exit_critical_section() 函数。对于bare-c（非操作系统）情况，这些函数简化为interruptEnable() 和interruptDisable() 函数。

# ruby - 按已加入记录的属性排序

> ID：16153823
> 
> 赞同：0
> 
> 时间：2013-04-22T18:10:27.370
> 
> 标签：ruby, mongodb, mongomapper

我有一组记分卡（用户得分的地方）

我想按比赛日期对他们的记分卡进行排序（存储在 match 属性中）

记分卡和匹配是单独的文档（未嵌入），并希望执行以下操作：

```
user.scorecard.sort(:match.dateofmatch).all 
```

我从记分卡到它的匹配对象和匹配对象 dateofmatch 进行排序的地方。这不是正确的语法，我该怎么做？我感觉我需要建立自己的模型，这是一个带有 dateofmatch 属性的记分卡，一旦建立，就按它排序。

是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:07:05.590

尝试[sort_by](http://ruby-doc.org/core-2.0/Array.html#method-i-sort_by-21)

```
user.scorecards.sort_by{|sc| sc.match.dateofmatch } 
```

# c# - @HTML.Drop Down List 并显示数据绑定信息

> ID：16153824
> 
> 赞同：0
> 
> 时间：2013-04-22T18:10:41.313
> 
> 标签：c#, asp.net-mvc, html, razor, asp.net-mvc-4

我目前正在尝试将一组缺少的 SQL 查询报告发布到我的网页上的下拉选择中。

我相信我的模型是正确的，但是即使我的控制器具有适当的语法，它将任何列表识别为 @HTML.DropDown 的一部分也存在一些问题。因此，应用程序在呈现网页之前崩溃。我希望这是一个简单的解决方法。

这是我要调用的函数的控制器代码：

```
public ActionResult FindDatMissingQuery()
        {
            HomeModel H = new HomeModel();
            DropDownList ddl = new DropDownList();
            ddl.DataSource = H.MissingQueryResults();
            ddl.DataBind();
            ViewData["MissingChem"] = ddl;

            return View();
        } 
```

我的观点

```
@using (Html.BeginForm("FindDatMissingQuery","Home")){
    @Html.ValidationSummary(true)
    <fieldset>
    <legend>Missing Chemistry Report</legend>
    <br />

@Html.DropDownList("MissingChemistryReports", ViewData["MissingChem"] as SelectList)

</fieldset>

} 
```

我的模型功能：

```
 public List<string> MissingQueryResults()
        {
            //HomeModel Tolerances = new HomeModel();
            List<String> nameList = new List<String>();

            SqlCommand missingQuery = new SqlCommand("SELECT heatname FROM dbo.chemistrytable WHERE heatname NOT IN (SELECT heatname FROM dbo.chemistrytable WHERE sampletype = 'AVE') AND analysistime bewteen Dateadd(day, -1, Current_Timestamp) and Current_Timestamp AND heatname LIKE '[a,b,c,d]%' Order by heatname'");// + heatName + "'");
            SqlCommand mainquery = new SqlCommand("SELECT analysisvalue.analysisid, heatname, analysistime, sampletype, grade, productid, element, value FROM dbo.AnalysisValue INNER JOIN dbo.ChemistryAnalysis ON dbo.AnalysisValue.AnalysisID = dbo.ChemistryAnalysis.AnalysisID Where heatname = '" + heatName + "' Order By analysisvalue.analysisid Asc, element");

            using (SqlConnection conn = new SqlConnection(strSQLconnection))
            {
                missingQuery.CommandTimeout = 20000;
                conn.Open();
                missingQuery.Connection = new SqlConnection(strSQLconnection);
                missingQuery.Connection.Open();

                using (var reader = missingQuery.ExecuteReader())
                {
                    int fieldCount = reader.FieldCount;

                    while (reader.Read())
                    {
                        for (int i = 0; i < fieldCount; i++)
                        {
                            nameList.Add(reader[i].ToString().Trim());

                        }

                    }
                }return nameList; 
```

任何帮助将非常感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:18:23.473

这就是我在示例中使用下拉列表的方式：

```
 @Html.DropDownList("ActiveErrors", ListHelpers.PartsActive())

public static List<SelectListItem> PartsActive()
{
    List<SelectListItem> list = new List<SelectListItem>();
    list.Add(new SelectListItem { Text = "Yes", Value = "Y" });
    list.Add(new SelectListItem { Text = "All", Value = "A" });
    list.Add(new SelectListItem { Text = "No", Value = "N" });
    return list;
} 
```

**或使用模型属性**

控制器：

```
ViewBag.RunTypeID = new SelectList(db.RunType, "ID", "RunTypeName").OrderBy(l => l.Text); 
```

看法：

```
<span class="rightContent">
        @Html.DropDownList("RunTypeID", String.Empty)
    </span> 
```

# scala - 了解流

> ID：16153826
> 
> 赞同：2
> 
> 时间：2013-04-22T18:10:42.930
> 
> 标签：scala

有一种模式反复出现，我一直无法完全理解，例如下面的[代码](http://aperiodic.net/phil/scala/s-99/)来计算`isPrime`

```
class S99Int(val start: Int) {
  import S99Int._
  def isPrime: Boolean =
    (start > 1) && (primes takeWhile ( _ <= Math.sqrt(start) ) forall ( start % _ != 0 ))
}

object S99Int {
  implicit def int2S99Int(i: Int): S99Int = new S99Int(i)
  val primes = Stream.cons(2, Stream.from(3, 2) filter { _.isPrime })
}
import S99Int._

24 isPrime        //returns false 
```

我不明白的是：`primes`在`filter`使用`isPrime`中。但是再次`def isPrime`使用相同`primes`的元素。这不就像一个无限循环，一件事问另一件事，然后那件事又问自己。虽然代码工作完美。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:29:05.813

Scala 中的流是惰性求值的。这意味着只计算直到您实际需要的最后一个值的值。这对您的主要示例意味着什么：

`isPrime`不使用整个`primes`流，而只使用其中的一部分：

```
(primes takeWhile ( _ <= Math.sqrt(start) ) 
```

它仅使用小于您要测试的数字的平方根的部分（以及下一个，因为您必须对其进行评估才能看到它太大）。当现在再次`primes`调用`isPrime`其中一个较小的数字时，所需的部分`primes`甚至更小。这种情况一直持续到你达到最初的 2。

把它想象成一个相互递归的函数：

*   `isPrime`原样
*   `primes`可以认为是`primesUpTo(n: Int)`

接着：

```
class S99Int(val start: Int) {
  import S99Int._
  def isPrime: Boolean =
    (start > 1) && (S99Int.primesUpTo(math.sqrt(start).toInt) forall ( start % _ != 0 ))
}

object S99Int {
  implicit def int2S99Int(i: Int): S99Int = new S99Int(i)
  def primesUpTo(n: Int): IndexedSeq[Int] = {
    if (n >= 2) 2 +: (3 to n) filter { _.isPrime }
    else IndexedSeq.empty
  }
} 
```

为您实现的唯一一件事`Stream`是缓存值，`primesUpTo(n: Int)`以便它们只计算一次，并使表达式`UpTo`对于函数式程序员更直观。

# php - 使用 PHP/PDO 从多个表中存储/选择行

> ID：16153828
> 
> 赞同：0
> 
> 时间：2013-04-22T18:10:56.087
> 
> 标签：php, mysql, pdo

我知道如何从单个表中选择行并存储在数组中：

```
<?php
    include "db.php";
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "SELECT * from chars";
    $stmt = $conn->prepare($sql);
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    $bows = array();
    if ($stmt) {
        try {
            $stmt->execute();
            while ($row = $stmt->fetch()) {
                $chars[] = $row;
            }
        }
        catch (PDOException $e) {
            var_dump($e);
        }
    }
?> 
```

但是，如果我有多个表，我该怎么做，即。`chars`, `items`,`bases`等，我想为每个查询使用不同的选择查询并存储在不同的数组中？

编辑：表格没有相关字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:14:39.863

只需使用您目前正在使用的相同方法，但不要使用所有无用的代码：

```
<?php
include "db.php";

$stmt = $conn->prepare("SELECT * from chars");
$stmt->execute();
$chars = $stmt->fetchAll();

$stmt = $conn->prepare("SELECT * from items WHERE id=?");
$stmt->execute(array($id));
$item = $stmt->fetch();

$stmt = $conn->prepare("SELECT name FROM bases WHERE id=?");
$stmt->execute(array($id));
$base = $stmt->fetchColumn(); 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:33:43.587

如果这些表完全不相关，并且您想将所有数据从它们全部提取到三个单独的数组中，则需要三个单独的 select 语句。

如果表是相关的，则可以使用 JOIN。

例如，如果表***items***有***列 id***，并且 table ***bases***有列***item_id***，它引用 items 中的***id***列，您可以使用以下方式获取组合数据：

```
 SELECT * from items
 INNER JOIN bases ON items.id=bases.item_id; 
```

这是你想要的？如果没有，请提供更多信息，我将修改我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:15:44.913

如果您只是想将多个查询的结果存储在不同的数组中，请对不同的查询和数组执行与现在相同的操作。如果您要跨表抓取数据，根据您的需要，您可以修改查询以使用联接。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T18:38:36.023

你可以写一个函数

```
<?php
include "db.php";
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

function getArr($vartable) {
  global $conn;
  $sql = "SELECT * from ".$vartable;
  $stmt = $conn->prepare($sql);
  $stmt->setFetchMode(PDO::FETCH_ASSOC);
  $ars = array();
  if ($stmt) {
    try {
        $stmt->execute();
        while ($ars[] = $stmt->fetch());
    }
    catch (PDOException $e) {
        var_dump($e);
    }
  }
return $ars;
}

$chars = getArr("chars");
$items = getArr("items");
$bases = getArr("bases");

?> 
```

# amazon-s3 - 在 Heroku 上将 S3 存储桶（欧盟地区）连接到 LocomotiveCMS 时出现问题

> ID：16153836
> 
> 赞同：1
> 
> 时间：2013-04-22T18:11:25.793
> 
> 标签：amazon-s3, locomotivecms

我无法将 heroku 上的 locomotiveCMS 引擎与我的 S3 Bucket 连接起来。我有一个 EU-Region Bucket 并将 heroku vars 设置如下：

```
S3_BUCKET: assets.mydomain.de
S3_BUCKET_REGION: eu-west-1 
```

使用此设置，我的 HTML 源代码中出现错误，并且资产不会上传：

```
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>PermanentRedirect</Code><Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message><RequestId>AB6E67D9D5B88B65</RequestId><Bucket>assets.mydomain.de</Bucket><HostId>sZB988g5ap7FKNoliaAWros5J3aHApHVzmj4dvEhD0OPonJE9I5Oxxn5u6L6j2g7</HostId><Endpoint>assets.mydomain.de.s3.amazonaws.com</Endpoint></Error> 
```

EU-Buckets 是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T08:05:54.963

s3 存储桶只是一个名称，而不是域名。在 s3 控制台管理中，您创建的存储桶名称是什么？

# java - 更新 TableView 行外观

> ID：16153838
> 
> 赞同：13
> 
> 时间：2013-04-22T18:11:29.013
> 
> 标签：java, javafx-2, javafx, tableview

我在更改某些 TableView 行的外观时遇到了一些困难。该行应显示带有笔划和红色的文本。实际上，我可以将其显示为红色，但仍无法进行中风。这是我用来改变线条外观的 css 类：

```
.itemCancelado {
    -fx-strikethrough: true;
    -fx-text-fill: red;
} 
```

当用户将项目标记为取消时添加此样式类：

```
public class ItemCanceladoCellFactory implements Callback<TableColumn, TableCell> {
    @Override
    public TableCell call(TableColumn tableColumn) {
        return new TableCell<ItemBean, Object>() {
            @Override
            public void updateItem(Object item, boolean empty) {
                super.updateItem(item, empty);
                setText(empty ? "" : getItem().toString());
                setGraphic(null);
                int indice=getIndex();
                ItemBean bean=null;
                if(indice<getTableView().getItems().size())
                    bean = getTableView().getItems().get(indice);
                if (bean != null && bean.isCancelado())
                    getStyleClass().add("itemCancelado");
            }
        };
    }
} 
```

这里还有一个问题，标记为取消的行仅在用户从可观察列表中添加或删除元素时才会改变颜色。有没有办法强制更新 TableView？

# 编辑信息

我将 ItemBean 类更改为使用 BooleanProperty 并部分解决：

```
public class ItemBean {
    ...
    private BooleanProperty cancelado = new SimpleBooleanProperty(false);
    ...
    public Boolean getCancelado() {
        return cancelado.get();
    }

    public void setCancelado(Boolean cancelado){
        this.cancelado.set(cancelado);
    }

    public BooleanProperty canceladoProperty(){
        return cancelado;
    }
} 
```

不幸的是，只有“cancelado”列（最终工作时将被隐藏或删除）改变了外观：

![cancelado 列更改外观](https://i.stack.imgur.com/G3ys7.png)

在这里我配置列和表：

```
public class ControladorPainelPreVenda extends ControladorPainel {

    @FXML
    private TableView<ItemBean> tabelaItens;
    private ObservableList<ItemBean> itens = FXCollections.observableArrayList();
    ...

    private void configurarTabela() {
        colunaCodigo.setCellValueFactory(new MultiPropertyValueFactory<ItemBean, String>("produto.id"));
        colunaCodigo.setCellFactory(new ItemCanceladoCellFactory());
        colunaDescricao.setCellValueFactory(new MultiPropertyValueFactory<ItemBean, String>("produto.descricao"));
        colunaDescricao.setCellFactory(new ItemCanceladoCellFactory());
        colunaLinha.setCellValueFactory(new MultiPropertyValueFactory<ItemBean, String>("produto.nomeLinha"));
        colunaLinha.setCellFactory(new ItemCanceladoCellFactory());
        colunaQuantidade.setCellValueFactory(new PropertyValueFactory<ItemBean, BigDecimal>("quantidade"));
        colunaQuantidade.setCellFactory(new ItemCanceladoCellFactory());
        colunaValorLiquido.setCellValueFactory(new PropertyValueFactory<ItemBean, BigDecimal>("valorLiquido"));
        colunaValorLiquido.setCellFactory(new ItemCanceladoCellFactory());
        colunaValorTotal.setCellValueFactory(new PropertyValueFactory<ItemBean, BigDecimal>("valorTotal"));
        colunaValorTotal.setCellFactory(new ItemCanceladoCellFactory());
        colunaCancelado.setCellValueFactory(new PropertyValueFactory<ItemBean, Boolean>("cancelado"));
        colunaCancelado.setCellFactory(new ItemCanceladoCellFactory());
        tabelaItens.setItems(itens);
    }
    ...
} 
```

如何更新所有列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T07:42:00.203

**有没有办法强制更新 TableView？**

创建类的`Cancelado`a 属性`ItemBean`：

```
private BooleanProperty cancelado = new SimpleBooleanProperty(false);
public BooleanProperty canceladoProperty() { 
  return cancelado;
} 
```

现在，列表视图的默认单元格实现将侦听`cancelado`属性的更改并适当地触发`updateItem`对相关列表视图单元格的调用。

请注意，返回属性的函数的名称很重要，它必须是`canceladoProperty()`JavaFX 扩展了标准 Java Beans 成员 getter 和 setter 模式的属性。

**属性命名约定背景**

[JavaFX 属性访问的命名约定在 Oracle使用 JavaFX 属性和绑定](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)教程的这段代码片段中进行了演示。

```
package propertydemo;

import javafx.beans.property.DoubleProperty;
import javafx.beans.property.SimpleDoubleProperty;

class Bill {

    // Define a variable to store the property
    private DoubleProperty amountDue = new SimpleDoubleProperty();

    // Define a getter for the property's value
    public final double getAmountDue(){return amountDue.get();}

    // Define a setter for the property's value
    public final void setAmountDue(double value){amountDue.set(value);}

     // Define a getter for the property itself
    public DoubleProperty amountDueProperty() {return amountDue;}

} 
```

[openfx wiki 上对JavaFX 属性架构](https://wikis.oracle.com/display/OpenJDK/JavaFX+Property+Architecture)有一个很好的概述，其中详细介绍了属性的命名约定以及各种更高级的使用场景，例如只读属性和惰性属性。

**在 TableView 中自定义行的外观**

[此gist 示例代码](https://gist.github.com/jewelsea/2774276)中提供了更多信息和基于布尔行值自定义表格行外观的示例。

```
private TableColumn<Friend, Boolean> makeBooleanColumn(String columnName, String propertyName, int prefWidth) {
  TableColumn<Friend, Boolean> column = new TableColumn<>(columnName);
  column.setCellValueFactory(new PropertyValueFactory<Friend, Boolean>(propertyName));
  column.setCellFactory(new Callback<TableColumn<Friend, Boolean>, TableCell<Friend, Boolean>>() {
    @Override public TableCell<Friend, Boolean> call(TableColumn<Friend, Boolean> soCalledFriendBooleanTableColumn) {
      return new TableCell<Friend, Boolean>() {
        @Override public void updateItem(final Boolean item, final boolean empty) {
          super.updateItem(item, empty);

          // clear any custom styles
          this.getStyleClass().remove("willPayCell");
          this.getStyleClass().remove("wontPayCell");
          this.getTableRow().getStyleClass().remove("willPayRow");
          this.getTableRow().getStyleClass().remove("wontPayRow");

          // update the item and set a custom style if necessary
          if (item != null) {
            setText(item.toString());
            this.getStyleClass().add(item ? "willPayCell" : "wontPayCell");
            this.getTableRow().getStyleClass().add(item ? "willPayRow" : "wontPayRow");
          }
        }
      };
    }
  });
  column.setPrefWidth(prefWidth);
} 
```

**有关的**

StackOverflow 问题[JavaFX 中有 2 种颜色的背景？](https://stackoverflow.com/questions/16200901/background-with-2-colors-in-javafx), 提供了类似的解决方案。该问题的答案中的讨论提供了有关 JavaFX 中表格行突出显示的警告和微妙之处的更多信息（基本上，很难获得伪类样式 - 焦点环、选定条、悬停反馈等 - 正确使用自定义行样式）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T07:22:44.710

您必须将删除线设置为 .text 类：;-)

```
.itemCancelado {
    -fx-text-fill: red;
}
.itemCancelado .text {
    -fx-strikethrough: true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-30T13:20:11.877

***如何更新所有列？*** 如果您希望删除整行，即一行中的所有单元格，则每个其他 CellValueFactory 都应该进行该条件检查：

```
 ...
    if (indice < getTableView().getItems().size())
        bean = getTableView().getItems().get(indice);
    if (bean != null && bean.isCancelado())
        getStyleClass().add("itemCancelado");
    ... 
```

或者您可以将回调实现为[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)，并具有以下内容：

```
public class CellDecorator implements Callback<TableColumn, TableCell> {
    private Callback<TableColumn, TableCell> decorated;

    public CellDecorator(Callback<TableColumn, TableCell> toDecorate) {
      this.decorated = toDecorate;
    }

    // Override this to do your thing.
    public abstract void doStyle(TableCell tableCell);

    @Override
    public void style(TableCell tableCell) {
        // Let the decorated styler do its thing.
        decorated.style(tableCell);

        // Now we do our thing.
        doStyle(cell);
    }
}

public class ItemCanceladoCellFactory extends CellDecorator {
    public ItemCanceladoCellFactory(Callback<TableColumn, TableCell> toDecorate) {
      super(toDecorate);
    }

    @Override
    public void doStyle(TableCell tableCell) {
        ...
        if (bean != null && bean.isCancelado())
            getStyleClass().add("itemCancelado");
    }
}

...
colunaCodigo.setCellValueFactory(new ItemCanceladoCellFactory(new MultiPropertyValueFactory<ItemBean, String>("produto.id")));
colunaDescricao.setCellValueFactory(new ItemCanceladoCellFactory(new MultiPropertyValueFactory<ItemBean, String>("produto.descricao")));
colunaDescricao.setCellFactory(new ItemCanceladoCellFactory(new ItemCanceladoCellFactory()));
.... 
```

这样您就不必重复“取消”的样式代码，并且可以将其应用于整行。请**注意**，这不是 JavaFX 就绪的代码，这是一个普遍的想法。

# android - Android 计费 - 如果不是来自按钮单击，我如何调用 onUpgradeAppButtonClicked() 方法？

> ID：16153843
> 
> 赞同：0
> 
> 时间：2013-04-22T18:11:42.097
> 
> 标签：android, android-billing

我正在为应用创建订阅购买。我最初有这样的事情：

```
 // CREATE THE SUBSCRIBE BUTTON
    Button subscribe = (Button)findViewById(R.id.subscribe);
    subscribe.setOnClickListener(new Button.OnClickListener() 
    {  
      public void onClick(View v) 
      {             
          onUpgradeAppButtonClicked ( );
      }
    });                   

public void onUpgradeAppButtonClicked( ) 
{
    Log.d(TAG, "Buy button clicked; launching purchase flow for upgrade.");
    setWaitScreen(true);
    mHelper.launchPurchaseFlow(this, SKU_SUBSCRIPTION, RC_REQUEST, mPurchaseFinishedListener);
} 
```

但后来我读到 IABHelper 需要异步设置。从按钮单击调用此方法可能不正确。

但是，如果不是通过单击按钮，它怎么可能被调用呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:21:12.440

我想这意味着它需要一些时间，所以你应该异步运行它，这样它就不会冻结你的 UI。因此，请确保您会通过单击按钮而不是直接调用它。相反，在你的`onUpgradeAppButtonClicked()`方法中，做一些`mHelper.launchPurchaseFlow()...`异步运行的事情，比如使用一个`AsyncTask`或一个单独的`Thread`等等。

著名的[无痛穿线文章](http://android-developers.blogspot.co.at/2009/05/painless-threading.html)一如既往地非常方便。

# java - 使用嵌入式 Jetty 进行身份验证

> ID：16153848
> 
> 赞同：3
> 
> 时间：2013-04-22T18:12:03.930
> 
> 标签：java, spring, spring-mvc, spring-security, embedded-jetty

我正在尝试使用嵌入 Jetty 将摘要身份验证添加到通过 HTTP 提供的 API。我没有 web.xml，这不是 webapp。该应用程序通过从我的文件“spring-config.xml”创建一个 ClassPathXmlApplicationContext 对象来启动。在“spring-config.xml”中，我为服务等定义了许多 bean，还定义了一个用于启动 Jetty 服务器的 bean。

Jetty 服务器配置了一个 DispatcherServlet（实际上是一个 DispatcherServletWrapper 类，它实现了 ApplicationContextAware 并将 ClassPathXmlApplicationContext 对象设置为它创建的 GenericWebApplicationContext 的父级，这样它就可以访问我的 spring-config.xml 文件中定义的 bean）。

这一切都有效，它失败的地方是尝试添加身份验证。我添加了所有用于设置摘要身份验证的 spring-security 配置，但我不知道如何让 Jetty 了解过滤器链。

我的 spring-config.xml 的相关部分如下所示：

```
<bean id="restApiController" class="com.company.project.api.controllers.RESTfulController">
    <property name="broker" ref="broker"/>
</bean>

<mvc:annotation-driven/>

<!--++++++++++++++++++++++
     JETTY BEANS
+++++++++++++++++++++++-->

<security:authentication-manager alias="authenticationManager">
<security:authentication-provider>
    <security:user-service id="userService">
        <security:user name="apiUser" password="apiPassword" authorities="ROLE_USER"/>
    </security:user-service>
</security:authentication-provider>
</security:authentication-manager>

<bean id="digestEntryPoint" class="org.springframework.security.web.authentication.www.DigestAuthenticationEntryPoint">
<property name="realmName" value="Digest Auth Realm"/>
<property name="key" value="acegi"/>
</bean>

<bean id="digestFilter" class="org.springframework.security.web.authentication.www.DigestAuthenticationFilter">
<property name="userDetailsService" ref="userService"/>
<property name="authenticationEntryPoint" ref="digestEntryPoint"/>
</bean>

<security:http create-session="stateless" use-expressions="true" entry-point-ref="digestEntryPoint">
<security:intercept-url pattern="/**" access="ROLE_USER"/>
<security:custom-filter ref="digestFilter" position="FIRST"/>
</security:http>

<bean id="JettyServer" class="org.eclipse.jetty.server.Server" init-method="start" destroy-method="stop">

<constructor-arg>
        <bean id="threadPool" class="org.eclipse.jetty.util.thread.QueuedThreadPool">
            <property name="minThreads" value="2"/>
            <property name="maxThreads" value="10"/>
        </bean>
</constructor-arg>

<property name="connectors">
    <list>
        <bean id="Connector" class="org.eclipse.jetty.server.ServerConnector">
            <constructor-arg ref="JettyServer"/>
            <property name="port" value="8090"/>
        </bean>
    </list>
</property>

<property name="handler">
    <bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerCollection">
        <property name="handlers">
            <list>
                <bean id="servletContextHandler" class="org.eclipse.jetty.servlet.ServletContextHandler">
                    <property name="contextPath" value="/"/>
                    <property name="servletHandler">
                        <bean class="org.eclipse.jetty.servlet.ServletHandler">
                            <property name="filters">
                                <list>
                                    <bean class="org.eclipse.jetty.servlet.FilterHolder">
                                        <property name="name" value="springSecurityFilterChain"/>
                                        <property name="filter">
                                            <bean class="org.springframework.web.filter.DelegatingFilterProxy"/>
                                        </property>
                                        <!--<property name="filter" ref="digestFilter"/>-->
                                    </bean>
                                </list>
                            </property>
                            <property name="filterMappings">
                                <list>
                                    <bean class="org.eclipse.jetty.servlet.FilterMapping">
                                        <property name="filterName" value="springSecurityFilterChain"/>
                                        <property name="pathSpec"><value>/*</value></property>
                                    </bean>
                                </list>
                            </property>
                            <property name="servlets">
                                <list>
                                    <bean class="org.eclipse.jetty.servlet.ServletHolder">
                                        <property name="name" value="DefaultServlet"/>
                                        <property name="servlet">
                                            <!--<bean class="org.springframework.web.servlet.DispatcherServlet"/>-->
                                            <bean class="com.impulse.sessiontracker.api.DispatcherServletWrapper"/>
                                        </property>
                                        <!--
                                        <property name="initParameters">
                                            <map>
                                                <entry key="contextConfigLocation" value="classpath:./spring-security.xml" />
                                            </map>
                                        </property>
                                        -->
                                    </bean>
                                </list>
                            </property>
                            <property name="servletMappings">
                                <list>
                                    <bean class="org.eclipse.jetty.servlet.ServletMapping">
                                        <property name="pathSpecs">
                                            <list><value>/</value></list>
                                        </property>
                                        <property name="servletName" value="DefaultServlet"/>
                                    </bean>
                                </list>
                            </property>
                        </bean>
                    </property>
                </bean>
                <bean class="org.eclipse.jetty.server.handler.RequestLogHandler">
                    <property name="requestLog">
                        <bean class="org.eclipse.jetty.server.NCSARequestLog">
                            <constructor-arg value="/opt/impulse/logs/jetty-yyyy_mm_dd.log"/>
                            <property name="extended" value="false" />
                        </bean>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
</property>

</bean> 
```

我试过直接在码头的过滤器列表中引用 DigestAuthenticationFilter ，这似乎不会导致任何事情发生。我已经尝试过上面显示的方法，我尝试引用 DelegatingFilterProxy，这会导致“ServletContext 不能为空”异常。根据我读过的一些 spring-docs 和其他问题，尝试并将其命名为“springSecurityFilterChain”是完整的猜测。

谁能告诉我如何获取 Jetty 使用的这些身份验证配置？我想做的事情有意义吗？

作为参考，我的 DispatcherServletWrapper 如下所示：

```
public class DispatcherServletWrapper extends DispatcherServlet implements ApplicationContextAware {

    private static final long serialVersionUID = -2281511575328213502L;
    private ApplicationContext appContext;

    @Override
    public void setApplicationContext(ApplicationContext arg0)
            throws BeansException {
        this.appContext = arg0; 
    }

    protected WebApplicationContext createWebApplicationContext(WebApplicationContext arg0) {
        GenericWebApplicationContext wac = new GenericWebApplicationContext();
        wac.setParent(appContext);
        wac.refresh();

        return wac;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-02T20:59:01.027

我已经成功配置了没有 web.xml 的嵌入式 Jetty + spring-security

您可以以编程方式添加 DelegatingFilterProxy 并将其传递给*目标 bean 名称*“springSecurityFilterChain”

```
//Spring Security servlet
final FilterHolder springSecurityFilterChain = new FilterHolder(
    new DelegatingFilterProxy("springSecurityFilterChain"));

jettyServletContext.addFilterWithMapping(springSecurityFilterChain, "/*",
                              EnumSet.of(DispatcherType.REQUEST)); 
```

我也尝试使用 DigestAuthenticationFilter，但没有奏效。

希望这可以帮到你。

# wpf - WPF在UI中绘制图像的快速方法

> ID：16153852
> 
> 赞同：3
> 
> 时间：2013-04-22T18:12:23.290
> 
> 标签：wpf, image

我有一个项目需要执行快速图像渲染。

目前，我使用禁用拉伸的图像控制。更新由计时器通过设置 Source 属性进行。

```
WriteableBitmap frame = Player.Get().GetFrame();
if (frame != null)
     image.Source = frame; 
```

这部分成为性能瓶颈。更清楚 image.Source = frame 是一个瓶颈。

我查看了 MediaElement，但它不适用。

有什么方法可以更快地执行它吗？

也许像 GDI BitBlt 或类似的一些方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:15:36.377

您不会从 WPF 中获得太多性能。即使是 MediaElement 也无法正确处理高清视频，没有闪烁和滞后。

使用 WindowsFormsHost 标记在您的 WPF 应用程序中托管一个 WinForms 元素，如果您想使用 GDI，则在那里执行 blitting。尽管 GDI 主要是基于软件的，但您可能需要查看 DirectX 或 GDI+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:34:53.583

如果您真的需要性能，最好的选择可能是为 bitblt 编写一个小型包装器。

也许这两篇文章对你有帮助：

[BitBlt 点网样式](http://www.codeproject.com/Articles/5736/Copying-graphics-with-BitBlt-NET-Style)

[使用 BitBlt 复制和粘贴图形](http://www.codeproject.com/Articles/6710/Using-BitBlt-to-Copy-and-Paste-Graphics)

# f# - 如何在 f# 中读取 gzip 文件？

> ID：16153853
> 
> 赞同：4
> 
> 时间：2013-04-22T18:12:28.187
> 
> 标签：f#, gzip

我有一个标准的 gzip 文件，我想将它读入 F# 中的序列。我在 Expert F# 3.0 中找到了如何读取常规文件的示例，并在 MSDN 文档中找到了[.NET GZipStream 类](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream%28v=vs.100%29.aspx)的参考，但我是 F#/.NET 的新手，不知道如何将两者结合起来获得期望的结果。

具体来说，如何修改下面的代码以读取 gzip 压缩文件，例如 test.txt.gz？

```
let linesOfFile =
    seq {use reader = new StreamReader(File.OpenRead("test.txt"))
         while not reader.EndOfStream do
             yield reader.ReadLine()} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T22:12:51.030

（发表评论作为答案）

`GZipStream`继承`Stream`，所以只需将你的底层流与它一起传递给它的构造函数`CompressionMode`：

```
new StreamReader(
  GZipStream(
    File.OpenRead("test.txt"), 
    CompressionMode.Decompress)) 
```

# model - 如何使用 z3 为文字分配新值

> ID：16153855
> 
> 赞同：1
> 
> 时间：2013-04-22T18:12:30.653
> 
> 标签：model, z3

有一组 4 个公式，这些`x - y < 2` `x - y > 2`x > 3 `y < 4`。当第一个公式被擦除时，`x=4 y=-1`可以找到 的模型。如何使用 z3(api) 在第一个公式中将 x 和 y 替换为 4 和 -1？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:30:17.803

您可以使用`Z3_substitute`API。这是一个使用 Z3 Python 的示例。我使用 Python 是因为它更方便，[我们可以使用rise4fun 在线测试它](http://rise4fun.com/Z3Py/WcLb)。我们可以使用 Z3 C/C++、.Net 或 Java API 编写相同的示例。

```
x, y = Ints('x y')

s = Solver()
s.add(x - y > 2, x > 3, y < 4)
print s.check()
m = s.model()
print m
# We can retrieve the value assigned to x by using m[x].
# The api has a function called substitute that replaces (and simplifies)
# an expression using a substitution.
# The substitution is a sequence of pairs of the form (f, t).
#  That is, Z3 will replace f with the term t.

F1 = x - y < 2

# Let us use substitute to replace x with 10
print substitute(F1, (x, IntVal(10)))

# Now, let us replace x and y with values assigned by the model m.
print substitute(F1, (x, m[x]), (y, m[y])) 
```

# facebook - 如果已安装，则用于启动应用程序的 HTML 链接，如果未安装，则转到网站

> ID：16153863
> 
> 赞同：5
> 
> 时间：2013-04-22T18:13:09.450
> 
> 标签：facebook, jquery-mobile, web, mobile-application

我有一个使用 jQuery Mobile 编写的移动网站，并且有社交图标。我想要的是，如果用户只有在手机上安装了 Facebook 应用程序时，用户才单击 Facebook 图标打开 facebook 应用程序。如果用户在手机上没有该应用程序，我需要将其转至 Facebook 的移动网站。

我正在使用此链接打开应用程序：

```
<a href="fb://profile/212971392077465" class="facebook">My Fanpage</a> 
```

这可行，但如果用户没有安装这些应用程序，我现在需要代码帮助才能打开移动网站。

理想情况下，同样的技术应该适用于 Twitter（我用来`twitter://status?id=12345`访问应用程序）。

# google-app-engine - 应用引擎连接安卓教程 - localhost:8888/index 未显示注册设备

> ID：16153870
> 
> 赞同：0
> 
> 时间：2013-04-22T18:13:51.957
> 
> 标签：google-app-engine, google-cloud-messaging

我在 app engine connected android app 上做了谷歌教程。当我注册模拟器设备时，应用程序引擎和 android 应用程序都运行良好。我看到屏幕说注册成功，我可以在 localhost:8888/admin/_ah 页面上查看注册的设备。但是，当我打开 localhost:8888/index 文件以发送消息时，页面显示“正在搜索设备”而不是列出已注册的设备。你们有没有遇到过类似的问题？任何帮助将不胜感激..Thx ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:16:59.197

我遇到了同样的问题。这是我在尝试解决问题之前所理解的。- 转到你的项目-AppEngine-->war-->index.html

当您转到 localhost:8888 时会加载此 html 文件。现在查看这个 html 文件的代码。这里调用的 JavaScript 方法很少。注意两种方法

```
 // This method loads the deviceinfoendpoint and messageEndpoint libraries
 function loadGapi() {
 gapi.client.load('deviceinfoendpoint', 'v1', function() {
   updateRegisteredDeviceTable();
 });

 gapi.client.load('messageEndpoint', 'v1', function() {});
 } 
```

和

```
function generateRegDeviceTable(deviceInfoItems) 
```

这两种方法可以从数据存储中获取已注册的设备并显示在 html 页面上。您可以使用此 html 文件来调试原因。就我而言，原因是后端库未注册。当我创建自己的实体并使用它们显示在 index.html 中时，它可以正常工作。当您安装 GPE 并启用后端引擎时，GCMEndpoint 库是默认的。因此，只需重做该过程并手动注册库，您的错误就会消失。

# .htaccess - url rewrite 无法在我的 wamp 上运行，请帮助我

> ID：16153871
> 
> 赞同：0
> 
> 时间：2013-04-22T18:14:00.210
> 
> 标签：.htaccess, url-rewriting, rewrite

我的本地主机链接`/work_Seo/blog-single.php?pid=6`

我想把它改成`/work_Seo/blog/pid/6`

我的.htaccess：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^work_Seo/blog/([0-9]+)/?$ /work_Seo/blog-single.php?pid=$1 [NC,L] 
```

所有 htaccess 配置已完成，但仍无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:31:11.867

首先，您必须确保所有链接看起来像`/work_Seo/blog/pid/6`. **你必须生成你的链接看起来那样**，你使用的规则不会神奇地改变你内容中的链接。其次，您说您希望您的链接看起来像`/work_Seo/blog/pid/6`，但您的规则与`pid`. 更改您的链接，使它们在 URL 中没有*pid ，或者将其添加到规则的模式中：*

```
RewriteRule ^work_Seo/blog/pid/([0-9]+)/?$ /work_Seo/blog-single.php?pid=$1 [NC,L] 
```

# jquery - 自定义永久链接结构扰乱了我的 jQuery/AJAX 函数

> ID：16153872
> 
> 赞同：1
> 
> 时间：2013-04-22T18:14:14.763
> 
> 标签：jquery, ajax, wordpress, custom-post-type, permalinks

我正在使用[自定义帖子类型永久链接](http://wordpress.org/extend/plugins/custom-post-type-permalinks/)插件为我的永久链接设置自定义结构，仅使用 Wordpress 管理区域中的设置/常规。

我使用的自定义永久链接结构是：

```
/%postname%/%product_category%/ 
```

此外，我的`single-CPT.php`页面下还有一个触发一些 jquery/ajax 操作的选择标签。当我删除自定义永久链接结构时，它会自动激活默认的永久链接结构，一切都像一个魅力。但是在激活上述结构后，应该显示由 jquery/ajax 返回的结果的 DIV 以一种奇怪的方式嵌入了整个页面。

我的jQuery代码是：

```
$('select.select').change(function(e) {

    e.preventDefault(); 
    var value = $('select.select option:selected').val(); 

    create_ayat_selectCPT(value); // AJAX function

}) 
```

非常感谢您的帮助，我正在挖掘 2 天以找到解决方案。

**请注意**，我在我的网站中使用自定义帖子类型。

**编辑：** 考虑到 Damon 的回答，永久链接结构会影响 jquery/ajax 函数的行为。事实上，如果我更改为`/%product_category%/%postname%/`，则执行 Ajax 调用但没有成功。

**结果：**我实际上有显示错误消息的警报。

函数 jquery/ajax 函数是：

```
function create_ayat_selectCPT(str) 
{

            $.ajax({
                    type: "GET",
                    url: "wp-admin/admin-ajax.php",
                    dataType: 'html',
                    data: ({ action: 'createAyatSelectCPT', id: str}),
                    success: function(data){

                    $('#second-select').html(data);

                    },
                    error: function(data)  
                    {  
                    alert("Your browser broke create ayat  cpt select!");
                    return false;
                    }  

                }); //ajax

    return false;
} 
```

在functions.php下：

```
function createAyatSelectCPT() {

$ca=$_GET['id']; 

?>
<form method="post" action="">  

            <select class="select2" id="selectid"> 

                            <?php

                            $my_query = new WP_Query();

                            $args = array(
                                    'post_type' => 'product',
                                    'tax_query' => array(
                                        array(
                                            'taxonomy' => 'product_category',
                                            'terms' => array($ca) 
                                        )
                                    )
                                );

                            $my_query->query($args);

                            if ($my_query->have_posts()) : while ($my_query->have_posts()) : $my_query->the_post(); 

                               ?>
                                        <option value="<?php the_ID();?>"><?php the_title(); ?></option>
                                <?php

                            endwhile;
                            endif;

            wp_reset_query();
            die();  
?>

</select>
</form>

<?php
}

add_action('wp_ajax_createAyatSelectCPT', 'createAyatSelectCPT');
add_action('wp_ajax_nopriv_createAyatSelectCPT', 'createAyatSelectCPT'); 
```

要修改的相关 HTML 标记为：

```
<div id="second-select">...</div> 
```

**编辑 2 安装 Firebug 后：**

404 未找到文件：[http ://localehost.com/enc/products/stuff/stuff/wp-admin/admin-ajax.php?action=createAyatSelectCPT&id=132](http://localehost.com/enc/products/stuff/stuff/wp-admin/admin-ajax.php?action=createAyatSelectCPT&id=132)

然后，问题来自位置`admin-ajax.php`。此文件在此位置不存在。所以新的永久链接结构要求我在我的 jquery 脚本文件中修改 admin-ajax.php 的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:29:18.703

你怎么知道是什么函数弄乱了 div？

您的 jquery/ajax 代码是否更改了 div 等？如果有，能否提供相应的代码片段给我们？

此外，当您使用“/%postname%/%product_category%/”自定义永久链接或任何其他自定义永久链接时，是否会发生这种情况。

尝试使用 Firebug 插件，并为我们提供更多信息，以便我们可以快速有效地帮助您解决此问题。屏幕截图也会有所帮助。

下载 Firebug： http: [//getfirebug.com/](http://getfirebug.com/)

# qt - 如何防止 QtWebkit 加载图像？

> ID：16153881
> 
> 赞同：1
> 
> 时间：2013-04-22T18:14:50.973
> 
> 标签：qt, webkit, pyqt, qtwebkit

我不需要加载页面中的图像`QWebView`。举个简单的例子，我该怎么做？：

```
import sys
from PyQt4 import QtCore, QtGui, QtWebKit

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    w = QtWebKit.QWebView()
    url = QtCore.QUrl("http://www.google.com")
    w.load(url)
    w.show() 
```

我只发现[了这个](https://stackoverflow.com/questions/12524580/disable-automatic-image-loading-in-webview)。但是 QtWebkit 似乎不是这样工作的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:14:50.973

好的，我找到了[`QWebSettings::AutoLoadImages`](http://qt-project.org/doc/qt-4.8/qwebsettings.html)。

所以，基本上：

```
# before loading the url:
st=w.settings()
st.setAttribute(st.AutoLoadImages,False) 
```

会成功的。

# c# - 使用单一方法来异步 Web 服务响应是否存在任何潜在问题？

> ID：16153883
> 
> 赞同：1
> 
> 时间：2013-04-22T18:14:51.510
> 
> 标签：c#, wcf, silverlight

我有一个 Silverlight 客户端应用程序，它与 WCF Web 服务进行各种通信。这些 Web 服务的所有返回都继承自基本 ResponseObject。我有几种方法来处理异步调用，每个方法调用一个，并添加了适当的处理程序。我现在在想，仅仅为所有响应使用一个方法，然后有一个 switch 语句来相应地转换我的响应对象不是更容易吗？我通常没有处理退货的大方法，只有填充组合框等。

这样做有什么不好的原因吗？我发送了如此多的小数据请求，有时似乎我花了一半的时间编写这些响应方法，即使这样做很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:28:31.450

你能写一个 T4 模板来为你生成这些方法吗？您可以阅读 Web 服务的 WSDL 以查看需要生成哪些方法。

# jquery - 动态添加 DOM 元素的处理函数

> ID：16153885
> 
> 赞同：0
> 
> 时间：2013-04-22T18:15:00.913
> 
> 标签：jquery

每当在 DOM 中的任何位置添加具有某个类的项目时，我都想处理某些初始化步骤。这包括将一些样式属性应用到其父级（这就是我不能使用 CSS 的原因），以及绑定到 click 事件。

以下代码在元素为静态时有效（之后已在页面上`document.ready`）：

```
$(function(){
  //... global initialization code
  $('.myclass').each(function(){
    var parent = $(this).parent();
    parent.css({cursor:'pointer'}); //apply CSS style to the parent
    parent.click(function(event){
      //... event handler
    });        
  });    
}); 
```

是否可以将其转换为处理动态添加的元素以及如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:21:48.957

没有跨浏览器的“添加”或“创建”事件，您必须找到另一种方法来完成它。

在样式表中进行 CSS 更改：

```
.myClass {
    cursor: pointer;
} 
```

然后对 click 事件使用事件委托：

```
$(document).on("click",".myClass",function(){
    var parent = $(this).parent();
    parent.doSomething();
}); 
```

另一种选择（如评论中指出的）是在添加元素后触发自定义事件。

```
$(document).on("added", ".myClass", function(){
    var parent = $(this).parent();
    parent.doSomething();
});
//... later on in your code ...
$('<div class="myClass"></div>').appendTo("#someotherel").trigger("added"); 
```

这与简单地执行此操作基本相同，这就是我在评论中提到的：

```
var parent = $("#someotherel");
parent.append('<div class="myClass"></div>').css("cursor","pointer").click(... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:17:31.633

用于`.on()`动态添加的元素 -

```
$(document).on('click','.myclass',function(event){
   //... event handler
}); 
```

# design-patterns - 如果我有 n 个要处理的条件，推荐的设计/模式

> ID：16153889
> 
> 赞同：1
> 
> 时间：2013-04-22T18:15:06.557
> 
> 标签：design-patterns, ooad

我有一些条件，例如-

```
List globalList = new ArrayList();
if(X.isExists)
  globalList(new XBasedClass());
if(Y.isExists && Z.isExists)
  globalList(new ZYBasedClass());
else if(Y.isExists || Z.isExists)
  globalList(new CommonBasedClass());
if(N.isExists)
.... 
```

首先我想到了使用**State Pattern**，但我意识到对于每个条件我都需要声明类，并且我想限制类的数量。

其次，我想到了使用**装饰器模式**，但再次需要进行上述条件检查，如果需要，那么上述循环是否会产生任何问题。

我的条件只需要在 List 中添加新类，没有别的，即使将来条件数量增加，即使工作将保持不变，即更新 List。

所以我用一个静态方法创建了一个私有类，它只是验证条件并相应地更新列表。

有没有更好的推荐设计来实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:29:12.127

可以将创建委托给工厂类。如果您有不同的实现类型集，那么就是抽象工厂。于是就有了模式。

我不确定这些 if 块是否只是一个示例，但它们可以被优化，例如将 if(Y.isExists) 移动到上块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:51:00.423

我写这篇文章是为了回答一些评论。

1.  我对@Tech-user 的回答投了赞成票，因为在您的情况下，工厂模式是正确的做法。
2.  实施工厂概念有不同程度的复杂性。“抽象工厂”超出了我的预期。
3.  [详细了解不同类别的模式](http://www.oodesign.com/)。这将帮助您将适当的归零。工厂是一种*创造*模式。您正在创建新对象。State 和 Decorator 本质上不是创造的。
4.  其他人主张不要使用模式的评论，因为它会使事情复杂化，这忽略了使用模式的意义。模式让代码变得更好，用面向对象的优点构建你的代码。然而，强制你的代码进入一个不合适的模式肯定会使事情复杂化。
5.  因为“它们增加了复杂性”而放弃模式是非常非常错误的。

# php - 如何找出包含或直接访问的php文件？

> ID：16153895
> 
> 赞同：11
> 
> 时间：2013-04-22T18:15:15.967
> 
> 标签：php

有什么方法可以查明一个 php 脚本是直接访问还是包含在内。

1.  假设我们不包含它，那么设置会话变量不会解决问题。我无法检查它包含在哪里。可能有20多个地方！
2.  它应该在 php 脚本中检测到。（通过 php 函数和变量）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T18:17:40.500

```
if(__FILE__ != $_SERVER['SCRIPT_FILENAME']) {
  // we're in an include
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-27T02:07:53.623

使用了 ceejayoz 的答案，但由于`__FILE__`自动解析为真实路径，我在使用符号链接文件和路径时遇到了麻烦。所以我改用`realpath()`函数`$_SERVER['SCRIPT_FILENAME']`来解决两个路径到真正的路径来解决问题。

```
if(__FILE__ != realpath($_SERVER['SCRIPT_FILENAME'])) {
    // we're in an include
} 
```

# asp.net-mvc-4 - 有没有办法为控制器内的每个操作方法指定要在 mvc4 route.config 中使用的视图

> ID：16153903
> 
> 赞同：0
> 
> 时间：2013-04-22T18:15:41.193
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我有一个视图（Layout.cshtml），其中显示三个下拉列表和一个表格，我在 Homecontroller 的 Index() 方法中执行所有操作。我想在 Homecontroller 的另一个方法中对数据进行一些处理并显示结果在同一个视图（Layout.cshtml）中，我尝试在第二种方法中返回 View（mydata），但无法显示相同的页面，我能够做到这一点的唯一方法是存储在 tempdata 中并执行 RedirectToAction（“Index”）和从其中的 tempdata 中获取值。

route.config 中是否有办法映射到第二种方法的相同视图。我的 route.config 看起来像这样

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

我是 MVC 新手，不知道如何使用 route.config 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:58:29.170

您无需更改路由。layout.cshtml 的典型外观是带有一些 html 标签和 @RenderBody 的页面。但您也可以在布局中添加一些 @Html.Action() 以满足您的需求。例如将 @Html.Action("DoMore" , "Home" , new {area=""}) 添加到布局中，它将在布局的每个渲染上执行 Home 控制器的 DoMore 操作。

```
<html>
  <body>
    <div>
      @Html.Action("DoMore" , "Home" , new {area=""})
    </div>
    <div>
       @RenderBody()
    </div>
  </body>
</html> 
```

# java - 谷歌地图扩展

> ID：16153915
> 
> 赞同：0
> 
> 时间：2013-04-22T18:16:26.437
> 
> 标签：java, android, google-maps, android-maps-v2, android-maps-extensions

我想使用这个谷歌地图扩展：

[https://code.google.com/p/android-maps-extensions/](https://code.google.com/p/android-maps-extensions/)

但是我不明白如何将它结合到我的项目中？

我在这个网站上下载了 zip 并阅读了网站上的解释，但是我仍然不明白如何将它结合到我的项目中？

（我已经在我的eclipse中安装了google_play_services，我需要删除它吗？）

拜托，我想第一次学习，然后我会自己实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T09:21:57.710

是的。您必须从 Eclipse 中删除 google-play-services_lib 并改为导入 android-maps-extensions。Android 地图扩展包含来自 Google Play 服务的所有内容，并且只添加了一些代码。

之后，您必须按照网站上的说明进行一些更改：

1.  几个导入语句，
2.  SupportMapFragment（或 MapView）xml 中的完整类名和
3.  在 SupportMapFragment（或 MapView）上调用 getExtendedMap 而不是 getMap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T09:09:11.680

您可以从[这里](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)找到示例。

按照这个[步骤](https://developers.google.com/maps/documentation/android/)。

# objective-c - 如何使 NSView 透明，但保留属于它的对象？

> ID：16153917
> 
> 赞同：0
> 
> 时间：2013-04-22T18:16:31.663
> 
> 标签：objective-c, macos, cocoa, nsview

在我的应用程序中，我有一个 NSView，我将其用作绘图画布，使用 NSBezierPath 绘制一些原始形状，如矩形和椭圆。现在我需要使我的画布透明，但我希望我绘制的形状具有与以前相同的不透明度。我很好奇是否有可能做到这一点，如果可以，怎么做？！

编辑：

抱歉之前的描述不好！

我的最终目标是能够在透明画布上绘制正常的饱和颜色形状。如果可能的话，我所说的透明是指完全清楚。当我绘制形状时，我的视图一直在重绘自己，所以即使在这些情况下，我也希望一切都像上面描述的那样。

任何形式的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:31:26.710

要使窗口透明以使其后面的任何内容都能显示出来，请将窗口设置为`backgroundColor`，`[NSColor clearColor]`将*窗口* `opaque`设置为`NO`。

设置视图`opaque`是不必要的，因为它已经`NO`默认设置，并且因为这并不能满足您的需求。视图的属性意味着与窗口的属性`opaque`不同的东西。`opaque`

填充`clearColor`是不必要的，因为所做的只是擦除您之前绘制的内容。如果你之前没有画过任何东西，那么你正在擦除一块干净的板子。

*您*的视图绘制的任何东西（不是`clearColor`）仍然可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:28:16.977

设置`backgroundColor`为`NSView`透明的，例如：

你可以使用这个方法

```
- (void)drawRect:(NSRect)dirtyRect {
    // set any NSColor for filling, say white:
    [[NSColor clearColor] setFill];
    NSRectFill(dirtyRect);
} 
```

参考：[更改 NSView 的背景颜色的最佳方法](https://stackoverflow.com/questions/2962790/best-way-to-change-the-background-color-for-an-nsview)

# html - 列表项未正确垂直对齐

> ID：16153919
> 
> 赞同：1
> 
> 时间：2013-04-22T18:16:33.207
> 
> 标签：html, css

我正在尝试列出具有可变高度的项目。当我尝试用水平行对齐的项目制作一个整洁的列表时，当列表项目都具有相同的高度时，一切都会很好。当 1 个或多个项目的高度更大时，它会出错。我创建了一个 JSFiddle 来非常清楚地显示问题。谁能帮我吗？

[http://jsfiddle.net/NNLDn/](http://jsfiddle.net/NNLDn/)

我的html：

```
<div>
    <ol>
        <li></li>
        <li></li>
        <li style="height: 140px;"></li>
        <li></li>
        <li></li>
        <li></li>
    </ol>
</div> 
```

我的CSS：

```
div {
    width: 730px;
}

ol {
    width 730px;
    margin-left: -40px;
}

ol li {
    display: block;
    width: 167px;
    height: 120px;
    margin: 0 0 15px 15px;

    background:red;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:24:59.813

您应该考虑使用`display:inline-block`而不是`float:left`，然后您也可以使用 来调整元素的垂直对齐方式`vertical-align`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:24:00.670

我知道的唯一 css 解决方案，如果你知道`li`每行的项目数，就是将每一行包含在一个 div 中，然后浮动这些 div。这样每个 div 都会自动调整到最高 li 的高度，并且没有一个浮动`li`s 会“挂起”

`div div { float: left; clear: both; }`

[http://jsfiddle.net/NNLDn/1/](http://jsfiddle.net/NNLDn/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:25:24.393

我现在不能很容易地仔细检查，因为我在我的手机里，但我认为你需要使用`display:inline-block`而不是使用`float`

# r - 将 min() 和 max() 值转换为一系列值

> ID：16153920
> 
> 赞同：0
> 
> 时间：2013-04-22T18:16:46.640
> 
> 标签：r, dataframe, reshape2

我想拉伸一些被压扁的记录

我有一张这样的桌子

```
Store     Min(Date)     Max (Date)     Status 
```

* * *

```
NYC1       1/1/2013      2/1/2013      Open
NYC1       2/2/2013      2/3/2013      Closed for Inspection
Boston1    1/1/2013      2/5/2013      Open 
```

我想把它拉伸成表格

```
Store       Date        Status 
```

* * *

```
 NYC1       1/1/2013     Open
 NYC1       1/2/2013     Open
 .....
 NYC1       2/2/2013     Closed for Inspection
 NYC1       2/3/2013     Closed for Inspection
 ....
 Boston1    1/1/2013     Open 
```

我知道我总是可以为此编写循环，但在尝试这样做之前，我想问一下是否有任何快速而肮脏的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:34:41.063

这是一种方法：

### 读入您的数据并将您的日期转换为实际的日期变量：

```
mydf <- read.table(header = TRUE, stringsAsFactors=FALSE, 
text = "Store     Min(Date)     Max(Date)     Status
NYC1       1/1/2013      2/1/2013      Open
NYC1       2/2/2013      2/3/2013      'Closed for Inspection'
Boston1    1/1/2013      2/5/2013      Open")

names(mydf) <- c("store", "min.date", "max.date", "status")
mydf$min.date <- as.Date(mydf$min.date, format = "%m/%d/%Y")
mydf$max.date <- as.Date(mydf$max.date, format = "%m/%d/%Y")
mydf
#     store   min.date   max.date                status
# 1    NYC1 2013-01-01 2013-02-01                  Open
# 2    NYC1 2013-02-02 2013-02-03 Closed for Inspection
# 3 Boston1 2013-01-01 2013-02-05                  Open 
```

### 计算“min.date”和“max.date”之间的天数差

使用该信息“扩展”您的`data.frame`并生成“min.date”和“max.date”之间的日期序列。此外，对 进行子集化`data.frame`以仅返回“store”、“date”（我们的新变量）和“status”变量。

```
SEQ <- mydf$max.date - mydf$min.date + 1
mydf2 <- mydf[rep(row.names(mydf), SEQ), ]
mydf2$date <- mydf2$min.date + sequence(SEQ)-1

mydf2 <- mydf2[c("store", "date", "status")] 
```

这是输出的示例。

```
head(mydf2)
#     store       date status
# 1    NYC1 2013-01-01   Open
# 1.1  NYC1 2013-01-02   Open
# 1.2  NYC1 2013-01-03   Open
# 1.3  NYC1 2013-01-04   Open
# 1.4  NYC1 2013-01-05   Open
# 1.5  NYC1 2013-01-06   Open
tail(mydf2)
#        store       date status
# 3.30 Boston1 2013-01-31   Open
# 3.31 Boston1 2013-02-01   Open
# 3.32 Boston1 2013-02-02   Open
# 3.33 Boston1 2013-02-03   Open
# 3.34 Boston1 2013-02-04   Open
# 3.35 Boston1 2013-02-05   Open 
```

* * *

您可以使用它`by`来验证我们所做的一切是否正确：

```
> with(mydf2, by(date, list(store, status), FUN = range))
: Boston1
: Closed for Inspection
NULL
----------------------------------------------------------------- 
: NYC1
: Closed for Inspection
[1] "2013-02-02" "2013-02-03"
----------------------------------------------------------------- 
: Boston1
: Open
[1] "2013-01-01" "2013-02-05"
----------------------------------------------------------------- 
: NYC1
: Open
[1] "2013-01-01" "2013-02-01" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:18:16.263

使用`data.table`语法优雅（并假设由@Ananda 进行预处理

```
mydf <- read.table(header = TRUE, stringsAsFactors=FALSE, 
text = "Store     Min(Date)     Max(Date)     Status
NYC1       1/1/2013      2/1/2013      Open
NYC1       2/2/2013      2/3/2013      'Closed for Inspection'
Boston1    1/1/2013      2/5/2013      Open")

names(mydf) <- c("store", "min.date", "max.date", "status")
mydf$min.date <- as.Date(mydf$min.date, format = "%m/%d/%Y")
mydf$max.date <- as.Date(mydf$max.date, format = "%m/%d/%Y")

library(data.table)
DT <- data.table(mydf)
DT[, list(dates = seq(min.date,max.date, by = 1)) , by = list(store,status)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:09:29.423

绿魔

鉴于您的问题有 reshape 包标签，我能想到的最简单的事情就是简单地使用 melt 功能。让我们称您的 data.frame 为“foo”。下面的代码应该给你你想要的。

```
library(reshape)
foo.melt<-melt(foo, id.vars=c('Store','Status')) 
```

请注意，这将创建一个带有 min.date 和 max.date 的附加列“变量”。

干杯，

丹尼

# xslt - 通过xslt中的子节点值创建父节点的副本

> ID：16153924
> 
> 赞同：1
> 
> 时间：2013-04-22T18:17:06.570
> 
> 标签：xslt

下面是我的 XML 的结构。

```
<Client>
  <Document>
    <service class="ABC">
      <author name="p"/>
      <title>t1</title>
      <Details>
        ...
      </Details>
    </service>
   </Document>
   <Document>
     <service class="XYZ">
       <author name="a"/>
       <title>t2</title>
       <Details>
         ...
       </Details>
     </service>
   </Document>
   <Document>
     <service class="PQR">
       <author name="x"/>
       <title>t3</title>
       <Details>
         ...
       </Details>
     </service>
   </Document>
</Client> 
```

我想创建标题为“t2”但无法找出解决方案的文档节点的副本。输出应该看起来像

```
<Client>
  <Document>
    <service class="ABC">
      <author name="p"/>
      <title>t1</title>
      <Details>
        ...
      </Details>
    </service>
   </Document>
   <Document>
     <service class="XYZ">
       <author name="a"/>
       <title>t2</title>
       <Details>
         ...
       </Details>
     </service>
   </Document>
   <Document>
     <service class="PQR">
       <author name="x"/>
       <title>t3</title>
       <Details>
         ...
       </Details>
     </service>
   </Document>
   <Document>
     <service class="XYZ">
       <author name="a"/>
       <title>t2</title>
       <Details>
         ...
       </Details>
     </service>
   </Document>
</Client> 
```

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:04:20.813

这个简单的样式表是这样做的一种方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>

  <!--
  Identity transform
  See http://en.wikipedia.org/wiki/Identity_transform#Using_XSLT
  -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Override identity transform to process <Client> element -->
  <xsl:template match="Client">
    <!-- Copy current element into output -->
    <xsl:copy>
      <!-- Apply attributes and child nodes -->
      <xsl:apply-templates select="@* | node()"/>
      <!-- Apply all <Document> elements with <title> whose value is "t2" -->
      <xsl:apply-templates select="Document[service/title = 't2']"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T15:28:34.503

先前的答案本来是正确的，但对于该行：

经验证的正确版本为：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>

<xsl:template match="@* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template>

<!-- Override identity transform to process <Client> element -->
<xsl:template match="Client">
    <!-- Copy current element into output -->
    <xsl:copy>
        <!-- Apply attributes and child nodes -->
        <!-- Apply all <Document> elements with <title> whose value is "t2" -->
        <xsl:apply-templates select="Document[service/title = 't2']"/>
    </xsl:copy>
</xsl:template> 
```

输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<Client>
   <Document>
        <service class="XYZ">
            <author name="a"/>
            <title>t2</title>
            <Details>
               ...
            </Details>
        </service>
    </Document>
</Client> 
```

# networking - 其他程序使用哪些端口？

> ID：16153926
> 
> 赞同：0
> 
> 时间：2013-04-22T18:17:09.553
> 
> 标签：networking, cmd, port

**我想知道我的计算机的哪些端口被其他应用程序使用...**

我怎么会知道这个？

像这样的东西：

```
Your port 80 is actually used by :

Server: Microsoft-HTTPAPI/2.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:19:17.250

试试这个命令：

```
netstat -b 
```

这将返回端口和使用它的程序。例如：

```
Aktive Verbindungen

  Proto  Lokale Adresse         Remoteadresse          Status
  TCP    192.168.x.y:2281       stackoverflow:http     HERGESTELLT
 [firefox.exe] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:26:54.057

尝试

NETSTAT -p tcp -ano

你也可以使用

NetConnectManager 工具用于监控 TCP/IP 以及 UDB 端口。

# java - 如何使此类线程安全？

> ID：16153936
> 
> 赞同：2
> 
> 时间：2013-04-22T18:17:58.540
> 
> 标签：java, thread-safety

`Vector`是线程安全的，但在这个实现中它似乎不起作用。使方法同步也无济于事，`java.util.ConcurrentModificationException`被抛出。

可以做些什么来解决这个实现呢？

我应该去`java.util.concurrent.CopyOnWriteArrayList`吗？

```
import java.util.Iterator;
import java.util.Vector;

public class VectorExample {

    private Vector<Object> v;

    public  VectorExample() {    
        v = new Vector<Object>();
    }

    public  void  addToVector(Object o) {
        v.add(o);
    }

    public Vector<Object> getV() {
        return v;
    }

    public static void main(String[] args) {    
        final VectorExample v = new VectorExample();
        v.addToVector("obj1");
        v.addToVector("obj2");
        v.addToVector("obj3");
        v.addToVector("obj4");
        v.addToVector("obj5");
        v.addToVector("obj6");    

        new Thread(new Runnable() {
            @Override
            public  void run() {
                Iterator<Object> it = v.getV().iterator();

                while(it.hasNext()) {
                    System.out.println(it.next().toString());
                }    
            }
        }).start();

        new Thread(new Runnable() {    
            @Override
            public  void run() {
                v.addToVector("Obj11");
                v.addToVector("Obj12");
                v.addToVector("Obj13");
                v.addToVector("Obj14");
                v.addToVector("Obj15");
                v.addToVector("Obj16");
            }    
        }).start();    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:23:48.107

看起来您遇到了异常，因为您同时迭代和修改集合。您可以尝试克隆集合并迭代克隆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:24:36.613

这个问题不能通过简单地向现有方法添加同步来解决，因为它涉及迭代器和变异的交叉使用。

[Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

> 通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。

推杆

```
 synchronized (v) { ... } 
```

围绕第`run()`一种方法的主体并进行`addToVector`同步将通过确保迭代器的整个生命周期与向量的突变相互排斥来解决直接问题。

为了解决更大的问题，客户端需要知道在迭代器的整个生命周期内同步，您可能应该公开一个同步[折叠](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)方法而不是公开迭代器。这样，每个读者不需要同步他们的整个阅读。

```
interface Folder<IN, OUT> {
  OUT foldOne(OUT x, IN element);
}

<OUT>
synchronized OUT foldLeft(Folder<? super Object, OUT> folder, OUT x) {
  for (Object element : v) {
    x = folder.foldOne(x, element);
  }
  return x;
} 
```

或者，如果迭代是不频繁的操作，只需将迭代器返回到向量的副本中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T18:25:44.780

**一种可能性：在每个运行运行方法中放置同步块：**

```
 synchronized ( v ) {
        Iterator<Object> it = v.getV().iterator();

        while(it.hasNext())
        {
            System.out.println(it.next().toString());
        }
    }

    synchronized ( v ) {
        v.addToVector("Obj11");
        v.addToVector("Obj12");
        v.addToVector("Obj13");
        v.addToVector("Obj14");
        v.addToVector("Obj15");
        v.addToVector("Obj16");
    } 
```

**另一个提示：**

第一个运行方法的代码可以在 VectorExample 中，如 dump() 或其他。这将使同步更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:22:49.490

问题是您需要保护整个迭代，而不仅仅是`get()`.

写入时，`iterator`来自`Vector`类的 变得无效。`Vector`如果之后使用它会抛出一个`ConcurrentModificationException`。

有两种方法可以解决此问题。您可以同步包含循环的代码块和对同一个锁对象的 add 调用，或者您可以使用不同的集合，允许在输入新数据后对旧数据完成迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:26:09.553

迭代集合时不能修改集合。您可以制作集合的副本并迭代副本或同步集合上的两个块。

```
synchronized(v) {
  ..
} 
```

# eclipse - 卡住“检索 API 列表”，将 Google API 添加到 Eclipse

> ID：16153937
> 
> 赞同：1
> 
> 时间：2013-04-22T18:18:10.960
> 
> 标签：eclipse, google-drive-api

我正在尝试使用 Google 插件将 Google Drive API 添加到 Eclipse，遵循此处快速入门指南的说明：[Google Drive SDK 快速入门指南](https://developers.google.com/drive/quickstart-android)。但是，当我从（谷歌插件图标的）下拉菜单中单击“添加 Google API”项时，新的 API 弹出窗口会卡在“检索 API 列表”上，并且只显示一个空白列表。尝试离开它30分钟，重新安装插件，重新启动eclipse和计算机，但无济于事。

Eclipse 版本：4.2.2

有没有人遇到过这个问题？是否有另一种获取/安装 Drive API 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:19:54.043

您可以从项目托管网站下载 Drive API（和任何其他 Google API）的 Java 库：

[https://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](https://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

# scala - scala中构造函数的使用

> ID：16153945
> 
> 赞同：1
> 
> 时间：2013-04-22T18:18:48.397
> 
> 标签：scala

似乎没有理由和/或可能在 scala 中定义默认构造函数。

基本上，构造函数的概念不存在，因为所有与构造函数相关的东西都写在类体中吗？

```
class SeriousClass {
    exmpl: Text = new Text

    runMethod()
} 
```

我能想到的唯一原因是`default constructor`在带参数的之外定义一个，或者在默认构造函数之外定义一个带参数的。

```
class SeriousClass2(param: Param) {
    def this() {
        this(new Param())
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:22:06.653

默认构造函数**确实存在**，是的，它是整个类。而不是写

```
class SeriousClass2(param: Param) {
    def this() {
        this(new Param())
    }
} 
```

您最好只为默认构造函数提供默认值：

```
class SeriousClass2(param: Param = new Param()) {

} 
```

它既惯用又更具可读性。

此外，有时您可能希望从外部禁止类实例化。这可以通过指定构造函数范围进行归档：

```
class PrettyPrivateClass private() {

} 
```

# r - plyr 什么时候比 data.table 好？

> ID：16153947
> 
> 赞同：0
> 
> 时间：2013-04-22T18:18:52.790
> 
> 标签：r, data.table, plyr

这里的更好可能意味着更快或更容易阅读/更短的语法，或者也可能意味着该命令甚至在`data.table`.

我不使用`plyr`很多，想知道是否有我应该使用的情况。因为我不经常使用它，所以我能想出的唯一例子是`rbind.fill`，据我所知，没有`data.table`类似的例子，而我见过的所有其他例子都在`plyr`和中完成`data.table`，后者更快并且更容易阅读/更紧凑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T18:30:02.830

它们是具有不同用途的不同软件包。一个不能替代另一个，尽管它们有一小部分功能重叠。

以下是每个包的简要摘要，来自包本身：

> plyr 包是一组干净且一致的工具，用于在 R 中实现拆分-应用-组合模式。这是数据分析中极为常见的模式：您可以通过将复杂问题分解成小块，对每个小块做一些事情来解决它一块，然后将结果再次组合在一起。

和

> `data.table`... 以简短灵活的语法提供快速子集、快速分组、快速更新、快速排序连接和列表列，以加快开发速度。它的灵感来自 R 中的 A[B] 语法，其中 A 是矩阵，B 是 2 列矩阵。

它们重叠的地方是“快速分组”，plyr 也通过拆分 data.frames，对片段进行操作，并将它们重新组合成单​​个 data.frame 来实现。 `data.table`具有许多其他功能，可以快速对类似结构的 data.frame 进行操作；`plyr`具有将拆分-应用-组合范式应用​​于其他数据结构的功能，例如列表和数组（作为输入和输出）。

所以，真的，它们是两个不同的工具，碰巧有一个小的重叠区域，它们解决了相同的问题域，但每个工具都做得更多，如果你想要/需要额外的功能，那么应该使用那个包。

# php - 从与某个单词匹配的数组中删除所有字符串（php）

> ID：16153948
> 
> 赞同：2
> 
> 时间：2013-04-22T18:19:03.513
> 
> 标签：php, regex, arrays

我有一个字符串数组，并想从数组中删除包含单词“Free_Course”的所有元素

该数组包含诸如“Free_Course_123”、“Free_Course_124”、“Other_Course_123”、“Other_Course_1234”等字符串。

我只想遍历数组，并删除所有包含“Free_Course”的内容，这样就可以去掉上面列出的前两个元素。

我试过使用这个 preg_grep 功能，但到目前为止还没有成功：

```
$cleanTags= preg_grep("/^Free_Course*/", $tags); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:23:47.980

您可以使用原生 PHP 函数*strpos* ( [http://php.net/manual/fr/function.strpos.php](http://php.net/manual/fr/function.strpos.php) ) 来识别数组中应该删除的值：

```
<?php

foreach ($tags as $index => $tag) {
      if (strpos($tag, 'Free_Course') !== false) {
          unset($tags[$index]);
      }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:24:21.817

你有没有尝试过

```
$tags = array(
    "Free_Course_123", 
    "Free_Course_124", 
    "Other_Course_123", 
    "Other_Course_1234"
);
$cleanTags= preg_grep("/Free_Course/", $tags, PREG_GREP_INVERT);
print_r($cleanTags); 
```

? 最后一个属性反转过滤功能，见[手册](http://php.net/manual/en/function.preg-grep.php)

我已经测试了结果，它应该从 PHP 4.2.0 开始工作

```
Array ( [2] => Other_Course_123 [3] => Other_Course_1234 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T18:26:13.843

你可以做一个 preg_match，只返回那些不匹配的。

```
foreach($array as $key => $value)
    if(!preg_match("/Free_Course/i", $value))
        echo $value . '<br>'; 
```

或者创建一个新数组...

```
foreach($array as $key => $value)
    if(!preg_match("/Free_Course/i", $value))
        $new_array[] = $value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T18:30:01.947

试试这个

```
<?php
foreach( $tags as $key => $val )
{
   if( !preg_grep( "/(?!Free_Course).*/", $tags ) ) {
      echo $val;
   }
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:28:27.517

使用 array_walk：

```
$arr = array(
    "Free_Course_123", 
    "Free_Course_124", 
    "Other_Course_123", 
    "Other_Course_1234"
);

$arr = array_filter($arr, function($e){
    return strpos($e, 'Free_Course') === false;
}); 
```

（编辑：我误解了这个问题）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T18:32:26.843

```
$cleanTags = array_diff($tags, preg_grep("/Free_Course.*/", $tags)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T18:37:59.473

“^”仅在字符类列表的开头使用时表示否定，即“[^a-zA-Z0-9]+ 表示“一个或多个不是字母数字字符的字符”。

如果您在 (perl) 正则表达式的开头使用“^”，则表示“后面必须在行首”。所以“/^Free_Course*/”将匹配任何以“零个或多个文本'Free_Course'实例”开头的字符串，这不是你想要的。

我会使用 Thierry Marianne 的解决方案。

如果您想知道“我如何用正则表达式否定一个词？”，请参阅此线程：

[正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

# java - 使用 ClassLoader 加载 JAR 文件时出现 ClassNotFoundException

> ID：16153949
> 
> 赞同：0
> 
> 时间：2013-04-22T18:19:07.983
> 
> 标签：java, eclipse, jar, classloader

我在这里和那里收集了有关从 jar 文件创建和使用类的说明（和代码）。

我创建了一个 Test.java 文件：

```
package a;
public class Test {
    public String print(){
        return "TestLALALA";
    }   
} 
```

并创建了一个 jar 文件：

```
jar cvf0 Test.jar Test.java 
```

当我提取 jar（通过命令行）时，该类是完整的。

我将 jar 放在 Eclipse 项目的“libs”文件夹中。我可以在“库”下的项目“构建路径”中看到它。

以下代码遇到 ClassNotFoundException ：

```
URL[] urls = new URL[1];
try {
    File file = new File("C:\\Eclipse\\Demo\\libs\\Test.jar");
    urls[0] = file.toURI().toURL();
} catch (MalformedURLException e1) {
    e1.printStackTrace();
}
URLClassLoader loader = new URLClassLoader (urls);
Class classToLoad = null;
if(loader!=null)
{
    try {
        classToLoad = loader.loadClass("a.Test");
    } catch (ClassNotFoundException e1) {
        e1.printStackTrace();
    }
} 
```

我错过了什么 ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:06:41.303

使用 Eclipse 中的 jar 导出来确保它被正确创建。

你可以试试这个：

```
Test test1 = new Test();
Class.forName("a.Test"); 
```

如果要测试动态加载，可以删除 Test test1 ...。但是我真的不明白为什么你用 UrlClassLoader 让它变得如此复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:35:11.837

看起来您只将未编译的 .java 文件添加到 JAR 而不是已编译的 .class 文件。

JAR 中的文件也应该是`a/Test.class`这样，因此您需要确保该`a`目录存在于其中以表示包路径。目前，该文件似乎存在于 JAR 的根目录中，而不是存在于子目录中。

# java - Spring+GWT+jackson+JSON 响应文本似乎不是标准响应格式

> ID：16153956
> 
> 赞同：1
> 
> 时间：2013-04-22T18:19:19.250
> 
> 标签：java, spring, gwt, jackson, smartgwt

嗨，它与以下帖子有关-

[smartgwt listgrid RestDataSource 未填充](https://stackoverflow.com/q/13455342/2294988)

我在尝试使用 smartGWT 和 Spring3 构建应用程序时遇到问题。使用 jackson 将返回对象转换为 json。

从 spring 控制器返回到客户端的 json 响应的错误（帖子末尾的完整堆栈跟踪）：

16:52:27.094 [错误] [utilapp] 16:52:27.092:TMR1:WARN:RestDataSource:isc_ItemListGrid_1_0:RestDataSouce transformResponse()：JSON 响应文本似乎不是标准响应格式。com.smartgwt.client.core.JsObject$SGWT_WARN: 16:52:27.092:TMR1:WARN:RestDataSource:isc_ItemListGrid_1_0:RestDataSouce transformResponse()：JSON 响应文本似乎不是标准响应格式。

只是想知道是否有其他人以前遇到过这样的错误，或者关于这背后的原因的任何提示将非常有用。

直接从浏览器点击相应 GET 方法 url 的 Json 响应负载 - {"status":0,"data":null,"errors":{},"endRow":0,"startRow":0,"totalRows":- 1}

所有字段都有默认值，尽管在控制器中设置了这些值。

已定义 DSResponse POJO 以使 json 响应与链接上描述的内容同步 - [http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/RestDataSource.html](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/RestDataSource.html)

Web.xml：调度程序 servlet 条目

```
<servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>         
</servlet>
<servlet-mapping>
<servlet-name>spring</servlet-name>
<url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

spring-servlet.xml –（基于注释，因此没有控制器 bean 只是映射到 JacksonJsonView）

```
<context:component-scan base-package="com.khush.util.server.rest" />
<context:component-scan base-package="com.khush.util.server.spring" />
<context:annotation-config/>
<mvc:annotation-driven/>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
<property name="mediaTypes">
<map>
<entry key="html" value="text/html"/>
<entry key="json" value="application/json"/>
</map>
</property>
<property name="viewResolvers">
<list>
<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
<property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
<property name="prefix" value="/WEB-INF/jsp/"/>
<property name="suffix" value=".jsp"/>
</bean>
</list>
</property>
<property name="defaultViews">
<list>
<bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
<property name="prefixJson" value="true"/>
</bean>
</list>
</property>
</bean> 
```

服务器端的 Spring 控制器——</p>

```
@Controller
@RequestMapping("/service*")
public class RPCListService {

       @RequestMapping(value="/fetch", method=RequestMethod.POST)
       public @ResponseBody DSResponse fetch(@RequestBody String json){
              DSResponse dsResponse = new DSResponse();
              List<Account> accounts = new ArrayList<Account>();
              Account account;

              for(int i = 0 ; i < 500 ; i++){
                     account = new Account();
                     account.setAccountId(i * 100L);
                     account.setAccountName("i " + "accountName");
                     account.setAccountNumber("i " + "accountNumber");
                  accounts.add(account);
              }
              dsResponse.setDate(accounts.toArray());

              return response;
       }

       @RequestMapping(value="/get", method=RequestMethod.GET)
       @ResponseBody public Object get(@RequestBody String json){
              DSResponse dsResponse = new DSResponse();
              List<Account> accounts = new ArrayList<Account>();
              Account account;

              for(int i = 0 ; i < 500 ; i++){
                     account = new Account();
                     account.setAccountId(i * 100L);
                     account.setAccountName("i " + "accountName");
                     account.setAccountNumber("i " + "accountNumber");
                  accounts.add(account);
              }
              dsResponse.setDate(accounts.toArray());
              return dsResponse;
       }
} 
```

客户端的 RestDataSource def –</p>

```
public class AccountDataSource extends SpringJSONDataSource {

       public AccountDataSource(List<DataSourceField> fields) {
              super(fields);
              setPrettyPrintJSON(true);
       }

       @Override
       protected OperationBinding getFetch() {
              OperationBinding fetch = new OperationBinding();
           fetch.setOperationType(DSOperationType.FETCH);
           fetch.setDataProtocol(DSProtocol.POSTMESSAGE);
           DSRequest fetchProps = new DSRequest();
           fetchProps.setHttpMethod(httpMethod);
           fetch.setRequestProperties(fetchProps);

           return fetch;
       }

       @Override
       protected OperationBinding getRemove() {
              // TODO Auto-generated method stub
              return null;
       }

       @Override
       protected OperationBinding getAdd() {
              // TODO Auto-generated method stub
              return null;
       }

       @Override
       protected OperationBinding getUpdate() {
              // TODO Auto-generated method stub
              return null;
       }

       @Override
       public String getUpdateDataURL() {
              // TODO Auto-generated method stub
              return null;
       }

       @Override
       public String getRemoveDataURL() {
              // TODO Auto-generated method stub
              return null;
       }

       @Override
       public String getAddDataURL() {
              // TODO Auto-generated method stub
              return null;
       }

       @Override
       public String getFetchDataURL() {
              return "/rest/service/fetch";
       }
}

public abstract class SpringJSONDataSource extends RestDataSource {

       protected final String httpMethod;

       public SpringJSONDataSource(List<DataSourceField> fields){
              this(fields, "POST");
       }

       public SpringJSONDataSource(List<DataSourceField> fields, String httpMethod) {
           this.httpMethod = httpMethod;
           setDataFormat(DSDataFormat.JSON);
           addDataSourceFields(fields);
           setOperationBindings(getFetch());
           addURLs();
       }

       private void addURLs() {
           if(getUpdateDataURL() != null)
               setUpdateDataURL(getUpdateDataURL());

           if(getRemoveDataURL() != null)
               setRemoveDataURL(getRemoveDataURL());

           if(getAddDataURL() != null)
               setAddDataURL(getAddDataURL());

           if(getFetchDataURL() != null)
               setFetchDataURL(getFetchDataURL());

       }

       private void addDataSourceFields(List<DataSourceField> fields) {
           for (DataSourceField dataSourceField : fields) {
               addField(dataSourceField);
           }
       }

       protected abstract OperationBinding getFetch();
       protected abstract OperationBinding getRemove();
       protected abstract OperationBinding getAdd();
       protected abstract OperationBinding getUpdate();

       public abstract String getUpdateDataURL();
       public abstract String getRemoveDataURL();
       public abstract String getAddDataURL();
       public abstract String getFetchDataURL();
} 
```

Account 和 DSResponse 对象 –</p>

```
public class Account implements Serializable {

       private static final long serialVersionUID = 1L;       

       private Long accountId;

       private String accountName;

       private String accountNumber;

       public Account(){
       }

       public Account(Long accountId){
              setAccountId(accountId);
       }

       public Long getAccountId() {
              return accountId;
       }

       public void setAccountId(Long accountId) {
              this.accountId = accountId;
       }

       public String getAccountName() {
              return accountName;
       }

       public void setAccountName(String accountName) {
              this.accountName = accountName;
       }

       public String getAccountNumber() {
              return accountNumber;
       }

       public void setAccountNumber(String accountNumber) {
              this.accountNumber = accountNumber;
       }

       @Override
       public String toString(){
              StringBuilder sb = new StringBuilder();
              sb.append("Account Id: ").append(getAccountId()).append(", ");
              sb.append("Account Name: ").append(getAccountName()).append(", ");
              sb.append("Account Number: ").append(getAccountNumber()).append(", ");

              return sb.toString();
       }

       @Override
       public int hashCode(){
              final int prime = 31;
              int result = 1;
              result = prime * result + ((accountName == null) ? 0 : accountName.hashCode());
              return result;
       }

       @Override
       public boolean equals(Object obj){
              if(this == obj)
                     return true;
              if(obj == null)
                     return false;
              if(!(obj instanceof Account))
                     return false;
              Account other = (Account)obj;
              if(accountId == null){
                     if(other.accountId != null)
                           return false;
              } else if(! accountId.equals(other.accountId))
                     return false;
              if(accountName == null){
                     if(other.getAccountName() != null)
                           return false;
              }else if(! accountName.equals(other.accountName))
                     return false;
              if(accountNumber == null){
                     if(other.accountNumber != null)
                           return false;
              }else if(! accountNumber.equals(other.accountNumber))
                     return false;
              return true;
       }
}

public class DSResponse implements Serializable{

       private static final long serialVersionUID = -4937262101507779477L;

       public static int STATUS_FAILURE = -1;
       public static int STATUS_LOGIN_INCORRECT = -5;
       public static int STATUS_LOGIN_REQUIRED = -7;
       public static int STATUS_LOGIN_SUCCESS = -8;
       public static int STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED = -6;
       public static int STATUS_SERVER_TIMEOUT = -100;
       public static int STATUS_SUCCESS = 0;
       public static int STATUS_TRANSPORT_ERROR = -90;
       public static int STATUS_VALIDATION_ERROR = -4;

       private int status;
       private Integer startRow;
       private Integer endRow;
       private Integer totalRows;
       private Object[] data;
       private Map errors;

       public int getStatus()
       {
              return status;
       }

       public void setStatus(int status)
       {
              this.status = status;
       }

       public Integer getStartRow()
       {
              return startRow;
       }

       public void setStartRow(Integer startRow)
       {
              this.startRow = startRow;
       }

       public Integer getEndRow()
       {
              return endRow;
       }

       public void setEndRow(Integer endRow)
       {
              this.endRow = endRow;
       }

       public Integer getTotalRows()
       {
              return totalRows;
       }

       public void setTotalRows(Integer totalRows)
       {
              this.totalRows = totalRows;
       }

       public Object[] getData()
       {
              return data;
       }

       public void setData(Object[] data)
       {
              this.data = data;
       }

       public Map getErrors()
       {
              return errors;
       }

       public void setErrors(Map errors)
       {
              this.errors = errors;
       }

       public DSResponse()
       {
              status = STATUS_SUCCESS;

              errors = new HashMap();
              startRow = 0;
        endRow = 0;
        totalRows = -2;
       }

       public DSResponse(int status)
       {
              this.status = status;

              errors = new HashMap();
        startRow = 0;
        endRow = 0;
        totalRows = -1;
       }

} 
```

完整的堆栈跟踪：

09:24:58.896 [错误] [utilapp] 09:24:58.894:TMR0:WARN:RestDataSource:isc_AccountDataSource_0:RestDataSouce transformResponse()：JSON 响应文本似乎不是标准响应格式。com.smartgwt.client.core.JsObject$SGWT_WARN: 09:24:58.894:TMR0:WARN:RestDataSource:isc_AccountDataSource_0:RestDataSouce transformResponse()：JSON 响应文本似乎不是标准响应格式。在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 在 java.lang.reflect.Constructor .newInstance(Constructor.java:513) 在 com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105) 在 com。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:42:01.753

通过定义一个简单的 java 对象（用作 Spring 控制器的返回类型）实现 Serializable 接口，并使用 Map 类型的名为“response”的变量将其排序，并将 json 响应的内容作为键值对添加到该映射，并且它起作用了。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:47:16.157

好吧，根据您的评论，您的回复中没有数据。[您的回复是否与此处](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/RestDataSource.html)指定的格式完全匹配？

我建议它可能不匹配，因为您的错误消息是

> JSON 响应文本似乎不是标准响应格式

接下来做什么？也许尝试将一些非常简单的对象转换为 JSON 以查看问题是否出在您的 Account 对象上？尝试在响应中仅使用一个 Account 对象？或发布您的帐户对象代码？

# mysql - MySql从表中获取唯一单词列表，其中字段中的值用逗号分隔

> ID：16153958
> 
> 赞同：4
> 
> 时间：2013-04-22T18:19:22.737
> 
> 标签：mysql, sql, select

我不确定纯 SQL (MySQL) 是否可行，但无论如何我都会问。我有一张这样的桌子：

```
ID    TAGS
-----------------------------
1     word1,word2,word3
2     word2,word4
3     word3,word5,word6,word7
... 
```

我想从标签字段中选择一个所有唯一的单词，得到这样的结果：

```
TAGS
-----
word1
word2
word3
word4
word5
word6
word7 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:34:16.993

您可以在 SQL 中执行此操作，尽管它并不美观。

```
select distinct reverse(substring_index(reverse(substring_index(tags, ',', n.n)), ',', 1)) as word
from t cross join
     (select 1 as n union all select 2 as n union all select 3 as n union all select 4 as n) n
having word is not null 
```

您需要确保子查询`n`至少包含每个标签中的单词数。

[这](http://www.sqlfiddle.com/#!2/3db7e/7)是演示这一点的 SQLFiddle。

这是将原始数据与序列号交叉连接。然后它从标签字符串中挑选出第 n 个值，使用`substring_index()`.

要获得最大数量的标签，您可以执行以下操作：

```
select max(length(tags) - length(replace(tags, ',', 1))+1
from t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:27:36.457

我能想到在数据库中这样做的唯一方法是使用存储过程，这个存储过程将遍历每一行，提取并分析其内容，尽管它不会很有效。

# php - PHP AWS SDK抛出未知错误

> ID：16153960
> 
> 赞同：15
> 
> 时间：2013-04-22T18:19:27.547
> 
> 标签：php, curl, amazon-web-services, amazon-s3

我一直在使用 amazon S3 为电子商务网站进行媒体存储，但我遇到了这个错误并且不知道如何修复它：

```
Use of undefined constant CURLE_COULDNT_RESOLVE_HOST - assumed 'CURLE_COULDNT_RESOLVE_HOST' 
```

[正如文档](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Guzzle.Plugin.Backoff.CurlBackoffStrategy.html)所述，它来自 CurlBackoffStrategy 女巫：

> 遇到某些 cURL 错误代码时用于重试的策略。

我假设这是一些软件不兼容，但我不知道在哪里看。

此代码适用于我的本地测试环境，但是当服务器获取它时，它就失败了。我已经更新了 PHP，并且 curl 与我的测试环境相同，但无济于事。

如果有人对此错误消息的含义或指向我的方向有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-24T16:41:35.133

我忘记在我的服务器上安装 php5-curl。

# three.js - Collada 装载机无法正常工作

> ID：16153961
> 
> 赞同：1
> 
> 时间：2013-04-22T18:19:33.403
> 
> 标签：three.js, blender, collada

我在搅拌机中创建了一个模型，装配它并创建了一些简单的动画，然后我导出到 .dae。当我打开 .dae 文件时，动画看起来不错，但是在我使用 three.js 将其加载到浏览器后，动画无法正常工作。

该模型仍在加载中，但它看起来像是处于搅拌机编辑模式的模型。（手臂伸直站直），即使控制台端口没有错误，也完全没有动画。

```
new THREE.ColladaLoader().load('../models/myworkblend3.dae', 
    function(collada) {
        monster = collada.scene;
        monster.scale.set(100, 100, 100);
        monster.rotation.x = -Math.PI/2;
        monster.rotation.z = Math.PI/2;

        skin = collada.skins[ 0 ];
        monster.updateMatrix();
        scene.add(monster);
        // enable shadows for an object
        monster.castShadow = true;
        monster.receiveShadow = true;
}); 
```

动画代码是

```
function animate() {

requestAnimationFrame( animate );

    if ( t > 60 ) t = 0;
    if ( skin ) {

        for ( var i = 0; i < skin.morphTargetInfluences.length; i++ ) {     // length is 101
                skin.morphTargetInfluences[ i ] = 0;
        }
        // enable the keyframe one by one
        skin.morphTargetInfluences[ Math.floor( t ) ] = 1;
        t += 0.5;    //this prolongs the waiting time 
    }

render();

} 
```

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:39:09.853

three.js 中的 ColladaLoader 是实验性的，不再维护。无论如何，不​​幸的是，这个 ColladaLoader 是你最好的选择。

[我建议您在此处](https://github.com/mrdoob/three.js/)的官方 GitHub three.js 上发布此错误。 随意添加功能并修复此类问题。

# .net - 为 .net 商店开始移动/IOS 开发的最佳方式

> ID：16153963
> 
> 赞同：0
> 
> 时间：2013-04-22T18:19:33.970
> 
> 标签：.net, ios, objective-c, mobile

我们是一家完整的 .net 商店，正在考虑开始为 iphone/ipad 开发移动应用程序。我们应该进入 Objective C 还是有更容易采用的 IDE 工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:21:50.537

看看[Xamarin](http://xamarin.com)。它允许您使用 C# 编写代码并使用 Windows 作为您的操作系统为 iOS 和 Android 开发。它甚至可以让你使用 Visual Studio 作为你的 IDE。您仍然需要 Mac 作为构建服务器，但您可以购买 Mac Mini 并将其放在角落里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:48:48.687

iOS 肯定需要学习曲线，但我认为这是值得的。像 Xamarin 这样的产品总会有限制。如果您希望获得一个快速应用程序，Xamarin 可能没问题，但除此之外，学习 iOS ......现在学习比我 4 年前开始处理 NDA 问题时要容易得多。另外，您现在拥有 ARC，这意味着您不必担心内存管理问题。

# java - 访问变量 Java/Android 的正确方法

> ID：16153968
> 
> 赞同：1
> 
> 时间：2013-04-22T18:19:54.497
> 
> 标签：java, android, variables

我有多个课程：

*   主要活动
*   服务
*   设置

通过设置，可以更改服务中我需要的某个延迟（变量）（我需要该变量的值）。

我应该如何实现这个？

*   我应该有意识地开始设置并使其返回延迟值吗？
*   我应该创建一个 getter，它可以在使用 mysettings.getdelay() 等创建设置实例后返回值吗？
*   还是有另一种（/更好）的方式来做到这一点？

谢谢

[编辑]
我最终使用了类似 Ridcully 的答案。唯一的区别是我没有给出公开声明，而是使用了 getter 和 setter。人们总是告诉我使用 getter 和 setter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:38:08.503

> 我应该有意识地开始设置并使其返回延迟值吗？

如果`Settings`是，`Activity`那么是。假设您的[班级](http://developer.android.com/reference/android/app/Activity.html)`Settings`是`Activity`. 您可以开始它`Activity`并返回一个`Intent`数据并根据返回的内容更改您的变量。

> 我应该创建一个 getter，它可以在使用 mysettings.getdelay() 等创建设置实例后返回值吗？

如果它是一个常规类而不是一个，`Activity`那么您可能只想设置一个`getter()`方法并根据传递的某些参数返回一个值。

这是获取变量的几种方法。如果您想永久存储它们，那么 Ridcully 的答案是合适的。如需更多帮助，请发布相关代码和更具体的问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:23:48.477

对于您的设置，您应该为此目的使用 Android 标准 - **SharedPreferences**。阅读此[API 指南](http://developer.android.com/guide/topics/data/data-storage.html#pref)作为开始。

编辑：

为了仅在应用程序的生命周期内存储数据，您还可以使用自己的 Application 类并在其中使用变量：

自定义应用程序类：

```
public class MyApplication extends Application {

    public static int delay = 0;

} 
```

在 AndroidManifest.xml 中：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name=".MyApplication"> 
```

# java - C 堆栈使用量太接近限制并将 java 代码转换为 R

> ID：16153970
> 
> 赞同：0
> 
> 时间：2013-04-22T18:20:00.583
> 
> 标签：java, r, runtime-error, time-series

在使用 R 计算数据挖掘技术算法的准确性的大学项目期间，我和我的主管同意实施此处显示的 DP 算法[http://www.iwaponline.com/jh/012/0318/0120318.pdf](http://www.iwaponline.com/jh/012/0318/0120318.pdf)，对于每隔 15 分钟获取的河流高度时间序列，需要一个计算所有分段路径的函数。

在编写此函数“最小化”时，-- 顺便说一句未完成，但仍然有效。我遇到了以下错误“错误：C 堆栈使用量太接近限制”，我不想继续，直到这部分首先工作下面是我的 R 代码，然后是我试图复制的函数的 java 代码进一步遵循示例测试系列是：1,2,3,4,5,4,3,2,1,2,3,4,5 所以 T=13 目前我一直在尝试让示例与 K 一起运行=3，但 Minimize 函数最终将在 K=1 到 K=20 的循环中使用。java中的calerror函数计算我的R代码中每个段的lms错误我还没有实现这个函数所以目前被注释掉了。Minimize 函数的目标是计算每个可能段的误差，并放入一个名为 cost 的数组中，

如果有人知道我为什么会得到并可能纠正这个错误，那么非常需要您的帮助，如果有人对将 JAVA 代码转换为 R 代码有任何建议，也将不胜感激。

```
#Recursive method for exploring all paths
library(zoo)
fmt = '%d-%b-%Y %H:%M'
data = read.zoo("desktop/test.csv",header=TRUE,sep=',',tz='',format=fmt,index=0:1)
Values = coredata(data) #strips date/time of values for computation 
Number=plain #array of indexed values

T=length(data)
r=1
K=3

Compare = function (START,END){
  if (START<END){
    boo = -1
  }
  if (START==END){
    boo = 0
  }
  if (START>END){
    boo = 1
  }
  return(boo)
}

Minimize = function(T,K,r){
  if(r<K){
  H=T-K+r
    for(r in 1:H){
      START = Number[1]
       END = Number[r]
      boo1=Compare(START,END)
      if (boo1 !=0){
       cost[r]=cost[r-1]#+calerror(START,END)
      }else{
        cost[r]=0
        r=r+1
        Minimize(T,K,r)
      }
    }
}else{
}
  return(cost)
} 
tester=Minimize(T,K,r)
tester 
```

完成的 Java 代码如下：

```
private void minimize(int T, int K, int k) {
        // recursive method for exploring all the paths
        if(k<K){
            for(t[k]=t[k-1];t[k]<T-K+k-1;t[k]++){
                Map.Entry<Date, V> e = inData.getEntryAtIndex(t[k-1]);
                Map.Entry<Date, V> f = inData.getEntryAtIndex(t[k]+1);
                Interval interval = new Interval(e.getKey(),f.getKey());
                //System.out.println(interval);
                if(interval.getStart().compareTo(interval.getEnd())!=0)
                    cost[k]=cost[k-1]+calError(interval);
                else cost[k] = 0;
                minimize(T,K,k+1);
            }
        }
        else{
            for(t[k]=t[k-1];t[k]<T-K+k-1;t[k]++){
                Map.Entry<Date, V> g = inData.getEntryAtIndex(t[k-1]);
                Map.Entry<Date, V> h = inData.getEntryAtIndex(t[k]+1);
                Interval interval1 = new Interval(g.getKey(),h.getKey());
                //System.out.println(interval1);
                if(interval1.getStart().compareTo(interval1.getEnd())!=0)
                    cost[k]=cost[k-1]+calError(interval1);
                else cost[k] = 0;
                Map.Entry<Date, V> i = inData.getEntryAtIndex(t[k]);
                Map.Entry<Date, V> j = inData.getEntryAtIndex(T-1);
                Interval interval2 = new Interval(i.getKey(),j.getKey());
                if(interval2.getStart().compareTo(interval2.getEnd())!=0)
                    cost[k+1]=cost[k]+calError(interval2);
                else cost[k+1]=0;

                if(ckt[K]>cost[k+1]){
                    /*for(int l=0;l<K+1;l++)
                        System.out.println(ckt[l]);*/
                    ckt[K] = cost[k+1];
                    /*for(int l=0;l<K+1;l++)
                        System.out.println(ckt[l]);*/
                    for(int l=0;l<K+1;l++)
                        tOpti[K][l]=t[l];
                    /*for(int l = 0;l<K+1;l++)
                        System.out.print(tOpti[K][l]+",");
                    System.out.println(ckt[K]);*/
                }
            }
        }
    } 
```

# java - 用时钟更新 TextView

> ID：16153971
> 
> 赞同：0
> 
> 时间：2013-04-22T18:20:05.050
> 
> 标签：java, android, timer, textview, clock

我一直在尝试创建一个程序，该程序将输出一个可以工作的数字时钟，让我可以快速访问日期和时间。我有解析时间的代码，但是，我在更新 textview 时遇到了困难。我有这个：

```
 `public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    timer = (TextView)findViewById(R.id.timer);

    time = new Time();
    time.setToNow();

    timeString = time.toString();
    changeTime = Parser(timeString);

    time.setToNow();
    timeString = time.toString();
    changeTime = Parser(timeString);

    timer.setText(changeTime);  
    } 
    private String Parser(String time){

    String year = time.substring(0, 4);
    String month = time.substring(4,6);
    String day = time.substring(6, 8);
    String hour = time.substring(9,11);
    String minute = time.substring(11, 13);
    String second = time.substring(13, 15);

    String finalTime = hour + ":" + minute + ":" + second + " " + day + " " + month + " "  + year;
    //String finalTime = second;
    return finalTime;

}` 
```

如何将其放入循环中以不断更新文本视图。

感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:07:49.370

使用永无止境的处理程序消息开始更新视图是一种不好的做法（尝试查看进程的 CPU 级别）。更好更优雅的方法是注册一个`BroadcastReceiver`将触发更新的。

```
public class Clock extends LinearLayout {

    private Calendar mCalendar;
    private LinearLayout mLayoutTime;
    private TextView mAMPMText;
    private TextView mDateText;
    private TextView mTimeText;
    private View mSendFeedback;
    private boolean mAttached;

    private final Handler mHandler = new Handler();
    SimpleDateFormat dateFormatter = new SimpleDateFormat("EEE, MMM d, yyyy");
    SimpleDateFormat timeFormatter = new SimpleDateFormat("h:mm");

    public Clock(final Context context, int layoutResourceID, int dateResId, int meResId,int amPmResId) {
        super(context);
        LayoutInflater layoutInflater = LayoutInflater.from(context);
        View view = layoutInflater.inflate(layoutResourceID, null);
        addView(view, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        mAMPMText = (TextView) view.findViewById(amPmResId);
        mTimeText = (TextView) view.findViewById(timeResId);
        mDateText = (TextView) view.findViewById(dateResId);    
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();

        if (!mAttached) {
            mAttached = true;
            IntentFilter filter = new IntentFilter();

            filter.addAction(Intent.ACTION_TIME_TICK);
            filter.addAction(Intent.ACTION_TIME_CHANGED);
            filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);

            getContext().registerReceiver(mIntentReceiver, filter, null, mHandler);
        }

        // NOTE: It's safe to do these after registering the receiver since the receiver always runs
        // in the main thread, therefore the receiver can't run before this method returns.

        // The time zone may have changed while the receiver wasn't registered, so update the Time
        mCalendar = Calendar.getInstance();

        // Make sure we update to the current time
        onTimeChanged();
        updateView();
    }

    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        if (mAttached) {
            getContext().unregisterReceiver(mIntentReceiver);
            mAttached = false;
        }
    }

    private void updateView(){
        mTimeText.setText(timeFormatter.format(mCalendar.getTime()));
        mDateText.setText(dateFormatter.format(mCalendar.getTime()));
        mAMPMText.setText(mCalendar.get(Calendar.AM_PM) == 0 ? "AM" : "PM");
    }

    private void onTimeChanged() {
        mCalendar.setTime(new Date());

        updateContentDescription(mCalendar);
    }

    private final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(Intent.ACTION_TIMEZONE_CHANGED)) {
                String tz = intent.getStringExtra("time-zone");
                mCalendar.setTimeZone(TimeZone.getTimeZone(tz));
            }

            onTimeChanged();

            updateView();
        }
    };

    private void updateContentDescription(Calendar calendar) {
        setContentDescription(calendar.toString());
    }
} 
```

布局（可以做得更好）

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/layout_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/time_txt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:includeFontPadding="true" />

        <TextView
            android:id="@+id/am_pm_txt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="AM" />
    </LinearLayout>

    <TextView
        android:id="@+id/date_txt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:37:16.467

您应该使用计时器线程。您还可以使用 来简化时间和日期转换`Calendar`，并可以使用 来优化您的字符串创建`format`。此示例将`TextView`每秒更新一次（1000 毫秒）：

```
Timer t = new Timer();
timer = (TextView)findViewById(R.id.timer);

t.scheduleAtFixedRate(new TimerTask() 
{
    @Override
    public void run() {
        Calendar c = Calendar.getInstance();
        final String finalTime = String.format(Locale.US, "%d:%d:%d %d/%d/%d", c.get(Calendar.HOUR), c.get(Calendar.MINUTE), c.get(Calendar.SECOND), c.get(Calendar.DAY_OF_MONTH), c.get(Calendar.MONTH), c.get(Calendar.YEAR));

        runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    timer.setText(finalTime);
                }
            });
    }

}, 1000, 1000); //Initial Delay and Period for update (in milliseconds) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:33:52.387

声明一个 Handler 来更新 UI 线程上的 TextView。

```
private Handler mHandler = new Handler() {
 @Override
 public void handleMessage(Message msg) {
    time = new Time();
    time.setToNow();

    timeString = time.toString();
    changeTime = Parser(timeString); 
    timer.setText(changeTime);  
 }
}; 
```

启动将更新您的 TextView 的 TimeTask

```
int initialDelay = 1000; //first update in miliseconds
int period = 5000;      //nexts updates in miliseconds       

Timer timer = new Timer();
TimerTask task = new TimerTask() {
  public void run() {
      Message msg = new Message();
      mHandler.sendMessage(msg);
  }
};
timer.scheduleAtFixedRate(task, initialDelay, period); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:39:23.243

这可以在 android 中的线程的帮助下轻松完成，但由于您想访问 ui，因此线程无法帮助您。你最好选择 handlers 或 timertask

然而，异步任务也在非 ui 线程上运行，因此在 timertask 中创建一个处理程序..

```
Timer t=Timer();

    t.scheduleAtFixedRate(new TimerTask(new Runnable()
        {
    public void run(){
    Handler h=new Handler(getMainLooper());
    h.post(new Runnable(
){public void run(){
//get the time here and set the textview here as here it has access to the main ui
}});
    }
    }
    ), long delay, Long period); 
```

抱歉代码格式错误……但它会为你工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-16T14:19:19.280

如果操作不耗时，建议使用`Handler`代替`Timer`or `Thread`。在`Handler`当前线程中工作，不会创建新线程，这样可以节省一些内存使用。它还通过减少 CPU 轮询线程的数量来节省一些 CPU 使用率。此外，Android 的线程`Looper`和时钟`SysClock`经过优化，等待时几乎不消耗资源。

```
Handler handler = new Handler(Looper.getMainLooper()) // using the main thread to update view
Runnable runnable = new Runnable() {
    public void run(){
        tick()
    }
}
void tick(){
    Date date = Date()
    String text = date.toString() // or using SimpleDateFormat
    textView.setText(text)
    handler.postDelayed(runnable, 1000)
} 
```

记得手动结束。

```
void onDestroy() {
    super.onDestroy()
    handler.removeCallbacks(runnable)
} 
```

# android - 可声明样式的名称如何链接到使用其属性的视图？

> ID：16153976
> 
> 赞同：2
> 
> 时间：2013-04-22T18:20:21.880
> 
> 标签：android, custom-attributes, android-custom-view, custom-view, declare-styleable

通常，自定义属性的示例采用以下形式：

```
<declare-stylable name="MyView">
    <attr name="name" format="string"/>
</declare-styleable> 
```

及其用法：

```
<com.example.test.MyView
    customns:name="Hello"/> 
```

因此自定义视图与可样式化属性具有相同的名称。

但是[在这个例子中（点击查看完整代码）](http://www.vogella.com/articles/AndroidCustomViews/article.html)你会看到：

```
<declare-styleable name="Options">
    <attr name="titleText" format="string" localization="suggested" />
    <attr name="valueColor" format="color" />
</declare-styleable> 
```

使用者：

```
<com.vogella.android.view.compoundview.ColorOptionsView
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    custom:titleText="Background color"
    custom:valueColor="@android:color/holo_green_light"
    /> 
```

这让我想知道，它是如何`ColorOptionsView`与 name 定义的属性相关联的`Options`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:27:03.440

Those options are available as part of the declared `namespace` *custom*, which is included at the top of the `XML` file:

```
xmlns:custom="http://schemas.android.com/apk/res/com.vogella.android.view.compoundview" 
```

**NOTE**

Simply adding this line will not provide support for auto-complete. If that is what your mean by your question, you need to add the schema to your workspace's *XML Catalog*. You can do this in Eclipse by going to `Eclipse -> Preferences`, then `XML -> XML Catalog`. Here, click the `Add...` button. Navigate to the XML Schema file, then select `OK`. If you close and re-open the the XML file, you will now have autocompletion.

* * *

Finally, when unpacking the attributes used in `ColorOptionsView.java`, the author can specifically look for attributes from this namespace. This is from the same source (commented by me):

```
//grab the declared-styleable resource entries
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.Options, 0, 0);
//get the "titleText" entry from this element's attributes
String titleText = a.getString(R.styleable.Options_titleText);
//get the "valueColor" attribute. If it does not exists, set the default to holo_blue_light
int valueColor = a.getColor(R.styleable.Options_valueColor,
    android.R.color.holo_blue_light);
a.recycle(); 
```

# openlayers - 可以使用 OpenLayers.Protocol.Script 加载 KML 文件吗？

> ID：16153985
> 
> 赞同：1
> 
> 时间：2013-04-22T18:20:37.893
> 
> 标签：openlayers, kml

我正在尝试加载 KML 文件，并认为 OpenLayers.Protocol.Script 可能用于解决我面临的跨域问题。有谁知道这是否可以做到，如果可以，怎么做？

我见过使用它来加载 RSS 提要和其他东西的例子，但不是 KML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:20:40.590

是的，请参阅 OL 示例[http://openlayers.org/dev/examples/cross-origin-xml.html](http://openlayers.org/dev/examples/cross-origin-xml.html) 将脚本协议与 YQL 一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:55:48.363

[您可以使用此处](http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#HowdoIsetupaProxyHost)解释的代理。然后你可以简单地使用`new OpenLayers.Protocol.HTTP()`

# html - 将 ID 属性添加到 Web 应用程序的所有 HTML 元素？

> ID：16153986
> 
> 赞同：7
> 
> 时间：2013-04-22T18:20:42.787
> 
> 标签：html, w3c, w3c-validation, web-standards

目前，我正在使用 RoR、MySQL、HTML、CSS 和 jQuery 等构建 Web 门户，我的自动化测试工程师要求我向我的应用程序的所有元素添加 ID 属性（如果可能的话，还包括 NAME 属性）。

我很困惑这样做，也许我不确定这是否是一个好习惯，所以任何人都可以帮助我解决向我的应用程序的所有元素添加 ID 属性的具体缺点/问题。

谢谢，
湿婆

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-04-02T23:53:34.147

要进行可靠的前端测试，您需要能够在不使用过于具体的选择器的情况下识别某些元素（如果您没有参考元素，则需要这样做）。喜欢`body div:nth-of-type(4) ul li:nth-child(5) a`检查某个链接的选择器不仅明显丑陋，而且还容易改变标记。一个小小的改变可能会破坏你一半的测试套件。为了避免这种情况，有几种方法可以让您的测试工程师的生活更轻松：

### 糟糕的方式

将`id`s 分配给您的所有页面元素...

### 好办法

是以下方法：

1.  利用新的语义标签，如[`<nav>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav), [`<header>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/header), [`<footer>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/footer), [`<main>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/main), 和[`<section>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/section).
    使用这些元素，您可以构建[页面的基本结构](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML_sections_and_outlines)。
2.  将`id`s 分配给重要/独特的页面元素。谨慎使用它们，使用有意义的名称，并记住`id`s 代表独特的元素（可能只在页面上出现一次）！
3.  使用该`class`属性对多个具有相似特征的元素进行分组（例如导航元素、外部/内部锚点、交互元素……）
4.  避免`name`使用属性，或仅在必要时使用。HTML5 在某些元素上弃用了这个属性，比如`<a>`，所以我会完全避免它。没有必要考虑您拥有的所有其他选项。

最后，您应该与您的测试工程师进行一次结对编程会议，以更好地了解他的需求是什么，这样您就不会在页面上贴上无用的标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-02T23:20:12.277

s 允许可靠地找到页面上的`id`特定元素，即使元素周围的标记发生变化（例如，用于视觉刷新）。

另一方面，无关`id`的 s 会增加页面下载大小和内存占用。

`id`s 也应该是唯一的，因此为页面上的每个元素提供一个唯一的 id会**很**困难，但这可能不是测试自动化所需要的。

# c - 发送 ptrace 信号后获取僵尸进程

> ID：16153989
> 
> 赞同：0
> 
> 时间：2013-04-22T18:20:50.353
> 
> 标签：c, linux, signals, ptrace, zombie-process

我正在测试 ptrace 和信号。

问题是，当我使用 sigaction 转发信号，然后将中断信号发送到进程时`kill(pid, SIGKILL)`， `ptrace(PTRACE_SYSCALL, pid, NULL, tracee_signal)`进程在`ps aux`.

只有当我退出“主”进程时，僵尸进程才会通过等待（在“主”进程结束时）收集其返回状态，因此它不再是僵尸。

当我收到信号时，将调用信号处理程序，并将信号的值分配给声明为`volatile sig_atomic_t gotsig`(Rockkind) 的全局变量。

因此，在跟踪器的主循环中，我检查该全局变量的值`>0`，然后检查 I `kill(pid, gotsig);`。

之后有这个`ptrace(PTRACE_SYSCALL, pid, NULL, tracee_signal)`。

然后这个过程就变成了僵尸。

为什么会这样？这是正确的行为吗？

**补充：**
可能是因为我们必须在最近的 ptrace 调用之后显式等待孩子吗？从而获得退出地位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:12:40.763

参考您的补充：是

只要父母`SIGCHLD`因为孩子的死亡而没有处理发送的邮件，孩子就会保持僵尸状态。

如果父母在孩子是僵尸时死亡，孩子会被`init`（通常是 pid `1`）继承，并且在正常情况下`init`确实会处理 pending `SIGCHLD`，这反过来会导致孩子正常死亡。

# php - WordPress do_action 功能协助

> ID：16153992
> 
> 赞同：0
> 
> 时间：2013-04-22T18:20:54.523
> 
> 标签：php, wordpress, function

我正在尝试向 Wordpress 介绍自己，在我安装了主题并进入其中进行一些编辑后，我发现了这个电话：

***\wp-content\themes\catch-everest\footer.php***

```
do_action( 'catcheverest_site_generator' ); 
```

我将它跟踪到这个函数，我完全迷失了：

```
function do_action($tag, $arg = '') {
    global $wp_filter, $wp_actions, $merged_filters, $wp_current_filter;

    if ( ! isset($wp_actions) )
        $wp_actions = array();

    if ( ! isset($wp_actions[$tag]) )
        $wp_actions[$tag] = 1;
    else
        ++$wp_actions[$tag];

    // Do 'all' actions first
    if ( isset($wp_filter['all']) ) {
        $wp_current_filter[] = $tag;
        $all_args = func_get_args();
        _wp_call_all_hook($all_args);
    }

    if ( !isset($wp_filter[$tag]) ) {
        if ( isset($wp_filter['all']) )
            array_pop($wp_current_filter);
        return;
    }

    if ( !isset($wp_filter['all']) )
        $wp_current_filter[] = $tag;

    $args = array();
    if ( is_array($arg) && 1 == count($arg) && isset($arg[0]) && is_object($arg[0]) ) // array(&$this)
        $args[] =& $arg[0];
    else
        $args[] = $arg;
    for ( $a = 2; $a < func_num_args(); $a++ )
        $args[] = func_get_arg($a);

    // Sort
    if ( !isset( $merged_filters[ $tag ] ) ) {
        ksort($wp_filter[$tag]);
        $merged_filters[ $tag ] = true;
    }

    reset( $wp_filter[ $tag ] );

    do {
        foreach ( (array) current($wp_filter[$tag]) as $the_ )
            if ( !is_null($the_['function']) )
                call_user_func_array($the_['function'], array_slice($args, 0, (int) $the_['accepted_args']));

    } while ( next($wp_filter[$tag]) !== false );

    array_pop($wp_current_filter);
} 
```

您能描述一下上述案例中的数据流吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:36:26.933

源代码看起来相当复杂，但从实用的角度来看，知道它创建了一个钩子就足够了，它允许您通过钩子函数（使用）[`do_action`](http://codex.wordpress.org/Function_Reference/do_action)在特定位置执行代码。[`add_action`](http://codex.wordpress.org/Function_Reference/add_action)在您的情况下，主题作者允许您在页脚中执行代码。您可以将以下功能放在您的`functions.php`文件或插件中。它将在您的主题的页脚中回显“Hello world”。

```
function my_site_generator(){
    echo 'Hello world';
}
add_action( 'catcheverest_site_generator', 'my_site_generator' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:35:27.167

这是一个非常广泛的问题，超出了 Stack Overflow 的范围。

动作和过滤器，或钩子，是 'Wordpress' 做事的方式。Wordpress 页面上有一个循环，它按优先级执行操作，然后返回将过滤的内容，然后再将其应用于页面。

关于操作和过滤器的书籍有很多，您绝对应该查看一些 Wordpress 插件书籍以获取更多详细信息。

这本书帮助我理解了我在学习时发生的事情：

[http://www.amazon.com/Professional-WordPress-Plugin-Development-Williams/dp/0470916222](https://rads.stackoverflow.com/amzn/click/com/0470916222)

# forms - 如何使用 Spring MVC 从表单中获取列表

> ID：16153996
> 
> 赞同：0
> 
> 时间：2013-04-22T18:21:15.370
> 
> 标签：forms, list, spring-mvc

我有一个列表（List），我已经在表单中定义了它。我想将此列表传递给jsp。我使用的框架是spring mvc。困难的部分是我无法填充列表。我知道我必须写一个 foreach 语句，但我尝试了，但什么也没发生。我遵循[了这个](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)例子，但同样的事情又发生了。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:48:41.370

谢谢大家，帮助我解决我的问题。我终于找到了解决方案。在我写的表格`@Valid private SubmitAEActivityForm[] person;`中然后我写了一个包含我想要的字段的类。在那之后，我在我的 JSP 中写道：

```
c:forEach items="${submitAEForm.aifs}" var="holdData"
                                varStatus="loop">
                                <c:set var="indexLoop" value="${loop.index}" scope="request" />
                                <c:set var="items" value="${holdData}" scope="request" />
                                <c:import url="/WEB-INF/jsp/common/prototype.jsp"></c:import>

                            </c:forEach> <c:remove var="items" /> 
```

prototype.jsp 包含我想克隆的字段。我的 jQuery 代码是：

```
function initDivList(addBtn, removeBtn, hiddenDivId, displayDivId) {
    var i = 0;
    $(addBtn).click(function() {
        $(hiddenDivId).clone().find('input, select').each(function() {
            $(this).attr({
                'name': function(_, name) { return name.replace("$NAME$", i); }
              }); }).end().fadeIn(1000).appendTo(displayDivId).css("display", "block");

        $(removeBtn).click(function() {
            $(this).parent().remove();
        });
        i++;
    });
     $(removeBtn).click(function() {
        $(this).parent().remove();
        if (i > 1) {
            i--;
        }
    }); 
```

通过这种方式，我为每个字段编制了索引，因此我可以轻松呈现每个错误

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T16:26:39.920

你试过这个吗？ [http://viralpatel-net-tutorials.googlecode.com/files/SpringMVC_Multi_Row.zip](http://viralpatel-net-tutorials.googlecode.com/files/SpringMVC_Multi_Row.zip)

我将此项目导入我的 STS 并运行它，然后我成功获得了元素列表。

我正在使用以下软件：

*   雄猫 7.0.39
*   STS 3.2.0
*   Java 1.7

希望这可以帮助。