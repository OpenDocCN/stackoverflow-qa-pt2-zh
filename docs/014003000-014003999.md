# StackOverflow 问答 14003000-14003999

# jms - JMS QueueReceiver - 需要让接收者等待一段时间，即使消息在队列中可用

> ID：14003000
> 
> 赞同：1
> 
> 时间：2012-12-22T12:52:59.477
> 
> 标签：jms

我必须将现有的 JMS Receiver 程序更新为如下。

现有功能：

*   一旦消息作为 xml 接收，我的接收器类将读取一条消息并调用 Web 服务来处理其中一个服务器中的作业。

    新功能：

*   接收者应该等待一段时间，直到作业服务器有空来处理作业。我尝试使用 MessageSelectors 但它仅适用于消息头。我尝试了此选项“message = (JMSTextMessage) mqQueueReceiver.receive(100000000000000);” 但是每当我发布消息时，这些消息都会在发布到队列后被读取。但我想让接收器等待我通过 Web 服务调用从作业服务器获取的某个时间间隔。

我的代码如下：

```
 connectionFactory = new MQQueueConnectionFactory();
        connectionFactory.setHostName(config.getValue("host"));
        connectionFactory.setPort(Integer.parseInt(config.getValue("port")));
        connectionFactory.setTransportType(JMSC.MQJMS_TP_CLIENT_MQ_TCPIP);
        connectionFactory.setQueueManager(config.getValue("manager"));
        connectionFactory.setChannel(config.getValue("channel"));
        queueConnection =  (MQQueueConnection) connectionFactory.createQueueConnection();
                    queueSession = (MQQueueSession) queueConnection.createQueueSession(true, Session.CLIENT_ACKNOWLEDGE);
        queue = (MQQueue) queueSession.createQueue(config.getValue("queue"));
        mqQueueReceiver = (MQQueueReceiver) queueSession.createReceiver(queue); 
```

而（真）{

```
 if(this.stopListener) {
            System.out.println("stopListener variable is changed ");
            break;
        }

        try {

            message = (JMSTextMessage) mqQueueReceiver.receive(1000);

            String response = "";

            if(this.nullCheckJMSTextObject(message)) {

                response= soapClient.invokeWebService(message.getText(),message.getJMSCorrelationID());

                                if(this.nullCheckSoapResponse(response)) {

                    queueSession.commit();

                } else {

                    queueSession.rollback();
                    queueSession.commit();
                     Thread.sleep(receiverWaitTime);
                }
            }   

        } catch (JMSException e) {
        System.err.println("Linked Exception");
        e.getLinkedException();
        System.err.println("Error Code");
        e.getErrorCode();
        System.err.println("Cause ");
        e.getCause();
        System.err.println("fillTrackTrace ");
        e.fillInStackTrace();
            e.printStackTrace();
        break;
        }catch(IllegalStateException e) {
            e.printStackTrace();    
        break;
        }catch(InterruptedException e) {
            e.printStackTrace();
        break;
    }catch(Exception e) {
        e.printStackTrace();
        break;

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:23:35.233

该`receive(timeout)`方法将等待指定的超时时间以使消息到达队列。如果消息在超时之前到达队列，该方法将立即返回一条消息，否则该方法将等到超时时间然后返回没有消息。您将看到 2033 异常。

`timeout`为`receive()`调用指定的值指示该方法必须等待消息多长时间才能`receive`返回。指定的超时时间不是为了延迟消息传递。如果有消息，该方法将立即返回。

我认为可以修改您的逻辑以更改执行顺序。仅在您的 Web 服务准备好处理消息时更改代码以接收消息。

# c# - 不使用 lambda 表达式时的 LINQ 多重排序

> ID：14003004
> 
> 赞同：5
> 
> 时间：2012-12-22T12:53:31.443
> 
> 标签：c#, linq

> **可能重复：**
> [LINQ 中的多个“排序依据”](https://stackoverflow.com/questions/298725/multiple-order-by-in-linq)

我想按某个字段订购一些数据集，然后按其他字段订购。

使用 lambda 表达式这很容易（OrderBy.ThenBy），但是当我有这样的语法时如何做到这一点：

```
 int maxQueries = int.MaxValue;
        // finds the most search for queries
        var ordered = from p in searchLogs
        where !string.IsNullOrEmpty(p.SearchQuery)
        group p by new 
        { 
           SearchQuery = p.SearchQuery
        } 
        into pgroup
        let count = pgroup.Count()
        orderby count descending
        select new 
        { 
            Count = count, 
            SearchQuery = pgroup.Key.SearchQuery
        }; 
```

我似乎找不到在降序关键字之后起作用的方法（比如 orderby count 降序然后 searchquery）..

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T12:56:57.847

在后面加上一个逗号`descending`并指定下一个要排序的东西（可选地添加`descending`）等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:26:26.670

如果您有这样的 Customer 类，只需向**mlorbetske答案添加一些代码：**

```
public class Customer
{
    public string Name;
    public DateTime MemberSince;
} 
```

然后，您可以执行如下排序：

```
var q = from c in Customers
        orderby c.MemberSince.Date descending, c.Name
        select c; 
```

# linux - NFS 对子目录的不同权限

> ID：14003008
> 
> 赞同：2
> 
> 时间：2012-12-22T12:54:49.823
> 
> 标签：linux, ubuntu, nfs

我的 NFS 服务器有以下 /etc/exports 配置。

```
/root/share *(rw,fsid=0,no_root_squash)
/root/share/music anne(rw,no_root_squash) alex(rw,no_root_squash)
/root/share/video anne(rw,no_root_squash) alex(ro,no_root_squash) 
```

我希望 anne 对这两个目录都有 rw 访问权限。我希望亚历克斯只有 ro 访问 /root/share/video。我当前配置的问题是它们都具有 rw 访问权限。

如果我将第一行更改为

```
/root/share *(ro,fsid=0,no_root_squash) 
```

它会覆盖所有其他行并使所有目录为只读。

如何使第一行仅在 /root/share 上生效？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:18:47.880

您对什么构成导出的文件系统感到*非常困惑。*`/etc/exports`不包含访问控制列表 - 不是真的。它包含一个*独立*文件系统的列表以及它们应该如何导出。

每个条目彼此完全分开，并且导出名称匹配是精确的，而不是递归的 - 如果`alex`挂载，则`/root/share`只会使用第一个条目。同样，`alex`不能`/root/share/misc`直接挂载，因为它不是导出目录。

# android - Android 虚拟设备管理器：无法创建 AVD

> ID：14003009
> 
> 赞同：5
> 
> 时间：2012-12-22T12:55:01.760
> 
> 标签：android, eclipse, avd

当我尝试在 AVD 管理器中创建 AVD 时，我无法将“确定”按钮变为灰色。

我的问题听起来类似于[AVD Manager - Cannot Create Android Virtual Device](https://stackoverflow.com/questions/13959128/avd-manager-cannot-create-android-virtual-device)但遗憾的是解决方案不一样，或者它已经修复了。我检查了此处提供的答案，并且我已经安装了`ARM EABI v7a System Image`.

从我目前阅读的内容来看，我怀疑问题是我的 CPU/ABI 下拉列表是空的。

不幸的是，我还没有想出如何解决这个问题。

更新：我发现我可以通过选择一种预设电话类型来填充 CPU/ABI 下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:21:19.453

如果我在“设备”下拉列表中选择其中一个预设选项，则所有其他字段都会自动填充。可以使用 AVD 管理器的设备定义选项卡创建新的设备类型。

# excel - 从主表中删除唯一实例

> ID：14003016
> 
> 赞同：-1
> 
> 时间：2012-12-22T12:55:42.680
> 
> 标签：excel, vba

我有一个 3 张纸的 excel 工作簿。这些工作表都包含名称列表，所有列表在某些点重叠，因为它们来自不同的来源。

我试图使工作表 1 成为唯一列表，即。a 以便它只包含 sheet2 和 sheet3 中不存在的名称。

我被指出使用数据>删除重复项的方向，但这不适用于跨工作表，有没有办法使用vba宏来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:21:18.167

你可以只在表格的一侧有几列用于`Sheet 1`表格`VLOOKUP`2 和 3 - 如果找到匹配项，则它应该返回 1，否则返回 0。
然后一个 excel 例程将只扫描这两列是否为 1 - 如果它找到一个然后删除该行。

这是我正在谈论的公式的示例：

![在此处输入图像描述](../Images/4c482ff20c7378646b6c5a0b9d43acc5.png)

假设`column D`将只是 和 的`B`总和`C`。

然后宏可以在 D 列中运行，以查找任何值`>0`

从循环中对集合进行操作并不是真正的最佳实践，而是像下面这样循环遍历删除行的单元格：

```
Option Explicit

Sub deleteRows()

Dim i As Integer
i = 2
Do
    If Cells(i, 4) > 0 Then
        Cells(i, 4).EntireRow.Delete xlUp
    Else
        i = i + 1
    End If
Loop Until IsEmpty(Cells(i, 4)) = True

End Sub 
```

`sheet 2`另一种方法是将所有名称`sheet 3`从`array`. 然后返回`sheet 1`并为每个名称运行数组测试，如果它等于任何值，并且它确实删除了整个行。所以要使用数组，它会像下面这样；这假设每个列表都在`column A`并开始于`row 2`...

```
Sub Macro1()

    Dim names() As String
    Dim i As Integer
    i = 1

    'add names from sheet 2 into the array
    Do
        ReDim Preserve names(i)
        names(i) = ThisWorkbook.Worksheets("Sheet2").Cells(i + 1, 1)
        i = i + 1
    Loop Until IsEmpty(ThisWorkbook.Worksheets("Sheet2").Cells(i + 1, 1)) = True

    'add names from sheet 3 into the array
    Do
        ReDim Preserve names(i)
        names(i) = ThisWorkbook.Worksheets("Sheet3").Cells(i + 1, 1)
        i = i + 1
    Loop Until IsEmpty(ThisWorkbook.Worksheets("Sheet3").Cells(i + 1, 1)) = True

    'use the names array to test each row in sheet 1
    Dim j As Integer
    j = 2
    Do

        Dim deleteOccured As Boolean
        deleteOccured = False

        Dim x
        For Each x In names
            If x = Cells(j, 1) Then
                Cells(j, 1).EntireRow.Delete xlUp
                deleteOccured = True
            End If
        Next x

        If deleteOccured = False Then
            j = j + 1
        End If
        deleteOccured = False

    Loop Until IsEmpty(Cells(j, 1)) = True

End Sub 
```

**警告** *我需要强调这些循环并不完美：任何编码的一般最佳实践是，在从该循环内对同一数组执行操作时，您永远不应该循环遍历数组.....我希望有人会帮助我解决这个问题。*

# uitableview - 在 iOS5+ 中为静态表格视图使用单个故事板视图，而不是为整个应用程序使用故事板？

> ID：14003019
> 
> 赞同：0
> 
> 时间：2012-12-22T12:57:10.060
> 
> 标签：uitableview, ios5, uistoryboard

最近，我在为我的整个应用程序不使用故事板的情况下寻找一种有用的静态表视图方法。我找到了这个[答案](https://stackoverflow.com/a/11041693/66414)：

> 静态表格视图单元仅在使用情节提要时可用。但是，如果您没有在整个 UI 中使用故事板，您仍然可以将它们用于单个屏幕而不是字符串集合。
> 
> 为此，您可以创建一个带有单个视图控制器的 UIStoryboard 文件，该文件的文件所有者设置为您的自定义视图控制器子类。将 VC 的标识符设置为某个值。当你想要显示它时，获取故事板，然后通过从故事板创建 VC 来实例化视图控制器子类。

这是一个好方法吗？[还是以iOS4方式](https://stackoverflow.com/a/13728293/66414)实现它更好？

在性能和可维护代码库的情况下应该首选什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:12:17.347

在 Storyboard 中为静态页面维护代码库非常容易。

# jquery - jQuery - 随机化框并在窗口加载时对其进行动画处理

> ID：14003021
> 
> 赞同：3
> 
> 时间：2012-12-22T12:57:15.273
> 
> 标签：jquery, random, jquery-animate

下图是我正在尝试构建的内容： ![随机框](../Images/a8d3fd9adbda6bd9a3c2deb4e2ca12d1.png)

想法是在整个页面加载之前隐藏所有框。然后他们应该在浏览器视口周围设置随机位置，然后需要对它们（框）进行动画处理以移动到适当的位置。

盒子在 CSS 中具有绝对位置，我的想法是当 windows 加载时将初始位置放入变量中，然后随机化盒子的位置，最后将其移动到起始位置。希望我很清楚:)

**这是我当前的设置：http: [//jsfiddle.net/HgMB4/](http://jsfiddle.net/HgMB4/)**

您会注意到我在窗口加载时缺少代码，因为我不确定如何将框设置为初始位置。

```
$(window).load(function(){
    //Huh! What to write here to animate boxes to their initial positions set by CSS?
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:11:11.967

尝试这个

```
 $(document).ready(function(){
      var h = $(window).height();
      var w = $(window).width();            
      $('#intro .box').each(function(){
            var originalOffset = $(this).position(),
            $this = $(this),
            tLeft = w-Math.floor(Math.random()*900),
            tTop  = h-Math.floor(Math.random()*900);

           $(this).animate({"left": tLeft , "top": tTop},5000,function(){
                           $this.animate({
                               "left": originalOffset.left, 
                               "top": originalOffset.top
                           },5000);

                        });        
    });
});
​ 
```

这会将盒子动画到随机位置，然后将它们移回原来的位置。

这是工作演示[http://jsfiddle.net/HgMB4/18](http://jsfiddle.net/HgMB4/18)

如果您只想在盒子移动到初始位置时为它们设置动画，那么试试这个

```
$(document).ready(function(){
    var h = $(window).height();
    var w = $(window).width();            
    $('#intro .box').each(function(){
        var originalOffset = $(this).position(),
            $this = $(this),
           tLeft = w-Math.floor(Math.random()*900),
           tTop  = h-Math.floor(Math.random()*900);

        $(this).css({
            "left": tLeft,
            "top": tTop
        });

        $this.animate({ "left": originalOffset.left, 
                         "top": originalOffset.top
                     },5000);

    });
});
​
​ 
```

这是工作演示[http://jsfiddle.net/HgMB4/22](http://jsfiddle.net/HgMB4/22)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:32:31.203

> **要求**
> 
> *   在整个页面加载之前隐藏框
> *   框设置为浏览器视口周围的随机位置
> *   盒子需要动画到它们的正确位置

您可以存储原始位置，并在随机放置后开始为它们设置动画以返回其起始位置。我还缓存了任何重复的 DOM 引用以加快代码执行速度（很可能不明显，但这是一个好习惯）

### [演示](http://jsfiddle.net/az2SL/)- 随机放置的盒子，然后动画回到它们的正确位置。

[**我已经分离了这两个动作，使用原始代码将框放置在随机位置，但现在还使用jQuery 的数据**](http://api.jquery.com/data/)将原始位置存储在关联数据中，然后用于将它们动画化回其正确位置。

您现在可以通过调用任一方法按需随机化和重新设置框：

```
$(document).ready(function() {
    var h = $(window).height();
    var w = $(window).width();
    var $allBoxes = $('#intro .box');

    placeBoxesRandomly($allBoxes, h, w);

    placeBoxesToDataStorePositions($allBoxes);
});​ 
```

`placeBoxesRandomly`除了现在还将原始起始位置数据与元素相关联之外，它仍然执行它之前所做的操作：

```
function placeBoxesRandomly($boxes, h, w) {
    $boxes.each(function() {
        var $box = $(this);
        var position = $box.position();

        tLeft = w - Math.floor(Math.random() * 900), tTop = h - Math.floor(Math.random() * 900);
        $box.css({
            "left": tLeft,
            "top": tTop
        });
        $box.data("start-position-left", position.left);
        $box.data("start-position-top", position.top);
    });
} 
```

`placeBoxesToDataStorePositions`将框放置到存储在关联数据中的位置。

```
function placeBoxesToDataStorePositions($boxes) {
    $boxes.each(function() {
        var $box = $(this);
        $box.animate({
            "left": $box.data("start-position-left"),
            "top": $box.data("start-position-top")
        }, 3000);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:16:50.467

我认为您正在寻找[jQuery Isotope 插件](http://isotope.metafizzy.co/docs/introduction.html)。这个[Stack-exchange 页面](https://stackexchange.com/sites)是用它的变体实现的

# mysql - mysql查询替代品

> ID：14003024
> 
> 赞同：0
> 
> 时间：2012-12-22T12:57:29.657
> 
> 标签：mysql, sql

我有两张桌子：

**部分**：id，partnumber **替代**：partid，alternativepartid

假设**Part**包含以下记录：

*   1 - 一部分 1 2
*   2 - 第 2 部分
*   3 - 一部分 3
*   4 - 一部分 4
*   5 - 一部分 5

而**Alternative**包含以下记录：

*   1 - 2
*   1 - 3
*   2 - 4
*   3 - 5

我想创建一个查询来获取与给定 ID 相关的所有部分。

就我而言，这意味着如果我查询第 1 部分（id 1），我想找到：

2 和 3 以及 4 和 5，因为 4 是 2 的替代品，而 5 是 3 的替代品。

当我查询 3 时，我想找到：5、1、2 和 4

这有意义吗？

是否可以在一个查询中检索完整的记录集？

谢谢！

# php - 检索不包括已定义节点数组的 Adjacency-List-Model 数据

> ID：14003025
> 
> 赞同：0
> 
> 时间：2012-12-22T12:57:38.780
> 
> 标签：php, sql, recursion, hierarchical-data

数据输入格式为：

```
+-----------+------------------+------+-----+---------+-------+
| Field     | Type             | Null | Key | Default | Extra |
+-----------+------------------+------+-----+---------+-------+
| parent_id | int(10) unsigned | NO   |     | NULL    |       |
| child_id  | int(10) unsigned | NO   |     | NULL    |       |
+-----------+------------------+------+-----+---------+-------+ 
```

此数据使用 DOT 脚本定义用于绘制树形图的关系。DOT 足够复杂，可以处理给定每个节点之间的链接的所有递归，例如

```
1 -> 2;
1 -> 3;
2 -> 4;
4 -> 5;
4 -> 6;
6 -> 7; 
```

会产生：

![在此处输入图像描述](../Images/766d69002361e7992eb3a490a37c7f96.png)

我需要排除由黑名单数组定义的分支，例如，如果黑名单数组是`[4]`DOT 脚本，则需要变为：

```
1 -> 2;
1 -> 3;
2 -> 4; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:57:35.407

如果您的 DBMS 支持递归查询，您可以通过递归查询修剪树（可以放入视图甚至函数中） 此示例适用于 Postgres，但可以适用于 MS 或 Oracle。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE family
        ( parent_id INTEGER NOT NULL
        , child_id INTEGER NOT NULL
        , PRIMARY KEY (parent_id,child_id)
        );

INSERT INTO family(parent_id,child_id) VALUES
 (1 , 2) ,(1 , 3)
,(2 , 4)
,(4 , 5) ,(4 , 6)
,(6 , 7)
        ;

CREATE TABLE black_sheep (id INTEGER NOT NULL PRIMARY KEY);
INSERT INTO black_sheep(id) VALUES(4);
-- INSERT INTO black_sheep(id) VALUES(6);

WITH RECURSIVE tree AS (
        SELECT parent_id AS opa
                , parent_id as dad
                , child_id AS kid
        FROM family f0
        WHERE NOT EXISTS (
                SELECT *
                FROM family nx
                WHERE nx.child_id = f0.parent_id
                )
        UNION ALL
        SELECT tr.opa AS opa
                , f1.parent_id AS dad
                , f1.child_id AS kid
        FROM family f1
        JOIN tree tr ON tr.kid = f1.parent_id
        WHERE NOT EXISTS (
                SELECT *
                FROM black_sheep nx
                WHERE nx. id = f1.parent_id
                )
        )
SELECT * FROM tree; 
```

结果：

```
 opa | dad | kid 
-----+-----+-----
   1 |   1 |   2
   1 |   1 |   3
   1 |   2 |   4
(3 rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:58:15.333

这是我设法想出的最有效的方法。

```
$relations  = $db->query("SELECT `parent_id`, `child_id` FROM `relations` ORDER BY `parent_id` ASC LIMIT 500;")->fetchAll(PDO::FETCH_ASSOC);

function filterALMData ($data, array $exclude) {
    while (count($exclude)) {
        $new_exclude = [];
        foreach ($data as $i => $node) {
            if (in_array($node['parent_id'], $exclude)) {               
                $new_exclude[] = $node['child_id'];
                unset($data[$i]);
            }
        }
        $exclude = $new_exclude;
    }
    return $data;
};

$data = filterALMData($relations, [4]); 
```

**我发布这个来展示我到目前为止所做的尝试。这不是一个有利的答案。**

# android - 如何在 Android.mk（清单文件）中定义 libjnisolfs.so

> ID：14003029
> 
> 赞同：0
> 
> 时间：2012-12-22T12:57:58.203
> 
> 标签：android

我在 Windows 7 中使用 Android 4.2。

添加了 NDK Builder，但我需要在 Android.mk 中定义 libjnisolfs.so。我想知道这是一个静态库还是共享库以及如何在清单中添加它。

我的项目文件夹说（MyApp），我已将此文件添加到 `jni/libjnisolfs.so`

并且也在 `libs/armeabi/libjnisolfs.so`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:23:10.480

如果您已经构建了您的库并且以后不想更改它，您可以从 MyApp 项目根目录中删除 jni 文件夹。在 java 代码中添加库的加载：

```
static
{
    System.loadLibrary("jnisolfs");
} 
```

并声明本机方法，例如：

```
public native String getMyData(); 
```

# java - 为 Spring MVC/AOP 应用程序实现动态菜单

> ID：14003035
> 
> 赞同：4
> 
> 时间：2012-12-22T12:59:08.350
> 
> 标签：java, spring, spring-mvc, aop, spring-aop

我希望为我的 Spring MVC 应用程序实现动态可变菜单（每当添加注释方法或控制器时更新）。

我想要的是引入新的注释（`@RequestMenuMapping`），它将用于`@Controller`bean 及其方法（就像`@RequestMapping`作品一样）。

这是我想要的，`User`上课，制作菜单之类的

```
Users
    Index | List | Signup | Login 
```

使用以下代码：

```
@Controller
@RequestMapping("user")
@RequestMenuMapping("Users")
public class User {

    @RequestMapping("")
    @RequestMenuMapping("Index")
    public String index(/* no model here - just show almost static page (yet with JSP checks for authority)*/) {
        return "user/index.tile";
    }

    @RequestMapping("list")
    @RequestMenuMapping("List")
    public String list(Model model) {

        model.addAttribute("userList",/* get userlist from DAO/Service */);

        return "user/list.tile";
    }

    @RequestMapping("signup")
    @RequestMenuMapping("Signup")
    public String signup(Model model) {

        model.addAttribute("user",/* create new UserModel instance to be populated by user via html form */);

        return "user/signup.tile";
    }

    @RequestMapping("login")
    @RequestMenuMapping("Login")
    public String login(Model model) {

        model.addAttribute("userCreds",/* create new UserCreds instance to be populated via html form with login and pssword*/);

        return "user/login.tile";
    }
} 
```

我认为 Spring AOP 可以帮助我通过`@RequestMenuMapping`注释来切入方法，并通过`@AfterReturning`添加一些代表网站菜单的东西来建模。

但这提出了两个问题：

1.  如果建议方法中缺少实例（如中） ，我如何`Model`在建议方法中获取实例？`@AfterReturning``.index()`
2.  我如何获取所有方法（如在 java 反射中`Method`）和类（如在 java 反射中`Class`）`@RequestMenuMapping`以构建完整的菜单索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:21:52.567

我认为更好的解决方案是使用 bean 后处理器来扫描所有控制器类，`@RequestMenuMapping`然后`HandlerInterceptor`将菜单项添加到每个模型映射中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:30:04.410

Q1： `ModelAndView`对象创建于`org.springframework.web.servlet.DispatcherServlet.doDispatch()`

```
// Actually invoke the handler.
mv = ha.handle(processedRequest, response, mappedHandler.getHandler());

// Do we need view name translation?
if (mv != null && !mv.hasView()) {
    mv.setViewName(getDefaultViewName(request));
} 
```

因此，您可以`handle`在返回或覆盖该方法后拦截该方法。

Q2：据我所知，获取注解方法有两种方式。

1.使用AOP：你可以这样声明一个切入点：

```
@Pointcut("@annotation(you.package.RequestMenuMapping)")
public void requestMenuMappingPountcut() {
} 
```

2.使用反射。

```
Class clazz = Class.forName(classStr);
Method[] methods = clazz.getDeclaredMethods();
for (Method method : methods) {
    if (method.isAnnotationPresent(RequestMapping.class)
            && method.isAnnotationPresent(RequestMenuMapping.class)) {
        // do something
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T14:04:55.810

拦截器演示：

```
@Aspect
@Component
public class InterceptorDemo {

  @Pointcut("@annotation(org.springframework.web.bind.annotation.RequestMapping)")
  public void requestMapping() {
  }
  @Pointcut("@annotation(you.package.RequestMenuMapping)")
  public void requestMenuMapping() {
  }

  @AfterReturning("requestMapping() && equestMenuMapping()")
  public void checkServer(JoinPoint joinPoint,Object returnObj) throws Throwable {
      Object[] args = joinPoint.getArgs();
      Model m = (Model)args[0];
      // use joinPoint get class or methd...
  }
} 
```

如果你想用你自己的来拦截Contoller，你可以写另一个切入点，`ProceedingJoinPoint`对象可以得到你想要的。

# android - 如果用户按下设备的搜索按钮，则在 ActionBar 中显示 SearchWidget

> ID：14003036
> 
> 赞同：8
> 
> 时间：2012-12-22T12:59:14.647
> 
> 标签：android, android-widget, android-searchmanager

[我按照Android API Guide](http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget)中的描述设置了一个 SearchWidget 。它会在操作栏中正确显示放大镜图标，如果我单击它，它会在操作栏中启动搜索小部件（具有深色背景的输入字段）。

但是，如果我按下虚拟设备的搜索按钮，则会启动一个不同的搜索字段：它具有白色背景并且不调用我指定的回调方法。

所以我将它添加到我的 MainActivity 类中：

```
public boolean onSearchRequested() {
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setIconified(!searchView.isIconified());
    return false;
} 
```

搜索小部件的设置与文档中描述的完全相同：

```
SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
searchView.setIconifiedByDefault(false);
searchView.setOnQueryTextListener(new CustomSearchQueryTextListener()); 
```

我的可搜索.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name">
</searchable> 
```

和 AndroidManifest.xml：

```
 <activity
        android:name="MainActivity"
        android:label="@string/app_name"
        android:launchMode="singleTask"
        android:uiOptions="splitActionBarWhenNarrow" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable" android:resource="@xml/searchable"/>
    </activity> 
```

我尝试 setIconfied() 方法的原因是，在 Android API 指南中，它在“切换搜索框可见性的能力”下说：

> “默认情况下，搜索小部件是“图标化”的，这意味着它仅由一个搜索图标（放大镜）表示，并在用户触摸它时展开以显示搜索框。如上所示，您可以显示搜索默认情况下，通过调用 setIconifiedByDefault(false)。您还可以通过调用 setIconified() 来切换搜索小部件的外观。"

我也尝试打电话`startSearch("", false, null, false);`，但这会带来与白色背景相同的搜索字段。

所以我的问题是：如果用户按下设备的搜索按钮，是否可以在操作栏中启动搜索小部件，即执行与单击搜索菜单项完全相同的操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T12:59:14.647

在写这个问题时，我自己想出了解决方案。我仍然决定将它与答案一起发布，因为之前似乎没有在 SO 上提出过这个问题，也许有人遇到了同样的问题和/或提出了更好的解决方案。

您需要做的就是调用`expandActionView()`搜索菜单项，一切都会按预期进行：

```
public boolean onSearchRequested() {
    menu.findItem(R.id.menu_search).expandActionView();
    return true;
} 
```

# php - 检查是否存在关于其值的特定行

> ID：14003041
> 
> 赞同：0
> 
> 时间：2012-12-22T12:59:51.580
> 
> 标签：php, codeigniter

我想检查一个字符串是否存在于特定表的一行中，我没有运气这样做，但我能够了解它是如何`$query->num_rows();`工作的，我认为我必须做类似的事情。

我在下面尝试的代码我认为将检查 d009 值是否存在于 dept_no 行中，如果它们没有值为 d009 的行，那么它应该会产生一条错误消息。

当我运行代码时，它不会回显任何消息

```
$this->db->where('dept_no', 'd009');

$query = $this->db->get('dept_manager');
if($query->num_rows()==0)
{
    echo "true";            
}
else
{
    echo "false";
} 
```

dept_manager 表

```
d009 a
d008 b
d007 c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:11:37.500

我认为`if.. else`应该与您指定的相反

```
if($query->num_rows()==0)
{
    echo "false";            
}
else
{
    echo "true";
} 
```

我的意思是如果 num_rows() 返回零行意味着行中不存在值....

# c++ - Qt编译错误unicode/uloc.h

> ID：14003043
> 
> 赞同：0
> 
> 时间：2012-12-22T13:00:00.193
> 
> 标签：c++, visual-studio-2010, qt, visual-c++

我正在尝试使用以下配置命令编译 Qt x64 库

```
D:\Qt\Qt5.0.0src>configure -prefix %CD%\qtbase -release -opensource -icu -platform win32-msvc2010 -opengl desktop 
```

按照本指南 [http://www.holoborodko.com/pavel/2011/02/01/how-to-compile-qt-4-7-with-visual-studio-2010/#comment-7546](http://www.holoborodko.com/pavel/2011/02/01/how-to-compile-qt-4-7-with-visual-studio-2010/#comment-7546)

然后启动 jom.exe 文件（解压到 D:\Qt\Qt5.0.0src）

```
jom.exe -j7 /P 
```

但我收到以下错误：

```
Generating Code...
qlocale_win.cpp
tools\qstring.cpp(3841) : warning C4309: 'argument' : truncation of constant value
tools\qstring.cpp(3842) : warning C4309: 'argument' : truncation of constant value
qstringbuilder.cpp
Generating Code...
qlocale_icu.cpp
tools\qlocale_icu.cpp(48) : fatal error C1083: Cannot open include file: 'unicode/uloc.h': No such file or directory
qharfbuzz.cpp
Generating Code...
jom: D:\Qt\Qt5.0.0src\qtbase\src\corelib\Makefile.Release [.obj\release_shared\qelapsedtimer_win.obj] Error 2
jom: D:\Qt\Qt5.0.0src\qtbase\src\corelib\Makefile [release] Error 2
jom: D:\Qt\Qt5.0.0src\qtbase\src\Makefile [sub-corelib-make_first] Error 2
jom: D:\Qt\Qt5.0.0src\qtbase\Makefile [sub-src-make_first] Error 2
jom: D:\Qt\Qt5.0.0src\Makefile [module-qtbase-make_first] Error 2 
```

要点是：

```
fatal error C1083: Cannot open include file: 'unicode/uloc.h': No such file or directory 
```

该文件位于“D:\Qt\icu\include\unicode”中，我将 D:\Qt\icu 和 D:\Qt\icu\bin64 添加到 Path 环境变量中。

为什么makefile找不到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:01:19.010

已解决 -> 我之前没有安装过 Windows SDK 7.1

# json - 如何使用 Mule ESB、Mule Studio 读取返回 JSON 对象的 REST 服务并将其存储到 PostgreSQL

> ID：14003046
> 
> 赞同：4
> 
> 时间：2012-12-22T13:00:33.263
> 
> 标签：json, postgresql, mule, mule-studio

所以我有一个基于 REST 的服务，它托管在

```
http://localhost:35798/RestServiceImpl.svc/json/567 
```

如果我查询，我得到的结果是：

```
{"JSONDataResult":"You requested product 567"} 
```

我需要将整个 JSON 数据存储到 PostgreSQL 表中：

```
CREATE TABLE "JsonTable"
(
  "StoreJsonObject" json
) 
```

如果我想解析值字段，即“您请求产品 567”，程序可以工作（这里我使用的是列类型为文本的不同表）：

```
<jdbc:postgresql-data-source name="PostgreSQL_Data_Source" user="username" password="pwd" url="jdbc:postgresql://localhost:5432/TestDB" transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source"/>
<jdbc:connector name="PostgreSQL_Connector" dataSource-ref="PostgreSQL_Data_Source" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database">
    <jdbc:query key="InsertRecord" value="INSERT INTO &quot;AnotherJSonTable&quot;(&quot;StoreJsonObject&quot;) VALUES (#[message.payload])"/>
</jdbc:connector>
<flow name="testRestFlow1" doc:name="testRestFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:8082/index.html"  doc:name="HTTP"/>
    <http:rest-service-component httpMethod="GET" serviceUrl="http://localhost:35798/RestServiceImpl.svc/json/567">
    </http:rest-service-component>
    <json:json-to-object-transformer returnClass="java.util.Map" doc:name="JSON to Object"/>
    <expression-transformer expression="#[message.payload.JSONDataResult]" doc:name="Expression"/>
    <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="InsertRecord" queryTimeout="-1" connector-ref="PostgreSQL_Connector" doc:name="Database"/>
</flow> 
```

但是如何存储整个 JSON 对象（{"JSONDataResult":"You requested product 567"}）。
我需要在“表达式转换器”中更改什么？

如果我做：

```
<jdbc:query key="InsertRecord" value="INSERT INTO &quot;JsonTable&quot;(&quot;StoreJsonObject&quot;) VALUES (#[message.payload])"/>

<expression-transformer expression="#[message.payload]" doc:name="Expression"/> 
```

我收到异常：

```
Root Exception stack trace:
org.postgresql.util.PSQLException: No hstore extension installed.
    at org.postgresql.jdbc2.AbstractJdbc2Statement.setMap(AbstractJdbc2Statement.java:1713)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.setObject(AbstractJdbc2Statement.java:1916)
    at org.postgresql.jdbc3g.AbstractJdbc3gStatement.setObject(AbstractJdbc3gStatement.java:36)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
********************************************************************************

INFO  2012-12-24 15:48:31,945 [[testrest].connector.file.mule.default.receiver.01] org.mule.transport.file.FileMessageReceiver: Lock obtained on file: C:\Users\niladri.biswas\Desktop\input\all_winjs_ui_controls.txt
INFO  2012-12-24 15:48:31,945 [[testrest].testRestFlow1.stage1.02] org.mule.transport.http.components.RestServiceWrapper: Invoking REST service: http://localhost:35798/RestServiceImpl.svc/json/567
ERROR 2012-12-24 15:48:31,992 [[testrest].PostgreSQL_Connector.dispatcher.01] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Failed to route event via endpoint: DefaultOutboundEndpoint{endpointUri=jdbc://InsertRecord, connector=JdbcConnector
{
  name=PostgreSQL_Connector
  lifecycle=start
  this=15e7ea6
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=false
  connected=true
  supportedProtocols=[jdbc]
  serviceOverrides=<none>
}
,  name='endpoint.jdbc.InsertRecord', mep=ONE_WAY, properties={queryTimeout=-1}, transactionConfig=Transaction{factory=null, action=INDIFFERENT, timeout=0}, deleteUnacceptedMessages=false, initialState=started, responseTimeout=10000, endpointEncoding=UTF-8, disableTransportTransformer=false}. Message payload is of type: LinkedHashMap
Code                  : MULE_ERROR--2
-------------------------------------------------------------------------------- 
```

此外，从服务读取后，记录应该只插入一次，而不是多次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T18:31:35.287

由于您要存储整个 JSON，因此无需将其反序列化为对象：我建议您只需将 HTTP 流式负载转换为 a`java.lang.String`并将其按原样插入数据库中。

这会这样做：

```
<jdbc:postgresql-data-source name="PostgreSQL_Data_Source"
    user="username" password="pwd" url="jdbc:postgresql://localhost:5432/TestDB"
    transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source" />

<jdbc:connector name="PostgreSQL_Connector" dataSource-ref="PostgreSQL_Data_Source"
    validateConnections="true" queryTimeout="-1" pollingFrequency="0"
    doc:name="Database">
    <jdbc:query key="InsertRecord"
        value="INSERT INTO &quot;AnotherJSonTable&quot;(&quot;StoreJsonObject&quot;) VALUES (CAST(#[message.payload] AS json))" />
</jdbc:connector>

<flow name="testRestFlow1" doc:name="testRestFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        address="http://localhost:8082/index.html" doc:name="HTTP" />
    <http:rest-service-component httpMethod="GET"
        serviceUrl="http://localhost:35798/RestServiceImpl.svc/json/567" />
    <object-to-string-transformer />
    <jdbc:outbound-endpoint exchange-pattern="one-way"
        queryKey="InsertRecord" queryTimeout="-1" connector-ref="PostgreSQL_Connector"
        doc:name="Database" />
</flow> 
```

# python - 在 Python 中附加到 gzip 文件不起作用

> ID：14003049
> 
> 赞同：1
> 
> 时间：2012-12-22T13:00:50.127
> 
> 标签：python, io, gzip

我有以下功能：

```
def save(msg):
    with gzip.open("ircbot.log.gz", "ab") as f:
        f.write(msg+'\n')
        f.close()
        return "Succesfully logged: "+msg 
```

我想将每个味精添加到 .log 文件中，但它不起作用，只保存第一个味精。

例如在调用这些函数之后：

```
save('first')
save('second')
save('third') 
```

.log 文件仅包含“第一个”。

对于简单的 .txt 文件，它工作正常。Gzip 不支持附加到文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:54:39.987

正如您所发现的，连接 gzip 流以生成可提取的 gzip 文件（即`f.close()`在每条消息之后）*确实有效。*这是因为 gzip 标准要求兼容的解压缩器在解码当前的 gzip 流后查找另一个 gzip 流。但是，假设您的消息相对较短，例如一两行，那么生成的 gzip 文件将更大，而不是比包含消息的简单文本文件小。每条消息将至少具有 18 个字节的 gzip 标头和尾部的开销，并且数据可能会扩展 5 个字节，每条消息增加 23 个字节。

在每条消息之后不使用的替代方案`f.close()`将导致数据的真正压缩，方法是编写单个 gzip 流，其中后期消息的压缩可以利用早期消息的冗余。但是，这样做的缺点是在您*最终*调用`f.close()`. 此外，消息根本不会被写入（如果它们很短，则再次写入），直到积累了足够的数据来压缩一个块。然后会一串串的写入，文件会再次等待更多的积累。

有一个解决方案，但我认为 python 没有足够完整的 zlib 接口来允许它。您可以查看 C 语言中的示例[gzlog.h](https://github.com/madler/zlib/blob/master/examples/gzlog.h)和[gzlog.c](https://github.com/madler/zlib/blob/master/examples/gzlog.c)，它们立即将日志条目写入 gzip 文件，并始终使日志文件处于完整且正确的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:53:36.773

对我有用，没有额外的`f.close()`，Linux，python-2.7，都有由这个脚本创建的 gzip 文件和由常规 gzip 命令创建的 gzip 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:35:10.683

好的，我想通了。

我使用 Altap Salmander 提取 .gz 并查看日志文件（F3 功能）。

当我用 7zip 在经典资源管理器中提取 gz 文件时，所有的味精都在那里。

# android - 如何以字符串形式从sqlite中检索图像并在android的列表视图中显示

> ID：14003051
> 
> 赞同：0
> 
> 时间：2012-12-22T13:01:51.300
> 
> 标签：android, sqlite

在我的项目中，我通过 json 解析器从服务器获取数据并存储在 sqlite 数据库中。在数据库中，图像存储为字节数组。当我们在游标中从数据库中获取数据时，我们发现所有文本都正确显示在文本视图中，但未显示图像，并且错误无法将 blob 转换为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:16:47.607

就像 WebnetMobile.com 所说的那样，你会将它保存在数据库中吗？将其存储在目录中并从那里进行管理会更快，但是如果您真的需要在数据库中使用它，您尝试过[吗](https://stackoverflow.com/questions/1039461/how-to-display-blob-value-using-xabc-binary-string-literal-syntax)？

我希望这可以帮助你。

# java - struts2 if 测试 arraylist 中的属性值

> ID：14003053
> 
> 赞同：0
> 
> 时间：2012-12-22T13:02:27.727
> 
> 标签：java, struts2

类 CategoryAction：

```
public class CategoryAction extends ActionSupport {
    private String catName;
    private String dispName;
    // getter and setter 
} 
```

GAction 类：

```
public class GAction extends ActionSupport {
    private String category; // contains a
    private ArrayList<CategoryAction> catList; // contains a b c d e
    //getter and setter 
} 
```

在我的 jsp 页面中，我想检查当前类别。

在 JSP 页面中调用 GAction 后，我输入了以下代码，但如果部分未执行：

```
<s:iterator var="cat" value="catList">
  <s:if test="%{#category.equealIgenoreCase(#catName)}">
    if part       
  </s:if>
  <s:else>
    else part  
  </s:else> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:38:44.523

类别不应该是一个动作；一个 Action 应该处理表示层，而 Category 是一个包含数据的简单 POJO。

equealIgenoreCase 有两个语法错误...

修改如下：

对象类别

```
public class Category {

private String catName;
private String dispName;
/getter and setter 

} 
```

动作类

```
public class GAction extends ActionSupport {

    private String category; //contains a
    private ArrayList<Category> catList;//contains a b c d e
    //getter and setter 

} 
```

JSP

```
<s:iterator value="catList" var="cat">
 <s:if test="category.equalsIgnoreCase(catName)">
       if part       
 </s:if>
 <s:else>
       else part  
</s:else> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:01:20.303

@Andrea Ligios 是正确的，您应该更改模态，他的方法也正确。

```
<s:iterator var="catVar" value="%{catlist}">
    <s:if test ="%{category.equalsIgnoreCase(#catVar.categoryName)}">
       if condition <br/>
    </s:if>
    <s:else>
       else condition <br/>
    </s:else>
</s:iterator> 
```

% 是访问存储在值堆栈中的值的方法

# regex - 匹配 foo 或 bar vim 正则表达式

> ID：14003055
> 
> 赞同：13
> 
> 时间：2012-12-22T13:02:31.167
> 
> 标签：regex, vim

是否有一种在`vim`搜索和替换中一次匹配多个单词的方法？就像是：

```
:%s/foo|bar//g 
```

搜索`foo`或`bar`替换为空（这搜索模式`foo|bar`，这不是我想要的）。我可以通过这种方式搜索多个*字符*：

```
abcdef
:%s/[ace]//g 
```

结果是：

```
bdf 
```

我可以用文字做同样的事情吗？

我很清楚我可以这样做：

```
:%s/foo//g
:%s/bar//g 
```

如果存在这样的事情，我正在寻找一种单线解决方案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-22T13:03:29.763

在 vim 正则表达式中，交替运算符需要用反斜杠转义：use `foo\|bar`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-22T19:28:34.527

`|`您可以使用 vim 的[“非常神奇”模式](http://vim.wikia.com/wiki/Simplifying_regular_expressions_using_magic_and_no-magic)，而不是使用反斜杠转义`\v`：

```
:%s/\vfoo|bar//g 
```

# c++ - 带有模板的未解决的外部

> ID：14003057
> 
> 赞同：0
> 
> 时间：2012-12-22T13:02:52.220
> 
> 标签：c++, templates, visual-studio-2012

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)

我正在尝试使用模板实现一个通用队列。

我的标题中有以下代码：

```
template<class Item>
class Queue{
protected:
    struct linked_list;
    int size;
public:
    Queue();
    Queue(Item T);
}; 
```

我有一个 Queue.cpp：

```
template<class Item>
Queue<Item>::Queue()
{

}
template<class Item>
Queue<Item>::Queue(Item T)
{

} 
```

但是每次编译时，由于未解决的外部问题，我都会收到链接器错误。

我重新安装了 VS2012 两次（认为链接器已损坏），但问题不断出现。

我读到在使用模板时函数实现在单独的文件中存在一些问题，但除了将实现放在标题中之外，我没有看到任何解决方案。

有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:04:23.470

模板不支持`a definition is provided elsewhere and creates a reference (for the linker to resolve) to that definition`

您需要使用`the inclusion model`，将所有 Queue.cpp 定义放入 Queue.h 文件中。或者在 Queue.h 的底部

```
#include "Queue.cpp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:10:24.223

模板声明必须完整地包含在您的源代码中。如果要拆分它们，我更喜欢使用的一种方法是：

在 queue.h 的底部：

```
#define QUEUE_H_IMPL
#include "queue_impl.h" 
```

并在 queue_impl.h

```
//include guard of your choice, eg:
#pragma once

#ifndef QUEUE_H_IMPL
#error Do not include queue_impl.h directly. Include queue.h instead.
#endif

//optional (beacuse I dont like keeping superfluous macro defs)
#undef QUEUE_H_IMPL

//code which was in queue.cpp goes here 
```

实际上现在在我看过它之后，如果你`#undef QUEUE_H_IMPL`.

# jaxb - 来自 MOXy 的 XML 架构中的错误

> ID：14003060
> 
> 赞同：2
> 
> 时间：2012-12-22T13:03:00.277
> 
> 标签：jaxb, eclipselink, moxy

我正在尝试使用 JAXBContext.generateSchema(..) 生成 XML 模式。

我的班级看起来像这样：

```
@XmlRootElement
@XmlAccessorType( XmlAccessType.FIELD )
class Person {
  @XmlAttribute
  public String name;

  @XmlAnyAttribute
  public Map<QName, String> otherAttributes = new HashMap<QName, String>();
} 
```

当我使用 RI 生成架构时，它工作正常。

```
<xsd:attribute name="name" type="xsd:string" />
<xsd:anyAttribute processContents="skip" namespace="##other" /> 
```

但是当使用 MOXy 的生成器时，它会切换顺序：

```
<xsd:anyAttribute processContents="skip" namespace="##other" />
<xsd:attribute name="name" type="xsd:string" /> 
```

（这在 XML 模式中是不允许的）

有解决办法吗？我正在使用 MOXy 2.4.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:07:17.457

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我为此问题输入了以下错误，您可以使用它来跟踪我们在此问题上的进展。

*   [http://bugs.eclipse.org/397126](http://bugs.eclipse.org/397126)

一旦每个人都从假期回来，我们应该在新年的早些时候进行修复。

**更新**

此问题已在 EclipseLink 2.4.2 和 2.5.0 流中得到修复。从 2012 年 12 月 28 日开始，这些标签的任何夜间构建都将包含此修复程序，可从以下链接获得：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

# php - 将本地主机上的 PHP 脚本连接到在线 sql Server 数据库

> ID：14003068
> 
> 赞同：0
> 
> 时间：2012-12-22T13:04:05.470
> 
> 标签：php, sql-server

当这两个都位于我的本地计算机上时，我已经将 php 与 sql server 连接起来。

但是当我的 PHP 脚本在本地计算机上运行时，我需要连接 SQL Server Web 数据库。

我已经添加了扩展`php_pdo_sqlsrv_54_ts.dll`并`php_sqlsrv_54_ts.dll`在我的 PHP 扩展中。

为了与我的本地主机上的 SQL Server 连接，我还需要一个我已经安装的 SQL Server Native Client 驱动程序，但这对我与 SQL Server Web 数据库的连接是否也有任何关系？

当我运行 PHP 脚本时，脚本需要一些时间来执行，有时会出现错误：

> SQLSTATE[08001]：[Microsoft][SQL Server Native Client 11.0]TCP Provider：连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。1

我的连接脚本是

```
 $serverName = "***.db.*****.********.com";
    try{
      $conn = new PDO("sqlsrv:server=$serverName;Database=*****",   "***UserName***", "***PWD***");
      $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
    }
    catch(Exception $e){ 
      die( print_r( $e->getMessage() ) ); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:11:45.753

$conn = new PDO("sqlsrv:server=$serverName;Database= ***** ", " ***DBNAME*** ", " ***PWD*** "); 而不是 DB name ，这里 username 应该来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:14:27.110

1.  在 $servername 上尝试提供服务器的 IP 地址。
2.  `ping serverip`通过发送类似示例的 ping 请求来确定服务器是否可访问`ping 192.168.100.12`

也试试这个..

```
 try {
    $hostname = "host";            //host
    $dbname = "dbname";            //db name
    $username = "user";            // username like 'sa'
    $pw = "pass";                // password for the user

    $dbh = new PDO ("mssql:host=$hostname;dbname=$dbname","$username","$pw");
    } catch (PDOException $e) {
    echo "Failed to get DB handle: " . $e->getMessage() . "\n";
    exit;
    }
    $stmt = $dbh->prepare("SELECT * FROM table");
    $stmt->execute();
    while ($row = $stmt->fetch()) {
    print_r($row);
    }
    unset($dbh); unset($stmt); 
```

您可以在这里找到更多示例[http://php.net/manual/en/ref.pdo-dblib.php](http://php.net/manual/en/ref.pdo-dblib.php)

# c# - Windows Phone 中 PivotItems 的垃圾收集

> ID：14003073
> 
> 赞同：1
> 
> 时间：2012-12-22T13:04:46.887
> 
> 标签：c#, windows-phone-7, garbage-collection, pivotitem

我有一个带有 Pivot (mainPivot) 和几个 PivotItems 的页面。如果在某个时候我这样做

```
mainPivot.Items.Remove(pivotItem1); 
```

或者

```
mainPivot.Items.Clear(); 
```

这是否意味着 mainPivot 的子节点将被 GC 收集，并且当

```
mainPivot.Items.Add(pivotItem1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:02:01.397

只要您保留对 的引用`pivotItem1`，它就不会被垃圾收集。而且您仍然有参考，否则您将无法将其添加回`mainPivot`.

# java - 如何使用私有 Java 类进行有效的 API 设计

> ID：14003074
> 
> 赞同：4
> 
> 时间：2012-12-22T13:05:06.700
> 
> 标签：java, api, encapsulation, information-hiding

我正在编写我的第一个“API jar”，它将成为开源库并由（可能）其他开发人员使用。我已经阅读了[Joshua Block 关于有效 API 设计的论文](http://lcsd05.cs.tamu.edu/slides/keynote.pdf)，他谈到的其中一件事——否则我永远不会想到——是他的*最小化访问*和*最大化信息隐藏*的概念。基本上，您只希望您的 API 开发人员能够访问他们将使用的 Java 对象，并且您不希望您的 API 开发人员能够访问您的库的任何“胆量”。

在我作为 Java 开发人员的几年中，除了`public`. 此外，我也从未使用过嵌套类。所以我坐在这里想知道*如何在我的 Java API 中实现这种“信息隐藏”最佳实践？*我认为私有的，可能是嵌套的，类是答案。但是从哪里开始呢？

*   每个`.java`源文件至少需要 1 个`public`类才能编译。因此，对我来说，要创建一个类`private`（并且非嵌套），我需要“将它与一个类捆绑在一起。对我来说，这*只有*在/类密切相关时才`public`有意义。但是如果我的 API 有一部分只是由与任何其他类似物无关的类（用于可访问性最小化目的）组成？*`public``private``private``public`*
**   你什么时候让一个`private`类嵌套，什么时候让它不嵌套？还是只是偏好问题？*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:11:08.607

包私有的类（即没有任何可见性修饰符）仅对同一包的类可见。这是一种让 API 的其他几个类可见的方法，但外部世界不可见。

嵌套的私有类对于创建非公共类也很有用，而且它们的范围更窄：它们只对封闭类可见。

我建议查看[Guava 的源代码](https://code.google.com/p/guava-libraries/source/browse/#git/guava)，以了解出色的 API 设计。您会看到各种将内部隐藏到外部的技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T15:57:12.393

Personally, I don't believe in `private`. I use `protected` instead whenever feasible to allow for some of the major benefits of OO design.

Basically the 'information hiding' principle is not bad as a guideline. However, in practice one should not blindly follow it in all cases. - For the pure principle you would, as others suggested, need to define a set of interfaces as public and hide all the rest of your lib away with package-private classes, factory methods, and the like. Given that Java's package-private visibility has some issues that render it somewhat useless in many cases (- classes within your lib will want to cooperate across packages -) this in turn seems to prevent such an approach.

Besides, there are always at least two types of users of an API: the basic users, who will use the objects and methods you provide, and the users with complex requirements, who will want to modify the API's behavior (at least) by inheritance, which a lot of 'hidden' stuff will successfully prevent.

Don't be shy to make those things `public` for which it *may* make sense, make things `protected` which are not really needed to be `public`, and make only those things `private` which may cause harm if directly accessed by anything but their directly related code.

Another note: The hiding-principle has as a major purpose to simplify the use of your code by others and to imply and encourage the correct use thereof. But remember that *documentation* is another important means to achieve this; and documentation will be needed for a library anyway. - If you have 100 public methods and your docs state which 10 of those are needed for a use case the user of your lib will probably get along with that just as well as he would if only those 10 were visible to him.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T16:37:02.030

我相信私下。我从事框架类工作已经有一段时间了，Joshua 正确地告诉你应该尽可能地隐藏。其背后的原因是您暴露的所有内容都将被使用。而且一旦使用，你就无法在不破坏客户端代码的情况下更改它。客户可以访问所有非私有的内容！基本上你应该使用包私有类，只允许在有用的地方继承，并且只公开那些对于使你的库有用的绝对必要的类。在扩展功能时，“[接口隔离原则](https://en.wikipedia.org/wiki/Interface_segregation_principle)”是您的朋友。*

# object - Mootools 父母对象变更

> ID：14003076
> 
> 赞同：0
> 
> 时间：2012-12-22T13:05:21.320
> 
> 标签：object, background, mootools, parents

我正在寻找从父对象更改 CSS 的解决方案。

我有这个：

```
<div class="layout">
   <div class="over"></div>
</div>
<div class="layout">
   <div class="over"></div>
</div>
<div class="layout">
   <div class="over"></div>
</div>
<div class="layout">
   <div class="over"></div>
</div>
<div class="layout">
   <div class="over"></div>
</div> 
```

我的网站上有 6 个这样的对象。所以我想要的是当我`mousenter`在 DIV 上使用事件时，`over` 我想要更改`backgroundcolor`父级的“布局”而不是每个布局。

如果我也可以使用`morph()`就好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:01:05.747

要获取父元素，请使用 getParent 函数。如果您希望将此绑定到不同的东西，您可以将函数更改为`function(e)`然后使用`e.target`.

如果动画正在运行，则取消动画的原因是为了在稍微快速移动鼠标时消除一些丑陋。您可以尝试将其删除。

```
$$('.over')
.addEvent('mouseenter', function(){
    var parent = this.getParent();
    var tween = parent.get('tween');
    if (tween && tween.isRunning()){
        tween.cancel();
    }
    parent.setStyle('background-color', '#f00');
})
.addEvent('mouseleave', function(){
    this.getParent().tween('background-color', '#fff');
}); 
```

这是一个带有工作示例的小提琴：http: [//jsfiddle.net/vxQXU/1/](http://jsfiddle.net/vxQXU/1/)

# php - pdo 选择和插入语句

> ID：14003077
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:05:24.113
> 
> 标签：php, sql

我几乎没有成功将我的经典 db_connection 转换为 pdo，而且似乎 - 它可以工作......
但是有两个特定的 select 和 insert 语句有问题：

```
 $comments = array();
    $result = mysql_query("SELECT * FROM comments WHERE page='$_SESSION[page]' ORDER BY dt ASC");
    while($row = mysql_fetch_assoc($result))
    {
        $comments[] = new Comment($row);
    }
    foreach($comments as $c){
        echo $c->markup();
    } 
```

和

```
mysql_query("INSERT INTO comments(page,name,url,email,body)VALUES (
'{$_SESSION['page']}',
'".$arr['name']."',
'".$arr['url']."',
'".$arr['email']."',
'".$arr['body']."'
)");

$arr['dt'] = date('r',time());
$arr['id'] = mysql_insert_id(); 
```

这一切都按原样工作，但作为 pdo - 我尝试了许多“示例” - 没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:16:17.893

这里：

```
$comments = array();
$pdo = new PDO("mysql:host=localhost;dbname=db;",$username,$password);
$pdo->prepare("SELECT * FROM comments WHERE page='$_SESSION[page]' ORDER BY dt ASC");
$pdo->execute();
while($result = $pdo->fetch()) {
  array_push($comments,$result);
} 
```

另一个现在应该是你转换自己的蛋糕。

# c++ - 通过 SWIG 从 C++ 调用 Go 回调函数

> ID：14003078
> 
> 赞同：5
> 
> 时间：2012-12-22T13:05:30.523
> 
> 标签：c++, interop, go, swig, language-interoperability

我正在尝试调用 C++ 函数：

```
void TestFunc(void(*f)(void)) { f(); } 
```

来自 Go 代码。

我真的希望我只是将一个 Go 函数传递给该函数。我知道我可以将它包装到一个类中，并使用 %feature("director") 解决它，但这不是我的最佳解决方案。

从我在[此页面](http://golang.org/doc/install/gccgo)中看到的内容来看，Go 中的函数指针应该与 C++ 中的相同，因此我尝试了以下 .swig 文件：

```
%{
#include "test.h"
%}

%typemap(gotype) FUNC* "func()"
%typemap(in) FUNC* {
  $1 = (void(*)(void))$input;
}
%apply FUNC* { void(*)(void) };

%include "test.h" 
```

一开始我很惊讶它起作用了，但后来注意到它并不总是起作用:(。

例如，在这个 Go 代码中，它按预期工作：

```
import "fmt"
import "test_wrap"

func main() {
  b := false
  test_wrap.TestFunc(func() { b = true })
  fmt.Println(b)  // This actually DOES print "true"!
} 
```

但在其他情况下，它不起作用。例如，这里：

```
import "fmt"
import "test_wrap"

func main() {
  test_wrap.TestFunc(func() { fmt.Println("SUCCESS") })
  fmt.Println("Done")
} 
```

我实际上得到：

```
SUCCESS
SIGILL: illegal instruction
PC=0x4c20005d000

goroutine 1 [syscall]:
test_wrap._swig_wrap_TestFunc(0x400cb0, 0x400c2a)
        base_go_test__wrap_gc.c:33 +0x32
test_wrap.TestFunc(0x400cb0, 0x2)
        base_go_test__wrap.go:37 +0x25
main.main()
        test.go:8 +0x2a

goroutine 2 [syscall]:
created by runtime.main
        go/gc/src/pkg/runtime/proc.c:225
rax     0x0
rbx     0x0
rcx     0x0
rdx     0x8
rdi     0x4c200073050
rsi     0x4c20004c0f0
rbp     0x0
rsp     0x4c20004c100
r8      0x2
r9      0x4b0ae0
r10     0x4f5620
r11     0x4dbb88
r12     0x4f5530
r13     0x7fad5977f9c0
r14     0x0
r15     0x3
rip     0x4c20005d000
rflags  0x10202
cs      0x33
fs      0x0
gs      0x0 
```

请注意它确实打印了“SUCCESS”，这意味着函数 DID 运行了，即使我将更复杂（和长）的代码放入这个函数中，它确实可以完美执行，但它没有回来:(。

请让我知道您的想法，以及如何解决这个问题。我不介意在 C++ 部分添加一些代码，但我真的希望 Go 部分看起来“干净”。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:02:52.353

成功！我有一个可行的解决方案：

我所做的想法是用“directors”包装回调，并将 Go 函数指针“返回”回 Go，因此它可以在该上下文中运行。

下面的解决方案并不完美，但它足以满足我的需求，并且从这里开始变得完美非常容易。

C++ 文件：

```
class Callback {
 public:
  virtual void Run(void(*f)(void)) = 0;
  virtual ~Callback() {}
};

Callback* GlobalCallback;

void TestFunc(void(*f)(void)) {
  GlobalCallback->Run(f);
} 
```

我添加了一个回调类，它将在 Go 中“扩展”（使用 Swig 导向器），并且我将拥有这个扩展类的全局实例。因此，调用该实例的 Run() 将调用一个 Go 函数，该函数将接收一个函数指针。

请注意，我的 TestFunc 现在不仅仅是运行 f()，而是通过 GlobalCallback 运行它。通过添加另一个返回指向运行 GlobalCallback->Run(f) 的函数的指针的函数，并将此指针传递给函数而不是 *f，这很容易解决。

我的痛饮文件：

```
%{
#include "test.h"
%}

%module(directors="1") Callback
%feature("director");

%typemap(gotype) FUNC* "func()"
%typemap(in) FUNC* {
  $1 = (void(*)(void))$input;
}
%apply FUNC* { void(*)(void) };

%include "test.h"

%insert(go_wrapper) %{
type go_callback struct { }

func (c* go_callback) Run(f func()) {
  f()
}

func init() {
  SetGlobalCallback(NewDirectorCallback(&go_callback{}))                                                                                                     
}
%} 
```

请注意，我添加了一个 init() 函数，该函数使用运行指针的 Go 函数设置 GlobalCallback。

就是这样，Go 代码保持原样，并且可以正常工作:)

# oracle - Oracle 11g 和以毫秒精度存储时间

> ID：14003082
> 
> 赞同：1
> 
> 时间：2012-12-22T13:05:58.343
> 
> 标签：oracle, oracle11g

我想创建一个包含有关 moto GP 统计数据的数据库，并且我想存储最快圈数等的时间。我需要存储像分钟：秒：毫秒这样的时间......我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:10:55.220

你可以使用一个`TIMESTAMP`类型。它以高达纳秒的精度存储时间（默认为微秒）。

请参阅[Oracle 内置数据类型](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements001.htm#i54330)。

选择一个虚拟的年份和日期：

```
select to_timestamp('00/01/01 01:02:03.123456', 
                    'YY/MM/DD HH24:MI:SS.FF') from dual; 
```

或者你也可以使用一个`INTERVAL`类型：

```
SQL> create table foo (a interval day to second);       
Table created.
SQL> insert into foo values (to_dsinterval('0 01:02:03.123456'));
1 row created.
SQL> select * from foo;

A
---------------------------------------------------------------------------
+00 01:02:03.123456 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:37:15.450

使用时间戳数据类型（如果需要，您可以指定准确性）。如果要存储来自不同时区的值，请改用带时区的时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:13:46.097

```
 1\. Oracle does not store millisecond directly but it does store seconds
    with a fraction component which can help you to get the
    milliseconds.
 2\. Not only millisecond rather you can get to microseconds too! In fact
    you can specify the number of digits that oracle stores in the   
    fractional part of seconds i.e. the precision part for `TIMESTAMP`  
    datatype. The default is platform dependant, on UNIX it defaults to
    6    and on windows it defaults to 3\. The valid range is [0-9]. 
```

参考：[DBA_BLOG](http://dbathoughts.blogspot.in/2008/05/storing-milliseconds-in-oracle.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-06T13:17:56.617

我根本不会使用时间戳来存储数据。如果分、秒、毫秒的信息在存储之前是可用的，我宁愿创建一个单独的表，其中包含三个数字字段来保存信息；原因，还有一个代理键:-)

# debugging - Mathematica 调试

> ID：14003091
> 
> 赞同：0
> 
> 时间：2012-12-22T13:08:46.647
> 
> 标签：debugging, wolfram-mathematica

只是好奇 Mathematica 用户在遇到运行时错误时如何调试他们的代码。我觉得 Mathematica 是如此强大，以至于大多数编程任务都可以用它来代替，但是当它出现错误时，调试的不便就抵消了它的优势。

我知道 Workbench，但是启动起来很麻烦，而且它基于 Java 的 IDE 编译起来有点慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-06T22:56:37.883

echo 功能现在已内置，在跟踪错误发生的位置时非常有帮助。

```
"Echo[x_]:=Module[{},Print[x];x]" 
```

举例说明：在取模 4 后，找到列表中等于 y 的元素数

```
input = Range@20;
target = 3;

foobar[list_, y_] := Length@Select[list, y == Mod[4, #] &]
foobar[input, target] 
```

尽管有效范围内有多个数字，但仍返回 0。使用 echo 修改 foobar 以进行调试：

```
foobar[list_, y_] := Length@Select[list, y == Echo[Mod[4, #]] &] 
```

将很快揭示 Mod 的论点与预期效果相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:06:56.437

[Trace](http://reference.wolfram.com/mathematica/ref/Trace.html)和[TracePrint](http://reference.wolfram.com/mathematica/ref/TracePrint.html)都可以很方便。我还喜欢定义“任何参数”定义来警告我未定义的调用，例如

```
f[0] := 1
f[1] := 1
f[n_Integer?Positive] := (f[n]=f[n-1]+f[n-2])
f[wrong___] := ( Print["f had wrong arguments: ",{wrong}]; $Failed) 
```

在 Workbench 中，这些错误定义是断点的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T17:49:08.843

使用特定参数进行跟踪（此函数传递了什么等）是一种有用的工具。但是，最通用的方法是立即评估工作笔记本中的代码片段，以找到您未预料到或不符合包装代码所需的形状的事情发生的第一个位置等。它也有帮助如果您从一开始就编写模块化代码。

# ios - 获取 glviews 图像错误？

> ID：14003093
> 
> 赞同：0
> 
> 时间：2012-12-22T13:08:52.407
> 
> 标签：ios, opengl-es, cocos2d-iphone

这段代码适用于模拟器和任何不是视网膜屏幕的东西。但它给了我视网膜的黑色图像？我得到了非视网膜设备的正确图像。有没有人知道为什么结果黑屏？

```
- (UIImage*) screenShotUIImage {

CGSize size = glView.frame.size;
//Create un buffer for pixels
GLuint bufferLenght=size.width*size.height*4;
GLubyte *buffer = (GLubyte *) malloc(bufferLenght);

//Read Pixels from OpenGL
glReadPixels(0,0,size.width,size.height,GL_RGBA,GL_UNSIGNED_BYTE,buffer);
//Make data provider with data.
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLenght, NULL);

//Configure image
int bitsPerComponent = 8;
int bitsPerPixel = 32;
int bytesPerRow = 4 * size.width;
CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;
CGImageRef iref = CGImageCreate(size.width,size.height,bitsPerComponent,bitsPerPixel,bytesPerRow,colorSpaceRef,bitmapInfo,provider,NULL,NO,renderingIntent);

uint32_t *pixels = (uint32_t *)malloc(bufferLenght);

CGContextRef context = CGBitmapContextCreate(pixels, glView.frame.size.width, glView.frame.size.height, 8, glView.frame.size.width*4, CGImageGetColorSpace(iref), kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGContextTranslateCTM(context,0, size.height);
CGContextScaleCTM(context, 1.0, -1.0);

/*
 CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(-90));
 CGContextTranslateCTM(context,-size.height, 0);
 */

CGContextDrawImage(context, CGRectMake(0.0, 0.0, size.width, size.height), iref);
UIImage *outputImage = [UIImage imageWithCGImage:CGBitmapContextCreateImage(context)];

//Dealloc
CGDataProviderRelease(provider);
CGImageRelease(iref);
CGContextRelease(context);
free(buffer);
free(pixels);
UIImageView *img=[[UIImageView alloc]initWithImage:outputImage];
[img setFrame:CGRectMake(0, 0, 800, 600)];
//    [self.view addSubview:img];
return outputImage; } 
```

# c# - 哪个 XML 读取对象适合 recursive xml 调查？

> ID：14003095
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:09:01.330
> 
> 标签：c#, .net, xml, xmldocument, xmlreader

递归调查 XML 的建议方法是什么？
`XMLReader`///其他选项 `XMLDocument`？`XMLTextReader`

我有点困惑，为什么我们有这么多读取 XML 的方法。

**重要提示：**我有一个约束，即 Xml 读取对象应该能够从给定的`Stream`引用对象创建自己。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:17:39.853

两者都`XDocument`支持`XmlDocument`文档的随机访问，因此支持节点层次结构的双向遍历。因此，对于递归方法，其中任何一个都是不错的选择。

`XDocument`专为使用 LINQ 而设计，而`XmlDocument`在使用 XPath 查询文档时更方便。这真的是一个偏好问题和你当时需要的东西。两者都是同样有效的选项，并提供非常相似的功能。

`XMLTextReader`效率更高，因为它只是一次从流中读取一个节点，而不验证整个文档图。但是，它是仅向前的，因此您无法遍历节点树以返回父节点，因此它可能不是您正在做的事情的好选择。

`XMLReader`是`XMLTextReader`（以及其他）的抽象基类，因此不能直接使用。

**更新**

由于您在上面的评论中提到，您真正想做的就是找到所有叶元素，因此您根本不需要使用递归。您可以利用 LINQ 或 XPath 为您完成所有工作。既然你说你不想使用 LINQ，下面是如何通过 XPath 来做到这一点`XmlDocument`：

```
XmlNodeList leafElements = doc.SelectNodes("//*[not(node())]"); 
```

或与`XDocument`：

```
IEnumerable<XElement> leafElements = doc.XPathSelectNodes("//*[not(node())]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:13:33.377

我自己一直偏爱[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument%28v=VS.95%29.aspx)。您想使用[XDocument.Load(Stream)](http://msdn.microsoft.com/en-us/library/cc838349%28v=vs.95%29.aspx)（或其重载之一）从流中读取数据。

# android - 在绑定服务中实例化 Messenger 时出现 NullPointerException

> ID：14003097
> 
> 赞同：1
> 
> 时间：2012-12-22T13:09:18.110
> 
> 标签：android, android-service, message

您好，感谢您的支持。

我有一个`Service`绑定到我的`MainActivity`.

当我尝试在`Messenger`内部实例化一个新表单`Service`以与活动进行通信时。

```
Messenger mService = new Messenger(mBinder); 
```

正是当执行到这一点时，我得到 NullPointerException。

这是服务的代码：

```
public class LocalService extends Service {
    public int i;
    public ArrayList<String> al;
     // Binder given to clients
    private final IBinder mBinder = new LocalBinder();
    Messenger mService = new Messenger(mBinder);
    public Task t;

    /**
     * Class used for the client Binder.  Because we know this service always
     * runs in the same process as its clients, we don't need to deal with IPC.
     */
    public class LocalBinder extends Binder {
        LocalService getService() {
            // Return this instance of LocalService so clients can call public methods
            return LocalService.this;
        }
    }

    public void sayHello() {

        // Create and send a message to the service
        Message msg = Message.obtain(null, 1, 0, 0);
        try {
            mService.send(msg);
        } catch (RemoteException e) {
             e.printStackTrace();
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        Log.e("", "sono nel service");
        t= new Task();
        t.execute();
        return mBinder;
    } 
```

这是我的 LogCat：

```
12-22 13:17:03.382: E/AndroidRuntime(1625): FATAL EXCEPTION: main
12-22 13:17:03.382: E/AndroidRuntime(1625): java.lang.RuntimeException: Unable to instantiate service com.example.quotes.LocalService: java.lang.NullPointerException
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2347)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.app.ActivityThread.access$1600(ActivityThread.java:130)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.os.Looper.loop(Looper.java:137)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at java.lang.reflect.Method.invoke(Method.java:511)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at dalvik.system.NativeStart.main(Native Method)
12-22 13:17:03.382: E/AndroidRuntime(1625): Caused by: java.lang.NullPointerException
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.os.Binder.queryLocalInterface(Binder.java:230)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.os.IMessenger$Stub.asInterface(IMessenger.java:27)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.os.Messenger.<init>(Messenger.java:139)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at com.example.quotes.LocalService.<init>(LocalService.java:21)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at java.lang.Class.newInstanceImpl(Native Method)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at java.lang.Class.newInstance(Class.java:1319)
12-22 13:17:03.382: E/AndroidRuntime(1625):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2344)
12-22 13:17:03.382: E/AndroidRuntime(1625):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:22:16.593

不要在此行中发送 null 作为参数：

```
Message msg = Message.obtain(null, 1, 0, 0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T21:15:19.263

问题解决了，我发布这个以防有人感兴趣：

Messenger 是 Parcelable 的，因此可以放入 Intent extra。调用 bindService() 的活动在 Intent 上附加了一个 Messenger 作为额外内容。服务从 Intent 中获取该 Messenger。当服务需要向 Activity 发送消息时，服务会在 Messenger 上发送消息。主Activity上的Handler通过handleMessage接收消息。

问题解决了。

# haskell - 将时间建模为惰性数字

> ID：14003098
> 
> 赞同：14
> 
> 时间：2012-12-22T13:09:50.427
> 
> 标签：haskell, audio, real-time, lazy-evaluation, interactive

我正在尝试在 Haskell 中编写一个交互式的实时音频合成器，我迫切需要“惰性数字”来表示时间。

事情是这样的：我的程序基于“信号”的概念，这些信号由“信号处理器”转换。但与 Faust 或 ChuckK 等其他类似项目不同，我希望使用严格的纯函数，但又能明确访问时间。

这个想法是可以在 Haksell 中表达纯粹的“惰性流处理器”，并且由于惰性评估，这将以交互式、实时的方式工作。

例如，我可以将“midi 信号”表示为音符变化事件流：

```
type Signal = [ (Time, Notes->Notes) ] 
```

这一切在非交互模式下运行得很好，但是当我想实时玩它时，我遇到了一个很大的障碍：在任何一个时间点，输出信号都取决于*下一个*输入的时间事件。所以我的合成引擎实际上会停止，直到下一个事件。

让我解释一下：当我的声卡要求我的输出信号样本时，惰性求值器遍历我的信号处理器的依赖关系图并最终要求输入（midi）信号的一部分。但是假设输入信号在本地看起来像这样：

```
input :: Signal
input = [ ..., (1, noteOn 42), (2, noteOff 42), ... ] 
```

当我需要在时间 1.5 计算输出（音频）信号时，我需要这样的东西：

```
notesAt :: Signal -> Time -> Notes
notesAt = notesAt' noNotes where
    notesAt' n ((st,sf):ss) t
            | st > t = n
            | otherwise = notesAt' (sf n) ss t 
```

...当我评估“notesAt input 1.5”时，它*必须*在返回之前计算“2 > 1.5”。但是事件（2，NoteOff 42）不会再发生 0.5 秒！所以我的输出取决于将来会发生并因此停止的输入事件。

我称这种效应为“矛盾的因果关系”。

我已经考虑如何处理这个问题已经有一段时间了，我得出的结论是，我需要某种形式的数字，让我能够懒惰地评估“a > b”。比方说：

```
bar :: LazyNumber
bar = 1 + bar

foo :: Bool
foo = bar > 100 
```

...然后我希望“foo”评估为 True。

请注意，您可以为此使用 Peano 数字，它确实有效。

但为了提高效率，我想将我的数字表示为：

```
data LazyNumber = MoreThan Double | Exactly Double 
```

...并且这需要可变才能工作，即使 LazyNumbers 上的每个函数（例如“>”）都是纯的...

在这一点上，我有点迷路了。所以问题是：是否有可能在交互式实时应用程序中实现有效的惰性数字来表示时间？

## 编辑

有人指出，我正在做的事情有一个名字：Functional Reactive Programming。Edward Amsden 的论文“A Survey of Functional Reactive Programming”是一个很好的介绍。这是一个摘录：

> 大多数 FRP 实现，包括迄今为止的所有信号函数实现，都屈服于对事件不发生的持续重新评估，这是由于系统不断重新采样 FRP 表达式以进行输出的“基于拉动”的实现。Reactive 的工作（第 3.1 和 4.4 节）旨在解决 Classic FRP 的这个问题，但尚未探索将这项工作扩展到信号函数，并且发生时间比较的简单操作依赖于程序员检查并且可以说难以证明身份以保持参考透明度。

这似乎是问题的核心：我的“虚拟事件”方法和 DarkOtter 的提议属于“对事件不发生的持续重新评估”类别。

作为一个天真的程序员，我说“让我们使用惰性数字，让 foo/bar 示例工作”。/我挥手。同时，我会看看YampaSynth。

此外，在我看来，像我试图做的那样，使数字相对于线性时间变得“懒惰”与让（实数）数字在精度方面“懒惰”密切相关（参见[Exact Real Arithmetic](http://www.haskell.org/haskellwiki/Exact_real_arithmetic)）。我的意思是，我们希望在严格的纯上下文中使用可变对象（事件时间的下限与实数的间隔），满足某些法律以确保我们“保持引用透明度”。更多的挥手，对不起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T14:46:00.827

你可以做一些这样的事情来实现（大致）最大延迟，我认为它可能已经在一些 FRP 程序中完成。我认为这个想法与您的建议类似，类型如下：

```
data Improving n = Greater n (Improving n) | Exact n 
```

您可以为此定义各种方便的实例，例如comonad，但您所说的关键是您必须有一些方法，当任何IO进程正在等待下一个midi事件发生时，它立即产生你的一对，与时间和事件的懒惰承诺。该事件仍将仅在实际事件发生时才可用，但应该捏造时间，以便在某个最大延迟后它的一部分始终可用。即，它等待 100 毫秒，然后如果事件发生，则惰性 thunk 变为 (Greater 100ms (thunk))，其中下一个 thunk 以相同的方式运行。这使您可以根据需要懒惰地交错。

我已经看到在旧版本的 FRP 库中使用 MVars 和 unsafeDupablePerformIO 的组合完成了类似的操作。这个想法是，您有一个 MVar，您的 IO monad 等待线程将其推入以发出该值的信号，并且您放入的 thunk 使用 unsafeDupablePerformIO 从 MVar 读取（这应该是线程安全的，并且是幂等的，所以它应该是安全的做我认为）。

然后，如果等待线程认为它太长，您只需为下一位创建另一个 MVar 和伴随的 thunk，然后将您的 (Greater (100ms) (thunk)) 值推入旧的，这允许在惰性中进行评估部分继续。

这并不完美，但这应该意味着你只需要等待，比如未来 100 毫秒而不是 500 毫秒。

如果您不想弄乱时间表示，我想您总是可以将midi事件流设为（时间，Maybe事件）流，然后确保生成的任何东西至少每x插入一次事件小姐。

## 编辑：

我在这里做了一个简单的例子：[https ://gist.github.com/4359477](https://gist.github.com/4359477)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T03:16:03.013

使用`pipes`，唯一可以让您对更多输入的请求进行参数化的流媒体库。您将惰性笔记流构建为服务器：

```
notes :: (Proxy p) => MaxTime -> Server p MaxTime (Maybe Note) IO r
notes = runIdentityK $ foreverK $ \maxTime -> do
    -- time out an operation waiting for the next note
    -- deadline is the maxTime parameter we just received
    t <- lift $ getCPUTime
    note <- lift $ timeout (maxTime - t) $ getNote
    respond note 
```

好了，你完成了！要了解有关此技巧的更多信息，请阅读[Control.Proxy.Tutorial](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)`pipes`中的教程。

加分项：你不需要使用`unsafePerformIO`，但你仍然保持组合编程。例如，如果您想记前 10 个音符，那么您只需：

```
takeB_ 10 <-< notes 
```

如果您想在给定的截止日期之前记下所有笔记，您只需执行以下操作：

```
query deadline = takeWhileD isJust <-< mapU (\() -> deadline) <-< notes 
```

通常当人们说他们想要纯度时，他们真正的意思是他们想要组合性。

# php - 计数数组逗号分隔值

> ID：14003099
> 
> 赞同：1
> 
> 时间：2012-12-22T13:09:52.617
> 
> 标签：php, arrays

我正在使用此函数在 WordPress 中获取一组自定义元字段

```
$my_var = get_meta_values( 'keywords' );
if( !empty( $my_var ) ) {
    $meta_counts = array();
    foreach( $my_var as $meta_value )
        $meta_counts[$meta_value] = ( isset( $meta_counts[$meta_value] ) ) ? $meta_counts[$meta_value] + 1 : 1;
}
print_r ($meta_counts); 
```

它生成的数组看起来像

```
Array ( 
  [one, two, three, four and five, six and seven] => 1 
  [clean, ajax one, two three, four five] => 1 
  [] => 1 
  [this is a test, working] => 1 
  [asdfasdf] => 1 
  [last test] => 1 
) 
```

如何获得以逗号分隔的每个单词或短语的总数。不是每个单词。在上面的数组中，计数为 13

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T13:29:21.930

你可以通过这个得到**13个**单词或短语

```
$words = array_map('trim', explode(',', implode(',', array_keys($meta_counts)))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:34:38.183

请尝试下面给出的代码

```
if( !empty( $my_var ) ) {
    $meta_counts = array();
    $total_count = 0;  
    foreach( $my_var as $meta_index=>$meta_value ){
         if(isset($meta_index) && !empty($meta_index)){
            $meta_index_arr = explode(',', $meta_index);
            $meta_counts[$meta_index] = count($meta_index_arr);   
            $total_count += $meta_counts[$meta_index];
         }else{
                          $meta_counts[$meta_index] = 0;
        }
     }

}
print_r ($meta_counts);
echo $total_count; 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:14:36.587

有一个名为 explode 的函数可以让您拆分数组。

这是它的链接。

这可能应该做一些需要。

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

# python - Flask Jsonify mongoengine 查询

> ID：14003103
> 
> 赞同：6
> 
> 时间：2012-12-22T13:10:21.163
> 
> 标签：python, json, flask, mongoengine, simplejson

我有这样的方法，并想以 Json 的形式返回，但它写道 Posts 对象不是 Json 可序列化的：S

```
def show_results_async(text):
   query  =  { '$or':[{'title':{'$regex':text}},{'author':{'$regex':text}} ]}
   posts = Posts.objects(__raw__=(query))
   return jsonify(result = posts) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-25T13:48:46.813

您可以使用 mongoengine 内置方法：to_json()。上面的例子，你可以这样使用：

```
def show_results_async(text):
   query  =  { '$or':[{'title':{'$regex':text}},{'author':{'$regex':text}} ]}
   posts = Posts.objects(__raw__=(query))
   return jsonify(result = posts.to_json()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T20:45:39.817

tl,dr：没有内置函数可以将 MongoEngine 文档转换为 JSON。所以你需要自己写。

在views.py中：

```
def show_results_async(text):
   query  =  { '$or':[{'title':{'$regex':text}},{'author':{'$regex':text}} ]}
   posts = Posts.objects(__raw__=(query))
   return jsonify(result=posts.to_dict()) 
```

在 post.py 中，添加：

```
def to_dict(self):
   return helper.mongo_to_dict(self) 
```

在 helper.py 中：

```
def mongo_to_dict(obj):
    return_data = []

    if isinstance(obj, Document):
        return_data.append(("id",str(obj.id)))

    for field_name in obj._fields:

        if field_name in ("id",):
            continue

        data = obj._data[field_name]

        if isinstance(obj._fields[field_name], DateTimeField):
            return_data.append((field_name, str(data.isoformat())))
        elif isinstance(obj._fields[field_name], StringField):
            return_data.append((field_name, str(data)))
        elif isinstance(obj._fields[field_name], FloatField):
            return_data.append((field_name, float(data)))
        elif isinstance(obj._fields[field_name], IntField):
            return_data.append((field_name, int(data)))
        elif isinstance(obj._fields[field_name], ListField):
            return_data.append((field_name, data))
        elif isinstance(obj._fields[field_name], EmbeddedDocumentField):
            return_data.append((field_name, mongo_to_dict(data)))

    return dict(return_data) 
```

几点注意事项：

*   如果你的文档有额外的字段类型，你需要增强上面的辅助函数。
*   上面的辅助方法受到[Thomas 对问题的回答的](https://stackoverflow.com/a/12206391/153945)启发。附加功能包括：递归打印 EmbeddedDocuments 并包含文档的 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-11T20:51:38.057

这可行，但我不知道这是否是最有效的方法：

```
import json

@app.route('/api/my-objects/')
def get_objects():
    all_objects = [json.loads(o.to_json()) for o in MyObject.objects]

    return jsonify({"my_objects": all_objects}) 
```

# c++ - “最佳” IO 缓冲——程序员的任务还是内核的任务？

> ID：14003110
> 
> 赞同：11
> 
> 时间：2012-12-22T13:11:21.570
> 
> 标签：c++, performance, io, kernel, buffer

我的任务很简单：在 Linux 上用 C++ 读取和解析一个大文件。有两种方法：

1.  逐字节解析。

    ```
    while(/*...*/) {
            ... = fgetc(...);
            /* do something with the char */
    } 
    ```

2.  逐个缓冲区解析缓冲区。

    ```
    while(/*...*/) {
            char buffer[SOME_LARGE_NUMBER];
            fread(buffer, SOME_LARGE_NUMBER, 1, ...);
            /* parse the buffer */
    } 
    ```

现在，逐字节解析对我来说更容易（不检查​​缓冲区有多满等）。但是，我听说阅读大篇幅更有效率。

哲学是什么？“最佳”缓冲内核的任务，所以当我调用它时它已经被缓冲了`fgetc()`？还是建议我处理它以获得最佳效率？

此外，除了所有的哲学：这里的 Linux 的现实是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T13:15:31.167

无论性能或底层缓冲如何`fgetc()`，为您需要的每个字节调用一个函数，而不是拥有一个合适大小的缓冲区来迭代，都是内核无法帮助您解决的开销。

我为我的本地系统（显然是 YMMV）做了一些快速而肮脏的计时。

我选择了一个约 200k 的文件，并对每个字节求和。我这样做了 20000 次，每 1000 次循环在 read using`fgetc()`和 reading using之间交替`fread()`。我将每 1000 个循环计时为一个块。我编译了一个发布版本，并打开了优化。

`fgetc()`循环变体始终比循环慢**45 倍**`fread()`。

在评论中提示后，我还比较`getc()`了，并且还改变了 stdio 缓冲区。性能没有明显变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:23:15.983

*stdio*缓冲区不是内核的一部分。它是用户空间的一部分。

[但是，您可以使用setbuf](http://www.kernel.org/doc/man-pages/online/pages/man3/setbuf.3.html)影响该缓冲区的大小。当该缓冲区不够满时，*stdio*库将通过发出*read*系统函数来填充它。

*因此，使用fgetc*或在*内核*和用户之间切换的条款无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:23:26.603

没关系，真的。即使是 SSD，I/O 开销也使花在缓冲上的时间相形见绌。当然，现在是微秒而不是毫秒，但函数调用以纳秒为单位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T15:01:55.520

fgetc慢的原因不是函数调用量，而是系统调用量。`fgetc`通常被实现为`int fgetc(FILE *fp) { int ch; return (fread(&ch,1,1,fp)==1?ch:-1); }`

尽管 fread 本身可以缓冲 64k 或 1k，但系统调用开销与例如

```
 int fgetc_buffered(FILE *fp) {
     static int head=0,tail=0; 
     static unsigned char buffer[1024];
     if (head>tail) return buffer[tail++];
     tail=0;head=fread(buffer,1,1024,fp);
     if (head<=0) return -1;
     return buffer[tail++];
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T14:27:33.450

stdio 例程执行用户空间缓冲。当您调用 getc、fgetc、fread 时，它们会从 stdio 用户空间缓冲区获取数据。当缓冲区为空时，stdio 将使用内核读取调用来获取更多数据。

设计文件系统的人都知道磁盘访问（主要是寻道）非常昂贵。因此，即使 stdio 使用 512 字节的块大小，文件系统也可能使用 4 KB 的块大小，内核一次读取文件 4 KB。

通常内核在读取后会发起磁盘/网络请求。对于磁盘，如果它看到您按顺序读取文件，它将开始提前读取（在您请求之前获取块），以便更快地获得数据。

内核还将在内存中缓存文件。因此，如果您正在读取的文件适合内存，则在您的程序运行一次后，该文件将保留在内存中，直到内核决定最好缓存您正在引用的其他一些文件。

使用 mmap 不会获得内核预读的好处。

# signalr - 如何从服务器调用 SignalR 集线器操作

> ID：14003111
> 
> 赞同：3
> 
> 时间：2012-12-22T13:11:25.550
> 
> 标签：signalr

SignalR [wiki](https://github.com/SignalR/SignalR/wiki/Hubs)介绍了如何从集线器外部通过集线器进行广播。但是，这会调用客户端操作：

```
var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
context.Clients.Group(group).addMessage(message); 
```

有没有办法调用**Hub Operation**，最好是以强类型的方式？例如

```
GetHubContext<MyHub>().Invoke(h => h.Say(message)) 
```

我知道这可以通过使用 .NET 客户端连接到集线器来实现，但是当调用代码与集线器位于同一服务器上时，这似乎是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-21T15:29:01.077

派对迟到了，但是，是的，有。

stockticker[示例 nuget 包](http://www.nuget.org/packages/Microsoft.AspNet.SignalR.Sample) 执行此操作（尽管它不完全使用它！）：

基本上，您公开服务器端集线器的静态实例以进行调用。

在示例中，模式是：

```
public class StockTicker
{
    // Singleton instance
    private readonly static Lazy<StockTicker> _instance = new Lazy<StockTicker>(
        () => new StockTicker(GlobalHost.ConnectionManager.GetHubContext<StockTickerHub>().Clients));

...

    public static StockTicker Instance
    {
        get
        {
            return _instance.Value;
        }
    } 
```

...

然后可以从任何地方以及几乎任何时间调用它！：

```
StockTicker.Instance.OpenMarket(); 
```

[asp.net 网站上](http://www.asp.net/signalr/overview/getting-started/tutorial-server-broadcast-with-signalr)的博客文章也涵盖了相同的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:43:33.247

没有。这就像试图从服务器端调用 MVC 控制器（你只是不这样做）。只需将通用逻辑移动到共享帮助程序中，然后从集线器和其他服务器端代码调用该帮助程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T10:46:42.147

看看： [https ://github.com/ieb/SignalR-TypeSafeClient](https://github.com/i-e-b/SignalR-TypeSafeClient)

你可以使用这个库。

蒂兹

# android - 从处理活动返回时Android未执行onRestart

> ID：14003115
> 
> 赞同：1
> 
> 时间：2012-12-22T13:11:49.843
> 
> 标签：android, android-activity, processing, android-lifecycle

我正在处理的一个应用程序有问题，当我从一个 android 活动调用[处理](http://processing.org/)活动时，它工作正常，我可以毫无问题地看到正在处理的事情，但是当我单击后退按钮转到以前的活动，是空的。

我运行了一些测试，我意识到 onrestart 和 onresume 方法没有被调用。所以，我的问题是，哪些因素可以使活动不执行这些步骤。

**更新：**

当我调用正常的Android活动时，一切都按预期工作，当我返回时，我看到的一切都与调用活动之前一样，但是当我执行处理活动时，当我返回布局中的所有对象为空并且重新启动和恢复方法时永远不会被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:28:25.720

使用它来调用您的 NextActivity。

```
Intent intent = new Intent(FirstActivity.this, NextActivity.class);
startActivityForResult(intent, REQ_CODE);

@Override

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    // TODO Auto-generated method stub

    if(requestCode == REQ_CODE){

        if (resultCode == RESULT_OK){

                    //do something

        }else if(resultCode == RESULT_CANCELED){

                    //do something else

        }

    }

} 
```

NextActivity里面

```
Intent i = new Intent();
setResult(RESULT_OK, i); 
```

# apache-flex - HttpService 不工作 在土坯空气中

> ID：14003116
> 
> 赞同：0
> 
> 时间：2012-12-22T13:12:06.487
> 
> 标签：apache-flex, air, adobe

我有一个窗口应用程序作为我的基本应用程序。为了避免任务栏中应用程序的标签栏图标，我关闭了本机窗口并从另一个窗口打开内容。这里我将调用http服务方法。但是没有任何反应，编译和运行时也没有显示错误。所有其他操作都工作正常。为什么我无法在 adobe air 的窗口内调用 http 服务

主应用程序中的代码以打开新窗口：

```
public function init():void {

                nativeWindow.close();
                    var newWindow:MyWin = new MyWin();
                newWindow.systemChrome = NativeWindowSystemChrome.NONE;
                newWindow.type = NativeWindowType.LIGHTWEIGHT;
                newWindow.transparent = true;
                newWindow.open(true);   

            } 
```

窗口代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <mx:Window name="MyWin"
               xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 

               creationComplete="httpService()"   >

        <fx:Script>
            <![CDATA[
                import mx.collections.ArrayCollection;
                import mx.controls.Alert;
                import mx.rpc.events.FaultEvent;
                import mx.rpc.events.ResultEvent;
                import mx.rpc.http.HTTPService;

                public function httpService():void {

                    var httpSer : HTTPService = new HTTPService(); 
                    httpSer.url = "http://flexairapp...";
                    httpSer.method = "GET";
                    httpSer.addEventListener(ResultEvent.RESULT, httpResult);
                    httpSer.addEventListener(FaultEvent.FAULT, httpFault);
                    httpSer.resultFormat="text";

                    var parameters:Object = new Object(); 
                    httpSer.send();
                }

                public function httpResult(event:ResultEvent):void {

                    var dataResult:String = event.result.toString(); 

                }

                public function httpFault(event:FaultEvent):void {
                    var faultstring:String = event.fault.faultDetail;

                }
            ]]>
        </fx:Script>

    </mx:Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:18:53.333

尝试将主窗口可见性设置为 false 而不是关闭它。我猜它可以认为你想终止你的应用程序（并且主窗口的所有子窗口也都关闭了）。

# node.js - 无法在 node.js 中使用 mongoose 查询 mongoDB

> ID：14003117
> 
> 赞同：1
> 
> 时间：2012-12-22T13:12:15.927
> 
> 标签：node.js, mongodb, mongoose

假设我的 mongoDB 中有一个集合：`db.co` 并且只有一个文档：

```
{ "_id" : ObjectId("50d083e32cdcf7ce065b616c"), 
  "age" : 22, 
  "friends" : [ "Tom"], 
  "location" : "NY", 
  "name" : "lee", 
  "skill" : [ "javascript", "java" ] 
 } 
```

然后我想通过以下代码查询`node.js`它`mongoose`：

```
var coSchema = mongoose.Schema( {
    age: Number,
    friends: Array, 
    location: String,
    name: String,
    skill: Array
})

var Co = mongoose.model('Co', coSchema);
function findSomeoneInCo (name) {
  Co.find({"name": name}, function (err, doc) {
    if (err) {
        console.log('find some one failed: ' + err);
        return;
    }
    console.log('find successed: ' + doc);
  })
}

findSomeoneInCo("lee"); 
```

但它什么也没给我

我的代码有什么问题？怎样才能得到正确的查询结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T13:58:14.953

Mongoose 在确定要使用的集合名称时将小写的模型名称复数。因此，默认情况下，它的模型名称`'Co'`将在`cos`集合中查找。

要覆盖默认值并与现有`co`集合对齐：

```
var Co = mongoose.model('Co', coSchema, 'co'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T05:50:53.203

在任何 CURD 操作期间，Mongoose 都会将您的模型名称复数，使用此并检查：

```
var Co = mongoose.model('Co', coSchema, 'co'); //Even the case matters 
```

或者

```
var coSchema = new Schema({
    age: Number,
    friends: Array, 
    location: String,
    name: String,
    skill: Array
}, {collection:'co'});
var Co = mongoose.model('Co',coSchema); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:24:34.987

.find() 异步工作，这意味着它的回调在您的函数已经拥有时运行。

查看[异步函数中的变量范围](https://stackoverflow.com/questions/7206223/variable-scope-in-asynchronous-function)

```
//try passing a callback function to your search function, like:
function findSomeoneInCo (name, callback) {

  //happens now - here you could still return something

  Co.find({"name": name}, function (err, doc) {

   //happens later - too late to return stuff, function has ran already

    if (err) {
        callback(err);
        return;
    }
    callback(doc);
  })
}

//call your function passing a callback function
findSomeoneInCo("lee", function(doc){
  console.log('do something with your results: ' + doc);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T13:24:38.867

我注意到您对 find() 的回调具有以下参数：err, doc

find() 总是返回一个数组，所以你真的希望它是：err, docs

或使用 findOne()

在您发布的代码中，异步的东西不应该是问题，嵌套的回调仍然会被执行。你确定你的连接没问题。我会运行一个开放式查询：

```
Co.find({}, function(err, docs){
 console.log(docs);
} 
```

只是为了检查集合中有什么东西

# css - CSS3 div 位置

> ID：14003122
> 
> 赞同：0
> 
> 时间：2012-12-22T13:12:54.663
> 
> 标签：css, html, position

我有一个使用 CSS3 动画的加载圈。加载圈完成动画后，一个空 div 淡入。我在将空 div 放置在另一个 div 上时遇到问题。任何帮助深表感谢。

[jsFiddle](http://www.jsfiddle.net/kFPr6/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:22:17.017

添加`position:absolute;`和`top:0;`框样式

```
.box {
   background: #dedede;
   height: 200px;
   width: 200px;
   animation: in 3s forwards;
   position:absolute;
   top:0;
} 
```

玩得开心 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:14:38.027

您可以使用`z-index`将元素放置在“层”中。

```
z-index:1000; 
```

将分别使元素在 0 之上 1000 层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:20:32.760

[**jsFiddle**](http://jsfiddle.net/kFPr6/19/) 新的 jsFiddle 包括圆圈上方的元素。

`.wrap`为如下创建一个新的 CSS 规则：

```
.wrap{
  float: left;
} 
```

*你不需要使用`z-index`属性，因为你已经让 DOM 与你一起工作，而不是反对你。*

# java - 在 Java 中缩小和混淆 JavaScript 代码

> ID：14003126
> 
> 赞同：3
> 
> 时间：2012-12-22T13:13:44.467
> 
> 标签：java, javascript, minify, yui-compressor

我多年来一直使用 YUI Compressor 来缩小和混淆 JS 文件。但现在我需要对服务器上动态生成的 JavaScript 代码进行混淆和缩小。所以这里的主要区别是不会有应该被混淆的 JS 文件，而是对服务器 (Java) 的请求，它应该生成部分 JS 代码并返回它们已经缩小和混淆。

YUI Compressor 不提供这样做的可能性。我查看了源代码，并且已经弄清楚应该重写哪些方法以使其工作。我不想这样做（但如果没有其他方法就必须这样做）。

那么是否有任何其他 Java 库允许直接从 Java 代码中缩小和混淆 JavaScript 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-28T23:47:38.723

**计划一）**

不将 YUI 用作命令行工具，而是将其用作 Java 库并在您的代码中调用它。

JavaScriptCompressor 接受一个 Reader 后代（例如 InputFileReader）。

```
 JavaScriptCompressor compressor = new JavaScriptCompressor(in, new YuiCompressorErrorReporter()); 
```

实际上，您可以获取原始 JavaScript 并将其转换为 Stream，例如[How do I convert a String to an InputStream in Java?](https://stackoverflow.com/questions/782178/how-do-i-convert-a-string-to-an-inputstream-in-java)

一个完整的集成示例在这里：

[http://blog.teamextension.com/yui-compressor-in-java-246](http://blog.teamextension.com/yui-compressor-in-java-246)

**计划 b)**

请注意，您可以简单地将生成的 javascript 保存到文件系统中，然后从 Java 调用命令行 Yui。然后从文件系统中读取缩小的文件，就是这样，你有一个缩小的 JS。

# ios - Sqlite 查询循环不起作用

> ID：14003129
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:14:21.780
> 
> 标签：ios, sql, database, xcode, sqlite

我正在尝试运行此查询，但 NSLog 既不工作也不显示警报.. 查询不执行它不进入 if 循环

```
viewDidLoad{

pin_lat = pinAnnotation.coordinate.latitude;

NSLog(@"pin latitude is %f",pin_lat); //This one is only working

sqlite3_stmt *statement;

         NSString *qsql = [NSString stringWithFormat:@"SELECT name FROM site WHERE latitude LIKE %f AND longitude LIKE %f",pin_lat,pin_long];

   if (sqlite3_open([qsql UTF8String], &db) == SQLITE_OK){
     //  sqlite3_exec(db, [statement UTF8String],NULL, NULL, &err == SQLITE_OK);

         NSLog(@"QUERY IS WORKING IN OPEN DB");

    if (sqlite3_prepare_v2(db, [qsql UTF8String], -1, &statement, nil)== SQLITE_OK)
    {
         NSLog(@"QUERY IS WORKING IN DB PREPARE");

        while(sqlite3_step(statement)==SQLITE_ROW)
        {
            /* char *field1 = (char *) sqlite3_column_text(statement, 3);  getting name value in field1
             NSString *field1Str =
             [[NSString alloc] initWithUTF8String: field1];
             [field1Str release];*/

            NSLog(@"QUERY IS WORKING");

            UIAlertView *alert_pin = [[UIAlertView alloc] initWithTitle:@"" message:@"Cannot create a duplicate location" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Done", nil];

            [alert_pin show];
            [alert_pin release];

        }

        //—-deletes the compiled statement from memory—-
        sqlite3_finalize(statement);
    }

    else{

        [mapView addAnnotation:pinAnnotation];  // this is working ... but i want the if loop to also work

    }

}

 sqlite3_close(db);
 // not exist to show alert
} 
```

我的查询有什么问题为什么它不执行查询并打开数据库或在 if 循环中打印日志……任何人都可以更正我的代码……有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:35:24.140

弥敦是对的。我进一步建议这些`if`语句中的每一个都应该有一个相应的`else`子句来显示返回代码以及（如果可能的话）错误消息。或者，等效地，检查每个步骤的故障，如果是，则报告诊断信息并返回。因此，它可能看起来像：

```
int rc;
sqlite3_stmt *statement;

NSString *qsql = [NSString stringWithFormat:@"SELECT name FROM site WHERE latitude LIKE %f AND longitude LIKE %f",pin_lat,pin_long];

if ((rc = sqlite3_open([path UTF8String], &db)) != SQLITE_OK) {
    NSLog(@"%s sqlite3_open failed: (%d)", __FUNCTION__, rc);
    return;
}

NSLog(@"QUERY IS WORKING IN OPEN DB");

if ((rc = sqlite3_prepare_v2(db, [qsql UTF8String], -1, &statement, nil)) != SQLITE_OK) {
    NSLog(@"%s sqlite3_prepare_v2 failed: \"%s\" (%d)", __FUNCTION__, sqlite3_errmsg(db), rc);
    sqlite3_close(db);
    return;
}

NSLog(@"QUERY IS WORKING IN DB PREPARE");

while ((rc = sqlite3_step(statement)) == SQLITE_ROW)
{
    const char *field0 = (const char *)sqlite3_column_text(statement, 0); // getting name value in field1
    NSString *field0Str = [NSString stringWithUTF8String:field0];

    NSLog(@"QUERY IS WORKING: %@", field0Str);

    UIAlertView *alert_pin = [[UIAlertView alloc] initWithTitle:@"" message:@"Cannot create a duplicate location" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Done", nil];

    [alert_pin show];
    [alert_pin release];
}

if (rc != SQLITE_DONE)
{
    NSLog(@"%s sqlite3_step failed: \"%s\" (%d)", __FUNCTION__, sqlite3_errmsg(db), rc);
    sqlite3_finalize(statement);
    sqlite3_close(db);
}

if ((rc = sqlite3_finalize(statement)) != SQLITE_OK) {
    NSLog(@"%s sqlite3_finalize failed: \"%s\" (%d)", __FUNCTION__, sqlite3_errmsg(db), rc);
    sqlite3_finalize(statement);
    sqlite3_close(db);
}

sqlite3_close(db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:36:21.503

此行导致问题：

```
 if (sqlite3_open([qsql UTF8String], &db) == SQLITE_OK) 
```

上面代码中的参数不正确。

**您正在传递 sql 查询而不是数据库路径。**

因为这个数据库没有打开，if 条件失败。这就是为什么你没有得到任何输出。

将数据库路径作为`sqlite3_open`. 它会工作的。

# c# - 在 asp.net 中多次调用后图像处理程序返回相同的图像

> ID：14003130
> 
> 赞同：0
> 
> 时间：2012-12-22T13:14:23.233
> 
> 标签：c#, asp.net, image, caching, handler

我试图为我的网站创建一个图像处理程序，基本的调整大小、旋转和裁剪工作，并且在网站中显示良好但是我尝试通过保存文件来向处理程序添加缓存，`/chached/filename.png`但由于某种原因，在我添加了缓存之后，图像处理程序返回错误的图像。例如，我有一个项目列表页面，其中调整大小的项目图像显示在表格视图中，但是前 4 个项目显示为具有相同的图像，然后接下来的 4 个显示为不同的图像，但都相同，等等。

我有一种感觉，`response.outputstream`但我不确定，因为在调用下一个图像之前似乎没有足够的时间来完成第一个图像。

以防万一，完整的代码可以在这里找到：http: [//pastebin.com/BNyDfqPy](http://pastebin.com/BNyDfqPy)

我的流程请求方法如下：

```
public void ProcessRequest(HttpContext context)
{
    // Settings and locations
    appPath = HttpContext.Current.Request.PhysicalApplicationPath;
    location = context.Request.QueryString["image"];
    cacheLocation = Path.GetDirectoryName(appPath + location) + "/Cached/";

    // Input/Output
    Bitmap bitOutput;
    Bitmap bitInput = GetImage(context);

    if (cacheAvailable)
    {
        bitOutput = bitInput;
    }
    else
    {
        try
        {
            Boolean crop = false;

            if (context.Request["type"] == "crop")
            {
                crop = true;
            }

            bitInput = RotateFlipImage(context, bitInput);

            if (hasSetSize)
            {
                Int32 x = String.IsNullOrEmpty(context.Request["x"]) ? 0 : Int32.Parse(context.Request["x"]);
                Int32 y = String.IsNullOrEmpty(context.Request["y"]) ? 0 : Int32.Parse(context.Request["y"]);

                bitOutput = ResizeImage(bitInput, _width, _height, crop, x, y);

                bitOutput.Save(cacheLocation + cacheKey + ".png", System.Drawing.Imaging.ImageFormat.Png);
            }
            else
            {
                throw new Exception();
            }
        }
        catch (Exception)
        {
            bitOutput = bitInput;
        }
    }

    context.Response.Clear();
    context.Response.Cache.SetNoStore();
    context.Response.ContentType = "image/png";

    using (MemoryStream ms = new MemoryStream())
    {
        bitOutput.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        ms.WriteTo(context.Response.OutputStream);
    }
    //bitOutput.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Png);

    bitOutput.Dispose();
    bitInput.Dispose();
    context.Response.Flush();

    return;        
} 
```

我用这个得到图像：

```
public Bitmap GetImage(HttpContext context)
{
    // Get location
    Bitmap bitOutput = null;

    try
    {
        if (!String.IsNullOrEmpty(location))
        {
            Image image = Image.FromFile(appPath + location);
            bitOutput = new Bitmap(image);
            hasSetSize = SetHeightWidth(context, bitOutput);

            if (!System.IO.Directory.Exists(cacheLocation))
            {
                System.IO.Directory.CreateDirectory(cacheLocation);
            }

            // Generate cache key
            cacheKey = "imagehandler_" + _width + "x" + _height + "_" + context.Request["RotateFlip"] + context.Request["type"];

            if (File.Exists(cacheLocation + cacheKey + ".png"))
            {
                image = Image.FromFile(cacheLocation + cacheKey + ".png");
                bitOutput = new Bitmap(image);
                cacheAvailable = true;
            }
        }
        else
        {
            throw new Exception("Can't load original or save to cache, check directory permissions!");
        }
    }
    catch (Exception)
    {
        Image image = Image.FromFile(appPath + noImageUrl);
        bitOutput = new Bitmap(image);
    }

    return bitOutput;
} 
```

我也`isReusable`设置如下：

```
public bool IsReusable
{
    get
    {
        return false;
    }
} 
```

输出如下图所示，每个项目都有不同的图像集，但它们要么显示与上一个/下一个图像相同的图像，它是自己的图像（这是我想要的）或占位符图像：

![应该有不同图像的项目列表](../Images/7e0aa4c154df45244393ce9ff86520d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:29:54.787

正如我看到的代码，您可能使用了静态变量，`cacheAvailable`并且在设置为 true 之后不会在下一次调用时返回 false。

因此，请检查您何时将`cacheAvailable`false 作为每个请求的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:38:14.210

首先，除非您真的希望您的处理程序能够一遍又一遍地使用同一个实例，否则`IsReusable`返回 false。

如果您不想这样做，请删除`cacheAvailable`类级别变量，更改此：

```
// Input/Output
Bitmap bitOutput;
Bitmap bitInput = GetImage(context); 
```

对此：

```
// Input/Output
Bitmap bitOutput;
bool cacheAvailable;
Bitmap bitInput = GetImage(context, out cacheAvailable); 
```

并修改`GetImage`成这样

```
public Bitmap GetImage(HttpContext context, out bool cacheAvailable)
{
    // Get location
    Bitmap bitOutput = null;
    cacheAvailable = false;

    try
    {
        if (!String.IsNullOrEmpty(location))
        {
            Image image = Image.FromFile(appPath + location);
            bitOutput = new Bitmap(image);
            hasSetSize = SetHeightWidth(context, bitOutput);

            if (!System.IO.Directory.Exists(cacheLocation))
            {
                System.IO.Directory.CreateDirectory(cacheLocation);
            }

            // Generate cache key
            cacheKey = "imagehandler_" + _width + "x" + _height + "_" + context.Request["RotateFlip"] + context.Request["type"];

            if (File.Exists(cacheLocation + cacheKey + ".png"))
            {
                image = Image.FromFile(cacheLocation + cacheKey + ".png");
                bitOutput = new Bitmap(image);
                cacheAvailable = true;
            }
        }
        else
        {
            throw new Exception("Can't load original or save to cache, check directory permissions!");
        }
    }
    catch (Exception)
    {
        Image image = Image.FromFile(appPath + noImageUrl);
        bitOutput = new Bitmap(image);
    }

    return bitOutput;
} 
```

# java - 如何在java中强制信号量排序

> ID：14003134
> 
> 赞同：1
> 
> 时间：2012-12-22T13:14:50.533
> 
> 标签：java, concurrency

我正在使用信号量来强制我的程序中的一些顺序：我有一个主线程和一些在主线程中创建的子线程。在每一步的主线程中，都会打勾，然后我希望每个子线程一个接一个地运行。子线程的顺序并不重要，但我希望它们都在每个步骤中运行（并且每个步骤只运行一次）。我已经写了这段代码，但问题是在某些情况下，子线程的一步运行多次不让其他人有机会运行？！

主线程：

```
 Semaphore okToTick = new Semaphore(3);
     Semaphore okToWork = new Semaphore(0, true);

     int i = 0;

     new TestClass2(0, okToTick, okToWork);
     new TestClass2(1, okToTick, okToWork);
     new TestClass2(2, okToTick, okToWork);

     while(true){

        okToTick.acquire(3);

        System.out.printf("\clock : %s\n", i++);

        okToWork.release(3);

     } 
```

和子线程的 run() ：

```
 semaphores here, passed by cnstr() 
    ID = //passed in by cnstr()    
    isBusy = false; 
    ----------------------------------
    try{
        while(true){

            okToWork.acquire();

            if(!isBusy){
                System.out.println("inside sub " + ID);
                isBusy = true;
            }

            okToTick.release();

        }

    }
    catch(Exception e){} 
```

我想要这个结果：

```
 clock : 0
  inside sub 1
  inside sub 0
  inside sub 2

  clock : 1

  clock : 2
  ... 
```

但有时我会得到这个：

```
 clock : 0
  inside sub 1

  clock : 1
  inside sub 0
  inside sub 2

  clock : 2
  ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T13:20:51.947

我认为您正在寻找[CyclicBarrier](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CyclicBarrier.html)：

> 一种同步辅助工具，它允许一组线程相互等待以达到共同的障碍点。CyclicBarriers 在涉及固定大小的线程组的程序中很有用，这些线程组必须偶尔相互等待。屏障被称为循环的，因为它可以在等待线程被释放后重新使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:47:50.530

在您的情况下，一个线程可以 在其他线程甚至有机会启动之前多次获取`okToWork`和释放，即。`okToTick`线号 1最多可以做3次 `okTowork.acquire()`->`okToTick.release()`在其他人之前。

您也只为每个线程打印`inside sub x`一次，因为您从不重置`isBusy`标志。

您需要区分它们，使用 a 的最简单方法是给每个线程`Semaphore`一个不同的值。`okToTick Semaphore`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:41:16.080

问题是您的“子线程”可能从信号量获得多个许可，并且您没有在输出中意识到它，因为“内部子”输出仅打印一次（如果您会看到它多次去掉`if(!isBusy)`周围的它）。如果您不希望每个“子线程”获得多个许可，请删除外部`while(true)`循环。

```
 okToWork.acquire();

    //if(!isBusy){ Removed to show when this sub-thread is actually acquiring permits
        System.out.println("inside sub " + ID);
    //    isBusy = true;
    //}

    okToWork.release(); 
```

# android - 应用程序子类中的 NullPointerException？

> ID：14003137
> 
> 赞同：2
> 
> 时间：2012-12-22T13:15:26.567
> 
> 标签：android, nullpointerexception, android-context

我在 Application 子类中收到 nullpointerexception。我想要一个在整个应用程序中都可以使用的上下文，所以我调用了 getApplicationContext()，但这会导致异常 下面是 logcat 消息：

```
12-22 17:15:35.639: E/AndroidRuntime(572): FATAL EXCEPTION: main
12-22 17:15:35.639: E/AndroidRuntime(572): java.lang.RuntimeException: Unable to instantiate application com.gaurav.contactmanager.model.ContactManagerApplication: java.lang.NullPointerException
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.LoadedApk.makeApplication(LoadedApk.java:466)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3260)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.ActivityThread.access$2200(ActivityThread.java:117)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.os.Looper.loop(Looper.java:123)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-22 17:15:35.639: E/AndroidRuntime(572):  at java.lang.reflect.Method.invokeNative(Native Method)
12-22 17:15:35.639: E/AndroidRuntime(572):  at java.lang.reflect.Method.invoke(Method.java:507)
12-22 17:15:35.639: E/AndroidRuntime(572):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-22 17:15:35.639: E/AndroidRuntime(572):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-22 17:15:35.639: E/AndroidRuntime(572):  at dalvik.system.NativeStart.main(Native Method)
12-22 17:15:35.639: E/AndroidRuntime(572): Caused by: java.lang.NullPointerException
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
12-22 17:15:35.639: E/AndroidRuntime(572):  at com.gaurav.contactmanager.model.ContactManagerApplication.<init>(ContactManagerApplication.java:10)
12-22 17:15:35.639: E/AndroidRuntime(572):  at java.lang.Class.newInstanceImpl(Native Method)
12-22 17:15:35.639: E/AndroidRuntime(572):  at java.lang.Class.newInstance(Class.java:1409)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.Instrumentation.newApplication(Instrumentation.java:957)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.Instrumentation.newApplication(Instrumentation.java:942)
12-22 17:15:35.639: E/AndroidRuntime(572):  at android.app.LoadedApk.makeApplication(LoadedApk.java:461)
12-22 17:15:35.639: E/AndroidRuntime(572):  ... 11 more 
```

下面是源代码：

```
package com.gaurav.contactmanager.model;

import android.app.Application;
import android.content.Context;
import android.util.Log;

public class ContactManagerApplication extends Application {
    public static Context context = null;
    public ContactManagerApplication() {
        Log.d("@gaurav", getApplicationContext()+"");
        context = getApplicationContext();
    }
} 
```

和 android-manifest 声明如下：

```
 <application
        android:name=".model.ContactManagerApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:21:17.420

像这样改变它

```
public class ContactManagerApplication extends Application {
    public static Context context = null;

     @Override
    public void onCreate() {
        super.onCreate();
        Log.d("@gaurav", getApplicationContext()+"");
        context = getApplicationContext();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:22:00.727

使用`ContactManagerApplication.this`而不是`getApplicationContext()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:19:36.320

您不需要创建类的构造函数`Application`。它是由android框架自动调用的，你必须重写类`onCreate()`的方法`Application`。

`getApplicationContext()`应用程序的返回`Context`，它是由android框架分配的，而你把它放在你自己的构造函数中，所以android从来没有调用应用程序预定义的构造函数，所以`context`应用程序类的对象是`null`那个时候的，这导致了`NullPointerException`while `ContextWrapper`class is try访问`Application`' 上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T13:21:27.140

您的 Application 类生命周期与 Activity 的生命周期非常相似。您不需要关心构造函数，而是覆盖已知`onCreate()`的对象设置：

```
public class ContactManagerApplication extends Application {
    public static Context context = null;

    @Override
    public void onCreate() {
        super.onCreate();

        Log.d("@gaurav", getApplicationContext()+"");
        context = getApplicationContext();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T13:23:50.420

通常你有更多这样的东西：

```
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.your_layout);
        //After this is when you normally would call the getContext
        Context myContext = this.getApplicationContext();
} 
```

但这仅当这是被调用的类时。如果这不是您正在调用的类并且在被调用的类中，那么您可以将上下文作为实例变量并从那里读取它，或者您可以将上下文作为参数发送到此类的构造函数中然后使用它。但如果是这种情况，那么如果不直接调用这个类，我就不认为这个类是活动的扩展。

# node.js - 如何在 Node.Js 中同步全局变量访问。nodejs 是聊天室应用程序开发的正确选择吗？

> ID：14003141
> 
> 赞同：0
> 
> 时间：2012-12-22T13:15:49.513
> 
> 标签：node.js, chatroom, cometd

NodeJS 是否能够支持多聊天室应用程序，其中客户端通过 HttpLongPolling 和 WebSocket 订阅聊天室？当我考虑聊天室解决方案时，我确实看到当在 diff 处接收到消息时，在广播到长轮询请求和套接字连接时需要同步块。频率。AFAIK 在 JS 中没有多线程和同步块的概念，但仍然要访问 JS 中的全局变量，我们需要同步块。我的问题不是开发聊天室解决方案，但它与它类似，即及时向订阅频道的不同用户广播消息。NodeJs 是一个正确的选择吗？

我分析了 CometD，它似乎是这个解决方案的正确选择，它带有内置在具有通道概念的系统中的解决方案。但是 CometD 存在可扩展性问题，所以我正在尝试 nodejs，它看起来很轻，但需要在 NodeJs 上开发这个解决方案。我不必处理消息，只需将其传递给浏览器客户端。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:34:26.897

我已经使用静态文件、长轮询（彗星）、套接字、多种语言（c、PHP、节点）的 websockets 完成了几个多用户/多房间应用程序，今天最好的体验来自 NodeJS + Socket.IO。

这太容易了……因为 Socket.IO 会根据他的情况使用从 longpolling 到 websockets 或 flashsockets 来适应可用的客户端限制。尽管如此，您对长轮询的依赖越少越好。

您创建 Socket.IO 服务器，对其进行配置，以及 2 个房间进出事件（在您要管理的其余事件旁边）。应用程序的快速框架就是这个。您需要控制用户列表、用户名等……但可以轻松地通过 socket.id 索引用户数据并使用连接/断开连接事件管理该哈希。“fn”是客户端回调函数。

```
var http      = require('http')
  , ioo       = require('socket.io')
  ;

var app = http.createServer();
var io  = ioo.listen(app);

// ... Place here Socket.IO configuration...

var port = 8080;
app.listen( port, function() { console.log( 'Server started' ); } );

io.sockets.on( 'connection', function( socket ) {
    // Management messages
    socket.on( 'connect', function( name, fn ) { connect( socket, name, fn ); });
    socket.on( 'disconnect', function() { disconnect( socket.id ); });

    socket.on( 'joinRoom', function( roomName, fn ) { joinRoom( socket, roomName, fn ); });
    socket.on( 'leaveRoom', function( roomName, fn ) { leaveRoom( socket, roomName, fn ); });
} );

...

function joinRoom( socket, roomName, fn ) {
    socket.join( roomName );
    socket.broadcast.to( roomName ).emit( 'serverMessage', 'a user enters' );
    socket.emit( 'message', 'You enter in room ' + roomName );
}

function leaveRoom( socket, roomName, fn ) {
    socket.leave( roomName );
    socket.broadcast.to( roomName ).emit( 'serverMessage', 'a user leaves' );
    socket.emit( 'message', 'You leave room ' + roomName );
} 
```

[有关Socket.IO 房间](https://github.com/LearnBoost/socket.io#rooms)功能的完整描述，请参阅 Socket.IO 站点

# ruby-on-rails - 如何检查 current_user 是否喜欢这个？

> ID：14003144
> 
> 赞同：0
> 
> 时间：2012-12-22T13:15:57.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 rails3、devise 和acts_as_votable

我根据他的投票情况准备了显示“书签”或“取消书签”的视图。
但我不知道该放什么。有人有想法吗？

```
<% if xxxxxxxxxxxx %> <= *when @community hasn't been voted by current_user*              
  <%= link_to t('.bookmark', :default => t("helpers.links.bookmark")),
              bookmark_community_path(@community), :class => 'btn' %>
<% else %>
  <%= link_to t('.unbookmark', :default => t("helpers.links.unbookmark")),
              bookmark_community_path(@community), :class => 'btn-danger' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:21:14.713

你可以试试

```
current_user.voted_for? @community 
```

**upd**：文档示例[https://github.com/ryanto/acts_as_votable#the-voter](https://github.com/ryanto/acts_as_votable#the-voter)

```
@user.likes @comment1

@user.voted_for? @comment1 # => true 
```

# search-engine - 开放搜索服务器中的映射值

> ID：14003152
> 
> 赞同：0
> 
> 时间：2012-12-22T13:17:04.973
> 
> 标签：search-engine, opensearch

我有一个数据库，其中包含一些数据，例如 url、ip、国家、州等。

我需要抓取 url 并将值与 url 映射。

说如果我有一个网址[http://www.google.com](http://www.google.com)和国家美国，我需要用抓取的数据映射国家。

我尝试了数据库爬虫，它很慢。因为我有 500 万个 url。

是否有任何其他选项可以通过开放式搜索服务器将数据库值与爬网数据进行映射。？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:51:37.097

您使用的是 OpenSearchServer 1.3.1 吗？

如果是这样，可以使用单独的索引来存储位置参数（由数据库提供）。

在搜索请求中，与全文搜索相比，您将使用“连接查询”从元数据索引中获取数据。

因此，您将获得两个索引： 1\. 具有常用列的索引：标题、内容、URL、主机名... 2\. 具有元数据的索引：国家、州、ip、URL 或/和主机名（用作外键）。

在元数据索引的 fieldmap 中，不要勾选 URL 复选框，以避免页面的网络爬取。我们只需要它与爬网索引进行连接。

使用 MySQL 索引 500 万条小数据应该很快（大约 10 分钟）。您是否适当地设置了缓冲区大小？对于短数据，大缓冲区将加快索引速度。

它可能变慢的另一个原因是 OpenSearchServer 允许的内存量。查看运行时/系统面板以检查是否有足够的可用内存。通常，一个 500 万个索引需要 2 到 4 GB 的内存。

您也可以考虑使用爬网缓存。它使您可以更改索引配置并重新开始抓取会话，而无需真正抓取 URL。如果页面在爬网缓存中可用，则将使用缓存。

# delphi - 如何在类重载时隐藏继承的 TObject 构造函数？

> ID：14003153
> 
> 赞同：25
> 
> 时间：2012-12-22T13:17:18.167
> 
> 标签：delphi, constructor, default-constructor

看看这个类：

```
TTest = class(TObject)  
public  
  constructor Create(A:Integer);overload;  
  constructor Create(A,B:Integer);overload;  
end; 
```

现在，当我们要使用该类时：

```
var  
  test:  TTest;  
begin  
  test:= TTest.Create; //this constructor is still visible and usable!  
end; 
```

谁能帮我隐藏这个构造函数？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-22T13:27:20.447

只要您重载了名为 的构造函数`Create`，就不能`TObject`在派生自 时隐藏无参数构造函数`TObject`。

这在这里讨论：[http ://www.yanniel.info/2011/08/hide-tobject-create-constructor-delphi.html](http://www.yanniel.info/2011/08/hide-tobject-create-constructor-delphi.html)

如果您准备在您的课程之间放置另一个课程，`TObject`您可以使用[Andy Hausladen 的技巧](https://www.idefixpack.de/blog/2011/07/hiding-the-tobject-create-constructor/)：

```
TNoParameterlessContructorObject = class(TObject)
strict private
  constructor Create;
end;

TTest = class(TNoParameterlessContructorObject)
public
  constructor Create(A:Integer);overload;  
  constructor Create(A,B:Integer);overload;  
end; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-22T13:25:33.237

你可以通过引入一个非重载的 Create 来隐藏继承的 Create。由于您需要两个重载的 Create，您可以使用可选的第二个参数将它们合并到一个 Create 中：

```
TTest = class(TObject)  
public  
  constructor Create(A:Integer; B: Integer = 0); 
end; 
```

这将给出编译器警告，表明您正在隐藏默认的无参数构造函数。要摆脱警告，您可以像这样声明隐藏构造函数：

```
TTest = class(TObject)  
public  
  constructor Create(A:Integer; B: Integer = 0); reintroduce;
end; 
```

或者，如果这不可行，您可以引入一个中间类，引入第一个创建，然后是具有重载的第二个的最终类：

```
preTest = class(TObject)  
public  
  constructor Create(A:Integer); reintroduce;
end;

TTest = class(preTest)  
public  
  constructor Create(A,B:Integer);overload;  
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-11T20:43:14.610

另一种选择是在运行时使用`deprecated`关键字和`raise`异常。

```
TTest = class(TObject)  
public  
  constructor Create; overload; deprecated 'Parameterless constructor is not Supported for a TTest class';
  constructor Create(const A: Integer); overload;  
  constructor Create(const A, B: Integer); overload;  
end;

implementation

constructor TTest.Create;
begin
  raise Exception.Create('Parameterless constructor is not Supported for a TTest class.');
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-12T06:49:33.280

通过两次继承，可以防止用户在设计时而不是运行时创建 TMySingleton 类。

```
unit MySingleton;

interface

uses System.Classes, System.SysUtils;

type
  // Constructor Block external access
  THideConstructor = class abstract
  strict protected
    constructor Create; virtual; abstract;
  end;

  // Switching the access to the Create function THideConstructor in TObject through the constructor Overloading
  // Declaring Create Method as a procedure to prevent class call-TMySingle.Create('string') call impossible
  TOverloadConstructor = class(THideConstructor)
  public
    procedure Create(s: string); reintroduce; overload; deprecated 'null method';
  end;

  TMySingleton = class sealed(TOverloadConstructor)
  private
    class var MyObj: TMySingleton;
  strict protected
    // Hiding TOverloadConstructor.Create(s: string);
    // Implement THideConstructor.Create
    constructor Create; override;
  public
    class function Obj: TMySingleton;
    function Echo(const value: string): String;

    destructor Destroy; override;
  end;

implementation

{ TMySingleton }

constructor TMySingleton.Create;
begin
  // TODO
end;

destructor TMySingleton.Destroy;
begin
   Self.MyObj := nil;
   inherited;
end;

function TMySingleton.Echo(const value: string): String;
begin
  result := value;
end;

class function TMySingleton.Obj: TMySingleton;
begin
  if MyObj = nil then
    MyObj := Self.Create;
  result := MyObj;
end;

{ TOverloadContructor }

procedure TOverloadConstructor.Create(s: string);
begin
  // null method
end;

initialization

TMySingleton.MyObj := nil;

finalization

if Assigned(TMySingleton.MyObj) then
  FreeAndNil(TMySingleton.MyObj);

end. 
```

如果用户

```
var
  Singleton: TMySingleton;
begin
  Singleton := TMySingleton.Create; 
```

发生设计时错误。

```
[dcc32 Error] Unit1.pas(33): E2625 Private member 'THideConstructor.Create' is inaccessible here MySingleton.pas(11): Related method: constructor Create; 
```

[在此处输入图像描述](https://i.stack.imgur.com/jTH32.png)

此外，您看不到任何名为**Create**的自动完成提示。

# python - 用于处理 unicode 字符串的 Python 2.7/3 C 模块

> ID：14003156
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:17:37.107
> 
> 标签：python, c, unicode

我在 Python 模块中遇到了关于 UTF-8/16 的不同方法。这是我第一次尝试编写 Python C 模块，我想知道如何从 Unicode 对象中获取所有字节以使用 C 函数处理这些字节。如我所见，这些可以表示为 C char 数组中的简单 ASCII 字符串？

```
static PyObject* unicode_worker(PyObject* self, PyObject* args)
{
Py_UNICODE  *src;
int srclen;
register Py_UNICODE ch;
wchar_t widecharBuffer[4096];

if (! PyArg_ParseTuple(args, "u#", &src, &srclen))
    return NULL;

ch = *src;

PyUnicode_AsWideChar((PyUnicodeObject *)src, widecharBuffer, srclen-1);

Py_RETURN_NONE;
} 
```

现在当我使用 gdb 时：

```
gdb python
run sh.py 
```

我可以看到错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000036010b05c8 in PyUnicodeUCS4_AsWideChar () from /usr/lib64/libpython2.7.so.1.0 
```

PyUnicode_AsWideChar 调用中可以改进什么，现在有什么问题？

**UPD**：Mats Petersson，现在问题更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:09:23.397

最后，我发现我没有注意一件重要的事情：Py_UNICODE 包含我需要的所有文本数据，仅此而已。这种类型的字节大小可能会有所不同，因此在不同的操作系统中应该进行检查。无论如何，在我的 Linux 版本中 wchar_t 和 Py_UNICODE 之间没有区别，所以我面临的唯一下一个问题是设置语言环境。它只是求解器：

```
if (! setlocale(LC_ALL, "ru_RU.utf8")) return PyErr_SetFromErrno(SetLocaleError);
wprintf(L"%ls\n", src); 
```

现在我可以继续尝试python模块，这个问题似乎解决了。

# android - AndEngine：ClassNotFoundException

> ID：14003159
> 
> 赞同：0
> 
> 时间：2012-12-22T13:18:06.673
> 
> 标签：android, andengine, classnotfound

自从我移动了一些类文件以来，我一直在 AndEngine 上收到 ClassNotFoundException。在我无法修复它之后，我也恢复了这些更改。不幸的是我无法恢复正常..

错误日志：

```
12-22 13:55:57.201: D/AndroidRuntime(5527): Shutting down VM
12-22 13:55:57.201: W/dalvikvm(5527): threadid=1: thread exiting with uncaught exception (group=0x411c7300)
12-22 13:55:57.201: E/AndroidRuntime(5527): FATAL EXCEPTION: main
12-22 13:55:57.201: E/AndroidRuntime(5527): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{de.uni_kassel.repopandroidclient/de.uni_kassel.repopandroidclient.LauncherController}: java.lang.ClassNotFoundException: de.uni_kassel.repopandroidclient.LauncherController
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.os.Looper.loop(Looper.java:137)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at java.lang.reflect.Method.invoke(Method.java:511)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at dalvik.system.NativeStart.main(Native Method)
12-22 13:55:57.201: E/AndroidRuntime(5527): Caused by: java.lang.ClassNotFoundException: de.uni_kassel.repopandroidclient.LauncherController
12-22 13:55:57.201: E/AndroidRuntime(5527):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
12-22 13:55:57.201: E/AndroidRuntime(5527):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
12-22 13:55:57.201: E/AndroidRuntime(5527):     ... 11 more 
```

这就是我现在使用的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.uni_kassel.repopandroidclient"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="de.uni_kassel.repopandroidclient.LauncherController"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:36:27.177

转到项目项目属性单击 android，添加您从 gitHub 下载的 AndEngine 项目作为库。取消选中“是库”选项![在此处输入图像描述](../Images/b5ee61b414b7e8ca487a1c95591357ec.png)

# jquery - 像 facebook 一样滚动扩展 jQuery

> ID：14003162
> 
> 赞同：0
> 
> 时间：2012-12-22T13:19:05.067
> 
> 标签：jquery, facebook, scroll, extend

```
<script type="text/javascript">
    jQuery(document).ready(
        function() {
            jQuery('.scroll_container').scrollExtend(
                {   
                    'target': 'div#scroll_items',           
                    'url': 'components/com_a_main_search/more_content.php?limit='+???????, 
                    'newElementClass': 'list_item more_content'
                }
            );

        }
    );
   </script> 
```

如何传递增量值而不是“?????????”

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:22:09.713

将其存储在变量中并传递它。

例如。)

```
<script type="text/javascript">
    jQuery(document).ready(
          $inc = 1;
        function() {
            jQuery('.scroll_container').scrollExtend(
                {   
                    'target': 'div#scroll_items',           
                    'url': 'components/com_a_main_search/more_content.php?limit='+$inc, 
                    'newElementClass': 'list_item more_content'
                }
            );

        }
    );
   </script> 
```

我不太确定这是否是您正在寻找的，因为我无法从这个问题中获得更好的理解。

# css - DNN 自定义皮肤未加载正确的 CSS

> ID：14003168
> 
> 赞同：2
> 
> 时间：2012-12-22T13:19:49.730
> 
> 标签：css, dotnetnuke, skin

我已经安装了 DNN7 社区版。我想根据需要修改“重力”皮肤，所以我创建了一个文件夹，如下所示

```
Portals\_default\Skins\GravityCustom 
```

然后我将所有内容从**Portals_default\Skins\Gravity**文件夹复制到这个新文件夹。我还自定义 Home.ascx 和 Skin.css

我使用主机帐户登录以安装这个新皮肤。我发现它已经在下拉列表中了。在站点设置下，我将这个新皮肤“GravityCustom - Home”设置为站点皮肤。我将 Site 容器保持原样。

当我在浏览器中查看门户时，Home.ascx 显示更改，但 CSS 没有更改。我从 iis 管理器重新启动网站并再次加载仍然没有任何变化。

我运行 http 嗅探器来检查它正在加载的 CSS。我想知道它仍然从 Gravity 文件夹而不是 GravityCustom 加载 CSS。

如何告诉 DNN 加载正确的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:19:40.267

确保您的皮肤在站点级别设置为 GravityCustom，然后仔细检查您所在的实际站点页面设置，以确认它也在使用 GravityCustom。

如果您将其设置为 GravityCustom，则不应从除该文件夹之外的任何其他皮肤中提取 CSS，我认为 portal.css 仍然在所有皮肤中共享。

就像测试一样，您可以在 GravityCustom 中清空 skin.css 的内容，在您的浏览器中进行刷新，看看设计是否全都搞砸了。也许您对错误的 css 文件进行了编辑？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:24:33.373

如果您想查看正在加载的 CSS 文件，您应该执行以下操作。

1) 查看页面的源代码并在 HTML 源代码中搜索 SKIN.CSS，查看那里引用了哪个路径。如果您没有看到对 skin.css 的引用，请确保在主机设置中关闭 CSS 和 JS 的缩小。

选项 2 2) 使用像 Firebug 这样的工具来“检查”页面，它会告诉你正在应用哪个 CSS 以及它来自哪里。看看我不久前创建的这个视频[http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/227/View/Details/Using-Firefox-and-Firebug-to-find-HTML-and -CSS-in-DotNetNuke.aspx](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/227/View/Details/Using-Firefox-and-Firebug-to-find-HTML-and-CSS-in-DotNetNuke.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T06:32:43.927

自定义 CSS 路径集：

```
<dnn:DnnCssInclude ID="DnnCssInclude1" runat="server" FilePath="html_files/style.css" PathNameAlias="SkinPath" /> 
```

或用户控件名称 ( `name.ascx`) 和 CSS 文件名都相同然后自动执行。

# facebook - 如果用户更改了他的个人信息，Facebook 会通知应用程序吗？

> ID：14003171
> 
> 赞同：0
> 
> 时间：2012-12-22T13:20:32.793
> 
> 标签：facebook, facebook-graph-api

我正在开发一个 facebook 应用程序来监控用户个人信息的变化。如果一旦我获得了用户的访问令牌并收集了他的信息并将其存储在数据库中..如果现在信息中发生任何更改..facebook会通知应用程序有关参数的更改还是我必须保留轮询用户数据的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:30:57.163

事实上，Facebook API 允许实时更新！您将能够获取某些类型信息的更新：`User`、、`Page`权限和付款。

给你的一些读物：

*   [https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)
*   [https://developers.facebook.com/docs/howtos/managing-realtime-update-subscriptions/](https://developers.facebook.com/docs/howtos/managing-realtime-update-subscriptions/)

# iphone - 如何从模拟器录制我的 iPhone 应用程序的视频？

> ID：14003177
> 
> 赞同：0
> 
> 时间：2012-12-22T13:21:15.723
> 
> 标签：iphone, ios

我正在使用 OSX 山狮，我已经能够使用快速时间来录制视频以进行屏幕捕获，但它不会录制从 iOS 模拟器产生的声音，而是从麦克风产生的声音。

我想从 iOS 模拟器录制音频和视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:47:31.497

您可以： - 尝试使用专业的屏幕录制软件（Camtasia、Screenflow 等） - 使用虚拟声音输出设备捕获声音并将其写入磁盘 - 将声音输出连接到输入（使用 Cinch 电缆）

有关后两者的更多信息，请参阅[http://bit.ly/UXBJ9N](http://bit.ly/UXBJ9N)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:06:15.563

我最终使用了声音之花（我对此赞不绝口——它比我预期的要简单得多——而且应用程序也很小）来捕获音频，以及一个随机的屏幕捕获实用程序来捕获视频，然后我将它们结合在一起一个视频编辑应用程序。不完美，但它有效。

如果我找到一个更简单的解决方案，我会在这里发布，因为尽管有所有关于这个问题的博客文章，我都找不到理想的东西。

# php - zf2中配置多个数据库

> ID：14003187
> 
> 赞同：28
> 
> 时间：2012-12-22T13:22:56.310
> 
> 标签：php, zend-framework2

如何在 Zend Framework 2 中配置（和使用）多个数据库？目前我的 global.php 中有这个：

```
return array(
    'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=my_db;host=localhost',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
        'username' => 'user',
        'password' => '******',
    ),
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

但我看不到添加第二个的方法。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-23T16:16:23.397

如果您查看 Zend\Db\Adapter\AdapterServiceFactory，您会发现您的适配器配置只指向一个 key `'db'`。这意味着它构建的适配器将始终使用这个（唯一的）配置键。

我建议您创建自己的工厂，如下所示：

```
namespace Your\Namespace;

use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Db\Adapter\Adapter;

class MyAdapterFactory implements FactoryInterface
{

  protected $configKey;

  public function __construct($key)
  {
      $this->configKey = $key;
  }

  public function createService(ServiceLocatorInterface $serviceLocator)
  {
      $config = $serviceLocator->get('Config');
      return new Adapter($config[$this->configKey]);
  }
} 
```

在您的主模块（或任何其他模块）中，将以下内容添加到 Module.php 文件以向 Zend 服务管理器声明适配器工厂：

```
use Your\Namespace\MyAdapterFactory;
use Zend\ModuleManager\Feature\ServiceProviderInterface;

class Module implements ServiceProviderInterface{

//Previous code

public function getServiceConfig()
{
    return array(
        'factories' => array(
            'myadapter1'        => new MyAdapterFactory('dbconfigkey1'),
            'myadapter2'        => new MyAdapterFactory('dbconfigkey2'),
            ),
       );

}

//... 
```

全局配置现在应该如下所示：

```
return array(
'dbconfigkey1' => array(
    'driver'         => 'Pdo',
    'dsn'            => 'mysql:dbname=my_db;host=localhost',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
    'username' => 'user',
    'password' => '******',
),

'dbconfigkey2' => array(
    'driver'         => 'Pdo',
    'dsn'            => 'mysql:dbname=my_db2;host=localhost',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),
    'username' => 'user',
    'password' => '******',
),

); 
```

要使用您需要使用服务管理器调用它们的适配器：

```
$adapter1=$serviceManager->get('myadapter1');
$adapter2=$serviceManager->get('myadapter2'); 
```

# 从 2.2 版开始

抽象服务工厂现在是 zf2 Zend\Db 模块的一部分。可以在“适配器”子键下添加多个配置键：

```
'db'=> array(
    'adapters'=>array(
        'adapter' => array(
            'driver'         => 'Pdo',
            'dsn'            => 'mysql:dbname=test;host=localhost',
            'username' => 'readCredential',
            'password' => '****'
        ),
        'adapter2' => array(
            'driver'         => 'Pdo',
            'dsn'            => 'mysql:dbname=test;host=localhost',
            'username' => 'rwCredential',
            'password' => '****'
        ),
    )
), 
```

但是，AbstractServiceFactory 需要“手动”添加，因为默认情况下并非如此：

```
'service_manager' => array(
    'abstract_factories' => array(
            'Zend\Db\Adapter\AdapterAbstractServiceFactory',
    )
), 
```

适配器可以像以前一样访问：

```
$adapter1=$serviceManager->get('adapter');
$adapter2=$serviceManager->get('adapter2'); 
```

从性能的角度来看，第二种方法更好：将实例化一个对象（抽象工厂）以（可能）创建不同的适配器。而在之前的方法中，每个配置创建一个对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-13T12:01:57.107

[我在https://samsonasik.wordpress.com/2013/07/27/zend-framework-2-multiple-named-db-adapter-instances-using-adapters-subkey/](https://samsonasik.wordpress.com/2013/07/27/zend-framework-2-multiple-named-db-adapter-instances-using-adapters-subkey/)上找到了更好的解释

Zend Framework 2.2 带有`Zend\Db\Adapter\AdapterAbstractServiceFactory`允许我们配置多个命名数据库适配器实例的 abstract_factories。这是一步一步来做的：

1.  在“service_manager”键下的“abstract_factories”类型中注册`Zend\Db\Adapter\AdapterAbstractServiceFactory`。

    //config/autoload/global.php //.... config/autoload/global.php 的一部分 'service_manager' => array( 'abstract_factories' => array( 'Zend\Db\Adapter\AdapterAbstractServiceFactory', ), ),

2.  在“db”键下配置“适配器”子键`config/autoload/global.php`

//config/autoload/global.php //.... config/autoload/global.php 的一部分

```
'db' => array(
    'adapters' => array(

        'db1' => array(
           'driver'         => 'Pdo',
           'dsn'             => 'mysql:dbname=zf2_staging;host=localhost',
           'driver_options'  => array(
                PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
            ),
        ),

        'db2' => array(
           'driver'         => 'Pdo',
           'dsn'             => 'mysql:dbname=zf2_test;host=localhost',
           'driver_options'  => array(
                PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
            ),
        ),
    ),
), 
```

3.  在“db”键下配置“适配器”子键`config/autoload/local.php`

//config/autoload/local.php

```
return array(
    'db' => array(
        'adapters' => array(
            'db1' => array(
                'username' => 'root',
                'password' => '',
            ),
            'db2' => array(
                'username' => 'other_user',
                'password' => 'other_user_passwd',
            ),
        ),
    ),
); 
```

3.  使用“db1”或“db2”作为 ServiceManager 中的 db 适配器调用适配器

    $sm->get('db1');

    $sm->get('db2');

如果您需要获取`$sm->get(‘Zend\Db\Adapter\Adapter’)`主适配器，'db1'和'db2'作为特定用途的其他适配器，则需要直接在db下定义主适配器，因此配置`config/autoload/global.php`如下：

//config/autoload/global.php

```
return array(
    'db' => array(
        //this is for primary adapter....
        'driver'         => 'Pdo',
        'dsn'             => 'mysql:dbname=zf21_learn;host=localhost',
        'driver_options'  => array(
             PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
         ),

        //other adapter when it needed...
        'adapters' => array(

            'db1' => array(
               'driver'         => 'Pdo',
               'dsn'             => 'mysql:dbname=zf2_staging;host=localhost',
               'driver_options'  => array(
                    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
                ),
            ),
            'db2' => array(
               'driver'         => 'Pdo',
               'dsn'             => 'mysql:dbname=zf2_test;host=localhost',
               'driver_options'  => array(
                    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
                ),
            ),

        ),
    ),
    'service_manager' => array(
        // for primary db adapter that called
        // by $sm->get('Zend\Db\Adapter\Adapter')
        'factories' => array(
            'Zend\Db\Adapter\Adapter'
                    => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
        // to allow other adapter to be called by
        // $sm->get('db1') or $sm->get('db2') based on the adapters config.
        'abstract_factories' => array(
            'Zend\Db\Adapter\AdapterAbstractServiceFactory',
        ),
    ),
); 
```

`config/autoload/global.local.php`也应该像下面这样配置：

//config/autoload/local.php

```
return array(
    'db' => array(
        // for primary db adapter that called
        // by $sm->get('Zend\Db\Adapter\Adapter')
        'username' => 'root',
        'password' => '',

        // to allow other adapter to be called by
        // $sm->get('db1') or $sm->get('db2') based on the adapters config.
        'adapters' => array(
            'db1' => array(
                'username' => 'root',
                'password' => '',
            ),
            'db2' => array(
                'username' => 'other_user',
                'password' => 'other_user_passwd',
            ),
        ),
    ),
); 
```

# mysql - 在 mysql 中使用准备好的语句插入查询？

> ID：14003189
> 
> 赞同：4
> 
> 时间：2012-12-22T13:23:03.237
> 
> 标签：mysql, stored-procedures, prepared-statement

我有一个这样的存储过程：

```
SET @query = CONCAT('insert into tblcommodity (id , idname , count)values (',p1, p2,p3,')');
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

但是当我想运行它时，它有这个错误：

```
> Procedure execution failed 1136 - Column count doesn't match value
> count at row 1 
```

另一件事是，当我只运行插入代码时，它就会运行！

请帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T13:30:00.520

恕我直言，你这样做的方式有点违背了准备好的陈述的全部目的。我会改用这种形式：

```
SET @query = 'INSERT INTO tblcommodity (id, idname, count) VALUES (?, ?, ?)';
PREPARE stmt FROM @query;
EXECUTE stmt USING @p1, @p2, @p3; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:27:48.993

它应该是

```
SET @query = CONCAT('insert into tblcommodity (id , idname , count)values (',',',p1,',', p2,',',p3,')'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:31:02.183

试试这个：

```
SET @query = CONCAT("insert into tblcommodity (id , idname , count) values (", p1, ", '", p2,"',",p3,")"); 
PREPARE stmt FROM @query; 
EXECUTE stmt; 
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T14:59:06.487

顺便说一句，您的代码：

```
SET @query = CONCAT('insert into tblcommodity (id , idname , count)values (',p1, p2,p3,')'); 
```

有一个逗号开头：

```
 ,p1,p2,p3 
```

这意味着语句中的四个字段。这就是为什么您会收到“列数与值不匹配”的原因

# android - TextColor 和listviews 背景一样怎么办？

> ID：14003194
> 
> 赞同：0
> 
> 时间：2012-12-22T13:23:40.580
> 
> 标签：android, listview

我的应用程序中使用 HoloLight 主题有一个非常简单的 ListActivity。我的 ListView 正在填充，但文本仅在突出显示项目时可见。我该如何解决这个问题，为什么会发生？

**编辑**：澄清。我不想在每个列表视图中本地解决这个问题，而是想找到一个全局解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:01:19.963

有几个很好的答案。但是，其中大多数包括编写一个新的适配器，这是不必要的工作。最重要的是您应该在 xml 中设置所需的颜色。我用 simple_list_item_2 的源代码编写了一个新布局，并添加了一行来更改文本颜色。经过测试，它可以工作。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/*
 * Copyright (C) 2006-2007 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->

<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:mode="twoLine"
    android:paddingBottom="2dip"
    android:paddingTop="2dip" >

    <TextView
        android:id="@android:id/text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="6dip"
        android:layout_marginTop="6dip"
        android:textColor="?android:attr/textColorPrimaryInverseDisableOnly"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@android:id/text2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@android:id/text1"
        android:layout_below="@android:id/text1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</TwoLineListItem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:25:01.800

您可以尝试制作自己的适配器，然后可以使用它来显示 ListView 中的项目

您可以在此处找到更多信息：[http](http://www.vogella.com/articles/AndroidListView/article.html) ://www.vogella.com/articles/AndroidListView/article.html但我知道互联网上还有许多其他网站可以提供很好的解释（Google 是您的朋友）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:26:24.800

**更新：**

这是一个加载自定义布局的示例自定义适配器，只要您在所有列表中使用这个，它们的行为方式和外观都会相同，并且要使其工作，您只需要定义您想要的显示以及您使用的是什么类型的对象。

自定义适配器：

```
public class YourAdapter extends ArrayAdapter<String> {
    private final Context context;
    private List<Object> YourObjects;

    public YourAdapter(Context context, List<Object> YourObjects, List<String> headings) {
        super(context, R.layout.list_view_stories, headings);
        this.context = context;
        this.YourObjects = null != YourObjects ? YourObjects : new ArrayList<Object>();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        /*Setup the things need it to inflate each row*/
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.list_view_stories, parent, false);

        /*Retrieves the views for the heading and title from the layout*/
        TextView heading = (TextView) rowView.findViewById(R.id.title);
        TextView summary = (TextView) rowView.findViewById(R.id.summary);

        heading.setText(YourObjects.get(position).getHeading());
        summary.setText(YourObjects.get(position).getSummary());

        /*Returns the row with the content placed*/
        return rowView;

    }

} 
```

自定义布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="20dip"
    android:background="@color/ligth_blue" >

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/heading"
        android:textColor="@color/black"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/summary"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@string/summary"
        android:textColor="@color/white"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

更改布局属性中的颜色。

```
android:textColor="@color/black" 
```

然后在值文件夹中创建一个资源，这是我使用的一些颜色的示例。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <color name="black">#000000</color>
    <color name="white">#ffffff</color>
    <color name="gray">#909090</color>
    <color name="ligth_blue">#2E9AFE</color>

</resources> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T13:28:10.993

使用自定义 ListView。您以自己的方式自定义每一行。有很多 listview 的例子只是谷歌它。[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)。也看看这个链接。[http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)

# ajax - ajax 加载后绑定多个事件处理程序

> ID：14003202
> 
> 赞同：1
> 
> 时间：2012-12-22T13:25:39.590
> 
> 标签：ajax, jquery, javascript-events, event-handling

我正在使用该`.load()`方法将一些内容加载到 html div 中。

```
$("#cards").load("/cards/?offset="+offset); 
```

新内容包含几个`<a>`我想绑定事件处理程序的内容。首先，我使用的`.on()`方法是：

```
$('body').on('click', '#excerpt-slide', function() { alert('Link 1 Clicked'); } 
```

当我尝试将第二个事件处理程序绑定到不同的`<a>`时，单击该链接不会触发匿名函数：

```
$('body').on('click', '#add-count', function() { alert('Link 2 Clicked'); } 
```

我是否需要取消绑定单击事件处理程序才能使其正常工作？

请帮忙。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:34:46.283

您可能缺少一个 ID 为 add-count 的锚点。为了您的信息，您不必取消绑定事件。jQuery 可以为一个元素处理多个事件。

`)`您的代码中缺少关闭

```
$('body').on('click', '#add-count', function() { alert('Link 1 Clicked'); } ); 

$('body').on('click', '#add-count', function() { alert('Link 2 Clicked'); } ); 
```

[检查演示](http://jsfiddle.net/f6Ljg/)

这就是我可以用代码和您提供的详细信息来说明的全部内容

# oauth-2.0 - 通过 OAuth 2.0 使用服务帐户调用 v3 Google 日历 API 时出现 403 禁止消息

> ID：14003203
> 
> 赞同：9
> 
> 时间：2012-12-22T13:25:48.450
> 
> 标签：oauth-2.0, google-calendar-api, http-status-code-403

这是我关于使用 Google Calendar API 和 OAuth2 时出现 401 错误的线程的后续内容，可在[此处找到](https://stackoverflow.com/questions/10112939/login-required-401-unauthorized-message-when-calling-the-v3-google-calendar-ap)

这包含导致我下一个问题的帐户设置的详细信息，因此我不会在此线程中重复自己。

好的，所以当我调用以下代码更新日历事件时，我收到 403 禁止错误。

```
for (Event event : events.getItems())
{
    event.setSummary("XXX" + event.getSummary());

    Event updatedEvent = calendar.events().update(CALENDAR_ID, event.getId(), event).execute();
} 
```

这是返回的错误消息：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
{
    "code" : 403,
    "errors" : [ {
        "message" : "Forbidden"
     } ],
    "message" : "Forbidden"
} 
```

我尝试了什么？好吧，我已经重新阅读了关于服务帐户的（相当糟糕的）Google 文档，重新检查了我的 API 控制台帐户设置，尝试更改构建凭据的代码（这会导致其他错误，所以是我之前线程的回归） .

简而言之，没有任何效果，所以我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-22T19:02:55.133

解决了，感谢[这个](https://stackoverflow.com/a/11897793/811108)帖子。

您必须将您的 Google 日历帐户中的日历与 Google API 控制台中生成的服务帐户电子邮件共享，例如*284XXXXXXXX@developer.gserviceaccount.com*。

我现在可以从我的网络服务更新我的日历。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-02T12:56:55.060

即使在与贾斯汀的回答中共享日历后，我也遇到了同样的错误。在与另一个工作样本比较后发现我已经设置

```
var SCOPES = ["https://www.googleapis.com/auth/calendar.readonly"]; 
```

代替

```
var SCOPES = ["https://www.googleapis.com/auth/calendar"]; 
```

希望这可以帮助任何犯过类似错误并遇到此错误的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-12T12:25:35.633

就我而言，我必须在 Google API 控制台中启用 CalDAV API。如果禁用它会给出 403 响应。

我知道这是一个老问题，但这可能对某人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-02T23:08:04.330

对我来说，在尝试了上面所有建议的解决方案之后，没有任何效果。在查看了他们在[文档](https://developers.google.com/calendar/api/v3/reference/events/list)中使用的范围后，我得到了它的工作。

我正在获取事件，似乎`https://www.googleapis.com/auth/calendar`范围还不够。我也必须添加`https://www.googleapis.com/auth/calendar.events`到我的范围。

希望它可以帮助那里的人！

# bash - 用 xargs grep 并找到

> ID：14003207
> 
> 赞同：2
> 
> 时间：2012-12-22T13:26:59.480
> 
> 标签：bash, shell, grep, find

bash guru ;) 我正在尝试改进 bash 中的一些字符串，这些字符串在特定文件中 grep 特定关键字的匹配项。它看起来像这样：

```
find /<path>/hp -iname '*.ppd' -print0 | xargs -0 grep "\*ModelName\:" 
```

这对我来说工作得非常快！比这个快 20 倍：

```
find /<path>/hp -iname '*.ppd' -print0 | xargs -0 -I {} bash -c 'grep "\*ModelName\:" {}' 
```

但问题是，在第一个脚本中，我得到以下几行：

```
/<path>/hp/hp-laserjet_m9040_mfp-ps.ppd:*ModelName: "HP LaserJet M9040 M9050 MFP" 
```

但想要的结果只是

```
*ModelName: "HP LaserJet M9040 M9050 MFP" 
```

（如在第二个脚本中）。我怎样才能实现它？

PS：我正在使用`find`脚本的灵活性和未来改进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T14:19:43.967

不需要`find`：

```
grep -rh --include "*.ppd" "\*ModelName\:" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T13:29:29.000

从输出中抑制文件名的`-h`选项。`grep`

```
find /<path>/hp -iname '*.ppd' -print0 | xargs -0 grep -h "\*ModelName\:" 
```

如果您`grep`不提供`-h`使用`cat`：

```
find /<path>/hp -iname '*.ppd' -print0 | xargs -0 cat | grep "\*ModelName\:" 
```

此外，为了您的信息，如果您想追求第二个选项，请`find`提供`-exec`将变得不必要的选项：`xargs`

```
find /<path>/hp -iname '*.ppd' -exec grep grep "\*ModelName\:" '{}' \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:55:16.190

您可以完全摆脱 find （在 bash 中）：

```
shopt -s globstar
grep -h "\*ModelName\:" /<path>/hp/**.[pP][pP][dD] 
```

*如果你有一个巨大*的目录树（我怀疑你的情况），可能会慢一点。

*   亲：只启动了一个进程！
*   缺点：您提到的未来改进可能更难以实施。

在这种情况下，您最好使用：

```
find /<path>/hp -iname '*.ppd' -exec grep -h "\*ModelName\:" {} + 
```

（注意`+`最后：只会`grep`启动一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T11:46:44.387

想想你的输出线

```
/<path>/hp/hp-laserjet_m9040_mfp-ps.ppd:*ModelName: "HP LaserJet M9040 M9050 MFP" 
```

作为由冒号分隔的三个字段的记录。如果您以这种方式考虑输出行，那么您希望提取第三个字段作为最终答案。**如果您对awk**一无所知，您至少应该知道如何使用特定的列分隔符打印一列输出数据，如下所示：

```
find /<path>/hp -iname '*.ppd' -print0 | xargs -0 grep "\*ModelName\:" | awk -F:'{ print $3}' 
```

**关于awk** ，您应该了解的另一件事是如何总结（偶尔取平均值）特定输出数据列中的数字，但这是另一回事了 :)

**将awk**命令附加到命令链的优势在于，您正在构建并利用优化命令链的快速性能:)

在您的情况下，答案是**grep**与**xargs**和**find**和**awk** :)

# python - Python decode() 不起作用 - 但仅在 windows 下

> ID：14003215
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:28:21.527
> 
> 标签：python, character-encoding, python-3.x, decode

好的......这真的很简单。我有一个（非常简单的）脚本，它从 url 获取数据，然后对其进行解码（如果它可以工作，我稍后会使用它）。

```
rsp=urllib.request.urlopen(myurl)
print(rsp.read().decode("cp1255")) 
```

当我执行这个时，我得到

```
 File "C:\Program Files\Python32\lib\encodings\cp1252.py", line 19, in encode 
 return codecs.charmap_encode(input,self.errors,encoding_table)[0]
 UnicodeEncodeError: 'charmap' codec can't encode characters in position 
```

不过，这种情况只会在 Windows 上发生！！！

我有一台 Linux 机器（Ubuntu 12.10，喜欢它）相同的 IDE（eclipse）相同的 python 版本（3.2.3）相同的脚本，它运行良好。我得到了所有的文本，它是可读和可处理的。我检查了目录 - cp1255 存在。我试图用“cp1252”替换“cp1255” - 它可以工作，但编码的文本是乱码。

我在这里错过了什么吗？我在两个项目中都得到了相同的设置，但它目前只在 Linux 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:17:39.213

正如错误消息告诉您的那样，问题根本不存在`decode()`。您遇到的问题是`encode()`. Python 不能直接将 unicode 发送到您的终端，它必须使用您的终端声称支持的任何编码进行编码。

如果您在 Windows 上运行，那么您可能在命令窗口中运行。`chcp`通过在命令提示符下键入来检查您正在使用的代码页；在我的系统上显示我正在使用代码页 850，但我认为从错误中您的命令提示符是 cp1252。您尝试打印的文本必须包含无法使用命令提示符的代码页进行编码的字符。

如果`print`只是用于调试，那么您可以尝试：

```
print(repr(rsp.read().decode("cp1255"))) 
```

看看是否有帮助。

或者，在运行脚本之前`chcp 1255`，将命令提示符设置为与数据相同的代码页，或者`chcp 65001`将命令提示符设置为使用 utf-8。不要忘记检查您使用的字体是否支持希伯来语字符。

# google-apps-script - Google 协作平台：插入网站内页面的发布日期

> ID：14003218
> 
> 赞同：0
> 
> 时间：2012-12-22T13:29:09.727
> 
> 标签：google-apps-script, google-sites

我对 Google 网站非常陌生，我想知道如何为网站内的页面插入发布日期和最后更新日期（而不是使用博客模板）。

看起来我可以使用 Apps Scripts

```
utilities.formatDate(SitesApp.getActivePage().getDatePublished(), "GMT", "d-MMM-yyyy") 
```

和

```
ContentService 
```

但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:48:23.447

您可以使用以下代码在您的 Google 网站上显示上次更新和发布日期。您可以使用此代码创建一个 Apps 脚本小工具，然后您可以将其嵌入 Google 网站。

```
function doGet(e){
  var app= UiApp.createApplication();
  var page = SitesApp.getActivePage();
  app.add(app.createHTML('Last updated: ' + page.getLastUpdated()));
  app.add(app.createHTML('Published: '+page.getDatePublished()));
  return app;
} 
```

[你可以在这里](https://sites.google.com/site/appsdatepicker/last-updated-published-test)看到一个演示

有关 Google 网站中小工具的更多信息，请访问[此页面](https://developers.google.com/apps-script/execution_gadgets)

# java - 如何更改全息主题中的水平蓝色进度条

> ID：14003219
> 
> 赞同：2
> 
> 时间：2012-12-22T13:29:12.783
> 
> 标签：java, android

您好，我有一个 tabhost 和一个全息主题，我试图更改您单击的选项卡下的蓝色，但没有任何成功。这是 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fitsSystemWindows="false"
android:orientation="vertical"
android:scrollbarAlwaysDrawVerticalTrack="false" >

    <LinearLayout
                android:id="@+id/tabhost_parent"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

          <TabHost
            android:id="@+id/main_tabhost"
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            >

            <LinearLayout
                android:id="@+id/tabhost_lierlayout"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/regi_input02_tap"
                    android:showDividers="middle">

                </TabWidget>

                 <LinearLayout 
                    android:id="@+id/header_layout"
                    android:layout_width="match_parent"
                    android:layout_height="32dp"
                    android:orientation="horizontal" 
                    android:background="@android:color/background_dark">

                     <TextView
                        android:layout_width="wrap_content" 
                        android:layout_height="wrap_content"
                        android:text="Test Text"  
                        android:textSize="23dp" 
                        android:textColor="@android:color/background_light"
                     />
                </LinearLayout>

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" 
                    android:padding="5dp">

                    <LinearLayout
                        android:id="@+id/sports_tab"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/busines_tab"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent">
                        <TextView 
                             android:layout_width="fill_parent" 
                             android:layout_height="wrap_content"
                             android:text="busines"   
                        />

                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/news_tab"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >
                        <TextView 
                             android:layout_width="fill_parent" 
                             android:layout_height="wrap_content"
                             android:text="news"   
                        />
                    </LinearLayout>
                </FrameLayout>
            </LinearLayout>
         </TabHost>
    </LinearLayout>
</LinearLayout> 
```

[图片链接](http://postimage.org/image/3tsl6ex4n/)

它看起来类似于上面链接中的图片，我要做的就是更改 tab1 下的蓝色条纹。

我被搜索了大约 2 天，但没有找到任何关于如何执行此操作的好的解释。

我试图玩
这样的资源：

这是 manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.brodgate.mivzaki"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/CustomTheme" >

        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

这是我试图为蓝线改变的风格，但没有成功

样式.xml

```
<style name="CustomTheme" parent="android:Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar</item>
</style>

<style name="ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@color/action_bar_background</item>
    <item name="android:showDividers">beginning</item>
    <item name="android:divider">@color/action_bar_divider</item>
</style> 
```

我想要的只是改变线条颜色，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:22:56.477

因为你有一个 TabHost，所以它比使用 ActionBar 的选项卡要复杂得多。我们为我们的应用解决的解决方案是为标签指示器自定义框架 9 补丁图像。由于似乎没有办法引用自定义选项卡指示器，因此我们也必须复制选项卡视图并在为 TabHost 创建选项卡时使用它。您必须下载完整的框架源代码才能获取其中一些文件。这是您需要做的：

1) 从框架源中复制文件 /data/res/drawable/tab_indicator_holo.xml。

2) 复制 tab_indicator_holo.xml 中引用的 9-patches 并修改它们以适合您的应用程序。对于要包含的每个密度，您需要以下文件：

*   tab_selected_pressed_holo.9.png
*   tab_unselected_pressed_holo.9.png
*   tab_selected_focused_holo.9.png
*   tab_unselected_focused_holo.9.png
*   tab_selected_holo.9.png
*   tab_unselected_holo.9.png

3）创建自定义选项卡样式：

```
<style name="MyCustomTabView" parent="@android:style/Widget.Holo.Tab">
    <item name="android:background">@drawable/tab_indicator_holo</item>
</style> 
```

4）从框架创建标签视图布局的副本：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2011 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="?android:attr/actionBarSize"
    android:orientation="horizontal"
    style="@style/MyCustomTabView">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:paddingTop="12dip"
        android:paddingBottom="12dip"
        android:paddingLeft="12dip"
        android:paddingRight="12dip"
        android:visibility="gone"/>

    <TextView
        style="@android:style/Widget.Holo.ActionBar.TabText"
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:visibility="gone"/>

</LinearLayout> 
```

5) 最后一步是在您的活动代码中，当您创建选项卡时，您将指示器设置为您从上述布局创建的视图。这就是它的样子（这是 ApiDemos 示例应用程序中的 Tabs1.java，经过修改以创建自定义指标视图）：

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.apis.view;

import android.app.TabActivity;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import android.view.LayoutInflater;

import com.example.android.apis.R;

/**
 * An example of tabs that uses labels ({@link TabSpec#setIndicator(CharSequence)})
 * for its indicators and views by id from a layout file ({@link TabSpec#setContent(int)}).
 */
public class Tabs1 extends TabActivity {

    private View createTabIndicator(Drawable icon, String title) {
        if (mInflater == null) {
            mInflater = getLayoutInflater();
        }

        View view = mInflater.inflate(R.layout.tab_view, null);

        if (icon != null) {
            ImageView imageView = (ImageView) view.findViewById(R.id.icon);
            imageView.setImageDrawable(icon);
            imageView.setVisibility(View.VISIBLE);
        }

        if (title != null) {
            TextView textView = (TextView) view.findViewById(R.id.title);
            textView.setText(title);
            textView.setVisibility(View.VISIBLE);
        }

        return view;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TabHost tabHost = getTabHost();

        LayoutInflater.from(this).inflate(R.layout.tabs1, tabHost.getTabContentView(), true);

        tabHost.addTab(tabHost.newTabSpec("tab1")
                .setIndicator(createTabIndicator(null, "tab1"))
                .setContent(R.id.view1));
        tabHost.addTab(tabHost.newTabSpec("tab2")
                .setIndicator(createTabIndicator(null, "tab2"))
                .setContent(R.id.view2));
        tabHost.addTab(tabHost.newTabSpec("tab3")
                .setIndicator(createTabIndicator(null, "tab3"))
                .setContent(R.id.view3));
    }
} 
```

如果您不需要确切的 Holo 外观，则可以稍微简化一下。希望这可以帮助！

# php - OO PHP 构造变量错误

> ID：14003224
> 
> 赞同：-4
> 
> 时间：2012-12-22T13:29:49.480
> 
> 标签：php

做一些OO PHP。我在第 11 行和第 31 行得到未定义的变量，我不知道为什么。

[http://pastebin.com/D0rNWdn3](http://pastebin.com/D0rNWdn3)

```
<?php 

    class geometricObject {
        private $color;

        public function __construct($color){
            $this->color = $color;
        }

        public function getColor(){
            return $color;
        }

        public function setColor($color){
            $this->color = $color;
        }
    }

    class circle extends geometricObject {
        private $radius;

        public function __construct($radius, $color){
            parent::__construct($color);
            $this->radius = $radius;
        }

        public function getRadius(){
            return $radius;
        }

        public function getArea(){
            return (pi() * pow($radius, 2));
        }

        public function getSurfaceArea(){
            return (2 * pi() * $radius);
        }

        public function setRadius($radius){
            $this->radius = $radius;
        }
    }

?>

<?php 

    include_once 'templates/classes.php';

    $myCircle = new circle(10, "green");

    $circleArea = $myCircle->getArea();

    $color = $myCircle->getColor();

    include_once 'output.php';

?>

<html>
<body>

<?php echo $circleArea; echo $color; ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:31:22.440

你忘了`$this->`

```
return $this->color; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T13:31:28.947

您收到错误是因为 $color 在方法范围内未定义。您只需将`$color`参数传递给构造函数和 setColor 方法。

要在其他类方法中访问它，您将使用`$this->color`not`$color`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:33:15.673

您已经忘记了`$this`之前应该这样做的变量： `return $this->color;`

# php - strptime() 函数未定义

> ID：14003227
> 
> 赞同：6
> 
> 时间：2012-12-22T13:30:02.057
> 
> 标签：php, datetime, strptime

我有一个奇怪的`strptime()`功能问题。

php 手册中不需要 php 扩展安装，它在**PHP 5 >= 5.1.0**中可用。**我已经使用php 5.3.5**在 Windows 7 上安装了 wamp 服务器。但是当我调用这个函数时，它会返回一个致命错误，上面写着`function strptime is undefined`. 我不明白什么是问题。win7有这个功能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-22T13:31:41.563

> win7有这个功能吗？

[来自 PHP 手册](http://php.net/manual/en/function.strptime.php)

> ```
> Note: This function is not implemented on Windows platforms. 
> ```

# c# - 带有子接口的 ASP.NET MVC 4 ViewModel

> ID：14003235
> 
> 赞同：7
> 
> 时间：2012-12-22T13:31:20.007
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-mvc-viewmodel

有没有办法在没有自定义模型绑定的情况下处理这个问题？

```
public class MyViewModel {
  public string UserId { get; set; }
  public IJob Job { get; set; }
}

public interface IJob {
  public long Id { get; set; }
  public string CompanyName { get; set; }
}

public class FullTimeJob : IJob {
  // omitted for brevity
}

public class Internship : IJob {
  // omitted for brevity
} 
```

我遇到的问题是默认模型绑定器中出现错误，因为它不了解要实例化的 IJob 实现。当我创建 MyViewModel 时，我将 FullTimeJob 的一个实例设置到它的 Job 属性中。我猜 ASP.NET 不能保留实现类型？

对此的最佳实践解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:44:51.257

视图只是 UI 和控制器之间的数据载体。因此，您可以简单地将 Id 和 CompanyName 属性添加到您的视图中。因为您要做的就是从 UI 中获取 Id 和公司价值。从 UI 获取数据时，它是实习还是全职工作可能并不重要。当您处理从 UI 获得的数据时，这可能很重要，但这不是 View 的责任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T03:42:45.437

一种选择虽然不是特别优雅，但可能如下：

```
public class MyViewModel {
    public string UserId { get; set; }
    public FulltimeJob FulltimeJob { get; set; }
    public InternJob InternJob { get; set; }

    public IJob Job { get { return FulltimeJob ?? InternJob; } }
} 
```

这使您可以通过 Job 属性轻松访问共享属性，同时保持对任何特定于类的属性的访问。

然后，您可以检查 POST 控制器方法中填充了哪些属性并采取相应措施。

# wpf - WPF 自定义边框/面板

> ID：14003239
> 
> 赞同：2
> 
> 时间：2012-12-22T13:31:34.103
> 
> 标签：wpf, drop-down-menu, menu

我对 WPF 开发很陌生，我无法找到关于如何实现看起来像这样的自定义边框/面板（或下拉菜单）的决定性答案：

![Wpf 自定义下拉菜单/面板的图像](../Images/606136790f23d9ec06f881fb4c3483b9.png)

这个想法是制作一个下拉菜单/面板（**带有中心箭头**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:43:24.237

这应该为您指明正确的方向：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="24"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="24" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Polygon
         Fill="LightGray"
        Grid.Column="1">
        <Polygon.Points>
            <Point X="12" Y="0" />
            <Point X="0" Y="24" />
            <Point X="24" Y="24" />
        </Polygon.Points>
    </Polygon>
    <ListBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" />
</Grid> 
```

当然，您可以根据需要自定义它...请注意，在此示例中，我设置了顶部中间单元格的高度和宽度以使箭头为 24X24

# c# - 必须声明表变量@table

> ID：14003241
> 
> 赞同：11
> 
> 时间：2012-12-22T13:31:42.203
> 
> 标签：c#, sql, console-application

我是 C# 和 SQL 的初学者，我有这个我想要执行的 SQL 插入语句。它要求我要插入的其他变量中的表名。

但是当我运行这个控制台应用程序时，我得到了这个错误：

> 必须声明表变量@table

这是代码的一部分：

```
StreamReader my_reader =  getFile(args);
string CS = formCS();
try
{
    using (SqlConnection con = new SqlConnection(CS))
    {
        SqlCommand com = new SqlCommand("insert into @table (time, date, pin) values (@time, @date, @pin)", con);                    
        con.Open();
        Console.WriteLine("Enter table name:");
        Console.Write(">> ");
        string tblname = Console.ReadLine();
        com.Parameters.AddWithValue("@table", tblname);

        string line = "";
        int count = 0;
        while ((line = my_reader.ReadLine()) != null)
        {
            Dictionary<string, string> result = extractData(line);                        
            com.Parameters.AddWithValue("@time", result["regTime"]);
            com.Parameters.AddWithValue("@date", result["regDate"]);
            com.Parameters.AddWithValue("@pin", result["regPin"]);
            count += com.ExecuteNonQuery();
            com.Parameters.Clear();                        

        }
        Console.WriteLine("Recoreds added : {0}", count.ToString());
        Console.WriteLine("Press Enter to exit.");
    }
    Console.ReadLine();
}
catch (SqlException ex)
{
    Console.WriteLine(ex.Message);
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);                
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-22T13:37:05.700

你不能这样做。您不能像以前那样将表名作为参数传递：

```
SqlCommand com = new SqlCommand("insert into @table ...");
...
com.Parameters.AddWithValue("@table", tblname); 
```

你可以这样做：

```
Console.WriteLine("Enter table name:");
Console.Write(">> ");
string tblname = Console.ReadLine();

string sql = String.Format("insert into {0} (time, date, pin) values ... ", tblname);

SqlCommand com = new SqlCommand(sql, con);                    

... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T13:44:20.373

表名不能是 sql 查询中的输入参数。但是，您始终可以“在将 sql 字符串传递给 SqlCommand 之前准备好它，如下所示：

```
var sqlString = string.Format("insert into {0} (time, date, pin) values (@time, @date, @pin)", tblname) 
```

进而

```
SqlCommand com = new SqlCommand(sqlString);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T10:00:42.307

请注意，这可能允许像这样的 SQL 注入攻击......

```
string tblname = "; DROP TABLE users;";
var sqlString = string.Format("insert into {0} (time, date, pin) values (@time, @date, @pin)", tblname) 
```

[https://en.wikipedia.org/wiki/SQL_injection](https://en.wikipedia.org/wiki/SQL_injection)

# c++ - 在 C++ 树中存储字符

> ID：14003242
> 
> 赞同：0
> 
> 时间：2012-12-22T13:31:44.680
> 
> 标签：c++, tree, character, binary-tree

如何在二叉树中存储字符值？我有一个包含数据的 CSV 文件，我必须检索该数据，搜索数据库，然后插入搜索结果。我使用标准模板库中的 C++ 映射来做到这一点，但现在我的任务是使用树结构来做到这一点。在网上搜索，但没有找到任何关于字符的信息，只有整数，如下所示：[http ://www.cprogramming.com/tutorial/lesson18.html](http://www.cprogramming.com/tutorial/lesson18.html)

谢谢。

爱丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:34:15.777

只需使用链接中的代码并替换`int`为`char`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:46:30.133

我不会使用“我自己的”二叉树。我建议您使用 std::map 或 std::vector （取决于数据量和许多其他因素） - 从矢量开始，因为这是“最简单的” - 如果可以证明是“坏的” ，然后改变它——如果你的代码写得很好，它不应该有太大的改变。

但更重要的是，当您说“字符”时，我怀疑您实际上是指“字符串”。因此，具有包含 csv 文件中元素的类或结构的向量将是一个合适的解决方案。

# java - 警报对话框的按钮被切断

> ID：14003243
> 
> 赞同：11
> 
> 时间：2012-12-22T13:31:48.923
> 
> 标签：java, android, android-alertdialog

我有一个警报对话框，当有人触摸特定按钮时会启动它。警报对话框包含一个由布局 xml 文件定义的视图。此布局包含多个控件，例如复选框、编辑文本字段……这些控件都位于滚动视图中，因此如果整个内容不适合屏幕，您可以滚动浏览内容。

现在的问题是，当我启动此警报对话框时，底部的按钮被截断了屏幕。尽管滚动条正在工作并且我可以滚动浏览警报对话框的内容，但有时警报对话框的按钮并不完全可见。

这意味着：有时，一切都很好，我可以看到警报对话框的按钮，有时出于奇怪的原因，按钮被切断了。我认为这是一个视图对于警报对话框来说太大并且将按钮向下推的问题。例如，视图包含一个编辑文本控件。如果我在那里输入我的名字，一切都很好。但是如果我在这个编辑文本中添加一个新行，按钮就会开始被剪掉一点。我做错了什么？我认为滚动视图会处理我的视图的超大尺寸，以便警报对话框适合屏幕。我的应用程序始终处于纵向模式。

视图代码：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="5dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/bitteeinstellungenwaehlen" />

        <EditText
            android:id="@+id/edtTeam1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/hteam1"
            android:text="Christoph" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/edtTeam2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/hteam2"
            android:text="Lea" />

        <EditText
            android:id="@+id/edtTeam3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/hteam3"
            android:text="Ludwig" />

        <EditText
            android:id="@+id/edtTeam4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/hteam4"
            android:text="Anja" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/weitereeinstellungen" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <CheckBox
                android:id="@+id/chkModerationMode"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/moderationsmodus" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:text="@string/info" />

        </LinearLayout>

        <CheckBox
            android:id="@+id/chkPassOver"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="@string/weitergeben" />

        <CheckBox
            android:id="@+id/chkBlackScreen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/blankscreen" />

    </LinearLayout>

</ScrollView> 
```

这就是我启动警报对话框的方式：

```
 final AlertDialog.Builder alert = new AlertDialog.Builder(QuizEditor.this);

    alert.setTitle(getString(R.string.speichernUndVorschau) + "...");
    alert.setMessage("");

    LayoutInflater inflater = LayoutInflater.from(QuizEditor.this);
    final View layFrage = inflater.inflate(R.layout.layoutquizsettings,null);
    alert.setView(layFrage);

    final CheckBox chkModeration = (CheckBox) layFrage.findViewById(R.id.chkModerationMode);
    final CheckBox chkPassOver = (CheckBox) layFrage.findViewById(R.id.chkPassOver);
    final CheckBox chkBlackScreen = (CheckBox) layFrage.findViewById(R.id.chkBlackScreen);

    final EditText edtTeam1 = (EditText) layFrage.findViewById(R.id.edtTeam1);
    final EditText edtTeam2 = (EditText) layFrage.findViewById(R.id.edtTeam2);
    final EditText edtTeam3 = (EditText) layFrage.findViewById(R.id.edtTeam3);
    final EditText edtTeam4 = (EditText) layFrage.findViewById(R.id.edtTeam4);

    alert.setNeutralButton(getString(R.string.speichernUndVorschau), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {

    }
    });

    alert.setNegativeButton(getString(R.string.abbrechen), new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
      }
    });

    final AlertDialog dialog2 = alert.create();

    dialog2.setOnShowListener(new OnShowListener() {

        @Override
        public void onShow(DialogInterface dialog) {
            // TODO Auto-generated method stub
            Button btnStarten = (Button) dialog2.getButton(AlertDialog.BUTTON_NEUTRAL);
            btnStarten.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    ArrayList<String> teams = new ArrayList<String>();

                    String team1 = edtTeam1.getText().toString().trim();
                    String team2 = edtTeam2.getText().toString().trim();
                    String team3 = edtTeam3.getText().toString().trim();
                    String team4 = edtTeam4.getText().toString().trim();

                    if(team1.length() > 0) teams.add(team1);
                    if(team2.length() > 0) teams.add(team2);
                    if(team3.length() > 0) teams.add(team3);
                    if(team4.length() > 0) teams.add(team4);

                    if(teams.size() == 0) {
                        Toast.makeText(QuizEditor.this, getString(R.string.keinteameingegeben), Toast.LENGTH_SHORT).show();

                    }
                    else
                    {
                        // Quiz starten

                        dialog2.dismiss();
                        Intent myIntent;

                        if(chkBlackScreen.isChecked()) {
                            myIntent = new Intent(QuizEditor.this, BlackScreen.class);
                        }
                        else // Direkt das Quiz starten
                        {
                            myIntent = new Intent(QuizEditor.this, Quiz.class);
                        }

                        myIntent.putStringArrayListExtra("teams", teams);
                        myIntent.putExtra("moderation", chkModeration.isChecked());
                        myIntent.putExtra("passover", chkPassOver.isChecked());
                        myIntent.putExtra("filename", filename);

                        QuizEditor.this.startActivity(myIntent);
                    }
                }

            });

        }

    });

    dialog2.show();
    // dialog2.getWindow().setLayout(LayoutParams.WRAP_CONTENT, 300); 
```

我为德语单词感到抱歉。在图像中，您可以看到问题。不幸的是，我不被允许上传我制作的屏幕截图......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-16T04:22:43.213

这个问题已经在评论中解决了，但我会添加一个完整的答案，并表明它也对我有用。

对于`AlertDialog`具有自定义视图的，不要使用该`.setMessage`行。在我的项目中删除以下行导致按钮停止被剪裁。

```
.setMessage("This is my message") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:21:38.470

将 EditText 行设置为 1。还将外部 LinearLayout 设置为 fill_parent。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T09:54:11.673

只需制作所有`EditText`属性`android:singleLine="true"`，然后尝试测试。

# ruby - 为什么 Ruby 定义 Object#=~？

> ID：14003244
> 
> 赞同：8
> 
> 时间：2012-12-22T13:31:54.920
> 
> 标签：ruby

在阅读了对[另一个问题](https://stackoverflow.com/questions/14001250/ruby-regular-expression-method)的答案的评论并进行了一些研究后，我发现它`=~`是定义的`Object`，然后被`String`and覆盖`Regexp`。`String`和`Regexp`似乎假设另一个类的实现：

```
"123" =~ "123" # => TypeError: type mismatch: String given
/123/ =~ /123/ # => TypeError: can't convert Regexp to String 
```

虽然`=~`是为 定义的`Object`，`+`但不是：

```
Object.new =~ 1 # => nil
Object.new + 1 # => undefined method `+' for #<Object:0x556d38> 
```

为什么`Object#=~`已经定义，而不是限制`=~`到`String`和`Regexp`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:43:14.913

好吧，我想这实际上在 String`=~` [文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-3D-7E)中得到了很好的回答：

> **Match** - 如果 obj 是 a `Regexp`，则将其用作匹配 str 的模式，并返回匹配开始的位置，或者`nil`如果没有匹配。
> 
> 否则，调用，作为参数`obj.=~`传递。 Object 中`str`的默认值返回.`=~``nil`

关键是，您可以编写自己的 Object 实现`=~`- 它将在`String =~ Not Regexp`语句中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T13:45:36.297

因为它允许在匹配表达式中使用任何对象：

```
Object.new =~ /abc/
=> nil 
```

`Object.new`我想这在与正则表达式不匹配的方式上是有道理的，`/abc/`如果左参数不是`String`对象，代码会爆炸。所以它通常会简化代码，因为您可以在运算符的左侧拥有任何对象`=~`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T22:25:58.360

从您的评论中，您的实际问题是为什么`=~`定义为`Object`while`+`不是。

原因是`Object#=~`可以返回`nil`随机对象（因为它们不匹配），但`Object#+`不能返回有意义的结果。

它不一定超级有用，但不能说它是错误的（你必须展示一个匹配来证明`nil`结果是矛盾的）。见[空虚真理](http://en.wikipedia.org/wiki/Vacuous_truth)的数学概念。另一方面，任何结果`Object.new + 1`都可能导致矛盾。

这类似于`<=>`that can return `nil`(因此也定义在`Object`) while `<`, `>`, ..., can not return `true`or `false`while is fully compatible。请注意，在这些情况下`Class#>`决定返回。`nil`

# java - Java Pattern.matcher(StringBuffer)，为什么它的行为方式与 Pattern.matcher(String) 不同？

> ID：14003245
> 
> 赞同：0
> 
> 时间：2012-12-22T13:32:10.783
> 
> 标签：java, regex, string, parsing

我需要在循环中“缩短”一个字符串，然后再一次又一次地传递它以匹配`java.regex.Pattern`. 对于一些深入参与解析和文本处理的人来说，这可能是一种微不足道的情况。

我面临着我必须使用的情况：

```
string=string.substring(shortenHowMuch); //Need to shorten it from the beginning 
```

...低级开发人员非常清楚，即将整个字符串复制到内存的另一个地址。即使有 HotSpot 的优化（我知道），我仍然需要确保代码在所有可能的 Java VM 上以最大可能的性能变体运行。

**编辑：** 后来我发现，我上面的声明，它正在复制字符串，是错误的。所以我的问题应该“下地狱” :) 无论如何，如果你喜欢，请阅读 :)`.substring`不会复制，而是共享对 a 的引用`char[]`，非常有趣:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:59:08.913

您没有解释使用 StringBuilder 时到底发生了什么，所以我无法回答原因。但实际上您不需要 StringBuilder 因为 String.substring 已优化并且它不会复制内部 char 数组。这是内部发生的事情

```
public String substring(int beginIndex, int endIndex) {
        ..... 
        return ((beginIndex == 0) && (endIndex == count)) ? this :
            new String(offset + beginIndex, endIndex - beginIndex, value);
 }

// Package private constructor which shares value array for speed.
String(int offset, int count, char value[]) {
    this.value = value;
    this.offset = offset;
    this.count = count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:51:00.657

不看代码就很难说，但你可以让你的模式更通用吗？像“.* original-pattern”这样的东西？

# javascript - 即使值存在，在 array.indexOf(x) 中搜索也总是返回 -1

> ID：14003247
> 
> 赞同：1
> 
> 时间：2012-12-22T13:32:30.697
> 
> 标签：javascript, arrays, indexof

```
var myarray = ["string1", "string2", "string3", "string4"];

function myfunc(myvar)
{
  if ((myarray.indexOf(myvar) > -1)
  {
    alert(myvar);
  }
  else
  {
    alert(myarray.indexOf(myvar));
  }
} 
```

其中`myvar`是“文本”类型的输入框的值。提醒返回值总是给我-1。有任何想法吗？浏览器为 FF 17.0.1 和 Chrome 23.0.1271.97m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:35:14.413

### 未定义的变量

```
alert(mychannels.indexOf(myelem));
-------------------------^ 
```

您在函数参数中获得输入，`myvar`但没有在任何地方定义`myelem`. 这会停止脚本。顺便说一句，你想做什么？

如果可行，请尝试将代码替换为：

```
alert(mychannels.indexOf(myvar)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T06:12:59.843

1.  首先跑了100多次。在 Mac OSX 上的最新 Chrome 上没有发生任何事故。

2.  我只看到不一致的 html 标签。解决了这个问题。

3.  我假设您在 IE 中遇到问题。为此添加了一个元标记。

运行[http://jsfiddle.net/5J2kv/1/](http://jsfiddle.net/5J2kv/1/)看看是否有任何改进。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:45:44.660

这工作正常。

这是现场[示例](http://jsfiddle.net/Qcu4x/)。

```
var myarray = ["string1", "string2", "string3", "string4"];

$('#myvar').live('change', function () { myfunc($(this).val());});

function myfunc(myvar)
{
  if (myarray.indexOf(myvar) > -1)
  {
    alert(myvar);
  }
  else
  {
    alert(myarray.indexOf(myvar));
  }
}​ 
```

# actionscript-3 - Adobe AIR 应用程序中的 Google 地球集成？

> ID：14003249
> 
> 赞同：-2
> 
> 时间：2012-12-22T13:32:42.553
> 
> 标签：actionscript-3, apache-flex, flex4.5

*   是否可以（如果可以）将 Google 地球集成到 Adob​​e AIR 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:56:46.050

由于 Google 地球使用插件，而 Adob​​e AIR 的 HTML 端唯一支持的插件是 Flash Player；那么答案是您不能在 Adob​​e AIR 应用程序中使用 Google 地球。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:45:09.447

不，因为 Google 地球没有为此提供 AS3 API（AFAIK，您只能通过使用浏览器插件将其集成到您的网站中）。

# java - REST 上的身份验证令牌

> ID：14003256
> 
> 赞同：1
> 
> 时间：2012-12-22T13:34:45.813
> 
> 标签：java, rest, authentication

我有一个 REST Jersey 网络服务。

我的问题是关于这个问题的答案，请检查；

[php中基于令牌的身份验证](https://stackoverflow.com/questions/9510703/token-based-authentication-in-php)

在那个答案中，它提到了这一点；

*“然后它会发送此令牌的哈希值和请求的某些特征来验证请求，例如 sha1（令牌 + 时间戳 + 请求 URL + 请求正文）。您的服务器可以验证这一点，而客户端无需以纯文本形式发送令牌每个请求。”*

谁能解释服务器如何验证“客户端不必在每个请求中以纯文本形式发送令牌”？客户端应该每次都向服务器发送令牌吗？

另一个问题是，一旦服务器收到此令牌的哈希值（包括时间戳和用户 ID..等），服务器将如何从该令牌中识别用户，而无需查看存储令牌的表或数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:40:24.857

对于第一个问题：客户端可以发送令牌的散列版本，服务器将散列值与从客户端接收的值进行比较。

对于第二个问题：您可以在内存或磁盘或您认为合适的任何地方保留令牌和用户之间的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T02:15:51.740

这是使用仅存在于服务器端的密钥对授权令牌的一部分进行加密/解密的方法的过度简化示例。AUTHORIZATION_TOKEN 可以发送到客户端，该客户端将在任何后续请求中传输。

1) 要登录，用户发送用户 ID、密码、会话 ID、时间戳
2) 在成功验证服务器上产生 TOKEN = encrypt(secretkey, userid + sessionid + time_stamp)。
3) 服务器向客户端发送 AUTHORIZED_TOKEN = TOKEN + userid + sessionid + 时间戳
4) 客户端在整个会话期间随每个请求发送此令牌
5) 服务器解密 AUTHORIZED_TOKEN 的 TOKEN 部分，然后解包并比较解密后的用户 ID、会话 ID、来自 TOKEN 的时间戳并将其与 AUTHORIZED_TOKEN 中的纯文本副本进行比较。
6）如果有任何不相等，服务器重定向到登录页面。
7) 没有以纯文本形式发送的重要信息。
8) Secretkey 只存在于服务器端
9) 由于令牌包含用户 ID，因此无需用户映射到磁盘或内存

# c# - 为 LINQ2SQL 创建带有反射的 lambda 表达式

> ID：14003263
> 
> 赞同：1
> 
> 时间：2012-12-22T13:35:37.557
> 
> 标签：c#, linq-to-sql, lambda, expression

我有这门课

```
class abstract EntityBase
{
    public abstract int Id {get; set; }
} 
```

现在，我为用户表更改了一点我的 linq2sql 生成的类（为 Id 设置覆盖）

```
public partial class User: EntityBase, INotifyPropertyChanging, INotifyPropertyChanged
{
  ...
  public override int Id {...}
  ...
} 
```

比，我有另一个具有此功能的模板帮助程序类

```
public static T SingleOrDefault(System.Linq.Expressions.Expression<Func<T, bool>> func)
{
    System.Data.Linq.DataContext oDataContext = null;
    T retData = GetAll(out oDataContext).SingleOrDefault(func);
    if (retData != null)
    {
        retData.CurrentDataContext = oDataContext;
    }
    return retData;
} 
```

我像这样使用它

```
Helper<EntityBase>.SingleOrDefault(t => t.Id == 3); 
```

我得到：类成员***EntityBase`2.Id 未映射***。问题是它使用的是来自 EntityBase 而不是来自 User 类的 Id，所以我的问题是如何为此构造相应的 lambda 表达式，以便它可以引用来自用户类的 Id。希望我很清楚。

谢谢。

# c# - 表单提交结束时的事件

> ID：14003266
> 
> 赞同：0
> 
> 时间：2012-12-22T13:36:07.610
> 
> 标签：c#, javascript, jquery

我有这个：

```
<form id="import_form" method="post" enctype="multipart/form-data" action="/Blah/Blah">
    <input type="file" id="fileUpload" name="fileUpload"/>
    <input type="submit" name="submit" value="Import"/>
</form>

$('#import_form').submit(function () {
    ...
}); 
```

这是c#方法：

```
[AcceptVerbs(HttpVerbs.Post)]
public string Blah(HttpPostedFileBase fileUpload, FormCollection form)
{ ... } 
```

我想在 Blah 完成执行 javacript 代码时开始执行。这该怎么做？
在它之前调用提交事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:45:27.343

这取决于表单的提交方式。

如果您通过 AJAX 提交表单，那么您可以在处理程序中执行一些 JavaScript 以获取响应。但是，鉴于有一个`submit`按钮，我暂时*假设*您不是通过 AJAX 执行此操作，而是将整个页面发布到服务器并呈现响应。

*在这种情况下，要在表单发布后*执行一些 JavaScript ，您需要在来自服务器的响应中呈现该 JavaScript 作为下一页的一部分。当服务器构建视图时，在该视图中包含您要执行的 JavaScript。

请记住网络的请求/响应性质。当服务器上的某些东西执行时，客户端不知道它并与它断开连接。任何服务器端处理的最终结果都应该是对客户端的 HTTP 响应。如果提交表单或单击链接或导致页面重新加载的任何内容，该响应将以新页面（视图）的形式出现。*因此，在服务器端处理之后*您想要在客户端执行的任何操作都需要作为响应的一部分发生。

**编辑：**我刚刚注意到它`Blah`正在返回一个`string`. 这对你有用吗？表单提交结果如何出现在新视图中？还是我不知道 ASP.NET MVC 中的某个功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:11:37.773

这就是我最后所做的。

我的表单返回与调用它的视图完全相同的视图。

我在 Blah 方法中添加了一个 ViewData。

在视图中，在 $(function()) 事件中，我检查 ViewData 是否有值，然后执行 javascript 代码。

# groovy - 命名参数

> ID：14003269
> 
> 赞同：57
> 
> 时间：2012-12-22T13:36:35.380
> 
> 标签：groovy, named-parameters

我有方法

```
def test(String a, String b) { } 
```

我想用动态参数映射来调用它。我总是这样

```
test(['1','2']); //valid call 
```

并且

```
test([a:'1',b:'2']); //=> does not work 
```

将工作。但事实并非如此。所以我记得[传播运算符](https://groovy-lang.org/operators.html#_spread_operator)，但不能让它工作....

有没有办法使用某种映射作为参数而不是单个参数来调用上述方法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-22T16:39:47.133

方法调用不应该`test(a:'1', b:'2');`代替`test([a:'1',b:'2']);`吗？

[请在此处](http://docs.groovy-lang.org/latest/html/documentation/#_named_parameters)检查**命名参数** 。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-22T16:01:48.137

也许我错过了一些东西，但我认为 Groovy 目前还没有命名参数。有[讨论](http://groovy.329449.n5.nabble.com/Named-arguments-and-maps-td5094591.html)和[建议](http://groovy.329449.n5.nabble.com/Proposal-NamedParameters-AST-transform-td5156566.html)，但我不知道有任何官方消息。

对于您的情况，我认为地图传播*可能会*有所帮助，但并非在所有情况下都如此。获取值后，它遵循声明映射值的顺序：

```
def test(String a, String b) { "a=$a, b=$b" }
def test(Map m) { test m*.value }

assert test(a: "aa", b:"bb") == "a=aa, b=bb"
assert test(b: "aa", a:"bb") != "a=aa, b=bb" // should be false :-(
assert test(b: "ccc", a:"ddd") == "a=ddd, b=ccc" // should have worked :-( 
```

对于课程，我可以建议[将 Groovy 用作运算符](http://docs.groovy-lang.org/latest/html/documentation/#_coercion_operator)吗？

```
@groovy.transform.CompileStatic
class Spread {
  class Person {
    String name
    BigDecimal height
  }

  def method(Person p) {
    "Name: ${p.name}, height: ${p.height}"
  }

  def method(Map m) { method m as Person }

  static main(String[] args) {
    assert new Spread().method(name: "John", height: 1.80) == 
      "Name: John, height: 1.80"
  }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-10-01T11:39:43.287

命名参数支持非常灵活，但文档有点薄。以下是我发现的一些规则。请注意，我试图在使用术语“参数”（在方法中声明）和“参数”（传递给方法调用）时保持明确

*   首先必须先声明 Map 参数。这是最大的。而且不明显。
*   您的 args 中不需要完整的 Map，只需 Map 元素，即`(a: "aa")`足够好，您不需要`([a: "aa"])`
*   您可以将有序（未命名）args 与名称 args 混合，只要有序 args 保持与它们填充的参数相同的顺序
*   您可以将命名 args 与常规有序 args 散布。这很酷，但是再次订购的 args 必须是有序的。
*   您甚至可以在同一方法签名中使用可选的有序参数（参见`x`下面的示例）
*   您可以为 Map 参数提供一个默认的空映射`args=[:]`，使命名的 args 成为可选参数，但如果您有其他可选参数（请参阅下面的最后一个示例），这将无法正常工作

以下是一些示例： 参数不需要输入，但为了清楚起见，我添加了类型。

```
// this method has a map args to capture all named args
// and non-named (ordered) args String s, int n, and int x
// x has a default value so is optional
// the map (here untyped) to capture the nameed args MUST COME FIRST
def m(Map args=[:], String s, int n, int x=1)
{
    println "s:$s n:$n x:$x, args:$args"
}

//1: pass in named args first, then ordered
m(a: "aa", b: 3, "ss", 44, 5) // s:s n:44 x:5, args:[a:aa, b:3]

//2:  ordered args first -  named args last (same result)
m("ss", 44, 5, a: "aa", b: 3) // s:s n:44 x:5, args:[a:aa, b:3]

//3:  bring the first ordered arg (s) to the start (same result)
m("ss", a: "aa", b: 3, 44, 5) // s:s n:44 x:5, args:[a:aa, b:3]

//4: stick the ordered arg n in the middle of the named args (same result!)
m("ss", a: "aa", 44, b: 3, 5) // s:s n:44 x:5, args:[a:aa, b:3]

//5:  mix the ordered args in with the named and SKIP the arg x with default value (x=1)
m(a: "aa", "ss", b: 3, 44) // s:ss n:44 x:1, args:[a:aa, b:3] 

//6: ordered arg n first - so in the wrong order (Fail!)
//m(44, "ss", a: "aa", b: 3, 5) //MissingMethodException: No signature .. of .. m() .. applicable for 
                             // argument types: (java.util.LinkedHashMap, java.lang.Integer, java.lang.String, java.lang.Integer)
                             // values: [[a:aa, b:3], 44, ss, 5]

//7:  no named args: Fails! (change signature to add default: Map args=[:] and it will succeed with: s:ss n:44 x:1, args:[:]
m("ss", 44) // ...No signature ... applicaple ... types (java.lang.String, java.lang.Integer)

//8: no named args: Fails! (even with default map in signature this fails!)
m("ss", 44, 5) // ...No signature ... applicaple ... types (java.lang.String, java.lang.Integer, java.lang.Integer) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-05-10T01:08:40.397

我绝对讨厌 groovy 如何处理位置和命名/默认参数。它是可怕的。Python 毫无疑问地做到了。

# 问题

1.  使用参数名称调用函数实际上会创建一个映射并将该映射作为第一个参数。

代码

```
test(a:"a", b: "b") // Actual myfunc([a: "a", b: "b"])
test("a", b: "b")  // Actual myfunc([b: "b"], "a")
test(a: "a", "b")  // Actual myfunc([a: "a"], "b") 
```

这很糟糕，因为它实际上改变了位置参数的顺序。

2.  正常的默认参数不能乱序调用

代码

```
def test(String a, String b, int x=1, int y=2){
  a = args.get('a', a)
  b = args.get('b', b)
  x = args.get('x', x)
  y = args.get('y', y)

  println "a:$a b:$b x:$x, y:$y"
}

test("a", 'b')  // Positional arguments without giving the default values
// "a:a b:b x:1 y:2"

test("a", "b", 3)  // Positional arguments with giving 1 default and not the last
// "a:a b:b x:3 y:2"

test("a", "b", y:4)  // Positional with Keyword arguments. Actual call test([y:4], "a", "b")
// This fails!? No signature of method, because Map is the first argument 
```

当然，您始终可以覆盖该函数以使参数与您想要的位置匹配。当你有很多争论时，这只是一个巨大的麻烦。

3.  使用 Map 作为第一个参数不允许纯位置参数

代码

```
def test1(Map args=[:], String a, String b, int x=1, int y=2){
  a = args.get('a', a)
  b = args.get('b', b)
  x = args.get('x', x)
  y = args.get('y', y)

  println "test1(a:$a b:$b x:$x, y:$y, args:$args)"
}

test1("ss", "44", 5, c: "c", d: 3)  // Actual test2([c: "c", d: 3], "ss", "44", 5) Matches our definition
// test1(a:ss b:44 x:5, y:2, args:[c:c, d:3, a:ss, b:44, x:5, y:2])

test1(a: "aa", b: 3, "ss", "44", 5)  // Actual test2([a: "aa", b: 3], "ss", "44", 5) Nothing wrong with repeat parameters because they are in the map
// test1(a:aa b:3 x:5, y:2, args:[a:aa, b:3, x:5, y:2])

test1(a: "aa", b: 3, "ss", "44", y:5)  // Actual test2([a: "aa", b: 3, y:5], "ss", "44") y is in the map, so y still has the default positional value
// test1(a:aa b:3 x:1, y:5, args:[a:aa, b:3, y:5, x:1])

test1("ss", "44", y:3)  // Actual test2([y:3], "ss", "44")
// test1(a:ss b:44 x:1, y:3, args:[y:3, a:ss, b:44, x:1])

test1('a', 'b')  // Pure positional arguments only required arguments given (no defaults given)
// test1(a:a b:b x:1, y:2, args:[a:a, b:b, x:1, y:2])

test1("ss", "44", 5)  // Pure positional arguments one missing
// This fails!? No signature of method. Why?

test1("ss", "44", 5, 6)  // Pure positional arguments all arguments given
// This fails!? No signature of method. Why? 
```

# 我的解决方案...

最终，我的解决方案是将任意数量的参数作为对象接收，并将这些参数与已定义的参数 Map 进行映射。

代码

```
// Return a Map of arguments with default values. Error if argument is null
def mapArgs(Object args, Map m){
  Map check = [:]
  def offset = 0

  // Check if first argument is map and set values
  if (args[0] instanceof Map){
    check = args[0]
    offset += 1
    check.each{ subitem ->
      m[subitem.key] = subitem.value
    }
  }

  // Iter positional arguments. Do not replace mapped values as they are primary.
  m.eachWithIndex{ item, i ->
    m[item.key] = ((i + offset) < args.size() && !check.containsKey(item.key)) ? args[i + offset] : item.value
    if (m[item.key] == null){
      throw new IllegalArgumentException("Required positional argument ${item.key}")
    }
  }
  return m
}

def test2(Object... args) {
  // println "args $args"
  def m = mapArgs(args, [a: null, b: null, x: 1, y:2])
  println "test2(a:$m.a b:$m.b x:$m.x, y:$m.y, args:null)"
}

test2("ss", "44", 5, c: "c", d: 3)  // Actual test2([c: "c", d: 3], "ss", "44", 5) Matches our definition
// test1(a:ss b:44 x:5, y:2, args:[c:c, d:3, a:ss, b:44, x:5, y:2])
// test2(a:ss b:44 x:5, y:2, args:null)

test2(a: "aa", b: 3, "ss", "44", 5)  // Actual test2([a: "aa", b: 3], "ss", "44", 5) Nothing wrong with repeat parameters because they are in the map
// test1(a:aa b:3 x:5, y:2, args:[a:aa, b:3, x:5, y:2])
// test2(a:aa b:3 x:5, y:2, args:null)

test2(a: "aa", b: 3, "ss", "44", y:5)  // Actual test2([a: "aa", b: 3, y:5], "ss", "44") y is in the map, so y still has the default positional value
// test1(a:aa b:3 x:1, y:5, args:[a:aa, b:3, y:5, x:1])
// test2(a:aa b:3 x:1, y:5, args:null)

test2("ss", "44", y:3)  // Actual test2([y:3], "ss", "44")
// test1(a:ss b:44 x:1, y:3, args:[y:3, a:ss, b:44, x:1])
// test2(a:ss b:44 x:1, y:3, args:null)

test2('a', 'b')  // Pure positional arguments only required arguments given (no defaults given)
// test1(a:a b:b x:1, y:2, args:[a:a, b:b, x:1, y:2])
// test2(a:a b:b x:1, y:2, args:null)

test2("ss", "44", 5)  // Pure positional arguments one missing
// This fails!? No signature of method. Why?
// test2(a:ss b:44 x:5, y:2, args:null)

test2("ss", "44", 5, 6)  // Pure positional arguments all arguments given
// This fails!? No signature of method. Why?
// test2(a:ss b:44 x:5, y:6, args:null) 
```

我对这个解决方案并不满意，但它使关键字参数满足我的需要。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-22T16:40:29.817

[感谢Will P](https://stackoverflow.com/users/563890/will-p)的评论，我找到了适合我的问题的解决方案：

如果我定义一个没有类型的参数，我可以传入各种类型，包括 hashMaps。并且 groovy 将一个结构像`a:'h',b:'i'`自动变成一个哈希图

```
def test(myParams, Integer i) {
    return myParams.a + myParams.b
}

assert test(a:'h',b:'i',5) == test(b:'i',a:'h',5)
assert test([a:'h',b:'i'],5) == test(b:'i',a:'h',5)
test('h','i',5); //still throws an exception 
```

这样，我可以使用单个命名参数，但也可以使用 Map！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-19T16:54:51.283

这个问题让我思考，我想出了一个灵活、有趣（如果不可怕的话）的解决方案。

这个签名似乎完全可以采用任何参数组合：

```
f(Map m=null, Object... obj) 
```

它对他们做了大部分可以预测的事情。

*   如果您完全传入任何命名参数（在任何位置），它们将进入 m
*   如果您传入位置参数，它们会以正确的顺序进入 obj 。
*   如果您传入地图，则将其视为位置参数
*   如果您没有任何命名参数，则 m 为空（除非您将地图作为第一个参数，请参见下文）

唯一令人讨厌的奇怪之处是您将地图作为第一个位置参数传递的情况。

```
f([a:1], 2) has a map m[a:1] and one obj[0]=2 
```

然而

```
 f([a:1], b:2) 
```

有一个 [b:2] 的地图 m 和一个 obj[0]= 一个地图 [a:1] 所以你将无法确定地图 m 是位置地图还是命名参数。

顺便说一句，我不一定推荐任何这些，我会尽可能使用精确的参数（我什至更喜欢显式类型）。在我自己的代码中有很多次，我通过添加一些显式类型变得有点困惑和修复，但是在某些情况下这可能非常有用。

# lisp - 让方案中的错误

> ID：14003270
> 
> 赞同：1
> 
> 时间：2012-12-22T13:36:35.667
> 
> 标签：lisp, scheme

我在方案中编写了以下代码片段，

```
(define (test-for-prime number divisor)
  (cond (prime? number) (number)
        (else (let ((next-divisor) (find-next-divisor number (+ 1 divisor)))
                 (test-for-prime (/ number next-divisor) (next-divisor)))))) 
```

但是，我收到以下错误

> let: 语法错误（不是绑定的标识符和表达式） in: (next-divisor)

我该如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:28:14.857

试试这个版本，它修复了所有的*语法*错误：

```
(define (test-for-prime number divisor)
  (cond ((prime? number)
         number)        
        (else
         (let ([next-divisor (find-next-divisor number (+ 1 divisor))])
           (test-for-prime (/ number next-divisor) next-divisor))))) 
```

你有很多错位的括号。有些缺失，有些是错误的......我建议你好好阅读一个 Scheme 教程并尝试编写一些基本程序来掌握它，特别是[这里](http://docs.racket-lang.org/reference/let.html)是`let`特殊形式的文档和正确结构：

```
(let ([id val-expr] ...) body ...+) 
```

> 第一种形式从左到右评估 val-exprs，为每个 id 创建一个新位置，并将值放入位置。然后它评估绑定了 id 的 body。最后一个主体表达式相对于 let 形式位于尾部位置。id 必须根据 bound-identifier=?

此外，使用 IDE/编辑器来突出此类问题并帮助您正确缩进代码也是一个好主意。特别要注意，当您编写以下代码时，不得将变量括在括号中：`(x)`Scheme 假定这`x`是一个过程并且您正在调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:48:15.413

`Let`具有以下语法（具有两个绑定的示例）：

```
(let ((<var> <expr>)
      (<var1> <expr1>))
  <body>) 
```

如果我们填写您的`let`表单，您将有两个绑定：`next-divisor`绑定到空和`find-next-divisor`绑定到`number`，但还有第三种形式`(+ 1 divisor)`不适合`let`的语法。

这可能是你想要的：

```
(let ((next-divisor (find-next-divisor number (+ 1 divisor))))
  ;; ...
  ) 
```

# eclipse - Subversion 找不到正确的 repo 位置

> ID：14003271
> 
> 赞同：0
> 
> 时间：2012-12-22T13:36:36.467
> 
> 标签：eclipse, svn, repository

我刚刚将我的 eclipse 版本更新为 Juno 并安装了 svn，但每次我尝试输入我现有的 repo 位置时都会出错。查看将本地 eclipse 目录附加到文件路径中的错误。这是错误给出的路径“ **'U:\eclipse\file:\U:\svnRepo' is not a working copy** ”虽然我只是输入

```
 file:\\\U:\svnRepo 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:29:10.953

我通过将现有的 repo 重命名为“OLD_svnRepo”、创建一个新目录“svnRepo”、创建一个新的 repo 位置并指向新文件夹来解决这个问题。然后我可以导入并指向现有的仓库，一切都很好。

虽然我认为这是一个可以接受的解决方案（因为它让我恢复并编码而不是玩 eclipse）我想知道 Juno 包/颠覆性中是否存在错误，这样我就不必玩每一个时间我做一个全新的安装。

# node.js - 当前范围内不存在名称“缓冲区”

> ID：14003277
> 
> 赞同：3
> 
> 时间：2012-12-22T13:37:50.103
> 
> 标签：node.js, typescript

a.ts

```
///<reference path="node/node.d.ts" />
class A {
  constructor(public b: Buffer) {
  }
} 
```

tsc a.ts

(3,24): 当前作用域中不存在名称 'Buffer'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:44:20.803

看起来您必须将类型设置为“NodeBuffer”而不是“Buffer”。

```
///<reference path="node/node.d.ts" />
class A {
    constructor(public b: NodeBuffer) {
    }
} 
```

# android - Android：视频停止播放时如何返回到以前的活动？

> ID：14003278
> 
> 赞同：3
> 
> 时间：2012-12-22T13:37:54.037
> 
> 标签：android, video, android-videoview

![视频](../Images/ac5dc1e89fe44f5382cce866a51f2abc.png)

我正在播放原始文件夹中的视频。通常，一旦完成，它就会保持相同的活动。如何在不按返回按钮的情况下自动返回上一个活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T13:46:31.817

您是否使用 a`VideoView`在您的第二个活动中播放视频？如果是这样，您可以使用该`OnCompletion`事件来调用`finish()`该活动，这将使您返回到第一个活动。

像这样的东西应该工作：

```
VideoView videoView = (VideoView) findViewById(R.id.videoView);
videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    public void onCompletion(MediaPlayer player) {
        Log.i("VideoView", "onCompletion()");
        finish();
    }
}); 
```

只需确保`R.id.videoView`用布局文件中的实际 id 替换即可。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T13:43:18.987

使用[MediaPlayer.OnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29)在活动 2 中完成视频播放时收听，并在以下位置启动上一个活动`onCompletion`：

```
 videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
    {
        @Override
        public void onCompletion(MediaPlayer mp)
        {
             //start Previous Activity here

            Current_Activity.this.finish();
        }
    }); // video finish listener 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T13:46:29.953

播放完一个视频`onCompletion()`方法被调用，在那只是调用`finish()`它里面的方法。

# python - 如何将十六进制 ASCII 字符串转换为有符号整数

> ID：14003281
> 
> 赞同：8
> 
> 时间：2012-12-22T13:38:20.527
> 
> 标签：python, binary

输入 = 'FFFF' #4 ASCII F's

期望的结果... -1 作为整数

代码尝试：

```
hexstring = 'FFFF'
result = (int(hexstring,16))
print result #65535 
```

结果：65535

我尝试过的任何事情似乎都没有认识到“FFFF”是负数的表示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T15:21:30.470

Python 将“面值”的 FFFF 转换为十进制 65535

```
input = 'FFFF'
val = int(input,16) # is 65535 
```

您希望将其解释为 16 位有符号数。下面的代码将采用任何数字的低 16 位和“符号扩展”，即解释为 16 位有符号值并传递相应的整数

```
val16 = ((val+0x8000)&0xFFFF) - 0x8000 
```

这很容易概括

```
def sxtn( x, bits ):
     h= 1<<(bits-1)
     m = (1<<bits)-1
     return ((x+h) & m)-h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:00:26.167

在像 C 这样的语言中，“FFFF”可以解释为有符号 (-1) 或无符号 (65535) 值。您可以使用 Python 的 struct 模块来强制执行您想要的解释。

请注意，可能存在以下代码未尝试处理的字节顺序问题，并且它不处理长度超过 16 位的数据，因此如果其中任何一种情况对您有效，您都需要进行调整.

```
import struct

input = 'FFFF'

# first, convert to an integer. Python's going to treat it as an unsigned value.
unsignedVal = int(input, 16)
assert(65535 == unsignedVal)
# pack that value into a format that the struct module can work with, as an 
# unsigned short integer
packed = struct.pack('H', unsignedVal)
assert('\xff\xff' == packed)

# ..then UNpack it as a signed short integer
signedVal = struct.unpack('h', packed)[0]
assert(-1 == signedVal) 
```

# redirect - 在禁用 javascript 时重定向到错误页面的缺点

> ID：14003284
> 
> 赞同：1
> 
> 时间：2012-12-22T13:39:03.347
> 
> 标签：redirect, error-handling, noscript, javascript

我在网上搜索并没有找到任何使用这种技术的网站。当 javascript 被禁用或浏览器不支持时，所有这些网站都会在其主要内容上方显示小框错误，而没有人使用重定向到错误页面技术。我在我的网站中使用以下代码来执行此操作

```
<noscript>
Javascript is disabled.
<meta HTTP-EQUIV="REFRESH" content="0; url=http://www.wrangle.in/jserror.aspx"> 
</noscript> 
```

但是由于我的研究导致 www 上此功能的使用较少，所以我想知道这种技术是否有任何缺点，因为这些网站没有使用这个？

# php - 处理未知大小的 PHP 数组

> ID：14003285
> 
> 赞同：2
> 
> 时间：2012-12-22T13:39:12.307
> 
> 标签：php, html

我有以下代码应该选择我数据库中相关表中的所有用户：

```
$hof = mysql_query("SELECT * FROM users");

$name = array();
$website = array();
$i=0;
while($result = mysql_fetch_array($hof)){
$name[$i] = $result['company']; 
$website[$i] = $result['website'];
}
$i++; 
```

我想在我的脚本的 html 部分（在 php 下方）中回显所有的名称和网站，这将是一个框架大厅。我该怎么办？我不知道数组大小的事实让我望而却步。

通常，如果我知道尺寸，我会这样：

```
<?php echo $name[1];?>
<?php echo $name[2];?>
//and so on 
```

提前谢谢了。PS 当我首先在 localhost 上对网站的功能进行排序时，我计划转移到 MySQLi。干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T13:41:35.667

您的`$i++;`语句应该在 while 循环内

```
while($result = mysql_fetch_array($hof)){
    $name[$i] = $result['company']; 
    $website[$i] = $result['website'];
    $i++;
} 
```

**最好**你这样做，

```
$rows = array();
while($result = mysql_fetch_assoc($hof)){
        $rows[] = $result; 
} 
```

你像这样回应他们，

```
<?php
$len = count($name);
for($i=0;$i<$len;$i++){
    echo $name[1];
}
?> 
```

对于替代方法，请使用此方法，

```
<?php
foreach($rows as $row){
    echo $row['name']; // use $row['website'] to echo website.
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:41:10.080

```
foreach($name as $key=>$value){
  echo $name[$key];
  echo $website[$key];
} 
```

也不需要带`$i++`，可以使用以下方式

```
while($result = mysql_fetch_array($hof)){
  $name[] = $result['company']; 
  $website[] = $result['website'];
} 
```

参见[手册中的数组](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T13:41:21.553

首先`$i++`应该*在*循环内。

要将它们全部输出，您可以使用[`implode()`](http://php.net/implode), 或者[`foreach`](http://php.net/foreach).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T14:01:51.947

首先，将您的数据放入数组

```
$data = array();
$sql = "SELECT * FROM users";
$res = mysql_query($sql) or trigger_error(mysql_error()."[$sql]");
while($row = mysql_fetch_array($res)){
    $data[] = $row; 
} 
```

然后在您希望的任何地方使用它，例如在模板中：

```
<ul>
<? foreach($data as $row): ?>
    <li><a href="<?=$row['website']?>"><?=$row['company']?></a></li>
<? endforeach ?>
</ul> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T13:41:29.197

怎么样：

```
foreach ($name as $val)
{
    echo $val;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T13:41:54.777

您可以使用 mysql_num_rows() 了解查询返回的结果数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-22T13:52:06.120

```
$arrarySize = mysql_num_rows($hof); 
```

# websocket - 使用 Websocket 发送 http 请求

> ID：14003287
> 
> 赞同：1
> 
> 时间：2012-12-22T13:39:54.820
> 
> 标签：websocket

尝试发送 GET http 请求。这是一些代码：

```
var http = require('http');

var req = http.request({host: 'testapp.com', path: '/cb.php?a=1&b=2', port: 80}, 
  function (data) {
    console.info(data.statusCode)
  }
);
req.end(); 
```

我可以在 Chrome 中浏览 url [http://testapp.com/cb.php](http://testapp.com/cb.php)，但套接字会捕获超时错误。什么原因？

# python - 带有朴素贝叶斯分类器的 n-gram

> ID：14003291
> 
> 赞同：10
> 
> 时间：2012-12-22T13:40:43.333
> 
> 标签：python, nltk, n-gram

我是 python 新手，需要帮助！我正在练习 python NLTK 文本分类。这是我在 [http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/上练习的代码示例](http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/)

我试过这个

```
from nltk import bigrams
from nltk.probability import ELEProbDist, FreqDist
from nltk import NaiveBayesClassifier
from collections import defaultdict

train_samples = {}

with file ('positive.txt', 'rt') as f:
   for line in f.readlines():
       train_samples[line]='pos'

with file ('negative.txt', 'rt') as d:
   for line in d.readlines():
       train_samples[line]='neg'

f=open("test.txt", "r")
test_samples=f.readlines()

def bigramReturner(text):
    tweetString = text.lower()
    bigramFeatureVector = {}
    for item in bigrams(tweetString.split()):
        bigramFeatureVector.append(' '.join(item))
    return bigramFeatureVector

def get_labeled_features(samples):
    word_freqs = {}
    for text, label in train_samples.items():
        tokens = text.split()
        for token in tokens:
            if token not in word_freqs:
                word_freqs[token] = {'pos': 0, 'neg': 0}
            word_freqs[token][label] += 1
    return word_freqs

def get_label_probdist(labeled_features):
    label_fd = FreqDist()
    for item,counts in labeled_features.items():
        for label in ['neg','pos']:
            if counts[label] > 0:
                label_fd.inc(label)
    label_probdist = ELEProbDist(label_fd)
    return label_probdist

def get_feature_probdist(labeled_features):
    feature_freqdist = defaultdict(FreqDist)
    feature_values = defaultdict(set)
    num_samples = len(train_samples) / 2
    for token, counts in labeled_features.items():
        for label in ['neg','pos']:
            feature_freqdist[label, token].inc(True, count=counts[label])
            feature_freqdist[label, token].inc(None, num_samples - counts[label])
            feature_values[token].add(None)
            feature_values[token].add(True)
    for item in feature_freqdist.items():
        print item[0],item[1]
    feature_probdist = {}
    for ((label, fname), freqdist) in feature_freqdist.items():
        probdist = ELEProbDist(freqdist, bins=len(feature_values[fname]))
        feature_probdist[label,fname] = probdist
    return feature_probdist

labeled_features = get_labeled_features(train_samples)

label_probdist = get_label_probdist(labeled_features)

feature_probdist = get_feature_probdist(labeled_features)

classifier = NaiveBayesClassifier(label_probdist, feature_probdist)

for sample in test_samples:
    print "%s | %s" % (sample, classifier.classify(bigramReturner(sample))) 
```

但是得到这个错误，为什么？

```
 Traceback (most recent call last):
  File "C:\python\naive_test.py", line 76, in <module>
    print "%s | %s" % (sample, classifier.classify(bigramReturner(sample)))
  File "C:\python\naive_test.py", line 23, in bigramReturner
    bigramFeatureVector.append(' '.join(item))
AttributeError: 'dict' object has no attribute 'append' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T21:56:23.290

二元组特征向量遵循与一元组特征向量完全相同的原则。因此，就像您提到的教程一样，您必须检查您将使用的任何文档中是否存在二元组特征。

至于二元特征以及如何提取它们，我已经为它编写了下面的代码。您可以简单地采用它们来更改教程中的变量“tweets”。

```
import nltk
text = "Hi, I want to get the bigram list of this string"
for item in nltk.bigrams (text.split()): print ' '.join(item) 
```

您可以简单地将它们附加到“推文”列表中，而不是打印它们，您就可以开始了！我希望这会足够有帮助。否则，如果您还有问题，请告诉我。

请注意，在情感分析等应用程序中，一些研究人员倾向于对单词进行标记并删除标点符号，而另一些则不这样做。根据经验，我知道如果不删除标点符号，朴素贝叶斯的工作原理几乎相同，但是 SVM 的准确率会降低。您可能需要玩弄这些东西并决定哪些对您的数据集更有效。

**编辑1：**

有一本书叫《Natural language processing with Python》，我可以推荐给你。它包含二元组的示例以及一些练习。但是，我认为你甚至可以在没有它的情况下解决这个问题。选择二元组特征背后的想法是我们想知道单词 A 在我们的语料库中出现在单词 B 之后的概率。因此，例如在句子中

> “我开卡车”

单词unigram features将是这4个单词中的每一个，而单词bigram features将是：

> [“我开车”、“开一辆”、“一辆卡车”]

现在您想使用这 3 个作为您的功能。因此，下面的代码函数将字符串的所有二元组放入名为 的列表中`bigramFeatureVector`。

```
def bigramReturner (tweetString):
  tweetString = tweetString.lower()
  tweetString = removePunctuation (tweetString)
  bigramFeatureVector = []
  for item in nltk.bigrams(tweetString.split()):
      bigramFeatureVector.append(' '.join(item))
  return bigramFeatureVector 
```

请注意，您必须编写自己的`removePunctuation`函数。作为上述函数的输出，您得到的是二元特征向量。您将完全按照您提到的教程中处理一元特征向量的方式来处理它。

# python - 使用 python 2.7 和 wxpython 导入 numpy 时出现属性错误

> ID：14003303
> 
> 赞同：1
> 
> 时间：2012-12-22T13:41:38.823
> 
> 标签：python, import, numpy, pyqt

我正在努力让安装了 numpy、scipy、matplotlib 和 wxpython/PyQt 的 ide 适用于 python 2.7。运行 ide spyder 会为 numpy 抛出消息“模块‘对象’没有属性‘核心’”。在 IDLE 上“from numpy import *”时会出现相同的消息。
这是整个信息。请帮忙。谢谢！C:\Python27\Scripts>C:\Python27\python.exe "C:\Python27\Scripts\spyder"

```
Traceback (most recent call last):
  File "C:\Python27\Scripts\spyder", line 2, in <module>
    from spyderlib import spyder
  File "C:\Python27\lib\site-packages\spyderlib\spyder.py", line 96, in <module>

from spyderlib.utils.environ import WinUserEnvDialog
File "C:\Python27\lib\site-packages\spyderlib\utils\environ.py", line 17, in <module>
from spyderlib.widgets.dicteditor import DictEditor
File "C:\Python27\lib\site-packages\spyderlib\widgets\dicteditor.py", line 31, in <module>
from spyderlib.config import get_icon, get_font
File "C:\Python27\lib\site-packages\spyderlib\config.py", line 27, in <module>

from spyderlib.utils import iofuncs, codeanalysis
File "C:\Python27\lib\site-packages\spyderlib\utils\iofuncs.py", line 61, in <module>
import numpy as np
File "C:\Users\User\AppData\Roaming\Python\Python27\site-packages\numpy\__init__.py", line 137, in <module>
import add_newdocs
File "C:\Users\User\AppData\Roaming\Python\Python27\site-packages\numpy\add_newdocs.py", line 9, in <module>
from numpy.lib import add_newdoc
File "C:\Users\User\AppData\Roaming\Python\Python27\site-packages\numpy\lib\__init__.py", line 13, in <module>
from polynomial import *
File "C:\Users\User\AppData\Roaming\Python\Python27\site-packages\numpy\lib\polynomial.py", line 11, in <module>
import numpy.core.numeric as NX
AttributeError: 'module' object has no attribute 'core' 
```

# android - 不受支持的 hg 版本 hg 1.9..3 - 预计至少为 hg 2.0.0

> ID：14003310
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:42:18.063
> 
> 标签：android, mercurial, andengine

我正在尝试安装 AndEngine。我已安装 Mercurial 并尝试从 [https://code.google.com/p/andengine](https://code.google.com/p/andengine)克隆，但我收到消息“出现问题”-不支持 hg 版本 hg 1.9..3 - 至少应为 hg 2.0.0。java.lang.异常

如何升级到 hg 2.0.0。我该如何安装它。当我执行“yum install hg”时，它只安装了 hg 1.9.3

此外，上面的和引擎代码似乎已经移动。克隆的新链接是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:59:17.590

最新的源代码在 github 上

[https://github.com/nicolasgramlich/AndEngine](https://github.com/nicolasgramlich/AndEngine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:11:49.897

我通过从 mercurial 站点下载 mercurial-2.4.1-1.fc18.i686.rpm 然后安装它来解决 hg 问题。我想早期的 2.0.0 版本存在一些问题。

# iphone - 如何将二进制数据转换为 NSData

> ID：14003311
> 
> 赞同：2
> 
> 时间：2012-12-22T13:42:36.693
> 
> 标签：iphone, objective-c, ios, uiimageview, nsdata

我已将 UIImageview 转换为 NSData 并将其存储为二进制数据。但我不知道如何将二进制数据检索到 NSData 并将其转换为 UIImageview

我的代码在下面

图像保存为二进制数据----

```
-(void) save
{
    UIImage *img = [UIImage imageNamed:@"back2.png"];
    NSData *dataObj =UIImagePNGRepresentation(img);
    NotesDetails *notesDetails = (NotesDetails *) [NSEntityDescription insertNewObjectForEntityForName:@"NotesDetails" inManagedObjectContext:managedObjectContext];
 notesDetails.imageData=dataObj;
    NSLog(@"NotesDetails: %@",notesDetails);
    NSError *error;
    if (![managedObjectContext save:&error])
    {

    }
} 
```

图像检索------

```
-(void)viewDidLoad
{
    NSFetchRequest *fectchreq = [[NSFetchRequest alloc] init];
    NSEntityDescription *entitydes = [NSEntityDescription entityForName:@"NotesDetails"
                                                 inManagedObjectContext:self.managedObjectContext];
    [fectchreq setEntity:entitydes];
    NSSortDescriptor *sortdes = [[NSSortDescriptor alloc] initWithKey:@"notesTime" ascending:YES];
    NSArray *sortdesarray = [[NSArray alloc] initWithObjects:sortdes, nil];
    [fectchreq setSortDescriptors:sortdesarray];
    NSError *error;
    NSMutableArray *storeddata = [[self.managedObjectContext executeFetchRequest:fectchreq error:&error] mutableCopy];

    if ([storeddata count] > 0)
    {
        for (NotesDetails *sc in storeddata)
        {
            imgFromDb=[NSData dataWithData:[@"%@",sc.imageData]];
        }
    }
    NSLog(@"Image : %@",imgFromDb);
    UIImageView *dbImage=[[UIImageView alloc]initWithFrame:CGRectMake(80,20,90,90)];
    dbImage.image=[UIImage imageWithData:imgFromDb];

    [NoteDetails addSubview:dbImage];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T13:52:21.827

您可以使用 NSKeyedUnarchiver：

```
imgFromDb= [NSKeyedUnarchiver unarchiveObjectWithData: sc.imageData]; 
```

如果你更喜欢它而不是 UIImagePNGRepresentation()，你可以用 NSKeyedArchiver 做相反的事情（对象到数据）。
还有其他方法可以做到这一点，例如：

```
imgFromDb= [UIImage imageWithData: sc.imageData]; 
```

# asp.net - 如何在 url 中携带文化参数作为路由参数而不是请求参数？

> ID：14003312
> 
> 赞同：0
> 
> 时间：2012-12-22T13:42:41.697
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-mvc-routing

我想创建一个自定义路由系统 ASP.NET MVC 4 项目来使我的网站多语言。我想在 url 中携带文化参数，如 localhost/en/controllerName/actionName。但问题是当我编写例如 localhost/home 路由引擎假设“home”作为文化名称时。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:42:56.500

如果您的所有路线都将强制执行文化参数，您可以使用以下内容：

```
routes.MapRoute(
    name: "LocalizedDefault",
    url: "{lang}/{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    constraints: new { lang = @"(es|en|fr)" }
); 
```

如果您仍然想响应`localhost/home`，只需将默认路由放在上面的路由之后，这样第一个将不会因为约束而匹配并回退到第二个：

```
 routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

# java - 在 JBoss AS 7 上获取 RuntimeException

> ID：14003313
> 
> 赞同：1
> 
> 时间：2012-12-22T13:42:46.170
> 
> 标签：java, deployment, jboss, seam, jboss7.x

我正在将使用 Seam 2.1.2 和 JBoss 4.2.2 的项目迁移到 JBoss AS 7.1.1.Final，但我得到了一个 RuntimeException。

在此之前，它加载了数据库 SchemaUpdate。它在加载接缝对话类时得到。

```
: customerGroupController, scope: EVENT, type: JAVA_BEAN, class: com.manam.mobee    .customer.groups.CustomerGroupController
16:21:48,004 INFO  [org.jboss.seam.Component] (MSC service thread 1-1) Component    : customerStartUpLoader, scope: APPLICATION, type: JAVA_BEAN, class: com.manam.m    obee.customer.CustomerStartUpLoader
16:21:48,015 INFO  [org.jboss.seam.Component] (MSC service thread 1-1) Component    : dbList, scope: CONVERSATION, type: JAVA_BEAN, class: com.manam.mobee.settings.db.DatabaseMonitorController
16:21:48,026 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-    host].[/mobeeadmin]] (MSC service thread 1-1) Exception sending context initiali    zed event to listener instance of class com.manam.mobee.fwk.listener.MobeeSeamListener: java.lang.RuntimeException: Could not create Component: dbendPointHome
        at org.jboss.seam.init.Initialization.addComponent(Initialization.java:1202) [jboss-seam.jar:2.1.2]
        at org.jboss.seam.init.Initialization.installComponents(Initialization.java:1118) [jboss-seam.jar:2.1.2]
        at org.jboss.seam.init.Initialization.init(Initialization.java:733) [jboss-seam.jar:2.1.2]
        at org.jboss.seam.servlet.SeamListener.contextInitialized(SeamListener.java:36) [jboss-seam.jar:2.1.2]
        at com.manam.mobee.fwk.listener.MobeeSeamListener.contextInitialized(MobeeSeamListener.java:36) [classes:]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_27]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_27]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]
Caused by: java.lang.NoClassDefFoundError: com/sun/jmx/snmp/daemon/CommunicationException
        at java.lang.Class.getDeclaredMethods0(Native Method) [rt.jar:1.6.0_27]
        at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [rt.jar:1.6.0_27]
        at java.lang.Class.privateGetPublicMethods(Class.java:2547) [rt.jar:1.6.0_27]
        at java.lang.Class.getMethods(Class.java:1410) [rt.jar:1.6.0_27]
        at org.jboss.seam.Component.hasAnnotation(Component.java:1158) [jboss-seam.jar:2.1.2]
        at org.jboss.seam.Component.<init>(Component.java:218) [jboss-seam.jar:2.1.2]
        at org.jboss.seam.Component.<init>(Component.java:205) [jboss-seam.jar:2.1.2]
        at org.jboss.seam.init.Initialization.addComponent(Initialization.java:1186) [jboss-seam.jar:2.1.2]
        ... 12 more
Caused by: java.lang.ClassNotFoundException: com.sun.jmx.snmp.daemon.CommunicationException from [Module deployment.mobeeadmin.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 20 more

16:21:48,723 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-1) Initializing Mojarra 2.1.7-jbossorg-1 (20120227-1401) for context '/mobeeadmin'
16:21:50,772 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) Error listenerStart
16:21:50,776 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) Context [/mobeeadmin] startup failed due to previous errors
16:21:50,790 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.web.deployment.default-host./mobeeadmin: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./mobeeadmin: JBAS018040: Failed to start context
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_27]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_27]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]

16:21:51,483 INFO  [org.jboss.as] (MSC service thread 1-1) JBAS015951: Admin console listening on http://127.0.0.1:9990
16:21:51,487 ERROR [org.jboss.as] (MSC service thread 1-1) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 51988ms - Started 492 of 572 services (2 services failed or missing dependencies, 77 services are passive or on-demand)
16:21:51,686 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "mobeeadmin.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./mobeeadmin" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./mobeeadmin: JBAS018040: Failed to start context"}}
16:21:51,739 INFO  [org.jboss.as.jpa] (MSC service thread 1-2) JBAS011403: Stopping Persistence Unit Service 'mobeeadmin.war#mobeeadmin'
16:21:54,377 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015877: Stopped deployment mobeeadmin.war in 2688ms
16:21:54,382 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host./mobeeadmin: org.jboss.msc.service.StartException in service jboss.
web.deployment.default-host./mobeeadmin: JBAS018040: Failed to start context

16:21:54,397 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./mobeeadmin" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./mobeeadmin: JBAS018040: Failed to start context"}}}} 
```

这是我的 jboss-deployment-structure.xml：

```
<jboss-deployment-structure>
  <ear-subdeployments-isolated>false</ear-subdeployments-isolated>
  <deployment>
     <dependencies>
          <module name="javax.faces.api" slot="1.2" export="true"/>
          <module name="com.sun.jsf-impl" slot="1.2" export="true"/>
          <module name="org.apache.commons.logging" export="true"/>
          <module name="org.dom4j" export="true"/>
          <module name="org.apache.commons.collections" export="true"/>
     </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

# asp.net - 页面重新加载后防止单击按钮

> ID：14003315
> 
> 赞同：0
> 
> 时间：2012-12-22T13:43:01.093
> 
> 标签：asp.net, page-refresh

> **可能重复：**
> [使用 ASP.NET 进行重定向后获取](https://stackoverflow.com/questions/5381162/post-redirect-get-with-asp-net)

我的表单上有一个按钮。在 button_click 事件中，我将一些数据插入到数据库中。如果我单击该按钮然后刷新页面，似乎该按钮被再次单击，因为我发现两次插入数据库的相同数据。有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:47:07.143

您必须使用[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)来避免此问题。当您刷新页面时，您的最后一个请求（get 或 Post）再次重新提交到服务器。

**解决方案**：在点击事件中最后使用这个

```
 Response.Redirect(@"~\page.aspx"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:46:34.890

插入后，您可以使用重定向到同一页面`Response.Redirect(Request.RawUrl)`

这将防止问题

# ios - ios 5 中的 GKGameCenterViewController 模拟？

> ID：14003325
> 
> 赞同：5
> 
> 时间：2012-12-22T13:43:54.600
> 
> 标签：ios, game-center

`iOS 6`提供新的视图控制器来显示游戏中心信息：`GKGameCenterViewController`.

是否`iOS 5.1`提供类似的东西 ( `except separate controllers for Leader-board and Achievements)`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T21:28:40.670

以下是我在我的应用程序中处理新旧 GameCenter API 的方法，它支持 iOS 4 和 7 之间的所有内容。

我从 GameCenterManager.m 示例代码开始。

1) 在 GameCenterManager.m 中，我更改了 authenticateLocalUser

```
- (void) authenticateLocalUser
{
    if([GKLocalPlayer localPlayer].authenticated == NO)
    {

        if ([[GKLocalPlayer localPlayer] respondsToSelector: @selector(setAuthenticateHandler:)]) {

             [[GKLocalPlayer localPlayer] setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) {

                 [self callDelegateOnMainThread: @selector(processGameCenterAuth:error:) withArg: viewcontroller error: error];

             })];
         } else {

            [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error)
            {
                [self callDelegateOnMainThread: @selector(processOldGameCenterAuth:) error: error];
            }];
         }
    }
} 
```

2）然后在我的主视图控制器中，这是我的两个版本的身份验证处理程序。

```
- (void) processOldGameCenterAuth: (NSError*) error; {
    // for iOS < 6.0 without the viewcontroller parameter

    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    if (localPlayer.isAuthenticated) {
        usingGamecenter = TRUE;
        [self.gameCenterManager reloadHighScoresForCategory: kOverallLeaderboard];
    } else {
        usingGamecenter = FALSE;
    }
    // *** this is where you update your UI after game center login
}

- (void) processGameCenterAuth: (UIViewController*) gameCenterController error: (NSError*) error; {
    if (gameCenterController) {
        [self presentViewController:gameCenterController animated:YES completion:nil];
    } else {
        [self processOldGameCenterAuth: error];
    }
} 
```

# android - 如何将某些 xml 结构视为视图？

> ID：14003327
> 
> 赞同：0
> 
> 时间：2012-12-22T13:44:14.647
> 
> 标签：android

我有一个`LinearLayout`在`Views`里面。然后我想将此元素视为`View`，因此我创建了一个新的`class`扩展 from `LinearLayout`。现在，当我在布局中动态添加一个新`instance`的时，我什么也看不到。`class`我相信我必须以`View`某种方式从我的 中获取`class`，但不知道如何。是否有可能以某种方式将这个新类与 xml 关联起来？

更新：

```
public class Task extends LinearLayout {

    public Task(Context context) {
        super(context);
        LayoutInflater.from(context).inflate(R.layout.task_view, this, false);
    }

    public Task(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater.from(context).inflate(R.layout.task_view, this, false);

    }

    public Task(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        LayoutInflater.from(context).inflate(R.layout.task_view, this, false);
    }
} 
```

然后：

```
Task newTask = new Task(getActivity());
someLinearLayout.addView((View) newTask); // happens nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:54:45.177

您可以使用不同的方法，例如：

*   把它膨胀成一个`View`
*   [使用`<include>`标签](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

**充气：**

```
public class InflatedView extends LinearLayout
{
      public InflatedView(Context c)
      {
            super(c);
            LayoutInflater.from(this).inflate(R.layout.your_other_layout, this);
      }
      //override other constructors too.
} 
```

现在你可以像这样在你的 xmls 中使用它：

```
<com.your.package.InflatedView android:layout_height="etc" other:attribute="here" /> 
```

**包括：**

很简单，使用include标签：

```
<include layout="@layout/your_other_layout"/> 
```

以下是 RomainGuy 的[布局技巧](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)。

# regex - 正则表达式：两个模式第一次出现之间的文本

> ID：14003330
> 
> 赞同：4
> 
> 时间：2012-12-22T13:44:19.573
> 
> 标签：regex

```
/url?q=http://it.wikipedia.org/wiki/Spider-Man_(film)&sa=U&ei=iavVUKuFGsrNswbz74GQBA&ved=0CBYQFjAA&usg=AFQjCNEth5YspFPWp6CInyAfknlEvVgIfA 
```

我需要得到公正

```
http://it.wikipedia.org/wiki/Spider-Man_(film) 
```

我试过了，`\?q=(.*)&` 但它考虑了最后一次出现`&`，所以我得到了

```
http://it.wikipedia.org/wiki/Spider-Man_(film)&sa=U&ei=iavVUKuFGsrNswbz74GQBA&ved=0CBYQFjAA 
```

[http://rubular.com/r/yBiGIMQTUV](http://rubular.com/r/yBiGIMQTUV)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T13:45:35.423

您需要使用*不情愿的匹配*来匹配直到第一个`&`。使用*贪婪匹配*（即使用`*`而不是`*?`），您的模式将匹配尽可能长的字符串以满足完整的模式。

所以使用这个： -

```
\?q=(.*?)& 
```

或者您也可以使用带有 negated 的字符类，`&`它匹配除以下每个字符`&`：-

```
\?q=([^&]*) 
```

请注意，如果您不希望`(.*?)`匹配空字符串，则应使用`+`量词。它匹配`1 or more`发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T13:46:11.303

您只需要使`*`操作员变得懒惰，然后在`?`其后添加一个即可。所以它会是`.*?`

懒惰（或非贪婪）意味着将在第一次出现该匹配后停止，而不是最后一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:45:55.613

尝试：

```
\?q=([^&]+) 
```

并捕获第一组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T13:53:08.390

如果你在 python 中，那么`sub(r'(\/url\?q\=)|[&][\S]*','',url)`应该做你的工作

# cors - Access-Control-Allow-Origin 通配符子域、端口和协议

> ID：14003332
> 
> 赞同：396
> 
> 时间：2012-12-22T13:44:26.957
> 
> 标签：cors

我正在尝试为所有子域、端口和协议启用 CORS。

例如，我希望能够运行从[http://sub.mywebsite.com:8080/](http://sub.mywebsite.com:8080/)到[https://www.mywebsite.com/](https://www.mywebsite.com/)的 XHR 请求*

通常，我想启用来自源匹配的请求（并且仅限于）：

`//*.mywebsite.com:*/*`

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-12-22T20:14:31.117

CORS 规范是全有或全无。它只支持`*`，`null`或者确切的协议+域+端口：[http ://www.w3.org/TR/cors/#access-control-allow-origin-response-header](http://www.w3.org/TR/cors/#access-control-allow-origin-response-header)

您的服务器将需要使用正则表达式验证原始标头，然后您可以在`Access-Control-Allow-Origin`响应标头中回显原始值。

* * *

## 回答 #2

> 赞同：250
> 
> 时间：2015-01-16T18:09:55.180

基于 DaveRandom 的[回答](https://stackoverflow.com/a/18958914/357774)，我也在玩，发现了一个稍微简单的 Apache 解决方案，它产生相同的结果（`Access-Control-Allow-Origin`动态设置为当前特定协议 + 域 + 端口），而不使用任何重写规则：

```
SetEnvIf Origin ^(https?://.+\.mywebsite\.com(?::\d{1,5})?)$   CORS_ALLOW_ORIGIN=$1
Header append Access-Control-Allow-Origin  %{CORS_ALLOW_ORIGIN}e   env=CORS_ALLOW_ORIGIN
Header merge  Vary "Origin" 
```

就是这样。

那些想要在父域（例如 mywebsite.com）以及其所有子域上启用 CORS 的人可以简单地将第一行中的正则表达式替换为这个：

`^(https?://(?:.+\.)?mywebsite\.com(?::\d{1,5})?)$`.

*注意：为了[规范合规性](http://www.w3.org/TR/cors/#resource-implementation)和正确的缓存行为，始终`Vary: Origin`为启用 CORS 的资源添加响应标头，即使对于非 CORS 请求和来自不允许来源的请求（参见[示例原因](http://crbug.com/409090)）。*

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2013-09-23T12:09:52.657

**编辑**：使用[@Noyo 的解决方案](https://stackoverflow.com/questions/14003332/access-control-allow-origin-wildcard-subdomains-ports-and-protocols/27990162#27990162)而不是这个。它更简单、更清晰，并且在负载下可能性能更高。

***原始答案仅用于历史目的！***

* * *

我对这个问题做了一些尝试，并提出了这个可与 Apache 一起使用的可重用 .htaccess（或 httpd.conf）解决方案：

```
<IfModule mod_rewrite.c>
<IfModule mod_headers.c>
    # Define the root domain that is allowed
    SetEnvIf Origin .+ ACCESS_CONTROL_ROOT=yourdomain.com

    # Check that the Origin: matches the defined root domain and capture it in
    # an environment var if it does
    RewriteEngine On
    RewriteCond %{ENV:ACCESS_CONTROL_ROOT} !=""
    RewriteCond %{ENV:ACCESS_CONTROL_ORIGIN} =""
    RewriteCond %{ENV:ACCESS_CONTROL_ROOT}&%{HTTP:Origin} ^([^&]+)&(https?://(?:.+?\.)?\1(?::\d{1,5})?)$
    RewriteRule .* - [E=ACCESS_CONTROL_ORIGIN:%2]

    # Set the response header to the captured value if there was a match
    Header set Access-Control-Allow-Origin %{ACCESS_CONTROL_ORIGIN}e env=ACCESS_CONTROL_ORIGIN
</IfModule>
</IfModule> 
```

只需将`ACCESS_CONTROL_ROOT`块顶部的变量设置为您的根域，如果它与您的域匹配，它将`Origin:`在响应标头值中将请求标头值回显给客户端。`Access-Control-Allow-Origin:`

另请注意，您可以使用`sub.mydomain.com`as`ACCESS_CONTROL_ROOT`并将来源限制为`sub.mydomain.com`and `*.sub.mydomain.com`（即它不必是域根）。可以通过修改正则表达式的 URI 匹配部分来控制允许变化的元素（协议、端口）。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2016-09-23T19:54:47.330

我正在回答这个问题，因为***接受的答案***不能跟随

1.  正则表达式分组会**影响性能**，这不是必需的。
2.  无法匹配**主**域，它仅适用于子域。

例如：它不会为[http://mywebsite.com](http://mywebsite.com)发送 CORS 标头，而适用于[http://somedomain.mywebsite.com/](http://somedomain.mywebsite.com/)

```
SetEnvIf Origin "http(s)?://(.+\.)?mywebsite\.com(:\d{1,5})?$" CORS=$0

Header set Access-Control-Allow-Origin "%{CORS}e" env=CORS
Header merge  Vary "Origin" 
```

要为您的站点启用，您只需在上述 Apache 配置中将您的站点替换为“mywebsite.com”。

**允许多个站点：**

```
SetEnvIf Origin "http(s)?://(.+\.)?(othersite\.com|mywebsite\.com)(:\d{1,5})?$" CORS=$0 
```

**部署后验证：**

以下 curl 响应在更改后应具有“Access-Control-Allow-Origin”标头。

```
curl -X GET -H "Origin: http://examplesite1.com" --verbose http://examplesite2.com/query 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-05-22T10:42:38.147

我需要一个仅限 PHP 的解决方案，以防万一有人也需要它。它接受一个允许的输入字符串，如“*.example.com”，如果输入匹配，则返回请求标头服务器名称。

```
function getCORSHeaderOrigin($allowed, $input)
{
    if ($allowed == '*') {
        return '*';
    }

    $allowed = preg_quote($allowed, '/');

    if (($wildcardPos = strpos($allowed, '*')) !== false) {
        $allowed = str_replace('*', '(.*)', $allowed);
    }

    $regexp = '/^' . $allowed . '$/';

    if (!preg_match($regexp, $input, $matches)) {
        return 'none';
    }

    return $input;
} 
```

以下是 phpunit 数据提供者的测试用例：

```
//    <description>                            <allowed>          <input>                   <expected>
array('Allow Subdomain',                       'www.example.com', 'www.example.com',        'www.example.com'),
array('Disallow wrong Subdomain',              'www.example.com', 'ws.example.com',         'none'),
array('Allow All',                             '*',               'ws.example.com',         '*'),
array('Allow Subdomain Wildcard',              '*.example.com',   'ws.example.com',         'ws.example.com'),
array('Disallow Wrong Subdomain no Wildcard',  '*.example.com',   'example.com',            'none'),
array('Allow Double Subdomain for Wildcard',   '*.example.com',   'a.b.example.com',        'a.b.example.com'),
array('Don\'t fall for incorrect position',    '*.example.com',   'a.example.com.evil.com', 'none'),
array('Allow Subdomain in the middle',         'a.*.example.com', 'a.bc.example.com',       'a.bc.example.com'),
array('Disallow wrong Subdomain',              'a.*.example.com', 'b.bc.example.com',       'none'),
array('Correctly handle dots in allowed',      'example.com',     'exampleXcom',            'none'), 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-18T18:30:41.420

[当从“cookie 域”（ www.domain.tld](http://www.domain.tld) ）读取字体时，我们在静态“无 cookie”域上的 Font Awesome 遇到了类似的问题，这篇文章是我们的英雄。请参阅此处：[如何解决“缺少跨域资源共享 (CORS) 响应标头”网络字体问题？](https://stackoverflow.com/questions/27009425/how-can-i-fix-the-missing-cross-origin-resource-sharing-cors-response-header/47369393#47369393)

对于 copy/paste-r 类型（并提供一些道具），我将所有贡献拼凑在一起，并将其添加到站点根目录的 .htaccess 文件的顶部：

```
<IfModule mod_headers.c>
 <IfModule mod_rewrite.c>
    SetEnvIf Origin "http(s)?://(.+\.)?(othersite\.com|mywebsite\.com)(:\d{1,5})?$" CORS=$0
    Header set Access-Control-Allow-Origin "%{CORS}e" env=CORS
    Header merge  Vary "Origin"
 </IfModule>
</IfModule> 
```

超级安全，超级优雅。喜欢它：您不必为资源窃贼/热链接器类型打开服务器带宽。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-27T13:33:03.347

在 .htaccess 中设置`Access-Control-Allow-Origin`时，只有以下工作：

```
SetEnvIf Origin "http(s)?://(.+\.)?domain\.com(:\d{1,5})?$" CRS=$0
Header always set Access-Control-Allow-Origin "%{CRS}e" env=CRS 
```

我尝试了其他几个建议的关键字`Header append`, `Header set`,*没有一个按照 SO 上的许多答案中的建议起作用*，但我不知道这些关键字是否已过时或对**nginx**无效。

这是我的完整解决方案：

```
SetEnvIf Origin "http(s)?://(.+\.)?domain\.com(:\d{1,5})?$" CRS=$0
Header always set Access-Control-Allow-Origin "%{CRS}e" env=CRS
Header merge Vary "Origin"

Header always set Access-Control-Allow-Methods "GET, POST"
Header always set Access-Control-Allow-Headers: *

# Cached for a day
Header always set Access-Control-Max-Age: 86400

RewriteEngine On

# Respond with 200OK for OPTIONS
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L] 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-12-04T10:54:11.343

对于**Spring Boot**，我发现`RegexCorsConfiguration`它扩展了官方`CorsConfiguration`：[https ://github.com/looorent/spring-security-jwt/blob/master/src/main/java/be/looorent/security/jwt/RegexCorsConfiguration.java](https://github.com/looorent/spring-security-jwt/blob/master/src/main/java/be/looorent/security/jwt/RegexCorsConfiguration.java)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-24T20:00:57.870

看起来最初的答案是针对 Apache 2.4 之前的。它对我不起作用。这是我必须更改以使其在 2.4 中工作的内容。这适用于*yourcompany.com*的任何深度的子域。

```
SetEnvIf Host ^((?:.+\.)*yourcompany\.com?)$    CORS_ALLOW_ORIGIN=$1
Header append Access-Control-Allow-Origin  %{REQUEST_SCHEME}e://%{CORS_ALLOW_ORIGIN}e    env=CORS_ALLOW_ORIGIN
Header merge  Vary "Origin" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-27T16:19:06.180

我不得不稍微修改一下[Lars 的](https://stackoverflow.com/a/30394641/2225619)答案，因为一个孤儿`\`最终出现在正则表达式中，只比较实际主机（不注意协议或端口），并且我想支持`localhost`除了我的生产域之外的域。因此，我将`$allowed`参数更改为数组。

```
function getCORSHeaderOrigin($allowed, $input)
{
    if ($allowed == '*') {
        return '*';
    }

    if (!is_array($allowed)) {
        $allowed = array($allowed);
    }

    foreach ($allowed as &$value) {
        $value = preg_quote($value, '/');

        if (($wildcardPos = strpos($value, '\*')) !== false) {
            $value = str_replace('\*', '(.*)', $value);
        }
    }

    $regexp = '/^(' . implode('|', $allowed) . ')$/';

    $inputHost = parse_url($input, PHP_URL_HOST);

    if ($inputHost === null || !preg_match($regexp, $inputHost, $matches)) {
        return 'none';
    }

    return $input;
} 
```

用法如下：

```
if (isset($_SERVER['HTTP_ORIGIN'])) {
    header("Access-Control-Allow-Origin: " . getCORSHeaderOrigin(array("*.myproduction.com", "localhost"), $_SERVER['HTTP_ORIGIN']));
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-28T16:29:24.067

对我来说，我想要一个多域选项，这是我使用的解决方案，使用`python`and `flask`,

```
VALID_DOMAINS = 'https://subdomain1.example.com', 'https://subdomain2.example.com'

def handle_request(request):
    origin = request.headers.get('Origin')

    if request.method == 'OPTIONS':
        if origin not in :
            return ''

        headers = {
            'Access-Control-Allow-Origin': origin,
            'Access-Control-Allow-Methods': 'GET',
            'Access-Control-Allow-Headers': 'Content-Type',
            'Access-Control-Max-Age': '3600',
        }
        return '', 204, headers

    return (
        main_function_with_logic(request),
        200,
        {'Access-Control-Allow-Origin': origin,
         ...}
    ) 
```

您显然可以将 VALID_DOMAINS 扩展到您想要的任意长度，以及您想要的任何内容（非 https、不同的端口等），然后在请求中检查它。

我更喜欢这个解决方案而不是通配符解决方案，所以这是我在我运行的服务器上的选择。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2020-04-05T13:48:41.113

在我的情况下使用角度

在我的 HTTP 拦截器中，我设置

```
with Credentials: true. 
```

在请求的头部

# html - 建议优化 kineticjs 手游

> ID：14003333
> 
> 赞同：1
> 
> 时间：2012-12-22T13:44:35.693
> 
> 标签：html, kineticjs

我是来寻求帮助的。

我正在尝试在 html5 中为 Android 和 iOS 实现一个简单的老虎机（赌场）游戏。我的公司要求我研究可以加快开发速度的框架。所以我选择了 KineticJS，因为它有很好的设计和教程。

该项目已基本完成，但存在一个问题：它在 iPad 和 iPhone5 上运行良好，但在 Android 上运行不佳。至少它必须在 Android 2.3 上运行。

我使用了 kineticjs 库来提高开发速度，当然它会有所帮助，但是这样做的代价是相当高的。

我将大部分 Kinetic.Image 对象更改为 Kinetic.Shape，这对性能有所帮助。我还剥离了一些未使用的变量，现在我使用这种格式： (var i = 0, ln = something.length; i < ln; i++) 循环。

我意识到还有一个缓存，但我有点害怕失去控制，因为我还在开发它。

我还可以优化什么来帮助解决这种情况？也许剥离了 Android 中的一些亮点和动画。

到目前为止，最糟糕的情况是客户端本身在 Android 上的加载。它在第一次加载时不能很好地加载，有时它会错误地定位对象。

好吧，如果您知道任何加快 Kineticjs 游戏速度的魔术技巧，请告诉我。

抱歉，我现在无法提供演示，因为我仍在开发中，它会影响测试。

谢谢！

# java - REST 服务上的身份验证令牌有什么意义

> ID：14003334
> 
> 赞同：15
> 
> 时间：2012-12-22T13:44:50.010
> 
> 标签：java, rest, authentication

每次发出请求时，使用 REST Web 服务而不是通过 HTTPS/加密发送用户名和密码时，使用身份验证令牌的价值是什么？

我知道，例如 OAUTH 有一些好处，因为您不需要将密码泄露给第三方，您可以将令牌传递给您不想共享用户名/密码的受信任的第三方......等等

但除了这些我当然不需要的特殊好处之外，为什么我要使用令牌而不是每次都发送用户名/密码。

这可能是为了让客户的生活更轻松，并且不必每次都发送用户名/密码。好吧，但是现在客户必须记住我的令牌并在每次请求时向我发送令牌。因此，现在它不会记住/发送用户名/密码，而是对令牌执行相同的操作！所以客户端实现代码不会少。

那么这里的真正价值是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T16:31:29.033

这真的取决于场景——如果不了解更多关于 API 的信息很难说清楚——但是“身份验证令牌”的使用远非普遍，你说得对，许多 API 不需要（也不使用）它们。许多 API 只需要在每个请求中发送一个 API 密钥（通常通过 HTTPS 以防止其被拦截），或者需要一个 API 密钥来识别用户，还需要一个带有“密钥”的数字签名来证明用户的身份（请参阅[使用大多数 API 时，为什么它们需要两种类型的身份验证，即密钥和秘密？](https://stackoverflow.com/questions/1482472/when-working-with-most-apis-why-do-they-require-two-types-of-authentication-na/1501112#1501112)）。

用户名/密码在公共 API 中不经常使用，因为它们不够灵活，并且不能在用户身份和应用程序身份之间提供足够的“分离”。例如，您注册为开发人员以使用 Flickr API 并创建一个使用该 API 的 iPhone 应用程序——您真的希望将您的开发人员用户名/密码内置到应用程序中吗？如果您稍后更改密码怎么办？如果您想开发 5 个应用程序并分别跟踪它们的使用情况并能够随时关闭任何应用程序而不影响其他应用程序怎么办？

但是，对于您真正只想识别人类用户而不是应用程序的情况（例如，只为您自己的应用程序提供服务的私有 API 后端，而不是公共 API），在大多数情况下，我没有发现任何问题使用您的建议，即每个请求通过 HTTPS 的用户名/密码。哦，顺便说一句，身份验证令牌具有“可限制”的附加优势（可以在特定时间到期，只能限制某些操作等），但显然这仅在非常特定的场景中有用。

另外：正如上面用户“Dan”所指出的，当设计一个需要在每个请求（或任何请求，即使它只是登录请求）中发送用户名/密码的 API 时，要小心你是如何做的。如果您使用的是浏览器默认支持的技术（例如 HTTP Basic Auth），那么您将阻止自己将 API 安全地暴露给跨域用户（即很可能永远无法从浏览器直接安全地调用您的 API ，即来自 AJAX/Flash/Silverlight 代码）。

这是一个复杂的话题，在这里无法完全解释，但请记住，如果您的 API 依赖于浏览器可以记住的任何安全凭证，然后“静默”地注入每个请求（例如 HTTP 基本身份验证、cookies），那么使用任何跨域技术（CORS、JSONP、crossdomain.xml 等）启用对该 API 的跨域访问是不安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:58:23.283

我可以回答这个问题的最好方法是指向描述 REST 安全性的[这个页面。](http://wiki.restlet.org/docs_2.0/13-restlet/27-restlet/46-restlet.html)它属于restlet wiki，不属于Jersey，但它可以应用于Jersey，因为它们都是REST 实现。

这是从我提供的链接中提取的：

“对于最大的阻力，服务器可以向客户端提供应用程序级授权令牌，服务器可以验证的不透明值属于正确的经过身份验证的用户。

*   这样的令牌对于第三方来说应该是难以计算的，例如用户身份凭证的服务器加盐 MD5 或 SHA1 散列。

*   要击败 XSRF，需要通过用户代理不会随每个请求自动返回的方式传输此应用程序级令牌。例如，它可以在表单的 HTML 中作为隐藏字段发送，并通过 POST 在编码的表单实体中返回。”

# ruby-on-rails - RubyMine 中的自动缩进 html.erb

> ID：14003336
> 
> 赞同：1
> 
> 时间：2012-12-22T13:44:54.533
> 
> 标签：ruby-on-rails, rubymine

我已经开始使用 RubyMine 但我有问题 - 在 html.erb 文件中自动缩进不起作用。即使我按下重新格式化代码，它也会被格式化在一列中。如何解决这个问题？我希望自动缩进像普通的 html 一样工作。

PS我正在使用RubyMine 4.5.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T01:31:01.203

RubyMine 似乎无法将 file.html.erb 识别为“纯 HTML 文件”。

尝试重命名（删除 .erb）只是为了看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T07:03:39.063

显然 RubyMine 将 .erb 文件视为 .xml 进行格式化，因此只需转到选项 > 编辑器 > 代码样式 > XML，并指定缩进列的数量即可

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T14:26:36.053

重启 RubyMine 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T14:23:07.977

我发现您可以通过设置选项 > 编辑器 > 代码样式 > 其他文件类型来自定义 ERB 的格式样式。

这个对我有用。

[在 jetbrains 中心查看](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206703785-Indenting-ERB-templates-as-HTML?page=1)

# android - 安卓摄像头中断

> ID：14003339
> 
> 赞同：0
> 
> 时间：2012-12-22T13:45:13.940
> 
> 标签：android, android-activity, camera

在android中，是否可以让相机被另一个活动打断？我的意思是让应用程序在启动时运行相机，然后在单击快门时将用户带到另一个活动。所以我想相机会关闭，然后启动另一行代码。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:40:02.910

您可以使用以下命令启动相机意图：

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
startActivityForResult(intent, 0);

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (resultCode == Activity.RESULT_OK && requestCode == 0) {
    String result = data.toURI();
    // ...
  }
} 
```

将点击快门后要执行的代码放在if语句中。如果您需要更多控制，请使用相机预览功能。您可以在[此处](http://developer.android.com/training/camera/cameradirect.html)找到更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:41:35.293

那么有什么问题，[这里](https://stackoverflow.com/questions/7304007/take-picture-from-camera-and-choose-from-gallery-and-display-in-image-view)你可以看到从相机拍照的代码，你必须复制这个并改变它的一部分，在`onActivityResult`函数中编写你的代码来打开另一个Activity，然后完成Camera，就是这样

问候海克·纳哈佩蒂安

# asp.net-mvc - 在浏览器中查看 MVC 3 ASP.NET

> ID：14003353
> 
> 赞同：2
> 
> 时间：2012-12-22T13:46:38.767
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在 Visual Studio 2010 中，您可以右键单击 Web 表单应用程序中的 aspx 页面，或在解决方案资源管理器中的 Web 表单应用程序本身上单击鼠标右键，然后在上下文菜单中获得“在浏览器中查看”。

在 ASP.NET MVC 项目中，该项目似乎在上下文菜单中不可用。我知道运行该应用程序的唯一方法是将 MVC 应用程序设置为启动项目并按 CTRL+F5。但是，如果解决方案中有两个 MVC 应用程序，这实际上是行不通的。你如何为 mvc 应用程序实现这一点？

在我的场景中，有多个用户在不同的控制器/视图上处理应用程序，他们如何在不更改 Global.asax 中的路由的情况下执行他们的视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T01:06:32.093

这是 MVC 和 Web 窗体之间的根本区别，对于您“获得”这种区别至关重要。

在 Web 表单中，一切都围绕页面展开。您可以右键单击一个 aspx 页面并“在浏览器中查看”，因为该页面和 URL 之间存在 1:1 的相关性。该页面位于请求的顶部，可以这么说。

在 MVC 中，一切都围绕着控制器。视图无论如何都不是 URL 的一部分，它只是控制器用来呈现输出的模板。您可以选择让任何操作方法呈现您想要的任何视图，它不直接绑定到请求。

由于“视图”与请求完全断开，因此没有“在浏览器中查看”选项，因为这样做完全没有意义。您不会“查看”视图，它们是由控制器操作方法呈现的模板。

# php - 使用表单值动态计算同一页面上的另一个值

> ID：14003356
> 
> 赞同：0
> 
> 时间：2012-12-22T13:47:11.117
> 
> 标签：php, javascript, forms, jquery

我正在尝试使用表单值来动态计算同一页面上的另一个值。

我有两张桌子：

1.  使用输入表单
2.  我想在发布之前动态使用输入表单值。

我已经使用过 php，但它不起作用，因为我必须提交才能获取值。我对 j script 和 ajax 不是很熟悉，但是我听说可以使用这些来做到这一点。让我知道您认为最好的解决方案。感谢您的建议。

这里的例子：

```
<table><form name="form1" method="post" action="results.php">
    <tr>
        <td> </td><td> a </td><td> b </td>
    </tr>
    <tr>
        <td> Line 1 </td><td><input name="a1" type="number"></td><td><input name="b1" type="number"></td>
    </tr>
    <tr>
        <td> Line 2 </td><td><input name="a2" type="number"></td><td><input name="b2" type="number"></td>
    </tr>
    <tr>
        <td><input type="submit" name="Submit" value="Submit"></td>
    </tr>
</form></table>

<table>
    <tr>
        <td> Dynamic Result </td>
    </tr>
    <tr>
        <td> a1/b1 (to be calculated dynamically)</td>
    </tr>
    <tr>
        <td> a2/b2 (to be calculated dynamically) </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:02:05.457

你需要开始阅读 jQuery，但现在：

```
// Load jQuery Library, put jquery.js in current directory
<script type="text/javascript" src="jquery.js"></script>
<table><form name="form1" id="form1" method="post" action="results.php">
    <tr>
        <td> </td><td> a </td><td> b </td>
    </tr>
    <tr>
        <td> Line 1 </td><td><input name="a1" id="a1" type="number"></td><td><input name="b1" id="b1" type="number"></td>
    </tr>
    <tr>
        <td> Line 2 </td><td><input name="a2" id="a2" type="number"></td><td><input name="b2" id="b2" type="number"></td>
    </tr>
    <tr>
        <td><input type="submit" name="Submit" value="Submit"></td>
    </tr>
</form></table>

<table>
    <tr>
        <td> Dynamic Result </td>
    </tr>
    <tr>
        <td id="first-result"> a1/b1 (to be calculated dynamically)</td>
    </tr>
    <tr>
        <td id="second-result"> a2/b2 (to be calculated dynamically) </td>
    </tr>
</table>

<script>
$(document).ready(function(){
    $('input').on('change', function(){
        var a1 = $('#a1').val();
        var a2 = $('#a2').val();
        var b1 = $('#b1').val();
        var b2 = $('#b2').val();
        $('#first-result').text(parseInt(a1)/parseInt(a2));
        $('#second-result').text(parseInt(a2)/parseInt(b2));
    }); 
});
</script> 
```

# android - 如何将 ActionBarSherlock 库添加到项目中？

> ID：14003361
> 
> 赞同：3
> 
> 时间：2012-12-22T13:47:46.030
> 
> 标签：android, actionbarsherlock

如何将 ActionBarSherlock 库添加到项目中？我尝试在 Android->Library 中添加库但无法添加。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T10:17:18.180

上面的两个答案都接近解决方案，但还不够接近。这是我解决这个问题的方法。

**1.**安装android sdk 14版

**2.**将你下载的ActionBarSherlock项目导入Eclipse

**3\. 非常重要**在第 4 步之前执行此操作 在您的项目中查找 android-support-v4.jar 如果找到然后删除它。

**4.**右键单击您要使用自定义操作栏的项目/Properties/Library/Add 并添加库项目。

如果在第 4 步之后出现错误，请`Jar mismatch! Fix your dependencies`重复第 3 步。

希望这对其他人有所帮助并度过愉快的一天。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:54:36.207

你可以这样做：

属性 -> Android -> 添加 -> ABS

![在此处输入图像描述](../Images/0cac3b681adbd9904d7293617716f605.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-01T07:26:09.457

与Dhiren（红十字会）有相同的情况。已将 Sherlock 库的源文件夹移动到我的 Eclipse 工作区文件夹，再次导入它并解决了问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T13:55:09.600

1) 将 Sherlock 库作为项目导入 Eclipse IDE。

2）在您的目标项目中， Make `Right Click on Project Node`，选择`Properties-->Android` Scroll Down to Library Section Then `Select-->Add Button --> A wizard opens select the Sherlock library project and press Ok button Again press Ok button in properties window`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T17:56:27.857

进入eclipse中的Sherlock库项目，打开project.properties文件...检查android.library=true...如果为false，检查为true :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-03T12:54:11.503

我已经解决了同样的问题（红十字图标而不是绿色勾号）在这个线程中遵循了[建议](https://stackoverflow.com/questions/9602364/i-can-not-connect-actionbarsherlock-to-the-project)：“......库项目必须与您的项目在同一个分区上。”

干杯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-04T12:20:51.730

通过遵循所有这些步骤，它对我有用。

1.  文件->导入->现有项目到工作区->点击下一步
2.  在选择根目录中，浏览并在**AndroidBarSherlock**文件夹中找到库文件夹。选择库。然后单击确定。
3.  选择将项目复制到工作区。然后单击完成。
4.  然后您的动作 Sherlock 库被导入。
5.  右键单击您需要添加的项目，属性 -> Android -> 添加 -> 库 -> 按 OK

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-23T08:18:29.613

**在将ActionBarSherlock** *库*添加到您的项目之前，您必须右键单击**ABS** *库*选择**Android 工具**->**添加支持库**（对您的项目执行相同的操作）

# php - 选择按天分组的点击数，包括点击数为 0 的天数

> ID：14003364
> 
> 赞同：1
> 
> 时间：2012-12-22T13:47:53.160
> 
> 标签：php, mysql

我有一个记录 url 命中的表

目标是`hits`按`parent`天分组

`parent`代表url的id

`time`是由 PHP 生成的 int`time()`

```
id | parent | time 
```

到目前为止我提出的查询：（假设我想选择 item `2929`）

```
SELECT time, count( * ) AS hits
FROM `hits`
WHERE parent =2929
GROUP BY floor( time /86400 )
ORDER BY time ASC 
```

现在的问题是，我只得到 5 行

```
time            hits
1355761244      9
1355791721      22
1355879697      23
1355966014      16
1356070906      24 
```

因为 MySQL 不会返回 0 次点击的天数。

我怎样才能解决这个问题？

目标将是例如选择最后 7 天或 30 天或 365 天，以及接收`0`命中的天数

更新了查询以选择上个月的日期：

```
SELECT floor(time/86400) AS day, count( * ) AS hits
FROM `hits`
WHERE parent =2929
AND time > ONE_MONTH_AGO
GROUP BY day
ORDER BY time ASC
LIMIT 0 , 30 
```

使用 Pharaoh 的 PHP 函数，这应该可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:52:16.820

由于没有命中的一天没有命中，因此这一天没有数据库条目 - 所以 MySQL 无法选择任何内容。
查询完成后，我会在 PHP 中执行此操作（“填充孔”）。

您可以像这样进行数据后处理：

```
for ($day=$minday; $day<=$maxday; $day++)
  if (!isset($sql_array[$day]))
    $sql_array[$day]=0; 
```

或者您在`echo`ing 数据时直接执行此操作：

```
for ($day=$minday; $day<=$maxday; $day++)
  if (!isset($sql_array[$day]))
    echo 0;
  else
    echo $sql_array[$day]; 
```

我假设`$day`是一个整数，计算天数，你必须修改它以满足你的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:02:08.137

以时间戳的形式设置您的开始日期和结束日期，并使用 PHP range() 函数创建这些时间戳的数组。将数组中的值设置为零，然后将查询结果集映射到数组中。像这样得到零数组的东西。

```
<?php // RAY_temp_foo.php
error_reporting(E_ALL);
date_default_timezone_set('America/Chicago');

$old = strtotime('September 15, 2012');
$now = strtotime('October 15, 2012');
$day = 60*60*24;
$arr = range($old, $now, $day);
$new = array_flip($arr);
foreach ($new as $key => $nul) $new[$key] = 0;
var_dump($new); 
```

您可能需要标准化您的“时间”值以与数组中的键对齐，以便它们代表每天的开始秒。

# android - Android AdMob 不显示在真实设备上

> ID：14003365
> 
> 赞同：0
> 
> 时间：2012-12-22T13:47:57.697
> 
> 标签：android, admob

AdMob 在 android 版本 2.3 和 4.2 的模拟器上正确显示，但在真实设备（android 版本 4.0.4）上不显示。错误是

```
12-22 19:35:56.930: ERROR/Ads(6311): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (http://media.admob.com/:1)
12-22 19:35:56.930: ERROR/Web Console(6311): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at http://media.admob.com/:1 
```

代码是

admob_preference.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:gravity="center">
    <com.google.ads.AdView
            android:id="@+id/ad"
            ads:adSize="BANNER"
            android:layout_width="320dp"
            android:layout_height="wrap_content"
            ads:adUnitId="a150d2d17822fc0"
            ads:loadAdOnCreate="true"/>
</LinearLayout> 
```

AdmobPreference.java

```
public class AdmobPreference extends Preference
{

    public AdmobPreference(Context context) {
        super(context, null);
    }

    public AdmobPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        //override here to return the admob ad instead of a regular preference display
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        return inflater.inflate(R.layout.admob_preference, null);
    }

} 
```

首选项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <com.nbrk.rates.AdmobPreference android:key="ad" />
</PreferenceScreen> 
```

# c++ - 'auto f(params) -> decltype(..., void())' 中的 'void()' 有什么作用？

> ID：14003366
> 
> 赞同：55
> 
> 时间：2012-12-22T13:48:31.223
> 
> 标签：c++, c++11, sfinae, decltype, trailing-return-type

我在[这里](https://stackoverflow.com/a/9531274/1594090)找到了看起来像这样的代码：

```
auto f(T& t, size_t n) -> decltype(t.reserve(n), void()) { .. } 
```

在我阅读的所有文档中，我被告知`decltype`签名为：

> `decltype( entity )`

或者

> `decltype( expression )`

并且在任何地方都没有第二个论点。至少这是[cppreference](http://en.cppreference.com/w/cpp/language/decltype)所指出的。这是第二个论点`decltype`吗？如果是这样，它有什么作用？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-22T13:49:48.830

因为它是一个表达式，逗号只是逗号运算符（意​​味着类型是 rhs 侧的类型：）`void`，而不是另一个参数。

该代码正在使用 SFINAE - 如果`t.reserve(n)`存在则启用它，但它希望将返回类型保持为`void`.

# android - 如何以编程方式引用视图？

> ID：14003369
> 
> 赞同：2
> 
> 时间：2012-12-22T13:49:00.477
> 
> 标签：android, android-layout

我已经创建了一个布局。全部以编程方式完成。现在我有一个按钮，该按钮设置为在单击时更改视图的可见性。坦率地说，我不知道如何引用该视图。

以下是部分代码：

```
 //my button to show pop-up
    Button btn_showPop = new Button(this);
    btn_showPop.setText("Pop-up");
    btn_showPop.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    btn_showPop.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            hsv.post(new Runnable() {

                @Override
                public void run() {
                    if (Menu_Displayed) {
                        //pop-up
                        li_pop.setVisibility(View.VISIBLE); //how do I reference li_pop
                    } else {
                        //do nothing
                    }
                }
            });
        }
    });

    // pop-up:
    final LinearLayout li_pop = new LinearLayout(this);
    li_pop.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    li_pop.setOrientation(1);// 1 is vertical
    li_pop.setBackgroundColor(Color.LTGRAY);
    li_pop.setVisibility(View.GONE);
    li_pop.setClickable(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:58:14.267

更改代码以获取对动态创建的视图的引用

`decalre li_pop` 班级第一

```
 LinearLayout li_pop; 
```

创建时的第二组 id 为`li_pop`：

```
li_pop = new LinearLayout(this);
li_pop.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
        LayoutParams.FILL_PARENT));

 li_pop.setId(599980); // set LinearLayout id here 
```

`li_pop` 现在您可以在单击按钮时引用LinearLayout ：

```
@Override
        public void onClick(View v) {
            hsv.post(new Runnable() {

                @Override
                public void run() {
                    if (Menu_Displayed) {
                        //pop-up
                        li_pop.setVisibility(View.VISIBLE); 
                      //OR
                 LinearLayout li_popnew=(LinearLayout)findViewById(599980);
                    li_popnew.setVisibility(View.VISIBLE);

                    } else {
                        //do nothing
                    }
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:59:08.120

移动线

```
final LinearLayout li_pop = new LinearLayout(this); 
```

在参考之前。

# php - 在 Google OpenId 中实现强制注销

> ID：14003370
> 
> 赞同：4
> 
> 时间：2012-12-22T13:49:03.090
> 
> 标签：php, google-openid

我正在为我的网站使用 Google OpenId API。我需要使用 Google OpenId API 实现强制注销概念。

下面的代码我已经尝试过了，但我无法获得使用 openId 强制注销的实际解决方案。

如何注销 Google OpenId 中的当前登录会话？

```
<?php

session_start();
if (isset($_SESSION['id'])) 
{
    // Redirection to login page.
    header("location: home.php");
}

if (array_key_exists("login", $_GET)) {
    $oauth_provider = $_GET['oauth_provider'];
    if ($oauth_provider == 'google') {

     $url='https://www.google.com/accounts/Logout';

  //After clearing a session it is redirected to  login-google.php

    $redirectUrl="login-google.php";

    $redirectUrl = '&return='.$redirectUrl;

    $finalUrl = $url . $redirectUrl;

   echo("<script>top.location.href='".$finalUrl."'</script>");

    } 
}
?> 
```

# html - HTML CSS 将段落内的部分文本居中

> ID：14003377
> 
> 赞同：4
> 
> 时间：2012-12-22T13:49:55.337
> 
> 标签：html, css, text, alignment, paragraph

我将如何设法使段落内的部分文本居中？

示例我有一段：

```
<p id="hello">Hello : <span id="love">I love you</span> very much</p> 
```

我希望“我爱你”部分位于中心的新行中（这就是我尝试使用 span 的原因），然后段落的其余部分为新行但正常对齐。

我试过这样但不会工作：

现在在css中我有：

```
#hello {
    font-size:22px;
    margin: 2em;
}

#love {
    text-align:center;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T13:52:36.390

```
#love {
    display:block;
    text-align:center;
} 
```

# powershell - Get-Help about* 不适用于非英语系统

> ID：14003380
> 
> 赞同：6
> 
> 时间：2012-12-22T13:50:18.050
> 
> 标签：powershell, localization, powershell-3.0, culture

我正在使用德语 PS 版本，我正在尝试使用命令显示[关于 powershell v. 3.0 的主题](http://technet.microsoft.com/en-us/library/hh847856.aspx)

```
Get-Help about_* 
```

这似乎是列出主题的正确命令。我还使用更新了 PS 帮助

```
Update-Help 
```

CMDlet，以防万一主题丢失。无论如何：Get-Help cmdlet 处理并返回：什么都没有。使用`fl`格式化输出或将输出保存到变量没有帮助，根本找不到关于主题。但是，一般来说，通配符似乎有效。跑步

```
get-help get-* 
```

奇迹般有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T15:17:57.700

update-help 不是“本地化的”，所以使用这个：`Update-Help -UICulture "en-us"` 你现在应该看到 .txt 文件

您可以在此处查看修改后的 get-help 功能，该功能允许您指定要使用的文化： http: [//social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/6cb7fb10-f80e-41fc-bee7 -6adda66f311a](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/6cb7fb10-f80e-41fc-bee7-6adda66f311a)

# php - Paypal IPN：随机“ php_network_getaddresses：getaddrinfo 失败：名称或服务未知（0）”错误

> ID：14003382
> 
> 赞同：3
> 
> 时间：2012-12-22T13:50:55.620
> 
> 标签：php, networking, paypal, getaddrinfo

在使用以下 Paypal IPN 代码时，我有时会收到“getaddrinfo failed”错误，并且我的脚本（通过 PHP 更新 mySQL 数据库）未执行。

**编码**

```
// read post from PayPal system and add 'cmd'

$postvars = array();

while (list ($key, $value) = each ($HTTP_POST_VARS)) {
    $postvars[] = $key;
}

$req = 'cmd=_notify-validate';

for ($var = 0; $var < count ($postvars); $var++) {
    $postvar_key = $postvars[$var];
    $postvar_value = $$postvars[$var];
    $req .= "&" . $postvar_key . "=" . urlencode ($postvar_value);
}

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.paypal.com\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Connection: close\r\n";
$fp = fsockopen('ssl://www.paypal.com', 443, $errno, $errstr, 30);
...
...
...
if (!$fp) {
    echo $errstr . " (" . $errno . ")";
} else {
    // UPDATE DB //
} 
```

**错误**

```
php_network_getaddresses : getaddrinfo failed: Name or service not known (0) 
```

我不明白这是随机发生的，有时整个脚本都可以正常工作。它似乎完全独立于收到的变量：

*   subscr_id
*   txn_type
*   验证签名
*   等等等等……

我一周前联系了 Paypal 支持，但到目前为止没有回复。

任何帮助将不胜感激。:)

PS：我刚刚意识到错误仅来自一行。

```
$fp = fsockopen('ssl://www.paypal.com', 443, $errno, $errstr, 30); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:11:07.050

这仍然发生在你​​身上吗？
原因是它无法解析 www.paypal.com - 看看您是否可以通过默认名称服务器手动解析 www.paypal.com。如果这不起作用，请与名称服务器的提供者合作，或切换到另一个（如果可能）。

# java - 如何在javafx 2中部分填充滑块

> ID：14003384
> 
> 赞同：1
> 
> 时间：2012-12-22T13:51:10.567
> 
> 标签：java, javafx-2

我想在滑块向前（向右）前进时用颜色填充轨道。我不能使用进度条。我试图创建一个具有导航支持的自定义进度条，但没有运气。我试图用css样式来做，但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:36:34.777

也许您可以使用布局窗格（您喜欢的任何类型）并在其上添加进度条和滑块。确保滑块的轨道是透明的，并绑定滑块和进度的值。

# python - Windows 中的文件路径编码

> ID：14003386
> 
> 赞同：0
> 
> 时间：2012-12-22T13:51:15.650
> 
> 标签：python, windows

我正在编写一个将文件路径保存到数据库的小型应用程序（使用 django）。我假设文件路径是 utf-8 编码的，但我遇到了以下文件名：`C:\FXG™.nfo`这显然不是用 utf-8 编码的。

当我这样做时，`filepath.decode('utf-8')`我收到以下错误：

> `UnicodeDecodeError:`“utf8”编解码器无法解码`0x99`位置 30 中的字节：无效的起始字节

（我修剪了文件名，所以这里的位置不对）。

我如何知道文件路径是如何以适用于每个文件名的方式编码的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:57:46.260

使用`sys.getfilesystemencoding()`.

这应该允许您转换所有看起来不错的路径。

但是，总有可能存在非法编码的文件或文件夹，您必须考虑如何在您的应用程序框架中处理这些文件或文件夹。

某些应用程序可能会忽略此类文件，而其他应用程序则将名称保留为二进制 blob。

# jquery - 扩展更多jquery

> ID：14003387
> 
> 赞同：0
> 
> 时间：2012-12-22T13:51:20.367
> 
> 标签：jquery, facebook, extend

```
<script type="text/javascript">
function lastAddedLiveFunc(goto)  {
    alert(goto) ;
        jQuery('.scroll_container').scrollExtend(
            {   
                'target': 'div#scroll_items',           
                'url': 'components/com_a_main_search/more_content.php?limit='+goto, 
                'newElementClass': 'list_item more_content'
            }
        );

    }

$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
     $('#limit').val( Number($('#limit').val()) + 2 );

       lastAddedLiveFunc($('#limit').val());
    }
}); 
```

go 的值总是 0 ?????? 虽然我把

```
alert(goto) 
```

它显示正确的值在此行中始终为 0

```
'url': 'components/com_a_main_search/more_content.php?limit='+goto, 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:27:58.257

查看插件的源代码，似乎一旦在元素上调用它就不会覆盖选项。而且它也不支持在元素上设置后删除插件的方法。

但我注意到该`url`参数可以是一个函数，在`url`需要使用时调用。因此，您可以在那里传递一个函数，该函数将根据某些变量返回不同的 url..

尝试

```
$(function(){
    var goto = 0;

    jQuery('.scroll_container').scrollExtend({   
        'target': 'div#scroll_items',           
        'url': function(){
            var current = goto;
            goto += 2;
            return 'components/com_a_main_search/more_content.php?limit='+current;
        }, 
        'newElementClass': 'list_item more_content'
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:03:19.323

插件`scrollExtend`中可能有代码来检测插件是否已经初始化，如果已经初始化则不做任何事情。这意味着选项将与第一次初始化时保持相同，即使您尝试使用不同的选项再次对其进行初始化。

如果没有查看您的插件的文档，将很难提供进一步的帮助。查看插件是否支持在初始化后更改选项

# matlab - 替换 matlab GUI 中的命令“set”

> ID：14003389
> 
> 赞同：0
> 
> 时间：2012-12-22T13:51:33.797
> 
> 标签：matlab, user-interface

如何在 matlab 的 GUI 中使用命令“set”，它可以保留以前的答案，而不是用新的答案替换它。例如，当我使用 for 循环并获得多个输出时，在普通的 matlab 代码中，它将保留所有输出并将其打印在屏幕上，如下所示：

```
for i=2:length(contextt)
if ~isequal(co1,co2)
if strcmp(q,pc) || ~ismember(tt1(length(tt1)),tt3)
       fprintf('RKC = { %s , %s }\n',pc,cc)

   set(textA,'string',['RKC = {',pc ,',', cc,'}']);            

end
end
end 
```

结果将如下：

```
 answer = { a0.b0.d6 , a0.c0 }
 answer = { a0.c0 , a0.c0.d5 }
 answer = { a0.c1.b2.d13 , a0.c1.c3 } 
```

但在 GUI 版本中，当我输入：

```
set(textA,'string',['answer = {',x ,',', m,'}']); 
```

它只会给我最后一个答案意味着每次 for 循环开始时它都会更新答案：

```
 answer={a0.d2.c2 , a0.d2.c2.d10} 
```

GUI中是否有任何命令可以保留答案并将每个答案放在一行中，就像 fprintf 一样。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:02:45.013

您可以创建一个新变量来保存以前的结果和新的结果。

例如：

```
str='';
for i=1:6
str=[str; num2str(i)];
end 
```

现在，当您使用 set(handle,'string',str) 时，它将显示：

```
1
2
3
4
5
6 
```

# azure - 使用 Azure SDK 1.8 如何启用 Intellitrace？

> ID：14003393
> 
> 赞同：1
> 
> 时间：2012-12-22T13:52:03.467
> 
> 标签：azure, azure-web-roles

我拼命想弄清楚为什么我的 Azure Web 角色不断重复。我从 MVC3 升级到 MVC4，它似乎坏了。

所有事件日志提供的是

> 属于站点“1”的应用程序“/”设置了无效的 AppPoolId“DefaultAppPool”。因此，该应用程序将被忽略。

和

```
The application '/' belonging to site '1273337584' has an invalid AppPoolId 
```

大多数建议已被遵循，但我无法弄清楚如何在 SDK 1.8 附带的发布对话框中启用 Intellitrace？Enable Intellitrace 复选框似乎不再存在。

任何想法现在如何使用 Intellitrace？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:20:26.987

如果您询问如何在 Azure SDK 中使用 MVC4 Web 角色启用 Intellitrace，您只需在“**发布窗口”>“设置”>“高级设置”**中进行设置，如下所示：

![在此处输入图像描述](../Images/7cf76351822b64c49f627932fc13cd15.png)

# mysql - MySQL 选择上一条语句的结果

> ID：14003400
> 
> 赞同：0
> 
> 时间：2012-12-22T13:52:58.643
> 
> 标签：mysql, sql

我对 SQL 很陌生，我遇到了这个问题：我有关系表，其中人有权力

```
A has X
A has Z
B has X
B has Y
C has Y
D has Z 
```

我想选择所有具有 X 和 Y 权力的人，在这种情况下是 B。当然，我会有一个更复杂的权力组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:54:37.140

做这样的事情，

```
SELECT person
FROM tableName
WHERE power IN ('x', 'y')
GROUP BY Person
HAVING COUNT(*) = 2 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/fc618/1)

如果没有对每个人强制执行唯一约束`power`，则需要使用`DISTINCT`

```
SELECT person
FROM tableName
WHERE power IN ('x', 'y')
GROUP BY Person
HAVING COUNT(DISTINCT power) = 2 
```

*   [SQLFiddle 演示链接（*有重复*）](http://sqlfiddle.com/#!2/cc1a9/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:54:38.023

这称为[*关系除法*](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)，这是一种方法：

```
SELECT person
FROM Powers
WHERE power IN ('x', 'y')
GROUP BY person
HAVING COUNT(power) = 2 
```

# image - 使用浮点值写入图像

> ID：14003402
> 
> 赞同：7
> 
> 时间：2012-12-22T13:53:06.913
> 
> 标签：image, matlab, file-io, floating-point, floating-point-conversion

我的代码读取 RGB 图像，对其进行处理以产生浮点结果。如何在 Matlab 7.6.0 (R2008a) 中将这些值写为图像，保持这些浮点值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-10T21:44:20.033

[实际上可以将 64 位像素数据（即表示双精度浮点值](https://www.mathworks.com/help/matlab/ref/double.html)所需的位数）适合某些图像格式，特别是[PNG](http://www.mathworks.com/help/matlab/ref/imwrite.html#btwhrak)。您甚至可以准确地恢复数据。关键是将所有内容编码为[`uint16`](https://www.mathworks.com/help/matlab/ref/uint16.html)值并使用[真彩色 RGB 图像](https://www.mathworks.com/help/matlab/creating_plots/image-types.html#f2-12468)（16 位数据的 3 个颜色平面）和 alpha 透明度图（另外 16 位）。这是编码步骤：

```
data = rand(4);              % Just some sample data, a small 4-by-4 matrix
hexData = num2hex(data(:));  % Get the 16 digit hex codes for each pixel
C = mat2cell(hexData, numel(data), [4 4 4 4]);  % Split the hex codes into 4 groups of 4
C = cellfun(@(c) {uint16(hex2dec(c))}, C);  % Convert each hex value into a 16 bit integer
colorData = reshape([C{1:3}], [size(data) 3]);  % 4-by-4-by-3 uint16 color data
alphaData = reshape(C{4}, size(data));          % 4-by-4 uint16 alpha data
imwrite(colorData, 'double_data.png', 'Alpha', alphaData);  % Save image 
```

您现在有一个有效的图像文件，尽管如果您查看它可能看起来像随机垃圾。现在，您可以像这样解码它：

```
[imColor, ~, imAlpha] = imread('double_data.png');  % Load image
imSize = size(imColor);  % Get image size
imHex = [dec2hex(imColor(:, :, 1)) ...  % Convert each uint16 to hex and concatenate
         dec2hex(imColor(:, :, 2)) ...
         dec2hex(imColor(:, :, 3)) ...
         dec2hex(imAlpha)];
imdata = reshape(hex2num(imHex), imSize(1:2));  % Reproduce data 
```

和平等检查：

```
>> isequal(imdata, data)

ans =

  logical

   1           % it's the same! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:45:06.697

用于表示数字图像的每个元素的位数称为图像的**位深度**。位深度告诉我们图像元素可以采用的离散级别的数量。这些元素将存储为整数类型还是浮点类型无关紧要：位深度准确地确定了可能有多少离散级别。

如何解释位深度取决于图像是灰度还是彩色。例如，8 位灰度图像的强度为 [0,255]，而 24 位彩色图像的强度*也*为 [0,255]。使用此命名法是因为存储具有 8 位红色、绿色和蓝色分量的彩色像素需要 24 位。为了避免混淆，彩色图像通常以*每个颜色通道*的位数来表示。例如，PNG 格式支持每个通道最多 16 位，或带有 Alpha 层的真彩色 (RGB) 总共 48 位。

[imwrite](http://www.mathworks.com/help/matlab/ref/imwrite.html)的文档列出了 MATLAB 中可用的格式和位深度。

从 MATLAB 以最高精度保存彩色图像（MxNx3 矩阵）：

```
%// Assume an image called 'im' of type double.
%// First normalize to fall into [0,1].
im = im - min(im(:)); %// Save these numbers somewhere
im = im / max(im(:)); %// if you need to recover the original values later!
%// Best PNG quality.
imwrite(im,'image.png','bitdepth',16); 
```

如果您需要更高的精度，则必须将图像保存为通用数据格式，而不是专用图像格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T13:56:56.347

具有浮点值的图像可以以 tiff 图像格式写入。这是一个例子：

```
A=single(7.6*rand(10,10))

t = Tiff('test.tif', 'w'); 
tagstruct.ImageLength = size(A, 1); 
tagstruct.ImageWidth = size(A, 2); 
tagstruct.Compression = Tiff.Compression.None; 
tagstruct.SampleFormat = Tiff.SampleFormat.IEEEFP; 
tagstruct.Photometric = Tiff.Photometric.MinIsBlack; 
tagstruct.BitsPerSample = 32; 
tagstruct.SamplesPerPixel = 1; 
tagstruct.PlanarConfiguration = Tiff.PlanarConfiguration.Chunky; 
t.setTag(tagstruct); 
t.write(A); 
t.close();

B=imread('test.tif') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-26T19:22:59.360

以下函数将单精度灰度或 RGB 图像写入 tif 文件。而且你会发现，这些天，如果像素值在 (0,1) 范围内，Windows 资源管理器可以很好地处理单精度图像。当你读回来时，你可以`imread`照常使用。

```
function writeftif(outim,outfilename)
t = Tiff(outfilename,'w');
if size(outim,3)==3
    t.setTag('Photometric',Tiff.Photometric.RGB);
elseif size(outim,3)==1
    t.setTag('Photometric',Tiff.Photometric.MinIsBlack);
end
t.setTag('Compression',Tiff.Compression.None);
t.setTag('BitsPerSample',32);
t.setTag('SamplesPerPixel',size(outim,3));
t.setTag('SampleFormat',Tiff.SampleFormat.IEEEFP);
t.setTag('ImageLength',size(outim,1));
t.setTag('ImageWidth',size(outim,2));
t.setTag('PlanarConfiguration',Tiff.PlanarConfiguration.Chunky);
% Write the data to the Tiff object.
t.write(single(outim));
t.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T08:42:36.210

保存图像时，查看者需要知道值的全部可能范围。通常的约定是值是浮点数，范围是 [0..1]，当值是 uint8 时，范围是 [0..255] 等等。

当您使用 2.34 之类的浮点值保存图像时，您应该问自己查看器如何知道如何解释它？

我的回答是：你不能。您应该将值转换为有效范围，然后保存。例如，如果您的浮点范围是 [0..10]，您可以将所有值乘以 1000 并保存为 uint16。这样你就可以（几乎）保持浮点值的准确性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T14:19:21.420

如果您的 RGB 值超出范围（0,1），只需将 RGB 值转换为 0 和 1 之间。如果要恢复原始浮点值，可以将转换值保存为图像文件名的一部分。

# php - imagecreatefromjpeg 不工作

> ID：14003404
> 
> 赞同：5
> 
> 时间：2012-12-22T13:53:13.533
> 
> 标签：php, image, jpeg

您好，我在制作对象后显示图像几乎没有问题。我仍在学习使用对象图像。所以这是我的代码：

```
 $what = getimagesize($file);
switch(strtolower($what['mime'])){
    case 'image/png' : $src_id = imagecreatefrompng($file); imagesavealpha($src_id,true) ; break;
    case 'image/jpeg': $src_id = imagecreatefromjpeg($file); break;
    case 'image/gif' : $old_id = imagecreatefromgif($file); $src_id = imagecreatetruecolor($what[0],$what[1]); imagecopy($src_id,$old_id,0,0,0,0,$what[0],$what[1]); break; 
    default: die();
}
header('Content-Type: image/jpeg');
imagejpeg($scr_id);
imagedestroy($scr_id);
die(); 
```

浏览器输出带有文本“图像”的空白图像。在 $file 我给出文件 URL。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T15:02:22.423

这对我来说是正确的。

```
<?php // RAY_temp_andrey.php
error_reporting(E_ALL);

$file = 'http://laprbass.com/RAY_EE_images/headshot.png';
$file = 'http://laprbass.com/RAY_EE_images/headshot.jpg';
$file = 'http://laprbass.com/RAY_EE_images/headshot.gif';

$what = getimagesize($file);

switch(strtolower($what['mime']))
{
    case 'image/png':
        $img = imagecreatefrompng($file);
        break;
    case 'image/jpeg':
        $img = imagecreatefromjpeg($file);
        break;
    case 'image/gif':
        $img = imagecreatefromgif($file);
        break;
    default: die();
}
$new = imagecreatetruecolor($what[0],$what[1]);
imagecopy($new,$img,0,0,0,0,$what[0],$what[1]);

header('Content-Type: image/jpeg');
imagejpeg($new);
imagedestroy($new); 
```

# php - 会话不改变？

> ID：14003405
> 
> 赞同：1
> 
> 时间：2012-12-22T13:53:20.043
> 
> 标签：php, html, session, session-variables

我想在每一页的顶部插入以下代码有问题。主要目标是更改语言设置。问题是当我发布表单时，它不会像它应该做的那样改变会话。

```
<?php

session_start();

$basename = basename($_SERVER['SCRIPT_NAME'], ".php"); 
$host = $_SERVER['HTTP_HOST'];
$index_path = $host.'/'.$basename;

if (isset($index_path)){
    //header ('Location:http://www.domain.com/'.$pref_language.'/'.$basename);
}
if (!isset($_SESSION['pref_lang'])){ //looks if this session already exists

    if (isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])){//looks if the browser has set a default language
        $max   = 0.0;
        $languages = explode(",", (strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"])));
        foreach($languages as $language){
            $language = explode(';', $language);
            $q    = (isset($language[1])) ? ((float) $language[1]) : 1.0;
            if ($q > $max){
                $max = $q;
                $pref_language = $language[0];
            }
        }
        $pref_language = trim($pref_language);
    }

    if (!isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])){// in case there is no http_accept_language create it by hand
        $pref_language = "de";  
    }
$_SESSION['pref_lang'] = $pref_language;  //registers the session in case there is no one
$pref_language = $_SESSION['pref_lang'];   //is needed to select the right footer

 }else{   //in case that there is already a session with the saved language

    if  (isset($_REQUEST["fr"])  ) {  //if a new language will be choosen overwrite the old session with the new entry and header to correct path to show the page in the desired language
        $_SESSION['pref_lang'] = 'fr';
        header ('Location: http://www.domain.com/'.$pref_language.'/'.$basename);
    }elseif (isset($_REQUEST["en"])  ) {
        $_SESSION['pref_lang'] = 'en';
        header ('Location: http://www.domain.com/'.$pref_language.'/'.$basename);
    }

    $pref_language = $_SESSION['pref_lang'];  //needed in case that the path is correct to select the right footer version
 }
var_dump($_POST);
var_dump($_SESSION);
echo '<form method="post">      
            <input type="submit" id="en" name="en" value="en"/><div>englisch</div>
        </form>
        <form method="post">  
            <input type="submit" id="fr" name="fr" value="fr"><div>französisch</div>
        </form>';
?> 
```

什么时候

```
print_r ($_SESSION); 
```

在另一个空白页面上，会话将是默认的“de”？

如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:03:47.450

试试这个版本，看看它是否对你有意义。请务必在第一次测试之前删除您的会话 cookie ;-)

```
<?php // RAY_temp_bonny.php
error_reporting(E_ALL);
session_start();

$form = <<<ENDFORM
<form method="post">
Choose Language:
<br/><input type="submit" name="pref_lang" value="de" /><div>german</div>
<br/><input type="submit" name="pref_lang" value="en" /><div>englisch</div>
<br/><input type="submit" name="pref_lang" value="fr" /><div>französisch</div>
</form>
ENDFORM;

// IF SOMETHING IS POSTED TO REQUEST THE LANGUAGE
if (!empty($_POST['pref_lang']))
{
    $_SESSION['pref_lang']  = $_POST['pref_lang'];
    $_SESSION['pref_basis'] = 'POST REQUEST VARS';
}
// IF NOTHING IS POSTED TO REQUEST THE LANGUAGE
else
{
    // IF THE SESSION PREFERENCE IS NOT ALREADY SET
    if (empty($_SESSION['pref_lang']))
    {
        // IF NO PREFERENCE IN THE REQUEST VARS, CHOOSE GERMAN
        if (!isset($_SERVER["HTTP_ACCEPT_LANGUAGE"]))
        {
            $_SESSION['pref_lang']  = "de";
            $_SESSION['pref_basis'] = 'DEFAULT CHOICE';
        }
        // IF THERE IS A CHOICE IN THE ACCEPT_LANGUAGE
        else
        {
            $_SESSION['pref_lang']  = strtolower(substr($_SERVER["HTTP_ACCEPT_LANGUAGE"],0,2));
            $_SESSION['pref_basis'] = 'HTTP_ACCEPT';
        }
    }
    // IF THE SESSION PREFERENCE WAS PREVIOUSLY SET
    else
    {
        $_SESSION['pref_basis'] = 'PREVIOUS SETTING';
    }
}

echo " CHOSEN LANGUAGE IS: " . $_SESSION['pref_lang'];
echo " AND THE REASON IS: "  . $_SESSION['pref_basis'];
echo $form; 
```

如果没有发出特定的语言请求，这将使用默认值（“de”或 HTTP_ACCEPT）。如果客户端请求了语言，它将在会话中保留请求的语言。

# ios - 使用标准化名称搜索多个单词 uisearchbar ios

> ID：14003407
> 
> 赞同：2
> 
> 时间：2012-12-22T13:53:38.810
> 
> 标签：ios, uisearchbar

> **可能重复：**
> [NSPredicate：将 CONTAINS 与 IN 结合](https://stackoverflow.com/questions/13479542/nspredicate-combine-contains-with-in)

我有一个大约 21,000 个项目的核心数据集。为了加快搜索结果，我对所有名称进行了规范化。例如“狮子王辛巴”变成了狮子、国王、辛巴。

如果我搜索 lion、king 或 simba，它肯定要快得多，而且效果很好，但是（直到应用程序发布之前我才意识到这一点）如果我搜索“lion king”，它不会找到该项目.

有没有办法得到一个带有两个词的搜索栏，例如“狮子王”，将其与狮子和国王进行比较并返回结果？

我确实尝试了一些谷歌搜索，但我不确定如何正确地表达这个问题。

任何帮助，将不胜感激！

扎克

# php - PHP 中的其他部分不打印

> ID：14003408
> 
> 赞同：-3
> 
> 时间：2012-12-22T13:54:02.350
> 
> 标签：php, mysql, database, if-statement

我正在尝试使用 IF ELSE 条件在 PHP 中使用 Mysql 执行一个简单的程序

我的代码正在执行 IF 部分但不是 Else

请帮助我，这是我的代码

```
<?PHP

$userInputEntities = htmlentities($userInput);
echo $userInputEntities;

$username = "admin";
$password = "1234565";
$database = "tele";
$server = "localhost";
$db     = new PDO (
    "mysql:host=$server;dbname=$database", 
    "$username", 
    "$password");
$id     = $_REQUEST['cid'];
if ($db) {
    $SQL = $db->prepare("SELECT * FROM user WHERE uid = :id");
    $SQL -> execute(array(':id'=>$id));
    while ($row = $SQL->fetch(PDO::FETCH_ASSOC)) {
        if ($id=="$row[uid]") {
            echo "Welcome";
        } else {
            echo "Sorry You Have not registered with our service";
        }
    }
} 
```

＆我的数据库表是“用户”

```
 uid           name
   1            Manoj
   2            pranay   only two rows i have in table 
```

如果用户输入在表格中可用，那么它应该打印如果部分，如果找不到用户，那么它应该打印其他部分请帮助我，谢谢

此处，当 IF 条件满足时，如果部分正在打印，但在如果条件失败时不打印 else 部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:58:04.503

`while`如果您的查询返回空集（如果数据库中没有用户使用给定的 ），则不会执行整个块`id`。所以放在`else`这个块中是没有意义的：如果`while`输入了body，`$id`将始终等于`$row['uid']`-这是`WHERE`子句中设置的条件，记住。

您需要检查行数，并基于此分支您的代码，将整个`while`块替换为以下内容：

```
$sql = $db->prepare("SELECT * FROM user WHERE uid = :id");
$sql->execute(array(':id'=>$id));
if ($sql->rowCount()) { 
  echo "Welcome";
}
else {
  echo "Sorry, you Have not registered with our service";
} 
```

另一种方法是更改​​查询 ( `SELECT COUNT(*) ...`)，使其返回计数而不是整行，并根据 0 检查其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:01:43.033

看起来像：

```
$_REQUEST['cid'] 
```

解决方法同：

```
"$row[uid]" 
```

对于每个调用，这意味着永远不会满足 else 条件（第一个不等于第二个）。

在这种情况下，当我不确定它们的值是什么或者我想比较它们以查看我的代码是否按预期工作时，我喜欢回显变量的值。这样你就可以清楚地看到两个变量的比较。

# sqlite - 通过视图访问多个表

> ID：14003410
> 
> 赞同：0
> 
> 时间：2012-12-22T13:54:31.943
> 
> 标签：sqlite

我正在尝试将多个表作为单个视图访问，但我的查询中没有匹配任何数据。我相当确定问题出在视图声明中。

```
CREATE VIEW IF NOT EXISTS method_view 
AS SELECT 
 peercreateddata.id,
 peercreateddata.name,
 peercreateddata.shared,
 peercreateddata.authorHash,
 peercreateddata.creationDate,
 peercreateddata.firstSeen,
 peercreateddata.lang,
 methods.primaryMatch,
 methods.methodHash,
 methods.methodbyline,
 methods.methodexpirationDate,
 methods.methodlocation,
 localResources.localmimeType,
 remoteResources.remotemimeType,
 remoteResources.remotelocation 

FROM peercreateddata peercreateddata,
 methods methods,
 localResources localResources,
 remoteResources remoteResources 

WHERE (methods.peerDataId = peercreateddata.id) 
      AND (localResources.localMethodId = methods.id) 
      AND (remoteResources.remoteMethodId = methods.id) ; 
```

查看 WHERE 子句，methods.peerDataId 始终匹配 peercreateddata.id 的单个值。表 localResources 和 remoteResources 有时为空，有时不包含查询的匹配项，有时包含多个匹配项。

我正在为 Android 开发。该语法通过了一个验证器（尽管一些关于使用名为“名称”的字段的抱怨）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:01:49.620

使用内部和外部联接子句。请参阅[文档](http://www.sqlite.org/lang_select.html#fromclause)。

用这个替换你的 from 子句并去掉 where

```
FROM peercreateddata peercreateddata
 inner join methods methods 
       on methods.peerDataId = peercreateddata.id
 left outer join localResources localResources 
       on localResources.localMethodId = methods.id
 left outer join remoteResources remoteResources 
       on  remoteResources.remoteMethodId = methods.id 
```

# php - 如何显示存储在 PHPMyAdmin、数据库中的多个图像以及其他表格列？

> ID：14003416
> 
> 赞同：0
> 
> 时间：2012-12-22T13:54:40.263
> 
> 标签：php, html, database, phpmyadmin

我想显示存储在表格中的图像，在 PHP 数据库中，表格名称是“ **gifts** ”，包含图像的列被命名为“ **pics** ”

（我知道这不是一个好方法，但我需要这样做）

现在当我运行以下代码时：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Untitled Document</title>

</head>

<body>

<?php

$con = mysql_connect("localhost","root","");

if (!$con)

 {

  die('Could not connect: ' . mysql_error());

 }

mysql_select_db("sendemotions", $con);

$result = mysql_query("SELECT * FROM gifts");

echo "<table border='1'>

 <tr>

  <th>Item Picture/th>

 <th>Name Of Item</th>

 <th>Item Type</th>

 <th>Item Price</th>

</tr>";

while($row = mysql_fetch_array($result))

  {

 echo "<tr>";

 echo "<td>" . $row['pics'] . "</td>";

 echo "<td>" . $row['g_name'] . "</td>";

   echo "<td>" . $row['g_price'] . "</td>";

  echo "<td>" . $row['g_type'] . "</td>";

  echo "</tr>";

 }

 echo "</table>";

mysql_close($con);

?> 

</body>

</html> 
```

我得到一个显示的表格，但它在名为图片的列中有奇怪的值： ![这就是输出](../Images/0e038c2db358b255feb91ec38674bc86.png)

请告诉我错误是什么以及如何解决这个问题:(我非常需要这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:56:33.750

我认为您需要第二个 php 脚本来获取图像。然后，此脚本需要发送图像标头以显示图像。示例将类似于：

```
<?php

$id = $_GET['id']; #WARNING INSECURE. FOR DEMO ONLY!!!

connectToDatabase(); #However you do it

$sql = "SELECT pics FROM gifts WHERE ID = $id";

$result = mysql_query($sql) or die(mysql_error());  
$row = mysql_fetch_array($result);

header("Content-type: image/jpeg");
echo $row['pics'];
$db->close();

?> 
```

警告：Abovo 代码非常不安全！！！您需要检查 $_GET['id'] 是否为整数！

然后，在您的原始 php 脚本中，您会将其包含在 imagerow 中。

```
echo '<td><img src="http://yourdomain/imagescript.php?id="' . $row['id'] . '"></td>'; 
```

这段代码不是 testet ......只是给你一个快速的概述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T15:16:33.220

首先，您必须学习 HTML 基础知识。
在 HTML 中，图像通过`<img>`标签显示，给定 URL，指向资源。

接下来，不要将图像存储在数据库中，这对于文件来说是非常不自然的，而是将它们放在目录中。如果您在 id 之后重命名它们，您甚至不需要将路径存储在数据库中 - 只需即时构建它：

```
<img src="/img/gifts/<?=$row['id']?>.jpg"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T14:57:45.363

我想您将图像作为 Blob 存储在数据库中。然后你必须在 php 输出中设置标题内容类型。
检查此链接[显示来自 blob mysql 的图像](https://stackoverflow.com/questions/907361/show-image-from-blob-mysql)

另一种方法是使用`base64_encode`
[base64_encode](http://php.net/manual/es/function.base64-encode.php)
[显示存储在 mysql blob 中的图像](https://stackoverflow.com/questions/5525830/displaying-an-image-stored-in-a-mysql-blob#answer-5525862)

# iphone - 从导航控制器推送时查看未加载 xib 文件

> ID：14003417
> 
> 赞同：0
> 
> 时间：2012-12-22T13:54:43.087
> 
> 标签：iphone, xcode

我已经为此苦苦挣扎了一段时间，在网上筛选了解决方案，但还没有设法到达那里，所以我想是时候问问你们这些了不起的人了。我有一个标签栏应用程序，我在其中尝试使用包含表格视图 ( `TableViewController`) 的导航控制器来根据按下的单元格切换到不同的视图。

当触摸表格视图中的一个单元格时，我`SecondViewController`已加载（这正在工作，因为我通过在`viewDidLoad()`方法中为背景着色来检查）但是界面（`XIB`）没有加载，因此窗口是空白的（或者在我的背景测试的情况下是彩色的）。窗口 ( `SecondViewController`) 应该包含一个`UIScrollerView`在直接访问视图时起作用的。我应该提到，所有视图控制器都包含在一个`XIB`文件中，并且该`XIB`文件包含标签栏控制器和 App Delegate 所需的空白窗口（窗口和`tabBarController`）。

这就是我从`TableViewController.m`( `rootViewController`of `navigationController`)切换视图的方式

```
SecondViewController *viewSecond = [SecondViewController alloc];
self.secondViewController = viewSecond;
[self.navigationController pushViewController:self.secondViewController animated:YES]; 
```

这是`applicationDidFinishLaunchingWithOptions()`在`appDelegate.m`

```
// Set the tab bar controller as the window's root view controller and display.
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
tabBarController.moreNavigationController.navigationBar.hidden = YES;  
return YES; 
```

这实际上是一个旧项目的后续，所以我现在确定为什么`XIB`在模板标签栏应用程序中不需要空白窗口（如果这与问题有关）。我才刚刚开始 iOS 开发，所以如果我在任何地方含糊不清，我深表歉意。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:14:59.840

在你的`TableViewController.m`，你已经错过了`init`你的`SecondViewController`。只是调用`alloc`不会从笔尖加载。

所以
`SecondViewController *viewSecond = [SecondViewController alloc];`
改为
`SecondViewController *viewSecond = [[SecondViewController alloc] init];`
或
`SecondViewController *viewSecond = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];`

# sql - 从两个表中获取行

> ID：14003421
> 
> 赞同：2
> 
> 时间：2012-12-22T13:55:15.053
> 
> 标签：sql

我正在编码会计系统。在这里，我面临如下所述的问题。

我有两个 sql 表，分别记录有关 SALE 和 RECEIPT 的信息。

出售表

```
VoucherType     VoucherNo       CreditParty     CreditAmount
Sales           1               3               5000
Sales           2               5               10000 
```

对于收据表

```
Vouchertype     VoucherNo       Amount          OppVoucherType       OppVoucherNo
Receipt         1               3000            Sales                1 
```

现在您可以看到，收据表包含有关已支付的销售凭证的信息。例如，这里我用销售凭证 1 向 3 号方出售了 5000 金额的货物。为此，3 号方仅向我支付了 3000 的金额和 5000 的销售单。在收据表中，我从一方收到了 3000 的金额3 在第一次收据中。

现在，第 3 方仍然需要给我 2000 的金额，第 5 方仍然需要支付我 10000 的金额，因为第 5 方没有收据。

现在我想要的是从上述数据中显示、销售和剩余金额为每一方支付。

简而言之，我需要各方的数据，仍然需要向我支付剩余金额。

你能帮助我吗？

我尝试了以下查询，但结果出乎意料

```
Select v1.voucherno,v1.creditamount-v2.amount from Sales v1
inner join Receipt v2 on v1.vouchertype=v2.oppvouchertype
inner join Receipt v3 on v1.voucherno=v3.oppvoucherno 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:04:07.717

`LEFT JOIN`像这样使用：

```
Select 
  v1.voucherno,
  v1.creditamount,
  v1.creditamount - IFNULL(v2.totalamount, 0) AS "REMAINING AMOUNT TO PAY"
from Sales v1
LEFT join
(
  SELECT oppvoucherno, OppVoucherType, SUM(amount) totalamount
  FROM Receipt
  GROUP BY voucherno, OppVoucherType
) v2  on v1.vouchertype = v2.oppvouchertype
                     AND v1.voucherno = v2.oppvoucherno; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/21b17/1)

这会给你：

```
| VOUCHERNO | CREDITAMOUNT | REMAINING AMOUNT TO PAY |
------------------------------------------------------
|         1 |         5000 |                    2000 |
|         2 |        10000 |                   10000 | 
```

`LEFT JOIN`将包括`Receipt`表中不匹配的行，即那些没有收据的奇偶校验。然后使用`IFNULL`获取零而不是`NULL`.

假设第二个表有一个新条目，例如：

```
('Receipt', 1, 1000, 'Sales', 1) 
```

然后查询将处理它，它会给你：

```
| VOUCHERNO | CREDITAMOUNT | REMAINING AMOUNT TO PAY |
------------------------------------------------------
|         1 |         5000 |                    1000 |
|         2 |        10000 |                   10000 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:59:02.707

```
Select v1.voucherno,v1.creditamount-v2.amount from Sales v1
inner join Receipt v2 on v1.vouchertype=v2.oppvouchertype and v1.voucherno=v2.oppvoucherno 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T14:33:01.517

希望这可以帮助，

```
select s.VoucherNo as SALESVOUCHERNO,
case  when s.VoucherNo=r.VoucherNo then abs(s.CreditAmount-r.Amount)
else s.CreditAmount   
end
from sale s left outer join receipt r
on s.VoucherNo=r.VoucherNo; 
```

[小提琴演示](http://sqlfiddle.com/#!4/778f0/11)

# c# - 按含义检索 URI 的各个部分

> ID：14003424
> 
> 赞同：0
> 
> 时间：2012-12-22T13:55:33.517
> 
> 标签：c#, .net, vb.net, uri

我正在编写一个自定义 URI 解析器（它扩展[了 GenericUriParser](http://msdn.microsoft.com/en-us/library/system.genericuriparser.aspx)），以允许我的程序处理 unix/linux 样式`smb://`和`nfs://`URI。

为此，我需要重写[GetComponents](http://msdn.microsoft.com/en-us/library/system.uriparser.getcomponents.aspx)方法，该方法负责填写`Uri`对象的各种属性（例如主机、路径、绝对 URI ...）。这就是我卡住的地方。我完全不知道如何按含义“拆分”输入字符串。

有效输入示例（仅限 smb，nfs 更复杂）：

```
smb://hostname/public/example.txt
smb://username:password@hostname/public/example.txt
smb://10.0.0.1/public 
```

我什至从哪里开始解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:46:49.613

我建议你使用`Regex`. 对于有问题的给定 url，正则表达式模式可能是这样的：

```
var pattern = 
    "^smb:\/\/((?<user>[\w-]+):(?<pwd>[\w-]+)@)?(?<host>[a-z0-9\.-]+)(?<path>.+)$"; 
```

您可以将 url 与模式匹配并按名称提取部分。例如

```
var regex = new Regex(pattern);
var match = regex.Match(url);
if(match.Success) {
    // the url is smb
    var username = match.Groups["user"].Value;
    var password = match.Groups["pwd"].Value;
    var hostname = match.Groups["host"].Value;
    var path = match.Groups["path"].Value;
} 
```

对于有问题的给定 url，我们将有以下变量：

```
// smb://hostname/public/example.txt
username: string.Empty
password: string.Empty
hostname: hostname
path: /public/example.txt

// smb://username:password@hostname/public/example.txt
username: username
password: password
hostname: hostname
path: /public/example.txt

// smb://10.0.0.1/public
username: string.Empty
password: string.Empty
hostname: 10.0.0.1
path: /public 
```

给定的模式是一个简单的演示模式。所以，如果你想走这条路，你应该创建复杂、完整和正确的模式来让代码正常工作。如果您有任何疑问或问题，请告诉我。

# android - Android：在开始位置结束无限动画

> ID：14003425
> 
> 赞同：0
> 
> 时间：2012-12-22T13:55:33.410
> 
> 标签：android, animation, user-interface

我在我的 Android 应用程序中使用无限旋转动画。如果我调用`cancelAnimation()`旋转`ImageView`图像，则图像会立即转到动画的开始位置，而不会将动画最终确定到该位置。有没有办法做到这一点，让用户在不中断动画的情况下获得更流畅的体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:59:32.587

你可以放一个标志。当您将标志设置为 false 时，动画将停止。请看下面的代码。

```
public class MainActivity extends Activity {
    ImageView img;
    Button btn, btn2;
    Animation myAnim;   
    boolean flag=true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        img = (ImageView) findViewById(R.id.imageView1);
        btn = (Button) findViewById(R.id.button1);
        btn2 = (Button) findViewById(R.id.button2);

        myAnim = AnimationUtils.loadAnimation(this, R.anim.rotate);

        img.startAnimation(myAnim);

        myAnim.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {
                System.out.println("onAnimationStart()");
            }

            public void onAnimationRepeat(Animation animation) {
                if(flag)
                    System.out.println("onAnimationRepeat()");
                else
                    myAnim.cancel();
            }

            public void onAnimationEnd(Animation animation) {
                System.out.println("onAnimationEnd()");
            }
        });

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                flag=false;
            }
        });

        btn2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                 img.startAnimation(myAnim);
                 flag=true; 
            }
        });
    }

} 
```

# jakarta-ee - antx.tomcat.start 不支持嵌套的“调试”元素

> ID：14003430
> 
> 赞同：1
> 
> 时间：2012-12-22T13:56:01.993
> 
> 标签：jakarta-ee, tomcat6

当我在调试模式下启动 tomcat 时，它给了我上述错误。

```
<macrodef name="tomcat">
    <element name="options" optional="yes" />
    <sequential>
        <delete dir="server/cache" failonerror="no" />
        <delete dir="server/logs" failonerror="no" />
        <delete dir="server/workspace" failonerror="no" />
        <delete dir="server/tomcat/logs" failonerror="no" />
        <antx:tomcat.start>
            <tomcat catalinahome="${catalina.home}" port="${server.port}" />
            <enovia enoviahome="${enovia.server.home}">
                <memory size="medium" />
                <classpath>
                    <pathelement location="${alt.jdk.home}/lib/tools.jar" />
                    <pathelement location="${webapp.home}/WEB-INF/classes" />
                    <pathelement location="${webapp.home}/WEB-INF/lib" />
                    <pathelement location="${catalina.home}/lib/jsp-api.jar" />
                                            <pathelement location="${catalina.home}/lib/servlet-api.jar" />
                </classpath>
                <bootstrap connectstring="${oracle.sid}" driver="${oracle.driver}" password="${schema.password}" user="${schema.user}" />
            </enovia>
            <webapp location="${webapp.home}" />
            <javahome location="${alt.jdk.home}" />
            <options />
        </antx:tomcat.start>
    </sequential>
</macrodef>

<target name="tomcat-start-debug" description="start tomcat in debug mode">
    <tomcat>
        <options>
            <jrebel location="${jrebel.jar}" />
            <debug transport="dt_socket" address="8998" server="y" suspend="n" />
        </options>
    </tomcat>
</target> 
```

我在其他一些项目中具有相同的配置，并且可以正常工作。我正在尝试为此找到解决方案。如果有人知道如何解决这个问题，如果它在这里分享会很有帮助。

谢谢，桑迪普

# php - PL/SQL 不获取任何具有空值的行

> ID：14003431
> 
> 赞同：1
> 
> 时间：2012-12-22T13:56:21.723
> 
> 标签：php, plsql

我正在使用 PL/SQL 连接尝试从虚拟数据库中获取行。但是，它似乎没有选择任何具有空值的行。在命令行上测试相同的 SQL 命令确实有效。

我创建了以下测试表：

```
CREATE TABLE test
( 
  id number(4) primary key,
  test_field VARCHAR(255)
); 
```

并插入以下虚拟数据：

```
INSERT INTO test
(id, test_field) VALUES (1, 'test1');

INSERT INTO test
(id, test_field) VALUES (2, NULL); 
```

当我在命令行 SELECT * FROM test 上执行以下 SQL 命令时；

我收到 2 行数据，如我所料（第 2 行没有 test_field 值）

但是，执行相同的命令槽

```
$conn = oci_connect(..., ..., ...);
if (!$conn) { // error handling }
$stid = oci_parse($conn, 'SELECT * FROM test');
oci_execute($stid);
while (($row = oci_fetch_array($stid, OCI_ASSOC+OCI_RETURN_NULLS))) { 
    var_dump($row);
} 
```

在此期间它没有达到任何东西。

这是抽象的 sql 数据，当我使用更大的数据文件对其进行测试时，它似乎会获取任何没有空列的行（如果需要，我可以发布数据集）。此外，诸如“SELECT 1, null FROM dual”之类的内容确实会返回空值。

几个小时以来，我一直在努力解决这个问题。我希望你们中的任何人都可以给我一些关于出了什么问题的指示。

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:25:22.300

您使用的是什么版本的 php 和 oracle？我试图重现您的问题，但得到了完美的回应：

```
array(2) {
  ["ID"]=>
  string(1) "1"
  ["TEST_FIELD"]=>
  string(5) "test1"
}
array(2) {
  ["ID"]=>
  string(1) "2"
  ["TEST_FIELD"]=>
  NULL
} 
```

如果您根本没有得到任何输出，您确实应该像 Michael 建议的那样打开 error_reporting。

不要添加分号，因为这实际上会给您带来错误，因为这是一条 SQL 语句，而不是 PL/SQL 语句。

这就是 PHP 文档所说的：

> SQL 语句不应以分号 (";") 结尾。PL/SQL 语句应以分号 (";") 结尾。

# javascript - div滑块不起作用

> ID：14003433
> 
> 赞同：0
> 
> 时间：2012-12-22T13:56:34.053
> 
> 标签：javascript, jquery, html, css, slider

我在 StackOverflow 中的几篇文章的帮助下创建了一个 div 滑块，但由于某种原因它无法正常工作。显示 Jquery 上有一些错误，我没有看到。我需要第二双眼睛

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Previous Next</title>
 <style type="text/css">
 .table-container {
    width:456px; /* Total width of visible columns + border widths */
    height:300px;
    border:solid 1px #000;
    background-color:#eee;
    overflow:hidden;
}

.sliding-window {
    width:760px; /* Total width of all columns in sliding-window + border widths */
    height:300px;
    overflow:hidden;
}

.sliding-window div {
    float:left;
    width:150px;
    height:300px;
    background-color:#aaa;
    border:solid 1px #999;
}
​
 </style>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

    $('#next-column').click(function(event) {
        event.preventDefault();
        $('.table-container').animate({scrollLeft:'+=152'}, 'slow');        
    });

    $('#previous-column').click(function(event) {
        event.preventDefault();
        $('.table-container').animate({scrollLeft:'-=152'}, 'slow');        
    });

});​
</script>

</head>

<body>

<a id="previous-column" href="#">Previous</a>
<a id="next-column" href="#">Next</a>
<div class="table-container">
    <div class="sliding-window">
        <div id="col-1">
            <p>This is the content of the first column in the sliding table</p>
        </div>
        <div id="col-2">
            <p>This is the content of the second column in the sliding table</p>
        </div>
        <div id="col-3">
            <p>This is the content of the third column in the sliding table</p>
        </div>
        <div id="col-4">
            <p>This is the content of the fourth column in the sliding table</p>
        </div>
        <div id="col-5">
            <p>This is the content of the fifth column in the sliding table</p>
        </div>
    </div>
</div>
​
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:59:40.217

您可以尝试做一些事情来使其正常工作。

确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

确保在包含 jQuery 之后包含了 datatale 脚本，因为它肯定依赖于它。

检查是否正确包含 jQuery，并且只包含一次。

注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用 jQuery.noConflict() 来避免与页面上使用相同变量 $ 的其他库发生冲突。

# c++ - 32 位数字 C++ 的异常

> ID：14003434
> 
> 赞同：-1
> 
> 时间：2012-12-22T13:56:41.430
> 
> 标签：c++, exception, double

为什么我会得到异常

`Unhandled exception at 0x00000001 in TestingCOA.exe: 0xC0000005: Access violation (parameters: 0x00000008).`

当我尝试使用 4294967295 或更高的数字时。在我的机器上， `sizeof`double`8bytes`应该能够处理和使用`2^64 -1`数字，但它会为 32 位数字生成异常，这是为什么呢？

```
int main()
{
  double n,remainderA;
  int AfterDecimal1[64],RemExponent1;

  cout<< "Enter number\n";
  cin>> n;

  remainderA=a-(int)a;

   HandleFractionNumber(remainderA,AfterDecimal1,RemExponent1);
}

int HandleFractionNumber(double remainder,int (&Goku)[64],int &RemExponent)
{
int x=0;
for(int i=0;;i++)
{
    remainder*=2;
    if(remainder>1)
    {
        remainder-=1;
        Goku[x]=1;
        x++;
    }
    else
        if(remainder<1)
        {
            Goku[x]=0;
            x++;
        }
        if(remainder==1)
        {
            Goku[x]=1;
            break;
        }
        RemExponent=x;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:58:10.127

Double 不能那样工作。它是具有字段和特定格式的结构（称为[IEEE 双精度](http://en.wikipedia.org/wiki/IEEE_floating_point)）。并非所有 64 位都可用于尾数。

然而，它应该在输入时吃掉你提到的数字（4294967295）。你确定这是你放的吗？您引用的程序是 - 全部吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:08:35.420

```
remainderA = a - (int)a; 
```

在 32 位机器上，如果 a > 429496725，这里的结果是未定义的。尝试打印出来`remainderA`，我敢打赌它很大，导致`HFN`缓冲区溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T17:14:09.183

您的数组边界用完了。

x++ 永远完成，直到它大于 64。

在上面的代码中，没有理由让余数也成为一。将 double 与 == 进行比较是不正确的。它仅对整数算术可靠地工作。

# c# - 无法使用 vs 2010 启动 nop.Admin Web 项目

> ID：14003437
> 
> 赞同：1
> 
> 时间：2012-12-22T13:56:51.757
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, nopcommerce

我下载了 nopcommerce v2.65 并遇到了 2 个问题，我设法解决了第一个问题。第一个问题：无法调试项目，解决方法是修改 Nop.Admin.csproj 的 ProjectExtensions 部分，如下所示：

```
<ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>False</UseIIS>
          <AutoAssignPort>True</AutoAssignPort>
          <DevelopmentServerPort>2619</DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          <IISUrl>http://localhost:2451/</IISUrl>
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions> 
```

第二个问题，我找不到解决方案：

当我启动 Nop.Admin 网站时，出现以下错误：

La ressource est introuvable。说明：HTTP 404。La ressource recherchée (ou l'une de ses dépendances) 一个 peut-être été supprimée ou renommée ou bien elle n'est plus disponible temporairement。Vérifiez l'URL ci-après etsurez-vous qu'elle est Correcte。

网址要求：/

这很正常，因为我们必须在 global.asax 文件中定义路由注册，所以我创建了 Gloab.asax 文件，我写道：

```
 public class Global : System.Web.HttpApplication
    {

        protected void Application_Start(object sender, EventArgs e)
        {
            RegisterRoutes(RouteTable.Routes);
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            AreaRegistration.RegisterAllAreas();
            routes.MapRoute(
                "Default",                      // Route name
                "{controller}/{action}/{id}",   // URL with parameters
                new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
            );
        }
    } 
```

-> 现在我在执行中有一个新错误：无法加载全局 asax :(

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T01:33:27.073

Nop.Admin 项目不能自行启动。在 Visual Studio 解决方案资源管理器中，您需要将 Nop.Web 设置为启动项目（右键单击项目名称并选择“设置为启动项目”；然后您可以使用 F5 或 Ctl+F5 启动该站点。

您可以通过以管理员身份登录（使用您提供的凭据在安装过程中创建管理员）并单击标题中的管理链接来访问管理区域。

# entity-framework - 每个类的实体框架类型：C#，访问不是另一个类的导航属性的子类

> ID：14003438
> 
> 赞同：5
> 
> 时间：2012-12-22T13:56:51.120
> 
> 标签：entity-framework

有许多 C# / Entity Framework 示例查询和访问一个类的属性，其中该类是另一个类的属性（不是子类）。

所以这里有一个关于如何使用实体框架从 SQL 服务器查询然后访问作为任何类的导航属性的子类的问题。

我也找不到关于如何查询和访问不是任何类的导航属性的子类的示例。

我只是不明白为什么微软没有这样一个基本的例子。

//问题：如何使用 select 创建一个查询来访问 rssBlog（Blog 的子类）的属性？//问题：如何迭代db（数据库上下文）来获取rssBlog.RssFeed的所有值

以下是来自 Microsoft 的工作示例代码，其中包含插入的问题：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Data.Entity;
    using System.Diagnostics;

    namespace BCodeFirstNewDatabaseSample_TPT
    {
        class Program
        {
    static void Main(string[] args)
    {
        try
        {
            using (var db = new BloggingContext())
            {
                // Create and save a new Blog
                Console.Write("Enter a name for a new Blog: ");
                var name = Console.ReadLine();

                var blog = new Blog { Name = name };
                db.Blogs.Add(blog);

                var rssBlog = new RssEnabledBlog
                {
                    RssFeed = "rssFeed1"
                };
                db.Blogs.Add(rssBlog);
                db.SaveChanges();

                // Display all Blogs from the database
                var query = from b in db.Blogs
                            orderby b.Name
                            select b; 
```

//每个类的实体框架类型：访问不是另一个类的导航属性的子子类 //问题：如何创建查询以使用 select 访问 rssBlog（博客的子类）的属性？

//问题：如何迭代db.Blogs来获取rssBlog.RssFeed的所有值

```
 Console.WriteLine("All blogs in the database:");
                foreach (var item in query)
                { 
```

// 这里只展示如何访问博客，RssEnabledBlog 的父级。//我也想访问 rssBlog.RssFeed。如何？

```
 Console.WriteLine(item.Name);
                }

                Console.WriteLine("Press any key to exit...");
                Console.ReadKey();
            }
        }
        catch (Exception e)
        {
            Console.Write("exception {0}",e.Message);
        }
    }
}//program

public class Blog
{
    public int BlogId { get; set; }
    public string Name { get; set; }
    public DateTime? Datetime { get; set; }// make DataTime nullable to avoid exception?

    public virtual List<Post> Posts { get; set; }
}
public class RssEnabledBlog : Blog
{
    public string RssFeed { get; set; }
}

public class Post
{
    public int PostId { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }

    public int BlogId { get; set; }
    public virtual Blog Blog { get; set; }
}

public class BloggingContext : DbContext
{
    public DbSet<Blog> Blogs { get; set; }
    public DbSet<Post> Posts { get; set; }
    public BloggingContext()
    {//Data Source=.\SQLEXPRESS;Initial Catalog=BCodeFirstNewDatabaseSample_TPT.BloggingContext;Integrated Security=True;MultipleActiveResultSets=True;

        Debug.Write(Database.Connection.ConnectionString);
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {// Thismapping creates Blog and RssEnabledBlog tables
        modelBuilder.Entity<Blog>()
                  .Map(m => m.ToTable("Blogs"));
        //base.OnModelCreating(modelBuilder);
    }
} 
```

}

此代码有效。这是 SSMS 屏幕快照：（我是新用户……我还不能发布图片）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T19:40:47.447

关键是你能做到

```
from reb in db.Blogs.OfType<RssEnabledBlog>() 
```

`OfType`是获取基类的子类型的方法。

然后你可以继续，例如

```
orderby reb.Name
select new { reb.Name, reb.RssFeed } 
```

# android - Android 支持库 v4 和 Google Maps API 中断编译

> ID：14003443
> 
> 赞同：3
> 
> 时间：2012-12-22T13:57:42.347
> 
> 标签：android, eclipse, google-maps-api-2, android-support-library

我正在尝试在针对 v10 API 的 android 项目中使用 Google Maps API v2。阅读开发指南据说，由于 Fragments 仅在 android api 11 中引入，我需要使用 Android Support Library 来使用 API。

所以我做了以下事情：
- 将 android 支持库 v4 jar 包含到我的项目
中 - 包含“google-play-services-lib”库项目并引用它
- 编写了以下代码，取自开发指南：

```
package com.darco.darcoapp;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;

public class CardJourneyActivity extends FragmentActivity{
    private GoogleMap myGoogleMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_card_journey);

        FragmentManager fm = getSupportFragmentManager();
        Fragment fr = fm.findFragmentById(R.id.mapFragmentCardJourney);
        MapFragment mf = (MapFragment)fr; //this line causes the compilation error

    } 
```

正如注释所指出的，问题出现在代码的最后一行。当我添加 Eclipse 中出现以下错误时（不在该行，但在文件顶部）：

```
The type android.app.Fragment cannot be resolved. It is indirectly referenced from required .class files 
```

并且 Eclipse 拒绝编译该项目。

我已经尝试了在项目设置中我能想到的所有可能的配置，但也许有些东西让我无法理解......我做错了什么？我在网上发现了一些有类似问题但没有解决方案，或者至少他们提出的解决方案对我没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T14:08:55.990

当您使用 Android 支持包的片段反向移植时，请使用`SupportMapFragment`，而不是。`MapFragment`

# wpf - 为什么 Width="*" 不适用于位于 RowDetailsTemplate 中的 DataGrid 中的列

> ID：14003449
> 
> 赞同：15
> 
> 时间：2012-12-22T13:58:18.790
> 
> 标签：wpf, datagrid, rowdetailstemplate

如果我使用“*”设置 DataGrid（位于 RowDetailesTemplate 中）列的宽度 - 列缩放不起作用

```
<DataGrid>
...
<DataGrid.RowDetailsTemplate>
   <DataTemplate>
      <DataGrid Margin="10" Height="100">
         <DataGrid.Columns>
            <DataGridTextColumn Header="header A" Width="3*" />
            <DataGridTextColumn Header="header B" Width="2*" />
            <DataGridTextColumn Header="header C" Width="*" />
         </DataGrid.Columns>
      </DataGrid>
    </DataTemplate>
</DataGrid.RowDetailsTemplate>
</DataGrid> 
```

![在此处输入图像描述](../Images/39ca026c5ca9e88e96df5bcb1555e902.png)

但是如果我用 Grid 替换 DataGrid 并使用“*”缩放设置它的列宽

```
<Grid Margin="5" Height="100">
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="3*"></ColumnDefinition>
      <ColumnDefinition Width="2*"></ColumnDefinition>
      <ColumnDefinition Width="*"></ColumnDefinition>
   </Grid.ColumnDefinitions>

   <TextBlock Text="header A" Background="LightGray" TextAlignment="Center" HorizontalAlignment="Stretch"></TextBlock>
   <TextBlock Text="header B" Grid.Column="1" TextAlignment="Center" HorizontalAlignment="Stretch"></TextBlock>
   <TextBlock Text="header C" Grid.Column="2" Background="LightGray" TextAlignment="Center" HorizontalAlignment="Stretch"></TextBlock>
</Grid> 
```

![在此处输入图像描述](../Images/4695bb08ff326b2188d1a2b91879ab93.png)

如何修复 DataGrid 缩放？

**解决方案：**

```
<DataGrid HorizontalScrollBarVisibility="Disabled">
...
<DataGrid.RowDetailsTemplate>
...
</DataGrid.RowDetailsTemplate>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T11:07:04.783

这只是基于这个[问题](https://stackoverflow.com/questions/11956023/how-to-make-the-last-datagrids-column-occupy-the-whole-left-space)的猜测。

设置`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`。

# mysql - Rails：数据库种子

> ID：14003451
> 
> 赞同：0
> 
> 时间：2012-12-22T13:58:23.437
> 
> 标签：mysql, ruby-on-rails, ruby, seed

我有一个 Rails 应用程序，其中数据库中有很多数据。我开始意识到在 heroku 上只支持 PostgreSQL。现在我的数据库是 MySQL。有什么方法可以让 Rails 将数据库中的所有数据复制到种子文件中，而无需手动输入所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:04:59.127

没有 Rails 没有能力做到这一点。

您可以查看[mysqltopostgres](https://github.com/maxlapshin/mysql2postgres) gem。此博客条目很好地涵盖了用法。[http://onestoryeveryday.com/mysql-to-postgresql-conversionmigration.html](http://onestoryeveryday.com/mysql-to-postgresql-conversionmigration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:34:42.630

[Heroku 通过ClearDB 插件](https://addons.heroku.com/cleardb)支持 MySQL 。

# macos - 基于视图的 NSTableView 中的 NSPopupButton

> ID：14003452
> 
> 赞同：3
> 
> 时间：2012-12-22T13:58:31.440
> 
> 标签：macos, cocoa, core-data, nstableview, nspopupbutton

我正在使用核心数据和最新的 XCode。我有一个基于视图的表，`NSPopupButtons`其中一个列。该表有一个数组控制器，它从实体 A 获取其数据。实体 B 有另一个数组控制器。正是这个实体 B 应该填充弹出按钮项。

一个`NSPopupButton`表可以被填满没有问题，所以这一定是一个与表有关的问题！

我应该如何填写表格中列中的弹出按钮？

![表格的一部分，带有弹出按钮。](../Images/4f9b2c7dad8deaf3de76938b01a67c95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:30:45.680

您可以执行以下操作：

1.  将表格视图的行高增加到 22px 或更大。
2.  绑定到`objectValue.menuValues`（显然是你添加到你的东西`objectValue`）。
3.  `NSPopupButton`应该作为 的子视图放置`NSTableCellView`。

这样，只要您`objectValue`有一个能够填充 a`NSPopupButton`的菜单的绑定，您就不需要直接访问它。从这里您还可以将`selector`出口设置为您的委托/视图控制器的类，并使用一些漂亮`superview`的挖掘来找到`NSTableCellView`它，然后从那里操作。

我知道这很复杂，但它几乎是零代码。曾几何时，我曾经看不起IB太“n00b”，但Bindings让它成为了一个相当强大的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T14:59:38.033

我当然找到了基于单元的 NSPopupButtonCell 工作。您应该能够使用基于视图的表来实现相同的目标。当您直接绑定到视图中的对象时，绑定完全不同。因此，将弹出窗口的内容直接绑定到数据源。在 IB 中为实体 B 创建一个 ArrayController 并将其直接绑定到 Popups Content，还将 contentValue 绑定到要显示的实体 B 的字段。

然后将弹出窗口的列内容绑定到实体 A，现在将弹出窗口的值绑定到表格单元格视图 objectValue.（实体 A 字段名称）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T18:25:16.173

需要通过 Files' Owner 传递控制器，而不是直接绑定到弹出按钮。（有人说，这是 Xcode 中的一个错误..）

因此，我的解决方案在文件所有者中使用了一个 IBOutlet (currencyCtrl)，它绑定到数组控制器（在您的情况下是实体 B）。对于 NSPopupButton，您应该使用以下绑定：

[![在此处输入图像描述](../Images/7f3bef199db6dc082ec52dda5a1ce451.png)](https://i.stack.imgur.com/2hrqH.png)

# multithreading - JavaFX 任务、服务 - 异常

> ID：14003460
> 
> 赞同：0
> 
> 时间：2012-12-22T13:59:24.967
> 
> 标签：multithreading, background, javafx

我不知道为什么，但我在 JavaFX 应用程序上遇到了这样的异常。

不在 FX 应用程序线程上；currentThread = Thread-5

在另一个任务中，即服务中，我正在尝试加载文件或连接到数据库。这些是耗时的操作，所以我想在后台执行它们，但我不能......该任务在按下按钮后启动。

我读到，当您尝试在另一个主题任务中更新 gui 时，您会得到它，但我在这里不这样做。

```
try{
            webEngine.load("http://www.analiza.host-ed.me/wynik.html");
                    }catch(Exception e){
                System.out.println("Blad: "+e); //I get the exception from there
            } 
```

我也试过： webEngine.load(getClass().getResource("wynik.html").toExternalForm()); 得到了同样的结果

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T22:03:27.547

`webEngine.load`将调用包装在[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)中。

请参阅[JavaFX 中的并发以](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)详细了解如何执行此操作以及为什么需要这样做。

# ruby-on-rails - 在控制器中定义更多参数

> ID：14003465
> 
> 赞同：0
> 
> 时间：2012-12-22T14:00:29.540
> 
> 标签：ruby-on-rails

Ruby on rails 在控制器中定义了 7 个参数，

如果我想要更多参数，我可以向控制器添加变量，还是应该创建一个新控制器？

如果我必须创建另一个控制器，我尝试通过以下方式定义它：

**创建了控制器/taskseachperson_controller.rb，其中包含：**

```
class TaskseachpersonController < ApplicationController

def index

    end
end 
```

**helpers/taskseachperson.rb 包含：**

```
module TaskseachpersonHelper
end 
```

**views/taskseachperson/index.html.erb 包含：**

```
<h1>Listing tasks</h1>

<table>
   <tr>
      <th>Name</th>
      <th>num of tasks</th>
      <th>num tasks left</th>
   </tr>
<% end %>
</table> 
```

**config/locales/routes.rb 文件包含：**

```
Todo::Application.routes.draw do
    resources :tasks
    root to: "tasks#index"

    resources :taskseachperson
    root to: "taskseachperson#index"
end 
```

但是，当我尝试连接到：localhost:3000/taskseachperson

我收到了这个错误：

```
NoMethodError in TaskseachpersonController#index

undefined method `key?' for nil:NilClass
Rails.root: /home/alon/projects/todo

Application Trace | Framework Trace | Full Trace
Request

Parameters:

None
Show session dump

Show env dump

Response

Headers:

None 
```

如果我必须创建另一个控制器，我的问题是什么？

**更新：**

**我有一个文件：models/person.rb：**

```
class Task < ActiveRecord::Base
    attr_accessible :done, :name, :task
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:51:19.113

我很确定其中一些文件实际上并不包含您声称的内容（例如`person.rb`包含`class Task`或包含 a 的路由文件`root to:`）。但这似乎是：

一个人`has_many :tasks`。

一个任务`belongs_to :person`。

两者都是作为脚手架生成的`Person`，`Task`因此它们工作正常。现在，您想要列出属于某个人的任务，并且您不确定它是否应该由`PersonsController`或来处理`TasksController`，因此您只是继续为此创建了一个新控制器。

这似乎是嵌套路由的情况：

```
resources :persons do
  resources :tasks
end 
```

然后，您可以访问`/persons/4/tasks`以查看属于某个人的任务。

至于为什么您的代码不起作用，您实际上并没有发布跟踪，甚至没有发布行号，因此从这里很难诊断。

# c++ - 如何使用头文件 fcntl.h 和 unistd.h 读取和写入文件？

> ID：14003466
> 
> 赞同：3
> 
> 时间：2012-12-22T14:00:42.237
> 
> 标签：c++, c, file-io, fcntl

我正在尝试学习如何使用头文件`<fcntl.h>`和`<unistd.h>`. 我创建了一个小例子来测试他们程序的工作原理，但它没有按预期工作。这是我的代码：

```
#include <fcntl.h>
#include <unistd.h>

int main() {
  int in=open( "test.in", O_RDONLY, S_IREAD );
  int *a=new int[ 10 ];
  read( in, a, 10 );
  int out=open( "test.out", O_WRONLY, S_IWRITE );
  write( out, a, 10 );
  close( in ); close( out );
  return 0;
} 
```

输入文件是：`1 2 3 4 5 6 7 8 9 10`

该程序正常编译，但没有创建任何输出文件。谁能告诉我我的代码有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:27:23.287

分而治之。

写作部分：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdio.h>

int main() {
  int const a[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
  int const out { open( "testnums.out", 
          O_WRONLY | O_CREAT, S_IWRITE | S_IREAD) };
  if(out==-1) {
    perror("Cannot open file");
    return 1;
  }
  ssize_t const written { write( out, a, sizeof(a) ) };
  if(written<0) {
    perror("Write error");
  }
  close( out );

  return 0;
} 
```

编译并执行时：

```
$ g++ -std=c++0x -Wall -Wextra tout.cc
$ ./a.out 
```

它写出'a'数组：

```
$ hexdump testnums.out 
0000000 0001 0000 0002 0000 0003 0000 0004 0000
0000010 0005 0000 0006 0000 0007 0000 0008 0000
0000020 0009 0000 000a 0000                    
0000028 
```

请注意，这不是可移植的——每个编译器/体系结构在这里可能有一些不同的输出。

这是再次读入并将其写入标准输出的部分：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>

int main() {

  int const in { open( "testnums.out", O_RDONLY ) };

  if(in==-1) {
    perror("Cannot open file");
    return 1;
  }

  int a[10];
  ssize_t const r { read( in, a, sizeof(a) ) };
  if(r!=sizeof(a)) {
    fprintf(stderr, "Could not read complete array.");
    return 1;
  }
  if(r<0) {
     perror("Read error");
     close(in);
     return 1;
  }
  close(in);

  for(unsigned int i(0); i<sizeof(a)/sizeof(int); ++i) {
    printf("%d ", a[i]);
  }
  printf("\n");

  return 0;
 } 
```

编译并执行：

```
$ g++ -std=c++0x -Wall -Wextra tin.cc
$ ./a.out
1 2 3 4 5 6 7 8 9 10 
```

一般：在你的代码中有很多小问题（比如：检查返回值完全缺失，没有包括所有需要的头文件，写入错误的字节数，......）你可能想阅读不同的人像这样的页面

```
$ man 2 open
$ man 2 read
$ man 2 write
$ man 2 close 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:06:52.867

您用于打开第二个文件的标志，`O_WRONLY`不会创建输出文件是这个不存在，您可能想尝试其他标志，如`O_CREATE`or `O_APPEND`。这个[链接](http://linux.die.net/man/3/open)应该对你有用，因为你可能想使用几个标志来处理文件的创建和行为，同时在其中写入！祝你好运=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T14:05:27.383

来自[公开组](http://pubs.opengroup.org/onlinepubs/000095399/functions/open.html)

```
#include <fcntl.h>
...
int fd;
mode_t mode = S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH;
char *filename = "/tmp/file";
...
fd = open(filename, O_WRONLY | O_CREAT | O_TRUNC, mode);
... 
```

只需与您的代码进行比较。

# actionscript-3 - AS3 Sound.Play(starttime) 奇怪的延迟

> ID：14003469
> 
> 赞同：1
> 
> 时间：2012-12-22T14:01:07.050
> 
> 标签：actionscript-3, audio, mp3

向 Sound.play 发送有效的开始时间时，我会听到 mp3 文件的开头约 500 毫秒，然后它才从给定的开始时间开始播放。

有人有这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:20:33.977

我认为这实际上是 flash 的一个奇怪问题。

有时确保采样率为 44.1kHz 会有所帮助。

否则试试这个：[http](http://code.google.com/p/standingwave/) ://code.google.com/p/standingwave/它将声音文件放在缓存中，应该停止这个问题。

# c++ - 用太多的指针来混淆自己

> ID：14003470
> 
> 赞同：-1
> 
> 时间：2012-12-22T14:01:10.870
> 
> 标签：c++

> **可能重复：**
> [C++：将指针变量传递给函数](https://stackoverflow.com/questions/6711041/c-passing-pointer-variable-to-function)

这是一个简化的代码片段，我认为它显示了手头的问题：

```
std::wstring *Variable3 = &SomeWStringObject;

int _tmain(int argc, _TCHAR* argv[])
{
    std::wstring *Variable1 = NULL;
    func(Variable1);
}

void func(std::wstring *Variable2)
{
    Variable2 = Variable3;
} 
```

现在，实际上，`func`是一个类`Variable3`的成员，也是同一个类的成员。对于这个更简单的示例，我们假设它`Variable3`是某种全局变量。

`Variable3`是指向`std::wstring`对象的（全局变量）指针。我可以在调试器中看到它指向正确的字符串。

我想要结束的是`Variable1`指向相同的 std::wstring 对象作为`Variable3`.

所以我尝试将指针的地址传递给`Variable1`函数，然后我希望将地址`Variable3`指向设置为`Variable1`.

但这行不通。好像设置OK了，但是当程序离开的时候`func`，Variable1还是一个空指针。

我试图尽可能清楚。我希望这已经足够了。不幸的是，我不能为此使用 func 的返回值，因为我实际上还有另外两个`std::wstringstream`对象可以做同样的事情。由于所有人都有相同的问题，我将其简化为一个`std::wstring`对象。我尝试了许多其他不同的`&`and组合`*`，但没有一个奏效。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:02:55.973

通过引用传递指针：

```
void func(std::wstring *& Variable2) 
```

尽管按照其他答案的建议，有更好的方法来完成您正在做的事情。在这种情况下使用指针是非常多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:13:02.717

我将跳过中间步骤。在 C++ 中，你会这样做：

```
std::string mystring;

std::string func() {
    return mystring;
}

int main() {
    std::string variable1 = func();
} 
```

几点说明：

*   失去指针。他们在这里没有帮助，他们只是增加了复杂性。
*   要修改参数，请通过引用传递它（但我没有这样做）。
*   不要修改参数。而是返回值。
*   [不要使用`std::wstring`except 与 WinAPI 交互。](http://utf8everywhere.org/)
*   ***如果***您需要共享对相同底层字符串的引用，因为您想通过变量 in 透明地修改它`main`（并且只有这样！），请返回引用而不是副本：

    ```
    std::string& func() {
        return mystring;
    } 
    ```

    ......但这可能是一个坏主意：如果`func`确实是一个成员函数，它通常不应该将内部可修改状态暴露给外部世界，这违反了良好代码设计的几条规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T14:07:31.973

目前，您正在将`Variable1`（即空指针值）的值复制到其中`func`，然后您正在修改该副本。所以`Variable1`外在`func`没有改变。对于有一点指针倾向的人来说，直接的解决方案是添加另一个级别的间接性。*将指针*传递给您`Variable1`，然后通过它进行修改。像这样：

```
func(&Variable1);

void func(std::wstring** Variable2)
{
  *Variable2 = Variable3;
} 
```

然而，这不是很好的风格。C++ 具有引用类型，允许您将对象传递给函数而不复制它，因此函数*内部的对象与**外部*的对象相同。我们可以这样使用它：

```
func(Variable1);

void func(std::wstring*& Variable2)
{
  Variable2 = Variable3;
} 
```

`Variable2`是对指针的引用（用 表示`&`）。这意味着当您传递 时`Variable1`，它不会被复制，而是`Variable2`指的是完全相同的指针。修改`Variable2`也会修改`Variable1`。

你应该问自己的下一个问题是“我`std::wstring`首先需要一个指向的指针吗？” 我不能为你回答这个问题，但答案通常是否定的。

然后 neeext 的问题是为什么要通过参数传递输出。这是一件非常C-ish的事情（但即使他们在这种情况下也不会这样做）。这就是我们有返回值的原因。理想情况下，您的代码应如下所示：

```
std::wstring Variable3 = SomeWStringObject;

int _tmain(int argc, _TCHAR* argv[])
{
  std::wstring Variable1 = func();
}

std::wstring func()
{
  return Variable3;
} 
```

或者您可能希望返回对 的引用`Variable3`，在这种情况下您的`func`返回类型应该是`std::wstring&`。

# c - 使用 scanf 设置宏

> ID：14003472
> 
> 赞同：0
> 
> 时间：2012-12-22T14:01:18.593
> 
> 标签：c, macros

是否可以使用`scanf`来为名为`SIZE`( ) 的宏替换赋值，但不保存另一个变量`#define SIZE`中附带的值？`scanf`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:03:07.303

宏在预编译时由预编译器`scanf`评估，由编译器评估。编译器不理解宏。所以不行。

# windows - 具有多个实例的 Node.js Azure WorkerRole 不能使用相同的端口？

> ID：14003481
> 
> 赞同：1
> 
> 时间：2012-12-22T14:02:43.383
> 
> 标签：windows, node.js, azure, port

我正在我的 Azure 模拟器上尝试 Node.js 应用程序。我有一个工人角色，有 3 个实例。

一旦我在模拟器中启动应用程序，只有一个实例正常工作，而其他实例由于端口地址不可用而崩溃。

这是模拟器的问题吗？因为，任何应用程序的多个实例都没有意义，因为所有应用程序都会使用端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:59:39.190

如果您需要摆脱此问题，**请将实例数设置为 1**并进行本地开发。在部署项目时将其更改回 3 个实例。在云环境中它工作正常（负载均衡器负责此）。

**解决方案 1**

将实例计数更改为 1，如下所示。

![在此处输入图像描述](../Images/f0563f50d741c3dc62f3ffb360cd4fd0.png)

**解决方案2：**

Auzre SDK 1.4 存在此问题。

如果您可以安装比该版本更高的版本，它将毫无问题地工作。（自 Auzre SDK 1.5 起）

使用 Windows Azure SDK 1.5 或更高版本（现在是 2012 年 10 月）在计算模拟器中测试应用程序**更接近真实的云平台**。

在最新版本中，您的角色部署的多个实例被分配了不同的 IP 地址，同时尝试维护服务定义中指定的端口。

您可以从[**Avkash Chauhan 的博客中获得更多详细信息**](http://blogs.msdn.com/b/avkashchauhan/archive/2011/09/16/whats-new-in-windows-azure-sdk-1-5-each-instance-in-any-role-gets-its-own-ip-address-to-match-compute-emulator-close-the-cloud-environment.aspx)

我希望这对你有帮助。

# frameworks - 将 Kohana 从 3.0.7 升级到 3.0.8 错误

> ID：14003486
> 
> 赞同：0
> 
> 时间：2012-12-22T14:03:08.657
> 
> 标签：frameworks, kohana, upgrade

我从 3.0.7 更新了我的 Kohana do 3.0.8，我得到了这个： ![在此处输入图像描述](../Images/9cc05461eb9a72e5d75042c7bf4aca00.png)

我的功能是：

```
public function unique_key_exists($value)
{
    return (bool) DB::select(array('COUNT("*")', 'total_count'))
                    ->from($this->_table_name)
                    ->where($this->unique_key($value), '=', $value)
                    ->execute($this->_db)
                    ->get('total_count');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:10:27.233

重新定义函数的签名，如下所示：

```
public function unique_key_exists($value, $field = NULL) 
```

看，如果在父类中这个函数是用这个签名定义的，你必须在子类中遵循它 - 或者面对 E_STRICT 警告。

# c - C 中舍入，小数点后 N 位

> ID：14003487
> 
> 赞同：4
> 
> 时间：2012-12-22T14:03:10.143
> 
> 标签：c, math, rounding

> **可能重复：**
> [将数字四舍五入到 C 中的 2 个小数位](https://stackoverflow.com/questions/1343890/rounding-number-to-2-decimal-places-in-c)

我还没有在 c 中找到带有`double round(double d, int digits)`像[这里这样的签名的函数。](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)当我尝试构建时出现错误：

> 错误：函数“round”的参数太多

如何在 C 中舍入小数点后 N 位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:15:03.817

使用递归（对于某些数字值会很慢）

```
#include <math.h>
double my_round(double x, unsigned int digits) {
  if (digits > 0) {
    return my_round(x*10.0, digits-1)/10.0;
  }
  else {
    return round(x);
  }
} 
```

一种可能更快的方法，但它依赖于对慢速`pow`函数的一次调用：

```
#include <math.h>

double my_round(double x, unsigned int digits) {
    double fac = pow(10, digits);
    return round(x*fac)/fac;
} 
```

一种更快的方法是预先计算具有可能幂的查找表并使用它来代替`pow`.

```
#include <math.h>

double fac[];  // population of this is left as an exercise for the reader

double my_round(double x, unsigned int digits) {
    return round(x*fac[digits])/fac[digits];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:15:35.060

虽然“已回答”给出了一个不错的答案，但这里有一个适用于任意大数字的答案：

```
double round1(double num, int N) {
      ASSERT(N > 0);
      double p10 = pow(10,N);
      return round(num* p10) / p10;
} 
```

当然，如前所述，浮点数没有固定的十进制位数，例如，如果您调用，则不能保证将其打印为 3.70000 `printf("%8.5f", round1(3.7519, 1));`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T14:10:08.197

这是一个（非常）简单的功能，

```
double round1(double num, int N) {
      int temp=(int) num*pow(10,N); 
      double roundedN= temp/pow(10,N);
      return roundedN;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T14:14:28.443

在 C 标准中，不存在这样的功能。不管怎样，你可以自己写。

```
#include <math.h>

/* Round `n` with `c` digits after decimal point. */

double nround (double n, unsigned int c)
{
    double marge = pow (10, c);
    double up    = n * marge;
    double ret   = round (up) / marge;

    return ret;
} 
```

另请参阅上面关于浮点“小数点”的评论。

# c++ - allocate_shared 与额外的字节缓冲区

> ID：14003489
> 
> 赞同：1
> 
> 时间：2012-12-22T14:03:20.743
> 
> 标签：c++, boost, shared-ptr

任务：shared_ptr，T=buffer，其中buffer有动态字节数（uint8_t[]结尾）；

allocate_shared 是否保证将保留此订单：[shared_ptr data][object][additional butebuffer]

因为其他方式不起作用，例如：[object][shared_ptr data][additional butebuffer]

其他实现思路？

```
template <class T>
class addon_allocator : public boost::noncopyable
{
public : 
    typedef T value_type;
    typedef value_type* pointer;
    typedef const value_type* const_pointer;
    typedef value_type& reference;
    typedef const value_type& const_reference;
    typedef std::size_t size_type;
    typedef std::ptrdiff_t difference_type;

public : 
    template<typename U> struct rebind
    {
        typedef addon_allocator<U> other;
    };

public : 
    explicit addon_allocator( std::size_t size )
        :m_size( size )
    {
    }

    ~addon_allocator()
    {
    }

    addon_allocator(const addon_allocator<T>& other)
        :m_size(other.m_size)
    {
    }

    template <class U>
    explicit addon_allocator(const addon_allocator<U>& other)
        :m_size(other.get_addon_size())
    {
    }

    pointer address(reference r)
    {
        return &r;
    }
    const_pointer address(const_reference r)
    {
        return &r;
    }

    pointer allocate(size_type cnt, typename std::allocator<void>::const_pointer = 0)
    {
        assert( cnt == 1 );
        return reinterpret_cast<pointer>(
            ::operator new(sizeof(T) + m_size)
            );
    }
    void deallocate(pointer p, size_type)
    {
        ::operator delete(p);
    }

    std::size_t get_addon_size() const
    {
        return m_size;
    }
private:
    const std::size_t m_size;
};

class buffer : public boost::noncopyable
{
public:
    buffer( std::size_t size )
        :m_size(size)
    {
    }
    const std::size_t m_size;
    uint8_t m_data[];
    static boost::shared_ptr<buffer> create(std::size_t size)
    {
        boost::allocate_shared<buffer>(
            addon_allocator<buffer>(size),
            size
            );
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T15:20:28.197

您的代码也将与`std::allocate_shared`libstdc++ 中的实现一起使用，但我认为不能保证内存布局会这样。

由于您已经有一个用于创建的特定函数，因此手动进行内存分配而不是使用自定义分配器`shared_ptr`会更便携：`allocate_shared`

```
class buffer : public boost::noncopyable
{
public:
    buffer( std::size_t size ) throw()
        :m_size(size)
    {
    }
    const std::size_t m_size;
    uint8_t m_data[];
    static boost::shared_ptr<buffer> create(std::size_t size)
    {
        void* addr = ::operator new(sizeof(buffer) + size);
        return boost::shared_ptr<buffer>(::new(addr) buffer(size));
    }
}; 
```

这样就不需要分配器类型，需要维护的代码更少，并且代码都在一个地方。这确实失去了`allocate_shared`仅进行单个分配的优势（并保持 shared_ptr ref 计数与对象相邻的元数据），但它保证可以在任何实现上工作......这取决于你是否值得权衡。

这段代码依赖于`buffer`构造函数是不抛出的，如果它可以抛出`create`函数，则需要捕获异常，释放内存并重新抛出。

我还会考虑将构造函数设为私有，这样`buffer`对象只能由`create`函数创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T23:41:14.277

最后我决定使用：

*   **boost::intrusive_ptr**与 T = 缓冲区
*   **boost::atomic**与 T = std::size_t 用于引用计数（不是 boost 的一部分，单独的库）

便携单分配。

# javascript - 如何在 AngularJS 中触发一些 javascript 函数？

> ID：14003492
> 
> 赞同：0
> 
> 时间：2012-12-22T14:03:29.297
> 
> 标签：javascript, angularjs

我刚刚开始了我的第一个 angular.js 项目，并且遇到这样一种情况，用户单击一个按钮，该按钮在我的模型上设置了一个值，但我现在还需要 html 视频元素将其 currentTime 属性设置为一个值，并且当前正在播放的视频暂停。

所以我需要的是

1）更新我的模型（我已经通过 ng-click 完成了）

2）运行一些javascript

```
{
    $('videoElement')[0].currentTime = time (from my model);
     $('videoElement')[0].pause();
} 
```

我不确定应该从哪里触发第二步以及如何触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:16:34.930

您应该使用指令来进行 DOM 操作。希望您的 videoElement 与您的按钮在同一范围内。如果是这样，定义一个 $watch()es 你的模型的指令：

```
angular.module('myModule', [])
.directive('pauseVideo', function() {
   return {
      scope: { someProperty: '@pauseVideo' },
      link: function(scope, element, attrs) {
        scope.$watch('someProperty', function(value) {
          var videoElement = $('videoElement')[0];
          videoElement.currentTime = time(value);
          videoElement.pause();
        })
      }
   }
}) 
```

将 scope 属性添加到使用 videoElement 的 HTML 元素。例如，如果您使用 ng-click 操作的属性是 $scope.someProperty：

```
<div id="videoElement" pause-video="someProperty"> 
```

* * *

如果 videoElement 与按钮不在同一范围内，您可以将代码放在您的控制器上，知道这违反了“Angular 方式”，但对您的工作感到满意：:)

```
<a ng-click="pauseVideo()">pause video</a> 
```

在您的控制器中：

```
$scope.pauseVideo = function() {
    $scope.someProperty = ...;
    var videoElement = $('videoElement')[0];
    videoElement.currentTime = time (from my model);
    videoElement.pause();
} 
```

# objective-c - iOS 中的预期标识符或 '('

> ID：14003494
> 
> 赞同：2
> 
> 时间：2012-12-22T14:03:50.650
> 
> 标签：objective-c, ios

我正在尝试遵循 Apple 的 iOS 核心数据教程，但无法克服此错误。

我试图通过阅读这里的所有问题来解决这个问题，但一无所获 -

有任何想法吗？

```
#import <UIKit/UIKit.h>

UINavigationController *navigationController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) UINavigationController *navigationController;
 // expected identifier or '(' on the line above

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T18:40:48.050

更好的解决方案 - 更改您的文本首选项以将 ctrl-return 绑定到实际的换行符。

我写了[一篇带有截图的博客文章](http://www.friday.com/bbum/2012/12/23/xcode-sometimes-a-return-is-not-a-return-emacs-brain-damage/)。

* * *

@jlehr 说了什么，但有步骤。

1.  转到声明的行的末尾`navigationController`

2.  打`ctrl-a`

如果光标移动到声明 的行的开头`window`，则该行的换行符是假的。

快速解决; 将光标置于声明行的开头`window`，点击`down-arrow`, then `delete`, then `return`。

一直发生在我身上，因为我的 emacs 根深蒂固，因此，命中`ctrl-return`插入错误类型的换行符，导致编译器出错。请也提交一个错误，它会被标记为欺骗，但欺骗表明这让用户感到沮丧的频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:16:00.923

删除此语句或更改变量名称：

```
UINavigationController *navigationController; 
```

然后再试一次。

您在同一类中有两次相同的变量名。一个作为财产，一个作为全局。

编辑：

或者您的意图是用作 ivar，因此您应该使用 as ：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    UINavigationController *navigationController;
}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) UINavigationController *navigationController;

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T17:19:39.067

您发布的代码在我的机器上编译干净，因此您的 Xcode 项目中的版本很可能包含一个杂散的非打印字符，可能在您声明`window`属性的行上。作为一个快速实验，请尝试注释掉该行以查看是否是问题所在。

隔离包含问题字符的行后，将其注释掉并在新行上重新键入文本。完成该工作后，您可以删除注释的代码。

# joomla - 从前面向数据库添加数据

> ID：14003498
> 
> 赞同：1
> 
> 时间：2012-12-22T14:04:24.920
> 
> 标签：joomla, joomla2.5

我看起来很多网站，我找不到这个。我是为 joomla 创建组件的新手。我需要一个简单的示例，如何将数据从前端添加到 joomla 2.5 MVC 格式的数据库表中。如果您可以向我发送任何教程或在这里写一些示例，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:30:50.740

这是将数据插入数据库表的示例之一。

```
$db                             = JFactory::getDBO();
$shipping_details                   = new stdClass();
$shipping_details->pid              = $data['pid'];
$shipping_details->name         = $data['sname'];
$shipping_details->address          = $data['saddress'];
$shipping_details->city         = $data['scity'];

$stored_details                 = $db->insertObject('#__shipping_details', $shipping_details); 
```

# c++ - 在传递函数指针时是否应该转发关于 noexcept-ness 的知识？

> ID：14003502
> 
> 赞同：7
> 
> 时间：2012-12-22T14:05:32.717
> 
> 标签：c++, c++11, noexcept

我编写了以下代码来测试`noexcept`跨函数调用的传播，它似乎不像我想象的那样工作。在 GCC 4.7.2 中，可以有效地测试一个函数是否`noexcept`只被直接或作为模板特化参数传递；但在作为参数传递给模板化函数或作为指向普通函数的函数指针时*不会*——即使该函数将其形式参数声明为 is `noexcept`。这是代码：

```
#include <iostream>

#define test(f) \
    std::cout << __func__ << ": " #f " is " \
              << (noexcept(f()) ? "" : "not ") \
              << "noexcept\n";

template <void(*f)()>
static inline void test0() {
    test(f);
}

template <typename F>
static inline void test1(F f) {
    test(f);
}

static inline void test2(void(*f)()) {
    test(f);
}

static inline void test3(void(*f)()noexcept) {
    test(f);
}

void f1() {}
void f2() noexcept {}

int main() {
    test(f1);
    test(f2);
    test0<f1>();
    test0<f2>();
    test1(f1);
    test1(f2);
    test2(f1);
    test2(f2);
    test3(f1);
    test3(f2);
    return 0;
} 
```

这是输出：

```
main: f1 不是 noexcept
main: f2 是 noexcept
test0: f 不是 noexcept
test0: f 是 noexcept
test1: f 不是 noexcept
test1: f 不是 noexcept
test2: f 不是 noexcept
test2: f 不是 noexcept
test3: f 不是 noexcept
test3: f 不是 noexcept

```

为什么`noexcept`ness 在其他情况下不传播？在 的情况下`test1`，整个函数都用正确的类型“实例化” `F`，编译器当时肯定知道 F 是否是一个`noexcept`函数。`test3`当`noexcept`ness声明被完全忽略时，为什么可以像我写的那样写？

标准是否必须对此进行具体说明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T15:19:00.460

C++11 标准的第 15.4.13 节规定“异常规范不被视为函数类型的一部分”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-22T23:06:51.910

在 C++17 中，`noexcept`最终被添加到类型系统中。指向非`noexcept`函数的指针不能隐式转换为指向`noexcept`函数的指针。（但反过来也是允许的）。

clang 3.9.0 with`-std=c++1z`和 g++ 7.0 with `-std=c++17`, 拒绝该行`test3(f1);`。

# forms - zf2 表单绑定对象问题

> ID：14003506
> 
> 赞同：2
> 
> 时间：2012-12-22T14:06:30.170
> 
> 标签：forms, binding, zend-framework2

我有一个 zf2 问题，表单绑定对象程序，简而言之，我试图在表单验证完成后自动从表单对象到我的实体的数据交换，为此我实现了两个接口**InputFilterAwareInterface**和**ArraySerializableInterface**，早期的接口是表单对象获取输入过滤器，后面的接口用于表单和我的实体的数据交换。下面是放在我的控制器中的一小段代码。

```
//Controller code
$companyForm = new \Manage\Forms\CompanyForm();
$companyEntity = $this->getServiceLocator()->get('Manage/CompanyEntity');
$postData = $this->getRequest()->getPost()->toArray();
$companyEntity->exchangeArray($postData);
$companyForm->bind($companyEntity);
if($companyForm->isValid(){
    ....
} 
```

这应该会在我的实体对象中自动**调用 exchangeArray()方法，并且它****可以正确**调用，但**问题**是**数据为空**，并且数据数组包含设置了 inputfilter 的键，所有其他数据键都丢失了。

如果需要，我可以添加更多代码片段。

谢谢拉吉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T16:35:57.037

将实体绑定到表单通常使用 hydrator 完成。水合器将数据数组转换为值对象，反之亦然。因此，您需要将表单配置为具有适合您的实体的正确水合器。

例如，如果您的实体和配置、、和方法具有各种属性（例如，`bar`和） ，则可以使用水合器：`baz``Foo``getBar()``setBar()``getBaz()``setBaz()``ClassMethods`

```
use Zend\Form\Form;
use Zend\StdLib\Hydrator\ClassMethods;

class Foo extends Form
{
    public function __construct()
    {
        parent::__construct();

        $this->setHydrator(new ClassMethods);

       // More here for the elements now
    }
} 
```

你的实体：

```
class Foo
{
    public function getBar() {...}
    public function setBar() {...}

    public function getBaz() {...}
    public function setBaz() {...}
} 
```

然后你的控制器看起来像这样：

```
public function createAction()
{
    $entity = new My\Entity\Foo;
    $form   = new My\Form\Foo;
    $form->bind($entity);

    if ($this->getRequest()->isPost()) {
        $data = $this->getRequiest()->getPost();
        $form->setData($data);

        if ($form->isValid()) {
            // $entity is now populated with data
            // persist $entity here
        }
    }

    // create view model here
} 
```

如果表单中有元素“bar”和“baz”并提供正确的输入过滤器来抓取“bar”和“baz”表单数据并过滤它们，这将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T19:27:12.523

`ClassMethods`hydrator（在提取期间）将 getter 的结果（例如“getSomeProperty”）转换为键“some_property”的数组值

如果您的表单元素名称是“someProperty”，则不会发生提取和水合。

基本上：

"getProperty" getter <=> "property" 键（这里没问题）

“getSomeProperty” getter <=> “some_property” 键

为了提取和水合具有对应于驼峰式对象属性的驼峰式名称的表单元素，请执行以下操作：

`$myform->setHydrator(new \Zend\Stdlib\Hydrator\ClassMethods(false));`

“false”参数指示水合器不要将 camelCase 转换为 lowercase_underscore

您可以在表单构造函数中执行此操作。

# html-lists - 阻止文本换行 列表

> ID：14003509
> 
> 赞同：1
> 
> 时间：2012-12-22T14:06:51.073
> 
> 标签：html-lists

在此先感谢您的帮助。我使用列表创建了一个导航栏。我希望该列表中的单词保持在相同的位置，但是当浏览器的大小调整为较小时，文本会换行。您可以在此处参考 Jfiddle。[http://jsfiddle.net/kadeemlaurie/KGwWV/](http://jsfiddle.net/kadeemlaurie/KGwWV/)

这是 HTML

```
<div id="wrap">
 <div class="cntranav"> 
   <ul> 
       <li class="active"><a href="#">+Contrabang</a></li>
       <li><a href="#">Blog</a></li>
       <li><a href="#">Events</a></li>
       <li><a href="#">Store</a></li>
       <li><a href="#">About</a></li>
       <li><a href="#">Contact</a></li>  
        <div class="clearFloat"></div>
    </ul>
 </div></div> 
```

这是CSS

```
body 
{ margin-top: 0px;
  margin-right: 0px;
  margin-bottom: 0px;
  margin-left: 0px}

.cntranav{
 font-family:Arial, 
 Helvetica, sans-serif;
 font-size:12px;font-weight:bold;}.

 cntranav ul{
list-style:none;
background:#2d2d2d;
background-image: none;
border-bottom: 1px solid #000;
height:40px;
padding:2px;}

.cntranav li{
display:block;
float:left;}

.cntranav li:
first-child{
margin-left:5px;}

.cntranav a{
display:block;
padding:10px;
text-decoration:none;
color:#bbbbbb;
border-top:2px solid transparent;}

.cntranav a:hover,
.cntranav li.active a{
font-weight:bold;
color:#fff;
border-top:0px solid #;}

.clearFloat{
clear:both;}

ul.ul.cntranav li {
float:left;
padding:7px 8px; }

ul.cntranav li.active{  
border-top: solid 0px #;
color:#fff;
font-weight:bold;}

ul.cntranav li:hover{
background:#383835;
cursor:pointer;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:29:42.313

设置宽度`.cntranav`（例如，800 像素）。当您调整浏览器大小或放大时，浏览器会将列表项从水平导航栏中向下推送到新行。它这样做是因为它试图使它们在视口中保持可见，无论大小如何，没有任何重叠. 围绕此的规则非常技术性（我并不全部了解），但简短的回答是您需要在导航容器上指定绝对宽度以防止这种情况发生。

# php - 获取本地 Facebook 脚本的访问令牌

> ID：14003511
> 
> 赞同：0
> 
> 时间：2012-12-22T14:07:05.497
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-access-token

我将通过提到这是我第一次使用 Facebook 的 API 来开始这个问题。

我在自己的 PC 上有一个脚本，它是用 WAMP 执行的。它从 Facebook 的 Graph API 获取数据，**当手动从[Graph API Explorer](http://developers.facebook.com/tools/explorer/)**获得访问令牌时，获取特定组的提要。

我希望我的脚本请求访问令牌，然后只使用`file_get_contents`请求**json string**。我需要访问令牌才能拥有所有可用的权限。

我应该怎么做才能使接下来的步骤有效？

1.  打开我的 PHP 文件。（已经存在）
2.  该脚本将要求提供访问令牌。
3.  它将打印的内容`https://graph.facebook.com/GROUP_ID/feed?=access_token=ACCESS_TOKEN`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:35:23.400

您正在寻找服务器端身份验证。有关于这个主题的[详细文档。](https://developers.facebook.com/docs/howtos/login/server-side-login/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T19:30:01.660

1.  如果您正在开发**facebook 应用程序**，则无需再次登录 facebook。（PHP 和 Javascript 的代码片段，您需要使用它。）

    **[PHP]**

    您可以通过执行 Http GET 请求来获取 access_token -

    ```
    https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials 
    ```

    更多详情：[以应用程序登录](https://developers.facebook.com/docs/howtos/login/login-as-app/#step1)

    **[Javascript]**

    ```
    FB.getLoginStatus(function(response) 
    {
      if (response.status === 'connected') 
      {
          var uid = response.authResponse.userID;
          var accessToken = response.authResponse.accessToken;
      } 
      else if (response.status === 'not_authorized') 
      {
         // the user is logged in to Facebook, 
         // but has not authenticated your app
      } 
      else 
      {
         // the user isn't logged in to Facebook.
      }
    }); 
    ```

    更多详情：[getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

2.  如果您**将 fb 与您的网站集成**，您需要先登录，然后在响应中您可以获得访问令牌。

    阅读本文：[登录架构](https://developers.facebook.com/docs/concepts/login/login-architecture/)

    **[PHP]**（难度：高）

    阅读：[服务器端登录](https://developers.facebook.com/docs/howtos/login/server-side-login/)

    **[Javascript]**（难度：低）

    ```
    FB.login(function(response) 
    {
        if (response.authResponse)
        {
            console.log('Welcome!  Fetching your information.... ');
            var access_token = response.authResponse.accessToken;
        } 
        else 
        {
            console.log('User cancelled login or did not fully authorize.');
        }
     }); 
    ```

    更多详情：[FB.Login](https://developers.facebook.com/docs/howtos/login/getting-started/#step4)

# wpf - WPF Datagrid 生成行，但列保持空白

> ID：14003512
> 
> 赞同：0
> 
> 时间：2012-12-22T14:07:09.887
> 
> 标签：wpf, vb.net, wpfdatagrid

我试图在 WPF 中填充数据网格，就像在 Silverlight 中填充它一样，但显然它的工作方式并不相同。

这是 XAML 中的网格：

```
 <DataGrid x:Name="gvEintraege"
                            CanUserAddRows="False"
                            CanUserDeleteRows="False"
                  IsReadOnly="True"
                  AutoGenerateColumns="True" >
            <DataGrid.Columns>
                <DataGridTextColumn Header="Datum"
                                    Width="100"
                                Binding="{Binding datum}"/>
                <DataGridTextColumn Header="Gewicht"
                                    Width="70"
                                Binding="{Binding gewicht}"/>
                <DataGridTextColumn Header="Muskelmasse"
                                    Width="80"
                                Binding="{Binding muskelmasse}"/>
                <DataGridTextColumn Header="Fettmasse"
                                    Width="70"
                                Binding="{Binding fettmasse}"/>
                <DataGridTextColumn Header="BMI"
                                    Width="40"
                                Binding="{Binding bmi}"/>
                <DataGridTextColumn Header="FFMI"
                                    Width="50"
                                Binding="{Binding ffmi}"/>
                <DataGridTextColumn Header="KFA"
                                    Width="50"
                                Binding="{Binding kfa}"/>
            </DataGrid.Columns></DataGrid> 
```

这是整个代码隐藏：

```
Public Class LogWindow

Dim gvEintraege_Itemssource As New ObservableCollection(Of clsGridEintrag)
Public globaleVariablen As Application

Public Sub New()

    InitializeComponent()

    Me.globaleVariablen = Application.Current

    Me.getLogEintraege()

    Me.gvEintraege.ItemsSource = Me.gvEintraege_Itemssource
End Sub

Private Sub getLogEintraege()
    Try
        Dim myLog As clsLog = clsSerializer.DeSerialize(Me.globaleVariablen.standardPfadLogs & "\" & Me.globaleVariablen.aktiverUser & ".xml", New clsLog)
        With myLog
            For Each x In .eintraege
                Me.gvEintraege_Itemssource.Add(New clsGridEintrag(x.datum, x.gewicht, x.kfa, x.muskelmasse, x.fettmasse, x.ffmi, x.bmi))
            Next
        End With
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub

Public Class clsGridEintrag
    Public datum As Date
    Public gewicht As Decimal
    Public kfa As Decimal
    Public muskelmasse As Decimal
    Public fettmasse As Decimal
    Public ffmi As Decimal
    Public bmi As Decimal

    Public Sub New()

    End Sub

    Public Sub New(datum_ As Date, gewicht_ As Decimal, kfa_ As Decimal, muskelmasse_ As Decimal, fettmasse_ As Decimal, ffmi_ As Decimal, bmi_ As Decimal)
        Me.bmi = bmi_
        Me.datum = datum_
        Me.fettmasse = fettmasse_
        Me.ffmi = ffmi_
        Me.gewicht = gewicht_
        Me.kfa = kfa_
        Me.muskelmasse = muskelmasse_
    End Sub
End Class 
```

结束类

网格为 itemssource 中的每个项目创建一行，但不显示列中的任何数据。看起来它应该以这种方式工作，但显然我在某个地方犯了一个错误。我正在为此拉头发，因为它看起来很容易，但它不会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:10:34.137

我认为您没有看到任何内容，因为您没有使用公共属性或依赖项属性。绑定仅适用于其中 2 个。由于您尝试绑定到公共变量，因此它将不起作用。我很确定调试输出也会警告您找不到绑定。

否则，将“自动生成列”设置为 true，您不必指定列。网格应该能够读取您的对象（将其绑定到包含您的自定义对象的 observablecollection）并为每个公共依赖属性或公共属性生成一列（这意味着它们具有 get/set 访问器）。

下一个答案也是正确的，你忘了设置数据上下文；）

1.  确保已设置 DataContext。
2.  在窗口/控件类中创建一个 ObservableCollection 作为公共属性：`Public Property myCollection As New ObservableCollection<clsGridEintrag>()`
3.  将您的 clsGridEintrag 变量更改为“公共属性”，类似于 observablecollection。
4.  将 DataGrid 的 ItemsSource 绑定到`myCollection`
5.  通过一个接一个地添加 clsGridEintrag 对象来填充 ObservableCollection（使用`myCollection.Add(myObject)`）。

我不在我的编码计算机上，但如果您使用 AutogenerateColumns = true，以上内容应该会给您想要的结果。DataGrid 将在您的 clsEntraig 对象中的每个公共属性的名称之后命名每个标题，并且应该正确地列出它们。

[这是一些附加信息](http://wpftutorial.net/DataGrid.html)，请记住“客户”可能是包含“客户”对象的 ObservableCollection。在“客户”对象中，我们希望在 DataGrid 中看到的变量很可能被设置为“公共属性”（在 C# 中，等价物类似于`public string myString {get; set;}`- 如果您看到 get/set，它是一个属性）。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:11:03.673

你还没有设置`DataContext`属性，所以你的绑定不起作用......

在**日志窗口中**：

```
Public Sub New()

  Me.DataContext = Me.gvEintraege ' or wherever your data is 
  InitializeComponent()
  ....
End Sub 
```

# php - PHP - 访问受密码保护的页面

> ID：14003521
> 
> 赞同：1
> 
> 时间：2012-12-22T14:08:09.590
> 
> 标签：php, password-protection, http-authentication

我只想在 PHP（链接、按钮等）中找到一种方法，让用户可以打开（基于 http-authentication）密码保护的页面。

我已经尝试使用包含以下链接的简单href：

```
http://username:password@domain 
```

但它似乎在当前浏览器中不再起作用。

有没有办法做到这一点？这似乎是一个非常琐碎的问题，但实际上我仍然没有找到方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:15:22.080

正如您所说，该`username:password`方案不适用于所有浏览器。如果您不介意基于脚本的解决方案，您可以做的是首先通过 AJAX 建立身份验证，然后为用户提供一个正常链接。

想法概述：

1.  客户端脚本通过 AJAX 建立身份验证。
2.  一旦成功，您将向用户提供适当的链接。
3.  一旦用户点击链接，用户的客户端就会自动提交在步骤 1 中生成的凭据。

例如，请参阅[此操作指南](http://coderseye.com/2007/how-to-do-http-basic-auth-in-ajax.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:14:28.770

不知道为什么这不起作用。现代浏览器试图避免的可能的安全问题。

但要完成这项工作，您可以使用

```
 <script>
function foo(){
window.location = "http://username:password@domain";
}
</script>

    <a onclick='foo()'>Click here</a> 
```

# database - 在 MVC3 中如何对编辑操作执行远程验证？

> ID：14003523
> 
> 赞同：0
> 
> 时间：2012-12-22T14:08:37.750
> 
> 标签：database, asp.net-mvc-3, controller, duplicates, action

我读了这个有用的例子[http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)用于 MVC3 中的远程验证，当我创建新项目时效果很好；但是，当我尝试编辑新创建的项目时，我遇到了麻烦。

我有一个这样的模型

```
Imports System.ComponentModel
Imports System.ComponentModel.DataAnnotations
Imports System.Web.Mvc
Imports System.Collections.Generic

Public Class Language

    Public Property LanguageId As Integer

    <Display(Name:="DisplayNameLanguageName", ResourceType:=GetType(Resources.Language)),
        Required(ErrorMessageResourceName:="ErrorMessageLanguageNameRequired", ErrorMessageResourceType:=GetType(Resources.Language)),
        StringLength(20),
        Remote("IsNameAvailable", "Language", "AdminArea", ErrorMessageResourceName:="ErrorMessageNameNotAvailable", ErrorMessageResourceType:=GetType(Resources.Language))>
    Public Property Name As String

    Public Property Flag as String    
End Class 
```

在控制器“语言”类中，我有......

```
 'OutputCache needed for remote validation
   <OutputCache(Location:=OutputCacheLocation.None, NoStore:=True)>
    Public Class LanguageController
        Inherits System.Web.Mvc.Controller

        Private db As StoreEntities = New StoreEntities

        'remote validation for duplicates
        Public Function IsNameAvailable(Name As String) As JsonResult
            Return Json(Not db.Languages.Any(Function(x) x.Name = Name), JsonRequestBehavior.AllowGet)
        End Function

[...] 
```

从“Create.vbhtml”视图中，我可以创建一种新语言，但从“Edit.vbhtml”中，我不能只编辑 Flag 属性，为 Name 保留相同的值，因为验证开始了。我也被迫更改 Name 属性。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:11:14.073

我解决了在Edit.vbhtml视图中添加隐藏字段“HiddenName”的问题

```
Public Function IsNameAvailable(Name As String, Optional HiddenName As String = "") As JsonResult
    If Name <> HiddenName Then
        Return Json(Not db.Languages.Any(Function(x) x.Name = Name), JsonRequestBehavior.AllowGet)
    Else
        Return Json(True, JsonRequestBehavior.AllowGet)
    End If
End Function 
```

# c++ - 用于 C++ 的 Mathgl 绘图库安装

> ID：14003528
> 
> 赞同：0
> 
> 时间：2012-12-22T14:09:23.773
> 
> 标签：c++, windows-7, plot, mathgl

我已经使用在 sourceforge 中找到的 windows 二进制文件在我的 win7 机器中安装了 MathGL 库。我已按照说明进行操作，并且已将 mathgl bin;include 和 lib 文件包含到相应的 mingw 文件夹中。但是当我尝试运行以下测试示例时：

```
#include <mgl2/mgl.h>
int main()
{
  mglGraph gr;
  gr.FPlot("sin(pi*x)");
  gr.WriteFrame("test.png");
} 
```

它无法编译并给出以下错误：

**构建日志：**

```
 from /mingw/lib/gcc/mingw32/../../../include/mgl2/mgl.h:24,
                 from C:\Users\Roadmaster\Desktop\Plot_Xpto\xpto\main.cpp:1:
/mingw/lib/gcc/mingw32/../../../include/mgl2/canvas.h:409: error: expected ';' before '*' token
Process terminated with status 1 (0 minutes, 3 seconds)
2 errors, 0 warnings 
```

**缺少头文件：**

```
#include <gif_lib.h> 
```

我注意到预编译的 windows 文件夹没有那个特定的头文件“gif_lib.h”。

我的问题如下：

我在安装过程中错过了什么吗？如果我没有在哪里可以找到那个特定的标题（我用谷歌搜索过，什么也没有：（）？

**我已按照以下说明安装了库：**

"1.3 安装

MathGL 可以通过 4 种不同的方式安装。

从源代码编译。库中使用了 cmake 构建系统。要运行它，应该执行命令： cmake 。两次，在它 make 并使用 root/sudo 权限进行安装之后。有时在安装后您可能需要更新库列表——只需使用 root/sudo 权限执行 ldconfig。有几个附加选项默认关闭。它们是：enable-fltk、enable-glut、enable-qt，用于 ebabling FLTK、GLUT 和/或 Qt 窗口；enable-jpeg、enable-gif、enable-hdf5等启用对应的文件格式；enable-all 用于启用所有附加功能。要使用 double 作为基本内部数据类型，请使用选项 enable-double。要启用语言接口，请对所有语言使用 enable-python、enable-octave 或 enable-all-swig。您可以使用所见即所得工具（cmake-gui）查看所有这些，或输入 cmake -D enable-all=on -D enable-all-widgets=on -D enable-all-swig=on 。在命令行中启用所有功能。

**使用预编译的二进制文件。MinGW（平台 Win32）有二进制文件。对于预编译的变体，只需将存档解压缩到编译器的位置（即 mingw/lib 中的 mathgl/lib、mingw/include 中的 mathgl/include 等）或编译器中的任意其他文件夹和设置路径。默认情况下，预编译版本包括对 GSL (www.gsl.org) 和 PNG 的支持。因此，需要在系统上安装这些库（例如，可以在[http://gnuwin32.sourceforge.net/packages.html](http://gnuwin32.sourceforge.net/packages.html)找到）。** 从标准包（RPM、deb、DevPak 等）安装预编译版本。注意，您可以通过命令从 sourceforge.net SVN 下载最新的源（可能不稳定）

svn 结帐[http://svn.code.sf.net/p/mathgl/code/mathgl-2x](http://svn.code.sf.net/p/mathgl/code/mathgl-2x) mathgl-code""

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T14:31:17.337

对于较旧的 MathGL 版本，假设您已经安装了所有附加库（即 giflib -- 缺少头文件）。

对于较新的 MathGL 版本，所有这些外部依赖项都是“隐藏的”并且不是必需的。

# ruby-on-rails - 调用模型时如何添加“订单选项”？

> ID：14003532
> 
> 赞同：0
> 
> 时间：2012-12-22T14:10:48.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

如果我像这样添加订单选项，错误会说

> undefined method `call' for # 我该如何解决这个问题？

我在控制器中的代码是

```
@communities = current_user.get_up_voted Community.(order: 'updated_at DESC').page(params[:page]).per(5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:15:18.523

我想也许你有 order 错误的语法：

[http://guides.rubyonrails.org/active_record_querying.html#ordering](http://guides.rubyonrails.org/active_record_querying.html#ordering)

尝试：

```
Community.order("updated_at DESC") 
```

# eclipse - m2eclipse：在构建依赖项时自动安装 Maven

> ID：14003535
> 
> 赞同：5
> 
> 时间：2012-12-22T14:11:12.387
> 
> 标签：eclipse, maven, m2eclipse

我有一种感觉，我错过了一些非常基本的东西。通常这种感觉是有道理的。我对 Maven 不是很精通，所以请多多包涵。

使用 Eclipse Juno 和 m2eclipse，并安装外部 Maven 3.0.4。我有两个项目，`A`和`B`. 项目`A`依赖于项目`B`进行编译。这两个项目都是包装= `jar`。简单的。

现在，我右键单击项目`A`并选择*Run As -> Maven install*。这会导致错误，Maven 告诉我它在存储库中找不到项目`B`。

说得通。项目`B`不在存储库中。但是，我希望 m2eclipse 能够检测到这一点，并`mvn install`在`B`尝试`A`.

这不会发生。`mvn install`on project`A`假设该项目`B`已经在我的本地存储库中。我打开了工作区分辨率。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:15:39.553

您可以将父项目添加到 A&B。在父项目上运行'mvn install -pl A -am'，项目B将在项目A之前制作（安装）。

# mysql - SQL通过分组行获取常用值

> ID：14003536
> 
> 赞同：6
> 
> 时间：2012-12-22T14:11:32.870
> 
> 标签：mysql, sql

假设我有一个这样的表：

```
| uid | group_id | 
-----------------
|   1 |     1    |
|   1 |     2    |
|   1 |     3    |
|   1 |     4    |
|   2 |     1    |
|   2 |     2    |
|   2 |     3    |
|   3 |     1    |
|   3 |     2    |
|   3 |     4    |
... 
```

我怎样才能获得`group_ids`某些集合的通用集合`uids`。

例如
对于 uid 1,2 ：常见的 group_ids 是 1,2,3
对于 uid 1,2,3 ：常见的 group_ids 是 1 和 2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:21:32.403

假设每个`group_ID`对每个都是唯一的`uid`，（*否则你需要使用`distinct`*）

```
SELECT group_ID
FROM tableName
WHERE uid IN (1,2,3)
GROUP BY group_ID
HAVING COUNT(*) = 3 
```

*   [SQLFiddle Demo（*包括两个查询*）](http://sqlfiddle.com/#!2/52cc8/3)

# spring - DispatcherServlet 不映射请求

> ID：14003539
> 
> 赞同：1
> 
> 时间：2012-12-22T14:11:52.923
> 
> 标签：spring, spring-mvc, jsf-2

我正在使用 spring in(spring mvc+spring webflow)+jsf 2+JPA+Hibernate 开发一个项目，并且对映射 spring mvc (DispatcherServlet) 的请求有问题

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
id="WebApp_ID" version="3.0">

<display-name>AirTour</display-name>

<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>

<!-- SPRING -->

<!-- El contexloaderlistener es usado para iniciar el contexto de spring (sin mvc) para usar hibernete, jpa.... -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/conf/applicationContext.xml
     </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- SPRING MVC & WEBFLOW -->
<!-- Este servlet es utiizado para el contexto web de spring, es decir para la parte web de spring mvc -->   
 <servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/conf/webflow-config.xml</param-value>
</init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Este servlet se utilizara cuando se utilicen rutas /app/* -->
 <servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/app/*</url-pattern>
</servlet-mapping>

<!-- JSF -->

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
</context-param>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
</web-app> 
```

我了解这个 web.xml 以 .xhtml 终止的请求由 jsf servlet 管理，而具有模式 /app/* 的请求由 dispatcherSevler (spring mvc) 管理。很好？

我的 index.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">

<h:body>

<h:dataTable value="#{gestorUsuarios.listar()}" var="usuarios">
    <h:column>
        <f:facet name="header">
            <h:outputText value="Nombre" />
        </f:facet>
        <h:outputText value="#{usuarios.nombre}" />
    </h:column>
    <h:column>
        <f:facet name="header">
            <h:outputText value="Apellidos" />
        </f:facet>
        <h:outputText value="#{usuarios.apellidos}" />
    </h:column>
</h:dataTable>
<h:link value="Registro" outcome="app/registro" />

</h:body>
</html> 
```

但是当视图被渲染时，“Registro”链接不会显示，因为它已经与导航案例相关联。

我的 webflow-config.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

<faces:resources />

<!--
    Maps request paths to flows in the flowRegistry; e.g. a path of
    /registration-flow looks for a flow with id "registration-flow"
-->
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <property name="flowRegistry" ref="flowRegistry" />
</bean>

<!-- Gestiona las solicitudes provenientes de un flujo y elas procesa.
     Es la conexión entre el dispacherServlet y webflow. Esta conectado con un 
     ejecutor de un flujo en aquellos fljos para los que se gestinan solicitudes
 -->
<bean class="org.springframework.faces.webflow.JsfFlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
</bean>

<flow:flow-executor id="flowExecutor">
    <flow:flow-execution-listeners>
        <flow:listener ref="facesContextListener" />
    </flow:flow-execution-listeners>
</flow:flow-executor>

<flow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices"     base-path="/WEB-INF/flows">
    <flow:flow-location-pattern value="/*-flow.xml" />
</flow:flow-registry>

<!-- Equivalente a org.springframework.webflow.mvc.servlet.FlowHandlerAdapter, 
    la gestiona solicitudes procedentes de un flujo y las procesas -->
<bean class="org.springframework.faces.webflow.JsfFlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
</bean>

<faces:flow-builder-services id="flowBuilderServices" development="true" />

<bean id="facesContextListener"  class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" /> 
```

我的项目。图片

[http://i.stack.imgur.com/OLhDd.png](http://i.stack.imgur.com/OLhDd.png)

我需要 spring mvc 中的 viewResolver 吗？

# java - 在 AspectJ 中使用 n 个参数调用继续

> ID：14003542
> 
> 赞同：2
> 
> 时间：2012-12-22T14:12:16.247
> 
> 标签：java, parameters, aop, aspectj

假设我定义了这种形式的切入点

```
* *.*(..) 
```

我想定义一个周围的建议，我怎么能用任意数量的参数调用继续？

我考虑过使用反射和 thisJoinPoint.getArgs() 但在尝试之前，我想知道是否有一种干净简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T21:13:32.647

这是一个常见的误解，即`proceed`采用与匹配模式的方法相同的参数。但是，接受***建议***规定`proceed`的论点。

 *例子：

```
class C {   
    public void foo(int i, int j, char c) {
        System.out.println("T.foo() " + i*j + " " + c);
    }
}

class Context {
    public int bar = 7;
    public void doStuff() {
        C c = new C();
        c.foo(2, 3, 'x');
    }
} 
```

有一个方面：

```
public aspect MyAspect {

    pointcut AnyCall() : 
        call(* *.*(..)) && !within(MyAspect);

    void around(Context c) : AnyCall() && this(c) {
        if (c.bar > 5)
            proceed(c);  // based on "around(Context c)"
    }       
} 
```*

# android - 不同屏幕尺寸上的 Android 应用程序

> ID：14003543
> 
> 赞同：0
> 
> 时间：2012-12-22T14:12:40.887
> 
> 标签：android, layout, compatibility

我有一个在我的 Galaxy Ace 上运行良好的应用程序，我的意思是布局看起来很好，所有比例都很好。但是当我在 Galaxy Note 上安装它时，它并不适合屏幕，我的意思是它只显示在屏幕的左上角，屏幕的其余部分是白色的。所以我想知道如何将它调整为在所有屏幕尺寸上都相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:18:04.727

android开发者文档中有一个指南：[支持不同的屏幕尺寸](http://developer.android.com/training/multiscreen/screensizes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:19:54.467

我猜您正在为视图/控件使用完整值，而不是以与密度无关的方式进行操作。

看看：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

它解释了实现目标的几种方法。

# java - 在 Android 中以编程方式更改 DNS

> ID：14003544
> 
> 赞同：4
> 
> 时间：2012-12-22T14:12:55.100
> 
> 标签：java, android, android-networking

我正在编写一个应用程序来更改我的 Android 设备的 DNS。我已经成功获取了当前的 DNS 信息，但是我无法弄清楚如何将其设置为新值。

我尝试了以下方法：

```
android.provider.Settings.System.putString(v.getContext().getContentResolver(),android.provider.Settings.System.WIFI_USE_STATIC_IP, "192.168.100.102");
android.provider.Settings.System.putString(v.getContext().getContentResolver(),android.provider.Settings.System.WIFI_STATIC_DNS1, "192.168.0.2");
android.provider.Settings.System.putString(v.getContext().getContentResolver(),android.provider.Settings.System.WIFI_STATIC_DNS2, "192.168.0.3");
android.provider.Settings.System.putString(v.getContext().getContentResolver(),android.provider.Settings.System.WIFI_STATIC_GATEWAY, "192.168.0.1");
android.provider.Settings.System.putString(v.getContext().getContentResolver(),android.provider.Settings.System.WIFI_STATIC_NETMASK, "255.255.255.0");
android.provider.Settings.System.putString(v.getContext().getContentResolver(),android.provider.Settings.System.WIFI_STATIC_IP, "1"); 
```

不过似乎并没有改变什么。

（*我确定我输入的值不正确 - 到目前为止，我只想看看我的设置有一些变化*）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T20:31:10.200

你添加权限了吗？[[关联]](https://stackoverflow.com/questions/4106502/set-android-ip-dns-gateway-setting-programatically)

`<uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission>`

# android - 创建多目标电话平台媒体服务器的最佳选择是什么

> ID：14003550
> 
> 赞同：1
> 
> 时间：2012-12-22T14:14:05.590
> 
> 标签：android, ios, windows-phone

我正在做一个新项目，我们希望创建一个将媒体流式传输到 iOS、Android 和 Windows 手机的应用程序。我们喜欢基于云的解决方案，以便在流量增加时可以轻松扩展，并且我们希望构建事物，以便尽可能多的业务逻辑和应用程序逻辑位于共享服务背后。我们更喜欢基于 .Net 的解决方案，但对最有效的解决方案持开放态度。我试过用谷歌搜索这个，但我没有找到很多关于这个的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:17:31.570

对于基于 .NET 的方法，请查看[Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/resources/)。它不支持 Andriod 的推送通知，但看起来您实际上并不需要它。

# javascript - 骰子动画jQuery

> ID：14003555
> 
> 赞同：-5
> 
> 时间：2012-12-22T14:14:38.803
> 
> 标签：javascript, jquery, animation

我正在构建一个 yatzy 游戏，我在其中调用 shuffle 函数来决定要显示哪个骰子。

```
$("#dice" + i).attr('src', 'img/Dice' + yatzyLogic.randomDice() + '.gif'); 
```

它很好用，但我想要一个当你掷骰子时的动画，就像**[这样](http://efrane.github.com/jquery-dice/)**。但是如果我应用它，我必须重新编写几十个代码，而且我很懒:)。

有没有更简单的方法可以将这种东西应用到我的代码中？喜欢快速显示不同图像的定时器功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:30:33.797

~~[http://pannonicaquartet.com/test/ej_010_R.html](http://pannonicaquartet.com/test/ej_010_R.html)~~(404)

```
<script language="javascript" type="text/javascript">
var spnResultado, imgDado, numero, timerReference, timeoutReference;
function init(){
 try{
    imgDado = document.getElementById("imgDado");
    spnResultado = document.getElementById("spnResultado");
 }catch(er){
    if(console.log)console.log("Error in init: " + er);
    if(spnResultado)spnResultado.innerText = "Error in init: " + er;
 }
}

function btnStartOnClick(){
 try{
    if(!timerReference){
        numero = Math.floor(Math.random()*6) + 1;
        timerReference = setInterval(timerFunction,13);
        var rnd = Math.floor(Math.random()*901)+800;
        setTimeout(timeoutFunction,rnd);
        spnResultado.innerText = "rnd " + rnd;
    }
 }catch(er){
    if(console.log)console.log("Error in btnStartOnClick: " + er);
    spnResultado.innerText = "Error in btnStartOnClick: " + er;
 }
}

function timerFunction(){
 try{
    numero++;
    if(numero > 6) numero = 1;
    var offsetImagen = -(numero-1) * 80;
    imgDado.style.marginLeft = offsetImagen + "px";
 }catch(er){
    if(console.log)console.log("Error in fnTimer:\n" + er);
 }
}

function timeoutFunction(){
 try{
    clearInterval(timerReference);
    timerReference = null;
    spnResultado.innerText = "Número: " + numero;
 }catch(er){
    if(console.log)console.log("Error in fnTimer:\n" + er);
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:36:50.173

您可以为每个骰子值创建非循环动画 gif（*其最后一帧将是骰子值ofcourse*）...

并不是说你真的应该这样做（***我实际上是建议你不要这样做***），因为这只是一个把戏。
但如果你说你不能/不愿意重新编码/重构你当前的代码，那么我看不到不同的路线。。

# php - 为什么我可以为一个用户上传图库图片，但不能为另一个用户上传？

> ID：14003557
> 
> 赞同：0
> 
> 时间：2012-12-22T14:14:46.587
> 
> 标签：php, codeigniter, phpmyadmin, gallery

我正在我的网站上创建一个画廊，并且我创建了几个测试帐户以确保它适用于每个帐户。但我似乎只能为一个用户上传任何图像到屏幕和图库数据库，而不是其他任何用户。为什么会这样 - 每个用户都有自己的会话，所以我很困惑。请看一下我的代码。我的想法是我的模型中的 putGalleryImage 函数有问题，但我没有看到任何真正突出的东西。我认为它也可能出现在我的上传功能的 else 语句中，用于上传图像时，但同样，我没有任何问题，因为如果它只适用于一个特定用户，为什么不适用于其他任何用户？

控制器：

```
class Gallery extends CI_Controller {

function __construct()
{
    // Call the parent construct
    parent::__construct();

    $this->load->model("profiles");
    $this->load->model("gal_model");
    $this->load->helper(array('form', 'url'));

    $this->gallery_path = 'web-project-jb/assets/gallery/';

}

function upload()
{

    $config = array(

            'allowed_types' =>'gif|jpg|jpeg|png',
            'upload_path' => $this->gallery_path,
            'max_size' => 10000,
            'max_width' => 1024,
            'max_height' => 768);

    $this->load->library('upload', $config);

    $username = $this->session->userdata('username');

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $username = $this->session->userdata('username');

        $viewData['username'] = $username;

        $viewData['images'] = $this->gal_model->getGalleryImage($username);

        $this->load->view('shared/header');
        $this->load->view('gallery/galtitle', $viewData);
        $this->load->view('shared/nav');
        $this->load->view('gallery/galview', $error, $viewData, array('error' => ' ' ));
        $this->load->view('shared/footer');

    }
    else
    {
        $file_data  = $this->upload->data();

        $galleryImage = $this->gallery_path.$file_data['file_name'];

        $data['galleryImage'] = $this->gallery_path.$file_data['file_name'];

        $this->username = $this->session->userdata('username');

        $images = $this->session->userdata('images');

        $data['images'] = $images;

        $this->gal_model->putGalleryImage($username, $galleryImage);

        $viewData['username'] = $username;

        $viewData['images'] = $this->gal_model->getGalleryImage($username);

        var_dump($galleryImage);

        $username = $this->session->userdata('username');

        $this->load->view('shared/header');
        $this->load->view('gallery/galtitle', $viewData);
        $this->load->view('shared/nav');
        $this->load->view('gallery/galview', $viewData);
        $this->load->view('shared/footer');

    }
}

function index()
{

    $username = $this->session->userdata('username');

    $this->load->library('upload');

    $data['gal_model'] = $this->gal_model->getGalleryImage($username);

    $viewData['username'] = $username;
    $viewData['images'] = $this->gal_model->getGalleryImage($username);

    $this->load->view('shared/header');
    $this->load->view('gallery/galtitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('gallery/galview', $viewData, array('error' => ' ' ));
    $this->load->view('shared/footer');

}

 } 
```

模型：

```
class Gal_model extends CI_Model
{
var $gallery_path;

function Gal_model()
{
    parent::__construct();

}   

function exists($username)
{
    $this->db->select('*')->from("gallery")->where('user', $username);
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {

        return true;
        /*
         echo "user $user exists!";
        $row = $query->row();
        echo " and his profileimage is $row->profileimage";
        */
    }

    else

    {

        return false;
        //echo "no such user as $user!";
    }

}

function putGalleryImage($username, $galleryImage)
{

    $record = array('user' => $username, 'galleryimage' => $galleryImage);
    $this->session->set_userdata($galleryImage);
    if ($this->exists($username))
    {
        $this->db->where('user', $username)->insert('gallery', $record);

    }

}

function getGalleryImage($username)
{

    $this->db->select('*')->from('gallery')->where('user', $username);

    $imagesSet= $this->db->get();

    $images = array();

    foreach ($imagesSet->result() as $row)
    {
        $images[] = array('imageid' => $row->imageid,
                'user' => $row->user,
                'galleryimage' => $row->galleryimage);
    }
    return $images;

}

 } 
```

看法：

```
 <div id="gallery">
   <?php if (isset($images) && is_array($images)):
    foreach($images as $galleryImage):
    $link = $galleryImage['galleryimage'] ?>
   <div class="thumb">
        <img src="<?php  echo base_url().$link; ?>" width='150' height='100'/>
       <br>
   </div>
<?php endforeach; else:  ?>
    <div id = "blank_gallery">Please upload an Image</div>
<?php endif; ?> 
```

```
 <?=form_open_multipart('gallery/upload');?>
    <?=form_upload("userfile");?>
    <?=form_submit('upload', 'Upload')?>
    <?=form_close();?>
    <?php if (isset($error)) echo $error;?> 
```

再次感谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:30:32.377

这似乎是与目录访问相关的操作系统问题。

# r - 选择矩阵中的值以及R中的列名

> ID：14003565
> 
> 赞同：0
> 
> 时间：2012-12-22T14:15:42.837
> 
> 标签：r

我有一个矩阵，我想从中选择一个观察值及其列名。

如果我使用`subset()`or`matrix[]%in%`然后我得到整行。

我只想得到那个单一的观察和它的列名。有没有办法做到这一点？

这是一个例子：

矩阵：

```
 col1 col2 col3
row 1    10   20    30 
row 2    30   30    40 
```

现在我想选择具有最高值的值和列名：

```
max <- max(matrix)
subset(matrix, matrix==max) 
```

这给出了输出：

```
 col1 col2 col3
row 2    30   30    40 
```

但是我想得到的是：

```
 col3
        40 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:41:48.837

由于您已经知道该值，您只需要获取列名。

`m`出于明显的原因调用您的矩阵：

```
m <- matrix(c(10,30,20,30,30,40), ncol=3)
colnames(m) <- c('col1','col2','col3') 
```

要查看哪些列包含最大值（或任何特定值）及其名称，`apply`可用于返回具有名称的逻辑向量：

```
apply(m==10, 2, any)
col1  col2  col3 
TRUE FALSE FALSE 

apply(m==30, 2, any)
col1 col2 col3 
TRUE TRUE TRUE 
```

`which`告诉您哪些值是正确的：

```
which(apply(m==40, 2, any))
col3 
   3 
```

只是名称，如果这是您需要的：

```
names(which(apply(m==40, 2, any)))
[1] "col3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:51:01.610

试试这个：

```
setNames(c(m), colnames(m)[col(m)])[m == max(m)] 
```

# regex - 从字符串中提取第一个数字

> ID：14003568
> 
> 赞同：2
> 
> 时间：2012-12-22T14:16:46.683
> 
> 标签：regex, r

我有一个字符串 thisLine，它包含 11 个用空格分隔的数字。我只想获得第一个数字。我尝试了命令：

```
grep('\\d*\\.\\d*',thisLine,value=TRUE) 
```

它返回整个字符串，而不是第一个数字。如何只返回第一个数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T14:29:12.267

我相信有很多可能性，这里有一些我会考虑的：

```
thisLine <- paste(runif(11), collapse = " ")
thisLine
# [1] "0.841216114815325 0.861485596280545 0.973681036382914 0.683699210174382 0.95226536039263 0.368689567316324 0.173984130611643 0.497511914698407 0.870743532432243 0.45606177020818 0.222731305286288"

sub("\\s+.*", "", thisLine)              # assumes no leading space
sub("\\s*(\\S+?)\\s.*", "\\1", thisLine) # handles leading spaces
strsplit(thisLine, " ")[[1]][1]          # more flexible if you want 2nd, 3rd, ... 
```

都给

```
# [1] "0.841216114815325" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-23T19:21:39.963

`str_first_number()`您可以使用包中的功能很好地做到这一点`strex`。

```
library(strex)
johnsmith <- "John Smith, 34 years of age, 6ft tall, 85kg."
str_first_number(johnsmith)
#> [1] 34
str_nth_number(johnsmith, n = 1)  # first number
#> [1] 34
str_nth_number(johnsmith, n = 2)  # second number
#> [1] 6
str_nth_number(johnsmith, n = -1)  # last number
#> [1] 85
str_last_number(johnsmith)
#> [1] 85 
```

由[reprex 包](http://reprex.tidyverse.org)（v0.2.0）于 2018 年 9 月 3 日创建。

# android - 在果冻豆中设置 SELECT 的高度

> ID：14003569
> 
> 赞同：1
> 
> 时间：2012-12-22T14:17:09.257
> 
> 标签：android, html, css, uiwebview, webkit

我正在使用 webview 并且选择项的高度小于 jelly bean 中的预期高度。它在 ics 中完美运行!!。我如何让它正确显示？

```
#select{

    background:url('images/select-box.png') no-repeat;
    width:352px;
    height:84px;
    border: 0;
} 
```

# macos - 为 Mac OSX 创建一个简单的 Web 浏览器

> ID：14003570
> 
> 赞同：0
> 
> 时间：2012-12-22T14:17:11.373
> 
> 标签：macos

我需要创建一个可以用作 Web 浏览器的简单应用程序。没有按钮、URL 栏——只是一个将用户引导到他可以导航的网页的应用程序。在 Windows 上，我使用 Microsoft Visual Studio 完成此任务 - 我创建了一个 Windows 窗体应用程序，然后从工具箱中拖动 WebBrowser 窗体。这如何在 Mac OSX 中实现？

谢谢转发:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:31:00.943

在 Mac OS 上，您应该使用 NSWebView 对象。

# python - 如何使用 Matplotlib 强制错误栏最后呈现

> ID：14003572
> 
> 赞同：15
> 
> 时间：2012-12-22T14:17:17.970
> 
> 标签：python, matplotlib

我正在尝试在我的建模数据之上绘制一些带有误差线的经验数据。误差线似乎首先呈现，因此被覆盖（见下文）

我曾尝试使用 zorder，但仍然得到相同的结果。我正在使用的代码是

```
 for i in range(1,len(pf)):
            pf[i,:] = av_pf_scale * pf[i,:]
            pylab.semilogy(pf[0,0:180],pf[i,0:180],color='0.75')

    pylab.semilogy(av_pf[0:180],color='r')
    pylab.semilogy(av_mie[0:180],color='g', linestyle='-')

    pylab.draw()
    f = pylab.errorbar(ang,data[j],
                            yerr = delta_data[j],
                            fmt = 'o',
                            markersize = 3,
                            color = 'b',
                            zorder = 300,
                            antialiased = True) 
```

如果有人能告诉我如何使错误栏呈现在顶部，我将不胜感激。

![多图](../Images/da585519b73ce0d90ba13dab78bf5d9c.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-22T22:40:37.283

这看起来像是一个错误，`matplotlib`其中的`zorder`参数`errorbar`未正确传递到误差线的垂直线部分。

复制您的问题：

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax = plt.gca()
[ax.plot(rand(50),color='0.75') for j in range(122)];
ax.errorbar(range(50),rand(50),yerr=.3*rand(50))
plt.draw() 
```

![错误栏失败](../Images/52e15f709268dbae2bbc7b68a30be87f.png) 哈克解决方法：

```
fig = plt.figure()
ax = plt.gca()
[ax.plot(rand(50),color='0.75',zorder=-32) for j in range(122)];
ax.errorbar(range(50),rand(50),yerr=.3*rand(50))
plt.draw() 
```

![错误栏黑客](../Images/231be46e57a88c97577bc5aeb23b6a2c.png)

作为问题报告给 matploblib [https://github.com/matplotlib/matplotlib/issues/1622](https://github.com/matplotlib/matplotlib/issues/1622)（现已修补并关闭）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-21T19:09:59.863

这是`matplotlib`. [链接到 github 问题](https://github.com/matplotlib/matplotlib/issues/1622)

**哈克解决方案：**`zorder=3`在调用时添加参数`plt.errorbar`，例如`plt.errorbar(..., zorder=3)`

# jsf-2 - 复合组件和带有 (ENUM) 转换器的 SelectOneMenu

> ID：14003573
> 
> 赞同：2
> 
> 时间：2012-12-22T14:17:24.460
> 
> 标签：jsf-2, primefaces, composite-component

我正在尝试使用 selectOneMenu 创建一个简单的复合组件......这真的很简单：

```
<cc:implementation>
    <h:panelGrid columns="2">
        <p:outputLabel for="#{cc.attrs.fieldId}" value="#{cc.attrs.fieldLabel}"/>
        <p:selectOneMenu id="#{cc.attrs.fieldId}" required="#{cc.attrs.required}" converter="#{cc.attrs.converter}" value="#{cc.attrs.targetValue}">
                <f:selectItem itemLabel="#{msg['label.selecione.item']}" itemValue="" />
                <f:selectItems value="#{cc.attrs.listValue}"/>
        </p:selectOneMenu>
    </h:panelGrid>          
</cc:implementation> 
```

所以，问题是当我试图通过转换器时！那是一个 ENUM 转换器（使用 @FacesConverter(value = "tipoCampoConverter") 注释扩展 EnumConverter）

错误是：javax.el.E​​LException：*无法将类型为 java.lang.String 的类型的tipoCampoConverter 转换为接口 javax.faces.convert.Converter*

**编辑：

一些额外的信息：

我试图声明带有和不带有“类型”的属性：

```
 <cc:attribute name="converter" required="true" type="javax.faces.convert.Converter"/> 
```

更多信息： 信息：启动 Servlet 引擎：Apache Tomcat/7.0.12 信息：初始化 Mojarra 2.1.10 信息：在 PrimeFaces 3.4.2 上运行 信息：在 PrimeFaces 扩展 0.6.1 上运行

:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T17:45:47.520

当值为 a 时，该`converter`属性默认需要一个实例。像这样的东西。不幸的是，复合材料中这种不直观的行为是“设计使然”。`Converter``ValueExpression``<h:inputText converter="#{bean.converter}">`

你最好的选择是使用它`<f:converter>`。

```
<p:selectOneMenu ...>
    ...
    <f:converter converterId="#{cc.attrs.converter}" />
</p:selectOneMenu> 
```

* * *

**与具体问题无关**，您根本**不需要**针对此特定用例的转换器。JSF 已经有一个内置的枚举转换器。如果您将`UISelectMany`组件绑定到 a`List<E>`而不是`E[]`.

### 也可以看看：

*   [在 h:selectManyCheckbox 中使用枚举](https://stackoverflow.com/questions/3822058/jsf-2-0-use-enum-in-selectmany-menu)
*   [OmniFaces`GenericEnumConverter`](http://showcase.omnifaces.org/converters/GenericEnumConverter) - 一个可重复使用的解决`UISelectMany`方案`List<E>`
*   [如何为 f:selectItems 中的枚举创建和使用通用 bean？](https://stackoverflow.com/questions/11528998/how-to-create-and-use-a-generic-bean-for-enums-in-fselectitems/11529573#11529573)

# asp.net - 按钮在Repeater控件内单击

> ID：14003575
> 
> 赞同：0
> 
> 时间：2012-12-22T14:17:30.973
> 
> 标签：asp.net, vb.net, repeater

我正在尝试获得一个有用的指标来在页面上工作。我可以访问按钮，但无法通过单击按钮来增加点击总数。我在后面使用 vb 代码。

这是我用来访问按钮并尝试进行某种形式的计算的代码：

```
Protected Sub movies_ItemCommand(source As Object, e As RepeaterCommandEventArgs) Handles movies.ItemCommand
    Dim yCount As Integer
    yCount = 0
    Dim nCount As Integer
    nCount = 0
    If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType =
    ListItemType.AlternatingItem Then
        Dim btnYes As Button = CType(e.Item.FindControl("btnYes"), Button)
        Dim btnNo As Button = CType(e.Item.FindControl("btnNo"), Button)
        Dim lblResults As Label = CType(e.Item.FindControl("lblResults"), Label)
        Dim sArgument As String = CType(e.Item.DataItem, 
                 DataRowView).Row.Item("MovieTitle").ToString
        If btnYes.OnClientClick Then
            yCount = yCount + 1
            MsgBox(yCount)
            lblResults.Text = yCount
        ElseIf btnNo.OnClientClick Then
            nCount = nCount + 1
        End If
        total = yCount + nCount

    End If
    MsgBox(total)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:58:46.213

我看起来你的`total`变量是一个本地变量。每次调用`movies_ItemCommand`都会创建一个名为的新变量`total`并将其值设置为 0。将声明移到方法之外，即类中的全局私有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T16:13:32.923

这是一个老问题，但无论如何我都会采取行动。

我想说的是，每次页面回发时，您的全局变量都会被重置。您可以将其声明为静态（如果这适合您的目的），或者将值保留在会话或视图状态中，或者可能是隐藏字段或其他内容。对于我需要坚持的价值观，我倾向于使用以下内容：

```
Protected Property PropertyName() As ReturnType
    Get
        If IsNothing(Session.Item("SessionIdentifier")) Then
            Session.Item("SessionIdentifier") = DefaultValue
        End If
        Return Session.Item("SessionIdentifier")
    End Get
    Set(value As ReturnType)
        Session.Item("SessionIdentifier") = value
    End Set
End Property 
```

# javascript - 语法缺少 ) 当所有 ) 似乎都在那里？

> ID：14003579
> 
> 赞同：4
> 
> 时间：2012-12-22T14:18:43.797
> 
> 标签：javascript, jquery, syntax, innerhtml

好的，所以我一直在建立这个网站。其中一个页面是新闻源 www.wenotelling.x10.mx/news/ 新闻页面中嵌入了新闻源页面，这是实际更新发生的地方。一切都很好，而且该网页似乎可以正常工作。我有两个问题。

1.  加载页面时，新闻源似乎没有更新，而是在页面刷新时加载。
2.  我想添加笑脸。

所以我写了一些 JScript 来一次性解决这两个问题。由于新闻源是通过 HTML 页面更新的，而且我不想每次都去寻找笑脸的 URL，所以我想出了以下代码： [http ://www.wenotelling.x10.mx/news/smilescript .js](http://www.wenotelling.x10.mx/news/smilescript.js)

```
$(document).ready(function() 
{
    alert("Called");
    document.getElementByClass('happy').innerHTML = '<img src="smileys/happy.gif"></img>';
    document.getElementByClass('star').innerHTML = '<img src="smileys/star.gif"></img>';
    document.getElementByClass('dead').innerHTML = '<img src="smileys/dead.gif"></img>';
    document.getElementByClass('yawn').innerHTML = '<img src="smileys/yawn.gif"></img>';
    document.getElementByClass('snub').innerHTML = '<img src="smileys/snub.gif"></img>';
    document.getElementByClass('relax').innerHTML = '<img src="smileys/relax.gif"></img>';
    document.getElementByClass('devil').innerHTML = '<img src="smileys/devil.gif"></img>';
    document.getElementByClass('cool').innerHTML = '<img src="smileys/cool.gif"></img>';
    document.getElementByClass('wink').innerHTML = '<img src="smileys/wink.gif"></img>';
    document.getElementByClass('shock').innerHTML = '<img src="smileys/shock.gif"></img>';
    document.getElementByClass('bigsmile').innerHTML = '<img src="smileys/bigsmile.gif"></img>';
    document.getElementByClass('confused').innerHTML = '<img src="smileys/confused.gif"></img>';
    document.getElementByClass('sad').innerHTML = '<img src="smileys/sad.gif"></img>';
    document.getElementByClass('angry').innerHTML = '<img src="smileys/angry.gif"></img>';
    document.getElementByClass('clown').innerHTML = '<img src="smileys/clown.gif"></img>';
    document.getElementByClass('blush').innerHTML = '<img src="smileys/blush.gif"></img>';
    if(location.hash !="#");
    {
        location = "#";
        location.reload(true);
    }
    alert("A-OK");
}); 
```

因此，在编辑时我们可以简单地将`<smiley class="happy"></smiley>`. 我知道笑脸不是真正的标签，但我不认为它会有所作为，因为我以前见过“假标签”。我尝试将笑脸标签更改为，`<div class="happy"></div>`但这也不起作用。在脚本的最后，我放了一个刷新函数。

无论如何，脚本不起作用。它被调用，但不起作用。所以我通过 Firebug 运行它。Firebug 给出了以下消息：

```
SyntaxError: missing ) after argument list
[Break On This Error]   
(22 out of range 21) 
```

然后我查看了脚本，好吧，所有的 ) 似乎都在那里。不仅如此，第 22 行之前的笑脸也不起作用。

无论如何。任何想法为什么：1）笑脸没有出现？2) 脚本没有被完全执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T14:21:50.827

有时 javascript 错误有点误导，但至少可以在您的代码中发现一个语法错误：

```
 if(location.hash !="#");{ 
```

有一个额外的`;`。也许这就是原因。

顺便说一句，既然您无论如何都在使用 jQuery，为什么不将它用于元素选择和 html 内容设置呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T14:22:57.433

在您链接到的脚本中，第 19 行：

```
if(location.hash !="#");{ 
```

那个分号不应该在那里。（顺便说一句，`if`块内的行应该缩进）

此外，没有`document.getElementsByClass`, only`document.getElementsByClassName`和返回 NodeList 而不是单个元素这样的东西（因此更改它`innerHTML`不会有太大作用。）

其他注意事项：

*   在您的网站中，您包含`css/stylesheet.css`两次（第 4 行和第 12 行），实际上是 3 次，如果您计算 iframe 内的那个。

*   您使用的 jquery 版本已经过时了，在这种情况下包含 jquery 是不合理的——您只是用它`$(document).ready`来做`window.onload`一个，或者只是将脚本放在靠近`</body>`

*   正如评论中所说，我完全同意，不要只是在这些元素中粘贴图像。添加适当的 CSS 类，并让 CSS 处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T14:49:41.513

您应该立即修复的几件事是调用不存在的方法和杂散分号。第一个是您对 的调用`getElementByClass`，它是单数而不是复数。其次，这里有一个不合适的分号：`if(location.hash !="#");`.

由于您使用的是 jQuery，因此我鼓励您避免使用类似 的本机方法`getElementsByClass`，因为在某些较旧的浏览器中不存在这种方法。相反，尝试这样的事情：

```
var emoticons = ["happy","star","dead","yawn"];

$(document).ready(function () {
    $.each(emoticons, function (index, value) {
        $("<img>", {src: "smileys/" + value + ".gif"}).appendTo("." + value);
    });
});​ 
```

请注意，我们不会一遍又一遍地为每个表情符号重复自己。我鼓励您研究精灵，因为它们通常可以更好地解决此类问题。但那是另一天。

演示：http: [//jsfiddle.net/yRSF9/](http://jsfiddle.net/yRSF9/)

# php - cronjobs 不工作

> ID：14003582
> 
> 赞同：0
> 
> 时间：2012-12-22T14:18:57.523
> 
> 标签：php, unix, cron, crontab

在过去的几个小时里，我一直在努力让我的 cronJobs 工作。相信我，我用谷歌搜索了所有内容，甚至在 stackoverflow 上进行了搜索，但不知何故，我看到的代码没有按预期工作。这就是我在这里发帖的原因。

我在 SSH 中这样做：

```
crontab -e 
```

然后我编辑我的 cronjob 列表并添加：

```
MAILTO=myemail@serv.com
*   *   *   *   *   wget -q "http://www.mywebsite.com/path/to/cronJob.php" 
```

我的电子邮件没有收到带有 PHP 响应的回复。如果我从浏览器调用 PHP 会有一个输出，但我的电子邮件没有收到任何内容，但如果我在 cronJob 中输入错误，例如删除最后的引号，我会收到包含错误的电子邮件。

然后我按 CTRL+X ，我保存，然后我重新启动 nginx，什么也没有。

我检查了一下`crontab -l`，cronjobs在那里。

我想做的就是每 1 分钟从我的网站上创建一个 URL。如果我从浏览器调用 URL，它似乎可以工作。

我有 UBUNTU 和 nGinx

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:23:50.553

使用`-O -`.

问题是默认情况下，wget 会将其结果保存到文件中。您希望将内容转储到标准输出。

这意味着您还必须清理所有`cronJob.php.*`文件的工作目录；）

所以：

```
* * * * * wget -q -O - "http://www.mywebsite.com/path/to/cronJob.php" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:10:50.510

发现了问题。我的代码中有这个：require_once($_SERVER['DOCUMENT_ROOT'].'/something/cronJob.php')。

显然 $_SERVER['DOCUMENT_ROOT'] 是空的。

所以我使用以下方法解决了这个问题：

$path = str_replace('/something/cronJob.php','',$_SERVER['PHP_SELF']);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T14:25:04.050

以下是找出问题所在的几个步骤：

1.  制作脚本`MAILTO=myemail@serv.com`应该在该脚本中，而不是在 crontab 中
2.  该脚本是否可以从命令行运行？
3.  是否`crontab`具有相同的环境变量

# visual-studio-2010 - 寻找有关使用 Visual Studio 2010 设置 Bitbucket 的教程

> ID：14003585
> 
> 赞同：5
> 
> 时间：2012-12-22T14:19:39.593
> 
> 标签：visual-studio-2010, version-control, mercurial, bitbucket

我是分布式源代码控制系统的新手，之前只使用过 SourceSafe。我非常渴望使用 Bitbucket.org 作为我的源代码的存储库，我的 IDE 是 VS 2010。我正在寻找一个教程来设置和使用 Bitbucket 与 VS，但我检查的任何教程（包括下面的链接）都是过时的并且其中提到的说明不存在和/或与 Visual HG 和 Tortorise HG 的当前版本不兼容。

[http://www.basarat.com/2011/01/setting-up-mercurial-repository-with.html](http://www.basarat.com/2011/01/setting-up-mercurial-repository-with.html)

[http://blog.ahmadhirbawi.net/blog/post/2010/10/30/Online-Source-Control-Bitbucket-Mercurial-and-Microsoft-Visual-Studio-20082010-Integration.aspx](http://blog.ahmadhirbawi.net/blog/post/2010/10/30/Online-Source-Control-Bitbucket-Mercurial-and-Microsoft-Visual-Studio-20082010-Integration.aspx)

[https://groups.google.com/forum/?fromgroups=#!topic/bitbucket-users/-bTm5YX3bdE](https://groups.google.com/forum/?fromgroups=#!topic/bitbucket-users/-bTm5YX3bdE)

您能否推荐一些将 Bitbucket 与 VS 2010 结合使用的更新材料？

# html - Html 无效验证

> ID：14003588
> 
> 赞同：1
> 
> 时间：2012-12-22T14:20:08.067
> 
> 标签：html, html-lists

所以我对 HTML 很陌生，我正在用 html 5 让自己成为一个简单的网站，我正在验证以检查错误，我得到了这个：

在这种情况下，不允许元素 div 作为元素 ul 的子元素。（抑制来自该子树的更多错误。）`<div class="home"><a href="sitename/"><li>Home</a></li></div>`

这是代码：

```
<ul>
    <div class="home"><a href="sitename/"><li>Home</a></li></div>
    <div class="About"><a href="#"><li>About</a></li></div>
    <div class="Contact"><a href="#"><li>Contact</a></li></div>
    <div class="empty"><a href="#"><li>   </a></li></div>
</ul> 
```

我该怎么做才能修复错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:23:48.243

很明显

1.第 15 行，第 22 列：在此上下文中，不允许元素 div 作为元素 ul 的子元素。（抑制来自该子树的更多错误。）

```
 <div class="home"><a href="http://rexnoz.zxq.net/"><li>Home</a></li></div> 
```

2.Error Line 15, Column 67: End tag a 违反嵌套规则。

```
 <div class="home"><a href="http://rexnoz.zxq.net/"><li>Home</a></li></div> 
```

3.错误第15行，第67列：上次错误后无法恢复。任何进一步的错误都将被忽略。

```
 <div class="home"><a href="http://rexnoz.zxq.net/"><li>Home</a></li></div> 
```

2,3点是你从`div`里面开始`li`并关闭`li`拳头应该是`div`

[来自 w3c](http://validator.w3.org/check?verbose=1&uri=http://rexnoz.zxq.net/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T15:30:19.680

应该

`<div><li><a>Home</a></li></div>`

# javascript - JavaScript Ajax 查询和 Smarty 出错

> ID：14003592
> 
> 赞同：0
> 
> 时间：2012-12-22T14:20:53.287
> 
> 标签：javascript, html, ajax, smarty

我正在尝试使用 AJAX JSONP 查询从我在 Cloudant 上托管的 CouchDB 读取文档。

[这](http://tox.sinaiem.org/poll.php)是网页。以下是相关代码部分。

```
<script type="text/javascript">
var url = "https://acharya.cloudant.com/toxtweet";
console.log(url);
function getCloudantData(url) {
        $.ajax({
          'url': url, 
          'dataType': 'jsonp'
        }, 
        function (data) { 
          $('#importeddata').text(data);
        });
}
</script> 
```

但是，当我将此脚本标签放入该网页时，我只是得到一个空白网页，我不知道为什么。我什至没有调用该函数，JSLint 说没有语法错误。

**模板 HTML 文件**

```
{extends file='toxtweet.tpl'}
{block name="head"}
   <link href="./styles/poll.css" rel="stylesheet" type="text/css" media="Screen">
   <script type="text/javascript">
           var url = "https://acharya.cloudant.com/toxtweet";
           console.log(url);
       $(function(){
          $.ajax({
           'url': 'https://acharya.cloudant.com/toxtweet', 
           'dataType': 'jsonp', 
            success:function (data) { 
             $('#ing').text(data); 
          }});});
     </script>
 {/block}
 {block name="body"}
 <h2> Do you think this tweet is discussing drugs? </h2>
     <form class="poll" method="post" actions="">
     <p id="chosen-tweet"><p>
     <ul>
    {foreach $answers as $answer}
        <li>
            <label class="poll_active">
                <input type="radio" name={$answer} value="0">{$answer@key}
            </label>
        </li>
    {/foreach}
</ul>
</form>
<div id="ing"></div>
 {/block}
 {debug} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:48:53.350

没有版本[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)支持第二个参数作为回调..（*该语法仅适用于[简写版本](http://api.jquery.com/category/ajax/shorthand-methods/)，如`$.get()`, `$.post()`, `$.getJSON`..*）

`$`另请注意，您正在使用 jquery 方法，如果您在此代码段之前没有加载 jquery，如果未定义，它将停止 javascript 执行。

利用

```
<script type="text/javascript">
function getCloudantData(url) {
    $.ajax({
        'url': 'https://acharya.cloudant.com/toxtweet', 
        'dataType': 'jsonp', 
        success:function (data) { 
            $('#importeddata').text(data); 
        }
    });
}
</script> 
```

# extjs - EXTJS 3.4 面板中的项目对齐问题

> ID：14003593
> 
> 赞同：1
> 
> 时间：2012-12-22T14:20:59.197
> 
> 标签：extjs, extjs3

团队我在 ext js 面板中的项目对齐方面面临两个问题。我正在使用 extjs 3.4 版。

基本上我想在每行中水平对齐两个面板文本框，但到目前为止，每行只有一个。

此外，面板和第一个文本框之间似乎没有空间。有什么方法可以在 EXTJS 3.4 中做到这一点

代码 ：

```
<html>
<head>
<title>Hello World Window</title>
<link rel="stylesheet" type="text/css" href="ext-3.4.0/resources/css/ext-all.css" />
<script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext-3.4.0/ext-all.js"></script>
</head>

<body>
<script type="text/javascript">

    Ext.onReady(function(){
        var tab2 = new Ext.FormPanel({
            labelAlign: 'left',
            labelStyle: 'font-weight:bold;',
            labelWidth: 85,
            title: 'formname',
            bodyStyle:'padding:5px',
            scrollable:'true',
            border:'true',
            width: 1200,
            height:600,
            items: [{
                xtype:'panel',
                height:200,
                autoScroll:true,            
                defaults: {flex: 1, layout: 'form', border: false},
                layout:'hbox',
                items:[{
                title:'Personal Details',
                defaultType: 'textfield',   
                    items: [

                        {   
                            fieldLabel: 'First Name',
                            name: 'first',
                            width:200,
                            allowBlank:false,
                            value: 'Jack'
                        },{
                            fieldLabel: 'Last Name',
                            name: 'last',
                            width:200,
                            value: 'Slocum'

                        },{ 
                            xtype:'combo',
                            fieldLabel: 'Company',
                            name: 'company',
                            width:200,
                            value: 'Ext JS'
                        }, {
                            fieldLabel: 'Email',
                            name: 'email',
                            width:200,
                            vtype:'email'
                        }]

                }]
                }],
            buttons: [{
            text: 'Save'
            },{
            text: 'Cancel'
            }]
        });

    tab2.render(document.body); 

});
</script> 

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:06:50.963

IMO 最简单的方法是通过 CSS 使用`FormLayout`和修改定位。中的每个字段`FormLayout`都包含在 中`div.x-form-item`，因此您可以`float: left`为其设置样式。如果将字段的宽度调整为面板的宽度，这就是您需要做的一切。否则，您将不得不`clear: left`在第二个字段上进行设置。

工作样本：http: [//jsfiddle.net/wC5hZ/2/](http://jsfiddle.net/wC5hZ/2/)

你也可以使用`TableLayout`，但它会是更多的代码。

# jquery - 如何将 jquery Lightbox_me 默认登录按钮值更改为关闭

> ID：14003596
> 
> 赞同：0
> 
> 时间：2012-12-22T14:21:21.223
> 
> 标签：jquery, css

我正在使用 www.buckwilson.me/lightboxme 插件......在应用代码和弹出工作完美之后。但问题是我无法更改登录按钮的默认值

我的显示器

![在此处输入图像描述](../Images/d0052a77c2e95f9dc8fb56c5aabecbfb.png)

需要显示（此示例使用 ms paint 编辑）

![在此处输入图像描述](../Images/34106f59e32472f5ffc81dfb4578c015.png)

完整代码

```
 <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="jquery.lightbox_me.js" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">

    $(document).ready(function() {

         $(function() {

                $('#try-1').click(function(e) {
                    $("#sign_up").lightbox_me({centered: true,closeClick:false, onLoad: function() {
                        $("#sign_up").find("input:first").focus();
                    }});

                    e.preventDefault();
                });

            });

    });

</script>

<link rel="stylesheet" href="popup.css" type="text/css" media="screen" title="no title" charset="utf-8">

<div id="sign_up" style="display: none; left: 50%; margin-left: -223px; z-index: 1002; position: fixed; top: 50%; margin-top: -159px;"> <br/>
  <div class="announcement">Important Announcement!!!</div>
  <div id="home_sign_up_form"> To keep updating! Like our Fabebook page ,Follow us on Twitter, Google+ or Subscribe RSS Feed.<br/><br/>

            <div style="float:left; margin-left:20px;">

                  <div id="actions">
                    <a id="log_in" class="close form_button sprited" href="#">Close</a>
                  </div>
            </div>

    </div>

  <a id="close_x" class="close sprited" href="#" title="Close">Close</a> </div>

<input type="button" value="Add Item" id="try-1" onClick="" /> 
```

CSS 代码

```
* {
    margin: 0;
    padding: 0;
    font-size: 1em;
    text-decoration: none;
    /*border: none;*/
    /*list-style: none;*/
    outline: none;
}
.sprited {
    background: url('download_sprite.png') no-repeat;
    line-height: 1000px;
    overflow: hidden;
    display: block;
}
.try {
    width: 93px;
    height: 31px;
    background-position: -30px -156px;
}
.try:hover {
    background-position: -30px -187px;
}
.try:active {
    background-position: -30px -218px;
}
h2 {
    margin-top: 50px;
}
#sign_up {
    -moz-border-radius: 6px;
    background: #eef2f7;
    -webkit-border-radius: 6px;
    border: 1px solid #536376;
    -webkit-box-shadow: rgba(0, 0, 0, .6) 0px 2px 12px;
    -moz-box-shadow:  rgba(0, 0, 0, .6) 0px 2px 12px;
    ;
    padding: 14px 22px;
    width: 400px;
    position: relative;
    display: none;
    font: 13px/20px "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: #536376;
}
#sign_up a {
    color: #067dd7;
}
#sign_up a:hover {
    text-decoration: underline;
}
#sign_up #sign_up_form {
    margin-top: 13px;
}
#sign_up label {
    display: block;
    margin-bottom: 10px;
    color: #536376;
    font-size: .9em;
}
#sign_up label input {
    display: block;
    width: 393px;
    height: 31px;
    background-position: -201px 0;
    padding: 2px 8px;
    font-size: 1.2em;
    line-height: 31px;
    border: none;
}
#see_id {
    width: 228px;
    height: 23px;
    background-position: -202px -133px;
}
#left_out {
    background-position: -202px -158px;
    width: 113px;
    height: 16px;
}
#sign_up_form {
    position: relative;
    background: url('divider.png') repeat-x bottom left;
    padding-bottom: 54px;
    margin-bottom: 12px;
}
#actions {
    float: left;
    position: absolute;
    right: 0;
    height: 31px;
    bottom: 20px;
}
a.form_button {
    float: left;
    width: 93px;
    height: 31px;
    margin-right: 15px;
}
#cancel {
    background-position: -198px -36px;
}
#log_in {
    background-position: -291px -36px;
}
#cancel:hover {
    background-position: -198px -67px;
}
#cancel:active {
    background-position: -198px -98px;
}
#log_in:hover {
    background-position: -291px -67px;
}
#log_in:active {
    background-position: -291px -98px;
}
#close_x {
    width: 24px;
    height: 23px;
    overflow: hidden;
    line-height: 1000px;
    display: block;
    position: absolute;
    top: 5px;
    right: 5px;
    background-position: -387px -102px;
}
#usage {
    background-position: -323px -172px;
    width: 67px;
    height: 22px;
}

.log_in_button {
    float: left;
    width: 93px;
    height: 31px;
    margin-right: 15px;
    border:none;
    cursor: pointer;
}

.announcement{
    height:30px;    
    font-weight:bold;
    font-size:16px;
}

#home_sign_up_form {
    margin-top: 13px;
    position: relative; 
    padding-bottom: 54px;
    margin-bottom: 12px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:37:39.323

为此，您需要设置按钮样式，请尝试在下面将类添加`button_example`到按钮

```
.button_example{
border:1px solid #7d99ca; -webkit-border-radius: 3px; -moz-border-radius: 3px;border-radius: 3px;font-family:arial, helvetica, sans-serif; padding: 10px 10px 10px 10px; text-shadow: -1px -1px 0 rgba(0,0,0,0.3);font-weight:bold; text-align: center; color: #FFFFFF; background-color: #a5b8da;
 background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #a5b8da), color-stop(100%, #7089b3));
 background-image: -webkit-linear-gradient(top, #a5b8da, #7089b3);
 background-image: -moz-linear-gradient(top, #a5b8da, #7089b3);
 background-image: -ms-linear-gradient(top, #a5b8da, #7089b3);
 background-image: -o-linear-gradient(top, #a5b8da, #7089b3);
 background-image: linear-gradient(top, #a5b8da, #7089b3);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#a5b8da, endColorstr=#7089b3);
}

.button_example:hover{
 border:1px solid #5d7fbc; background-color: #819bcb;
 background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#819bcb), color-stop(100%, #536f9d));
 background-image: -webkit-linear-gradient(top, #819bcb, #536f9d);
 background-image: -moz-linear-gradient(top, #819bcb, #536f9d);
 background-image: -ms-linear-gradient(top, #819bcb, #536f9d);
 background-image: -o-linear-gradient(top, #819bcb, #536f9d);
 background-image: linear-gradient(top, #819bcb, #536f9d);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#819bcb, endColorstr=#536f9d);
} 
```

[**jsfiddle**](http://jsfiddle.net/HCk4R/)只是根据你编辑颜色

# java - 如何检索 smooks 生成的 java 对象

> ID：14003598
> 
> 赞同：0
> 
> 时间：2012-12-22T14:21:32.053
> 
> 标签：java, smooks

简而言之：我有 java.io.InputStream ，其中包含带有大量子元素的 json。处理完成后，以下调用为我提供了完全填充的集合：`smooks.filterSource(exCtxt, new StreamSource(inputStream), javaResult)`.

如何在每个子元素上即时检索对象？（例如通过回调）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:56:02.027

如果有人需要，我用 Smooks 做对象流：

```
smooks.addVisitor(new SAXVisitAfter() {
        @Override
        public void visitAfter(SAXElement element,
                ExecutionContext executionContext) throws SmooksException,
                IOException {
            MyElement element = (MyElement) executionContext.getBeanContext()
                    .getBean("myElement");
            // send 'element' here;
        }
    }, "root/element"); 
```

# javascript - 按标签名称删除元素

> ID：14003606
> 
> 赞同：26
> 
> 时间：2012-12-22T14:23:35.293
> 
> 标签：javascript

> **可能重复：**
> [在多个元素上使用 remove()](https://stackoverflow.com/questions/12489364/use-remove-on-multiple-elements)

我正在尝试删除标签名称为“label”的所有元素。我有以下代码。它在某种程度上有效，但它只删除了 1 个标签。剩下的5个还在。如何更改代码以删除所有“标签”标签？

```
element = document.getElementsByTagName("label");
for (index = 0; index < element.length; index++) {
    element[index].parentNode.removeChild(element[index]);
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-22T14:26:48.297

```
var element = document.getElementsByTagName("label"), index;

for (index = element.length - 1; index >= 0; index--) {
    element[index].parentNode.removeChild(element[index]);
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-22T14:31:20.683

问题是`document.getElementsByTagName()`返回 a `NodeList`，而不是 a `Array`。当`NodeList`您从位于`NodeList`. 因此，当您删除第一个元素时，新的第一个元素`NodeList`会变得更短，并且*新*的第一个元素占用`index`0。`index`因此，在循环中更新会使您至少错过一个元素，可能更多取决于结果的长度。

尝试这样的事情：

```
var elements = document.getElementsByTagName('label')
while (elements[0]) elements[0].parentNode.removeChild(elements[0]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-22T14:31:11.303

当您从文档中删除节点时，您刚刚获得的节点列表`getElementsByTagName()`也会更新以避免延迟引用，因此您应该继续删除第一个节点，直到没有节点为止。

```
var nodes = document.getElementsByTagName("label");

for (var i = 0, len = nodes.length; i != len; ++i) {
    nodes[0].parentNode.removeChild(nodes[0]);
} 
```

这里， 的值`nodes.length`被缓存；否则它会继续减少，你最终只会删除一半:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T14:34:47.150

“问题”是`.getElementsByTagName()`返回一个*Live NodeList*。因此，当您删除头部（第一个）条目时，尾部会填满并向左*移动，可以这么说。*

它不是一个真正的*Javascript 数组*，它可以按预期工作。要创建这样一个*冻结的数组*，我们可以像

```
var element = Array.prototype.slice.call(document.getElementsByTagName("label"),0); 

for (var index = 0, len = element.length; index < len; index++) {
    element[index].parentNode.removeChild(element[index]);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-22T15:39:23.843

为什么不使用 jQuery？然后就是简单

```
$("label").remove(); 
```

# paypal - 在商业网站中添加网上银行和借记卡作为支付选项

> ID：14003607
> 
> 赞同：2
> 
> 时间：2012-12-22T14:23:41.037
> 
> 标签：paypal, onlinebanking

现在，网站为用户提供了大量的支付选项（例如 yebhi.com jabong.com snapdeal.com），例如网上银行（当用户选择此选项时，他会获得该国家/地区的银行列表，然后他选择特定银行并进行付款），借记卡。我想将这两个选项集成到我的网站中。我想信用卡支付选项可以用贝宝小部件完成。谁能帮我这个。？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-06T17:35:50.907

使用支付网关将支付选项添加到网站。他们每个人都有自己的特点和佣金率。快速了解最受欢迎的网关。以下也是wikihow中关于将支付网关集成到网站的链接

[http://www.wikihow.com/Integrate-a-Payment-Gateway-Into-a-Website](http://www.wikihow.com/Integrate-a-Payment-Gateway-Into-a-Website)

Enets – www.enets.com

联款通 – www.asiapay.com

GT 支付 – www.gtpayment.com

贝宝 - www.paypal.com

WorldPay – www.worldpay.com

2Checkout – www.2checkout.com

Globalcollect – www.globalcollect.com

# c# - 如何在 C# 中捕获和处理来自 WebView 组件的异常？

> ID：14003608
> 
> 赞同：0
> 
> 时间：2012-12-22T14:23:46.023
> 
> 标签：c#, microsoft-metro, windows-store

如何从 C# 中的组件中捕获异常（例如冒泡的 javascript 错误）`WebView`，否则会导致应用程序崩溃 - 以便我可以处理/记录它们？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:29:57.307

在运行时，异常不会通过组件从网页中冒泡`WebView`- 只有在调试时，如果在选项菜单中为“脚本”选择了即时编译。

要在调试时阻止异常冒泡，请转到工具->选项->调试->即时并取消选中“脚本”

来源：http: [//blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN10](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN10)

# oauth - Google 在使用 Loginza 登录时返回新的身份字符串

> ID：14003621
> 
> 赞同：0
> 
> 时间：2012-12-22T14:25:10.223
> 
> 标签：oauth, openid, google-oauth

有一个使用 Loginza 进行登录和注册的网站。对于它存储身份的每个用户 - 对于谷歌来说，它是：

[https://www.google.com/accounts/o8/id?id=AItOawmyGLT0M1aDf_CCysqh2EPhwq5o_avd4EU](https://www.google.com/accounts/o8/id?id=AItOawmyGLT0M1aDf_CCysqh2EPhwq5o_avd4EU)

例如。

一年来一切都很好，但最近谷歌开始为注册用户返回新的不同身份（没有改变他们的谷歌账户）——所以他们被视为新人。

有人能解释一下为什么会这样吗？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:18:43.550

您想指定一个“openid.realm”参数。看到这两个

[http://openid.net/specs/openid-authentication-2_0.html#realms](http://openid.net/specs/openid-authentication-2_0.html#realms)

[https://developers.google.com/accounts/docs/OpenID#Parameters](https://developers.google.com/accounts/docs/OpenID#Parameters)

对于请求参数。它被列为可选，但如果你忽略它（不推荐），我们必须尝试从 return_to 参数中找出领域。

这是来自谷歌文档：

"这个值必须和openid.return_to中定义的域一致。如果没有定义这个参数，谷歌会使用openid.return_to中引用的URL。

在 Google 联合登录页面上使用 realm 的值来向用户识别请求站点。它还用于确定 Google 返回的持久用户 ID 的值。”

如果领域改变，用户的定向标识符将改变。

# zend-framework - 当我在 zend 框架中使用 toArray() 时出现致命错误

> ID：14003623
> 
> 赞同：0
> 
> 时间：2012-12-22T14:25:21.113
> 
> 标签：zend-framework, toarray

我需要帮助来消除`toArray()`zend 框架中的致命错误。

> 致命错误：在非对象上调用成员函数 toArray()

我在我的控制器中使用以下代码

```
$obj     = new Admin_Model_UserMapper();
$where   = array('id = ?'=>$decryptId);
$data    = $obj->fetchAll($where);
//  $currentData = $data->current();
$dataArr = $data->toArray();

$form = new Admin_Form_UserForm();
$form->setAction('edit-user');
$form->populate($dataArr); 
```

当我使用`toArray()`or时，我在这两种情况下都会遇到致命错误`current()`。

我已经使用了以下代码，但没有得到任何解决方案，它会产生相同的错误：

```
$db = Zend_Db_Table::getDefaultAdapter();
$select = $db->select()->from('user')->where('id= ?',$decryptId);
$stmt = $select->query();
$result = $stmt->fetchAll();
if(count($result) > 0){
    $dataArr = $result->toArray();
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T05:40:35.093

您`fetchAll`没有返回任何数据。把它包在一个条件...

```
$where = array('id = ?'=>$decryptId);
$data  = $obj->fetchAll($where);
if ($data->count()){
    //  $currentData = $data->current();
    $dataArr = $data->toArray();
}else{
    // no records found!
} 
```

问题在于您的`$where`，您不能像键/值数组一样使用它。使用下面的代码：

```
$where = $this->getAdapter()->quoteInto('id = ?', $decriptId); 
```

# spring - 什么是面向方面的编程？

> ID：14003625
> 
> 赞同：-1
> 
> 时间：2012-12-22T14:25:43.250
> 
> 标签：spring

我想向刚接触 Spring 编程的人解释一下 Spring AOP。有人可以帮我找到面向方面编程的真实示例吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-22T14:40:54.637

主要是一个无用的技术：主要应用是在每个方法的开头**自动**添加一个日志语句。
理论上的应用是出于任何原因自动添加代码。

**缺点**
Apsects 修改字节码并添加源代码中不可见的内容。这给其他工具（如测试覆盖率计算）带来了很大的问题，然后给出了错误的测试覆盖率。
它进一步介绍：你看到的不是你得到的。

最好远离那个。这增加了我们项目的成本而没有任何好处，我们终于在两年后将其移除，现在更快乐了。

# c - 如何更改函数中的 int 数组

> ID：14003626
> 
> 赞同：4
> 
> 时间：2012-12-22T14:26:01.843
> 
> 标签：c, arrays, function

我是 c 语言的新手，我在尝试使用另一个函数更改我的主函数上的数组时遇到了困难。除了查看解决方案之外，我还想获得完整的解释，我的代码有什么问题以及对您的解决方案的解释是什么。

好的，所以我做了太多的试验和错误实验，但没有成功解决我的问题。最终这是我当前的代码：

```
#include <stdio.h>
#define MAX 20
typedef int Values[MAX];

int changeArr(Values *vals2) 
{
    *vals2[0] = 200;
    *vals2[1] = 100;
    printf("%d and ", *vals2[0]);
    printf("%d\n", *vals2[1]);
    return 0;
}   

int main (int argc, char *argv[]) 
{
    Values vals;
    changeArr(&vals);
    printf("%d and ", vals[0]);
    printf("%d\n", vals[1]);
    return 0;
} 
```

输出是：

```
200 and 100
200 and 0 
```

代替：

```
200 and 100
200 and 100 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T14:29:57.783

版本 1：

```
#include <stdio.h>
#define MAX 20
typedef int Values[MAX];

int changeArr(int vals2[]) {
    vals2[0] = 200;
    vals2[1] = 100;
    printf("%d and ", vals2[0]);
    printf("%d\n", vals2[1]);
    return 0;
}   

int main (int argc, char *argv[]) {

    Values vals;
    changeArr(vals);
    printf("%d and ", vals[0]);
    printf("%d\n", vals[1]);
    return 0;

} 
```

不要将指针传递给数组，而是将指针传递给数组的第一个元素。

版本 2：

```
#include <stdio.h>
#define MAX 20
typedef int Values[MAX];

int changeArr(Values *vals2) {
    (*vals2)[0] = 200;
    (*vals2)[1] = 100;
    printf("%d and ", (*vals2)[0]);
    printf("%d\n", (*vals2)[1]);
    return 0;
}   

int main (int argc, char *argv[]) {

    Values vals;
    changeArr(&vals);
    printf("%d and ", vals[0]);
    printf("%d\n", vals[1]);
    return 0;

} 
```

使用括号来补偿优先级。

您的代码中的问题是

```
*vals2[1] 
```

是，所以它在传递的指针之后`*(vals2[1])`取消引用一个指针。`Values`您没有在那里分配可访问的内存，因此这是未定义的行为。在实践中，它与访问相同

```
arr[1][0] 
```

为

```
int arr[2][MAX]; 
```

但你`vals`只是（相当于）一个`int arr[1][MAX];`，所以你访问越界。但是，如果没有更糟的情况发生，则`*vals2[1] = 100;`设置`changeArr`为`vals[MAX]`100。`main`不过，它可能会覆盖一些重要的东西。

在`int changeArr(Values *vals2)`您传递一个指向`MAX` `int`s 数组的指针时，分别是 .s 数组中的第一个这样的数组`Values`。然后`vals2[1]`是该数组中的第二个数组`Values`（此处不存在），以及第二个数组中`*vals2[1] == vals2[1][0]`的第一个`int`。您想要修改指向内存块中第一个（也是唯一一个）数组的元素，因此您想要访问`vals2[0][1]`，或等效地访问`(*vals2)[1]`。

照片：

```
vals2                          vals2[1]
 |                               |
 v                               v
|vals[0]|vals[1]|...|vals[MAX-1]|x 
```

中`changeArr`，指针`vals2`指向数组`vals`。因为它是指向 an 的指针，所以指向 a`int[MAX]`开始`vals2+1`之后的字节`int[MAX]`偏移量（就在 的结尾之后）。，或等效地，是紧随其后的数组（不存在）。`MAX*sizeof(int)``vals``vals``vals2[1]``*(vals2 + 1)``vals`

您想更改`vals[1]`位于数组中的字节`vals2[0]`偏移量，因此您需要或等效地更改.`1*sizeof(int)``vals2[0][1]``(*vals2)[1]`

# c++ - STL 算法：为什么没有额外的容器接口（除了迭代器对）？

> ID：14003627
> 
> 赞同：18
> 
> 时间：2012-12-22T14:26:14.613
> 
> 标签：c++, stl, c++11, overloading, stl-algorithm

我想知道为什么 STL 不会重载它们的算法函数，这样我就可以通过简单地提供一个容器而不是采用更冗长的方式来传递 begin + end 迭代器来调用它们。我当然理解为什么我们还想使用迭代器对来处理容器/数组的子序列，但是，几乎所有对这些方法的调用都使用了整个容器：

```
std::for_each(myVector.begin(), myVector.end(), doSomething); 
```

我会发现只写更方便，可读性和可维护性

```
std::for_each(myVector, doSomething); 
```

STL 不提供这些**重载**是否有原因？[编辑：我不是要用这个受限制的接口替换接口，而是要*提供*一个基于容器的 iterface！] 他们会引入歧义吗？我正在考虑这样的事情：

```
template<typename _Container, typename _Funct>
inline _Funct for_each(_Container c, _Funct f) {
    return for_each(begin(c), end(c), f);
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-22T15:18:57.780

它们**确实**为许多算法引入了歧义。很多`<algorithm>`样子

```
template<class iterator>
void do_something(iterator, iterator);

template<class iterator, class funct>
void do_something(iterator, iterator, funct); 
```

如果添加额外的重载

```
template<class container, class funct>
void do_something(container, funct); 
```

编译器将很难弄清楚是什么`do_something(x, y)`意思。~~如果`x`和`y`相同`type`，它将同时匹配`iterator = type`和`container = type, funct = type`。~~^(*))

C++11 试图用能够识别容器和迭代器之间区别的[“概念”来解决这个问题。](https://stackoverflow.com/questions/1252841/what-are-concepts)然而，事实证明这些“概念”过于复杂，无法将其纳入标准，因此这些重载也没有。

^(*)) *编译器在这里不同意，Comeau 编译器声称它是模棱两可的，g++ 4.5 和 MSVC 10 调用第一个函数。*

* * *

在评论中进行了非常长时间的讨论之后，这是一个无法按预期工作的示例 - 使用也可以兼作谓词的容器适配器。

```
#include <iostream>
#include <vector>

template<class iterator>
void test(iterator, iterator)
{
   std::cout << "test iterator\n";
}

template<class iterator, class predicate>
void test(iterator, iterator, predicate)
{
   std::cout << "test iterator, predicate\n";
}

template<class container, class predicate>
void test(const container& cont, predicate compare)
{
   std::cout << "test container, predicate\n";

   test(cont.begin(), cont.end(), compare);
}

template<class container>
class adapter
{
public:
   typedef typename container::iterator   iterator;

   adapter(container* cont) : cont(cont)
   { }

   iterator begin() const
   { return cont->begin(); }

   iterator end() const
   { return cont->end(); }

   bool operator()(const iterator& one, const iterator& two)
   { return *one < *two; }

private:
   container* cont;
};

int main()
{
   std::vector<int>   v;

   adapter<std::vector<int>>   a(&v);

   test(a, a);

} 
```

输出：

> 测试迭代器

[http://ideone.com/wps2tZ](http://ideone.com/wps2tZ)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-22T14:37:08.613

不幸的是，这是一个更普遍的问题。也就是说，迭代器旨在击败那些蹩脚的 C API 和 Java 风格的“将算法作为每个单独容器的方法”的解决方案。它们是第一代通用解决方案，毫无疑问，经过反思，它们不如我们花了 20 年思考后获得的其他可能的通用解决方案好。

添加这些容器重载只是解决问题空间的一小部分。它甚至可能在未来让事情变得更糟。解决方案是范围，C++ 正在寻求尽快引入范围。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T14:45:57.663

要理解这一点，我认为必须了解 C++ 算法的哲学。我们先问这个问题：

**为什么 C++ 算法被实现为自由函数而不是成员函数？**

那么答案非常简单：避免实现爆炸。假设你有`M`容器和`N`算法，如果你将它们实现为容器的成员，那么就会有`M*N`实现。这种方法有两个（相关的）问题：

*   首先，它没有利用代码重用。大多数实现将被重复。
*   其次，实施爆炸，这是上述情况的直接后果。

C++ 通过将它们实现为自由函数来解决这些问题，因此您只有`N`实现。在容器上运行的每个算法都*采用*一对定义*范围*的迭代器。如果您想要采用容器的重载，而不是一对迭代器，那么标准必须为每个算法提供这样的重载，并且会有一些`2*N`实现几乎违背了 C++ 将算法与容器分离的目的首先，这些功能中有一半没有做另一半做不到的事情。

所以我认为这不是什么大问题。只是为了避免**一个**单一的参数，为什么要实现`N`更多的功能（这也对其使用施加了一些*限制*，例如您不能将*指针*传递给它）？但是，如果程序员想要在他们的实用程序中使用这样的函数，他们可以随时与基于标准算法的许多其他函数一起实现它们！

* * *

你评论说：

> 好吧，2*N 实现实际上只有 N 个实现。其他 N 个是内联重载，它们直接调用算法的“真实”版本，因此它们只是标题。提供容器重载并不会破坏将算法与容器分离的目的，因为（如您在我的示例中所见）它们可以使用模板来处理所有类型的容器。

基于这种逻辑，人们可以很好地争论`M*N`算法。那么也让它们成为成员函数（并在内部调用自由函数）？我相信很多 OOP 人会更喜欢

```
auto result = container.accumulate(val); 
```

超过

```
auto result = std::accumulate(container.begin(), container.end(), val); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-01T03:41:20.197

这是 Herb Sutter 博客中的相关答案：[为什么没有基于容器的算法](http://herbsutter.com/2011/10/07/why-no-container-based-algorithms/)。它显示了反例，就像 Bo Persson 在上面的回答中所做的那样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-22T14:49:24.817

有一个[Range Operators 库](http://volnitsky.com/project/ro/)旨在解决这个问题。详细程度被削减了好几次。

您的示例将如下所示：

```
auto newVector = myVector * doSomething; 
```

是的，`doSomething`- 没有括号。

来自 shell 的熟悉习语（使用 std 算法）：

```
auto t = vector<int>{3,2,1,4} | sort | unique; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-15T01:46:32.223

应该指出的是，定义自己的琐碎包装器以添加容器化版本非常容易。

例如：

```
template<typename Container, typename Func>
Func for_each(Container& c, Func f) {
    return std::for_each(c.begin(), c.end(), f);
} 
```

现在您可以拨打您想要的简单电话。没有歧义，因为您的包装器不在 std 命名空间中。您可以定义采用 const Container& 的重载。如果您想要调用 C++-11 const 迭代器方法的版本（例如 cbegin()），我认为您需要以不同的方式命名包装器。我使用 for_each_const。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-22T19:31:20.967

显然，正如其他用户所提到的，这是一个棘手的问题，所以很遗憾已经很久了，标准库中仍然没有解决方案。但是，已经有可用的范围库，例如 Boost::Range 和 Adob​​e Source Libraries 中的一个，它们不仅提供了您在问题中描述的界面的简单性，而且还提供了一些更高级的功能。

您的示例与 Boost 完美配合（我们在`using namespace boost::range::adaptors`下面）：

`boost::for_each(myVector, doSomething);`

我们还可以`myVector`快速轻松地切片：

`boost::for_each(myVector | sliced(10, 20), doSomething)`

我们甚至可以`myVector`与另一个压缩，按谓词过滤，并在一个简单的语句中对结果对的每个其他元素进行采样（这需要您在 doSomethingElse 中解压缩由 生成的元组`boost::combined`）：

`boost::for_each( boost::combined(myVector, myOtherVector) | strided(2), doSomethingElse)`

# macos - 如何将 jQuery HTML 应用程序捆绑为 Mac OSX 应用程序？

> ID：14003635
> 
> 赞同：0
> 
> 时间：2012-12-22T14:27:45.800
> 
> 标签：macos, package

我用 Javascript 和 HTML 重新创建了我母亲在 C64 时代最喜欢的旧游戏之一，并使用 jQuery 使其成为跨浏览器。网络不可用时她可能想使用它，所以我将所有内容放在一个目录中。

我想以比普通 URL 或她 iMac 桌面上的快捷方式更精美的形式提供给她。

我试过手动创建应用程序结构，但这需要一个可执行文件；制作可执行脚本不起作用。我已经进行了 Google 搜索，但其他人都想为 iOS 或 Android 创建一个应用程序……我只需要一个用于 Mac OSX 桌面和扩展坞的应用程序。

我注定要提供 URL 快捷方式吗？啊。如何使用我的 HTML 和 Javascript 制作 Mac OSX .app？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:33:09.573

也许与[Cordova OSX](https://github.com/apache/cordova-osx)

这是 Mac 应用程序的 phonegap 版本

# java - 红黑树删除

> ID：14003638
> 
> 赞同：0
> 
> 时间：2012-12-22T14:27:54.693
> 
> 标签：java, tree, binary-tree, red-black-tree

我在编写红黑树删除函数（带有哨兵）时遇到了麻烦。

经过数小时的故障排除后，我得出的结论是，问题出现在以下步骤中：

插入 14、11、7 和 8，然后删除 11（即根）。

11 被替换为没有孩子的 14。然后，x（参见代码）获取 NULL 节点的值 - 这使得 x.parent 之类的函数变得毫无意义（对吗？）

然后程序在一个空异常中停止。

有什么想法有什么问题吗？

*我希望我已经把自己说清楚了——如果不是，我很乐意提供更多信息。

谢谢！

整个相关代码：

```
public class RBTree {

    private RBNode DUMMYROOT;
    private RBNode NULL;
    private int numOfNodes;

    public RBTree() {
        this.numOfNodes=0;
        this.NULL = new RBNode();
        this.DUMMYROOT = new RBNode();

        this.DUMMYROOT.setKey(Double.POSITIVE_INFINITY);
        this.DUMMYROOT.setLeftChild(NULL);
        this.DUMMYROOT.setColor("black");
        this.NULL.setColor("black");

    }

    public RBNode getNULL() {
        return this.NULL;
    }

  /**
   * public boolean empty()
   * 
   * returns true if and only if the tree is empty
   *  
   */

  public boolean empty() {
    if (this.numOfNodes==0)
        return true;
    return false;
  }

  /**
   * public boolean search(int i)
   * 
   * returns true if and only if the tree contains i
   *  
   */
  public boolean search(double i) {
      return (recursiveSearch(i, this.DUMMYROOT.getLeftChild())!=NULL);
  }

  public RBNode searchNode(double i) {
      return recursiveSearch(i, this.DUMMYROOT.getLeftChild());
  }

  private RBNode recursiveSearch(double i, RBNode rbNode) {
      if (rbNode==NULL)
          return NULL;
      else if (rbNode.getKey()==i)
          return rbNode;
      else if (rbNode.getKey()<i)
          return recursiveSearch(i,rbNode.getRightChild());
      else
          return recursiveSearch(i,rbNode.getLeftChild());
}

/**
   * public void insert(int i)
   * 
   * inserts the integer i into the binary tree; the tree
   * must remain valid (keep its invariants).
   * the function returns the number of color flips, or 0 if i was already in the tree
   * 
   */
  public int insert(int i) {
       RBNode rb = new RBNode(i);
       if (this.search((double)i)==false) {
           this.numOfNodes++;
           return RBTreeInsert(this,rb);
       }
       return 0;
  }

  private RBNode treePosition(RBNode x, double k) {
       RBNode y=x;
       while (x!=NULL) {
          y=x;
          if (x.getKey()==k)
              return x;
          else if (x.getKey()>k)
              x=x.getLeftChild();
          else
              x=x.getRightChild();
       }
       return y;
  }

  private int RBTreeInsert(RBTree t, RBNode z) {
       RBNode y;
       y=treePosition(t.DUMMYROOT,z.getKey());
       if (z.getKey()!=y.getKey()) {
           z.setParent(y);
           z.setLeftChild(NULL);
           z.setRightChild(NULL);
           z.setColor("red");
           if (z.getKey()<y.getKey())
               y.setLeftChild(z);
           else
               y.setRightChild(z);
       }
       return RBTreeInsertFixUp(z,t);
  }

   private int RBTreeInsertFixUp(RBNode node, RBTree t) {

       int counter =0;

       if(this.empty()==true)
               return counter;

       while(node.parent.color.equals("red")){
        if(node.parent == node.parent.parent.leftChild){
            RBNode y = node.parent.parent.rightChild;

            //case 1
            if(y.color.equals("red")){
                counter+=3;
                node.parent.setColor("black");
                y.setColor("black");
                node.parent.parent.setColor("red");
                node = node.parent.parent;
            }

            //case 2
            else {
                if(node == node.parent.rightChild) {
                    node = node.parent;
                    leftRotate(node, t);
                }
            //case 3
                counter+=2;
                node.parent.setColor("black");
                node.parent.parent.setColor("red");
                rightRotate(node.parent.parent, t);
            }

        }

        else {
            RBNode y = node.parent.parent.leftChild;

            //case 1
            if(y.color.equals("red")){
                counter+=3;
                node.parent.setColor("black");
                y.setColor("black");
                node.parent.parent.setColor("red");
                node = node.parent.parent;
            }

            //case 2
            else {
                if (node == node.parent.leftChild) {
                    node = node.parent;
                    rightRotate(node, t);
                }
            //case 3
                counter+=2;
                node.parent.setColor("black");
                node.parent.parent.setColor("red");
                leftRotate(node.parent.parent, t);
            }

        }
    }

    if(!(this.DUMMYROOT.leftChild.color.equals("black"))) {
        this.DUMMYROOT.leftChild.setColor("black");
        counter++;
    }

    return counter;

}

    private void rightRotate(RBNode node, RBTree t) {
            RBNode y = node.leftChild;
            Transplant(node, y);
            leftChild(node, y.rightChild);
            rightChild(y, node);
        }

    private void leftRotate(RBNode node, RBTree t) {
            RBNode y = node.rightChild;
            Transplant(node,y);
            rightChild(node, y.leftChild);
            leftChild(y,node);

            }

    private void Transplant(RBNode node, RBNode y) {
            if(node == node.parent.leftChild)
                leftChild(node.parent, y);
            else
                rightChild(node.parent,y);
        }

    private void rightChild(RBNode node, RBNode y) {
            node.rightChild =y;
            y.parent = node;

    }

    private void leftChild(RBNode node, RBNode y) {
            node.leftChild = y;
            y.parent = node;

        }

  /**
   * public void delete(int i)
   * 
   * deletes the integer i from the binary tree, if it is there;
   * the tree must remain valid (keep its invariants).
   * the function returns the number of color flips, or 0 if i was not in the tree
   * 
   */
   public int delete(int i)
   {
       if (this.search(i)==true) {
           //deletion will be made, so we decrease numOfNodes by 1
           this.numOfNodes--;
           return RBTreeDelete(this.searchNode(i),this);
       }
       return 0;
   }

   public int RBTreeDelete(RBNode deleteNode, RBTree tree){

       RBNode y;
       RBNode x;

       if(this.empty() == true)
           return 0;

       if(deleteNode.getLeftChild() == this.NULL || deleteNode.getRightChild() == this.NULL)
           y = deleteNode;
       else {
           y = TreeSuccessor(deleteNode); 

       }

       if(y.leftChild != NULL)
           x = y.leftChild;
       else
           x = y.rightChild;

       x.parent = y.parent;
       if(y.parent == NULL)
           DUMMYROOT.leftChild = x;
       else if(y == y.parent.leftChild)
           y.parent.leftChild = x;
       else
           y.parent.rightChild = x;

       if(y != deleteNode)
           deleteNode.key = y.key;

       if (y.color.equals("black")==true) 
               return RBDeleteFixUp(tree, x);

       return 0; //counter is 0, no color changes should be made. if me made any - they will be returned by "RBDleteFixUp"
   }

   private int RBDeleteFixUp(RBTree T, RBNode x) {
       //counts color changes
       int counter2= 0;
       boolean b=true;
       RBNode w = new RBNode();

       if(this.empty()==true)
           return counter2;

       while(((x != DUMMYROOT.leftChild)) &&  x.color.equals("black") && b==true){
           if(x == x.parent.leftChild){
               w = x.parent.rightChild;
               //case 1
               if(w.color.equals("red")){
                   System.out.println("1");

                   w.setColor("black");
                   counter2++;
                   x.parent.setColor("red");
                   counter2++;
                   leftRotate(x.parent, T);
                   w = x.parent.rightChild;
               }

               //case2

               if((w.rightChild.color.equals("black")) && (w.leftChild.color.equals("black"))){
                   System.out.println("2");
                   w.setColor("red");
                   counter2++;
                   x = x.parent;
               }

               //case 3
               else {
                   if(w.rightChild.color.equals("black")){
                       System.out.println("3");

                   w.leftChild.setColor("black");
                   counter2++;
                   w.setColor("red");
                   counter2++;
                   rightRotate(w, T);
                   w = x.parent.rightChild;

               }

               //case 4
                   System.out.println("4");
                        w.color = x.parent.color;
                        counter2++;
                        x.parent.setColor("black");
                        counter2++;
                        w.rightChild.setColor("black");
                        counter2++;
                        leftRotate(x.parent, T);
                        x = DUMMYROOT.leftChild;

               }
           }

           else{

               w = x.parent.leftChild;
               //case 1
               if(w.color.equals("red")){
                   System.out.println("5");
                   w.setColor("black");
                   counter2++;
                   x.parent.setColor("red");
                   counter2++;
                   rightRotate(x.parent, T);
                   w = x.parent.leftChild;
               }

               //case2

               if(w.rightChild.color.equals("black") && w.leftChild.color.equals("black")){
                   System.out.println("6");
                   w.setColor("red");
                   counter2++;
                   x = x.parent;
               }

               //case 3
               else {
                   if(w.leftChild.color.equals("black")){
                       System.out.println("7");
                   w.rightChild.setColor("black");
                   counter2++;
                   w.setColor("red");
                   counter2++;
                   leftRotate(w, T);
                   w = x.parent.leftChild;

                   }

               //case 4
               /**
               if(!(w.color == x.parent.color)){
                   w.color = x.parent.color;
                   counter2++;
               }
               **/ 

                   System.out.println("8");

                       w.color = x.parent.color;
                       counter2++;
                       x.parent.setColor("black");
                       counter2++;

                       w.leftChild.setColor("black"); //HERE THERES A NULL EXCEPTION
                       counter2++;             
                       rightRotate(x.parent, T);
                       x = DUMMYROOT.leftChild;

               }
           }
       }

       x.setColor("black");
       counter2++;
       return counter2;

    }

    private RBNode TreeSuccessor(RBNode node) {
        RBNode x = new RBNode();
        RBNode y = new RBNode();
        x=node;

        if (x.getRightChild()!=this.NULL) {
            return minNode(x.getRightChild());
        }
        y=x.getParent();
        while ((y!=this.NULL) && (x==y.getRightChild())) {
            x=y;
            y=x.getParent();
        }
        return y;
    }

       public RBNode minNode(RBNode startNode) {
           RBNode currNode= new RBNode();
           currNode=startNode;
           if (currNode==this.NULL) {
               System.out.println("currNode==this.NULL");
               return currNode;
           }
           else
           {
               while (currNode.leftChild!=this.NULL)
                   currNode=currNode.leftChild;
           }
           return currNode;
       }

   static class RBNode{

       public RBNode(int key) {
           this.key=key;
       }

        private double key;
        private RBNode parent;
        private RBNode rightChild;
        private RBNode leftChild;
        private String info;
        private String color;

       public RBNode() {

          this.key=-1;
          this.leftChild=null;
          this.rightChild=null;
          this.parent=null;
      }

      public RBNode(int key, String color) {
          this.color=color;
          this.key=key;
          this.leftChild=null;
          this.rightChild=null;
          this.parent=null;

      } 

      public RBNode(int key, String color, RBNode left, RBNode right) {
          this.color=color;
          this.key=key;
          this.leftChild=left;
          this.rightChild=right;

      } 

      public double getKey() {
          return this.key;
      }

      public String getColor() {
          return this.color;
      }  

      public RBNode getParent() {
          return this.parent;
      }     

      public RBNode getLeftChild() {
          return this.leftChild;
      }     

      public RBNode getRightChild() {
          return this.rightChild;
      } 

      public void setColor(String color) {
          this.color=color;
      }  

      public void setKey(double key) {
          this.key=key;
      }  

      public void setParent(RBNode parent) {
          this.parent=parent;
      }     

      public void setLeftChild(RBNode leftChild) {
          this.leftChild=leftChild;
      }     

      public void setRightChild(RBNode rightChild) {
          this.rightChild=rightChild;
      } 

}

   public static void main(String[] args) {

        RBTree t = new RBTree();

        t.insert(14);
        t.insert(11);
        t.insert(7);
        t.insert(8);
        t.delete(11);

    } 
```

# exception - MOXy NoMessageBodyWriterFoundFailure

> ID：14003640
> 
> 赞同：2
> 
> 时间：2012-12-22T14:28:02.700
> 
> 标签：exception, jaxb, eclipselink, resteasy, moxy

我正在尝试使用 EclipseLink MOXy 作为我的 JAXB 提供程序，但我仍然遇到一些问题。

我已经将一个`jaxb.properties`文件放在与 Error 类相同的包中。尽管如此，在调用我的网络服务时，我仍然收到以下错误：

**错误 500 org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure：找不到 MessageBodyWriter 类型的响应对象：br.services.model.Error of media type: application/xml;charset="UTF-8"**

如果我在`Error`课堂上运行以下代码

```
public static void main(String[] args) throws JAXBException
{
    System.out.println(JAXBContext.newInstance(Error.class).getClass());
} 
```

我会得到这个：**class org.eclipse.persistence.jaxb.JAXBContext**

那么有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:15:40.357

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**eclipselink.jar 的位置**

您需要确保在以下位置有 eclipselink.jar（请参阅： [http](http://wiki.eclipse.org/EclipseLink/Examples/JPA/JBoss_Web_Tutorial#Specific_Server) ://wiki.eclipse.org/EclipseLink/Examples/JPA/JBoss_Web_Tutorial#Specific_Server ）

```
$JBOSS_HOME/server/default/lib 
```

**jaxb.properties**

您是对的，该`jaxb.properties`文件需要与您的域模型（`Error`类）位于同一个包中。您需要确保它具有以下条目（请参阅： [http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html ）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**EclipseLink 版本**

RESTEasy 有可能依赖于一些专有的 JAXB 参考实现扩展。我们已经为 MOXy 添加了对我们所知道的所有内容的支持，因此您需要确保您使用的是最新版本的 EclipseLink。我建议使用 EclipseLink 2.4.1，它可以从以下链接获得：

*   [http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)

**MessageBodyReader/MessageBodyWriter**

RESTEasy 有可能没有被编写（足够好）来支持可插入的 JAXB 实现。在这种情况下，您可以创建`MessageBodyReader`/`MessageBodyWriter`来利用 MOXy。下面是我创建的一个示例，它使用 MOXy 作为 JSON 绑定提供程序，您可以将其用作模型。

*   [http://blog.bdoughan.com/2012/03/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/03/moxy-as-your-jax-rs-json-provider.html)

正如 MOXy 附带一个预构建的`MessageBodyReader`/`MessageBodyWriter`以启用 JSON 绑定（请参阅：[MOXy 作为您的 JAX-RS JSON 提供程序 - MOXyJsonProvider](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)）。当我从假期回来时，我将添加一个预先构建的`MessageBodyReader`/MessageBodyWriter`，以便更轻松地启用 MOXy 作为 RESTEasy 环境的 XML 提供程序。

*   [http://bugs.eclipse.org/397125](http://bugs.eclipse.org/397125)

# javascript - Magento - 删除搜索目录页面的 js

> ID：14003641
> 
> 赞同：0
> 
> 时间：2012-12-22T14:28:06.223
> 
> 标签：javascript, magento, search, catalog

如何仅删除搜索目录页面的 js？

我尝试在catalogsearch.xml 中使用此代码，参考名称为“head”...

```
<action method="removeItem">
    <type>skin_js</type>
    <name>slideshowwidget/js/jquery-1.4.2.min.js</name>
</action> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:43:52.253

如果您的 js 文件位于 Magento 根 js 目录中，您应该使用“js”作为类型而不是“skin_js”：

```
<action method="removeItem">
    <type>js</type>
    <name>slideshowwidget/js/jquery-1.4.2.min.js</name>
</action> 
```

# wordpress - .htaccess 重写不起作用

> ID：14003643
> 
> 赞同：3
> 
> 时间：2012-12-22T14:28:22.853
> 
> 标签：wordpress, .htaccess, url-rewriting

当我正在使用 Roots 和 Wordpress 开发网站时，Roots 会重写`wp-content/themes/themename/assets/etc`但`assets/etc`它不起作用。.htaccess 在底部包含这个：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^assets/css/(.*) /wp-content/themes/retlehs-roots-e3f7365/assets/css/$1 [QSA,L]
RewriteRule ^assets/js/(.*) /wp-content/themes/retlehs-roots-e3f7365/assets/js/$1 [QSA,L]
RewriteRule ^assets/img/(.*) /wp-content/themes/retlehs-roots-e3f7365/assets/img/$1 [QSA,L]
RewriteRule ^plugins/(.*) /wp-content/plugins/$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

对我来说看起来不错？但它不起作用，这是我的服务器或文件本身的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T21:03:36.283

查看评论，您似乎将 WP 安装在子文件夹中。如果是这样，RewriteBase 应该反映这一点。

所以应该是`RewriteBase /subfolder`。另外，您应该删除`/`前面的`/wp-content...`

所以大家一起：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /subfolder
RewriteRule ^index\.php$ - [L]
RewriteRule ^assets/css/(.*) wp-content/themes/retlehs-roots-e3f7365/assets/css/$1 [QSA,L]
RewriteRule ^assets/js/(.*) wp-content/themes/retlehs-roots-e3f7365/assets/js/$1 [QSA,L]
RewriteRule ^assets/img/(.*) wp-content/themes/retlehs-roots-e3f7365/assets/img/$1 [QSA,L]
RewriteRule ^plugins/(.*) wp-content/plugins/$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# eclipse - Maven 无法下载 Hibernate Jars

> ID：14003651
> 
> 赞同：1
> 
> 时间：2012-12-22T14:30:09.227
> 
> 标签：eclipse, hibernate, maven

我在 POM 中添加了休眠依赖项，但是构建失败，因为它无法解决依赖项。

我已经仔细检查了设置文件，并在 POM 中添加了存储库，但我仍然遇到同样的错误。

```
<dependencies>
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-core</artifactId>
<version>4.1.6.Final</version>
</dependency>

  <dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-annotations</artifactId>
<version>3.5.6-Final</version>
</dependency>

<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-entitymanager</artifactId>
<version>3.3.2.GA</version>
</dependency> 
```

错误代码（通过 eclipse 和命令提示符出现相同的错误）：

```
 [INFO] ------------------------------------------------------------------------
        Downloading: https://repository.jboss.org/nexus/content/groups/public-jboss/org/hibernate/hibernate-core/4.1.6.Final/hibernate-core-4.1.6.Final.pom
        Downloading: https://repository.jboss.org/nexus/content/groups/public-jboss/org/hibernate/hibernate-entitymanager/3.3.2.GA/hibernate-entitymanager-3.3.2.GA.pom
        [INFO] ------------------------------------------------------------------------
        [INFO] BUILD FAILURE
        [INFO] ------------------------------------------------------------------------
        [INFO] Total time: 1.130s
        [INFO] Finished at: Sat Dec 22 14:23:02 GMT 2012
        [INFO] Final Memory: 7M/154M
        [INFO] ------------------------------------------------------------------------
        [ERROR] Failed to execute goal on project HibernateMadeEasy: Could not resolve dependencies for project HibernateMadeEasy:HibernateMadeEasy:jar:0.0.1-SNAPSHOT: Failed to collect dependencies for [org.hibernate:hibernate-core:jar:4.1.6.Final (compile), org.hibernate:hibernate-annotations:jar:3.5.6-Final (compile), org.hibernate:hibernate-entitymanager:jar:3.3.2.GA (compile)]: Failed to read artifact descriptor for org.hibernate:hibernate-core:jar:4.1.6.Final: Could not transfer artifact org.hibernate:hibernate-core:pom:4.1.6.Final from/to jboss-public-repository-group (https://repository.jboss.org/nexus/content/groups/public-jboss/): Failed to transfer https://repository.jboss.org/nexus/content/groups/public-jboss/org/hibernate/hibernate-core/4.1.6.Final/hibernate-core-4.1.6.Final.pom. Error code 400, Bad Request -> [Help 1]
        [ERROR] 
        [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
        [ERROR] Re-run Maven using the -X switch to enable full debug logging.
        [ERROR] 
        [ERROR] For more information about the errors and possible solutions, please read the following articles:
        [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:45:14.207

从 hibernate 3.5 开始，[没有更多`hibernate-annotations`](http://in.relation.to/Bloggers/NoMoreHibernateannotationsModule)的，因为它被合并到`hibernate-core`.

旁边，`hibernate-entitymanager`要看的`hibernate-core`。包括它会 `hibernate-core`自动下载。因此，为简单起见，您只能包括`hibernate-entitymanager`：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>4.1.6.Final</version>
</dependency> 
```

# python - 如何删除gridlayout小部件内的所有小部件并以相同的顺序重新创建所有小部件

> ID：14003652
> 
> 赞同：2
> 
> 时间：2012-12-22T14:30:26.420
> 
> 标签：python, python-3.x, pyqt, pyqt5

这是我之前的问题的延续。。**“如何从左上角开始将小部件添加到网格布局”**感谢 **X.Jacobs**修复 tat 问题。现在我想删除所有这些小部件并重新创建相同的小部件相同的顺序，比如刷新小部件库.. 谢谢

![在此处输入图像描述](../Images/53b4b09db55f3f28f1b32524a33b7a4d.png)

好的，这是我的 ui.. 当我单击 createPose 按钮​​时，它将调用 3 Def..

**1** . 在特定文件夹中创建一个txt文件

**2** . 清除网格布局中的所有小部件...

**3** . 最后根据特定文件夹中的文件数量和文件名重新创建我的所有小部件，例如添加小部件并刷新库..但与以前的顺序相同..

```
 self.connect(self.ui.CreatePose_pushButton, QtCore.SIGNAL("clicked()"), self.createPose)

    def createPose(self):
                # To get Posename from UI
        self.__current_Posename = self.getPoseName()

        Path = 'D:\\PoseLibrary\\'

                # To Grab All files in tat Path
        Poses = self.findAllFiles(Path, '.xml')

        self.__NameSpace = self.ui.NameSpace_comboBox.currentText()

                #To find HighestTrailingNumber to Increment the file name
        if self.__current_Posename == "":
            newSuffix = self.findHighestTrailingNumber(Poses, self.__Default_Posename) + 1
            self.PoseName = self.__Default_Posename + str(newSuffix)
        else:
            self.PoseName = self.__current_Posename

        # Creating XML and Icon files
        open(Path + self.PoseName  + '.xml','w').close()

        icon = self.createIcon(self.PoseName, Path)
        # open(Path + self.PoseName  + '.png','w').close()

        self.refreshPoseLibrary(Path)
        self.ui.PoseName_lineEdit.clear()

    def refreshPoseLibrary(self, Path ):
        # First Clear all my buttons in gridlayout
                self.deleteAll()

                # get all file fromm the path dir

        Files = self.getfiles_by_Date(Path)
        Poses = self.findAllFiles(Files, '.xml')

                # Create Btn 
        for Pose in Poses:
            icon = Path + Pose + '.png'
            self.icon.addPixmap(QtGui.QPixmap(icon), QtGui.QIcon.Normal, QtGui.QIcon.Off)
            self.button = QtGui.QPushButton('')
            self.button.setObjectName(Pose)
            self.buttonGroup.addButton(self.button)
            self.button.setIcon(self.icon)
            self.button.setIconSize(QtCore.QSize(128, 128))
            self.button.setMinimumSize(QtCore.QSize(128, 128))
            self.button.setMaximumSize(QtCore.QSize(128, 128))
            self.ui.gridLayout.addWidget(self.button)
            self.button.setContextMenuPolicy(QtCore.Qt.CustomContextMenu)
            self.connect(self.button, QtCore.SIGNAL('customContextMenuRequested(const QPoint&)'), self.popup)

    def deleteAll(self):
        while self.ui.gridLayout.count():
            item = self.ui.gridLayout.takeAt(0)
            widget = item.widget()
            widget.deleteLater()

        def getfiles_by_Date(self, dirpath):
        Files = [s for s in os.listdir(dirpath)
             if os.path.isfile(os.path.join(dirpath, s))]
        Files.sort(key=lambda s: os.path.getmtime(os.path.join(dirpath, s)))
        return Files 
```

现在我添加了一个功能来按创建日期对我的文件夹文件进行排序..现在我的网格布局以正确的顺序排列我的按钮..但是按钮的位置正在跳跃..就像它们之间的间隙..我已经上传了我的屏幕也拍了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T19:29:34.823

从布局中删除所有小部件如下所示：

```
while layout.count():
    item = layout.takeAt(0)
    widget = item.widget()
    # if widget has some id attributes you need to
    # save in a list to maintain order, you can do that here
    # i.e.:   aList.append(widget.someId)
    widget.deleteLater() 
```

# php - 用 PHP 格式化 html 代码

> ID：14003660
> 
> 赞同：3
> 
> 时间：2012-12-22T14:31:11.990
> 
> 标签：php, html, formatting, format, tidy

> **可能重复：**
> [PHP“漂亮的打印”HTML（不整洁）](https://stackoverflow.com/questions/768215/php-pretty-print-html-not-tidy)

假设我有 php var 包含这个字符串：

```
 <html><head><title>Page title</title></head><body><div>content here</div></body></html> 
```

我怎样才能用 php 格式化这个 html 代码？当我说格式时，我的意思是添加换行符并在此代码中添加制表符，如下所示：

```
<html>
    <head>
        <title>Page title</title>
    </head>
    <body>
        content here
    </body>
</html> 
```

我知道 php 有整洁的扩展，但我需要一个替代解决方案。

谢谢。

# php - 在 htaccess 中使用相同的重写规则

> ID：14003662
> 
> 赞同：1
> 
> 时间：2012-12-22T14:31:45.390
> 
> 标签：php, .htaccess

我想将 htaccess 用于两个操作。有代码

```
RewriteRule ^File-(.+).php$ FileviewerID.php?x=$1
RewriteRule ^File-(.+).php$ File.php 
```

但是这些代码不能一起运行

我想将文件 ID 发送到查看器并将其保存在 db 中，然后我只想为考试用户显示 File.php 发送此文件名 > www.sitename.com/File-256.php 现在将 256 保存在 DB 中并显示 File.php，我只想用 htaccess 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:38:48.477

Mod-rewrite 无法以这种方式按顺序提供文件。相反，它将通过规则列表进行，如果第一个规则之后的另一个规则匹配`FileviewerID.php`，它将随后被重写。因此，虽然可以使用 mod_rewrite 来匹配请求中的多个规则，但它不会执行分支到多个请求。

确实，处理这个问题的正确方法是在你的 PHP 代码中，而不是试图让 Web 服务器为你做这件事。

在成功写入数据库后`FileviewerID.php`，调用`header()`PHP 重定向到`File.php`.

```
// Fileviewer.php
// Write to database was successful, redirect to File.php...
header("Location: http://example.com/File.php");
exit(); 
```

### 评论后更新：

要使这适用于 以外的文件`.php`，您仍然可以使用 PHP 在数据库中存储并处理正确的重定向，但您需要从 Apache 中的重定向中检索更多信息。您应该捕获文件扩展名以及编号。

```
# Capture both the number and the extension
RewriteRule ^File-(\d+)\.([A-Za-z]+)$ FileviewerID.php?x=$1&ext=$2 
```

在您的 PHP`FielviewerID.php`中，处理您的数据库操作并使用从`$_GET['ext']`.

```
// FileviewerID.php:
// Store file id in database from $_GET['x'] (hopefully using prepared statements)
// Then redirect using the file extension from $_GET['ext'], which holds an alphabetic string like "php" or "js"

// Verify that the extension is alphabetic
// Consider also checking it against an array of acceptable file extensions for 
// more reliable redirects.
if (preg_match('/^[a-z]+$/i', $_GET['ext'])) {
  header("Location: http://example.com/File.{$_GET['ext']}");
  exit();
}
else {
  // Redirect to some default location for an invalid extension
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:40:08.270

FileviewerID.php 页面必须先加载才能将 id 保存在数据库中

您应该将 FileviewerID.php 文件中的重定向重定向到 file.php

```
header("Location: File.php");
exit(); 
```

# jmeter - JMeter 中的加速测试报告

> ID：14003668
> 
> 赞同：1
> 
> 时间：2012-12-22T14:34:33.157
> 
> 标签：jmeter, load-testing

请告诉我，当您在 JMeter 中执行加速测试时，您在报告中包含哪些结果/指标？
请给我看看它长什么样？
我应该使用什么报告结构？
此报告是否存在任何免费模式？
我在哪里可以看到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:12:20.777

好吧，你用你的 执行什么类型的测试`rump-up tests`？
使用 Ramp-Up Period 值或以任何其他方式定义负载增加只是实现具有具体目标的具体测试的工具，这将确定要监控的参数和要收集的指标。

假设您正在处理负载测试场景，因此您至少可以查看以下链接：

*   [负载、压力、性能测试术语、可交付成果、配置文件和报告](http://www.wilsonmar.com/perfrpt.htm)
*   [负载测试配置 – 使用阶梯式斜坡](http://www.webperformance.com/load-testing/blog/2008/07/load-test-configuration-using-a-stepped-ramp/)
*   [设计一个负载测试来衡量您真正想知道的内容](http://www.webperformance.com/load-testing/blog/2012/01/design-a-load-test-that-measures-what-you-really-want-to-know/)
*   [估计负载测试启动时间](http://www.webperformance.com/load-testing/blog/2009/05/estimating-load-test-ramp-up-times/)
*   [关于loadosophia](http://loadosophia.org/)的示例报告
*   [JMeterreport 插件：功能测试结果的漂亮 html 报告](http://jira.codehaus.org/browse/MOJO-969)

# android - 将应用程序转换为库：Intent 给出 NullPointerException

> ID：14003669
> 
> 赞同：0
> 
> 时间：2012-12-22T14:34:36.753
> 
> 标签：android, android-intent, libraries, android-context

我制作了 2 个应用程序：`ave`和`xvf`. 从 开始`ave`，我调用了一个意图来打开`Thumbs`里面的类，`xvf`如下所示：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setClassName("com.floritfoto.apps.xvf", "com.floritfoto.apps.xvf.Thumbs");
intent.putExtra("files", imgfiles);
startActivity(intent); 
```

安装了 2 个应用程序后，这就像一个魅力，世界很开心。

现在我创建了`xvf`一个库以避免安装这两个应用程序。我现在`Thumbs`这样打电话：

```
Intent intent = new Intent(getBaseContext(), com.floritfoto.apps.xvf.Thumbs.class);
intent.putExtra("files", imgfiles);
startActivity(intent); 
```

好吧，这是行不通的，因为我`NullPointerException`在上面写了一行`Thumbs`：

```
gridview.setNumColumns(3); 
```

gridview 是一个 GridView，它是在from 其布局的`onCreate()`方法中创建的。`Thumbs`

我的第六感告诉我，这个问题与上下文有关。也许在`getBaseContext()`调用意图时？我应该放什么？（抱歉，这个新手不太懂这个`context`东西……）

我包括崩溃日志：

```
12-22 13:54:20.890: W/dalvikvm(29093): threadid=1: thread exiting with uncaught exception (group=0x40c531f8)
12-22 13:54:20.895: E/AndroidRuntime(29093): FATAL EXCEPTION: main
12-22 13:54:20.895: E/AndroidRuntime(29093): java.lang.RuntimeException: Unable to start activity ComponentInfo    {com.floritfoto.apps.ave/com.floritfoto.apps.xvf.Thumbs}: java.lang.NullPointerException
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.os.Looper.loop(Looper.java:137)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.ActivityThread.main(ActivityThread.java:4507)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at java.lang.reflect.Method.invokeNative(Native Method)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at java.lang.reflect.Method.invoke(Method.java:511)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at dalvik.system.NativeStart.main(Native Method)
12-22 13:54:20.895: E/AndroidRuntime(29093): Caused by: java.lang.NullPointerException
12-22 13:54:20.895: E/AndroidRuntime(29093):    at com.floritfoto.apps.xvf.Thumbs.numcols(Thumbs.java:70)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at com.floritfoto.apps.xvf.Thumbs.onCreate(Thumbs.java:110)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.Activity.performCreate(Activity.java:4465)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
12-22 13:54:20.895: E/AndroidRuntime(29093):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
12-22 13:54:20.895: E/AndroidRuntime(29093):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:59:24.157

好的，这听起来很疯狂，但它确实有效。首先，我删除了函数`numcols()`并将其代码移到`onCreate()`方法中，就在`gridview`初始化的地方。我做了一个项目**Clean**，现在它完美无缺。

**编辑**

在为库生成 .apk 时发生了几次，并且都使用上述方法进行了纠正。

# javascript - 有没有更短的方法来使用 Ajax 进行函数调用？

> ID：14003671
> 
> 赞同：0
> 
> 时间：2012-12-22T14:34:50.123
> 
> 标签：javascript, dry, shortest-path, non-repetitive

我将整个函数粘贴在这里，顺便说一下，我在这个脚本中使用了 mustache 模板库，但这在问题中不是必需的：

```
tmplReplaceContent : function(json, tmpl, target){
    var regex = new RegExp("\{{[a-zA-Z\.\_]*\}}");
    var template = '';
    var view = '';
    /* json -> check if object */
    if (typeof json == 'object') {
        view = json;
        if(!regex.test(tmpl)){
            /* get mustache tmpl from the path */
            $.get(msi.vars.tmpl_url + tmpl + '.mustache', function(tmplOut){
                template = tmplOut;
                var content = Mustache.render(template, view);
                $(target).html(content).hide().fadeIn();
            });
        } else {
            template = tmpl;
            var content = Mustache.render(template, view);
            $(target).html(content).hide().fadeIn();
        }
    } else {
        /* getJSON from the path */
        $.getJSON(msi.vars.base_url + json, function(jsonOut){
            view = jsonOut;
            if(!regex.test(tmpl)){
                /* get mustache tmpl from the path */
                $.get(msi.vars.tmpl_url + tmpl + '.mustache', function(tmplOut){
                    template = tmplOut;
                    var content = Mustache.render(template, view);
                    $(target).html(content).hide().fadeIn();
                });
            } else {
                template = tmpl;
                var content = Mustache.render(template, view);
                $(target).html(content).hide().fadeIn();
            }
        });
    } 
```

我无法缩短它并删除重复的代码，因为我无法在 Ajax 成功中分配局部变量，因为它是异步的。我在互联网上徘徊了大约 15 个小时。但仍然没有运气。

我怎样才能删除重复的代码并使这个东西更短？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:42:28.137

好吧，如果您有重复的代码，功能就在那里 :)

只是为了好玩，这里是你如何包括一个：

```
tmplReplaceContent : function(json, tmpl, target){

    function render(tmplOut) {
        template = tmplOut;
        var content = Mustache.render(template, view);
        $(target).html(content).hide().fadeIn();
    }

    var regex = new RegExp("\{{[a-zA-Z\.\_]*\}}");
    var template = '';
    var view = '';
    /* json -> check if object */
    if (typeof json == 'object') {
        view = json;
        if(!regex.test(tmpl)){
            /* get mustache tmpl from the path */
            $.get(msi.vars.tmpl_url + tmpl + '.mustache', render);
        } else {
            render();
        }
// Etc... 
```

缩短了很多东西，对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:46:38.627

```
tmplReplaceContent : function(json, tmpl, target) {

  var regex = new RegExp("\{{[a-zA-Z\.\_]*\}}"),
      view = '';

  function setOutput(template) {
      var content = Mustache.render(template, view);
      $(target).html(content).hide().fadeIn();
  }

  function doJSON(json) {
      view = json;
      if(!regex.test(tmpl)){
          /* get mustache tmpl from the path */
          $.get(msi.vars.tmpl_url + tmpl + '.mustache', setOutput);
      } else {
          setOutput(tmpl);
      }
  }

  /* json -> check if object */
  if (typeof json === 'object') {
    doJSON(json);
  } else {
      /* getJSON from the path */
      $.getJSON(msi.vars.base_url + json, doJSON);
} 
```

# python - 实现“复制构造函数”与使用 copy()

> ID：14003672
> 
> 赞同：3
> 
> 时间：2012-12-22T14:34:51.933
> 
> 标签：python

就python约定+速度而言，通常首选什么？就像是：

```
class Object(object):
    def __init__(self, other_object=None):
        if other_object:
            self.value = other_object.value
        else:
            self.value = something 
```

进而

```
obj = Object(other_object) 
```

或者，使用复制（）：

```
from copy import copy
obj = copy(other_object) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T19:34:38.990

考虑到模块的文档，事情非常简单`copy`：

> 为了让一个类定义它自己的复制实现，它可以定义特殊的方法`__copy__()`和`__deepcopy__()`. 前者被调用来实现浅拷贝操作；没有传递额外的参数。后者被调用来实现深拷贝操作；它被传递一个参数，备忘录字典。如果 `__deepcopy__()`实现需要对组件进行深层复制，它应该`deepcopy()`以组件作为第一个参数和备忘录字典作为第二个参数来调用该函数。

因此，如果您觉得标准`copy()`或`deepcopy()`工作缓慢或有其他问题，只需执行上述方法之一即可。这样，您将坚持众所周知的 Python 对象复制机制，仍然以您希望复制的方式复制对象。

# javascript - 使用 jquery 填充数组样式表单字段

> ID：14003674
> 
> 赞同：3
> 
> 时间：2012-12-22T14:34:55.943
> 
> 标签：javascript, jquery, asp.net-mvc

我想发布一个带有此处描述的属性的表单（MVC 友好数组）：[https](https://stackoverflow.com/a/5003686/1246219) ://stackoverflow.com/a/5003686/1246219 我想发布一个表单而不是使用 ajax 的原因是结果是一个文件下载，即没有其他理由使用表格。

但是，我有一个 javascript 数组，其中包含我想提交的值（整数）。我能想到的实现这一点的唯一方法是循环并为每个条目创建输入元素，或者我可以用逗号分隔的字符串填充单个表单字段并在服务器端解析它。有没有更好的办法？

更新 - 如果有人感兴趣，我最终使用了循环方法，并且碰巧用 d3 编写它。

```
var selected = [1,2,3];
var selectionBinding = d3.select("#myForm").selectAll("input[name='myField']").data(selected);
selectionBinding.exit().remove();
selectionBinding.enter().append("input")
                .attr("type", "hidden")
                .attr("name", "myField")
                .attr("value", function (data) { return data });
$("#myForm").submit(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:39:00.367

我的建议是创建一个`regular Javascript Array`带有数据的表格并带有一个带有`input type text`. 当您提交表单时，将输入文本的值设置为`JSON.stringify(myArray)`

# php - if语句中的多个命令引发错误

> ID：14003675
> 
> 赞同：0
> 
> 时间：2012-12-22T14:35:00.250
> 
> 标签：php, if-statement, printing

我在使用 if 语句后的多个命令的一些 PHP 代码时遇到问题。我已经用分号终止了每个命令，但是 php 抛出以下错误：

```
PHP Parse error:  syntax error, unexpected T_VARIABLE in /test/process.php on line 18 
```

引用此代码段的第 4 行：

```
if (mysql_num_rows($duperaw) > 0)
{
print '<script type="text/javascript">';
print 'alert("'$img_id' is already in '$type'")';
print '</script>';
header("location: process.php?img_id=$img_id");
}
else
{
mysql_query("INSERT INTO $type (data) VALUES('$data')");
print '<script type="text/javascript">';
print 'alert("'$img_id' successfully added to '$type'")';
print '</script>';
} 
```

该代码可以在每个 {} 中使用一行，但我认为 {} 的功能是允许在每个 if 语句中运行多个命令。我可能只是忽略了一些非常简单的事情，因为我对 php 还很陌生。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:37:37.007

您错过了加入字符串的句号：

所以

```
print 'alert("'$img_id' is already in '$type'")'; 
```

变成

```
print 'alert("'.$img_id.' is already in '.$type.'")'; 
```

# c# - asp.net 文字不显示

> ID：14003678
> 
> 赞同：3
> 
> 时间：2012-12-22T14:35:27.790
> 
> 标签：c#, asp.net

我正在使用文字控件来显示 html 格式的文本。它不显示 br,hr 标签，结果空白行消失了。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T14:38:53.283

asp:Literal 控件有一个`Mode`属性，尝试将其设置为[PassThrough](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx) ，例如

```
<asp:Literal Mode="PassThrough" Text="This<hr />Works" runat="server" /> 
```

这将输出：

![在此处输入图像描述](../Images/79407f2efa6840beac4eddc652897de9.png)

这似乎是你所追求的......

**编辑**以下 OP 评论：另一个完全符合他要求的示例：

```
<asp:Literal runat="server" Mode="PassThrough" Text="<p>para 1</p><br/><p>para2 </p>"/> 
```

输出为：

![在此处输入图像描述](../Images/df20ae940e0c58938393e4470f2892ad.png)

我猜你有一些 CSS 或其他样式弄乱了你的输出。我建议在一个干净的项目上测试它，看看它是否按预期工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:58:39.817

您可以使用

```
<asp:Literal Mode="PassThrough"></asp:Literal> 
```

*来自 MSDN 的定义：*

**PassThrough**：不修改控件的内容。

**编码**：控件的内容被转换为 HTML 编码的字符串。

**转换：**不支持的标记语言元素从控件的内容中删除。如果在支持 HTML 或 XHTML 的浏览器上呈现 Literal 控件，则不会修改控件的内容。

```
Transform Mode:
<br />
<asp:Literal ID="literal1" Mode="Transform" Text="<b>This is Transform </b>" 
runat="server" />
<br />
<br />
Pass Through Mode:
<br />
<asp:Literal ID="literal2" Mode="PassThrough" Text="<b><u>This is Pass Through</b></u>" runat="server" />
<br />

<br />
Encode Mode:
<br />
<asp:Literal ID="literal3" Mode="Encode" Text="<b>This is Encode </b>" 
runat="server" />
</div>
</asp:Content>

<br />
<asp:Label ID="Label1" runat="server" Font-Bold="True" ForeColor="#000099" />
</asp:Content> 
```

# javascript - 我可以更改 IE 中禁用的 HTML 选择元素的颜色吗？

> ID：14003679
> 
> 赞同：7
> 
> 时间：2012-12-22T14:35:31.067
> 
> 标签：javascript, jquery, html, css

我需要更改 html 选择的颜色。我进行了很多搜索，但没有找到适用于 IE 的示例。那么，我可以更改 IE 中禁用的 HTML 选择元素的颜色吗？我需要一个示例，在 css 或 javascript 或 jquery 中。这是我尝试过的。

```
<select disabled="disabled">
    <option value="a">option A</option>
    <option value="b">option B</option>
    <option value="c">option C</option>
</select>

[disabled] {
  color: #933;
  background-color: #ffc;
}

select:disabled
{
    border: solid 1px silver;
    background-color: #F9F9F9;
    color:blue;
}

[disabled] option {
    background-color: #ffc;  color: #933;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-25T08:25:04.573

解决方案是使用`::-ms-value`选择器：

```
select[disabled]::-ms-value {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:52:24.100

尝试

```
[disabled="disabled"] {
    color: #933;
    background-color: #ffc;
} 
```

或者

```
*[disabled="disabled"] {
    color: #933;
    background-color: #ffc;
} 
```

或者

```
select[disabled="disabled"] {
    color: #933;
    background-color: #ffc;
} 
```

或使用 jQuery

```
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery('[disabled="disabled"]').css({ 'color': '#993333', 'background-color': '#ffffcc' });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T23:11:17.280

事实上，上面/下面的答案都没有对我有用，但这确实：

```
# Select all disabled DOM objects
$(':disabled').css({
    color:'red'
});

# Select disabled DOM objects by HTML tag <input>
$('input:disabled').css({
    color:'red'
}); 
```

更多信息：[https ://api.jquery.com/disabled-selector/](https://api.jquery.com/disabled-selector/)

# android - 安卓17级

> ID：14003680
> 
> 赞同：0
> 
> 时间：2012-12-22T14:35:35.570
> 
> 标签：android

我下载了android4.2，使用SDK Manager。当我重新启动我的 Eclipse 时，我的 sdk 位置是相同的，但不起作用。我收到此错误：

```
This Android SDK requires Android Developer Toolkit version 21.0.0 or above.  C...rsion is 20.0.0.v201206242043-391819\.  Please update ADT to the latest version. 
```

我尝试更新我的 Eclipse，但出现此错误：

```
'Contacting Software Sites' has encountered a problem. No repository found at jar:file: /Downloads/JsonEditorPlugin-0.9.4/plugins/json.editor.plugin_0.9.4.jar!/. 
```

有没有人遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:39:09.407

您需要更新 ADT，否则将无法正常工作。为此，请选择帮助 -> 检查更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:48:02.423

您必须将 ADT 更新到新版本，才能这样做；转到`Help`并单击`install new software`

在那里，您必须单击`work with:`下拉菜单并选择您的 android ADT 链接。

然后eclipse将显示要安装的东西列表，选择它们并单击下一步。你完成了。

![在此处输入图像描述](../Images/a2e77261a63c9b80596cd50ebe342b39.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T07:10:47.580

如果更新 ADT 对您不起作用，那么只需尝试以管理员身份运行 Eclipse！它对我有用。这是 eclipse 的错误之一，有时甚至在重新启动后消失。希望有帮助。

# google-plus - Google+ Hangouts API：访问参与者视频数据并在画布中进行操作

> ID：14003683
> 
> 赞同：3
> 
> 时间：2012-12-22T14:36:21.660
> 
> 标签：google-plus, webrtc, hangout

我希望使用 API 创建以下 Google+ Hangouts 应用程序。以下步骤对其进行了描述：

1.  提供了一个按钮来拍摄参与者视频馈送的快照图像以进行背景减法。
2.  参与者输入视频源。使用#1 中获得的背景图像处理提要以减去背景。对提要进行处理（例如，使背景为白色，前景为黑色）以获得可以视为图像流的内容。
3.  来自所有用户的已处理提要（表示为图像流）以编程方式组合在一起并显示在画布上（例如，如果白色为 TRUE，黑色为 FALSE，我可以对所有参与者提要进行像素级逻辑与）。

这可以用当前的 Google+ Hangouts API 来完成吗？如果没有，您能否推荐一个技术套件来执行此操作（我更喜欢 WebRTC，而不必付费通过服务器中继视频数据，即 P2P 或免费基础设施）。

笔记：

我在没有做太多研究的情况下问。

我知道视频源并不完全是图像流，并且会有滞后和一定程度的异步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:36:48.217

不幸的是，Hangout API 不支持捕获音频或视频的功能。要了解有关我们支持的 AV api 的更多信息，请查看[https://developers.google.com/+/hangouts/api/gapi.hangout.av/](https://developers.google.com/+/hangouts/api/gapi.hangout.av/)。

# java - 通过终端添加 com.jdbc.odbc.Driver

> ID：14003684
> 
> 赞同：0
> 
> 时间：2012-12-22T14:36:34.590
> 
> 标签：java, mysql, jdbc-odbc

当我尝试运行一个项目时

```
java -jar test.jar 
```

我得到以下异常

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver                    
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

如何在类路径中添加 mysql-connector-java-5.1.22-bin.jar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:42:15.580

您的类路径中应该有 jdbc 驱动程序类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:40:55.480

也许您忘记在项目中添加库。请查看以下链接

*   [将库 (.jar) 添加到您的项目](http://www.vogella.com/articles/Eclipse/article.html#classpath)
*   [MySQL 和 Java JDBC - 教程](http://www.vogella.com/articles/MySQLJava/article.html)

# ruby-on-rails - Heroku Rails 应用错误日志解读

> ID：14003688
> 
> 赞同：0
> 
> 时间：2012-12-22T14:37:05.167
> 
> 标签：ruby-on-rails, ruby, logging, heroku

我正在尝试将我的应用程序放到 heroku 上，但是我不断收到错误。有人告诉我查看日志以查看问题所在。谁能通过查看日志告诉我错误？

```
2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/config.ru:1:in `new'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    2012-12-22T14:30:50+00:00 app[web.1]:   from script/rails:6:in `require'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    2012-12-22T14:30:50+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    2012-12-22T14:30:50+00:00 app[web.1]:   from script/rails:6:in `<main>'
    2012-12-22T14:30:51+00:00 heroku[web.1]: Process exited with status 1
    2012-12-22T14:30:51+00:00 heroku[web.1]: State changed from starting to crashed
    2012-12-22T14:31:25+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by muhammedibhikha@gmail.com
    2012-12-22T14:31:30+00:00 heroku[run.8199]: Starting process with command `bundle exec rake db:migrate`
    2012-12-22T14:31:30+00:00 heroku[run.8199]: Awaiting client
    2012-12-22T14:31:31+00:00 heroku[run.8199]: State changed from starting to up
    2012-12-22T14:31:38+00:00 heroku[run.8199]: Process exited with status 1
    2012-12-22T14:31:38+00:00 heroku[run.8199]: State changed from up to complete
    2012-12-22T14:32:40+00:00 heroku[api]: Release v8 created by muhammedibhikha@gmail.com
    2012-12-22T14:32:40+00:00 heroku[api]: Deploy 18ea6ba by muhammedibhikha@gmail.com
    2012-12-22T14:32:40+00:00 heroku[web.1]: State changed from crashed to starting
    2012-12-22T14:32:43+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 25643`
    2012-12-22T14:32:49+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
    2012-12-22T14:32:49+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
    2012-12-22T14:32:52+00:00 app[web.1]: => Booting WEBrick
    2012-12-22T14:32:52+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:25643
    2012-12-22T14:32:52+00:00 app[web.1]: => Call with -d to detach
    2012-12-22T14:32:52+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
    2012-12-22T14:32:52+00:00 app[web.1]: => Ctrl-C to shutdown server
    2012-12-22T14:32:52+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by muhammedibhikha@gmail.com
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:359:in `require_or_load'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    2012-12-22T14:32:52+00:00 app[web.1]:                     ^
    2012-12-22T14:32:52+00:00 app[web.1]: /app/app/controllers/franchise_application_controller.rb:45: invalid multibyte char (US-ASCII)
    2012-12-22T14:32:52+00:00 app[web.1]: Exiting
    2012-12-22T14:32:52+00:00 app[web.1]: /app/app/controllers/franchise_application_controller.rb:45: syntax error, unexpected $end, expecting ']'
    2012-12-22T14:32:52+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': /app/app/controllers/franchise_application_controller.rb:45: invalid multibyte char (US-ASCII) (SyntaxError)
    2012-12-22T14:32:52+00:00 app[web.1]:     @inv_list = ['£25,000 to £50,000','£50,000...
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225:in `require_dependency'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:313:in `depend_on'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    2012-12-22T14:32:52+00:00 app[web.1]:   from script/rails:6:in `require'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/config.ru:4:in `require'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/config.ru:1:in `new'
    2012-12-22T14:32:52+00:00 app[web.1]:   from script/rails:6:in `<main>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
    2012-12-22T14:32:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    2012-12-22T14:32:53+00:00 heroku[web.1]: Process exited with status 1
    2012-12-22T14:32:53+00:00 heroku[web.1]: State changed from starting to crashed
    2012-12-22T14:32:58+00:00 heroku[run.1220]: Awaiting client
    2012-12-22T14:32:58+00:00 heroku[run.1220]: Starting process with command `bundle exec rake db:migrate`
    2012-12-22T14:32:58+00:00 heroku[run.1220]: State changed from starting to up
    2012-12-22T14:33:06+00:00 heroku[run.1220]: Client connection closed. Sending SIGHUP to all processes
    2012-12-22T14:33:07+00:00 heroku[run.1220]: Process exited with status 0
    2012-12-22T14:33:07+00:00 heroku[run.1220]: State changed from up to complete
    2012-12-22T14:33:13+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:14+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:14+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:15+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:15+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:15+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:17+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:17+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:18+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:18+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes=
    2012-12-22T14:33:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-cliffs-9120.herokuapp.com fwd=81.109.219.34 dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:09:21.857

问题似乎是由`£`. 尝试在文件的最顶部包含以下行：`@inv_list = ['£25,000 to £50,000','£50,000...``franchise_application_controller`

```
# encoding: UTF-8 
```

赠品是日志中的“无效的多字节字符（US-ASCII）”，通常通过编码行解决。

# javascript - req.session 未使用 express 和 connect-redis 定义

> ID：14003691
> 
> 赞同：0
> 
> 时间：2012-12-22T14:37:24.593
> 
> 标签：javascript, node.js, session, express, redis

> **可能重复：**
> [使用 express/redis 进行会话存储时，“会话”未定义](https://stackoverflow.com/questions/10191692/session-is-undefined-when-using-express-redis-for-session-store)

```
var express = require('express');
var app = express();
var RedisStore = require('connect-redis')(express);
var session = require('redis-session')({

  debug: true,
  ttl: 90000000,
  connection: {port: '7170', host: '127.0.0.1'}    

});

app.configure(function(){

   app.use(express.bodyParser());
   app.set('views',__dirname + '/views');
   app.set('view engine', 'ejs');
   app.use(express.static(__dirname + '/public'));
   app.use(express.session({ secret: 'p!550ff', store: new RedisStore }));
   app.use(express.cookieParser());
   app.use(app.router);

}); 
```

使用这种配置，每当我调用 时`req.session`，nodemon 都会告诉我它是未定义的。`express.cookieParser()`并且`express.session`声明得很好，我猜。有什么解决办法...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:09:25.020

`cookieParser`中间件需要在中间件之前，`session`所以像这样交换顺序：

```
 app.use(express.cookieParser());
   app.use(express.session({ secret: 'p!550ff', store: new RedisStore })); 
```

请参阅[此处](http://www.senchalabs.org/connect/session.html)的 Connect 文档。

# windows-phone-8 - Windows Phone 7 应用程序中的消息框在 10 秒后崩溃

> ID：14003693
> 
> 赞同：1
> 
> 时间：2012-12-22T14:37:33.950
> 
> 标签：windows-phone-8

这是我在 WP 7 应用程序开发中遇到的问题。实际上我想在应用程序启动时检测网络的存在我使用这个代码

```
bool isNetwork=NetworkInterface.GetIsNetworkAvailable();
if(!isnetwork) 
{    
    MessageBox.Show("No Network Available","App Name",MessageBoxButton.OkCancel); 
} 
```

下面的代码我写在类的**Constructor()**中，我只想知道两件事

1.  我应该在哪里编写代码，以便在应用程序打开时显示消息框，并且在用户选择“是”或“否”之前，消息框保持不变。
2.  当用户按下 MessageBox 上的“NO”按钮时，我想退出应用程序

    我很困惑，我应该使用**application_launching()**事件还是应该在**OnNavigatedTo()**中编码？

需要正确的代码！谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:48:26.537

如果您在 OnNavigatedTo 事件的构造函数中编写 MessageBox，您将面临同样的问题。`Loaded`您必须在页面的事件处理程序中明智地处理它。

以编程方式没有退出应用程序的首选方式。我建议您不要决定退出应用程序，而是在页面上显示一些静态内容和“无可用网络，稍后再试”文本。

# c# - 从包含树状数据的 DataTable 或 List 填充 TreeView

> ID：14003698
> 
> 赞同：7
> 
> 时间：2012-12-22T14:38:15.607
> 
> 标签：c#, .net, winforms, datatable, treeview

我在我的数据库中创建了一个帐户表，其中包含以下列：

```
ID
Name
ParentID 
```

这是如何存储记录的示例：

```
ID   Name    ParentID
1    BANK A  0
2    0001    1
3    0002    1
4    BANK B  0
5    0001    4
6    0002    4 
```

但是公司名称不是来自数据库，而是来自代码。那么我怎样才能`TreeView`像这样扩展呢？

```
├─ BANK A
│  ├─ 0001
│  └─ 0002
└─ BANK B
   ├─ 0001
   └─ 0002 
```

我怎样才能在 C# 中做到这一点？[我也从这里](https://stackoverflow.com/questions/805457/populate-winforms-treeview-from-datatable)试过，但我还是不明白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T16:33:44.650

在花了 2 小时制作复杂的算法后，我发现了一段对我很有用的代码：

```
 //In Page load
 //select where id is null to retrieve the parent nodes 
 //in a datatable (called table here)
 foreach (DataRow row in table.Rows)
 {
   TreeNode node = new TreeNode();
   node.Text = row["title"].ToString();
   node.Value = row["id"].ToString();
   //you can affect the node.NavigateUrl

   node.PopulateOnDemand = true;
   TreeView1.Nodes.Add(node);
 } 
```

然后创建 TreeNodePopulate 事件：

```
 protected void TreeView1_TreeNodePopulate(Object sender, TreeNodeEventArgs e)
 {
     string id= e.Node.Value;
     //do your "select from yourTable where parentId =" + id;

     foreach (DataRow row in table.Rows)
     {
         TreeNode node = new TreeNode(row["title"], row["id"])
         node.PopulateOnDemand = true;    
         e.Node.ChildNodes.Add(node);
     }

 } 
```

它对我来说就像地狱一样，我希望它会有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-25T18:55:02.667

`TreeView`要从a`DataTable`或 any填充 a `IEnumerable<T>`，您应该能够回答以下问题：

1.  什么是数据源项
2.  如何检测数据源中的项目是否是树中的根项目
3.  如何在数据源中查找项目的子项目
4.  如何从数据源项创建树项。

通过将上述问题的答案作为 lambda 表达式传递给以下方法，它使用递归算法创建一个列表`TreeNode`，您可以将其添加到`TreeView`. 每个都`TreeNode`包含后代`TreeNode`项目：

```
private IEnumerable<TreeNode> GetTreeNodes<T>(
    IEnumerable<T> source,
    Func<T, Boolean> isRoot,
    Func<T, IEnumerable<T>, IEnumerable<T>> getChilds,
    Func<T, TreeNode> getItem)
{
    IEnumerable<T> roots = source.Where(x => isRoot(x));
    foreach (T root in roots)
        yield return ConvertEntityToTreeNode(root, source, getChilds, getItem); ;
}

private TreeNode ConvertEntityToTreeNode<T>(
    T entity,
    IEnumerable<T> source,
    Func<T, IEnumerable<T>, IEnumerable<T>> getChilds,
    Func<T, TreeNode> getItem)
{
    TreeNode node = getItem(entity);
    var childs = getChilds(entity, source);
    foreach (T child in childs)
        node.Nodes.Add(ConvertEntityToTreeNode(child, source, getChilds, getItem));
    return node;
} 
```

**例子**

我假设您已将数据加载到以下结构中：

```
var dt = new DataTable();
dt.Columns.Add("Id", typeof(int));
dt.Columns.Add("Name", typeof(string));
dt.Columns.Add("ParentId", typeof(int));

dt.Rows.Add(1, "Menu 1", DBNull.Value);
dt.Rows.Add(11, "Menu 1-1", 1);
dt.Rows.Add(111, "Menu 1-1-1", 11);
dt.Rows.Add(112, "Menu 1-1-2", 11);
dt.Rows.Add(12, "Menu 1-2", 1);
dt.Rows.Add(121, "Menu 1-2-1", 12);
dt.Rows.Add(122, "Menu 1-2-2", 12);
dt.Rows.Add(123, "Menu 1-2-3", 12);
dt.Rows.Add(124, "Menu 1-2-4", 12);
dt.Rows.Add(2, "Menu 2", DBNull.Value);
dt.Rows.Add(21, "Menu 2-1", 2);
dt.Rows.Add(211, "Menu 2-1-1", 21); 
```

然后要将其转换为 a 的节点`TreeView`，您可以使用以下代码：

```
var source = dt.AsEnumerable();
var nodes = GetTreeNodes(
        source,
        (r) => r.Field<int?>("ParentId") == null,
        (r, s) => s.Where(x => r["Id"].Equals(x["ParentId"])),
        (r) => new TreeNode { Text = r.Field<string>("Name") }
);
treeView1.Nodes.AddRange(nodes.ToArray()); 
```

结果，您将拥有以下树结构：

```
├─ Menu 1
│  ├─ Menu 1-1
│  │  ├─ Menu 1-1-1
│  │  └─ Menu 1-1-2
│  └─ Menu 1-2
│     ├─ Menu 1-2-1
│     ├─ Menu 1-2-2
│     ├─ Menu 1-2-3
│     └─ Menu 1-2-4
└─ Menu 2
   └─ Menu 2-1
      └─ Menu 2-1-1 
```

# html - HTML：更改 Blogger 帖子标题的字体大小

> ID：14003699
> 
> 赞同：0
> 
> 时间：2012-12-22T14:38:18.800
> 
> 标签：html, css, blogger

我为我的博主（[http://alstat.blogspot.com/](http://alstat.blogspot.com/)）尝试了一个新主题。一切都很好，除了帖子标题。当我在我博客的主页上时，我得到了这个**大文本帖子标题**，但是当我点击我的一篇帖子时，帖子标题字体会发生变化，并且它的大小会变**小**。该主题实际上可在此处获得（[http://btemplates.com/2010/blogger-template-heliumified/](http://btemplates.com/2010/blogger-template-heliumified/)）。我玩了css代码，并尝试编辑以下内容。我尝试将 更改`.post h3 a,.post h3 a:visited,.post h3 strong`为`.post h2 a,.post h2 a:visited,.post h2 strong`和 this 。`post h3 a,.post h3 a:visited,.post h3 strong`. 什么也没发生，另外几行代码我也试着修改了一下，看看有没有变化。我玩过的 HTML 文件的 post 部分的代码如下所示。如果你们中的任何人可以帮助我，我真的很感激。顺便说一句，我是 HTML 的初学者。谢谢！

```
.post {
margin:0 0 25px;
}

.post h3 a,.post h3 a:visited,.post h3 strong {
display:block;
color:#333333;
font-family:Cuprum, arial, serif;
font-size:30px;
line-height:1.3;
text-decoration:none;
}

.post h3 strong,.post h3 a:hover {
color:#333333;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:52:58.640

在您的[主页](http://alstat.blogspot.com/)中，您的帖子倾斜位于具有 font-size:30 的“a”标签中，而在您的详细信息页面中，标题不在“a”标签中。

此外，您的 css 标题类（即 post-title 和 entry-title）未定义，或者您没有正确链接这些文件。

**解决方案**：

*   尝试链接文件。如果存在的话。
*   或提供一个新的 CSS 类，它具有 font-size:30 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:45:26.753

似乎有两个类应用于您的标题：“post-title”和“entry-title”

尝试检查和更改这些，看看会发生什么:)

如果您是初学者，我还建议您使用 Google Chrome 的 Inspect Element 来查找错误并查看哪些样式应用于哪些部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:32:55.743

go to->Template->edit html->勾选 Expand Widget templates-> Ctrl+F search for .post h3{ or .post h3 { ,.....这在整个博客代码中只有一次。并在该行编辑字体大小。

# php - 返回多个变量php

> ID：14003702
> 
> 赞同：0
> 
> 时间：2012-12-22T14:38:45.637
> 
> 标签：php, database, survey

我是php的新手，搜索了很多但找不到答案。

我做了一个关于设置调查的小教程。它显示产品名称并有一个赞成按钮。现在我只想添加每个项目的总票数。我想我只能使用一个返回函数，但我想使用两个返回函数来显示投票。我在想我需要使用二维数组，但不知道如何在代码上应用它。有人可以帮我:)吗？

非常感谢提前

编码：

（反手）

```
 <?php

    // Fetches an array of all of the products in the table.
    function fetch_products(){
    $sql = "SELECT
                `product_id`,
                `product_name`,
                `product_votes`
            FROM `products`
            ORDER BY `product_votes` DESC";

    $result = mysql_query($sql);

    $products = array();
    $votes = array();

    while (($row=mysql_fetch_assoc($result)) !== false){
        $products[$row['product_id']] = $row['product_name'];
        $votes[$row['product_id']] = $row['product_votes'];
        }
    return $products;
    }

    function add_product_vote($product_id, $vote){
    $product_id = (int)$product_id;

    $sql = "UPDATE `products` SET `product_votes` = `product_votes` + 1 WHERE `product_id`      = {$product_id}";

    mysql_query($sql);
    }

    ?> 
```

的HTML：

```
 <?php

    include('core/init.inc.php');

    if (isset($_GET['vote'], $_GET['id'])){
    add_product_vote($_GET['id'], $_GET['vote']);
    }

    ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
    </head>
    <body>
        <div>
            <?php

             foreach (fetch_products() as $id => $products){
                ?>
                <p>
                    <?php echo $products; ?>
                    <a href="?vote=up&amp;id=<?php echo $id; ?>">Up</a>
                </p>
                <?php

             }

            ?>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:47:14.960

您可以使用数组返回多个值

```
while (($row=mysql_fetch_assoc($result)) !== false)
{
    $products[$row['product_id']] = $row['product_name'];
    $votes[$row['product_id']] = $row['product_votes'];
}
return array('products'=>$products, 'votes'=>$votes);
} 
```

在视图中：

```
$productDetails = fetch_products();
foreach ($productDetails['products'] as $id => $products){
?>
<p>
    <?php echo $products; ?>
    <a href="?vote=up&amp;id=<?php echo $id; ?>">Up</a>
    <?php echo 'Total Votes : '.$productDetails['votes'][$id]
</p>
<?php
} 
```

# c# - 如何用对象数组编组对象？

> ID：14003705
> 
> 赞同：1
> 
> 时间：2012-12-22T14:38:52.580
> 
> 标签：c#, marshalling, sizeof

我在编组方面遇到问题。

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public class Book
    {

        [MarshalAs(UnmanagedType.LPArray, SizeConst = 1000)]
        public Page[] astInject2;
    }

    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public class Page
    {
        public int n;
    } 
```

为什么调用**Marshal.SizeOf(typeof(Book))**会引发 ArgumentException：

```
Type 'Book' cannot be marshaled as an unmanaged structure; no  meaningful size or offset can be computed. 
```

?

有什么解决办法吗？

我正在将 Book 对象编组为 C++ 结构。

如果我这样做：

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct Book
    {

        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 1000)]
        public Page[] astInject2;
    }

    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct Page
    {
        public int n;
    } 
```

然后`Marshal.SizeOf(typeof(Book))`按应有的方式返回 4000。请注意，我不能将 Book 定义为结构，它必须是类。

# ruby - Lion + Homebrew：如何修复“配置”脚本？

> ID：14003706
> 
> 赞同：3
> 
> 时间：2012-12-22T14:38:57.193
> 
> 标签：ruby, imagemagick, osx-lion, homebrew

当我运行时`brew doctor`，我得到输出：

```
Warning: "config" scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following "config" scripts:

    /opt/ImageMagick/bin/Magick++-config
    /opt/ImageMagick/bin/Magick-config
    /opt/ImageMagick/bin/MagickCore-config
    /opt/ImageMagick/bin/MagickWand-config
    /opt/ImageMagick/bin/Wand-config
Warning: Your XQuartz () is outdated
Please install XQuartz 2.7.4. 
```

我该如何解决它，或者我错过了什么重要的东西？

**编辑：**我相信这就是我无法安装`rmagick`库的原因。在安装时，我收到此错误消息：`an't install RMagick 2.13.1\. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:13:11.777

解决此问题的唯一方法是从 $PATH 变量中删除“配置”脚本。删除 ImageMagick 的安装就可以了。你总是可以用 brew 重新安装它。

请记住，如果您有其他软件依赖于 ImageMagick 的特定位置，这可能会导致问题。

# mysql - fmdb ios 创建和插入查询

> ID：14003710
> 
> 赞同：0
> 
> 时间：2012-12-22T14:39:11.050
> 
> 标签：mysql, ios, sqlite, ios6, fmdb

我正在使用此查询来填充和创建我的表。但它没有创建表，也没有插入值。使用 FMDB for ios。我是 ios 数据库中的菜鸟，这不起作用。请指导我应该如何使它工作。提前致谢。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *docsPath = [paths objectAtIndex:0];
 NSString *path = [docsPath stringByAppendingPathComponent:@"example.db"];

  database = [FMDatabase databaseWithPath:path];

 [database open];

 [database executeUpdate:@"CREATE TABLE `report` (`id` int(100) NOT NULL AUTO_INCREMENT,`Date` double NOT NULL,`product` varchar(200) NOT NULL,`Description` varchar(200) NOT NULL,`price` varchar(200) NOT NULL,`address` varchar(200) NOT NULL,`payment` varchar(200) NOT NULL, PRIMARY KEY (`id`))"];

 [database executeUpdate:@"insert into report(Date, product, Description, price, address,payment) values(?,?,?,?,?,?)",
 1/1/05,abc,example,example123,example456,123,nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:54:14.283

它是 SQLite，而不是 MySQL

如果表不存在，则使用此查询创建表

```
CREATE  TABLE  IF NOT EXISTS report (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , date DOUBLE NOT NULL , product VARCHAR NOT NULL , description VARCHAR NOT NULL , price VARCHAR NOT NULL , address VARCHAR NOT NULL , payment VARCHAR NOT NULL ) 
```

# http - Arduino 以太网客户端两次读取数据

> ID：14003711
> 
> 赞同：1
> 
> 时间：2012-12-22T14:39:13.510
> 
> 标签：http, arduino, ethernet

我一直在玩带有以太网屏蔽的 Arduino Uno，试图阅读网页。到目前为止，我的代码正在运行，但由于某种原因，它读取了 HTTP 正文两次，我不知道为什么。任何帮助表示赞赏。

```
if(client.connect(host, 80)) {

Serial.println("connecting...");

client.println("GET /arduino.php HTTP/1.1");
client.println("Host: hostname.com");
client.println("User-Agent: arduino-ethernet");
client.println("Connection: close");
client.println();

Serial.println("begin reading...");

char c;
boolean parsingHeader = true;

while(client.connected()) {
  while(client.available()) {

    if (parsingHeader) {
      Serial.println("Parsing Header");

      client.find((char*)"HTTP/1.1 ");
      char statusCode[] = "000";
      client.readBytes(statusCode, 3);
      statusOk = (strcmp(statusCode, "200") == 0);
      debug2("Status Code: ", statusCode);

      client.find((char*)"Content-Length: ");
      while (isdigit(c = client.read())) {
        content_length = (content_length * 10) + (c - '0');
      }
      debug2("Content-Length: ", content_length);

      client.find((char*)"\n\r\n");
      parsingHeader = false;

    } else {
      c = client.read();
      // if(length < content_length) { // Manual skip
        Serial.print(c);
        length++;
      // }
    }

  }
}

Serial.println();
Serial.println(content_length);
Serial.println(length); 
```

我已经提取了主要的代码块，它存在于一个名为 loop() 的方法中，每 10000 毫秒调用一次。content_length 是正确的，但长度总是正好是两倍。我错过了什么？删除任何一个 while 循环都不会导致输出。

# c++ - Allegro DrawSprite() 无法正常运行 C++

> ID：14003712
> 
> 赞同：0
> 
> 时间：2012-12-22T14:39:14.873
> 
> 标签：c++, allegro, allegro5

简单的 x 和 O 游戏。如果按下 1-9 键，在棋盘的正确位置画一个 X 或一个 O：

## 7|8|9

## 4|5|6

## 1|2|3

代码如下，changePlayer() 函数只是更改播放器（不包括在内），我使用 board[0] 来保存它是哪个播放器。

当我运行程序板时，程序板显示正确，但按一个键时没有绘制 X 和 O。

我试图将所有内容绘制到缓冲区，然后将缓冲区绘制到屏幕但无法正常工作。如果我不使用缓冲区并直接将所有内容绘制到屏幕上 - 它可以完美运行！

我确定我遗漏了一些简单的东西：S 这是代码：

```
int main()
{
int winner = 0;
BITMAP *xSprite;
BITMAP *oSprite;
BITMAP *newSprite;

int board[10];
int i = 0;

for(i=0; i<10; i++)
{
    board[i] = 0;
}

allegro_init();
install_keyboard();
set_color_depth(16);
set_gfx_mode( GFX_AUTODETECT, 1920, 1080, 0, 0);

xSprite = load_bitmap( "x.bmp", NULL);

oSprite = load_bitmap( "o.bmp", NULL);

BITMAP *buffer = create_bitmap(1920, 1080);

//draw black background
rectfill(buffer,0,0,1920,1080,makecol(0,0,0));
//draw white grid
line( buffer, 200, 0, 200, 480, makecol( 255, 255, 255));
line( buffer, 400, 0, 400, 480, makecol( 255, 255, 255));
line( buffer, 0, 150, 680, 150, makecol( 255, 255, 255));
line( buffer, 0, 300, 680, 300, makecol( 255, 255, 255));

acquire_screen();
blit(buffer, screen, 0, 0, 0, 0, 1920, 1080);
clear_bitmap(buffer);
release_screen();

while(!key[KEY_ESC])
{
  clear_keybuf();

  if (board[0] == 0)
    newSprite = xSprite;
  else
    newSprite = oSprite;

  acquire_screen();

  if(key[KEY_7] && board[7] == 0) {draw_sprite( screen, newSprite, 0, 0); board[7] = 1+board[0]; board[0] = changePlayer(board[0]);}
  if(key[KEY_8] && board[8] == 0) {draw_sprite( screen, newSprite, 200, 0); board[8] = 1+board[0]; board[0] = changePlayer(board[0]);}
  if(key[KEY_9] && board[9] == 0) {draw_sprite( screen, newSprite, 400, 0); board[9] = 1+board[0]; board[0] = changePlayer(board[0]);}

  if(key[KEY_4] && board[4] == 0) {draw_sprite( screen, newSprite, 0, 150); board[4] = 1+board[0]; board[0] = changePlayer(board[0]);}
  if(key[KEY_5] && board[5] == 0) {draw_sprite( screen, newSprite, 200, 150); board[5] = 1+board[0]; board[0] = changePlayer(board[0]);}
  if(key[KEY_6] && board[6] == 0) {draw_sprite( screen, newSprite, 400, 150); board[6] = 1+board[0]; board[0] = changePlayer(board[0]);}

  if(key[KEY_1] && board[1] == 0) {draw_sprite( screen, newSprite, 0, 300); board[1] = 1+board[0]; board[0] = changePlayer(board[0]);}
  if(key[KEY_2] && board[2] == 0) {draw_sprite( screen, newSprite, 200, 300); board[2] = 1+board[0]; board[0] = changePlayer(board[0]);}
  if(key[KEY_3] && board[3] == 0) {draw_sprite( screen, newSprite, 400, 300); board[3] = 1+board[0]; board[0] = changePlayer(board[0]);}

  release_screen();
}
return 0;

}   
END_OF_MAIN(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T05:42:29.020

鉴于 Allegro 4 真的很老，并且在现代操作系统上并不总是能很好地工作，一些一般性的指针：

*   如果您刚刚开始，请使用 Allegro 5

*   始终使用`set_color_depth(desktop_color_depth())`以获得最大的兼容性。

*   使用`GFX_GDI`以获得最大的兼容性。（显然不是最快的驱动，但对于简单的游戏来说，没关系。）

*   不要使用`acquire_screen()`和`release_screen()`

对于您的特定问题，没有什么好说的，因为您发布的代码显然适合您。如果您使用的是缓冲区，那么您当然需要确保在每一帧上将其 blit 到屏幕上。

# jquery - 更改背景图像 jquery

> ID：14003715
> 
> 赞同：0
> 
> 时间：2012-12-22T14:40:02.400
> 
> 标签：jquery

我有一个脚本，当一个文件被拖到它上面时，它会改变 div 的背景颜色，但是我想改变它，以便背景图像发生变化，例如带有世界“放下你的文件”的图像

这是到目前为止我必须使用的代码。

```
function dragover(e)
{
   e.stopPropagation(); 
   e.preventDefault();

f('.dropable').css({
    backgroundColor : 'rgb(51, 51, 51)',
    border : 0,
}); 
```

}

我试过了，但它似乎没有用。

```
function dragover(e)
{
e.stopPropagation(); 
e.preventDefault();

f('.dropable').css({
    backgroundColor : 'rgb(51, 51, 51)',
    border : 0,
    backgroundImage','url(uploadimg.png)
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:50:46.767

您可以使用类名（例如`dragover`）和[`.addClass()`](http://api.jquery.com/addClass/).

```
​.dragover {
    background-color : rgb(51, 51, 51);
    border: 0;
    background-image: url(uploadimg.png);
}​ 
```

```
var dragover = function(e) {
    e.stopPropagation();
    e.preventDefault();
    f(".dropable").addClass("dragover");
}​ 
```

我不知道您为什么要使用`f(...)`，但我保持原样。通常，我会使用`$(...)`.

* * *

话虽如此，如果你还想去的话`.css()`。您可以使用以下语法来执行此操作：

```
var dragover = function(e) {
    e.stopPropagation();
    e.preventDefault();
    f(".dropable").css({
        backgroundColor: "rgb(51, 51, 51)",
        border: 0,
        backgroundImage: "url(uploadimg.png)"
    });
} 
```

# iframe - 异步 iframe 不工作

> ID：14003717
> 
> 赞同：1
> 
> 时间：2012-12-22T14:40:07.473
> 
> 标签：iframe, asynchronous

我有以下代码在主页加载后加载 iframe 内容

```
<head>
    <title></title>
</head>
<body>
    <script>
    (function(d){
    var iframe = d.body.appendChild(d.createElement('iframe')),
    doc = iframe.contentWindow.document;

    // style the iframe with some CSS
    iframe.style.cssText = "position:absolute;width:200px;height:100px;left:0px;";

    doc.open().write('<body onload="' + 
   'var d = document;d.getElementsByTagName(\'body\')[0].' + 
   'appendChild(d.createElement(\'script\')).src' + 
   '=\'http:\/\/google.com\'">');

   doc.close();

   })(document);
 </script>
</body> 
```

不幸的是，这段代码没有按预期工作。谁能指出这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:59:20.453

这可能是因为这个函数从未被调用过。给你的函数命名并从某个地方调用它，例如 body onLoad 事件

# mysql - 从两个表中选择计数不同的和常见的行

> ID：14003722
> 
> 赞同：0
> 
> 时间：2012-12-22T14:40:37.830
> 
> 标签：mysql, sql

我有两个表，T1 和 T2 如下：

```
CATEGORY     ID
1           1100
1           1200
1           1300
1           1500 
2           2000
2           2100
2           2300
2           2500 
```

我需要知道 ：

*   T1 和 T2 之间有多少行相似（相同的 CATEGORY 和 ID）
*   T2 中有多少行不在 T1 中
*   T1 中有多少行不在 T2 中

从今天早上开始，我就一直在努力，并试图这样做以获得类似的行：

```
select count(*) from T1, T2 WHERE 
T1.CATEGORY = T2.CATEGORY AND T1.ID = T2.ID; 
```

但我不知道如何获得唯一的行（仅在 T1 或 T2 中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T14:46:11.280

问题 1

```
SELECT  COUNT(*) totalCount
FROM    T1 a 
        INNER JOIN T2 b
            ON a.Category = b.Category AND
                a.ID = b.ID 
```

问题2（*使用`LEFT JOIN`*）

```
SELECT  COUNT(*) totalCount
FROM    T2 a 
        LEFT JOIN T1 b
            ON a.Category = b.Category AND
                a.ID = b.ID
WHERE   b.Category IS NULL 
```

问题3（*使用`LEFT JOIN`*）

```
SELECT  COUNT(*) totalCount
FROM    T1 a 
        LEFT JOIN T2 b
            ON a.Category = b.Category AND
                a.ID = b.ID
WHERE   b.Category IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:50:00.050

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE lutser
        ( id INTEGER NOT NULL
        , category INTEGER NOT NULL
        );
INSERT INTO lutser(category, id) VALUES
(1,1100) ,(1,1200) ,(1,1300) ,(1,1500)
,(2,2000) ,(2,2100) ,(2,2300) ,(2,2500)
,(1,3500) -- added these
,(2,3500)
        ; 
```

这些查询为 category==1 构造一个“位掩码”1，为 category==2 构造一个 2，并将它们相加。因此，当 id 出现在两个集合中时，掩码为 3，仅在第一个集合中为 1，仅在第二个集合中为 2。外部联接+合并在这里起到了作用。

```
 --
        -- CTE version
        --
WITH flags AS (
        WITH one AS ( SELECT category AS flag , id FROM lutser WHERE category = 1)
        , two AS ( SELECT category AS flag , id FROM lutser WHERE category = 2)
        SELECT COALESCE(one.flag, 0) + COALESCE(two.flag, 0) AS flag
        FROM one
        FULL OUTER JOIN two ON two.id = one.id
        )
SELECT flag, COUNT(*)
FROM flags
GROUP BY flag;

        --
        -- Non-CTE version
        --
SELECT COALESCE(one.flag, 0) + COALESCE(two.flag, 0) AS flags
        , COUNT(*)
FROM (
        SELECT category AS flag , id
        FROM lutser WHERE category = 1
        ) one
FULL OUTER JOIN (
        SELECT category AS flag , id
        FROM lutser WHERE category = 2
        ) two ON two.id = one.id
GROUP BY flags; 
```

结果（对于两个查询；-）：

```
 flags | count 
-------+-------
     1 |     4
     2 |     4
     3 |     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:46:59.450

如果您不能假设行是不同的，那么您需要采取稍微不同的方法。这是一种同时回答所有三个问题的方法，同时考虑到重复的行：

```
select (case when isT1 = 1 and isT2 = 0 then 'BOTH'
             when isT1 = 1 then 'T1-Only'
             else 'T2-Only'
        end) as WhereRow,
       count(*) as NumDistinctRows,
       sum(cnt) as NumTotalRows
from ((select category, id, count(*) as cnt, 1 as isT1, 0 as isT2
       from t1
       group by category, id
      ) union all
      (select category, id, count(*) as cnt, 0 as isT1, 1 as isT2
       from t2
       group by category, id
      )
     ) t
group by isT1, isT2 
```

# php - 展平多维数组而无需递归

> ID：14003723
> 
> 赞同：1
> 
> 时间：2012-12-22T14:40:39.553
> 
> 标签：php, multidimensional-array

这是我仍在开发的膳食计划应用程序。到目前为止，我已经得到了很多有用的帮助。[您可以在http://maureenmoore.com/momp_tests/122212.html](http://maureenmoore.com/momp_tests/122212.html)查看视图源

我在我的 process.php 中使用以下内容（jquery 表单被提交到）

```
$stack = array();

foreach ($_REQUEST as $key => $value)
{
    array_push($stack,$value);
}
$stack = array_values($stack);

print_r($stack);

$comma_separated = implode(",", $stack);

echo "\n\n" . $comma_separated . "\n\n"; 
```

当我单击本地主机上的提交按钮时，它显示数组到字符串转换的错误，因为它是一个多维数组。如何在不使用递归函数的情况下摆脱第一个空键？现在我已经将它上传到我的主机帐户，但它没有打印逗号分隔的列表，因为它是一个键为 null 的多维数组，所以我不再看到该错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:13:01.650

您发送到 php 脚本的数据是`{data: selectedBoxes}`并且您正在使用 post 方法。And`selectBoxes`是一个数组，其中包含拖到右侧框中的内容。

要在 php 中获取数据，您只需要遍历`data`post 变量：

```
foreach ($_POST['data'] as $key => $value)
{
  // get all meals that were dragged
} 
```

另请注意，如果您拖动框中的其中一个东西，您将获得同一餐的多个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:03:01.377

对不起，我糊涂了，如果我理解了，请告诉我，对吧。你得到一个错误，因为它是一个多维数组。

尝试这个

```
foreach ($_REQUEST as $tempArray) {
          foreach ($tempArray as $key => $value) {
            array_push($stack,$value);
          }
} 
```

或者

```
$tempArray = $_REQUEST;
foreach ($tempArray[0] as $key => $value) {
         array_push($stack,$value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:04:13.773

您可以使用 array_filter() 删除空值

```
$new_array_without_nulls = array_filter($array_with_nulls, 'strlen'); 
```

和 array_reduce() 转换为逗号分隔而不是 implode [http://php.net/manual/en/function.array-reduce.php](http://php.net/manual/en/function.array-reduce.php)

# jquery - 如何停止 IE 从桌面拖动显示图像

> ID：14003728
> 
> 赞同：1
> 
> 时间：2012-12-22T14:41:08.250
> 
> 标签：jquery, internet-explorer

我编写了一个小 jQuery 函数来接受从用户桌面拖动的图像，在 Chrome 中运行良好但在 IE 中运行良好。在 IE 中，它只是在浏览器中显示图像，就好像`event.preventDefault()`它不存在一样。我找不到解决方法来防止这种情况，这是在 IE 中不起作用的简化代码：

```
 $("#imgUploadArea").bind('drop', function(e) {
        e.preventDefault(); //doesn't work 
        return false;       //doesn't work 

        //doesn't work 
        var ev = event || window.event;
        ev.preventDefault();        

        return false;       

    }).bind('dragenter', function(e) {  
        e.preventDefault();
        $(this).addClass('greenBorder');
    }).bind("dragleave", function(e){
        $(this).removeClass('greenBorder');
    }); 
```

如果有人可以阐明如何在从桌面拖动时停止 IE 在浏览器中显示图像，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:46:26.053

正如你[在这里](http://html5test.com/compare/browser/ie09.html)看到的，IE 9 不支持拖放。

正如你[在这里](http://html5test.com/compare/browser/ie10.html)看到的，IE 10 支持它。

因此，除非您使用 IE 10，否则您无法在原版 IE 中使用拖放操作。

# ruby-on-rails - 为什么我不能计算一行中的模型数量？

> ID：14003730
> 
> 赞同：-1
> 
> 时间：2012-12-22T14:41:26.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

这会返回错误。我不知道这句话有什么问题:(

```
@communitiies_count = user.get_up_voted Community.count 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:02:54.983

下次您可能也应该发布您遇到的错误，但我认为您想要的是：

```
@communities_count = user.get_up_voted(Community).count 
```

# jquery - html表单输入和选择在触摸设备上不起作用

> ID：14003731
> 
> 赞同：2
> 
> 时间：2012-12-22T14:41:28.340
> 
> 标签：jquery, html, touch

我正在尝试建立一个可以在台式机和平板电脑上运行的网站。显然，触摸设备带来了一些挑战，例如按钮点击。我已经过去了，但现在我单击的按钮会打开一个表单。此表单包含一些选择和输入类型。

单击此按钮：

```
<button class="addwebcam">Add Webcam</button> 
```

这会打开一个表格：

```
<div id="cameraformwebcam" title="Add a webcam">
    <form id='AddCameraFormWebcam' action=''>
        <p>
        <label for="CameraName">Camera name:
        <span class="small">Enter label for camera</span>
        </label>
        <input type="text" id="CameraName" name="camera_name" size="24" maxlength="36" />
        </p>
        <p>
        <label for='CameraQuality'>Camera quality:
        <span class="small">Select camera quality</span>
        </label>
        <select id='CameraQuality' name='camera_quality'>
            <option value='HIGH' selected='selected'>High</option>
            <option value='MEDIUM'>Medium</option>
            <option value='MOBILE'>Mobile</option>
        </select>
        </p>
        <p>
        <label for='CameraStatus'>Motion detection:
        <span class="small">Turn motion detection on/off</span>
        </label>
        <select id='CameraStatus' name='camera_status'>
            <option value='ENABLED' selected='selected'>On</option>
            <option value='DISABLED'>Off</option>
        </select>
        </p>
        <p>
        <label for='EmailNotice'>Email notice:
        <span class="small">Turn email notices on/off</span>
        </label>
        <select id='EmailNotice' name='email_notice'>
            <option value='ENABLED' selected='selected'>On</option>
            <option value='DISABLED'>Off</option>
        </select>
        </p>
        <p>
        <label for='CameraSensitivity'>Camera sensitivity:
        <span class="small">Select camera sensitivity</span>
        </label>
        <select id='CameraSensitivity' name='camera_sensitivity'>
            <option value='HIGH'>High</option>
            <option value='AVERAGE' selected='selected'>Average</option>
            <option value='LOW'>Low</option>
        </select>
        </p>
        <input type='hidden' name='camera_type' value='WEBCAM' />
        <button type='submit' class='submit_camera' name='addcamera' value='Add'>Add</button>
        <button type='reset' class='cancel_changes' name='cancel_changes' value='Cancel'>Cancel</button>
    </form>
    </div> 
```

我的问题是该表格在平板电脑上测试时不起作用（在台式机上很好）。选择类型仅突出显示但未打开以显示选择，并且相机名称的输入类型也仅突出显示但键盘未打开。

这是用jquery处理的：

```
jQuery(".addwebcam").live('touchstart click', function(event){
    event.stopPropagation();
    touchStart(event);
    if(event.handled !== true) {

        jQuery('#cameraformwebcam').show();
    jQuery('.addwebcam').hide();

        event.handled = true;
    } else {
        return false;
    }
}); 
```

你会注意到这个`touchStart`功能。这是我在**[这里](https://stackoverflow.com/questions/6251150/ipad-ios-html-form-select-does-not-open-on-touch)**找到的一个问题，用于选择在触摸设备上工作。那行不通，而且我需要所有字段都可以工作，包括输入类型。

```
function touchStart(event) {
   if (event.target.tagName != 'SELECT') {
      event.preventDefault();
   }
} 
```

我的目标是保留一个同时适用于平板电脑和桌面网站的网站（移动设备不同）。特别是因为它只有几个按钮和表单。所以我试图避免使用 jquery mobile 并为平板电脑创建一个单独的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T10:04:54.570

我已经用你的代码创建了一个小提琴，并做了一些小改动并在 iphone/ipad 和桌面上进行了测试，对我来说很好：
这里 html：

```
<button id="addwebcam">Add Webcam</button>
<div id="cameraformwebcam" title="Add a webcam">
    <form id='AddCameraFormWebcam' action=''>
        <p>
            <label for="CameraName">Camera name: <span class="small">Enter label for camera</span>

            </label>
            <input type="text" id="CameraName" name="camera_name" size="24" maxlength="36" />
        </p>
        <p>
            <label for='CameraQuality'>Camera quality: <span class="small">Select camera quality</span>

            </label>
            <select id='CameraQuality' name='camera_quality'>
                <option value='HIGH' selected='selected'>High</option>
                <option value='MEDIUM'>Medium</option>
                <option value='MOBILE'>Mobile</option>
            </select>
        </p>
        <p>
            <label for='CameraStatus'>Motion detection: <span class="small">Turn motion detection on/off</span>

            </label>
            <select id='CameraStatus' name='camera_status'>
                <option value='ENABLED' selected='selected'>On</option>
                <option value='DISABLED'>Off</option>
            </select>
        </p>
        <p>
            <label for='EmailNotice'>Email notice: <span class="small">Turn email notices on/off</span>

            </label>
            <select id='EmailNotice' name='email_notice'>
                <option value='ENABLED' selected='selected'>On</option>
                <option value='DISABLED'>Off</option>
            </select>
        </p>
        <p>
            <label for='CameraSensitivity'>Camera sensitivity: <span class="small">Select camera sensitivity</span>

            </label>
            <select id='CameraSensitivity' name='camera_sensitivity'>
                <option value='HIGH'>High</option>
                <option value='AVERAGE' selected='selected'>Average</option>
                <option value='LOW'>Low</option>
            </select>
        </p>
        <input type='hidden' name='camera_type' value='WEBCAM' />
        <button type='submit' class='submit_camera' name='addcamera' value='Add'>Add</button>
        <button type='reset' class='cancel_changes' name='cancel_changes' value='Cancel'>Cancel</button>
    </form>
</div> 
```

这里js：

```
$('#cameraformwebcam').hide();
$("#addwebcam").click(function(event){

    event.stopPropagation();
    touchStart(event);
    if(event.handled !== true) {

        $('#cameraformwebcam').show();
    $('.addwebcam').hide();

        event.handled = true;

    } else {
        return false;
    }
});

function touchStart(event) {
   if (event.target.tagName != 'SELECT') {
      event.preventDefault();
       alert(event);
   }
}
$('.submit_camera').click(function(){
    alert("Send data");

}); 
```

[链接到小提琴](http://jsfiddle.net/konstheinrich188/TKfEJ/)

希望能帮助到你

# jquery - 在 Backbone.js 视图上调用 jQuery Unobtrusive 验证

> ID：14003736
> 
> 赞同：2
> 
> 时间：2012-12-22T14:41:56.403
> 
> 标签：jquery, validation, backbone.js, unobtrusive-validation

使用 jQuery 非侵入式验证插件动态解析要验证的 html 时，不会显示验证消息。Js fiddle显示问题如下

**提琴手**

[http://jsfiddle.net/R92Yn/2/](http://jsfiddle.net/R92Yn/2/)

```
render: function () {
    var tmpl = _.template(this.template);
    $.validator.unobtrusive.parse(tmpl);
    this.$el.html(tmpl);
    return this;
},
validateForm: function () {
    //$(this.$el).validate();
} 
```

我试图在单击验证按钮时显示需要 usernaem 的错误消息。但是什么也没有发生，在你模糊之后，控制台中也可以看到一个 js 错误。那么我如何使验证与 Backbone.js 视图一起工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T16:38:41.477

jQuery 不显眼的验证插件（最初是为 ASP.Net MVC3 构建的）要求将您`input`的 s 放置在`form`元素内。所以如果没有`form`插件将无法工作。

因此，修改您的模板以包含一个表单：

```
<script type="text/template" id="loginTemplate">
    <form id="myform">
        <label>Username</label>
        <input type="text" name="username" id="username" data-val="true" 
               data-val-required="user name required"/>
        <span data-valmsg-for="username" data-valmsg-replace="true"></span>
        <input type="button" id="submit" value="Validate"/>
    </form>
</script> 
```

注意：我也更改`data-val-required="true"`为`data-val-required="user name required"`因为`data-val-required`您指定了错误消息。

为了不显眼的验证工作，您需要`$.validator.unobtrusive.parse`在 Backbone 视图附加到 DOM 后调用。要做到这一点[，有多种退出方式](https://stackoverflow.com/questions/9145680/calling-javascript-on-rendering-views-in-backbone-js-post-render-callback)。

一是使用`_.defer()`函数：

```
render: function() {
        var tmpl = _.template(this.template);            
        this.$el.html(tmpl);
        _.defer( function(){ $.validator.unobtrusive.parse(tmpl); });            
        return this;
} 
```

然后您可以使用以下代码手动触发不显眼的验证

```
validateForm: function() {
        $("#myform").data('unobtrusiveValidation').validate();
} 
```

最后这里是一个有效的[JSFiddle](http://jsfiddle.net/wJV6g/)。

# c# - Android 编程：使用具有数据和画布控件的 html5 页面发送邮件

> ID：14003737
> 
> 赞同：1
> 
> 时间：2012-12-22T14:41:56.603
> 
> 标签：c#, android, web-services

我正在开发 android 应用程序，我已经在 html5 页面中集成了一些带有画布控件的报告。我已经使用 jquery 在 html5 页面上加载了来自 android 数据库的数据并准备了一些图表。现在我必须在邮件中发送这个带有动​​态数据和画布控件的 html5 页面。

如果这在 android 中是不可能的，那么我可以使用另一个选项从托管在服务器上的 dot net、c# web 服务来执行此操作。Android 应用程序将向 Web 服务发送请求以完成相同的工作。但是在这里，我需要帮助才能从 Web 服务中做同样的事情。

我发送带有动态数据和由 jquery 和 json 加载的画布控件的 html5 页面的所有要求。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:49:50.433

您不能（按设计）从网页发送电子邮件。

您需要找到（=program）一种方法，以将用户正在查看的（动态）数据的页面呈现到电子邮件的正文中，并在 android 上使用 email-intend 发送它。请参阅：[以编程方式发送自动电子邮件](https://stackoverflow.com/questions/4668871/send-auto-email-programmatically)

# javascript - 在对象中执行函数

> ID：14003743
> 
> 赞同：1
> 
> 时间：2012-12-22T14:42:36.357
> 
> 标签：javascript

我们可以在对象本身内执行一个函数吗？请参见下面的代码：

```
obj = {
     name:function(){alert("maizere");}
}; 
```

这`obj.name()`也意味着相同，即访问对象并执行函数。为什么不在对象本身内部执行，如下所示：

```
obj = {
     name:function(){
         alert("maizere");
     },
     name();
}; 
```

既然`obj = new obj() == { obj() }`对？

当我尝试这个时，我没有成功。这里有什么问题还是我错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:45:17.283

以下符号：

```
var obj = {}; 
```

被称为“对象字面量”。它需要一个键/值对列表，即对象的属性。

仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T14:47:15.227

您尝试的语法没有意义。

如果您希望立即执行某个功能，可以执行以下操作。这通过将您的函数转换为表达式而不是声明来工作：

```
obj={
  name: (function(){
    alert("maizere");
  })()
}; 
```

但是，这与以下内容不同：

```
obj={
  name: function(){
    alert("maizere");
  }
};

obj.name(); 
```

因为`this`里面每个不同的函数调用都会不同。前者`this`wll 指向全局对象（通常`Window`在浏览器中），后者`this`指向`obj`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T14:50:04.483

对象字面量不是类，因此与对象类似，对根对象没有作用域`window`。此外，对象字面量的语法结构并不是为了做到这一点。它是一个异构列表键值对。像这样：

```
var o = { a : b }; 
```

JavaScript 没有类。但是，该`with`语句（很少使用）允许这种行为（在不指定对象根的情况下访问对象的属性或方法）。

```
var obj = { name: function() {} };

with ( obj ) {
    name();
} 
```

但是这个结构不应该在代码中使用，因为它会导致问题。但是作为对您问题的回答，它可以完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T14:53:32.257

是的，肯定有问题。

JavaScript 对象由名称：值对组成，因此您不能打破该模式并做其他事情。请查看[详细信息](https://developer.mozilla.org/en-US/docs/JavaScript/Data_structures)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T15:42:53.240

如果你想要一个基于类的语言意义上的构造函数，这可能是一个更好的方法：

```
// "class" definition and constructor
var MyObject = function() {
  this.name();
};
// method
MyObject.prototype.name = function() {
  alert("maizere");
};

// create an object instance of your "class"
var obj = new MyObject(); 
```

请注意，Javascript 没有类。但是，该术语有时有助于理解 Javascript 构造函数的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T14:55:37.847

JavaScript 有几个内置对象，例如 String、Date、Array 等。

对象只是一种特殊的数据，具有属性和方法。

访问对象属性的语法是：

```
objectName.propertyName 
```

例子：

```
var message="Hello World!";
var x=message.length; 
```

执行上述代码后，x 的值为：12

注意消息是对象。

这是另一个使用 new 实例化对象并向其添加属性的示例。

```
person=new Object();
person.firstname="John";
person.lastname="Doe";
person.age=50;
person.eyecolor="blue"; 
```

现在，这是一个类示例：

```
function HelloWorld(hour)
{
  // class "constructor" initializes this.hour field
  if (hour)
  {
    // if the hour parameter has a value, store it as a class field
    this.hour = hour;
  }
  else
  {
    // if the hour parameter doesn't exist, save the current hour
    var date = new Date();
    this.hour = date.getHours();
  }

  // display greeting
  this.DisplayGreeting = function()
  {
    if (this.hour >= 22 || this.hour <= 5) 
      document.write("Goodnight, world!");
    else
      document.write("Hello, world!");
  }  
} 
```

在此示例中，HelloWorld 是类。

# ios - 什么是 *.PODSPEC 文件？

> ID：14003747
> 
> 赞同：33
> 
> 时间：2012-12-22T14:43:17.360
> 
> 标签：ios, xcode, cocoapods

我是一名 iOS 开发人员，我对 PODSPEC 文件非常感兴趣：

1.  这有什么用途？
2.  为什么我们需要它？
3.  它有什么帮助？

非常感谢你们。

希望在这个问题中我们会收集足够的信息，因为我还没有找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-22T14:48:11.743

这是 CocoaPods 的文件扩展名，它作为 ruby​​ gem 分发。可以在[推特](http://twitter.com/CocoaPods)上找到。

也在[github上](https://github.com/CocoaPods/CocoaPods/wiki/The-podspec-format)

编辑：

Cocoapods ( [http://cocoapods.org/](http://cocoapods.org/) ) 是 XCode 的依赖管理框架。它允许您以声明方式定义项目依赖项并将它们包含在项目的构建中。它就像 XCode 的 Apache Maven 或 Ruby Gems。

你为什么需要这个？

作为一名 iOS 开发人员，您肯定会使用很多其他人编写的代码，以库的形式。你可能不记得了，但如果你必须从头开始实现所有东西，你的生活会有多复杂？通常（因为手动构建静态库非常无聊），您只需将库代码添加到您的项目中。但这有一些缺点：可能在其他地方的代码存储在您的存储库中，浪费空间。有时，很难获得特定版本的库。没有中央位置可以让您查看可用的库。寻找新版本的库并用它更新您的项目很无聊，有时甚至很痛苦。手动下载库会导致可能对下载的代码进行一些更改并将其保留在那里（使更新更加困难，

复制自：[http ://www.raywenderlich.com/12139/introduction-to-cocoapods](http://www.raywenderlich.com/12139/introduction-to-cocoapods)

# windows-phone-8 - Windows Phone 8 开发的设计问题

> ID：14003748
> 
> 赞同：0
> 
> 时间：2012-12-22T14:43:32.210
> 
> 标签：windows-phone-8

由于 WP8 有许多 Emulaotors 并且适用于不同的分辨率，我正在关注以下链接，但代码似乎不起作用。请检查第 4 点、第 6 点和第 7 点

**[适用于 Windows Phone 8 的多分辨率应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974(v=vs.105).aspx)**

代码给出错误。好心检查

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:53:00.413

代码中有错误。在步骤 4 中更改此行：

```
public class MultiResImageChooserUri 
```

对此：

```
public class MultiResImageChooser 
```

然后它应该工作。

**编辑：**这篇文章根本没有提到命名空间，所以我假设这是你的问题。在第 6 步中，它说要添加 xaml 命名空间：

```
xmlns:h="clr-namespace:MultiResSnippet" 
```

因此，基于此，您需要确保您的类位于 MultiResSnippet 命名空间中（或将其更改为您自己的命名空间）。

因此，请确保您的代码是：

使用 System.Windows.Media.Imaging；

```
namespace MultiResSnippet
{
  public class MultiResImageChooser
  {
     ...
  }
} 
```

在此处了解[有关 xaml 命名空间的](http://msdn.microsoft.com/en-us/library/vstudio/ms747086%28v=vs.90%29.aspx)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T12:28:37.510

只需在 APP.XAML 中添加您的项目名称，例如“PhoneApp”

将您的代码： xmlns:h="clr-namespace:MultiResSnippet" 更改为以下代码： xmlns:h="clr-namespace:PhoneApp.MultiResSnippet"，它可以正常工作。

# physics - 如何模拟转弯半径

> ID：14003751
> 
> 赞同：0
> 
> 时间：2012-12-22T14:43:39.807
> 
> 标签：physics, game-physics

嗨，我试图模拟车辆绕一个半径转弯。这就是我目前正在做的

1.  计算转弯半径。
2.  计算加速度并添加到速度。
3.  使用速度大小来确定一次更新中行进的距离。
4.  用于`arctan( distanceTraveled / turnRadius )`获取旋转角度。
5.  更新车辆角度。
6.  通过车辆角度旋转速度。例如`velocity *= Quaternion.AngleAxis(angle, Vector3.up)`
7.  用速度更新车辆位置。

我目前漂移很多，不能直行。任何想法如何正确实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:34:41.543

```
1\. You want to calculate the radius of the turn, what do you know to calculate it?

2\. You can calculate the acceleration by the formula: a = v²/r , here is v the velocity of the rotating object, r is the radius.

3\. The distance is just the velocity times the time travelled.

4\. The angle of rotation can be calculated by:

   the "travelled" angle per second = w = 2*pi*revelotions per second "n"
         w= 2*pi*n
w*t="travelled" angle = angle
angle = 2*pi*n*t

we also know that= v = 2*pi*r*n  n=v/(2*pi*r)
You can put that in the formulo for the angle in function of the velocity.

5\. I think it is answerred in 4.

6\. you have to use sin and cosine to calculate the components of the velocity on every axis. If you know what derivatives are you can use them to calculate the tangence line on the circle where the object moves on. The velocity is in the same direction of the tangence line.

Hope this helped 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:21:25.203

```
1\. Calculate the radius of the turn.
2\. Calculate acceleration and add to velocity.
3\. Use velocity magnitude to determine distance travelled in one update. 
```

到目前为止，一切都很好。

```
4\. Use arctan( distanceTraveled / turnRadius ) to get the angle of rotation. 
```

坚持，稍等。首先，这与第 2 步冲突。要么您使用加速度来*产生*转弯，要么您正在使用圆的几何形状来*强制*转弯。如果你试图混合这些，你充其量只会漂移。其次，你不应该在这里使用 arctan，它只是 angle=(distanceTraveled/radius)。

```
5\. Update vehicle angle. 
```

您是否分别跟踪方位和态度？也就是说，你能模拟一辆侧滑的汽车吗？或者您是否假设汽车指向它正在移动的方向？如果是后者，那么您将保留相同信息的冗余副本，这会引起错误。

```
6\. Rotate velocity by vehicle angle. e.g. velocity *= Quaternion.AngleAxis(angle, Vector3.up). 
```

如果您正确执行了第 2 步，则第 2 步应该已经涵盖了这一点。

```
7\. Update vehicle position with velocity 
```

听起来很合理。

# c - Unpack .xz file within C code

> ID：14003752
> 
> 赞同：1
> 
> 时间：2012-12-22T14:43:44.753
> 
> 标签：c, xz

My question is quite simple. Is there any possible way to unpack packed .xz file in from C code? I would probably call some default linux-integrated program to unpack it for me, but how exactly does it work? I call the external function and than somehow I get directly back to the program content of the extracted file? Let's say that inside the .xz file is text file and I want to read it afterwards.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:11:16.877

I would use `system("xz -dl file.xz")`, but there is good info here and links to source code to implementations: [http://tukaani.org/xz/format.html](http://tukaani.org/xz/format.html)

# c++ - 在同一个硬件单元上创建多个线程

> ID：14003753
> 
> 赞同：5
> 
> 时间：2012-12-22T14:43:49.180
> 
> 标签：c++, multithreading, boost, architecture, game-engine

我的游戏使用多线程架构，线程布局如下：

*   Main：负责高层架构
*   Resources：负责异步文件I/O
*   Network：负责阻塞网络I/O
*   Workers：做 CPU 密集型工作

现在，有 (hardware_threads - 3) 个工作线程，每个未使用的硬件单元一个，但我想通过将“资源”和“网络”线程组合到一个单元来添加一个，因为两个线程都将花费很多时间闲置。

1.  这在带有 boost::thread 的 C++ 中是否可行？
2.  这甚至是值得的优化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T14:49:00.400

你是对的，因为这是一个坏主意。为一项工作设计一个线程听起来很简单，但实际上并非如此——尤其是当某些工作比其他工作更重时。另外，你没有足够的线程。通常，您需要更多的数量来解决当前未运行的其他线程的松弛问题。

这里的根本问题是您正在实现自己的线程后端。这是一个坏主意。你需要转向 TBB 之类的东西，它会为你处理所有这些事情，而英特尔的那些工程师花费了比你更长的时间来分析和研究它。

至于这是否值得优化，嗯，可能不是。只需制造足够的工人并保持它们的负载，阻塞的资源/网络线程不会真正产生太大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:05:06.723

线程非常适合分配工作和避免等待发生的事情，如果我们现在等待并不重要。因此，使用线程对于您的设计来说绝对是一个不错的想法。

至于您应该拥有多少线程，以及是否“值得”拥有更多或更少的线程？这是一个很难回答的问题。对于 CPU 密集型线程，在系统中拥有更多的 CPU 内核确实没有意义，因为拥有更多线程不会完成更多工作[可能仍然有软件架构原因需要拥有更多线程，但这通常是因为软件变得太复杂了，希望你不要到达那里......]

对于等待并因此不使用太多 CPU 的东西，线程的数量更多的是“在代码中易于处理的任何东西” - 显然，拥有数千可能是一个坏主意，但一两个或三个是不会有太大的不同。您显然会遇到与“我如何告诉线程接下来要做什么以及何时需要等待结果...”等相同的问题。空闲线程对系统的“作用”不大性能 - 它占用少量的堆栈内存和更少量的线程控制数据，但它是如此之少，以至于如果你没有大量的它们并不重要。

总而言之，可能就像盲人剪猪毛时所说的“为很少的羊毛而尖叫” - 换句话说，工作量很大，没有多少好处。

# javascript - JavaScript 中的对象操作

> ID：14003758
> 
> 赞同：1
> 
> 时间：2012-12-22T14:45:11.480
> 
> 标签：javascript, html

我想显示对象 Wine1 的所有属性及其各自的值。但是这段代码不起作用：

```
<html>
    <head>

    </head>
    <body>
        <input type="button" value="Button" onClick="f1()">
        <script type="text/javascript">
            function f1()
            {
                var Wine1=new Object();
                Wine1.color="Red";
                Wine1.price="50000 USD";
                Wine1.vine-yard="South";
                var record="Wine1<br><br>";

                for(var prop in Wine1)
                {
                    record+=prop+"="+Wine1[prop]+"<BR>";
                }
                record+="<br>";
                document.write(record);
            }
        </script>
    </body>
</html> 
```

有人请帮我找出错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T14:48:09.037

```
Wine1.vine-yard 
```

`vine-yard`是无效的标识符。它可能会引发语法错误。基本上，标识符中只`_`接受`$`和 字母数字字符。标识符是属性名称或变量名称。

此外，您的循环可能会显示除您定义的属性之外的其他属性。长话短说，这是您需要做的：

```
for (var prop in Wine1) {
    if (Wine1.hasOwnProperty(prop)) {
        record += prop + "=" + Wine1[prop] + "<BR>";
    }
} 
```

最后，使用正确的缩进和空格。阅读您的代码并查看问题所在确实很有帮助。

# android - Intellij IDEA 12 中的 Android 预览配置

> ID：14003762
> 
> 赞同：0
> 
> 时间：2012-12-22T14:45:36.323
> 
> 标签：android, android-layout, intellij-idea

Intellij IDEA 中有一个不错的布局预览。我记得在版本 11 中，我可以添加具有特定密度和屏幕尺寸的自己的配置。这是`Edit`此列表中的按钮：

![布局预览](../Images/cea0dcc9e81810df6e63f4a2778aaba7.png)

在新版本 12 中我看不到它。我现在如何创建自己的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:03:54.347

使用 Android SDK 发行版中的**AVD Manager**（Android Virtual Device Manager），您可以在**Device Definitions**选项卡中添加更多设备：

![AVD](../Images/96a5a452452a08d045b175181a3f52c1.png)

# c++ - directx 过程式编程

> ID：14003765
> 
> 赞同：1
> 
> 时间：2012-12-22T14:45:47.930
> 
> 标签：c++, directx, procedural

嗯，我正在学习 DX11，我希望有一天我可以启动一个简单的 3D 引擎。我正在关注教程系列，我意识到我不需要创建任何类来维护我的代码（教程也使用这种程序方法，但我没有复制粘贴教程代码，我尝试理解教程然后尝试以我的方式编写新内容），我可以只使用函数和全局变量使代码“不稳定”。所以我想知道，当我对 API 有足够的了解并想开始创建自己的库时，这种程序方法是否会有一些缺点？我应该开始写一些课程吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:34:59.527

一开始我从一个小引擎开始，它只包含一堆程序。对于第一个应用程序，它可以工作并且开发速度很快。但是应用程序越复杂，代码就越不可读，维护起来也很糟糕。然后我用 OOP 方法构建了同样的东西，几乎一切都变得更好了。程序的整体结构更简单，有些问题用 oop 可以很好地解决，例如碰撞检测。您有一个父类，例如`CollidableObject`，并派生许多类，如`CollidableSphere`,`CollidableCube`或`CollidableLine`。对于碰撞测试，您只需要使用类`CollidableObject`它实际上是哪个对象并不重要。用程序方法处理这并不是很好。还有许多其他示例，其中 oop 很有用，例如，您可以使用许多不同类型的粒子（广告牌、顶点线、网格、灯光）对粒子系统进行建模，并且只需要实现给定的模式，就可以简单地一起工作。

总而言之，我建议尽快开始上课，但对于第一次有趣的黑客攻击和学习，程序方法并不漂亮但适合。

# templates - Web 模板中的 Lightbox2

> ID：14003776
> 
> 赞同：1
> 
> 时间：2012-12-22T14:47:40.987
> 
> 标签：templates, lightbox

我正在使用模板：[http](http://dribbble.com/shots/333369-Atlas-a-Free-HTML-Template-PSD) ://dribbble.com/shots/333369-Atlas-a-Free-HTML-Template-PSD并希望将 Lightbox 添加到其中。img 文件周围的代码现在看起来像这样：

```
<li data-tags="Web Design">
<a href="#">
  <span class="portfoliohover">
    <h1 class="porthover1">Cool Rollover Titles</h1>
    <h1 class="porthover2">As well as some nifty sub-titles</h1>
  </span>
  <img src="images/portfolio/work2.png" alt="" />
</a>
</li> 
```

如果您浏览了 Lightbox 网站上的所有说明，将 # 更改为源 img，然后放入标签中，它应该可以工作，对吧`rel="lightbox"`？`<a>`我试过了，但它什么也没做，即使我点击它。

# c# - 使用 C#.net 将多个 Oracle 数据导出到单个 Excel 中的单个电子表格

> ID：14003778
> 
> 赞同：0
> 
> 时间：2012-12-22T14:47:56.453
> 
> 标签：c#, .net, export-to-excel, export-to-csv

我在 Oracle PL/SQl 中有 10 个 Select 查询（每个查询将返回至少 1000 条记录）。如何导出在单个 Excel 文件中的单独（多个）电子表格中返回的每个选择查询数据，例如从 Query1 返回的数据应该在电子表格 1 中，从 Query2 返回的数据应该在电子表格 2 中，就像使用 C#.net 一样。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:45:22.417

使用像[NPIO](http://npoi.codeplex.com/)这样的库，它可以创建和操作 Excel 文件。按照他们在[http://www.leniel.net/2009/07/creating-excel-spreadsheets-xls-xlsx-c.html](http://www.leniel.net/2009/07/creating-excel-spreadsheets-xls-xlsx-c.html)上的教程，在“工作簿”中创建“工作表”。

# css - GWT：标签 getOffsetHeight() 值与 CSS 值不匹配

> ID：14003779
> 
> 赞同：1
> 
> 时间：2012-12-22T14:48:00.123
> 
> 标签：css, gwt

在 CSS 中，我将标签的高度设置为 19px。但是，当我使用该方法检查标签的高度时`getOffsetHeight()`，有时会收到 18，有时会收到 20（从不 19）。标签中的文本会在每次`getOffsetHeight`调用之间发生变化。

我不确定是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:04:44.660

设置`height`CSS 属性不包括填充、边框或边距。来自[GWT](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/UIObject.html#getOffsetHeight%28%29)`getOffsetHeight()` javadoc ：

> 获取对象的偏移高度（以像素为单位）。这是对象的总高度，包括边框和填充等装饰，但不包括边距。

因此，您看到的值增加是因为`getOffsetHeight()`返回 的总高度`Label`，包括边框和填充。

# java - 使用 Rhino 分析 Javascript 代码

> ID：14003788
> 
> 赞同：3
> 
> 时间：2012-12-22T14:49:02.237
> 
> 标签：java, javascript, rhino, ejs

我正在开发一个预生成 CanJS 应用程序页面的系统。这样我们的页面立即可用，我们不需要用#来处理 SEO 的东西！和无头浏览器。

问题是[rhino](https://developer.mozilla.org/de/docs/Rhino)的性能似乎比现代浏览器中使用的 V8 或其他原生 Javascript 引擎慢得多。在浏览器中，页面生成 EJS 模板最多需要 3-4 秒，[rhino](https://developer.mozilla.org/de/docs/Rhino)需要 10-12**分钟**。页面和生成器都使用从 RESTful API 收集的相同 JSON。

我使用最高优化级别创建了一个 Javascript 上下文：

```
context = ContextFactory.getGlobal().
context.setOptimizationLevel(9);
scope = context.initStandardObjects();
scriptable = context.newObject(scope); 
```

使用当前[EJS 库调用 EJS 渲染过程](http://embeddedjs.com)

```
function invokeEjs(ejsContent, parameters){
    try{
        var unwrap = eval('new Object(' + parameters + ')');
        return new EJS({
            text: ejsContent
        }).render(unwrap);
    } catch(e){
        return outputException(e, ejsContent);
    } 
} 
```

现在，一旦我调用此方法，它需要很长时间。

```
HashMap<String, Object> parameters = new HashMap<String, Object>();
// ...
// ... loading some content into parameters hashmap
// ...
String ejsTemplate = "... a pre loaded ejs template from file ..."
String serializedParameters = jsonParser.toJson(parameters);
Function fct = (Function) scope.get("invokeEjs", scope);
Object resultTemp = fct.call(context, scriptable, scriptable, new Object[] { ejsTemplate, serializedParameters }); 
```

**serializedParameters**可以变得非常大，但这不会打扰浏览器，我希望 Rhino 实现不会花费超过两倍的时间。

我目前被困在这里，不知道如何进行。如何描述需要这么多时间的事情？可能是什么原因？

# ruby-on-rails - heroku git repo 更改

> ID：14003790
> 
> 赞同：2
> 
> 时间：2012-12-22T14:49:29.543
> 
> 标签：ruby-on-rails, ruby, git, heroku

```
Muhammed-Bhikhas-MacBook-Pro:mashs_wing_ranch BH1KH4$ git remote -v
heroku  git@heroku.com:sleepy-cliffs-9120.git (fetch)
heroku  git@heroku.com:sleepy-cliffs-9120.git (push)
origin  git@heroku.com:gentle-bastion-5131.git (fetch)
origin  git@heroku.com:gentle-bastion-5131.git (push) 
```

当我运行 git remote -v 时，我得到了错误的 heroku 应用程序。那是我以前的应用程序，我如何`sleepy-cliffs-9120.git`才能更改为我的新应用程序`gentle-bastion-5131`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T14:55:49.617

```
git remote set-url heroku git@heroku.com:gentle-bastion-5131.git 
```

# javascript - 通过 AngularJS 停用元素

> ID：14003791
> 
> 赞同：1
> 
> 时间：2012-12-22T14:49:38.120
> 
> 标签：javascript, angularjs

我有一个 DOM 元素（我分配给我的控制器的元素的子元素），我希望在添加类“ianctive”（这使元素看起来不活动 - 通过将其变灰）后禁用所有 AngularJS 交互该元素（在本例中为 ng-click 和所有输入）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T18:03:33.977

定义一个模型属性来跟踪启用/禁用状态，然后将 ng-disable 指令添加到所有表单元素。对于 ng-click，修改表达式以同时查看这个新模型属性以确定它们是否应该执行任何操作。

例如，如果您的新模型属性是 $scope.inactive：

```
<input type="text" ng-disabled="inactive" ng-model="...">
<a ng-click="inactive || (prop1=prop1 + 1)">click to increase</a> {{prop1}} 
```

[小提琴](http://jsfiddle.net/mrajcok/sT6yk/)

# java - Java -> 好的 url 验证库，好吗？

> ID：14003794
> 
> 赞同：0
> 
> 时间：2012-12-22T14:49:55.943
> 
> 标签：java, validation, url

我有点震惊，java 不包含开箱即用的良好验证库（**即使 PHP 也有**！）。

我从 apache commons 尝试了 UrlValidator，但存在“小”问题 -**它不理解 punycode。**
（例如，对于下一个网址“http://xn--d1abbgf6aiiy.xn--p1ai/”，它给了我否定的结果）

您能推荐任何可以正确验证带有和不带有 punycode 的 url（只是语法）的库吗？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T14:53:23.987

很简单：使用`URI`.

```
try {
    URI.create("inputStringHere");
} catch (IllegalArgumentException e) {
    // do whatever is needed
} 
```

但是，检查 URI 本身的参数（主机名等）取决于您。但是 URI 类可以访问每个组件（方案、主机名等）。

# java - 从 JTabbedPane 隐藏选项卡

> ID：14003796
> 
> 赞同：5
> 
> 时间：2012-12-22T14:50:00.147
> 
> 标签：java, swing, jtabbedpane

我正在使用 Netbeans gui 创建一个简单的应用程序。

这是我的结构（布局是**自由设计**的）：

![在此处输入图像描述](../Images/b338b5f2590e61a09f207246525841ee.png)

基本上我有 3 个选项卡，并希望根据条件隐藏其中一个（图像中的选择一个）。就像用户作为某些特权显示该选项卡一样，否则不显示该选项卡。

在我尝试过的代码上；

```
 if (userRole == 1){
    pnlAdiconarSala.setVisible(false);
 } 
```

但此选项卡始终显示。

通过我的实现，我可以隐藏选项卡吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T14:59:01.767

这是一个干净的例子

1.  [**如何使用选项卡式窗格**](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#tabapi)
2.  [**插入、删除、查找和选择选项卡**](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#tabapi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T18:54:57.167

简短的回答：

```
if (userRole == 1){
   tbpGeral.remove(pnlAdiconarSala)
} 
```

# clock - MIT AppInventor 的时钟开始时间

> ID：14003798
> 
> 赞同：1
> 
> 时间：2012-12-22T14:50:07.110
> 
> 标签：clock, app-inventor

我的应用程序中有 3 个时钟补偿。它们具有相同的 TimeInterval，但它们应该在不同的时间开始触发。当应用程序启动时，clock1 应该触发。时钟 2 应在时钟 1 触发后 250 毫秒后触发。并且clock3 应该在clock2 触发后50 ms 触发。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:49:59.360

您是否知道，TimerInterval 是从您退出 Clock.Timer 过程直到它重新启动的时间，即如果 TimerInterval 为 1000 毫秒（1 秒）并且手机需要 45 毫秒来完成您的块，那么任何一个块之间的总时间将为 1045 毫秒，请参阅[此处](https://sites.google.com/site/blocks123/theclock)了解更多信息和一个示例 (TimerCheck.zip)，该示例演示了这一点......

因此，带有计时器的解决方案不会 100% 正确......

这是一个只适用于 1 个时钟组件的解决方案

![在此处输入图像描述](../Images/4150c9d89a3d2cf323be6ae8849c99e8.png)

# java - 为什么输入在必填字段验证后保持值

> ID：14003806
> 
> 赞同：2
> 
> 时间：2012-12-22T14:51:34.700
> 
> 标签：java, validation, jsf-2, primefaces, requiredfieldvalidator

当页面加载了绑定到视图作用域支持 bean 中的值的输入时，如果该值已预先初始化，则在必需的字段验证后，输入再次填充上一个值。

这是托管bean：

```
@ManagedBean(name = "adminController")
@ViewScoped
public class AdminController extends BaseWebController implements Serializable {

    private static final long serialVersionUID = 1019716974557397635L;

    private transient CustomerDTO customerDTO;          

    public AdminController() {
        log.debug("Inside AdminController");
    }

    @PostConstruct
    public void init() {
        initCustomerDTO();
        customerDTO.setCustomerName("Test");
    }

    public void saveCustomer(ActionEvent event) {
        try {
            getServiceProvider().getCustomerService().addNewCustomer(customerDTO);
            getFacesContext().addMessage(null, FacesMessageUtils.getMessageForCustomerSaveSuccess(getFacesContext()));
        } catch (Throwable throwable) {
            getFacesContext().addMessage(null, FacesMessageUtils.getMessageForCustomerSaveError(getFacesContext()));
            printStackTrace(throwable);
        }       

        initCustomerDTO();              
    }   

    private void initCustomerDTO() {
        customerDTO = new CustomerDTO();
    }

    public CustomerDTO getCustomerDTO() {
        return customerDTO;
    }

    public void setCustomerDTO(CustomerDTO customerDTO) {
        this.customerDTO = customerDTO;
    }
} 
```

`CustomerDTO`是一个 POJO。

该jsf包含：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">

    <h:form id="customerForm">

        <p:inputText id="customerName" styleClass="customerName"
            autocomplete="off"
            label="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerName']}"
            value="#{adminController.customerDTO.customerName}"
            required="true" />

        <p:commandButton value="#{adbBundle['saveButton']}"
            actionListener="#{adminController.saveCustomer}"
            icon="ui-icon-check"
            update=":growl, @form, :adminTabView:customerListForm:customerListPanel" />     

    </h:form>

</ui:composition> 
```

我还有一个用于修剪空白的自定义转换器类`String`。

```
@FacesConverter(forClass = String.class)
public class StringTrimmer implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if (StringUtils.isBlank(value)) {
            if (component instanceof EditableValueHolder) {
                ((EditableValueHolder) component).setSubmittedValue(null);
            }
            return null;
        }
        return value;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        return value.toString();
    }
} 
```

因此，当页面首次加载时，输入字段包含“测试”。我清理了测试字段，然后单击保存按钮。我收到了必填字段验证的错误消息，但输入再次填充了我之前设置的默认值“Test”。

我该如何解决这个问题？

## 更新：

我在带有 Mojarra 2.1.7 的 JBoss AS7 中运行，这是 JBoss 的实现和 Primefaces 3.4.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:44:14.627

您的问题是由转换器引起的。

当特定组件的 JSF 验证失败时，提交的值将保留在组件中，否则将被清空并设置为本地值。当 JSF 完成所有组件的验证并且没有人验证失败时，所有本地值都将被清空并设置为模型值（作为`value`属性引用的那个）。当 JSF 需要重新显示带有值的表单时，它首先检查提交的值是否不为空，然后显示，否则检查本地值是否不为空，然后显示，否则直接显示模型值。

`null`在您的情况下，无论验证结果如何，您都将提交的空字符串值转换为。所以提交的值总是`null`这样，因此 JSF 将总是重新显示模型值而不是空字符串提交的值。

我相信您宁愿需要以下上下文参数而不是转换器，当然如果唯一的目标是防止模型值在提交空输入时被空字符串污染。

```
<context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
</context-param> 
```

或者，如果您的唯一目标真的是从字符串中修剪空格，正如转换器类名称所暗示的那样，那么您根本不应该触及提交的值。你可以在这里找到一个具体的例子：[为什么 <h:inputText required="true"> 允许空格？](https://stackoverflow.com/questions/8326398/why-does-hinputtext-required-true-allow-blank-spaces/8327848#8327848)`getAsObject()`不会设置为提交的值，而是设置为本地值（验证成功时）并最终设置为模型值。

# wordpress - 将 Wp-content 目录移到外部时遇到空白页

> ID：14003807
> 
> 赞同：0
> 
> 时间：2012-12-22T14:51:37.187
> 
> 标签：wordpress, svn

我正在尝试使用干净的 subversion 存储库安装 Wordpress，如[http://codex.wordpress.org/Installing_WordPress_With_Clean_Subversion_Repositories](http://codex.wordpress.org/Installing_WordPress_With_Clean_Subversion_Repositories)。我已经相应地执行了每一步，直到最后第二步，它说“您现在应该能够通过根 URL (http://example.com) 查看该站点”，实际上我可以看到我的网站，比如说, [http://example.com](http://example.com)。

但是，一旦我进入更改 wp-config.php 的最后一步，[http](http://example.com) ://example.com 就会绘制一个空白页面。我很确定 wp-config.php 是问题所在，即 Wordpress 不知道它应该从核心 Wordpress 目录*之外检索我的 wp-content 内容。*我的目录结构是这样的：

`.htaccess`
`core/`
`custom/`
`wp-config.php`

，其中 core/ 保存使用 Subversion 签出的文件， custom/ 保存我的主题/ 和 plugins/ 目录， wp-config.php 包含以下行：

`define('WP_CONTENT_DIR', dirname(__FILE__) . '/custom'); define('WP_CONTENT_URL', 'http://example.com/custom');`

我尝试了其他变体，例如：

`define('WP_CONTENT_DIR', $_SERVER['DOCUMENT_ROOT'] . '/custom'); define('WP_CONTENT_URL', 'http://example.com/custom');`

我也尝试过硬编码本地路径，例如：

`define('WP_CONTENT_DIR', '/home/MYUSERNAME/example.com/custom'); define('WP_CONTENT_URL', 'http://example.com/custom');`

，但上述方法均无效。然后我将 custom/ 文件夹重命名为 wp-content/，但还是没有。我什至进入 Dreamhost 以防止将[http://example.com](http://example.com)重定向到[http://www.example.com](http://www.example.com)，反之亦然，但同样无济于事。我不相信 core/ 是问题，因为我可以通过[http://example.com/core/wp-login.php](http://example.com/core/wp-login.php)访问仪表板，而仪表板说它无法检测到我的主题，这证实了我的怀疑WP 不知道从 custom/ 文件夹中检索文件。

到目前为止，我已经想不出问题出在哪里了。哪位有这方面经验的可以给我一些建议吗？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:52:11.510

确保您的语句出现在调用 wp-settings.php 之前，这通常在第 90 行左右。wp-settings（或更准确地说是 default-constants.php）检查路径和 URL 是否已经定义，因此您想要确保事先定义它们。

如果这不是问题，请检查 $_SERVER['DOCUMENT_ROOT'] 是否返回您期望的值；如果在子目录中工作，您可能会遇到问题。

# database - 可部署的数据库接口

> ID：14003812
> 
> 赞同：0
> 
> 时间：2012-12-22T14:52:12.050
> 
> 标签：database, deployment, user-interface

我有一个数据库，我需要分发给用户（它是一个联系人详细信息目录），可能在 CD 上。用户有不同的平台（操作系统和设备方面 - 我愿意以桌面为目标，因此是 CD）。

我正在考虑某种可部署的 webapp，它会提供一个漂亮的界面和一个 sqlite 数据库。是否存在具有高度可定制的 ui 的某种 db 接口？或者有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:32:16.600

数据库有多大？一个简单的选择是生成一个“联系人”网页并将其刻录到 CD。然后，用户可以从他们的浏览器中搜索，或者您可以使用 javascript 为他们进行搜索。

如果您真的需要数据库，那么您正在查看某种嵌入式数据库，但是，由于您建议使用 sqlite，我怀疑您已经知道这一点并且正在查看用户界面选项。

您还没有指定技术，所以我将仅列出几个旨在开发数据库支持的 web 应用程序的框架：

*   [Grails (Groovy/Java)](http://grails.org/)
*   [导轨（红宝石）](http://rubyonrails.org/)
*   [Django (Python)](https://www.djangoproject.com/)

以上所有操作都在使用嵌入式数据库（[H2](http://www.h2database.com/html/main.html)或[Sqlite](http://www.sqlite.org/)）的开发模式下运行。您唯一的挑战将是确保它们的运行时环境得到正确配置，或者也在 CD 上提供。

总之，我很确定这已经完成了。您是否也考虑过只为您的 web 应用程序提供安装程序，而不是担心从 CD 运行某些东西的复杂性？例如，您可能希望支持多个平台：Linux、Windows、Mac 等。

## 更新

有人想过这样做：

*   [http://www.benjysbrain.com/misc/cdsite/](http://www.benjysbrain.com/misc/cdsite/)

# api - 在linkedin OAuth中实现强制注销

> ID：14003819
> 
> 赞同：2
> 
> 时间：2012-12-22T14:54:07.953
> 
> 标签：api, linkedin

我正在为我的网站使用 Linkedin oauth。我需要使用linkedin oAuth API 实现强制注销概念。

下面的代码我已经尝试过了，但我无法获得使用 Linkedin oauth 强制注销的实际解决方案。

```
<?php
 include_once "linkedin.php";

    # First step is to initialize with your consumer key and secret. We'll use an out-of-band oauth_callback
    $linkedin = new LinkedIn($config['linkedin_access'], $config['linkedin_secret'], $config['callback_url'] );
    //$linkedin->debug = true;

    # Now we retrieve a request token. It will be set as $linkedin->request_token
    $linkedInSession = $linkedin->getRequestToken();

    if(empty($linkedInSession))
    {

       $_SESSION['requestToken'] = serialize($linkedin->request_token);

       $url = $linkedin->generateAuthorizeUrl();

       $loginUrl = 'https://www.linkedin.com/secure/login?session_full_logout=&trk=hb_signout';

       echo("<script>top.location.href='".$loginUrl."'</script>");  
    }
    else
    {
        echo("<script>top.location.href='".$url."'</script>");  
    }
   ?> 
```

如何注销关联帐户中的当前登录会话？

# ios - 我可以使用 OSX 10.5 编写 iOS 应用程序吗？

> ID：14003821
> 
> 赞同：2
> 
> 时间：2012-12-22T14:54:51.540
> 
> 标签：ios, xcode

我正在尝试在我的 iPhone (iOS 6.0) 上编写一个供我自己使用的应用程序。不幸的是，我还带着装有 Xcode 3.1.4 的 OSX 10.5 笔记本电脑旅行。有什么方法可以在我的 iPhone 上运行使用此 xcode 构建的应用程序？我不需要最新 iOS 的任何功能，并且有很多运行良好的旧应用程序并且可能是使用旧 Xcode 版本开发的，但是当我点击构建时，我总是得到一个琥珀色按钮，指示不支持 iPhone iOS并运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:00:15.823

可以为 iOS 6 开发的最旧的 xcode 版本是 xcode 4.5，而要运行 xcode 4.5，您需要拥有 MAC OS 10.7.4 或更高版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:01:34.343

对不起，伙计，你不能。

iOS6 开发需要 Xcode4 和 Lion。

**编辑：**

现在（2014 AD）Apple 不允许使用低于 Xcode 5 的任何应用程序开发，因此您需要拥有 Xcode 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:00:03.983

不。要为现代 iPhone 开发，您需要 Intel mac，我怀疑 10.5 的笔记本电脑是 Intel Mac（或者 10.5 甚至支持 x86）。此外，如果您没有注意到，Xcode 版本与 API 版本相关，因此即使可能，您也可能只能使用 3.0 API，由于 4.0 中引入了多任务处理，这些 API 现在甚至无法使用。

简短的回答：没有。

# gcc - 64 位 MacOs Lion 上的 gcc -m32

> ID：14003823
> 
> 赞同：0
> 
> 时间：2012-12-22T14:55:24.763
> 
> 标签：gcc, osx-lion, 32bit-64bit

我正在尝试在 64 位英特尔 Mac(Lion) 上链接两个 nasm 32 位对象。

使用 gcc -m32 并且它不起作用。我想这可能是因为我没有安装库。gcc-多库。不知道如何在 Mac 上安装它们。

我的 gcc 版本：i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.1.00）

我只是想让它工作。任何建议都会很有用，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:04:39.960

在 OS X 上，您不使用`-m`开关。相反，您使用`-arch`. 在这种情况下：`-arch i386`。

# java - JSF selectOneRadio/commandLink

> ID：14003825
> 
> 赞同：0
> 
> 时间：2012-12-22T14:55:56.787
> 
> 标签：java, jsf, jsf-2, selectoneradio

这是我对 oneRadio 的想法

```
<h:selectOneRadio value="#{controller.myboolean}">
    <f:selectItem itemValue="#{true}" itemLabel="Yes"/>
    <f:selectItem itemValue="#{false}" itemLabel="No"/>
</h:selectOneRadio> 
```

这里使用 commandLink：

```
<h:commandLink value="YES" action="#{controller.setMyboolean(true)}"/>
<br/>
<h:commandLink value="NO" action="#{controller.setMyboolean(false)}"/> 
```

在我的应用程序中，我想显示或禁用我的表格`<h:selectOneRadio>`。例如，如果我选择了第一个单选按钮，则会显示表格。我不会单击 a`<h:commandButton>`来更改值`myboolean`。因此，我对我的申请的例外反应必须像`<h:commandLink>`. 我单击它，值会发生变化，显示表格。但就我而言，我想使用`<h:selectOneRadio>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T20:45:19.580

我建议你使用 primefaces 扩展。对于一些布尔值来说，这是一些不错的组件......比如： http: [//fractalsoft.net/primeext-showcase-mojarra/views/triStateCheckbox.jsf](http://fractalsoft.net/primeext-showcase-mojarra/views/triStateCheckbox.jsf)

您还可以使用 primefaces 的 booleanButton，例如： http: [//www.primefaces.org/showcase/ui/selectBooleanButton.jsf](http://www.primefaces.org/showcase/ui/selectBooleanButton.jsf)

无论如何，我希望这对您有所帮助，如果您可以灵活地使用另一个不同的组件，那么 selectOneRadio... 而且如果您可以自由地在项目中添加更多依赖项..

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:02:13.603

除非您在幕后设置它，否则问题很可能是您需要实现一个转换器来处理字符串“true”和“false”到`boolean`. 在您`commandLink`的 EL 中指定的操作将布尔值传递给您的函数。但是，在`selectOneRadio`示例中，您提交的是一个字符串。

有关更多信息，请查看：http: [//download.oracle.com/otn_hosted_doc/jdeveloper/j2ee101302/jsf_apps/eventvalidate/sf_avc_converters.html](http://download.oracle.com/otn_hosted_doc/jdeveloper/j2ee101302/jsf_apps/eventvalidate/sf_avc_converters.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-22T16:39:07.290

这很好用：

```
<h:selectOneRadio value="#{controller.myboolean}" valueChangeListener="#{controller.save}" immediate="true" onchange="this.form.submit()">
    <f:selectItem itemValue="#{true}" itemLabel="Yes"/>
    <f:selectItem itemValue="#{false}" itemLabel="No"/>
</h:selectOneRadio> 
```

并使用此 ChangeEvent 方法（）：

```
public void speichereRadioButtons(ValueChangeEvent vce){
   boolean temp=(Boolean) vce.getNewValue();
   setmyBoolean(temp);
   FacesContext.getCurrentInstance().renderResponse();
} 
```

# python - 尝试将 python 片段导入 C/C++（PI spigot 算法）

> ID：14003829
> 
> 赞同：0
> 
> 时间：2012-12-22T14:56:51.247
> 
> 标签：python, c, algorithm, pi

前段时间（我不记得在哪里）我找到了这个 python 片段，它实现了一个用于计算 Pi 数字的插口算法：

```
def pi_digits():
    """generator for digits of pi"""
    q,r,t,k,n,l = 1,0,1,1,3,3
    while True:
        if 4*q+r-t < n*t:
            yield n
            q,r,t,k,n,l = (10*q,10*(r-n*t),t,k,(10*(3*q+r))/t-10*n,l)
        else:
            q,r,t,k,n,l = (q*k,(2*q+r)*l,t*l,k+1,(q*(7*k+2)+r*l)/(t*l),l+2)

digits = pi_digits()
for i in range(30): print digits.next() 
```

现在我想在 C++ 中实现它。我的尝试是：

```
#include <cmath>
#include <cstdlib>
#include <iostream>

typedef long long ll;

void help() {
  std::cout << "Usage: pi2 <digits>" << std::endl;
  exit(1);
}

void pi(const long long digits) {
  ll q, r, t, k, n, l;
  q=1;
  r=0;
  t=1;
  k=1;
  n=3;
  l=3;
  for(ll i=0; i<digits; ++i) {
    if(4*q+r-t < n*t) {
      std::cout << n;
      q=10*q;
      r=10*(r-n*t);
      n = ( 10 * ( 3 * q + r) / t ) - 10 * n; //Thanks to maverik
    } else {
      q=q*k;
      r=(2*q+r)*l;
      t=t*l;
      k=k+1;
      n=(q*(7*k+2)+r*l)/(t*l);
      l=l+2;
    }
  }
}

int main(int argc, char** argv) {
  if(argc<2) help();
  ll digits = 0;
  if(digits=atoll(argv[1])<1) help();
  pi(digits);
  return 0;
} 
```

但它从不调用 std::cout::operator<<，而 python 版本可以工作。你能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:19:09.447

原因是您的代码没有以两种语言执行等效计算。

（据我所知）有两个原因：

1.  在这个 python 代码中，所有的计算都是同时完成的：

    ```
    q,r,t,k,n,l = (q*k,(2*q+r)*l,t*l,k+1,(q*(7*k+2)+r*l)/(t*l),l+2) 
    ```

    在 C 代码中，计算是一次执行的，所以每个人都使用以前的结果而不是使用旧值（就像 python 代码一样）。

2.  您`int`在 python 中使用 s，`long long`在 C 中使用 s。C 代码中的除法将产生`long long`s，而 python（假设 python 2）中的除法将产生四舍五入的`int`s。

    这也可能会造成计算错误，从而导致您的条件永远不会正确。

PS 从头开始​​在 C 中实现这一点可能比移植 python 算法更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:07:24.677

看起来应该有（根据python代码）：

```
n = ( 10 * ( 3 * q + r) / t ) - 10 * n; 
```

那里：

```
if ( 4 * q + r - t < n * t) ... 
```

还是我错过了什么？

# wpf - 打开对话框的用户控件，其中对话框结果更新使用它的页面的视图模型中的属性

> ID：14003832
> 
> 赞同：1
> 
> 时间：2012-12-22T14:57:49.797
> 
> 标签：wpf, mvvm, controls

我一直在为这个问题苦苦挣扎一段时间。这似乎比较简单，但我不确定如何解决它。很想得到你的帮助。

我有一个绑定到 viewmodel 的页面，它有一些代表文件路径的字符串属性。

我已经构建了一个具有文本框和按钮的用户控件。该控件的目的：当您单击按钮时显示一个对话框（文件对话框），并根据结果更新文本框。

这是xaml：

```
<UserControl x:Class="MyProject.Controls.FilePickerLauncherControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         x:Name="me"
         d:DesignHeight="300" d:DesignWidth="300">
<DockPanel>
    <Button Content="..." DockPanel.Dock="Right" Command="{Binding OpenFileDialogCommand,ElementName=me}"></Button>
    <TextBox Text="{Binding Path=PathChosen,ElementName=me}" DockPanel.Dock="Right" VerticalAlignment="Center" Height="30"></TextBox>
</DockPanel> 
```

这是我在页面视图模型（操作）中的命令：

```
 private void OpenFileExplorer()
    {
        SimpleIoc.Default.GetInstance<IInputOutputService>().OpenFileDialog(modelsDirectory);
    } 
```

现在，对于我的控件的每个实例，我想要做的是获取对话框的结果并将其放入控件中的文本框中。我一直在想：

1.  也许一个命令参数将被发送到这个 OpenFileExplorer，告诉哪个属性应该以某种方式更新，但我不确定如何。

2.  为每个属性多次编写此命令。我不认为这是正确的。

3.  使用此命令为我的控件创建一个新的视图模型，并在我当前的视图模型中创建它的实例。

你们会说最好的方法是什么？它相对简单，虽然它让我有点困惑。

# java - 用测试数据填充 XML 文件

> ID：14003840
> 
> 赞同：1
> 
> 时间：2012-12-22T14:59:47.380
> 
> 标签：java, xml, git

我有一个 XML 文件，看起来像所附图像：![XML 文件](../Images/139a038a340feffd115428202858b782.png)

我使用“blame”命令从 Git 开源存储库中获取的属性（commitId、作者、日期和时间）。

但是，对于我的评估，我需要用我拥有的数据随机填充这些属性。例如，我有 Junio、Peter、Jiang、Jens、Jeff、Ramkumar 和 Linus 作为作者，日期在 2010 年到 2012 年之间。

使用 Java 填充这些数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:08:01.440

您可以首先将所需的值放入数组中，如下所示：

```
 String names[] = {Junio, Peter, Jiang, Jens, Jeff, Ramkumar, Linus};
   String dates[] = {2010, 2011, 2012}; 
```

然后使用 Random 类，您可以这样做：

```
 Random ran = new Random();
    String name = names[ran.nextInt(7)];
    String date = dates[ran.nextInt(3)]; 
```

这会给你一个随机的名字和日期。冲洗。重复。

请注意，要获得介于 0 和 n（含）之间的随机数，您需要 nextInt(n + 1)。

# php - 在哪里放置自己的类

> ID：14003841
> 
> 赞同：1
> 
> 时间：2012-12-22T14:59:55.993
> 
> 标签：php, symfony, symfony-1.4

我使用 symfony 2.1。其实我已经习惯了 symfony 1.4。我在 lib/DataFormatChecker.php 下的 symfony 1.4 中有一个文件。有全局功能，例如emailchecker。放置此文件的最佳方式在哪里？如何在 symfony 2.1 中使用它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T17:33:26.887

这里讨论了几乎相同的问题：

[Symfony2 在哪里存储简单的 3rd 方类？](https://stackoverflow.com/questions/13994212/where-to-store-simple-3rd-party-class-in-symfony2)

你可以在这里找到 Symfony 的文档：

[http://symfony.com/doc/current/quick_tour/the_architecture.html](http://symfony.com/doc/current/quick_tour/the_architecture.html)

请注意，Symfony2已经有一个验证器组件[https://github.com/symfony/Validator ;)](https://github.com/symfony/Validator)

# azure - 诊断创建的这些表是什么？

> ID：14003842
> 
> 赞同：4
> 
> 时间：2012-12-22T15:00:02.887
> 
> 标签：azure, diagnostics

Azure 诊断创建了许多表，显然包含相同的性能计数器，但日期不同。为什么它会创建这么多表，我该如何删除它们？

![在此处输入图像描述](../Images/34d9b755092f9c6b5153b2f76eb7aa7c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:34:43.980

构建 Azure 应用程序时，您可以在角色配置文件中启用或禁用诊断：

![在此处输入图像描述](../Images/6d3eefeb15cf37f0b3abe4065fc339f8.png)

启用诊断后，所有详细监视数据（日志）将定期复制到 Azure 表（请记住，在生产系统中，您必须单独配置存储帐户，因为它不会自动发生）。

对于每个云服务部署，都会为角色创建六个表。分别创建两个表：5 分钟、1 小时和 12 小时。这些表之一存储角色级别的聚合；另一个表存储角色实例的聚合。

表名具有以下格式：

```
WAD*deploymentID*PT*aggregation_interval*[R|RI]Table 
```

在哪里：

*   deploymentID 是分配给云服务部署的 GUID
*   聚合间隔 = 5M、1H 或 12H
*   角色级聚合 = R
*   角色实例的聚合 = RI

例子：

*   `WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRTable`- 角色的每小时聚合
*   `WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRITable`- 角色实例的每小时聚合

# scala - scala 中 mutable.Set.foreach 的错误？

> ID：14003850
> 
> 赞同：8
> 
> 时间：2012-12-22T15:00:51.410
> 
> 标签：scala, foreach, scala-collections, mutable

当我尝试以下代码时，我正在使用 scala 2.9.1：

```
import scala.collection.mutable
val a = mutable.Set(1,2,3,4,7,0,98,9,8)
a.foreach(x => { println(x); a.remove(x) }) 
```

结果是这样的

```
0
98
2
1
4
3
8 
```

其中没有列出 a 的所有元素。此后， a 变为 Set(9, 7) 而不是空集。对我来说这看起来很奇怪，这是一个错误还是我们在执行 foreach 时无法修改集合本身？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-22T15:04:55.717

在遍历或迭代集合时，您不得修改集合。

这在 Scala 中与在 Java（以及大多数其他编程语言/库）中相同。除了在 Java 中，`Iterator`该类提供了一种`remove`方法，该方法可用于在使用该`remove`方法进行迭代时代替集合的方法来删除元素`Iterator`（但会使该集合的任何其他可能正在使用的迭代器无效）。Scala 迭代器没有提供这样的方法。

# php - 多级菜单和子菜单树

> ID：14003857
> 
> 赞同：1
> 
> 时间：2012-12-22T15:02:10.310
> 
> 标签：php, html, mysql, select, menu

我想要无限的菜单和子菜单，并像树一样显示它们，如底部所示

我的mysql表结构

```
id           //menu ID
title        //menu title
parentID     //menu parent ID 
```

我的 PHP 代码

```
<select id="sub" name="sub" class="select" style="width:200px;">
<option value="">none</option>
<?
//----------------Get Menu Function---------------
function getMenu($parentID=0)
{
    $selectMenus = mysql_query("SELECT * FROM menus WHERE parentID='$parentID'") OR DIE(mysql_error());
    if(mysql_num_rows($selectMenus) != 0)
    {
        while ($rowMenus = mysql_fetch_array($selectMenus))
        {
            if ($rowMenus['parentID'] != 0)
            {
                $tab .= "--";
            }
            else
            {
                $tab = "";
            }
            echo "<option value='" . $rowMenus['id'] . "|" . $rowMenus['title'] . "'>" . $tab . $rowMenus['title'] . "</option>";
            $menus .= getMenu($rowMenus['id']);
        }
    }
    return $menus;
}
//-----------------------------------------------
echo getMenu();
?>
</select> 
```

我想在每个菜单的第一个子菜单中添加 2 个破折号，并在这样的选择框选项中显示它们

```
Mainpage
Products
--Granite
----GreenGranite
----BrownGranite
--travertine
AboutUs 
```

我的代码有什么问题？

# javascript - 无法使用 Javascript 获取数组的计数

> ID：14003860
> 
> 赞同：-1
> 
> 时间：2012-12-22T15:02:39.020
> 
> 标签：javascript, count, element

我正在使用此代码，但无法获取`ls`以下元素的数量

```
var ls = new Array();
ls = document.getElementsByName(elx); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:05:09.170

在 javascript 中，您可以使用 .length 来获取数组的计数...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T15:05:18.760

元素的数量由`length`返回的数组的属性指定`getElementsByClassName`：

```
console.log( ls.length ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:13:07.987

这应该给出 getElementsByName 返回的元素数量。

```
var ls = new Array();
ls = document.getElementsByName(elx);

count = ls.length; 
```

如果您得到 0，则意味着您没有任何名称由变量 elx 指向的元素。

你想做什么

```
ls = document.getElementsByName("elx"); 
```

这将返回所有名为“elx”的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T15:06:52.243

elx 是文档中有效的“名称”元素吗？

# ios - 如何只获得一个 NSUUID？

> ID：14003865
> 
> 赞同：0
> 
> 时间：2012-12-22T15:03:07.793
> 
> 标签：ios, ios6, uuid

> **可能重复：**
> [iOS 唯一用户标识符](https://stackoverflow.com/questions/7273014/ios-unique-user-identifier)

对于我的应用程序，我需要电话 uuid。我知道我可以得到它

```
NSUUID  *uuid = [NSUUID UUID]; 
```

但是每次我重新启动应用程序时，我都会收到不同的值。所以我不能像旧的 uuid 一样使用它（它总是一样的）。

我该怎么做才能获得稳定且唯一的标识符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:07:33.290

UUID 是 128 位值 UUID 在空间和时间上都是唯一的，方法是结合生成它的计算机的唯一值和表示自 1582 年 10 月 15 日 00:00 以来 100 纳秒间隔数的值： 00.

所以每一秒你都会得到一个新的 UUID。

您无法收到稳定且唯一的 id，而是可以将收到的 id 保存在钥匙串或 plist 中并使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T15:07:59.577

您正在考虑 UDID（而不是 UUID），它已被弃用且 App Store 不再允许。

这是一种模拟它的技术：[https ://stackoverflow.com/a/8677177/832111](https://stackoverflow.com/a/8677177/832111)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T15:33:47.580

您可以使用 OpenUDID 库为每个设备生成唯一的 UDID。它可以[在这里找到](https://github.com/ylechelle/OpenUDID)。从根本上说，它使用粘贴板。下面的一个例子

```
//First app, install->run->close->delete
UIPasteboard* board = [UIPasteboard pasteboardWithName:@"com.company.wtv" create:YES];
board.persistent=YES;// persistent to make what you write persist after your app closes, or gets deleted.
[board setValue:@"hello" forPasteboardType:@"com.company.wtv.sharedValue"];

//Second app, installed after first one is deleted and ran this one... While bundle identifier and bundle seed different (i tried it on adhoc, not really releasing the app, but i htink the same)
NSData* result=nil;
NSString*resultStr=nil;
result =[board valueForPasteboardType:@"com.company.wtv.sharedValue"];
resultStr=[[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];// I got resultStr containing hello 
```

# javascript - Javascript变量未定义

> ID：14003866
> 
> 赞同：3
> 
> 时间：2012-12-22T15:03:19.073
> 
> 标签：javascript, html, variables

```
<html>
<head>
    <title>Array of images</title>
    <script type="text/javascript">
        var myPics = new Array[3];
        myPics[0] = "./img/blue.png";
        myPics[1] = "./img/red.png";
        myPics[2] = "./img/yellow.png";
        var counter = 0;

        function preImg(){
        alert(counter);
            if(counter == 0)
                counter = 4;

            counter --;
        alert(counter);
            document.getElementById("coloredImg").src = myPics[counter];
        }

        function nextImg(){
            if(counter == 3)
                counter = -1;

            counter ++;

            document.getElementById("coloredImg").src = myPics[counter];
        }
    </script>
</head>
<body>
    <img src="./img/blue.png" id="coloredImg" alt="Image not found"/>
    <input type="button" onclick="preImg()" value="Previous"/>
    <input type="button" onclick="nextImg()" value="Next"/>
</body>
</html> 
```

我遇到的问题是我的计数器变量在函数内部未定义。例如，当我调用函数 preImg 时，它会警告我未定义（当它应该只是 0 时），而第二个警报在它应该是 3 时显示 NaN。为什么我的函数无法识别我的“var counter”它是全局的不是吗？你认为变量 mypics 也会发生同样的情况吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T15:06:38.573

```
new Array[3]; 
```

应该

```
new Array(3); 
```

而是使用方括号表示法创建一个数组（也不需要指定长度）：

```
var myPics = []; 
```

您可能会问为什么要使用这种语法？原因有很多：

1.  `[]`是一种[更快](https://stackoverflow.com/questions/7375120/why-arr-is-faster-than-arr-new-array)更短的创建数组的方法。
2.  构造`Array`函数可以被覆盖，而像这样的句法构造则不能。
3.  在代码中更容易发现，使调试更容易。
4.  它能够获取单个元素（即`[5]`）而不将其解释为数组的长度，这是繁琐`Array`构造函数的常见问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T15:06:42.057

`var myPics = new Array[3];`应该`var myPics = new Array(3);`

JsFiddle：http: [//jsfiddle.net/cbJAc/](http://jsfiddle.net/cbJAc/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T15:15:16.587

`element`在,`pics`和上使用闭包的简单幻灯片对象`counter`：

```
function Slideshow(element, pics) {
    var counter = 0;

    this.nextImg = function () {
        element.src = pics[counter];
        counter = (counter + 1) % pics.length;
    }
    this.nextImg(); // init
} 
```

用法：

```
var show = new Slideshow(
    document.getElementById("coloredImg"),
    ["./img/blue.png", "./img/red.png", "./img/yellow.png"]
);

show.nextImg(); // red
show.nextImg(); // yellow
show.nextImg(); // blue 
```

闭包确保定义函数时在范围内的每个变量在调用（或再次调用）函数时仍然在范围内。这种标准的 JavaScript 技术可以优雅地解决您的`counter`问题。

使用基于模数的计算让计数器重复序列`0,1,2`（在本例中）。

* * *

编辑：假设您希望每三秒切换一次新图像：

```
setInterval(show.nextImg, 3000); 
```

# html - CSS：固定布局但跨屏幕宽度的边框/背景图像

> ID：14003868
> 
> 赞同：0
> 
> 时间：2012-12-22T15:03:51.230
> 
> 标签：html, css

也许我是最后一个提出这个问题的开发人员，但我不明白：我正在考虑使用固定宽度的布局，例如： [http](http://www.gridsystemgenerator.com/gs02.php) ://www.gridsystemgenerator.com/gs02.php 基于屏幕大小左右列动态调整大小，而中间网格保持固定。伟大的！现在我不明白的是，有很多网站使用这种方法，但它们也有页面部分，它们的边框和背景图像填充了整个屏幕宽度。

一个示例： [http](http://www.gridsystemgenerator.com/gs02.php) ://www.gridsystemgenerator.com/gs02.php 顶部条带、选项卡菜单和页脚部分的线条延伸到整个屏幕宽度。

他们如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T18:46:38.110

巴甫洛，谢谢你的提示！

所以事实证明，有宽度为 100 且向左浮动的容器 div，它们可以包含整个页面宽度的设计元素。然后将固定的网格 div 嵌入到容器 div 中。

:)

# javascript - 无法隐藏 DIV

> ID：14003871
> 
> 赞同：3
> 
> 时间：2012-12-22T15:04:25.953
> 
> 标签：javascript, css

我在这里要疯了，因为当我执行以下代码时：

```
myDiv.className += condition ? " green" : " red hidden";
console.log("class: " + myDiv.className); 
```

我可以看到文字。事实上，我什至**看到**我的东西周围的红色边框！但是，由于某些（对我来说可以解释的）原因，该组件仍然可见。这要么是为了破坏我的圣诞节而进行的神圣干预，要么是我因为疲劳而错过了一些非常基本的东西。它是哪一个？上帝现在恨我吗？:)

```
.hidden{ display: none; }
.green{ border: 3px solid #00bb00; }
.red{ border: 3px solid #dd0000; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:20:38.880

其他一些选择器的特殊性很可能超过了您的`.hidden`类。例如，考虑以下代码：

```
​var myDiv = document.querySelector("#foo");
myDiv.className = (false) ? "grn" : "red hidden"; 
```

在这个例子中，和你的一样，结果是 a `className`of `red hidden`，应用以下两个：

```
.hidden { display: none }
.red { border: 2px solid red } 
```

但我的元素仍然可见：

![在此处输入图像描述](../Images/f673bf78e511ce6f6a7c40bbcbe82a9c.png)

当我检查这个元素的样式时，很明显问题出在哪里——`#foo`在这种情况下，我有一个更具体的选择，它推翻了`.hidden`类：

![在此处输入图像描述](../Images/859bf6e5ecf01badbb73d2941618454c.png)

另一种选择可能是您在另一个地方有类似的脚本，进一步修改了`className`这个元素。您可以使用关键字插入调试点`debugger`，然后在页面上逐步执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:40:26.060

可能还有另一个脚本在运行并删除名为*hidden*的类（很常见的名称），我猜想编写该代码的人是按类而不是 id 选择元素。所以很可能，那个人无意中删除的范围很广。

检查类名的剩余部分。你最后有一个空间。这是非常强烈的建议，表明存在某些内容但**已**被删除。（编码器的额外减去不删除空间）。

您应该与那个程序员交谈并解释如何更安全地进行他的操作。

![这个人给了我一个新东西！](../Images/a4e66d3453bf47513d076ad1ee9c3b53.png)

# c# - 反射：与 GetRuntimeProperty 方法不一致的框架行为

> ID：14003872
> 
> 赞同：9
> 
> 时间：2012-12-22T15:04:31.130
> 
> 标签：c#, reflection, .net-4.5

在新的 .NET Framework 4.5 中使用反射时，我遇到了一个奇怪的行为，我发现这非常出乎意料。命名空间 System.Reflection 为利用 Type 对象提供了一些新的扩展方法。其中两个是 GetRuntimeProperty(string name) 和 GetRuntimeProperties()。

现在假设您有一个具有内部属性的简单对象。

```
public class ObjectBase
{
    protected int Id { get; set; }
    public string Name { get; set; }
} 
```

而你现在尝试利用这种类型。

```
var properties = typeof(ObjectBase).GetRuntimeProperties();
// properties.Count = 2

var idProperty = typeof(ObjectBase).GetRuntimeProperty("Id");
var nameProperty = typeof(ObjectBase).GetRuntimeProperty("Name");
// idProperty = null
// nameProperty = System.String Name 
```

正如预期的那样，该`properties`对象包含 Id 和 Name 属性定义的两个属性定义，而 nameProperty 包含 Name 属性定义。出乎意料的是`idProperty`对象为空......

来自 .NET 框架，我猜这是 Microsoft 架构师的意图，但我必须说它看起来不像您真正期望发生的事情。我确实相信这种类似的方法应该表现相同，但似乎 GetRuntimeProperty 过滤器在 GetRuntimeProperties 不应用过滤器的公共属性上。

**有人对微软为什么决定那些类似的方法应该有不同的行为有合理的解释吗？设计错误？**

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:16:22.300

内部`GetRuntimeProperty`调用`Type.GetProperty(name)`which 搜索具有指定名称的**公共属性。**财产`Id`受到保护，因此无法找到。

```
public static PropertyInfo GetRuntimeProperty(this Type type, string name)
{
    CheckAndThrow(type);
    return type.GetProperty(name);
} 
```

另一方面`GetRuntimeProperties`返回公共和非公共属性

```
public static IEnumerable<PropertyInfo> GetRuntimeProperties(this Type type)
{
    CheckAndThrow(type);
    return type.GetProperties(BindingFlags.NonPublic | BindingFlags.Public |
                              BindingFlags.Static | BindingFlags.Instance);
} 
```

[说明：](http://msdn.microsoft.com/en-us/library/hh535795.aspx) `GetRuntimeProperties`目的是返回`IEnumerable<PropertyInfo>`所有属性的集合，让您通过**LINQ**过滤该集合。您可以选择公共、非公共或任何其他类型的属性。对于您返回的单个属性，`GetRuntimeProperty`您不需要这种灵活性，因此它在大多数常见用途中受到限制。

# javascript - 优化 jQuery 选择器的最佳方法，为什么？

> ID：14003873
> 
> 赞同：14
> 
> 时间：2012-12-22T15:04:37.557
> 
> 标签：javascript, jquery, html, jquery-selectors

我在我的 JSP 中多次使用这个 jQuery 选择器：

```
 $("#customers tbody tr td input[type='checkbox'][name='selectedCustomers']") 
```

我在一些博客上找到的解决方案是我应该先做：

```
var customer=$('#customers') 
```

然后使用上面的客户对象进行进一步的调用。

```
 customer.find("tbody tr td input[type='checkbox'][name='selectedCustomers']") 
```

我的问题是，这个解决方案会有什么不同吗？为什么？

**我的理解**

当我做

```
$("#customers tbody tr td input[type='checkbox'][name='selectedCustomers']") 
```

jQuery 内部会先获取关联的对象`div id="customers"` （通过 document.getElementById("customers")），然后会遍历到指定的 `checkbox`. 如果我按照建议的解决方案进行，那么`document.getElementById("customers")`只会被解雇一次，其余的都是一样的。所以我把自己从不必要的多重中拯救出来，`document.getElementById`但其余的都是一样的。我的理解正确吗？如果是的话，就我所知，是`document.getElementById`更昂贵的操作吗？

**编辑：-**

我不仅多次使用上述选择器，而且还在 div id="customer" 下使用其他可能的选择器。那么问题来了，如果我先缓存客户对象，如果我不这样做，性能方面有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T15:21:40.100

没有办法你需要那么具体。我猜，最多是这样的：

```
$('#customers td [name="selectedCustomers"]') 
```

...这应该可以提高性能。接下来，如果您实际上`selectedCustomers`每次都在查询，则应该缓存整个内容：

```
var selectedCustomers = $('#customers td [name="selectedCustomers"]'); 
```

否则，如果名称是动态的，并且每页只有一个具有相同名称的项目...

```
var item = $(document.getElementsByName(someName)[0]); 
```

`$('#customers')`另一方面，缓存只是毫无意义。`.find`on`customers`将首先完成与整个选择器一样多的工作，尤其是在`querySelector`支持的情况下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T15:25:56.920

您似乎错过了缓存对象的基本点。一旦对象被缓存，该选择器中的任何进一步遍历或操作都将在存储的对象上执行，并且不需要搜索 DOM 来首先定位选择器并在每次需要使用它时创建集合

每次调用时`$("#customers tbody tr td input[type='checkbox'][name='selectedCustomers']")`都必须执行文档搜索以创建元素集合，然后才能对集合进行任何更改。

缓存集合意味着无需进行进一步搜索，从而提高性能

```
/* locate and store the collection once*/
var $checkboxes=$("#customers tbody input[name='selectedCustomers']");
/* look within previously stored collection*/
$checkboxes.filter(/* expression*/ ).doSomething(); 
```

使用`document.getElementById`将比 jQuery 搜索更快，仅仅是因为它不需要 jQuery 库进行的附加函数调用。但是，如果您希望将 result 用作 jQuery 对象，例如： `$( document.getElementById('foo'))` 对于单次使用缓存对象，收益可能不值得担心

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T20:09:11.213

> 所以我把自己从不必要的多重中拯救出来，`document.getElementById`但其余的都是一样的。

是的。但也可能不是，因为选择器是从右到左评估的（参见[这篇文章](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)或[这个 SO 问题](https://stackoverflow.com/q/5797014/1048572)）。假设一个高效的引擎，如果它只对文档树的一部分进行评估（如果您先选择`#customers`然后`.find()`在其中进行评估），那么它要做的工作就会更少。但我对此不是 100% 确定的。

> 是`document.getElementById`不是更昂贵的操作？

不，它非常便宜。id 是识别单个元素的标准属性，浏览器会为它构建非常高效的查找表——你可以假设它几乎是`O(1)`.

> `customer.find("tbody tr td input[type='checkbox'][name='selectedCustomers']")`

另一方面，需要评估 DOM 树的 DOM 选择器查询非常昂贵，特别是如果在 JS 代码（jQuery sizzle）中手动完成而不是原生的 - 尽管这个相当简单的查询*将*委托给原生的`querySelectorAll`.

我猜那`#customers`是你的表格元素。因此，为了性能，省略`tbody tr td`标签，它们是强制性的（假设您没有使用它们明确地从`<thead>`/`<tfoot>`或`<th>`元素中排除复选框）。无论如何，您不会找到`<input>`作为表格元素的直接子元素的 - 并且选择器引擎要做的事情要少得多。

此外，如果您非常了解您的标记并且可以假设只有复选框具有该`name`属性，那么您也可以省略标记名和类型属性选择器。这意味着您可以委托给 native `getElementsByName`，这应该会再次提高性能：

```
$(document.getElementById("customers").getElementsByName("selectedCustomers")) 
```

如果您需要检查元素是否为复选框，您仍然可以过滤它们。有了这个，你最终可能会得到

```
$(customer.get(0).getElementsByName("selectedCustomers")).filter(":checkbox") 
```

但是，为了证明性能提升，您只能测试、测试、测试；您需要在实际的整页上执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T21:06:51.773

[http://jsperf.com/different-jquery-selector-tests](http://jsperf.com/different-jquery-selector-tests)

看看这个小测试。基本上**$('#div').find('#p');** 是最快的**$('div').find('#p');** 是最慢的。

# ruby - 如何有效地筛选素数的选定范围？

> ID：14003876
> 
> 赞同：0
> 
> 时间：2012-12-22T15:04:44.223
> 
> 标签：ruby, primes, mathematical-optimization

我一直在解决[Project Euler](https://projecteuler.net)和 Sphere Online Judge 问题。在这个特定的问题中，我必须找到两个给定数字中的所有素数。我有一个看起来很有前途的功能（基于[Eratosthenes 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)），但它太慢了。有人能发现是什么让我的功能如此缓慢，并暗示我该如何解决吗？此外，我们将不胜感激有关如何进行一般优化的一些评论（或指向此类评论/书籍/文章等的链接）。

代码：

```
def ranged_sieve(l, b)
  primes = (l..b).to_a
  primes[0]=nil if primes[0] < 2
  (2..Math.sqrt(b).to_i).each do |counter|
    step_from = l / counter
    step_from = step_from * counter
    l > 3 ? j = step_from : j = counter + counter
    (j..b).step(counter) do |stepped|
      index = primes.index(stepped)
      primes[index] = nil if index
    end
  end
  primes.compact
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-10T09:09:18.057

SPOJ（Sphere Online Judges）的[PRIME1 问题](http://www.spoj.com/problems/PRIME1/)旨在让您不能简单地筛选到上限，因为在这种情况下您将受到超时的打击。

一种可能的方法是速度更快。通过在标准筛子上添加一些花里胡哨的东西，它可以运行得足够快，以保持远低于超时限制。速度优化包括：

*   仅表示筛子中的奇数（节省 50% 的空间）
*   筛选适合 L1 高速缓存 (32 KB) 的小型、高速缓存友好的段
*   通过小素数进行预存（即在筛段上爆破预先计算的模式）
*   记住跨段的每个素数的最后一个（或下一个）工作偏移量，而不是使用慢除法重新计算它们

将所有这些放在一起将筛选整个 2^32 范围的时间从 20 秒缩短到 2 秒，远低于 SPOI 超时。[我的 pastebin](http://pastebin.com/u/DarthGizka)有三个简单的 C++ 演示程序，您可以在其中检查这些优化中的每一个并查看它们的效果。

一个更简单的方法是只做必要的工作：筛选到目标范围的最后一个数字的平方根以获得所有潜在的素因子，然后只筛选目标范围本身。这样，您可以在不到两打代码和几毫秒的运行时间中解决 SPOJ 问题。我刚刚完成了[这种分段筛分的演示.cpp](http://pastebin.com/EjkuudTD)（困难的部分不是筛子，而是舒适测试的测试框架，由于几乎没有任何参考数据，因此验证正确操作高达 2^64-1） .

筛子本身看起来像这样；筛子是仅赔率的打包位图，并且筛子范围以位为单位指定以确保稳健性（所有内容都在 .cpp 中进行了解释），因此您将通过 (range_start / 2) 获取`offset`：

```
unsigned char odd_composites32[UINT32_MAX / (2 * CHAR_BIT) + 1];   // the small factor sieve
uintxx_t sieved_bits = 0;                                          // how far it's been initialised

void extend_factor_sieve_to_cover (uintxx_t max_factor_bit);       // bit, not number!

void sieve32 (unsigned char *target_segment, uint64_t offset, uintxx_t bit_count)
{
   assert( bit_count > 0 && bit_count <= UINT32_MAX / 2 + 1 );

   uintxx_t max_bit = bit_count - 1;
   uint64_t max_num = 2 * (offset + max_bit) + 1;
   uintxx_t max_factor_bit = (max_factor32(max_num) - 1) / 2;

   if (target_segment != odd_composites32)
   {
      extend_factor_sieve_to_cover(max_factor_bit);
   }

   std::memset(target_segment, 0, std::size_t((max_bit + CHAR_BIT) / CHAR_BIT));

   for (uintxx_t i = 3u >> 1; i <= max_factor_bit; ++i)
   {
      if (bit(odd_composites32, i))  continue;

      uintxx_t n = (i << 1) + 1;   // the actual prime represented by bit i (< 2^32)

      uintxx_t stride = n;         // == (n * 2) / 2
      uint64_t start = (uint64_t(n) * n) >> 1;
      uintxx_t k;

      if (start >= offset)
      {
         k = uintxx_t(start - offset);
      }
      else // start < offset
      {
         uintxx_t before_the_segment = (offset - start) % stride;

         k = before_the_segment == 0 ? 0 : stride - before_the_segment;
      }

      while (k <= max_bit)
      {
         set_bit(target_segment, k);

         // k can wrap since strides go up to almost 2^32
         if ((k += stride) < stride)
         {
            break;
         }
      }
   }
} 
```

对于 SPOJ 问题 - 小于 2^32 的数字 - 无符号整数对于所有变量（即 uint32_t 而不是 uintxx_t 和 uint64_t）就足够了，有些事情可以进一步简化。此外，您可以使用`sqrt()`代替`max_factor32()`这些小范围。

在演示代码`extend_factor_sieve_to_cover()`中，在道德上等同`sieve32(odd_composites32, 0, max_factor_bit + 1)`于小的、缓存友好的步骤。对于 SPOJ 问题，您可以简单地使用单个 sieve32() 调用，因为在小于 2^32 的数字中只有 6541 个小的奇质因数，您可以立即进行筛分。

因此，解决这个 SPOJ 问题的诀窍是使用分段筛分，它将总运行时间减少到几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:22:37.473

`primes`我还没有完全看清楚，但一个因素是，你正在用替换某个值`nil`，然后`compact`- 将其删除。这是一种浪费。只需直接使用 with 即可`delete_at`使其速度提高两倍以上：

```
def ranged_sieve2(l, b)
  primes = (l..b).to_a
  primes.delete_at(0) if primes[0] < 2
  (2..Math.sqrt(b).to_i).each do |counter|
    step_from = l / counter
    step_from = step_from * counter
    l > 3 ? j = step_from : j = counter + counter
    (j..b).step(counter) do |stepped|
      index = primes.index(stepped)
      primes.delete_at(index) if index
    end
  end
  primes
end

ranged_sieve(1, 100) # => Took approx 8e-4 seconds on my computer
ranged_sieve2(1, 100) # => Took approx 3e-4 seconds on my computer 
```

另一个需要改进的地方是，当相关大小变大时，使用散列比数组快得多。用哈希替换你的数组实现，你可以得到这个：

```
def ranged_sieve3(l, b)
  primes = (l..b).inject({}){|h, i| h[i] = true; h}
  primes.delete(0)
  primes.delete(1)
  (2..Math.sqrt(b).to_i).each do |counter|
    step_from = l / counter
    step_from = step_from * counter
    l > 3 ? j = step_from : j = counter + counter
    (j..b).step(counter) do |stepped|
      primes.delete(stepped)
    end
  end
  primes.keys
end 
```

当你这样做`range_sieve3(1, 100)`时，它比`range_sieve2(1, 100)`因为开销要慢。但是当你把数字变大时，优势就会变得突出。例如，我在我的电脑上得到了这个结果：

```
ranged_sieve(1, 1000) # => Took 1e-01 secs
ranged_sieve2(1, 1000) # => Took 3e-02 secs
ranged_sieve3(1, 1000) # => Took 8e-04 secs 
```

# ruby-on-rails - heroku：运行 rake db：迁移错误

> ID：14003881
> 
> 赞同：2
> 
> 时间：2012-12-22T15:05:15.420
> 
> 标签：ruby-on-rails, ruby, heroku, migrate

```
Running `rake db:migrate` attached to terminal... failed
 !    Multiple apps in folder and no app specified.
 !    Specify app with --app APP. 
```

当我尝试运行 rake db:migrate 时，我在终端中收到上述错误，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T15:10:26.820

正如错误明确指出的那样，您需要指定要为其运行命令的应用程序。如果您在项目目录中，则不需要指定应用程序。如果您不在项目文件夹之外，请像这样运行命令：

```
heroku run rake db:migrate --app <your-app-name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T20:17:34.810

我在与heroku无关的地方出现了这个问题。如果你真的想看，打开你的 .git/config 文件

例如，我在登台时发现我有第二个遥控器。从我的 .git/config 文件中删除它修复了所有问题。

```
[remote "staging"]
    url = git@heroku.com:site-stage.git
    fetch = +refs/heads/*:refs/remotes/staging/* 
```

# php - 为 WordPress Jetpack 插件联系表单提取数据

> ID：14003883
> 
> 赞同：3
> 
> 时间：2012-12-22T15:05:20.213
> 
> 标签：php, forms, wordpress

我的网站上有一个小表单，是我使用 Jetpack 插件创建的（它具有内置的联系表单创建器）。

`artist`我想从我的自定义帖子类型“ ”（使用帖子的标题）中提取用于选择输入的选项。有没有办法做到这一点？

```
[contact-field label='Artist' type='select' required='1' options='i want my titles go here separated by commas plus "other" option'/] 
```

该字段的代码如下所示。我相信我需要在这个页面模板中做一些 php+jquery 的东西，但我似乎无法得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T21:38:51.533

有一些创造力，是的，这是可能的:)

我们创建另一个简码来创建“虚拟”JetPack 简码。

我使用默认的 post_type 对此进行了测试。

```
add_shortcode( 'my-jet-form', 'so_14003883_jet_form' );

function so_14003883_jet_form( $atts, $content ) 
{
    // Query our post type, change accordingly
    $posts = get_posts( array(
        'post_type'    => 'post',
        'numberposts'  => -1,
        'post_status'  => 'publish'
    ) );

    // Build an array of post titles
    $titles = array();
    foreach( $posts as $post )
    {
        $titles[] = $post->post_title;
    }

    // Convert array into comma sepparated string
    $posts_select = implode( ',', $titles );

    // Make JetPack shortcode
    $return = do_shortcode( '[contact-form][contact-field label="Name" type="name" required="1"/][contact-field label="Artist" type="select" options="' . $posts_select . '"/][/contact-form]' );
    return $return;
} 
```

**用法**：

*   调整所需的帖子类型
*   调整`do_shortcode`部分以适合您的原始简码
*   将短代码放在`[my-jet-form]`您想要的任何地方
*   瞧

# c++ - ACE 宏定义错误

> ID：14003885
> 
> 赞同：1
> 
> 时间：2012-12-22T15:06:18.827
> 
> 标签：c++, gcc, ace

我在扩展 ACE 日志记录宏时遇到了困难。这是一个基本问题，但我无法解决它。

我正在尝试用变量参数列表来制定我自己的 ACE 日志记录宏。我的编译器（gcc 版本 4.4.6 20120305 (Red Hat 4.4.6-4) (GCC)）支持该`__VA_ARGS__`标准。我目前的定义如下：

```
#define ERROR_PREFIX            ACE_TEXT("ERROR (%T)%?%I")
#define ERROR(FMT,...) ACE_DEBUG((LM_ERROR, ACE_TEXT(FMT) __VA_ARGS__)) 
```

我想通过这个调用序列来调用它：

```
ERROR( "This is an example error in file %s\n", errorString.c_str() ) 
```

但我最终得到以下编译错误：

```
error: expected ‘)’ before ‘errorString’ 
```

我应该如何最好地修改我的宏定义来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:24:29.950

我不熟悉 ACE，但您*似乎*正在寻找逗号删除扩展：

```
#define ERROR(FMT, ...) ACE_DEBUG((LM_ERROR, ACE_TEXT(FMT), ##__VA_ARGS__)) 
```

如[GNU CPP 手册的“可变参数宏”部分中所述](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/cpp/Variadic-Macros.html)，当且仅当使用零变量参数调用宏时，在逗号之间放置`##`并且`__VA_ARGS__`具有删除逗号的特殊效果。因此，

```
ERROR("This is an example error");
ERROR("This is an example error %s", string); 
```

将分别扩展为

```
ACE_DEBUG((LM_ERROR, ACE_TEXT("This is an example error")));
ACE_DEBUG((LM_ERROR, ACE_TEXT("This is an example error %s"), string)); 
```

这*可能*是你想要的（同样，我不知道 ACE）。*除非您关心到非常旧的*GCC 的可移植性，如在 EGCS 之前的版本中，否则在三个令牌序列中和周围的间距`, ## __VA_ARGS__`无关紧要。

 *此功能是一个 GNU 扩展，clang 和任何使用 EDG 前端并启用其 GNU 兼容模式的东西也支持此功能。至关重要的是，据我所知，微软的编译器*不支持它。*

（因为快到圣诞节了，我还应该提一下，在括号里面加空格会让小耶稣哭泣。）*

# android - 单击时刷新 TextView 文本值

> ID：14003892
> 
> 赞同：1
> 
> 时间：2012-12-22T15:07:01.430
> 
> 标签：android, gridview, textview, contextmenu

我在一个活动中有一个网格视图，每次点击网格元素时我都试图显示一个上下文菜单。我希望这个上下文菜单在文本视图中显示一个动态值（点击的网格元素的位置）。我正在创建自己的上下文菜单，因为我不想要警报或默认的 android 上下文菜单。我也在使用 SDK：

```
<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="16" /> 
```

这是我的网格视图的 java.class

```
 public class Grid_Items extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_grid_items);       
    GridView gridView = (GridView) findViewById(R.id.gridViewLayout);
    gridView.setAdapter(new ImageAdapter(this));
    gridView.setOnItemClickListener(new OnItemClickListener() {

    View contextualMenuView = null;         

        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            // RelativeLayout that contains parent layout
            RelativeLayout rootLayout = (RelativeLayout)findViewById(R.id.root);

            // in case there is a context menu open, remove it
            if(contextualMenuView!=null) {
                rootLayout.removeView(contextualMenuView);
                }

            // inflate contextual menu
            contextualMenuView = getLayoutInflater().inflate(R.layout.contextual_menu, rootLayout);

            // sets values for the textview
            TextView tv = (TextView) findViewById(R.id.tab1);
            tv.setText("tab1 = "+String.valueOf(position));

        } 
```

*   第一次单击网格元素时，我的上下文菜单会在文本视图中显示正确的文本值
*   第二次和每隔一次，菜单仍然存在，但 textview 文本值为空，每次用户点击网格中的元素时，我都需要“刷新”这个值

gridview 活动的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/root"
android:layout_width="match_parent"
android:layout_height="match_parent">

<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridViewLayout" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center">

</GridView>

</RelativeLayout> 
```

我膨胀的上下文菜单的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/contextualMenuLayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:background="#ffffff">

<!-- --> 

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tab1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"   
    android:layout_marginRight="10dip"
    android:layout_marginLeft="10dip"
    android:layout_marginTop="10dip"
    android:layout_marginBottom="10dip"
    android:textSize="28sp"

    android:textColor="#ff0000">
</TextView> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:15:47.413

尝试使用您的*ContextualMenuView*实例（*contextualMenuView ）检索**tab1*：

 **```
tv = (TextView) contextualMenuView.findViewById(R.id.tab1); 
```

另外，您能否尝试在 onCreate() 方法中扩展您的*ContextualMenuView并在那里实例化您的**TextView*？**

# c++ - C++ char 序列函数总是返回空字符串

> ID：14003894
> 
> 赞同：0
> 
> 时间：2012-12-22T15:07:23.337
> 
> 标签：c++, charsequence

刚开始学习 C++ 并尝试使用以下代码创建一个简单的函数来执行子字符串：

```
char* substring(int start, int end, const char* target)
{
    size_t length = strlen(target);

    char result[(length + 1)];

    int iterator = 0;

    for(int i = start; i < length; i++)
    {
        if(i <= end)
        {
            result[iterator] = target[i];

            iterator++;
        }
    }

    result[iterator] = '\0';

    cout << result << endl; // This give correct result "aya";

    return result;
} 
```

当我在 main 方法上使用这些函数时：

```
int main(int argc, char** argv) {

    char some_text[] = "Saya Makan";

    char* sub = substring(1, 3, some_text); // No string returned

    cout << "Substring Result is: " << sub;

    return 0;
} 
```

它给出的输出是这样的：

```
aya
Substring Result is: 
RUN SUCCESSFUL (total time: 44ms) 
```

从结果中可以看出，我的函数只返回空字符串，尽管在返回之前有一行代码，“result”变量正确地回显了结果。请您向我解释一下我的函数内部发生了什么，我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:09:00.310

您正在返回指向不需要超出函数的本地数组的指针。

您需要通过使用动态分配缓冲区来使缓冲区持续超出函数的范围`malloc`。`free`当然，以后记得。

哦，刚刚注意到它的 C++。
所以放弃`malloc`and`free`简单地使用`std::string`and not的想法`char *`。

# windows-8 - 有没有办法获得 CharmsBar 宽度？

> ID：14003896
> 
> 赞同：2
> 
> 时间：2012-12-22T15:07:27.403
> 
> 标签：windows-8, windows-store-apps

当 CharmsBar（特别是 SearchPane）打开时，我想调整我的应用程序的一些控件的大小。我做了一些测试，宽度通常为 343，但有时更大（这取决于屏幕的大小，而不是分辨率。至少，使用模拟器）。

有人知道是否有一种编程方法可以获取该值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:14:18.857

宽度始终为 346 *，但*您必须应用缩放因子才能获得以像素为单位的实际宽度。这可以通过以下方式实现：

```
double SearchPaneWidth() {
        var scale = Windows.Graphics.Display.DisplayProperties.ResolutionScale;
        switch (scale) {
            case Windows.Graphics.Display.ResolutionScale.Scale100Percent:
                return 1.0 * 346;
            case Windows.Graphics.Display.ResolutionScale.Scale140Percent:
                return 1.4 * 346;
            case Windows.Graphics.Display.ResolutionScale.Invalid:
                return 1.8 * 346;
            default:
                throw new Exception("Unknown resolution scale");
        }
    } 
```

# c++ - 通过将某人排序到链表中添加某人时出现分段错误的原因

> ID：14003899
> 
> 赞同：0
> 
> 时间：2012-12-22T15:07:53.157
> 
> 标签：c++, sorting, linked-list

项目清单

```
void MovieDatabase::  addActor(const string movieTitle, const string actorFirstName, const string actorLastName, const string actorRole ){
    bool found = false;
    Movie* temp;
    for(Movie* m= headMovie; m != NULL;  m = m-> next){
            if(m-> title == movieTitle){
                found = true;
                temp = m;
                break;
            }
    }

    if(found){
            if(headCast == NULL)
                    headCast =  new Cast(actorFirstName, actorLastName, actorRole, movieTitle);
            else{
                    Cast *c =  new Cast(actorFirstName, actorLastName, actorRole, movieTitle);
                    Cast *temp = headCast;
                    for(Cast* cur = headCast; cur -> next != NULL;  cur = cur -> next){
                             if(cur ->next -> lastName <  actorLastName){
                                    temp = temp -> next;
                            }
                            else{
                                    c -> next = cur -> next;
                                    temp  -> next= c;
                                    break;
                            }
                    }
            }
    }
    else
    cout << "The movie with a " << movieTitle << "  does not exist in the database,you can not add the actor. " << endl;
    size++;
} 
```

大家好，我编辑了代码，现在我没有任何错误。但是，它没有显示任何输出。这意味着它不添加任何内容。在任何情况下，我都会发送用于显示的代码。

```
void MovieDatabase:: showActors(){
    for(Cast * cur= headCast;  cur != NULL; cur = cur -> next){
         cout  << cur  -> lastName << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:20:05.113

在这段代码中：

```
for(Cast* cur = headCast; cur != NULL;  cur = cur -> next){
    if(cur ->next -> lastName <  actorLastName){ 
```

您只检查那个`cur != NULL`，然后取消引用`cur->next`。`cur->next`可以为 NULL。

`temp`并且`cur`两者似乎都指向同一个节点。也许您打算将一个领先于另一个，以便您有一个指向前一个节点的指针以进行插入？

这是一个（未经测试的）实现：

```
 Cast *c =  new Cast(actorFirstName, actorLastName, actorRole, movieTitle);
    Cast *prev = NULL; // maintain a pointer to the previous node. No previous node initially.
    Cast *cur;
    for(cur = headCast; cur != NULL;  cur = cur -> next)
    {
        if(cur -> lastName > actorLastName) break; // stop if we find a place to insert.
        prev = cur;                                // update previous pointer before looping.
    }
    if(prev != NULL)
    {
        prev -> next = c; // if there is a previous node, use 'c' as its next node.
    } else {
        headCast = c;     // otherwise 'c' is the new head node.
    }
    c -> next = cur;      // the 'current' node always goes after 'c'. 
```

# python - 通过考虑时区来比较时间

> ID：14003901
> 
> 赞同：1
> 
> 时间：2012-12-22T15:08:00.760
> 
> 标签：python, google-app-engine, pytz

根据[Convert UTC to local time to UTC in Python and Google App Engine](http://appengine.sitebob.com/convert-utc-to-local-time-to-utc-in-python/)，为了正确比较现在的时间和目标时间（考虑不同的时区），我必须将目标时间转换为 UTC，如下所示：

```
import pytz

def toUTC(date, tz):
    tz = pytz.timezone('Asia/Taipei')
    utc = pytz.timezone('UTC')
    d_tz = tz.normalize(tz.localize(date))
    d_utc = d_tz.astimezone(utc)
    return d_utc

days = 10
minutes = 20
targetTime = datetime.datetime(2012,12,22,0,0,0)
targetTime = targetTime + datetime.timedelta(days=days, minutes=minutes)
targetTime = toUTC(targetTime) 

if targetTime < datetime.datetime.now():
    ... 
```

问题：

1.  这个对吗？
2.  有一条错误消息：

    `TypeError: can't compare offset-naive and offset-aware datetimes`

    如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:14:41.260

这是因为您的一个`datetime`对象设置了时区，而另一个对象没有。
看看[这里](https://stackoverflow.com/questions/796008/python-cant-subtract-offset-naive-and-offset-aware-datetimes)和[这里](https://stackoverflow.com/questions/7065164/how-to-make-an-unaware-datetime-timezone-aware-in-python)

# javascript - 如何实现解析文本中自己的html标签

> ID：14003903
> 
> 赞同：4
> 
> 时间：2012-12-22T15:08:02.447
> 
> 标签：javascript, jquery, state-machine

我的任务是实现自己的标签，使文本**加粗**、下划线或删除线以及任何嵌套。像一个

```
*bold text* _underlinetext_ -strikethrough- 
```

我还需要制作自己的超链接，例如

```
[link | http://stackoverflow.com] 
```

出现的第一个想法 - 它应用正则表达式。编码：

```
View.prototype.parseText = function(text) {

text = text.replace(/\*([^\*]+)\*/g, '<b>$1</b>');
text = text.replace(/\_([^\_]+)\_/g, '<u>$1</u>');
text = text.replace(/\-([^\-]+)\-/g, '<s>$1</s>');
text = text.replace(/\[([^\|].+)\|(.+)\]/g, '<a href="$2">$1</a>');

return text;}; 
```

它正在工作，但我需要可扩展性。正则表达式不是一个好主意，因为它是硬编码的。如何使用有限状态机（或任何 jQuery 插件）实现该任务？如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:07:48.360

无论您做什么，要扩展您的标记系统，您都需要： 1\. 定义标记，以及 2\. 将其替换为等效的 HTML。

即使您用 js 编写自己的解析器，归根结底，您仍然需要执行上述 2 个步骤，因此它并不比您现在拥有的更具可扩展性。

正则表达式是这项工作的工具，除非您有其他要求（即仅在这样的元素内替换，但在另一个元素中执行其他操作，这需要解析）。

您可以将您的正则表达式调用包装在一个函数中，并在需要扩展该功能时简单地将正则表达式替换添加到该函数中。如果需要在多个页面中，将其添加到外部 js 文件中。

```
function formatUserContent(text)
{
  text = text.replace(/\*([^\*]+)\*/g, '<b>$1</b>');
  text = text.replace(/\_([^\_]+)\_/g, '<u>$1</u>');
  text = text.replace(/\-([^\-]+)\-/g, '<s>$1</s>');
  text = text.replace(/\[([^\|].+)\|(.+)\]/g, '<a href="$2">$1</a>');
  return text;
} 
```

完成后，扩展功能就像添加一样简单

```
text = text.replace(/\+([^\-]+)\+/g, '<em>$1</em>'); 
```

在函数体中。我怀疑推出自己的有限状态机会更容易扩展，恰恰相反。

花几个小时在有限状态机上，希望它可以在未来某个未知的时间节省几分钟，这不是一个好的投资……当然，除非你想找个借口来写一个有限状态机，在这种情况下， 前进。

作为旁注，我建议让您的正则表达式更加简单。

```
text = text.replace(/\[([^\|].+)\|\s*(http://.+)\]/g, '<a href="$2">$1</a>'); 
```

（除非您有可以为用户完成工作的 UI 元素）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T16:16:03.380

我可以建议你以下实现[http://jsfiddle.net/NwRCm/5/](http://jsfiddle.net/NwRCm/5/)

它使用状态设计模式（由于 JavaScript 和目的而稍作修改）。从表面上看，所有状态都是用正则表达式实现的，但在我看来，这是最有效的方式。

```
/* View definition */

function View(container) {
    this.container = container;
    this._parsers = [];
    this._currentState = 0;
};

View.prototype.parse = function(text) {

    var self = this;
    this._parsers.forEach(function (e) {
        self._parse(e);
    });

    return this.container.innerHTML;

};

View.prototype._parse = function (parser) {
    var text = parser.parse(this.container.innerHTML);
    this.container.innerHTML = text;
    return text;
};

View.prototype.nextState = function () {
    if (this._currentState < this._parsers.length) {
        return this._parse(this._parsers[this._currentState++]);
    }
    return null;
};

View.prototype.addParser = function (parser) {
    if (parser instanceof Parser) {
        return this._parsers.push(parser);
    } else {
        throw 'The parser you\'re trying to add is not an instance of Parser';
    }
};
/* end of the View definition */

/* Simulation of interface */
function Parser() {};

Parser.prototype.parse = function () {
    throw 'Not implemented!';
};

/* Implementation of bold parser */
function BoldParser() {};

BoldParser.prototype = new Parser();

BoldParser.prototype.parse = function (text) {
    text = text.replace(/\*([^\*]+)\*/g, '<b>$1</b>');
    return text;
};

/* Implementation of underline parser */
function UnderlineParser() {};

UnderlineParser.prototype = new Parser();

UnderlineParser.prototype.parse = function (text) {
    text = text.replace(/\_([^\_]+)\_/g, '<u>$1</u>');
    return text;
};

/* Link parser */
function LinkParser() {};

LinkParser.prototype = new Parser();

LinkParser.prototype.parse = function (text) {
    text = text.replace(/\[([^\|].+)\|(.+)\]/g, '<a href="$2">$1</a>');
    return text;
};

var v = new View(document.getElementById('container'));
v.addParser(new UnderlineParser());
v.addParser(new BoldParser());
v.addParser(new LinkParser());
v.nextState();
v.nextState();
v.nextState(); 
```

​让我更深入地了解一下实现。首先我们有一个基“类”（构造函数）视图。每个视图都有它的基础`container`和解析器列表，它还记得接下来应该应用哪个解析器。

之后，我们有了“抽象类”（原型中带有引发异常的方法的构造函数）`Parser`，它定义了一个`parse`必须由每个解析器实现的方法。

之后，我们只需定义不同的具体解析器并将它们添加到视图中。我们可以一个一个地传递状态（`View`'s `nextState`）或在单个方法调用（`View`'s `parse`）中传递所有状态。我们可以动态添加新的解析器。

可以批准的事情是包括用于管理解析器的享元工厂。

在实现不同的模式（例如模板方法）时，使用“抽象”构造函数的方法也非常有用。

*   由于所有这些构造函数和对象的定义，编辑可能会有一些开销。一切都可以通过回调来完成，即每个状态都是不同的函数。我使用这种方法是因为我一直在寻找最容易理解、从语言特定功能中清晰的答案。我希望我做到了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T15:36:37.107

也许您想使用现有的库，例如[http://www.showdown.im/上的 Markdown 库](http://www.showdown.im/)

如果您更喜欢自己编写，那么我建议您查看源代码以了解它的解析方式（可能还有其他语言的 Markdown 处理器的源代码）。给你的一些建议：

*   使用 jQuery 操作标记
*   不要使用正则表达式来解析语言。当标记元素混合在一起时，您会遇到问题。

# azure - 增加 Azure 数据磁盘大小

> ID：14003905
> 
> 赞同：2
> 
> 时间：2012-12-22T15:08:20.327
> 
> 标签：azure, azure-storage

我目前将 1 GB 的数据磁盘附加到在 Azure 上运行的 Windows Extra Small VM。

如何在不丢失数据的情况下增加数据磁盘的大小？

是否可以将更多磁盘附加到 Extra Small VM，尤其是从其他存储帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:38:04.877

> 如何在不丢失数据的情况下增加数据磁盘的大小？

我不认为你可以增加数据磁盘的大小。

> 是否可以将更多磁盘附加到 Extra Small VM，尤其是从其他存储帐户？

您可以附加另一个数据磁盘。您最多可以将 16 个数据磁盘附加到 VM。由于数据磁盘本质上是一个页 blob，因此您只需为占用的空间付费，而不是磁盘的实际大小，因此建议附加更大尺寸的数据磁盘，以免磁盘空间不足。虽然我还没有尝试从不同的存储帐户附加数据磁盘，但我看不出它不可能的原因（尽管它们应该在同一个数据中心）。但是，您可能希望将所有操作系统和数据磁盘保留在同一个存储帐户中，以改善延迟。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:24:21.447

可以将更多磁盘附加到 Extra Small VM。

无法在磁盘管理中增加数据磁盘的大小。但是通过一些额外的步骤，您可以通过将 VHD 下载到连接到不同 VM 的更大磁盘中来完成此操作，安装并扩展它，然后将其放回原来的位置并再次将其连接到原始 VM。

[请在此处](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/122dffc9-158d-47d7-b928-d9be8a2bc902)查看 Drew 的描述

# javascript - ASP.Net/Javascript 网站：用 IIS 如何停止缓存 javascript？

> ID：14003906
> 
> 赞同：1
> 
> 时间：2012-12-22T15:08:22.320
> 
> 标签：javascript, asp.net, iis-6

我对我的网站进行了更新，并且更改了一些 Javascript 文件。但是一些客户仍然得到旧的 Javascript 文件而不是新的。他们可以删除他们的临时 Internet 文件，但这不是我想要的。

IIS6 中有什么可以使用的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:11:17.050

更改文件的链接-例如，`.js`添加一个参数。`.js?ver=1.0`

每次更改`.js`文件时，更改参数 - 这将确保客户端将获得最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:21:21.777

您可以使用“缓存清除”。一个简单的解决方案是在查询字符串中附加一个版本号，例如：`script.js?v=1.1`.

另一种解决方案是动态计算自动附加到查询字符串的 .js 文件的校验和或哈希，因此每次修改 .js 文件的内容时，都会生成新的校验和/哈希并将其附加到查询字符串。

# c++ - 链接时间时在 C++ 中找不到处理多维数组的函数

> ID：14003910
> 
> 赞同：1
> 
> 时间：2012-12-22T15:09:24.757
> 
> 标签：c++, multidimensional-array

我写了一个头文件，声明了一个使用三个多维数组作为参数的函数，并在另一个 .cpp 文件中定义了它。看起来不错，但在链接时找不到该函数。这是头文件：

```
#ifndef StrassenAlgorithms_Algorithm_h
#define StrassenAlgorithms_Algorithm_h
template<int size>
void strassen_matrix_multiplication(int A[size][size], int B[size][size], int C[size][size]);

#endif 
```

然后是对应的.cpp文件：

```
#include "Algorithm.h"

template<int size>
void strassen_matrix_multiplication(int (*A)[size], int (*B)[size], int (*C)[size]){
if (size == 1) {
    return;
}

const int n = size / 2;
int A11[n][n];
int A12[n][n];
int A21[n][n];
int A22[n] [n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        A11[i][j] = A[i][j];
        A12[i][j] = A[i + n][j];
        A21[i][j] = A[i][j + n];
        A22[i][j] = A[i + n][j + n];
    }
}

int B11[n][n], B12[n][n], B21[n][n], B22[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        B11[i][j] = A[i][j];
        B12[i][j] = A[i + n][j];
        B21[i][j] = A[i][j + n];
        B22[i][j] = A[i + n][j + n];
    }
}

/** S1 = B12 - B22 */
int S1[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S1[i][j] = B[i + n][j] - B[i + n][j + n];
    }
}

/** S2 = A11 + A12 */
int S2[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S2[i][j] = A[i][j] + A[i + n][j];
    }
}

/** S3 = A21 + A22 */
int S3[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S3[i][j] = A[i][j + n] + A[i + n][j + n];
    }
}

/** S4 = B21 - B11 */
int S4[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S4[i][j] = B[i][j + n] - B[i][j];
    }
}

/** S5 = A11 + A22 */
int S5[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S5[i][j] = A[i][j] + A[i + n][j + n];
    }
}

/** S6 = B11 + B22 */
int S6[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S6[i][j] = B[i][j] + B[i + n][j + n];
    }
}

/** S7 = A12 - A22 */
int S7[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S7[i][j] = A[i + n][j] - A[i + n][j + n];
    }
}

/** S8 = B21 + B22 */
int S8[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S8[i][j] = B[n][j + n] + B[i + n][j + n];
    }
}

/** S9 = A11 - A21 */
int S9[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S9[i][j] = A[i][j] - A[i][j + n];
    }
}

/** S10 = B11 + B12 */
int S10[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S10[i][j] = B[i][j] + B[i + n][j];
    }
}

int P1[n][n];
strassen_matrix_multiplication(A11, S1, P1);

int P2[n][n];
strassen_matrix_multiplication(S2, B22, P2);

int P3[n][n];
strassen_matrix_multiplication(S3, B11, P3);

int P4[n][n];
strassen_matrix_multiplication(A22, S4, P4);

int P5[n][n];
strassen_matrix_multiplication(S5, S6, P5);

int P6[n][n];
strassen_matrix_multiplication(S7, S8, P6);

int P7[n][n];
strassen_matrix_multiplication(S9, S10, P7);

/** C11 = P5 + P4 - P2 + P6 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i][j] = P5[i][j] + P4[i][j] - P2[i][j] + P6[i][j];
    }
}

/** C12 = P1 + P2 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i + n][j] = P1[i][j] + P2[i][j];
    }
}

/** C21 = P3 + P4 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i][j + n] = P3[i][j] + P4[i][j];
    }
}

/** C22 = P5 + P1 - P3 - P7 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i + n][j + n] = P5[i][j] + P1[i][j] - P3[i][j] - P7[i][j];
    }
}

return;    
} 
```

最后是主文件：

```
#include <iostream>
#include "Algorithm.h"
using namespace std;

int main(int argc, const char * argv[])
{
const int size = 2;
int A[size][size] = {{1, 2}, {3, 4}};
int B[size][size] = {{1, 2}, {3, 4}};
int C[size][size] = {0, 0, 0, 0};
strassen_matrix_multiplication<2>(A, B, C);
for(int i=0; i<size; i++){
    for (int j=0; j<size; j++) {
        cout << C[i][j] << "\t";
    }
    cout << endl;
  }
} 
```

它没有编译错误，但在链接时失败说

```
Undefined symbols for architecture x86_64:
"void strassen_matrix_multiplication<2>(int (*) [2], int (*) [2], int (*) [2])", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决这个问题？谢谢你的帮助。在线等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:28:13.943

您的问题是模板方法和类不能在目标文件中实现，而必须在标头中实现，以便编译器可以进行模板扩展。除此之外，即使您可以，这些方法签名似乎也与我不完全一致。

# c - 使用 c 从 app-indicator 中的 GtkMenu 中删除 GtkMenuItem

> ID：14003914
> 
> 赞同：3
> 
> 时间：2012-12-22T15:09:59.580
> 
> 标签：c, gtk, gtk3

我正在构建一个使用应用程序指示器的应用程序。菜单应动态更新。使用 gtk_menu_shell_append 添加项目效果很好，但是对于删除我找不到 gtk_menu_shell_* 函数。我找到了 gtk_container_remove 并使用 gtkmenuitem 调用它，它的父级会导致以下警告：

```
GLib-GObject-WARNING **: invalid unclassed pointer in cast to `GtkWidget'
Gtk-CRITICAL **: gtk_widget_get_parent: assertion `GTK_IS_WIDGET (widget)' failed
Gtk-CRITICAL **: gtk_container_remove: assertion `GTK_IS_CONTAINER (container)' failed 
```

我也试过调用 gtk_widget_destory 并得到这样的错误：

```
GLib-GObject-WARNING **: invalid unclassed pointer in cast to `GtkWidget'
Gtk-CRITICAL **: gtk_widget_destroy: assertion `GTK_IS_WIDGET (widget)' failed 
```

请注意，这两种方法实际上都从菜单中删除了菜单项。

从 GtkMenu 中删除 GtkMenuItem 而不产生这些错误/警告的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:32:37.257

显然小部件在某种程度上是错误的（不明白为什么这仍然有效）。

# php - extract 调用结果的 PHP 文档

> ID：14003921
> 
> 赞同：-1
> 
> 时间：2012-12-22T15:11:07.897
> 
> 标签：php, extract

我有几个变量必须通过调用提取函数来提取。如何编写 phpdoc 来告诉我的 IDE (PHPStorm) 提取了哪些变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:30:52.093

PHPStorm 的跟踪器上有一个与此相关的[**未解决问题**](http://youtrack.jetbrains.com/issue/WI-2416)。就目前而言，建议的[解决方法](http://youtrack.jetbrains.com/issue/WI-11207#comment=27-328962)是明确编写文档注释：

```
<?php
extract(array('asd' => 'val'));
/** @var $asd string */
do_something_with($asd); 
```

...显然，您必须知道由`extract`- 处理的数组的键，因为您将使用以它们命名的变量。

再说一次，我确实同意该问题的提出者：`extract`可以在您编写代码的第一个版本时为您节省一些按键，但是很有可能不值得浪费在修复细微错误上的努力由它介绍。事实上，一些编码约定`extract`完全不鼓励使用。

# python - Python cgi编码/特殊字符

> ID：14003924
> 
> 赞同：0
> 
> 时间：2012-12-22T15:11:16.133
> 
> 标签：python, python-3.x, encoding, cgi

从本地控制台运行时会打印“Test: £17”，但从 Web 浏览器运行时只会打印“Test:”。通过浏览器加载时如何纠正问题？谢谢！

```
#!/usr/bin/python3.2
print ("Content-Type: text/html")
print ("")

y = "£17"
print ("Test:", y) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T15:16:32.040

打印到控制台时，Python 会将 unicode 值编码为字节。

发送到浏览器时显式编码，直接写入`sys.stdout`：

```
#!/usr/bin/python3.2
import sys
out = sys.stdout
out.write(b"Content-Type: text/html; charset=utf8\r\n")
out.write(b"\r\n")

y = "£17"
out.write("Test: {0}\r\n".format(y).encode(encoding='utf8')) 
```

请注意，HTTP 标头实际上应该使用`\r\n`（回车，换行）组合。我还添加了用于`Content-Type`标头的编码，以便浏览器知道如何再次对其进行解码。

对于 HTML，您确实希望使用[字符实体引用](http://www.w3.org/TR/html4/sgml/entities.html)而不是 Unicode 代码点：

```
y = "&pound;17"
out.write("Test: {0}\r\n".format(y).encode(encoding='utf8')) 
```

此时您也可以只使用 ASCII 作为编码。

如果您真的，真的，真的想使用，请使用正确的编码`print()`重新打开：`stdout`

```
utf8stdout = open(1, 'w', encoding='utf-8', closefd=False) # fd 1 is stdout

print("Content-Type: text/html; charset=utf8", end='\r\n', file=utf8stdout)
print("", end='\r\n', file=utf8stdout)

y = "£17"
print("Test:", y, end='\r\n', file=utf8stdout) 
```

您可以通过以下方式简化它[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)：

```
from functools import partial
utf8print = partial(print, end='\r\n', file=utf8stdout) 
```

然后使用`utf8print()`没有额外的关键字：

```
utf8print("Content-Type: text/html; charset=utf8")
utf8print("")
# etc. 
```

另请参阅[Python Unicode HOWTO](http://docs.python.org/3/howto/unicode.html)以了解有关 Python 如何设置输出编码的详细信息，以及Stack Overflow 上有关打印和编码的[这个问题。](https://stackoverflow.com/questions/3597480/how-to-make-python-3-print-utf8)

# jquery - 带有特殊字符的 jQuery .ajax() 方法在 IE 7 上不起作用

> ID：14003928
> 
> 赞同：1
> 
> 时间：2012-12-22T15:12:06.883
> 
> 标签：jquery, ajax, internet-explorer, special-characters

`.ajax`当我将特殊字符发送到 data 参数时，我在使用 jQuery 的方法时遇到问题，**但仅限于 Internet Explorer 7**。它适用于 IE 8、9、Firefox 和 Chrome。

这是代码的和平：

```
jqxhr = $.ajax({url: "/aj_search/", async: true, type: 'POST', dataType: 'json',
  data: decodeURIComponent($('#crit_form').serialize(true)),
  success: function(json){ // process code}
}); 
```

这是我发送的数据（当我打印 decodeURIComponent 结果时）：

boite=Boîte+Manuelle&csrfmiddlewaretoken=ENFuL4ioBQ4nfkUESmkkAzNtHB7rhTKV&prix_min=0&prix_max=15&km=&annee_min=1989&annee_max=2012&dpt=&modeles=&page=1&p_page=10&sort_crit=weight&sort_dir=1&comps=&is_comp=ma=0&ex

问题在于**Boîte+Manuelle**。当我打印我在 django 视图中得到的内容（在服务器上接收到的数据）时，我得到：

```
Bo�te Manuelle 
```

这里有什么想法吗？为什么这仅适用于 IE7？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:58:27.197

无论如何您都不需要使用`decodeURIComponent`，请尝试将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:18:56.310

尝试 encodeURIcomponent 代替

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:32:04.087

[http://webdesign.about.com/od/localization/l/blhtmlcodes-ro.htm](http://webdesign.about.com/od/localization/l/blhtmlcodes-ro.htm)

这肯定会帮助你。使用给出的代码而不是特殊字符 ok。

# c++ - 基类指针向量

> ID：14003932
> 
> 赞同：0
> 
> 时间：2012-12-22T15:13:04.743
> 
> 标签：c++, pointers, vector

忍受我。有3个班。Person 是具有姓名和年龄的基类。Child 是在学校有一个年级的派生类。Parent 是另一个可以有孩子的派生类（是或否）

在我们继续之前，有几件事我必须指出： 这是一个我想出来的练习，所以我可以练习一下继承。这个想法是最终得到一个向量，其中包含从基类到派生类对象的指针。

“程序”依赖于用户输入正确的值，没有错误检查等等，但这不是本练习的重点，所以这就是我没有做任何事情的原因。

非常感谢有关如何解决我遇到的问题的反馈。提前致谢。

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

class Person
{
private:
    string m_name;
    int m_age;
public:
    Person(string name, int age)
    {
        m_name = name;
        m_age = age;
    }
    string get_name()
    {
        return m_name;
    }
    virtual void info() =0;
};

class Child : public Person
{
private:
    int m_grade;
public:
    Child(string name, int age, int grade) : Person(name, age)
    {
        m_grade = grade;
    }
    void info()
    {
        cout <<"I am a child. I go to the " << m_grade << " grade."<<endl;
    }
};

class Parent : public Person
{
private:
    bool m_child;
public:
    Parent(string name, int age, bool child) : Person(name, age)
    {
        m_child = child;
    }
    void info()
    {
        if(m_child == true)
        {
            cout << "I have a child." << endl;
        }
        else
        {
            cout << "I do not have a child" << endl;
        }
    }
};

vector create_list(const int& x)
{
    vector <Person> a;
    for(int a = 0; a < x; a++)
    {
        cout << "enter the name" << endl;
        string o;
        cin >> o;
        cout << "enter the age" << endl;
        int age;
        cin >> age;
        cout << "What would you like your person to be: a Child or a Parent?" << endl;
        string choice;
        cin >> choice;
        if(choice == "Child")
        {
            cout << "enter it's grade" << endl;
            int grade;
            cin >> grade;
            Child* c  = new Child(o, age, grade);
            a.push_back(c);
        }
        else
        {
            cout <<"enter if the parent has a child (yes/no)" << endl;
            string wc;
            cin >> wc;
            if(wc == "yes")
            {
                Parent* p = new Parent(o, age, true);
                  a.push_back(p);
            }
            else
            {
                Parent* p = new Parent(o, age, false);
                  a.push_back(p);
            }
        }
    }
    return a;
}

int main()
{
    cout << "How many people would you like to create?" << endl;
    int x;
    cin >> x;
     vector<Person> a = create_list(x);
     a[0]->getname();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:39:59.753

1.  您`a`在. `vector<Person>`_ `int`_ `for loop`因此，当您到达该行时 `a.push_back(c);`，程序会认为这`a`是一个整数，而不是一个向量。

    使您的变量名称独一无二。

2.  正如其他人所提到的，您的容器是`vector`类型的`Person`，但是您实例化了类型的新派生类`Child *`和`Parent *`，因此您`vector`应该是类型`Person*`。

3.  同样，您的函数的返回类型应为`vector<Person*>`

4.  尽管在这种情况下没有必要，因为您的应用程序会立即结束，但最好确保每次调用 to`new`对应于调用`delete`. 在这种情况下，您将编写一个`free_list`方法来遍历并删除列表中指向的每个 Person 对象。请注意，向量本身不需要清理。

# wordpress - 重写 .htaccess 中的规则以防止 wordpress 工作

> ID：14003935
> 
> 赞同：0
> 
> 时间：2012-12-22T15:14:10.877
> 
> 标签：wordpress, .htaccess, mod-rewrite

只是第一次遇到这个问题。

我刚刚在我的根域 mydomain.com/blog/ 上的一个文件夹中安装了 WordPress

接下来发现一些重写规则阻止它在域上运行。

我在 Apache 上使用 php5

规则如下：

```
rewritecond %{http_host} ^mydomain.com [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]
rewritecond %{http_host} ^mydomain.biz [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]
rewritecond %{http_host} ^mydomain.co.uk [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]
rewritecond %{http_host} ^mydomain.info [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]
rewritecond %{http_host} ^mydomain.net [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]
rewritecond %{http_host} ^mydomain.org [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]
rewritecond %{http_host} ^mydomain.us [nc]
rewriterule ^(.*)$ http://www.smydomain.com/$1 [r=301,nc] 
```

现在已经坚持了 5 个多小时，但似乎无法在任何地方找到任何答案。

请帮忙！！！

即使是咖啡也无济于事:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T17:55:51.580

没关系，我已经发现了这个问题，对于那些会遇到类似问题的人，首先要禁用你的 .htaccess 文件（记住禁用而不是删除），然后登录到你的 wordpress 仪表板进行设置并更改两个网址`http://www.yourdomail.com/blog`然后保存并启用您的.htaccess。那时你应该很高兴。

# php - 如何更新元框中的单选组状态？

> ID：14003936
> 
> 赞同：0
> 
> 时间：2012-12-22T15:14:29.957
> 
> 标签：php, forms, wordpress, radio-group, meta-boxes

我已经在 WordPress metabox 中实现了 radio-group 选项。我在带有相应标签的元框中获得了所需的收音机组，但我未能在选择收音机或保存我正在使用它的帖子时更新我的​​选中状态。我想我有什么需要说的。

```
<div class="my radio group">
<h2>my radio group </h2>

 <?php

  $cars = array('BMW', 'FERRARI', 'PORSCHE', 'BENTALI', 'MRX', 'CHEVROLET');

 foreach ($cars as $car) {
    echo  '<input name="my-best-car" type="radio"  onchange="javascript:document.post.submit()"';
    $option = 'id=" ' .$car . '"';
    $option = '<value="' . $car . '"';

    if ($car == $my_favorite_car) $option .= "checked";
    $option .= '>';
    $option .= '<label for=" '.$car .' ">' . $car .'  ';

    $option .=  '</label>';
    echo $option;
  }
 ?>
</div> 
```

还添加了 WordPress 元框保存功能。我的其他选项类型，如文本、选择和复选框正确更新。当我尝试使用以下方法更新我的 RADIO-GROUP 元值时：

```
update_post_meta($post_id, 'my-best-car', $_POST['my-best-car'], true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:25:09.947

好的，我在 foreach 循环中发现了你的错误，你在值之前有一个 < 额外的，所以该行看起来像这样：

```
$option = 'value="' . $car . '"'; 
```

此外，您的 js 没有提交表单，因此只需在 head 中添加 js 函数，例如：

```
<script>
   function submitOnClick(formName){
       document.forms[formName].submit();
   }
</script> 
```

并以以下形式代替：

```
onchange="javascript:document.post.submit()" 
```

放

```
onclick="submitOnClick(\'myForm\')" 
```

我试过了，它可以工作你只需要相应地重命名你的表单名称

# assembly - x86 迭代一个 2 字节的字数组

> ID：14003938
> 
> 赞同：1
> 
> 时间：2012-12-22T15:14:38.130
> 
> 标签：assembly, x86, dos

我正在使用 emu8086 在 8086 游戏中编写一个循环，我想迭代单词值，而不是像这样声明的数组的字节；

```
player_fire  dw 320 dup(0)

; ...

mov  bx, offset player_fire
mov  cx, 320
fire_loop:
mov  ax, [bx+si]
inc  si
loop fire_loop 
```

但我知道这是错误的。我在写入第 i 个元素时也遇到问题，是否应该使用 bx + si 或 bx + (2*si) 来引用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:27:44.333

第 i 个元素位于 [base + 2*register]。

然而，这不能直接在 80386 寻址模式之前写入。在 8086+ 上，您可以使用：

```
 fire_loop:
  mov ax,[bx+si]
  add si, 2
  loop fire_loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T22:03:34.167

```
 fire_loop:
  mov ax,[bx+si];;mov to the next sell and put in ax
  add si, 2; inc si
  loop fire_loop;dex cx and loop 
```

# python - 带有其他指定关键字参数的 python 函数 *args 和 **kwargs

> ID：14003939
> 
> 赞同：13
> 
> 时间：2012-12-22T15:14:48.560
> 
> 标签：python, python-2.7, methods, args, keyword-argument

我有一个 Python 类，它的方法应该以这种方式接受参数和关键字参数

```
class plot:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def set_axis(self, *args, xlabel="x", ylabel="y", **kwargs):
        for arg in args:
            <do something>
        for key in kwargs:
             <do somethng else> 
```

打电话时：

```
plt = plot(x, y)
plt.set_axis("test1", "test2", xlabel="new_x", my_kwarg="test3") 
```

我得到错误：`TypeError: set_axis() got multiple values for keyword argument 'xlabel'`

无论如何，如果我将我的方法设置为

```
class plot:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def set_axis(self, xlabel="x", ylabel="y", *args, **kwargs):
        for arg in args:
            <do something>
        for key in kwargs:
             <do somethng else> 
```

并致电：

```
plt = plot(x, y)
plt.set_axis(xlabel="new_x", "test1", "test2", my_kwarg="test3") 
```

我得到`SyntaxError: non-keyword arg after keyword arg`了，正如我所期待的。第一种情况有什么问题？我应该如何告诉我的方法接受任何用户参数和关键字参数，而不是默认参数？（希望我的问题足够清楚）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-22T15:59:40.953

In Python 3 this works:

```
Python 3.2.3 (default, Oct 19 2012, 19:53:16) 
>>> def set_axis(self, *args, xlabel="x", ylabel="y", **kwargs):
...     print(args, xlabel, ylabel, kwargs)
... 
>>> set_axis(None, "test1", "test2", xlabel="new_x", my_kwarg="test3")
('test1', 'test2') new_x y {'my_kwarg': 'test3'}
>>> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-22T15:57:07.557

You would use a different pattern:

```
def set_axis(self, *args, **kwargs):
    xlabel = kwargs.get('xlabel', 'x')
    ylabel = kwargs.get('ylabel', 'y') 
```

This allows you to use * and ** while keeping the fallback values if keyword arguments aren't defined.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-18T19:37:13.920

这是对 Jure C. 的回答的一个简短的一周：

```
def set_axis(self, *args, **kwargs):
    xlabel = kwargs.pop('xlabel', 'x')
    ylabel = kwargs.pop('ylabel', 'y') 
```

我更改`get`为`pop`删除`xlabel`和`ylabel`删除（`kwargs`如果存在）。我这样做是因为原始问题中的其余代码包含一个循环，该循环旨在遍历`kwargs` *除* `xlabel`and之外的所有内容`ylabel`。

# asp.net - 登录重定向问题

> ID：14003940
> 
> 赞同：3
> 
> 时间：2012-12-22T15:15:11.243
> 
> 标签：asp.net, asp.net-membership

我想根据他们的角色重新引导人们登录。当我使用下面的代码时，调试时角色会出现空 - 我怀疑是因为他们还没有完全登录？我可能正在利用错误的事件，有人可以指出我正确的方向吗？

```
<asp:Login ID="LoginUser" OnLoggedIn="Login1_LoggedIn" runat="server"
    DestinationPageUrl="~/Login.aspx" EnableViewState="false" 
        RenderOuterTable="false">

<p>
<asp:Button ID="LoginButton" CssClass="submitButton" runat="server" Width="70"
    CommandName="Login" Text="Log In"
        ValidationGroup="LoginUserValidationGroup" />
</p>
</asp:login>

protected void Login1_LoggedIn(object sender, System.EventArgs e)
{
    // Overrides ReturnUrl page parameter
    //Response.Redirect(LoginUser.DestinationPageUrl);

    if (User.IsInRole("Member"))
        Response.Redirect("~/AskExpert/AskQuestion.aspx");
    else if (User.IsInRole("Expert"))
        Response.Redirect("~/Admin/Experts/ViewQuestions.aspx");
    else if (User.IsInRole("Admin"))
        Response.Redirect("~/Admin/AdminHome.aspx");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T15:23:36.467

您可以改用[Roles.IsUserInRole()](http://msdn.microsoft.com/en-us/library/4z6b5d42.aspx)。`User.IsInRole`从 auth cookie 中读取身份验证数据，并且在触发该事件时似乎尚未设置此数据。

```
if (Roles.IsUserInRole("Member"))
    Response.Redirect("~/AskExpert/AskQuestion.aspx");
else if (Roles.IsUserInRole("Expert"))
    Response.Redirect("~/Admin/Experts/ViewQuestions.aspx");
else if (Roles.IsUserInRole("Admin"))
    Response.Redirect("~/Admin/AdminHome.aspx"); 
```

不利的一面`Roles.IsUserInRole`是，如果您使用的是数据库提供程序，则会导致往返。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:11:03.867

我通常避免重定向的来回转向，使用 Server.Transfer 转移控制权。

# javascript - 使用 CSS/JS 在图像周围环绕文本

> ID：14003942
> 
> 赞同：1
> 
> 时间：2012-12-22T15:15:25.177
> 
> 标签：javascript, html, css, word-wrap

我想在列内的段落内放置块引用，以便列内的文本会调整为块引用的形状。这可以在一些矢量操作软件中轻松完成，但我想通过 CSS 或 JS 来完成。

这是我想要实现的示例图像：

![在此处输入图像描述](../Images/a942ce922f61c82e8d3a0b842f8b7e18.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T13:15:53.213

我想说你是在把印刷品设计范式强加到网络媒体上，它有完全不同的信息表示系统。恕我直言，这只是您不应该做的事情。想象一下使这种响应或适应移动设备的困难。

# java - 在 Java 中存储、检索和比较日期的最佳方式

> ID：14003948
> 
> 赞同：2
> 
> 时间：2012-12-22T15:16:23.703
> 
> 标签：java, android, sqlite, date, time

我来自 PHP 背景。很长一段时间以来，我一直是一名 PHP 开发人员。我想跳入 Android 应用程序开发。我创建了一个应用程序，但我不觉得我对时间和日期功能有很强的把握，尤其是在存储在数据库中时。O 我主要关心的一个问题是如何从数据库（SQLite）中存储和检索日期并进行比较。

我在 PHP 中的做法很简单；我使用该`time()`函数为当前时间创建一个 unix 时间戳，然后将其作为整数存储在 MySQL 数据库中。由于 MySQL 的日期函数，以及通过 PHP 作为整数轻松检索和比较日期的能力，这使事情变得非常简单和容易。

所以基本上，我想知道 Java 的最佳解决方案是什么。在为我未来的 Android 应用程序创建、存储、检索和比较日期时，您建议我做什么？

这是我将使用的 PHP 代码的示例，也许这会让人们更好地了解我习惯了什么以及我正在寻找什么：

```
Database structure:
`id` (int) auto increment
`username` (varchar)
`the_date` (int)

<?php

$username = 'scarhand77';
$the_date = time();

// insert into database

mysql_query("insert into `stack_overflow` (`username`, `the_date`) values ('$username', '$the_date')");

// retrieve from database

$user_date = mysql_result(mysql_query("select `the_date` from `stack_overflow` where `username`='$username'"), 0);

// compare $user_date, see if its older than right now

if ($user_date < time())
    echo 'it is older';
else
    echo 'it is not older';

?> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T15:18:08.587

只需使用原始长。`System.currentTimeMillis();`从（当前时间）返回的同一个。它是自 1970 年以来的毫秒数。它与 unix 时间基本相同，但具有带符号的 64 位值（java long）并且以毫秒而不是秒为单位。

`java.util.Date`对象也只是 a 的包装器，`long`所以如果你也喜欢的话，大多数情况下是没有意义的，但很容易与 Date 对象一起使用。不要混淆`java.sql.Date`

然后，您可以像在您的示例中一样比较时间

```
long time1 = System.currentTimeMillis();
long time2 = ...;

if (time2 < time1) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T15:18:20.647

如果您愿意，甚至无需创建 Date 对象即可获得 unix 时间戳：

```
long unixTime = System.currentTimeMillis() / 1000L; 
```

然后你可以简单地将它写入 MySQL，就像你习惯的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T15:36:50.547

**SQLite**仅支持少数几种[数据类型](http://www.sqlite.org/datatype3.html)，其中唯一适合存储时间的数据类型是`integer`. 它最多可以容纳**64 位**数字，因此它适用于 Java 的`long`.

存储到数据库时，您从 a 获得毫秒计数（自 1970 年 1 月 1 日起）`java.util.Date`：

```
Date now = new Date();
long millis = now.getTime(); 
```

然后您可以轻松地使用给定的毫秒重新创建日期：

```
long millis = ...
Date date = new Date(millis); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T15:36:41.790

如果您在从数据库中检索时间后对时间进行操作，您可能需要查看 Joda Time。它有大量有用的功能，而标准 Java 库在该领域有点缺乏。

# c - %d 是什么意思？为什么是 d 而不是另一个字母？

> ID：14003951
> 
> 赞同：-6
> 
> 时间：2012-12-22T15:16:45.360
> 
> 标签：c, printf, c-strings

我刚开始学习C，想问一些非常基本的问题。我根本没有任何编程背景。我刚刚开始学习教程（[http://www.cprogramming.com/tutorial/c-tutorial.html](http://www.cprogramming.com/tutorial/c-tutorial.html)），有些事情没有解释。例如，在下面这个介绍性的简单程序中......

问题：他为什么使用“%d”——为什么是 d 而不是另一个字母？我知道 % 是模操作数，意思是余数，但为什么是 d？我知道 stdio.h 导入了要使用的术语库/词汇表，例如 printf 等…… %d 与此相同吗？：

```
#include <stdio.h>

int main()
{
    int this_is_a_number;

    printf( "Please enter a number: " );
    scanf( "%d", &this_is_a_number );
    printf( "You entered %d", this_is_a_number );
    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T15:18:28.810

实际上`%`不是这里的模操作数或模运算符，因为它包含在字符串中。它只是一个选择来将文字文本与参数分开的字符。并且`d`被使用是因为它以十进制（以 10 为底）执行输入和**输出**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:25:37.920

在这种情况下，不是模运算符，而是一个符号，表示您希望以某种格式显示后续信息。该字母称为*说明符*。

`%d`表示您要将其显示为十进制整数。`%f`会将其显示为浮点数等。

更多内容： [http](http://linux.die.net/man/3/printf) : *//linux.die.net/man/3/printf*

# java - 运行 ANT 任务时出现 ClassCastException

> ID：14003953
> 
> 赞同：2
> 
> 时间：2012-12-22T15:17:19.153
> 
> 标签：java, ant, classcastexception

我对 ANT 有一些问题。首先简要介绍一下我的项目。我编写了一个程序来分析源代码，我正在使用 Java lib tools.jar 提供的 CompilationUnitTree。一切正常，所以我想到了一个蚂蚁任务。这是我的 build.xml：

```
<?xml version="1.0"?>

<project default="main">
<taskdef name="banElements" classname="com.tools.scs.routines.BanElements"/>

<target name="main">
    <banElements banned="IF,FOR,SWITCH,WHILE,VARIABLE[type!=int]" filename="D:/Studium/Bachelor-Thesis/src/Farbe.java" />
</target>

</project> 
```

如果一个被禁止的元素出现在源代码中，banElements 应该打印一条消息。不使用蚂蚁也能正常工作。

这是我在 ant 中遇到的错误：

```
D:\Studium\Bachelor-Thesis\Project\buildtest.xml:8: java.lang.ClassCastException: com.sun.tools.javac.api.JavacTaskImpl cannot be cast to com.sun.tools.javac.api.JavacTaskImpl
at com.tools.scs.SourceCodeSelector.generateTree(SourceCodeSelector.java:146)
at com.tools.scs.SourceCodeSelector.<init>(SourceCodeSelector.java:32)
at com.tools.scs.routines.BanElements.setFilename(BanElements.java:50)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.tools.ant.IntrospectionHelper$AttributeSetter.setObject(IntrospectionHelper.java:1498)
at org.apache.tools.ant.IntrospectionHelper.setAttribute(IntrospectionHelper.java:405)
at org.apache.tools.ant.RuntimeConfigurable.maybeConfigure(RuntimeConfigurable.java:403)
at org.apache.tools.ant.RuntimeConfigurable.maybeConfigure(RuntimeConfigurable.java:346)
at org.apache.tools.ant.Task.maybeConfigure(Task.java:202)
at org.apache.tools.ant.UnknownElement.configure(UnknownElement.java:196)
at org.apache.tools.ant.UnknownElement.maybeConfigure(UnknownElement.java:163)
at org.apache.tools.ant.Task.perform(Task.java:347)
at org.apache.tools.ant.Target.execute(Target.java:392)
at org.apache.tools.ant.Target.performTasks(Target.java:413)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.Main.runBuild(Main.java:811)
at org.apache.tools.ant.Main.startAnt(Main.java:217)
at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds 
```

这是发生错误的方法：

```
private void generateTree() throws IOException {
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);
    Iterable<? extends JavaFileObject> fileObjects = fileManager
            .getJavaFileObjectsFromStrings(Arrays.asList(this.srcFile));
    **JavacTaskImpl javacTask = (JavacTaskImpl) compiler.getTask(null, null, null, null, null, fileObjects);**

    SourcePositions sourcePositions = Trees.instance(javacTask).getSourcePositions();

    for (CompilationUnitTree tree : javacTask.parse()) {
        this.srcCodeTree = new SourceScanner(sourcePositions).scan(tree);
    }
} 
```

希望有人能帮我解决这个问题，谢谢！！！

# iphone - 在iphone中获取屏幕分辨率

> ID：14003955
> 
> 赞同：1
> 
> 时间：2012-12-22T15:17:38.557
> 
> 标签：iphone, objective-c, ios, screen-resolution

嗨，我需要获取屏幕宽度和高度。我用过这种方式

```
UIWindow* window = [UIApplication sharedApplication].keyWindow;
NSLog(@"%f",window.frame.size.width);
NSLog(@"%f",window.frame.size.height); 
```

问题是我有一部 iPhone 4，但分辨率显示为 480x320，这是不正确的......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-22T15:38:07.343

```
float scaleFactor = [[UIScreen mainScreen] scale];
CGRect screen = [[UIScreen mainScreen] bounds];
CGFloat widthInPixel = screen.size.width * scaleFactor;
CGFloat heightInPixel = screen.size.height * scaleFactor; 
```

关于 480x320 的屏幕分辨率，这绝对是正确的，因为这为您提供了逻辑大小，或者您可以将大小以点表示为 480 点 x 320 点。

点和像素是有区别的。 `Pixel`是显示的最小单位。

`Point`像素的集合在哪里。

iPhone 4 1 点 = 2 像素
iPhone 3GS 1 点 = 1 像素

请参阅[文​​档`scale`和`bounds`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)。

**`bounds`**：*包含屏幕的边界矩形，以点为单位。*
**`scale`**：*该值反映了从默认逻辑坐标空间转换到该屏幕的设备坐标空间所需的比例因子。默认逻辑坐标空间使用点进行测量，其中一个点大约等于 1/160 英寸。如果设备的屏幕具有相当相似的像素密度，则比例因子通常设置为 1.0，以便一个点映射到一个像素。但是，具有显着不同像素密度的屏幕可能会将此属性设置为更高的值。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T15:35:59.363

您必须乘以屏幕的比例：

```
CGSize sz = [UIScreen mainScreen].bounds.size;
float sc = [UIScreen mainScreen].scale;
size_t w = sz.width * sc;
size_t h = sz.height * sc; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T15:36:53.193

您需要获取屏幕的比​​例并将其乘以宽度和高度。例如：

```
UIWindow* window = [UIApplication sharedApplication].keyWindow;
UIScreen *screen = window.screen;
CGFloat scale = screen.scale;

NSLog(@"%f",window.frame.size.width);
NSLog(@"%f",window.frame.size.height);
NSLog(@"screen pixels width: %f height: %f", window.frame.size.width * scale, window.frame.size.height * scale); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T15:19:42.070

如果您需要屏幕高度和宽度，请使用：

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T15:33:59.080

```
CGRect screen = [[UIScreen mainScreen] bounds];
CGFloat width = CGRectGetWidth(screen);
CGFloat height = CGRectGetHeight(screen); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-19T03:21:45.937

你需要的只是这个：`[UIScreen mainScreen].nativeBounds`，来自 iOS 8 的 API

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-06-02T17:39:35.517

通过此代码，您可以获得任何 iphone 的屏幕高度和宽度，并根据需要在应用程序中使用它。

```
 [[UIScreen mainScreen] bounds].size.height
 [[UIScreen mainScreen] bounds].size.width 
```

# jquery - 带有淡入/淡出的简单 jQuery 幻灯片

> ID：14003964
> 
> 赞同：3
> 
> 时间：2012-12-22T15:18:49.837
> 
> 标签：jquery, slideshow, fadein

我有这个非常简单的 jQuery 幻灯片：http: [//jsfiddle.net/6zA4B/](http://jsfiddle.net/6zA4B/)

**HTML：**

```
<div class="fadein">
<img src="http://farm3.static.flickr.com/2610/4148988872_990b6da667.jpg">
<img src="http://farm3.static.flickr.com/2597/4121218611_040cd7b3f2.jpg">
<img src="http://farm3.static.flickr.com/2531/4121218751_ac8bf49d5d.jpg">
</div> 
```

**JavaScript：**

```
​$(function(){
    $('.fadein img:gt(0)').hide();
    setInterval(function(){$('.fadein :first-child').fadeOut().next('img').fadeIn().end().appendTo('.fadein');}, 3000);
});​ 
```

* * *

它工作得很好，我只想用 3 个 div 替换 3 个 img 标签（所以我可以在图像下方添加一个标题）。如何修改脚本以实现这一目标？我试过这个，但可能我做错了什么......

**HTML：**

```
<div class="fadein">
    <p><img src="http://farm3.static.flickr.com/2610/4148988872_990b6da667.jpg">image1</p>
    <p><img src="http://farm3.static.flickr.com/2597/4121218611_040cd7b3f2.jpg">image2</p>
    <p><img src="http://farm3.static.flickr.com/2531/4121218751_ac8bf49d5d.jpg">image3</p>
</div> 
```

**JavaScript：**

```
$(function(){
    $('.fadein p:gt(0)').hide();
    setInterval(function(){$('.fadein :first-child').fadeOut().next('p').fadeIn().end().appendTo('.fadein');}, 3000);
});​ 
```

[http://jsfiddle.net/S4SmM/1/](http://jsfiddle.net/S4SmM/1/) :D

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T15:54:03.020

您的选择器之一略微偏离：

```
$('.fadein :first-child') 
```

正在选择下面的所有第一个子元素`.fadein`。这包括元素的第一个子`p`元素，即您尝试旋转到的图像。

您想将`:first-child`选择器限制在`.fadein`. 一种方法是使用[子选择器](http://api.jquery.com/child-selector/)：

```
$('.fadein > :first-child') 
```

**示例：http:** [//jsfiddle.net/S4SmM/4/](http://jsfiddle.net/S4SmM/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-22T15:53:10.913

使用以下代码：

HTML：

```
<div class="fadein">
    <div><img src="http://farm3.static.flickr.com/2610/4148988872_990b6da667.jpg"><p>image1</p></div>
<div><img src="http://farm3.static.flickr.com/2597/4121218611_040cd7b3f2.jpg"><p>image2</p></div>
    <div><img src="http://farm3.static.flickr.com/2531/4121218751_ac8bf49d5d.jpg"><p>image3</p></div>
</div>
​ 
```

CSS：

```
.fadein { position:relative; height:332px; width:500px; }
.fadein div {position:absolute;text-align:center;height:100%;}
.fadein p { position:absolute; bottom:0;width:100%;color:white;background-color:rgba(0,0,0,0.6);height:1em;padding-bottom:10px;}​ 
```

JS：

```
$.fn.nextOrFirst = function(selector) {
    var next = this.next(selector);
    return (next.length) ? next : this.prevAll(selector).last();
}

$(function() {
    $('.fadein div:eq(0)').addClass("active");
    $('.fadein div:gt(0)').hide();
    setInterval(function() {
        $('.active:eq(0)').fadeOut().removeClass("active").nextOrFirst('div').addClass("active").fadeIn().end()
    }, 3000);
});​ 
```

JsFiddle：http: [//jsfiddle.net/S4SmM/5/](http://jsfiddle.net/S4SmM/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T13:08:15.340

我喜欢 Andrew Whittaker 的回答，但更喜欢使用 Fadeout 回调来给它更多“动画”：

```
setInterval(function(){$('.fadein > :first-child').fadeOut(1000, function() {
    $(this).next('p').fadeIn(1000).end().appendTo('.fadein');   
})
}, 5000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T13:25:25.757

您还可以使用插件[jquery-fade-slider](http://jqueryfadeslider.com)

```
$(selector).fadeSlider() 
```

[链接到 Github 仓库](https://github.com/jqueryfadeslider/jqueryfadeslider)

# javascript - jQuery 元素只显示部分文本

> ID：14003971
> 
> 赞同：1
> 
> 时间：2012-12-22T15:19:34.937
> 
> 标签：javascript, jquery, dom

我有使用这个 jQuery 选择器获得的各种`a`元素：

```
$("#toc").find("li a") 
```

如果一个元素文本是“第一秒”（并且所有元素的文本都是由空格分隔的两个单词）我只想显示第一个单词，在这个例子中元素的文本应该是`first`，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:24:07.957

您可以对每个元素应用文本过滤器：

```
$("#toc").find("li a").text(function() {
    return $(this).text().split(' ')[0];
});​ 
```

**[JSFiddle 演示](http://jsfiddle.net/V7aEt/2/)**

请记住，我没有考虑可能只有一个词或没有词的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:27:20.867

您可以将第二个单词包装在 a 中`span`，并隐藏它：

```
$('#toc li a').html( function(i, h) {
    var words = h.split(/\s/);
    return words[0] + ' <span>' + words[1] + '</span>';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/V7aEt/3/)。

使用 CSS：

```
#toc li a span {
    display: none;
} 
```

要解决可能有两个以上单词的情况：

```
$('#toc li a').html( function(i, h) {
    var words = h.split(/\s/);
    return words[0] + ' <span>' + words.slice(1).join(' ') + '</span>';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/V7aEt/4/)。

# c# - LINQ to SQL 处理自动递增的主键

> ID：14003973
> 
> 赞同：1
> 
> 时间：2012-12-22T15:20:03.300
> 
> 标签：c#, wpf, windows-phone-7, linq-to-sql

我正在尝试将数据存储在本地数据库（SQL CE）中。我已经像这样设置了 RowObject 的属性：

```
 [Column(IsPrimaryKey=true,CanBeNull=false,IsDbGenerated=true,AutoSync=AutoSync.OnInsert,DbType="int NOT NULL IDENTITY")]
    public int key
    { get; set; } 
```

当我插入一条新记录时，主键会自动递增。但是，如果我删除一条或多条记录，然后插入一条新记录，则其主键值对应于最后插入的记录的主键值加一，尽管该记录已被删除。我知道不可能更新所有主键。但是，是否可以控制主键的递增，避免主键的连续递增呢？

好的，谢谢你的回答。我问是因为我担心PK达到最大值。也许这对我的项目来说不是一个真正的问题，但我想了解如何处理它，以防它发生。万一，如果可能的话，如果数据库完全满了，我该如何理解和处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:52:39.840

这违反了自动增量。

我有时由于需要禁用列的自动递增来添加在旧位置删除的行，然后再次启用它。

如果您坚持这样做，您可以添加 2 个触发器，在删除触发器禁用列的自动增量行为中，然后在插入触发器之后的另一个触发器上再次启用它。
因此，在删除时禁用它，在下一次插入时使用 max(ID)+1 添加它，并在插入后再次启用它。

例如：

-------------人员表--------------

ID[Auto-Increment]----姓名----年龄
10000--------杰克-------21
10001---- ---------------肖恩----19
10002--------阿尔伯特-----33

```
Delete from Person where ID = 10002;  

set identity_insert AAA ON 
```

现在下一个 ID 将是 10003 但你想要 10002

```
DECLARE @ID int;  

select @ID = max(ID)+1 from Person  

Insert into Person(ID,Name,Age) values(@ID,'Mahdi',23)  

set identity_insert AAA OFF  --Auto Increments from now on 
```

您应该只检查是否应该插入带/不带 ID 的记录，我把这个负担放在了你的肩上。

祝你好运。

# c++ - 找不到模板化的嵌套类 C++

> ID：14003976
> 
> 赞同：0
> 
> 时间：2012-12-22T15:20:21.433
> 
> 标签：c++, windows, class, templates, nested

我正在尝试编写一个可移植的线程抽象。现在我有一个编译 dn 的代码可以在 Unix 上工作，但不能在 Windows 上编译（使用 VS2010）。

```
class Thread
{
    public:
        Thread();
        ~Thread();
        template<typename Callable, typename Arg>
        void startThread(Callable c, Arg a);
        void killThread();

    private:

        template<typename Bind>
        struct nested
        {
            static DWORD WINAPI run(void *obj)
            {
                Bind * b = reinterpret_cast<Bind *>(obj);
                return (b->exec());
            }
        };

        template<typename Callable, typename Arg>
        class Binder
        {
            public:
                Binder(Callable c, Arg a): _call(c), _arg(a) {}
                ~Binder() {}
                DWORD operator()() {return (this->_call(this->_arg))}
                DWORD exec() {return (this->_call(this->_arg))}
            private:
                Callable _call;
                Arg      _arg;
        };
        HANDLE      _handle;
        DWORD       _id;
        bool        _isRunning;
        DWORD       _exitValue;
};

template<typename Callable, typename Arg>
void Thread::startThread(Callable c, Arg a)
{
    Thread::Binder<Callable, Arg> *b =
        new Thread::Binder<Callable, Arg>(c, a);
    CreateThread(0, 0,
            Thread::nested< Thread::Binder<Callable, Arg> >::run,
            b, 0, &this->_id);
} 
```

当我尝试编译时，VS 给了我一个错误 C2039 ：

`'nested<Thread::Binder<unsigned long (__cdecl*)(int *),int *> >' : is not a member of 'Thread'`

为什么 g++ 能看到，VS 却看不到？大多数情况下，我认为这是因为模板专业化，但怎么会呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:08:56.477

该错误表明 VS 2010 在这种情况下无法区分类型和类成员。我不知道这是编译器错误还是代码中的错误。您可以通过如下更改代码来解决此问题：

```
 Thread::Binder<Callable, Arg> *b = new Thread::Binder<Callable, Arg>(c, a);
    typedef Thread::nested<Thread::Binder<Callable, Arg> > MyBinder;
    CreateThread(0, 0,
                 MyBinder::run,
                 b, 0, &this->_id); 
```

在相关说明中，由于您使用的是[CreateThread](http://msdn.microsoft.com/en-us/library/ms682453.aspx "创建线程函数")，因此请确保您了解备注部分中概述的这样做的含义。如果您打算从线程中使用 C 运行时库 (CRT)，请不要使用[CreateThread](http://msdn.microsoft.com/en-us/library/ms682453.aspx "创建线程函数")。

# javascript - 从 POST 获取 302 状态的响应

> ID：14003985
> 
> 赞同：0
> 
> 时间：2012-12-22T15:21:59.560
> 
> 标签：javascript, jquery, file-upload, blueimp

jQuery 文件上传：

```
$('#fileupload').fileupload({
    xhrFields: {withCredentials: true},
    url: 'http://URL/images/pre/',
    add: function (e, data) {
        var that = this;
        $.ajax({
            type : 'get',
            url : 'http://URL/images/pre/',
            dataType : 'jsonp',
            jsonp : 'jsonp',
            success : function(result) {
                url = result.url.replace(...);
                data.url = url;
                data.submit();
            }
        });
    }
}); 
```

data.submit() 将 POST 发送到 appengine，它返回 302（来自 webapp.RequestHandler 的重定向（））。重定向后是否可以从此 POST 获得响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:25:34.457

不幸的是，答案是你不能。ajax 请求将被透明地重定向，您将从最终页面获得结果。

我不会进行重定向，而是将重定向位置包含在响应数据中，并以正常的 200 以及您想要的数据进行响应。

# java - Wicket - 每个会话创建新文件夹

> ID：14003987
> 
> 赞同：0
> 
> 时间：2012-12-22T15:22:41.693
> 
> 标签：java, session, wicket, dir

我正在使用 apache wicket 1.5，当初始化一个新会话时，我想创建一个新的临时文件夹：

**例子：**

Session_1_connect -> create_temp_1

Session_1_disconnect -> delete_temp_1

**新用户登录：**

Session_2_connect -> create_temp_2

Session_2_disconnect -> delete_temp_2

我知道如何在java中制作目录，那不是问题。它只是如何在检票口中配置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T19:27:19.213

在`Session`似乎合乎逻辑的地方的构造函数中..只需确保您在一段时间后删除文件夹..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T23:09:24.327

即使没有 Wicket，您也可以通过简单地在您自己的[HttpSessionListener](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)`sessionCreated()`中实现功能然后将其添加到您的 HttpSessionListener 中来解决此问题：`sessionDestroyed()``web.xml`

```
<listener>
  <listener-class>org.your.package.YourSessionListener</listener-class>
</listener> 
```

# javascript - 我可以使用 JS 或 jQuery 来测试是否支持 SVG 图像吗？

> ID：14003991
> 
> 赞同：6
> 
> 时间：2012-12-22T15:24:25.687
> 
> 标签：javascript, jquery, internet-explorer, mobile, svg

我在网站上使用 SVG 徽标，在大多数浏览器中它工作正常。但是，在某些 IE 版本和移动浏览器上，图像显示为失败的图像框。有什么方法可以使用 JS 或一些库（最好是 jQuery）来检查 SVG 兼容性，并以最少的假阴性，然后简单地切换到图像的 .png 版本？

该网站是这样的：http: [//zero31b.x10.mx/samote，SVG](http://zero31b.x10.mx/samote)图像是蓝色的小球

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:32:04.100

Tavmjong Bah 写了一篇关于 SVG 和 PNG 后备的综合文章：

[http://tavmjong.free.fr/SVG/BUTTON_TEST/button_test.html](http://tavmjong.free.fr/SVG/BUTTON_TEST/button_test.html)

他/她给出的最简单的代码是

```
 <img src="buttonA.svg" alt="A sample SVG button." 
       onerror="this.removeAttribute('onerror'); this.src='buttonA.png'"/> 
```

但是，如果您有更多功能需要测试，您可能会考虑使用modernizr 版本。

要在 github 上创建 SVG-Button madrobby 的 png 版本，建议使用**librsvg-convert**

# android - 以编程方式静音的铃声仍在某些手机上播放

> ID：14003994
> 
> 赞同：0
> 
> 时间：2012-12-22T15:25:01.713
> 
> 标签：android, ringtone

我正在创建一个“请勿打扰”应用程序。所以正常的做法是将手机设置为静音，当激活时，然后当呼叫通过假设振铃时，我只需将振铃器状态更改为`"normal"`。

问题是“note 2”确实在提高音量​​，但你听不到铃声，而在“htc one s”中，当铃声状态改变时，铃声是`sounded`。

怎么会这样？我试着用

```
audio_mngr.setStreamVolume(AudioManager.STREAM_RING, 0, 0); 
```

并玩过它，但无论我尝试什么，它仍然是一样的。

有没有人对如何以另一种方式做到这一点有其他想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T11:29:27.497

如果未使用 AudioManager.STREAM_RING，则这些手机可能错误地使用了以下之一。也许检查这些设置音量并测试振铃音量将确认：

```
AudioManager.STREAM_MUSIC
AudioManager.STREAM_ALARM
AudioManager.STREAM_NOTIFICATION
AudioManager.STREAM_SYSTEM
AudioManager.STREAM_VOICECALL 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-18T06:37:39.093

使用[AudioManager中的](http://developer.android.com/reference/android/media/AudioManager.html#getRingerMode%28%29)[getRingerMode()](http://developer.android.com/reference/android/media/AudioManager.html#getRingerMode%28%29)方法。

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

switch (am.getRingerMode()) {
    case AudioManager.RINGER_MODE_SILENT:
        Log.i("MyApp","Silent mode");
        break;
    case AudioManager.RINGER_MODE_VIBRATE:
        Log.i("MyApp","Vibrate mode");
        break;
    case AudioManager.RINGER_MODE_NORMAL:
        Log.i("MyApp","Normal mode");
        break;
} 
```