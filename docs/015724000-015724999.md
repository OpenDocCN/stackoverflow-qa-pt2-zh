# StackOverflow 问答 15724000-15724999

# python - Using Sage Math library within Python

> ID：15724000
> 
> 赞同：2
> 
> 时间：2013-03-30T22:04:42.737
> 
> 标签：python, python-2.7, sage

I am trying to make a visualization of a graph using Sage. I need to make the visualization exactly as I am writing the Python code.

I have downloaded and installed the Sage for Ubuntu and Sage Notebook is working perfectly. But I want to take user input from Tkinter and then show those input on the Graph (generated by Sage). However, I am unable to import sage in the Python Shell. How can I do so?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T23:03:16.797

From looking at the [faq](http://www.sagemath.org/doc/faq/faq-usage.html#how-do-i-import-sage-into-a-python-script), it looks like what you need to do is add the following line to your Python file:

```
from sage.all import * 
```

Then, it looks like you need to run your script by using the Python interpreter bundled with Sage from the command line/console:

```
sage -python /path/to/my/script.py 
```

However, if you want to use Sage directly from the shell, you should probably try using the [interactive shell](http://www.sagemath.org/doc/tutorial/interactive_shell.html). (just type in `sage` or maybe `sage -python` from the command line)

Caveat: I haven't tested any of this myself, so you might need to do a bit of experimenting to get everything to work.

# clojure - Call to map-function doesn't seem to do anything

> ID：15724004
> 
> 赞同：0
> 
> 时间：2013-03-30T22:05:25.777
> 
> 标签：clojure

I have the following code:

```
(defn remove-folder [file]
   (do
      (println "Called with file " (.getName file))
      (if (.isDirectory file) 
          (do
           (println (.getName file) " is directory")
           (def children (.listFiles file))
           (println "Number of children " (count children))
           (map remove-folder children)
           (delete-file file)))
          (do
           (println (.getName file) " is file")
           (delete-file file)
          ))) 
```

My problem is that the line (map remove-folder children) doesn't seem to work. In my output I expect to travel down though the folderstructure but it seems to stay in the first level.

I'll guess I have made some stupid misstake but I spent a few hours on it now and doesn't seem to get closer a solution.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:52:30.517

`map` is lazy, wrap it in a `doall` to force evaluation, like this: `(doall (map remove-folder children))`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T04:42:54.477

As @ponzao said, `map` is lazy.

But anyway I don't think it's a good idea to use `map` just to get side effects and "drop" the result. Personally I would use `doseq` instead, because it gives a hint that I'm expecting side effects.

```
(defn remove-folder [file]
   (do
      (println "Called with file " (.getName file))
      (if (.isDirectory file) 
          (do
           (println (.getName file) " is directory")
           (def children (.listFiles file))
           (println "Number of children " (count children))
           (doseq [c children]
             (remove-folder c))
           (delete-file file)))
          (do
           (println (.getName file) " is file")
           (delete-file file)
          ))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:37:24.323

Why don't you inline **children** and get rid of **def**? It doesn't seem that you want to create a global binding in your current namespace. You are unintentionally introducing a side effect.

The function name **remove-folder** does not tell us what the function is supposed to do. The argument name **file** does not describe what kind of argument can be expected. But I understand that it's kind of exploratory code.

Cheers -

# c++ - 结构指针向量

> ID：15724006
> 
> 赞同：-2
> 
> 时间：2013-03-30T22:06:03.283
> 
> 标签：c++, vector

以下是我的问题

```
struct point{
     int x;
     int y;
};   

struct OuterStruct 
{
    std ::vector <point *> pa;
    std ::vector <point *> pb;
};

OuterStruct atest; // global variable 
```

现在我主要是这样做的

```
point n ;
n.x=1;
n.y =2;
atest.pa.push_back(n);
atest.pb.push_back(n); 
```

..

在其他一些功能中，如果我使用这个全局结构，pa,pb 的值会丢失，并且它们有一些垃圾值。我在这里做错什么了吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:12:51.547

改变指针向量：

```
struct OuterStruct 
{
    std::vector<point*> pa;
    std::vector<point*> pb;
}; 
```

进入对象向量：

```
struct OuterStruct 
{
    std::vector<point> pa;
    std::vector<point> pb;
}; 
```

并且

*   使用有意义的名称（, `pa`，`pb`不要说太多...）`atest``OuterStruct`
*   在命名约定上保持一致（如果你用`UpperCamelCase`, 然后`point`->命名类型`Point`）
*   尽可能避免使用全局变量
*   创建一个自定义构造函数`point`以简化其创建：

    ```
    struct point {
        point(int x_, int y_) : x(x_), y(y_) { }
        int x;
        int y;
    }; 
    ```

    那么你可以简单地做：

    ```
    atest.pa.push_back(point(1,2)); 
    ```

# ajax - jQuery can't get element added by jQuery

> ID：15724007
> 
> 赞同：-1
> 
> 时间：2013-03-30T22:06:05.190
> 
> 标签：ajax, jquery

I added the following table row using jQuery AJAX:

```
<td>
  <button class="btn btn-mini btn-primary" id="increment"></button>
</td> 
```

The problem is that I can't match this created button after this:

```
$("#increment").click(function () {
    console.log("Clicked!");
}) 
```

I tried the live() function but seems to be deprecated. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:06:59.760

```
$('table').on('click', "#increment", function() {
    console.log("Clicked!");
}) 
```

# heroku - Can I have a CNAME and TXT record for the same subdomain?

> ID：15724016
> 
> 赞同：2
> 
> 时间：2013-03-30T22:07:00.740
> 
> 标签：heroku, dns, google-search-console

I have a Heroku app on a custom domain, as described in their [Dev Center article about custom domains](https://devcenter.heroku.com/articles/custom-domains).

For Google Webmaster Tools, I'd like to verify ownership using the [DNS method](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176792) with a TXT record.

Naturally, these two records would be for the same subdomain.

Can I do this? And if so, how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:12:12.897

Yep, just add a TXT record through your DNS provider. One way to verify is via dig:

```
$ dig foo.com TXT
...
foo.com.    1800    IN  TXT "google-site-verification=XXXXXXXXXXXX" 
```

# php - 用户头像 Wordpress Php

> ID：15724017
> 
> 赞同：0
> 
> 时间：2013-03-30T22:07:04.037
> 
> 标签：php, wordpress, avatar

我试图在用户未登录时显示匿名图标，并在用户登录时显示用户头像......这是我得到的代码（wordpress install btw）

```
<div id="useravatar">
<?php
global $current_user;
if (!is_user_logged_in()) {
echo "<img src='"http://www.curious-howto.com/images/anonymous.jpg"'/>";
}
else { get_currentuserinfo();
   echo get_avatar( $current_user->ID, 32 ); }
?>
</div> 
```

但这不起作用...

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-22T08:19:55.010

由于没有答案，这会在谷歌上弹出......

img 标签中不应该有双引号。这打破了PHP。

```
echo "<img src='"http://www.curious-howto.com/images/anonymous.jpg"'/>"; 
```

应该

```
echo "<img src='http://www.curious-howto.com/images/anonymous.jpg'/>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T14:13:11.383

@Guyra 指出了引用错误，我还注意到`get_currentuserinfo`自 WordPress 4.5 以来已弃用。

您可以挂钩该`get_avatar`函数并修改`functions.php`文件中的输出。使用`get_avatar`更好，如果用户已知，它将检索用户头像，如果不知道，它将检索灰色人。通过挂钩函数，您可以修改它并更改它与未知人的工作方式：

```
add_filter( 'get_avatar','get_custom_avatar' , 10, 5 );
function get_custom_avatar($avatar, $author, $size, $default, $alt) {
  if(stristr($author,"@")) $autore = get_user_by('email', $author);
    else $autore = get_user_by('ID', $author);

  if (isset($autore->ID) && $autore->ID > 0) {
      // known people
      return $avatar;
  } else {
      // unknown user
      $avatar = "http://www.curious-howto.com/images/anonymous.jpg";
      return "<img class='avatar' alt=\"".$alt."\" src='".$avatar."' width='".$size."' />";
 }

} 
```

[得到这段代码并从这里修改](http://www.barattalo.it/coding/3-ways-add-author-image-wordpress/)，还有一些变体可以从不同的服务而不是 Gravatar 获取生成的头像。

# jquery - jquery isotope hide element then insert it

> ID：15724020
> 
> 赞同：0
> 
> 时间：2013-03-30T22:07:08.237
> 
> 标签：jquery, insert, jquery-isotope

I use jquery isotope to display my portfolio. I try to insert hidden elements to isotope container.

To do this I remove on load elements, then I try to insert it on click.

However, removed elements don't want to appear again after click.

How can I do this?

Here a fiddle example of what I do : [http://fiddle.jshell.net/s5TBU/](http://fiddle.jshell.net/s5TBU/)

Sorry for my English, I'm French

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:18:30.873

As you removed your elements from the DOM using the remove method, they cannot be selected anymore. You can keep them in some variable before removing them if you want to insert them again afterwards OR maybe the hide method would be enough for what you want to do, and your elements would still be selectable.

# css - font-family 一种字体，它是什么？

> ID：15724024
> 
> 赞同：0
> 
> 时间：2013-03-30T22:07:22.960
> 
> 标签：css, font-family

我正在尝试找到`font-family`位于此处的 Helvetica Neue LT Std 97 Black Condensed 字体的 CSS 名称：http: [//fontscore.com/fonts/Helvetica-Neue-LT-Std-97-Black-Condensed_22554.html](http://fontscore.com/fonts/Helvetica-Neue-LT-Std-97-Black-Condensed_22554.html)

我正在使用`@font-face`将字体加载到网页上，如果尚未在用户计算机上，但是，如果首先在用户计算机上找到，我希望能够加载字体。我在这里尝试了几种方法，但这些方法都不起作用：

```
font-family:  HelveticaNeueLT Std Blk Cn
font-family:  HelveticaNeueLT Std ExtBlk Cn 
```

调用 font-family 时我应该使用的这种字体的名称是什么？我可能也必须将 97 放在那里的某个地方，但没有任何效果，尝试了很多不同的方式来调用它。

这是我在 CSS 中使用的内容：

```
@font-face {
    font-family: hnc_font;
    src: local('HelveticaNeueLT Std Blk Cn'), local('HelveticaNeueLTStd-BlkCn'), url('../fonts/hnc.otf') format('opentype'), url('../fonts/hnc.woff') format('woff'), url('../fonts/hnc.ttf') format('truetype'), url('../fonts/hnc.svg') format('svg');
    font-weight: normal;
}

@font-face{ 
    font-family: MyFont_IE;
    src: url('../fonts/swiss_bc.eot'); 
}

.big_text
{
    padding-top: .4em;
    font-size: 5.5em;
    font-family: HelveticaNeueLT Std Blk Cn, HelveticaNeueLTStd-BlkCn, hnc_font, MyFont_IE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:10:11.820

First of all try all your combinations by wrapping the name of the font in `"` quotes.

For example `font-family: "Helvetica Neue LT Std 97 Black Condensed"`

Then, the name that you call is defined by your `@font-face` declaration before the `font-family`. You can call it what ever you want.

For example if you first declare it like this

```
@font-face{
    font-family: "MY_FONT_NAME";
    src: url('PATH_TO/FONT_FILENAME.ttf');
} 
```

you can later refer to it like this

```
font-family: "MY_FONT_NAME"; 
```

**Edit** based on the added CSS

try this

```
 .big_text
{
    padding-top: .4em;
    font-size: 5.5em;
    font-family: "HelveticaNeueLT Std Blk Cn", "HelveticaNeueLTStd-BlkCn", "hnc_font", "MyFont_IE";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:11:19.787

Cheat with some javascript: [http://jsfiddle.net/ucd2L/](http://jsfiddle.net/ucd2L/)

```
var x = $("#test").css('font-family');
$("#test").append(x); 
```

HTML

```
<p id="test">Text</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:02:40.917

When using `@font-face`, there are two separate questions about font names.

The name you use in `font-family` declaration inside an `@font-face` rule is up to you, as long as it is a syntactically valid font name and you use that very same name in `font-family` declarations in normal CSS rules. So it can be `font-family: foobar`.

The name you use in the `local(...)` constructor when setting `src` in an `@font-family` rule must match the name under which the font is known in the system. It should be name you would use to get a local font in a `font-family` rule without any `@font-face`, and in principle it should be the PostScript name or the full name of the font, though browsers may accept other names too; see [css - machine specific font-family](https://stackoverflow.com/questions/14025845/css-machine-specific-font-family).

# java - Why in this Java program the Doubles in a String Output have too many decimals?

> ID：15724026
> 
> 赞同：-1
> 
> 时间：2013-03-30T22:07:27.917
> 
> 标签：java, string, double, decimal

In a solution to an exercise in the Book Art and Science of Java I had to write a program that converts Kilograms into the corresponding values in Pounds and Ounces. I wrote the program but when I try to convert say 1kg, the result the program gives me is: 1 kg = 2 pounds and 3.200000000000006 ounces

Now my constants are 2.2 pounds per kg and 16 ounces per pound so 3.2 ounces is correct. But not with so many 0's and that 6 at the end freaks me out.

Anyone know why this happens and how it can be solved? Thank you!

Here's the code:

```
/*
* File: KgsLibras.java
* Program that converts kilograms in pounds and ounces.
*/

import acm.program.*;

public class KgsLibras extends ConsoleProgram {
public void run () {
    println ("This program will convert kilograms in pounds and ounces");
    double kgs = readDouble ("Insert kgs value: ");
    double libras = kgs * LIBRAS_POR_KG;
    double oncas = (libras - (int)libras) * ONCAS_POR_LIBRA; 
    println ((int)libras + " libras" + " e " + oncas + " Onças.");
    }
private static final double LIBRAS_POR_KG = 2.2;
private static final int ONCAS_POR_LIBRA = 16;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:12:04.283

That's just a consequence of how floating point works - literally thousands of other references to these issues here on SO alone. The short version is that not all numbers can be represented exactly using floating point numbers, which leads to oddities like the one you're seeing. [This document](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) should teach you all you should know about floating point.

In the mean time you can use format to get printf-like formatting options:

```
System.out.format ("%.0f libras e %.2f Onças.\n",libras,oncas); 
```

or if you have to use that specific println method, use String's format:

```
println(String.format ("%.0f libras e %.2f Onças.",libras,oncas) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:11:22.450

You can do something like this:

```
String libras = String.format("$%.2f", VALUE); //For example.. 
```

Then, printing `libras` will suits your needs.

Regarding of your question about *Why* your program prints it that way, @fvu was faster than me :)

# jqgrid - Refers to: jqgrid: how to set toolbar options based on column value in row selected

> ID：15724029
> 
> 赞同：0
> 
> 时间：2013-03-30T22:07:44.530
> 
> 标签：jqgrid

my question refers to [http://goo.gl/f0Boc](http://goo.gl/f0Boc) The code works fine for me, but now I want to enable/disable the "Edit-Button" when the value in a cell is "Yes" or "No".

In this example is written:

> // you can use getCell or getRowData to examine the contain of
> 
> // the selected row to decide whether the row is editable or not

I need an explanation how I could change the code so that the code runs with jqGrid('getCell',rowid,'cellContent')?

What I need is if cellContent is "Yes" then disable "Edit-Button".

Thanks in advance for your efforts,

best regards

Stephan

```
<script type="text/javascript">
$(function(){ 
  $("#list").jqGrid({ 
    url:'example.php', 
    datatype: 'xml',
    mtype: 'GET',
    colNames:['User ID','Name', 'Firstname','CDS-ID','E-mail','Password', 'Registration
                  Date','Account Activated', 'Account Activation Date', 'Role'],
    colModel :[ 
               {name:'idUser_registration', index:'idUser_registration', width:55,
                  editable:true, editoptions{readonly:true},search:true}, 
...
               {name:'account_activated', index:'account_activated', width:150, align:'right',
                      edittype:'checkbox',editoptions: { value:"Yes:No" }, editable:true, 
                          search:true}, 
... ],
    pager: '#pager',
    rowNum:10,
    rowList:[10,20,30],
    sortname: 'idUser_registration',
    sortorder: 'asc',
    viewrecords: true,
    gridview: true,
    caption: 'My grid',
    editurl: 'example2.php',
    beforeSelectRow: function(rowid) {
                       var selRowId = $(this).getGridParam('selrow'),
                       celValue = $(this).getCell('getCell', selRowId, 'list_account_activated'),
                       tr = $("#"+rowid);
// you can use getCell or getRowData to examine the contain of
// the selected row to decide whether the row is editable or not
                       if (selRowId !== rowid && !tr.hasClass('not-editable-row')) {
// eneble the "Edit" button in the navigator
                       $("#edit_" + this.id).removeClass('ui-state-disabled');
                       $("#del_" + this.id).removeClass('ui-state-disabled');
                       } 
                      else {
// unselect previous selected row
// disable the "Edit" and "Del" button in the navigator
                       $("#edit_" + this.id).addClass('ui-state-disabled');
                       $("#del_" + this.id).addClass('ui-state-disabled');
                       }
return true; // allow selection or unselection
},
loadComplete: function() {
                          // just one example how to mark some rows as non-editable is to add
                          // some class like 'not-editable-row' which we test in beforeSelectRow
                          $("tr.jqgrow:even",this).addClass('not-editable-row');
                          }
}).jqGrid('navGrid','#pager',
{}, //options
{closeAfterEdit:true,mtype:'GET',editCaption: "Activate
Account",height:400,reloadAfterSubmit:true },
{reloadAfterSubmit:false}, // del options
{} // search options
);
$("#edit_").click(function() {
var gr = jQuery("#list").jqGrid('getGridParam','selrow');
if( gr != null ) jQuery("#list").jqGrid('editGridRow',gr,{}); 
});
$("#del_").click(function(){
var gr = jQuery("#list").jqGrid('getGridParam','selrow');
if( gr != null ) jQuery("#list").jqGrid('delGridRow',gr,{mtype:'GET',reloadAfterSubmit:true});
});
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:35:34.607

I modified the referenced demo for you. The main part of the code is the following

```
onSelectRow: function (rowid) {
    var thisId = $.jgrid.jqID(this.id),
        isCompleted = $(this).jqGrid("getCell", rowid, "isCompleted");

    // you can use getCell or getRowData to examine the contain of
    // the selected row to decide whether the row is editable or not
    if (isCompleted !== "Yes") {
        // eneble the "Edit" button in the navigator
        $("#edit_" + thisId).removeClass('ui-state-disabled');
        $("#del_" + thisId).removeClass('ui-state-disabled');
    } else {
        // unselect previous selected row
        // disable the "Edit" and "Del" button in the navigator
        $("#edit_" + thisId).addClass('ui-state-disabled');
        $("#del_" + thisId).addClass('ui-state-disabled');
    }
} 
```

You can see new demo [here](http://www.ok-soft-gmbh.com/jqGrid/EdableDisableEditDelNavigatorButtons_.htm).

# jquery - 使用 jquery mobile 追加到列表

> ID：15724030
> 
> 赞同：1
> 
> 时间：2013-03-30T22:07:46.633
> 
> 标签：jquery, jquery-mobile

我想循环页面并附加/创建指向主要内容的链接。如何才能做到这一点？这就是我到目前为止所拥有的。

我正在使用jquery mobile。

谢谢。

```
 $.mobile.activePage.removeClass('ui-body-a ui-body-b ui-body-c ui-body-d ui-body-e')
         .addClass('ui-body-' + $('div[data-theme]','#index').data('theme'))
         .attr('data-theme', $('div[data-theme]','#index').data('theme'));

 //pages
 $.each(siteData["pages"], function(i,v) {
      //HERE I WANT TO APPEND ID TO href TITLE AND VALUE TO CONTENT
 }); 
```

HTML

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>Loading...</h3>

    </div>

    <div data-role="content">

        <a href="#two" data-role="button">Show page "two"</a>

    </div>

    <div data-role="footer">
        <h4></h4>
    </div><!-- /footer -->
</div> 
```

所以我想看到的是这样的......

```
<div data-role="content">

    <a href="#1" data-role="button">Show page "1"</a>
    <a href="#2" data-role="button">Show page "2"</a>
   <a href="#3" data-role="button">Show page "3"</a>

</div> 
```

ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:23:42.643

**更新答案**-*基于问题编辑。*

```
$.each(siteData["pages"], function(i,v) {

 // find content div and insert links inside it
 $.mobile.activePage.find('[data-role=content]').append('<a href=' + id + ' data-role="button">' + text + '</a>');

}); 
```

老答案：

```
 $.each(siteData["pages"], function(i,v) {

 // append href link
 $.mobile.activePage.find('[data-role=content] a').attr('href', siteData.id)

 // append text of <a> link
 $.mobile.activePage.find('[data-role=content] a').html(text);

 // change the header text
 $.mobile.activePage.find('[data-role=header] h3').html(siteData.name);

}); 
```

# multithreading - 了解线程是如何实现的

> ID：15724031
> 
> 赞同：2
> 
> 时间：2013-03-30T22:07:53.220
> 
> 标签：multithreading

我一直在尝试了解实现用户空间线程的机制。我无法理解堆栈和框架的机制。我遇到了两个非常棒的资源（[这里](http://www.evanjones.ca/software/threading.html)和[这里](http://www.gnu.org/software/pth/rse-pmt.ps)），它们解释了线程以及它是如何实现的，但我仍然不明白以下细节：

1.  线程执行中如何使用机器上下文？我知道它由一个堆栈指针和一堆寄存器值组成。但是操作系统究竟是如何使用它来执行线程的呢？
2.  为什么我们需要一个蹦床函数（mctx_create_trampoline）？在链接 #2 中，他们设置了一个函数作为信号处理程序，用于保存机器上下文并启动线程函数 (mctx_create_boot)。
3.  基于这些函数，如何实现线程可以调用的“yield”函数？另外，我们如何中断正在运行的线程？我假设你有一个计时器和 SIGALRM，它会在它关闭时调用一个信号处理程序。但是如果 yield 函数切换上下文，那么信号处理程序将不会返回，这将阻止进一步的信号传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:20:25.343

1.  一旦线程开始在物理 CPU 上执行，操作系统就不再参与，直到时间片到期或需要进行一些其他重新调度。所以关键问题是：线程是如何调度到物理 CPU 上的？好吧，操作系统将物理 CPU 寄存器设置为适当的值并跳转到线程上次中断的位置（实际上设置了指令指针）。此时操作系统已失去控制，不再参与其中。只有在发生硬件中断或某些其他物理 CPU 内核决定接管 CPU 时，它才能重新获得控制权。
2.  目前无法打开该文档。
3.  “yield”不能在用户空间中实现。它通常是一个内核 API，它选择一些其他线程来调度并将其调度到当前 CPU。

# java - Wait for thread to finish in Java

> ID：15724033
> 
> 赞同：1
> 
> 时间：2013-03-30T22:08:08.367
> 
> 标签：java, swing, jframe, swingworker

I have some code which executes a download in a separate thread, created so that the JFrame GUI will continue to update during the download. But, the purpose is completely defeated when I use Thread.join(), as it causes the GUI to stop updating. I need a way to wait for the thread to finish and still update the GUI.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:16:06.023

You can have the task that does the download also fire an event to the GUI.

For example:

```
Runnable task = new Runnable() {
   public void run() {
      // do your download

      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            // call some method to tell the GUI that the download finished.
         }
      });
   }
}; 
```

and then to run it, either use an [Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html) (preferred method) or a raw thread:

```
executor.execute(task); 
```

or

```
new Thread(task).start(); 
```

* * *

As pointed out in the comments, you'd generally use a [SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html) to do this kind of thing but you can also do the manual approach outlined above.

SwingWorker provides a `doInBackground` method where you would stick your download logic in, a `done` method where you would stick in code to notify the GUI that the download finished and a `get` method to get the result of `doInBackground` (if there was one).

E.g.,

```
class Downloader extends SwingWorker<Object, Object> {
   @Override
   public Object doInBackground() {
       return doDownload();
   }

   @Override
   protected void done() {
       try { 
         frame.downloadDone(get());
       } catch (Exception ignore) {
       }
   }
}

(new Downloader()).execute(); 
```

# python - 如何将 Wikipedia wikitable 转换为 Python Pandas DataFrame？

> ID：15724034
> 
> 赞同：11
> 
> 时间：2013-03-30T22:08:08.283
> 
> 标签：python, parsing, pandas, wiki, wikipedia

在维基百科中，您可以找到一些有趣的数据进行排序、过滤、...

这是一个 wikitable 的示例

```
{| class="wikitable sortable"
|-
! Model !! Mhash/s !! Mhash/J !! Watts !! Clock !! SP !! Comment
|-
| ION || 1.8 || 0.067 || 27 ||  || 16 || poclbm;  power consumption incl. CPU
|-
| 8200 mGPU || 1.2 || || || 1200 || 16 || 128 MB shared memory, "poclbm -w 128 -f 0"
|-
| 8400 GS || 2.3 || || ||  ||  || "poclbm -w 128"
|-
|} 
```

我正在寻找一种将此类数据导入 Python Pandas DataFrame 的方法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T04:04:52.340

这是一个使用[py-wikimarkup](https://pypi.python.org/pypi/py-wikimarkup/)和[PyQuery](https://pypi.python.org/pypi/pyquery/)从 wikimarkup 字符串中提取所有表作为 pandas DataFrames 的解决方案，忽略非表内容。

```
import wikimarkup
import pandas as pd
from pyquery import PyQuery

def get_tables(wiki):
    html = PyQuery(wikimarkup.parse(wiki))
    frames = []
    for table in html('table'):
        data = [[x.text.strip() for x in row]
                for row in table.getchildren()]
        df = pd.DataFrame(data[1:], columns=data[0])
        frames.append(df)
    return frames 
```

给定以下输入，

```
wiki = """
=Title=

Description.

{| class="wikitable sortable"
|-
! Model !! Mhash/s !! Mhash/J !! Watts !! Clock !! SP !! Comment
|-
| ION || 1.8 || 0.067 || 27 ||  || 16 || poclbm;  power consumption incl. CPU
|-
| 8200 mGPU || 1.2 || || || 1200 || 16 || 128 MB shared memory, "poclbm -w 128 -f 0"
|-
| 8400 GS || 2.3 || || || || || "poclbm -w 128"
|-
|}

{| class="wikitable sortable"
|-
! A !! B !! C
|-
| 0
| 1
| 2
|-
| 3
| 4
| 5
|}
""" 
```

`get_tables`返回以下数据帧。

```
 Model Mhash/s Mhash/J Watts Clock  SP                                     Comment
0        ION     1.8   0.067    27        16        poclbm;  power consumption incl. CPU
1  8200 mGPU     1.2                1200  16  128 MB shared memory, "poclbm -w 128 -f 0"
2    8400 GS     2.3                                                     "poclbm -w 128" 
```

```
 A  B  C
0  0  1  2
1  3  4  5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-08T19:22:27.667

你可以直接使用熊猫。像这样的东西...

`pandas.read_html(url, attrs={"class": "wikitable"})`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T02:54:39.363

用于`re`进行一些预处理，然后用于`read_csv`将其转换为`DataFrame`：

```
table = """{| class="wikitable sortable"
|-
! Model !! Mhash/s !! Mhash/J !! Watts !! Clock !! SP !! Comment
|-
| ION || 1.8 || 0.067 || 27 ||  || 16 || poclbm;  power consumption incl. CPU
|-
| 8200 mGPU || 1.2 || || || 1200 || 16 || 128 MB shared memory, "poclbm -w 128 -f 0"
|-
| 8400 GS || 2.3 || || ||  ||  || "poclbm -w 128"
|-
|}"""

data = StringIO(re.sub("^\|.|^!.", "", table.replace("|-\n", ""), flags=re.MULTILINE))
df = pd.read_csv(data, delimiter="\|\||!!", skiprows=1) 
```

输出：

```
 Model    Mhash/s   Mhash/J   Watts   Clock    SP                                       Comment
0        ION         1.8    0.067      27            16          poclbm;  power consumption incl. CPU
1  8200 mGPU         1.2                     1200    16    128 MB shared memory, "poclbm -w 128 -f 0"
2    8400 GS         2.3                                                              "poclbm -w 128" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T23:24:38.060

已编辑 - 下面的完整答案。我没有安装 Panda，所以让我知道这是否适合你。

```
from pandas import *

wikitable = '''
{| class="wikitable sortable"
|-
! Model !! Mhash/s !! Mhash/J !! Watts !! Clock !! SP !! Comment
|-
| ION || 1.8 || 0.067 || 27 ||  || 16 || poclbm;  power consumption incl. CPU
|-
| 8200 mGPU || 1.2 || || || 1200 || 16 || 128 MB shared memory, "poclbm -w 128 -f 0"
|-
| 8400 GS || 2.3 || || ||  ||  || "poclbm -w 128"
|-
|}'''
rows = wikitable.split('|-')
header = []
table = []
for i in rows:
     line = i.strip()
     if line.startswith('!'):
         header = line.split('!!')
     elif line.startswith('|') and line.strip() != '|}':
         table.append(line[2:].split('||'))

data = {}
for i in range(len(header) - 1):
    col = []
    for row in table:
        col.append(row[i])
    data[header[i]] = col

print(data)

df = DataFrame(data) 
```

# android - Android 库项目 Sliding Menu 抛出 java.lang.NoClassDefFoundError: com.slidingmenu.lib.R$styleable

> ID：15724036
> 
> 赞同：3
> 
> 时间：2013-03-30T22:08:20.430
> 
> 标签：android, eclipse, adt, noclassdeffounderror, slidingmenu

我正在开发一个 android 应用程序，我正在尝试使用一个库 Sliding Menu (github.com/jfeinstein10/SlidingMenu)。但是，我在干净的项目中使用该库时遇到问题。我明白了

```
java.lang.NoClassDefFoundError: com.slidingmenu.lib.R$styleable 
```

做的时候

```
SlidingMenu slidingMenu = new SlidingMenu(); 
```

测试的配置：JDK 测试 1.6u43、1.7（最新）项目目标 api = 尝试了 Android 4.2.2 和 Google API 17 SDK 版本测试了 21、21.0.1、21.1 Windows 8 Pro x64、Intel Core i7 3610QM、Nvidia GT660M、Samsung Pro 840 256GB SSD 集成了 Actionbarsherlock 和没有它。

我通过从现有代码创建一个 Android 项目来导入库，在 android 属性中标记“Is Library”，然后在原始应用程序的 android 属性中引用它（而不是通过 .jar）

以下链接指向代码片段、完整堆栈跟踪和当前配置的屏幕截图

代码片段： http: [//pastebin.com/2yzRC5AJ](http://pastebin.com/2yzRC5AJ)

[完整的堆栈跟踪： http](http://pastebin.com/D7RQwuQd) ://pastebin.com/D7RQwuQd

我已经坚持了3天了......：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T09:01:28.663

在消除我的 noclassdef 错误之前，我必须以两种方式添加依赖项

1.  将 /bin 中的 library.jar 作为依赖项添加到构建路径中，确保选择 Order and Export 选项卡并选中新依赖项的复选框。

2.  通过鼠标右键单击您的项目添加库，然后是属性，然后是 android，然后添加库

3.  瓦伊拉

我也为此苦苦挣扎，并从大量的谷歌搜索中设法将其拼凑在一起。

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T12:16:01.970

简单的解决方案：如果您的项目已经包含支持库，那么只需从库中删除支持库（jfeinstein10 / SlidingMenu），然后一切正常。您也可以在导入后执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T20:20:59.687

1）只需将库添加到项目的属性（ANDROID）；
2）并在（JAVA BUILD PATH）的Order & Export属性中标记相同；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T12:50:30.070

我有同样的问题。由于您正在使用 IDE 构建应用程序，因此您需要告诉**IDE**该模块是一个**Library**，因此在 .properties 文件中定义该库是没有用的。尝试更改 IDE 构建文件，我不熟悉 eclipse，但在 android studio 中，这行就足够了：

**模块.iml**

```
<configuration>
    <option name="LIBRARY_PROJECT" value="true" />
</configuration> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-24T19:02:59.333

转到 Manifast 并将 sdkversion 更改为 11

# .net - Mapping Expression > Expression >

> ID：15724038
> 
> 赞同：2
> 
> 时间：2013-03-30T22:08:25.143
> 
> 标签：.net, lambda, automapper, func

I want to pass my query from Business Layer to Service Layer but when doing this i have to convert my DTO to Entity model.

Normally i can convert Type1 to Type2 via Autommaper but now i want to map `Expression<Func<Type1,bool>>` to `Expression<Func<Type2, bool>>`

I got error from Automapper

```
Missing type map configuration or unsupported mapping. 
Mapping types: Expression`1 -> Expression`1 
```

How can i achieve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:42:08.573

I just updated my answer to the another question you commented on, which I think addresses this: [AutoMapper for Func's between selector types](https://stackoverflow.com/questions/7424501/automapper-for-funcs-between-selector-types/7425211#7425211)

As for the error you posted above, that appears to be because you tried to map one Expression type to another with AutoMapper, e.g. `Mapper.Map<Expression<Func<Type1,bool>>, Expression<Func<Type2, bool>>>(exp1, exp2)`. That sort of thing is not supported; AutoMapper is only for mapping between *instances* of different types, not *expressions* that deal with those types.

Anyway, if you read my other answer it may tell you how to achieve what you want.

# css - 没有固定宽度的 IE8 文本溢出

> ID：15724040
> 
> 赞同：0
> 
> 时间：2013-03-30T22:08:32.517
> 
> 标签：css, internet-explorer-8

使用文本溢出和隐藏溢出时，我在 IE8 中遇到问题。尽管 IE8 正确地修剪了文本并从视图中隐藏了它的溢出，但带有截断文本的 span 仍然超出了父元素的宽度。

在跨度或其父元素上使用固定宽度可以正常工作，但不幸的是我不能使用固定宽度。我尝试在截断跨度元素上使用 width:100% 和 max-width 以及在父元素上放置一个 max-width ，但在 IE8 中没有运气。

任何建议都会非常有帮助。

在这里摆弄：

[http://jsfiddle.net/cmoeser/aRvXg/](http://jsfiddle.net/cmoeser/aRvXg/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
</head>
<style type="text/css">

.containerDiv {
    float:right;
    border:1px solid green;
    overflow:hidden!important;
    zoom:1;
}
.textDiv {
     float:left;
     zoom:1;
     white-space: nowrap;
     display:block;
     max-width:128px;
     overflow:hidden;
     -ms-text-overflow: ellipsis;
     text-overflow:ellipsis;   
}
</style>
<body>
    <div class="containerDiv">
        <span class="textDiv">WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW</span>
    </div>
</body>
</html> 
```

![在此处输入图像描述](../Images/4c712348c4924b8a57c7eff92575bee0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:20:31.793

如果你尝试怎么办

```
 .textdiv {float:right; text-align:left;} 
```

无法在 ie8 上使用 js fiddle

# node.js - 努力让回调工作 express.js

> ID：15724046
> 
> 赞同：1
> 
> 时间：2013-03-30T22:08:49.527
> 
> 标签：node.js, express

尝试在呈现页面之前确保请求已完成

应用程序概述 - 使用代码提交、发出请求、填充结果页面

//索引.js

```
var response = require('./requestMapping')

// home search page
exports.index = function(req, res){
  res.render('index', { stationDisplay: response.station_id, test: 'rob' });
};

**//post from form to call METAR service
exports.post =('/', function(req, res, next) {
  response.getMETAR(req.body.query,function(){
    res.render('results', {
        stationDisplay: response.station_id,
        test: 'rob'
    });
  });
})** 
```

//索引.ejs

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= stationDisplay %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>Enter ICAO code to get the latest METAR</h1>
    <form method="post" action="/">
        <input type="text" name="query">
        <input type="submit">
    </form>
  </body>
</html> 
```

调用 web 服务的模块 - requestMapping.js

```
/**
 * @author robertbrock
 */
//Webservice XML
function getMETAR(ICAO){

    var request = require('request');
    request('http://weather.aero/dataserver_current/httpparam?datasource=metars&requestType=retrieve&format=xml&mostRecentForEachStation=constraint&hoursBeforeNow=24&stationString='+ICAO, function(error, response, body){
        if (!error && response.statusCode == 200) {
            var XmlDocument = require('xmldoc').XmlDocument;
            var results = new XmlDocument(body);

            console.log(body)
            console.log(ICAO)
            exports.station_id = results.valueWithPath("data.METAR.station_id");
//etc.

        }
    })
}
exports.getMETAR =getMETAR; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:44:52.127

我看不出你的`getMETAR`函数实际上需要一个回调函数？我希望它是：

```
function getMETAR(ICAO, callback) {
    // Do your work
    var station_id = results.valueWithPath("data.METAR.station_id");
    callback(null, station_id); // It's common to use the first arg of the callback if an error has occurred
} 
```

然后调用这个函数的代码可以像这样使用它：

```
app.post('/', function(req, res) {
    response.getMETAR(req.body.query, function(err, station_id) {
        res.render('results', {stationDisplay: station_id, test: 'rob'};
    });
}); 
```

习惯异步编程和回调如何工作需要一些时间，但是一旦你完成了几次，你就会掌握它的窍门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:23:45.907

没有看到你的代码的其余部分很难猜测，但你的代码应该看起来更像：

```
app.post('/', function(req, res, next) {
  response.getMETAR(req.body.query,function(){
    res.render('results', {
        stationDisplay: response.station_id,
        test: 'rob'
    });
  });
}); 
```

# c++ - g++ 错误：在 '*' 标记之前应为 ')'

> ID：15724047
> 
> 赞同：0
> 
> 时间：2013-03-30T22:08:56.943
> 
> 标签：c++, linux, qt, qt4

我有这段代码。我尝试的是子类化`QGraphicsScene`以重新实现它`keyPressEvent()`的方法。顺便说一下，我不得不`typedef`为这个东西选择这个特殊的实现（尤其是部分），以满足与其他部分的兼容性问题代码。

**按键.h**

```
#include <QWidget>
#include <QGraphicsScene>
#include <QGraphicsView>

class Canvas;

typedef struct{
    int id;
    int pid;
    Canvas *qgc;

}scene;

class Canvas: public QGraphicsScene {

    private:
        scene *gc;

    public:
        Canvas(Scene* gc, QWidget *parent=0);

    protected:
        void keyPressEvent(QKeyEvent *e);
}; 
```

**按键.cpp**

```
#include <QApplication>
#include <QKeyEvent>

#include "keypress.h"

Canvas::Canvas( Scene* gc, QWidget *parent)
    : QGraphicsScene(parent)
{
    this->gc=gc;
}

void Canvas::keyPressEvent(QKeyEvent *event)
{
   if (event->key() == Qt::Key_Escape) {  
   qApp->quit();
   } 
} 
```

**主文件**

```
#include <QApplication>
#include "keypress.h"
#include <QGraphicsView>

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);  

  Scene *s;
  Canvas *canvas=new Canvas(s);
  canvas->addText("Hello");

  QGraphicsView view(canvas);
  view.show();
  return app.exec();
} 
```

每当我试图编译这个程序时，我都会出错

```
In file included from keypress.cpp:4:
keypress.h:29: error: expected ‘)’ before ‘*’ token
keypress.cpp:6: error: expected ‘)’ before ‘*’ token
make: *** [keypress.o] Error 1 
```

我的代码有什么问题？

# grails - 禁用 grails 中的默认可搜索控制器

> ID：15724048
> 
> 赞同：0
> 
> 时间：2013-03-30T22:09:01.413
> 
> 标签：grails, searchable, grails-searchable, searchable-plugin

有没有办法禁用控制器，它是 Grails 中某些插件（在我的情况下是可搜索的）的一部分？我能想到的唯一两种方法是将其指向 UrlMappings [1] 中的 404 页面或为同一事物编写过滤器。然而，在我看来，这更像是一种解决方法，一种适当的解决方案。此外，至少在 Searchable 插件的情况下，摆脱默认控制器和视图的需求对我来说似乎很常见，因为它们基本上都是无用的。

[1] 这也被[Disable grails Searchable plugin default search page 接受了？](https://stackoverflow.com/questions/3170207/disable-grails-searchable-plugin-default-search-page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T08:11:31.580

如果您使用的是 spring [spring-security-core](http://grails.org/plugin/spring-security-core)，那么限制控制器将非常容易。

您只需将以下代码放入 config.groovy

```
grails.plugins.springsecurity.rejectIfNoRule = true     //Deny all urls by default
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap
grails.plugins.springsecurity.interceptUrlMap = [
/** Start IS_AUTHENTICATED_ANONYMOUSLY block **/
    '/about/**':        ['IS_AUTHENTICATED_ANONYMOUSLY']
        ,'/':               ['IS_AUTHENTICATED_REMEMBERED'] ] 
```

在interceptUrlMap 块中提到的控制器是可访问的。

# php - 管理 wordpress 环境

> ID：15724049
> 
> 赞同：2
> 
> 时间：2013-03-30T22:09:09.443
> 
> 标签：php, database, wordpress, deployment

我有一个小团队（4 个开发人员），我们创建了一个网站，目前有 500 个用户。

我们的开发周期是这样的：

1.  我们在本地主机上进行更改（安装插件或自定义代码）。
2.  我们将其推送到开发环境。我们可以做压力测试，我们有几个测试用户等等。
3.  我们对其进行评估。
4.  我们将其投入生产。

部署新代码就像 git pull 一样简单，但真正的问题是数据库。

几乎所有插件都需要我在管理面板中单击某些内容。更重要的是：其中一些在我安装它们时会创建新表或更新现有表。例如，为每个用户添加一些新的用户元数据。

我想到了一些解决方案：

*   在所有环境中手动安装插件：

我可以手动安装插件，但这很容易出错。我们有几种情况，代码相同，但由于一些简单的错误配置，网站的工作方式不同。

*   导出整个数据库：

    *   导出生产数据库并导入到 dev。
    *   在 dev 上安装插件。
    *   将开发迁移到生产。

它有一个真正的问题——它不是原子的。如果用户在我在 dev 上安装插件时创建了一个帖子 - 它就消失了。

*   从数据库更改创建脚本：

当我通过 MySQL 二进制日志安装插件时，我可以记录 wordpress 做了什么。

问题是，可以在一个数据库查询中获取所有用户，然后使用 id 添加一些元数据和另一个。这意味着，二进制日志记录了带有一堆 id 的查询。如果新用户在此过程中注册 - 它就消失了。

*   使用 selenium IDE 记录配置更改：

然后我可以将测试套件导出到 python 并使用更改的主机地址进行重放。它可以工作，但它似乎更像是解决方法，然后是解决方案。

*   修改所有插件，使它们由 php 文件配置：

这似乎是合法的，但可能会创造很多工作。

你能告诉我，你如何通过数据库更改自动化 wordpress 部署？

* * *

关于 SO 有几个类似的问题：

[管理有关开发和实时环境的 Wordpress 博客](https://stackoverflow.com/questions/1366041/managing-wordpress-blog-on-development-and-live-environment)

[WordPress 开发环境迁移](https://stackoverflow.com/questions/7908192/wordpress-dev-environment-migration)

但这些都是相当基本的问题，并不能解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T10:52:21.780

您是否尝试过使用 WP Migrate DB Pro？我使用这个插件进行数据库传输。

# windows-phone-7 - 异步等待 task.run - 未找到

> ID：15724051
> 
> 赞同：3
> 
> 时间：2013-03-30T22:09:17.747
> 
> 标签：windows-phone-7, asynchronous, visual-studio-2012, async-await

VS2012、C#、XAML、Windows Phone7 应用程序（刚从 Win7/VS2010 迁移而来）。

我刚刚将我的 WP7 应用程序迁移到 Win8/VS2012。（我提到这一点以防下面的问题可能表明我可能指向了一个不正确的 DLL。）应用程序迁移得很好。我正在添加一些我在 VS2012 中原型化的额外异步处理，并且被 VS 标记为以下错误：

```
var _Token = await Task.Run(() => (Token)_Serializer.ReadObject(_Response.GetResponseStream())); 
```

VS 说“System.Threading.Tasks.Task 不包含‘运行’的定义。” 我的 WP7 应用程序中 System.Threading.Tasks 的参考指向此位置：\packages\Microsoft.Bcl.1.0.16-rc\lib\sl4-windowsphone71\System.Threading.Tasks.dll

[我通过NuGet](https://nuget.org/packages/Microsoft.Bcl.Async)添加了 Microsoft.Bcl.1.0.16-rc以完成向 VS2012 的迁移。这是不正确的吗？以前我使用的是 AsyncCtpLibrary_Phone 并被告知获取 Microsoft.Bcl.Async 将解决构建错误，例如：

> 'System.Threading.Tasks.Task' 类型存在于 AsyncCtpLibrary_Phone.dll' > 和 'c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0\mscorlib.dll 中。添加 Microsoft.Bcl.Async 后，wp7 应用程序正确构建并运行。

只有在尝试删除我在 VS2012 中原型化的新异步代码之后，才出现 Task.Run 问题。

app.config 包含以下条目：

```
<dependentAssembly bcl:name="System.Threading.Tasks">
    <assemblyIdentity name="System.Threading.Tasks" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.5.11.0" newVersion="1.5.11.0" />
</dependentAssembly> 
```

我需要安装其他软件包吗？

在此先感谢，保罗

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-26T20:10:27.463

在 Microsoft.Bcl.Async 中，就像在 Async CTP 中一样，`Run`方法在`TaskEx`类型上而不是`Task`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:35:07.963

上次我检查时，Async CTP 在 Visual Studio 2012 中不起作用，因为它是 Visual Studio 2010 的扩展。恐怕只要你的目标是 Windows Phone 7，你就必须坚持使用 VS 2010。

可能更多有用的信息[在这里](http://blogs.msdn.com/b/lucian/archive/2012/03/25/asyncctp-installation-problems-and-vs11.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T01:42:22.337

我认为问题在于您仍然对包含相同类型的旧异步 CTP 程序集的引用（根据编译器错误）。这些是使用 VS2010 时的正确参考，但现在需要删除 AFAICT。

恕我直言，我会执行以下步骤：

*   删除 Microsoft.Bcl 和 Microsoft.Bcl.Async （通过 NuGet，但是您添加了它们）
*   删除异步 CTP 库 (AsyncCtpLibrary*.dll)
*   确保编译找不到类型
*   通过 NuGet 添加 Microsoft.Bcl.Async
*   确保编译工作

我不明白 WP7.1 vs 7.5，但由于编译器错误提到了 WP8 ref，我认为你没问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-26T19:26:38.877

NuGet 的 Microsoft.Bcl.Async dll 很好。

问题是语法不同。不要使用：

```
await Task.Run(() => ...); 
```

你应该只使用：

```
await Task.Factory.StartNew(() => ...); 
```

# java - What happens to messages sent by sending socket but never read by receiving socket?

> ID：15724054
> 
> 赞同：2
> 
> 时间：2013-03-30T22:09:24.753
> 
> 标签：java, sockets, networking, io

Suppose that I have a sender socket and receiver socket. The sender socket sends messages which are 1 GB in total, but the receiver socket neither read from nor close the socket.

What happens to the 1GB of messages before either socket closes? Are they sitting somewhere in OS buffer?

To be more specific...

*   Each sender has its own thread.
*   All senders have flushed their output stream.
*   All messages are passed by loopback interface

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:14:16.173

Yes the data will be sitting in buffers in the TCP/IP stack. Though it is far far less than 1Gb.

Assuming you use TCP - which employs flow control to deal with such a situation, the receiver buffers will fill up. When the receiver buffer is full the sender will stop transmitting. The sender buffer will fill up, and when it is full, the application write/send calls will block until the receiver starts consuming the data or an error occurs

# javascript - 轮询工作多长时间

> ID：15724055
> 
> 赞同：4
> 
> 时间：2013-03-30T22:09:28.023
> 
> 标签：javascript, jquery, asp.net, ajax

我正在研究 ajax 长轮询，但我很困惑。传统的 ajax 调用和长轮询有什么不同

```
 var lpOnComplete = function(response) {
   alert(response);
   // do more processing
   lpStart();
  };

    var lpStart = function() {
    $.post('/path/to/script', {}, lpOnComplete, 'json');
    };

    $(document).ready(lpStart); 
```

这个例子只是以递归方式调用服务器..与 setInterval 中的传统调用有什么不同..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T05:16:20.050

顾名思义，*长轮询*意味着长时间轮询某事。

```
$.post('/path/to/script', {}, lpOnComplete, 'json'); 
```

这是实际过程的开始，您对服务器上的某个脚本进行 ajax 调用，在这种情况下`/path/to/script`，您需要使服务器脚本（`php`例如）足够智能，以便它仅在所需数据可用时响应请求，脚本应该等待指定的时间段（例如 1 分钟），如果在 1 分钟内没有可用数据，则它应该返回没有数据。

一旦服务器返回某些内容，在您的回调函数中，您再次对同一脚本进行 ajax 调用，服务器脚本再次继续该过程。

Consider a chat application, In conventional way you are polling the server say every 2 second's and the server return's even if no messages are available.If upto one minute server get's no new messages for you, you end up hitting the server 30 times in last one minute.

Now consider ***Long Polling*** way, you set your server script to wait for one minute for the new messages. From the client, you make a single ajax call to your script and say no messages are arriving for next one minute, server will not respond until 1 minute. And you have hit the server just one time in last 1 minute. Can you imagine **30 Hit Vs 1 Hit**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T22:14:12.323

从理论上讲，使用 setinterval，您可以进行重叠处理，

因此，如果一个 oncomplete 处理程序花费的时间特别长，它可能会与下一次调用重叠，从而减慢系统速度或以不可预知的方式解决。

通过在第一个民意调查完成后明确开始下一次民意调查，您可以获得较少的常规电话，其优势是您可以保证一次只作为一个工作单元作为副产品进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-20T14:46:21.510

There are two ways to do long polling

1.  The setInterval Technique

```

     setInterval(function() {
      $.ajax({
        url: "server",
        success: function(data) {
          //更新您的仪表板仪表
          salesGauge.setValue(data.value);
        },
        数据类型：“json”
      });
    }, 30000);

```

2.  setTimeout 技术

如果您发现自己处于要破坏间隔时间的情况，那么建议使用递归 setTimeout 模式：

```

    （函数轮询（）{
       设置超时（函数（）{
          $.ajax({ url: "服务器", 成功: 函数(数据){
            //更新您的仪表板仪表
            salesGauge.setValue(data.value);

            //递归设置下一次轮询
            轮询（）;
          }，数据类型：“json”}）；
      }, 30000);
    })();

```

Using the Closure technique, poll becomes a self executing JavaScript function that runs the first time automatically. Sets up the thirty (30) second interval. Makes the asynchronous Ajax call to your server. Then, finally, sets up the next poll recursively.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T22:39:57.413

对于长轮询，除非数据准备好，否则服务器不会返回，否则它将保持网络连接打开，直到数据准备好，在该阶段它可以“推送”到客户端，因为客户端已经在等待。维基百科有一个很好的解释。[http://en.wikipedia.org/wiki/Long_polling#Long_polling](http://en.wikipedia.org/wiki/Long_polling#Long_polling)。在您的示例中， lponcomplete 可能不会在几分钟内被调用。

使用常量 settimeout 类型轮询意味着在您的第一个请求完成后立即准备好的数据将在您的下一次轮询之前不会被传递，因为服务器没有连接到客户端。

对于服务器来说，长轮询会长时间保持套接字打开，占用资源，而重复的短轮询会导致更多的网络流量。

Html5 也有新的东西，比如 websockets 来帮助这个领域，所以你可能也想了解一下。

# java - Download an excel file generated from a query to the database

> ID：15724061
> 
> 赞同：1
> 
> 时间：2013-03-30T22:09:54.053
> 
> 标签：java, javascript, mysql, jax-rs

I am looking for the possibility of creating an excel file from a query that a user may generate on our database, so that the user can download it.

Currently we have results displaying to the GUI, but I am wondering what is the best way to create the excel file with the data returned. I'm using a MySQL DB, java JAxRS, JavaScript & html5.

Any suggestions are very welcome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:48:08.463

As javadev mentioned, Apache POI is one of the best approach I would also suggest. [Here is an example code](http://javaprogramming.language-tutorial.com/2012/10/writing-resultset-to-excel-file.html) that suits your requirement. Hope this would help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:15:39.897

I highly recommand to use [Apache POI API](http://poi.apache.org/)

[Here](http://www.avajava.com/tutorials/lessons/how-do-i-write-to-an-excel-file-using-poi.html) is a good tutorial to start.

# ruby-on-rails - use cache_digests with XML builder?

> ID：15724069
> 
> 赞同：5
> 
> 时间：2013-03-30T22:10:29.060
> 
> 标签：ruby-on-rails, xml, caching, ruby-on-rails-4

Is there any way to leverage the new caching strategy in Rails 4 (cache_digests) for XML?

I suppose I could use xml.erb views, but I prefer xml.builder views for their terseness.

Is there any way to use cache_digests in this way?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-13T04:33:28.070

To use [fragment caching and Rails 4 cache_digests](http://edgeguides.rubyonrails.org/caching_with_rails.html#fragment-caching) in XML Builder files, just use the `cache` method, which works exactly like in other templates. Here is an example of russian doll caching of a (simplified) blog RSS feed:

```
# feed.xml.builder

xml.instruct! :xml, version: "1.0"
xml.rss version: "2.0", 'xmlns:atom': 'http://www.w3.org/2005/Atom' do
  xml.channel do
    xml.title "My Blog"

    cache "articles/feed-#{@articles.count}-#{@articles.maximum(:updated_at).try(:to_i)}" do
      @articles.each do |article|
        cache article do
          xml.item do
            xml.title article.title
            xml.description article.body
          end
        end
      end
    end
  end
end 
```

# wcf - 当我想从数据库中检索图像时，它显示了一个 ApplicationName 和 WCFService 名称以及类名称，为什么？

> ID：15724075
> 
> 赞同：0
> 
> 时间：2013-03-30T22:10:40.190
> 
> 标签：wcf, linq, entity-framework, wcf-data-services

在我正在制作的 WCF 服务中

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    CompositeType QuestionRetrieve(String email);
}

[DataContract]
public class CompositeType
{
   private String imageName;
    public string ImageName
    {
        get { return imageName; }
        set { imageName= value; }
    } 
```

在 Service1.cs

```
public CompositeType QuestionRetrieve(String email)
{
    context = new myEntities();
    Profile aProfile= new Profile();

    aProfile= (from c in context.Questions
                 where c.QuestionId == email
                 select c).First();

    CompositeType aCompositeType = new CompositeType();
    aCompositeType.imageName= aProfile.ImageName;

    return aCompositeType;
} 
```

在其他 WindowForm 中，我尝试检索该值，但它显示了 WindowApplicationName、ServiceName 和类名“CompositeType”

在 WindowForm 中，我们在 PageLoad 上做：

```
 Service aService = new Service();
 Label1.Text = aService.QuestionRetrieve("gh@gmail.com").ToString(); 
```

它向我展示

```
 WindowFom.Service.CompositeType 
```

你能告诉我与Entity合作的错误在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:26:21.293

您正在执行对象`ToString()`的。`CompositeType`改为这样做：

```
Label1.Text = aService.QuestionRetrieve("gh@gmail.com").ImageName; 
```

# java - 改变for循环的顺序？

> ID：15724090
> 
> 赞同：5
> 
> 时间：2013-03-30T22:13:04.013
> 
> 标签：java, loops, dynamic, 3d, coords

我有一种情况，我需要根据用户输入以不同的顺序循环 xyz 坐标。所以我是 3D 空间中的一个区域，然后是一组这样的 for 循环。

```
for(int x = 0; x < build.getWidth(); x++){
   for(int y = 0; y < build.getHeight(); y++){
     for(int z = 0; z < build.getLength(); z++){
        //do stuff
       }
    }
 } 
```

但根据用户的输入，顺序可能是这样的。

```
for(int z = 0; z < build.getLenght(); z++){
   for(int y = 0; y < build.getHeight(); y++){
     for(int x = 0; x < build.getWidth(); x++){
        //do stuff
       }
    }
 } 
```

甚至消极。

```
for(int x = build.getWidth(); x > 0; x--){
   for(int y = 0; y < build.getHeight(); y++){
      for(int z = 0; z < build.getLength(); z++){
        //do stuff
      }
   }
} 
```

有没有办法做到这一点而无需对每个案例进行硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:44:35.463

您说根据用户输入循环更改的顺序。必须编写处理用户输入的逻辑。

你可以这样编码：

```
//Code to populate XInit, XEnd, YInit, YEnd, ZInit, ZEnd based on user input

    for(int x = XInit; x < XEnd; x=XInit<XEnd?x+1:x-1){
       for(int y = YInit; y < YEnd; y=YInit<YEnd?y+1:y-1){
         for(int z = ZInit; z < ZEnd; z=ZInit<ZEnd?z+1:z-1){
            //do stuff
           }
        }
     } 
```

注意：您甚至可能希望将 XInit、XEnd 等参数的计算抽象到一个单独的方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T00:05:23.823

这是一个 n 维步进器，它可以从任何起始位置到任何限制以任何顺序步进任意数量的维度。有关示例，请参见测试代码。

```
public class Test {
  public void test() {
    int[] limits = {3, -5, 7};
    int[] order = {0, 2, 1};
    int[] starts = {0, 0, 0};
    int[] steps = {1, -1, 2};
    NDimensionalStepper nds = new NDimensionalStepper(limits, order, starts, steps);
    do {
      System.out.println(nds);
    } while (nds.step());
  }

  public static void main(String args[]) {
    new Test().test();
  }

  public static class NDimensionalStepper {
    // The current positions in each dimension.
    // Note that i[order[0]] is the fastest mover.
    final int[] i;
    // Starts.
    final int[] starts;
    // Steps.
    final int[] steps;
    // Limits.
    final int[] limits;
    // Order.
    final int[] order;
    // The (unordered) dimension we last stepped.
    int d = 0;

    // Full constructor.
    public NDimensionalStepper(int[] limits, int[] order, int[] starts, int[] steps) {
      // Should parameter check to ensure all are the same length.
      // Should also check that each dimension will terminate.
      this.i = Arrays.copyOf(starts, starts.length);
      this.starts = Arrays.copyOf(starts, starts.length);
      this.steps = Arrays.copyOf(steps, steps.length);
      this.limits = Arrays.copyOf(limits, limits.length);
      this.order = Arrays.copyOf(order, order.length);
    }

    // Default steps to 1.
    public NDimensionalStepper(int[] limits, int[] order, int[] starts) {
      this(limits, order, starts, defaultSteps(limits, starts));
    }

    // Default steps - 1 Towards limits.
    private static int[] defaultSteps(int[] limits, int[] starts) {
      int[] steps = new int[limits.length];
      for (int i = 0; i < limits.length; i++) {
        // Step towrds limits.
        steps[i] = (int) Math.signum(limits[i] - starts[i]);
      }
      return steps;
    }

    // Default starts to 0.
    public NDimensionalStepper(int[] limits, int[] order) {
      this(limits, order, defaultStarts(limits.length));
    }

    // Default starts - 0, 0, ...
    private static int[] defaultStarts(int d) {
      int[] starts = new int[d];
      Arrays.fill(starts, 0);
      return starts;
    }

    // Default order to normal.
    public NDimensionalStepper(int[] limits) {
      this(limits, defaultOrder(limits.length));
    }

    // Default order - ..., 1, 0
    private static int[] defaultOrder(int d) {
      int[] order = new int[d];
      for (int i = 0; i < d; i++) {
        order[i] = d - i - 1;
      }
      return order;
    }

    // Get the current position in dimension d.
    public int get(int d) {
      return i[d];
    }

    // Take just one step. Return false if cant.
    public boolean step() {
      boolean stepped = false;
      boolean finished = false;
      while (!stepped && !finished) {
        // Which dimension should be stepped (depends on order).
        int o = order[d];
        // Can we step in the current dimension?
        while (finished(o) && d < order.length - 1) {
          // Reached a limit! - Move up one dimension.
          o = order[++d];
        }
        if (d < order.length && !finished(o)) {
          // Step it.
          i[o] += steps[o];
          stepped = true;
          // Zero all lower dimensions.
          while (d > 0) {
            d -= 1;
            i[order[d]] = starts[order[d]];
          }
        } else {
          // Got to the last without finding one below limit. Finished!
          finished = true;
        }
      }
      return !finished;
    }

    // Equal or passed the limits.
    private boolean finished(int o) {
      int sign = (int) Math.signum(steps[o]);
      return sign * (i[o] + steps[o]) >= sign * limits[o];
    }

    @Override
    public String toString() {
      StringBuilder s = new StringBuilder();
      s.append("{");
      for (int d = 0; d < order.length; d++) {
        s.append(get(d));
        if (d < order.length - 1) {
          s.append(",");
        }
      }
      s.append("}");
      return s.toString();
    }
  }
} 
```

我对您的三个场景的等效测试如下所示：

```
 private void testBuild1(Build build) {
    System.out.println("Build: x,y,z");
    for (int x = 0; x < build.getWidth(); x++) {
      for (int y = 0; y < build.getHeight(); y++) {
        for (int z = 0; z < build.getLength(); z++) {
          System.out.println("{" + x + "," + y + "," + z + "}");
        }
      }
    }
    int[] limits = {build.getWidth(), build.getHeight(), build.getLength()};
    testNDS(new NDimensionalStepper(limits));
  }

  private void testBuild2(Build build) {
     System.out.println("Build: z,y,x");
    for (int z = 0; z < build.getLength(); z++) {
      for (int y = 0; y < build.getHeight(); y++) {
        for (int x = 0; x < build.getWidth(); x++) {
          System.out.println("{" + x + "," + y + "," + z + "}");
        }
      }
    }
    int[] limits = {build.getWidth(), build.getHeight(), build.getLength()};
    int[] order = {0,1,2};
    testNDS(new NDimensionalStepper(limits, order));
  }

  private void testBuild3(Build build) {
    System.out.println("Build: x--,y,z");
    for (int x = build.getWidth(); x > 0; x--) {
      for (int y = 0; y < build.getHeight(); y++) {
        for (int z = 0; z < build.getLength(); z++) {
          System.out.println("{" + x + "," + y + "," + z + "}");
        }
      }
    }
    int[] limits = {0, build.getHeight(), build.getLength()};
    int[] order = {2,1,0};
    int[] starts = {build.getWidth(), 0, 0};
    int[] steps = {-1, 1, 1};
    testNDS(new NDimensionalStepper(limits, order, starts, steps));
  }

  private void testNDS(NDimensionalStepper nds) {
    System.out.println("--nds--");
    do {
      System.out.println(nds);
    } while (nds.step());
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:51:37.837

您的“东西”可能会访问 x、y 和 z 的值，因此您进行硬编码的方式可能是最容易遵循的。您的方法名称可以清楚地表明顺序。对于您提供的三个示例，它看起来类似于：

```
public void somethingXYZ(Build build, Stuff stuff) {...}
public void somethingZYX(Build build, Stuff stuff) {...}
public void somethingXnYZ(Build build, Stuff stuff) {...} 
```

当您正在编码并想要选择其中一种方法时，您的 IDE 甚至会通过列出该类的可用选项来帮助您。我认为你组织它的方式已经很好了。

# java - 如何运行使用 intellij 12 创建的 jar 文件

> ID：15724091
> 
> 赞同：12
> 
> 时间：2013-03-30T22:13:13.030
> 
> 标签：java, macos, jar, intellij-idea

我在 MAC OS X 10.8.3 上使用 Intellij IDEA 12.0.4 创建一个 jar 文件。

我转到文件->项目结构->工件-> + -> Jar->从具有依赖项的模块->浏览后选择的主类->选择提取到目标jar->自动填充META-INF的目录-> OK -> Apply -> OK -> Build -> Build Artifacts -> Build

现在，如果我尝试使用以下命令运行 jar：

```
java -jar path_to_jar/jar_file 
```

我收到这个错误

> 没有主要清单属性，在 path_to_jar/jar_file
> $ java -version
> java version "1.7.0_17"
> Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
> Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01) ， 混合模式）

任何指针，我做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-14T16:50:21.003

要解决此问题，请做两件事：

将 META-INF 移动到 src/main/resources

然后：文件->打开模块设置

选择工件，删除当前的并创建一个新的，但这一次，不要选择“提取到目标 jar”，而是选择“复制到输出目录并通过清单链接”

对于 META-INF 的路径，请将您复制 META-INF 的资源目录的路径放在上面。

现在构建你的工件

我是终端，转到已生成 jar 的目录并运行：

java -jar yourjarfile.jar

玩得开心

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-16T15:53:38.697

就我而言，这是因为 IntelliJ 将所有依赖项提取到输出 jar 中，最终`/META-INF/MANIFEST.MF`用我包含的依赖项之一中的某些内容覆盖了文件。

我必须打开 jar 并`MANIFEST.MF`从“Manifest File”属性中指示的位置复制实际，该属性在“项目结构”下的该工件页面中自动设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T22:17:52.547

您需要为您的 jar 选择“主”类以使其*可执行*（即您应该在包含的类上指向 IDEA`public static void main(String[] args)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T11:43:04.933

在我的情况下，我选择 File -> Project Structure -> Artifacts -> + -> Jar -> From modules with dependencies -> Selected Main Class after browser -> copy to the output directory and link via manifest（解压到目标 Jar 不是为我工作） -> 浏览 /META-INF/MANIFEST.MF-> OK -> Apply -> OK -> Build -> Build Artifacts -> Build 后选择您的项目资源文件夹

我的想法版本是 IntelliJ IDEA 2018.2 (Ultimate version)[我从这里读到的](https://www.cnblogs.com/qifengshi/p/6036870.html)。这个对我有用。

# php - MYSQL 更改后查询未执行

> ID：15724092
> 
> 赞同：-1
> 
> 时间：2013-03-30T22:13:17.687
> 
> 标签：php, mysql

```
if(empty($Errormessage))
            {
                    if(move_uploaded_file($File_Tmp,"product_images/".$File_Name))
                    {
                        //To Rename the uploaded file
                        $Random=rand()*1200;
                        $File_New_Name=$Random.".".$File_Extension;
                        rename("product_images/".$File_Name,"product_images/".$File_New_Name);  
                        $Date_Added=date("d-m-Y");
                        $Query="INSERT INTO products (pro_id,product_name,price,details,product_picture,date_added,last_edited,cat_id) VALUES ('','$Product_Name','$Product_Price','$Product_Details','$File_New_Name','$Date_Added','','$Category')";
                        $Result=mysql_query($Query);
                    if($Result)
                        {
                            header ("location: addsuccess.php");
                        }

                    }
            } 
```

//类别

```
<td><select name="category" size="1" id="select">
      <option value="Null">Select Category</option>
      <?php
      $Select=mysql_query("SELECT * FROM category");
      while ($Row=mysql_fetch_array($Select))
      { 
            $Cat_Id=$Row['cat_id'];
            $Category_Name=$Row['category_name'];
      ?>
        <option value="$Cat_Id"><?php echo $Category_Name; ?></option>
      <?php } ?>
    </select></td> 
```

//验证

```
if($Category=="Null")
        {
            $Errormessage[]="Category should be selected";
        } 
```

cat_id 是我的产品表中的 FK 列...而且 cat_id 是类别表中的主键...因为我将此 cat_id 设为 FK 实际上我复制粘贴了 alter table 添加列 fk 等的语法等...它不是让我保存我的记录......我通过传递虚拟值直接在我的管理员上尝试了它......它正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:26:23.700

尝试：

```
$Query="INSERT INTO products (pro_id, product_name,price,details,product_picture,date_added,last_edited,cat_id) VALUES (NULL,'$Product_Name','$Product_Price','$Product_Details','$File_New_Name','$Date_Added','',$Category)"; 
```

NULL 而不是 '' 可能会解决您的问题。$Category 现在也没有**撇号**，因为 db-column cat_id 是一个数字而不是一个字符串。（数字不应使用撇号处理）。

```
$Category=mysql_real_escape_string($_POST['category']); 
```

（您试图转义一个**字符串**，但 $_POST['category'] 是一个**数字**），所以这不是正确的做法）。

It should be something like:

```
if (isset($_POST['category'])) {
   $Category = $_POST['category'];
}
else {
   $Category = 0;
} 
```

Also change:

```
 ?>
    <option value="$Cat_Id"><?php echo $Category_Name; ?></option>
  <?php } ?> 
```

TO

```
 ?>
    <option value="<?php echo $Cat_Id;?>"><?php echo $Category_Name; ?></option>
  <?php } ?> 
```

It's also strongly recommended to use PDO or Mysqli. It will save a lot of time and problems for the future. mysql-functions like mysql_query is deprecated and is going to be removed in future releases of php.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:33:37.267

So that's the error. There is mistake on your cat_id reference. Check the db constraints. $Category is INSERTED mistakenly. E.g. If cat_id is connected with an other table, you cannot insert it with $Category.

# python - “python setup.py install”和“pip install”之间的区别

> ID：15724093
> 
> 赞同：138
> 
> 时间：2013-03-30T22:13:23.463
> 
> 标签：python, virtualenv, pip, setup.py

我有一个外部包，我想从 tar 文件安装到我的 python virtualenv 中。安装软件包的最佳方法是什么？

我发现了两种方法可以做到这一点：

1.  提取 tar 文件，然后`python setup.py install`在提取的目录中运行。
2.  `pip install packagename.tar.gz`[来自https://pip.pypa.io/en/stable/reference/pip_install/#examples](https://pip.pypa.io/en/stable/reference/pip_install/#examples)中的示例 7

以这两种方式做它们是否有任何区别。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-03-31T16:09:47.003

从表面上看，两者都在做同样的事情：要么做要么`python setup.py install`会`pip install <PACKAGE-NAME>`为你安装你的 python 包，用最少的麻烦。

但是，使用 pip 提供了一些额外的优势，使其更好用。

*   pip 会自动为你下载一个包的所有依赖项。相比之下，如果使用`setup.py`，则经常需要手动搜索并下载依赖项，这既繁琐又令人沮丧。
*   pip 跟踪各种元数据，使您可以使用单个命令轻松卸载和更新包：`pip uninstall <PACKAGE-NAME>`和`pip install --upgrade <PACKAGE-NAME>`. 相反，如果您使用 安装包`setup.py`，如果您想摆脱它，则必须手动删除和维护包，这可能容易出错。
*   您不再需要手动下载文件。如果你使用`setup.py`，你必须访问该库的网站，找出在哪里下载它，解压文件，运行`setup.py`......相反，pip 将自动搜索[Python 包索引](https://pypi.python.org/pypi)（PyPi）以查看包是否存在于那里，并且将自动为您下载、解压和安装该软件包。除了少数例外，几乎每一个真正有用的 Python 库都可以在 PyPi 上找到。
*   pip 将让您[轻松安装](https://stackoverflow.com/q/27885397/646543)轮子，这是 Python 分发的新标准。[有关车轮的更多信息](http://pythonwheels.com/)。
*   pip 提供了与 using 很好地集成的额外好处，`virtualenv`该程序允许您在计算机上运行多个需要冲突库和 Python 版本的项目。[更多信息](http://www.dabapps.com/blog/introduction-to-pip-and-virtualenv-python/)。
*   从 Python 2.x 系列的 Python 2.7.9 和 Python 3.x 系列的 Python 3.4.0 开始，pip 默认与 Python 捆绑在一起，使其更易于使用。

所以基本上，使用 pip。它仅提供对使用的改进`python setup.py install`。

* * *

如果您使用的是旧版本的 Python，无法升级，并且没有安装 pip，您可以在以下链接中找到有关安装 pip 的更多信息：

*   [为所有操作系统安装 pip 的官方说明](https://pip.pypa.io/en/latest/installing.html)
*   [Windows 上安装 pip 的说明（包括常见问题的解决方案）](https://stackoverflow.com/q/4750806/646543)
*   [Mac OX 安装 pip 说明](https://stackoverflow.com/q/17271319/646543)

pip 本身并不需要教程。90% 的情况下，您真正​​需要的唯一命令是`pip install <PACKAGE-NAME>`. 也就是说，如果您有兴趣了解更多关于您可以使用 pip 做什么的详细信息，请参阅：

*   [快速入门指南](https://pip.pypa.io/en/stable/quickstart.html)
*   [官方文档](https://pip.pypa.io/en/stable/)。

通常还建议您将 pip 和 virtualenv 一起使用。如果你是 Python 的初学者，我个人认为从使用 pip 开始并在全局范围内安装包是可以的，但最终我确实认为你应该在处理更严肃的项目时过渡到使用 virtualenv。

如果您想了解更多关于同时使用 pip 和 virtualenv 的信息，请参阅：

*   [为什么你应该使用 pip 和 virtualenv](https://www.davidfischer.name/2010/04/why-you-should-be-using-pip-and-virtualenv/)
*   [Python 初学者对 Pip 和 Virtualenv 的非魔法介绍](http://www.dabapps.com/blog/introduction-to-pip-and-virtualenv-python/)
*   [虚拟环境](http://docs.python-guide.org/en/latest/dev/virtualenvs/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-31T18:20:12.577

`python setup.py install`是 make install 的类比：它是一种将文件编译和复制到目标目录的有限方法。这并不意味着它是在您的系统上真正安装软件的最佳方式。

`pip`是一个包管理器，它可以安装、升级、列出和卸载包，就像熟悉的包管理器包括：`dpkg, apt, yum, urpmi, ports`等等。在后台，它会运行`python setup.py install`，但有特定的选项来控制最终安装的方式和位置。

总结：使用`pip`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-19T21:25:08.710

问题是关于安装包含 python 包***的本地 tarball 的首选方法*****，而不是**关于将包上传到 PyPi 等索引服务的优势。

As lest I know some software distributor does not upload their package to PyPi, instead asking developers to download package from their website and install.

> python setup.py install

This can work but not recommended. It's not necessary to unwrap the tarball file and go into it to run setup.py file.

> pip install ../path/to/packagename.tar.gz

This is the way designed and preferred. Concise and align with PyPi-style packages.

More information about `pip install` can be found here: [https://pip.readthedocs.io/en/stable/reference/pip_install/](https://pip.readthedocs.io/en/stable/reference/pip_install/)

# jquery - 悬停在li类时如何保持jquery下拉菜单打开

> ID：15724097
> 
> 赞同：0
> 
> 时间：2013-03-30T22:13:43.703
> 
> 标签：jquery, html, css

菜单 ul 类将在顶部拉伸全宽，当悬停 li 类时，它会触发下拉内容打开。当您的鼠标仍在 "ul" 中时，我想保持最后一个 li 悬停的放置内容，并且只有当您的鼠标完全离开菜单时才隐藏内容。jsFiddle 设置，蓝色 bg 字段是“ul”类我希望当你的鼠标仍然存在时最后一个内容保持打开状态。

[http://jsfiddle.net/R7aTq/150/](http://jsfiddle.net/R7aTq/150/)

```
(function($){

  $.fn.naviDropDown = function(options) {  

    //set up default options 
    var defaults = { 
        dropDownClass: 'dropdown', //the class name for your drop down
        dropDownWidth: 'auto',  //the default width of drop down elements
        slideDownEasing: 'easeInOutCirc', //easing method for slideDown
        slideUpEasing: 'easeInOutCirc', //easing method for slideUp
        slideDownDuration: 500, //easing duration for slideDown
        slideUpDuration: 500, //easing duration for slideUp
        orientation: 'horizontal' //orientation - either 'horizontal' or 'vertical'
    }; 

    var opts = $.extend({}, defaults, options);     

    return this.each(function() {  
      var $this = $(this);
      $this.find('.'+opts.dropDownClass).css('width', opts.dropDownWidth).css('display', 'none');

      var buttonWidth = $this.find('.'+opts.dropDownClass).parent().width() + 'px';
      var buttonHeight = $this.find('.'+opts.dropDownClass).parent().height() + 'px';
      if(opts.orientation == 'horizontal') {
        $this.find('.'+opts.dropDownClass).css('left', '0px').css('top', buttonHeight);
      }
      if(opts.orientation == 'vertical') {
        $this.find('.'+opts.dropDownClass).css('left', buttonWidth).css('top', '0px');
      }

      $this.find('li').hoverIntent(getDropDown, hideDropDown);
    });

    function getDropDown(){
        activeNav = $(this);
        showDropDown();
    }

    function showDropDown(){
        activeNav.find('.'+opts.dropDownClass).slideDown({duration:opts.slideDownDuration, easing:opts.slideDownEasing});
    }

    function hideDropDown(){
        activeNav.find('.'+opts.dropDownClass).slideUp({duration:opts.slideUpDuration, easing:opts.slideUpEasing});//hides the current dropdown
    }

  };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:52:49.057

尝试单独`hoverIntent()`检查`ul`。这样，您将能够控制下拉菜单的`li`激活和`ul`. 您需要有一个适当范围的变量来跟踪活动的导航项。

这是一个更新的 jsFiddle：http: [//jsfiddle.net/R7aTq/170/](http://jsfiddle.net/R7aTq/170/)

我将插件代码移到了 JS 部分。您可以看到我添加了另一个`hoverIntent()`调用并更新了下拉函数以在打开新下拉列表时处理关闭现有下拉列表。看看这是否适合你。

# cakephp - CSS文件的相对路径？

> ID：15724099
> 
> 赞同：1
> 
> 时间：2013-03-30T22:13:51.827
> 
> 标签：cakephp

有没有办法让 CakePHP 的 css 方法发出相对于当前文档的路径？

即，使用此代码：

```
$this->Html->css('tutorial'); 
```

而不是生成

```
<link rel="stylesheet" type="text/css" href="/Tutorial/css/tutorial.css" /> 
```

相反，它会产生类似的东西

```
<link rel="stylesheet" type="text/css" href="../../css/tutorial.css" /> 
```

我知道这很愚蠢，但我正在寻找可以使用 wget 检索，然后离线查看的东西。我已经告诉 CakePHP 处理 .html 扩展名（使用 Router::parseExtensions('html');），然后设置到控制器/动作的路由，看起来像静态 HTML 文件的目录结构。我正在寻找一种生成与页面相关的 URL 的方法，这样当我保存文件（使用 wget）时，它们在从硬盘驱动器读取时仍然可以工作。

**正如 thaJeztah 在下面指出的**，这在 CakePHP 中是不可能的。因为 CakePHP 将 URL 抽象地映射到控制器和动作，它实际上不再有任何“提供文件”的概念（除了在 /pages/subdirs 等中），所以对 CakePHP 唯一有意义的是提供一个 URL从根目录开始，一直到 .CSS 文件。（非常感谢 thaJeztah 指出这一点！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:25:43.290

从[API](http://api.cakephp.org/2.0/class-HtmlHelper.html#method-HtmlHelpercss)

> 如果 $path 以 '/' 为前缀，则路径将相对于应用程序的 webroot。否则，路径将相对于您的 CSS 路径

所以你可以用 a 开始路径，`/`然后从那里指向，这样你就不需要在目录中倒退。

感谢[这个答案](https://stackoverflow.com/questions/14370159/cakephp-how-to-link-html-css-helper-to-a-different-folder)指出这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:11:13.840

As a side-note, you can actually get a copy of a website using the "wget" command. (There's even a nice "Visual WGet" for Windows, which presents a friendly GUI for all the command line options). wget will download all the files and (if you use the -k / --convert-links option) will fix up all the links to be relative (to each document) so that they work offline.

It's important to **wait till wget completely finishes**, as wget does this weird two-phase thing where it FIRST gets all the files and THEN goes back and fixes up the links

# css - Center my navbar

> ID：15724107
> 
> 赞同：1
> 
> 时间：2013-03-30T22:14:27.660
> 
> 标签：css, twitter-bootstrap

So what I'm trying to do is have my navbar automatically center to anything that's in it.

What I want is:

*   Logo all the way on the left (pulled left)
*   Button all the way on the right (pulled right)
*   Search bar directly in the center of the navbar

What I've been having problems with is that the button can have different width (because it's a button where your username is displayed) and this moves the search bar I have making it not centered.

Here's my current code:

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#"><img src="./assets/img/test_logo.png" /></a>
        <div class="nav-collapse collapse">
          <div class="span4 offset1">
            <form class="navbar-form pull-right">
              <div class="input-append">
                <input class="span4" id="appendedInputButton" type="text" placeholder="Search...">
                <button class="btn" type="button"><i class="icon-search"></i></button>
              </div>
            </form>
          </div>
          <ul class="nav pull-right">
            <a class="button btn-active" href="" style="margin-top:5px" ><span><i class="icon-user"></i> Sign In</span></a>
          </ul>
        </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

**Note:** The width of the navbar should be 883px. The rest of the CSS should be Bootstrap's default.

Please help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:28:59.803

It should work as you've described, but that isn't what your code reflects.

Add `pull-left` to the `<a>` with the logo so it floats left. Get rid of `pull-right` from the `<form>` so it's not floating. Make sure both floating elements (the `<a>` and `<ul>` are defined *before* the `<form>`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:40:06.547

you could float the elements, adjust the width. like in this example [http://jsfiddle.net/kevinPHPkevin/smWBZ/](http://jsfiddle.net/kevinPHPkevin/smWBZ/)

```
.logo {
    float:left;
} 
```

# windows - Windows programmers, is it a good habit to install to C:\Windows?

> ID：15724110
> 
> 赞同：3
> 
> 时间：2013-03-30T22:15:03.860
> 
> 标签：windows, unix, installation

I primarily develop on Linux where there is /usr/bin and /bin directories. I know that Windows does not have any real equivalent of either of these besides C:\Windows and C:\Windows\System32\. Many command line programs that I port to windows, I simply will write an installer that will copy them to C:\Windows, because I do not feel like having to set a PATH variable. I know that the proper way is to set a PATH variable, but to me C:\Windows is == to /usr/bin. What do Windows programmers have to think about this? Is this a good habit, is there any real disadvantages, and should I actually install to Programs Files and set a path variable via the registry instead?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:23:40.073

Install to Program Files (or even the user's AppData folder for user-specific installs), and provide an *option* to add the directory to `%PATH%`.

Installing to Program Files has a number of advantages:

*   Won't conflict with any other files that happen to be in C:\Windows
*   Won't override some other tool already on the user's PATH
*   Makes the components of your program more obvious, instead of a random scattering of files in C:\Windows
*   Avoids dependency conflicts (DLL hell) if you need to include your own DLLs

Giving users the option to add to `%PATH%` allows users to skip that step if they run into some other kind of conflict with your app (which is less likely with Program Files, but still possible). If you installed into C:\Windows, you'd have no way to avoid such conflicts.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:18:34.020

You should install applications to the proper Program Files directory, generally; there are exceptions though. And there are numerous [Environment Variables](http://technet.microsoft.com/en-us/library/cc749104%28v=ws.10%29.aspx) already set for numerous paths on Windows, `%PROGRAMFILES%` being one of them (and `%PROGRAMFILES(X86)%` being another, hence 'appropriate' path).

# python - How can I get the response body from pycurl multi curl requests

> ID：15724117
> 
> 赞同：2
> 
> 时间：2013-03-30T22:15:26.397
> 
> 标签：python, python-2.7, pycurl, stringio

I am unable to get anything but empty responses when performing curl multi requests. No exceptions are thrown, but the response value has no content (commented in the below snippet)

Here's a simplified version of my code:

```
from StringIO import StringIO

import pycurl

class CurlStream(object):
    curl_count = 0
    curl_storage = []

    def __init__(self):
        self.curl_multi = pycurl.CurlMulti()

    def add_request(self, request, post_fields=None):
        self.curl_count += 1
        curl = self._create_curl(request, post_fields)
        self.curl_multi.add_handle(curl)

    def perform(self):
        while self.curl_count:
            while True:
                response, self.curl_count = self.curl_multi.perform()
                if response != pycurl.E_CALL_MULTI_PERFORM:
                    break
            self.curl_multi.select(1.0)

    def read_all(self):
        for response in self.curl_storage:
            print response.getvalue() # this does nothing --prints blank lines

    def close(self):
        self.curl_multi.close()

    def _create_curl(self, request, post_fields):
        curl = pycurl.Curl()
        output = StringIO()
        self.curl_storage.append(output)
        curl.setopt(curl.URL, request)
        curl.setopt(curl.WRITEFUNCTION, output.write)
        curl.setopt(curl.TIMEOUT, 20)
        return curl

def main():
    curl_stream = CurlStream()
    curl_stream.add_request('http://www.google.com')
    curl_stream.add_request('http://www.example.com')
    curl_stream.perform()
    curl_stream.read_all()
    curl_stream.close()

if __name__ == '__main__':
    main() 
```

I have made single requests with the same options without using curl multi and it works.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:39:58.763

Okay, so I found it worked when I changed the `_create_curl` method to this (adding `write_out` for debugging):

```
def _create_curl(self, request, post_fields):
    curl = pycurl.Curl()
    curl.setopt(curl.URL, request)
    curl.setopt(curl.WRITEFUNCTION, self.write_out)
    curl.setopt(curl.TIMEOUT, 20)

    # Below is the important bit, I am now adding each curl object to a list
    self.curl_storage.append(curl)
    return curl

def write_out(self, data):
        print data
        return len(data) 
```

The issue was when adding the curl object to the multicurl object, I hadn't kept any reference to the single curl object, so it was automagically closed.

According to the [pycurl docs](http://pycurl.sourceforge.net/doc/curlobject.html) for the curl close() method:

> Corresponds to curl_easy_cleanup in libcurl. This method is automatically called by pycurl when a Curl object no longer has any references to it, but can also be called explicitly.

# php - 通过 ajax 运行 php 脚本，但前提是它尚未运行

> ID：15724120
> 
> 赞同：12
> 
> 时间：2013-03-30T22:15:42.733
> 
> 标签：php, background-process

我的意图是这样的。

我的client.html 通过ajax 调用一个php 脚本check.php。我想让 check.php 检查另一个脚本 task.php 是否已经在运行。如果是，我什么都不做。如果不是，我需要在后台运行它。

我有一个想法，我想做什么，但不确定如何去做。

A 部分。我知道如何通过 ajax 调用 check.php。

B 部分。在 check.php 中，我可能需要运行 task.php。我想我需要类似的东西：

```
$PID = shell_exec("php task.php > /dev/null & echo $!"); 
```

我认为 "> /dev/null &" 位告诉它在后台运行，但不确定 "$!" 是什么 做。

C 部分。我需要的 $PID 作为进程的标记。我需要将此数字（或其他）写入同一目录中的文件，并且需要在每次调用 check.php 时读取它。我不知道该怎么做。有人可以给我一个链接，说明如何在同一目录中读取/写入具有单个数字的文件吗？

D部分。然后检查上次启动的task.php是否仍在运行，我将使用该函数：

```
function is_process_running($PID)
{
   exec("ps $PID", $ProcessState);
   return(count($ProcessState) >= 2);
} 
```

我认为这就是我需要的所有部分，但正如你所看到的，我不确定如何做其中的一些。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-30T22:21:34.193

我会使用一个[`flock()`](http://www.php.net/manual/en/function.flock.php)基于机制来确保`task.php`它只运行一次。

使用这样的代码：

```
<?php

$fd = fopen('lock.file', 'w+');

// try to get an exclusive lock. LOCK_NB let the operation not blocking
// if a process instance is already running. In this case, the else 
// block will being entered.
if(flock($fd, LOCK_EX | LOCK_NB )) {
    // run your code
    sleep(10);
    // ...
    flock($fd, LOCK_UN);
} else {
    echo 'already running';
}

fclose($fd); 
```

另请注意`flock()`，正如 PHP 文档所指出的那样，可在所有支持的操作系统上移植。

* * *

```
!$ 
```

为您提供 bash 中最后执行的程序的 pid。像这样：

```
command &
pid=$!
echo pid 
```

请注意，您必须确保您的 php 代码在支持 bash 的系统上运行。（不是窗户）

* * *

*更新*（在揭幕战评论后）。

`flock()`将适用于所有操作系统（正如我所提到的）。我在使用 Windows 时在您的代码中看到的问题是`!$`（正如我提到的；）..

要获取 task.php 的 pid，您应该使用[`proc_open()`](http://www.php.net/manual/en/function.proc-open.php)启动 task.php。我准备了两个示例脚本：

*任务.php*

```
$fd = fopen('lock.file', 'w+');

// try to get an exclusive lock. LOCK_NB let the operation not blocking
// if a process instance is already running. In this case, the else 
// block will being entered.
if(flock($fd, LOCK_EX | LOCK_NB )) {
    // your task's code comes here
    sleep(10);
    // ...
    flock($fd, LOCK_UN);
    echo 'success';
    $exitcode = 0;
} else {
    echo 'already running';
    // return 2 to let check.php know about that
    // task.php is already running
    $exitcode = 2; 
}

fclose($fd);

exit($exitcode); 
```

*检查.php*

```
$cmd = 'php task.php';
$descriptorspec = array(
   0 => array('pipe', 'r'),  // STDIN 
   1 => array('pipe', 'w'),  // STDOUT
   2 => array('pipe', 'w')   // STDERR
);

$pipes = array(); // will be set by proc_open()

// start task.php
$process = proc_open($cmd, $descriptorspec, $pipes);

if(!is_resource($process)) {
    die('failed to start task.php');
}

// get output (stdout and stderr)
$output = stream_get_contents($pipes[1]);
$errors = stream_get_contents($pipes[2]);

do {
    // get the pid of the child process and it's exit code
    $status = proc_get_status($process);
} while($status['running'] !== FALSE);

// close the process
proc_close($process);

// get pid and exitcode
$pid = $status['pid'];
$exitcode = $status['exitcode'];

// handle exit code
switch($exitcode) {
    case 0:
        echo 'Task.php has been executed with PID: ' . $pid
           . '. The output was: ' . $output;
        break;
    case 1:
        echo 'Task.php has been executed with errors: ' . $output;
        break;
    case 2:
        echo 'Cannot execute task.php. Another instance is running';
        break;
    default:
        echo 'Unknown error: ' . $stdout;
} 
```

你问我*为什么我的 flock()*解决方案是最好的。这只是因为另一个答案不能可靠地确保`task.php`运行一次。这是因为我在该答案下方的评论中提到的竞争条件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T22:22:38.723

您可以使用锁定文件来实现它：

```
if(is_file(__DIR__.'/work.lock'))
{
    die('Script already run.');
}
else
{
    file_put_contents(__DIR__.'/work.lock', '');
    // YOUR CODE
    unlink(__DIR__.'/work.lock');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-16T17:21:00.517

可惜在被接受之前我没有看到这个..

我写了一个类来做到这一点。（使用文件锁定）和 PID，进程 ID 检查，在 Windows 和 Linux 上。

[https://github.com/ArtisticPhoenix/MISC/blob/master/ProcLock.php](https://github.com/ArtisticPhoenix/MISC/blob/master/ProcLock.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-13T08:59:54.957

我认为您在所有流程和背景调查方面确实做得过火了。如果您运行`PHP`脚本`without a session`，那么您实际上已经在后台运行它。因为它不会阻止来自用户的任何其他请求。所以确保你不打电话`session_start();`

然后下一步就是在用户取消请求时运行它，这是`PHP`. [忽略用户中止](http://php.net/manual/en/function.ignore-user-abort.php)

最后的检查是确保它只运行一次，这可以通过创建文件轻松完成，因为`PHP`没有简单的应用程序范围。

结合：

```
<?php
// Ignore user aborts and allow the script
// to run forever
ignore_user_abort(true);
set_time_limit(0);

$checkfile = "./runningtask.tmp";

//LOCK_EX basicaly uses flock() to prevents racecondition in regards to a regular file open.
if(file_put_contents($checkfile, "running", LOCK_EX)===false) {
    exit();
}

function Cleanup() {
  global $checkfile;
  unlink($checkfile);
}

/*
actual code for task.php    
*/

//run cleanup when your done, make sure you also call it if you exit the code anywhere else
Cleanup();
?> 
```

在您的 javascript 中，您现在可以直接调用 task.php 并在与服务器建立连接后取消请求。

```
<script>
function Request(url){
  if (window.XMLHttpRequest) { // Mozilla, Safari, ...
      httpRequest = new XMLHttpRequest();
  } else if (window.ActiveXObject) { // IE
      httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
  } else{
      return false;
  }
  httpRequest.onreadystatechange = function(){
      if (httpRequest.readyState == 1) {
        //task started, exit
        httpRequest.abort();
      }
  };
  httpRequest.open('GET', url, true);
  httpRequest.send(null);
}

//call Request("task.php"); whenever you want.
</script> 
```

加分项：您可以让 task.php 的实际代码编写偶尔的更新以`$checkfile`了解正在发生的事情。然后你可以让另一个 ajax 文件读取内容并向用户显示状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-14T01:39:31.427

让从B到D的整个过程变得简单

**步骤 BD：**

```
$rslt =array(); // output from first exec
$output = array(); // output of task.php execution

//Check if any process by the name 'task.php' is running
exec("ps -auxf | grep 'task.php' | grep -v 'grep'",$rslt);

if(count($rslt)==0) // if none,
  exec('php task.php',$output); // run the task, 
```

解释：

```
ps -auxf        --> gets all running processes with details 
grep 'task.php' --> filter the process by 'task.php' keyword
grep -v 'grep'  --> filters the grep process out 
```

注意：

1.  建议在 task.php 文件中进行相同的检查。

2.  如果task.php直接通过httpd（webserver）执行，只会显示为httpd进程，不能被'ps'命令识别

3.  它在负载平衡的环境下不起作用。[编辑：2017 年 7 月 17 日]

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-17T16:21:05.463

# 您可以在脚本运行期间获得脚本本身的独占锁定

一旦调用 lock() 函数，任何其他运行它的尝试都将结束。

```
//try to set a global exclusive lock on the file invoking this function and die if not successful
function lock(){
  $file = isset($_SERVER['SCRIPT_FILENAME'])?
    realpath($_SERVER['SCRIPT_FILENAME']):
    (isset($_SERVER['PHP_SELF'])?realpath($_SERVER['PHP_SELF']):false);
  if($file && file_exists($file)){
    //global handle stays alive for the duration if this script running
    global $$file;
    if(!isset($$file)){$$file = fopen($file,'r');}
    if(!flock($$file, LOCK_EX|LOCK_NB)){
        echo 'This script is already running.'."\n";
        die;
    }
  }
} 
```

### 测试

在一个 shell 中运行它，并在等待输入时尝试在另一个 shell 中运行它。

```
lock();

//this will pause execution until an you press enter
echo '...continue? [enter]';
$handle = fopen("php://stdin","r");
$line = fgets($handle);
fclose($handle); 
```

# c++ - 如何解决此舍入错误？

> ID：15724123
> 
> 赞同：0
> 
> 时间：2013-03-30T22:16:05.727
> 
> 标签：c++, floating-point, numerical-stability

为长代码道歉。这是我所能减少的。

```
#include <QtGui/QApplication>
#include <QtGui/QWidget>
#include <QtGui/QImage>
#include <QtGui/QPainter>

#include <vector>
using namespace std;

class View : public QWidget {

  typedef pair<double, double> Point;

  unsigned char* _buffer;
  double centerx, centery, scale;
  double xmin, xmax, ymin, ymax;
  double xprec, yprec;
  double xratio, yratio;
  double fwidth, fheight;
  double xlen, ylen;
  int width;
  int height;

public:
  View(int w, int h) : width(w), height(h) {

    _buffer = new unsigned char[4 * w * h];

    fwidth = static_cast<double>(width);
    fheight = static_cast<double>(height);
    double aspectRatio = fwidth / fheight;

    centerx = 0;
    centery = 0;
    scale = 2.3;
    xlen = aspectRatio * scale;
    ylen = 1.0 * scale;

    xmin = -(xlen * 0.5) + centerx;
    xmax = -xmin;
    ymin = -(ylen * 0.5) + centery;
    ymax = -ymin;

    xprec = xlen / fwidth;
    yprec = ylen / fheight;
    xratio = fwidth / scale / aspectRatio;
    yratio = fheight / scale;
  }

  double roundX(double x) { return std::floor(x / xprec) * xprec; }
  double roundY(double y) { return std::floor(y / yprec) * yprec; }

protected:
  void paintEvent(QPaintEvent* event) {
    QPainter painter(this);
    render();
    painter.drawImage(
      QPoint(0, 0),
      QImage(_buffer, width, height, QImage::Format_RGB32));
  }

private:
  void render() {
    memset(_buffer, 0, 4 * width * height);
    for (double i = xmin; i < xmax; i += xprec) {
      for (double j = ymin; j < ymax; j += yprec) {
        Point p(roundX(i), roundY(j));
        int x = static_cast<int>((p.first * xratio) - (xmin * xratio) );
        int y = static_cast<int>((p.second * yratio) - (ymin * yratio) );
        _buffer[4 * (x * width + y)    ] = 255;
        _buffer[4 * (x * width + y) + 1] = 255;
        _buffer[4 * (x * width + y) + 2] = 255;
      }
    }
  }
};

int main(int argc, char* argv[])
{
  QApplication app(argc, argv);
  View view(512, 512);
  view.show();
  return app.exec();
} 
```

该代码不是产生一个白色窗口，而是产生一个带有线条的白色窗口，这是舍入误差的结果。我认为问题的根源是`roundX()`和`roundY()`功能，但我不确定。我也不知道如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:03:46.603

我没有 Qt，我更喜欢 C。所以，下面是一个 C 程序，它模仿你的`render()`in`render1()`并在`render2()`.

您的主要问题`render()`是它使用了`Point p(roundX(i), roundY(j));`. 如果您使用未舍入的`i`and `j`，情况会显着改善，但您仍然会遭受加法、乘法等的舍入误差。

但是这些舍入误差并不大，最终也不会累积成很大的误差。所以，最后的修正是在`.5`转换为整数之前加上`x`和`y`。没有它，浮点值可能会略小于您想要获得的最接近的整数，当您将其转换`double`为时`int`，您会得到一个小一的值。

```
#include <stdio.h>
#include <string.h>
#include <math.h>

double centerx, centery, scale;
double xmin, xmax, ymin, ymax;
double xprec, yprec;
double xratio, yratio;
double fwidth, fheight;
double xlen, ylen;
int width;
int height;

void InitView(int w, int h)
{
  double aspectRatio;

  width = w; height = h;
  // _buffer = new unsigned char[4 * w * h];

  fwidth = width;
  fheight = height;
  aspectRatio = fwidth / fheight;

  centerx = 0;
  centery = 0;
  scale = 2.3;
  xlen = aspectRatio * scale;
  ylen = 1.0 * scale;

  xmin = -(xlen * 0.5) + centerx;
  xmax = -xmin;
  ymin = -(ylen * 0.5) + centery;
  ymax = -ymin;

  xprec = xlen / fwidth;
  yprec = ylen / fheight;
  xratio = fwidth / scale / aspectRatio;
  yratio = fheight / scale;
}

double roundX(double x) { return floor(x / xprec) * xprec; }
double roundY(double y) { return floor(y / yprec) * yprec; }

void render1(void)
{
  double i, j;
  int cnt;
  char usedx[1 + 512 + 1];
  char usedy[1 + 512 + 1];

  printf("render1():\n");
  memset(usedx, 0, sizeof usedx);
  memset(usedy, 0, sizeof usedy);

  printf("x's:\n");
  for (cnt = 0, i = xmin; i < xmax; i += xprec)
  {
    int x = ((roundX(i) * xratio) - (xmin * xratio));
    printf("%d ", x);
    cnt++;
    usedx[1 + x] = 1;
  }
  printf("\ncount: %d\n", cnt);
  for (cnt = 1; cnt <= 512; cnt++)
    if (!usedx[cnt])
      printf("missing x: %d\n", cnt - 1);

  printf("y's:\n");
  for (cnt = 0, j = ymin; j < ymax; j += yprec)
  {
    int y = ((roundY(j) * yratio) - (ymin * yratio));
    printf("%d ", y);
    cnt++;
    usedy[1 + y] = 1;
  }
  printf("\ncount: %d\n", cnt);
  for (cnt = 1; cnt <= 512; cnt++)
    if (!usedy[cnt])
      printf("missing y: %d\n", cnt - 1);
}

void render2(void)
{
  double i, j;
  int cnt;
  char usedx[1 + 512 + 1];
  char usedy[1 + 512 + 1];

  printf("render2():\n");
  memset(usedx, 0, sizeof usedx);
  memset(usedy, 0, sizeof usedy);

  printf("x's:\n");
  for (cnt = 0, i = xmin; i < xmax; i += xprec)
  {
    int x = ((i * xratio) - (xmin * xratio) + .5);
    printf("%d ", x);
    cnt++;
    usedx[1 + x] = 1;
  }
  printf("\ncount: %d\n", cnt);
  for (cnt = 1; cnt <= 512; cnt++)
    if (!usedx[cnt])
      printf("missing x: %d\n", cnt - 1);

  printf("y's:\n");
  for (cnt = 0, j = ymin; j < ymax; j += yprec)
  {
    int y = ((j * yratio) - (ymin * yratio) + .5);
    printf("%d ", y);
    cnt++;
    usedy[1 + y] = 1;
  }
  printf("\ncount: %d\n", cnt);
  for (cnt = 1; cnt <= 512; cnt++)
    if (!usedy[cnt])
      printf("missing y: %d\n", cnt - 1);
}

int main(void)
{
  InitView(512, 512);
  render1();
  render2();
  return 0;
} 
```

输出（[ideone](http://ideone.com/JNJTYX)）：

```
render1():
x's:
0 0 0 2 2 4 5 5 7 7 9 10 10 12 12 14 15 15 17 17 19 20 20 22 22 24 25 25 27 27 29 30 30 32 32 33 35 36 36 37 38 40 41 41 42 43 45 46 46 47 48 50 51 51 52 54 55 56 56 57 59 60 61 61 62 64 65 66 66 67 69 70 71 71 72 74 75 76 76 77 79 80 81 81 82 84 85 86 86 87 89 90 91 91 92 94 95 95 96 97 99 100 100 101 103 104 105 105 106 108 109 110 110 111 113 114 115 115 116 118 119 120 120 121 123 124 125 125 126 128 129 130 130 131 133 134 135 135 136 138 139 140 140 141 143 144 145 146 146 148 148 150 151 152 153 153 155 156 157 158 158 160 162 163 163 165 166 167 168 168 170 171 172 173 174 175 175 177 178 179 180 180 182 183 184 185 185 187 188 189 190 190 192 193 194 195 195 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 371 373 374 375 376 376 378 379 380 381 381 383 384 385 386 386 388 389 390 391 391 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 420 422 423 424 425 425 427 428 429 430 430 432 433 434 435 435 437 438 439 440 440 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 479 481 482 482 484 484 486 487 487 489 489 491 492 492 494 495 496 497 497 499 500 501 502 502 504 505 506 507 507 509 510 511 
count: 512
missing x: 1
missing x: 3
missing x: 6
missing x: 8
missing x: 11
missing x: 13
missing x: 16
missing x: 18
missing x: 21
missing x: 23
missing x: 26
missing x: 28
missing x: 31
missing x: 34
missing x: 39
missing x: 44
missing x: 49
missing x: 53
missing x: 58
missing x: 63
missing x: 68
missing x: 73
missing x: 78
missing x: 83
missing x: 88
missing x: 93
missing x: 98
missing x: 102
missing x: 107
missing x: 112
missing x: 117
missing x: 122
missing x: 127
missing x: 132
missing x: 137
missing x: 142
missing x: 147
missing x: 149
missing x: 154
missing x: 159
missing x: 161
missing x: 164
missing x: 169
missing x: 176
missing x: 181
missing x: 186
missing x: 191
missing x: 196
missing x: 372
missing x: 377
missing x: 382
missing x: 387
missing x: 392
missing x: 421
missing x: 426
missing x: 431
missing x: 436
missing x: 441
missing x: 480
missing x: 483
missing x: 485
missing x: 488
missing x: 490
missing x: 493
missing x: 498
missing x: 503
missing x: 508
y's:
0 0 0 2 2 4 5 5 7 7 9 10 10 12 12 14 15 15 17 17 19 20 20 22 22 24 25 25 27 27 29 30 30 32 32 33 35 36 36 37 38 40 41 41 42 43 45 46 46 47 48 50 51 51 52 54 55 56 56 57 59 60 61 61 62 64 65 66 66 67 69 70 71 71 72 74 75 76 76 77 79 80 81 81 82 84 85 86 86 87 89 90 91 91 92 94 95 95 96 97 99 100 100 101 103 104 105 105 106 108 109 110 110 111 113 114 115 115 116 118 119 120 120 121 123 124 125 125 126 128 129 130 130 131 133 134 135 135 136 138 139 140 140 141 143 144 145 146 146 148 148 150 151 152 153 153 155 156 157 158 158 160 162 163 163 165 166 167 168 168 170 171 172 173 174 175 175 177 178 179 180 180 182 183 184 185 185 187 188 189 190 190 192 193 194 195 195 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 371 373 374 375 376 376 378 379 380 381 381 383 384 385 386 386 388 389 390 391 391 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 420 422 423 424 425 425 427 428 429 430 430 432 433 434 435 435 437 438 439 440 440 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 479 481 482 482 484 484 486 487 487 489 489 491 492 492 494 495 496 497 497 499 500 501 502 502 504 505 506 507 507 509 510 511 
count: 512
missing y: 1
missing y: 3
missing y: 6
missing y: 8
missing y: 11
missing y: 13
missing y: 16
missing y: 18
missing y: 21
missing y: 23
missing y: 26
missing y: 28
missing y: 31
missing y: 34
missing y: 39
missing y: 44
missing y: 49
missing y: 53
missing y: 58
missing y: 63
missing y: 68
missing y: 73
missing y: 78
missing y: 83
missing y: 88
missing y: 93
missing y: 98
missing y: 102
missing y: 107
missing y: 112
missing y: 117
missing y: 122
missing y: 127
missing y: 132
missing y: 137
missing y: 142
missing y: 147
missing y: 149
missing y: 154
missing y: 159
missing y: 161
missing y: 164
missing y: 169
missing y: 176
missing y: 181
missing y: 186
missing y: 191
missing y: 196
missing y: 372
missing y: 377
missing y: 382
missing y: 387
missing y: 392
missing y: 421
missing y: 426
missing y: 431
missing y: 436
missing y: 441
missing y: 480
missing y: 483
missing y: 485
missing y: 488
missing y: 490
missing y: 493
missing y: 498
missing y: 503
missing y: 508
render2():
x's:
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 
count: 512
y's:
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 
count: 512 
```

# scroll - 使用 JQuery 可排序列表进行水平滚动

> ID：15724137
> 
> 赞同：1
> 
> 时间：2013-03-30T22:18:34.423
> 
> 标签：scroll, horizontal-scrolling, jquery-ui-sortable

嗨，我在让我的可排序列表水平滚动时遇到了一些麻烦。这是我希望我的列表如何运作的示例的[链接。](http://www.css-lab.com/demos/image-display/side-scroll-gallery.html)

上面的例子在右边使用了一个非常大的负边距，就像这样......

```
margin-right:-30000px; 
```

这是我的可排序列表的 Js-Fiddle 版本的[链接。](http://jsfiddle.net/nLMn5/)

我已经尝试了我所知道的一切！溢出属性、边距、div 内的 div，但我没有运气。在谷歌上搜索，但我发现的一切都告诉我我已经知道的。

希望这里有人曾经这样做过或知道如何并愿意与我分享他们的秘密......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:34:01.073

我决定暂时从横向滚动转向，因为它目前似乎没有足够的支持。对于任何寻找解决方案的人，我发现这个简洁的插件是高度可定制的。[http://manos.malihu.gr/tuts/custom-scrollbar-plugin/complete_examples.html](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/complete_examples.html)

# php - 从 5 列表 MySQL 中选择 2-3 数字组合

> ID：15724142
> 
> 赞同：1
> 
> 时间：2013-03-30T22:19:15.967
> 
> 标签：php, mysql, normalization

表结构：

```
 MyTable (
   ID INT AUTO_INCREMENT,
   Num1 INT,
   Num2 INT,
   Num3 INT,
   Num4 INT,
   PRIMARY KEY(ID)
 )engine=InnoDB; 
```

现在我有大约**20-30k**条记录。`Num1, Num2, Num3`并且`Num4`只是一些随机数。我试图从这个表中选择`2`和`3` **编号组合。**例如，假设我在表中有以下行：

```
ID    Num1   Num2   Num3   Num4
1     20     11     9      150
2     30     11     20     19
3     40     45     11     20 
```

我想选择最常用的**2 个**数字组合，然后选择**3 个**数字组合。所以请注意，**20**和**11**在表中出现**3**次意味着组合`20,11 or 11,20`无关紧要，订单**计数**为 3，其他组合以此类推。

我想在 PHP 数组中检索这些数据，以便我可以进行一些计算或在屏幕上显示。

到目前为止我尝试了什么：

```
 SELECT *
 FROM MyTable
 WHERE (Num1 = :num1 AND Num2 = :num2) OR (Num1 = :num1 AND Num3 = :num2) OR 
       (Num1 = :num1 AND Num4 = :num2) OR (Num2 = :num1 AND Num1 = :num2) OR 
       (Num2 = :num1 AND Num3 = :num2) OR (Num2 = :num1 AND Num4 = :num2) OR 
       ***
       *** 
```

依此类推，适用于所有组合。现在，如果我尝试将它用于**3 个**数字组合，这会很烦人。

1.  有没有更好更有效的方法来做到这一点？
2.  我需要重组表格以使其更容易吗？
3.  重组表会被规范化吗？（现在我认为是标准化的，如果不是请告诉我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:28:54.243

**案例2组合**

我认为您应该考虑将信息存储在这样的大矩阵中：

```
num  times_appearing_with_number_1 times_appearing_with_number_2 ... 
```

对于像这样的情况

```
 1 8 2 3
 1 7 23 24 
```

就像：

```
 num 1 2 3 4 5 6 ...
 1   - 1 1 0 0 0 ...
 2   1 - 1 0 0 0 ... 
```

然后你检查哪些行有更大的数字。索引对于获取它对应的数字很有用。

**案例3组合**

3D 矩阵也是如此。

要提供这些表，您应该只从 MySQL 获取信息，然后循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:45:28.860

since the order of values doesn't matter, there are only 6 permutations to pick two out of four columns (c1-c2, c1-c3, c1-c4, c2-c3, c2-c4 and c3-c4), and only four permutations to pick three (c1-c2-c3, c1-c2-c4, c1-c3-c4, c2-c3-c4).

One approach would be to create a temporary table which contains the id of the row and all 6 (4 for three cols) permutations of those values. You could use a query like this:

```
SELECT id, CASE Num1<=Num2 WHEN TRUE THEN CONCAT(Num1,"-",Num2) ELSE CONCAT(Num2,"-",Num1) END FROM MyTable
UNION
SELECT id, CASE Num1<=Num3 WHEN TRUE THEN CONCAT(Num1,"-",Num3) ELSE CONCAT(Num3,"-",Num1) END FROM MyTable
... 
```

All that's left then is counting the number of matching rows (note that above query could either be run manually or as a subquery to the counting query)

Edit: Something to [fiddle](http://sqlfiddle.com/#!2/1f52e/3/0) with.

# ios - IOS滚动画廊

> ID：15724144
> 
> 赞同：0
> 
> 时间：2013-03-30T22:19:43.760
> 
> 标签：ios, objective-c

我在我的应用程序中制作了这个滑动画廊：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(photoTap:)];
tap.numberOfTapsRequired = 1;

int pageCount = 3;
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,
                                                                          0,
                                                                          360,
                                                                          200)];
scrollView.backgroundColor = [UIColor clearColor];
scrollView.pagingEnabled = YES;
scrollView.contentSize = CGSizeMake(pageCount*scrollView.bounds.size.width ,
                                    scrollView.bounds.size.height);

[scrollView addGestureRecognizer:tap];

CGRect viewsize = scrollView.bounds;

UIImageView *image = [[UIImageView alloc]initWithFrame:viewsize];
[image setImage: [UIImage imageNamed:@"01.png"]];
image.userInteractionEnabled = YES;
[scrollView addSubview:image];

viewsize = CGRectOffset(viewsize, scrollView.bounds.size.width, 0);

UIImageView *image2 = [[UIImageView alloc]initWithFrame:viewsize];
[image2 setImage: [UIImage imageNamed:@"02.png"]];
image2.userInteractionEnabled = YES;
[scrollView addSubview:image2];

- (void)photoTap:(UITapGestureRecognizer *) gestureRecognizer{
} 
```

如何检测在我的滚动视图中点击了哪张照片？我试图向图像添加手势识别器，但只有最后一个有效。有什么建议吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:28:19.327

您可以将手势识别器添加到滚动视图，在检测到点击后，通过将点击的坐标添加到内容偏移量来检测其在 UIScrollView 内容上的位置。当你有这个坐标时，我认为检测图像不是问题。

# .net - How to define byte? null parameter

> ID：15724145
> 
> 赞同：0
> 
> 时间：2013-03-30T22:19:49.650
> 
> 标签：.net, nullable

How to create null byte?

This is what I do

```
byte? nb = null;

methodCall (rdr.IsDBNull(15) ? nb : rdr.GetByte(15)); 
```

This does not even complile.
What is the proper syntax?

```
methodCall (rdr.IsDBNull(15) ? (null)byte : rdr.GetByte(15)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:23:55.623

Try:

```
(byte?)null : rdr.GetByte(...) 
```

# python - 在 Amazon ec2 ubuntu 实例上使用 enthought Python 安装 lxml

> ID：15724149
> 
> 赞同：2
> 
> 时间：2013-03-30T22:20:07.057
> 
> 标签：python, ubuntu, amazon-ec2, lxml, enthought

我在 ubuntu 上成功安装了 enthought Python（在 Amazon EC2 实例中运行）。但是，尝试安装 lxml 包时出现以下错误（已插入日志）

```
/usr/local/bin/pip run on Sat Mar 30 22:05:14 2013
Downloading/unpacking lxml

Running setup.py egg_info for package lxml

/usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'bugtrack_url'

 warnings.warn(msg)

 Building lxml version 3.1.1.

 Building without Cython.

 Using build configuration of libxslt 1.1.26

 Building against libxml2/libxslt in the following directory: /usr/lib/x86_64-linux-gnu

 running egg_info
 writing pip-egg-info/lxml.egg-info/PKG-INFO
 writing top-level names to pip-egg-info/lxml.egg-info/top_level.txt
 writing dependency_links to pip-egg-info/lxml.egg-info/dependency_links.txt
 warning: manifest_maker: standard file '-c' not found

 reading manifest file 'pip-egg-info/lxml.egg-info/SOURCES.txt'
 reading manifest template 'MANIFEST.in'
 warning: no files found matching '*.txt' under directory 'src/lxml/tests'

 writing manifest file 'pip-egg-info/lxml.egg-info/SOURCES.txt'
 Source in /tmp/pip-build-root/lxml has version 3.1.1, which satisfies requirement lxml
 Installing collected packages: lxml

 Running setup.py install for lxml

Running command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build-root/lxml/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-1bVipz-record/install-record.txt --single-version-externally-managed
/usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'bugtrack_url'

warnings.warn(msg)

Building lxml version 3.1.1.

Building without Cython.

Using build configuration of libxslt 1.1.26

Building against libxml2/libxslt in the following directory: /usr/lib/x86_64-linux-gnu

running install
running build
running build_py
copying src/lxml/includes/lxml-version.h -> build/lib.linux-x86_64-2.7/lxml/includes
running build_ext
building 'lxml.etree' extension

gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/libxml2 -I/tmp/pip-build-root/lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o

src/lxml/lxml.etree.c: In function ‘__pyx_f_4lxml_5etree__getFilenameForFile’:

src/lxml/lxml.etree.c:26852:7: warning: variable ‘__pyx_clineno’ set but not used [-Wunused-but-set-variable]

src/lxml/lxml.etree.c:26851:15: warning: variable ‘__pyx_filename’ set but not used [-Wunused-but-set-variable]

src/lxml/lxml.etree.c:26850:7: warning: variable ‘__pyx_lineno’ set but not used [-Wunused-but-set-variable]

src/lxml/lxml.etree.c: In function ‘__pyx_pf_4lxml_5etree_4XSLT_18__call__’:

src/lxml/lxml.etree.c:138240:81: warning: passing argument 1 of ‘__pyx_f_4lxml_5etree_12_XSLTContext__copy’ from incompatible pointer type [enabled by default]

src/lxml/lxml.etree.c:136196:52: note: expected ‘struct __pyx_obj_4lxml_5etree__XSLTContext *’ but argument is of type ‘struct __pyx_obj_4lxml_5etree__BaseContext *’

src/lxml/lxml.etree.c: In function ‘__pyx_f_4lxml_5etree__copyXSLT’:

src/lxml/lxml.etree.c:139634:79: warning: passing argument 1 of ‘__pyx_f_4lxml_5etree_12_XSLTContext__copy’ from incompatible pointer type [enabled by default]

src/lxml/lxml.etree.c:136196:52: note: expected ‘struct __pyx_obj_4lxml_5etree__XSLTContext *’ but argument is of type ‘struct __pyx_obj_4lxml_5etree__BaseContext *’

src/lxml/lxml.etree.c: At top level:

src/lxml/lxml.etree.c:12385:13: warning: ‘__pyx_f_4lxml_5etree_displayNode’ defined but not used [-Wunused-function]

gcc: internal compiler error: Killed (program cc1)

Please submit a full bug report,

with preprocessed source if appropriate.

See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.

error: command 'gcc' failed with exit status 4

Complete output from command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build-root/lxml/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-1bVipz-record/install-record.txt --single-version-externally-managed:

/usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'bugtrack_url'

warnings.warn(msg)

Building lxml version 3.1.1.

Building without Cython.

Using build configuration of libxslt 1.1.26

Building against libxml2/libxslt in the following directory: /usr/lib/x86_64-linux-gnu

running install

running build

running build_py

copying src/lxml/includes/lxml-version.h -> build/lib.linux-x86_64-2.7/lxml/includes

running build_ext

building 'lxml.etree' extension

gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/libxml2 -I/tmp/pip-build-root/lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o

src/lxml/lxml.etree.c: In function ‘__pyx_f_4lxml_5etree__getFilenameForFile’:

src/lxml/lxml.etree.c:26852:7: warning: variable ‘__pyx_clineno’ set but not used [-Wunused-but-set-variable]

src/lxml/lxml.etree.c:26851:15: warning: variable ‘__pyx_filename’ set but not used [-Wunused-but-set-variable]

src/lxml/lxml.etree.c:26850:7: warning: variable ‘__pyx_lineno’ set but not used [-Wunused-but-set-variable]

src/lxml/lxml.etree.c: In function ‘__pyx_pf_4lxml_5etree_4XSLT_18__call__’:

src/lxml/lxml.etree.c:138240:81: warning: passing argument 1 of ‘__pyx_f_4lxml_5etree_12_XSLTContext__copy’ from incompatible pointer type [enabled by default]

src/lxml/lxml.etree.c:136196:52: note: expected ‘struct __pyx_obj_4lxml_5etree__XSLTContext *’ but argument is of type ‘struct __pyx_obj_4lxml_5etree__BaseContext *’

src/lxml/lxml.etree.c: In function ‘__pyx_f_4lxml_5etree__copyXSLT’:

src/lxml/lxml.etree.c:139634:79: warning: passing argument 1 of ‘__pyx_f_4lxml_5etree_12_XSLTContext__copy’ from incompatible pointer type [enabled by default]

src/lxml/lxml.etree.c:136196:52: note: expected ‘struct __pyx_obj_4lxml_5etree__XSLTContext *’ but argument is of type ‘struct __pyx_obj_4lxml_5etree__BaseContext *’

src/lxml/lxml.etree.c: At top level:

src/lxml/lxml.etree.c:12385:13: warning: ‘__pyx_f_4lxml_5etree_displayNode’ defined but not used [-Wunused-function]

gcc: internal compiler error: Killed (program cc1)

Please submit a full bug report,

with preprocessed source if appropriate.

See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.

error: command 'gcc' failed with exit status 4 
```

* * *

```
Command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build-root/lxml/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-1bVipz-record/install-record.txt --single-version-externally-managed failed with error code 1 in /tmp/pip-build-root/lxml

Exception information:
Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/pip/basecommand.py", line 139, in main
status = self.run(options, args)
File "/usr/local/lib/python2.7/dist-packages/pip/commands/install.py", line 271, in run
requirement_set.install(install_options, global_options, root=options.root_path)
File "/usr/local/lib/python2.7/dist-packages/pip/req.py", line 1185, in install
requirement.install(install_options, global_options, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/pip/req.py", line 592, in install
cwd=self.source_dir, filter_stdout=self._filter_install, show_stdout=False)
File "/usr/local/lib/python2.7/dist-packages/pip/util.py", line 662, in call_subprocess
% (command_desc, proc.returncode, cwd))
InstallationError: Command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build-root/lxml/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-1bVipz-record/install-record.txt --single-version-externally-managed failed with error code 1 in /tmp/pip-build-root/lxml 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T23:44:14.133

我在我的实例上发现了同样的问题。事实证明，编译 lxml 需要大量内存，并且我的实例内存不足，因此内核正在杀死编译器。

要检查您是否有同样的问题，请尝试`dmesg|tail`在失败后运行。你会看到一些类似的行：

```
[2242482.581361] Out of memory: Kill process 8306 (cc1) score 432 or sacrifice child
[2242482.581375] Killed process 8306 (cc1) total-vm:298572kB, anon-rss:260756kB, file-rss:4kB 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-06T19:49:08.930

要`lxml`在`AWS`微实例中安装，请尝试按照以下步骤操作：

```
sudo yum install python-devel
sudo yum install libxml2-devel
sudo yum install libxslt-devel  
sudo yum install gcc        
sudo easy_install pip
sudo pip install lxml 
```

请记住，亚马逊只保留了一些可供安装的选定文件，有时名称不同。如果您寻找：

```
yum info python-dev 
```

你会发现只是一个错误：

```
Error: No matching Packages to list 
```

但...

```
yum info python-devel 
```

会显示你需要什么

```
Name        : python-devel
Arch        : noarch
Epoch       : 1
Version     : 2.6
Release     : 2.26.amzn1
Size        : 0.0  
Repo        : installed
From repo   : amzn-main
Summary     : The libraries and header files needed for Python
            : development.
URL         : http://www.python.org/
License     : PSF
Description : This is a macro package that pulls in via
            : dependencies the system default python development
            : extensions. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T00:12:02.573

要编译 lxml，您需要先安装几个开发库。在 Ubuntu 上，您可以使用以下命令安装它们：

```
sudo apt-get install libxml2-dev libxslt-dev 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T11:14:08.613

添加丹尼尔的答案，除了安装 libxslt-devel、python-devel、libxml2-devel

```
sudo yum groupinstall -y development
sudo yum install libxslt-devel, python-devel, libxml2-devel 
```

如果你收到这样的消息：

```
[2242482.581361] Out of memory: Kill process 8306 (cc1) score 432 or sacrifice child 
[2242482.581375] Killed process 8306 (cc1) total-vm:298572kB, anon-rss:260756kB, file-rss:4kB 
```

您可以创建一个交换文件来补充您的内存，例如添加 512Mb 的交换文件：

```
sudo dd if=/dev/zero of=/swapfile bs=1024 count=512k
sudo mkswap /swapfile
sudo swapon /swapfile
compile lxml 
```

**来源：**遇到这个问题，终于解决了。

# git - Force Git to not commit and/or upload changes to a specific file to master

> ID：15724152
> 
> 赞同：0
> 
> 时间：2013-03-30T22:20:24.217
> 
> 标签：git, git

I have a [git](/questions/tagged/git "show questions tagged 'git'") project where I have to do some changes to one file to get it working on a specific machine. This file is part of the repository and I don't want the file to be committed and uploaded to master unless i specifically tell it so. I want that or I want a command or option that I have to execute before committing and pushing so that the changes does not get uploaded to master.

Is this possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:30:53.870

Since you said the file is already in the repository, the specific command that you want to not track changes to the specific file is

```
git update-index --assume-unchanged filename.ext 
```

where filename.ext is the name of your specific file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:27:59.123

[This](https://help.github.com/articles/ignoring-files) is a good reference with examples. The only problem I've run into is ignoring directories, be sure to include the trailing slash.

# swi-prolog - 每次编辑代码后重新打开序言程序

> ID：15724159
> 
> 赞同：0
> 
> 时间：2013-03-30T22:21:06.207
> 
> 标签：swi-prolog

为什么我应该在编辑代码时停止 prolog 程序并再次运行它？
有没有办法在不停止程序并重新打开的情况下重新编译。
注意我在 windows 上使用 swi 5.8.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:05:55.100

咨询帮助：

```
apropos(load_files). 
```

还有许多其他谓词可能会有所帮助。也许您需要在重新加载之前卸载文件 - 这样知识就会被覆盖。

# android - Android Webview：如何滚动整个活动布局

> ID：15724166
> 
> 赞同：6
> 
> 时间：2013-03-30T22:21:35.863
> 
> 标签：android, android-webview

我有一个显示电子邮件内容的活动。有一个带有收件人和日期的标题，以及一个用于显示邮件内容的 web 视图。

邮件很长的时候，没问题，webview里面有滚动条。

但是我的问题是当收件人列表很长时，header占屏幕高度的50%，而webview只占屏幕高度的50%，我只能在这50%里面滚动。我想滚动整个活动布局（我希望 webview 得到它的全高，并且滚动条出现在整个活动上）。

这是一张说明我的问题的图片：

![滚动问题](../Images/66ace1827d89f01d4a94ab80f496f3cf.png)

这是我的 layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:baselineAligned="false"
android:orientation="vertical"
android:scrollbars="horizontal" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@layout/header_gradient" >
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#DEDEDE"
    android:orientation="vertical"
    android:padding="2dp" >

    <TextView
        android:id="@+id/label_mail_object"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="&lt;mail_object>"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/label_mail_from"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="&lt;from>"
        android:textColor="#0000FF" />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="0"
        android:stretchColumns="1" >

        <!-- Send time -->

        <TableRow
            android:id="@+id/tablerow_sent_date"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/label_sent_date"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/label_mail_date"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="&lt;sent_date>" />
        </TableRow>

        <!-- To -->

        <TableRow
            android:id="@+id/tablerow_to"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/label_to"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/label_mail_to"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:maxWidth="@dimen/padding_large"
                android:text="&lt;to>" />

        </TableRow>

        <!-- Cc -->

        <TableRow
            android:id="@+id/tablerow_cc"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/label_cc"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/label_mail_cc"
                 android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:maxWidth="@dimen/padding_large"
                android:text="&lt;cc>" />
        </TableRow>

        <!-- To -->

        <TableRow
            android:id="@+id/tablerow_cci"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/label_cci"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/label_mail_cci"
                 android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:maxWidth="@dimen/padding_large"
                android:text="&lt;cci>" />
        </TableRow>

    </TableLayout>

</LinearLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#808080" />

<WebView
    android:id="@+id/webview_mail_preview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:57:55.623

为什么不将收件人的列表内容包装在 ScrollView 中，然后将此 ScrollView 的布局高度设置为您选择的大小。

这样，如果他们愿意，他们可以继续滚动接收者的屏幕，并且仍然有大部分屏幕专用于 Web 视图。

如果你想要一个滚动的整个视图，那么做同样的事情，只是简单地包装所有东西。

不明白就打我

# angularjs - 错误：没有控制器

> ID：15724168
> 
> 赞同：3
> 
> 时间：2013-03-30T22:22:28.667
> 
> 标签：angularjs

我有两个指令，我想在其中一个中公开一个 API 供其他人使用。按照[此示例](http://www.egghead.io/video/angularjs-directive-to-directive-communication/)的指导，当我需要其他指令的控制器时，我会收到此错误：

```
Error: No controller: foo
    at Error (<anonymous>)
    at getControllers (http://localhost:3000/vendor/angular/angular.js:4216:19)
    at nodeLinkFn (http://localhost:3000/vendor/angular/angular.js:4345:35)
    at compositeLinkFn (http://localhost:3000/vendor/angular/angular.js:3953:15)
    at publicLinkFn (http://localhost:3000/vendor/angular/angular.js:3858:30)
    at <error: illegal access>
    at Object.Scope.$broadcast (http://localhost:3000/vendor/angular/angular.js:8243:28)
    at http://localhost:3000/vendor/angular/angular.js:7399:26
    at wrappedCallback (http://localhost:3000/vendor/angular/angular.js:6780:59)
    at wrappedCallback (http://localhost:3000/vendor/angular/angular.js:6780:59) <bar class="ng-scope"> 
```

我的指令定义如下：

```
})
    .directive('foo', function() {
        return {
            restrict: 'E',
            template: '<h1>Foo</h1>',
            controller: function($scope) {
                $scope.someArray = [];

                this.doStuff = function() {
                   $scope.someArray.push('abc');
                }
            },
            link: function(scope, element, attrs) {

            }
        }
    })
    .directive('bar', function() {
        return {
            require: 'foo',
            restrict:'E',
            template: '<h1>Bar</h1>',
            link: function(scope, element, attrs, fooCtrl) {
                element.bind('mouseent', function() {
                    fooCtrl.doStuff();
                })
            }
        }
    }) 
```

有谁知道为什么第二个指令看不到第一个指令的控制器？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:02:52.353

`require`指令定义对象中的属性将控制器注入链接函数。

*但是*：该指令不会自行启动，您还需要`foo`在元素中声明该指令。喜欢：`<div foo="hello" bar="world"></div>`。

此外，它有 2 个可以组合的前缀。

1.  `?`：“使要求可选”，不会引发错误。
2.  `^`：“在父元素中查找它”，通常所需的指令 iw 预计会在同一个元素中。这使它在父元素中搜索。

# assembly - change character in string

> ID：15724174
> 
> 赞同：0
> 
> 时间：2013-03-30T22:23:10.350
> 
> 标签：assembly, 64-bit, nasm

My issue is that I cannot change each bits of my pointer

my function has the same synopsis of memset

I don't know where I'm wrong thanks for helping

```
void *changEachBits(void *, int , size_t)

[BITS 64]

global changEachBits

section .text

changEachBits:
        push rbp
        mov rbp, rsp
        xor rcx, rcx

cdn_loop:
        cmp rcx, rdx
        jz end
        mov [rdi + rcx], rsi
        inc rcx
        jmp cdn_loop
end:
        mov rax, rcx
        mov rsp, rbp
        pop rbp
        ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:22:02.063

Try `mov byte [rdi + rcx], rsi` You should check that indeed the emitted opcodes treat your array as byte array

# html - 从身体高度设置 div 高度

> ID：15724182
> 
> 赞同：0
> 
> 时间：2013-03-30T22:24:14.250
> 
> 标签：html, scroll, fullscreen

我的 body 和 html 高度为 100% 并且溢出隐藏，但我需要一个 div 才能滚动它自己的内容。这是[jsfiddle](http://jsfiddle.net/pPGUB/1/)，因为您可以看到 div 中的内容滚动到某个点。我正在尝试根据身体高度减去标题高度和填充来设置它的高度。

CSS：

```
body{ 
overflow:hidden;/* needed to eliminate scrollbars caused by the background image */
padding:0;
    margin:0;/* necesarry for the raster to fill the screen */
    height:100%;
    width:100%;
}
html{
   min-height:100%;
   padding:0;
   margin:0;
}
#header{
   height:70px;
   background:#000;
   color:#fff;
   margin:0;
   padding:0;
}
#votes{
background:rgba(0,0,0,0.8);
width:266px;
position:absolute;
right:0;
padding:5px 5px 50px;

color:#fff !important;
z-index: 99999;
  overflow:scroll; 
```

}

JS

```
$(document).ready(function(){
var height = $(document).height();
var divheight = height - 130;
$('#votes').attr('style', 'height:' + divheight + 'px');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:42:28.397

溢出-y：自动；或溢出：滚动；不断使整个页面滚动。你总是可以选择 iframe。这是一个可怕的修复

# c# - 如何将未处理（转义）的单词放入 String.Format

> ID：15724183
> 
> 赞同：31
> 
> 时间：2013-03-30T22:24:23.363
> 
> 标签：c#, .net, date, escaping, string-formatting

我正在格式化日期：

```
str = String.Format("{0:MMM d m:mm"+yearStr+"}", dt); 
```

我想把“at”这个词放在“d”之后，但我不希望字符串格式化它。我只想要“在”这个词。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-30T22:37:41.303

您可以用引号将文字字符串括起来，对于较长的字符串，这可能比使用反斜杠转义每个字符更容易且更具可读性：

```
str = String.Format("{0:MMM d 'at' m:mm"+yearStr+"}", dt); 
```

请参阅MSDN 库中的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)（搜索“文字字符串分隔符”）。

（你的意思是`h:mm`而不是`m:mm`？）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-30T22:29:29.900

```
string.Format(@"{0:MMM d \a\t m:mm" + yearStr + "}", dt); 
```

请注意双重转义 - 我使用了一个 varbatim 字符串，因此我能够`\`在字符串中作为普通字符写入。然后的格式化例程`DateTime`（再次）将此解释为转义序列。

这是一个更简单的变体：

```
string.Format("{0:MMM d} at {0:m:mm" + yearStr + "}", dt); 
```

第一个变体可能被某些人认为是恶心的。不过，后者读起来很清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T23:15:27.530

只是为了好玩，但有效。

```
var what=new object[] { "{{{{0:MMM d}}}} {0} {{{{0:m:mm:{{0}}}}}}", "at", yearStr, dt };
var that=what.Aggregate((a, b) => String.Format((String)a, b)); 
```

您可以将两行合二为一。`at`您要在两种格式之间放置的 也已参数化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-23T17:01:24.427

**使用字符串插值（C# 6.0+）**：（[文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)）

```
var yearStr = "2018";
var dt = DateTime.Now;
var str = $"{dt:MMM d \'at\' H:mm} {yearStr}"; 
```

*反斜杠是可选的*

```
var str = $"{dt:MMM d 'at' H:mm} {yearStr}"; 
```

实际操作：[DotnetFiddle](https://dotnetfiddle.net/q6pbhY)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-26T04:36:28.613

如果用于日期命名目录路径，反斜杠示例如下：

```
var d = DateTime.Now;
var str = d.ToString("yyyy\\\\MM\\\\dd");  // str = "2021\11\26" 
```

# css - div底部的div

> ID：15724188
> 
> 赞同：0
> 
> 时间：2013-03-30T22:26:13.790
> 
> 标签：css

我有 div 容器，它们在网页上彼此下方放置。（它是一个“一个寻呼机”）我想在每个 div 的底部放置一个 div。

这是我想把它放在里面的 div 的 css。

```
#useit {
    width: 100%;
    height: 1550px;
    background-color: #333333;
    float: left;
} 
```

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:30:03.070

至少没有看到包含元素的样式，我可以提供的是：

```
.container {
  position:relative;
}
.inner {
  bottom:0;
  position:absolute;
  /* other properties */
} 
```

# php - Query works from pgAdmin. Won't work from PHP with no errors

> ID：15724191
> 
> 赞同：2
> 
> 时间：2013-03-30T22:26:32.433
> 
> 标签：php, postgresql, phppgadmin

I'm rebuilding app for my client. I write scripts to migrate data from old db to new one. To prevent empty values in column `etiquette_start` (what happened in old db), I run

```
UPDATE items 
SET etiquette_start = 'E' 
WHERE trim(both ' ' from etiquette_start) = '' 
OR etiquette_start is null; 
```

just after importing data. The problem is that scripts works fine on pgAdmin III, but it won't execute on php script. PHP Syntax error isn't the issue here - putting other queries in variable holding query quoted above resulted in successfull data manipulation. There is no PHP error on the page and in logs.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:23:21.403

Try this:

```
UPDATE items 
SET etiquette_start = 'E' 
WHERE length(trim(both ' ' from etiquette_start)) = 0 
OR etiquette_start is null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:42:51.570

Either way, you can simplify the `trim()` call and prevent empty updates:

```
UPDATE items 
SET    etiquette_start = 'E'
WHERE (trim(etiquette_start) = '' OR etiquette_start IS NULL) -- parens needed
AND    etiquette_start IS DISTINCT FROM 'E'; 
```

Since space (`' '`) is the default character to be removed by [**`trim()`**](http://www.postgresql.org/docs/current/interactive/functions-string.html), these expressions are 100% equivalent:

```
trim(etiquette_start)

trim(both ' ' from etiquette_start 
```

# html - 如何在进度条中插入技能名称？

> ID：15724201
> 
> 赞同：1
> 
> 时间：2013-03-30T22:28:09.110
> 
> 标签：html, css

我正在处理我的简历，我想要进度条内的技能名称，而不是上方。但我不明白。谢谢

这是网络：[http ://working.virgiliodelavega.com/](http://working.virgiliodelavega.com/)

```
 <span class="skills-each">Illustrator</span> 
<div class="progress-bar blue"> 
<span style="width: 90%"></span> 
</div> 
```

* * *

```
.skills-title {
    font-size: 1em;
}

.skills-each {
    font-size: .8em;
}

.progress-bar {
    background-color: #727e7f;
    height: 25px;
    padding: 3px;
}

.progress-bar span {
    display: inline-block;
    height: 100%;   
}

.blue span {
    background-color: #34495e;   
}

.red span {
    background-color: #e74c3c;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:48:37.483

我建议更改标记。使用列表比 divs/spans 干净得多。

[http://codepen.io/cimmanon/pen/Hikxp](http://codepen.io/cimmanon/pen/Hikxp)

```
ul.skills {
  padding: 0;
}

ul.skills li {
  background-color: #727e7f;
  position: relative;
  line-height: 2em;
  margin: 1em 0;
  padding: 0 .5em;
  position: relative;
  color: white;
}

ul.skills li span {
  position: relative;
  z-index: 10;
  font-size: .8em;
}

ul.skills li:after {
  position: absolute;
  left: 3px;
  top: 3px;
  bottom: 3px;
  content: '';
}

ul.skills li.seven:after {
  width: 70%;
}

ul.skills li.eight:after {
  width: 80%;
}

ul.skills li.nine:after {
  width: 90%;
}

ul.skills li.ten:after {
  right: 3px;
}

ul.skills.graphic li:after {
    background-color: #34495e;   
}

ul.skills.web li:after {
    background-color: #e74c3c;   
}

<h1>Graphic Skills</h1>

<ul class="skills graphic">
  <li class="eight"><span>Illustrator</span></li> 
  <li class="ten"><span>Photoshop</span></li> 
  <li class="nine"><span>Indesign</span></li> 
</ul>

<h1>Web Development</h1>

<ul class="skills web">
  <li class="seven"><span>Illustrator</span></li> 
  <li class="eight"><span>Photoshop</span></li> 
  <li class="nine"><span>Indesign</span></li> 
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:51:27.163

hi you can try this way if you want

html

```
<span class="skillEachWrap"> <span class="skills-each">Illustrator</span></span>
<div class="progress-bar blue"> 
<span style="width: 90%"></span> 
</div> 
```

css

```
.skillEachWrap {
    float:left;
    position:relative;
}

.skills-each {
    font-size: .8em;
    position:absolute;
    top:7px;
    left:10px;
} 
```

working [demo](http://jsfiddle.net/jhunlio/KTAGm/3/) hope this help you.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:57:56.727

您可以使用`position:absolute`将文本放在进度条的顶部。然后使用`line-height:25px`使文本在条内垂直居中。我还建议你给你 bar 一个类，而不是仅仅针对它，`span`因为我们现在有多个孩子`.progress-bar`。

[jsFiddle](http://jsfiddle.net/Tyriar/4SN7J/1/)

![演示](../Images/c40360d05cb244e28e830f5e1c82374d.png)

**HTML**

```
<div class="progress-bar blue">
    <span class="bar" style="width: 80%"></span>
    <span class="name">Photoshop</span>
</div> 
```

**CSS**

```
.progress-bar {
    background-color: #727e7f;
    height: 25px;
    padding: 3px;

    position:relative;
}

.progress-bar .bar {
    display: inline-block;
    height: 100%;
}

.progress-bar.blue .bar {
    background-color: #34495e;
}

.progress-bar .name {
    color:#FFF;
    position:absolute;
    left:10px;
    line-height:25px;
} 
```

# iphone - UIWindow中的iOS UIScrollView

> ID：15724204
> 
> 赞同：0
> 
> 时间：2013-03-30T22:28:27.113
> 
> 标签：iphone, ios, objective-c, uiscrollview, uigesturerecognizer

我目前正在制作一个 iOS 项目，其中我有一个`UIScrollView`作为`UIWindow`（使用`[window addSubview:scrollView];`）的直接子视图。窗口的框架及其内容已正确设置，并且`contentSize`设置为大于窗口的框架。当我尝试滚动 UIScrollView 时，它根本不滚动。两者`scrollEnabled`和`pagingEnabled`都设置为`YES`，但滚动视图不滚动，这让我相信滚动视图甚至没有接收到触摸/滚动事件。`UITapGestureRecognizer`如果有任何区别，则窗口会添加一个。我是否需要以某种方式将滑动事件转发到`UIScrollView`，或者是否有其他原因导致它不滚动？

编辑：这是一些代码。

```
 float count=ceil([self.msgArray count]/2); //msgArray has length of 3+, NSLog()'d and confirmed.
   float contentHeight=97.5 * count;
   [dataScrollView setContentSize:CGSizeMake(320,contentHeight)];
   dataScrollView.userInteractionEnabled=YES;
   dataScrollView.pagingEnabled=YES;
   dataScrollView.scrollEnabled=YES;
   dataScrollView.clipsToBounds=YES; //Have also tried with this set to NO, or not set at all.
   //Add subviews to dataScrollView. 
```

编辑：这里有更多信息。记录时 contentHeight 为 195.00。我已经删除了委托方法，我又回到了使用滚动视图的直接子视图。窗口的高度为 97.50。

编辑：我还从 UIWindow 中删除了 UITapGestureRecognizer，但滚动视图仍然不滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:29:46.847

啊`UITapGestureRecognizer`！这可能是我在自己的项目中花了几个小时才弄清楚的错误。它的`cancelsTouchesInView`属性是否设置为`NO`应有的样子？（`YES`是默认设置...如果您不期待它，它真的会让您失望。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:18:26.067

只需记录滚动视图边界宽度/高度。您设置的内容高度应大于滚动视图高度。如果它更多，则滚动视图会自动启用其滚动。

# c - How can I check for such macro dependence?

> ID：15724205
> 
> 赞同：0
> 
> 时间：2013-03-30T22:28:32.797
> 
> 标签：c

I have defined two macros

```
#define the_begin begin = 0
#define the_size  n - begin 
```

I'd like to check if `the_size` macro is not been used without `the_begin` since it depends on `the_begin`.

Is it possible to check such dependence?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:36:56.153

The dependency is already implicitly introduced by using the `begin` variable. If you give it a more unique name, you can mostly be sure that they won't be misused.

You can't be 100% sure, of course, because macros expand to regular text. Specially crafted text will always be able to imitate the effect of a macro, because that's what macros are.

All that said, what you're doing is a **very, very bad idea**. Macros such as those have a direct, negative impact in the ability of a reader to understand the code. **Specially** because, being macros, they can expand to anything -- and the final code that gets executed **does not reflect** what's written.

That's a good recipe for a long night of debugging.

# c - 为什么 memcpy() 更快？

> ID：15724206
> 
> 赞同：0
> 
> 时间：2013-03-30T22:28:33.030
> 
> 标签：c, memcpy

我很好奇为什么该`memcpy()`功能比简单的手动复制要快。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

int main() 
{ 
    clock_t begin, end;
    double time_spent;
    int i, j;   
    char source[65536], destination[65536]; 

    begin = clock();

    for (j = 0; j<1000; j++) 
        for (i = 0; i < 65536; i++) destination[i] = source[i];
    //slower than memcpy(destination, source, 65536);

    end = clock();
    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("%Lf\n",time_spent);
    system("pause");
} 
```

执行`memcpy()`不做同样的事情吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:31:54.190

`memcpy()`可以合并各种其他优化，例如 SIMD。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/7776098/101090)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T22:32:08.280

一个好的优化编译器应该确定您的循环实际上是 memmove() 或 memcpy() 并将其替换为对该函数的调用。这仍然留下了一个问题：为什么这样做很聪明？

事实证明，手动优化用于复制内存的已编译代码还有很大的空间，而编译器还不够聪明，无法做到这一切（它也非常特定于 cpu，因此操作系统将有专门的版本用于他们支持的每个 CPU 系列，并在运行时交换它们）。

这是 OSX 的 x86_64 SSE 4.2 复制实现：[http ://www.opensource.apple.com/source/Libc/Libc-825.25/x86_64/string/bcopy_sse42.s](http://www.opensource.apple.com/source/Libc/Libc-825.25/x86_64/string/bcopy_sse42.s)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-30T22:32:14.393

> memcpy() 的实现不是做同样的事情吗？

不必要。

这是一个标准库函数，因此：

*   它可能是高度优化的，使用特定于平台的快速汇编指令，或者它每次迭代只复制一个以上的字节，如果处理器有足够大的寄存器，这会更快；
*   它可能被编译器识别为内置，因此它可能会执行更多优化步骤，例如，将其内联以消除函数调用开销，或从其上下文中推断出您正在尝试执行的操作并使用其他方法执行，等等.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T22:32:02.817

因为 for 循环会一一复制项目。而 memcpy() 逐块复制项目。您可以在此处阅读 memcpy() 的源代码：[https](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/memcpy_8c-source.html) ://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/memcpy_8c-source.html或此处[http://research。 microsoft.com/en-us/um/redmond/projects/invisible/src/crt/memcpy.c.htm](http://research.microsoft.com/en-us/um/redmond/projects/invisible/src/crt/memcpy.c.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T22:32:55.903

`memcpy()`将尝试一次复制字，即在 32 位系统上每次迭代 4 个字节，在 64 位系统上每次迭代 8 个字节。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T22:32:34.557

`memcpy`不是香草循环。有许多优化。

对齐和字长之类的东西允许`memcpy`以稳定的速度以更大的块复制内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-30T22:35:23.863

您可以直接进入`memcpy`以发现这不是一个简单的循环。

# wpf - Setting background of content control

> ID：15724208
> 
> 赞同：7
> 
> 时间：2013-03-30T22:28:56.897
> 
> 标签：wpf, wpf-controls

```
<UserControl .....>
  <DataTemplate DataType="{x:Type vm:AViewModel}">
    <vw:AView />
  </DataTemplate>

  <DataTemplate DataType="{x:Type vm:BViewModel}">
    <vw:BView />
  </DataTemplate>

  <ContentControl x:Name="chartScreen" Content="{Binding Screen}" Background="Yellow" />
</UserControl> 
```

As you can see from above code, ContentControl is setting its content through binding to ViewModel's Screen property. Screen property will return an instance of AViewModel or BViewModel, depending on some condition. The problem is, when UserControl is loaded on screen, Screen property is null, so there is no content set yet. At this point, I would like to set some background for the ContentControl, but I cannot find a way how to do this? Background="Yellow" does nothing...

Any ideas how to set the background of ContentControl? This backgound should be applied always, even when content is displaying AView or Biew, or null.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T23:00:51.173

Just wrap your `ContentControl` in a `Border`

```
<Border Background="Yellow">
  <ContentControl x:Name="chartScreen"
                  Content="{Binding Screen}" />
</Border> 
```

If all you have in your `UserControl` is your `ContentControl`, just set the `Background` on the `UserControl` itself. That would remove the extra `Border` as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:02:33.947

try something like this :

```
 <ContentControl x:Name="chartScreen" Content="{Binding Screen}" Background="Yellow">
       <ContentControl.Triggers>    
           <Trigger Property="Content" Value="{x:Null}">
               <Trigger.Value>
                   <Border Background="Yellow"/>
               </Trigger.Value> 
           </Trigger>  
       </ContentControl.Triggers>    
 </ContentControl> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T10:23:44.277

try something like this in WPF:

```
 <ContentControl>
      <ContentControl.Style>
        <Style TargetType="ContentControl">
          <Style.Triggers>
            <DataTrigger Binding="{Binding Content}" Value="{x:Null}">
              <Setter Property="Content">
                <Setter.Value>
                  <Rectangle Width="100" Height="100" Fill="Blue" />
                </Setter.Value>
              </Setter>
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </ContentControl.Style>
</ContentControl> 
```

# android - Android - AlertDialog 按钮的统一大小

> ID：15724209
> 
> 赞同：0
> 
> 时间：2013-03-30T22:28:58.197
> 
> 标签：android, android-alertdialog, android-button

我什至试图在 AlertDialog 中获取我的按钮。目前，一个按钮的文本进入第二行，使该按钮比其他两个稍大。这是我的对话框（不在片段中，只是在活动中）

```
public void imageActions(final View v, final int position) {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Image Actions");
    alert.setIcon(R.drawable.image_icon);
    alert.setNeutralButton("View Image", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {
              seeImage(v,position);
        } });   
    alert.setPositiveButton("Remove Image", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {
              sureToDelte(v,position);
        } });       
    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {  
        } }); 
    alert.show();           
} 
```

我尝试在之后添加此代码，`alert.show();`但它导致了崩溃。

```
Button positive = (Button) findViewById(android.R.id.button1);
positive.setLayoutParams(new LinearLayout.LayoutParams(10, 10));
Button negative = (Button) findViewById(android.R.id.button2);
negative.setLayoutParams(new LinearLayout.LayoutParams(10, 10));
Button neutral = (Button) findViewById(android.R.id.button3);
neutral.setLayoutParams(new LinearLayout.LayoutParams(10, 10)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:43:26.227

最好编辑您的 XML 文件，您可以执行以下操作：

```
<LinearLayout
        android:id="@+id/activity_content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

            <Button
                android:id="@+id/buttonID1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Your Button" />
            <Button
                android:id="@+id/buttonID2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Your Button" />
</LinearLayout> 
```

否则，如果您真的想以编程方式对其进行编辑，请使用 LinearLayout 属性，例如：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.your_linear);
LayoutParams params = layout.getLayoutParams(); // Params
params.width = params.FILL_PARENT; // Fill the space horizontally
params.height = params.WRAP_CONTENT; // Fill the space vertically but "automatically", depends on the object's size. 
```

# django - 在使用syncdb时如何使用Django来呈现旧数据库而不破坏它？

> ID：15724211
> 
> 赞同：1
> 
> 时间：2013-03-30T22:29:05.070
> 
> 标签：django, sqlite

我在 sqlite 中有一个数据库，我想使用 Django 来呈现它并对其进行查询。

我知道如何通过在 中创建新类来创建新数据库`models.py`，但是使用 Django 访问**现有**数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:08:58.163

这似乎是一个分两部分的问题：首先，如何编写 django 模型类来表示现有数据库，其次如何与`syncdb`.

第一个问题的答案是，django 模型的表达能力不足以描述每个可能的 SQL 数据库模式，而是使用与 ORM 的使用模式配合良好的子集。因此，您可能需要对架构进行一些调整，以便使用 django 模型对其进行描述。尤其是：

*   Django 不支持复合主键。也就是说，您不能拥有跨多列的主键。
*   Django 期望表被命名`appname_modelname`，因为这种约定允许来自许多应用程序的表轻松地共存于同一个数据库中。

如果您的架构恰好与 django 模型支持的子集匹配，或者您愿意进行更改以使其适应，那么您的任务就是编写与架构匹配的模型。[该`inspectdb`工具](https://docs.djangoproject.com/en/1.5/howto/legacy-databases/)可以提供一个有用的起点。

*您可以通过临时重新配置项目以使用不同的空*数据库并运行来测试您是否成功描述了数据库`manage.py syncdb`，然后将 Django 创建的模式与已经存在的模式进行比较。如果它们相同（或至少足够接近），那么您做对了。

如果您现有的数据库*不能*很好地匹配 Django ORM 的假设，那么更灵活的替代方案是[SQLAlchemy](http://www.sqlalchemy.org/)。它本身并没有集成到 django 的应用程序系统中，但它确实提供了一个更完整的数据库接口，几乎可以与任何数据库一起使用；一些数据库很容易映射，而另一些则需要更多的手动映射工作，但几乎所有情况都应该有一些创造力。

至于与`syncdb`: 的交互，此命令的默认行为是跳过似乎已经在数据库中具有表的任何模型。因此，如果您定义的模型确实与您现有的数据库表匹配，则应该不理会它们。但是，它将创建*项目*中其他应用程序所需的附加表，包括 Django 自己的表。

现代 Django[支持多个数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)，这可以为您提供进一步的方法：将现有数据库配置为项目中的*第二个*数据库源，并使用*数据库路由器*确保从该第二个数据库加载适当的模型，并进一步确保 django 不会尝试`syncdb`在此数据库上运行。这以一些额外的复杂性为代价提供了真正的分离，但它仍然要求您的模式与 ORM 的假设兼容。它也有[一些限制](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#limitations-of-multiple-databases)，主要与保存在不同数据库中的对象之间的关系有关。

如果您希望能够对 Django 使用的数据库进行版本化更改，从您从现有数据库继承的模式开始，那么[South](http://south.aeracode.org/)`syncdb`为支持运行任意 SQL 的内置机制提供了一个更灵活、更完整的替代方案数据定义语言语句来更改您的数据库模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:32:47.587

听起来您需要像[South](http://south.readthedocs.org/en/0.7.6/)这样的东西，它可以让您对模型进行版本化和恢复更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T12:31:04.200

你只需要[`./manage.py inspectdb`](https://docs.djangoproject.com/en/1.5/howto/legacy-databases/).

# ruby-on-rails - How to remove backslashes in string generated through .to_json function. Rails 3.2

> ID：15724212
> 
> 赞同：14
> 
> 时间：2013-03-30T22:29:06.387
> 
> 标签：ruby-on-rails, json

```
["{\"id\":317277848652099585,\"Tweet text\":\"Food Carnival by KMS Homemade Food\\nOn the      occasion of this Holi and Good Friday, KMS Homemade Foods invites you...     http://t.co/2Y2mO6vr76\",\"Word count\":21,\"Url\":\"true\"}"] 
```

a is a hash with some keys and values.

```
 a = a.to_json 
```

converts the hash to a string. Now a is a string with all backslashes... I know tha

```
 puts a 
```

returns a string with all backslashes removed but what if i want to store the 'backslash removed string' in a variable?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-12-08T17:58:12.057

It's much better to use `as_json` instead. Provides the json without backslashes.

For reference, [http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-30T22:35:56.663

You can just `gsub!` to replace the `\"` with a single quote `'`, like so:

```
a.gsub!(/\"/, '\'') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T12:58:01.907

I faced the same problem and I did `eval(a)` and it gave me actual hash with no double quotes and slashes although `eval` is considered security risk

# extjs - ext js 4 rowediting how to add custom attributes for selenium testing id purposes in a grid

> ID：15724217
> 
> 赞同：0
> 
> 时间：2013-03-30T22:29:28.960
> 
> 标签：extjs, webdriver, selenium-webdriver, extjs4.1

I have an ext js grid that uses the plugin row editing. I need to write selenium test scripts and would like to assign static ids or custom attributes to the row editing form fields and update and cancel buttons.. I know how to rename button text.. but what I really need to do is add a attribute so I can reference with selenium testing.

See fiddle [demo](http://jsfiddle.net/remy/AVTrU/6/).. if someone could show me how it would be appreciated (newbie extjs).

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data: [
        {"name":"Lisa", "email":"lisa@simpsons.com", "phone":"555-111-1224"},
        {"name":"Bart", "email":"bart@simpsons.com", "phone":"555--222-1234"},
        {"name":"Homer", "email":"home@simpsons.com", "phone":"555-222-1244"},
        {"name":"Marge", "email":"marge@simpsons.com", "phone":"555-222-1254"}
    ]
});

var grid = Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        {header: 'Name',  dataIndex: 'name', editor: 'textfield'},
        {header: 'Email', dataIndex: 'email', flex:1,
            editor: {
                xtype: 'textfield',
                allowBlank: false
            }
        },
        {header: 'Phone', dataIndex: 'phone'}
    ],
    selType: 'rowmodel',
    plugins: [
        Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToEdit: 1,
            pluginId: 'qqrowEditingqq'
        })
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
});
if (Ext.grid.RowEditor) {
        Ext.apply(Ext.grid.RowEditor.prototype, {
            saveBtnText : "Guardar",
            cancelBtnText : "Cancelar",
            errorsText : "Errores",
            dirtyText : "Debe guardar o cancelar sus cambios"
        });
    }
grid.on('beforeedit', function(e) {
    if (e.record.get('phone') == "555-111-1224")
        grid.getPlugin('qqrowEditingqq').editor.form.findField('name').disable();
    else
        grid.getPlugin('qqrowEditingqq').editor.form.findField('name').enable();
}); 
```

I don't want to do xpath for this.

we will be doing grids and roweditng on many pages and would like to write selenium test scripts that select the object some sort of attribute that targets one form field or button within a grid.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:30:20.267

您可以为面板中的所有元素添加类名。

例如，添加`cls: 'panel-simpsons'`到面板，添加`cls: 'header-name', tdCls: 'col-name'`到每一列（这里不是您要求的，但我认为可能对其他测试有用）， x-grid-row-editor 可以通过 cssselector 定位`.panel-simpsons .x-grid-row-editor`，那么您将有两个这里面的按钮。

示例 ExtJs 代码：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data: [
        {"name":"Lisa", "email":"lisa@simpsons.com", "phone":"555-111-1224"},
        {"name":"Bart", "email":"bart@simpsons.com", "phone":"555--222-1234"},
        {"name":"Homer", "email":"home@simpsons.com", "phone":"555-222-1244"},
        {"name":"Marge", "email":"marge@simpsons.com", "phone":"555-222-1254"}
    ]
});

var grid = Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    cls: 'panel-simpsons', // NEW!!!
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        {header: 'Name',  dataIndex: 'name', cls: 'header-name', tdCls: 'col-name', editor: 'textfield'}, // NEW!!!
        {header: 'Email', dataIndex: 'email', flex:1, cls: 'header-email', tdCls: 'col-email', // NEW!!!
            editor: {
                xtype: 'textfield',
                allowBlank: false
            }
        },
        {header: 'Phone', dataIndex: 'phone', cls: 'header-phone', tdCls: 'col-phone'} // NEW!!!
    ],
    selType: 'rowmodel',
    plugins: [
        Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToEdit: 1,
            pluginId: 'qqrowEditingqq'
        })
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
});
if (Ext.grid.RowEditor) {
        Ext.apply(Ext.grid.RowEditor.prototype, {
            saveBtnText : "Guardar",
            cancelBtnText : "Cancelar",
            errorsText : "Errores",
            dirtyText : "Debe guardar o cancelar sus cambios"
        });
    }
grid.on('beforeedit', function(e) {
    if (e.record.get('phone') == "555-111-1224")
        grid.getPlugin('qqrowEditingqq').editor.form.findField('name').disable();
    else
        grid.getPlugin('qqrowEditingqq').editor.form.findField('name').enable();
}); 
```

现在是用于定位元素的示例 C# 代码：

（请注意，定位器被链接以简化 CssSelector，开始使用`WebDriver.FindElement`, then `PanelSimpsons.FindElement`, then `GridRowEditor.FindElement`）

```
public IWebElement PanelSimpsons {
    get { return WebDriver.FindElement(By.CssSelector(".panel-simpsons")); }
}

public IWebElement ColumnHeaderName {
    get { return PanelSimpsons.FindElement(By.CssSelector(".header-name")); }
}

public IList<IWebElement> ColumnName {
    get { return PanelSimpsons.FindElements(By.CssSelector(".col-name")); }
}

#region Row editor
public IWebElement GridRowEditor {
    get { return PanelSimpsons.FindElement(By.CssSelector(".x-grid-row-editor")); }
}

public IWebElement InputName {
    get { return GridRowEditor.FindElement(By.CssSelector("input[name='name']")); }
}

public IWebElement InputEmail {
    get { return GridRowEditor.FindElement(By.CssSelector("input[name='email']")); }
}

public IList<IWebElement> RowEditorButtons {
    get { return GridRowEditor.FindElements(By.CssSelector("div.x-grid-row-editor-buttons button")); }
}

public IWebElement BtnUpdate {
    get { return RowEditorButtons[0]; }
}

public IWebElement BtnCancel {
    get { return RowEditorButtons[1]; }
}
#endregion 
```

# java - 通过Java中的子目录过滤文件名

> ID：15724220
> 
> 赞同：1
> 
> 时间：2013-03-30T22:29:44.257
> 
> 标签：java, android, mp3

我正在创建一个 android 应用程序，它将搜索一个目录，获取所有以 .mp3 结尾的文件并将它们添加到一个数组列表中。我的起点位于 /sdcard/，但并非所有音乐文件都直接位于该路径中。其余的位于 /sdcard/Music/(artist)/.... 我试图让我的 FilenameFilter 继续通过子目录，然后将其添加到列表中。这是我正在使用的代码：

```
class Mp3Filter implements FilenameFilter{
    public boolean accept(File dir, String name){
        return(name.endsWith(".mp3")&& dir.isDirectory());
    }

    private void updatePlaylist() {
        File home = new File(SD_PATH);
        if(home.listFiles(new Mp3Filter()).length>0){
            for(File file : home.listFiles(new Mp3Filter())){
                songs.add(file.getName());
            }
            ArrayAdapter<String> songList = new ArrayAdapter<String>(this,R.layout.song_item, songs);
            setListAdapter(songList);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:47:45.003

像这样进行递归调用：

```
private void updatePlaylist() {
  File home = new File(SD_PATH);
  addToSongs(home);
  if(songs.length>0){

    ArrayAdapter<String> songList = new ArrayAdapter<String>(this,R.layout.song_item, songs);
    setListAdapter(songList);
  }

}

private void addToSongs(home)
  for(File file : home.listFiles(new Mp3Filter())){

   if(file.isDirectory()){
     //recursive call
     addToSongs(file);
   } else{
     songs.add(file.getName());`
   }
} 
```

# recursion - Polymorphic recursion in OCaml: return values

> ID：15724221
> 
> 赞同：2
> 
> 时间：2013-03-30T22:29:56.213
> 
> 标签：recursion, ocaml, polymorphism

Continuing my series of questions regarding type-level arithmetic, I stumbled across another problem: return types of polymorphic recursive functions.

This is the code:

```
module Nat : sig
  type z = Z
  type 'n s = S of 'n

  type ('n) nat =
          Zero : (z) nat
        | Succ : ('n) nat -> ('n s) nat

  val of_int : int -> 'n nat
end = struct
  type z = Z
  type 'n s = S of 'n
  type ( 'n) nat =
          Zero : ( z) nat
        | Succ : ('n) nat -> ('n s) nat

  let rec of_int n : int -> 'n nat = function
        0 -> Zero
        | n -> Succ (of_int (n - 1))
end 
```

Compiling yields:

```
Error: This expression [Succ (of_int (n - 1))] has type 'a s nat
   but an expression was expected of type z nat 
```

The problem is that the return value of the function is set to z nat by Zero in the first pattern matching clause. Instead it should be something like 'a. 'a nat? This problem also occurs when trying to make a function that adds two different Nat:s.

Grateful for your help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:58:20.573

The type `int -> 'n nat`, means `forall n, int -> n nat`: the *user* of the function may choose at which `n`to use the function. So you could call the `of_int` function saying "hey, give me a `(z s) nat` this time", just like you can pick which type `[] : 'a list` ends up being. That doesn't match what really happens, which is that you do not choose the type, it is determined by the value of the integer.

By definition, the value of the integer is not known to the type system, so you can't say precisely which type `n nat` you will get as a result. All you can say is that there *exists* some type `n` such as the result has type `n` nat. You can express that using "existential types", and there are various ways to do that, GADTs being one of them (GADTs are algebraic datatypes plus existential types and equality constraints).

```
type some_nat =
| Some : 'n nat -> some_nat

let rec of_int = function
| 0 -> Some Zero
| n ->
  let (Some nat) = of_int (n - 1) in
  Some (Succ nat) 
```

`some_nat` is an existential wrapping around `nat`, it is equivalent to what you might write `exists n. n nat` if you had first-class existential types.

Handling addition is even harder, because you have to express at the type level that the type you get in return really corresponds to the addition of two other types. Here is how I defined the type for it:

```
type (_, _, _) add =
| AddZ : (z, 'b, 'b) add
| AddS : ('a, 'b, 'c) add -> ('a s, 'b, 'c s) add

type ('a, 'b) add_result =
| Result : ('a, 'b, 'c) add * 'c nat -> ('a, 'b) add_result

let rec add : type a b . a nat -> b nat -> (a, b) add_result = function
   ... 
```

I'll let you define the body of `add` so that you can play with this stuff yourself.

I'm not very happy of all the runtime wrapping that goes around the `add` type (which is really just useful as a type-level witness), so maybe there is a better way.

# fabric - How to simulate fabric execution

> ID：15724231
> 
> 赞同：1
> 
> 时间：2013-03-30T22:30:54.933
> 
> 标签：fabric

Is there a way to tell fabric to just print the commands it will execute instead of actually execute them?

I'm preparing an installation script and if it fails I'll have to uninstall the steps previous to error occurrence.

I've checked the "fab" command parameters but found nothing about this.

Thank you for your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:52:04.800

There are tickets (including [issue 26](https://github.com/fabric/fabric/issues/26)) open on github that request such a feature. The challenge described in that thread is that you can't always be certain what the script would do - ie/ some behaviour may change depending on the state of the remote server.

As an alternative, you could look at reproducing your environment in a virtual machine ([vagrant](http://www.vagrantup.com/) makes doing this really easy), and testing to see whether your scripts run as expected there.

If you're really concerned about this, a configuration management system (particularly one that can reverse changes) like [puppet](https://puppetlabs.com/) or [chef](http://www.opscode.com/chef/) may make more sense.

# jsf - Primefaces中延迟加载的分页无法正常工作

> ID：15724232
> 
> 赞同：3
> 
> 时间：2013-03-30T22:31:05.143
> 
> 标签：jsf, primefaces, datatable, liferay, lazy-loading

我在 dataTable 中遇到延迟加载问题，但不知道问题出在哪里，这是我的 xhtml 页面代码：

```
 <f:view xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Application</title>
</h:head>
<h:body>
    <h:form>
        <h:panelGrid columns="2">
          <h:outputLabel value="Element per page"/>
          <p:selectOneMenu value="#{applicationManagementListBean.pageSize}">
              <f:selectItem itemLabel="5" itemValue="5"/>
              <f:selectItem itemLabel="10" itemValue="10"/>
              <f:selectItem itemLabel="30" itemValue="30"/>
              <f:selectItem itemLabel="50" itemValue="50"/>
              <p:ajax event="change" update="applicationDataList"/>
          </p:selectOneMenu>
        </h:panelGrid>
        <p:commandButton value="New application"
            action="inscription.xhtml?faces-redirect=true" ajax="false" />
        <p:dataTable id="applicationDataList" value="#{applicationManagementListBean.applications}"
            var="app" paginator="true"
            rows="#{applicationManagementListBean.pageSize}" lazy="true"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

            <p:column headerText="Code">
                <h:outputText value="#{app.code}" />
            </p:column>

            <p:column headerText="Name">
                <h:outputText value="#{app.name}" />
            </p:column>

            <p:column headerText="Abreviate name">
                <h:outputText value="#{app.abrevName}" />
            </p:column>

            <p:column headerText="Status">
                <h:outputText value="#{app.status.description}" />
            </p:column>

        </p:dataTable>
    </h:form>

</h:body>
     </f:view> 
```

和豆代码：

```
@ManagedBean
@ViewScoped
public class ApplicationManagementListBean implements Serializable {

    private static final long serialVersionUID = 1L;

    @ManagedProperty(value = "#{applicationManagementService}")
    public ApplicationManagementRemote applicationManagementService;

    private Integer pageSize = 3;
    private DataProxyLazyDataModel data;

    public void setApplicationManagementService(
            ApplicationManagementRemote applicationManagementService) {
        this.applicationManagementService = applicationManagementService;
    }

    public LazyDataModel<Object> getApplications() {
        data = new DataProxyLazyDataModel(applicationManagementService);
        data.setPageSize(pageSize);
        return data;
    }

    public Integer getPageSize() {
        return pageSize;
    }

    public void setPageSize(Integer pageSize) {
        this.pageSize = pageSize;
    }

    public DataProxyLazyDataModel getData() {
        return data;
    }

    public void setData(DataProxyLazyDataModel data) {
        this.data = data;
    }

  } 
```

当我点击下一页按钮时没有任何反应

请帮忙，非常感谢，Rachid

primegaces 3.4.2，liferay 门户 6.1，日食

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T04:35:01.013

尝试添加`setRowCount()`到您的`lazyDataModel`.

例如：

```
lazyDataModel.setRowCount(rows); 
```

其中 rows 代表数据库中要显示的总记录`DataTable`。在您的情况下，代码是：

```
data.setRowCount(rows); 
```

# php - 在画布应用中直接请求权限

> ID：15724233
> 
> 赞同：1
> 
> 时间：2013-03-30T22:31:06.017
> 
> 标签：php, facebook, sdk

是否有一些新方法可以解决像[Facebook 这样的问题 - 如何使用 iframe 应用程序直接进入请求权限对话框？](https://stackoverflow.com/questions/4382017/facebook-how-to-go-directly-to-the-request-permission-dialog-with-an-iframe-ap) 因为从这个链接中的问题回答，不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:39:38.207

```
<script type='text/javascript'>top.location.href = '$loginUrl';</script> 
```

用这个 ：）

# visual-studio - Visual Studio checkout from TFS

> ID：15724234
> 
> 赞同：7
> 
> 时间：2013-03-30T22:31:11.340
> 
> 标签：visual-studio, visual-studio-2012

This question is about Visual Studio and Team Foundation Server ( TFS ). Im a novice with TFS and got a bit confused over a thing.

If I have connected to a TFS-project through VS and have all the code in VS. If I start editing a file I see a message like "foo.cs has been automatically checked out for editing." Does other people in the project see that? I just want to test things locally and dont want to affect other people in the project.

I am also a bit confused about that it says that is " has been automatically checked out for editing". I mean I already see the code in VS so I thought I had already checked it out.

I am used to work with SVN and haven't really worked with TFS before but in SVN you have to check out the code to be able to see it in your IDE of choice.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:35:24.700

Yes, other people will see that you checked out the file. They will still be able to edit it. There is a setting in Tool -> Options -> Version Control not to check out files automatically.

# c# - Library for static System.Data.Linq.DataContext

> ID：15724242
> 
> 赞同：0
> 
> 时间：2013-03-30T22:32:34.900
> 
> 标签：c#, linq-to-sql

i need to write a library (dll) in c# to handle correctly multiple instances of DataContext.

This library must be written for a global using (web, console, etc..).

On a my old DB library, i create a type with private costructor, and a static property, for simplify my projects

An example:

```
public class DbClass
{
    private DbClass() { }

    private static DbClass instance;
    public static DbClass Instance
    {
        get
        {
            if (DbClass.instance == null)
                DbClass.instance = new DbClass();
            return DbClass.instance;
        }
    }
} 
```

An example of use:

```
public void Update()
{
    DbClass.Instance.ExecuteSql("UPDATE Users SET IsUpdated = 'True'");
} 
```

This class stored only a string (connectionString) into its static instance: no problems in web context, no problems in console context.

But i need to reuse this concept with linq-to-sql, by extending the DataContext type.

Any ideas?

**EDIT:**

By the first comment of Grant Thomas, i think my request is not explained good, and maybe my bad english not help..

I need to write a .Net Library (dll) to manage DB Data by a static DataContext Property:

this property must detect the current Context (web, windows MTA Thread, windows STA Thread)

and create/reuse instances of DataContext without throwing ThreadExceptions or others conflicts.

A sort of DataContextFactory...

Any comments/ideas was appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:13:13.207

Well, If I gave you the best answer you might as well choose me...

Would not go there if I were you. Read [http://www.west-wind.com/weblog/posts/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management](http://www.west-wind.com/weblog/posts/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:51:19.470

You can extend your DataContext easily enough by creating another file under the same namespace:

```
namespace MyDataContextNamespace {
  public partial class MyDataContext { 

  }
} 
```

Then you can expose your singleton from there.

# java - 在JAVA中显示JTable中所有反序列化的对象

> ID：15724243
> 
> 赞同：0
> 
> 时间：2013-03-30T22:32:44.947
> 
> 标签：java, swing, serialization, jtable, deserialization

我想在表格中显示所有对象。

我有一个名为 /menschen 的文件夹，其中包含如下文件：“firstname.lastname.ser”

```
package adressverwaltung;

import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.JOptionPane;
// FILE
import java.io.*;
import java.util.*;
import java.util.Formatter;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.awt.HeadlessException;
import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SpringLayout;

/**
 *
 * @author 
 */
public class Adressverwaltung {

    JFrame mainWindow;
    final File folder = new File("menschen");

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        Adressverwaltung verweiss = new Adressverwaltung();
        verweiss.main();

    }

    public void main() {
        mainWindow = new JFrame();
        mainWindow.setBounds(0, 0, 800, 400);
        mainWindow.setLocationRelativeTo(null);

        mainWindow.setLayout(null);
        mainWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainWindow.setResizable(false);
        mainWindow.setVisible(true);
        mainWindow.setLayout(new FlowLayout());

        menu();

    }

    public String deserialize(String m, int field) {

        try {

            FileInputStream fin = new FileInputStream("menschen\\" + m);
            ObjectInputStream ois = new ObjectInputStream(fin);
            Person n = (Person) ois.readObject();
            ois.close();

            switch (field) {
                case 1:
                    return n.vorname;
                case 2:
                    return n.nachname;
            }

        } catch (Exception ex) {
            ex.printStackTrace();

        }
        return null;

    }

    public static void table(String[][] alle) {

        String[] columnNames = {
            "Vorname", "Nachname"
        };
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTable table = new JTable(alle, columnNames);
        f.add(new JScrollPane(table));
        f.pack();
        f.setVisible(true);
    }

    private static void serialize(Person m) {

        try {
            FileOutputStream fileOut =
                    new FileOutputStream("menschen\\" + m.vorname + "." + m.nachname + ".ser");
            ObjectOutputStream out =
                    new ObjectOutputStream(fileOut);
            out.writeObject(m);
            out.close();
            fileOut.close();
        } catch (IOException i) {
        }
    }

    public void menu() {

        JPanel list = new JPanel();

        list.setBorder(BorderFactory.createLineBorder(Color.black));
        list.setPreferredSize(new java.awt.Dimension(400, 360));
        list.setBackground(Color.white);
        mainWindow.add(list);
        // Wir lassen unseren Dialog anzeigen
        mainWindow.setVisible(true);

        int ButtonWidth = 100;
        int ButtonHeight = 30;
        int ButtonTop = 10;

        JButton Button1 = new JButton("List all");
        JButton Button3 = new JButton("Search");

        Button1.setBounds(10, ButtonTop, ButtonWidth, ButtonHeight);
        Button3.setBounds(230, ButtonTop, ButtonWidth, ButtonHeight);

        list.add(Button1);
        list.add(Button3);

        mainWindow.add(list);

        createForm();

        Button1.addActionListener(new ActionListener() {
            public void actionPerformed(final ActionEvent e) {
                list(folder);
            }
        });
    }

    public void list(final File folder) {
        String[][] rowData = new String[3][];

        int r = 0;
        for (final File fileEntry : folder.listFiles()) {
            if (fileEntry.isDirectory()) {
            } else {
                String name = fileEntry.getName();

                rowData[r][0] = deserialize(name, 1);
                rowData[r][1] = deserialize(name, 2);

                r++;
            }
        }

        table(rowData);
    }

    private void createForm() {

        JPanel p = new JPanel();
        p.setLayout(new GridLayout(3, 2));
        JButton b = new JButton("Neue Person!");
        JLabel vornameLabel = new JLabel("Vorname:");
        final JTextField vorname = new JTextField();
        JLabel nachnameLabel = new JLabel("Nachname:");
        final JTextField nachname = new JTextField();

        p.add(vornameLabel);
        p.add(vorname);
        p.add(nachnameLabel);
        p.add(nachname);
        p.add(b);
        p.setBorder(BorderFactory.createLineBorder(Color.black));
        p.setPreferredSize(new java.awt.Dimension(300, 100));
        p.setBackground(Color.white);
        mainWindow.add(p);
        // Wir lassen unseren Dialog anzeigen
        mainWindow.setVisible(true);

        b.addActionListener(new ActionListener() {
            public void actionPerformed(final ActionEvent e) {
                Person m = new Person(vorname.getText(), nachname.getText());
                serialize(m);
                JOptionPane.showMessageDialog(null, vorname.getText() + "." + nachname.getText() + ".ser abgespeichert.", "Tutorial 2", JOptionPane.INFORMATION_MESSAGE);
            }
        });
    }
} 
```

这是我的 Person 类：

```
package adressverwaltung;

/**
 *
 * @author Mahshid
 */
class Person implements java.io.Serializable {
    // Allgemeine Kontaktinformationen:

    public String vorname;
    public String nachname;
    // Adresse
    public String strasse;
    public int hausnummer;
    public int postleitzahl;
    public String ort;
    public String land;
    // Telefon
    public int mobil;
    public int festnetz;
    // Email & Kommentar
    public String mail;
    public String kommentar;

    Person(String vorname, String nachname) {
        this.vorname = vorname;
        this.nachname = nachname;
    }
} 
```

我认为 list() 函数存在问题。这是我的第一个 java 代码，所以如果你看到任何大的错误，请不要高估:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:42:41.007

通过像这样创建一个二维数组：

```
String[][] rowData = new String[3][]; 
```

您正在创建一个未初始化所有“列”数据的数组。您可以通过以下方式自行检查：

```
for (String[] s: rowData) {
   System.out.println(s); 
} 
```

因此，尝试将任何外部数组元素分配给单个元素`String`是不可能的：

```
rowData[r][0] = deserialize(name, 1); 
```

# javascript - Eclipse Aptana Javascript 通过#region 和#endregion 自定义折叠

> ID：15724248
> 
> 赞同：1
> 
> 时间：2013-03-30T22:33:26.497
> 
> 标签：javascript, eclipse, aptana, dtd, folding

我已阅读以下类似主题：

*   [Aptana 折叠/折叠 javascript 代码](https://stackoverflow.com/questions/3356902/aptana-folding-collapsing-javascript-code)
*   [JavaScript 中的区域/代码崩溃？（阿普塔纳工作室）](https://stackoverflow.com/questions/5377930/regions-code-collapse-in-javascript-aptana-studio)

然而，答案并不让我满意。我想决定 Aptana 应该在哪里做我需要的折叠。等待数亿年直到 Aptana 人甚至开始考虑这不是一个选择。

大多数编辑器将折叠的东西保存在 .dtd 文件中。有人知道我如何自己引入区域折叠点吗？

# matlab - Opening multiple GUI windows in MATLAB at the same time?

> ID：15724249
> 
> 赞同：0
> 
> 时间：2013-03-30T22:33:35.177
> 
> 标签：matlab

I am very new to MATLAB so this might be quite obvious, but I can't find a solution. I am using a MATLAB toolbox called MatCont. When opening the GUI provided by this toolbox, multiple windows open. Everytime I switch to another window (say - my browser), I have to reopen these GUI windows one by one.

Is there any way to get MATLAB to associate these windows into one configuration and make it easy to open the GUI in one click?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:44:36.507

Two rather obvious possibilities spring to mind:

1.  Dock the windows within Matlab itself. When you want to switch back to your Matlab session and view the toolbox windows, all you need to do is switch back to Matlab.

2.  Just minimize the browser window to the taskbar. The windows opened by your Matlab session should then return to the foreground.

In addition, since this kind of question is very much system dependent, it might help if you'd specify precisely what operating system and/or window manager you're using.

# javascript - 为什么访问对象属性总是比访问数组项更快？

> ID：15724251
> 
> 赞同：8
> 
> 时间：2013-03-30T22:33:43.570
> 
> 标签：javascript, performance

我对两种方法进行了基准测试：

**访问数组项**

```
var object = [10, 15, 20];
var x = object[0];
var y = object[1];
var z = object[2]; 
```

和**访问对象属性**

```
var object = {
  x: 10,
  y: 15,
  z: 20
};
var x = object.x;
var y = object.y;
var z = object.z; 
```

我希望对数组项的访问速度更快，~~因为不涉及属性名称解析~~。

然而，令我惊讶的是，在所有浏览器中访问对象属性的速度大约*快了 30% 。*

![图表](../Images/57bdc99e91cdbb47d2813f5b72e3cfba.png) [[基准网址]](http://jsperf.com/object-properties-and-array-items)

基准测试结果让我感到困惑。为什么前一种方法比后者慢得多？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T22:39:52.483

您已经在测试中包含了对象和数组的创建。如果你把它放在初始化代码中，差异会变得非常小：

[http://jsperf.com/object-properties-and-array-items/2](http://jsperf.com/object-properties-and-array-items/2)

# delphi - Reading response from TIdDNSResolver?

> ID：15724253
> 
> 赞同：2
> 
> 时间：2013-03-30T22:33:57.693
> 
> 标签：delphi, dns, delphi-xe2, indy, indy10

I cannot find any simple examples of a DNS lookup using Indy 10's `TIdDNSResolver` component. They're all either for something I don't need (such as MX/SMTP), or are talking *terms* with no *code*. I have tried reading the result based on the few resources I can find, but don't know how I'm supposed to be reading the result.

Here's what I have so far...

```
uses
  IdBaseComponent, IdComponent, IdTCPConnection, IdDNSResolver;

function TForm1.Lookup(const Name: String): String;
var
  X: Integer;
begin
  //DNS: TIdDNSResolver
  DNS.QueryType:= [qtA];
  DNS.Resolve(Name);
  for X:= 0 to DNS.QueryResult.Count-1 do begin
    if DNS.QueryResult[X].RecType = qtA then
      //Result:= DNS.QueryResult[X].RData;    <--- ????
  end;
end; 
```

usage...

```
HostIP:= Lookup('www.google.com'); 
```

How do I read this response?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T01:13:18.503

You will need to typecast the [`QueryResult`](http://www.indyproject.org/docsite/html/TIdDNSResolver_QueryResult.html) collection item to a specific [`TResultRecord`](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TResultRecord.html) descendant depending on the [`RecType`](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TResultRecord_RecType.html) property value of the item. From the [`Items`](http://www.indyproject.org/docsite/html/TQueryResult_Items.html) property reference:

> Use casting to return an object reference that allows access to any properties or method specific to the descendant class associated with the value in TResultRecord.RecType.

The name pattern of the [`TResultRecord`](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TResultRecord.html) descendant classes is like this:

```
T<DNS lookup type>Record 
```

So in your case it would look like this:

```
for X := 0 to DNS.QueryResult.Count - 1 do 
begin
  if DNS.QueryResult[X].RecType = qtA then
    Result := TARecord(DNS.QueryResult[X]).IPAddress; // "A" lookup -> TARecord
end; 
```

For a [`AAAA`](https://www.rfc-editor.org/rfc/rfc3596) lookup type it would be:

```
for X := 0 to DNS.QueryResult.Count - 1 do 
begin
  if DNS.QueryResult[X].RecType = qtAAAA then
    Result := TAAAARecord(DNS.QueryResult[X]).Address; // "AAAA" lookup -> TAAAARecord
end; 
```

Example functions for IPv4 and IPv6 DNS lookups you may [`find here`](http://pastebin.com/QLn8WKkg).

# c++ - 读出一个字符串流并将其插入不同的向量中

> ID：15724254
> 
> 赞同：4
> 
> 时间：2013-03-30T22:33:59.717
> 
> 标签：c++, sfml

（如果我问错这个问题，我很抱歉，这是我第一次在论坛上写）

当我开始在我的 SFML - Game 上编程时，我有一本非常古老的书，它非常类似于 C（例如 atoi() 的推荐；）。
现在我有了一本新的 C++（包括 C++11）书，我想用更新的代码重写旧行。

我将 Tiles 保存在一个像这样存储的文件中：

```
[0-0,15-1|22,44] [0-1|0]
[4-0,10-1,3-1|0] [0-5,5-5|0] 
```

这意味着：
[...] 描述 Tile
0-0 等是纹理表上的 xy 位置
22 等是将被触发的事件。
事件的数量和 sf::Vector2i 不应该经常设置。

Tiles 是从另一个类中单独取出的，该类管理整个 Tilemap。

现在我的问题：我不知道我应该如何将字符串中的数字推送到两个向量中？我的代码：

```
class Tile{
     private:
          std::deque<sf::Sprite> tile;
      std::deque<int> event;
     public:

    Tile(sf::Texture& texture, std::deque<sf::Vector2i>&& ctor_texturerects, std::deque<int>&& ctor_events);//This one is working fine

    Tile(sf::Texture& texture, std::stringstream&& ctor_stream/*reads the Tile*/){

      std::deque<sf::Vector2i> temp_texturerects;
      std::deque<int>temp_events;
      /*TODO: filter the stringstream and push them into the containers*/
      Tile::Tile(texture,std::move(temp_texturerect),std::move(temp_events));
} 
```

如果你能给我另一个解决方案，我也会很高兴，比如将 sf::Vector2i 更改为更好的解决方案或给我一个更好的流和类概念
在此先感谢
Xeno Ceph

编辑：
我做了一些解决方法：（
我将输入流更改为普通字符串）
但是代码看起来不太好必须有一个更简单的解决方案

```
Tile::  Tile(sf::Texture& texture, std::string&& ctor_string){
    std::deque<sf::Vector2i> temp_texturerects;
    std::deque<int> temp_events;
    std::stringstream strstr;

    for(int i=0; i<ctor_string.size(); ++i){
        while(ctor_string[i]!='|'){

            while(ctor_string[i] != ','){
                strstr << ctor_string[i];
            }
            sf::Vector2i v2i;
            strstr >> v2i.x >> v2i.y;
            temp_texturerects.push_front(v2i);
            strstr.str("");
        }
        while(ctor_string[i]!=']'){
            while(ctor_string[i] != ','){
                strstr << ctor_string[i];
            }
            int integer;
            strstr  >> integer;
            temp_events.push_front(integer);
            strstr.str("");
        }
    }
    Tile::Tile(texture, std::move(temp_texturerects), std::move(temp_events));
} 
```

有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:08:20.107

如果我正确理解你的问题，你有一些形式的字符串

```
[0-0,15-1|22,44] [0-1|0]
[4-0,10-1,3-1|0] [0-5,5-5|0] 
```

并且您想要提取 2 种类型的数据 - 位置（例如 0-0）和事件（例如 22）。您的问题是如何干净地提取这些数据，丢弃`[`and`]`字符等。

解决此问题的一种好方法是使用对字符串流`getline`进行操作的函数，该函数继承自 std::istream ( [http://www.cplusplus.com/reference/string/string/getline/](http://www.cplusplus.com/reference/string/string/getline/) )。它可以采用自定义分隔符，而不仅仅是换行符。因此，您可以使用`'['`,`'|'`和`']'`作为不同的分隔符并按逻辑顺序解析它们。

例如，由于您的字符串只是瓷砖的集合，您可以将其拆分为多个函数 -和`ParseTile`，如下所示：`ParsePositions``ParseEvents`

```
void Tile::ParseInput(stringstream&& ctor_string) {

  //extract input, tile by tile
  while(!ctor_string.eof()) {
    string tile;

    //you can treat each tile as though it is on a separate line by
    //specifying the ']' character as the delimiter for the "line"
    getline(ctor_string, tile, ']');
    tile += "]"; //add back the ']' character that was discarded from the getline

    //the string "tile" should now contain a single tile [...], which we can further process using ParseTile
    ParseTile(tile);
  }

} 
```

ParseTile 函数：

```
void Tile::ParseTile(string&& tile) {
  //input string tile is e.g. " [0-0, 15-1|22,44]"

  string discard; //string to hold parts of tile string that should be thrown away
  string positions; //string to hold list of positions, separated by ','
  string events; //string to hold events, separated by ','

  //create stringstream from input
  stringstream tilestream(tile);
  //tilestream is e.g. "[0-0,15-1|22,44]"

  getline(tilestream, discard, '['); //gets everything until '['
  //now, discard is " [" and tilestream is "0-0,15-1|22,44]"

  getline(tilestream, positions, '|');
  //now, positions is "0-0,15-1" and tilestream is "22,44]"

  getline(tilestream, events,']');
  //now, events is "22,44" and tilestream is empty

  ParsePositions(positions);

  ParseEvents(events);

} 
```

您可以编写自己的 ParsePositions 和 ParseEvents 函数，它们基本上将是使用“，”作为分隔符的更多 getline 调用（循环直到字符串结束）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:56:10.387

我建议要么手动编写适当的解析器（与其他答案建议的不同），要么使用适当的解析框架，如 Boost Spirit。

后者的优点是您可以“免费”获得可调试性、可组合性、属性等。这是我能想到的最简单的例子：

```
struct TileData
{
    std::deque<sf::Vector2i> texturerects;
    std::deque<int>          events;
};

typedef std::deque<TileData> TileDatas;

template <typename It>
struct parser : qi::grammar<It, TileDatas(), qi::space_type>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        v2i = (int_ >> '-' >> int_) 
            [ _val = phx::construct<sf::Vector2i>(_1, _2) ];

        tiledata = 
            (v2i  % ',') >> '|' >>
            (int_ % ',');

        start = *('[' >> tiledata >> ']');
    }
    private:
    qi::rule<It, sf::Vector2i(), qi::space_type> v2i;
    qi::rule<It, TileData(),     qi::space_type> tiledata;
    qi::rule<It, TileDatas(),    qi::space_type> start;
}; 
```

添加一些代码来测试它，在**[http://liveworkspace.org/code/3WM0My$1](http://liveworkspace.org/code/3WM0My%241)**上查看它，输出：

```
Parsed: TileData {
    texturerects: deque<N2sf8Vector2iE> {v2i(0, 0), v2i(15, 1), }
    events:       deque<i> {22, 44, }
}
Parsed: TileData {
    texturerects: deque<N2sf8Vector2iE> {v2i(0, 1), }
    events:       deque<i> {0, }
}
Parsed: TileData {
    texturerects: deque<N2sf8Vector2iE> {v2i(4, 0), v2i(10, 1), v2i(3, 1), }
    events:       deque<i> {0, }
}
Parsed: TileData {
    texturerects: deque<N2sf8Vector2iE> {v2i(0, 5), v2i(5, 5), }
    events:       deque<i> {0, }
} 
```

完整代码：

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
// #define BOOST_SPIRIT_DEBUG
#include <boost/fusion/adapted/struct.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi = boost::spirit::qi;
namespace phx= boost::phoenix;

// liveworkspace.org doesn't have SFML
namespace sf { struct Vector2i { int x, y;  Vector2i(int ax=0, int ay=0) : x(ax), y(ay) {} }; }

struct TileData
{
    std::deque<sf::Vector2i> texturerects;
    std::deque<int>          events;
};

BOOST_FUSION_ADAPT_STRUCT(TileData,
        (std::deque<sf::Vector2i>, texturerects)
        (std::deque<int>, events))

typedef std::deque<TileData> TileDatas;

template <typename It>
struct parser : qi::grammar<It, TileDatas(), qi::space_type>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        v2i = (int_ >> '-' >> int_) 
            [ _val = phx::construct<sf::Vector2i>(_1, _2) ];

        tiledata = 
            (v2i  % ',') >> '|' >>
            (int_ % ',');

        start = *('[' >> tiledata >> ']');
    }
    private:
    qi::rule<It, sf::Vector2i(), qi::space_type> v2i;
    qi::rule<It, TileData(),     qi::space_type> tiledata;
    qi::rule<It, TileDatas(),    qi::space_type> start;
};

typedef boost::spirit::istream_iterator It;

std::ostream& operator<<(std::ostream& os, sf::Vector2i const &v) { return os << "v2i(" << v.x << ", " << v.y << ")"; }

template <typename T> std::ostream& operator<<(std::ostream& os, std::deque<T> const &d) {
    os << "deque<" << typeid(T).name() << "> {";
    for (auto& t : d) os << t << ", ";
    return os << "}";
}

std::ostream& operator<<(std::ostream& os, TileData const& ttd) {
    return os << "TileData {\n"
        "\ttexturerects: " << ttd.texturerects << "\n"
        "\tevents:       " << ttd.events << "\n}";
}

int main()
{
    parser<It> p;

    std::istringstream iss(
            "[0-0,15-1|22,44] [0-1|0]\n"
            "[4-0,10-1,3-1|0] [0-5,5-5|0]");

    It f(iss), l;

    TileDatas data;
    if (qi::phrase_parse(f,l,p,qi::space,data))
    {
        for (auto& tile : data)
        {
            std::cout << "Parsed: " << tile << "\n";
        }
    }

    if (f != l)
    {
        std::cout << "Remaining unparsed: '" << std::string(f, l) << "'\n";
    }
} 
```

# javascript - 在音频播放器中添加缓冲条

> ID：15724255
> 
> 赞同：1
> 
> 时间：2013-03-30T22:34:35.510
> 
> 标签：javascript, html, html5-audio, audiobuffer

我正在使用 HTML5，制作音频播放器。

我想知道如何添加缓冲栏，以便用户可以看到歌曲加载了多长时间。

我尝试使用在一些教程中看到的几个属性，但没有一个有效，而且我找不到关于这个特定主题的任何内容。

这是我正在尝试编辑的[音频播放器。](http://msdn.microsoft.com/en-us/library/ie/gg589528%28v=vs.85%29.aspx)

我希望有人可以指导我如何编辑代码来执行此操作，或者推荐教程、文档或任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:48:51.257

无法保证所有这些都适用于所有浏览器......

...但是，假设，对于这篇文章的其余部分：

```
var audio = new Audio();
audio.src = "//example.com/some-really-long-song.mp3"; 
```

`"canplay"`就能够播放歌曲而言，是第一个有用的事件。
这意味着歌曲的一部分已准备就绪，如果您按下播放按钮，至少可以听到一些声音。

或者`"canplaythrough"`是浏览器猜测您是否可以立即开始播放歌曲，并且它会不停地运行（基于要下载的数据量，以及歌曲当前下载的速度）。

```
audio.addEventListener("canplay", function () { audio.play(); }); 
```

`"durationchange"`是一个在持续时间改变时应该触发的事件。
对于没有元数据或不支持元数据的文件类型，在文件开始加载时整个持续时间可能不可用。
在这些情况下，`audio.duration`可能会通过浏览器下载媒体的第一位，然后是最后一位来更新，并对文件的长度进行有根据的猜测，或者持续时间可能来自浏览器必须加载越来越多的文件，并增加持续时间。就支持而言，我们在哪里，我不知道。

```
audio.addEventListener("durationchange", function () {
    player.time.duration.update(audio.duration);
}); 
```

`"progress"`是一个在数据进入时（下载文件时）触发约 250 毫秒的事件。
`progress`告诉您已对可立即搜索的数据进行了更新。

这使它成为检查`audio.buffered`对象的好事件，以更新进度条的“已加载”部分。

```
audio.addEventListener("progress", function () {
    player.progressBar.update(audio.buffered.start(0), audio.buffered.end(0));
}); 
```

然后就可以使用`"timeupdate"`来处理播放了。随着歌曲的播放（向前移动）
`timeupdate`，将每秒更新几次。`audio.currentTime`

# ios - iOS5 Facebook API：获取朋友并显示

> ID：15724256
> 
> 赞同：0
> 
> 时间：2013-03-30T22:34:51.500
> 
> 标签：ios, objective-c, facebook

我正在开发一个与 Facebook API (iOS 5) 集成的应用程序。我试图让用户朋友的图片显示在初始屏幕上。我下载了一个具有类 FriendPickerDelegate 的示例，并在表格中向用户展示了他的朋友列表，然后他选择了它。但是，我不知道如何获得他的朋友，只是为了在屏幕上展示他们的照片。

我怎样才能做到这一点？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:00:47.447

在[此示例](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/)中，您可以了解如何获取有关已登录用户 (/me) 的信息。为了得到你的朋友，你应该做这样的事情，但`[FBRequest requestForMe]`你会使用`[FBRequest requestForMyFriends]`（[https://developers.facebook.com/docs/reference/ios/3.0/class/FBRequest#requestForMyFriends](https://developers.facebook.com/docs/reference/ios/3.0/class/FBRequest#requestForMyFriends)）而不是 using 。

# jquery - Populating a Kendo UI DropDownList in an Edit Form

> ID：15724264
> 
> 赞同：0
> 
> 时间：2013-03-30T22:36:00.267
> 
> 标签：jquery, kendo-ui

I'm using Kendo UI's DropDownList widget within an edit form and can't seem to set the initial value according to the organisation's ID. I suspect it has everything to do with the 'index' but am stumped as to how to retrieve this information when the edit form fields are populated by a query and the dropdown's options are pulled from remote datasource.

```
$("#organisations").kendoDropDownList({
            dataTextField: "orgName",
            dataValueField: "organisationID",
            index: 0,
            optionLabel: "-- Select --",
            dataSource: {
                transport: {
                    read: "assets/data/data.clients.php"
                },
            }
        }); 
```

Any help is appreciated.

@rrfive

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:04:15.373

To initially select the item according to the field that you want to edit, you should use the **[value](http://docs.kendoui.com/api/web/dropdownlist#configuration-value-String%28default)** configuration. Here is an [example](http://jsbin.com/eticir/16/edit):

e.g.

```
$(document).ready(function() {
              var theId = 3;

                $("#products").kendoDropDownList({
                    dataTextField: "ProductName",
                    dataValueField: "ProductID",
                    value:theId,
                    dataSource: {
                        transport: {
                            read: {
                                dataType: "jsonp",
                                url: "http://demos.kendoui.com/service/Products",
                            }
                        }
                    }
                });
            }); 
```

# c++ - 如何在 Leptonica 的图像（PIX）中围绕矩形创建边框？

> ID：15724268
> 
> 赞同：2
> 
> 时间：2013-03-30T22:36:26.593
> 
> 标签：c++, c, image, leptonica

我有一个 PIX 格式的图像，我也有一个 BOX[带有必要的坐标]，我想在框中的内容周围画一个边框，例如 -
![例子](../Images/923192627f1e4cb0f9c63109e7d321a6.png)

我查看了文档，但到目前为止，我只知道如何为整个图像设置边框，而不仅仅是其中的一个矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T06:28:02.977

您的方法仅适用于 3 bpp 的图像深度。使用 pixPaintBoxa 或 pixDrawBoxa 方法。有关详细信息，请参阅[https://tpgit.github.io/Leptonica/boxfunc3_8c.html#a2dca217227f62a99f6003910420b47ba 。](https://tpgit.github.io/Leptonica/boxfunc3_8c.html#a2dca217227f62a99f6003910420b47ba)这些方法适用于任何 bpp。

但是，要使用这些功能，您必须使用静态 makefile 再次构建 leptonica。有关详细信息，请参阅[http://www.leptonica.com/source/README.html#DEVELOP 。](http://www.leptonica.com/source/README.html#DEVELOP)

# iphone - 获取用户无法在 iphone 中更改离线游戏的日期

> ID：15724270
> 
> 赞同：2
> 
> 时间：2013-03-30T22:36:39.893
> 
> 标签：iphone, ios, mobile, offlineapps

我正在制作游戏的路上。我正在尝试解决一个关于时间的问题。

玩家每十分钟获得生命（当所有游戏权利完成时）。（同时，我会像糖果迷一样在应用内出售生命）。游戏可以离线玩。当用户杀死应用程序时，我有时间并保存它。当他/她打开游戏时，通过减法获取当前时间并赋予生命。这是一个问题；

当用户杀死应用程序时，将时间调整为 1 小时后再次打开游戏（问题消失了，我正在付出生命）。

有什么办法可以解决这个问题。是否有任何用户无法更改的时间源（没有在线访问），我可以检索正确的时间。

ps：我会在iOS环境下编写游戏代码。iOS特定答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:51:57.763

我会使用真实时钟时间单位给出的“单调时间”。在 linux 上，这通常通过使用 clock_gettime(CLOCK_MONOTONIC, ×pec); 来完成。在 mac/ios 上，我认为 mach_absolute_time() 是您正在寻找的功能。请参阅其中一篇文章以进一步阅读

[Mac OS X 中的clock_gettime 替代方案](https://stackoverflow.com/questions/5167269/clock-gettime-alternative-in-mac-os-x)

[OSX 上的单调时钟](https://stackoverflow.com/questions/11680461/monotonic-clock-on-osx)

CACurrentMediaTime() 使用 mach_absolute_time()。所以它应该是你最好的朋友，因为用户不可能改变它。除了它将在重新启动时重置（至少在 mac 上）。如果 mach_absolute_time 没有在重新启动时重置，那将是最好的情况......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:49:51.620

我不相信有解决办法。

你想要的是一个相对时间，所以你可以考虑`NSTimer`在某个时间间隔后触发，但即使这样也行不通，因为当应用程序在后台（或被杀死）时，这样的计时器会失败或死亡。

最终，除非您使用设备外存储方法，否则您将受制于用户的日期管理。无论您使用哪种绝对时间方法（例如`CFAbsoluteTimeGetCurrent`），它**都将**取决于用户可以修改的系统时钟。

# javascript - 猫鼬中的id和_id有什么区别？

> ID：15724272
> 
> 赞同：75
> 
> 时间：2013-03-30T22:36:53.240
> 
> 标签：javascript, node.js, mongodb, mongoose, database

`_id`和`id`in mongoose和有什么不一样？哪个更适合参考？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-03-30T22:57:34.140

从[文档](http://mongoosejs.com/docs/guide.html#id)中：

> Mongoose 默认为您的每个模式分配一个 id 虚拟 getter，它将文档 _id 字段转换为字符串，或者在 ObjectIds 的情况下，返回其 hexString。

因此，基本上，`id`getter 会返回文档的字符串表示形式`_id`（默认情况下会添加到所有 MongoDB 文档中，并且默认类型为`ObjectId`）。

关于什么是更好的参考，这完全取决于上下文（即，你想要 an`ObjectId`还是 a `string`）。例如，如果比较`id`'s，字符串可能更好，因为`ObjectId`'s 不会通过相等性测试，除非它们是相同的实例（无论它们代表什么值）。

# spring - 使用 jetty、hsql、jndi 和 spring 进行集成测试

> ID：15724275
> 
> 赞同：2
> 
> 时间：2013-03-30T22:37:21.853
> 
> 标签：spring, maven, jetty, jndi, hsqldb

我正在尝试使用 Jetty 访问本地 HSQL 数据库为我的 Spring Web 应用程序创建一些集成测试。目标：使用 Selenium（或类似的）运行测试，模拟/存根所有外部系统，并设置一个 HSQL 数据库来代替我们共享的 Oracle 数据库。测试是在 Maven 构建期间开始的（集成测试阶段）。该数据库由 Spring 的“jdbc:initialize-database”初始化，并在 Jetty 中注册为 JNDI 数据源。

经过几天尝试不同的配置，我终于到了创建、初始化数据库并注册为 Jetty 资源的地步，但是当测试用例运行时，它只是挂起；我认为是因为它正在等待数据库可用。

**Maven配置**

```
<plugin>
  <groupId>org.codehaus.cargo</groupId>
  <artifactId>cargo-maven2-plugin</artifactId>
  <version>1.3.3</version>
  <executions>
    <execution>
      <id>start</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>start</goal>
      </goals>
    </execution>
    <execution>
      <id>stop</id>
      <phase>post-integration-test</phase>
      <goals>
        <goal>stop</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <container>
      <containerId>jetty7x</containerId>
      <dependencies>
        <dependency>
          <groupId>org.hsqldb</groupId>
          <artifactId>hsqldb</artifactId>
        </dependency>
        <dependency>
          <groupId>c3p0</groupId>
          <artifactId>c3p0</artifactId>
        </dependency>
      </dependencies>
    </container>
    <configuration>
      <home>${project.build.directory}/cargo/configurations/jetty7x</home>
      <properties>
        <cargo.jetty.createContextXml>false</cargo.jetty.createContextXml>
        <cargo.datasource.datasource>
          cargo.datasource.url=jdbc:hsqldb:file:../../../myDB|
          cargo.datasource.driver=org.hsqldb.jdbcDriver|
          cargo.datasource.username=sa|
          cargo.datasource.password=|
          cargo.datasource.type=javax.sql.DataSource|
          cargo.datasource.jndi=jdbc/myDataSource
        </cargo.datasource.datasource>
      </properties>
    </configuration>
    <deployables>
      <deployable>
        <location>target/myApp</location>
        <properties>
          <context>myApp</context>
        </properties>
      </deployable>
    </deployables>
  </configuration>
 </plugin> 
```

**弹簧配置**

```
<bean id="localDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="org.hsqldb.jdbcDriver"/>
    <property name="jdbcUrl" value="jdbc:hsqldb:file:target/myDB"/>
    <property name="user" value="sa"/>
    <property name="password" value=""/>
</bean>

 <jdbc:initialize-database data-source="mydataSource" ignore-failures="DROPS"> 
    <jdbc:script location="classpath:/sql-scripts/schema/create-schema.sql"/> 
    <jdbc:script location="classpath:/sql-scripts/schema/create-tables.sql"/> 
    <jdbc:script location="classpath:/sql-scripts/testdata/data-load.sql"/> 
</jdbc:initialize-database> 
```

我可能遗漏了一些东西，我试图通过许多其他帖子的建议来拼凑配置。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:10:39.600

使用 HSQLDB 进行测试（尤其是复杂的测试设置）的推荐方法是运行服务器。

最初，您使用 shell 启动 HSQLDB 服务器，与您的测试设置无关。使用 Server 属性`server.silent=false`可以立即查看控制台上的连接和语句。

取得一些进展后，您可以自定义服务器设置。请参阅指南：

[http://www.hsqldb.org/doc/2.0/guide/listeners-chapt.html](http://www.hsqldb.org/doc/2.0/guide/listeners-chapt.html)

并总结了不同的测试选项：

[http://www.hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_app_dev_testing](http://www.hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_app_dev_testing)

您可能需要使用 MVCC 事务模型。这减少了锁定并且有时避免了由于一个等待另一个提交而导致的连接挂起。

# automata - Can a Regular Language have a Linear Bounded Automaton

> ID：15724278
> 
> 赞同：1
> 
> 时间：2013-03-30T22:37:44.100
> 
> 标签：automata, automata-theory

As the question states:

I am trying to understand automata. Can every regular language have a linear bounded automaton?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:40:43.470

Yes, it is possible to have Linear Bounded Automata for each and every regular languages. Regular languages are proper subset of **Context Sensitive Languages**. CSL is the language associated with **Linear Bounded Automata** (LBA). For more information on hierarchy of classes of formal grammars and languages read about `Chomsky Hierarchy`.

[http://en.wikipedia.org/wiki/Chomsky_hierarchy](http://en.wikipedia.org/wiki/Chomsky_hierarchy)

# php - Weird issue with $_FILES['']

> ID：15724279
> 
> 赞同：0
> 
> 时间：2013-03-30T22:37:55.187
> 
> 标签：php, file, file-upload, csv

Hey guys I noticed when I switched my provider to a dedicated server (Winhost to MediaTemple) that my file uploading system no longer works because it can't read the file sent in for some reason. So I put aside a tester to figure out why and I used:

```
<form method="post" action="./readtest.php">
        <div>
            <span>Enter Name of First Name Column: </span><input name="firstname" class="Rfirstname-input" type="text" />
        </div>
        <div>
            <span>Enter .csv File: </span><input type="file" name="csvfile" value="" />
        </div>
        <div>
        <input type="submit" class="Rsubmit" value="Submit"/>
        </form> 
```

than:

```
<?php
echo $_POST['firstname'];
var_dump($_FILES['csvfile']);
?> 
```

Now the firstname post will print out but the dumping of the files is null (I upload .csv files). Now the weird part, when I change the $_FILES to $_POST - it actually prints out the name of the file, so it is actually going in yet not reading it? I tried for other files to.....I don't know if it is something in my .ini file for php or what but I could use the help!

David Biga

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:41:03.417

Take a look at this answer:[What does enctype='multipart/form-data' mean?](https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean)

You are missing the enctype on your `<form>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:41:03.160

Add `enctype="multipart/form-data"` to your `<form>`.

# mysql - 没有零时重复输入错误“0”

> ID：15724281
> 
> 赞同：0
> 
> 时间：2013-03-30T22:38:00.233
> 
> 标签：mysql

我已经写了语法：

```
CREATE TABLE ARTICLES(
    PMID INT NOT NULL, 
    PUBLICATION_TITLE CHAR(35), 
    ARTICLE_TITLE VARCHAR(60), 
    TYPE CHAR(15), 
    ABSTRACT TEXT,  
    ISSUE INT, 
    DAY INT, 
    MONTH CHAR(14), 
    YEAR INT, 
    START_PAGE INT, 
    END_PAGE INT, 
    PRIMARY KEY (PMID)
); 
```

这里没有错误发生。

然后我尝试使用以下方法导入一个excel文件：

```
LOAD DATA INFILE 'DATABASE_PROJECT/PUBMED_DATA.XLS' INTO TABLE ARTICLES; 
```

但它一直给我一个错误，提示主键重复条目“0”。没有一个条目是单个数字，更不用说“0”了。我不知道为什么会这样。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:44:04.350

看来您在 PMID 上缺少 auto_increment。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:40:27.650

在导入之前将 xls 文件导出到 csv。

# android - 创建 CursorLoader 时未定义 SwapCursor

> ID：15724282
> 
> 赞同：7
> 
> 时间：2013-03-30T22:38:07.430
> 
> 标签：android, listview, android-arrayadapter, simplecursoradapter, android-cursor

创建 CursorLoader 时，我收到“swapCursor(Cursor) 未定义”错误。我已经导入了 android.support.v4（app.LoaderManager、app.LoaderManager.Loader、Content.CursorLoader、content.Loader）。不知道我能做些什么来纠正这个问题。请指教。

装载机：

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.app.ListFragment;
import android.support.v4.widget.CursorAdapter;

public class LoginList extends FragmentActivity implements OnClickListener, 
AdapterView.OnItemClickListener, LoaderManager.LoaderCallbacks<Cursor> {

    private ListView loginList;
    private Button webLogin;
    private SimpleCursorAdapter adapter;

    @Override 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_listview);

        loginList = (ListView)findViewById(R.id.loginlist);
        loginList.setOnItemClickListener(this);

        webLogin = (Button)findViewById(R.id.button3);
        webLogin.setOnClickListener(this);

        //Specify fileds to display in the list
        String[] from = new String[] { ListProvider.COLUMN_NAME_SITE };

        //Bind fields to listview
        int[] to = new int[] {R.id.loginlist};

        // Create CursorAdapter and set it to display
        adapter = new SimpleCursorAdapter(this, R.layout.login_listview, null, from, to);

        loginList.setAdapter(adapter);

        getSupportLoaderManager().initLoader(0, null, this);
    }

    /*@Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

    super.onViewCreated(view, savedInstanceState);
    setEmptyText(getResources().getString(string.app_name));
    rwgisterForContextMenu(getListView());
    setHasOptionsMenu(true);
        } */

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

        Toast.makeText(getApplicationContext(), "Selected ID :" + arg2, Toast.LENGTH_SHORT).show();

        Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

        Cursor clickedObject = (Cursor)loginList.getItemAtPosition(arg2);

        Bundle loginBundle = new Bundle();
        loginBundle.putString("clickedWebSite",((LoginDetails) clickedObject).getsName());
        loginBundle.putString("clickedWebAddress",((LoginDetails) clickedObject).getwUrl());
        loginBundle.putString("clickedUserName",((LoginDetails) clickedObject).getuName());
        loginBundle.putString("clickedPassWord",((LoginDetails) clickedObject).getpWord());
        loginBundle.putString("clickedNotes",((LoginDetails) clickedObject).getlNotes());

        updateDeleteLoginInfo.putExtras(loginBundle);

        startActivityForResult(updateDeleteLoginInfo, 0); 
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
        startActivity(webLoginIntent);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int ignored, final Bundle args) {
        return new CursorLoader(this, ListProvider.CONTENT_URI, null, null, null, null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        adapter.swapCursor(cursor); /* swapCursor error: The method swapCursor(Cursor) is undefined for the type SimpleCursorAdapter */

    }

    @Override
    public void onLoaderReset (Loader<Cursor> loader) {
        adapter.swapCursor(null); /* swapCursor error: The method swapCursor(Cursor) is undefined for the type SimpleCursorAdapter */

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T11:52:45.617

Example on how to use changeCursor() with LoaderManager.LoaderCallbacks instead of swapCursor().

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new CursorLoader(this, DB_table.CONTENT_URI, DB_table.PROJECTION,null,null,null);
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    mAdapter.changeCursor(data);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.changeCursor(null);
} 
```

if you want to use the swapCursor() available in API 11 for older API's, remember to import the CursorAdapter from the support library.

```
import android.support.v4.widget.CursorAdapter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T13:38:40.413

在您的`onCreate()`方法中，您初始化您的适配器，并将其`ListView`作为第二个参数传递。这是不正确的，它应该是为列表中的每个项目实例化的布局的 ID：

```
adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, from, to); 
```

除此之外，您的代码对我来说看起来不错。我已经将它与我使用 ListFragment 的工作代码进行了比较，因此我没有实例化 UI，而是覆盖了该`onActivityCreated(Bundle)`方法。

我确实不厌其烦地提供了一个投影来减少我从数据库中提取的数据量`ContentProvider`，但是通过`null`应该不成问题。

但请检查您是否在`ContentProvier`. 要使用`ListView`（和其他一些小部件），您必须有一个基于 Long 的主键，我发现这真的很不方便，因为我已经有一个完全可以接受的 UUID 作为我的主键。

# c++ - 插入/放置到该位置已被占用的哈希表中

> ID：15724283
> 
> 赞同：1
> 
> 时间：2013-03-30T22:38:09.807
> 
> 标签：c++, hash, c++11, insert, complexity-theory

所以假设我有这样的事情：

```
 struct equity{          ///keep in hash table
     long long numSharesTraded;
     list<order> buyList;
     list<order> sellList;       //put in priority queue
}; 
```

如果我想在buyList或sellList中插入一些东西，我是否有必要检查并查看我应该添加到的特定权益在哈希表中的哪个位置？......所以我最终得到了类似的东西：

```
 map[i].equity.buyList.push_back(orderI'mPushing); 
```

?

还是有另一种方法可以让我不必每次都搜索它？据我了解，搜索特定股权的平均时间是恒定的（ O(n) 最坏情况），但如果可能的话，我想摆脱这种搜索......

所以 1) 有没有办法在不搜索的情况下添加到列表中，以查看该权益是否每次都已经在哈希表中，以及 2) 如果我每次都必须搜索，这会导致运行时间大大延长吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:01:00.680

来自 C++11 的无序关联容器（例如，如果不能使用 C++11 ， [Boost.Unordered](http://www.boost.org/doc/libs/1_53_0/doc/html/unordered.html)`std::unordered_set`中有类似的容器）有几个成员函数，特别是`insert()`

```
std::pair<iterator,bool> insert( const value_type& value ); 
```

如果容器尚未包含具有等效键的元素，则将元素插入容器。这将返回一个对，该对由一个指向插入元素（或阻止插入的元素）的迭代器和一个表示插入是否发生的布尔值组成。还有范围插入功能可将一组项目（由 a`first`和`last`迭代器分隔）插入到容器中。

您可以像这样使用它（`std::unordered_map`如果您想在订单中存储更多东西，请使用）：

```
struct equity { /* like before */ };
std::unordered_set<equity> orders;
auto result = orders.insert(orderI'mPushing);
if (result.second) 
    // handle first-time insert by reusing result.first
else
    // item was already stored 
```

单个插入具有摊销`O(1)`复杂度，这意味着插入大量`N`元素具有`O(N)`时间复杂度。因此，平均而言，您不应该因重复搜索而受到任何惩罚。

但是，如果您正在进行超高频交易并且面临单个插入的实时延迟限制，您可能会选择使用`std::set`具有较慢但更可预测的`O(log N)`复杂性的常规。

# android - creating android sqlite database with multiple tables

> ID：15724291
> 
> 赞同：0
> 
> 时间：2013-03-30T22:39:20.237
> 
> 标签：android

I trying to search for a helpful tutorials or examples to create a running application with sqlite database and has more than one table but I didn't found any..

Does any one know a helpful sites that provides a tutorials for sqlite database management with all operations on it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T01:16:17.760

[Android data storage guide](http://developer.android.com/guide/topics/data/data-storage.html) has a section about [DBs](http://developer.android.com/guide/topics/data/data-storage.html#db). Though in its example only one table is crerated is fairly trivial to add more tables.

You should just do this in onCreate:

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(TABLE1_CREATE);
    db.execSQL(TABLE2_CREATE);
    ...
} 
```

# c++ - 如何为 Struct 分配两个指针？

> ID：15724293
> 
> 赞同：-1
> 
> 时间：2013-03-30T22:39:24.510
> 
> 标签：c++, arrays, pointers

我有这个代码：

```
struct human
    {
        string name;
        string adress;
        string com_name;
        string com_adress;
    };
    human **arr_human; 
```

我需要分配指针数组。我试试这个：

```
arr_human = new human * [ 1000 ]; 
```

但我不能使用这个结构（例如：

```
arr_human[0]->name = oName;
arr_human[0]->adress = oAddr;
arr_human[0]->com_name = cName;
arr_human[0]->com_adress = cAddr; 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:44:12.690

就像 jrok 说的，你分配了指针而不是对象。你可能想做这样的事情：

```
for (int i = 0; i < 1000; i++)
    arr_human[i] = new human[numObjectsYouWant]; 
```

由于您使用的是 C++，因此您不妨使用向量。消除了使用原始指针可能遇到的许多问题。

```
vector<human> arr_humans; 
```

# php - android/mysql json 不幸的是应用程序已停止

> ID：15724299
> 
> 赞同：0
> 
> 时间：2013-03-30T22:40:00.557
> 
> 标签：php, android, json

我知道这个问题经常重复，但我搜索了很多并没有找到解决方案问题是我不知道错误在哪里并尝试了所有可能的方法来修复它但我无法

我认为连接到我使用 wampserver 的数据库的问题是 127.0.0.1

请帮我

这是日志猫：

```
03-30 22:23:48.596: E/Trace(1176): error opening trace file: No such file or directory 

(2)
03-30 22:23:49.847: D/gralloc_goldfish(1176): Emulator without GPU emulation detected.
03-30 22:24:27.137: D/dalvikvm(1176): GC_CONCURRENT freed 63K, 7% free 2722K/2908K, paused 82ms+57ms, total 667ms
03-30 22:24:27.916: I/Choreographer(1176): Skipped 94 frames!  The application may be doing too much work on its main thread.
03-30 22:24:35.865: I/Choreographer(1176): Skipped 33 frames!  The application may be doing too much work on its main thread.
03-30 22:24:45.716: D/dalvikvm(1176): GC_FOR_ALLOC freed 65K, 7% free 2904K/3092K, paused 64ms, total 76ms
03-30 22:24:45.726: I/dalvikvm-heap(1176): Grow heap (frag case) to 3.560MB for 635812-byte allocation
03-30 22:24:45.846: D/dalvikvm(1176): GC_FOR_ALLOC freed 1K, 6% free 3523K/3716K, paused 111ms, total 111ms
03-30 22:24:45.976: D/dalvikvm(1176): GC_CONCURRENT freed 7K, 5% free 3531K/3716K, paused 8ms+22ms, total 133ms
03-30 22:24:46.266: I/Choreographer(1176): Skipped 42 frames!  The application may be doing too much work on its main thread.
03-30 22:24:46.936: I/Choreographer(1176): Skipped 87 frames!  The application may be doing too much work on its main thread.
03-30 22:24:47.556: I/Choreographer(1176): Skipped 33 frames!  The application may be doing too much work on its main thread.
03-30 22:24:48.806: I/Choreographer(1176): Skipped 36 frames!  The application may be doing too much work on its main thread.
03-30 22:24:50.526: W/System.err(1176): org.apache.http.conn.HttpHostConnectException: Connection to http://127.0.0.1 refused
03-30 22:24:50.576: W/System.err(1176):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
03-30 22:24:50.646: I/Choreographer(1176): Skipped 42 frames!  The application may be doing too much work on its main thread.
03-30 22:24:50.726: W/System.err(1176):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-30 22:24:51.066: W/System.err(1176):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-30 22:24:51.107: W/System.err(1176):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-30 22:24:51.186: W/System.err(1176):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-30 22:24:51.236: W/System.err(1176):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-30 22:24:51.359: W/System.err(1176):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-30 22:24:51.398: I/Choreographer(1176): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-30 22:24:51.446: W/System.err(1176):     at com.example.androidhive.JSONParser.makeHttpRequest(JSONParser.java:51)
03-30 22:24:51.456: W/System.err(1176):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:93)
03-30 22:24:51.456: W/System.err(1176):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:1)
03-30 22:24:51.466: W/System.err(1176):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 22:24:51.616: W/System.err(1176):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-30 22:24:51.616: W/System.err(1176):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-30 22:24:51.706: W/System.err(1176):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-30 22:24:51.796: W/System.err(1176):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-30 22:24:51.876: W/System.err(1176):     at java.lang.Thread.run(Thread.java:856)
03-30 22:24:51.876: W/System.err(1176): Caused by: java.net.ConnectException: failed to connect to /127.0.0.1 (port 80): connect failed: ECONNREFUSED (Connection refused)
03-30 22:24:51.957: I/Choreographer(1176): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-30 22:24:52.046: W/System.err(1176):     at libcore.io.IoBridge.connect(IoBridge.java:114)
03-30 22:24:52.046: W/System.err(1176):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
03-30 22:24:52.046: W/System.err(1176):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
03-30 22:24:52.086: W/System.err(1176):     at java.net.Socket.connect(Socket.java:842)
03-30 22:24:52.118: I/Choreographer(1176): Skipped 37 frames!  The application may be doing too much work on its main thread.
03-30 22:24:52.136: W/System.err(1176):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-30 22:24:52.146: W/System.err(1176):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
03-30 22:24:52.146: W/System.err(1176):     ... 15 more
03-30 22:24:52.146: W/System.err(1176): Caused by: libcore.io.ErrnoException: connect failed: ECONNREFUSED (Connection refused)
03-30 22:24:52.236: W/System.err(1176):     at libcore.io.Posix.connect(Native Method)
03-30 22:24:52.236: W/System.err(1176):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
03-30 22:24:52.236: W/System.err(1176):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
03-30 22:24:52.366: W/System.err(1176):     at libcore.io.IoBridge.connect(IoBridge.java:112)
03-30 22:24:52.396: W/System.err(1176):     ... 20 more
03-30 22:24:52.457: I/Choreographer(1176): Skipped 47 frames!  The application may be doing too much work on its main thread.
03-30 22:24:52.616: I/Choreographer(1176): Skipped 37 frames!  The application may be doing too much work on its main thread.
03-30 22:24:52.736: E/Buffer Error(1176): Error converting result java.lang.NullPointerException: lock == null
03-30 22:24:52.836: E/JSON Parser(1176): Error parsing data org.json.JSONException: End of input at character 0 of 
03-30 22:24:52.959: I/Choreographer(1176): Skipped 56 frames!  The application may be doing too much work on its main thread.
03-30 22:24:53.016: W/dalvikvm(1176): threadid=14: thread exiting with uncaught exception (group=0x40a71930)
03-30 22:24:53.136: I/Choreographer(1176): Skipped 33 frames!  The application may be doing too much work on its main thread.
03-30 22:24:55.267: E/AndroidRuntime(1176): FATAL EXCEPTION: AsyncTask #4
03-30 22:24:55.267: E/AndroidRuntime(1176): java.lang.RuntimeException: An error occured while executing doInBackground()
03-30 22:24:55.267: E/AndroidRuntime(1176):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.lang.Thread.run(Thread.java:856)
03-30 22:24:55.267: E/AndroidRuntime(1176): Caused by: java.lang.NullPointerException
03-30 22:24:55.267: E/AndroidRuntime(1176):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:97)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at com.example.androidhive.NewProductActivity$CreateNewProduct.doInBackground(NewProductActivity.java:1)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 22:24:55.267: E/AndroidRuntime(1176):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-30 22:24:55.267: E/AndroidRuntime(1176):     ... 4 more
03-30 22:24:56.126: I/Choreographer(1176): Skipped 42 frames!  The application may be doing too much work on its main thread.
03-30 22:24:56.466: I/Choreographer(1176): Skipped 86 frames!  The application may be doing too much work on its main thread.
03-30 22:24:56.747: I/Choreographer(1176): Skipped 51 frames!  The application may be doing too much work on its main thread.
03-30 22:24:57.496: I/Choreographer(1176): Skipped 193 frames!  The application may be doing too much work on its main thread.
03-30 22:24:58.366: E/WindowManager(1176): Activity com.example.androidhive.NewProductActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d53958 V.E..... R.....ID 0,0-456,144} that was originally added here
03-30 22:24:58.366: E/WindowManager(1176): android.view.WindowLeaked: Activity com.example.androidhive.NewProductActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d53958 V.E..... R.....ID 0,0-456,144} that was originally added here
03-30 22:24:58.366: E/WindowManager(1176):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
03-30 22:24:58.366: E/WindowManager(1176):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
03-30 22:24:58.366: E/WindowManager(1176):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-30 22:24:58.366: E/WindowManager(1176):  at android.app.Dialog.show(Dialog.java:281)
03-30 22:24:58.366: E/WindowManager(1176):  at com.example.androidhive.NewProductActivity$CreateNewProduct.onPreExecute(NewProductActivity.java:74)
03-30 22:24:58.366: E/WindowManager(1176):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
03-30 22:24:58.366: E/WindowManager(1176):  at android.os.AsyncTask.execute(AsyncTask.java:534)
03-30 22:24:58.366: E/WindowManager(1176):  at com.example.androidhive.NewProductActivity$1.onClick(NewProductActivity.java:56)
03-30 22:24:58.366: E/WindowManager(1176):  at android.view.View.performClick(View.java:4204)
03-30 22:24:58.366: E/WindowManager(1176):  at android.view.View$PerformClick.run(View.java:17355)
03-30 22:24:58.366: E/WindowManager(1176):  at android.os.Handler.handleCallback(Handler.java:725)
03-30 22:24:58.366: E/WindowManager(1176):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-30 22:24:58.366: E/WindowManager(1176):  at android.os.Looper.loop(Looper.java:137)
03-30 22:24:58.366: E/WindowManager(1176):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-30 22:24:58.366: E/WindowManager(1176):  at java.lang.reflect.Method.invokeNative(Native Method)
03-30 22:24:58.366: E/WindowManager(1176):  at java.lang.reflect.Method.invoke(Method.java:511)
03-30 22:24:58.366: E/WindowManager(1176):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-30 22:24:58.366: E/WindowManager(1176):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-30 22:24:58.366: E/WindowManager(1176):  at dalvik.system.NativeStart.main(Native Method)
03-30 22:24:58.411: I/Choreographer(1176): Skipped 57 frames!  The application may be doing too much work on its main thread. 
```

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidhive"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-permission android:name="android.permission.INTERNET" />

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>

    <application
        android:configChanges="keyboardHidden|orientation"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
         android:allowBackup="True">

        <activity
            android:name=".MainScreenActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- All Product Activity -->
        <activity
            android:name=".AllProductsActivity"
            android:label="All Products" >
        </activity>

        <!-- Add Product Activity -->
        <activity
            android:name=".NewProductActivity"
            android:label="Add New Product" >
        </activity>

        <!-- Edit Product Activity -->
        <activity
            android:name=".EditProductActivity"
            android:label="Edit Product" >
        </activity>
    </application>

</manifest> 
```

请真的我需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T13:39:44.210

根据[有关 emulators 的 Android 文档](http://developer.android.com/tools/devices/emulator.html#networkaddresses)，对 127.0.0.1 的调用会重定向到模拟器的本地主机，而您想调用自己的计算机本地主机。

尝试使用 10.0.2.2 而不是 127.0.0.1

# php - in_array 函数的一些问题

> ID：15724301
> 
> 赞同：1
> 
> 时间：2013-03-30T22:40:15.393
> 
> 标签：php, mysql, mysqli

您好我正在尝试使用 in_array，我认为我的语法是正确的，但它显示“第二个参数的数据类型错误”

我的代码是

```
$result = mysqli_query($con, "SELECT * FROM Products WHERE Quantity_On_Hand < Min_Stock");
$filter = mysqli_query($con, "SELECT ProductID FROM Orders");

while($row = mysqli_fetch_array($result))
    {
    if (in_array($row['ProductID'], $filter))
        {
        }
    } 
```

我的想法是找出 Products Table 中的 ProductID 是否在 Order Table 中。

有人可以帮助我吗，谢谢:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:44:22.830

`$filter`不是数组；这是一个`mysqli_result`对象：

```
$filter = mysqli_query($con, "SELECT ProductID FROM Orders"); 
```

我认为您想对其进行迭代，将每个添加`ProductID`到一个新数组中，然后将该数组传递给`in_array`函数，如下所示：

```
$filter = mysqli_query($con, "SELECT ProductID FROM Orders");

$product_ids = array();

while ($row = $filter->fetch_assoc())
{
    $product_ids[] = $row['ProductID'];
}

$result = mysqli_query($con, "SELECT * FROM Products WHERE Quantity_On_Hand < Min_Stock");

while($row = mysqli_fetch_array($result))
{

    if (in_array($row['ProductID'], $product_ids))
    {

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T22:44:25.720

您的代码失败，因为`$filter`是 MySQLi 结果资源，而不是数组。实际上，这最好通过两个表之间的简单内部连接来完成。如果 a`ProductID`中不存在`Orders`，则`INNER JOIN`首先将其从结果集中排除。

```
$sql = "
SELECT Products.* 
FROM
  Products
  INNER JOIN Orders ON Products.ProductID = Orders.ProductID
WHERE Quantity_on_Hand < Min_stock";

$result = mysqli_query($con, $sql);
if ($result) {
  $results = array();
  while ($row = mysqli_fetch_array($result)) {
    $results[] = $row;
  }
}
// Now $results is a 2D array of all your Products 
```

相反，如果您想检索*所有*，`Products`并且只是指示它是否具有活动订单，请使用 a`LEFT JOIN`并测试列表`Orders.ProductID`中是否为空`SELECT`：

```
$sql = "
SELECT
  Products.* ,
  /* No orders will print 'no-orders' in a pseudo column called has_orders */
  CASE WHEN Orders.ProductID IS NULL THEN 'no-orders' ELSE 'has-orders' AS has_orders
FROM
  Products
  LEFT JOIN Orders ON Products.ProductID = Orders.ProductID
WHERE Quantity_on_Hand < Min_stock";

$result = mysqli_query($con, $sql);
if ($result) {
  $results = array();
  while ($row = mysqli_fetch_array($result)) {
    $results[] = $row;
  }
}
// Now $results is a 2D array of all your Products
// And the column $row['has_orders'] will tell you if it has any... 
```

在这种情况下，您可以在行集上循环测试它是否有订单：

```
foreach ($results as $r) {
  if ($r['has_orders'] == 'has-orders') {
    // this has orders
  }
  else {
    // it doesn't...
  }
} 
```

# algorithm - 将世界划分为一千个左右的位置

> ID：15724302
> 
> 赞同：1
> 
> 时间：2013-03-30T22:40:23.060
> 
> 标签：algorithm, geometry, geography

背景：我想创建一个天气服务，由于大多数可用的 API 限制了每日调用的数量，我想将地球划分为一千个左右的区域。

显然，互联网用户的分布并不均匀，因此在人口稠密地区的采样应该更精细。

我应该如何实施呢？

*   我在哪里可以找到有关地理互联网用户密度的数据？
*   该算法可能类似于 k-means。然而，在一个有海洋的球体上实现它可能有点棘手。有什么见解吗？
*   最后，也许有一种方法可以避免我做这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:31:03.433

与 k-means非常相似的是[质心 Voronoi 图](http://en.wikipedia.org/wiki/Centroidal_Voronoi_tessellation)（它是 k-means 的连续版本）。但是，这会产生一个统一的球体镶嵌，不会像您希望的那样考虑用户密度。

因此，类似的解决方案是相同的技术，但与[Power Diagram](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.104.678&rep=rep1&type=pdf)一起使用：Power Diagram 是一个 Voronoi 图，它说明了密度（通过为每个 Voronoi 种子分配权重）。这样的图可以使用 3D 空间（而不是 2D）中的嵌入来计算，该空间由前两个 (x,y) 坐标加上第三个坐标组成，第三个坐标是 [任何大的正常数减去给定的权重的平方根观点]。

使用它，您可以获得针对用户密度的域的细分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:02:54.890

一般而言，您并不关心互联网用户密度。你关心使用你的服务的用户的密度——你不关心这些用户在哪里，你关心他们询问的地方。因此，一旦您的网站已经运行了一天以上，您就可以使用人们在前一天询问的位置来计算出第二天的区域应该是什么。

树上的动态编程很容易。我会为算法做的是构建一个连续更精细划分的单元格的树。更多的细胞意味着更小的误差，因为人们会得到更接近它们的点的预测，你可以计算出误差，或者至少是更多细胞和更少细胞之间的相对误差。从下往上算出每个子树贡献的最小可能总误差，允许它被划分为最多 1,2,3,..N。方法。您可以通过查看您已经为其每个后代计算的最小可能误差，并计算出如何最好地共享可用它们之间的 k 个分区。

我会尝试通过考虑不同的想法来避免这样做。根据您看待生活的方式，这至少有两个缺点：

1）你似乎没有在派对上添加任何东西。看起来您正在将自己置于实际进行天气预报的组织及其客户之间。组织失去与客户的直接联系，这可能会失去他们的广告收入。客户得到的天气预报更差。

2) 大多数网站都有合法的服务条款，客户可以无视，不用担心。我的猜测是，您将违反这些服务条款，如果您的服务变得足够受欢迎以引起注意，它们将被强制执行。

# android - 如何在 ad-hoc 网络中查找来自 android 设备的丢弃数据包总数

> ID：15724303
> 
> 赞同：1
> 
> 时间：2013-03-30T22:40:23.830
> 
> 标签：android, networking, tcp, adhoc

我正在为android编写一个应用程序。我正在使用 manet 管理器和文件传输应用程序。

在我的应用程序中，我想设置 ad-hoc 网络。我设法让它工作，它运行 olsrd 作为路由协议。但我面临一个问题。我需要找出我发送给邻居的数据包被丢弃了多少。我需要知道这一点才能找出值得信任的邻居。

# actionscript-3 - Adobe Flex compiler include classes

> ID：15724307
> 
> 赞同：1
> 
> 时间：2013-03-30T22:40:59.693
> 
> 标签：actionscript-3, flex4

I'm trying to create and instance of an object by reference the class object of the class using

```
getDefinitionByName() 
```

the problem is that if I don't create at least one instance of the class before when try to use getDefinitionByName() it say

```
ReferenceError: Error #1065: Variable XXXXXX is not defined. 
```

how can I include the class in the binary without using and instance first??, also I had tried to juts leave in the import but still don't include the class, it could be a compiler param I can pass??

I'm using Flex SDK 4.6 thanks!!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:58:00.237

As described [in the documentation](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html):

`-includes class` *Links one or more classes to the resulting application SWF file, whether or not those classes are required at compile time*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:01:18.577

There is a bunch of compiler options which allow you to include classes, but they aren't very scalable / require some manual labour. For example, there's `-includes` option, but you must know what symbols to include. There's `-include-libraries`, but again, you'd have to compile a SWC library with the classes you need. `-include-namespace` - you'd need to write the namespace definition, listing all classes that you want to include.

Since I imagine that the task in the end will get automated one way or another, it would make more sense to just generate an AS file of the following format:

```
package your.app {
   import fully.qualified.class.Name;Name; // it is enough to just mention it
   . . .
} 
```

And then include only this this class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:00:56.987

Well I think I found the solution, just add to the compiler the argument -includes like thised

-includes com.example.Myclass

that will include the class object in the binary even though u haven't used and after tried to load it with getDefinitionByName()

hopes this help to someone else, also here is a complete list of arguments for the compiler

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html)

# javascript - 如何在 HTML 中逐渐放大？

> ID：15724310
> 
> 赞同：-1
> 
> 时间：2013-03-30T22:41:17.117
> 
> 标签：javascript, html, css, zooming

假设我有一个网页，有一只猫盯着我看。然后图像将开始放大猫的眼睛。越来越深，越来越深……我怎样才能在 HTML/CSS/JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:49:32.460

应用 CSS3 比例变换：

```
$("#cat").attr('style', "transform: scale(4,4);-ms-transform: scale(4,4);-webkit-transform: scale(4,4);-o-transform: scale(4,4);-moz-transform: scale(4,4);"); 
```

...具有缓慢的 CSS3 过渡：

```
#cat {
    transition: transform 120s;
    -moz-transition: -moz-transform 120s;
    -webkit-transition: -webkit-transform 120s;
    -o-transition: -o-transform 120s;
} 
```

...这是你的猫！[http://jsfiddle.net/x5uYp/](http://jsfiddle.net/x5uYp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:43:45.383

这不是缩放，只是缩放。

和你的猫有一个`<img />`，然后使用 JavaScript，`setTimeout`每隔 100 毫秒左右，增加`width`和`height`属性。

# c++ - 为什么我的手动调优、支持 SSE 的代码这么慢？

> ID：15724311
> 
> 赞同：30
> 
> 时间：2013-03-30T22:41:37.450
> 
> 标签：c++, optimization, opencv, sse

长话短说：我正在用 C++ 开发一个计算密集型图像处理应用程序。它需要在从较大图像中提取的小像素块上计算图像扭曲的许多变体。该程序的运行速度不如我想的那么快。分析 (OProfile) 显示扭曲/插值函数消耗超过 70% 的 CPU 时间，因此尝试优化它似乎很明显。

到目前为止，我一直在使用 OpenCV 图像处理库来完成这项任务：

```
// some parameters for the image warps (position, stretch, skew)
struct WarpParams;

void Image::get(const WarpParams &params)
{
    // fills matrices mapX_ and mapY_ with x and y coordinates of points to be
    // inteprolated.
    updateCoordMaps(params); 
    // perform interpolation to obtain pixels at point locations 
    // P(mapX_[i], mapY_[i]) based on the original data and put the 
    // result in pixels_. Use bicubic inteprolation.
    cv::remap(image_->data(), pixels_, mapX_, mapY_, CV_INTER_CUBIC);
} 
```

我编写了自己的插值函数并将其放入测试工具中，以确保在我进行实验时的正确性，并将其与旧函数进行基准测试。

我的功能运行非常缓慢，这是意料之中的。一般来说，这个想法是：

1.  遍历mapX_、mapY_坐标图，提取下一个待插值像素的（实值）坐标；
2.  从插值像素周围的原始图像中检索一个 4x4 的像素值（整数坐标）邻域；
3.  计算这16个像素中每个像素的卷积核系数；
4.  将插值像素的值计算为 16 个像素值和内核系数的线性组合。

在我的 Wolfdale Core2 Duo 上，旧功能的计时时间为 25us。新的花了 587us (!)。我急切地戴上巫师帽，开始破解代码。我设法删除了所有分支，省略了一些重复计算，并将 3 个嵌套循环转换为坐标图上的一个。这就是我想出的：

```
void Image::getConvolve(const WarpParams &params)
{
    __declspec(align(16)) static float kernelX[4], kernelY[4];

    // grab pointers to coordinate map matrices and the original image
    const float 
        *const mapX = mapX_.ptr<float>(),
        *const mapY = mapY_.ptr<float>(),
        *const img  = image_->data().ptr<float>();
    // grab pointer to the output image
    float *const subset = pixels_.ptr<float>(),
        x, y, xint, yint;

    const ptrdiff_t imgw = image_->width();
    ptrdiff_t imgoffs; 

    __m128 v_px, v_kernX, v_kernY, v_val;

    // iterate over the coordinate matrices as linear buffers
    for (size_t idx = 0; idx < pxCount; ++idx)
    {
        // retrieve coordinates of next pixel from precalculated maps,
        // break up each into fractional and integer part
        x = modf(mapX[idx], &xint);
        y = modf(mapY[idx], &yint);
        // obtain offset of the top left pixel from the required 4x4 
        // neighborhood of the current pixel in the image's 
        // buffer (sadly, the position will be unaligned)
        imgoffs = (((ptrdiff_t)yint - 1) * imgw) + (ptrdiff_t)xint - 1;

        // calculate all 4 convolution kernel values for every row and 
        // every column
        tap4Kernel(x, kernelX);
        tap4Kernel(y, kernelY);

        // load the kernel values for the columns, these don't change
        v_kernX = _mm_load_ps(kernelX);

        // process a row of the 4x4 neighborhood
        // get set of convolution kernel values for the current row
        v_kernY = _mm_set_ps1(kernelY[0]);     
        v_px    = _mm_loadu_ps(img + imgoffs); // load the pixel values
        // calculate the linear combination of the pixels with kernelX
        v_px    = _mm_mul_ps(v_px, v_kernX);   
        v_px    = _mm_mul_ps(v_px, v_kernY);   // and kernel Y
        v_val   = v_px;                        // add result to the final value
        imgoffs += imgw;
        // offset points now to next row of the 4x4 neighborhood

        v_kernY = _mm_set_ps1(kernelY[1]);
        v_px    = _mm_loadu_ps(img + imgoffs);
        v_px    = _mm_mul_ps(v_px, v_kernX);
        v_px    = _mm_mul_ps(v_px, v_kernY);
        v_val   = _mm_add_ps(v_val, v_px);
        imgoffs += imgw;

        /*... same for kernelY[2] and kernelY[3]... */

        // store resulting interpolated pixel value in the subset's
        // pixel matrix
        subset[idx] = horizSum(v_val);
    }
}

// Calculate all 4 values of the 4-tap convolution kernel for 4 neighbors
// of a pixel and store them in an array. Ugly but fast.
// The "arg" parameter is the fractional part of a pixel's coordinate, i.e.
// a number in the range <0,1)
void Image::tap4Kernel(const float arg, float *out)
{
    // chaining intrinsics was slower, so this is done in separate steps
    // load the argument into 4 cells of a XMM register
    __m128
        v_arg   = _mm_set_ps1(arg),
        v_coeff = _mm_set_ps(2.0f, 1.0f, 0.0f, -1.0f);

    // subtract vector of [-1, 0, 1, 2] to obtain coorinates of 4 neighbors
    // for kernel calculation
    v_arg = _mm_sub_ps(v_arg, v_coeff);
    // clear sign bits, this is equivalent to fabs() on all 4
    v_coeff = _mm_set_ps1(-0.f);
    v_arg = _mm_andnot_ps(v_coeff, v_arg); 

    // calculate values of abs(argument)^3 and ^2
    __m128
        v_arg2 = _mm_mul_ps(v_arg, v_arg),
        v_arg3 = _mm_mul_ps(v_arg2, v_arg),
        v_val, v_temp;

    // calculate the 4 kernel values as 
    // arg^3 * A + arg^2 * B + arg * C + D, using 
    // (A,B,C,D) = (-0.5, 2.5, -4, 2) for the outside pixels and 
    // (1.5, -2.5, 0, 1) for inside
    v_coeff = _mm_set_ps(-0.5f, 1.5f, 1.5f, -0.5f);
    v_val   = _mm_mul_ps(v_coeff, v_arg3);
    v_coeff = _mm_set_ps(2.5f, -2.5f, -2.5f, 2.5f);
    v_temp  = _mm_mul_ps(v_coeff, v_arg2);
    v_val   = _mm_add_ps(v_val, v_temp);
    v_coeff = _mm_set_ps(-4.0f, 0.0f, 0.0f, -4.0f),
    v_temp  = _mm_mul_ps(v_coeff, v_arg);
    v_val   = _mm_add_ps(v_val, v_temp);
    v_coeff = _mm_set_ps(2.0f, 1.0f, 1.0f, 2.0f);
    v_val   = _mm_add_ps(v_val, v_coeff);

    _mm_store_ps(out, v_val);
} 
```

我很高兴能够将运行时间控制在 40us 以下，甚至在将 SSE 引入主循环之前，我最后保存了它。我原本预计至少有 3 倍的加速，但它在 36us 时只快了一点点，比我试图改进的旧 get() 慢。更糟糕的是，当我更改基准循环以进行更多运行时，旧函数具有相同的平均运行时间，而我的延长到超过 127us，这意味着一些极端的扭曲参数值需要更长的时间（这是有道理的，因为更多扭曲意味着我需要从原始图像中获取广泛分散的像素值来计算结果）。

我认为原因一定是未对齐的负载，但这无济于事（我需要达到不可预测的像素值）。我在优化部门看不到更多可以做的事情，所以我决定查看 cv::remap() 函数，看看他们是如何做到的。想象一下，我惊讶地发现它包含一堆嵌套循环和大量分支。他们还做了很多我不需要费心的论证验证。据我所知（代码中没有注释），S​​SE（也有未对齐的负载！）仅用于从坐标图中提取值并将它们四舍五入为整数，然后调用一个函数来执行实际的插值使用常规浮点算术。

我的问题是，为什么我失败得如此悲惨（为什么我的代码这么慢，为什么他们的代码更快，即使它看起来很乱），我能做些什么来改进我的代码？

我没有在此处粘贴 OpenCV 代码，因为这已经太长了，您可以在[pastebin](http://pastebin.com/8VrpMELN)中查看。

我在 VC++2010 下以 Release 模式测试和编译了我的代码。使用的 OpenCV 是 v2.3.1 的预编译二进制包。

**编辑：**像素值是 0..1 范围内的浮点数。分析显示 tap4Kernel() 函数不相关，大部分时间都花在 getConvolve() 中。

**EDIT2：我**[将生成的代码的反汇编](http://pastebin.com/curCd428)粘贴到pastebin。这是在旧的 Banias Celeron 处理器（具有 SSE2）上编译的，但看起来或多或少相同。

**EDIT3：**在阅读了[每个程序员应该知道的关于内存](http://www.akkadia.org/drepper/cpumemory.pdf)的知识后，我意识到我错误地假设 OpenCV 函数实现的算法与我所做的或多或少相同，但事实并非如此。对于我插值的每个像素，我需要检索其 4x4 邻域，其像素不按顺序放置在图像缓冲区内。我在滥用 CPU 缓存，而 OpenCV 可能不会。VTune 分析似乎同意，因为我的函数有 5,800,000 次内存访问，而 OpenCV 只有 400,000 次。它们的功能一团糟，可能会进一步优化，但它仍然比我有优势，这可能是由于一些更智能的内存和缓存使用方法。

**更新：**我设法改进了将像素值加载到 XMM 寄存器中的方式。我在对象中分配了一个缓冲区，该缓冲区为图像的每个像素保存 16 个元素的单元格。在图像加载时，我为每个像素使用预先安排的 4x4 邻域序列填充此单元缓冲区。不是很节省空间（图像占用 16 倍的空间），但是这样，负载总是对齐的（不再是 _mm_loadu_ps()），并且我避免了从图像缓冲区中分散读取像素，因为所需的像素顺序存储。令我惊讶的是，几乎没有任何改善。我听说未对齐的负载可能会慢 10 倍，但显然这不是问题所在。但是通过注释掉部分代码，我发现 modf() 调用负责 75% 的运行时间！我将专注于消除这些并发布答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T14:40:57.987

首先是一些观察。

*   您使用函数静态变量，这可能会导致同步（我不认为它在这里）
*   该程序集混合了 x87 和 sse 代码。
*   tap4kernel 是内联的，这很好，但配置文件可能不准确。
*   modf 没有内联。
*   该程序集使用 _ftol2_sse（[_ftol2_sse，有更快的选项吗？](https://stackoverflow.com/questions/15247949/ftol2-sse-are-there-faster-options)）。
*   组件移动了很多寄存器。

尝试执行以下操作：

1.  确保您的编译器正在积极优化基于 SSE2 的架构。
2.  使 modf 可用于内联。
3.  避免使用函数静态变量。
4.  如果程序集仍使用 x87 指令，请尝试避免将 float-int`imgoffs = (((ptrdiff_t)yint - 1) * imgw) + (ptrdiff_t)xint - 1;`强制转换为浮点型变量 __m128。

它可以通过预取地图进一步优化（提前约 4kb 预取）

# android - 进度条和多次下载

> ID：15724313
> 
> 赞同：1
> 
> 时间：2013-03-30T22:41:54.067
> 
> 标签：android, android-asynctask, progress-bar

我想在一个进度条中下载多个文件（目前为 2 个）（不重置进度条）

为了做到这一点，我检索了所有文件的总长度，以便在发布进度方法中使用它

问题是我的进度条一旦达到 50% 就会重置为 0 然后再次增加直到另一个 50%

这是我的代码

```
@Override
        protected Void doInBackground(Void... params) {
            int totalSizeFile;
            totalSizeFile=cm.getLength(url[0]);
            totalSizeFile+=cm.getLength(url[1]);
            progressBar.setMax(totalSizeFile);

            cm.downloadMp3(url[0], "test.mp3", totalTailleFic);
            cm.downloadMp3(url[1], "test2.mp3", totalTailleFic);

            return null;            

        }

        @Override
        protected void onProgressUpdate(Integer... progress) {

            textview.setText(String.valueOf(progress[0])+"%");
            progressBar.incrementProgressBy(progress[0]);

        } 
```

我调用 publishprogress 方法的下载函数的代码

```
byte[] buffer = new byte[1024];
            int bufferLength = 0;
            int total=0;
            while ((bufferLength = inputStream.read(buffer)) != -1) {
            total += bufferLength;
            fileOutput.write(buffer, 0, bufferLength);

            asynch.publishProgress(bufferLength);

            } 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:44:11.373

您`ProgressBar`在下载之间重置为零，因为该变量`total`也重置为零。

为了跟踪当前进度，进度条必须增加 ，`progressBar.incrementProgressBy()`而不是用 设置值`progressBar.setProgress()`。

This means that the `publishProgress()` and `onProgressUpdate()` methods will also have to be modified to process `increment` instead of `progress`. And, the increment is your `bufferLength`:

```
asynch.publishProgress(bufferLength); 
```

You will also have to initialize your `ProgressBar` with the total number of bytes for the sum of both downloads with `progressBar.setMax()`.

# php - 如何在 woocommerce 中向单个产品页面添加输入字段以在订单中存储额外的用户评论？

> ID：15724317
> 
> 赞同：2
> 
> 时间：2013-03-30T22:42:11.240
> 
> 标签：php, wordpress, woocommerce

我正在使用最新的 wp 和 wc，我正在尝试在前端单一产品页面中添加一个表单字段，用户可以在其中添加评论，当订单完成时，数据将在 woocommerce -> 订单下可用。有没有人这样做，或者甚至不可能，因为 woocommerce 对于这样的东西非常有限？

# php - What is the best way to store user editable configuration options?

> ID：15724318
> 
> 赞同：3
> 
> 时间：2013-03-30T22:42:11.383
> 
> 标签：php, database-design

This is something that I have been wondering about for a while, and now that I am about to begin another project that requires this, I can't help but wonder if I am doing this the "right way".

Basically, in my API for, in this instance, an enterprise phone system - our client will be able to toggle several options like "forward calls to interactive menu" or modify the spoken greeting that callers hear.

Typically I handle something like this by creating a table in a MySQL database that only has one row that is updated each time the users makes a change to something.

I can't help but feel like this is overkill. Am I doing this the right way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T22:46:06.570

If it's a global setting, that is, not user specific, I'd recommend two tables. One is your list of available settings with their definitions with a `SettingID` and the other table is just two fields: the [foreign key](http://www.techopedia.com/definition/7272/foreign-key) `SettingID` and what the setting is set to.

If the settings are something that each user can set for themselves, simply add `UserID` to the second table.

Using two tables like this, so that each new setting is a new row, is more [normalized](https://stackoverflow.com/questions/1258743/normalization-in-mysql) then the way you suggested. It allows you to have your PHP code add settings or modify settings without having to modify your MySQL Database structure.

```
SettingsList
-----------
SettingID (Auto-increment)
SettingName
SettingDescription

UserSettings
------------
UserID (if using this field, make a compound primary key from SettingID and UserID)
SettingID (SettingsList foreign key, UserSettings primary key if not using UserID)
Setting 
```

# java - JPanel 中的摆动定时器和动画

> ID：15724320
> 
> 赞同：2
> 
> 时间：2013-03-30T22:42:35.293
> 
> 标签：java, swing, animation, timer

我试图动画 2 个框从 JPanel 的右上角到左下角。对于动画，我使用的是 Swing Timer 和`SwingUtilities.invokeLater()`. 问题是当我单击开始按钮时。它只动画和移动蓝色框，而不是红色框。

继承人的代码：

```
//import neccessary stuff
public class Example extends JFrame {
public static void main(String[] args) {
    Example e = new Example();
    e.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    e.setSize(600, 565);
    e.setVisible(true);
}</code>

private JButton startButton = new JButton("Start");

private JPanel theTable = new table();

public Example() {
    add(startButton, BorderLayout.SOUTH);
    add(theTable, BorderLayout.CENTER);
    Handler handler = new Handler();
    startButton.addActionListener(handler);
}

public ArrayList<Integer> xPos, yPos;
final int START_POSITION_X = 470;
final int START_POSITION_Y = 10;

final int[] END_POSITION_X = {70, 87};
final int END_POSITION_Y = 160;

private class table extends JPanel {

    public table() {
        xPos = new ArrayList<Integer>();
        yPos = new ArrayList<Integer>();
        xPos.add(START_POSITION_X); //default position for box1
        yPos.add(START_POSITION_Y);
        xPos.add(START_POSITION_X); //default position for box2
        yPos.add(START_POSITION_Y);
    }

    public void paintComponent(Graphics g) {

        super.paintComponent(g);
        this.setBackground(new Color(-16756217));
        g.setColor(Color.RED);
        g.fillRect(xPos.get(1), yPos.get(1), 89, 129);
        g.setColor(Color.BLUE);
        g.fillRect(xPos.get(0), yPos.get(0), 89, 129);

        if (isAnimating) {
            animator.start();
        } else {
            animator.stop();
            isAnimating = false;
        }
    }
}

private class Handler implements ActionListener {
    public void actionPerformed(ActionEvent e) {

        Runnable r1 = new Runnable() {
            @Override
            public void run() {
                animateCard(0, END_POSITION_X[0], END_POSITION_Y);
            }
        };
        SwingUtilities.invokeLater(r1);
        animateCard(1, END_POSITION_X[1], END_POSITION_Y);
    }
}

public void animateCard(int card, int xDest, int yDest) {
    cardID = card;
    xDestination = xDest;
    yDestination = yDest;
    totalXDistance = Math.abs(xDestination - START_POSITION_X);
    totalYDistance = Math.abs(yDestination - START_POSITION_Y);
    animator.start();
}
int cardID;
int xDestination, yDestination, totalXDistance, totalYDistance;
boolean isAnimating = false;
Timer animator = new Timer(15, new ActionListener() {
    int startVel = 20;

    public void actionPerformed(ActionEvent e) {
        double xRelDistance, xAbsDistance, xVel;
        int xRealVel;
        xAbsDistance = xDestination - xPos.get(cardID);
        xRelDistance = xAbsDistance / totalXDistance;
        xVel = startVel * xRelDistance;

        double yRelDistance, yAbsDistance, yVel;
        yAbsDistance = yDestination - yPos.get(cardID);
        yRelDistance = yAbsDistance / totalYDistance;
        yVel = startVel * yRelDistance;

        if (xVel > 0) {
            xRealVel = (int) java.lang.Math.ceil(xVel);
        } else {
            xRealVel = (int) java.lang.Math.floor(xVel);

        }
        xPos.set(cardID, xPos.get(cardID) + xRealVel);
        int yRealVel;
        if (xVel > 0) {
            yRealVel = (int) java.lang.Math.ceil(yVel);
            yPos.set(cardID, yPos.get(cardID) + yRealVel);
        } else {
            yRealVel = (int) java.lang.Math.floor(yVel);

        }
        yPos.set(cardID, yPos.get(cardID) + yRealVel);

        if ((xPos.get(cardID) == xDestination) && (yPos.get(cardID) == yDestination)) {
            isAnimating = false;
        } else {
            isAnimating = true;
        }
        repaint();
    }
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:58:43.877

因此，在类级别声明的所有这些变量都是共享的……您的第一次调用`animateCard`将设置它们，然后您的第二次调用`animateCard`将完全覆盖以前的值。您需要将它们从类变量更改为动画的参数。

创建一个新类，该类`AnimationTask`实现`ActionListener`并保存该类中的变量。

例如，

```
class AnimationTask implements ActionListener {
    private int cardID;
    private int xDest;
    private int yDest;
    private int totalXDistance;
    private int totalYDistance;
    public AnimationTask(int cardID, int xDest, int yDest) {
       this.cardID = cardID;
       this.xDest = xDest;
       this.yDest = yDest;
       this.totalXDistance = Math.abs(xDestination - START_POSITION_X);
       this.totalYDistance = Math.abs(yDestination - START_POSITION_Y);
    }

    public void actionPerformed(ActionEvent e) {
         // do your animation logic...
    }
} 
```

并在您的“动画师”中使用该自定义类

例如，

```
Timer animator = new Timer(15, new AnimationTask(cardId, xDest, yDest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:59:14.160

放

```
animateCard(1, END_POSITION_X[1], END_POSITION_Y); 
```

在你的运行方法中：

```
public void run() {
            animateCard(0, END_POSITION_X[0], END_POSITION_Y);
        } 
```

# python - 执行syncdb时Django Satchmo DeserializationError

> ID：15724323
> 
> 赞同：1
> 
> 时间：2013-03-30T22:42:46.817
> 
> 标签：python, django, yaml, satchmo, django-syncdb

当我做

```
python manage.py syncdb 
```

它向我显示了这个错误：反序列化错误：

```
could not determine a constructor for the tag 'tag:yaml.org,2002:python/long' 
```

我已经使用 pip 安装并重新安装了 pyyaml，甚至从源代码重建了 python ......没有任何改变。我该怎么办？

# asp.net - 如何在 asp.net 中使用 CompositeDataBoundControl 进行分页？

> ID：15724325
> 
> 赞同：1
> 
> 时间：2013-03-30T22:43:23.997
> 
> 标签：asp.net, pagination

似乎没有多少人使用`System.Web.UI.WebControls.CompositeDataBoundControl`which is from `System.Web.UI.WebControls.DataBoundControl`。
有人`CompositeDataBoundControl`与分页合作过吗？
我需要一些资源。

# java - Read text from a file in the Java project

> ID：15724339
> 
> 赞同：1
> 
> 时间：2013-03-30T22:44:57.767
> 
> 标签：java, bufferedreader, filereader

I'm using Java to write a music player that will take in a `.abc` file containing a piece of music in abc format and play it.

I currently have it set up so the input is a filepath (via `FileReader`/`BufferedReader`). However, the filepath is particular to my computer and so the unit tests I wrote will fail on other computers.

So the question is:

How do I have a Java class read text from a file that is in the same project? So for example, if anybody clones into the repository I'm pushing to they can run the unit tests unmodified and have them pass.

Any suggestions about how to get around this issue will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:11:06.740

Use relative instead of absolute paths, but you should probably change your design so that your unit tests can test actual units instead of large components that handle things like IO.

# ajax - 阿贾克斯表格。从第一个选项中选择一个选项时更新第二个选择

> ID：15724342
> 
> 赞同：0
> 
> 时间：2013-03-30T22:45:26.223
> 
> 标签：ajax, forms, select, options

我要使用 Javascript，并且正在寻找制作表格。我找到了一些我编辑的代码，但它不起作用。我正在尝试制作一个带有 2 个选择下拉菜单的表单。当访问者从第一个下拉列表中选择一项服务时，第二个下拉列表将自动更新为每个服务人员的姓名。我已将代码上传到 jsFiddle。网址是[http://jsfiddle.net/mrtxR/](http://jsfiddle.net/mrtxR/)。我认为这真的很简单，但找不到任何教程和指南。

```
// The data that the service should return
// JSFiddle will echo it back for us on that URL
var doctors = {
    success: true,
    doctors: [
        {
            id: 71,
            name: "George"
        },
        {
            id: 72,
            name: "James"
        }
    ]
}

// This is what your JSON from PHP should look like
var jsonDoctors = JSON.stringify(doctors);
console.log(jsonDoctors);

// Bind change function to the select
jQuery(document).ready(function() {
    jQuery("#services").change(onServiceChange);
});

function onServiceChange()
{
    var serviceId = jQuery(this).val();    

     $.ajax({
        url: '/echo/json/',
        type: 'post',
        data: {
            serviceId: serviceId,
            json: jsonDoctors // jsFiddle echos this back to us
        },
        success: onServicesRecieveSuccess,
        error: onServicesRecieveError
    });
}

function onServicesRecieveSuccess(data)
{
    // Target select that we add the states to
    var jTargetSelect = jQuery("#doctors");

    // Clear old states
    jTargetSelect.children().remove();

    // Add new states
    jQuery(data.doctors).each(function(){        
        jTargetSelect.append('<option value="'+this.id+'">'+this.name+'</option>');
    });
}

function onServicesRecieveError(data)
{
    alert("Could not get services. Please try again.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:22:21.990

您最后的评论是正确的，您应该将 serviceId 添加到每个医生。您的假 javascript 可能如下所示：

```
// The data that the service should return
// JSFiddle will echo it back for us on that URL
var doctors = {
    success: true,
    doctors: [
        {
            id: 71,
            serviceId : 1,
            name: "George"
        },
        {
            serviceId : 2,
            id: 72,
            name: "James"
        },
        {
            serviceId : 3,
            id: 73,
            name: "Ron"
        },
        { 
            serviceId : 1,
            id : 77,
            name : "Barak",

        }
    ]
}

function getJsonDoctors(serviceId) {
    var result = [];
    var l = doctors.doctors;
    for (var i = 0 ; i < l.length ; i++) {
        if (l[i].serviceId == serviceId) {
            result.push(l[i]);   
        }
    }
    return JSON.stringify({success : true,doctors : result});
}

// This is what your JSON from PHP should look like
var jsonDoctors = JSON.stringify(doctors);
console.log(jsonDoctors);

// Bind change function to the select
jQuery(document).ready(function() {
    jQuery("#services").change(onServiceChange);
});

function onServiceChange()
{
    var serviceId = jQuery(this).val();    

     $.ajax({
        url: '/echo/json/',
        type: 'post',
        data: {
            serviceId: serviceId,
            json: getJsonDoctors(serviceId) // jsFiddle echos this back to us
        },
        success: onServicesRecieveSuccess,
        error: onServicesRecieveError
    });
}

function onServicesRecieveSuccess(data)
{
    // Target select that we add the states to
    var jTargetSelect = jQuery("#doctors");

    // Clear old states
    jTargetSelect.children().remove();

    // Add new states
    jQuery(data.doctors).each(function(){        
        jTargetSelect.append('<option value="'+this.id+'">'+this.name+'</option>');
    });
}

function onServicesRecieveError(data)
{
    alert("Could not get services. Please try again.");
} 
```

# algorithm - 找到大于给定数字的最小数字（访谈）

> ID：15724345
> 
> 赞同：0
> 
> 时间：2013-03-30T22:46:01.540
> 
> 标签：algorithm, search, data-structures, complexity-theory

我最近收到了一个面试问题，说你有一个有序的数字列表（元素的数量可能非常大，大约 100000），你要找到大于给定数字的最小数字，建议如何做到这一点O（log n）时间......我的第一个猜测是使用类似树的数据结构，面试官说是的，但是他们有构建这些树的开销，我是否可以建议另一种方法？我的明显答案是使用数组进行二进制搜索，但我想知道这是否可行，或者是否还有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:09:20.843

这取决于您使用的列表的类型。

如果它不是索引列表，那么 O(logN) 将不可能没有任何重组。

所以如果它是一个索引列表。

您可以按除法搜索。

将目标与 a[n/2] 进行比较

如果 a[n/2] 小于目标 .. 您的搜索空间就会减少。从 a[n/2+1]..a[n-1] 开始

使用相同的方法递归算法，直到找到一对这样 a[i] < target < a[i+1]

那将结束， a[i+1] 是你的答案..!!

# php - PHP表单数据未提交？

> ID：15724348
> 
> 赞同：1
> 
> 时间：2013-03-30T22:46:12.887
> 
> 标签：php, html

我想将信息从 HTML 表单传递到 PHP 页面。我的问题是表单中的数据没有被提交。我究竟做错了什么 ？我在 xxamp 上使用 phpmyadmin。我知道这是一个很长的代码，但只需花几秒钟时间尝试弄清楚。我真的需要这个...谢谢

HTML 表格

PHP代码：

```
if($_POST['FormSubmit'] == "Submit") 
{
    $errorMessage = "Connection cannot be established with the database!";

    if(empty($_POST['firstname'])) 
    {
        $errorMessage .= "<li>You forgot to enter your first name!</li>";
    }
    if(empty($_POST['surname'])) 
    {
        $errorMessage .= "<li>You forgot to enter your surname!</li>";
    }
    if(empty($_POST['email'])) 
    {
        $errorMessage .= "<li>You forgot to select your email!</li>";
    }

    $varDate = $_POST['preferred_date'];
    $varTime = $_POST['preferred_time'];
    $varAdult = $_POST['adult'];
    $varType = $_POST['excursion_type'];
    $varInfo = $_POST['add_info'];
    $varChildren = $_POST['children'];
    $varFname = $_POST['first_name'];
    $varSurname = $_POST['surname'];
    $varEmail = $_POST['email'];
    $varPhone = $_POST['telephone'];

    if(empty($errorMessage)) 
    {
        $db = mysql_connect("localhost","root","password");
        if(!$db) die("Error connecting to MySQL database.");
        mysql_select_db("reservation" ,$db);

        $sql = "INSERT INTO online_reservation (preferred_date, preferred_time, adults, children, type, additional_info, first_name, surname, email, telephone) VALUES (".
                        PrepSQL($varDate) . ", " .
                        PrepSQL($varTime) . ", " .
                        PrepSQL($varAdult) . ", " .
                        PrepSQL($varChildren) . ", " .
                        PrepSQL($varType) . ", " .
                        PrepSQL($varInfo) . ", " .                          
                        PrepSQL($varFname) . ", " .
                        PrepSQL($varSurname) . ", " .
                        PrepSQL($varEmail) . ", " .
                        PrepSQL($varPhone) . ")";
        mysql_query($sql);

        echo("Request Submitted!");
        exit();
    }
}
    // function: PrepSQL()
// use stripslashes and mysql_real_escape_string PHP functions
// to sanitize a string for use in an SQL query
//
// also puts single quotes around the string
//
function PrepSQL($value)
{
    // Stripslashes
    if(get_magic_quotes_gpc()) 
    {
        $value = stripslashes($value);
    }

    // Quote
    $value = "'" . mysql_real_escape_string($value) . "'";

    return($value);
}
?> 
```

HTML表格：

```
 <form name="reservation" method="post" onsubmit="return formValidator()" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
                <input name="service_provider" id="service_provider" value="Casela Nature &amp; Leisure Park (Tours and Excursions)" type="hidden" />
                <table style="" align="center" border="0" cellpadding="0" cellspacing="0" width="630">
                    <tbody>
                        <tr>
                            <td colspan="7"><div style="height: 10px;"></div></td>
                        </tr>
                        <tr valign="top">
                            <th align="right" height="25" valign="top" width="150">Preferred date(MM/DD/YY)*</th>
                            <td align="center" height="25" valign="top" width="10">:</td>
                            <td align="left" height="25" valign="top" width="150">
                            <input name="preferred_date" id="preferred_date" style="width: 75px;" onblur="isValidDate(); checkDate();" type="text" value="<?=$varDate;?>" />
                            </td>
                            <td height="25" width="10"><div style="height: 25px; width: 25px;"></div></td>
                            <th align="right" height="25" valign="top" width="150">Preferred time</th>
                            <td align="center" height="25" valign="top" width="10">:</td>
                            <td align="left" height="25" valign="top" width="150">
                            <input name="preferred_time" id="preferred_time" value="<?=$varTime;?>" style="width: 50px;" onblur="validatetime(this.value,'Preferred Time');" type="text" />
                            <div></div></td>
                        </tr>
                        <tr valign="top">
                            <td colspan="7"></td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">Number
                            of adults (aged above 12 yrs) *</th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="adult" id="adult" value="<?=$varAdult;?>" style="width: 30px;" type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">Number
                            of children (aged 3 to 12 yrs) *</th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="children" id="children" value="<?=$varChildren;?>" style="width: 30px;" type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">Please
                            specify type of excursion</th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="excursion_type" id="excursion_type" value="<?=$varType;?>" style="width: 300px;" type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="7" align="left">Additional
                            information and special requirements if any</th>
                        </tr>
                        <tr valign="top">
                            <td colspan="7"></td>
                        </tr>
                        <tr>
                            <td colspan="6"><textarea style="width: 490px; height: 100px;" id="add_info" name="add_info" type="<?=$varInfo;?>"></textarea></td>
                        </tr>
                        <tr valign="top">
                            <td colspan="7"><div style="height: 5px;"></div></td>
                        </tr>
                        <tr valign="top">
                            <td colspan="7">
                            <div style="text-align: justify;">
                                <b>Your
                                personal information</b>
                                <br />
                                Please note that filling the correct information below is essential.
                                Tropicscope.com declares that personal information collected below will
                                not be diffused, sold or re-used by the website.
                            </div></td>
                        </tr>
                        <tr valign="top">
                            <td colspan="7"></td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">First
                            name* </th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="first_name" id="firstname" value="<?=$varFname;?>" style="width: 300px;" onblur="validateName(this.value,'Firstname'); " type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">Surname
                            *</th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="surname" id="surname" value="<?=$varSurname;?>" style="width: 150px;" onblur="validateName(this.value,'Surname');" type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">E-mail
                            address *</th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="email" id="email" value="<?=$varEmail;?>" style="width: 250px;" onblur=" validateEmail(); validateBlank(this.value,'Email address');" type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right">Telephone*</th>
                            <td align="center" height="25" width="10">:</td>
                            <td colspan="3" align="left">
                            <input name="telephone" id="telephone" value="<?=$varPhone;?>" style="width: 100px;" onblur="validatephone(this.value,'Telephone number');" type="text" />
                            </td>
                        </tr>
                        <tr valign="top">
                            <th colspan="3" align="right"></th>
                            <td align="center" height="25" width="10">
                            <br />
                            </td>
                            <td colspan="3" align="left">
                            <br />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3"></td>
                        </tr>
                        <tr valign="top">
                            <td colspan="7" align="center">
                            <div style="height: 30px;">
                                <input style="height: 25px;" value="Submit" onclick="validateSubmit();" type="submit" name="FormSubmit" />
                            </div></td>
                        </tr>
                    </tbody>
                </table>
            </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:48:49.257

```
 if(empty($errorMessage)) 
```

总是**会**是假的，因为你在`$errorMessage`这里设置：

```
$errorMessage = "Connection cannot be established with the database!"; 
```

# iphone - photo from library will not move and scale

> ID：15724349
> 
> 赞同：0
> 
> 时间：2013-03-30T22:46:13.880
> 
> 标签：iphone, ios

In my app the user is able to select a photo from the library with the code below. Because I want the user to crop the photo I have made sure that setAllowsEditing:YES.

When you select the photo you can move and scale the image but when the image is viewed later on (selectedImage) the image reverts back to its original size ???

```
 myPicker = [[UIImagePickerController alloc] init];
    [myPicker setSourceType: UIImagePickerControllerSourceTypePhotoLibrary];
    [myPicker setToolbarHidden:NO];
    [myPicker setAllowsEditing:YES];
     myPicker.delegate = self;

    //this adds mypicker to current view
    [self presentViewController:myPicker animated:YES completion:NULL];

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
selectedImage = [[UIImage alloc]init];

selectedImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; 
```

![enter image description here](../Images/4dfeccbfcef0d61d9e9723421291c3b0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:09:05.613

you just have to use "UIImagePickerControllerEditedImage" instead of "UIImagePickerControllerOriginalImage".

thanks.

# gnuplot - Plotting .dat file with different symbols chosen from a third column

> ID：15724351
> 
> 赞同：1
> 
> 时间：2013-03-30T22:46:29.307
> 
> 标签：gnuplot

I have the following table:

```
/*   out.dat   */
0 1.856381821661646 0.511222553331535
1 -1.513297876716274 -0.795936395061944
2 -1.467599747901700 -0.746686307661924
3 -0.559071676029565 0.626769978902970
4 0.826490214782210 0.000000002133100
4 0.836812258049098 0.000000002119134
4 0.837038664701387 0.000000001783730
4 0.845692121312554 0.000000003032239
4 0.909049958675113 0.000000000193274
4 0.885434430828159 0.000000000194619
(...) 
```

The second and third columns are the x/y values, where the first column is the label for the datapoints. I want all points with a 0 to have a distinguishable symbol, another symbol for all points with a 1, and so on.

So the pseudocode looks like this: `plot "out.dat" using 2:3 with points [from 1\. col]` By the way, since I need around 30 different symbols, the `palette` option doesn't help much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:10:37.920

You could use gnuplot's iteration:

```
plot for [i=0:30] 'out.dat' u 2:($1==i ? $3: NaN) w points pt i 
```

Although I must say that hoping for 30 unique and easily distinguishable markers might be a bit of a stretch for most (*all?*) terminals...

# asp.net-mvc - MVC4 RouteConfig.cs does not return static file robots.txt

> ID：15724354
> 
> 赞同：2
> 
> 时间：2013-03-30T22:46:38.620
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

so here's what my RouteConfig looks like:

```
 public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute("Robots.txt",
            "robots.txt",
            new { 
                controller = "Home", 
                action = "Robots", 
                id = "", 
                language = "en", 
                culture = "us" 
            });
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
            "Default",
            "{language}/{culture}/{controller}/{action}/{id}",
            new
            {
                controller = "Home",
                action = "Index",
                id = "",
                language = "en",
                culture = "us"
            });
    }
} 
```

Now according to my understanding, The site should route to robots.txt when I go to www.mysite.com/robots.txt, however it is not. I also had problems serving another static page, but I found a workaround and didn't have to serve the static .html page.

I have built another site in MVC3 and I've copied the route config patterns I used there and they seem to work fine. Any ideas why this would not work?

P.S. I see the robots.txt file just fine when I browse to www.mysite.com/en/US/Home/Robots so all the controllers, actions, & views are matching up just fine.

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T22:56:09.317

That might be because IIS thinks it is a static file because of the extension and not passing it to the managed pipeline for processing.

You could add the following handler to the `<system.webServer>` section of your web.config file in order to make all requests to `/robots.txt` go through the managed pipeline (and thus through the routes you might have setup):

```
<system.webServer>
    <handlers>
        ...
        <add name="Robots" path="robots.txt" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

You might also make this work by enabling managed modules for all requests but I wouldn't recommend you doing that as all requests will now go through the managed pipeline which might have an additional overhead:

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    ...
</system.webServer> 
```

# javascript - Using Boost with Emscripten

> ID：15724357
> 
> 赞同：37
> 
> 时间：2013-03-30T22:47:20.397
> 
> 标签：javascript, c++, boost, emscripten

I have a c++ project I would like to convert to a web application. For this purpose, I would like to use Emscripten to build the project.

The project uses some external libraries. I managed to compile or find the JavaScript version of most libraries and now I am stuck with the Boost ones. Actually I do not even know how to start for Boost: they use a boostrap script to generate the files to build the libraries. It is possible to pass the toolset to this script but Emscripten is obviously not supported.

My project uses the following parts of Boost: Thread, Regex, FileSystem, Signals, System. How can I compile these libraries using Emscripten?

**Edit**

按照 npclaudiu 的回答，我使用 gcc 工具包引导库，然后我编辑`project-config.jam`配置编译器，替换：

```
# Compiler configuration. This definition will be used unless
# you already have defined some toolsets in your user-config.jam
# file.
if ! gcc in [ feature.values <toolset> ]
{
    using gcc ;
} 
```

和

```
# Compiler configuration. This definition will be used unless
# you already have defined some toolsets in your user-config.jam
# file.
if ! gcc in [ feature.values <toolset> ]
{
    using gcc : : "/full/path/to/em++" ;
} 
```

现在，打字`./b2`有效地构建了库。Boost.Signals 和 Boost.System 编译良好。其他的有一些错误。

Boost.Thread 抱怨：

```
libs/thread/src/pthread/thread.cpp:503:27: error: use of undeclared identifier 'pthread_yield'
        BOOST_VERIFY(!pthread_yield());
                      ^ 
```

Boost.Regex 抱怨很多关于 CHAR_BIT 未声明的问题，但这似乎是 emscripten 中的一个问题：

```
In file included from libs/regex/build/../src/c_regex_traits.cpp:28:
In file included from ./boost/regex/v4/c_regex_traits.hpp:26:
In file included from ./boost/regex/v4/regex_workaround.hpp:35:
/path/to/emscripten/system/include/libcxx/vector:1989:92: error: use of undeclared identifier 'CHAR_BIT'
static const unsigned __bits_per_word = static_cast<unsigned>(sizeof(__storage_type) * CHAR_BIT);
                                                                                       ^ 
```

Boost.FileSystem 似乎也因 emscripten 而失败：

```
In file included from libs/filesystem/src/windows_file_codecvt.cpp:21:
/path/to/emscripten/system/include/libcxx/cwchar:117:9: error: no member named 'FILE' in the global namespace
using ::FILE;
      ~~^ 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-31T18:22:49.840

我终于设法用 emscripten 编译了所需的库。这是我遵循的步骤。

# emscripten 的变化

编辑`system/include/libcxx/climits`以添加以下定义（参见[http://github.com/kripken/emscripten/issues/531](http://github.com/kripken/emscripten/issues/531)）：

```
#ifndef CHAR_BIT
# define CHAR_BIT __CHAR_BIT__
#endif

#ifndef CHAR_MIN
# define CHAR_MIN (-128)
#endif

#ifndef CHAR_MAX
# define CHAR_MAX 127
#endif

#ifndef SCHAR_MIN
# define SCHAR_MIN (-128)
#endif

#ifndef SCHAR_MAX
# define SCHAR_MAX 127
#endif

#ifndef UCHAR_MAX

# define UCHAR_MAX 255
#endif

#ifndef SHRT_MIN
# define SHRT_MIN (-32767-1)
#endif

#ifndef SHRT_MAX
# define SHRT_MAX 32767
#endif

#ifndef USHRT_MAX
# define USHRT_MAX 65535
#endif

#ifndef INT_MAX
# define INT_MAX __INT_MAX__
#endif

#ifndef INT_MIN
# define INT_MIN (-INT_MAX-1)
# define INT_MIN (-INT_MAX-1)
#endif

#ifndef UINT_MAX
# define UINT_MAX (INT_MAX * 2U + 1)
#endif

#ifndef LONG_MAX
# define LONG_MAX __LONG_MAX__
#endif

#ifndef LONG_MIN
# define LONG_MIN (-LONG_MAX-1)
#endif

#ifndef ULONG_MAX
# define ULONG_MAX (LONG_MAX * 2UL + 1)
#endif 
```

在中添加以下行`system/include/libcxx/cwchar`

```
#include <cstdio> 
```

# 将 Boost 编译为共享库

按照 npclaudiu 的建议，使用 gcc 工具包引导库。然后编辑`project-config.jam`以配置编译器并替换：

```
# Compiler configuration. This definition will be used unless
# you already have defined some toolsets in your user-config.jam
# file.
if ! gcc in [ feature.values <toolset> ]
{
    using gcc ;
} 
```

和

```
# Compiler configuration. This definition will be used unless
# you already have defined some toolsets in your user-config.jam
# file.
if ! gcc in [ feature.values <toolset> ]
{
    using gcc : : "/full/path/to/emscripten/em++" ;
} 
```

强制`BOOST_HAS_SCHER_YIELD`进入`boost/config/posix_features.hpp`，在 67 号线附近。

然后编译库：`./b2 thread regex filesystem signals system`

# 将 Boost 编译为静态库

执行上述所有步骤，然后编辑`tools/build/v2/tools/gcc.jam`和替换：

```
toolset.flags gcc.archive .AR $(condition) : $(archiver[1]) ; 
```

和

```
toolset.flags gcc.archive .AR $(condition) : "/full/path/to/emscripten/emar" ; 
```

和

```
toolset.flags gcc.archive .RANLIB $(condition) : $(ranlib[1]) ; 
```

和

```
toolset.flags gcc.archive .RANLIB $(condition) :
  "/full/path/to/emscripten/emranlib" ; 
```

编译库：`./b2 link=static variant=release threading=single runtime-link=static thread signals system filesystem regex`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-12-11T10:47:16.077

作为记录，Boost 现在包括一个“emscripten”工具集，（根据我的经验）它使上述过程变得不必要。

使用时，像往常一样使用 boostrap boost，然后像这样使用 b2（或 bjam）编译：

```
b2 toolset=emscripten 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-03-05T17:06:01.077

在较新版本的 emscripten 中，您可以简单地使用[ports](https://emscripten.org/docs/compiling/Building-Projects.html#emscripten-ports)添加 Boost 库。现在就像将这个标志添加到编译器**和**链接器一样简单： `-s USE_BOOST_HEADERS=1`

如果您使用的是 CMake，则可以像这样添加标志：

```
set_target_properties(your_targets_name_here PROPERTIES COMPILE_FLAGS "-s USE_BOOST_HEADERS=1" LINK_FLAGS "-s USE_BOOST_HEADERS=1") 
```

[问题的更多细节](https://github.com/emscripten-core/emscripten/issues/10630)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-30T23:08:02.430

您可以尝试配置指定`gcc`为工具集的 Boost 库，因为 Emscripten 建议自己[作为 gcc 的替代品](https://github.com/kripken/emscripten/wiki/Building-Projects)。此外，我认为最好将 Boost 构建为这种情况下的静态库。请记住，大多数 Boost 库都是只有头文件的，因为它们只定义模板类/函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T23:02:34.117

我不知道您是否碰巧在常见问题解答中看到了这个特定问题[，](https://github.com/kripken/emscripten/wiki/FAQ)但如果您没有：

> 问：如何链接到 SDL、boost 等系统库？
> 
> A. emscripten 中包含的系统库 - libc、libc++ (C++ STL) 和 SDL - 在您编译时会自动包含（以及它们的必要部分）。与其他编译器不同，您甚至不需要 -lSDL（但 -lSDL 也不会受到伤害）。
> 
> emscripten 不包含的其他库，**例如 boost**，您需要自己编译并链接到您的程序，就像它们是您项目中的一个模块一样。例如，查看[BananaBread 如何在 libz 中链接](https://github.com/kripken/BananaBread/blob/master/cube2/src/web/Makefile)。（注意，在 boost 的具体情况下，如果只需要 boost 头文件，则不需要编译任何东西。）
> 
> 不包含的库的另一个选择是将它们实现为 JS 库，就像 emscripten 对 libc（减去 malloc）和 SDL（但不是 libc++ 或 malloc）所做的那样。请参阅 emcc 中的 --js-library。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-04T07:17:22.930

emsdk 的更新：

经过大量的试验和错误，我能够通过以下方式获得 emscripten 1.39 来编译 Boost 1.71：

如果您还没有从[https://emscripten.org/docs/getting_started/downloads.html安装 emsdk](https://emscripten.org/docs/getting_started/downloads.html)

导航到 emsdk 安装文件夹并执行

```
./emsdk install latest && ./emsdk activate latest && source ./emsdk_env.sh 
```

导航到要克隆 Boost 存储库并运行的目录

```
git clone --recursive https://github.com/boostorg/boost.git 
```

您可以添加参数“--jobs N”，其中 N 是用于克隆子模块的进程数（如果这样做会更快）。

```
cd boost 
```

现在使用引导脚本创建 boost-build 可执行文件 b2

```
./bootstrap.sh 
```

最后，由于您的 emsdk 已经从上述步骤激活，您可以使用 emconfigure 构建 Boost 来配置所有内容，因为它需要调用 gcc 来使用 emscripten

```
emconfigure ./b2 toolset=gcc --prefix=<directory_to_install_to> --build-dir=<directory_for_intermediate_build_files> 
```

现在要将包含和库安装到您选择的前缀目录，运行

```
emconfigure ./b2 toolset=gcc --prefix=<directory_to_install_to> --build-dir=<directory_for_intermediate_build_files> install 
```

# ios - UISearchBar in UINavigationControllers NavigationBar (like google currents for iOS)

> ID：15724365
> 
> 赞同：1
> 
> 时间：2013-03-30T22:48:45.287
> 
> 标签：ios, objective-c

In the current Google Currents iOS App (March 30th, 2013) there is a search button in the upper right corner. If you tap it, the button moves to the left and a text field 'grows' out of the right side. The other buttons are moved out of the left side in the same animation.

My question is: how would you achieve a behaviour like this? Is it possible to achieve this with UINavigationController (and UISearchBar/UISearchDisplayController) and other default iOS controls or did google wrote their own navigation controller? I appreciate any hint.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:58:02.407

All you have to do is use a UIView animation and widen the frame of the search bar. You will have to reduce it also in the same fashion...

```
[UIView animateWithDuration:0.8 
                  delay:0.0
                options:UIViewAnimationOptionBeginFromCurrentState
             animations:^{
                 searchFrame.size.width += 300;
                 searchbar.frame = searchFrame;
             }
             completion:nil]; 
```

# exception - 向 Packagist 提交包时发生异常。怎么解决？

> ID：15724371
> 
> 赞同：0
> 
> 时间：2013-03-30T22:49:06.797
> 
> 标签：exception, doctrine, packagist

我想向 Packagist 提交一个包（盯着项目），但出现以下错误：

```
[Doctrine\DBAL\DBALException] An exception occurred while executing 'INSERT INTO tag (name) VALUES (?)' with params {"1":"Mathematica"}: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'Mathematica' for key 'name_idx' 
```

我的项目的网址是： [https ://github.com/GarouDan/phpmath.git](https://github.com/GarouDan/phpmath.git)

打包师网址：[https ://packagist.org/packages/garoudan/phpmath](https://packagist.org/packages/garoudan/phpmath)

`composer.json`文件：

```
{
    "name": "garoudan/phpmath",
    "type": "library",
    "description": "Library to run Mathemtica functions trought PHP.",
    "keywords": ["php","PHP","mathematica","Mathematica","MathKernel","mathkernel","math","MathematicaScript","mathematicascript"],
    "homepage": "https://github.com/GarouDan/phpmath",
    "license": "MIT",
    "authors": [
        {
            "name": "Danilo Araújo Silva",
            "email": "silva.danilo.araujo@gmail.com",
            "homepage": "http://daniloaraujosilva.com",
            "role": "Developer"
        }
    ],
    "require": {
        "php": ">=5.3.0"
    },
    "autoload": {
        "psr-0": {
            "Backend" : "core"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:24:17.080

这看起来像是违反了 SQL 唯一约束。这可能是因为您的所有标签都有小写和大写版本，并且它们使用的是不区分大小写的数据库。尝试仅使用每个标签之一提交它。

# mongodb - Search MongoDB document for value in one or more fields

> ID：15724376
> 
> 赞同：2
> 
> 时间：2013-03-30T22:49:35.167
> 
> 标签：mongodb, indexing, database

I have a search field in my application which I would like to query my collection in multiple ways. The search query which is input by the user needs to match either the `name` field or the `url` field. For example, a document that looks like this:

```
{ "name": "Google Maps", "url": "http://maps.google.co.uk/" } 
```

Should be matched if I input `goog`, `//maps`, `maps google`, etc. – you get the picture. Just a case insensitive regex search on **multiple** fields.

I know how to use regex to search a field for a case insensitive value, but I'm new to MongoDB (and databases in general) and I'm not sure what the best solution would be for this. Do I need to implement a "compound index"? If so, how do I query against that index for the two fields?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:56:28.787

Split your input by spaces then add each to the list of queries to `$or`:

```
db.collection.find({
  $or: {
    [
      {name: /goog/i},
      {url: /goog/i},
      {name: /\/\/maps/i},
      {url: /\/\/maps/i}
    ]
  }
}) 
```

In node:

```
var query = "maps google";
var ors = [];
query.split(" ").forEach(function(q) {
  ors[] = {name: new RegExp(q)};
  ors[] = {url: new RegExp(q)};
});
db.collection.find({$or: {ors} }) 
```

# ruby-on-rails - 如何使用地理编码器从城市列表中自动显示用户的城市

> ID：15724381
> 
> 赞同：0
> 
> 时间：2013-03-30T22:50:39.757
> 
> 标签：ruby-on-rails, ruby, geocoding

我正在尝试实现一种功能，该功能采用访问者的 IP 地址并在站点的标题中返回城市名称。

但是，需要从预先填写的城市列表中删除该城市。我将用美国主要城市的列表填充该列表。

我的问题分为三个部分：

1.  填充主要城市静态列表的最佳方式是什么——是通过迁移吗？
2.  如何使用 Geocoder 从该预填充列表中仅返回城市？一些城市将是较小的城市，我想根据它们与这些城市的接近程度将它们“卷入”到较大的城市中
3.  如何将标题中的城市显示为下拉列表并根据用户的 IP 将默认城市设置为用户的城市，同时还让用户从该下拉列表中选择不同的城市？

目前，我正在使用专用的 Location.rb 模型和 locations_controller.rb 控制器。

在我的模型中：

```
reverse_geocoded_by :lat, :lon do |obj,results|
  if geo = results.first
    obj.city    = geo.city
  end
end
after_validation :reverse_geocode 
```

在我的控制器中：

```
def index
    @ip = request.remote_ip
    @locations = Location.all
    @city = result.city
end 
```

在我的部分标题中：

```
<%= collection_select(@cities) %> 
```

我是 Rails 和 GeoCoder gem 的新手，所以我不确定我在代码和结构方面是否正确。任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:08:41.977

1）迁移不是您应该填充任何数据的地方，您可以在文件 db/seeds.rb 中添加数据填充（您通常运行：rake db:create;rake db:migrate;rake db:seed ）。如果您不喜欢 db/seeds.rb，可以添加自定义 Rake 任务。

2) Geocoder doesn't came with that feature out of the box, what you can do, is to store the major cities on a table, with their latitude and longitude, then do a geo ip query to check what's the user latitude/longitude, and use geocoder to search the major city closer (Model.near) to the user lat/long.

3)

```
def index
  @ip = request.remote_ip
  @locations = Location.all
  @lat, @lng = write_code_to_get_user_lat_and_lng
  @city = Location.near([@lat, @lng], maximum_radius_in_miles).first
end

<%= select_tag('user_city', options_for_select(@locations.collect {|l| [l.name. l.id]}, @city.id) %> 
```

# php - 需要 jQuery UI 对话框来更新下拉值

> ID：15724394
> 
> 赞同：0
> 
> 时间：2013-03-30T22:53:23.993
> 
> 标签：php, ajax, jquery-ui, jquery

我在他们的网站上获得了这个 jQuery UI，我想将它重新制作成一个简单的大学计算应用程序。我的计划是取出电子邮件、用户名等基本数据，并将其替换为 3 个主下拉菜单。1 看看他们是州内学生还是州外学生，两者的值不同。另一个下拉菜单将询问他们是否留在大学，并根据他们的输入更新费用，然后最后一个下拉菜单将询问他们将参加多少年。根据这 3 个输入，它计算出该学院的总成本。我需要的是发布下拉菜单的值而不是文本框。谢谢你的帮助！！所以我目前有这个：

风格：

```
<style>
body { font-size: 62.5%; }
label, input { display:block; }
input.text { margin-bottom:12px; width:95%; padding: .4em; }
fieldset { padding:0; border:0; margin-top:25px; }
h1 { font-size: 1.2em; margin: .6em 0; }
div#users-contain { width: 350px; margin: 20px 0; }
div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
div#users-contain table td, div#users-contain table th { border: 1px solid #eee;
padding: .6em 10px; text-align: left; }
.ui-dialog .ui-state-error { padding: .3em; }
.validateTips { border: 1px solid transparent; padding: 0.3em; }
</style> 
```

jQuery 脚本

```
<script>
$(function() {
var username = $( "#username" ),
  studenttut = $( "#studenttut" ),
  studenttut = $( "#campusrb" ),
  studenttut = $( "#yearsatten" ),
  allFields = $( [] ).add( username ).add( studenttut ).add( campusrb ).add( yearsatten ),
  tips = $( ".validateTips" );

function updateTips( t ) {
  tips
    .text( t )
    .addClass( "ui-state-highlight" );
  setTimeout(function() {
    tips.removeClass( "ui-state-highlight", 1500 );
  }, 500 );
}

function checkLength( o, n, min, max ) {
  if ( o.val().length > max || o.val().length < min ) {
    o.addClass( "ui-state-error" );
    updateTips( "Length of " + n + " must be between " +
      min + " and " + max + "." );
    return false;
  } else {
    return true;
  }
}

function checkRegexp( o, regexp, n ) {
  if ( !( regexp.test( o.val() ) ) ) {
    o.addClass( "ui-state-error" );
    updateTips( n );
    return false;
  } else {
    return true;
  }
}

$( "#dialog-form" ).dialog({
  autoOpen: false,
  height: 300,
  width: 350,
  modal: true,
  buttons: {
    "Create an account": function() {
      var bValid = true;
      allFields.removeClass( "ui-state-error" );

      bValid = bValid && checkLength( username, "username", 3, 16 );
      bValid = bValid && checkLength( studenttut, "studenttut", 1, 2 );
      bValid = bValid && checkLength( campusrb, "campusrb", 1, 2 );
      bValid = bValid && checkLength( yearsatten, "yearsatten", 1, 2 );       
      bValid = bValid && checkRegexp( username, /^[a-z]([0-9a-z_])+$/i, "Username may           consist of a-z, 0-9, underscores, begin with a letter." );
      bValid = bValid && checkRegexp( studenttut, /^[1-2]/, "Please select an option for the type of student you'll be." );
      bValid = bValid && checkRegexp( campusrb, /^[1-2]/, "Username may consist of a-z, 0-9, underscores, begin with a letter." );
      bValid = bValid && checkRegexp( yearsatten, /^[1-8]/, "Username may consist of a-z, 0-9, underscores, begin with a letter." );

      if ( bValid ) {
        $( "#users tbody" ).append( "<tr>" +
          "<td>" + username.val() + "</td>" +
          "<td>" + studenttut.val() + "</td>" +
          "<td>" + campusrb.val() + "</td>" +
          "<td>" + yearsatten.val() + "</td>" +
        "</tr>" );
        $( this ).dialog( "close" );
      }
    },
    Cancel: function() {
      $( this ).dialog( "close" );
    }
  },
  close: function() {
    allFields.val( "" ).removeClass( "ui-state-error" );
  }
});

$( "#create-user" )
  .button()
  .click(function() {
    $( "#dialog-form" ).dialog( "open" );
  });
  });
  </script> 
```

HTML

```
<body>

<div id="dialog-form" title="Create new user">
<p class="validateTips">All form fields are required.</p>

<form>
<fieldset>
<label for="username">username</label>
<input type="text" name="username" id="username" class="text ui-widget-content ui-    corner-all" />

<label for="studenttut">Are you a In-state/Out-of-state student?</label>
<select name="studenttut" id="studenttut" class="text ui-widget-content ui-corner-all"   />
    <option value="1">In-State-student</option>
    <option value="2">Out-of-State-student</option> 
</select>

<label for="campusrb">Are you staying on campus?</label>
    <select name="campusrb" id="campusrb" class="text ui-widget-content ui- corner-all" />
        <option value="" disabled="disabled" selected="selected">Please select an option</option>
        <option value="1">Yes</option>
        <option value="2">No</option> 
    </select>

<label for="yearsatten">How many years are you planning to attend??</label>
    <select name="yearsatten" id="yearsatten" class="text ui-widget-content ui-  corner-all" />
        <option value="" disabled="disabled" selected="selected">Please   select an option</option>     
        <option value="1">1 year</option> 
        <option value="2">2 years</option> 
        <option value="3">3 years</option>
        <option value="4">4 years</option>
        <option value="5">5 years</option>
        <option value="6">6 years</option>
        <option value="7">7 years</option>
        <option value="8">8 years</option>
    </select>
</fieldset>
  </form>
</div>

<div id="users-contain" class="ui-widget">
  <table id="users" class="ui-widget ui-widget-content">
    <thead>
      <tr class="ui-widget-header ">
        <th>Total Cost</th>
      </tr>
    </thead>
    <tbody>
      <tr>

      </tr>
    </tbody>
  </table>
</div>
<button id="create-user">Create new user</button>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:29:03.033

你应该能够做这样的事情：

```
$( "#users tbody" ).append( "<tr>" +
    "<td>" + username.val() + "</td>" +
    "<td>" + $('#studenttut>option:selected').text() + "</td>" +
    "<td>" + $('#campusrb>option:selected').text() + "</td>" +
    "<td>" + $('#yearsatten>option:selected').text() + "</td>" +
    "</tr>" ); 
```

# css - How to disable shadow on text?

> ID：15724395
> 
> 赞同：1
> 
> 时间：2013-03-30T22:53:41.820
> 
> 标签：css, text, shadow

what code should I remove/ add to so that the text isn't hard to read on this URL: [Marketbot.net](http://marketbot.net)

I want plain black text, not a popup shadowed text.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:59:30.143

You need to change your `#slider-bg` styling inside your `flexslider.css` file.

Here is what's defined for it currently:

![enter image description here](../Images/d8fbf970e4549b2a024e59914d6f8b56.png)

Just remove the `text-shadow` and change the color to black.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:00:48.350

Try to remove the text-shadow from the style of your `body{}` inside your `css` in the file `style.css` line:63 :)

# iphone - How many occurrence of each item appears in a NSMutableArray

> ID：15724397
> 
> 赞同：0
> 
> 时间：2013-03-30T22:54:25.233
> 
> 标签：iphone, objective-c, nsmutablearray, nsarray

I have an NSMutableArray with some NSNumber :

```
{1, 2, 3, 3, 2, 1, 6, 2} 
```

I would like to know how many occurrence of each number appears in the list.

```
Ex :  
1 = 2  
2 = 3  
3 = 2  
6 = 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T22:57:33.743

You can put all the items into a `NSCountedSet`.

```
NSCountedSet* countedSet = [[NSCountedSet alloc] initWithArray:array];

for (NSNumber* number in countedSet) {
   NSLog(@"%@ = %u", number, [countedSet countForObject:number]);
} 
```

# c# - Figuring out how to get rid of border around cell in UITableView cell

> ID：15724401
> 
> 赞同：2
> 
> 时间：2013-03-30T22:54:39.310
> 
> 标签：c#, ios, uitableview, xamarin.ios, monotouch.dialog

I recently had help getting to the properties available on a cell by overriding the GetCell method using monotouch.dialog. My problem now is that I can't see to get rid of the default border around cells.

I was able to figure out how to draw my own border around the cell (I believe it is using core graphics and the .Layer property on a cell for this). However, the old border still remains, and I can't find a property to disable this.

Ideally I would prefer to just be able to customise the existing border myself, but if this is not possible (without needing to make my own cell graphics), then I would like to remove the default border and use the border generated in code.

See below for the override method and a screenshot of what I have so far:

```
public override UITableViewCell GetCell(UITableView tableView) {
    var cell = base.GetCell(tableView);
    cell.BackgroundColor = Resources.XDarkGrayColor;
    cell.TextLabel.TextColor = Resources.XWhiteColor;
    cell.Accessory = UITableViewCellAccessory.DisclosureIndicator;
    cell.Layer.ShadowColor = UIColor.Red.CGColor;
    cell.Layer.BorderColor = UIColor.Red.CGColor;
    cell.Layer.BorderWidth = 2.0f;
    cell.Layer.CornerRadius = 5.0f;
    cell.Layer.ShadowRadius = 2.0f;
    cell.Layer.ShadowOpacity = 0.75f;

    return cell;
} 
```

![This shows the red border I created in code using the .Layer property of a cell, and then the default border around the cell just on the inside of the red border](../Images/1cab8ff5cc07d4ffd66b822eff962a95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:05:10.520

IIRC (can't try it right now) this is draw with the background view. So you'll need to either remove it, like:

```
cell.BackgroundView = new UIView (RectangleF.Empty); 
```

or sets the `Bounds` properties to `Empty`, like:

```
cell.BackgroundView.Bounds = RectangleF.Empty; 
```

# javascript - Graph - Modeling dependencies into parallelism/serialism

> ID：15724403
> 
> 赞同：1
> 
> 时间：2013-03-30T22:55:22.247
> 
> 标签：javascript

How do I take a set of dependencies and model them as a serial and parallel actions?

For example:

U1 depends upon U2

could be a serial representation of

```
S: [U1, U2] 
```

U1 and U2 are not dependent would be a parallel representation.

```
P: [U1, U2] 
```

S means serial, and P means parallel. In this example U refers to a URL that points to a resource.

In parallel resources the ordering does not matter. In serial resources the ordering does matter.

I'm trying to build a resource loader.

It only needs to work with the local server. Also, it only uses Ajax get requests to load resources.

But I want to a language/syntax to model the complexity of dependent resources.

**Clarification and Examples**

This is for learning/later implementation. No outside libraries unless you can relate the syntax they use for loading to the question.

**Example 1**

Jqueryui depends upon jquery. This would be represented as...

```
S: [U-jquery, U-jqueryui] 
```

**Example 2**

jquery.js does not depend upon underscore.js. This would be represented as...

```
P: [U-jquery, U-underscore] 
```

**Example 3**

backbone.js depends upon both underscore.js and jquery.js

```
P:[U-underscore, U-jquery] // group1
S:[some_notation to represent group1, U-backbone.js] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:53:45.993

> No outside libraries unless you can relate the syntax they use for loading to the question.

You might want to have a look at [require.js](http://requirejs.org/) and how it specifies its dependencies. MediaWiki's [ResourceLoader](http://www.mediawiki.org/wiki/ResourceLoader) is also quite interesting, and though the JS dependency map is dynamically generated by the PHP script its structure might be relevant.

> Jqueryui depends upon jquery. This would be represented as...
> 
> ```
> S: [U-jquery, U-jqueryui] 
> ```

Possible, why not. However I'm not sure if you want to invent your own DSL for dependency management; if you rather want to stick with standard JSON / object literals I'd propose to use keys of an object for the modules whose dependencies you declare, and then lists as values:

```
deps = {
    "U-jqueryui": /*depends on*/ ["U-jquery" /*and nothing else*/]
}; 
```

> jquery.js does not depend upon underscore.js. This would be represented as...
> 
> ```
> P: [U-jquery, U-underscore] 
> ```

I don't understand. Why would you need to explicitly declare that? Everything that is unrelated (does not [explicitly] depend on each other somehow) should default to unordered loading/execution. Otherwise you would have an exponential amount of P-declarations for independent modules; and what should happen if you miss one?

> backbone.js depends upon both underscore.js and jquery.js
> 
> ```
> P:[U-underscore, U-jquery] // group1
> S:[some_notation to represent group1, U-backbone.js] 
> ```

I would just use the same form as in example #1:

```
deps = {
    "U-backbone.js": /*depends on*/ ["U-underscore", /*and*/ "U-jquery"]
}; 
```

If you really need groups for something, you can create them like a module without a body, that just loads all its dependencies and provides them. In your loader code then make some exceptions for them (based on the name not starting with `U-` maybe?) so they don't fire actual ajax requests. Your final dependency object will then look like

```
deps = {
    "U-jqueryui": ["U-jquery"],
    "group1": ["U-underscore", "U-jquery"],
    "U-backbone.js": ["group1"]
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T23:09:01.833

Check `Modernizr.load`:

> There’s a good chance that you’re not terribly unhappy with your script downloading speeds now, but you’ll be happy to know that Modernizr.load does not slow anything down, and can sometimes offer a small boost in performance by loading scripts asynchronously and in parallel. There’s a lot of variables to weigh in this area, so we suggest that you try a few things to make sure you’re getting maximum performance for your specific situation.

[http://modernizr.com/docs/](http://modernizr.com/docs/)

# java - How do you go back to an earlier node?

> ID：15724404
> 
> 赞同：1
> 
> 时间：2013-03-30T22:55:22.420
> 
> 标签：java, linked-list, nodes

```
while(element != null)
{
    //temp = element (useless)
    element = element.node;

    //can't do (element.node).method();
    //neither temp.method();
} 
```

To traverse a LinkedList we do the above. However, what if I want to go back to an earlier node? Is that even possible? I thought about storing the node in a temp variable, but I wouldn't be able to changes the nodes in the LinkedList since the temporary variable would only store the value of the node and not the object.

I didn't expect LinkedList to be so difficult to work with, because I was used to working with non-dynamic data structures (array).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:03:28.137

There is a related data-structure called a ["Doubly linked list"](http://en.wikipedia.org/wiki/Doubly_linked_list), in which in addition to storing a pointer to the next element, you ALSO store a pointer to the previous element. This way you can not only go down the list, but also back up. Will this serve your purpose?

Also, to respond to your suggestion of using a temporary variable, I think that will in fact work as long as the data you are storing is an object (instead of a primitive), and the changes you need to make are changes to the object rather than reassignment of the object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:06:28.790

Doubly linked list, as Jimmy Lee mentions above, is the classic approach. You could also save references to "interesting" nodes. Or you could create a new linked list with the links going in the opposite direction as you traverse the list. And finally, one trick is to simply reverse the links as you traverse the list, but this change the original list.

# php - Retrieveing distinct results from MySQL with CodeIgniter

> ID：15724405
> 
> 赞同：1
> 
> 时间：2013-03-30T22:55:26.457
> 
> 标签：php, mysql, codeigniter

I am trying to get filters for the portfolio items listed in the database. As one filter can contain more than one portfolio item, the record duplicates the filters entry in the database.

My Code:

```
 $this->db->distinct();
    $this->db->select('filter_id, portfolio_id');
    $this->db->where('user_id', $user);
    $this->db->join('user_portfolio_filters', 'user_portfolio_filters.id =   user_portfolio_relationship.filter_id');
    return $this->db->get('user_portfolio_relationship')->result_array(); 
```

The filters return fine without the top two lines, however they repeat themselves, how can I only return the filters which have a unique 'filter_id'?

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:06:19.997

Check this answer [https://stackoverflow.com/a/7250654/1666071](https://stackoverflow.com/a/7250654/1666071)

I think what you want is `GROUP BY filter_id`, not `DISTINCT`

# jquery - jQuery click 触发两次但只注册一次

> ID：15724406
> 
> 赞同：1
> 
> 时间：2013-03-30T22:55:26.483
> 
> 标签：jquery, click

我有一个元素单击事件，单击一次会触发两次，这是搜索中的常见问题，但我已经排除了其他答案的潜在原因。代码是

```
console.log("registering label click");
$("label.tiletype").click(
  function(event) {
    event.stopPropagation(); // stop the .tile click being called
    console.log("label clicked, x = " + event.pageX + ", y = " + event.pageY);
    // more code...
  }
} 
```

当页面加载并单击“label.tiletype”时，日志为

```
registering label click
label clicked, x = 679, y = 172
label clicked, x = 679, y = 172 
```

由于“注册标签点击”只发生了一次，因此不能以任何理由将点击绑定两次。

由于 pageX 和 pageY 坐标相同，双事件发生在同一次物理点击中，而不是在元素上调用第二次编程 click() （我认为，如果错误，请纠正我）。

调试行仅在此特定代码位中，因此不会触发其他单击事件。

我在 Firebug 中检查了源代码，有多个“label.tiletype”元素，但屏幕上没有重叠，它们都是 display:block 和 float:left。

JavaScript 文件中发生了其他事情（第 375 行[https://github.com/okohll/agileBase/blob/200dd1c6c1a8968bc9d8f5b2b3d9188ac4776984/gtpb_clientside/resources/simple/simple.js](https://github.com/okohll/agileBase/blob/200dd1c6c1a8968bc9d8f5b2b3d9188ac4776984/gtpb_clientside/resources/simple/simple.js)）但无论发生什么其他事情，上述语句必须始终逻辑上正确。

这在 Firefox 和 Safari 中都会发生。

我错过了什么？

JSFiddle：http: [//jsfiddle.net/okohll/cKgAp/](http://jsfiddle.net/okohll/cKgAp/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T23:10:52.867

根据[这个网站](http://yuji.wordpress.com/2010/02/22/jquery-click-event-fires-twice/)，双重使用`$(document).ready`可能是原因。尝试通过首先取消绑定你的函数来避免它：

```
$('label.tiletype').unbind('click').bind('click',
function(event) {
  event.stopPropagation(); // stop the .tile click being called
  console.log('label clicked, x = ' + event.pageX + ', y = ' + event.pageY);
  // more code...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:31:17.557

啊，找到了！该标签内部包含一个输入，其中一个事件是由于单击该传播而引起的。

添加

```
$("label.tiletype input").click(function(event) {
  event.stopPropagation();
}); 
```

到[http://jsfiddle.net/okohll/cKgAp/](http://jsfiddle.net/okohll/cKgAp/)

修复它。感谢您提示做一个 jsfiddle，我最初以为我无法复制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T23:10:48.467

您的代码中有语法错误，应该是

```
console.log("registering label click");
$("label.tiletype").click(function(event) {
    event.stopPropagation(); // stop the .tile click being called
    console.log("label clicked, x = " + event.pageX + ", y = " + event.pageY);
    // more code...
}); 
```

但是此代码按预期工作（仅触发一个“标签单击”消息）。因此，您可能应该检查其余代码或 HTML 代码的有效性（例如，未闭合的标签可能会导致此行为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T23:57:50.520

您可以使用[on()](http://api.jquery.com/on/)

```
$("label.tiletype").on('click', function (event) {
   alert("label clicked, x = " + event.pageX + ", y = " + event.pageY);
}); 
```

[http://jsfiddle.net/cKgAp/6/](http://jsfiddle.net/cKgAp/6/)

# mysql - 删除后保持MySQL值的顺序

> ID：15724407
> 
> 赞同：0
> 
> 时间：2013-03-30T22:55:27.783
> 
> 标签：mysql, triggers, sequence

假设我在 MySQL 数据库中有一个名为“Test”的表（其中 id 是主键）：

```
id | entry |
---+-------+
 1 |  a    | 
 2 |  b    | 
 3 |  c    | 
 4 |  c    | 
 5 |  d    | 
 6 |  e    | 
```

我想知道的是如何在从表中删除一行后将 id 值保留在序列 {1, 2, 3, ..., n-1, n} 中。例如，假设我执行以下命令：

```
 DELETE FROM Test WHERE id = 4; 
```

然后我希望表格在删除后看起来像这样：

```
 id | entry |
 ---+-------+
  1 |  a    | 
  2 |  b    | 
  3 |  c    | 
  4 |  d    | 
  5 |  e    | 
```

我认为解决方案是使用数据库触发器，但我不太确定如何创建实现此行为的触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:00:47.063

你可以运行这个查询：

```
SET @id = 0;
UPDATE `Test` SET `id` = @id:= @id + 1; 
```

虽然我不知道你为什么要...

# html - Add triangle under current active page link/make current page highlighted while on it

> ID：15724413
> 
> 赞同：2
> 
> 时间：2013-03-30T22:56:07.267
> 
> 标签：html

i'm currently editing a new layout for my tumblr and i was wondering if there was a way to add a small triangle sort of like this:

[http://i.imgur.com/e0wP0Qd.png](http://i.imgur.com/e0wP0Qd.png)

to a current link, by current a mean, every page that is clicked/a person is currently on it would have a triangle under its link.

i have a menu bar that'll have all the links (can be seen here: [http://mains-tester.tumblr.com/](http://mains-tester.tumblr.com/)) and i'm trying to do two things, make it so that current page is highlighted on the menu bar and it has a small triangle under it. I'm trying to figure out is theres a way to just add the triangle to every link without having to go and do each and every single one of them.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T23:44:14.907

It is quite easy to add this sort of effect using the pseudo-class `:after`.

Ensuring that `position: relative` for the `<a>` tag, you can add this CSS which will add a white arrow at the bottom centred.

```
.linkage:hover:after {
  width: 0;
  height: 0;
  position: absolute;
  content:"";
  display:block;
  /* Ads an arrow effect exploiting the way that browsers join borders together */
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 8px solid #fff;
  /* centers relative to parent */
  left: 50%;
  /* Compensates for width of border (arrow) */
  margin-left: -8px;
} 
```

I've set up a demo of it working here (with most of the same css you have used): [http://jsfiddle.net/QybKW/4/](http://jsfiddle.net/QybKW/4/)

If you would prefer not to rely on CSS trickery, you could create a PNG image file and set the background of the pseudo element giving it a positive width and height.

# javascript - 删除重复的数组元素

> ID：15724417
> 
> 赞同：0
> 
> 时间：2013-03-30T22:56:39.417
> 
> 标签：javascript

我有以下循环通过数组。

```
for(var j=0; j<10;j++) {
  for(var k=0; k<10; k++) {

    if(final[k]==ya[j]){
      final[k].changeRankScore((ya[j].score + final[k].score)/2);

    }else{

    }
  }
} 
```

有两个包含 10 个元素的数组。我正在检查是否存在在 final 中找到的重复元素。如果是，则更改重复元素的final 的分数，不要将其添加到final。如果没有，我们可以将元素添加到 final 中。

我想到的一种可能的方法是标记元素以稍后添加到数组中。

有没有更好的方法来做到这一点？

编辑：

```
Final = { 1, 2, 3, 4, 5, 6, 7 } ; 
ya = { 2 , 8, 7, 9, 10, 11, 12 } ; 
```

我正在遍历数组 Ya。如果该元素也在数组 Final 中找到，则增加该元素的分数（因为它是一个对象）。如果没有找到，只需将数组 Ya 中的元素推送到数组 final 中。

在这种情况下，数组 Ya 中的数字 2 和 7 是重复的。因此，与数组 final 中的这些数字相关的分数应该增加，而数组 Ya 的其余元素应该被推到 final。然后数组应该变成

```
Final = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:56:00.913

如果您不想使用任何框架，那就是代码：

```
function mix(first_arr, second_arr) {
    for(i = 0; i < second_arr.length; i++) {
        if(first_arr.indexOf(second_arr[i]) == -1) {
            first_arr.push(second_arr[i]);
        }
    }
    return first_arr;
} 
```

请参阅实际操作[http://jsfiddle.net/jwAmA/](http://jsfiddle.net/jwAmA/)

PD：使用数组 [] 而不是对象 {}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:22:35.630

您的示例数据不太有效。你是这个意思吗？[http://jsfiddle.net/B74Gm/](http://jsfiddle.net/B74Gm/)

```
var final = {
    1: {score:0},
    2: {score: 2},
    3: {score: 0},
    4: {score: 5},
    5: {score: 1},
    6: {score: 10}, 
    7: {score: 10}
},

ya = {
    2: {score: 2},
    10: {score: 3}, 
    4: {score: 0},
    15: {score: 0},
    6: {score: 4},
    17: {score: 5}
}; 

for (var i in ya) {
    final[i] = final[i] || {score: 0};
    final[i].score += ya[i].score;
} 
```

# java - Java recursion build error: array required, but string found?

> ID：15724419
> 
> 赞同：0
> 
> 时间：2013-03-30T22:57:00.960
> 
> 标签：java, recursion, compiler-errors

I really need help fixing this line of my code, I keep getting these two errors:

First Error: array required, but String found if(x.length() == 0 && y.length() > 0 && y[0] == "*")

Second Error: no suitable method found for replace(int,int) String newY = y.replace(0,1); any help would be appreciated

```
//Second string is empty and there is wildCard character
if(y.length() == 0 && wildCard)
{
    return true;
}
if(x.length() == 0 && y.length() > 0 && y[0] == "*")
{
    String newY = y.replace(0,1);
    return match(x, newY, true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:01:01.813

In

```
if(x.length() == 0 && y.length() > 0 && y[0] == "*") 
```

The `"*"` is a String, not a character.

Also, the `y[0]` does not work with Strings in Java, only arrays. That's likely your problem.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T23:05:00.313

y[0] is for arrays; use y.charAt(0) for strings instead. Furthermore, compare it with '*' (the character), and not with "*" another string.

# c++ - C++, How to open a file without having to type the whole file path

> ID：15724422
> 
> 赞同：-1
> 
> 时间：2013-03-30T22:57:32.103
> 
> 标签：c++, file, char, fstream, filepath

I have a simple question!

I am opening a file that is located in a simple folder in my VS12 project.

In order to open the file, you have to type in the whole file path so for example you would have to type:

TXTFiles//txtfile.txt

and then it successfully opens the file!

Well, i don't feel like typing in the whole file path and I've seen it before where it has already been added to the char or something so all you have to type in is the file you want to open but I can't remember how!

Example code:

char filename[256];

cout << " Enter a file to open" << endl;

cin >> filename;

example typed in: TXTFiles//object.txt

file opens, with more code added of course.

I don't want to have to type in the entire file path due to the fact that the file path may be long and tedious to type in, and one small mistake wont let you open the file.

I want to just type in 'object.txt' and open that file.

It's a simple thing for convenience, but I want just wondering!

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:18:59.970

```
#include <iostream>
#include <string>
int main() {
        std::string basename, path;
        std::cout << " Enter a file to open" << std::endl;
        std::cin >> basename;
        path = "TXTFiles/" + basename;
        std::cout << path << std::endl; // or, open file by 'path'
        return 0;
} 
```

Or if you really want to use a char array:

```
#include <iostream>
#include <string.h>
int main() {
        char filename[256] = "TXTFiles/";
        std::cout << " Enter a file to open" << std::endl;
        std::cin >> (filename + strlen(filename));
        std::cout << filename << std::endl;
        return 0;
} 
```

# bash - '!' history expansion character in bash gives 'not found'

> ID：15724426
> 
> 赞同：2
> 
> 时间：2013-03-30T22:57:40.400
> 
> 标签：bash

I use a bash shell from command prompt window on my Windows 7 machine. I can do 'history' and get the list of commands in history buffer but when I do '!12' to reexecute command number 12, I get '!12 not found'.

I searched for a solution and found that by default the expansion character is set to '!' but could not find a way to check if it is set to something else.

-MG

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:19:09.963

You can change the history command expansion character using the [`histchars`](http://www.faqs.org/docs/bashman/bashref_60.html#IDX163) shell variable. The default is `!^#` -- the first character is the history expansion character, the second is the quick expansion character (e.g. for `^X^Y^`), and the third is the comment character.

You also need to check that `!`-style history expansion is on. Use `set -H` to turn it on and `set +H` to turn it off.

# jquery - 在 ASP.NET MVC4 中使用 jQuery 拖放上传文件

> ID：15724427
> 
> 赞同：0
> 
> 时间：2013-03-30T22:57:46.713
> 
> 标签：jquery, ajax, asp.net-mvc-4, drag-and-drop

我对 AJAX 的经验很少（几乎没有）。

我想创建一个示例表单，我可以在其中上传图像文件（想想 eBay 拍卖），但是这些文件可以（并且应该）拖放到浏览器窗口中，就像您将 APK 上传到 Google Play 时一样。

我从来没有做过这样的事情，我想学习。我*目前*没有真正的用例来实现，我要求这个来**学习**. 所以，让我们选择 eBay 的例子。

我的 ViewModel 可能如下所示：

```
public class AuctionViewModel {

    public string Title, Description;
    public double Price;
    [...]
    public IEnumerable<Picture> Images; //most important part!
}

public class Picture {
    public string Url; //display URL, perhaps to be generated
    public byte[] payload; //uploaded data
} 
```

问题的要点：

1.  控制器的外观如何？我想我需要一个单独的控制器来进行 AJAX 上传（ViewModel 应该存储在 Session 中）
2.  Javascript 客户端代码是什么样的？
3.  有没有关于 jQuery/AJAX/MVC4 中可拖放文件的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:02:04.160

你可以使用[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications). 它将允许您订阅`drop`DOM 元素的事件并能够检索文件内容并使用 XmlHTTPRequest 对象将文件异步发送到服务器。我发布的 Mozilla 链接包含大量示例。

在服务器端，您可能会考虑`IEnumerable<HttpPostedFileBase>`对上传的文件有效负载使用 . 而不是`byte[]`. 如果您将`multipart/form-data`内容类型与示例中所示的 AJAX 请求一起使用，则默认模型绑定器将自动将上传的文件绑定到模型。

# openmp - OpenMP 中的双重释放或损坏

> ID：15724432
> 
> 赞同：1
> 
> 时间：2013-03-30T22:58:30.493
> 
> 标签：openmp

我正在尝试实现并行蛮力子字符串搜索算法。每个线程都有一个开始和结束索引，因为我用 4 个线程运行它，每个线程将完成四分之一的工作。

现在，当我运行该函数一次时，一切都很好（使用 4 个线程），但是由于该函数是 void 类型，我将结果（子字符串位于较大字符串中的索引）存储在全局变量中回答'。

```
int ans = -1;

void bruteForce(string mainString, string subString)
{
    int tid, nthreads;
    #pragma omp parallel private (tid) shared (nthreads, ans)
    {
        tid = omp_get_thread_num();
        nthreads = omp_get_num_threads();
        int j = 0;
        int start = tid * (mainString.size() / nthreads);
        int end = start + mainString.size() / nthreads;

        for(int i = start; i < end; i++)
        {
            if(ans == -1)
            {
                while(j < subString.size())
                {
                    if(mainString[i + j] != subString[j]) break;
                    if(j == subString.size() - 1)
                    {
                        #pragma omp critical
                        {
                            #pragma omp flush
                            ans = i;
                        }
                    }
                    j++;
                }
                j = 0;
            }
        }
    }
} 
```

我想要做的是，在函数完成之后或开始之前将“ans”重置为-1，但是当我尝试这样做时，我得到了这个错误，以及内存映射和回溯。

```
double free or corruption (out): 0xb5b00468 *** 
```

为什么我不能在下面的 for 循环显示中将“ans”更改为 -1 是否有原因？

```
 start = get_timestamp();
    for(int x = 0; x < N; x++)
    {
        show_percent(x, N);
        bruteForce(STRING, WORD);
    }
    end = get_timestamp(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:08:08.920

这与更改ans无关。**您需要在brutForce()**的 while 循环中限制**(i+j** ) 。

 **说 mainString = "THIS" 和 subString="XXX"。所以每个线程都得到

> T | H | 我 | 小号

对于最后一个线程，您的 start=3，end=4。还有 subString.size() = 3;

所以在 while 循环中，您正在访问 mainString[i+j]，其中 j = 0->2 ==> (i+j) = 3->5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:14:28.370

*正如问题的原始海报所述：*

* * *

**解决方案**

Here's a fixed and working version of the code. I've only just started messing about with OpenMP, and it seems really picky with how and where you declare your variables, and how you pass them on to individual threads, so if someone could enlighten me as to why these changes fixed the code, that would be great. Also, the `#pragma omp parallel for` i added substantially improved performance of the program.

```
int ans = -1;

void bruteForce(const string mainString, const string subString)
{
    ans = -1;
    int tid, nthreads, start, end, j, i;
    #pragma omp parallel private (tid, start, end, j) shared (nthreads, ans)
    {
        tid = omp_get_thread_num();
        nthreads = omp_get_num_threads();
        start = tid * (mainString.size() / nthreads);
        end = start + mainString.size() / nthreads;
        if(tid == (nthreads - 1)) 
            end = end - subString.size();
        j = 0;

        #pragma omp parallel for
        for(i = start; i < end; i++)
        {
            if(ans == -1)
            {
                while(j < subString.size())
                {
                    if(mainString[i + j] != subString[j]) break;
                    if(j == subString.size() - 1)
                    {
                        #pragma omp critical
                        {
                            ans = i;
                        }
                    }
                    j++;
                }
                j = 0;
            }
        }
    }
} 
```**

# sql - Access query with multiple criteria + allowing null values not working properly

> ID：15724436
> 
> 赞同：0
> 
> 时间：2013-03-30T22:59:06.637
> 
> 标签：sql

So I'm trying to write a fairly large query and I know I'm making a noob mistake. After googling for 2 hours I'm throwing the question out there hoping you can see my mistake. Here is what I'm doing using the query designer view:

```
field1 = Not Like "*x*,*y*,*z*,*w*" or is null
field2 = Not Like "*a*,*b*,*c*" or is null 
```

on about 10 different fields all with slightly different criteria. I need to include any null values but it isn't working properly. Also, I believe because I'm entering "or is null" it's causing the designer view to repeat that command over and over again on every line of criteria.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T02:00:45.407

Have you tried:

```
field1 = Not Like "*x*,*y*,*z*,*w*" or field1 is null
field2 = Not Like "*a*,*b*,*c*" or field2 is null 
```

# c++ - 编译 C++ 项目时删除函数名

> ID：15724438
> 
> 赞同：1
> 
> 时间：2013-03-30T22:59:23.653
> 
> 标签：c++, function, static-analysis

我想让我的应用程序更难进行静态分析，并在发布模式下编译时从 .exe 文件中删除函数名称，我该怎么做？

您能否建议技术让我的应用更难进行静态分析？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:02:10.920

使用该`strip`程序。制作操作系统接受但反汇编程序不接受的格式错误的可执行文件。等等等等。

# c++ - 如何在 C++ 中删除文本（输出）的拆分？

> ID：15724446
> 
> 赞同：1
> 
> 时间：2013-03-30T23:00:06.857
> 
> 标签：c++

我想知道是否有办法在 C++ 中删除输出中的文本拆分？例如在这张照片中，

![终端文本太长](../Images/e330ad34279f3a66b421850c63b58be5.png)

该程序要求我输入一个金额，它会以该金额打印字母“a”。所以输入是 900，因此程序打印了 'a' 900 次，但有拆分。我希望程序仅在**一行**中打印“a” 。

我问这个的原因是因为我正在制作一个程序，它将打印某个命令（我只需要复制粘贴输出）一些时间，如果这些命令像这样拆分，那么它们就不会只是工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:12:41.570

我唯一能想到的就是改变终端窗口的大小。

为此：**右键单击状态栏**>**属性**>**布局**>**窗口大小**>**增加宽度**。

这可能不是您想要的，但它可能会有所帮助。当然，这也受到显示器尺寸的限制。

# python - Efficient way to create list of same numbers?

> ID：15724447
> 
> 赞同：5
> 
> 时间：2013-03-30T23:00:09.063
> 
> 标签：python, numpy

What is the most efficient way to create list of the same number with n elements?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-30T23:01:48.853

```
number = 1
elements = 1000

thelist = [number] * elements 
```

* * *

```
>>> [1] * 10
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1] 
```

* * *

NB: Don't try to duplicate mutable objects (notably lists of lists) like that, or this will happen:

```
In [23]: a = [[0]] * 10

In [24]: a
Out[24]: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0]]

In [25]: a[0][0] = 1

In [26]: a
Out[26]: [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]] 
```

* * *

If you are using numpy, for multidimensional lists [`numpy.repeat`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.repeat.html) is your best bet. It can repeat arrays of all shapes over separate axes.

# php - 使用 Android 时 PHP Excel 生成失败

> ID：15724448
> 
> 赞同：1
> 
> 时间：2013-03-30T23:00:33.483
> 
> 标签：php, android, forms, apache, excel

我对 Android 设备提交的 PHP POST 值有疑问。该问题不会发生在 PC 上，也不会发生在 iPad 或 iPhone 上。

这是我从我的网站获取通过表单提交的值的代码。

```
$year =  mysqli_real_escape_string($connection, $_POST["year"]); 
```

这是我的`PHP`代码的“片段”，用于生成发送到浏览器进行下载的 Excel 文件。此代码设置工作表的标题。

所以这完美地工作：

```
$objSheet->setTitle("Report 2013"); 
```

但这不起作用（使用 android 手机时，它适用于其他一切）

```
$objSheet->setTitle("Report " . " " . $year); 
```

不知`$year`何故，`null`当我尝试使用它时。

如果我做`var_dump($year)`, or `print_r($year)`, or`echo $year` 价值`"string(4) 2013"`就在那里！！`$_POST`变量已填充且值正确。我检查了`$_REQUEST`全局中的奇怪标题，我发现的唯一区别是这些标题：

```
 [langedit] => "" [lang] => "" [cprelogin] => no 
```

在处理 Android 设备 HTTP 请求时，什么可能使我的 PHP 变量变得疯狂和疯狂？

# sql - 根据长度修改字符串？

> ID：15724452
> 
> 赞同：0
> 
> 时间：2013-03-30T23:00:55.017
> 
> 标签：sql, sqlite

在我的数据库中，我有一列`zip`包含所有美国邮政编码作为字符串。

我遇到的问题是，以开头的邮政编码`0`不被视为 5 位数字（它是一个字符串），因此只有 4 位数字。

`0`有没有办法通过在它们前面添加 a 来替换长度为 4 的邮政编码？例如：

`1001`=>`01001`

`10134`=> 未修改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:44:36.800

在 SQL 中，字符串与[`||`operator](http://www.sqlite.org/lang_expr.html#collateop)连接。要将查询限制为记录子集，请使用[WHERE 子句](http://www.sqlite.org/lang_update.html)。

```
UPDATE WhateverTheTableIsCalled
SET zip = '0' || zip
WHERE length(zip) = 4 
```

# java - Swing 的局限性

> ID：15724453
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:00:55.937
> 
> 标签：java, swing, thread-safety, event-dispatch-thread

我们都知道，由于 Swing 不是线程安全的，它一次只能在一个线程中执行，称为 EDT。

我应该使用什么来获得一个类似于swing 的界面和允许视觉多线程的组件（换句话说，swing 不仅限于在 EDT 中执行）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T23:06:15.587

使用摇摆。您不需要在一个线程中执行*应用程序*，只需更改 GUI。

执行多个线程是很常见的，每个线程都执行以下操作：

```
EventQueue.invokeLater(new Runnable() {
    public void run() {
        someFrame.setVisible(true);
        myCustomTableModel.updateWithNewData(newListOfData);
    }
}); 
```

# javascript - Trying to define an asset compiler in Compoundjs and getting undefined method error

> ID：15724457
> 
> 赞同：0
> 
> 时间：2013-03-30T23:01:02.603
> 
> 标签：javascript, node.js, compoundjs

I'm trying to define an asset compiler [according to the documentation](http://compoundjs.com/docs/#asset-compiler-adding-your-own-compiler)[http://compoundjs.com/docs/#asset-compiler-adding-your-own-compiler](http://compoundjs.com/docs/#asset-compiler-adding-your-own-compiler), however, I keep getting an error:

```
app.use(compound.assetsCompiler.add('scss', {
                                ^
TypeError: Cannot call method 'add' of undefined 
```

My entire `environment.js` file looks like:

```
module.exports = function (compound) {

    var express = require('express');
    var app = compound.app;

    app.configure(function (){
      app.use(compound.assetsCompiler.add('scss', {
        render: function (str, options, fn) {
          try {
            fn(null, @scss.render(str));
          } catch (err) {
            fn(err);
          }   
        },  
        scss: require('node-sass'),
        sourceExtension: 'scss',
        destExtension: 'css'
      }).init());

      app.use(express.static(app.root + '/public', { maxAge: 86400000 }));
      app.set('jsDirectory', '/javascripts/');
      app.set('cssDirectory', '/stylesheets/');
      app.set('cssEngine', 'scss');
      app.use(express.bodyParser());
      app.use(express.cookieParser('secret'));
      app.use(express.session({secret: 'secret'}));
      app.use(express.methodOverride());
      app.use(app.router);
    }); 

}; 
```

I tried a `console.log(compound.assetsCompiler);` just before the `app.use(compount.assetsCompiler...` statement and sure enough I get `undefined`. The documentation also says to use `compound.assetCompiler.add(...);` (singular asset) which I assume is a typo but since it got that typo wrong multiple times I tried it as well but had the same problem. Does anyone have any idea how to fix this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:01:03.990

I figured out the solution. Or at least the workaround. Although it seems that the autoloader require the `AssetsCompiler` it doesn't initialize it, the solution is to require the object and manually initialize it in the `environment.js`

```
module.exports = function (compound) {
  'use strict';
  var express = require('express');
  var app = compound.app;
  // require the assetsCompiler
  var compiler = require('co-assets-compiler');

  app.configure(function () {
    // calling the init function will add the assetsCompiler object
    // to the compound object and everything else should now work
    // as expected
    compiler.init(compound);
    app.use(compound.assetsCompiler.add('scss', {
     render: function (str, options, fn) {
         @scss.render(str, ƒ (err, css) {
          fn(err,css);         
        },{                    
          includePaths: [app.root + '/app/assets/stylesheets/'] 
      });
    },
      scss: require('node-sass'),
      sourceExtension: 'scss', 
      destExtension: 'css'     
    }).init());  

    app.use(express.static(app.root + '/public', { maxAge: 86400000 }));
    app.set('jsDirectory', '/javascripts/');
    app.set('cssDirectory', '/stylesheets/');
    app.set('cssEngine', 'scss');
    app.use(express.bodyParser());
    app.use(express.cookieParser('secret'));
    app.use(express.session({secret: 'secret'}));
    app.use(express.methodOverride());
    app.use(app.router);
  });
}; 
```

# ssis - SSIS 大师：你怎么知道你的所有数据是否都到达了目的地

> ID：15724468
> 
> 赞同：0
> 
> 时间：2013-03-30T23:02:05.057
> 
> 标签：ssis

有哪些方法可以做到这一点？将源行的计数加载到变量中，然后让一个 sql 任务检查目标检查中的计数与该变量是否相符？还是使用行数？只是想听听一些想法，让球在我脑海中滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:29:37.597

我使用以下检查：

*   行数，上面提到过
*   查找中的任何匹配输出行都没有错误目标表，其中包含无法匹配的计数、包源和查找名称。如果没有错误，该表应该是空的。
*   处理空值的条件。请记住 SQL（假设那是您的数据源）通过支持 NULL 来实现三值谓词逻辑。
*   如果对字符串值进行检查，我通常将检查中的传入数据大写（但不要更改原始值）以考虑可能发生的大小写差异。
*   任何其他表明流程结果的业务需求都是不完整或无效的。这当然取决于您的项目。

# java - 转换变量会改变值吗？

> ID：15724469
> 
> 赞同：1
> 
> 时间：2013-03-30T23:02:10.583
> 
> 标签：java, casting

将 Double 转换为 Int 时，可以说

```
 double X = 2.5; 
 int Y = (int)X; 
```

然后我可以稍后使用 Double X，它仍然包含 0.5 吗？还是小数点后的值永远丢失了？我可以添加到 Double X 上，比如 0.1 增量，并继续将值转换为 int Y 作为 int，但是 int Y 只取整个值吗？说它会取值 2、10 倍，然后是 3 10 倍，依此类推。

它与数组一样吗？将 double 数组转换为 int 时，数组中的值是否发生了变化？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:04:25.790

将 X 转换为双精度值 X 中的 int 不会从 X 中删除浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:04:27.650

它不会改变值，因为你正在这样做：

```
 int Y = (int)X; 
```

所以，你在 Y 中制作东西并为此使用变量 X，但你永远不会改变它。顺便说一句，有了这罐东西，您可以轻松编写一个小程序来查看会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T23:04:35.043

首先，双重和双重意味着不同的东西。Double 是一个包装的对象，尝试将其转换为 Integer 将失败。

double 和 int 是原语，从 double 转换为 int 不会改变 double 中的值，所以你所拥有的应该可以工作。

# java - Java - 线程问题

> ID：15724474
> 
> 赞同：0
> 
> 时间：2013-03-30T23:02:36.023
> 
> 标签：java, multithreading, thread-sleep

好的，我只学习了大约一周的 java 并决定制作一个基于文本的游戏。在我开始使用线程之前，一切都运行得很顺利。我希望能够检测用户是否在游戏的任何部分输入“inv”来检查他们的库存。唯一的问题是当我开始游戏时，控制台会询问“你想玩游戏吗？” 你必须输入“是”两次。我认为这是因为线程有一个 if 语句来检查它是否等于“inv”，然后检查用户是否输入“是”来开始游戏。

# （我知道它可能非常低效的代码，这是我的第一个游戏 xD）

* * *

## 主班

```
import java.util.Scanner;

public class Game extends gameClass{

    public static void main(String[] args) throws InterruptedException{

        Scanner input = new Scanner(System.in);

        Thread t1 = new Thread(new gameClass());
        t1.start();

        Menu.menu();
        gameClass.beginning();

    }
} 
```

## 菜单类

```
import java.util.Scanner;

public class Menu{

    public static void menu() throws InterruptedException{

        Scanner input = new Scanner(System.in);//keyboard input

        boolean playingGame=false;
        String yesno;

        System.out.println("Welcome! Would you like to play?");

        while(playingGame==false){//repeats if until user input yes/no.
            yesno = input.nextLine();

        if (yesno.equalsIgnoreCase("yes")){

            playingGame = true;
            System.out.println("Great!"); 
```

* * *

## 这是来自“gameClass”的线程

```
public void run(){
    Scanner input = new Scanner(System.in);

    try{
        while(true){
            if (input.nextLine().equalsIgnoreCase("inv")){
                System.out.println(inventory);

            }else if ((input.nextLine().equalsIgnoreCase("help"))||(input.nextLine().equalsIgnoreCase("what do i do"))){
                help();

            }
            Thread.sleep(200);
        }
    }catch(Exception e){}
}

public static void help(){

}
} 
```

* * *

注意：我没有粘贴所有代码。

* * *

因此，当控制台询问“欢迎！你想玩？' 我必须先输入'yes'，因为线程正在检查下一个输入是否是'inv' 然后我可以继续输入'yes'来告诉我要播放的程序。

## 任何帮助将不胜感激，这让我发疯了。

如果您需要更多信息，请问我 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:13:02.073

您的游戏中应该只有一个循环。您读取输入（一次），检查它是否是 inv 或其他，如果不是，则运行常规代码。我认为绝对没有理由在那里有一个线程。事实上，你必须输入两次 yes 是有道理的：因为你从同一个输入中听到了两次，可能第一次检查它是否等于 inv 的线程听到它，并且什么也不做，而在第二次正确的线程完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:42:22.847

如果你做线程，你应该让你的所有控制台 I/O 发生在一个线程中。您有两个相互异步运行的 Scanner 实例。即使您解决了要求开始游戏的具体问题，您仍然可能会遇到不知道哪个线程会先获取您的输入的情况。一般来说，不同的线程不应该尝试使用相同的资源。

# jquery - Styling missing when using append - jquery mobile

> ID：15724475
> 
> 赞同：2
> 
> 时间：2013-03-30T23:02:39.903
> 
> 标签：jquery, jquery-mobile

Using jquery mobile the following code (below) works, but when it renders to the page the styling is missing. They are just plan links and do not take on the data-role="button" styling at they should. I have hardcoded the same link the code generates and this is styled ok.

How to I fix this?

Thanks

```
 $(document).on('pagebeforeshow', '#index', function(){

    $.each(siteData["pages"], function(i,v) {    
         $.mobile.activePage.find('[data-role=content]').append('' +
                 '<a href='+ v["id"] + ' data-role="button">' + v["name"] + '</a>');
    });

   }); 
```

markup

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
    </div>

    <div data-role="content" class="navlist">
    </div>

    <div data-role="footer">
</div> 
```

**What I get...**

![enter image description here](../Images/b45e17285fa95530969ccfd2030c44d7.png)

**What it should look like...**

![enter image description here](../Images/5d9d98024a7c9a01e8cd3ea4693a02d9.png)

Same content that the code renders on the second image but the dynamic one is missing the styling.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:19:06.463

Add `.trigger('create')` after `.append()`

[**Working example**](http://jsfiddle.net/Palestinian/agJGK/)

```
$.each(siteData["pages"], function(i,v) {    
 $.mobile.activePage.find('[data-role=content]').append('' + '<a href='+ v["id"] + ' data-role="button">' + v["name"] + '</a>').trigger('create');
}); 
```

# jquery - jQuery计算总计

> ID：15724477
> 
> 赞同：2
> 
> 时间：2013-03-30T23:02:50.333
> 
> 标签：jquery

我需要一些关于 jQuery 脚本的帮助。所以这里是：

HTML：

```
 1<input type="text" name="plastvaike_v" id="plastvaike_v" /><br />
2<input type="text" name="plastsuur_v" id="plastsuur_v" /><br />
3<input type="text" name="klaas_v" id="klaas_v" /><br />
4<input type="text" name="plekk_v" id="plekk_v" /><br /><br />
<span id="plastvaike_t">0.00</span> + <span id="plastsuur_t">0.00</span> + <span id="klaas_t">0.00</span> + <span id="plekk_t">0.00</span> = <span id="total">0.00</span> 
```

JS：

```
$('#plastvaike_v').keyup(function(ev){
    var plastvaike_t = $('#plastvaike_v').val() * 0.04;
    $('#plastvaike_t').html((plastvaike_t).toFixed(2));
});
$('#plastsuur_v').keyup(function(ev){
    var plastsuur_t = $('#plastsuur_v').val() * 0.08;
    $('#plastsuur_t').html((plastsuur_t).toFixed(2));
})
$('#klaas_v').keyup(function(ev){
    var klaas_t = $('#klaas_v').val() * 0.08;
    $('#klaas_t').html((klaas_t).toFixed(2));
})
$('#plekk_v').keyup(function(ev){
    var plekk_t = $('#plekk_v').val() * 0.08;
    $('#plekk_t').html((plekk_t).toFixed(2));
}); 
```

[您可以在此处](http://jsfiddle.net/HrElmo/yyhNY/)找到 JsFiddle 中的工作演示

现在我需要的是，我需要在“=”之后显示总值。这必须在 jQuery 中完成。

如果有人能告诉我在我在文本框中输入任何数字后如何使数字出现，那就太好了。现在有 0.00。即使我删除它们，“+”仍然存在。希望你明白我想说什么.. 我的主要语言不是英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:06:28.553

这是一个好的开始（[http://jsfiddle.net/yyhNY/7/](http://jsfiddle.net/yyhNY/7/)）：

```
function updateView() {
    var plastvaike_t = $('#plastvaike_v').val() * 0.04,
        plastsuur_t = $('#plastsuur_v').val() * 0.08,
        klaas_t = $('#klaas_v').val() * 0.08,
        plekk_t = $('#plekk_v').val() * 0.08;

    // Take all the numbers as an array, and get rid of the ones that are 0.
    var operands = [plastvaike_t, plastsuur_t, klaas_t, plekk_t];
    for (var i = 0; i < operands.length; i++) {
        if (operands[i] == 0)
            operands.splice(i--, 1);
    }

    // join puts them all together with a + separating them
    $('#operands').text(operands.join(' + '));

    // This sum method is something you'll either have to add to the array
    // prototype or write yourself—it's not part of javascript.
    var total = operands.sum();
    $('#total').text(total.toFixed(2));

    if (total == 0) $('#total').hide();
    else $('#total').show();
}

$('#plastvaike_v, #plastsuur_v, #klaas_v, #plekk_v').keyup(updateView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:30:41.493

为了轻松处理输入的空值上的“+”运算符删除，您可以简单地将相等的左侧部分视为唯一跨度而不是四个，并将其文本动态设置为您填充的数组，不为空且仅填充数字值并从中调用方法“join”，唯一参数为“+”。

此外，您可能不会忘记通过使用闭包变量来引用您的输入和跨度来进行一些优化。

最后，您可能会注意到，如果您的输入在表单内，则表单的 DOM 元素直接将其命名输入引用为实时属性：假设名为 myForm 的表单具有名为 myInput 的输入，那么您的输入可以通过 document.getElementById(" myForm").myInput 这比使用 jQuery 获取它要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:06:07.567

代替

```
$('#plastvaike_v').val() * 0.04; 
```

尝试

```
parseInt($('#plastvaike_v').val(), 10) * 0.04; 
```

我认为现在的问题是 Jquery 试图将一个字符串与一个整数相乘，这就是你得到 0.0.0 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T00:12:36.177

这可以非常简洁地完成，不需要 id，如下所示：

HTML：

```
<div id="foo">
    1<input type="text" name="plastvaike_v" data-factor="0.04" /><br />
    2<input type="text" name="plastsuur_v" data-factor="0.08" /><br />
    3<input type="text" name="klaas_v" data-factor="0.08" /><br />
    4<input type="text" name="plekk_v" data-factor="0.08" /><br /><br />
<span>0.00</span> + <span>0.00</span> + <span>0.00</span> + <span>0.00</span> = <span>0.00</span>
</div> 
```

`#foo`只是选择输入和跨度的一种方法。您可以通过其他方式选择它们，例如按类 - 只要它们可以作为组选择。

JavaScript：

```
var $spans = $("#foo span");
var $inputs = $("#foo input").on('keyup', function() {
    var total = 0;
    $inputs.each(function(i, input) {
        var val = (Number(input.value) * Number($(input).data('factor'))) || 0;
        $spans.eq(i).text(val.toFixed(2));
        total += val;
    });
    $spans.filter(":last")text(total.toFixed(2));
}); 
```

**[演示](http://jsfiddle.net/ry6rM/)**

当然，如果您需要它们用于其他目的，您可以保留这些 id。

# php - php 正则表达式并可能使用 (? 尝试使用 PHP 正则表达式来匹配可能是函数的单词，而不是双引号。同时忽略可能是函数的双引号中的任何内容。下面已经匹配“你好（世界）”。并将 'hello(world)' 放在一个数组中，然后将 'hello' 放在另一个数组中。但是，我想要一个不添加它的条件，如上所述。 preg_match_all('#(\w*)\s*\(.*?\) 问问题 问问题 2013-03-30T23:02:57.937 55 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 尝试使用 PHP 正则表达式来匹配可能是函数的单词，而不是双引号。同时忽略可能是函数的双引号中的任何内容。下面已经匹配“你好（世界）”。并将 'hello(world)' 放在一个数组中，然后将 'hello' 放在另一个数组中。但是，我想要一个不添加它的条件，如上所述。 preg_match_all('#(\w*)\s*\(.*?\)#i',$str,$m); 我试着玩它。并使用以下示例来帮助我。 (? array ( 0 => 'one($two)', 1 => 'two($1)', 2 => 'three($2one)', 3 => 'meme1(you2)', 4 => 'this(that)', 5 => 'die (\\"meohmy\\")', 6 => 'myfunc($me)', 7 => 'empty()', ), 1 => array ( 0 => 'one', 1 => 'two', 2 => 'three', 3 => 'meme1', 4 => 'this', 5 => 'die', 6 => 'myfunc', 7 => 'empty', ), ) 如评论中所述，您不能进行任意长度的后视。但是，您可以拥有的是任意长度的前瞻。就像 - 我认为 - 你想回顾一下“，你可以计算那些后面的人。类似于： /(\w+)\s*\(.*?\)(?=(?:[^"]|".*?")*$)/ 但是： -确保将其应用于格式正确的代码 -如果会被转义的“愚弄”（您可以解决此问题，我没有勇气atm） -我没有费心查看性能，因此您可以在这里做一些工作 总的来说，这可能不是一个好主意。 编辑： 它有什么作用？我拿了你的正则表达式，并在你的比赛后添加了一张支票。每次找到匹配项时，它都会检查直到字符串末尾是否有一对“”（对于大字符串来说效率极低）。 更有效的方法？当然。您无法在正则表达式中捕获未定义数量的组这一事实很麻烦。这意味着你必须遍历你的字符串。基本上，使用 preg_match 和它的所有参数（由于第 4 个参数（参见preg_match 文档）和第 5 个循环，得到匹配在 'matches' 数组中的位置），并使用如下内容： /(?:[^"]|".*?")*?(\w+)\s*\(.*?\)/ （在我写这篇文章的时候，我认为它也不是那么有效，但对大字符串仍然更好。） （注意：我没有测试它，因为我非常困，如果你满意的话任一解决方案，关闭问题，如果没有，我还是会回来） phpregex 4 1 回答 1 This answer is useful 0 如评论中所述，您不能进行任意长度的后视。但是，您可以拥有的是任意长度的前瞻。就像 - 我认为 - 你想回顾一下“，你可以计算那些后面的人。类似于： /(\w+)\s*\(.*?\)(?=(?:[^"]|".*?")*$)/ 但是： -确保将其应用于格式正确的代码 -如果会被转义的“愚弄”（您可以解决此问题，我没有勇气atm） -我没有费心查看性能，因此您可以在这里做一些工作 总的来说，这可能不是一个好主意。 编辑： 它有什么作用？我拿了你的正则表达式，并在你的比赛后添加了一张支票。每次找到匹配项时，它都会检查直到字符串末尾是否有一对“”（对于大字符串来说效率极低）。 更有效的方法？当然。您无法在正则表达式中捕获未定义数量的组这一事实很麻烦。这意味着你必须遍历你的字符串。基本上，使用 preg_match 和它的所有参数（由于第 4 个参数（参见preg_match 文档）和第 5 个循环，得到匹配在 'matches' 数组中的位置），并使用如下内容： /(?:[^"]|".*?")*?(\w+)\s*\(.*?\)/ （在我写这篇文章的时候，我认为它也不是那么有效，但对大字符串仍然更好。） （注意：我没有测试它，因为我非常困，如果你满意的话任一解决方案，关闭问题，如果没有，我还是会回来） 于 2013-03-31T00:00:35.430 回答 Related 1 jquery - 点击事件中的jquery调用函数导致不需要的函数多次调用 1 javascript - 简单的角度重复 2 html - z-index 问题 - 在菜单下方定位 css3 三角形 4 postgresql - postgresql.conf max_prepared_transactions 不起作用 2 linux - rsync 将文件更改到不同的目录 1 algorithm - 了解涉及列表附加的递归 SML 函数的运行时（使用 @） 3 c# - 从 Activator.CreateInstance() 而不是对象返回所需的类型 0 java - 如何在mac上卸载java开发者包 1 node.js - 处理来自 EventEmitter 的错误 1 c# - Asp.net 母版页未在 IE 中显示 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15724478
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, regex

尝试使用 PHP 正则表达式来匹配可能是函数的单词，而不是双引号。同时忽略可能是函数的双引号中的任何内容。下面已经匹配“你好（世界）”。并将 'hello(world)' 放在一个数组中，然后将 'hello' 放在另一个数组中。但是，我想要一个不添加它的条件，如上所述。

```
preg_match_all('#(\w*)\s*\(.*?\)#i',$str,$m); 
```

我试着玩它。并使用以下示例来帮助我。

```
(?<!a)b 
```

虽然应用时模式结果是错误的。如果有人对此事有任何帮助，我将不胜感激。

作为当前正则表达式设计的输出。举个例子。

**输入：**

一($two) 二($1) 三($2one)}meme1(you2) this(that) die ("now") these function myfunc($me) empty()

**输出：**

```
array (
  0 => 
  array (
    0 => 'one($two)',
    1 => 'two($1)',
    2 => 'three($2one)',
    3 => 'meme1(you2)',
    4 => 'this(that)',
    5 => 'die (\\"meohmy\\")',
    6 => 'myfunc($me)',
    7 => 'empty()',
  ),
  1 => 
  array (
    0 => 'one',
    1 => 'two',
    2 => 'three',
    3 => 'meme1',
    4 => 'this',
    5 => 'die',
    6 => 'myfunc',
    7 => 'empty',
  ),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:00:35.430

如评论中所述，您不能进行任意长度的后视。但是，您可以拥有的是任意长度的前瞻。就像 - 我认为 - 你想回顾一下“，你可以计算那些后面的人。类似于：

```
/(\w+)\s*\(.*?\)(?=(?:[^"]|".*?")*$)/ 
```

但是：
-确保将其应用于格式正确的代码
-如果会被转义的“愚弄”（您可以解决此问题，我没有勇气atm）
-我没有费心查看性能，因此您可以在这里做一些工作

总的来说，这可能不是一个好主意。

**编辑：**
它有什么作用？我拿了你的正则表达式，并在你的比赛后添加了一张支票。**每次**找到匹配项时，它都会检查直到字符串末尾是否有一对“”（对于大字符串来说效率极低）。

更有效的方法？当然。您无法在正则表达式中捕获未定义数量的组这一事实很麻烦。这意味着你必须遍历你的字符串。基本上，使用 preg_match 和它的所有参数（由于第 4 个参数（参见[preg_match 文档](http://php.net/manual/en/function.preg-match.php)）和第 5 个循环，得到匹配在 'matches' 数组中的位置），并使用如下内容：

```
/(?:[^"]|".*?")*?(\w+)\s*\(.*?\)/ 
```

（在我写这篇文章的时候，我认为它也不是那么有效，但对大字符串仍然更好。）
（注意：我没有测试它，因为我非常困，如果你满意的话任一解决方案，关闭问题，如果没有，我还是会回来）

# mysql - MYSQL 查询不返回所有结果

> ID：15724483
> 
> 赞同：1
> 
> 时间：2013-03-30T23:03:22.190
> 
> 标签：mysql, left-join

我有一个视图表，其中包含以下字段：

> paymentID、jobID、jobNumber、jobType、countType、countID、salesRep、dealershipName、checkTS、paymentAmount、estimateMailArrival

当 checkTS 介于某个日期范围之间时，我需要选择这些字段。（checkTS 是一个日期时间字段）。在这些字段之上，我需要从另一个名为 jobtasks 的表中选择两个时间戳（它们可能存在也可能不存在，因此我将使用左连接）。为此，我设置了以下查询：

```
SELECT 
    s.jobID, s.jobNumber, s.jobType, s.countType, s.countID, s.salesRep,           s.dealershipName, s.checkTS, s.paymentID, s.paymentAmount, s.estimatedMailArrival, 
    jt1.completedTimestamp as Art, 
    jt2.completedTimestamp as List
FROM salesboard s
LEFT JOIN jobtasks jt1 ON s.jobID = jt1.jobID
LEFT JOIN jobtasks jt2 ON s.jobID = jt2.jobID
WHERE
    s.checkTS BETWEEN '2013-03-01 00:00:00' AND '2013-03-31 23:59:59' AND
    jt1.taskID = 22 AND
    jt2.taskID = 23
ORDER BY s.checkTS DESC; 
```

该查询没有返回任何错误，但我发现它没有提取所有记录（它提取了应该提取的 242 条记录中的 182 条）。我可以手动进入数据库（mysql）并查看应该被提取的记录，但不是。一个例子 - “2013-03-04 10:11:00”的时间戳没有被提取。

如果我删除所有艺术和列表的东西，我会得到正确数量的结果...... 242。

```
SELECT 
    s.jobID, s.jobNumber, s.jobType, s.countType, s.countID, s.salesRep, s.dealershipName, s.checkTS, s.paymentID, s.paymentAmount, s.estimatedMailArrival
FROM salesboard s
WHERE
    s.checkTS BETWEEN '2013-03-01 00:00:00' AND '2013-03-31 23:59:59'
ORDER BY s.checkTS DESC; 
```

如果我使用左连接，为什么不会返回一些记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:09:24.563

使用 a时，将这些表中的字段添加到您的条件`LEFT JOIN`对您没有任何好处- 与此时的 a 相同。 `WHERE``INNER JOIN`

I like to move those types of `WHERE` criteria to the `JOIN` itself:

```
SELECT 
    s.jobID, s.jobNumber, s.jobType, s.countType, s.countID, s.salesRep,           s.dealershipName, s.checkTS, s.paymentID, s.paymentAmount, s.estimatedMailArrival, 
    jt1.completedTimestamp as Art, 
    jt2.completedTimestamp as List
FROM salesboard s
LEFT JOIN jobtasks jt1 ON s.jobID = jt1.jobID 
    AND jt1.taskID = 22
LEFT JOIN jobtasks jt2 ON s.jobID = jt2.jobID
    AND jt2.taskID = 23
WHERE
    s.checkTS BETWEEN '2013-03-01 00:00:00' AND '2013-03-31 23:59:59' AND
ORDER BY s.checkTS DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:06:21.147

改成：

```
WHERE
    s.checkTS BETWEEN '2013-03-01 00:00:00' AND '2013-03-31 23:59:59' AND
    (jt1.taskID = 22 OR jt1.taskID IS NULL) AND
    (jt2.taskID = 23 OR jt2.tastID IS NULL) 
```

ed 表上的任何`WHERE`条件`LEFT JOIN`仍然计算在内（`NULL`如果表未连接，这些列的值将是）。

# php - 在 foreach 循环中没有命令回显数组项

> ID：15724493
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:05:00.080
> 
> 标签：php, multidimensional-array, foreach

我正在使用一个多维数组，其中将包含可变数量的空对象。我编写了一个脚本来简单地 unset() 空的，它工作正常。但是，即使没有 echo() 函数，当我的循环运行时，也会打印非空值，我似乎无法弄清楚原因。

将在我的循环中使用的数组示例：

```
Array
(
[0] => Group Object
    (
        [_title] => <strong>Abdomen</strong><ul>
        [_issues] => <li><strong>Ascites</strong>: 1</li><li><strong>Blood Clot</strong>: 2</li>
    )

[1] => Group Object
    (
        [_title] => <strong>Air Sac</strong><ul>
        [_issues] => <li><strong>Cloudy</strong>: 1</li>
    )

[2] => Group Object
    (
        [_title] => <strong>Beak Treatment</strong><ul>
        [_issues] => <li><strong>Severe</strong>: 3</li>
    )

[3] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[4] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[5] => Group Object
    (
        [_title] => <strong>Crop</strong><ul>
        [_issues] => <li><strong>Impacted</strong>: 2</li>
    )

[6] => Group Object
    (
        [_title] => <strong>Feathering</strong><ul>
        [_issues] => <li><strong>Soiled</strong>: 1</li>
    )

[7] => Group Object
    (
        [_title] => <strong>Feet</strong><ul>
        [_issues] => <li><strong>Swollen</strong>: 1</li>
    )

[8] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[9] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[10] => Group Object
    (
        [_title] => <strong>Heart</strong><ul>
        [_issues] => <li><strong>Compromised</strong>: 1</li>
    )

[11] => Group Object
    (
        [_title] => <strong>Hock</strong><ul>
        [_issues] => <li><strong>Clear Exudate</strong>: 2</li>
    )

[12] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[13] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[14] => Group Object
    (
        [_title] => 
        [_issues] => 
    )

[15] => Group Object
    (
        [_title] => <strong>Kidney</strong><ul>
        [_issues] => <li><strong>Injured</strong>: 2</li>
    )

) 
```

清除数组内空对象的 foreach() 循环：

```
foreach ($issues as $key => $link) {
            if ($issues[$key] != '') {
        unset($issues[$key]);   
    }
  } 
```

最后，循环运行时打印的输出：

```
<strong>Abdomen</strong><ul>
    <li><strong>Ascites</strong>: 1</li>
    <li><strong>Blood Clot</strong>: 2</li>
<strong>Air Sac</strong><ul>
    <li><strong>Cloudy</strong>: 1</li>
<strong>Beak Treatment</strong><ul>
    <li><strong>Severe</strong>: 3</li>
<strong>Crop</strong><ul>
    <li><strong>Impacted</strong>: 2</li>
<strong>Feathering</strong><ul>
    <li><strong>Soiled</strong>: 1</li>
<strong>Feet</strong><ul>
    <li><strong>Swollen</strong>: 1</li>
<strong>Heart</strong><ul>
    <li><strong>Compromised</strong>: 1</li>
<strong>Hock</strong><ul>
    <li><strong>Clear Exudate</strong>: 2</li>
<strong>Kidney</strong><ul>
    <li><strong>Injured</strong>: 2</li> 
```

显然，我只想删除空组并且不打印任何内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:21:29.560

As was suggested [here](https://stackoverflow.com/a/3654335/1557526), you can use [`array_filter`](http://www.php.net/manual/en/function.array-filter.php)

```
class Foo {

    public $bar;

    public function __construct($arg)
    {
        $this->bar = $arg;
    }

    public function isEmpty()
    {
        if (is_string($this->bar) && !empty($this->bar))
        {
            return false;
        }

        return true;
    }

}

$array = array(
    new Foo(29),
    new Foo(''),
    new Foo('hello'),
    new Foo(null),
    new Foo('world'),
);

function obj_is_empty($obj)
{
    return ( ! $obj->isEmpty() );
}

print "<pre>";
var_dump(array_filter($array, "obj_is_empty")); 
```

Works fine

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:09:58.040

我可能错了，但你的数组应该有用引号括起来的项目：

```
 [_title] => "<strong>Abdomen</strong><ul>" 
```

否则无论未来如何都是不可预测的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:12:23.817

You are checking against array `keys` (_title, _issues), not `values` (Abdomem, etc).

# java - 启动 Elasticsearch 时无法加载 xerial snappy-java

> ID：15724496
> 
> 赞同：3
> 
> 时间：2013-03-30T23:05:18.767
> 
> 标签：java, jakarta-ee, elasticsearch

启动 Elasticsearch 时出现异常。

```
java.lang.NoClassDefFoundError: org/xerial/snappy/Snappy
    at org.elasticsearch.common.compress.snappy.xerial.XerialSnappy.<clinit>(XerialSnappy.java:42) ~[elasticsearch-0.20.6.jar:na]
    at org.elasticsearch.common.compress.CompressorFactory.<clinit>(CompressorFactory.java:58) ~[elasticsearch-0.20.6.jar:na]
    at org.elasticsearch.client.transport.TransportClient.<init>(TransportClient.java:161) [elasticsearch-0.20.6.jar:na]
    at org.elasticsearch.client.transport.TransportClient.<init>(TransportClient.java:109) [elasticsearch-0.20.6.jar:na]
    at no.breakpoint.service.search.SearchClientFactory.getClient(SearchClientFactory.java:17) [classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0]
//....
Caused by: java.lang.ClassNotFoundException: org.xerial.snappy.Snappy
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366) ~[na:1.7.0]
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355) ~[na:1.7.0]
    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.7.0]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354) ~[na:1.7.0]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423) ~[na:1.7.0]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) ~[na:1.7.0]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) ~[na:1.7.0] 
```

POM 中的依赖：

```
 <dependency>
        <groupId>org.elasticsearch</groupId>
        <artifactId>elasticsearch</artifactId>
        <version>0.20.6</version>
    </dependency> 
```

如果我在 POM 中添加这个依赖项，异常就会消失。但是，这是什么原因（或者，我知道这通常意味着在类路径中找不到该库并添加依赖项可以修复它，但是 Elasticsearch 的传递依赖项是否有问题）？

```
 <dependency>
        <groupId>org.xerial.snappy</groupId>
        <artifactId>snappy-java</artifactId>
        <version>1.0.4.1</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T13:47:13.447

详细地说，这是在 OSX 上使用 java 7 的 snappy 1.0.4 的一个已知问题，这是[github 上的问题](https://github.com/xerial/snappy-java/issues/6)。正如 juanpaolo 所说，您可以使用以下方法解决此问题：

```
<snappy.version>1.0.5-M1</snappy.version> 
```

然后，在依赖项中

```
<dependency>
   <groupId>org.xerial.snappy</groupId>
   <artifactId>snappy-java</artifactId>
   <version>${snappy.version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:23:13.467

之前遇到过这种情况。我能够通过使用 1.0.5-M1 版本而不是 1.0.4.1 来解决它

希望有帮助！

# c++ - 内存池和缓冲区 C++

> ID：15724497
> 
> 赞同：8
> 
> 时间：2013-03-30T23:05:21.210
> 
> 标签：c++, memory-management, network-programming

我有几个关于缓冲区和内存池的问题想要回答。

假设我有一台服务器，发送和接收 ~50-100+ msg / 秒。所有的味精都有不同的大小。您将如何进行以充分利用这里的内存管理？我最初的计划是使用固定大小的缓冲区节点，并将它们汇集起来，例如：

```
struct buffer{
    uint8_t  data[512];
    uint32_t end;
    buffer*  next;
}
buffer* b = pool_get_new_buffer(); 
```

因此，当发送 msg 时，我会根据大小创建一个或多个缓冲区并将它们链接在一起。这样我就不用担心它自己在池中的碎片化。（或者至少我是这么想的）。但是在小味精上，它浪费了空间。

但是在互联网上阅读越来越多并查看代码，似乎根本没有人使用这种方法。那么什么是更好的方法呢？根据 msg 大小从池中分配内存？

**编辑**：所以我在这里之后可能是对不同方法的更深入的比较。

如果我使用链式缓冲区方法，我猜我会将碎片保持在最低水平，但另一方面，我猜想对链中的每个缓冲区执行 memcpy 也是有代价的。但是话又说回来，分配足够大的缓冲区并执行单个 memcpy 也必然有其缺点，尽管大多数人还是选择了这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:07:59.190

有一个缓冲区怎么样，比如 0.5/1MB 大小。这显然取决于目标操作系统/设备，可能还取决于您的最大消息大小。此外，让您的服务器包含数据包大小。假设您的数据包不超过单个缓冲区大小，您可以将数据下载到缓冲区中，对其进行处理，然后将内存标记为可用。我已经将这种方法用于单个客户端-服务器应用程序。

# java - Can I use an Eclipse plugin project for my own plugins?

> ID：15724501
> 
> 赞同：0
> 
> 时间：2013-03-30T23:06:03.713
> 
> 标签：java, eclipse, plugins

I want to create a plugin ability in my own project. I've looked into JSPF and JPF, but I've also notice that Eclipse has a 'plugin project'.

Is that specific to plugins for the Eclipse IDE, or can I use it for my own project as well? I have tried researching this, but everything seems to be oriented towards the former.

I want to know if Eclipse's plugin project could be helpful for what I need, and where I can find a good explanation of this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:23:10.357

The Eclipse plug-in project is used to make Eclipse specific plug-ins for the Eclipse IDE.

Now, if you want, you can copy the plugin.xml and extensible classes model that Eclipse uses for Eclipse IDE plug-ins to have your own application allow plug-ins.

The Eclipse plug-in model is based on the [OSGi](http://www.osgi.org/) model for building Java applications that can be extended with plug-ins.

Any plug-in architecture is going to be complicated to understand and create, because the application has to create extendable classes for nearly everything.

# php - 如何在选择 symfony2 中获取选项的值

> ID：15724503
> 
> 赞同：0
> 
> 时间：2013-03-30T23:06:14.680
> 
> 标签：php, symfony

我在视图中输入了一个带有两个选项的选择部分。我想获得选定的值，然后根据输入的值，我会得到一个特定的操作。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:20:42.843

对于包含输入变量 'foo' 的 POSTed 表单，

```
$foo = $request->request->get('foo'); 
```

# php - 糟糕的 PHP 代码。请帮忙改进

> ID：15724512
> 
> 赞同：0
> 
> 时间：2013-03-30T23:07:00.340
> 
> 标签：php

显然这是非常糟糕的代码，但我想不出如何改进它。“测试”功能根本无法更改，但其余的都可以。

我想将一组值传递给一个操作测试函数的函数。关键是我需要在测试函数中使用所有预定义的函数变量值而不重新声明它们。

我不能直接操作测试功能，它必须通过另一个功能。

这只是一个更大问题的演示，但解决这个问题肯定会解决我的问题。如果做不到，我需要完全重新考虑很多事情。

```
function test($p1, $p2="hello", $p3=5, $p4=true) {

} 
```

--

```
function action($vars = array()) {

    $count = count($vars);

    switch($count) {

        case 1:
            $result = test($vars[0]);
            break;
        case 2:
            $result = test($vars[0], $vars[1]);
            break;
        case 3:
            $result = test($vars[0], $vars[1], $vars[2]);
            break;
        case 4:
            $result = test($vars[0], $vars[1], $vars[2], $vars[3]);
            break;

    }

    return $result;

} 
```

--

```
action(array(1, "test")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T23:09:45.067

```
call_user_func_array('test', $vars); 
```

[http://php.net/call_user_func_array](http://php.net/call_user_func_array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:17:07.487

您不需要使用“action”函数，您可以在[func_get_args()](http://php.net/manual/en/function.func-get-args.php) php 函数的帮助下单独使用“test”函数。您不需要将数组作为参数传递，您可以使用任意数量的参数调用“测试”函数。您还可以查看 php 中的 func_get_arg() 和 func_num_args() 函数。

# java - 如何让歌曲连续播放

> ID：15724519
> 
> 赞同：0
> 
> 时间：2013-03-30T23:08:07.033
> 
> 标签：java, audio, mp3

有谁知道在旧歌以javazoom结束后自动开始一首新歌的代码？

编辑：我在下面添加了我的代码，下面的代码是 MP3 播放器，您可能需要从另一个类调用它

```
import java.io.BufferedInputStream;  
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Map;

import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.UnsupportedAudioFileException;
import javax.swing.JPanel;

import org.tritonus.share.sampled.file.TAudioFileFormat;

import javazoom.jl.decoder.JavaLayerException;
import javazoom.jl.player.AudioDevice;
import javazoom.jl.player.Player;

public class MP3 extends JPanel {

    private final static int NOTSTARTED = 0;
    private final static int PLAYING = 1;
    private final static int PAUSED = 2;
    private final static int FINISHED = 3;

    // the player actually doing all the work
    private final Player player;

    // locking object used to communicate with player thread
    private final Object playerLock = new Object();

    // status variable what player thread is doing/supposed to do
    private int playerStatus = NOTSTARTED;

    public MP3(final InputStream inputStream) throws JavaLayerException {
        this.player = new Player(inputStream);
    }

    public MP3(final InputStream inputStream, final AudioDevice audioDevice) throws JavaLayerException {
        this.player = new Player(inputStream, audioDevice);
    }

    /**
     * Starts playback (resumes if paused)
     */
    public void play() throws JavaLayerException {
        synchronized (playerLock) {
            switch (playerStatus) {
                case NOTSTARTED:
                    final Runnable r = new Runnable() {
                        public void run() {
                            playInternal();
                        }
                    };
                    final Thread t = new Thread(r);
                    t.setDaemon(true);
                    t.setPriority(Thread.MAX_PRIORITY);
                    playerStatus = PLAYING;
                    t.start();
                    break;
                case PAUSED:
                    resume();
                    break;
                default:
                    break;
            }
        }
    }

    /**
     * Pauses playback. Returns true if new state is PAUSED.
     */
    public boolean pause() {
        synchronized (playerLock) {
            if (playerStatus == PLAYING) {
                playerStatus = PAUSED;
            }
            return playerStatus == PAUSED;
        }
    }

    /**
     * Resumes playback. Returns true if the new state is PLAYING.
     */
    public boolean resume() {
        synchronized (playerLock) {
            if (playerStatus == PAUSED) {
                playerStatus = PLAYING;
                playerLock.notifyAll();
            }
            return playerStatus == PLAYING;
        }
    }

    /**
     * Stops playback. If not playing, does nothing
     */
    public void stop() {
        synchronized (playerLock) {
            playerStatus = FINISHED;
            playerLock.notifyAll();
        }
    }

    private void playInternal() {
        while (playerStatus != FINISHED) {
            try {
                if (!player.play(1)) {
                    break;
                }
            } catch (final JavaLayerException e) {
                break;
            }
            // check if paused or terminated
            synchronized (playerLock) {
                while (playerStatus == PAUSED) {
                    try {
                        playerLock.wait();
                    } catch (final InterruptedException e) {
                        // terminate player
                        break;
                    }
                }
            }
        }
        close();
    }

    /**
     * Closes the player, regardless of current state.
     */
    public void close() {
        synchronized (playerLock) {
            playerStatus = FINISHED;
        }
        try {
            player.close();
        } catch (final Exception e) {
            // ignore, we are terminating anyway
        }
    }

    public int getPosition() {

        return player.getPosition();
    }

    public boolean isComplete() {

        return player.isComplete();
    }
}

// demo how to use 
```

# java - 如果 Servlet 在请求处理程序中检查给定的会话属性，它是否“安全”？

> ID：15724520
> 
> 赞同：0
> 
> 时间：2013-03-30T23:08:41.787
> 
> 标签：java, servlets

假设我在 Web 应用程序中有一个 servlet，并且所有用户都需要登录才能执行任何操作。因此，在`get`and`post`方法中有一个`if`块来测试用户是否已通过尝试提取会话属性来处理请求并`else`在未登录时重定向到登录页面来测试用户是否已登录。

在这种情况下，入侵者有没有办法在不知道密码的情况下操纵系统进入？假设密码被硬编码到 servlet 中。如果是，他会从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:18:17.127

我会查看[http://docs.oracle.com/javaee/5/tutorial/doc/bncbe.html#bncbj](http://docs.oracle.com/javaee/5/tutorial/doc/bncbe.html#bncbj)以及从该部分链接的关于指定身份验证机制的部分。

另请参阅（在 Stackoverflow 上）[寻找使用 servlet 和 JSP 的简单、安全的会话设计以及 servlet](https://stackoverflow.com/questions/1765222/looking-for-a-simple-secure-session-design-with-servlets-and-jsp?rq=1)如何[工作？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading?rq=1)

简而言之，如果您使用这些页面上描述的机制，您不需要自己做太多检查会话属性的工作。您的登录表单可以在需要身份验证的“表单登录”配置中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:23:35.137

安全的关键在于你的评论`extract a session attribute`——你是怎么做到的？他们是否向您发送查询字符串参数？他们是否在方法标头中向您发送凭据？

对于@Hogan 的观点，除非这是通过 HTTPS，否则答案是：“不，它不安全。中间人 (MITM) 可以从您提交的内容中获取密码并简单地重新使用它来掩盖自己的密码恶意请求”。

如果通信是通过 HTTPS 完成的，那么你应该没问题。有一个硬编码的密码很好，但考虑一下密码被泄露的情况；现在每个客户/用户/等。必须更改他们的代码。

更好的设计是向客户颁发一个密钥，他们可以将其与他们的请求一起发送，您可以使用该密钥来识别他们是谁，如果密钥被泄露，则向该用户/客户端/等重新颁发一个新密钥。

**这假设流量通过 HTTPS**

如果没有流量，那么其中很多都会发生故障，您需要查看 HMAC 之类的东西。我写了这篇关于[设计安全 API](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)的文章——它应该很好地介绍了所有这些安全噩梦是如何工作的。

如果你的眼睛在你的后脑勺上滚动并且你在想“我的上帝，我只是想要一个是/否”，那么我的建议是：

1.  要求所有流量都通过 HTTPS
2.  向每个客户端发出单独的密码，这样如果一个被泄露，每个单独的密码都不会被泄露。
3.  这应该让你走得很远。

希望有所帮助。这个话题非常棘手，我知道您不想上历史课，只想解决这个问题并继续前进。希望我给了你足够的东西来做到这一点。

# ruby-on-rails - Prevent HTML escaping in a text area

> ID：15724523
> 
> 赞同：0
> 
> 时间：2013-03-30T23:09:03.093
> 
> 标签：ruby-on-rails, forms, security, html-escape-characters

Realized that if I put HTML code in a rails text area, it will output the html.

For instance:

```
<b> Hello </b> 
```

outputs as:

**Hello**

I thought rails 3 text inputs automatically escape HTML but whenever I output @variable.textarea, it still shows the bold text. Is it being selective about what HTML to input? And how do I make sure all HTML is always escape when I output the content of my textarea?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:34:28.473

If `<b>hello</b>` comes out as **hello**, that means HTML escaping *is* already prevented.

Since you don't want users to be able to use HTML in their inputs, you want HTML to be escaped, so that `<b>hello</b>` comes out as `<b>hello</b>`.

在 Rails 3 应用程序中，html 会自动转义 - 但您可以使用[h 方法](https://stackoverflow.com/questions/296747/whats-the-h-mean-in-h)显式转义它：

```
<%= h my_string %> 
```

# php - Simple strtolower not working

> ID：15724528
> 
> 赞同：10
> 
> 时间：2013-03-30T23:09:39.330
> 
> 标签：php, buddypress

Im sure this is something obvious i'm missing but I have a string 'GB' that is stored as $str and is then echoed out using strtolower...

```
$str = bp_member_profile_data('field=Country');
echo strtolower($str); 
```

I am expecting to see 'gb' (lowercase) but the output is still 'GB' (uppercase)

What could I be doing wrong?

UPDATE Turns out That the issue lied with bp_member_profile_data, this is a BuddyPress PHP function that automatically echos so it was ignoring the strtolower - Thanks to everybody for helping to narrow it down!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T23:11:45.087

Try to use:

```
mb_strtolower($str); 
```

This may work.

From [PHP Manual](http://php.net/manual/fr/function.strtolower.php):

> If the input string is in different language that server locale, then you should use mb_strtolower() function.

The function prototype is:

```
string mb_strtolower ( string $str [, string $encoding = mb_internal_encoding() ] ) 
```

You could try adding the appropriate encoding.

> The encoding parameter is the character encoding. If it is omitted, the internal character encoding value will be used.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T23:36:18.327

Check out buddy press `bp_member_profile_data()` function, it echoes:

```
function bp_member_profile_data( $args = '' ) {
    echo bp_get_member_profile_data( $args );
} 
```

You might want to use `bp_get_member_profile_data()`

# css - 无法在 IE 8-9 (Joomla) 的 Gantry 标头中更改颜色

> ID：15724537
> 
> 赞同：0
> 
> 时间：2013-03-30T23:11:00.493
> 
> 标签：css, joomla, less

我在一个网站上工作[http://www.solstack.se](http://www.solstack.se) 它在所有浏览器中都很好用，但 IE 8 和 9 除外。在这些浏览器中，标题背景是不同的颜色。浅灰色或深灰色，具体取决于龙门后端模板中的设置。我需要它是透明的，但我不知道如何。我已经在所有 .less 文件中搜索了要修改的正确代码，但没有运气。我猜它在某处被编译。*我还尝试在gantry-custom.css*文件中添加覆盖。

我需要摆脱这两行`#rt-top-surround`：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffdddddd', GradientType=0)

background-color: rgb(241, 241, 241) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:57:17.093

您可以尝试在模板文件夹中的 index.php 中执行以下操作：

```
<!--[if gte IE 8]>
    <?php
        $doc = JFactory::getDocument();
        $css = '#rt-top-surround {background-color:none; filter:none; }';
        $doc->addStyleDeclaration($css);
    ?>
<![endif]--> 
```

这基本上是说，如果正在使用的浏览器高于或等于IE8，则添加`$css`变量中定义的CSS代码。

希望这可以帮助

# php - 用 PHP 显示导航栏

> ID：15724540
> 
> 赞同：1
> 
> 时间：2013-03-30T23:11:37.513
> 
> 标签：php, html, mysql

我的导航栏有以下代码......（子菜单位 - 下拉菜单）

```
<div class="column" style="width:50%">
<ul>
<li><a href="#">LINK</a></li>
</ul>
</div> 
```

并且每个...

我有这个 PHP 代码可以在数据库的菜单的下拉部分中显示数据

```
<div class="column" style="width:50%">
                <ul>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'About' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if($counter==2) { echo '</ul></div>'; $counter=0; }
                }
                ?> 
```

我基本上需要它来显示数据库中的 2 个项目（它从 $counter 变量中获取显示的数字）

因此，当它达到 2 个项目时，它会关闭然后重新打开它并开始一个新列并再次显示相同数量的项目，但显然不是已经显示的相同项目。

任何人都有任何想法，因为由于某种原因我无法弄清楚如何让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:15:21.243

你还没有打开过`<ul>`；只关闭它。改成：

```
if($counter==2) { echo '</ul></div><div class="column" style="width:50%"><ul>'; $counter=0; } 
```

然后在循环结束后用`</ul></div>`. 所以完整的代码：

```
<div class="column" style="width:50%">
            <ul>
            <?php
            $menu1="SELECT * from websitepages where pagetype = 'About' order by pagedesc ASC ";
            $menu2=mysql_query($menu1,$conn) or die(mysql_error());
            $counter=0;
            while($menu3=mysql_fetch_array($menu2))
            {
                $counter++;
                echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                if($counter==2) { echo '</ul></div><div class="column" style="width:50%"><ul>'; $counter=0; }
            }
            ?>

</ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:17:03.953

如果我理解正确，您可能只是忘记在 if; 中重新打开 ul 和 div；改为这样做：

```
 if ($counter==2) {
   echo '</ul></div> <div class="column" style="width:50%"><ul>';
   $counter=0;
 } 
```

# forms - 带有列表视图的检票搜索表单

> ID：15724544
> 
> 赞同：0
> 
> 时间：2013-03-30T23:12:16.577
> 
> 标签：forms, listview, search, wicket

大家好，我的检票口项目似乎有问题。

本质上，我有一个 AjaxLink，单击它时应该更新可加载可拆卸模型并使用更新模型的结果重新呈现列表视图

这是我的代码

```
package com.blackwell.wicket.manager;

public class ManageExercise extends BaseManagerPage {
private static final long serialVersionUID = -3241765837700606142L;

private ModalWindow mwAddExercise;

private Integer searchId;
private String name;
private String complexity;
private LoadableDetachableModel<List<Exercise>> modelList;

@SpringBean
ExerciseJdbc exerciseJdbc;

public ManageExercise() {

    add(mwAddExercise = new ModalWindow("mwAddExercise"));

    final WebMarkupContainer wmc = new WebMarkupContainer("wmc");
    wmc.setOutputMarkupId(true);

    modelList = exerciseModel(searchId, name, complexity);

    Form<String> searchForm = new Form<String>("searchForm");
    searchForm.add(new TextField<Integer>("searchId",
            new PropertyModel<Integer>(this, "searchId")));
    searchForm.add(new TextField<String>("searchName",
            new PropertyModel<String>(this, "name")));
    // searchForm.add(new DropDownChoice<String>("searchComplexity",
    // new PropertyModel<String>(this, "complexity")));
    searchForm.add(new AjaxLink<String>("searchSubmit") {
        private static final long serialVersionUID = 1L;

        @Override
        public void onClick(AjaxRequestTarget target) {
            modelList = exerciseModel(searchId, name, complexity);
            target.add(wmc);
        }

    });

    add(searchForm);

    ListView<Exercise> lvExercise = new ListView<Exercise>("lvExercise",
            modelList) {
        private static final long serialVersionUID = 1L;

        @Override
        protected void populateItem(final ListItem<Exercise> item) {
            final Exercise model = item.getModelObject();
            item.add(new Label("id", Integer.toString(model.getId())));
            item.add(new Label("name", model.getName()));
            item.add(new ExternalLink("demoUrl", model.getDemoUrl(), model
                    .getDemoUrl()));
            item.add(new Label("complexity", model.getComplexity()
                    .getLevel()));
            item.add(new AjaxLink<String>("edit") {
                private static final long serialVersionUID = 1L;

                @Override
                public void onClick(AjaxRequestTarget target) {
                    renderAddExercise(item.getModelObject());
                    mwAddExercise.show(target);
                }
            });
            item.add(new AjaxLink<String>("delete") {
                private static final long serialVersionUID = 1L;

                @Override
                public void onClick(AjaxRequestTarget target) {
                    exerciseJdbc.disableExercise(model);
                    target.add(wmc);

                }
            });
        }
    };

    wmc.add(lvExercise);
    add(wmc);

    mwAddExercise.setWindowClosedCallback(new WindowClosedCallback() {
        private static final long serialVersionUID = 1L;

        public void onClose(AjaxRequestTarget target) {
            target.add(wmc);
        }
    });

    AjaxLink<String> addExercise = new AjaxLink<String>("addExercise") {
        private static final long serialVersionUID = 1L;

        @Override
        public void onClick(AjaxRequestTarget target) {
            renderAddExercise(new Exercise());
            mwAddExercise.show(target);

        }

    };

    add(addExercise);

}

private LoadableDetachableModel<List<Exercise>> exerciseModel(
        final Integer id, final String name, final String complexity) {
    LoadableDetachableModel<List<Exercise>> exercideModel = new LoadableDetachableModel<List<Exercise>>() {
        private static final long serialVersionUID = 1L;

        protected List<Exercise> load() {
            return exerciseJdbc.fetchAllExercises(id, name, null,
                    complexity);
        }
    };
    return exercideModel;
}

private void renderAddExercise(Exercise exercise) {
    mwAddExercise.setContent(new AddExercisePanel(mwAddExercise
            .getContentId(), exercise, mwAddExercise));
}

public Integer getSearchId() {
    return searchId;
}

public void setSearchId(Integer id) {
    this.searchId = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getComplexity() {
    return complexity;
}

public void setComplexity(String complexity) {
    this.complexity = complexity;
} 
```

}

现在的问题是点击链接时这没有发生。

我已经验证了在 load() 方法中运行的方法返回了我在传递正确参数时所期望的结果。

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:40:44.157

当你这样做时：

```
modelList = exerciseModel(searchId, name, complexity); 
```

您正在创建 的新实例`LoadableDetachableModel`，因此您`ListView`仍然拥有前一个实例。

在 Wicket 中，您必须更新模型的对象，而不是模型本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:51:44.237

在 populateItem 中也使用属性模型

新标签（“复杂性”，新 PropertyModel（item.getModel（），“复杂性.level”））

也分离模型列表（onDetach()）

# c++ - boost::condition does not exist - condition is not a member of boost

> ID：15724551
> 
> 赞同：2
> 
> 时间：2013-03-30T23:13:11.727
> 
> 标签：c++, boost

I have been reading about boost condition variables for thread synchronization however I could only get access to the class `boost::condition_variable` and not `boost::condition` for which I get

```
'condition is not a member of boost' 
```

any suggestions on what might be going on ? Do I need to download something. I am using VS2010 and boost 1.47

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:25:38.933

From the [documentation](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition)

```
#include <boost/thread/condition.hpp>

typedef condition_variable_any condition; 
```

The typedef condition is provided for backwards compatibility with previous boost releases. Note that this has been **deprecated** in favor of `condition_variable_any` as of Boost 1.52.0.

# ios - Arbitrary blending of semi-transparent PNG, retaining alpha on iOS

> ID：15724556
> 
> 赞同：2
> 
> 时间：2013-03-30T23:14:01.990
> 
> 标签：ios, core-graphics, alpha-transparency, blending, cifilter

I want to be able to overlay a semi-transparent PNG with a single colour using an arbitrary blending and keep the alpha.

I'm aware of this solution:

[How to tint a transparent PNG image in iPhone?](https://stackoverflow.com/questions/3514066/how-to-tint-a-transparent-png-image-in-iphone/3524872#3524872)

Unfortunately, DestinationIn / SourceOut / Mask all display noticeable visual artefacts in the alpha regions. This is especially noticeable when layering graphics:

![Example on the difference](../Images/ca2b8d57557d9ba9590504f9ba33b5c3.png)

Aside from using Core Graphics, I've tried CoreImage, which does not display any artefacts in CIMultiplyCompositing, but has no corresponding filter for the other Core Graphics blend modes (such as Screen and Overlay)

I've also worked with [GPUImage](https://github.com/BradLarson/GPUImage) but encountered the same visual artefacts, although this appears to be a bug in the library.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:27:12.163

I found and fixed the bug in GPUImage which was causing the problems. I then manually implemented all the blendings as shaders.

# jquery - Trouble Loading CSV content as opposed to Downloading

> ID：15724557
> 
> 赞同：0
> 
> 时间：2013-03-30T23:14:10.723
> 
> 标签：jquery, jsp

Good Afternoon,

With Yahoo Finance, following the following link, along with some convenient URL tags, will customize a downloadable CSV with nearly whatever stock information you like. The URL will automatically download a CSV to wherever your downloads default:

[http://finance.yahoo.com/d/quotes.csv?s=](http://finance.yahoo.com/d/quotes.csv?s=)"GOOG"+&f="s"

I, however, do not want to download this content on to my computer, I would like to download it into a webpage. Here is what I've been toying with:

The JSP, index.jsp:

```
<!DOCTYPE JSP>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script src="Scripts/script.js"></script>
<style>
#Generic_Container {
height:500px;
width:500px;
background-color:transparent;
}
#Link1 {
width:200px;
height:200px;
position:absolute;
top:5px;
left:5px;
background-color:blue;
color:white;
}
</style>
</head>
<body>
<div id="Generic_Container">
    <a href='http://finance.yahoo.com/d/quotes.csv?s="GOOG"+&f="s"' id='Link1'></a>
</div>
</body>
</html> 
```

and the related file, script.js (poor naming conventions, I realize; however, this example is for inquisitive purposes alone):

```
$('document').ready(function() {

$('#Link1').click(function(event) {
    event.preventDefault();
    $('#Link1').load('http://finance.yahoo.com/d/quotes.csv?s="GOOG"+&f="s"');
});

}); 
```

this should prevent the download of the file from the site, and instead load the content into the frame, but I must be doing something wrong. I'm also open to alternative methods of getting this done, if I'm indeed doing something not-so-logical..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:27:55.707

Suggest using Yahoo's YQL AJAX proxy service to return the data as jsonp and parse it to html from there. The YQL sandbox console has examples how to retrieve quotes

[YQL Console Quote Example](http://developer.yahoo.com/yql/console/?q=show%20tables&env=store://datatables.org/alltableswithkeys#h=select%20%2a%20from%20yahoo.finance.quote%20where%20symbol%20in%20%28%22YHOO%22,%22AAPL%22,%22GOOG%22,%22MSFT%22%29)

Once you get the url set up in console, can use `$.getJSON` to retrieve the data.

Other option is to use a proxy on your own server that retrieves the csv using CURL and parses to html or json for you to retrive with AJAX

# php - mysql查询的意外输出

> ID：15724559
> 
> 赞同：1
> 
> 时间：2013-03-30T23:14:34.403
> 
> 标签：php, mysql

也许我早就习惯了使用 ORM 方法从数据库中提取数据，但我现在正在为我的一个朋友做一个简单的小项目，他不需要所有额外的 MVC、ORM 等等。 . 下面是我在 PHP 中构建的一个类中的查询示例。

```
$this->sqlstart();
$sql = "select label, setting from ".$this->_settings." where id <= 4";
$query = mysql_query($sql);

$result = array();
while($row = mysql_fetch_array($query))
{
    $result[] = $row;
}
return $result; 
```

的输出`return $result`是：

```
Array
(
    [0] => Array
        (
            [0] => Week 1 Pay
            [label] => Week 1 Pay
            [1] => 2995
            [setting] => 2995
        )

    [1] => Array
        (
            [0] => Week 2 Pay
            [label] => Week 2 Pay
            [1] => 2995
            [setting] => 2995
        )

    [2] => Array
        (
            [0] => Week 1 Dates
            [label] => Week 1 Dates
            [1] => 1-15
            [setting] => 1-15
        )

    [3] => Array
        (
            [0] => Week 2 Dates
            [label] => Week 2 Dates
            [1] => 16-31
            [setting] => 16-31
        )

) 
```

它应该是

```
Array
(
    [0] => Array
        (
            [label] => Week 1 Pay
            [setting] => 2995
        )

    [1] => Array
        (
            [label] => Week 2 Pay
            [setting] => 2995
        )

    [2] => Array
        (
            [label] => Week 1 Dates
            [setting] => 1-15
        )

    [3] => Array
        (
            [label] => Week 2 Dates
            [setting] => 16-31
        )

) 
```

谁能向我指出集合中的其他数据来自哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T23:18:04.983

您应该使用`mysql_fetch_assoc`正确获得结果。它将为您提供一个关联数组而不是普通数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:16:40.967

来自[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

```
array mysql_fetch_array ( resource $result [, int $result_type = MYSQL_BOTH ] ) 
```

要么`MYSQL_ASSOC`作为第二个参数传递以获取关联数组，要么只调用[`mysql_fetch_assoc()`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T23:16:42.777

您应该能够传入第二个参数，它只会输出关联的列名：

```
while($row = mysql_fetch_array($query, MYSQL_ASSOC)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T23:20:40.363

`mysql_fetch_array`返回两种访问值的方式：*字段名*和*索引号*。您可以将代码更改`mysql_fetch_array`为`mysql_fetch_assoc`或更改为：

```
while($row = mysql_fetch_array($query)){
     $result[] = array('label' => $row['label'], 'setting' => $row['setting'];
 } 
```

# javascript - jquery按值计算多维数组

> ID：15724561
> 
> 赞同：0
> 
> 时间：2013-03-30T23:14:42.043
> 
> 标签：javascript, jquery, multidimensional-array, count

请帮我计算表格中的特定值。

我有一些这种形式的数据：

```
var data = {
    "metadata": ["FZ", "CS", "CU", "CZ"],
        "values": [
        ["CON", "184.0", "null", "null"],
        ["ERG SRL", "35.0", "null", "57.0"],
        ["IO", "6.0", "null", "null"],
        ["IND", "null", "1753.0", "null"],
        ["LIXL", "1644.0", "null", "3748.0"],
        ["MOXRL", "2285.0", "null", "0.0"],
        ["MOLXL", "11.0", "null", "0.0"],
        ["MURX", "5362.0", "null", "275.0"],
        ["STRL", "197.0", "null", "39.0"]
    ]
}; 
```

这是[jsbin 上的结果](http://jsbin.com/ogewaj/2/edit)。在该表中，我有一些值，例如`null`,`0.0`和其他。

我想要的只是在他们的键上计算这个值： 示例：这是我的表：

```
FZ CS CU CZ
CON 184.0 null null
ERG 35.0 空 57.0
IO 6.0 null null
IND 空 1753.0 空
LIXL 1644.0 空 3748.0
MOXRL 2285.0 空 0.0
MOLXL 11.0 空 0.0
MURX 5362.0 空 275.0
STRL 197.0 空 39.0

```

这是我想要的结果：

```
       CS CU CZ
全部 9 9 9
无 1 8 3
0.0 0 0 2
>0 8 1 4

```

唯一的结果是当我在生成的表格中计算单元格时，但如果我想要分页，这并不好。

我尝试了`.length()`，`count++`基于 stackoverflow.com 上的几个答案，但没有结果。

谢谢大家的提示和回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:36:09.780

```
function countValues(values, column, search) {
  var total = 0;

  for(var i  = 0; i < values.length; i++) {
    if(values[i][column] === search)
      total++;   
  }

  return total;
}

How to use: countValues(data.values, 2, "null") 
```

在您的示例中：

```
FZ is column 0   

CS is column 1

CU is column 2

CZ is column 3 
```

我希望它足够清楚。

[这是一个小提琴](http://jsfiddle.net/PhX79/)

但我建议使用[AngularJS](http://angularjs.org)或**下划线之类的框架**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:11:07.007

这是一个将所有数据映射到创建表的解决方案

HTML：

```
<table id="counter"></table> 
```

JS：

```
var tableHeader=['<tr><th></th>'];
/* final mapped object, structured to make html generation and search of metadata vs category easy*/
/* arrays wil contain category count in same array order as metadata*/  
var catObj = {'all':[], 'null':[], '0.0':[], '&gt;0':[]};/* "&gt;" used intentionally vs ">" due to html entity*/
/* create header row and populate count arrays with zeros*/
$.each(data.metadata,function(i,item){
    tableHeader.push('<th>'+item+'</th>');
    $.each(catObj,function(key,arr){
        arr[i]=0;
    });    
});

tableHeader.push('</tr>');

/* categorize the values and update appropriate counter array*/
$.each(data.values,function(i,arr){
    $.each(arr, function(idx, val){ 
         catObj[getCategory(val)][idx] ++;
    });
});
/* create the table rows from counter arrays*/
var rowsHtml=[];
$.each( catObj,function(key,arr){
   rowsHtml.push('<tr><td>'+key+'</td>');
    rowsHtml.push( '<td>'+arr.join('</td><td>')+'</td></tr>');  
});
/*insert table html*/
$('#counter').html( tableHeader.join('')+rowsHtml.join('')) 

 /* helper to do categorizing of each value*/      
function getCategory(value) {
    if (isNaN(value)) {
        return value != 'null' ?  'all': 'null';
    } else {
        return value == 0 ? '0.0' : '&gt;0';
    }
} 
```

演示：http: [//jsfiddle.net/ykuzg/4](http://jsfiddle.net/ykuzg/4)

**编辑**：

如果需要，可以根据元数据值搜索最终对象，如下所示：

```
function searchCats( meta, category){
   return catObj[category][ $.inArray(meta, data.metadata) ]; 
} 
```

用途

```
searchCats('FZ', 'all') // returns 9 
```

# c# - Fluent NHibernate 一对一映射

> ID：15724562
> 
> 赞同：3
> 
> 时间：2013-03-30T23:14:57.363
> 
> 标签：c#, nhibernate, fluent-nhibernate, one-to-one

我很难利用 Fluent NHibernate 的 HasOne 映射。基本上，A 类在 B 类中可以有一个匹配的（只有一个或没有）记录。

请帮助定义关系的 AMap 和 BMap 类。

谢谢你。

```
public class A
{
   public virtual int Id {get;set;}
   public virtual string P1 {get;set;}
   public virtual string P2 {get;set;}
   public virtual string P3 {get;set;}
}

public class B
{
   public virtual int Id {get;set;}
   public virtual string P4 {get;set;}
   public virtual string P5 {get;set;}
   public virtual string P6 {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T00:39:10.833

要使`one-to-one`映射工作，您需要根据以下代码`B`向类添加类型属性，`A`反之亦然。由于 NHibernate 不支持单向一对一，因此这两个类都需要这些引用。

```
public class A
{
  public virtual int Id {get;set;}
  public virtual string P1 {get;set;}
  public virtual string P2 {get;set;}
  public virtual string P3 {get;set;}
  public virtual B child { get; set; }
}

public class B
{
  public virtual int Id {get;set;}
  public virtual string P4 {get;set;}
  public virtual string P5 {get;set;}
  public virtual string P6 {get;set;}
  public virtual A parent;
} 
```

然后在流畅的映射中，您需要添加以下内容

```
public AMap()
{
  /* mapping for id and properties here */
  HasOne(x => x.child)
      .Cascade.All();
}

public BMap()
{
  /* mapping for id and properties here */
  References(x => x.parent)
      .Unique();
} 
```

请注意，其中的一对多映射`BMap`标记为`Unique`。如果您使用 NHibernate 生成 DB 模式，这将用于创建唯一列约束。

要创建新记录，您可以编写如下内容：

```
 using (var transaction = session.BeginTransaction())
    {
        var classA = new A();
        classA.child = new B() { parent = classA};

        session.Save(owner);
        transaction.Commit();
    } 
```

最后一个警告，NHibernate 的当前版本 3.4 不支持对孤立的一对一的级联删除。有关错误报告，请参见[此处](https://nhibernate.jira.com/browse/NH-1262)。这意味着如果您编写类似`session.Delete(classA);`的内容，则不会自动删除关联的 B 类记录。

# c - 实现 A* 算法

> ID：15724563
> 
> 赞同：6
> 
> 时间：2013-03-30T23:15:15.853
> 
> 标签：c, implementation, a-star

所以我在 C 中实现 A* 算法。这是程序。

我正在为所有打开的节点使用优先队列 [使用数组]。由于我将有重复的距离，即不止一个具有相同距离/优先级的节点，因此在 PQ 中插入节点时，如果插入节点的父节点具有相同的优先级，我仍然交换它们，以便我的最新输入的成员保持在顶部（或尽可能高），以便我继续遵循特定方向。另外，在删除时，当我将最上面的元素与最后一个元素交换时，如果交换的最后一个元素与它的一个子元素相同，那么它会被交换到底部。（我不确定这是否会影响以任何方式）。

现在的问题是说我有一个 100*100 矩阵，并且我在 2D 数组的 (0,20) 到 (15,20) 之间有障碍物，我正在其中移动。现在对于起始位置 (2,2) 和结束位置 (16,20)，我得到一条笔直的路径，即首先一直向右，然后向下直到 15，然后向右移动一个，我就完成了。

但是，如果我从 (2,2) 开始，最后从 (12,78) 开始，即这些点被障碍物隔开并且路径必须绕过它，我仍然通过 (16,20) 和我的路径之后(16,20) 仍然是笔直的，但我到 (16,20) 的路径是曲折的，即我直走一段距离，然后向右走，然后向下再向右，依此类推，最终到达 (16,20) 和在那之后直接去。

为什么在距离的前半部分使用这种曲折路径，当我的目的地是 (16,20) 而不是 (12,78) 时，我能做些什么来确保我的路径是笔直的。

谢谢。

```
void findPath(array[ROW][COLUMN],sourceX,sourceY,destX,destY) {
  PQ pq[SIZE];
  int x,y;

  insert(pq,sourceX,sourceY);

  while(!empty(pq)) {
    remove(pq);
    if(removedIsDestination)
        break;                  //Path Found
    insertAdjacent(pq,x,y,destX,destY);
  }
}

void insert(PQ pq[SIZE],element){
  ++sizeOfPQ;
  PQ[sizeOfPQ]==element
  int i=sizeOfPQ;
  while(i>0){
    if(pq[i].priority <= pq[(i-1)/2].priority){
      swapWithParent
      i=(i-1)/2;
    }
    else
      break;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:37:31.900

你应该改变你的得分部分。现在你计算绝对距离。而是计算最小移动距离。如果你把每一步都算作一次，那么如果你在 (x,y) 并去 (dX,dY) 那将是

```
distance moved + (max(x,dX) - min(x,dx) + max(y,dY) - min(y,dY)) 
```

较低的值被认为是较高的分数。

这种启发式是猜测如果没有任何阻碍，它将采取多少步。

* * *

启发式的好处是您可以更改它以获得您想要的结果，例如，如果您喜欢按照您的建议沿直线移动，那么您可以进行此更改：

```
= distance moved + (max(x,dX) - min(x,dx) + max(y,dY) - min(y,dY)) 
     + (1 if this is a turn from the last move) 
```

这将使您“找到”趋向于同一方向的解决方案。

如果您想强制尽可能少的转弯：

```
= distance moved + (max(x,dX) - min(x,dx) + max(y,dY) - min(y,dY)) 
     + (1 times the number of turns made) 
```

这就是 A* 的优点——启发式会通知搜索——你仍然会找到一个解决方案，但如果有多个解决方案，你可以影响你首先看的地方——这有助于模拟 AI 行为.

* * *

> 疑问：第一种和第二种计算方式有何不同？

第一个将较低的优先级放在转弯的移动上。第二个将较低优先级放在转弯较多的路径上。在某些情况下（例如，第一个转弯），该值将是相同的，但总的来说，第二个将选择具有尽可能少转弯的路径，而第一个可能没有。

> Also, 1 if this is a turn from the last move , for this, say i have source at top left and destination at bottom right, now my path normally would be, left,left,left...down,down,down.... Now, 1 if this is a turn from the last move, according to this, when I change from left to down, will I add 1?

Yes

> Wont it make the total value more and the priority for down will decrease.

Yes, exactly. You want to not look at choices that have a turn in them first. This will make them lower priority and your algorithm will investigate other options with a higher priority -- exactly what you want.

> Or 1 if this is a turn from the last move is when I move to a cell, that is not abutting the cell previously worked upon? Thnks –</p>

No, I don't understand this question -- I don't think it makes sense in this context -- all moves have to abut the previous cell, diagonal moves are not allowed.

* * *

> Though, I'd really appreciate if you could tell me one instance where the first and second methods will give different answers. If you could. Thanks alot. :)

Not so easy without seeing the details of your algorithm but the following might work:

![enter image description here](../Images/23e44445c01b469f366eecc335f7346d.png)

The red are blocks. The green is what I would expect the first one to do, it locally tries to find the least turn. The blue is the least turn solution. Note, how far the red areas are from each other and the details of how your algorithm influence if this will work. As I have it above -- having an extra turn only costs 1 in the heuristic. SO, if you want to be sure this will work change the heuristic like this:

```
= distance moved + (max(x,dX) - min(x,dx) + max(y,dY) - min(y,dY)) 
     + (25 times the number of turns made) 
```

Where 25 is bigger than the distance to get past the 2nd turn in the green path. (Thus after the 2nd turn the blue path will be searched.)

# java - Hibernate and Glassfish Lazyload

> ID：15724567
> 
> 赞同：0
> 
> 时间：2013-03-30T23:15:45.863
> 
> 标签：java, hibernate, glassfish, lazy-loading

I have a project in Java Web Application and the plan is to output the functionallity with Glassfish to PHP (nuSOAP) .

I have created my BD in mySQL , all tables , relationships, Primary Keys and Foreign Keys.

After that i open my NetBeans, New Project -> Java Web APP.

The steps that i made are
first create the Hibernate Configuration Wizard, and then , create Hibernate Reverse Engineering Wizard then the Hibernate mapping files and POJO's from Database and at the end HibernateUtil (named connection)

My entities are: Club one for many Grade one for many Team one for many Player

So, now i have all my Entities in my Java Project. And created a DAO for Club:

```
public List<Club> listClubs(){
    try{
        session.beginTransaction();
        List<Club> listClub = (List<Club>)session.createQuery("from Club").list();
        session.getTransaction().commit();
        session.close();
        return listClub;
    }catch(Exception e){
        System.out.println("Erro ao listar os clubes"); 
        System.out.println(e.getMessage());
    }
    return null;
} 
```

After that i want to create a WebService to output a list of All my Clubs.

```
@WebMethod(operationName = "listAllClubs")
public List<Club> listAllClubs() {
    ClubDAO pdo = new ClubDAO();
    List<Club> temp = pdo.listClubs();
    System.out.println("[WS:::]Tamanho do array devolvido: " + temp.size());
    return temp;
} 
```

And after i tested my WebService in glassfish page i get this error:

```
> Service invocation threw an exception with message : null; Refer to the server log for more details 
```

When i got the server log i see this:

```
> SEVERE: failed to lazily initialize a collection of role: pt.dai.entities.Club.grades, no session or session was closed 
```

I already search about this error in internet, i already solved changing the xml of entity to default-lazy='false' but when this returns all club info to PHP my nuSOAP break up with a lot of DATA..

How can i use the lazzyLoad and send my data to WebService ?

Thanks for the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:46:03.333

Looks like this is not lazy loading problem.

Lazy loading allows you to not read nested entities from database while it wouldn't be addressed explicitly.

In your case even with lazy loading you'll try send all the data, so all this data will be read from the DB.

If you don't want to send all of it then you should limit your query. Otherwise you can split your data to a few parts and send them separately.

* * *

**Edit:** Remove relationships is the simplest but not satisfactory solution.

The root of your problem is in serialization. Looks like your entities has bidirectional or cyclical relationships. You need to resolve it by removing redundant relationships or marking all such class members transient which prohibits their serialization.

P.S. If you don't close your Hibernate session it won't be released and not returns to connection pool. After a few time your connection pool will be empty and all your future queries will hangs up while waiting for free session.

# ruby-on-rails - Suppressing/Filtering resource attributes when using respond_with

> ID：15724569
> 
> 赞同：1
> 
> 时间：2013-03-30T23:15:59.087
> 
> 标签：ruby-on-rails

I am using Rails 3.

When using [respond_with](http://api.rubyonrails.org/classes/ActionController/MimeResponds.html#method-i-respond_with) to output JSON/XML/HTML, it dumps all of the attributes by default. What is a good strategy to hide/filter/suppress resource attributes that should not be rendered?

The article [here](https://gist.github.com/jcasimir/1212245) explains what `respond_with` does.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T23:29:10.890

There are a few options.

You can overwrite the `as_json` method on the model you are working with [http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/](http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/)

You can use a json builder
[jbuilder](https://github.com/rails/jbuilder)
[rabl](https://github.com/nesquena/rabl)

You could create a serializer
[http://railscasts.com/episodes/409-active-model-serializers](http://railscasts.com/episodes/409-active-model-serializers)

or you could use the `:only` option on `to_json`

```
def index
  @models = Model.all
  respond_with(@models) do |format|
    format.html { render }
    format.json { 
      render json: @models.to_json(
        only: [:some_attribute, :some_other_attribute]
      )
    }
  end
end 
```

Unless you are using these constraints in many actions I would recommend the last choice (using `:only` because I believe it to be the simplest but you may feel like the controller isn't the place for this kind of logic.

And there are probably many more ways to do this.

**Edit**:
`respond_with` takes a hash as a second argument to make the above prettier (thanks @ck3g)

```
def index
  @models = Model.all
  respond_with @models, only: [:some_attribute, :some_other_attribute]
end 
```

# java - 向另一个类抛出一个值

> ID：15724571
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:16:05.403
> 
> 标签：java, swing

你能帮我解决这个问题吗？

首先是代码：

```
public RegistrationForm(){

    super("Registration Form (Assignment One)");
    setLayout(new GridLayout(6,2));

    l[0] = new JLabel("Name: ");
    l[0].setFont(new Font("Calibri Head",Font.BOLD,12));
    add(l[0]);

    tf[0] = new JTextField();
    tf[0].setToolTipText("Enter Your Full Name");
    add(tf[0]);

    l[1] = new JLabel("Age: ");
    l[1].setFont(new Font("Calibri Head",Font.BOLD,12));
    add(l[1]);

    tf[1] = new JTextField();
    tf[1].setToolTipText("Enter Your Age");
    add(tf[1]);

    l[2] = new JLabel("Birthday: ");
    l[2].setFont(new Font("Calibri Head",Font.BOLD,12));
    add(l[2]);

    tf[2] = new JTextField();
    tf[2].setToolTipText("Enter Your Birthday");
    add(tf[2]);

    l[3] = new JLabel("Address: ");
    l[3].setFont(new Font("Calibri Head",Font.BOLD,12));
    add(l[3]);

    tf[3] = new JTextField();
    tf[3].setToolTipText("Enter Your Address");
    add(tf[3]);

    l[4] = new JLabel("Contact Number: ");
    l[4].setFont(new Font("Calibri Head",Font.BOLD,12));
    add(l[4]);

    tf[4] = new JTextField();
    tf[4].setToolTipText("Enter Your Contact Number");
    add(tf[4]);

    b[0] = new JButton("Submit");
    b[0].addActionListener(this);
    add(b[0]);

    b[1] = new JButton("Clear");
    b[1].addActionListener(this);
    add(b[1]);
} 
```

因此，当我向所有人输入一个值并按“提交”时，上一个课程将关闭，另一个课程将打开，它会显示我从上一个课程输入的内容的值。. .

JTextfields 没有默认值，我将自己输入值。

我怎样才能将一个值扔（我的意思是传递）另一个类？

这是我到目前为止的代码：

这是我的方法：

```
public String name(){
return tf[0].getText();
} 
```

这是来自我的其他课程：

```
public Form{
RegistrationForm form = new RegistrationForm();

JTextField name = form.name();
add(name);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:20:32.667

你不需要扔任何东西。显示此对话框的任何类都将保存对此类实例的引用，并且可以在对话框返回后简单地查询字段的状态。如果对话框窗口是模态对话框，例如模态 JDialog 或 JOptionPane，这会容易*得多。*

例如，请看我在[这个例子](https://stackoverflow.com/a/10150308/522444)中的代码。

**编辑**
另外，这让我很困惑：

```
public Form{
  RegistrationForm form = new RegistrationForm();

  JTextField name = form.name();
  add(name);
} 
```

此代码是否显示 RegistrationForm 对象？RegistrationForm 实际上是模态 JDialog 吗？从一个 GUI 中提取 JTextField 并将其添加到另一个 GUI 是非常不寻常的，我很确定您不想这样做。同样，您想要做的是：

*   将您的 RegistrationForm 显示为*模态*JDialog。
*   返回后，在 RegistrationForm 对象上调用 getter 方法，该方法提取对象的文本字段持有的字符串。

有关更多详细信息，您仍然需要告诉我们更多有关您的代码和问题的信息。

# android - 从 Xamarin 调试设备访问 Web Api 时出现错误 400 错误请求

> ID：15724582
> 
> 赞同：1
> 
> 时间：2013-03-30T23:17:43.490
> 
> 标签：android, webclient, xamarin

我正在尝试从在我的本地主机上运行的 WebApi 应用程序获得响应。我可以从浏览器获取它，也可以从另一个网络应用程序获取它。

但是，我在 Xamarin Studio 调试设备中遇到相同代码的问题

```
var url="http://192.168.2.4:13325/api/values";
using (WebClient wc = new WebClient())
{

    wc.Headers.Add("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    wc.Headers.Add ("User-Agent","Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22");
    wc.Headers.Add ("Accept-Encoding","gzip,deflate,sdch");
    wc.Headers.Add ("Accept-Language","en-US,en;q=0.8");
    wc.Headers.Add ("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.3");

    string HtmlResult = wc.DownloadString(url);
} 
```

这是从浏览器发出请求时从 Fiddler 获取的标头。Web 应用程序甚至不需要这些并获得响应。

我正在使用我的计算机的 IP，因为我读到调试器运行虚拟机，所以我无法定位 localhost。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:30:30.113

我解决了这个问题。它与 Xamarin 或 android 无关，问题出在服务端。

首先启用外部请求：[IIS Express启用外部请求](https://stackoverflow.com/questions/3313616/iis-express-enable-external-request)

An then edit binding information for your app: [IISExpress returns a 503 error from remote machines](https://stackoverflow.com/questions/5442551/iisexpress-returns-a-503-error-from-remote-machines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T10:10:22.450

I had the same problem everything is working good on the browser but connot connect from emulator (i get a 400 bad request) it was very simple i just forgot to launch my web api as administrator

# php - CodeIgniter SQL 查询错误处理

> ID：15724584
> 
> 赞同：0
> 
> 时间：2013-03-30T23:17:49.957
> 
> 标签：php, sql, codeigniter, error-handling

此刻我像这样访问我的帖子

```
http://localhost/post/174565/ 
```

一切正常，但是当我尝试像这样访问它们时

```
http://localhost/post/1745s65/ 
```

我收到错误

```
Error Number: 1054
Unknown column '1745s65' in 'where clause'
SELECT * FROM posts WHERE id = 1745s65;
Filename: D:\Localhost\Apache\htdocs\code\system\database\DB_driver.php
Line Number: 330 
```

我明白它为什么在那里，但如何处理它？例如，我的用户不需要查看 SQL 查询，我想向他们显示 404 页面而不是这个块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:38:19.613

使用例外：

```
try{
       //here what you need to do with script
         } catch (Exception $e) {
            var_dump($e->getMessage());
            show_404();
              } 
```

我想你也可以尝试把：

`$database['db_debug'] = FALSE;``config/database.php`如果您想删除显示的数据库错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:52:35.043

试试这个代码：

```
public function getPostData($iPostId) {
    $sqlQuery = $this->db->get_where('posts', array('id' => $iPostId));
    $aResult = $sqlQuery->result();

    if (empty($aResult)) {
        show_404();
    }
    else {
        return $aResult[0];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:23:53.733

您需要验证用户输入以防止出现此问题。总之，Codeigniter 有两个预设环境：开发和生产。检查您的根 index.php 以获取更多信息。

# android - 在 Google Play 上上传较新版本的 apk 失败

> ID：15724588
> 
> 赞同：1
> 
> 时间：2013-03-30T23:18:16.630
> 
> 标签：android, google-play

我用不同的版本和代码更新了一个应用程序。然后使用与以前版本 apk 相同的密钥库，通过“右键单击->Android 工具->导出签名的应用程序包”对 apk 进行签名。但是在将其上传到 google play 时，出现以下错误。谁能告诉我我怎么了？

“上传失败您上传的 APK 使用与之前的 APK 不同的证书签名。您必须使用相同的证书。您现有的 APK 使用带有指纹的证书进行签名：

SHA1：D6:E1:7F:65:4D:BF:B5:B0:F8:FB:D3:8F:F7:5A:40:B6:62:EA:98:EB

并且用于签署您上传的 APK 的证书有指纹：

SHA1：96:85:B8:57:87:29:4F:8B:AC:C3:26:29:D0:F5:A6:63:30:D6:0C:A3"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T18:38:12.323

我遇到了“上传错误”的问题。原来是浏览器（Chrome）缓存问题，在Chrome中清除浏览器缓存，问题就解决了。清除浏览器缓存后，我能够上传相同的 apk 并毫无问题地发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T06:42:17.037

我也有这个问题。在我的情况下，当我更新我的项目时发生了问题。

1.  我将项目从 Android Studio 0.4.3 导入到 Android Studio 0.8.9，
2.  我用相同的密钥签署了apk，
3.  当我将 apk 上传到 Google Play 时出现错误“上传失败您上传的 APK 使用与您以前的 APK 不同的证书签名。（...）”。

所以。

1.  我将我的项目降级到 0.4.3，
2.  用相同的密钥签名，
3.  上传没有任何问题。

我不知道它怎么可能，但它会起作用。我希望它会对你有所帮助。

# javascript - GC-Logic 在所有浏览器中的工作方式都相同吗？

> ID：15724593
> 
> 赞同：0
> 
> 时间：2013-03-30T23:19:07.327
> 
> 标签：javascript, jquery, google-chrome, garbage-collection

我试图更多地了解垃圾收集。我目前正在为我们的网络应用程序使用 Google Chrome 的工具，例如 Speed Tracer、Timeline 和 Profiles。

我做了一个简单的测试，并用 JQuery 计算了单个页面上所有创建的 dom 元素，但结果在所有浏览器中都不同。

```
970 Dom elements in Chrome
967 Dom elements in Firefox
969 Dom elements in IE10

//The difference is not that big but I just wanted to know 
```

看了之后就想问一下GC调用的时候浏览器有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:25:01.233

垃圾回收在不同浏览器的具体实现肯定是有区别的，但是基本原理是一样的。

元素数量的差异更有可能是由于文档解析方式的差异。浏览器不仅将标签解析为元素，元素之间的文本被解析为文本节点，它们也算作 DOM 元素。一些浏览器在其他浏览器没有的标签之间为空格或换行符创建文本节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:22:19.447

是的，它是不同的。所有浏览器都有自己的 JavaScript 实现，因此 GC 和所有其他实现细节会有所不同。

# ember.js - 将更多记录添加到商店时，模板不反映更改

> ID：15724595
> 
> 赞同：1
> 
> 时间：2013-03-30T23:19:10.573
> 
> 标签：ember.js

我试图在我的列表模板末尾实现一个“加载更多”按钮，但是当我用更多记录更新商店时，我的列表没有被更新。现在我只是在我的控制器上手动设置“内容”来更新列表模板。

```
App.AlbumsController = Ember.ArrayController.extend({
  ...

  loadMore: function() {
    var that = this;

    this.incrementProperty('currentPage'); 

    App.Album.find({
      page: this.get('currentPage')
    }).on('didLoad', function() {
      that.set('content', App.Album.all())
    });
  }

  ...
}) 
```

我不相信这是处理事情的最佳方式，所以我想知道是否有办法在模板和商店之间设置绑定，所以当我用`App.Album.find(<params>)`我的相册模板更新商店时会自动更新。

# java - Counting swaps in a sorting method

> ID：15724599
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:20:34.167
> 
> 标签：java, compare, counter

So I have this assignment where I have to compare a bunch of sorting methods and count the number of comparisons and the number of copies each algorithm performs.I have already created my sorting methods but have never made a counter before. My question is how would I declare a counter and where would I put one in my code?

Sorry completely forgot, kinda overwhelmed right now. I'm using java.

I know I would put like counter++ before the swap or comparison I'm just a little lost on the syntax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:40:20.267

Keep your sorting algorithms in an independent class, kept separate from your main app. Your counters can be field variables of that class. That way, you can run your sort, and follow up by retrieving the metrics you gathered.

```
MySortAlgorithms sorter=new MySortAlgorithms();
ArrayList example=sorter.quickSort(ArrayList arr);
System.out.println("Swaps=" + sorter.getSwapCount()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:19:21.733

Counter can be a simple static variable in your class . Isn't it? Just add to it everytime you want to swap.

```
Class ObjectToBeSorted{
   static int numberOfSwaps;

   public static increment swap(){
     numberOfSwaps++
   }

   public static clearSwaps (){

      numberOfSwaps = 0;
   }

} 
```

# mysql - AS 不使用 COUNT(*) 和 UNION

> ID：15724602
> 
> 赞同：0
> 
> 时间：2013-03-30T23:21:34.767
> 
> 标签：mysql, sql, count, union

因此，我使用 UNION 将 3 个查询连接在一起，并想计算结果中的行数，但这有点奇怪。它确实有效，并给出了正确的答案，但它没有正确分配“AS”部分。

```
SELECT COUNT(*) FROM (
(Long Select Statement)
UNION
(AnotherLong Select Statement)
UNION 
(Even Longer Select Statement)
) 
AS NoOfTweets"; 
```

结果是正确的，但不是将其分配给“NoOfTweets”，而是将其分配给“Count(*)”。如果我删除“AS NoOfTweets”，它将停止工作。如果我删除一些括号它停止工作。经过漫长的一天后，我的想法越来越少！如果需要，我可以发布整个代码，但宁愿不发布，因为它很长，而且我认为这部分有效。

提前感谢，杰克。

**编辑：修复：**

```
SELECT COUNT(*) NoOfTweets FROM (
(Long Select Statement)
UNION
(AnotherLong Select Statement)
UNION 
(Even Longer Select Statement)
) 
AS NoOfTweets"; 
```

多谢你们 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T23:23:25.117

你没有把它放在正确的位置。查询的开头应如下所示：

`SELECT COUNT(*) AS NoOfTweets`

[更多关于列别名](http://www.geeksengine.com/database/basic-select/column-alias.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T23:24:19.333

```
SELECT COUNT(*) NoOfTweets FROM 
(Long Select Statement)
UNION
(AnotherLong Select Statement)
UNION 
(Even Longer Select Statement) 
```

或者

```
SELECT COUNT(*) AS NoOfTweets FROM 
(Long Select Statement)
UNION
(AnotherLong Select Statement)
UNION 
(Even Longer Select Statement) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T23:24:30.810

您必须`AS`在您计数的项目之后使用：

```
SELECT COUNT(*) AS `NoOfTweets`
FROM ( ... ) 
```

还要小心`"`你接近尾声。或者它可能来自更长的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T23:52:38.353

错误是`Every derived table must have its own alias`我不知道的，所以感谢您的教育:)

[http://sqlfiddle.com/#!9/d30f4/4](http://sqlfiddle.com/#!9/d30f4/4)

很好的 MySQL 给出解释 - 我在 SQLFiddle 上尝试了 MS SQL 并得到了`Incorrect syntax near ')'.`这没什么帮助！

因此，您的“NoOfTweets”是赋予结果列的名称，也是赋予 SQL 引擎所需但可能是不同名称的“派生表”的名称……它不会在结果中返回。命名派生表的目的是为了以防您希望 JOIN 到其他表并引用连接中的字段。

# c# - 动画短序列

> ID：15724606
> 
> 赞同：0
> 
> 时间：2013-03-30T23:22:18.220
> 
> 标签：c#, animation, xna

我正在编写一个游戏，我希望在发生碰撞时运行爆炸动画。但是，我知道如何制作动画的方法是基于键盘输入的。编写该方法的最佳方法是什么，以便在调用动画时单次通过所有帧然后停止？

```
public void Update(GameTime gametime)
  {
    timer += gametime.ElapsedGameTime.Milliseconds;
       if (timer >= msBetweenFrames)
      {
        timer = 0;
        if (CurrentFrame++ == numberOfFrames - 1)
           CurrentFrame = 0;
          rect.X = CurrentFrame * width;
          rect.Y = 0;
     }
  }

   public void Render(SpriteBatch sb, Vector2 position, Color color)
  {
   sb.Draw(aniTex, position, rect, color, 0, Vector2.Zero, 2.0f, SpriteEffects.None, 0);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:37:33.877

如果问题只是循环问题，您只需删除更新中导致其循环的代码位（即`if (CurrentFrame++ == numberOfFrames - 1) CurrentFrame = 0;`）您需要做的就是让动画再次播放，将当前帧设置回 0当你想要它播放时。（要停止绘制，只需在需要时进行绘制调用。）

如果您正在寻找一种构建它的方法（这就是我最初解释您的问题的方式！）为什么不使用您想要动画的任何对象设置一个 Animated 类。类似的东西

```
class AnimatedObject
{
    Texture2D texture;
    Rectangle currentRectangle;
    Rectangle frameSize;
    int frameCount;
    int currentFrame;

    bool isRunning;

    public AnimatedObject(Texture2D lTexture, Rectangle lFrameSize, int lFrameCount)
    {
        texture = lTexture;
        frameSize = lFrameSize;
        currentRectangle = lFrameSize;
        currentFrame = 0;
    }

    public void Pause()
    {
        isRunning = false;
    }

    public void Resume()
    {
        isRunning = true;
    }

    public void Restart()
    {
        currentFrame = 0;
        isRunning = true;
    }

    public void Update()
    {
        if(isRunning)
        {
            ++currentFrame;
            if(currentFrame == frameCount)
            {
                currentFrame = 0;
            }

            currentRectangle.X = frameSize.Width * currentFrame;
        }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        if(isRunning)
        {
            spriteBatch.Draw(texture, currentRectangle, Color.White);
        }
    }
} 
```

显然，您可以将其扩展为更复杂（例如，使用您的计时器来选择何时移动帧等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:32:59.987

您可以停止动画，例如，在动画完成后从游戏中移除带有动画的对象。

否则，您可以`currentFrame`在动画完成时将 设置为非法值（例如 -1），然后进行测试。

```
public void Update(GameTime gametime)
{
    if (currentFrame >= 0)
    {
        timer += gametime.ElapsedGameTime.Milliseconds;
        if (timer >= msBetweenFrames)
        {
            timer = 0;
            currentFrame++;
            if (currentFramr >= numberOfFrames - 1)
                currentFrame = -1;
            rect.X = CurrentFrame * width;
            rect.Y = 0;
        }
    }
}

public void Render(SpriteBatch sb, Vector2 position, Color color)
{
    if (currentFrame >= 0)
        sb.Draw(aniTex, position, rect, color, 0, Vector2.Zero, 2.0f, SpriteEffects.None, 0);
} 
```

# c - 图的初始化和使用

> ID：15724613
> 
> 赞同：1
> 
> 时间：2013-03-30T23:23:26.920
> 
> 标签：c, data-structures, graph

我正在尝试实现一个图形来存储来自文本文件的数据列表，例如：

```
0,1 (node 0 links to 1)
0,2 (node 0 links to 2)
1,2 (node 1 links to 2)
2,1 (node 2 links to 1) 
```

无论如何，当涉及到定义结构时，我遇到了麻烦。我在使用矩阵或相邻列表之间犹豫不决，但我想我会使用列表，我只是不确定如何定义结构。我应该使用可变大小的数组、链表还是其他东西？哪种方式最简单？

```
struct grph{

};

struct node{

    //ID of the node
    int id;

}; 
```

其次，我如何将数据存储到这个图中，这是我遇到的最麻烦的地方。本质上，我认为它会像链表一样简单，您只需在末尾添加一个节点即可。这里的区别在于每个节点可以指向许多不同的节点或根本不指向。如何将图形结构与所有链接的节点结构链接？

例如，当使用链表时，我将如何存储上例中连接的节点 0？我知道您使用矩阵或列表/数组，但是由于缺乏 C 中此类实现的示例，我感到非常困惑。我发现的任何示例都使情况变得比以前更糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:48:31.943

回答您的第一个问题：邻接矩阵与邻接列表？如果您希望您的图形是密集的，即大多数节点与大多数其他节点相邻，那么选择矩阵，因为大多数操作在矩阵上要容易得多。如果你真的需要一个传递闭包，那么矩阵可能也更好，因为它们往往是密集的。否则邻接表会更快更小。

图表如下所示：

```
typedef struct node * node_p;
typedef struct edge * edge_p;

typedef struct edge
{       node_p  source, target;
        /* Add any data in the edges */
} edge;

typedef struct node
{       edge_p  * pred, * succ;
        node_p  next;
        /* Add any data in the nodes */
} node;

typedef struct graph
{       node_p  N;
} graph; 
```

的`N`字段将使用字段的链接`graph`列表来启动图形节点的链接列表。and可以是使用 and 分配给图中的后继和前驱边的数组（指向边和终止的*指针数组）。*尽管同时保留后继和前任似乎是多余的，但您会发现大多数图算法都喜欢能够双向行走。边缘点的and字段返回到节点。如果您不希望将数据存储在边缘中，那么您可以让和数组直接指向节点并忘记类型。`next``node``pred``succ``malloc``realloc`*`NULL``source``target``pred``succ``edge`*

 *不要尝试在中使用`realloc`on `N`，`graph`因为节点的所有地址都可能发生变化，并且这些地址在图表的其余部分中被大量使用。

PS：我个人更喜欢循环链表而不是`NULL`结束链表，因为大多数（如果不是全部）操作的代码要简单得多。在那种情况下`graph`将包含一个（虚拟）`node`而不是一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:35:51.640

这只是一个例子：

```
struct node{
        int id; 
        struct node **out;
        int num_out;
        /* optional: if you want doubly links */
        struct node **in;
        int num_in;
};

/* quick access to a node given an id */
struct node *node_list;

/* connect 'from' to 'to' */
void link(struct node *graph, int from, int to) {
        struct node *nfrom = &node_list[from], 
                    *nto   = &node_list[to];
        nfrom->num_out++;
        nfrom->out = realloc(nfrom->out, 
             sizeof(struct node*) * nfrom->num_out);
        nfrom->out[num_out-1] = nto;
        /* also do similar to nto->in if you want doubly links */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T02:31:45.460

你可以这样做：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct
{
  void* pElements;
  size_t ElementSize;
  size_t Count; // how many elements exist
  size_t TotalCount; // for how many elements space allocated
} tArray;

void ArrayInit(tArray* pArray, size_t ElementSize)
{
  pArray->pElements = NULL;
  pArray->ElementSize = ElementSize;
  pArray->TotalCount = pArray->Count = 0;
}

void ArrayDestroy(tArray* pArray)
{
  free(pArray->pElements);
  ArrayInit(pArray, 0);
}

int ArrayGrowByOne(tArray* pArray)
{
  if (pArray->Count == pArray->TotalCount) // used up all allocated space
  {
    size_t newTotalCount, newTotalSize;
    void* p;

    if (pArray->TotalCount == 0)
    {
      newTotalCount = 1;
    }
    else
    {
      newTotalCount = 2 * pArray->TotalCount; // double the allocated count
      if (newTotalCount / 2 != pArray->TotalCount) // count overflow
        return 0;
    }

    newTotalSize = newTotalCount * pArray->ElementSize;
    if (newTotalSize / pArray->ElementSize != newTotalCount) // size overflow
      return 0;

    p = realloc(pArray->pElements, newTotalSize);
    if (p == NULL) // out of memory
      return 0;

    pArray->pElements = p;
    pArray->TotalCount = newTotalCount;
  }

  pArray->Count++;
  return 1;
}

int ArrayInsertElement(tArray* pArray, size_t pos, void* pElement)
{
  if (pos > pArray->Count) // bad position
    return 0;

  if (!ArrayGrowByOne(pArray)) // couldn't grow
    return 0;

  if (pos < pArray->Count - 1)
    memmove((char*)pArray->pElements + (pos + 1) * pArray->ElementSize,
           (char*)pArray->pElements + pos * pArray->ElementSize,
           (pArray->Count - 1 - pos) * pArray->ElementSize);

  memcpy((char*)pArray->pElements + pos * pArray->ElementSize,
         pElement,
         pArray->ElementSize);

  return 1;
}

typedef struct
{
  int Id;

  int Data;

  tArray LinksTo; // links from this node to other nodes (array of Id's)
  tArray LinksFrom; // back links from other nodes to this node (array of Id's)
} tNode;

typedef struct
{
  tArray Nodes;
} tGraph;

void GraphInit(tGraph* pGraph)
{
  ArrayInit(&pGraph->Nodes, sizeof(tNode));
}

void GraphPrintNodes(tGraph* pGraph)
{
  size_t i, j;

  if (pGraph->Nodes.Count == 0)
  {
    printf("Empty graph.\n");
  }

  for (i = 0; i < pGraph->Nodes.Count; i++)
  {
    tNode* pNode = (tNode*)pGraph->Nodes.pElements + i;

    printf("Node %d:\n  Data: %d\n", pNode->Id, pNode->Data);

    if (pNode->LinksTo.Count)
    {
      printf("  Links to:\n");

      for (j = 0; j < pNode->LinksTo.Count; j++)
      {
        int* p = (int*)pNode->LinksTo.pElements + j;
        printf("    Node %d\n", *p);
      }
    }
  }
}

void GraphDestroy(tGraph* pGraph)
{
  size_t i;

  for (i = 0; i < pGraph->Nodes.Count; i++)
  {
    tNode* pNode = (tNode*)pGraph->Nodes.pElements + i;
    ArrayDestroy(&pNode->LinksTo);
    ArrayDestroy(&pNode->LinksFrom);
  }

  ArrayDestroy(&pGraph->Nodes);
}

int NodeIdComparator(const void* p1, const void* p2)
{
  const tNode* pa = p1;
  const tNode* pb = p2;

  if (pa->Id < pb->Id)
    return -1;
  if (pa->Id > pb->Id)
    return 1;
  return 0;
}

int IntComparator(const void* p1, const void* p2)
{
  const int* pa = p1;
  const int* pb = p2;

  if (*pa < *pb)
    return -1;
  if (*pa > *pb)
    return 1;
  return 0;
}

size_t GraphFindNodeIndexById(tGraph* pGraph, int Id)
{
  tNode* pNode = bsearch(&Id,
                         pGraph->Nodes.pElements,
                         pGraph->Nodes.Count,
                         pGraph->Nodes.ElementSize,
                         &NodeIdComparator);

  if (pNode == NULL)
    return (size_t)-1;

  return pNode - (tNode*)pGraph->Nodes.pElements;
}

int GraphInsertNode(tGraph* pGraph, int Id, int Data)
{
  size_t idx = GraphFindNodeIndexById(pGraph, Id);
  tNode node;

  if (idx != (size_t)-1) // node with this Id already exist
    return 0;

  node.Id = Id;
  node.Data = Data;
  ArrayInit(&node.LinksTo, sizeof(int));
  ArrayInit(&node.LinksFrom, sizeof(int));

  if (!ArrayInsertElement(&pGraph->Nodes, pGraph->Nodes.Count, &node))
    return 0;

  qsort(pGraph->Nodes.pElements,
        pGraph->Nodes.Count,
        pGraph->Nodes.ElementSize,
        &NodeIdComparator); // maintain order for binary search

  return 1;
}

int GraphLinkNodes(tGraph* pGraph, int IdFrom, int IdTo)
{
  size_t idxFrom = GraphFindNodeIndexById(pGraph, IdFrom);
  size_t idxTo = GraphFindNodeIndexById(pGraph, IdTo);
  tNode *pFrom, *pTo;

  if (idxFrom == (size_t)-1 || idxTo == (size_t)-1) // one or both nodes don't exist
    return 0;

  pFrom = (tNode*)pGraph->Nodes.pElements + idxFrom;
  pTo = (tNode*)pGraph->Nodes.pElements + idxTo;

  // link IdFrom -> IdTo
  if (bsearch(&IdTo,
              pFrom->LinksTo.pElements,
              pFrom->LinksTo.Count,
              pFrom->LinksTo.ElementSize,
              &IntComparator) == NULL) // IdFrom doesn't link to IdTo yet
  {
    if (!ArrayInsertElement(&pFrom->LinksTo, pFrom->LinksTo.Count, &IdTo))
      return 0;

    qsort(pFrom->LinksTo.pElements,
          pFrom->LinksTo.Count,
          pFrom->LinksTo.ElementSize,
          &IntComparator); // maintain order for binary search
  }

  // back link IdFrom <- IdTo
  if (bsearch(&IdFrom,
              pTo->LinksFrom.pElements,
              pTo->LinksFrom.Count,
              pTo->LinksFrom.ElementSize,
              &IntComparator) == NULL) // IdFrom doesn't link to IdTo yet
  {
    if (!ArrayInsertElement(&pTo->LinksFrom, pTo->LinksFrom.Count, &IdFrom))
      return 0;

    qsort(pTo->LinksFrom.pElements,
          pTo->LinksFrom.Count,
          pTo->LinksFrom.ElementSize,
          &IntComparator); // maintain order for binary search
  }

  return 1;
}

int main(void)
{
  tGraph g;

  printf("\nCreating empty graph...\n");
  GraphInit(&g);
  GraphPrintNodes(&g);

  printf("\nInserting nodes...\n");
  GraphInsertNode(&g, 0, 0);
  GraphInsertNode(&g, 1, 101);
  GraphInsertNode(&g, 2, 202);
  GraphPrintNodes(&g);

  printf("\nLinking nodes...\n");
  GraphLinkNodes(&g, 0, 1);
  GraphLinkNodes(&g, 0, 2);
  GraphLinkNodes(&g, 1, 2);
  GraphLinkNodes(&g, 2, 1);
  GraphPrintNodes(&g);

  printf("\nDestroying graph...\n");
  GraphDestroy(&g);
  GraphPrintNodes(&g);

  // repeat
  printf("\nLet's repeat...\n");

  printf("\nCreating empty graph...\n");
  GraphInit(&g);
  GraphPrintNodes(&g);

  printf("\nInserting nodes...\n");
  GraphInsertNode(&g, 1, 111);
  GraphInsertNode(&g, 2, 222);
  GraphInsertNode(&g, 3, 333);
  GraphPrintNodes(&g);

  printf("\nLinking nodes...\n");
  GraphLinkNodes(&g, 1, 2);
  GraphLinkNodes(&g, 2, 3);
  GraphLinkNodes(&g, 3, 1);
  GraphPrintNodes(&g);

  printf("\nDestroying graph...\n");
  GraphDestroy(&g);
  GraphPrintNodes(&g);

  return 0;
} 
```

输出（[ideone](http://ideone.com/3fD8BC)）：

```
Creating empty graph...
Empty graph.

Inserting nodes...
Node 0:
  Data: 0
Node 1:
  Data: 101
Node 2:
  Data: 202

Linking nodes...
Node 0:
  Data: 0
  Links to:
    Node 1
    Node 2
Node 1:
  Data: 101
  Links to:
    Node 2
Node 2:
  Data: 202
  Links to:
    Node 1

Destroying graph...
Empty graph.

Let's repeat...

Creating empty graph...
Empty graph.

Inserting nodes...
Node 1:
  Data: 111
Node 2:
  Data: 222
Node 3:
  Data: 333

Linking nodes...
Node 1:
  Data: 111
  Links to:
    Node 2
Node 2:
  Data: 222
  Links to:
    Node 3
Node 3:
  Data: 333
  Links to:
    Node 1

Destroying graph...
Empty graph. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T23:37:54.770

看起来很像我的工作社交网络......您可以单独定义节点和链接。在 c 语言中，您可以定义为：

```
struct graph_node{
    int id;
    struct node_following *following;
    struct graph_node *next_node;
}

struct node_following{
    int id;
    struct node_following *next_node;
} 
```

对于您的示例，结果是： root -> node0 -> node1 -> node2

root 的内容可能是：id = -1; 以下=空；下一个节点=节点0

node0 的内容可能是：id = 0; 下一个节点=节点1；following 指向 node_following 的列表：following -> {1, address of next node} -> {2, NULL}

node1 的内容可能是：id = 1; 下一个节点=节点2；following 指向 node_following 的列表为：following -> {2, NULL}

node2 的内容可能是：id = 2; 下一个节点=空；以下指向 node_following 的列表为：following -> {1, NULL}

本质上，这是一个关于如何存储二维矩阵的问题。如果矩阵稀疏，则使用链表。否则，位图是更好的解决方案。*

# jquery - 如果按下 CTRL 键，则 JQuery 拖动和移动但保留原来的？

> ID：15724617
> 
> 赞同：1
> 
> 时间：2013-03-30T23:23:37.737
> 
> 标签：jquery

我有以下 JQuery 代码可以拖放以更改 ul 项目订单（#list ul）。如果按下 CTRL 键、拖动和移动但保留原件，我该怎么做？

```
<script type="text/javascript">
$(document).ready(function(){
function slideout(){
setTimeout(function(){
$("#res").slideUp("slow", function () {
      });

}, 2000);}

    $("#res").hide();
    $(function() {
    $("#list ul").sortable({ opacity: 0.4, cursor: 'move', update: function() {

            var order = $(this).sortable("serialize") + '&update=update';
            $("#hload").fadeIn('fast');
            $.post("upd.php", order, function(theResponse){
                $("#res").html(theResponse);
                $("#res").slideDown('slow');
                $("#hload").fadeOut('fast');
                slideout();

            });
        }
        });
    });

});
</script> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:35:29.170

首先，在按下 Ctrl 键时设置一个变量。

```
var ctrlDown = false;
$(window).on("keydown", function(event) {
    if (event.which === 17) {
        ctrlDown = true;
    }
}).on("keyup", function(event) {
    ctrlDown = false;
}); 
```

然后，如果 ctrlDown 为真，则克隆您的项目。

```
$(".sortable").sortable({start: function( event, ui ) {
    if (ctrlDown) {
        $clone = ui.item.clone().insertBefore(ui.item);
        $clone.css({position:"static"});
    }
}}); 
```

这是[小提琴](http://jsfiddle.net/iGanja/jjhJT/2/)

在小提琴中，您需要在 keydown 和 keyup 事件起作用之前单击窗口。

**编辑**：我将保留原件以供后代使用，但是哇，这比最初通过简单地使用事件对象的 ctrlKey 属性来制作的要容易得多。

```
$(document).ready(function() {
    $(".sortable").sortable({start: function( event, ui ) {
        if (event.ctrlKey){
            $clone = ui.item.clone().insertBefore(ui.item);
            $clone.css({position:"static"});
        }
    }});
}); 
```

[新小提琴](http://jsfiddle.net/iGanja/jjhJT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T11:43:07.190

这是我想出的一个小提琴，它将在多个列表之间移动项目，但如果按下 Ctrl 则保留原始项目。

```
 $(".connectedSortable" ).sortable({
        connectWith: ".connectedSortable",
        placeholder: "ui-state-highlight",
        helper: function(e,li) {
              copyHelper= li.clone().insertAfter(li);
              return li.clone();
         },
        stop: function() {
              copyHelper && copyHelper.remove();
        },
        receive: function(event, ui) {
            if (event.ctrlKey){
                copyHelper= null;
            }
            var myOrder = {};
            $(".sortable ul").each(function() {
                var key = $(this).attr("data-name");
                myOrder[key] = [];
                $(this).find('li').each(function(){
                    myOrder[key].push($(this).attr("data-key"));
                });
            });
            var arr = JSON.stringify(myOrder);
            $('#field_mappings').val(arr);
        }
    }); 
```

[http://jsfiddle.net/n92e5e2r/10/](http://jsfiddle.net/n92e5e2r/10/)

# xcode - uitableview 在 indexpath 处抛出错误的访问错误对象

> ID：15724618
> 
> 赞同：0
> 
> 时间：2013-03-30T23:23:50.217
> 
> 标签：xcode, uitableview

我不断收到此错误：

2013-03-30 19:48:40.029 try[14838:907] -[__NSSetM objectAtIndex:]：无法识别的选择器发送到实例 0x1e8ea660 2013-03-30 19:48:40.030 try[14838:907] *** 由于应用程序终止uncaught exception 'NSInvalidArgumentException', reason: '-[__NSSetM objectAtIndex:]: unrecognized selector sent to instance 0x1e8ea660' *** First throw call stack: (0x33e523e7 0x3bb43963 0x33e55f31 0x33e5464d 0x33dac208 0xe5bc7 0x35cac569 0x35c91391 0x35ca8827 0x35c648c7 0x35a10513 0x35a100b5 0x35a10fd9 0x35a109c3 0x35a107d5 0x35a10639 0x33e27941 0x33e25c39 0x33e25f93 0x33d9923d 0x33d990c9 0x3797733b 0x35cb52b9 0x7b495 0x3bf70b20) libc++abi.dylib：终止调用抛出异常 (lldb)

// 这是我的代码：

```
- (void)fetchTweets
{

    UIApplication* app = [UIApplication sharedApplication];
    app.networkActivityIndicatorVisible = YES;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"***.json"]];

        NSError* error;

        tweets = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"showVideo";

    CustomVideoCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(!cell)
    {
        cell = [[CustomVideoCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    UIImageView *av = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 277, 58)];
    av.backgroundColor = [UIColor clearColor];
    av.opaque = NO;
    av.image = [UIImage imageNamed:@"cell_bg.png"];
    cell.backgroundView = av;

    UIImage *image = [UIImage   imageNamed:@"disclosure_arrow_white.png"];
    UIImageView *av2 = [[UIImageView alloc] initWithFrame:CGRectMake(44.0, 44.0, image.size.width, image.size.height)];
    av2.backgroundColor = [UIColor clearColor];
    av2.opaque = NO;
    av2.image = [UIImage imageNamed:@"disclosure_arrow_white.png"];
    cell.accessoryView = av2;

    NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];

    cell.title.text = [tweet objectForKey:@"title"];

    NSLog(@"t: %@",[tweet objectForKey:@"title"]);

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:16:34.603

You can try retaining `tweets` viz.

```
tweets = [[NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error] retain]; 
```

and later `release` it in `dealloc`. I guess its an auto released object getting assigned to it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:29:53.380

行后：

```
CustomVideoCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

您需要检查该单元格实际上是否具有值，如果没有则创建一个新单元格。

```
CustomVideoCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(!cell)
{
  cell = [[CustomVideoCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:Cellidentifier];
} 
```

祝你好运！

更新您的新错误：

JSONObjectWithData 产生的“tweets”变量是 NSDictionary，而不是 NSArray。由于 NSDictionary 没有实现 'objectAtIndex'，所以会抛出无法识别的选择器异常。通常，推文字典应该有一个包含推文数组的特定键，您应该将其分配给 fetchTweets 方法中的 'tweets' 变量。

If you're not sure about a lot of the stuff I am referring to, then I strongly recommend you use the Sensible TableView framework. The framework will be able to automatically fetch all the web service tweets for you and automatically display them on the table view. I personally always use it now, saves me a ton of manual labor.

# function - vim key sequence as function argument

> ID：15724620
> 
> 赞同：1
> 
> 时间：2013-03-30T23:23:57.637
> 
> 标签：function, vim

I want to execute the command `"yiw:s/\<<C-r>"\>/<C-r>"/g<Left><Left>"` by key sequence. So I make a mapping

```
 nnoremap <F7> yiw:s/\<<C-r>"\>/<C-r>"/g<Left><Left> 
```

This mapping copy the word under cursor, then the string :s/\<">/"/g" (where " are substituted by the copied word) appears in the command line and the cursor in the command line is at the end of replacement statement.

I also want to save cursor position before this command and restore after.

```
 function! SafeCommand(cmd)
let line = line('.')
let col = col('.')
// execute cmd here 
call cursor( line, col )
  endfunction 
```

How to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:13:07.363

Normally, you'd just put the entire (complex) command in a function, and invoke that function from the `:nnoremap`. But that doesn't work for incomplete commands, like the template `:substitute` that your mapping represents. For that, you need to include the save / restore parts into the command-line (though that's ugly):

```
:fun! Save()
    let s:line = line('.')
    let s:col = col('.')
:endfun
:fun! Restore()
    call cursor( s:line, s:col )
:endfun
:nnoremap <F7> yiw:call Save()<Bar>s/\<<C-r>"\>/<C-r>"/g<Bar>call Restore()<Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left> 
```

# sql-server - 从 SQLCMD 重命名 SQL Server 数据库

> ID：15724622
> 
> 赞同：2
> 
> 时间：2013-03-30T23:24:04.300
> 
> 标签：sql-server, database, sqlcmd

如何将`AdventureWorksLT2008`数据库重命名为同时重命名`AdventureWorksLT2008_old`其`.ldf`和`.mdf`文件？

我想从`sqlcmd`. 它是本地服务器。我想用`-E`选项来做。我确实尝试过谷歌搜索，但结果对我不起作用。任何人都可以建议一种尝试过的方法。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:33:20.673

a quick google search got [this](http://www.codeproject.com/Tips/345942/Rename-a-Database-and-its-MDF-and-LDF-files-in-SQL) as the top result. All you have to do is to everything from sqlcmd( I am assuming you know how to use sqlcmd..)

```
-- Replace all MyDBs with the name of the DB you want to change its name
USE [MyDB];
-- Changing Physical names and paths
-- Replace all NewMyDB with the new name you want to set for the DB
-- Replace 'C:\...\NewMyDB.mdf' with full path of new DB file to be used
ALTER DATABASE MyDB MODIFY FILE (NAME = ' MyDB ', FILENAME = 'C:\...\NewMyDB.mdf');
-- Replace 'C:\...\NewMyDB_log.ldf' with full path of new DB log file to be used
ALTER DATABASE MyDB MODIFY FILE (NAME = ' MyDB _log', FILENAME = 'C:\...\NewMyDB_log.ldf');
-- Changing logical names
ALTER DATABASE MyDB MODIFY FILE (NAME = MyDB, NEWNAME = NewMyDB);
ALTER DATABASE MyDB MODIFY FILE (NAME = MyDB _log, NEWNAME = NewMyDB_log); 
```

# cordova - Android 开发者工具：从 apk 构建中排除资产文件 (php)

> ID：15724626
> 
> 赞同：3
> 
> 时间：2013-03-30T23:24:28.880
> 
> 标签：cordova, build, apk, adt, assets

我有一个移动网站，我从中构建了一个适用于 android 的 phonegap 应用程序。

在`assets\www`我放置的网站文件中，还包含一些服务器端 PHP 脚本。

这很好用。我的问题是，如何在构建 apk 时排除 php 文件？

我已经尝试将其放入我的 中`build.xml`，但没有任何效果：

`<property name="aapt.ignore.assets" value="foo.php" />`

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T21:00:27.527

这会**从 .apk**构建中**排除**整个`./www/app`目录：

 **`<property name="aapt.ignore.assets" value="&lt;dir&gt;app:" />`

请参阅此链接了解更多信息：[https ://coderwall.com/p/ogxpdg](https://coderwall.com/p/ogxpdg)**

# bit-manipulation - 二进制补码中的位检查仅在小于零时使用减法和分支实现

> ID：15724629
> 
> 赞同：1
> 
> 时间：2013-03-30T23:24:39.857
> 
> 标签：bit-manipulation, subtraction

在二进制补码表示中，仅使用减法和“如果小于零则分支”我应该实现位检查。不允许直接的逻辑运算，除非它们是用这两条指令实现的。

因此，假设我有一个整数 x，例如`b(n-1) b(n-2) ... b(i) ... b(2) b(1) b(0)`其中 (i) 表示 n 位数的第 i 位。

我想找到一个数字 y 从 x 中减去给出结果：

*   xy >= 0 如果 b(i) = 1
*   xy < 0 如果 b(i) = 0

几天来我一直在敲我的头，最后我来到这里是为了获得一些想法/提示。

# sql-server - PowerShell 登录名和权限

> ID：15724635
> 
> 赞同：1
> 
> 时间：2013-03-30T23:25:55.930
> 
> 标签：sql-server, powershell, sql-agent-job, sql-agent

从 SQL Server 作业中的 PowerShell 任务调用时，PowerShell 以什么登录方式运行？显然我的“Google_foo”很弱，因为我找不到它，我不想只是假设它会作为与 SQL Server 代理关联的登录名运行。

我也想知道是否可以更改以及如何更改？

谢谢你的帮助，伙计们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T02:49:40.597

除非您将作业设置为在代理下运行，否则它将作为 SQL 代理帐户运行。

# javascript - 在指定元素的第一部分和最后一部分插入元素

> ID：15724636
> 
> 赞同：0
> 
> 时间：2013-03-30T23:25:59.233
> 
> 标签：javascript, jquery

我有这个代码。

```
<ul class="menu">
    <li class="current_page_item"><a href="http://localhost/wordpress/"     title="Home">Home</a></li>
    <li class="page_item page-item-8"><a href="http://localhost/wordpress/?page_id=8">About</a></li>
    <li class="page_item page-item-23"><a href="http://localhost/wordpress/?page_id=23">Contact</a></li>
    <li class="page_item page-item-7"><a href="http://localhost/wordpress/?page_id=7">Gallery</a></li>
</ul> 
```

我想要的是在ul（.menu）中插入一个span（）元素。我想把它放在第一个之前`li`和最后一个（.menu）`li`里面。`ul`所以预期的输出应该是这样的。

```
<ul class="menu">
    <span<> <!-- this is the inserted element -->
    <li class="current_page_item"><a href="http://localhost/wordpress/"     title="Home">Home</a></li>
    <li class="page_item page-item-8"><a href="http://localhost/wordpress/?page_id=8">About</a></li>
    <li class="page_item page-item-23"><a href="http://localhost/wordpress/?page_id=23">Contact</a></li>
    <li class="page_item page-item-7"><a href="http://localhost/wordpress/?page_id=7">Gallery</a></li>
    </span<> <!-- this is the inserted element -->
</ul> 
```

到目前为止我尝试过的是这个。

```
$(document).ready(function(){
    $('<span>').insertBefore('.menu li:first-child');
    $('</span>').insertBefore('.menu li:last-child');
}); 
```

我将不胜感激在这件事上的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:28:26.710

如果您真的喜欢这样做，这将起作用。

```
$(document).ready(function () {
    $('ul').wrapInner('<span />');
}); 
```

[http://jsfiddle.net/mG8yV/1](http://jsfiddle.net/mG8yV/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:40:16.773

在 ul 的开头添加一个新的 li。IE：

```
<li id="spanli"></li> 
```

然后在 jquery 中添加 span 元素：

```
$('#spanli').append("<span id='mynewspan'></span>"); 
```

工作示例：http: [//jsfiddle.net/ZDr5e/2/](http://jsfiddle.net/ZDr5e/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:17:17.077

将 span 元素插入到匹配元素集合 $('.menu') 中每个元素的开头。

```
$('.menu').prepend($('<span>')); 
```

将 span 元素插入到匹配元素集合 $('.menu') 中每个元素的末尾。

```
$('.menu').append($('<span>')); 
```

编辑：更多描述。

# php - 在灯箱中强制 PDF

> ID：15724639
> 
> 赞同：1
> 
> 时间：2013-03-30T23:26:40.260
> 
> 标签：php, javascript, pdf, popup, lightbox

我一直在使用 Bumpbox 在我的网站上以弹出式灯箱格式显示 PDF 文件。我已经使用它一年多了，从来没有遇到过任何问题，但最近它停止了工作。一个空的灯箱会弹出，PDF 会直接下载到我的硬盘上。

我使用 Firefox 并将其设置为自动下载大多数文件，包括 PDF。但是，我不相信这是以前的问题。由于使用了 Bumpbox，它会在弹出窗口中显示 PDF，并且仅从其他站点的直接链接下载它们。我将我的 PDF 设置更改为“在 Firefox 中预览”，现在它可以很好地加载到灯箱中。我不知道这是因为更新到最新版本的 FF 还是什么，考虑到自从上次工作以来我没有亲自更改任何内容。

我担心的是它是否正确显示（而不是下载并让用户在屏幕上留下一个空框）现在似乎取决于用户。有没有办法使用 Javascript 或 PHP 或任何东西来强制 PDF 文件在灯箱中打开（有效地覆盖浏览器设置）？因为如果我有多个页面应该在我的网站上阅读，而浏览它的人最终会在屏幕上看到一个空的灯箱，这看起来真的很不专业。

我最近开始用 Joomla 重做网站，所以我不知道这是否会导致问题，尽管我将早期版本（原始 CSS/HTML）移动到一个子目录中，整个网站的功能与往常一样，并且同样的问题那里也正在发生。所以我只是想知道这是否可能是较新的浏览器版本的问题。

放置在页面底部的代码是：

```
<script type="text/javascript" src="../bumpbox/js/mootools.js"></script>

<script type="text/javascript" src="../bumpbox/js/bumpbox-2.0.1.js"></script>

<script type="text/javascript"> doBump( '.bump',750, 500, '111', '000', '0.8', 5, 1 ,'333', 15,'000', 2,

                Fx.Transitions.Bounce.EaseOut,

                Fx.Transitions.Bounce.EaseOut,

                '',

                'top left',

                'repeat-x' );</script> 
```

链接本身写成：

```
<a href="filename.pdf" class="bump" rel="850-550"> 
```

关于强制 PDF 通过 Bumpbox 显示而不是根据用户设置可能被下载的任何建议？谢谢！

# html - 用于 IE9 的 Colorzilla

> ID：15724641
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:27:22.847
> 
> 标签：html, css, internet-explorer-9

嗨，我一直在尝试建立一个网站，并且对于我的菜单栏，我一直在使用 Colorzilla。它在 Chrome 和 Firefox 中运行良好，但在 IE9 中颜色不同。我意识到 Colorzilla 告诉我使用以下说明添加代码：

> 为所有具有渐变的元素添加一个“渐变”类，并将以下覆盖添加到您的 HTML 以完成对 IE9 的支持：

```
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]--> 
```

我对网页设计有点陌生，所以我不知道在哪里添加它。有人能帮我吗？我有一个带有以下代码的 main.css。

```
#top_menu{

font: bold 16px Verdana;
text-align: center;
height: 20%;
border: 1px solid black;
color: 000000;
box-pack:center;
border-radius:10px;
box-shadow: rgba(110,110,100, .4) 10px 10px 10px;
-webkit-box-pack:center;
-webkit-border-radius: 10px;
-webkit-box-shadow: rgba(110,110,110, .4) 10px 10px 10px ;
-webkit-box-align: stretch;
background: #b4e391; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2I0ZTM5MSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzYxYzQxOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNiNGUzOTEiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #b4e391 0%, #61c419 50%, #b4e391 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b4e391), color-stop(50%,#61c419), color-stop(100%,#b4e391)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #b4e391 0%,#61c419 50%,#b4e391 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #b4e391 0%,#61c419 50%,#b4e391 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #b4e391 0%,#61c419 50%,#b4e391 100%); /* IE10+ */
background: linear-gradient(to bottom,  #b4e391 0%,#61c419 50%,#b4e391 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b4e391', endColorstr='#b4e391',GradientType=0 ); /* IE6-8 */

} 
```

然后从我的 index.html 我有一个菜单如下：

```
 <!DOCTYPE html>
    <html lang="en">
        <meta  charset="UTF-8">
        <head>
            <title>Welcome</title>
            <link rel="stylesheet" href="main.css">
        </head>

        <body>
            <nav id="top_menu">

                <ul>
                    <li><a href="index.html">Home</a></
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact-us.html">Contact Us</a></li>
                </ul>
            </nav>
        </body>
    </html> 
```

如果有人可以帮助我指出该代码必须在哪里，我将不胜感激，因为我很困惑。我没有类我只有id，我不知道我是否必须把它放在main.css或index.html中。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:50:50.147

在后面添加 `<!DOCTYPE html>`：

```
<!--[if gte IE 9]>
  <style type="text/css">
    #top_menu {
       filter: none;
    }
  </style>
<![endif]--> 
```

# java - Upload file to S3

> ID：15724644
> 
> 赞同：1
> 
> 时间：2013-03-30T23:28:07.033
> 
> 标签：java, servlets, file-upload, amazon-web-services, amazon-s3

I'm trying to develop a file upload function on AWS.

I wrote a servlet to process post request, and the framework is shown below:

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    boolean isMulti = ServletFileUpload.isMultipartContent(request);
    if (isMulti) {
        ServletFileUpload upload = new ServletFileUpload();

        try {
            FileItemIterator iter = upload.getItemIterator(request);
            while (iter.hasNext()) {
                FileItemStream item = iter.next();
                InputStream inputStream = item.openStream();
                if (item.isFormField()) {

                } else {
                    String fileName = item.getName();
                    if (fileName != null && fileName.length() > 0) {

                        //read stream of file uploaded

                        //store as a temporary file

                        //upload the file to s3
                    }
                }
            }
        } catch (Exception e) {
        }
    }

    response.sendRedirect("location of the result page");
} 
```

I think these classes should be used to upload files. I tried but in S3, the size of the file is always 0 byte. Are there any other ways to upload file with multiple parts?

1.  InitiateMultipartUploadRequest
2.  InitiateMultipartUploadResult
3.  UploadPartRequest
4.  CompleteMultipartUploadRequest

I refer to the code [http://docs.aws.amazon.com/AmazonS3/latest/dev/llJavaUploadFile.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/llJavaUploadFile.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:20:35.120

I guess you are clubbing two things - one is getting the entire file to your app container (on the tomcat where your servlet is running) and the other is uploading the file to S3.

If you are able to achieve the first of the above tasks (you should have the file as a `java.io.File` object), the second task should be straightforward:

```
AmazonS3 s3 = new AmazonS3Client(awsCredentials);
s3.putObject(new PutObjectRequest(bucketName, key, fileObj)); 
```

This is S3's *simple* upload. S3 Multipartupload is where you divide the whole file into chunks and upload each chunk in parallel. S3 gives two ways to achieve a multipartupload.

*   [Low level](http://docs.aws.amazon.com/AmazonS3/latest/dev/mpListPartsJavaAPI.html) - where you take of chunking and uploading each part. This uses the classes you mentioned like `InitiateMultipartUploadRequest`
*   [High level](http://docs.aws.amazon.com/AmazonS3/latest/dev/HLuploadFileJava.html) - In this S3 abstracts the process of chunking/uploading etc. using a `TransferManager` class

# c++ - C++ include files confusion

> ID：15724646
> 
> 赞同：2
> 
> 时间：2013-03-30T23:28:23.133
> 
> 标签：c++, header, include, forward-declaration

I'm trying to include files in my c++ program but I keep encountering the error:

`ShapeVisitor.h:9:28: error: ‘Circle’ has not been declared`

I think the problem is that the way the classes are structured, it results in a circular dependence. How do I solve this?

The class headers are below...

```
 //Circle.h
 #ifndef CIRCLE_H
 #define CIRCLE_H
 // headers, ...
 #include "Shape.h"
class Circle: public Shape { 
//class declaration 
}
#endif

//Shape.h
#ifndef SHAPE_H
#define SHAPE_H
// headers, ...
#include <iostream>

class Shape {  
//a certain method in the class declaration looks like this
virtual void accept(ShapeVisitor& v) = 0; 
//rest of class
}
#endif

//ShapeVisitor.h
#ifndef SHAPEVISITOR_H
#define SHAPEVISITOR_H
#include "Circle.h"
class ShapeVisitor {
//a method in the class looks like this:
virtual void visitCircle(Circle *s) = 0;
//rest of class
}
#endif 
```

As you can see, circle includes shape, which includes shapevisitor, which again, includes circle.

Any ideas?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T23:30:13.923

ShapeVisitor.h does not need to include Circle.h, a forward declaration `class Circle;` will do. Function declarations do not require the full definitions of their argument and return types (not even if the return/arguments are by value!). Only the function's implementation file (in your case: ShapeVisitor.cpp) would need to include Circle.h.

This [ancient](http://www.gotw.ca/gotw/007.htm) (but still very true!) column by Herb Sutter is a nice reference.

# jsp - 在jsp中使用jstl和el找不到属性异常

> ID：15724654
> 
> 赞同：0
> 
> 时间：2013-03-30T23:29:05.937
> 
> 标签：jsp, jstl, el

嗨，我试图遍历会话中的对象列表。我再次使用 jstl 遍历会话中的每个对象。这是jsp代码

```
<c:forEach items="${sessionScope}" var="item">
    <b>${item.key}</b>
    <table border=1>
        <c:forEach items="${item.nodes}" var="node">

            <tr>
                <td>${node.link}</td>
                <td>${node.title}</td>
                <td>${node.description}</td>
            </tr>

        </c:forEach>
    </table>

</c:forEach> 
```

这是节点类

```
public class Nde {

    private String title;
    private String link;
    private String description;
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getLink() {
        return link;
    }
    public void setLink(String link) {
        this.link = link;
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }

} 
```

以及具有 Nde 类对象列表的 PersonalData 类。

```
public class PersonalData {
    private List<Nde> nodes;
    private static int count=0;
    private String s;

    public List<Nde> getNodes()  {
        return nodes;
    }

    public String getS() {
        return s;
    }

    public void setS(String s) {
        this.s = s;
    }

    public void setNodes(List<Nde> nodes) {
        this.nodes = nodes;
    }

    public PersonalData() {
        super();
        count++;
        nodes = new ArrayList<Nde>();

    }

    public static int getCount() {
        return count;
    }
} 
```

在遍历项目时，我收到以下异常

```
che.jasper.el.JspPropertyNotFoundException: /WEB-INF/views/display.jsp(17,0) '${item.nodes}' Property 'nodes' not found on type javax.servlet.jsp.el.ImplicitObjectELResolver$ScopeMap$ScopeEntry
org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:109)
org.apache.jsp.WEB_002dINF.views.display_jsp._jspx_meth_c_005fforEach_005f1(display_jsp.java:155)
org.apache.jsp.WEB_002dINF.views.display_jsp._jspx_meth_c_005fforEach_005f0(display_jsp.java:122)
org.apache.jsp.WEB_002dINF.views.display_jsp._jspService(display_jsp.java:78)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

为什么找不到节点属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:32:28.337

尝试使用

```
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<c:forEach items="${sessionScope}" var="item">
<c:if test="${fn:startsWith(item.key,'myData')}" >
    <b>${item.key}</b>
    <table border=1>
       <c:forEach items="${item.value.nodes}" var="node">
            <tr>
                <td>${node.link}</td>
                <td>${node.title}</td>
                <td>${node.description}</td>
            </tr>
        </c:forEach>
    </table>
</c:if>
</c:forEach> 
```

# python - 在 Python 中使用图形对话框询问用户密码的最简单方法？

> ID：15724658
> 
> 赞同：8
> 
> 时间：2013-03-30T23:29:58.980
> 
> 标签：python, python-2.7, passwords

我正在开发一个将在后台静默运行的备份守护进程。守护进程依赖于`duplicity`备份软件，备份时需要加密密钥。我不能通过控制台询问密码，因为很明显，守护进程无权访问。

我怎样才能轻松地创建一个提示，要求用户输入密码，并将其返回给应用程序（通过 Python 变量）？我正在使用**Python 2.7**。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-12-16T22:01:21.770

因为您要求*最简单*的（Python 2.7）：

```
import Tkinter, tkSimpleDialog
tkSimpleDialog.askstring("Password", "Enter password:", show='*') 
```

对于 Python 3.3：

```
import tkinter
tkinter.simpledialog.askstring("Password", "Enter password:", show='*') 
```

对于 Python 3.6+：

```
import tkinter as tk
import tkinter.simpledialog
tk.Tk().withdraw()
tkinter.simpledialog.askstring("Password", "Enter password:", show='*') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T23:43:04.240

```
from Tkinter import *

def getpwd():
    password = ''
    root = Tk()
    pwdbox = Entry(root, show = '*')
    def onpwdentry(evt):
         password = pwdbox.get()
         root.destroy()
    def onokclick():
         password = pwdbox.get()
         root.destroy()
    Label(root, text = 'Password').pack(side = 'top')

    pwdbox.pack(side = 'top')
    pwdbox.bind('<Return>', onpwdentry)
    Button(root, command=onokclick, text = 'OK').pack(side = 'top')

    root.mainloop()
    return password 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-16T13:31:47.720

因为不是每个人都想使用 TK，所以这里有一个使用 PyQt 的脚本：

```
from PyQt5.QtWidgets import QApplication, QInputDialog, QLineEdit
import sys
app = QApplication(sys.argv)
qd = QInputDialog()
qd.setTextEchoMode(QLineEdit.Password)
qd.show()
app.exec() 
```

而且，因为您通常不会仅仅为了它而向用户询问密码：

```
#!/bin/env python3
#passwordPrompt.py

from PyQt5.QtWidgets import QApplication, QInputDialog
import sys, time

def succFunc():
  sys.stdout.write(qd.textValue())
  sys.stdout.flush()
  exit(0)

def failFunc():
  exit(1)

app = QApplication(sys.argv)
qd = QInputDialog()
#QLineEdit.Password
qd.setTextEchoMode(2)
qd.rejected.connect(failFunc)
qd.accepted.connect(succFunc)
qd.show()
app.exec() 
```

以及相应的bash函数：

```
#!/bin/bash

passwordPrompt.py | tee 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-08T04:41:53.023

解决了@pycoder112358 帖子的范围问题：

```
from tkinter import *

PASSWORD = ''

def get_passwd():
    global PASSWORD
    root = Tk()
    pwdbox = Entry(root, show = '*')

    def onpwdentry(evt):
        global PASSWORD 
        PASSWORD = pwdbox.get()
        root.destroy()
    def onokclick():     
        global PASSWORD
        PASSWORD = pwdbox.get()
        root.destroy()

    Label(root, text = 'Password').pack(side = 'top')

    pwdbox.pack(side = 'top')
    pwdbox.bind('<Return>', onpwdentry)
    Button(root, command=onokclick, text = 'OK').pack(side = 'top')

    root.mainloop()
    return PASSWORD 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-15T02:46:17.747

用一些最少的家务来扩展 Diego 的答案（没有这个，我在尝试使用他精美的简短示例时遇到了大量的崩溃）：

```
import Tkinter, tkSimpleDialog 
root = Tkinter.Tk() # dialog needs a root window, or will create an "ugly" one for you
root.withdraw() # hide the root window
password = tkSimpleDialog.askstring("Password", "Enter password:", show='*', parent=root)
root.destroy() # clean up after yourself! 
```

这将适用于其他只是终端/控制台应用程序的程序。

# ruby-on-rails - Rails - has_many :through and adding existing records from one model to another

> ID：15724663
> 
> 赞同：0
> 
> 时间：2013-03-30T23:30:28.223
> 
> 标签：ruby-on-rails, checkbox, has-many-through

I am building an application for test case management system. I have testcases and testruns. I am joining these 2 tables through assocation model called testresults.

```
class Testcase < ActiveRecord::Base
  has_many :testresults
  has_many :testruns, :through => :testresults

class Testrun < ActiveRecord::Base
  has_many :testresults
  has_many :testcases, :through => :testresults

class Testresult < ActiveRecord::Base
  belongs_to :testrun
  belongs_to :testcase 
```

There is a fixed set of testcases already existing. Everytime I create a new testrun, I want to select a number of existing testcases and add to the new testrun.

I am not sure about the following things. If you could please give me some pointers about what approach should I take and what methods/functions/helpers should I use, I will be grateful. I have wasted more than a day on it going through different posts but not able to see things clearly.

1.  View - How to populate the existing testcases with checkboxes in front of them. Do I use options_from_collection_for_select? But how do i get checkboxes
2.  Do I use testrun model or the assocation model i.e. testresult. I am confused about where to show the added testcases - on the testrun page or testresult page.
3.  Do we create views, and use controllers for the assocaition model as well?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:15:18.727

You can: 1\. You can use checkboxes (with check_box_tag) or select with multiple options. 2\. You can pass the checkboxes in a different hash in the form 3\. Get the data of the checkboxes, loop through the data and create the Testresult

The best way is using a has_and_belongs_to_many association, check this video from RailsCasts [http://railscasts.com/episodes/17-habtm-checkboxes](http://railscasts.com/episodes/17-habtm-checkboxes) it is a little old but it works, and if you want a newer video check this out [http://railscasts.com/episodes/17-habtm-checkboxes-revised](http://railscasts.com/episodes/17-habtm-checkboxes-revised)

You should also check [http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

# html - Alignment of a list-style-image

> ID：15724670
> 
> 赞同：0
> 
> 时间：2013-03-30T23:30:52.117
> 
> 标签：html, css, html-lists, background-image

I'm wondering if there's a way to determine the horizontal and vertical alignment of the `list-style-image`?

Because at the moment, it looks something like this :

_ LIST TEXT

and I would like it to be like this

– List Text

Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:16:05.260

You can try a couple of approaches, for example:

```
<h3>Using a list-style-image</h3>
<ul class="basic">
    <li>Hello!</li>
    <li>Good-Bye!</li>
    <li>See you later!</li>
</ul> 

<h3>Using a Background Image on li</h3>
<ul class="bg-img">
    <li>Hello!</li>
    <li>Good-Bye!</li>
    <li>See you later!</li>
</ul> 
```

and look at the following CSS:

```
ul.basic {
    list-style: none;
    list-style-image: url(http://placehold.it/20x20);
    margin: 0 0 0 0;
}
ul.basic li {
    margin: 1.00em 0 0 0;
    padding: 0 0 0 0;
}

ul.bg-img {
    list-style: none;
    margin: 0 0 0 0;
}
ul.bg-img li {
    background-image: url(http://placehold.it/20x5);
    background-repeat: no-repeat; 
    background-position: left center;
    margin: 1.00em 0 0 -30px;
    padding: 0 0 0 30px;
} 
```

In the first case, you can make the list image a 20x20 px square for example and embed the hyphen in the center of the image. However, if the font size changes, you won't maintain the vertical centering since the list image is pinned to the base line of the `li` element.

In the second example, turn off the list style and place a background image on the `li` element. Again, embed the hyphen in an image, and position it left and center. This approach gives you some control over the position of the hyphen motif by adjusting the left margin and padding of the `li` element, and the `background-position` property.

For reference, look at: [http://jsfiddle.net/audetwebdesign/JKZLe/](http://jsfiddle.net/audetwebdesign/JKZLe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:50:27.300

This is controlled in webkit and mozilla, respectively, but the `-webkit-padding-start` and `-moz-padding-start` rules on `<ul>` and `<ol>` elements. It can be overridden by `padding-left` (this will work in IE as well).

```
ul {
    padding-left: 40px;
} 
```

# python - 使用 WSGI 时 Gunicorn 失败

> ID：15724672
> 
> 赞同：0
> 
> 时间：2013-03-30T23:30:59.087
> 
> 标签：python, python-2.7, wsgi, gunicorn, tilestache

我希望 Gunicorn 通过 WSGI 与 TileStache 交谈。但是当我运行这个命令时......

```
gunicorn "TileStache:WSGITileServer('/var/osm/bright/project/OSMBright4/tilestache.cfg')" 
```

...我收到这些错误：

```
2013-03-30 23:02:41 [14300] [INFO] Starting gunicorn 0.17.2
2013-03-30 23:02:41 [14300] [INFO] Listening at: http://127.0.0.1:8000 (14300)
2013-03-30 23:02:41 [14300] [INFO] Using worker: sync
2013-03-30 23:02:41 [14305] [INFO] Booting worker with pid: 14305
Error loading Tilestache config:
2013-03-30 23:02:41 [14305] [ERROR] Exception in worker process:
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py", line 103, in wsgi
    self.callable = self.load()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/wsgiapp.py", line 25, in load
    return util.import_app(self.app_uri)
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/util.py", line 381, in import_app
    app = eval(obj, mod.__dict__)
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/TileStache/__init__.py", line 373, in __init__
    self.config = parseConfigfile(config)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/__init__.py", line 166, in parseConfigfile
    return Config.buildConfiguration(config_dict, dirpath)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/Config.py", line 217, in buildConfiguration
    config.layers[name] = _parseConfigfileLayer(layer_dict, config, dirpath)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/Config.py", line 441, in _parseConfigfileLayer
    layer.provider = _class(layer, **provider_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/Mapnik.py", line 81, in __init__
    engine = mapnik.FontEngine.instance()
NameError: global name 'mapnik' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py", line 103, in wsgi
    self.callable = self.load()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/wsgiapp.py", line 25, in load
    return util.import_app(self.app_uri)
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/util.py", line 381, in import_app
    app = eval(obj, mod.__dict__)
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/TileStache/__init__.py", line 373, in __init__
    self.config = parseConfigfile(config)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/__init__.py", line 166, in parseConfigfile
    return Config.buildConfiguration(config_dict, dirpath)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/Config.py", line 217, in buildConfiguration
    config.layers[name] = _parseConfigfileLayer(layer_dict, config, dirpath)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/Config.py", line 441, in _parseConfigfileLayer
    layer.provider = _class(layer, **provider_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/TileStache/Mapnik.py", line 81, in __init__
    engine = mapnik.FontEngine.instance()
NameError: global name 'mapnik' is not defined
2013-03-30 23:02:41 [14305] [INFO] Worker exiting (pid: 14305)
2013-03-30 23:02:41 [14300] [INFO] Shutting down: Master
2013-03-30 23:02:41 [14300] [INFO] Reason: Worker failed to boot. 
```

有谁知道这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:32:28.897

你有安装 python-mapnik 吗？该错误似乎出现在 TileStache 和 mapnik 的配置中，而不是 gunicorn 或 WSGI 中。如果您查看 TileStache/Mapknik.py（我在这里查看：[https](https://github.com/migurski/TileStache/blob/master/TileStache/Mapnik.py) ://github.com/migurski/TileStache/blob/master/TileStache/Mapnik.py ），您会看到 mapnik 的初始导入传递了错误：

```
try:
    import mapnik
except ImportError:
    # can still build documentation
    pass 
```

但是当mapnik预计在那里时，这将导致第81行出现问题。因此，请确保您 apt-get install python-mapnik 或确保 mapnik 在您的 Python 路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:55:47.733

**问题解决了。**

正如 Karmel 所提到的，问题在于 Mapnik 和 TileStache，而不是 Gunicorn。

After some research I found out that there has been [changes of the python module name](https://github.com/mapnik/mapnik/wiki/Mapnik2) through the different versions; it was `mapnik` until version 2.0 when it changed to `mapnik2`, and then back to `mapnik` again at version 2.1\. And obviously it appeared that I had installed version 2.0.

I suppose I just could have changed to `import mapnik2` in `TileStache/mapnik.py`, but I thought it would be more future friendly to uninstall Mapnik and then [build it from source](https://github.com/mapnik/mapnik/blob/master/INSTALL.md#building) instead. It took a while, but definitely worth it.

A big thanks to [Karmel](https://stackoverflow.com/users/1284636) for putting me at the right track!

# java - `someObject.new` 在 Java 中做了什么？

> ID：15724676
> 
> 赞同：100
> 
> 时间：2013-03-30T23:31:30.247
> 
> 标签：java

在Java中，我刚刚发现以下代码是合法的：

```
KnockKnockServer newServer = new KnockKnockServer();                    
KnockKnockServer.receiver receive = newServer.new receiver(clientSocket); 
```

仅供参考，receiver 只是一个具有以下签名的辅助类：

```
public class receiver extends Thread {  /* code_inside */  } 
```

我以前从未见过这种`XYZ.new`符号。这是如何运作的？有什么方法可以更传统地编码吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-30T23:32:56.773

这是从包含类主体外部实例化非静态内部类的方法，如[Oracle 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)中所述。

每个内部类实例都与其包含类的一个实例相关联。当您从其包含类中`new`创建一个内部类时，*它*`this`默认使用容器的实例：

```
public class Foo {
  int val;
  public Foo(int v) { val = v; }

  class Bar {
    public void printVal() {
      // this is the val belonging to our containing instance
      System.out.println(val);
    }
  }

  public Bar createBar() {
    return new Bar(); // equivalent of this.new Bar()
  }
} 
```

但是，如果您想在 Foo 之外创建 Bar 的实例，或者将新实例与包含实例相关联，`this`那么您必须使用前缀表示法。

```
Foo f = new Foo(5);
Foo.Bar b = f.new Bar();
b.printVal(); // prints 5 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-02T08:54:12.870

看看这个例子：

```
public class Test {

    class TestInner{

    }

    public TestInner method(){
        return new TestInner();
    }

    public static void main(String[] args) throws Exception{
        Test t = new Test();
        Test.TestInner ti = t.new TestInner();
    }
} 
```

使用 javap 我们可以查看为此代码生成的指令

主要方法：

```
public static void main(java.lang.String[])   throws java.lang.Exception;
  Code:
   0:   new     #2; //class Test
   3:   dup
   4:   invokespecial   #3; //Method "<init>":()V
   7:   astore_1
   8:   new     #4; //class Test$TestInner
   11:  dup
   12:  aload_1
   13:  dup
   14:  invokevirtual   #5; //Method java/lang/Object.getClass:()Ljava/lang/Class;
   17:  pop
   18:  invokespecial   #6; //Method Test$TestInner."<init>":(LTest;)V
   21:  astore_2
   22:  return
} 
```

内部类构造函数：

```
Test$TestInner(Test);
  Code:
   0:   aload_0
   1:   aload_1
   2:   putfield        #1; //Field this$0:LTest;
   5:   aload_0
   6:   invokespecial   #2; //Method java/lang/Object."<init>":()V
   9:   return

} 
```

一切都很简单——在调用 TestInner 构造函数时，java 将 Test 实例作为第一个参数**main:12**传递。不看那个 TestInner 应该有一个无参数的构造函数。反过来，TestInner 只是保存对父对象**Test$TestInner:2**的引用。当您从实例方法调用内部类构造函数时，对父对象的引用会自动传递，因此您不必指定它。实际上它每次都通过，但是从外部调用时应该显式传递。

`t.new TestInner();`- 只是为 TestInner 构造函数指定第一个隐藏参数的一种方法，而不是类型

*方法（）*等于：

```
public TestInner method(){
    return this.new TestInner();
} 
```

*TestInner*等于：

```
class TestInner{
    private Test this$0;

    TestInner(Test parent){
        this.this$0 = parent;
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-11T00:33:50.880

在 Java 1.1 版本中将内部类添加到 Java 时，它们最初被定义为对 1.0 兼容代码的转换。如果您看一下这种转换的示例，我认为它会使内部类的实际工作方式更加清晰。

考虑 Ian Roberts 的回答中的代码：

```
public class Foo {
  int val;
  public Foo(int v) { val = v; }

  class Bar {
    public void printVal() {
      System.out.println(val);
    }
  }

  public Bar createBar() {
    return new Bar();
  }
} 
```

当转换为 1.0 兼容代码时，该内部类`Bar`将变为如下所示：

```
class Foo$Bar {
  private Foo this$0;

  Foo$Bar(Foo outerThis) {
    this.this$0 = outerThis;
  }

  public void printVal() {
    System.out.println(this$0.val);
  }
} 
```

内部类名称以外部类名称为前缀，以使其唯一。添加了一个隐藏的私有`this$0`成员，其中包含外部的副本`this`。并创建一个隐藏的构造函数来初始化该成员。

如果你看一下这个`createBar`方法，它会变成这样的：

```
public Foo$Bar createBar() {
  return new Foo$Bar(this);
} 
```

那么让我们看看执行以下代码时会发生什么。

```
Foo f = new Foo(5);
Foo.Bar b = f.createBar();                               
b.printVal(); 
```

首先，我们实例化一个实例`Foo`并将`val`成员初始化为 5（即`f.val = 5`）。

接下来我们调用`f.createBar()`，它实例化 的实例`Foo$Bar`并将成员初始化为从(ie )传入`this$0`的值。`this``createBar``b.this$0 = f`

最后我们调用`b.printVal()`which 尝试打印`b.this$0.val`which is `f.val`which is 5。

现在这是内部类的常规实例化。让我们看看`Bar`从外部实例化时会发生什么`Foo`。

```
Foo f = new Foo(5);
Foo.Bar b = f.new Bar();
b.printVal(); 
```

再次应用我们的 1.0 转换，第二行将变成这样：

```
Foo$Bar b = new Foo$Bar(f); 
```

这几乎与`f.createBar()`调用相同。我们再次实例化一个实例`Foo$Bar`并将`this$0`成员初始化为 f。再说一次，`b.this$0 = f`。

再一次，当你打电话时`b.printVal()`，你正在打印`b.thi$0.val`哪个`f.val`是 5。

要记住的关键是内部类有一个隐藏成员`this`，其中包含外部类的副本。当您从外部类中实例化一个内部类时，它会隐式地使用当前值初始化`this`。当您从外部类外部实例化内部类时，您可以通过`new`关键字的前缀明确指定要使用的外部类的哪个实例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-30T23:57:32.843

将`new receiver`其视为单个令牌。有点像一个带有空格的函数名。

当然，该类`KnockKnockServer`实际上并没有一个名为 的函数`new receiver`，但我猜测语法是为了暗示这一点。这意味着您正在调用一个函数，该函数创建一个新实例，该实例`KnockKnockServer.receiver`使用特定实例`KnockKnockServer`来访问封闭类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-16T10:53:46.867

**阴影**

If a declaration of a type (such as a member variable or a parameter name) in a particular scope (such as an inner class or a method definition) has the same name as another declaration in the enclosing scope, then the declaration shadows the declaration of the enclosing scope. You cannot refer to a shadowed declaration by its name alone. The following example, ShadowTest, demonstrates this:

```
public class ShadowTest {

    public int x = 0;

    class FirstLevel {

        public int x = 1;

        void methodInFirstLevel(int x) {
            System.out.println("x = " + x);
            System.out.println("this.x = " + this.x);
            System.out.println("ShadowTest.this.x = " + ShadowTest.this.x);
        }
    }

    public static void main(String... args) {
        ShadowTest st = new ShadowTest();
        ShadowTest.FirstLevel fl = st.new FirstLevel();
        fl.methodInFirstLevel(23);
    }
} 
```

**The following is the output of this example:**

```
x = 23
this.x = 1
ShadowTest.this.x = 0 
```

This example defines three variables named x: The member variable of the class ShadowTest, the member variable of the inner class FirstLevel, and the parameter in the method methodInFirstLevel. The variable x defined as a parameter of the method methodInFirstLevel shadows the variable of the inner class FirstLevel. Consequently, when you use the variable x in the method methodInFirstLevel, it refers to the method parameter. To refer to the member variable of the inner class FirstLevel, use the keyword this to represent the enclosing scope:

```
System.out.println("this.x = " + this.x); 
```

Refer to member variables that enclose larger scopes by the class name to which they belong. For example, the following statement accesses the member variable of the class ShadowTest from the method methodInFirstLevel:

```
System.out.println("ShadowTest.this.x = " + ShadowTest.this.x); 
```

[Refer to the docs](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

# terminal - 无法从终端复制制表符

> ID：15724677
> 
> 赞同：14
> 
> 时间：2013-03-30T23:31:34.503
> 
> 标签：terminal

我正在编写一个小程序，以制表符分隔格式将其输出打印到终端。但是每当我选择带有标签的文本并复制它时，标签就会被一些空格替换。

尝试复制时，我该怎么做才能使终端不将制表符替换为空格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-08-18T10:37:28.167

在 macOS Sierra（可能也在早期版本中）上，您可以执行以下操作：

```
Edit -> Copy Special -> Copy Plain Text 
```

或者使用快捷方式： `alt`+ `shift`+ `⌘ cmd`+`C`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-13T00:29:19.030

Your best bet may be to substitute "\t" in place of tabs in your output, and do a search and replace after you copy and paste it to the destination. You could use any character or string as the substitute, of course, but using "\t" makes it easy to restore the tabs using *echo -e* if pasting to a command-line environment. The substitution can be done using: `|sed 's/\\/\\\\\\/g;s/\t/\\t/g'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T20:00:51.693

我可以在我的 mac 终端上做到这一点。这里有一些很好的测试：

`printf '>\t<\n'`: 有效（作为标签复制到 sublime 中；选择它只能让我选择完整的标签而不是单个空格）

`printf '>\t<\n' | less`: 失败

`printf '>\t<\n' | more`: 失败

`printf '>\t<\n' | less | cat`：有效（较少检测到输出是文件/管道而不是终端，因此未应用终端设置）

`printf '>\t<\n' | less | cat -vet`: 输出 ">^I<$" （较少检测管道输出，因此未应用终端设置）

`printf '>\t<\n' | vi -`: 失败，但是当我在 vi 中移动时，它会在 1 次按键中跳过选项卡，因此它知道它是一个选项卡

`reset`: 从现在开始，总是失败

`stty -tabs`: 从现在开始，总是失败

`stty tabs`: 修复`reset`/`stty -tabs`问题，现在它可以再次工作了

一个人`less`通过更改源来工作：[https ://unix.stackexchange.com/questions/412060/how-to-get-less-to-show-tabs-as-tabs](https://unix.stackexchange.com/questions/412060/how-to-get-less-to-show-tabs-as-tabs)

不太相关的选项：'-U' 将标签显示为 '^I'，'-x4' 设置标签大小

**对于`git diff`：**

`git diff | head -40`: 有效（使用标签复制到 sublime 中）

`git diff | cat`: 有效

`git diff | less`: 失败（较少应用终端设置）

`git diff`: 失败（我的 git 寻呼机少了）

# css - 创建等腰梯形

> ID：15724678
> 
> 赞同：1
> 
> 时间：2013-03-30T23:31:45.480
> 
> 标签：css, shape, css-shapes

我想知道我是否可以用 CSS 产生类似的东西：

![在此处输入图像描述](../Images/3120035e11236572f4b3e8eee32d628e.png)

我也想知道，这是提出这样一个问题的正确地方吗？我没有尝试过任何代码，我用 Photoshop 完成了棕色图像。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-14T13:15:08.840

这种形状（[等腰梯形](http://en.wikipedia.org/wiki/Isosceles_trapezoid)）可以很容易地使用 CSS3 通过旋转 a[来](https://developer.mozilla.org/en-US/docs/Web/CSS/perspective)`div`制作。

**解释**

1.  该形状是通过`.container:after`沿 x 轴以透视旋转绝对定位的伪元素 ( ) 来实现的。
2.  我们没有旋转实际的容器`div`，因为它会导致其中的链接（和任何其他）文本也被旋转。
3.  顶部边框和插入框阴影用于完全模仿图中所示的形状。顶部边框产生顶部阴影较浅的线条，嵌入阴影产生形状周围的深色边缘。
4.  由于较低版本的 IE 不支持旋转转换，因此形状不会出现在 IE < 9 中。但是，它会优雅地降级为 IE 8 和 9 中的矩形框。
5.  IE 7 不支持伪元素，因此即使是框也不会出现，但链接会按原样显示。但是，可以通过添加条件 CSS（向容器添加背景和阴影`div`）以仅针对 IE 7 来实现与 IE 8/9 中相同的行为。

```
body {
  font-family: Calibri;
  background: #5F4014;
}
.container {
  position: relative;
  width: 90%;
  text-align: center;
  margin: 50px 5px;
}
.container:after {
  position: absolute;
  content: '\00a0';
  width: 100%;
  left: 10px;
  top: 0px;
  padding: 10px;
  background: #4F0D00;
  box-shadow: inset 0px 0px 10px 2px #340800;
  border-top: 1px solid #715E49;
  -webkit-transform: perspective(25px) rotateX(-3deg);
  -moz-transform: perspective(25px) rotateX(-3deg);
  transform: perspective(25px) rotateX(-3deg);
}
a {
  position: relative;
  display: inline-block;
  color: white;
  text-decoration: none;
  width: 100px;
  text-align: center;
  padding: 10px;
  z-index: 2;
}
a:hover {
  color: gold;
}
a:active {
  color: #ff6767;
}
```

```
<div class='container'>
  <a href='#'>Link 1</a>
  <a href='#'>Link 2</a>
  <a href='#'>Link 3</a>
  <a href='#'>Link 4</a>
</div>
```

**屏幕截图**- 来自支持转换的浏览器

![在此处输入图像描述](../Images/138a0b994acf6d61e30f8366e83b75c6.png)

**屏幕截图**- 来自不支持转换的浏览器（IE 8 和 9）

![在此处输入图像描述](../Images/67e1aa43da8b548fb1ef38ff470124ff.png)

[**小提琴演示**](http://jsfiddle.net/hari_shanx/m0x5m23j/)| [**JS Bin Demo**](http://jsbin.com/xiberenese/1/) - 检入 JSFiddle 不支持的 IE < 9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:49:13.157

是的你可以 ！有几种方法，但您必须使用 CSS3，旧浏览器（例如旧 IE 版本）不支持！（我认为适用于 ie9+）。

你可以在这里看到一个很好的教程：

[http://coursesweb.net/css/polygons-css_cs](http://coursesweb.net/css/polygons-css_cs)

（一种使用 CSS3 整形的方法）

或者你可以使用这种代码：

```
<div class="left-corner"></div>
<div class="center>
    <nav>
         <ul>
              <li><a href="blabla.html">First link</a></li>
              <li><a href="blabla.html">Second Link</a></li>
         </ul>
    </nav>
</div>
<div class="right-corner"></div> 
```

并使用本教程做一个三角形左右做角

[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

（像这样）

```
 #         ->  ######################   ->   # 
    # #         ->  #                    #   ->   #  #
  #   #         ->  #                    #   ->   #    #
 ######         ->  ######################   ->   #######   
.Left-corner    ->  .center                  ->  .right-corner 
```

如果这样做，请确保不要在右侧或左侧的 .center 上放置任何边框，并为每个 div 放置相同的背景颜色。我相信这种方法对可访问性更好！

# indexing - InnoDB: UNIQUE IF NOT NULL

> ID：15724680
> 
> 赞同：1
> 
> 时间：2013-03-30T23:32:09.620
> 
> 标签：indexing, innodb, unique

Does InnoDB support a "UNIQUE IF NOT NULL" index? I.e. a UNIQUE index which allows multiple NULL values?

(I guess no since I wasn't able to find anything about that — found a lot of *kinda-related* things but not a definitive answer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:34:05.390

In InnoDB unique secondary indexes support multiple NULLs (primary indexes don't support NULL at all). For example:

```
mysql> create table x (i int, j int, primary key (i), unique key (j));
mysql> insert into x (i,j) values (NULL,NULL);
ERROR 1048 (23000): Column 'i' cannot be null
mysql> insert into x (i,j) values (1,NULL);
mysql> insert into x (i,j) values (2,NULL);
mysql> insert into x (i,j) values (3,3);
mysql> select * from x;
+---+------+
| i | j    |
+---+------+
| 1 | NULL |
| 2 | NULL |
| 3 |    3 |
+---+------+
3 rows in set (0.01 sec)

mysql> insert into x (i,j) values (4,3);
ERROR 1062 (23000): Duplicate entry '3' for key 'j' 
```

# file - 在特定表达式后从 txt 文件读取到矩阵

> ID：15724689
> 
> 赞同：0
> 
> 时间：2013-03-30T23:33:06.647
> 
> 标签：file, matlab

我想通过 matlab 在特定表达式和一些不需要的行之后从 txt 文件中读取数据表，例如`AA.txt`：

学生信息：

```
AAAA

BBBB

1 10 100

2  3  15 
```

*！！！多行*

```
10  6   9 
```

我有像“关于学生的信息”这样的信息，跳过的行数 2 以及所需矩阵中的第 3 列和第 10 行的数目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:22:24.390

如果我理解正确，您想跳过前 3 行（假设它们为标题），然后阅读其余部分。

我会遵循这个程序：

```
fid = fopen(filename,'r');
A = textscan(fid,'%f %f %f','HeaderLines',3,'Delimiter','\r\n'); 
```

我目前无法访问`MATLAB`，但我相信它会起作用。

# ruby-on-rails - 在 Rails 中设置 rspec 和 cucumber 之间的界限

> ID：15724691
> 
> 赞同：8
> 
> 时间：2013-03-30T23:33:11.867
> 
> 标签：ruby-on-rails, testing, rspec, cucumber, bdd

我喜欢`Cucumber`将用户规范与集成测试联系起来的方式。这`Cucumber`部分对我来说或多或少是清楚的。
当谈到应该用 rspec（非集成测试）测试什么和不应该测试什么时，我很挣扎。对已经测试过
的东西进行单元测试是否正确（例如，如果 Cucumber 测试失败，单元测试将 100% 失败，如果 Cucumber 测试成功，单元测试将 100% 成功）？`rspec``Cucumber`

具体来说，我想解决三个例子。

1.  这是 RSpec 书中的一个案例。他们有以下几点`Cucumber scenario`：

    ```
    Given I am not yet playing
    When I start a new game
    Then I should see "Welcome to Codebreaker!"
    And I should see "Enter guess:" 
    ```

    他们在之后建造了两个`rspec-tests`：

    ```
    describe "#start" do
         it "sends a welcome message" do

         end
         it "prompts for the first guess" do

         end
    end 
    ```

2.  另一个例子是测试路由或动作重定向，同时有以下场景：

    ```
    Given I am at the login page
    When I fill in the right username and password
    Then I should be at the index page 
    ```

3.  有时我们会测试已经测试过的助手`Cucumber`：

    ```
    Given Mike has spent 283 minutes online
    When I go to the Mike's profile page
    Then I should see "4:43" for "Time online:" 
    ```

    我可能应该测试将 283 分钟分成“4:43”的助手，但事实证明它已经用`Cucumber`.

它可能不是最好的例子，但它说明了我在说什么。
对我来说，这些测试是重复的。

你能评论一下上面的例子吗？

是否有任何关于应该用什么进行测试的原则或指导`rspec`方针`Cucumber tests`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T01:52:56.213

**所有这些只是我对这个广泛而开放的话题的个人看法。有些人可能不同意，而且他们可以很有趣。**

作为一般指南，您应该使用**Cucumber**来测试整个应用程序堆栈，这就是所谓的**用户体验**。此应用程序堆栈可能由许多较小的独立对象组成，但是，就像使用您的应用程序的用户不会对这些细节感兴趣一样**，**您的**黄瓜**测试不应该关心它们，而是关注应用程序的外层。

**另一方面，**RSpec**（**在您的设置中！ ）应该主要关注那些小对象，即应用程序的构建块。****

 ****书中的小**应用示例存在一个**大**问题：**它们太小了！**

 ****Boarder between outer layer of your application and its interiors is to blurred. Entire application is build with two objects! It is hard to distinguished what should test what. As your application grow in size its getting more obvious what is a **user experience test**(cucumber) and what is **object - state test/message expectation test**(RSpec).

Using your second example:

With this Cucumber story:

```
Given I am at the login page
When I fill in the right username and password
Then I should be at the index page 
```

Rspec:

You will probably have some sort of User model:

*   test user name syntax(must start with capital for example)
*   test password must be 7 characters have numbers etc...

You can have some sort of authentication object:

*   test for valid and invalid logins etc
*   test for exceptions being thrown ....

What if your Authentication database is on different server?

*   [mock](https://relishapp.com/rspec/rspec-mocks/docs) connection and authentication database and test if database receive an request from authentication object.

And yada yada yada... Forever your cucumber test will guard general purpose of your application **user login**. Even when you add or change behaviour, under the hood, as long as this test pass you can be confident that user can login.

*   you should test things once(in one place)
*   object its responsible for testing its incoming massage(object public interface) for state(return value)
*   when your object depends on other object(sends its a message) don't test it for state(return value) that object is responsible for it.
*   when your object depends on other object(sends its a message) mock that second object and test if it receive your message.

Generally your question is too broad and you wont find a single answer, different people will have different ideas. What you should focus on is to test, as good as you can and with time you will definitely find **right way for you**. Not a great test suit is much better then none.

Because good design helps to write good test I would recommend [Practical Object-Oriented Design in Ruby: An Agile Primer](https://rads.stackoverflow.com/amzn/click/com/0321721330) by Sandi Metz(which is one of a best book I've read)******

# css - jQuery slider is not hiding content due to overflow:hidden; being ignored?

> ID：15724692
> 
> 赞同：0
> 
> 时间：2013-03-30T23:33:30.977
> 
> 标签：css

**Liver View:** [https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html](https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html)

Hello,

The purpose of my jQuery slider at the side, not to be mistaken for the bottom slider, is not working brilliantly, however my overflow is being ignored for some reason and I just cannot figure out why. I could really do with some help in resolving this problem.

* * *

**EDIT:**

```
.testdiv {
    float:left;
    width:978px;
    font:normal .75em/1.5em 'Lucida Grande', Helvetica, Arial, sans-serif;
    margin:1em auto;
    text-align:left;
    text-shadow:0 1px 0 rgba(255,255,255,.5);
    overflow:hidden;
} 
```

The above is the main div, of which everything is in apart from that div being inside another for the background. My container moves right outside of this container however your still able to see it.

* * *

Thank you for any time spend in following up with my question. Best Regards, Tim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:45:45.610

You have to set `#Map-Selection-Info` to `position: relative;` not `absolute`. Otherwise `absolute` kills the influence of `overflow`.

# playframework - Can Play! Framework compile on the fly in production mode?

> ID：15724693
> 
> 赞同：2
> 
> 时间：2013-03-30T23:33:39.130
> 
> 标签：playframework, playframework-2.1

I tried to `Ctrl+D` after launching the app, then launching `play` again and executing `compile`, but then compilation works but changes are not applied automatically.

So my question is, if it can compile and apply changes on the fly, how can it be done? If not, what is the best way to compile and push changes without having to stop the application for a few seconds?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:17:07.680

No. It can't and it shouldn't.

For keeping application working without any pause you need to run temporary second instance and handle load balancing using some front-end HTTP server

# objective-c - 在 Xcode 上设置 PJSIP

> ID：15724695
> 
> 赞同：0
> 
> 时间：2013-03-30T23:34:01.850
> 
> 标签：objective-c, asterisk, pjsip

我按照此链接中的步骤操作： [How To Build and Compile PJSIP for Xcode, Using sample code IPJSUA to test？](https://stackoverflow.com/questions/11848333/how-to-build-and-compile-pjsip-for-xcode-using-sample-code-ipjsua-to-test)

有几个步骤我不太确定，我很确定这就是为什么我会遇到这么多错误

我不知道在 configure_site.h 文件中的何处键入这些行：

```
#define PJ_CONFIG_IPHONE 1
#include <pj/config_site_sample.h> 
```

所以我把它们放在一切之上。

我也真的不知道在 configure-iphone 文件中的何处键入这些行：

```
 DEVPATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer

IPHONESDK=iPhoneSimulator6.1.sdk 
```

所以我把它们放在 if 语句下方和外部的顶部。

当我尝试构建 ipjsua xcode 项目时，出现以下错误：

```
Undefined symbols for architecture i386:
  "_app_config", referenced from:
      _keepAliveFunction in pjsua_app.o
      _on_playfile_done in pjsua_app.o
      _app_init in pjsua_app.o
      _default_config in pjsua_app.o
      _parse_args in pjsua_app.o
      _on_call_state in pjsua_app.o
      _on_incoming_call in pjsua_app.o
      ...

    "_app_config_init_video", referenced from:
      _app_init in pjsua_app.o
  "_arrange_window", referenced from:
      _on_call_video_state in pjsua_app.o
  "_cli_console_app_main", referenced from:
     _app_main in pjsua_app.o
  "_console_app_main", referenced from:
      _app_main in pjsua_app.o
  "_current_call", referenced from:
     _on_call_state in pjsua_app.o
      _on_incoming_call in pjsua_app.o
  "_destroy_cli", referenced from:
     _app_destroy in pjsua_app.o
   "_find_next_call", referenced from:
      _on_call_state in pjsua_app.o
  "_log_call_dump", referenced from:
      _on_call_state in pjsua_app.o
  "_my_atoi", referenced from:
      _parse_args in pjsua_app.o
  "_setup_cli", referenced from:
      _app_init in pjsua_app.o
  "_stdout_refresh", referenced from:
      _parse_args in pjsua_app.o
      _app_main in pjsua_app.o
       _stdout_refresh_proc in pjsua_app.o
   "_stdout_refresh_quit", referenced from:
       _app_main in pjsua_app.o
       _stdout_refresh_proc in pjsua_app.o
 ld: symbol(s) not found for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我尝试将它构建到我的设备时，我得到了超过 129 个错误。

在过去的三天里，我一直在努力安装这个库。我真的很想构建自己的 SIP 堆栈，但我听说这是一项非常困难的任务。

关于如何解决这个问题的任何帮助，我将永远感激不尽！

# android - android application crashes on start of service

> ID：15724696
> 
> 赞同：0
> 
> 时间：2013-03-30T23:34:06.583
> 
> 标签：android, text-to-speech

I am trying to make SmsListener but the app breaks when I try to call tts

Below is the listener:

```
package com.example.hope_1;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class SmsListener extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){
        Bundle bundle = intent.getExtras();           //---get the SMS message passed in---
        SmsMessage[] msgs = null;
        String msg_from;
        if (bundle != null){
            //---retrieve the SMS message received---
            try{
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];
                for(int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                    msg_from = msgs[i].getOriginatingAddress();
                    final String msgBody = msgs[i].getMessageBody();
                    Log.println(0, msg_from, msgBody);
                    Toast toast =  Toast.makeText(context, msg_from + "   " + msgBody,Toast.LENGTH_LONG);
                    toast.show();

                  //Application is crashing on line below
                    SmsSpeaker.tts.speak(msgBody,TextToSpeech.QUEUE_FLUSH, null);
                }
            }catch(Exception e){
                    Log.d("Exception caught",e.getMessage());
            }
        }
    }
}
} 
```

Below is code for Sms Speaker

```
package com.example.hope_1;

import java.util.Locale;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.widget.Toast;

public class SmsSpeaker extends Service implements OnInitListener {

public static TextToSpeech tts;

public int onStartCommand(Intent intent,int flags,int startId){
    super.onStartCommand(intent, flags, startId);
    return START_STICKY;
}
@Override
public void onInit(int status) {
    Toast toast; 
    // TODO Auto-generated method stub
    if(status == TextToSpeech.SUCCESS){
        tts.setLanguage(Locale.US);
        toast = Toast.makeText(SmsSpeaker.this, "TTS Started", Toast.LENGTH_LONG);
        toast.show();
        }
    else {
        toast = Toast.makeText(SmsSpeaker.this, TextToSpeech.ERROR, Toast.LENGTH_LONG);
        toast.show();
        toast = Toast.makeText(SmsSpeaker.this, "TTS Engine failed to start", Toast.LENGTH_LONG);
        toast.show();
    }

}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

I tried using LogCat but that did not help...logcat is blank

The application is crashing without any exception

I tried to debug the code but on debug it shows "Source not found". I tried looking at other answers but it didn't help much.

Can you please tell me why the application is crashing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:01:31.393

You did not initialize tts

```
public int onStartCommand(Intent intent,int flags,int startId){
super.onStartCommand(intent, flags, startId);
tts = new TextToSpeech(this, this);
return START_STICKY; 
```

}

# html - 3 列响应式 CSS（排序内容位置）

> ID：15724698
> 
> 赞同：6
> 
> 时间：2013-03-30T23:34:20.113
> 
> 标签：html, css, layout, responsive-design, stylesheet

我想知道当屏幕尺寸减小到 480 或更低时，有什么方法可以订购内容位置。我的意思是在第 3 列我将有姓名、号码和地址等，在第 2 列我将有社交资料，在第 1 列我将有一个图像。我希望首先将名称和地址堆叠起来，然后是图像，然后是社交图标。顺序是 3,1,2。我试图让它保持响应。

**CSS：**

```
/*  SECTIONS  */
.section {
clear: both;
padding: 0px;
margin: 0px;
} 

/*  COLUMN SETUP  */
.col {
display: block;
float:left;
margin: 1% 0 1% 1.6%;
}
.col:first-child { margin-left: 0; }

/*  GRID OF THREE           ============================================================================= */

.span_3_of_3 {
width: 100%; 
}

.span_2_of_3 {
width: 66.1%; 
}

.span_1_of_3 {
width: 32.2%; 
}

 /*  GO FULL WIDTH AT LESS THAN 480 PIXELS */

 @media only screen and (max-width: 480px) {
.span_3_of_3 {
    width: 100%; 
}
.span_2_of_3 {
    width: 100%; 
}
.span_1_of_3 {
    width: 100%;
}
} 
```

**HTML：**

```
<div class="section group">
<div class="col span_1_of_3">
This is column 1
</div>
<div class="col span_1_of_3">
This is column 2
</div>
<div class="col span_1_of_3">
This is column 3
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T00:20:28.590

优化移动设备的源顺序并使用 metadept 的解决方案对桌面的列重新排序会更有效。

但是，如果由于某种原因无法修改源顺序，或者您不知道要重新排序的元素的宽度，那么您需要 Flexbox：

[http://jsfiddle.net/4KUUt/3/](http://jsfiddle.net/4KUUt/3/)

```
/*  SECTIONS  */
/* line 5, ../sass/test.scss */
.section {
  clear: both;
  padding: 0px;
  margin: 0px;
}

/* line 11, ../sass/test.scss */
.a {
  background-color: #CCF;
}

/* line 14, ../sass/test.scss */
.b {
  background-color: #CFC;
}

/* line 17, ../sass/test.scss */
.c {
  background-color: #FCC;
}

/*  GRID OF THREE           ============================================================================= */
@media only screen and (min-width: 480px) {
  /* line 24, ../sass/test.scss */
  .span_3_of_3 {
    width: 100%;
  }

  /* line 28, ../sass/test.scss */
  .span_2_of_3 {
    width: 66.1%;
  }

  /* line 32, ../sass/test.scss */
  .span_1_of_3 {
    width: 32.2%;
  }

  /*  COLUMN SETUP  */
  /* line 37, ../sass/test.scss */
  .col {
    display: block;
    float: left;
    margin: 1% 0 1% 1.6%;
  }

  /* line 42, ../sass/test.scss */
  .col:first-child {
    margin-left: 0;
  }
}
@media only screen and (max-width: 480px) {
  /* line 48, ../sass/test.scss */
  .section {
    width: 100%; /* fix for Firefox */
    display: -webkit-box;
    display: -moz-box;
    display: -webkit-flexbox;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -webkit-box-direction: normal;
    -moz-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
  }

  /* line 53, ../sass/test.scss */
  .a {
    -webkit-box-ordinal-group: 2;
    -moz-box-ordinal-group: 2;
    -webkit-flex-order: 1;
    -ms-flex-order: 1;
    -webkit-order: 1;
    order: 1;
  }

  /* line 57, ../sass/test.scss */
  .b {
    -webkit-box-ordinal-group: 3;
    -moz-box-ordinal-group: 3;
    -webkit-flex-order: 2;
    -ms-flex-order: 2;
    -webkit-order: 2;
    order: 2;
  }
}

<div class="section group">
    <div class="col span_1_of_3 a">This is column 1</div>
    <div class="col span_1_of_3 b">This is column 2</div>
    <div class="col span_1_of_3 c">This is column 3</div>
</div> 
```

请注意，我已修改您的媒体查询以提高效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:51:00.450

我在理解您的列排序时遇到了一些麻烦，但是让它们在移动设备上重新排列的方法是使用边距“推”和“拉”。例如：

```
.span_1_of_3 {
    margin-left: 33%;
}

.span_2_of_3 {
    margin-left: -65%;
} 
```

这将使第 2 列在并排（桌面）布局中出现在第 1 列之前，然后您可以删除堆叠（移动）布局的边距。

看到这个jsFiddle：http: [//jsfiddle.net/4KUUt/](http://jsfiddle.net/4KUUt/)

**编辑 2**

我想我已经按照你想要的顺序设置了它。如果您仍在寻找解决方案，请尝试以下操作：http: [//jsfiddle.net/4KUUt/5/](http://jsfiddle.net/4KUUt/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:15:28.077

嗯，这是一些奇怪的解决方案，但使用 jQuery :) 只是在试验。

首先，我在 HTML 标记中添加了额外的类。然后，我为移动类添加了这个属性`.third`

```
.third {
    width: 100%;
    margin: 0;
    position: absolute;
    top: 0;
} 
```

后面这个 jQuery 代码

```
$(window).resize(function(){
    if ($(".third").css("position") == "absolute") 
    {
        $(".first").css("margin-top", $(".third").height());
    }
    else
    {
        $(".first").css("margin-top", "1%");
    }
}); 
```

有很多变化，所以看看这个小提琴[http://jsfiddle.net/AYcVF/2/](http://jsfiddle.net/AYcVF/2/)

也许有人只有 CSS 解决方案，但这是迄今为止我能做的最好的。

# html - 如何让中间 div 填充浮动元素之间的空间？

> ID：15724700
> 
> 赞同：29
> 
> 时间：2013-03-30T23:34:31.873
> 
> 标签：html, css, css-float

我有三个 div 元素：左、中和右。左右是固定的和浮动的。我想要的是**中间 div 来填补**它们之间的空白。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
   <style>
      * {border: dotted 1px red;}
      #left {
         width: 200px;
         float: left;
      }
      #middle {
         float: left;
      }
      #right {
         width: 200px;
         float: right;
      }
   </style>
</head>
<body>
   <div id="left"  >  left   </div>
   <div id="middle">  middle </div>
   <div id="right" >  right  </div>
</body>
</html> 
```

关于如何做到这一点的任何想法？我尝试了不同的解决方案，但没有做到我想要的。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-31T00:01:16.937

关键是将你的 html 重组为`middle`最后一个，`float`从 中删除`middle`并将其[替换为`overflow: hidden`](http://web.archive.org/web/20150618153020/http://colinaarts.com/articles/the-magic-of-overflow-hidden/?).

[**查看小提琴示例。**](http://jsfiddle.net/7BE43/)

**HTML**

```
<div id="left"  >  left   </div>
<div id="right" >  right  </div>
<div id="middle">  middle </div> 
```

**CSS**

```
#left {
    width: 200px;
    float: left;
}
#middle {
    overflow: hidden;
}
#right {
    width: 200px;
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T23:41:21.167

我能够复制问题并使用百分比而不是绝对值来修复它。由于您正在寻找两个元素之间的灵活性，这应该可以工作。

```
#left {
    width: 20%;
    float: left;
    background: #ccc;
}
#middle {
    width: 60%;
    float: left;
    display: block;
    background: #ddd;
}
#right {
    width: 20%;
    float: right;
    background: #bbb;
} 
```

这是一个[演示](http://jsfiddle.net/vQNaw/2/)

# xquery - Counting number of items of a list in XQuery

> ID：15724701
> 
> 赞同：1
> 
> 时间：2013-03-30T23:34:48.560
> 
> 标签：xquery

If I am given a list in XQuery, like: `1, 1, 2`

How do I count the number of instances of `1`s?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:54:21.990

The list is actually a sequence and you can `count()` it...

```
let $sequence := ('1','1','2')
return
    count($sequence[.='1']) 
```

produces:

`2`

# r - 在 R 中绘制并计算带有误差函数的表达式

> ID：15724702
> 
> 赞同：0
> 
> 时间：2013-03-30T23:34:50.743
> 
> 标签：r, function

大家好，我有具有互补误差函数的函数/表达式。我想找到不同 x 值的解决方案。互补误差函数可以写为

```
erfc(x)=1-erf(x) 
```

我的表达是

```
erfc(\frac{x-Ut}{\sqrt{4Dt}}) 
```

我已经用 Latex 语法编写了表达式。怎么样，你会明白的。U 和 D 是上述表达式中的常数。现在，我将使用以下代码分配 x 的值：

```
x <- seq(from=0,by=0.5,length=500) 
```

现在我想在一个函数上定义上面的表达式，这样我就有了不同 x 值的值。

以下示例演示了我想要的一个简单示例。

```
x <- seq(from=0,by=0.5,length=500) 
y <- function(x){
  x^2+2*x+1
}
z = y(x) 
plot(x,z) 
```

上面的例子和我想要的不同的是函数的定义。如何在函数上使用带有错误函数的表达式？有没有处理错误功能的特殊包？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:29:03.177

误差函数由基数 R 处理，因为它可以根据正态分布的 CDF 来定义；请参阅以下示例：

[http://stat.ethz.ch/R-manual/R-patched/library/stats/html/Normal.html](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/Normal.html)

您所要做的就是定义以下函数：

```
f <- function(x) 2-2*pnorm(sqrt(2)*(x-Ut)/sqrt(4*Dt)) 
```

因为`erf(y) = 2*pnorm(sqrt(2)*y)-1`.

然后使用

```
z = y(x) 
plot(x,z) 
```

或者，或者，使用

```
plot(f, from=0, to=250) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:31:00.970

[正如这里](https://stat.ethz.ch/pipermail/r-help/2004-June/052937.html)所指出的，文档`pnorm()`说：

```
## if you want the so-called 'error function'
erf <- function(x) 2 * pnorm(x * sqrt(2)) - 1
## (see Abramowitz and Stegun 29.2.29)
## and the so-called 'complementary error function'
erfc <- function(x) 2 * pnorm(x * sqrt(2), lower = FALSE) 
```

`erf()`因此，您可以`erfc()`在函数中使用这些定义。

# java - How do I handle exceptions correctly in this case?

> ID：15724708
> 
> 赞同：3
> 
> 时间：2013-03-30T23:36:22.420
> 
> 标签：java, file-io, exception-handling, error-handling

I have a class called Dictionary which reads constant-length-delimited words from a text file and creates a TreeSet from them for looking up whether or not a word exists in the dictionary.

So I obviously need to handle an IOException somehow. My question is, should the error-handling responsibilities fall upon the Dictionary class, or should it fall upon the code creating a Dictionary object?

Here's what I have:

```
public class Dictionary
{
    private final TreeSet<String> stringSet = new TreeSet<>();

    // constructor
    public Dictionary(String fileName) throws IOException
    {
        try (final Reader reader = new InputStreamReader(new FileInputStream(fileName)))
        {
            // load dictionary into stringSet
            final char[] buffer = new char[4];
            int numRead = -1;
            while ((numRead = reader.read(buffer)) > 0)
                stringSet.add(new String(buffer, 0, numRead).toUpperCase());
        }
        catch (IOException e)
        {
            throw e;
        }
    }

    public boolean contains(String word)
    {
        return stringSet.contains(word);
    }
} 
```

And the code that creates a Dictionary object:

```
public class MainClass
{
    public static void main(String args[])
    {
        String fileName = "C:/Users/Brandon/Desktop/Android Development/Practice Apps/SwapWords_Prototype/src/data/dictionary.txt";
        try
        {
            Dictionary dict = new Dictionary(fileName);
        }
        catch (IOException e)
        {
            System.out.println("Could not load dictionary <" + fileName + ">");
            e.printStackTrace();
        }

        // TODO handle dict
    }
} 
```

Should Dictionary catch and handle the IOException or throw it to the calling code? I mean, either one works, but which is more logical?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:45:00.797

I'd say that the way you have it set up right now is good as is. If it is the case that when `Dictionary` encounters an `IOException`, there isn't any good way for it to recover, then you will want to alert the caller that this failure occurred. If, on the other hand, `Dictionary` could gracefully handle the error on its own (by trying to load a different file or something), then you could put the code in the constructor to hide it from the caller.

What you don't want is for the caller to make a `Dictionary` that is internally invalid due to an exception, but looks completely fine to the caller.

# php - 仅从主页中删除 div 类

> ID：15724709
> 
> 赞同：0
> 
> 时间：2013-03-30T23:36:22.987
> 
> 标签：php, html, css, wordpress

首先，我首先要说的是，我无论如何都不精通 PHP。

我希望我的页脚显示在所有页面（wordpress 网站）上，现在不是问题。我想要的，是为了

`<div class="inner-footer-wrapper">`

隐藏在主页上。

这是我在 footer.php 中的内容

```
 <div id="footer">
    <div class="inner-footer-wrapper">

    <?php if (!is_page_template("template-maintenance-page.php") && $super_options[SN."_footer_widgets"]=="Yes") : ?>
    <div class="container clearfix">  

    <?php 
    $footer_layout = $super_options[SN."_footer_layout"];
    switch($footer_layout)
    {
    case "two-col" : 

    echo '<div class="footer-cols one_half clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_half_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "three-col" : 

    echo '<div class="footer-cols one_third clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_third clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_third_last clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>"; 

    break;
    case "four-col" : 

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>";

    echo '<div class="footer-cols one_fourth_last clearfix">';
    dynamic_sidebar ("Footer Column 4"); 
    echo "</div>"; 

    break;
    case "five-col" : 

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 4"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth_last clearfix">';
    dynamic_sidebar ("Footer Column 5"); 
    echo "</div>"; 

    break;
    case "six-col" : 

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 4"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 5"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth_last clearfix">';
    dynamic_sidebar ("Footer Column 6"); 
    echo "</div>"; 

    break;

    case "one-third" : 

    echo '<div class="footer-cols one_third clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols two_third_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "one-fourth" : 

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols three_fourth_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "one-fifth" : 

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols four_fifth_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "one-sixth" : 

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols five_sixth_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;

    }
    ?>

    </div>
    <?php endif; ?>
    </div>
    <div id="footer-menu">
    <div class="container clearfix">

    <p class="footer-text"><?php echo $helper->customFormat($super_options[SN."_footer_text"]); ?></p> 

    <?php  if(!is_page_template("template-maintenance-page.php") && $super_options[SN."_footer_menu"]=="Yes") : 
    if(function_exists("wp_nav_menu"))
    {
    wp_nav_menu(array(
    'theme_location'=>'footer_nav',
    'container'=>'ul',
    'depth' => 1
    )
    );
    }
    endif;
    ?>

    </div>      
    </div>
    </div>

    <script type="text/javascript">
    <?php 
    echo stripslashes($super_options[SN."_tracking_code"]);
    ?>
    </script>
    <?php  wp_footer();  ?>
    </body>
    </html> 
```

我试图做一个 if is_home 语句，但我没有足够的知识知道它的去向。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:41:53.537

将您不想在主页上显示的所有内容包装起来

```
<?php if(!is_home()){?>

             //code here

<?php } ?> 
```

或者：

```
<div id="footer">
    <?php if(!is_home()){?>
    <div class="inner-footer-wrapper">

    <?php if (!is_page_template("template-maintenance-page.php") && $super_options[SN."_footer_widgets"]=="Yes") : ?>
    <div class="container clearfix">  

    <?php 
    $footer_layout = $super_options[SN."_footer_layout"];
    switch($footer_layout)
    {
    case "two-col" : 

    echo '<div class="footer-cols one_half clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_half_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "three-col" : 

    echo '<div class="footer-cols one_third clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_third clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_third_last clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>"; 

    break;
    case "four-col" : 

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>";

    echo '<div class="footer-cols one_fourth_last clearfix">';
    dynamic_sidebar ("Footer Column 4"); 
    echo "</div>"; 

    break;
    case "five-col" : 

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 4"); 
    echo "</div>";

    echo '<div class="footer-cols one_fifth_last clearfix">';
    dynamic_sidebar ("Footer Column 5"); 
    echo "</div>"; 

    break;
    case "six-col" : 

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 3"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 4"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 5"); 
    echo "</div>";

    echo '<div class="footer-cols one_sixth_last clearfix">';
    dynamic_sidebar ("Footer Column 6"); 
    echo "</div>"; 

    break;

    case "one-third" : 

    echo '<div class="footer-cols one_third clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols two_third_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "one-fourth" : 

    echo '<div class="footer-cols one_fourth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols three_fourth_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "one-fifth" : 

    echo '<div class="footer-cols one_fifth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols four_fifth_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;
    case "one-sixth" : 

    echo '<div class="footer-cols one_sixth clearfix">';
    dynamic_sidebar ("Footer Column 1"); 
    echo "</div>";

    echo '<div class="footer-cols five_sixth_last clearfix">';
    dynamic_sidebar ("Footer Column 2"); 
    echo "</div>"; 

    break;

    }
    ?>

    </div>
    <?php endif; ?>
    </div>
<?php } ?>
    <div id="footer-menu">
    <div class="container clearfix">

    <p class="footer-text"><?php echo $helper->customFormat($super_options[SN."_footer_text"]); ?></p> 

    <?php  if(!is_page_template("template-maintenance-page.php") && $super_options[SN."_footer_menu"]=="Yes") : 
    if(function_exists("wp_nav_menu"))
    {
    wp_nav_menu(array(
    'theme_location'=>'footer_nav',
    'container'=>'ul',
    'depth' => 1
    )
    );
    }
    endif;
    ?>
    </div>      
    </div>
    </div>
    <script type="text/javascript">
    <?php 
    echo stripslashes($super_options[SN."_tracking_code"]);
    ?>
    </script>
    <?php  wp_footer();  ?>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:52:30.107

在您的主页上，将其放在正文标记中-

```
<body <?php $page = "home"; ?>> 
```

现在把它放在你的页脚标签中 -

```
<div class="inner-footer-wrapper" style="display:"<?php if($page == "home"){ echo "none";}?>"> 
```

# php - 发布前编辑提交的表单数据的问题

> ID：15724712
> 
> 赞同：1
> 
> 时间：2013-03-30T23:37:09.907
> 
> 标签：php, mysql, forms

我有一个基于 PHP 和 SQL 的常见问题解答脚本，允许访问者通过表单提交问题。然后，站点管理员可以编辑问题、添加答案并将内容发布到 FAQ 页面。

除了编辑用户提交的问题外，一切正常。输入表单允许我编辑用户提交的问题并提交提供的答案，但提交后它返回原始用户提交的问题而不是编辑后的问题。

例如，用户提交以下问题：

> “英格兰的首都是什么地方？”

管理员可以将问题编辑为：

> “英国的首都是哪里？”

和答案：

> “英国的首都是伦敦”

虽然在编辑和提交之后，编辑后的问题并没有保存到数据库中，而是保存为原始用户提交的问题：

> “英国的首都是什么”

这是来自 editfaq.php 页面的代码，您可以在其中编辑用户提交的问题或存储在数据库中的现有问题和答案。编辑现有条目的问题或答案可以正常工作，但是用户提交的问题不会保存。

任何帮助将非常感激。

* * *

```
 if (isset($_GET[type]) and $_GET[type] == n) {
$get_new = mysql_query("SELECT * FROM ofaq_new WHERE id = $_GET[id]");

  while ($row = mysql_fetch_array($get_new)) {
    $q = "$row[question]";
    $email = "$row[email]";
    $notify = "$row[notify]";
  }

  if (isset($_GET[edit])) {
    mysql_query("INSERT INTO ofaq_qa (q, a) VALUES ('$q', '$_POST[a]')");
    mysql_query("DELETE FROM ofaq_new WHERE id = $_GET[id]");
    echo "$lang[publishednew].";

    if ($notify == 1) {
      $message = "$lang[mail1]\n\n$lang[question]: $q\n$lang[answer]: $_POST[a]\n\n$lang[mail2] $config[name] $lang[mail3]\n$config[faqurl]";
      $message = wordwrap($message, 70);
      $subject = "$lang[yourq] $config[name]";
      $headers = "From: $config[name] <$config[adminmail]>";

      mail($email, $subject, $message, $headers);
    }
  } elseif (isset($_GET[id])) {
    echo "<b>edit user submitted question</b><p />";

    echo "<form action=faqedit.php?type=n&edit=1&id=$_GET[id] method=post>";
    echo "$lang[question]:<br />";
    echo "<input type=text name=q size=50 value='$q' /><br />";
    echo "$lang[answer]:<br />";
    echo "<textarea name=a rows=4 cols=50></textarea><br />";
    echo "<input type=submit value='$lang[pubnew]' />";
    echo "</form>";
  }
} else {
  $get_qa = mysql_query("SELECT * FROM ofaq_qa WHERE id = $_GET[id]");

  if (isset($_GET[id])) { 
    while ($row = mysql_fetch_array($get_qa)) { 
      $q = "$row[q]"; 
      $a = "$row[a]"; 
    } 

    echo "<b>edit existing question</b><p />"; 

    echo "<form action=faqedit.php?edit=1&sid=$_GET[id] method=post>"; 
    echo "$lang[question]:<br />"; 
    echo "<input type=text name=q size=30 value='$q' /><br />"; 
    echo "$lang[answer]:<br />"; 
    echo "<textarea name=a rows=4 cols=30>$a</textarea><br />"; 
    echo "<input type=submit value='$lang[editqa]' />"; 
    echo "</form>"; 

  } elseif (isset($_GET[edit])) { 
    mysql_query("UPDATE ofaq_qa set q='$_POST[q]', a='$_POST[a]' where id=$_GET[sid]"); 
    echo "$lang[written]";
  } else {
    echo "Oops... Something went horribly wrong!";
  }
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:00:21.917

为什么不进行更新查询，而不是删除并重新插入？！

你应该写这个 "$_GET['edit']" 而不是这个 "$_GET[edit]" ...

* * *

好的，所以 "$_POST['a']" 包含管理员答案，但我看不到包含新答案的变量在哪里？

在 INSERT 查询中，您使用的是包含旧问题的“$q”变量，因此您将旧问题插入到第二个表中。

所以在管理表单中，尝试找到新问题字段的名称，如果（例如）它是“newQ”，那么......

```
if(isset($_GET['type']) AND $_GET['type'] == n) {
    $get_new = mysql_query('SELECT * FROM ofaq_new WHERE id = ' . $_GET['id']);

    $row = mysql_fetch_assoc($get_new); //You have only one record

    $q = $row['question'];
    $email = $row['email'];
    $notify = $row['notify'];

    if(isset($_GET[edit])) {
        mysql_query('INSERT INTO ofaq_qa (q, a) VALUES ("$_POST[\'newQ\']", "$_POST[\'a\']")');
        mysql_query('DELETE FROM ofaq_new WHERE id = ' . $_GET[id]);

echo $lang['publishednew'] . '.';

    //ETC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:48:58.307

好的，这是一个很酷的小脚本。

## 文件：db.php

```
<?php
try {
    $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
    $pdo_options[PDO::MYSQL_ATTR_INIT_COMMAND] = "SET NAMES utf8";

    $db = new PDO('mysql:host=localhost;dbname=try', 'root', '', $pdo_options);
}
catch (Exception $e) {
    die('Erreur : ' . $e->getMessage());
}
?> 
```

## 文件：ask.php

```
<?php
//RUNNING THE SESSION
session_start();

//Import the database connection object
require_once 'db.php';

//INIT THE ERRORS MESSAGES AS EMPTY
$serverMsg = '';

//IF THE QUESTION IS SENT
if(isset($_POST['quest']) AND isset($_POST['email'])) {
    //CHEKING IF THE DATAS ARE CORRECT
    if(empty($_POST['quest'])) $serverMsg .= '<p>Empty question.</p>';
    if(empty($_POST['email'])) $serverMsg .= '<p>Empty email.</p>';
    elseif(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) $serverMsg .= '<p>Wrong email.</p>';

    //CHEKING IF THE USER DOESNT ABUSE
    if(!isset($_SESSION['quest_nbr'])) $_SESSION['quest_nbr'] = 0;

    if($_SESSION['quest_nbr'] > 2) $serverMsg .= '<p>Please wait a few minutes before asking more questions.</p>';

    //IF NO ERROR
    if(empty($serverMsg)) {
        $req = $db->prepare('INSERT INTO faq (quest, email) VALUE (:q, :em)');
        $req->bindParam(':q', $_POST['quest'], PDO::PARAM_STR);
        $req->bindParam(':em', $_POST['email'], PDO::PARAM_STR);
        $req->execute();
        $serverMsg = '<p>Question added.</p>';

        //INCREMENTING THE USER QUESTIONS
        $_SESSION['quest_nbr']++;
    }
}
?>

<form method="post" action="">
    <?php echo $serverMsg; ?>
    <p>Email : <input type="text" name="email"></p>
    <p>Question : <textarea name="quest"></textarea></p>
    <p><input type="submit" value="Ask"></p>
</form> 
```

## 文件：admin_edit.php

```
<?php
//RUNNING THE SESSION
session_start();

// CHECKING IF CURRENT USER IS AN ADMIN
// Example
if(!isset($_SESSION['admin']) OR $_SESSION['admin'] == null) die('You are not allowed to be here.');

//Import the database connection object
require_once 'db.php';

//INIT THE ERRORS MESSAGES AS EMPTY
$serverMsg = '';

//IF A QUESTION IS SELECTED (to be edited)
if(isset($_GET['questId']) AND is_numeric($_GET['questId'])) {
    //IF THE NEW QUESTION AND ANSWER FORM IS SENT

    if(isset($_POST['newQuest']) AND isset($_POST['newAns'])) {
        if(empty($_POST['newQuest'])) $serverMsg .= '<p>Empty question.</p>';
        if(empty($_POST['newAns'])) $serverMsg .= '<p>Empty answer.</p>';

        //IF EVERYTHING'S OK
        if(empty($serverMsg)) {
            //CHEKING IF QUESTION REALLY EXISTS
            $req = $db->prepare('SELECT email FROM faq WHERE id = :id');
            $req->bindParam(':id', $_GET['questId'], PDO::PARAM_INT);
            $req->execute();
            $data = $req->fetch();

            //IF QUESTION EXIST, WE UPDATE IT
            if(!empty($data)) {
                $req = $db->prepare('UPDATE faq SET quest = :q, ans = :a WHERE id = :id');
                $req->bindParam(':q', $_POST['newQuest'], PDO::PARAM_STR);
                $req->bindParam(':a', $_POST['newAns'], PDO::PARAM_STR);
                $req->bindParam(':id', $_GET['questId'], PDO::PARAM_INT);
                $req->execute();
                $serverMsg = '<p>Question edited and is visible now.</p>';

                //SENDING EN EMAIL
                $userEmail = $data['email'];
                /*

                */
            }
        }
    }

    //SHOWING THE FORM
    $req = $db->prepare('SELECT * FROM faq WHERE id = :id');
    $req->bindParam(':id', $_GET['questId'], PDO::PARAM_INT);
    $req->execute();
    $data = $req->fetch();

    echo '<form method="post" action="admin_edit.php?questId='.$_GET['questId'].'">'.$serverMsg.'
        <p>Question : <textarea name="newQuest">'.$data['quest'].'</textarea></p>
        <p>Answer : <textarea name="newAns">'.$data['ans'].'</textarea></p>
        <p><input type="submit" value="Edit"></p>
    </form>';

}
else {
    // SELECTING QUESTIONS NOT ANSWERED YET
    $req = $db->prepare('SELECT * FROM faq WHERE ans = ""');
    $req->execute();
    while($data = $req->fetch()) {
        echo '<a href="admin_edit.php?questId='.$data['id'].'">'.substr($data['quest'], 0, 15).' ...</a><br />';
    }
}

echo '<a href="admin_edit.php">Show questions without answer.</a>';
?> 
```

## 用于创建相应表的 SQL 查询

```
CREATE TABLE IF NOT EXISTS `faq` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `quest` varchar(255) NOT NULL,
  `ans` text NOT NULL,
  `email` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `quest` (`quest`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

# flash - 如何在 Adob e Air 应用程序中嵌入 .FLV。闪光 CS6

> ID：15724714
> 
> 赞同：1
> 
> 时间：2013-03-30T23:37:21.877
> 
> 标签：flash, air, flv, flash-cs6

我有一个项目需要打包为 Adob​​e AIR 应用程序，并且需要能够播放视频。相关视频太大而无法包含在时间线中，因此需要将相关文件打包为 AIR 应用程序的一部分。

无论我使用什么设置，我似乎都无法让 .FLV 出现在已发布的产品中。

我做错了什么，或者我需要做什么才能将 .FLV 视频打包到 AIR 应用程序中，以便在应用程序中查看？

编辑添加我已经将 .FLV 添加到发布设置下的包含文件中，并添加了以下操作脚本。

```
import fl.video.FLVPlayback;
import fl.video.VideoPlayer;
import fl.video.flvplayback_internal;
import flash.media.Video;
import flash.media.StageVideo; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T05:57:24.310

我的项目也有同样的问题。我的 apk 文件中包含 80 个视频 = 1.023Gb。在我的桌面上测试应用程序完全没有问题，但是当我安装在我的设备上时，一些视频没有播放。我所有的视频都是相同的 FLV 320x240 格式，但时长不同。我猜可能是设备有限的硬件规格导致视频无法播放。当您在设备上安装 apk 文件时，它仍保留为 apk 文件。当您运行应用程序时，该文件将被挂载（如 ROM）在设备上，因此如果设备没有足够的 ROM 来挂载您的应用程序，则某些文件将不会被挂载。

我所做的是从 BIT LABS 安装了第三方应用程序 SWF 播放器。我没有作为 apk 文件发布，而是将我的 proj swf 文件、组件 swf 和视频文件复制到我的设备并使用 SWF 播放器应用程序运行项目。

# node.js - Node.JS + Mongo-native：将子对象插入现有对象

> ID：15724720
> 
> 赞同：0
> 
> 时间：2013-03-30T23:38:18.793
> 
> 标签：node.js, mongodb, object

我的用户架构是：

```
{
    "_id": {"$oid": "515774f2c24007eb57000001"},
    "login": "Ilya",
    "password": "30947a8c9f39b27290a11eabaeec8c89",
} 
```

我正在向用户对象动态添加研讨会信息。在这段代码之后：

```
exports.signSeminar = function(user_id, seminar_id, callback) {
    var user_obj_id = BSON.ObjectID.createFromHexString(String(user_id));
    db.collection("users", function(error, collection) {
        collection.findAndModify({
            _id: user_obj_id
        }, [], {
             $set: {
                "seminars": [{
                    "id:": String(seminar_id)
                }]
             }
        }, {}, function(err, result) {
            callback(200);
        });
    });
}; 
```

我的对象变成：

```
{
    "_id": {"$oid": "515774f2c24007eb57000001"},
    "login": "Ilya",
    "password": "30947a8c9f39b27290a11eabaeec8c89",
    "seminars": [
        {
            "id:": "51562509b781ae1d53000001"
        }
    ],
} 
```

在我对该代码进行两次以上外壳之后，它只是在“研讨会”中重新编写了子对象。我需要像这样插入另一个研讨会对象：

```
{
    "_id": {"$oid": "515774f2c24007eb57000001"},
    "login": "Ilya",
    "password": "30947a8c9f39b27290a11eabaeec8c89",
    "seminars": [
        {
            "id:": "51562509b781ae1d53000001"
        },
        {
            "id:": "#another_object_id#"
        }
    ],
} 
```

我做错了什么？谢谢。

PS尝试findAndModify，更新，取消插入，没有运气（（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:43:27.647

`$set`设置一个值，你[`$push`想追加到一个数组](http://docs.mongodb.org/manual/reference/operator/push/)。

```
 {
    $push: {
            "seminars": {
                "id:": String(seminar_id)
           }
 } 
```

# vb.net - .IndexOf 函数在 vb.net 中为类列表返回负数

> ID：15724722
> 
> 赞同：3
> 
> 时间：2013-03-30T23:39:12.890
> 
> 标签：vb.net, list, class, object

使用类结构列表时我遇到了无穷无尽的麻烦——我一直在尝试在控制台中制作字典。列表中的每个元素都有四个属性：.Word、.Definition、.Example 和 .IsDefined 布尔属性。该类如下所示：

```
Class Term
    Public Word As String
    Public Definition As String
    Public Example As String
    Public IsDefined As Boolean
End Class 
```

我正在尝试编写的 sub 应该通过查找给定值的索引来更改列表中的值，然后它要求用户输入新数据，然后它应该更改对象。只有它在这里失败：

```
IndexPosition = TerminologyDictionary.IndexOf(Term1) 
```

TerminologyDictionary 是一个 List(Of Term)，而 Term1 是用户要求编辑的术语对象。TerminologyDictionary 中只有一个元素，它的所有四个属性都与 Term1 完全相同。我什至使用 QuickWatch 进行了检查，这些语句......

```
TerminologyDictionary(0).Word = Term1.Word
TerminologyDictionary(0).Definition = Term1.Definition
TerminologyDictionary(0).Example = Term1.Example
TerminologyDictionary(0).IsDefined = Term1.IsDefined 
```

...无论我使用 Is 运算符还是等号，都评估为 True。但是当我测试 TerminologyDictionary(0) Is Term1 时，它返回 false。

我已经通过使用我自己的函数来遍历列表并手动测试每个属性并在它们都为真时返回一个索引来解决这个问题，但这很混乱，我想知道是否有一些简单的我做错了，或者如果有某种方法可以使用 .IndexOf。我知道有.FindIndex，但我不了解整个谓词，.IndexOf 要简单得多。

有人对出了什么问题有任何建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:55:32.287

默认情况下`IndexOf`仅通过引用进行比较，因为您的自定义类没有被覆盖`Equals`。当你覆盖`Equals`你应该总是覆盖`GetHashCode`。

所以这应该工作：

```
Class Term
    Public Word As String
    Public Definition As String
    Public Example As String
    Public IsDefined As Boolean

    Public Overrides Function Equals(obj As Object) As Boolean
        Dim t2 = TryCast(obj, Term)
        If t2 Is Nothing Then Return False

        Return Word = t2.Word AndAlso
            Definition = t2.Definition AndAlso
            Example = t2.Example AndAlso
            IsDefined = t2.IsDefined
    End Function

    Public Overrides Function GetHashCode() As Integer
        Dim hash As Integer = 23
        hash *= 17 + Word.GetHashCode()
        hash *= 17 + Definition.GetHashCode()
        hash *= 17 + Example.GetHashCode()
        hash *= 17 + IsDefined.GetHashCode()

        Return hash
    End Function
End Class 
```

**编辑**：也许这种实现`GetHashCode`更好，因为 VB.NET 缺乏[`unchecked`](http://msdn.microsoft.com/en-us/library/vstudio/a569z7k8.aspx)：

```
Public Overrides Function GetHashCode() As Integer
    Return New With {Word, Definition, Example, IsDefined}.GetHashCode()
End Function 
```

它的效率较低，因为每次`GetHashCode`调用都需要创建一个匿名类型的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:56:16.137

该`IndexOf`方法对列表中的类型使用标准比较，对于引用类型，标准比较比较对象的引用，而不是对象属性中的值。

您可以使用这样的`FindIndex`方法：

```
IndexPosition = TerminologyDictionary.FindIndex(Function(term As Term) _
  Term1.Word = term.Word and _
  Term1.Definition = term.Definition and _
  Term1.Example = term.Example and _
  Term1.IsDefined = term.IsDefined _
) 
```

# quickbooks - QBXML Customer modify

> ID：15724725
> 
> 赞同：0
> 
> 时间：2013-03-30T23:39:50.353
> 
> 标签：quickbooks, qbxml

In the QBSDK, I have an event setup using the sample EventSubscribe and EventHandler. I am subscribing to a Customer Modify event. When I get the event, I get the xml code below. It gives me the ListID which allows me to get the current customer name. However, I need the old name also. I am trying to update the name in Postgres and it needs the old name. Is there some way I can get the old name?

Thanks,

```
<?xml version="1.0" ?> 
<?qbxml version="3.0" ?> 
<QBXML> 
    <QBXMLEvents> 
        <DataEvent> 
            <CompanyFilePath>C:\Users\Public\Documents\Intuit\QuickBooks\Company Files\Shain Software.qbw</CompanyFilePath> 
            <HostInfo> 
                <ProductName>QuickBooks Pro 2012</ProductName> 
                <MajorVersion>22</MajorVersion> 
                <MinorVersion>0</MinorVersion> 
                <Country>US</Country> 
            </HostInfo> 
            <ListEvent> 
                <ListEventType>Customer</ListEventType> 
                <ListEventOperation>Modify</ListEventOperation> 
                <ListID>8000000A-1356377147</ListID> 
            </ListEvent> 
            <DataEventRecoveryTime>2013-03-01T15:16:35-05:00</DataEventRecoveryTime> 
        </DataEvent> 
    </QBXMLEvents> 
</QBXML> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:38:23.500

There is no way to get the old name.

You shouldn't need it.

Store the ListIDs in your database, and update based on that instead of the old name.

# css - 标题不会附加字体

> ID：15724733
> 
> 赞同：0
> 
> 时间：2013-03-30T23:41:00.697
> 
> 标签：css

[我在http://12hrs.net/guides/12-hrs-in-antwerp/](http://12hrs.net/guides/12-hrs-in-antwerp/)将字体附加到我的标题时遇到问题

所有其他 css 参数（在 h2 内）工作得很好，但由于某种原因字体（“proxima-nova”）不会改变。

在其他地方可能还有另一个喜欢的裁决吗？

最好的，小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:47:36.433

您是否尝试过将 !important 放在样式声明中？

```
h2 {
    font-family: arial !important;
} 
```

我刚用谷歌开发者试过这个，它奏效了

```
.blog .titleBar h2 {
    font-family: arial !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:54:15.207

检查对 H2 有效的 CSS 规则，如果您的字体存在，它似乎会被使用。正如 Ragnarrokkr 提到的，字体似乎没有被浏览器加载，所以很可能你没有在任何地方定义这种字体的 @font-face 规则。

此外，您在 doctype 声明之前有很多内容。您也应该解决此问题，因为它可能会导致各种问题。

# python - Google 的 2 行 blobstore 上传示例不起作用

> ID：15724737
> 
> 赞同：0
> 
> 时间：2013-03-30T23:41:24.157
> 
> 标签：python, google-app-engine, sdk

我知道有很多 blobstore 问题，但我已经回到最基本的情况，我被困住了！

从长远来看，我在 Google App Engine 和 Google Cloud SQL 上使用纯 Django，我想将文件上传到 Blobstore（但我无法上传文件）。

我正在尝试从 Google 的 Blobstore 概述（[https://developers.google.com/appengine/docs/python/blobstore/overview](https://developers.google.com/appengine/docs/python/blobstore/overview)）运行以下示例

```
from google.appengine.ext import blobstore
upload_url = blobstore.create_upload_url('/upload') 
```

但我得到以下信息：

```
$ python
Python 2.7.2+ (default, Jul 20 2012, 22:15:08) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "<snip>/google_appengine_1.7.6/google/appengine/api/blobstore/blobstore.py", line 270, in create_upload_url
gs_bucket_name=gs_bucket_name)
File "<snip>/google_appengine_1.7.6/google/appengine/api/blobstore/blobstore.py", line 334, in create_upload_url_async
_get_result_hook, lambda rpc: rpc.response.url())
File "<snip>/google_appengine_1.7.6/google/appengine/api/blobstore/blobstore.py", line 223, in _make_async_call
rpc = create_rpc()
File "<snip>/google_appengine_1.7.6/google/appengine/api/blobstore/blobstore.py", line 217, in create_rpc
return apiproxy_stub_map.UserRPC('blobstore', deadline, callback)
File "<snip>/google_appengine_1.7.6/google/appengine/api/apiproxy_stub_map.py", line 405, in __init__
self.__rpc = CreateRPC(service, stubmap)
File "<snip>/google_appengine_1.7.6/google/appengine/api/apiproxy_stub_map.py", line 67, in CreateRPC
assert stub, 'No api proxy found for service "%s"' % service
AssertionError: No api proxy found for service "blobstore" 
```

我已经回到最基本的情况：Google App Engine SDK 1.7.6（目前最新）和 Python 2.7.2。

我的路径是这样的：

```
>>> from pprint import pprint as p
>>> p(sys.path)
['',
'<snip>/google_appengine_1.7.6',
'<snip>/google_appengine_1.7.6/lib',
'<snip>/google_appengine_1.7.6/lib/yaml-3.10',
'<snip>/google_appengine_1.7.6/lib/django-1.4',
'/usr/lib/python2.7',
'/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk',
'/usr/lib/python2.7/lib-old',
'/usr/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages/PIL',
'/usr/lib/python2.7/dist-packages/gst-0.10',
'/usr/lib/python2.7/dist-packages/gtk-2.0',
'/usr/lib/pymodules/python2.7'] 
```

有趣的是，如果我只在路径中使用基本 GAE 目录尝试此操作，我会得到：

```
ImportError: No module named yaml 
```

Could this indicate I have something misconfigured in the SDK?

I appreciate anything you can offer!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:13:22.600

it looks like you are trying this from a plain python prompt.

You have some serious work ahead of you to get this to work (ie probably won't get it to work if your new to appengine, I have been using appengine since it came out and I wouldn't bother trying ;-).

You should be using the remote_api_shell if you want to use a python shell, and be connected to a server (dev or prod appengine) and your just exploring.

The code fragments in the docs you refer to are for code to be run by app engine app, either under the dev server or in production.

# c++ - 类头外的模板运算符重载实现

> ID：15724738
> 
> 赞同：5
> 
> 时间：2013-03-30T23:41:28.980
> 
> 标签：c++, templates, operator-overloading, friend

'util.h' 中定义的以下代码编译和链接。但是，当我将运算符重载的实现移到“util.cc”中时，链接器无法解析符号。这是可能的，还是由于模板的性质而不能这样做？

谢谢，

* * *

## 在职的

实用程序.h

```
template<class T>
struct Rect {
  T x, y, w, h;

  friend bool operator ==(const Rect<T> &a, const Rect<T> &b) {
    return (a.x == b.x && a.y == b.y && a.w == b.w && a.h == b.h);
  }

  friend bool operator !=(const Rect<T> &a, const Rect<T> &b) {
    return !(a == b);
  }
}; 
```

## 不工作

实用程序.h

```
template<class T>
struct Rect {
  T x, y, w, h;

  friend bool operator ==(const Rect<T> &a, const Rect<T> &b);
  friend bool operator !=(const Rect<T> &a, const Rect<T> &b);
}; 
```

实用程序.cc

```
template<class T>
bool operator ==(const Rect<T> &a, const Rect<T> &b)
{
    return (a.x == b.x && a.y == b.y && a.w == b.w && a.h == b.h);
}

template<class T>
bool operator !=(const Rect<T> &a, const Rect<T> &b)
{
    return !(a == b);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T00:12:11.520

由于@AndyProwl[链接](https://stackoverflow.com/a/495056/819272)中解释的原因，您的实际问题的答案是否定的，即使您将运算符定义包含在标题`util.h`中，答案仍然是否定的。

原因是这些运算符实际上**是非模板**函数，它们被**注入**到它们被定义的类的封闭范围中，作为类模板实例化**的副作用**。换句话说，这个类模板

```
template<class T>
struct Rect {
  T x, y, w, h;

  friend bool operator ==(const Rect<T> &a, const Rect<T> &b);
  friend bool operator !=(const Rect<T> &a, const Rect<T> &b);
}; 
```

为每种类型生成以下两个**非模板函数**`T`

```
bool operator ==(const Rect<T> &a, const Rect<T> &b);
bool operator !=(const Rect<T> &a, const Rect<T> &b); 
```

如果您还定义了函数模板

```
template<class T>
bool operator ==(const Rect<T> &a, const Rect<T> &b)
{
    return (a.x == b.x && a.y == b.y && a.w == b.w && a.h == b.h);
}

template<class T>
bool operator !=(const Rect<T> &a, const Rect<T> &b)
{
    return !(a == b);
} 
```

并在您的代码中调用它们，然后名称查找和参数推导毫无困难地继续进行，但函数重载决议将以平局结束，该平局被非模板类内友函数打破。但是当这些没有定义时，你的程序将**无法链接**。

There are two escapes: define the operators in-class (as you already provided) or (again as alluded to by @AndyProwl) to befriend the general operator templates inside the class with this peculair syntax

```
// forward declarations
template<typename T> struct Rect;
template<typename T> bool operator==(const Rect<T>&, const Rect<T>&);
template<typename T> bool operator!=(const Rect<T>&, const Rect<T>&);

template<class T>
struct Rect {
  T x, y, w, h;

  // friend of operator templates
  friend bool operator == <>(const Rect<T> &a, const Rect<T> &b);
  friend bool operator != <>(const Rect<T> &a, const Rect<T> &b);
};

// definitions of operator templates follow 
```

Note that befriending templates is a tricky business, as explained in this [old column](http://www.drdobbs.com/befriending-templates/184403853) by Herb Sutter.

# rspec - Rspec error cannot find matching line from backtrace

> ID：15724741
> 
> 赞同：4
> 
> 时间：2013-03-30T23:42:13.937
> 
> 标签：rspec, rspec-rails

I have written a group of 23 tests for my user model and all of them are failing with the following error:

```
Failure/Error: Unable to find matching line from backtrace 
ArgumentError: 
  block not supplied 
```

I have tried messing with different versions of capybara, rspec-rails, and growl, but to be perfectly honest, I really don't know what I'm doing here, and don't really understand the error. I would really appreciate help from anyone who could point me in the right direction.

Here is a sample from my `user_spec.rb` file

```
require 'spec_helper'

describe User do
  before @user = User.new(name: 'example', password: 'foobar', password_confirmation: 'foobar',
                        email: 'example@example.com', description: 'Lorem ipsum dolor...')

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:description) }
  it { should respond_to(:admin) }
  it { should respond_to(:remember_token) }

  describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
  end
  .
  .
  .
end 
```

Here are the relevant parts of my `Gemfile`:

```
group :development do
  gem 'rspec-rails', '2.11.0'
  gem 'guard'
  gem 'guard-spork', :github => 'guard/guard-spork'
  gem 'guard-rspec'
  gem 'spork'
  gem 'sqlite3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.9.1', :require => false
  gem 'growl', '1.0.3'
  gem 'factory_girl_rails', '4.1.0'
end 
```

Thanks for reading!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T09:11:08.727

The problem here is that you have not specified a block for the before method:

```
before @user = User.new(name: 'example', password: 'foobar', password_confirmation: 'foobar',
                    email: 'example@example.com', description: 'Lorem ipsum dolor...') 
```

should be:

```
before do
  @user = User.new(name: 'example', password: 'foobar', password_confirmation: 'foobar',
                    email: 'example@example.com', description: 'Lorem ipsum dolor...')
end 
```

Admittedly the error message is not very helpful here. The Ruby interpreter can't always pinpoint the exact line in the program that an error is raised, e.g. when there is a Stack level deep error' but I'm not sure why it cannot in this case.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T22:40:06.247

I had this problem and was able to find my answer [here](https://stackoverflow.com/questions/24043426/error-comparison-of-symbol-with-module-failed-after-upgrading-to-rspec-3). Though in doesn't apply in this case, my problem was that Rails 3 doesn't allow symbols to name describe blocks, ie you have to have `describe 'create'` instead of `describe :create`.

# python - 多次显示绘图窗口

> ID：15724747
> 
> 赞同：3
> 
> 时间：2013-03-30T23:43:00.207
> 
> 标签：python, matplotlib

```
import matplotlib
import pylab
x=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
y=[2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
plotting=pylab.plot(x,y)
pylab.show(plotting) 
```

上面的代码（特别是最后一行）会弹出下图：

![代码运行时的结果](../Images/686a907539d38bed8432faa2101d5d80.png)

如果我关闭图表窗口并再次运行最后一行 ( `>>>pylab.show(plotting)`)，图表将不会再次弹出。为什么呢？上面的代码在 Python 2.7.3 中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T23:52:06.713

因为当您关闭窗口时，python 会撕下并删除该图形。再次调用`show`无济于事，因为没有图形可显示。

`show`像你在这里做的那样传递一个论点没有任何作用（ [doc](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.show)）。唯一`show`需要的参数是 的关键字参数`block`。

# c++ - 如何在不依赖 IDE 的情况下链接存档？

> ID：15724748
> 
> 赞同：0
> 
> 时间：2013-03-30T23:43:03.320
> 
> 标签：c++, networking, tcp, winsock, command-prompt

我一直在使用 C++ 的 TCP 套接字教程，并遇到以下行 -

> 在我们开始之前，您需要包含 winsock.h 并将 libws2_32.a 链接到您的项目，以便使用 TCP/IP 所需的 API。如果这不可行，请使用 LoadLibrary() 在运行时加载 ws2_32.dll，或使用一些类似的方法。

经过一番研究，我发现一个声称可以通过以下两行来完成的消息来源 -

```
#include <winsock.h>
#pragma comment(lib, "ws2_32.lib") 
```

但是，两者中的一个似乎不起作用（我认为这将是第二行，因为第一行相当简单）。这是我要运行的代码-

```
#include <iostream>
#include <winsock.h>
#pragma comment(lib, "ws2_32.lib")

int main() {
    std::cout << gethostbyname("www.google.com") << std::endl;
    return 0;
} 
```

此代码应打印 Google 的 IP 地址，但会出现以下错误 -

> C:\Users\Owner\AppData\Local\Temp\ccOXoE0F.o:SC.cpp:(.text+0x1e): 未定义对 'gethosebyname@4' 的引用
> 
> collect2: ld 返回 1 个退出状态

更多谷歌搜索显示，其原因是库的链接不正确。根据这些消息来源，链接它的唯一方法是通过 IDE。我通常将 Notepad++ 与命令提示符一起使用，因此我询问是否可以在不使用 IDE 的情况下正确链接此存档。

如果不可能，那么看来我将不得不重新开始使用 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:51:15.487

No, IDEs have nothing to do with this, and your desire is correct and entirely understandable. Since you seem to be on Windows, I'm not sure what kind of command-line toolchain you are using, but if it's one of the GNU-compatible ones (GCC with MinGW, for example), then you can specify the `-lws2_32` linker flag to link against the library.

# twitter-bootstrap - 悬停时显示完整的侧边栏

> ID：15724749
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:43:04.160
> 
> 标签：twitter-bootstrap, frameworks, web, stack-overflow

我正在我网站上的侧边栏上工作。我正在使用引导框架。我创建了一个侧边栏，但现在我需要将其悬停。我正在寻找类似于 Facebook 的新侧边栏的东西。任何人都可以帮助我吗？

[http://i.stack.imgur.com/XUS6o.jpg](http://i.stack.imgur.com/XUS6o.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:55:50.313

> [这里](http://www.quackit.com/css/codes/css_floating_menu.cfm)您将找到 CSS 浮动菜单栏的代码，也称为“固定菜单”和“悬停菜单”，当您滚动页面时，浮动菜单会保持在固定位置。当您滚动时，它们似乎“浮动”在页面顶部。

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:50:23.250

这是一个引导资源，将帮助您实现“抽屉”样式菜单（从左侧浮动） - [http://tech.xtremelabs.com/html5-facebook-style-sliding-menu-using-twitter-bootstrap-坍塌/](http://tech.xtremelabs.com/html5-facebook-style-sliding-menu-using-twitter-bootstrap-collapse/)

# scala - sbt silently fails to import a dependency

> ID：15724751
> 
> 赞同：0
> 
> 时间：2013-03-30T23:43:17.007
> 
> 标签：scala, sbt

sbt is driving me nuts, by suddenly not pulling in a dependency any more. The setup is as follows

```
libraryDependencies ++= Seq(
  "org" %% "foo" % "1.2",
  "org" %% "bar" % "3.4"
) 
```

After an `sbt clean update`, I am missing the `bar` library. E.g.

```
$ ls lib_managed/jars/org/
foo_2.10 
```

Consequently the compilation fails because that library is missing.

This is with sbt 0.12.3\. What is the **magic spell** to make it behave again and reconsider importing my library? Something I should wipe?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:46:21.710

Wipe:

```
$ rm -r ~/.ivy2/cache/org/ 
```

# java - 无法在 Activity 中获取小部件 ID

> ID：15724752
> 
> 赞同：0
> 
> 时间：2013-03-30T23:43:17.927
> 
> 标签：java, android, android-widget

我是新手，这对我来说是个大难题。我有一个带有提供程序、配置和额外活动的小部件，当您单击小部件时会调用该小部件。我需要确定活动中的小部件 ID。

在提供程序中，我将其设置为使用 .setOnClickPendingIntent 从 onUpdate 调用活动，并在意图中添加小部件 ID。当我尝试从活动中的意图获取小部件 ID 时，它始终为 0（但活动被称为正常）。我可以在配置中检索 ID，但不能在具有相同代码的活动中检索。

我敢肯定这将是一些基本的/业余的错误。感谢您的帮助！

截断代码：

**提供者：**

```
public static String ACTION_WIDGET_CLICK = "ClickWidget";

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        ComponentName thisWidget = new ComponentName(context,
        HelloWidgetProvider.class);
        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
        for (int widgetId : allWidgetIds) {
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
            Intent clickIntent = new Intent(context, test.class);
            clickIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            clickIntent.setAction(ACTION_WIDGET_CLICK);
            PendingIntent clickPendingIntent = PendingIntent.getActivity(context, 0, clickIntent, 0);
            views.setOnClickPendingIntent(R.id.update, clickPendingIntent);
            appWidgetManager.updateAppWidget(widgetId, views);
        }
    } 
```

所以在点击时，它会调用pendingIntent，它会调用由ACTION_WIDGET_CLICK定义的活动。**显现：**

```
<activity android:name=".test">
<intent-filter>
<action
android:name="com.example.widget_create.HelloWidgetProvider.ACTION_WIDGET_CLICK"/>
</intent-filter>
</activity> 
```

所以这称为**测试活动：**

```
public class test extends Activity {

    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent clickIntent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {         
            mAppWidgetId = extras.getInt(
            AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID);
        }
    } 
```

它没有收到额外内容，然后小部件 ID 设置为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T20:33:11.640

如果 getExtras 在（例如）活动中给出相同的值，则必须更改 requestCode（可能更改为 widgetid）

```
Intent clickIntent = new Intent(context,ActivityName.class);
clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,myWidgetId);
PendingIntent pendingIntent = PendingIntent.getActivity(context, myWidgetId, clickIntent,
                        PendingIntent.FLAG_UPDATE_CURRENT);
remoteViews.setOnClickPendingIntent(R.id.layout,pendingIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:49:19.860

你能复制/粘贴你进入控制台日志的内容吗？

检查您的清单文件中的 android:name 标记，它必须是带有大写字母的 android:name=".Test"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:18:54.463

在`onUpdate`您传递 IDS（ID 数组）

```
clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds); 
```

在您的活动中，您正在询问 por ID（只有一个 ID）

```
mAppWidgetId = extras.getInt(
    AppWidgetManager.EXTRA_APPWIDGET_ID,
    AppWidgetManager.INVALID_APPWIDGET_ID); 
```

当您在 for 循环遍历每个小部件 ID 时，您应该使用以下命令更改提供者的意图：

```
clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId); 
```

注意`EXTRA_APPWIDGET_ID`and`widgetId`值而不是 old `appWidgetIds`。

# css - 为什么IE中的子菜单链接只显示一半背景？

> ID：15724755
> 
> 赞同：0
> 
> 时间：2013-03-30T23:43:43.890
> 
> 标签：css, internet-explorer

对于现代浏览器，我在菜单悬停状态背景上使用 CSS 渐变。IE 中的渐变滤镜看起来不太好，所以我将使用从 chrome 屏幕截图中获取的背景图像。我遇到的问题是，在 IE 中，当子菜单链接悬停时，仅显示一半元素背景，下半部分被剪裁。使用 IE 开发人员工具，该元素似乎具有适当的高度，但只显示了一半的背景。

```
.main-navigation li ul li a {
    overflow: visible;
    font-family: 'HelveticaNeue', helvetica;
    font-size: 12px;
    background: rgba(220, 220, 220, 0.0);
    border-bottom: 1px solid rgba(0, 0, 0, 0.0);
    width: 178px;
    margin: 0px auto;
    height: 38px;
    line-height: 3.2em;
    color: #fefefe;
    text-transform: none;
    -webkit-transition: none;
    -moz-transition: none;
    -o-transition: none;
    -ms-transition: none;
    transition: none;
}   

.main-navigation li ul li a:hover {
    background: #dddddd; /* Old browsers */
    background: -moz-linear-gradient(top, #dddddd 0%, #545454 2%, #191919 95%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(2%,#545454), color-stop(95%,#191919)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #dddddd 0%,#545454 2%,#191919 95%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #dddddd 0%,#545454 2%,#191919 95%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #dddddd 0%,#545454 2%,#191919 95%); /* IE10+ */
    background: linear-gradient(to bottom, #dddddd 0%,#545454 2%,#191919 95%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dddddd', endColorstr='#191919',GradientType=0 ); /* IE6-9 */
    border: none !important;
    -webkit-transition: none;
    -moz-transition: none;
    -o-transition: none;
    -ms-transition: none;
    transition: none;
    background-image: url('img/subhoverbg.png') !important;
    background-repeat: repeat;
} 
```

# ruby - Nokogiri 使用 xpath 解析 XML

> ID：15724756
> 
> 赞同：0
> 
> 时间：2013-03-30T23:43:55.857
> 
> 标签：ruby, ruby-on-rails-3, xml-parsing, nokogiri

我试图弄清楚如何通过 api 调用解析返回的 XMl，我正在使用 Nokogiri 并正在尝试使用 xpath。我想做的是显示所有已返回的“标题”属性

到目前为止，我有一个方法

```
def getcontact
doc = Nokogiri::XML(open(url))
doc.xpath('//xmlns:feed/xmlns:entry')
end 
```

控制器

```
@mycontacts = getcontact 
```

看法

```
<% @mycontacts.each do |c| %>
 <%= c.xpath("//title") %>
<% end %> 
```

XML

```
<entry>
 <id>xxx</id>
 <updated>xxx</updated> 
 <category  scheme="xxx"  term="xxx"/>
 <title type="text">xxx</title>
 <link rel="xxx" type="xxx"    href="xxx"/> 
 <link rel="xxx0gmail.com/b6ea0e8ddbc4e5"/>     
 <link rel="xx" type="xxx" href="xxx"/> <link rel="xx" type="axx" href="xxx"/> 
 <gd:email rel="xxx" address="xxx" primary="xx"/> 
</entry> 
```

我没有得到任何返回，有人能指出我做错了什么吗，我还注意到返回的 XML 中有 html 标签，我可以把它去掉吗，例如 type=text 在 title 属性中

更新

所以我试过这个

```
doc.xpath('//xmlns:feed/xmlns:entry/xmlns:title').text 
```

但这会将所有标题作为字符串返回

更新 2

看法

```
<% @mycontacts.each do |c| %>
 <%= c.xpath('xmlns:title').text %><br>
<% end %> 
```

方法

```
doc.xpath('//xmlns:feed/xmlns:entry') 
```

所以这列出了我所有的标题，但如果有任何空白条目，则有一条空记录。我想现在需要从循环中删除这些

这是正确的，有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:57:46.213

使用方法 2，尝试使用：

```
d.xpath('//feed/entry[title[node()]]' 
```

This will return a nodeset containing nodes that have a non-empty title. Then you can iterate over set however you like.

# jquery - 动态添加图像时，如何阻止 HTML 表格更改单元格高度？

> ID：15724774
> 
> 赞同：1
> 
> 时间：2013-03-30T23:46:41.513
> 
> 标签：jquery, css, html

I'm trying to get an image to appear next to a select when an option is chosen. 不幸的是，当图像被添加时，整个桌子都会震动。我试过改变填充、高度和宽度，但我基本上是在黑暗中四处乱窜。如果有人可以帮助我，我将不胜感激。这是小提琴：

[http://jsfiddle.net/vwWb9/7/](http://jsfiddle.net/vwWb9/7/)

这是代码。我已将它们全部放入一个文件中，因此您可以轻松地将其复制并粘贴到您的 TE 中查看。

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>

    <style type="text/css">

    @CHARSET "ISO-8859-1";

html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video
    {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent
}

body {
    line-height: 1
}

article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section
    {
    display: block
}

nav ul {
    list-style: none
}

blockquote,q {
    quotes: none
}

blockquote:before,blockquote:after,q:before,q:after {
    content: none
}

a {
    margin: 0;
    padding: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent
}

ins {
    background-color: #ff9;
    color: #000;
    text-decoration: none
}

mark {
    background-color: #ff9;
    color: #000;
    font-style: italic;
    font-weight: bold
}

del {
    text-decoration: line-through
}

abbr[title],dfn[title] {
    border-bottom: 1px dotted;
    cursor: help
}

table { /*  border-collapse:collapse;*/
    border-spacing: 0
}

hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0
}

input,select {
    vertical-align: middle
}

/**********CUSTOMISED***********/  
body {
    font-size: 62.5%;
}

h1 {
    font-size: 2em;
}

h2 {
    font-size: 1.5em;
}

h3 {
    font-size: 1.2em;
}

h4 {
    font-size: 1em;
}

h5 {
    font-size: 0.8em;
}

h6 {
    font-size: 0.7em
}
/**********END CUSTOMISED***********/
#app_cont {
    border: 1px solid grey;
    height: auto;
    width: 500px;
    margin: 200px auto 200px auto;
    background: #efefef;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
    font-family: Arial;
    font-size: 1.6em;
    padding: 10px
}

#ab_cont {
    float: left;
    height: auto;
    width: 100%;
    margin: 10px 0 0px 0;
}

#btn_cont {
    border: 1px solid grey;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    background: #dcdcdc;
    clear: both;
    padding: 10px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.app_btns {
    margin: 0px 0px 0px 0px;
    min-width: 90px;
    text-align: center;
    font-size: 16px;
    font-family: Arial;
    font-weight: normal;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    border: 1px solid #ababab;
    padding: 9px 18px;
    text-decoration: none;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%, #ededed),
        color-stop(100%, #dfdfdf) );
    background: -moz-linear-gradient(center top, #ededed 5%, #dfdfdf 100%);
    background: -ms-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
    filter: progid :                                                        
                                          DXImageTransform.Microsoft.gradient
        ( 

                                                   startColorstr = 

                                                     '#ededed', endColorstr = 

                                        '#dfdfdf' );
    background-color: #ededed;
    color: #777777;
    display: inline-block;
    text-decoration: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.app_btns:hover {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%, #dfdfdf),
        color-stop(100%, #ededed) );
    background: -moz-linear-gradient(center top, #dfdfdf 5%, #ededed 100%);
    background: -ms-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
    filter: progid :                                                        
                                          DXImageTransform.Microsoft.gradient
        ( 

                                                   startColorstr = 

                                                     '#dfdfdf', endColorstr = 

                                        '#ededed' );
    background-color: #dfdfdf;
    cursor: pointer;
}

.app_btns:active {
    position: relative;
    top: 1px;
}

.disabled {
    margin: 0;
    min-width: 90px;
    text-align: center;
    font-size: 16px;
    font-family: Arial;
    font-weight: normal;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    border: 1px solid grey;
    padding: 9px 18px;
    text-decoration: none;
    background: rgb(156, 156, 156);
    color: #efefef !important;
    display: inline-block;
    text-decoration: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.disabled:hover {
    cursor: default;
}

#opts_tbl {
    margin-bottom: 5px;
    table-layout: fixed;
    width:500px;

}

#opts_tbl td {

    padding: 15px 0px 15px 0px;

    overflow: hidden;
}

.opt_slcts {
    width: 165px;
    padding: 4px 3px 4px 0px;
    text-indent: 1px;
    line-height: 23px;

}

.val_ers {

    font-size: 0.8em;
    color: #1133aa;
}

.val_img {
    float:left;
    height: 24px;
    width: 24px;
    padding: 0px 0px 0px 15px;
}

    </style>
</head>
<body>
    <div id="app_cont">
<div id="opts_pnl">

                <table id="opts_tbl">
                    <tr>
                        <td>
                            <label for="num_slct" class="opt_labels">Options 1:</label>
                        </td>
                        <td>
                            <select name="num_slct" id="num_slct" class="opt_slcts">
                                <option value="-"   >-</option>
                                <option value="5"   >5</option>
                                <option value="10"  >10</option>
                                <option value="15"  >15</option>
                                <option value="20"  >20</option>
                                <option value="25"  >25</option>
    <!--                        <option value="3"   >3</option>                             -->
                            </select> 
                        </td>
                        <td id="num_slct_er" class="val_ers">Please make a selection.</td>
                    </tr>
                    <tr>
                        <td id="tl_c">
                            <label for="top_slct" class="opt_labels">Options 2:</label>
                        </td>
                        <td id="tr_c">
                            <select name="top_slct" id="top_slct" class="opt_slcts">
                                <option value="-"       id="opt-1"                      >-</option>
                                <option value="rnd_sel" id="opt-2"                      >Option</option>
                                <option value="blank"   id="blank" disabled="disabled"  ></option>
                                <optgroup label="Misc.">
                                    <option value="cmn_mis"     id="opt-3">Option</option>
                                    <option value="ib4e"        id="opt-1">Option</option>
                                    <option value="fin_e"       id="opt-1">Option</option>
                                    <option value="dbl_cons"    id="opt-1">Option</option>
                                    <option value="slt_lts"     id="opt-6">Option</option>  
                                    <option value="plrs"        id="opt-1">Option</option>
                                    <option value="blank"       id="blank" disabled="disabled"></option>
                                </optgroup>

                            </select> 
                        </td>
                        <td id="top_slct_er" class="val_ers">Please make a selection.</td>
                    </tr>
                    <tr>
                        <td id="bl_c">
                            <label for="diff_slct"  class="opt_labels">Options 3:</label>
                        </td>
                        <td id="br_c">
                            <select name="diff_slct" id="diff_slct" class="opt_slcts">
                                <option value="-" id="item-1">-</option>
                                <option value="1" id="item-2">Option</option>
                                <option value="2" id="item-3">Option</option>
                                <option value="3" id="item-4">Option</option>
                            </select> 
                        </td>
                        <td id="diff_slct_er" class="val_ers">Please make a selection.</td>
                    </tr>
                </table>

                <div id="btn_cont" unselectable="on">
                        <a href="#" id="strt_btn" class="disabled"  unselectable="on">Start</a>
                        <a href="#" id="help_btn" class="app_btns hlp_btns"  unselectable="on">Help</a>     
                </div>

        </div><!--#opts_pnl-->
    </div><!--#app_cont -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
    <script type="text/javascript">

$('.opt_slcts').on('change', function(){

        var errors = 0;

        $('.opt_slcts').each(function(){

            var id = this.id + "_er",
                tick = "<img src='images/tick.png' alt='tick' class='val_img'>";

            if($(this).val() == "-"){

                errors++;

                $('#' + id).empty();
                $('#' + id).append('Please make a selection.');

            } else {

                $('#' + id).empty();
                $('#' + id).append(tick);
            }

        });

        if(errors > 0){

            $('#strt_btn').attr('class', 'disabled');

        } else {

            $('#strt_btn').attr('class', 'app_btns');

        }

    });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:53:58.970

我不确定这些图像应该有多大，但这似乎可以解决您的问题：

```
.val_ers {
    vertical-align: middle;
} 
```

[http://jsfiddle.net/vwWb9/8/](http://jsfiddle.net/vwWb9/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T23:55:29.230

展开是 display: table-cell 的自然行为；它忽略了高度/宽度属性。

Try to add `line-height: 24px` to the `td`, it will make the `td`start with the same height as the image.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:09:23.093

I see answers like:

```
.val_ers {
  vertical-align: middle;
} 
```

but what happens if you create another TD-element with another image?

I would recommend to use:

```
#opts_tbl td {   
    vertical-align:middle;
    padding: 15px 0px 15px 0px; 
    overflow: hidden;
} 
```

# java - 查找二叉搜索树是否完美？

> ID：15724775
> 
> 赞同：0
> 
> 时间：2013-03-30T23:46:47.867
> 
> 标签：java, algorithm, binary-search-tree

我需要确定二叉树是否是完美的二叉树，这意味着每个节点除了最后一层之外还有 2 个节点。这些是我迄今为止所拥有的方法，但它似乎并没有奏效，我几乎一直在寻找它。有任何想法吗？

```
private boolean isPerfect(BinaryNode<AnyType> t){

    int sizeTree = size(t);

    double num =  Math.log(sizeTree+1)/Math.log(2);  

    int checkNum = (int) (Math.floor(num));

    if(num - checkNum == 0)
        return true;
    else{
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T00:02:00.567

因为这听起来像是“学习练习”，所以这里有一个提示：

*   比较最小和最大树节点深度。

注意：这只是一种方法......但它应该足以让你思考。

* * *

@phcoding 的评论指出，您的问题实际上可能是“完美搜索树”的替代定义之间的不匹配。您的代码应该在恰好有`2^N`叶节点（正确排列）的情况下工作。

参考：[http](http://en.wikipedia.org/wiki/Binary_tree) ://en.wikipedia.org/wiki/Binary_tree ...并查找“完整”、“完整”和“完美”二叉树的定义。

# java - JSPF 没有加载 jar 的库

> ID：15724776
> 
> 赞同：0
> 
> 时间：2013-03-30T23:46:55.260
> 
> 标签：java, plugins, classloader

我正在使用 Java 简单插件框架。我导出了一个包含我的插件实现的 jar。实现依赖于一个库，我有一个 jar。该 jar 在我的 jar 的 lib 目录中导出，并添加到我的 jar 的类路径中。

但是当我用 JSPF 加载我的 jar 时，它会因“NoClassDefFound”而失败，因为它在我的 jar 的 lib 目录中找不到该 jar。

如果我的方法偏离基础，我深表歉意；我只需要知道这应该怎么做。如果我的插件实现依赖于另一个 jar，我应该如何将它捆绑为一个 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T08:27:59.363

我使用了 JSPF 并通过以下方式实现了这个要求：

将库 jar 文件放在插件 jar 文件**外部名为 lib 的文件夹中。**（这样 lib 文件夹和插件 jar 文件在同一个文件夹中）。然后我将 lib/"name_of_libjar" 添加到插件 jar 文件的 manifest.mf 文件中的类路径条目（应该在插件 jar 文件 META-INF 文件夹内），它对我来说很好。

# c# - C# 5.0 中的多线程

> ID：15724780
> 
> 赞同：0
> 
> 时间：2013-03-30T23:47:16.093
> 
> 标签：c#, multithreading, c#-5.0

我有以下要求：

有一系列网址，应该下载。

1.  只能同时下载 3 个 url
2.  如果这 3 个 url 中的一个（或多个）完成 - 需要从数组中获取下一个免费 url
3.  如果这 3 个 url 中的一个（或多个）在 X 时间内未完成 - 需要取消此 url
4.  如果 url 数组完成 - 我们等待完成所有当前任务，只有一个来自 main 方法。

如何在 C# 5.0 上做到这一点？我尝试执行以下操作：

```
class Program
{
    static Stopwatch sw = Stopwatch.StartNew();

    static void Main(string[] args)
    {
        List<Task> tasks = new List<Task>();
        string[] urls = new string[] { "http://site1.ru", "http://www.site2.com", "http://site3.com", "http://site4.ru" };
        foreach (var url in urls)
        {
            var task = AsyncVersion(url);
            tasks.Add(task);
        }

        Task.WaitAll(tasks.ToArray());
    }

    static async Task AsyncVersion(string url)
    {
        var webRequest = WebRequest.Create(url);
        Console.WriteLine(
          "Перед вызовом webRequest.GetResponseAsync(). Thread Id: {0}, Url : {1}",
          Thread.CurrentThread.ManagedThreadId, url);
        var webResponse = await webRequest.GetResponseAsync();
        Console.WriteLine("{0} : {1}, elapsed {2}ms. Thread Id: {3}", url,
          webResponse.ContentLength, sw.ElapsedMilliseconds,
          Thread.CurrentThread.ManagedThreadId);

    }
} 
```

哪些部分我不明白：

1.  具体如何控制每个线程（不是只等待一个接一个或所有任务，而是每个线程）
2.  每个进程执行多长时间...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:35:31.587

这看起来是一份理想的工作`Parallel.ForEach()`

您可以通过参数设置并发限制，然后`WebRequest.Timeout`在等待响应时间过长后使用该属性进行保释。

像这样的东西：

```
Parallel.ForEach(
    urls,
    new ParallelOptions { MaxDegreeOfParallelism = 3 },
    url =>
    {
        try
        {
            var request = WebRequest.Create( url );
            request.Timeout = 10000; // milliseconds
            var response = request.GetResponse();
            // handle response
        }
        catch ( WebException x )
        {
            // timeout or some other problem with the request
        }
        catch ( Exception x )
        {
            // make sure this Action doesn't ever let an exception
            // escape as that would stop the whole ForEach loop
        }
    }
); 
```

调用`Parallel.ForEach()`将阻塞调用线程，直到处理完所有 url。
但是，它将使用最多`MaxDegreeOfParallelism`线程来运行工作。

# sql - 复杂的多行聚合 SQL 查询

> ID：15724785
> 
> 赞同：0
> 
> 时间：2013-03-30T23:48:14.640
> 
> 标签：sql, db2, aggregate-functions

我正在寻找一种通过跨多行存在相同外键来聚合的方法。

例如，ID 号 1 和 2 应该聚合在一起，因为它们在所有行中都具有完全相同的外键，而 ID 号 3 在所有行中没有相同的外键，因此应该分开。

注意：使用 DB2

示例源数据：

```
ID  QUANTITY    COLOR
1   10          BLUE
1   10          RED
1   10          GREEN
2   30          BLUE
2   30          RED
2   30          GREEN
3   15          GREEN
3   15          YELLOW 
```

期望的结果集：

```
TEMP_ID     SUMQTY  COLOR
1           40      BLUE
1           40      RED
1           40      GREEN
2           15      GREEN
2           15      YELLOW 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:46:16.133

首先，我们需要确定两个“id”的“颜色”是否相同。以下查询对 进行完全外连接`color`，然后按 聚合`id`。如果两个`id`s 具有相同的颜色，则完整的外连接始终匹配——没有 NULL：

```
select s1.id, s2.id
from s s1 full outer join
     s s2
     on s1.color = s2.color
group by s1.id, s2.id
having sum(case when s1.color is null then 1 else 0 end) = 0 and
       sum(case when s2.color is null then 1 else 0 end) = 0 
```

Using the same idea, we can assign the minimum s1.id as the "id" of the group. This group id then gives us the information needed for the final aggregation:

```
select s3.groupid, sum(s3.quantity) as quantity, s3.color as color
from (select min(s1.id) as groupid, s2.id
      from (select s1.id, s2.id
            from s s1 full outer join
                 s s2
                 on s1.color = s2.color
            group by s1.id, s2.id
            having sum(case when s1.color is null then 1 else 0 end) = 0 and
                   sum(case when s2.color is null then 1 else 0 end) = 0
           ) ss
      group by s2.id
     ) sg join
     s s3
     on sg.id = s.id
group by sg.groupid, s3.color 
```

In DB2 you can also do this with `listagg`. First you need to get the list of colors to identify commonality, and then use it:

```
select min(s.id) as groupid, sum(s.quantity) as quantity, s.color
from (select id, listagg(color order by color) as thegroup
      from s
      group by id
     ) sg join
     s
     on sg.id = s.id
group by sg.thegroup, s.color 
```

This is probably more efficient than the first solution.

# c - How to capitalize the first letter of each word in an array in C

> ID：15724799
> 
> 赞同：3
> 
> 时间：2013-03-30T23:50:39.790
> 
> 标签：c, arrays

I am trying to make a simple program that stores a user-input sentence in an array of at most 80 characters and then capitalizes each word of in the sentence. I think I'm on the right track, however when I run the program, only the first word of the sentence is displayed.

```
#include<stdio.h>
 int main(void)
{   
 int i;         /*indexing integer*/
 char sen[81]; /*specify total of 80 elements*/
 printf("Enter a sentence no longer than 80 characters: \n\n");
 scanf("%s",sen);
 if((sen[0]>='a') && (sen[0]<='z'))
 {
  sen[0]=(char)(sen[0]-32); /*-32 in ascii to capitalize*/
 }
  for(i=0;sen[i]!='\0';i++)   /*loop until null character*/
  {
  if(sen[i]==' ')             /*if space: next letter in capitalized*/
   {
    if((sen[i+1]>='a') && (sen[i+1]<='z'))
    sen[i+1]=(char)(sen[i+1]-32);
   }
  }
  printf("%s",sen);     
  return 0;
} 
```

I have a feeling it is only printing the first word in the array because of the first if statement after the scanf, but I am not completely sure. Any help would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:53:49.123

> I have a feeling it is only printing the first word in the array because of the first if statement after the scanf

No, that's because the `%s` specifier makes `scanf()` scan up to the first whitespace. If you want to get an entire line of text, use `fgets()`:

```
char sen[81];
fgets(sen, sizeof(sen), stdin); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:53:57.393

By default, the `%s` conversion specifier causes scanf to stop at the first whitespace character. Therefore you could either use the `%80[^\n]` format or the `fgets` function.

```
#include <stdio.h>

scanf("%80[^\n]", sen); 
```

Or:

```
#include <stdio.h>

fgets(sen, sizeof sen, stdin); 
```

However, since `scanf` reads *formatted data*, human inputs are not suitable for such readings. So `fgets` should be better here.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:58:48.430

dont use scanf when you want to take multiple words as input: use either gets() or fgets().. I run your code with gets() and puts() and it worked.

# sql - SQL Server 2000 grouping scenario, every 3 hours

> ID：15724804
> 
> 赞同：0
> 
> 时间：2013-03-30T23:51:13.497
> 
> 标签：sql, sql-server, sql-server-2000

I have a scenario I need help with. I have to create a sql query using SQL Server 2000 that will do the following:

I have data that looks like the table below. I need to find a way to determine an average temparture every 3 hours. The tricky part is the every 3 hour grouping should be like the following:

```
1st Average Grouping - (03/01/2013 13:00, 03/01/2013 14:00, 03/01/15:00)
2nd Average Grouping - (03/01/2013 14:00, 03/01/2013 15:00, 03/01/16:00)
3rd Average Grouping - (03/01/2013 15:00, 03/01/2013 16:00, 03/01/17:00)

Date        Time        Temperature
03/01/2013  13:00            75
03/01/2013  14:00            80
03/01/2013  15:00            82
03/01/2013  16:00            82
03/01/2013  17:00            81
03/01/2013  18:00            80 
```

Its a weird use case and a bit diffult to put down on paper. Its an average of 3 hours, but every hour??

I would greatly appreciate any ideas on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:52:06.397

In SQL Server 2000, you would do this with a join. However, to make the joins easier and to dispense with the date arithmentic, I'm going to first define a join key.

```
select t1.date, t2.time, avg(t2.temperature) as avgTemp
from (select t.*,
             (select count(*) from t t2 where t2.date < t.date or t2.date = t.date and t2.time <= t.time
             ) as seqnum
      from t
     ) t1 left outer join
     (select t.*,
             (select count(*) from t t2 where t2.date < t.date or t2.date = t.date and t2.time <= t.time
             ) as seqnum
      from t
     ) t2
     on t.seqnum between t2.seqnum - 2 and t.seqnum
group by t1.date, t1.time 
```

This is much easier in more recent versions of SQL Server (because they support window functions). You might consider upgrading.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:20:48.833

Assuming Date and time fields are both varchars, below is what I got. (if they are not varchars, you will have to remove any unnecessary conversions I am doing below to get a datetime out of those two fields):

```
select t1.[Date],t1.[Time],Avg(t2.Temp)
from MyTable t1, MyTable t2
where
-- getting datetime out of date(varchar) and time(varchar) fields
dateadd(hh,(cast(left(t1.[Time],2),(convert(datetime,t1.[Date],101)))  
between
-- matching row from second table
dateadd(hh,(cast(left(t2.[Time],2),(convert(datetime,t2.[Date],101)))
and
-- matching row plus two hrs
dateadd(hh,2,dateadd(hh,(cast(left(t2.[Time],2),(convert(datetime,t2.[Date],101))))
group by t1.[Date],t1.[Time] 
```

Not sure if there is a way without the join... I don't think so.

# javascript - webRTC HTML5 白板/视频聊天

> ID：15724806
> 
> 赞同：0
> 
> 时间：2013-03-30T23:51:21.527
> 
> 标签：javascript, node.js, socket.io, webrtc, whiteboard

我正在探索使用 webRTC、HTML5、socket.io 和 node.js 构建前沿白板应用程序（很像 Big Blue Button 或 Wimba）的选项。这将用于一对一的通信......一次最多有两个用户相互通信。

我想使用数据通道在客户端之间传递白板数据，然后在服务器端有某种可以记录视频/音频/白板操作的侦听器。服务器监听器实际上会窃听白板/音频/视频聊天。换句话说，如果服务器到客户端的连接变得迟缓，它不会影响 P2P（客户端到客户端）webRTC 连接的质量。这样，服务器可以以较低的优先级记录白板交互，使一对一聊天交互尽可能高速。

是否有任何库或 JavaScript 框架可以很好地用于我应该知道的共享白板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:59:17.613

免责声明：此答案已过时，请参阅[此答案](https://stackoverflow.com/questions/18833920/webrtc-for-realtime-scaling/21103641#21103641)以了解如何完成此类事情。

* * *

WebRTC 还很新，支持也有点不稳定。不用说，不存在为您做这种事情的库或框架。

您可能想要做的是使用 WebSockets（您已经在使用 socket.io）将一些数据从客户端发送到服务器，同时通过 WebRTC 发送数据。

您可以[检查连接的速度](https://stackoverflow.com/questions/5529718/how-to-detect-internet-speed-in-javascript)（通过示例上传和示例下载）并决定要使用哪种策略：

1.  使用 WebRTC 不记录，或仅在客户端记录并在完成后上传到服务器
2.  同时使用 WebRTC 和 WebSockets ，仅使用 WebSockets 将“一些”数据传输到服务器，其中“一些”取决于连接可以容纳的内容。
3.  仅使用 WebSocket 并将所有数据传输到服务器，不涉及 P2P。

I think the most viable options are the first and second.

This also greatly depends on the implementation of the White Board, if you're only passing vector data for what was drawn on the board, even AJAX can handle the load, however, if you are passing live video I think nothing but WebRTC will effectively handle the load.

Good luck! This sounds like an interesting idea. I hope I will be able to edit this answer in a few months with a long list of libraries and frameworks that would let you easily do this.

# r - Error in R caret.train in method="gam"

> ID：15724807
> 
> 赞同：2
> 
> 时间：2013-03-30T23:51:36.090
> 
> 标签：r, regression

I am having an error whenever I try to use `gam` as a method in `caret.train` function.

`fit<- train(P~log(DR)+log(L2M)+s(TSM)+s(TH)+s(II),data=training,method="gam")` `Error: $ operator is invalid for atomic vectors`

Here is one of the warnings:

```
In eval(expr, envir, enclos) :
model fit failed for Resample16: select=FALSE, method=GCV.Cp 
```

Why is this happening? When I just use `gam` everything is fine, this only happens with `caret` package.

`dput(head(training))` output:

```
structure(list(TT = c(1.810376, 0.089206, 0.623906, 0.676775, 
0.206524, 1.014849), P = c(682L, 674L, 681L, 679L, 655L, 682L
), II = c(846000000L, 4790000L, 38600000L, 40600000L, 1379632L, 
7526080L), WSM = c(5272L, 144L, 576L, 576L, 2336L, 18696L), TSM = c(168704L, 
4608L, 18432L, 18432L, 74752L, 598272L), L2M = c(1.49e+09, 12600000, 
85700000, 1.24e+08, 4214560, 33560200), DR = c(2.52e+09, 18400000, 
1.3e+08, 1.8e+08, 5559030, 44681000), DW = c(11600000L, 5440000L, 
39600000L, 46400000L, 4920550L, 36812430L), TH = c(32.032843125, 
0.1880727305, 0.2003506939, 0.1983195715, 0.558498625, 0.495952125
)), .Names = c("TT", "P", "II", "WSM", "TSM", "L2M", "DR", "DW", 
"TH"), row.names = c(3L, 5L, 7L, 8L, 9L, 10L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:50:29.073

As far as I understand, `caret` uses the new `mgcv` package for `gam` functions; I had attached the older implementation of "gam" - the `gam` library. When I detached the `gam` library and only used `mgcv.gam`, this issue was resolved.

# haskell - 在 MaybeT （ StateT ） monadT 堆栈中调用纯函数以使错误传播的惯用方法是什么？

> ID：15724810
> 
> 赞同：9
> 
> 时间：2013-03-30T23:51:55.920
> 
> 标签：haskell, monads, monad-transformers

具体来说，假设我有这个 monadT 堆栈：

```
type MHeap e ret = MaybeT ( StateT [e] Identity ) ret 
```

和一个方便的 runMheap 函数：

```
runMheap :: MHeap e ret -> [e] -> ( Maybe ret, [e] )
runMheap m es = runIdentity $ runStateT ( runMaybeT m ) es 
```

我想创建一个`MHeap`查找列表的第 i 个元素（请注意，我们可能在此处出现超出范围的错误），然后如果该元素存在，则将其附加到列表的末尾，否则保持列表不变。在代码中：

```
mheapOp' :: Int -> MHeap Int ( Maybe Int )
mheapOp' i = do 
    xs <- lift $ get
    -- I would like to use the pure function ( !! ) here
    let ma = fndAtIdx i xs 
    -- I would also like to get rid these case statements
    -- Also how do you describe 'no action' on the list?
    case ma of 
        Nothing -> lift $ modify ( ++ [] )
        Just a  -> lift $ modify ( ++ [a] )
    return ma

-- Since I dont know how to use the pure function above, I'm using this hack below
fndAtIdx i xs = if length xs > i then Just $ xs !! i else Nothing 
```

请注意，我将我的问题放在上面的评论中。

此代码运行如下：

```
case 1: runMheap(mheapOp' 1 ) [1..3]   // (Just (Just 2),[1,2,3,2])
case 2: runMheap(mheapOp' 10 ) [1..3]  // (Just Nothing,[1,2,3]) 
```

你看，不出所料，元组的第一个元素是双重包装的，但我不知道如何在不调用结果的情况下摆脱它。换句话说，这会很好：

```
( Just 2, [1,2,3,2] ) and ( Nothing, [1,2,3] ) 
```

回顾一下，在 monadT 堆栈中调用纯函数并确保错误传播而不显式编写 case 语句的惯用方式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T00:11:26.580

我建议您坚持使用`findAtIdx`返回 a 的`Nothing`，而不是使用类似使用的部分`(!!)`函数`error`。您实际需要的是以下类型的函数：

```
hoistMaybe :: (Monad m) => Maybe a -> MaybeT m a 
```

这个函数可以让你将你的`findAtIdx`命令正确地嵌入到周围的`MaybeT`monad 中，如下所示：

```
mheapOp' :: Int -> MHeap Int Int
mheapOp' i = do 
    xs <- lift get
    -- if 'findAtIdx' is 'Nothing', it will stop here and not call 'modify'
    a <- hoistMaybe (findAtIdx i xs)
    lift $ modify (++ [a])
    return a 
```

我们可以自己编写这个函数：

```
hoistMaybe ma = MaybeT (return ma) 
```

或者您可以从库中[导入它](http://hackage.haskell.org/packages/archive/errors/1.4.1/doc/html/Control-Error-Util.html#v%3ahoistMaybe)`errors`（完全披露：我写的）。请注意，此库还会为您重新导出库中的`atMay`函数`safe`，就像您的`findAtIdx`函数一样。

但是我们怎么知道这个函数做对了呢？好吧，通常当我们得到一个“正确”的函数时，它恰好遵循某种范畴论定律，这个函数也不例外。在这种特殊情况下，`hoistMaybe`是一个“单子态射”，这意味着它应该满足以下定律：

```
-- It preserves empty actions, meaning it doesn't have any accidental complexity
hoistMaybe (return x) = return x

-- It distributes over 'do' blocks
hoistMaybe $ do x <- m  =  do x <- hoistMaybe m
                f x           hoistMaybe (f x) 
```

很容易证明第一定律：

```
hoistMaybe (return x)

-- Definition of 'return' in the 'Maybe' monad:
= hoistMaybe (Just x)

-- Definition of 'hoistMaybe'
= MaybeT (return (Just x))

-- Definition of 'return' in the 'MaybeT' monad
= return x 
```

我们也可以证明第二定律：

```
hoistMaybe $ do x <- m
                f x

-- Definition of (>>=) in the 'Maybe' monad:
= hoistMaybe $ case m of
    Nothing -> Nothing
    Just a  -> f a

-- Definition of 'hoistMaybe'
= MaybeT $ return $ case m of
    Nothing -> Nothing
    Just a  -> f a

-- Distribute the 'return' over both case branches
= MaybeT $ case m of
    Nothing -> return Nothing
    Just a  -> return (f a)

-- Apply first monad law in reverse
= MaybeT $ do
    x <- return m
    case x of
        Nothing -> return Nothing
        Just a  -> return (f a)

-- runMaybeT (MaybeT x) = x
= MaybeT $ do
    x <- runMaybeT (MaybeT (return m))
    case x of
        Nothing -> return Nothing
        Just a  -> runMaybeT (MaybeT (return (f a)))

-- Definition of (>>=) for 'MaybeT m' monad in reverse
= do x <- MaybeT (return m)
     MaybeT (return (f x))

-- Definition of 'hoistMaybe' in reverse
= do x <- hoistMaybe m
     hoistMaybe (f x) 
```

所以这就是我们如何说服自己我们正确地将“Maybe”提升到“MaybeT”。

编辑：为了响应您删除的请求，这是内`mheapOp`联方式：

```
import Control.Monad
import Control.Error
import Control.Monad.Trans.Class
import Control.Monad.Trans.Maybe
import Control.Monad.Trans.State
import Data.Functor.Identity

-- (State s) is the exact same thing as (StateT s Identity):
-- type State s = StateT s Identity
type MHeap e r = MaybeT (State [e]) r

mheapOp :: Int -> MHeap Int Int
{-
mheapOp i = do 
    xs <- lift get
    a <- hoistMaybe (atMay xs i)
    lift $ modify (++ [a])
    return a

-- Inline 'return' and 'lift' for 'MaybeT', and also inline 'hoistMaybe'
mheapOp i = do 
    xs <- MaybeT $ liftM Just get
    a <- MaybeT $ return $ atMay xs i
    MaybeT $ liftM Just $ modify (++ [a])
    MaybeT $ return $ Just a

-- Desugar 'do' notation
mheapOp i =
    (MaybeT $ liftM Just get)               >>= \xs ->
     (MaybeT $ return $ atMay xs i)          >>= \a ->
      (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
       (MaybeT $ return $ Just a)

-- Inline first '(>>=)' (which uses 'MaybeT' monad)
mheapOp i =
    MaybeT $ do
        mxs <- runMaybeT (MaybeT $ liftM Just get)
        case mxs of
            Nothing -> return Nothing
            Just xs -> runMaybeT $
                (MaybeT $ return $ atMay xs i)          >>= \a ->
                 (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                  (MaybeT $ return $ Just a)

-- runMaybeT (MaybeT x) = x
mheapOp i =
    MaybeT $ do
        mxs <- liftM Just get
        case mxs of
            Nothing -> return Nothing
            Just xs -> runMaybeT $
                (MaybeT $ return $ atMay xs i)          >>= \a ->
                 (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                  (MaybeT $ return $ Just a)

-- Inline definition of 'liftM'
mheapOp i =
    MaybeT $ do
        mxs <- do xs' <- get
                return (Just xs')
        case mxs of
            Nothing -> return Nothing
            Just xs -> runMaybeT $
                (MaybeT $ return $ atMay xs i)          >>= \a ->
                 (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                  (MaybeT $ return $ Just a)

{- Use third monad law (a.k.a. the "associativity law") to inline the inner do
   block -}
mheapOp i =
    MaybeT $ do
        xs  <- get
        mxs <- return (Just xs)
        case mxs of
            Nothing -> return Nothing
            Just xs -> runMaybeT $
                (MaybeT $ return $ atMay xs i)          >>= \a ->
                 (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                  (MaybeT $ return $ Just a)

{- Use first monad law (a.k.a. the "left identity law"), which says that:

   x <- return y

   ... is the same thing as:

   let x = y
-}
mheapOp i =
    MaybeT $ do
        xs' <- get
        let mxs = Just xs'
        case mxs of
            Nothing -> return Nothing
            Just xs -> runMaybeT $
                (MaybeT $ return $ atMay xs i)          >>= \a ->
                 (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                  (MaybeT $ return $ Just a)

-- Inline definition of 'mxs'
mheapOp i =
    MaybeT $ do
        xs' <- get
        case (Just xs') of
            Nothing -> return Nothing
            Just xs -> runMaybeT $
                (MaybeT $ return $ atMay xs i)          >>= \a ->
                 (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                  (MaybeT $ return $ Just a)

{- The 'case' statement takes the second branch, binding xs' to xs.

   However, I choose to rename xs' to xs for convenience, rather than rename xs
   to xs'. -}
mheapOp i =
    MaybeT $ do
        xs <- get
        runMaybeT $ (MaybeT $ return $ atMay xs i)          >>= \a ->
                     (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                      (MaybeT $ return $ Just a)

-- Inline the next '(>>=)'
mheapOp i =
    MaybeT $ do
        xs <- get
        runMaybeT $ MaybeT $ do
            ma <- runMaybeT $ MaybeT $ return $ atMay xs i
            case ma of
                Nothing -> return Nothing
                Just a -> runMaybeT $
                    (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                     (MaybeT $ return $ Just a)

-- runMaybeT (MaybeT x) = x
mheapOp i =
    MaybeT $ do
        xs <- get
        do ma <- return $ atMay xs i
           case ma of
               Nothing -> return Nothing
               Just a -> runMaybeT $
                   (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                    (MaybeT $ return $ Just a)

-- You can inline the inner 'do' block because it desugars to the same thing
mheapOp i =
    MaybeT $ do
        xs <- get
        ma <- return $ atMay xs i
        case ma of
            Nothing -> return Nothing
            Just a -> runMaybeT $
                (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                 (MaybeT $ return $ Just a)

-- Use first monad law
mheapOp i =
    MaybeT $ do
        xs <- get
        let ma = atMay xs i
        case ma of
            Nothing -> return Nothing
            Just a -> runMaybeT $
                (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                 (MaybeT $ return $ Just a)

-- Inline definition of 'ma'
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> runMaybeT $
                (MaybeT $ liftM Just $ modify (++ [a])) >>= \_ ->
                 (MaybeT $ return $ Just a)

-- Inline the next '(>>=)'
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> runMaybeT $ MaybeT $ do
                mv <- runMaybeT $ MaybeT $ liftM Just $ modify (++ [a])
                case mv of
                    Nothing -> return Nothing
                    Just _  -> runMaybeT $ MaybeT $ return $ Just a

-- runMaybeT (MaybeT x) = x
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> do
                mv <- liftM Just $ modify (++ [a])
                case mv of
                    Nothing -> return Nothing
                    Just _  -> return (Just a)

-- Inline definition of 'liftM'
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> do
                mv <- do x <- modify (++ [a])
                         return (Just x)
                case mv of
                    Nothing -> return Nothing
                    Just _  -> return (Just a)

-- Inline inner 'do' block using third monad law
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> do
                x  <- modify (++ [a])
                mv <- return (Just x)
                case mv of
                    Nothing -> return Nothing
                    Just _  -> return (Just a)

-- Use first monad law to turn 'return' into 'let'
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> do
                x  <- modify (++ [a])
                let mv = Just x
                case mv of
                    Nothing -> return Nothing
                    Just _  -> return (Just a)

-- Inline definition of 'mv'
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> do
                x  <- modify (++ [a])
                case (Just x) of
                    Nothing -> return Nothing
                    Just _  -> return (Just a)

-- case takes the 'Just' branch, binding 'x' to '_', which goes unused
mheapOp i =
    MaybeT $ do
        xs <- get
        case (atMay xs i) of
            Nothing -> return Nothing
            Just a -> do
                modify (++ [a])
                return (Just a)

{- At this point we've completely inlined the outer 'MaybeT' monad, converting
   it to a 'StateT' monad internally.  Before I inline the 'StateT' monad, I
   want to point out that if 'atMay' returns 'Nothing', the computation short
   circuits and doesn't call 'modify'.

   The next step is to inline the definitions of 'return, 'get', and 'modify':
-}
mheapOp i =
    MaybeT $ do
        xs <- StateT (\as -> return (as, as))
        case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a -> do
                StateT (\as -> return ((), as ++ [a]))
                StateT (\as -> return (Just a , as))

-- Now desugar both 'do' blocks:
mheapOp i =
    MaybeT $
        StateT (\as -> return (as, as)) >>= \xs ->
         case (atMay xs i) of
             Nothing -> StateT (\as -> return (Nothing, as))
             Just a ->
                 StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                  StateT (\as -> return (Just a , as))

-- Inline first '(>>=)', which uses 'StateT' monad instance
mheapOp i =
    MaybeT $ StateT $ \as0 -> do
        (xs, as1) <- runStateT (StateT (\as -> return (as, as))) as0
        runStateT (case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a ->
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) as1
                     --                                 ^
                     -- Play close attention to this s1 |

-- runStateT (StateT x) = x
mheapOp i =
    MaybeT $ StateT $ \as0 -> do
        (xs, as1) <- (\as -> return (as, as)) as0
        runStateT (case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a ->
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) as1

-- Apply (\as -> ...) to as0, binding 'as0' to 'as'
mheapOp i =
    MaybeT $ StateT $ \as0 -> do
        (xs, as1) <- return (as0, as0)
        runStateT (case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a ->
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) as1

-- Use first monad law to convert 'return' to 'let'
mheapOp i =
    MaybeT $ StateT $ \as0 -> do
        let (xs, as1) = (as0, as0)
        runStateT (case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a ->
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) as1

{- The let binding says that xs = as0 and as1 = as0, so I will rename all of
   them to 'xs' since they are all equal -}
mheapOp i =
    MaybeT $ StateT $ \xs -> do
        runStateT (case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a ->
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) xs

-- do m = m, so we can just get rid of the 'do'
mheapOp i =
    MaybeT $ StateT $ \xs ->
        runStateT (case (atMay xs i) of
            Nothing -> StateT (\as -> return (Nothing, as))
            Just a ->
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) xs

-- Distribute the 'runStateT ... xs' over both 'case' branches
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> runStateT (StateT (\as -> return (Nothing, as))) xs
            Just a -> runStateT (
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) xs

-- runStateT (StateT x) = x
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> (\as -> return (Nothing, as)) xs
            Just a -> runStateT (
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) xs

-- Apply (\as -> ...) to 'xs', binding 'xs' to 'as'
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a -> runStateT (
                StateT (\as -> return ((), as ++ [a])) >>= \_ ->
                 StateT (\as -> return (Just a , as)) ) xs

-- Inline the '(>>=)'
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a -> runStateT (StateT $ \as0 -> do
                (_, as1) <- runStateT (StateT (\as -> return ((), as ++ [a]))) as0
                runStateT (StateT (\as -> return (Just a , as))) as1 ) xs

-- runStateT (StateT x) = x
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a -> (\as0 -> do
                (_, as1) <- (\as -> return ((), as ++ [a])) as0
                (\as -> return (Just a , as)) as1 ) xs

-- Apply all the functions to their arguments
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a -> (\as0 -> do
                (_, as1) <- return ((), as0 ++ [a])
                return (Just a , as1) ) xs

-- Use first monad law to convert 'return' to 'let'
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a -> (\as0 -> do
                let (_, as1) = ((), as0 ++ [a])
                return (Just a , as1) ) xs

-- Let binding says that as1 = as0 ++ [a], so we can inline its definition
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a  -> (\as0 -> do
                return (Just a , as0 ++ [a]) ) xs

-- do m = m
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a  -> (\as0 -> return (Just a , as0 ++ [a])) xs

-- Apply (\as0 -> ...) to 'xs', binding 'xs' to 'as0'
mheapOp i =
    MaybeT $ StateT $ \xs ->
        case (atMay xs i) of
            Nothing -> return (Nothing, xs)
            Just a  -> return (Just a , xs ++ [a])

-- Factor out the 'return' from the 'case' branches, and tidy up the code
mheapOp i =
    MaybeT $ StateT $ \xs ->
        return $ case (atMay xs i) of
            Nothing -> (Nothing, xs)
            Just a  -> (Just a , xs ++ [a])
-}

-- One last step: that last 'return' is for the 'Identity' monad, defined as:
mheapOp i =
    MaybeT $ StateT $ \xs ->
        Identity $ case (atMay xs i) of
            Nothing -> (Nothing, xs)
            Just a  -> (Just a , xs ++ [a])

{- So now we can clearly say what the function does:

   * It takes an initial state named 'xs'

   * It calls 'atMay xs i' to try to find the 'i'th value of 'xs'

   * If 'atMay' returns 'Nothing, then our stateful function returns 'Nothing'
     and our original state, 'xs'

   * If 'atMay' return 'Just a', then our stateful function returns 'Just a'
     and a new state whose value is 'xs ++ [a]'

   Let's also walk through the types of each layer:

   layer1 :: [a] -> Identity (Maybe a, [a])
   layer1 = \xs ->
       Identity $ case (atMay xs i) of
           Nothing -> (Nothing, xs)
           Just a  -> (Just a, xs ++ [a])

   layer2 :: StateT [a] Identity (Maybe a)
   --   i.e. State  [a] (Maybe a)
   layer2 = StateT layer1

   layer3 :: MaybeT (State [a]) a
   layer3 = MaybeT layer2
-} 
```

# java - 需要询问人们所选月份有多少天，并向用户显示闰年该月有多少天（java）

> ID：15724822
> 
> 赞同：-1
> 
> 时间：2013-03-30T23:53:55.440
> 
> 标签：java

我在标题中说了这一切，但我主要需要最后一部分的帮助，我无法正确添加它，它在 system.out.printf 中将年双和日显示为正常数字

```
import javax.swing.*;
public class lab 
{
public static void main(String []args)
{

int day=0;

String month=JOptionPane.showInputDialog(null,"what month is it").substring(0,3);

if (month=="jan")
{
day=31;
}
if (month=="feb")
{
day=28;
}
if(month=="mar")
{
day=31;
}
if(month=="apr")
 {
day=30;
}
if(month=="may")
{
day=31; 
}
if(month=="jun")
{
day=30;
}
if(month=="jul")
{
day=31;
}
if(month=="aug")
{
day=31; 
}
if(month=="sep")
{
day=30;
}
if(month=="oct")
{
day=31;
}
if(month=="nov")
{
day=30;
}
if(month=="dec")
{
day=31;
}
String yearString=JOptionPane.showInputDialog("what year is it");

double yeardouble=Double.parseDouble(yearString);
if(yeardouble % 4==0)
{
yeardouble=1;
}
else 

yeardouble=0;

double answer = yeardouble + day;

System.out.printf( "theres "+ day + " days in"+ answer );

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:56:49.620

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

# android - 关闭应用程序后线程继续执行

> ID：15724826
> 
> 赞同：1
> 
> 时间：2013-03-30T23:54:11.717
> 
> 标签：android, multithreading, timer

我有一个使用线程的 android 应用程序。应用程序等待一段时间，然后执行一个函数。

如果用户等待一段时间，事情就会顺利进行。在预定义的时间 t 结束后，函数开始执行。

但是，如果用户点击设备的后退按钮并返回主屏幕，则在时间t结束后，应用程序再次出现。

我如何了解用户是否按下了回击或关闭了我的应用程序？如果我收到留言 - 比如说 USER_EXITED，如何停止线程并释放所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:58:55.623

在您的活动中，当活动即将结束时，您可以检查它是否像这样完成并处理与您的线程有关的事情

```
@Override 
public void onPause() {        

        if(isFinishing()){
//put the correct checks or shutdowns

{            

    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:04:04.227

我认为您需要创建一个服务。 [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# core-plot - 核心绘图如何使图例仅显示绘制的线条

> ID：15724836
> 
> 赞同：0
> 
> 时间：2013-03-30T23:55:52.320
> 
> 标签：core-plot, legend

我使用相同的散点图来显示 5 或 4 行，具体取决于要显示的数据类型。将线条放在散点图上的代码是：

```
 if (typeSelector.selectedSegmentIndex == 0) {
        if ([plot.identifier isEqual:@"Hotel"]) { nums = valuesQT1; }
        if ([plot.identifier isEqual:@"Retail"]) { nums = valuesQT2; }
        if ([plot.identifier isEqual:@"Office"]) { nums = valuesQT3; }
        if ([plot.identifier isEqual:@"Industrial"]) { nums = valuesQT4; }
        if ([plot.identifier isEqual:@"Apartment"]) { nums = valuesQT5; }
     }
     else {
        if ([plot.identifier isEqual:@"East"]) { nums = valuesQR1; }
        if ([plot.identifier isEqual:@"South"]) { nums = valuesQR2; }
        if ([plot.identifier isEqual:@"Midwest"]) { nums = valuesQR3; }
        if ([plot.identifier isEqual:@"West"]) { nums = valuesQR4; }
    } 
```

因此，当 typeSelector 为 0 时，图例应显示酒店、零售、办公室、工业和公寓的样本和标签，当 typeSelector 为 1 时，应显示东、南、中西部和西部的样本和标签。

所有散点图都使用相同的折线图：

```
 lineChart = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    linePlotView.hostedGraph = lineChart; 
```

每个数据集都添加到 lineChart 中：

```
 [lineChart addPlot:amtPlot1];
    [lineChart addPlot:amtPlot2];
    [lineChart addPlot:amtPlot3]; 
```

等等。

标签代码如下：

```
 // Add legend
    if (typeSelector.selectedSegmentIndex == 0) {
        CPTLegend *theLegend = [CPTLegend legendWithGraph:lineChart];
        theLegend.swatchSize = CGSizeMake(30.0, 20.0);
        CPTMutableTextStyle *blackTextStyle = [CPTMutableTextStyle textStyle];
        blackTextStyle.color = [CPTColor blackColor];
        blackTextStyle.fontSize = 12.0;
        theLegend.numberOfRows = 5;
        lineChart.legend = theLegend;
        lineChart.legend.fill = [CPTFill fillWithColor:[CPTColor whiteColor]];
        lineChart.legendAnchor = CPTRectAnchorLeft;
        lineChart.legendDisplacement = CGPointMake(100.0, 0.0);
    } 
```

这对于散点图上的第一组 5 行非常有效。但是，当我在第二组 4 行中使用类似代码时，第一组的图例样本和标签与第二组一起显示。

我只想要第一组带有 5 个色板和标签的图例，第二组需要一个带有 4 个色板和标签的图例。

这是否可能无需创建两个单独的图表，如 lineChart1（前 5 个）和 lineChart2（第二个 4）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:09:14.647

该`+legendWithGraph:`方法使用在调用之前添加到图表中的所有图来构建图例。如果您在图表上调用它而不首先删除不需要的图，它们*将*出现在图例中。我看到几个选项：

1.  如您的评论中所述，在不使用图表时从图表中删除它们，并根据需要创建新的图例。

2.  改为使用创建图例`+legendWithPlots:`。传递要在图例中表示的绘图数组。

3.  `CPTLegend`has`-addPlot:`和`-removePlot:`方法类似于`CPTGraph`. 使用它们根据需要更新现有图例，而不是每次都创建新图例。

# xpath - 如何编写比较两个属性或节点的 Xpath 表达式

> ID：15724850
> 
> 赞同：1
> 
> 时间：2013-03-30T23:57:40.890
> 
> 标签：xpath, attributes, xmlnode

给定以下示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<Patients>
  <patientRole>
    <id extension="996-756-495" root="2.16.840.1.113883.19.5"/>
    <id extension="775-756-495" root="2.16.840.1.113883.14.6"/>
    <patient>
      <name>
        <given>Henry</given>
        <family>Levin</family>
      </name>
      <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
      <birthTime value="19320924"/>
    </patient>
    <providerOrganization>
      <id root="2.16.840.1.113883.19.5"/>
      <name>Good Health Clinic</name>
    </providerOrganization>
    <admissionTime value="2012030111:32"/>
  </patientRole>
  <patientRole>
    <id extension="65" root="2.16.840.1.113883.3.933"/>
    <patient>
      <name>
        <given>Paul</given>
        <family>Pappel</family>
      </name>
      <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
      <birthTime value="19551217"/>
    </patient>
    <providerOrganization>
      <id extension="84756-11241-283-OPTD-3322" root="1.2.3.4.5.6.1.8.9.0"/>
      <name> Dr.med. Hans Topp-Glucklich</name>
    </providerOrganization>
    <admissionTime value="201201152200"/>
  </patientRole>
  <patientRole>
    <id extension="800001" root="2.16.840.1.113883.19.5"/>
    <patient>
      <name>
        <given>JEANNE</given>
        <family>PETIT</family>
      </name>
      <administrativeGenderCode code="F" codeSystem="2.16.840.1.113883.5.1"/>
      <birthTime value="19480105"/>
    </patient>
    <providerOrganization>
      <id root="2.16.840.1.113883.19.5"/>
      <name>Good Health Clinic</name>
    </providerOrganization>
    <admissionTime value="20120101T22:00"/>
  </patientRole>
</Patients> 
```

我将如何为以下内容编写 X-Path 表达式：

男性患者的姓氏（性别代码=“M”）

非常感谢任何帮助我是 XML/Xpath 的新手，我尝试了多种方法，但它没有产生我需要的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:05:05.550

这应该有效：

`/Patients/patientRole/patient[administrativeGenderCode/@code='M']/name/family`

# sql-server-2008 - 从 SQL Server 2008 中的所有数据库中获取所有存储过程

> ID：15724851
> 
> 赞同：5
> 
> 时间：2013-03-30T23:57:46.533
> 
> 标签：sql-server-2008, stored-procedures

任何人都可以建议在所有数据库中检索所有存储过程的列表及其模式名称的方法吗？感谢您的输入！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T02:45:33.940

```
CREATE TABLE #x(db SYSNAME, s SYSNAME, p SYSNAME);

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'INSERT #x SELECT ''' + name + ''',s.name, p.name
  FROM ' + QUOTENAME(name) + '.sys.schemas AS s
  INNER JOIN ' + QUOTENAME(name) + '.sys.procedures AS p
  ON p.schema_id = s.schema_id;
' FROM sys.databases WHERE database_id > 4

EXEC sp_executesql @sql;

SELECT db,s,p FROM #x ORDER BY db,s,p;

DROP TABLE #x; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-05T16:45:30.190

对于所有数据库，搜索用户定义的存储过程、视图、函数和表值函数，以下可能会有所帮助（基于上述 Habo）：

```
declare @Sprocs as Table (DBName VarChar(64), SchemaName varchar (128), 
    StoredProcName VarChar(128), 
    type varchar(10), type_desc varchar(128), 
    create_date datetime, modify_date datetime, is_MS_Shipped int)
insert into @Sprocs
    execute sp_MSforeachdb N'use ?; select ''?'', 
        s.name as SchemaName, o.name as StoredProcName, 
        type, type_desc, create_date, modify_date, is_MS_Shipped
        from sys.all_objects as o inner join sys.schemas as s 
            on s.schema_id = o.schema_id 
        where o.type in (''P'', ''V'', ''PC'', ''FN'', ''TF'')
            and is_ms_shipped = 0'

select * from @Sprocs
where DBName not in ('master', 'tempdb', 'model', 'msdb', 'dba') 
order by DBName, SchemaName, type, StoredProcName 
```

添加“U”以获取用户生成的表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T00:51:36.317

对于单个数据库：

```
select s.name + '.' + p.name as sproc_name_with_schema
  from sys.procedures as p inner join
    sys.schemas as s on s.schema_id = p.schema_id 
```

所有数据库都需要它吗？你的问题有点不清楚。

```
declare @Sprocs as Table ( DBName VarChar(64), SprocName VarChar(128) )
insert into @Sprocs
  execute sp_MSforeachdb N'use ?; select ''?'', s.name + ''.'' + o.name from sys.all_objects as o inner join sys.schemas as s on s.schema_id = o.schema_id where o.type = ''P'''
select * from @Sprocs 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-02T19:32:33.400

没有临时表和插入的第一个答案的替代方法：

```
declare @sql varchar(max) = '';
select 
    @sql += ' ' +
    'union all ' +
    'select ''' +
        dat.name + ''' as bas, b.name as sch, a.name as pro ' +
    'from ' +
        '[' + dat.name + '].[sys].procedures as a ' +
        'inner join [' + dat.name + '].[sys].schemas as b on a.schema_id = b.schema_id'
from sys.databases as dat;
set @sql = RIGHT(@sql, LEN(@sql) - 11);
exec(@sql);
print @sql; 
```

# android - 让我从搜索框中调用数据的数据库

> ID：15724854
> 
> 赞同：2
> 
> 时间：2013-03-30T23:57:52.453
> 
> 标签：android, database

我想制作一个作为搜索引擎的应用程序，当数据被调用时（例如，用户输入他们正在寻找的汽车），将出现一个带有信息的活动，即文本和图像。它只会是关于我选择的汽车的数据，大约 300 辆。我可以从数据库中调用很多活动而不会很慢吗？

这是我目前使用文本和图像搜索信息的最佳想法，一旦用户输入文本就可以调用这些信息

# node.js - 无法通过 Mongoose 保存的 express 访问 POST 调用中的数据

> ID：15724857
> 
> 赞同：1
> 
> 时间：2013-03-30T23:58:11.330
> 
> 标签：node.js, mongodb, express, mongoose

我只是在学习 Node、Mongoose 和 Express。我已经查看了 stackoverflow 和其他地方的所有内容，但我仍然找不到我的问题的答案。

我相当肯定这只是一个非常初学者的错误。当我在 app.post 中保存发布的数据时，我无法在我的 node/express 代码中的其他任何地方访问它。我收到错误“ReferenceError：未定义 getUsersInfo。”

```
var mongoose = require('mongoose');
mongoose = mongoose.createConnection('localhost', '27017');
mongoose.on('error', console.error.bind(console, 'connection error:'));
var Schema = mongoose.Schema
  , ObjectId = Schema.ObjectID;

var usersSchema = new Schema({
    username: String,
    password: String, 
    email: String,
    date_created:{ type: Date, default: Date.now }
});

var users = mongoose.model('users', usersSchema);

app.get('/', function(req,res){
  res.render('layout.jade', { 
      title : "Hello!"
    ,analytics: 'XXXXXX'
  });
});

app.post('/', function(req, res){   
    var getUsersInfo = new users({
        username: req.body.user,
        password: req.body.password,
        email: req.body.email,
    });

    getUsersInfo.save(function (err, getUsersInfo) {
        if (err){throw err;}
        console.log(getUsersInfo.username);
        res.redirect("/success");
    });
});

app.get('/success', function(req, res){
    res.render('loggedin.jade', {
        title : "Admin Panel",
        analytics: 'XXXXXX'
    });

    var username = getUsersInfo("username");
    res.write("<h1> hi, " + username + "</h1>");

}); 
```

您可以给我的任何帮助（例如查看的地方或编写代码的更好方法）将不胜感激。我尝试从过时的教程中学习，但一无所获，mongoose api/docs 似乎没有涵盖这件事。

谢谢！

**编辑**
为了澄清我在这里想要实现的目标是我想获取表单输入（在 layout.jade 文件中呈现）并将它们保存到数据库中（我正在做的事情`app.post`）。然后我希望能够在代码的其他地方访问这些数据库对象，而不是专门在`app.get('/success')`. 但我似乎一直遇到范围问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:10:40.513

在 nodejs/expressjs 应用程序中，您的路由（`app.get`等`app.post`）设置有回调函数，当用户请求相应的 URL 时将调用这些函数。应该在请求中完成的所有操作都需要从这些回调中调用。在您的示例中，您正在尝试在`getUsersInfo`您设置的回调之外访问`app.post`. 如果您将代码移动到回调中，它应该让您更进一步：

```
app.post('/', function(req, res) {
    var getUsersInfo = new users({
        username: req.body.user,
        password: req.body.password,
        email: req.body-email
    });
    getUsersInfo.save(function(err, userinfo) {
        if(!err) {
            res.redirect('/success');
        }
        else {
            // Send error
        }
    });
}); 
```

编辑：上面的答案被代码的缩进弄糊涂了，现在应该更正。看起来你正在制作一个普通的网络应用程序，所以我建议你检查一下`session`中间件。开始使用它的一种简单方法是使用命令生成您的快速应用程序`express --sessions myapplication`。这将设置您的应用程序，以便您拥有一个`req.session`可以放置会话范围对象的对象：

```
app.post('/', function(req, res) {
   var getUsersInfo = new users({
        username: req.body.user,
        password: req.body.password,
        email: req.body-email
    });
    getUsersInfo.save(function(err, userinfo) {
        if(!err) {
            req.session.user = userInfo;
            res.redirect('/success');
        }
        else {
            // Send error
        }
    });
}); 
```

然后在你的`app.get`

```
app.get('/success', function(req, res) {
    var user = req.session.user;
    // Do what you want with the user
}); 
```

如果您使用的是 REST 方法，则保存然后检索资源时的典型模式是重定向`GET`到获取创建资源的 URL，并包含资源的标识符。在这种情况下，您的重定向将如下所示

```
res.redirect('/success/' + userInfo.id) 
```

你可以制作这样的路线：

```
app.get('/success/:userId', function(req, res) {
    var user_id = req.param('userId');
    users.findById(user_id, function(err, user) {
        // user is available here. Add it to the template context and render it.
    });
}); 
```

The syntax `:userId` in the uri indicates a path variable named `userId` which will be available in `req.params`.

But if you're writing a regular web application, I would recommend the first approach using the session middleware.

# jquery - rails jquery select2

> ID：15724861
> 
> 赞同：3
> 
> 时间：2013-03-30T23:58:39.130
> 
> 标签：jquery, ruby-on-rails, jquery-select2

What is the right way to add the `allowClear` option to the select2 widget in my view?

```
$ ->
  $("#practice_toolkeeper").select2().select2('val',$("#toolkeeper_value").val()) 
```

I have the following code in my view:

```
<%= f.select :toolkeeper, options_from_collection_for_select(@people, :id, :name), :prompt => "Select type question" %> 
```

Which generates this HTML:

```
<select id="practice_toolkeeper" name="practice[toolkeeper]">
    <option value="">Select type question</option>
    <option value="21">sdifj</option> 
    <option value="20">maxam</option> 
    <option value="22">maxab</option> 
    <option value="19">maxa</option> 
    <option value="23">dafuq</option> 
    <option value="15">bla</option> 
    <option value="24">asdasdasd</option> 
    <option value="13">abl</option> 
    <option value="17">Testa</option> 
</select> 
```

I've tried many variations, but none is working yet...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T00:45:10.207

You need to do a few things to get this to work:

1.  Set the `allowClear` and `placeholder` options in an options object that you use when initializing the widget:

    ```
    $ ->
      $("#practice_toolkeeper")
          .select2({ 
              allowClear: true,
              placeholder: 'Select type question'
          })
          .select2('val',$("#toolkeeper_value").val()) 
    ```

2.  It looks like the `allowClear` option only works when there's an empty `option` in the `select`. To generate an empty option you could use `{:include_blank => true}` when generating the select:

    ```
    <%= f.select :toolkeeper, options_from_collection_for_select(@people, :id, :name), {:include_blank => true} %> 
    ```

    Basically you want your HTML to look like this:

    ```
    <select id="practice_toolkeeper" name="practice[toolkeeper]">
        <option value=""></option>
        <option value="21">sdifj</option> 
        <!-- etc -->
    </select> 
    ```

**Example:** [http://jsfiddle.net/Z63d7/](http://jsfiddle.net/Z63d7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T14:25:53.007

*For My Developer Fellas Landed here*

Suppose You are using [Formtastic](https://github.com/justinfrench/formtastic) Normally with Active Admin You can pass during declaration

```
f.input :your_select_2_field, { as: :select2, collection: ['a', 'b'], include_blank: 'Select Nothing'} 
```

**Concentrate On Curly Braces {}**

-Happy Coding :)

# matlab - 平均分箱值

> ID：15724864
> 
> 赞同：0
> 
> 时间：2013-03-30T23:58:54.630
> 
> 标签：matlab

我有一个`NxM`矩阵，我将第一列分箱到`n`桶中。我想知道的是，如果我想取矩阵辅助列中所有值的平均值，这是可能的。

所以基本上我想要的是，如果我有一个`2x1000`矩阵，我在其中对第一列的数据进行分类，我希望能够根据矩阵的第二列对每个 bin 中的所有值进行平均。

也许存在一个功能可以轻松地让我做到这一点。我很感激任何意见。

# rdf - SPARQL Query: How I get only a literal or string as result?

> ID：15724868
> 
> 赞同：7
> 
> 时间：2013-03-30T23:59:10.723
> 
> 标签：rdf, sparql

**Data:**

```
<untitled-ontology-5:OperationName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">
  Adhesive Curing
</untitled-ontology-5:OperationName> 
```

**SPARQL Query:**

```
PREFIX rdf:<http://wwww.semanticweb.org/ontologies/2012/7/9/untitled-ontology-5#>
SELECT ?object
WHERE { ?subject  rdf:OperationName ?object .       
} 
```

**Result:**

```
Adhesive Curing^^http://www.w3.org/2001/XMLSchema#string 
```

* * *

**My Question:**

The result of the SPARQL Query is not the result what I wanted. The right result should contain only the Literal/String without the URI-part. I'd like to create the following result:

**Proper Result:**

```
Adhesive Curing 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T02:48:30.060

You need to use the `STR()` function to retrieve the lexical label of your literal:

Query:

```
SELECT (str(?object) as ?label) 
WHERE { ?subject rdf:OperationName ?object . } 
```

# database - Time stamp in sync implementation

> ID：15724872
> 
> 赞同：0
> 
> 时间：2013-03-30T23:59:33.267
> 
> 标签：database, core-data, architecture, sync, data-synchronization

I am implementing a basic sync strategy for a multi-client application that needs to support offline data access. I am using @Chris' suggestion in his answer to [this question](https://stackoverflow.com/questions/5035132/how-to-sync-iphone-core-data-with-web-server-and-then-push-to-other-devices) (not required reading).

One detail I would like to add is the ability to resolve conflicts based on the last change saved, **not** the last change synced. In other words, if two clients update the same item, the client that saved the change last should win, even if the other client syncs later.

Clearly I need some way to timestamp each change on the client, so I can compare the stamps on the server at the time of sync. However, I can't guarantee much about each client's internal clock.

I would like to know if there is an established way to solve this? The simpler the better!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:25:33.327

If you're asking about client clock hijacking: a client should maintain it's own internal clock based on timestamp it gets from server and time span got from local clock.

So you just update 'client timestamps' relatively to server:

*   Client record has CT1 update time;
*   After connecting to server at the moment of CT2, you find out that server time is ST2;
*   So record update time is changed to ST1 = ST2 - CT2 + CT1.

The other way is maintaining the same transformation at server side. (Which is probably more correct and secure).

And sorry - just a note - odd part is that you call it 'conflict resolution', when it's more 'last update wins' and no actual resolution is performed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T22:33:29.720

I'd not be happy trying to get away with doing it based on just timestamps, I think you need to be looking at a proper versioning solution. I don't know what language you are using etc, but I have a complete library for doing this. Even if the library is not interesting you might find the documentation for it is useful in constructing your own solution... it's pretty fully explained...

The project is on [GitHub](https://github.com/forbesmyester/SyncIt).

# android - 在谷歌地图中错过转弯时的处理

> ID：15724873
> 
> 赞同：4
> 
> 时间：2013-03-30T23:59:36.903
> 
> 标签：android, google-maps

我正在为盲人开发一个 Android 导航应用程序。所以自然不用在屏幕上显示地图。我的代码现在通过构建一个 url 然后解析 html 文档来获取路径。我想让这个活，即我想在他/她偏离道路或走错方向时处理这个案子，我希望我的应用程序提醒他。

使用谷歌地图功能可以做到这一点吗？如果可能，请提供有关该功能的详细信息，或者如果不存在此类功能，那么是否可以使用现有功能并以某种方式使用它来帮助解决问题。

这是我现在的代码：

```
public class GPSTracking extends Activity implements
        TextToSpeech.OnInitListener
{

    protected static final int RESULT_SPEECH_start = 1;
    protected static final int RESULT_SPEECH_end = 2;
    protected static final int RESTART_ALL = 3;
    //total distance travelled till last turn
    Float totalDistance;
    //distance to be travelled from present point to the next point
    Float obtainedDistance;
    //upper button
    Button btnShowLocation;
    //bottom button
    Button btnShowLocationNo;
    //to narate what user should do. 
    TextToSpeech tts;
    //used to get name of current location
    Geocoder geocoder;
    //used to find positioning feature
    GPS gps;
    //start and position of the journey
    String startPosition=null, endPosition=null;
    //strings containing the path.
    String[] string = null;
    //vibrate the mobile
    Vibrator viberator;
    //indexing the present value of string which contains the path
    int i = 0;
    //to maintain proper order of events
    int steps=0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //button on top
        btnShowLocation = (Button) findViewById(R.id.trueButton);
        //button on the lower side
        btnShowLocationNo = (Button) findViewById(R.id.falseButton);
        //initialising the text to speech
        tts = new TextToSpeech(this, this);
        //initialising the vibrator.
        viberator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        //to know what the current location
        btnShowLocation.setOnClickListener(new View.OnClickListener() {
            //to avoid start of multiple threads
            boolean mytaskStarted=false;
            String str=null;
            @Override
            public void onClick(View v) {
                if(steps==0){
                    //to make sure values are reset
                    totalDistance=(float)0;
                    obtainedDistance=(float)0;
                    mytaskStarted=false;
                    string=null;
                    str=null;
                    i=0;                    
                    //only ask for initial position if not set
                    if(startPosition == null){
                        speakOut("Please enter the start position");
                        //takes the input using speech to text
                        intentGenerator(RESULT_SPEECH_start);
                    }
                    else{
                        //to enter the destination
                        speakOut("press the button again");
                        steps=1;
                    }
                }
                else if(steps==1){
                    //to enter the destination
                    speakOut("Please enter the destination");
                    intentGenerator(RESULT_SPEECH_end);
                }
                else if(steps==2){
                    //for a impatient user
                    speakOut("please wait");
                    //to avoid start of many asynchronous task
                    if(!mytaskStarted){
                        mytaskStarted=true;
                        //asynchronous task to find the path to be followed
                        new GetPath().execute();
                    }
                }
                else if(steps==3){
                    if (string != null && i < string.length) {
                        if(gps!=null && gps.isGpsEnabled()){
                            speakOut(i + 1 + " " + string[i]);
                            if(i>0 && i<string.length-1 && (string[i]+" ").lastIndexOf(" m ")>-1){
                                str=(string[i]+" ").substring(0,(string[i]+" ").lastIndexOf(" m ")+3);
                                obtainedDistance=Float.parseFloat(str.substring(1+str.substring(0,str.substring(0,str.lastIndexOf(" ")).lastIndexOf(" ")).lastIndexOf(" "),str.substring(0,str.lastIndexOf(" ")).lastIndexOf(" ")));
                                //increment only when present distance greater than distance in present string so that one will know when to turn.
                                if(((totalDistance+obtainedDistance)-gps.getApprximateDistance())<10)
                                {
                                    i++;
                                    totalDistance=totalDistance+obtainedDistance;
                                }
                            }
                            else if(i>0 && i<string.length-1 && (string[i]+" ").lastIndexOf(" km ")>-1){
                                str=(string[i]+" ").substring(0,(string[i]+" ").lastIndexOf(" km ")+4);
                                obtainedDistance=Float.parseFloat(str.substring(1+str.substring(0,str.substring(0,str.lastIndexOf(" ")).lastIndexOf(" ")).lastIndexOf(" "),str.substring(0,str.lastIndexOf(" ")).lastIndexOf(" ")));    
                                obtainedDistance*=1000;
                                //increment only when present distance greater than distance in present string so that one will know when to turn.
                                if(((totalDistance+obtainedDistance)-gps.getApprximateDistance())<10)
                                {
                                    i++;
                                    totalDistance=totalDistance+obtainedDistance;
                                }
                            }
                            else if(i==0 ){
                                i++;
                            }
                        }
                        else if(gps!=null){
                            gps.resetDistance();
                            gps.stopUsingGPS();
                            //if gps not working.
                            speakOut(i + 1 + " " + string[i]);
                            i++;
                        }
                        else{
                            speakOut(i + 1 + " " + string[i]);
                            i++;
                        }
                    } else if (string != null &&  i >= string.length) {
                        i = 0;
                    }
                }
            }

        });
        //to get present location
        btnShowLocation.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            if(gps==null){
                gps = new GPS(AndroidGPSTrackingActivity.this);
            }
            if (gps.canGetLocation()) {
                double longitude = gps.getLongitude();
                double latitude = gps.getLatitude();
                Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());                 
                try {
                    //obtain the address of present location 
                    List<Address> listAddresses = geocoder.getFromLocation(latitude, longitude, 1);
                    if(null!=listAddresses&&listAddresses.size()>0){
                        if (listAddresses.size() > 0) {
                            StringBuilder result = new StringBuilder();
                            for(int i = 0; i < listAddresses.size(); i++){
                                Address address =  listAddresses.get(i);
                                int maxIndex = address.getMaxAddressLineIndex();
                                for (int x = 0; x <= maxIndex; x++ ){
                                    if(address.getAddressLine(x)!=null){
                                        result.append(address.getAddressLine(x));
                                        result.append(",");
                                    }
                                }
                                if(address.getLocality()!=null){
                                    result.append(address.getLocality());
                                    result.append("\n\n");
                                }
                            }
                            //if position accurate
                           if(gps.isGpsEnabled()){
                               speakOut(result.toString()+" is Your current location");
                               startPosition=result.toString();
                               Toast.makeText(
                                        getApplicationContext(),startPosition,
                                        Toast.LENGTH_LONG).show();
                           } else if(gps.isNetworkEnabled()){
                               speakOut(result.toString()+" is Your current approximate location. You have to give input of your present location on your own.");
                               Toast.makeText(
                                        getApplicationContext(),result.toString(),
                                        Toast.LENGTH_LONG).show();
                           }
                        }
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } else {
                gps.showSettingsAlert();
                startPosition=null;
                speakOut(" please turn on gps");
            }
            return false;
        }
    });
        //to know what the previous direction string
        btnShowLocationNo.setOnClickListener(new View.OnClickListener() {
            int j=0;
            @Override
            public void onClick(View arg0) {
                if(string!=null && j<string.length){
                    speakOut(j + 1 + " " + string[j]);
                    j++;
                }
                else if(string!=null && j>=string.length){
                    j=0;
                }
            }
        });
        //to reset all values for fresh start
        btnShowLocationNo.setOnLongClickListener(new View.OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                // TODO Auto-generated method stub
                speakOut("Values reset");
                steps=0;
                string=null;
                i=0;
                startPosition=null;
                gps.stopUsingGPS();
                gps=null;
                endPosition=null;
                return false;
            }
        });
    }
    //function to handle he text obtained from speech to text.
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
        //set the start 
        case RESULT_SPEECH_start:
            if (resultCode == RESULT_OK && null != data) {
                ArrayList<String> text = data
                        .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                Toast.makeText(getApplicationContext(), text.get(0),
                        Toast.LENGTH_SHORT).show();
                startPosition = text.get(0);
                steps=1;
                //speakOut("please press button again");

            }
            else{
                steps=0;
            }
            break;
            //to set the end
        case RESULT_SPEECH_end:
            if (resultCode == RESULT_OK && null != data) {
                ArrayList<String> text = data
                        .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                Toast.makeText(getApplicationContext(), text.get(0),
                        Toast.LENGTH_SHORT).show();
                endPosition = text.get(0);              
                steps=2;
            }
            else{
                steps=1;
            }
            break;
        }
    }

    //function to generate intent to take speech input
    public void intentGenerator(int code) {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");
        try {
            startActivityForResult(intent, code);
        } catch (ActivityNotFoundException a) {
            Toast.makeText(getApplicationContext(),
                    "Opps! Your device doesn't support Speech to Text",
                    Toast.LENGTH_SHORT).show();
            speakOut("Opps! Your device doesn't support Speech to Text");
        }
    }
    //mobile gives instruction.
    private void speakOut(String text) {
        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
        while (tts.isSpeaking()) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    //asynchronous task to get the path. THIS IS USED TO AVOID OVERLOAD THE MAIN THRED AND AVOID FORCE CLOSE OF THE APPLICATION
    private class GetPath extends AsyncTask<Void, Void, Void> {
        @Override 
        protected Void doInBackground(Void... params) {
            try {
                string=null;
                String html="";
                //forming url
                URL net = new URL(("http://maps.google.com/maps?saddr="+startPosition+" &daddr= "+endPosition).replaceAll(" ","%20"));
                URLConnection netConnection = null;
                netConnection = net.openConnection();
                //to take the input from google maps
                BufferedReader in = null;
                in = new BufferedReader(new InputStreamReader(netConnection.getInputStream()));
                String inputLine;
                while ((inputLine = in.readLine()) != null) {
                    html+=inputLine;
                }
                //jsoup parser to parse the document obtained from google maps
                Document doc = Jsoup.parse(html);
                //obtain necessary part of the document
                Elements el = doc.getElementsByClass("dir-mrgnr");
                //to remove html tags
                String str = el.text();
                str = str.replaceAll("[0-9]+[.] ", "\n");
                string = str.split("\n");
            } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

            return null;
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            // TODO Auto-generated method stub
            super.onProgressUpdate(values);
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            //so that on press of button again mobile can read the directions to users  
            steps=3;
        }
    }

    @Override
    public void onDestroy() {
        //shutdown
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    @Override
    protected void onStart() {
        gps = new GPS(AndroidGPSTrackingActivity.this);
        super.onStart();
    }

    @Override
    protected void onStop() {
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        if(gps!=null){
            gps.stopUsingGPS();
        }
        super.onStop();
    }

    @Override
    public void onInit(int status) {
        //initialising the text to speech  
        if (status == TextToSpeech.SUCCESS) {
            int result = tts.setLanguage(Locale.US);
            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "Language is not supported");
            } else {
                btnShowLocation.setEnabled(true);
            }
        } else {
            Log.e("TTS", "Initilization Failed");
        }
    }
} 
```

# ajax - Cakephp 2 从 1 个控制器函数渲染多个元素

> ID：15724878
> 
> 赞同：1
> 
> 时间：2013-03-31T00:00:26.433
> 
> 标签：ajax, cakephp

我调用一个 Js 链接通过 ajax 更新产品状态（活动/非活动）

```
echo $this->Js->link('[X]',
array('action' => 'deactivate', $p['Product']['id']),
array('before'=>$this->Js->get('#loading')->effect('fadeIn'),
'success'=>$this->Js->get('#loading')->effect('fadeOut'),
'update'=> '#'.$divString)); 
```

一旦创建了 ajax，就会通过更新隐藏表格行。视图是使用渲染的

```
$this->render('index_ajax_empty_table_row', 'ajax'); 
```

现在我需要更新一个包含有效产品类别和数量的菜单（通过 ajax）。所以从同一个控制器动作正在尝试

```
$this->render('index_ajax_menu', 'ajax'); 
```

该代码只会在错误的位置呈现第一项或错误的项。

我如何定义多个成功并告诉每个 div 渲染哪个元素？

# php - 奇怪的 PDO 错误 hy093

> ID：15724881
> 
> 赞同：1
> 
> 时间：2013-03-31T00:01:00.860
> 
> 标签：php, pdo

首先，对不起，如果以前有人问过类似的问题。但是我没有找到任何可以帮助我解决问题的方法。

**它继续：** 在一个类中，我生成如下 SQL 语句：

```
 $params = array();
$query = 'INSERT INTO '.TABLE_SETTINGS.' SET type=:type,';
        $params[] = array('type' => $setting['type']);

        if(!isset($setting['attributes'])){
            $query .= 'attributes=NULL,';   
        } else {
            $query .= 'attributes=:attributes,';
            $params[] = array('attributes' => $setting['attributes']);
        }

        if(!isset($setting['partid'])){
            $query .= 'partid=NULL,';   
        } else {
            $query .= 'partid=:partid,';
            $params[] = array('partid' => (int)$setting['partid']);
        }

        if(!isset($setting['description'])){
            $query .= 'description=NULL,';  
        } else {
            $query .= 'description=:description,';
            $params[] = array('description' => addslashes($setting['description']));
        }

        $query .= 'host=:host,name=:name,';
        $params[] = array('host' => (int)$setting['host']);
        $params[] = array('name' => $setting['name']);

        if(!isset($setting['content'])){
            $query .= 'content=NULL,';  
        } else {
            $query .= 'content=:content,';
            $params[] = array('content' => addslashes($setting['content']));
        }

        if(!isset($setting['trigger'])){
            $query .= 'trigger=NULL';   
        } else {
            $query .= 'trigger=:trigger';
            $params[] = array('trigger' => addslashes($setting['trigger']));
        } 
```

之后，我将它传递给一个数据库函数：**dbQuery($query,$params)**

函数 dbQuery 依赖于有效的 PDO 连接，如下所示：

```
function dbQuery($query,$params = array()){
global $DBVARS;  // I know that is not very nice ;-)
$db = dbInit();

$prefix = isset($DBVARS['table_prefix']) ? $DBVARS['table_prefix'] : '';
$sql = str_replace("{prefix}",$prefix,$query);

if(isset($params) && is_array($params) && count($params) > 0){
    $q = $db->prepare($sql);
    if(!$q->execute($params)){ // Added this just for debugging purpose
        $q = $q->errorCode();
    }
} else {
    $q = $db->query($sql);
}
$db->num_queries++;

return $q; 
```

}

如果我现在 var_dump(dbQuery($query,$params))，它会返回 HY093 错误，告诉我我的参数与令牌不匹配，至少这是我通过 google 找到的。为了清楚起见，我在这里展示了完整生成的 $query：

```
INSERT INTO table_name SET type=:type,attributes=NULL,partid=NULL,description=:description,host=:host,name=:name,content=:content,trigger=NULL 
```

这是数组 $params：

```
array(5) { [0]=> array(1) { ["type"]=> string(5) "yesno" } [1]=> array(1) { ["description"]=> string(79) "If yes, the link to the password score table is shown. It is hidden by default." } [2]=> array(1) { ["host"]=> int(49) } [3]=> array(1) { ["name"]=> string(17) "enable_scoretable" } [4]=> array(1) { ["content"]=> string(3) "yes" } } 
```

I checked it several times, but as far as I can see, the count of my elements matches the count of my array and the names are equal, too. So where do I have the error?

I am fairly new to php, and english is not my natve tongue, so I hope I could express myself well enough.

Any help with this is gadly appreciated. I have been googling for hours without any usable result. So I decided to post my very first question here.

Greetings from Germany and thank you for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:06:41.447

It's not the right syntax for a insert query ! Your are confounding with an update query ...

INSERT INTO table_name (column1, column2, column3,...) VALUES (value1, value2, value3,...)

* * *

Edit :

```
$params[] = array('type' => $setting['type']); // Wrong 
```

It's gonna create an array of arrays.

```
$params = array_merge($params, array('type' => $setting['type'])); 
```

# html - 如何从终端触发 url

> ID：15724890
> 
> 赞同：2
> 
> 时间：2013-03-31T00:01:55.960
> 
> 标签：html, shell, terminal

好的，我知道这是一个奇怪的问题，如何从终端运行 html url？让我解释...

我有一个 shell 脚本，它使用 api 来更新数据库中的记录，看起来像这样：

```
http://{account}.cartodb.com/api/v2/sql?q=UPDATE test_table SET column_name = 'my new string value' WHERE cartodb_id = 1 &api_key={Your API key} 
```

如何从我的 shell 脚本运行上述内容，以使其具有与在浏览器中运行时相同的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:41:54.950

试试这个：

```
wget "http://{account}.cartodb.com/your/api?call= etc." -qO- 
```

如果您的返回页面产生大量输出，请少用：

```
wget "http://{account}.cartodb.com/your/api?call= etc." -qO- | less 
```

或者，如果您不关心输出结果：

```
wget "http://{account}.cartodb.com/your/api?call= etc." -q -O /dev/null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T00:07:16.107

如果您要询问基于文本的浏览器，则有很多。

但是，从脚本运行它意味着您希望它是非交互式的，并且可能会丢弃输出。

例如 lynx -dump {some_url} 2>/dev/null。

其他命令行浏览器包括 w3c、links、elinks。

您可能还想使用 wget 或 curl 进行某些操作。

# javascript - 无法获得正确的分数，动态测验

> ID：15724893
> 
> 赞同：0
> 
> 时间：2013-03-31T00:02:22.093
> 
> 标签：javascript, jquery, html, dhtml

我正在做一个动态测验，因为我想学习 javascript、jquery、html 和 css。

每次答案正确时，我的测验都应该给 score 变量加 1 分。它似乎工作正常，但是当我正确回答**10 个问题时，它会显示 9 个正确答案**。

如果有人可以帮助我，我将不胜感激。

这是我的html：

```
<body>
<header>
    <hgroup>
        <h1>This is my Dynamic Quiz</h1>
        <h2>Using html5 / css / javascript</h2>
    </hgruop>
</header>

<section id='description'>
    <p>This quiz is compossed by 10 questions, you have to answer at least 7 from 10 to pass the exam.</p>
    <h2>Lets start!</h2>
</section>

<div id='questions-number'>
    <p>Question <span id='current-question'>1</span> of <span>10</span> </p>
</div>

<section id='questions'>
    <p id='question'></p>

    <form id='myForm'>
        <input type='radio' name='quiz' id='0' value='0'/><label id='answer0'>answer0</label></li></br>
        <input type='radio' name='quiz' id='1' value='1'/><label id='answer1'>answer1</label></br>
        <input type='radio' name='quiz' id='2' value='2'/><label id='answer2'>answer2</label></br>
        <input type='radio' name='quiz' id='3' value='3'/><label id='answer3'>answer3</label></br>
    </form> 
</section>
<div id='score'></div>
<div id='back'>
    back
</div>
<div id='next'>
    next
</div> 
```

这是我的 js 文件

```
$(document).on('ready', ready);
function ready(){
var allQuestions =
[
    {
        question: "Whats my real name?",
        choices: ["Jhonnatan", "Alberto", "Tatan","Jaime"],
        answer: 0
    },

    {
        question: "Who is Colombia's president?",
        choices: ["Alvaro Uribe", "Andres Pastrana", "Juan Manuel Santos","Tatan"],
        answer: 2
    },

    {
        question: "My favorite super heroe?",
        choices: ["Batman", "Flash", "Tatan","Javascript"],
        answer: 3
    },

    {
        question: "Wich sports do i practice?",
        choices: ["Climbing", "Swimming", "Programming","Running"],
        answer: 0
    },

    {
        question: "Whats my dad's name?",
        choices: ["Alberto", "Jorge", "Javier","Jose"],
        answer: 1
    },

    {
        question: "Whats my favorite color?",
        choices: ["Red", "Purple", "Blue","All"],
        answer: 2
    },

    {
        question: "My favorite alcoholic drink",
        choices: ["Vodka", "Aguardiente", "Rum","Tekila"],
        answer: 3
    },

    {
        question: "Whats my favorite kind of music?",
        choices: ["Hardcore", "Reggaeton", "Salsa","Programming"],
        answer: 0
    },

    {
        question: "How many qestions has this quiz??",
        choices: ["20", "8", "10","12"],
        answer: 2
    },

    {
        question: "My favorite programming lenguage?",
        choices: ["Ruby", "Arduino", "Python","Javascript"],
        answer: 3
    }
];

var score = 0;
var number=0;
var question = $('#question');
var choice1 = $('#answer0');
var choice2 = $('#answer1');
var choice3 = $('#answer2');
var choice4 = $('#answer3');
var next = $('#next');
var back = $('#back');
var currentQuestion = $('#current-question');

next.on('click', changeQuestion);
addQuestionAndAnswers();    
back.on('click', backQuestion);

function addQuestionAndAnswers() {
    currentQuestion.text(number + 1);
    question.text(allQuestions[number].question);
    choice1.text(allQuestions[number].choices[0]);
    choice2.text(allQuestions[number].choices[1]);
    choice3.text(allQuestions[number].choices[2]);
    choice4.text(allQuestions[number].choices[3]);
    console.log('funcionando!');
}

function changeQuestion(){
    if($("#myForm input[type='radio']:checked").length == 1){
        if(number<9){
            if($("#myForm input[type='radio']:checked").val() == allQuestions[number].answer){
                number = number +1;
                score ++;
                addQuestionAndAnswers();
            }else{
                number = number +1;
                addQuestionAndAnswers();
            }
        }else{
            displayResult();
    }
        console.log('checked answer');
    }else{
        alert('please select an answer before proceed');
    }

    function displayResult(){
        currentQuestion.text('10');
        $('#myForm').css('display', 'none');
        $('#question').css('display', 'none');
        $('#next').css('display', 'none');
        $('#score').css('display', 'inline-block');
        $('#score').text('Your score is: ' + score + 'pts');

    }
}

function backQuestion(){
    if(number > 0){
        number = number -1;
        addQuestionAndAnswers();
    }

}
} 
```

[编辑]

这是 jsfiddle 演示 :)

[http://jsfiddle.net/xtatanx/Wn8Qg/1/](http://jsfiddle.net/xtatanx/Wn8Qg/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:22:15.693

看看你在哪里增加分数：

```
if (number < 9) {
    if ($("#myForm input[type='radio']:checked").val() == allQuestions[number].answer) {
        number = number + 1;
        score++;  // only gets incremented here!!!
        addQuestionAndAnswers();
    } else {
        number = number + 1;
        addQuestionAndAnswers();
    }
} else {
    displayResult();
} 
```

因此，当您提交最后一个问题时，它不会检查答案。您应该重新安排这部分代码，可能是这样的：

```
// first, check answer
if ($("#myForm input[type='radio']:checked").val() == allQuestions[number].answer) {
    score++;  // increment score for correct answer
}
// then, move to next question OR show results
if (number < 9) {
    number = number + 1;
    addQuestionAndAnswers();
} else {
    displayResult();
} 
```

You have another bug too: if you answer a question correctly, then go back to it, then click `next`, it adds to your total score again! So you can get infinite points if you want.

# java - StringBuilder.toString 是否保留构建的字符串？

> ID：15724895
> 
> 赞同：4
> 
> 时间：2013-03-31T00:02:32.053
> 
> 标签：java, android, stringbuilder

我正在创建一个 StringBuilder 来收集我定期刷新到服务器的字符串。如果刷新失败，我想保留字符串以便下次重试，尽管同时我可能会收到额外的字符串来发送，这些字符串必须添加到 StringBuilder 中。

我想知道的是最有效的方法是什么，因为这是在一个 Android 应用程序中完成的，电池使用率和 CPU 使用率是一个大问题。调用 StringBuilder 的 toString() 函数是否会在内部存储它返回的结果字符串，以便后续调用不必完成复制所有原始字符串的工作？或者如果调用失败，我是否应该创建一个新的 StringBuilder，并使用 toString() 的返回值进行初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T00:12:26.933

这是[OpenJDK 源代码`StringBuilder`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/StringBuilder.java)：

```
public String toString() {
    // Create a copy, don't share the array
    return new String(value, 0, count);
} 
```

具有这些参数的[构造函数](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String)的[来源是：`String`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String)

```
public String(char value[], int offset, int count) {
    if (offset < 0) {
        throw new StringIndexOutOfBoundsException(offset);
    }
    if (count < 0) {
        throw new StringIndexOutOfBoundsException(count);
    }
    // Note: offset or count might be near -1>>>1.
    if (offset > value.length - count) {
        throw new StringIndexOutOfBoundsException(offset + count);
    }
    this.offset = 0;
    this.count = count;
    this.value = Arrays.copyOfRange(value, offset, offset+count);
} 
```

所以是的，它确实`String`每次都会创建一个新的，是的，它会复制`char[]`每次。

**需要注意的是，这是 的一种实现`toString`，而另一种实现可能明显不同。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:53:01.570

这将是一个实现细节。由于 java 字符串是不可变的，因此即使不需要，正确的 impl 也可以选择从 StringBuilder.toString() 共享或创建新字符串。

正如大家所说，您可以测试一下这对您来说是否确实是一个真正的性能问题。如果它是一种（笨拙的）解决方法是包装 StringBuilder 并缓存结果字符串。您可以使用脏标志来指示内容已被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:14:15.887

StringBuilder.toString API says that *a **new** String object is allocated and initialized to contain the character sequence currently represented by this object.*

# .net - 将 Windows Store 项目引用到 .Net Framework 程序集，例如类库

> ID：15724899
> 
> 赞同：1
> 
> 时间：2013-03-31T00:03:20.940
> 
> 标签：.net, windows-store-apps, portable-class-library

我想，我可以理解为什么，我不能将任何 .Net Framework 程序集引用到任何 WinRT 项目——针对 .Net Core。便携性等等... bla bla bla ...

但我不明白，为什么我不能反过来做！

例如，当我想将一些 Windows Store 程序集引用添加到常规 .Net Framework 程序集时，我会收到错误消息。这是不可能的任何合乎逻辑的理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:41:03.447

是的，对此有一个完全合乎逻辑的解释：适用于 Windows 应用商店应用程序（或 .NET Core）的 .NET 不是 .NET Framework（或其客户端配置文件）的子集。它是一个完全独立的平台，就像 Silverlight 或 Windows Phone。事实上，它强烈地基于旧版本的 Silverlight。

The only way to share a class library between a Windows Store app and a regular Windows (.NET) application is to create a portable class library. By selecting the target platforms for it, you'll get a specific subset of APIs that are available on all selected platforms. You'll be able to reference such a library in any project using one of selected supported platforms.

# regex - 正则表达式查询第 n 个匹配

> ID：15724902
> 
> 赞同：-1
> 
> 时间：2013-03-31T00:03:59.553
> 
> 标签：regex

我正在寻找一个正则表达式，它只匹配以下文本中单词“blah”的第 3、6、9、12、15、18、..... 等，而忽略第 1、2、4、5、7 , 8th,.... 等等。正则表达式应该只匹配 blah 的 3 次出现

```
The Band blah The Band blah  blah Up On Cripple Creek (2000 Digital Remaster) blah 2000 blah Greatest Hits blah The Band blah  blah The Weight (2000 Digital Remaster) blah 2003 blah Rhythm Of The Rain blah The Cascades blah  blah Rhythm Of The Rain (LP Version) blah 2005 blah Chronicle Volume One blah Creedence Clearwater Revival blah  blah Who'll Stop the Rain blah 1976 blah The Complete Sun Singles, vol. 1 blah Johnny Cash blah  blah I Walk the Line blah 2001 blah Greatest Hits blah Bob Seger blah  blah Against The Wind blah 1980 blah Their Greatest Hits blah The Eagles blah  blah Lyin' Eyes blah 1975 blah Johnny Horton's Greatest Hits blah Johnny Horton blah  blah North To Alaska 
```

提前致谢。

仅供参考，我将在 Hive 中使用这个正则表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:29:49.187

美观紧凑：

```
(?:blah.*?){2}(blah) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:28:24.157

```
'(?:(?:.+?)blah(?:.+?)blah(?:.+?)(blah))' 
```

这应该可行，但我不确定正则表达式是否是非常长文本的最佳解决方案

编辑以避免第一次捕获......虽然很明显OP不明白正则表达式的工作原理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:41:29.853

由于我认为以前的两个答案都不是您想要的（根据您在评论中所说的），因此我也将把我的印记放在这里。
**免责声明：**我认为没有任何有效的方法可以只捕获第三个废话，但是，你仍然可以做到。
**第1步：**反转字符串，您将需要任意长度的lookbehind，这是您无法拥有的。但是您可以通过反转字符串并使用任意长度的前瞻来获得它们。
**第 2 步：**下面的正则表达式应该能捕捉到你想要的东西：

```
/halb(?=(?:(?:[^h]|h(?!alb))*halb){2}(?:[^h]|h(?!alb)|halb(?:(?:[^h]|h(?!alb))*halb){2})*$)/ 
```

**第 3 步：**尝试重新排序/反转...

（注意：由于我非常困，我没有测试它，如果需要的话会在几个小时内纠正它......）

**编辑：**
好的，现在更正了。所以它可以工作，但你仍然有向后的字符串。您必须反转数组中的所有字符串，然后反转数组。但是，[它仍然有效](http://jsfiddle.net/kJUMM/)。再一次，如果你有性能问题，如果可以的话，你可能想尝试使用所有格量词。

# php - 函数在应该从 footer.php 调用时返回未定义

> ID：15724904
> 
> 赞同：0
> 
> 时间：2013-03-31T00:04:10.170
> 
> 标签：php, javascript

我正在开发一个在线报价系统（从头开始）并且由于我的 PHP 页脚中的某些内容而出现异常。

当用户单击提交时，仅当如下所示注释掉对 SQL 数据库的调用块时，才能调用 MMJS/MPJS/DPJS 文档中的函数（接近下面代码的末尾）。否则，我会收到一个异常，说明这些文档中的函数未定义。

为什么此代码块会导致稍后调用的文档中的函数无法访问？

代码：

```
 <div id="results"></div>

        </div><!-- #wrapper -->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="<?PHP echo $relpath; ?>js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
        <script src="<?PHP echo $relpath; ?>js/plugins.js"></script>
        <script src="<?PHP echo $relpath; ?>js/main.js"></script>

        // <script type="text/javascript">
            // <?PHP
                // $stmt = $mysqli->prepare("SELECT * FROM `Fixed Quoter Prices` WHERE 1");
                // $stmt->bind_result($db_DPbaseRate, $db_MPbaseRate, $db_MMbaseRate, $db_raidRate, $db_boxRate, $db_metaRate, $db_sanRate,$db_hbaRate, $db_twoTB, $db_threeTB, $db_fourTB, $db_switchUpgrade, $db_tenRate, $db_taxRate);
                // $stmt->execute();
                // $stmt->fetch();

                // echo "var DPbaseRate = $db_DPbaseRate;";
                // echo "var MPbaseRate = $db_MPbaseRate;";
                // echo "var MMbaseRate = $db_MMbaseRate;";
                // echo "var raidRate = $db_raidRate;";
                // echo "var boxRate = $db_boxRate;";
                // echo "var metaRate = $db_metaRate;";
                // echo "var sanRate = $db_sanRate;";
                // echo "var hbaRate = $db_hbaRate;";
                // echo "var twoTB = $db_twoTB;";
                // echo "var threeTB = $db_threeTB;";
                // echo "var fourTB = $db_fourTB;";
                // echo "var switchUpgrade = $db_switchUpgrade;";
                // echo "var tenRate = $db_tenRate;";
                // echo "var taxRate = $db_taxRate;";
            // ?>

        // </script>

        <?PHP if($title == 'Media Master') : ?>
        <script type="text/javascript" src="../js/MMJS.js"></script>
        <?PHP elseif($title == 'Media Pro') : ?>
        <script type="text/javascript" src="../js/MPJS.js"></script>
        <?PHP elseif($title == 'Desk Pro') : ?>
        <script type="text/javascript" src="../js/DPJS.js"></script>
        <?PHP endif; ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:22:21.420

弄清楚了！我忘记了我最初的 SQL 数据库连接。

更正了内部脚本，在块引用中添加了一行：

```
<script type="text/javascript">
            <?PHP 
```

> $mysqli = new mysqli('12.34.56.78','someuser','somepass','foo');

```
 $stmt = $mysqli->prepare("SELECT * FROM `Fixed Quoter Prices` WHERE 1");
                $stmt->bind_result($db_DPbaseRate, $db_MPbaseRate, $db_MMbaseRate, $db_raidRate, $db_boxRate, $db_metaRate, $db_sanRate,$db_hbaRate, $db_twoTB, $db_threeTB, $db_fourTB, $db_switchUpgrade, $db_tenRate, $db_taxRate);
                $stmt->execute();
                $stmt->fetch();

                echo "var DPbaseRate = $db_DPbaseRate;";
                echo "var MPbaseRate = $db_MPbaseRate;";
                echo "var MMbaseRate = $db_MMbaseRate;";
                echo "var raidRate = $db_raidRate;";
                echo "var boxRate = $db_boxRate;";
                echo "var metaRate = $db_metaRate;";
                echo "var sanRate = $db_sanRate;";
                echo "var hbaRate = $db_hbaRate;";
                echo "var twoTB = $db_twoTB;";
                echo "var threeTB = $db_threeTB;";
                echo "var fourTB = $db_fourTB;";
                echo "var switchUpgrade = $db_switchUpgrade;";
                echo "var tenRate = $db_tenRate;";
                echo "var taxRate = $db_taxRate;";
            ?>
        </script> 
```

# macos - git mac application

> ID：15724906
> 
> 赞同：0
> 
> 时间：2013-03-31T00:04:47.240
> 
> 标签：macos, github

So, I Just started to use GitHub, and I downloaded the application. And If I do commit something of to my github it uses my username of my computer, how do I change it to use the username of my github account?

So Question: How do you get the GitHub application (mac) to use your own github account username instead of your computers account username

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:24:25.797

In the github application, click Github -> Preferences, and verify what your name is set to.

You can also see what name your git repo will use from the command line.

```
cd /your/git/repo
git config user.name 
```

If you want to change the user name for just that repo...

```
cd /your/git/repo
git config user.name "joe smoe" 
```

If you want to change your user name for every repo

```
git config --global user.name "joe smoe" 
```

[https://help.github.com/articles/setting-your-username-in-git](https://help.github.com/articles/setting-your-username-in-git)

Lastly, double check 'how' you are pushing up your commits. You may be using https which behaves differently than ssh. I can't say for sure how http behaves because I always use ssh.

# html - 根据剩余空间隐藏 div 表的内容

> ID：15724907
> 
> 赞同：0
> 
> 时间：2013-03-31T00:04:58.900
> 
> 标签：html, css, html-table

我有两个相邻的 div 框。包含“div 表”的左侧框。调整页面大小时，我希望隐藏左侧 div 表的内容，例如溢出：隐藏。但是，左框包含“剩余”空间，而右框的宽度为 35%。

当 div 表格的内容比“剩余空间”（左框的宽度）宽时，表格的右边框不再可见。

我想隐藏图像的其余部分，但继续看到 div 表的右边框。这可以使用 div 表来完成吗？

**HTML**

```
 <div class="table" id="containerRight">Some content on the right</div>
<div id="containerLeft">
    <div class="table" id="tableLeft">
        <div class="table-row">
            <div class="table-cell">
                <div style="width:14px;"></div>
            </div>
            <div class="table-cell">Some title</div>
            <div class="table-cell">
                <div style="width:14px;"></div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell"></div>
            <div class="table-cell">
                    <!-- This is the content of the LEFT table -->
                    <img src="http://oasis-church-nj.com/wp-content/uploads/2011/04/easter-egg.jpg" style="height:100px; width:500px;" />
            </div>
            <div class="table-cell"></div>
        </div>
        <div class="table-row">
            <div class="table-cell"></div>
            <div class="table-cell"></div>
            <div class="table-cell"></div>
        </div>
    </div>
</div> 
```

**CSS**

```
.table {
    display:    table;
    overflow:   hidden;
    border-collapse:    collapse;
}

.table-row {
    display:    table-row;
}

.table-cell {
    display:    table-cell;
    word-break: all;
    overflow: hidden;
}

#containerLeft {
    background: #F0F;
    position:   relative;
    display:    block;
    overflow:   hidden;
    margin:     0px 0px 15px 0px;
}

#containerRight {
    background: #FF0;
    position:   relative;
    min-width:  220px;
    max-width:  400px;
    width:      35%;
    height:     300px;
    float:      right;
    margin:     0px 0px 15px 15px;
} 
```

示例可以在这里找到。让 HTML 表格变宽变小，右边框会消失。 [http://jsfiddle.net/gqmJ9/](http://jsfiddle.net/gqmJ9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:34:31.660

可能这就是你想要的：

[http://jsfiddle.net/Bh8hg/1/](http://jsfiddle.net/Bh8hg/1/)

只需在左侧 div 上创建一个真正的边框。

```
#containerLeft {
    background: #F0F;
    position:   relative;
    display:    block;
    overflow:   auto;
    margin:     0px 0px 15px 0px;
    border:     #F0F 15px solid;    //real border
} 
```

还要remove `<div style="width:14px;"></div>`，放在`style`html里不是好主意，很难维护。

# windows - 如何使用批处理文件执行任何 .exe？

> ID：15724908
> 
> 赞同：4
> 
> 时间：2013-03-31T00:05:00.420
> 
> 标签：windows, batch-file, automation, exe

我知道我可以通过执行以下操作来启动 exe：

```
start "" /b filename.exe 
```

但这需要我知道 filename.exe 的名称，对于任何以 .exe 结尾的通用文件，我该如何做到这一点？我尝试了明显的通配符实现：

```
start "" /b *.exe 
```

但是，Windows 给我一个错误，说它找不到“*.exe”文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T00:23:10.050

如果您打算在批处理文件中运行，您可以这样做：

```
for %%i in (*.exe) do start "" /b "%%i" 
```

如果要跳过要执行的特定文件：

```
for %%i in (*.exe) do if not "%%~nxi" == "blabla.exe" start "" /b "%%i" 
```

如果还需要检查子文件夹，请添加 /r 参数：

```
for /r %%i in (*.exe) do start "" /b "%%i" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T00:20:03.603

从 cmd 运行此命令到包含`exe`您要运行的所有内容的文件夹：

```
for %x in (*.exe) do ( start "" /b  "%x" ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T00:19:53.463

希望它有帮助

```
for /f "delims=" %%a in ('dir /b /s "*.exe"') do (
    start %%a
) 
```

您应该首先使用 dir 命令查找所有 exe 文件，然后执行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T00:32:25.087

在 bat 文件中添加这一行

```
FOR /F "tokens=4" %%G IN ('dir /A-D /-C ^| find ".exe"') DO start "" /b %%G 
```

这会执行当前目录中的每个 .exe 文件。如同

```
*.exe 
```

如果批处理支持 * 就可以了。

If you want to execute it directly from a command line window, just do

```
FOR /F "tokens=4" %G IN ('dir /A-D /-C ^| find ".exe"') DO start "" /b %G 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T14:13:44.117

Don't blame their codes for space issue. You should know how to use double quotation marks.

```
for /f "delims=" %%a in ('dir /b /s *.exe') do (
    start "" "%%a"
) 
```

# internet-explorer - 哪个版本的 Microsoft Internet Explorer 支持 WebRTC？

> ID：15724913
> 
> 赞同：45
> 
> 时间：2013-03-31T00:05:46.777
> 
> 标签：internet-explorer, webrtc

2019 年更新：没有 IE 真正支持 WebRTC，也没有 IE 会支持。5 周后，Microsoft Edge 将死去，基于 Chromium 的 Edge 将万岁。

支持 WebRTC。

* * *

Chrome 和 Firefox 都支持[WebRTC](http://en.wikipedia.org/wiki/WebRTC)。

Internet Explorer 是否支持它？从哪个版本开始？

如果没有，是否有计划在未来支持它，如果有，什么时候支持？

[使用诸如webrtc4all 之](https://code.google.com/p/webrtc4all/)类的项目来支持匀场怎么样 ，这是一个实用的解决方案吗？

**更新**：我现在与 WebRTC 合作了一年。WebRTC 不会也不会在 IE 上运行（第三方解决方案使其几乎无法运行，如果根本不应该依赖）。最好等待 Edge 重写为 Chromium，届时将支持 WebRTC。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-30T16:20:23.337

目前 IE 不支持 WebRTC。此外，似乎 MS 不打算实施 WebRTC。他们宣布了一项名为 CU-RTC-Web 的新技术——有点像微软的 WebRTC 模拟。

CU-RTC-WEB：[http ://html5labs.interoperabilitybridges.com/cu-rtc-web/cu-rtc-web.htm](http://html5labs.interoperabilitybridges.com/cu-rtc-web/cu-rtc-web.htm)

预计这个 CU-RTC-WEB 将与今天的 WebRTC 兼容。

更新

也有人反映IE在使用[http://www.google.com/chromeframe时支持WebRTC](http://www.google.com/chromeframe)

更新

微软宣布在 IE 中支持 WebRTC：http: [//blogs.msdn.com/b/ie/archive/2014/10/27/bringing-interoperable-real-time-communications-to-the-web.aspx](http://blogs.msdn.com/b/ie/archive/2014/10/27/bringing-interoperable-real-time-communications-to-the-web.aspx)

更新

虽然微软可能会在 2015 年在 IE 中添加 WebRTC，但 IE 的哪个版本还有待观察：[https ://bloggeek.me/microsoft-browser-webrtc/](https://bloggeek.me/microsoft-browser-webrtc/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-25T11:13:57.200

自 2015 年 9 月 18 日起，Microsoft Edge (Spartan) 现在支持 ORTC。链接等如下。

博客 - [http://blogs.windows.com/msedgedev/2015/09/18/ortc-api-is-now-available-in-microsoft-edge/](http://blogs.windows.com/msedgedev/2015/09/18/ortc-api-is-now-available-in-microsoft-edge/)

*   [https://blogs.office.com/2015/09/18/enabling-seamless-communication-experiences-for-the-web-with-skype-skype-for-business-and-microsoft-edge/](https://blogs.office.com/2015/09/18/enabling-seamless-communication-experiences-for-the-web-with-skype-skype-for-business-and-microsoft-edge/)

*   [http://blogs.skype.com/2015/09/18/skype-for-web-and-skype-for-outlook-com-update/](http://blogs.skype.com/2015/09/18/skype-for-web-and-skype-for-outlook-com-update/)

边缘测试驱动器上的演示 - [http://dev.modern.ie/testdrive/demos/ortcdemo/](http://dev.modern.ie/testdrive/demos/ortcdemo/)用于边缘到边缘视频通话

*   [http://dev.modern.ie/testdrive/demos/twilioortc/](http://dev.modern.ie/testdrive/demos/twilioortc/)用于 Twilio 的 Edge-to-Phone 通话

*   [http://dev.modern.ie/testdrive/demos/simplewebrtc](http://dev.modern.ie/testdrive/demos/simplewebrtc)用于 &yet 的 Edge-to-Chrome/FF 音频通话

WebRTC-ORTC 互操作的开源项目——来自与我们密切合作的合作伙伴

*   [https://webrtchacks.com/first-steps-ortc/](https://webrtchacks.com/first-steps-ortc/) - blog post and open source project by &yet

*   [https://www.npmjs.com/package/ortc-adapter](https://www.npmjs.com/package/ortc-adapter) - open source project launched by Twilio

Hope this helps. Healy in Tampa

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-13T21:49:34.223

目前 IE 不支持 WebRTC。

一旦在 WebRTC（也称为 WebRTC 2.0）之上添加了 ORTC API，微软就有一些未来实施 WebRTC 的计划。

IE 的 Chrome Frame 插件已经停产，所以这也不是一个好的解决方案。

目前最好的选择是采用 Temasys 的 IE 和 Safari 插件。它可以在任何地方免费使用，并遵循本机 WebRTC API。更多关于它的信息：http: [//bloggeek.me/temasys-free-webrtc-plugin/](http://bloggeek.me/temasys-free-webrtc-plugin/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-12T17:25:50.807

他们说，ORTC API在**Microsoft Edge**浏览器的**Windows10下可用。**

 **但是，我没有看到**ORTC(aka WebRTC2.0)**的工作示例。

而且我确信它与当前在**Chrome**和**FF**中实现的工作**WebRTC**不兼容。**

# mysql - 从表和同一列中选择相同的 SUM 两个不同的 id

> ID：15724914
> 
> 赞同：0
> 
> 时间：2013-03-31T00:05:46.920
> 
> 标签：mysql

我有一个问题，我是新来的。

我有一个名为“项目”的表，并且有 ID 列和计数列，我还有一个字符表，它是项目 ID 的所有者

我这里有一个有效的代码..并显示项目的顶部字符及其计数..解释更多..

```
"SELECT SUM(it.count) FROM characters ch  
LEFT OUTER JOIN items it ON ch.charId=it.owner_id
WHERE item_id=40001 ORDER BY SUM(it.count) DESC LIMIT 20");) 
```

所以我真正想要的是让它从相同的项目表和相同的列数中获取第二个项目ID的列表......

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:15:24.577

首先，让我让您的查询更具可读性：

```
SELECT SUM(it.count)
FROM characters ch 
LEFT OUTER JOIN items it ON ch.charId=it.owner_id 
WHERE item_id=40001 
ORDER BY SUM(it.count) DESC 
LIMIT 20 
```

这个查询有点奇怪。首先，您选择*一个*总和（您没有按任何分组）然后您按该总和排序，并将返回的行数限制为*20*？

此外，您正在执行`LEFT OUTER JOIN`但随后使用表中的外部表`WHERE`，这会导致删除所有只有一个字符但没有项目的行。

以下查询将执行完全相同的操作。

```
SELECT SUM(it.count)
FROM characters ch 
JOIN items it ON ch.charId=it.owner_id 
WHERE item_id=40001 
```

现在，如果您想要多个 item_id，您要么想要两者的总数：

```
SELECT SUM(it.count)
FROM characters ch 
JOIN items it ON ch.charId=it.owner_id 
WHERE item_id IN (40001,40002) 
```

或者你想要每个项目的总和

```
SELECT SUM(it.count)
FROM characters ch 
JOIN items it ON ch.charId=it.owner_id 
GROUP BY item_id
ORDER BY SUM(it.count) DESC 
LIMIT 20 
```

您可以将 JOIN 更改为仅执行几种项目类型：

```
SELECT SUM(it.count)
FROM characters ch 
JOIN items it ON ch.charId=it.owner_id AND it.item_id IN (40001,40002)
GROUP BY item_id
ORDER BY SUM(it.count) DESC 
LIMIT 20 
```

# java - Java 中的观察者模式 - 观察者观察不同的、不相关的类型或类？

> ID：15724917
> 
> 赞同：4
> 
> 时间：2013-03-31T00:06:36.730
> 
> 标签：java, observer-pattern, instanceof

观察者模式中的观察者是否总是必须观察相同类型的对象？如果 ONE Observer 观察完全不相关的不同类型的类的不同对象，可以吗？

示例 - Observer 是 CarDashBoard，Observable(s) 是 FuelTank、Speedometer、EngineThermometer、CarBattery 等。观察到的参数分别是fuelLevel、speed、temperatureOfEngine、powerLevel。

* * *

如果我观察到多个不相关的类型，那么我将不得不使用 instanceof() 方法来检查通知观察者的 Observable 的类。但是，根据此链接，这似乎是一种不好的方法 - [http://www.javapractices.com/topic/TopicAction.do?Id=31](http://www.javapractices.com/topic/TopicAction.do?Id=31)

另一个与 instanceof 相关的链接 - [http://blog.joda.org/2007/01/java-language-dynamic-instanceof_7967.html](http://blog.joda.org/2007/01/java-language-dynamic-instanceof_7967.html)

所以，我想我会改用 getClass() 方法，然后根据传递的 Observable 决定要执行的操作。为此目的使用 getClass() 是否安全？

还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:47:16.297

你可以使用多态性。例如，假设您有一个扩展的抽象类`Observable`：

```
import java.util.Observable;

public abstract class DashboardDataSource extends Observable {

    public abstract int getLevel();
} 
```

Then you have two classes that inherit from `DashboardDataSource` (actually you have as many as you need, I'm just using two as an example):

```
public class FuelLevel extends DashboardDataSource {

    public void saySomething(){
        setChanged();
        notifyObservers();
    }
    @Override
    public int getLevel() {
        // TODO Auto-generated method stub
        return 50;
    }
} 
```

And

```
public class BatteryLevel extends DashboardDataSource { 

    public void saySomething(){
        setChanged();
        notifyObservers();
    }

    @Override
    public int getLevel() {
        // TODO Auto-generated method stub
        return 20;
    }
} 
```

You could then have a `Dashboard` like so:

```
public class Dashboard implements Observer {

    @Override
    public void update(Observable o, Object arg) {
        DashboardDataSource d = (DashboardDataSource) o;
        System.out.println (d.getLevel());

    }
} 
```

In this case, you just cast the `Observable o` to a `DashboardDataSource` and call the implementation of its abstract method, which will be specific to whatever DashboardDataSource is making the notification to your `Dashboard` (in this example a `FuelLevel` or `BatteryLevel`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:43:26.767

不使用的原因`instanceof`是它是使用多态性的一种技巧。它会起作用，但更好的是提出一个更面向对象的解决方案。使用`getClass`有同样的问题。

我想我会创建多个观察者，每个观察者用于 FuelTank、Speedometer 等，并让他们更新 CarDashboard。像这样的东西。

```
public class CarDashboard
{
    public int currentSpeed;
    public int fuelPercentage;    
    //etc...
}

public class FuelObserver extends Observer
{
   private CarDashboard dashboard;

   public FuelObserver(CarDashboard dashboard)
   {
      this.dashboard = dashboard;
   }

   public void update(Observable fuelTank, Object fuelLevel)
   {
       this.dashboard.fuelPercentage = (int)fuelLevel;
   }
}

//etc.. 
```

# vim - how do I prevent vim from auto-wrapping at column 80

> ID：15724919
> 
> 赞同：16
> 
> 时间：2013-03-31T00:06:42.770
> 
> 标签：vim

As I'm writing code, when the cursor reaches column 80, vim automatically wraps the text by inserting a newline character. How do I prevent vim from doing so? Is there any setting that am missing?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-31T00:11:59.143

The auto-wrapping is defined by `set wrap` and this option depends on the width of your window/screen, but it does not insert a newline character into the file.

The column **80** is defined by `set tw=80` this will change the text by adding new linebreaks for long lines.

To check details, you can:

```
:h 'wrap'
:h 'tw' 
```

To disable auto-wrapping, you could:

```
:set nowrap 
```

To disable long line auto broken, you can:

```
:set tw=0 
```

0 is default.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-31T00:15:50.123

Just found that `set tw=0` works. It doesn't wrap lines by inserting a new line character at a predefined limit.

Added that `set` to vimrc to make it permanent.

# android - Xamarin 上的 IronPython

> ID：15724920
> 
> 赞同：8
> 
> 时间：2013-03-31T00:06:45.510
> 
> 标签：android, ironpython, xamarin

我很难让 IronPython 在 Xamarin.Android 应用程序中运行。Xamarin 声明他们对[DLR](http://docs.xamarin.com/guides/android/advanced_topics/limitations)的支持有限。

我在我的 PC 上安装了最新版本的 Iron Python。在 Xamarin Studio 的 Xamarin.Android 项目中，我添加了对 <IPY 安装目录>\Platforms\Android*.dll 的引用。

当我编译时，我得到...

```
 C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(2,2): Error: Exception while loading assemblies: System.IO.FileNotFoundException: Could not load assembly 'Microsoft.Scripting, Version=1.1.0.20, Culture=neutral, PublicKeyToken=7f709c5b713576e1'. Perhaps it doesn't exist in the Mono for Android profile?

File name: 'Microsoft.Scripting.dll'

   at Monodroid.Tuner.MonoDroidResolver.Resolve(AssemblyNameReference reference, ReaderParameters parameters)

   at Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences(List`1 assemblies, AssemblyDefinition assembly)

   at Xamarin.Android.Tasks.ResolveAssemblies.Execute() (IPYScripter) 
```

如果 Xamarin.Android 支持 Iron Python，我该如何实现它？我的应用程序的目标是让用户能够创建和运行 IPY 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T22:22:47.923

由于对程序集强名称的更改，针对 Mono for Android 构建的程序集与 Xamarin.Android 不兼容：

[https://forums.xamarin.com/discussion/1476/](https://forums.xamarin.com/discussion/1476/)

最重要的是，IronPython 的 Android 支持是非常实验性的。它需要相当多的工作才能真正有用。它可以编译，你可以用它运行一个非常简单的应用程序，但除此之外我还没有测试过。与其说是对 DLR 的支持，不如说是对其他一切的支持。如果您需要更详细的帮助，请在 IronPython 邮件列表中询问 - 这些文本框太小了。:)

*第一段来自：[Cheesebaron](https://stackoverflow.com/users/368379/cheesebaron)*

*第二段来自：[杰夫哈迪](https://stackoverflow.com/users/129592/jeff-hardy)*

# php - 如何根据未知键将数组排序为单独的数组？

> ID：15724925
> 
> 赞同：0
> 
> 时间：2013-03-31T00:07:46.513
> 
> 标签：php, sql

我有一个这样的数组，如何根据类别 ID 将其拆分为其他几个数组？

即有类别 1 -> 论坛 1，论坛 4。类别 2 -> 论坛 3，论坛 7

我查看了array_chunk，但可能有任意数量的类别或论坛

```
Array
(
    [category_id] => 1
    [category_name] => Main
    [forum_id] => 1
    [forum_name] => General forum
)
Array
(
    [category_id] => 1
    [category_name] => Main
    [forum_id] => 2
    [forum_name] => Test forum
)
Array
(
    [category_id] => 2
    [category_name] => Test
    [forum_id] => 3
    [forum_name] => Another test
) 
```

我正在使用这个 SQL 查询（如果它只能在用 PHP 修改之前用 SQL 完成）

```
$forums_query = mysqli_query($sql_connect, 'SELECT `categories`.`category_id`, `categories`.`category_name`,
                                            `forums`.`forum_id`, `forums`.`forum_name`, `forums`.`category_id`
                                            FROM `categories`
                                                LEFT JOIN `forums`
                                                    ON `categories`.`category_id` = `forums`.`category_id`
                                            ORDER BY `categories`.`category_position`, `forums`.`forum_position` ASC'); 
```

编辑：顺便说一句，我可以想到一种方法，即循环遍历它，并且对于每个猫 ID（如 X），检查是否存在名为 catX 的数组，如果不存在则创建它

但是，每次有人访问该页面时都会运行它，所以我希望它尽可能快速和轻量资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:22:04.063

我不确定我是否做对了，看看这个演示：

```
<?php
$forums[] = array('category_id' => 1, 'category_name' => 'Main', 'forum_id' => 1, 'forum_name' => 'General forum');
$forums[] = array('category_id' => 1, 'category_name' => 'Main', 'forum_id' => 2, 'forum_name' => 'General 2');
$forums[] = array('category_id' => 1, 'category_name' => 'Main', 'forum_id' => 3, 'forum_name' => 'General 3');
$forums[] = array('category_id' => 1, 'category_name' => 'Main', 'forum_id' => 4, 'forum_name' => 'General 4');
$forums[] = array('category_id' => 2, 'category_name' => 'Main2', 'forum_id' => 1, 'forum_name' => 'General forum');
$forums[] = array('category_id' => 2, 'category_name' => 'Main2', 'forum_id' => 2, 'forum_name' => 'General 2');
$forums[] = array('category_id' => 3, 'category_name' => 'Main3', 'forum_id' => 3, 'forum_name' => 'General 3');
$forums[] = array('category_id' => 4, 'category_name' => 'Main3', 'forum_id' => 4, 'forum_name' => 'General 4');

$forums_organized = array();
foreach($forums as $forum){
    $forums_organized[$forum['category_id']][]  = array('forum_name' => $forum['forum_name'], 'forum_id' => $forum['forum_id']);
}
print_r($forums_organized); 
```

输出：

```
Array
(
    [1] => Array
        (
            [0] => Array
                (
                    [forum_name] => General forum
                    [forum_id] => 1
                )

            [1] => Array
                (
                    [forum_name] => General 2
                    [forum_id] => 2
                )

            [2] => Array
                (
                    [forum_name] => General 3
                    [forum_id] => 3
                )

            [3] => Array
                (
                    [forum_name] => General 4
                    [forum_id] => 4
                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [forum_name] => General forum
                    [forum_id] => 1
                )

            [1] => Array
                (
                    [forum_name] => General 2
                    [forum_id] => 2
                )

        )

    [3] => Array
        (
            [0] => Array
                (
                    [forum_name] => General 3
                    [forum_id] => 3
                )

        )

    [4] => Array
        (
            [0] => Array
                (
                    [forum_name] => General 4
                    [forum_id] => 4
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:15:53.490

你的情况不是 INNER JOIN 吗？

```
$old_array = array();
$new_array = array();

foreach($old_array AS $tab) {
    if(!array_key_exists($tab['category_name'], $new_array)) {
        $tmp = array($tab['forum_name']);
        $tmp = array($tab['category_name']=>$tmp);
        $new_array = array_merge($new_array, $tmp);
    }
    else {
        array_push($new_array[$tab['category_name']], $tab['forum_name']);
    }
} 
```

# html - 在 PHP/HTML 中对齐信息

> ID：15724926
> 
> 赞同：0
> 
> 时间：2013-03-31T00:07:57.640
> 
> 标签：html, css

我有这个代码，它当前显示如下信息：

```
 <?php
    mysql_connect("localhost","example","password") or die("Could not connect to localhost");
mysql_select_db("exampledb") or die( "Could not connect to database");
$result = mysql_query("SELECT * FROM tablexample");

echo "<b>" . "Name"  . "</b>" . "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" . "<b>" . "Number" . "</b>";
echo "<br/>";
echo "<br/>";
while ($row = mysql_fetch_array($result))
  {
echo  ucwords($row['name']) . "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" . ucwords($row['number']) . "<br>"; 
echo "<hr width='20%'>";
  }
?>

Name              Number

B              (888) 888-3545
C         (098) 545-4354
Cl               (888) 888-3545
Da              (888) 888-3545
H               (888) 888-3545
H               (888) 888-3545
Khzdf              (888) 888-3545 
```

但我希望它们像这样对齐（它应该覆盖每个名称有多少个字母并具有相同的空格：

```
Name              Number

B              (888) 888-3545
C              (098) 545-4354
Cl             (888) 888-3545
Da             (888) 888-3545
H              (888) 888-3545
H              (888) 888-3545
Khzdf          (888) 888-3545 
```

-- 这会在 CSS 或 PHP 中完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:09:32.730

你考虑过用桌子吗？表格很棒....用于显示结构化数据

```
<table>
    <thead>
        <tr>
            <th>Column1</th>
            <th>column</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Column1 data</td><td>column 2 data</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:11:41.820

> 这会在 CSS 或 PHP 中完成吗？

两者都不！HTML`<table>`是您正在寻找的内容。它们也具有足够的语义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:25:32.560

解决问题的最快方法是这样。

在您的代码中，您可以更改：

```
echo  ucwords($row['name']) . "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" . ucwords($row['number']) . "<br>"; 
```

对此：

```
echo  "<span style='display:inline-block; width:200px; text-align:left;'>" . ucwords($row['name']) . "</span><span style='display:inline-block; text-align:left;'>" . ucwords($row['number']) . "</span><br>"; 
```

注意：`200px`根据需要更改。

# java - 必须输入两次才能让扫描仪读取

> ID：15724930
> 
> 赞同：0
> 
> 时间：2013-03-31T00:09:32.250
> 
> 标签：java, string, methods, input

所以在这段代码中，在“run”方法的“Run”类下，扫描器似乎不想从第一次尝试中接收输入，只有在第二行才接收输入。我说第二行是因为我输入输入然后按两次回车，然后在第三行输入输入，它读取第二行，在这种情况下什么都没有。

我尝试过 BufferedReader 的结果相同，所以我相信我在做一些愚蠢的事情并忽略了一些事情。

```
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;

import java.io.*;

class Global {
    public static int stop = -1;
}

public class DataSort {

    public static void main(String[] args){

        Timer timer = new Timer();
        Direct swit = new Direct();
        Run mprog = new Run();
        Help hlp = new Help();

        String newline = System.getProperty("line.separator");

        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        Scanner console = new Scanner(System.in);

        System.out.println(newline);
        System.out.println("Welcome to Data Sort! This Program is designed to sort information about targets discoverd by UAV and place the data in a table." + newline);
        System.out.print("For help, press any key. To continue, please wait. ");
        timer.schedule(swit, 3000);

        try {
            Global.stop = in.read();
        } 

        catch(IOException e) {
            e.printStackTrace();
        }

        try {
            in.close();
        }

        catch(IOException e) {
            e.printStackTrace();
        }
    }
}

class Direct extends TimerTask {

    public void run() {

        Run mprog = new Run();
        Help hlp = new Help();

        if(Global.stop != -1){
            System.out.println("Help");
            hlp.run();
        }

        if(Global.stop == -1) {
            System.out.println("Main");
            mprog.run();
        }
    }
}

class Help {

    public static void run() {
        String newline = System.getProperty("line.separator");

        System.out.print(newline);
        System.out.println("Entering Help Mode!" + newline);

        System.out.println("Entered Help Class");
        //String help = console.nextLine();
    }
}

class Run {

    public static void run() {

        /*EnterAll eall = new EnterAll();
        EnterCoords ecoords = new EnterCoords();
        EnterRelation erelat = new EnterRelation();
        EnterColor ecolor = new EnterColor();
        EnterShape eshape = new EnterShape();
        Coordinates coords = new Coordinates();
        Relation relat = new Relation();
        Color color = new Color();
        Shape shape = new Shape();
        List list = new List();
        Save save = new Save();
        SaveAs saveas = new SaveAs();*/

        String newline = System.getProperty("line.separator");
        Scanner console = new Scanner(System.in);

        System.out.print(newline);
        System.out.println("Initializing Main Program." + newline);
        System.out.println("************************** MAIN MENU *************************" + newline);
        System.out.println("Enter Coords \t Enter Relat \t Enter Color \t Enter Shape"+newline);
        System.out.println("Coordinates \t Relation \t Color \t \t Shape" + newline);
        System.out.println("Help \t \t List \t \t Save \t \t Save As" + newline);
        System.out.println("**************************************************************" + newline);

        System.out.print("Enter your selection or type All to enter lines consecutively: ");
        String raw = console.nextLine();

        System.out.println(raw);

        String select = errorCheck(raw);

        if (select.equals("All")){
        }

        if (select.equals("Enter Coords")){
        }

        if (select.equals("Enter Relat")){
        }

        if (select.equals("Enter Color")){
        }

        if (select.equals("Enter Shape")){
        }

        if (select.equals("Coordinates")){
        }

        if (select.equals("Relation")){
        }

        if (select.equals("Color")){
        }

        if (select.equals("Shape")){
        }

        if (select.equals("Help")){
        }

        if (select.equals("List")){
        }

        if (select.equals("Save")){
        }

        if (select.equals("Save As")){
        }
    }

    private static String errorCheck(String raw) {

        String select = raw;
        return select;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:12:10.073

你的问题在于

```
public class DataSort {...... Global.stop = in.read(); ......} 
```

因为 in.read 用于读取整数输入。它不读取行尾字符。这就是为什么在您输入选择字符串并按回车后它变得毫无头绪的原因。

问候，拉维

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:50:54.147

@Sean，这是您的解决方案

注释掉下面的行

```
public class DataSort
{
.
.
.
//BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
//Scanner console = new Scanner(System.in);
.
.
.
//Global.stop = in.read();
.
.
} 
```

For Global.stop = in.read(), read from the same input read buffer(may be in the same class or somewhere else) and parse the string as you want. Don't create another input read buffer.

Regards, Ravi

# wcf - XNA UI hangs while using WCF remotely

> ID：15724932
> 
> 赞同：1
> 
> 时间：2013-03-31T00:09:43.697
> 
> 标签：wcf, azure, xna

I have an XNA client which communicates with a WCF service to operate. The XNA application is actually a multiplayer pokergame. When I run the WCF service locally, everything works well.

However, I lately deployed my WCF service into Azure. Now when I launch the client, it starts OK, buttons are responsive and clickable. The same is when I launch another client, and there is now an option to start a game (as there are 2 players).

Again, the StartGame button is clickable for both clients. However, once the game commences, the UI hangs and becomes unresponsive.

I can't reproduce this locally. This only happens while using the Azure service. Note I'm not using any callbacks from the server back to the client, my client continuously polls the server and operates according that information.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:21:06.490

Solved. Problem was I had another service function being called continuously, not on a new thread. While executing locally, traffic was fast enough to overcome this. However, running remotely caused application to hang due to the synchronous calls.

# diff - BASH：比较多个文件时的通讯（或类似）

> ID：15724933
> 
> 赞同：3
> 
> 时间：2013-03-31T00:09:55.623
> 
> 标签：diff, comm

我有以下问题：我想比较包含这样一个列表的 8 个文件的内容

```
Sample1.txt    Sample2.txt     Sample3.txt
apple          pineapple       apple
pineapple      apple           pineapple
bananas        bananas         bananas
orange         orange          mango
grape          nuts            nuts 
```

使用`comm Sample1.txt Sample 2.txt`我可以有这样的东西

```
grape    nuts    apple
                 pineapple
                 bananas
                 orange 
```

意思是在第一列中我有一些只与第一个样本有关的东西，第二列是只与第二个样本相关的东西，第三列是共同点。

我想做同样的事情，但有 8 个文件（示例）。使用 diff 是不可能的，但最后我想拥有

```
Sample1  Sample2   Sample3    ...Sample8     Things in common
grape    nuts      mango                     apple
                                             pineapple
                                             bananas 
```

有没有机会用 bash 做到这一点？是否有像 diff 这样的命令允许搜索两个以上文件的差异？

谢谢大家...我知道这是一个具有挑战性的问题

法比奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T03:29:43.280

这是我天真的解决方案：

```
first=sample1.txt; for a in *.txt; do comm -12 $first $a >temp_$a; echo "comparing" $first " " $a "and writing to temp_$a"; first=temp_$a; cat temp_$a; done; 
```

# python - 从 tkinter 中的 Text 小部件复制格式化文本

> ID：15724936
> 
> 赞同：4
> 
> 时间：2013-03-31T00:10:59.197
> 
> 标签：python, text, widget, format, tkinter

我正在使用 tkinter 在 Python 中开发 APA 引用生成器。我使用 Text 小部件在生成引文后显示引文，但是每当我复制文本（目前使用 ctrl+c 快捷方式）时，它都会丢失其格式。有没有办法从 Text 小部件复制格式化文本（例如斜体）而不是无格式文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-16T15:49:22.437

要将格式化的文本复制到剪贴板，您需要 python 和支持文本格式的系统剪贴板之间的接口。我发现[klembord](https://pypi.org/project/klembord/)应该可以在 Linux 和 Windows 中运行（Mac 用户可能可以将以下解决方案改编为[richxerox](https://pypi.org/project/richxerox/)）。

这个想法是 (1) 将格式化文本从文本小部件转换为 html，然后 (2) 将其添加到剪贴板：

1.  `text.dump(index1, index2, tag=True, text=True)`可以从小部件中检索文本和标签。它返回一个类似的列表（这是下面示例中小部件的内容）：

    ```
     [('text', 'Author et al. (2012). The title of the article. ', '1.0'),
      ('tagon', 'italic', '1.48'),
      ('text', 'Journal Name', '1.48'),
      ('tagoff', 'italic', '1.60'),
      ('text', ', ', '1.60'),
      ('tagon', 'bold', '1.62'),
      ('text', '2', '1.62'),
      ('tagoff', 'bold', '1.63'),
      ('text', '(599), 1–5.', '1.63'),
      ('text', '\n', '1.74')] 
    ```

    因此很容易`('tagon/off', tagname)`使用字典将每一对与相应的 html 标签相关联，并将小部件内容转换为 html。

2.  `klembord.set_with_rich_text(txt, rich_txt)`将字符串`txt`及其 html 格式的等效项放入剪贴板。

这是一个完整的示例（在 Linux 中测试，我能够从文本小部件中复制文本并将其粘贴到具有格式的文字处理器中）：

```
import tkinter as tk
import klembord

root = tk.Tk()
text = tk.Text(root)
text.pack(fill='both', expand=True)

text.tag_configure('italic', font='TkDefaultFont 9 italic')
text.tag_configure('bold', font='TkDefaultFont 9 bold')

TAG_TO_HTML = {
    ('tagon', 'italic'): '<i>',
    ('tagon', 'bold'): '<b>',
    ('tagoff', 'italic'): '</i>',
    ('tagoff', 'bold'): '</b>',
}

def copy_rich_text(event):
    try:
        txt = text.get('sel.first', 'sel.last')
    except tk.TclError:
        # no selection
        return "break"
    content = text.dump('sel.first', 'sel.last', tag=True, text=True)
    html_text = []
    for key, value, index in content:
        if key == "text":
            html_text.append(value)
        else:
            html_text.append(TAG_TO_HTML.get((key, value), ''))
    klembord.set_with_rich_text(txt, ''.join(html_text))
    return "break"  # prevent class binding to be triggered

text.bind('<Control-c>', copy_rich_text)

text.insert("1.0", "Author et al. (2012). The title of the article. ")
text.insert("end", "Journal Name", "italic")
text.insert("end", ", ")
text.insert("end", "2", "bold")
text.insert("end", "(599), 1–5.")

root.mainloop() 
```

# delphi - 代码ole自动化excel错误

> ID：15724942
> 
> 赞同：-1
> 
> 时间：2013-03-31T00:12:01.173
> 
> 标签：delphi, delphi-xe3

这段代码给了我错误

```
ex.Cells [3, 2]. HorizontalAlignment: = xlright;

ex.Cells [row, 1]. NumberFormat: = 'dd / mm / yy, @'; 
```

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:17:35.470

根据您的其他问题，您正在使用后期绑定（使用 a `Variant`）而不是早期绑定（使用 VCL`TExcelApplication`和其他组件）。这意味着`xlRight`未定义特定类型，因为您没有使用提供它们的类型库导入。您必须自己定义它们：

```
var
  ...
  NewAlign: OleVariant;
const
  xlBottom = $FFFFEFF5;
  xlLeft = $FFFFEFDD;
  xlRight = $FFFFEFC8;
  xlTop = $FFFFEFC0;
  xlHAlignCenter = $FFFFEFF4;
  xlHAlignCenterAcrossSelection = $00000007;
  xlHAlignDistributed = $FFFFEFEB;
  xlHAlignFill = $00000005;
  xlHAlignGeneral = $00000001;
  xlHAlignJustify = $FFFFEFDE;
  xlHAlignLeft = $FFFFEFDD;
  xlHAlignRight = $FFFFEFC8;
begin
  // XLApp is the instance of Excel you set up from your previous
  // questions
  XLApp.Workbooks[1].Worksheets[1].Range['C1:C5'].NumberFormat := 'dd/mm/yy';
  NewAlign := xlHAlignRight;
  XLApp.Workbooks[1].Worksheets[1].Range['C1:C5'].HorizontalAlignment := NewAlign;
end; 
```

分配`dd/mm/yy @`没有意义，因为它要么是 date format 要么是`dd/mm/yy`text `@`，但不是两者兼而有之。

# java - Spring MVC Retrieving Database Autogenerated PrimaryKey For Record After INSERT Record

> ID：15724944
> 
> 赞同：0
> 
> 时间：2013-03-31T00:12:04.757
> 
> 标签：java, mysql, spring-mvc, jdbctemplate

I am using the JdbcTemplate. What i want to do is insert a record into the database however the primary key for the table is set to auto increment so i wont have to insert a value, how can i retrieve the id once i complete the insert?. Is there a simple way to do this or do i need to do another query to select it?

**Example Of Jdbc Insert**

Here the citizenId is autogenerated

```
 public void saveCitizen(Citizens citizen) {
 logger.debug("In saveCitizens");       

int count = getJdbcTemplate().update("INSERT INTO crimetrack.tblcitizens (citizenId,fName,lName,oName,photo,countryId,addLn1, addLn2, addLn3,"
                                                +"genderId,ethnicityId, skinColorId, eyeColorId,hairColorId,occupationId,"
                                                +"phoneNo, maritalStatusId, noticableFeatures,weight,height,citizenTypeId,dob)"
                                                + "VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)"
, new Object[]{citizen.getfName(),citizen.getlName(),citizen.getoName(),
                                                citizen.getPhoto(),citizen.getCountryId(),citizen.getAddLn1(),
                                                citizen.getAddLn2(),citizen.getAddLn3(),citizen.getGenderId(),
                                                citizen.getEthnicityId(),citizen.getSkinColorId(),citizen.getEyeColorId(),
                                                citizen.getHairColorId(),citizen.getOccupationId(),citizen.getPhoneNo(),
                                                citizen.getMaritalStatusId(),citizen.getNoticeableFeatures(),
                                                citizen.getWeight(),citizen.getHeight(),citizen.getCitizenTypeId(),
                                                citizen.getDob()});

 logger.info(count +" Rows affected in tblCitizens"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:14:40.290

See 12.2.8: Retrieving auto generated keys:

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:29:28.950

just give you the example code, in case that link is broken. See it:

```
final String INSERT_SQL = "insert into my_test (name) values(?)";
final String name = "Rob";

KeyHolder keyHolder = new GeneratedKeyHolder();
jdbcTemplate.update(
    new PreparedStatementCreator() {
        public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
            PreparedStatement ps =
                connection.prepareStatement(INSERT_SQL, new String[] {"id"});
            ps.setString(1, name);
            return ps;
        }
    },
    keyHolder);

// keyHolder.getKey() now contains the generated key 
```

# linux - Increase %e precision with /usr/bin/time shell command (Linux)

> ID：15724950
> 
> 赞同：1
> 
> 时间：2013-03-31T00:12:38.537
> 
> 标签：linux, shell, time, precision

When I run the time command in shell `time ./myapp` I get an output like the following:

real 0m0.668s

user 0m0.112s

sys 0m0.028s

However,when I run the command `\time -f %e ./myapp` I lose precision and I get:

2.01s

Why is the output not with 3 digits of precision as well? If I use the %E command I also lose precision in the same way. How do i change it to have more precision again, but still only have the seconds being outputted?

I based my research in this [Linux / Unix Command: time](http://linux.about.com/library/cmd/blcmdl1_time.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:37:46.470

You can try `/usr/bin/time -p` instead. The `-p` option should display the output in the *standard* format. Here's an example from my MacBook:

```
gondolin% /usr/bin/time find . -name '*.pyc' > /dev/null
        0.10 real         0.04 user         0.05 sys
gondolin% /usr/bin/time -p find . -name '*.pyc' > /dev/null
real         0.10
user         0.04
sys          0.05 
```

According to [die.net](http://linux.die.net/man/1/time), then `time` utility should allow you to specify the format in the `TIME` environment variable. The bash builtin does something similar but uses the `TIMEFORMAT` environment variable instead:

```
bash-3.2$ time find . -name '*.pyc' > /dev/null

real        0m0.155s
user        0m0.051s
sys         0m0.068s
bash-3.2$ export TIMEFORMAT='real    %R
user    %U
sys     %S'
bash-3.2$ time find . -name '*.pyc' > /dev/null
real    0.107
user    0.049
sys     0.058
bash-3.2$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:51:23.233

After asking in other forums, one of them gave me the answer I was looking for. It can be found in [here](https://unix.stackexchange.com/questions/70653/increase-e-precision-with-usr-bin-time-shell-command).

# jquery - Strange jquery ui datepicker behavior

> ID：15724951
> 
> 赞同：0
> 
> 时间：2013-03-31T00:12:42.150
> 
> 标签：jquery, html, jquery-ui, datepicker

JQuery UI datepicker widget is not displaying the date correctly it looks like this: ![](../Images/b87fd986cd6ebdd8b267909e85389634.png)

the input code looks like this:

```
<input type="text" value="" name="DateTo" id="DateTo" class="hasDatepicker"> 
```

I add datepicker simply by calling `$('#DateTo').datepicker();`

Anyone have an idea why it does not display the dates correctly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:16:38.627

set the dates:

```
var qDates = '2009-11-01',
dateParts = qDates.match(/(\d+)/g)
realDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);  

$('#datePicker').datepicker({ dateFormat: 'yy-mm-dd' }); 
$('#datePicker').datepicker('setDate', realDate); 
```

# python - python advanced search library

> ID：15724954
> 
> 赞同：5
> 
> 时间：2013-03-31T00:13:37.733
> 
> 标签：python, full-text-search

I have around 80,000 text files and I want to be able to do an advanced search on them. Let's say I have two lists of keywords and I want to return all the files that include at least one of the keywords in the first list and at least one in the second list. Is there already a library that would do that, I don't want to rewrite it if it exists.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:30:16.157

As you need to search the documents multiple times, you most likely want to index the text files to makes such searches as fast as possible.

Implementing a reasonable index yourself is certainly possible, but a quick search lead me to:

*   [https://pypi.python.org/pypi/Whoosh/](https://pypi.python.org/pypi/Whoosh/)
*   [http://pythonhosted.org/Whoosh/](http://pythonhosted.org/Whoosh/)

Take a look at the documentation. It should hopefully be rather trivial to achieve the desired behaviour.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:22:11.913

I just get a feeling you want to use MapReduce type of processing for the search. It should be very scalable, Python should have MapReduce packages.

# c++ - How to check if user input enough items?

> ID：15724955
> 
> 赞同：0
> 
> 时间：2013-03-31T00:14:00.753
> 
> 标签：c++, input, cin

Say I have user input these variables: ID name age

And I'm using a while loop to get user input like below

```
while(cin){

cin >> ID >> name >> age;

do_stuff(ID, name, age);

} 
```

but if at some moment the user only input some of those variables, say only ID and name, the while loop should end immediately without running do_stuff(). How should I do this, the method needs to be fast. Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:32:36.613

```
#include <iostream>
#include <string>
int main() {
        int ID, age;
        std::string name;
        while(std::cin.good()){
                if (std::cin >> ID && std::cin >> name && std::cin >> age) {
                        std::cout << ID << name << age << std::endl;
                }

        }
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:27:17.177

You can achieve this by using stringstream and getline, something like the following:

```
 #include <sstream>
  #include <string>

  int age = -1; //assume you init age  as -1 and age is integer type
  stringstream ss;
  while (getline(cin,line))
  {
     age = -1;
     ss.clear();
     ss << line;
     ss >> ID >> name >>age;

    if (age ==-1)  //if no age is parsed from input line, break the while loop
    {
       cout << "no age is contained in input line" <<endl;
       break;
    }
    do_stuff(ID,name, age)
  } 
```

This should work, but there may exist better solution.

# python - How to correctly import + loop through imported vars

> ID：15724958
> 
> 赞同：0
> 
> 时间：2013-03-31T00:14:29.543
> 
> 标签：python, python-2.7

I'm trying to replace this ugly block:

```
import signal
signal.signal(signal.SIGINT, signal_handler)
signal.signal(signal.SIGTERM, signal_handler)
signal.signal(signal.SIGQUIT, signal_handler)
signal.signal(signal.SIGILL, signal_handler)
signal.signal(signal.SIGPIPE, signal_handler) 
```

with this:

```
import signal
for sig in (SIGINT, SIGTERM, SIGQUIT, SIGILL, SIGPIPE):
    signal.signal(sig, signal_handler) 
```

Unfortunately python throws:

```
File "./mysuperfile.py", line 107, in <module>
   for sig in (SIGINT, SIGTERM, SIGQUIT, SIGILL, SIGPIPE):
       NameError: name 'SIGINT' is not defined 
```

I also tried to do

```
from signal import signal, SIGINT, SIGTERM, SIGQUIT, SIGILL, SIGPIPE 
```

.. but this throws:

```
 File "./mysuperfile.py", line 108, in <module>
    signal.signal(sig, signal_handler)
AttributeError: 'builtin_function_or_method' object has no attribute 'signal' 
```

Question: what is the correct syntax?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:26:08.037

I would probably do:

```
import signal
for sig in ("SIGINT", "SIGTERM", "SIGQUIT", "SIGILL", "SIGPIPE"):
    sig = getattr(signal,sig)
    signal.signal(sig, signal_handler) 
```

When you do a simple `import signal`, all of your signal handles can be found in the current namespace as `signal.SIGNALNAME` (e.g. `signal.SIGQUIT`). This is the same thing as:

```
for sig in (signal.SIGINT, signal.SIGTERM, signal.SIGQUIT, ...):
    signal.signal(sig,signal_handler) 
```

* * *

Of course, you can import them directly into your current namespace as you were trying:

```
from signal import signal, SIGINT, SIGTERM, SIGQUIT, SIGILL, SIGPIPE 
```

But then the `signal` function is known as simply `signal` (not `signal.signal`) in the current namespace. So, using that import, you could do:

```
for sig in (SIGINT, SIGTERM, SIGQUIT, SIGILL, SIGPIPE):
    signal(sig, signal_handler) 
```

However, I find that to be less clear. Is `signal` the module or the function? Maybe it isn't too hard to figure out (after all, you can't *call* a module), but the other way it's obvious immediately.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T00:23:52.417

You can't import signal from itself, but you can import both separately.

```
import signal
from signal import SIGINT, SIGTERM, SIGQUIT, SIGILL, SIGPIPE 
```

# c++ - c++中类之间的相互引用

> ID：15724961
> 
> 赞同：0
> 
> 时间：2013-03-31T00:14:55.663
> 
> 标签：c++, circular-reference

很多时候，两个或多个类的实例（最有可能共享一个头文件的类）通过指针相互引用是很自然的。例如，在一个图中，一条边需要引用它的顶点，反之亦然。单独的相互引用可以通过前向声明来完成，但我希望两个类可以相互操作，即使用彼此的方法或字段。例如，我希望在将边连接到顶点时，两个指针（edge->myVertex，vertex->myEdge）可以在一个方法中分配，该方法可以是任一类。有办法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:21:37.747

做到这一点的方法是使用自由函数，即算法来做这些事情。否则，您的类将失去其语义。例如，您可以拥有：

```
void connect_vertices(Vertex<T> v1, Vertex<T> v2, Edge<T> e) {
} 
```

处理该逻辑的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:40:57.870

这是你在想的吗？

```
void Edge::setVertex(Vertex &v)
{
  myVertex = &v;
  v.myEdge = this;
} 
```

# ruby - 什么是 ||= 在 Rails 中？

> ID：15724962
> 
> 赞同：-1
> 
> 时间：2013-03-31T00:15:18.063
> 
> 标签：ruby

```
class ApplicationController < ActionController::Base

  private

  # Finds the User with the ID stored in the session with the key
  # :current_user_id This is a common way to handle user login in
  # a Rails application; logging in sets the session value and
  # logging out removes it.
  def current_user
    @_current_user ||= session[:current_user_id] &&
      User.find_by_id(session[:current_user_id])
  end
end 
```

如何理解上面的代码？是什么`||=`意思？是`@_current_user`id 还是 user 对象？另外，为什么它以 开头`_`？

谁能回答我`@_current_user`是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:24:19.837

根据[这个问题](https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby)，`a ||= b`是 的简写`a || a = b`。

而关于 的值`@_current_user`，如果我们假设`session[:current_user_id]`是`5`，那么`&&`具有 User 模型的运算符将返回 User 实例：

```
> 5 && User.new(:name => 'Foo')
=> #<User name="Foo"> 
```

`@_current_user`User 实例也是如此。

# c# - C# file - output type: console

> ID：15724963
> 
> 赞同：5
> 
> 时间：2013-03-31T00:15:21.103
> 
> 标签：c#, monodevelop, console-application, xamarin

I wrote a code, and the line

```
string thing = Console.ReadLine(); 
```

causes a problem. Xamarin shows me that it did not read in the input this command, so the variable thing becomes null.

I found from other questions and answers here that there are two output types of an application, Window and Console. So, mine probably is not the second one.

But I can't find how to switch to console. I have the latest MonoDevelop and Xamarin, and yet this problem remains. Does anyone know what could help?

Any advice will be highly appreciated!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:23:08.777

Rob G Pretty much has it so I'm not sure why you can't see it. Here's the click-by-click for completeness.

For console output from Xamarin:

Right click the project you have set as startup project, then do:

> Options >> Expand 'Run' >> General >> Check 'Run on external console'

Once this is set, execution will halt on Console.ReadLine();

There is no need to check the 'Pause console output' checkbox. This simply holds the console open at the end of execution with a 'Press any key to continue...'.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:26:41.393

Try right clicking on the "options" list item on the menu for your project and making sure Run on external console is marked. It's in the Run -> General tab, I think.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:40:07.537

Close the project and edit it as text. Change:

```
<OutputType>WinExe</OutputType> 
```

To:

```
<OutputType>Exe</OutputType> 
```

Then reload the project.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T02:26:47.487

What turned out to help was to start a new project, and when Xamarin asks what type, choose C# Console Project. Which seems pretty reasonable.

# php - 通过 URL 查找链接元素并使用 PHP 添加一个类

> ID：15724966
> 
> 赞同：0
> 
> 时间：2013-03-31T00:15:40.833
> 
> 标签：php

我正在尝试使用 PHP 向当前项目添加一个类。我有一个看起来像这样的静态导航：

```
<ul id="myList">
  <li><a href="page1.php">Page One</a></li>
  <li><a href="page2.php">Page Two</a></li>
  <li><a href="page3.php">Page Three</a></li>
</ul> 
```

我要遵循的逻辑是：

1.  获取 URL 并获取最后一部分，将其存储在`$path`变量中。
2.  从内部查找`myList`具有匹配的 SRC 属性的链接`$path`
3.  `.current`为属性添加一个类。

我已经用这个对第一点进行了排序：

```
$path = basename( parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH) ); 
```

但我是 PHP 新手，所以我不确定如何处理第 2 点和第 3 点。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:17:34.610

“便宜”的方法如下：

```
// assuming $html is your code
$html = str_replace($path,$path.'" class="current',$html); 
```

正确的方法是使用 HTML 解析器。

正确的方法是在生成源代码时将其放在首位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:21:46.013

只需将您的“静态”导航更新为动态导航。

```
$links = array(
    array('link' => 'page1.php', 'text' => 'Page One'),
    array('link' => 'page2.php', 'text' => 'Page Two'),
    array('link' => 'page3.php', 'text' => 'Page Three')
);
$path = basename( parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH) );
echo '<ul id="myList">'
foreach ($links as $link) {
    $class = '';
    if ($link['link'] == $path) {
        $class = 'current';
    }
    echo "<li><a href=\"$link[link]\" class=\"$class\">$link[text]</a></li>";
}
echo "</ul>"; 
```

这种情况实际上是 PHP 最初设计的目的。如果上面的内容对您来说有点难看，您可能需要考虑使用模板系统。有很多流行和成熟的。

# css - Adding custom styles to bootstrap navbar

> ID：15724971
> 
> 赞同：0
> 
> 时间：2013-03-31T00:16:18.907
> 
> 标签：css, twitter-bootstrap, styling, navbar

I'm wondering how I can style Bootstraps nav bar to look something like this:

![enter image description here](../Images/7e0de9a592fc4862ab0fc96afd6acd89.png)

I'm using the standard Bootstrap navbar-inner class with little CSS styling. I want the colored rectangles inside the navbar without affecting navigation.

Would it be best to use CSS or images to accomplish the effect?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:24:11.337

I would use a `repeat-x` background-image for the whole box which contains the pattern you've mentioned.

Something like this:

```
.navbar-inner {
    background-image: url(image.png);
    background-repeat: repeat-x;
    background-position: top left;
    padding-top: 10px; /*Height of the image*/
} 
```

You can use an image like this:

![Background image](../Images/30a838cd05fc695a7403c7fffd87b6ee.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T13:03:54.557

I did it with css on this site - [http://heritage.warwickshire.gov.uk/](http://heritage.warwickshire.gov.uk/)

```
 #colophon {
            background: rgb(0,106,85);
            background: -moz-linear-gradient(left, rgba(248,153,0,1) 14%, rgba(181,0,0,1) 14%, rgba(181,0,0,1) 28%, rgba(10,9,24,1) 28%, rgba(10,9,24,1) 42%, rgba(0,179,0,1) 42%, rgba(0,179,0,1) 56%, rgba(210,0,144,1) 56%, rgba(210,0,144,1) 70%, rgba(229,86,0,1) 70%, rgba(229,86,0,1) 84%, rgba(0,128,238,1) 84%, rgba(0,128,238,1) 98%);
            background: -webkit-gradient(linear, left top, right top, color-stop(14%,rgba(248,153,0,1)), color-stop(14%,rgba(181,0,0,1)), color-stop(28%,rgba(181,0,0,1)), color-stop(28%,rgba(10,9,24,1)), color-stop(42%,rgba(10,9,24,1)), color-stop(42%,rgba(0,179,0,1)), color-stop(56%,rgba(0,179,0,1)), color-stop(56%,rgba(210,0,144,1)), color-stop(70%,rgba(210,0,144,1)), color-stop(70%,rgba(229,86,0,1)), color-stop(84%,rgba(229,86,0,1)), color-stop(84%,rgba(0,128,238,1)), color-stop(98%,rgba(0,128,238,1)));
            background: -webkit-linear-gradient(left, rgba(248,153,0,1) 14%,rgba(181,0,0,1) 14%,rgba(181,0,0,1) 28%,rgba(10,9,24,1) 28%,rgba(10,9,24,1) 42%,rgba(0,179,0,1) 42%,rgba(0,179,0,1) 56%,rgba(210,0,144,1) 56%,rgba(210,0,144,1) 70%,rgba(229,86,0,1) 70%,rgba(229,86,0,1) 84%,rgba(0,128,238,1) 84%,rgba(0,128,238,1) 98%);
            background: -o-linear-gradient(left, rgba(248,153,0,1) 14%,rgba(181,0,0,1) 14%,rgba(181,0,0,1) 28%,rgba(10,9,24,1) 28%,rgba(10,9,24,1) 42%,rgba(0,179,0,1) 42%,rgba(0,179,0,1) 56%,rgba(210,0,144,1) 56%,rgba(210,0,144,1) 70%,rgba(229,86,0,1) 70%,rgba(229,86,0,1) 84%,rgba(0,128,238,1) 84%,rgba(0,128,238,1) 98%);
            background: -ms-linear-gradient(left, rgba(248,153,0,1) 14%,rgba(181,0,0,1) 14%,rgba(181,0,0,1) 28%,rgba(10,9,24,1) 28%,rgba(10,9,24,1) 42%,rgba(0,179,0,1) 42%,rgba(0,179,0,1) 56%,rgba(210,0,144,1) 56%,rgba(210,0,144,1) 70%,rgba(229,86,0,1) 70%,rgba(229,86,0,1) 84%,rgba(0,128,238,1) 84%,rgba(0,128,238,1) 98%);
            background: linear-gradient(to right, rgba(248,153,0,1) 14%,rgba(181,0,0,1) 14%,rgba(181,0,0,1) 28%,rgba(10,9,24,1) 28%,rgba(10,9,24,1) 42%,rgba(0,179,0,1) 42%,rgba(0,179,0,1) 56%,rgba(210,0,144,1) 56%,rgba(210,0,144,1) 70%,rgba(229,86,0,1) 70%,rgba(229,86,0,1) 84%,rgba(0,128,238,1) 84%,rgba(0,128,238,1) 98%);
            height: 0px;
            padding-top: 0.5em;
            } 
```

# css - How do I make a div fixed to the page?

> ID：15724974
> 
> 赞同：1
> 
> 时间：2013-03-31T00:16:54.863
> 
> 标签：css

How can I change the menu [here](http://marketbot.net) so that it's always there when the user scrolls down the page?

What code do I need to add/ remove/ replace and where?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:54:47.750

Your **HTML** isn't good. You didn't close your `<section id="header" class="clearfix">` and many more. Run your page throught [HTML validator](http://validator.w3.org/), it will tell you your errors.

As for your question, just add:

```
#header{
    position:fixed;
} 
```

In your **CSS** file (*style.css*).

More about positions : [MDN positions](https://developer.mozilla.org/en-US/docs/CSS/position).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:52:33.860

here is an example of a div which stays in the same position at all times on the screen.

To fix an element you can use the position fixed, and then position the element on the visible browser window by using the css top, bottom, right and left.

in this example it is fixed to top left, and has a height of 25px

```
<body>
    <div style="position:fixed; top:0; left:0; height:25px; width:100%;">
        Here you will get a bar which is fixed to the top left experiment to get your desired effect
    </div>
</body> 
```

Simple solution for your case is to use

```
<section id="header" style="position:fixed;" class="clearfix"> 
```

and add a

```
</section> 
```

before the

```
<!-- header ends --!> 
```

# php - Select last timestamp from database with JOIN query

> ID：15724976
> 
> 赞同：0
> 
> 时间：2013-03-31T00:17:12.817
> 
> 标签：php, mysql

I have a query that selects groups and group postings. In the postings table there is a timestamp collumn, and a group_id. I need to select the greatest timestamp in the postings table, associated with the group id.

**Here's my query**

```
$query = "
    SELECT groups.group_name, groups.group_info, groups.group_tags, postings.timestamp 
    FROM groups 
    LEFT JOIN postings ON groups.group_id = postings.group_id 
    GROUP BY groups.group_id 
    ORDER BY `postings`.`timestamp` DESC
"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:23:40.083

```
$query = "
    SELECT groups.group_name, groups.group_info, groups.group_tags, max(postings.timestamp) 
    FROM groups 
    LEFT JOIN postings ON groups.group_id = postings.group_id 
    GROUP BY groups.group_id 
    ORDER BY `postings`.`timestamp` DESC
"; 
```

# asp.net - Connection String for Microsoft SQL Server 2008 R2 in ASP.NET

> ID：15724985
> 
> 赞同：0
> 
> 时间：2013-03-31T00:18:04.197
> 
> 标签：asp.net, vb.net, authentication, iis-7.5, sql-server-2012

I'm going through a book to teach myself ASP.NET. So far so good on it and even on SQL in SQL Developer but I can't connect from external apps.

I'm using Visual Studio 2010 Pro SP1, SQL Server 2008 R2 Standard and Windows 7 Professional SP1 using IIS 7.5\. The language I'm using in ASP.NET is **VB.NET** but happy for **C#** answers.

I can never get the connection string working

```
connectionString="Server=ASUS-P5Q\MSSQLSERVER;Database=Dorknozzle; User Id=xxxxxxxxx; Password=xxxxxxxxx;" 
```

I always get the following Error

> Server Error in '/' Application.
> Login failed for user 'ASUS-P5Q\xxxxxx'.
> 
> Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: System.Data.SqlClient.SqlException: Login failed for user 'ASUS-P5Q\xxxxxxx'.
> 
> Source Error:
> 
> Line 17: conn.Open()**

I've switched off user account control, the anti-virus and the firewall but nothing works :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:34:54.503

The error message appears to indicate that you are using Integrated Authentication (the Windows username and password). There are a number of reasons this could be failing.

For simplicity's sake, you may also try using Sql authentication: create a user in Sql and specify that username and password in your connection string. I usually start out with a Sql username and password and then decide on my final authentication method before deployment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:35:05.347

To connect to a local database engine, you can use the .\ syntax as in: .\sql2008:

```
connectionString="Server=.\MSSQLSERVER;Database=Dorknozzle; User Id=xxxxxxxxx; Password=xxxxxxxxx;Integrated Security=false;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:03:49.390

As @MTAdmin noted, you seem to use integrated authentication..

You can only use your login as the credentials when using this method, so make sure your app pool is running as that user ('ASUS-P5Q\xxxxxx' in this case) and use the following connection string.

`Server=ASUS-P5Q\MSSQLSERVER;Database=Dorknozzle;`**`Integrated Security=SSPI;`**

For future reference, I recommend using [ConnectionStrings.com](http://connectionstrings.com/) when you forget that sneaky connections string as I always do.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T01:03:10.327

How I fixed my issue was that I created a user under SQL Management Studio and used SQL Server user authentication. This is the string that worked for me in the end...

connectionString="Data Source=ASUS-P5Q\MSSQLSERVER,1433;Initial Catalog=Dorknozzle;Integrated Security=False;User ID=SQLDT;Password=####" providerName="System.Data.SqlClient" />

**Thanks guys for your help :)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-10T01:16:30.973

```
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Text;

namespace User_Management
{
    class DatabaseConnection
    {
        public string GetConnectionString()
        {
            return @"server=AFORE\MSSQLSERVER; Integrated Security=SSPI; Database = prictice;";
        }

        public SqlConnection GetConnectionObj()
        {
            SqlConnection connectionObj=new SqlConnection(GetConnectionString());
            connectionObj.Open();
            return connectionObj;
        }
        public void ExecuteSqlCommandAndCloseConnection(string insertQueryString, SqlConnection connectionObj)
        {
            SqlCommand sqlCommandObj = new SqlCommand(insertQueryString, connectionObj);
            sqlCommandObj.ExecuteNonQuery();
            connectionObj.Close();
        }
        public void ExecuteSqlCommandOnly(string insertQueryString, SqlConnection connectionObj)
        {
            SqlCommand sqlCommandObj = new SqlCommand(insertQueryString, connectionObj);
            sqlCommandObj.ExecuteNonQuery();

        }
    }
} 
```

# javascript - 使用迭代获取长度为 L 的数组的所有排列

> ID：15724986
> 
> 赞同：0
> 
> 时间：2013-03-29T16:44:11.763
> 
> 标签：javascript, algorithm, permutation

如何使用迭代获得长度为 L 的数组的所有可能排列的列表？

输出元素应仅包含与原始数组长度相同的排列。

例如：{1,2,3}

输出：{1,2,3} {1,3,2} {2,1,3} {2,3,1} {3,1,2} {3,2,1}

示例代码（不工作）

```
var swap = function(z, l, j) {
    var e = z.slice(0);
    var k = e[l];
    e[l] = e[j];
    e[j] = k;
    return e;
};
var _permu = function(p, i) {

if(i == p.length)
    console.log("com", p.join(""));
    for (var j = 0; j < i; j++) {
        var t = swap(p, j, i);
        _permu(t, i - 1);
    }
}; 
```

# global-variables - AutoHotkey 检测 PixelColor 的时间超过 x 秒

> ID：15724993
> 
> 赞同：0
> 
> 时间：2013-03-31T00:19:31.177
> 
> 标签：global-variables, global, autohotkey

我在版本 AHL_L 32Bit 1.1.05.06

我正在寻找一种合乎逻辑的方法来检测 AutoHotkey 像素是否上升了 x 时间，15 秒后，我假设它崩溃了，我们要刷新。

我当前的代码是这样的：

```
CrashCheck:
if stuckinbonus = 0x1D001A
{

    if(FoundCrash = 0) {   
     FirstFound := A_Tickcount
     FoundCrash = 1
        } else {
 CrashCheckTime := A_Tickcount - FirstFound
    }

if(CrashCheckTime >= 15000){
SetTimer,CrashCheck,off
 MsgBox,Refreshing page (Pseudo Code)
}
}
return 
```

我已经尝试在脚本开头将变量像这样放在全局变量中，但是我遇到了 CrashCheckTime 只是 0 的问题：/有什么想法吗？

```
Global FoundCrash := ""
Global FirstFound := "0"
Global CrashCheckTime:= "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:17:06.727

这会做这项工作吗？

```
#SingleInstance Force
#installKeybdHook
#Persistent
SetTimer, CrashCheck, 1000 ; run CrashCheck every second
MyAlert := 0
Return

CrashCheck:
PixelGetColor, Color, 100, 100
If (Color = 0x1D001A)
{
    MyAlert++
}
Else
{
    MyAlert := 0
}
If (MyAlert > 15)
{
    MyAlert := 0
    Refresh Page
}
Return 
```

关于您自己的代码。难道是你`FoundCrash := 0`在运行 CrashCheck 之前没有设置？这样一来，您将永远不会真正做到`If (FoundCrash = 0)`，因此总是会跳到选择的`Else`位置。

例子：

```
#SingleInstance Force
#installKeybdHook
#Persistent
;FoundCrash := 0 ; Script fails when this line is commented out!
stuckinbonus = 0x1D001A

!t:: ; [Alt]+t to simulate CrashCheck
If (stuckinbonus = 0x1D001A)
{
    If (FoundCrash = 0)
    {   
        SoundBeep, 500, 500 ;(Low beep)
                FirstFound := A_Tickcount
        FoundCrash := 1
    }
    Else
    {
        SoundBeep, 1500, 500 ;(High beep)
        CrashCheckTime := A_Tickcount - FirstFound
    }
    If (CrashCheckTime >= 15000)
    {
    ;SetTimer,CrashCheck,off
    FoundCrash := 0
    MsgBox,Refreshing page (Pseudo Code)
    }
}
Return 
```

我建议您在 SciTE4AutoHotKey 中以调试模式运行它，以查看在逐步执行过程中采用了哪些分支以及变量值是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T19:08:51.603

我编写了一个小函数，它循环、等待并不断循环，直到在所需坐标处看到所需的像素颜色。也许这有帮助？

```
;This function checks the Pixel at the provided coordinates and waits until the colour matches the provided parameter 
WaitForLoad(PixelColorX,PixelColorY,PixelColorValue)
{
CycleCount = 0
  PixelGetColor SearchPixel, PixelColorX, PixelColorY
  ;msgbox "Found Pixel %SearchPixel% at %PixelColorX%, %PixelColorY%, Looking for %PixelColorValue%" ;DEBUGG ASSISTANT
  While (SearchPixel != PixelColorValue)
          {
    CycleCount = CycleCount + 1
    sleep 100
    ; Tooltip Waiting to detect pixels HERE!, PixelColorX, PixelColorY     ; Doesn't work
    PixelGetColor SearchPixel, PixelColorX, PixelColorY
  }
  sleep 500
;Debug
;msgbox Exiting Function with %PixelColorValue% at %PixelColorX%, %PixelColorY% after %CycleCount% Cycles.
SearchPixel = 0
PixelColorValue = 1 
```

# fortran - 如何编译未知方言和未知库的 Fortran 代码

> ID：15724994
> 
> 赞同：-1
> 
> 时间：2013-03-31T00:19:36.423
> 
> 标签：fortran, intel-fortran

我正在尝试编译一些 Fortran 代码，根据文档，这些代码已知可以使用“Intel Fortran Compiler 11”进行编译。但是，当我尝试使用 Intel® Fortran Composer XE 2013 for OS X 附带的 ifort 版本（此处：http://software.intel.com/en-us/fortran-compilers）编译代码时[，](http://software.intel.com/en-us/fortran-compilers)我得到一些错误。我怀疑我是 1) 使用的编译器与使用的 Fortran 的确切方言不兼容和/或 2) 没有包含一些必要的库。

我不是 Fortran 程序员，所以我希望有更多经验的人能够浏览代码并识别这是否只是使用不同编译器的简单问题，设置一些编译器选项，包括一些特定的库，或者如果我完全错过了其他东西。

完整的源代码可以在目录上方找到：http: [//baydeltaoffice.water.ca.gov/modeling/deltamodeling/models/dsm2/dsm2.cfm](http://baydeltaoffice.water.ca.gov/modeling/deltamodeling/models/dsm2/dsm2.cfm)

首先，我只是尝试在 /DSM2_v8_0_6_src/dsm2_v8_0/src/common 中编译 groups.f （这需要先编译一些其他模块），但最终目标是编译 DSM2_v8_0_6_src/dsm2_v8_0/src/ptm /native/fixedData.f 及其所有依赖项。

我使用的语法遵循这个基本模式：

```
ifort -c DSM2_v8_0_6_src/dsm2_v8_0/src/common/groups.f 
```

为了了解我遇到的错误类型，这里有几种重复出现的类型：

```
groups.f(225): error #5082: Syntax error, found END-OF-STATEMENT when expecting one of: 
( * ) :: , . % + - [ : . ** / // .LT. < .LE. <= .EQ. == ...
write(unit_error,*)"Error in matching text pattern:",trim(pattern)
---------------------------------------------------------------------^

groups.f(265): error #5120: Unterminated character constant
&     "Error in pattern matching. Implementation count does not equal count in NumberMatches"
------^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:51:53.460

如果这可能有助于将有类似问题的人指向正确的方向，在进行一些挖掘之后，我能够确定代码最初是使用 Visual Studio 编译的，编译器选项 FixedFormLineLength="fixedLength132"。因此，从命令行使用 ifort，我可以使用以下基本模式进行编译（为了清楚起见，省略所有包含路径等）：

```
ifort -c -132 DSM2_v8_0_6_src/dsm2_v8_0/src/common/groups.f 
```

至于方言，后来听供应商说，代码大部分是用 Fortran 77 写的，有些部分后来修改为 Fortran 90。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:24:22.360

可能是 F77 或 F90，具体取决于您进行格式化的方式。堆栈溢出格式需要 4 个空格来启动代码。在第 225 行，它是缩进 6 还是根本不缩进。如果它缩进 6 并且第 265 行缩进 5 则它是 F77。

另一个问题是当从一台机器移动到另一台机器时，前导空格是否已被剥离。如果是这种情况，则需要重新插入它们。

在有错误的第一行，检查行终止。所有行都应以 CR LF 或仅以 LF 结尾。如果有混合，编译器将抛出一个摆动。

如果是 F77，请尝试将带有 .f 扩展名的文件重命名为 .for 扩展名。ifort 肯定会把它们选为 f77。

# silverlight - Silverlight XNA - GraphicsDeviceManager

> ID：15724995
> 
> 赞同：0
> 
> 时间：2013-03-31T00:19:47.033
> 
> 标签：silverlight, xna

I am making a game in XNA but wish to port it over to Silverlight XNA. In XNA, there is a `graphics` object at class level which is of type `GraphicsDeviceManager`. In Silverlight XNA however, there is no such thing. What shall I do in this case? I need it since I am passing over stuff like ViewPort.Width etc etc to some game objects so i know where to place them.

Any help will be highly appreciate.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:24:39.400

Ah. I have managed to find out that there is an equivalent in Silverlight XNA. It's called `SharedGraphicsDeviceManager`. I'm just passing over SharedGraphicsDeviceManager.Current.GraphicsDevice.Viewport to the classes and then applying logic appropriately to the objects position.

# user-interface - Sublime theme modification - What class is this?

> ID：15724996
> 
> 赞同：0
> 
> 时间：2013-03-31T00:19:50.953
> 
> 标签：user-interface, themes, sublimetext2, sublimetext, color-scheme

What class is this within the Default.sublime-theme file?

Thanks in advance!

![ ](../Images/c6968620f27a9915452ccddedb80df18.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:19:41.933

The class is called "tab_control". Check [this forum post](http://www.sublimetext.com/forum/viewtopic.php?f=4&t=4648) for more settings to control tab layout.

# c - Having issues with byte array/capturing a screenshot

> ID：15724999
> 
> 赞同：0
> 
> 时间：2013-03-31T00:20:04.817
> 
> 标签：c, winapi

Hi guys I have the following code:

```
#define ScreenXResolution GetDeviceCaps(GetDC(0), HORZRES)
#define ScreenYResolution GetDeviceCaps(GetDC(0), VERTRES)

BYTE *screenData = malloc(sizeof(BYTE) * (3 * ScreenXResolution * ScreenYResolution));
captureScreenshot(&screenData);

void captureScreenshot(BYTE *screenData)
{
    HDC hdc = GetDC(NULL), hdcMem = CreateCompatibleDC(hdc);
    HBITMAP hBitmap = CreateCompatibleBitmap(hdc, ScreenXResolution, ScreenYResolution);
    BITMAPINFOHEADER bmi = {0};
    bmi.biSize = sizeof(BITMAPINFOHEADER);
    bmi.biPlanes = 1;
    bmi.biBitCount = 24;
    bmi.biWidth = ScreenXResolution;
    bmi.biHeight = -ScreenYResolution;
    bmi.biCompression = BI_RGB;
    SelectObject(hdcMem, hBitmap);
    BitBlt(hdcMem, 0, 0, ScreenXResolution, ScreenYResolution, hdc, 0, 0, SRCCOPY);
    GetDIBits(hdc, hBitmap, 0, ScreenYResolution, screenData, (BITMAPINFO*)&bmi, DIB_RGB_COLORS);
    DeleteObject(hBitmap);
    DeleteDC(hdcMem);
    ReleaseDC(NULL, hdc);
} 
```

What I'm trying to achieve is taking a screenshot of their screen and putting it in screenData.

The reason why I need that is so I can check if it's a certain RGB color at whichever position but I'm having issues doing so.

If anyone could help me out that would be greatly appreciated.

thanks!

edit: Added the memory allocation, The way I try to get the RGB is by a function returning a colorref like this:

```
COLORREF getRGBFromScreenshot(BYTE *screenshot, int x, int y)
{
    return RGB(screenshot[3 * ((y * ScreenXResolution) + x) + 2], screenshot[3 * ((y * ScreenXResolution) + x) + 1], screenshot[3 * ((y * ScreenXResolution) + x)]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:36:36.883

You have one, perhaps two problems.

The first is that you pass the argument as an address of the pointer, i.e. `BYTE **`. However, you only use it as a single pointer. This means that when you call `GetDIBits` it will fill in on the wrong address. You should have gotten a warning about this by the compiler.

The second problem is more potential, as there might be code you don't show, but it's that you never initialize the `screenData` pointer. You don't seem to be allocating the memory to copy the bitmap data into.

Both of the above problems will lead to *undefined behavior*, which might seem to work sometimes but not correctly, or may crash at any time.

* * *

As for the pointer issue, a pointer is exactly what it name says: It points to something. In the case of your `screenData` pointer it can be visualized something like this:

```
+------------+      +---------------------------------+
| screenData | ---> | Memory allocated for screenData |
+------------+      +---------------------------------+

```

However, when you use the address-of operator `&` in the call to `captureScreenshot`, you are creating a new pointer to the `screenData` variable:

```
+-------------+      +------------+      +---------------------------------+
| &screenData | ---> | screenData | ---> | Memory allocated for screenData |
+-------------+      +------------+      +---------------------------------+

```

From the simple "pictures" above, it's easy to see why using `&screenData` will not work, it simply points to a completely different memory location.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:38:57.360

As @Joachim Pileborg notes, `screenData` has to be pre-allocated an appropriately-sized buffer. If `screenData` is null, `GetDIBits()` only fills the BITMAPINFO structure (see [here](http://msdn.microsoft.com/en-nz/library/windows/desktop/dd144879%28v=vs.85%29.aspx)). If `screenData` is unassigned, it may point to a random part of memory and this will often cause crashes.

Either way, the code should check the return value from `GetDIBits()` to find out what is going on.